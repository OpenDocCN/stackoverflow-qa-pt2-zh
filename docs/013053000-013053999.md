# StackOverflow 问答 13053000-13053999

# jakarta-ee - 多个 WAR 试图加载彼此的类

> ID：13053001
> 
> 赞同：6
> 
> 时间：2012-10-24T15:59:38.600
> 
> 标签：jakarta-ee, glassfish, war, ear

我在 GlassFish 上部署了一个 Java EE 应用程序。此应用程序内部有 2 个 Web 模块：

*   第一个带有一些 RESTful 服务（业务逻辑）
*   第二次使用 JSF 应用程序（管理控制台）

当我部署我的应用程序时，所有部署都正常，但我`ClassNotFound`在日志中看到许多警告和异常（来自第一次战争和第二次战争）。

第一次战争：

```
SEVERE: Unable to load annotated class: com...web.admin.AdministrationBean
SEVERE: java.lang.ClassNotFoundException: com...web.admin.AdministrationBean 
```

第二次战争：

```
WARNING: WEB9052: Unable to load class com...web.rest.SomeResourse, reason: java.lang.ClassNotFoundException: com...rest.SomeResourse 
```

一切正常，但那些日志警告和错误真的很烦人。

看起来应用程序属性有问题，但我检查了它们，一切看起来都很好（当我尝试将它们彼此分开部署时，一切都很好）。

也许我需要一些`application.xml`设置以在 GlassFish 中单独加载？我用谷歌搜索了它，但没有找到有用的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T08:07:06.350

似乎这是 GlassFish 中的错误：

[http://java.net/jira/browse/GLASSFISH-16249](http://java.net/jira/browse/GLASSFISH-16249)

# c# - C# 动态泛型列表

> ID：13053003
> 
> 赞同：7
> 
> 时间：2012-10-24T15:59:42.133
> 
> 标签：c#, c#-4.0, generics, dynamic, type-conversion

我想创建一个在运行时声明其类型的通用 List<>。

我可以执行以下操作，但由于它是动态的，我怀疑会有速度损失。我正在为异国情调的数据库编写包装器，因此速度至关重要。

```
List<dynamic> gdb = new List<dynamic>() 
```

我在动态泛型类型中阅读[了这篇文章](https://stackoverflow.com/questions/2078914/c-sharp-dynamic-generic-type)，但无法让它工作。具体来说，该对象没有以 List 的形式出现，因此没有 add 方法。

```
 Type ac;

    switch (trail[dataPos].Type)
    {
        case GlobalsSubscriptTypes.Int32:
            ac = typeof(System.Int32);

            break;
        case GlobalsSubscriptTypes.Int64:
            ac = typeof(System.Int64);

            break;

        default:
            ac = typeof(System.String);

            break;
    }

    var genericListType = typeof(List<>);
    var specificListType = genericListType.MakeGenericType(ac);
    var gdb = Activator.CreateInstance(specificListType); 
```

如何让 gdb 显示为以下之一：

```
List<System.Int32>
List<System.Int64>
List<System.String> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:03:54.297

使用`Activator.CreateInstance`后，您可以将结果转换为适当的类型。您可以使用`IList`例如：

```
var gdb = (IList)Activator.CreateInstance(specificListType);
gdb.Add(1); 
```

请注意，`ArgumentException`如果您添加的类型与泛型类型不匹配，则上面会抛出一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:05:16.837

哦，`gdb` *是*正确的类型。由于您在*运行时*确定类型，因此编译器不知道它。因此，它被静态类型化为`object`并且不显示`Add`方法。你有几个选项来解决这个问题：

1.  将其转换为正确的类型：

    ```
    switch (trail[dataPos].Type) 
    { 
        case GlobalsSubscriptTypes.Int32: 
            ((List<int>) gdb).Add(...); 
            break; 
        ...
        default: 
            ((List<String>) gdb).Add(...); 
            break; 
    } 
    ```

2.  转换为一个常见的超类型：

    ```
    ((System.Collections.IList) gdb).Add(...); 
    ```

3.  使用动态调用：

    ```
    dynamic gdb = Activator.CreateInstance(specificListType);
    gdb.Add(...); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:03:17.620

在您的情况下，`gdb`将始终是 a `System.Object`，因为`CreateInstance`返回任何类型的对象。

您在这里有几个选项 - 您可以将其转换为`IList`（非通用），因为您知道它`List<T>`实现了此接口，并使用[`IList.Add`](http://msdn.microsoft.com/en-us/library/system.collections.ilist.add.aspx).

或者，您可以声明它`dynamic`，并使用动态绑定：

```
dynamic gdb = Activator.CreateInstance(specificListType); 
```

这将让您编写代码，就好像它是`List<T>`适当类型的一样，并且调用将在运行时通过动态绑定进行绑定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T16:23:55.200

`List<dynamic>``List<object>`编译与typed 上没有速度惩罚的完全相同的类型`List<int>`，例如，除了装箱值类型。但是，如果您要投到 IList，您仍然会受到拳击处罚，仅供参考。

调用（反射方法）可能会遇到麻烦`Activator`，因为直接调用构造函数可能会慢得多。

这有什么关系吗？除非您实际运行配置文件，否则您不会知道，因为它始终取决于您的实际使用情况。

我最好的客人你真正想做的是：

```
IList gdb;

switch (trail[dataPos].Type)
{
    case GlobalsSubscriptTypes.Int32:
        gdb = new List<int>();
        break;
    case GlobalsSubscriptTypes.Int64:
        gdb = new List<long>();
        break;
    default:
        gdb = new List<string>();
        break;
} 
```

此外，如果您确实需要在没有装箱的情况下进行操作，请使用通用辅助方法来完成所有工作：

```
switch (trail[dataPos].Type)
{
    case GlobalsSubscriptTypes.Int32:
        return Helper<int>(trail[dataPos]);
    case GlobalsSubscriptTypes.Int64:
        return Helper<long>(trail[dataPos]);
    default:
        return Helper<string>(trail[dataPos]);
} 
```

# java - 如果语句布局不正确

> ID：13053009
> 
> 赞同：3
> 
> 时间：2012-10-24T15:59:56.820
> 
> 标签：java, if-statement

我正在尝试创建一个程序来为卡片分配一个值，然后根据哪个玩家获得最高卡片然后他们赢得一分现在我无法工作的区域是最后一个 if 语句，因为它在每一轮而不是 7如所须。

* * *

```
import java.util.*;

public class Card {

    public static void main(String[] args) {

        int player1= 0;
        int player2 = 0;
        int i = 1;

        while ( i <= 7) {
            int player1Card = (int) (Math.random() * 13) + 1;
            int player2Card = (int) (Math.random() * 13) + 1;

            System.out.println("player 1 = " + player1Card);
            System.out.println("player 2 = " + player2Card);

           if (player1Card > player2Card) {
                System.out.println("Player 1 wins!!!");
                player1 = player1 + 1;
            } else if (player1Card == player2Card){
                System.out.println("It's a bore draw");
                player1 = player1 + 0;
                player2= player2 + 0;
            } else {
                System.out.println("Player 2 wins!!!!!");
                player2 = player2 + 1;
            }
            System.out.println("Player 1 points " + player1);
            System.out.println("Player 2 points " + player2);
            i++;

            if (player1 > player2) {
                System.out.println("The winner is player 1 with " + player1 + " points");
            } else if (player1 == player2) {
                System.out.println("Its a draw");
            } else {
                System.out.println("The winner is Player 2 with " + player2 + " points");
            }     
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:03:50.833

您的 if 语句需要在 while 循环结束之后出现。将最后一个移动`}`到要在所有 7 次运行后执行的 if 语句之前。

# android - 不要为同一个应用打开两次

> ID：13053013
> 
> 赞同：1
> 
> 时间：2012-10-24T16:00:04.980
> 
> 标签：android

我制作了一个制作流媒体广播的应用程序。如何防止这种情况，第二次通过单击图标打开应用程序两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:03:57.247

这是一个很好的建议：

> * [首次打开应用时，如何只启动一次活动？](https://stackoverflow.com/questions/7238532/how-to-launch-activity-only-once-when-app-is-opened-for-first-time)
> 
> 我通常所做的是在主 Activity 中添加一个特定共享首选项的检查：如果缺少该共享首选项，则启动单运行 Activity，否则继续主 Activity。当您启动单次运行活动时，创建共享首选项，以便下次跳过

此解决方案与您提出的问题略有不同，但应该为您提供您正在寻找的结果。

另一种可能性可能是`android:launchMode = "singleInstance"`在您的 androidmanifest.xml 中使用：

*   [http://www.intridea.com/blog/2011/6/16/android-understanding-activity-launchmode#](http://www.intridea.com/blog/2011/6/16/android-understanding-activity-launchmode#)

恕我直言...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:04:45.693

要流式传输音乐，您应该使用服务，这样即使您的应用程序关闭，您也可以继续播放。此时，您的 Activity 仅用于与服务通信。当您启动您的应用程序时，只需检查服务是否正在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:08:24.143

通常这不应该发生，如果您的活动已经在运行，系统会在用户重新启动时将其启动。如果您的 Activity 是由另一个应用程序/Activity 在新任务中启动的，或者由于某些其他原因，可能会使用 Intent 来创建您已经运行的 Activity 的新实例，请查看清单中的 singleInstance 或 singleTask 模式：

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

至于流媒体，你应该使用一个服务（最好是绑定服务）来包含你的媒体播放器，以便它可以在后台继续播放，然后活动只是连接到它的服务的客户端，服务保持一个实例。这已被描述为here：

[将 Aac+player 应用设置为后台服务](https://stackoverflow.com/questions/12909425/set-aacplayer-app-as-service-in-background/12909717#12909717)

# string - VB 2010 切掉部分字符串并在文件路径中获取字符串到下一个 '\'

> ID：13053023
> 
> 赞同：1
> 
> 时间：2012-10-24T16:00:36.707
> 
> 标签：string, vb.net, get, filepath

我找不到解决方案如何切断部分字符串（文件路径）并使用剩下的内容来获取另一个字符串。

例如：如果我有文件路径：Q:\2456_blah_blah\file.txt 并且我想将整个文件路径放入一个数组中并从左侧字符 0 到 8 删除（这对于我的应用程序是一致的）所以我会有 'blah_blah \file.txt' 留给我的数组。

（blah_blah 部分将是动态长度，但始终是字母。）

所以我想把'blah_blah\file.txt'从开头拉到下一个'\'符号，得到“blah_blah”作为字符串。在这一点上，我对 VB 字符串不太了解，所以任何帮助将不胜感激。这只是我的想法，如果有更简单的解决方案，我会全力以赴。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:05:46.493

两个`Substring`电话应该可以做到。

```
Dim str As String = "Q:\2456_blah_blah\file.txt"
str = str.Substring(8, str.Length - 8)
Dim blah As String = str.Substring(0, str.IndexOf("\")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:12:22.673

你在寻找这样的东西。由于不了解所有细节，因此很难创建适合您需求的东西，但我会试一试。无论“blah_blah”有多大，无论文件名有多长，无论字符串的第一部分有多长，无论路径有多深，这都会返回字符串的 blah_blah 部分。

```
Dim test As String = "c:\34242_blah_blah\test.txt"

Dim startPos As Integer = test.IndexOf("_") + 1
Dim endPos As Integer = test.IndexOf("\", startPos)
Dim result As String = test.Substring(startPos, endPos - startPos) 
```

# jquery - jQuery 分组匹配并对 1 和 2 应用不同的样式

> ID：13053025
> 
> 赞同：3
> 
> 时间：2012-10-24T16:00:45.110
> 
> 标签：jquery, filtering, each, loops

得到了这段代码（正在处理它）：

```
uniqueHead = {};
$("div.hleft h3").each(function () {
    var thiz = $(this)
    var thisValq = thiz.text();
    var thisVal = thisValq.trim().toLowerCase().toString();
    if(!(thisVal in uniqueHead) ) {
    uniqueHead[thisVal] = "";
    }
    else {
    $(this).parent().parent().css('border-color','red')
    }
}); 
```

该代码适用于可以拆分组的搜索结果的搜索结果列表，即与“结果 2”同名的“结果 1”可以位于位置 1 和 12。

我需要做的是将所有具有相同文本的 h3 分组，然后正确排序并应用不同的类，以便我只在每个组中显示结果 1（稍后可以创建一个显示相似结果的触发器）。

想象一下这样的代码：

```
<div class="blist">
    <div class="hleft">
    <h3>Three</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>One</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>Three</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>Two</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>One</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>Three</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>Two</h3>
    </div>
</div>

<div class="blist">
    <div class="hleft">
    <h3>Three</h3>
    </div>
</div> 
```

上面不是“真正的”代码，但对于 JS 部分，它仍然可以工作。:) 我对后端没有任何控制权，因此无法更改结果的显示方式，因此用于订购等的 JS 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:49:05.897

为了处理分组部分，我认为您应该存储与您找到的每个名称的第一个实例相对应的 DOM 元素（目前，您只是在编写一个空字符串）。然后，在您当前将边框设置为红色的地方，改为从 DOM 中删除重复元素并将其插入到原始匹配元素之后。然后，您可以向隐藏它的每个重复元素添加一个类。

还没有测试过这个，但是像这样的东西应该可以解决问题。

```
uniqueHead = {};
$("div.hleft h3").each(function () {
    var thiz = $(this);
    var thisValq = thiz.text();
    var thisVal = thisValq.trim().toLowerCase().toString();
    if(!(thisVal in uniqueHead) ) {
        uniqueHead[thisVal] = thiz;
    }
    else {
        // remove the element from the dom and place it after the original one
        var originalElement = uniqueHead[thisVal];
        originalElement.after($(this).remove().addClass("hiddenDuplicate"));
    }
}); 
```

稍后如何显示重复项取决于您。您可以将每组重复项包装在父 div 中，然后当单击该 div 中的按钮时，显示所有子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:32:48.770

这类作品。虽然有点难看。:)

```
uniqueHead = {};
$("div.hleft h3").each(function () {
    var thiz = $(this);
    var thisValq = thiz.text();
    var thisVal = thisValq.trim().toLowerCase().toString();
    if(!(thisVal in uniqueHead) ) {
        uniqueHead[thisVal] = thiz;
    }
    else {
        // remove the element from the dom and place it after the original one
        var originalElement = uniqueHead[thisVal];
        originalElement.parent().parent().after($(this).parent().parent().addClass("hiddenDuplicate"));
    }
});​ 
```

**jsFiddle 链接：http:** [//jsfiddle.net/VbePd/3/](http://jsfiddle.net/VbePd/3/)

这样做的一个问题是它颠倒了顺序，因为 after() 不知道已经添加的内容。所以 1,2,3,4 变成 4,3,2,1。

# javascript - Genexus 9 提交

> ID：13053026
> 
> 赞同：3
> 
> 时间：2012-10-24T16:01:01.313
> 
> 标签：javascript, ckeditor, genexus

我是新来的。我在使用 Genexus 9 时遇到了麻烦。有什么方法可以禁用 Genexus 9（Java + web）上的提交。我使用CKEditor，我必须在提交并保存在数据库之前将文本保存在一个变量中，但首先我得到提交，然后文本区域为空，我失去了我写的东西。谢谢你的帮助！！祝你今天过得愉快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-27T01:50:04.520

我不明白您丢失变量的值或丢失的那一刻的问题。

我为您提供genexus 9中常见网络问题的解决方案：

1 - web 变量的值如果不在页面上就会丢失。您必须将它们放在表单中并将它们隐藏在表格/ div 中。

2 - 使用 WebSession 数据类型保存值。然后通过事件加载或保存它们。

# php - 需要帮助从数据库访问图像

> ID：13053027
> 
> 赞同：0
> 
> 时间：2012-10-24T16:01:02.190
> 
> 标签：php, mysql, image

美好的一天，我的 php 有问题，找不到解决方案

```
<?php 
$pid = $_REQUEST['pid'];
$rs = mysql_query("SELECT image from images where patient_id='$pid'") or die(mysql_error());
while($row = mysql_fetch_assoc($rs));
{
$imagebytes = $row['images'];
header("Content-type: image/jpg");
echo $imagebytes;
}
?> 
```

我把它称为另一个 php

```
echo '<img src="myimage.php?pid=51">'; 
```

但我一直收到一个错误“资源解释为图像但作为 MIME 类型文本/html 传输”我被卡了一段时间了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:46:50.210

尝试这个：

```
<?php
if( headers_sent() ) { die('headers already sent by something else'); }
else { header("Content-type: image/jpg"); }

$pid = intval($_REQUEST['pid']);
$rs = mysql_query("SELECT image from images where patient_id=$pid LIMIT 1") or die(mysql_error());
if($row = mysql_fetch_assoc($rs)) {
    echo $row['image'];
}
exit; 
```

它执行最基本的输入验证，因此您不会注入 SQL，检查是否已经发送了标头，并从代码中删除莫名其妙的循环。

此外，它死亡的可能原因是您拥有`SELECT image FROM images`，但您尝试访问的字段`$row['images']`不存在。这可能会打印一条错误消息，导致`text/html`在您尝试设置标头之前发送默认标`image/jpeg`头。

*另外*，为什么`$pid`在您的查询中使用引号？它是一个字符串吗？请告诉我您没有将整数存储为字符串。

# c# - 我对这个 XML 有疑问，我想提取 ea_source 名称

> ID：13053029
> 
> 赞同：-1
> 
> 时间：2012-10-24T16:01:07.743
> 
> 标签：c#, xml, linq, linq-to-xml

我想提取 的值`ea_sourceName`以及`ea_targetName`的值何时`ea_type`为`Aggregation`。

```
 <UML:Association xmi.id="EAID_018EEEB3_9A6B_4102_85C8_3A78261E9AA4" visibility="public" isRoot="false" isLeaf="false" isAbstract="false">
 <UML:ModelElement.taggedValue>
  <UML:TaggedValue tag="style" value="3" /> 
  <UML:TaggedValue tag="ea_type" value="Aggregation" /> 
  <UML:TaggedValue tag="direction" value="Source -> Destination" /> 
  <UML:TaggedValue tag="linemode" value="3" /> 
  <UML:TaggedValue tag="linecolor" value="-1" /> 
  <UML:TaggedValue tag="linewidth" value="0" /> 
  <UML:TaggedValue tag="seqno" value="0" /> 
  <UML:TaggedValue tag="headStyle" value="0" /> 
  <UML:TaggedValue tag="lineStyle" value="0" /> 
  <UML:TaggedValue tag="ea_localid" value="8" /> 
  <UML:TaggedValue tag="ea_sourceName" value="Course" /> 
  <UML:TaggedValue tag="ea_targetName" value="Sem_Progarm" /> 
  <UML:TaggedValue tag="ea_sourceType" value="Class" /> 
  <UML:TaggedValue tag="ea_targetType" value="Class" /> 
  <UML:TaggedValue tag="ea_sourceID" value="18" /> 
  <UML:TaggedValue tag="ea_targetID" value="19" /> 
  <UML:TaggedValue tag="virtualInheritance" value="0" /> 
  </UML:ModelElement.taggedValue> 
```

我试过这段代码，但它没有返回任何东西。我想要的是一个包含`ea_sourceName`like等值`Course`的列表

```
static XNamespace ns2;
ns2 = @"omg.org/UML1.3";
XDoucument MyXmiFile = XDocument.Load(path);
 string Relation = "Association";
 var q = from p in this.MyXmiFile.Descendants(ns2 + Relation)
         select p;

 var m = from p in q.Descendants(ns2 + "TaggedValue")
         where p.Attribute("tag").Value == "ea_type" && p.Attribute("value").Value == "Aggregation"
         select p;

var s = from p in m
        let P1 = p.Attribute("tag").Value
        where P1 == "ea_sourceName"
        select p.Attribute("value").Value;

List<string> Result = new List<string>(s.ToList()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:22:00.010

使用[这个 xml 库](https://github.com/ChuckSavage/XmlLib/)，我使用 XPath 来获取所有 TaggedValue`tag = ea_type`及其`value = Aggregation`. `<tag, value>`然后我为每个元素创建一个字典。

```
XElement root = XElement.Load(file); // or .Parse(xmlstring)
var agg = root.XPath("//TaggedValue[@tag='ea_type' and @value={0}]", "Aggregation");
List<Dictionary<string,string>> list = agg.Select(a => a.Parent.Elements()
        .ToDictionary(b => b.Attribute("tag").Value, 
                      b => b.Attribute("value").Value))
        .ToList(); 
```

我`"Aggregation"`为 XPath 方法设置了一个参数，它可能是硬编码的，但我认为它可能是可变的。那取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:17:24.520

假设可以有多个具有该类型的关联，这里有一个可以为您获取它们的查询：

```
var doc = XDocument.Load(path);
var relation = "Association";
var targetType = "Aggregation";
XNamespace UML = "omg.org/UML1.3";
var associations =
    from association in doc.Descendants(UML + relation)
    let values = association.Element(UML + "ModelElement.taggedValue")
    where ReadTaggedValue(values, "ea_type") == targetType
    select new
    {
        ea_sourceName = ReadTaggedValue(values, "ea_sourceName"),
        ea_targetName = ReadTaggedValue(values, "ea_targetName"),
    }; 
```

使用一些辅助方法来读取标记值：

```
string ReadTaggedValue(XElement values, string tag)
{
    XNamespace UML = "omg.org/UML1.3";
    return values.Elements(UML + "TaggedValue")
        .Where(e => (string)e.Attribute("tag") == tag)
        .Select(e => (string)e.Attribute("value"))
        .Single();
} 
```

# xml - 自定义 XML 输出？

> ID：13053037
> 
> 赞同：5
> 
> 时间：2012-10-24T16:01:39.493
> 
> 标签：xml, asp.net-mvc, asp.net-mvc-4, asp.net-web-api, xmlserializer

在 Framework 4.0 中使用 Web API 只需要 XML 输出，因此从格式化程序集合中删除了 JSON 格式化程序。现在，我想修改 XMLSerializer 输出的标准 XML：

```
<?xml version="1.0"?>
-<ArrayOfCategory xmlns:xsd="http://www.w3.org/2001/XMLSchema"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">-
  <Category>
    <Id>1</Id>
    <Name>Drink</Name>
  </Category>-
  <Category>
    <Id>2</Id>
    <Name>Snack</Name>
  </Category>
</ArrayOfCategory> 
```

我想更改“Arrayof”节点以说出更有意义的内容，并且需要在“Arrayof”节点上方添加更多节点（带有额外信息）。

是否有捷径可寻？还是我必须编写自定义格式化程序/序列化程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T20:19:17.640

> *我想更改“Arrayof”节点以说出更有意义的内容，并且需要在“Arrayof”节点上方添加更多节点（带有额外信息）。*

如果您希望对 XML 进行这种自定义，则应使用 XmlSerializer 而不是 XmlFormatter 中默认使用的 DataContractSerializer。

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

然后，您可以将 Category 集合包装到一个类中，并使用 [XmlRoot]、[XmlElement] 和 [XmlArray] 自定义元素名称。这是一个例子：

```
[XmlRoot(ElementName = "node")]
public class Node
{
    [XmlElement(ElementName= "SomeInfo")]
    public string Node1;

    [XmlElement(ElementName = "OtherInfo")]
    public string Node2;

    [XmlArray("Categories")]
    public List<Category> CatList;
} 
```

有关更多信息，您可以参考这篇 MSDN 文章： [使用属性控制 XML 序列化](http://msdn.microsoft.com/en-us/library/2baksw0z%28VS.80%29.aspx)。

# php - Jquery，Codeigniter 2.1 - 如何检查更新是否成功

> ID：13053038
> 
> 赞同：0
> 
> 时间：2012-10-24T16:01:43.080
> 
> 标签：php, javascript, jquery, codeigniter

在 JQuery 发布之后，如何查看更新是否成功？

jQuery代码：

```
var code = $('#code'),
     id = $('input[name=id]').val(),
     url = '<?php echo base_url() ?>mali_oglasi/mgl_check_paid';
     code.on('focusout', function(){
        var code_value = $(this).val();
        if(code_value.length < 16 ) {
            code.after('<p>Code is short</p>');
        } else {
            $.post(url, {id : id, code : code_value}, function(){
        });
        }
     }); 
```

CI控制器：

```
function mgl_check_paid()
    {
        $code = $this->input->post('code');
        $id = $this->input->post('id');
        $this->mgl->mgl_check_paid($code, $id);
    } 
```

CI型号：

```
function mgl_check_paid($code, $id){
        $q = $this->db->select('*')->from('ad')->where('id_ad', $id)->where('code', $code)->get();
            $q_r = $q->row();
            if ($q->num_rows() != 0 && $q_r->paid == 0) :
                $data['paid'] = 1;
                $this->db->where('id_ad', $id);
                $this->db->update('ad', $data);
                return TRUE;
            else :
                return FALSE;
            endif;
    } 
```

我需要检查更新是否成功并显示适当的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:16:54.430

CI控制器：

```
function mgl_check_paid()
{
    $code = $this->input->post('code');
    $id = $this->input->post('id');
    // could also return a json or whatever info you want to send back to jquery
    echo ($this->mgl->mgl_check_paid($code, $id)) ? 'yes' : 'no';
} 
```

jQuery

```
 var code = $('#code'),
 id = $('input[name=id]').val(),
 url = '<?php echo base_url() ?>mali_oglasi/mgl_check_paid';
 code.on('focusout', function(){
    var code_value = $(this).val();
    if(code_value.length < 16 ) {
        code.after('<p>Code is short</p>');
    } else {
        $.post(url, {id : id, code : code_value}, function(data){
           // display the data return here ... simple alert
           //$('.result').html(data); // display result in a div with class='result'
           alert(data)
        });
    }
 }); 
```

您可能还想阅读更多@ [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)（如果您想做更好的错误检查，例如失败）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:05:39.023

首先，疯狂的道具，I <3 CI 和 jQuery。其次，您需要`echo`返回`data`您的 jQuery 帖子。

Gimmie 5 来解决工作中的问题，我会更详细地编辑这个答案。

# wcf - wcf 异步回调

> ID：13053040
> 
> 赞同：0
> 
> 时间：2012-10-24T16:01:53.520
> 
> 标签：wcf, asynchronous, callback

我有向其客户端发送消息的 WCF 服务。我想异步调用回调方法。我已阅读此答案： [WCF 异步回调](https://stackoverflow.com/questions/5979252/wcf-asynchronous-callback)

但是有一个问题。当我从 WebServiceReference 生成 IMyServiceCallback 时，它同时包含同步和异步方法（而在服务端，只有异步方法的回调合同 - BeginCallbackMethod 和 EndCallbackMethod）。更重要的是，当我从 MyService 调用回调 BeginCallbackMethod 时，在客户端（在回调实现中）它使用的是同步 CallbackMethod。问题是为什么？有没有办法配置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:43:22.957

默认情况下，如果同步和异步都存在，WCF 将调用操作的同步版本；我不知道如何（或是否）可以更改该逻辑，但您可以做的一件事就是从生成的回调接口中简单地删除同步方法。回调代码应该继续工作，它将使用异步实现。您也可以`[OperationContract]`从同步版本中删除该属性，以达到相同的效果。

# extjs - extjs 网格和图表

> ID：13053043
> 
> 赞同：1
> 
> 时间：2012-10-24T16:01:55.870
> 
> 标签：extjs, charts, local-storage

有人知道如何为图表和网格使用同一个商店吗？问题是如何在这个例子中绘制一个代表产品类别价格的条形图

```
 http://www.mysamplecode.com/2012/06/extjs-local-storage-example.html 
```

代码：

```
 <!DOCTYPE html>
  <html>
    <head>
    <title>ExtJs 4 Local Storage Example</title>

    <link rel="stylesheet" type="text/css"
    href="extjs-4.0.1/resources/css/ext-all.css">

    <script type="text/javascript" src="extjs-4.0.1/ext-all-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>

 </head>
 <body>
 <div id="myExample"></div>
 </body>
 </html>

 Ext.Loader.setConfig({ 
 enabled: true
  });

  Ext.application({

    name: 'myApp',
    appFolder: 'app',

     controllers: [
              'ItemMaster'
          ], 
```

//数据容器

```
 launch: function() {
    Ext.create('Ext.container.Container', {
     renderTo: 'myExample',
     height: 250,
        width: 500,
        margin: '5 5 5 5 ',
     layout: 'fit',
        items: [
            {
             xtype: 'itemList'
            }
        ]
    });
  }
}); 
```

// 模型

```
Ext.define('myApp.model.Product', {
extend: 'Ext.data.Model',
fields: [
      'itemNumber',
      'description',
      'category',
      'price',
      ]
 }); 
```

// 店铺

```
Ext.define('myApp.store.Products', {
extend: 'Ext.data.Store',
model: 'myApp.model.Product',
autoLoad: true,
proxy: {
     type: 'localstorage',
    id  : 'myProxyKey'
}

}); 
```

//看法

```
Ext.define('myApp.view.ItemList' ,{
extend: 'Ext.grid.Panel',
alias : 'widget.itemList',
title : 'List of my Store Products',
store : 'Products',
dockedItems: [{
    xtype: 'pagingtoolbar',
    store : 'Products',  
    dock: 'bottom',
    displayInfo: true,
    items: [
            { 
             xtype: 'tbseparator'
            },
            {
                xtype : 'button',
                text: 'Add Product',
                action: 'add'
      }
    ]
}],

initComponent: function() {

 this.columns = [
        {
         header: 'Item Number',  
         dataIndex: 'itemNumber',  
         flex: 1
        },
        {
         header: 'Description', 
         dataIndex: 'description', 
         flex: 2
        },
        {
         header: 'Category',  
         dataIndex: 'category',  
         flex: 1
        },
        {
         header: 'Price', 
         dataIndex: 'price', 
         flex: 1
        }
    ];

    this.callParent(arguments);
   }
   }); 
```

// 用于添加和编辑的表单

```
 Ext.define('myApp.view.ItemEdit', {
 extend: 'Ext.window.Window',
 alias : 'widget.itemEdit',

 title : 'Product Maintenance',
 layout: 'fit',
 autoShow: true,

 initComponent: function() {
    this.items = [
        {
            xtype: 'form',
            items: [
                {
                    xtype: 'textfield',
                    name : 'itemNumber',
                    fieldLabel: 'Item Number',
                    allowBlank: false,
                    msgTarget: 'side'
                },
                {
                    xtype: 'textfield',
                    name : 'description',
                    fieldLabel: 'Description',
                    allowBlank: false,
                    msgTarget: 'side'
                },
                {
                    xtype: 'combobox',
                    name : 'category',
                    fieldLabel: 'Select Category',
                    store: ["Electronics","Software","Gaming"],
                    queryMode: 'local',
                    value: 'Electronics'
                },
                {
                    xtype: 'numberfield',
                    fieldLabel: 'Price',
                    minValue: 0.01,
                    maxValue: 99.99,
                    value: 9.99,
                    name: 'price'
                }
            ]
        }
    ];

    this.buttons = [
        {
            text: 'Save',
            action: 'save'
        },
        {
            text: 'Cancel',
            scope: this,
            handler: this.close
        }
    ];

    this.callParent(arguments);
    }
   }); 
```

//控制器

```
 Ext.define('myApp.controller.ItemMaster', {
   extend : 'Ext.app.Controller',

   stores : ['Products'],
   models : ['Product'],
   views : ['ItemList', 'ItemEdit'],

   init : function() {
   this.control({
   'container > panel' : {
    render : this.onPanelRendered
   },
   'itemList' : {
    itemdblclick : this.editItem
   },
   'itemList button[action=add]' : {
    click : this.addItem
   },
   'itemEdit button[action=save]' : {
    click : this.updateItem
   }
  });
  },

 onPanelRendered : function() {
 //console.log('The panel was rendered');
 },

  editItem : function(grid, record) {
  var view = Ext.widget('itemEdit');
  view.down('form').loadRecord(record);
 },

 updateItem : function(button) {
  var win = button.up('window');
  var form = win.down('form').getForm();
 //check of the form has any errors
 if (form.isValid()) {
 //get the record 
 var record = form.getRecord();
 //get the form values
 var values = form.getValues();
 //if a new record
 if(!record){
  var newRecord = new myApp.model.Product(values);
  this.getProductsStore().add(newRecord);
 }
 //existing record
 else {
  record.set(values);
 }
 win.close();
 //save the data to the Web local Storage
 this.getProductsStore().sync();
}
},

addItem : function(button) {
var view = Ext.widget('itemEdit');
 }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:12:40.457

要使用同一个商店，您需要做的就是为图表指定同一个商店

```
{xtype: 'chart', store: 'Products', ...} 
```

**工作示例** [http://jsfiddle.net/bucg7/5/](http://jsfiddle.net/bucg7/5/)

您还应该了解，ExtJS 在后台神奇地创建了一个商店，并且它被分配了“产品”的全局 ID。

请注意，图表会在您对网格进行排序时重新呈现。如果您不想要这种行为，则需要两个单独的存储，其中图表存储侦听来自网格的更改。

# javascript - 按文本过滤在 Internet Explorer 中不起作用

> ID：13053045
> 
> 赞同：2
> 
> 时间：2012-10-24T16:02:01.160
> 
> 标签：javascript, internet-explorer

我找到了这个示例[如何在网络上的列表框中进行搜索](http://jsbin.com/egogeh/1/edit)。这听起来很不错，但它在 IE 中不起作用。知道要更改代码以使其在 IE 中工作吗？

当我开始在文本框中输入时，列表框的所有值都会消失。

```
jQuery.fn.filterByText = function(textbox, selectSingleMatch) {
  return this.each(function() {
    var select = this;
    var options = [];
    $(select).find('option').each(function() {
      options.push({value: $(this).val(), text: $(this).text()});
    });
    $(select).data('options', options);
    $(textbox).bind('change keyup', function() {
      var options = $(select).empty().data('options');
      var search = $(this).val().trim();
      var regex = new RegExp(search,"gi");

      $.each(options, function(i) {
        var option = options[i];
        if(option.text.match(regex) !== null) {
          $(select).append(
            $('<option>').text(option.text).val(option.value)
          );
        }
      });
      if (selectSingleMatch === true && $(select).children().length === 1) {
        $(select).children().get(0).selected = true;
      }
    });            
  });
};

$(function() {
  $('#select').filterByText($('#textbox'), true);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:11:10.847

更改此行：

```
var search = $(this).val().trim(); 
```

对此：

```
var search = $.trim($(this).val()); 
```

# windows - DI_ICON1 和 IDI_ICON1 有什么区别？

> ID：13053046
> 
> 赞同：4
> 
> 时间：2012-10-24T16:02:08.883
> 
> 标签：windows, rc

我正在开发一个需要在 XP、Vista、7 和 8 上运行的 Windows 应用程序。我正在尝试设置应用程序图标，并且它可以使用 DI_ICON1 作为我的 RC 文件中的标记：

```
DI_ICON1 ICON DISCARDABLE "myapp.ico" 
```

在这里使用 IDI_ICON1 似乎没有做正确的事情。

但是，我还创建了第二个窗口（也在根级别，即不是我的应用程序主窗口的子窗口），并且该第二个窗口的 ALT-TAB 图标没有正确显示；它只是默认的通用应用程序图标。现在向 RC添加*第二*行可以使 ALT-TAB 图标起作用：

```
IDI_ICON1 ICON DISCARDABLE "myapp.ico" 
```

因此，两条线都可以正常工作。但我不知道这些标识符为什么或如何或 wtf 甚至意味着什么。那么它们是什么，它们是在哪里定义的，它们是通过什么魔法起作用的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-22T14:50:15.343

`IDI_ICON1`只是标识资源的唯一名称。你可以给它起任何名字，只要它是唯一的。开发环境应生成一个`Resource.h`文件，该文件使用`#define`预处理器指令为其分配一个 16 位无符号整数唯一标识符。

看：

*   [https://docs.microsoft.com/en-us/windows/win32/menurc/icon-resource](https://docs.microsoft.com/en-us/windows/win32/menurc/icon-resource)
*   [https://docs.microsoft.com/en-us/cpp/windows/resource-files-visual-studio?view=msvc-170](https://docs.microsoft.com/en-us/cpp/windows/resource-files-visual-studio?view=msvc-170)

`IDI_ICON1`可能只是某人想出的一个约定，其中的`IDI`意思是“ID Icon”，而 1 是因为它是第一个定义的图标。所以，如果你定义另一个图标，你会用`IDI_ICON2`. 如果您要定义位图资源，您可以用`IDB_BITMAP1`.

`DISCARDEABLE`仅适用于 16 位 Windows。请参阅：[https ://docs.microsoft.com/en-us/windows/win32/menurc/common-resource-attributes](https://docs.microsoft.com/en-us/windows/win32/menurc/common-resource-attributes)

# java - Eclipse 中带有 TestNG 插件的 @BeforeSuite 和 @AfterSuite 问题

> ID：13053049
> 
> 赞同：0
> 
> 时间：2012-10-24T16:02:24.267
> 
> 标签：java, testng

我有几个套房，如 Suite1、Suite2、Suite3 等。我还有一个名为 CommonSuite 的通用套件，其中包含`@BeforeSuite`和`@AfterSuite`方法。我有一个配置了所有套件的 testng.xml，并且我正在使用 maven 故障安全插件来运行测试。一切正常。

现在我的问题是，如果我想在 Eclipse 中使用 TestNG 插件运行/调试*仅*说Suite1，我如何确保我的 CommonSuite 也包含在 Suite1 中？我知道的一种肮脏方式是，我可以评论我不想在 testng.xml 中运行的所有套件，*只*保留 CommonSuite 和 Suite1，然后作为 TestNG 套件运行/调试。不过，这似乎不是正确的方法。还有其他更好的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:14:04.407

嗨，最好的方法是为西装实现一个监听器类实现 ISuiteListener

基本类如下所示

```
 public class PlatformSuite implements ISuiteListener { 

    /**
     * This method is invoked before the SuiteRunner starts.
     */
    public synchronized void onStart(ISuite suite) {
        /*Your before suite implementation here*/
    }

    /**
     * This method is invoked after the SuiteRunner has run all
     * the test suites.
     */

    public void onFinish(ISuite suite) {
         /*Your after suite implementation here*/
    }

}} 
```

对于 Eclipse 插件，您可以将 testng xmal 指定为“模板 XML 文件”

要在 testng.xml 中启动侦听器，您可以添加以下内容，请记住设置不可用的默认侦听器设置

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="DssTestSuite" parallel="false">
    <parameter name="useDefaultListeners" value="false"/>
    <listeners>
        <listener class-name="org.someonr.something.core.PlatformSuite"/>
    </listeners>
<test name="sample Test" parallel="false" verbose="2">
    <packages>
    </packages>
    <classes>         
    </classes>
</test> 
```

此调用将在每个测试套件之前和每个测试套件之后调用

# mysql - 使用mysql将丢失的记录从一个表插入到另一个表

> ID：13053052
> 
> 赞同：7
> 
> 时间：2012-10-24T16:02:25.090
> 
> 标签：mysql, sql

我不知道为什么我对这个查询感到困惑。

我有两个表：记录和`Table A`记录。两个表都需要包含相同的数据，但存在一些不匹配。`900``Table B``800`

我需要编写一个 mysql 查询来插入丢失的`100`记录`Table A`到`Table B`.

最后，两者`Table A`和`Table B`应该是相同的。

我不想先截断所有条目，然后再从另一个表中插入。所以请任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-10T18:14:57.697

也可以`LEFT OUTER JOIN`用于此。这将避免子查询开销（当系统可能对外部查询的*每条*记录执行一次子查询时），就像在 John Woo 的回答中一样，并且将避免做不必要的工作来覆盖已经存在的 800 条记录，例如 user2340435 的记录：

```
INSERT INTO b
SELECT a.* FROM a
LEFT OUTER JOIN b ON b.id = a.id
WHERE b.id IS NULL; 
```

这将首先选择所有行`A`和`B`表，包括两个表中的所有列，但对于存在于表中`A`和不存在于表的`B`所有列中的`B`行将是`NULL`. 然后它只过滤后面的行（`WHERE b.id IS NULL`），最后将所有这些行插入到`B`表中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T16:20:07.993

我想你可以用`IN`这个。（*这是您查询的简化*）

```
INSERT INTO table2 (id, name)
SELECT id, name
FROM table1
WHERE (id,name) NOT IN 
       (SELECT id, name
        FROM table2); 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/744755/2)

正如您在演示中看到的那样，`table2`只有 1 条记录，但在执行查询后，在 上插入了 2 条记录`table2`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-10T21:20:05.393

如果它是 mysql 并且表是相同的，那么这应该可以工作：

```
REPLACE INTO table1 SELECT * FROM table2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T15:54:01.827

`group by`当使用and`having`子句时，代码也可以工作。经过测试的 SQL 2012 (11.0.5058) Tab1 是包含新记录的源，Tab 2 是要更新的目标。选项卡 2 也有一个身份列。（是的，伙计们，现实世界并不像实验室作业那样干净整洁）

```
INSERT INTO Tab2
SELECT  a.T1,a.T2,a.T3,a.T4,a.Val1,a.Val2,a.Val3,a.Val4,-9,-9,-9,-9,MIN(hits) MinHit,MAX(hits) MaxHit,SUM(count) SumCnt, count(distinct(week)) WkCnt
FROM Tab1 a 
LEFT OUTER JOIN Tab2 b ON b.t1 = a.t1 and b.t2 = a.t2 and b.t3 = a.t3 and b.t4 = a.t4 and b.val1 = a.val1 and b.val2 = a.val2  and b.val3 = a.val3  and b.val4 = a.val4 
WHERE b.t1 IS NULL or b.Val1 is NULL
group by a.T1,a.T2,a.T3,a.T4,a.Val1,a.Val2,a.Val3,a.Val4 having MAX(returns)<4 and COUNT(distinct(week))>2 ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-16T17:48:18.950

这会将丢失的记录插入 Table1

```
INSERT INTO Table2
(Col1, Col2....)
(
SELECT   Col1, Col2,... FROM Table1
EXCEPT
SELECT  Col1, Col2,... FROM Table2
) 
```

然后，您可以运行更新查询来匹配不同的记录。

```
UPDATE Table2
SET
Col1= T1.Col1,
Col2= T1.Col2,
FROM
Table T1
INNER JOIN
Table2 T2
ON
T1.Col1 = T2.Col1 
```

# php - 超级简单的正则表达式（preg_replace）不起作用

> ID：13053055
> 
> 赞同：2
> 
> 时间：2012-10-24T16:02:29.867
> 
> 标签：php, regex, regex-negation

下面的代码应该用 K 替换所有没有跟 1 的 X，但它不能按预期工作。任何人都可以阐明问题可能是什么？谢谢！

```
<?php
    $test = "XXXX X1 X2 XXX X1";
    $test = preg_replace("/X([^1])/", 'K$1', $test);

    echo $test;
?>

Input: XXXX X1 X2 XXX X1
Expected output: KKKK X1 K2 KKK X1

Actual output: KXKX X1 K2 KXK X1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:06:34.237

匹配不能重叠。因此，在找到`XX`正则表达式引擎后，它将在第三个字符处继续搜索。

改用负前瞻（这不会是匹配本身的一部分，但只能确保 your`X`后面没有 a `1`）：

```
 $test = preg_replace("/X(?!1)/", 'K', $test); 
```

这也将使`X`在字符串的最后替换 a 工作（以前不会工作，因为`[^1]`要求实际上有一个字符（而不是 a `1`）。

# php - 如何使 php 脚本作为超级用户工作

> ID：13053058
> 
> 赞同：0
> 
> 时间：2012-10-24T16:02:32.220
> 
> 标签：php, permissions, cron, crontab

我假设如果我的 php 脚本的权限设置为 root，那么该脚本将能够以 root 用户身份执行命令。但显然，事实并非如此。我注意到我不能在 www 之外写任何东西，当我想在 /test.txt 写一个文本文件时，它不会创建一个文件，因为 / 的权限说非 root 用户只能访问但不能创建或删除但脚本本身具有root权限。如果我在 / 更改权限，那么它工作正常。为什么我的php脚本，设置为root权限，不能写入/目录？

我该怎么做才能使 php 脚本以超级用户身份执行？

我想使用 exec() 但我似乎无法让它工作。我希望能够创建一个 crontab，但它不起作用。我写了这样的代码：

```
 exec("crontab -l > test.txt; echo '* * * * * echo hi! > /root/Desktop/hi.txt'>> test.txt; crontab test.txt"); 
```

但它不会起作用。如果我将字符串复制到终端，它会按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:08:14.017

设置脚本文件本身的权限不会影响脚本的运行身份。它会影响谁可以访问脚本。

要以 root 身份运行脚本，这取决于上下文。您是在 Web 服务器中运行它还是这是一个 CLI 脚本？如果是后者，那么您必须在以 root 用户身份或使用 sudo 命令登录时运行它。如果它在 web 服务器中作为 apache，那么您必须将 apache 配置为以 root 身份运行，但强烈建议不要这样做，因为它会带来很多安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:26:26.570

脚本的权限/所有权与该脚本作为哪个用户运行无关。假设它有权这样做，它将作为执行它的任何用户运行。*有时*您可以使用 setuid 'sticky bit' 权限来执行此类操作，但大多数系统都不允许这样做，而且我能想到的最不冒犯性的术语来描述允许它是“不可取的”。

> 我注意到我不能在 www 之外写任何东西

因为apache配置正确。理想情况下，它将作为非 root 用户 [通常是 www] 运行，并且任何脚本也将以该用户身份运行。与其告诉您如何将 apache 配置为不太安全，为什么不授予 apache 用户访问您想要访问/修改的文件/目录的权限？

# c# - 仅在 MVC3 中选择了部分视图上的过滤器后，如何在视图中呈现图形

> ID：13053059
> 
> 赞同：0
> 
> 时间：2012-10-24T16:02:32.817
> 
> 标签：c#, asp.net-mvc-3, razor, graph, partial-views

我在**C#**和**Razor中有一个****ASP.NET MVC3**应用程序。

 ****我想创建一个带有过滤器（例如年、月）的页面，一旦用户选择过滤器并单击提交按钮，就会显示一个图表。我使用以下代码（不工作）： **查看**Stats.cshtml

```
@{
   ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>

@{ Html.RenderPartial("StatsFilter", Model.FilterViewModel);  }

<img src="@Url.Action("DrawChart")" alt="Drawing chart with HTML Helper" /> 
```

**控制器**

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View("Stats", StatsViewModel);
        }

        [HttpPost]
        public ActionResult Index(FiltersViewModel filters)
        {
            //Retrieve Data
            return View("Stats", StatsViewModel);
        }

        public ActionResult DrawChart(GraphViewModel graph)
        {
            var chart = new Chart(width: 500, height: 600)
                .AddTitle("Chart Title")
                .AddSeries(
                            chartType: "Line",
                            name: "Stats",
                            xValue: chartData.XValues.Keys.ToList(),
                            yValues: chartData.XValues.Values.ToList())
                .GetBytes("png");
            return File(chart, "image/bytes");
        }
    } 
```

**视图模型**

```
public class StatsViewModel
{
    public FilterViewModel Filters { get; set; }
    public GraphViewModel Graph { get; set; }
} 
```

有了这样的解决方案，我不知道如何将 ViewModel 传递给图形。此外，如果我进行一些小的调整（例如`GraphViewModel`从`DrawChart`操作方法中删除），即使没有数据，也会显示图表。

我想让用户可以选择过滤器然后显示图表。我希望我走在正确的道路上，并且我的代码不会被完全丢弃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:10:51.300

你`GraphViewModel graph`在控制器中的任何地方都没有使用。所以你不需要这个参数。

但是，如果您需要将一些 vales 传递给您的控制器，那么您可以使用 url 中的查询字符串来完成。****

# java - 圆线交点

> ID：13053061
> 
> 赞同：11
> 
> 时间：2012-10-24T16:02:38.593
> 
> 标签：java, collision, geometry

```
public static ArrayList<IntPoint> getCircleLineIntersectionPoint(IntPoint pointA, IntPoint pointB, IntPoint center, int radius) {
    // returns a list of intersection points between a line which passes through given points,
    // pointA and pointB, and a circle described by given radius and center coordinate

    double disc, A, B, C, slope, c;
    double x1, x2, y1, y2;
    IntPoint point1, point2;
    ArrayList<IntPoint> intersections = new ArrayList<IntPoint>();  
    try{
        slope = Util.calculateSlope(pointA, pointB);
    }catch (UndefinedSlopeException e){         
        C =  Math.pow(center.y, 2) + Math.pow(pointB.x, 2) - 2 * pointB.x * center.x + Math.pow(center.x, 2) - Math.pow(radius, 2);
        B = -2 * center.y;
        A = 1;
        disc = Math.pow(B, 2) - 4 * 1 * C;
        if (disc < 0){
            return intersections;
        }
        else{
            y1 = (-B + Math.sqrt(disc)) / (2 * A);
            y2 = (-B - Math.sqrt(disc)) / (2 * A);

            x1 = pointB.x;
            x2 = pointB.x;
        }
        point1 = new IntPoint((int)x1, (int)y1);
        point2 = new IntPoint((int)x2, (int)y2);
        if (Util.euclideanDistance(pointA,  point2) > Util.euclideanDistance(pointA, point1)){
            intersections.add(point1);
        }
        else{
            intersections.add(point2);
        }
        return intersections;
    }
    if (slope == 0){
        C =  Math.pow(center.x, 2)  + Math.pow(center.y, 2) + Math.pow(pointB.y, 2) - 2 * pointB.y * center.y  - Math.pow(radius, 2);
        B = -2 * center.x;
        A = 1;
        disc = Math.pow(B, 2) - 4 * 1 * C;
        if (disc < 0){
            return intersections;
        }
        else{
            x1 = (-B + Math.sqrt(disc)) / (2*A);
            x2 = (-B - Math.sqrt(disc)) / (2*A);
            y1 = pointB.y;
            y2 = pointB.y;
        }
    }
    else{
        c = slope * pointA.x + pointA.y;
        B = (2 * center.x + 2 * center.y * slope  + 2 * c * slope);
        A = 1 + Math.pow(slope, 2);
        C = (Math.pow(center.x, 2) + Math.pow(c, 2) + 2 * center.y * c + Math.pow(center.y, 2) - Math.pow(radius, 2));
        disc = Math.pow(B, 2) - (4 * A * C);

        if (disc < 0){
            return intersections;
        }
        else{
            x1 = (-B + Math.sqrt(disc)) / (2 * A);
            x2 = (-B - Math.sqrt(disc)) / (2 * A);

            y1 = slope * x1 - c;
            y2 = slope * x2 - c;
        }
    }

    point1 = new IntPoint((int)x1, (int)y1);
    point2 = new IntPoint((int)x2, (int)y2);
    if (Util.euclideanDistance(pointA,  point2) > Util.euclideanDistance(pointA, point1)){
        //if (Util.angleBetween(pointA, pointB, point1) < Math.PI/2){
            intersections.add(point1);
        //}
    }
    else{
        //if (Util.angleBetween(pointA, pointB, point1) < Math.PI/2){
            intersections.add(point2);
        //}
    }       
    return intersections;
} 
```

我正在使用上述算法来测试圆和线之间的交点。它有时可以正常工作，但有时会失败。该代码表示​​从圆和线方程同时求解 x 和 得到的`(x-a)^+(y-b)^2=r^2`方程`y = mx - mx1 + y1`。有没有人知道我的数学或其他地方哪里出错了？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-24T18:05:42.667

您的计算似乎很长，我看不到您测试的不同案例的用途。无论如何，因为我发现这个问题很有趣，所以我尝试自己解决它并提出以下问题。随意替换`double radius`并`int radius`使用`IntPoint`s，但请注意，每次转换时，如评论中所讨论的，不是精确整数交点的结果都会出错。

执行计算的背景是这样的：从点 A，矢量 AB 的缩放版本指向圆上的一个点。该点与中心的距离半径。因此，|AC + scalingFactor * AB|=r。

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class CircleLine {

    public static List<Point> getCircleLineIntersectionPoint(Point pointA,
            Point pointB, Point center, double radius) {
        double baX = pointB.x - pointA.x;
        double baY = pointB.y - pointA.y;
        double caX = center.x - pointA.x;
        double caY = center.y - pointA.y;

        double a = baX * baX + baY * baY;
        double bBy2 = baX * caX + baY * caY;
        double c = caX * caX + caY * caY - radius * radius;

        double pBy2 = bBy2 / a;
        double q = c / a;

        double disc = pBy2 * pBy2 - q;
        if (disc < 0) {
            return Collections.emptyList();
        }
        // if disc == 0 ... dealt with later
        double tmpSqrt = Math.sqrt(disc);
        double abScalingFactor1 = -pBy2 + tmpSqrt;
        double abScalingFactor2 = -pBy2 - tmpSqrt;

        Point p1 = new Point(pointA.x - baX * abScalingFactor1, pointA.y
                - baY * abScalingFactor1);
        if (disc == 0) { // abScalingFactor1 == abScalingFactor2
            return Collections.singletonList(p1);
        }
        Point p2 = new Point(pointA.x - baX * abScalingFactor2, pointA.y
                - baY * abScalingFactor2);
        return Arrays.asList(p1, p2);
    }

    static class Point {
        double x, y;

        public Point(double x, double y) { this.x = x; this.y = y; }

        @Override
        public String toString() {
            return "Point [x=" + x + ", y=" + y + "]";
        }
    }

    public static void main(String[] args) {
        System.out.println(getCircleLineIntersectionPoint(new Point(-3, -3),
                new Point(-3, 3), new Point(0, 0), 5));
        System.out.println(getCircleLineIntersectionPoint(new Point(0, -2),
                new Point(1, -2), new Point(1, 1), 5));
        System.out.println(getCircleLineIntersectionPoint(new Point(1, -1),
                new Point(-1, 0), new Point(-1, 1), 5));
        System.out.println(getCircleLineIntersectionPoint(new Point(-3, -3),
                new Point(-2, -2), new Point(0, 0), Math.sqrt(2)));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-15T22:43:59.537

这里有一个解决方案`import javax.vecmath.Vector2d;`

```
static Vector2d[] circleLineIntersection1(Vector2d a, Vector2d b, Vector2d o, double radius) {

    Vector2d p1 = new Vector2d(a);
    Vector2d p2 = new Vector2d(b);
    p1.sub(o);
    p2.sub(o);

    Vector2d d = new Vector2d();
    d.sub(p2, p1);

    double det = p1.x * p2.y - p2.x * p1.y;

    double dSq = d.lengthSquared();

    double discrimant = radius * radius * dSq - det * det;

    if (discrimant < 0) {
        return new Vector2d[0];
    }

    if (discrimant == 0) {
        Vector2d[] t = new Vector2d[1];
        t[0] = new Vector2d(det * d.y / dSq + o.x, -det * d.x / dSq + o.y);

        return t;
    }

    double discSqrt = Math.sqrt(discrimant);

    double sgn = 1;
    if (d.y < 0) {
        sgn = -1;
    }

    Vector2d[] t = new Vector2d[2];
    t[0] = new Vector2d((det * d.y + sgn * d.x * discSqrt) / dSq + o.x, (-det * d.x + Math.abs(d.y) * discSqrt) / dSq + o.y);
    t[1] = new Vector2d((det * d.y - sgn * d.x * discSqrt) / dSq + o.x, (-det * d.x - Math.abs(d.y) * discSqrt) / dSq + o.y);
    return t;

} 
```

# r - 基于受试者数量组合的数据转换

> ID：13053062
> 
> 赞同：1
> 
> 时间：2012-10-24T16:02:38.337
> 
> 标签：r

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:46:47.290

This will do the job:

```
# first define the function we will apply to each group
f <- function(group) {
    if (nrow(group) == 1 | sum(group$status) == 0) 
        group
    else 
        with(group, {
                v1 = combn(v1, sum(status), sum)
                v2 = combn(v2, sum(status), sum)
                status = ifelse(combn(status, sum(status), sum) == sum(status), 1, 0)
                subject = seq_along(v1)
                group = rep(group, length.out=length(v1))
                data.frame(group, subject, status, v1, v2)
        })
}

# apply f using by and collapse the results into a data.frame
do.call(rbind, by(data, INDICES=data$group, f))

#     group subject status v1 v2
# 1.1     1       1      0 11 31
# 1.2     1       2      1  7 30
# 1.3     1       3      0 10 19
# 2.4     2       1      0 15 93
# 2.5     2       2      0 19 83
# 2.6     2       3      0 16 87
# 2.7     2       4      1 13 19
# 3       3       1      1  9 37 
```

# file - Bash - 使用“/”获取文件

> ID：13053063
> 
> 赞同：0
> 
> 时间：2012-10-24T16:02:39.837
> 
> 标签：file, bash, scripting

我以这种方式实现的文件系统中有一个缓存。

1.  为了存储一个值，我做了类似的事情

    ```
    echo ""$KEY1"_"$KEY2"="$VALUE" >> $CACHE_DIR/$INDEX.cache 
    ```

2.  要获得一个值，首先我获取缓存文件：

    ```
    source $CACHE_DIR/$INDEX.cache 
    ```

    然后我回应`"$KEY1"_"$KEY2"`

缓存示例：

```
foo1_foo2=wohohhowwho 
```

问题在于我有一些键中有一个“/”，所以当我有这个时：

```
foo3_foo/4=wohohhowwho 
```

并获取文件，它说

```
cache/15637.cache: line 1: foo3_foo/4=wohohhowwho: No such file or directory 
```

因为`/`.

源命令是否有一个选项可以不在路径中搜索文件而只将内容计为 vars？我可以逃脱`/`，但还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:06:50.293

没有其他方法，因为`/`不允许作为 bash 变量中的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:50:57.643

你必须“清理”你的键，因为 bash 只支持变量名：字母、数字和下划线字符。

```
KEY1=${KEY1//\//_}
KEY2=${KEY2//\//_} 
```

# php - 如何将重写规则更改为仅读取图像

> ID：13053076
> 
> 赞同：0
> 
> 时间：2012-10-24T16:03:22.203
> 
> 标签：php, .htaccess

大家好，我有这个问题，因为我的重写规则如下所示。但是每次我使用这段代码时，js文件都不起作用。

```
RewriteRule ^([^thumb].*\.[jJ].*)$ /images/files/w.php?i=$1 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:06:41.207

快速而肮脏的“解决方案”，因为您显然想将 jpeg 和 js 分开：

```
RewriteRule ^([^thumb].*\.[jJ][pP].*)$ /images/files/w.php?i=$1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:16:07.040

为了处理不仅仅是jpgs，您可以将其更改为以下内容：

```
RewriteRule ^([^thumb].*\.(jpe?g|png|gif).*)$ /images/files/w.php?i=$1 
```

这将涵盖`jpg`、和文件扩展名`jpeg`，但不匹配 javascript 文件。`png``gif`

注意：`[^thumb].*`不会匹配任何以`t`, `h`, `u`,`m`或`b`, 开头的文件名（例如，`test.jpg`, `home.jpg`, `umbrella.jpg`, `monster.jpg`, 或`beach.jpg`不会匹配）不仅仅是以 , 开头的文件`thumb...`，对于整个单词, `thumb`，你需要一个否定的前瞻`(?!regex)`。要使规则不匹配以“thumb”开头的文件，规则应如下所示：

```
RewriteRule ^((?!thumb).*\.(jpe?g|png|gif).*)$ /images/files/w.php?i=$1 
```

最后一个问题是规则处理文件扩展名之后的文本，我认为这意味着您可能拥有如下所示的网址：

`http://www.example.com/test.png?foo=a&b=baz`

您的规则将创建一个最终看起来像的重写

`http://www.example.com/images/files/w.php?i=test.png?a=foo&b=baz`

这不是一个有效的 url，因为`?`查询字符串中现在有两个 s。为了解决这个问题，我会使用以下正则表达式。

```
RewriteRule ^((?!thumb).*\.(?:jpe?g|png|gif))\??(.*)$ /images/files/w.php?i=$1&$2 
```

此正则表达式规则将生成正确格式的 url

`http://www.example.com/images/files/w.php?i=test.png&a=foo&b=baz`

# version-control - Windows上的RCS是否有责备/注释？

> ID：13053079
> 
> 赞同：4
> 
> 时间：2012-10-24T16:03:34.200
> 
> 标签：version-control, rcs

我正在访问 Windows 上 RCS 中控制的一些源代码。

如何找出源代码的特定行最后更改的版本是哪个版本？根据 VCS，该功能被称为“责备”或“注释”。

[http://blame.sourceforge.net/](http://blame.sourceforge.net/)项目听起来只是它的 Linux 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T23:48:44.853

CVS 和 RCS 使用相同的文件格式。

安装 CVS，创建一个空的 CVS 存储库，手动将 RCS`*,v`文件复制到 CVS 存储库中，然后运行`cvs annotate`​​.

另请参阅此问题：[如何在 Windows 7 中安装 CVS](https://stackoverflow.com/q/15222318/827263)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T23:15:08.533

不，没有内置功能。作为替代方案，这里有一些解决方法：

*   [Emacs 版本控制](http://www.emacswiki.org/emacs/VersionControl)
*   [Emacs RCS](http://www.emacswiki.org/emacs/RevisionControlSystem)
*   [Tcl RCS](http://tcllib.sourceforge.net/doc/rcs.html)

# d3.js - 如何使用 Cubism.js 进行“一次准备，多次回调”

> ID：13053084
> 
> 赞同：1
> 
> 时间：2012-10-24T16:03:42.873
> 
> 标签：d3.js, cubism.js

D3.js Cubism.js ...漂亮的工作。

我尝试将 Cubism.js 与自己的数据源一起使用，需要同步显示多个水平线图。
更新间隔非常短（< 1s），这就是为什么我需要从数据源批量获取值 - 一次调用。
决定，如果在比较请求的 START,STOP 与存储的 lastSTART,lastSTOP 时加载最新数据。

它在我的代码中工作，但我不知道如何正确调用每个水平图的数据更新 CALLBACK 函数。
**显示时仅更新最后一个图形。**

有人可以帮我解决这个问题吗？

代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="sk">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta charset="utf-8"/>
        <title>DRI_realtimeSeries</title>
        <link type="text/css" rel="stylesheet" href="./style.css"/>
<script src="./d3.v2.js"></script>
<!-- <script src="./d3.js"></script>   problem with d3.CSV !!!! -->
<script src="./cubism.v1.js"></script>
    </head>
<body>
<div id="view"></div>

<script id="JSON" type="text/javascript">//<![CDATA[
var context = cubism.context()
    .serverDelay(1 * 1000) 
    .clientDelay(1 * 1000)
    .step(1000) 
;
var horizon = context.horizon(); 
var metrics = [ "en", "es", "de", "fr"];
var lastStart = null, lastStop = null;
var callArr = {};

var horizon = context.horizon()
    .metric(function(d) { 
        return context.metric(
            function(start, stop, step, callback) {
    callArr[md] = callback;
                if ((+lastStart != +start) || (+lastStop != +stop)) {
                    lastStart = +start; lastStop = +stop;
                  d3.json("http://localhost/COMPONENTS/Cubism/DRI_data.php"
                      + "?expression=" + encodeURIComponent("sum(request.eq(language,'" + md + "'))")   
    + "&list=" + encodeURIComponent(JSON.stringify(metrics))
                      + "&start=" + d3.time.format.iso(start)       //cubism_cubeFormatDate(start)
                      + "&stop=" + d3.time.format.iso(stop)     //cubism_cubeFormatDate(stop)
                      + "&step=" + step, 
                      function(data) {
{"en":[ {"time":"2012-10-24T14:47:53.000Z","value":-37},
        {"time":"2012-10-24T14:47:54.000Z","value":115},
        {"time":"2012-10-24T14:47:55.000Z","value":100},
        ....
        {"time":"2012-10-24T14:48:00.000Z","value":94}
    ],
 "es":[ {"time":"2012-10-24T14:47:53.000Z","value":32},
        ....
        {"time":"2012-10-24T14:48:00.000Z","value":0}
    ],
 ....
}

                        for (var imd in callArr) {
                            if (callArr.hasOwnProperty(imd)) {
                                var callbackI = callArr[imd];
//HERE is something WRONG
                                if (!data) { return callbackI(new Error("unable to load data")); };
                                callbackI( null, data[imd].map( function(d) { return d.value; } ));
                            }
                        }
                      }
                    );
                }
            }, md=d );
        }
    );

d3.select("body").selectAll(".horizon")
  .data(metrics)
  .enter().append("div")
  .attr("class", "horizon")
  .call(horizon);
//]]></script> 
</body>
</html> 
```

PHP 后端：
仅用于模拟目的 - 返回带有时间戳值的命名数组的 JSON 对象，
可能类似于 Cube.js

```
<?php
//default:
    $GP = array('list' => '["all"]');
    if (isset($_POST['expression']))    $GP['expression']   =$_POST['expression'];      elseif (isset($_GET['expression'])) $GP['expression']   =$_GET['expression'];
    if (isset($_POST['start']))         $GP['start']        =$_POST['start'];           elseif (isset($_GET['start']))      $GP['start']        =$_GET['start'];
    if (isset($_POST['stop']))          $GP['stop']         =$_POST['stop'];            elseif (isset($_GET['stop']))       $GP['stop']         =$_GET['stop'];
    if (isset($_POST['step']))          $GP['step']         =$_POST['step'];            elseif (isset($_GET['step']))       $GP['step']         =$_GET['step'];
    if (isset($_POST['list']))          $GP['list']         =$_POST['list'];            elseif (isset($_GET['list']))       $GP['list']         =$_GET['list'];

    if ( ! (    isset($GP['expression']) && isset($GP['start']) &&  isset($GP['stop'])  &&  isset($GP['step'])  )   )   {
        exit;
    }
    $iso_format = "%Y-%m-%dT%H:%M:%S.%LZ";
    $start = umktime(strptime($GP['start'], $iso_format));
    $stop  = umktime(strptime($GP['stop' ], $iso_format));
    $step =  $GP['step' ];  //milisecs

    $GP['list'] = json_decode($GP['list']);  if (! $GP['list']) { exit;}
    $cnt = count($GP['list']);
    $larray = array();

    for($i = 0; $i < $cnt; $i++) {
        $rarray = array();
        for ($dt = $start; $dt <= $stop; $dt+= ($step/1000.)) {
            $rarray[] = 
            array(
                "time"=> strftime("%Y-%m-%dT%H:%M:%S",$dt).sprintf(".%03dZ",($dt - (int)$dt)*1000),
                "value"=> rand(-50,150)
            );
        }
        $larray[$GP['list'][$i]] = $rarray;
    }
    echo json_encode($cnt == 1 ? $rarray : $larray);

function umktime($u_tm_arr) {
//int mktime ([ int $hour = date("H") [, int $minute = date("i") [, int $second = date("s") [, int $month = date("n") [, int $day = date("j") [, int $year = date("Y") [, int $is_dst = -1 ]]]]]]] )
    $mkt = mktime(  $u_tm_arr['tm_hour'],$u_tm_arr['tm_min'],$u_tm_arr['tm_sec'],$u_tm_arr['tm_mon']    + 1,$u_tm_arr['tm_mday'],($u_tm_arr['tm_year']  + 1900) - 2000  );
    $mkt = (float)$mkt;
    if (isset($u_tm_arr['tm_msec'])) {      $mkt += (((float)$u_tm_arr['tm_msec'])/1000) ;  }
    return $mkt;
}

//Windows strptime
function strptime($date, $format) { 
    $masks = array( '%d' => '(?P<d>[0-9]{2})',  '%m' => '(?P<m>[0-9]{2})',  '%Y' => '(?P<Y>[0-9]{4})',  
                    '%H' => '(?P<H>[0-9]{2})',  '%M' => '(?P<M>[0-9]{2})',  '%S' => '(?P<S>[0-9]{2})',      // usw.. 
                    '%L' => '(?P<L>[0-9]{3})',  '%u' => '(?P<u>[0-9]{3})', 
    ); 
    $rexep = "#".strtr(preg_quote($format), $masks)."#";
    if(!preg_match($rexep, $date, $out)) {
      return false; 
    }
    $ret = array(   "tm_sec"  => (int) $out['S'], "tm_min"  => (int) $out['M'], "tm_hour" => (int) $out['H'], 
                    "tm_mday" => (int) $out['d'], "tm_mon"  => $out['m']?$out['m']-1:0,  "tm_year" => $out['Y'] > 1900 ? $out['Y'] - 1900 : 0, 
                    "tm_msec" => (int) (isset($out['u']) ? $out['u'] : (isset($out['L']) ? $out['L'] : 0)     ), 
    ); 
    return $ret; 
  } 
?> 
```

# android - 在 mapView 上添加图层或背景

> ID：13053085
> 
> 赞同：1
> 
> 时间：2012-10-24T16:03:47.383
> 
> 标签：android, android-mapview

我对 mapView 有特殊需求，但找不到任何好的解决方案。

我有一个地图视图，上面显示了一些标记，它工作得很好。我的需要是我想在屏幕上放置一种图层/背景，以“掩盖”地图，但我总是想查看标记，并保留所有地图视图功能（缩放、移动等）有什么解决方案可以做到吗？

我希望你能理解我的需要。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:09:51.867

创建一个覆盖（覆盖）您想要覆盖的地图部分的覆盖。在`onDraw()`这个 oevrlay 中，只需绘制满足您的蒙版要求（区域、颜色和不透明度）的东西。

为确保标记始终可见，您需要在将遮罩贴图的叠加添加到`mapView.getOverlays.add()`.

好好享受。

# android - 如何在 Eclipse 中运行 Android 应用程序？

> ID：13053089
> 
> 赞同：3
> 
> 时间：2012-10-24T16:03:53.187
> 
> 标签：android, eclipse, ubuntu

我的系统是**Dell Inspiron 15R (N5010)**，新安装了**Ubuntu ，但由于****64 位**系统，我遇到了问题。在运行 Android 应用程序时出现错误：

```
Error executing aapt. Please check aapt is present at /home/rahul/android-sdks/platform-tools/aapt
Hint: On 64-bit systems, make sure the 32-bit libraries are installed: sudo apt-get install ia32-libs
Error R cannot be resolved to a variable 
```

在此错误之前，我收到 adb not found 错误。我试图安装

```
ia32-lib 
```

但无法安装。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:38:57.033

我还在 linux 64 位上安装了 android sdk、eclipse 和 android 程序员所需的所有东西，在这种情况下是 fedora 17 64 位，我花了一整天的时间让一切正常，因为 linux 的 android sdk 仅支持 32位和 64 位的作品我需要安装非常多的库......太难了：/，如果你想在 linux 上编程，我建议你使用 32 位 :)

在我看来，ubuntu 32 位是开发人员到 android 的更好平台，我需要如何制作 android 和 ios 应用程序，我正在使用 mac，但如果你只使用 android 程序员，ubuntu 会更好:)

* * *

不幸的是，不记得我使用的所有库以及我为使其工作而采取的步骤:(

# ruby - 如何设置预定义的输入

> ID：13053093
> 
> 赞同：2
> 
> 时间：2012-10-24T16:04:06.807
> 
> 标签：ruby, stdin, gets

我想要一个简单的 ruby​​ 预定义输入。我的意思是我希望默认情况下有一些东西，这样用户就可以编辑或只是简单地按下`Enter`跳过。我正在使用`STDIN.gets.chomp`.

```
not predifiend : "Please enter a title: "
predefined : "Please enter a title: Inception " // "Inception" is pre-defined input] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:17:53.590

以下是次优解决方案，因为默认答案不会在用户开始键入时立即清除：

```
prompt = 'Please enter a title: '
default_answer = 'Inception'

# Print the whole line and go back to line start
print "#{prompt}#{default_answer}\r"
# Print only the prompt so that the cursor stands behing the prompt again
print prompt

# Fetch the raw input
input = gets

# If user just hits enter only the linebreak is put in
if input == "\n"
  answer = default_answer
else # Otherwise the typed string including a linebreak is put in
  answer = input.chomp
end

puts answer.inspect 
```

如果你想要这样的东西，我猜你必须使用更高级的终端功能。我猜ncurses可以完成这项工作。

另一种选择是只在括号中显示默认答案，然后简单地将提示放在后面。很多简单的命令行工具都可以做这样的事情。这可能看起来像这样：

```
 Please enter a title [Inception]: 
```

# d3.js - 使用 d3.text 时避免数据缓存

> ID：13053096
> 
> 赞同：6
> 
> 时间：2012-10-24T16:04:27.243
> 
> 标签：d3.js

我正在使用 d3.text() 加载文本文件。我想避免使用浏览器的缓存。任何人都知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T17:27:56.937

看不到 MIME 类型如何解决这个问题。

您可以通过向 url 附加一个随机数来避免缓存（这是与 d3 无关的一般做法）。所以，如果你的网址是

`var url = 'http://www.example.com/somthing';`

然后提出你的要求

```
 d3.text(
   url + '?' + Math.floor(Math.random() * 1000)
 ); 
```

更多信息[在这里](https://stackoverflow.com/questions/11106621/how-does-adding-a-random-number-to-the-end-of-an-ajax-server-request-prevent-cac)

# java - 向 JTextArea 添加文本时遇到问题（追加或设置文本）

> ID：13053107
> 
> 赞同：3
> 
> 时间：2012-10-24T16:05:05.327
> 
> 标签：java, swing, append, jtextarea, settext

所以我正在制作的程序使用 2 个线程：一个用于 GUI，一个用于工作。

我希望工作线程/类的更新在 GUI 类的 JTextArea 上打印出来。我尝试的一切似乎都不起作用。我在将文本添加到 JTextArea 的行之后添加了行以在控制台上打印出文本，以确保它已到达该行，但每次控制台获取文本但 GUI 中的 JTextArea 没有发生任何更改。

```
public static void consoleText(String consoleUpdate){
    GUI.console.append(consoleUpdate);
} 
```

我在工作班上试过这个，但什么也没发生。有人知道如何解决我的问题吗？

编辑：

主程序.JAVA

```
public class main {
public static void main(String[] args) {
    Thread t1 = new Thread(new GUI());
    t1.start();
} 
```

图形用户界面.JAVA

```
public class GUI extends JFrame implements Runnable{

public static JTextArea console;
private final static String newline = "\n";

public void run(){
    GUI go = new GUI();
    go.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    go.setSize(350, 340);
    go.setVisible(true);
}

public GUI(){
setLayout(new FlowLayout());
console = new JTextArea(ConsoleContents, 15, 30);
add(console);
} 
```

工作.JAVA

```
...{
consoleText("\nI want this text on the JText Area");
}

public static void consoleText(String consoleUpdate){
    GUI.console.append(consoleUpdate);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:09:07.040

首先，如前所述，您的 GUI 应该*只*在事件调度线程上运行。

正如它所写的那样，您的 GUI 类做了两件事：它是一个框架和一个可运行文件，并且两者都完全独立使用。事实上，在您的 GUI 对象上调用“运行”会创建另一个不相关的 GUI 对象。这可能就是你什么都看不到的原因。

所以我建议你的主要内容如下：

```
... main(...) {
  SwingUtilities.invokeLater(new Runnable() {
      public void run() {
          GUI gui= new GUI();
          gui.setVisible(true); // and other stuff
      }
  });
} 
```

（顺便说一句，我还建议摆脱所有“静态”字段。这可能是您的问题的根源，以及“运行”方法的奇怪位置）。

现在，我假设您从另一个线程调用的“consoleText”方法不应该直接修改文本，而是调用 SwingUtilities.invokeLater() 来这样做：

```
public void consoleText(final String consoleUpdate){
 SwingUtilities.invokeLater(new Runnable() {
    public void run() {
      console.append(consoleUpdate);
    }
 }); 
```

}

（“最终”声明很重要，因为它允许 Runnable 使用 consoleUpdate 变量）。

# liferay - 向 Liferay 添加语言

> ID：13053108
> 
> 赞同：1
> 
> 时间：2012-10-24T16:05:07.747
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 门户 6.1.0 GA1

场景：在配置了一个 portal-ext.properties 之后，例如：

```
locales=es_ES,en_US
time.zones=Europe/Paris 
```

并运行服务器 OK...（仅那些语言和时区）

我想通过控制面板添加新语言 -> 门户设置 -> 显示设置，写

es_ES,en_US,it_IT 到可用语言

但我得到：

```
Please enter a valid locale error. 
```

我也试图停止 LR 并编辑 portal-ext.properties，但我得到了同样的结果。

你能帮助我吗？

多谢！阿尔贝托

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-20T10:51:06.110

看起来问题在于您从显示设置中选择的语言数量。从portal-ext.properties 仅添加2 个语言环境（es_ES，en_US）后，当您转到控制面板-> 显示设置时，它在当前显示大约10 多种语言。因此，在将英语添加到当前并保存之后，它会尝试使用 portal-ext.properties 中提供的 locales= 值来验证所有语言。

当它尝试验证您在 portal-ext.properties 中提供的语言之外的语言时，它会出错。你可以在这里做的是， - 首先从当前删除所有条目回到可用 - 仅将“英语（ES）”添加到当前条目 - 保存

参考：[这里](https://www.liferay.com/community/forums/-/message_boards/view_message/34939541)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:45:04.480

回答我自己的问题：

我尝试添加意大利语（测试阶段），所以我尝试了：

```
locales=es_ES,en_US
locales.beta=it_IT
time.zones=Europe/Paris 
```

但这在 LR Portal 6.1.0 中不起作用。所以我尝试了：

```
locales=es_ES,en_US,it_IT
time.zones=Europe/Paris 
```

并解决了

# mysql - 在 Ruby 和 Rails 中使用计算

> ID：13053111
> 
> 赞同：0
> 
> 时间：2012-10-24T16:05:12.097
> 
> 标签：mysql, ruby-on-rails, ruby

首先让我为一个看似简单的问题道歉，但是对于 Rails、Ruby 和编程的新手，我觉得我已经用尽了“Rails 新手”教程。

这就是我所反对的。

我有一个用户模型和机构模型，它们具有“has_many :through => :company_reps”关系。

用户具有基本字段（姓名、电子邮件、密码）（我正在使用[devise](https://github.com/plataformatec/devise)）

该机构有许多字段，但相关的字段是（客户 = 布尔值，潜在客户 = 布尔值，演示日期 = 日期/时间）更复杂的是，每个机构可以有一个或两个用户，但大多数只有一个。

我们正在为用户举办比赛，我需要根据 demo_date 字段和 client 字段为每个用户奖励积分。

所以首先我需要做的是给每个用户 10 分，这与作为客户的机构相关，除非该机构有 2 个用户，在这种情况下，我需要给这两个用户每个 5 分。

其次，我需要给与 2012 年 2 月之后有演示日期的机构相关的所有用户 1 分。

我正在使用 Ruby 1.9.2、Rails 3.2.8 和 MySQL

*   那么，我该如何实现呢？
*   我应该创建一个新表和模型来存储点，如果是，我该如何保存计算？
*   我应该把所有的计算放在用户或机构模型中吗？

一如既往地感谢您的帮助。

**MySQL机构信息**

```
CREATE TABLE `institutions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `state_id` int(11) DEFAULT NULL,
  `company` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `clientdate` datetime DEFAULT NULL,
  `street` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `city` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `source` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `source2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `demodate1` datetime DEFAULT NULL,
  `demodate2` datetime DEFAULT NULL,
  `demodate3` datetime DEFAULT NULL,
  `client` tinyint(1) DEFAULT NULL,
  `prospect` tinyint(1) DEFAULT NULL,
  `alead` tinyint(1) DEFAULT NULL,
  `notcontacted` tinyint(1) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7805 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

**制度模式**

```
class Institution < ActiveRecord::Base
  attr_accessible :company, :phone, :assets, :clientdate, :street, :city, :state_id, :zip, :source, :source2, :demodate1, :demodate2, :demodate3, :client, :prospect, :alead, :notcontacted
  belongs_to :state
  has_many :users, :through => :company_reps
  has_many :company_reps

end 
```

**用户模型**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :first_name, :last_name
  # attr_accessible :title, :body

  has_many :states, :through => :rep_areas
  has_many :institutions, :through => :company_reps
  has_many :rep_areas
  has_many :company_reps

  def name 
    first_name + " " + last_name
  end

end 
```

**公司代表模型**

```
class CompanyRep < ActiveRecord::Base
  belongs_to :user
  belongs_to :institution
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:20:45.400

**更新（因为我的第一次尝试错误地假设`User has_one :institution`**

最简单的选择是对`Institution`模型进行基本计算以确定机构“值”多少分，然后将该值相加以计算用户的分数。

```
# Institution
def points
  points_for_client + points_for_demo_date
end

private

def points_for_client
  if client?
    10 / users.count
  else
    0
  end
end

def points_for_demo_date
  if demo_date.present? && demo_date >= Date.new(2012, 3, 1)
    1
  else
    0
  end
end 
```

请注意，如果您愿意，可以`if`使用三元运算符将这些语句压缩为单行语句`? :`。另请注意，我假设“二月之后”是指“从 3 月 1 日起”。

检查零`demo_date`也是一个品味问题。从中挑选

```
# Verbose, but IMO intention-revealing
demo_date.present? && demo_date >= Date.new(...)

# Perhaps more idiomatic, since nil is falsy
demo_date && demo_date >= Date.new(...)

# Take advantage of the fact that >= is just another method
# Concise, but I think it's a bit yuk!
demo_date.try :>=, Date.new(...) 
```

现在每个机构都值得一定数量的积分，总结起来相当简单：

```
# User
def points
  institutions.inject(0) {|sum, institution| sum + institution.points }
end 
```

如果您不熟悉它，请查看[文档，这是一个漂亮的小方法。`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

就性能而言，这是次优的。一个基本的改进是记住结果：

```
# Institution
def points
  @points ||= points_for_client + points_for_demo_date
end

# User
def points
  @points ||= institutions.inject ...
end 
```

这样`points`在同一请求中的进一步调用就不会重新计算该值。只要`client`and在对象还活着的时候`demo_date`不改变就可以了：`User`

```
some_user.points   #=> 0
some_user.institution.client = true
some_user.points   #=> 0 ... oops 
```

该`User`对象将在下一个请求中重新创建，因此这可能不是问题（这取决于这些字段如何更改）。

您还可以向 中添加一个`points`字段`User`，从而将值保存在数据库中，而不是使用原始版本作为`update_points`方法

```
def update_points
  self.points = institutions.inject ...
end 
```

但是，确定何时重新计算该值将成为一个问题。

我的建议是使其尽可能简单并避免过早优化。这是一个相对简单的计算，所以它不会是一个大的性能问题，只要你没有大量的用户和机构或大量的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:13:33.560

积分累积到s，因此在类上添加一个方法调用，返回他们累积的积分数`User`似乎是有意义的。`User`

我将首先编写一个方法来计算每次调用时的总分，并进行一些单元测试以确保计算正确。我一开始不会保存结果——取决于你有多少对象，你需要多久计算一次点等等，你可能根本不需要保存它。

# c++ - std::copy_n 和 reinterpret_cast

> ID：13053114
> 
> 赞同：-2
> 
> 时间：2012-10-24T16:05:30.617
> 
> 标签：c++, copy, reinterpret-cast

```
uint    data1;
ushort  data2;
ushort  data3;
uchar   data4[8];

std::uint8_t buff[16];
std::uint8_t* out = buff;

out = std::copy_n(reinterpret_cast<std::uint8_t*>(&quid.data1), 4, out);
out = std::copy_n(reinterpret_cast<std::uint8_t*>(&quid.data2), 2, out);
out = std::copy_n(reinterpret_cast<std::uint8_t*>(&quid.data3), 2, out);

std::copy_n(quid.data4, 8, out); 
```

`out`如果我不使用，为什么结果会有所不同`reinterpret_cast`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:10:45.687

```
std::copy_n(&quid.data1, 4, out); 
```

就像`quid.data1`被声明为`uint data1[4]`. 结果是`quid.data1`被复制到`out[0]`和其他3个元素`out`得到一个垃圾。

```
std::copy_n(reinterpret_cast<std::uint8_t*>(&quid.data1), 4, out); 
```

将 的内容`data1`视为 4 个字符的数组，如果`sizeof(uint)==4`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T16:12:11.580

结果会有所不同，因为`&x`has type `T *`， where`T`是 的类型`x`，并且指针算术将`+ 1`其视为“将指针前进`sizeof(T)`”，因此实际上您将指针视为指向该类型元素数组的指针。

如果更改指针的类型，您将把它指向的内存视为不同类型元素的数组——例如，将 an`int`视为 s 的数组`char`。

# facebook - Facebook 社交评论未显示 Firefox 或 IE

> ID：13053117
> 
> 赞同：1
> 
> 时间：2012-10-24T16:05:34.910
> 
> 标签：facebook, comments, social

我在我的网站 www.foodiefavs.com 上安装了 Facebook 社交评论系统。

现在，在 Chrome 中一切正常，但在 Firefox 或 IE 中似乎无法正常呈现。

如果你去一个页面，说[http://www.foodiefavs.com/sides/spinach-and-cheese-flatbread/](http://www.foodiefavs.com/sides/spinach-and-cheese-flatbread/)评论部分不会在 Firefox 或 IE 中显示。现在在同一页面上 Ctrl + F5 或 Ctrl + F5 + F5 和评论部分将完美呈现和工作。

我已经仔细检查了所有代码，禁用了 Cloudflare，清除了站点缓存等，但似乎没有任何效果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:13:14.667

嗨，我在 ie9 中处于 ie7 模式时在页面上出现以下错误。

```
SCRIPT5009: 'data_track_addressbar1' is undefined 
spinach-and-cheese-flatbread, line 842 character 1
SEC7111: HTTPS security is compromised by https://www.facebook.com/plugins/comments.php?api_key=1de3f8e0a8fdac55ceb837760ff3c163&locale=en_US&sdk=joey&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df2ff51d0b4c2bec%26origin%3Dhttp%253A%252F%252Fwww.foodiefavs.com%252Ff2af251e011f3f4%26domain%3Dwww.foodiefavs.com%26relation%3Dparent.parent&numposts=20&width=655&href=http%3A%2F%2Fwww.foodiefavs.com%2Fsides%2Fspinach-and-cheese-flatbread%2F 
spinach-and-cheese-flatbread
SCRIPT1002: Syntax error 
spinach-and-cheese-flatbread, line 1036 character 44
SCRIPT438: Object doesn't support property or method 'indexOf' 
jquery.css3finalize.min.js, line 18 character 4250 
```

也许这与它有关。facebook 有时会出现评论插件的 url 问题。尝试将 https:// 添加到它的开头。

我知道 facebook 的其他问题是`FB.init()`多次使用会导致问题。

对不起，我不能给你一个明确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:22:25.200

我发现了问题。我在 Pligg 中安装了一个名为 AutoThumb 的模块，该模块已经处理了所有 OG Meta。所以基本上OG标签被复制了，这就是导致问题的原因。此外，重复创建的其他问题是 facebook 调试器中的随机 403 错误。

# c# - 缓存和 ASP.NET

> ID：13053121
> 
> 赞同：0
> 
> 时间：2012-10-24T16:05:41.753
> 
> 标签：c#, asp.net, generics, caching

我有一个与 ASP.NET 的工作原理更相关的问题，我会尽力解释，所以在这里。

我的应用程序中有一个四层架构

1.  Web（ASP.NET Web 应用程序）
2.  业务（类库）
3.  通用 CRUD 层**（类库）
4.  数据（类库）

我的这个通用 CRUD 层使用反射来设置和读取对象的属性，但是我读到使用 PropertyInfo 相当昂贵，因此想要缓存这些项目。

这是场景：

有两个人访问该站点，我们称他们为 Fred 和 Jim。Fred 创建了一个 Customer，该 Customer 依次调用 Generic CRUD 层并在 System.RuntimeCache 中缓存 Customer 类的属性信息。Jim，几秒钟后也创建了一个客户。

我的问题是 Fred 和 Jim 的两个请求是否会导致获取财产信息被触发两次？还是 ASP.NET 第二次从缓存中检索它，即 Jim 的请求更快，因为属性信息是通过缓存获取的？

我的想法是，因为我的 CRUD 是一个类库并且无法访问 System.Web.Cache，所以不会在所有会话/用户中缓存属性信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:10:53.513

不，它会为每个请求发出新的查询（除非您另有编码）。

在 ASP.Net 应用程序中可能发生多层缓存（浏览器、代理、服务器端响应缓存、中间对象缓存、DA 层缓存），所有这些都可以配置/使用。但是，除非有人专门为此编写代码/规则/配置，否则 ASP.Net（或任何应用程序）中不会缓存任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:17:59.800

正如 Alexei Levenkov 指出的那样，您必须明确配置缓存：您不会自动缓存特定的属性值。

但让我指出，虽然使用 PropertyInfo 与编写代码直接访问属性相比成本高昂，但与数据库往返成本或服务器与最终用户之间的延迟相比，它就相形见绌了。Entity Framework、WebForms 和 MVC 等工具都广泛使用反射，因为它产生的性能成本完全值得减少维护成本。

避免过早优化。

# c# - 为什么绑定到属性的一种实现会导致“依赖属性字段丢失”而不是另一种？

> ID：13053124
> 
> 赞同：1
> 
> 时间：2012-10-24T16:06:00.960
> 
> 标签：c#, resharper, attached-properties, passwordbox

在此站点和其他站点上提出了许多关于 Resharper 在[使用](http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html)绑定`Password`到`PasswordBox`. 在此发布时，只需使用 Google 搜索该短语即可返回“大约 8,550,000 个结果”。还有一个关于它的[错误报告](http://youtrack.jetbrains.com/issue/RSRP-174487?query=8)。

我最近发现[了另一个](http://www.wpftutorial.net/PasswordBox.html)不会产生错误的实现，我正在努力**寻找导致 Resharper 不产生错误错误的实现的差异**。

我看到的差异：

1.  实际存储密码字符串 ( `BoundPassword`/ `Password`) 的`FrameworkPropertyMetadata`属性在第二个实现中使用对象而不是标准`PropertyMetadata`对象。但是当我将第一个实现更改为使用这种新类型时，我仍然得到了错误。
2.  第一个实现在分配属性更改的处理程序之前执行转换，而第二个实现在同一语句中。但这只是编码偏好；最终结果不会改变。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:07:17.240

您正在寻找的答案在 2 年前的 RSRP-174487 问题评论中给出 - 依赖项/附加属性字段名称应遵循 Microsoft 表示法 - `SomeNameProperty`（有`Property`后缀） - 由 ReSharper 正确处理。

依赖属性注册实际上可能是动态的并在运行时执行，但这确实很少见，ReSharper 仍然通过简单地触发“依赖属性字段缺失”检查关闭（Alt + Enter - 抑制检查）来支持它。

ReSharper 旨在处理已知的静态依赖属性注册并为您验证 DP 字段的存在，但要求您遵循 Microsoft DP 字段命名表示法才能正常工作。我认为错误信息可能会更好，我们会努力解决的。

# google-chrome-frame - 将 Google Chrome Frame 用作带有 HandleTopLevelRequests 的“封闭容器”

> ID：13053128
> 
> 赞同：1
> 
> 时间：2012-10-24T16:06:08.250
> 
> 标签：google-chrome-frame

谁能解释使用 GCF 作为“封闭容器”的实际含义？

我从这个[链接](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Chrome-Frame-as-a-closed-container)了解到，您使用 HandleTopLevelRequests 注册表项启用了这种操作模式。

实际上，我偶然发现了此设置，以*防止*开发人员工具窗口在回发/重定向时自动关闭。该默认行为确实使“网络”选项卡几乎毫无用处。:(

通过设置上面链接中描述的 HandleTopLevelRequests 注册表项，开发人员工具窗口保持打开状态，就像我想要的那样。

我只是不知道这是否是我应该保留的设置，因为我真的不明白它在做什么。

或者我想另一种方法是，你为什么*不*希望 HandleTopLevelRequests 设置到位？

**另一个名为 UseChromeNetworking 的注册表项似乎经常与 HandleTopLevelRequests 一起使用。任何关于它的细节的奖励积分也是如此。:)

任何信息都将不胜感激-

# android - 多个活动中的一个实例片段

> ID：13053129
> 
> 赞同：1
> 
> 时间：2012-10-24T16:06:12.897
> 
> 标签：android, android-layout, android-fragments

我想在更多活动中重用相同的片段实例（音乐播放器控制面板）。我创建了单例片段实例。我成功地将它添加到第一个活动中，但是当我尝试将它添加到第二个活动中时，我得到了异常：片段已经处于活动状态。我在 add 或 getSupportFragmentManager().beginTransaction().replace 之前尝试了 getSupportFragmentManager().beginTransaction().remove 但由于它没有立即执行，所以我总是遇到异常。

一些想法如何在更多活动中拥有相同的片段实例？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:13:27.957

您不能多次使用同一个片段对象。不知道为什么要这样做，但如果您希望这些对象保持“同步”，只需在对象/活动之间共享其状态即可

# background-process - Pagodabox 或 PHPfog + Gearman

> ID：13053132
> 
> 赞同：1
> 
> 时间：2012-10-24T16:06:20.460
> 
> 标签：background-process, gearman, paas, phpfog

全部，

我正在寻找一种通过这两种服务中的任何一种来做一些后台工作的好方法。

我看到 PHPFog 支持 IronWorks，但我需要更实时的东西。通过这些基于云的 PaaS 服务，我无法使用`popen(background.php --token=1234)`. 所以我在想最好的解决方案，可能是试着让一个齿轮工来处理这项工作。（实际上我首选的方法是使用 websockets 来保持连接打开并从工作中接收反馈，而不是通过 AJAX 长时间轮询数据库表，但是这些人都不支持 websockets）

问题 1 是，有没有比使用 gearman 卸载工作更好的解决方案？

问题 2 是，[http:](http://help.pagodabox.com/customer/portal/articles/430779) //help.pagodabox.com/customer/portal/articles/430779 我看到 pagodabox 支持“工人听众”……有人用 gearman 设置了吗？它会起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:46:45.473

我在我现在正在构建的应用程序中使用 PagodaBox 和后台工作人员。基本上，PagodaBox 会为您守护一个 PHP 进程（这意味着它将在后台持续运行），因此您真正需要做的就是创建一个脚本来检查数据库表中要运行的任务，运行它们，然后稍微休眠一下它没有对您的数据库运行太多查询。

这是我正在运行的简化版本：

```
// Remove time limit
set_time_limit(0);

// Show ALL errors
error_reporting(-1);

// Run daemon
echo "--- Starting Daemon ---\n";
while(true) {

    // Query 'work_queue' table for new tasks
    // Loop over items and do whatever tasks are associated with them
    // Update row to mark task as completed

    // Wait a bit
    sleep(30);
} 
```

这种方法的一个好处是它很容易通过 CLI 进行测试：

```
php tasks.php 
```

您将`echo`在控制台运行时看到所有语句，当然这比使用其他依赖项（如 Gearman）的更复杂的设置要容易得多。

因此，每当您向表中添加新任务时，您将等待该任务批量启动的最长时间为 30 秒（或任何您的睡眠时间）。这比 cron 作业更好，更可取，因为如果您将 cron 作业设置为每分钟运行一次（可能的最低间隔）并且您必须执行的工作需要超过一分钟，另一个 cron 进程将开始在同一个队列上工作并且您最终可能会完成大量重复的任务工作，这可能会导致许多难以调试和排除故障的问题。因此，如果您只有一个运行所有任务的后台工作人员，或多个处理不同任务类型的后台工作人员，您将永远不会遇到这个问题。

# c# - 将 ttinclude 文件部署到 Visual Studio 机器的最佳方法

> ID：13053137
> 
> 赞同：0
> 
> 时间：2012-10-24T16:06:41.847
> 
> 标签：c#, visual-studio-2010, t4

我的 .ttinclude 文件中有几个可重用的代码部分。我想制作一个可重用/可安装的 Visual Studio 插件（类似于 VSIX）来部署这个文件，然后能够将它包含在任何项目的任何 t4 模板中，就像它是一个程序集引用一样（类似于能够将 .ttinclude 文件安装到 GAC）。

我已经用谷歌搜索了它，但我什至找不到关于如何开始这样做的提示。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:46:46.630

例如，您可以使用 NuGet，NuGet 与 Visual Studio 一起提供，而且相当不错。如需灵感，请查看：[https ://github.com/mrange/T4Include/tree/master/NonSource/NuGet](https://github.com/mrange/T4Include/tree/master/NonSource/NuGet)

NuGet 使用 .nuspec 文件来构建包，它部署了 3 个 ttinclude 文件和一个示例 tt 文件。

希望这可以帮助您入门。

# angularjs - 使用 $resource 发布数据

> ID：13053142
> 
> 赞同：0
> 
> 时间：2012-10-24T16:06:58.867
> 
> 标签：angularjs

演示：http: [//jsfiddle.net/rob_balfre/7QUUf/](http://jsfiddle.net/rob_balfre/7QUUf/)

您如何使用 $resource 发布数据（跨域）？

例如，此 curl 毫无问题地写入 API：

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"name": "Wobbly"}' http://192.168.91.20/api/food/ 
```

并且标头响应是：

```
HTTP/1.0 201 CREATED
Date: Thu, 25 Oct 2012 08:19:42 GMT
Server: WSGIServer/0.1 Python/2.6.1
Access-Control-Allow-Headers: Content-Type,*
Location: http://localhost/api/food/15/
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST,GET,OPTIONS,PUT,DELETE
Content-Type: text/html; charset=utf-8 
```

我完全被困在如何以同样的方式获得 POST 的角度。这是我的 $resource，值得注意的是 'get' 工作得很好：

```
angular.module('tastypieModule', ['ngResource']).
factory('FoodOptions', function($resource, $timeout) {
   var FoodOptions = $resource('http://testurl/api/:type',
        {type: 'food'},
        {
            get: {method: 'JSONP', params: {format: 'jsonp', callback:'JSON_CALLBACK'}},
            update: {method: 'POST', headers: {'Content-Type': 'application/json'}}
        }
    );

 return FoodOptions;
}) 
```

当我调用更新时它失败了，我看到这是控制台网络选项卡：

```
METHOD: OPTIONS 
STATUS: (canceled) Load cancelled 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:05:40.293

在服务器上，您需要实现跨域资源共享。[http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)和[http://omarrr.com/cors-html5-approach-to-crossdomain-policies/](http://omarrr.com/cors-html5-approach-to-crossdomain-policies/)都有关于该主题的好文章。HEAD 请求来自浏览器到您的服务器，以检查包含（或在您的情况下不包含）CORS 权限的标头。如果您在服务器上实现 CORS，那么您会看到浏览器首先向服务器发出一次 HEAD 请求，然后在确认正确的权限后，它将发出 POST。

# c++ - 如何在不继承句柄的情况下分叉进程？

> ID：13053150
> 
> 赞同：4
> 
> 时间：2012-10-24T16:07:41.533
> 
> 标签：c++, c, posix, fork

在我在 Mac 上运行的 C/C++ 服务器应用程序（达尔文内核版本 10.4.0）中，我正在分叉子进程并希望这些子进程不继承服务器的文件句柄（文件、套接字、管道......）。似乎默认情况下所有句柄都被继承，甚至更多，netstat 显示子进程正在侦听服务器的端口。我怎么能做这样的叉子？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T16:15:09.987

Normally, after `fork()` but before `exec()` one does `getrlimit(RLIMIT_NOFILE, fds);` and then closes all file descriptors lower than `fds`.

Also, `close-on-exec` can be set on file descriptors using `fcntl()`, so that they get closed automatically on `exec()`. This, however, is not thread-safe because another thread can `fork()` after this thread opens a new file descriptor but before it sets `close-on-exec` flag.

On Linux this problem has been solved by adding `O_CLOEXEC` flag to functions like `open()` so that no extra call is required to set `close-on-exec` flag.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:10:38.163

不，您需要自己关闭它们，因为只有您知道哪些需要保持打开状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:13:44.870

Basically no. You have to do that yourself. Maybe [`pthread_atfork`](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_atfork.html) help, but it still be tedious.

# naudio - 以 256kbps 流式传输

> ID：13053156
> 
> 赞同：1
> 
> 时间：2012-10-24T16:08:11.410
> 
> 标签：naudio

我是 NAudio 和音频编程的新手，我对 256kbps 的流媒体有疑问，NAudio 有一些编解码器可以处理这个比特率吗？我知道 NAudio 中的 MP3 编码不支持。我可以在 NAudio 中使用其他编解码器（如 ACC）或其他具有这种质量的选项进行编码吗？我需要在第一侧进行流式传输并在另一侧的应用程序中接收流式传输（单播）。一些想法？

谢谢！

# python - python urllib 用法

> ID：13053158
> 
> 赞同：5
> 
> 时间：2012-10-24T16:08:14.793
> 
> 标签：python, python-3.x, urllib2, urllib

我导入了两个库`urllib`和`from urllib.request import urlopen`.

第二个包含在第一个中

当我查看代码并尝试删除该`from urllib.request import urlopen`行时，我收到了以下消息：

```
opnerHTMLnum = urllib.request.build_opener()
AttributeError: 'module' object has no attribute 'request' 
```

当我恢复`from urllib.request import urlopen`代码运行的行时。

谁能解释为什么？

```
import re
#import http.cookiejar
import os.path
#import time
#import urllib3
import urllib
from urllib.request import urlopen
import sys
import smtplib
from email.mime.text import MIMEText

# ...

    opnerHTMLnum = urllib.request.build_opener() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T16:13:29.893

You are confusing python3 package `urllib.request` with Python2.7 one which is `urllib2`. Please don't do that. Python3 and Python2 are libraries are different. All you may want is `urllib2` from python2

```
import urllib2
from urllib2 import Request
req = Request("yoururl")
res = urllib2.urlopen(req) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:11:55.417

包`urllib`就是这样，一个包。它`__init__.py`不导入`urllib.request`，因此您不能仅`urllib.request`通过导入`urllib`. 它仅用作名称空间。

`urllib.request`改为导入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T16:12:58.507

两者`import X`并`from X import Y`执行`X`给定的任何模块或包的导入。

在这种情况下，`urllib`是一个包。当 you 时`import urllib`，包本身会被导入，并且你会得到对它的引用，但不会导入任何子模块（在这种情况下）。当您这样做时`from urllib.request import ...`，Python 实际上会导入整个模块`urllib.request`，但随后会挑选出您要求的名称并为您提供对它们的引用。

如果您不使用`urlopen`，那么您也可以轻松完成`import urllib.request`并获得相同的结果。

# html - IE9 中带有 HTML5 文档类型的行高

> ID：13053162
> 
> 赞同：1
> 
> 时间：2012-10-24T16:08:21.033
> 
> 标签：html, internet-explorer, css

```
<!DOCTYPE html>
<html>
<body>
  <span style="font-size:48px">abc<br></span>
  <span style="font-size:6px">abc<br>abc</span>
</body>
</html> 
```

只有当我使用 HTML5 doctype 时，IE9 才会在线条周围添加额外的边距。添加`font-size:0`或`line-height:0`打开`<br>`没有效果。

我怎样才能摆脱这些利润？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:14:34.783

不同的浏览器对此的处理方式不同，但我不确定什么是正确的方法。我的直觉告诉我 IE 做对了，而 Firefox 做错了。（目前无法检查其他浏览器，抱歉。）

跨度中的`<br>`跨度使跨度高两行，并且由于它的字体大小为 48 像素，因此后半部分的基线比前半部分低 48 像素。这就是第二个跨度开始的地方；它继续在同一基线上。

![ ](../Images/d63fdce9d8f5e103238b5c3516ba8a97.png)

如果你想避免这种情况，不要将跨度与基线对齐，将它们对齐到顶部，通过放置

```
<style>span {vertical-align:top}</style> 
```

在您的 HTML 中（在头部）。这样，第二个跨度中的文本将与行的顶部而不是基线齐平。

![在此处输入图像描述](../Images/8e7571ab44a5c0ea467f6947d74140e3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:19:27.970

如果没有我自己测试您的问题，我会问您是否尝试过给休息时间负边距？例如

```
<br style="margin-top:-3px" /> 
```

我不确定您遇到的问题是哪种方式`<br>`

但我对你的另一个问题是你为什么`<span>`直接在体内使用？根据您的示例，我建议以下内容（尽管我仍然不知道 100% 您要完成的工作）：

```
<!DOCTYPE html>
<html>
<body>
    <h1>abc</h1>
    <p>abc</p>
    <p>abc</p>
</body>
</html> 
```

`<h1>`然后在您的 CSS 中，您可以提供所需`<p>`的字体大小、行高等。

```
h1 {
    font-size:48px;
    margin-bottom:0;
} 
```

此外，`font-size:6px;`它真的很小，任何人都很难阅读。有时某些浏览器或设备甚至不会呈现那么小的字体大小，而是它们可能会`font-size:10px;`自动呈现它。我建议正文至少为 12 像素，最好还是大一点。

# java - Java 进程失败（hadoop、hbase）

> ID：13053169
> 
> 赞同：0
> 
> 时间：2012-10-24T16:08:39.803
> 
> 标签：java, hadoop, hbase

每当我从命令提示符运行 hadoop/hbase 进程时，我都会收到一个错误::

```
/usr/local/hadoop/bin/hadoop: line 320: /usr/lib/jvm/jdk1.7.0/bin/java: cannot execute binary file
/usr/local/hadoop/bin/hadoop: line 390: /usr/lib/jvm/jdk1.7.0/bin/java: cannot execute binary file
/usr/local/hadoop/bin/hadoop: line 390: /usr/lib/jvm/jdk1.7.0/bin/java: Success 
```

当我启动 hbase 时，我得到了同样的错误。

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) Server VM (build 23.3-b01, mixed mode) 
```

你能告诉我什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T18:52:00.677

HBase 至少需要 Oracle 的 Java 6。通过把下面的 hbase-env.sh 解决了同样的错误 export JAVA_HOME=/usr/lib/jvm/java-7-oracle/jre

# algorithm - 用于测试文本处理功能的样本数据或语料库？

> ID：13053171
> 
> 赞同：0
> 
> 时间：2012-10-24T16:08:44.637
> 
> 标签：algorithm, text, corpus, sample-data

我想知道是否有可用于测试算法的在线示例文本。例如，我正在创建一个简单的标记化函数，并希望确保它适用于特殊情况，如中间词标点符号（“don't”、“O'Brien”）、破折号（出于我的目的，“Sacksville -Bagginses" 应该是单个标记)、国际字符等。

类似地，在启动其他算法以获得非常适合测试它们的文档时，它会很好，而不必在 Gutenberg 中启动或搜索好的示例文本。

同样有用的是可用于测试拼写和语法工具等内容的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:27:03.383

[此Wikipedia](http://en.wikipedia.org/wiki/Text_corpus)条目中列出了一堆文本语料库。[此外， NLTK 语料库列表](http://nltk.googlecode.com/svn/trunk/nltk_data/index.xml)中有一些很好的指针。您可能想查看[Google ngram datasets](http://storage.googleapis.com/books/ngrams/books/datasetsv2.html)。

# objective-c - Objective-C 中的块变量

> ID：13053174
> 
> 赞同：2
> 
> 时间：2012-10-24T16:08:59.113
> 
> 标签：objective-c, objective-c-blocks

我对 Objective-C 中的块有疑问。

例如我有这个代码：

```
__block int count = 0;
void (^someFunction)(void) = ^(void){
count = 4;
};
count +=2; 
```

编写同一段代码的正确方法是什么，所以计数将变为 6，而不是 2？！

谢谢！

我可能应该显示实际代码，因为我之前的问题很模糊。编辑：

```
__block CMTime lastTime = CMTimeMake(-1, 1);
    __block int count = 0;
    [_imageGenerator generateCGImagesAsynchronouslyForTimes:stops
                                          completionHandler:^(CMTime requestedTime, CGImageRef image, CMTime actualTime,
                                                              AVAssetImageGeneratorResult result, NSError *error)
     {
         if (result == AVAssetImageGeneratorSucceeded)
         {
             NSImage *myImage = [[NSImage alloc] initWithCGImage:image size:(NSSize){50.0,50.0}];
             [arrOfImages addObject:myImage];
         }

         if (result == AVAssetImageGeneratorFailed)
         {
             NSLog(@"Failed with error: %@", [error localizedDescription]);
         }
         if (result == AVAssetImageGeneratorCancelled)
         {
             NSLog(@"Canceled");
         }
         if (arrOfImages.count > 5)
         {
             NSLog(@"here");
         }
         count++;
     }];
     int f = count+1; 
```

10 次迭代后计数为 0...为什么？！？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T16:11:06.057

您没有执行块（调用块`someFunction`可能是一种误导）

```
__block int count = 0;
void (^someBlock)(void) = ^{
    count = 4;
};
someBlock();
count +=2; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T16:11:00.443

像这样调用块：

```
someFunction(); 
```

所以那将是：

```
__block int count = 0;
void (^someFunction)(void) = ^(void){
    count = 4;
};
// call block
someFunction();

count +=2; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T16:44:00.550

查看您正在调用的方法的名称； `generateCGImagesAsynchronouslyForTimes: completionHandler:`.

**异步**意味着它在不同的线程中执行（可能通过队列，并且正如@newaccount 指出的那样，它可能会被重新安排以供将来在当前队列/线程上执行）并且该方法*立即返回*。因此，当您设置时`f=count+1;`，完成块甚至还没有执行，因为后台线程中的图像加载都没有完成。

您需要从该完成块调用回需要响应完成的代码。IE

```
^() {
....
dispatch_async(dispatch_get_main_queue(), ^{[self heyManAnImageLoadedDude];});
....
} 
```

# google-maps - 导致链接在地图中平移和打开标记

> ID：13053178
> 
> 赞同：2
> 
> 时间：2012-10-24T16:09:16.947
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

JS 小提琴：http: [//jsfiddle.net/megatimes/NVDLf/7/](http://jsfiddle.net/megatimes/NVDLf/7/)

我有一个从数组创建多个标记的地图。地图下方是一些链接，单击这些链接时，我想让地图平移到其各自的标记，然后打开信息窗口。

鉴于我不想将链接本身生成为创建标记的循环的一部分，我该怎么做？

我相当确定这是一个范围问题，因为地图下方的链接每个都打开位置数组中的最后一项，但我似乎无法弄清楚如何解决它。

谢谢

```
var locations = [
    [
    "Location 1",
     "215 West Girard Avenue 19123",
    "39.9695601",
    "-75.1395161"
    ],
    [
    "Location 2",
    "5360 Old York Road 19141",
    "40.034038",
    "-75.145223"
    ],
    [
    "Location 3",
    "1350 W Girard Avenue 19123",
    "39.9713524",
    "-75.1590360"
    ]
    ];

var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 12,
    center: new google.maps.LatLng(39.9995601, -75.1395161),
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][2], locations[i][3]),
        map: map
    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
        }
    })(marker, i));
}

$(function() {
    $('#locations h3 a').each(function() {
        $(this).on('click', function() {
            google.maps.event.trigger(marker, 'click');    
        })    
      });    
}); 

<div id="map" style="width: 500px; height: 400px;"></div>
<div id="locations">
    <h3><a href="#">Location 1</a></h3>
    <p>Arbitrary content about 1</p>

    <h3><a href="#">Location 2</a></h3>
    <p>Arbitrary content about 2</p>

    <h3><a href="#">Location 3</a></h3>
    <p>Arbitrary content about 3</p>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:56:56.000

你可以这样做：

[http://jsfiddle.net/6vjwd/2/embedded/result/](http://jsfiddle.net/6vjwd/2/embedded/result/)

使用 createMarker 函数将信息窗口与标记相关联：

```
function createMarker(latlng, html)
{
var marker = new google.maps.Marker({
    position: latlng,
    map: map
});

google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(html);
        infowindow.open(map, marker);
});
return marker;
} 
```

还有一个全局数组，允许它们被 HTML 点击监听器引用。

外部链接取决于知道位置的顺序。或者，如果您想通过“名称”查找它们，您可以使用“关联”数组，并将名称作为索引。

按名称索引标记：

[http://jsfiddle.net/6nqj8/1/embedded/result/](http://jsfiddle.net/6nqj8/1/embedded/result/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:21:10.550

我会在生成标记时使用 jQuery 生成链接。您可以使用 jQuery 的调用将标记对象存储在链接对象上，`.data()`并向那些将地图设置为标记位置的链接添加通用单击处理程序。

有点像这样：

```
for (i = 0; i < locations.length; i++) {
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][2], locations[i][3]),
        map: map
    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
        }
    })(marker, i));

    $('#locations').append($('<a>').append('Location Name').click(function()
    {
        // $(this).data('marker')
    }).data('marker', marker));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:32:09.973

好的，这对我有用。我将每个标记添加到一个名为`markers`. [然后，每当单击链接时，使用 jquery .index() 函数](http://api.jquery.com/index/)检查这些链接数组中的哪个链接，并触发相应标记上的“单击”（链接 1 = 标记 1 等）。

感谢 geocodezip 以及我在这里重用的 createMarker 函数。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
#map { width: 500px; height: 400px; }
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
var marker, map;
var markers = [];

function initialise() {
var i;
    var locations = [
        [
        "Location 1",
         "215 West Girard Avenue 19123",
        "39.9695601",
        "-75.1395161"
        ],
        [
        "Location 2",
        "5360 Old York Road 19141",
        "40.034038",
        "-75.145223"
        ],
        [
        "Location 3",
        "1350 W Girard Avenue 19123",
        "39.9713524",
        "-75.1590360"
        ]
        ];

    map = new google.maps.Map(document.getElementById('map'), {
        zoom: 12,
        center: new google.maps.LatLng(39.9995601, -75.1395161),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    infowindow = new google.maps.InfoWindow();

    for (i = 0; i < locations.length; i++) {
        markers.push(createMarker(new google.maps.LatLng(locations[i][2], locations[i][3]), locations[i][0]));
    }
}

function createMarker(latlng, html)
{
    var marker = new google.maps.Marker({
        position: latlng,
        map: map
    });

    google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(html);
            infowindow.open(map, marker);
    });

    return marker;
}

$(function() {
    $('#locations h3 a').each(function() {
        $(this).on('click', function() {
            // find out which link in the array was clicked (1st, 2nd etc)
            var intLinkClicked = $('#locations h3 a').index($(this));
            google.maps.event.trigger(markers[intLinkClicked], 'click');    
        });
    });    
}); 

google.maps.event.addDomListener(window, 'load', initialise);
</script>
</head>
<body>
    <div id="locations">
        <h3><a href="#">Location 1</a></h3>
        <p>Arbitrary content about 1</p>

        <h3><a href="#">Location 2</a></h3>
        <p>Arbitrary content about 2</p>

        <h3><a href="#">Location 3</a></h3>
        <p>Arbitrary content about 3</p>
    </div>
    <div id="map"></div>
</body>
</html> 
```

# objective-c - 如何在objective-c中链接方法

> ID：13053183
> 
> 赞同：0
> 
> 时间：2012-10-24T16:09:26.870
> 
> 标签：objective-c, multidimensional-array, xml-parsing, nsmutablearray

我正在尝试实现一种解析方法以将 XML 文档转换为多维数组，但是它依赖于在将该数组添加到多维数组之后需要从数组中删除对象，如下所示：

```
while (k<blockRowArray.count){                                   //loops through all rows one by one
        NSLog(@"current k is %i", k);
        GDataXMLDocument *currentRow = (GDataXMLDocument *) [blockRowArray objectAtIndex:k];
        NSArray *arrayOfBlocks = [currentRow nodesForXPath:@"b" error:nil];
        j = 0;
        while (j <arrayOfBlocks.count) {
            NSLog(@"current j is %i",j);
            GDataXMLElement *blockElement = (GDataXMLElement *) [arrayOfBlocks objectAtIndex:j];
            NSNumber* blockValue = [NSNumber numberWithInt:[[blockElement stringValue] intValue]];
            [individualRowOfBlocks addObject:blockValue];
            j++;
        }
        k++;
        NSLog (@"Current row of blocks array is %@",individualRowOfBlocks);

        [rowBlocks addObject:individualRowOfBlocks];
        [individualRowOfBlocks removeAllObjects];
    } 
```

然而`[individualRowOfBlocks removeAllObjects]`，显然是在同一时间或之前运行，`[rowBlocks addObject:individualRowOfBlocks]`因为我最终得到一个多维数组，其中包含一组空数组，所以我需要做的是确保`[individualRowOfBlocks removeAllObjects]`在`[individualRowOfBlocks removeAllObjects]`任何这样做的方法之后运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:40:49.600

> 但是 [individualRowOfBlocks removeAllObjects] 显然在 [rowBlocks addObject:individualRowOfBlocks] 的同时或之前运行，因为我最终得到了一个包含一组空数组的多维数组，所以我需要做的是确保 [ individualRowOfBlocks removeAllObjects] 在 [individualRowOfBlocks removeAllObjects] 之后运行任何方法吗？

除非涉及线程（或队列），否则 Objective-C 方法将始终按照代码中编写的顺序执行，*除非被调用的方法在其实现中显式地在线程/队列中执行操作*（这在该代码中极不可能）。

每次调用 时`[rowBlocks addObject:individualRowOfBlocks];`，都会添加对同一`individualRowOfBlocks`数组的新引用。如果您随后更改 的内容`individualRowOfBlocks`，则其中的每个插槽都`rowBlocks`将有效地反映该更改，因为*每个插槽都指向数组的同一个实例*。

听起来，您应该在每次通过循环时`removeAllObjects`创建一个新实例，而不是 ，将其分配给.`NSMutableArray``individualRowOfBlocks`

# windows - 在 Mac 10.6/7/8/Windows XP/Vista/7 上自动打开 USB 驱动器

> ID：13053185
> 
> 赞同：2
> 
> 时间：2012-10-24T16:09:28.727
> 
> 标签：windows, macos, installation, usb

我正在创建一个 FAT32 格式的 USB 记忆棒/驱动器来运送产品。我们希望它的行为更像我们创建的混合 CD/DVD：

1.  在 Mac 10.6 或更高版本上插入磁盘，驱动器将打开并显示一个包含应用程序的窗口。我们可以从 DMG 或 CD 执行此操作，但 USB 驱动器似乎不想执行该`bless`命令。

2.  在 Windows 上，我们设置了一个 autorun.inf。在 XP 上，它不显示图标、标签或打开指定的文件。我知道您不能让 Windows Vista 和 Windows 7 默认自动打开某些内容或将条目添加到自动播放列表，但它仍应显示卷标和图标。

这是我的 autorun.inf：

```
[AutoRun]
Action="Install My Cool App"
Open="InstallThis.exe"
icon="Ultimate.ico"

[Content]
MusicFiles=false
PictureFiles=false
VideoFiles=false 
```

这些东西对 U 盘来说是不是太过分了？还有其他人在 USB 闪存驱动器上运送东西并克服了这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:15:22.517

从 Windows 7 开始，USB 驱动器不支持自动运行功能。仅支持以下命令：

*   标签
*   图标

请参阅Engineering Windows 7 博客上[对自动播放的改进。](http://blogs.msdn.com/b/e7/archive/2009/04/27/improvements-to-autoplay.aspx)

[Autorun.inf 条目](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144200%28v=vs.85%29.aspx)中的示例不使用引号作为值。没有引号它可以工作吗？

* * *

MacOS 可能已经实现了与 Windows 7 类似的方法：不要自动从闪存驱动器自动运行任何内容以保护您免受恶意软件的侵害。

# android - API 16 中的广播接收器 IllegalArgumentException

> ID：13053189
> 
> 赞同：3
> 
> 时间：2012-10-24T16:09:33.453
> 
> 标签：android, broadcastreceiver, illegalargumentexception

我希望有人可以帮助阐明这一点。我有这段代码可以在 API 版本 10 中正常工作。但是，当我切换到 API 16 时，第一个组件会被加载，但第二个组件会引发应用程序中不存在的异常。

除了 API 的变化，没有任何变化。任何人都可以对此有所了解吗？我一直在寻找，还没有遇到任何东西。

谢谢！

```
 /***************************************************
     * INITIATE THE BROADCAST RECEIVERS
     **************************************************/
    //create reference to the package manager and required receivers
    PackageManager pm  = getApplicationContext().getPackageManager();

    ComponentName BroadcastReceiver_Text = 
        new ComponentName(this, TextMessageReceiver.class.getName());
    ComponentName BroadcastReceiver_Phone = 
        new ComponentName(this, PhoneCallReceiver.class.getName());

    //turn ON the broadcast receivers for the texting
    try {
        pm.setComponentEnabledSetting(BroadcastReceiver_Text,
                PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                PackageManager.DONT_KILL_APP);
        Log.i("Broadcast Receiver for Text", "Is Now ENABLED");
        //turn ON the broadcast receivers for the phone calls

        pm.setComponentEnabledSetting(BroadcastReceiver_Phone,
                PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                PackageManager.DONT_KILL_APP);
        Log.i("Phone Receiver for Text", "Is Now ENABLED");

    }catch(Exception e){
        Log.i("NameNotFoundException", e.getMessage());
    }
        Log.i("AwayModeService", "OnCreate Ending");
} 
```

# javascript - 如何在 OpenLayers 中获取所选功能的事件或 DOM 元素

> ID：13053190
> 
> 赞同：5
> 
> 时间：2012-10-24T16:09:32.953
> 
> 标签：javascript, jquery, openlayers

我正在实现一个 OpenLayers SelectFeature 控件，并尝试将一个 JQuery UI 对话框小部件放置在所选功能的顶部。要使用 JQuery UI Position 实用程序，它需要一个 DOM 元素或一个事件。

SelectFeature 控件的 onSelect 回调为我提供了一个表示所选要素的 OpenLayers.Feature.Vector 对象。从中，我如何获取所选功能的 DOM 元素或单击事件的 Event 对象？

```
 var selectControl = new OpenLayers.Control.SelectFeature(clientsLayer, {
            hover   : false,
            clickout: false,
            multiple: false,
            onSelect: function(feature) {
                // how do I get the DOM element of the feature
                // or alternately, the click event of the selection?
            }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:52:40.797

您正在寻找这样的东西吗？

```
onSelect: function onFeatureSelect(event) {
              var feature = event.feature;
              if ( feature.layer.name == 'theone') {
              ...
              }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:05:21.177

~~你做得对。~~

如果你做一个`console.log(feature)`你会看到它返回一个带有 CLASS_NAME = "OpenLayers.Feature.Vector" 的对象

```
onSelect: function(feature) {
    console.log(feature);
} 
```

 ~~# 更新：

我懂了。您可以添加事件侦听器

```
var selectControl = new OpenLayers.Control.SelectFeature(clientsLayer, {
    hover: false,
    clickout: false,
    multiple: false,
    eventListeners: {
        featurehighlighted: function (event) {
            console.log(event);
            console.log(event.feature);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T21:09:26.197

注意我也在[How do I get the DOM element from openlayers vector feature](https://stackoverflow.com/questions/24021828/how-do-i-get-the-dom-element-from-openlayers-vector-feature)

如果您想在悬停时找到鼠标或功能的位置以便显示自定义叠加层，请创建自定义悬停控件并定义 featurehighlighted 函数，如下所示：

```
var featureHoverControl = new OpenLayers.Control.SelectFeature([myLayer], {
    id: 'featureHoverControl',
    hover: true,
    autoActivate: true,
    highlightOnly: true,
    renderIntent: "temporary",
    eventListeners: {
       featurehighlighted: function(e) {
            // either use the mouse's position when the event was triggered
            var mouseXPosition = this.handlers.feature.evt.x;
            var mouseYPosition = this.handlers.feature.evt.y;

            // or retrieve the feature's center point
            var featureCenterLonLat = e.feature.geometry.bounds.getCenterLonLat();
            var featureCenterPoint = map.getPixelFromLonLat(featureCenterLonLat);

            // display your custom popup here
            // e.g. showTooltip(e.feature.attributes.name, featureCenterPoint.x, featureCenterPoint.y)
        }
        ,
        featureunhighlighted: function(e) {
            // hide your custom popup here
            // e.g. hideTooltip()
        }
    }
});
map.addControl(featureHoverControl); 
```

如果您需要访问代表您的图层/功能的 SVG 元素（如果您使用的是第三方库并且您不想修改源代码），请使用以下任一行（取决于您是否需要层或特征）：

```
var layerElement = map.getLayersByName("My Layer")[0].features.root;
var layerElementId = map.getLayersByName("My Layer")[0].features.root.id;
var featureElementId = map.getLayersByName("My Layer")[0].getFeaturesByAttribute("name","My Feature Name")[0].geometry.components[0].id; 
```

请注意，由于这仅获取元素的 id，因此您仍然需要使用适当的方法来获取对元素本身的引用。类似于以下任一内容：

```
var elementReference1 = document.getElementById(featureElementId);
var elementReference2 = jQuery('#'+featureElementId)[0]; 
```~~

# ios - UICollectionViewCell 中的按钮不起作用

> ID：13053194
> 
> 赞同：3
> 
> 时间：2012-10-24T16:09:55.530
> 
> 标签：ios, ios6, uicollectionviewcell

我第一次使用 UICollectionView。我的 UICollectionViewCell 中有一个按钮。我正在使用 segues 将按钮与下一个视图控制器连接起来，以便在按钮点击事件上加载。

该按钮仅为集合视图单元列表中的第一个按钮加载下一个视图控制器。对于其他按钮，它似乎没有接收到触摸事件。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:49:02.863

您的问题的解决方案：创建多个原型单元并连接每个按钮的 IBAction，或者在创建单元时注册按钮操作。一种方法是抓住`cellForItemAtIndexPath:`方法中的按钮，然后执行以下操作：

```
for (UIView *view in [cell.contentView subviews]) {
        if ([view isKindOfClass:[UIButton class]]) {
            switch (indexPath.item) {
                case 0:
                    UIButton *myButton = (UIButton *)view;
                    [myButton addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside];
                    break;
                case 1:
                    UIButton *myOtherButton = (UIButton *)view;
                    [myOtherButton addTarget:self action:@selector(myOtherAction:) forControlEvents:UIControlEventTouchUpInside];
                    break;
                default:
                    break;
            }
        }
    } 
```

等等

# java - 迭代器 isEmpty() 调用导致 noSuchElement 异常？

> ID：13053195
> 
> 赞同：3
> 
> 时间：2012-10-24T16:10:07.590
> 
> 标签：java, android, iterator, hashmap

我目前有以下代码

```
while (!visibleTiles.isEmpty())) {
    tile = visibleTiles.keySet().iterator().next();
    if (tile != null){
        bitmap = visibleTiles.remove(tile);
        if(bitmap != null && !containsKey(tile)){ //safe to recycle if tile cache is not actively holding it
            bitmap.recycle();
        }
    }
} 
```

但是，我在线上遇到 NoSuchElementException 崩溃

```
tile = visibleTiles.keySet().iterator().next(); 
```

使用 isEmpty() 方法和调用 hasNext() 调用有很大区别吗？我知道 hashmaps 没有 hasNext() 调用，所以我做了以下操作：

```
while (visibleTiles.keySet().iterator().hasNext()) {
    tile = visibleTiles.keySet().iterator().next();
    if (tile != null){
        bitmap = visibleTiles.remove(tile);
        if(bitmap != null && !containsKey(tile)){ //safe to recycle if tile cache is not actively holding it
            bitmap.recycle();
        }
    }
} 
```

显然，我知道我应该只运行应用程序并查看它是否崩溃，但问题是很难重现该问题。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:12:41.503

可见Tiles.isEmpty()

只是检查地图是否为空（或）它是否有任何元素。

```
ile = visibleTiles.keySet().iterator().next(); 
```

从迭代器中检索下一个元素。

在迭代器上做之前你需要做`hasNext()`检查。`next()`

`hasNext()` [javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#hasNext%28%29)说

> 如果迭代有更多元素，则返回 true。（换句话说，如果 next 将返回一个元素而不是抛出异常，则返回 true。）

所以，如果没有可用的元素并且调用`next()`迭代器将返回`NoSuchElementException`。

最重要的是，我认为你真的不想做空支票

```
while (!visibleTiles.isEmpty())) {
....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:27:47.733

`while (visibleTiles.keySet().iterator().hasNext())``Iterator`每次调用时都会创建一个新的*。如果`visibleTiles`不为空，则始终为 true，因为永远不会调用*相应迭代器*的 next 方法并且内部指针永远不会前进。

迭代器应该像这样使用：

```
Iterator<TileType> tileIt = visibleTiles.keySet().iterator();
while (tileIt.hasNext()) {
    TileType tile = tileIt.next();
    // ...
} 
```

*这里的重点是可能有多个迭代器同时引用同一个集合。每个迭代器都有自己的内部状态存储（不一定显式）最后返回的元素以及`next()`调用下一个应返回的元素。这可能很有用，例如，对集合中的所有元素对执行一些操作，其中需要两个迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-01T08:00:56.183

您可以使用 com.google.common.collect.Iterables 类对 Iterable 值进行空检查。

```
Iterables.isEmpty(yourIterable) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:28:32.137

**修复 while 条件应该可以解决问题**。

通过在前面添加 not(!) 将条件更改为检查非空：

```
 while (!visibleTiles.isEmpty())) { 
```

编辑：示例代码：

```
 HashMap<String, Object> visibleTiles = new HashMap<String, Object>();
    visibleTiles.put("abc", new Object());
    visibleTiles.put("xyz", new Object());
    visibleTiles.put("def", new Object());
    String tile = null;
    while (!visibleTiles.isEmpty()) {
        tile = visibleTiles.keySet().iterator().next();
        if (tile != null){
            Object bitmap = visibleTiles.remove(tile);
            if(bitmap != null){ //safe to recycle if tile cache is not actively holding it
                System.out.println("Recycle");
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T17:38:25.393

多亏了有关效率的良好信息，我通过删除 isEmpty 调用，用原始帖子中的代码修复了 no such element 异常。当您在同一代码区域中调用 next 时，您通常希望使用 hasNext 。

```
while (visibleTiles.keySet().iterator().hasNext()) {
    tile = visibleTiles.keySet().iterator().next();
        if (tile != null){
            bitmap = visibleTiles.remove(tile);
            if(bitmap != null && !containsKey(tile)){ //safe to recycle if tile cache is not actively holding it
                bitmap.recycle();
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T16:39:19.663

这与您提出的问题（已经回答）无关，而只是作为[文档的附注](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

您可以避免在键集迭代器上删除（最终从地图中删除条目），而不是在地图本身上进行删除（在迭代键集时从外部修改地图）。

看起来易受攻击的代码部分：

```
tile = visibleTiles.keySet().iterator().next();
if (tile != null){
    bitmap = visibleTiles.remove(tile); 
```

例子：

以下导致`ConcurrentModificationException`：

```
Map<String, String> map = new HashMap<String, String>();         
map.put("1", "1");
map.put("2", "1");
map.put("3", "1");
Iterator<String> it = map.keySet().iterator();
while(it.hasNext()) {
    if(it.next().equals("2")) {
         map.remove("2");
    }
} 
```

而以下从地图中删除条目：

```
Map<String, String> map = new HashMap<String, String>();         
map.put("1", "1");
map.put("2", "1");
map.put("3", "1");
Iterator<String> it = map.keySet().iterator();

while(it.hasNext()) {

    String key = it.next();

    if(key != null) {

         String value = map.get(key); // you have the value and
         it.remove(); //you are modifying the map only through the iterator itself

         //... do stuffs with the value
    }
} 
```

# sql-server - 使用表变量从 SQL Server 中选择语句的语法错误

> ID：13053196
> 
> 赞同：2
> 
> 时间：2012-10-24T16:10:10.020
> 
> 标签：sql-server, sql-server-2008

我有一个存储过程，我在其中创建了一个表变量，然后尝试`select`对该表变量执行一个，但输出引发了不正确的语法错误。

我在下面有我的存储过程（简化）：

```
CREATE PROCEDURE [dbo].[spGetLog] 
AS
  SET NOCOUNT ON;

  Declare @Table table (ID int identity(1,1), 
                        Node varchar(100)
                       )

  insert into @Table(Node) values ('employee')

  Declare @sqlquery AS NVARCHAR(1000)

  SET @sqlquery = 'select * from @Table;'
  EXEC (@sqlquery) 
```

报错——

> *'@Table' 附近的语法不正确*

实际上，`@sqlquery`我拥有的变量很复杂，我需要使用一个变量并执行查询。

有没有办法我仍然可以使用变量执行我的存储过程？欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:37:53.387

正如[David W](https://stackoverflow.com/users/1345535/david-w)在他的评论中提到的那样，如果您想要在 EXEC 范围内可见的东西，只需使用临时表（而不是表变量）：

```
CREATE TABLE #Table (ID int identity(1,1), 
                    Node varchar(100)
                   )
insert into #Table(Node) values ('employee')

Declare @sqlquery AS NVARCHAR(1000)

SET @sqlquery = 'select * from #Table;'
EXEC (@sqlquery)

DROP TABLE #Table; 
```

# c# - 通过不同的方法公开 WCF 服务

> ID：13053197
> 
> 赞同：1
> 
> 时间：2012-10-24T16:10:13.407
> 
> 标签：c#, wcf, rest, soap

因此，我们最近将大部分业务逻辑转移到了服务层，这导致我们重构了已公开为 API 服务的服务。我认为自己对 WCF 有足够的经验，但当然还有更多的学习要做。我有兴趣找出的东西，真的不是我可以在书中找到的吗？

如果我们想要公开一个服务**ReturnService**，但我们想通过 SOAP 和 REST 公开它，那么这样做的最佳实践是什么？到现在为止，我总是只创建两个实现和接口，这违背了我对使用单个接口进行多个实现的宣扬。

我不确定如何将一个接口用于两种实现，因为我需要在接口上指定服务特定信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:26:05.060

我猜你不能同时使用单一的服务合同。相反，您可以拥有两个服务合同并在单个类中实现两者。

请阅读这篇[文章](http://debugmode.net/2011/12/22/how-to-enable-rest-and-soap-both-on-the-same-wcf-service/)会对你有所帮助。

本文将逐步完成您所要求的工作，同时公开 REST 和 SOAP。本文以 JSON 格式公开 REST。

# php - Facebook评论插件未发布到Facebook个人资料

> ID：13053211
> 
> 赞同：0
> 
> 时间：2012-10-24T16:10:56.870
> 
> 标签：php, javascript, facebook, facebook-graph-api

我在我的网站 Pranknut (http://www.pranknut.com) 中集成了 Facebook 评论插件，但它没有将评论发布到用户的 Facebook 个人资料。虽然它在网站上显示评论。它是Facebook中的错误吗？我在其他网站上也看到过类似的问题。我正在使用 fb:comments 进行 facebook 评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:56:04.967

问题似乎仅在于发布的第一个评论。

如果我作为管理员发布评论，第一个评论甚至不会自动出现 - 您需要刷新页面才能看到它 - 而且它也没有发布在我的个人资料中。

对于其他人，评论出现在我的网站上，但每个读者的第一条评论都不会发布到他们的个人资料中。

奇怪的东西:-(

# jquery - Highcharts导致IE运行缓慢

> ID：13053218
> 
> 赞同：2
> 
> 时间：2012-10-24T16:11:09.533
> 
> 标签：jquery, internet-explorer-8, highcharts

我的 HTML 页面中有近 30 个 highcharts，一次显示选择的一个并隐藏其余的。在选择几个 highcharts 后这样做时，我收到一条错误消息：“此页面上的脚本导致 Internet Explorer 运行缓慢”。是因为同时绘制的图表太多吗？有什么方法可以破坏隐藏的图表并在选择时重新创建它们。

在 jQuery ready() 中，我有一个函数 drawTrendCharts()，用于从 JSON 数据中动态绘制图表

```
function drawTrendCharts() {
    $.ajax({
        type: "POST",
        url: url,
        data: data,
        success: function(data) {
            chart = new Highcharts.Chart({ /*configurations*/    
            });
        }
    });
}    ​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:11:49.980

我每次在进行ajax调用之前都尝试清空容器然后删除一些循环语句使脚本在ie中运行缓慢..从而解决了这个问题

# wif - 如何根据应用程序配置通过 tt.idm 接受 SAML2 令牌

> ID：13053222
> 
> 赞同：0
> 
> 时间：2012-10-24T16:11:27.417
> 
> 标签：wif, thinktecture-ident-model

好的，我正在使用 Thinktecture IdentityModel 4.0 (tt.idm) 通过我的 WebAPI 接受传入的 SAML2 安全令牌并将它们转换为 ClaimsPrincipals。根据 tt.idm 附带的示例，我有一个按我期望的方式工作的项目。

唯一的问题是所有示例（以及我的项目）都使用硬编码的 SecurityTokenHandlerConfiguration 对象，我想在我的 WIF 配置中使用这些设置。

所以，我目前有一些看起来像这样的东西：

```
 public static AuthenticationConfiguration Create()
    {
        var config = new AuthenticationConfiguration();
        var idsrvRegistry = new ConfigurationBasedIssuerNameRegistry();

        idsrvRegistry.AddTrustedIssuer("*THUMBPRINT REDACTED*", "*ISSUERNAME REDACTED*");

        var idsrvConfig = new SecurityTokenHandlerConfiguration();

        idsrvConfig.AudienceRestriction.AllowedAudienceUris.Add(new Uri("http://somerealm.com"));
        idsrvConfig.IssuerNameRegistry = idsrvRegistry;
        idsrvConfig.CertificateValidator = X509CertificateValidator.None;

        config.AddSaml2(idsrvConfig, AuthenticationOptions.ForAuthorizationHeader("SSO_SAML"));

        return config;
    } 
```

但是，我想从我的配置中加载这些值 - 无论是通过加载 microsoft.identityModel 配置部分自动加载，还是......任何有意义的。

但是，到目前为止，没有任何效果 - 例如，仅更新 ConfigurationBasedIssuerNameRegistry 会产生一个空的 IssuerNameRegistry。加载 microsoft.identityModel 配置部分会产生......一个基本上没有属性的配置部分。

有没有办法告诉 tt.idm 从当前配置加载？或者告诉 WIF 的方法？

我应该如何进行？oO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:06:41.927

您必须从配置中手动读取值并在您的创建方法中分配它们。

您可以使用 FederatedAuthentication 或 IdentityConfiguration 从配置中读取。

# jquery - Jquery选项卡覆盖内容链接

> ID：13053224
> 
> 赞同：0
> 
> 时间：2012-10-24T16:11:36.260
> 
> 标签：jquery, jquery-ui

我正在使用 Jquery 选项卡，并且由于某种原因，它过度使用了 ID 为 #ui-tabs[object , object] （ a href="#ui-tabs[object , object]" ）的链接，这是为什么会发生这种情况的想法?

下面是我的结构示例

JS

```
$(function () {
      $(".Whatson-today").tabs();
}); 
```

HTML

```
<div class="Whatson-today">

<ul id="WOT-TabNav">

    <li class="WOToday">    
        <a href='#tabs-1'>
            What's on Today
        </a>

    </li>

    <li class="WOTomorrow">    
        <a href='#tabs-2'>
            What's on Tomorrow
        </a>

    </li>

</ul>

<div id='tabs-1'>   
    <ol>

        <li>
            <ol>
                <li class="WOT-Time">
                    7:30 PM
                </li>
                <li class="WOT-Title">
                 <h2 style="display:none;"><a  href="#">test</a></h2>
                    <h2><a href="http://somelink.com">somelink</a></h2>
                </li>
            </ol>
        </li>

    </ol>
</div>   

<div id='tabs-2'>   

</div>
</div> 
```

# objective-c - 使用 NSWindow 居中调整大小

> ID：13053227
> 
> 赞同：0
> 
> 时间：2012-10-24T16:12:07.410
> 
> 标签：objective-c, xcode, macos, cocoa, nswindow

我有一个 NSWindow，它位于 NSStatusItem 的位置。窗口可以使用它自己的方法改变它的大小`setSize:`，这只是得到窗口的正确框架，如下所示：

```
- (NSRect)frameForSize:(NSSize)size {
    NSRect newFrame = self.frame;
    newFrame.origin.x += (newFrame.size.width - size.width) / 2;
    newFrame.origin.y += (newFrame.size.height - size.height);
    newFrame.size = size;

    return newFrame;
} 
```

如果宽度改变，这允许窗口保持居中。我可以使用代码轻松调用它，但是当我使用窗口边缘调整它的大小时，直接调用 setFrame:display:。有一个委托方法`windowDidResize:notification:`，但是如果我在那里设置框架，它会被设置两次并且它会滞后。

在实际调整窗口大小之前是否有一个事件被调用？如果没有，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:17:37.640

根据您的[上述评论](https://stackoverflow.com/questions/13053227/centred-resizing-with-nswindow#comment17726913_13053227)，您已分类`NSWindow`。假设您的方法`-frameForSize:`在您的`NSWindow`子类上，覆盖`-[NSWindow setFrame:display:]`如下：

```
- (void)setFrame:(NSRect)frameRect display:(BOOL)flag
{
    frameRect = (self.inLiveResize) ? [self frameForSize:frameRect.size] : frameRect;
    [super setFrame:frameRect display:flag];
} 
```

我已经测试过了。窗口将平滑调整大小并始终居中。

# ms-access - 基于组合框选择显示消息框

> ID：13053228
> 
> 赞同：0
> 
> 时间：2012-10-24T16:12:08.927
> 
> 标签：ms-access, ms-access-2010

我有一个包含几个子表单的表单。目前我有两个组合框。一个按供应商过滤子表单，另一个选择一个价格水平来确定哪个子表单，即价格水平，是可见的。我的那部分工作正常。但是，现在我还想根据价格水平选择显示一个消息框。

我有另一个包含特殊客户定价的表。Is it possible for example, when the combo box price level is selected it checks to see if there are customers at that price level with special pricing and display a message box with the customers who have special pricing.

如果有两个客户：“客户名称”和“客户名称”有特价。

这是我的表关系

![在此处输入图像描述](../Images/4cc88f2a8ddb419e6e6910953d9f040d.png)

这是我当前的价格水平组合框代码

```
Option Compare Database

Sub ShowSubform()

'Save unsaved changes to currently open subform
DoCmd.DoMenuItem acFormBar, acRecordsMenu, acSaveRecord, , acMenuVer70

'Display appropriate subform based on cboPriceLevel chosen
If cboPriceLevel = "J6" Then
    J6_All_subform.Visible = True
    J7_All_subform.Visible = False
    J8_All_subform.Visible = False

    ElseIf cboPriceLevel = "J7" Then
    J6_All_subform.Visible = False
    J7_All_subform.Visible = True
    J8_All_subform.Visible = False

    Else
    J6_All_subform.Visible = False
    J7_All_subform.Visible = False
    J8_All_subform.Visible = True

End If

End Sub

Private Sub Form_Current()

'Call subroutine to display appropriate subform based on template type
ShowSubform

End Sub

Private Sub cboPriceLevel_AfterUpdate()

'Call subroutine to display appropriate subform based on template type
ShowSubform

End Sub 
```

谢谢您的帮助。如果我没有意义，请告诉我，您需要更好的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-07T02:31:27.813

您可以创建一个 On_Click 事件（或失去焦点或任何您喜欢的事件），该事件将在选择价格时触发。例如，如果您有一个名为“Customers”的表，其中包含“name”和“specialPricing”列，那么您可以运行 SQL 查询来查找具有特殊定价的用户并将该数据显示给用户。该算法将是这样的：

*   用户选择后，从组合框中获取价格
*   使用存储的 SQL 查询并将价格值添加到字符串中： SELECT c.[name] FROM Customers AS c WHERE c.[specialPricing] = " & comboBoxPrice.value & ";"
*   将查询的返回值存储在记录集中。
*   如果 RS 为空，则向用户显示 MsgBox“在此价格级别没有具有特殊定价的客户” 否则：遍历记录集以创建一个字符串，其中包含具有特殊定价的客户和 MsgBox 这个列表/字符串给用户。

# iphone - didFinishLaunchingWithOption 和 viewDidLoad 有什么区别

> ID：13053230
> 
> 赞同：6
> 
> 时间：2012-10-24T16:12:16.277
> 
> 标签：iphone, viewdidload

`didFinishLaunchingWithOption`这两种方法和有什么区别`viewDidLoad`？

前者是 的方法，`AppDlegate.m` 后者是 的方法`ViewController.m`，但它们都执行将 UI 加载到视图上的相同任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:16:54.793

这`application:didFinishLaunchingWithOptions:`是一个`UIApplicationDelegate`协议方法，当 iOS 完成为您的应用程序运行设置区域时调用，它是您（开发人员）加载视图控制器等的插入点。

`viewDidLoad`另一方面，该方法是当一个实例将其视图加载到内存中时调用的类的`UIViewController`方法。`UIViewController`来自 Apple 的文档：

> 在控制器的视图加载到内存后调用。
> 
> **讨论** 在视图控制器将其视图层次结构加载到内存后调用此方法。无论视图层次结构是从 nib 文件加载还是在 loadView 方法中以编程方式创建，都会调用此方法。您通常覆盖此方法以对从 nib 文件加载的视图执行额外的初始化。

# android - Android浏览器中的Web应用程序：提示访问者保存书签？

> ID：13053234
> 
> 赞同：1
> 
> 时间：2012-10-24T16:12:29.850
> 
> 标签：android, web-applications, bookmarks, android-browser

我已经为 iOS 和 android 编写了一个 webapp。在 iOS 上，我发现[这个](http://code.google.com/p/mobile-bookmark-bubble/)很棒的工具可以提示 iOS 用户在他们的主屏幕上添加书签。

在android中做类似的事情有哪些选择？我认为，不同制造商对浏览器应用程序进行的重新换皮将很难让弹出窗口显示指向屏幕任何特定区域的说明。

是否可以提示用户使用 javascript 保存书签？我已经考虑过从页面广播意图的可能性，但我怀疑这是否可能。

我的最后一个选择是构建一个可以提示用户下载的包装应用程序，但这似乎太过分了。如果没有必要，希望不要走这条路。

# java - 如何在 JBoss 7.0.2 中使用本机库 (apr)

> ID：13053236
> 
> 赞同：0
> 
> 时间：2012-10-24T16:12:33.483
> 
> 标签：java, jboss7.x

我尝试在 jbossas 7.0.2 上启用 APR 支持。我正在使用带有 java-6-openjdk 的 Ubuntu 10.04 LTS x64。
为此，我完全按照[此处](https://stackoverflow.com/questions/7342926/how-to-load-apr-connector-native-in-jboss-7)
的说明进行操作， 但之后我的控制台中仍然有以下几行：

```
17:39:15,193 INFO  [org.apache.catalina.core.AprLifecycleListener]
(MSC service thread 1-5) The Apache Tomcat Native library which allows
optimal performance in production environments was not found on the
java.library.path:
/opt/jboss/jboss-as-web-7.0.2.Final/bin/native:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/share/hck:/opt/jboss/jboss-as-web-7.0.2.Final/bin:/usr/lib/jvm/java-6-openjdk/bin  

17:39:15,319 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC
service thread 1-5) Démarrage de Coyote HTTP/1.1 sur
http--0.0.0.0-8080 
```

我被这个问题困住了。预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:25:30.600

[一个解决方案，当然不是最好的，在这里](https://community.jboss.org/wiki/UsingNativeLibrariesaprWithJBoss702)的第 4 点描述

对于 linux x86 服务器：

```
mkdir -p $JBOSS_HOME/standalone/tmp/bin/META-INF/lib/linux2  
cd $JBOSS_HOME/standalone/tmp/bin/META-INF/lib/linux2  
ln -s $JBOSS_HOME/bin/native x86 
```

# sql-server - 如何在ssis中将空白转换为null

> ID：13053240
> 
> 赞同：31
> 
> 时间：2012-10-24T16:12:40.050
> 
> 标签：sql-server, error-handling, ssis

我正在从 excel 中提取数据`ssis`。excel 列之一包含`blank`值。所以我需要`blank`用 null 替换 value 否则我的包会失败。有什么建议吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-24T16:37:27.863

在 DataFlow 中使用 DerivedColumn 组件。

替换您的列并在表达式中输入这行代码

`ColumnName == "" ? NULL(DT_WSTR,50) : ColumnName`

如果列为空，它将确保返回 null

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-31T11:23:09.303

您可能还需要检查在源连接和目标连接上保留 Null 值的选项（如果可用）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-24T16:34:57.340

您是否尝试过类似的东西（假设数据类型是字符串/varchar）：

```
LEN(TRIM([ColumnName]))==0 ? NULL(DT_WSTR, 10) : [ColumnName] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-27T10:55:06.720

修复上述问题:::::

源和目标必须使用允许空值选项进行检查，它将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-07T20:04:10.113

我有一个类似的实例，我想将日期列中的字符串替换为 NULL，我使用了以下代码：

LEN(你的数据) < 2 ? NULL(DT_WSTR,50) : your_data

在这种情况下，字符串的长度仅为 1。然后我使用数据转换转换将其转换为 dt_dbtimestamp 类型。

希望有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-19T03:17:17.310

您应该使用派生列组件和条件表达式。由于这是一个条件语句，数据类型需要相同才能创建布尔结果。

尝试使用这个：

```
ColumnName == (DT_DATE)"" ? NULL(DT_DATE) : ColumnName 
```

# mercurial - mercurial 供应商分支上的冲突合并

> ID：13053243
> 
> 赞同：0
> 
> 时间：2012-10-24T16:12:50.753
> 
> 标签：mercurial, branch, conflict, vendor

几天前，我决定在我当前的项目中采用“供应商分支”以进行 3rd 方库更新，因此我尝试按照以下问题中所述进行类似的过程：
[供应商分支，Mercurial Style？](https://stackoverflow.com/questions/3997600/vendor-branching-mercurial-style?rq=1)

现在我基本上有这种情况：

*   `http://host/hg/vendor`- 包含库的 2.0 版和对 3.0 版的更新
*   `http://host/hg/project`- 这是主项目，**已经**包含了库的 2.0 版本，并进行了一些本地更改（以前是 1.0 版本，并且是手动更新的）。

在供应商回购我：

*   创建了一个名为“vendor-lib”的分支
*   添加添加`lib-2.0`和标记`lib-2.0`
*   添加（添加删除）`lib-3.0`和标记`lib-3.0`

在我的项目回购中，我：

*   拉取外部供应商回购`hg pull ../vendor -f`
*   默认情况下我做了`hg merge vendor-lib`

现在问题来了，所有文件都有冲突。在冲突中，Local 和 Other 是正常文件，但 Base 是空的。所以解决方案是添加其中一个或将文件设置为完全空。我认为发生这种情况是因为拉出的分支`vendor-lib`没有任何默认的共同父级。

我不知道是否有办法在两个分支之间设置一个共同的父级，或者只是将 delta 合并`lib-2.0`为`lib-3.0`默认值。

我真的很感谢你的帮助。谢谢你。

# drop-down-menu - css多级下拉菜单编码

> ID：13053246
> 
> 赞同：1
> 
> 时间：2012-10-24T16:13:00.377
> 
> 标签：drop-down-menu, multi-level

以下代码在鼠标产品：悬停时显示下拉菜单，但我想要 3 级下拉菜单的 css 代码。我无法继续进行。我想要多级下拉菜单的 css 和 html 编码。

```
 <!DOCTYPE html>
    <html lang="en">
      <head> <title></title>
        <style type="text/css">
        html, body, div, header, footer, aside, nav, article, section   { margin: 0; padding: 0;}
            header, footer, aside, nav, article, section    { display: block; }
            body            { background: #ece9dd; font:12px Helvetica, Arial, sans-serif; line-height: 18px;}
            h2              { color: #333; }
            a               { color: #337810; }
            p               { margin: 0 0 18px; }
            .moveR { float:right }
            .break { clear:both; margin:10px 0px; }

        /*  navigation { */

        .navigation { background:url(images/grads.png) left -57px repeat-x;
                      height:45px; margin:0px; 
                         padding:0px;  z-index:1000;position:relative; }
      .navigation ul li  { float:left;
                        font-family:Arial,sans-serif;list-style:none; 
                           font-weight:bold; font-size:14px; 
                           border-right:1px solid #919191; }
       .navigation ul li a, .navigation ul li a:visited {
            color:#333; 
            display:block; 
            height:45px; line-height:45px; 
            padding:0 15px; }
        .navigation ul li a:hover, .navigation ul li a:active, .navigation ul li a.selected { 
         background:url(images/grads.png) left -102px repeat-x; color:#FFF } 
         /*End  navigation*/

       /* Submenu items */
         .navigation ul ul {
          display:none; /* Sub menus are hidden by default */
        position:absolute;
          // position:static;
        //top:3.5em;
        left:70px;
        float:left;
        right:auto; /*resets the right:50% on the parent ul */
        width:10em; /* width of the drop-down menus */

    }      

    .navigation ul ul li {
        left:auto;  /*resets the left:50% on the parent li */
        //left:220px;
        margin:0; /* Reset the 1px margin from the top menu */
        clear:left;
        float:left;
        width:100%;
    }
    /*     */
    .navigation ul ul li a,
    .navigation ul li.active li a,
    .navigation ul li:hover ul li a,
    .navigation ul li.hover ul li a { /* This line is required for IE 6 and below */
        font-size:.8em;
        font-weight:normal; /* resets the bold set for the top level menu items */
        background:#FFCC00;
        color:#444;
        line-height:1.4em; /* overwrite line-height value from top menu */
        border-bottom:1px solid #ddd; /* sub menu item horizontal lines */
        float:left;
            width:100%;
    }
    .navigation ul ul li a:hover,
    .navigation li.active ul li a:hover,
    .navigation ul li:hover ul li a:hover,
    .navigation ul li.hover ul li a:hover { /* This line is required for IE 6 and below */
        background:#F9A631; /* Sub menu items background colour */
        color:#fff;
        float:left;
    }

    /* Flip the last submenu so it stays within the page */
    .navigation ul ul.last {
        left:auto; /* reset left:0; value */
        right:0; /* Set right value instead */
    }
    .navigation ul ul.last li {
        float:right;
        position:relative;
        right:.8em;
    }

    /* Make the sub menus appear on hover */
    .navigation ul li:hover ul,
    .navigation ul li.hover ul { /* This line is required for IE 6 and below */
        display:block; /* Show the sub menus */
    }   /* Submenu items */ 

         /*search*/
         .S_field { padding:4px; font-size:12px; border:1px solid #b5b4b4; background:#fbfbfa; width:230px; }
       .S_btn { border:1px solid #f6f6f6; width:70px; color:#FFF; font-size:12px; padding:2px 6px; 
              background:url(images/grads.png) left -147px repeat-x; 
             -moz-border-radius:2px; 
             -webkit-border-radius:2px;
             -khtml-border-radius:2px; border-radius:2px;}
      .S_btn:hover { cursor:pointer }
      .S_btn:active { background:#ff5c02; outline:none; }      /*End search*/

        </style>

      </head>
      <body>
    <!-- Navigation -->
        <div class="navigation">
                        <ul>
                            <li><a href="#" class="active">Home</a></li>
                            <li><a href="#">Products</a>
                                <ul><li><a href="#">Electrical Switchgears</a></li>
                                           <ul><li><a href="#">sub-product</a></li></ul>
                                        <li><a href="#">Product 2</a></li>
                                        <li><a href="#">Product 3</a></li>

                                       <li><a href="#">Link five is a long link that wraps</a></li></ul>
                                </li>
                            <li><a href="profile.html" target="_top">Profile</a></li>
                            <li><a href="contact.html" target="_top">Contact</a></li></ul>

                <div class="moveR">  <!--Search-->
               <div class="break"></div>
                      <form style="margin:0px 15px 0 0; padding:0px;" 
                      action="http://styles.clipbucket.net/search_result.php"
                      name="search" id="search" method="get">
                      <input name="query" id="query" type="text" class="S_field" value="" />
                      <input name="submit" type="submit" class="S_btn" value="Search" />
               </form></div> <!-- Search End -->
            </div>              <!-- END Navigation -->

      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:00:47.703

```
#menu li:hover ul ul, #menu li:hover ul ul ul, #menu li:hover ul ul ul ul{
display:none;
}

#menu li:hover ul, #menu li li:hover ul, #menu li li li:hover ul, #menu li li li li:hover     ul{
display:block;
} 
```

这段代码在我的项目中完美运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T06:28:37.890

虽然接受的答案很好，但您可以抽象菜单项 (LI) 以缩短代码：

```
.menuItem:hover > ul {
    display:block
} 
```

现在你有无限级别的子菜单

# html - CSS 缩放属性在 FF 中的行为不同

> ID：13053247
> 
> 赞同：0
> 
> 时间：2012-10-24T16:13:01.610
> 
> 标签：html, css, zooming

我想制作一个始终适合 100% 屏幕并与中心对齐的滑块，无论分辨率如何。我想用 zoom 属性来做，并用 Javascript 来改变它。

到目前为止，我对此进行了编码

CSS：

```
#wrapper-slider{position:absolute;width:100%;height:100%;top:0;left:0;z-index:7;display:block;  -moz-transform: scale(0.3); zoom:30%; -moz-transform-origin:0 0;}       
#container-slider {background:url('http://i48.tinypic.com/znpwm0.jpg') no-repeat; width:967px; height:800px; margin: 0 auto; text-align:center; display: block; position: relative;}    
#wrapper-slider .img {position:absolute;display:black;z-index:8;height:486px;width:758px; padding-left: 101px; padding-top: 94px; margin:0 auto; text-align: center;}
#wrapper-slider .img img {max-height: 487px; max-width:758px; margin:0 auto; display: block;}
#container-slider p {position: absolute; z-index: 20; color:#000000;}
#container-slider strong { line-height: 21px;}
#container-slider .add-to-basket {left:109px; bottom:24px;}
#container-slider .add-to-basket a {display: block; width:142px; height:36px; font-size:14px; font-weight:bold; text-align:center; color: black;line-height: 34px;}
#container-slider .description {right: 112px; bottom:17px; width: 361px; height:76px; text-align:center; font-size:15px;}
#container-slider .details {right:492px; bottom:17px; width:188px; height:76px; text-align:center; font-size:15px;}
#container-slider .price {left:109px; bottom:72px; width:142px; text-align:center; font-size:24px; color: #FF6C00;}
#container-slider .left{left:395px;}
#container-slider .right{right:401px;}
#container-slider .arrow{width:80px; height: 80px; display:block; bottom:120px; position:absolute;z-index:10; text-indent: -10000000px;}
#container-slider .close{width:70px; height: 70px; display:block; top:25px; right:40px; position:absolute;z-index:10; text-indent: -10000000px;}
#container-black{position:absolute;width:100%;height:100%;top:0;left:0;background:#000;z-index:6;}​ 
```

HTML：

```
<div id="wrapper-slider">
    <div id="container-slider">
        <a class="close" href="#" title="Zamknij podgląd">close</a>

        <div class="img">
            <img class="main" src="http://asset0.cbsistatic.com/cnwk.1d/i/tim/2012/08/15/35414204_620x433.jpg"/>
        </div>

        <a class="arrow left" title="Poprzedni produkt" href="#">Left</a>
        <a class="arrow right" title="Następny produkt" href="#">Right</a>

        <p class="price">390.00 PLN</p>
        <p class="add-to-basket"><a href="#">Dodaj do koszyka</a></p>

        <p class="details">
            <strong>Wymiary:</strong><br>
            100 x 50 cm<br>
            <strong>Technika:</strong><br>
            Rysunek
        </p>

        <p class="description" title="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.        ">
            <strong>Opis:</strong><br>
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy t...        
        </p>    
    </div>

</div>
<div id="container-black"></div>
​ 
```

此代码在 jsfiddle.net 中工作：http: [//jsfiddle.net/MjmDT/1/](http://jsfiddle.net/MjmDT/1/)

它在 chrome 中完美运行，但在 FF 和 IE 中它与左侧对齐。我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:17:51.157

没有名为`zoom`. 这是对 CSS 的专有 MS IE 扩展（如`hasLayout`标志）。

此外，Firefox 允许设置缩放时发生的情况：是否放大整个页面，包括任何图像（任何当前浏览器版本的默认设置）。或者在缩放页面时应该只增加文本大小。检查您的 Fx 设置：“查看”->“缩放”（或类似的，我安装了德语版本）。

# html - HTML5 视频无法在 Ipad/Android 上播放

> ID：13053251
> 
> 赞同：0
> 
> 时间：2012-10-24T16:13:14.353
> 
> 标签：html, video

我有一个 MP4 视频，我正试图在 Android 和 iPad 上通过 HTML5 播放。

html代码是

```
<video width="510" height="315" autobuffer controls >
    <source src="video.mp4" type="video/mp4" />
</video> 
```

VLC视频的媒体信息是

```
Stream 0:
    Type: Video
    Codec: H264 - MPEG-4 AVC (part 10) (avc1)
    Resolution: 856x368
    Frame rate: 23.976000
    Decoded format: Planar 4:2:0 YUV
Stream 1
    Type: Audio
    Code: MPEG AAC Audio (mp4a)
    Channels: Stereo
    Sample rate: 44100 Hz 
```

我通过使用 ffmpeg 使用 vcodec libx264 acodec aac 转换另一个视频来创建视频

iPad 只是在黑屏上显示一个带有一条线的播放图标

这是否可能因为视频格式错误而发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-27T04:08:02.063

今天我的朋友也有类似的问题；我在 Windows 10 上尝试了 Edge 42，或者在 Android 上尝试了 FireFox、Google chrome，它无法播放视频。所以我使用 VLC 来转换这个 meida 以删除编码格式'Planar'。然后我可以在上述浏览器上播放它。

我使用的软件：VLC 媒体播放器版本 3.0.3 Vetinari

VLC视频的媒体信息是

`Stream 0 Codec: H264 - MPEG-4 AVC (part 10) (avc1) Type: Video Video resolution: 759x720 Buffer dimensions: 768x738 Frame rate: 30 ***Decoded format: Planar 4:4:4 YUV*** Orientation: Top left Chroma location: Left`

转换后，它工作，这是我的参数：Convert Settings Profile [Video for Youtube HD] 并编辑选择的配置文件，禁用音频编解码器（因为我不需要音频，如果你需要这部分试试），检查视频编解码器 - > 分辨率并选择您想要的帧大小。最后转换并保存。

VLC视频的媒体信息是

`Stream 0 Codec: H264 - MPEG-4 AVC (part 10) (avc1) Language: English Type: Video Video resolution: 758x720 Buffer dimensions: 768x720 Frame rate: 30.689656 ***Decoded format:*** Orientation: Top left Chroma location: Left`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T16:20:28.067

你可以在这里找到一个很好的教程来帮助你：

[http://www.robwalshonline.com/posts/tutorial-serving-html5-video-cross-browser-include-ipad/](http://www.robwalshonline.com/posts/tutorial-serving-html5-video-cross-browser-including-ipad/)

我认为你的问题是编码。Ipad 视频在 mov 格式下播放效果很好。

# python - 并发读取python中的文件

> ID：13053253
> 
> 赞同：0
> 
> 时间：2012-10-24T16:13:19.723
> 
> 标签：python, multithreading

我有一个文件，我在其中写入了一些数据。说 8 个字节的数据 现在使用我的 python 脚本，我想在第一个线程仍在运行或挂起时使用一个线程读取前四个字节，然后使用另一个线程读取接下来的 4 个字节。我怎样才能使用python做到这一点？即 1) 使用 thread1 从 file1 读取前 4 个字节 2) 当 thread1 运行或挂起时，使用 thread2 从 file1 读取接下来的 4 个字节

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:17:06.873

运行两个线程并在两个线程中分别打开和读取文件，可以使用`seek`跳转到特定位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:10:37.343

```
from multiprocessing import Process, Queue

class MyFileWrapper:

    def __init__(self, filePath, start, stop):
        self.filePath = filePath
        self.start = start
        self.stop = stop

    def getData(self):
        with open(self.filePath, 'r') as f:
            f.seek(self.start)
            data = f.read(self.stop - self.start)
            print data

def worker(q):
    myFileWrapper = q.get()
    myFileWrapper.getData()

if __name__ == "__main__":

    work_queue = Queue()

    p1 = Process(target=worker, args=(work_queue,))
    p1.start()
    p2 = Process(target=worker, args=(work_queue,))
    p2.start()

    work_queue.put(MyFileWrapper('C:\Users\Asus\Desktop\pytest.txt', 0, 4))
    work_queue.put(MyFileWrapper('C:\Users\Asus\Desktop\pytest.txt', 4, 8))

    work_queue.close()
    work_queue.join_thread()
    p1.join()
    p2.join() 
```

# mysql - 使用shell将数据从一个数据库表移动到另一个表

> ID：13053254
> 
> 赞同：1
> 
> 时间：2012-10-24T16:13:20.597
> 
> 标签：mysql, shell, data-migration

我在 mysql 中有两个数据库，我想将数据从 database1 的一个表移动到 database2 的一个表中。这些表具有相似的架构。我知道我可以使用此查询将数据从另一个表插入到表中。

```
Insert Into table1 (select * from table2) 
```

我可以用命令行来做到这一点。问题是这些表来自不同的数据库，我知道要从一个表中读取数据，我必须使用这个 sql 命令选择它的数据库

```
use database1; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:24:10.140

您可以使用：`insert Into db1.table1 (select * from db2.table2)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:24:38.490

您不需要使用必要的`use database1`句子...您可以执行以下操作：

```
insert into database2.table1
select * from database1.table1 
```

如果你想使用 shell，你可以使用`mysqldump`. 如果您在 Linux（或其他 unix 或类 unix 环境）上工作，您可以使用：

```
mysqldump -h [host] -u [user] -p[password] database1 table1 | mysql -h [host] -u [user] -p[password] database2 
```

`table1`这将在 中制作（在 中`database1`）的精确副本`database2`。只是一个警告：如果你有一个在其中命名的表`table1`，`database2`它将在复制之前被删除。

希望这可以帮助你

# c - 对内置函数“pow”的 ac 的未定义引用

> ID：13053260
> 
> 赞同：0
> 
> 时间：2012-10-24T16:13:30.953
> 
> 标签：c, math.h

> **可能重复：**
> [未定义 pow()](https://stackoverflow.com/questions/12802185/pow-isnt-defined)

```
void octal2decimal(char *octal, char *decimal) {
int oct = atoi(octal);
int dec = 0;
int p = 0;

while (oct!=0) {

    dec = dec + (oct%10) * pow(8,p++); //since oct is base 8 
    oct/=10;
}
*decimal = (char)dec;
*/
} 
```

对于上面的以下代码，我收到此错误，我不知道为什么要包含`math.h`，但我仍然收到此错误

`/tmp/cck07bLe.o: In function 'octal2decimal':`
`data-converter.c:(.text+0x35f): undefined reference to 'pow'`
`collect2: ld returned 1 exit status`

这是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:15:33.133

数学库不是默认包含的标准 C 库的一部分。与数学库的链接：

```
gcc file.c -o file -lm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:14:38.240

`pow`在数学库 ( `libm`) 中定义，默认情况下未链接。因此，您应该添加 `-lm`到您的编译命令以获取数学库。例如，如果您正在使用`gcc`：

```
gcc data-converter.c -o data-converter -lm 
```

顺便说一句，`pow`这不是计算二的积分幂的正确方法。您应该改用班次：

```
dec += (oct%10) << (3*p++);
oct /= 10; 
```

左移`3*p`相当于乘以 8 ^p，但避免了浮点数。

# wpf - 用于 MVVM 的 Microsoft 的 ViewModelBase 类？

> ID：13053264
> 
> 赞同：4
> 
> 时间：2012-10-24T16:13:37.803
> 
> 标签：wpf, mvvm

对于使用 MVVM 进行 WPF 编程，大多数人似乎编写自己的 ViewModelBase 类和其他 MVVM 框架类，或者使用众多第三方中的一种。但是前几天我在谷歌上搜索一些东西，我在 MSDN 上找到了这个——

[http://msdn.microsoft.com/en-us/LIBRARY/hh721872%28v=vs.110%29](http://msdn.microsoft.com/en-us/LIBRARY/hh721872%28v=vs.110%29)

... 那么微软是否已经提供了一个 MVVM 框架，或者这是 Visual Studio 2012 的新功能？它在角落里说 Visual Studio 2012，但我不知道这是否意味着VS 2012 的**新**功能。（我有 VS 2010）

这是我可以使用的东西，而不是自己编写或下载第 3 方吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:37:19.410

如果您在命名空间层次结构上进行一次旅行

[http://msdn.microsoft.com/en-us/LIBRARY/bb130146.aspx](http://msdn.microsoft.com/en-us/LIBRARY/bb130146.aspx)

您可以看到这些类型是为在扩展 Team Foundation Server 时使用而设计的。所以，不，这并不意味着用于您的 WPF 应用程序。

但是，您可能*可以*创建使用这些类型的 WPF 应用程序。但是，我不确定这些程序集的许可是否允许您在没有 TFS 的机器上部署它们，或者您是否可以在 SDK 安装程序之外交付程序集。快速搜索并没有发现任何东西。可能 SDK 有许可详细信息，我目前没有安装。

假设您可以并且他们也可以，那么已经付出的努力是否可以克服替换代码，而代码本质上是编写微不足道的？或者已经在不同的框架中编写了数十次，实际上所有这些都可以通过 NuGet 获得？

# django - django 查询集操作

> ID：13053270
> 
> 赞同：2
> 
> 时间：2012-10-24T16:14:05.433
> 
> 标签：django, django-views, django-queryset

我在视图中有一个查询集，并希望在将其返回到模板之前对其进行操作/编辑。

但是，如果我想将查询集转换为值（如下）——以便我可以操作它——我不能将它传递给模板。我是否必须将其转换回查询集？我该怎么做？

```
x = RandomModel.objects.values_list() 
```

不起作用，但是

```
x = RandomModel.objects.all() 
```

做。

我首先使用（例如）操纵它：

```
x[3][4]="test" 
```

但即使没有操作，我也无法从模板中访问它。

我将它传递给模板：

```
return render_to_response('index.html', {
    'design_list': x,    
}) 
```

在模板中，我正在尝试使用（例如）访问数据：

```
{% for item in design_list %}
    {{ item.title }}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:11:15.897

正如我之前在评论中所说，您忽略了元组的索引。接下来试试：

```
{% for item in design_list %}
    {{ item.1 }} {# item is a tuple, not a dict #}
{% endfor %} 
```

注意我在 {{ item. **1** }}，它返回元组的第二个元素（第一个通常是`id`）。因此，如果`x = [(1,'title1'), (2,'title2'), ...]`，您将在模板上看到`title1`和。`title2`

# redhat - An error occured while installing charlock_holmes libicu

> ID：13053272
> 
> 赞同：8
> 
> 时间：2012-10-24T16:14:10.707
> 
> 标签：redhat, rhel, gitlab, bundle-install

I'm trying to install Gitlab following [this install script](https://github.com/mattias-ohlsson/gitlab-installer/blob/master/gitlab-install-el6.sh), but am running into an issue where the **charlock_holmes** gem fails to install. I'm not familiar with Ruby. My charlock_holmes-0.6.8 `gem_make.out` file is below.

```
/home/gitlabuser/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb
checking for main() in -licui18n... no
which: no brew in (/home/gitlabuser/.rvm/gems/ruby-1.9.2-p290/bin:/home/gitlabuser/.rvm/gems/ruby-1.9.2-p290@global/bin:/home/gitlabuser/.rvm/rubies/ruby-1.9.2-p290/bin:/home/gitlabuser/.rvm/gems/ruby-1.9.2-p290/bin:/home/gitlabuser/.rvm/gems/ruby-1.9.2-p290@global/bin:/home/gitlabuser/.rvm/rubies/ruby-1.9.2-p290/bin:/home/gitlabuser/.rvm/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/gitlabuser/bin:/usr/lib64/qt4/bin/)
checking for main() in -licui18n... no

***************************************************************************************
*********** icu required (brew install icu4c or apt-get install libicu-dev) ***********
***************************************************************************************
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/gitlabuser/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
    --with-icu-dir
    --without-icu-dir
    --with-icu-include
    --without-icu-include=${icu-dir}/include
    --with-icu-lib
    --without-icu-lib=${icu-dir}/lib
    --with-icui18nlib
    --without-icui18nlib
    --with-icui18nlib
    --without-icui18nlib 
```

I have the **libicu.x86_64** package installed (and also tried the **libicu.i686** when I ran into problems, but uninstalled it after it didn't work).

It appears the **libicu** package isn't including the files required by the **charlock_holmes** gem, but there aren't any *devel* packages available. Any suggestions?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-02T09:16:22.430

红帽、CentOS、Fedora：

`yum install libicu-devel`

Debian，Ubuntu，薄荷：

`apt-get install libicu-dev`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T08:59:49.503

我遇到了同样的问题（使用与 RedHat EL 6 相同的 CentOS 6）。我使用“yum install libicu-devel”，它安装了 libicu-devel-4.2.1-9.1.el6_2.x86_64.rpm 并最终允许安装 charlock_holmes

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-26T19:17:45.077

同样的问题。从 red hat 安装 libicu-devel-4.2.1-9.1.el6_2.x86_64.rpm 并成功安装 charlock_holmes。从[https://rhn.redhat.com/rhn/software/packages/details/Overview.do?pid=680099](https://rhn.redhat.com/rhn/software/packages/details/Overview.do?pid=680099) 您需要登录红帽网络才能获得它。注意我读到它是“可选”包的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T18:01:50.667

使用 yum install libicu-devel 为我工作，然后我可以安装 charlock_holmes。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-22T10:36:30.757

部署到heroku时我遇到了完全相同的问题，我的解决方案是反转构建包：

第一的：

```
 https://github.com/heroku/heroku-buildpack-apt 
```

然后：

```
 heroku/ruby 
```

希望我有所帮助！
弗朗索瓦

# c# - Populate a C# class from a dataset with multiple linked tables using linq lambda

> ID：13053280
> 
> 赞同：3
> 
> 时间：2012-10-24T16:14:38.483
> 
> 标签：c#, linq, lambda

I'm trying to populate a list (`lstContractor`) of a C# class (`contractor`), containing fields and lists, from a `DataSet` returned from SQL. The `DataSet` returns multiple tables, linked by an id.

I've managed to get it all working except 1 field, which is the only field I need from the table it is in. When I'm trying to select it using LINQ, I'm getting `System.Data.EnumerableRowCollection`1[System.String]` instead of the contents of the field.

My Code looks like this:

```
 lstContractor = dsContractor.Tables[0].AsEnumerable().Select(contractor => new Contractor
    {
        intContractorId = contractor.Field<int>("ID"),
        strFirstName = contractor.Field<string>("FirstName"),
        strLastName = contractor.Field<string>("LastName"),
        strProfile = dsContractor.Tables[7].AsEnumerable().Where(profile => profile.Field<int>("ContractorId") == contractor.Field<int>("Id")).
            Select(profile => profile.Field<string>("ContractorProfile")).ToString(),
        // populate addresses
        Address = dsContractor.Tables[6].AsEnumerable().Where(address => address.Field<int>("ContractorId") == contractor.Field<int>("Id")).
                Select(address => new Address
                {
                    intId = address.Field<int>("ContractorId"),
                    strAddressLine1 = address.Field<string>("AddressLine1"),
                    strAddressLine2 = address.Field<string>("AddressLine2"),
                    strAddressLine3 = address.Field<string>("AddressLine3"),
                    strAddressLine4 = address.Field<string>("AddressLine4"),
                    strAddressLine5 = address.Field<string>("AddressLine5"),
                    strPostCode = address.Field<string>("PostCode")
                }).ToList<Address>(),

        // populate industries
        Industry = dsContractor.Tables[1].AsEnumerable().Where(Industry => Industry.Field<int>("ContractorId") == contractor.Field<int>("Id")).
            Select(target => new Industry
            {
                intId = target.Field<int>("ContractorId"),
                strIndustryName = target.Field<string>("IndustryName")
            }).ToList<Industry>(),

        // populate key skills
        KeySkill = dsContractor.Tables[2].AsEnumerable().Where(KeySkill => KeySkill.Field<int>("ContractorId") == contractor.Field<int>("Id")).
            Select(target => new KeySkill
            {
                intId = target.Field<int>("ContractorId"),
                strKeySkillName = target.Field<string>("KeySkillName")
            }).ToList<KeySkill>(),

        // populate email addresses
        EmailAddress = dsContractor.Tables[3].AsEnumerable().Where(EmailAddress => EmailAddress.Field<int>("ContractorId") == contractor.Field<int>("Id")).
            Select(target => new EmailAddress
            {
                intId = target.Field<int>("ContractorId"),
                strEmailAddress = target.Field<string>("EmailAddress"),
                strEmailType = target.Field<string>("EmailType")
            }).ToList<EmailAddress>(),

        // populate phone numbers
        PhoneNumber = dsContractor.Tables[4].AsEnumerable().Where(PhoneNumber => PhoneNumber.Field<int>("ContractorId") == contractor.Field<int>("Id")).
            Select(target => new PhoneNumber
            {
                intId = target.Field<int>("ContractorId"),
                strPhoneNumberType = target.Field<string>("PhoneType"),
                strPhoneNumber = target.Field<string>("PhoneNumber")
            }).ToList<PhoneNumber>(),

        Geography = dsContractor.Tables[5].AsEnumerable().Where(PhoneNumber => PhoneNumber.Field<int>("ContractorId") == contractor.Field<int>("Id")).
                Select(target => new Geography
                {
                    intId = target.Field<int>("ContractorId"),
                    strGeography = target.Field<string>("GeographyName")
                }).ToList<Geography>(),

    }).ToList<Contractor>(); 
```

the class looks like this:

```
 public int intContractorId;
public string strFirstName;
public string strMiddleName;
public string strLastName;
public string strDescription; 
public DateTime dtDOB;
public string strGender;
public string strProfile;
public int intIsFullTime;
public int intWorkMonday;
public int intWorkTuesday;
public int intWorkWednesday;
public int intWorkThursday;
public int intWorkFriday;
public int intWorkSaturday;
public int intWorkSunday;
public DateTime dtAvailableFrom;
public int intActive;
public decimal dcSubscrptionCost;
public DateTime dtRenewalDate;
public List<Address> Address;
public List<EmailAddress> EmailAddress;
public List<PhoneNumber> PhoneNumber;
public List<KeySkill> KeySkill;
public List<Geography> Geography;
public List<Industry> Industry;
public List<SubIndustry> SubIndustry; 
```

The field in question is `strProfile`, but I can't for the life of me figure out why I'm getting the contents that I am, instead of the string the the field contains.

I've checked in debug mode, and the correct data is in the `DataSet`.

Please let me know if I've missed anything.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:22:01.133

这部分：

```
...Select(profile => profile.Field<string>("ContractorProfile")).ToString() 
```

Linq`Select()`返回一个 IEnumerable，所以`ToString()`只是试图告诉你它是一个 IEnumerable。如果您想要返回集合中的第一项，请使用`First()`or `FirstOrDefault()`：

```
...Select(profile => profile.Field<string>("ContractorProfile")).First().ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:23:36.260

You should use [`SingleOrDefault()`](http://msdn.microsoft.com/en-gb/library/bb342451.aspx) method instead of `ToString()`, becuase your query returns an `IEnumerable`:

```
strProfile = dsContractor.Tables[7].AsEnumerable().Where(profile => profile.Field<int>("ContractorId") == contractor.Field<int>("Id")).
            Select(profile => profile.Field<string>("ContractorProfile")).SingleOrDefault(); 
```

**EDIT:**

Becuase you used `ToString()` I assumed you was sure that the query returns 1 element. Infact you should use this solution only if you're completely sure that your query returns a **maximum of 1 element** else it gives an excpetion. If it returns more than one result you should use [FirstOrDefault()](http://msdn.microsoft.com/en-us/library/bb340482.aspx) method which returns the first element else the default type value.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:22:06.093

您正在使用 选择行的枚举`Where`，然后从每一行中选择一个字符串，最后调用`ToString()`可枚举的。也许您打算使用`Single`而不是`Where`：

```
strProfile = dsContractor.Tables[7].AsEnumerable()
    .Single(profile => profile.Field<int>("ContractorId") == contractor.Field<int>("Id"))
    .Select(profile => profile.Field<string>("ContractorProfile")), 
```

# c# - Lucene Boolean query not working in dot net

> ID：13053283
> 
> 赞同：0
> 
> 时间：2012-10-24T16:14:57.890
> 
> 标签：c#, lucene, search-engine, lucene.net

I am using Lucene dot net version 2.9 and constructed my query as following (GetQuery method). I could get the results from the same index using Luke tool with the same query. But not via dotnet API. Not sure is that a bug in Lucene.net? or a mistake on my part. Indexing is done with standard analyzer and analyzed all the fields that I am searching.

Note: It is working with Luke with the same index. I am using .net lucene 2.94 not Java Lucene libraries

The query that is working with Luke tool is this:

**+(content:polaris location:polaris) +ext:/pdf/xls/doc/docx**

Here is the c# code that is NOT working:

```
 private static BooleanQuery GetQuery(string term, string exts)
    {
        string[] fields = { MetaKeys.Content, MetaKeys.Location };
        MultiFieldQueryParser parser = new MultiFieldQueryParser(fields, new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));

        Query multiFieldQuery = parser.Parse(term);
        TermQuery extQuery = new TermQuery(new Term(MetaKeys.Ext, exts));

        BooleanQuery combinedQuery = new BooleanQuery();
        combinedQuery.Add(multiFieldQuery, BooleanClause.Occur.MUST);
        if (extQuery != null)
        {
            combinedQuery.Add(extQuery, BooleanClause.Occur.MUST);
        }

        return combinedQuery;
    } 
```

And it is used as following

```
 string exts = "/pdf/xls/doc/docx";
        BooleanQuery combinedQuery = GetQuery(term, exts);

        TopDocs docs = indexSearch.Search(combinedQuery, to);

        //resulting in 0 Hits 
```

**Note to folks who closed my earlier question: give the original poster a chance (at least 24-hours) to correct it before you are going to close the question.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:09:04.190

也许你会发现[这](https://stackoverflow.com/questions/15861904/net-lucene-why-wont-multifieldqueryparser-and-whitespaceanalyzer-query-in-boo)很适用：它有效，如果你需要任何额外的建议，你可以问我，我在这里很活跃！:)

基本上，它描述的事情与你正在做的事情大致相同，但它展示了一些你在这里没有做的事情；即，使用构造的 MultiFieldQueryParser 对象来解析输入的搜索词，并使用 BooleanQuery 将它们相加。

# ios - 通过整个应用程序保持 Gamekit 蓝牙连接

> ID：13053287
> 
> 赞同：0
> 
> 时间：2012-10-24T16:15:12.343
> 
> 标签：ios, bluetooth, gamekit

所以我正在为我的工作构建一个数据收集应用程序，我们希望有两个 ipad 同时运行该应用程序，同时保持相同的信息。所以我用 gamekit 进行了一些测试，我认为它会很好用，但我只能让它在一个视图控制器上运行。我的问题是用户在使用该应用程序时会在三个不同的视图控制器之间冲浪，而我不知道如何维护该会话并发送数据并侦听数据，无论您在哪个页面上。这是 appdelegate 可以维护的东西吗？或者也许是一个单例类？有人能指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:22:36.200

我会使用 Singleton 类来发送/接收来自游戏套件的命令。该单例也可能发送`NSNotifications`，因此您可以分配任何视图控制器来接收它们（使它们成为观察者）。我已经在几款游戏中实现了这一点，并且效果很好。

例子：

```
#define kWGConnectionManagerDidOpenConnection   @"kWGConnectionManagerDidOpenConnection"
#define kWGConnectionManagerDidCloseConnection @"kWGConnectionManagerDidCloseConnection"

typedef enum {
    WGConnectionTypeUndefined,
    WGConnectionTypeServer,
    WGConnectionTypeClient
} WGConnectionType;

@interface WGAPIManager : NSObject {
}
@property (nonatomic, readonly) WGConnectionType connectionType;

+ (WGAPIManager*) sharedInstance;

- (void) sendCommand:(NSString*) command; 
```

所以任何类都可以使用这个单例使用游戏工具包发送命令，并且任何类都可以成为通知的观察者

# plugins - 将 Web 内容嵌入自定义 liferay portlet 时出现异常

> ID：13053289
> 
> 赞同：1
> 
> 时间：2012-10-24T16:15:16.817
> 
> 标签：plugins, classloader, liferay-6, portlet, apache-commons

我将 Web 内容嵌入到部署到 Liferay EE 6.1 GA 1 的自定义 portlet 中，使用：

```
<liferay-ui:journal-article   articleId="REMEMBER"  groupId="<%=portletGroupId%>" /> 
```

此错误开始显示在日志中，并且 Web 内容不存在：

```
java.lang.ClassNotFoundException: org.apache.commons.fileupload.FileItemFactory
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at org.apache.jsp.html.taglib.ui.journal_005farticle.page_jsp._jspService(page_jsp.java from :410)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:71)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:807)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:626)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:556)
    at com.liferay.taglib.util.IncludeTag.include(IncludeTag.java:323)
    at com.liferay.taglib.util.IncludeTag._doInclude(IncludeTag.java:418)
    at com.liferay.taglib.util.IncludeTag.doEndTag(IncludeTag.java:92)
    at org.apache.jsp.WEB_002dINF.jsp.askaquestion.askAQuestion_jsp._jspService(askAQuestion_jsp.java from :309)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116) 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:55:02.307

请参考以下网址： [http ://www.liferay.com/community/wiki/-/wiki/Main/Liferay+UI+Taglib](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+UI+Taglib)

期刊文章参数：

```
articleId = uniqueID of content article
groupId = group of user
showTitle = show title of article true or false
templateId = which of the defined templates for this journal article to use. Note that there is a bug (reported here) in liferay versions before 6.0.2 where templateId is ignored. 
```

示例：< liferay-ui:journal-article articleId="22745" groupId="<%=scopeGroupId%>" />

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:36:17.030

一件事似乎有帮助。更新了 WEB-INF/liferay-plugin-package.properties 以包含以下行：

`portal.dependency.jars=commons-logging.jar,commons-fileupload.jar`

来自[https://www.liferay.com/community/wiki/-/wiki/Main/Liferay+Developer+Cookbook](https://www.liferay.com/community/wiki/-/wiki/Main/Liferay+Developer+Cookbook)：

> 如果 portal\WEB-INF\lib 中已经存在任何 jar 文件，并且您还想在插件中使用它们。不要再次打包这些罐子，只需将引用添加到 `docroot\WEB-INF\liferay-plugin-package.properties`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:16:24.887

史密斯，我已经创建了自定义 portlet，并在下面的 jsp 中添加了一个 web 内容是代码，也在 plugin-package.properties 中我添加了所有在 JSP 页面中使用的 tld 文件，并且没有在属性中添加任何 jar 文件文件。

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme" %>
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>
<portlet:defineObjects />
<liferay-theme:defineObjects/>

<liferay-ui:journal-article articleId="11414" articleResourcePrimKey="11416" groupId="<%=themeDisplay.getScopeGroupId() %>" languageId="<%=themeDisplay.getLanguageId() %>" showAvailableLocales="<%=true %>" ></liferay-ui:journal-article> 
```

我使用了最新版本的 liferay 6.1.1 EE GA2，但我已经通过 LR6.1 EE GA1 对其进行了验证，它在那里也可以正常工作。

# geolocation - ElasticSearch——使用点距离来影响查询相关性

> ID：13053295
> 
> 赞同：11
> 
> 时间：2012-10-24T16:15:42.713
> 
> 标签：geolocation, elasticsearch, distance

尝试使用 ElasticSearch 创建使用与中心点的距离来影响相关性的搜索。

我不想简单地对与某个点的距离进行排序，我知道这是可能的，因为我希望基于搜索查询的相关性也会影响结果。

我想传入一个搜索字符串，比如“coffee”和一个纬度/经度，比如“38，-77”，然后根据它们与“coffee”的相关程度和接近程度的组合对我的结果进行排序他们是“38，-77”。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-16T15:44:28.730

最近 (0.90.4) 添加的 function_score 查询类型增加了对基于距离的排名的支持。这是自定义分数查询类型的替代方案。

[http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html)

从那里举出的一个例子：

```
"query": {
  "function_score": {
    "functions": [
      { "gauss":  { "loc":   { "origin": "51,0", "scale": "5km" }}},
    ]
  }
} 
```

这将衰减函数（有几个）应用于一个字段（“loc”），该函数根据与给定特定比例的原点的距离进行评分。这正是您想要的距离排名，因为它为您在不编写自定义脚本的情况下如何排名提供了很大的灵活性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T16:25:39.520

您可以使用[自定义分数查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html)脚本中的[`distance`函数](http://www.elasticsearch.org/guide/reference/modules/scripting.html)来根据与中心点的距离进行修改。`_score`

# gradle - mvnrepository gradle 行无效吗？

> ID：13053297
> 
> 赞同：0
> 
> 时间：2012-10-24T16:15:55.747
> 
> 标签：gradle

很长一段时间以来，我在 mvnrepository 中看到了这样的 gradle 行

```
 org.hibernate:hibernate-entitymanager:4.1.7.Final 
```

我从来没有让那条线工作。它真的有效吗？我有点厌倦了无法从 mvnrepository 剪切和粘贴，所以有没有办法使用那条线？

我现在使用的是这个：

```
 compile group: 'org.hibernate',        name: 'hibernate-entitymanager', version: '4.1.7.Final' 
```

只是厌倦了每次修改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:40:18.657

只需将行括在引号中，它就会起作用。例如，`compile 'org.hibernate:hibernate-entitymanager:4.1.7.Final'`。或者，使用[http://search.maven.org](http://search.maven.org)中的“Grails”表示法。

# vim - How to go to tag on file in vim using CtrlP?

> ID：13053298
> 
> 赞同：1
> 
> 时间：2012-10-24T16:15:58.827
> 
> 标签：vim, vim-plugin

I'm using CtrlP and it mentions you can go to tag on a file.

How?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:37:15.057

如果您认真使用 Vim，这个答案是您将得到的最有用的答案。注意。

在正常模式下，键入：

```
:help 
```

访问 Vim 的大量文档。

要获得有关选项的帮助，例如`autochdir`，只需键入以下带引号的内容：

```
:help 'autochdir' 
```

等等……</p>

大多数严肃的插件也附带文档。以下是如何阅读 CtrlP 的文档：

```
:help ctrlp 
```

您将在第 833 行附近获得答案。

不要感谢我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T08:58:58.187

您可以搜索标签`:CtrlPTag`

也可以像这样添加 .vimrc 的快捷方式

```
nnoremap <leader>. :CtrlPTag<cr> 
```

# python - 尝试通过源代码开始跟踪 Python 特性和行为

> ID：13053302
> 
> 赞同：6
> 
> 时间：2012-10-24T16:16:06.770
> 
> 标签：python, python-3.x, python-2.7, cpython

我希望能够通过 Python 源代码进行调查和跟踪，以了解事情在幕后是如何工作的，并解决对参考文档中未明确记录的功能的疑问。

我想有一些关于如何解决这个问题的起始信息，因为它非常压倒性。我会读 C，所以我有这个习惯。除此之外，在没有至少少量指导的情况下，这项任务似乎有点令人生畏。

例如，假设我想记录属性引用是如何在 Python 中实现的。当 Python 程序中存在属性引用表达式时，我将如何跟踪会发生什么？

也许对源代码的组织方式和每个部分的功能进行概述，以及一些“walk=thru”示例，例如“attribute reference”案例，会有所帮助。

我搜索了这方面的信息，但似乎没有太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:31:53.373

也许一个好的 Python 调试器会有所帮助？我会尝试使用[Eclipse 的 PyDev 插件](http://pydev.org/)。这至少可以帮助您跟踪在引用类的属性时调用了哪些特殊的 python 方法（例如`__getattr__()`or ）。`__setattr__()`如果需要更深入，可以查看[Python C API](http://docs.python.org/c-api/)甚至[Python C 源代码](http://svn.python.org/view/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:56:42.853

python标准库中有一个trace模块。它有几种模式，可以用来打印每一行 python 代码，因为它是这样执行的：

```
python -m trace -t myscript.py 
```

请参阅[http://docs.python.org/library/trace.html](http://docs.python.org/library/trace.html)

# ios - 启用 ARC 时如何正确关闭 UIPopover 内的 UIWebView

> ID：13053315
> 
> 赞同：0
> 
> 时间：2012-10-24T16:17:10.143
> 
> 标签：ios, uiwebview, uipopovercontroller

我有一个`UIPopoverController`包含`UIWebViewController`一个按钮按下打开的。在打开通话时按下按钮`dismissPopoverAnimated:animated:`

我不断得到

```
*** -[_UIWebViewScrollView release]: message sent to deallocated instance 0x21cb01b0. 
```

按钮按下代码的片段：

```
if ([self.popover isPopoverVisible]){
    CCLOG(@"Calling dismissPopoverAnimated");
        [self.popover dismissPopoverAnimated:YES];
        self.popover = nil;
    } 
```

该类的`dealloc`方法如下：

```
-(void) dealloc {
  [self.webView stopLoading];
  [self.webView.scrollView setDelegate:nil];
  self.webView.delegate = nil;
  self.webView = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:21:34.383

有些事情我并不完全清楚……您正在使用 ARC，但同时您也提供了一种`dealloc`方法。可能这就是发生双重释放的原因。您会尝试从 中删除该`self.webView = nil;`语句`dealloc`吗？

# php - youtube 获取视频的元数据

> ID：13053317
> 
> 赞同：1
> 
> 时间：2012-10-24T16:17:21.673
> 
> 标签：php, curl, youtube-api

嗨，我需要打印 FLV 流（不是 SWF）的标题、描述和 URL，输出应该是 XML 的形式！！！我在网上找到了这段代码

```
 <?php
function get_youtube($url){

 $youtube = "http://www.youtube.com/oembed?url=". $url ."&format=json";

 $curl = curl_init($youtube);
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
 $return = curl_exec($curl);
 curl_close($curl);
 return json_decode($return, true);

 }

$url = 'http://www.youtube.com/watch?v=B4CRkpBGQzU';

// Display Data 
print_r(get_youtube($url));
?> 
```

此代码使用 cURL 来返回视频的详细信息，但我只想要一个特定的信息，我不能使用 JSON 我将如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:33:52.600

使用函数 json_decode($all_content_request)，它返回一个类，您可以将项目作为属性访问。

```
function get_youtube($url) {

    $youtube = "http://www.youtube.com/oembed?url=" . $url . "&format=json";
    $json =  file_get_contents($youtube);
    return json_decode($json);
}

$url = 'http://www.youtube.com/watch?v=B4CRkpBGQzU';

// Display Data 

$json = get_youtube($url);

echo 'List all attributes';

echo '<pre>';//its just to format code

print_r( array_keys(get_object_vars($json)));

echo 'Example use Title : $json->title <br/>';
echo 'Result:'.$json->title; 
```

# php - 这个动态（列和表）PHP 选择查询安全吗？

> ID：13053318
> 
> 赞同：0
> 
> 时间：2012-10-24T16:17:21.487
> 
> 标签：php, web, pdo, sql-injection

不能使用 PDO ->bindParam() 绑定表和列名称，但我相信不止一个人愿意这样做。有点晚了，但我早点写了这个，到目前为止它有效。我是 php 的新手，想知道您的想法以及它是否安全。

```
$type = "defaultTableName";
$sortBy = "defaultColumnName";
$orderBy = "ASC";

//whitelisting unsafe input
if(isset($_GET['orderBy'])&&($_GET['orderBy']=="ASC"||$_GET['orderBy']=="DESC"))
    $orderBy = $_GET['orderBy'];
$tableNames = array("defaultTableName", "tableName2", "tableName3");
$unsafeType= $_GET['type']; <---unsafe input
$unsafeSortBy = $_GET['sortBy']; <---unsafe input

try {
    $pdo = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    //if input is not valid this will use default table to render a table in html.
$stmt = $pdo->prepare("DESCRIBE $type");
$stmt->execute();
$table_fields = $stmt->fetchAll(PDO::FETCH_COLUMN);

 //Whitelisting user input against table names (will require table names updates)
    if (in_array($unsafeType, $tableNames)) {
    $stmt = $pdo->prepare("DESCRIBE $unsafeType");
    $stmt->execute();
    $table_fields = $stmt->fetchAll(PDO::FETCH_COLUMN);

 ///Whitelisting the column name to sort by against the description of the table.
        if (in_array($unsafeSortBy, $table_fields)) {
        $stmt = $pdo->prepare("SELECT * FROM $unsafeType ORDER BY $unsafeSortBy $orderBy");
    }
    else    {
        $stmt = $pdo->prepare("SELECT * FROM $type ORDER BY $sortBy $orderBy");
    }
} else {
    $stmt = $pdo->prepare("SELECT * FROM $type ORDER BY $sortBy $orderBy");
}
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
 } 
```

我看到的唯一问题是您在更改表时需要添加/删除/更改表名数组。我有一个中小型应用程序，不是很复杂。

注意：我在 stackoverflow 中的编辑也很糟糕，所以如果你知道一种使它更好的方法，请继续编辑或让我知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:21:10.973

不，这不安全。您直接将用户提交的数据放入查询字符串中。**任何时候**你都容易受到 sql 注入攻击。

但是，由于您不能对这些特定值使用占位符，因此您必须自己转义数据`pdo::quote`，例如

```
$safeType = $pdo->quote($_GET['type']); 
```

仅仅因为它是一个表名或一个 sort-by 子句值并不意味着它不能被注入。任何进入未通过占位符引用/转义或插入的字符串的用户数据都是攻击向量。

# sql-server - 将具有多个内部联接的 sql 查询转换为 LINQ

> ID：13053321
> 
> 赞同：3
> 
> 时间：2012-10-24T16:17:37.347
> 
> 标签：sql-server, linq, tsql

我有这个查询，我从 6 个表中检索到，这些表获取日期、评分、评分者、班级名称、分数、主题。

```
SELECT r.date, u1.username as rated, u2.username as rater, c.name as classname, s.ratings, sbj.name
FROM Ratings r
 INNER JOIN Users u1 ON u1.userid = r.rated 
 INNER JOIN Users u2 ON u2.userid = r.rater 
 INNER JOIN ClassMembers cm ON u1.userid  = cm.userid
 INNER JOIN Class c ON cm.teamid = c.teamid
 INNER JOIN Scores s ON s.ratingsid = r.ratingsid 
 INNER JOIN Subjects sbj ON sbj.subjectid = s.subjectid 
```

这导致

```
date         | rated | rater | teamname | score |  subject
10/12/2012    john     mike     teamA      9        Math
10/09/2012    john     mike     teamA      9        Science
10/09/2012    john     abra     teamA      5        Math
10/09/2012    john     abra     teamA      5        Science 
```

我必须将此查询转换为 LINQ 表达式。我很难将我的 sql 查询转换为 LINQ。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:22:40.503

You could do this via join:

```
var results = from r in Ratings
              join u1 in Users on u1.userid = r.rated
              join u2 in Users on u2.userid = r.rater
              join cm in ClassMembers on cm.userid = r.rated
              join c in Class on cm.teamid = c.teamid
              join s in Scores on s.ratingsid = r.ratingsid
              join sbj in Subjects on sbj.subjectid = s.subjectid
              select new 
                     {
                        Date = r.date, 
                        Rated = u1.username,
                        Rater = u2.username,
                        ClassName = c.name,
                        Ratings = s.ratings,
                        Subject = sbj.name
                      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:01:09.310

select distinct subcat as CatID,CatName,CatID as subcat,Subcategory from (select a.CatName,b.CatName as Subcategory,a.CatID as subcat,b.CatID from Iris_CategoryMaster a inner join Iris_CategoryMaster b on a.CatID=b.ParentID其中 b.Status=1) 为 x

# html - 在嵌套 div 中冒泡 div 宽度

> ID：13053322
> 
> 赞同：0
> 
> 时间：2012-10-24T16:17:38.487
> 
> 标签：html, css

如何使父 div 根据嵌套 div 的大小增长？

例如，我有三个嵌套的 div，我需要祖父 div`min-height:80px`并让它增长直到`max-height:120px`- 随着孙子文本的增长......

请看下面的[小提琴](http://jsfiddle.net/EB3SU/7/)

ps 我用的是火狐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:24:51.597

The problem is the `position:absolute;` for your `#dynamictext`

In this update of your jsfiddle: [http://jsfiddle.net/EB3SU/9/](http://jsfiddle.net/EB3SU/9/)

I changed it to `position:relative;` and it worked fine.

# c# - 输入字符串在 C# 中的格式不正确

> ID：13053323
> 
> 赞同：0
> 
> 时间：2012-10-24T16:17:43.680
> 
> 标签：c#, winforms, combobox, telerik

我知道这是重复的问题。我尝试在重复问题中找到解决方案，但我失败了。

情况是我有 2 个组合框（Telerik Winforms），称为 ComboBranch 和 ComboPanel。当用户在 ComboBranch 中选择某个值时，ComboPanel 将显示不同的值。

所以这是代码

```
 private void tbDropBranch_SelectedIndexChanged(object sender, Telerik.WinControls.UI.Data.PositionChangedEventArgs e)
    {
        dataPanel();
    }

    void dataPanel()
    {

        DataTable dtPanel = dataBinding._valuePanel(Convert.ToInt32(tbDropBranch.SelectedValue.ToString())); // Error in here
        tbDropPanel.DataSource = new BindingSource(dtPanel, null);
        tbDropPanel.DisplayMember = "panelName";
        tbDropPanel.ValueMember = "panelID";

    } 
```

**更新**

如果我做 Event tbDropBranch_Leave 它的工作。但是为什么我在使用 tbDropBranch_SelectedIndexChanged 时出现错误？

```
 private void tbDropBranch_Leave(object sender, EventArgs e)
        {

            dataPanel();

        } 
```

**解决方案**

我只是这样做：

```
void getIdBranch()
    {

        if ("System.Data.DataRowView" == tbDropBranch.SelectedValue.ToString())
        {
            return;
        }
        else
        {

            DataTable dtPanel = dataBinding._valuePanel(Convert.ToInt32(tbDropBranch.SelectedValue.ToString()));
            tbDropPanel.DataSource = new BindingSource(dtPanel, null);
            tbDropPanel.DisplayMember = "panelName";
            tbDropPanel.ValueMember = "panelID";
        }

    } 
```

感谢那些帮助过的人.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:44:47.933

我相信您收到异常是因为`tbDropBranch.SelectedValue.ToString()`无法转换为`Integer`or `Int`。我建议您先插入以下行，以确保在执行之前是否可以解析字符串以避免收到异常。如果您能提供您收到的确切例外情况，我们也将不胜感激。

```
 int x = 0;
   void dataPanel()
    {
        if (Int32.TryParse(tbDropBranch.SelectedValue.ToString(), out x)) //Check if tbDropBranch.SelectedValue.ToString() is a valid integer
        {
          DataTable dtPanel = dataBinding._valuePanel(Convert.ToInt32(tbDropBranch.SelectedValue.ToString())); // Error in here
          tbDropPanel.DataSource = new BindingSource(dtPanel, null);
          tbDropPanel.DisplayMember = "panelName";
          tbDropPanel.ValueMember = "panelID";
        }
    } 
```

您始终可以尝试以下方法以根据其索引获取当前所选项目的确切值

```
if (ComboBranch.SelectedIndex != -1) // Execute the following only if there's a selected index
   {
        ComboBranch.Items[ComboBranch.SelectedIndex].ToString(); // Get the value of the selected index
   } 
```

谢谢
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:29:57.893

这是因为`tbDropBranch.SelectedValue.ToString()`返回`System.Data.DataRowView`. `Convert.ToInt32`无法将该值转换为 int。你需要传递一些别的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:28:02.287

我怀疑`dataBinding._valuePanel`使用 an`Int32`作为它的参数......也许它应该是一个`int`？

```
dataBinding._valuePanel(int.Parse(tbDropBranch.SelectedValue.ToString())); 
```

# linux-kernel - 通用网络链接 - PID 不是线程唯一的

> ID：13053327
> 
> 赞同：2
> 
> 时间：2012-10-24T16:17:59.473
> 
> 标签：linux-kernel, kernel, netlink

我正在编写通过通用网络链接从用户空间接收消息的内核模块。当我在内核回调函数中访问 genl_info->snd_pid 时，我得到了进程 ID。

根据 libnl 文档：

> libnl 根据进程标识符生成唯一的端口号，并为其添加一个偏移量，以允许使用多个套接字。出于向后兼容性的原因，初始套接字仍将等于进程标识符。

我的用户空间应用程序使用多个线程，我需要区分它们。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-16T09:59:30.607

您可以使用两个选项：

1.  通过所有线程共享一个 netlink 套接字，但使用您自己的通用 netlink 协议的 NLA 来识别线程

2.  在每个线程中打开自己的 netlink 套接字并使用以下技巧：

当前`PID_MAX_LIMIT`== 2 ^ 22，而`pid`字段类型为`uint32`. 因此，可以使用`pid`将进程的 pid 和一些 id <= 1024 打包在一起。请参考示例：[在 C 中](https://github.com/thom311/libnl/blob/master/lib/socket.c#L65)，(libnl) 和[Python](https://github.com/svinota/pyroute2/blob/0.3.8/pyroute2/netlink/nlsocket.py#L816) (pyroute2)。

# c# - 盒式磁带包没有链接文件夹中的每个样式表，只有 1

> ID：13053331
> 
> 赞同：0
> 
> 时间：2012-10-24T16:18:38.573
> 
> 标签：c#, asp.net-mvc-3, appharbor, cassette

这是我的文件夹在 Visual Studio 2010 中的设置方式：

```
[solution]/Public
              /assets
                  /stylesheets
                      bootstrap.css
                      forms.less
                      main.less
                      tigo.less 
```

我设置了一些引用，因为我希望 Bootstrap 首先出现，forms 和 tigo 必须出现在 main.less 之后。

当我在本地机器上运行这个应用程序时，这是参考：

```
<link href="/cassette.axd/asset/Public/assets/stylesheets/bootstrap.css?Fr-zb2zZgNbHEFtP2LHSlWzPcTc=" type="text/css" rel="stylesheet"/>
<link href="/cassette.axd/asset/Public/assets/stylesheets/main.less?3YJKuT131pux5i9cKZkQeAO_qLQ=" type="text/css" rel="stylesheet"/>
<link href="/cassette.axd/asset/Public/assets/stylesheets/forms.less?3j_M5YCMRn_e3APdf8XOLJrN9s0=" type="text/css" rel="stylesheet"/>
<link href="/cassette.axd/asset/Public/assets/stylesheets/tigo.less?L6L9pztQ4BxBKmO_Q3XHBJx9L8Q=" type="text/css" rel="stylesheet"/> 
```

**它在我的机器上运行良好。**

但是，当发布到 AppHarbor 时，引用（缩小的）CSS 文件仅包含来自 bootstrap.css 的信息

这是我对 Cassette 的配置：

```
namespace Foo.WebUI
{
    /// <summary>
    /// Configures the Cassette asset bundles for the web application.
    /// </summary>
    public class CassetteBundleConfiguration : IConfiguration<BundleCollection>
    {
        public void Configure(BundleCollection bundles)
        {
            bundles.Add<StylesheetBundle>("Public/assets/stylesheets");
            bundles.Add<ScriptBundle>("Public/assets/javascripts");
        }
    }
} 
```

这是我的 _Layout.cshtml 文件：

```
@{
    Bundles.Reference("Public/assets/stylesheets");
    Bundles.Reference("Public/assets/javascripts");
}
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <link rel="Stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/blitzer/jquery-ui.css" />

    @Bundles.RenderStylesheets()
</head> 
```

任何想法为什么它不能正常工作？为什么它抓住了 bootstrap.css 而忘记了其他三个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:29:21.127

似乎在他们的支持论坛上讨论了类似的问题：

[http://support.appharbor.com/discussions/problems/3876-appharbor-does-not-serve-my-less-files](http://support.appharbor.com/discussions/problems/3876-appharbor-does-not-serve-my-less-files)

总结，项目中没有正确设置less构建文件，设置每个less文件的属性以将构建操作设置为内容，然后将复制到输出目录值设置为始终复制。

# sql - SQL将一行变成多行

> ID：13053332
> 
> 赞同：0
> 
> 时间：2012-10-24T16:18:38.420
> 
> 标签：sql, sql-server-2008-r2, pivot

我有一个包含许多列的 SQL 表，特别是一组包含代码的列。对于每个代码列，还存在与每个代码列相关的相应信息列。我需要能够将一条记录变成多条返回记录（即每个代码一条记录）。这是一个带有遗留数据和软件代码的旧表，并且很难对表进行规范化（即使它确实需要）。

这是表格：

```
CO_ComapnyInformation
                (
                 ProjectID
                ,SubContractor_OrgID
                ,BudGet
                ,ContractDays
                ,ContractCode
                ,ContractCode1
                ,ContractCode2
                ,ContractCode3
                ,ContractCode4
                ,ContractCode5
                ,ContractCodeAmt
                ,ContractCode1Amt
                ,ContractCode2Amt
                ,ContractCode3Amt
                ,ContractCode4Amt
                ,ContractCode5Amt
                ,ContractStartDate
                ,ContractCodeBudget
                ,ContractCodeBudget1
                ,ContractCodeBudget2
                ,ContractCodeBudget3
                ,ContractCodeBudget4
                ,ContractCodeBudget5
                ,ContractCodeAdjust
                ,ContractCodeAdjust1
                ,ContractCodeAdjust2
                ,ContractCodeAdjust3
                ,ContractCodeAdjust4
                ,ContractCodeAdjust5
                ,ContractCodeUncommit
                ,ContractCodeUncommit1
                ,ContractCodeUncommit2
                ,ContractCodeUncommit3
                ,ContractCodeUncommit4
                ,ContractCodeUncommit5
                ,ContractCodeSaveOR
                ,ContractCodeSaveOR1
                ,ContractCodeSaveOR2
                ,ContractCodeSaveOR3
                ,ContractCodeSaveOR4
                ,ContractCodeSaveOR5
                ) 
```

基本上我需要返回的记录集看起来像这样：

```
Contract Code | Contract Budget | Contract Adjust | Contract Uncommit | Contract SaveOR | Pro_ID | ...
ContractCode    10.00             xxxx
ContractCode1
ContractCode2 
```

ETC...

仅当 COntractCode 列中包含数据时。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:21:30.910

你可以用[`union all`](http://msdn.microsoft.com/en-us/library/ms180026.aspx)它来做。

```
select 'ContractCode' as ContractCodeType, ContractCode, ContractCodeBudget, ...
from CO_ComapnyInformation

union all

select 'ContractCode1' as ContractCodeType, ContractCode1, ContractCodeBudget1, ...
from CO_ComapnyInformation

... 
```

也许您不需要第一列 ( `ContractCodeType`)，它只是为了让您知道该行来自哪一组值。

但理想情况下，如果这些字段存储相同类型的信息，最好有一个仅包含一组字段的更简单的*表*。您可以从其顶部的视图开始（基本上就是`union`上面的代码），然后以小步骤重构您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:37:17.903

您应该能够通过使用 SQLServer 的数据透视/取消数据透视功能从基表中进行一次选择来执行此操作 - 例如：

```
select ProjectID, 
       Contract_Code, 
       max(Budget) Budget, 
       max(Adjust) Adjust, 
       max(Uncommit) Uncommit, 
       max(SaveOR) SaveOR
from
(select ProjectID, vals, left(cols,1,13) Contract_Code, right(cols,len(cols)-13) col_head from
 (select ProjectID,
         ContractCodeBudget  ContractCode_Budget,
         ContractCodeBudget1 ContractCode1Budget,
         ContractCodeBudget2 ContractCode2Budget,
         ContractCodeBudget3 ContractCode3Budget,
         ContractCodeBudget4 ContractCode4Budget,
         ContractCodeBudget5 ContractCode5Budget,
         ContractCodeAdjust  ContractCode_Adjust,
         ContractCodeAdjust1 ContractCode1Adjust,
         ContractCodeAdjust2 ContractCode2Adjust,
         ContractCodeAdjust3 ContractCode3Adjust,
         ContractCodeAdjust4 ContractCode4Adjust,
         ContractCodeAdjust5 ContractCode5Adjust,
         ContractCodeUncommit  ContractCode_Uncommit,
         ContractCodeUncommit1 ContractCode1Uncommit,
         ContractCodeUncommit2 ContractCode2Uncommit,
         ContractCodeUncommit3 ContractCode3Uncommit,
         ContractCodeUncommit4 ContractCode4Uncommit,
         ContractCodeUncommit5 ContractCode5Uncommit,
         ContractCodeSaveOR  ContractCode_SaveOR,
         ContractCodeSaveOR1 ContractCode1SaveOR,
         ContractCodeSaveOR2 ContractCode2SaveOR,
         ContractCodeSaveOR3 ContractCode3SaveOR,
         ContractCodeSaveOR4 ContractCode4SaveOR,
         ContractCodeSaveOR5 ContractCode5SaveOR
  from CO_ComapnyInformation) t
 unpivot (vals for cols in (ContractCode_Budget,ContractCode1Budget,ContractCode2Budget,ContractCode3Budget,ContractCode4Budget,ContractCode5Budget,
                            ContractCode_Adjust,ContractCode1Adjust,ContractCode2Adjust,ContractCode3Adjust,ContractCode4Adjust,ContractCode5Adjust,
                            ContractCode_Uncommit,ContractCode1Uncommit,ContractCode2Uncommit,ContractCode3Uncommit,ContractCode4Uncommit,ContractCode5Uncommit,
                            ContractCode_SaveOR,ContractCode1SaveOR,ContractCode2SaveOR,ContractCode3SaveOR,ContractCode4SaveOR,ContractCode5SaveOR
                            )
          ) as t1
) as t2
pivot (max(vals) for col_head in ([Budget],[Adjust],[Uncommit],[SaveOR])) as t3
group by ProjectID, Contract_Code 
```

# opengl - gluPerspective、glViewport、gluLookAt 以及 GL_PROJECTION 和 GL_MODELVIEW 矩阵

> ID：13053334
> 
> 赞同：8
> 
> 时间：2012-10-24T16:18:45.477
> 
> 标签：opengl, matrix, mode, glulookat

# 原始问题

我想使用“gluPerspective”、“glViewport”和“gluLookAt”来操作我的相机和屏幕。

我将哪些功能应用于哪种矩阵模式？我应该/必须以什么顺序使用它们？

例如，我正在尝试像这样设置我的屏幕和相机：（但它不起作用！）

```
glMatrixMode(GL_PROJECTION) // Apply following to projection matrix - is this correct?
glLoadIdentity(); // Reset first
glPerspective(45.0, (double)w/(double)h, 1.0, 200.0); // Set perspective
glViewport(0, 0, w, h); // Set viewport

glMatrixMode(GL_MODELVIEW); // Apply following to modelview - should glViewport come under here?
glLoadIdentity(); // Reset first
gluLookAt(px, py, pz, cx, cy, cz, ux, uy, uz); // Set position, centre and then up vectors
// This surely comes after calling GL_MODELVIEW? 
```

我四处寻找在线文档，我了解这些功能，只是不知道它们应该去哪里以及以什么顺序！

# 一段时间以后...

现在是几个月后，我正在添加一个快速编辑以显示我用来使用 OpenGL 渲染事物的系统。这是为了帮助将来看到这个问题的其他人。

我主要使用两种方法。

**方法一：**

此方法将所有内容组合在一起。

```
// Firstly, the window may have been resized so re-create the viewing area
glViewport(0, 0, width_of_window_rendering_area, height_of_window_rendering area); 
```

这将重新创建用于在窗口内部的整个区域进行渲染的视口。使用 sfml，您可以执行诸如 window.width() 或 window.height() 之类的操作，或类似的操作，具体取决于您使用的窗口工具包（glut、glfw、sdl 等）...

```
// The second step is to add a projection matrix. There are three main ones I like to use
// Uncomment the one you want
glMatrixMode(GL_PROJECTION); // Tell OpenGL to manipulate the correct matrix stack
glLoadIdentity(); // Reset the projection matrix, or bad things happen after multiple calls to below functions!
// glOrtho( ... ) // Uncomment to use 2D rendering
// gluPerspective( ... ) // Uncomment to use (easy) 3D rendering
glFrustrum( ... ) // Uncomment to use (harder/less intuitive?) 3D rendering
glMatrixMode(GL_MODELVIEW); // I always prefer to leave OpenGL in the modelview manipulation mode.
    // I consider it the "default" and safest mode to leave OpenGL in, as any rogue
    // calls to functions changing its contents is likely to mess up your geometry
    // which should be visible as a problem on the screen, which tells you you need
    // to fix something! Manipulating the other matrix stacks may not show obvious
    // problems. 
```

您需要从“glOrtho”、“gluPerspective”和“glFrustrum”三个选项中选择一个。还有'gluOrtho2D'，但要小心使用！（我更喜欢自己用“glOrtho”指定近平面和远平面。）您还需要用函数的参数替换“...”。

```
// The third step is to clear the screen and set your camera / geometry position
glClear(GL_COLOR_BUFFER_BIT); // use bitwise OR ('||') with 'GL_DEPTH_BUFFER_BIT' and 'GL_STENCIL_BUFFER_BIT' if required
gluLookAt( ... );
// I like to use gluLookAt, or at least I _italic_used to! Now I implement my own camera...
 // That is another fun thing you should try if you are comfortable with 3D geometry and hard math!

// The fourth step is to draw your scene. You may want to put lighting stuff first or in with the drawing
glutWireTeapot( ... ); 
```

**方法二：**

第二种方法与上面相同，但将第一步移到一个单独的函数中。然后您必须检测窗口调整大小事件并调用此函数。使用 glut，您可以指定回调。使用 SFML，您可以在调整窗口大小时检测到事件。我忘记了 SDL 是如何工作的，但它是相似的。我还没有了解 glfw 是如何工作的。

希望这会帮助你。

一些 OpenGL 新手（可能我曾一度包括在内）尝试在 PROJECTION 矩阵上指定相机平移。**不要这样做**- 我认为它会弄乱照明和其他可能的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:34:48.833

我将我的重塑回调函数定义为：

`glViewport(...)`在开始时调用一次。

然后用单位矩阵重新加载投影矩阵：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity(); 
```

然后：

```
glPerspective(...)
glMatrixMode(GL_MODELVIEW); 
```

`gluLookAt(...)`如果您需要更改相机位置，可以随时调用。

适用于我的简单目的。

# r - 自举置信区间和对数响应比的平均值

> ID：13053336
> 
> 赞同：4
> 
> 时间：2012-10-24T16:18:48.673
> 
> 标签：r, statistics-bootstrap

我正在尝试引导 95% 的 CI 和测量平均值，以检查治疗的效果大小。我想使用的方法称为 LnRR 或对数响应比（[1](http://onlinelibrary.wiley.com/doi/10.1111/j.1469-185X.2007.00027.x/abstract?systemMessage=Wiley%20Online%20Library%20will%20be%20disrupted%20on%2027%20October%20from%2010:00-12:00%20BST%20%2805:00-07:00%20EDT%29%20for%20essential%20maintenance)、[2](http://www.esajournals.org/doi/abs/10.1890/0012-9658%281999%29080%5B1150%3aTMAORR%5D2.0.CO;2)、[3](http://www.plosone.org/article/info%3adoi/10.1371/journal.pone.0002400)）。它是简单地计算出来的`Log(Response to treatment / Response to control)`。如果 95% 的 CI 不与 0 重叠，则有超过 95% 的概率自然产生效果。负 LnRR 意味着治疗有负面影响。

引导包中的引导功能有点令人困惑，我正在努力计算 95% 的 CI 和平均值。我试过以下：

```
library(boot)
set.seed(2)
dat <- data.frame(treatment = rnorm(10, 1.2, 0.4), control = rnorm(10, 1.5, 0.3))

boot(dat, function(x) log(x[,1]/x[,2]), R = 999) # Because LnRR = log(dat[,1]/dat[,2]) 
```

我显然做错了什么。如何为此类函数引导置信区间 (boot.ci)？我确信答案就[在这里](http://www.statmethods.net/advstats/bootstrapping.html)，但由于某种原因，我就是不明白该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T16:31:14.323

我同意`boot`起初的语法有点混乱。问题是您需要编写一个函数来获取您的数据和一个包含子样本索引的向量 i。让我们明确地重写您的函数以使其更清晰：

```
yourFun <- function(x, i) {
  xSub <- x[i, ] #resample x
  LnRR <- log(xSub[, 1])/xSub[ ,2]
  return(mean(LnRR))
} 
```

然后以或多或少与您相同的方式调用 boot：

```
b <- boot(dat, yourFun, R=999)
plot(b) #always worth looking at

#Calculate ci's
boot.ci(b) 
```

# wpf - 更改属性时刷新自定义控件

> ID：13053344
> 
> 赞同：0
> 
> 时间：2012-10-24T16:19:29.767
> 
> 标签：wpf, xaml, custom-controls

我制作了一个自定义控件（它继承自 UserControl ），我的控件包含 2 个属性（依赖属性）“Start”和“End”，以及一个我命名为“BuildGraphic”的方法，正是这个方法创建了我的控件的图形，问题是当我更改属性的值时，我想调用此方法来重绘控件，我尝试使用“OnRender”但它无能为力。PS：当我在构造函数中调用“BuildGraphic”时，它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:25:34.557

使用 PropertyChangedCallback 调用方法，如下所示：

```
public static readonly DependencyProperty StartProperty = DependencyProperty.Register("Start", typeof(proptype), typeof(MyUserControl), new PropertyMetadata(DefaultValue, OnStartPropertyChanged));

private static void OnStartPropertyChanged(DependencyObject dependencyObject, 
           DependencyPropertyChangedEventArgs e) 
{  
    if (dependencyObject is MyUserControl)
    {
        ((MyUserControl)dependencyObject).BuildGraph();
    }
} 
```

# json - 如何在 JSON 中表示地图列表

> ID：13053345
> 
> 赞同：3
> 
> 时间：2012-10-24T16:19:29.750
> 
> 标签：json, map

我想代表一个`List<Map<String,List<String>>>`使用Json。

例如，我想代表：

*   /bin 到 *.jar 和 *.war
*   /cfg 到 *.properties 和 *.data

有人可以确认以下是正确的表示吗？

```
{
  "directories": [
    {
      "name": "bin",
      "regex": [
        "*.jar",
        "*.war"
      ]
    },
    {
      "name": "cfg",
      "regex": [
        "*.properties",
        "*.data"
      ]
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:42:50.077

显然你现在已经解决了这个问题，但我在追求类似问题时发现了这一点。根据[jsonlint.com](http://jsonlint.com "JSONLint")，您发布的字符串按原样有效。

# javascript - 将字符串的一部分从索引隔离到下一个空格？

> ID：13053346
> 
> 赞同：1
> 
> 时间：2012-10-24T16:19:33.247
> 
> 标签：javascript, string

解决下一个空格的最佳方法是什么？

```
var string = 'hi this is a string with some !things in it"
var index = string.indexOf('!')
var afterbang = string.substring(index, [NEXT SPACE]) 
```

结果：东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:22:24.413

您可以使用正则表达式完成所有操作：

```
var afterbang = string.replace(/.*!(\S*).*/, "$1"); 
```

这样做是匹配一个感叹号，然后是一些非空白（这就是`\S`意思 -`\s`小写的“s”匹配空白，大写的“s”是相反的）。非空白匹配用括号括起来，以便正则表达式匹配过程收集匹配的那部分。最后，第二个参数 to`.replace()`表示应该返回第一个匹配的组，这将是第一个感叹号之后的非空白字符集合。

*编辑*-抱歉错误-现在已修复。我输入的原始代码也会留下字符串的所有其余部分，只删除感叹号 :-) 我已经更新它以包含前导和尾随`.*`表达式，以确保我们摆脱其他所有内容。

如果您需要查找所有这样的子字符串（即所有出现的“！”后跟一些非空白字符），那么事情会变得更复杂一些。就个人而言，我会利用 JavaScript 允许将函数作为`.replace()`. 当您这样做时，匹配的组将作为参数传递给函数：

```
var collection = [];
string.replace(/!(\S*)/g, function(_, bangWord) {
  collection.push(bangWord);
}); 
```

之后，数组“集合”将包含所有匹配项。正则表达式上的后缀“g”会导致匹配反复进行，直到在字符串中不再找到它，每次从上一次匹配后开始。

（该函数有一个虚拟的第一个参数，称为“_”，它只是一个占位符。函数的第一个参数始终是整个正则表达式的整个匹配项。第二个和后续参数来自带括号的组。因此，在在这种情况下，第一个参数将是*包含*感叹号的字符串，第二个参数只是没有它的子字符串。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:23:28.913

```
var s = "hi this is a string with some !things in it";
var index = s.indexOf('!')
var afterbang = s.substring(index, s.indexOf(' ', index));

​ 
```

I'm actually assuming you already have a particular start index that you care about. If that's not the case, then a regex makes more sense:

```
var s = "hi this is a string with some !things in it";
var afterbang = s.match(/!.+?\s+/);
alert(afterbang)
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:26:41.627

我不确定你的意思，但是，如果你的意思只是一遍又一遍地得到这个：

```
var substrings = [];
    string = SOME STRING HERE,
    index = string.indexOf('!'),
    nextWhiteIndex,
    stringToBePushed;

while (index !== -1) {

    stringToBePush = string.slice(index + 1);
    if (stringToBePush.indexOf(' ') !== -1) {
        nextWhiteIndex = stringToBePushed.indexOf(' ');
        substrings.push(stringToBePushed.substring(0, nextWhiteIndex + 1);
    } else if (stringToBePushed !== '') {
        substrings.push(stringToBePushed.substring(0);
    }

    index = string.indexOf('!');
} 
```

编辑：现在我知道你想要什么了。这只会让您在感叹号之后立即获得所有单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:30:15.330

尝试这个;

```
var s = "hi this is a string with some !things in it";
var re = /(.*)!([^ ]*)/; // regex capturing two groups split over '!'
var m = re.exec(s); 
WScript.Echo(m[2]);      // take second match 
```

或没有正则表达式；

```
var a = s.split('!');    // split in half
var b = a[1].split(' '); // split in half again, taking second half
WScript.Echo(b[0]);      // show first half 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-26T06:09:58.010

您也可以简单地使用它 -

```
allText.slice(startIndex).trim().split(' ')[0] 
```

这将在您的 startIndex 之前拼接整个文本，然后使用拆分，您找到下一个空格并获取第一个索引。你会得到你预期的结果。

# c# - 使用 Excel 中的两个相关表批量插入

> ID：13053348
> 
> 赞同：0
> 
> 时间：2012-10-24T16:19:46.203
> 
> 标签：c#, sql, sqlbulkcopy

我需要使用 C# WinForms 将数据从 Excel 工作表导入数据库。每行都是一个“电力站点”，有几列数据进入“站点”表。每个站点还有一个包含其信息（姓名、电子邮件、电话）的“联系人”，但该联系人可能已经或可能不存在于数据库中。联系人主键（身份字段）是 Sites 表中的外键，但该值在运行时未知。

以下是 Excel 文件包含的一些相关数据：

站点ID

联系人姓名

电子邮件

电话

以下是表格：

```
Contacts
(
    ContactID (identity)
    ContactName
    Email
    Phone 
)

Sites
(
    SiteKey (identity)
    SiteID
    ContactID (foreign key)
) 
```

如果表中不存在联系人姓名 + 电子邮件 + 电话，则需要创建它，并且需要将新身份插入到站点的该行中（如果联系人已经存在，则需要该 ContactID）。

解决此问题并获得最快结果的最佳方法是什么。在大多数情况下，Excel 工作表中有 1000 多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:27:08.843

最简单的方法可能是使用 sql bulkcopy 将两个 excel 文件批量加载到暂存表中，然后使用几个“ `insert into`”语句将正确的外键查找到您的真实表中。

但是，由于 1000 多行并不多（当然取决于 +），因此您可以将它们都加载到内存中，然后使用适当的键直接插入目标数据库。

# php - PHP exec 命令适用于终端，但不适用于 Web

> ID：13053349
> 
> 赞同：0
> 
> 时间：2012-10-24T16:19:47.507
> 
> 标签：php, unix, exec, solaris, scp

我创建了一个简单的测试文件，我们将其命名为 exec.php，内容如下：

```
<?php
    exec('scp -r /vhosts/malta/docs/www/mysite/uploads/www.mysite.com/images/promotions/xmas-survey user@255.255.255.255:/vhosts/mysite/docs/www/images/promotions/xmas-survey/',$out);
    print_r($out);
?>
Command Executed. 
```

仅供参考：帐户用户不需要密码即可访问 255.255.255.255

问题在这里：

当我从终端运行这个文件时

```
php /vhosts/test/www/exec.php 
```

该命令有效，但是当我尝试从网络上运行它时

```
http://localhost/test/exec.php 
```

该命令没有。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:27:17.863

您需要为运行网络服务器的用户（例如 www-data、apache2 等）创建从网络服务器到另一台服务器的 ssh 登录，否则 scp 命令将不起作用。

创建 ssh 登录后，该命令应该可以工作...

如果您还没有这样做，您可能希望使用 rsa 密钥保护 ssh 登录以提高安全性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:44:23.743

问题可能是您需要指定 scp 的完整路径。Web 服务器用户通常在路径中没有相同的东西。

要真正诊断出了什么问题，请将 stderr 重定向到您可以从中读取它的地方。

例如：

```
exec($yourcommand . " 2>&1", $out);
// print out the $out variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:25:15.777

检查用户“www-data”是否具有运行 exec.php 文件所需的执行权限

# java - Android项目中的错误

> ID：13053350
> 
> 赞同：0
> 
> 时间：2012-10-24T16:19:50.397
> 
> 标签：java, android, json, listview

我在完成旧教程时遇到问题，基本上我正在尝试以 JSON 格式返回的数据从 www.amazingjobs.co.uk/app/marc/api/candidates/ 提取到列表视图中。

我实际上是在 24 小时前开始学习 android/java 的，所以它可能非常简单，但我似乎不太明白，有错误的行以粗体显示！

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import com.google.gson.Gson;

public class Searchjobs extends Activity {
    // url to make request
    private static String url = "http://www.amazingjobs.co.uk/app/marc/api/candidates/";

    // JSON Node names
    private static final String TAG_RESULTS = "results";
    // Jobs JSONArray
    JSONArray jobs = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_searchjobs);
        Button Searchbutton = (Button) findViewById(R.id.Searchbutton);
        Searchbutton.setOnClickListener(searchClick);
    }

    private OnClickListener searchClick = new OnClickListener() {
        public void onClick(View v) {

          // Hashmap for ListView
              ArrayList<HashMap<String, String>> JobList = new ArrayList<HashMap<String, String>>();
              // Creating JSON Parser instance
              JSONParser jParser = new JSONParser();
              // getting JSON string from URL
              JSONObject json = jParser.getJSONFromUrl("http://www.amazingjobs.co.uk/app/marc/api/candidates/");
              // Getting Array of Contacts
             try {
                jobs = json.getJSONArray(TAG_RESULTS);

                for(int i = 0; i < jobs.length();i++){
                    JSONObject j = jobs.getJSONObject(i);

                    String title = j.getString("job_title");

                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put("Title", title);

                    JobList.add(map);

                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             **ListAdapter adapter = new SimpleAdapter(this, JobList,R.layout.list_item,
                        new String[] { "Title" }, new int[] {R.id.title});**
             **ERROR: The constructor SimpleAdapter(new View.OnClickListener(){}, ArrayList<HashMap<String,String>>, int, String[], int[]) is undefined**

                **setListAdapter(adapter);
The method setListAdapter(ListAdapter) is undefined for the type new View.OnClickListener(){}**

                // selecting single ListView item
                **ListView lv = getListView();**
                    **ERROR: The method getListView() is undefined for the type new View.OnClickListener(){}**

                 lv.setOnItemClickListener(new OnItemClickListener() {

                 @Override
                 public void onItemClick(AdapterView<?> parent, View view,
                         int position, long id) {

                 }
             });

        };
    }; 
```

编辑好的新代码在下面，错误是，这似乎很奇怪，因为活动错误与肯定存在的活动有关，也尝试在 Eclipse 中重新启动/清理。

说明 资源路径 位置 类型 activity_searchjobs 无法解析或不是字段 Searchjobs.java /AmazingJobs/src/app/android/amazingjobs 第 47 行 Java 问题 activity_searchjobs 无法解析或不是字段 Searchjobs.java /AmazingJobs/src/app/ android/amazingjobs 第 105 行 Java 问题 Searchbutton 无法解析或不是字段 Searchjobs.java /AmazingJobs/src/app/android/amazingjobs 第 48 行 Java 问题 list_item 无法解析或不是字段 Searchjobs.java /AmazingJobs/src/ app/android/amazingjobs 第 83 行 Java 问题

```
public class Searchjobs extends ListActivity {
    // url to make request
    private static String url = "http://www.amazingjobs.co.uk/app/marc/api/candidates/";

    // JSON Node names
    private static final String TAG_RESULTS = "results";
    // Jobs JSONArray
    JSONArray jobs = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_searchjobs);
        Button Searchbutton = (Button) findViewById(R.id.Searchbutton);
        Searchbutton.setOnClickListener(searchClick);
    }

    private OnClickListener searchClick = new OnClickListener() {
        public void onClick(View v) {

          // Hashmap for ListView
              ArrayList<HashMap<String, String>> JobList = new ArrayList<HashMap<String, String>>();
              // Creating JSON Parser instance
              JSONParser jParser = new JSONParser();
              // getting JSON string from URL
              JSONObject json = jParser.getJSONFromUrl("http://www.amazingjobs.co.uk/app/marc/api/candidates/");
              // Getting Array of Contacts
             try {
                jobs = json.getJSONArray(TAG_RESULTS);

                for(int i = 0; i < jobs.length();i++){
                    JSONObject j = jobs.getJSONObject(i);

                    String title = j.getString("job_title");

                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put("Title", title);

                    JobList.add(map);

                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             ListAdapter adapter = new SimpleAdapter(getApplication(), JobList,R.layout.list_item,
                     new String[] { "Title" }, new int[] {R.id.title});

                setListAdapter(adapter);

                // selecting single ListView item
                ListView lv = getListView();

                 lv.setOnItemClickListener(new OnItemClickListener() {

                 @Override
                 public void onItemClick(AdapterView<?> parent, View view,
                         int position, long id) {

                 }
             });

        };
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:22:27.740

如果您不想使用 ListActivity （这不是强制性的），您需要扩展`ListActivity`不`Activity`使方法`getListView()`可用，或者只需将其替换为。`findViewById()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:21:07.197

```
ListAdapter adapter = new SimpleAdapter(this, JobList,R.layout.list_item,
                        new String[] { "Title" }, new int[] {R.id.title}); 
```

应改为：

```
ListAdapter adapter = new SimpleAdapter(getApplicationContext(), JobList,R.layout.list_item,
                        new String[] { "Title" }, new int[] {R.id.title}); 
```

第二，

列表视图 lv = getListView();

如果您扩展`ListActivity`而不是`Activity`.

# android - Android - 如何在具有特定位置、缩放级别和标记的 Android 应用中启动 Google 地图意图

> ID：13053352
> 
> 赞同：32
> 
> 时间：2012-10-24T16:19:58.180
> 
> 标签：android, google-maps, android-intent

地图意图不适用于特定缩放级别以及自定义标记

```
 float lat = 40.714728f;
    float lng = -73.998672f;

    String maplLabel = "ABC Label";
    final Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
            Uri.parse("geo:0,0?q="+lat+","+lng+"&z=16 (" + maplLabel + ")"));
    startActivity(intent); 
```

有人知道出了什么问题吗？或者怎么做？我想在特定缩放级别显示具有自定义标签标记的某些（纬度，经度）地图。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-24T16:50:00.283

尝试以下解决方案：

```
double latitude = 40.714728;
double longitude = -73.998672;
String label = "ABC Label";
String uriBegin = "geo:" + latitude + "," + longitude;
String query = latitude + "," + longitude + "(" + label + ")";
String encodedQuery = Uri.encode(query);
String uriString = uriBegin + "?q=" + encodedQuery + "&z=16";
Uri uri = Uri.parse(uriString);
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

信用在这里：[答案](https://stackoverflow.com/a/9825296/634474)

我相信问题与标签中的空格有关。对查询字符串进行编码将通过用有效字符替换空格来消除问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-31T22:16:26.890

[http://developer.android.com/guide/components/intents-common.html#Maps](http://developer.android.com/guide/components/intents-common.html#Maps)

它几乎包含与地图意图相关的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T13:23:58.897

在地图应用程序中显示位置：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
String data = String.format("geo:%s,%s", latitude, longitude);
if (zoomLevel != null) {
    data = String.format("%s?z=%s", data, zoomLevel);
}
intent.setData(Uri.parse(data));
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-15T10:52:34.900

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?daddr=" + location.getLatitude() + "," + location.getLongitude()));
startActivity(intent); 
```

# android - 无法解析目标“android-8”

> ID：13053353
> 
> 赞同：5
> 
> 时间：2012-10-24T16:19:59.947
> 
> 标签：android, eclipse, sdk, adt

长话短说，eclipse 将 ADT 和 SDK 更新为 v20 ，我不喜欢它并想回到 18。

所以我卸载了 ADT 和 SKD 并从

[http://dl.google.com/android/installer_r18-windows.exe](http://dl.google.com/android/installer_r18-windows.exe)

和[http://dl.google.com/android/ADT-18.0.0.zip](http://dl.google.com/android/ADT-18.0.0.zip)

安装了它们，但现在 Eclipse 似乎找不到一些 sdk 平台并抛出“无法解析目标 'android-8'”错误......任何想法可能有什么问题？

![在此处输入图像描述](../Images/21ae22d0145c78cdec754453723352e3.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T17:26:30.890

在 android sdk 窗口中转到：

工具>>选项

将打开一个新窗口并检查选项 force https:// ....

禁用此复选框

如果您的网络正在使用代理，请在此窗口中配置它。

重新加载或重新启动 android sdk 窗口并再次尝试下载。:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-11T18:48:07.147

1.  右键单击项目-> 属性。
2.  在左侧面板上选择 Android。
3.  如果您在 (Project Build Target) 中看到 Android 4.0.3，则勾选它并单击 Apply 按钮。
4.  如果您在 Build Targets 中没有 4.0.3 版本，那么您应该安装它。安装只需转到 sdk 管理器并单击 Android 4.0.3(API 15)-SDK 平台。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-04T18:46:33.457

1.  打开“Android SDK 管理器”
2.  转到菜单：“工具 -> 选项...”
3.  按下“清除缓存”按钮
4.  按下“关闭”按钮
5.  关闭“Android SDK Manager”（不是必须的！）
6.  在 Eclipse 中，转到菜单：“Project -> Clean...”以刷新当前项目

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-21T18:10:30.670

简单设置项目的目标 sdk，如下面的屏幕截图所示

![单击此处获取屏幕截图](../Images/2c2169d877e4e56779f53c788df4b16d.png)

# c# - 用于并发控制的 Windows Azure ETag - ETag 格式不正确？

> ID：13053356
> 
> 赞同：1
> 
> 时间：2012-10-24T16:20:23.660
> 
> 标签：c#, azure, cloud

为 Windows Azure 表存储服务编写了以下代码：

```
var context = GetTableServiceContext();
context.AttachTo(_tableName, entity, eTag);
context.UpdateObject(entity);
var response = context.SaveChangesWithRetries(saveChangesOptions); 
```

我使用此代码的目标是如果 eTag 与表存储中的实体不匹配，则抛出 412 的 http 状态代码（前提条件失败）。这样做是为了控制并发更新。执行时我遇到了一些奇怪的行为`SaveChangesWithRetries`。根据`eTag`传入的参数的值，会发生以下情况：

`eTag`= W/”datetime'2010-08-17T23%3A43%3A26.1913755Z'” -> 假设这个 eTag 不匹配，那么我会得到一个 412。完美，这就是我要找的。

`eTag`= W/"WrongETag" -> 我将收到状态代码为 400 的 DataServiceRequestException。唯一的错误消息是“输入无效”

`eTag`= "wrongETag" -> 同上

似乎 azure 表服务需要格式比 HTTP 标准要求更严格的 eTag。只需要一个带引号的字符串，如果它很弱，则带有可选的 W/ 前缀。有人知道 Azure 表服务所需的具体格式吗？旁注：奇怪的是，将上述 ETag 与 Azure 的 Blob 服务一起使用的行为符合预期。

# html - 在 HTML 中显示 '$' 字符而不使用 '$'

> ID：13053367
> 
> 赞同：0
> 
> 时间：2012-10-24T16:21:14.077
> 
> 标签：html, ascii, non-ascii-characters

有什么方法可以在不使用“$”的情况下显示“$”（或任何 ascii 字符）？我的意思是，对于 TeX，'k' 与 ^^+ 相同。我想知道在 HTML 中是否有类似的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:22:50.990

您可以使用：

```
&#36; 
```

在 HTML 中显示 $。

# accessibility - 某些微格式中 abbr 标记的可访问性

> ID：13053373
> 
> 赞同：2
> 
> 时间：2012-10-24T16:21:43.260
> 
> 标签：accessibility, microformats

为什么有些微格式使用`abbr`标签？它可能会导致一些可访问性问题。

```
The party is on <abbr class="dtstart" title="2005-10-10">the 10th</abbr>. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:13:32.993

你是对的，这是一个重要的可访问性问题；2008 年，[BBC](http://www.bbc.co.uk/blogs/radiolabs/2008/06/removing_microformats_from_bbc.shtml)出于这个原因停止在其网站上使用 hCalendar 微格式。

据我所知，在此使用 ABBR 标记的原因是，微格式设计者需要一些*现有的*HTML 标记和属性，他们可以重新利用它们而不会产生任何其他副作用。（他们无法发明新的 HTML 标记，因为它无法与现有页面进行验证；微格式的一个目标是能够轻松地将它们添加到现有页面中。） ABBR+TITLE 不会改变外观或布局，所以他们可能*认为*它可以安全使用，并且当时没有意识到 TITLE 可以被屏幕阅读器读取，因此需要是人类可读的，而不是机器可读的字符串。

或者，换一种说法，他们根本不知道 ATTR 的 TITLE 可用于可访问性。

有[一些背景说明为什么在此页面上选择了 abbr 方法](http://tantek.com/log/2005/01.html#d26t0100)。

# c# - 类转换器

> ID：13053375
> 
> 赞同：1
> 
> 时间：2012-10-24T16:21:51.313
> 
> 标签：c#, class, console, tostring, object-to-string

我有以下课程`People`：

```
class People
{
    public enum Gender
    {
        Man = 'w',
        Woman = 'f'
    }

    public struct Person
    {
        public string First, Last;
        public Gender Gender;
        public int Age;
        public float Height, Weight;
    }

    public struct Group
    {
        public int Members;
        public string Name;
    }
} 
```

现在，我们位于类中`Program`：

```
class Program
{
    static void Main( string[] args )
    {
        People.Person p = new People.Person();

        p.First = "Victor";
        p.Last = "Barbu";
        p.Age = 14;
        p.Height = 175;
        p.Weight = 62;
        p.Gender = People.Gender.Man;

        Console.ReadLine();
    }
} 
```

我想写这样一行：

```
Console.Write( x.toString() ); 
```

如何自定义`x.toString()`方法，所以控制台中的结果如下

```
Victor Barbu
14 years
Man
175 cm
62 kg 
```

?

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:23:43.733

Just overrive the `ToString()` method

```
 public override string ToString()
    {
        // return the value you want here.
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:26:55.503

您想要覆盖 Person 类中的 ToString 方法。请参阅：http: [//msdn.microsoft.com/en-us/library/ms173154 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173154(v=vs.80).aspx)

在你的情况下

```
public class Person
{
   // Snip
   public override string ToString()
   {
       return this.First + " " + this.Last; 
   }
} 
```

如果你这样做

```
Console.WriteLine(person.ToString()); 
```

预期的输出将是名字和姓氏，您显然可以扩展它以包括您的其他字段和换行符等。

边注; 您正在做的实际上是“漂亮的打印”，我建议创建一个静态方法“public static string PrettyPrintPerson(Person p)”或类似方法来处理类的文本格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:27:26.523

```
class People 
{ 

    public override string ToString()
    {
        //This will return exactly what you just put down with line breaks
        // then just call person.ToString()
        return string.format("{1} {2}{0}{3} years{0}{4}{0}{5} cm{0}{6} kg", Environment.NewLine,
            First, Last, Age, Gender, Height, Weight);
    }
} 
```

# less - LESS mixin 函数中的条件参数验证

> ID：13053380
> 
> 赞同：1
> 
> 时间：2012-10-24T16:22:10.043
> 
> 标签：less, less-mixins

如何将以下条件转换为 LESS？

```
.mixin(@width) {
    width: (!@width ? auto : @width);
} 
```

结果应该是这样的：

```
[no value is passed]
LESS: .mixin();
CSS: width: auto;

[value is passed]
LESS: .mixin(200px);
CSS: width: 200px; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:24:40.967

您可以使用默认参数值来完成此操作：

```
.mixin(@width: auto) {
  width: @width;
} 
```

# java - 如何从 Google Appengine Java 项目中制作 jar 文件

> ID：13053385
> 
> 赞同：0
> 
> 时间：2012-10-24T16:22:31.893
> 
> 标签：java, eclipse, google-app-engine

我正在尝试从我的 google appengine java webapp 创建一个可运行的 jar 文件。我的目标是让它在不使用 eclipse 的情况下运行。我尝试导出它，但它不起作用。我想它正在寻找一个主要课程。

任何帮助将不胜感激:)))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-02T09:21:38.557

我将此插件用于 Maven：

```
<plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.my.full.classpath.MainApp</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin> 
```

您可以使用以下命令运行：

```
mvn clean compile assembly:single 
```

这对我来说已经足够了。

# c# - Trouble marshaling array of struct data from C++ to C#

> ID：13053392
> 
> 赞同：3
> 
> 时间：2012-10-24T16:22:56.147
> 
> 标签：c#, c++, arrays, structure, marshalling

I have searched for days and have tried everything I could find, but still cannot get this to work.

Details: I have a 3rd party stock trading app that is calling into my unmanaged dll. It is supplying data that the dll processes/filters and then saves into a global ring buffer. The ring buffer is an array of structures, 100 long. All of this runs in the stock trading apps process.

I also have a managed C# app calling into the same dll in a different process that needs to get the info in the global ring buffer as quickly and efficiently as possible. Everything works except that I can only get data for the first structure in the array. Also after the call to the dll from C# the C# code no longer knows that arrayMD is an array of structs, it shows up in the debugger as a simple structure. Could it be the memcpy in the dll causing the problem? I’ve tried all kinds of combinations with [In, Out], IntPtr, and Marchal.PtrToStructure combinations. I am greatly fubar. Any help would be greatly appreciated.

Thanks

Here is what I am attempting. On the dll side:

```
struct stMD
{
  float Price;
  unsigned int  PriceDir;
  unsigned int  PriceDirCnt;
};

// Global memory
#pragma data_seg (".IPC")
    bool NewPoint = false;      // Flag used to signal a new point.
    static stMD aryMD [100] = {{0}};
#pragma data_seg()

void __stdcall RetrieveMD (stMD *LatestMD [])
{
    memcpy(*LatestMD, aryMD, sizeof(aryMD));
} 
```

On the C# side:

```
[StructLayout(LayoutKind.Sequential)]
public struct stMD
{
    public float Price;
    public uint PriceDir;
    public uint PriceDirCnt;
};

public static stMD[] arrayMD = new stMD[100];

[DllImport(@"Market.dll")]
public static extern void RetrieveMD(ref stMD[] arrayMD);

RetrieveMD(ref arrayMD); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:37:49.213

问题是您的 DLL 入口点的定义：

```
void __stdcall RetrieveMD (stMDP *LatestMD []) 
```

您没有指定数组的大小，那么 C# 应该如何知道复制了多少元素？这在其他语言中也是一个问题。您的实现只是假设提供的内存足够大以包含 aryMD。但如果不是呢？您刚刚创建了缓冲区溢出。

如果您希望调用者分配数组，则调用者还必须传入数组包含的元素数量。

**编辑**

C++ 声明应如下所示：

```
// On input, length should be the number of elements in the LatestMD array.
// On output, length should be the number of valid records copied into the array.
void __stdcall RetrieveMD( stMDP * LatestMD, int * length ); 
```

C# 声明将如下所示：

```
[DllImport(@"Market.dll")]
public static extern void RetrieveMD(
    [In, Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex=1)] ref stMD[] arrayMD,
    [In, Out] ref int length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:20:15.993

I got it working. Was I ever tring to make this harder than it is.

I re-read chapter 2 of ".NET 2.0 Interoperability Recipes: A Problem-Solution Approach".

Here's what works.

On C++ side I removed the pointers

```
struct stMD 
{ 
float Price; 
unsigned int PriceDir; 
unsigned int PriceDirCnt; 
}; 

// Global memory 
#pragma data_seg (".IPC") 
bool NewPoint = false; // Flag used to signal a new point. 
static stMD aryMD [100] = {{0}}; 
#pragma data_seg() 

void __stdcall RetrieveMD (stMD LatestMD [100]) 
{ 
memcpy(LatestMD, aryMD, sizeof(aryMD)); 
} 
```

On the C# side I removed both (ref)s and added [In, Out]

```
[StructLayout(LayoutKind.Sequential)] 
public struct stMD 
{ 
    public float Price; 
    public uint PriceDir; 
    public uint PriceDirCnt; 
}; 

public static stMD[] arrayMD = new stMD[100]; 

[DllImport(@"Market.dll")] 
public static extern void RetrieveMD([In, Out] stMD[] arrayMD); 

RetrieveMD(arrayMD); 
```

Thanks to everyone who offered help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:09:40.117

我认为，您的问题是您试图通过引用将数组从 C# 传递到 C 中，而您几乎不需要这样做。在您的情况下，您想要发生的只是让 C# 为 100 个结构分配内存，然后将该内存传递给 C 以进行填充。在您的情况下，您正在传递一个*指向*结构数组的指针，即您并不真正需要的额外间接级别。

您很少看到采用固定大小数组的 C 函数。相反，您的函数通常会在 C 中定义以接受指针和长度，例如：

```
void __stdcall RetrieveMD (stMDP *LatestMD, int size) 
{
   int count = 0;
   if (size < sizeof(aryMD))
     count = size;
   else
     count = sizeof(aryMD);

   memcpy(LatestMD, aryMD, count);      
} 
```

要从 C# 调用此方法，您需要做两件事。首先，您需要分配一个适当大小的数组以传入。其次，您需要告诉封送代码（执行 C# -> C 复制）*如何*`[MarshalAs]`通过属性确定要封送多少数据：

```
[DllImport(@"Market.dll")]
public static extern void RetrieveMD (
  [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] stMDP[] arrayMD,
  int length
);

var x = new stMDP[100];
RetrieveMD(x, 100); 
```

# matlab - 如何从命令行向 Erlang 进程发送消息？

> ID：13053393
> 
> 赞同：2
> 
> 时间：2012-10-24T16:22:56.960
> 
> 标签：matlab, command-line, operating-system, erlang, ipc

我正在尝试通知 Erlang 进程外部程序（Matlab 脚本）已完成。我正在使用批处理文件来执行此操作，并且想输入一个命令来通知 Erlang 进程完成。这是主要代码：

在 myerlangprogram.erl 中：

```
runmatlab() ->
      receive
           updatemodel->
               os:cmd("matlabscript.bat"),
...
end. 
```

在 matlabscript.bat 中：

```
matlab -nosplash -nodesktop -r "addpath('C:/mypath/'); mymatlabscript; %quit;"
%% I would like to notify erlang of completion here....
exit 
```

如您所见，我正在使用 'os:cmd' erlang 函数来调用我的 matlab 脚本。

我不确定这是最好的方法。我一直在研究使用端口（http://www.erlang.org/doc/reference_manual/ports.html），但我很难理解端口如何/在何处与操作系统交互。

总之，我的两个问题是： 1\. 从命令行向 Erlang 进程发送消息的最简单方法是什么？2\. erlang 端口在哪里/如何从/向操作系统接收/发送数据？

对此的任何建议将不胜感激。

注意操作系统是windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:48:40.440

我假设您想在不阻塞主进程循环的情况下调用 os:cmd。为了实现这一点，您需要从派生的进程中调用 os:command，然后将消息发送回父进程以指示完成。

这是一个例子：

```
runmatlab() ->
      receive
           updatemodel ->
               Parent = self(),
               spawn_link(fun() ->
                 Response = os:cmd("matlabscript.bat"),
                 Parent ! {updatedmodel, Response}
               end),
               runmatlab();

          {updatedmodel, Response} ->
              % do something with response
              runmatlab()
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:33:18.710

首先，Erlang 进程与 os 进程完全不同。它们之间没有“通知”机制或“消息”机制。你能做的是 a) 运行新的 erlang 节点，b) 连接到目标节点，c) 向远程节点发送消息。

但。关于你的问题。

```
runmatlab() ->
      receive
           updatemodel->
               BatOutput = os:cmd("matlabscript.bat"),
               %% "here" BAT script has already finished
               %% and output can be found in BatOutput variable
...
end. 
```

其次，端口是关于编码/解码 erlang 数据类型（简而言之）。

# mysql - MySQL：如何使用列值获取特定行？

> ID：13053401
> 
> 赞同：-3
> 
> 时间：2012-10-24T16:23:32.627
> 
> 标签：mysql

有没有办法根据列值获取特定行？

假设我有一个具有唯一值的列“名称”，并且我想根据该单个值获取整行。例如，假设我有一行由“name”、“city”和“state”三列定义，并且希望仅使用“name”列中的“Jeremy”值来获取与该行关联的所有三列。

我知道我可以通过选择所有行并使用 if 语句来分解行以找到我正在寻找的内容来做到这一点，但我也确信必须通过 MySQL 有一个更简单的命令来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:24:51.513

不是这么简单吗？这是一个基本的过滤：D

```
SELECT name, city, state
FROM tableName
WHERE name = 'Jeremy' 
```

# sql-server-2008-r2 - SCOPE_IDENTITY read back

> ID：13053404
> 
> 赞同：3
> 
> 时间：2012-10-24T16:23:37.033
> 
> 标签：sql-server-2008-r2

I have a system that has been running on Windows Server 2003 and SQL Server 2000 for a number of years without a problem. Recently I moved the system to Windows Server 2008 R2 and SQL Server 2008 R2 and have started get a very strange intermittent problems.

I am inserting a row into a table with an identity column and executing a select to retrieve the identity value. Most of the time this code works fine but at random intervals the identity isn't returned. Sometimes no row is found so `dr.Read` returns false, other times I get a row back but there is no identity column in it. I checked the database and the insert has succeeded, it's just that the identity isn't returned. There are no triggers on the table.

I also tried changing the SQL to:

```
INSERT INTO test (value) 
VALUES (100) 
SELECT SCOPE_IDENTITY() AS 'identity' OPTION (MAXDOP 1) 
```

in case I was running into the ['max degree of parallelism'](http://support.microsoft.com/kb/2019779) bug but that didn't help either.

Here is relevant code (slightly simplified for illustration):

```
Dim dr As SqlDataReader = Nothing
Dim objCommand As New SqlCommand
Dim oConn As New SqlConnection
Dim id as integer

oConn.ConnectionString = connStr 
oConn.open()

objCommand = New SqlCommand("INSERT INTO test (value) VALUES (100) SELECT SCOPE_IDENTITY() AS 'identity'", oConn, tr)

try
    dr = objCommand.ExecuteReader
    If Not dr.Read Then
        Throw (New Exception("Could not read IDENTITY"))
    Else
        id = dr("identity")
    End If
Catch
    Throw
Finally            
    If Not dr Is Nothing Then dr.Close()
    oConn.close()
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:27:45.410

如果您只是将它们作为两个单独的语句执行会怎样？

```
objCommand = New SqlCommand("INSERT INTO test (value) VALUES (100); SELECT SCOPE_IDENTITY() AS 'identity'", oConn, tr) 
```

[SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315.aspx)为您提供“插入到同一范围内的标识列中的最后一个标识值”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:56:53.620

SQL Server 2008 R2 上的另一个选项是使用该[`OUTPUT`子句](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.105%29.aspx)：

```
INSERT INTO test (value) 
OUTPUT INSERTED.ID
VALUES (100) 
```

这将输出`ID`插入的行的 - 这就是您想要的标识值。

`ID`从您的代码中，如果您使用`ExecuteScalar`（而不是） ，您应该能够获取它，`ExecuteReader`并且只需将`object`您返回的类型转换为`int`

# java - Why is there a type mismatch error creating a factory with guava?

> ID：13053406
> 
> 赞同：3
> 
> 时间：2012-10-24T16:23:42.640
> 
> 标签：java, guava

I'm trying to create a factory (generating new instances from a String parameter).

I've got a Monster class (the superclass) and Robot1 class (extends Monster).

My factory declares :

```
private static final ImmutableMap<String, Class<? extends Monster>> DISPATCHER = ImmutableMap.of("robot1", Robot1.class); 
```

But I get :

```
Type mismatch: cannot convert from ImmutableMap<String,Class<Robot1>> to ImmutableMap<String,Class<? extends Monster>> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:48:56.523

做就够了

```
private static final ImmutableMap<String, Class<? extends Monster>> DISPATCHER = 
   ImmutableMap.of("robot1", (Class<? extends Monster>) Robot1.class); 
```

Java 倾向于假设您想要最具体的类型，即使您不想要。这种向上转换不会引起任何警告，因为它非常安全——它只是告诉 Java 编译器您想要更通用的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:27:32.810

这是因为，您可以使用 的任何子类型`Monster`代替`Class<? extends Monster>`，这实际上不是`Robot`. 因此，编译器不允许使用类型参数引用具有`Class<? extends Monster>`更具体类型参数的实例，因为这可能会在运行时失败。

**对于EG： -** `Class<? extends Monster>`实际上可以是`Class<Zomby>`，当然`Class<Robot>`不能转换为。这就是`Class<Robot>`不能隐式转换为的原因`Class<? extends Monster>`

这与您不能这样做的情况类似：-

```
List<Animal> dogList = new ArrayList<Dog>(); 
```

同样，由于您可以在 中添加任何类型的动物`dogList`，因此您不能在 RHS 上使用更具体的类型参数

*   此检查仅在编译时完成，编译器确定这可能在运行时失败，因此它不允许这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T16:27:48.907

问题是`Robot1.class`将返回您`Class<Robot>`无法转换为`Class<? extends Monster>`

所以你需要为这种情况添加特定的演员表。

```
ImmutableMap<String, Class<? extends Monster>> DISPATCHER = 
 (ImmutableMap<String, Class<? extends Monster>>)(ImmutableMap<?, ?>)ImmutableMap.of(
                                                        "robot1", Robot1.class); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T09:25:23.210

我找到了一种工作正常的方法，没有任何演员：

```
private static final ImmutableMap<String, Class<? extends Monster>> DISPATCHER;

static {
    ImmutableMap.Builder<String, Class<? extends Monster>> builder = ImmutableMap.builder();
    // Monsters types list
    builder.put("robot1", Robot1.class);        

    DISPATCHER = builder.build();
} 
```

# python - 使用生成器中的值在 numpy 中构造方阵的最有效方法

> ID：13053412
> 
> 赞同：2
> 
> 时间：2012-10-24T16:24:00.630
> 
> 标签：python, matrix, numpy

我有一个生成器`g`，我事先知道它会返回`n`项目。每个项目`i`的结构如下：

`t_i:(e_i, b_i)`

`t_i`是一个可变大小的元组，可以包含 list 的任何有序子序列`(1,...,n)`。例如，对于`n=6`、`t_1=(1, 3, 4)`等`t_2=(2, 4, 6)`。

`e_i`是一个数字（浮点数/整数），并且`b_i`是一个布尔值（这里没有真正使用）。

**`n x n`我想知道使用以下方式构造矩阵（使用 numpy 数组）的最有效方法是`g`什么**：

矩阵的每一行`i`对应`t_i:(e_i, b_i)`于： 1\. 位置出现的行元素（在矩阵中）`t_i`应该使用`e_i`; 2\. 其他行元素默认为`0`.

因此，例如，假设矩阵`2`的那一行`8 x 8`对应于 item `t_2:(e_2, b_2) = (2, 4, 6):(13, True)`，则该行应设置为`(0, 13, 0, 13, 0, 13, 0, 0)`。`t_2`请注意，我们在这里（或`t_i`一般情况下）没有对数字使用零索引。

一个明显的方法是提前构造一个`n x n`矩阵，然后遍历生成器返回的每一个item，根据item依次设置每一行。但鉴于 Python 的强大功能，`numpy`尤其是 Python 的强大功能，我觉得必须有一些更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:35:39.960

在 Numpy 中构造一个 n×n 矩阵既简单又相当有效。通过使用高级索引来设置行，我们可以获得一个非常简单有效的实现：

```
arr = np.zeros((n,n))
for i,(t,e,b) in enumerate(g):
    arr[i,np.array(t) - 1] = e 
```

请注意，这假设`g`生成形式为 的元组`(ti, ei, bi)`。

# android - Swiping gestures

> ID：13053413
> 
> 赞同：1
> 
> 时间：2012-10-24T16:24:02.427
> 
> 标签：android

I'd like to implement a small feature on my application that allows the user to swipe left and swipe right on a fixed part of the screen. A swipe left would call a certain method and a swipe right would call a different method. I've seen swipe examples where the activity changes upon swiping left or right, but I only want to call methods, and have it only available on a small part of the screen.

Is this possible? Can anyone point me in the right direction to a library or good tutorial?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:47:58.580

看看[SimpleOnGestureListener API](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)。您肯定可以处理滑动并从中调用方法。看看[这个教程](http://misha.beshkin.lv/android-swipe-gesture-implementation/)。当您在活动中实现 SimpleGestureActivity 时，请从 switch 语句中的适当案例中调用您的方法。

# scala - 暂停 Akka 演员

> ID：13053421
> 
> 赞同：1
> 
> 时间：2012-10-24T16:24:50.037
> 
> 标签：scala, blocking, akka

我正在尝试使用 Akka 来实现以下功能（我想我正在尝试以正确的方式使用 Akka）：

我有一个系统，其中有*n 个*资源侦听器。本质上，资源侦听器是一个实体，它将侦听输入资源并发布它所看到的内容（即轮询数据库、跟踪日志文件等）。

所以我想使用 Akka 演员来做这些小工作单元（监听资源）。我注意到 Akka 给了我一个*t*线程的线程池，它可能少于侦听器的数量。对我来说不幸的是，从这些资源侦听器获取消息可能会阻塞，因此可能需要几秒钟、几分钟才能弹出下一条消息。

有没有办法暂停资源侦听器，以便将线程留给另一个参与者，我们稍后会回来讨论它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:34:07.337

# 执行摘要

您想要的是您的生产者 API（资源）是异步的，或者至少支持非阻塞操作（以便您可以进行轮询）。如果 API 不支持，那么就没有办法改造这个属性，甚至不使用全能的演员 ;-)

# 针对不同情况的策略

## 仅阻塞 API

如果资源只支持检索事物的阻塞`getWhatever()`方法，那么您必须为每个资源分配一个线程。带有 PinnedDispatcher 的 Actor 可能是实现此目的的一种方式。但请注意，参与者在等待来自资源的事件时不会做出响应。

## 非阻塞但同步的 API

如果资源 API 上有一个`peek()`or`poll()`方法，您可以为每个资源使用一个参与者，让他们共享一个线程（或池）并根据需要安排轮询（即每 100 毫秒或任何您需要的时间）。这具有巨大的优势，即实际上没有人被阻止并且整个系统保持响应。但是事件接收的延迟将是您的计划间隔的顺序。

## 适当的异步 API

如果你有足够好的业力来遇到一个好的异步 API，那么只需注册一个回调，它会在事件发生时向参与者发送消息。可悲的是，这不是常态。

### PS：

JVM 不支持包装当前调用堆栈、执行其他操作并稍后返回相同的处理状态。方法只有在实际完成时才能从堆栈中弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:48:29.000

一般来说，你应该尽量避免阻塞actor中的操作。对于文件 IO，有异步库，对于一些数据库也有。如果这不是您的选择，您可以设置更改默认调度程序，以便根据需要扩展底层线程池。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T13:55:23.487

一种选择是在 Futures 中调用阻塞 API。Futures 应该使用与 Actor 的 ExecutionContext 分开的 ExecutionContext（线程池）。

有关示例（特别是 CacheActor.findValueForSender），请参阅[此博客文章。](http://letitcrash.com/post/30509298968/case-study-an-auto-updating-cache-using-actors)

# python - 如果数据输入不止一次，则不同的响应

> ID：13053429
> 
> 赞同：1
> 
> 时间：2012-10-24T16:25:20.207
> 
> 标签：python

我是 python 新手。我正在尝试创建一个脚本，当多次输入相同的数据时，它会给我不同的响应。代码如下：

```
def loop() :
    Repeat = 0
    response = raw_input("enter something : ")
    if response == "hi"
        Repeat += 1
        print "hello"
        loop()
        if Repeat > 2 :
            print "you have already said hi"
            loop()

def main() :
    loop()
    raw_input()

main() 
```

上面的代码不起作用。最好我想要一个检查这两个条件的语句，但我不太确定如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:30:35.947

我会使用 a`dict`来存储单词/计数。然后您可以查询该单词是否在字典中并更新计数...

```
words = {}
while True:
    word = raw_input("Say something:")
    if word in words:
       words[word] += 1
       print "you already said ",words[word]
       continue
    else:
       words[word] = 0
       #... 
```

你也可以用`try`/来做这个`except`，但我想我会保持简单开始......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:36:34.047

尝试这样的事情：

```
def loop(rep=None):
    rep=rep if rep else set()  #use a set or list to store the responses
    response=raw_input("enter something : ")
    if response not in rep:                    #if the response is not found in rep
        rep.add(response)                      #store response in rep   
        print "hello"
        loop(rep)                              #pass rep while calling loop()
    else:
        print "You've already said {0}".format(response)    #if response is found 
        loop(rep)
loop() 
```

**输出：**

```
enter something : hi
hello
enter something : hi
You've already said hi
enter something : foo
hello
enter something : bar
hello
enter something : bar
You've already said bar
enter something : 
```

PS：还要添加一个中断条件，`loop()`否则它将是一个无限循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:42:30.933

您上面的陈述递归地调用自己。loop 的新实例无法访问 Repeat 的调用值，而是拥有自己的 Repeat 本地副本。另外，你有 if `Repeat > 2`。正如所写的那样，这意味着在他们输入“hello”三次以使计数器达到 3 之前，它不会获得您的其他打印语句。您可能想要这样做`Repeat >= 2`。

您想要的是一个跟踪输入是否重复的 while 循环。在现实生活中，您可能需要一些条件来告诉 while 循环何时结束，但您在这里没有抱怨，因此您可以使用`while True:`永远循环。

最后，您的代码只检查他们是否多次输入“hello”。您可以通过跟踪他们已经说过的内容来使其更通用，并摆脱在此过程中需要计数器的需要。对于我没有测试过的快速草率版本，它可能会像这样循环：

```
alreadySaid = set() #sets are effecient and only store a specific element once
while True: #probably want an actual break condition here, but to do it forever this works
   response = raw_input("enter something : ") 
   if response in alreadySaid:
      print 'You already said {}'.format(response)
   else:
      print response
      alreadySaid.add(response) 
```

# javascript - 身份验证和 AJAX

> ID：13053431
> 
> 赞同：0
> 
> 时间：2012-10-24T16:25:31.127
> 
> 标签：javascript, html, ajax, jsp, authentication

我想向使用 Ajax 的现有应用程序添加身份验证，我正在考虑最好的方法。这是一个典型的场景：

1.  第一个请求 - 要求登录，进入第一个屏幕。这很好用。
2.  会话已过期。

由于我执行 ajax 并为每个操作发送 2 个请求（一个实际请求和一个记录统计/审计操作的请求），因此可能会发生在其中一个请求上。发生这种情况时，应用程序会向我显示身份验证屏幕，并在成功身份验证后将用户转发到上一个请求。

这里的问题是我不想要转发，我希望我的自定义 Ajax/javascript 处理来获取响应并处理它。是否可以只弹出一个窗口进行身份验证，然后当我得到响应时继续像会话永不过期一样？

我在 web.xml 中有这个：

```
 <login-config>
       <auth-method>FORM</auth-method>
       <form-login-config>
           <form-login-page>/jsp/login.jsp</form-login-page>
           <form-error-page>/jsp/login_error.jsp</form-error-page>
       </form-login-config>
   </login-config> 
```

# sql - 选择不同的返回重复结果

> ID：13053433
> 
> 赞同：-3
> 
> 时间：2012-10-24T16:25:38.337
> 
> 标签：sql, distinct, kentico

我正在尝试返回 kentico 站点中阅读次数最多的前 n 篇博客文章，但由于某种原因，尽管使用了该`DISTINCT`子句，我的查询仍返回两个重复的行。查询如下：

```
 SELECT DISTINCT TOP 3
       [BlogPostTitle]
      ,[BlogPostDate]
      ,[BlogPostSummary]
      ,[BlogPostBody]
      ,[BlogPostTeaser]
      ,[BlogPostAllowComments]
      ,[BlogPostPingedUrls]
      ,[BlogPostNotPingedUrls]
      ,[BlogLogActivity]
      ,[DocumentTags]
      ,[HitsStatisticsID]
      ,[HitsCount]
      ,[NodeAliasPath]
  FROM [AngliaRegistrars].[dbo].[Analytics_Statistics]

  INNER JOIN [AngliaRegistrars].[dbo].[Analytics_HourHits] ON HitsStatisticsID = StatisticsID
  INNER JOIN [AngliaRegistrars].[dbo].[View_CONTENT_BlogPost_Joined] ON StatisticsObjectID = DocumentNodeID

  WHERE StatisticsCode = 'pageviews' ORDER BY HitsCount DESC 
```

在编写 SQL 方面，我并不是最有经验的人，所以希望这是我错过的显而易见的事情，但对我来说似乎很有意义。

任何帮助是极大的赞赏

编辑*[查询结果](http://i49.tinypic.com/epexw0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:48:00.997

这可能是您已经看过的内容，但如果您使用可变字符长度字段，则数据中可能包含一些影响结果的不可见字符或制表符。这会让你看起来有重复，但实际上没有。

检查字段的 LEN() 以快速比较重复项。如果您看到的重复字段的长度不同，请尝试在列上使用 TRIM() 函数，看看是否会删除重复项。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-24T16:35:26.903

在 Select 列中包含表别名：

```
SELECT DISTINCT TOP 3
       a.[BlogPostTitle]
      ,a.[BlogPostDate]
      ,a.[BlogPostSummary]
      ,a.[BlogPostBody]
      ,a.[BlogPostTeaser]
      ,a.[BlogPostAllowComments]
      ,a.[BlogPostPingedUrls]
      ,a.[BlogPostNotPingedUrls]
      ,a.[BlogLogActivity]
      ,a.[DocumentTags]
      ,a.[HitsStatisticsID]
      ,a.[HitsCount]
      ,a.[NodeAliasPath]
  FROM [AngliaRegistrars].[dbo].[Analytics_Statistics]
  INNER JOIN [AngliaRegistrars].[dbo].[Analytics_HourHits] ON HitsStatisticsID = StatisticsID
  INNER JOIN [AngliaRegistrars].[dbo].[View_CONTENT_BlogPost_Joined] a ON StatisticsObjectID = DocumentNodeID
  WHERE StatisticsCode = 'pageviews' ORDER BY HitsCount DESC 
```

连接多个表时，DISTINCT 可能会产生混合结果。有了这个，我们确保查询只返回一个表的不同记录，在这种情况下：“View_CONTENT_BlogPost_Joined”

# yui - YUI 数据表分页

> ID：13053439
> 
> 赞同：1
> 
> 时间：2012-10-24T16:25:55.603
> 
> 标签：yui

YUI (3.7) 的DataTable 支持分页吗？它在 API 文档中提到 - 但仅在代码示例中。当我试图找到任何深入的文档时，我什么也看不到。

[http://yuilibrary.com/yui/docs/api/classes/DataTable.html](http://yuilibrary.com/yui/docs/api/classes/DataTable.html)

但这表明它可能还不被支持（虽然我知道它指的是一个稍微旧的版本）

[http://yuilibrary.com/forum/viewtopic.php?p=32211](http://yuilibrary.com/forum/viewtopic.php?p=32211)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:43:18.987

图库里有一堆分页器模块，大部分都和YUI DataTable一起工作，但是YUI中还没有官方的Y.Paginator。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:25:45.290

有一个用于数据表分页的图库模块：http: [//yuilibrary.com/gallery/show/datatable-paginator](http://yuilibrary.com/gallery/show/datatable-paginator)

您也可以将[AlloyUI 分页](http://alloyui.com/examples/pagination)与[DataTable](http://alloyui.com/examples/datatable)一起使用：[https ://gist.github.com/zenorocha/5032360](https://gist.github.com/zenorocha/5032360)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T07:25:34.697

Y.Paginator 现在存在。但它是非常底层的并且不包含 UI 组件。[见](http://yuilibrary.com/yui/docs/paginator/)。

还有一个非常无证的`Datatable.Paginator`课程。我根本想不通。[链接](http://yuilibrary.com/yui/docs/api/classes/DataTable.Paginator.html)。

# java - 部署战争后 Glassfish 上的 NoClassDefFoundError

> ID：13053441
> 
> 赞同：0
> 
> 时间：2012-10-24T16:26:10.597
> 
> 标签：java, maven, web-applications, glassfish, war

我正在使用 netbeans 和 maven 开发小型 Web 应用程序。

项目由三个模块组成：

prychadmin（这是主要模块）

旅行

接口

它必须像这样划分，因为后面的两个模块也在其他地方使用。我将所有内容打包到一个 war 文件中（WEB-INF/lib 中包含的模块 travel 和接口）并尝试部署到 glassfish（尝试通过 netbeans 和手动部署），我在 travel 模块中包含的类之一上得到 NoClassDefFoundError。

```
RuntimeException
java.lang.NoClassDefFoundError: chore/gry/prych/map/LocationImpl 
```

我一直在寻找解决方案的几天，一位消息人士告诉我修改 MANIFEST.MF 所以它现在看起来像这样：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: user
Build-Jdk: 1.6.0_26
Class-Path: travel-1.0-SNAPSHOT.jar log4j-1.2.16.jar interfaces-1.0-SN
 APSHOT.jar 
```

但这没有帮助。

我也尝试将它部署到tomcat，但它也不起作用，所以这一定是我在war文件中的愚蠢错误。

有没有人有任何想法？

这是我的 prychadimn 项目 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <artifactId>prych</artifactId>
    <groupId>chore.gry</groupId>
    <version>1.0-SNAPSHOT</version>
</parent>
<groupId>chore.gry.prych</groupId>
<artifactId>prychadmin</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>prychadmin Java EE 6 Webapp</name>
<url>http://maven.apache.org</url>
<repositories>
    <repository>
        <id>java.net2</id>
        <name>Repository hosting the jee6 artifacts</name>
        <url>http://download.java.net/maven/2</url>
    </repository>
    <repository>
        <id>apache</id>
        <name>Apache</name>
        <url>http://ftp.cica.es/mirrors/maven2/</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>chore.gry.prych</groupId>
        <artifactId>travel</artifactId>
        <version>1.0-SNAPSHOT</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1-alpha-2</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <configuration>
                        <tasks>

                            <copy todir="src\main\webapp\chore\gry\prych\prychadmin\mapa">
                                <fileset dir="target\classes\chore\gry\prych\prychadmin\mapa"/>
                            </copy>

                        </tasks>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <finalName>prychadmin</finalName>
</build>
<profiles>
    <profile>
        <id>endorsed</id>
        <activation>
            <property>
                <name>sun.boot.class.path</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.0.2</version>
                    <configuration>
                        <!-- javaee6 contains upgrades of APIs contained within the JDK itself.
                        As such these need to be placed on the bootclasspath, rather than classpath of the
                        compiler.
                        If you don't make use of these new updated API, you can delete the profile.
                        On non-SUN jdk, you will need to create a similar profile for your jdk, with the similar property as sun.boot.class.path in Sun's JDK.-->
                        <compilerArguments>
                            <bootclasspath>${settings.localRepository}/javax/javaee-endorsed-api/6.0/javaee-endorsed-api-6.0.jar${path.separator}${sun.boot.class.path}</bootclasspath>
                        </compilerArguments>
                    </configuration>
                    <dependencies>
                        <dependency>
                            <groupId>javax</groupId>
                            <artifactId>javaee-endorsed-api</artifactId>
                            <version>6.0</version>
                        </dependency>
                    </dependencies>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles>
</project> 
```

我的环境：

Windows 7的

玻璃鱼 3.1.2.2

网豆 7.2

JDK 1.6.0_26

Maven 3.0.3

**EDIT1** 这是我的包树：

```
-   index.jsp
-
+---chore
-   L---gry
-       L---prych
-           L---prychadmin
-               L---mapa
-                       DBConnector.class
-                       Location.class
-                       ....
-                       PathsEditorPanel.class
-
+---css
-       prych.css
-
+---lib
-       travel-1.0-SNAPSHOT.jar
-
+---META-INF
-   -   context.xml
-   -   MANIFEST.MF
-   -
-   +---maven
-   -   L---chore.gry.prych
-   -       L---prychadmin
-   -               pom.properties
-   -               pom.xml
-   -
-   L---services
-           java.sql.Driver
-
+---org
-   L---postgresql
-       -   Driver$1.class
-       -   Driver$ConnectThread.class
-       -   ...
-               RecoveredXid.class
-
L---WEB-INF
    +---classes
    -   L---chore
    -       L---gry
    -           L---prych
    -               L---prychadmin
    -                   -   Starter.class
    -                   -
    -                   L---mapa
    -                           DBConnector.class
    -                           LocationAdmin.class
    -                           ...
    -                           PathsEditorPanel.class
    -
    L---lib
        interfaces-1.0-SNAPSHOT.jar
        log4j-1.2.16.jar
        travel-1.0-SNAPSHOT.jar    <-- this is the one that has LocationImpl.class 
```

我注意到还有一个奇怪的地方，它可能对问题没有影响。在主要方向的文件夹*中*，不仅有来自我的主模块的类，还有来自两个库中的第二个的两个类（实际上是接口）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:46:03.227

尝试通过将您的应用程序相关的 jar 文件添加到两个域 ext (domain1/lib/ext) 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:53:06.083

您不需要修改清单文件。从错误消息来看，缺少的类似乎是您的主模块中的类。你能确保该类存在于 WEB-INF/classes 中吗？

# vbscript - VBScript How To Return ArrayList From Function

> ID：13053442
> 
> 赞同：8
> 
> 时间：2012-10-24T16:26:09.840
> 
> 标签：vbscript

I am trying to read a file into an array list and then return it from a function. My function works to read the file to an array but when I try setting it to a variable it errors saying invalid procedure call or argument

My read file code

```
function readfile(strFile)
dim fs,objTextFile 
set fs=CreateObject("Scripting.FileSystemObject")
dim arrStr
set objTextFile = fs.OpenTextFile(strFile)
Set userArrayList = CreateObject( "System.Collections.ArrayList" )

Do Until objTextFile.AtEndOfStream 
strNextLine = objTextFile.Readline 
userArrayList.add strNextLine
Loop 

objTextFile.Close
set objTextFile = Nothing
set fs = Nothing

readfile = userArrayList
end function 
```

Calling it in my code

```
arr = readfile("\\dc1\NETLOGON\Scripts\Add_Users\user.csv")

For Each present In arr
user = split(present,",")
WScript.Echo user(0) & user(1) & user(2) & user(3) & user(4) & "|"
Next 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T16:46:25.557

Turns out I need to use set here is the working code. Working function

```
function readfile(strFile)
dim fs,objTextFile 
set fs=CreateObject("Scripting.FileSystemObject")
dim arrStr
set objTextFile = fs.OpenTextFile(strFile)
Set userArrayList = CreateObject( "System.Collections.ArrayList" )

Do Until objTextFile.AtEndOfStream 
strNextLine = objTextFile.Readline 
userArrayList.add strNextLine
Loop 

objTextFile.Close
set objTextFile = Nothing
set fs = Nothing

set readfile = userArrayList
end function 
```

Working Call

```
Dim arr
set arr = readfile("\\dc1\NETLOGON\Scripts\Add_Users\user.csv")
For Each present In arr
user = split(present,",")
WScript.Echo user(0) & user(1) & user(2) & user(3) & user(4) & "|"
'WScript.Echo present & "|"
Next 
```

# python - 用 PIL 在图像上画一条线

> ID：13053443
> 
> 赞同：42
> 
> 时间：2012-10-24T16:26:14.227
> 
> 标签：python, python-imaging-library

我想画一条线并显示它。假设我有一个 PIL 图像。

```
draw = ImageDraw.Draw(pilImage)
draw.line((100,200, 150,300), fill=128) 
```

如何显示图像？在画线之前，我可以这样做：

```
imshow(pilImage) 
```

但`imshow(draw)`不显示图像。

如何将其转换回 PIL 图像？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-24T16:31:37.440

这应该有效：

```
from PIL import Image, ImageDraw
im = Image.new('RGBA', (400, 400), (0, 255, 0, 255)) 
draw = ImageDraw.Draw(im) 
draw.line((100,200, 150,300), fill=128)
im.show() 
```

基本上使用`ImageDraw`在图像上绘制，然后在更改后显示该图像，以绘制粗线通过宽度

```
draw.line((100,200, 150, 300), fill=128, width=3) 
```

# c# - 创建多个（超过 10 个）BackgroundWorker 的推荐方法是什么？

> ID：13053444
> 
> 赞同：0
> 
> 时间：2012-10-24T16:26:20.183
> 
> 标签：c#, winforms, backgroundworker

阅读这些[BackgroundWorker 与 ThreadPool 与 Thread](https://stackoverflow.com/a/1507337)的技巧后，我决定使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/8xs8549b%28v=vs.100%29.aspx)。

我知道如何通过将其组件从工具箱拖放到我的表单中来创建这样一个线程，但是由于我需要多个这样的线程（10-20 之间的有限数量），我不确定正确的方法是什么这是：

*   拖放其中的 10-20 个，在代码中为它们创建占位符，但仅启动需要运行的那些，具体取决于应用程序的需要（在不同的场景中，我可以运行这 10-20 个线程中的 1-2 个） .

或者

*   以编程方式创建那些[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx)（涉及更多）

我更喜欢拖放方法，但我在 BackgroundWorker 方面没有经验，我不确定权衡可能是什么。

有经验的 BackgroundWorker 程序员有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:33:30.437

您可以创建一个包含它们的数组。为每个您添加一个处理程序。完成后，通过数组来处理它们。例如（对不起，这是从 VB 代码翻译过来的，我不是 C# 专家，所以最坏的情况请视为伪代码）：

```
//globally
List<BackgroundWorker> workers = new List<BackgroundWorker>();

//within a sub/function
int numberOfWorkersNeeded = 10;
for (i = 0; i < numberOfWorkersNeeded; i++) {
    BackgroundWorker bg = new BackgroundWorker();
    bg.DoWork += new DoWorkEventHandler(MyWorkHandler);
    bg.RunWorkerCompleted += new RunWorkerCompletedEventHandler(MyWorkFinishedHandler);
    workers.Add(bg);
} 
```

要删除（它们是可重复使用的，所以这是用于退出或不再需要工人时）：

```
for (i = 0; i < workers.Count; i++) {
    if (!bg.IsBusy) {
        //remove handlers
        workers(i).Dispose();
    }
} 
```

正如@ateiop 所说，权衡取舍，您需要手动创建（和删除）事件处理程序。

因为`BackgroundWorker`你有两个主要事件，`DoWork`和`RunWorkerCompleted`。此外，如果您想报告进度，您需要启用报告 ( `bg.WorkerReportsProgress = true;`) 并为此添加处理程序 ( `ProgressChanged`)。

In any case, you also need to handle workers that hasn't finished.

# wix - 命令行窗口中的 Wix 工具

> ID：13053445
> 
> 赞同：0
> 
> 时间：2012-10-24T16:26:24.880
> 
> 标签：wix, wix3.6

是否可以从命令窗口使用 wix 命令？我安装了 wix 3.6 工具集，虽然 Wix 项目可用，但项目模板似乎几乎没有帮助您创建项目。据我了解，所有有用的工具都是基于命令的，无法从命令窗口访问（至少它们不适合我）。我错过了什么吗？如果有一个 Visual Studio 项目，您必须手动键入所有 xml，然后离开 IDE 以使用任何有用的工具，这似乎是没有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:19:32.457

您可以从命令窗口调用可执行文件。例如，用 /? 调用 Heat 参数：

```
Tools.Shell /o /c heat.exe "/?" 
```

请注意，我在我的路径中设置了 WiX 工具集 bin 目录。

您还可以[创建代码片段](http://msdn.microsoft.com/en-us/library/ms165394.aspx)以加快输入重复的 xml。

# java - Apache HttpClient 4.x 恢复上传

> ID：13053448
> 
> 赞同：3
> 
> 时间：2012-10-24T16:26:27.533
> 
> 标签：java, http, post, put, apache-httpclient-4.x

有没有一种标准的方法来实现使用 Apache HttpClient 4.x 的可恢复文件上传？我试图覆盖*FileBody中的**writeTo*方法

 *```
@Override
public void writeTo(final OutputStream out) throws IOException {
     if (out == null) {
            throw new IllegalArgumentException("Output stream may not be null");
     }

     BufferedInputStream stream = new BufferedInputStream(new FileInputStream(this.file));

     if(pos > 0){
        stream.skip(pos);
     } 
```

刚才我想到可能我需要覆盖*getContentLength*方法

```
public long getContentLength() {
    return this.file.length() - pos;
} 
```

或者，也许我可以这样做：

```
BufferedInputStream stream = new BufferedInputStream(new FileInputStream(file));
if(pos > 0){
   stream.skip(pos);
}
new InputStreamEntity(stream , file.getSize()-pos); 
```

有人有建议吗？*

# sql-server - 获取传递查询的连接字符串

> ID：13053453
> 
> 赞同：1
> 
> 时间：2012-10-24T16:26:43.573
> 
> 标签：sql-server, ms-access, ms-access-2010

我刚刚了解了`MS-ACCESS`.

我有一个`SQL SERVER`后端，如果我是对的，查询访问会在执行 where 子句之前加载所有记录......那么拥有`SQL SERVER`后端有什么意义呢？

这就是为什么我想尽可能多地尝试使用直通查询，但是有没有办法可以从我的链接表中获取连接字符串以进行直通查询？

`CurrentDb.TableDefs("One of my table name").Connect`我在属性中尝试过，`ODBC Connect Str`但我收到错误消息，说它是无效的连接字符串。

这会很好，因为我知道我将不得不尽快更改连接，这样我就不必在很多地方编辑连接字符串。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:02:26.407

我不确定你在这里的意思：“*对于查询访问在执行 where 子句之前加载所有记录*”

如果该`WHERE`子句可以在服务器上应用，则 ODBC 会将其翻译为服务器的语言，并且只有匹配的行将被发送回 Access：

```
WHERE date_field >= #2011-01-01# AND date_field < #2012-01-01# 
```

该`WHERE`子句会将发送到 Access 的行限制为仅那些`date_field`值来自 2011 年的行。

但是，如果`WHERE`子句包含必须由 Access 评估的函数，则 ODBC 必须检索所有候选行并将它们交给 Access db 引擎，以便它可以执行评估。

```
WHERE Format(date_field, 'yyyy') = '2011' 
```

但是对于您的实际问题......通过查询的连接字符串......请考虑以下代码示例。我有一个名为 ODBC 链接`dbo_foo`，其在 SQL Server 中的源表是`[dbo].[foo]`. 因此，我可以从中获取`.Connect`属性`dbo_foo`并将其用于`.Connect`基于同一服务器表的传递查询的属性。

```
Public Sub CreatePassThruQuery()
    Dim db As DAO.Database
    Dim qdf As DAO.QueryDef
    Dim strConnect As String
    Set db = CurrentDb
    strConnect = db.TableDefs("dbo_foo").Connect
    Set qdf = db.CreateQueryDef("qryDbo_Foo")
    qdf.Connect = strConnect
    qdf.SQL = "SELECT * FROM [dbo].[foo];"
    qdf.Close
    Set qdf = Nothing
    Set db = Nothing
End Sub 
```

尽管如此，当您更改`.Connect`表的属性时，您还需要为查询执行此操作。如果你有很多和/或经常更改连接，那么创建一个 VBA 过程来更新它们可能是值得的。或者，您可以将 DSN 用于`.Connect`表和匹配查询的属性。然后根据需要修改 DSN。这种方法的一个缺陷是，如果其他人将使用您的应用程序，您将需要在多台机器上管理 DSN。

# java - 8-Puzzle Solution 无限执行

> ID：13053455
> 
> 赞同：1
> 
> 时间：2012-10-24T16:17:23.840
> 
> 标签：java, computer-science, artificial-intelligence

我正在[寻找](http://www.cs.princeton.edu/courses/archive/fall12/cos226/assignments/8puzzle.html)使用`A* Algorithm`. 我在网上找到[**了这个**](http://code.google.com/p/a-star-eight-puzzle/source/browse/trunk/+a-star-eight-puzzle/420proj1/src/?r=10)项目。请查看文件 -`proj1`和`EightPuzzle`. proj1 包含程序（`main()`函数）的入口点，EightPuzzle 描述了拼图的特定状态。每个状态都是 8 谜题的一个对象。
我觉得逻辑上没有错。但是对于我尝试过的这两个输入，它会永远循环：`{8,2,7,5,1,6,3,0,4}`和`{3,1,6,8,4,5,7,2,0}`。它们都是有效的输入状态。代码有什么问题？

* * *

**笔记**

*   为了更好地查看代码，请在 Notepad++ 或其他文本编辑器（具有识别 java 源文件的能力）中复制代码，因为代码中有很多注释。
*   由于 A* 需要启发式，他们提供了使用曼哈顿距离的选项和计算错放瓷砖数量的启发式。并且为了确保首先执行最佳启发式，他们实施了一个`PriorityQueue`. 该`compareTo()` 功能在`EightPuzzle`类中实现。
*   可以通过更改类函数中`p1d`的值来更改程序的输入。`main()``proj1`
*   我告诉我上面的两个输入存在解决方案的原因是因为[这里](http://www.brian-borowski.com/Software/Puzzle/)的小程序解决了它们。请确保从小程序中的选项中选择 8-puzzle。

    **EDIT1**
    我给了这个输入`{0,5,7,6,8,1,2,4,3}`。它花了大约`10 seconds`并给出了**26步**的结果。但是小程序给出了`24 moves`in `0.0001 seconds`with的结果`A*`。

    **EDIT2**
    在调试时，我注意到随着节点的扩展，新节点在一段时间后都具有启发式 - `f_n`as `11`or `12`。他们似乎永远不会减少。所以过了一段时间后，所有的州`PriorityQueue(openset)`有 11 或 12 的启发式。所以没有太多可供选择的，要扩展到哪个节点。最低是11，最高是12。这正常吗？

    **EDIT3**
    这是发生无限循环的片段（在**proj1-astar()中）。****openset**是包含未扩展节点的 PriorityQueue，而**closedset**是包含扩展节点的 LinkedList。

而（openset.size（）> 0）{

```
 EightPuzzle x = openset.peek();

                    if(x.mapEquals(goal))
                    {

                             Stack<EightPuzzle> toDisplay = reconstruct(x);
                             System.out.println("Printing solution... ");
                             System.out.println(start.toString());
                             print(toDisplay);
                             return;

                    }          
                    closedset.add(openset.poll());
                    LinkedList <EightPuzzle> neighbor = x.getChildren();              
                    while(neighbor.size() > 0)
                    {
                            EightPuzzle y = neighbor.removeFirst();
                            if(closedset.contains(y)){
                                    continue;
                            }          
                            if(!closedset.contains(y)){
                                    openset.add(y);
                            }              
                    }

            } 
```

* * *

**EDIT4**

**我得到了这个无限循环的原因**。看我的回答。但是执行大约需要**25-30秒**，这是相当长的时间。A* 应该比这快得多。小程序在**0.003 秒内**完成此操作。**我将奖励提高性能的赏金。**

* * *

**为了**快速参考，我粘贴了没有注释的两个类：

## 八拼图

```
 import java.util.*;

    public class EightPuzzle implements Comparable <Object> {

            int[] puzzle = new int[9];
            int h_n= 0;
            int hueristic_type = 0;
            int g_n = 0;
            int f_n = 0;
            EightPuzzle parent = null;

            public EightPuzzle(int[] p, int h_type, int cost)
            {
                    this.puzzle = p;
                    this.hueristic_type = h_type;
                    this.h_n = (h_type == 1) ?  h1(p) : h2(p);
                    this.g_n = cost;
                    this.f_n = h_n + g_n;
            }
            public int getF_n()
            {
                    return f_n;
            }
            public void setParent(EightPuzzle input)
            {
                    this.parent = input;
            }
            public EightPuzzle getParent()
            {
                    return this.parent;
            }

            public int inversions()
            {
                    /*
                     * Definition: For any other configuration besides the goal,
                     * whenever a tile with a greater number on it precedes a
                     * tile with a smaller number, the two tiles are said to be inverted
                     */
                    int inversion = 0;
                    for(int i = 0; i < this.puzzle.length; i++ )
                    {
                            for(int j = 0; j < i; j++)
                            {
                                    if(this.puzzle[i] != 0 && this.puzzle[j] != 0)
                                    {
                                    if(this.puzzle[i] < this.puzzle[j])
                                            inversion++;
                                    }
                            }

                    }
                    return inversion;

            }
            public int h1(int[] list)
            // h1 = the number of misplaced tiles
            {
                    int gn = 0;
                    for(int i = 0; i < list.length; i++)
                    {
                            if(list[i] != i && list[i] != 0)
                                    gn++;
                    }
                    return gn;
            }
            public LinkedList<EightPuzzle> getChildren()
            {
                    LinkedList<EightPuzzle> children = new LinkedList<EightPuzzle>();
                    int loc = 0;
            int temparray[] = new int[this.puzzle.length];
            EightPuzzle rightP, upP, downP, leftP;
                    while(this.puzzle[loc] != 0)
                    {
                            loc++;
                    }
                    if(loc % 3 == 0){
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc + 1];
                            temparray[loc + 1] = 0;
                            rightP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            rightP.setParent(this);
                            children.add(rightP);

                    }else if(loc % 3 == 1){
                    //add one child swaps with right
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc + 1];
                            temparray[loc + 1] = 0;

                            rightP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            rightP.setParent(this);
                            children.add(rightP);
                            //add one child swaps with left
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc - 1];
                            temparray[loc - 1] = 0;

                            leftP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            leftP.setParent(this);
                            children.add(leftP);
                    }else if(loc % 3 == 2){
                    // add one child swaps with left
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc - 1];
                            temparray[loc - 1] = 0;

                            leftP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            leftP.setParent(this);
                            children.add(leftP);
                    }              

                    if(loc / 3 == 0){
                    //add one child swaps with lower
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc + 3];
                            temparray[loc + 3] = 0;

                            downP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);

                            downP.setParent(this);

                            children.add(downP);

                    }else if(loc / 3 == 1 ){
                            //add one child, swap with upper
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc - 3];
                            temparray[loc - 3] = 0;

                            upP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            upP.setParent(this);

                            children.add(upP);
                            //add one child, swap with lower
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc + 3];
                            temparray[loc + 3] = 0;

                            downP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            downP.setParent(this);

                            children.add(downP);
                    }else if (loc / 3 == 2 ){
                            //add one child, swap with upper
                            temparray = this.puzzle.clone();
                            temparray[loc] = temparray[loc - 3];
                            temparray[loc - 3] = 0;

                            upP = new EightPuzzle(temparray, this.hueristic_type, this.g_n + 1);
                            upP.setParent(this);

                            children.add(upP);
                    }

                    return children;
            }
            public int h2(int[] list)
            // h2 = the sum of the distances of the tiles from their goal positions
            // for each item find its goal position
            // calculate how many positions it needs to move to get into that position
            {
                    int gn = 0;
                    int row = 0;
                    int col = 0;
                    for(int i = 0; i < list.length; i++)
                    {
                            if(list[i] != 0)
                            {
                                    row = list[i] / 3;
                                    col = list[i] % 3;
                                    row = Math.abs(row - (i / 3));
                                    col = Math.abs(col - (i % 3));
                                    gn += row;
                                    gn += col;
                            }

                    }
                    return gn;
            }

            public String toString()
            {
                    String x = "";
                    for(int i = 0; i < this.puzzle.length; i++){
                            x += puzzle[i] + " ";
                            if((i + 1) % 3 == 0)
                                    x += "\n";
                    }
                    return x;
            }
            public int compareTo(Object input) {

                    if (this.f_n < ((EightPuzzle) input).getF_n())
                            return -1;
                    else if (this.f_n > ((EightPuzzle) input).getF_n())
                            return 1;
                    return 0;
            }

            public boolean equals(EightPuzzle test){
                    if(this.f_n != test.getF_n())
                            return false;
                    for(int i = 0 ; i < this.puzzle.length; i++)
                    {
                            if(this.puzzle[i] != test.puzzle[i])
                                    return false;
                    }
                    return true;
            }
            public boolean mapEquals(EightPuzzle test){
                    for(int i = 0 ; i < this.puzzle.length; i++)
                    {
                            if(this.puzzle[i] != test.puzzle[i])
                                    return false;
                    }
                    return true;
            }

    } 
```

## 项目1

```
import java.util.*;

public class proj1 {

        /**
         * @param args
         */

        public static void main(String[] args) {

                int[] p1d = {1, 4, 2, 3, 0, 5, 6, 7, 8};
                int hueristic = 2;
                EightPuzzle start = new EightPuzzle(p1d, hueristic, 0);
                int[] win = { 0, 1, 2,
                                          3, 4, 5,
                                          6, 7, 8};
                EightPuzzle goal = new EightPuzzle(win, hueristic, 0);

                astar(start, goal);

        }

        public static void astar(EightPuzzle start, EightPuzzle goal)
        {
                if(start.inversions() % 2 == 1)
                {
                        System.out.println("Unsolvable");
                        return;
                }
//              function A*(start,goal)
//           closedset := the empty set                 // The set of nodes already evaluated.
                LinkedList<EightPuzzle> closedset = new LinkedList<EightPuzzle>();
//           openset := set containing the initial node // The set of tentative nodes to be evaluated. priority queue
                PriorityQueue<EightPuzzle> openset = new PriorityQueue<EightPuzzle>();

                openset.add(start);

                while(openset.size() > 0){
//               x := the node in openset having the lowest f_score[] value
                        EightPuzzle x = openset.peek();

//               if x = goal
                        if(x.mapEquals(goal))
                        {
//                   return reconstruct_path(came_from, came_from[goal])
                                 Stack<EightPuzzle> toDisplay = reconstruct(x);
                                 System.out.println("Printing solution... ");
                                 System.out.println(start.toString());
                                 print(toDisplay);
                                 return;

                        }
//               remove x from openset
//               add x to closedset
                        closedset.add(openset.poll());
                        LinkedList <EightPuzzle> neighbor = x.getChildren();
//               foreach y in neighbor_nodes(x)                
                        while(neighbor.size() > 0)
                        {
                                EightPuzzle y = neighbor.removeFirst();
//                   if y in closedset
                                if(closedset.contains(y)){
//                       continue
                                        continue;
                                }
//                   tentative_g_score := g_score[x] + dist_between(x,y)
//      
//                   if y not in openset
                                if(!closedset.contains(y)){
//                       add y to openset
                                        openset.add(y);
//                      
                                }
//                 
                        }
//               
                }
        }

        public static void print(Stack<EightPuzzle> x)
        {
                while(!x.isEmpty())
                {
                        EightPuzzle temp = x.pop();
                        System.out.println(temp.toString());
                }
        }

        public static Stack<EightPuzzle> reconstruct(EightPuzzle winner)
        {
                Stack<EightPuzzle> correctOutput = new Stack<EightPuzzle>();

                while(winner.getParent() != null)
                {
                correctOutput.add(winner);
                winner = winner.getParent();
                }

                return correctOutput;
        }

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T04:14:39.763

这是一个建议。我的计时器为您的示例报告 0 毫秒。在这里给出的更难的谜题需要 31 步才能完成，需要 96 毫秒。

A`HashSet`对于封闭集来说比你的链表更有意义。它具有 O(1) 时间插入和成员资格测试，其中您的链表需要的时间与列表的长度成正比，而列表的长度在不断增长。

您正在使用额外的数据结构和代码，使您的程序比所需的更复杂和更慢。多想，少写代码，研究别人的好代码来克服这个问题。我的并不完美（从来没有代码是完美的），但它是一个开始的地方。

我使用从每个图块的当前位置到其目标的曼哈顿距离的最大值作为启发式方法。启发式的选择不会影响解决方案中的步骤数，但*会*极大地影响运行时间。例如，h=0 将产生蛮力广度优先搜索。

请注意，要使 A* 提供最佳解决方案，启发式算法永远不能*高估*达到目标的实际最小步数。如果这样做，则解决方案可能不是最短的解决方案。我不肯定“反转”启发式具有此属性。

```
package eightpuzzle;

import java.util.Arrays;
import java.util.Comparator;
import java.util.HashSet;
import java.util.PriorityQueue;

public class EightPuzzle {

    // Tiles for successfully completed puzzle.
    static final byte [] goalTiles = { 0, 1, 2, 3, 4, 5, 6, 7, 8 };

    // A* priority queue.
    final PriorityQueue <State> queue = new PriorityQueue<State>(100, new Comparator<State>() {
        @Override
        public int compare(State a, State b) { 
            return a.priority() - b.priority();
        }
    });

    // The closed state set.
    final HashSet <State> closed = new HashSet <State>();

    // State of the puzzle including its priority and chain to start state.
    class State {
        final byte [] tiles;    // Tiles left to right, top to bottom.
        final int spaceIndex;   // Index of space (zero) in tiles  
        final int g;            // Number of moves from start.
        final int h;            // Heuristic value (difference from goal)
        final State prev;       // Previous state in solution chain.

        // A* priority function (often called F in books).
        int priority() {
            return g + h;
        }

        // Build a start state.
        State(byte [] initial) {
            tiles = initial;
            spaceIndex = index(tiles, 0);
            g = 0;
            h = heuristic(tiles);
            prev = null;
        }

        // Build a successor to prev by sliding tile from given index.
        State(State prev, int slideFromIndex) {
            tiles = Arrays.copyOf(prev.tiles, prev.tiles.length);
            tiles[prev.spaceIndex] = tiles[slideFromIndex];
            tiles[slideFromIndex] = 0;
            spaceIndex = slideFromIndex;
            g = prev.g + 1;
            h = heuristic(tiles);
            this.prev = prev;
        }

        // Return true iif this is the goal state.
        boolean isGoal() {
            return Arrays.equals(tiles, goalTiles);
        }

        // Successor states due to south, north, west, and east moves.
        State moveS() { return spaceIndex > 2 ? new State(this, spaceIndex - 3) : null; }       
        State moveN() { return spaceIndex < 6 ? new State(this, spaceIndex + 3) : null; }       
        State moveE() { return spaceIndex % 3 > 0 ? new State(this, spaceIndex - 1) : null; }       
        State moveW() { return spaceIndex % 3 < 2 ? new State(this, spaceIndex + 1) : null; }

        // Print this state.
        void print() {
            System.out.println("p = " + priority() + " = g+h = " + g + "+" + h);
            for (int i = 0; i < 9; i += 3)
                System.out.println(tiles[i] + " " + tiles[i+1] + " " + tiles[i+2]);
        }

        // Print the solution chain with start state first.
        void printAll() {
            if (prev != null) prev.printAll();
            System.out.println();
            print();
        }

        @Override
        public boolean equals(Object obj) {
            if (obj instanceof State) {
                State other = (State)obj;
                return Arrays.equals(tiles, other.tiles);
            }
            return false;
        }

        @Override
        public int hashCode() {
            return Arrays.hashCode(tiles);
        }
    }

    // Add a valid (non-null and not closed) successor to the A* queue.
    void addSuccessor(State successor) {
        if (successor != null && !closed.contains(successor)) 
            queue.add(successor);
    }

    // Run the solver.
    void solve(byte [] initial) {

        queue.clear();
        closed.clear();

        // Click the stopwatch.
        long start = System.currentTimeMillis();

        // Add initial state to queue.
        queue.add(new State(initial));

        while (!queue.isEmpty()) {

            // Get the lowest priority state.
            State state = queue.poll();

            // If it's the goal, we're done.
            if (state.isGoal()) {
                long elapsed = System.currentTimeMillis() - start;
                state.printAll();
                System.out.println("elapsed (ms) = " + elapsed);
                return;
            }

            // Make sure we don't revisit this state.
            closed.add(state);

            // Add successors to the queue.
            addSuccessor(state.moveS());
            addSuccessor(state.moveN());
            addSuccessor(state.moveW());
            addSuccessor(state.moveE());
        }
    }

    // Return the index of val in given byte array or -1 if none found.
    static int index(byte [] a, int val) {
        for (int i = 0; i < a.length; i++)
            if (a[i] == val) return i;
        return -1;
    }

    // Return the Manhatten distance between tiles with indices a and b.
    static int manhattanDistance(int a, int b) {
        return Math.abs(a / 3 - b / 3) + Math.abs(a % 3 - b % 3);
    }

    // For our A* heuristic, we just use max of Manhatten distances of all tiles.
    static int heuristic(byte [] tiles) {
        int h = 0;
        for (int i = 0; i < tiles.length; i++)
            if (tiles[i] != 0)
                h = Math.max(h, manhattanDistance(i, tiles[i]));
        return h;
    }

    public static void main(String[] args) {

        // This is a harder puzzle than the SO example
        byte [] initial = { 8, 0, 6, 5, 4, 7, 2, 3, 1 };

        // This is taken from the SO example.
        //byte [] initial = { 1, 4, 2, 3, 0, 5, 6, 7, 8 };

        new EightPuzzle().solve(initial);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:27:53.967

发现了问题。这是用于检查节点是否存在于**封闭集中的条件**

```
if(!closedset.contains(y)) 
```

一个linkedlist(closeset)通过调用类的**equals()来执行****contains()**，在这个例子中**是EightPuzzle**。**EightPuzzle**中的equals函数定义如下

 ******```
public boolean equals(EightPuzzle test){

                if(this.f_n != ((EightPuzzle)test).getF_n())
                       return false;
            //System.out.println("in equals");
                for(int i = 0 ; i < this.puzzle.length; i++)
                {
                        if(this.puzzle[i] != ((EightPuzzle)test).puzzle[i])
                                return false;
                }
                return true;
        } 
```

但是这个函数从来没有被调用过，因为如果你想覆盖**Object类的****equals()**正确的签名应该是

 **```
 public boolean equals(Object test). 
```

**还需要一个更改**- 注释 equals() 的前两行

我得到了答案。但是对于某些输入，代码仍然需要**25-30**秒。A* 不会出现这种情况。**小程序在0.003 秒内**解决了这个难题。如果有人知道如何提高性能，请告诉我。
我会把赏金奖励给那个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:38:08.303

从另一个论坛得到优化的答案。

分别更改`openset.size()`和`neightbor.size()`
到
`openset.isEmpty()`和`neightbor.isEmpty()`。

`size()`遍历整个列表，随着列表变大，它需要越来越多的时间。并且还更改 `EightPuzzle x = openset.peek();`
为
`EightPuzzle x = openset.poll();`并重用 x，而不是调用`peek()`和`poll()`

现在它在内部处理`1 second`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T05:46:03.317

我相信您的代码没有任何问题，但是请注意，并非所有 8 谜题都可以解决！所以首先检查“{8,2,7,5,1,6,3,0,4} 和 {3,1,6,8,4,5,7,2,0}”是否是可解的 8-puzzles .********

# regex - 需要细化正则表达式

> ID：13053465
> 
> 赞同：0
> 
> 时间：2012-10-24T16:27:10.117
> 
> 标签：regex

我正在尝试解析两个机场代码。它们之间可能有也可能没有空格或字符。

样本数据：

```
DFW A LAX

DFWLAX

DFW 1 LAX

DFW  LAX 
```

这是我正在使用的正则表达式：

```
@"^([A-Z]{3})\s?\w?\s?([A-Z]{3})" 
```

我在前三个例子上得到了匹配。问题是我没有得到两者之间只有空格的匹配，就像第四个例子一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:31:20.177

如果您只是让两个机场代码之间的部分为 0 个或更多字符，那应该可以解决问题：

```
@"^([A-Z]{3}).*([A-Z]{3})$" 
```

# c++ - flex 和 bison：C++ 用户定义类

> ID：13053472
> 
> 赞同：0
> 
> 时间：2012-10-24T16:27:36.130
> 
> 标签：c++, class, compiler-construction, bison, flex-lexer

我不明白如何将 C++ 用户定义的类嵌入到`bison`解析器中。这是我所拥有的（只是一些必要的部分；如果您需要，我可以发布所有代码）。

`scanner.l`

```
%{
#include "parser.tab.h"
#include "types.h"
#include <iostream>
#include <string>
#define YY_DECL extern "C" int yylex()
using namespace std;
int chars = 0;
int words = 0;
int lines = 0;
extern "C" {
  int yylex(void);
} /* extern "C" */
%}

%%
"none" {
  yylval.none_value = none_type();
  return NONE;
} /* none type */

{DIGIT_BIN}|{DIGIT_OCT}|{DIGIT_DEC}|{DIGIT_HEX} {
  yylval.int_value = atoi(yytext);
  return INT;
} /* int type */ 
```

`parser.y`

```
%{
#include "types.h"
#include <iostream>
using namespace std;
void yyerror(const char *error) {
  cerr << error << endl;
} /* error handler */
extern "C" {
  int yylex(void);
  int yyparse(void);
  int yywrap() { return 1; }
} /* extern "C" */
%}

%union {
  none_type   none_value; /* HERE IS WHAT I WANT */
  int         int_value;
} /* union */

%token <none_value>      NONE
%token <int_value>       INT 
```

`types.h`

```
#include <iostream>

class none_type {
  public:
    none_type(void);
    ~none_type();
}; /* none_type */ 
```

如您所见，这里的代码并不完整，但应该足以描述我想要的内容。我对默认 C++ 类型所做的一切都运行良好；我可以实现自己的课程吗？

编译器返回这样的错误：

```
parser.y:20:3: error: 'none_value' does not name a type
In file included from scanner.l:3:0:
parser.y:20:3: error: 'none_value' does not name a type
scanner.l: In function 'int yylex()':
scanner.l:54:32: error: cannot convert 'none_type' to 'int' in assignment
make: *** [caesar] Error 1 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:20:46.273

当我用 bison/g++ 编译你的代码时，我得到了错误：

```
parser.y:16:15: error: member ‘none_type YYSTYPE::none_value’ with constructor not allowed in union
parser.y:16:15: error: member ‘none_type YYSTYPE::none_value’ with destructor not allowed in union
parser.y:16:15: note: unrestricted unions only available with -std=c++0x or -std=gnu++0x 
```

它可以准确地告诉您问题所在——您不能将非 POD 类型放在联合中，因为编译器无法判断要调用哪个 ctor/dtor。请注意您可以在 C++ 11 中执行此操作的注释，但这并没有真正的帮助，因为在这种情况下，它不会自动为您调用 ctor/dtor，因此不会正确地构造或销毁东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:54:22.183

如果您想尝试将真实对象放入堆栈中，请查看 Bison 当前的 master 分支，您可以在其中运行以下示例

```
%token <::std::string> TEXT;
%token <int> NUMBER;
%token END_OF_FILE 0;
%type <::std::string> item;
%type <::std::list<std::string>> list;
%printer { yyoutput << $$; } <int> <::std::string> <::std::list<std::string>>;

%%

result:
  list  { std::cout << $1 << std::endl; }
;

list:
  /* nothing */ { /* Generates an empty string list */ }
| list item     { std::swap ($$, $1); $$.push_back ($2); }
;

item:
  TEXT          { std::swap ($$, $1); }
| NUMBER        { $$ = string_cast ($1); }
;
%%

// The yylex function providing subsequent tokens:
// TEXT         "I have three numbers for you:"
// NUMBER       1
// NUMBER       2
// NUMBER       3
// TEXT         " and that's all!"
// END_OF_FILE

static
yy::parser::symbol_type
yylex ()
{
  static int stage = -1;
  ++stage;
  yy::parser::location_type loc(0, stage + 1, stage + 1);
  switch (stage)
  {
    case 0:
      return yy::parser::make_TEXT ("I have three numbers for you.", loc);
    case 1:
    case 2:
    case 3:
      return yy::parser::make_NUMBER (stage, loc);
    case 4:
      return yy::parser::make_TEXT ("And that's all!", loc);
    default:
      return yy::parser::make_END_OF_FILE (loc);
  }
} 
```

获得此功能的可能用户的意见将是最有用的。例如在 gnu.org 上的 help-bison。请参阅[https://savannah.gnu.org/git/?group=bison](https://savannah.gnu.org/git/?group=bison)以获取对存储库的 Git 访问权限。

# javascript - 串联内的变量赋值

> ID：13053478
> 
> 赞同：0
> 
> 时间：2012-10-24T16:27:55.430
> 
> 标签：javascript, jquery, onclick, concatenation

我有一个全局变量`var num_tab=1;`，一个创建链接 a href 的函数：

```
function Addsomething()
{
$("#tout").html("<a style=\""+"margin-left:-20px;"+"\" onClick=\"eval(num_tab=2)\"  href=\""+"#tab1"+"\" data-toggle=\""+"tab"+"\">SELECT</a>");
Bla,Bla..

$("#champ1").append('<li id=\"1\" class="champ" onclick="insertAtCaret(&quot;sousTab'+num_tab+'&quot;);" value=\"1\">1</li>');

} 
```

我想要做的是创建一个href，单击它会更改变量num_tab的值，但是如果您可以看到href位于jquery html（）中，这让我对如何为变量赋值感到困惑。我几乎尝试了一切：`onClick=\"num_tab=2\"`，`onClick=\""+num_tab+"=2\"`

实际上我尝试了一些东西：当我写 onclick='num_tab=2;alert("+num_tab+");' 我仍然得到 num_tab 的初始值，似乎它更像是局部和全局变量的问题，我还无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:32:34.017

请不要使用`eval()`. 它不安全，不适合这项工作。只需为 onclick 分配一个功能：

```
$("#tout").html("<a onclick='set_num_tab(2)'">);   //fill out the rest of this line

function set_num_tab(value) {
    num_tab = value;
} 
```

这应该让你知道如何去做。顺便说一句，你没有理由不能在这样的 onclick 周围使用单引号。

或者，这将起作用：

```
$("#tout").html("<a onclick='num_tab=2'">); 
```

但这很混乱。我尽量避免使用内联 JavaScript。

# javascript - 通过路径名中的变量名访问映射

> ID：13053479
> 
> 赞同：4
> 
> 时间：2012-10-24T16:27:57.397
> 
> 标签：javascript

我有一个地图对象，其中包含有关人员的数据列表。每个人的名字都是独一无二的。每个人的数据字段可能不包含相同类型的信息（即——Joey 包含一个日期字段，但 Jill 没有）。

我想知道是否可以通过使用变量名作为地图路径的一部分来访问地图的某个部分。考虑以下：

```
var data = {
  'Joey': {
    'id': '912',
    'date': 'May 14 2012',
  },
  'Jill': {
    'id': '231',
    'login': 'JillM',
  }
}

var name="Joey";
var joeyDate = data. + name + .date; //This does not work. Is there an alternative? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T16:30:11.343

使用此语法：

```
data[name]["date"] 
```

这是 的替代方法`data.Joey`，它也应该可以工作，但是是静态的。

您还可以使用：

```
data[name].date 
```

不同之处正是您要查询的内容 -`[]`表示法更适合动态检索，并且如果使用点表示法，Javascript 可能不允许使用无效键。例如，如果您有一个“出生日期”键，则不能使用`data[name].date-born`，但可以使用`data[name]["date-born"]`.

使用它的一个例子是：

```
for (name in data) {
    console.log(data[name].date);
} 
```

但当然，`date`必须是一个属性（不是“吉尔”），否则`undefined`将被返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-09T07:23:41.523

另一种方法：`mapName.get(keyName).propertyName`

在你的情况下：`data.get(name).date`

# android - 布局中资源的使用

> ID：13053480
> 
> 赞同：1
> 
> 时间：2012-10-24T16:27:58.630
> 
> 标签：android, android-layout, android-resources

我不想在我的 layout.xml 中指定硬编码的测试大小值，因此我使用以下规范：

```
android:layout_height="@integer/intervalViewHt" 
```

和@integer/intervalViewHt 值如下：

```
<integer name="medium">15</integer> 
```

现在，同时膨胀 android 正在产生一个问题，说它不能膨胀视图。我想实际指定值，`dp`所以实际值应该像

```
android:layout_height="15dp" 
```

有人能帮我一下吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:29:25.447

您正在寻找的是[“维度”](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)而不是普通整数。

宣言：

```
<dimen name="intervalViewHt">15dp</dimen> 
```

用法：

```
android:layout_height="@dimen/intervalViewHt" 
```

查看给定的链接以获取 Android 文档中的更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:56:12.773

我在不同设备上使用类似这样的文本大小。它是基于java的，而不是xml。

```
tvOutput.setTextSize(TypedValue.COMPLEX_UNIT_DP, getResource().getInteger(R.integer.medium)); 
```

我还没有测试过代码，所以你可能不得不使用它。我相信你可以做类似的事情。

```
button1.setHeight(TypedValue.COMPLEX_UNIT_DP, getResource().getInteger(R.integer.medium)); 
```

虽然我还没有尝试过，但您可能需要与*TypedValue不同的东西*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T16:32:40.883

如果你给它一个字符串而不是一个整数怎么办。即在字符串资源中，您有一个引用的字符串“15dp”

# c# - 将文件从外部源传递到 .ashx 处理程序？

> ID：13053481
> 
> 赞同：2
> 
> 时间：2012-10-24T16:27:57.897
> 
> 标签：c#, httprequest, filestream, ashx

我的网络服务器上有一个处理程序。我使用它从处理程序所在站点上的上传工具路由图像。

我通过使用表单的提交操作来做到这一点：

```
<form id="fileupload" action="~/handlers/Upload.ashx" method="post" enctype="multipart/form-data"> 
```

现在，我需要公开这个处理程序以供外部使用（来自应用程序或不是我的网站的其他来源等）。

我尝试构建一个使用相同方法的单独测试项目，只有表单操作是我的处理程序的 url：

```
<form id="fileupload" action="http://mywebsite/handlers/Upload.ashx" method="post" enctype="multipart/form-data"> 
```

另外，我尝试手动构建请求并传递流：

```
using (var stream = File.OpenRead(FILE_PATH))
{
     var httpRequest = WebRequest.Create(UPLOADER_URI) as HttpWebRequest;
     httpRequest.Method = "POST";
     stream.Seek(0, SeekOrigin.Begin);
     stream.CopyTo(httpRequest.GetRequestStream());

     var httpResponse = httpRequest.GetResponse();
     StreamReader reader = new StreamReader(httpResponse.GetResponseStream());
     var responseString = reader.ReadToEnd();

     //Check the responsestring and see if all is ok
 } 
```

在处理程序所在的站点上使用表单的第一种方法按我的预期工作。:)

在外部使用该方法根本不会收到响应。

C# 方法将处理程序击中到对用户进行身份验证的点，但在那之后我不相信文件流被正确传递。我有一堆错误处理来检查文件上的各种属性。响应应该写回这些错误，但它总是空的。

任何建议或意见将不胜感激。

感谢您的帮助！

编辑：

这是 Web 配置中的处理程序注册：

```
<add name="Upload" path="Upload.ashx" verb="*" type="mynamespace.Upload" resourceType="Unspecified" preCondition="integratedMode" /> 
```

编辑：

我设置了我的远程调试器来确定处理程序在我的 C# 示例中被命中。但是请求中没有文件。stream.CopyTo() 一定不是我正在寻找的正确调用？

有什么想法吗？

编辑：

我稍微修改了文件的传递方式。但是当我遇到处理程序时，request.Files 仍然是空的。这是修改后的代码：

```
const string FILE_PATH = "C:\\image.jpg";
string UPLOADER_URI = string.Format("http://localhost//handlers/Upload.ashx");

using (var stream = File.OpenRead(FILE_PATH))
{
     var httpRequest = WebRequest.Create(UPLOADER_URI) as HttpWebRequest;
     httpRequest.Method = WebRequestMethods.Http.Post;
     httpRequest.AllowWriteStreamBuffering = true;
     httpRequest.ContentType = "binary/octet-stream";

     stream.Seek(0, SeekOrigin.Begin);

     byte[] bArray = new byte[stream.Length];

     stream.Read(bArray, 0, Convert.ToInt32(stream.Length));

     httpRequest.ContentLength = bArray.Length;

     Stream rStream = httpRequest.GetRequestStream();
     rStream.Write(bArray, 0, bArray.Length);
     rStream.Close();

     var httpResponse = httpRequest.GetResponse();
     StreamReader reader = new StreamReader(httpResponse.GetResponseStream());
     var responseString = reader.ReadToEnd();

     //Check the responsestring and see if all is ok
  } 
```

所以现在我将文件转换为 a`byte[]`然后将其写入`byte[]`请求流。有点惊讶流没有像我预期的那样被写入。这似乎是直截了当的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:06:46.283

我要检查的第一件事是 web.config 中的 Handler 注册配置。例如，maybe 只允许接收 POST 而不允许接收 GET。在文件上传场景中使用 POST，但在您描述的另一种场景中，您看起来像是在使用 GET。也许这就是为什么忽略您的要求。

高温高压

# c# - 不一致的可访问性错误（c#）

> ID：13053482
> 
> 赞同：0
> 
> 时间：2012-10-24T16:27:59.217
> 
> 标签：c#

我多年来一直是 vb 开发人员，但*刚*开始使用 c#。

我不确定这个错误是什么意思或如何解决它。我以前的所有搜索都没有返回任何对我有帮助的东西。你们能帮忙吗？

这是错误：

可访问性不一致：参数类型“ServeArticle.ReturnStyle”的可访问性低于方法“ServeArticle.DisplayArticle(int, string, ServeArticle.ReturnStyle)”

这是我的代码：

```
public partial class ServeArticle : BaseWebPage
{

    protected mArticle objArticle;
    protected string strHTML;

    enum ReturnStyle:int
    {
        XML_SingleArticle = 4,
        XML_MultiArticle = 5
    };

    protected void Page_Load(object sender, EventArgs e)
    {
            DisplayArticle(123, 'p123', (ReturnStyle)intReturnStyle);
        }

    }

    protected void DisplayArticle(int intPublisherID, string strPublisherKey, ReturnStyle intReturnStyle)
    {
        try
        {..... 
```

任何帮助深表感谢 ！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:30:01.597

你的`ReturnStyle`枚举是`private`，但它必须是`protected`或者`public`因为`DisplayArticle`方法是`protected`。它必须*至少*与您的方法一样易于访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:37:03.893

默认情况下`enum ReturnStyle`是`private`，因此您不能将其用作`DisplayArticle`方法的参数。解决方案：使用`public`or`protected`修饰符 ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:37:52.940

没有任何访问修饰符的枚举`ReturnStyle`是私有的（这是默认的访问修饰符），因此您会收到此错误，因为`DispalyArticle`它是受保护的。任何类都可以继承自`ServeArticle`并通过这样做将有权访问`DisplayArticle()`作为 `ReturnStyle`参数的。

# c# - 根据请求从 MVC Web api 返回 xml 或 json

> ID：13053485
> 
> 赞同：26
> 
> 时间：2012-10-24T16:28:04.270
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, asp.net-mvc-routing, wcf-web-api

给定以下 webapiconfig；

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

和这个控制器；

```
 public class ProductsController : ApiController
    {
         Product[] _products = new Product[] 
        { 
            new Product { Id = 1, Name = "Tomato Soup", Category = "Groceries", Price = 1 }, 
            new Product { Id = 2, Name = "Yo-yo", Category = "Toys", Price = 3.75M }, 
            new Product { Id = 3, Name = "Hammer", Category = "Hardware", Price = 16.99M } 
        };

        public IEnumerable<Product> GetAllProducts()
        {
            return _products;
        }
    } 
```

使用该 URL `http://localhost/api/Products`，我得到一个 XML 格式的产品列表。

我想做的是可以选择根据请求返回 json 或 xml。所以对于json，它会是；

```
http://localhost/api/Products.json 
```

对于 XML，它会是；

```
http://localhost/api/Products.xml 
```

同样地;

```
http://localhost/api/Products.json/1/
http://localhost/api/Products.xml/1/ 
```

这可能吗？我将如何实现此功能？

另一种选择是：

```
http://localhost/api/json/Products/ 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-24T16:36:54.330

是的，您可以通过`AddUriPathExtensionMapping`

您可以像这样创建路由：

```
routes.MapHttpRoute(
  name: "Api UriPathExtension",
  routeTemplate: "api/{controller}.{extension}/{id}",
  defaults: new { id = RouteParameter.Optional, extension = RouteParameter.Optional }
);

routes.MapHttpRoute(
  name: "Api UriPathExtension ID",
  routeTemplate: "api/{controller}/{id}.{extension}",
  defaults: new { id = RouteParameter.Optional, extension = RouteParameter.Optional }
); 
```

然后你需要扩展格式化程序：

```
 config.Formatters.JsonFormatter.AddUriPathExtensionMapping("json", "application/json");
  config.Formatters.XmlFormatter.AddUriPathExtensionMapping("xml", "text/xml"); 
```

确保添加对 的引用`System.Net.Http.Formatting`，因为这些方法是扩展方法，默认情况下智能感知不会看到它们。

请记住，在此示例中，您仍然必须使用适当的内容类型发出请求。但是，如果您想通过浏览器地址栏直接使用这些内容，您可以映射到“text/html”。

我不久前写了一篇关于这一切的博客文章 - 这应该会有所帮助并带您了解更多细节[http://www.strathweb.com/2012/04/different-mediatypeformatters-for-same-mediaheadervalue-in-asp-网络网络API/](http://www.strathweb.com/2012/04/different-mediatypeformatters-for-same-mediaheadervalue-in-asp-net-web-api/)

# objective-c - UIScrollView + UIImage 和缩放：不流畅

> ID：13053486
> 
> 赞同：0
> 
> 时间：2012-10-24T16:28:05.737
> 
> 标签：objective-c, ios, uiscrollview, uiimage, ios6

我有视图控制器，里面有一个`UIScrollView`, 用于管理缩放，还有一个`UIImage`. 现在我正在用`UIScrollViewDelegate`委托和方法处理缩放效果`viewForZoomingInScrollView:`......但结果很差，绝对不是流体！

这是我的代码：

```
#import "ImageViewController.h"

@interface ImageViewController () <UIScrollViewDelegate, UIActionSheetDelegate>
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;

@end

@implementation ImageViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    self.scrollView.delegate = self;
    self.scrollView.maximumZoomScale = 3.0;

    // some code
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return self.imageView;
}
// last update
- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
    if ([self.scrollView zoomScale] < 1.0) {
        [self.scrollView setZoomScale:1.0];
    }
}

// some other methods...

@end 
```

这是故事板视图：

![](../Images/44723bbc808c14461bc83698aaa70a71.png) ![](../Images/a9e3515c080484827d582db1769a7ee0.png)

我没有使用捏手势识别器。所有图像都非常小，例如 640x480。

谢谢

*PS 这是[UICollectionView 和 images](https://stackoverflow.com/questions/13049056/uicollectionview-and-images)的继续。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T15:36:49.080

查看我编写的本[教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)。第一部分正是您需要实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:29:05.390

这已在其他帖子中解决：

[使用自动布局缩放图像视图：](https://stackoverflow.com/questions/14026807/uiscrollview-zooming-with-auto-layout/16159139#16159139)

[自动布局或弹簧和支柱的居中逻辑](https://stackoverflow.com/questions/9197572/using-uiscrollview-when-zooming-out-how-can-i-keep-the-content-view-at-the-cen/16310804#16310804)

# java - 一旦执行异步任务任务，变量就会丢失数据

> ID：13053487
> 
> 赞同：0
> 
> 时间：2012-10-24T16:28:08.217
> 
> 标签：java, android, multithreading, garbage-collection, android-asynctask

我有一个 AsyncTask 子类的活动。执行异步任务后，我会丢失所有变量。我在调试模式下单步执行我的代码。一旦“MyAsync().execute()”完成，“formatedURL”变量（以及所有其他变量）就没有值了。在此之前，它们具有正确的值。然后，由于某种奇怪的原因，他们失去了价值观。我是在犯一个简单的 OO 错误，还是垃圾收集在做我不知道的事情。

```
public class NearbyList extends Activity {

    double lat;
    double lng;
    String restName;
    GPSHandling gps;
    String formatedURL;
    JSONObject jobject;
    ArrayList<HashMap<String, String>> listOfHM;
    ArrayList<String> listOfValues;
    String currentName;
    ListView lv;
    Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nearby_places_list);

        context = getApplicationContext();
        gps = new GPSHandling(this);
        lat = gps.getMyLatitude();
        lng = gps.getMyLongitude();
        restName ="";
        formatedURL = GooglePlacesStuff.placesURL(lat, lng, 16000, "food", restName, true);  //make a proper url. next step is to get a JSON object from this.

        new MyAsync().execute();// in order to run networking it must not be done in the UIthread. I use async task to take care of this in order to 
           //reduce the code of doing complex threading since this is a simple calculation
    }
        class MyAsync extends AsyncTask<Void, Integer, Boolean>{
            @Override
            protected Boolean doInBackground(Void... params) {
                try {
                    jobject = GooglePlacesStuff.getTheJSON(formatedURL);
                    listOfHM = JSONextractor.getJSONHMArrayL(jobject);
                    // iterate through and get the names of the nearby restaurants from the array of hasmap strings
                    for(int i =0 ; i < listOfHM.size() ;i++ ){
                        currentName = listOfHM.get(i).get(JSONextractor.TAG_NAME);
                        listOfValues.add(currentName);
                    }
                    return true;
                } catch (Exception e){
                    Log.e("Nearby List Activity", "exception", e);
                    return false;}
            }

            @Override
            protected void onPostExecute(Boolean result){
                super.onPostExecute(result);
                if (result){
                    ListAdapter adapter = new SimpleAdapter(context, listOfHM, R.layout.nearby_places_list, new String[]{JSONextractor.TAG_NAME,
                            JSONextractor.TAG_VICINITY, JSONextractor.TAG_GEO_LOC_LAT}, new int[]{ R.id.name, R.id.vicinity, R.id.phone});

                    // adding data to listview
                    lv.setAdapter(adapter);
                } else{
                    Toast.makeText(getApplicationContext(), "Need Internet & GPS access for this to work", Toast.LENGTH_LONG).show();
                }
                gps.stopUsingGPS();  // stop using the gps after i get the list to save on resource
            }
        }
} 
```

Edit1：看起来它正在尝试在 doinbackground() 方法中多次运行“super.onCreate(Bundle savedInstanceState)”

Edit2：如果我将值设为静态，它们就不会丢失。很奇怪，即使是在异步任务中分配的变量“jobject”也不会接受分配，除非它是一个静态变量......从来没有见过这样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:29:29.023

当您说它们没有值时，您是在 AsyncTask 中检查它们吗？如果是这样，这可能是原因（来自[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)）：

> **内存可观察性**
> 
> AsyncTask 保证所有回调调用都以这样一种方式同步，即以下操作在没有显式同步的情况下是安全的。
> 
> *   在构造函数或 onPreExecute() 中设置成员字段，并在 doInBackground(Params...) 中引用它们。
> *   在 doInBackground(Params...) 中设置成员字段，并在 onProgressUpdate(Progress...) 和 onPostExecute(Result) 中引用它们。

基本上，您不应该从 doInBackground() 访问您的实例变量，因为它不是线程安全的。就像函数说的那样，它在一个单独的（后台）线程中运行。您可以通过使它们成为静态（您尝试过）或同步它们来解决它，但最好按照预期的方式使用 AsyncTask 。

所以我认为你应该做到以下几点：

1.  将 formatedURL 作为参数传递给 AsyncTask

2.  从 doInBackground() (listOfHM) 返回 ArrayList<HashMap<String, String>>

3.  在 onPostExecute() 中使用传入的 ArrayList<HashMap<String, String>>

4.  我还将在 onCreate 中另外设置 ListAdapter，并仅更新支持 ListAdapter onPostExecute() 的数据。但我不会在这里讨论这个问题，因为这可能是一个单独的问题。这个是可选的。

代码：

```
class MyAsync extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>>> {
    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(String... urls) {
        ArrayList<HashMap<String, String>> listOfHM = null;
        if (urls != null && urls.length > 0 && urls[0] != null) {
            String formattedUrl = urls[0];
            try {
                JSONObject jobject = GooglePlacesStuff.getTheJSON(formattedURL);
                listOfHM = JSONextractor.getJSONHMArrayL(jobject);
            } catch (Exception e) {
                // log error
            }
        }
        return listOfHM;
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> listOfHM){
        if (listOfHM != null && !listOfHM.isEmpty()) {
            // iterate through and get the names of the nearby restaurants from the array of hasmap strings
            for(int i =0 ; i < listOfHM.size() ;i++ ){
                String currentName = listOfHM.get(i).get(JSONextractor.TAG_NAME);
                listOfValues.add(currentName);
            }
            // do your adapter stuff
        }
        gps.stopUsingGPS();  // stop using the gps after i get the list to save on resource
    }
} 
```

在你的 onCreate() 你会做

```
new MyAsync(formattedUrl).execute(); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:29:22.023

尝试分离功能和职责，在你的异步类中创建一个构造函数并将活动作为参数传递，就像在线程中维护上下文以避免任何内存泄漏一样，在活动中定义一些函数来完成后执行任务数据只是“活”在活动中（定义适配器，将适配器分配给列表视图，停止 gps 使用等），在 onpostexecute 中只需调用 mActiviy.doAfterTaskFinish()。关键是分开责任，这可以帮助您找到问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:10:41.450

事实证明，我问了一个关于我的应用程序中实际上没有发生的事情的问题。显然，当您使用 Async Task 类时，on create 方法中的所有变量以及 onPostExecute() 和 doInBackground() 中的所有变量（文件中的几乎所有变量）都不会显示值（除非您使它们成为静态的），即使它们在您逐步执行这些方法时确实具有值。我不知道为什么会这样。我只是太依赖使用调试器来检查我的变量是什么。对困惑感到抱歉。

# php - 为我的新闻系统实施标签系统

> ID：13053488
> 
> 赞同：0
> 
> 时间：2012-10-24T16:28:09.780
> 
> 标签：php, mysql, tags, full-text-search

我正在尝试为我的新闻系统构建一个标签系统。我已经完成了这样的表结构：

```
CREATE TABLE article_tags (
id int(11) unsigned NOT NULL auto_increment,
tag varchar (255) not null,
primary key (id));

CREATE TABLE article_tags_map (
id int(11) unsigned NOT NULL auto_increment,
tag_id int(11) unsigned not null,
article_id int(11) unsigned not null,
primary key (id)); 
```

现在我只是想知道将全文索引添加到 article_tags 表中的标签列是否有意义？

```
$search = $_POST['search_string'];
$search_result = mysql_query ("SELECT *,  MATCH(tag) AGAINST ($search) AS score 
from article_tags
WHERE MATCH (tag) AGAINST($search) 
order by score desc"); 
```

还是使用 LIKE 和 % 通配符会更好？如果我要使用全文搜索，我不确定我应该为分数使用什么阈值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:32:18.503

尝试这个。

```
SELECT *
from article_tags
WHERE tag like '%$search%'
order by tag desc 
```

或者

```
 SELECT *
    from article_tags
    WHERE match(tag) against ('%$search%')
    order by tag desc 
```

也看看这个页面，他们谈论全文搜索： [http ://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

# excel - VBA将Word Doc中下拉列表的选定值复制到特定的Excel单元格中

> ID：13053491
> 
> 赞同：2
> 
> 时间：2012-10-24T16:28:15.987
> 
> 标签：excel, vba, ms-word, dropdownbox

我正在尝试从 Word 表单上选择的下拉框中返回文本。

doc 这个词是一个调查，其中包含一个带有多个下拉框的表单。我想将调查对象从每个下拉列表中选择的值复制到 Excel 中的特定单元格中。

我尝试过诸如：

```
Activedocument.DropDowns("DropDown1").Value;
Activedocument.DropDowns("DropDown1").Text; 
Activedocument.DropDowns("DropDown1").SelectedValue; 
Activedocument.Shapes("DropDown1").Value etc etc. 
```

我的代码的当前适用部分：

```
Dim dd14 As FormFields
With ActiveDocument
Set dd14 = ActiveDocument.FormFields("Dropdown14").DropDown.Value
Cells(iRow + 1, "H") = dd14
End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:31:12.793

要引用旧表单下拉字段的值以获取值（这是索引，而不是所选项目的文本），代码是：

```
 activedocument.FormFields("dropdown1").DropDown.value 
```

# c# - 提交时删除 URL 上的 GET 变量

> ID：13053492
> 
> 赞同：0
> 
> 时间：2012-10-24T16:28:17.767
> 
> 标签：c#, .net

我有这个问题：我有一个带有数据网格的页面，其中包含重定向到同一页面的链接，将变量添加到 URL。一旦用户在表单中选择了一些选项，它就会再次提交给自己。

我的问题是我必须删除 URL 中的所有这些变量，否则它们会破坏提交。在进行 POST 时有什么方法可以清理 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:30:19.653

不，POST 将与当前查询字符串一起发生。

您可以将查询字符串参数添加到 Session 并取消通过 URL 传递它的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:10:02.393

解决了。只需在按钮上添加一个 PostBackUrl 即可。对不起，如果这是一个愚蠢的问题。

# linq - 如何使用 linq 查找非 null 或 string.empty 列？

> ID：13053493
> 
> 赞同：1
> 
> 时间：2012-10-24T16:28:22.633
> 
> 标签：linq, linq-to-sql

这是我的代码。有用

```
var someField = "abc";

var list = Entities.Where(x=>SomeField).FirstOrDefault(); 
```

这就是问题所在，someField 也可以为 null 或 string.empty。如果 someField 为 null 或 string.empty，我将选择 SomeField 为 null 或 string.empty 的所有内容。

```
var list = Entities.Where(x=>SomeField  == null || SomeField == string.empty).FirstOrDefault(); 
```

现在，我有一个 if else 语句来检查 someField 是否有值，然后决定使用哪个查询。

我需要将 2 个查询合并为一个。因为如果有我们需要检查的字段，那么这个 if else 语句会变得很长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:33:49.930

我怀疑您*实际上*想要 match `x.SomeField == someField`，或者如果`someField`为 null 或为空，则所有内容，对吗？

我会这样做：

```
var fetchAll = string.IsNullOrEmpty(someField);
var list = Entities.FirstOrDefault(x => fetchAll || x.SomeField == someField); 
```

您*可以*内联它，但我认为上面的内容比在查询中检查是否`someField`为空或为空更清楚。

请注意，我使用了`FirstOrDefault`带谓词的重载——这相当于使用`Where`后跟`FirstOrDefault`，但更简洁一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:44:11.497

我做了一个小样本，我只是在 SomeField 中获取具有 null 或空值的实体......

我希望这对你有用。

```
public class MyEntity
{
    public int ID { get; set; }

    public string SomeField { get; set; }
}

static void Main(string[] args)
{
   List<MyEntity> Entities = new List<MyEntity>();
   for (int i = 0; i < 10; i++)
   {
       Entities.Add(new MyEntity()
                   {
                       ID = i,
                       SomeField = "Value " + i.ToString()
                   });
   }

   Entities.Add(new MyEntity() { ID = 10, SomeField = null });
   var entity = Entities.Where(x => string.IsNullOrEmpty(x.SomeField)).FirstOrDefault();
} 
```

# mysql - 联合 2 个表在第三个与 2 个旧应用程序的内部连接

> ID：13053494
> 
> 赞同：1
> 
> 时间：2012-10-24T16:28:28.670
> 
> 标签：mysql, sql

我有一个连接到 mySQL 数据库的旧式 Access 前端。旧版应用程序有很多危险的宏分配给 onclose 触发器。我还有一个正在开发中的 Web 应用程序在同一个数据库上运行。Web 应用程序中有几个模块正在生产中使用。我的测试是在单独的开发机器上完成的，该机器具有单独的专用开发版本的数据库。

我正在安装到我的网络应用程序中的一个新模块带有它自己的一组表。它会很高兴地存在于同一个数据库中，但想要它自己的表中的数据副本。我犹豫是否要广泛修改该模块的新表或代码库。

共有 6 个表保存旧数据库中不同对象的相似数据。我现在只处理其中最重要的两张表。下面仅代表这 2 个表中的一小部分列。

```
CREATE TABLE IF NOT EXISTS `agent` (
`age_id` int(11) NOT NULL AUTO_INCREMENT,
`age_agent_email_address` varchar(255) DEFAULT NULL,
`age_welcome_email_sent_y_or_n` varchar(255) DEFAULT 'No',
`age_status` varchar(255) DEFAULT 'Active',
PRIMARY KEY (`age_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC AUTO_INCREMENT=1854 ; 
```

和

```
CREATE TABLE IF NOT EXISTS `prospecting_contacts` (
`psp_prospect_id` varchar(255) NOT NULL DEFAULT '',
`psp_prospecting_status` varchar(255) DEFAULT 'Active',
`psp_prospect_email_address` varchar(255) DEFAULT NULL,
`psp_remove_from_email_marketing` varchar(255) DEFAULT 'No',
`psp_id` int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`psp_id`) USING BTREE,
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC AUTO_INCREMENT=2050793 ; 
```

新模块附带了几个相关的表格。我相信只有其中一个需要更新。

```
CREATE TABLE IF NOT EXISTS `phplist_user_user` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`email` varchar(255) CHARACTER SET latin1 NOT NULL,
`confirmed` tinyint(4) DEFAULT '0',
`blacklisted` tinyint(4) DEFAULT '0',
`bouncecount` int(11) DEFAULT '0',
`entered` datetime DEFAULT NULL,
`modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`uniqid` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
`htmlemail` tinyint(4) DEFAULT '0',
`subscribepage` int(11) DEFAULT NULL,
`rssfrequency` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
`password` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
`passwordchanged` date DEFAULT NULL,
`disabled` tinyint(4) DEFAULT '0',
`extradata` text CHARACTER SET latin1,
`foreignkey` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
`optedin` tinyint(4) DEFAULT '0',
PRIMARY KEY (`id`),
UNIQUE KEY `email` (`email`),
KEY `foreignkey` (`foreignkey`),
KEY `idx_phplist_user_user_uniqid` (`uniqid`),
KEY `emailidx` (`email`),
KEY `enteredindex` (`entered`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=11 ; 
```

php_list_user_user 表将包含作为此查询结果的数据：

```
SELECT `age_agent_email_address` AS `email` FROM `agent` 
    WHERE `age_status` = 'Active'
UNION DISTINCT
SELECT `psp_prospect_email_address` FROM `prospecting_contacts`
    WHERE `psp_prospecting_status` = 'Active' 
```

旧式访问应用程序更新 agent 和prospecting_contacts 表。新模块更新了 php_list_user_user 表。我相信我可以使用 TRIGGER 来回复制信息。但是，我正在寻找一种不重复数据的方法。

我曾想过 CREATE VIEW，但 mysql 手册说联合和连接破坏了它的更新能力。[http://dev.mysql.com/doc/refman/5.1/en/view-updatability.html](http://dev.mysql.com/doc/refman/5.1/en/view-updatability.html)

那么，有没有办法在不重复数据的情况下更新这 3 个表呢？或者我应该只是复制电子邮件地址并在 INSERT 和 UPDATE 上使用 TRIGGER？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:04:51.020

尽管外键更倾向于保持表一致而不是防止重复，但您可能可以用外键做一些聪明的事情。[http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

这可能看起来违反直觉，但另一种解决方案是维护一个查找表，该表指示可以找到特定值的位置。您可以加入所有三个（子）表以防止重复。

触发器也可以。

# jquery - 向 div 添加一个类，然后使用该类添加 onclick 事件

> ID：13053497
> 
> 赞同：0
> 
> 时间：2012-10-24T16:28:52.453
> 
> 标签：jquery, addclass

我有一个起初不可点击的元素，但我想让点击另一个 div 使其可点击。

我所做的是

```
$("#div_1").addClass("selected");

$(".selected").click(function() {
    $("#block").animate({
        width: "70%",
        opacity: 0.4,
        marginLeft: "0.6in",
        fontSize: "3em",
        borderWidth: "10px"
    }, 1500);
});​ 
```

但这似乎不起作用，我不确定这有什么问题，也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:32:25.157

```
Try something like this:

$("#div_1").addClass("selected");

$("#div_1").click(function() {
    if($(this).hasClass('.selected') {
    $("#block").animate({
        width: "70%",
        opacity: 0.4,
        marginLeft: "0.6in",
        fontSize: "3em",
        borderWidth: "10px"
    }, 1500);
    }
});​ 
```

同样出于可用性目的，当您添加可点击功能时，请使用它使其对用户显示可点击：

```
$("#div_1").addClass("selected").css('cursor', 'pointer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:43:28.280

您需要**委托**此类情况...尝试使用**.on()**并将事件附加到静态父级..

因为当添加类时，事件已经与 DOM 加载时相关联。所以委派它可以解决问题。

```
$("#div_1").addClass("selected");

$('body').on("click", ".selected", function() {
     // Your code here
});​ 
```

# xcode - 不是您典型的地图应用程序

> ID：13053502
> 
> 赞同：0
> 
> 时间：2012-10-24T16:29:19.813
> 
> 标签：xcode, map, ios6, mapkit

我正处于本质上是游戏的 iOS 应用程序的概念开发阶段。我想做的一件事是获取有关当前位置的信息。到目前为止我还没有使用过地图套件，在快速阅读了各种文档后，它看起来主要是作为显示套件设计的。除了显示地图之外，我还想做的是查询可能在该位置的数据。例如，如果我提供纬度和经度，我想知道该位置是代表陆地还是水域。如果是在陆地上，离最近的街道有多近？如果它不在街道附近，关于该地点可能还有什么其他信息？

我意识到有大量可用的数据经过地理编码，但有没有可以直接从地图工具包中查询的信息？我原以为海拔之类的东西很容易获得，但我还没有看到类似的东西。我只是看错地方了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:05:21.717

据我所知，没有可以直接从 MapKit 查询的数据 - 即您不能询问 MapKit 位置是在陆地上还是在水上。

您可以使用带有当前经度/纬度的反向地理编码来查找有关该位置的详细信息，例如最近的街道/城镇，或该位置所在的国家/地区。

查看内置的[Apple Geocoding 框架](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html)或[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)

希望这可以帮助。

# python - Pygame - 满足条件时，显示图片并停止音乐？

> ID：13053506
> 
> 赞同：0
> 
> 时间：2012-10-24T16:29:25.893
> 
> 标签：python, image, audio, pygame

声音优先 - 我目前正在播放背景音乐，但我想在用户获胜或失败时停止播放并播放胜利或失败歌曲。目前我无法让背景音乐停止。我假设我把命令停止音乐并在条件下播放另一个文件。我在这方面是正确的吗？

我尝试过诸如 bgm_music = True while bgm_music == true: code 和条件 bgm_music = False 之类的东西，但这会阻止我的程序工作。

编辑 - 好的，因为音乐只是加载一首新歌就完美了，所以我认为我对声音部分没问题。

至于图片。从本质上讲，我想做与音乐相同的事情。一旦用户获胜或失败，我想在所有内容之上显示胜利或失败图像。同样，我尝试了与上述类似的布尔值，但无济于事。

编辑 2 - 我已经设法显示图片，但我需要知道如何将它放在上面（目前精灵在它上面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:38:15.583

它认为您应该跟踪不同的状态，例如：

*   1：游戏玩法
*   2：歌曲
*   3：游戏结束画面

然后根据你的主循环中的状态执行代码：

```
if state == 1:
    # gameplay code
    # if over start music and change to state 2
elif state == 2:
    # song playing
    # decrese song_counter
    if song_counter == 0:
        # stop music
        # change to state 3
elif state == 3:
    # blit game over image
    # decrease game_over_counter
    if game_over_counter == 0:
        # reset game
        # change to state 1 
```

# c# - 跟踪实体框架进度

> ID：13053507
> 
> 赞同：3
> 
> 时间：2012-10-24T16:29:27.583
> 
> 标签：c#, entity-framework

我正在使用实体框架插入大量数据。我想获得插入的进度（向用户显示）。

EF 中是否有任何东西可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:43:43.577

长答案简短：这是不可能的。

# angularjs - jQueryUI 选项卡 + AngularJS 的问题

> ID：13053508
> 
> 赞同：1
> 
> 时间：2012-10-24T16:29:35.240
> 
> 标签：angularjs, jquery-ui-tabs

我在使用 AngularJS 生成动态选项卡（jquery-ui）时遇到问题。

我创建了一个指令来调用 div 标签上的 Tabs(jQuery-UI) 初始化，该标签具有使用 ng-repeat 生成的 ul > li> a 元素。

我认为问题出在标签初始化的某个地方没有与模型绑定同步，并且我在标签上得到了一个奇怪的行为。我认为这可能会发生，因为在模型“更改”之前选项卡的初始化发生了，因为我用 ajax 加载模型，我不知道如何处理选项卡小部件的“重新初始化”。

我的指令看起来像这样：

```
myApp.directive('juiTabs', function () {
    return function postLink(scope, iElement, iAttrs) {
        jQuery(function () {
            $(iElement).tabs();
        });

    }
}); 
```

我的控制器

```
function MyCtrl($scope, $locale, $routeParams, $http) {

    $scope.DataSource = null;

    $http({
        url: "/api/product/1",
        method: "GET",
        data: { "foo": "bar" }
    }).success(function (data, status, headers, config) {

        if (data.isSucess) {
            $scope.DataSource = data.Data;
        }
        else {
            NotifyError("...");
        }
    ... 
```

有谁知道如何在更改模型后强制重新初始化选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T17:16:16.977

尝试像这样在指令中“观察”您的模型：

```
myApp.directive('juiTabs', function () {
    return function postLink(scope, iElement, iAttrs) {
        scope.$watch(iAttrs.ngModel, function (newValue) {
            jQuery(function () {
                $(iElement).tabs();
            });
        }
    }
}); 
```

# caching - Playframework 为获取的查询发送 2 个查询

> ID：13053514
> 
> 赞同：0
> 
> 时间：2012-10-24T16:30:05.753
> 
> 标签：caching, jpa, playframework

我目前在播放框架 1.2.4 中遇到 JPA 问题。

我需要在一个单独的数据库中有一个 UserOptions 模型，并且想要懒惰地加入它，因为它只需要在一个查询中。

在这个查询中，我想急切地加载选项，通过搜索我发现只能通过使用连接查询来完成。

如果我使用渴望而不是懒惰，则使用 User.findById() 和选项一切都会好起来的，并且在一个查询中找到了用户。

但是当我使用“left join fetch”查询时，play 会发送两个查询。所以继承人的查询：

```
User.find("
    SELECT
        user
    FROM
        User user
    LEFT JOIN FETCH
        user.options options
    WHERE
        user.id = ?
", Long.parseLong(id)).first(); 
```

这里的模型：

```
@Entity
public class User extends Model
{

    @OneToOne(mappedBy = "user", fetch = FetchType.LAZY)
    public UserOptions  options;

    // ...

}

@Entity
public class UserOptions extends Model
{

    @OneToOne(fetch = FetchType.LAZY)
    public User user;

} 
```

问题是为什么 play 会为 fetch 查询发送两个查询？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:32:52.900

好吧，我自己搞定了。查询还是一样的。

问题是，默认情况下不会缓存自定义查询。所以我用这段代码提供了一个数据库缓存（只针对当前请求）。

```
 // Get database cache instance
        EhCacheImpl cache = EhCacheImpl.getInstance();

        // Get cached user
        User user = (User)cache.get("UserWithOptions_"+id);

        // Check whether a user is cached
        if(user == null)
        {
            // Get the user
            user = User.find("SELECT user FROM User user LEFT JOIN FETCH user.options options WHERE user.id = ?", Long.parseLong(id)).first();
        }

        // Refresh cache
        cache.add("UserWithOptions_"+id, user, 0); 
```

愿原力与你同在！

# android - 应用程序被错误配置为 Facebook 登录

> ID：13053515
> 
> 赞同：1
> 
> 时间：2012-10-24T16:30:05.677
> 
> 标签：android

我在这个错误上遇到了很多麻烦：

> 应用程序被错误配置为 Facebook 登录

我对android开发很陌生，如果我能找到任何答案，我将不胜感激。
我在这里看到了许多相同的错误，所以我尽可能地遵循，但我仍然有问题。我检查了哈希键，它们看起来还不错。

当我使用 eclipse 和手机时，我的应用程序可以工作，但当我从 google play 安装时，它就无法工作。

我已经`Util.java`在 Facebook SDK 中打开，设置`private static boolean ENABLE_LOG=true`.

我在我的 facebook 控制台中更改了哈希键，并得到了键不匹配的错误。
我把原来的放回去了，不再出现那个错误，但应用程序在 Facebook 登录中仍然配置错误。

我确定控制台上还有其他问题，但我不知道它是什么或如何修复它。我已经在这里待了三天了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:42:28.097

我认为您按照所有步骤使用命令提示符创建哈希键。我也面临这个问题。

我得到了一个与我的 LogCat 密钥不同的哈希密钥。为此，只需连接您的设备并使用 LogCat 检查您的错误。这会引发 Facebook 异常，例如

> D/Facebook-authorize(24739)：登录失败：invalid_key：Android 密钥不匹配。您的密钥“uk3udeH7vrOGNFH2FJjdJbdWJWI”与您的应用程序设置中指定的允许密钥不匹配。[在http://www.facebook.com/developers](http://www.facebook.com/developers)检查您的应用程序设置

这`uk3udeH7vrOGNFH2FJjdJbdWJWI`是一个示例密钥。从您的 LogCat 获取您的密钥并更改 Facebook 应用程序上的哈希密钥。

在此处查看已接受的答案： [App is misconfigured for Facebook login: Android Facebook integration issue](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T20:24:29.080

嗨，我发现调试和发布哈希键都必须添加到 facebook 开发者控制台。Facebook 有一个全新的错误信息，确实很有帮助。当散列键错误时，会出现一条消息说散列键是什么！！！！！！！！！复制粘贴到 facebook 开发者控制台！！！！！！是的

# mysql - 组合两个具有不同列数的查询

> ID：13053521
> 
> 赞同：5
> 
> 时间：2012-10-24T16:30:20.507
> 
> 标签：mysql, sql

我有两个查询我想组合成一个输出，我不能使用 UNION 因为它们有不同数量的列。

该表的所有`ref`字段`id` `refid` `cellid` `cat`都包含整数

查询 1：查找每个唯一的总行数`cellid`

```
SELECT cellid, COUNT(*) totalcount, cat FROM rel GROUP BY cellid 
```

`cat`查询 2：查找每个唯一的模式（最常见的值）`cellid`

```
SELECT cellid, cat
FROM rel t
GROUP BY cellid, cat
HAVING cat = (
SELECT cat
FROM rel
WHERE cellid = t.cellid
GROUP BY cat
ORDER BY COUNT(*) DESC, cat
LIMIT 1
) 
```

举一个我正在尝试做的例子，我想查询我的表

```
id | refid | cellid | cat
1  | 1     |  1     | 1
2  | 2     |  2     | 2
3  | 3     |  3     | 4
4  | 1     |  1     | 2
5  | 2     |  1     | 2
6  | 3     |  1     | 3
7  | 1     |  2     | 2
8  | 1     |  1     | 2 
```

并返回

```
cellid | no_of_rows | Mode_of_cat
 1     |  5         |  2
 2     |  2         |  2
 3     |  1         |  4 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T16:56:54.320

这里最简单的解决方案就是编写一个查询来加入您已经拥有的两个结果集。您可以将查询结果存储在 tmp 表中，并像这样连接临时表：

```
SELECT tmp1.cellid, tmp1.rows, tmp2.mode_cat FROM
(
    SELECT cellid, COUNT(*) AS rows
    FROM rel
    GROUP BY cellid
)tmp1
LEFT JOIN
(
    SELECT cellid, cat AS mode_cat
    FROM rel t
    GROUP BY cellid, cat
    HAVING cat = (
        SELECT cat
        FROM rel
        WHERE cellid = t.cellid
        GROUP BY cat
        ORDER BY COUNT(*) DESC, cat
        LIMIT 1
    )
)tmp2
ON tmp1.cellid = tmp2.cellid; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:36:20.033

在第二个查询中，您可以更改

```
SELECT cellid, cat 
```

到

```
SELECT cellid, 0 as totalcount, cat 
```

使其与第一个查询中的列匹配。

# security - Amazon RDS 安全性 - 是否有任何替代静态加密的方法？

> ID：13053526
> 
> 赞同：2
> 
> 时间：2012-10-24T16:30:35.360
> 
> 标签：security, amazon-rds, data-security

当使用像 Amazon RDS 服务这样的云数据库提供商时，该服务负责修补/更新/备份等各种事情，这是否意味着亚马逊员工可以访问数据库本身的数据？

如果是这样，是否有任何方法可以确保提供商的员工无权访问 - 潜在地滥用数据？

我知道的一种方法是使用静态加密，即让我的应用程序在保存到数据库之前加密敏感数据并在检索时对其进行解密。但是，这不仅是性能方面的开销，而且还需要更改我的应用程序本身。

我猜想大多数考虑使用云数据库服务的客户可能会将此作为他们的首要关注点，但不知何故，我无法从亚马逊帮助/RDS 安全说明中获得任何具体答案。

*注意：虽然我知道这不是一个真正的编程问题，但我确实觉得它对程序员来说不够通用，所以我把它贴在这里。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:21:11.297

不，他们没有。关于如何管理数据以及谁可以访问数据，存在大量的安全性。[http://aws.amazon.com/security/](http://aws.amazon.com/security/)

# asp.net-mvc-3 - 使用 LinqToTwitter 发送私人消息

> ID：13053529
> 
> 赞同：0
> 
> 时间：2012-10-24T16:30:38.233
> 
> 标签：asp.net-mvc-3, c#-4.0, linq-to-twitter

嗨，我想用 linqToTwitter 发送私人消息，这是我的代码：

```
 var auth = new MvcAuthorizer
        {
            Credentials = new InMemoryCredentials()
            {
                ConsumerKey  = TwitterClient.ConsumerKey,
                ConsumerSecret = TwitterClient.ConsumerSecret,                    
                OAuthToken = TempData["AccessToken"] as string,
                AccessToken = TempData["TokenSecret"] as string
            }
        };            
        var twitterContext = new TwitterContext(auth);            
        var message = twitterContext.NewDirectMessage(auth.UserId, "Hi ucef, cool to discuss with you" + DateTime.Now); 
```

但是 auth.UserId 为空，你知道吗！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:50:24.987

Authorizer 只会在您完成 OAuth 流程后立即持有用户 ID，用户在该流程中对您的应用进行身份验证。用户对您的应用进行身份验证后，Twitter 会发回 UserID 和 ScreenName。

您正在同时加载所有 4 个凭据，这样可以方便地查询 Twitter，而无需通过 OAuth 过程。但是，由于您没有完成 OAuth 流程，因此无法填充 UserID。

解决此问题的一种方法是在用户第一次进行身份验证后保存 UserID，并从您在后续查询中存储它的位置检索保存的 ID。

另一种解决方法是执行 Account VerifyCredentials 查询。您可以从 Account.User.UserIdentifier 属性中获取 UserID。

乔

# jquery - Jquery UI Resizable Aspect Ratio 设置以内容类型为条件

> ID：13053530
> 
> 赞同：0
> 
> 时间：2012-10-24T16:30:39.117
> 
> 标签：jquery, jquery-ui, resizable

我正在构建一个应用程序，其中有不同类型的 div 进入页面。有的用 a 填充，`<img>`有的用`<span>`. 所有 div 都有一个名为 draggable 的类。我通过这样做使所有具有可拖动类的 div 都可以调整大小：

```
 $( '.draggable' ).resizable({
            maxWidth: 500,
            aspectRatio: false,
            containment: 'parent', 
            start: function() {
                last_element = $(this);
            },
            resize: function() {
                $(this).children('img').css('width',$(this).css('width'));
                $(this).children('img').css('height',$(this).css('height'));
            },
            stop: function() {
                updateDiv($(this).attr('id'));
            }
        }); 
```

有没有办法让`aspectRatio`值依赖于 div 的内容？我试过这样做：

```
aspectRatio: ($(this).children('img').length ? true : false), 
```

我希望它可以使用纵横比 = false 调整文本框（其中包含跨度的 div）的大小，但图像框（其中包含 imgs 的那些 div）具有纵横比 = true。

我知道我可以设置两个不同的类（.draggable 和 .draggable_img），但我没有这样做，我只是想知道是否有一些简单的事情我可以在没有冗余代码的情况下完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:33:01.167

这是一个上下文问题。`$(this)`正在引用`window`而不是`.draggable`该级别的元素。你可以做的是这样的事情。一旦你这样做了，你设置真/假的逻辑就很好了。

```
$('.draggable').each(function() {

    $(this).resizable({
        maxWidth: 500,
        aspectRatio: ($(this).children('img').length ? true : false),
        containment: 'parent',
        start: function() {
            //last_element = $(this);
        },
        resize: function() {
            //$(this).children('img').css('width',$(this).css('width'));
            //$(this).children('img').css('height',$(this).css('height'));
        },
        stop: function() {
            //updateDiv($(this).attr('id'));
        }
    });
});​ 
```

[***看看这个小提琴***](http://jsfiddle.net/8BEEx/1/)。

# sql-server - SQL Server - 在分区上强制共享锁

> ID：13053531
> 
> 赞同：1
> 
> 时间：2012-10-24T16:30:39.197
> 
> 标签：sql-server, locking, partitioning

我正在使用分区切换来重建临时表上的索引，而不像[微软的文章](http://msdn.microsoft.com/en-us/library/ms191160%28v=sql.105%29.aspx)中那样将它们放在分区表上。

我有什么归结为

```
BEGIN TRAN
ALTER INDEX IX_Working ON dbo.WorkingTable DISABLE

INSERT INTO dbo.WorkingTable ( Id, PartitionColumn, Values...)
SELECT Id, PartitionColumn, Values...
FROM PartitionedTable WITH (HOLDLOCK)
WHERE PartitionColumn <= @rightboundary
AND PartitionColumn > @leftboundary

INSERT INTO WorkingTable ( Id, PartitionColumn, Values...)
SELECT Id, PartitionColumn, Values...
FROM Imports

ALTER INDEX IX_Working ON WorkingTable REBUILD -- SLOW BIT

ALTER TABLE PartitionedTable SWITCH PARTITION @partition TO SwapTable
ALTER TABLE WorkingTable SWITCH TO PartitionedTable PARTITION @partition

TRUNCATE TABLE SwapTable
COMMIT 
```

现在，在此操作期间，我需要阻止对正在重新索引的分区的任何更新，但仍允许它们在其他分区上进行。PartionedTable 已将锁升级设置为自动。我正在尝试使用 HOLDLOCK 执行此操作，但我仍然能够在慢速期间从另一个连接执行 INSERT INTO PartionedTable (Id, @somevalueInTheRange, Values...)。

如何在仍然允许选择的同时阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:19:44.070

您可以尝试将 TABLOCKX 与 HOLDLOCK 一起使用吗？当前选择将放置一个由于 HOLDLOCK 而未释放的共享锁。但是共享锁不会阻止插入。

# javascript - jquery ajax 从容器内的按钮加载内容

> ID：13053534
> 
> 赞同：2
> 
> 时间：2012-10-24T16:30:54.940
> 
> 标签：javascript, jquery, html

我正在使用 jQuery 和 ajax 加载页面而无需重新加载整个网站，我遇到了问题。这是jQuery脚本：

```
$(function(){
$("a[rel='tab']").click(function(e){
    e.preventDefault(); 

    //get the link location that was clicked
    pageurl = $(this).attr('href');

    //to get the ajax content and display in div with id 'content'
    if(pageurl!=window.location){
    $.ajax({url:pageurl+'?rel=tab',success: function(data){
        $('#main-wrap').html(data);
    }});
    }
    //to change the browser URL to 'pageurl'
    if(pageurl!=window.location){
        window.history.pushState({path:pageurl},'',pageurl);    
    }
    return false;  
   });
     });

   /* the below code is to override back button to get the ajax content without reload*/
      $(window).bind('popstate', function() {
$.ajax({url:location.pathname+'?rel=tab',success: function(data){
    $('#main-wrap').html(data);
}});
}); 
```

html代码是这样的：

```
<div class="nav"><a href="example1.html" rel="tab">Page 1</a></div>
<div class="ajax-content">
<div class="title"><a href="title_page.html" rel="tab">Title</a></div>
</div> 
```

现在，如果我单击加载 ajax 内容的 div 之外的“第 1 页”，它正在工作，但是如果我单击 div 内的“标题”，则重新加载整个页面（ajax 不工作）。是否可以使“标题”链接（位于加载 ajax 内容的 div 内）工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:34:12.550

将您的 href 属性设置为 # 并添加 return false;

试试这个：

```
<div class="title"><a href="#" rel="tab" onclick="return false;">Title</a></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:36:24.153

如果您已经在编写脚本，我只会放弃内部链接，而是将 url 放在 data-url 属性中。这样您就不必担心使用任何默认行为覆盖您的曲目。你的 div 看起来像这样：

```
<div class="title" id='link_btn' data-url="title_page.html">Title</div> 
```

然后像这样重写你的代码：

```
("#link_btn").click(function(){  

    //get the link location that was clicked
    pageurl = $(this).attr('data-url'); 
```

数据属性是在元素和脚本之间传递数据的好方法。当你创建它们时你必须小心，因为特殊字符和引号会弄乱它们并使它们不可读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:38:56.333

实际的问题是您正在将事件处理程序添加到所有`a[rel='tab']`准备好的文档中，但是您是在`<a>`事后加载目标。这意味着他们不会将事件处理程序绑定到他们的点击。你应该使用类似`live`或更重要的东西`on`。重要的是事件委托，您可以在其中使用以下内容：

```
$("#container").on("click", "a[rel='tab']", function () {
    // Your code
}); 
```

这样，`a[rel='tab']`在元素内部删除或添加的任何内容都会附加`#container`此事件处理程序。

# c# - 可切换数据访问层的结构

> ID：13053544
> 
> 赞同：4
> 
> 时间：2012-10-24T16:31:35.623
> 
> 标签：c#, asp.net-mvc, entity-framework, design-patterns

我需要使用实体框架编写数据访问层。要求之一是允许配置文件控制数据的来源。使用一个配置设置，它应该来自数据库；另一个，来自网络服务。

现在，我最初的想法是拥有 3 个 DataAccess 类：

*   小部件数据访问
*   WidgetDatabaseDataAccess
*   WidgetWebServiceDataAccess

它们都将实现相同的接口。WidgetDataAccess 将读取配置并委托给正确的子类。这似乎很明智，对吧？

有什么我应该遵循的模式，或者有更好的方式来构建它的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:20:44.603

Yes, Repository / UnitOfWork pattern.

*   **Widget.Core** : Your MVC application using only Widget.DAL namespace, dependency injected with either Widget.DAL.DatabaseService or Widget.DAL.WebService based on your config file
*   **Widget.DAL** : IRepository, IUnitOfWork, IWhateverYouNeed, DTOs
*   **Widget.DAL.DatabaseService** : Entity Framework Models and Context. Implementation of Widget.DAL interfaces using your Entity Framework context
*   **Widget.DAL.WebService** : Web client, Domain objects, implementations of Widget.DAL interfaces using your Web client

# java - 使用 m2e 的生命周期配置未涵盖插件执行

> ID：13053548
> 
> 赞同：3
> 
> 时间：2012-10-24T16:31:53.043
> 
> 标签：java, eclipse, maven

我在使用 Eclipse（m2e 插件）的 maven 项目中遇到此错误：

```
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-war-plugin:2.1.1:exploded (execution: default, phase: compile)  pom.xml /MyGWT S    line 642    Maven Project Build Lifecycle Mapping Problem
Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:gwt-maven-plugin:2.4.0:generateAsync (execution: default, phase: generate-sources)   pom.xml /MyGWT  line 618    Maven Project Build Lifecycle Mapping Problem
Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:gwt-maven-plugin:2.4.0:i18n (execution: default, phase: generate-sources)    pom.xml /MyGWT  line 618    Maven Project Build Lifecycle Mapping Problem 
```

我应该通过执行“忽略”来修复此错误，还是可以通过“发现新的 m2e 连接器”来修复？

我试着做一个“发现”，但市场上似乎没有这个插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:15:05.127

m2e提出此消息的原因`Plugin execution not covered by lifecycle configuration: ...`在以下页面中详细说明：

[未涵盖 M2E 插件执行](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)

一般来说，m2e 用于解析/映射插件目标执行到 Eclipse 构建生命周期的方式在 0.12 版之后已经被重新发明。现在**m2e 1.0 需要明确说明如何处理绑定到项目构建生命周期的“有趣”阶段的所有 Maven 插件。**通过在项目的 pom 中配置生命周期映射，或者使用特定的 m2e 配置器 Eclipse 插件（如果有人为社区创建了它）。

> 我应该通过执行“忽略”来修复此错误，还是可以通过“发现新的 m2e 连接器”来修复？

取决于您的需求，如果您不希望 Eclipse 运行 Maven 定义的完整构建生命周期，则忽略它，否则正确配置每个未覆盖的插件执行（以防万一没有合适的 m2e 配置器可用），请参阅示例该链接中的 org.eclipse.m2e:lifecycle-mapping 插件配置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:15:29.523

确保您的代码中有 post-clean，如下所示。

```
 <executions>           
     <execution>
        <configuration></configuration>
        <phase>post-clean</phase>
        <goals>
            <goal>......<your goal goes here>.....</goal>
        </goals>
     </execution>
   </executions> 
```

# ruby-on-rails - 错误 Errno::EINVAL: 无效参数 - 用回形针上传图像时

> ID：13053557
> 
> 赞同：3
> 
> 时间：2012-10-24T16:32:22.180
> 
> 标签：ruby-on-rails

我正在使用带有 ActiveAdmin 的 Paperclip 在文章中上传图片。

但是我有一个问题，当我在编辑现有的文章时，Webrcik 启动后的第一次，它的功能非常好。但系统地，我第二次尝试编辑一篇文章（无论是哪一篇）Windows 告诉我“file.exe”停止运行，并且浏览器中出现“Internal Server Error Invalid argument - STDOUT”。

所以，我重新启动 webrick，并且只上传一次等......

这是日志：

```
Started PUT "/admin/articles/1" for 127.0.0.1 at 2012-10-24 18:11:45 +0200
Processing by Admin::ArticlesController#update as HTML

  Parameters: {"utf8"=>"✓", "authenticity_token"=>"VaB3lx3UZaOjUA6Yh+h8jG7ZExSQZDiyZUw6GYJQPbY=", "article"=>{"title"=>"ee", "desc"=>"ee", "content"=>"eeee", "photo"=>#<ActionDispatch::Http::UploadedFile:0x3cce7f0 @original_filename="Desert.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"article[photo]\"; filename=\"Desert.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:C:/Users/Greg/AppData/Local/Temp/RackMultipart20121024-6620-oorxwu>>}, "commit"=>"Update Article", "id"=>"1"}
  [1m[35mAdminUser Load (0.0ms)[0m  SELECT `admin_users`.* FROM `admin_users` WHERE `admin_users`.`id` = 2 LIMIT 1
  [1m[36mArticle Load (1.0ms)[0m  [1mSELECT `articles`.* FROM `articles` WHERE `articles`.`id` = ? LIMIT 1[0m  [["id", "1"]]

Command :: identify -format %wx%h "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl.jpg[0]"

Command :: identify -format %m "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl.jpg[0]"

Command :: identify -format %m "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl.jpg[0]"

Command :: convert "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl.jpg[0]" -auto-orient -resize "510x" -crop "510x350+0+16" +repage "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl20121024-6620-mvfl3a"

Command :: file -b --mime "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl20121024-6620-mvfl3a"

[paperclip] Error while determining content type: Command 'file -b --mime :file' returned 255\. Expected 0
Command :: identify -format %wx%h "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl.jpg[0]"

Command :: identify -format %m "C:/Users/Greg/AppData/Local/Temp/Desert20121024-6620-16n1ehl.jpg[0]"

Completed 500 Internal Server Error in 22073ms

Errno::EINVAL (Invalid argument - ruby_setenv): 
```

* * *

我一直在寻找解决方案……但我没有找到。

有人知道问题的根源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T03:34:53.943

The 'file' program isn't a part of Windows, which suggests you installed it (or something that includes it) to get this far - any idea what that was? [Gnu provides a Windows version of 'file' as part of GnuWin32](http://gnuwin32.sourceforge.net/packages/file.htm).

Learning more about your copy of that program will probably be the first step to fixing your problem. (Hope this helps.)

# mongodb - 使用 MongoVUE 的副本集

> ID：13053559
> 
> 赞同：1
> 
> 时间：2012-10-24T16:32:26.063
> 
> 标签：mongodb, mongovue

我想让 MongoVUE 设置为使用副本集。我已按照以下步骤 2(b) 链接中的说明进行操作。

[http://www.mongovue.com/2012/03/26/establishing-connections-to-servers-and-replica-sets-using-mongovue/](http://www.mongovue.com/2012/03/26/establishing-connections-to-servers-and-replica-sets-using-mongovue/)

但是我得到的只是“拒绝连接”

见图片：[http ://snag.gy/PqXmQ.jpg](http://snag.gy/PqXmQ.jpg)

所有实例都在运行——如果有帮助的话，作为 Windows 服务运行——正如您从图像中看到的那样，它们都是副本集的一部分。底部的记事本显示了我用于服务器的全文字符串。

谢谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:37:03.777

简短回答：使用 IP 地址...

我只是回顾我过去遇到的问题。这看起来很容易通过使用 IP 地址而不是主机名来解决。

高温高压

# windows - 以毫秒为单位的打印批处理时间

> ID：13053563
> 
> 赞同：2
> 
> 时间：2012-10-24T16:32:33.240
> 
> 标签：windows, shell, time, batch-file

我知道可以使用`@echo %time%`. 是否也有类似的命令来获取毫秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:52:21.167

有一个名为 Timethis 的资源工具包实用程序，可提供高达毫秒的时间测量：

```
TimeThis :  Command Line :  dir
TimeThis :    Start Time :  Wed Oct 24 12:49:56 2012
TimeThis :      End Time :  Wed Oct 24 12:49:56 2012
TimeThis :  Elapsed Time :  00:00:00.093 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:48:57.877

（编辑：doh，没有注意到这有 windows 标签。在​​此处留下答案，以防其他人在 Linux 上单击此）

如果您要计算程序或脚本的执行长度，请在命令前加上`time`，例如：

```
time ls -R 
```

这将为您提供以毫秒为单位的执行时间：

```
real    0m0.667s
user    0m0.000s
sys     0m0.144s 
```

如果您询问当前日期和时间：

看一眼：

```
man date 
```

例如，

```
date +"%X %N" 
```

这将为您提供 Hour:Minutes:Seconds 中的当前时间，然后是纳秒

希望这能回答你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-09T11:05:20.280

Gnu`gdate`可以让这变得非常简单；例如，在批处理文件中尝试下面的代码。我用它来为命令窗口中调用的批处理创建唯一的文件名，在我的 Windows 7 系统上，很明显，至少在命令窗口中，gdate 的两个立即连续使用永远不会给出相同的结果。

```
gdate +"%%Y%%m%%d%%H%%M%%S%%N"
gdate +"%%Y%%m%%d%%H%%M%%S%%N"

set i=
set T=
for /f %%i in ('gdate +%%Y%%m%%d%%H%%M%%S%%N') do set UniqueTime=%%i

echo %UniqueTime% 
```

但我实际上使用了更像下面一行的东西，丢弃了最后五位数字，因为就我的目的而言，它们似乎并不重要：前面的部分总是唯一的。这使唯一文件名更短。

```
gdate +"%%Y%%m%%d%%H%%M%%S%%N" | sed "s/.....$//" 
```

很明显，同样的表达式在 Linux 下也可以使用，所以也可以在那里使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-09T11:25:23.953

ptime 实用程序是“5ms 或更好”的准确度

```
ptime echo hallo

ptime 1.0 for Win32, Freeware - http://www.pc-tools.net/
Copyright(C) 2002, Jem Berkes <jberkes@pc-tools.net>

===  echo hallo ===
hallo

Execution time: 0.022 s 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-04T09:19:06.953

使用[`wmic os get LocalDateTime`](https://ss64.com/nt/wmic.html). 这也是获得[独立于语言环境的日期和时间的可靠方法](https://stackoverflow.com/q/56165593/995714)

```
for /F "usebackq tokens=2 delims==" %%i in (
    `wmic os get LocalDateTime /VALUE`
) do @set ctime=%%i
echo milliseconds: %ctime:~15,3% 
```

# asp.net - 本机 ASP.NET JSON 对象与 Python 一样工作

> ID：13053565
> 
> 赞同：0
> 
> 时间：2012-10-24T16:32:35.217
> 
> 标签：asp.net, python, json

有没有办法在 ASP.NET 4.5 上原生地使用 JSON 对象，就像 Python 一样。使用 Python 从 MongoDB 获取 JSON，将其发送到模板并遍历结果而不进行任何转换是非常东方的。有什么办法可以用 ASP.NET 来做，任何扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:38:52.940

使用 nuget，您可以下载一个 json dll (newton)，它可以帮助您非常轻松地序列化和反序列化 json，以便您可以使用它。

检查[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

# html5-canvas - canvas.drawImage(canvas, 0,0) 获取类型错误

> ID：13053570
> 
> 赞同：1
> 
> 时间：2012-10-24T16:32:52.733
> 
> 标签：html5-canvas, typeerror, drawimage

我正在尝试将图像从一个画布复制到另一个画布。我看到一个答案说一个简单的方法是：

```
var Scanvas = $("#sourceCanvas");

var Scontext = Scanvas.get(0).getContext("2d");

var Dcanvas = $("#destinationCanvas");

var Dcontext = Scanvas.get(0).getContext("2d");

//draw something in Scanvas

Dcontext.drawImage(Scanvas, 0 ,0); 
```

但是，每当我尝试此操作时，我都会不断收到类型错误。我使用的浏览器是 Google Chrome 的最新版本，所以我认为这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:05:45.433

您正在使用 jQuery 对象作为`drawImage()`.

它需要是一个纯 DOM 对象。

您可以通过调用 get() 访问 jQuery 中的底层 DOM 对象，如果 jQuery 选择中只有一个对象，则特别是 get(0)，如评论中所述。

```
 DContext.drawImage(Scanvas.get(0),....) 
```

# c# - 无法在gridview中填充下拉列表

> ID：13053571
> 
> 赞同：0
> 
> 时间：2012-10-24T16:32:58.037
> 
> 标签：c#, asp.net, datatable

我正在绑定一个下拉列表，我在第一列中有名字，在第二列中有姓氏作为 DDL`

```
protected void GridView1_RowDataBound1(object sender, GridViewRowEventArgs e)
{ 
    DataTable myTable = new DataTable();

    DataColumn productIDColumn = new DataColumn("FirstName");

    DataColumn productNameColumn = new DataColumn("LastName");

    myTable.Columns.Add(productNameColumn);
    DataSet ds = new DataSet();

    ds = get();
    if (e.Row.RowType == DataControlRowType.DataRow)

   {

      var  fname= (e.Row.Cells[0].Text);

    var expression = "FirstName "+fname;

    DropDownList ddl = (DropDownList)e.Row.FindControl("DropDownList1");

    DataRow[] rows = ds.Tables[0].Select(expression);

    ddl.DataSource = myTable;

    ddl.DataTextField = "LastName";

    ddl.DataValueField = "LastName";

    ddl.DataBind();

 } 
```

但是 ddl 是空的，无法填充 ddl 对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:11:21.137

从你的代码来看，`myTable`没有数据。

您正在创建`myTable`，但没有填充它：您正在将信息获取到变量`ds`中，并将其过滤到`rows`中，但您设置`ddl.DataSource`为`myTable`，而不是`rows`。

使用`rows`，你可能会没事，只要`rows`.

```
ddl.DataSource = rows;

ddl.DataTextField = "LastName"; 

ddl.DataValueField = "LastName"; 

ddl.DataBind(); 
```

# android - Android SDK 将图像保存到可绘制对象

> ID：13053580
> 
> 赞同：0
> 
> 时间：2012-10-24T16:33:46.293
> 
> 标签：android

是否可以将下载的图像从我的站点保存到`drawable`文件夹中？我已经预加载了图像，但是如何保存它们以备后用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:39:02.867

您无法将任何内容保存到可绘制文件夹中。在编译时打包的就是它所拥有的一切。

相反，您可以将图像保存到[外部存储器](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)、[数据库](https://stackoverflow.com/q/7512019/1069068)或[内部存储器](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:45:08.027

不，因为根本没有“可绘制”文件夹。安装后，您的所有可绘制对象都保留在 APK 文件中，并且您的 APK 文件是只读的，因此无法进行任何类型的修改。使用 SD 卡或应用程序存储来存储文件。

# .net - 发射映射器与 valueinjecter 或 automapper 性能

> ID：13053590
> 
> 赞同：22
> 
> 时间：2012-10-24T16:34:15.563
> 
> 标签：.net, performance, automapper, emitmapper

我花了一些时间比较这三个映射器，有趣的是为什么 emitmapper 与任何 valueinjecter 或 automapper 之间的性能差异如此之大（最后两个在性能上具有可比性）。从 emitmapper 解决方案中的基准测试（1000000 次迭代）：

```
 Auto Mapper (simple):        38483 milliseconds
    Emit Mapper (simple):        118 milliseconds
    Handwritten Mapper (simple): 37 milliseconds

    Auto Mapper (Nested):        53800 milliseconds
    Emit Mapper (Nested):        130 milliseconds
    Handwritten Mapper (Nested): 128 milliseconds

    Auto Mapper (Custom):        49587 milliseconds
    Emit Mapper (Custom):        231 milliseconds 
```

还有一些来自 valueinjecter 的基准测试运行添加了 emitmapper（用于 10000 次迭代）：

```
 Convention: 00:00:00.5016074
    Automapper: 00:00:00.1992945 
    Smart convention: 00:00:00.2132185
    Emit mapper(each time new mapper): 00:00:00.1168676
    Emit mapper(one mapper): 00:00:00.0012337 
```

在第一个发射映射器测试中 - 它是每次创建的，在第二个中 - 一个用于所有转换的映射器。

考虑到这一点，结果作为 valueinjecter（也作为 automapper）比发射映射器慢 100 倍。如此巨大的性能差异的原因是什么？至于我，对象到对象映射器与手写映射器相比不能花费太多时间，因为它是项目的瓶颈（例如，如果我们需要映射对象集合）。

目前我正在考虑使用发射映射器，但我还没有准备好决定的原因只有一个：第一个开发人员根本不支持发射映射器，但我不确定这是否非常重要（可能性非常低需要一些额外的功能）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-08T10:54:15.447

原因在[EmitMapper 文档](http://emitmapper.codeplex.com/wikipage?title=Benefits&referringTitle=Home)中有解释：

> 它有效地使用 Emit 库在运行时直接在 IL 中生成映射器，就好像这些映射器是手工编写的一样。大多数其他映射器使用反射库进行映射（或源代码生成）。EmitMapper 还最小化了装箱-拆箱操作和映射过程中的额外调用。例如，它在没有装箱-拆箱的情况下对值类型执行类型转换，并在可能的情况下在没有递归（单程算法）的情况下转换嵌套成员。

与手写代码相比，反射非常慢。相反，与手写映射相比，EmitMapper 在发射时只有启动开销。

# java - 我从文件系统和 jar 中读取相同的文件得到不同的结果

> ID：13053591
> 
> 赞同：0
> 
> 时间：2012-10-24T16:34:15.510
> 
> 标签：java, jar, io

我有一个文件，我的 Java 应用程序将其作为输入，我一次读取 6 个字节。当我从文件系统中读取它时，一切正常。如果我将所有内容构建到一个 jar 中，则第一个 4868 读取工作正常，但之后它开始以错误的顺序返回字节数组，并且最后还读取了更多数据。

这是我的代码的简化版本，它重现了该问题：

```
 InputStream inputStream = this.getClass().getResourceAsStream(filePath);
     byte[] byteArray = new byte[6];
     int counter = 0;
     while ((inputStream.read(byteArray) != -1))
     {
        counter++;
        System.out.println("Read #" + counter +": " + Arrays.toString(byteArray));
     }
     System.out.println("Done."); 
```

这是我在读取文件系统时得到的 [缩写] 输出：

```
...
Read #4867: [5, 0, 57, 7, 113, -26]
Read #4868: [2, 0, 62, 7, 114, -26]
Read #4869: [2, 0, 68, 7, 115, -26]
Read #4870: [3, 0, 75, 7, 116, -26]
Read #4871: [2, 0, 83, 7, 117, -26]
...
Read #219687: [1, 0, 4, -8, 67, 33]
Read #219688: [1, 0, 2, -8, 68, 33]
Read #219689: [5, 0, 1, -8, 67, 33]
Done. 
```

这是我从一个罐子里读到的：

```
...
Read #4867: [5, 0, 57, 7, 113, -26]
Read #4868: [2, 0, 62, 7, 113, -26] //everything is fine up to this point
Read #4869: [7, 114, -26, 2, 0, 68]
Read #4870: [7, 115, -26, 3, 0, 75]
Read #4871: [7, 116, -26, 2, 0, 83]
...
Read #219687: [95, 33, 1, 0, 78, -8]
Read #219688: [94, 33, 1, 0, 76, -8]
Read #219689: [95, 33, 1, 0, 74, -8]
...
Read #219723: [67, 33, 1, 0, 2, -8]
Read #219724: [68, 33, 5, 0, 1, -8]
Read #219725: [67, 33, 5, 0, 1, -8]
Done. 
```

我解压 jar 并确认正在读取的文件是相同的，那么什么会导致阅读器返回不同的结果呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:41:01.160

你的阅读循环是错误的。 *方法返回它真正*读取`inputStream.read()`的字节数。在将数据转换为字符串之前，您必须检查此数字。

 *当您从文件中读取时，字节并没有一起到达。在循环的其中一次迭代中，您可能读取了预期的 6 个字节中的 4 个，因此您对字符串的转换不起作用。如果您正在阅读整数，我建议您使用`Scanner`or good old包装原始输入字符串`DataInputStream`并直接读取整数。*

# php - 嵌套行连接

> ID：13053592
> 
> 赞同：0
> 
> 时间：2012-10-24T16:34:22.330
> 
> 标签：php, nested

请以简洁的 PHP 类型代码提供以下问题的简单解决方案（只需大致遵循 PHP 类型语法）：

我们希望能够输出嵌套的项目列表——列表中的项目可以是列表中其他项目的子项目。一个简单的 SQL 表将具有以下字段：

1.  itemID - 整数。
2.  项目 - varchar。
3.  subItemOfID – 整数。

一小部分数据看起来像这样：

```
itemID  item    subItemOfID
1   Item1   0
2   Item2   0
3   Item3   0
4   Item10  1
5   Item11  1
6   Item12  1
7   Item100 4
8   Item101 4
9   Item102 4
10  Item30  3
11  Item31  3
12  Item32  3 
```

输出需要看起来像这样（按项目排序的嵌套列表）：

```
•   Item1
    o       Item10
           Item100
           Item101
           Item102
    o       Item11
    o       Item12
•   Item2
•   Item3
    o       Item30
    o       Item31
    o       Item32 
```

如果 SubItemOfID 行按降序排列，我会得到这个，但是我之前使用的示例在项目中有一个正则表达式，我总是被告知这是对表做某事的不好方法，因为 varchars 可以改变。我需要帮助！这是我到目前为止所拥有的：

```
<?php
$table = array (
'itemID' => array( 
                    1,2,3,4,5,6,7,8,9,10,11,12
                ),
'item' => array(
                    'Item1','Item2','Item3','Item10','Item11','Item12','Item100','Item101','Item102','Item30','Item31','Item32'
                ),
'subItemOfID' => array(
                    0,0,0,1,1,1,4,4,4,3,3,3
                )
                );

foreach($table as $header => $column) {
    foreach($column as $data) {
        if($header == 'item') {
            $fixed = intval(str_replace('Item','',$data));      
            $str_len = strlen($fixed);
            echo '<ul>';
            if($str_len === 1) {
                echo '<li>'.$data.'</li>';
            }
            echo '<ul>';
            if($str_len === 2  ) {
                echo '<li>'.$data.'</li>';              
            }
            echo'<ul>';
            if($str_len ===3) {
                echo '<li>'.$data.'</li>';
            }
            echo '</ul>';
            echo '</ul>';
            echo '</ul>';       
        }
    }
}
?>
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:39:53.170

使用此查询，您最多可以获取 6 个 lvls 的类别：

```
$sql = "SELECT c1.item AS item,
              IF(c6.item IS NOT NULL, 6,
                  IF(c5.item IS NOT NULL, 5,
                     IF(c4.item IS NOT NULL, 4,
                        IF(c3.item IS NOT NULL, 3,
                           IF(c2.item IS NOT NULL, 2, 1))))) AS lvl,
              if (c6.item IS NOT NULL, CONCAT(c6.itemId, c5.itemId, c4.itemId, c3.itemId, c2.itemId, c1.itemId),
                  IF(c5.item IS NOT NULL, CONCAT(c5.itemId, c4.itemId, c3.itemId, c2.itemId, c1.itemId),
                     IF(c4.item IS NOT NULL, CONCAT(c4.itemId, c3.itemId, c2.itemId, c1.itemId),
                        IF(c3.item IS NOT NULL, CONCAT(c3.itemId, c2.itemId, c1.itemId),
                           IF(c2.item IS NOT NULL, CONCAT(c2.itemId, c1.itemId), c1.itemId))))) AS code,
       FROM categories c1
       LEFT JOIN categories c2 ON c2.itemId = c1.subItemOfID
       LEFT JOIN categories c3 ON c3.itemId = c2.subItemOfID
       LEFT JOIN categories c4 ON c4.itemId = c3.subItemOfID
       LEFT JOIN categories c5 ON c5.itemId = c4.subItemOfID
       LEFT JOIN categories c6 ON c6.itemId = c5.subItemOfID
       GROUP BY c1.itemId
       ORDER BY code";
$q = mysql_query($sql);
while (false !== ($row = mysql_fetch_assoc($q))) {
    echo str_repeat('---', $row['lvl'])
       . $row['title']
       . '<br />';
} 
```

它的作用：选择每个类别及其父类别（如果存在），然后生成代码字段对它们进行排序。

对不起，我不专心地阅读了这个问题。

这是php中的解决方案：

```
$table = array (
    'itemID' => array(
        1,2,3,4,5,6,7,8,9,10,11,12
    ),
    'item' => array(
        'Item1','Item2','Item3','Item10','Item11','Item12','Item100','Item101','Item102','Item30','Item31','Item32'
    ),
    'subItemOfID' => array(
        0,0,0,1,1,1,4,4,4,3,3,3
    )
);
outputChildrenRecursive(0, $table);

/**
 * Outputs child items recursively
 *
 * @param integer $parentItemID Parent item itemID
 * @param array   $table        Table data
 */
function outputChildrenRecursive($parentItemID, array $table)
{
    // Get children
    $children = array();
    foreach ($table['itemID'] as $key => $value) {
        if ($table['subItemOfID'][$key] == $parentItemID) {
            $children[] = $key;
        }
    }

    // Output children and grandchildren
    if (!empty($children)) {
        echo '<ul>';
        foreach ($children as $childKey) {
            echo '<li>';
            echo $table['item'][$childKey];
            // Prevent infinite recursion if itemID equals subItemOfID
            if ($table['itemID'][$childKey] != $table['subItemOfID'][$childKey]) {
                outputChildrenRecursive($table['itemID'][$childKey], $table);
            }
            echo '</li>';
        }
        echo '</ul>';
    }
} 
```

# perl - Perls File::VirusScan using Daemon::ClamAV::Clamd 说没有从 clamd 得到 PING 响应

> ID：13053597
> 
> 赞同：0
> 
> 时间：2012-10-24T16:34:48.300
> 
> 标签：perl, sockets, antivirus

首先让我声明，clamd 已被证明可以正确响应：

```
$ echo PING | nc -U /var/run/clamav/clamd.sock
PONG 
```

扫描仪设置如下：

```
#set up a Clamav scanner
use File::VirusScan;
use File::VirusScan::ResultSet;
my $scanner = File::VirusScan->new({
    engines => {
            '-Daemon::ClamAV::Clamd' => {
                    socket_name => '/var/run/clamav/clamd.sock',
            },
    },
}); 
```

整个脚本在 Solaris 11 机器上运行良好。我在 Linux CentOS 5.3 (Final) 上运行它 我确实在从 CPAN 安装 File::VirusScan 时遇到了问题，最新版本 0.102 无法编译，CPAN 测试人员似乎确认了这一点，因为 435 在 437 中失败。所以我从 CPAN 下载 prev 0.101 版本，我也在 Solaris 中运行并手动安装的版本显然没问题

```
perl -v
This is perl, v5.8.8 built for x86_64-linux-thread-multi

sub scanner {
        $|++; # buffer disabled
        (my $path, my $logClean) = @_;

    my $recurse = 5;
    print color "yellow";
    print "[i] Building file scan queue - recurse deepth $recurse \n";
    print color "green";
    print "SCAN QUEUE:0";

    #Get list of files

    if( $rootPath){
     use File::Find::Rule;
    my $finder = File::Find::Rule->maxdepth($recurse)->file->relative->start("$$path");
        while( my $file = $finder->match()  ){
           $|++;
           #$file = substr($file,length($rootPath)); #remove path bloat
           push(@scanList,"/$file");
           print "\rSCAN QUEUE:" .scalar(@scanList);  #update screen
        }
    }else{
     push(@scanList,"$$path");
    }

    print "\rSCANING:0";
    #set up a Clamav scanner
    use File::VirusScan;
    use File::VirusScan::ResultSet;
    my $scanner = File::VirusScan->new({
        engines => {
                '-Daemon::ClamAV::Clamd' => {
                        socket_name => '/var/run/clamav/clamd.sock',
                },
        },
    });

    #scan each file
    my $scanning  = 0;
    my $complete = -1;

    foreach $scanFile (@scanList){
             $scanning++;
             ##################################################
             #scan this file
             $results = $scanner->scan($rootPath.$scanFile);
             ##################################################
                  #array of hashes
             my $centDone = int(($scanning/scalar(@scanList))*100);

             if($centDone > $complete){
                 $complete = $centDone;
             }
             if($centDone < 100){
                  #\r to clear/update line
                  $format = "%-9s %-60s %-15s %-5s";
                  printf $format, ("\rSCANING:", substr($scanFile,-50), "$scanning/".scalar(@scanList), "$centDone%");
             }else{
                  print "\rSCAN COMPLETE                                                                            ";
             }

             # array ref
             foreach $result (@$results) {
                        #array of pointers to hashes
                      #print 'data:'
                      #print 'state:'
                       if($$result{state} ne "clean"){
                           if($$result{data} =~ /^Clamd returned error: 2/){
                               $$result{data} = "File too big to scan";
                           }
                           push(@scanResults,[$scanFile,$$result{state},$$result{data}]); # results
                      }elsif($$logClean){
                           push(@scanResults,[$scanFile,$$result{state},$$result{data}]);
                      }
                      unless($$result{state} eq "clean"){
                                    print color "red";
                                    print "\r$scanFile,$$result{state},$$result{data}\n";
                                    print color "green";
                                    print "\rSCANING: $scanning/".scalar(@scanList)." : $centDone%";
                               if($$result{state} eq "virus"){
                                    push(@scanVirus,scalar(@scanResults)-1);  #scanResuts index of virus

                               }elsif($$result{state} eq "error"){
                                    push(@scanError,scalar(@scanResults)-1);  #scanResuts index of Error
                               }
                      }
             }

    } print "\n";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:49:13.580

查看[Clamd 包的源代码，](http://cpansearch.perl.org/src/DONEILL/File-VirusScan-0.101/lib/File/VirusScan/Engine/Daemon/ClamAV/Clamd.pm)以下脚本应该近似于它正在尝试的调用，并有望让您更好地了解它是如何失败的。尝试将其保存到单独的文件（如 test.pl）并使用“perl test.pl”运行它：

```
use IO::Socket::UNIX;
use IO::Select;

my $socket_name = '/var/run/clamav/clamd.sock';
my $sock = IO::Socket::UNIX->new(Peer => $socket_name);

if(!defined($sock)) {
    die("Couldn't create socket for path $socket_name");
}

my $s = IO::Select->new($sock);

if(!$s->can_write(5)) {
    $sock->close;
    die("Timeout waiting to write PING to clamd daemon at $socket_name");
}

if(!$sock->print("SESSION\nPING\n")) {
    $sock->close;
    die('Could not ping clamd');
}

if(!$sock->flush) {
    $sock->close;
    die('Could not flush clamd socket');
}

if(!$s->can_read($self->{5})) {
    $sock->close;
    die("Timeout reading from clamd daemon at $socket_name");
}

my $ping_response;
if(!$sock->sysread($ping_response, 256)) {
    $sock->close;
    die('Did not get ping response from clamd');
}

if(!defined $ping_response || $ping_response ne "PONG\n") {
    $sock->close;
    die("Unexpected response from clamd: $ping_response");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:27:59.483

看起来各种防病毒引擎需要与 File::VirusScan 基础库分开安装。以下是否返回错误？

```
perl -mFile::VirusScan::Engine::Daemon::ClamAV::Clamd -e '' 
```

如果显示找不到 Clamd.pm 的错误，则需要安装该引擎模块。

如果它没有显示错误，您需要发布更多详细信息，例如您实际用于执行扫描的代码和/或错误输出（如果有）。

# android - 如何在 Y 轴 aChartEngine Android 上隔开标签

> ID：13053600
> 
> 赞同：0
> 
> 时间：2012-10-24T16:35:05.993
> 
> 标签：android, achartengine

美好的一天，我有一个小问题。我用下面的代码在 Y 轴上创建了我自己的标签，但是它们聚集在一起，我怎样才能把它们隔开？

这是我的代码：

```
 renderer.setYLabels(0); 

//value_value is an array which would use as the labels for the y axis

    int value_size = value_value.length;
        int m = 0;
        //int add =  value_size/10;
        int add =  largest_size/10;   // largest_size is the biggest value in the array value_value

        for(int i=0; i< 10; i++){

            if(m > value_value.length){
                 break;
             }
            renderer.addYTextLabel((double)i, value_value[m].toString(), 1);
            m+=add;
        } 
```

PS：从 api 文档中，有一个第三个参数“int scale”，我认为它可以帮助我腾出边距，但我似乎从未正确使用它。如果我在那里放任何值，我会得到一个 NullPointerException。它的真正作用是什么以及如何使用它？

任何帮助将不胜感激。谢谢你。

我的图表：

![在此处输入图像描述](../Images/7359e2c1c25e8b3ddd28e8d0b6ca5d04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:17:04.653

添加自定义标签可能会很棘手，因为您始终必须确保没有重叠它们。您应该只添加所需的数量以避免重叠。您还可以侦听平移和缩放事件并相应地更新自定义标签。

当您有多个 Y 轴刻度时，该`scale`参数很有用。如果没有，则不需要使用该参数。

# jquery - jQuery Mobile，allowSamePageTransition 不能多次转换到同一页面

> ID：13053601
> 
> 赞同：1
> 
> 时间：2012-10-24T16:35:07.997
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery Mobile 构建一个应用程序。我正在处理的页面从服务器加载内容并在转换到该页面之前更新 DOM。

虽然这不是应用程序，但我已经在这个简单的页面中隔离了问题，删除了所有 ajax 调用和所有其他 javascript 和 html：[Simplstic page](http://sources.featsoflife.com/test.html)

**所需的行为**：它应该加载第 2 页，然后在单击第 2 页上的链接时一次又一次地转换到第 2 页。如果我没记错的话，这就是 allowSamePageTransition 属性的用途。

**它的实际行为方式**：第 1 页上的链接转换到第 2 页，然后第 2 页上的链接再次转换到第 2 页，但是我无法单击任何内容，顶部的元素似乎是正文。

我已经设置了页面，因此您可以将源代码复制到编辑器中并在不修改任何链接的情况下试用。

我做错了什么还是这是一个错误，如果我错过了文档中的某些内容，请指出给我。我以前有这种机制可以工作，但现在我不明白为什么最简单的例子不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:03:37.487

不完全支持相同的页面转换。我对相同的“A”和“B”页面很幸运，然后在它们之间来回转换。

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)

使用相同的页面转换

默认情况下会忽略到当前活动页面的转换，但可以使用 $.mobile.changePage 方法的 allowSamePageTransition 选项启用。**请注意，并非所有转换都会按预期工作，并且可能以不切实际的结果结束。**

# timezone - 在复活节岛显示今天的日出/日落

> ID：13053604
> 
> 赞同：0
> 
> 时间：2012-10-24T16:35:19.537
> 
> 标签：timezone, astronomy

我需要在当地复活节岛时间显示复活节岛今天的日出和日落。我正在将它实施到[http://www.easterislandtraveling.com/easter-island/的侧边栏](http://www.easterislandtraveling.com/easter-island/)

我注意到 EarthTools (http://www.earthtools.org/webservices.htm#sun) 仅涵盖欧洲和美国。还有其他方法吗？

在[http://www.timeanddate.com/worldclock/astronomy.html?n=914](http://www.timeanddate.com/worldclock/astronomy.html?n=914)他们有所有必要的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:52:27.793

我在玩一些标准的 PHP 函数 date_sun_info()、date_sunrise() 和 date_sunset()，但我无法让它们与本地时区一起工作。

我找到了一个提供我正在寻找的服务的网站： [http ://www.happyzebra.com/widgets/sunrisesunset.php?city=Easter%20Island](http://www.happyzebra.com/widgets/sunrisesunset.php?city=Easter%20Island)

效果很好！[与http://www.timeanddate.com/worldclock/city.html?n=914](http://www.timeanddate.com/worldclock/city.html?n=914)相比，日出时仅相差 2 分钟

# dart - dart2js 编译的代码在不受支持的浏览器中运行

> ID：13053607
> 
> 赞同：1
> 
> 时间：2012-10-24T16:35:26.823
> 
> 标签：dart, dart2js

如果我尝试在不受支持的浏览器中运行生成的 javascript 代码会怎样？像IE6？

我不想让我的用户看到部分工作的应用程序损坏。有没有办法确保 dart/javascript 仅在浏览器受支持的情况下才能运行，并且如果不是，我的应用程序会优雅地降级为一些 html 横幅“请使用更新的浏览器”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:57:35.510

您可以在此处使用浏览器检测器脚本：[http ://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

我从头顶写了这段代码，我现在没有测试机器可供使用：

```
var isNewFirefox = BrowserDetect.browser === 'Firefox'  && BrowserDetect.version >= 7;
var isNewChrome  = BrowserDetect.browser === 'Chrome';
var isNewIE      = BrowserDetect.browser === 'Explorer' && BrowserDetect.version >= 9;
var isNewSafari  = BrowserDetect.browser === 'Safari'   && BrowserDetect.version >= 5.1;
var isNewOpera   = BrowserDetect.browser === 'Opera'    && BrowserDetect.version >= 12;

if (isNewFirefox || isNewChrome || isNewIE || isNewSafari || isNewOpera) {
    var script = document.createElement('script');

    if (navigator.webkitStartDart || navigator.startDart || navigator.mozStartDart || navigator.oStartDart || navigator.msStartDart) {
        // Load Dart code!
        script.setAttribute('type', 'application/dart');
        script.setAttribute('src', 'http://.../foo.dart');
    } else {
        // Load dart2js code!
        script.setAttribute('src', 'http://.../foo.js');
    }

    document.body.appendChild(script);
} else {
    alert('Application wont work');
} 
```

可以在以下位置找到版本信息：[http ://www.dartlang.org/support/faq.html#what-browsers-supported](http://www.dartlang.org/support/faq.html#what-browsers-supported)

Dart VM 检测：[http ://www.dartlang.org/dartium/#detect](http://www.dartlang.org/dartium/#detect)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:59:46.850

您始终可以在纯 javascript 中检测浏览器，并且在确保浏览器有效之前不要运行 dart 程序。

# contextmenu - 通过 App 修改 Spotify 上下文菜单

> ID：13053609
> 
> 赞同：0
> 
> 时间：2012-10-24T16:35:31.653
> 
> 标签：contextmenu, spotify

有没有办法在 Spotify 环境中访问/修改/添加项目到上下文菜单？

换句话说，是否有可能制作一个在运行时允许我例如转到播放列表、右键单击一首歌曲并在上下文菜单中有一个名为“我的上下文项目”的项目的应用程序，会显示警报吗？

*根据我的经验，“应用程序”仅存在于它们自己的窗口中，所以我想我的问题是应用程序会影响或获取全局环境/变量吗？

我想要的示例屏幕截图：http: [//i.imgur.com/e7B36.png](http://i.imgur.com/e7B36.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:48:23.940

简而言之，但是使用了很多词，所以 Stack Overflow 会接受这个作为答案：不，这是不可能的。对不起！

# android - 应用程序无响应 (ANR) 执行服务 android

> ID：13053611
> 
> 赞同：5
> 
> 时间：2012-10-24T16:35:47.370
> 
> 标签：android, service, runtime-error

![错误服务](../Images/44c36f18de9fe2d3fdc1ec835acd3185.png)

host.activity 是我的包，host.framework.ServicePromemoria 是一个安卓服务。

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T16:46:15.380

这意味着您的服务正在执行相当长的操作（大多数 ANR 来自大于 5 秒的操作）并且正在 UI 线程上执行。这可能是网络任务、数据库任务或其他一些长时间的操作。

您可以通过使用[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在主 UI 线程之外的服务中运行任务来解决此问题。

实际上，您可以直接将您的服务启动到一个新线程中，如下所示：

```
Thread t = new Thread(){
public void run(){
getApplicationContext().bindService(
        new Intent(getApplicationContext(), YourService.class),
        serviceConnection,
        Context.BIND_AUTO_CREATE
    );
}
};
t.start(); 
```

此外，如果您需要它以供以后使用，请缓存 bindservice 返回的值（如果有）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-07T10:15:18.507

虽然有一个可接受的答案，但我想在这里添加一些额外的内容。“应用程序无响应（ANR）执行服务 android”的原因是您的服务在超时期间没有完成它的生命周期调用（如 onCreate）。正常服务的默认超时时间是 20s 。如果您需要在 Servcie onCreate 中操作块，则需要启动一个新线程，或者您可以只使用 IntentService 。

# sts-springsourcetoolsuite - 有谁知道在切换到 JSP 时如何解决 STS 3.1 中存在的滞后问题？

> ID：13053615
> 
> 赞同：0
> 
> 时间：2012-10-24T16:35:58.277
> 
> 标签：sts-springsourcetoolsuite

在 STS 的最新版本 3.1.0 中切换到 JSP 时，我们看到大约 5-7 秒的延迟。有没有其他人经历过这个并且知道如何修复它（除了不使用不是一个更可取的选项的 JSP 编辑器）？我们正在考虑回滚到较旧的版本，因为这太令人恼火了。

还发布到 Spring 论坛： http: [//forum.springsource.org/showthread.php?131299 -STS-3-1-JSP-editor-lag](http://forum.springsource.org/showthread.php?131299-STS-3-1-JSP-editor-lag)

编辑：确认，STS 3.1 - e3.8 没有 JSP 滞后！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:47:52.810

确保您使用的是 Eclipse 3.8 版本的 STS。众所周知，Eclipse 4.2 版本存在一些性能问题，尤其是在切换编辑器时。

# symfony - Doctrine2 QueryBuilder - 字段名称中的变量

> ID：13053616
> 
> 赞同：2
> 
> 时间：2012-10-24T16:36:15.617
> 
> 标签：symfony, doctrine-orm, doctrine, query-builder

我试图将一个变量放入查询中的字段名称中，所以我有一个模式：

```
 id amazon - tesco - asda - happyshopper - 

  1   £5    - NULL  - NULL  -     £4.99
  2   NULL  - £2.99 - NULL  -     NULL 
```

进而

```
$store = 'amazon'; 

$qb = $em->createQueryBuilder();
        $products = $qb->select('p')->from('MyBundle:Product', 'p')
        ->where('p.:store IS NOT NULL')
        ->setParameter('store', $store)
        ->add('orderBy', 'p.onSale DESC')
        ->setMaxResults(40)
        ->getQuery()
        ->getResult(); 
```

将返回第 1 行。

我做了什么：

```
->where('p.:store IS NOT NULL')
->setParameter('store', $store) 
```

是不正确的，它会出错。

```
->where(':store IS NOT NULL')
->setParameter('store', $store) 
```

不会出错，但不会应用商店过滤器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T17:02:33.023

这里的简短答案是手动将商店名称放入字符串中：

```
->where("p.$store IS NOT NULL") 
```

或者

```
->where('p.' . $store . ' IS NOT NULL') 
```

长答案是您的数据库架构可能需要一些工作。例如，如果/当您想要添加新商店时会发生什么？您是否要添加一个新列并重新编码整个内容？更好的解决方案是将“存储”的概念分开，放在自己的表中，然后将所有内容连接到不同的表中。像这样的东西：

```
Product:
id | name | onSale
1  | foo  | 1
2  | bar  | 0

Store:
id | name    
1  | amazon
2  | tesco
3  | asda
4  | happyshopper

Price:
id | productId | storeId | price
1  | 1         | 1       | 5
2  | 1         | 4       | 4.99
3  | 2         | 2       | 2.99 
```

正确配置表和映射后，您的查询将变为：

```
$qb = $em->createQueryBuilder();
$products = $qb
    ->select('product')
    ->from('MyBundle:Price', 'price')
    ->innerJoin('price.product', 'product')
    ->innerJoin('price.store', 'store')
    ->where('store.name = :store')
    ->setParameter('store', $store)
    ->add('orderBy', 'product.onSale DESC')
    ->setMaxResults(40)
    ->getQuery()
    ->getResult(); 
```

# version-control - 带有注释的源代码版本控制（组织实践）——离开还是删除？

> ID：13053617
> 
> 赞同：1
> 
> 时间：2012-10-24T16:36:17.710
> 
> 标签：version-control, versioning, comments

在你开始用“*不要这样做*”、“*不好的做法*！”来警告我之前。和“*学习使用正确的源代码控制*”，**请先听我说完。**我完全意识到注释掉旧代码并将其永远留在那里的做法是非常糟糕的，我自己也讨厌这种做法。

但这就是我所处的情况。几个月前，我作为软件开发人员加入了一家公司。我在公司实习了几个月，最近才加入公司大约一年。我们公司使用源代码版本控制（CVS）但不正确。

这是我的实习和我目前的永久职位所发生的事情。每次我被分配从事一个项目（遗留，大约 8-10 岁）。一位高级同事没有创建 CVS 帐户并让我签出代码并签入更改，而是从 CVS 导出代码，将其压缩并传递给我。

虽然这位同事每隔几周会批量检查所有更改，但我们通常的做法是在实际源代码本身中进行细粒度的版本控制（每个文件的版本增量独立于其他文件）。每当对文件进行更改时，旧代码将被注释掉，新代码在其下方输入，并且整个部分都标有版本号。有关更改的注释放置在文件顶部的一个名为“*修改历史”*的部分中。最后，更改的文件被放置在一个共享文件夹中，准备好等待批量签入。

```
/*
 * Copyright notice blah blah
 * Some details about file (project name, file name etc)
 * Modification History:
 * Date         Version     Modified By     Description
 * 2012-10-15   1.0         Joey            Initial creation
 * 2012-10-22   1.1         Chandler        Replaced old code with new code
 */

code ....
//v1.1 start
//old code
new code
//v1.1 end
code .... 
```

现在的问题是这样的。在我正在处理的项目中，我需要从另一个项目中复制一些**新的**源代码文件（新的，因为它们以前在目标项目中不存在）。这些文件有很多历史注释掉的代码和基于注释的版本控制，包括通常很长或很长的*修改历史*部分。

由于这些文件是这个项目的新文件，我决定清理它们并删除不必要的代码，包括历史代码，并从 1.0 版重新开始。（尽管讨厌基于注释的版本控制，我仍然必须继续实践。别问为什么不从 0.1 版本开始......）我在实习期间做过类似的事情，没有人说什么。我的主管已经看过几次工作，并没有说我不应该做这样的清理工作（如果有的话）。

但一位同级同事看到了，表示不推荐，以后可能会造成停机，增加维护成本。一个例子是在另一个项目中对原始文件进行更改并且这些更改需要传播到该项目。由于代码文件完全不同，它可能会导致其他开发人员进行传播时感到困惑。这对我来说很有意义，并且是一个有效的观点。除了乱七八糟的代码带来的不便之外，我找不到任何理由进行清理。

所以，长话短说：鉴于我们公司的做法，在将新文件从项目复制到项目时，我不应该做这样的清理工作吗？在注释中对具有完整历史记录的原始代码（副本）进行更改会更好吗？**或者**我能为清理工作提供什么理由？

***PS to mods：****希望您允许这个问题一段时间，即使您出于任何原因确定它不适合 SO。如果有任何不合适的地方，包括标签，我会提前道歉。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:38:54.170

如果来自另一个项目的某些文件的副本真的意味着（对于这个来源）“分歧点”以及源代码和分叉的并行独立演变，那么遗留历史和注释代码实际上是“白噪声”，并且可以轻松消除. 对于未来可能的传播，仅在修改历史的第一行中提及**“分叉点”**就足够了，smth。喜欢

```
...
 * Date         Version     Modified By     Description
 * 2012-10-25   1.0         ADTC            Created from 12.34 of <filename>
... 
```

**提问者（ADTC）的附录：** 除了上面的答案之外，我还想引用一条评论。

> [...] 获取源代码，删除与谁做了什么相关的评论*（历史评论）*，但保留有关源代码/类/方法所做的*评论（信息性评论）*。评论区应该是这样的。它应该清楚地定义方法正在做什么，如何实现以及在什么情况下会抛出异常。–[胜利](https://stackoverflow.com/users/1385966/wins)，[2012-10-25 00:57:57Z](https://stackoverflow.com/questions/13053617/source-code-versioning-with-comments-organizational-practice-leave-or-remove#comment17737557_13055669)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:43:29.853

如果我要担任您的职位，我宁愿修改其他源代码并将其作为库在我的项目中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:19:39.923

I suggest using some version control yourself - I recommend [git](http://git-scm.com/). Have one branch for "upstream" code that is synchronized with whatever you senior colleague currently has. Then you can have one or more branches for your work. You will have good overview what changes you made using `git diff` against "upstream" branch, you can search history of everything you ever did on that project etc. And this all is automatic, without manual code versioning, the files are always "clean", with all their history available in git.

# ios - UITableViewCell 修复启用删除时标签的格式

> ID：13053619
> 
> 赞同：0
> 
> 时间：2012-10-24T16:36:19.723
> 
> 标签：ios, ios6

这是发生了什么：

![在此处输入图像描述](../Images/960e986aada889145816c4d5b0886a73.png)

我正在使用 iOS 6 和自动布局。如何在无需编写代码的情况下解决此问题。标签上有两个约束。

宽度应 <= 130 高度应 <= 55

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:33:53.730

这是其中的一个技巧！

```
-(void) tableView:(UITableView *)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    VegetableNoteCell *noteCell = (VegetableNoteCell *) [tableView cellForRowAtIndexPath:indexPath];

    NSArray *constraints = [noteCell.noteDescriptionLabel constraints];
    NSLayoutConstraint *horizontalConstraint = constraints[1];
    [horizontalConstraint setConstant:180.0];

}

-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{

    VegetableNoteCell *noteCell = (VegetableNoteCell *) [tableView cellForRowAtIndexPath:indexPath];

    NSArray *constraints = [noteCell.noteDescriptionLabel constraints];
    NSLayoutConstraint *horizontalConstraint = constraints[1];
    [horizontalConstraint setConstant:125.0];

    return UITableViewCellEditingStyleDelete;

} 
```

# ruby - 如何在使用 Ruby 的某个单词后获取部分字符串？

> ID：13053625
> 
> 赞同：3
> 
> 时间：2012-10-24T16:36:44.423
> 
> 标签：ruby, regex, string

我有一个包含路径的字符串：

```
/var/www/project/data/path/to/file.mp3 
```

我需要获取以'/data'开头的子字符串并删除它之前的所有内容。所以，我只需要得到`/data/path/to/file.mp3`.

最快的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:45:12.720

```
'/var/www/project/data/path/to/file.mp3'.match(/\/data.*/)[0]
=> "/data/path/to/file.mp3" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T19:49:55.503

可能很简单：

```
string = '/var/www/project/data/path/to/file.mp3'

path = string[/\/data.*/]

puts path
=> /data/path/to/file.mp3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:27:32.253

使用正则表达式是一个好方法。虽然我对 ruby​​ 不熟悉，但我认为 ruby​​ 应该有一些函数，比如“substring()”（可能是 ruby​​ 中的另一个名字）。

这是一个使用 javascript 的演示：

```
var str = "/var/www/project/data/path/to/file.mp3";
var startIndex = str.indexOf("/data");
var result = str.substring(startIndex ); 
```

以及 jsfiddle[演示上的链接](http://jsfiddle.net/S2Rfy/2/)

我认为 ruby​​ 中的代码类似，您可以查看文档。希望它有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T16:42:00.160

请试试这个：

```
"/var/www/project/data/path/to/file.mp3".scan(/\/var\/www(\/.+)*/) 
```

它应该返回所有事件。

# c# - windows服务文件删除c#

> ID：13053628
> 
> 赞同：1
> 
> 时间：2012-10-24T16:36:49.147
> 
> 标签：c#

windows服务示例代码

```
using System.Diagnostics;
using System.ServiceProcess;
using System.Text;
using System.IO;
namespace file_delete
{
    public partial class file_delete : ServiceBase
    {  
        public file_delete()
        {
            InitializeComponent();
        }
        protected override void OnStart(string[] args)
        {           
        }
        private void deleteFile(string folder)
        {
         System.IO.DirectoryInfo dirInfo = new System.IO.DirectoryInfo(folder);
         System.IO.FileInfo[] fileNames = dirInfo.GetFiles("*.*");
           foreach (System.IO.FileInfo fi in fileNames)
           {              
               fi.Delete();               
           } 
```

如何从 Windows 窗体中调用**deleteFile(string folder) ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:47:19.207

您可以使用[OnCustomCommand](http://www.c-sharpcorner.com/uploadfile/aa04e6/how-to-implement-oncustomcommand-method-in-windows-service-application/)覆盖，但这仅将整数作为参数，并且不支持将字符串传递给服务。

其他选项是创建[WCF 服务](http://www.codeproject.com/Articles/38160/WCF-Service-Library-with-Windows-Service-Hosting)或使用[Remoting](http://www.codeproject.com/Articles/1111/How-To-Host-NET-Remoting-Objects-in-Windows-Servic)将您需要的信息传递给服务并调用 delete 方法。

编辑：回答评论中关于如何以一种非常奇怪的方式使用 OnCustomCommand 的问题如下。

在服务中，您将需要这样的东西。

```
private const int CMD_INIT_DELETE = 1;
private const int CMD_RUN_DELETE = 0;

private bool m_CommandInit = false;
private StringBuilder m_CommandArg = new StringBuilder();

protected override void OnCustomCommand(int command)
{
    if (command == CMD_INIT_DELETE)
    {
        this.m_CommandArg.Clear();
        this.m_CommandInit = true;
    }
    else if (this.m_CommandInit)
    {
        if (command == CMD_RUN_DELETE)
        {
            this.m_CommandInit = false;
            this.deleteFile(this.m_CommandArg.ToString());
        }
        else
        {
            this.m_CommandArg.Append((char)command);
        }
    }
} 
```

在 windows 窗体应用程序中，您将拥有类似这样的内容

```
private const int CMD_INIT_DELETE = 1;
private const int CMD_RUN_DELETE = 0;

private void RunServiceDeleteMethod(string delFolder)
{
    serviceController1.ExecuteCommand(CMD_INIT_DELETE);

    foreach (char ch in delFolder)
        serviceController1.ExecuteCommand((int)ch);

    serviceController1.ExecuteCommand(CMD_RUN_DELETE);
} 
```

这未经测试，仅作为概念证明。同样，我不建议这样做，上面的示例只是说明如何不在桌面应用程序和服务之间进行这种类型的通信。

# php - 在 Magento 中将产品添加到类别

> ID：13053631
> 
> 赞同：0
> 
> 时间：2012-10-24T16:36:56.140
> 
> 标签：php, sql, magento, categories, product

有没有办法通过类别管理来选择哪些产品属于哪个类别？

我有 1000 种产品和 10 个类别。到目前为止，我必须去每个产品并在它所属的地方打勾。

我想以其他方式进行 - 选择类别并勾选属于该类别的产品。会更痛苦:) 有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:39:46.430

这可以在目录 -> 管理类别下完成。选择类别，然后单击类别产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:53:55.727

按照 aynber 的说明转到目录 -> 管理类别，然后在左栏中单击您的类别，选择类别后，您将转到屏幕右侧的产品选项卡。

在那里你得到了这个类别的所有产品，在标题的第一列你有组合框是/否/两者。

选择两者，然后按过滤器。

# objective-c - 使用 bonjour 将 Mac 与 iPhone 连接

> ID：13053632
> 
> 赞同：5
> 
> 时间：2012-10-24T16:36:55.980
> 
> 标签：objective-c, ios, macos, bluetooth, bonjour

我正在尝试使用 bonjour 和蓝牙在我的 mac 和我的 iPhone 之间建立连接。

我已经阅读了一些内容，从这些站点中我了解到我不能像第一次尝试那样使用 NSNetService。

[Bonjour 在没有 Gamekit 的情况下通过蓝牙？](https://stackoverflow.com/questions/3844189/bonjour-over-bluetooth-without-gamekit)

[在 iOS 5.0 上通过蓝牙享受 Bonjour](https://developer.apple.com/library/ios/#qa/qa1753/_index.html#//apple_ref/doc/uid/DTS40011315)

所以我修改了 DNSSDObjects 示例代码，改为使用 kDNSServiceInterfaceIndexP2P 标志。 [DNSSD 对象](https://developer.apple.com/library/mac/#samplecode/DNSSDObjects/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011371)

但我仍然无法将我的 iPhone 与我的 mac 连接。如果我将标志改回 kDNSServiceInterfaceIndexAny，我可以通过 Wifi (lan) 建立连接。但是使用蓝牙的 kDNSServiceInterfaceIndexP2P 或 kDNSServiceFlagsIncludeP2P 没有运气。

是否缺少某些东西，甚至可以使用 bonjour 和蓝牙连接 OSX 和 iOS 吗？

# php - PHP MYSQL 博客存档菜单按年和月

> ID：13053636
> 
> 赞同：7
> 
> 时间：2012-10-24T16:37:10.363
> 
> 标签：php, mysql, menu, blogs, archive

我正在寻找一种有效的方法将所有博客文章整理成以下格式的菜单：

**2012**

*   八月（6）
*   九月(4)
*   十月(2)

表示月份的月份（显然），括号内的值表示该月份的帖子数。单击后，将搜索该月、该年的所有帖子。

我需要它是动态的，在当月创建帖子时自动选择 11 月，并持续到 12 月、2013 年等等……

我所拥有的只是每个帖子的 UNIX 时间戳。我真的很想避免使用单独的函数来收集无尽的复杂数组等。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T16:55:52.010

根据您的问题，我了解到您正在尝试提出一个查询，以按月和年对多个元素进行分组。以下应该可以解决问题：

```
SELECT 
    YEAR(dateField) AS YEAR, 
    MONTH(dateField) AS MONTH,
    COUNT(*) AS TOTAL 
FROM table 
GROUP BY YEAR, MONTH 
```

显然，“dateField”是您的日期时间/时间戳列的名称，“table”是您的表的名称。

有关 GROUP BY 子句和聚合函数（例如上面使用的 COUNT(*) 函数）的更多信息，请[点击此处](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

# c# - 无法验证 Windows Server 证书的服务总线

> ID：13053641
> 
> 赞同：4
> 
> 时间：2012-10-24T16:37:18.083
> 
> 标签：c#, x509certificate, servicebus

[为 Windows Server](http://msdn.microsoft.com/en-us/library/jj193022%28v=azure.10%29.aspx)使用服务总线

我得到以下异常。

> Message=X.509 证书 CN=*********** 不在受信任的人员存储中。X.509 证书 CN=********** 建链失败。使用的证书具有无法验证的信任链。更换证书或更改 certificateValidationMode。无法验证证书的签名。

我正在尝试从我的 Dev Box 连接到另一台计算机上的服务总线

这是我正在使用的控制台应用程序的代码。

```
ServicePointManager.ServerCertificateValidationCallback = 
   new RemoteCertificateValidationCallback(ValidateServerCertificate);
ServicePointManager.CheckCertificateRevocationList = false;

NamespaceManager namespaceManager = NamespaceManager.Create();
MessagingFactory messagingFactory = MessagingFactory.Create();

if (namespaceManager.QueueExists(QueueName))
{    
    namespaceManager.DeleteQueue(QueueName);    
}
namespaceManager.CreateQueue(QueueName);

string QueueName = "ServiceBusQueueSample";                       
QueueClient myQueueClient = messagingFactory.CreateQueueClient(QueueName);

BrokeredMessage sendMessage = new BrokeredMessage("Hello World !");   
myQueueClient.Send(sendMessage); <---- !!!Exception!!! 
```

我使用以下方法从服务总线服务器导出了证书：Get-SBAutoGeneratedCA AutoGeneratedCA.cer AutoGeneratedCA.cr1

然后，我使用默认设置将这两个文件导入到我的开发框中。

我已将以下项目添加到我的 app.config 中。

```
 <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior >
          <clientCredentials>
            <serviceCertificate>
              <authentication  certificateValidationMode="None" 
                                                       revocationMode="NoCheck" />
            </serviceCertificate>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>

  <microsoft.identityModel>    
   <service>       
      <certificateValidation certificateValidationMode="None"    />
   </service>    
  </microsoft.identityModel> 
```

我能够成功验证并检查队列是否存在并将其删除然后创建一个新队列。

在寻找解决方案时，我发现[这](http://social.msdn.microsoft.com/Forums/en-US/windowsazuremanagement/thread/35019411-afe4-4a7d-a864-c85199400092) 表明吊销服务器存在问题，因为我还导入了证书吊销列表我没有看到这是我的问题

我还发现[了这个](https://stackoverflow.com/questions/6534836/x-509-chain-building-failed-when-connecting-to-the-appfabric)：链接到这篇博客[文章](http://weblogs.asp.net/israelio/archive/2005/03/14/394513.aspx#6648507)：我遵循了这个建议，但没有成功。

此博客[文章](http://blogs.breeze.net/mickb/2012/01/31/AzureServiceBusFixingTheDreadedTheX509CertificateCNservicebuswindowsnetChainBuildingFailedError.aspx)：
建议设置 revocationMode="NoCheck" 对此问题没有影响，他的解决方案是欺骗证书吊销列表

此博客[文章](http://zamd.net/2010/10/05/web-services-federation-with-acs-v2/)：建议添加端点行为以禁用证书验证模式，我做到了，但我仍然收到错误。

注意：当我在我的开发机器上托管服务总线时，一切正常。

有什么我没有尝试过的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:14:00.107

原来我没有正确导入证书......

我按照这些说明进行操作，一切正常。

[http://msdn.microsoft.com/en-us/library/windowsazure/jj192993(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj192993(v=azure.10).aspx)

我猜右键单击并安装证书将它们放在错误的位置。

# mysql - 添加 3 列并获得该添加的 MAX 值

> ID：13053643
> 
> 赞同：2
> 
> 时间：2012-10-24T16:37:21.700
> 
> 标签：mysql, sql, add, max, multiple-columns

我有一个表，我想选择 3 列的值，为表中的每一行添加这 3 个值并获得该总和的最大值。

我已经尝试了每一行的总和，但它不起作用，下一句我得到的只有 1 行的总和，现在不知道为什么它不向我显示其余的行。

```
select id, l, rl, cl, sum(l+r+c) as total from pin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:44:23.373

```
select id, 
       l, 
       rl, 
       cl, 
       l+r+c as total
       (select max(l+r+c) from pin) as max
from pin 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/1f480/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:44:36.430

你可以这样做：

```
select *, l+rl+cl as total from pin 
```

这是 SQL 小提琴：[http ://sqlfiddle.com/#!2/a22b4/5](http://sqlfiddle.com/#!2/a22b4/5)

如果你只想要最大值，你可以这样做：

```
select max(l+rl+cl) from pin 
```

这是小提琴：[http ://sqlfiddle.com/#!2/a22b4/13](http://sqlfiddle.com/#!2/a22b4/13)

# events - d3js：_on()_ 不会将当前数据对象发送到 onmouse 函数

> ID：13053649
> 
> 赞同：2
> 
> 时间：2012-10-24T16:37:38.190
> 
> 标签：events, d3.js, highlight, force-layout

当连接的节点悬停时，我想突出显示图形的边缘。我从[Bundle 示例](http://mbostock.github.com/d3/talk/20111116/bundle.html)中获得灵感：

![在此处输入图像描述](../Images/4d19af65a34c2d05f41367462a21bc4d.png)

但是 on() 函数没有将 d 对象提供给 onmouse 函数：

```
d3.json("graph_file.json", function(json) {
      force
          .nodes(json.nodes)
          .links(json.links)
          .start();

      var link = svg.selectAll("line.link")
          .data(json.links)
        .enter().append("line")
          .attr("class", function(d) { return "link source-" + d.source.key + " target-" + d.target.key; })
          .style("stroke-width", function(d) { return Math.sqrt(d.value); });

      var node = svg.selectAll("circle.node")
          .data(json.nodes)
        .enter().append("circle")
          .attr("class", "node")
          .attr("r", function(d) { return d.connec; })
          .style("fill", function(d) { return color(d.group); })
          .on("mouseover", mouseover)
          .on("mouseout", mouseout)
          .call(force.drag); 
```

...

```
 function mouseover(d) {
      svg.selectAll("line.link.target-" + d.key)
          .classed("target", true);

      svg.selectAll("line.link.source-" + d.key)
          .classed("source", true);
    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:10:05.373

最终我无法重现您的问题！一开始唯一吸引我的是当我在 .on(...) 中设置鼠标悬停和鼠标悬停函数后定义它们时叫。

无论如何，你可以看到我[在这里](http://jsfiddle.net/tjYTL/2)尝试了什么。编码：

```
var w = 400,
    h = 400;
var vis = d3.select("svg").attr("width", 800).attr("height", 800);

var nodes = [];
var links = [];

for (var i = 0; i < 30; i++) {
    var node = {
        label: "node " + i,
        value: Math.random(),
        key: i
    };
    nodes.push(node);
};

for (var i = 0; i < nodes.length; i++) {
    for (var j = 0; j < i; j++) {
        if (Math.random() > .95) links.push({
            source: nodes[i],
            target: nodes[j],
            weight: Math.random()
        });
    }
};

var force = d3.layout.force().size([w, h]).nodes(nodes).links(links);

force.start();

var link = vis.selectAll("line.link").data(links).enter().append("line").style("stroke", "#CCC").attr("class", function(d) {
    return "link source-" + d.source.key + " target-" + d.target.key;
});

var mouseover = function(d) {
    txt.text(JSON.stringify(d));
    //txt.text("line.link.target-" + d.key);
    vis.selectAll("line.link.target-" + d.key).classed("target", true).style("stroke", '#F00');

    vis.selectAll("line.link.source-" + d.key).classed("source", true).style("stroke", '#F00');
}

var mouseout = function(d) {
    vis.selectAll("line.link.target-" + d.key).classed("target", false).style("stroke", "#CCC");

    vis.selectAll("line.link.source-" + d.key).classed("source", false).style("stroke", "#CCC");
}

var node = vis.selectAll("circle.node").data(force.nodes()).enter().append("circle").attr("class", "node").attr("r", 5).style("fill", function(d) {
    return d3.rgb(55 * d.value, 255 * d.value, 155 * d.value)
}).style("stroke", "#FFF").style("stroke-width", 3).on("mouseover", mouseover).on("mouseout", mouseout).call(force.drag);

var txt = vis.append('text').attr({
    transform: 'translate(5,400)'
}).text("Node Info");

var updateLink = function() {
    this.attr("x1", function(d) {
        return d.source.x;
    }).attr("y1", function(d) {
        return d.source.y;
    }).attr("x2", function(d) {
        return d.target.x;
    }).attr("y2", function(d) {
        return d.target.y;
    });
}

var updateNode = function() {
    this.attr("transform", function(d) {
        return "translate(" + d.x + "," + d.y + ")";
    });
}

force.on("tick", function() {
    node.call(updateNode);
    link.call(updateLink);
});​ 
```

# android - RestTemplate - 放置 - 错误的接受标头 - 需要解决方法

> ID：13053655
> 
> 赞同：0
> 
> 时间：2012-10-24T16:37:59.090
> 
> 标签：android, resttemplate

我一直在使用 RestTemplate 并且一直很满意！

但现在它糟透了。

我以前是这样做的：

```
 RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add(new GsonHttpMessageConverter());
        restTemplate.put(URI, object); 
```

通常我的服务器以 Ruby 方式接受 URL 中的格式：resource.json

但是现在我正在使用一个不再这样做的服务器。我需要使用 Header 来处理格式。

一切正常，restTemplate 将 content-type 设置为 application/json 但不要设置 Accept 标头。所以我的服务器发出 406 错误，因为默认格式是 HTML，而且他不呈现 html。

那么，是否有人有将内容和接受标头都放入 json 并添加 json 格式的正文的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:39:08.813

您可以从 RestTemplate 对象获取标头并添加您需要的内容（因为标头只不过是一张地图）。

以下是 Dam 运行后提供的示例代码：

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new GsonHttpMessageConverter()); 
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setContentType(MediaType.APPLICATION_JSON);
requestHeaders.setAccept(Arrays.asList(new MediaType[] {MediaType.APPLICATION_JSON}));
HttpEntity<T> requestEntity = new HttpEntity<T>((T) parameter, requestHeaders);  
restTemplate.exchange(URI , HttpMethod.PUT, requestEntity, null ); 
```

# ios - 避免在 CoreBluetooth 中重新连接时发现服务和特征

> ID：13053657
> 
> 赞同：9
> 
> 时间：2012-10-24T16:38:05.590
> 
> 标签：ios, core-bluetooth

我正在为 iPhone 开发 CoreBluetooth 管理器应用程序。为了能够重新连接到以前发现的 CBPeripheral，我保存了外围设备的 UUID（在 CoreData 中），然后调用 CBCentralManager 的 retrievePeripherals:。我的 didRetrievePeripherals: 回调被调用，我可以连接等等。到目前为止一切都很好。

由于我正在重新连接到我已经知道的外围设备，因此我想避免发现它的服务和特征。因此，当我第一次连接时，我保存了服务和特性的 UUID（同样在 CoreData 中，以及外围设备的 UUID）。

但是我不能使用这些 UUID 来读取或写入特征，因为 CBPeripheral 的 readValueForCharacteristic: 或 writeValueForCharacteristic: 以 CBCharacteristic 作为参数，并且没有 API 来构造 CBCharacteristic 实例。

有什么方法可以避免在重新连接之前已知的外围设备时发现服务和特征？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T21:31:01.807

Mezulu，你想使用加密/配对的链接——然后 iOS 会为你做缓存。[在这里](https://stackoverflow.com/questions/14870948/reconnect-a-cbperipheral-faster/16051170#16051170)查看我的答案。

# html - 如何逐字显示标签内的字符串？

> ID：13053659
> 
> 赞同：0
> 
> 时间：2012-10-24T16:38:05.730
> 
> 标签：html, tags, blogger

我可以使用什么标签来防止任何解释？我需要它，因为我需要写下一些源代码，这会导致博客。我在 blogspot 中有此代码，但其中的代码`<pre>`已处理

代码如下：

```
<pre class='prettyprint'>
$latex \displaystyle S(n)=\sum_{k=1}^{n}{\frac{1}{T_{k}}=\sum_{k=1}^{n}{\frac{6}{k(k+1)(k+2)}$
</pre>

This is the result:
$latex \displaystyle S(n)=\sum_{k=1}^{n}{\frac{1}{T_{k}}=\sum_{k=1}^{n}{\frac{6}{k(k+1)(k+2)}$ 
```

![在此处输入图像描述](../Images/a0953294c7f9b17e86de6a6e6d5065ea.png)

当我可以用等效的东西替换'$'时`<pre>`，我可以避免这个问题。

我试过`<code>`and `<pre>`，但他们都解释了内容。

## 添加

我正在尝试使用[在这篇文章中找到的 javascript 代码。](http://www.mymathforum.com/viewtopic.php?f=55&t=15293)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:31:17.067

如果我理解正确，您使用的是[Replacemath](http://replacemath.appspot.com/static/docs.html)，它的文档说：“如果您需要防止某些 $ 符号触发 LaTeX 渲染，请将 $ 替换为等效的 HTML `<span>$</span>`or `&#36;`，或者将代码放在 a `<pre>`or`<code>`块中（如果合适）。” 其中，第一种方法似乎确实有效。

也就是说，将`pre`元素内所有出现的“$”替换为`<span>$</span>`。

[我通过在我的博客](http://yuccablog.blogspot.fi/)中发布一个测试来测试这一点（它已经休眠了 6 年......）。我不得不手动打破`pre`块以适应列。

# php - mysqli_query、mysqli_fetch_array 和 while 循环

> ID：13053660
> 
> 赞同：6
> 
> 时间：2012-10-24T16:38:11.170
> 
> 标签：php, mysql

我是 PHP 新手，我正在尝试使用 PHP 构建网站。我有 localhost 来测试结果，并且我已经在网站上安装了 phpmyadmin。

我现在要做的是从数据库“门户”中列出我的表“属性”的内容，并用结果填充一个表。

我正在使用`mysqli_query`,`mysqli_fetch_array`和 while 循环。我收到以下错误：

> 警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值在 C:\xampp\htdocs\falcon\portal\forms\edit Listing.php 第 15 行给出

```
session_start();
require_once "connect_to_mysql.php"; // where i store username and password to access    my db.

$sqlCommand = "SELECT * property FROM portal"; // dbname: portal - table: propery
$query = mysqli_query($myConnection, $sqlCommand);

$Displayproperty = '';
while ($row = mysqli_fetch_array($query))
$id = $row["pid"];
$title = $row["ptitle"];
$area = $row["parea"];
$city = $row["pcity"];
$Displayproperty .= '<table width="500" border="0" cellspacing="0" cellpadding="1">
<tr>
<td>' . $id . '</td>
<td>' . $title . '</td>
<td>' . $area . '</td>
<td>' . $city . '</td>
<td><a href="forms.php?pid=' . $id . '">Upload images</a><br /></td>
</tr>
</table>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:42:02.627

你的查询是错误的，所以之后

```
$query = mysqli_query($myConnection, $sqlCommand); 
```

$query 是假的。这就是为什么，你得到错误。

正确的 SQL 查询是：

```
SELECT * FROM portal.property 
```

如果需要指定数据库名称。另外，在做之前：

```
while ($row = mysqli_fetch_array($query)) 
```

您应该检查 $query 是否存在

```
if(!empty($query) {
while ($row = mysqli_fetch_array($query)) {
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:41:36.947

它应该是

```
$sqlCommand = "SELECT * FROM portal.property"; /* Database_Name.Table_Name */ 
```

或者干脆使用

```
$sqlCommand = "SELECT * FROM property"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T16:41:52.093

用这个替换你的查询。确保您之前已添加此行。

```
$db = mysql_select_db('portal');

$sqlCommand = "SELECT * FROM property"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T16:39:47.343

问题是您的 SQL 语句中的语法错误，导致`mysqli_query()`返回 false。

`SELECT * property FROM portal`不是有效的 SQL。

您应该始终检查以确保 mysqli_query 返回具有以下构造的有效结果：

```
$result = mysqli_query($myConnection, $sqlCommand);
if(! $result) {
    die("SQL Error: " . mysqli_error($myConnection));
}

// use result here..... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T16:40:25.727

你的 SQL 语句

```
SELECT * property FROM portal 
```

不是正确的 sql，因此查询不会被执行。尝试删除该词 `property`以获得一些结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T16:43:31.437

您需要首先使用以下方式连接到数据库门户：

```
$myConnection = new mysqli("localhost", "user", "password", "database"); 
```

然后运行：

```
$mysqli->query("SELECT * FROM property"); // This will run the query on portal database. 
```

如果您想简单地查询门户的属性表，您可以使用：

```
$mysqli->query("SELECT * FROM portal.property"); 
```

或者

```
mysqli_query("SELECT * FROM portal.property"); 
```

# wpf - 二维网格视图

> ID：13053661
> 
> 赞同：0
> 
> 时间：2012-10-24T16:38:12.583
> 
> 标签：wpf, xaml, windows-8

所以我只是尝试创建一个 GridView，我将鼠标悬停在每个项目上并突出显示它们。我还希望能够选择单个项目。

我有这个工作，每个项目都是一个矩形，但这似乎只适用于单行/方向。

我想要一个网格（似乎很明显网格有行和列），但我不知道如何添加更多行。

我查看了代码源，它们都深入到定义源或其他内容的过于复杂的代码行为文件中。

GridView 元素不是简单地具有 Columns="7" 类型属性吗？

这是我拥有的 XAML：

风格资源

```
<ItemsPanelTemplate x:Key="colorSelectionRowTemplate">
    <StackPanel Orientation="Horizontal">
        <StackPanel.ChildrenTransitions>
            <TransitionCollection/>
        </StackPanel.ChildrenTransitions>
    </StackPanel>
</ItemsPanelTemplate>
<Style x:Key="colorSelectionRow" TargetType="GridView">
    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Enabled"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
    <Setter Property="GridView.ItemsPanel" Value="{StaticResource colorSelectionRowTemplate}"/>
</Style>
<Style x:Key="colorSelection" TargetType="Rectangle">
    <Setter Property="Width" Value="30"/>
    <Setter Property="Height" Value="30"/>
</Style> 
```

行

```
<GridView Style="{StaticResource colorSelectionRow}">
    <Rectangle Style="{StaticResource colorSelection}" Fill="AliceBlue" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="AntiqueWhite" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Aqua" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Aquamarine" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Azure" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Beige" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Bisque" Tapped="OnColorSelectionTapped"/>
</GridView>
    <GridView Style="{StaticResource colorSelectionRow}">
    <Rectangle Style="{StaticResource colorSelection}" Fill="AliceBlue" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="AntiqueWhite" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Aqua" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Aquamarine" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Azure" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Beige" Tapped="OnColorSelectionTapped"/>
    <Rectangle Style="{StaticResource colorSelection}" Fill="Bisque" Tapped="OnColorSelectionTapped"/>
</GridView> 
```

作为两行的示例...

但显然这样一来，如果您从每一行中选择一个（单个 GridView），就会有多个选择。

任何人都知道一个简单的解决方法，所以我可以在同一个 GridView 中有 4 行，每行有 7 列？

感谢您阅读这一切，感激不尽。

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:25:13.707

如果其他人被这个看似过于复杂的元素卡住，我的问题的答案是项目面板模板中的 WrapGrid。

```
<ItemsPanelTemplate x:Key="colorSelectionRowTemplate">
    <WrapGrid Orientation="Horizontal" MaximumRowsOrColumns="7">
    </WrapGrid>
</ItemsPanelTemplate> 
```

# sql-server - T-SQL 中多次选举的最佳结果

> ID：13053668
> 
> 赞同：0
> 
> 时间：2012-10-24T16:39:01.473
> 
> 标签：sql-server, tsql, select, views

我有一张桌子，上面有来自多个部门（将每个部门视为一个州或类似部门）对多个候选人的投票。每个部门都有多个候选人，每个候选人都有不同的选票。

这是我的表（简化）

```
CREATE TABLE [Results]
(
    [SectorID] BIGINT,
    [CanditateID] BIGINT, 
    [VoteCount] BIGINT,
    [Newness] DATETIME
) 
```

我显然将扇区和候选元数据保存在另一个表中，但我需要为每个扇区找到投票最高的候选者，因此我可以将这些表连接到一个视图中。

每个部门的最佳候选人，由 决定`[VoteCount]`，如果有两个投票数相同，则由 决定`[Newness]`。每个扇区必须保留一行，并且我必须能够在视图中使用它，并与元数据连接在一起。

我如何从每个部门中获得最高票数的候选人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:53:47.410

假设您使用的是 SQL Server 2005 或更高版本，您希望通过以下方式执行此操作`row_number()`：

```
select r.*
from (select r.*,
             row_number() over (partition by SectorId order by VoteCount desc, Newness desc) as seqnum
      from Results r
     ) r
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:03:04.167

这将起作用并且可以加入：

```
SELECT 
    TR.SectorID, TR.CandidateID
FROM
    tblResults TR
    INNER JOIN ...
    INNER JOIN ...
WHERE CandidateID =
(
    SELECT TOP 1 CandidateID
    FROM tblResults TRSUB
    WHERE TRSUB.SectorID = TR.SectorID
    ORDER BY VoteCount DESC, Newness DESC
) 
```

# c++ - 如何在图中找到所有前向边和交叉边

> ID：13053672
> 
> 赞同：2
> 
> 时间：2012-10-24T16:39:24.080
> 
> 标签：c++, c, algorithm, graph

我知道什么是前沿和跨界。但是我发现很难在程序中实现它们以找到给定图中的所有前向和交叉边。

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:44:52.247

您可以使用 DFS 横向对所有图边进行分类：

```
DFS-Visit(u)         ▷ with edge classification. G must be a directed graph

1\.        color[u] ← GRAY
2\.        time ← time + 1
3\.        d[u] ← time
4\.        for each vertex v adjacent to u
5\.            do if color[v] ← BLACK
6\.                then if d[u] < d[v]
7\.                            then Classify (u, v) as a forward edge
8\.                            else Classify (u, v) as a cross edge
9\.                        if color[v] ← GRAY
10\.                            then Classify (u, v) as a back edge
11\.                       if color[v] ← WHITE
12\.                            then π[v] ← u
13\.                                 Classify (u, v) as a tree edge
14\.                                 DFS-Visit(v)
15\.        color[u] ← BLACK
16\.        time ← time + 1
17\.        f[u] ← time 
```

正如你[在这里](http://www.personal.kent.edu/~rmuhamma/Algorithms/MyAlgorithms/GraphAlgor/depthSearch.htm)看到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-02T19:43:44.387

您也可以使用时钟代替颜色。这似乎更容易。这是实现这一点的方法：但是我将在c中发布答案，因为我还不知道c++，所以你必须将它转换为c++。

```
void DFS(Graph* G){             
int v;

for (v=0; v < G->n; v++)
  visited[v]=FALSE;

for (v=0; v < G->n; v++){
  if (!visited[v])
    Traverse(G, v);
 }

}

void Traverse(Graph* Gr, int v){                
int w;
Edge *current;

start[v]=clock;                             //We are going to classify the edges by the time they were visited
clock++;
visited[v]=TRUE;

current=Gr->stpoint[v];

while (current){
    w=current->vertex;

    if (!visited[w]) {                          
        printf("%d %d: Tree edge\n",v,w);       //If w is not visited then mark v-w as a tree edge
        if(!current)
            Traverse(Gr, w);
    }
    else{

        if((start[v] > start[w]) && (end[v] < end[w]))      //v was visited after w
            printf("%d %d: Back edge\n",v,w);
        else if ((start[v] < start[w]) && (end[v] > end[w]))    //v was visited before w
            printf("%d %d: Forward edge\n",v,w);
        else if ((start[v] > start[w]) && (end[v] > end[w]))    //
            printf("%d %d: Cross edge\n",v,w);

    }
    end[v]=clock;
    clock++;
    current=current->next;
 }

} 
```

# magento - magento 重写目录块 Product/View/Options/Type/Select.php

> ID：13053674
> 
> 赞同：2
> 
> 时间：2012-10-24T16:39:30.140
> 
> 标签：magento

我想重写块文件：/app/code/core/Mage/Catalog/Block/Product/View/Options/Type/Select.php，下面是我的步骤，但它不起作用：

[截图： http](http://imm.io/J36p) ://imm.io/J36p

代码：[http ://www.heypasteit.com/clip/0JJ8](http://www.heypasteit.com/clip/0JJ8)

谁知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:00:15.620

在链接的代码中（为后代），路径`global/blocks/catalog/rewrite/Product_View_Options_Select` 应该是 `global/blocks/catalog/rewrite/product_view_options_select`，因为在布局 XML 文件中使用小写指定块类（例如[https://github.com/benmarks/magento-mirror/blob/1.7.0.2/ app/design/frontend/base/default/layout/catalog.xml#L228](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/design/frontend/base/default/layout/catalog.xml#L228)）。

/app/code/local/Lbb/Catalog/etc/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>  
<config>  
    <modules>  
        <Lbb_Catalog>  
            <version>0.1.0</version>  
        </Lbb_Catalog>  
    </modules>  
    <global>  
        <blocks>  
            <catalog>  
                <rewrite>  
                        <product_view_options_type_select>Lbb_Catalog_Block_Product_View_Options_Type_Select</product_view_options_type_select>  
                </rewrite>  
            </catalog>  
        </blocks>  
    </global>  
</config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:32:53.867

我从一个工作示例中获得此代码，因此它应该可以工作

/app/code/local/RWS/CustomOptions/Options/Type/Select.php

```
<?php 
  class RWS_CustomOptions_Options_Type_Select extends Mage_Catalog_Block_Product_View_Options_Abstract
  {
      public function getValuesHtml()
      {
        ..... 
```

/app/code/local/RWS/CustomOptions/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <RWS_CustomOptions>
            <version>0.1.0</version>
        </RWS_CustomOptions>
    </modules>
    <global>
        <blocks>
            <catalog>
                <rewrite>
                    <product_view_options_type_select>RWS_CustomOptions_Options_Type_Select</product_view_options_type_select>
                </rewrite>
            </catalog>
        </blocks>
    </global>
</config> 
```

/app/etc/modules/RWS_CustomOptions.xml

```
<?xml version="1.0"?>
<config>
    <modules>
      <RWS_CustomOptions>
        <active>true</active>
        <codePool>local</codePool>
     </RWS_CustomOptions>
    </modules>
<config> 
```

要进行测试，请使用自定义选择选项在 magento admin 中添加一个（简单）产品，即 go product detail/view 页面。

# javascript - 为什么这个 Twitter 脚本标签试图评估为真？有关系吗？

> ID：13053677
> 
> 赞同：4
> 
> 时间：2012-10-24T16:39:45.780
> 
> 标签：javascript, twitter, cross-browser

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

我正在维护一个带有“tweet”按钮的现有网站，该按钮似乎来自[此页面](https://dev.twitter.com/docs/tweet-button)

这里的一位同事提出了一个很好的问题：为什么这个脚本标签会反转`undefined`这个自调用函数的（通过无返回语句）值？（为了阅读方便，原文在链接中）

```
<script>
  !function(d,s,id) {
//^--- that
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)) {
      js=d.createElement(s);
      js.id=id;
      js.src="https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script> 
```

在我的非 JS 专业人士看来，这似乎是在翻转 的布尔值`undefined`，从而允许整个`<script>`标签评估为真。对于它的价值，这对我来说是一个完全陌生的想法（该`<script>`标签具有表达式值）。

我的期望是有一些特定的浏览器，`<script>`标签的*布尔值*（是的，即使打字我也觉得很疯狂）很重要。

所以基本的问题是：对于你知道的任何浏览器，a**是否`<script>`具有有意义的“表达式”值？****在这种情况下，真与假的隐含含义是什么**？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:20:10.837

An explanation of what is going on and why...

In Javascript, you have `function statements` and `function expressions`. The two of them are similar, but not exact.

**Function statement**

```
function myTest() {return true;} 
```

**Function Expressions**

```
var f = function() {return true;}
alert(f()); //

alert(function() { return true}); // Return value is used

// and even

(function(x, y) {
  var z, x; // private variables, hidden from the outside scope
  var r = x  + y;
  // Return value is ignored.
}(1, 2));

// The ! can be used to start a function expression too.
// This is totally legal Javascript, but it isn't in the normal
// "vernacular" of the langage
!function(x, y) {
  var z, z1; // Private vars
  // Do something with side effects
  // Return value is ignored.
}(x, y); 
```

**Updated due to comments**

```
//The following code works identical:
var v1 = (function(a, b) {return a+b}(1,2));
var v2 = (function(a, b) {return a+b})(1,2);
var v3 = function(a, b) {return a+b}(1,2) 
```

I prefer the first form because it lets me use the block matching tools on my editor, and the `f1` form is preferred by the sometimes useful programs [JSLint](http://www.jslint.com/) and [JSHint](http://www.jshint.com/).

All create a function expression and then invoke it immediately. In *this* case, the parens are not needed by the Javascript compiler, but they serve as a very useful hint to the reader that this is not a normal assignment.

On the other hand, you must have *something* to tell the JS engine that you have a function expression instead of a function statement. The `=` sign above works, but when there is no assignment, you need to start off with some kind of operator, be it `(+!`

```
!function(x, y) {alert(x, y)}(1, 2); 
```

The leading operator makes it an *expression*. The `()` in the above examples force it to an expression as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:05:02.417

如果没有带有 id 的 script 元素，此代码将创建一个新的 script 标签并将其添加到 script 类型的第一个元素之前`twitter-wjs`。

由于`!`是 Javascript 中的 NOT 运算符，因此它计算其操作数何时`true`可以转换为（在这种情况下，当不存在`false`具有 id 的元素时返回内部的代码块被执行。Javascript中的任何对象都会在检查其布尔值时（尝试做，你会证明它），所以当任何元素返回时，该块将不会被执行。`twitter-wjs``document.getElementById("twitter-wjs")``undefined``!``true``if``true``!![Object]``if``document.getElementById()`

更新：
关于您的评论，我看到@JeremyJStarcher 的回答还可以，但我要添加一些内容：
在您的代码中，您有一个`function expression`. 不需要`function expressions`标识符。但是在执行时，Javascript 解释器可能会混淆并认为它是一个`function declaration`. 在`function declarations`中，标识符不是可选的，因此解释器会抛出语法错误。为了避免这种情况，`!`这里使用了运算符，因此它将被视为`function expression`.**

# pug - Jade 3.x 模板：传递要包含的块

> ID：13053681
> 
> 赞同：6
> 
> 时间：2012-10-24T16:39:55.053
> 
> 标签：pug

我的结构如下：

嗨有一个标题模板名为“标题”它看起来像这样

```
div.span4
    block headingleft
div.span3
    block headingright 
```

我想要实现的是，从我的主页上，我想为左标题和右标题传递块值，即类似

```
div
include heading
    block headingleft
          a IamLeft 
    block headingright
          a IamRight 
```

但是代码的行为是：不是将“IamLeft”放在 .span4 中，将 IamRight 放在 .span3 中，而是将两者都放在 .span3 下，就好像它只是普通的翡翠附加一样

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T10:10:49.397

我会尝试一下并解释一些要点，因为您可能混淆了一些玉器技术并且对“块”的定义感到困惑。

我将为您提供两个针对您的用例的示例（稍作修改）：

**包括**

使用包含技术意味着您将主（布局）模板的内容替换为其他模板文件的内容。当包含其他翡翠模板文件时，您*可以将其他内容传递*给包含的文件，以便在某个地方附加或生成。

*主玉*：

```
div
  include heading
    div.span3
      a IamSomewhatRight 
```

*标题.玉*：

```
div.span4
  a IamLeft
div.span3
  a IamRight 
```

结果：

```
 div
   div.span4
     a IamLeft
   div.span3
     a IamRight
   div.span3
      a IamSomewhatRight 
```

如您所见，*附加和可选*内容，即下面的块`include heading`，默认附加到包含文件的内容中。使用关键字`yield`来定义替换的确切位置。**请注意**，这与由关键字定义的*块定义*无关，`block`如下所述。

**块**

如果您在主模板中定义块，则可以*扩展*此模板以供具体使用并描述如何替换这些块 - 这是在您继承的模板中完成的：

*主玉*：

```
div
  block headingleft
  block headingright 
```

*标题.玉*：

```
extends main

block headingleft
  div.span4
    a IamLeft 

block headingright
  div.span3
    a IamRight
  div.span3
    a IamSomewhatRight 
```

结果与“包含”示例中的结果完全相同。当然，在这里将您的内容`heading.jade`转换为一些`myview.jade`内容并覆盖整个页面生成可能是有意义的。

现在，有不同的情况和要求使用包含或块或两者以各种方式组合来组成您的视图（这是一种哲学！）。在我看来，使用继承是消除多个“主文件”重复的好方法——或者某种基于控制器的视图组合技术定义占位符变量（或其他任何东西），这通常会导致代码混乱，不遵循“关注点分离”的方法。

# android - onPause 不会停止我的振动器

> ID：13053682
> 
> 赞同：1
> 
> 时间：2012-10-24T16:39:55.277
> 
> 标签：android, android-vibration

我将变量“shake”声明为全局变量，然后在 oncreate 中创建新对象，然后调用它：

```
@Override
public void onPause() {
    super.onPause();
    shake.cancel();
} 
```

按下home键，我的手机还是会震动！我试过onStop（），同样不起作用..

我的应用程序是这样的：倒计时 10 秒，然后振动.. 但问题是 onPause 不能被调用，所以如果在倒计时代码上设置了 2 分钟，用户可能会感觉到振动来自哪里.. 帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:00:52.290

由于我看不到您的其余代码，因此我将假设一些事情。

**假设 #1**

如果您打开了活动，并且倒计时开始并在 10 秒后结束，则您的手机会振动（您的活动仍处于打开状态）。如果您转到主屏幕，则振动停止。

**假设 #2**

您的活动已打开，倒计时开始。在 10 秒到期之前，您转到主屏幕。您的活动不可见，但手机很快就会开始振动。

如果这是您所看到的，那么这是正确的行为。问题在于，在第二种情况下，当您进入主屏幕时，您的 onPause() 中的shake.cancel() 会在实际开始振动之前被调用。Shake.cancel() 只能在它已经振动时取消。

如果这就是您要解决的问题（我只能假设，因为我看不到您的其余代码），您可以试试这个：

```
private boolean mAllowShake = false;
@Override
public void onResume() {
   super.onResume();
   mAllowShake = true;
}

@Override
pulic void onPause() {
   super.onPause();
   mAllowShake = false;
   shake.cancel();
}

// wherever you are calling the shake.vibrate()
if (mAllowShake)
   shake.vibrate(); 
```

这样，当您的活动不可见并且您的计时器关闭时，由于 mAllowShake 为假，它实际上不会振动。

如果这不是您要解决的问题，请使用更多代码和对您的确切用例的描述来更新您的问题。希望能帮助到你！

# javascript - 结合 after() 和 slideDown()

> ID：13053686
> 
> 赞同：1
> 
> 时间：2012-10-24T16:40:01.867
> 
> 标签：javascript, jquery, slidedown, jquery-after

我在特定条件下添加一个元素。但我不希望它突然出现，而是想把它滑下来。这是我添加它的方法：

```
$('.myDiv').after('<div>added content</div>'); 
```

如何将它与 slideDown 结合使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:43:28.577

试试这个：

```
$(".myDiv").after("<div style='display:none;'>added content</div>"); 
$(".myDiv").next("div").slideDown(); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:45:28.213

试试这个：

```
$('.myDiv').after('<div style="display:none">added content</div>').next().slideDown(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:46:14.877

您需要`.next()`在它所附加的 div 上使用，因为`.after()`... 将元素作为兄弟元素添加到它所添加到的 div

试试这个

```
$('.myDiv').after('<div style="display:none;" class="newDiv">New Content</div>'); 

$('.myDiv').next('.newDiv').slideDown(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T16:50:23.633

首先确保您输入的新内容`.newdiv{display:none;}`在您的 css 文件或内联代码中被隐藏，例如：`<div style="display:none;">`

然后使用回调函数仅在您使用 after() 方法时将代码插入文档后启动。

```
$('.myDiv').after('<div class="newdiv">added content</div>', function(){
    $('.newdiv').slideDown();
}); 
```

# canvas - 具有不同纹理面的 ThreeJS 立方体由带有画布渲染器的点光照亮？

> ID：13053687
> 
> 赞同：3
> 
> 时间：2012-10-24T16:40:02.337
> 
> 标签：canvas, textures, three.js, cube, light

我正在尝试绘制一个使用 6 个不同图像作为纹理的立方体，每个面一个。我想用点光源照亮立方体。

我正在使用画布渲染器，因为这是 iOS 上可用的平台。

我知道兰伯特是要走的路。我使用`MeshLambertMaterial`.

我设法让具有不同面的立方体进行渲染，但没有照明工作，[请参阅此链接](http://www.evanz.net/threejs/test_threejs.html)。

在这里我使用：

```
cube = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial()); 
```

（您需要使用 Firefox 来查看，它在 Mac 上的 Safari 中看起来很可怕（但这是一个不同的问题），但在 iPhone 模拟器中很好。）

我也有一个版本可以在照明工作的地方工作，但是所有的脸都有相同的颜色，纹理图像似乎丢失了，[请参阅此链接](http://www.evanz.net/threejs/test_threejs2.html)。

这里我用

```
cube = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial()); 
```

不幸的是，我无法让纹理面和照明一起工作。

代码仅在这一行上有所不同。

我一定做错了什么，但我无法弄清楚它是什么，我所有的谷歌搜索都无济于事。如果有人能指出我正确的方向，我将不胜感激。

顺便说一句，感谢作者提供了这个出色的软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:28:02.413

[不幸的是](https://github.com/mrdoob/three.js/issues/1939)，事实证明[.](https://github.com/mrdoob/three.js/issues/1939)[`MeshLambertMaterial``CanvasRenderer`](https://github.com/mrdoob/three.js/issues/1939)

# iphone - 归档有关符号链接的 iOS 项目时出错

> ID：13053689
> 
> 赞同：1
> 
> 时间：2012-10-24T16:40:08.780
> 
> 标签：iphone, ios, xcode, ios6, xcode4.5

在 Xcode 中归档 iOS 项目时，我收到以下错误：

```
SetOwnerAndGroup "james:staff" "/Users/james/Library/Developer/Xcode/DerivedData/App_Name_Here-flplczeuioixfhgepbxgwsbmggyv/Build/Intermediates/ArchiveIntermediates/App_Name_Here/InstallationBuildProductsLocation/../BuildProductsPath/Distribution-iphoneos/libRestKitNetwork.a"
cd "/Users/james/Documents/iPhone SDK Projects/App_Name_Here/RestKit"
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /usr/sbin/chown -RH "james:staff" "/Users/james/Library/Developer/Xcode/DerivedData/App_Name_Here-flplczeuioixfhgepbxgwsbmggyv/Build/Intermediates/ArchiveIntermediates/App_Name_Here/InstallationBuildProductsLocation/../BuildProductsPath/Distribution-iphoneos/libRestKitNetwork.a"

chown: libRestKitNetwork.a: Too many levels of symbolic links
Command /usr/sbin/chown failed with exit code 1 
```

我不确定这是否起作用，但我最近更新到 Mountain Lion 上的 Xcode 4.5 以构建 iOS 6。这是什么原因造成的？如果是符号链接的无限循环，是在 Xcode 生成的目录中吗？我自己没有创建任何符号链接。

非常感谢您的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:22:28.967

我最终通过从项目中清除 RestKit 并将其更新到最新版本来解决这个问题。我希望我有更多关于具体解决它的细节，但这就是最终发生的事情。

# ios - iOS - 使用 AFNetworking 执行同步 HTTP 请求

> ID：13053690
> 
> 赞同：2
> 
> 时间：2012-10-24T16:40:13.340
> 
> 标签：ios, http, afnetworking, badge

我目前正在将我的应用程序从使用 ASIHTTPRequest 迁移到 AFNetworking。我知道尽可能避免同步请求，但在我的应用程序中，我只有 1 个地方可以使用。在应用程序委托 applicationDidEnterBackground() 方法中，当应用程序进入后台时，我需要运行 HTTP 请求来查询数据以设置应用程序徽章编号。当异步运行时，这很少起作用，因为该方法刚刚退出并且应用程序在 HTTP 请求完成之前被挂起。对于 ASIHTTPRequest，我使用了 [request startSynchronous] 方法，这意味着 HTTP 请求每次都完成 100%，并且标记已正确更新。我看到 AFNetworking 没有明显的同步选项，所以任何人都可以建议一种可以同步使用的方法，或者替代解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T17:05:02.100

已经找到了执行此操作的方法 - 使用 AFHTTPRequestOperation 派生类之一，有一种方法 - setShouldExecuteAsBackgroundTaskWithExpirationHandler: 在操作系统暂停应用程序之前给操作额外的时间来完成。所以我的代码是：

```
[operation setShouldExecuteAsBackgroundTaskWithExpirationHandler:nil];
[operation start]; 
```

这正是我所需要的，并且解决了我的问题。

乔纳森

更新：正如 Bob 指出的那样，使用此方法实际上并不会同步执行操作，但在没有同步方法的情况下，这是我的理想解决方案。

# javascript - 水平和垂直的双向触摸滑动滑块

> ID：13053691
> 
> 赞同：8
> 
> 时间：2012-10-24T16:40:13.510
> 
> 标签：javascript, mobile, touch, slide, swipe

有许多 JavaScript 或 CSS 触摸滑动滑块，但它们似乎都只允许垂直或水平滑动幻灯片。有什么东西可以同时在一张幻灯片上，所以我可以在一张幻灯片上水平和垂直滑动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:58:06.720

我不是 100% 确定这是否是您正在寻找的，但它看起来非常接近：

iDangero.us Swiper。

[http://www.idangero.us/sliders/swiper/](http://www.idangero.us/sliders/swiper/)

允许在另一个水平旋转木马/滑块内垂直滑动框。我一直在寻找同样的东西，这是我找到的最接近我正在寻找的插件。一点点黑客/操纵可能会让它做你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T09:47:23.030

这是创建水平和垂直滑块的简单方法

```
<script>
function MM_effectSlide1(targetElement, duration, to, from, slide, toggle)
{
    Spry.Effect.DoSlide(targetElement, {duration: duration, to: to, from: from, horizontal: true, toggle: true});
} 
function MM_effectSlide2(targetElement, duration, to, from, slide, toggle)
{
    Spry.Effect.DoSlide(targetElement, {duration: duration, to: to, from: from, horizontal: false, toggle: true});
}
</script>

<body>
    <div id="socialmedia" class="socialcontainer" onclick="MM_effectSlide1('socialmedia', 1000, '100%', '11%', true, true)"></div> 
```

如果您查看代码，唯一应该更改的代码是 MM_effectSlide1、2、3 等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T12:50:07.680

您可以使用[fullPage.js](https://github.com/alvarotrigo/fullPage.js/)完全按照您的描述进行滑动，如[演示页面](http://alvarotrigo.com/fullPage/#secondPage)所示。

fullPage.js 的唯一问题是缺少 1:1 的触摸动作。因此，只要您将手指放在屏幕上，就不会控制滑动，脚本有一个可配置的变量，表示一旦满足屏幕高度/宽度的 X% 的阈值滑动。这行得通，但感觉不如[RoyalSlider 之](http://dimsemenov.com/plugins/royal-slider/)类的具有 1:1 触摸运动的东西好；因此，如果您只滑动 49% 的方式，您仍会停留在同一部分。也就是说 fullPage.js 有很好的支持（IE8+）并且会定期更新。

理想情况下，我希望 fullPage.js[具有 1:1 的触摸移动](https://github.com/alvarotrigo/fullPage.js/issues/278)，作者对拉取请求持开放态度，但现在我对 javascript 的了解太基础了，无法实现这样的东西。

我目前正在考虑的一个选项是结合使用两个滑块。我将使用[RoyalSlider](http://dimsemenov.com/plugins/royal-slider/)进行左右滑动（这样您就可以获得很好的 1:1 触摸）和 fullPage.js 用于垂直上下效果。

# javascript - 使用 Raphael 保持集合中多个项目的缩放

> ID：13053695
> 
> 赞同：0
> 
> 时间：2012-10-24T16:40:21.030
> 
> 标签：javascript, svg, raphael

我有一组几个形状，每个形状都以不同的比例缩放。

当集合转换到另一个点使用

```
set.transform("tp1,p2") 
```

形状重新调整为正常大小。对于以原始大小的不同比例缩放的每个形状，我无法为 set.transform 提供缩放选项。

如何在转换（）期间保留集合中每个项目的缩放？

我在代码中的问题：

[http://jsfiddle.net/XHr4H/](http://jsfiddle.net/XHr4H/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:47:17.263

Raphael 处理此问题的不完美方法是允许将转换指令附加到转换序列（使用“directive...”）或附加到转换序列（使用“...directive”）。在您的情况下，实现您想要的效果的最简单方法是在 setTimeout 函数中添加您想要的相对变换。

```
var paper = Raphael("paper", 200, 200);

var s = paper.set(),
    r = paper.rect(0,0,30,30).attr({"fill":"green"}).transform("t27,30s0.2"),
    r2  = paper.rect(40,0,30,30).attr({"fill":"red"}).transform("t27,30s0.4");
s.push(r,r2);
setTimeout(function(){
    s.transform("t100,150...");  // here 'tis
}, 2000); 
```

transform("t100,150...") 本质上将所需的转换插入到集合中每个元素的转换字符串的开头。因此，`r`' 变换累积计算为“t127,180s0.2”，而`r2`'s 变为“t127,180s0.4”。

# iphone - 在 iphone 中存储应用程序的数据

> ID：13053699
> 
> 赞同：2
> 
> 时间：2012-10-24T16:40:26.370
> 
> 标签：iphone, ios, xcode

我是 iphone 开发的新手。正在尝试开发应用程序。数据是大约 2000 个条目，大约 150 个字符。数据是如何正常存储的？在列表中？xml？光盘？哪种格式可以快速解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:53:55.907

如果你有一个非常简单的结构，我推荐一个 PLIST。它很容易与 NSMutableArray 对象一起使用。例如，您将 EntriesList.plist 读取到 myArray 中，如下所示：

```
NSString path = [[NSBundle mainBundle] pathForResource:@"EntriesList" ofType:@"plist"];
NSMutableArray* myArray = [[NSMutableArray alloc] initWithContentsOfFile:pathToFile]; 
```

但是如果你有一个更复杂的结构，有几个表/关系，那么你最好使用 Core Data。它可以在后台使用 sqlite 数据库文件，并轻松处理代码中的数据获取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:04:46.343

2000 个条目并没有太大的问题，但是使用 JSON 或 PLIST 会比普通的 XML 更快，如果你有复杂的结构，你也可以使用 sqlite。

# asp.net - Asp.net 复选框列表出错

> ID：13053700
> 
> 赞同：0
> 
> 时间：2012-10-24T16:40:38.550
> 
> 标签：asp.net, vb.net, checkbox, vb.net-2010

我的复选框列表有问题。我可以循环它，但我似乎找不到检查项目。我在 VB.net 2010 和 asp.net 中对此进行了编码，在我的每次选择中，我总是得到 False。

这是我的一些代码：

```
Protected Sub cmdSend_Click(sender As Object, e As System.EventArgs) Handles cmdSend.Click
    'Check for checked users. 
    Dim lqText As New lqAlarmAndGoDataContext

    Try
        For Each foundCheckedUser In cbMembers.Items
            If foundCheckedUser.Selected Then
                Dim objText As New tbTxtMessageQueue
                With objText
                    .TxtFrom = "txt@123.com"
                    .TxtTo = foundCheckedUser.value
                    .TxtBoddy = tbMessage.Text
                    .SentFlag = False
                End With
                lqText.tbTxtMessageQueues.InsertOnSubmit(objText)
                lqText.SubmitChanges()
            End If
          Next
    Catch ex As Exception

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:07:30.450

您是否`cbMembers`在每次回发时重新绑定？这将导致您的选择信息丢失。尝试重构您的代码，以便`cbMembers`只绑定一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:47:57.077

您在哪里将数据绑定到复选框？

确保在单击按钮之前它没有被重新绑定，方法是使用

```
If Page.IsPostBack Then 
```

另外，请确保您的视图状态已启用

# ruby-on-rails - 如何在 Rails 应用程序中正确安装 github 的 gollum wiki？

> ID：13053704
> 
> 赞同：9
> 
> 时间：2012-10-24T16:40:58.300
> 
> 标签：ruby-on-rails, routes, rack, gollum-wiki

我正在尝试通过将其作为机架应用程序安装在我的 routes.rb 文件中来为我的应用程序提供基于 gollum 的 wiki：

```
require 'gollum/frontend/app'

#Gollun config

gollum_path = Rails.root
Precious::App.set(:gollum_path, gollum_path)
Precious::App.set(:wiki_options, {:universal_toc => false})

TestWiki::Application.routes.draw do
  mount Precious::App, :at => "wiki"
end 
```

wiki 应该在 '/wiki' 运行，但每次转到此 url 时，它都会将我重定向到`/wiki/create/Home`，并在创建页面后将我重定向到`/wiki/wiki/page_name`。
我错过了一些选择吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T03:09:54.610

我将与您分享我为使其正常工作所做的工作。实际上，我从上面的代码开始并对其进行了调整，直到我对其进行了排序。如果你还在破解它，也许它会为你工作。

在 Gemfile 中：

```
gem 'gollum' 
```

在 routes.rb 中：

```
require 'gollum/app'

YourApplication::Application.routes.draw do
  Precious::App.set(:gollum_path, Rails.root.join('wiki').to_s)
  Precious::App.set(:default_markup, :markdown) # set your favorite markup language
  Precious::App.set(:wiki_options, {:universal_toc => false})
  mount Precious::App, at: 'wiki'
end 
```

然后，这是最重要的部分，创建并初始化 wiki 目录：

```
~/Sites/ams$ mkdir wiki
~/Sites/ams$ cd wiki
~/Sites/ams/wiki$ ls
~/Sites/ams/wiki$ git init .
Initialized empty Git repository in /Users/xxx/Sites/ams/wiki/.git/ 
```

关闭服务器`bundle install`，重新启动服务器，然后点击 /wiki。

祝你好运。

编辑 2014-11-06：最新版本的 gollum 的目录结构与原始写作时略有不同。我更新了 routes.rb 示例以匹配最新的 gollum 和 rails。

# ruby - Codekit 在安装 zurb-foundation 3 时抛出错误

> ID：13053707
> 
> 赞同：0
> 
> 时间：2012-10-24T16:41:21.420
> 
> 标签：ruby, sass, compass-sass, zurb-foundation

Codekit/Compass 遇到问题。知道很多人都遇到过这个问题，但我见过的解决方案都没有奏效，我的问题似乎有点不同。我已经安装了 zurb-foundation gem 并用它创建了一个新项目。CodeKit 正在监视这个项目。如果我在终端中编译项目，它似乎做得很好，如果我使用 CodeKit，我会收到这个错误：

***“/Library/Ruby/Gems/1.8/gems/zurb-foundation-3.1.1/lib/zurb-foundation.rb 第 2 行的 LoadError：没有要加载的此类文件 --foundation/version”***

令人恼火的是，文件 /foundation/version.rb 确实存在于它应该存在的地方！CodeKit 是否以某种方式在错误的地方寻找？（尽管完美地导航到 zurb-foundation.rb 文件？）。

以前有人遇到过这个问题吗？请注意，这与 CodeKit 无法找到 gem 的问题不同，因为它正在找到它但又抛出了另一个错误。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:14:54.583

似乎我通过将 Compass 编译器指向“usr/bin”中的编译器而不是 CodeKit 的外部编译器来修复它。看到很多人都在谈论用 SASS 编译器做同样的事情。仍然不知道为什么我必须这样做！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:04:29.273

[这是一个简短的视频，解释了在哪里更改 Foundation 的 CodeKit 首选项](http://vimeo.com/51325827)。

Sass 和 Compass 的默认值以及输出路径都发生了变化。

# node.js - 使用 node.js 提供静态文件有效，但不适用于链接的 images/css/js

> ID：13053708
> 
> 赞同：0
> 
> 时间：2012-10-24T16:41:31.650
> 
> 标签：node.js, http, webserver

我刚开始使用 node.js 并尝试提供静态 index.html 文件，该文件当然会加载 CSS、JS 和图像。我尝试通过使用 fs.readFile 和 node-static 的 serveFile 来读取 index.html 文件。

两者都提供文件，但找不到包含的 CSS、JS 和图像。也许是我的路径错误，但这是我的目录结构。

![工作区结构](../Images/d4ce5af7fcac8c87fd6859ae38d75655.png)

我使用了 index.html 文件中这些引用文件的相对路径。所以简单的 css/main.css。另外，如果它们需要相对于 server.js 文件，我做了 ../css/main.css。最后，如果路径需要是绝对路径并且 index.html 目录是根目录，那么 /css/main.css。什么都没有加载。

我究竟做错了什么？

```
var http = require('http'),
    fs = require('fs');

fs.readFile('../index.html', function (err, html) {
    if (err) {
        throw err; 
    }       
    http.createServer(function(request, response) {  
        response.writeHeader(200, {"Content-Type": "text/html"});  
        response.write(html);  
        response.end();  
    }).listen(8080);
}); 
```

这很好地服务于文件。

正如我所说，我还在学习。

节点静态“API”不是很彻底，所以我恢复了上述路线。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:32:50.713

使用上面创建的服务器，您将为每个请求发送 HTML 文件的内容——即使请求是针对图像或 css 文件的。您必须检查传入的请求对象以查看用户要求的内容，然后发送适当的文件并设置适当的内容类型。

[或者，您可以使用 Express http://expressjs.com](http://expressjs.com)让您的生活更轻松

Express 会为您处理大部分此类工作，包括静态文件服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T00:35:56.390

我的朋友，**不要把自己的时间浪费在重新发明轮子上**。

使用据我所知非常舒适的[Express框架，并且可以轻松处理这些事情。](http://expressjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T07:04:45.797

If you must do it yourself (rather than use Express) you can this module to map most MIME types.

*   [https://github.com/broofa/node-mime](https://github.com/broofa/node-mime)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:47:35.863

The problem is the content-type that you are returning. Take a look at this example for the most common content-types:

[https://gist.github.com/2573391](https://gist.github.com/2573391)

# android - 将 cookie 从 Android 应用程序传输到 .NET 网络服务

> ID：13053715
> 
> 赞同：0
> 
> 时间：2012-10-24T16:41:50.403
> 
> 标签：android, asp.net, web-services, authentication, cookies

我有一个与 ASP.NET Web 服务通信的 Android 应用程序（用 Java 编写）。Android 应用程序是一个论坛阅读器，应显示论坛中的主题列表并允许用户阅读主题。该应用程序仅在后台联系 Web 服务，并且基本上询问“给我线程 x 中的帖子”。Web 服务然后连接到论坛，下载 HTML 源代码，对其进行解析，最后返回（以 json 格式）相关信息（每个帖子以及作者、日期、消息等）。然后，Android 应用程序接收该信息并很好地显示它。

通过这种方式，Web 服务完成了所有“繁琐的工作”（下载论坛 HTML 源代码、解析它并提取相关信息），而 Android 应用程序只是坐下来接收它想要的信息。

但是，为了让 web 服务访问论坛及其页面源，用户必须经过身份验证。我可以通过将用户名和密码发送到论坛登录页面的 HTTP POST 并存储成功时接收到的 CookieContainer 来授予 Web 服务访问论坛的权限。然后我在所有进一步的请求中使用相同的 CookieContainer 对象，这足以验证用户并允许访问线程及其页面源。

明显的缺点是除我之外的任何用户都必须在 Android 应用程序中输入他们的密码，这将不得不将其发送到 web 服务，最终使用它来验证用户。网络服务显然需要纯文本密码，因此它无法接收散列版本。我当然可以加密密码或使用 HTTPS，但事实仍然是这样我需要 web 服务上的明文密码，我可能会在其中存储它并窃取密码。显然不是最好的方法。

我能想到的唯一选择是在 Android 应用程序本身上进行登录工作，在那里接收 CookieContainer（我猜 Java 中一定有类似的东西？），然后将该 cookie 信息发送到 Web 服务。这仍然允许“黑客”通过拦截数据来冒充另一个用户，但据我所知，它的安全性不亚于人们只需通过 Android 网络浏览器登录论坛。明显的好处是我不再需要webservice站点上的明文密码，Android应用程序不需要发送给我（只发送到（https）登录页面，就像他们直接使用浏览器一样）并且有它没有办法被拦截或我窃取它。

长话短说：我想从 Java（Android 应用程序）中的 webrequest 接收 cookie，并以某种方式将它们传输到 web 服务（ASP.NET），在那里我可以重建 CookieContainer 对象并将其用于进一步的请求。因此，我必须以某种方式将我在 Java 中获得的 cookie 转换为字符串，并将它们发送到 web 服务，在那里我从这些字符串中重建一个 CookieContainer 对象。

我尝试了一些基本方法，但我一无所获。任何人都可以帮助我完成这一步吗？

目前，在 ASP.NET Web 服务中，我创建了一个新的 CookieContainer 对象并将其用作 HttpWebRequest 对象的 CookieContainer 属性。然后我对登录页面执行 HTTP POST 请求，如果成功，则可以使用相同的 CookieContainer 对象来验证任何进一步的请求。我必须基本上用Java重写它，而不是直接使用CookieContainer（或Java中的任何等价物），我需要将它转换为字符串，以便我可以将它发送到Web服务，在那里我可以重建CookieContainer字符串。

有什么提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:56:23.170

使用登录活动（本机可能效果最好）。让登录活动将帖子直接发送到论坛并获取 cookie。如果登录成功，将 cookie 发送到您的 web 服务，它可以存储它并将其用于来自该设备的后续请求（假设您正在跟踪 web 服务上的设备）。如果您不想跟踪设备，请让 Android 应用程序将 cookie 作为每个请求的一部分发送，并让 Web 服务将其传递。

# mysql - 在 MySQL 中检查约束

> ID：13053718
> 
> 赞同：0
> 
> 时间：2012-10-24T16:41:52.293
> 
> 标签：mysql, triggers

> **可能重复：**
> [在 MySQL 触发器中引发错误](https://stackoverflow.com/questions/24/throw-an-error-in-a-mysql-trigger)

我有一个使用的表定义，`CHECK`但由于 MySQL 不支持此功能，我需要做一些不同的事情。`INSERT`这个想法是在这张桌子之前或这张桌子上使用触发器，`UPDATE`但我不知道该怎么做。

这是表格：

```
CREATE TABLE IF NOT EXISTS `smeii_media` (
    `id` INTEGER AUTO_INCREMENT,
    `type` VARCHAR(5) NOT NULL,
    `title` VARCHAR(100) NOT NULL,
    `description` VARCHAR(500),
    `path` VARCHAR(100) NOT NULL,
    UNIQUE(`path`),
    PRIMARY KEY(`id`),
    CONSTRAINT chk_media CHECK (`type`='audio' OR `type`='image' OR `type`='video')
) ENGINE=InnoDB; 
```

这里是触发器：

```
DELIMITER $$

CREATE TRIGGER smeii_media_briu BEFORE INSERT OR UPDATE FOR EACH ROW
BEGIN
    IF NEW.type != 'audio' AND NEW.type != 'image' AND NEW.type != 'video'
    THEN

    END IF;
END;

DELIMITER $$ 
```

我可以在 if 块中放入什么来引发错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:51:32.420

如果您创建子句，而不是在触发器中抛出错误（实际上并不支持）：

```
BEGIN
IF NEW.type = 'audio' OR NEW.type = 'image' OR NEW.type = 'video'
THEN

END IF; 
```

并忽略其他一切。

# mysql - 将现有 MySQL 数据库移动到具有不同操作系统时区的服务器

> ID：13053720
> 
> 赞同：2
> 
> 时间：2012-10-24T16:41:57.037
> 
> 标签：mysql, date, timezone

我在本地开发了一个应用程序（这是我的第一个真正的商业应用程序），时间戳设置为操作系统使用的时区。当我将我的应用程序放在托管在不同时区的服务器上时，我没有考虑到会产生不同日期的`NOW()`事实`TIMESTAMP`。

在阅读了我的问题之后，处理这个问题的正确方法显然是将日期/时间戳存储在 UTC 中，并将它们在客户端代码上转换为所需的指定时区。不幸的是，我的应用程序运行了很长时间，并且有 1000 个条目标记到特定时区，我通过以下方式进行了 hacky 修复：

```
SET time_zone='-6:00' 
```

现在我正在为 DST 苦苦挣扎（因为 MySQL 服务器不支持我正在使用的时区名称）。

我应该尝试将所有代码转换为 UTC->Timezone 和所有数据库到 UTC 吗？还是我应该让主机安装处理 DST 的正确时区名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:47:10.097

如果我是您，尽管我会将您的代码转换为使用 UTC 存储/检索所有时间值，然后适当地调整数据库中的值。

我知道这是一种 PITA，但从长远来看，它可能不会那么令人头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:47:51.713

现在可能会受到伤害，但正确的转换保持 UTC 中的所有内容是要走的路。除非你的应用只需要再运行几天。您将需要在美国切换到非 DST 时间之前进行管理。在 UTC 中维护系统将节省大量时间。祝你好运。

# c# - 解决不明确的引用错误，而不会使 C# 中的代码混乱

> ID：13053721
> 
> 赞同：1
> 
> 时间：2012-10-24T16:41:58.413
> 
> 标签：c#, .net

使用这个[问题](https://stackoverflow.com/questions/10399050/solving-error-timer-is-an-ambiguous-reference-between-system-windows-forms-t)作为跳板。问题是当它不知道要使用哪个 Timer 时，如何解决模棱两可的参考问题，因为您可能指任何一个。

假设我想在一个方法（甚至整个项目）中使用一个特定的 Timer 类 TimerA，有没有办法 n C# 告诉编译器忽略对另一个 Timer TimerB 的所有引用，并且它应该始终使用定时器A。这样我就不会因为`System.Timers.Timer`多次编写而弄乱我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:46:22.983

在命名空间声明中使用别名

```
Using PreferredTimer = X.Y; 
```

然后在您的代码中，您可以使用

```
PreferredTimer::TimerA timer = new PreferredTimer::TimerA() 
```

# javascript - 无法在 Rails 中编辑 JavaScript 资产

> ID：13053726
> 
> 赞同：0
> 
> 时间：2012-10-24T16:42:07.427
> 
> 标签：javascript, jquery, ruby-on-rails-3.2, asset-pipeline

完成后，我正在尝试更改 autocomplete-rail.js 文件的功能

```
rails generate autocomplete:uncompressed 
```

获取完整的 jquery 代码

但是，我所做的每一个更改（在注释或代码中）似乎都无关紧要

我已经保存了文件，重新启动了 rails s，删除了缓存 .. 没有任何效果。

该文件当前位于 public/assets 中（生成器放置它的位置）

`/assets/autocomplete-rails.js?body=1`我可以从正在服务的来源看到..

去它不会给我 jquery .. 但常规 javascript

到底是怎么回事？

**更新**

我搜索了文件，如果我在

```
C:\Ruby193\lib\ruby\gems\1.9.1\gems\rails3-jquery-autocomplete-1.0.6\lib\assets\javascripts 
```

我可以看到那是正在提供的文件..（我编辑了它，我看到它正在与编辑一起提供）

这是在同一 repo 上的不同计算机上工作的问题，因为对此文件的编辑保存在 gems 目录中，而不是在应用程序的..

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:49:02.453

如果文件存在于 中`public/assets`，那么这就是 Web 服务器将提供的文件。我建议您删除整个目录，以便 Rails 动态地为您的资产提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:13:14.963

解决了..我只是将该文件直接复制到资产目录..

# jquery - Drupal 7 + jQuery，如何让 jQuery 只与活动节点交互（通过 nid）而不是列表中的每个节点

> ID：13053727
> 
> 赞同：6
> 
> 时间：2012-10-24T16:42:07.790
> 
> 标签：jquery, drupal, drupal-7, views

我一直在寻找很长一段时间没有任何运气的主题，如果我错过了一个较旧的线程，请指出我正确的方向。

**我想要达到的目标：**

拥有多个节点的常规视图并通过按下节点内的按钮（或其他任何东西）使 jQuery 以任何方式与该特定节点交互。前任。使隐藏的 div 出现。

**我面临的问题**是对于初学者来说，我仍然发现很难将 jQuery 与 D7 一起使用。我之前一直在使用 jQ 很长一段时间，但是当它与 D7 一起使用时，我面临着重大问题。

**最大的问题**......是一旦我让 jQ 工作，它会影响列表/提要中的每个可见节点，因为我通过 div id 或类调用函数。我理解为什么会发生这种情况，但我不知道如何**让 jQ 仅对按下按钮的节点产生影响。**

到目前为止，这是我在节点模板中针对特定内容类型所拥有的内容：

```
 <script type="text/javascript">                                         
(function ($) {

 $('.up2').click(function () {
        $('.nummer_dark').text(parseInt($('.nummer_dark').text())+1,0).toFixed(2);
   $('.up2').toggle();

      });

       $('.up').one('click', function() {
        $('.flag-link-toggle').click();once();

      });

})(jQuery);

 </script> 
```

这只是一个示例，我试图通过按下具有 up2 类的对象来增加跨度内的数字，并通过按下具有 up 类的对象来切换标志。

第一个代码有效，但数字增加了小数（2.453、3.4123 等），而不是我计划的 1、2、3、4。但主要问题是这两个代码都对列表中的每个节点产生影响。我知道这是因为列表中的每个节点都具有相同的节点模板，因此具有相同的类，但**我想使用jQ 中的节点 ID。**

任何领先的答案都会拯救我的一天！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:22:22.480

我会使用[`.closest()`](http://api.jquery.com/closest/)and[`.find()`](http://api.jquery.com/find/)方法。这将允许您仅定位包含刚刚单击的按钮的父节点，以便您可以仅查找和更改该节点的子元素。这是一些快速的伪代码，展示了它是如何工作的。

```
$('.up2').click(function() {
    $(this).closest('.node').find('.nummer_dark').text();
} 
```

# php - 获取一组 id 号码并按字母顺序从另一个表中收集信息

> ID：13053728
> 
> 赞同：0
> 
> 时间：2012-10-24T16:42:14.143
> 
> 标签：php, mysql

我正在尝试获取产品 ID 的数组列表，获取相关数据（存储在另一个表中，我知道......设置不当），然后根据产品名称对它们进行字母排序。到目前为止，这是我所拥有的：

```
$set = array($aID['id']);
$getInfo = mysql_query("SELECT * FROM tbl WHERE FIND_IN_SET('$set', id) ORDER BY name ASC");
while($product = mysql_fetch_array($getInfo))
    {
        echo $product['name'] . " <br /\n";
    } 
```

我收到 while 行的错误消息，这意味着我的 $getInfo 查询行有问题。我究竟做错了什么？感谢任何帮助和所有建设性的批评。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:46:56.327

您不能将数组传递给 mysql。您需要将其转换为逗号分隔的字符串：

```
$set = array($aID['id']);
$set = implode(',' $set); 
```

此外，您的 FIND_IN_SET 中的顺序也颠倒了。它应该是

```
FIND_IN_SET(id, '$set') 
```

老实说，我只是使用`IN`FIND_IN_SET 返回它在集合中的位置的索引，而不是你想要的：

```
SELECT * FROM tbl WHERE id IN ($set) ORDER BY name ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:48:13.530

你也可以使用`IN`

```
$ids = implode(",",$set);
$getInfo = mysql_query("SELECT * FROM tbl WHERE id IN (".$id.") ORDER BY name ASC"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:47:29.070

我认为它需要 $set 作为 mysql 查询的一部分。您应该表明它是来自 php 的外部变量，如下所示：

```
$getInfo = mysql_query("SELECT * FROM tbl WHERE FIND_IN_SET('.$set.', id) ORDER BY name ASC"); 
```

# javascript - 动画到css指定宽度

> ID：13053729
> 
> 赞同：-2
> 
> 时间：2012-10-24T16:42:20.357
> 
> 标签：javascript, jquery, css

我正在为我的网站使用响应式 css 框架（Twitter Bootstrap），并且标签的宽度通过 css 指定。所以他们有一类“span3”。当页面打开时，我将它们折叠到 25 的宽度，但在翻转时想让它们回到 span3。问题是 span3 的宽度取决于当前的媒体查询。

我可以将宽度设置为 span3 的当前值吗？现在，我只是在翻转和推出中有硬编码的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:51:13.120

你可以使用 CSS 过渡来做到这一点。

如果您想使用 JS 来触发动画，您可以添加/删除类，而不是`:hover`在我的示例中。

JSFiddle：http: [//jsfiddle.net/Ls8e4/](http://jsfiddle.net/Ls8e4/)

```
<div class="col3">
<div class="button">Label</div>
</div>​ 
```

CSS：

```
.col3 {width: 200px;}
.button {
    width: 25px;
    background-color: red;
    overflow: hidden;
    transition: width 0.5s;
    -webkit-transition: width 0.5s;
    /*add more prefixes*/
}

.button:hover
{
    width: 100%;
} 
```

# coldfusion - 从 CFC 中包含 CFM 时的并发和范围问题

> ID：13053732
> 
> 赞同：6
> 
> 时间：2012-10-24T16:42:33.883
> 
> 标签：coldfusion, coldfusion-9, cfc

我在我的应用程序范围中放置了一个组件，以便它在所有请求之间共享，并且它包括一个 cfm 模板：

```
<cfcomponent output="false">

    <cffunction name="run" output="false" returntype="void">

        <cfset var tmp = false/>

        <cftry>
            <cfinclude template="inc.cfm"/>
            <cfcatch>
                <cffile action="append"
                        file="#ExpandPath("error.log")#"
                        output="ERROR: #cfcatch.message#"/>
            </cfcatch>
        </cftry>

    </cffunction>

</cfcomponent> 
```

包含的模板只是创建一个数组并检查数组长度是否应该是它应该是什么，如果不是它写入`error.log`文件：

```
<cfset tmp = [
    "one",
    "two",
    "three"
]/>
<cfif ArrayLen(tmp) neq 3>
    <cffile action="append"
            file="#ExpandPath("error.log")#"
            output="Length = #ArrayLen(tmp)#"/>
</cfif> 
```

如果我然后在它上运行负载（100 个并发线程），我的`error.log`文件中会出现以下项目......

```
ERROR: element at position 3 of array variable &quot;___IMPLICITARRYSTRUCTVAR0&quot; cannot be found.
Length = 0
Length = 2 
```

**注意**我在 Java 1.7.0_09 之上使用 ColdFusion 9.0.1.274733。我已经在同一个 JRE 上测试了 Railo，它工作正常。

* * *

**附加**以下也会导致问题，将变量更改为结构并在范围内`tmp`添加一个未在任何地方引用的随机项...`variables`

```
<cfcomponent output="false">

    <!--- 
    Some random variable that does nothing with the exception
    of being the facilitator of my eternal pain
    --->
    <cfset variables.t = {}/>

    <cffunction name="run" output="false" returntype="void">

        <cfset var tmp = {}/>

        <cftry>
            <cfinclude template="inc2.cfm"/>
            <cfcatch>
                <cffile action="append"
                        file="#ExpandPath("error.log")#"
                        output="ERROR: #cfcatch.message#"/>
            </cfcatch>
        </cftry>

    </cffunction>

</cfcomponent> 
```

其中包括一个模板，与第一个非常相似，看起来像这样......

```
<cfset tmp.arr = [
    "one",
    "two",
    "three"
]/>
<cfif ArrayLen(tmp.arr) neq 3>
    <cffile action="append"
            file="#ExpandPath("error.log")#"
            output="Length = #ArrayLen(tmp.arr)#"/>
</cfif> 
```

如果您删除`variables`范围内的项目，它工作正常。如果您转储`#variables#`并`#local#`在模板中，一切都在您期望的位置。

* * *

**（评论更新）**

我已经将此问题作为[错误 #3352462 提出](http://bugbase.adobe.com/index.cfm?event=bug&id=3352462)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:24:04.773

这是基于彼得/您自己的上述评论。

从 CF8 引入语法以来，数组和结构简写概念已经存在 / 存在许多错误。Adobe 修复它们的方法有点像打地鼠，而不是一次正确地解决问题。看起来你已经找到了另一个例子。不过，看看这是否仍然存在于 CF10 中会很有趣，因为我知道他们在其开发周期中修复了更多问题。

解决它的唯一方法是在您看到这些问题的情况下不使用该符号。

您能否为此提出一个[错误](https://bugbase.adobe.com/)，以便 Adob​​e 意识到这一点？

还有一点值得注意，但与您在此处的具体问题无关：Java 1.7 尚不支持 CF。你可能想记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:53:35.027

您可能会考虑在您的标签周围添加一些锁定，以确保只允许一个请求来修改文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:17:23.987

在您的第一个示例中，如果您将 tmp 声明为数组而不是布尔值，是否有任何区别？

```
<cfset var tmp = ArrayNew(1) /> 
```

代替...

```
<cfset var tmp = false /> 
```

# wso2 - wso2 brs 1.2.2 与 developer studio 2.1 兼容吗？

> ID：13053733
> 
> 赞同：0
> 
> 时间：2012-10-24T16:42:34.770
> 
> 标签：wso2

我正在尝试使用开发人员工作室 2.1 遵循 brs 1.2.2 的教程（[链接](http://wso2.org/project/brs/1.2.2/docs/user_guide.html)）。

操作定义似乎不同。这是来自教程：

```
<operation name="placeOrder">
    <with-param type="samples.userguide.PlaceOrder"/>
    <result>
        <element type="samples.userguide.OrderReject"/>
        <element type="samples.userguide.OrderAccept"/>
    </result>       
</operation> 
```

但是，开发人员工作室正在尝试创建如下操作定义：

```
<operation name="placeOrder">
    <input namespace="" wrapperElementName=""/>
    <output wrapperElementName=""/>
</operation> 
```

brs 1.2.2 与 developer studio 2.1 兼容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:37:51.180

不，**brs 1.2.2**与开发者工作室不兼容。它是与开发者工作室兼容的**brs 2.0.0版本。**

在那个版本中，你会得到类似于

```
<operation name="placeOrder">
    <input wrapperElementName="placeOrder" namespace="http://com.test/placeorder">
        <fact elementName="order" namespace="http://com.test/placeorder" type="samples.userguide.PlaceOrder"></fact>
    </input>
    <output wrapperElementName="placeOrderRespone" namespace="http://com.test/placeorder">
        <fact elementName="orderAccept" namespace="http://com.test/placeorder" type="samples.userguide.OrderAccept"></fact>
        <fact elementName="orderReject" namespace="http://com.test/placeorder" type="samples.userguide.OrderReject"></fact>
    </output>
</operation> 
```

# c# - ASP.NET Web API 中处理程序和过滤器的依赖注入

> ID：13053734
> 
> 赞同：11
> 
> 时间：2012-10-24T16:42:39.843
> 
> 标签：c#, asp.net-web-api, dependency-injection, inversion-of-control, castle-windsor

我正在尝试连接我的 Web Api 项目以将 Castle Windsor 用于 IoC

[按照这篇优秀的文章](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)，我已经为我的控制器做到了这一点。

我现在正试图将依赖项注入我的 DelegatingHandler 和 ActionFilterAttribute

我试图复制常规 ASP.Net MVC 中用于过滤器的技术，但它们似乎不适用于 Web Api

有没有人设法让这个工作？

我不确定 Web Api 中的相关扩展点是什么

我已经看到有人建议这样做

```
config.MessageHandlers.Add(_myContainer.Resolve<IApiUsageLogger>()); 
```

但不确定是否有更好的方法。我更愿意利用创建这些处理程序/过滤器的机制

因为这对许多处理程序来说是服务位置的气味。是否有一个点可以创建所有处理程序？

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-20T19:00:28.877

由于该`MessageHandlers`集合是全局的，因此它实际上是一个单例列表。当处理程序本身没有状态和依赖项时，这很好，但在基于 SOLID 设计原则的系统中，这些处理程序很可能会有自己的依赖项，并且很可能其中一些依赖项需要一个寿命比单例短。

如果是这种情况，则不应将此类消息处理程序创建为单例，因为通常，组件的生命周期不应长于其依赖项的生命周期。

然而，Web API 缺少任何允许在每个请求上解析此类处理程序的钩子，但这种机制很容易通过使用代理类创建：

```
public class DelegatingHandlerProxy<TDelegatingHandler> : DelegatingHandler
    where TDelegatingHandler : DelegatingHandler
{
    private readonly WindsorContainer container;

    public DelegatingHandlerProxy(WindsorContainer container)
    {
        this.container = container;
    }

    protected override async Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request, CancellationToken cancellationToken)
    {
        // trigger the creation of the scope.
        request.GetDependencyScope();

        var handler = this.container.Resolve<TDelegatingHandler>();

        handler.InnerHandler = this.InnerHandler;

        var invoker = new HttpMessageInvoker(handler);

        var response = await invoker.SendAsync(request, cancellationToken);

        container.Release(handler);

        return response;
    }
} 
```

此代理可按如下方式使用：

```
GlobalConfiguration.Configuration.MessageHandlers.Add(
    new DelegatingHandlerProxy<MyCustomHandler>(myContainer)); 
```

代理是一个单例，但它会解析`MyCustomHandler`每个请求中指定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:29:29.647

到今天为止似乎没有扩展点。不过有一个请求，在[http://aspnetwebstack.codeplex.com/workitem/62](http://aspnetwebstack.codeplex.com/workitem/62)

# objective-c - iOS 实时应用

> ID：13053735
> 
> 赞同：1
> 
> 时间：2012-10-24T16:42:41.627
> 
> 标签：objective-c, ios, cocoa-touch

我需要将实时方面集成到我的应用程序中。基本上，2 个用户可以编辑 UItableView 并且它应该反映在两个应用程序上。我只是想知道设计实时应用程序的最佳方法是什么？

到目前为止，我想出了两种方法：

1.  不断地查询服务器的变化，每 5-6 秒，并更新。
2.  实际上打开了一个套接字，所以让客户端表现得像服务器一样，让服务器向它发送更新。

显然，1) 非常糟糕，因为它会使用大量带宽。2）是一种技术，需要大量的低级套接字编程等才能完成。

对我来说在这里做的最好的事情是什么？这通常是如何制作实时应用程序的吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:21:02.230

第二个选项对我来说很合适，但当然你必须使用套接字等。

作为一个简单的解决方案，您可以尝试`GameKit`. 我已经制作了 iPhone 到 iPad 遥控器类型的应用程序，最好的解决方案是使用 GameKit。您可以通过蓝牙或互联网连接它们（在这种情况下，您必须使用 GameCenter 连接它们）。

虽然我不确定苹果对不是游戏但使用 GameCenter 进行连接的应用程序的政策。

因此，您可能只想使用 GameKit 进行更高级别的测试，然后在需要时实现低级别套接字。但是当然最好从一开始就使用套接字。

# c# - 如何使用 .net TransactionScope 从 MQ 执行事务性 GET？

> ID：13053737
> 
> 赞同：3
> 
> 时间：2012-10-24T16:42:48.677
> 
> 标签：c#, .net, windows, ibm-mq

我有一个需要包含 MSSQL 数据库和 IBM MQ 队列的 .NET TransactionScope。

我在完全托管模式下使用 .NET 4.0 (VS2010)、SQL 2008R2、MQ Server 6.0、MQ Client 7.0.1.9。所有组件都在不同的机器上运行。

从我发现以下模式应该可以工作： http: [//publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp ?topic=%2Fcom.ibm.mq.doc%2Fun11400_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp?topic=%2Fcom.ibm.mq.doc%2Fun11400_.htm)

> 隐式事务 以下代码描述了 WebSphere MQ .NET 应用程序如何使用 .NET 隐式事务编程来放置消息。
> 
> 使用 (TransactionScope scope = new TransactionScope ()) { Q.Put (putMsg,pmo); 范围。完成（）；}
> 
> Q.close(); qMgr.Disconect();}

在我的代码中，这看起来像：

```
 // mq properties
  properties = new Hashtable();
  properties.Add(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_MANAGED);
  properties.Add(MQC.HOST_NAME_PROPERTY, HOSTNAME);
  properties.Add(MQC.PORT_PROPERTY, PORTNUMBER);
  properties.Add(MQC.CHANNEL_PROPERTY, CHANNELNAME);

  _queueManager = new MQQueueManager(queueManagerName, properties);
  _queue = _queueManager.AccessQueue(queueName, MQC.MQOO_INPUT_AS_Q_DEF + MQC.MQOO_FAIL_IF_QUIESCING);
  _gmo = new MQGetMessageOptions();
  _gmo.Options |= MQC.MQGMO_WAIT;
  _gmo.Options |= MQC.MQGMO_SYNCPOINT;
  _gmo.WaitInterval = 1000;  // 1 seconds wait

  // in a loop
  using (TransactionScope t = new TransactionScope())
  {

  var message = new MQMessage();
  try
  {
     _queue.Get(message, _gmo);
  }
  catch (MQException mqe)
  { 
     message = null;
     if (mqe.ReasonCode == 2033)
     {
          Console.WriteLine("No message available");
     }
     else
     {
          throw;
      }
   }
   t.Complete();
 }

//Afterwards:

  if (_queue != null)
   {
  _queue.Close();
  _queue = null;
  }
  if (_queueManager != null)
  {
  _queueManager.Disconnect();
  _queueManager.Close();
  _queueManager = null;
  } 
```

这样做的问题是所有消息在应用程序关闭后重新出现在队列中，而 SQL 数据库中的工作被提交。如果在事务范围内发生异常，SQL 事务将回滚，而 MQ 中的消息似乎保持被删除（直到我重新启动应用程序）。此外，我没有看到 .NET 客户端和 MQ 服务器之间的任何 DTC 活动（这是预期的吗？）

我有点迷失在这里，非常感谢任何帮助。

*   我应该使用哪个 MQ 客户端？托管、非托管、XA ?
*   我应该查看 DTC 活动吗？我将如何让托管客户参与？
*   应该在事务范围内创建哪些对象？
*   为什么即使我提交了事务范围，当应用程序结束时消息也会重新出现在队列中？

**更新**

*   我已经在客户端和服务器上使用了 7.1，但是要在我们的生产环境中部署该（服务器）版本需要太长时间。
*   所以我需要在服务器端使用 7.0.x 版本，客户端我可以使用我需要的任何东西。
*   使用 7.1 客户端连接到 MQ6 服务器失败，错误代码为 2354

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:09:35.833

好吧，您至少需要安装 WebSphere MQ v7.1（包括客户端和队列管理器）才能使用 TransactionScope 在完全托管模式下运行全局事务。在这种情况下，MS DTC 将成为事务协调员。您发布的 InfoCenter 链接实际上指向 WebSphere MQ v7.1。

**更新：**
在 MQ v7.1 之前，XA 事务仅在以 MTS 作为事务协调器的非托管模式下受支持。非托管模式下分布式事务的示例代码在[这里](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/un11390_.htm)。您将需要安装一个额外的组件，扩展事务客户端 (XTC)。根据最新公告，XTC 是免费提供的。可在您的 MQ 服务器安装映像中找到可安装文件。

当 MQ 连接断开时（基本上是调用 MQDISC），事务中任何未提交的消息都将被回滚。因为这个消息重新出现在队列中。

# android - 在 ImageButton 上从状态到状态的发光动画

> ID：13053738
> 
> 赞同：0
> 
> 时间：2012-10-24T16:42:49.803
> 
> 标签：android, animation, imagebutton, glow

我有一个 ImageButton，它有两种状态（选中，未选中），它使用选择器更改可绘制对象。

我研究过要制作类似发光的效果，我应该使用 AlphaAnimation，但是当它从 alpha=0 开始时，它会使背景可见，我不希望这样。

我需要有一些东西，比如将两张图像放在一起，然后只为最上面的一张进行 alpha 动画处理。

我该怎么做？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:49:24.207

```
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="200dp"
android:layout_height="50dp"
android:layout_gravity="center_vertical|center_horizontal"
android:background="#FFFFFF" >

<ImageView
    android:id="@+id/background_image"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF" />

<Button
    android:id="@+id/button_alpha"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true" /> 
```

# .net - MemoryStream 上的 GetBuffer() 什么时候有用？

> ID：13053739
> 
> 赞同：41
> 
> 时间：2012-10-24T16:42:52.373
> 
> 标签：.net, memorystream, getbuffer

我知道`GetBuffer()`在 C#/.NET 中的 MemoryStream 上必须小心使用，因为正如[这里](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)的文档所述，最后可能有未使用的字节，所以你必须确保只查看第一个 MemoryStream .Length 缓冲区中的字节。

但是昨天我遇到了一个情况，缓冲区开头的字节是垃圾！实际上，如果您使用反射器之类的工具并查看`ToArray()`，您可以看到：

```
public virtual byte[] ToArray()
{
    byte[] dst = new byte[this._length - this._origin];
    Buffer.InternalBlockCopy(this._buffer, this._origin, dst, 0,
        this._length - this._origin);
    return dst;
} 
```

所以要对返回的缓冲区做任何事情`GetBuffer()`，你真的需要知道_origin。唯一的问题是 _origin 是私有的，没有办法得到它......

所以我的问题是 - 如果没有`GetBuffer()`关于`MemoryStream()`MemoryStream 是如何构造的先验知识（这是什么设置 _origin），那么它有什么用？

（正是这个构造函数，并且只有这个构造函数，才能设置原点——因为当你想要一个围绕字节数组的 MemoryStream 时，该字节数组从字节数组中的特定索引开始：

```
public MemoryStream(byte[] buffer, int index, int count, bool writable, bool publiclyVisible) 
```

)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-16T21:44:22.107

答案在[GetBuffer() MSDN doc](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)中，您可能错过了它。

当您在`MemoryStream`不提供字节数组 ( `byte[]`) 的情况下创建：

> 它创建了一个初始化为零的可扩展容量。

换句话说，当对 Stream 进行调用`byte[]`时，MemoryStream 将引用具有适当大小的 a 。`Write`

因此，`GetBuffer()`您可以直接访问底层数组并读取它。

当您在不知道其大小的情况下接收流时，这**可能很有用。**如果接收到的流通常非常大，那么调用它会`GetBuffer()`比调用`ToArray()`which copy the data under the hood 要快得多，见下文。

> 要仅获取缓冲区中的数据，请使用 ToArray 方法；但是，ToArray 会在内存中创建数据的副本。

*我想知道你可能在什么时候调用 GetBuffer() 来获取垃圾数据，它可能在两个`Write`调用之间，第一个调用的数据将被垃圾收集，但我不确定这是否会发生。*

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-06T23:27:01.003

如果你真的想访问内部的 _origin 值，你可以使用 MemoryStream.Seek(0, SeekOrigin.Begin) 调用。返回值将完全是 _origin 值。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-12T16:50:46.243

.NET 4.6 有一个新的 API，[`bool MemoryStream.TryGetBuffer(out ArraySegment<byte> buffer)`](https://msdn.microsoft.com/en-us/library/system.io.memorystream.trygetbuffer(v=vs.110).aspx)在精神上与`.GetBuffer()`. 如果可以，此方法将返回一个[`ArraySegment`](https://msdn.microsoft.com/en-us/library/1hsbd92d(v=vs.110).aspx)包含`_origin`信息的内容。

有关何时返回 true 并使用有用信息填充 out 参数的详细信息，请参阅[此问题。](https://stackoverflow.com/q/30808289/2392683)`.TryGetBuffer()`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-20T16:16:11.797

ToArray() 是 GetBuffer() 的替代方法。但是 ToArray() 会在内存中复制对象。如果字节数超过 80000，则对象将被放置在大对象堆 (LOH) 中。到目前为止，没有什么花哨的。但是，GC 不能很好地处理 LOH 和其中的对象（内存没有像您期望的那样释放）。因此可能会发生 OutOfMemoryException。解决方案是调用 GC.Collect() 以便收集这些对象或使用 GetBuffer() 并创建几个更小的（小于 80000 字节）对象 - 这些对象不会进入 LOH，内存将按预期释放由 GC。

存在第三个（更好的）选项，即仅使用流，例如从 MemoryStream 读取所有字节并将它们直接写入 HttpResponse.OutputStream（再次使用 < 80000 字节的字节数组作为缓冲区）。然而，这并不总是可能的（就像我的情况一样）。

作为总结，我们可以说，当不需要对象的内存副本时，您将不得不避免使用 ToArray()，在这种情况下 GetBuffer() 可能会派上用场，但可能不是最佳解决方案。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-05-01T13:41:27.383

如果您使用的是采用 Socket.Send 的低级 API，它会`ArraySegment`很有[用](https://msdn.microsoft.com/en-us/library/d318fkch%28v=vs.110%29.aspx)。您可以创建一个段，而不是调用`ToArray`which 将创建数组的另一个副本：

```
var segment=new ArraySegment<byte>(stream.GetBuffer(), 0, stream.Position); 
```

然后将其传递给`Send`方法。对于大数据，这将避免分配新数组并将其复制到其中，这可能会很昂贵。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-11-01T10:27:33.023

`GetBuffer` [MSDN 文档](https://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)中最重要的一点是，除了它*不*创建数据副本之外，它返回一个包含*未使用*字节的数组：

> 请注意，缓冲区包含可能未使用的已分配字节。例如，如果将字符串“test”写入 MemoryStream 对象，则从 GetBuffer 返回的缓冲区长度为 256，而不是 4，其中 252 个字节未使用。要仅获取缓冲区中的数据，请使用 ToArray 方法；但是，ToArray 会在内存中创建数据的副本。

因此，如果您真的想避免由于内存限制而创建副本，则必须小心不要`GetBuffer`通过线路发送整个数组或将其转储到文件或附件中，因为该缓冲区在任何时候都会增长 2 的幂填充并且几乎总是在最后有很多未使用的字节。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-24T16:55:52.370

`GetBuffer()`总是假设您知道输入字符串的数据的结构（这就是它的用途）。如果您想从流中获取数据，您应该始终使用提供的方法之一（例如`ToArray()`）。

可以使用这样的东西，但我现在能想到的唯一情况是流中的一些固定结构或虚拟文件系统。例如，在您当前的位置，您正在读取位于流中的文件的偏移量。然后，您基于此流的缓冲区创建一个新的流对象，但使用不同的`_origin`. 这样可以避免复制新对象的全部数据，从而节省大量内存。这使您不必携带初始缓冲区作为参考，因为您总是能够再次检索它。

# java - 使用递归在列表中查找重复项？

> ID：13053741
> 
> 赞同：1
> 
> 时间：2012-10-24T16:42:58.907
> 
> 标签：java, list, recursion

我想查找列表中是否存在重复项，并仅使用递归（无循环）返回 true 或 false。因此，如果使用 char 的 ArrayList，[a,b,c,d,e] 应该返回 false。[a,a,b,c,d] 或 [a,b,b,c,c,d] 应该返回 true。我尝试并测试了不同的方法，它适用于某些情况，但不是全部。我改变了我的代码，这就是我现在所拥有的。（最后一个 if 语句有问题）谁能给我一些提示？谢谢。

```
 public static <T> boolean duplicate(List<T> list) throws NullPointerException {
        return duplicateHelper(list, list.get(0));
}

public static <T> boolean duplicateHelper(List<T> list, T t){
    if (list == null)
        throw new NullPointerException();
    if(list.isEmpty())
        return false;
    if(list.size() > 1){
        if(t.equals(list.get(1)))
            return true;        
    }
    if(list.size() == 1)
        return false;
    if(!duplicateHelper(list.subList(1,list.size()), t)){
        return  duplicate(list.subList(1,list.size()));
    }
    return false;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:46:51.283

我建议做这样的事情：

```
function recurse(myList, seenList)  
{  
    currentElement =     myList.removeLastElement();
    if(seenList.contains(currentElement)    
     {
        return false;  
      }
    seenList.add(currentElement);   

    return recurse(myList,seenList);
} 
```

虽然我意识到这是家庭作业，但我试图在没有给出完整解决方案的情况下尽可能直截了当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:57:38.437

递归由前置条件和后置条件辅助。在开始和结束时总是正确的事情。我看到的是，当您第一次输入时`duplicateHelper`，元素`t`位于`0`传递列表的位置。但是，当您递归到`duplicateHelper`传递的子列表时，不再包含`t`at index`0`而是包含先前比较的元素。

考虑从`duplicate`to传递子列表`duplicateHelper`并将比较检查移动到非空 else。添加日志语句以找出代码出错的地方。

# c# - DateTime 计算精细

> ID：13053744
> 
> 赞同：0
> 
> 时间：2012-10-24T16:43:15.517
> 
> 标签：c#

嗨，我想知道完成这项任务的最佳方法是什么！

如果有三个名为 TimeOfLoan、DueDate 和 TimeOfReturn 的 DateTimes 对象，并且如果 TimeOfLoan 和 DueDate 之间的天数超过 15 天，我想对返回前的每一天进行罚款。比如第一天 10 欧元 第二天 10 欧元等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:46:15.607

如果从另一个日期中减去一个日期，则设置一个[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)。从中您可以使用该`Days`属性来获取天数。

```
numberOfDays = (myDateTime1.Date - myDateTime2.Date).Days; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:08:52.653

试试这个吧，我相信只要稍微调整一下就行了

```
DateTime d1;
DateTime d2;
string result = (d1 - d2).TotalDays.Tostring(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:03:51.027

我不确定您在寻找什么，但这是一个想法：

`DateTime TimeOfLoan = new DateTime(2012,1,1);
DateTime DueDate = new DateTime(2012, 1, 18);
int days = DueDate.Subtract(TimeOfLoan).Days;
int finePrice = 10;
Console.WriteLine("You have a fine of {0} euros!",days*finePrice);`

这将打印“你有 170 欧元的罚款！”

# python - 将数字与可变位数匹配

> ID：13053755
> 
> 赞同：0
> 
> 时间：2012-10-24T16:43:55.760
> 
> 标签：python, regex

我正在尝试确定字符串是否与正则表达式模式匹配：

```
expected = re.compile(r'session \d+: running')
string = "session 1234567890: running"
re.match(expected, string) 
```

但是，`re.match()`总是返回`None`。我是否试图错误地匹配小数？这个数字应该是 10 位数字，但我想涵盖它或多或少数字的情况。

编辑：字符串参数实际上是先前匹配的结果：

```
expected = re.compile(r'session \d+: running')
found = re.match(otherRegex, otherString)
re.match(expected, found.groups()[0]) 
```

当我打印`found.groups()[0]`它打印的类型`class str`时，当我打印时`found.groups()[0]`，它打印我期望的字符串：`"session 1234567890: running"`。这可能是它对我不起作用的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:47:04.407

**不**，它没有，它对我来说很好：

```
In [219]: strs = "session 1234567890: running"

In [220]: expected = re.compile(r'session \d+: running')

In [221]: x=re.match(expected, strs)

In [222]: x.group()
Out[222]: 'session 1234567890: running' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:32:14.523

在我的问题中，我将字符串缩短为相关的部分。实际的字符串有：

```
expected = re.compile(r'session \d+: running task(s)')
str = "session 1234567890: running(s)"
re.match(expected, str) 
```

从来没有匹配的原因是因为`'('`and`')'`字符是特殊字符，我需要转义它们。现在的代码是：

```
expected = re.compile(r'session \d+: running task\(s\)')
str= "session 1234567890: running(s)"
re.match(expected, str) 
```

对困惑感到抱歉

# c# - 类的自定义构造函数

> ID：13053758
> 
> 赞同：0
> 
> 时间：2012-10-24T16:44:08.027
> 
> 标签：c#, class, constructor

我看到了这段代码：

```
this.CreateGraphics().DrawRectangle( Pens.Black, new Rectangle( 0, 0, 200, 100 ) ); 
```

`CreateGraphics()`是一种方法，但它的作用类似于具有静态空洞的类。如何在我的代码中创建它？我不知道这种技术怎么能被称为...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:46:45.710

这称为*工厂方法*（它是设计模式之一）。基本上，您创建一个方法，该方法将返回类的新实例，例如：

```
public class Graphics 
{
    public static Graphics CreateGraphics()
    {
        return new Graphics();
    }

    // ... other methods etc ...
    public bool OtherMethod()
    {
        return false;
    }
}
// then you can do Graphics.CreateGraphics().OtherMethod(); 
```

**更新**

您可以在其他地方使用这种设计模式，您需要做的就是创建一个方法，该方法将返回类（`CreateGraphics`方法）的新实例：

```
public class MyClass 
{
    public static Graphics CreateGraphics()
    {
        return new Graphics();
    }

    // ... other methods etc ...
    public void MyOtherMethod()
    {
        this.CreateGraphics().Something();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:47:20.033

CreateGraphics() 正在返回 Graphics 类的一个实例。

我怀疑你在谈论 Control.CreateGraphics() 方法，

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.creategraphics.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.creategraphics.aspx)

任何返回此类对象实例的方法都可以以这种方式使用。

# c# - 使用 Linq 根据另一个列表中的匹配索引返回一个列表中的项目

> ID：13053763
> 
> 赞同：0
> 
> 时间：2012-10-24T16:44:19.023
> 
> 标签：c#, .net, vb.net, linq

我知道我可以很容易地使用循环来完成这个，但我正在为我的问题寻找最有效的解决方案。

假设我有 2 个列表（字符串）：

```
Dim lst1 as new list(of string)
Dim lst2 as new list(of string) 
```

并且两者都具有相同数量的元素，例如：

```
Lst1:    Lst2:
a        abc1
a        abc2
b        abc3
a        abc4
b        abc5
c        abc6
a        abc7
c        abc8 
```

现在，例如，我正在寻找来自 lst2 的所有元素，其中 Lst1 = "a" 中的相应元素

所以我的最终结果将是：

```
Lst3 = Items from Lst2 where corresponding Items in Lst1 = "a"
Lst3 = {abc1, abc2, abc4, abc7} 
```

再一次，我知道这对循环来说非常容易，但我想知道如何通过 Linq 做到这一点。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:50:06.847

```
List<string> Lst1 = new List<string> { "a", "a", "b", "a", "b", "c", "a", "c"};
List<string> Lst2 = new List<string> { "abc1", "abc2", "abc3", "abc4", "abc5", "abc6", "abc7", "abc8" };

var Lst3 = Lst2.Where((s, i) => Lst1[i] == "a").ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:49:25.007

尝试这个 -

```
List<String> Lst3 = Lst2.Where((item, index) =>
                              Lst1[index].Equals("a")).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:55:09.920

以更通用的方式，您可以尝试这样的事情：

**C＃**

```
List<String> lst3 = lst2.Where((item, index) => 
                               item.StartsWith(lst1.Distinct()[index])).ToList(); 
```

**VB**

```
Dim lst3 As List(Of [String]) = lst2.Where(Function(item, index)
                                item.StartsWith(lst1.Distinct()(index))).ToList() 
```

希望这会有所帮助！

# c - 使用 gsl 编写 Runge-Kutta ODE 求解器

> ID：13053768
> 
> 赞同：1
> 
> 时间：2012-10-24T16:44:35.590
> 
> 标签：c, wolfram-mathematica, gsl, runge-kutta

自从我做任何 C/c++ 以来已经有一段时间了，但我想使用 gsl 库编写一个 ODE 求解器来求解以下 ODE 集

```
$$ u'(r)=up(r)$$
$$ up'(r)=-(2*(r-1)/(r*(r-2)))*up(r)-((r*r/((r-2)*(r-2)))-(2/r*(r-2)))*u(r) $$ 
```

所以在 gsl 表示法中我的 y[0]=u, y[1]==up，上面的 RHS 定义了 f[0] 和 f[1]。根据这些定义，可以计算雅可比和 dfdr（通常它们的“时间”变量称为“t”而不是“r”）。这样做的原因是因为我在使用 Mathematica 时遇到了速度问题。我在他们关于 ODE 求解器的文档末尾获取了 gsl 示例代码，并尝试使其适应我的问题，如下所示：

```
 #include <stdio.h>
 #include <gsl/gsl_errno.h>
 #include <gsl/gsl_matrix.h>
 #include <gsl/gsl_odeiv2.h>
 #include <complex.h>

 int
 func (double r, const double y[], double f[],
       void *params)
 {
   double mu = *(double *)params;
   f[0] = y[1];
   f[1] = -(2*(r-1)/(r*(r-2)))*y[1]-((r*r/((r-2)*(r-2)))-(2/r*(r-2)))*y[0];
   return GSL_SUCCESS;
 }

/* void tester (double r) {  double outer=-((r*r/((r-2)*(r-2)))-(2/(r*(r-2))));  printf ("%.5e \n", outer); } */      

 int
 jac (double r, const double y[], double *dfdy, 
      double dfdt[], void *params)
 {
   double mu = *(double *)params;
   gsl_matrix_view dfdy_mat 
     = gsl_matrix_view_array (dfdy, 2, 2);
   gsl_matrix * m = &dfdy_mat.matrix; 
   gsl_matrix_set (m, 0, 0, 0.0);
   gsl_matrix_set (m, 0, 1, 1.0);
   gsl_matrix_set (m, 1, 0,-((r*r/((r-2)*(r-2)))-(2/(r*(r-2)))));
   gsl_matrix_set (m, 1, 1, -(2*(r-1)/(r*(r-2))));
   dfdt[0] = 0.0;
   dfdt[1] =((1/(r*r))+(1/((r-2)*(r-2))))*y[1]-((4*(1-r)/(r*r*(r-2)*(r-2)))+(4*r/((r-2)*(r-2)*(r-2))))*y[0];
   return GSL_SUCCESS;
 }

 int
 main (void)
 {
   /* tester(5);*/
   double om = 2;
   gsl_odeiv2_system sys = {func, jac, 2, &om};

   gsl_odeiv2_driver * d = 
     gsl_odeiv2_driver_alloc_y_new (&sys, gsl_odeiv2_step_rk8pd,
                  1e-6, 1e-6, 0.0);
   int i;
   double r = 10, r1 = 100;
   double y[2] = { 0.0000341936, -0.0000572397 };

   for (i = 1; i <= 90; i++)
     {
       double ri = 10 + i;
       int status = gsl_odeiv2_driver_apply (d, &r, ri, y);

       if (status != GSL_SUCCESS)
    {
      printf ("error, return value=%d\n", status);
      break;
    }

       printf ("%.5e %.5e %.5e\n", r, y[0], y[1]);
     }

   gsl_odeiv2_driver_free (d);
   return 0;
 } 
```

这是给出的数字，但它们与 Mathematica NDSolve 给出的数字不同，即使我的 WorkingPrecision 和 PrecisionGoal 较低。我所做的是否有错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:21:46.773

我认为你只是缺少`r*(r-2)`括号

```
((r*r/((r-2)*(r-2)))-(2/r*(r-2)))*y[0]; 
```

（也在`up'(r)=-(2*(r-1)/(r*(r-2)))*up(r)-((r*r/((r-2)*(r-2)))-(2/r*(r-2)))*u(r)`），你有相应的括号`jac`。

# asp.net - 无法从 Visual Studio 连接本地数据库服务器

> ID：13053772
> 
> 赞同：0
> 
> 时间：2012-10-24T16:44:45.533
> 
> 标签：asp.net, sql, sql-server, visual-studio-2010

之前一切正常。但是几天后，当我今天开始在 vs 10 上工作时，我尝试连接到数据库并收到以下错误.. 这是描述创建新数据库时整个情况的图像![在此处输入图像描述](../Images/f2c68d725d4b1cdf5462d186910706cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:10:42.813

该错误告诉您无法连接到本地服务器。由于它是本地的，因此您可以排除连接问题，因此 SQL 服务很可能没有运行。拉起您的服务对话框（计算机管理 -> 服务）并向下滚动到“SQL Server”。您应该看到服务的状态为未运行。右键单击它并点击“开始”。你应该很好从那里去。

# html - html5页面对齐

> ID：13053778
> 
> 赞同：0
> 
> 时间：2012-10-24T16:44:52.633
> 
> 标签：html, css

问题是我无法找出对齐问题任何人都可以找出问题的原因

```
html {
min-height: 20%;
max-height: 80%;
max-width: 80%;
background-size: cover;
background-image: url();
background-repeat: no-repeat;
background-position: center top;
}

body {
min-height:80%;
width: 800px;
max-width: 90%;
margin-top:550px;
font-size: 30px; 
```

我的代码 css 在上面，下面是我的站点链接 [http://design3web.in/test1/](http://design3web.in/test1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:58:51.947

取决于你想要达到的目标。要使页面居中，请使用`body { margin:auto; }`并`max-width: 80%;`从 html中删除

# javascript - 如果 jquery 实时事件代码已被删除，我还需要取消绑定吗？

> ID：13053779
> 
> 赞同：0
> 
> 时间：2012-10-24T16:44:55.777
> 
> 标签：javascript, jquery, events, bind, live

我用 ajax 加载页面，也用它加载页面 javascript 代码。

我想知道，如果我删除页面 javascript 代码，它上面有 jquery 实时绑定事件，它会终止绑定还是我仍然需要调用 $(this).die(); 功能？

**jquery 实时绑定事件**

```
jQuery(function($) {

    $('.showNavLink').live('click', function() {

    });
}); 
```

**Ajax 页面流**

*   主页已加载
*   主页 javascript 已加载
*   用户请求加载新页面（点击）
*   使用 javascript 删除主页代码
*   删除 javascript 代码
*   正在加载新页面...（从第一步开始循环）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:48:24.267

移除元素会**解除**对应元素的所有事件的关联。

即使您删除了元素，如果您不删除事件，也可能存在内存泄漏。所以最好显式调用`.die()`

还

```
As of jQuery 1.7, use of .die() (and its complementary method, .live())
is not recommended. Instead, use .off() to remove event handlers bound with .on() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:53:33.837

删除 Javascript 源代码不会删除从该代码创建的 Javascript 函数对象。

您必须取消绑定事件处理程序以防止它处理事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T16:55:27.970

`$.live`已弃用[http://api.jquery.com/live/](http://api.jquery.com/live/)。但是如果你正在使用它，你应该删除它。我假设您永远不会刷新页面。仅删除脚本标签并不会撤消脚本运行时所做的一切。

新方法是

```
$(document).on('click', '.showNavLink', function() {}); 
```

不再需要时

```
$(document).off('click', '.showNavLink'); 
```

# android - SqliteConstraintException Android

> ID：13053787
> 
> 赞同：2
> 
> 时间：2012-10-24T16:45:22.593
> 
> 标签：android, sqlite, exception

我有一个 SqliteConstraintException 的问题。我的数据库是这样的

```
private static final String CREATE_TABLE_1 =
   "create table table_1 (uid integer primary key autoincrement, "
+ table_1.c1 + " TEXT,"
+ table_1.c2 + " integer,"
+ table_1.c3 + " TEXT," 
+ table_1.c4 + " TEXT,"
+ table_1.c5 + " integer);";

private static final String CREATE_TABLE_2 = 
        "create table table_2 (uid integer primary key autoincrement, "
+ table_2.c1 + " TEXT,"
+ table_2.c2 + " integer,"
+ table_2.c3 + " TEXT);";

private static final String CREATE_TABLE_3 = 
        "create table table_3 (uid integer primary key autoincrement, "
        + "uid_table_1 integer, "
        + "uid_table_2 integer, "

+ "FOREIGN KEY(uid_table_1) REFERENCES table_1(uid) ON DELETE CASCADE, " 
+ "FOREIGN KEY(uid_table_2) REFERENCES table_2(uid) ON DELETE CASCADE);";

private static final String CREATE_TABLE_4 = 
        "create table table_4 (uid integer primary key autoincrement, "
+ "uid_table_2 integer,"
+ "FOREIGN KEY(uid_table_2) REFERENCES table_2(uid) ON DELETE CASCADE);"; 
```

我在我的 SQLiteOpenHelper 中使用来启用外键约束

```
@Override
public void onOpen(SQLiteDatabase db) {
super.onOpen(db);
if (!db.isReadOnly()) {
// Enable foreign key constraints
db.execSQL("PRAGMA foreign_keys=ON;");
} 
```

但是当我想删除 table_2 的行时，我得到了 SqliteConstraintException。你能帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:50:11.687

我看起来你的大多数表都相互引用。如果要删除表 2 中用作不同表中的外键的行，则需要删除引用它的记录。所以从表 3 和 4 中删除记录，这些记录具有对您尝试在 2 中删除的行的外键引用，然后为该行调用 delete。

# node.js - Node js检查一个var是否是一个函数

> ID：13053788
> 
> 赞同：21
> 
> 时间：2012-10-24T16:45:25.713
> 
> 标签：node.js

> **可能重复：**
> [如何检查 javascript 变量是否为函数类型？](https://stackoverflow.com/questions/5999998/how-can-i-check-if-a-javascript-variable-is-function-type)

我如何检查变量是否是数组的函数存在`Array.isArray()` 但`Function.isFunction`不存在

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-24T16:46:47.603

```
if (typeof variable === 'function') {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T16:50:12.887

您可以使用`instanceof`运算符。

```
var fn = function() {};
var result = fn instanceof Function; // result will be true 
```

它还尊重原型继承。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T17:24:53.573

Underscore.js 是一个包含许多有用帮助器的库，就像您正在寻找的那个。

[http://underscorejs.org/](http://underscorejs.org/)

```
_ = require('underscore');

var aFunction = function() { };
var notFunction = 'Not a function';

_.isFunction(aFunction); // true
_.isFunction(notFunction); // false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T17:04:08.870

```
var fn = function() {},
    toString = Object.prototype.toString;

first way:

if( toString.call( function(){} ) === '[object Function]' ) {
    //if is Function do something...
}

second way:

if( fn.constructor.name = 'Function' ) {
    //if is Function do something...
} 
```

希望它有助于欢呼:)！

# linux - 如何在 linux 上创建具有特定格式的假文件？

> ID：13053793
> 
> 赞同：1
> 
> 时间：2012-10-24T16:46:03.757
> 
> 标签：linux, file-type

我正在我的网站上测试一些文件类型识别，如果用户上传一个 .txt 文件，它会加载一个 txt 图标，如果他上传一个 .jpg 文件，则会加载另一个图标。

我不想上传真正的 wmv、avi、mp3、mp4 和任何其他大文件，所以我在想：有没有办法创建一个任何文件类型的假 1KB 文件？

我使用的是 Linux，因此更改文件扩展名显然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:24:00.660

我建议您尝试使用您已经拥有的文件的必需部分，而不是搜索各种工具。这可能不是最好的方法，但它会让你的工作更快。

你可以跑，

> dd if=/path/to/original_file of=/path/to/new_file bs=1024 count=1

因此，您将获得所需类型的精确 1 kb 文件。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:15:27.603

对于文本文件，`touch`将起作用。您可能希望通过解析文件扩展名来区分纯文本和例如 C 源代码。

ImageMagick 可以使用以下方式创建各种图像文件格式：

```
convert -size 1x1 xc:white test.jpg 
```

其中文件扩展名与文件格式匹配（例如，.jpg -> JPEG）。可以找到它支持的格式列表

```
identify -list format 
```

我不知道有任何用于生成声音文件的瑞士军刀，因为我从未真正研究过它。也许看看`siggen`生成 WAV 文件。从那里，你应该能够得到其他一切。例如，对于 MP3，请查看`lame`.

除此之外，我不确定。其他文件格式可能有类似的程序。

# r - 不要在未引用的字符串中删除零作为参数

> ID：13053797
> 
> 赞同：6
> 
> 时间：2012-10-24T16:46:14.123
> 
> 标签：r

我正在尝试为一个包创建一个函数，该函数允许用户在没有引号的情况下读取数据。它几乎按预期工作，除了函数将 3.30 转换为 3.3，即使最终输出是字符。如何让我的函数读取数字元素但不删除尾随零。总体思路是：

1.  不使用引号读取元素的函数
2.  函数不会丢弃 R 认为不重要的零
3.  尽管元素可能看起来是数字的，但我希望它们作为字符元素输出

这是两次尝试以及它们的输出（一次尝试使用`substitute(...())`，另一次使用`match.call(expand.dots = FALSE)`：

```
#attempt #1 
fun <- 
function(...){ 
    substitute(...())
}

fun(3.30, 5.05)

#dropped zero on 3:30 (not what I want)
> fun(3.30, 5.05)
[1] "3.3"  "5.05"

#attempt #2 
fun <- 
function(...){ 
    x <- match.call(expand.dots = FALSE)
    as.character(x[[2]])
}

fun(3.30, 5.05)

#again dropped zero on 3:30 (not what I want)    
> fun(3.30, 5.05)
[1] "3.3"  "5.05" 
```

使用引号它输出我想要的，但这违背了不必提供引号的目的：

```
fun('3.30', '5.05')

> fun('3.30', '5.05')
[1] "3.30" "5.05" 
```

PS如果有人对此线程有更好的标题，请随时编辑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:21:23.410

好吧，我可以想到一种方法，但它不是很漂亮并且可能不稳定。R 还保存输入呼叫的历史记录。这可用于获得确切的输入：

```
fun <- 
  function(...){
    savehistory(file <- tempfile())
    hist <- readLines(file)
    args <- hist[length(hist)]
    args <- unlist(regmatches(args,gregexpr("(?<=fun\\().*(?=\\))",args,perl=TRUE)))
    args <- unlist(strsplit(args,split=","))
    as.character(args)
  } 
```

例子：

```
> fun(2.20,3.14,pi,0.000000)
[1] "2.20"     "3.14"     "pi"       "0.000000" 
```

我不确定这会有多稳定，可能会有十几个情况下它会崩溃。此外，这假设函数名为`fun`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T19:48:39.593

我今天可能有点密集，但 `readlines('enter something')`随后键入 "3.30" （不带引号）会产生返回的字符值 "3.30" 。

因此，要么用调用填充你的函数，`readlines`要么挖掘源代码`readlines`并修改它以满足你的需要。

虽然我不得不说让用户将所有内容都输入到一个文件中似乎要容易得多，如果需要，可以使用`read.table`or读取文件`scan`并将输入类型指定为“字符”。

回答泰勒的评论：

```
 foo<-function(){
 + readline('enter data: ')->foostuff
 + return(foostuff)
 + }
 > foo()
 enter data: 4.30 56 hello world
 [1] "4.30 56 hello world" 
```

大概您可以按照您想要的任何方式拆分这样的字符串:-) 以获得单独的数字字符串。（用户在提示“输入数据：”后键入内容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T17:42:33.150

不幸的是，这是不可能的。与大多数语言一样，R 将 3.3 和 3.30 视为相同（换句话说，不存储有效位数）。

```
> 3.30
[1] 3.3

> 3.30 == 3.3
[1] TRUE

> deparse(3.30)
[1] "3.3" 
```

如果您的所有输入具有相同的位数，您可以使用`format`来获得正确的结果

```
> format(3.3, nsmall=2)
[1] "3.30" 
```

# android - Eclipse Android Logcat：如何保存在 Logcat 中显示特定信息列的首选项？

> ID：13053805
> 
> 赞同：2
> 
> 时间：2012-10-24T16:46:33.763
> 
> 标签：android, eclipse, preferences, logcat

请原谅我没有以全尺寸显示 Logcat（截至目前，我正在使用 RAM 和图形内存有限的 VM）。

在任何情况下，每当我启动 Eclipse 时，Logcat 都会看起来像这样，所有这些信息列都显示（以红色圈出）。

![Logcat 中显示的默认信息列。](../Images/f3e571220f9f246846d2b12e7b6598f0.png)

现在，我想将我的首选项保存在 Logcat 中，这样每当我启动 Eclipse 时它就会像这样（蓝色圆圈）。

![我在 Logcat 中保存的首选项。](../Images/5ba7a0be8c8172d667cc41e58bbb4e5b.png)

有谁知道如何做到这一点，而不是每次都关闭信息列？如果这不可用，我们可以在某处请求它作为功能吗？

我可以接受任何答案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T23:45:12.753

从[https://stackoverflow.com/a/14144413](https://stackoverflow.com/a/14144413)，您可以手动设置每列的像素宽度。因此，将您不想看到的列设置为 1。

我尝试重新排列 com.android.ide.eclipse.ddms.prefs 文件中的顺序，但这并不影响 Eclipse 中的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:03:22.173

在谷歌无数次搜索之后，我得出的结论是没有解决这个问题的方法。

唯一可能的方法是将其作为功能请求提出。

# html - 由于溢出隐藏，字段集的左侧隐藏

> ID：13053808
> 
> 赞同：0
> 
> 时间：2012-10-24T16:46:41.910
> 
> 标签：html, css

我在其中设置了一个字段`overflow: hidden`，以便它不会与向左浮动的另一个 div 碰撞。

问题是溢出的隐藏挡住了它的左侧。 [这](http://jsfiddle.net/opmaster/uXdX4/3/)是一个jsfidde。抱歉，代码很长，没时间筛选...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:16:06.893

我不确定这是否是您想要实现的外观，但您可以[在此处](http://jsfiddle.net/L7VGF/)找到我的尝试。

我从 div.rightside 中删除了右边距，并从 div.leftside 中删除了浮动和溢出属性。

```
.rightSide {
    float: right;
    /*margin: 0 100px 0 0;*/
    max-width: 40%;
    overflow: hidden;
    width: 40%;
}
.leftSide {
    /*float: right;
    overflow: hidden;*/
    margin: 0 10px 0 0;
    width: 500px;
} 
```

视觉结果可能不理想，具体取决于此页面将呈现到的屏幕大小，因此我建议您使用[1140px CSS 网格系统](http://cssgrid.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:08:53.163

如果我得到你试图做的事情：

**rightSide**应与`float:right`;

和**leftSide**应该是`float:left`;

看看你的**宽度**......它应该设置为**两个 div**

看一下示例：将中间线向左移动，您会看到 div 向左移动..

[jsfiddle](http://jsfiddle.net/uXdX4/4/) <--- 点击链接

![在此处输入图像描述](../Images/b1da921c56338d78fe0728ebac758aab.png)

# php - pdo 执行无效的参数号：未定义参数

> ID：13053812
> 
> 赞同：1
> 
> 时间：2012-10-24T16:46:48.520
> 
> 标签：php, sql, pdo

我正在尝试对 pdo 使用简单的 UPDATE 查询，但在查看问题 5 小时后，我只是丢失了它。也许你们中的一些人知道我做错了什么。

我总是收到此错误：“10-24 17:59:08.829: D/test(1794): **Warning** : PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter” number: parameter未定义

```
$name = $_POST['name'];
$buyin = $_POST['buyin'];
$result = $_POST['result'];
$startDate = $_POST['startDate'];
$endDate = $_POST['endDate'];
$location = $_POST['location'];
$isTournament = $_POST['isTournament'];
$participants = $_POST['participants'];
$endPosition = $_POST['endposition'];
$comment = $_POST['comment'];
$blinds = $_POST['blinds'];
$pause = $_POST['pause'];

$game_id = $_POST['game_id'];
$user_id = $_POST['user_id'];

try {
    $dbconn = 'mysql:host=' . DBHOST . ';dbname=' . DBDATA;
    $db = new PDO($dbconn, DBUSER, DBPASS);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$sql = 'UPDATE game SET name = :name AND buyin = :buyin AND result = :result AND startDate = :startDate AND endDate = :endDate AND
location = :location AND isTournament = :isTournament AND participants = :participants AND endposition = :endposition AND comment = :comment AND blinds = :blinds AND pause = :pause
WHERE game_id = :game_id AND user_id = :$user_id';
$statement = $db->prepare($sql);

$boolean = $statement->execute(array(':name' => $name, ':buyin' => $buyin, ':result' => $result,':startDate' => $startDate, ':endDate'
=>$endDate, ':location'=> $location, ':participants'=> $participants, ':endposition' => $endPosition, ':comment' => $comment, ':blinds' => $blinds, ':pause' => $pause, ':game_id' => $game_id,':user_id' => $user_id)); 
```

我的 mysql 表如下所示：

```
Naam    Type    
 1  game_id int(11)         
 2  user_id int(11)         
 3  name    varchar(45) 
 4  buyin   double          
 5  result  double          
 6  startDate   bigint(20)      
 7  endDate bigint(20)          
 8  location    
 9  isTournament    
 10 participants    
 11 endposition 
 12 comment text    
 13 blinds  text    
 14 pause   bigint(20) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:48:33.413

查询中有 14 个参数，但执行数组中只有 13 个。似乎数组中缺少 isTournament 参数。

# haskell - 不确定如何获得正确的评估顺序

> ID：13053826
> 
> 赞同：2
> 
> 时间：2012-10-24T16:47:20.003
> 
> 标签：haskell, ghci, operator-precedence, strictness

我不确定这两段代码之间的区别是什么（相对于`x`），但第一个完成：

```
$ foldr (\x y -> if x == 4 then x else x + y) 0 [1,2 .. ]
10 
```

而第二个没有（至少在 GHCi 中）：

```
$ foldr (\x (y, n) -> if x == 4 then (x, n) else (x + y, n + 1)) (0, 0) [1,2 .. ]
....... 
```

我做错了什么，阻止了第二个例子在它命中时完成`x == 4`，就像第一个例子一样？

我已经尝试在 the`x`和`x == 4`(inside a `let`) 中添加爆炸模式，但似乎都没有什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:01:44.803

你的第二个例子有两个相关的问题。

回想一下，它`foldr`产生了一个右关联嵌套，即`foldr f z [a, b, c]`= `f a (f b (f c z))`。因此，您给出的函数的第二个参数`foldr`表示折叠整个剩余列表的*最终值。*在无限列表的情况下，这只有在您生成另一个惰性无限数据结构或在某些时候完全忽略第二个参数时才有可能，就像您的第一个示例一样。

您的第二个示例始终使用输入元组中的第二项来计算结果元组的第二项，因此当应用于无限列表时，您最终会得到无限回归。指定`0`为“起始”值无济于事，因为`foldr`起始值位于列表的末尾，而无限列表显然没有 - 似乎您想将值不变地传递，但是需要有一个值来开始（或者可能是“结束”）！

这只会导致结果中的第二项是非终止的。结果的第一项*是*明确定义的，或者至少可以是。这里的问题是模式匹配强制评估，这会阻止在整个折叠完成之前产生任何结果。这可以通过多种方式避免，但简单地使用`fst`and`snd`就足够简单了：`\x yn -> if x == 4 then (x, snd yn) else (x + fst yn, snd yn + 1)`应该给您一个包含一个元组的结果，该元组的第一项是您所期望的（但其第二项未定义，如上所述）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:52:23.167

第一个不使用“累加器”中的值（即`y`），而第二个使用`n`. 计算`n`需要折叠整个列表，这就是它永远不会终止的原因。再多的严格也无法解决这个问题。

事实上，你的算法并没有像你认为的那样做。您可能将`foldr`'s 行为与`foldl`. 即使你能以某种方式计算`n`，它的价值也将是无限的。最好的思考方式`foldr`是用第一个函数替换列表中的每个，用第二个值`(:)`替换终端。`[]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T16:57:32.450

这是模式匹配/评估发生的方式。如果你让`f = \x (y, n) -> ...`你定义它，那么

```
foldr f (0, 0) [1,2 .. ] =
   f 1 (foldr f (0,0) [2..]) =
   (\x (y, n) -> ...) 1 (foldr f (0,0) [2..]) 
```

并且该`(y,n)`模式是严格匹配的，因此要计算任何东西，需要计算第二个参数 ( `foldr .. [2..]`)，然后需要计算，`foldr .. [3..]`以此类推。

可以使用`~`（称为“无可辩驳的模式”）使模式匹配不严格，这会在一定程度上改变行为。

```
> foldr (\x ~(y,n) -> if x == 4 then (x,n) else (x+y,n+1)) (0,0) [1..]
(10, 
```

（因为可反驳的版本甚至无法计算元组的第一个元素。）

# java - 在 Java 中，公共构造函数似乎总是一种不好的编码习惯

> ID：13053829
> 
> 赞同：1
> 
> 时间：2012-10-24T16:47:29.360
> 
> 标签：java, coding-style

> **可能重复：**
> [考虑提供静态工厂方法而不是构造函数](https://stackoverflow.com/questions/13046877/consider-providing-static-factory-methods-insteads-of-constructors)

这可能是一个有争议的问题，可能不适合这个论坛（所以如果你选择关闭这个问题，我不会受到侮辱）。

鉴于 Java 的当前功能，似乎没有理由制作构造函数`public`……**永远**。友好，，`private`都`protected`可以，但`public`不行。

似乎提供一种`public static`创建对象的方法几乎总是一个更好的主意。每个 Java Bean 序列化技术（JAXB、Jackson、Spring 等）都可以调用受保护或私有的无参数构造函数。

我的问题是：

*   我从来没有在任何地方看到过这种做法被法令或写下来？也许布洛赫提到了它，但我不拥有这本书。
*   除了可能不是我错过的超级干燥之外，还有其他用例吗？

**编辑：我解释了为什么静态方法更好。**

.1。一方面，您可以获得更好的类型推断。例如参见 Guava 的[http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained](http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained)

.2\. 作为该类的设计者，您可以稍后更改使用静态方法返回的内容。

.3\. 处理构造函数继承是很痛苦的，特别是如果你必须预先计算一些东西。.4\. 更多原因在这里：[https ://stackoverflow.com/a/3852556/318174](https://stackoverflow.com/a/3852556/318174)

我应该已经发布了这是用于公共 API 之类的代码。我经常违反各种规则（比如使用直接字段访问）来进行单元测试，方便，因为我很懒。所以当我的意思是**ever**时，我的意思是你将它释放到野外。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T16:54:35.303

如果以下是该方法的外观

```
public class MyClass {

    private MyClass() { }

    public static MyClass getInstance() {
        return new MyClass();
    }
} 
```

那么宁愿有一个公共的无参数构造函数。

如果我必须调用这样的方法，它会让我觉得它正在做一些事情来构造对象，但实际上并非如此。

我认为拥有一个除了调用构造函数本身之外什么都不做的方法没有任何意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T16:51:29.873

简而言之，静态工厂很酷并且有其用途，但有些 API 陷入了到处使用它们的陷阱，即使它们没有增加价值而只是增加了复杂性。

静态工厂在 Java 中运行良好的一个例子是 EnumSet，它有许多命名的构建器，不能自然地实现为重载的构造器。

例如，即使它们具有相同的论点，它们也不会做同样的事情。

```
EnumSet.of(E1, E3);
EnumSet.range(E1, E3); 
```

EnumSet 还根据枚举中元素的数量返回两种不同的实现。

```
 if (universe.length <= 64)
        return new RegularEnumSet<>(elementType, universe);
    else
        return new JumboEnumSet<>(elementType, universe); 
```

不幸的是 EnumMap 并没有做类似的事情，所以只有一个实现。

* * *

> .1。一方面，您可以获得更好的类型推断。例如参见番石榴的

所以番石榴有类似的方法

```
List<TypeThatsTooLongForItsOwnGood> list = Lists.newArrayList();
Map<KeyType, LongishValueType> map = Maps.newLinkedHashMap(); 
```

在 Java 7 中只是

```
List<TypeThatsTooLongForItsOwnGood> list = new ArrayList<>();
Map<KeyType, LongishValueType> map = new LinkedHashMap<>(); 
```

这更短，您不需要学习任何新方法，如果您不需要对类型进行双重检查，您可以执行以下操作。

```
List<TypeThatsTooLongForItsOwnGood> list = new ArrayList();
Map<KeyType, LongishValueType> map = new LinkedHashMap(); 
```

在番石榴中，你有

```
Set<Type> copySet = Sets.newHashSet(elements);
List<String> theseElements = Lists.newArrayList("alpha", "beta", "gamma"); 
```

内置方法在哪里

```
Set<Type> copySet = new HashSet<String>(elements);
List<String> theseElements = Arrays.asList("alpha", "beta", "gamma"); 
```

如果您`<String>`从 HashSet 中删除，您将失去类型安全性，但鉴于大多数体面的 IDE 会为您自动完成此代码，您实际上不会保存任何输入。

> .2\. 作为该类的设计者，您可以稍后更改使用静态方法返回的内容。

我会说 YAGNI，实际上很难透明地显着改变实现。您不太可能在无需重新构建或重新测试代码的情况下更换具有完全向后兼容性的替代品。

> .3\. 处理构造函数继承是很痛苦的，特别是如果你必须预先计算一些东西。

这是真的，但很少见。对于这种情况，我通常有一个用于复杂构造的构建器类，单独的因子方法不能解决问题。

* * *

值得考虑的是，Java 库中的大多数类都使用构造函数而不是静态工厂。我能想到的唯一使用构造函数的类，但后来在可能的情况下改为使用静态工厂是自动装箱包装类。知道调用哪个工厂方法的复杂性被语言隐藏了。

> 鉴于 Java 的当前功能，似乎没有理由将构造函数公开......永远。友好的、私人的、受保护的都可以，但公开的不行。

仅仅因为你可以做某事并不意味着它是个好主意。

例如，您可以将所有的类、方法和变量设置为 1 或 2 个字符长（您永远不需要使用 3 个字母或更长的名称，有些人认为这样做更好），但这并不是一个好主意。

顺便说一句，如果您查看了常见的 UNIX 命令，很多都是两个字符长。;)

> 似乎为创建对象提供公共静态方法几乎总是一个更好的主意。

除非你更喜欢简单而不是让你的代码变得不必要的复杂。

> 我从来没有在任何地方看到过这种做法被法令或写下来？

我也没有。可能是因为这不是一个好主意。恕我直言。

> 除了可能不是我错过的超级干燥之外，还有其他用例吗？

您没有说明这样做的充分理由，这就是不为我这样做的充分理由。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T16:54:27.333

我不这么认为。创建对象需要构造函数。构造函数*保证*确实创建的对象对于可以返回 null 的工厂方法是不正确的。

构造函数或工厂方法之间的选择取决于具体的用例。有时构造函数更好，有时工厂方法有优势。

我宁愿说在大多数情况下将静态工厂方法放入类本身是不好的做法。恕我直言，类本身及其工厂的分离是优选的解决方案。

我不认为所有框架都支持工厂方法。Spring 和 JAXB 确实支持，但例如`HttpServlet`，、`HttpFilter`EJB、Applet 等必须具有公共默认构造函数。即使在 spring 使用具有构造函数的 bean 的情况下，也比需要工厂方法进行实例化的 bean 更方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:28:27.767

我可以想到公共构造函数的一个用例。如果您使用注释处理框架，则需要实现一个`Processor`. 编译器将使用反射来创建处理器的实例。为了使系统正常工作，您的实现类应该是公共的，而不是通用的，并且有一个公共的无参数构造函数。

因此，公共构造函数可能对使用反射的框架很有用。

# excel - 在 XlSM excel 工作簿中如何从某些列中删除数据而不影响公式及其在 POI 中的列中的值

> ID：13053830
> 
> 赞同：0
> 
> 时间：2012-10-24T16:47:33.597
> 
> 标签：excel, vba

在 XLSM 工作簿上工作，我试图从列中删除数据，留下包含使用 POI 的列的公式。如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:07:15.907

您能否澄清这个问题，您是否正在寻找可以删除工作表上所有不包含公式的单元格内容的 vba 代码？

以下代码将删除范围 A1:Z100 中的所有非公式

```
for each c in Range("A1:Z100").cells
If c.HasFormula = False then c.ClearContents
next 
```

希望这可以帮助 ：）

# wcf - 如何从 Oracle 触发器调用 WCF 服务

> ID：13053832
> 
> 赞同：2
> 
> 时间：2012-10-24T16:47:44.510
> 
> 标签：wcf, oracle, service

我编写了一个 WCF 服务，它执行一个 SSIS 包来复制一些数据，并且需要在插入后从 Oracle 触发器中调用它。我不处理后端，以前从未尝试过这样的事情。有人可以告诉我如何通过 Oracle 中的触发器调用 WCF 服务内部的方法。

这是上级希望它完成的方式，我对它的工作方式没有任何设计权限。让 WCF 与 SQL Server SSIS 对话是没有问题的，如何从 Oracle 调用 WCF 服务是一场噩梦。我该如何解决这个问题？我根本不是一个经验丰富的 Oracle 人。

# c# - 将 FROM 子句转换为对 SelectMany 的调用的一些混淆

> ID：13053834
> 
> 赞同：0
> 
> 时间：2012-10-24T16:47:53.823
> 
> 标签：c#, linq, linq-to-objects

随后的两个*FROM*子句被转换为对`SelectMany`.

一种）

```
var query = from c_1 in collection_1
            from c_2  in collection_2 
            from c_3 in collection_3
            select ... 
```

如果我错了，请纠正我，但我认为查询表达式被翻译成语义上等同于的代码：

```
collection_1.SelectMany(c_1 => c_1.collection_2.
               SelectMany(c_2 => c_2.collection_3.
                     Select(c_3 =>  ... ))); 
```

总是`from c_3 in collection` “*绑定*”到`c_2`范围变量吗？使用“*绑定*”一词，我在问是否`collection_3`为每个元素枚举了整个`c_2`元素？

b) 假设我在***a)***下是正确的，`c_3`总是“*绑定*”到最接近它定义的范围变量？

***c) 如果对b)***的回答为真，那么在以下示例中`c_3`也必然：`c_2`

```
var query = from c_1 in collection_1
            from c_2  in collection_2 
            where ...
            from c_3 in collection_3 
```

d）在下一个查询中`c_3`绑定到`a`（即，对于每个`a`整体`groupAandB`都将被枚举）：

```
var query_1 =  from a in groupA
               join b in groupB on a equals b
                  into groupAandB
               from c_3 in groupAandB
               select c_3; 
```

e) 在这里，我假设***d)***的答案`c_3`确实是`a`. 但是当查看在`query_1`编译时被翻译成的代码时，我们可以争辩说它`c_3`实际上是绑定到匿名类型`a_1`（ ie `new { a, groupAandB = os }`）的？！

```
groupA.GroupJoin(groupB, a => a, b => b, (a, os) => new { a, groupAandB = os } ).
             SelectMany(a_1 => a_1.groupAandB ); 
```

f) 牢记要`query_1`翻译的内容，我们不能争辩说我在***d)***下所做的任何假设在概念上可能是正确的，但在技术上是错误的，因为在编译时没有任何`c_3`变量，或者可能在`c_3`某处定义在引擎盖下，但它实际上绑定到*匿名类型*而不是`a`？

**编辑：**

1)

> 使用 Join，“第二个”集合不能依赖于您当前正在“查看”第一个集合中的哪个值，

a）我假设你的意思是我们不能加入由当前值返回`customers`的集合（即） ：`c.Orders``c`

```
var query1 = from c in customers
             join o in c.Orders on c.CustomerId equals o.OrderID // this won't work
             select new { c.Name, o.OrderID, o.OrderDate }; 
```

b）顺便说一句，为什么不允许这样的加入（我假设进行这样的加入在技术上是可行的）或者为什么它没有意义？

2)

> “C# 规范给出了所涉及的显式转换”

您能否详细说明*“涉及的显式转换”*的含义以及它与***e)***和***f)***问题的关系？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:16:38.340

查询 a 被编译为：

```
collection1
   .SelectMany(c1 => collection2, (c1, c2) => new { c1, c2 })
   .SelectMany(t0 => collection3, (t0, c2) => new { t0.c1, t0.c2, c3 })
; 
```

`collection2`为 中的每个元素枚举`collection1`；`collection3`为结果中的每个项目组合枚举。

如果`collection1`contains `{ 1, 2 }`、`collection2`contains`{ 11, 12 }`和`collection3`contains `{ 21, 22 }`，则结果将是：

```
|----|----|----|
| c1 | c2 | c3 |
|----|----|----|
|  1 | 11 | 21 |
|  1 | 11 | 22 |
|  1 | 12 | 21 |
|  1 | 12 | 22 |
|  2 | 11 | 21 |
|  2 | 11 | 22 |
|  2 | 12 | 21 |
|  2 | 12 | 22 |
|----|----|----| 
```

查询 c 被编译为：

```
collection1
   .SelectMany(c1 => collection2, (c1, c2) => new { c1, c2 })
   .Where(t0 => ...)
   .SelectMany(t0 => collection3, (t0, c3) => new { t0.c1, t0.c2, c3 })
; 
```

`collection3``collection1`枚举来自和`collection2`通过过滤器的项目的每个组合。

对于查询 d， each`c_3`将是与`groupB`中的元素匹配的项目列表`groupA`，因此，如果我正确理解了您的术语，它确实是“绑定到” `a`。

# php - PHP + MySQL 适合 VLDB

> ID：13053839
> 
> 赞同：0
> 
> 时间：2012-10-24T16:48:18.317
> 
> 标签：php, mysql, vldb

我正在开发两个网站 - 一个有几张桌子，另一个有超过 50 张桌子。我正在使用 PHP 和 MySQL。

这两个网站的一些表格预计每年将收到超过十万行。我在 StackOverflow 的一些帖子中读到，几十万行对 MySQL 来说不是问题。但在我的网站中，行数将在大约 10 年或更长时间内达到“巨大”。

此外，在预期的高峰时段，从这些表访问数据库的次数将非常高。

所以，我有两个问题。首先，MySQL 是否为 VLDB 或类似场景做好了准备？其次，即使使用索引等技术来加速数据库访问，MySQL 能否在极端负载下处理大量请求？如果没有，我应该改用哪个 DBMS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:53:05.587

Ummm MySQL 一直在许多网站上使用，从流量最少的网站到一些流量最多的网站。除非您访问 google/amazon 之类的流量并且需要逐字编写您自己的解决方案，否则 MySQL 将处理得很好。我会更多地关注数据库结构/正确的索引/负载平衡。该软件将运行良好。它的用户不可避免地把它搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:55:29.513

好消息是十年后的计算机将比今天的计算机快得多，因此仅此一项就可以为您带来很多扩展。

如果您可以正确地构建数据并相应地调整服务器，MySQL 就可以处理您的数据。数百万行很少成为问题，有些实例经过仔细规划甚至达到了数十亿的水平，例如 Tumblr 及其[Jetpants](https://github.com/tumblr/jetpants)工具集。

您并没有真正详细说明写入或读取活动的频率或强度。“非常高”可能意味着每分钟数百，也可能意味着每秒数百万。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:05:25.087

使用 mySQL 扩展性能的好坏主要取决于：

1.  您的数据库设计得如何。
2.  您的数据被索引的程度。
3.  你的查询写得有多好。

一旦这 3 个被最大化，您仍然可以对数据和集群服务器进行分区，但老实说，拥有 1000 万行的数据库可能是很多人所说的“中型”数据库。

# c++ - 在 C++ 中初始化集合迭代器

> ID：13053841
> 
> 赞同：0
> 
> 时间：2012-10-24T16:48:28.953
> 
> 标签：c++, aix, rogue-wave

我刚刚升级了一个名为 RogueWave 的第三方库，用于数据库功能。

但是，我遇到了一个非常愚蠢的编译错误，我不太确定它在抱怨什么：

```
 typedef std::set< EVBusCalOverride > OverrideSet;
 OverrideSet overrides;

 OverrideSet::iterator itor = this->overrides.begin( );
 while( itor != this->overrides.end( ) ) 
```

我在迭代器初始化行上收到错误消息

```
An object or reference of type "std::set<EVBusCalOverride,std::less<EVBusCalOverride>,std::allocator<EVBusCalOverride> >::iterator" 
cannot be initialized with an rvalue of type    "std::_Tree<std::_Tset_traits<EVBusCalOverride,std::less<EVBusCalOverride>,std::allocator<EVBusCalOverride>,0> >::const_iterator". 
```

而EVBusCalOverride 只是一个类

```
class EVBusCalOverride
{

   private:
   RWDate overrideDate;
   bool   businessDay;
}; 
```

RWDate 是属于 RogueWave 库的日期类型变量。

我不确定这如何影响迭代器初始化。谁能指出我可能导致这种情况的正确方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:52:09.827

roguewave 是一个非常古老的库。

大多数集合都有两种类型的迭代器，`iterator`允许您更改成员，`const_iterator`而不允许更改成员。

`std::set`在某种意义上是该规则的一个例外，您不能修改成员，因此所有迭代器都是 const。但是他们仍然支持`iterator`and `const_iterator`，通常其中一个是另一个的别名，但 roguewave 显然不支持。

`iterator`将您的代码更改为`const_iterator`可能会修复，但我建议您尽可能更改您的 STL 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:50:52.387

看起来覆盖是常量。此代码是 const 方法的一部分吗？在这种情况下，您需要像这样初始化迭代器：

```
OverrideSet::const_iterator itor = this->overrides.begin( ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:51:27.617

错误消息说：

> ... ::const_iterator

我想这是在`const`方法中调用的。

# c - DNA 转化为蛋白质 - c 结构问题

> ID：13053843
> 
> 赞同：1
> 
> 时间：2012-10-24T16:48:40.393
> 
> 标签：c, structure

我正在研究将 DNA 序列转换为蛋白质序列。
我已经完成了所有程序，只有一个错误是我发现的结构错误。
dna_codon 是一个结构，我正在对其进行迭代。在第一次迭代中，它显示了结构的正确值，但从下一次迭代开始，它不显示存储在结构中的正确值。

这是一个小错误，所以不要认为我没有做任何事情并投反对票。我被困在这里，因为我是 c 结构的新手。

代码 ：

```
#include <stdio.h>  
#include<string.h>

void main()
{

int i, len;
char short_codons[20];
char short_slc[1000];
char sequence[1000];

struct codons
{
    char amino_acid[20], slc[20], dna_codon[40];
};

struct codons c1 [20]= {
                        {"Isoleucine", "I", "ATT, ATC, ATA"},
                        {"Leucine", "L", "CTT, CTC, CTA, CTG, TTA, TTG"},
                        {"Valine", "V", "GTT, GTC, GTA, GTG"},
                        {"Phenylalanine", "F", "TTT, TTC"},
                        {"Methionine", "M", "ATG"},
                        {"Cysteine", "C", "TGT, TGC"},
                        {"Alanine", "A", "GCT, GCC, GCA, GCG"},
                        {"Proline", "P", "CCT, CCC, CCA,CCG "},
                        {"Threonine", "T", "ACT, ACC, ACA, ACG"},
                        {"Serine", "S", "TCT, TCC, TCA, TCG, AGT, AGC"},
                        {"Tyrosine", "Y", "TAT, TAC"},
                         {"Tryptophan", "W", "TGG"},
                        {"Glutamine", "Q", "CAA, CAG"},
                        {"Aspargine","N" "AAT, AAC"},
                        {"Histidine", "H", "CAT, CAC"},
                        {"Glutamic acid", "E", "GAA, GAG"},
                        {"Aspartic acid", "D", "GAT, GAC"},
                        {"Lysine", "K", "AAA, AAG"},
                        {"Arginine", "R", "CGT, CGC, CGA, CGG, AGA, AGG"},
                        {"Stop codons", "Stop", "AA, TAG, TGA"}
                        };

int count = 0;

printf("Enter the sequence: ");
gets(sequence);

char *input_string = sequence;
char *tmp_str = input_string;

int k;
char *pch;

while (*input_string != '\0')
{
    char string_3l[4] = {'\0'};
    strncpy(string_3l, input_string, 3);
    printf("\n-----------%s & %s----------", string_3l, tmp_str );
    for(k=0;k<20;k++)
    {
        //printf("@REAL -  %s", c1[0].dna_codon);
        printf("@ %s", c1[k].dna_codon);
        int x;
        x = c1[k].dna_codon;
        pch = strtok(x, ",");
        while (pch != NULL)
        {
            printf("\n%d : %s with %s", k, string_3l, pch);
            count=strcmp(string_3l, pch);
            if(count==0)
            {
                strcat(short_slc, c1[k].slc);
                printf("\n==>%s", short_slc);
            }
        pch = strtok (NULL, " ,.-");
        }
    }
input_string = input_string+3;
}

printf("\nProtien sequence is : %s\n", short_slc);
} 
```

输入 ：

```
TAGTAG 
```

输出：
如果你看到输出

```
printf("\n-----------%s & %s----------", string_3l, tmp_str ); 
```

在两次迭代中，我们发现结构中定义的值减少了。

我想知道为什么结构会减少它或我的错误？因为我被困在这里

输出要求：

```
StopStop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:09:12.213

虽然我不知道你想要什么样的输出。但是如果直接运行你的代码，我会遇到段错误。

1.  永远不要使用`gets()`。这个非常重要。请改用 fgets()。你可以写`fgets(sequence, 1000, stdin)`。
2.  `strtok`修改时与 x 无关`dna_codon`。`strtok`没有什么可以从外面停止。
3.  如果你想拆分`dna_codon`而不想修改它，你应该复制一个字符串。使用`strcpy(char*,char*)`. 这将制作一个真实的副本（两个字符串）。如果您只是将字符串分配给另一个变量。它们只是指向同一个字符串的两个指针。

    字符 x[40]; strcpy(x,c1[k].dna_codon); // 而不是 x = dna_codon

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:57:43.430

`strtok()`必须仅用于字符串的重复副本，因为它会在必要时用 '\0' 覆盖“分隔符”以生成标记。

下面的代码将切断字符串：

```
x = c1[k].dna_codon;
pch = strtok(x, ","); 
```

例如：

`String = "CTT, CTC, CTA, CTG, TTA, TTG"`

在第一次`strtok()`调用 '\0' 后覆盖 ','

`String = "CTT"\0" CTC, CTA, CTG, TTA, TTG"`剪断绳子。'\0' 添加以提高可读性。

由于`strtok()`保持指向字符串其余部分的指针，因此第一个循环是安全的。在第二个循环字符串将只有：

`String = "CTT"`

PS：为了性能，如果可行，您可以使用字符串数组而不是`dna_codon[40]`链表。每次比较的斩波/定位分隔符都是开销。

[IEEE 标准 1003.1-2008 strtok()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok.html)

# vba - 执行vb代码后记录被删除错误（删除记录）

> ID：13053845
> 
> 赞同：3
> 
> 时间：2012-10-24T16:48:46.150
> 
> 标签：vba, ms-access

我的一个数据库有问题，我已经有一段时间了，这有点令人烦恼。

我有一个连续视图的表单，用户必须在其中为每条记录填写一些信息，然后单击“提交”按钮（对于每条记录）。

根据为该记录输入的值，“提交”按钮将首先将信息插入两个表之一，然后从表单正在查询的临时表中删除该记录。

它的伪代码在这里：

```
IF x.checked && y > 70 then
  db.execute "Insert into tblCompleted values (me.empID,'completed',me.y);
else
  db.execute "insert into tblIncompleted values (me.empid, 'incomplete', 'me.y);
end if
db.execute "delete * from tblTemporary WHERE empid = me.empID"
 'form.requery
'form.refresh 
```

我有时会收到“记录已删除”运行时错误，有时同一记录会出现两次。但是，所有操作都有效。但是，完成后，记录显示##DELETED。为了解决这个问题，我在代码末尾放置了一个 Form.refresh 和 Form.requery 语句。这将消除##DELETED 记录，但经常抛出“记录已删除”错误。

在你说“你为什么要使用两张表，这不能只用一张表来建模”之前，这是我实际正在做的事情的简化版本，对我来说，使用两张表在设计方面更有意义。

我主要关心的是这个运行时错误。我可以抓住它而不处理它，但我更愿意实际修复它并整理出这个错误的表格。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:39:01.953

我认为原因是删除记录后，您的表单仍在尝试显示它。相关[帖子中的答案建议在使用](https://stackoverflow.com/questions/10538098/delete-record-and-move-previous-not-working?rq=1)[这样](http://www.granite.ab.ca/access/positioning_on_a_continuous_form.htm)的代码删除当前记录之前将书签移动到上一条记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T13:10:16.653

我知道自发布以来已经有几年了，但我遇到了同样的问题（Access 2010），并且在阅读了上面的评论之后，想出了下面的解决方案，即在删除之前移动到下一条记录。

```
 delBatchID = [ID]

        Me.Recordset.MoveNext

        'delete the batch headers
        qString = "Delete From T_Imported_Files Where ID = " & delBatchID & ";"
        CurrentDb.Execute qString

        'update the form to show that the batch is gone.
        Form.Requery 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:50:37.647

在删除表之前删除 RecordSource，然后重新添加它。

```
form.RecordSouce = ""
db.execute "delete * from tblTemporary WHERE empid = me.empID"
form.RecordSouce = "tblTemporary" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:37:15.720

尝试这样的事情：

```
Dim lEmpID as Long
lEmpID = Me!EmpID
DoCmd.SetWarnings False
DoCmd.RunCommand acCmdDeleteRecord
DoCmd.SetWarnings True
db.Execute "DELETE * FROM tblTemporary WHERE empid = " & lEmpID 
```

这里的基本思想是，您可能可以使用普通的 Delete 命令从一张表中删除一条记录。这可能足以让您的表单相信该记录不再存在。

根据您配置参照完整性的方式（使用 Delete Cascade？），您甚至可能不必在最后一个 db.Execute 执行该操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T15:17:07.690

我知道这是一个旧线程，但我只是遇到了这个问题，并通过将焦点移动到子窗体之外的控件来解决它。问题似乎是我仍在删除的记录中。

```
 Dim response As VbMsgBoxResult 
    Dim strSQL As String

    response = MsgBox("Are you sure you want to delete this record?", vbYesNo + vbQuestion, "Delete Record?")

    Select Case response
        Case vbYes
            strSQL = "DELETE FROM TABLENAME WHERE ID = " & Me.ID
            Forms("ParentForm").Form.Controls("TextBox1").SetFocus
            If ExecuteSQL(strSQL) = False Then MsgBox "There was an error deleting this record." & vbCrLf & vbCrLf & "If the problem persists, please contact your             System Administrator.", vbOKOnly + vbExclamation, "Error"
            Me.Requery
        Case vbNo

    End Select

Public Function ExecuteSQL(sSQL As String) As Boolean
On Error GoTo HandleError

    DoCmd.SetWarnings False
'    Debug.Print sSQL
    DoCmd.RunSQL sSQL

    ExecuteSQL = True

Exit_ExecuteSQL:
'    Debug.Print sSQL
    DoCmd.SetWarnings True
    Exit Function

HandleError:
    GeneralErrorHandler err.Number, err.Description, "modDatabaseCalls", "ExecuteSQL", True
    ExecuteSQL = False
    Resume Exit_ExecuteSQL

End Function 
```

# php - 为什么我在这里收到错误？

> ID：13053846
> 
> 赞同：-4
> 
> 时间：2012-10-24T16:48:49.457
> 
> 标签：php

只是想配合一些教程！无法弄清楚为什么我在表单操作行上出现错误

```
<?php
    if (isset($_POST['Username'])&&isset($_POST['password'])) {
        $username = $_POST['Username'];
        $password = $_POST['password'];
        if (!empty($Username)&&!empty($password)) {
        echo 'OK';  
        } else {
            echo 'You must supply an email and a password.';
        }
    ?>

    <form action="<?php echo $current_file; ?>" method="POST">
     Email: <input type="text" name="username"> Password: <input type="password" name="password">
     <input type ="submit" value = "Log In"  />

     </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:50:04.073

```
$username = $_POST['Username'];
        $password = $_POST['password'];
        if (!empty($Username)&&!empty($password)) { 
```

您有 2 个变量 $username 和 $Username - 应该相同吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:50:20.660

您需要关闭初始 if 条件块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:50:59.123

可能是因为**$current_file**没有定义吗？或者你之前在你的代码上定义过它？

# javascript - 我可以从 iframe 中更改 window.top.location 吗？

> ID：13053848
> 
> 赞同：0
> 
> 时间：2012-10-24T16:48:52.173
> 
> 标签：javascript, jquery, iframe

```
<html>
<title>iframe_test</title>
<head>
</head>
<body>
<iframe src="test_page_with_links.html" width="whatever" height="whatever" /></iframe>
</body>
</html> 
```

我试图找出一种方法让人们可以将 iframe 添加到他们自己的网站中添加额外的导航链接，但是如果我尝试从 iframe 中将 window.top.location 更改为假设 /profile，浏览器转到包含 iframe /profile 的网站，而不是 iframe 位于 /profile 的网站 - 希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:51:42.900

为您的 iframe 命名，并为链接指定与该名称匹配的目标。

```
<iframe src="whatever.html" name="my_frame">

<a href="http://www.somewhere.com" target="my_frame"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:21:06.407

将 target="_top" 添加到您的链接

```
<a href="profile.htm" target="_top"></a> 
```

# java - 从相同的 .xsd 转换 AxisDatatypes 的好方法

> ID：13053852
> 
> 赞同：0
> 
> 时间：2012-10-24T16:49:00.017
> 
> 标签：java, soap, wsdl, wsdl2java

我正在寻找一种将两个 Axis 数据类型（由 WSDL2Java 生成）相互转换的可能性。两种数据类型都包含完全相同的属性，因为它们都来自相同的 XSD。

问题是 Axis 将它们生成为分离的数据类型。

数据类型1：

```
public static class AbstractAsynchronousResponse extends AbstractResponse implements org.apache.axis2.databinding.ADBBean {

        /*
         * This type was generated from the piece of schema that had name =
         * AbstractAsynchronousResponse Namespace URI =
         * http://www.example.org/AllCallbackTypes Namespace Prefix = ns2
         */
.........} 
```

数据类型2：

```
public static class AbstractAsynchronousResponse extends AbstractResponse implements org.apache.axis2.databinding.ADBBean {

        /*
         * This type was generated from the piece of schema that had name =
         * AbstractAsynchronousResponse Namespace URI =
         * http://www.example.org/AllCallbackTypes Namespace Prefix = ns2
         */
.........} 
```

现在我想做这样的事情：

```
AbstractAsynchronousResponse1 response1 = new AbstractAsynchronousResponse1();
AbstractAsynchronousResponse2 response2 = (AbstractAsynchronousResponse2) response1; 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:47:56.167

这是我为解决此问题而创建的方法。然而，这并不是很好，但它确实有效。

```
/**
     * This will cast an {@link ADBBean} implementation to another
     * {@link ADBBean}, but the Implementation will be a subClass of
     * <b>parentLocationOfSourceClass</b>.<br>
     * This only is possible because of the structure of all ADBBean
     * implementations created by <code>Axis2 ADB-Databinding</code>. If you
     * cange the Databinding you probably have to adapt this Method.
     * 
     * @param inputADBBean
     *            An ADBBean Implementation created by
     *            <code>Axis2 ADB-Databinding</code>
     * @param parentLocationOfSourceClass
     *            This is meant to be the <code>ClientStub</code> Class created
     *            by <code>Axis2 ADB-Databinding</code>. The Implementation of
     *            the <code>inputADBBean</code> has to be available with the
     *            same name in the <code>ClientStub</code>
     * @return An {@link ADBBean} implementation defined as SubClass of the
     *         <code>ClientStub</code> Class created by
     *         <code>Axis2 ADB-Databinding</code>
     * @throws Exception
     */
    public static ADBBean castADBBean(ADBBean inputADBBean, String parentLocationOfSourceClass) throws Exception {
        Class clazz = CallbackResponsePoolClient.getClassForParentLocation(inputADBBean, parentLocationOfSourceClass);
        ADBBean outputADBBean = CallbackResponsePoolClient.getInstanceForADBBean(clazz);
        for (Method method : outputADBBean.getClass().getMethods()) {
            String methodName = method.getName();
            if (methodName.startsWith("set")) {
                CallbackResponsePoolClient.logger.debug("Found a setter: " + methodName);
                String getterName = methodName.replaceFirst("set", "get");
                Object arg = inputADBBean.getClass().getMethod(getterName).invoke(inputADBBean);
                // We need to check if arg lives in the namespace:
                // org.example.www.callbackresponsepoolinterface
                // This will happen if we have nested Objects. E.g.
                // EndpointType inside of EndpointResponse
                // TODO: instanceof ADBBean could lead to problems, maybe
                // sometimes we don't want to cast an ADBBean, but I can't think
                // a scenario right now
                if (arg instanceof ADBBean) {
                    arg = CallbackResponsePoolClient.castADBBean((ADBBean) arg, parentLocationOfSourceClass);
                }
                // We also need to handle Arrays of ADBBeans. See above
                if (arg instanceof ADBBean[]) {
                    Class innputClass = ((ADBBean[]) arg).getClass().getComponentType();
                    // Better Create a new Object, because arg[0], can get you
                    // an Exception for an empty Array
                    ADBBean inputArrObj = CallbackResponsePoolClient.getInstanceForADBBean(innputClass);
                    Class outputArrClass = CallbackResponsePoolClient.getClassForParentLocation(inputArrObj, parentLocationOfSourceClass);
                    Object outputArray = Array.newInstance(outputArrClass, ((ADBBean[]) arg).length);
                    for (int i = 0; i < Array.getLength(arg); i++) {
                        Array.set(outputArray, i, CallbackResponsePoolClient.castADBBean((ADBBean) Array.get(arg, i), parentLocationOfSourceClass));
                    }
                    arg = outputArray;
                }

                method.invoke(outputADBBean, arg);
            }
        }

        return outputADBBean;
    }

    private static Class getClassForParentLocation(ADBBean inputADBBean, String parentLocationOfSourceClass) throws ClassNotFoundException {
        return Class.forName(parentLocationOfSourceClass + "$" + inputADBBean.getClass().getSimpleName());
    }

    private static ADBBean getInstanceForADBBean(Class clazz) throws NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        Constructor constructor = clazz.getConstructor();
        return (ADBBean) constructor.newInstance();
    } 
```

# visual-studio-2010 - visual studio 2010/2012 设置为 undef _WIN32 并定义 __GNUC__

> ID：13053854
> 
> 赞同：2
> 
> 时间：2012-10-24T16:49:07.347
> 
> 标签：visual-studio-2010, visual-studio-2012

这将是一个非常奇怪的问题，但是是否可以在 Visual Studio 2010/2012 设置中取消`_WIN32`定义和定义`__GNUC__`而不接触任何源代码？

我`_WIN32`在“C/C++ -> Preprocessor -> Undefine Preprocessor Definitions”（即`/U"_WIN32"`）中添加了，但看起来它不受 Visual Studio IDE 的尊重。

这样做的原因是在 Visual Studio IDE 和 intellisense 的帮助下编写 linux/mac 部分代码。当然，这不会编译，但就智能感知正确解析和帮助而言`__GNUC__`，我没问题。我只需要自动完成和其他功能。

也许有人想争论我为什么要使用 Visual Studio for linux？好吧，所有的 vcxproj/sln 都已经为 windows 配置好了，我想利用它。所以.. 让我们不要讨论其他选项，例如源洞察、emacs 标签等...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T20:25:15.347

我也遇到了这个问题，并且能够通过在全局包含的标题中执行以下操作来解决这个问题。一个对我来说已经在发挥作用，所以我不必处理在任何地方都包含标题。

```
#ifdef _WIN32
#undef _WIN32
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:43:48.360

使用 microsoft 编译器时始终定义预处理器宏**_WIN32**并且不能重新定义/未定义（来源： http: [//msdn.microsoft.com/en-us/library/b0084kay](http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.80).aspx) (v=vs.80).aspx ）

# android - 发送 _utm.gif 文件的 HTTP 请求后，Google 分析服务器没有响应

> ID：13053855
> 
> 赞同：1
> 
> 时间：2012-10-24T16:49:14.040
> 
> 标签：android, google-analytics, google-analytics-api

[我在https://www.google.com/analytics/](https://www.google.com/analytics/)注册了帐户，加载了 lib，从 zip 部署了示例项目，并将 id 更新为格式`UA-11111-1`和设置调试模式的跟踪器。

在 logcat 中我找不到响应`200 OK`。任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:36:02.560

您的身份似乎无法识别。如果您使用 xml 资源来存储您的 id，请使用“-”而不是“-”，例如 UA-11111--1

# android - Phonegap - 将字符串 URL Environment.getExternalStorageDirectory() 传递给 HTML 以访问本地 xml 文件

> ID：13053856
> 
> 赞同：0
> 
> 时间：2012-10-24T16:49:15.587
> 
> 标签：android, cordova

我正在使用 phonegap 构建一个小的 android 应用程序。我需要从本地存储的文件中获取数据。我创建了一个文件夹并在其中包含 xml 文件，并且可以加载它并在应用程序启动时查看它：

```
String url = "file:///" + Environment.getExternalStorageDirectory().toString() + File.separator + "DV/emp.xml";
super.loadUrl(url, 500); 
```

我想`HTML`在`assets/www`.

如何将此字符串`URL`变量传递给我的 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:12:15.677

找到了答案，但如果您愿意，希望其他人做出回应。

[Android Java和Phonegap Javascript之间的通信？](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)

# linux - 为 Bash 中的每个主机名添加前缀

> ID：13053857
> 
> 赞同：1
> 
> 时间：2012-10-24T16:49:21.987
> 
> 标签：linux, bash, shell

如果我有一个像这样的字符串：`a.com b.com c.com`

如何添加到它的前面以使其像`*.a.com *.b.com *.c.com`使用 Bash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:59:43.447

假设这些在不同的行上，您可以使用单行执行此操作：

```
awk '{print "*." $0}' < infile > outfile 
```

如果这些都在一行上，请使用：

```
cat infile | sed 's/ /\n/g' | awk '{print "*." $0}' > outfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:01:16.143

您可以使用`sed`：

```
echo "a.com" | sed 's/^/*./' 
```

输出：

```
*.a.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:05:05.760

假设我们有一个名为`testfile`以下内​​容的文件：

```
a.com b.com c.com 
```

您可以使用：

```
sed -i 's/^/\*./g;s/ / *./g' testfile 
```

如果你想直接在 shell 中使用它：

```
echo "a.com b.com c.com" | sed 's/^/\*./g;s/ / *./g' 
```

# sql-server-2012-express - 我在哪里可以访问 SQL Server 2012 Express 中主表下的表？

> ID：13053860
> 
> 赞同：2
> 
> 时间：2012-10-24T16:49:35.963
> 
> 标签：sql-server-2012-express

我做了一个

```
select * from mytablename 
```

它显然在那里。但是在 GUI 下微软取出了表格链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:59:48.283

该`master`数据库可以`System Databases`在对象资源管理器中看到：

![在此处输入图像描述](../Images/9663125097b87d9fec4dc4397e693aa7.png)

但是你为什么要把你的表放到`master`数据库中！？？？？！？这不是你应该做的事情......

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-19T13:47:29.643

是的，我猜微软已经在 SQL Express 2012 或类似的东西中删除了它，因为我也看不到主数据库下的“表”链接。

# android - 子类 EditText 以添加标签

> ID：13053861
> 
> 赞同：3
> 
> 时间：2012-10-24T16:49:37.510
> 
> 标签：android, android-edittext

我编写了一个简单的子类来为 edittext 字段添加标签。除了提示之外，我还想要一个标签。该字段应该是可编辑的，在字段的右侧有一个提示，在框的左侧有一个标签。

```
 @Override
  public void onDraw(final Canvas canvas) {
    super.onDraw(canvas);
    if (labelX == -1 || labelY == -1) {
      makeTextMeasurements();
    }
    canvas.save();
    canvas.drawText(mLabel, labelX, labelY, mPaint);
    canvas.restore();
  }

  private void makeTextMeasurements() {
    mMeasuredTextHeight = getTextHeight(mPaint);
    labelX = (int) ViewUtils.getScaledPixels(20, getContext());
    labelY = (int) ((getHeight() / 2.0f) + (mMeasuredTextHeight / 2.0f));
  } 
```

如果我不调用 setInputType，该类可以正常工作。但是如果我调用 setInputType，canvas.drawText() 将要绘制的文本不会出现。我查看了 EditText 源代码，但找不到发生这种情况的原因。有人有想法吗？

# html - Simple_form 如何使接受条款复选框内联

> ID：13053863
> 
> 赞同：10
> 
> 时间：2012-10-24T16:49:48.117
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap, simple-form

```
<p><%= f.input :terms, :as => :boolean, :label => false, :boolean_style => :inline %> 
Accept <%= link_to "Terms of use", terms_path,:remote => true %> 
and <%=link_to "privacy Policy", privacy_path, :remote => true%></p> 
```

它最终看起来像这样

![在此处输入图像描述](../Images/3a962dcd62842b65691946049e0c3ce9.png)

将它们排列在同一条线上的最佳方法是什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-24T17:11:20.817

这是一个相当简单的方法：

```
<%= content_for(:the_links) do %>
    Accept <%= link_to "Terms of use", terms_path,:remote => true %> 
    and <%=link_to "privacy Policy", privacy_path, :remote => true%>
<% end %>

<%= simple_form_for @user do |f| %>
  <%= f.input :email %>
  <%= f.input :password %>
  <%= f.input :terms, :as => :boolean, :label => content_for(:the_links)%> 
<% end%> 
```

![非样式输出](../Images/126f9353584ed7302c7dcd130cc7e1e6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:55:33.550

确保复选框和文本足够小以适合容器内的一行，然后设置`display: inline;`或`float:left;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:56:10.063

尝试`wrapper_html`像这样使用：

```
<p>
  <%= f.input :terms, 
            :as => :boolean, 
            :label => false, 
            :boolean_style => :inline,     
            :wrapper_html => { :style => 'display: inline' } 
  %> 
  Accept <%= link_to "Terms of use", terms_path,:remote => true %> 
  and <%=link_to "privacy Policy", privacy_path, :remote => true%>
</p> 
```

# ant - 从 POJO 生成 XSD 的 Ant 任务

> ID：13053864
> 
> 赞同：1
> 
> 时间：2012-10-24T16:49:53.977
> 
> 标签：ant, xsd, pojo

是否有从 POJO 生成 XSD 的 ant 任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:24:45.710

我假设您想要序列化一个 Java POJO 对象，然后使用 XSD 来验证序列化的 XML 数据，或者创建可以通过您的反序列化过程实例化的新对象实例。

事情是 Java XML 序列化有两个好处（示例如下）：

*   [Xstream](http://xstream.codehaus.org/) XML 是从固定的对象类描述动态生成的
*   [从固定 XML Schema 动态生成的XMLBeans](http://xmlbeans.apache.org/) Java 类

现在，也许您正在使用结合了这两种方法的其他方法？

我建议根据您的对象在序列化时创建的 XML 创建（或生成）一个 XSD。相对而言，Java 对象不会经常更改，当它们发生时，一个巨大的挑战是支持多个版本（读取为您的对象的旧版本编码的数据）。为了应对这一挑战，我建议您阅读以下文章以获得一种可能的解决方案：

*   [http://java.dzone.com/articles/migrate-serialized-java](http://java.dzone.com/articles/migrate-serialized-java)

# c# - 为什么 ReSharper 告诉我“User.Identity == null”总是错误的？

> ID：13053865
> 
> 赞同：16
> 
> 时间：2012-10-24T16:49:54.480
> 
> 标签：c#, asp.net-mvc, resharper

我的一个 ASP.NET MVC[控制器](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller%28v=vs.108%29.aspx)类中有一个简单的属性。

![在此处输入图像描述](../Images/fdf21a1a63f0d826a9d1ac6cd8394428.png)

我以前见过很多次，所以要理解这个消息的含义，但通常它是完全有意义的。然而，事实并非如此。要到达带下划线的语句，`User`必须**不**为空，所以检查`User.Identity`是好的。

该`Identity`属性是[`IPrincipal`接口](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.identity.aspx)的一部分，并返回一个继承的对象[`IIdentity`](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx)。

要继承此接口或任何与此相关的接口，此属性必须是引用类型，因此可能为 null，对吗？

那么为什么我心爱的 ReSharper 会呻吟呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T16:56:38.630

你说你正在使用`GenericPrinciple`as 的实现`IPrincipal`。对于这个类，`Identity`属性确实不可能是`null`。[如果您查看源代码（例如使用JetBrains dotPeek](http://www.jetbrains.com/decompiler/)），很容易看到。

为此，您可以感谢 ReSharper 的 .NET 框架类库的代码注释。

在我的 ReSharper 6.1 注释中，有一个与此相关的单个代码注释（在文件*ExternalAnnotations\mscorlib\mscorlib.4.0.0.0.Nullness.Generated.xml 中*）：

```
 <member name="M:System.Security.Principal.GenericPrincipal.#ctor(System.Security.Principal.IIdentity,System.String[])">
    <parameter name="identity">
      <attribute ctor="M:JetBrains.Annotations.NotNullAttribute.#ctor" />
    </parameter>
  </member> 
```

不过，这仅适用于构造函数，我还没有找到该`Identity`属性的构造函数。因此，要么您使用的 ReSharper 版本也具有该属性的注释，要么 ReSharper 正在做一些额外的分析。

**无论如何，ReSharper 很聪明（而且是对的！）。**

# matlab - Matlab 矩阵语法

> ID：13053873
> 
> 赞同：0
> 
> 时间：2012-10-24T16:50:18.600
> 
> 标签：matlab, syntax, matrix

我有一个 Matlab 代码片段，我尝试用 C++ 编写，但我真的不明白那里发生了什么：

```
for c = 1:3
    Id = double(I(:,:,c))/255;
    Wc(:,:,c) = sum(Id(pixels).*weights, 3);
end 
```

有一个尺寸为 480x640x3 的图像 I。在第一次迭代中，图像的第一个通道保存在 Id 中，其大小为 480x640。但是下一行发生了什么？我只是不明白这种语法。

像素和权重的大小为 300x383x4x1。

那么这条线到底做了什么？：

```
sum(Id(pixels).*weights, 3); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:01:27.737

`sum(X, n)`总结矩阵的所有元素`X`在第*n*维，所以这是：

```
sum(Id(pixels) .* weights, 3); 
```

确实做了以下事情：

*   从矩阵 中提取一个子矩阵`Id`，`pixels`作为提取值的索引：
    矩阵`Id`被隐式转换为列向量，并且生成的子矩阵的大小与`pixels`(每个值等于`Id(p)`，其中`p`是`pixels`）。
*   将提取的矩阵与另一个矩阵`weights`逐个元素相乘（请注意，乘法运算符为`.*`）
*   沿第三维汇总生成的 3-D 矩阵的所有元素。

您可以查看[官方文档](http://www.mathworks.com/help/matlab/ref/sum.html)以获取更多信息。

### 编辑：一个简单的例子

让我们假设：

```
Id = [10 20; 30 40; 50 60; 70 80];
pixels(:, :, 1) = [4 4; 4 4];
pixels(:, :, 2) = [6 6; 6 6];
pixels(:, :, 3) = [8 8; 8 8]; 
```

即`Id`是一个**2-D**矩阵，并且`pixels`是**3-D**。现在，`Id(pixels)`将产生：

```
ans(:, :, 1) =

  70  70
  70  70

ans(:, :, 2) =

  40  40
  40  40

ans(:, :, 3) =

  80  80
  80  80 
```

因为如果转换`Id`为列向量（try `Id(:)`），`70`是第 4^个元素，`40`第 6^个，`80`第 8^个。`pixels`请注意，结果与（不是`Id`！）具有相同的尺寸。

希望有帮助！

# c++ - 通过linux命令行执行时可执行文件运行正常-通过c ++ system（）命令调用时出现运行时错误

> ID：13053876
> 
> 赞同：2
> 
> 时间：2012-10-24T16:50:21.123
> 
> 标签：c++, linux, shell

我在 linux 中有一个分水岭模型可执行文件，执行时会从许多输入文本文件中读取。当我通过 shell 找到该可执行文件并执行它（没有 root）时，一切正常。但是，我正在编写一个需要调用可执行文件的 c++ 程序，因此我认为我只需使用 system()。当我这样做时，模型会执行，但随后会返回与主要输入文本文件之一相关的“文件结尾”运行时错误。我不知道为什么当我通过 shell 手动执行时程序会执行良好，但通过 system() 命令执行时会返回错误。

我猜没有人会马上知道问题出在哪里，但我不知道从哪里开始调查。我会很感激任何建议。

谢谢！

我的系统命令是：

```
system("/home/name/SWAT/olentangy/Scenarios/Default/TxtInOut/swat"); 
```

我收到的错误是：

```
forrtl: severe (24): end-of-file during read, unit 23, file /home/name/EO_G/EIGHT/EIGHT/file.cio
Image              PC        Routine            Line        Source             
swat               0821D03F  Unknown               Unknown  Unknown
swat               0821BD35  Unknown               Unknown  Unknown
swat               081D78D1  Unknown               Unknown  Unknown
swat               081ABD66  Unknown               Unknown  Unknown
swat               081AB621  Unknown               Unknown  Unknown
swat               081BC9DF  Unknown               Unknown  Unknown 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:04:25.803

即使`swat`它的行为可以说是错误的，你仍然可以在你的父程序中解决它：

替换这个：

```
system("/home/name/SWAT/olentangy/Scenarios/Default/TxtInOut/swat"); 
```

有了这个：

```
system("cd /home/name/SWAT/olentangy/Scenarios/Default/TxtInOut && ./swat"); 
```

# php - 自定义 PHPFox V2 登陆页面

> ID：13053880
> 
> 赞同：0
> 
> 时间：2012-10-24T16:50:37.257
> 
> 标签：php, frameworks, social-networking, phpfox

我有一个使用[PHPFox](http://phpfox.com)构建的社交网络，事实证明更改默认登录页面是一个相当大的挑战。有谁知道我如何更改默认的 core.index-visitor 登录页面而无需调整所有菜单和所有内容？为我的自定义登录页面上传所有文件然后重定向 apache 配置文件以指向新的登录会更容易吗？或者我可以从 .htaccess 文件中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:21:44.467

您可以修改`welcome.html.php`文件以更改登录页面

在用户模块中

```
user/template/default/block/welcome.html.php 
```

愿对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:51:14.440

您可以通过编辑 admincp 中的欢迎块来做到这一点。

# ruby-on-rails - Rails：Gemspec 无效。请修复此 gemspec

> ID：13053882
> 
> 赞同：16
> 
> 时间：2012-10-24T16:50:40.203
> 
> 标签：ruby-on-rails, rubygems, gemspecs

当我从 github 安装 gem 时，它给了我错误：

```
number_internationalizer at /usr/local/rvm/gems/ruby-1.9.3-p194@number_internationalizer/bundler/gems/number_internationalizer-c0d642b04e87 did not have a valid gemspec.
This prevents bundler from installing bins or native extensions, but that may not affect its functionality.
The validation message from Rubygems was:
  "FIXME" or "TODO" is not a description 
```

gemspec是：

```
# -*- encoding: utf-8 -*-
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require 'number_internationalizer/version'

Gem::Specification.new do |gem|
  gem.name          = "number_internationalizer"
  gem.version       = NumberInternationalizer::VERSION
  gem.authors       = ["Myself"]
  gem.email         = ["myemail@email.com"]
  gem.description   = %q{Internationalize numbers adding normalization, validation and modifying the number field to restor the value to its original if validation fails}
  gem.summary       = gem.description
  gem.homepage      = ""

  gem.files         = `git ls-files`.split($/)
  gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
  gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
  gem.require_paths = ["lib"]
end 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:59:27.463

该错误似乎与您显示的 gemspec 不同步，该错误表示`gem.descripton`无效。根据错误，您正在使用来自 git 的 Gem，它有一个[修复无效 gem.description 的提交](https://github.com/bishma-stornelli/number_internationalizer/commit/65c5669a2f0e8386087c305bb1eec91cb174b6e5)。

让 Bundler 更新到最新的`number_internationalizer`提交：

```
bundle update 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-08T18:06:57.303

这个答案并不适用于所有情况，但如果你的`blob.gemspec`文件中有这样的东西：

```
 spec.summary       = "TODO: Write a short summary, because Rubygems requires one."
  spec.homepage      = "TODO: Put your gem's website or public repo URL here." 
```

您应该从中删除“TODO”字样，并为 提供有效的 HTTP URI `spec.homepage`，您可以像这样替换它：

```
 spec.summary       = "Write a short summary, because Rubygems requires one."
  spec.homepage      = "http://website.com" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-29T09:55:15.203

我强烈认为在解释器解析您的 gemspec 时会检查`TODO`或检查。`FIXME`如果它看到这两个单词中的任何一个，此检查已被编程为抛出错误。我遇到了同样的问题，我通过删除我的 gemspec 中对 TODO 的任何引用来解决它。我在主页会话中放置了一个有效的 uri，一切又开始正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T21:09:57.593

只是为了补充[Ashkan Nasirzadeh 的回答](https://stackoverflow.com/a/59238377/10907864)。

在 Rails 6.0.2.2 应用程序中使用 Rails 引擎时，我也遇到了类似的情况。

**诀窍是**：

1.  `TODO`删除文件中的每一个出现`your_engine.gemspec`。
2.  用双引号将您选择的网站添加到`spec.homepage`.
3.  确保在删除每次出现的值周围保留双引号`TODO`以避免`undefined method of for main:Object`错误。

下面是一个`your_engine.gemspec`经过适当修改的示例文件。

```
$:.push File.expand_path("lib", __dir__)

# Maintain your gem's version:
require "app_component/version"

# Describe your gem and declare its dependencies:
Gem::Specification.new do |spec|
  spec.name        = "app_component"
  spec.version     = AppComponent::VERSION
  spec.authors     = ["Promise Preston"]
  spec.email       = ["promise@gmail.com"]
  spec.homepage    = "http://website.com"
  spec.summary     = "Summary of AppComponent"
  spec.description = "Description of AppComponent"
  spec.license     = "MIT"

  # Prevent pushing this gem to RubyGems.org. To allow pushes either set the 'allowed_push_host'
  # to allow pushing to a single host or delete this section to allow pushing to any host.
  if spec.respond_to?(:metadata)
    spec.metadata["allowed_push_host"] = "Set to 'http://mygemserver.com'"
  else
    raise "RubyGems 2.0 or newer is required to protect against " \
      "public gem pushes."
  end

  spec.files = Dir["{app,config,db,lib}/**/*", "MIT-LICENSE", "Rakefile", "README.md"]

  spec.add_dependency "rails", "~> 6.0.2", ">= 6.0.2.2"

  spec.add_development_dependency "sqlite3"
end 
```

就这样。

**我希望这会有所帮助**。

# asp.net-mvc - 属性值的 MVC 实体框架部分类访问数据库

> ID：13053883
> 
> 赞同：0
> 
> 时间：2012-10-24T16:50:40.610
> 
> 标签：asp.net-mvc, entity-framework

我正在使用映射到我的数据库的实体框架。我有一个 Basket 模型，它可以有许多 BasketItem 模型，并且我有 Promotions 和 Coupons 模型。这是针对电子商务结帐功能的，我只是不明白它是如何工作的，这里是：

因为我的 BasketItems 与 Basket 有外键关系，如果我想在部分类中汇总我的篮子项目的小计，我可以这样做：

```
 public decimal Subtotal {
        get {
            return this.BasketItems.Sum(pb => pb.Subtotal);
            }
        } 
```

这很有帮助，因为我可以在视图中使用它，传递数据库上下文没有任何麻烦，而且它是 DRY 等。

现在我想将促销或优惠券应用于我的小计，理想情况下我希望它看起来像这样：

```
 public decimal DiscountedSubtotal {
        get { 
            decimal promotions_discount = 0;
            decimal coupons_discount = 0;
            return Subtotal - promotions_discount - coupons_discount;
            }
        } 
```

但是，如果不在我的数据库中创建一些疯狂和不必要的关系，或者进行一些轻微的黑客攻击以使此功能正常工作，就无法访​​问促销或优惠券。我不知道我应该怎么做才能克服这个问题。

**解决方案1：**

```
 public decimal DiscountedSubtotal(DatabaseEntities db) {
        decimal promotions_discount = from p in db.Promotions
                                  select p.Amount;
        decimal coupons_discount = from c in db.Coupons
                               select c.Amount;
        return Subtotal - promotions_discount - coupons_discount;
        } 
```

我不想在我的视图页面中使用它，而且每次我想使用它时都必须通过我的上下文发送。

**解决方案2：（未经测试）**

```
 public List<Promotion> Promotions { get; set; }
    public List<Coupon> Coupons { get; set; }

    public Basket()
        : base() {
            DatabaseEntities db = new DatabaseEntities();
            Promotions = db.Promotions.ToList();
            Coupons = db.Coupons.ToList();
    } 
```

一些轻微的黑客攻击可以为我提供促销和优惠券的参考，但我之前在创建新上下文时遇到了问题，我不知道是否有更好的方法可以让我获得理想的 DiscountedSubtotal 属性。

所以总结一下我的问题，我想知道获得 DiscountedSubtotal 属性的最佳方法。

非常感谢和道歉这么长的阅读:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:51:57.017

我认为这里的问题是您并没有真正使用连贯的架构。

在大多数情况下，您应该有一个业务层来处理这种逻辑。然后，该业务层将具有类似的功能，`CalculateDiscountForProduct()`或者`CalculateNetPrice()`将进入数据库并检索完成业务规则所需的数据。

业务类将与返回数据对象的数据层对话。您的视图只需要它的视图模型，您可以从业务层返回的业务对象中填充它。

一个典型的方法可能是：

```
public ActionResult Cart() {
    var model = _cartService.GetCurrentCart(userid);
    return View(model);
} 
```

因此，当您应用折扣或优惠券时，您会调用一个方法，`_cartService.ApplyDiscount(model.DiscountCode);`然后将新模型返回到视图。

您最好学习 Mvc Music Store 示例项目，因为它包含购物车功能和促销代码。

[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1)

# wordpress - 将“类别名称”添加到博客文章的“上一个/下一个”链接？

> ID：13053884
> 
> 赞同：0
> 
> 时间：2012-10-24T16:50:43.027
> 
> 标签：wordpress

寻找一点 Wordpress 帮助，我在查看帖子时创建了“上一个/下一个”链接，它将带您到下一个帖子和上一个帖子。我想附上与该特定帖子相关的类别。

例如：

下一个棒球卡经销商或上一个被盗棒球

因此，棒球汽车经销商和被盗棒球是我想要显示的类别。

这是我用来生成 Next/Prev 链接的代码：

```
<a href="<?php echo get_permalink( $prev_post->ID ); ?>">« Prev</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:12:24.910

这是您在我的手机上获取类别名称（抱歉格式化）所需的功能：

$category = get_the_category($prev_post->ID); 回声 $category[0]->cat_name;

# c# - 拆分字符串并以不同的顺序将其重新连接在一起？

> ID：13053892
> 
> 赞同：0
> 
> 时间：2012-10-24T16:51:12.623
> 
> 标签：c#

拆分字符串并以不同的顺序将其重新组合在一起的最简洁但可读的方法是什么。例如，我想拆分以下字符串：

`10-20-30-4000-50000`我会通过以下方式做到这一点：

```
string[] tokens = original.Split('-'); 
```

现在我想按这个顺序把它放回去：

`30-20-10-4000-50000`

我知道我可以用`Join`它来把它重新组合成原来的样子，但我不想要那样。我现在唯一能想到的是：

```
string modified = string.Format("{0}{1}{2}{3}{4}",tokens[2],tokens[1],tokens[0],tokens[3], tokens[4]); 
```

我意识到，如果我这样做：

```
string modified = string.Format("{2}{1}{0}{3}{4}", tokens); 
```

它不会保留我想要的破折号，所以我应该这样做：

```
string modified = string.Format("{2}-{1}-{0}-{3}-{4}", tokens); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:53:37.410

```
string modified = string.Format("{2}-{1}-{0}-{3}-{4}", tokens); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:54:42.493

采用`String.Concat()`

```
string modified = String.Concat(tokens[2], "-", tokens[1], "-", 
                                tokens[0], "-", tokens[3], "-", tokens[4]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T16:55:35.490

如果你想使用`join`，你可以重新排序的元素`tokens`：

```
// swap tokens #0 and #2:
string tmp = tokens[2];
tokens[2] = tokens[0];
tokens[0] = tmp;

string modified = String.join("-", tokens); 
```

# jquery - 使用jquery提取A标签的数量

> ID：13053899
> 
> 赞同：0
> 
> 时间：2012-10-24T16:51:32.763
> 
> 标签：jquery

我正在开发一个企业应用程序，根据数据，我可以在表中显示多个链接或没有链接。

链接出现在表格中，并且后面有以下代码：

```
<td  class="Row">
  <span  id='s_3_2_14_0' >
    <a href='JavaScript:SWETargetGotoURL("/eservice_enu/start.swe?SWECmd=GotoView&SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet&SWEPostnRowId=1-KPBLOZ","_self")'>2001103009</a>
  </span>
</td> 
```

我需要找到`<a>`标签内页面中存在的所有标签，其中包含`<span>`以下文本：

```
SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet 
```

我尝试了以下表达式，但它返回 0：

```
$('a[href*="SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet"').length; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:54:07.780

你错过了一个]

```
$('a[href*="SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet"]').length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:55:37.953

选择器中缺少**结尾 ]**

```
$('a[href*="SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet"]').length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:47:41.663

试试这个，

```
 $().ready(function() {
       $('span a[href*="SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet"]').length;
       /* In order to check the count you can use an alert */       
       alert($('span a[href*="SWEView=Active+PO+Serial+View&SWEPostnApplet=Purchase+Order+List+Applet"]').length);
    }); 
```

# email - 经典 ASP IIS 7.5 详细错误 - 405.0 - 方法不允许

> ID：13053901
> 
> 赞同：1
> 
> 时间：2012-10-24T16:51:44.570
> 
> 标签：email, iis, asp-classic, iis-7.5

我正在 Windows 7 IIS 7.5 上创建联系我们表单。

我有经典的 ASP 页面，当我尝试使用 ASP 页面发布我的表单以发送电子邮件时。它给了我以下错误：IIS 7.5 详细错误 - 405.0 - 不允许方法

我需要在 IIS 中进行任何设置来处理经典 ASP 吗？？？因为它在 windows xp 上运行良好。

如果我用 GET 代替 POST.. 它会给出 IIS 7.5 详细错误 - 404.3 - 未找到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:43:06.257

我想你的 XP 上安装了 IIS6。

你应该检查这个：[http ://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8)

# php - Wordpress 缺少换行符

> ID：13053903
> 
> 赞同：0
> 
> 时间：2012-10-24T16:51:47.537
> 
> 标签：php, wordpress, content-management-system

我在这里遇到了一个有线问题......我的一个客户告诉我她的帖子中没有`<p></p>`或`<br/>`标签，我已经检查过我自己...... wtf是错的？

关于它应该如何的示例（视觉）

![视觉的](../Images/432f8e2fc4a20b2a7eda5ceb0624a8e1.png)

这就是 HTML 的样子，没有换行符？:S

![在此处输入图像描述](../Images/15dcd1e150393f03d461b08b005c5a2e.png)

这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:04:29.780

检查您的主题的functions.php文件，您可能错过了wordpress wautop函数，如下所示：http: [//codex.wordpress.org/How_WordPress_Processes_Post_Content#wpautop.28.29_WordPress_Function](http://codex.wordpress.org/How_WordPress_Processes_Post_Content#wpautop.28.29_WordPress_Function)

您也可以禁用此功能并使用您自己的内容过滤方法...此博客应该对此有所帮助：http: [//blog.bigsmoke.us/2010/12/09/wpautop](http://blog.bigsmoke.us/2010/12/09/wpautop)

# javascript - 使 iframe 展开/折叠

> ID：13053906
> 
> 赞同：0
> 
> 时间：2012-10-24T16:51:57.160
> 
> 标签：javascript, html, iframe

我在整合应用程序的页面中的 iframe 中有几个应用程序（它充当应用程序容器）。

我想在某处添加一个按钮，该按钮可以将 iframe 展开和折叠到页面的完整大小。

该应用程序现在具有菜单、页眉、页脚等以及 iframe 中的应用程序。当用户单击“+”按钮时，我想将 iframe 扩展到整个页面并使其他所有内容不可见。当他们再次点击它时，我想恢复原来的大小。

也许已经写了一些东西可以实现这一点，我尝试在 iframe 上做一些 js，似乎很难编写独立于浏览器的代码。

我不能使用 HTML5，因为我们需要支持 IE7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:07:45.377

[一个例子。](http://jsfiddle.net/eruSV/3/)

基本上，只要给你扩展的`iframe`这些 CSS 属性，

```
position: absolute;
top: 0; left: 0;
width: 100%; height: 100%;
z-index: 10; 
```

它将填充其（相对）父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:04:20.153

> **来源：** [“全屏”<iframe>](https://stackoverflow.com/q/3982422/1292652)

您可以使用传统的 JS 或 jQuery 来实现这一点。jQuery 是一个 JS 库，旨在以合理的方式允许跨浏览器 DOM 处理。

如果我是你，我可能会将其编码为（使用 jQuery）：

```
$('iframe#myid').click(function() {
    $('iframe#' + current).removeClass('current');
    $('iframe#myid').addClass('current');
    var current = '#myid';
}); 
```

CSS代码为：

```
body, iframe {
    margin: 0px; //to normalize the default stylesheet applied by the browser
}

iframe.current {
    position: absolute;

    top: 0; 
    left: 0;

    height: 100%;
    width: 100%;

    z-index: 999;
} 
```

# c# - 在 C# 中将 CSS 分配给动态创建的标签

> ID：13053909
> 
> 赞同：2
> 
> 时间：2012-10-24T16:52:14.633
> 
> 标签：c#, asp.net, css

我试图弄清楚如何将 CSS 应用于用 C# 创建的标签。一切都编译并运行，只是似乎没有应用 CSS。CSS 位于站点母版页中链接到的文件中。CSS 文件中的所有其他内容都按应有的方式应用。

代码隐藏：

```
...
Label label = new Label();
SqlCommand command = new SqlCommand("SELECT Q_Text FROM HRA.dbo.Questions WHERE QID = 1");
command.Connection = connection;
reader = command.ExecuteReader();
reader.Read();
label.Text = reader["Q_Text"].ToString();
label.ID = "rblabel";
label.CssClass = "rblabel";
reader.Close();
holder.Controls.Add(label);
... 
```

ASP：

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
    <asp:PlaceHolder ID="holder"  runat="server">

    </asp:PlaceHolder>
</asp:Content> 
```

CSS：

```
.rblabel {
    text-align:left;
    padding-left: 2em;
    font-size: 4em;
} 
```

编辑：在我的代码中添加了 HTML 和`Control.Add()`语句（忘记将其包含在我的复制/粘贴中）。该 HTML 是其内容的全部内容`PlaceHolder`。

HTML：

```
<section class="content-wrapper main-content clear-fix">
    <span id="MainContent_rblabel" class="rblabel">TEST TEST TEST</span>
    <table id="MainContent_ctl00" class="radio">
    <tr>
        <td><input id="MainContent_ctl00_0" type="radio" name="ctl00$MainContent$ctl00"value="1" />
        <label for="MainContent_ctl00_0">Excellent</label></td>
    </tr><tr>
  <td><input id="MainContent_ctl00_1" type="radio" name="ctl00$MainContent$ctl00" value="1" />
         <label for="MainContent_ctl00_1">Good</label></td>
    </tr><tr>
   <td><input id="MainContent_ctl00_2" type="radio" name="ctl00$MainContent$ctl00"value="1" />
          <label for="MainContent_ctl00_2">Fair</label></td>
    </tr><tr>
   <td><input id="MainContent_ctl00_3" type="radio" name="ctl00$MainContent$ctl00"value="1" />
         <label for="MainContent_ctl00_3">Poor</label></td>
    </tr>
</table>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:01:02.807

基本上有两种可能：

1.  您的标签可能不会在将 CLASS 属性设置为所需 CSS 类的情况下呈现。您可以通过查看呈现的 HTML 来验证这一点。（如果标签根本没有出现，您的代码表明您可能没有将其添加到其父级的 Controls 集合中。）

2.  一切都正确呈现，但由于您的 CSS 或覆盖它的另一个样式表存在问题，它在您的浏览器中显示不正确。要对此进行调试，您需要使用 Firebug 或 IE 的开发人员工具。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:15:09.623

span 是一个内联元素，因此并非所有浏览器都支持内边距、宽度和高度。尝试将其设置为`inline-block`.

```
.rblabel {
    text-align:left;
    padding-left: 2em;
    font-size: 4em;
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:57:47.007

CssClass 属性是正确的方法去[http://www.w3schools.com/aspnet/prop_webcontrol_style_cssclass.asp](http://www.w3schools.com/aspnet/prop_webcontrol_style_cssclass.asp)

您遗漏了将标签添加到页面/容器等的代码，这可能是错误所在。

显示页面的 HTML 源输出以查看您生成的标签是否实际包含值为“rblabel”的 CLASS 属性也会有所帮助。

如果情况变得更糟，请在 HTML 中使用 Literal 而不是 Label 填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:58:16.070

看起来您实际上并未将标签添加到您希望它出现的位置。尝试类似：

```
holder.Controls.Add(label); 
```

在您的代码隐藏中。

# sql - SQL选择基于不同表中的最大日期

> ID：13053913
> 
> 赞同：1
> 
> 时间：2012-10-24T16:52:32.883
> 
> 标签：sql

我正在尝试编写一个从各种表中提取订单信息的查询。我在目标日期值遇到了障碍。

似乎每次更改目标日期时都会在该表中添加一个新行。我想要的只是能够选择最新的目标日期。我该怎么办？

```
 select Distinct
 OR01001 AS OrderNumber,
 OR01002 AS OrderType,
 OR01003 AS CustomerCode,
 OR01015 AS OrderDate,
 OR01017 AS CustomerREP,
 OR01018 AS ContactPerson,
 OR01019 AS SalesmanNumber,
 OR03011 - OR03012 AS OpenQuantity,
 SC03003 AS StockBalance,
 OR01050 AS WarehouseNumber,
 OR01072 AS CustomerPO,
 OR03005 AS ItemCode,
 OR03002 AS LineNumber,
 OR500100.OR50004 As TargetDate
 from OR010100
 INNER Join OR030100 ON OR030100.OR03001 = OR010100.OR01001
 INNER Join SL010100 ON SL010100.SL01001 = OR010100.OR01003
 INNER Join SC030100 ON SC030100.SC03001 = OR030100.OR03005 
 Inner JOIN OR500100 ON OR500100.OR50001 = OR010100.OR01001 
 where OR010100.OR01002 <> 0 AND OR010100.OR01002 <> 6 AND OR01017 = 'SLOTT' 
 Order by OR01017 ASC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:00:54.077

如果我正确理解您的列，这是一种方法：

```
SELECT ...,
    OR500100A.OR50004 AS TargetDate
FROM ...
INNER JOIN OR500100 AS OR500100A ON OR500100A.OR50001 = OR010100.OR01001 
    AND NOT EXISTS(SELECT 1 FROM OR500100 AS OR500100B 
                   WHERE OR500100B.OR5001 = OR010100.OR01001 
                   AND OR500100B.OR50004 > OR500100A.OR50004)
... 
```

这可以确保您只获得给定`OR500100`的最新值的一行。`OR50004``OR5001`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:03:58.093

据我了解，

```
SELECT
...
MAX(OR500100.OR50004) As TargetDate
FROM...
WHERE...
GROUP BY --everything but OR500100.OR50004
ORDER BY... 
```

应该做的伎俩

编辑：ty Ic。

# ios - 2 个视图控制器合为 1

> ID：13053916
> 
> 赞同：0
> 
> 时间：2012-10-24T16:52:41.167
> 
> 标签：ios, cocoa-touch

我有一个容器视图控制器，我想以这种方式在其中加载 2 个视图控制器：

```
- (void)viewDidAppear:(BOOL)animated
{  
    CGSize size = CGSizeMake(320, 480);
    CGSize sizeExpand = CGSizeMake(640, 480); // size of view in popover
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"TabelStoryboard" bundle:[NSBundle mainBundle]];

    UIViewController *yourModalVC =[storyboard instantiateInitialViewController];
    yourModalVC.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentModalViewController:yourModalVC animated:YES];
    yourModalVC.contentSizeForViewInPopover = size;
    yourModalVC.view.frame = CGRectMake(00, 00, 320, 480);

    CGSize size2 = CGSizeMake(320, 480);
    CGSize sizeExpand2 = CGSizeMake(640, 480); // size of view in popover
    UIStoryboard *storyboard2 = [UIStoryboard storyboardWithName:@"DetailsGroup" bundle:[NSBundle mainBundle]];

    UIViewController *yourModalVC2 =[storyboard2 instantiateInitialViewController];
    yourModalVC2.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentModalViewController:yourModalVC2 animated:YES];
    yourModalVC2.contentSizeForViewInPopover = size2;
    yourModalVC2.view.frame = CGRectMake(320, 00, 320, 480);
} 
```

但只有 2 个负载中的第一个。如果我交换代码的两部分，它总是第一个加载，所以问题不在代码中。我真的可以加载两个视图控制器吗？

# java - Java Swing：宽度问题

> ID：13053919
> 
> 赞同：2
> 
> 时间：2012-10-24T16:53:04.927
> 
> 标签：java, swing, layout, layout-manager, preferredsize

我无法理解我的应用程序的行为。我想创建一个简单的窗口（*1000x700px*），分为两部分（分别为*250px*和*750px*宽度）。我尝试了以下代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Example extends JFrame
{
    private static final long serialVersionUID = 1L;

    public Example()
    {
        this.setSize(1000, 700);
        this.setTitle("Example");
        this.setResizable(false);
        this.setLayout(new FlowLayout(FlowLayout.LEFT, 0, 0));

        JPanel navigation_panel_wrap = new JPanel();
        JPanel content_panel_wrap = new JPanel();
        navigation_panel_wrap.setPreferredSize(new Dimension(250, 700));
        content_panel_wrap.setPreferredSize(new Dimension(750, 700));
        content_panel_wrap.setBackground(Color.green);
        navigation_panel_wrap.setBackground(Color.red);
        this.getContentPane().add(navigation_panel_wrap);
        this.getContentPane().add(content_panel_wrap);
    }

    public static void main(String[] args)
    {
        Example example = new Example();
        example.setVisible(true);
    }
} 
```

如您所见，我手动设置了布局管理器`JFrame`（而`FlowLayout`不是**零水平和垂直间隙**）。当然，我可以只使用and 而不是使用带有和 参数的方法，但我想了解. 当我运行我的应用程序时，我得到以下信息（没有绿色）： `BorderLayout`**`BorderLayout``add()``BorderLayout.EAST``BorderLayout.WEST``FlowLayout``JPanel`![在此处输入图像描述](../Images/267c92a955831b52ef740445111d7607.png)**

 **例如，如果我减小宽度`content_panel_wrap`并将其设置为*744px*而不是*750px*，则一切正常。 ![在此处输入图像描述](../Images/3eb33ce504686b1adb57cbef7398d78f.png) 所以问题是 - 这些奇怪的 6 个像素是什么？我不确定这个值对于所有操作系统都是恒定的，所以我想了解它的起源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:59:36.917

没有任何问题，`FlowLayout`但您需要调用`pack()`所有组件的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:29:35.583

至于您的代码问题（对@Reimeus 的+1）​​调用`pack()`是解决方案。根据文档：

> 使此 Window 调整大小以适合其子组件的首选大小和布局。如果窗口和/或其所有者还不能显示，则在计算首选大小之前，两者都可以显示。在计算出首选大小后，将验证窗口。

**尖端：**

*   `JFrame`不要不必要地扩展。
*   创建和更改 UI 组件时使用[事件调度线程：](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

    ```
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
          // create UI components etc here
        }
      }); 
    ```

*   不要调用组件的`setPreferredSize()`覆盖`getPrefferedSize()`。
*   `setSize(...)`在将其设置为可见之前不要调用`JFrame`而是调用。`JFrame#pack()`
*   不要忘记调用`JFrame#defaultCloseOperation(..)`，否则您的初始/EDT 线程在关闭时不会终止`JFrame`。

这是一个结合了我的建议和您的代码的示例：

![在此处输入图像描述](../Images/b0930dd6e6035fa6832068b126bffac5.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Example {

    private final JFrame frame;

    public Example() {
        frame = new JFrame();
        frame.setTitle("Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//app exited when frame closes
        frame.setResizable(false);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT, 0, 0));

        JPanel navigation_panel_wrap = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(250, 700);
            }
        };
        JPanel content_panel_wrap = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(750, 700);
            }
        };

        content_panel_wrap.setBackground(Color.green);
        navigation_panel_wrap.setBackground(Color.red);

        frame.add(navigation_panel_wrap);
        frame.add(content_panel_wrap);
        //pack frame (size components to preferred size)
        frame.pack();
        frame.setVisible(true);//make frame visible
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Example();
            }
        });
    }
} 
```**

# java - 从小程序安全警告中摆脱“未知”发布者

> ID：13053922
> 
> 赞同：13
> 
> 时间：2012-10-24T16:53:11.777
> 
> 标签：java, ssl, applet, certificate, signing

我正在尝试**签署一个小程序**，以便**发布**者不会显示为“**未知**”：

![小程序安全警告显示](../Images/ff35b553b4510acd0b3c11e1c6094e45.png)

我为一个组织工作，我们有**自己的证书颁发机构**，**证书链**如下：*ORG Root CA > ORG 受信任的证书颁发机构 > Yann39（我：D）*

我申请了证书，他们为我提供了一个链接以将其放入浏览器。然后我将它（从 Firefox）导出以获取我命名为**mystore.p12**的 PKCS#12 文件。

然后我执行以下操作来**签署我的小程序**：

```
/* TO KNOW THE ALIAS */
c:\testrep>keytool -list -storetype pkcs12 -keystore mystore.p12
Enter keystore password:  ********

Keystore type: pkcs12
Keystore provider: SunJSSE

Your keystore contains 1 entry

id de yann39, Oct 24, 2012, keyEntry,
Certificate fingerprint (MD5): D7:E3:83:1D:C1:40:68:72:5F:A8:6F:AC:3A:EA:DD:47

/* CREATE FAKE CLASS FILE AND BUILD A JAR */
c:\testrep>echo test > test.class
c:\testrep>C:\oracle\dev10gr2\jdk\bin\jar cf0 test_applet.jar test.class

/* SIGN THE JAR */
c:\testrep>C:\oracle\dev10gr2\jdk\bin\jarsigner -verbose -storetype pkcs12 -keystore mystore.p12 test_applet.jar "id de yann39"
Enter Passphrase for keystore: ********
 updating: META-INF/MANIFEST.MF
   adding: META-INF/ID_DE_YA.SF
   adding: META-INF/ID_DE_YA.RSA
  signing: test.class

/* VERIFY THE SIGNATURE */
c:\testrep>C:\oracle\dev10gr2\jdk\bin\jarsigner -verify -verbose -certs test_applet.jar

         132 Wed Oct 24 17:49:52 CEST 2012 META-INF/MANIFEST.MF
         185 Wed Oct 24 17:49:52 CEST 2012 META-INF/ID_DE_YA.SF
        4801 Wed Oct 24 17:49:52 CEST 2012 META-INF/ID_DE_YA.RSA
           0 Wed Oct 24 17:48:36 CEST 2012 META-INF/
sm         0 Wed Oct 24 17:47:46 CEST 2012 test.class

      X.509, CN=Yann39, CN=794324, CN=myname, OU=Users, OU=Organic Units,
DC=myorg, DC=ch
      X.509, CN=ORG Trusted Certification Authority, DC=myorg, DC=ch
      X.509, CN=ORG Root CA, DC=myorg, DC=ch

  s = signature was verified
  m = entry is listed in manifest
  k = at least one certificate was found in keystore
  i = at least one certificate was found in identity scope

jar verified.

c:\testrep> 
```

然后我使用以下命令在我的应用程序中**加载苹果**：

```
<object id="mytestapplet" width="0" height="0" style="position:absolute" type="application/x-java-applet">
<param name="archive" value="https://myhost.ch/rep/test_applet.jar">
<param name="code" value="test">
<param name="scriptable" value="true">
<param name="mayscript" value="no">
</object> 
```

我读过一些类似这样的帖子：[如何使用 .pfx 文件签署 java 小程序？](https://stackoverflow.com/questions/5642837/how-to-sign-java-applet-with-pfx-file)似乎**我应该** `smi`在验证 jar 中的签名文件时得到，这不仅`sm`意味着在密钥库中找不到证书。

所以**我以为证书链不完整**，但是在运行以下命令时，**我发现事实并非如此**：

```
c:\testrep>keytool -list -v -storetype pkcs12 -keystore mystore.p12
Enter keystore password:  ********

Keystore type: pkcs12
Keystore provider: SunJSSE

Your keystore contains 1 entry

Alias name: id  de yann39
Creation date: Oct 24, 2012
Entry type: keyEntry
Certificate chain length: 3
Certificate[1]:
Owner: CN=Yann39, CN=794324, CN=myname, OU=Users, OU=Organic Units,
    DC=myorg, DC=ch
Issuer: CN=ORG Trusted Certification Authority, DC=myorg, DC=ch
Serial number: 12d21eb200200000a02b
Valid from: Mon Jun 25 14:16:00 CEST 2011 until: Wed Jun 24 14:16:00 CEST 2013
Certificate fingerprints:
         MD5:  D7:E3:83:1D:C1:41:78:72:5F:A8:6D:BD:3A:ED:DD:48
         SHA1: 24:31:1D:25:02:98:0D:F8:28:6A:F1:0E:E8:BB:04:7E:51:E2:E9:66
Certificate[2]:
Owner: CN=ORG Trusted Certification Authority, DC=myorg, DC=ch
Issuer: CN=ORG Root CA, DC=myorg, DC=ch
Serial number: 601fab4c000000000003
Valid from: Tue Oct 02 11:36:53 CEST 2006 until: Mon Oct 02 11:47:53 CEST 2016
Certificate fingerprints:
         MD5:  51:A1:EA:33:21:2C:71:60:A1:6F:F1:22:92:A8:51:8D
         SHA1: 66:CD:70:13:27:68:F3:C2:08:F3:BE:5F:BF:D4:17:BD:85:9D:10:65
Certificate[3]:
Owner: CN=ORG Root CA, DC=myorg, DC=ch
Issuer: CN=ORG Root CA, DC=myorg, DC=ch
Serial number: 7dc0d089138d1d804b2e68e21b947412
Valid from: Tue Oct 02 10:55:19 CEST 2006 until: Sat Oct 02 11:01:47 CEST 2026
Certificate fingerprints:
         MD5:  A2:CE:DC:7D:F5:60:D7:2C:5E:B5:29:74:9D:51:F9:49
         SHA1: DA:D8:7F:63:95:90:A2:E4:D4:1D:B9:48:FD:F4:C3:5C:FC:2B:B6:A3

*******************************************
*******************************************

c:\testrep> 
```

链条看起来不错。

但我**仍然**收到**“未知”发布者**的**安全警告**。**为什么**？

 ***** * *

## 编辑 2012 年 10 月 25 日

我忘了说它**可以使用 Internet Explorer**（“签名已验证”并且发布者是“Yann39”），而不是使用 Chrome 或 Firefox。

我尝试使用**自签名**证书：

```
keytool -genkey -alias myalias -storetype PKCS12 -keystore mykeystore.p12 -dname "cn=Yann39, ou=UN, o=ORG, st=Geneva, c=CH"
keytool -list -v -storetype pkcs12 -keystore mykeystore.p12
echo test > test.class
C:\oracle\dev10gr2\jdk\bin\jar cf0 myapplet.jar test.class
C:\oracle\dev10gr2\jdk\bin\jarsigner -verbose -storetype pkcs12 -keystore mykeystore.p12 myapplet.jar "myalias"
C:\oracle\dev10gr2\jdk\bin\jarsigner -verify -verbose -certs myapplet.jar 
```

它在 IE 和 Firefox 或 Chrome 中都不起作用，正常。

我尝试从我的组织添加 2 个受信任的证书，但**失败了**：

```
keytool -import -alias "myalias_root" -file ORGRooTCA.crt -storetype pkcs12 -keystore mykeystore.p12
keytool -import -alias "myalias_auth" -file ORGTrustedCertificationAuthority.crt -storetype pkcs12 -keystore mykeystore.p12 
```

出现错误：

```
keytool error: java.security.KeyStoreException: TrustedCertEntry not supported 
```

`sm`我仍然不明白为什么在验证签名时它说在密钥库（）中找不到证书。

* * *

## 编辑 2012 年 11 月 2 日

我终于得到了我的证书颁发机构的回复。由于提供代码签名证书仅用于测试（我们的组织没有正式支持），他们不提供任何帮助，他们关闭了我的票...

2 个证书**ORG Root CA**和**ORG 受信任的证书颁发机构**在 3 个浏览器（IE、Firefox、Chrome）中受信任。运行我的小程序时，我仍然在 IE 中得到预期的结果：

*   **名称**：小程序测试
*   **发布**者：Yann39
*   **来自**：[https ://myhost.ch](https://myhost.ch)

但不是在 Firefox 和 Chrome 中：

*   **名称**：测试
*   **发布**者：未知
*   **来自**：[https ://myhost.ch](https://myhost.ch)

`<object>`另一个奇怪的事情是，正如您所见，IE将 HTML 中使用的标签的 id 引用为“名称” （ *applettest*），而 Firefox 和 Chrome 则引用了主类的名称（*test*）。

我认为与**Publisher**相同，IE 正在查看`CN`RDN ( *Yann39* )，而 Firefox 和 Chrome 正在查看`O`RDN 并且找不到，因为它没有在我的证书中定义。

如果有人有更多关于浏览器如何检查证书的信息，请分享。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-25T12:55:29.240

如果您有自己的 CA 并使用该 CA 颁发的证书签署小程序，那么您显然需要将该 CA 的证书添加到受信任的证书颁发机构列表中。

在IE中运行时，Java插件似乎可以使用CA的系统列表，因此您只需将您的CA证书添加到系统证书存储中（请务必在导入时手动选择证书目的地为受信任的CA ）。

在 Chrome 或 Firefox 中运行时，Java 插件出于某种原因不使用系统证书存储，而仅使用其自己的单独证书存储。如果在 Java 插件证书存储中不存在 CA 的证书，无论它是否在“受信任的 CA”系统证书存储中，在这些浏览器中运行小程序时，您将收到带有“未知”发布者的“不安全”安全警告。

要将证书添加到 Java 插件存储：

*   打开 Java 控制面板
*   选择“安全”选项卡
*   单击“管理证书...”按钮
*   在“证书类型”组合框中选择“签名者 CA”选项。
*   导入您的 CA 证书

下次您使用 Chrome 或 Firefox 运行您的小程序时，您将看到一个正常的“安全”安全警告，并可选择永久信任该小程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:52:26.430

在签名之前，您需要将 CA 证书（直到根 CA）添加到您的 p12 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-13T13:53:18.327

当我更改我的签名证书时，出现了同样奇怪的“未知”消息。我将签名密钥库的证书导入到 cacerts 中（这样我的自签名 jar 将被接受），但 java 缓存保存了旧的 jarfile。然后当使用“新”证书启动“旧”小程序时，会出现与上述类似的消息。

解决方法：清除java缓存（通过java控制面板或javaws -uninstall）。

这以防万一有人（如我自己）在搜索此错误消息时偶然发现此线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T23:28:54.730

> 我尝试从我的组织添加 2 个受信任的证书，但失败了：

嗯...一切似乎都不清楚，因为您演示了签名过程，因为仅导入证书...

> 我尝试使用自签名证书它在 IE 和 Firefox 或 Chrome 中都不起作用，正常。我尝试从我的组织添加 2 个受信任的证书，但失败了：

当然，它失败了。因为您无法导入证书来获取非原始密钥的链。回到你的测试用例......

我可以在您的测试用例中看到的所有内容，例如：

*   A）您可能**生成 myalias** 或**myalias_root**和 **myalias_auth**密钥 - 在此处提供更多详细信息
*   B）您尝试导入**ORGRooTCA**和 **ORGTrustedCertificationAuthority**
*   C）你尝试签署一个测试罐

在步骤 B 中，您尝试导入 2 个证书。所以我必须问

*   这两个证书是使用**myalias_root**和
    **myalias_auth** CSR(s) 生成的吗？

如果不是这样，我想您只是跳过了一些步骤，如下所示：

*   A) 根**myalias_root**和 **myalias_auth**密钥
*   B) **myalias_root** _root 和**myalias_auth的 Gen CSR**
*   C)使用**myalias_root**和**myalias_auth** CSR(s)**生成证书****ORGRooTCA**和ORGTrustedCertificationAuthority
*******   D) 将证书导入为**ORGRooTCA**和**ORGTrustedCertificationAuthority**以获取链*   E) 尝试签署一个测试罐******

 ****再一次……

> 我尝试从我的组织添加 2 个受信任的证书，但失败了：

结果，我可以建议你

*   A）不仅从您的组织获取证书，还获取生成证书的密钥库**密钥**
*   B）或者按照前面提到的 ABCDE 步骤生成您自己的密钥和您自己的证书：）

* * *

> 我申请了证书，他们为我提供了一个链接以将其放入浏览器。然后我将它（从 Firefox）导出以获取我命名为 mystore.p12 的 PKCS#12 文件。

您手动导入它，然后按照[此处](http://www.pentaware.com/pw/How_to_export_a_PFX_file_from_your_firefox_browser.htm)所述导出它？

好吧……这很有趣。如果您仍然确定 pfx 中的所有内容都正确：S 我仍然使用演示重新播放您的 jarsigner。因此，您将 test_applet.jar 签名为

```
/* SIGN THE JAR */
c:\testrep>C:\oracle\dev10gr2\jdk\bin\jarsigner -verbose -storetype pkcs12 -keystore mystore.p12 test_applet.jar "id de yann39"
Enter Passphrase for keystore: ********
 updating: META-INF/MANIFEST.MF
   adding: META-INF/ID_DE_YA.SF
   adding: META-INF/ID_DE_YA.RSA
  signing: test.class 
```

...这是非常标准的签名方式，但我想指出一些细节...我看不到 jarsigner**要求**您在哪里输入“id de yann39”私钥**密码**：S？我只能看到您只输入密钥库密码......在您的复制粘贴版本或 jarsigner 中跳过的步骤真的不要求您输入密钥密码吗？

作为试用，我建议您尝试使用**-keypass** arg 为您的 jar 签名（参见示例）

```
jarsigner -keystore C:\working\mystore -storepass myspass
      -keypass dukekeypasswd MyJarFile.jar duke 
```

有关更多详细信息，请参阅[如何使用 jarsigner](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/jarsigner.html)文档...

* * *

> 我没有对证书进行任何更改，所以是的，我猜它是原始私钥？关于您的编辑：是的，我按照您的链接中的说明导出了它，但是我使用了“全部备份”，而不是仅使用“备份”，否则我的 .p12 文件中没有整个证书链。关于签署 .jar 文件，我没有跳过任何内容，jarsigner 只要求我提供密钥库密码。我认为keystore密码和私钥密码是一样的，

如果您使用 keytool 在您的密钥库中生成了密钥，您必须知道密钥库有自己的密码，并且新生成的私钥应该有自己的密码；所以我想这里可能缺少一些东西：S 你会很有趣 A）将你的 pfx 导入到 IE 并使用 IE 将其导出，如此[处](http://support.godaddy.com/help/article/4782/exporting-an-installed-code-signing-certificate-from-internet-explorer)所述：因为“是导出私钥”说明 +“在认证路径中包含所有证书如果可能的话”

PS如果有帮助请评论********

# java - Java 的 String .replaceFirst 不起作用，我不知道它是错误还是我做错了

> ID：13053925
> 
> 赞同：0
> 
> 时间：2012-10-24T16:53:19.470
> 
> 标签：java, string, replace

好的，当我使用 string.replace() 时，我有一个替换文本的方法，但是当我切换到如下所示的 relpaceFirst() 时，它不再有效，我在这里做错了什么或遗漏了什么？

```
private void acceptAccButtonActionPerformed(java.awt.event.ActionEvent evt) {      
    int selectedAcTableItem = validAcTable.getSelectedRow();
    int selectedSugTableItem = suggestedAcTable.getSelectedRow();
    if (selectedAcTableItem > 0) {
        String acNameDefthmlText = htmlText;
        String parensName = "";
        String acName = validAcTable.getValueAt(selectedAcTableItem, 0).toString();
        String acDef = validAcTable.getValueAt(selectedAcTableItem, 1).toString();
        String acSent = validAcTable.getValueAt(selectedAcTableItem, 2).toString();
        StringBuilder acBuilder = new StringBuilder(acDef);
        acBuilder.append(" (").append(acName).append(")");            
        if (!acDef.equals("")) {
            parensName = " (" + acName + ")";
            if (htmlText.contains(acName) && !htmlText.contains(acBuilder)){
                String acReplace = acBuilder.toString();
                String acOrigDefName = acDefRow + parensName;
                if (htmlText.contains(acOrigDefName) && parensName.contains(acOrigName)){
                    acNameDefthmlText = htmlText.replaceFirst(acOrigDefName, acReplace);
                } else if (htmlText.contains(acName)) {
                    acNameDefthmlText = htmlText.replaceFirst(acName, acReplace);
                }
                htmlText = acNameDefthmlText;

            }                
            validAcTable.setValueAt(true, selectedAcTableItem, 2);
            Acronym acronym = createNewAcronym(acName, acSent, acDef, true);
            try {

                AcronymDefinitionController.sharedInstance().writeAcronymToExcelSheet(acName, acDef);
            } catch (IOException ex) {
                Exceptions.printStackTrace(ex);
            } catch (InvalidFormatException ex) {
                Exceptions.printStackTrace(ex);
            }
            if (validAcTable.getRowCount() - 1 >= validAcTable.getSelectedRow() + 1) {
                validAcTable.changeSelection(selectedAcTableItem + 1, 0, true, true);
            }
            validAcTable.repaint();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:02:36.370

如果您注意到有问题的两种方法的签名：

```
replace(char oldChar,char newChar);
replace(CharSequence target, CharSequence replacement);

replaceFirst(String regex, String replacement); 
```

如您所见，`replaceFirst`匹配的参数被视为`regex`（正则表达式），如果参数中涉及任何特殊字符，这将导致差异。

例如：考虑以下：

```
System.out.println("abcdab".replace("ab", "ef"));  //<- replaces all
System.out.println("abcdab".replaceFirst("ab", "ef"));//<-replaces first
System.out.println("\\abcdab".replace("\\ab", "ef")); //<-replaces first
System.out.println("\\abcdab".replaceFirst("\\ab", "ef"));
//^ doesn't replace as `\` is an special char 
```

# javascript - 使用 JsRender 的简单 for 循环

> ID：13053926
> 
> 赞同：4
> 
> 时间：2012-10-24T16:53:21.650
> 
> 标签：javascript, jquery, jsrender

我正在使用 JsRender 来呈现模板客户端。但是，我无法使用 for 循环标记来重复块的 html 部分，因为它似乎只接受数组或对象。相反，我的 JSON 返回一个数字变量（我应该重复该块的次数）。如何使用 JsRender 重复 html N 次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-27T17:35:24.467

我扩展了@webdeveloper 的答案，因为不需要额外的循环，因为 javascript 数组的工作方式只需要定义最后一个元素

```
$.views.helpers({
    repeatLoop: function( count ) {
        if (!count) return [];
        var repeat = [];
        repeat[count-1] = {};
        return repeat;
    }
}); 
```

然后用作

```
@{{for ~repeatLoop(10)}}
    {{:#index+1}}
@{{/for}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:30:56.740

我不确定 JsRender 是否提供了这个功能。您可以编写自己的标签，如下所示：[示例场景：创建自定义助手以遍历字段](http://borismoore.github.com/jsrender/demos/scenarios/03_iterating-through-fields-scenario.html)

```
$.views.helpers({
    getFields: function( count ) {
        var fieldsArray = [];
        for (var i=0; i < count; i++) {
            fieldsArray.push({});
        }

        return fieldsArray;
    }
}); 
```

演示：http: [//jsfiddle.net/6UeZC/](http://jsfiddle.net/6UeZC/)

# c++ - SHBrowseForFolder 网络浏览性能问题

> ID：13053931
> 
> 赞同：1
> 
> 时间：2012-10-24T16:53:44.757
> 
> 标签：c++, windows, unc

我们的一位客户在使用外壳“浏览文件夹”对话框浏览网络时抱怨性能（甚至挂起）。他们确认文件/打开对话框（实际上是 CFileDialog）工作得更快：

> “很重要，因为用户需要使用 UNC 路径浏览模型文件夹，并且当前对话框可以让用户使用任务管理器......只需尝试在此对话框中浏览 UNC 路径并与浏览项目文件和“

对于 SHBrowseForFolder()、MFC 的 CFileDialog 和 WinAPI 的 GetOpenFileName()，我都没有找到任何关于 MSDN 或 Windows 支持的文档，其中包括关于 UNC 路径性能的文档。

并且非常不适合在客户的站点上进行测试。

有什么建议么？

# javascript - 在 Javascript 中导入多个 CSV 文件

> ID：13053935
> 
> 赞同：1
> 
> 时间：2012-10-24T16:53:55.183
> 
> 标签：javascript, csv, d3.js

我需要将 8-10 个 CSV 文件导入到一些 JS 代码中。每个文件有大约 8 个不同的列。我想将此信息存储在一个对象中（可能基于 ID 字段之一识别对象）。问题是，我能想到的最简单的方法是这样的：

```
var authorArr = [];
d3.csv("data/authors.csv", function(csv) {
    csv.forEach(function(d) {
    authorArr[d.record_id] = [];
    d.record_id = +d.record_id;
    d.name = d.name
    d.name_inverted = d.name_inverted;
    d.role = d.role;
    d.sequence = +d.sequence;
    d.is_person = d.is_person;

    authorArr[d.record_id] = d.name;
    authorArr[d.record_id] = d.role;
    etc... 
```

当然这不是最快的方法......而且，还有很多重复的 record_id 值，所以每次重复时，我都会用我可怕的方法丢失所有以前的数据。

我不确定这是否足够详细。如果没有，我很乐意添加更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:37:05.953

您可以为新/当前记录使用临时变量。您的示例也看起来像您不想要一个数组（有间隙）而是一个地图。这是我将如何加载数据：

```
var authorMap = {}

var loadCSV = function(file){
    d3.csv(file, function(error, data) {
        data.forEach(function(d) {
            var a = authorMap[d.record_id] = {}
            a.record_id = d.record_id
            a.name      = d.name
            a.role      = d.role
        });
    });
}

loadCSV("file1.csv")
loadCSV("file2.csv") 
```

# c# - 从 Window.Resources 中的对象中查找资源

> ID：13053939
> 
> 赞同：1
> 
> 时间：2012-10-24T16:54:06.473
> 
> 标签：c#, wpf, xaml

我有一个在 XAML 中声明的资源，如下所示：

```
<Window x:Class="Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Test"
    Title="MainWindow" Height="350" Width="525" Name="form1">
  <Window.Resources>
    <ObjectDataProvider x:Key="SingleRole" ObjectType="{x:Type local:SingleRole}" />
  </Window.Resources>
...
</Window> 
```

我试图在代码中获取对该对象的引用：

```
 private void button1_Click_1(object sender, RoutedEventArgs e)
    {
        SingleRole role = ????;
    } 
```

我怎样才能做到这一点？我试过 FindResource 和 this.Resources["SingleRole"] 但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:55:24.053

您应该可以使用`this.Resources`演员表：

```
var provider = (ObjectDataProvider)this.Resources["SingleRole"];
SingleRole role = provider.ObjectInstance as SingleRole;
if (role != null)
{
   // Use it here, as it was found properly
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:55:53.773

这应该工作 -

```
var a = this.FindResource("SingleRole"); 
```

# php - 使用谷歌图表、mysql 和 php 创建动态图表

> ID：13053941
> 
> 赞同：2
> 
> 时间：2012-10-24T16:54:07.953
> 
> 标签：php, mysql, dynamic, google-visualization

我需要帮助。我想使用谷歌的图表 api 和通过 MySql 获得的数据创建一个动态折线图。我正在使用 PHP 来创建页面。我能够创建一个带有硬编码值的简单图表，这没问题。现在我正在尝试使用一些 MySql 数据，但没有运气。我的网页如下所示：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

function drawChart() 
{
    var jsonData = $.ajax({
        url: "graphData.php",
        dataType:"json",
        async: false
}).responseText;

// Create our data table out of JSON data loaded from server.
var data = new google.visualization.DataTable(jsonData);

var options = {'title':'Ticket Sales',
'width':500,
'height':400};

// Instantiate and draw our chart, passing in some options.
var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
chart.draw(data,options); 
}
</script>
<?
  PrintHeader($buf,$username,$userid,$session);

  echo("<div id='chart_div'></div>");
?>
</html> 
```

然后我的 graphData.php 页面如下所示：

```
$sql = "SELECT MONTHNAME(DATE_SOLD), COUNT(*) FROM TICKET_SALES WHERE YEAR(DATE_SOLD) = 2012 GROUP BY MONTHNAME(DATE_SOLD) ORDER BY MONTH(DATE_SOLD);";

$result = mysql_query($sql, $conn) or die(mysql_error());

//start the json data in the format Google Chart js/API expects to recieve it
$JSONdata = "{
       \"cols\": [
           {\"label\":\"Month\",\"type\":\"string\"},
           {\"label\":\"Ticket Sales\",\"type\":\"number\"}
         ],
    \"rows\": [";

//loop through the db query result set and put into the chart cell values
while($row = mysql_fetch_row($result)) 
{
   $JSONdata .= "{\"c\":[{\"v\": " . $row[0] . "}, {\"v\": " . $row[1]  ."}]},";
}    

//end the json data/object literal with the correct syntax
$JSONdata .= "]}";

echo $JSONdata;
?> 
```

当我在浏览器中加载页面时，我只看到一个红色框，上面写着“表格没有列”。谁能告诉我我做错了什么？或者也许是更好/更简单的方法？任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:03:21.217

不要以这种方式构造 JSON 数据，创建一个 PHP 数组并使用 json_encode() 将数据发回。

```
<?php

$sql = "SELECT MONTHNAME(DATE_SOLD), COUNT(*) FROM TICKET_SALES WHERE YEAR(DATE_SOLD) = 2012 GROUP BY MONTHNAME(DATE_SOLD) ORDER BY MONTH(DATE_SOLD);";

$result = mysql_query($sql, $conn) or die(mysql_error());

//start the json data in the format Google Chart js/API expects to recieve it
$data = array('cols' => array(array('label' => 'Month', 'type' => 'string'),
                              array('label' => 'Ticket Sales', 'type' => 'string')),
              'rows' => array());

while($row = mysql_fetch_row($result)) {
   $data['rows'][] = array('c' => array(array('v' => $row[0]), array('v' => $row[1])));
}    

echo json_encode($data); 
```

我没有检查 JSON 输出是否是想要的，只是使它与您尝试生成的相同。此外，您应该让 die() 在 JSON 对象中返回无效状态，这样您就可以判断它失败了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:06:40.573

是的，使用该`json_encode`功能。它将为您省去很多麻烦。我还要确保你通过一个`intval()`或什么来运行你的数字。

我使用 Google 图表 API 的经验是，如果您在引号中发送一个数字，图表将无法绘制，因此您的 PHP 数组中的数据类型必须正确，因此`json_encode`结果在语法上是正确的。

# javascript - IE-8 中丢失的事件类型属性

> ID：13053950
> 
> 赞同：4
> 
> 时间：2012-10-24T16:55:12.957
> 
> 标签：javascript, html, internet-explorer-8, dom-events

我注意到一个奇怪的 Javascript 错误，它似乎只发生在 Internet Explorer 8 上。基本上，在 IE-8 上，如果你有一个在闭包中捕获事件对象的事件处理函数，则事件“类型”属性似乎变得无效从封闭内。

这是一个重现错误的简单代码片段：

```
<html>
    <head>
        <script type="text/javascript">
            function handleClickEvent(ev)
            {
                ev = (ev || window.event);
                alert(ev.type);
                window.setTimeout(function() {
                    alert(ev.type); // Causes error on IE-8
                }, 20);
            }

            function foo()
            {
                var query = document.getElementById("query");
                query.onclick = handleClickEvent;
            }

        </script>
    </head>
    <body>
        <input id="query" type="submit" />
        <script type="text/javascript">
            foo();
        </script>
    </body>
</html> 
```

所以基本上，这里发生的是在`handleClickEvent`函数中，我们有事件对象`ev`。我们打电话`alert(ev.type)`，我们看到事件类型是“点击”。到现在为止还挺好。但是当我们在闭包中*捕获*事件对象，然后`alert(ev.type)`从闭包内再次调用时，现在突然 Internet Explorer 8 出现错误，说“找不到成员”，因为表达式`ev.type`。在我们在闭包中捕获事件对象之后，似乎`type`事件对象的属性神秘地消失了。

我在 Firefox、Safari 和 Chrome 上测试了这个代码片段，它们都没有报告错误情况。但是在 IE-8 中，事件对象在闭包中被捕获后似乎变得无效。

**问题**：为什么在 IE-8 中会发生这种情况，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:57:46.203

是的，这是因为事件数据结构是 IE8 中的全局变量，所以当它们发生时它会被其他事件覆盖。如果您需要它在闭包中保留，您将必须在闭包中制作事件数据结构的实际副本，以便您可以引用静态副本而不是被 IE8 重用的一个全局结构。

制作数据结构的副本包括制作一个新对象并复制所有属性。如果任何属性本身是对象或数组，您也必须制作它们的副本（只需将它们分配给新对象将分配引用，而不是副本）。

或者，如果您只需要`type`，那么只需将 分配给`type`闭包中的局部变量，然后像这样引用它。

```
function handleClickEvent(ev)
{
    ev = (ev || window.event);
    // save copy of type locally so we can use it later in setTimeout()
    var type = ev.type;
    alert(type);
    window.setTimeout(function() {
        alert(type);
    }, 20);
} 
```

# objective-c - 从 Xcode 项目中清除 .png 文件

> ID：13053955
> 
> 赞同：0
> 
> 时间：2012-10-24T16:55:33.383
> 
> 标签：objective-c, ios, xcode

在我的 Xcode 项目中，我添加了一堆要使用的图像。我需要更改图像，因此我将它们从项目中删除并从文件夹结构中删除。他们应该走了，对吧？

不，当我启动程序时，图像仍在使用中。我在我的电脑上搜索了文件名，只在代码中找到它

（我使用了一个常量文件并将文件名放入字符串中：

```
NSString * const PRESET_LIGHT_GRAY = @"preset-rect-16.png";
NSString * const PRESET_ASH_GRAY = @"preset-rect-17.png"; 
```

这是我在 Mac 上找到文件名的唯一位置）。

我的 Mac 上没有名为“preset-rect-16.png”的文件，但 Xcode 仍在使用该图像。

Xcode 在哪里获取图像？它们是否存储在项目的其他地方？它们是否保存在模拟器中的某个地方？

/困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:12:51.760

到这里。Xcode -> 首选项 -> 位置 -> 派生数据

![在此处输入图像描述](../Images/e6569acd7dba573496cbe9851e918727.png)

无论您的派生数据文件夹在哪里，删除此项目的构建，然后再次运行。还建议重置模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:05:28.407

在复制捆绑资源下的目标构建阶段仍可能会引用这些图像。如果是这样，也删除那里的引用。

# javascript - 用 OnReady 的内容填充 tinymce 文本区域？

> ID：13053959
> 
> 赞同：4
> 
> 时间：2012-10-24T16:55:38.420
> 
> 标签：javascript, jquery, tinymce, wysiwyg

这是我的 tinymce 代码。我在准备好的事件中使用内容“客户详细信息”填充 tinymce 文本区域。但是即使在文本区域附加了 tinymce 之后，tinyMCE.activeEditor 的评估结果仍为 null

```
 $(function() {
            appendTinyMCE();
          function appendTinyMCE(){
            tinyMCE.init({

            // General options
            mode : "textareas",
            theme : "advanced",
            plugins : "preview",
            // Theme options
            theme_advanced_buttons1 : "forecolor,backcolor,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,formatselect,fontselect,fontsizeselect,sub,sup,|,bold,italic,underline,strikethrough",
            theme_advanced_buttons2 : "",
            theme_advanced_buttons3 : "",
            width : "640",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
            theme_advanced_resizing : true

        });}

      alert("tinyMCE.activeEditor"+tinyMCE.activeEditor);// inyMCE.activeEditor is coming as  null. Not getting why
      if(tinyMCE!=null && tinyMCE.activeEditor!=null)
          {
          tinyMCE.activeEditor.setContent('Cust Details');
          }

    }); 
```

请让我知道如何在准备好的事件中填充微小的 mce 文本区域？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T17:13:37.697

前段时间我也有同样的问题...

尝试从init 选项中的**init_instance_callback**参数设置文本区域内容：

```
init_instance_callback : function() {                                                   
     tinyMCE.activeEditor.setContent('Cust Details');
} 
```

将此应用于您的代码片段应如下所示：

```
$(function() {
            appendTinyMCE();
          function appendTinyMCE(){
            tinyMCE.init({

            // General options
            mode : "textareas",
            theme : "advanced",
            plugins : "preview",
            // Theme options
            theme_advanced_buttons1 : "forecolor,backcolor,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,formatselect,fontselect,fontsizeselect,sub,sup,|,bold,italic,underline,strikethrough",
            theme_advanced_buttons2 : "",
            theme_advanced_buttons3 : "",
            width : "640",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
            theme_advanced_resizing : true,
            init_instance_callback : function() { tinyMCE.activeEditor.setContent('Cust Details');}

        });}
    }); 
```

# python - cpython的list类型的实现在哪里？

> ID：13053961
> 
> 赞同：1
> 
> 时间：2012-10-24T16:55:42.100
> 
> 标签：python, list, cpython

我想知道pythons列表类型的`__setitem__`和`__getitem__`代码是在哪里定义的。我知道列表是用 C 实现的，但是我找不到实现列表的索引和切片操作的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:57:19.140

您会在[`listobject.c`文件](http://hg.python.org/cpython/file/tip/Objects/listobject.c)中找到所有内容。

它的方法在[`list_methods()`结构](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l2358)中被列举。您可能还想研究[`PyList_Type`结构](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l2615)，以获取指向各种钩子实现的更多指针。

由于`__getitem__`和`__setitem__`都是[C 序列协议](http://docs.python.org/c-api/typeobj.html#sequence-object-structures)的一部分，因此该`PyList_Type`结构指向一个定义这些钩子的新结构，[`list_as_sequence`](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l2376)列在.`tp_as_sequence``PyList_Type`

该[`list_item`函数](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l415)实现了`__getitem__`钩子，`__setitem__`并由 表示[`list_ass_item`](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l726)。

另一方面，切片由映射协议处理，您最终会（通过[`list_as_mapping`](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l2609)）在[`list_subscript`](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l2394)和[`list_ass_subscript`](http://hg.python.org/cpython/file/tip/Objects/listobject.c#l2447)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:56:33.557

看看文件[`listobject.c`](http://hg.python.org/cpython/file/84cd07899baf/Objects/listobject.c)......我[今天早些时候添加了一个答案，](https://stackoverflow.com/a/13048210/748858)它指向了你正在寻找的很多东西

# c# - AutoScrollPosition 设置为点位置后不报告正确的值

> ID：13053962
> 
> 赞同：7
> 
> 时间：2012-10-24T16:55:50.917
> 
> 标签：c#, user-controls, scroll

我有一个用户控件，它是可滚动控件，我想更改它`AutoScrollPosition`（只有 X 值）。

我这样做是这样的：

```
int newScrollX = myFunction();
Point p = new Point(newScrollX, this.AutoScrollPosition.Y);
this.AutoScrollPosition = p; 
```

newScrollX 得到了正确的值，p 得到了正确的点，但是在 AutoScrollPosition 设置的那一行之后，AutoScrollPosition 是 (0,0)。

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T06:32:29.227

AutoScrollPosition 相当麻烦。

通常在执行此操作时会得到负值：

```
Point p = this.AutoScrollPosition; 
```

但是在设置滚动位置时，您必须使用正值......所以要恢复完全相同的滚动位置，您必须反转负数：

```
this.AutoScrollPosition = new Point(-p.X, -p.Y) 
```

否则，观察到的 AutoScrollPosition 将为 0,0。

# asp.net - 如何检查当前会话还剩多少秒？

> ID：13053973
> 
> 赞同：2
> 
> 时间：2012-10-24T16:56:20.980
> 
> 标签：asp.net, session, session-timeout

`Session.Timeout`只返回静态值`Web.Config`。但我想获得当前会话到期还剩多少秒的值。我应该怎么办？

* * *

我试图`Session.Timeout`从 JavaScript 中检索。

```
setInterval('checkSession()', 100); 
```

而且`checkSession()`是：

```
function checkSession() {
    console.log('Timeout: <%= Session.Timeout %>');
} 
```

该页面吐出`Session.Timeout`几分钟的当前值，它仅证明这`Session.Timeout`是 my 中设置的静态值`Web.Config`，而不是显示还剩多少分钟的动态值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:12:34.327

我认为，如果您像大多数在线银行网站一样在客户端进行此控制，这才有意义。

```
<script>
   var timeLeft = <%= Session.Timeout * 60 %>; // seconds
   self.setInterval(checkTime, 1000);
   function checkTime()
   {
       timeLeft--;
       if (timeLeft < 120) // 2 minutes left
       {
         alert("2 minutes left.");
         // well you can refresh or close the page
         document.frames["iframeSession"].location.reload();
       }
   }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:58:37.283

如果您想在服务器上执行此操作（这没有多大意义），则等于`Session.Timeout`因为您正在会话中主动处理请求。

要在客户端执行此操作，您只需将`Session.Timeout`值传递给页面并使用 javascript 使用它（记录页面呈现的时间并将当前时间与之比较）。

# ios - Catch 22 according to the documentation for address book use with iOS 6

> ID：13053976
> 
> 赞同：2
> 
> 时间：2012-10-24T16:56:23.587
> 
> 标签：ios

According to the documentation with iOS6 an address book should be created using ABAddressBookCreateWithOptions.

It also says if the caller does not have access to the db then this method will return null.

However access is requested by calling ABAddressBookRequestAccessWithCompletion, which takes an ABAddressBookRef as a parameter.

So according to the documentation you can't get an ABAddressBookRef in the first place if you don't have access, but to get access you have to have an ABAddressBookRef to pass as a parameter.

Eh. Catch 22? How do you create an ABAddressBookRef then?

Been googling for some example/tutorial code for this but haven't found any.

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:34:28.077

I use code like this:

```
if (ABAddressBookCreateWithOptions) {
    _book = ABAddressBookCreateWithOptions(NULL, NULL);
    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
        ABAddressBookRequestAccessWithCompletion(_book, ^(bool granted, CFErrorRef error) {
            dispatch_async(dispatch_get_main_queue(), ^{
                if (granted && !error) {
                    ABAddressBookRevert(_book);
                }
            });
        });
    }
} else {
    _book = ABAddressBookCreate();
} 
```

where `_book` is my ABAddressBookRef.

If my app has been denied access then _book will be NULL and you can't access the address book.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:41:37.683

See my answer here:

[https://stackoverflow.com/a/13671852/341994](https://stackoverflow.com/a/13671852/341994)

ABAddressBookRequestAccessWithCompletion is useless and should be ignored.

*   If you need to know the authorization status, call `ABAddressBookGetAuthorizationStatus`.

*   If the authorization is undetermined (the user has never run this app), just attempt to access the database. This will cause the authorization alert to appear.

*   If the user has authorized or denied access, ABAddressBookRequestAccessWithCompletion does nothing of any value so there's no point calling it.

# .net - 如何调用在 Moq 中作为参数传递的谓词？

> ID：13053977
> 
> 赞同：3
> 
> 时间：2012-10-24T16:56:26.613
> 
> 标签：.net, unit-testing, mocking, moq

我有一个接口，它有一个名为：

```
IEnumerable<string> GetFilesInADirectoryWhere(
     string directory, 
     string wildcard, 
     Predicate<string> filter); 
```

我想要这种方法`Setup`并实际**调用**. `filter`所以我这样声明：

```
myMock.Setup( x => x.GetFilesInADirectoryWhere(
    @"My Folder", 
    @"FooFile*.*", 
    It.IsAny<Predicate<string>>()))

    .Returns((Predicate<string> filter) =>  
        cannedFileNames.Where(filename=>filter(filename))); 
```

这可以编译，但是当调用这个模拟方法时，我得到以下运行时异常：

```
 SetUp : System.Reflection.TargetParameterCountException : Parameter count mismatch.
       at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
       at System.Delegate.DynamicInvokeImpl(Object[] args)
       at Moq.Extensions.InvokePreserveStack(Delegate del, Object[] args)
       at Moq.MethodCallReturn`2.Execute(ICallContext call)
       at Moq.Interceptor.Intercept(ICallContext invocation)
       at Moq.Proxy.CastleProxyFactory.Interceptor.Intercept(IInvocation invocation)
       at Castle.DynamicProxy.AbstractInvocation.Proceed()
       at Castle.Proxies.IDiskProxy.GetFilesInADirectoryWhere(String directory, String filter, Predicate`1 predicate) 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:26:54.553

你调用了错误的`Returns`重载。应该：

*   `Returns<T1,T2,T3>(Func<T1,T2,T3,IEnumerable<string>>)`- 匹配您方法的签名

设置应如下所示：

```
myMock
    .Setup(m => m.GetFilesInADirectoryWhere(
        @"My Folder", 
        @"FooFile*.*", 
        It.IsAny<Predicate<string>>())
    )
    .Returns<string, string, Predicate<string>>((dir, wildcard, filter) =>  
        cannedFileNames.Where(filename => filter(filename))
    ); 
```

# javascript - JS 不断更新网格中的 CSS 背景颜色 - 关闭？

> ID：13053978
> 
> 赞同：0
> 
> 时间：2012-10-24T16:56:29.150
> 
> 标签：javascript, css, closures

我有一个盒子网格（3x2），我想在一个循环中更新它，因为它有大量 rgb 值表示随时间变化的颜色。数组的一个元素的示例如下所示：

[[99.58221354166666, 99.20004050925925, 100.86330150462963], [59.431727430555554, 58.59181712962963, 61.26002314814815], [59.824817708333335, 58.83816550925926, 61.85647280092593], [93.02857349537037, 95.04584201388889, 92.13913194444444], [48.46075810185185, 50.74021701388889, 46.878373842592595], [84.57517939814815, 173.51900462962962, 62.35618923611111]]

下面的代码完美地处理了 rgb 值和所有内容。数组的每个元素对应于 3x2 网格中的一个“盒子”。不幸的是，我的循环似乎有一个关闭问题，我无法弄清楚。它仅在最后一次迭代时更新网格的颜色。所以我重写了它来存储一个函数列表，然后调用它们，但我不知道它是否只是执行得太快以至于我看不到它，或者它是否真的失败了。如果我添加一个睡眠，脚本将挂起，无论它挂在哪里，它都会更新那一刻，直到我单击继续脚本。之后它会向我显示最后一次更新（所以我已经从看到最后一次更新到看到两个带有明显挂起的脚本）。

```
c1 = $("#cell1");
c2 = $("#cell2");
c3 = $("#cell3");
c4 = $("#cell4");
c5 = $("#cell5");
c6 = $("#cell6");
var cells = [c1, c2, c3, c4, c5, c6];

$(document).ready(function() {
    $.each(test, function(iGrid, grid) {
        var ary_rgb = [];
        var property = "background";
        var updates = [];
        $.each(grid, function (iBox, box) {
            var r = Math.floor(box[0]).toString();
            var g = Math.floor(box[1]).toString();
            var b = Math.floor(box[2]).toString();
            var rgb = 'rgb(' + r + ',' + g + ',' + b + ')';
            updates[iBox] = function () { return cells[iBox].css(property, rgb); };
        });

        for (var i=0; i<updates.length;i++) {
            updates[i]();
        }
    });
}); 
```

我确实花了几个小时试图让这个工作和阅读 SO 和其他关于关闭的网站，但我只是看不出我做错了什么。如果需要，我可以发布其余的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:34:27.540

我太累/太笨了，无法理解您的示例并弄清楚它与闭包的关系，但我可以说它比您所说的要大得多，也复杂得多。除了由 jQuery 函数创建的闭包之外，您不需要为此任务使用闭包。另外，回复：

> 它仅在最后一次迭代时更新网格的颜色

由于您没有使用任何计时功能，因此您没有理由看到多个更新。

这是您所描述内容的一个非常简单的演示：http: [//jsbin.com/unuvuq/2/edit](http://jsbin.com/unuvuq/2/edit)。如果您想在不同时间查看每个更新，请注意使用`setTimeout`- that or is what you need。`setInterval`

下面的演示代码。JS：

```
$(document).ready(function() {

  var colours = [
      "aquamarine",
      "crimson",
      "goldenrod",
      "forestgreen",
      "dodgerblue",
      "orange"];

  $('[id^="cell"]').each(function() {
      var cell = $(this),
          time = 500 * cell.index();
      setTimeout(function() {
          cell.css('background', colours[cell.index()]);
      }, time);
  });

}); 
```

标记：

```
<div class="container">
    <div id="cell1"></div>
    <div id="cell2"></div>
    <div id="cell3"></div>
    <div id="cell4"></div>
    <div id="cell5"></div>
    <div id="cell6"></div>
</div> 
```

CSS：（选择所有任意值只是为了让您查看发生了什么）

```
.container { width: 200px; }

div[id^="cell"] {
  display: inline-block;
  border: 3px solid #000;
  height: 50px;
  width: 50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:16:42.727

如果您说在没有更多 javascript 运行之前这些框不会改变，那么这是预期的行为。在所有 javascript 返回之前，页面不会在视觉上更新。您可以使用 setTimeout 在每次有效迭代后返回控制权。永远不要在 javascript 中休眠（自旋循环），使用定时回调。

```
function runUpdate(update) {
    if (update.length > 0) {
        update[0]();
    }

    if(update.length > 1) {
        setTimeout(function () {
            runUpdate(update.slice(1));
        }, 0);
    }
} 
```

将您的 for 循环替换为`runUpdates(updates);`. 您可以使用 setTimeout 时间参数来更改框更改颜色的速率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:59:57.823

我想这就是你想要的，不是吗？[http://jsfiddle.net/rBLLc/4/](http://jsfiddle.net/rBLLc/4/)

基本上，就像您建议的那样，您的所有更新都在迅速发生，一个接一个，浏览器永远没有机会呈现更改。

（由于未定义，jsfiddle 中还有一个 javascript 错误`updates`）。

`setTimeout`您需要使用链接中所示的方式分隔更新。

# html - 多列式 CSS 布局

> ID：13053983
> 
> 赞同：1
> 
> 时间：2012-10-24T16:56:39.103
> 
> 标签：html, css, css-float

我正在寻找呈现如下链接中所示的多列 CSS 布局。

[http://i.imgur.com/Fhdyi.png](http://i.imgur.com/Fhdyi.png)

这是我正在寻找的那种语法......

```
<div class="container">
  <div id="1">#1</div>
  <div id="2">#2</div>
  <div id="3">#3</div>
     <!-- and so on... -->
</div> 
```

我希望将什么样的 CSS 属性应用于这些编号的 DIV 以使它们像这样显示？DIV 的高度是可变的，但宽度是固定的。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:56:03.660

如何在列中分隔 div？像这样的东西：

```
.container #col1,#col2,#col3,#col4{
float:left;
}
.container #div1,#div2,#div3,#div4,#div5,#div6,#div7{
width:150px;
background:#000;
margin:0 20px 10px 0;
padding:10px;
color:#fff;
} 
```

* * *

```
<div class="container">
<div id="col1">
    <div id="div1">#1</div>
    <div id="div2">#2</div>
</div>
<div id="col2">
    <div id="div3">#3</div>
</div>
<div id="col3">
    <div id="div4">#4</div>
    <div id="div5">#5</div>
    <div id="div6">#6</div>
</div>
<div id="col4">
<div id="div7">#7</div>
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:06:52.530

仅使用 CSS 并仅使用 CSS3 无法很好地完成。

为了回答您发布的问题，这是一个示例：[http ://sickdesigner.com/masonry-css-getting-awesome-with-css3/](http://sickdesigner.com/masonry-css-getting-awesome-with-css3/)

```
div{
-moz-column-count: 3;
-moz-column-gap: 10px;
-webkit-column-count: 3;
-webkit-column-gap: 10px;
column-count: 3;
column-gap: 10px;
width: 480px; }

div a{
    display: inline-block; /* Display inline-block, and absolutely NO FLOATS! */
    margin-bottom: 20px;
    width: 100%; }

<div>
<a href="#">Whatever stuff you want to put in here.</a>
<a href="#">Whatever stuff you want to put in here.</a>
<a href="#">Whatever stuff you want to put in here.</a>
...and so on and so forth ad nauseum.
</div> 
```

这样做的问题是，如果您有很多项目，您会在顶部看到每列的第一个而不是前三个项目。

对于这种布局，jQuery masonry 插件是一个更好的选择：http: [//masonry.desandro.com/](http://masonry.desandro.com/)

还有一个简单的 JS 版本，称为“vanilla masonry” [http://vanilla-masonry.desandro.com/](http://vanilla-masonry.desandro.com/)

这样你的第一个项目就在顶部，它看起来更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:17:24.900

这未经测试，但它可能是您正在寻找的类似的东西：

```
#1{
    height:150px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white;
    float:left;
}

#2{
    height:200px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white;
    float:left;

}

#3{
    height:500px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white;
    clear:both;

}

#4{
    height:50px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white;
    float:left;
}

#5{
    height:100px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white; 
    float:left;

}

#6{
    height:200px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white;
    float:left;
}

#7{
    height:500px;
    width:200px;
    border: 1px, solid, black;
    background-color:black;
    color:white;
    clear:left;
} 
```

# java - Google Cloud Storage - App Engine Java - 创建上传网址

> ID：13053987
> 
> 赞同：1
> 
> 时间：2012-10-24T16:56:45.503
> 
> 标签：java, google-app-engine, google-cloud-storage

我看到有一种方法可以在 python 中简单地创建这样的上传 url

```
upload_url = blobstore.create_upload_url('/upload_handler', gs_bucket_name='my_bucket') 
```

我想做完全相同的事情，但在 Java 中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T17:45:53.047

我想你是在寻找这个[createUploadUrl](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#createUploadUrl%28java.lang.String%29)。

如果您浏览[Blobstore Java API 概述](https://developers.google.com/appengine/docs/java/blobstore/overview)，最后有一个功能齐全的示例，他们使用的是`createUploadUrl()`：

```
String uploadUrl = blobstoreService.createUploadUrl("/upload", UploadOptions.Builder.withGoogleStorageBucketName("my_bucket")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:50:21.553

您需要使用[`googleStorageBucketName`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/UploadOptions#googleStorageBucketName%28java.lang.String%29)UploadOptions 的属性，并使用[`createUploadUrl`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#createUploadUrl%28java.lang.String,%20com.google.appengine.api.blobstore.UploadOptions%29)接收选项的方法。

# javascript - JavaScript 中的 HTML5 文件处理？

> ID：13053994
> 
> 赞同：0
> 
> 时间：2012-10-24T16:56:59.803
> 
> 标签：javascript, html, file-upload

在 JavaScript 中使用哪些技术将文件（ASCII 或二进制）加载到变量（var file = "text";) 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:35:38.773

您想使用新的 HTML5 File API 和 XMLHttpRequest 2。

您可以收听通过文件输入选择的文件或拖放到浏览器的文件。来说说`input[type="file"]`方法吧。

```
<input type="file"> 
```

让我们听听被选中的文件。

```
var input; // let input be our file input
input.onchange = function (e) {
  var files = input.files || [];
  var file = files[0];
  if (file) {
    uploadFile(file);
  }
}; 
```

创建真正的多部分文件上传请求需要的是一个`FormData`对象。此对象是您的 HTTP POST 请求正文的表示。

```
var uploadFile = function (file) {
  var data = new FormData();
  data.append('filename', file);

  // create a HTTP POST request      
  var xhr = new XMLHttpRequest();
  xhr.open('POST', './script.php', true);
  xhr.send(data);

  xhr.onloadend = function () {
    // code to be executed when the upload finishes
  };
}; 
```

您还可以监控上传进度。

```
xhr.upload.onprogress = function (e) {
  var percentage = 100 * e.loaded / e.total;
}; 
```

询问您是否需要任何澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:01:32.300

如果你想使用新的 HTML5 方式，我就是这样做的……请记住，我创建了一个名为 File() 的方法，这不是真正的 HTML5 方法，它是它的包装器……这可能会改变将来要小心（也许重命名）。

HTML：

> ```
>  <html>
>     <body>
>       <input type="file" id="files" name="file"/> 
>       <button onclick="load()">Load File</button><br /><br />
>       <div id="content"></div>
>       <script>
>         function load() {
>           var fileObj = document.getElementById("files");
>           var fp = new File(fileObj);
>           fp.read(callback);
>         }
>         function callback(text) {
>           var content = document.getElementById("content");
>           content.innerHTML = text;
>         }
>       </script>
>     </body>
>   </html> 
> ```

JavaScript：

```
function File(name) {
  this.name = document.getElementById(name) ? document.getElementById(name).files : name.files ? name.files : name;
}

// Reads the file from the browser 
File.prototype.read = function(callback) {
  var files = this.name;
  if (!files.length) {
    alert('Please select a file!?');
    return;
  }
  var file = files[0];
  var reader = new FileReader();
  reader.onloadend = function(evt) {
    if (evt.target.readyState == FileReader.DONE) { // DONE == 2
      callback(evt.target.result);
    }
  };
  var data = file.slice(0, file.size);
  reader.readAsBinaryString(data);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T18:20:17.090

在 PHP 或 Rails（或任何您使用的服务器端）中生成 JavaScript 并包含该文件。

```
<?php
$my_string = file_get_contents('/path/to/file.txt');
?>

<script>
var my_js_file_string = "<?php echo $my_string; ?>";
...
document.write(my_js_file_string);
</script> 
```

# php - 如何停止将文件插入服务器

> ID：13053996
> 
> 赞同：-1
> 
> 时间：2012-10-24T16:57:06.307
> 
> 标签：php, pdo, mysqli

> **可能重复：**
> [文件在被取消之前上传](https://stackoverflow.com/questions/13020459/files-get-uploaded-just-before-they-get-cancelled)

我遇到了取消文件上传的情况。假设发生的是，如果用户单击“取消”按钮，那么它将转到下面的脚本并从服务器中删除文件并从数据库中删除文件的记录：

取消音频.php

```
<?php
session_start();
 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  unlink("AudioFiles/" . $_SESSION['AudioFile']);  //undefined notice

$delete = $mysqli->prepare('DELETE FROM Audio WHERE AudioId = ?'); 
$delete->bind_param("i",$_SESSION['lastAudioID']); 
$delete->execute(); 

$deleteaud = $mysqli->prepare('DELETE FROM Audio_Question WHERE AudioId = ?'); 
$deleteaud->bind_param("i",$_SESSION['lastAudioID']); 
$deleteaud->execute(); 

?> 
```

现在这是我遇到的情况：

如果我清理我的 cookie，这显然意味着我没有文件存储我的 $_SESSION 变量。现在，如果我尝试上传文件（第一个文件）然后取消它，那么我会收到“AudioFile”的未定义索引通知。这很公平，因为显然我没有文件存储在 $_SESSION 变量中。但问题是它没有执行上面代码中的 unlink() 和 DELETE 语句，所以它会显示文件的记录并仍然上传它。

所以发生的事情是，直到我在服务器中有一个文件和一个文件存储在 $_SESSION['AudioFile'] 中之前，它不会从服务器中删除文件，并且会从数据库中删除记录。

所以我的问题是我需要做什么，如果没有文件`$_SESSION['AudioFile']`并且用户上传然后取消文件，我怎样才能阻止它将文件插入服务器并插入数据库记录？

下面是上传文件并将数据插入数据库的代码：

音频上传.php

```
<?php

session_start();

ini_set('display_errors',1); 
error_reporting(E_ALL);
// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$result = 0;

if( file_exists("AudioFiles/".$_FILES['fileAudio']['name'])) {
$parts = explode(".",$_FILES['fileAudio']['name']);
$ext = array_pop($parts);
$base = implode(".",$parts);
$n = 2;

while( file_exists("AudioFiles/".$base."_".$n.".".$ext)) $n++;
$_FILES['fileAudio']['name'] = $base."_".$n.".".$ext;

move_uploaded_file($_FILES["fileAudio"]["tmp_name"],
"AudioFiles/" . $_FILES["fileAudio"]["name"]);
$result = 1;

}
else
{
move_uploaded_file($_FILES["fileAudio"]["tmp_name"],
"AudioFiles/" . $_FILES["fileAudio"]["name"]);
$result = 1;
}

$audiosql = "INSERT INTO Audio (AudioFile) 
VALUES (?)";

if (!$insert = $mysqli->prepare($audiosql)) {
// Handle errors with prepare operation here
}

//Dont pass data directly to bind_param store it in a variable
$insert->bind_param("s",$aud);

//Assign the variable
$aud = 'AudioFiles/'.$_FILES['fileAudio']['name'];

$insert->execute();

if ($insert->errno) {
// Handle query error here
}

$insert->close();

$lastAudioID = $mysqli->insert_id;   

$_SESSION['lastAudioID'] = $lastAudioID; 
$_SESSION['AudioFile'] = $_FILES["fileAudio"]["name"]; 

$audioquestionsql = "INSERT INTO Audio_Question (AudioId, QuestionId)  
VALUES (?, ?)"; 

if (!$insertaudioquestion = $mysqli->prepare($audioquestionsql)) { 
// Handle errors with prepare operation here 
echo "Prepare statement err audioquestion"; 
} 

$qnum = (int)$_POST['numaudio'];

$insertaudioquestion->bind_param("iii",$lastAudioID, $qnum); 

$insertaudioquestion->execute(); 

if ($insertaudioquestion->errno) { 
// Handle query error here 
} 

$insertaudioquestion->close(); 

?> 
```

以下是文件输入的 HTML 表单：

```
<form action='audioupload.php' method='post' enctype='multipart/form-data' target='upload_target_audio' onsubmit='return audioClickHandler(this);' class='audiouploadform' > 

Audio File: <input name='fileAudio' type='file' class='fileAudio' /></label><br/><br/><label class='audiolbl'> 

<input type='submit' name='submitAudioBtn' class='sbtnaudio' value='Upload' /></label>

<input type='hidden' class='numaudio' name='numaudio' value='" + GetFormAudioCount() + "' />

<label><input type='reset' name='audioCancel' class='audioCancel' value='Cancel' /></label>

<iframe class='upload_target_audio' name='upload_target_audio' src='#' style='width:300px;height:300px;border:0px;solid;#fff;'></iframe></form> 
```

最后下面是 jquery 函数，如果用户在文件上传时单击“取消”按钮，它将简单地将 iframe 源更改为“canceaudio.php”：

```
function startAudioUpload(audiouploadform){
$(audiouploadform).find('.audiof1_upload_process').css('visibility','visible');
$(audiouploadform).find('.audiof1_upload_form').css('visibility','hidden');
sourceAudioForm = audiouploadform;

$(audiouploadform).find(".audioCancel").on("click", function(event) {
$('.upload_target_audio').get(0).contentwindow
$("iframe[name='upload_target_audio']").attr("src", "cancelaudio.php");
return stopAudioUpload();
});

return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:10:04.733

为了摆脱你未定义的索引的东西，加上让你的脚本更加健壮，你应该添加错误检查。哪怕是一个简单的

```
if ($_FILES['fileAudio']['error'] === UPLOAD_ERR_OK) {
   ... successful upload ...
} 
```

会减少很多你的问题。现在，您的代码只是假设上传成功，甚至无需检查是否尝试上传事件。

此处定义了各种错误代码：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)