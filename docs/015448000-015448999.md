# StackOverflow 问答 15448000-15448999

# java - 如何在Java中将字符串转换为数字？

> ID：15448002
> 
> 赞同：-6
> 
> 时间：2013-03-16T10:09:23.243
> 
> 标签：java, string, integer, type-conversion

我有一个作为字符串获得的参数

```
String Dept_ID[] = request.getParameterValues("dept_id")) 
```

在jsp中。我必须在类型为数字的数据库中插入字符串

```
@DEPT_ID NUMERIC(10,0)). 
```

如何执行转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:12:33.470

您的代码正在接收一个字符串*数组*。[`Integer.parseInt`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)您可以根据需要使用或将数组中的条目转换为数字[`Long.parseLong`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)。

例如：

```
String Dept_ID[] = request.getParameterValues("dept_id"));
int[] ids = null;
if (Dept_ID != null) {
    ids = new int[Dept_ID.length];
    for (int index = 0; index < Dept_ID.length; ++index) {
        ids[index] = Integer.parseInt(Dept_ID[index]);
    }
} 
```

如果数字使用与 10 不同的基数（数字基数），您可以提供基数作为第二个参数（有关详细信息，请参阅链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:58:22.370

上面的答案是正确的，但它没有考虑当您将字母作为无法转换的输入时会发生什么。如果你问我，你想对那部分使用 try and catch 方法。

类似的东西（假设您使用上面的代码）：

```
String Dept_ID[] = request.getParameterValues("dept_id"));
int[] ids = null;

if (Dept_ID != null) {
    ids = new int[Dept_ID.length];
    for (int index = 0; index < Dept_ID.length; index++) {
        try {
            ids[index] = Integer.parseInt(Dept_ID[index]);
        }
        catch ( NumberFormatException e ) {
            System.out.println("Invalid crap.");
        }
    }
} 
```

另请注意，我将 ++index 部分放在 index++ 的另一边，如果您不这样做，您将一直丢失数组中的第一个索引。

# php - 在非 wordpress 网站上显示 wordpress 页脚

> ID：15448011
> 
> 赞同：2
> 
> 时间：2013-03-16T10:09:59.040
> 
> 标签：php, html, wordpress, echo, footer

我想问一个简单的问题。我有两个网站在同一个域上运行。主页是完整的 HTML 格式，可以通过[http://xyz.com/home](http://xyz.com/home)访问，而对于内页，我已经在同一个域上安装了 wordpress，可以通过访问[http:/访问页面/xyz.com/sample-page](http://xyz.com/sample-page)。现在我在 wordpress 中创建了一个页脚，它正确显示在运行 wordpress 的内页上，但我也想在我的 HTML 页面上显示同样的页脚，它没有运行 wordpress。为此，我在主页的 index.php 文件中添加了以下代码：

```
<footer>
<?php include '../wp-content/themes/metro/footer.php'; ?>
</footer> 
```

这样做现在在主页上向我显示此错误：

```
Fatal error: Call to undefined function get_option() in /homepages/12/d378078258/htdocs/txtimpact-main/wp-content/themes/metro/footer.php on line 1 
```

任何人都可以让我知道如何修改footer.php 文件，以便页脚开始出现在我的主页上。我在互联网上阅读了一个教程，该人告诉将这段代码添加到 footer.php 文件中，但对我来说没有帮助：

```
require( '../my_wordpress_install_root/wp-load.php' ); 
```

这是我的 footer.php 文件包含的代码：

```
<?php $options = get_option('metro'); ?>
    </div><!--#page-->
</div><!--.container-->
</div>
    <footer>
        <div class="container">
            <div class="footer-widgets">
                <?php widgetized_footer(); ?>
                <img style="position:absolute; visibility:show; left: -6px; top: 84px; } " src="http://cms.360ivr.com/wp-content/themes/metro/images/callout-bubble.png" width="22px" />
            </div><!--.footer-widgets-->
        </div><!--.container-->
    <h12><?php mts_copyrights_credit(); ?></h12>
    <div style="float: left; margin-top: 20px; margin-left: 153px;"><font size="2px">Copyright Â© 2006-12 TXTImpact - All Rights Reserved.<br/>Message and Data Rates may apply.<br/>To unsubscribe, text 'STOP' to 27126 or <a href="mailto:support@TXTimpact.com">Contact Support</a>.<br/><a href="http://www.wire2air.com/" target="_blank">Powered by Wire2Air</a><br/><a href="http://nytm.org/made/" target="_blank">Proudly Made In NYC</a></font></div> 
    <div style="margin-right: 83px; margin-top: 91px;"><img src="http://cms.360ivr.com/wp-content/uploads/2013/03/mma1.png" width="450px" align="right" /></div>
    </footer><!--footer-->
<?php mts_footer(); ?>
<?php wp_footer(); ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:34:49.133

您的主页[http://xyz.com/home](http://xyz.com/home)不能使用 WordPress 功能（如果您想要它们，您必须手动包含它们）。我建议您在显示主页时使用 WordPress。WordPress 具有将特定页面显示为主页的设置。

引自[WordPress 法典](http://codex.wordpress.org/Pages)：

> 什么模板用于显示特定页面？WordPress 根据模板层次结构在您的活动 WordPress 主题中查找多个页面模板文件。它找到的第一个将用于显示任何给定的页面。WordPress 将按以下顺序查找文件：

页面选择的“页面模板”

`page.php`

`index.php`

WordPress 模板层次结构还可以自动识别特定的页面或帖子，而无需将它们分配给特定的页面模板文件。如果模板文件名中带有 ID 或 slug 的 Page 是用户创建的，则会自动使用相应的 Page 模板文件。

`page-{id}.php`

`page-{slug}.php`

如果 Page ID 编号为 42，`page-42.php`则自动使用模板文件。如果 Page slug 是“关于”，`page-about.php`则使用模板文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:36:36.963

假设以下文件`http://example.com/connect-wp.php`与 WordPress 根文件 ( ) 位于同一级别`http://example.com/`：

```
<?php
define( 'WP_USE_THEMES', false );
require( './wp-load.php' );

// Optional, maybe necessary for logged in users
// add_filter( 'show_admin_bar', '__return_false' );

include get_stylesheet_directory() . '/footer.php'; 
```

当然，`footer.php`您的自定义文件中出现的内容必须与页脚将创建的 HTML 结构相匹配。

参考：

*   [**`get_stylesheet_directory`**](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory)

*   [常数 WP_USE_THEMES 是干什么用的？](https://wordpress.stackexchange.com/q/12919/12615)

*   [将 WordPress 与您的网站集成](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)

# android - Android 2.3.x ZXing 异常行为

> ID：15448017
> 
> 赞同：0
> 
> 时间：2013-03-16T10:10:24.417
> 
> 标签：android, zxing

我正在开发一个送货服务应用程序，它的功能之一是扫描货运运单上的条形码。我正在`ZXing`为此功能使用库 - 我已在我的应用程序中将 ZXing 作为库项目导入。一切都很好，但我在 Android 2.3.x 上遇到了奇怪的行为 - 设备和模拟器：
1）我有一个`MainActivity` **带有图像背景**（使用`android:background`我的根属性设置`RelativeLayout`） - 单击按钮后，我将启动一个 Intent 进行扫描条码。我得到下一张照片而不是`ViewfinderView`
![在此处输入图像描述](../Images/27f595c80995513515a7b40ce675b293.png)

如您所见 - 空白屏幕，我的背景来自第一个活动和`TextView`来自`CaptureActivity``ZXing`

2）在此之后，我将 MainActivity 的背景更改为**纯色**- 一切都按预期工作。3) 带有 Android 4.x 的设备和 Emu 也运行良好。

谁能解释我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:59:04.040

你的图没有通过。

*这可能是因为您在没有真正理解的情况下复制并粘贴了我们的应用程序。请不要`android/`直接复制，因为您可能会复制对我们有害的东西，例如清单。*

你可能需要澄清更多关于你在做什么。例如，如果您的应用因为您启动了`Intent`. 我最好的猜测是你复制`CaptureActivity`了一个透明的背景，但没有成功地将相机数据放到上面。如果是单独的`Activity`，则`MainActivity`无关紧要。但这与你描述的不符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:34:21.493

通过将背景文件格式从更改`jpg`为`png`. 如果有人有兴趣测试它，我会分享代码。

# c# - 无法解决/理解“重写虚函数仅因调用约定而异”

> ID：15448021
> 
> 赞同：2
> 
> 时间：2013-03-16T10:10:48.963
> 
> 标签：c#, c++, dll

我目前有一个悬而未决的[问题](https://stackoverflow.com/questions/15446855/c-sharp-managed-dll-and-native-c-is-it-possible-to-call-consumer-methods-thr)- 但是在处理它之后我遇到了一个新问题，我在尝试构建它时遇到的错误是：

```
Error   1   error C2695: 'MyEventsSink::OnSomethingHappened': overriding virtual function differs from 'Library::IEventsSink::OnSomethingHappened' only by calling convention   
Error   2   error C2695: 'MyEventsSink::SomeTest': overriding virtual function differs from 'Library::IEventsSink::SomeTest' only by calling convention 
```

我试着对这个错误进行观察，但我无法弄清楚。

这就是我正在做的事情，我有一个托管的 C# dll 类库，它正在被本机 C++ 应用程序使用。C#接口的代码如下，该接口的实现是C++。

C#代码是

```
[ComVisible(true), ClassInterface(ClassInterfaceType.None), Guid("fdb9e334-fae4-4ff5-ab16-d874a910ec3c")]
    public class IEventsSinkImpl : IEventsSink
    {
        public void OnSomethingHappened()
        {
            //Doesnt matter what goes on here - atleast for now
        }

        public void SomeTest(IEventsSink snk)
        {
            //When this is called - it will call the C++ code
            snk.OnSomethingHappened();
        }
    }//end method 
```

它在 C++ 中的实现代码是

```
class MyEventsSink : public Library::IEventsSink
{
public:
    MyEventsSink() {}
    ~MyEventsSink() {}

    virtual HRESULT OnSomethingHappened()
    {
        std::cout << "Incredible - it worked";
    }

    virtual HRESULT SomeTest(IEventsSink* snk)
    {
        //Doesnt matter this wont be called
    }

}; 
```

显然在构建过程中 VS2010 抱怨上述错误。关于如何解决这些错误的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:16:25.870

尝试使用`__stdcall`调用约定：

```
virtual HRESULT __stdcall OnSomethingHappened() 
```

通常，C++ 使用`__cdecl`调用约定，调用者在调用后从堆栈中删除参数。包括 COM 在内的大多数 Windows API 函数都使用`__stdcall`被调用者从堆栈中删除参数的位置。

显然，当你重写一个虚函数时，两个函数的调用约定必须相同，因为函数调用是在运行时解析的。

# c# - 当我在另一个类中创建类的对象时出现堆栈溢出错误

> ID：15448024
> 
> 赞同：-9
> 
> 时间：2013-03-16T10:11:07.097
> 
> 标签：c#

```
 public bool update(registrationcommon objreg)
    {
        Userdl objuser = new Userdl();
        try
        {
          return update(objreg);

        }
        catch (Exception e)
        {
            throw e;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:13:28.930

嗯，是的，它会的。您的方法无条件地调用自身，假设它`Userdl`是`registrationcommon`. （顺便说一句，你应该考虑改进你所有的名字。）

你怎么期望它终止？大概你打算调用一个*不同* `update`的方法 - 所以想想你想调用哪个方法，以及你应该如何调用它。它是不同类中的方法吗？同一类中的方法但具有不同的参数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:13:05.250

这是因为您在`update`不停地递归调用函数：

```
public bool update(registrationcommon objreg)
{
    // ...
    return update(objreg);
    // ...
} 
```

你必须在某个时候终止它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:13:35.600

我认为，您在没有退出条件的情况下调用递归方法 - 这是一个问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T10:16:06.590

每个`update`呼叫`update`，哪个呼叫`update`，哪个...

每次调用方法时，您的当前位置都会被压入堆栈。在正常情况下，当您从方法调用返回时，您会从堆栈中“弹出”并回到原来的位置。但是，如果您在示例中的循环中执行此操作，最终堆栈会溢出。因此，术语“堆栈溢出”。

# java - Swing jfilechooser 在传递 null 后阻塞其他帧

> ID：15448025
> 
> 赞同：-1
> 
> 时间：2013-03-16T10:11:07.560
> 
> 标签：java, swing

我希望我的 jfilechooser 在不阻塞父级的情况下显示，但我尝试了一切，但它仍然阻塞父级。任何解决方案....

```
public class main_class {

    public static void main(String[] args) {
        JFrame parent_frame = new JFrame("PARENT");

        if (parent_frame != null) {
            parent_frame.setBounds(50, 50, 500, 500);
            parent_frame.setVisible(true);
            parent_frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JFileChooser chooser = new JFileChooser();
            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            int returnVal = chooser.showDialog(null, "Ok");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:19:40.833

默认情况下，`showDialog`将使用模式对话框。

`JFileChooser`只是基于 a `JComponent`，所以，只要您不介意您的代码不会阻塞，您可以`JFileChooser`自己添加到框架/对话框中。

# android - 在屏幕上绘制而不显示颜色，并保存图像

> ID：15448026
> 
> 赞同：0
> 
> 时间：2013-03-16T10:11:21.383
> 
> 标签：android

我需要在屏幕上绘制，捕捉它并在另一个活动中显示，但我不需要显示它正在绘制的油漆颜色，即只有手指会移动，没有人能够看到它在绘制什么。

不知道如何在这种情况下取​​得进展。我做过这样的画，但这是正常的，你会看到有人在画什么：

```
 class SignatureView extends View {

      private static final float STROKE_WIDTH = 5f;

      private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

      private Paint paint = new Paint();
      private Path path = new Path();

      private float lastTouchX;
      private float lastTouchY;
      private final RectF dirtyRect = new RectF();

      public SignatureView(Context context) {
        super(context);

        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(STROKE_WIDTH);
      }

      public void clear() {

        path.reset();
        AddView();

        invalidate();
      }

      @Override
      protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
      }

      @Override
      public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            lastTouchX = eventX;
            lastTouchY = eventY;
            return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            resetDirtyRect(eventX, eventY);

            int historySize = event.getHistorySize();
            for (int i = 0; i < historySize; i++) {
              float historicalX = event.getHistoricalX(i);
              float historicalY = event.getHistoricalY(i);
              expandDirtyRect(historicalX, historicalY);
              path.lineTo(historicalX, historicalY);
            }

            path.lineTo(eventX, eventY);
            break;

          default:
            debug("Ignored touch event: " + event.toString());
            return false;
        }

        invalidate(
            (int) (dirtyRect.left - HALF_STROKE_WIDTH),
            (int) (dirtyRect.top - HALF_STROKE_WIDTH),
            (int) (dirtyRect.right + HALF_STROKE_WIDTH),
            (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

        lastTouchX = eventX;
        lastTouchY = eventY;

        return true;
      }

      private void expandDirtyRect(float historicalX, float historicalY) {
        if (historicalX < dirtyRect.left) {
          dirtyRect.left = historicalX;
        } else if (historicalX > dirtyRect.right) {
          dirtyRect.right = historicalX;
        }
        if (historicalY < dirtyRect.top) {
          dirtyRect.top = historicalY;
        } else if (historicalY > dirtyRect.bottom) {
          dirtyRect.bottom = historicalY;
        }
      }

      private void resetDirtyRect(float eventX, float eventY) {

        dirtyRect.left = Math.min(lastTouchX, eventX);
        dirtyRect.right = Math.max(lastTouchX, eventX);
        dirtyRect.top = Math.min(lastTouchY, eventY);
        dirtyRect.bottom = Math.max(lastTouchY, eventY);
      }
    } 
```

甚至尝试将油漆 alpha 设置为 0。但没有用它设置透明图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:45:25.580

尝试以下更改

```
paint.setColor(Color.TRANSPARENT); 
```

# c# - 读取 gridview 单元格值和文本

> ID：15448034
> 
> 赞同：1
> 
> 时间：2013-03-16T10:12:17.293
> 
> 标签：c#, asp.net, c#-4.0

我正在使用下面的代码来读取 gridview 控件的值或文本。但它返回空值。我查不出来。但是gridview有一些记录的价值。请帮我解决这个问题。

```
 GridViewRow row = null;
 for (int i = 0; i < grd.Rows.Count; i++)
 {
      row = grd.Rows[i];
      HiddenField file_id = (HiddenField)row.FindControl("FLD_ID");
      Label pack_name = (Label)row.FindControl("FLD_NAME");
      string text = file_id.Value;
      bool isChecked = ((CheckBox)row.FindControl("chkSelect")).Checked;

      if (isChecked)
      {
           //Here its comming
      }
  } 
```

我的部分gridview代码在这里

```
 <asp:GridView ID="grd" runat="server" BackColor="#CCCCCC" BorderColor="#93afba"
                                    BorderStyle="Solid" BorderWidth="1px" CellPadding="4" AllowPaging="True" AutoGenerateColumns="False"
                                    ShowHeaderWhenEmpty="True" PageSize="50" Width="100%" CellSpacing="2" ForeColor="#93afba"
                                    Font-Size="14px">
                                    <Columns>
                                        <asp:TemplateField>
                                            <HeaderTemplate>
                                                <%--<asp:CheckBox ID="chkall" runat="server" OnChange="checkAll();" />--%>
                                                <input id="Checkbox2" type="checkbox" onclick="CheckAll(this)" runat="server" />
                                            </HeaderTemplate>
                                            <ItemTemplate>
                                                <asp:CheckBox ID="chkSelect" runat="server" />
                                            </ItemTemplate>
                                            <ItemStyle Width="20px" />
                                        </asp:TemplateField>
                                        <asp:TemplateField HeaderText="FLD_ID" Visible="false">
                                            <ItemTemplate>
                                                <asp:HiddenField ID="lbl_id" runat="server" Value='<%#Bind("FLD_ID") %>' />
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                          <asp:TemplateField HeaderText="NAME">
                                            <ItemTemplate>
                                                <asp:Label ID="lbl_packname" runat="server" Text='<%#Bind("FLD_NAME") %>' ></asp:Label>
                                            </ItemTemplate>
                                        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:31:09.880

你的代码很好。

如果您在页面加载时绑定gridview，请确保您的代码如下块

```
if (!IsPostBack)
            {
                //code to bind gridview
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:43:16.217

> 将代码更改为并检查：

```
for (int i = 0; i < grd_proforma_bill.Rows.Count; i++)  
{ 
  HiddenField file_id = (HiddenField)grd_proforma_bill.Rows[i].FindControl("lbl_id");  
  Label pack_name = (Label)grd_proforma_bill.Rows[i].FindControl("lbl_packname");  
  string text = file_id.Value;  
  CheckBox cb = (CheckBox)grd_proforma_bill.Rows[i].FindControl("Checkbox2"); 
  bool isChecked = cb.Checked;

  if (isChecked)  
  {  
       //Here its comming  
  }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:18:04.143

我想你想找到***Checkbox2***并且你正在寻找***chkSelect***

请更换这个

```
bool isChecked = ((CheckBox)row.FindControl("chkSelect")).Checked; 
```

和

```
bool isChecked = ((System.Web.UI.HtmlControls.HtmlInputCheckBox)grd_proforma_bill.HeaderRow.FindControl("Checkbox2")).Checked; 
```

# jquery - 删除标题和内容 div 之间的空白

> ID：15448037
> 
> 赞同：-4
> 
> 时间：2013-03-16T10:12:38.890
> 
> 标签：jquery, css, jquery-ui, accordion

我使用 jquery 手风琴来构建我的列表，但我的问题是“h3 和内容之间的空白”。我在 h3 中使用了 css 边距，但效果不好，任何解决方案或资源都会有所帮助。

这是我的代码：

css 文件：

```
#accordion h3{

   background: url("<?php echo $baseUrl; ?>/images/cat-title-closed.png") no-repeat scroll center center transparent;
    color: #666666;
    font-family: DroidKufi-bold;
    font-size: 18px;
    height: 36px;
    text-shadow: 0 0 0 gray;
    width: 724px;
    padding-right: 9px;

    position : relative;
    top : -Npx;

   }

  #accordion h3.ui-state-active {
   background: url("<?php echo $baseUrl; ?>/images/cat-title-open.png") no-repeat scroll center center transparent;
    color: #CC0000;
    font-family: DroidKufi-bold;
    font-size: 18px;
    height: 36px;

    text-shadow: 0 0 0 gray;
    width: 724px;
}

   #accordion2 h3{

    background: url("<?php echo $baseUrl; ?>/images/course-title-closed.png") no-repeat scroll center center transparent;
    color: #666666;
    font-family: DroidKufi-regular;
    font-size: 14px;
    height: 28px;

    text-shadow: 0 0 0 gray;
    width: 706px;

   }

   #accordion2 h3.ui-state-active {
   background: url("<?php echo $baseUrl; ?>/images/course-title-open.png") no-repeat scroll center center transparent;
    color: #CC0000;
    font-family: DroidKufi-bold;
    font-size: 14px;
    height: 28px;

    text-shadow: 0 0 0 gray;
    width: 706px;
} 
```

.php 文件：

```
.....
<script type="text/javascript">
    $(document).ready(function(){

        $("#accordion #accordion2").accordion({

             collapsible: true, active: true,
            autoHeight: false,

        });

   /////////// end 
    });

....

 <!--  Start print events realted to courent trainer  -->
<?php

echo "<div id='accordion'>
    <h3><span lang='ar-sy'>الجدول التدريبي</span></h3>

    <div >";

   foreach($events as $valuec){
      $course=$valuec->course->name_ar;
        $intro=strip_tags( substr($valuec->course->intro,0,235));
   $time=$valuec->course->t_time;
   $money=$valuec->course->price;
    echo "<div id='accordion2'>
                <h3><span class='title' lang='ar-sy'>$course</span></h3>

                <div>
                <p>
        <table border='0' width='100%' cellspacing='0' cellpadding='0' class='course_accordion'>
                        <tr>
                            <td class='course-img'>
                            <img border='0' src='../images/course-img.jpg' width='200' height='135'></td>
                            <td valign='top'>
                            <table border='0' width='100%' cellspacing='0' cellpadding='0'>
                                <tr>
                                    <td class='course-brief'>
                                    <p align='justify'>
                                     $intro ....
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    <table border='0' width='100%' cellspacing='0' cellpadding='0'>
                                        <tr>
                                            <td class='course-price-time'>$time ساعة
                                            | $money دولار</td>
                                            <td>
                                            <div class='reg-now'>";
                                             echo CHtml::link('مزيد من المعلومات',array('site/coursedetalis','id'=>$valuec->course_id));

                                                 echo "</div>
                                            <div class='reg-now'>";

     echo CHtml::link('التسجيل',array('site/cregister','event_id'=>$valuec->event_id));                                          

                                            echo "
                                            </div>
                                            </td>
                                        </tr>
                                    </table>
                                    </td>
                                </tr>
                            </table>
                            </td>
                        </tr>
                            </table>
</p>
</div>
</div>
";
} 
```

截屏： ![手风琴](../Images/53bf3f932aab330c14f16f66cf53c2dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:34:52.947

如果没有 jsfiddle，要想了解导致空间的原因就有点太多了。除此之外，我强烈建议您尝试使用 Firebug 或 Chrome 中的开发人员工具 - 加载页面并使用 CSS/Layout 选项卡（在 chrome 中称为 Metrics）并在 html 周围单击有问题的元素。Firebug 尤其擅长使用颜色编码填充、边距和您选择的整个框的轮廓。

这应该可以帮助您找到空间是什么，甚至可能如何修复它。

# jsf-2 - JSF2.0 值在提交表单上无效

> ID：15448046
> 
> 赞同：0
> 
> 时间：2013-03-16T10:13:09.233
> 
> 标签：jsf-2, richfaces, jboss7.x

我在 JBOSS 7.1.0.Final 上运行带有 Java 6 代码的 JSF2.0。这是我的页面的代码：

```
 <!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:a4j="http://richfaces.org/a4j"
    template="layout/template.xhtml">

    <ui:define name="body">

        <h:form id="quizform">
            <rich:panel>
                <f:facet name="header">Quiz Details</f:facet>

                <a4j:repeat value="#{quizHome.mcqs}" var="_mcq" rowKeyVar="idx">
                    <s:decorate template="layout/display.xhtml">
                        <h:outputText value="#{idx+1}.#{_mcq.questionText}"/>
                        <h:selectOneRadio id="optionId-#{idx}" immediate="true" value="#{answerBean.optionId}" valueChangeListener="#{answerBean.selectAnswerLsnr}">
                            <s:selectItems value="#{_mcq.mcqOptions}" var="opt" label="#{opt.optionText}" itemValue="#{opt.id}" />
                         </h:selectOneRadio>
                    </s:decorate>
                </a4j:repeat>   

                <div style="clear:both"/>
            </rich:panel>

            <div class="actionButtons">
                <h:commandButton value="Submit Response" action="#{answerBean.findUserAnswer}" />
                <h:commandButton value="Reset" type="reset" />
                <s:button view="/StartQuiz.xhtml" id="startquiz" value="Restart Quiz"/>
            </div>
        </h:form>
    </ui:define>

</ui:composition> 
```

该页面使用来自数据库的正确值呈现。但是，在提交表单时，我在浏览器中收到以下消息：

值无效。

我究竟做错了什么？感谢您的建议。

# c++ - Google 测试中的 BOOST_CHECK_EQUAL_COLLECTIONS

> ID：15448047
> 
> 赞同：0
> 
> 时间：2013-03-16T10:13:18.717
> 
> 标签：c++, unit-testing, googletest, boost-test

我一直试图在[Google C++ 测试框架/gtest](https://code.google.com/p/googletest/wiki/V1_6_AdvancedGuide)中找到一个断言，它等同于[Boost Test Library中的](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/utf/index.html)[BOOST_CHECK_EQUAL_COLLECTIONS](http://www.boost.org/doc/libs/1_31_0/libs/test/doc/components/test_tools/reference/BOOST_CHECK_EQUAL_COLLECTIONS.html)断言。

然而; 没有成功。所以我的问题有两个：

1.  [gtest](https://code.google.com/p/googletest/wiki/V1_6_AdvancedGuide)是否有等效的断言？
2.  如果不是：如何在[gtest](https://code.google.com/p/googletest/wiki/V1_6_AdvancedGuide)中断言容器内容？

编辑（稍作修改的答案）：

```
#include <iostream>

template<typename LeftIter, typename RightIter>
::testing::AssertionResult CheckEqualCollections(LeftIter left_begin,
                                                 LeftIter left_end,
                                                 RightIter right_begin)
{
    std::stringstream message;
    std::size_t index(0);
    bool equal(true);

    for(;left_begin != left_end; left_begin++, right_begin++) {
        if (*left_begin != *right_begin) {
            equal = false;
            message << "\n  Mismatch in position " << index << ": " << *left_begin << " != " <<  *right_begin;
        }
        ++index;
    }
    if (message.str().size()) {
        message << "\n";
    }
    return equal ? ::testing::AssertionSuccess() :
                   ::testing::AssertionFailure() << message.str();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:59:17.517

正如 Alex 所指出的，gtest 有一个名为 Google Mock 的姊妹项目，它具有比较两个容器的出色工具：

```
EXPECT_THAT(actual, ContainerEq(expected));
// ElementsAre accepts up to ten parameters.
EXPECT_THAT(actual, ElementsAre(a, b, c));
EXPECT_THAT(actual, ElementsAreArray(array)); 
```

您可以在[Google Mock 的 wiki](https://code.google.com/p/googlemock/wiki/CheatSheet#Container_Matchers)中找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:37:53.970

我不知道完全等效的 gtest 断言。但是，以下函数应该提供类似的功能：

```
template<typename LeftIter, typename RightIter>
::testing::AssertionResult CheckEqualCollections(LeftIter left_begin,
                                                 LeftIter left_end,
                                                 RightIter right_begin) {
  bool equal(true);
  std::string message;
  std::size_t index(0);
  while (left_begin != left_end) {
    if (*left_begin++ != *right_begin++) {
      equal = false;
      message += "\n\tMismatch at index " + std::to_string(index);
    }
    ++index;
  }
  if (message.size())
    message += "\n\t";
  return equal ? ::testing::AssertionSuccess() :
                 ::testing::AssertionFailure() << message;
} 
```

关于[使用返回 an 的函数`AssertionResult`](https://code.google.com/p/googletest/wiki/V1_6_AdvancedGuide#Using_a_Function_That_Returns_an_AssertionResult)的部分提供了有关如何使用它的完整详细信息，但它可能类似于：

```
EXPECT_TRUE(CheckEqualCollections(collection1.begin(),
                                  collection1.end(),
                                  collection2.begin())); 
```

# linux - 在 linux 的接口上获取传入/传出带宽速度的快照？

> ID：15448057
> 
> 赞同：0
> 
> 时间：2013-03-16T10:13:50.837
> 
> 标签：linux, bash, bandwidth, usage-statistics, pooling

我们想知道如何快速获取 3 秒快照，了解 Linux 中特定接口上的带宽消耗速度有多快？

我们有一些网络服务，我们想根据给定时刻使用的传入/传出带宽委托给各种后端。

我们的后端是用 PHP 编写的，但理想情况下我们可以通过 CLI 运行（例如：我们可以在 php 中执行的 linux 命令行应用程序等）。一旦我们在 php 中获得了信息，我们就可以从那里获取它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:24:27.087

作为第一个，来自 Mat 的快速评论提到......

我忽略了右侧的相关部分，因此......非常相关，已经发布的答案：

[使用 PHP 获取 Linux 中当前的带宽使用情况](https://stackoverflow.com/questions/4066029/get-the-current-bandwidth-use-in-linux-with-php)

# javascript - 在 JS 对象中异步加载数据

> ID：15448058
> 
> 赞同：1
> 
> 时间：2013-03-16T10:14:35.733
> 
> 标签：javascript, ajax, json, dojo

我目前正在为我的网上商店应用程序编写一个 JS 类，以访问存储在服务器上的产品信息。信息应异步加载。为此，我使用`dojo.xhrPost()`. 我想为这个类重写一个函数，调用`getProductName(productId:int):String`它返回给定产品 ID 的产品名称。该函数使用实习生`dojo.xhrPost()`。但是由于我必须将新函数传递给加载和错误，我应该返回加载的产品名称`dojo.xhrPost()`吗？

这个函数的使用：其他JS函数调用这个来加载产品名称来更新购物车网页，而不需要重新加载整个页面。返回的数据采用 JSON 格式，因为传输了一些附加信息以进行错误处理（客户端函数必须知道服务器端是否发生任何错误）。

该函数的代码`getProductName(productId:int)`：

```
 function getProductName(productId) {
         dojo.xhrPost({
            url: '/shop/dataProduct.php',
            handleAs: 'json',
            content: {productId:productId},
            load: function(response, ioArgs) {
                 if (!response.error) {
                    // here I would like to return response.data to the caller of myObj.getProductName(productId)
                 } else {
                    // here I would like to return "error" to the caller of myObj.getProductName(productId)
                 }
                 return response;
            },
            error: function(response, ioArgs) {
                // here I would like to return "error" to the caller of myObj.getProductName(productId)
                return response;
            }
         });
      } 
```

用法：

```
 var productName = myObj.getProductName(5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:51:14.863

以下代码行的问题在于它假设产品名称的检索是同步的。但是您正在进行 ajax 调用以获取名称，因此代码是异步的。

```
var productName = myObj.getProductName(5); 
```

您需要使用`dojo/Deferred`来处理异步调用。

```
function getProductName(productId) {

     var d = new dojo.Deferred();

     dojo.xhrPost({
        url: '/shop/dataProduct.php',
        handleAs: 'json',
        content: {productId:productId},
        load: function(response, ioArgs) {
             if (!response.error) {
                var productName = ???;
                d.resolve(productName);
             } else {
                d.reject(response.error);
             }
        },
        error: function(err) {
            d.reject(err);
        }
     });

     return d;
} 
```

用法：

```
getProductName(1).then(
  function(productName) {
     // do something with product name

  }, function(error) {
     // handle error
  }); 
```

[http://dojotoolkit.org/reference-guide/1.8/dojo/Deferred.html](http://dojotoolkit.org/reference-guide/1.8/dojo/Deferred.html)

# python - Python - 模仿 jQuery getter 和 setter 的装饰器

> ID：15448062
> 
> 赞同：0
> 
> 时间：2013-03-16T10:15:32.887
> 
> 标签：python, decorator

有没有办法知道一个方法所属的类。在下面的代码中，我想构建一个装饰器，它可以调用命名的方法`get_f_name`或者 `set_f_name`函数`f`是否没有参数。这个想法是构建一个模仿 jQuery 的 getter-setter 语法的装饰器。

为此，我必须知道函数 f 来自哪个类。

```
def jqueryize(f):
#    ????

class Test():
    def __init__(self):
        self.string      = "A little text..."
        self.dictionnary = {
            'key_1': 12345,
            'key_2': [1, 2, 3, 4, 5]
        }
        self.boolean = True

    @jqueryize
    def data(
        self,
        string      = None,
        dictionnary = None,
        boolean     = None
    ):
        ...

    def set_data(
        self,
        string,
        dictionnary,
        boolean
    ):
        ...

    def get_data(self):
        print(
            self.string,
            self.dictionnary,
            self.boolean,
            sep = "\n"
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:29:46.500

在`jqueryize`运行时，`Test`该类不存在，`data`只是一个普通函数。做你想做的事情的一种方法是使用两个装饰器 - 一个用于方法，它只是通过在函数上设置一个属性来标记要被 jqueryized 的方法，然后是一个类装饰器，它在类中找到所有标记的方法和进行实际的转换。使这项工作起作用的是类装饰器在创建类之后执行的事实。

您也可以使用元类获得相同的结果。这实现起来更加繁琐，但是您可以避免必须装饰每个具有装饰方法的类，只要它们将执行繁重工作的元类的实例子类化即可。

# c++ - OpenGL 显示白色纹理

> ID：15448068
> 
> 赞同：1
> 
> 时间：2013-03-16T10:16:45.683
> 
> 标签：c++, opengl

我无法使用 OpenGL 和 C++ 显示纹理。我正在从 RGB Raw 文件加载纹理，将其绑定到纹理，但是当我尝试在四边形上显示纹理时，纹理是白色的。我正在使用 glGetError 并且它没有捕获任何错误。这是我的代码：

```
#include <iostream>
#include <windows.h>       // Standard header for MS Windows applications
#include <GL/gl.h>         // Open Graphics Library (OpenGL) header
#include <GL/glut.h>       // The GL Utility Toolkit (GLUT) Header
using namespace std;

typedef struct {
    int width;
    int height;
    char* title;
    float field_of_view_angle;
    float z_near;
    float z_far;
} glutWindow;
glutWindow win;
float rotation, distance1;
bool light=TRUE;
bool trans=FALSE;
GLuint tex;

void drawFlatFace(float size)
{
    glBegin(GL_QUADS);
        glTexCoord2f (0, 0);
        glVertex3f(-size, -2*size, size);
        glTexCoord2f (1.0, 0);
        glVertex3f(size, -2*size, size);
        glTexCoord2f (1.0, 1.0);
        glVertex3f(size, 2*size, size);
        glTexCoord2f (0, 1.0);
        glVertex3f(-size, 2*size, size);
    glEnd();
}

void drawBlock(float size){
    glColor3f(1.0f,1.0f,1.0f);
    glPushMatrix();
        drawFlatFace (size);
        glRotatef (90, 0, 1, 0);
        drawFlatFace (size);
        glRotatef (90, 0, 1, 0);
        drawFlatFace (size);
        glRotatef (90, 0, 1, 0);
        drawFlatFace (size);
    glPopMatrix();
}

GLuint loadTexture(const char * filename) {
    GLuint text[1];
    GLubyte* bits = new GLubyte[512*256*3];
    FILE *file;
    fopen_s(&file,filename,"rb");
    fread(&bits,(512*256*3),1,file);
    fclose(file);
    glGenTextures(1,&text[0]); 
    glBindTexture(GL_TEXTURE_2D,text[0]);
    glTexEnvf(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_MODULATE);
    glTexImage2D(GL_TEXTURE_2D, 0, 3,256,512,0,GL_RGB,GL_UNSIGNED_BYTE,bits);
    free(bits);
    return text[0];
}

void display() 
{
    GLenum err;
    err = glGetError();
    if (err != GL_NO_ERROR)
    {
        cerr << "OpenGL error: " << gluErrorString(err) << endl;
    }

    tex=loadTexture("tex.raw");
    glBindTexture(GL_TEXTURE_2D,tex);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);          // Clear Screen and Depth Buffer
    glLoadIdentity();
    gluLookAt( 10+distance1 ,1.4,0, 0,0,0, 0,1,0);                    // Define a viewing transformation
    glRotatef(rotation, 0.f, 1.f, 0.f);
    drawBlock(3);
    if (light)  glEnable(GL_LIGHTING);      // Enable Lighting
    else glDisable(GL_LIGHTING);      // Disable Lighting
    if (trans) glEnable (GL_BLEND);  // Enable Transparency
    else glDisable(GL_BLEND);      // Disable Transparency
    glutSwapBuffers();
}

void initialize () 
{
    glMatrixMode(GL_PROJECTION);                                                // select projection matrix
    glViewport(0, 0, win.width, win.height);                                    // set the viewport
    glLoadIdentity();                                                           // reset projection matrix
    GLfloat aspect = (GLfloat) win.width / win.height;
    gluPerspective(win.field_of_view_angle, aspect, win.z_near, win.z_far);     // set up a perspective projection matrix
    glMatrixMode(GL_MODELVIEW);                                                 // specify which matrix is the current matrix
    glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST );                        // specify implementation-specific hints
    GLfloat amb_light[] = { 0.3, 0.3, 0.3, 1.0 };
    GLfloat diffuse[] = { 0.4, 0.4, 0.4, 1.0 };
    GLfloat specular[] = { 0.5, 0.5, 0.5, 1.0 };
    glLightModelfv( GL_LIGHT_MODEL_AMBIENT, amb_light );
    glLightfv( GL_LIGHT0, GL_SPECULAR, specular );
    glLightfv( GL_LIGHT0, GL_DIFFUSE, diffuse );
    GLfloat light_position[] = { 1.0, 1.0, 0, 0.0 };
    glLightfv(GL_LIGHT0, GL_POSITION, light_position);
    glEnable( GL_LIGHT0 );
    glEnable( GL_COLOR_MATERIAL );
    glEnable( GL_LIGHTING );
    //glLightModeli( GL_LIGHT_MODEL_TWO_SIDE, GL_FALSE );

    glEnable(GL_TEXTURE_2D);                        // Enable Texture Mapping
    glShadeModel(GL_SMOOTH);                        // Enable Smooth Shading
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);                   // Black Background
    glClearDepth(1.0f);                         // Depth Buffer Setup
    glEnable(GL_DEPTH_TEST);                        // Enables Depth Testing
    glDepthFunc(GL_LEQUAL);                         // The Type Of Depth Testing To Do
    glTexParameteri( GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_LINEAR);
}

void keyboard ( int key, int mousePositionX, int mousePositionY )       
{ 
    switch ( key ) 
  {

    case GLUT_KEY_DOWN:
        if (distance1<9){
        distance1=distance1+.3;
        }
        break;      

    case GLUT_KEY_UP:
        if (distance1>-9){
        distance1=distance1-.3;
        }
        break;      

    case GLUT_KEY_LEFT:
        rotation=rotation-2;
        break;      

    case GLUT_KEY_RIGHT:
        rotation=rotation+2;
        break; 

    case GLUT_KEY_PAGE_UP:
        light=TRUE;
        break; 

    case GLUT_KEY_PAGE_DOWN:
        light=FALSE;
        break; 

    case GLUT_KEY_HOME:
        trans=TRUE;
        break; 

    case GLUT_KEY_END:
        trans=FALSE;
        break; 

    default:      
      break;
  }
}

int main(int argc, char **argv) 
{
    // set window values
    win.width = 800;
    win.height = 600;
    win.title = "Test Texture";
    win.field_of_view_angle = 45;
    win.z_near = 1.0f;
    win.z_far = 500.0f;

    // initialize and run program
    glutInit(&argc, argv);                                      // GLUT initialization
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH );  // Display Mode
    glutInitWindowSize(win.width,win.height);                   // set window size
    glutCreateWindow(win.title);                                // create Window
    // Callback functions
    glutDisplayFunc(display);                                   // register Display Function
    glutIdleFunc( display );                                    // register Idle Function
    glutSpecialFunc( keyboard );                                // register Keyboard Handler
    initialize();
    glutMainLoop();                                             // run GLUT mainloop
    return 0;
} 
```

我想补充一点，在 IrfanView 中以 256x512、24BPP、RGB 加载时，Raw 文件正确显示（大小为 393,216 字节或 3*512*256）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:31:36.567

这一行：

```
glTexParameteri( GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

不应该在您的主要初始化中，而是需要在设置纹理本身时完成（即在绑定之后）。

作为一般规则，您可能还想设置 MAG_FILTER 和纹理坐标环绕模式。

此外，您似乎*每次*渲染时都在加载纹理。不要那样做，性能会很糟糕，而且你会耗尽内存，因为 GL 会不断分配新的纹理。

# asp.net-mvc - Ajax.ActionLink 未显示成功警报

> ID：15448070
> 
> 赞同：0
> 
> 时间：2013-03-16T10:17:11.317
> 
> 标签：asp.net-mvc, jquery

我的表单中有 ajax.actionlink：

```
<% using (Html.BeginForm("UpdateRecordingDetails", "Recording", FormMethod.Post, new { id = "frmRecordingEdit" }))
   {%>
       <%= Ajax.ActionLink("Event Notifications", "procesCallrecording", new { Id = ViewData["RecordingIDsEdit"] }, new AjaxOptions { OnSuccess = "alert('success message');" })%>
    <%            
   } 
%> 
```

控制器动作是这样的：

```
public JsonResult procesCallrecording(int Id = 0 ) 
{
    return Json("success", JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:46:59.810

If this is an ASP.NET MVC 2 application make sure that you have included the `MicrosoftAjax.js` and `MicrosoftMvcAjax.js` scripts to your page:

```
<script type="text/javascript" src="<%= Url.Content("~/scripts/MicrosoftAjax.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/scripts/MicrosoftMvcAjax.js") %>"></script> 
```

In ASP.NET MVC 3 or later those are obsolete and should no longer be used. They are replaced by the `jquery.unobtrusive-ajax.js` script.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:45:03.617

我认为`OnSuccess`Ajax.ActionLink 的回调需要`javascript`在事件发生时调用一个函数名。

```
 <%= Ajax.ActionLink("Event Notifications", "procesCallrecording", new { Id = ViewData["RecordingIDsEdit"] }, new AjaxOptions { OnSuccess = "success" })%> 
```

正如您所期望的那样，javascript 是一个警报。

```
 <script>
  function success(){
         alert('success message');
    }
   </script> 
```

这种方式你可以试试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:27:04.403

```
<%= Ajax.ActionLink("Event Notifications", "procesCallrecording", 
    new { Id = ViewData["RecordingIDsEdit"] }, 
    new AjaxOptions { 
        OnSuccess = "function() { alert('success message'); 
    }" })%> 
```

还有更好的方法在[这里检查](https://stackoverflow.com/questions/10272733/ajax-actionlink-get-data-or-error-message-from-controller)

# winapi - WM_NOTIFY 未发布到 winProc 函数（孩子的父母是正确的，WM_COMMAND 工作出色）

> ID：15448073
> 
> 赞同：0
> 
> 时间：2013-03-16T10:17:50.660
> 
> 标签：winapi, tabs

我正在使用 WIN API 编写一些库。我在从父窗口 WinProc 函数中的 WC_TABCONTROL 类窗口接收 WM_NOTIFY 消息时遇到问题。我通过“调试打印”检查，孩子的父母设置正确。我收到 WM_COMMAND 消息并在某些功能中正确。我不知道这可能是什么原因。窗口中的选项卡控件看起来不错，并通过可视选项卡项选择更改响应鼠标单击。

例如，当我单击未选择的选项卡时，我收到以下消息[http://pastie.org/6571509](http://pastie.org/6571509)

你可以在这里查看我的 WIN Proc 函数[http://goo.gl/knJ4Z](http://goo.gl/knJ4Z)，第 346 行。

创建选项卡控件：

```
ps_ext->d_handle = CreateWindowExW(0,                      // no extended styles           
                                       WC_TABCONTROL,          // class name                   
                                       L"",               // default text                  
                                       WS_CHILD | WS_CLIPSIBLINGS | WS_VISIBLE,  // overlapped window            
                                       CW_USEDEFAULT,          // default horizontal position  
                                       CW_USEDEFAULT,          // default vertical position    
                                       CW_USEDEFAULT,          // default width                
                                       CW_USEDEFAULT,          // default height               
                                       HWND_MESSAGE,            // no parent or owner window    
                                       (HMENU)WINSEM_Window_NextComponentID(),           // class menu used              
                                       WINSEM_Window_hInstance,// instance handle              
                                       (LPVOID)&ps_ext->s_window);          // no window creation data 
```

之后，通过 SetParent 函数调用设置正确的父级。选项卡通过以下方式调整大小：

```
 uFlags = SWP_NOOWNERZORDER | SWP_NOZORDER;

  if (SetWindowPos(ps_window->d_handle, NULL, s0_x, s0_y, s0_w, s0_h, uFlags)==0)
  {
    DWORD dErr;

    dErr = GetLastError();

    HaveWinLastError_Error(ps_pack, WINSEM_WINDOW_fromerror_windowPos+0, dErr, dErr);        
    break;
  } 
```

并且显示窗口和单击选项卡控件不会生成父窗口 winProc 函数接收到的 WM_NOTIFY 消息。

这是我的消息接收代码：

```
 bRet = PeekMessage( &msg, NULL, 0, 0, PM_REMOVE);

  if (bRet==FALSE)
  {
    // no messages received
  }
  else
  {
    TranslateMessage(&msg); 
    DispatchMessage(&msg); 
  } 
```

有人对这个问题有任何想法吗？感谢您的想法和时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:29:44.983

我怀疑选项卡控件在创建时会缓存其父窗口并且从不更新它。如果您重新设置它的父级，消息仍将发送到原始父级 - 在这种情况下这是一个无效窗口。

无论如何，您为什么要`HWND_MESSAGE`以父母的身份创建它？为什么不先用它的正确父级创建它呢？

# php - 如何在 mySQL 中将 Base64 字符串存储为 BLOB

> ID：15448078
> 
> 赞同：2
> 
> 时间：2013-03-16T10:18:33.400
> 
> 标签：php, mysql, sql, image, blob

我正在尝试使用下面的代码将 base64 字符串插入 blob，我正在将一个 blob 添加到数据库中，但它是一个没有扩展名的损坏文件。

背景：

```
[request setHTTPMethod:@"POST"];
NSString *encodedString = [binaryData base64Encoding];
NSString *bodyString = [NSString stringWithFormat:@"image=%@", encodedString]; 
```

PHP：

```
$json_obj = $_POST['image'];
$encodedData = str_replace(' ','+',$json_obj);
$encodedData= chunk_split(base64_encode(file_get_contents($encodedData)));
$blob = $encodedData;
$dbHandle = mysql_connect("--------","-------","------");
$dbFound = mysql_select_db("----------");

if($dbFound){

    $check = "INSERT INTO `Images`(`imageId`, `image`, `userId`, `dateCreated`) ".
           "VALUES ".
           "('','$blob','0',null)";

    $retval = mysql_query( $check, $dbHandle );

    if(!$retval)
    {
        die('Could not enter data: ' . mysql_error());
    }
echo '<img src="data:image/jpeg;base64,' . $blob . '" />';
}
else{
      print "No Connection";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:50:34.930

尝试使用：

```
$encodedData= chunk_split(base64_encode(file_get_contents($json_obj))); 
```

然后`echo "BLOB: " . "---" . $blob;`改为：

```
echo '<img src="data:image/jpeg;base64,' . $blob. '" />'; 
```

否则，您只是在倾倒`string`价值，这就是您得到此结果的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T22:20:56.727

您是否尝试过使用[mysql base64](http://base64encode.net/mysql-to-base64)函数：`TO_BASE64('string');`？

# mysql - 警告：mysql_query()：MySQL 服务器已消失

> ID：15448080
> 
> 赞同：1
> 
> 时间：2013-03-16T10:19:05.420
> 
> 标签：mysql, phpmyadmin, localhost, wamp

我有一个 php 脚本，只要我通过 localhost 填写表格，它就会更新数据库表。我可以访问我的本地主机主页，然后填写相应的表格，但是一旦我点击提交，我就会收到上述错误。当我当时检查 wamp 图标时，它从绿色变为橙色。这令人毛骨悚然，它一直是绿色的，但是一旦调用了那个特定的 php 文件，它就会变成橙色。脚本没有任何问题，因为我以前多次使用过它。从那时起，我不得不在两者之间重新安装 wamp 并给出错误。

另外，phpmyadmin 页面不是每次都打开，它说#2002 多次无法登录 MySQL 服务器。也许这就是原因，我的 php 脚本无法连接到 MYsql 服务器，我已经尝试过其他线程的解决方案，但它们都没有工作:( :(

请帮助我，我被困住了，有一项重要的工作要做。有人愿意帮助我使用 temaviewer 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:20:54.027

MySQL server has gone away 错误最常见的原因是服务器超时并关闭了连接。

```
ini_set('mysql.connect_timeout', 300);
ini_set('default_socket_timeout', 300); 
```

它们被设置为默认值 60 秒，这导致了我的问题。看这里了解更多[详情](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)

# zurb-foundation - 如何在基础框架中以自定义形式动态添加选择框

> ID：15448082
> 
> 赞同：1
> 
> 时间：2013-03-16T10:19:32.607
> 
> 标签：zurb-foundation

我在基础 css 框架的自定义表单中动态添加选择框时遇到问题。即使我在具有类名“自定义”的表单中添加选择。它只添加了普通样式的选择框。

```
<pre>
var createdRow ="<tr><td><select><option value='1'>1</option></select></td></tr>";                       
jQuery('#roomsDetails tbody').append(createdRow);
</pre> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T15:16:02.920

添加选择后运行此代码

```
Foundation.libs.forms.assemble(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:07:47.887

如果要为元素添加样式，只需使用`jQuery('option').addClass('some css class');`或`jQuery('option').css('property', 'value');`

# php - PHP 正则表达式子字符串

> ID：15448088
> 
> 赞同：0
> 
> 时间：2013-03-16T10:20:28.893
> 
> 标签：php, regex, substring

```
<select name="states">
    <option value="">--  Select State / Province  --</option>
    <option value="1">Alabama</option><option value="2">Alaska</option>
    <option value="4">Arizona</option><option value="3">Arkansas</option>
    <option value="5">California</option><option value="6">Colorado</option>
    <option value="7">Connecticut</option>
    <option value="8">Delaware</option>
    <option value="9">District Of Columbia</option>
    <option value="10">Florida</option>
    <option value="11">Georgia</option><option value="12">Hawaii</option>
    <option value="13">Idaho</option>
    <option value="14">Illinois</option><option value="16">Indiana</option>
    <option value="15">Iowa</option>
    <option value="17">Kansas</option><option value="18">Kentucky</option>
    <option value="19">Louisiana</option>
    <option value="20">Maine</option>
    <option value="21">Maryland</option>
    <option value="23">Massachusetts</option>
    <option value="22">Michigan</option><option value="25">Minnesota</option>
    <option value="24">Mississippi</option>
    <option value="26">Missouri</option><option value="27">Montana</option>
    <option value="28">Nebraska</option><option value="39">Nevada</option>
    <option value="29">New Hampshire</option>
    <option value="30">New Jersey</option><option value="31">New Mexico</option>
    <option value="32">New York</option>
    <option value="33">North Carolina</option>
    <option value="34">North Dakota</option>
    <option value="35">Ohio</option><option value="36">Oklahoma</option>
    <option value="37">Oregon</option>
    <option value="38">Pennsylvania</option>
    <option value="40">Rhode Island</option>
    <option value="41">South Carolina</option>
    <option value="42">South Dakota</option>
    <option value="43">Tennessee</option>
    <option value="44">Texas</option>
    <option value="45">Utah</option>
    <option value="46">Vermont</option>
    <option value="47">Virginia</option>
    <option value="48">Washington</option>
    <option value="49">West Virginia</option>
    <option value="50">Wisconsin</option><option value="51">Wyoming</option>
</select> 
```

我们如何提取选项标签 >< 中的每个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:25:17.190

~~**试试这个**~~

 ~~```
preg_match_all('/(?<=<)[^>]+(?=>)/m', $subject, $result, PREG_PATTERN_ORDER);
for ($i = 0; $i < count($result[0]); $i++) {
    # Matched text = $result[0][$i];
} 
```~~ 

**解释**

```
"
(?<=    # Assert that the regex below can be matched, with the match ending at this position (positive lookbehind)
   <       # Match the character “&lt;” literally
)
[^>]    # Match any character that is NOT a “&gt;”
   +       # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
(?=     # Assert that the regex below can be matched, starting at this position (positive lookahead)
   >       # Match the character “&gt;” literally
)
" 
```

 ~~**编辑**

***也许你可能会选择 DOM 而不是 RegExp***

```
<?php
$xml = <<< XML
<?xml version="1.0" encoding="utf-8"?>
<select name="states">
    <option value="">--  Select State / Province  --</option>
    <option value="1">Alabama</option>
    <option value="2">Alaska</option>
    <option value="4">Arizona</option>
    <option value="3">Arkansas</option>
    <option value="5">California</option>
    <option value="6">Colorado</option>
    <option value="7">Connecticut</option>
    <option value="8">Delaware</option>
    <option value="9">District Of Columbia</option>
    <option value="10">Florida</option>
    <option value="11">Georgia</option>
    <option value="12">Hawaii</option>
    <option value="13">Idaho</option>
    <option value="14">Illinois</option>
    <option value="16">Indiana</option>
    <option value="15">Iowa</option>
    <option value="17">Kansas</option>
    <option value="18">Kentucky</option>
    <option value="19">Louisiana</option>
    <option value="20">Maine</option>
    <option value="21">Maryland</option>
    <option value="23">Massachusetts</option>
    <option value="22">Michigan</option>
    <option value="25">Minnesota</option>
    <option value="24">Mississippi</option>
    <option value="26">Missouri</option>
    <option value="27">Montana</option>
    <option value="28">Nebraska</option>
    <option value="39">Nevada</option>
    <option value="29">New Hampshire</option>
    <option value="30">New Jersey</option>
    <option value="31">New Mexico</option>
    <option value="32">New York</option>
    <option value="33">North Carolina</option>
    <option value="34">North Dakota</option>
    <option value="35">Ohio</option>
    <option value="36">Oklahoma</option>
    <option value="37">Oregon</option>
    <option value="38">Pennsylvania</option>
    <option value="40">Rhode Island</option>
    <option value="41">South Carolina</option>
    <option value="42">South Dakota</option>
    <option value="43">Tennessee</option>
    <option value="44">Texas</option>
    <option value="45">Utah</option>
    <option value="46">Vermont</option>
    <option value="47">Virginia</option>
    <option value="48">Washington</option>
    <option value="49">West Virginia</option>
    <option value="50">Wisconsin</option>
    <option value="51">Wyoming</option>
</select>
XML;

$dom = new DOMDocument;
$dom->loadXML($xml);
$options = $dom->getElementsByTagName('option');
foreach ($options as $option) {
    echo $option->nodeValue, PHP_EOL;
}
?> 
```

***访问[此处](http://php.net/manual/en/domdocument.getelementsbytagname.php)了解更多详情。希望这可以帮助。***~~

# android - 已安装的 android 应用程序 - 无法访问全屏

> ID：15448099
> 
> 赞同：-2
> 
> 时间：2013-03-16T10:21:39.717
> 
> 标签：android, android-layout

我已经安装了一个 Android 应用程序，它实际上需要在初始设置中填写三个输入字段。但是在我的手机中只显示了两个输入字段，第三个我无法访问，因为没有滚动选项。

在其他具有更大显示屏的手机中，所有三个输入字段都会显示出来。

我可以在我的手机中访问 Android 应用程序的安装位置吗？

如果是，我可以更改该应用程序的配置以使其在较小的显示器中滚动吗？

注意：我不是安卓开发者。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:29:22.003

这可能是应用程序本身的问题。除了卸载应用程序之外，您无法执行任何操作。唯一的方法是购买屏幕更大的手机或让应用程序提供商修复应用程序。[您可以在https://play.google.com/store/](https://play.google.com/store/)上添加您对应用程序的评论 。搜索应用程序并写下您的评论，他们可能会解决问题。

# scala - 带有代码块返回单元的泛型

> ID：15448100
> 
> 赞同：0
> 
> 时间：2013-03-16T10:21:53.453
> 
> 标签：scala, generics

我有以下正在运行并打印“foreach 已执行”的代码：

```
val buf = ArrayBuffer[() => Unit]()
def add(o: () => Unit) = buf += o
add(() => print("executed "))
print("foreach ")
buf foreach (_()) 
```

我想简化第 3 行，但它在第一行中断：

```
val buf = ArrayBuffer[=> Unit]()
def add(o: => Unit) = buf += o
add { print("executed ") }
print("foreach ")
buf foreach (_) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:54:15.083

您不能将按名称值 ( `=>T`) 用作可分配对象，只能用作方法的参数。这意味着你不能参数化你`ArrayBuffer`的`=>Unit`. 您`ArrayBuffer`将必须使用 参数化`() => Unit`。

要将名称值“提升”为函数值，您必须使用`() => ...`语法。您可以执行以下操作：

```
val buf = ArrayBuffer[() => Unit]()
def add(o: => Unit) = buf += () => o
add { print("executed ") }
print("foreach ")
buf foreach (_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:54:05.630

如果我对您的理解正确，您想存储代码片段并稍后对其进行评估。该`: => Type`语法用于按名称传递参数，这意味着每次引用它时都会对其进行评估（而不是在将其传递给函数之前）。据我所知，推迟评估的唯一方法是围绕它创建某种包装器，并通过方法调用使评估可用。在您的情况下，一个简单的非参数函数将是一个很好的包装器：

```
val buf = ArrayBuffer[() => Unit]()
def add(o: => Unit) = buf += {() => o }
add(() => print("executed "))
print("foreach ")
buf foreach (_()) 
```

# android - 无法聚焦的edittext在设备中不起作用？

> ID：15448104
> 
> 赞同：0
> 
> 时间：2013-03-16T10:22:18.243
> 
> 标签：android, android-layout, android-edittext

我正在尝试制作**不可编辑/不可点击/不可聚焦的编辑文本**。而且我在模拟器上很成功，但是当我尝试将我的代码放入**设备（android 4.0）时不起作用**。

在我的 xml 和代码下方：-

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tee_tea_Boss"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<EditText
    android:id="@+id/tee_tea_edit_text"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:layout_margin="5dp"
    android:background="@drawable/calbox"
    android:ems="10"
    android:paddingLeft="10dp"
    android:paddingTop="3dp"
    android:inputType="textShortMessage|textAutoCorrect|textCapSentences|textMultiLine"
    android:textColor="#888888"
    android:imeOptions="actionDone|flagNoEnterAction"
    android:textSize="25sp" >
</EditText>

</RelativeLayout> 
```

**代码**

```
 tee_tea_edit_text.setEnabled(false);
        tee_tea_edit_text.setFocusable(false);
        tee_tea_edit_text.setClickable(false);
        tee_tea_edit_text.setKeyListener(null);
        tee_tea_edit_text.setFocusableInTouchMode(false); 
```

在我的活动中尝试上面的代码，但它在设备上不起作用。在询问之前尝试了很多东西，但对我不起作用。

**我不想要上面的东西在 xml 中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:10:08.463

```
EditText mEdit = (EditText) findViewById(R.id.yourid);
mEdit.setKeyListener(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:38:42.730

在 xml 文件中添加以下属性。

```
android:focusable="false"
android:focusableInTouchMode="false"
android:clickable="false"
android:enabled="false" 
```

# windows-phone-7 - Windows Phone 7 自动呼叫联系人

> ID：15448105
> 
> 赞同：0
> 
> 时间：2013-03-16T10:22:28.393
> 
> 标签：windows-phone-7, phone-call, silverlight-toolkit

我一直在尝试制作一个在 WP7 中调用硬编码联系人的程序。我将此代码用于调用功能

```
 PhoneCallTask phoneCallTask = new PhoneCallTask();
                                    phoneCallTask.PhoneNumber = "123456789";
                                    phoneCallTask.DisplayName = "person 1";
                                    phoneCallTask.Show(); 
```

[并且有这样](http://developers.de/cfsfilesystemfile.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/damir_5F00_dobric/image_5F00_2C2B6F51.png/ "点击图片")的弹出菜单！（这个来自谷歌图片）

我想知道是否有一种方法可以在不手动按下呼叫按钮或按任何键的情况下呼叫该联系人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:53:35.180

没有**办法**做到这一点，也没有办法自动点击**呼叫**按钮。此功能是设计使然，用于安全目的，以保护用户免受可能触发昂贵呼叫（例如国际或付费服务）的恶意应用程序的影响。

# objective-c - 从 assetsLibrary- 全分辨率获取图像

> ID：15448106
> 
> 赞同：0
> 
> 时间：2013-03-16T10:22:45.130
> 
> 标签：objective-c

我有一个图片相册，我从 iphone 库中获取所有图片作为缩略图，并展示一个相册。

当用户从相册中选择某些东西时，我必须获取原始图像（不是缩略图）并保存它。

因此，如果我在资产上运行并**仅保存缩略图**，则需要 4 秒（1000 张图像），但如果我试图将原始大小保存到数组中（以便我以后可以使用它），则需要永远并崩溃。

```
[group enumerateAssetsAtIndexes:set options:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
 {
      CGImageRef imageRef = result.defaultRepresentation.fullResolutionImage;
      UIImage *toSend=[UIImage imageWithCGImage:imageRef];//original
      UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
      [assets addObject:thumbnail]; //works good
      [imagesToSend addObject:toSend]; // takes forever ! 
```

所以，我需要一个解决方案，以便我可以显示缩略图，但也有一些指向全分辨率图像的连接/指针，因此保存它们不会永远花费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:33:08.733

我的解决方案就是使用 2 function 。第一个是这个，只是为了获取缩略图，因为它不需要时间，用户可以立即看到他的相册。

稍后当他选择他最喜欢的图像时，我再次使用此功能，但以全分辨率拍摄所需的相关图像，其中：

```
range=NSMakeRange('image tag number you want' ,1);
NSIndexSet *set = [NSIndexSet indexSetWithIndexesInRange:range];

[group enumerateAssetsAtIndexes:set options:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
     {
                     if (result != nil)
                     {

                      CGImageRef imageRef = result.defaultRepresentation.fullScreenImage;
                      UIImage *toSend=[UIImage imageWithCGImage:imageRef]; 
```

# velocity - 减法不适用于速度模板

> ID：15448108
> 
> 赞同：4
> 
> 时间：2013-03-16T10:23:00.663
> 
> 标签：velocity

我在velocity html中有这段代码

```
<html>

#set ($Total1 = 0.0)
#set ($Total2 = 3.0)
#set ($Total3 = $Total2 -$Total1)
$Total3

</html> 
```

$Total3 未显示。事实上减法是行不通的。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T21:01:53.217

我刚刚在 Velocity 1.6 中尝试过这个例子，它运行良好。

可能导致问题的两件事。

（1）您的示例未正确复制。如果标识符旁边有一个破折号，它就成为标识符的一部分。所以这个例子会失败，因为“-”符号实际上是 Total2 标识符的一部分。

```
#set ($Total3 = $Total2- $Total1) 
```

(2) 您使用的是非常旧版本的 Velocity。浮点数是从 Velocity 1.5 开始的合法语法。（当前版本是 1.7）。在此之前，整数是唯一允许的数字类型。

# android - Android：如何停止/清除我的 Android 小部件应用程序的缓存后台进程？

> ID：15448110
> 
> 赞同：2
> 
> 时间：2013-03-16T10:23:09.383
> 
> 标签：android, caching, process, background

有没有办法停止/清除我的 Android Widget 的缓存后台进程？

我的小部件使用较少的 RAM 内存（约 1 mb），但在后台缓存进程中使用大量内存（约 100/200 mb）。

有没有办法停止后台缓存进程或清除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-05T18:11:50.380

设置>开发人员选项>应用程序>后台进程：否。

*PS。不要解决任何不完整的解决方案！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:33:38.697

我认为 CommonsWare[在 Android 上的回答，正在运行的进程和缓存的后台进程有什么区别？](https://stackoverflow.com/questions/14259504/on-android-whats-the-difference-between-running-processes-and-cached-backgroun)可能对你有帮助。简而言之，似乎没有理由清除它。此外，如果单击该进程，您将看到一条消息“这是一个旧的应用程序进程，正在保留以提高速度，以防再次需要它。通常没有理由停止它。” 希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T20:14:19.083

我认为通常有理由清除Android上的内存。当你上线时，Android（实际上是谷歌）会预加载一堆应用程序作为“缓存”。当您离线时，它会清除这些并加载更多。还有像 Google+ 这样的东西，它就坐在那里，占用你可怜的手机 50Mb 的 RAM。因此，如果您需要删除所有未使用的元数据收集废话，以便您的应用程序有一些空间，您可以执行以下操作：

```
public void clearMem() {
    ActivityManager amgr = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);
    List<ActivityManager.RunningAppProcessInfo> list = amgr.getRunningAppProcesses();
    if (list != null){
        for (int i = 0; i < list.size(); i++) {
            ActivityManager.RunningAppProcessInfo apinfo = list.get(i);

            String[] pkgList = apinfo.pkgList;
            if ((! apinfo.processName.startsWith("com.sec")) && ((apinfo.importance > 150) || (apinfo.processName.contains("google")))) {
                for (int j = 0; j < pkgList.length; j++) {
                    amgr.killBackgroundProcesses(pkgList[j]);
                }
            }
        }
    }
} 
```

# scala - 查看更高级类型的边界

> ID：15448113
> 
> 赞同：5
> 
> 时间：2013-03-16T10:23:23.973
> 
> 标签：scala, higher-kinded-types

我正在尝试设置一个绑定到高类型类型的视图，但我收到一条我无法理解的错误消息。

```
$ scala -language:higherKinds
Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_43).
Type in expressions to have them evaluated.
Type :help for more information.

scala> trait F[M[_]]
defined trait F

scala> def foo[M[_]](implicit m: M[_] => F[M]) = 42
foo: [M[_]](implicit m: M[_] => F[M])Int

scala> def bar[M[_] <% F[M]] = 42
<console>:8: error: type M takes type parameters
       def bar[M[_] <% F[M]] = 42
                    ^ 
```

不应该`bar`编译成与`foo`? 我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T13:43:52.150

请注意，`M[_]`类型参数列表中的 和类型`M[_]`（即`M[_]`隐式参数列表中函数类型中的角色）之间存在细微差别。第一个是*类型构造函数参数*，第二个是*存在类型*（有关更多信息，请参阅[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的 4.4 和 3.2.10 节）。

因此，例如，我们可以在不改变含义的情况下将类型构造函数参数`M[_]`替换为`M[X]``M[X] forSome { type X }`

以下示例中的差异可能更清楚（编译得很好）：

```
scala> def bar[M[_], M_ <: M[_] <% F[M]] = 42
bar: [M[_], M_ <: M[_]](implicit evidence$1: M_ => F[M])Int 
```

这里第一个`M[_]`是类型构造函数参数，第二个（上界`M_`）是存在类型。

Scala 编译器可以`M[_] <% F[M]`按照您的期望在这里工作——即，它可以将类型构造函数参数转换为它为上下文绑定创建的隐式参数类型中的存在类型——但这需要额外的一小部分编译器的魔法，而且已经足够了。

# macos - 更改 NSTextView 中特定子字符串的颜色

> ID：15448114
> 
> 赞同：3
> 
> 时间：2013-03-16T10:23:25.670
> 
> 标签：macos, cocoa, nsstring, nstextview

我想更改 NSTextView 中特定文本的颜色。该方法应该在 keydown 事件之后检查。

例如：单词 void 完成，字符串 void 将颜色更改为蓝色。就像一个代码编辑器。

我搜索了很长时间，但没有找到任何东西。我的代码：

```
 NSRange range = [text rangeOfString:@"void"];
 NSString *substring = [[text substringFromIndex:NSMaxRange(range)] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
 //I think, here is the mistake.
 NSAttributedString *now = [NSAttributedString initWithString:substring];
 [now setTextColor:[[NSColor blueColor]]]; 
```

我读过我必须使用 a`NSAttributedString`但我不知道如何从字符串中获取此类。

我是可可编程的新手。

感谢您的每一个帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:31:51.780

你可以这样做：

```
NSString *str = @"Hello. That is a test attributed string.";

//in place of NSMakeRange put your range

[self.textview setRichText:YES];
[self.textview setString:str];
[self.textview setTextColor:[NSColor redColor] range:NSMakeRange(3,5)]; 
```

# python - 有没有一种简单的方法来创建字典列表的哈希？

> ID：15448115
> 
> 赞同：2
> 
> 时间：2013-03-16T10:23:30.403
> 
> 标签：python, list, hash, python-2.7

我有一个包含字典的列表，其中可能包含其他列表和/或字典，例如

```
a =  [{3:4},{1:2}, {5:[5,6,7,7]} ] 
```

我想创建这个对象的哈希和（或等效的东西），以便将它与另一个哈希进行比较，当列表的内容不同时，它是不同的。

我需要这个来通过网络进行查询。我不是一直在网络上拉出可能非常大的列表，而是得到哈希和，只有当这个总和与之前的哈希和不同时，我才能通过网络获得整个列表。

有没有一些简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:44:24.487

你可以用泡菜

```
hashlib.md5(pickle.dumps(a[0])).hexdigest() 
```

str 并不总是给出预期的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:43:46.713

如何做类似的事情：

```
# imports
import copy

def make_hash(x):
     # Check if arg is a list, tuple or set
     if isinstance(x, (set, tuple, list)):
         return tuple([make_hash(y) for y in x])

     # Check if arg is not a dict
     elif not isinstance(x, dict):
         return hash(x)

     new = copy.deepcopy(x)
     for k,v in new.items():
         new[k] = make_hash(v)
     return hash(tuple(frozenset(new.items()))) 
```

然后你可以简单地做`make_hash([{...},{...}])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:39:49.970

```
a =  [{3:4},{1:2}, {5:[5,6,7,7]} ]
hash(str(a)) 
```

# java - 我怎样才能找到确切的错误？

> ID：15448116
> 
> 赞同：0
> 
> 时间：2013-03-16T10:23:31.297
> 
> 标签：java, hibernate, nullpointerexception, hibernate-mapping, hibernate-annotations

我收到以下错误。但我无法找到错误是什么。

```
Caused by: java.lang.NullPointerException
    at org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1481)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1419)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1375)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:717)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 91 more 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:26:38.460

找到Configuration的源代码，转到第1481行，该行中有一个引用，引用为null。

然后挖掘这个引用是如何分配的，并追溯它。

或者你可以调试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T12:15:47.413

我只是偶然发现了这个问题和@BlackJoker 的建议，尽管有点笼统是应该做的。

在我的情况下，错误发生在 hibernate-core:4.3.1.Final 的第 1499 行，但错误相同。

该代码尝试解析和外键/映射。我有一个带有@OneToOne 映射的实体，其类型不是必需的实体，而是字符串。

```
@Entity
@Table(name = "MyTable")
public class BrokenEntity {

    @Id
    @Column(name = "id")
    private String flow;

    @Id
    @JoinColumn(name = "other_id")
    @OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private String group;// Now hibernate tries to map the String as entity and fails!
} 
```

删除映射或用有效实体替换 java.lang.String 可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:31:56.053

由于您还没有指出任何关于您的类的更多信息，请查看[Hibernate throwing NullPointerException - processFkSecondPassInOrder](https://stackoverflow.com/questions/9302993/hibernate-throwing-nullpointerexception-processfksecondpassinorder)以获取指向上述错误的指针...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T06:54:46.067

```
Caused by: java.lang.NullPointerException
    at org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1481)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1419)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1375) 
```

该错误意味着您将注释放在丢失的对象上。例如：您放入`@JoinColumn`但`private Car car`找不到该`Car`对象。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-16T10:25:21.473

调用异常`NullPointerException`表示您正在尝试使用未创建的对象，这通常发生在您声明对象时，忘记创建它并尝试使用它。

# php - 前端控制器中代码的正确顺序？

> ID：15448119
> 
> 赞同：0
> 
> 时间：2013-03-16T10:24:01.253
> 
> 标签：php

我有一个前端控制器，用于设置页面中的各种元素。但是我突然想到，也许有些元素的顺序不正确；我的意思是，某些元素可能需要在其他元素之前使用/声明。

或者，换一种说法：我是否以最佳/正确的方式构建了文件。例如 session_start() 应该在 ini_set() 之后出现，依此类推。

```
ini_set('session.use_cookies', 1);
ini_set('session.use_only_cookies', 1);
ini_set('session.use_trans_sid', 0);

$mytimeout = 720 * 60; // (12hrs*60m=720) // minutes * 60
session_set_cookie_params($mytimeout);

$sessdir = "../application/data"; 
ini_set('session.save_path', $sessdir);

session_cache_expire($mytimeout / 60);
ini_set('session.gc_maxlifetime', $mytimeout);

session_start();

error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

require_once('../application/models/front.php');
require_once('../application/models/icontroller.php');
require_once('../application/models/view.php');
require_once('../application/models/db.php');
require_once('../application/models/sconfig.php');
require_once('../application/models/acl.php');

require_once('../application/controllers/index.php');
require_once('../application/controllers/user.php');
require_once('../application/controllers/error.php');
require_once('../application/controllers/blog.php');
require_once('../application/controllers/about.php');

function exception_handler($exception) {
  echo "Sorry something went wrong; And or we couldnt find what you requested.<br />We suggest you go back to our <a href=\"/\">home page</a> and try again.<br />We have logged this request in order to provide a better service.<br /> *** ". $exception->getMessage()." ***";

}

set_exception_handler('exception_handler');

$fc = FrontController::getInstance();
$c=$fc->getController();
$a=$fc->getAction();

$users=ACL::getInstance();
$sid=session_id();

if(isset($_SESSION['HTTP_USER_AGENT'])){
  if($_SESSION['HTTP_USER_AGENT'] != md5($_SERVER['HTTP_USER_AGENT'])){
    session_regenerate_id(TRUE);
    $_SESSION=array();
    $users->removeUser($sid);
    if(($c!='error')&&($a!='badsession')){
      $fc->redirect("error/badsession");
    }
  }
}
else{
  $_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);
}   

$dbh=DBConnection::getInstance();

setcookie('ct', 1,0,"/");

$config = Configuration::getInstance();
$cf=array();
$cf=$config->getall();

$users=ACL::getInstance();
$users->addUser();
$users->removeOld();

$front = FrontController::getInstance();

$front->route();
echo $front->getBody(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:32:43.033

事情的顺序可以稍微调整一下。这将是我选择的顺序：

1.  首先，我会将`error_reporting`调用放在顶部，这样您就可以按预期报告错误。
2.  然后设置`exception_handler`，`exception_handler`这样你就可以抓住一切。
3.  打所有`ini_set`电话。
4.  `require`所有必要的脚本。
5.  使用 开始会话`session_start`。如果以上所有事情都顺利的话。
6.  做其他逻辑。

**笔记**

使用单例不是一个好主意。特别是在您使用它们的音量。看看这里为什么[单身人士这么糟糕？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons) 最好不要学习单例的使用。单例让你对代码设计粗心，我很抱歉。它显示在您的示例中:-)

# android - 从 API 级别 < 10 的服务启动 Activity

> ID：15448120
> 
> 赞同：0
> 
> 时间：2013-03-16T10:24:07.123
> 
> 标签：android, service, android-activity, permissions

为了找到一种从我的后台服务（相同的包）启动活动的方法，我被困在 10 级或更低的 API（在 2.3.3 中尝试），它一直在抱怨权限 STATUS_BAR 这是一个系统权限。

我尝试了各种方法都没有成功。

清单中的活动定义：

```
<activity
        android:name="com.company.app.ui.ViewActivity"
        android:label="@string/title_activity" 
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"
        android:stateNotNeeded="true"
        android:exported="true">

        <intent-filter>
            <action android:name="com.company.app.action.START_VIEW" />
            <data android:scheme="package" android:pathPattern="com.company.app"/>
        </intent-filter>
</activity> 
```

代码：

```
Intent it = new Intent("com.company.app.action.START_VIEW");
it.setComponent(new ComponentName(getPackageName(), ViewActivity.class.getName()));
it.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplicationContext().startActivity(it); 
```

选择：

```
Intent intent = new Intent(this, ViewActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setAction(Intent.ACTION_VIEW);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

两者都失败，但有以下例外：

```
03-16 14:10:07.583: E/MyApp(367): java.lang.SecurityException: Permission Denial: starting Intent { act=com.company.app.action.START_DDM flg=0x10000000 cmp=com.company.app/.ViewActivity } from ProcessRecord{43db3d88 367:com.company.app/10029} (pid=367, uid=10029) requires android.permission.STATUS_BAR
03-16 14:10:07.703: E/MyApp(367): android.os.Parcel.readException(Parcel.java:1218)
03-16 14:10:07.793: E/MyApp(367): android.os.Parcel.readException(Parcel.java:1206)
03-16 14:10:07.864: E/MyApp(367): android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1214)
03-16 14:10:07.944: E/MyApp(367): android.app.Instrumentation.execStartActivity(Instrumentation.java:1373)
03-16 14:10:08.044: E/MyApp(367): android.app.ApplicationContext.startActivity(ApplicationContext.java:555)
03-16 14:10:08.174: E/MyApp(367): android.content.ContextWrapper.startActivity(ContextWrapper.java:248)
03-16 14:10:08.244: E/MyApp(367): com.company.app.service.MyService.showHideView(MyService.java:616)
03-16 14:10:08.324: E/MyApp(367): com.company.app.service.MyServiceThread$1.handleMessage(MyServiceThread.java:99)
03-16 14:10:08.394: E/MyApp(367): android.os.Handler.dispatchMessage(Handler.java:99)
03-16 14:10:08.473: E/MyApp(367): com.company.app.service.MyServiceThread.callShowHideView(MyServiceThread.java:231)
03-16 14:10:08.563: E/MyApp(367): com.company.app.service.MyServiceThread.run(MyServiceThread.java:205) 
```

**更新：下面发布的解决方案......感谢Android的愚蠢错误消息！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:39:04.263

```
 <category android:name="android.intent.category.DEFAULT" /> 
```

添加并检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:11:29.447

经过一整天的努力，找到了解决方案：

姜饼，取出

```
android:stateNotNeeded="true" 
```

在清单中并且它有效。

:(

# c - 使用线程进行客户端服务器编程

> ID：15448122
> 
> 赞同：2
> 
> 时间：2013-03-16T10:24:30.380
> 
> 标签：c, pthreads, client-server

我正在处理客户端运行两个线程的客户端服务器代码；我希望这两个线程连续运行 60 秒。但是，我面临两个问题。

首先，当我在 中运行 for 循环时`main()`，`retail_thread()`生成的数字与它应该生成的随机数相同，就像`bulk_thread()`生成一样。其次，我无法理解恰好运行 60 秒的 for 循环。

由于这是一个家庭作业问题，如果不是确切的解决方案，我将非常感谢任何提示或帮助。如果有错别字，请忽略。

```
int main(int argc, char *argv[]) {

    int pt,i;
    pthread_t thread;
    /* n a very large number */
    /* run below code for 60 seconds */

    for(i=0;i<n;i++)
    {
        pt = pthread_create(&thread, NULL, retail_thread, (void*) NULL);
        bulk_thread(NULL);
    }
}

void* retail_thread(void* ){
    srand(time(NULL));                       
    int order_size = rand()%20 + 1;         
    printf("in retail \n ");
    sendtoserver_R(RETAIL_PORT,order_size);
    int wait_time = 100 + (5*order_size);
    printf("Retail thread order = %d and execution fully completed \n\n",order_size);
}

void* bulk_thread(void* ){
    srand(time(NULL));                      
    int order_size = rand()%90 + 10;        
    printf("in bulk \n");
    int wait_time = 100 + (5*order_size);
    sendtoserver_B(BULK_PORT,order_size);

    printf("Bulk thread order = %d and execution fully completed \n\n",order_size);
} 
```

`sendtoserver()`仅用于创建套接字并将数据发送到服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:30:33.483

好吧，我认为第一个问题是：

```
// Seed the RNG once, at the start of the program
srand(time(NULL));  

void* retail_thread(void* ){
    //srand(time(NULL));                       
    int order_size = rand()%20 + 1;         
    printf("in retail \n ");
    sendtoserver_R(RETAIL_PORT,order_size);
    int wait_time = 100 + (5*order_size);
    printf("Retail thread order = %d and execution fully completed \n\n",order_size);
  } 
```

[编辑]要运行一个线程 60 秒，你可以试试这个：

```
time_t end = time(NULL) + 60;
while (time(NULL) <= end)
{
    … // do something
} 
```

# ipad - iPad横向模式下的iAd布局

> ID：15448123
> 
> 赞同：0
> 
> 时间：2013-03-16T10:24:42.347
> 
> 标签：ipad, landscape, iad, portrait

我有个问题：

我已将 iAd 横幅添加到我的通用应用程序中。但是如果我想在 iPad 上调整 iAd 横幅的大小，使其与 iPad 纵向模式的宽度一样大，它可以工作，但在横向模式下，它仍然与纵向模式的宽度一样大。但我希望横幅在横向模式下与 iPad**横向**模式一样大。那可能吗？我希望你能理解我。

最好的问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:39:18.690

我想通了！首先，我将视图布局设置为横向模式。然后我将 iAd 横幅的宽度更改为横向模式的宽度。之后，我提升了 iAd 横幅的两个用户约束：Leading Space to Superview Trailing Space to Superview

就是这样。在 iPhone 模拟器上测试应用程序。

# asp.net - 在 iis 7.5 中在局域网上建立网站，以便在 Intranet 中访问

> ID：15448125
> 
> 赞同：0
> 
> 时间：2013-03-16T10:25:02.317
> 
> 标签：asp.net, iis

我想在 iis 7.5 中设置我的网站以在 Intranet 中访问，它正在使用扩展名为“home.aspx”的页面，但是当我使用像“/home”这样的重写 URL 时，它会出现错误

我已经在 global.asax 中重写了代码，它也在我的实时网站和本地主机上工作，但只在 Intranet 中产生问题

![在此处输入图像描述](../Images/00f9a696c4764232ca517fd5e86dfe2d.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:38:50.593

您是否尝试将“home.aspx”添加到 iis 内的“默认文档”中

如果没有打开“默认文档”并添加 home.aspx 然后将其移至顶部

这些来自谷歌的截图只是为了说明

[http://www.web-site-scripts.com/knowledge-base/admin/media_store/2/AA-00495/default-document.png](http://www.web-site-scripts.com/knowledge-base/admin/media_store/2/AA-00495/default-document.png)

[http://mscerts.net/image/201009/Managing%20Websites%20with%20IIS%20Manager_9.jpg](http://mscerts.net/image/201009/Managing%20Websites%20with%20IIS%20Manager_9.jpg)

# css - 这是什么CSS语法？

> ID：15448132
> 
> 赞同：-2
> 
> 时间：2013-03-16T10:25:43.693
> 
> 标签：css

这是什么？我知道它是css，但语法是什么？

```
#holder ul.sub li.sub-li a img {
    display:block;
    position:absolute;
    left:-9999px;
    border:0;
    height:200px;
    width:750px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:30:13.597

这意味着所有包含 `sub` 类的 ul 元素都在一个带有 id 的 div 中`holder`

所有具有类的 li 标记都在具有 id 的 div 中`holder`

并且锚标记和图像存在于具有 id 的 div 中`holder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:30:15.433

```
#holder ul.sub li.sub-li a img { 
```

这是在带有 Id 持有人的元素内的 ul.sub 内的 li.sub-li 内的 n hors 内指定所有图像。

有关更多信息，请参见此处 [http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:38:56.663

选择器使用[Descendant 组合](http://www.w3.org/TR/selectors/#descendant-combinators)器，它只是简单选择器之间的空白字符。

例如，`a img`指定一个`img`元素是元素的后代`a`，即它在元素内部的某处，但它们之间可以有任意数量的级别。

它将匹配此代码中的图像：

```
<a href="#">
  <img src="car.gif" />
</a> 
```

它还将匹配此代码中的图像：

```
<a href="#">
  <span>
    <span>
      <span>
        <img src="car.gif" />
      </span>
    </span>
  </span>
</a> 
```

作为比较，在 中使用[Child 组合子](http://www.w3.org/TR/selectors/#child-combinators)`a > img`只会匹配第一个示例中的图像，而不是第二个示例中的图像，因为它指定了直接后代。

# javascript - 在 AMD 模块之前添加非 AMD 模块

> ID：15448134
> 
> 赞同：0
> 
> 时间：2013-03-16T10:26:37.073
> 
> 标签：javascript, requirejs, amd

我在一个项目中使用 requirejs，我有 2 个模块：

*   a.js：是一个非 AMD 模块，我无法触摸它的代码
*   b.js：是我用`define()`函数编写的 AMD 模块。它需要`a.js`工作。
*   app.js：是同时使用`a.js`和的实际应用程序代码`b.js`。

app.js 看起来像这样：

```
//source code for app.js
require(['a.js', 'b.js'],
function( a, b ) {
    a.x = 2;//this will fail because 'a' is not defined
}); 
```

现在的问题是：`require()`两个模块的最简单方法是什么`app.js`？我不能这样做：

```
//source code for app.js
require(['b.js', 'a.js'],
function( b ) {
    a.x = 2;//it works because module 'a' defines a global variable named 'a'
    b.x = 2;//this will fail because module 'b' is loaded before 'a' so it doesn't work
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:59:29.187

正如您所说，由于`a.js`导出了一个名为 的全局变量`a`，因此您可以使用[shim 配置选项](http://requirejs.org/docs/api.html#config-shim)`RequireJS`配置为以 AMD 方式公开它。任何需要的模块甚至都不知道它不是一个合适的模块。在您的情况下，配置将是这样的：`a.js`

```
requirejs.config({
    shim: {
        'a.js': {
            exports: 'a' // a.js defines 'window.a'
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:43:59.350

这是 AMD 装载机的标准票价。大多数情况下，不需要垫片。您的 app.js 来源是正确的，但您没有显示 b.js 的来源。由于您可以控制 b.js，因此应将其编写为依赖于 a.js 的 AMD 模块

```
// source code for b.js
// You have to use define, not require, and the dependency on a.js must be here rather than via a nested or internal require
define(['a.js'], function(a){
    // your code for b.js
}); 
```

当 app.js 准备好执行时，这将确保 a.js 在 b.js 之前加载。

# php - 我在哪里可以找到 Magento 高级 cms 管理 html 文件

> ID：15448141
> 
> 赞同：-1
> 
> 时间：2013-03-16T10:27:05.987
> 
> 标签：php, magento, zend-framework

我已经下载了高级 cms 扩展，一切正常。我需要编辑管理面板列表页面。有谁知道我在哪里可以找到高级 cms 管理面板 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:31:10.423

所有后端 html 文件（实际上是 phtml 文件）都可以在 app/design/adminhtml/...

您也可能是指管理网格？然后在 Block 文件夹中查看您的模块文件夹。然后搜索 Grid.php 文件。其中之一应该是您要寻找的那个。我不确定您是否要添加/删除列，但如果您这样做，请在此处查看有关如何编辑网格的本教程：inchoo.net/ecommerce/magento/how-to-extend-magento-order-grid

# javascript - 将android mapview嵌入HTML

> ID：15448142
> 
> 赞同：0
> 
> 时间：2013-03-16T10:27:26.637
> 
> 标签：javascript, android, google-maps, webview, android-mapview

我想知道是否可以将 android 视图作为 html 的一部分嵌入？或者在 html 代码中创建一个占位符（如 <div>），可以将 android 视图加载到该占位符中。例如，我的应用程序的 gui 完全使用 html 制作，然后加载到主 android 活动的 web 视图中。我想做的是在gui内显示一张地图。我知道我可以只使用 google maps javascript api，但是由于我已经编写了用于使用 java 处理地图的代码，我想知道是否有一种简单的方法来嵌入本机 android google map 视图（xml 布局）进入html。

谢谢，

雅卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:05:57.993

不，这是不可能的。

但是，如果您的 WebView 不滚动，您可以在其顶部添加 MapView，将其放置在边距右侧。如果它**确实**滚动，您可以根据 WebView 当前滚动（尝试继承 WebView 的[onScrollChanged](https://developer.android.com/reference/android/webkit/WebView.html#onScrollChanged%28int,%20int,%20int,%20int%29)方法）将 MapView 移动到其父级中。

# debugging - 使用远程调试器在 WebStorm 中调试 TypeScript

> ID：15448144
> 
> 赞同：2
> 
> 时间：2013-03-16T10:27:49.287
> 
> 标签：debugging, typescript, webstorm

我无法远程调试 WebStorm 中的 TypeScript 文件。我目前正在使用 WebStorm 6.0、TS 编译器 0.8.3 和 Chrome JetBrains 插件 0.5.7。

出于调试目的，我使用的服务器是一个简单的 python 服务器，它使用`-m http.server`我的本地计算机上的命令在与源文件相同的目录中运行。

文我在编译原始 TypeScript 文件产生的已编译 JS 文件上放了一个断点，WebStorm 打开正确的远程 TypeScript 文件，但处于只读模式（所以至少 JS 文件的远程调试工作正常，以及`.js.map`文件） .

尝试将断点直接放在原始 TypeScript 文件中时会出现问题，因为调试器根本不会触发。

我无法在 WebStorm 中设置远程文件 url，因为调试器中的*Scripts*选项卡仅列出 JS 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:54:28.443

我通过设置整个项目的远程目录解决了这个问题，而不是单个文件。

![WebStorm 设置](../Images/7175fdcf487e9b93ee86a897442c5275.png)

# php - TSQL / PHP 太慢 - 重写

> ID：15448147
> 
> 赞同：0
> 
> 时间：2013-03-16T10:28:14.393
> 
> 标签：php, sql, tsql

我有一个名为 mainevents 的表和一个名为 subevents 的表。对于每个主事件，我想要 3 个子事件，它们匹配 subname='$sub_name' 和 eventid。当有很多主要事件时，脚本太慢了。拖慢，10秒加载。当我禁用子事件循环时，脚本会立即加载。我认为可能有一种更短/更快/更简单的方式来编写以下内容。也许全部在一个查询中。我不完全确定。

```
$a=sqlsrv_query($conn, "SELECT
    eventid,status,name, CONVERT(varchar(100),date,107) AS dt 
    FROM dbo.mainevents WHERE 
    ( date >= '$start_date' AND date <= '$stop_date' ) AND disabled='0'
    ORDER BY category asc");
while($e=sqlsrv_fetch_array($a)){
    $b=sqlsrv_query($conn, "SELECT 
        subid, subname FROM dbo.subevents WHERE
        eventid='$e[eventid]' AND subname='$sub_name' ORDER BY subname");
    while($s=sqlsrv_fetch_array($b)){
        //do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:35:52.253

为什么不在第一个查询中连接两个表？

在没有子事件的情况下，尽管您需要进行外部连接，否则您将无法获得主要事件。

让 SQL 服务器的优化器决定什么需要循环。

SQL 将是这样的：

```
SELECT m.eventid, m.status, m.name, CONVERT(varchar(100),date,107) AS m.dt, s.subid, s.subname 
FROM dbo.mainevents m, dbo.subevents s
WHERE m.eventId *= s.eventId
AND ( m.date >= '$start_date' AND m.date <= '$stop_date' ) 
AND m.disabled='0'
ORDER BY m.category asc, s.subname asc 
```

我认为这是 T-SQL 中外连接的正确语法，但我已经很久没有做过任何 T-SQL 工作了！:)

# google-maps - GPS定位在中国总是偏移

> ID：15448149
> 
> 赞同：13
> 
> 时间：2013-03-16T10:28:20.220
> 
> 标签：google-maps

我在我的应用程序中使用了最新的 Google Maps iOS SDK，似乎 GPS 位置在中国总是偏移 1-2 个街区，但是，在 Google Maps 官方应用程序中，位置是 100% 正确的。

我遇到了这篇文章，这似乎是原因：[http ://home.wangjianshuo.com/archives/20081109_all_maps_in_china_are_transformed.htm](https://web.archive.org/web/20140116215242/http://home.wangjianshuo.com/archives/20081109_all_maps_in_china_are_transformed.htm)

似乎官方应用程序使用了正确转换的地图，而 Google Maps iOS SDK 没有。有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-08T11:26:14.033

[中国 GPS 偏移](https://en.wikipedia.org/wiki/Restrictions_on_geographic_data_in_China#The_China_GPS_shift_problem)的原因是技术（不同基准）和政治/经济利益的结合。

出于“安全考虑”，中国使用与世界其他地区不同的坐标系[——GCJ-02](https://en.wikipedia.org/wiki/Restrictions_on_geographic_data_in_China#GCJ-02)，而不是GPS卫星和绝大多数地图使用的[WGS-84标准。](https://en.wikipedia.org/wiki/WGS-84)所有中国地图必须经国务院批准，以标明中国在各种政治争议领土（西藏、台湾等）上的立场。批准还要求地图使用 GCJ-02。这会导致 WGS-84 位置（例如来自纯 GPS 接收器的 GPS 轨迹）在绘制在中国街道地图上时显示为“关闭”。

![GPS坐标在GCJ-02地图上出现偏移](../Images/66fd07a34ec822fc43effeb02c56504a.png)

不同的坐标系通常不是问题，但中国选择*加密*GCJ-02，因此没有直接的转换。第一次[转换尝试](https://github.com/maxime/ChinaMapDeviation)使用[了从谷歌中国地图](https://web.archive.org/web/20150408071517/https://wuyongzheng.wordpress.com/2010/01/22/china-map-deviation-as-a-regression-problem/)(ditu.google.com) 获得的坐标数据库，当时它可以在 2010 年计算偏差。这是一种插值方法，有些不精确。[数据集以中国数千个城市计算的偏移量](http://www.sinosplice.com/life/archives/2013/07/16/a-more-complete-ios-solution-to-the-china-gps-offset-problem)出售。

与此同时，GCJ-02算法已经泄露，属于“公开机密”（搜索“GCJ-02转换”可以找到很多结果）。值得注意的是[eviltransform](https://github.com/googollee/eviltransform)项目，它为 C、C#、Go、Java、JavaScript 和 PHP 提供转换 API。[geoChina 库](https://github.com/caijun/geoChina)使用R 处理 GJC-02、WGS-084 和百度的 BD-09 之间的转换。

这段代码很重要，并且还执行了一个[*非常*粗略的](https://github.com/caijun/geoChina/blob/c153f9b21bcc841de8ca9f88d679fecc1d2c4f57/R/cst.R#L69) [边界框检查](https://github.com/googollee/eviltransform/blob/master/javascript/transform.js#L1)来确定一个位置是否在中国：

```
function outOfChina(lat, lng) {
    if ((lng < 72.004) || (lng > 137.8347)) {
        return true;
    }
    if ((lat < 0.8293) || (lat > 55.8271)) {
        return true;
    }
    return false;
} 
```

这包括印度大部分地区、南朝鲜和朝鲜、菲律宾、越南、蒙古、泰国和许多其他国家：

![在此处输入图像描述](../Images/ed1ca2e2d7f14ccb49d073c1b33175f6.png)

一种改进是使用多边形边界，例如[china.kml](https://github.com/maxime/ChinaMapDeviation/blob/master/china.kml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T06:08:14.677

这不是因为中国使用的坐标系与我们使用的WGS84不同吗？

这是一些可以处理来自 WGS84 的翻译的[代码](https://github.com/googollee/eviltransform)

# django - 如何使用基于类的视图动态设置模板名称？

> ID：15448150
> 
> 赞同：14
> 
> 时间：2013-03-16T10:28:39.973
> 
> 标签：django, django-class-based-views

我已经搜索了基于类的视图 Django 文档（Django 1.4）的参考和主题，但我没有发现任何提及这一点。**如何使用基于类的视图动态设置模板名称？**我正在寻找**以下设置的基于类的等效项**：

**网址.py**

```
from django.conf.urls.defaults import *
from mysite.views import dynamic

urlspatterns = patterns('', 
    url(r'^dynamic/(?P<template>\w+)/$', dynamic),)
) 
```

**视图.py**

```
from django.shortcuts import render_to_response

def dynamic(request, template):
    template_name = "%s.html" % template 
    return render_to_response(template_name, {}) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-16T10:38:29.440

您需要定义返回模板名称列表的 get_template_names。

```
from django.views.generic import TemplateView

class DynamicTemplateView(TemplateView):

    def get_template_names(self):
        return ['%s.html' % self.kwargs['template']] 
```

# binding - knockoutjs - 有条件地启用复选框列表

> ID：15448151
> 
> 赞同：0
> 
> 时间：2013-03-16T10:28:43.873
> 
> 标签：binding, knockout.js

我正在尝试构建一个简单的表单来捕获用户的选择。用户可以做出的选择数量是有限制的。

这是我到目前为止所做的事情 - [http://jsfiddle.net/steam/7RSdf/13/](http://jsfiddle.net/steam/7RSdf/13/)

到目前为止，我已经成功——

1.  绑定复选框列表
2.  捕获所做的选择并将它们绑定在一个无序列表中。
3.  用户做出 3 次选择后禁用复选框。

复选框的启用/禁用是使用此位完成的 -

```
self.canVote = ko.computed(function() {
    return self.selectedTopics().length < 3 ;}, self); 
```

我的问题 - 我希望我的用户能够恢复/更改他/她的选择。这意味着，在 3 次选择之后，只***需要禁用未选中的复选框***。用户仍然可以从他/她所做的选择列表中取消选中。

有没有一种简单的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:38:43.810

没错，换

```
enable: $root.user().canVote 
```

到

```
enable: $element.checked || $root.user().canVote 
```

[http://jsfiddle.net/7RSdf/14/](http://jsfiddle.net/7RSdf/14/)

# php - 在 php 中使用 sqlsrv_query 进行 SELECT 操作

> ID：15448154
> 
> 赞同：0
> 
> 时间：2013-03-16T10:29:28.897
> 
> 标签：php, sql, select

我正在使用以下 php 代码从 MS sql 服务器数据库中的表中选择最大值。这只是代码的快照，而不是完整的代码：

```
$sqlToCheckNID ="Select (?)=max(nid) from testRetailerlist";
$param_nid = array($maxNid,SQLSRV_PARAM_OUT);   
$maxNidInDb = sqlsrv_query($conn,$sqlToCheckNID,$param_nid); 
  echo "<li>" .$maxNid. "<li>"; 
```

它给我带来了错误`Undefined variable maxNid`

我想回显从 select 语句中获得的值。我想我使用了错误的语法，但在网上找不到任何示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:37:18.197

您需要将参数的数组作为第三个参数添加到`sqlsrv_query()`. 您还应该在初始化后[通过引用传递输出参数。](http://php.net/manual/en/language.references.pass.php)所以你的代码会是这样的：

```
$maxNid = 0;
$sqlToCheckNID = "SELECT (?)=MAX(nid) FROM testRetailerlist";
$param_nid = array(&$maxNid, SQLSRV_PARAM_OUT);   
$maxNidInDb = sqlsrv_query($conn, $sqlToCheckNID, $param_nid);
echo "<li>" .$maxNid. "<li>"; 
```

有关详细信息，请参阅[文档](http://www.php.net/manual/en/function.sqlsrv-query.php)。

# php - 卷曲 url onclick 按钮

> ID：15448162
> 
> 赞同：0
> 
> 时间：2013-03-16T10:30:34.727
> 
> 标签：php, curl

我试图将我的代码中的 url 卷曲到一个页面，但 curl 不起作用，我已经通过以下方式对其进行了测试

```
$url="http://merimobiles.com/cart.php?action=add&product_id=9949"
echo file_get_contents($url); 
```

它给出了未找到的错误，卷曲代码在这里

```
$ch = @curl_init();
@curl_setopt($ch, CURLOPT_URL, $url);
@curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_REFERER,$url);
$response = @curl_exec($ch);
@curl_close($ch);
echo $response; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:52:34.657

从 curl_init、curl_setopt、curl_exec 中删除 @ 并检查错误：

```
$response = curl_exec($ch);
if ($response === false) {
    echo 'Curl error: ' . curl_error($ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:53:02.797

我在这个网址中看到了什么

```
http://merimobiles.com/cart.php?action=add&product_id=9949 
```

被重定向到

```
http://www.merimobiles.com/cart.php?suggest=51444ec01e7a2 
```

你应该设置 curl 选项

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
```

# java - 访问包含“this”对象的对象的字段和方法

> ID：15448163
> 
> 赞同：1
> 
> 时间：2013-03-16T10:30:55.073
> 
> 标签：java, contain

示例代码：

```
public class A {
    B b = new B();
    int a = 17;
}

public class B {
    int getA() {
        // how to get 'a' field from object containing 'this' object 
    }
} 
```

我的问题与示例代码中的注释相同。一般来说：如何从包含“this”对象的对象访问字段和方法。在我的示例中，B 类将仅作为 A 类中的字段实例化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:32:33.703

如果您的出发点是 中的代码`B`，那么您不能这样做。没有办法找到并找到`B`VM 中所有类中使用的任何地方。

此外，如果您发现自己想要这样做，则表明您需要重新审视您的班级结构。例如，您可能在构造函数中`B`接受了一个`A`参数`B`：

```
public B(A owner) {
    // ...do something with owner object
} 
```

但是，这会在`A`和之间引入相当紧密的耦合，这可能是一个问题。相反，您可以将需要了解`B`的方面抽象到接口中，实现该接口，并接受使用该接口键入的参数。`A``B``A``B`

或者避免需要`B`了解有关 的任何信息`A`，这通常是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:34:05.263

试试这个：

```
class A {
    B b = new B(this);
    int a = 17;
} 
```

和

```
class B {
    A a;
    public B(A a) {
        this.a=a;
    }
    int getA() {
        return a.a;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T10:40:02.743

创建类`this`对象时，您需要传递对对象的引用：`A``B`

```
public class A {
    B b = new B(this);
    int a = 17;
}

public class B {
    A mA = null;
    public B(A pA) { mA = pA; }
    int getA() {
        int a2 = mA.a;    
    }
} 
```

另一种可能性是在类 A 中声明类 B。对于这样的类，在创建封闭类的对象时，对封闭对象的“this”值的引用将自动作为隐藏参数传递：

```
public class A {
    B b = new B();
    int a = 17;

  public class B {
    int getA() {
       int a2 = A.this.a;
    }
  }
} 
```

请注意，如果您将类声明`B`为静态，这会将内部类转换`B`为普通的顶级类，并且`this`外部类的值将不再执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T10:42:57.713

您必须存储对 A 实例的引用：

```
public class A {
    B b = new B(this);
    int a = 17;
}

class B {
    public B(A a) {
        this.a = a;
    }

    private final A a;

    int getA() {
        return a.a;
    }
} 
```

...或者如果 Aa 是一个常量，则将其声明为：

```
public class A {
    B b = new B(this);
    public static final int a = 17;
}

class B {    
    int getA() {
        return A.a; // but then you could use A.a at the call site anyway
    }
} 
```

哪个最适合您取决于您​​要解决的实际问题。您应该发布您的真实代码以获得进一步的建议。

# php - 使用 MySQL 表值作为标题

> ID：15448167
> 
> 赞同：1
> 
> 时间：2013-03-16T10:31:24.933
> 
> 标签：php, header, while-loop, mysql

我有一个 MySQL 表，其中的值包含体育比赛的评委。布局示例：

```
Table name = competition

panel   | name | role
Grade 1 | Bob  | Judge 1
Grade 1 | Dave | Judge 2
Grade 2 | Jo   | Judge 1
Grade 1 | Kat  | Judge 3 
```

我想以以下格式在 HTML 中显示它：

```
-- Grade 1 --
Judge 1 | Bob
Judge 2 | Dave
Judge 3 | Kat
-- Grade 2 --
Judge 1 | Jo 
```

面板名称是可变的，并且在竞争之间会发生变化，因此不能在代码中使用它们。我的尝试（不起作用）是：

```
<?php $panels_distinct = mysql_query("SELECT DISTINCT panel FROM competition"); ?>

   <table>

<?php while $panel_names = mysql_fetch_array($panels_distinct) { ?>

   <tr>
      <td colspan="2"><?php echo $panel_names['panel'] ; ?></td>
   </tr>

   <?php $judges = mysql_query("SELECT * FROM competition WHERE panel = $panel_names['panel'] ") ; 
   while $judges_info=mysql_fetch_array($judges) { ?>

      <tr>
         <td><?php echo $judges_info['role'] ; ?></td>
         <td><?php echo $judges_info['name'] ; ?></td>
      </tr>

   <?php } // end while $judges_info ?>

<?php } // end while $panel_names ?>

   </table> 
```

目前只输出面板名称。任何帮助或建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:35:51.287

`DISTINCT`从 sql 中删除。你也想`ORDER BY grade`在表名之后。

要获得您显示的格式，您需要检测循环中成绩何时发生变化，然后打印标题行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:10:00.000

一个问题是您应该在要比较的值周围加上单引号：

```
panel = '$panel_names['panel']' " ); 
```

另一个问题是 php 不喜欢在嵌入字符串时解析带有引号的数组键。您可以将数组包围在 {} 中：

```
panel = '{$panel_names['panel']}' " ); 
```

# ajax - AJAX、缓存和时间戳

> ID：15448174
> 
> 赞同：1
> 
> 时间：2013-03-16T10:31:59.913
> 
> 标签：ajax, jsp, caching, timestamp

我对缓存问题感到绝望。我通过 AJAX 调用 jsp 站点，我根本不会取回更新代码，而是取回旧版本。当我删除浏览器缓存和服务器缓存时也会发生同样的情况。我读到在 url 中使用时间戳，这听起来很合理。所以我添加了，但内容根本不会更新。我很少通过使用打印出随机字符串的随机 out.println 命令向我的代码发送垃圾邮件来让它工作。显然那不是很有效..呵呵

知道可能是什么问题吗？这很严重，让我发疯。

编辑：

好的，关于情况的一些更新： * 看来浏览器不是罪魁祸首。用 Mozilla 和 IE 做了一些测试。由于某种原因，服务器上似乎仍然发生了一些缓存。* 显然它不仅发生在执行 AJAX 请求时，我在 index.jsp 上也遇到了同样的问题。

考虑到我在没有 AJAX 的情况下遇到同样的问题，我不太确定它是否可以用于在 AJAX 上发布源代码。我会再次查看服务器设置，看看那里是否有问题。

# jquery - 样式未应用

> ID：15448175
> 
> 赞同：1
> 
> 时间：2013-03-16T10:32:05.693
> 
> 标签：jquery, asp.net-mvc-3, razor

我在 asp.net mvc 中工作。我在布局文件中包含了多个 JS 和 CSS 文件。我正在使用 JQuery 的 .Load() 方法在链接的单击事件后加载部分页面。问题是样式在加载后未应用于部分页面的元素。

# java - 二叉搜索树中的重复项

> ID：15448176
> 
> 赞同：0
> 
> 时间：2013-03-16T10:32:08.820
> 
> 标签：java, binary-search-tree

在二叉搜索树中处理重复项的优雅方法是什么？让我们假设每个键都有几个不同的关联值。我需要做的是按顺序遍历所有值。因此，如果我有 2 个值 A 和 B 与键 1，以及一个值 C 与键 2，我想得到对：（1，A），（1，B），（2，C），当调用类似TreeIterator.next();

我能想到：

*   每个节点都有一个键和一个值数组，其中具有相同键的值
*   每个节点都有一个`visited`标志

还有其他建议吗？作为一般准则，我希望 Tree 实现尽可能抽象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:54:29.707

听起来基本上你*确实*想要每个键的值列表，是的。所以添加到地图的过程是：

*   密钥存在吗？
    *   如果是这样，请将值添加到现有列表中。
    *   如果没有，请在树中的适当点（正常）创建一个新节点，并从一个值的列表开始

遍历地图时，您的一般模式是：

*   从左节点产生所有值（较小的键）
*   产生此节点的所有值 - (key, value1), (key, value2) 等
*   从右节点产生所有值（较大的键）

当然，如果您不需要出于学习目的自己实现此功能，则可以使用现成的多图，例如[Guava](http://guava-libraries.googlecode.com)的[`TreeMultimap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/TreeMultimap.html). 如果你*是*为了自学而实现它，我会从实现一个“正常”的二进制搜索映射开始，然后从那里继续。

# c++ - 将类添加到 QScriptEngine

> ID：15448179
> 
> 赞同：0
> 
> 时间：2013-03-16T10:32:31.563
> 
> 标签：c++, qt4, qtscript

这是我如何将类的实例添加到 QScriptEngine 的示例：

```
void Window::runCurrentScript(QRect rect)
{
    Rectangle *script_mouse = new Rectangle(rect.normalized());

    QScriptEngine engine;

    QScriptValue o2 = engine.newQObject(script_mouse);
    engine.globalObject().setProperty("mouse", o2);

    p_current_script = editor->toPlainText();

    // Run the currently selected script...
    QScriptValue result = engine.evaluate(p_current_script);

    canvas->repaint();
} 
```

所有这一切都很好，但我希望能够在我的脚本中创建新的矩形，如下所示：

```
var rect = new Rectangle(); 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:37:17.563

```
static QScriptValue Window::RectangleConstructor(QScriptContext *context, QScriptEngine *engine)
{
    QObject *parent = context->argument(0).toQObject();

    Rectangle *rectangle;
    switch(context->argumentCount())
    {
        case 2:
            rectangle = new Rectangle(context->argument(0).toInteger(), context->argument(1).toInteger());
        break;

        case 4:
            rectangle = new Rectangle(context->argument(0).toInteger(), context->argument(1).toInteger(),
                                    context->argument(2).toInteger(), context->argument(3).toInteger());
        break;

        default:
            rectangle = new Rectangle(parent);
        break;
    }

    return engine->newQObject(rectangle, QScriptEngine::ScriptOwnership);
}

void Window::runCurrentScript(QRect rect)
{
    Rectangle *script_mouse = new Rectangle(rect.normalized());

    QScriptEngine engine;

    QScriptValue o2 = engine.newQObject(script_mouse);
    engine.globalObject().setProperty("mouse", o2);

    QScriptValue rectConstructor = p_engine->newFunction(RectangleConstructor);
    QScriptValue rectMetaObject = p_engine->newQMetaObject(&Rectangle::staticMetaObject, rectConstructor);
    engine.globalObject().setProperty("Rect", rectMetaObject);

    p_current_script = editor->toPlainText();

    // Run the currently selected script...
    QScriptValue result = engine.evaluate(p_current_script);

    canvas->repaint();
} 
```

# javascript - 用主干处理权限

> ID：15448180
> 
> 赞同：5
> 
> 时间：2013-03-16T10:32:32.867
> 
> 标签：javascript, backbone.js, client

我正在用主干构建一个新项目，我想知道用它处理用户权限的最佳方法是什么。例如，如果我希望某些用户不会呈现特定控件。它的逻辑应该在哪里？我在想也许在 View 的初始化函数上检查这个并用它包装渲染函数。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:02:54.697

我建议您参考 Addy Osmany 的[大型 Javascript](http://addyosmani.com/largescalejavascript/)论文。他描述了`Facade`其中也负责处理权限的想法。

[光环](http://addyosmani.github.com/aura/)项目打算应用这个概念，但现在权限功能在那里缺失，就像我一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:25:36.243

授权和身份验证等所有安全任务都应由服务器管理。在客户端绕过它们非常容易，使客户端中的所有 auth/acl 操作都无关紧要。使用会话和 cookie 通过服务器实现来管理它。

[在此处](https://stackoverflow.com/questions/11410059/suggested-bootstrap-boilerplate-sample-for-backbone-marionette-application/11598371#11598371)查看 userSession.js 文件

# objective-c - MAC OS X 10.8 上的所有用户应用程序首选项

> ID：15448185
> 
> 赞同：4
> 
> 时间：2013-03-16T10:33:00.787
> 
> 标签：objective-c, macos, cocoa, preferences

在 MAC OS 10.8.x 上，应用程序是否可以在不使用辅助工具（例如 SMJobBless）的情况下存储全局首选项（即适用于所有用户）？

我试图写入应用程序包，试图找到所有用户的 R/W 位置，但两次尝试都没有运气。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:48:07.817

*在这里留下这个答案，但它可能对你不起作用，因为你可能需要特权访问才能`CFPreferencesSetValue()`拨打电话。自从我完成其中之一以来已经有好几年了。*

如果您不需要它来处理沙盒，那么您想要的工具是较低级别的首选项界面，`CFPreferences`. 具体来说，您可以将`CFPreferencesSetValue()`和`CFPreferencesCopyValue()`与`kCFPreferencesAnyUser`.

这可能适用于沙盒应用程序，但我还没有尝试过。根据有关“使用核心基础管理首选项”的[首选项和设置编程指南：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/UserDefaults/AccessingPreferenceValues/AccessingPreferenceValues.html)

> 对于安装在沙盒中的应用程序，无法在应用程序域之外进行写入。

这暗示它是合法的，因为这是在应用程序域内。但是沙盒应用程序很有可能会在每个用户的沙盒中写入该应用程序域首选项，因此它实际上不会起作用。你必须尝试一下。

# javascript - 如何使 html 和 UI 相关的 javascript 代码耦合度降低？

> ID：15448186
> 
> 赞同：0
> 
> 时间：2013-03-16T10:33:07.523
> 
> 标签：javascript, jquery

通常有一些代码来初始化 UI 组件。例如，需要在 UI 中设置一些 ui`document.ready`或`bind`向 UI 设置事件。

据我了解，我们不应该将这些代码放在 html 文件中。但我担心的是，如果我将这些初始化代码放到单独的 js 文件中，它似乎仍然与 html 文件高度耦合，因为我需要对 UI 类/id 进行硬编码才能选择它。**将 html 和 UI 相关的 javascript 解耦的通常做法/架构是什么？**如果您能提供一些简单的示例，那就太好了。

**视图.js**

```
function init() {
    $("#some_view").click(sth);
    $("#some_view").text(sth);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:12:54.407

虽然，我一直在想这件事只有天知道，但我不相信它可以是一个直截了当的答案。这就是为什么

DOM 元素可以在没有定义的情况下被遍历`id, class, rel or any other attribute`，但这可能会伤害你的速度部门，仍然不能排除对 html 结构的依赖。

拥有`id`确实比它可能拥有的任何缺点都有优势。通过属性选择 DOM 元素`id`是获取元素的最快方式。

您需要将 js 与 html 文件分开，因为它允许浏览器缓存。即使从开发人员的角度来看，将事物组织起来也很不错。

但是通过一种简单、更好和推荐的方法，您可以减少必须更改属性（如`id`.

```
// have selectors defined once and use that object later.
var someView = $("#some_view");

// use someView everywhere (within scope)

someView.click(sth);
someView.text(sth); 
```

这实际上更快，因为在将`$('#some_view')`对象分配给`someView`. 下次使用时，就不需要遍历了。即使您必须将`id`from更改`#some_view`为`#something_else`，也只能在一个地方完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:41:38.890

或者，您可以将 html 元素的 id 传递给函数。作为：

```
function init(id) {
    $(id).click(sth);
    $(id).text(sth);
} 
```

在 HTML 文件中，将脚本标记内的函数调用为 init("#some_view");

# java - 是否有某种 Java 注册表？

> ID：15448188
> 
> 赞同：2
> 
> 时间：2013-03-16T10:33:20.730
> 
> 标签：java, registry, option

是否有某种 JRE 附带的注册表并且不会随 JRE 更新而改变？我想保存一些值——比如窗口位置、使用的路径或许可证——但不想将它们保存到文件中。

另一种方法是加密文件（例如许可证文件）或 xml 文件（例如选项文件）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:43:48.020

您可以为此使用 Java Preferences API：

[http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html)

但我同意 Jon Skeet 的观点，将这类东西存储在文件中会更好。例如，在更换计算机或在不同计算机之间同步时，它更容易使用。

您可以为此使用`Properties`文件。

# delphi - 带有默认按钮的表单上的 TMemo 中的换行符

> ID：15448189
> 
> 赞同：8
> 
> 时间：2013-03-16T10:33:21.780
> 
> 标签：delphi, firemonkey-fm2

我在使用 FireMonkey 编写的应用程序中有一个表单。在该（模态）表单上有一个确定按钮，我已将其默认属性设置为 True。还有一个备忘录组件。现在，如果在输入备忘录时按回车键，则表单将关闭，而不是在备忘录中插入换行符。

我想要完成的是，当在备忘录组件中按下 enter （或 shift+enter 或类似的 smth ）时，输入换行符。在无法键入换行符的其他组件中，我仍然希望按 Enter 键关闭表单。到目前为止，我发现的最好的方法是将以下代码添加到表单 OnCloseQuery 操作中：

```
if (Focused.GetObject.ClassName = 'TMemo') and (ModalResult = mrOk) then
begin
  CanClose := False;
  Memo := TMemo(Focused.GetObject);
  Memo.InsertAfter(Memo.CaretPosition, sLineBreak, [TInsertOption.ioMoveCaret,
    TInsertOption.ioCanUndo]);
end
else
  CanClose := True; 
```

这行得通，但是现在在按回车键之后和出现换行符之前会有一点烦人的延迟。我也想要解决方案，那样会不那么老套。

我还应该指出，我也有包含 OK 按钮的表单，但不包含备忘录组件，但是通过更改其父属性，备忘录将在运行时移动到该表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:12:07.713

设置`btnOk.Default`在`False`你的备忘录中`OnEnter`，然后回到`True`备忘录中`OnExit`

# iphone - iOS后台音频链接器错误

> ID：15448190
> 
> 赞同：1
> 
> 时间：2013-03-16T10:33:44.767
> 
> 标签：iphone, ios, objective-c, avplayer

错误;

```
undefined symbols for architecture i386:
    "_AudioSessionSetProperty", referenced from:
    -[AppDelegate applicationDidFinishLaunching:] in AppDelegate.o
    ld: symbol(s) not found for architecture i386
        clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在使用的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // Override point for customization after application launch.

    // Set AudioSession
    NSError *sessionError = nil;
    [[AVAudioSession sharedInstance] setDelegate:self];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&sessionError];

    /* Pick any one of them */
    // 1\. Overriding the output audio route
    //UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    //AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof(audioRouteOverride), &audioRouteOverride);

    // 2\. Changing the default output audio route
    UInt32 doChangeDefaultRoute = 1;
    AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(doChangeDefaultRoute), &doChangeDefaultRoute);

    [self.window addSubview:rootController.view];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

（来自[https://devforums.apple.com/thread/90684?start=0&tstart=0](https://devforums.apple.com/thread/90684?start=0&tstart=0)并且[此应用程序是在 ios 5.0 下开发并运行良好，但在 ios 4.3 下崩溃](https://stackoverflow.com/questions/8397223/this-app-was-developed-and-works-fine-under-ios-5-0-but-crashes-under-ios-4-3)以及[如何让我的 AVPlayer 在应用程序运行时播放在后台？](https://stackoverflow.com/questions/4771105/how-do-i-get-my-avplayer-to-play-while-app-is-in-background)）

最后是我的清单：

![在此处输入图像描述](../Images/25f31069fd5cdb8adf4db1ce6c154ae0.png) 问题是什么？在我的 appdelegate 标题中：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, AVAudioPlayerDelegate> {

} 
```

似乎一切都是进口的。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:52:52.033

这就是我如何让它在后台播放音频：

```
// Allow to play in background
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive:YES error:nil]; 
```

这也修复了上述错误：

通过右键单击框架 -> 添加 -> 现有框架，将 AudioToolbox 和 AVFoundation 框架添加到您的项目中

# android - 安卓设备中的egnos定位

> ID：15448191
> 
> 赞同：6
> 
> 时间：2013-03-16T10:33:47.540
> 
> 标签：android, gps, location

为了在我正在构建的 android 应用程序中获得非常精确的准确性，我想使用 Egnos 定位。我查看了测试应用程序和 SDK，但似乎需要外部蓝牙天线。有没有办法让它在没有任何额外材料的情况下在安卓设备上工作？也许某些设备完全兼容 egnos/waas ？

阅读他们的文档，我还看到他们使用研发算法来提高准确性（即使它不在官方推荐中）。这些改进不能在没有egnos 的情况下使用，只需要一个普通的android GPS 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-21T19:16:52.683

该线程似乎超过两年，但我想添加下面的行。

正如“**欧洲卫星服务提供商 ( [http://www.essp-sas.eu](http://www.essp-sas.eu) )** ” 直接回答我的那样，Rolintocour 是正确的，没有额外（外部）硬件的帮助，EGNOS 目前不是智能手机上的启用技术（设备） - 正如下面的报价所写。

如果编辑不会将其视为普通广告，那么 GloPos ( [http://www.glopos.com](http://www.glopos.com) ) 有可能成为此类精确 SBAS 技术（EGNOS、WAAS 等）的合适替代品，前提是其准确性可以进一步提高。 ，因为它不需要任何额外的（外部）硬件（设备）。

这里“**欧洲卫星服务提供商 ( [http://www.essp-sas.eu](http://www.essp-sas.eu) )** ”的回答是关于这个主题的（截至 2015 年 6 月 10 日）：

> 可以通过两种不同的方式接收 EGNOS 信息：
> 
> 1.  EGNOS 地球同步 (GEO) 卫星空间信号（EGNOS 开放服务），带有与 SBAS (WAAS/EGNOS) 兼容的 GPS 接收器。由于目前商用智能手机中没有多少芯片组支持 EGNOS，除非您确定您的智能手机可以处理 EGNOS，否则可能不建议使用此选项。：
>     
>     
> 2.  EGNOS 数据访问服务 (EDAS)，需要 GPS 接收器/设备/系统提供 GPS 原始数据，并具有处理 EDAS 数据的能力并连接到互联网。
>     
>     
>     
>     不幸的是，据我们所知，目前市场上没有支持 EGNOS 的智能手机。智能手机通常包含一个 GPS 芯片组，它为操作系统/应用层提供定位解决方案。为了使用 EGNOS，您需要通过外部设备访问 EGNOS 增强消息，或者最好通过互联网访问，例如，EDAS SISNeT 服务。EDAS SISNeT 提供对使用 SISNeT 协议通过互联网传输的 EGNOS GEO 卫星消息的实时访问。请参阅 EDAS 服务定义文档了解更多详细信息 ( [http://egnos-user-support.essp-sas.eu/new_egnos_ops/?q=content/egnos-sdds](http://egnos-user-support.essp-sas.eu/new_egnos_ops/?q=content/egnos-sdds) )。
>     
>     
>     
>     为了通过智能手机获得 EGNOS 增强型定位解决方案，您需要解决的第二个问题是访问 GPS 测量（原始数据），因为 EGNOS 校正将应用于 GPS 测量而不是 GPS 位置解决方案。即使有几个芯片组提供原始数据作为输出，我们也不知道目前有任何智能手机正在安装它们。因此，为了访问 GPS 测量结果，将需要外部接收器。
>     
>     
>     
>     我们建议您访问 EGNOS 门户的 EGNOS 工具包部分 ( [http://egnos-portal.gsa.europa.eu/developer-platform/egnos-toolkits](http://egnos-portal.gsa.europa.eu/developer-platform/egnos-toolkits) )；特别是，您可能会对 EGNOS SDK 感兴趣。EGNOS SDK 的诞生旨在为那些愿意在智能手机中开发基于 EGNOS 的应用程序的人提供一个良好的起点。这是一款适用于 Android 的软件，它可以简化您设置此类解决方案的编程任务，因为它至少部分包含通过蓝牙与外部接收器连接以检索 GPS 测量值的代码，连接到 SISNeT 服务以检索 EGNOS 消息和 EGNOS 解决方案的计算。一个简单的用户指南，包括源代码，可从以下网址下载[http://egnos-portal.gsa.europa.eu/developer-platform/egnos-toolkits/egnos-sdk/download-egnos-sdk](http://egnos-portal.gsa.europa.eu/developer-platform/egnos-toolkits/egnos-sdk/download-egnos-sdk)
>     
>     
>     
>     但是，EGNOS SDK 仍然不能完全兼容最初设想的 EDAS SISNeT 服务，只支持 ESA SISNeT 服务。不幸的是，我们不是该工具的所有者，但我们正在与欧洲 GNSS 机构 (GSA) 联系，以分析此兼容性问题，并在需要时采取适当的措施。
>     
>     
>     
>     此外，Lefebure NTRIP 客户端是另一个应用程序，它还允许您使用外部接收器来获取 GPS 原始数据。NTRIP 客户端是您在流动站附近所需的软件，可替代 GNSS 网络电台。它从 Internet 获取数据并将其发送到串行端口供流动站使用（通常通过串行端口）。此应用程序可用于 windows PC 和 android 设备。作为 EGNOS SDK，此应用程序允许用户在智能手机上使用时通过蓝牙接口从外部 GNSS 接收器接收数据。您可以在以下链接中找到更多信息：http: [//lefebure.com/software/ntripclient](http://lefebure.com/software/ntripclient)
>     
>     
>     
>     计算您的位置的另一个解决方案是 RTKLib。RTKLIB 是一个开源程序包，用于使用 GNSS 进行标准和精确定位。但是，此工具不能通过智能手机使用，您必须从计算机启动。在以下链接中可以找到与此工具相关的更多信息：[http ://www.rtklib.com](http://www.rtklib.com)
>     
>     
>     
>     如果您需要任何其他说明，请随时与我们联系。
>     
>     
>     
>     此致，
>     
>     
>     
>     EGNOS 帮助台

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:06:29.693

您将通过普通天线接收 EGNOS 信号。在人口稠密的城市地区，有时设备可能无法看到两个 EGNOS 卫星中的任何一个。

今天的 GPS 接收器支持 EGNOS，默认启用。

你从哪里得到需要外接天线的信息？您不能连接蓝牙 GPS 天线，这样的事情不存在。GPS 天线必须通过电线连接。

存在的是带有集成天线的外部 GPS 接收器，通过蓝牙连接。

# perl - do while 循环出现问题

> ID：15448192
> 
> 赞同：0
> 
> 时间：2013-03-16T10:33:48.443
> 
> 标签：perl

这是脚本

```
#!/usr/bin/perl
use strict;
use  warnings;
my($dayago, $prefix, $today_timestamp, $f,
   $sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst,
   $daysago, $now, $old, @oldbackup);

opendir(DIR, "/home/ftpusr/backup/") || die("Error cannot open directory");

$now    = time();
$dayago = 3;

#($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($now-$dayago*60*60*24);
#$today_timestamp=sprintf("%4d%02d%02d",$year+1900,$mon+1,$mday);
#$old_timestamp=

$prefix = ".CATN0000.";

do {
    ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst)
      = localtime($now - $dayago * 60 * 60 * 24);
    $today_timestamp = sprintf("%4d%02d%02d", $year + 1900, $mon + 1, $mday);
    while ($f = readdir(DIR)){
        if ( $f =~ /$prefix$today_timestamp/ ) {
            print "$f\n";
        }
    }
    $dayago -= 1;
    print "$dayago\n";
    print "$today_timestamp\n";
} until ($dayago == 0);
closedir(DIR); 
```

这是目录中的文件

```
-rw-r----- 1 db2inst1 db2grp1  184569856 2013-03-13 10:24 GSRTC.0.db2inst1.NODE0000.CATN0000.20130313102253.001
-rwxr-xr-x 1 db2inst1 db2grp1        259 2013-03-13 13:00 space_check.sh
-rw-r----- 1 db2inst1 db2grp1 1071665152 2013-03-14 10:06 AWDRT.0.db2inst1.NODE0000.CATN0000.20130314095856.001
-rw-r----- 1 db2inst1 db2grp1  184569856 2013-03-14 10:20 GSRTC.0.db2inst1.NODE0000.CATN0000.20130314101854.001
-rw-r--r-- 1 db2inst1 db2grp1          0 2013-03-14 13:49 bkp.sh
-rwxrwxrwx 1 db2inst1 db2grp1       1070 2013-03-14 20:12 awdrt_tabspc_report.sh
-rw-r----- 1 db2inst1 db2grp1 1085296640 2013-03-15 10:11 AWDRT.0.db2inst1.NODE0000.CATN0000.20130315100434.001
-rw-r----- 1 db2inst1 db2grp1  184569856 2013-03-15 10:30 GSRTC.0.db2inst1.NODE0000.CATN0000.20130315102900.001
-rw-r----- 1 db2inst1 db2grp1 1075859456 2013-03-16 12:16 AWDRT.0.db2inst1.NODE0000.CATN0000.20130316121043.001 
```

当我运行脚本时，输出是：

```
GSRTC.0.db2inst1.NODE0000.CATN0000.20130313102253.001
2
20130313
1
20130314
0
20130315 
```

相反，我想要这些文件：

```
-rw-r----- 1 db2inst1 db2grp1 1071665152 2013-03-14 10:06 AWDRT.0.db2inst1.NODE0000.CATN0000.20130314095856.001
-rw-r----- 1 db2inst1 db2grp1  184569856 2013-03-14 10:20 GSRTC.0.db2inst1.NODE0000.CATN0000.20130314101854.001
-rw-r----- 1 db2inst1 db2grp1 1085296640 2013-03-15 10:11 AWDRT.0.db2inst1.NODE0000.CATN0000.20130315100434.001
-rw-r----- 1 db2inst1 db2grp1  184569856 2013-03-15 10:30 GSRTC.0.db2inst1.NODE0000.CATN0000.20130315102900.001 
```

我想要的是它应该保留最后一个文件并删除旧备份。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:21:57.810

我不太清楚您要做什么，但这与按名称中嵌入的日期对文件进行排序（并且可能删除？尽管您没有删除任何内容）有关。让我首先指出模块[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece)，它可以让您获得信息，`localtime`除了存储在一个方便的对象中。[`strptime`此外，您可以使用类方法](https://metacpan.org/module/Time%3a%3aPiece#Date-Parsing)从格式化时间创建它们。

在下面的脚本中，我创建了一个数组引用数组，每个文件对应一个与模式匹配的文件。arrayref 的第一个元素是文件名，第二个元素是`Time::Piece`从名称中日期字符串的前 8 位创建的对象。我还创建了一个代表现在的对象。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Time::Piece;

my $now = localtime();

my $prefix = "CATN0000";
opendir(my $dir, "/home/ftpusr/backup/") || die("Error cannot open directory: $!");

my @files;
while ( my $file = readdir $dir ) {
  $file =~ /\.$prefix\.(\d{8})\d*\.\d{3}/ or next;
  push @files, [ $file, Time::Piece->strptime( $1, '%Y%m%d') ];
} 
```

从这个起点开始，您可以通过比较`Time::Piece`对象进行排序，将它们与`$now`对象进行比较，然后对文件执行任何您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:24:37.860

1.  如果您不理解您的代码，请重新格式化和重构它，直到它尽可能清晰为止。例如，您可以将时间戳生成代码放在单独的子例程中，因为细节只会减损循环的意图。
2.  不要预先声明你的变量。这是无害的，使寻找错误变得困难，并且是伪装的全局变量。相反，在使用它们的最内层范围内声明（并立即初始化）您的变量。
3.  不要使用裸词作为文件或目录句柄。

现在谈谈实际问题：

1.  列表上下文中使用的`readdir`函数将返回该目录中的所有项目。在标量上下文中使用，它返回下一个条目，或者`undef`如果没有其他项目可用。这使它成为一个迭代器。要重置迭代器，您必须重新打开目录。最好将所有项目读入一个数组，然后选择那些与特定模式匹配的项目。
2.  在正则表达式中，句`.`点是一个元字符，默认匹配任何非换行符。要匹配文字点，您必须对其进行转义，或将其括在`\Q...\E`引号中。

## 以下是一些可能对您有所帮助的代码：

### 一个计算给定时间戳的子`$days_ago`：

```
{ # begin a enclosing scope for private variable
    my $now = time;
    my $secs_per_day = 24 * 60 * 60;

    sub timestamp {
      my ($ago) = @_;
      # we can use `undef` for vars we don't use
      my (undef, undef, undef, $mday, $mon, $year)
          = localtime( $now - $ago * $secs_per_year);
      return sprintf '%04d%02d%02d', $year + 1900, $mon + 1, $mday;
    }
} 
```

### 读入目录中的所有文件：

```
my $directory = '/foo/bar';
my @files = do {
  opendir my $dir, $directory or die "Can't open $directory: $!";
  readdir $dir;
}; 
```

这使用了一个`do`块。词法文件或目录句柄一旦超出范围就会自动关闭。该变量`$!`包含失败的*原因*。

### 选择所有匹配的文件：

```
sub matching_files {
    my ($days_ago, $files) = @_;
    my $timestamp = timestamp($days_ago)
    return grep /\Q .CATN0000\. $timestamp \E/x, @$files;
} 
```

这需要几天前，以及对我们文件数组的引用。正则表达式上的`/x`修饰符允许我们包含不匹配的空格以获得更好的格式。sub 可以被称为`my @interesting = matching_files(7, \@files)`（参见参考运算符`\`）。

### 获取和打印最多两天前的所有文件

```
for my $days_ago (reverse 0 .. 2) {
   my @interesting = matching_files($days_ago, \@files);
   print "Days ago: $days_ago\n";
   print "$_\n" foreach @interesting;
} 
```

范围运算符`..` 创建了我们反转的序列`0, 1, 2`。像这样的循环结构`for`可以显示为尾随语句修饰符。内部`foreach`将每个项目放入`$_`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:38:23.213

哟，这个对我有用.......

```
#!/usr/bin/perl
use strict;
use warnings;

my($dayago,$prefix,$today_timestamp,$f,$sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst,$daysago,$now,$old,@oldbackup);
#opendir(DIR, "/home/ftpusr/backup/") || die("Error cannot open directory");
$now=time();
$dayago=3;
#($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($now-$dayago*60*60*24);
#$today_timestamp=sprintf("%4d%02d%02d",$year+1900,$mon+1,$mday);
#$old_timestamp=
$prefix = ".CATN0000.";
do {
($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($now-$dayago*60*60*24);
opendir(DIR, "/home/ftpusr/backup/") || die("Error cannot open directory");
$today_timestamp=sprintf("%4d%02d%02d",$year+1900,$mon+1,$mday);
while ($f = readdir(DIR)){
  if ( $f =~ /$prefix$today_timestamp/ ) {
        print "$f\n";
        }
}
$dayago -= 1;
print "$dayago\n";
print "$today_timestamp\n";
}until ($dayago == 0);
closedir(DIR); 
```

有没有更好的解决方案？？？？？？

# java - 在 DefaultTableModel 的接下来两列中显示输出

> ID：15448193
> 
> 赞同：0
> 
> 时间：2013-03-16T10:33:50.880
> 
> 标签：java, swing, jtable, resultset, defaulttablemodel

抱歉，我是 Java 新手，我正在尝试从我的数据库中包含 **set_ID** 、**Buying_Rate** 和**Selling_Rate的****Transaction**表中获取值。我只想从 Transaction 表中显示**Buying_rate** 和**Selling_rate 。**我想将 Transaction 表中的数据显示到 **Sell Rate**列 和**Buy Rate 列**。这是我的尝试

 ******```
 DefaultTableModel model2 = (DefaultTableModel) provider.p1.getModel();

        try {
          Connection conn = DriverManager.getConnection("jdbc:mysql://remote-mysq3003.servage.net:3306/alpha?zeroDateTimeBehavior=convertToNull", "username", "password");

            Statement st = conn.createStatement();
            Statement st_cus = conn.createStatement();
            String query = "Select *from currency";
            ResultSet rs = st.executeQuery(query);
            String fx_rates = "Select Buying_Rate, Selling_Rate from Transaction";
            ResultSet rsx = st.executeQuery(fx_rates);
            while (rs.next()) {
                String d1 = rs.getString("currency_code");
                String d2 = rs.getString("Rate");
                String d3 = rsx.getString("Buying_Rate");
                String d4 = rsx.getString("Selling_Rate ");
                model2.addRow(new Object[]{d1, d2});
                model2.addColumn(new Object[]{d3, d4});
            }
            rs.close();
            rsx.close();
            st.close();
            st_cus.close();
            conn.close();
        }
        catch (Exception e) {
            JOptionPane.showMessageDialog(this, "erro in Database");
         } 
```

![在此处输入图像描述](../Images/5e56a9403e788b79869cde1dfd4beb96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:48:30.170

我需要在我的 while 循环中插入 && 条件并使用 *model2.addRow(new Object[]{d1, d2,d3,d4});* 处置添加列。

```
try {
          Connection conn = DriverManager.getConnection("jdbc:mysql://remote-mysq3003.servage.net:3306/alpha?zeroDateTimeBehavior=convertToNull", "username", "password");

            Statement st = conn.createStatement();
            Statement stx = conn.createStatement();
            String query = "Select currency_code,Rate from currency";
            String queryx = "Select Buying_Rate, Selling_Rate from Transaction";
            ResultSet rs = st.executeQuery(query);
            ResultSet rsx = stx.executeQuery(queryx);
            while (rs.next()&& rsx.next()) {
                String d1 = rs.getString("currency_code");
                String d2 = rs.getString("Rate");
                String d3 = rsx.getString("Selling_Rate");
                String d4 = rsx.getString("Buying_Rate");
                model2.addRow(new Object[]{d1, d2,d3,d4});

            }               
            rsx.close();
            rs.close();
            stx.close();
            st.close();
            conn.close();
        }
        catch (Exception e) {
            JOptionPane.showMessageDialog(this, "erro in Database");
         } 
```

![在此处输入图像描述](../Images/1683a3b51d397fe3bd107098d300c94f.png)

感谢你们******

# java - 在哪里可以找到 PhoneGap 教程？

> ID：15448194
> 
> 赞同：-4
> 
> 时间：2013-03-16T10:33:55.880
> 
> 标签：java, android, iphone, html, cordova

嗨朋友们，我是一名 Android 开发人员，我有 java 背景，但在我公司，我们必须在 android 和 I-Phone 中开发大部分项目。我的公司希望我学习Phone-gap或其他东西，我可以在哪里用一种技术开发项目并在Android和Iphone或Blackberry等上运行。

如果你们通过提供一些关于电话差距的良好基本启动教程的链接来帮助我，你们将不胜感激。

PS。在 My Company 的项目中，我们不需要太多 android 的核心功能，我们只是有需要简单逻辑和用户界面的项目。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:37:13.160

开始构建跨平台移动应用程序！从入门指南到文档，我们拥有您开始使用 PhoneGap 所需的一切。[参考](http://docs.phonegap.com/en/2.5.0/index.html)

# architecture - Haproxy 在清漆前还是相反？

> ID：15448196
> 
> 赞同：45
> 
> 时间：2013-03-16T10:34:20.510
> 
> 标签：architecture, varnish, haproxy

我可以想象两种设置：

**负载均衡然后缓存**

```
 +-- Cache server #1 (varnish) -- App server #1
                         /
Load Balancer (haproxy)-+---- Cache server #2 (varnish) -- App server #2
                         \
                          +-- Cache server #3 (varnish) -- App server #3 
```

**缓存然后负载平衡**

```
 +-- App server #1
                                                      /
Cache Server (varnish) --- Load Balancer (haproxy) --+---- App server #2
                                                      \
                                                       +-- App server #3 
```

第一种设置的问题是有多个缓存，这会浪费大量内存并使缓存失效更加复杂。

第二种设置的问题是可能存在性能损失和两个单点故障（清漆和 haproxy），而不仅仅是一个（haproxy）？

我很想使用第二种设置，因为 haproxy 和 varnish 都应该是快速和稳定的：你的意见是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-03T16:37:21.930

几年前，我为一个繁忙的 Web 应用程序构建了一个类似的设置（只是我使用 Squid 而不是 Varnish），并且效果很好。

我建议使用您的第一个设置（HAProxy -> Varnish）并进行两项修改：

1.  `keepalived`使用共享虚拟 IP添加辅助 HAProxy 服务器
2.  使用`balance uri`负载均衡算法优化缓存命中

优点：

*   HAProxy (x2) 和 Varnish (x3) 冗余让您高枕无忧
*   使用 HAProxy URI 负载平衡选项提高 Varnish 的命中率效率
*   缓存服务器的性能更好，因为它们不需要在内存中保留太多
*   使缓存失效更容易，因为相同的 URI 每次都会转到相同的服务器

缺点：

*   URI 平衡效果很好，但是如果缓存服务器出现故障，您的后端服务器将受到打击，因为从更新的 URI 平衡哈希中获取松弛的其他缓存服务器将需要重新检索缓存的数据。也许不是一个大骗局，但我确实必须为我的系统记住这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-16T13:47:48.787

两者都有优点和缺点。更多在下面的博客文章中，包括 HAProxy 和 Varnish 的配置： [http ://blog.exceliance.fr/2012/08/25/haproxy-varnish-and-the-single-hostname-website/](http://blog.exceliance.fr/2012/08/25/haproxy-varnish-and-the-single-hostname-website/)

巴蒂斯特

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-17T19:53:31.770

为什么不使用 2 LB，第一个 LB 可以使用`balance uri`选项，第二个 LB 可以使用您选择的策略（工作负载，循环）

```
 +-- Cache Server #1 --+                +-- App server #1
         /                       \              /
LB #1 --+                         + -- LB #2 --+---- App server #2
         \                       /              \
          +-- Cache Server #2 --+                +-- App server #3 
```

在您需要的地方进行扩展，您需要多少。如果你发现你在 Cache 上没有瓶颈，只需移除 LB#1 并在前面只放置一个 Cache 服务器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-21T11:49:01.570

当然是第一个！

为基于 URI 的平衡配置了 HAProxy。（如果您有与 IP 平衡模式相反的应用程序用户会话，则需要分发您的应用程序用户会话）。

特别是如果您需要 HTTPS 端点，因为 Varnish 不使用 HTTPS。

# c# - 卡在 C#/XNA 游戏中创建撤消功能

> ID：15448197
> 
> 赞同：1
> 
> 时间：2013-03-16T10:34:23.603
> 
> 标签：c#, xna, undo

所以我想要我在游戏中使用的 MapEditor 的撤消功能。我得到了部分工作。当我点击地图时，它会将新旧图块存储在单独的列表中。当我按 Ctrl + Z 时，它将撤消最后一个操作，依此类推。

我的问题是当您撤消一些操作，然后将新操作添加到列表中时。那应该怎么办？我应该在列表末尾添加新操作，还是应该从列表中的当前位置删除所有内容直到最后，然后将新操作添加到列表中。

我的问题是我无法解决这个问题。我已经尝试了多种方法，但是当这种情况发生时，它们都被破坏了。

同样，我需要知道在将新操作添加到撤消列表时如何进行。

**添加到撤消列表时我当前的代码：**

```
private void UpdateCorrectedTiles(Dictionary<TileSide, Tile> correctedTiles, bool saveEditedTiles)
{
    List<Tile> tmpUndoTilesList = new List<Tile>();
    List<Tile> tmpRedoTilesList = new List<Tile>();

    foreach (Tile tile in tiles)
    {
        foreach (KeyValuePair<TileSide, Tile> correctedTile in correctedTiles)
        {
            if (tile.GetTilePosition() == correctedTile.Value.GetTilePosition())
            {
                if (correctedTile.Key == TileSide.Clicked && saveEditedTiles
                    && Tile.IsTileChanged(previousClickedTile, correctedTile.Value))
                {
                    Tile undoTile = Tile.CreateCloneTile(previousClickedTile);
                    Tile redoTile = correctedTile.Value;

                    tmpUndoTilesList.Add(undoTile);
                    tmpRedoTilesList.Add(redoTile);
                }

                TileInfo info = correctedTile.Value.GetTileInfo();
                Vector2 frames = correctedTile.Value.GetCurrentFrame();

                tile.SetTileInfo(info);
                tile.SetCurrentFrame(frames);
            }
        }
    }

    if (saveEditedTiles && tmpUndoTilesList.Count > 0 && tmpRedoTilesList.Count > 0)
    {
        undoTilesList.Add(tmpUndoTilesList);
        redoTilesList.Add(tmpRedoTilesList);

        currentUndoRedoIndex = undoTilesList.Count - 1;
    }
} 
```

这段代码的作用是在 Foreach 中，它将遍历所有已更正的图块。如果更正的图块是被点击的图块并且它实际上已经改变了，它将把它添加到撤消和重做列表中。您现在应该忽略重做列表，因为重做功能尚未实现。我想让撤消功能首先工作。

因此，在函数的最后一部分，我将新操作添加到列表中，但同样，我认为我需要做其他事情，然后当您在列表中的某个位置而不是最后时添加。

希望你明白我想要什么。
谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:48:41.677

撤消的标准预期行为是您可以撤消操作，然后重做以返回到使用撤消之前...除非您执行新操作！新操作会删除所有重做功能。

为了帮助概念化（括号显示当前状态）：

第 1 幕 -> 第 2 幕 -> （第 3 幕）

撤消两次给...

(Act1) -> Act2 -> Act3

现在，如果没有采取新的操作，您可以在此时重做。现在，如果用户执行 NewAction，我们会得到：

Act1 -> (NewAct2)

……就是这样！Act3 现在刚刚被遗忘，像昨天的垃圾一样被丢弃。替代方案太难实现并且使用起来非常不直观！就像您创建一个图块，更改颜色，然后在创建图块之前撤消并在其他地方创建图块一样。如果你重做，新的瓷砖会改变颜色吗？旧瓷砖会以新颜色重新出现吗？如果再次撤消，重做是否会返回第一组编辑而不是最后一组？呸！

这就是像 Photoshop 这样的复杂程序的工作方式，因此期望地图编辑器以其他方式运行是不合理的。许多程序甚至不支持重做，所以你是否想要支持它取决于你！这只是那些让事情变得比他们更难的时代之一。

基本上，您似乎可以按原样进行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:37:02.913

一般来说，你应该有一个 Stack of IMapChange，其中 IMapChange 看起来像这样：

```
public interface IMapChange
{
    //Performs the change on a TileMap
    Boolean PerformChange(TileMap map);

    //Reverts the change on a TileMap
    Boolean RevertChange(TileMap map);
} 
```

您应该有一个被调用来进行更改的方法：

```
public void SetTile(Vector2 position, int tileId)
{
    Tile oldTile = Map.GetTile(position);

    Tile newTile = new Tile(position, tileId);

    MapChange change = new MapChange(oldTile, newTile);

    //Only push to cahngestacks if successfull    
    if (change.PerformChange(Map))
    {
        ChangeStack.Push(change);

        //We don't want you to be able to "redo" anymore if you do something new.
        RedoStack.Clear();
    }
}

public void RemoveTile(Vector2 position)
{
    Tile oldTile = Map.GetTile(position);

    Tile newTile = null;

    MapChange change = new MapChange(oldTile, newTile);

    //Only push to changestacks if successfull    
    if (change.PerformChange(Map))
    {
        ChangeStack.Push(change);

        //We don't want you to be able to "redo" anymore if you do something new.
        RedoStack.Clear();
    }
} 
```

撤消可能如下所示：

```
public void Undo()
{
    var lastChange = ChangeStack.Pop();

    //Try to revert. If revert fails, put the change back in the stack
    if (!lastChange.RevertChange(Map))
        ChangeStack.Push(lastChange);
    else
        RedoStack.Push(lastChange);
} 
```

并像这样撤消：

```
public void Redo()
{
    var lastChange = RedoStack.Pop();

    //Try to perform. If successfull, put back in ChangeStack
    if (lastChange.PerformChange(Map))
        ChangeStack.Push(lastChange);
    else
        RedoStack.Push(lastChange);
} 
```

PerformChange 和 RevertChange 基本上是：

执行：
- 如果 oldTile 不为空，请尝试将其从地图中删除。
- 将 newTile 插入地图。

还原：
- 如果 newTile 不为空，则将其从地图中删除
- 将 oldTile 插入地图。

# php - 在执行函数之前检查sql中的日期时间

> ID：15448203
> 
> 赞同：0
> 
> 时间：2013-03-16T10:34:51.987
> 
> 标签：php, mysql, function, datetime

好的，我在 Mysql 数据库表中获得了带有日期时间列的信息。我还有一个 php 函数来执行并​​用一个条目填充这个表。

我想要的是检查列中的日期。如果是一个月或几天大。php 函数执行并使用新信息更新表条目。如果日期小于一个月。另一个函数将被执行并且只从数据库中获取信息而不更新它。

所以

```
if ($datetimeCheck) {
    // function 1
} else {
    // function 2
} 
```

这张支票看起来如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:39:38.470

尽管到目前为止您还没有包含“您尝试过的内容”，但可能会对您有所帮助*；*

[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:56:21.423

它应该是这样的

```
 $sid = SPRequest::sid(); // $sid is id of sobipro entry  
    $time1 = SPFactory::db()->select( 'createdtime', '#__sobipro_field_api', array(  'sid' => $sid ))->loadResult();
    $timeFromMysql = strtotime($time1);
    $time = SPRequest::now();
if (abs($timeFromMysql - $time) > 30*24*60*60) { 
```

# python - Cron不会将python脚本保存到txt文件

> ID：15448205
> 
> 赞同：0
> 
> 时间：2013-03-16T10:34:53.510
> 
> 标签：python, date, cron, temperature

我的 python 脚本有问题。我想将数据从串行中保存，每 5 分钟使用一次 python 脚本到 txt 文件。

我的 Cron 脚本：

```
*/5 * * * * root /home/user/temperature.py >> /home/user/temperature.txt 
```

我的python脚本：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# pytemp.py

import serial
import time

ser = serial.Serial('/dev/ttyACM0',9600, timeout=10)
read = ser.read(5)
comp = read.split()
ser.close();
print time.strftime("%Y-%m-%d %H:%M:%S"), comp[0] 
```

Cron 创建文件 temperature.txt 但它是空的。

如果我使用命令 python temperature.py 运行脚本，它可以很好地显示日期和温度。

有人可以帮我吗？

//编辑：

嘿，

我发现错误 - 我的带有 python 脚本的文件夹没有正确 chmoded。我更改了脚本的目的地，现在没问题，但我发现我的脚本有问题。温度显示为：

```
2013-03-16 13:40:01 166.8
2013-03-16 13:41:02 1617. 
```

它应该看起来像：

```
20013-03-16 13:40:01 16.68 
```

例如。

如何编辑我的 python 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:38:59.197

你有没有尝试过

```
*/5 * * * * root python /home/user/temperature.py >> /home/user/temperature.txt 
```

?

# haskell - Yesod ExitFailure 1 安装脚手架应用程序时

> ID：15448206
> 
> 赞同：10
> 
> 时间：2013-03-16T10:35:10.007
> 
> 标签：haskell, yesod

我正在尝试安装我的第一个脚手架 Yesod 应用程序。当我运行`cabal-dev install && yesod --dev devel`它时，ExitFailure 1 失败。我使用 sqlite 进行持久化。

```
Application.hs:49:44:
No instance for (monad-logger-0.3.1:Control.Monad.Logger.MonadLogger
                   IO)
  arising from a use of `runMigration'
Possible fix:
  add an instance declaration for
  (monad-logger-0.3.1:Control.Monad.Logger.MonadLogger IO)
In the second argument of `Database.Persist.Store.runPool', namely
  `(runMigration migrateAll)'
In a stmt of a 'do' block:
  Database.Persist.Store.runPool dbconf (runMigration migrateAll) p
In the expression:
  do { manager <- newManager def;
       s <- staticSite;
       dbconf <- withYamlEnvironment
                   "config/sqlite.yml" (appEnv conf) Database.Persist.Store.loadConfig
                 >>= Database.Persist.Store.applyEnv;
       p <- Database.Persist.Store.createPoolConfig
              (dbconf :: PersistConfig);
       .... }
Failed to install testProject-0.0.0
cabal.exe: Error: some packages failed to install:
testProject-0.0.0 failed during the building phase. The exception was:
ExitFailure 1 
```

我尝试按照此处的说明进行操作：[http](http://www.yesodweb.com/book/scaffolding-and-the-site-template) : //www.yesodweb.com/book/scaffolding-and-the-site-template 尚未找到有关此问题的任何信息。关于缺少什么的任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-02T19:20:21.100

使用[Control.Monad.Logger](http://hackage.haskell.org/packages/archive/monad-logger/0.3.0/doc/html/Control-Monad-Logger.html)`runFooLoggingT`中的功能之一。特别是有.`runNoLoggingT`

这可能比将自己固定到旧版本的库中要好得多！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T10:56:24.763

错误消息表明该`MonadLogger IO`实例丢失。问题是安装的版本`monad-logger`太新了。包括你需要`monad-logger-0.2.4` [的实例](http://hackage.haskell.org/packages/archive/monad-logger/0.2.4/doc/html/Control-Monad-Logger.html)`monad-logger-0.3.0`，上面[显然没有](http://hackage.haskell.org/packages/archive/monad-logger/0.3.0/doc/html/Control-Monad-Logger.html)。

解决方案：添加`&& < 0.3.0`到`monad-logger`您的 cabal 文件中的行并`cabal install --only-dependencies`再次执行。

（如果没有`monad-logger`行，添加一个喜欢`, monad-logger < 0.3.0`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-20T15:36:51.953

我仍然对变压器感到满意，因此按照 Colin 的回答，这是完全禁用日志记录的一种非常快速的方法：

```
import Control.Monad.Logger (MonadLogger, monadLoggerLog)
import Control.Applicative  (pure)

instance MonadLogger IO where
    monadLoggerLog _ _ _ = pure $ pure () 
```

它基本上重新实现`NoLoggingT`了`MonadIO`.

然而，一旦你在你的代码库上得到了这个快速修复，你应该像我现在所做的那样前往 Haskell Wiki 上的[Monad Transformers页面；](http://www.haskell.org/haskellwiki/Monad_Transformers))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T14:06:58.363

`withSqliteConn`仅供参考，我通过将提供给作为参数的值与构造函数包装起来克服了这个问题`NoLoggingT`，它允许在堆栈`withSqliteConn`中找到某个位置，然后我用`MonadLogger``runNoLoggingT`

```
mainWithExplicitConnection2:: IO ()
mainWithExplicitConnection2 =
    runNoLoggingT $ withSqliteConn ":memory:" $ \conn ->
        NoLoggingT $ flip runSqlPersistM conn $ runMigration migrateAll 
```

# windows - Windows 8 应用商店应用程序能否通过 UDP/TCP 套接字与 Windows 7 桌面应用程序通信？

> ID：15448207
> 
> 赞同：1
> 
> 时间：2013-03-16T10:35:29.313
> 
> 标签：windows, sockets, networking, websocket

详细说明一下情况：我们有两个应用程序，为了简单起见，我们称它们为 A 和 B。两者都在 Windows 7 上开发和运行，它们可以使用 UDP/TCP 很好地连接和通信。现在我们要将 App B 转换为 Windows 8 以利用 Metro UI。我们是否需要对 App A 中的网络代码进行大量更改？它甚至可以继续在 Windows 7 上运行并与在 Windows 8 上运行的 App B 通信吗？据我了解，Win8 处理套接字的方式与以前的 Windows 略有不同，因此我对此表示怀疑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T01:40:08.450

只是从不同的角度来看，通信在技术上是可行的，但[明确禁止](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)（假设您想在 Windows 应用商店中发布您的应用程序）：

> 3 Windows 应用商店应用程序的行为可预测
> 
> 3.1 您必须仅使用 Windows 运行时 API 来实现您的 Windows 应用商店应用程序的功能
> 
> 我们在 Windows 应用商店应用 API 参考中描述了这些 API。您的应用程序可能仅依赖于 Windows 应用商店中列出的软件。
> 
> **Windows 应用商店应用不得通过本地机制（包括文件和注册表项）与本地桌面应用程序或服务进行通信。**

如果这是您将要为企业使用而侧载的东西，那么请忽略此答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:01:48.937

没有理由不这样做。

我已经拥有使用套接字与服务器通信的 Windows 8 Metro 应用程序，出于测试目的，我还在 Windows 8 机器上运行该服务器，同时让 Metro 应用程序连接到 127.0.0.1。它完美无缺。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T11:22:27.433

> 我们是否需要对 App A 中的网络代码进行大量更改？

不，您不需要更改 A 中的任何内容。

> 它甚至可以继续在 Windows 7 上运行并与在 Windows 8 上运行的 App B 通信吗？

当然。

> 据我了解，Win8 处理套接字的方式与以前的 Windows 略有不同。

在 IO 完成端口方面，Windows 7 和 Windows 8 之间存在[一些差异](https://stackoverflow.com/q/12145378/704144)，但不，我认为这不是问题。

# django - django模板块覆盖

> ID：15448211
> 
> 赞同：1
> 
> 时间：2013-03-16T10:35:37.353
> 
> 标签：django, django-templates, overriding

我正在用 django 开发一个应用程序，但我不知道如何使用 Django 模板系统通过模板继承来实现块覆盖。

我有一个`base.html`模板：

```
[...]
<body>
{% block content %}
{% endblock %}
</body>
[...] 
```

有`index.html`一个显示 JS 滑块的模板（它的内容直接位于`body`标签中）：

```
{% extends "base.html" %}

{% block content %}
// some javascript/css slider stuff here
{% endblock %} 
```

并且有一些动态内容页面：`list.html`、`form.html`等（它们的内容应驻留在某些`div`容器中）。我`container.html`以某种方式定义如下：

```
{% extends "base.html" %}

{% block content %}
<div class="container marketing">
    <div class="container">
        {% put overriden "content" block here %}
    </div>
</div>
{% endblock %} 
```

然后我可以`list.html`这样定义：

```
{% extends "container.html" %} # note what I'm extending here!

{% block content %}
this is my list
{% endblock %} 
```

**为什么？**

我想让我的基本模板尽可能通用（例如启用客户端滑块 - 没有`div`容器）。我想将我的大部分动态页面（列表、表单等）包装在同一个 HTML 容器代码中。由于我不想重复此代码，因此它应该在一个模板中可用（通过列表、表单等扩展的模板）。

我知道我可以在里面定义另一个块。但也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:29:12.763

如果我理解正确，您实际上想要的是 container.html 看起来像这样：

```
{% extends "base.html" %}

{% block content %}
<div class="container marketing">
    <div class="container">
        {% block content %}

        {% endblock %}
    </div>
</div>
{% endblock %} 
```

因此，您要重新定义`content`继承 container.html 的模板的块是什么？

**如果不更改模板语言本身**，我认为这是不可能的，但我发现自己也想做这件事。我不喜欢子模板必须关心它们是否继承全角模板、左侧边栏模板或基本模板才能知道将主要内容放入哪个块名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:51:51.800

乍一看，我认为您可以有两种方法：

*   将内部内容块重命名为 content_inner
*   有两个或多个块内容模板，并从您的视图或设置（或会话或其他）扩展一个或另一个。要扩展最后一个选项：

base.html、content_col_right.html、content_col_left.html 等，在 content.html 中：

```
{% extends variable_name %} 
```

还有更多选项，但会使您的模板 html（id 和类）非常附加到您的视图代码。喜欢

提示：不要害怕上下文处理器并自己制作。

# python - 带有 Pyramid 的 Sqlalchemy 批量插入

> ID：15448221
> 
> 赞同：0
> 
> 时间：2013-03-16T10:36:45.967
> 
> 标签：python, sqlalchemy, pyramid

我有一个需要使用循环插入多次的对象。每次循环迭代我都会更改一些字段值。我的代码是：

```
@view_config(route_name="be.bautocredits.rates.add",
             request_method="POST",
             permission="admin",
             renderer="json")
def _add_rates(self):
    _ = self.request.translate
    controls = self.request.POST.items()
    schema = AutocreditRateSchema()
    try:
        schema.deserialize(controls)
        rate = AutocreditRate()
        rate.autocredit = Autocredit.by_rid(self.request.POST.get('_autocredits_rid'))
        rate.carshow = Carshow.by_rid(self.request.POST.get('_carshows_rid'))
        rate.currency = Currency.by_rid(self.request.POST.get('_currencies_rid'))
        rate.min_cost_currency = Currency.by_rid(self.request.POST.get('min_cost_currencies_rid'))
        rate.max_cost_currency = Currency.by_rid(self.request.POST.get('max_cost_currencies_rid'))
        rate.min_currency = Currency.by_rid(self.request.POST.get('min_currencies_rid'))
        rate.max_currency = Currency.by_rid(self.request.POST.get('max_currencies_rid'))
        rate.manufacturer = Manufacturer.by_rid(self.request.POST.get('_manufacturers_rid'))
        rate.autocredit.updated = datetime.datetime.now()

        _cars_rids = list(set(self.request.POST.getall('_cars_rid')))
        if _cars_rids:
            for _cars_rid in _cars_rids:
                rate.car = Car.by_rid(_cars_rid)
                DBSession.add(rate)
        else:
            DBSession.add(rate)

    except colander.Invalid, e:
        return dict(errors=dict(e.asdict().items()+dict(status_bar=_(u'Check errors')).items()))
    return dict() 
```

此代码仅插入单行。由于某些原因，我不能直接在“try block”开始设置循环。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:18:30.410

`DBSession.add`向会话添加一个对象（顾名思义） - 当时没有发出 SQL 查询，`.add`只是让会话知道该对象。

在提交会话之前，您可以继续修改对象的属性 - 无论您将对象添加到会话中多少次，只会将一行添加到数据库中。

您*可以*通过一些巧妙的会话刷新来完成您想要做的事情，但是，严肃地说，为什么不为每一行创建一个单独的对象呢？这就是 ORM 通常的工作方式。

```
def _add_rates(self):
    _ = self.request.translate
    controls = self.request.POST.items()
    schema = AutocreditRateSchema()
    try:
        schema.deserialize(controls)
        _cars_rids = list(set(self.request.POST.getall('_cars_rid')))
        autocredit = Autocredit.by_rid(self.request.POST.get('_autocredits_rid'))
        carshow = Carshow.by_rid(self.request.POST.get('_carshows_rid'))
        currency = Currency.by_rid(self.request.POST.get('_currencies_rid'))
        min_cost_currency = Currency.by_rid(self.request.POST.get('min_cost_currencies_rid'))
        max_cost_currency = Currency.by_rid(self.request.POST.get('max_cost_currencies_rid'))
        min_currency = Currency.by_rid(self.request.POST.get('min_currencies_rid'))
        max_currency = Currency.by_rid(self.request.POST.get('max_currencies_rid'))
        manufacturer = Manufacturer.by_rid(self.request.POST.get('_manufacturers_rid'))
        if _cars_rids:
            for _cars_rid in _cars_rids:
                rate = AutocreditRate(autocredit=autocredit, carshow=carshow, ...)
                rate.car = Car.by_rid(_cars_rid)
                rate.autocredit.updated = datetime.datetime.now()
                DBSession.add(rate)
        else:
            rate = AutocreditRate(autocredit=autocredit, carshow=carshow, ...)
            rate.autocredit.updated = datetime.datetime.now()
            DBSession.add(rate) 
```

# c# - LINQ to Datatable Group by 并返回所有列

> ID：15448222
> 
> 赞同：4
> 
> 时间：2013-03-16T10:36:51.783
> 
> 标签：c#, linq

我有一个数据表

```
ID  Age Last name   First Name  Sex class   Father_Name Mother_Name Marks
1   20  A   B   M   1   A   B   50
1   20  A   B   M   1   A   B   50
1   20  A   B   M   1   A   B   100
2   15  F   G   F   2   H   J   40
2   15  F   G   F   2   H   J   50 
```

＆我希望在应用 Linq Group 后获得以下结果

```
1   20  A   B   M   1   A   B   200
2   15  F   G   F   2   H   J   90 
```

我能够得到总和，但我无法得到 LINQ 组中的其他列

任何人都可以帮忙吗

```
var drResults = from r1 in dtResults.AsEnumerable()
                            group r1 by new 
                                {
                                   MarksSum=  r1.Field<int>("Marks"),

                                }
                                into g
                            select new
                            {

                                    Total = g.Sum(r1=>r1.Field<int>("Marks"))                                   
                            }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T10:44:02.940

```
var _result =   from r1 in dtResults.AsEnumerable()
                group r1 by new
                {
                    ID = r1.Field<int>("ID"),
                    Age = r1.Field<int>("Age"),
                    LastName =  r1.Field<int>("LastName"),
                    FirstName = r1.Field<int>("FirstName"),
                    Sex =  r1.Field<int>("Sex"),
                    Class =  r1.Field<int>("class"),
                    Father_Name =  r1.Field<int>("Father_Name"),
                    Mother_Name =  r1.Field<int>("Mother_Name")
                } into g
                select new
                {
                    ID = g.Key.ID,
                    Age = g.Key.Age,
                    LastName =  g.Key.LastName,
                    FirstName = g.Key.FirstName,
                    Sex =  g.Key.Sex,
                    Class =  g.Key.Class,
                    Father_Name =  g.Key.Father_Name,
                    Mother_Name =  g.Key.Mother_Name,
                    TotalMark = g.Sum(x => x.Field<int>("Marks"))
                }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T10:45:12.277

你想按`Id`?! 然后你可以`Sum`在`Marks`组上使用：

```
var result = from r in dtResults.AsEnumerable()
             group r by r.Field<int>("ID") into IdGroup
             let row = IdGroup.First()
             select new
             {
                 ID = IdGroup.Key,
                 Age = row.Field<int>("Age"),
                 LastName = row.Field<string>("Last_Name"),
                 FirstName = row.Field<string>("First_Name"),
                 MotherName = row.Field<string>("Mother_Name"),
                 FatherName = row.Field<string>("Father_Name"),
                 Marks = IdGroup.Sum(r => r.Field<int>("Marks"))
             }; 
```

**更新**

> 嘿蒂姆，如果所有行都有不同的值，那我该怎么办？例如，姓氏不同，ID 相同。我有一些数据已损坏，或者在我问的这种情况下您可以说是多余的。

展示如何“修复”您的`DataTable`. 但是，如果您想列出所有行，即使它们具有相同的 ID，但`Mark`每个 Id-Group 的总和不正确，您可以使用以下查询：

```
var result = from r in dtResults.AsEnumerable()
             group r by r.Field<int>("ID") into IdGroup
             let IdTotalMarks = IdGroup.Sum(r => r.Field<int>("Marks"))
             from row in IdGroup
             select new
             {
                 ID = IdGroup.Key,
                 Age = row.Field<int>("Age"),
                 LastName = row.Field<string>("Last Name"),
                 FirstName = row.Field<string>("First Name"),
                 MotherName = row.Field<string>("Mother Name"),
                 FatherName = row.Field<string>("Father_Name"),
                 Marks = IdTotalMarks
             }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T11:12:47.320

JW 对 Lambda 语法的回答（我还重命名了字段“class”，因为这不会编译）：

```
 var _result = dtResults
            .AsEnumerable()
            .GroupBy(r1 => new
            {
                ID = r1.Field<int>("ID"),
                Age = r1.Field<int>("Age"),
                LastName =  r1.Field<string>("LastName"),
                FirstName = r1.Field<string>("FirstName"),
                Sex =  r1.Field<int>("Sex"),
                Class =  r1.Field<int>("class"),
                Father_Name =  r1.Field<string>("Father_Name"),
                Mother_Name =  r1.Field<string>("Mother_Name")
            }).Select(g => new
            {
                ID = g.Key.ID,
                Age = g.Key.Age,
                LastName =  g.Key.LastName,
                FirstName = g.Key.FirstName,
                Sex =  g.Key.Sex,
                Class =  g.Key.Class,
                Father_Name =  g.Key.Father_Name,
                Mother_Name =  g.Key.Mother_Name,
                TotalMark = g.Sum(x => x.Field<int>("Marks"))
            }); 
```

# joomla - 使用 .strip_tags($this->item->introtext)。用宏

> ID：15448224
> 
> 赞同：1
> 
> 时间：2013-03-16T10:37:01.017
> 
> 标签：joomla, strip-tags

我正在使用[RokCandy](http://www.rockettheme.com/extensions-joomla/rokcandy)宏扩展。此扩展从简单的文本创建复杂的 HTML 代码，因此更容易为某些对象提供常规格式。

问题是，在每篇文章的开头我都有一个让 Facebook OG 工作的代码：

```
<meta property="og:description" content="'.strip_tags($this->item->introtext).'"/> 
```

好吧，现在的问题是：由于宏在读取打印 META 描述之后产生了技巧，因此 HTML 标记不会被剥离，因为它们是在之后插入的。所以我在页面头部插入了很多 iframe、对象和表格，使格式一团糟。

我已经问过 RokCandy 的创作者，但还没有答案。您知道去除所有标签的有效方法吗？

谢谢

* * *

我编辑：

* * *

我找到了一个不好的解决方案（字符串被删除，但代码很乱）：

```
$data= $this->item->introtext;
$new_data = str_replace  ("[", "", $data); 
```

接着：

```
<meta property="og:description" content="'.strip_tags($new_data).'"/> 
```

调整是我删除了 [ 使宏起作用的字符。但我无法删除其中的代码（例如：[youtube]）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:36:36.327

让它变得更好一点：

```
$doc =& JFactory::getDocument();
$data= $this->item->introtext;
$bideogabe = str_replace  ("[youtube]", "http://youtu.be/", $data);
$bestelakoak = array("[/youtube]", "[", "]");
$new_data = str_replace ($bestelakoak, "", $bideogabe); 
```

接着：

```
<meta property="og:description" content="'.strip_tags($new_data).'"/> 
```

# python - 在 Python 中销毁和重新创建 TK 窗口

> ID：15448225
> 
> 赞同：-2
> 
> 时间：2013-03-16T10:37:06.937
> 
> 标签：python, multithreading, window, tk

我使用 python 在线程中创建了一个根窗口。然后接下来是我需要销毁它并创建一个新窗口，但是出现一个错误，说线程只能启动一次。我怎样才能开始一个新的窗口窗体？

```
class SignUp(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.mw=Tkinter.Tk()
        self.mw.geometry("800x600""+290+50")
        self.mw.title("Registration Form")
        self.mw.resizable(width=False,height=False)
    self.regs=Tkinter.Button(self.canvas, text= "Log-in",font="{Arial} 12 {bold}",bg='black',fg='white',command=self.login)
    self.regs.place(rely=0.82,relx=0.1,relwidth=0.30)
        self.start()

    def login(self):
        self.mw.destroy()
        self.mw.geometry("650x700""+350+20")
        self.mw.title("Py cos")
        self.mw.resizable(width=False,height=False)
        self.canvas= Tkinter.Canvas(self.mw)
        self.canvas.pack(expand='yes',fil='both')
        self.photo= Tkinter.PhotoImage(file='Image/vote.gif')
        self.canvas.create_image(0,0,image=self.photo,anchor='nw')

def run(self):
    self.client = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
    self.client.connect(('localhost',500))
    #self.client.connect(('169.254.57.141',500))
    self.rec=self.client.recv(1024)
    self.canvas.create_text(105,595,text=self.rec, font="{Arial} 8 {bold}", fill = 'yellow')

if __name__=="__main__":
    SignUp().mw.mainloop() 
```

这段代码给了我

```
RuntimeError: threads can only be started once 
```

如何在避免此错误的同时创建一个窗口、销毁它并再次创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:00:31.157

如果您使用线程，您可以执行以下操作：-

```
from tkinter import *
from threading import Thread
class App():
    def __init__(self):
        self.g=Tk()
        self.th=Thread(target=self.g.mainloop)
        self.th.start()
    def destroy(self):
        self.g.destroy() 
```

如果您不使用线程，您可以在您的应用程序中放置一个中止按钮，如下所示：-

```
class App():
    def __init__(self):
        self.g=Tk()
        self.bu=Button(self.g,text='Abort',command=self.Abort)
        self.bu.pack()
        self.g.mainloop()
    def Abort(self):
        self.g.destroy() 
```

我认为你的代码应该是这样的： -

```
class SignUp(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.mw=Tkinter.Tk()
        self.mw.geometry("800x600""+290+50")
        self.mw.title("Registration Form")
        self.mw.resizable(width=False,height=False)
        self.regs=Tkinter.Button(self.mw, text= "Log-in",font="{Arial} 12 {bold}",bg='black',fg='white',command=self.login)
        self.regs.place(rely=0.82,relx=0.1,relwidth=0.30)
        self.start()

    def login(self):
        self.mw.destroy()
        self.mw=Tkinter.Tk()
        self.mw.geometry("650x700""+350+20")
        self.mw.title("Py cos")
        self.mw.resizable(width=False,height=False)
        self.canvas= Tkinter.Canvas(self.mw)
        self.canvas.pack(expand='yes',fill='both')
        self.photo= Tkinter.PhotoImage(file='Image/vote.gif')
        self.canvas.create_image(0,0,image=self.photo,anchor='nw')
        self.mw.mainloop()

    if __name__=="__main__":
        SignUp().mw.mainloop() 
```

它没有显示任何错误。

# javascript - 使用 requirejs 时访问全局对象

> ID：15448233
> 
> 赞同：10
> 
> 时间：2013-03-16T10:38:01.967
> 
> 标签：javascript, requirejs, amd

我知道不建议使用全局对象，使用 AMD 背后的整个想法是避免使用全局对象。但是对于一些遗留代码，我必须在全局对象中定义一些东西。目前代码如下所示：

```
//example2.js
define(function(){
  var globalObject = window;
  globalObject.x = ...
  globalObject.y = ...
}); 
```

它可以工作，但是对全局对象进行硬编码`window`看起来不是很好，我很想知道是否可以删除它。不使用时`define()`，代码如下所示：

```
//example1.js
x = ...
y = ... 
```

`define()`我知道，我知道你讨厌这段代码，但让我们直奔主题：如何在 requirejs的函数内部以结构化的方式访问全局变量？我希望有一个隐藏的最后一个参数传递给`define()`这样的函数：

```
//example3.js
define(function(globalObject){
  globalObject.x = ...
  globalObject.y = ...
}); 
```

或者更简单：`this`变量将指向该函数内的全局对象。例如：

```
//example4.js
define(function(){
  this.x = ...
  this.y = ...
}); 
```

**注意：**我不确定最后一个。调查`this`传递给的函数内部的变量`require()`说它等于`window`which 可以是我的问题的答案，但我无法找到任何提到传递函数正在运行的上下文的文档。也许它毕竟是在全局变量的上下文中运行的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-16T09:23:08.253

我建议您创建一个返回`window`对象的模块。这对于单元测试目的（模拟依赖项）特别有用。

**窗口.js**

```
define(function(){
   return window;
}); 
```

**应用程序.js**

```
define(['window'], function(win) {
  // Manipulate window properties
  win.foo = 1;  
  console.log(win.foo);      
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T10:40:54.133

如果你不是在严格模式下，你可以这样做：

```
(function() {
  var global = this;

  define(function(){
    global.x = ...
    global.y = ...
  });
})(); 
```

我们立即调用的外部匿名函数没有特定的特殊`this`值，因此（因为这不是在严格模式下）接收全局对象为`this`. （在严格模式下，它会接收`undefined`。）所以我们在匿名函数中抓取`this`一个变量（`global`），并从你传入的函数中使用它`define`（关闭它）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-06T05:58:01.803

@TJCrowder 的答案的一个变体，它也适用于严格模式：

```
(function(global) {
    define(function() {

        global.a="this";
        global.b="that";

    });
})(this); 
```

通过使用参数“this”（函数外部是全局范围）调用立即调用的函数，然后无论全局范围是什么，它都会作为参数“global”传递到 IIF。

这也避免了对“窗口”对象的硬编码，这是一个优势，因为这不适用于非浏览器环境。

# java - 将受信任的证书放入信任库的策略？

> ID：15448235
> 
> 赞同：0
> 
> 时间：2013-03-16T10:38:05.627
> 
> 标签：java, jakarta-ee, openssl, security, keytool

我有一个客户证书链，例如

个人证书 -> 中级证书 -> 根证书

有许多个人证书，但只有 1 个中级证书和 1 个根证书。

我想知道如何将这些证书放入 java 信任库？我认为只放中级证书就足够了，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:52:32.893

中间证书或根证书都应该这样做。

很难说哪个更好。这是在不必添加其他中间证书的便利性和可能过度信任之间的权衡......如果您不想信任根证书的其他中间证书。

# jquery - jquery-ui-slider 库扰乱了我的旧 jquery 函数

> ID：15448239
> 
> 赞同：0
> 
> 时间：2013-03-16T10:38:28.087
> 
> 标签：jquery, jquery-ui-slider, jquery-pagination

我的网站上有一个选项卡式内容。基于以下 HTML：

```
<ul class="tabContainer">
</ul>

<div id="tabContent">
     <div id="contentHolder">
        <!-- The AJAX fetched content goes here -->
     </div>
   <div id="pagination"></div>
</div> 
```

管理此 HTML 内容的函数（生成选项卡，执行获取 php 页面并在选项卡持有者中返回结果的 AJAX）：

```
$(document).ready(function(){

    var Tabs = {
        '1' : 'page1.php?p='+var,
        '2' : 'page2.php?p='+var,
        '3' : 'page3.php?p='+var,

    }
    var colors = ['blue','blue','blue'];

     var topLineColor = {
        blue:'lightblue',
        blue:'lightblue',
        blue:'lightblue',}

    var z=0;
    $.each(Tabs,function(i,j){

        var tmp = $('<li><a href="" class="tab '+colors[(z++%4)]+'">'+i+' <span class="left" /><span class="right" /></a></li>');

        tmp.find('a').data('page',j);

        $('ul.tabContainer').append(tmp);
    })

    var the_tabs = $('.tab');

    the_tabs.click(function(e){

        var element = $(this);

        if(element.find('#overLine').length) return false;

        var bg = element.attr('class').replace('tab ','');

        $('#overLine').remove();

        $('<div>',{
            id:'overLine',
            css:{
                display:'none',
                width:element.outerWidth()-2,
                background:topLineColor[bg] || 'white'
            }}).appendTo(element).fadeIn('slow');

        if(!element.data('cache'))
        {   

            $.get(element.data('page'),function(msg){
                $('#contentHolder').html(msg);
                element.data('cache',msg);
            });
        }
        else {
        $('#contentHolder').html(element.data('cache'));

        }
        e.preventDefault();

    })

    the_tabs.eq(2).click();

}); 
```

如您所见，单击选项卡时，选项卡顶部会出现一条上划线，其宽度等于其宽度。

**问题：** id=pagination 的 div 将包含`jPaginator`，这是一个使用`jquery-ui-slider`. jPaginator 的作用是分页，显示滑块并显示我们放入 div#contentHolder 的内容的页码。问题是当我包含 jquery-ui-slider 库时，选项卡的上划线无法正常工作。当我从标题中删除库脚本标签时，上划线宽度还可以，而且单击时在选项卡之间切换的方式也可以。

我认为 jquery-ui-slider 包含扰乱我的功能的功能`tab()`！帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:02:16.850

`false`我通过将externalWidth 函数作为参数解决了该解决方案。

```
width:element.outerWidth(false)-2, 
```

这是一个临时解决方案，因为在我的情况下，真正的建议是保持 jquery 和 jquery-ui-slider 的版本同步并始终保持最新。

感谢您的时间。

# c# - 我怎样才能退出这个递归循环？

> ID：15448246
> 
> 赞同：0
> 
> 时间：2013-03-16T10:39:16.123
> 
> 标签：c#, visual-studio-2010, algorithm, fibonacci

我很难弄清楚如何退出我的递归函数

我的代码是

```
 public Main()
    {
         GetFibonacci(5,20);
    }

 private void GetFibonacci(int StartNUmber, int LastNumber)
    {
        if (StartNUmber < LastNumber)
        {
            if (FibonacciRecursiveList.Count == 0 || FibonacciRecursiveList.Count == 1)
            {
                FibonacciRecursiveList.Add(StartNUmber);
            }
            else
            {
                int value = FibonacciRecursiveList[FibonacciRecursiveList.Count - 1] + FibonacciRecursiveList[FibonacciRecursiveList.Count - 2];
                FibonacciRecursiveList.Add(value);
            }
            StartNUmber++;
            GetFibonacci(StartNUmber, LastNumber);
        }
        else
        {
           return;
        }
    } 
```

在到达外部 else 循环时，代码仍然运行

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:50:20.790

当它到达 return 语句时，它不会立即返回到 main 函数。它必须通过递归调用返回 15 次才能回到 main。

返回堆栈的开销很小。只要不深入，这种递归方法就可以了。如果你想增加一个很大的数字，那么你必须将它重新编码为一个循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T10:52:53.283

您对递归调用的使用是错误的，但是，您的递归调用确实没有问题地完成。

我猜，你所看到的

> 在到达外部 else 循环时，代码仍然运行

是递归调用！当代码到达`return`语句时，该方法已经被调用了 16 次！所以 return 语句会让我们回到调用方法的地方，也就是`if`块的最后一行。之后，这个方法调用也结束了，所以执行将返回到该函数的上一次调用，恰好是同一行的第 14 次调用。这对所有调用都将继续，直到执行返回到`Main`.

您无需递归调用即可轻松实现所需的功能：

```
public void Main()
{
    FibonacciRecursiveList = new List<int>();
    GetFibonacci(5,20);
}

private void GetFibonacci(int StartNUmber, int LastNumber)
{
    while (StartNUmber < LastNumber)
    {
        if (FibonacciRecursiveList.Count == 0 || FibonacciRecursiveList.Count == 1)
        {
            FibonacciRecursiveList.Add(StartNUmber);
        }
        else
        {
            int value = FibonacciRecursiveList[FibonacciRecursiveList.Count - 1] + FibonacciRecursiveList[FibonacciRecursiveList.Count - 2];
            FibonacciRecursiveList.Add(value);
        }
        StartNUmber++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:47:19.803

要么`GetFibbonaci`返回，要么堆栈溢出并`StackOverflowException`抛出 a 。（推断这一点很简单，因为没有循环，只有递归。）除非您知道正在抛出异常，否则它必须返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T10:50:14.843

我觉得您上面的代码在 FibonacciRecursiveList 中使用以下值运行正常。但是，不确定这是否是预期/预期的输出。

```
[0] 5   int
    [1] 6   int
    [2] 11  int
    [3] 17  int
    [4] 28  int
    [5] 45  int
    [6] 73  int
    [7] 118 int
    [8] 191 int
    [9] 309 int
    [10]    500 int
    [11]    809 int
    [12]    1309    int
    [13]    2118    int
    [14]    3427    int 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T10:53:19.947

这是我运行的代码：

```
using System;
using System.Collections.Generic;
public class Main1{
public Main1()
    {
         FibonacciRecursiveList = new List<int>();
         GetFibonacci(5,20);
    }
 private List<int> FibonacciRecursiveList;
 private void GetFibonacci(int StartNUmber, int LastNumber)
    {
        if (StartNUmber < LastNumber)
        {
            if (FibonacciRecursiveList.Count == 0 || FibonacciRecursiveList.Count == 1)
            {
                FibonacciRecursiveList.Add(StartNUmber);
            }
            else
            {
                int value = FibonacciRecursiveList[FibonacciRecursiveList.Count - 1] + FibonacciRecursiveList

[FibonacciRecursiveList.Count - 2];
                FibonacciRecursiveList.Add(value);
            }
            StartNUmber++;
            GetFibonacci(StartNUmber, LastNumber);
        }
        else
        {
           return;
        }
    }

 public static void Main(string[] args) {

     Main1 main = new Main1();
     foreach(int a in main.FibonacciRecursiveList){
         Console.WriteLine(a);
     }
 }
} 
```

没有stackoverflow或无限循环！

输出：

```
5
6
11
17
28
45
73
118
191
309
500
809
1309
2118
3427 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T10:56:37.087

> 在到达外部 else 循环时，代码仍然运行吗？

我认为实际问题是 StartNUMber 值没有递归更新 BACK ，为此使用通过引用传递

真正的代码变成

```
 List<int> FibonacciRecursiveList = new List<int>();
    private void GetFibonacci(ref int StartNUmber, ref int LastNumber)
{
    if (StartNUmber < LastNumber)
    {
        if (FibonacciRecursiveList.Count == 0 || FibonacciRecursiveList.Count == 1)
        {
            FibonacciRecursiveList.Add(StartNUmber);
        }
        else
        {
            int value = FibonacciRecursiveList[FibonacciRecursiveList.Count - 1] + FibonacciRecursiveList[FibonacciRecursiveList.Count - 2];
            FibonacciRecursiveList.Add(value);
        }
        StartNUmber++;
        GetFibonacci(ref StartNUmber, ref LastNumber);
    }
    else
    {
       return;
    }
} 
```

然后打电话

```
 int T = 1;
  int T2 = 12;
  GetFibonacci(ref  T, ref  T2); 
```

让我知道我是否正确？

# php - 如何回显在重定向页面期间发布的数据，然后在重定向后回显它？

> ID：15448248
> 
> 赞同：1
> 
> 时间：2013-03-16T10:39:32.340
> 
> 标签：php, html

我在文件夹中有文件：

*   视图.php
*   控制.php

File`view.php`有两个提交按钮，可将值发布到`control.php`.

当用户单击其中一个提交按钮时，它将

*   post 值将保存在数组 $questionTemp 中；
*   数组 $questionTemp 将插入到数组 $question 中，使用 array_push($question, $questionTemp)
*   然后将页面重定向到 view.php

当用户点击另一个提交按钮时，它将

*   使用 $result = array_pop($question) 将数组 $question 弹出到数组 $result；
*   回显 $result 元素

但是当我尝试回显 $result 时我什么也没得到（我认为当我重定向页面时会有一些东西）。

我怎么这样？！？！

### 视图.php

```
<form action="control.php" method="post">

    No
    <input type="text" name="no" value="" /><br />

    Question
    <textarea name="question" rows="5" cols="20">
    </textarea><br />

    <input type="submit" value="Save" name="save" />
    <input type="submit" value="Echo" name="echo" />
</form> 
```

### 控制.php

```
<?php
    $question = array();

    if(isset($_POST['save'])){
        $questionTemp = array();
        array_push($questionTemp, $_POST['no']);
        array_push($questionTemp, $_POST['question']);

        array_push($question, $questionTemp);
        echo "<meta http-equiv=\"refresh\" content=\"0; URL=view.php \">";
    }

    if (isset($_POST['echo'])){
        $result = array_pop($question);
        echo $result[0];
        echo $result[1];
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:47:10.280

您可以尝试使用带有值的隐藏输入。在控制器中它必须是`switch`或`if`。检查 Stack Overflow 问题*[How to access the form's 'name' variable from PHP](https://stackoverflow.com/questions/846020)*。

# javascript - 在 dygraphs 的画布上下文中添加标签

> ID：15448249
> 
> 赞同：3
> 
> 时间：2013-03-16T10:39:32.580
> 
> 标签：javascript, canvas, dygraphs

我不想将画布外部的 x 和 y 标签作为 html 元素，而是将它们添加到画布中。我尝试通过将用于将标签绘制到画布中的所需代码添加到 drawcallback 来做到这一点。这不是一个有效的解决方案，因为当一个点被突出显示时，这个 fn 不会一直被调用。我自定义添加的轴标签然后消失。还尝试将标签绘制代码添加到 highlightcallback 和 unhighlight 回调，但这似乎并不优雅。我还想在需要时在画布中添加更多细节。我该如何以最优雅的方式做到这一点？

# xml - 使用 geoxml3 解析

> ID：15448257
> 
> 赞同：0
> 
> 时间：2013-03-16T10:40:05.623
> 
> 标签：xml, google-maps-api-3, xml-parsing, overlay, kml

我希望能够使用 geoxml3 将图层叠加到地图上。我一直在努力试图了解可能出了什么问题，因为它适用于点，但在涉及多边形和线串时它什么也不显示。虽然它似乎正在通过geoxml3解析器，因为缩放正在根据数据进行调整，但不会显示任何内容。

我尝试过的所有三个版本的 geoxml3，结果都是一样的。

以下是我的线串 kml 文件。请注意，该文件在谷歌地图和谷歌地球上运行良好。

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <Name>route</Name>
    <Placemark>
      <Style>
        <LineStyle>
          <color>ff0000ff</color>
        </LineStyle>
      </Style>
      <LineString>
        <coordinates>14.5077989214673,35.8935010311257 14.5077613878199,35.8935045284545 14.5077103878199,35.8935219284544 14.5076594878199,35.8935697284545 14.5076594878199,35.8935697284545 14.506821184327,35.894410303289 14.5066562791164,35.8947140342037 </coordinates>
      </LineString>
    </Placemark>
  </Document>
</kml> 
```

以下是处理解析的javascript方法。

```
function displayKml() {
    geo = new geoXML3.parser({
        map: map,
        zoom: true,
        singleInfoWindow: true        
    });
    geo.parse("Uploads/" + document.getElementById('<%= text2.ClientID %>').value);
} 
```

感谢您提供任何帮助，因为我已经花了三天时间试图弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:12:52.770

您的`<LineString>`KML 中的 没有宽度

```
 <Style>
    <LineStyle>
      <color>ff0000ff</color>
    </LineStyle>
  </Style> 
```

添加：

```
 <Style>
    <LineStyle>
      <width>1</width> 
      <color>ff0000ff</color>
    </LineStyle>
  </Style> 
```

geoxml3 的 polys 分支目前没有默认宽度（所以它是零，这意味着你看不到它）：

没有宽度的 polys 分支： [http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlB.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlB.xml)

具有宽度的 polys 分支： [http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlC.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlC.xml)

geoxml3 的 kmz 分支确实有一个默认的宽度，应该可以工作：

使用原始 KML 的 kmz 分支： [http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlB.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlB.xml)

[针对 geoxml3 打开了一个问题](https://code.google.com/p/geoxml3/issues/detail?id=82)

Fixed the issue (so the examples above all work and no longer show the problem)

# c# - 事件退订

> ID：15448258
> 
> 赞同：1
> 
> 时间：2013-03-16T10:40:14.883
> 
> 标签：c#, events, delegates

我需要取消订阅我的活动订阅的所有代表。但是我找到了两种方法来做到这一点..

```
class Cls
{
    delegate void doDel();
    static event doDel doE;

    void Uns
    {
    //first
    foreach (doDel item in doE.GetInvocationList())
    {
        doE -= item;
    }

    //second
       doE = null;
    }
} 
```

之间有什么区别？什么方法最好，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:45:49.527

第一种方法是非常正确的。正如[MSDN](http://msdn.microsoft.com/en-us/library/ms366768%28v=vs.80%29.aspx)所说：

> *   使用减法赋值运算符 (-=) 取消订阅事件：
>     
>     
>     
>     发布者.RaiseCustomEvent -= HandleCustomEvent;
>     
>     
> 
> 当所有订阅者都取消订阅事件时，发布者类中的事件实例设置为空。

# winforms - 在 C++ 中更改面板中自动滚动条的位置

> ID：15448263
> 
> 赞同：0
> 
> 时间：2013-03-16T10:41:11.857
> 
> 标签：winforms, c++-cli, panel, autoscroll

我想用 C++ 编写一个应用程序，当用户按住并移动鼠标时可以平移图像。我使用了一个面板并在上面放了一个图片框。Panel 的属性 AutoScroll 设置为 true。现在我试图在鼠标移动时改变滚动条的位置。我尝试了几种方法，但它不起作用。

为简单起见，我在这里使用 +/-100、+/-100 作为代码。我试过

```
Point p = new Point(100, 100);
panel1->AutoScrollPosition = p; 
```

它给了我以下错误：

> 无法从 'System::Drawing::Point *' 转换为 'System::Drawing::Point'"

我还尝试了以下方法。

```
panel1->AutoScrollPosition.X = 100;
panel1->AutoScrollPosition.Y = 100; 
```

但是，滚动条不会移动并始终返回 0,0。我曾尝试同时使用 -ve 和 +ve 值，但它不起作用。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:35:14.147

[System::Drawing::Point](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)是一个结构，而不是一个类。结构是值类型，不需要 new 运算符。我不是在编译器，但我相信这是你想要的语法：

```
Point p(100, 100);
panel1->AutoScrollPosition = p; 
```

（此外，Point 作为托管类型`gcnew`会更合适。`new`有效，但非常不标准，没有 API 会接受该类型的参数。）

您尝试的另一件事：

```
panel1->AutoScrollPosition.X = 100;
panel1->AutoScrollPosition.Y = 100; 
```

这不起作用，因为 Point 是一个结构。`AutoScrollPosition`返回结构的副本，这就是您修改的内容。当您尝试此操作时，C# 将给出编译器警告。如果您确实需要修改 Point 的一个组件，请执行以下操作（这适用于 C++/CLI 和 C#）：

```
Point p = panel1->AutoScrollPosition;
p.X = 100;
panel1->AutoScrollPosition = p; 
```

# c# - 您如何找到哪个窗口（句柄）拥有进程所有权？并得到那个句柄..？

> ID：15448266
> 
> 赞同：0
> 
> 时间：2013-03-16T10:41:21.957
> 
> 标签：c#, .net, winapi, process

并`EnumWindows`抓取`EnumChildWindows`许多许多窗口句柄。我只想要每个正在运行的进程的最高值。他们中的很多人从内部返回 0 `Process.GetProcesses()`，这是怎么回事？

我四处浏览并尝试了`process.Refresh();`，但没有好的结果。另请阅读其他文章。您如何`MainWindowHandle`正确抓取所有流程？

再说一遍：`EnumWindows`不仅获取主进程句柄，它还为每个进程获取许多句柄。

```
using System.Diagnostics;

Process[] p1 = Process.GetProcesses();
foreach (Process t in p1)
{
    listBox3.Items.Add(t.ProcessName + ": " + t.MainWindowHandle.ToString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:05:47.633

> 您如何找到哪个窗口需要进程所有权？

这是一个误解，肯定是你被卡住的原因。窗口不拥有进程，反之亦然。更巧妙的是，一个*线程*拥有一个窗口。一个进程拥有一个线程。

当您使用 Process.GetProcesses() 时，您将枚举*许多*根本没有任何窗口的进程。像机器上运行的所有服务一样，拥有数十个服务并不罕见。您可以使用任务管理器在“进程”选项卡中查看它们，请务必单击显示所有用户拥有的进程的选项。SysInternals 的 Process Explorer 也是一个非常好的工具，可以查看正在运行的内容。

所以不要对 Process.MainWindowHandle 返回 IntPtr.Zero 感到惊讶。还要记住，这是一个*猜测*。一个进程可以轻松拥有多个顶级窗口。其中哪一个是“主”窗口并不总是很明显。Process 类使用一个简单的规则，它假定它找到的*第*一个没有所有者且可见的顶级窗口是主窗口。

要可靠地获取进程的顶级窗口，您必须首先枚举进程中的线程。使用 Process.Threads 很容易做到。[然后对于每个线程，您通过调用EnumThreadWindows()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633495%28v=vs.85%29.aspx)来迭代它拥有的窗口。与 EnumWindows() 完全相同的想法，但仅限于特定线程并且没有 firehose 问题，并且由于在迭代时创建了一个新窗口而导致它崩溃的可能性更低。您将获得线程拥有的顶级窗口，您想要什么，枚举每个顶级窗口拥有的子窗口需要 EnumChildWindows()。

一些值得注意的坏消息：请注意，需要进行一些过滤才能获得不错的结果。一个线程通常拥有一个根本不可见的窗口。通常用于处理线程间通信，尤其是使用 COM 的代码。因此，您可能还想调用 IsWindowVisible()。并*始终*检查这些 pinvoked 函数的错误，当您的程序未以管理员权限运行和/或未提升 UAC 时，故障很常见。始终根据您从 Spy++ 实用程序中看到的内容仔细检查您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:14:36.343

如果您阅读[MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)的文档，您将看到以下注释：

> 如果关联进程没有主窗口，则 MainWindowHandle 值为零。对于已隐藏的进程，即在任务栏中不可见的进程，该值也为零。这可能是在任务栏最右侧的通知区域中显示为图标的进程。

请记住，它对应于最顶层窗口的句柄，它并不是真正的“主窗口句柄”，在这种情况下您最好使用手动枚举。

# mysql - xampp 未在 Windows 7 上启动

> ID：15448267
> 
> 赞同：-1
> 
> 时间：2013-03-16T10:41:29.890
> 
> 标签：mysql, sql-server, windows, windows-7, xampp

我在 windows 7 64bit 上下载了 Xampp，在 windows 中我也让 sql server 一起工作。我不知道为什么 xampp 不起作用我猜是因为 sql server 使用相同的端口 80，所以我将 Apache 服务器的端口更改为 9090 但也没有工作。如何解决？

![Xampp 错误](../Images/44bd19eb4ae3841bdf4c67238201bef3.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:52:34.423

将您的端口设置回原来的设置，应该是端口：80。检查您的 PC 上是否安装了 Skype。如果您使用 Skype，请转到您的设置并检查 Skype 端口并禁用它使用端口 80。这样您就可以开始使用了。如果在那之后问题仍然存在，那么您可以运行检查以了解其他软件使用端口 80 进行通信。

# jquery - 根据所选单词的不同功能 - JQuery

> ID：15448268
> 
> 赞同：-5
> 
> 时间：2013-03-16T10:41:32.987
> 
> 标签：jquery, input

**我相信我的问题最初并不清楚。我正在努力在这里说得更清楚。**

我的问题——我如何告诉 JQuery 识别用户选择了两个单词中的哪一个，以便将背景颜色更改为“Hello”和“Goodbye”的不同颜色？有一个“按钮”，用户可以点击它来实现这一点。

我正在建立一个网站，用户可以在其中单击页面上的单词来更改它们。在这种情况下——多亏了这个论坛上的一些帮助——用户可以在“你好”和“再见”之间进行选择。

换句话说，如果用户选择“你好！”，我希望背景为绿色。如果他们选择“再见！”，我希望它是蓝色的。

我真的被困住了：/

我对此很陌生，因此非常感谢所有帮助！

我用来更改背景颜色的代码：

```
$("#button").click(function() {
        if ($("#greeting").text === 'Hello!') {
            $("body").css("background-color", "green");
        }
        else {
            $("body").css("background-color", "blue");
        }
}); 
```

这是网站代码的其余部分（感谢上一个问题的帮助！）：

```
<body>
   <p id = "greeting">Hello!</p>
</body> 
```

这是我的 JQuery（请参阅上一个问题！）：

```
$(function(){
    $("#greeting").click(function(){
        $(this).text('Goodbye!').toggle(hide);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:45:30.540

试试这个。我也不确定

```
$(function(){
    $("#greeting").click(function(){

       if($(this).text() =="Hello")
        $(this).text('Goodbye!').toggle(hide);

      if($(this).text() =="Goodbye")
        $(this).text('Hello!').toggle(hide);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:47:38.330

```
$(function(){
    $("#greeting").click(function(){
        if($(this).text() == 'Hello') {
           $(this).text('Goodbye!');
        } else {
           $(this).text('Hello');
        }
    });
}); 
```

# python - re (Python) 中的俄语符号

> ID：15448274
> 
> 赞同：14
> 
> 时间：2013-03-16T10:42:28.500
> 
> 标签：python, regex, utf-8

我从文件中获取数据：

```
words = re.findall(r'[\w]+',self._from.encode('utf8'),re.U) 
```

如果文件包含：

> *你好你好吗？*

那么结果将是：

> ['你好你好吗']

但如果文件包含俄语（即西里尔符号），则：

> *Привет, как дела?*

在这种情况下，结果是：

> ['\xd0', '\xd1', '\xd0', '\xd0\xb2\xd0\xb5\xd1', '\xd0\xba\xd0', '\xd0\xba', '\xd0', '\xd0\xb5\xd0', '\xd0']

为什么？什么？我已经添加了：

```
sys.setdefaultencoding('utf-8') 
```

我正在使用 python2.7 和 linux ubuntu。

## **回答：**

```
words = re.findall(r'[\w]+',self._from.decode('utf8'),re.U)
print u" ".join(words) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T10:59:26.317

要用于`\w+`匹配字母数字*unicode*字符，您应该将模式和文本*都*传递给.`unicode``unicode``re.findall`

*   在 Python2 中：

    假设您正在从文件中读取字节（不是文本），您应该解码字节以获得`unicode`：

    ```
    uni = 'Привет, как дела?'.decode('utf-8') 
    ```

    `ur'(?u)\w+'`是一个[原始的 unicode 文字](https://stackoverflow.com/q/2081640/190597)。尽管这里没有必要，但对正则表达式模式使用原始 unicode/字符串文字通常是一个好习惯——它允许您避免在某些字符之前需要双反斜杠，例如`\s`.

    正则表达式模式`ur'(?u)\w+'` [包含 Unicode 标志](https://docs.python.org/2/library/re.html#regular-expression-syntax)，它告诉依赖于 Unicode 字符属性数据库`re.findall`。`\w`

    ```
    import re
    uni = 'Привет, как дела?'.decode('utf-8')
    print(re.findall(ur'(?u)\w+', uni)) 
    ```

    产生一个包含 3 个 unicode “单词”的列表：

    ```
    [u'\u041f\u0440\u0438\u0432\u0435\u0442',
     u'\u043a\u0430\u043a',
     u'\u0434\u0435\u043b\u0430'] 
    ```

*   在 Python3 中：

    大体原理是一样的，只是Python2 中[的s`unicode`现在 Python3 中`str`的 s](https://docs.python.org/3.0/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)，并且不再尝试在两者之间进行自动转换。因此，再次假设您正在从文件中读取字节（而不是文本），您应该解码字节以获得 a `str`，并使用`str`正则表达式模式：

    ```
    import re
    uni = b'\xd0\x9f\xd1\x80\xd0\xb8\xd0\xb2\xd0\xb5\xd1\x82, \xd0\xba\xd0\xb0\xd0\xba \xd0\xb4\xd0\xb5\xd0\xbb\xd0\xb0?'.decode('utf')
    print(re.findall(r'(?u)\w+', uni)) 
    ```

    产量

    ```
    ['Привет', 'как', 'дела'] 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-14T20:55:59.050

我的解决方案：

```
txt = re.findall(r'[А-я]+', data) 
```

А-я - 俄语字母

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T10:59:53.150

如果您省略了您得到的编码部分，您正在获取一个已经是 unicode 的字符串并将其编码为 un​​icode：

```
line = u"Привет, как дела?"
words = re.findall(r'[\w]+',line ,re.U)
# words = [u'\u041f\u0440\u0438\u0432\u0435\u0442', u'\u043a\u0430\u043a', u'\u0434\u0435\u043b\u0430']
print words[0]
# prints Привет 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-12T11:02:23.003

请参阅 UTF Cyrillic 块以精确定义正则表达式：

*   [https://en.wikipedia.org/wiki/Cyrillic_(Unicode_block)](https://en.wikipedia.org/wiki/Cyrillic_(Unicode_block))
*   [https://en.wikipedia.org/wiki/Cyrillic_script_in_Unicode](https://en.wikipedia.org/wiki/Cyrillic_script_in_Unicode)

大多数代码点都在一个范围内，但有些不在：

```
re.compile('[А-Яа-яЁё]+')

re.fullmatch("[А-Яа-яЁё ]+", "Ёжик в тумане") 
```

此外，您可能希望根据需要包含`Ѣ ѣ`(Ять) 或其他旧符号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T10:53:48.630

如果`self._from`是`unicode`字符串，则应将其直接传递给`re.findall`（带有`re.U`标志）。如果是 utf8 编码的`str`字符串，则需要将`decode`其转换为`unicode`字符串。您不应该将非 ascii`str`字符串传递给`re`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-05T21:11:47.747

Ё 字母的俄语字母解决方案（不包括在 А-Я 范围内）

```
import re

text = 'Ё-моё Привет! 2121 как дела?'

re.findall(r'[А-яЁё]+', text)
# => ['Ё', 'моё', 'Привет', 'как', 'дела'] 
```

# javascript - 如何将蒙版应用于画布上的点

> ID：15448275
> 
> 赞同：1
> 
> 时间：2013-03-16T10:42:28.693
> 
> 标签：javascript, canvas

我正在尝试在 JavaScript 中进行水模拟。我现在有类似的东西[，](http://grantkot.com/MPM/Liquid.html)由小点组成。我想在这些点上涂上一个面具，让它看起来更像水，但我不知道我该怎么做。我想实现类似于游戏“我的水在哪里？”的效果，基本上所有靠近的点都显示为一个斑点，具有类似元球的效果。我尝试谷歌搜索解决方案，但没有任何运气。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:31:27.320

弄清楚了。

对于任何想知道的人，我使用了[此处](http://jsfiddle.net/loktar/TscNZ/)显示的方法，但我只在临时画布上绘制了一次渐变，然后使用 将其绘制到真实画布上`drawImage()`，这要快得多。

# c# - EntityType 'posts' 没有定义键。定义此 EntityType 的键

> ID：15448280
> 
> 赞同：1
> 
> 时间：2013-03-16T10:43:36.040
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我的模型课是

```
public class posts
{
    [Key]
    public int AuthorId;

    public string author_first_name;
    public string author_last_name;
    public string post_text;
} 
```

我不明白为什么这么说。即使我遵循命名约定并且仍然插入了关键注释以进行安全测量，它仍然给我错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T10:47:44.583

使用 EntityFramework 声明实体时，请使用属性，而不是字段。

你应该有：

```
public class Post
{
    [Key]
    public int AuthorId { get; set; }

    public string AuthorFirstName { get; set; }
    public string AuthorLastName { get; set; }
    public string PostText { get; set; }
} 
```

当您使用这些数据注释声明属性时，它们必须出现在公共 getter 上。

试一试，看看它是否适合你。

# c++ - 与 minecraft bukkit 服务器握手 - 发送服务器主机字段失败

> ID：15448286
> 
> 赞同：2
> 
> 时间：2013-03-16T10:44:07.597
> 
> 标签：c++, minecraft, packets

我正在尝试为我的世界服务器制作客户端/机器人，以自动保护聊天并禁止垃圾邮件发送者。（第一个成就）
我在这里找到了一些文档，并且我已经[从这里](http://wiki.vg/Data_Types)实现了数据类型（[所以它们看起来像这样](http://u8.8u.cz/code/mcadmin/packet_data_types.h)- 我还没有完成）。现在，我正在尝试发送初始`0x02`数据包，它应该如下所示：

### 我的数据包格式

```
size    value                comment

1       0x02                 Packet ID
2+?     string               Username (I send "jakub")
2+?     another string       Server host name - here, the program FAILS*
4       25565                Port number 
```

*Fails 表示 bukkit 服务器在控制台输出以下内容，并且 socket 关闭：

> *11:09:45* [INFO] /127.0.0.1:51256**失去连接**

我现在可以看到如何测试我的数据类型是否正确，但是因为我似乎发送用户名没有问题，我认为我发送**了错误的信息**，虽然**格式正确**。

### 生成字符串

但无论如何，我很好奇我是否做对了一切。我有课`mc_short`和`mc_string`。这就是`mc_short`创建自身 2 个字节的方式：

```
//mc_short::val is type of short 
void mc_short::asBytes(char* data) {  
    for (int i = 0; i < 2; i++)
       data[endianity?i:1-i] = (val >> (i * 8));  //Some magic with byteshifting.
       //endianity is set to false, because java uses BigEndian everywhere** (UNFRIENDLY PERSONS!!)
} 
```

**参考[http://wiki.vg/Data_Types](http://wiki.vg/Data_Types)：

> Java（以及Minecraft）中的所有类型都是大端的，也就是说，最重要的字节排在第一位。

然后字符串本身使用`mc_short`and`std::string`来填充字节`char*`。

```
void mc_string::asBytes(char* data) {
    mc_short size((short)val.length());  //val is std::string
    size.endianity = endianity;          //mc_string::endianity is boolean, and is ony used to determine endianity of the first 2 bytes
    size.asBytes(data);  //Filling 2 bytes in data - length info
    for(short i=0; i<size.value(); i++) {
        data[i+2] = val[i];  //Copying std::string to data
    }
} 
```

### 问题摘要

1.  我应该发送什么作为“服务器主机名”，即 0x02 的第三个字段？
2.  我是否正确发送字符串？不需要其他转换吗？

我知道，我的问题是关于不太为人所知的话题，因此您可能不知道也不知道答案，也不知道话题本身。在这种情况下忽略这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:28:20.987

字符串以大端 unicode（UTF-16，但大端）编码。如果您不使用 Java，则无法直接从内存中映射您的字符（好吧，如果您只是在每个字符之间写一个零并接受这是一种糟糕的方式，那么您可以作弊）。这里有一个用 C# 编码 Minecraft 字符串的[例子](https://github.com/SirCmpwn/Craft.Net/blob/master/Craft.Net/MinecraftStream.cs#L276)。

至于该字符串的内容，它应该是要连接的主机名。如果 Google 运行 Minecraft 服务器，该字符串可能是`minecraft.google.com`.

使用这个实际数据包的一个例子是[here](https://github.com/SirCmpwn/Craft.Net/blob/master/Craft.Net/Packets.cs#L91)。

所以，随着你的问题得到实际回答，一些建议。Minecraft 协议很糟糕，编写客户端需要大量工作。您需要能够支持协议中的所有数据包（是的，所有数据包），并且您需要实现基本的物理掉到地上，这样您就不会因飞行而被踢。有几个选项，按从最佳到最差的顺序排列：

*   使用 Bukkit 并为此编写一个插件
*   编写代理而不是客户端
*   写一个客户，就像你现在正在尝试的那样

所以，如果你是第一个，你需要用 Java 写一个插件。我对此知之甚少。

我确实对后两种选择了解很多。我是[Craft.Net](https://github.com/SirCmpwn/Craft.Net)的维护者，它是一堆库，包括一个通用网络库和一个客户端库。您可以在几个小时内组装一个客户端或代理。一个示例客户端在同一个仓库中，[这里](https://github.com/SirCmpwn/SMProxy)有一个代理。这些都使用 C#。

如果你仍然想完全自己动手，祝你好运，祝你好运。

# html - 如何为createjs Shape添加发光效果？

> ID：15448291
> 
> 赞同：1
> 
> 时间：2013-03-16T10:44:30.180
> 
> 标签：html, createjs

是否可以动态地为形状添加发光效果？由于使用 AS3 很容易做到这一点，我想知道它是否支持 easejs？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:43:14.607

您可以使用偏移为 0 的 Canvas Shadow 来实现此目的。 [http://www.createjs.com/Docs/EaselJS/classes/Shadow.html](http://www.createjs.com/Docs/EaselJS/classes/Shadow.html)

请注意，阴影效果的绘制成本相当高，并且会妨碍硬件加速。

干杯。

**[编辑：在使用图像时，看起来阴影模糊目前不适用于 Chrome（Mac 和 PC）。]**

# plugins - 用另一个路径加载 .yml 文件

> ID：15448294
> 
> 赞同：2
> 
> 时间：2013-03-16T10:45:03.283
> 
> 标签：plugins, load, yaml, messages, minecraft

事实上，我需要一些帮助。我开始编写我的世界插件，即使我是 java 初学者。我想加载一个 .yml 文件的内容，该文件有另一个路径作为默认文件。据我所知，我需要为此使用`.getString(String)`。但我不知道如何设置另一条路径并立即使用 getString 。

加载语言的方法

```
public void loadLanguage() throws IOException {
    String language = this.getConfig().getString("language");
    InputStream lang = this.getClass().getClassLoader().getResourceAsStream("languages/" + language + ".yml");
    YamlConfiguration langfile = YamlConfiguration.loadConfiguration(lang);
    langfile.options().copyDefaults(true);
    langfile.save("plugins/Costumized/languages/" + language + ".yml");
} 
```

在主要部分，我需要使用 getString 获取指定的消息，因为消息应该发送给运行命令的玩家。

我希望你能理解我的问题。是的，我的英语很糟糕。对此感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T11:41:24.333

您可以使用我的 SpigotLib 插件来轻松进行配置管理：

[https://www.spigotmc.org/resources/spigotlib.5925/](https://www.spigotmc.org/resources/spigotlib.5925/)

为了使用它处理多个配置，为简单起见，您应该使用静态字段为每个配置创建新类。您可以保存和加载配置 onEnable，如下所示：

```
 ConfigFile kf1,kf2;

  public void onEnable()
  {
    SU.saveResources(this, "config.yml", "config2.yml");
    kf1=new ConfigFile(new File(getDataFolder()+File.separator+"config1.yml");
    kf2=new ConfigFile(new File(getDataFolder()+File.separator+"config2.yml");
    kf1.data.deserialize(Config1.class);
    kf2.data.deserialize(Config2.class);
    SU.pm.registerEvents(this, this);
  } 
```

配置保存也很简单：

```
 public void onDisable()
  {
    kf1.save();
    kf2.save();
  } 
```

因此，您将不再需要使用 get 或 set 等配置设置，您可以拥有任何类型的数据结构，由 SpigotLib 自动处理。所以如果你只需要存储一些字符串，你可以在你的配置类中添加一个 hashmap 字段。

# youtube-api - YouTube HTML5 播放器裁剪/拉伸

> ID：15448295
> 
> 赞同：0
> 
> 时间：2013-03-16T10:45:05.413
> 
> 标签：youtube-api

有没有办法通过参数直接使用 youtube API 裁剪 youtube 视频？

我想实现类似：

*   [http://support.google.com/youtube/bin/answer.py?hl=en&answer=146402](http://support.google.com/youtube/bin/answer.py?hl=en&answer=146402)

有些视频有很大的边界，我宁愿去掉它们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:39:23.763

这不是你作为嵌入者可以做的事情。如果您只是播放嵌入在您网站上的视频，您可以使用您喜欢的任何尺寸的播放器（只要它大于允许的最小尺寸），但如果您使用播放器会自动插入水平或垂直黑条与源视频不同的播放器纵横比。您不能在嵌入中明确“裁剪”视频。

# linux - 让 Wireshark 开始工作

> ID：15448297
> 
> 赞同：0
> 
> 时间：2013-03-16T10:45:10.647
> 
> 标签：linux, wireshark, broadcom

我在**让 Wireshark**在我的两台计算机上工作时遇到了严重的问题。我可以成功地看到进出我的笔记本的内容，但我不知道如何**嗅探**我网络中的所有计算机（通过*WPA2 AES+TKIP*保护）。

我的适配器是：*Broadcom BCM4313*（内核模块：*brcmsmac*），第二个是由*ath5k*内核模块驱动的一些*Atheros*。值得一提的是，我可以在两张卡的监控模式下从其他网络嗅探网络 SSID。

 *我会很感激任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:54:30.147

我建议设置“监控模式”；在 Wireshark 的“捕获选项”窗口中有一个“监控模式”复选框，还有命令行 -I 可以在监控模式下捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:36:46.050

我相信你想要的是监控模式。有关详细信息，请参阅[打开监视器模式](http://wiki.wireshark.org/CaptureSetup/WLAN#Turning_on_monitor_mode)。*

# matlab - 如何在 GUI 回调之间传递信息

> ID：15448301
> 
> 赞同：1
> 
> 时间：2013-03-16T10:45:30.960
> 
> 标签：matlab

我想将 queryname 传递给另一个文件 do_demo_2 ，它是一个字符串，类似于图像的完整路径。

```
function query_browse_Callback(hObject, eventdata, handles)
[filename, pathname] = ...
uigetfile({'*.jpg';'*.png';'*.tif'},'Select Query Image');
queryname=[pathname filename];

function retrieve_Callback(hObject, eventdata, handles)
do_demo_2; 
```

我应该如何修改它，我在 do_demo_2 文件中的第一行是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:54:50.703

为了在 GUI 中传递数据，将数据存储在 - 结构中是最方便的`handles`。选择版本 1 或版本 2（它们不是相互兼容的）。

```
function query_browse_Callback(hObject, eventdata, handles)
[filename, pathname] = ...
uigetfile({'*.jpg';'*.png';'*.tif'},'Select Query Image');
queryname=[pathname filename];

%# store queryname, version 1
handles.queryname = queryname;
guidata(hObject,handles);
%# store queryname, version 2
setappdata(handles.YOURGUINAME,'queryname',queryname)

function retrieve_Callback(hObject, eventdata, handles)

%# retrieve queryname, version 1
queryname = handles.queryname;
%# retrieve queryname, version 2
queryname = getappdata(handles.YOURGUINAME,'queryname'); 
```

确保在`Opening_Fcn`您的 GUI 中初始化存储的信息：

```
%# version 1
handles.queryname = '';
guidata(hObject,handles);

%# version 2
setappdata(handles.YOURGUINAME,'queryname',''); 
```

这样，您可以检查`retrieve_callback`是否`queryname`为空并告诉用户首先浏览文件名。

然后，如果您想将 queryname 的内容传递给不同的函数，请将其作为输入参数传递：`do_demo_2(queryname)`. 确保函数接受输入。

# node.js - 默认 mongoose _id 不增加

> ID：15448302
> 
> 赞同：2
> 
> 时间：2013-03-16T10:45:46.333
> 
> 标签：node.js, mongodb, mongoose

默认`_id:ObjectId`值不是自动递增的，这正常吗？

MongoDB：2.2.3 猫鼬：3.5.8

**我尝试保存的架构：**

```
var userSchema = mongoose.Schema({
  username: { type: String, required: true, unique: true },
  email: { type: String, required: true, unique: true },
  password: { type: String, required: true},
});
var User = mongoose.model('User', userSchema); 
```

**保存创建的模型：**

```
var newUser = new User({email:login, password:password, username:username});
newUser.save(); 
```

**服务器错误 ：**

```
{ email: 'joe@joe.com',
  password: 'joe',
  username: 'joe',
  _id: 51444c0dcc6b4e040c000001 }
{ [MongoError: E11000 duplicate key error index: supinfarm.users.$login_1  dup key: { : null }]
  name: 'MongoError',
  err: 'E11000 duplicate key error index: supinfarm.users.$login_1  dup key: { : null }',
  code: 11000,
  n: 0,
  connectionId: 431,
  ok: 1 } 
```

**db.users.find() ：**

```
{
  "email" : "c@c.com", "password" : "hereTheHash",
  "username" : "canard", "__v" : 0,
  "_id" : ObjectId("514447c805a669d40b000001")
} 
```

# c# - Thread和Invoke，如何修改标签？

> ID：15448304
> 
> 赞同：0
> 
> 时间：2013-03-16T10:45:51.240
> 
> 标签：c#, multithreading, invoke

我在 c# 中处理应用程序，但我的线程和 UI 有问题...

我想在线程运行时在我的标签上添加 +1。问题是我不知道如何解决这个问题......我已经阅读了很多“如何”，但解决方案 donc 适用于我的应用程序..

我的线程类：

```
 class clsWorker
    {
        //Thread myThread = new Thread(new ThreadStart(ThreadLoop));

        public SerialPort port;
        public String url;
        Thread t;
        clsSMS clsobjSMS = new clsSMS();
        SMSapplication clsobjAPP = new SMSapplication();

        public clsWorker(SerialPort serialPort, String urlChamp)
        {
            this.port = serialPort;
            this.url = urlChamp;
        }

        public void StartThread()
        {   
            t = new Thread(new ThreadStart(ThreadLoop));
            t.Start();
        }

        public void ThreadLoop()
        {
             // How I can add +1 on the countSMSok label ??
             clsobjAPP.updateCountSMS("countSMSok");

        }
    } 
```

我的应用程序类：

```
public partial class SMSapplication : Form
    {
public void updateCountSMS(String label)
    {
        int num;

            this.countSMSnok = new System.Windows.Forms.Label();
            this.countSMSok = new System.Windows.Forms.Label();

            this.Controls.Add(this.countSMSnok );
            this.Controls.Add(this.countSMSok );

         if (label == this.countSMSok.Name.ToString())
        {
           if (int.TryParse(this.countSMSok.Text.ToString(), out num))
                this.countSMSok.Invoke((MethodInvoker)(() => this.countSMSok.Text = num++.ToString()));

        }
        else if (label == this.countSMSnok.Name.ToString())
        {
            if (int.TryParse(this.countSMSnok.Text.ToString(), out num))
                this.countSMSnok.Invoke((MethodInvoker)(() => this.countSMSnok.Text = num++.ToString()));
        }  
    }

       private void btnRequestStart_Click(object sender, EventArgs e)
    {
        this.btnRequestStart.Enabled = false;
        this.btnRequestStop.Enabled = true;
        objclsWorker = new clsWorker(this.port, this.urlChecker.Text);
        objclsWorker.StartThread();
    }

} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:14:51.080

确保创建标签的实例并将标签添加到控件

```
 this.countSMSnok = new System.Windows.Forms.Label();
    this.countSMSok = new System.Windows.Forms.Label();

    this.Controls.Add(this.countSMSnok );
    this.Controls.Add(this.countSMSok ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:41:06.733

您不能初始化`SMSapplication`类的新对象，更新它并期望它更新您的第一个表单。这些是不同的“东西”。此外，您应该使用`SynchronizationContext`而不是`invoke`.

这是工作代码：

形式：

```
public partial class SMSapplication : Form
{
    private SynchronizationContext context = null;
    private SerialPort port;

    public SMSapplication()
    {
        InitializeComponent();
        this.countSMSok.Text = "0";
        this.context = WindowsFormsSynchronizationContext.Current;
    }

    public void updateCountSMS(String label)
    {
        this.context.Post(new SendOrPostCallback(updateCountSMSSync), label);
    }

    private void updateCountSMSSync(object o)
    {
        string label = o as string;
        int num;

        if (label == this.countSMSok.Name.ToString())
        {
            if (int.TryParse(this.countSMSok.Text.ToString(), out num))
            {
                this.countSMSok.Text = (++num).ToString();
            }
        }
    }

    private void btnRequestStart_Click(object sender, EventArgs e)
    {
        clsWorker objclsWorker = new clsWorker(this, this.port, this.urlChecker.Text);
        objclsWorker.StartThread();
    }
} 
```

和工人：

```
class clsWorker
{
    public SerialPort port;
    public String url;
    SMSapplication clsobjAPP = null;

    public clsWorker(SMSapplication app, SerialPort serialPort, String urlChamp)
    {
        this.clsobjAPP = app;
        this.port = serialPort;
        this.url = urlChamp;
    }

    public void StartThread()
    {
        new Thread(new ThreadStart(ThreadLoop)).Start();
    }

    public void ThreadLoop()
    {
        clsobjAPP.updateCountSMS("countSMSok");
    }
} 
```

# java - 内部类中的静态字段

> ID：15448310
> 
> 赞同：5
> 
> 时间：2013-03-16T10:46:28.977
> 
> 标签：java, static, inner-classes

如果我有这样的班级结构

```
public class Foo{
    //declaring fields and methods

    Foo(int k){
        Bar.a = k;
    }
    public class Bar{
        public final static int a;
    }
} 
```

如果我创建了许多 Foo 实例，类 Bar 中的静态字段如何作用？我的意思是，所有 Foo 对象都是同一个实例，还是每个实例都有不同的静态字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:01:15.323

我认为内部类不能有静态成员，因为它需要外部类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:04:37.837

代码不会编译，编译器会发出

```
COMPILATION ERROR : 
-------------------------------------------------------------
... error: Illegal static declaration in inner class blah.Foo.Bar
1 error 
```

您需要有一个`static`内部类才能编译此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:03:02.373

你的问题不正确。只是问一些不存在的东西是没有意义的。在这种情况下，唯一的可能性是制作 inner class `static`。然后对于外部类的每个实例，您都有一个内部类的静态实例。结果是这个内部类的一个静态变量。

# codeigniter - codigniter 限制函数不适用于 $this->db->query($sql)

> ID：15448314
> 
> 赞同：1
> 
> 时间：2013-03-16T10:46:47.510
> 
> 标签：codeigniter

```
 $sql = "SELECT * FROM $this->table_name WHERE FIND_IN_SET('$subCatString', moto_type_id)";

    if($limit>0)
    {
        $this->db->limit($limit, $offset);
    }

    return $this->db->query($sql)->result_array(); 
```

codigniter 限制函数不适用于 $this->db->query($sql)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T10:57:42.683

是的，这行不通。`->query()`只需执行您传递给它的 sql 查询。

如果你想使用`->limit()`这样做：

```
$this->db
    ->from($this->table_name)
    ->where("FIND_IN_SET('".$subCatString."', moto_type_id)", NULL, FALSE);

if($limit>0)
{
    $this->db->limit($limit, $offset);
}

return $this->db->get()->result_array(); 
```

记得清理/转义 $subCatString，因为它不会被 CI 转义。

# uml - UML 中的原型是什么？

> ID：15448316
> 
> 赞同：4
> 
> 时间：2013-03-16T10:46:56.310
> 
> 标签：uml, enterprise-architect, stereotype

我正在使用 Enterprise Architect 制作 UML 类图（最后用它生成 PHP5 代码）。我可以为类添加属性。对于每个属性，我可以选择一个构造型：DomainCodedValue、Field、SubTypeField、Property、Property、column、struct、union、global、with events、ConversationAssociation、ParticipantAssociation、Property、SM_Activity、input element、select element、textarea element。

什么是刻板印象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T15:54:54.057

[UML 规范](http://www.omg.org/spec/UML/2.4.1/Superstructure/PDF/)说：

> 原型定义了如何扩展现有的元类，并允许使用平台或领域特定的术语或符号来代替或补充用于扩展元类的术语或符号。

在该定义中，*元类*是 UML 元模型中的一个类（例如`Class`、`Interface`、`Component`、`Association`等`Property`）。这意味着可以将构造型应用于 UML 图中的元素。

例如，当您使用构造型注释 a`Property`时`«DomainCodedValue»`，您正在建模该属性具有 a 的特殊语义`DomainCodedValue`（无论它是什么），这**改进**了 的语义`Property`。

# javascript - 具有 MultipleSeries 的 RangeSelector

> ID：15448317
> 
> 赞同：0
> 
> 时间：2013-03-16T10:47:04.880
> 
> 标签：javascript, canvas, dygraphs

我知道范围选择器显示了多个系列的平均值。有没有办法选择特定系列作为范围选择器系列。有没有一种方法我可以重写来修改范围选择器绘图的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:46:51.433

没有这个选项，但是有一个[功能请求](https://code.google.com/p/dygraphs/issues/detail?id=450)。

一种解决方法是有两个同步图表，一个是所有范围滑块，一个是所有图表。[http://dygraphs.com/tests/synchronize.html](http://dygraphs.com/tests/synchronize.html)可以为您指明正确的方向。

# php - 如何从数据库中拆分长文本以在 php 中将其显示为不同的段落？

> ID：15448323
> 
> 赞同：2
> 
> 时间：2013-03-16T10:47:21.683
> 
> 标签：php, mysql

我的数据库中有一个带换行符的字符串，我想将其拆分并在我的网页中显示为段落，这是我在数据库中的文本：

```
My first paragraph my second paragraph my third paragraph 
```

我想在我的网页中显示为

```
My first paragraph
my second paragraph
my third paragraph 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:58:07.457

```
<?
$str = 'My first paragraph my second paragraph my third paragraph';

$newstr = str_replace('\n','<br>',$str);

echo $newstr;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:26:25.383

PHP 实际上有一个功能：`nl2br`. 所以你可以说`echo nl2br($str);`

# python - 在 python 和 sqlite3 cli 工具之间传输数据库

> ID：15448327
> 
> 赞同：1
> 
> 时间：2013-03-16T10:48:02.407
> 
> 标签：python, sqlite, python-3.x, command-line-interface

我需要一种在命令行界面工具 sqlite3 中访问在我的 python3 应用程序中的内存（'：memory：'）中创建的数据库的方法。这个想法是为用户提供标准 sqlite3 工具的便利，而不是在 python 本身中重新实现 sqlite shell。

同样，目标是：

在内存中的python程序中打开的数据库->在sqlite3 cli工具中编辑/处理数据库->将（可能）修改的数据库移回我的python程序。

我试图：

```
def sqlite_cli(self):
    # Spawn the original sqlite3 cli interface
    # Dump the database in a named temporary file. Read it back into
    # memory. At close() the tempfile will be erased.
    with tempfile.NamedTemporaryFile(delete=True) as tf:
        for line in self.connection.iterdump():
            tf.write(bytes(line, 'ascii'))

        # Work with the database through sqlite3
        subprocess.call(['sqlite3', '-init', tf.name])

        # Read the potentially modified database
        # !!!!!!!!!!!!!!!!
        # Here happens the logic gap: The sqlite3 tool doesn't 
        # save modifications to the file opend as the -init argument.
        # How can I save the modifications done within sqlite3 as a 
        # sql text file ready to be read back into the app?!
        tf.seek(0)
        edited_db = tf.read()

        # Delete all tables residing in memory
        try:
            for t in ACCMAN_TABLES:
                self.cursor.execute('DROP TABLE IF EXISTS %s' % t)
            self.connection.commit()
            # Add the (maybe) edited one
            self.cursor.executescript(edited_db.decode(encoding='utf-8'))
            self.connection.commit()
        except sqlite3.Error as e:
            logger.error("sqlite_cli(): %s" % e.args[0])

        tf.close() 
```

在这种情况下，我需要一种方法来保存对使用***sqlite -init 文件名*****打开的数据库所做的所有修改，无论是文件系统上的 sql 格式还是二进制格式（正常的...）。**

 *编辑：一种解决方案是让用户在数据库上做他的事情，然后在他结束会话之前（为 .q .quit .exit 捕获标准输入），我可以发送一个中介

```
.output outfile.sql
.dump
.quit 
```

在文件系统上重定向整个数据库（以及它的修改！），然后将创建的文件读回 python 应用程序。但这太丑陋和不雅...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T20:46:36.467

我认为您不会喜欢这个答案，但我会考虑将您的应用程序中的“模型”编写为能够接收 xml-rpc 调用的“服务器”。这样，您的“控制器”（以及外部控制器）可以访问数据库并执行您允许他们执行的任何操作。将类的方法公开为 XML-RPC 服务器非常容易。请参阅[http://docs.python.org/2/library/xmlrpclib.html?highlight=xmlrpc#xmlrpclib](http://docs.python.org/2/library/xmlrpclib.html?highlight=xmlrpc#xmlrpclib)*

# macros - 如何调用宏，并将参数传递给它

> ID：15448334
> 
> 赞同：3
> 
> 时间：2013-03-16T10:48:43.720
> 
> 标签：macros, clojure, lisp

看来我对宏的理解是不完整的。如何将参数传递给宏，并从函数中调用它们。代码下面看似简单的代码不起作用。

```
(defmacro bar [arg]
  (println (symbol? arg)))

(defn foo [arg]
  (bar arg))

(foo 'baz) => nil 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T12:14:44.243

定义 foo 时正在评估宏。如果您在 repl 中定义 foo 函数，您会注意到 Clojure 打印结果为 true。

```
user=> (defmacro bar [arg]
         (println (symbol? arg)))
#'user/bar
user=> (defn foo [arg]
         (bar arg))
true ;  <= This is the print from your macro 
     ;     (it prints true, because arg is a symbol)
#'user/foo 
```

您需要引用宏的主体，否则它将被评估，因为它的返回值为 nil，foo 将简单地返回 nil。

```
(defmacro bar [arg]
   `(println (symbol? ~arg))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T11:28:53.967

宏应该生成代码。它将源表达式作为参数并创建新源。

1.  您的宏采用什么来源？
2.  您的宏生成什么来源？

让我们来看看：

```
user=> (defmacro bar [arg]
         (println (symbol? arg)))   
#'user/bar
user=> (bar 1)
false
nil
user=> (bar 'a)
false
nil
user=> (bar a)
true
nil 
```

这是扩展：

```
user=> (macroexpand-1 '(bar a))
true 
```

它不会生成任何有用的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T16:13:45.400

要使宏“工作”，它需要返回代码，通常作为列表表达式。因此，为了您的意图，您需要提供：

```
(defmacro bar (arg)
  `(println (symbol? ,arg))) 
```

（这使用 quasiquote 作为构造列表的方便表示法。）在您使用`bar`的地方，通过运行 defmacro 代码来扩展使用以生成该列表。然后编译该列表。例如：

```
(progn (bar 10)) 
```

扩展为

```
(progn (println (symbol? 10)) 
```

它被编译，然后，稍后，您运行代码并打印“nil”。你会注意到这`(bar a)`会产生一个错误' `a is not bound`'因为扩展是评估的`(println (symbol a))`，`a`可能是 w/oa 值。 `(bar 'a)`返回`T`。

使用这个正确`bar`的宏，您的函数`foo`在编译后将扩展为：

```
(defun foo (x)
  (println (symbol? x)) 
```

哪个计算`(foo 'a)`正确`(foo 10)`。

# vba - 尝试使用 DAO 从外部 Access (Outlook/Excel) 连接到有效数据库会生成 3343 无法识别的数据库格式错误

> ID：15448338
> 
> 赞同：6
> 
> 时间：2013-03-16T10:49:10.470
> 
> 标签：vba, dao

感谢您的网站。精彩的信息。

简而言之，我正在尝试从 Outlook (2007) 执行以下代码，尽管它在 Excel 中也失败了。在内部访问中效果很好！

```
Sub Test

    Dim db As DAO.Database
    Dim rs As DAO.Recordset

    Const dbPath As String = "C:\Users\e574651.GLOBAL\Documents\Northwind 2007.accdb"
    On Error Resume Next
    Set db = DAO.OpenDatabase(dbPath)
    'Set rs = db.OpenRecordset("customers")

    Debug.Print Err.Number, Err.Description

End Sub 
```

**3343 无法识别的数据库格式 'C:\Users\e574651.GLOBAL\Documents\Northwind 2007.accdb'。**

我可以整天使用 ADO 访问（不是双关语）这个数据库，我怀疑问题出在以下 ADO 语句上：

ADOConn.Provider = "Microsoft.ACE.OLEDB.12.0"

如何使用 DAO 提供此功能？

我在我的 VBA 首选项中包含了对 DAO 3.6 库的引用。我已经包含了其他 Microsoft 12.0 库引用，所以我要么破坏了一些东西，要么省略了一些东西。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T12:56:02.943

最新的 DAO 库采用以下格式：

```
Microsoft Office x.x Access Database Engine Object Library 
```

所以摆脱 3.6 参考并使用更新的库。然后，一个例子：

```
Sub XLAccess()
Dim ws As DAO.Workspace
Dim db As DAO.Database
Dim sDb As String
Dim sSQL As String
Dim qdf As QueryDef

    sDb = "Z:\Docs\Test.accdb"

    Set ws = DBEngine.Workspaces(0)
    Set db = ws.OpenDatabase(sDb)

    ''A stored query would be better
    sSQL = "Parameters p1 Text, p2 Datetime; " _
    & "INSERT INTO Table1 (AText,ADate) Values ([p1],[p2])"

    Set qdf = db.CreateQueryDef("", sSQL)

    qdf.Parameters!p1 = "ABC"
    qdf.Parameters!p2 = #1/17/2013#
    qdf.Execute dbFailOnError
    Debug.Print qdf.RecordsAffected
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-27T10:48:18.207

在您的参考文献中使用更新的**版本或最新的访问数据库**。

例如：在 Visual Basics 窗口中 =**转到 Tools > References >** **Microsoft Office 14.0 Access Database Engine Object Library**。

然后使用以下命令打开您的数据库：

```
Dim database_data As DAO.Database
Dim rsData As DAO.Recordset
Dim field_index As Integer

Set database_data = DAO.OpenDatabase("demo1.accdb") 
```

有时，可能还需要输入数据库文件的完整路径，例如“C:\User\Documents\projects\demo1.accdb”

# android - 如何在特定时间后发出通知

> ID：15448343
> 
> 赞同：2
> 
> 时间：2013-03-16T10:49:29.757
> 
> 标签：android, android-intent, android-alarms

在特定时间后发出通知需要帮助，在这里看到了几个例子，但它对我不起作用。

在按钮单击时，调用一个方法以在 5 秒后设置 AlarmManager，这反过来又应该调用我的方法来放置通知。下面是相同的代码。

```
private void startAlarm() {
        AlarmManager alarmManager = (AlarmManager) this.getSystemService(this.ALARM_SERVICE);

        Calendar rightNow = Calendar.getInstance();
         long when = rightNow.getTimeInMillis()+5000;

        Intent intent = new Intent(this, RemainderService.class);
        PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, 0);
        alarmManager.set(AlarmManager.RTC_WAKEUP,when,pendingIntent);
    } 
```

从另一个类（文件）RemainderService.java

```
public class RemainderService extends IntentService {
    public RemainderService() {
        super("RemainderService");
    }

    private static final int NOTIF_ID = 1;

    @Override
      protected void onHandleIntent(Intent intent) {

        NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        long when = System.currentTimeMillis();         // notification time

        Notification notification = new Notification(R.drawable.icon, "reminder", when);
        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.flags |= notification.FLAG_AUTO_CANCEL;

        Intent notificationIntent = new Intent(this, Notify.class);
        notificationIntent.putExtra("notificationID", 20);

        PendingIntent contentIntent = PendingIntent.getActivity(this, 20, notificationIntent , 0);

        notification.setLatestEventInfo(getApplicationContext(), "It's about time", "You should open the app now", contentIntent);

        nm.notify(NOTIF_ID, notification);
    }
} 
```

* * *

基本人为错误，忘记在清单文件中添加详细信息。

# jquery - 我可以在 addClass() 之前放置 delay(500) 吗？

> ID：15448344
> 
> 赞同：25
> 
> 时间：2013-03-16T10:49:37.980
> 
> 标签：jquery, delay, addclass

```
$(document).ready(function(){
    $("#info-text-container").click(function(){
        $("#info-text").delay(500).addClass("info-text-active");
    });   
}); 
```

当它被点击时，这不会延迟它。我想要完成的。为什么以及这是可破解的，可以克服的？谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-16T10:52:31.537

`delay`仅适用于动画方法，您可以使用`setTimeout`函数：

```
$("#info-text-container").click(function(){
    setTimeout(function(){
       $("#info-text").addClass("info-text-active");
   }, 500);
}); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-03-16T10:52:50.870

不完全像那样，但像这样，例如：

```
$("#info-text").delay(500).queue(function(next) {
  $(this).addClass("info-text-active");
  next();
}); 
```

# visual-studio-express - visual studio express - OpenFilesDialog 可用吗？

> ID：15448347
> 
> 赞同：0
> 
> 时间：2013-03-16T10:50:40.067
> 
> 标签：visual-studio-express

OpenFilesDialog 在 Visual Studio Express 中可用 - 还是仅在完整版中可用？

我刚刚安装了 Visual Studo Express 2008 和 2012，我在这两个版本中拥有的唯一工具箱类别是“Common WPF Controls”和“All WPF Controls”（以及“General”，它是空的）。

我应该看更多吗？

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:53:01.453

它是可用的。如果您右键单击 ToolBox 并单击 ChooseItems... 您可以添加其他控件。

它在`System.Windows.Forms`命名空间下

如果您使用的是 Windows 窗体，则可以通过上述“设计”视图访问它。

如果您正在设计 WPF 应用程序，则需要以编程方式添加 OpenFilesDialog（请参阅此链接：[C-Sharp Corner - OpenFileDialog in WPF](http://www.c-sharpcorner.com/uploadfile/mahesh/openfiledialog-in-wpf/)）

# haskell - (Num a) vs 整数类型推断

> ID：15448351
> 
> 赞同：13
> 
> 时间：2013-03-16T10:50:48.470
> 
> 标签：haskell

考虑以下 Haskell 函数：

```
sign a
  | a < 0 = (-1)
  | a > 0 = 1
  | otherwise = 0 
```

当我将它加载到 ghci 中时，我希望`:t sign`是：

```
sign :: (Num a, Ord a) => a -> Integer 
```

相反，它推断为：

```
*Main> :t sign
sign :: (Num a1, Num a, Ord a1) => a1 -> a 
```

同样，如果我询问 integer 的类型`5`，我期望的`Integer`是，但我得到了

```
*Main> :t 5
5 :: Num a => a 
```

我对 Haskell 的类型有些不理解。问题是，如果我所知道的返回类型`sign`只是它是类型类的一个实例`Num`，那么我应该无法将它的返回值传递给这个函数：

```
double :: Integer -> Integer
double x = x * 2 
```

也就是说，我的`double`函数需要一个`Integer`，而不仅仅是`Num`.

然而，以下工作很好：

```
*Main> double (sign 5.5)
2 
```

我对 Haskell 的类型系统有什么误解？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T10:58:26.600

> 问题是，如果我对“sign”的返回类型只知道它是类型类的一个实例`Num`，那么我应该无法将它的返回值传递给这个函数：

对，如果这就是你所知道的，你不能把它传递给`double`.

但是类型

```
sign :: (Num a1, Num a, Ord a1) => a1 -> a 
```

意味着结果类型`sign`是*调用者要求的**任何* `Num`类型。类型签名中的类型变量是（隐式）*普遍*量化的，而不是*存在*性的，例如 Java 接口。

 ***`sign`可以产生任意类型的返回值，受限于它是 的实例`Num`，并且它返回的类型由调用上下文决定。

如果调用者想要一个`Integer`，它会得到一个。如果它想要一个`Double`，也没问题。

一开始忘了说：

> 同样，如果我询问整数 5 的类型，我希望是“整数”，但我得到了

```
 *Main> :t 5
    5 :: Num a => a 
```

数字文字是多态的，整数文字代表`fromInteger value`，小数文字代表`fromRational value`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-16T11:20:38.217

我只是想稍微澄清一下@DanielFischer 的回答。类似类型签名`f :: Num b => a -> b`意味着`f`能够返回 typeclass 的*任何*实例`Num`。当`f`被调用时，Haskell 使用上下文（调用者的类型签名）来确定`b`.

此外，Haskell 的数字文字就是这种多态性的一个例子。这就是为什么`:t 5`给你`Num a => a`。该符号`5`能够充当*任何*类型的数字，而不仅仅是整数。它出现的上下文决定了它将是什么。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-16T11:20:21.010

在 Haskell 中，如果函数返回类型`x`是它的结果，这意味着*调用者*可以选择`x`应该是什么，而不是*函数*。相反，*该函数*必须能够返回*任何可能的类型*。

您`sign`可以返回任何类型的数据 - 包括`Integer`. 该`double`函数需要一个`Integer`，所以这很好 -`sign`可以返回它。

您可能不知道的另一部分难题：在 Java 中，`2`has type`int`和`2.0`has type `double`。但是在 Haskell 中，`2`有类型`Num x => x`——换句话说，*任何可能的数字类型*。（也`2.0`有 type `Fractional x => x`，这是一个类似的交易。）***

# java - 为什么类在Java中声明为静态？

> ID：15448352
> 
> 赞同：16
> 
> 时间：2013-03-16T10:50:50.613
> 
> 标签：java, class, object, static

我见过 class 被声明为`static`in `java`，但很困惑：
由于 class 用于创建对象，并且不同的对象具有不同的内存分配。
那么`"static"`在声明一个类的时候是用来做什么的呢？这是否意味着`member variables`全部`static`？
这有意义吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-16T10:53:38.683

首先，您不能使顶级类静态。您只能将嵌套类设为静态。通过使嵌套类静态，您基本上是在说您不需要嵌套类的实例来从外部类/顶级类中使用它。

例子：

```
class Outer {

static class nestedStaticClass {

//its member variables and methods (don't nessarily need to be static)
//but cannot access members of the enclosing class
}

public void OuterMethod(){
//can access members of nestedStaticClass w/o an instance
}
} 
```

还要补充一点，在内部类中声明静态字段是非法的，除非它们是常量（换句话说，`static final`）。由于静态嵌套类不是内部类，您*可以*在此处声明静态成员。

> 类可以嵌套在嵌套类中吗？

一句话，是的。看下面`Test`，嵌套的内部类和嵌套的静态类都可以有嵌套类。但是请记住，您只能在顶级类中声明静态类，在内部类中声明它是非法的。

```
public class Test {
    public class Inner1 {
        public class Inner2 {
            public class Inner3 {

            }
        }
    }
    public static class nested1 {
        public static class nested2 {
            public static class nested3 {

            }
        }   
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T10:54:13.733

嵌套类（类中的类）是唯一可以声明为静态的类。这样就不必实例化父类来访问嵌套类。

[这个答案](https://stackoverflow.com/a/3584151/334274)中有一些很好的示例代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T10:58:28.503

它只是描述了这个类与包含类的关系。

**内部类**是在另一个类的范围内定义的类。内部类的实例附加到容器类的特定实例（创建它们的实例）。

**静态嵌套类**是嵌套类，但定义为静态的。像静态成员一样，它们与特定实例无关；它们只是属于包含类。在嵌套类中，您不能引用包含类的非静态成员/方法，因为没有与它们关联的特定实例。

# xml - 使用动态文件名引用 xml 文件

> ID：15448353
> 
> 赞同：1
> 
> 时间：2013-03-16T10:51:13.187
> 
> 标签：xml

我需要能够引用一个 xls 文件名，该文件名的末尾有一个动态日期，该日期会发生变化。文件名由两部分组成。第一部分是不变的静态名称，但日期格式的第二部分确实发生了变化。文件名格式如下

stock_newupdated__16-03-2013_10-41-58.xls

不知道该怎么做。

```
$filename = 'staticpartofilename_dynamicdateontheend'

$file_handle = fopen($filename . "xls", "r");

while (!feof($file_handle) )
{
$line_of_text = fgetcsv($file_handle, 1024);

$sku = $line_of_text[0];
$sql   = "UPDATE mytable SET quantity = 0 WHERE SKU = '" . $sku . "'";  
$result = dbQuery($sql);
} 
```

# php - 如何检查字符串是否由PHP中的整数组成

> ID：15448354
> 
> 赞同：3
> 
> 时间：2013-03-16T10:51:15.747
> 
> 标签：php

我正在编写 php 代码来验证用户输入的一些数据，其中一个是整数，我曾经`$_REQUEST["age"]`得到它，当我检查这个值是否是整数时`gettype($_REQUEST["age"] == "integer"`，`is_int($_REQUEST["age"])`两者都给我 false，但是当我使用时`is_numeric($_REQUEST["age"])`给出我是真的。我想检查参数的值是否为整数，我是否正确使用了前 2 个函数或者我错过了什么？

塔肯

注意：我试图输出`gettype($_REQUEST["age"])`它给了我`string`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T11:00:03.560

**简洁版本：**

采用`ctype_digit($_REQUEST['age'])`

**长版：**

正如您在使用时发现的那样，您的问题`gettype`是`$_REQUEST`返回一个*字符串*。即使该字符串在*语义*上是整数，例如`16`，它仍然是字符串类型而不是整数类型变量。你从这两个测试中得到不同的结果，因为它们测试不同的东西：

*   `is_numeric`[根据PHP 文档](http://php.net/manual/en/function.is-numeric.php)测试字符串是否包含“可选符号、任意位数、可选小数部分和可选指数部分” 。在您的情况下，字符串仅包含数字，因此测试返回`True`.
*   `is_int`测试变量的类型是否为整数——它不会是，因为它是由`$_REQUEST`.

这就是为什么在`is_numeric`返回`True`时`is_int`返回`False`：字符串只包含数字（因此“是数字”），但在技术上仍然具有字符串类型，而不是整数类型（因此“不是 int”）。当然，`is_numeric`对于整数测试是不够的，因为`True`如果字符串有小数或使用科学记数法，它会返回，即是数字但不是整数。

要测试是否`$_REQUEST`是整数，无论​​技术类型如何，您都可以测试字符串中的所有字符是否都是数字（因此整个字符串是整数）。为此，您可以使用[ctype_digit](http://php.net/manual/en/function.ctype-digit.php)：

```
ctype_digit($_REQUEST['age']) 
```

这将返回`True`for`16`但不是 for `16.5`or `16e0`- 从数字非整数中剔除整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:54:30.723

```
<?
     if(intval($_REQUEST["age"]) > 0):
        echo 'Ineger';
     else:
        echo 'something else';
     endif;
?> 
```

# android - 从 Android 卸载应用程序后如何删 除本地存储数据

> ID：15448355
> 
> 赞同：2
> 
> 时间：2013-03-16T10:51:26.937
> 
> 标签：android, html, cordova, local-storage

我制作了一个应用程序，它将数据存储在本地存储中，即使在重新启动应用程序后也可以使用该数据。但即使在卸载应用程序后它也会存储数据。

那么有什么方法可以在卸载应用程序后删除该本地存储数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T19:47:09.627

您可以使用此代码以手动方式检测旧的应用程序版本：

```
/*your current app version, you should manually update it here*/
var Appversion = "1.2"; 
var savedAppVersion = localStorage.getItem("version");
/*if there is one check if it is the same*/
if (savedAppVersion && savedAppVersion === version)
{ // do nothing }
else {
/*clear local storage*/
localStorage.clear();
/*save new app version*/
localStorage.setItem("version", version);
} 
```

否则，您可以使用`$cordovaAppVersion.getVersionNumber()`方法获取实际的应用程序版本

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:59:53.510

如果您使用 sqlite 数据库存储数据，它将随着您的应用程序删除而删除，相关的共享偏好数据也将删除，但如果您使用特定文件夹文件存储在外部存储上，它不会随着您的应用程序卸载而删除。

# python - 如何在python中使用1个函数并行化2个for循环

> ID：15448359
> 
> 赞同：0
> 
> 时间：2013-03-16T10:51:36.627
> 
> 标签：python, parallel-processing

嗨，我有以下代码：

```
import numpy as np
from scipy import pi,sin,cos
import matplotlib.pyplot as plt
import math as m

image = np.zeros(shape=(201,201))

a=4
b=3
pa = 45

def dE(i,j,a,b,PA,x0,y0):
    the = -PA+90.0
    x=i - x0
    y=j - y0
    cos_a,sin_a=cos(the*pi/180.0),sin(the*pi/180.0)
    Xs = (x*cos_a - y*sin_a)**2.0 
    Ys = (x*sin_a + y*cos_a)**2.0 
    r = np.sqrt((Xs/a**2) + (Ys/b**2)) 
    return r

for i in range(0,len(image)):
    for j in range(0,len(image)):
        image[j,i] = dE(i,j,a,b,pa,100.0,100.0)

plt.imshow(image)
plt.show() 
```

如何并行化底部的两个 for 循环？提前致谢！

我已经添加了上面的完整代码。干杯克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:08:40.097

好的，谢谢您的意见，这真的很有帮助！

```
import numpy as np
from scipy import pi,sin,cos
import matplotlib.pyplot as plt
import math as m

image = np.zeros(shape=(201,201))

a=4
b=3
pa = 240

def dEllipse(x,y,a,b,PA):
    the = -PA+90.0
    cos_a,sin_a=cos(the*pi/180.0),sin(the*pi/180.0)
    Xs = (x*cos_a - y*sin_a)**2.0 
    Ys = (x*sin_a + y*cos_a)**2.0 
    r = np.sqrt((Xs/a**2) + (Ys/b**2)) 
    return r

x = np.arange(0-100.0, 201-100.0)
y = np.arange(0-100.0, 201-100.0)
xx, yy = np.meshgrid(x, y)

new_image= dEllipse(xx,yy,a,b,pa)

plt.imshow(new_image)
plt.show() 
```

# sql-server - MS SQL-Server：无法在 Windows 7 上进行 ODBC 连接？

> ID：15448362
> 
> 赞同：3
> 
> 时间：2013-03-16T10:52:06.213
> 
> 标签：sql-server, windows-7, odbc

在 Windows 7 上为 SQL-Server 创建 ODBC 数据源连接时遇到问题。

问题摘要：只能为“主”数据库创建 ODBC 数据源连接，而不能为附加的任意数据库创建。

我在网上搜索了一下，没有找到解决方案。以下是详细信息：

1.  我在 Windows 7 64 位系统上安装了 MS SQL Server。详细信息：SQLEXPRESS 版本，版本：10.1.2531.0，内部版本：2007.100.2531.0，实例 ID：MSSQL10.SQLEXPRESS。

使用“SQL Server 配置管理器”，它说：

```
SQL Server(SQLEXPRESS) 正在运行
```

我还设置了：“登录身份：内置帐户->本地系统”。

1.  使用“Microsoft SQL Server Management Studio”（版本 10.0.1600.22）我已连接到数据库，用户名和密码为空白。然后我创建了一个名为“Test1”的新数据库，并将创建的文件指向：“F:\Data\SQL Server\Test1.sdf”。我继续创建了几个（简单的）表，填充了几行，并成功运行了几个查询 - 全部使用“Microsoft SQL Server Management Studio”。到目前为止，一切都很好。

2.  但是，我需要使用 ODBC 连接从外部程序连接到数据库。因此，使用“ODBC 数据源管理器”（\%sysdir%\SysWOW64\odbcad32.exe 版本 6.1.7600.16385）（64 位），我正在尝试创建数据源接口。这是我的经验：（我称dsn：“SYS_DB”）：

3a。当去“系统DNS”->添加->“SQL Native Client 10.0”时；（司机）；服务器：PLUTO\SQLEXPRESS；“具有集成的 Windows 身份验证”；（所有其他选项：默认），当我按下：“测试数据源”时，它说：

```
... ... 地址 PLUTO\SQLEXPRESS' 用于建立连接。
... 测试成功完成！
```

（PLUTO 是计算机名称）。

3b。问题是，我需要连接到“Test1”数据库，而不是默认的“master”数据库。

因此，在“ODBC 数据源管理器”窗口的第三个窗口中，当我去：-> 将默认数据库更改为：Test1，我得到一个窗口说：

```
输入的数据库无效
```

如果我返回一个窗口，并取消选中：“连接到 SQL Server 以获取其他配置选项的设置”，然后我检查：“附加数据库文件名”：F:\Data\SQL Server\Test1.sdf（就像我上面 2\. 中提到），数据源测试失败并显示：

```
尝试连接
[微软][SQL Server Native Client 10.0][SQL Server]
文件“F:\Data\SQL Server\Test1.sdf”的标头不是有效的数据库文件标头。
文件大小属性不正确。
```

3c。尝试设置驱动程序时：“系统DNS”->添加->“SQL Server”；（而不是上面 3a. 中的“SQL Native Client 10.0”），行为是相同的：连接到默认的“master”数据库时成功，尝试连接到“Test1”数据库时失败，错误消息与在 3b 中。以上。

1.  注意：当我去：“SQLcmd -L”时，它说：

    ```
    服务器：
    冥王星
    冥王星\SQLEXPRESS
    ```

    我在整个网络上搜索过，但没有找到解决方案。您的帮助将不胜感激。

许多 TIA - 海伦

更多信息（3-16）：我去的时候：

```
>sqlcmd -S pluto\sqlexpress -Q "选择getdate()"
2013-03-16 10:07:04.380（1 行受影响）
```

因此与默认（“主”）数据库的连接工作正常。

但是当我去的时候：

```
>sqlcmd -S pluto\sqlexpress -d Test1 -Q "select getdate()"
Msg 4060, Level 11, State 1, Server PLUTO\SQLEXPRESS, Line 1
Cannot open database "Test1" requested by the login. The login failed.
Msg 18456, Level 14, State 1, Server PLUTO\SQLEXPRESS, Line 1
Login failed for user 'PLUTO\MyUser'. 
```

因此，问题似乎在于该服务器上新数据库的用户权限/访问权限，即：“Test1”。

任何人都可以帮助如何检查/分配权限到 SQL Server 上的特定数据库吗？

许多 TIA

海伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:18:24.040

您正在运行权限问题希望这会有所帮助。

**sp_addlinkedsrvlogin**

创建或更新 Microsoft® SQL Server™ 本地实例上的登录与链接服务器上的远程登录之间的映射。句法

sp_addlinkedsrvlogin [ @rmtsrvname = ] 'rmtsrvname' [ , [ @useself = ] 'useself' ] [ , [ @locallogin = ] 'locallogin' ] [ , [ @rmtuser = ] 'rmtuser' ] [ , [ @rmtpassword = ] ' rmtpassword'] 参数

[@rmtsrvname =] 'rmtsrvname'

是登录映射应用到的链接服务器的名称。**rmtsrvname**是**sysname**，没有默认值。

[@useself =] 'useself'

确定用于连接到远程服务器的登录名。useself 是**varchar(8)**，默认值为 TRUE。值 true 指定 SQL Server 身份验证登录使用自己的凭据连接到**rmtsrvname**，忽略**rmtuser**和**rmtpassword**参数。false 指定**rmtuser**和**rmtpassword**参数用于连接到指定**locallogin的****rmtsrvname**。如果**rmtuser**和**rmtpassword********也设置为 NULL，不使用登录名或密码连接到链接服务器。true for useself 对于 Windows NT 验证登录无效，除非 Microsoft Windows NT® 环境支持安全帐户委托并且提供程序支持 Windows 验证（在这种情况下，不再需要创建值为 true 的映射但仍然有效）。******

 ******[@locallogin =] '本地登录'

是本地服务器上的登录。**locallogin**是**sysname**，默认为 NULL。NULL 指定此条目适用于连接到**rmtsrvname**的所有本地登录。如果不为 NULL，**locallogin**可以是 SQL Server 登录名或 Windows NT 用户。Windows NT 用户必须已被直接授予对 SQL Server 的访问权限，或者通过其在授予访问权限的 Windows NT 组中的成员资格。

[@rmtuser =] 'rmtuser'

当 useself 为 false 时用于连接到**rmtsrvname的用户名。****rmtuser**是**sysname**，默认值为 NULL。

[@rmtpassword =] 'rmtpassword'

是与**rmtuser**关联的密码。**rmtpassword**是**sysname**，默认值为 NULL。返回代码值

```
0 (success) or 1 (failure) 
```

*评论*

当用户登录到本地服务器并执行访问链接服务器上的表的分布式查询时，本地服务器必须代表用户登录到链接服务器才能访问该表。使用**sp_addlinkedsrvlogin**指定本地服务器用于登录到链接服务器的登录凭据。

本地服务器上的所有登录名和链接服务器上的远程登录名之间的默认映射是通过执行**sp_addlinkedserver**自动创建的。默认映射表明 SQL Server 在代表登录名连接到链接服务器时使用本地登录名的用户凭据（相当于在链接服务器的 @useself 设置为 true 的情况下执行 sp_addlinkedsrvlogin）。仅使用**sp_addlinkedsrvlogin**更改默认映射或为特定本地登录添加新映射。要删除默认映射或任何其他映射，请使用**sp_droplinkedsrvlogin**。

当所有这些条件都存在时，SQL Server 可以自动使用发出查询的用户的 Windows NT 安全凭据（Windows NT 用户名和密码）来连接到链接服务器，而不必使用**sp_addlinkedsrvlogin**来创建预定的登录映射：

*   用户使用 Windows 身份验证模式连接到 SQL Server。
*   安全帐户委托在客户端和发送服务器上可用。
*   该提供程序支持 Windows 身份验证模式（例如，在 Windows NT 上运行的 SQL Server）。

在链接服务器使用通过在本地 SQL Server 上执行**sp_addlinkedsrvlogin**定义的映射执行身份验证后，远程数据库中各个对象的权限由链接服务器而不是本地服务器确定。

**sp_addlinkedsrvlogin**不能从用户定义的事务中执行。权限

只有**sysadmin**和**securityadmin**固定服务器角色的成员才能执行**sp_addlinkedsrvlogin**。

[故障排除](http://msdn.microsoft.com/en-us/library/ms366351%28v=sql.105%29.aspx)

[资源](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/8ec97763-c978-48dd-a92c-4b47e6a959d7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:17:08.653

事实证明，“Test1”数据库位于“compact”实例中。（在我的 OP 中看到“sdf”数据库文件扩展名可能已经注意到了）。

所以这就是 ODBC 连接看不到它的原因。（SQL Server Compact 版本没有 ODBC 管道）。******

# performance - 如何提高下载管理器程序的速度？

> ID：15448366
> 
> 赞同：0
> 
> 时间：2013-03-16T10:52:32.767
> 
> 标签：performance, download, download-manager, http-1.1

我正在编写一个下载管理器程序。在我的程序中，网址以正常速度下载。如何提高下载速度？是关于 HTTP 1.1 还是有算法来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:01:59.060

许多下载管理器都使用了一种算法。它将文件分割成部分并同时下载它们 - 当文件服务器限制每个文件的单个用户的下载速度以避免过多的流量时，它会加快下载速度。您必须记住，并非所有服务器都允许这样做。

# c++ - “隐式 'this' 参数没有已知的转换”错误

> ID：15448369
> 
> 赞同：1
> 
> 时间：2013-03-16T10:52:37.430
> 
> 标签：c++

我有一个类和两种方法：

```
public:
bool Search ( const string & oName, const string & oAddr,
                    string & cName, string & cAddr ) const
    {
        Company ctmp;
        ctmp.own = oName + "|" + oAddr;
        int place = searchDupl(ctmp,currentsize,0);

        if (place < 0)
            return false;
        else
        {
            size_t pos = c[place].cmpn.find(' ');
            cName = c[place].cmpn.substr(0,pos);
            cAddr = c[place].cmpn.substr(pos+1);
            return true;
        }
    } 
```

私下里，我有 searchDupl：

```
int searchDupl(Company cmp,int imax,int imin)
    {
        if (imax < imin)
            return -1;
        else
        {
            int mid = imin + ((imax - imin)/2);

            if (c[mid].own > cmp.own)
            {
                return searchDupl(cmp,mid-1,imin);   
            }
            else if (c[mid].own < cmp.own)
            {
                return searchDupl(cmp,imax,mid+1);
            }
            else 
            {
                return mid;
            }
        }
    } 
```

c 是一个动态数组，在私有部分中定义并在构造函数中初始化。currentsize 是 int 类型的变量（也是私有的并在构造函数中初始化），它定义了 c 中元素的数量。

当我尝试使用 g++ 编译它时，出现以下错误：

```
main.cpp: In member function ‘bool CCompanyIndex::Search(const string&, const string&, std::string&, std::string&) const’:
main.cpp:69:54: error: no matching function for call to ‘CCompanyIndex::searchDupl(Company&, const int&, int) const’
main.cpp:69:54: note: candidate is:
main.cpp:106:13: note: int CCompanyIndex::searchDupl(Company, int, int) <near match>
main.cpp:106:13: note:   no known conversion for implicit ‘this’ parameter from ‘const CCompanyIndex* const’ to ‘CCompanyIndex*’ 
```

我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T11:15:20.283

您的第一个方法被声明为`const`-method

```
bool Search ( const string & oName,
              const string & oAddr,
              string & cName,
              string & cAddr ) const
//                             ^^^^^ here
{
  // ...
} 
```

这意味着 的类型`this`是`const CCompanyIndex* const`。当您尝试从该方法中调用第二个方法时，该调用等效于`this->searchDupl(ctmp,currentsize,0)`. 这就是为什么类型`this`在您的情况下很重要。你需要一个可变的实例`CCompanyIndex`，即你需要`this`是类型`CCompanyIndex* const`，因为第二种方法被声明为

```
int searchDupl(Company cmp,int imax,int imin)
//                                           ^^^ no const here
{
  // ...
} 
```

因此您的代码无法编译。要修复它，您应该声明第二个方法`const`以及该方法显然不会改变类的状态：

```
int searchDupl(Company cmp,int imax,int imin) const
{
  // ...
} 
```

# sqlite - 如何将存储在 sqlite 数据库中的文件作为 blob 转储？

> ID：15448373
> 
> 赞同：40
> 
> 时间：2013-03-16T10:52:56.400
> 
> 标签：sqlite, blob

我有一个 sqlite3 数据库。一列具有 TEXT 类型，并包含我想保存为文件的 blob。这些是压缩文件。

该命令的输出`sqlite3 db.sqlite3 ".dump"` 是：

`INSERT INTO "data" VALUES(1,'objects','object0.gz',X'1F8B080000000000000 [.. a few thousands of hexadecimal characters ..] F3F5EF')`

如何使用命令行将 sqlite 文件中的二进制数据提取到文件中？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-16T15:41:32.800

`sqlite3`无法直接输出二进制数据，因此您必须将数据转换为 hexdump，用于`cut`从 blob 文字中提取十六进制数字，并使用`xxd`（`vim`包的一部分）将 hexdump 转换回二进制：

```
sqlite3 my.db "SELECT quote(MyBlob) FROM MyTable WHERE id = 1;"  \
| cut -d\' -f2                                                   \
| xxd -r -p                                                      \
> object0.gz 
```

对于 SQLite 3.8.6 或更高版本，命令行 shell 包含`fileio`扩展，它实现了以下[`writefile`功能](http://www.sqlite.org/cli.html#fileio)：

```
sqlite3 my.db "SELECT writefile('object0.gz', MyBlob) FROM MyTable WHERE id = 1" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-06-05T19:25:06.227

`writefile`如果使用`sqlite3`命令行工具，您可以使用：

示例用法： `select writefile('blob.bin', blob_column) from table where key='12345';`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-09T03:24:54.203

就我而言，我使用“hex”而不是“quote”从数据库中检索图像，并且不需要在命令管道中“剪切”。例如：

```
sqlite3 fr.db "select hex(bmp) from reg where id=1" | xxd -r -p > 2.png 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-04T19:23:34.673

我不得不对[CL](https://stackoverflow.com/users/11654/cl)的答案进行一些小的改动，以使其对我有用：

*   他正在使用的命令的结构中没有数据库名称，我使用的语法类似于：

    ```
    sqlite3 mydatabase.sqlite3 "Select quote(BlobField) From TableWithBlod Where StringKey = '1';" | ... 
    ```

*   他使用`cut`命令的方式在我的机器上不起作用。对我来说正确的方法是：

    ```
    cut -d "'" -f2 
    ```

所以最终的命令是这样的：

```
sqlite3 mydatabase.sqlite3 "Select quote(BlobField) From TableWithBlod Where StringKey = '1';" | cut -d "'" -f2 | xxd -r -p > myfile.extension 
```

就我而言：

```
sqlite3 osm-carto_z14_m8_m.mbtiles "select quote(images.tile_data) from images where images.tile_id = '1';" | cut -d "'" -f2 | xxd -r -p > image.png 
```

# c# - 解释 DrawArc 方法？

> ID：15448375
> 
> 赞同：5
> 
> 时间：2013-03-16T10:53:01.880
> 
> 标签：c#, winforms, draw

我有一个任务，我必须画一个**八字形**，所以我认为它是画四个弧线。我尝试使用该`DrawArc`方法，但我真的不明白它是如何工作的。

该`DrawArc`方法有 4 个参数： 1-笔。2-要绘制的矩形。3-起始角度。4-扫角。

我不明白的是起始角和扫角，有知识的人可以告诉我这两个参数是什么以及它们如何影响绘图？

给出矩形参数也以（0,0）为起点。

编辑：

我尝试了以下代码：

```
 e.Graphics.DrawArc(drawPen, 0, 0, 600, 400, 45, 90);
        e.Graphics.DrawArc(drawPen, 0, 345, 600, 400, -45, -90); 
```

结果如下：

![在此处输入图像描述](../Images/4701afb6b9295a23741c1b1dcd24a7d4.png)

我想让它变大，我玩过代码但没有成功，我不明白我在做什么，我只是在改变数字，这就是我要求解释的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:32:09.970

您想象二维坐标轴和顺时针旋转，
起始角度：显示您要从 X 轴开始绘制的点
扫描角度：顺时针旋转的度量，

还有MSDN说：
startAngle：从x轴到圆弧起点顺时针测量的角度。

sweepAngle：从 startAngle 参数顺时针测量到弧的终点的角度，以度为单位。

例如：水平弧和垂直弧：

```
 switch (ArcType)
        {
            case ArcType.Horizantal :
                g.DrawArc(Pens.Black, 0, 15, 15, 15, 0, -180); 
                break; 
            case ArcType.Vertical:
                g.DrawArc(Pens.Black, 0, 15, 15,15, -90,180);                    
                break;
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-14T06:19:25.413

坐标用于从顶部和左侧按宽度和高度绘制一个**完整的椭圆。**实际绘制椭圆的哪一部分取决于起点和终点的角度。如果圆是时钟，则 3:00 为 0，6:00 为 90，9:00 为 180，12:00 为 270。

# ios - iOS 上的 PhoneGap Facebook Connect 插件

> ID：15448376
> 
> 赞同：2
> 
> 时间：2013-03-16T10:53:02.267
> 
> 标签：ios, facebook, cordova, phonegap-plugins

我想知道是否有任何成功的说明：[https](https://github.com/phonegap/phonegap-facebook-plugin) ://github.com/phonegap/phonegap-facebook-plugin ？

我的环境如下：1）xcode：版本4.5.1（4G1004）2）Phonegap：2.5 3）Macbook Pro 64bit。4）Facebook SDK 3.2 5）目标构建是 iOS5（尝试 6 但也失败了）

按照[https://github.com/phonegap/phonegap-facebook-plugin](https://github.com/phonegap/phonegap-facebook-plugin) for iOS 的说明操作后，我的构建失败了。

错误信息是：

```
ld: 379 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能指出我如何解决这个错误？

任何在线教程或分步说明也会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:23:24.743

我遇到了同样的问题，并通过在 Github 上关注它来修复它：[https ://github.com/ghn/phonegap-facebook-plugin/commit/83d41c1b3e999f11333ff7da89918ff6e58bf72f](https://github.com/ghn/phonegap-facebook-plugin/commit/83d41c1b3e999f11333ff7da89918ff6e58bf72f)

### 添加 Cordova Facebook 插件：

1.  找到 Project Navigator 的**plugins**部分并创建一个组“ios”。确保将其添加为“组”（黄色文件夹）
2.  从**Cordova Facebook 插件文件夹中，将****src**文件夹中的FacebookConnectPlugin.h 和 FacebookConnectPlugin.m 复制到新组“ios”中。
3.  在项目导航器中找到该`config.xml`文件并将一个新条目作为子项添加到插件标记：
    *   `< plugin name="org.apache.cordova.facebook.Connect" value="FacebookConnectPlugin" />`

您必须在插件目录中创建一个 ios 文件夹。并确保从插件目录中删除 FacebookConnectPlugin.h 和 FacebookConnectPlugin.m。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T15:22:31.000

此错误通常来自于包含已编译库（作为项目中的框架或作为“构建阶段”项目属性选项卡中的构建目标）和生成它的 .m 源文件。

一些教程告诉你包含 FacebookSDKResources.bundle 框架，还有一些告诉你复制 Plugins/ios/facebook 中的源文件。如果你两者都做，你会得到这个错误。

# vaadin - vaadin 中的页面加载事件

> ID：15448380
> 
> 赞同：5
> 
> 时间：2013-03-16T10:53:36.933
> 
> 标签：vaadin

我有一个带有基于复杂查询填充数据的表的页面（即使我使用分页也需要很多时间）。我使用 BeanItemcontainer 将数据加载到表中。现在遇到问题，我希望以异步方式将数据加载到表中（在用户屏幕上加载完整页面之后。我想填充数据）。是否有类似 onPageLoad 事件或 onPageRenderEvent 或等效的东西可以用来实现这一点？

细节 -

版本 - Vaadin -7.0
组件 - 表
数据容器 - BeanItemContainer。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:29:34.550

有很多方法可以解决这个问题，但你必须决定如何解决这个问题。这是我知道的两个：

1) 来自客户的请求。
2）从服务器推送。（技术上仍然是来自客户的请求）

1 -- A) 来自客户端编程的 Javascript 函数的请求。使用[Javascript 扩展](https://vaadin.com/wiki/-/wiki/Main/Integrating%20a%20JavaScript%20library%20as%20an%20extension)或[Javascript 组件](https://vaadin.com/wiki/-/wiki/Main/Integrating%20a%20JavaScript%20component)将组件附加到布局，并通过调用[服务器端 API 函数](https://vaadin.com/wiki/-/wiki/Main/Exposing%20server%20side%20API%20to%20JavaScript)发出请求。然后，您可以在该请求中更新表，而不必担心同步问题。

1 -- B) 制作自己的 GWT / Vaadin 小部件（基本上是一样的）来做 1A。

2 -- A) 来自“服务器端”编程的 Vaadin 组件的请求。制作轮询服务器的可见（或不可见）[进度指示器](https://vaadin.com/book/vaadin7/-/page/components.progressindicator.html)。在后台线程中填充表格，Vaadin 将发送您当前收集的数据。进度指示器可以多次执行此操作，并且表只会将差异发送到客户端代码（称为增量）。小心从后台线程更新面向客户端的组件；您需要同步对组件的更改以避免并发修改错误。

2 -- B) 向应用程序添加复习，并按照上面的 2A 进行操作，而不需要进度指示器。

任何一种解决方案都需要您在后台线程 (2A,B) 或从客户端 (1A,B) 调用的服务器方法中显式更新表。两者在技术上都是基于客户请求的。Vaadin 团队正在努力增加真正的“推动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:45:51.377

Vaadin 解决这个问题的方法是使用延迟加载 Container。Vaadin 有几个延迟加载容器可用：核心中的 SQLContainer、[LazyQueryContainer](http://vaadin.com/addon/lazy-query-container)和[JPAContainer](http://vaadin.com/addon/vaadin-jpacontainer)。

# java - 如何在java中为txt文件添加书签

> ID：15448385
> 
> 赞同：0
> 
> 时间：2013-03-16T10:53:56.603
> 
> 标签：java, swing, ebook-reader

我正在使用 java swing 编写一个电子书阅读器程序。
我将一个 txt 文件读入 JTextArea。

```
JTextComponent.read(Reader in, Object desc). 
```

感谢@Andrew Thompson，现在我可以使用插入符号位置跳转到 JTextArea 中的特定位置。但我仍然不知道如何在导航文本时更新插入符号，以便将其保存为书签。

我写了一些代码来显示我的问题：

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class MyProblem extends JFrame {

    public MyProblem() {
        JTextArea textArea = new JTextArea(20, 60);
        textArea.setEditable(false);
        String aLine = "Line number: ";
        String newLine = System.getProperty("line.separator");
        for (int i=0; i<20; i++) {
            textArea.insert(aLine + i + newLine, textArea.getDocument().getLength());
        }
        String problem = "When scrolling, how can set caret postion automatically on the first line of the viewport so I can save it?";
        textArea.append(problem);
        textArea.append(newLine);
        for (int i=21; i<39; i++) {
            textArea.insert(aLine + i + newLine, textArea.getDocument().getLength());
        }

        JScrollPane scrollPane = new JScrollPane(textArea);
        add(scrollPane);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new MyProblem().setVisible(true);
            }
        });
    }
} 
```

# perl - Perl 是否有 LLVM 后端？

> ID：15448386
> 
> 赞同：3
> 
> 时间：2013-03-16T10:53:58.867
> 
> 标签：perl, clang, llvm, llvm-ir, intermediate-language

我有一个用 C 编写的项目，我希望将其转换为 Perl。我的一个朋友建议使用 LLVM。我使用 Clang 将我的 C 代码编译为 LLVM 程序集。现在我正在尝试将此中间表示转换为 Perl，但我似乎找不到任何后端。有人会指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T14:45:21.400

1.  不，没有这样的后端。至少不是直接的。Emscripten 将 LLVM IR 转换为 Javascript，*也许*您可​​以使用其他东西将其转换为 Perl。
2.  将项目从一种语言转移到另一种语言是一个非常糟糕的主意。代码将完全不可读且不可维护。要么做一个诚实的重写，要么用 Perl 的外部函数接口工具将你的 C 包装为一个库，然后*从*Perl 中使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T17:18:49.610

转换为 Perl 是不行的。它还没有完成，因为在 Perl 中模拟 C 会非常慢。对于初学者，它们具有完全不同的类型系统。但是，完全没有必要将代码转换为 Perl 以从 Perl 调用它。您可以从 Perl 加载已编译的 C 代码。

您需要做的是告诉 Perl 如何调用这些 C 函数。Perl 处理标量等，而 C 处理整数等。这是使用 XS 完成的。

[perlxstut](http://perldoc.perl.org/perlxstut.html)包含有关如何执行所有这些操作的文档。

# primefaces - 在 selectonemenu 中选择值后立即显示对话框

> ID：15448392
> 
> 赞同：0
> 
> 时间：2013-03-16T10:54:47.880
> 
> 标签：primefaces

当我在 dataTable 中使用时，我对 p:selectonemenu 有一个要求。

```
<p:selectOneMenu value="#{buyerInProcessBean.subject}"
                            id="buyerResponseId" >
                            <f:selectItems
                                value="#{buyerInProcessBean.subjectMap[trans.decisionrule.ruleId]}"
                                var="subject" itemLabel="#{subject}" itemValue="#{subject}"></f:selectItems>
                            <f:selectItem itemLabel="Other" itemValue="Other"></f:selectItem>
                        </p:selectOneMenu> 
```

如果我选择“其他”，则必须强制弹出对话。否则不是强制性的。

我怎样才能达到这种要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:38:54.223

您应该将函数绑定到`onchange`您的事件`<p:selectOneMenu>`，找出所需选项的值是否与应打开对话框的值匹配，并`dialog.open()`在这种情况下触发。

请注意，Primefaces 的组件将`<select>`标签包装在一些 div 中并`<option>`在中间组件中输出所选内容，因此将事件附加到隐藏`<select>`元素将不起作用。另一方面，例如，JSF`<h:selectOneMenu>`标记呈现一个`<select>`元素，因此将行为绑定到该元素`onchange`将触发所需的行为。

风景：

```
<h:form id="form">
    <p:selectOneMenu value="#{buyerInProcessBean.subject}" id="buyerResponseId" onchange="changeEvent(this)">
        <f:selectItems value="#{buyerInProcessBean.subjectMap[trans.decisionrule.ruleId]}" 
                       var="subject" itemLabel="#{subject}" itemValue="#{subject}" />
        <f:selectItem itemLabel="Other" itemValue="Other" />
    </p:selectOneMenu>
</h:form>
<p:dialog widgetVar="dialog">
    <h:outputText value="Additional Data" />
</p:dialog> 
```

JavaScript：

```
function changeEvent(element) {
    var val = $(element).find('option:selected').text();
    if(val === 'Other') {
        dialog.show();
    }
} 
```

# xunit.net - xunit.net 的 API 文档

> ID：15448393
> 
> 赞同：9
> 
> 时间：2013-03-16T10:54:49.560
> 
> 标签：xunit.net

有人可以指点我帮助 xunit.net 的文件/API 文档吗，我是 xunit.net 的新手，直到现在无法找到帮助文件/API 文档

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:39:44.417

@Dima 的答案 (+1'd) 是它所在的位置（尤其[是比较文章](http://xunit.github.io/docs/comparisons.html)），但[这个备忘单](http://www.planetgeek.ch/2011/12/04/xunit-cheat-sheet/)很好而且很短。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T11:00:57.413

你会在这里找到你需要的一切：http: [//xunit.codeplex.com/](http://xunit.codeplex.com/)

# php - PHP 中的 GZIPing HTML 会阻止 Google Adsense 广告的展示

> ID：15448395
> 
> 赞同：0
> 
> 时间：2013-03-16T10:54:54.253
> 
> 标签：php, gzip, adsense

尝试在 PHP 中使用 GZIP 将 ~60kb 的索引页面减少到 ~10kb。除了我的 Google Adsense 广告没有显示之外，我已经取得了成功。

为了您的考虑，我提供了同一页面的 2 个实时示例：

*   **默认内容编码： http:** [//openmicfinder.co.uk/index.php](http://openmicfinder.co.uk/index.php)（广告显示）

*   **GZIP 内容编码：** [http://openmicfinder.co.uk/index2.php](http://openmicfinder.co.uk/index2.php)（不显示广告）

我正在使用的代码如下（您可以从这篇文章中认出它：[PHP Manual GZip Encoding](https://stackoverflow.com/questions/5699020/php-manual-gzip-encoding)）：

```
function _compress($data) {
    $supportsGzip = strpos( $_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip' ) !== false;

    if ( $supportsGzip ) {
        $content = gzencode( trim( preg_replace( '/\s+/', ' ', $data ) ), 9);
    } else {
        $content = $data;
    }

    $offset = 60 * 60;
    $expire = "expires: " . gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";

    header('Content-Encoding: gzip');
    header("content-type: text/html; charset: UTF-8");
    header("cache-control: must-revalidate");
    header( $expire );
    header( 'Content-Length: ' . strlen( $content ) );
    header('Vary: Accept-Encoding');

    echo $content;
}

ob_start();
include("index_standard.php");
$contents = ob_get_clean(); 
ob_end_flush();
_compress($contents); 
```

这让我很困惑，因为其他 Javascript 不受影响。

*作为旁注。我很想了解（并修复）这个错误，但如果不可能，我会考虑将我的广告位更改为异步加载方法作为备用计划。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:34:54.237

在你之前`sesion_start()`

```
if (substr_count($_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip')) ob_start("ob_gzhandler"); else ob_start();
include("index_standard.php");
ob_flush(); 
```

# matlab - 从matlab中的匿名函数接收NaN

> ID：15448398
> 
> 赞同：1
> 
> 时间：2013-03-16T10:55:19.957
> 
> 标签：matlab, anonymous-function, nan, piecewise

我想实现一个分段周期函数，它应该在某些间隔内为零，并且在其他地方看起来像一个测试函数（例如`exp(a^2/(abs(x)^2-a^2))`for`abs(x)< a`和零）。
我试过了

```
nu = @(x) ((8*10^(-4)/exp(1)*exp(30^2./(abs(mod(x,365)-31).^2-30.^2))).* ... 
        and((1<mod(x,365)),(mod(x,365)<61)) + ...
      (8*10^(-4)/exp(1)*exp(10^2./(abs(mod(x,365)-300).^2-10.^2))).* ...
        and((290<mod(x,365)),(mod(x,365)<310))); 
```

分别

```
nu = @(x) ((0*x).* and((0<=mod(x,365)),(mod(x,365)<=1)) + ...
      (8*10^(-4)/exp(1)*exp(30^2./(abs(mod(x,365)-31).^2-30.^2))).* ... 
        and((1<mod(x,365)),(mod(x,365)<61)) + ...
      (0*x).* and((61<=mod(x,365)),(mod(x,365)<=290)) + ...
      (8*10^(-4)/exp(1)*exp(10^2./(abs(mod(x,365)-300).^2-10.^2))).* ...
        and((290<mod(x,365)),(mod(x,365)<310)) + ...
      (0*x).* and((310<=mod(x,365)),(mod(x,365)<365))); 
```

应该表现相同。目的是有一个 [0,365) 的周期，因此是模数。

现在我的问题是，`nu(1)=nu(61)=nu(290)=nu(310)=NaN`而且在他们的一个小社区，例如`nu(0.99)=NaN`。但是我从指数函数中排除了这些点，这会导致问题。即使我对指数函数使用较小的间隔（例如（2,60）和（291,309）），我也会`NaN`在相同的点收到。

有任何想法吗？谢谢指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T02:50:07.567

我在执行向量化计算时使用的一个技巧是使用条件来修改问题值，其中存在被零除或相关错误的风险。例如，假设您想反转向量中的所有条目，但将零保留为零（并将 1e-8 内的任何值也设置为零）。你会这样做：

```
outVect = 1./(inVect+(abs(inVect)<=1e-8)).*(abs(inVect)>1e-8); 
```

对于满足 abs(value)>1e-8 条件的值，这将计算 1/value。如果 abs(value)<=1e-8，它实际上计算 1/(value+1)，然后乘以零，得到零值。如果分母内没有条件，它将在 value 为零时计算 1/value，从而得到 inf...，然后将 inf 乘以零，得到 NaN。

同样的技术应该适用于您更复杂的匿名函数。

# javascript - 本地存储过期数据

> ID：15448400
> 
> 赞同：0
> 
> 时间：2013-03-16T10:56:10.533
> 
> 标签：javascript, timestamp, local-storage

我正在使用 localStorage 保存会话客户端以节省我的数据库中的服务器端空间。为了做到这一点，我使用这样的对象：

```
users = {
  478vh9k52k: {
    name: 'john',
    messages: []
  },
  42r66s58rs: {
    name: 'jack',
    messages: []
  }
}; 
```

然后我使用`users[id].messages.push(msgObj)`在正确的用户 ID 内推送新消息。最后我使用`JSON.stringify`然后保存结果字符串。

这样做的问题是字符串会慢慢增长，从而填补限制。消息数组的长度不是太大问题，因为我截断了它，但不再需要旧用户的存在。

问题很简单：如何删除“用户”对象中包含的旧用户？我正在考虑在对象内添加时间戳作为键，然后访问随机用户以在每次保存时检查它们。

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:52:23.653

为什么随机访问它们？你可以在几天内分割你的存储空间，用

```
localStorage["chatLogs"] = {
  "13........0" : {
    bob: {},
    alice: {},
    christoffelson: {}
  }
  "13....86400" : {
    bob: {},
    alice: {},
    christoffelson: {}
  }
} 
```

然后通过它的键运行你的对象。如果它们超过一天，请删除它们。或者，如果您要进行大量查询/过滤，您可以查看使用 indexdb 而不是 localStorage。

# ios - 使用objective-c从iOS设备上传图像文件到PHP

> ID：15448401
> 
> 赞同：0
> 
> 时间：2013-03-16T10:56:15.957
> 
> 标签：ios, objective-c

我想将图像从我的 iphone（来自 imagepicker）上传到我的服务器（使用 PHP 脚本）。但是如何将图像从 imagepicker / ImageView 获取到脚本进行上传？

这是我的数据库连接代码：

```
NSString *brugernavn = [[NSUserDefaults standardUserDefaults] stringForKey:kBrugernavn];
    NSString *maaltid = self.maaltid.text;
    //NSString *rating = [segmentedControl titleForSegmentAtIndex:[segmentedControl selectedSegmentIndex]];
    //NSString *rating = self.rating;
    NSString *kommentar = self.kommentar.text;
    NSString *place = self.place.text;

    NSData *data = [NSData dataWithContentsOfFile:filepath];

    NSMutableString *urlString = [[NSMutableString alloc] initWithFormat:@"brugernavn=%@&&maaltid=%@&&kommentar=%@&&place=%@&&thumbnail=%@&&submit",brugernavn,maaltid,kommentar,place,data];
    [urlString appendFormat:@"%@", data];
    NSData *postData = [urlString dataUsingEncoding:NSASCIIStringEncoding
                               allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSString *baseurl = @"http://example.com/upload.php";

    NSURL *url = [NSURL URLWithString:baseurl];

    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
    [urlRequest setHTTPMethod: @"POST"];
    [urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [urlRequest setValue:@"application/x-www-form-urlencoded"
      forHTTPHeaderField:@"Content-Type"];
    [urlRequest setHTTPBody:postData];

    NSURLConnection *connection = [NSURLConnection connectionWithRequest:urlRequest delegate:self];
    [connection start]; 
```

这是我的图像选择器代码：

```
// KAMERA - Aktiverer kameraet ved tryk på knap
- (IBAction)useCamera:(id)sender {
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = @[(NSString *) kUTTypeImage];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];
        _newMedia = YES;
    }
}

// KAMERA - Aktiverer kamerarullen ved tryk på knap
- (IBAction)useCameraRoll:(id)sender {
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.SourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = @[(NSString *) kUTTypeImage];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];
        _newMedia = NO;
    }
}

// KAMERA - Sender valgt billede til imageView
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = info[UIImagePickerControllerMediaType];
    [self dismissViewControllerAnimated:YES completion:nil];

    if([mediaType isEqualToString:(NSString *)kUTTypeImage])
    {
        UIImage *image = info[UIImagePickerControllerOriginalImage];
        _imageView.image = image;
        if (_newMedia)
            UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:finishedSavingWithError:contextInfo:), nil);
    } else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
    {
        // Code here to support video if enabled
    }
} 
```

这里是我的 .h 文件中的 imageView：

```
@property (strong, nonatomic) IBOutlet UIImageView *imageView; 
```

这是我在 PHP 上的上传字段的定义：

```
$_FILES['thumbnail']['name'] 
```

用户应该从相机胶卷中选择一张照片，然后写一些信息，如标题、描述等以进行上传，然后使用 PHP 脚本将图像和信息上传到服务器。

请帮助我:o)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:31:11.537

自从我使用它以来已经有一段时间了，但它当时有效:)

```
NSData *imageData = UIImagePNGRepresentation(bilden);

NSString *filename = [NSString stringWithFormat:@"bild%d%@", bildnr,@".png"];
NSString *urlString = @"http://extranet.pool.se/stockholmsmassan/rita_pa_vaggen/sparabild.php";

// setting up the request object now
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: image/png\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:imageData];

// second parameter information
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"epost\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[epost dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r \n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// setting the body of the post to the reqeust
[request setHTTPBody:body];

// now lets make the connection to the web
NSURLResponse* response;
NSError* error;
NSData* result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *returnString = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];  
NSLog(@"return: %@",returnString); 
```

# regex - 根据部分文件名创建目录

> ID：15448408
> 
> 赞同：1
> 
> 时间：2013-03-16T10:56:42.280
> 
> 标签：regex, bash, function, shell, grep

首先，我**不是**程序员——只是想学习 shell 脚本的基础知识并尝试一些东西。

我正在尝试为我的 bash 脚本创建一个函数，该函数根据用户在列表中选择的文件的文件名中的版本号创建目录。

这是功能：

```
lav_mappe () {

shopt -s failglob
echo "[--- Choose zip file, or x to exit ---]"
echo ""
echo ""

select zip in $SRC/*.zip
do 
[[ $REPLY == x ]] && . $HJEM/build
[[ -z $zip ]] && echo "Invalid choice" && continue
echo
    grep ^[0-9]{1}\.[0-9]{1,2}\.[0-9]{1,2}$ $zip; mkdir -p $MODS/out/${ver}
done
} 
```

我也尝试过使用其他一些命令：

```
for ver in $zip; do
grep "^[0-9]{1}\.[0-9]{1,2}\.[0-9]{1,2}$" $zip; mkdir -p $MODS/out/${ver}
done 
```

还有`find | grep`——但我做错了:(

但它最终对我的正则表达式模式说“不匹配”。

我正在尝试获取用户选择的文件名，然后将其用于版本号（始终`x.xx.x` 在文件名中的某个位置），并最终创建一个目录。

有人可以给我一些指示命令链应该是什么样子吗？我对函数的结构非常不确定，所以任何帮助表示赞赏。

编辑：

好的，这就是现在完整功能的样子：（请注意，除了目录创建之外的*sed*（1）命令不是我创建的，只是在我的代码中实现的。）

[Pastebin（长代码。）](http://pastebin.com/jm8hq4wr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:30:10.580

我有消息要告诉你。您正在编写 Bash 脚本，您*是*程序员！

您的正则表达式 (RE) 属于“错误”类型。Vanilla`grep`使用一种称为“基本正则表达式”(BRE) 的形式，但您的 RE 采用扩展正则表达式 (ERE) 的形式。BRE 被 vanilla `grep`, `vi`,`more`等使用。ERE 几乎被其他所有东西使用，`awk`, `Perl`, `Python`, `Java`,`.Net`等。问题是，您试图在文件内容中查找该模式，而不是在文件名中！

有一个`egrep`命令，或者你可以使用`grep -E`，所以：

```
echo $zip|grep -E '^[0-9]\.[0-9]{1,2}\.[0-9]{1,2}$' 
```

（请注意，单引号比双引号更安全）。顺便说一句，您`^`在前面和`$`末尾使用，这意味着文件名仅包含版本号，但您说版本号是“文件名中的某处”。您不需要`{1}`量词，这是隐含的。

但是，您似乎也没有捕获版本号。

你可以使用`sed`（我们也需要`-E`）：

```
ver=$(echo $zip| sed -E 's/.*([0-9]\.[0-9]{1,2}\.[0-9]{1,2}).*/\1/') 
```

`\1`右边的意思是“用括号组中匹配的内容替换所有内容（这就是为什么我们在前面和后面都有 .*）” 。这有点笨拙，我知道。

现在我们可以这样做`mkdir`（将所有内容都放在一行中没有任何好处，这会使代码更难维护）：

```
mkdir -p "$MODS/out/$ver" 
```

`${ver}`在这种情况下是不必要的，但最好用双引号将路径名括起来，以防任何组件嵌入了空格。

因此，对于“非程序员”来说，尤其是在生成该 RE 时，要付出很大的努力。

现在是**第 2 课**

在一般循环中使用此解决方案时要小心。您的问题专门使用`select`，因此我们无法预测将使用哪些文件。但是如果我们想对*每个*文件都这样做呢？

`for`在or`while`循环中使用上述解决方案效率低下。在循环内调用外部进程总是不好的。`mkdir`如果不使用 Perl 或 Python 等不同的语言，我们将无能为力。但是`sed`，本质上是迭代的，我们应该使用该功能。

一种替代方法是使用*shell 模式匹配*而不是`sed`. 这种特殊模式在 shell 中并非不可能，但会很困难并引发其他问题。所以让我们坚持下去`sed`。

我们遇到的一个问题是`echo`输出在每个字段之间放置了一个空格。这给我们带来了几个问题。 `sed`用换行符“\n”分隔每条记录，所以`echo`它自己不会在这里做。我们可以用换行符替换每个空格，但是如果文件名中有空格，那将是一个问题。我们可以对 globbing 做一些诡计`IFS`，但这会导致不必要的复杂化。因此，我们将退回到 good old `ls`。通常我们不想使用`ls`，shell globbing 更有效，但这里我们使用的功能是在每个文件名之后放置一个换行符（通过管道重定向使用时）。

```
while read ver
do
    mkdir "$ver"
done < <(ls $SRC/*.zip|sed -E 's/.*([0-9]{1}\.[0-9]{1,2}\.[0-9]{1,2}).*/\1/') 
```

这里我使用的是*进程替换*`ls`，这个循环只会调用`sed`一次。但是，它调用`mkdir`程序*n*次。

**第三课**

对不起，但这仍然是低效的。我们为每次迭代创建一个子进程，创建一个目录只需要一个内核 API 调用，但我们只是为此创建一个进程？让我们使用更复杂的语言，比如 Perl：

```
#!/usr/bin/perl

use warnings;
use strict;

my $SRC = '.';

for my $file (glob("$SRC/*.zip"))
{
    $file =~ s/.*([0-9]{1}\.[0-9]{1,2}\.[0-9]{1,2}).*/$1/;
    mkdir $file or die "Unable to create $file; $!";
} 
```

您可能会注意到您的 RE 已通过此处！但是现在我们有了更多的控制权，并且没有子进程（`mkdir`在 Perl 中是内置的，就这样`glob`）。

总之，对于少量文件，`sed`上面的循环就可以了。它很简单，并且基于 shell。由于 perl 非常大，因此从脚本*中为此*调用 Perl可能会更慢。但是在循环内创建子进程的 shell 脚本是不可扩展的。Perl 是。

# openlayers - 使用 openlayers 生成专题地图

> ID：15448415
> 
> 赞同：0
> 
> 时间：2013-03-16T10:57:31.267
> 
> 标签：openlayers

我正在开发一个 gis 应用程序，它在地图上显示犯罪地点。我的要求之一是生成描绘当地犯罪率的专题地图。我在网上搜索并找到了一个根据缩放级别漂亮地显示专题地图的网站：http: [//maps.met.police.uk/](http://maps.met.police.uk/)

我想知道这种类型的专题地图生成是否可以使用 openlayers。我正在使用 PostGIS 数据库，使用 mapnik 和 tilecache 生成地图，并使用 Openlayers 显示地图。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:03:09.990

maps.met.police.uk 站点似乎正在使用 JQuery 和 Google Maps JS 库。我认为当缩放将矢量多边形更改为更细粒度时，该站点会发出额外的请求以获取矢量数据。

以下是考虑在 OpenLayers 中执行此操作的一些方法：

1) 在两个 WMS OpenLayers.Layer 图层（WMS 或矢量）中设置 minResolution 和 maxResolution（或 minScale/maxScale），同时显示两个图层，但在任何特定缩放级别仅显示两个图层中的一个。您可以根据需要将其扩展到 3 层或更多层。

2）我看到了一篇关于基于“zoomEnd”事件更改两个图层可见性的帖子： [Display WMS Layer Based on Zoom Level](https://stackoverflow.com/questions/4000734/display-wms-layer-based-on-zoom-level)

3）如果您可以将数据表示为 WFS，请查看集群： http: [//openlayers.org/dev/examples/strategy-cluster-threshold.html](http://openlayers.org/dev/examples/strategy-cluster-threshold.html)

4）如果您在后端使用 ArcGIS 之类的东西，那么您可以将多个图层放入地图文档并使用 ArcMap 指定哪个图层显示该 ArcGIS 服务的哪个缩放级别。这是我将在我的项目中采用的方法，仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T23:10:35.657

[http://indiemaps.com/blog/2012/04/introducing-openlayers-symbology/](http://indiemaps.com/blog/2012/04/introducing-openlayers-symbology/)

该网站可能会引起您的兴趣。

# php - Enterprise Architect 中的魔术 getter 和 setter

> ID：15448423
> 
> 赞同：4
> 
> 时间：2013-03-16T10:58:19.987
> 
> 标签：php, uml, getter-setter, enterprise-architect, magic-methods

我正在使用 Enterprise Architect 制作 UML 类图并使用它生成 PHP5 代码。使用[this](https://stackoverflow.com/a/15448336/1544337)，可以为属性创建 getter 和 setter，在代码中如下所示（仅显示相关行）：

```
private $id;

public function getId()
{
    return $this->id;
}

/**
 * 
 * @param newVal
 */
public function setId($newVal)
{
    $this->id = $newVal;
} 
```

我想使用魔术方法`__get($property)`，`__set($property, $value)`而不是为每个属性使用单独的方法。有可能吗，如果有，怎么做？

对于吸气剂，它可能看起来像这样：

```
public function __get($property)
{
    switch ($property) {
        case 'id': return $this->id; break;
        default: return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T20:29:27.343

不是真正的答案，但您应该考虑是否希望以这种方式完成。这不会带来任何好处，但会导致 IDE 代码完成功能出现问题，实际上会使代码维护变得更加困难。在我看来，魔术 __get/__set 应该只用于动态属性，否则使用单独的 set/get 方法或使用公共属性。[这个答案](https://stackoverflow.com/a/8955492/170403)几乎总结了它。

如果你仍然想走这条路，我会推荐[更简单的方法](https://stackoverflow.com/a/4478690/170403)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T18:44:37.153

我同意此页面上的其他人的观点，即这是一种不好的做法，您应该坚持使用普通的老式 getter 和 setter 方法而不是魔术方法。一旦您需要在访问器/修改器中进行验证或其他计算，您的开关/案例就会爆炸。维护是一团糟，而且对继承并不友好。具有魔术方法的子类在技术上覆盖了父类的魔术方法。

但是，您可以通过使用 EA 的代码模板编辑器修改代码模板来做到这一点。

引用[代码模板的 Enterprise Architect 用户指南](http://www.sparxsystems.com/enterprise_architect_user_guide/software_development/codetemplatesoverview.html)：

> 代码模板使您能够自定义现有语言的代码生成。例如：
> 
> *   修改生成新文件时创建的文件头
> *   更改生成代码的样式（例如缩进或大括号位置）以匹配所需的编码标准
> *   处理特定的构造型以生成诸如专门的方法体和额外的方法之类的东西。

并进一步：

> Enterprise Architect 的基本代码模板指定了从 UML 元素到给定编程语言的各个部分的转换。这些模板以纯文本形式编写，其语法与标记语言和脚本语言的某些方面相同。

这是代码编辑器的示例图片，其中加载了一些模板：

![Enterprise Architect 代码模板编辑器](../Images/9b27dfb896c85b42bf120b2c06181c18.png)

我不熟悉编辑器，也不熟悉他们使用的模板语言，所以我无法为您提供工作示例。但我想如果你真的想修改模板，你可以从那里弄清楚。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T18:18:03.843

你可以像这样实现一个通用的魔法 getter/setter：

```
public function __get($name)
{
    if (property_exists($this, $name))
        return $this->{$name};
    return null;
}

public function __set($name, $value)
{
    if (property_exists($this, $name) && true/*Sanity checks here on $value instead of true if you want*/)
        $this->{$name} = $value;
} 
```

但请记住这一点：

# 这对您的代码来说是一个*非常*糟糕的设计模式*（即使它是符合 DRY 的做法）*

此外，此代码严格等同于公开所有属性，并且不会因魔术方法而产生开销。好消息是，如果您想对每个 setter 执行相同的健全性检查，您可以在那里进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:26:37.793

> 我想使用魔术方法 __get($property) 和 __set($property, $value) 而不是每个属性的单独方法。有可能吗，如果有，怎么做？

你*不应该*定义每个属性。一个简单的数组容器对他们来说就足够了。所以，这正是您正在寻找的：

```
class Foo 
{
   private $container = array();

   public function __set($property, $value)
   {
      $this->container[$property] = $value;
   }

   public function __get($property)
   {
       if (array_key_exists($property, $this->container)){

          return $this->container[$property];

       } else {

          trigger_error(sprintf('Undefined property "%s"', $property));
       } 
   }

}

$foo = new Foo();
$foo->bar = "123";

print $foo->bar; // prints 123

$foo->id = "test string";

print $foo->id; // test string

print $foo->nonExistingProp; //issues E_NOTICE 
```

如果您坚持使用访问器/修饰符，那么您只需要重载它们。使用`__call()`

```
class Foo
{
    private $container = array();

    public function __call($method, array $args)
    {
        $property = substr($method, 3);

        if (substr($method, 0, 3) == 'get'){
           // getter is being used
           if (isset($this->container[$property])){
             return $this->container[$property];
           }
        }

        if (substr($method, 0, 3) == 'set'){
           //setter is being used
           $this->container[$property] = $args[0];
        }
    }
}

$foo = new Foo();

$foo->setId('__BAR__');
$foo->setStuff('__YEAH__'); 

print $foo->getId(); // prints __BAR__
print $foo->getStuff(); //prints __YEAH__ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-02T08:50:03.030

不知道你是用IDE开发还是纯记事本。因为你问的是那种类型的问题，我猜它是记事本。然后，我建议您尝试众多免费 IDE 中的一个（我使用 NetBeans 已有一年，其他人可能也对 Eclipse 感到满意）。

如果您正在使用 EA 并做类模型，我猜您正在认真对待 OOP。如果是这样，您应该严格定义属性可见性，例如 Zend Framework 2 忘记`public property`可见性（也包括 a `static`or`public static`属性）。然后你最终得到的属性是`private`or`protected`并且 getter/setter 的需求在地球上。

现在，如果您使用魔术`__get()`/`__set()`方法，您将如何调试您的代码？一个人怎么能知道在`\One\Two\Three\Four`有财产的班级里发生了什么`\First\Second\Third::$bang`？它是如何设置的？为什么我得到这个值而不是另一个？

另一方面 - 当使用遵循属性可见性的现代 IDE 时，请考虑这个类：

```
Class A
{
    private $foo;
    private $bar;

    protected $foobar;

    public function __get()
    {
        ...
    }

    public function __set()
    {
        ...
    }
} 
```

没有 setter 或 getter。如果您正在编写您的代码，您的 IDE 不会提示您属性的名称（来自类外部），您必须将它们全部输入。使用 getter 和 setter（*它们是让您可以访问私有或受保护属性的公共方法*）您可以使用代码提示并加快您的开发过程，同时使用现代 OOP 原则。

# php - CakePHP：从 mysql BLOB 获取图像到 iOS

> ID：15448426
> 
> 赞同：1
> 
> 时间：2013-03-16T10:58:27.843
> 
> 标签：php, ios, image, cakephp

我正在尝试使用以下代码从数据库中获取图像

```
$this->autoRender=false;
$blob = $this->GeneralNews->findById($id,array("image_data"));
 $image = imagecreatefromstring($blob["GeneralNews"]["image_data"]); 

 ob_start(); //You could also just output the $image via header() and bypass this buffer capture.
 imagejpeg($image, null, 80);
 $data = ob_get_contents();
 ob_end_clean();

echo '<img src="data:image/jpg;base64,' .   base64_encode($blob["GeneralNews"]["image_data"])  . '" />'; 
```

结果可以在下一个网址中看到 [http://www.thedarkdimension.com/generalNews/displayImage/1678](http://www.thedarkdimension.com/generalNews/displayImage/1678)

但是当我尝试通过 iOS 获得这个

```
 NSData * imageData = [NSData dataWithContentsOfURL:imageURL];        
 UIImage * image = [UIImage imageWithData:imageData]; 
```

尽管（imageData）中有数据，但我得到的图像是空的

我无法弄清楚问题，但它很可能来自 PHP 方面.. 因为我尝试了这个 URL [http://www.johnquarto.com/wp-content/uploads/2008/08/gag.jpg](http://www.johnquarto.com/wp-content/uploads/2008/08/gag.jpg) 并且没关系用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:34:41.663

快速浏览后，似乎从 URL [http://www.thedarkdimension.com/generalNews/displayImage/1678](http://www.thedarkdimension.com/generalNews/displayImage/1678)返回的不是图像，而是声称属于“text/html”类型的文档。该文档实际上不是有效的 HTML，而仅包含一个 img 标记，其 source 属性是经过 base64 编码的图像。考虑到您的 PHP 代码，这是有道理的。

我怀疑 imageWithData 正在寻找的只是 jpeg 的所有二进制优点。

因此，您需要更改 PHP 以将 MIME 类型设置为 image/jpeg 并按原样回显 jpeg 数据 - 不需要 base64 编码。我已经很久没有看 PHP 了，我不敢给你示例代码，但希望这足以让你继续前进。

# android - 通过应用程序设置 CPU 缩放调控器时出错

> ID：15448428
> 
> 赞同：0
> 
> 时间：2013-03-16T10:58:33.760
> 
> 标签：android, root

我正在创建一个应该设置 CPU 缩放调节器的简单 Android 应用程序。

为了实现这一点，我做了这个功能：

```
public static void setCurrentGovernor(String governor){
    Process process;
    try{
        String cpufreq_path= "/sys/devices/system/cpu/cpu0/cpufreq";
        String cmd = "echo `"+governor+"` > "+cpufreq_path+"/scaling_governor ";
        process = Runtime.getRuntime().exec(new String[] {"su","-c",cmd});
    } catch(IOException e){
        e.printStackTrace();
    }
} 
```

我的问题是这个功能不起作用，加上超级用户总是提示我权限，有没有办法只在第一次应用启动时给它root权限？

这个函数在微调器的 onitemselectedlistener 中调用，在这个函数之后还有另一个从 cpufreq 文件中获取数据来更新视图，但是如果我这样做了，`cat scaling_governor`我会得到旧的调控器，所以它不是一个错误的更新函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:27:38.343

这个更可靠的代码解决了我的问题： [链接](http://muzikant-android.blogspot.it/2011/02/how-to-get-root-access-and-execute.html "关联")

# qt - QLineEdit mouseEnter() 和 mouseExit() 事件

> ID：15448429
> 
> 赞同：1
> 
> 时间：2013-03-16T10:58:39.283
> 
> 标签：qt, qlineedit

我想对其进行子类化`QLineEdit`以添加一些信号，**`mouseEnter()`**并**`mouseExit()`**在鼠标光标位于小部件上方以及何时离开小部件时获得通知。我可以**`mouseEnter()`**像下面这样写。

```
class MyLineEdit:public QLineEdit{
//
// ..
//
protected: 
    void mouseMoveEvent(QMouseEvent *e);

signals:
    void mouseEnter();
}

void MyLineEdit::mouseMoveEvent(QMouseEvent *e)
{
    emit mouseEnter();
    QLineEdit::mouseMoveEvent(e);
} 
```

它工作正常。我该怎么写**`mouseExit()`**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:10:23.213

leaveEvent 不是一个很好的名字！

```
#include <QtGui>
#include <QEvent>

class Editor : public QLineEdit
{
    Q_OBJECT

public:
    void leaveEvent(QEvent *);

signals:
    void mouseLeave();
};

void Editor::leaveEvent(QEvent *e);
{
    qDebug() << "Mouse has left the building..";
    emit mouseLeave();
} 
```

# ios - NSString floatValue，不适用于大数字

> ID：15448431
> 
> 赞同：1
> 
> 时间：2013-03-16T10:58:52.167
> 
> 标签：ios, objective-c, ios5

这是我将 NSString 转换为浮点数的代码：

```
NSString *userID = [NSString stringWithFormat:@"%@", [user id]];

float u = [userID floatValue];

NSLog(@" Float: %f", u);
NSLog(@"String: %@", [user id]); 
```

这是在我的日志中：

```
 Float: 100005150982144.000000
String: 100005153311676 
```

我究竟做错了什么？我已经使用 NSNumberFormatter 进行了测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:02:16.530

你需要采取双重价值：

```
double doubleValue=[userID doubleValue];
NSLog(@" Float: %lf", doubleValue);
NSLog(@"String: %@", [user id]); 
```

原因：您的值超出了浮点值的范围。

# iphone - 关闭应用程序时跟踪当前位置

> ID：15448433
> 
> 赞同：0
> 
> 时间：2013-03-16T10:58:55.230
> 
> 标签：iphone, ios, objective-c, geolocation

你可以在我的应用程序未打开时连续跟踪某人的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:03:32.610

是的，如果设备 iOS 高于 4.0，则可以。

有关更多信息，请[使用此链接](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)。

# ruby-on-rails - Rails：如何在 sql 查询中使用“joins”进行 has_one 关联

> ID：15448435
> 
> 赞同：4
> 
> 时间：2013-03-16T10:59:04.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个用户模型和一个配置文件模型。每个用户都有_one 个人资料。配置文件具有城市属性。现在，我希望用户控制器的索引操作拉出与 current_user 具有相同城市的所有用户。所以我在控制器中有这段代码：

```
def index @users = User.same_city_as(current_user).paginate :page => params[:page], :per_page => 10 end 
```

我在用户模型中也有这个：

```
scope :same_city_as, lambda { |user| joins(:profile).where(:profile => {:city => user.profile.city} ) } 
```

这不起作用。我收到此错误“”PGError：错误：缺少表“profile”的 FROM 子句条目“。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T13:04:16.060

您需要`:profile`在 where 子句中使用复数形式。

```
 joins(:profile).where(:profiles => {:city => user.profile.city}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T11:13:38.717

尝试使用：
...where(user.profile => {city: user.profile.city})

# android - 线性布局 - 内部线性布局不显示

> ID：15448436
> 
> 赞同：0
> 
> 时间：2013-03-16T10:59:07.613
> 
> 标签：android, android-linearlayout

安卓 2.3.3

我正在尝试创建一个带有以下想法的标题

```
 Expression
 S.NO         Result    

  1\.          1+2+3
              6

  2\.          2+3-4
              1
  ..... 
```

数据从数据库填充到列表视图中。我正在尝试为列表视图的标题部分创建一个 XML。（SNO，表达，结果）。

这是我正在使用的 XML...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingBottom="5dp"
    android:paddingTop="5dp" >

    <LinearLayout
        android:id="@+id/ll1"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.10"
        android:orientation="horizontal" >

        <TextView
        android:id="@+id/txtView_History_Count"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.10"
        android:text="Number"
        android:textColor="#FFFFFF"
        android:textSize="22dp" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll2"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.90"
        android:orientation="horizontal" > //If I change this to Vertical, 
                                           //the Output is not displayed

        <TextView
            android:id="@+id/txtView_History_Result"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.50"
            android:textSize = "22dp"
            android:text="Result"
            android:textColor="#316DA2" />

        <TextView
            android:id="@+id/txtView_History_Expression"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.50"
            android:text="Expression"
            android:textColor="#FFFFFF"
            android:textSize="15dp" />

    </LinearLayout>

</LinearLayout> 
```

如果我将第二个内部布局的方向更改为垂直，则不会显示文本。出了什么问题？

另外，我希望第一个布局占总可用空间的 10%（android:layout_weight="0.10"），第二个布局占 90%（android:layout_weight="0.90"）。然后，第二个布局中的文本视图应该占第二个布局中可用空间的 50%。有没有办法在没有嵌套权重的情况下创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:13:32.093

终于明白了。。经过一些曲折和调整

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingBottom="5dp"
    android:paddingTop="5dp" >

        <TextView
        android:id="@+id/txtView_History_Count"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.20"
        android:text="Number"
        android:textColor="#FFFFFF"
        android:textSize="22dp" />

    <LinearLayout
        android:id="@+id/ll2"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.80"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtView_History_Result"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

            android:textSize = "22dp"
            android:text="Result"
            android:textColor="#316DA2" />

        <TextView
            android:id="@+id/txtView_History_Expression"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

            android:text="Expression"
            android:textColor="#FFFFFF"
            android:textSize="15dp" />

    </LinearLayout>

</LinearLayout> 
```

# c - 尽管 ulimit 无限，为什么非常大的堆栈分配会失败？

> ID：15448438
> 
> 赞同：8
> 
> 时间：2013-03-16T10:59:17.677
> 
> 标签：c, linux, memory-management

以下静态分配给出分段错误

```
double U[100][2048][2048]; 
```

但是下面的动态分配很好

```
double ***U = (double ***)malloc(100 * sizeof(double **));

for(i=0;i<100;i++)
{
    U[i] = (double **)malloc(2048 * sizeof(double *));
    for(j=0;j<2048;j++)
    {
        U[i][j] = (double *)malloc(2048*sizeof(double));
    }
} 
```

ulimit 在 linux 中设置为无限制。

谁能给我一些关于发生了什么的提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:39:38.323

当您说 ulimit 设置为无限制时，您是否使用该`-s`选项？否则这不会更改堆栈限制，只会更改文件大小限制。

不过，似乎有堆栈限制。我可以分配：

```
double *u = malloc(200*2048*2048*(sizeof(double)));  // 6gb contiguous memory 
```

并运行我得到的二进制文件：

```
VmData:  6553660 kB 
```

但是，如果我在堆栈上分配，它是：

```
double u[200][2048][2048];

VmStk:   2359308 kB 
```

这显然是不正确的（建议溢出）。使用原始分配，两者给出相同的结果：

```
Array:  VmStk:   3276820 kB
malloc: VmData:  3276860 kB 
```

但是，在运行堆栈版本时，无论数组的大小如何，我都无法生成段错误——即使它超过了系统上实际的总内存（如果`-s unlimited`已设置）。

编辑：

我`malloc`在循环中进行了测试，直到失败：

```
VmData: 137435723384 kB  // my system doesn't quite have 131068gb RAM 
```

但是，堆栈使用量永远不会超过 4gb。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T11:49:06.273

假设你的机器实际上有足够的空闲内存来分配 3.125 GiB 的数据，区别很可能在于静态分配需要所有这些内存是连续的（它实际上是一个 3 维数组），而动态分配只需要大约 2048*8 = 16 KiB 的连续块（​​它是一个指向非常小的实际数组的指针数组的指针数组）。

您的操作系统也有可能在堆内存用完时使用交换文件，而不是堆栈内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T16:34:03.317

有一个关于 Linux 内存管理的很好的讨论——特别是堆栈——在这里：[9.7 Stack overflow](http://www.win.tue.nl/~aeb/linux/lk/lk-9.html#ss9.7)，值得一读。

您可以使用此命令找出您当前的堆栈`soft limit`是什么

```
ulimit -s 
```

在 Mac OS X 上，硬限制为 64MB，请参阅[如何在 Mac OS X 上使用 ulimit 或每个进程更改堆栈大小以获取 C 或 Ruby 程序？](https://stackoverflow.com/questions/13245019/how-to-change-the-stack-size-using-ulimit-or-per-process-on-mac-os-x-for-a-c-or)

您可以在程序运行时修改堆栈限制，请参阅[使用 GNU 编译器编译期间在 Linux 中更改 C++ 应用程序的堆栈大小](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)

我将您的代码与那里的示例结合在一起，这是一个工作程序

```
#include <stdio.h>
#include <sys/resource.h>

unsigned myrand() {
    static unsigned x = 1;
    return (x = x * 1664525 + 1013904223);
}

void increase_stack( rlim_t stack_size )
{
    rlim_t MIN_STACK = 1024 * 1024;

    stack_size += MIN_STACK;

    struct rlimit rl;
    int result;

    result = getrlimit(RLIMIT_STACK, &rl);
    if (result == 0)
    {
       if (rl.rlim_cur < stack_size)
       {
           rl.rlim_cur = stack_size;
           result = setrlimit(RLIMIT_STACK, &rl);
           if (result != 0)
           {
              fprintf(stderr, "setrlimit returned result = %d\n", result);
           }
       }
   }    
}

void my_func() {
   double U[100][2048][2048];
   int i,j,k;
   for(i=0;i<100;++i)
    for(j=0;j<2048;++j)
        for(k=0;k<2048;++k)
            U[i][j][k] = myrand();
   double sum = 0;
   int n;
   for(n=0;n<1000;++n)
       sum += U[myrand()%100][myrand()%2048][myrand()%2048];
   printf("sum=%g\n",sum);
}

int main() {
   increase_stack( sizeof(double) * 100 * 2048 * 2048 );

   my_func();

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-16T11:53:41.303

您正在达到堆栈的限制。默认情况下，在 Windows 上，堆栈为 1M，但如果有足够的内存，可以增长更多。

在许多 *nix 系统上，默认堆栈大小是 512K。

您正在尝试分配 2048 * 2048 * 100 * 8 字节，超过 2^25（堆栈超过 2G）。如果您有大量可用的虚拟内存并且仍想在堆栈上分配它，请在链接应用程序时使用不同的堆栈限制。

Linux： [如何增加 gcc 可执行堆栈大小？](https://stackoverflow.com/questions/1156783/how-to-increase-the-gcc-executable-stack-size) [在使用 GNU 编译器编译期间更改 Linux 中 C++ 应用程序的堆栈大小](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)

视窗：http: [//msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.110%29.aspx)

# java - 通过一个数据库类访问数据库，紧耦合？破坏 SRP？

> ID：15448441
> 
> 赞同：1
> 
> 时间：2013-03-16T10:59:48.233
> 
> 标签：java, php, c++, oop

我正在和几个人一起开发一些软件，从完成的类图中有一个`Database`类，例如`Order`该类有两个构造函数，一个没有参数，一个除了`id`. 它也有一个`save()`方法，所以我假设如果你`id`在构造函数中提供一个类功能，那么类将使用该类并填充对象属性，并且在构造函数或 setter 方法中`Database`也没有地方注入这个类`Database`所以我认为他们想使用`Singleton`.

在我对他们说之前，我想知道我的论点是否有效，所以他们在这里：

*   这样做违反了 SOLID 单一责任原则 (SRP)
*   `Database`它在我们所有需要该类的类之间引入了紧密耦合
*   它隐藏了我们的对象依赖
*   它使单元测试变得更加困难
*   引入不必要的全局状态

它们会是有效的论点吗？这样做还有更多的缺陷吗？如果我的观点是有效的，是否值得对他们说？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:23:27.150

这是一种众所周知的模式，称为[活​​动记录](http://en.wikipedia.org/wiki/Active_record_pattern)。它通常用于几个大型框架，例如 Ruby on Rails。它确实有你提到的缺点，我认为你应该强调潜在的问题，但并非没有任何替代方案可供讨论。

一个常见的替代方法是使用服务外观来保存对象——一组 DAO。使用这种模式，您可以更明确地访问数据库并且不太方便，但 IMO 会减少主应用程序中的数据库耦合。正如您所提到的，从 SRP 的角度来看，这更好，这使得测试变得更加容易。

# iphone - 如何设置视频的音高值？

> ID：15448449
> 
> 赞同：6
> 
> 时间：2013-03-16T11:00:41.237
> 
> 标签：iphone, cocos2d-iphone

[在这个](http://purplelilgirl.tumblr.com/post/9377269385/making-that-talking-app)的帮助下，我创建了一个像 tom cat 这样的演示应用程序。在这个链接中，我们可以使用设置音频的音高值`CDSoundEngine`。但是，我想设置视频的音高值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T13:40:48.713

AVMutableCompositionTrack 中有一个 scaleTimeRange 方法，可用于设置视频播放的速度。

# ios - iOS 上的双 AVCaptureSession 输出

> ID：15448453
> 
> 赞同：5
> 
> 时间：2013-03-16T11:01:16.207
> 
> 标签：ios, objective-c, avfoundation, avcapturesession

我正在尝试同时从 iOS 设备上的两个相机拍照。我还想在屏幕上实时预览两个摄像头。我使用这段代码：

```
- (void)prepareCameraView:(UIView *)window
{
    NSArray *captureDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];

    {
        AVCaptureSession *session = [[AVCaptureSession alloc] init];
        session.sessionPreset = AVCaptureSessionPresetMedium;

        CALayer *viewLayer = window.layer;
        NSLog(@"viewLayer = %@", viewLayer);

        AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
        captureVideoPreviewLayer.frame = CGRectMake(0.0f, 0.0f, window.bounds.size.width/2.0f, window.bounds.size.height);
        [window.layer addSublayer:captureVideoPreviewLayer];

        NSError *error = nil;
        AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:[captureDevices objectAtIndex:0] error:&error];
        if (!input)
        {
            NSLog(@"ERROR : trying to open camera : %@", error);
        }

        [session addInput:input];

        [session startRunning];
    }

    {
        AVCaptureSession *session = [[AVCaptureSession alloc] init];
        session.sessionPreset = AVCaptureSessionPresetMedium;

        CALayer *viewLayer = window.layer;
        NSLog(@"viewLayer = %@", viewLayer);

        AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
        captureVideoPreviewLayer.frame = CGRectMake(window.bounds.size.width/2.0f, 0.0f, window.bounds.size.width/2.0f, window.bounds.size.height);
        [window.layer addSublayer:captureVideoPreviewLayer];

        NSError *error = nil;
        AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:[captureDevices objectAtIndex:1] error:&error];
        if (!input)
        {
            NSLog(@"ERROR : trying to open camera : %@", error);
        }

        [session addInput:input];

        [session startRunning];
    }

} 
```

但是当应用程序启动前置摄像头的会话时，后置摄像头的会话会停止并留下静止图像。

有没有办法实时显示两个摄像机的输出？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:21:50.087

不，这不对。使用 AVCaptureSession 时，一次只能使用一个摄像机源。

不允许同时使用多个 AVCaptureInput。因此，一旦一个会话开始，另一个会话就会停止。

您最好的选择是创建两个会话，启动第一个会话，并在报告帧后立即停止并启动第二个会话。然后停止第二个并开始第一个，继续这样做。这会起作用，但您收到的输入会有明显的延迟。

# asp.net - 什么是从数据库显示数据的正确方法，而不是在网格视图上

> ID：15448454
> 
> 赞同：0
> 
> 时间：2013-03-16T11:01:18.803
> 
> 标签：asp.net

标题信息量不足，无法提出适合的内容，因此如果有人能改变它，我将不胜感激，或者至少提供另一个。

我的问题：

我有一个按用户 ID 显示用户个人资料的页面：（以下一页为例）

![在此处输入图像描述](../Images/87ea2f9b6110011829dd3915e8ffe005.png)

在上面，有 3 个字段是动态的：

1.  用户名
2.  他使用的皮肤
3.  他的头像

我不想在整个页面周围添加标签，并在页面加载之前设置它们，以显示他的信息（会有更多字段）。

我想要一些易于维护以备将来更改的东西。

这样做的正确方法是什么？

谢了，兄弟们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:25:45.240

请看这段代码。

```
public void UserProfile(DataTable table)
        {
            try
            {              
                String sr = string.Empty;
                sr += "<html><body><table>";                               
                for (int i = 0; i < table.Rows.Count; i++)
                {
                    DataRow row = table.Rows[i];
                    {
                        sr += "<tr>";
                        for (int j = 0; j < table.Columns.Count; j++)
                        {
                            sr += "<td>";
                            sr += table.Columns[j].ColumnName;
                            sr += "</td>";

                            sr += "<td>";
                            sr += row.ItemArray[j];
                            sr += "</td>";
                        }
                        sr += "</tr>";                       
                    }
                }
                sr += "</table></body></html>";
                System.Web.UI.WebControls.Literal ltr = new System.Web.UI.WebControls.Literal();
                ltr.Text = sr;
                this.Controls.Add(ltr);            
            }
            catch (Exception ex)
            {

            }
        } 
```

希望这可以帮助。

# java - 删除整个数组

> ID：15448457
> 
> 赞同：2
> 
> 时间：2013-03-16T11:01:38.797
> 
> 标签：java, arrays

我编写了一个用于对整数类型数组进行排序的程序，该程序涉及创建另一个相同大小的数组。排序后，新数组没有用，所以想彻底去掉。到目前为止，我只发现了与删除特定类型元素有关的问题。一些帮助？

**信息（如果需要）：**
原始阵列：`A[n]`
新阵列：`B[n]`
`B[n]`必须完全删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T11:03:25.967

每当您离开执行排序的方法时，临时数组将被自动“删除”（或者更准确地说，占用的内存将有资格进行垃圾回收）（当然假设临时数组是在方法内部创建的）。

在`Java`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T11:04:23.447

数组是 Java 中的一种引用类型。`null`如果您不想再使用它，可以进行数组引用：

```
arr = null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T19:48:27.003

将 B 设置为空。B =空；

这样，垃圾收集器将在运行时对其进行清理。虽然您无法控制垃圾收集何时发生，因为每个 JVM 可能都有自己的垃圾收集算法，但您可能会建议系统运行垃圾收集器以释放一些内存。

您可以使用 System.gc();

注意：如上所述，System.gc(); 只会建议进行垃圾收集，但不能保证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-21T04:58:17.733

通常 gc() 会释放没有引用的内存。但您也可以使用`array = null`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T11:06:15.517

如果数组是在您的排序方法中本地定义的，那么当您的方法结束时，它将被安排进行垃圾收集，因为没有对它的现有引用。

如果它是类或实例变量，则将对其的所有引用设置为`null`.

在 Java 中，您不必担心内存释放。没有像 C 的 stdlib`free(void*)`或 C++ 的`delete[]`运算符这样的东西。你只是[垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-08T01:48:01.013

将 B 设置为空数组

```
B = []; 
```

# java - 在 Java 中将布尔值转换为 BitSet

> ID：15448458
> 
> 赞同：0
> 
> 时间：2013-03-16T11:01:40.110
> 
> 标签：java, arrays, boolean, bitset

所以我之前有这个：

```
public static final boolean opaqueCubeLookup = new boolean[4096]; 
```

但是我发现 BitSet 在管理内存方面要好得多，所以我将其更改为：

```
public static final BitSet opaqueCubeLookup = new BitSet(4096); 
```

我也有这个代码：

```
opaqueCubeLookup[par1] = this.isOpaqueCube(); 
```

但是在移动到 BitSet 之后我遇到了问题，我收到了这个错误：

```
The type of the expression must be an array type but it resolved to BitSet 
```

我该如何解决？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:04:58.350

```
opaqueCudeLookup.set(par1, this.isOpaqueCube()); 
```

参见[BitSet.html#set(int, boolean)](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html#set%28int,%20boolean%29 "BitSet.html#set(int, boolean)")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:04:41.880

采用：

```
opaqueCubeLookup.set(part1, this.isOpaqueCube()); 
```

# php - 匈牙利命名约定：混合型

> ID：15448463
> 
> 赞同：1
> 
> 时间：2013-03-16T11:02:12.857
> 
> 标签：php, variables, types, hungarian-notation

我以这种方式将 HNC 用于 PHP: 中的变量`$p_nId`。`p`代表*参数*，即变量的范围，`n`代表类型（虽然 PHP 的类型很松散，但它给出了一些结构），所以这里是*数字*。HNC 中是否也有混合类型的类型前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:13:48.630

据我所知，匈牙利符号没有标准的缩写，所以你可以自己决定（当然要确保它们被适当地记录！）

但是，您可能需要仔细考虑要在符号中表示的内容，而不是考虑基本数据类型。例如，一个 ID 可能是一个整数，但`$foo = $id +10`不太可能是一个有意义的操作，因此捕获这种区别的 HN 可能更有用。

如果您有一个“混合类型”变量，那么您很可能实际上知道它是一组有限的类型之一——比如字符串或数组，但绝不是数字或对象。在这种情况下，也许您的 HN 应该捕获该信息，而不是简单地将变量标记为“类型未知”。

**编辑：**我刚刚找到了[Charles Simonyi 的原始论文的链接，概述了这些概念](http://msdn.microsoft.com/en-us/library/aa260976.aspx)，并且浏览了一下，我发现他确实建议类型应该与它们的*使用*相关，而不是它们的*表示*：

> 类型等价的测试很简单：同一组操作是否可以有意义地应用于问题中的数量？如果是这样，则类型被认为是相同的。如果有操作适用于排除其他数量的数量，则数量的类型是不同的。

# ms-access - 在我的表中设置一个字段的值以供将来使用

> ID：15448468
> 
> 赞同：0
> 
> 时间：2013-03-16T11:02:34.210
> 
> 标签：ms-access, vba, ms-access-2007

我有一个 access Db，它最初是用 ib Access 2003 编写的，但后来升级到 Access 2007 - 我遇到的问题如下：

我有一个表“tblBookings”，它存储特定客户预订或报价的所有相关数据，当用户打开主表单时，该表的客户字段链接到客户表（tblClients）的 PK，选择客户并在下拉列表中选择预订编号，然后继续“编辑预订”，用户可以在其中编辑预订或确认预订。当用户单击“确认预订”cmdButton 时，打开的表单关闭并打开“创建发票”表单。用户从下拉列表中选择预订号，然后打印形式发票或发票。print proforma cammand 按钮打开一个打印必要文件的报告，

话虽这么说，在打印发票之前首先打印形式是很重要的，因此如果已打印形式，我需要将表中的 yes no 字段设置为 yes 或 true，在这种情况下，发票按钮将变得可见并且如果尚未打印，则保持隐藏状态。

cmdProForma 上的事件过程如下（这是我需要在 Pro 字段中设置是/否字段的地方，即 tblBookings 并设置为是/否字段。

```
Private Sub CmdProForma_Click()
    Dim rs As New ADODB.Recordset 'recordset of existing refs
    Dim t As String 'temp string var
    Dim stDocName As String
    Dim stLinkCriteria As String
    Dim i As Integer 'temp ref variable

       i = CInt(Right(txtBRef, 5))
       t = [txtBRef]

   With rs
      .Open "SELECT BRef,Conf,lock,Pro FROM tblBookings WHERE Bref=" & t & ";", CurrentProject.Connection, adOpenDynamic
      If .BOF Or .EOF Then 'no such ref
      MsgBox "No booking with ref '" & fRef(CInt(t), "B") & "' exists.", vbExclamation, "No booking"
      Else 'ref found: open invoice
      strSQL = "UPDATE tblBookings SET Pro = True"

'db.Execute strSQL, dbFailOnError
      DoCmd.Close acForm, "frmBRefEnter"
        ' !Form!frmBRefEnter!Pro = True
      DoCmd.OpenReport "rptInvoice1", acViewPreview, , "BRef=" & t
        DoCmd.OutputTo acOutputReport, "rptInvoice1", acFormatPDF, destDIR & "\Inv\" & fRef(i, "Pro-Forma") & ".pdf"

           End If

      End With

  End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:49:41.690

将打印形式的复选框添加到表单中。这对于您的用户为什么不能打印发票是一个很好的指南。您可以将属性设置为 Locked=True

```
Private Sub CmdProForma_Click()
    ''"From a dropdown list the user selects the booking number", 
    ''so the booking number must exist, no need to check
      DoCmd.OpenReport "rptInvoice1", acViewPreview, , "BRef=" & Me.txtBref
      DoCmd.OutputTo acOutputReport, "rptInvoice1", _
          acFormatPDF, destDIR & "\Inv\" & fRef(i, "Pro-Forma") & ".pdf"
      Me.Pro = True ''Checkbox
      DoCmd.Close acForm, "frmBRefEnter"
End Sub 
```

对于发票按钮：

```
Me.cmdInvoicePrint.Visible = Me.Pro 
```

如果勾选 Me.Pro，Me.Pro 将为 true，并且发票按钮将可见。

# java - 高性能

> ID：15448470
> 
> 赞同：0
> 
> 时间：2013-03-16T11:02:38.003
> 
> 标签：java, sql

我需要引用数据库中的一组列并更新这些列。由于这组列在多个并行事务中是通用的/共享的，我如何在不影响数据完整性和一致性的情况下获得良好的性能。为了更清楚，我有一个很长的事务，其中，我做了一些预处理并计算某些值。然后我将此值与限制进行比较。限制是公共/共享列，如果我要进一步处理事务，我必须更新它。该应用程序将有多个用户，他们将尝试执行类似的操作，并且必须与相同的“限制”进行比较并继续进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:10:29.513

如果我理解正确，限制就像一种信号量。访问信号量不应该是正常事务的一部分。您想立即增加限制，如果失败，您想中止交易。

实现这一点的一种方法是将限制增加作为子事务运行。如果您使用事务划界，则可以使用[TransactionAttributeType.html#REQUIRES_NEW](http://docs.oracle.com/javaee/6/api/javax/ejb/TransactionAttributeType.html#REQUIRES_NEW)。

如果您想要更详细的答案，请稍微澄清一下您的问题。

# c - 椭圆曲线密码学中的点减法

> ID：15448471
> 
> 赞同：3
> 
> 时间：2013-03-16T11:02:42.140
> 
> 标签：c, cryptography, elliptic-curve

我想在素数场的椭圆曲线上做点减法。我尝试将分数减去，`(x,-y log(p))`但我的答案似乎不匹配。

这就是我尝试做减法的方式：

```
 s9=point_addition(s6.a,s6.b,((s8.a)%211) ,-((s8.b)%211)); 
```

在这里`s9`，`s6`和`s8`都是有两个的结构`int`。

这是我的功能，它做点补充：

```
structure point_addition(int x1, int y1, int x2, int y2)
{
    int s,xL,yL;
    if((x1-x2)!=0)
    {
        if ((((y1-y2)/(x1-x2)) % 211)>0)
              s=(((y1-y2)/(x1-x2)) % 211);
        else
              s=(((y1-y2)/(x1-x2)) % 211) + 211;
        if ((((s*s)-(x1+x2)) % 211)>0)
              xL= (((s*s)-(x1+x2)) % 211) ;
        else
              xL= (((s*s)-(x1+x2)) % 211) + 211;
        if(((-y1+s*(x1-x2)) % 211)>0)
              yL= ((-y1+s*(x1-xL)) % 211);
        else
              yL= ((-y1+s*(x1-x2)) % 211) + 211;
    }
    else
    {
        xL= 198 ;
        yL= 139;
    }

    s7.a= xL;
    s7.b= yL;

    return s7 ;
} 
```

程序似乎没有给我正确的坐标请帮助我进行椭圆曲线密码学的编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:37:26.000

请参阅 GregS 关于除法 mod p 的评论。您需要找到分母的倒数，然后相乘。要计算模逆，您可以使用扩展欧几里得算法。

此外，您否定 y 坐标然后添加 211 的方式有点奇怪。最好在作为参数传递时将字段元素保持在适当的范围内，例如要获得 -y mod p，请使用 py。

而且我认为这只是一个学习练习，因为您使用的是一个非常小的领域:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:43:02.163

我不明白你在那里做什么，你的 log(p) 应该是什么意思以及你的域参数输入的位置，但是减法很容易：否定 y 坐标（-Y = 模数 - y）然后简单地说像往常一样添加。

如果你想为你的计算提供参考，你可以使用我的开源软件“学术签名”，[它](http://www.fh-wedel.de/~an/crypto/accessories/easy_download_eng.html) 的计算非常透明，并以人类可读的十六进制表示法生成 ECDSA 签名的结果。不过，我目前不确定它是否可以使用您正在使用的如此短的模数进行计算。

手册中介绍了如何正确编程 ECC 操作以及如何使用该软件： [链接到 ecc 手册](http://www.fh-wedel.de/~an/crypto/Academic_signature_eng.html)

问候迈克尔安德斯

# php - 只使用 preg_replace() 还是结合 preg_match() 和 preg_replace()？

> ID：15448473
> 
> 赞同：2
> 
> 时间：2013-03-16T11:03:05.317
> 
> 标签：php, regex, performance, preg-replace, preg-match

如果需要的模式存在，我需要用数组中的某个模式替换字符串：

```
$patterns = [
   'PATTERN#1' => 'REPLACE#1',
   'PATTERN#2' => 'REPLACE#2',
];

$string = 'SOME STRING TO PREG_REPLACE'; 
```

哪种方式会更快：

```
// PREG_REPLACE ONLY FOR MATCHED PATTERN:
foreach ($patterns as $pattern => $replace) {
    if (preg_match($string, $pattern)) {
        preg_replace($pattern, $replace, $string);
        break;
    }
} 
```

或者

```
// PREG_REPLACE FOR ALL PATTERNS:
foreach ($patterns as $pattern => $replace) {
    preg_replace($pattern, $replace, $string);
    break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:19:29.693

`preg_replace`接受模式和替换的数组参数。

```
preg_replace(array_keys($patters), array_values($patterns), $string); 
```

# spring - Spring MVC 表单验证

> ID：15448481
> 
> 赞同：2
> 
> 时间：2013-03-16T11:04:19.297
> 
> 标签：spring, jsp, servlets, spring-mvc, validation

我的问题是我有一个表单，其中包含带有一些选择选项值的 html 选择元素，我想使用以下方法验证这些值：

```
org.hibernate.validator.constraints
or
javax.validation.constraints 
```

注释。这是我的选择元素：

```
<select name="status" id="tbSelect">
    <option value="ACTIVE">ACTIVE</option>
    <option value="LISTEN">LISTEN</option>
    <option value="DOWN">DOWN</option>
</select> 
```

例如，我如何使用上面提到的注释验证器来验证 select 元素内的选项（DOWN，LISTEN，ACTIVE）的值？

我的表格是这样的：

```
<form:form action="../agents/add" method="POST" commandName="myAgent">
     <form:select id="tbSelect" path="state">
            <form:option value="ACTIVE" path="state">ACTIVE</form:option>
            <form:option value="LISTEN" path="state">LISTEN</form:option>
            <form:option value="DOWN" path="state">DOWN</form:option>
    </form:select> 
```

我已经像这样定义了我的控制器方法：

```
 @RequestMapping(value = "agents/add", method = RequestMethod.POST)
    public String addAgentSubmit(@ModelAttribute("myAgent") @Valid final AgentValidator agent, BindingResult result, RedirectAttributes redirect) {
      if (result.hasErrors()) {
        return "admin/agent/add";
      } 
       ...
    } 
```

我还定义了一个 ModelAttribute 像这样：

```
@ModelAttribute("myAgent")
 public AgentValidator getLoginForm() {
    return new AgentValidator();
 } 
```

这也是我的 AgentValidator 类：

```
public class AgentValidator {
    @NotEmpty(message = "your state can not be empty !")
    private String state; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:24:02.507

由于您的`state`字段看起来更像一个枚举，首先我建议将`state`字段更改为枚举，让 Spring MVC 绑定该字段并仅使用`@NotNull`注释：

```
public class AgentValidator {
    @NotNull(message = "your state can not be empty !")
    private AgenState state; 
```

在哪里`AgentState`：

```
public enum AgentState {
    DOWN,LISTEN,ACTIVE
} 
```

但是如果由于某些原因你不能改变你的模型，那么你可以使用[自定义约束](http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-customconstraints.html)。

特别是您需要创建注释`AgentStateConstraint`：

```
@Target( { METHOD, FIELD, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Constraint(validatedBy = AgentStateConstraintValidator.class)
@Documented
public @interface AgentStateConstraint {

    String message() default "Some message";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

} 
```

然后你需要创建验证器`AgentStateConstraintValidator`：

```
public class AgentStateConstraintValidator implements ConstraintValidator<AgentStateConstraint, String> {

    //Accepted values
    private static final Set<String> ACCEPTED_VALUES = new HashSet<String>(
            Arrays.asList(
                    "DOWN",
                    "LISTEN",
                    "ACTIVE"
            )
    );

    public void initialize(AgentStateConstraint constraintAnnotation) {
    }

    public boolean isValid(String object, ConstraintValidatorContext constraintContext) {
        return ACCEPTED_VALUES.contains(object);
    }

} 
```

# cross-compiling - Buildroot 交叉编译

> ID：15448483
> 
> 赞同：1
> 
> 时间：2013-03-16T11:04:24.000
> 
> 标签：cross-compiling, buildroot

使用以下命令进行交叉编译时出现问题：

```
$ buildroot-2013.02/output/host/usr/bin/arm-linux-gcc                   \
  -o laa exemple.c                                                      \
   $(/home/adel/Bureau/buildroot-2013.02/output/host/usr/bin/pkg-config \
      --libs --cflags gtk+-2.0) 
```

使用以下控制台输出：

```
sysroot/usr/lib/libglib-2.0.so: warning: the use of OBSOLESCENT `utime' is \
 discouraged, use `utimes'
sysroot/usr/lib/libX11.so.6: warning: gethostbyname is obsolescent,        \
 use getnameinfo() instead. 
```

它似乎编译得很好。当我执行输出文件时，警告是否会导致问题，没有显示任何内容，那么问题是什么以及如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:54:14.887

不，警告是无害的。他们只是告诉您 libglib 和 libX11 使用标记为已弃用的 C 库函数。但是由于 C 库不能破坏二进制兼容性，这些函数仍然存在，并且在执行方面一切都应该正常工作。

# windows-8 - 如何在带有 cocos2d-x 项目的 Windows Phone 8 中使用 sqlite3

> ID：15448489
> 
> 赞同：0
> 
> 时间：2013-03-16T11:05:01.923
> 
> 标签：windows-8, sqlite, cocos2d-x

我开始在 windows phone 8 上构建一个游戏应用程序。我正在使用 cocos2d-x 游戏引擎我正在开发一个使用数据库的游戏。谁能告诉我如何在 windows phone 8 游戏中使用 sqlite。还有其他方法可以在 windows phone 8 中创建数据库吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:52:11.647

我对 cocos2d-x 没有任何经验，但如果您尝试使用 sqlite，它不应该是真正相关的。

首先，您需要下载适用于 Windows Phone 8 的[SQLite VSIX 包](http://www.sqlite.org/download.html#wp8)。如果我没记错的话，由于 cocos2d-x，您已经需要使用 C++/CX。这应该更容易使用 SQLite。

如果您需要一些指导，您可以查看[sqlite-net-wp8](https://github.com/peterhuene/sqlite-net-wp8)和[sqlite-net](https://github.com/praeclarum/sqlite-net)，它们为其实现了托管包装器。

# java - 如何在 Java（Eclipse、android）中使用 printstacktrace？

> ID：15448490
> 
> 赞同：2
> 
> 时间：2013-03-16T11:05:21.363
> 
> 标签：java, android, printstacktrace

我正在使用 eclipse 开发一个 android 应用程序。如何查看 printstacktrace 的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:12:56.763

printstacktrace 的输出可以在 DDMS ->Logcat 视图中看到

打印Log的请使用Log。消息类型及其相关方法调用有：

```
The Log.e() method is used to log errors.

The Log.w() method is used to log warnings.

The Log.i() method is used to log informational messages.

The Log.d() method is used to log debug messages.

The Log.v() method is used to log verbose messages.

The Log.wtf() method is used to log terrible failures that should never happen. (“WTF” stands for “What a Terrible Failure!” of course.) 
```

要查看日志输出，请转到 DDMS > LogCat

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:17:13.340

在eclipse上的android开发中，最好使用logcat。在 Eclipse 中，转到 Window/Show View/Other... 并从对话框中选择 Android 下的 Logcat。

![在eclipse中打开Logcat](../Images/e943b479296fec48cdc541725fbc9fc7.png)

当您在调试模式下启动应用程序时，所有消息都将记录在那里。您可以使用过滤器隐藏来自系统或其他应用程序的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:08:24.930

在 Android 中，您应该更喜欢`Log`类方法而不是`printStackTrace()`. `Log`您可以在 DDMS 的 logcat 中看到输出。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:09:39.910

查看 printstacktrace 的输出..

使用`Log`类方法..比如`Log.i`，`Log.v`等等。

要查看日志输出，请转到`DDMS > LogCat`

# html - 如何让 XSL 忽略 xmlns 短名称

> ID：15448494
> 
> 赞同：1
> 
> 时间：2013-03-16T11:06:06.917
> 
> 标签：html, xml, xslt, xml-namespaces

我对 XSL 了解不多，但已经设法使用 XSL 格式化来自 3rd 方 Web 服务的 XML，而没有太多麻烦。但是前几天，一个曾经工作的网站停止了工作。我发现他们对 Web 服务返回的 XML 做了微小的更改。这是过去的工作（大大简化）：

**更新：**我现在看到了问题，但我没有解决方案。问题在于 xsl:if test="@xsi:type='r0:CreditTx'"。将 XSL 中的每个“r0”更改为“s0”，但它不起作用。

我已经用一个工作示例替换了我的原始代码：

XML:

```
<?xml version="1.0" encoding="unicode"?>
<MyResp xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:r0="http://www.foo.com/2.1/schema" 
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <r0:creditVendReceipt receiptNo="1234567890">
        <r0:transactions>
            <r0:tx xsi:type="r0:CreditTx">
                <r0:amt value="100" />
            </r0:tx>
        </r0:transactions>
    </r0:creditVendReceipt>
</MyResp> 
```

XSL：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:r0="http://www.foo.com/2.1/schema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsl:template match="/">
    <html>
      <head>
      </head>
      <body >
            <xsl:for-each select="MyResp/r0:creditVendReceipt/r0:transactions/r0:tx">
              <xsl:if test="@xsi:type='r0:CreditTx'">
                    <xsl:value-of select="r0:amt/@value"/>
              </xsl:if>
            </xsl:for-each>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

所需的 HTML：

```
<html xmlns:r0="http://www.foo.com/2.1/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body>
        100
  </body>
</html> 
```

当 Web 服务将 xmlns 的短名称“a”更改为“a0”时出现问题（它现在发送 xmlns:a0="http://mysite.com/webservice/1.0/schema"）；命名空间和其他一切都是一样的。我必须在 XSL 中将“a”更改为“a0”才能正常工作（即“GetInfoResp/a0:userName”）。问题是服务发送的短名称不时更改。（在真实的应用程序中，有很多名称空间，而且不同请求之间的短名称甚至会发生变化。）

我认为短名称只是为了使 XML 更短且更易于阅读，而实际名称并不重要（在 XML 和 XSL 之间；在 XSL 中显然必须匹配）。

我可以让 XSL 忽略 XML 中的短名称，而只使用它自己的短名称吗？

抱歉，如果之前回答过这个问题；我查看了其他问题，并没有看到这个具体问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:23:52.667

“短名称”称为名称空间前缀——您不必在转换中更改名称空间前缀——事实上，它可能与可在 XML 文档中使用的任何前缀完全不同。

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xYz="http://mysite.com/webservice/1.0/schema"
 exclude-result-prefixes="xYz">

 <xsl:template match="/">
    <html>
        <body >
          <xsl:value-of select="GetInfoResp/xYz:userName"/>
        </body>
    </html>
 </xsl:template>    
</xsl:stylesheet> 
```

**产生与此转换完全相同的结果：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:a0="http://mysite.com/webservice/1.0/schema"
  exclude-result-prefixes="a0">

 <xsl:template match="/">
    <html>
        <body >
          <xsl:value-of select="GetInfoResp/a0:userName"/>
        </body>
    </html>
 </xsl:template>
</xsl:stylesheet> 
```

**这两种转换，当应用于此 XML 文档时**（问题中提供的格式严重错误，必须更正）：

```
<GetInfoResp xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:a0="http://mysite.com/webservice/1.0/schema">
 <a0:userName>Joe</a0:userName>
</GetInfoResp> 
```

**产生相同的结果**：

```
<html>
   <body>Joe</body>
</html> 
```

**教训**：

重要的是名称空间，而不是用于简写它的前缀。

# php - 将来自 Yelp API 的 JSON 数据附加到 html

> ID：15448495
> 
> 赞同：1
> 
> 时间：2013-03-16T11:06:07.227
> 
> 标签：php, javascript, jquery, html, yelp

我尝试了 Yelp 开发者网站上的 JavaScript 示例。一切正常，但我想知道如何将 JSON 数据附加到 html 列表（ul）。该列表应包含我镇上的餐馆。有人知道怎么做这个吗？

PS PHP 也可以。

**编辑：** 谢谢你的回答，但它仍然不起作用。我无法为您提供更多详细信息，因为 Yelp API 的文档记录很差，而且我是 JSON 和 PHP 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:34:44.777

如果 JSON 对象作为 Ajax 请求的一部分返回，您将需要类似这样的内容：

```
$.post("yourajaxrequest.php", //calls .php file and transmits data via $_POST
                {
                    //variables required by the PHP file go here
                },
                //the function to perform when an object is returned from .php file
                function(toreceive){
                    var obj = JSON.parse(toreceive);
                    var first = obj.returnone;
                }); 
```

如果不阅读 Yelp 文档，我不确定您将如何从 Yelp 接收对象，但该`JSON.parse()`方法是您应该采用的解码对象的方法。

将对象解析为变量后，可以通过调用来分配对象的元素`object.*insert array value here*;`

这通常会在 PHP 中声明为：

```
$toencode = "The first string to be encoded";
$tosend['returnone'] = $toencode;
echo json_encode($tosend);
exit; 
```

然后，您可以`<ul>`使用附加到 a`.append`

```
<html>
<head>
</head>
<body>
    <ul id="list">
    </ul>
</body>
</html> 
```

在你的`<script>`：

```
$('#list').append('<li>'+first+'</li>'); 
```

没有任何示例代码或阅读 Yelp 文档，就没有更多工作要做。

希望能帮助到你。

**编辑为在第一行代码中添加右括号和分号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T11:25:05.540

假设 api 调用的输出是 ["blah", "blah", "blah", "blah"]

```
$("#container").append("<ul>");

$.ajax({
  // options go here

  success: function(datas){
    for(var i in datas){
      var data = datas[i];
       $("#container ul").append("<li>"+data+"</li>");
    }
  }
}); 
```

演示： http: [//jsfiddle.net/cDU52/1/](http://jsfiddle.net/cDU52/1/) - 已修复

阅读：[http ://api.jquery.com/append/](http://api.jquery.com/append/)

阅读：[如何以对象为成员循环遍历纯 JavaScript 对象？](https://stackoverflow.com/questions/921789/how-to-loop-through-javascript-object-literal-with-objects-as-members)

# php - 如何在 php mysql 中编写触发器

> ID：15448497
> 
> 赞同：1
> 
> 时间：2013-03-16T11:06:21.020
> 
> 标签：php, codeigniter

在我的 php 站点管理员必须每周更新站点中的内容。如果他忘记更新数据，我想向他发送电子邮件提醒。怎么可能？是否可以从后端发送邮件。我用谷歌搜索，我知道我们可以写触发器。但我不知道该怎么做。任何人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:48:08.857

**MySQL 触发器语法**

为了创建触发器，您使用 CREATE TRIGGER 语句。下面说明了 CREATE TRIGGER 语句的语法：

```
CREATE TRIGGER trigger_name trigger_time trigger_event
 ON table_name
 FOR EACH ROW
 BEGIN
 ...
 END 
```

让我们更详细地检查上面的语法。

您将触发器名称放在 CREATE TRIGGER 语句之后。触发器名称应遵循命名约定 [触发时间] *[表名]* [触发事件]，例如 before_employees_update。

触发器激活时间可以是 BEFORE 或 AFTER。定义触发器时必须指定激活时间。如果要在对表进行更改之前处理操作，则使用 BEFORE 关键字，如果需要在更改后处理操作，则使用 AFTER。

触发事件可以是 INSERT、UPDATE 和 DELETE。这些事件导致触发器被调用。一个触发器只能由一个事件调用。要定义由多个事件调用的触发器，您必须定义多个触发器，每个事件一个触发器。

触发器必须与特定表相关联。没有表触发器将不存在，因此您必须在 ON 关键字之后指定表名。

SQL 代码位于 BEGIN 和 END 关键字之间。

OLD 和 NEW 关键字可帮助您更有效地开发触发器。OLD 关键字是指更改数据之前的现有记录，NEW 关键字是指更改数据后的新行。

**MySQL 触发器示例**

让我们开始在 MySQL 中创建一个触发器来审计employees 表的更改。

首先，我们的 MySQL 示例数据库中有employees 表，如下所示：

![在此处输入图像描述](../Images/d95a18ba020d1d649ac3da2d8513d22b.png)

其次，我们创建一个名为 employees_audit 的新表来保存员工记录的更改。以下脚本创建employee_audit 表。

```
CREATE TABLE employees_audit (
   id int(11) NOT NULL AUTO_INCREMENT,
   employeeNumber int(11) NOT NULL,
   lastname varchar(50) NOT NULL,
   changedon datetime DEFAULT NULL,
   action varchar(50) DEFAULT NULL,
   PRIMARY KEY (id)
) 
```

第三，我们创建在对员工记录进行更改之前调用的 BEFORE UPDATE 触发器。

```
DELIMITER $$
CREATE TRIGGER before_employee_update
    BEFORE UPDATE ON employees
    FOR EACH ROW BEGIN

    INSERT INTO employees_audit
    SET action = 'update',
        employeeNumber = OLD.employeeNumber,
        lastname = OLD.lastname,
        changedon = NOW();
END$$
DELIMITER ; 
```

如果您查看架构，您将看到employees 表下的 before_employee_update 触发器，如下所示：

![在此处输入图像描述](../Images/147f1b96c30584bb16ca47f57f18b69c.png)

现在是时候更新员工记录以测试触发器是否真的被调用了。

```
UPDATE employees
SET lastName = 'Phan'
WHERE employeeNumber = 1056 
```

要检查触发器是否被 UPDATE 语句调用，我们可以使用以下查询来查询 employees_audit 表：

```
SELECT *
FROM employees_audit 
```

以下是查询的输出：

![在此处输入图像描述](../Images/9a390525499f65c343bdc17c8a411494.png)

如您所见，我们的触发器确实被调用了，因此我们在employees_audit 表中有一条新记录。

在本教程中，您学习了如何在 MySQL 中创建触发器。您已经编写了一个触发器来审计员工表的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:35:19.343

如果您的虚拟主机允许您执行预定的作业，您也可以在没有触发器的情况下执行此操作。您可以定期运行一个 php 脚本来检查数据库并发送电子邮件。

# javascript - 在 json 数组中检索具有相同 id 的对象（javascript）

> ID：15448498
> 
> 赞同：0
> 
> 时间：2013-03-16T11:06:32.983
> 
> 标签：javascript, arrays, json

我想在用 javascript 制作的 json 数组中检索具有相同 id 的对象

```
var Array = {               
    "1": {"text": "Number one", "time": "16 03 13"},
    "1": {"text": "Number two", "time": "14 03 13"},
    "1": {"text": "Number three", "time": "13 03 13"},
    "2": {"text": "Number one", "time": "13 03 13"},
}; 
```

我以这种方式尝试过，但显然它只显示了第一个结果（第一）

```
var get = Array[1]; 
alert(get.text); 
```

我想到了一个循环，我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T11:09:40.453

*   不要`Array`用作变量名。
*   对象键不能重复。如果这样做，则只会将最新条目提供给该键。其他的被丢弃。在您的情况下，只能通过“1”键访问第三个“1”。
*   **你需要的是一个数组**，而不是一个对象

你需要这个：

```
var myArray = [               
    {"id" : 1, "text": "Number one", "time": "16 03 13"},    //index 0
    {"id" : 1, "text": "Number two", "time": "14 03 13"},    //index 1
    {"id" : 1, "text": "Number three", "time": "13 03 13"},  //index 2
    {"id" : 2, "text": "Number one", "time": "13 03 13"}     //index 3
];

var i;

for(i=0;i<myArray.length;i++){
  if(myArray[i].id === 1){
    console.log(myArray[i].text);
  }
} 
```

* * *

这是另一种方法，这需要重组您的数据。如果您的 id 为 1 的条目有多个值，您可以在每个键下保存一个数组。

```
var myArray = {               
  "1" : [
    {"text": "Number one", "time": "16 03 13"},  //index 0
    {"text": "Number two", "time": "14 03 13"},  //index 1
    {"text": "Number three", "time": "13 03 13"} //index 2
  ],
  "2" : [
    {"text": "Number one", "time": "13 03 13"}   //index 0
  ]
};

var ones = myArray['1'];

for(i=0;i<ones.length;i++){
  console.log(ones[i].text);
} 
```

* * *

另一种方法是使用[Array.prototype.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

```
var myArray = [               
  {"id" : 1, "text": "Number one", "time": "16 03 13"},    //index 0
  {"id" : 1, "text": "Number two", "time": "14 03 13"},    //index 1
  {"id" : 1, "text": "Number three", "time": "13 03 13"},  //index 2
  {"id" : 2, "text": "Number one", "time": "13 03 13"}     //index 3
];

//create an array containing only those with id of 1
var filtered = myArray.filter(function(val,i,arr){
  return val.id === 1;
});

for(i=0;i<filtered.length;i++){
  console.log(filtered[i].text);
} 
```

# spring - Apache commons 配置与 PropertyPlaceHolderConfigurer 的兼容性

> ID：15448500
> 
> 赞同：2
> 
> 时间：2013-03-16T11:07:01.140
> 
> 标签：spring, annotations, apache-commons

我正在尝试使用 apache commons 配置替换 Spring 应用程序中的 PropertiesFactoryBean。

在我看来，公共配置框架与 PropertyPlaceHolderConfigurer 或 @Value 注释不兼容。

如果您建议我一个解决方案，请注意我仅使用 xml 配置了 spring。

谢谢，马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:12:42.547

你是对的。commons-config 很古老，不会知道花园蜗牛的@nnotation。@Value 意味着大量涉及注解的反射和检查的昂贵机制——如果你仍然需要@Value，你可能需要重新考虑摆脱 Spring。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T10:01:08.657

供将来参考：以前的答案不再正确。Commons Configuration 能够与 PropertyPlaceholderConfigurer 交互，有关详细信息，请参阅 [http://commons.apache.org/proper/commons-configuration/userguide/howto_utilities.html#Use_Configuration_in_Spring](http://commons.apache.org/proper/commons-configuration/userguide/howto_utilities.html#Use_Configuration_in_Spring)。

# jquery - jQuery 表单无法在 Internet Explorer 上运行

> ID：15448501
> 
> 赞同：0
> 
> 时间：2013-03-16T11:07:31.483
> 
> 标签：jquery, ajax, internet-explorer, grails, file-upload

我正在使用 jQuery 表单上传文件并将它们保存到数据库中，我的代码在 chrome 和 mozilla 中运行良好，但在 Internet Explorer 中无法开始上传；我是 grails 框架，我的代码如下：

```
<g:form controller="uploadImage" action="uploadImage" enctype="multipart/form-data" name="imageUploaderForm" id="imageUploaderForm">
    <input type="file" name="image" id="image" onchange="submitImageUploaderForm()" />
    <g:hiddenField name="imageType" value=""/>
</g:form>

$("#imageUploaderForm").ajaxForm({
    uploadProgress: function(event, position, total, percentComplete) {
        $("#progressbar").progressbar({
            value : percentComplete
        });
        $(".progress-label").html(percentComplete+" %");
    },
    complete: function(response){
        //something
    }
});

function submitImageUploaderForm(){
    //This method gets called !
    $("#imageUploaderForm").submit();
} 
```

在控制器中我有以下内容

```
def uploadImage = {
    def response = [result:false,message:"Image could not be uploaded.",uploadInstanceId:0]
    def uploadImage = new UploadImage(params)
    if(uploadImage.save()) response = [result:true,message: "Image uploaded sucessfully.",uploadInstanceId:uploadImage.id]
    render response as JSON
} 
```

当我尝试上传文件时，页面中没有任何反应，但过了一段时间后出现以下异常：

```
Message: Could not parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadException: Read timed out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:44:51.060

我在 Internet Explorer 中使用隐藏的 iFrame 上传文件，而在其他浏览器中，文件是使用上面显示的代码使用 AJAX 上传的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:19:08.730

遗憾的是，通过 Ajax 上传文件在 IE 中是行不通的。请参阅有关文件上传的 jQuery 文档。[http://jquery.malsup.com/form/#file-upload](http://jquery.malsup.com/form/#file-upload)

正如 James 指出的那样，这个问题以前曾被问过，而且它并不是 Grails 特有的。 [带有文件上传的 JQuery Ajax 表单在 IE 中不起作用](https://stackoverflow.com/questions/11233610/jquery-ajax-form-with-file-upload-not-working-in-ie)

# android - android广播流媒体背景和进度对话框

> ID：15448510
> 
> 赞同：1
> 
> 时间：2013-03-16T11:09:19.440
> 
> 标签：android, audio-streaming, progressdialog

我正在 android 中开发一个 Radio 应用程序，它将从 url 流式传输，并且在后台将显示进度对话框加载流，但显示 ANR。我正在使用媒体播放器服务来启动和停止。需要帮助。我使用过 asynctask 但无法获得解决方案。MainActivity.class

```
button_Play.setOnClickListener(new View.OnClickListener() 
{               
@Override
public void onClick(View v) 
{
    new DownloadTask().execute();
}
});

class DownloadTask extends AsyncTask<Void, Void, Void> 
{
@Override
protected void onPreExecute()
{
    progressDialog = ProgressDialog.show(MainActivity.this , "Android Streaming
Player" , "Connecting to Stream..." , true , false);

Log.d("onPreExecute()----->" , "MainActivity.class");

super.onPreExecute();

}

@Override
protected Void doInBackground(Void... params)
{

Log.d("doInBackground()----->" , "MainActivity.class");

startService(new Intent(MainActivity.this , RadioService.class));

return null;

}

@Override
protected void onPostExecute(Void result) 
{

Log.d("onPostExecute()----->" , "MainActivity.class");

progressDialog.dismiss();

super.onPostExecute(result);

}

}    

Here is service class:

RadioService.class

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
Log.d("onStartCommand------->", "RadioService.class");

try 
{
Log.d("MediaPlayer--->TRY BLOCK", "MediaPlayer");

URL url2 = new URL("http://141.139.35.23:8000");

URLConnection urlConnection = url2.openConnection();

player.setDataSource(urlConnection.getURL().toString());

player.setAudioStreamType(AudioManager.STREAM_MUSIC);

player.prepare();

Log.d("MediaPlayer--->TRY BLOCK AFTER ASYNC", "MediaPlayer");

player.setOnPreparedListener(new OnPreparedListener()
{

@Override
public void onPrepared(MediaPlayer mp) 
{

Log.d("MediaPlayer--->ON PREPARED BEGINS", "MediaPlayer");

//mp.setOnErrorListener(MainActivity.this);

mp.start();

//mp.setOnErrorListener(this);

mp.setWakeMode(getApplicationContext(), PowerManager.PARTIAL_WAKE_LOCK);

                    Toast.makeText(getApplicationContext() , "Streaming started " , Toast.LENGTH_SHORT).show();

                    Log.d("MediaPlayer--->ON PREPARED ENDS", "MediaPlayer");

                }
            });
        } catch (Exception e) 
        {
            Log.i("Exception", "Exception in streaming mediaplayer e = " + e);
        } 

        return START_STICKY;
        //return super.onStartCommand(intent, flags, startId);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T01:22:11.373

```
class Loading extends AsyncTask<Object, Object, Object>{
    protected void onPreExecute(){
        loadDialog.show();
    }
    @Override
    protected Object doInBackground(Object... arg0) {
        if(rFlag==false){
            mediaPlayer = new MediaPlayer();
            try{
                url = "rtsp://ra.dio";
                mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                mediaPlayer.setDataSource(url);
                mediaPlayer.prepare();
                mediaPlayer.start();
            } catch (Exception e) {
                loadDialog.dismiss();
                errmsg = "error";
                // TODO: handle exception
            }           
            while(rFlag==false){

                mediaPlayer.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

                    public void onBufferingUpdate(MediaPlayer arg0, int arg1) {
                        // TODO Auto-generated method stub
                        if(arg1 >= 98){
                            loadDialog.dismiss();
                            rFlag=true;
                        }
                    }
                });

            }
        }
        else if(rFlag==true){
            mediaPlayer.stop();
            mediaPlayer.release();
            mediaPlayer=null;
            rFlag=false;
        }
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        // loaded
    }

} 
```

# unix - 来自unix的图表上的日期格式

> ID：15448514
> 
> 赞同：0
> 
> 时间：2013-03-16T11:09:45.257
> 
> 标签：unix, date, highcharts

在 Highcharts 中整理了一个简单的图表，该图表是根据提供的数据编译的：

```
$(function() {
    var chart = new Highcharts.StockChart({

        chart: {
            renderTo: 'container'
        },
        credits: {
            enabled: false
        },
        title: {
            text: 'Chart'
        },
        xAxis: {
            type: 'datetime'
        },
        rangeSelector: {
            buttonTheme: { // styles for the buttons
                fill: 'none',
                stroke: 'none',
                style: {
                    color: '#039',
                    fontWeight: 'bold'
                },
                states: {
                    hover: {
                        fill: 'white'
                    },
                    select: {
                        style: {
                            color: 'white'
                        }
                    }
                }
            },
            inputStyle: {
                color: '#039',
                fontWeight: 'bold'
            },
            labelStyle: {
                color: 'silver',
                fontWeight: 'bold'
            },
            selected: 1
        },

        series: [{
            name: 'Data',
            data: [
[1325376000,102.2],
[1328054400,104.5],
[1330560000,106.7],
[1333238400,109.8],
[1335830400,122.1],
[1338508800,124.3],
]
        }]
    });
}); 
```

但是，日期数据（例如 1325376000）在图表的 x 轴上仅显示为小时，顶部显示的日期显示为 1970 年......你能告诉我哪里出错了吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:16:06.930

Highcharts 预计其日期以毫秒为单位。我认为您正在提供秒数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:13:55.737

您有 1325376000 即时间戳，（日期为 1970 年）。您使用 UNIX 时间戳还是其他？应该是哪个日期？您可以使用 ie Date.UTC() 来准备适当的日期[http://www.w3schools.com/jsref/jsref_utc.asp](http://www.w3schools.com/jsref/jsref_utc.asp)

# r - 如何在 GDS 文件中的 R 中进行 T 检验？

> ID：15448517
> 
> 赞同：0
> 
> 时间：2013-03-16T11:09:54.577
> 
> 标签：r

我的项目是关于预测生物标志物乳腺癌。

我使用这个函数给我一个 2x2 矩阵：

```
Table(gpl96)[1:10,1:4] 
```

我想获取代表 GDS 中基因样本的数据并比较 p 值以了解它是否为正态分布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:30:47.633

`t.test`测试两个符合正态分布的样本之间的位置是否存在差异。

为了大致检查假设的正态性，您可以检查输出是否`qqnorm`看起来是线性的，或者`ks.test`与从观察中估计参数一起使用*：

```
set.seed(1)
x1 <- rnorm(200,40,10) # should follow a normal distribution
ks.test(x1,"pnorm",mean=mean(x1),sd=sd(x1)) # p: 0.647 [qqnorm(x1) looks linear]
x2 <- rexp(200,10) # should *not* follow a normal distribution
ks.test(x2,"pnorm",mean=mean(x2),sd=sd(x2)) # p: 3.576e-05, [qqnorm(x2) seems curved] 
```

我不知道 GEO 的`Table`，但我建议您可能想使用它的`VALUE`列 - 而不是任何 2x2 矩阵 - 作为`t.test`,`qqnorm`或`ks.test`;的输入 也许您可以通过发布`head(Table(gpl96)[1:10,1:4])`.

（* 在[https://stat.ethz.ch/pipermail/r-help/2003-October/040692.html](https://stat.ethz.ch/pipermail/r-help/2003-October/040692.html)之后，这似乎也证明了更精致的 Lilliefors 测试。）

# ios - 块中块，带有 __weak self

> ID：15448518
> 
> 赞同：4
> 
> 时间：2013-03-16T11:10:01.647
> 
> 标签：ios, objective-c, xcode, block

我试图弄清楚我是否做对了：

如果我有一个块，我会这样做：

```
__weak MyClass *weakSelf = self;  
[self performBlock:^{                 //<< Should I use self, or weakSelf here?

    [weakSelf doSomething];

} afterDelay:delay]; 
```

但是如果一个块中有一个块会发生什么？这是正确的吗？

```
__weak MyClass *weakSelf = self;
[self performBlock:^{

    [weakSelf doSomething];

    [self performBlock:^{

        [weakSelf doSomething]; 
    } afterDelay:1.0f];

} afterDelay:delay]; 
```

另外，在下面的函数中，我需要使用[块复制]吗？

```
- (void)performBlock:(void (^)(void))block afterDelay:(float)delay
{
    if (block)
    {
        if (delay > 0)
        {
            [self performSelector:@selector(executeBlockAfterDelay:) withObject:[block copy] afterDelay:delay];
        }
        else
        {
            [self executeBlockAfterDelay:[block copy]];
        }
    }
}

- (void)executeBlockAfterDelay:(void(^)(void))block
{
    if (block)
        block();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:38:48.090

与其实施，不如`-performBlock:afterDelay:`使用`dipatch_after()`. 除其他外，这不是传递给对象的消息，因此毫无疑问将其定位于哪个接收者。

实际上，这里根本没有内存管理问题。当一个对象保留一个块并且该块（可能隐含地）保留同一个对象时，通常只需要执行“弱自我”方法。但是，该对象并未保留该块。它一直由框架保留，直到`-performSelector:withObject:afterDelay:`发生火灾，但这不是保留周期。

如果存在保留周期，则不应`self`在块中引用。因此，您的嵌套案例在调用消息时是错误的，`self`而不是`weakSelf`.

最后，是的，`[block copy]`当您在执行离开其声明范围后保留一个块时，或者如果您将其传递给非块特定 API 时，您确实需要这样做。也就是说，当您将块传递给时，您不需要复制它，`dispatch_async()`因为这是一个块感知 API，它知道在必要时制作自己的副本。但`-performSelector:withObject:afterDelay:`不是块感知的。它只是将其参数视为通用对象并保留它。因此，您必须在将块传递给该块时复制它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T10:48:53.260

在这种情况下（如下） ，请**使用 strong** `self`，因为该块仅在这几秒钟内被复制。通常，如果您想要`self`执行块，您希望它一直存活到那个时候，所以强引用是完全可以的。

```
[self performBlock:^{
    [self doSomething]; // strong is OK
} afterDelay:delay]; 
```

块内块？在你的情况下，这两个块只是延迟的一次性块，所以和上面一样，使用 strong。但是块之间存在差异。如果您将块存储**更长时间**，也许对于多次调用，您应该避免保留周期。

例子：

```
self.callback = ^{
    [self doSomething]; // should use weakSelf
}; 
```

这**可能会**导致保留循环。实际上，这取决于块的使用方式。我们看到该块被存储（复制）在属性中以供以后使用。但是，您可以通过取消不再使用的块来防止保留循环。在这种情况下：

```
self.callback(); //invoke
self.callback = nil; //release 
```

* * *

使用 ARC 时，您不必自己复制块。早期版本在添加块后存在错误，但现在 ARC 下的编译器知道何时复制块。在这种情况下复制它足够聪明：

```
[self performSelector:@selector(executeBlockAfterDelay:) withObject:block afterDelay:delay]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:52:28.293

关于块，要了解的最重要的一点是，它们在抽象实体中捕获一段代码（包括值），可以将其作为原子对象进行操作（将其保存在某处，传递它，复制等......）。实际上，它的实现方式可以保证默认情况下您的块将保持有效并在以后安全地执行。

然后捕获并保留块内所需的依赖项是必要的。

不幸的是，在某些情况下（实际上经常如此）该块由创建它的实例保留，并且它自己保留该实例。这称为保留循环，除非您自己破坏其中一个保留关系，否则您的对象和块无法释放。例如，如果您使用实例变量引用您的块并且您不手动取消它，则可能会发生这种情况。

这可能是块的主要问题，尤其是因为有时，您不知道您的块保留了您的自我实例（例如，您的块中的 NSAssert）。然后：

*   如果您立即执行您的块并释放它（在执行后使用您的块和调度释放它），则没有风险，因为您确定 self 引用的对象仍然存在。

*   但是，如果执行被延迟，将对象保留在块中很重要。但在这种情况下，您的对象不应保留您的块以避免保留循环（A 保留 B，B 保留 A）。如果您在方法的私有范围内定义并选择性地引用您的块，那是完美的。

*   关于复制。是的，如果您的块作为方法参数传递，则使用复制会更安全，以确保您在此范围内有一个干净的独占块，并且保留计数为 +1。但也许 ARC 已经为您做到了。不确定。例如它 performWithSelector 似乎是免费的，那么复制并不危险。只是一个没用的。有时编译器可以通过删除它来优化它，但必须检查它。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-16T11:36:08.513

我通常这样做：

```
__unsafe_unretained __block id blockSelf = self; 
```

然后在我的块中使用它没有问题。

所以在你的情况下：

```
__unsafe_unretained __block MyClass *blockSelf = self;
[self performBlock:^{
    [weakSelf doSomething];
    [self performBlock:^{
        [weakSelf doSomething]; 
    } afterDelay:1.0f];
} afterDelay:delay]; 
```

也让你的生活更轻松 - 制作一个实用程序类并将其放在标题中

```
void RunAfterDelay(NSTimeInterval delayInSeconds, dispatch_block_t block); 
```

然后在 .m 文件中

```
void RunAfterDelay(NSTimeInterval delayInSeconds, dispatch_block_t block)
{
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC), dispatch_get_main_queue(), block);
} 
```

将实用程序导入您的前缀，您可以：

```
__unsafe_unretained __block MyClass *blockSelf = self;
RunAfterDelay(1.0f,^{
    [blockSelf doSomething];
    RunAfterDelay(delay,^{
        [blockSelf doSomething];
    })
}); 
```

我发现它比冗长的默认阅读更好一些。

希望这可以帮助 ：）

# .net - 插入查询对象引用未设置为实例对象VB.Net中未处理异常

> ID：15448519
> 
> 赞同：0
> 
> 时间：2013-03-16T11:10:04.993
> 
> 标签：.net, vb.net, razor

这是我在 vb.net 中的代码，当我将插入查询从 VB.net 传递到 SQL 服务器时，我在查询时遇到异常，即对象引用未设置为实例对象，在 sql 字段中允许为 null 并且 ID 是自动增量. 我的一位同伴说使用记录集并告诉类似的条件，但我完全不知道在 VB.net 中的 New 中的记录集，请帮助我，我该怎么办，

折叠 | 复制代码

```
Imports System.Data
Imports System.Data.SqlClient
Public Class MaintenanceTask
    Dim cn As New System.Data.SqlClient.SqlConnection
    Sub connect()
        cn = New System.Data.SqlClient.SqlConnection("Data Source=localhost;Initial Catalog=Fleet Maintainance;Integrated Security=True")
    End Sub
    Sub lockall()
        cBx1.Enabled = False
        cBx2.Enabled = False
        tBx1.Enabled = False
        tBx2.Enabled = False
        tBx3.Enabled = False
    End Sub
    Sub unlockall()
        cBx1.Enabled = True
        cBx2.Enabled = True
        tBx1.Enabled = True
        tBx2.Enabled = True
        tBx3.Enabled = True
    End Sub
    Sub setall()
        cBx1.Text = ""
        cBx2.Text = ""
        tBx1.Text = ""
        tBx2.Text = ""
        tBx3.Text = ""
    End Sub
    Sub updatecombo1()
        Call connect()
        Dim cd As New System.Data.SqlClient.SqlCommand("SELECT [Name],[NameID] FROM [RepairName] order by [Name]", cn)
        Dim adp As New System.Data.SqlClient.SqlDataAdapter(cd)
        Dim ds As New DataSet
        adp.Fill(ds)
        'ComboBox2.Items.Clear()
        cBx1.DisplayMember = "Name"
        cBx1.ValueMember = "NameID"
        cBx1.DataSource = ds.Tables(0)
    End Sub
    Sub updatecombo2()
        Call connect()
        Dim cd As New System.Data.SqlClient.SqlCommand("SELECT [RepairType],[RepairTypeID] FROM [RepairType] order by [RepairType]", cn)
        Dim adp As New System.Data.SqlClient.SqlDataAdapter(cd)
        Dim ds As New DataSet
        adp.Fill(ds)
        'ComboBox2.Items.Clear()
        cBx2.DisplayMember = "RepairType"
        cBx2.ValueMember = "RepairTypeID"
        cBx2.DataSource = ds.Tables(0)
    End Sub
    Sub updatecombo3()
        Call connect()
        Dim cd As New System.Data.SqlClient.SqlCommand("SELECT [Service],[ServiceID] FROM [Service] order by [Service]", cn)
        Dim adp As New System.Data.SqlClient.SqlDataAdapter(cd)
        Dim ds As New DataSet
        adp.Fill(ds)
        'ComboBox2.Items.Clear()
        cBx1.DisplayMember = "Service"
        cBx1.ValueMember = "ServiceID"
        cBx1.DataSource = ds.Tables(0)
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        If cBx1.Enabled = True Then
            Dim str As String = "insert into MaintenanceTask (MainID, TypeID, PartCost, LaborCost, Total) values (" & (cBx1.SelectedValue.ToString()) & ", " & (cBx2.SelectedValue.ToString()) & ", " & CInt(tBx1.Text) & "," & CInt(tBx2.Text) & "," & CInt(tBx3.Text) & ")"
            Call connect()
            Dim cd As New System.Data.SqlClient.SqlCommand(str, cn)
            cd.Connection.Open()
            cd.ExecuteNonQuery()
            cd.Connection.Close()
            MsgBox(" New Task is added successfully ")
            Call lockall()
            Me.Close()
            Call IssueWorkOrder.listView2load()

        Else
            MsgBox(" Task is not added Try again ")

        End If

    End Sub

    Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        AddService.Show()
        AddService.Visible = True
    End Sub

    Private Sub RadioButton1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RadioButton1.CheckedChanged
        RadioButton1.Text = "Preventive"
    End Sub

    Private Sub RadioButton2_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RadioButton2.CheckedChanged
        RadioButton2.Text = "Repair"
    End Sub

    Private Sub RadioButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RadioButton1.Click
        Call updatecombo3()
        Label3.Text = "Service"
        cBx2.Enabled = False
    End Sub

    Private Sub RadioButton2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RadioButton2.Click
        Call updatecombo1()
        Call updatecombo2()
        Label3.Text = "Repair"
        cBx2.Enabled = True
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Me.Close()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:35:39.013

您的主要问题是您的插入字符串。您不检查组合的值是否有效，并在 VB 项中的 NULL (Nothing) 上调用 ToString

```
 Dim str As String = "insert into MaintenanceTask (MainID, TypeID, PartCost, " & _
                       "LaborCost, Total) values (" & (cBx1.SelectedValue.ToString()) & _
                       ", " & (cBx2.SelectedValue.ToString()) & ", " & CInt(tBx1.Text) & _
                        "," & CInt(tBx2.Text) & "," & CInt(tBx3.Text) & ")" 
```

如果 cBx1.SelectedValue 为 NULL，则不能在 NULL 对象上调用方法 (ToString)，这是收到的 NullReferenceException。但是，您有一个更严重的问题，称为[Sql Injection](http://www.unixwiz.net/techtips/sql-injection.html)（请阅读文章）

```
 Dim str As String = "insert into MaintenanceTask (MainID, TypeID, PartCost, " & _
                       "LaborCost, Total) values (@main, @tp, @cost, @labcost, @tot)"

    Dim cd As New SqlCommand(str, cn)
    cd.Parameters.AddWithValue("@main", if(cbx1.SelectedValue == null, DBNull.Value, cbx1.SelectedValue.ToString)
    cd.Parameters.AddWithValue("@tp", if(cbx2.SelectedValue == null, DBNull.Value, cbx2.SelectedValue.ToString)
    cd.Parameters.AddWithValue("@cost", Convert.ToInt32(tBx1.Text))
    cd.Parameters.AddWithValue("@labcost", Convert.ToInt32(tBx2.Text))
    cd.Parameters.AddWithValue("@totale", Convert.ToInt32(tBx3.Text))
    cd.Connection.Open()
    cd.ExecuteNonQuery()
    cd.Connection.Close()
    MsgBox(" New Task is added successfully ")
    Call lockall()
    Me.Close()
    Call IssueWorkOrder.listView2load() 
```

其他问题是文本框的整数转换。
如果输入不是一个有效的数值，你会得到一个错误，你需要在连接对象是稀缺资源之前进行一些错误处理，你应该确保在完成后关闭。您的代码缺少错误处理，如果出现错误，您的连接永远不会关闭。

# android - jnetpcap 用于 linux 上的 android 开发

> ID：15448520
> 
> 赞同：2
> 
> 时间：2013-03-16T11:10:11.497
> 
> 标签：android, java-native-interface, jnetpcap

如果已下载最新的 jnetpcap 版本并将其安装在我的 linux 机器上（将 libjnetpcap.so 复制到 /usr/lib 并设置 PATH）。我用 eclipse 在一个简单的 JAVA PROJECT 中测试了这个库，效果很好。但是在eclipse中的ANDROID PROJECT中，我收到了错误

```
 java.lang.NoClassDefFoundError: org.jnetpcap.Pcap 
```

甚至可以在 ANDROID 项目中使用这个库，因为一切都适用于我的 JAVA 项目吗？

是否有另一种可能将 Pcap 函数与 JNI 一起使用并在 C 中实现相关函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:01:03.223

您必须在目标主机和开发主机上安装 Jnetpcap。这在 Android 中是否可行是另一个问题，但这里没有迹象表明你已经尝试过。

# firefox-addon - 没有影响：appShellService.unregisterTopLevelWindow(topXulWindow); （隐藏窗口）

> ID：15448521
> 
> 赞同：0
> 
> 时间：2013-03-16T11:10:20.483
> 
> 标签：firefox-addon, xul, xpcom

我用 .xul 覆盖 chrome://browser/content/browser.xul，在主菜单中添加一个按钮。单击它会打开另一个带有 .xul 窗口的 ChromeWindow。

```
var ww = Components.classes["@mozilla.org/embedcomp/window-watcher;1"].getService(Components.interfaces.nsIWindowWatcher);
var bgwin = ww.openWindow(null, 'chrome://myextension/content/myBrowser.xul', 'MyName', "chrome, resizable=yes, width=1024, height=600, minimizable, maximizable", []); 
```

chrome://myextension/content/myBrowser.xul：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window id="myextension-my-browser"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    title="mybrowser"
    windowtype="mybrowser"
    >
    <script type="application/x-javascript" src="chrome://myextension/content/myBrowser.js" />
    <browser id="browser" type="content" flex="1" src="about:blank" />
</window> 
```

效果很好。但是，我想隐藏那个窗口。让它完全不可见，做（在 myBrowser.js 中）。但什么也没发生：

```
var topXulWindow = window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
            .getInterface(Components.interfaces.nsIWebNavigation)
            .QueryInterface(Components.interfaces.nsIDocShellTreeItem).treeOwner
            .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
            .getInterface(Components.interfaces.nsIXULWindow);
var appShellService = Components.classes["@mozilla.org/appshell/appShellService;1"].getService(Components.interfaces.nsIAppShellService);               
appShellService.unregisterTopLevelWindow(topXulWindow); 
```

# 我的问题

我究竟做错了什么？为什么窗口没有消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:25:41.363

使用以下代码段为您添加代码

```
var basewindow = window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
  .getInterface(Components.interfaces.nsIWebNavigation)
  .QueryInterface(Components.interfaces.nsIDocShell)
  .QueryInterface(Components.interfaces.nsIDocShellTreeItem).treeOwner
  .QueryInterface(Components.interfaces.nsIBaseWindow);

basewindow.visibility = false;
basewindow.enabled = false;

// now unregister 
```

# c# - 接受“自动”的 DependencyProperty double 似乎可以工作，但会引发错误

> ID：15448525
> 
> 赞同：2
> 
> 时间：2013-03-16T11:10:59.610
> 
> 标签：c#, wpf, dependency-properties

我希望可以使用“Auto”字符串在用户控件上设置高度属性。

```
public object ContentHeight
{
    get { return GetValue(ContentHeightProperty); }
    set { SetValue(ContentHeightProperty, value); }
}

public static readonly DependencyProperty ContentHeightProperty =
    DependencyProperty.Register("ContentHeight", 
    typeof(object), typeof(UcDataTempl), 
    new PropertyMetadata(new object(), (o, args) => { }, 
    (o, value) =>
        {
            if (value.Equals("Auto"))
                return Double.NaN;

            return value;
        }), value => true); 
```

它似乎工作得很好，但我在输出窗口中收到这些错误：

```
System.Windows.Data Error: 23 : Cannot convert 'System.Object' 
from type 'Object' to type 'System.Double' for 'en-US' culture 
with default conversions; consider using Converter property of Binding. 
NotSupportedException:'System.NotSupportedException: DoubleConverter cannot convert from System.Object.

   at System.ComponentModel.TypeConverter.GetConvertFromException(Object value)
   at System.ComponentModel.TypeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)'

System.Windows.Data Error: 6 : 'ObjectSourceConverter' 
converter failed to convert value 'System.Object' (type 'Object'); 
fallback value will be used, if available. BindingExpression:Path=ContentHeight; 
DataItem='UcDataTempl' (Name=''); 
target element is 'Border' (Name=''); 
target property is 'Height' (type 'Double') 
NotSupportedException:'System.NotSupportedException: DoubleConverter cannot convert from System.Object.

   at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)
   at MS.Internal.Data.DefaultValueConverter.ConvertFrom(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture)
   at MS.Internal.Data.ObjectSourceConverter.Convert(Object o, Type type, Object parameter, CultureInfo culture)
   at System.Windows.Data.BindingExpression.ConvertHelper(IValueConverter converter, Object value, Type targetType, Object parameter, CultureInfo culture)' 
```

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:14:23.090

这是[FrameworkElement.Height](http://msdn.microsoft.com/en-gb/library/system.windows.frameworkelement.height.aspx)属性的实现：

```
[TypeConverter(typeof (LengthConverter))]
public double Height
{
  get
  {
    return (double) this.GetValue(FrameworkElement.HeightProperty);
  }
  set
  {
    this.SetValue(FrameworkElement.HeightProperty, (object) value);
  }
} 
```

[LengthConverter](http://msdn.microsoft.com/en-us/library/system.windows.lengthconverter.aspx)处理 Auto 到 double.NaN 的转换。

所以你需要的是

```
[TypeConverter(typeof (LengthConverter))]
public double ContentHeight
{
    get { return GetValue(ContentHeightProperty); }
    set { SetValue(ContentHeightProperty, value); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T04:13:56.283

我知道这有一个答案恰好适合用于询问的情况，但遗憾的是不适合用于询问的情况。在我的情况下，我需要一个 this 函数并且我需要 DependencyProperty，因为它是作为嵌套在控件内的所有元素的静态属性访问的。（就像“Canvas.Top”）

```
[TypeConverter(typeof(LengthConverter))]
public static readonly DependencyProperty ChildrenPaddingProperty =
    DependencyProperty.RegisterAttached(
        "ChildrenPadding",
        typeof(double),
        typeof(Layout),
        new FrameworkPropertyMetadata(10d, FrameworkPropertyMetadataOptions.AffectsArrange)
    );

[TypeConverter(typeof(LengthConverter))]
public static double GetChildrenPadding(UIElement control) {
    return (double)control.GetValue(ChildrenPaddingProperty);
}
[TypeConverter(typeof(LengthConverter))]
public static void SetChildrenPadding(UIElement control, double yn) {
    control.SetValue(ChildrenPaddingProperty, yn);
} 
```

幸运的是，我只做了很少的调整就让它编译了。请注意，属性是在 DP 的所有 3 个属性上设置的。

# android - 如何通过任何听众跟踪反向方向（reverseLandscape 和 reversePortrait）？

> ID：15448526
> 
> 赞同：2
> 
> 时间：2013-03-16T11:11:24.980
> 
> 标签：android, android-sensors, android-orientation, android-resolution

浏览了几篇关于配置和方向更改的帖子和线程，但我仍然没有被清除。

仅在从to或to更改`onConfigurationChanged`时才被调用（顾名思义），但是有没有办法通过任何 api 级别的任何种类的列表器来监听或方向更改。`orientation``landscape``portrait``portrait``landscape``reverseLandscape``reversePortrait`

或者是否有可能听到`rotation`类似的变化`onConfigurationChanged`？？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:32:52.327

您可以通过调用来检索 4 个方向中的哪一个当前处于活动状态

```
getWindowManager().getDefaultDisplay().getRotation(); 
```

`portrait`知道何时调用它可能很棘手，因为例如，如果您直接从到，系统不会通知您`reversePortrait`。实现这一目标的唯一方法是使用设备的传感器。[Android 开发者博客中的](http://android-developers.blogspot.fr/2010/09/one-screen-turn-deserves-another.html)这篇文章应该对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:43:29.530

您可以使用加速度计和磁场传感器来计算设备旋转，然后调用

```
getWindowManager().getDefaultDisplay().getRotation(); 
```

当旋转处于某个值时。计算旋转的方法是在我的回答[如何使用 Android 中的加速度计测量手机在 XY 平面中的倾斜度](https://stackoverflow.com/questions/11175599/how-to-measure-the-tilt-of-the-phone-in-xy-plane-using-accelerometer-in-android/15149421#15149421)

# primefaces - 当我取消下载对话框时，文件下载、PrimeFaces、连接关闭

> ID：15448528
> 
> 赞同：1
> 
> 时间：2013-03-16T11:11:31.290
> 
> 标签：primefaces, download

我的 JSF 页面中有一个使用 primefaces 的下载链接。当您单击它时，浏览器（而不是程序）会打开一个对话框，询问（打开、保存、关闭）。我正在使用 Eclipse 默认浏览器来查看我的 Web 应用程序。因此，如果您单击打开或保存，将下载文件。一切都很好。但是，如果您单击取消，一切都会失败。我在下面收到的错误。我在对话范围内有 bean。

```
WARNING: org.apache.catalina.connector.ClientAbortException: java.io.IOException: An existing connection was forcibly closed by the remote host
javax.faces.FacesException: org.apache.catalina.connector.ClientAbortException: java.io.IOException: An existing connection was forcibly closed by the remote host
    at org.primefaces.component.filedownload.FileDownloadActionListener.processAction(FileDownloadActionListener.java:81)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:772)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIData.broadcast(UIData.java:912)
    at org.primefaces.component.datalist.DataList.broadcast(DataList.java:248)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:775)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1267)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:277)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:69)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.IOException: An existing connection was forcibly closed by the remote host
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:382)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:351)
    at org.apache.catalina.connector.Response.flushBuffer(Response.java:645)
    at org.apache.catalina.connector.ResponseFacade.flushBuffer(ResponseFacade.java:326)
    at com.sun.faces.context.ExternalContextImpl.responseFlushBuffer(ExternalContextImpl.java:855)
    at org.primefaces.component.filedownload.FileDownloadActionListener.processAction(FileDownloadActionListener.java:76)
    ... 40 more
Caused by: java.io.IOException: An existing connection was forcibly closed by the remote host
    at sun.nio.ch.SocketDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:33)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:69)
    at sun.nio.ch.IOUtil.write(IOUtil.java:40)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:336)
    at com.sun.grizzly.util.OutputWriter.flushChannel(OutputWriter.java:106)
    at com.sun.grizzly.util.OutputWriter.flushChannel(OutputWriter.java:74)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flushChannel(SocketChannelOutputBuffer.java:321)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flushBuffer(SocketChannelOutputBuffer.java:392)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flush(SocketChannelOutputBuffer.java:370)
    at com.sun.grizzly.http.ProcessorTask.action(ProcessorTask.java:1174)
    at com.sun.grizzly.tcp.Response.action(Response.java:266)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:378)
    ... 45 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-20T15:42:02.313

看起来有 2 个或更多一致的文件下载请求。当您提交一个文件下载请求并在服务器为您提供下载请求之前/同时再次请求相同文件时，就会发生这种情况。

如果您将下载管理器应用程序集成到您的浏览器中，就会发生这种情况，例如*Internet 下载管理器*，它通常会请求两次文件下载。

# macos - 在 MAC OS X 10.8.x 上，AppStore 应用程序如何安装内核扩展？

> ID：15448529
> 
> 赞同：7
> 
> 时间：2013-03-16T11:11:31.983
> 
> 标签：macos, cocoa, mac-app-store, kernel-extension

**描述** 我正计划开发一个需要安装内核扩展才能正常运行的科学沙盒应用程序。

**代码相关问题** 购买时app如何安装kext？我的意思是，它将如何部署？是否有一些（可可）API 可以调用？我没有任何运气就搜索了这个答案。似乎大多数应用程序不需要 kexts。

**一般问题** 我可以将这样的应用程序放在 appStore 上吗？我有疑问，因为安装内核扩展会破坏沙盒的目的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T12:30:30.863

无法对 Mac App Store 接受的应用程序执行此操作。根据 Mac App Store 审核指南.. 2.18: 安装 kexts 的应用程序将被拒绝

# c# - 如何在 asp.net mvc 中使用自定义操作生成自定义 url

> ID：15448530
> 
> 赞同：1
> 
> 时间：2013-03-16T11:11:40.873
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我是 Web 开发和 asp.net mvc 的新手，我正在尝试创建一个博客作为我的第一个项目。

现在，在博客中，每篇文章都有自己的页面（有点像 stackoverflow 为每个问题都有一个新页面）。但我很难理解我将如何实现这一目标。

因为例如每个新页面都必须有自己的视图和自己的操作方法。现在假设如果有 1000 篇博文，这意味着控制器中有 1000 个视图和 1000 个动作是动态创建的。

肯定还有别的办法。在这个问题上的一点指导会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:34:52.153

您将只有一个操作和一个视图，但针对不同的博客文章有不同的数据（视图模型）。因此，例如，假设您为博客文章声明了一条特殊路线：

```
routes.MapRoute(
    "BlogPostDetails",
    "posts/{id}/{title}",
    new { controller = "Posts", action = "Details" }
); 
```

在这里，我指定了一个额外的 URL 参数，称为`title`使 URL 对 SEO 更友好（例如“/posts/1/Hello%20world”）。

接下来是定义模型和控制器：

```
// /Models/BlogPost.cs
public class BlogPost
{
    public string Heading { get; set; }
    public string Text { get; set; }
}

// /Controllers/PostsController
public class PostsController : Controller
{
    public ActionResult Details(string id)
    {
        BlogPost model = GetModel(id);

        if (model == null)
            return new HttpNotFoundResult();

        return View(model);
    }

    private BlogPost GetModel(string blogPostId)
    {
        // Getting blog post with the given Id from the database
    }
} 
```

最后，您的视图 (/Views/Posts/Details.cshtml) 应该是这样的：

```
@model [Root namespace].Models.BlogPost;

<article>
    <h2>@Model.Heading</h2>
    <p>@Model.Text</p>
</article> 
```

希望这可以为您澄清一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:15:51.147

您的操作方法将有一个参数来标识实际的博客文章。

例如：

```
/post/view/123 
```

将查看 ID 为 123 的博客文章。您对 PostController 的操作如下所示

```
ViewResult View(int postId){
    //get from db, return appropriate content via view here
} 
```

因此，您只需要一个控制器和本示例中的一个操作即可完成所有这些操作。只是参数变化。

# r - data.frame 到时间序列对象

> ID：15448533
> 
> 赞同：2
> 
> 时间：2013-03-16T11:12:03.037
> 
> 标签：r, type-conversion, dataframe, time-series

我得到了一个看起来如下的数据框对象：

```
Date        dax_data.csv    nikkei_data.csv spx_data.csv
2013-03-15  NA              NA              1560.70
2013-03-14  NA              NA              1563.23
2013-03-13  NA              NA              1554.52
2013-03-12  NA              NA              1552.48
2013-03-11  NA              NA              1556.22
2013-03-08  8020.36         12283.62        1551.18

...

1984-01-04  4533.21         9927.00         900.42
1984-01-05  NA              9947.00         NA
1984-01-06  NA              9961.00         NA 
```

我想做以下步骤：

*   减少数据框以仅覆盖所有数据集都有值的日期范围。在这个例子中，从`1984-01-04`到`2013-03-08`（不能硬编码，需要是动态的，并且需要保留其间的所有 NA）。

*   数据的频率需要每周一次，第一个值应该是数据框中最旧的值。即在这个例子`1984-01-04`中。

*   数据框对象需要转换为 timeSeries 对象。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:29:58.643

您没有解释如何将您的数据减少到每周频率。我的意思是你从一周中得到任何价值吗？还是您取平均值？...

这里有一个使用`xts`package 的选项，方便这种操作，特别是针对金融时间序列。

```
library(xts)
dat.ts <- xts(dat[,-1],as.POSIXct(dat$Date))
dat.ts[endpoints(dat.ts,'weeks')]

           dax_data.csv nikkei_data.csv spx_data.csv
1984-01-06           NA            9961           NA
2013-03-11           NA              NA      1556.22
2013-03-15           NA              NA      1560.70 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:43:13.917

我们使用 读取数据，`read.zoo`并使用 修剪开头和结尾的所有 NA 行`na.trim`。（注意，`read.zoo`也可以“读取”数据帧和文件。）

然后我们聚合所有具有相同值的行`nextfri`（在[动物园快速参考小插图](http://cran.r-project.org/web/packages/zoo/vignettes/zoo-quickref.pdf)中定义）。 `nextfri`接受一个日期向量，并为每个组件返回下一个星期五（如果已经是星期五，则返回相同的日期）。实际的聚合函数是`tail1`（每周的最后一行），但我们可以替换任何其他合理的聚合函数，例如`mean`. （见`?aggregate.zoo`）。

最后，我们将`"zoo"`时间序列转换为`"timeSeries"`时间序列。根据您接下来打算做什么，您可能不需要这最后一步。

```
Lines <- "
Date        dax_data.csv    nikkei_data.csv spx_data.csv
2013-03-15  NA              NA              1560.70
2013-03-14  NA              NA              1563.23
2013-03-13  NA              NA              1554.52
2013-03-12  NA              NA              1552.48
2013-03-11  NA              NA              1556.22
2013-03-08  8020.36         12283.62        1551.18
1984-01-04  4533.21         9927.00         900.42
1984-01-05  NA              9947.00         NA
1984-01-06  NA              9961.00         NA
"

library(zoo)

z.raw <- read.zoo(text = Lines, header = TRUE)
z <- na.trim(z, is.na = "all")

nextfri <- function(x) 7 * ceiling(as.numeric(x-5+4) / 7) + as.Date(5-4)
tail1 <- function(x) tail(x, 1)
z.wk <- aggregate(z, nextfri, tail1)

library(timeSeries)
as.timeSeries(z.wk) 
```

# sql - 替代 SQL 中的“循环”？

> ID：15448535
> 
> 赞同：1
> 
> 时间：2013-03-16T11:12:14.753
> 
> 标签：sql, sql-server, sql-server-2012

我读过“如果你在 sql 中使用循环，你可能做错了”，这导致我来到这里。不过，在问题之前，先介绍一下该场景的背景。我有以下数据库结构：

*   “用户”有：
    *   UserID int IDENTITY (PK)
    *   可靠性浮动
*   “用户提交”有：
    *   价值浮动
    *   用户 ID 整数 (FK) (PK)
    *   提交 ID (FK) (PK)
    *   时间戳日期时间（PK）
*   “全球提交”有：
    *   理想值浮动
    *   提交 ID (PK)

将 GlobalSubmissions 视为一个表格，其中包含理想情况下用户应提交的理想值。UserSubmissions 是一个包含用户提交的值的表。

我编写了一个函数，通过将用户的“提交”与单个特定的“全局提交”进行比较来估计用户的可靠性：

```
CREATE FUNCTION dbo.GetUserReliabilityForSubmission(@userID int, @submissionID int)
RETURNS float
AS
BEGIN

    DECLARE @userAverageValue float,
    @idealValue float;

    SET @userAverageValue = (
        SELECT AVG (Value)
            FROM UserSubmissions
        WHERE (UserID = @userID AND SubmissionID = @submissionID));

    SET @idealValue = (
        SELECT IdealValue
        FROM Submission
        WHERE (SubmissionID = @submissionID));

    RETURN 1 - ABS(@userAverageValue - @idealValue);
END 
```

这可行，但它仅根据一个特定的提交 ID 计算用户的可靠性。如果我想计算用户的“全局”可靠性，我需要使用一个循环来遍历用户曾经提交的所有不同的**SubmissionID并在其上运行该过程。**

在这种情况下使用循环是否有一个很好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:24:04.837

```
SELECT d.UserID, 1 - AVG(ABS(d.avg - d.IdealValue))
FROM (
  SELECT us.UserID, gs.SubmissionID, gs.IdealValue, AVG(us.Value) as avg FROM UsersSubmissions us
  JOIN GlobalSubmissions gs ON gs.SubmissionID = us.SubmissionID
  GROUP BY us.UserID, gs.SubmissionID, gs.IdealValue) d
GROUP BY d.UserId 
```

工作示例：[http ://sqlfiddle.com/#!6/8d880/8](http://sqlfiddle.com/#!6/8d880/8)

但是，我会说这不是定义可靠性的好方法。我认为您应该考虑将其更改为以下内容：

```
SELECT d.UserID, 1 - AVG(ABS(d.avg - d.IdealValue) / ABS(d.IdealValue))
FROM (
  SELECT us.UserID, gs.SubmissionID, gs.IdealValue, AVG(us.Value) as avg FROM UsersSubmissions us
  JOIN GlobalSubmissions gs ON gs.SubmissionID = us.SubmissionID
  GROUP BY us.UserID, gs.SubmissionID, gs.IdealValue) d
GROUP BY d.UserId 
```

还有例子：[http ://sqlfiddle.com/#!6/8d880/14](http://sqlfiddle.com/#!6/8d880/14)

变化是什么？它把*错误*相对于价值本身。当它实际上是*6时说**x = 5*和当它是*501*时说*x = 500*是有区别的。

# visual-studio - 在其他计算机上运行 OpenGL 程序

> ID：15448539
> 
> 赞同：2
> 
> 时间：2013-03-16T11:12:42.193
> 
> 标签：visual-studio, opengl, exe

我用opengl（visual studio 2012）制作了一个exe文件，我使用了glut，我使用了MTd作为运行时库（当我使用MT时它会给出LNK2001错误）。但是当我尝试在其他计算机上运行它时，它给出的 glut32.dll 没有发现错误。如何使 glut32.dll 内置在我的程序中？

将所有 DLL 和库文件与 exe 文件放在同一文件夹中后，出现此错误：

![动态链接错误](../Images/5b69fe648e6042f26d2049e4399ccd76.png)

发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:18:59.850

您必须使用静态库。

有关构建 GLUT 静态库的信息，请参阅[此帖子](https://stackoverflow.com/questions/10856832/building-a-static-library-for-glut-3-7-on-windows)。

我认为 DLL 是为另一个目标编译的，可能会出现 32 位和 64 位之间的混合。

搜索为 64 位目标编译的另一个库。

# visual-studio - 在家用计算机上加载 XNA 项目时出现问题

> ID：15448543
> 
> 赞同：0
> 
> 时间：2013-03-16T11:12:53.723
> 
> 标签：visual-studio, visual-studio-2010, xna, project, file-not-found

我刚刚安装了 Microsoft Visual Studio 2010 Pro，在学校我们运行相同的版本，但在家里我得到了错误。

> F:\xna\LearningXNA4.0\Chapter 02\Collision\Collision\Collision\Collision.csproj：错误：无法读取项目文件“Collision.csproj”。
> 
> F:\xna\LearningXNA4.0\Chapter 02\Collision\Collision\Collision\Collision.csproj(131,3)：导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\XNA Game Studio\Microsoft.未找到 Xna.GameStudio.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。
> 
> F:\xna\LearningXNA4.0\Chapter 02\Collision\Collision\CollisionContent\CollisionContent.contentproj：错误：无法读取项目文件“CollisionContent.contentproj”。
> 
> F:\xna\LearningXNA4.0\Chapter 02\Collision\Collision\CollisionContent\CollisionContent.contentproj(26,3)：导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\XNA Game Studio\v4\. 0\Microsoft.Xna.GameStudio.ContentPipeline.targets" 未找到。确认声明中的路径正确，并且该文件存在于磁盘上。**

请注意，我已经安装了 XNA 和 Visual Studio 以驱动已满且`E:`为空。`C:``E:`

错误消息告诉我编辑设置一些如何更新更改，但我不知道在哪里。我希望这里有人会知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:12:41.377

每个项目文件，例如`Collision.csproj`基本上是一个文本文件。只需在记事本中打开它们（如果您想看到漂亮的标记，也可以在 VS 中打开它们）并编辑导致错误位置的路径。

# sql - 在 PostgreSQL 中使用给定的模式和分隔符格式化字符串

> ID：15448546
> 
> 赞同：1
> 
> 时间：2013-03-16T11:13:10.267
> 
> 标签：sql, regex, string, postgresql, substring

我正在尝试为以下场景编写 PostgreSQL 查询：

输入：
I) 字母数字字符串，例如`abcd1234efgh`
II) 模式，例如`[1][2][3][2][1][3]`
III) 分隔符，例如`-`（连字符）

输出：
`a-bc-d12-34-e-fgh`

我需要一个查询。功能对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:10:19.150

使用一个[`regexp_replace()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)电话：

```
SELECT regexp_replace('abcd1234efgh'
                     ,'^(.)(..)(...)(..)(.)(...)'
                     ,'\1-\2-\3-\4-\5-\6'
                     ) 
```

产生请求的结果。

同样用数字写：

```
SELECT regexp_replace('abcd1234efgh'
                     ,'^(.{1})(.{2})(.{3})(.{2})(.{1})(.{3})'
                     ,'\1-\2-\3-\4-\5-\6'
                     ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:45:19.407

```
select concat_ws('-',
    left(a, 1),
    substring(a from 2 for 2),
    substring(a from 4 for 3),
    substring(a from 7 for 2),
    substring(a from 9 for 1),
    right(a, 3)
)
from (values ('abcd1234efgh')) s(a) 
```

该`concat_ws`函数将使用其第一个参数作为分隔符。

# python - Django-tastypie - 如何包含选择？

> ID：15448549
> 
> 赞同：1
> 
> 时间：2013-03-16T11:13:46.577
> 
> 标签：python, django, rest, tastypie

我有一个像这样的模型字段

```
location_state = models.CharField(max_length=255, null=True, blank=True, choices=STATE_CHOICES) 
```

它的值是由美味派返回的，但是为了呈现一个列表框，需要所有可用选项的列表。通过资源公开此类选择的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:16:02.917

由于某种原因，我找不到一种简单的方法来做出选择，但这可以解决问题。

```
YourModel._meta.get_field('location_state').choices 
```

您应该注意，虽然`_meta`它是一个内部实现细节，但已被大量应用程序和扩展所依赖，因此使用起来应该相对安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:11:16.020

我会使用[内置模式](https://django-tastypie.readthedocs.org/en/latest/interacting.html?highlight=schema#fetching-data)来通知客户有关字段选项的信息。尽管如此，默认情况下，选择选项不包含在架构资源中。[该线程](https://stackoverflow.com/questions/12611038/in-django-tastypie-can-choices-be-displayed-in-schema)显示了如何实现此目的的一种方法。

*编辑 2013-03-19*：

或者，您可以通过使用/覆盖[`alter_list_data_to_serialize`](http://django-tastypie.readthedocs.org/en/latest/resources.html#alter-list-data-to-serialize)您的`ModelResource`.

# android - 使用手机内置视频播放器播放视频

> ID：15448554
> 
> 赞同：1
> 
> 时间：2013-03-16T11:14:29.567
> 
> 标签：android, button, video, hyperlink

我有一个简单的按钮，我希望通过单击此按钮来播放 URL 视频 (xxx.mp4)，但没有 videoView 或 webView。所以如果我点击按钮，手机会询问我选择哪个内部播放器来播放视频。

播放视频按钮：button3

视频链接：[http ://wisdom.gotdns.com/application/android/res/00/1112PJ12.mp4](http://wisdom.gotdns.com/application/android/res/00/1112PJ12.mp4)

**cv_1112pj12.java**

```
package com.schkop.project;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class cv_1112pj12 extends Activity {
    Button bn0, bn1, bn2, bn3;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cv_1112pj12);

        //
        bn0 = (Button) findViewById(R.id.button0);
        bn1 = (Button) findViewById(R.id.button1);
        bn2 = (Button) findViewById(R.id.button2);
        bn3 = (Button) findViewById(R.id.button3);

        bn0.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent it0 = new Intent(getApplicationContext(), Main.class);
                startActivity(it0);
            }

        });

        bn1.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent it1 = new Intent(getApplicationContext(), Store.class);
                startActivity(it1);
            }

        });

        bn2.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent it2 = new Intent(getApplicationContext(), News_feed.class);
                startActivity(it2);
            }

        });

        bn3.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent it3 = new Intent(getApplicationContext(), cv_1112pj12_play.class);
                startActivity(it3);
            }

        });

        //

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

**cv_1112pj12.xml**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#e9e9e9"
    android:textColor="#000000"
    android:scrollbars="vertical">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Main" >

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#000000">
    <Button
        android:id="@+id/button0"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:text="@string/tab1"
        android:textColor="#000000"
        android:background="#ffffff"
        android:layout_weight="1" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:text="@string/tab2"
        android:textColor="#ffffff" 
        android:background="#2f4444"
        android:layout_weight="1"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:text="@string/tab3"
        android:textColor="#ffffff"
        android:background="#2f4444"
        android:layout_weight="1" />
    </LinearLayout>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:textColor="#000000"
    android:background="#e9e9e9"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView11"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="#e9e9e9"
        android:src="@drawable/cv_1112pj12"/>

    <TextView
        android:id="@+id/textView12"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="#e9e9e9"
        android:text="@string/tab2_1112pj12"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView13"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="#e9e9e9"
        android:text="@string/tab2_1112pj12_desc"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView14"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="#e9e9e9"
        android:text="@string/tab_space"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView13"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="#e9e9e9"
        android:text="@string/tab2_noti"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView14"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="#e9e9e9"
        android:text="@string/tab2_noti_desc"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <Button
        android:id="@+id/button3"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:textColor="#ffffff"
        android:background="#2f4444"
        android:layout_gravity="bottom"
        android:layout_marginTop="60dp"
        android:text="@string/tab2_watch" />

</LinearLayout>

</LinearLayout>
</ScrollView> 
```

这是xml和java文件，我应该在这些文件中添加什么代码？并请在评论时发布所有代码（不仅是更正部分），谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:17:47.193

使用以下代码播放视频。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.parse(sampleFile), "video/mp4");
        startActivity(intent); 
```

sampleFile 是您的视频网址。

# jquery - 我可以让 jqPlot 更准确地处理变量吗？

> ID：15448557
> 
> 赞同：0
> 
> 时间：2013-03-16T11:14:40.980
> 
> 标签：jquery, arrays, jqplot

我做了一个小提琴，展示了两个相同的图被提供了完全相同的数据。一个从表格单元格生成的数组中接收数据，另一个将数据直接写入生成绘图的脚本中。

数组来源的图似乎不知道最小/最大变量 - 而且，虽然我可以使用更多的变量来告诉它最小/最大值，但这是真正的错误开始出现的地方（就像只有一半的图表渲染/标签不渲染/等）。

我可能错误地将数组提供给 jqPlot，或者我在网上找不到快速修复。有人对此有解决方案吗？

看看这个：

[http://jsfiddle.net/SH5Sj/2/](http://jsfiddle.net/SH5Sj/2/)

```
$('.plotter').each(function(){ // START PLOTTER
v = [];
$(this).find('tr').each(function(){
    var v1 = $(this).find('td:first').html();
    var v2 = $(this).find('td:last').html();
    var array = [v1,v2];
    v .push(array);
});

var plot1 = $.jqplot ('chart1', [v]);

}); // END PLOTTER 
```

相对：

```
var plot2 = $.jqplot ('chart2', [[[1,10],[2,20],[3,50],[4,100]]]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:47:00.057

不同之处在于您的表格示例使用数据集中的文本数据，而您手工制作的示例使用数字数据。

尝试先将表格数据转换为数字：

```
var array = [ parseInt(v1), parseInt(v2) ]; 
```

[更新了 jsfiddle](http://jsfiddle.net/SH5Sj/4/)

我还没有深入研究 jqPlot 以找出为什么会发生这种情况，尽管我自己也被类似的问题所困扰。

# java - Eclipse 插件，用于在 java 类中更改后编译并在构建后自动部署

> ID：15448561
> 
> 赞同：0
> 
> 时间：2013-03-16T11:15:10.563
> 
> 标签：java, eclipse, eclipse-plugin

我正在为我的项目使用 Eclipse 和 Tomcat 服务器。

每当我对项目进行一些更改时，如果我对 java 类进行了任何更改，我都需要构建。

我想知道是否有可能在不重新建造战争的情况下导致我的变化？

是否有任何插件可供eclipse在构建后自动部署战争？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:37:26.753

如果您使用 Maven，[Cargo 插件](http://cargo.codehaus.org/Deploying+to+a+running+container)是支持部署到已运行容器的最佳选择。

# jquery - 如何将树枝 {{path('')}} 调用渲染为 jquery ajax url

> ID：15448563
> 
> 赞同：2
> 
> 时间：2013-03-16T11:15:16.897
> 
> 标签：jquery, symfony, twig

我正在使用来自模态框的 ajax 请求将数据保存在我的 symfony2 应用程序中。当模态框被调用时，模态标记被渲染。所以我不能在我的模态框标记中的任何地方使用“”符号。

我的代码是：

```
var path = {{ path('_inserttask') }};
    $.ajax({
        type: 'POST',
        url: path,
        data: { myid: 123456 },
        success: function(data) {
            $('#mask , .login-popup').fadeOut(300 , function() {
                $('#mask').remove();
            });
        }
    }); 
```

调用 ajax 时，它会在控制台中出现错误。我发现如果我使用硬编码的 url - 它可以工作！但是使用`{{ path('_inserttask') }}`as url 会出错。我知道这是我没有使用的引号。如何解决问题？它已经杀死了 2 个小时 :-(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T11:40:10.603

从我上面看到的你没有在路径变量的值上加上双引号。试试这个 -

```
var path = "{{ path('_inserttask') }}";
$.ajax({
    type: 'POST',
    url: path,
    data: { myid: 123456 },
    success: function(data) {
        $('#mask , .login-popup').fadeOut(300 , function() {
            $('#mask').remove();
        });
    }
}); 
```

再想一想，您正在将此脚本嵌入到 twig 模板中，该模板稍后将呈现为 html，然后发送到浏览器，对吗？如果是，我认为上述更改将解决问题。

如果您尝试在纯 javascript 文件中使用 twig。我不认为它会起作用。如果你这样做。我认为您尝试将路径值放在 html 中，然后使用 javascript 获取该值，然后改为调用 ajax。例如。我会选择将该路径 url 嵌入到 div 的属性之一中。

在我的树枝模板文件中（例如 index.html.twig）

```
<div id="abc" data-path="{{path('_inserttask')}}">
</div> 
```

在我的 javascript 文件中（例如 abc.js）

```
var path = $("#abc").attr("data-path");
$.ajax({
    type: 'POST',
    url: path,
    data: { myid: 123456 },
    success: function(data) {
        $('#mask , .login-popup').fadeOut(300 , function() {
            $('#mask').remove();
        });
    }
}); 
```

# python - SQLAlchemy 两个同名的主键也是外来的

> ID：15448564
> 
> 赞同：0
> 
> 时间：2013-03-16T11:15:19.023
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

我在 Flask 应用程序中使用 SQLAlcemy 将旧的 MySQL 数据库迁移到新的数据库，同时执行一些清理等过程。我不控制目标上的架构，因此我绑定了他们令人沮丧的架构和声明列名和关系的方式。

我的模型是这样的：

```
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()

class EntryTitle(Base):
    __tablename__ = 'entry_title'

    entry_id = Column('entry_id', Integer, primary_key=True)
    title = Column('title', String(155))

class EntryData(Base):
    __tablename__ = 'entry_data' 

    entry_id = Column('entry_id', Integer, primary_key=True)
    body = Column('body', String(255)) 
```

我需要将第二个与第一个联系起来，加入该`entry_id`列，但我不确定最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:15:13.873

您需要将主键定义为外键，然后 SQLAlchemy 将在进行连接时自行找出关系：

```
class EntryTitle(Base):
    __tablename__ = 'entry_title'
    entry_id = Column('entry_id', Integer, primary_key=True)
    title = Column('title', String(155))
    # Assuming this is a one-to-one relationship, so setting uselist to False.
    entry_data = relationship('EntryData', backref='entry_title',
                              uselist=False)

class EntryData(Base):
    __tablename__ = 'entry_data'
    # Simply define this primary key as a foreign key to entry_title table.
    entry_id = Column('entry_id', Integer, ForeignKey('entry_title.entry_id'),
                      primary_key=True)
    body = Column('body', String(255))

# Add new objects to a session.
entry_title = EntryTitle(title='Foo')                                            
entry_title.entry_data = EntryData(body='Bar')                                   
session.add(entry_title)                                                         
session.commit()

# Query whole models.
q1 = session.query(EntryTitle, EntryData).join(EntryData)
# Or just the columns you need.
q2 = session.query(EntryTitle.title, EntryData.body).\
    join(EntryData).\
    filter(EntryTitle.entry_id == 42) 
```

# php - 我的数据库中的访问令牌

> ID：15448567
> 
> 赞同：2
> 
> 时间：2013-03-16T11:15:32.443
> 
> 标签：php, facebook, access-token

所以如果我想用过期的访问令牌捕获错误，我必须检查一下 [https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens /](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/) 好的，但它有点不清楚。

```
 // known valid access token stored in a database 
  $access_token = "YOUR_STORED_ACCESS_TOKEN"; 
```

所以我必须在我的数据库中保留最后一个用户访问令牌？

```
 $code = $_REQUEST["code"];

  // If we get a code, it means that we have re-authed the user 
  //and can get a valid access_token. 
  if (isset($code)) { 
```

所以如果我得到`$_REQUEST["code"]`它意味着用户有访问令牌？

我的应用程序打印用户喜欢，如果例如用户更改密码，我必须获得新的访问令牌。我应该如何验证这些令牌？在这种情况下，Facebook 文档对我来说真的不清楚；/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:31:26.183

您可以通过异常处理来做到这一点。如果您的访问令牌已过期或无效，它将向您抛出错误并为您提供下面提到的消息。

```
public function getUserInfo($access_token)
    {    
               try {
                        $user_info = $this->facebook->api(
                       '/me',
                       'GET',
                               array('access_token' =>$access_token)
                    );
                    } 
                    catch(Exception $e){
                        $message = $e->getMessage();
                            if ((strpos($message, 'Error validating access token') !== false) ||
                                (strpos($message, 'Invalid OAuth access token') !== false) ||
                                (strpos($message, 'An active access token must be used') !== false)
                            ) {
                                echo 'Your custom Message';
                            }
                    }
} 
```

您可以将访问令牌传递给您的函数，然后像上面的异常处理那样检查。

希望它可以帮助你。

通过这种方式，您可以获得扩展访问令牌

```
 /**
     * Getting User Acess Tocken , extended it and save it in to database......
     */
    public function getAccessToken($user_id,$fb_account_id)
    {
         $access_token=$this->facebook->getAccessToken();               
         $extended_access_token=$this->getExtendedAccessToken($access_token);                
        /** 
         * To save Access tocken and other necessary option
         */  
        $usr_bus_model = new Application_Model_UserBusinessAccounts;                
        $usr_bus_model->loadAccount($user_id,'Facebook',(int)$fb_account_id,false);         
        $usr_bus_model->details=$extended_access_token;
                if(!empty($extended_access_token))
                {
                    $usr_bus_model->status= 'active';
                }
        $usr_bus_model->save();

        return $extended_access_token;
    }

    public function getExtendedAccessToken($access_token)
        {       

            $token_url="https://graph.facebook.com/oauth/access_token";
            $params=array('client_id'=>self :: appId,'client_secret'=>self :: appSecretId,'grant_type'=>'fb_exchange_token','fb_exchange_token'=>$access_token);

              $response = $this->curl($token_url,$params);
              $response = explode ('=',$response);
              $response = explode ('&',$response[1]);
              $response = $response[0];       
              return $response;

        } 
```

我做了以上两个功能。因此，每当您需要使用访问令牌时，只需调用扩展访问令牌并将其保存到您的数据库中。所以你的访问令牌永远不会过期。

# php - 如何防止自定义发布请求到表单的“操作”页面

> ID：15448568
> 
> 赞同：3
> 
> 时间：2013-03-16T11:15:38.263
> 
> 标签：php, html, form-submit

我正在制作一个表单，我想让提交的 PHP 页面只有在提交表单时才可访问，从而防止对我的 PHP 页面的自定义请求。

这是我的 form.html：

```
<html>
    <head>
        <title>Name/Surname form</title>
    </head>
    <body>
        <form id="form1" method="POST" action="processData.php">
            Name: <input type="text" id="name" name="name"><br>
            Surname: <input type="text" id="surname" name="surname"><br>
            <input type="submit" value="Submit form">
        </form>
    </body>
</html> 
```

然后是我的 processData.php：

```
<?php
    if(!isset($_POST['name'],$_POST['surname'])) die;

    include ("config.php");

    //connect
    $mysqli = new mysqli($dbhost, $dbuser, $dbpassword, $dbname); //variables from config.php

    //check connection
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    if ($stmt = $mysqli->prepare("INSERT INTO name_surname_table (name, surname) values (?, ?)")) {

        //bind
        $stmt->bind_param('ss', $name, $surname);

        //set
        $name=$_POST['name'];
        $surname=$_POST['surname'];

        //execute
        $stmt->execute();

        //close
        $stmt->close();
        }
    else {
        //error
        printf("Prepared Statement Error: %s\n", $mysqli->error);
    }
?> 
```

问题是，如果我在未在上一页中提交表单的情况下进行自定义发布请求，则数据将提交到数据库，这意味着自动化程序可以将它想要的任何内容放入我的数据库中......我该如何防止这？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:26:05.987

您有很多选项可以阻止机器人自动提交您的表单：

1.  使用验证[码](http://www.google.com/recaptcha/captcha)或一些简单的计算字段（例如`What gives 3 + 2 ?`）

2.  用令牌

3.  [对$_REQUEST](https://stackoverflow.com/questions/6474783/which-server-variables-are-safe)变量进行一些检查

令牌可以这样完成：

```
session_start();
//generate a unique string
$token = uniqid(rand(), true);
//Store the token
$_SESSION['token'] = $token;
//Store the token_time
$_SESSION['token_time'] = time(); 
```

在表单中添加隐藏输入：

```
<input type="hidden" name="token" id="token" value="<?php echo $token;?>"/> 
```

与将表单提交到数据库之前相比：

```
session_start();
//If token exists
if(isset($_SESSION['token']) && isset($_SESSION['token_time']) && isset($_POST['token']))
{
    //If it's the same as the posted one
    if($_SESSION['token'] == $_POST['token'])
    {
        //For example 15 mins ago
        $old_time = time() - (15*60);
        //If token hasn't expired
        if($_SESSION['token_time'] >= $old_time)
        {
           //Do your queries here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:36:49.593

从根本上说，您无法阻止恶意客户端向您的服务器发送“不正确”的数据。由您来检测这种情况并适当地处理错误情况。

如果只有某些用户应该能够提交数据，那么显然您需要某种形式的登录系统。然后，您可以信任来自登录用户的任何数据，并拒绝其他所有数据。

如果您只想知道客户端在前一页加载了表单，您可以添加一个包含“nonce”的隐藏字段 - 一个随机字符串，您将其值存储在服务器上的某处，例如 PHP 会话中。如果提交的随机数与预期值不匹配，则拒绝输入。请注意，这并*不能*保证用户在他们的浏览器中与表单进行了交互，只保证他们下载了它（因为程序仍然可以提取随机数并刺激提交表单）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:31:11.047

您可能在表单中有一个隐藏字段，其中包含过期的密码......

当您生成表单时，您可以通过在时间上运行哈希甚至只是选择一个随机数来计算代码。然后将其存储在您的会话中并将其插入您发送的表单中。

处理表单提交时，请检查以确保密码与会话中存储的密码相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:34:10.147

您应该为您的表单进行基于令牌的身份验证。

在显示表单的页面中，首先使用随机代码设置会话变量。

```
//generate this using whatever random code generation method you prefer.
$_SESSION["token"] = "your-random-code"; 
```

在您的论坛中有一个隐藏字段，如下所示。

```
<input type="hidden" name="token" value="<?php echo $_SESSION['token'] ?>"> 
```

在提交处理程序 php 文件中，进行如下检查。

```
if(isset($_POST['token']) && $_POST['token'] == $_SESSION['token']) 
```

# python-3.x - 如何向 Python 添加/安装二进制库？

> ID：15448569
> 
> 赞同：0
> 
> 时间：2013-03-16T11:15:42.483
> 
> 标签：python-3.x, numpy

[我从这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/)下载了一个二进制库，我想将它添加到 Python 中，但我不知道该怎么做，请帮忙。

这是我尝试过的：

```
try:
    import numpy
except:
    print "This implementation requires the numpy module."
    exit(0) 
```

我下载了 numpy .exe 二进制文件，但我不知道放在哪里。我使用 Windows 和 Python 3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:50:16.937

[所以我现在刚刚从sourceforge](http://sourceforge.net/projects/numpy/files/NumPy/1.7.0)下载了官方版本。这是一个安装程序。现在它起作用了。

# javascript - window.location 不适用于带有 signalR 的服务器调用函数

> ID：15448570
> 
> 赞同：1
> 
> 时间：2013-03-16T11:15:44.370
> 
> 标签：javascript, signalr

那是我的代码：

```
<input type="button" id="SignOut" value="SignOut"  onclick="logout();" /> 
```

**服务器端：**

```
public void ondisconnected() // when the user is disconnected
{
    try
    { 
        DataRow[] UserRow = ConnectedClientDt.Select("ConnectionID='" + Context.ConnectionId + "'");
        int ClientID = Convert.ToInt32(UserRow[0][0]);
        new SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).Update("Update clients set USER_STATUS='F' where CLIENT_ID=" + ClientID);
        string query = " Select FRIEND_ID from friends where CLIENT_ID= " + ClientID;
        DataTable FriendsDt = new SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
        for (int i = 0; i < FriendsDt.Rows.Count; i++)
        {
            DataRow[] FrRow = ConnectedClientDt.Select("ClientId=" + FriendsDt.Rows[i][0] + "");
            if (FrRow.Length > 0)
                Clients.Client(FrRow[0][2].ToString()).userDisconnected(ClientID);
        }
        DeleteUser(Context.ConnectionId);  
    }
    catch (Exception ex)
    {
        return ;
    }
} 
```

**客户端：**

```
function logout() {
    $.connection.chatHub.server.ondisconnected();
    setTimeout(window.location= "LoginPage.aspx?action=logout", 5000);
} 
```

当我按下按钮时，ondisconnected 函数没有执行，但是当我删除 settimeout 行时，代码正常工作，没有任何问题：s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:18:50.363

以下代码将在`window.location`评估时触发，这不是您想要的：

```
setTimeout(window.location= "LoginPage.aspx?action=logout", 5000); 
```

你需要：

```
setTimeout(function(){window.location="LoginPage.aspx?action=logout"}, 5000); 
```

通过将代码包装在一个函数中，它只会在函数被调用时执行，这将在 5 秒后发生。您以前的版本会`window.location`立即评估，这意味着`signalr`没有时间与服务器通信。

# javascript - jQuery fileupload - 获取上传文件的列表

> ID：15448574
> 
> 赞同：9
> 
> 时间：2013-03-16T11:15:59.580
> 
> 标签：javascript, jquery, file-upload, jquery-file-upload

我正在使用非常好的 jquery 插件[blueimp / jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

```
$('#fileupload').fileupload({
  autoUpload: true
, filesContainer: '#attachments_presentation tbody'
, stop: function (e) {
    console.log(data);
  }
}); 
```

而且我无法做一些非常简单的事情：获取上传文件的列表
（在服务器上带有它们的名称）

首先，我天真地认为它会存储在文件输入中，这样我就可以得到列表

```
$('#fileupload').val(); 
```

但事实并非如此，所以我想到了类似的东西

```
$('#fileupload').fileupload('getfiles'); 
```

我无法从文档中找到方法

有人可以告诉我如何获取服务器中上传的文件名列表吗？

* * *

**更新**

我想在**服务器**上获取上传的文件名，以便以后能够管理它们。

例如：

*   我上传了一个名为`trutruc.pdf`
*   我上传`test.png`
*   我重新上传了一个名为`trutruc.pdf`
*   我删除第一个文件

服务器中的当前文件列表应该是`test.png`，`trutruc (2).pdf`

* * *

**更新 2**

我正在使用fileUpload[附带的默认 php 脚本](https://github.com/blueimp/jQuery-File-Upload/blob/master/server/php/UploadHandler.php)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T11:29:45.387

当您实例化默认插件时，有一个代码部分正在检索所有以前上传的文件（假设您没有更改服务器代码）：

请参阅`main.js`文件第 70 行：

```
 // Load existing files:
    $.ajax({
    // Uncomment the following to send cross-domain cookies:
    //xhrFields: {withCredentials: true},
    url: $('#fileupload').fileupload('option', 'url'),
        dataType: 'json',
        context: $('#fileupload')[0]
    }).done(function (result) {
        $(this).fileupload('option', 'done')
            .call(this, null, {result: result});
    }); 
```

如果您进一步查看代码，则会有一个表格将用模板填写：

```
<table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table> 
```

加载文件后，您可以轻松地从该表中解析每个：

```
$('tbody.files tr').each(function(i, e) {
    //according to @Brandon's comment it's now p.name
    var name = $(e).find('td.name').text(); 
    var size = $(e).find('td.size').text();
    //etc.
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-22T00:28:40.137

我使用 UI 版本。这是从文件表中获取服务器链接并填充数组的脚本：

```
 var files = new Array();
    $("#fileupload td p.name a").each(function() {
        var name = $(this).attr("href");
        files.push(name);
    });
    alert(files.join('\n')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-02T06:07:39.547

你也可以试试这个

```
 $('#fileupload').bind('fileuploadcompleted', function (e, data) {
     var filess= data.result.files[0];
        var filenam = filess.name;
       alert(filenam);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-21T20:56:41.400

我遇到了同样的问题，经过几个小时和数十次文件上传，我想我有你需要的答案：

```
done: function (e, data) {
    response = data.response();
    parsedresponse = $.parseJSON(response.result);
    console.log(parsedresponse.files);
} 
```

如您所见，您将在`parsedresponse.files[i].url`（*i*是已上传文件的从 0 开始的索引）找到上传的文件名。

好的...它是上传文件的 URL，但您将能够提取最终文件名...

希望能帮助到你。（这在文档中没有，我通过检查 Firebug 控制台输出设法得到了这个解决方案）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-08T18:26:55.497

要从**服务器**获取上传的文件名列表，需要服务器端代码：

*UploadHandler.php*用于将文件上传到服务器上的目录。

如果您已下载插件存档并将其解压缩到您的服务器，则文件将默认存储在 php/files 中。（确保 php/files 目录具有服务器写入权限。）参见：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Setup](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup)

*UploadHandler.php*就是这样，一个上传处理程序。在没有连接到服务器的情况下，它不提供对服务器文件的访问。

JavaScript 无法访问**服务器**上的文件，因此您需要一个 php 脚本来执行此操作。（尽管 JavaScript 可能会跟踪所有上传、重命名和删除的内容。）

您可以修改*UploadHandler.php*以连接到您的数据库，并在上传期间将文件路径（和任何其他数据）写入文件表。然后您可以通过标准 SQL 查询访问您的文件：

## 修改*UploadHandler.php*：

1.  添加数据库连接参数
2.  编写SQL查询函数
3.  编写第二个函数来执行您的查询
4.  调用第二个函数

见：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases](https://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-30T20:10:29.017

好吧，这是一个相当老的帖子，但这对我来说效果很好，所以我想发布它。

1.  将事件绑定到 FileUploader（我是在 main.js 中完成的）：

    ```
     $('#fileupload').bind('fileuploaddone', function (e, data) {
            FileUploadDone(e, data);
        }); 
    ```

2.  在您的 html 文件中，使用以下代码获取文件名：

    ```
    function FileUploadDone(e, data) {
    for (x in data._response.result.files){
        if (data._response.result.files[x].error == "")
            alert(data._response.result.files[x].name);
        else
            alert(data._response.result.files[x].error);
    }} 
    ```

您应该在 firebug 中观察数据对象。这个对象封装了大部分信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T11:26:28.253

[如果您使用的是文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)中提到的基本插件，则需要将数据传递给 done 属性中的函数。改变这个：

```
stop: function (e) { 
```

对此：

```
done: function (e, data) { 
```

如果您从文档页面之一获得它，我不知道停止，然后我认为同样适用于此处，如果数据不可用，您将无法使用数据。
希望这有帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-16T11:37:28.407

尝试使用 done 方法并将名称放入隐藏输入中，然后选择它们：

```
$('#fileupload').fileupload({
  autoUpload: true
, filesContainer: '#attachments_presentation tbody'
, stop: function (e) {
    console.log(data);
  }
, done: function(e,data){
            var filess= data.files[0];
            var filenam = filess.name;
            data.context.text(filenam+' uploaded successfully.');
            $('#formId').append('<input type="hidden" name="fileName" value="'+filenam+'"/>');
}
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-05T13:28:54.477

在上传完成时获取文件列表：

```
$('#fileupload').bind('fileuploadfinished', function (e, data) {
   console.log(data.originalFiles);
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-16T10:56:08.347

```
 // Initialize the jQuery File Upload widget:
                $('#edit-product').fileupload({
                    // Uncomment the following to send cross-domain cookies:
                    //xhrFields: {withCredentials: true},
                    disableImageResize: false,
                    autoUpload:false,
                    url: 'YOURURL'
                }).bind('fileuploaddone', function (e, data) {
                    console.log(data.result.files[0]);   
                }); 
```

# scala - 检查是否为具有未知类型的值定义了scala中的部分函数

> ID：15448575
> 
> 赞同：1
> 
> 时间：2013-03-16T11:16:03.310
> 
> 标签：scala, type-erasure, higher-rank-types, partialfunction

我具有以下特征（要获得 2 级多态性[click](http://apocalisp.wordpress.com/2010/07/02/higher-rank-polymorphism-in-scala/)）

```
type Id[A] = A
trait ~>[F[_], G[_]] {
def apply[A](a: F[A]): G[A]
def isDefinedAt[A](a: A): Boolean} 
```

以及将部分函数转换为此特征的函数：

```
implicit def pft[B: ClassTag](f: PartialFunction[B, B])= new (Id ~> Id) {
def apply[A](a: A): A = f(a.asInstanceOf[B]).asInstanceOf[A]
def isDefinedAt[A: ClassTag](a: A)(implicit ev2: ClassTag[A]) : Boolean = /*type check*/
               f.isDefinedAt(a.asInstanceOf[B]) } 
```

所以我的问题是 isDefinedAt 方法。我必须在运行时检查 A 是否是 B 的实例。a.isInstanceOf[B] 由于类型擦除而不起作用。

我尝试使用 TypeTag/ClassTag 和 B 效果很好，但 A 的类型总是 Any。

那么，如何检查 A 是否是 B 的实例？

**更新：**我在这段代码中使用它：

```
 def map[A](f: Id ~> Id, x: A): A =
    {
      val y = x match {
        //many matches more on my own data structures
        case l : List[_] => l.map(map(f,_))
        case m : Map[_,_] => m.map(map(f,_))
        case (a,b) => (map(f,a),map(f,b))
        case a => a
      }
      if (f.isDefinedAt(y))
        f(y).asInstanceOf[A]
      else
        y.asInstanceOf[A]
    } 
```

如果我直接使用 ~>，那么 typeTag[A].tpe <:< typeTag[B].tpe 一切正常。

但是如果我将它与这个映射函数一起使用，typeTag[A].tpe 总是 Any。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:18:12.703

如果您可以修改 isDefinedAt 的签名以采用 TypeTag，则可以通过以下方式实现 pft：

```
 type Id[A] = A
  trait ~>[F[_], G[_]] {
    def apply[A](a: F[A]): G[A]
    def isDefinedAt[A: TypeTag](a: A): Boolean
  }

  implicit def pft[B: TypeTag](f: PartialFunction[B, B]) = new (Id ~> Id) {
    def apply[A](a: A): A = f(a.asInstanceOf[B]).asInstanceOf[A]
    def isDefinedAt[A: TypeTag](a: A): Boolean =
      typeTag[A].tpe =:= typeTag[B].tpe && f.isDefinedAt(a.asInstanceOf[B])
  } 
```

此解决方案为两者获取一个[TypeTag](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.api.TypeTags$TypeTag)`B` ，并在委托给部分函数的方法`A`之前验证它们是否为同一类型。`isDefinedAt`有关类型标签的更多信息，请参阅[此答案](https://stackoverflow.com/a/12232195/547212)。

例如：

```
val halfEven: PartialFunction[Int, Int] = {
  case n if n % 2 == 0 => n / 2
}

val halfEvenT: Id ~> Id = halfEven

halfEvenT.isDefinedAt(1) // false
halfEvenT.isDefinedAt(2) // true
halfEvenT.isDefinedAt("test") // false 
```

更一般地说，您可以将受约束的部分转换定义为采用额外的更高种类的约束`A`：

```
 trait ConstrainedPartialTransformation[F[_], G[_], C[_]] {
    def apply[A: C](a: F[A]): G[A]
    def isDefinedAt[A: C](a: A): Boolean
  }

  implicit def cpft[B: TypeTag](f: PartialFunction[B, B]) = new ConstrainedPartialTransformation[Id, Id, TypeTag] {
    def apply[A: TypeTag](a: A) = f(a.asInstanceOf[B]).asInstanceOf[A]
    def isDefinedAt[A: TypeTag](a: A) =
      typeTag[A].tpe =:= typeTag[B].tpe && f.isDefinedAt(a.asInstanceOf[B])
  } 
```

这类似于 Scalaz 7 如何支持 A 上的上下文绑定的自然转换。请参阅Scalaz 7 中的[ConstrainedNaturalTransformation](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/NaturalTransformation.scala#L56)。

# java - Java 将读取的行拆分为字符串，然后使用它们

> ID：15448579
> 
> 赞同：0
> 
> 时间：2013-03-16T11:16:37.123
> 
> 标签：java, string, if-statement, io

所以我有代码

```
public void reply(){
    String fileName = "readLog.txt";
    String line = null;
    try {
        FileReader fileReader = 
            new FileReader(fileName);

        BufferedReader bufferedReader = 
            new BufferedReader(fileReader);

        while((line = bufferedReader.readLine()) != null) {
            Output.append(line);//output is name of textarea
        }   
        bufferedReader.close();         
    }
    catch(FileNotFoundException ex) {
        System.out.println(
            "Unable to open file '" + 
            fileName + "'");                
    }
    catch(IOException ex) {
        System.out.println(
            "Error reading file '" 
            + fileName + "'");                  
    }                   
    } 
```

它可以很好地读出文本文件中的内容，但我希望它读取第 1 行，并且在第 1 行中我会有类似的内容：

> 一个问题 - 一个答案

我想要它，这样它就可以将线条放在正确的位置，例如

> if("输入" == "一个问题") { somethinghappends(); }

我知道这不是您如何设置带有字符串的 if 语句的方式，这只是一个示例。

我该怎么做呢？（我环顾互联网并没有发现太多用处）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:27:38.743

如果您的格式是：

一个问题 - 一个答案，

您可以执行以下操作：

```
String[] parts = line.split(" - ");
String question = parts[0];
String answer = parts[1]; 
```

考虑到破折号是分隔符。这是在读取每一行的循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:30:47.367

您可以使用[String.split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
while((line = bufferedReader.readLine()) != null) {
    String[] parts = line.split("-");

    if (parts.length >= 2 && parts[0].trim().equals(parts[1].trim())) {
        doSomethingHere();
    }
} 
```

在比较它们之前，我还使用[String.trim()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim%28%29)删除问题和答案周围的前导和尾随空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T11:32:33.907

所以你有一个问题字符串，想在 readLog 中找到合适的答案。

最好的方法是将您的答案拆分为“ - ”。（更好的分隔符是“\t”，因为“-”也可能是问题/答案的一部分。）

```
String q="question";
String qa="question - answer";
String[] split = qa.split(" - ");
if(split[0].equals(q)){
    do something;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:28:34.273

您可以使用该`bufferedreader.readline()`方法从流中读取，直到找到所需的行。获取数据并对其进行处理。您可以使用该`equals()`方法进行比较。您最终可以使用分割字符串`split()`并将其存储在数组中。

# c# - 不再需要时将变量设置为 null

> ID：15448580
> 
> 赞同：0
> 
> 时间：2013-03-16T11:17:01.327
> 
> 标签：c#

假设我有一个数据表数组，对于该数组中的每个数据表，我将启动一个线程来进行一些处理。

```
class someclass()
    {
        private DataTable[] DataTableArray;

        someclass(DataTable sometable)
        {
            //divide sometable and distribute them to  DataTableArray
        }

        private void startThreads()
        {

             for (int i = 0; i < DataTableArray.Count(); i++)
                {
                    Task.Factory.StartNew(() => Downloader(DataTableArray[i]));
                }

                DataTableArray = null; //is this line necessary?
        }
    } 
```

在我的`startThreads()`

1.  启动所有线程后，我可以设置 DataTableArray = null 吗？
2.  我想按值传递数据表，它们是否按值传递默认值？这就是为什么我想将其设置为 null 因为不再需要该数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:20:47.273

.NET 运行时将处理不再需要的任何对象，您无需指定对象为空。除非在紧急情况下，否则您也不需要自己致电垃圾收集器。

所以答案是否定的。那条线是不必要的，在我看来，不推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:00:35.743

每个人都很快忽略了这一点，但它实际上并不是完全没用的。大多数将对象设置为 null 的代码都会被抖动优化器优化掉，而不是这个。因为它将*字段*设置为空，而不是局部变量。

在某些极端情况下，删除对数组的引用可以获得回报。特别是当数组很大时，超过 21250 个元素。将数组引用设置为 null 可以让其提前被垃圾回收，比正常情况更早。这就是“someclass”对象被垃圾收集的时候。

再说一次，在这种特定情况下，数组中最好不要有数万个元素，这会给线程池带来很大压力。所以理想情况下，这将是一个你永远不会注意到的微优化。

# macos - 已安装 libtool 但未找到 libtoolize

> ID：15448582
> 
> 赞同：42
> 
> 时间：2013-03-16T11:17:15.383
> 
> 标签：macos, libxml2, autotools, autoconf, libtool

我正在尝试`libxml2`在我的 Mac 上从源代码构建。

所以我有`autoconf`, `libtool`, 并`automake`使用[macports安装](https://macports.org/)

`autoconf`并且`automake`似乎按预期工作正常。

我试着先跑`autogen.sh`。

`libtoolize --version`不幸的是

```
-bash: libtoolize: command not found 
```

我尝试跑步（再次）

```
sudo port install libtool

--->  Cleaning libtool
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found. 
```

我试试

```
locate libtool 
```

它似乎安装得很好

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/libtool
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/share/man/man1/libtool.1
/Applications/Xcode.app/Contents/Developer/usr/bin/libtool
/Applications/Xcode.app/Contents/Developer/usr/share/man/man1/libtool.1
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/cross/mipsel-linux-binutils/files/110-uclibc-libtool-conf.patch
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libtool
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libtool/Portfile
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libtool/files
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libtool/files/ltmain.m4sh-allow-clang-stdlib.diff
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libtool-devel
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libtool-devel/Portfile
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/openslp/files/libtool-tags.patch
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/t1lib/files/patch-libtool-tag.diff
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/print/pdflib/files/patch-libtool.diff
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/security/steghide/files/libtool-tag.diff
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/www/apache2/files/libtool-tag.diff
/usr/bin/libtool
/usr/lib/php/build/libtool.m4
/usr/share/apr-1/build-1/libtool
/usr/share/man/man1/libtool.1 
```

我怎么`libtoolize`去上班？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-16T11:47:18.280

您通常需要使用`glibtool`and `glibtoolize`，因为`libtool`OS X 上已经存在作为创建 Mach-O 动态库的二进制工具。因此，这就是 MacPorts 安装它的方式，使用程序名称转换，尽管端口本身仍被命名为“libtool”。

一些`autogen.sh`脚本（或它们的等价物）将尊重`LIBTOOL`/`LIBTOOLIZE`环境变量。我自己的`autogen.sh`脚本中有一行：

```
case `uname` in Darwin*) glibtoolize --copy ;;
  *) libtoolize --copy ;; esac 
```

你可能想要也可能不想要这个`--copy`标志。

* * *

注意：如果您使用 MacPorts 安装了自动工具，正确编写`configure.ac`的`Makefile.am`文件应该只需要`autoreconf -fvi`. 它应该按预期调用`glibtoolize`等。否则，某些软件包将分发一个`autogen.sh`或类似的脚本。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-10-03T17:54:00.790

希望我的回答不要太天真。我是 OSX 的菜鸟。

[brew](http://brew.sh/) install libtool 为我解决了类似的问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-10-15T16:31:07.503

当您使用**brew**`libtoolize`安装时，安装了几个线程。这可以通过以下方式实现；安装它，然后为 libtoolize 创建一个软链接：`glibtoolize``libtool`

 **```
brew install libtool
ln -s /usr/local/bin/glibtoolize /usr/local/bin/libtoolize 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-29T23:04:25.457

Brew 的替代方法是使用`macports`. 例如：

```
$ port info libtool
libtool @2.4.6_5 (devel, sysutils)
Variants:             universal

Description:          GNU libtool is a generic library support script. Libtool hides the complexity of using shared libraries behind a consistent, portable interface.
Homepage:             https://www.gnu.org/software/libtool

Build Dependencies:   xattr
Platforms:            darwin, freebsd
License:              libtool
Maintainers:          Email: larryv@macports.org, GitHub: larryv 
```

然后像 Brew 一样，您可以：

```
$ sudo port install libtool
Password:
--->  Fetching archive for libtool
--->  Attempting to fetch libtool-2.4.6_5.darwin_15.x86_64.tbz2 from https://packages.macports.org/libtool
--->  Attempting to fetch libtool-2.4.6_5.darwin_15.x86_64.tbz2.rmd160 from https://packages.macports.org/libtool
--->  Installing libtool @2.4.6_5
--->  Activating libtool @2.4.6_5
--->  Cleaning libtool
--->  Updating database of binaries
--->  Updating database of C++ stdlib usage
--->  Scanning binaries for linking errors
--->  No broken files found.                             
--->  No broken ports found. 
```

然后你可以检查它的位置......顺便说一句，你可以将 glibtoolize 软链接到 libtoolize。对于我的需要，两者都可以

```
$ which glibtoolize
/opt/local/bin/glibtoolize 
```**

# python - Python - 从列表中生成元组

> ID：15448584
> 
> 赞同：0
> 
> 时间：2013-03-16T11:17:39.097
> 
> 标签：python, list, tuples

我有 2 个列表`a = [2, 6, 12, 13, 1, 4, 5]`和`b = [12, 1]`. list 中的元素是 list`b`的子集`a`。

从上面的一对列表中，我需要创建一个元组列表，如下所示：

```
[(12,6),(12,2),(1,13),(1,12),(1,6),(1,2)] 
```

`b`基本上，在 list和 list的交点处`a`，所以从上面来看，例如`a`，`b`第一个交点在 index 处`2`，即 value `12`。`b`因此，使用 list 中的第一个元素和 list中的第二个元素创建一个元组`a`。我正在python中尝试这个，有什么建议可以有效地创建这个元组吗？请注意，每个列表中可以包含 100 个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:24:35.767

我认为这就是你想要的：

```
In [11]: a=[2,6,12,13,1,4,5]

In [12]: b=[12,1]

In [13]: ans=[]

In [14]: for x in b:
    ind=a.index(x)     #find the index of element in a
    for y in a[:ind]:  #iterate up to that index and append the tuple to a new list 
        ans.append((x,y))
   ....:         

In [15]: ans
Out[15]: [(12, 2), (12, 6), (1, 2), (1, 6), (1, 12), (1, 13)] 
```

使用`list comprehension`：

```
In [16]: [(x,y) for x in b for y in a[:a.index(x)]]
Out[16]: [(12, 2), (12, 6), (1, 2), (1, 6), (1, 12), (1, 13)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T11:39:43.737

那这个呢：

```
a = [2, 6, 12, 13, 1, 4, 5]
b = [12, 1]

sum([ [ (bb,aa) for aa in a[0:a.index(bb)]] for bb in b], []) 
```

结果是：

```
[(12, 2), (12, 6), (1, 2), (1, 6), (1, 12), (1, 13)] 
```

它以原始顺序返回列表，而您的示例返回反向列表。如果这是一个问题，您可以轻松地扭转它们。

# internet-explorer - XPiNC 使用的是什么版本的 IE？

> ID：15448586
> 
> 赞同：0
> 
> 时间：2013-03-16T11:18:09.950
> 
> 标签：internet-explorer, xpages, lotus-notes, xpinc

您应该能够在嵌入式浏览器之间切换：http: [//www.wissel.net/blog/d6plinks/SHWL-8M4KG2](http://www.wissel.net/blog/d6plinks/SHWL-8M4KG2)

但我无法让它工作。在我的情况下，如果默认在 Win7 上使用 Mozilla - IBM Notes 8.5.3FP3 UP1。

有谁知道我的 Notes 版本附带的 IE 版本？我怀疑它与操作系统安装的版本不同（？）。

谢谢！

/J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:40:24.260

IE 是 (C) 微软和 IBM 将无法发布它（Chromium，Chrome 核心）将是另一回事。XULrunner 是 Firefox 的姊妹版，它能够提供与 Notes 客户端的集成，例如打开新窗口或发送/接收复合事件。XULrunner 已经被 Mozilla 团队忽略了（有时他们甚至想放弃它，所以 IBM 不得不介入），所以认为适合 XPiNC 使用的版本仍然是 3.6，这里需要一些升级工作（我没有在此处了解 IBM 的计划）

# php - MODX 空仪表板

> ID：15448589
> 
> 赞同：2
> 
> 时间：2013-03-16T11:18:19.680
> 
> 标签：php, modx, modx-revolution

我第一次使用MODX，从昨天开始一切正常。我没有改变任何东西，仪表板和包管理器工作没有任何问题，但从昨天开始我看不到仪表板本身，只有后端/管理管理器的顶部导航菜单和带有资源、元素的左侧边栏菜单和文件选项卡。除了这个空的仪表板之外，包管理器也不起作用。它只显示表格标题，如名称、版本、版本等，没有表格正文。

我认为也许 MODX Rest API 坏了？我的包管理器来源是[http://rest.modx.com/extras/](http://rest.modx.com/extras/)并且它在几天前工作。我也尝试过[http://rest.modxcms.com/extras/](http://rest.modxcms.com/extras/)但它也不起作用（返回 404）。

我正在使用 MODX Revolution 2.2.6pl，我也没有更改服务器配置上的任何内容，因此在我的 PHP 5.2.9 中仍然启用了 allow_url_open 和 curl。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T21:24:54.613

我在空白后端面临同样的问题 - 你的主机是什么？我在strato。

您可以禁用“compress_css”和“compress_js”而不是它再次工作。

您可以在

```
/core/cache/system_settings/config_cache.php 
```

寻找

```
'compress_css' => '1',
'compress_js' => '1', 
```

并将其设置为：

```
 'compress_css' => '0',
  'compress_js' => '0', 
```

在您可以再次进入后端之后：非常重要 -> 直接进入您的系统设置并搜索“压缩” - 再次打开`compress_js`and `compress_css`。

现在它可以工作了。我为此苦苦挣扎... :-)

广告

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T11:35:28.893

听起来好像您无法连接到 MODX 休息服务器。[http://rest.modx.com/extras/](http://rest.modx.com/extras/)不会在您的浏览器中返回任何内容。它目前正在运行。我已经在外部站点和本地主机站点上进行了确认，并且连接到服务器没有问题。在[MODX 论坛上寻求帮助可能会更好](http://forums.modx.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:58:50.887

只是仪表板和包管理器不起作用吗？还是经理中的一切？

一些基本的 modx 故障排除： - 首先清除缓存，发生任何奇怪的事情，在你做任何事情之前清除缓存，如果由于某种原因你无法在管理器中清除它 - 删除 /core/cache/ 下的所有内容，当你在它检查网络服务器用户是否可以写入该目录 [/core/cache/] - 在系统设置中打开游览错误日志并查看错误日志必须说什么 - 启用 php 日志记录并检查您的网络服务器日志 - 关闭 css 和在您的系统设置中使用 Node.js 压缩 [您可能还必须编辑数据库表才能执行此操作]

再次检查您的 php 设置，我 [过去] 在 Plesk apache 重新启动“重新应用”我已更改的默认 php 设置时遇到了问题 [安全模式、会话路径等]

如果您没有摆弄 modx，那么它很可能是缓存或环境更改。

# python - 如何在python中将元素添加到3维数组

> ID：15448594
> 
> 赞同：12
> 
> 时间：2013-03-16T11:19:00.560
> 
> 标签：python, arrays, multidimensional-array

我正在尝试将数据存储在三维数组中，即`x[0][0][0]`在 Python 中。如何初始化`x`并为其添加值？我试过这个：

```
x=[]
x[0][0][0]=value1 
x[0][0].append(value1) 
```

两条线都给出超出范围的错误。怎么做？我希望它像：`x[0][0][0]=value1`，`x[1][0][0]=value2`等`x[0][1][0]=value3`。如何在 Python 中实现这一点？

我正在寻找生成这种数组：

```
x=[[[11,[111],[112]],[12],[13]],[[21,[211],[212]],[22],[23],[24]],[[31],[32]]]
x[0][0][0] will give 11
x[1][0][0]  21
x[0][0][1] 111 
```

等等

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-16T11:24:45.183

我建议使用[`numpy`](http://www.numpy.org/)多维数组。它使它更方便，也更快。这看起来像：

```
import numpy as np
x = np.zeros((10,20,30)) # Make a 10 by 20 by 30 array
x[0,0,0] = value1 
```

不过，如果您不想使用`numpy`，或需要非矩形多维数组，则需要将其视为列表列表，并初始化每个列表：

```
x = []
x.append([])
x[0].append([])
x[0][0].append(value1) 
```

编辑：或者您可以使用 ndpu 的答案 ( `x = [[[value1]]]`) 中显示的紧凑符号。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T12:37:19.417

如果您正在创建一些 3D 稀疏数组，则可以将所有数据保存在 dict 中：

```
x={}
x[0,0,0] = 11
x[1,0,0] = 21
x[0,1,1] = 111 
```

或者：

```
from collections import defaultdict
x = defaultdict(lambda :defaultdict(lambda :defaultdict(int)))

x[0][0][0] = 11
x[1][0][0] = 21
x[0][0][1] = 111 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T11:22:51.663

如果可以使用 numpy，则可以将固定大小的数组初始化为：

```
import numpy
x = numpy.zeros((i, j, k)) 
```

其中 i、j 和 k 是所需的尺寸。

然后，您可以使用切片表示法对该数组进行索引：

```
x[0, 0, 0] = value1
x[1, 0, 0] = value2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-01T02:04:45.980

我刚想出这个，它更加动态和简单。

```
# Define how large to make the object.
size = 3

# Build the three dimensional list.
memory = []
for x in range(0,size):
    memory.append([])
    for y in range(0,size):
        memory[x].append([])
        for z in range(0,size):
           memory[x][y].append(0) # Fill with zeros.

# Iterate through all values.
for x in range(0,size):
    for y in range(0,size):
        for z in range(0,size):
            print 'memory[' + str(x) + '][' + str(y) + '][' + str(z) + ']=' + str(memory[x][y][z])

# Example access.
print 'Example access:'
print 'memory[0][1][2]=' + str(memory[0][1][2]) 
```

输出：

```
memory[0][0][0]=0
memory[0][0][1]=0
memory[0][0][2]=0
memory[0][1][0]=0
memory[0][1][1]=0
memory[0][1][2]=0
memory[0][2][0]=0
memory[0][2][1]=0
memory[0][2][2]=0
memory[1][0][0]=0
memory[1][0][1]=0
memory[1][0][2]=0
memory[1][1][0]=0
memory[1][1][1]=0
memory[1][1][2]=0
memory[1][2][0]=0
memory[1][2][1]=0
memory[1][2][2]=0
memory[2][0][0]=0
memory[2][0][1]=0
memory[2][0][2]=0
memory[2][1][0]=0
memory[2][1][1]=0
memory[2][1][2]=0
memory[2][2][0]=0
memory[2][2][1]=0
memory[2][2][2]=0
Example access:
memory[0][1][2]=0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-16T11:27:36.390

```
>>> x=[[[[]]]]
>>> x[0][0][0]=0
>>> x
[[[0]]]
>>> x[0][0].append(1)
>>> x
[[[0, 1]]] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-16T10:18:52.643

上述关于有效创建二维*字典*的技术汇编是：

```
from collections import defaultdict
x = defaultdict(lambda :defaultdict())
x["a"]["b"] = 123
x["a"]["c"] = 234
x["b"]["a"] = 234    
x["b"]["c"] = 234    
x["c"]["a"] = 234
x["c"]["b"] = 234
for i in x: 
    for j in x[i]: print i, j, x[i][j] 
```

产生：

```
a c 234
a b 123
c a 234
c b 234
b a 234
b c 234 
```

要增加维度的数量（例如，增加到三个维度），只需增加 lambda“nest”，如 HYRY 所示：

```
x = defaultdict(lambda :defaultdict(lambda :defaultdict(int))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-07T12:01:56.237

互动者。我使用函数 lambda 在 python 3 中使用 [ [ 0 for j in range(n)] for i in range(m) ] 创建矩阵。在版本 2 中，使用了 map 函数。在这一刻想像使用数组模块（纯python）来创建矩阵。

```
>>> arr = lambda m,n,l : [ [ [0 for k in range(l)] for j in range(n)] for i in range(m) ]
>>> m = arr(2,3,4)
>>> m
    [[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]] 
```

# c - 从 Postgresql 数据库中检索图像文件返回插入两倍大的数据（通过 libpq 库）

> ID：15448596
> 
> 赞同：0
> 
> 时间：2013-03-16T11:19:16.013
> 
> 标签：c, postgresql, libpq, bytea

我正在使用 Postgresql 数据库的 libpq 库，我在从 db 中检索 bytea 数据时遇到问题。我无法解决我的问题，所以想问你。每当我尝试将图像文件插入 db 并取回时，返回数据的大小始终是我发送的数据的 2 倍。实际上，确切的等式是：检索到的数据 = 发送的数据 * 2 + 2.（以字节为单位）。所以，我还想不通，我可能遗漏了一些东西：/

我使用的示例代码如下：

```
PGresult*    res;
const char*  paramValues[1] = {plateImageArray.data()}; // data type is const char*
int          paramLengths[1] = {plateImageArray.size()}; // size of image is 58573 bytes
int          paramFormats[1] = {1}; // 1 for byte, 0 for text

res = PQexecParams(conn,
        "INSERT INTO \"plates\" (plateImage) VALUES ($1::bytea)",
        1,               /* param number */
        NULL,            /* param type */
        paramValues,     /* param values*/
        paramLengths,    /* param lengths */
        paramFormats,    /* default to all text params */
        1);              /* return type, 1 for text. */

res = PQexec(conn,"Select * from \"plate_images\" WHERE ...."); /*returns 1 tuple : something / something / image(bytea) */

int lengthOfPlateImage=PQgetlength(res,0,2); // indicates 117148 bytes, exactly 2 times of sent data +2 
```

如果你们帮助我，我将不胜感激。我对寻找它的原因感到非常无聊。

提前致谢。

编辑：我跟踪存储在磁盘中的数据，插入数据的大小相同（58573 字节）。获取数据时，数据会变大两倍...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:36:12.987

好的，使用“PQexec”命令进行的查询以文本格式返回值，并且它没有参数来告诉您是想要文本格式还是字节格式的结果。我不确定是否存在更好和更合适的命令来查询它，但我使用了“PQexecParams”并将返回类型设置为 1（1 表示字节，0 表示文本），它返回了具有预期大小的确切数据。无论如何谢谢。

# jquery - css 加载较晚，因此 html 看起来很奇怪

> ID：15448597
> 
> 赞同：13
> 
> 时间：2013-03-16T11:19:17.540
> 
> 标签：jquery, html, css

我有一个常见问题，我有一个用 HTML、CSS 和 JQuery 完成的网页。当页面开始加载时，它首先加载 html 并显示 div 秒，这些 div 应该被 css 和 jquery 隐藏。但一秒钟后，它看起来很完美。但是第一秒看起来很糟糕。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:35:59.387

我没有这样的经验，但我认为脚本的加载过程在这里应该有所帮助。根据页面的用途（我不知道），我更喜欢您尝试以这种方式加载。

使用 CSS 显示 div

```
<div style="display: none;">Hidden by default</div> 
```

在你的 body 标签关闭之前加载你的 JQuery 文件。

当页面完全加载时，它可以正常运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T11:34:59.447

`$(this).hide();`或`$(this).addClass('.hidden');`总是比`.class { display:none; }`

jQuery 必须等待 DOM 加载。CSS没有。设置您的 CSS 以隐藏加载时需要隐藏的元素，然后使用 jQuery 显示这些元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T11:24:02.527

一个肮脏的解决方案是内联 css：

```
<div style="display: none;">This will be hidden</div> 
```

更好的解决方案是使用 javascript 按需构建这些元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T11:42:22.830

如果您希望您的 css 更快地呈现，最好将隐藏 css 语句移动到它们自己的小文件中，或者更好地将隐藏 css 实际添加到`<style>`页面上的标签中。这意味着它们几乎立即被渲染。

关于 jQuery——正如 Scott 所提到的——你能期望的最快的就是在`dom ready`. 如果您正在等待窗口加载，这将更慢。使用纯 javascript，您可以在页面中需要隐藏的元素之后放置脚本标签。然后，您可以直接使用它们来定位它们并将它们`doument.getElementById`设置`display`为`none`，而无需等待页面准备就绪。

# regex - 与环视相关的正则表达式

> ID：15448599
> 
> 赞同：1
> 
> 时间：2013-03-16T11:19:25.597
> 
> 标签：regex, regex-lookarounds

设计一个正则表达式来提取子字符串的前两位数字：

1.  以字母结尾
2.  从 2 开始

所以 from `"234b342d3"`，匹配结果应该是：
`23`(from `234b`)
`2d`(from `2d`)

我的大致答案是`"(?=1.*)[a-zA-Z]"`，但看起来它不起作用。

我会感谢你的每一个回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:55:41.350

我假设你的意思是`(?=2.*)...`。

`(?=2.*)`表示下一个字符`2`后跟一个或多个任何内容。但是然后正则表达式说下一个字符必须是`[a-zA-Z]`，所以什么都不会匹​​配（因为一个字符不能`2`同时`[a-zA-Z]`是。

仅删除前瞻 ( `2.*[a-zA-Z]`) 是朝着正确方向迈出的一步，但以下内容仍然是错误的：

*   不会将前 2 个字符放在一个组中，以便您可以提取它
*   贪婪匹配（`.*`将贪婪匹配，所以`234b342d`而不是只是`234b`, 并且`2d`不会匹配，因为它已经被上一个匹配覆盖了）

因此，将前 2 个字符放在括号中以将其放在一个组中并添加非贪婪匹配（`.*?`而不是`.*`）（`(2.).*?[a-zA-Z]`）。但现在：

*   2 后跟一个字母不匹配

所以我们需要添加look-behind来解决这个问题。

**所以最后我们得到：**

```
(2.)((?<=[a-zA-Z])|.*?[a-zA-Z]) 
```

然后提取第一组（如何做到这一点取决于语言）。

`(2.)`确保它以 2 开头并将前 2 个字符放在一个组中。在您的示例中
`(?<=[a-zA-Z])`向后考虑（a后跟一个字母）是非贪婪匹配- 意味着以一个字符结尾`2d``2`
`.*?`
`[a-zA-Z]`

# opengl-3 - OpenGL中的平移和旋转？

> ID：15448601
> 
> 赞同：0
> 
> 时间：2013-03-16T11:19:28.483
> 
> 标签：opengl-3

我正在研究 OpenGL Superbible（第 4 版）。第 4 章有一个电子围绕原子核旋转的例子。（基本上是一个大球体的小球体）。

这是渲染函数的摘录，它在原子核（另一个球体）周围的特定位置绘制一个电子（一个球体）。`fElect1`是一个在每次调用渲染时增加 10 度的角度。

```
glPushMatrix();
glRotatef(360.0f-45.0f,0.0f, 0.0f, 1.0f);
glRotatef(fElect1, 0.0f, 1.0f, 0.0f);
glTranslatef(0.0f, 0.0f, 60.0f);
glColor3ub(56,136,21);
glutSolidSphere(6.0f, 15, 15);
glPopMatrix() 
```

所以 - 他将视图围绕 z 轴旋转了 315 度。然后将视图围绕新旋转的 y 轴旋转角度`fElect1`，然后绘制球体。即，他想模拟电子绕 y 轴的轨道。结果是电子似乎在围绕球体的“倾斜”轨道上移动（倾斜是因为 x 轴倾斜了 315 度）。

但我的问题是——他为什么要在 z 轴上平移？这是否意味着电子有一种轨道，其中原子核不在其路径的中心？但是当我运行模拟时它看起来不像那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:31:56.997

我想也许你从错误的方向考虑操作。它们在 GL 中应用的方式，首先应用最“全局”的转换，最后应用最“本地”的转换。因此，在考虑某些事物将如何转变时，您可能需要以相反的顺序来考虑它们。

所以：

*   您的球体是在原点生成的
*   这在 Z 中被翻译了 60 个单位。
*   然后它围绕 Y 轴旋转（因此它现在在 XZ 平面中以 60 个单位的距离绕原点运行）。
*   最后，一切都围绕 Z 轴旋转，产生倾斜。
*   这将通过任何先前的变换进一步变换，例如已经应用于“原子”和相机的任何变换。

# c# - 用于显示具有时间间隔的开始/结束点的 sql 查询

> ID：15448603
> 
> 赞同：1
> 
> 时间：2013-03-16T11:19:54.130
> 
> 标签：c#, asp.net, sql, tsql, sql-server-2005

我有一个名为 vehicle_Summary 的表，数据类似于：

```
A_Date                         vehicle_Name        Location_Name
2012-02-08 09:36:20.000        AA000AA               Denver
2012-03-08 09:36:20.000        AA000AA               Tokyo
2012-04-08 09:30:50.000        AA000AA               Melbourne
2012-12-08 09:36:20.000        AA000AA               Geneva
2012-22-08 00:00:00.000        AA000AA               NY 

2012-01-08 09:36:20.000        DPT011                Hobart
2012-03-08 09:36:20.000        DPT011                Tasmania
2012-04-08 09:30:50.000        DPT011                Java
2012-12-08 09:36:20.000        DPT011                Manila
2012-22-08 00:00:00.000        DPT011                Singapore 
```

我有 vehicle_Info 表作为

```
vehicle_Name

DPT011
AA000AA
Z400 
```

所以首先我从vehicle_Info表中搜索所有车辆，当我在vehicle_Summary上查询两个时间间隔时说2012-02-08 04:44:44.444和2012-12-08 09:44:44.444

我期望的是

```
vehicleName                     start_Point                   end_Point
AA000AA                         Denver                        Geneva
DPT011                          Tasmania                      Manila 
```

我使用 MS Sql server 2k5，我希望它作为查询而不是在 C# 中执行手动逻辑。这可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:24:21.030

假设 A_Date 为`Datetime`，您可以使用`Between`运算符来获得如下结果：-

```
WHERE A_Date Between '1/20/2009' And '2/21/2009' 
```

或尝试这样：-

```
WHERE startdate >= startdate AND enddate <=enddate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:40:36.893

你可以这样做：

```
WITH CTE
AS
(
  SELECT
    vehicle_name,
    MIN(A_Date) AS StartDate,
    MAX(A_Date) AS EndDate
  FROM vehicle_Summary
  WHERE A_Date BETWEEN '2012-08-02 04:44:44.444'
                   AND '2012-08-12 09:44:44.444'
  GROUP BY vehicle_name
)
SELECT 
  c.vehicle_name, 
  s.Location_name AS start_Point, 
  e.Location_name AS end_Point
FROM CTE AS c
INNER JOIN vehicle_summary s  ON s.vehicle_name = c.vehicle_name
                             AND s.A_Date       = c.StartDate 
INNER JOIN vehicle_summary e  ON e.vehicle_name = c.vehicle_name
                             AND e.A_Date       = c.EndDate; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/68328/2)

这会给你：

```
| VEHICLE_NAME | START_POINT | END_POINT |
------------------------------------------
|      AA000AA |      Denver |    Geneva |
|       DPT011 |    Tasmania |    Manila | 
```

* * *

## 更新 1

您还可以`JOIN`从另一个表中获取车辆名称：

```
WITH CTE
AS
(
  SELECT
    i.vehicle_id,
    i.vehicle_name,
    MIN(s.A_Date) AS StartDate,
    MAX(s.A_Date) AS EndDate
  FROM vehicle_Summary AS s
  INNER JOIN vehicle_Info AS i ON s.vehicle_id = i.vehicle_id
  WHERE s.A_Date BETWEEN '2012-08-02 04:44:44.444'
                   AND '2012-08-12 09:44:44.444'
  GROUP BY i.vehicle_id,
           i.vehicle_name
)
SELECT 
  c.vehicle_name, 
  s.Location_name AS start_Point, 
  e.Location_name AS end_Point
FROM CTE AS c
INNER JOIN vehicle_summary s  ON s.vehicle_id = c.vehicle_id
                             AND s.A_Date     = c.StartDate
INNER JOIN vehicle_summary e  ON e.A_Date     = c.EndDate
                             AND e.vehicle_id = c.vehicle_id; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/7238b/5)

# jquery - 如何获取当前上传文件的百分比

> ID：15448604
> 
> 赞同：0
> 
> 时间：2013-03-16T11:20:13.217
> 
> 标签：jquery, jquery-file-upload

```
progress: function (e, data) {

    //$('#file_upload_progress').val(data.progressInterval);
    $('#file_upload_progress2').css('width', data.progressInterval + '%');
    console.log(data.progressInterval);
    /*
        for(a in data) {
            alert(a);           
        }
    */
} 
```

我正在使用 Jquery 文件上传器，当我使用`data.progressInterval`我得到 100% 时，这是获取 % 的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:29:59.270

尝试这个 ：

```
progress: function (e, data) {
    $('#file_upload_progress2').css('width', parseInt(t.loaded/t.total*100,10) + '%')
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:30:34.323

XMLHttpRequest Level 2 具有这些功能。请参阅[使用进度事件监控数据传输](http://dev.opera.com/articles/view/xhr2/ "XMLHttpRequest Level 2 简介")

# uml - 如何在 UML 用例描述中格式化分支语句（while/if-else）？

> ID：15448606
> 
> 赞同：2
> 
> 时间：2013-03-16T11:20:21.453
> 
> 标签：uml, use-case

应该如何在 UML 用例描述中编写分支语句？这是我正在建模的情况 -

员工必须通过读卡器刷卡才能上班。系统发出声音，表示读取成功或失败。如果读取失败 3 次，用户可以选择手动将他们的详细信息输入 PC。

这是我所做的用例描述，所有 if/else 似乎都非常尴尬和不清楚。这是应该编写用例描述的方式还是有更好的方法？

![在此处输入图像描述](../Images/092080a83f511b6eb65dcd2d49ccc866.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:37:14.113

**UML 规范没有指定**在用例规范中显示分支的任何方式。但是，**建模者提出了一些建议**，其中之一与您已有的非常相似。在[UML 2 and The Unified Process](http://www.amazon.ca/UML-Unified-Process-Practical-Object-Oriented/dp/0321321278)（第 82 页）一书中介绍了一种这样的方法：

“使用关键字 'If' 和 'Else' 来指示流程中的分支。通过仔细使用缩进和编号，您可以清楚地指示 'If' 语句的主体。”

```
n. If condition
    n.1 Do something
    n.2 Do something else
    ...
n+1\. Else
    n+1.1 Do something
    n+1.2 Do something else
    ...
n+2\. ... 
```

请注意，您可能希望**删除“end if”短语**。本书还介绍了其他关键词，如“For”和“While”。

但是，根据我的个人经验；复杂的用例流在以文本形式表达时不会被任何人阅读。我在业内见过的最好的方法是**使用活动图**来显示用例的主要流程。这是有一个包含所有其他部分（前置条件、后置条件、名称、描述、主要和次要参与者和......）的用例规范，但将流程部分留空并参考活动图，正如 @ 完全解释的那样哈维尔。但是，我会混合这两个图表，并通过活动分区（泳道）将用户和系统步骤分开。

序列图绝对不是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:06:38.043

对我来说，最好的办法是创建一个 UML 用例并用序列图描述它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:43:05.823

如果您将用例的行为写成文本，是的。否则，您可以通过活动图对其进行建模，其中包含描述用户和系统之间交互的**发送和接收操作。**

![活动图](../Images/d0374d3c5aea067fb3286717879218d9.png)

我不会选择序列图，因为它看起来与自然语言描述一样“尴尬”（由于*替代方案*和*循环*的嵌套），但它是另一种选择，正如其他答案中所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T13:54:17.143

用例图并非旨在表示您想要的信息。在你的情况下，我会使用序列图（看起来你已经有了泳道；）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-21T08:54:45.463

用例 UML 不使用 if/then/else 语句。用例使用备用流程：

主流

N 动作

N+1 个结果

N+2 动作 a1

交替流

N 动作

N+1 个结果 b

N+2 动作 a2

这是用例规范

如果动作 a 的结果是结果 a 则执行 a1

否则，如果操作 a 的结果是结果 b，则执行 a2

万一

# c# - 为什么参数在我的 INSERT 语句中不起作用？

> ID：15448615
> 
> 赞同：1
> 
> 时间：2013-03-16T11:21:26.603
> 
> 标签：c#, sql, winforms, sql-server-ce, sql-insert

我正在尝试使用参数向数据库中插入一些信息，但不是添加参数值，而是将参数名称添加到数据库中。这是我的代码：

```
 try {              
     vSqlCeConnection.Open();
      SqlCeCommand vCommand = new SqlCeCommand(@"INSERT INTO  BusinessCards 
                               (  CalligraphyNeeded , Comments , NameEnglish 
                               , JobTitleEnglish , NameArabic , JobTitleArabic
                                ,BOBOX , HomePhoneNumber 
                               , FAXNumber , OfficePhoneNumber , MobileNumber , Email )
                         VALUES
                               (   @CalligraphyNeeded, '@Comments' ,'@NameEnglish' 
                                ,'@JobTitleEnglish' ,'@NameArabic' ,'@JobTitleArabic'
                                ,'@BOBOX' ,'@HomePhoneNumber' 
                               ,'@FAXNumber' ,'@OfficePhoneNumber' ,'@MobileNumber'
                                ,'@Email'  )  " , vSqlCeConnection);

            if (checkBoxCalligraphy.Checked == true)
            {
                vCommand.Parameters.AddWithValue("@CalligraphyNeeded", 1);
            }
            else
            {
                vCommand.Parameters.AddWithValue("@CalligraphyNeeded", 0);
            }
            vCommand.Parameters.AddWithValue("@Comments", richTextBoxComments.Text );
            vCommand.Parameters.AddWithValue("@NameEnglish", textBoxEnglishName.Text);                vCommand.Parameters.AddWithValue("@JobTitleEnglish",richTextBoxEnglishJobTitle.Text);
            vCommand.Parameters.AddWithValue("@NameArabic", textBoxArabicName.Text + " ff");
            vCommand.Parameters.AddWithValue("@JobTitleArabic", richTextBoxArabicJobTiltle.Text + " ff");
            vCommand.Parameters.AddWithValue("@BOBOX", textBoxPOBox.Text + " ff");
            vCommand.Parameters.AddWithValue("@HomePhoneNumber", textBoxHomePhone.Text + " ff");
            vCommand.Parameters.AddWithValue("@FAXNumber", textBoxFax.Text + " ff");
            vCommand.Parameters.AddWithValue("@OfficePhoneNumber", textBoxOfficePhone.Text + " ff");
            vCommand.Parameters.AddWithValue("@MobileNumber", textBoxMobile.Text + " ff");
            vCommand.Parameters.AddWithValue("@Email", textBoxEmail.Text + " ff");
            MessageBox.Show(vCommand.CommandText);
            vCommand.Prepare();
                vCommand.ExecuteNonQuery();

        }
        catch (Exception ex)
        {
            MessageBox.Show("Sorry error: " + ex.Message);
        } 
```

但是当我执行代码时它给了我这个

![在此处输入图像描述](../Images/e5e0a81f53cb2d82844ca43d7a008cd0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:22:39.177

它不起作用的原因是因为参数用单引号引起来，导致它被转换为*字符串文字*，删除它们周围的单引号，它肯定会起作用。

参数是标识符而不是字符串文字，因此它们不能用单引号引起来。

```
VALUES
(   @CalligraphyNeeded, @Comments , @NameEnglish 
   ,@JobTitleEnglish , @NameArabic , @JobTitleArabic
   ,@BOBOX , @HomePhoneNumber 
   ,@FAXNumber , @OfficePhoneNumber , @MobileNumber
   ,@Email  
) 
```

# c# - 数据阅读器不显示第一行

> ID：15448616
> 
> 赞同：1
> 
> 时间：2013-03-16T11:21:32.820
> 
> 标签：c#, asp.net, sqldatareader, datareader

我正在循环访问我的数据库以显示与球员相关的联赛列表。如果玩家不是任何联赛的成员，则会显示一条消息告诉他们。

这是代码

```
if (dReader.Read())
{          
    while (dReader.Read())
    {
        usersLeagues.Text += "<li class=\"li-myLeagues\"><a  href=\"leagueDetails.aspx?leagueID=" + (dReader["leagueID"].ToString()) + "\">" + (dReader["leagueName"].ToString()) + "</a></li>";
    }
}
else
{
    usersLeagues.Text = "You are currently not a part of any leagues";
}
dReader.Close();
conn.Close(); 
```

问题是数据阅读器没有显示查询中的第一个联赛。

知道这是为什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T11:25:09.110

改变

```
if (dReader.Read()){ 
```

到

```
if (dReader.HasRows){ 
```

通过调用`Read()`in`if`语句，您实际上是在读取第一行数据。`Read()`在语句中再次调用`while`，会跳过第一个读取行。

您可以使用[`HasRows`](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.hasrows.aspx)属性来检查阅读器是否包含任何数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:26:55.010

if 语句正在读取第一条记录，因此当您点击 while 语句时，它已移至第二条结果。

# macos - 在雪豹上安装应用程序后，应用程序无处可去

> ID：15448622
> 
> 赞同：0
> 
> 时间：2013-03-16T11:22:43.987
> 
> 标签：macos, osx-snow-leopard, osx-mountain-lion, failed-installation

我最近在 Mountain Lion 上为 Mac 构建了一个应用程序。几天后，我在我的 Mac 上进行了 Snow Leopard 的全新安装。我在外部硬盘驱动器上有“my_app”.pkg 的备份，当我运行它时，它会正常进行安装。或者看起来是这样！完成安装后，它说“安装完成”，但“应用程序”文件夹或其他任何地方都没有出现。其他应用程序，正确安装没有问题。该应用程序必须在Mountain Lion下制作吗？提前谢谢你，尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:19:05.287

如果您自己构建应用程序，您确定.pkg 文件已正确构建吗？你测试了吗？

您可以从命令行使用 pkgutil 命令查看 pkg 声称已在您的系统上安装了哪些文件。

`pkgutil --pkgs`将列出您已安装的所有软件包。

`pkgutil --files <id from earlier command>`将列出软件包安装的文件。

`pkgutil --pkg-info <id from earlier command>`将显示您将软件包安装到哪个卷。

要查看实际的 .pkg 文件，您可以使用`pkgutil --bom file.pkg`. 这会将所有 bom（材料清单）文件提取到 /tmp 中，然后您可以使用`lsbom`. 这将告诉您安装程序想要安装什么。

希望这足以让你继续前进。如果不是，您可能需要在问题中添加一些额外的信息，例如上述某些命令的输出。

# android - 将parcelable类保存到文件中

> ID：15448623
> 
> 赞同：2
> 
> 时间：2013-03-16T11:22:45.493
> 
> 标签：android, serialization, parcelable

我正在使用可序列化的类来保存 xml 解析器结果，但是当我读到它在 Android 中非常慢时，我改成了 parcelable 类。

现在，我想将内容可打包类保存到文件中。

我该怎么做？

谢谢。问候。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T03:57:05.490

According to [Parcel API reference](http://developer.android.com/reference/android/os/Parcel.html)

> Parcel is not a general-purpose serialization mechanism. This class (and the corresponding Parcelable API for placing arbitrary objects into a Parcel) is designed as a high-performance IPC transport. As such, it is not appropriate to place any Parcel data in to persistent storage: changes in the underlying implementation of any of the data in the Parcel can render older data unreadable.

`Parcelable` is meant for `IPC` use only and is not designed to be persisted. So you have to convert your object into some sort of persistable data structures like `XML`, `JSON`, `Serializable`.

# concurrency - JMeter：为单个用户触发多个并发 HTTP 请求

> ID：15448625
> 
> 赞同：3
> 
> 时间：2013-03-16T11:23:10.833
> 
> 标签：concurrency, automated-tests, jmeter, session-cookies

我有一个带有线程组和 Cookie 管理器的 JMeter 负载测试脚本。

线程组中的用户首先使用 HTTP 采样器登录以获取 cookie。

然后一个循环控制器触发一个交错采样器，该采样器在几个 HTTP 采样器之间交替，这些 HTTP 采样器触发对服务器的查询。

现在我希望交错控制器的选项之一为同一用户触发两个或三个并发请求，在每个请求中发送相同的 cookie。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:47:56.460

如果您需要同时下载一个页面的资源，那么在 http sampler gui 的底部有一个复选框。但我想你已经知道了，所以你所做的似乎很好。

性能更好的变体是使用 Groovy + JSR223（添加缓存键以便编译只发生一次）。

是模拟 Ajax 调用还是其他什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:07:58.417

我们最终做了什么：

*   beanshell 采样器在登录请求后从 cookie 管理器中检索 sessionID cookie 值并将其设置在一个变量中。
*   另一个 beanshell 采样器作为子级添加到交错采样器中。这个 beanshell 采样器从变量中检索 cookie。然后它为每个请求启动一个新线程，该线程使用 cookie 值触发 HTTP 请求，并检查结果。原始的 beanshell 线程将所有启动的线程连接起来并组合结果。

这对编码来说相当麻烦。你能想出更好的方法吗？

# c++ - 在sql中使用来自c ++代码的变量

> ID：15448627
> 
> 赞同：0
> 
> 时间：2013-03-16T11:23:19.020
> 
> 标签：c++, sqlite

我现在正在使用 sqlite3。我想在 SELECT 中使用变量barcode_prog。我有带有表 PT 和列 BarCode 和 Name 的数据库 sql_db 文件。但我想在 SELECT 中使用任何字符串，它将在程序中设置。我在代码中的评论中问我的问题。请帮忙 ：）

```
#include "stdafx.h"
#include "sqlite3.h"
#include <iostream>

int data (void *unused, int field_num, char **value, char **field_name)
{
    for (int i = 0; i < field_num; i++)
    {
        std::cout << value[i] << " = " << field_name[i] << std::endl;
    }
    return 0;
}

int main()
{
    int error;
    char *barcode_prog = "4813538002837";
    char *errmsg;
    sqlite3 *db;
    char *sql = "SELECT * FROM PT WHERE ?"; // here i want to use barcode_prog like     "SELECT * FROM PT WHERE BarCode = barcode_prog"
    error = sqlite3_open("sql_db", &db);
    if (error != SQLITE_OK) 
    {
        std::cout << "Cannot read database" << sqlite3_errmsg(db) << std::endl;
    }

    error = sqlite3_exec(db, sql, data, 0, &errmsg);

    if (error != SQLITE_OK) 
    {
        std::cout << "ERROR!" << errmsg << std::endl;
        sqlite3_free(errmsg);
    }

    system ("pause");
    sqlite3_close(db);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:22:10.723

可能有几种方法可以做到这一点。我认为最简单的是使用std::stringstream。

```
// your code
std::stringstream stream;
stream << "SELECT * FROM PT WHERE BarCode = " << barcode_prog.
// ...
error = sqlite3_exec(db, stream.str().c_str(), data, 0, &errmsg);
//... 
```

# c++ - 生成随机 int 和 double 的 C++ 模板类

> ID：15448629
> 
> 赞同：0
> 
> 时间：2013-03-16T11:23:29.070
> 
> 标签：c++, templates, random, range, limit

我想要一个模板化的类，它在下限和上限之间生成随机数（两个限制都可以是负数）。这是我到目前为止所拥有的：

```
template <typename T>
T RandomGenerator<T>::generate(T lowerLimit, T upperLimit)
{
    static bool initialized = initialize();
    return double(rand()) * (upperLimit - lowerLimit) / RAND_MAX + lowerLimit;
}

template <typename T>
bool RandomGenerator<T>::initialize()
{
    srand(time(NULL));
}

int iVal = RandomGenerator<int>::generate(1, 10); //Generate integers between (and including) 1 and 10.
double dVal = RandomGenerator<double>::generate(-1, 1); //Generate doubles between (and including) -1 and 1. 
```

这会正确生成双精度值，但整数是关闭的。有谁知道如何为整数和双精度编写通用解决方案？我不想要整数和双精度的不同功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:46:05.743

当您生成一个介于 1 和 10 之间的数字时，您实际上会生成一个介于 1.0 到 10.0 之间的随机双精度数。

然后将其转换回整数时，该数字将被截断。所以 1.X 变为 1，2.X 变为 2，等等。10.X 将变为 10，但在该范围内生成的唯一值恰好是 10.0——这将是罕见的，因为它只发生在底层随机数的极端极限功能。

所以对于整数，你的范围计算是不合适的。

我真的建议只将您的模板专门用于整数。

请注意，这并不是真正的四舍五入问题 - 如果您四舍五入到最接近的值，则顶部和底部值的可能性将是其他值的一半。

此外，请不要简单地取平均值来计算您的随机生成是否正确 - 这将隐藏分布中的许多错误。例如，如果上限和下限的错误量相同，则平均值可能仍然正确（例如，调整舍入可能看起来正确，但实际上不正确）。或者你的数字可能在钟形曲线或其他东西上，而不是平坦的。计算直方图。

# android - 安卓源错误

> ID：15448632
> 
> 赞同：3
> 
> 时间：2013-03-16T11:23:50.437
> 
> 标签：android, python-2.7, tesseract

我正在尝试使用 Tesseract 制作 Android OCR 应用程序。我已按照以下教程中的说明进行操作：http: [//gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract)

我已经能够使用 ndk-build 成功构建代码。但是当我运行

```
android update project --PATH 
```

使用设置路径后

```
export PATH=$ANDROID_HOME/platform-tools 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "/usr/lib/command-not-found", line 21, in <module>
    os.execvp("python3", [sys.argv[0]] + sys.argv)
  File "/usr/lib/python2.7/os.py", line 344, in execvp
    _execvpe(file, args)
  File "/usr/lib/python2.7/os.py", line 380, in _execvpe
    func(fullname, *argrest)
OSError: [Errno 2] No such file or directory 
```

我用谷歌搜索了错误并找到了以下解决方案： [Android 源问题](http://forums.linuxmint.com/viewtopic.php?f=18&t=121665)

我将路径位置更改为

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games 
```

正如第二个链接中所建议的，但我得到了错误：android：找不到命令

我尝试安装最新版本的python，但它给出了与上面相同的错误。

我完全不知道这个错误是什么。

你能解释一下它的含义以及我如何摆脱它吗？

* * *

仍然收到以下错误：

```
Traceback (most recent call last):
  File "/usr/lib/command-not-found", line 21, in <module>
    os.execvp("python3", [sys.argv[0]] + sys.argv)
  File "/usr/lib/python2.7/os.py", line 344, in execvp
    _execvpe(file, args)
  File "/usr/lib/python2.7/os.py", line 380, in _execvpe
    func(fullname, *argrest)
OSError: [Errno 2] No such file or directory 
```

请帮助我弄清楚这意味着什么以及如何克服它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:04:33.187

更改后，您的`$PATH`环境变量不再包含 Android SDK 路径，因此您的 shell 无法找到该`android`命令。您首先要将 Android SDK 路径添加回您的 $PATH 变量。在您的控制台类型中：

`export PATH="$PATH:/path_to_the_Android_SDK/tools/"`

您第一次尝试更改 $PATH 似乎已经覆盖了它，而不是在它上面附加了一些东西。请注意，`$PATH:`如果您通过添加任何目录，则必须包含`export`.

`export PATH="$PATH:$ANDROID_HOME/platform-tools"`应该做的伎俩，假设`$ANDROID_HOME`已设置。`$ANDROID_HOME`应该等于您的 Android SDK 的路径，您应该会在其中看到 platform-tools 目录。

# c# - 单个 UNION 语句中不允许的子句

> ID：15448640
> 
> 赞同：0
> 
> 时间：2013-03-16T11:24:47.743
> 
> 标签：c#, java, sql, sql-server, database

我正在用 C# 和 Java 编写查询生成器，并且担心生成 UNION 语句。我知道 UNION 子句中的每个单独的语句都不能包含 ORDER BY 子句，而必须将其放在完整的 union 语句的末尾。还有其他我应该注意的条件吗？即通常适用于单个选择语句的条件，但是在放置在`UNION`语句中时会导致问题？据我所知，每个单独的语句都可以包含 GROUP BY、WHERE 和 HAVING。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:41:19.953

根据[SQL 语法规范](http://savage.net.au/SQL/sql-92.bnf.html)，返回多行的 select 语句是一个查询表达式，后跟一个可选`ORDER BY`子句：

```
<direct_select_statement:multiple_rows> ::=
    <query_expression> [ <order_by_clause> ] 
```

反过来，查询表达式定义为

```
<query_expression> ::= <non-join_query_expression> | <joined_table> 
```

并且非连接查询表达式`UNION`是指定的：

```
<non-join_query_expression>    ::= 
     <non-join_query_term>
 |     <query_expression> UNION [ ALL ] [ <corresponding_spec> ] <query_term>
 |     <query_expression> EXCEPT [ ALL ] [ <corresponding_spec> ] <query_term> 
```

因此，在子句`ORDER BY`中的单个查询表达式中使用在`UNION ALL`语法上是不正确的；没有其他类似的查询子句不能在 a 中使用`UNION`。

# r - R语言：如何分离数据集？

> ID：15448644
> 
> 赞同：-2
> 
> 时间：2013-03-16T11:25:24.147
> 
> 标签：r

我是初学者，谢谢你的帮助。R 代码将数据分成两组。权重 ≤ 10 个单位的观测子集，以及脑重 > 10 个单位的观测子集。听起来很简单，但对我来说很难，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:29:36.820

如果`weigth`值在数据框 ( `dat`) 的列中，您可以使用以下命令：

```
# subset with weight > 10 units
dat[dat$weight > 10, ]

# subset with weight <= 10 units
dat[dat$weight <= 10, ] 
```

或者，您可以生成一个包含两个数据框的列表：

```
split(dat, dat$weight > 10) 
```

# python - 从嵌套列表创建树结构列表

> ID：15448658
> 
> 赞同：4
> 
> 时间：2013-03-16T11:26:55.527
> 
> 标签：python, nested-lists

我有一个嵌套列表：

```
l = [[1], [2,3], [2,4], [2,5], [2,5,6], [2,5,7], [2,5,8],[2,5,8,9], [10],[11,12]] 
```

我需要列表位于树结构的嵌套列表中，例如：

```
l = [{1:[], 2:[3,4,{5: [6,7, {8: [9]}]}], 10: [], 11: [12]}] 
```

我已经阅读了这篇[文章](https://stackoverflow.com/questions/7727007/creating-a-tree-from-a-list-of-item-combinations)，它生成了一个我需要的类似树，但是它适用于对称的嵌套列表集。我尝试使用列表项的[groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)功能，但无法生成所需格式的列表。我想在 python 中有一些东西可以很容易地做到这一点，而我目前正在失踪。一些指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T12:26:16.923

如果您只能使用 dict：

```
l = [[1], [2,3], [2,4], [2,5], [2,5,6], [2,5,7], [2,5,8],[2,5,8,9], [10],[11,12]]
root = {}
for path in l:
    parent = root
    for n in path:
        parent = parent.setdefault(n, {})
import pprint
pprint.pprint(root, width=1) 
```

输出：

```
{1: {},
 2: {3: {},
     4: {},
     5: {6: {},
         7: {},
         8: {9: {}}}},
 10: {},
 11: {12: {}}} 
```

# android - 创建两个自定义按钮

> ID：15448660
> 
> 赞同：10
> 
> 时间：2013-03-16T11:26:59.163
> 
> 标签：android, button, custom-component

有人可以帮我创建像下面这样的自定义按钮吗？可能吗？搜索了很多，只能找到一些再次证明是的东西`rectangular/square shapes`。但是我希望两个按钮`triangular`可以排列在另一个上，并且只能在它们特定的占用区域上单击。代码片段表示赞赏。

![在此处输入图像描述](../Images/6c3d053adc1874e9b2144208e42ec10d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:15:39.107

您可以通过扩展`View`和继承其[`onTouchEvent`](https://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)方法来做到这一点，就像这样

```
public class BottomLeftTriangleButton extends View {

    // Copy superclass contructors

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getX() / getWidth() < event.getY() / getHeight()) {
            return super.onTouchEvent(event);
        }
        return false;
    }

} 
```

这样，您的自定义视图仅拦截左下区域的点击，对应于您的“按钮 2”区域。您可以通过将“<”符号更改为“>”来使其他区域可点击。

然后把你的2个视图放在同一个`FrameLayout`中，你就完成了。

# mysql - 连接三个表的 Joomla DB 查询

> ID：15448670
> 
> 赞同：0
> 
> 时间：2013-03-16T11:27:48.160
> 
> 标签：mysql, join, joomla

在我的 Joomla 2.5 模板中，我使用以下 JOIN 查询从两个表中获取一些信息（#_ *content 和*#_attachments ）

```
 ->select(array('a.description','a.display_name','a.parent_id','a.filename','a.url', 'b.title', 'b.id','b.state','c.title'))
    ->from('#__attachments AS a')
    ->join('INNER', '#__content AS b ON (a.parent_id = b.id)')
    ->where("b.state = 1")
    ->order("RAND()"); 
```

如何为表 #_*类别再添加一个连接以获得类别标题（此处命名为“c.title”。）？类别行的Id在#_content中保存为catid*。我希望作业应该类似于：

```
->join('INNER', '#__content AS b ON (c.id = b.catid)') 
```

谢谢，

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:38:38.107

您需要添加：

`->join('INNER', '#__categories AS c ON b.catid = c.id')`

请考虑添加一个 LEFT JOIN，`attachments`如果其中的项目可能`content`没有附件并用作主表`content`

# java - 请我对我的java程序有一些建议吗？无效退货？

> ID：15448672
> 
> 赞同：-1
> 
> 时间：2013-03-16T11:27:51.753
> 
> 标签：java

请我对我的Java程序有一些帮助，我已经创建了下面的方法，我只是想知道如何将它应用到我的程序中。

在模型类中要做的最后一件事是向雷区添加更多值，以确定与任何给定方格相邻的地雷数量。创建了一个名为 addNumbers 的公共方法，它有一个 void 返回并且不接受任何参数。以前，the_minefield 中的值只接受两个值，0 (EMPTY_SQUARE) 和 10 (MINE_SQUARE)。现在，与布满地雷的方格相邻的任何空方格将不再具有零值 - 它现在存储旁边的地雷数量。这可以是 1（只有一个地雷）和 8（完全包围）之间的任何值。包含地雷的正方形的值仍然为 10 (MINE_SQUARE)，无论它们旁边是什么。

//在程序前面的正方形声明：

```
 public static int MINE_SQUARE = 10;
 public static int EMPTY_SQUARE = 0; 
```

//需要调整的方法。

```
public void addNumbers() {

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:33:44.390

调用上述方法时，它会遍历当前单元格周围的周围单元格，如果邻居是地雷，则增加当前单元格的编号。所以在伪代码中：

```
public void addNumbers() {
  loop from current row - 1 to current row + 1 taking care of *edge* cases
    loop from current col - 1 to current col + 1 taking care of *edge* cases
      if row and col are not both current row and current column
        if cell represented by row and col has a mine
          increment the current cell's number
} 
```

请注意，您*必须*注意边缘情况——这意味着您需要知道当当前单元格位于第 0 行或 col 或最大高度行或最大列 col 时该怎么做。当我为我的 MineSweeper 应用程序完成此操作时，我会将 int 声明为 for 循环上方嵌套 for 循环的起点和起点，并使用 Math.min、Math.max 来帮助选择我的 for 循环限制。所以新方法是这样的：

```
public void addNumbers() {

  declare int rowMin. Use Math.max to compare 0 and row - 1 to assign rowMin
  likewise for colMin
  likewise for rowMax, but use Math.min instead
  likewise for colMax

  loop from row = rowMin to rowMax
    loop from col = colMin to colMax
      if row and col are not both current row and current column
        if cell represented by row and col has a mine
          increment the current cell's number
} 
```

请注意，对于我的 MineSweeper 应用程序，我做了完全相反的事情：我遍历了所有单元格，如果我找到了一个已挖掘的单元格，我将添加其所有邻居的地雷计数，但最终结果将是相同的：

```
public void reset() {
  buttonsRemaining = (maxRows * maxCols) - mineNumber;

  // randomize the mine location
  Collections.shuffle(mineList);
  // reset the model grid and set mines
  for (int r = 0; r < cellModelGrid.length; r++) {
     for (int c = 0; c < cellModelGrid[r].length; c++) {
        cellModelGrid[r][c].reset();
        cellModelGrid[r][c].setMined(mineList.get(r
                 * cellModelGrid[r].length + c));
     }
  }
  // advance value property of all neighbors of a mined cell
  for (int r = 0; r < cellModelGrid.length; r++) {
     for (int c = 0; c < cellModelGrid[r].length; c++) {
        if (cellModelGrid[r][c].isMined()) {
           int rMin = Math.max(r - 1, 0);
           int cMin = Math.max(c - 1, 0);
           int rMax = Math.min(r + 1, cellModelGrid.length - 1);
           int cMax = Math.min(c + 1, cellModelGrid[r].length - 1);
           for (int row2 = rMin; row2 <= rMax; row2++) {
              for (int col2 = cMin; col2 <= cMax; col2++) {
                 cellModelGrid[row2][col2].incrementValue();
              }
           }
        }
     }
  }
} 
```

我的代码的链接在这里：[Minesweeper Action Events](https://stackoverflow.com/a/7016492/522444)

# matlab - 找到满足特定条件的数据集

> ID：15448673
> 
> 赞同：0
> 
> 时间：2013-03-16T11:27:54.200
> 
> 标签：matlab, for-loop, cell, diagonal

我的数据如下所示：

```
 for a=1:2
    for b=1:2
        for c=1:2
            for d=1:2
                 m{a,b}{c,d}=zeros(3,3);
            end
        end
    end
end

m{1,1}{1,1}=[6 1 4;3 7 2;1 5 6]; %pass
m{1,1}{1,2}=[3 5 4;9 2 7;5 5 6];
m{1,1}{2,1}=[5 2 3;5 9 5;2 2 3];
m{1,1}{2,2}=[2 1 0;3 5 6;8 8 8];

m{1,2}{1,1}=[2 1 3;5 6 7;3 5 5];
m{1,2}{1,2}=[6 2 4;7 7 9;3 5 8];%pass
m{1,2}{2,1}=[1 2 2;4 5 5;2 6 7];
m{1,2}{2,2}=[3 3 1;2 4 5;6 7 5];

m{2,1}{1,1}=[2 5 0;3 7 6;8 6 8];
m{2,1}{1,2}=[3 6 4;3 2 7;5 8 6];
m{2,1}{2,1}=[3 9 1;2 1 5;6 2 8];
m{2,1}{2,2}=[9 1 4;9 7 7;5 2 8];%pass

m{2,2}{1,1}=[0 5 0;3 2 6;8 6 9];
m{2,2}{1,2}=[1 2 7;5 2 5;4 2 6];
m{2,2}{2,1}=[2 1 3;2 4 6;6 9 5];
m{2,2}{2,2}=[3 7 1;1 4 5;6 9 3]; 
```

我想取每组数据的对角线并检查所有这些数字是否都大于五。

例如，m{1,1}{1,1} 的对角线分别为 6,7 和 6，大于 5，从而满足条件。

此外，我需要知道通过条件的数据集的位置。在这个例子中，数据集 m{1,1}{1,1} ,m{1,2}{1,2} 和 m{2 的结果,1}{2,2} 通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:12:55.540

```
t=cellfun(@(mii) cellfun(@(mjj) all(diag(mjj)>5),mii),m,'uni',false);

t = 
    [2x2 logical]    [2x2 logical]
    [2x2 logical]    [2x2 logical]

t{1,1} =
     1     0
     0     0 
```

所以`m{1,1}{1,1}`是真的，`m{1,1}{1,2}`是假的，等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:12:23.303

```
 a=cellfun(@(x) cellfun(@(y) all(diag(y)>5),x),m,'uniformoutput',false) 
```

你可以在里面找到答案:)

# c - 浮点输出不正确

> ID：15448675
> 
> 赞同：1
> 
> 时间：2013-03-16T11:28:03.970
> 
> 标签：c, math, input, floating-point, output

我创建了一个程序，它为用户输入一个输入，然后让他们输入他们想要输入的金额，但是当我打印总和金额时。然而，这是全面恢复相同的价值：即

总计：5.00 食物：5.00 账单：5.00 旅行：5.00 同性恋：5.00

代替：

总计：14.00 食物：2.00 账单：3.00 旅行：4.00 同性恋：5.00

```
int main(void)
{

float food = 0.00;
float travel = 0.00;
float bills = 0.00;
float fags = 0.00;
float total = 0.00;

float t_food, t_travel, t_bills, t_fags;

char userInput[3];

while(userInput[0] != 'X')
{

    printf("Select option,\nA: Food\nB: Travel\nC: Bills\nD: Fags\nX: Exit\n");
    scanf("%s", userInput);
    if((userInput[0] == 'A') || (userInput[0] =='a'))
    {
        printf("Please enter an amount: ");
        scanf("%f", &food);
        printf("You have entered: %.2f\n", food);
        t_food += food;

    }
    if((userInput[0] == 'B') || (userInput[0] =='b'))
    {
        printf("Please enter an amount: ");
        scanf("%f", &travel);
        printf("You have entered: %.2f\n", travel);
        t_travel += travel;

    }
    if((userInput[0] == 'C') || (userInput[0] =='c'))
    {
        printf("Please enter an amount: ");
        scanf("%f", &bills);
        printf("You have entered: %.2f\n", bills);
        t_bills += bills;

    }
    if((userInput[0] == 'D') || (userInput[0] =='d'))
    {
        printf("Please enter an amount: ");
        scanf("%f", &fags);
        printf("You have entered: %.2f\n", fags);
        t_fags += fags;

    }
    if((userInput[0] =='X') || (userInput[0] =='x'))
    {
        total = t_food + t_fags + t_travel + t_bills;

        printf("Total: %.2f\n", &total);
        printf("Food: %.2f\n", &t_food);
        printf("Travel: %.2f\n", &t_travel);
        printf("Bills: %.2f\n", &t_bills);
        printf("Fags: %.2f\n", &t_fags);
        break;
    }
}
return 0; 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T11:33:15.690

改变

```
 printf("Total: %.2f\n", &total);
    printf("Food: %.2f\n", &t_food);
    printf("Travel: %.2f\n", &t_travel);
    printf("Bills: %.2f\n", &t_bills);
    printf("Fags: %.2f\n", &t_fags); 
```

至

```
 printf("Total: %.2f\n", total);
    printf("Food: %.2f\n", t_food);
    printf("Travel: %.2f\n", t_travel);
    printf("Bills: %.2f\n", t_bills);
    printf("Fags: %.2f\n", t_fags); 
```

听编译器说，

```
warning: format ‘%f’ expects argument of type ‘double’, but argument 2 has type ‘float *’ [-Wformat] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:32:50.547

删除`&`in `printf`，这意味着您传递值的位置，而不是值本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T11:33:22.083

您应该使用 中的值`printf`，而不是地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:52:35.320

如果您在最后一个 if 代码块中删除**& ，一切都会正常工作**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T13:29:16.837

除了先前关于 printf 的答案之外，您还需要初始化包含总值的浮点变量。就像是：

```
float t_food=0, t_travel=0, t_bills=0, t_fags=0;
...
printf("Total: %.2f\n", total);
printf("Food: %.2f\n", t_food);
printf("Travel: %.2f\n", t_travel);
printf("Bills: %.2f\n", t_bills);
printf("Fags: %.2f\n", t_fags); 
```

# couchapp - 在 _attachments 和 _design doc 之间复制几个 json 文档

> ID：15448676
> 
> 赞同：0
> 
> 时间：2013-03-16T11:28:16.340
> 
> 标签：couchapp

我的 _design 文档中有一堆 json-schema 文档，用于在`validate_doc_update`.

对于我的 api，我还希望将这些文档作为 _design 文档的附件提供给客户，因此我希望在序列化要上传的文档之前让 couchapp 重复文件：

```
/_attachments
    /schema
        /user.json
        /post.json
    ...
/schema
    /user.json
    /post.json 
```

从网上寻找解决方案，这似乎是很多人想做的事情，有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:18:37.740

我建议您手动执行此操作，即您可以执行类似`rsync schema/* _attachments/schema/ && couchapp push <host>`.

但是，请注意，couchapp 工具已被弃用。您可能想看看[kanso](http://kan.so)或[erica](https://github.com/benoitc/erica)。

# android - 意图不起作用

> ID：15448678
> 
> 赞同：0
> 
> 时间：2013-03-16T11:28:25.577
> 
> 标签：android, android-intent, countdowntimer

你猜我有问题...

我的 Islem.java 类中有这段代码

```
public void myFinish(){
    Intent i = new Intent();
    i.setClassName(this, SaveScore.class);
    startActivity(i);
} 
```

如果我用方法写`myFinish();`它`onCreate`工作正常

但是，在 timer.java 类中

```
public void onFinish() {
    Islem is = new Islem();
    is.myFinish();
} 
```

当我使用此代码时出现错误！:)

奇怪的是，当我将`myFinish`代码更改为

```
 public void myFinish(){

 /*     Intent i = new Intent();
    i.setClassName(this, SaveScore.class);
    startActivity(i);*/

    time.setText("Finish!");
} 
```

即使我在 timer.jawa 类中使用它，它也可以正常工作！

LogCat 03-16 14:27:14.370: E/AndroidRuntime(29940): 致命异常: main 03-16 14:27:14.370: E/AndroidRuntime(29940): java.lang.NullPointerException 03-16 14:27:14.370 : E/AndroidRuntime(29940): 在 android.app.Activity.startActivityForResult(Activity.java:2833) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 android.app.Activity.startActivity(Activity. java:2959) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.edusoftgame.kidsmath.Islem.myFinish(Islem.java:323) 03-16 14:27:14.370: E/AndroidRuntime( 29940): 在 com.edusoftgame.kidsmath.Timer.onFinish(Timer.java:19) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 android.os.CountDownTimer$1.handleMessage(CountDownTimer.java: 118) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-16 14:27:14.370:E/AndroidRuntime(29940): 在 android.os.Looper.loop(Looper.java:130) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 android.app.ActivityThread.main(ActivityThread.java :3693) 03-16 14:27:14.370: E/AndroidRuntime(29940): at java.lang.reflect.Method.invokeNative(Native Method) 03-16 14:27:14.370: E/AndroidRuntime(29940): at java.lang.reflect.Method.invoke(Method.java:507) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java :907) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 03-16 14:27:14.370: E/AndroidRuntime （29940）：在 dalvik.system.NativeStart.main（本机方法）main(ActivityThread.java:3693) 03-16 14:27:14.370: E/AndroidRuntime(29940): at java.lang.reflect.Method.invokeNative(Native Method) 03-16 14:27:14.370: E/AndroidRuntime (29940): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:907）03-16 14:27:14.370：E/AndroidRuntime（29940）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:665）03-16 14:27： 14.370: E/AndroidRuntime(29940): 在 dalvik.system.NativeStart.main(Native Method)main(ActivityThread.java:3693) 03-16 14:27:14.370: E/AndroidRuntime(29940): at java.lang.reflect.Method.invokeNative(Native Method) 03-16 14:27:14.370: E/AndroidRuntime (29940): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:907）03-16 14:27:14.370：E/AndroidRuntime（29940）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:665）03-16 14:27： 14.370: E/AndroidRuntime(29940): 在 dalvik.system.NativeStart.main(Native Method)在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.android.internal.os.ZygoteInit.main( ZygoteInit.java:665) 03-16 14:27:14.370: E/AndroidRuntime(29940): at dalvik.system.NativeStart.main(Native Method)在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 03-16 14:27:14.370: E/AndroidRuntime(29940): 在 com.android.internal.os.ZygoteInit.main( ZygoteInit.java:665) 03-16 14:27:14.370: E/AndroidRuntime(29940): at dalvik.system.NativeStart.main(Native Method)

任何的想法？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:26:59.673

@穆拉利。不要使用 CountDownTimer 扩展您的课程。仅使用 Activity 扩展。

如果你想使用 CountDownTimer，那么像这样使用 -

```
 CountDownTimer countDownTimer; 
```

在您的方法中：

```
public void myfininsh(){

    countDownTimer = new CountDownTimer(longvalue,500) {

@Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub

                System.out.println("Enabled");

            }
        }.start();
}
} 
```

这肯定会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:29:02.703

尝试使用此片段代码：

```
public void myFinish(){
Intent i = new Intent();
i.setClassName(this, SaveScore.class);
startActivity(i) 
```

;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:34:08.583

试试这个，而不是`this use`你的`activity name`.

```
Intent i = new Intent(MainActivity.this, SaveScore.class);
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:34:53.413

愿你的班级名称参考没有得到尝试，

```
 Intent i = new Intent();
    i.setClassName(YourclassName.this, SaveScore.class);
    startActivity(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T12:10:56.247

试试这样...

```
Intent i = new Intent();
i.setClassName(your package name, your class name);
startActivity(i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T12:14:43.980

timer.java 类还没有扩展 Activity 或 Serivce 吗？

方法 ：

```
public void myFinish(){
Intent i = new Intent();
i.setClassName(this, SaveScore.class);
startActivity(i); 
```

}

工作正常，因为您在 Activity 的 onCreate() 中编写。

# css - 在表 tr td 中使用 nth-child

> ID：15448679
> 
> 赞同：28
> 
> 时间：2013-03-16T11:28:31.887
> 
> 标签：css, css-selectors

```
<table>
  <tr>
    <th>&nbsp;</th>
    <td>$</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <th>&nbsp;</th>
    <td>$</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <th>&nbsp;</th>
    <td>$</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <th>&nbsp;</th>
    <td>$</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <th>&nbsp;</th>
    <td>$</td>
    <td>&nbsp;</td>
  </tr>
</table> 
```

这是我的代码，我想要`<td>`带有“$”的 s，背景为`#CCC`所有`<tr>`s。

任何人都可以帮助我如何使用`nth-child`伪类来做到这一点吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-16T11:33:01.610

```
table tr td:nth-child(2) {
    background: #ccc;
} 
```

工作示例：http: [//jsfiddle.net/gqr3J/](http://jsfiddle.net/gqr3J/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T11:46:40.623

当前的 css 版本仍然不支持按内容查找选择器。但是有一种方法，通过使用 css 选择器按属性查找，但是你必须在里面的所有内容上放置一些`<td>`标识符`$`。示例： [在表 tr td 中使用 nth-child](https://stackoverflow.com/questions/15448679/using-nth-child-in-tables-tr-td/15448872#)

html

```
<tr>
    <td>&nbsp;</td>
    <td data-rel='$'>$</td>
    <td>&nbsp;</td>
</tr> 
```

css

```
table tr td[data-rel='$'] {
    background-color: #333;
    color: white;
} 
```

请尝试这些示例。

```
table tr td[data-content='$'] {
    background-color: #333;
    color: white;
}
```

```
<table border="1">
    <tr>
        <td>A</td>
        <td data-content='$'>$</td>
        <td>B</td>
        <td data-content='$'>$</td>
        <td>C</td>
        <td data-content='$'>$</td>
        <td>D</td>
    </tr>
</table>
```

# java - AxisFault：（500）内部服务器错误

> ID：15448684
> 
> 赞同：1
> 
> 时间：2013-03-16T11:28:45.853
> 
> 标签：java, web-services, jakarta-ee, soap, axis

如何知道轴 500 错误是什么意思？？我可以返回一个特定的错误，告诉我问题出在哪里。我正在使用轴部署我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:31:43.470

500 表示内部服务器错误。查看服务器日志。如果您无权访问服务器日志，请在axis客户端中打开调试日志记录或使用tcpdumb或wireshark，您通常会通过这种方式获得更详细的错误消息。

# java - 将txt文件放在eclipse，android中的哪里？

> ID：15448687
> 
> 赞同：1
> 
> 时间：2013-03-16T11:29:15.893
> 
> 标签：java, android, eclipse

这是我需要访问 txt 文件“USSTATES.txt”的代码。

```
 public int count(String filename) throws IOException {
InputStream is = new BufferedInputStream(new FileInputStream(filename)); 
```

我应该将文件保存在硬盘的哪个位置？我尝试将它放在资产文件夹和应用程序的根文件夹中，但运行代码时仍然出现“没有这样的文件或目录”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:43:45.420

> 我应该将文件保存在硬盘的哪个位置？我尝试将它放在资产文件夹和应用程序的根文件夹中，但运行代码时仍然出现“没有这样的文件或目录”错误。

所以通常你有几个基于文件字符、文件内容、文件大小的选项。

*   将文件保存到 sd 卡
*   将文件保存到资产文件夹
*   将文件保存到原始文件夹

## 例子：

SD卡：

```
private final String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/filename.txt";
FileInputStream is = new FileInputStream(path); 
```

资产文件夹：

```
InputStream is = getAssets().open("filename.txt");
BufferedInputStream bis = new BufferedInputStream(is); 
```

原始文件夹：

```
InputStream is = getResources().openRawResource(R.id.filename);
BufferedInputStream bis = new BufferedInputStream(is); 
```

## 建议：

如果您的文件较小，通常将其保存到 assets 文件夹或 raw 文件夹中。如果有更大的尺寸，例如 5-10+ MB，更好的解决方案是将其放入 SD 卡中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:33:25.653

您必须将文件放在资产文件夹中

要访问它，您可以这样做。

```
AssetManager am = getApplicationContext().getAssets();
InputStream is = am.open("file_name.txt"); 
```

# jquery - jquery在按键上双重发布功能

> ID：15448690
> 
> 赞同：0
> 
> 时间：2013-03-16T11:29:31.033
> 
> 标签：jquery

我写了一个小评论板，并且一直在使用没有提交但使用返回键提交的文本输入：

```
<input type="text" id="comment" placeholder="Comment..." class="formInputWall" />
<!-- hide submit button -->
<input type="submit" value="Submit" class="post" id="10" style="position: absolute; left: -9999px" /> 
```

然后我有jquery函数：

```
$(".post").click(function(){

        //attaching the click event to submit button
        var element = $(this);
        var Id = element.attr("id"); 
        var comment = $("#comment").val();

        var dataString = 'comment='+ encodeURIComponent(comment); 

        if(comment=='')
        {

        }
        else
        {
            $("#loading").show();
            $("#loading").fadeIn(400).html(' Adding Comment.....');

            $.ajax({
            type: "POST", // form method
            url: "/pages/includes/list_wall_post.php",// destination
            data: dataString,
            cache: false,

            success: function(html){

                $('#wallWall').append('<div class="msgs_row"><div class="msgs_pic"><a href="/' + user_url + '"><img src="' + live_prof_pic + '"></a></div><div class="msgs_comment"><a href="/' + user_url + '" style="text-decoration:none;"><span class="msgs_name">' + name + '</span></a> ' + comment + '<br /><span class="msgs_time">Just now...</span></div></div>');

                $("#loadpost").append(html); // apend the destination files
                $("#loading").hide(); //hide the loading div
                $("#nc").hide();
                $("#comment").val(""); //empty the comment box to avoid multiple submission
                $('textarea').autogrow();

                }
            });

        }
        return false;
    }); 
```

这一切都很好，但我想给我们一个文本区域，并在使用返回按钮时发布表单。

所以我删除了 txt 输入并替换为：

```
<textarea id="comment" class="formInputWall"></textarea> 
```

然后添加以下内容：

```
$(function(){
    $('#comment').on('keyup', function(e){
        if (e.keyCode == 13) {
            // do whatever you want to do, for example submit form
            $(".post").trigger('click');

        }
    });
}); 
```

问题是虽然它现在提交了两次，但我不知道为什么！有任何想法吗？

和

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:39:44.223

添加`return false;`

```
$(function(){
    $('#comment').on('keyup', function(e){
        if (e.keyCode == 13) {
            // do whatever you want to do, for example submit form
            $(".post").trigger('click');
            return false;
        }
    });
}); 
```

或使用`e.preventDefault();`

```
$(function(){
    $('#comment').on('keyup', function(e){
        if (e.keyCode == 13) {
            e.preventDefault();
            // do whatever you want to do, for example submit form
            $(".post").trigger('click');

        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:05:29.347

找到了另一种解决问题的方法：

```
$('#comment').bind('keypress', function(e){
       var code = e.keyCode ? e.keyCode : e.which;
       if(code == 13) // Enter key is pressed
       {
           // Do stuff here
           $(".post").trigger('click');
       }
    }); 
```

# python - 如何动态地将谓词传递给过滤函数？

> ID：15448694
> 
> 赞同：2
> 
> 时间：2013-03-16T11:29:51.160
> 
> 标签：python

我有一本名为的字典`eval_params`，如下所示：

```
In [1]: eval_params
Out[1]: 
{1: {'CLF': 'EMNB',
  'EM': 'False',
  'FEA': 'words',
  'NGRAM': '1-1',
  'PDS': 'T',
  'PSE': '-',
  'RN': '1dnf',
  'STEM': 'False',
  'UDS': 'He'},
 2: {'CLF': 'EMNB',
  'EM': 'False',
  'FEA': 'words',
  'NGRAM': '1-1',
  'PDS': 'TS',
  'PSE': '-',
  'RN': '1dnf',
  'STEM': 'False',
  'UDS': 'He'},
 3: {'CLF': 'EMNB',
  'EM': 'False',
  'FEA': 'words',
  'NGRAM': '1-1',
  'PDS': 'T',
  'PSE': '-',
  'RN': '1dnf',
  'STEM': 'False',
  'UDS': 'Te'}} 
```

我必须通过使用内置函数的某些谓词来过滤这个字典`filter`：

```
In [2]: filter(pred_func, eval_params.iteritems())
Out[2]: 
[(3,
  {'CLF': 'EMNB',
   'EM': 'False',
   'FEA': 'words',
   'NGRAM': '1-1',
   'PDS': 'T',
   'PSE': '-',
   'RN': '1dnf',
   'STEM': 'False',
   'UDS': 'Te'})] 
```

我的问题是我不想对内部的谓词进行硬编码，`pred_func`而是将它们动态传递给`pred_func`. 电流`pred_func`看起来像这样：

```
def pred_func((i, d)):
    # I have to hard-code the parameters to filter by. I don't want that
    return d['PDS'] == 'T' and d['UDS'] = 'Te' 
```

相反，我想要类似的东西：

```
def pred_func((i, d), predicates):
    vals = []
    # predicates would be a dictionary such as {'PDS':'T', 'UDS':'Te'}
    for param, val in predicates.iteritems():
        vals.append(d[param] == val)
    return all(vals) 
```

但是，据我所知，我不能将额外的参数传递给谓词函数，那么我怎样才能以一种优雅的方式完成我想要的呢？任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:36:33.127

创建一个[高阶函数*^([wikipedia])*](https://en.wikipedia.org/wiki/Higher-order_function)，即返回函数的函数。例如：

```
def pred_func(predicates):
    # Define a function inside `pred_func`. This function is a "closure" and 
    # will have access to the `predicates` parameter
    def func((i, d)):
        # You can simply pass a generator to `all`
        return all(d[param] == val for param, val in predicates.iteritems())

    # Return the function
    return func 
```

`pred_func`现在是一个函数，它*返回*一个接受元组作为参数的函数（就像你的原始`pred_func`函数一样）。

然后，您可以使用以下命令调用该函数：

```
filter(pred_func(predicates), eval_params.iteritems()) 
```

# android - 自定义屏幕解锁期间的警报服务访问：Android

> ID：15448697
> 
> 赞同：0
> 
> 时间：2013-03-16T11:30:02.530
> 
> 标签：android, android-service, android-alarms, unlock, screen-lock

我正在开发自定义屏幕解锁应用程序。我想以这样的方式管理我的默认警报服务，即我可以在不解锁屏幕的情况下关闭和暂停警报。

但我没有办法访问我的系统警报服务..

我正在处理**TELEPHONY_SERVICE**来管理呼叫。我想以同样的方式处理**ALARM**。

请给我一些想法，我该如何实现这个功能？

感谢您提前提供的帮助和支持..

# java - 有没有办法在Java中动态实现接口？

> ID：15448699
> 
> 赞同：0
> 
> 时间：2013-03-16T11:30:24.767
> 
> 标签：java, reflection, interface

我正在开发一个允许使用 Lua 创建 mod 的 Minecraft mod。我希望用户能够使用他们想要的界面创建 TileEntities。目前我正在使用一个调用已注册 Lua 文件函数的 Base TE，但这不允许他们制作库存和外围设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:34:59.223

是的。您可以通过[ClassLoader.html#loadClass(...)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String%29)加载接口并使用[Proxy#newProxyInstance(...)实现它](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html#newProxyInstance%28java.lang.ClassLoader,%20java.lang.Class%5B%5D,%20java.lang.reflect.InvocationHandler%29)

例子：

```
ClassLoader cl = getClass().getClassLoader();
Class<?> desiredInterface = cl.loadClass("SomeInterface");
Object proxy = Proxy.newProxyInstance(
                 cl, 
                 new Class<?>[]{desiredInterface},
                 new InvocationHandler() {
                      @Override
                      Object invoke(Object proxy, Method method, Object[] args) {
                        //call Lua with method name and args, return answer
                      }
                 }); 
```

# sql - 分组元素的最大计数

> ID：15448705
> 
> 赞同：1
> 
> 时间：2013-03-16T11:30:57.367
> 
> 标签：sql, sql-server, select

数据库是 AdventureWorks。

```
select COUNT(*) as 'Number of times a product is sold at same quantity' 
from
  Sales.SalesOrderDetail 
group by 
         OrderQty, ProductID 
order by 
         COUNT(*) desc 
```

这将返回如下数据：

```
Number of times a product is sold at same quantity
--------------------------------------------------
4279
3216
3095
2376
2334
2319
2234
2201
2121
2025
1712
1488
1396
1161
1044 
```

和其他 2600 多行。

我有兴趣获得 4279 作为输出。

我无法应用 Max，因为它不适用于聚合函数或子查询。反正我试过了。没用。

我猜我不能，因为 count(*) 不是一列。但如果有办法：

**我怎样才能获得最大的这种输出？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:31:53.313

只需添加`TOP`以限制结果数量

```
select TOP 1 COUNT(*) as 'Number of times a product is sold at same quantity' 
from  Sales.SalesOrderDetail 
group by  OrderQty, ProductID 
order by  COUNT(*) desc 
```

*   [SQLFiddle Demo（*不同的记录但有相同的想法*）](http://www.sqlfiddle.com/#!3/2d7ba/2)
*   [SQLFiddle 演示（*使用 CTE 和窗口函数*）](http://www.sqlfiddle.com/#!3/2d7ba/7)

* * *

**更新 1**

```
WITH results 
AS
(
  select COUNT(*) as [Number of times a product is sold at same quantity],
         DENSE_RANK() OVER (ORDER BY COUNT(*) DESC) rank_no 
  from   Sales.SalesOrderDetail 
  group   by OrderQty, ProductID 
)
SELECT [Number of times a product is sold at same quantity]
FROM   results
WHERE  rank_no = 2 
```

*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

# jquery - 发布到数据库需要刷新才能显示 - webmatrix/razor

> ID：15448708
> 
> 赞同：1
> 
> 时间：2013-03-16T11:31:13.437
> 
> 标签：jquery, sql, sql-server, razor, webmatrix

大家早，

我创建了一个页面来在输入字段中显示我的数据库的内容，并进行了设置，以便可以修改这些内容并将其发布回数据库。我所做的工作非常好，因为它确实将内容保存回数据库，但我需要刷新页面才能看到这些更改。我想我可以使用 jquery 来做到这一点，但我需要指出正确的方向。我目前已尝试将当前页面作为操作 href。

这是我拥有的当前代码：

```
@{
Layout = "~/_template1.cshtml";

var db = Database.Open("mydatabase");
var CurrentUser = WebSecurity.CurrentUserId;
var userdetails = ("SELECT * from UserProfile WHERE UserId='8'");
var quserdetails = db.QuerySingle(userdetails, CurrentUser);

if (IsPost){
var updateuserdetails = "UPDATE UserProfile SET FirstName = @0, LastName = @1, TelNumber = @2 WHERE UserID='8'";
db.Execute(updateuserdetails, Request["FirstName"], Request["LastName"], Request["TelNumber"]);

  }
  }

  <h1>My Details</h1>
  <hr>
  <form method="post" action="~/Account/MyDetails.cshtml">
  <fieldset>
  <label>First Name</label>
  <input class="input-xlarge" type="text" name="FirstName" placeholder=".input-xlarge" value="@quserdetails.FirstName">
  <br>
  <label>Last Name</label>
  <input class="input-xlarge" type="text" name="LastName" placeholder=".input-xlarge" value="@quserdetails.LastName">
  <br>
  <label>Telephone Number</label>
<input class="input-xlarge" type="text" name="TelNumber" placeholder=".input-xlarge" value="@quserdetails.TelNumber">
  <br>

  <button type="submit" class="btn btn-success">Update</button>
  <button type="submit" class="btn btn-success">Cancel</button>
  </fieldset>
  </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:00:59.173

使用 Ajax 提交，它会使用 ajax 发布表单。所以页面不会被刷新

下载文件

1.  jquery.ajax.form.js
2.  jquery.validate.js

连同 jquery.js

```
$('#form1').validate({
        submitHandler: function(form) {

            var options = {
                url:$('#form1').attr('action'),
                success:function(response){
                    data = $.parseJSON(response);

                }
            };
            $("form#form1").ajaxSubmit(options);
            return false;
        }
    }); 
```

# mysql - Mysqlimport.exe 从远程 windows 计算机导入 Centos 远程服务器

> ID：15448715
> 
> 赞同：0
> 
> 时间：2013-03-16T11:32:04.343
> 
> 标签：mysql, csv, mysqlimport

我有许多通过计划任务在我的 Windows 电脑上运行的批处理文件。目前我正在使用以下命令将数据上传到我的实时服务器：

mysqlimport.exe --host=(remoteip) --user=root --password=password --local --fields-terminated-by=, --fields-optionally-enclosed-by="\"" --lines-终止-by="\r\n" --ignore-lines=1 dbname U:\CSV-Replaced-Output\tablename.csv

你能告诉我这是否是自动上传大量数据的最安全方式吗？csv文件也可以高达150mb，我可以随时使用压缩吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T23:07:16.053

您可以添加 --compress 来压缩流量。

更多信息在这里[http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html#option_mysqlimport_compress](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html#option_mysqlimport_compress)

不确定交易的安全性。

# python - 在 Python 中引发错误，排除堆栈跟踪中的最后一级

> ID：15448722
> 
> 赞同：5
> 
> 时间：2013-03-16T11:32:37.537
> 
> 标签：python, debugging, exception

所以，我正在开发这个有索引器的类。我想抛出（或用 Python 术语“引发”）一个 IndexError 异常。嗯，这很琐碎，

```
if errorCondition:
    raise IndexError("index out of range") 
```

但是，当此代码在控制台中运行并发生错误时，堆栈跟踪还包括引发错误的行：

```
Traceback (most recent call last):
  File "code.py", line 261, in <module>
    print myCards[99]
  File "Full/Path/To/The/module.py", line 37, in __getitem__
    raise IndexError("item index out of range")
IndexError: item index out of range 
```

我觉得这种奇怪，我想对实现者隐藏我的类的内部工作，而不是提供有关从外部模块提取的文件、行和代码的信息。

有什么办法可以管理这个吗？引发错误的所有意义在于提供足够的信息来描述函数调用出错的原因，而不是在外部代码中引发错误的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:59:30.133

如果您将代码分发为 .pyc 字节码文件（通常在第一次导入模块时自动生成），或者设法使生成的 .pyc 文件没有指向 .py 源文件的正确路径（通过移动/删除源文件），堆栈跟踪将省略源代码行。

`compileall`您可以使用stdlib 模块 控制字节码文件的生成方式：http: [//docs.python.org/2/library/compileall.html](http://docs.python.org/2/library/compileall.html)

正如评论者所指出的，这是不寻常的——额外的信息可以节省调试生产问题的宝贵时间。

# twitter-bootstrap - joomla 3.0 twitter bootstrap nav-collapse 文字装饰

> ID：15448724
> 
> 赞同：0
> 
> 时间：2013-03-16T11:32:52.190
> 
> 标签：twitter-bootstrap, joomla3.0

我正在使用集成了引导程序的 CMS Joomla 3.0。我喜欢使用导航折叠并修改样式，例如更改文本颜色、背景颜色和形状（圆角边框），这些效果很好。只有一个影子（我认为），我无法摆脱或移除它。我试过'文本装饰：无;' 在我的CSS中，但它不起作用。

所以我想要一个白色的文本，没有额外的装饰。

我的html：

```
<div class="row-fluid">
  <nav class="navbar topnav"> 
    <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </a>
    <div class="nav-collapse collapse topbtn">
      <ul class="nav menu">
        <li class="item-435"><a href="/" >Home</a></li>
        <li class="item-468"><a href="/contact" >Contact</a></li>
      </ul>
    </div>
 </nav>
</div> 
```

我的 CSS：

```
.navbar {
  background-color: #FFF; /* background color will be black for all browsers */
  background-image: none;
  background-repeat: no-repeat;
  filter: none;
}

.nav-collapse li{
    text-decoration: none;
    color:#FFF; 
    min-width: 150px;
    margin: 2px 4px 4px 0px;
    text-align: center;
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
    -moz-box-shadow: none;
}

.navbar .topbtn a{
    text-decoration: none;  
    border-radius: 0px 10px 10px 0px / 0px 20px 20px 0px;
    -moz-border-radius: 0px 10px 10px 0px;  /* Old Firefox */
    background-color: #006FB7;
    padding: 2px 2px 8px 15px;
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
    -moz-box-shadow: none;
}

.navbar .topbtn .active > a, .navbar .topbtn .active > a:hover{
  text-decoration: none;
  color:#FFF;   
  font-weight:bold;
  background-color: #8EBD43;
  box-shadow: none;
  -webkit-box-shadow: none;;
  -moz-box-shadow: none;
} 
```

在 IE8 中，测试看起来不错（不支持圆角），在 Firefox 和 safari 中，文本不是我想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:20:32.087

默认情况下，Bootstrap 确实将一些文本阴影和字体粗细应用于（可折叠）导航栏。您可以在 CSS 文件的末尾尝试此操作以覆盖它：

```
.navbar .nav > li > a {
    text-shadow: none;
}
.nav-collapse .nav > li > a,
.nav-collapse .dropdown-menu a {
    font-weight: normal;
} 
```

导航栏格式来自`/media/jui/less/navbar.less`，`/media/jui/less/responsive-navbar.less`如果您想仔细查看源代码。

# logging - Xamarin 中的应用程序日志记录

> ID：15448726
> 
> 赞同：5
> 
> 时间：2013-03-16T11:32:53.657
> 
> 标签：logging, xamarin.android, xamarin

我是 Android 开发新手，对一些最佳实践感兴趣。我用什么来登录我的应用程序：

*   `System.Diagnostics`（框架级 API？`System.Diagnostics.Trace`那么在哪里？）
*   `Android.Util.Log`（操作系统级 API？）
*   `Console.WriteLine()`（什么是 Android 设备上的控制台？）
*   [log4net](http://logging.apache.org/log4net/)等外部库

# r - 通过 fread() 读取带有 row.names 的 CSV

> ID：15448732
> 
> 赞同：9
> 
> 时间：2013-03-16T11:33:15.040
> 
> 标签：r, data.table

我遇到了包中的`fread()`功能问题`data.table`。我知道它仍然是实验性的，但也许我在某个地方犯了一些错误。

这是可重现的示例：

```
library(data.table)
test <- data.frame(a=rnorm(300), b=rnorm(300))
write.csv(test,"a.csv")
fread("a.csv") 
```

给出一个错误：

```
Error in rbindlist(allargs) : 
  Item 2 has 2 columns, inconsistent with item 1 which has 3 columns 
```

还有一个问题：我为什么要留下`row.names=TRUE`问题`write.csv`？到目前为止，我只遇到了问题，因为它向数据中添加了一个未命名的列。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T11:40:17.237

作为一种解决方法，您可以通过设置将行名作为新列读取`header=FALSE`

```
fread("a.csv",header=FALSE)
header' changed by user from 'auto' to FALSE
      V1                 V2                 V3
  1:                      a                  b
  2:   1  -1.55640470495795    -1.344760319214
  3:   2   2.89752713867643   2.48413035874463
  4:   3 -0.493990961968582  0.119727513514055
  5:   4  0.559770137546773   1.07420769675405
 ---                                          
297: 296  0.585750601363698  -1.59845801200953
298: 297 -0.867339301988422  0.776738489388772
299: 298 0.0942821874550108 -0.649440075398178
300: 299 -0.308039637386426 -0.840171787291445
301: 300  0.358526722813896    -1.362322309472 
```

在 的帮助下`fread`，看起来所有示例都在使用`row.names=FALSE`，因此正如您所提到的，这可以正常工作：

```
write.csv(test,"b.csv",row.names=FALSE)
fread("b.csv") 
```

# c# - MSI 安装程序安装项目：错误 1001。OnBeforeInstall 事件处理程序中发生异常

> ID：15448737
> 
> 赞同：0
> 
> 时间：2013-03-16T11:33:30.547
> 
> 标签：c#, exception-handling, windows-installer, setup-project

我有一个 C# Windows Forms 应用程序，并且我在其解决方案中添加了一个安装项目来创建 MSI 安装程序。

我想在最终用户安装软件时向他们提供一些自定义错误消息，但它正在显示

```
Error 1001\. An exception occurred in the OnBeforeInstall Event Handler. 
```

在回滚。

您能否帮助我：在这种情况下如何向最终用户实施自定义错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T06:57:33.243

不要在 OnBeforeInstall 事件处理程序中检查条件，而是尝试将该代码放入其中

**安装**事件处理程序

并在自定义条件/检查失败时退出安装过程：

```
throw new InstallException("Custom Message."); 
```

这将导致：**错误 1001.Custom 消息。**

另一种方法是使用**Orca**和您的 msi 来编辑内置消息。

# sql-server - 通过声明枚举导致 HttpException SqlException

> ID：15448740
> 
> 赞同：5
> 
> 时间：2013-03-16T11:33:52.107
> 
> 标签：sql-server, entity-framework, asp.net-mvc-4, foreach

当我对 ClaimsIdentity 中的某些声明执行“foreach”循环时遇到问题。当我逐步完成它时 - 在它应该完成枚举的时候，我看到它回到“in”，然后在我得到一个关于连接到 SQL Server 的 HttpException 之前得到十秒的延迟。我知道这听起来很奇怪，但那是根据调试发生的 - 在我的 FindAllClaimsByType 方法的 foreach 循环中（我确实在使用实体框架后不久连接到数据库，但我的断点从未被击中）。编辑：我应该提到，如果我跳过这个并在控制器中做一些事情，我可以很好地连接到我的数据库。这是在 ASP.NET MVC 4

**编辑2：我已经缩小了一点。只有在找不到`Claim`. 我如何枚举声明并不重要（如果我使用循环或`ClaimsPrincipal.HasClaim()`LINQ表达式） - 如果找不到声明，它总是会抛出此异常。`foreach``.Any()`**

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我的代码如下：

```
public class ClaimsService
{

    private ClaimsIdentity _identity;

    public ClaimsService(ClaimsIdentity identity)
    {
        _identity = identity;
    }

    private Claim FindFirstClaimByType(string claimtype)
    {
        return FindAllClaimsByType(claimtype).FirstOrDefault();
    }

    private IEnumerable<Claim> FindAllClaimsByType(string claimtype)
    {
        ICollection<Claim> claims = new Collection<Claim>();
        foreach (Claim claim in _identity.Claims)
        {
            if (claim.Type == claimtype)
            {
                claims.Add(claim);
            }
        }

        return claims;
    }

    public School FindSchoolFromClaims()
    {
        string realm = FindFirstClaimByType(Data.Configuration.RealmClaimType).Value.ToString();

        using (SqlDatabaseContext db = new SqlDatabaseContext())
        {
            School school = null;

            school = db.Schools.Where(s => s.Realm == realm).FirstOrDefault();

            return school;
        }
    }

    public Developer FindDeveloperFromClaims()
    {
        string realm = FindFirstClaimByType(Data.Configuration.RealmClaimType).Value.ToString();
        string nameidentifier = FindFirstClaimByType(ClaimTypes.NameIdentifier).Value.ToString();

        using (SqlDatabaseContext db = new SqlDatabaseContext())
        {
            Developer developer = null;

            if (realm == Data.Configuration.SoloDeveloperRealmMsft)
            {
                developer = db.Developers.OfType<SoloDeveloper>().Where(dev => dev.NameIdentifier == nameidentifier).FirstOrDefault();
            }
            else
            {
                developer = db.Developers.OfType<CompanyDeveloper>().Where(dev => dev.Realm == realm).FirstOrDefault();
            }

            return developer;
        }
    }
} 
```

堆栈跟踪：

> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）] System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection，Action `1 wrapCloseInAction) +5296071 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +558 System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5308555 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +920 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +5311099 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions) +38 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry，DbConnectionOptions userOptions，DbConnectionInternal& 连接）+5313314 System.Data .ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) +143 System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 次重试) +83 System.Data.SqlClient.SqlConnection.Open() +96 System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +76
> 
> [HttpException (0x80004005): 无法连接到 SQL Server 数据库。] System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +131 System.Web.Management.SqlServices。 SetupApplicationServices（字符串服务器，字符串用户，字符串密码，布尔信任，字符串连接字符串，字符串数据库，字符串 dbFileName，SqlFeatures 功能，布尔安装）+89 System.Web.Management.SqlServices.Install（字符串数据库，字符串 dbFileName，字符串连接字符串） +27 System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile（字符串 fullFileName，字符串 dataDir，字符串 connectionString）+386

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-01T16:03:50.100

我在 Azure 云解决方案中使用全新的 ASP MVC Web 角色时遇到了同样的问题。尚未设置 SQL，也没有其他功能，除了 Azure ACS 联合登录尚未实现。我只是在测试 ACS、WIF 和多个身份提供者的功能。

似乎 RoleManager 功能是默认内置的。一旦我在 web.config 中删除它 - 在枚举声明时不再尝试访问 SQL Server。

添加这一行：

```
 <modules>
     <remove name="RoleManager" />
     ... 
```

希望这会有所帮助。

里克·舒里

# java - 从右到左设备上的 Android TextView 右对齐

> ID：15448746
> 
> 赞同：4
> 
> 时间：2013-03-16T11:34:43.460
> 
> 标签：java, android, android-layout, android-widget, right-to-left

我正在编写一个以希伯来语显示的应用程序，为此我正在正确对齐 TextView 的文本。在 Nexus 设备上开发时，所有工作都很好，文本显示正常，使用 android:gravity="right" 作为 TextView。当我在运行自定义 ROM 的本地移动运营商设备（以色列）上运行相同的应用程序时，所有设置为重力 =“右”的 TextView 小部件看起来好像它们被设置为重力 =“左”。如果我去将重力向左改变（你猜对了......）它会向右对齐。

我尝试使用代码和使用设备配置本身将设备的默认语言环境更改回美国英语。没有任何帮助。我正在使用的运营商设备是 Galaxy SII。

在我看来，谁创建了 ROM 只是更改了对齐值，现在右表示左，左表示右。该ROM是三星的官方ROM。

有没有人遇到过这个问题？任何解决方案的想法？

我已经尝试过： 1\. 从设置菜单中更改设备区域设置。2\. 以编程方式更改设备区域设置。3\. 强制布局文件中的root Layout为left/right layout_gravity/gravity

目前唯一有效的是将TextView的重力向左改变，这意味着它停止在Nexus等全球设备上工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T07:19:02.377

回答我自己的问题。

找遍了之后，我没有找到答案。因为 ROM 是为居住在以色列并讲希伯来语的人定制的，所以宽度 MATCH_PARENT TextView 内的对齐似乎被翻转了。意思是，左对齐意味着右，右意味着左。改变这一点的唯一方法是将 TextView 与 WRAP_CONTENT 一起使用，并将 TextView 本身与它的父级内的右侧对齐。因为我已经编写了应用程序和所有屏幕布局，所以我不想更改所有内容。所以我所做的是实现了一个自定义控件，该控件将 TextView 包装在 LinearLayout 中，并将其公开以便从外部使用。这样，MATCH_PARENT 将影响 LinearLayout，而控件将负责将包装的 TextView 对齐到右侧。

这就是：

一、控件类本身（HebrewTextView.java）：

```
public class HebrewTextView extends LinearLayout
{
private TextView mTextView;

public HebrewTextView(Context context)
{
    super(context);
    init(null);
}

public HebrewTextView(Context context, AttributeSet attrs)
{
    super(context, attrs);
    init(attrs);
}

public TextView getTextView()
{
    return mTextView;
}

private void init(AttributeSet attrs)
{       
    mTextView = new TextView(getContext());
    LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
    lp.gravity = Gravity.RIGHT; 
    mTextView.setLayoutParams(lp);
    mTextView.setGravity(Gravity.CENTER_VERTICAL);

    addView(mTextView);

    if(attrs!=null)
    {
        TypedArray params = getContext().obtainStyledAttributes(attrs, R.styleable.HebrewTextView);
        mTextView.setText(params.getString(R.styleable.HebrewTextView_android_text));
        mTextView.setTextColor(params.getColor(R.styleable.HebrewTextView_android_textColor, Color.WHITE));
        mTextView.setTextSize(params.getDimension(R.styleable.HebrewTextView_android_textSize, 10));
        mTextView.setSingleLine(params.getBoolean(R.styleable.HebrewTextView_android_singleLine, false));
        mTextView.setLines(params.getInt(R.styleable.HebrewTextView_android_lines, 1));                     
        params.recycle();
    }               
}
} 
```

values/attrs.xml 下的控件 XML 属性。请注意，自定义属性与 TextView 属性匹配，因此我不必更改布局文件：

注意：这些是我需要的属性，如果您使用更多，只需添加到 XML 并在类的 init() 中读取它。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <declare-styleable name="HebrewTextView">
    <attr name="android:text"/>
    <attr name="android:textColor"/>
    <attr name="android:lines"/>
    <attr name="android:textSize"/>
    <attr name="android:singleLine"/>                                    
</declare-styleable>
</resources> 
```

完成后，我所要做的就是遍历有问题的布局并将 TextView 替换为希伯来文本视图，如果它是代码引用的文本视图，则更改转换。getTextView() 方法是在控件类中定义的，因此代码中更改文本和/或其他 TextView 属性的部分在添加 .getTextView() 后缀后将起作用。

希望有帮助。

# android - 使用 Android NDK 构建协议缓冲区时出错

> ID：15448755
> 
> 赞同：4
> 
> 时间：2013-03-16T11:35:19.220
> 
> 标签：android, c++, android-ndk, protocol-buffers

我尝试在 Android NDK（完整库）中构建协议缓冲区库。（[如何通过 Android NDK 构建协议缓冲区](https://stackoverflow.com/questions/7144008/how-to-build-protocol-buffer-by-android-ndk)）。但是当我执行时`ndk-build`，我得到一个错误

```
...
Compile++ thumb  : protobuf <= printer.cc
Compile++ thumb  : protobuf <= tokenizer.cc
Compile++ thumb  : protobuf <= zero_copy_stream_impl.cc
Compile++ thumb  : protobuf <= importer.cc
Compile++ thumb  : protobuf <= parser.cc
SharedLibrary  : libprotobuf.so
jni/src/google/protobuf/io/tokenizer.cc:928: error: undefined reference to 'google::protobuf::StringAppendF(std::string*, char const*, ...)'
collect2: error: ld returned 1 exit status
make: *** [obj/local/armeabi/libprotobuf.so] Error 1 
```

这是源代码包含错误：

```
...
// Helper to append a Unicode code point to a string as UTF8, without bringing
// in any external dependencies.
static void AppendUTF8(uint32 code_point, string* output) {
  uint32 tmp = 0;
  int len = 0;
  if (code_point <= 0x7f) {
    tmp = code_point;
    len = 1;
  } else if (code_point <= 0x07ff) {
    tmp = 0x0000c080 |
        ((code_point & 0x07c0) << 2) |
        (code_point & 0x003f);
    len = 2;
  } else if (code_point <= 0xffff) {
    tmp = 0x00e08080 |
        ((code_point & 0xf000) << 4) |
        ((code_point & 0x0fc0) << 2) |
        (code_point & 0x003f);
    len = 3;
  } else if (code_point <= 0x1fffff) {
    tmp = 0xf0808080 |
        ((code_point & 0x1c0000) << 6) |
        ((code_point & 0x03f000) << 4) |
        ((code_point & 0x000fc0) << 2) |
        (code_point & 0x003f);
    len = 4;
  } else {
    // UTF-16 is only defined for code points up to 0x10FFFF, and UTF-8 is
    // normally only defined up to there as well.
    StringAppendF(output, "\\U%08x", code_point); //<---- This error string
    return;
  }
  tmp = ghtonl(tmp);
  output->append(reinterpret_cast<const char*>(&tmp) + sizeof(tmp) - len, len);
}
... 
```

如果这一行被注释掉，它就会编译。如何解决这个问题呢？

PS：，`protobuf_lite_static`并`protobuf_static`构建`protobuf_lite_shared`成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:50:57.420

StringAppendF - 此函数包含在 src/google/protobuf/stubs/stringprintf.cc (protobuf-2.5.0) 中。再见 Android.mk：

```
PROTOBUF_FULL_SRC_FILES := \
$(PROTOBUF_LITE_SRC_FILES) \
src/google/protobuf/stubs/strutil.cc \
src/google/protobuf/stubs/substitute.cc \
src/google/protobuf/stubs/stringprintf.cc \
... 
```

src/google/protobuf/stubs/stringprintf.cc 必须包括在内。

# cakephp - 搜索两点之间的距离 CakePHP

> ID：15448763
> 
> 赞同：0
> 
> 时间：2013-03-16T11:35:59.173
> 
> 标签：cakephp, geolocation, distance

我正在尝试构建一个小型 CakePHP 网站，该网站在数据库中有一些经度和纬度。用户对位置执行搜索查询（提供她/他的地址），结果需要按用户到该位置的距离排序。提供地址（使用 Google Maps API）时，我已经可以得到 lat en lng。我不确定如何使用距离顺序构建 CakePHP 查找。有任何想法吗？

我正在使用 CakePHP 2.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:40:24.247

我更喜欢为此目的使用 virtualFields。实现取决于您使用的数据库。对于 Postgres，它将如下所示：

**MyModel.php**

```
public function findSortedByDistanse($long, $lat){
    $distanceValue = "calc_distance($lat, $long, MyModel.lat, MyModel.lon)";
    $this->virtualFields['distance'] = $distanceValue;
    return $this->find('all', array('conditions' => array(
        'order' => 'MyModel.distance ASC'
    )));
} 
```

其中 calc_distance 是 Postgres 的存储过程

**参数：** IN source_lat numeric、IN source_lon numeric、IN target_lat numeric、IN target_lon numeric

**代码：**

```
SELECT ( 3956 * 2 * 
   ASIN ( 
      SQRT ( 
        POWER ( SIN ( ( $1 - abs($3) ) * pi()/180/2 ),2 ) + 
        COS ( $1 * pi()/180 ) * 
    COS ( abs($3) * pi()/180 ) * 
    POWER ( SIN ( ( $2 - $4 ) * pi()/180 / 2 ), 2 ) 
      ) 
   )
) 
```

如果您更喜欢原始查询，请使用以下内容：

```
$distanceValue = "3956 * 2 * ASIN(SQRT(POWER(SIN(({$lat}-abs(MyModel.lat))*pi()/180/2),2)+COS({$lat} * pi()/180)*COS(abs(MyModel.lat) *  pi()/180)*POWER(SIN(({$long} - MyModel.lon)*pi()/180 / 2), 2)))"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:53:21.540

[Rangeable](https://github.com/zeroasterisk/cakephp-behavior-rangeable)可用于根据用户选择的地理位置查找附近。但是，此插件已被弃用，因为它支持 CakePHP 1.x 并且可能不适用于 CakePHP 2.x。

您可能需要转换它。

# php - curl文件下载返回内部服务器错误

> ID：15448766
> 
> 赞同：1
> 
> 时间：2013-03-16T11:36:17.817
> 
> 标签：php, curl, download

我正在尝试通过 curl 下载文件，它的处理过程没有错误，但只返回“内部服务器错误。请联系系统管理员。” 通过浏览器，在网站上，当您单击链接时，它会让您留在页面上并开始下载文件。如果您复制链接位置并将其放入浏览器，它会返回相同的文本 - “内部服务器错误。请联系系统管理员。”

经过几天的研究，我迷路了

我的功能：

```
public function requestFile($url,$filename){
    $cookie_file_path = "cookiejar.txt"; 
    if(!file_exists($cookie_file_path)) {
        $fh = fopen($cookie_file_path, "w");
        fwrite($fh, "");
        fclose($fh);
    }
    $fp_header = '';
    $agent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; .NET CLR 1.1.4322)";
    if ( ! ($fp_header = tmpfile())) { die('File not created'); }
    set_time_limit(0);
    $fp = fopen ($filename, 'w+');//This is the file where we save the    information
    $ch = curl_init(str_replace(" ","%20",$url));
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 500);
    curl_setopt($ch, CURLOPT_WRITEHEADER, $fp_header);
    curl_setopt($ch, CURLINFO_CONTENT_TYPE,"text/csv");
    curl_setopt($ch, CURLOPT_FILE, $fp); // here it sais to curl to just save it
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,TRUE);
    $data = curl_exec($ch);//get curl response
    print_r(curl_getinfo($ch));
    curl_close($ch);
    fclose($fp);

    echo "Headers ===>\n";
    rewind($fp_header); echo stream_get_contents($fp_header);
    echo "<=== Headers\n";
    fclose($fp_header);     
} 
```

我留下了一些调试代码，可能还有一些我尝试过的额外内容：

curl_getinfo：

```
Array
(
[url] => <hidden>/download_price.php?f=Pricelist.csv
[content_type] => text/html; charset=ISO-8859-1
[http_code] => 200
[header_size] => 478
[request_size] => 267
[filetime] => -1
[ssl_verify_result] => 19
[redirect_count] => 0
[total_time] => 0.249
[namelookup_time] => 0
[connect_time] => 0.015
[pretransfer_time] => 0.202
[size_upload] => 0
[size_download] => 59
[speed_download] => 236
[speed_upload] => 0
[download_content_length] => 59
[upload_content_length] => 0
[starttransfer_time] => 0.249
[redirect_time] => 0
[certinfo] => Array
    (
    )

[redirect_url] => 
) 
```

和标题

```
Headers ===>
HTTP/1.0 200 OK
Date: Sat, 16 Mar 2013 11:25:29 GMT
Server: Apache
X-Powered-By: PHP/5.2.17
Set-Cookie: cookie_test=please_accept_for_session; expires=Mon, 15-Apr-2013 11:25:29     GMT; path=/; domain=<hidden>
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: User-Agent,Accept-Encoding
Content-Length: 59
Connection: close
Content-Type: text/html; charset=ISO-8859-1
<=== Headers 
```

我猜我只是缺少某种类型的请求等。任何提示、技巧、解决方案或其他调试建议都会很棒。

谢谢约翰

来自浏览器的跟踪：

```
Request URL:https://<hidden>/download_price.php?f=Pricelist.csv
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:sID=80149acc19e0e2383fa7124e026758a7; cookie_test=please_accept_for_session;  gallery-fadeshow1=3 
Host:<hiden>
Referer:https://<hidden>/account.php
User-Agent:Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Query String Parametersview sourceview URL encoded
f:Pricelist.csv
Response Headersview source
Cache-Control:public
Connection:Keep-Alive
Content-Description:File Transfer
Content-Disposition:attachment; filename="Pricelist.csv"
Content-Length:1799461
Content-Transfer-Encoding:binary
Content-Type:application/vnd.ms-excel
Date:Sat, 16 Mar 2013 12:15:02 GMT
Expires:0
Keep-Alive:timeout=5, max=100
Pragma:public
Server:Apache
Set-Cookie:cookie_test=please_accept_for_session; expires=Mon, 15-Apr-2013 12:15:02 GMT; path=/; domain=<hidden>
Vary:User-Agent
X-Powered-By:PHP/5.2.17 
```

# c# - HTMLAgilityPack 获取带有 id 属性的 td 标签的 innerText

> ID：15448772
> 
> 赞同：6
> 
> 时间：2013-03-16T11:36:47.583
> 
> 标签：c#, html, html-agility-pack, nodes, html-table

我正在尝试使用 HTMLAgilityPack 选择具有 id 属性的 td 的内部文本。

html代码：

```
<td id="header1">    5    </td>
<td id="header2">    8:39pm    </td>
<td id="header3">    8:58pm    </td>
... 
```

代码：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

doc.LoadHtml(data);

var nodes = doc.DocumentNode.SelectNodes("//td[@id='header1']");

if (nodes != null)
{
    foreach (HtmlAgilityPack.HtmlNode node in nodes)
    {
        MessageBox.Show(node.InnerText);
    }
} 
```

我不断收到空节点，因为我没有正确选择 td 标签，但无法弄清楚我做错了什么......

编辑：

我在 header1 和 header2 上犯了一个错误，但是有 5 个不同的 td 标签，标题为 1 到 5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T11:38:11.320

您正在尝试选择`header1`，但 id 是`header2`.

也可以`GetElementById`直接使用：

```
var td = doc.GetElementbyId("header2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:24:57.600

嗯..我不认为你做错了什么。您的代码应该只给您`<td>`with `id="header1"`。如果你有，比方说 from `header1`to `header5`，你可以这样做：

```
for (int i = 1; i <= 5; i++ ) {
    var tdNode = doc.DocumentNode.SelectSingleNode(string.Format("//td[@id='header{0}']", i));

    //do something with the node here
} 
```

`null`尽管我建议您发布您的整个代码，以便我们可以告诉您为什么会得到`<td>`.`//tr[@id='some-id']//td[contains(@id, 'header')]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T09:52:52.353

您可以使用 InnerHtml 属性解决您的问题，例如：

```
var td = doc.GetElementbyId("header2").InnerHtml; 
```

# java - 使用 JPA 2.0 Criteria API 选择作为已定义集的超集的数据

> ID：15448777
> 
> 赞同：0
> 
> 时间：2013-03-16T11:37:06.990
> 
> 标签：java, hibernate, jpa

我正在尝试使用 JPA 2.0 Criteria API（使用 Hibernate 实现）来选择那些拥有由一组模式定义的配件的汽车。

请看我的代码，我想你会明白我在做什么。

实体：

```
@Entity
@Table(name = "CARS")    
public class Car implements Serializable {

   // .. Other fields
    // {{ accessories
    @ElementCollection(fetch = FetchType.LAZY)
    @CollectionTable(name = "CARS_ACCESSORIES", joinColumns = @JoinColumn(name = "CARID"))
    @Column(name = "ACCESSORY", length = 25)
    private Set<String> accessories; 
```

Car 类的存储库/服务方法，用于查找拥有具有模式的配件的所有汽车：

```
public List<Car> findByAccessoryCriteria(Set<String> accessoriesCriteria) {

    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Car> cq = cb.createQuery(Car.class);
    Root<Car> car = cq.from(Car.class);

    List<Predicate> criteria = new ArrayList<Predicate>();

    if(accessoriesCriteria != null) {
       for(String accessory : accessoriesCriteria) {
           if(accessory.contains("%") {
               // TODO: Select all Cars that contains an accessory which match
               // accessory pattern.
           } else {
               // TODO: Select all Cars that contains an accessory which is 
               // equal to accessory pattern.
           }
           // TODO: Note that if a Car NOT owns an accessory which match or is equal to a
           // the pattern, the Car shall NOT be selected.
       } 
    }
    cq.select(car).where(criteria.toArray(new Predicate[criteria.size()]));
    TypedQuery<Car> query = em.createQuery(cq);
    List <Car> cars= query.getResultList();
    return cars;
} 
```

因此，如果 A 车拥有以下附件：“附件 XYZ”、“附件 AAA”，而 B 车拥有以下“附件 XYZ”，并且条件设置为“附件%”，则 A 车和 B 车都应为选择，但如果标准是 Set = "Accessory XYZ", "Accessory AAA" 只有汽车 A 应该被选择。

你能帮我完成这个选择声明吗？请注意，我被迫使用标准 API 和 Hibernate 框架。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:36:30.370

强制使用 Hibernate 与此处无关，因为这是 JPA 条件查询。反正...

```
if (accessoriesCriteria != null) {
   // we have accessory restrictions...

   // now apply each incoming restriction
   for (String accessoryCriteria : accessoriesCriteria) {
       // define a path to the accessories association that we can use to apply
       // the restrictions
       final Join<Car,String> accessoryJoin = (Join<Car,String>) car.join( "accessories" );
       // or, if using generated metamodel:
       // Join<Car,String> accessoryJoin = car.join( Car_.accessories );

       if (accessoryCriteria.contains("%") {
           criteria.add( cb.like( accessoryJoin, accessoryCriteria ) );
       } 
       else {
           criteria.add( cb.equal( accessoryJoin, accessoryCriteria ) );
       }
   } 
} 
```

# mysql - 卡在mysql数据库中的多对多关系

> ID：15448780
> 
> 赞同：0
> 
> 时间：2013-03-16T11:37:21.863
> 
> 标签：mysql, database, many-to-many

我正在做一个简单的购物应用程序作为我的项目。我坚持保持多对多的关系。

我必须将用户事务的所有详细信息存储在一些有关系的表中。以下是一些重要的专栏。

```
User_Id -- Foreign key from user table
Associated_Product_Id -- Foreign key from product table
Associated_Product_Quantity -- Not Null 
```

为了更简单

```
user1         product1         5 pieces
user1         product2         2 pieces
user1         product3         1 piece
user2         product1         2 pieces
user2         product3         3 pieces 
```

这里一个用户可以购买很多产品，一个产品可以被多个用户购买。所以我很困惑，如何管理这张桌子。我的意思是哪个是主键。

我将在多少张表中管理这些信息并不重要。但我需要管理这些信息。任何人都可以就管理这个问题给出一个粗略的想法。这样我就可以朝那个方向努力。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:51:58.040

对于交易，您只需要 1 张桌子 - 就像您刚刚发布的那样。

如果您需要知道某个用户购买了哪些产品，您可以查询此表`User_Id`，如果您需要知道某个用户购买了哪些产品，您可以查询该表`Associated_Product_Id`。（我假设您已经有了产品和用户表，因为您在这里引用了 ID。）

您当然应该添加一列`Transaction_Id`或类似的东西，以唯一标识交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:07:17.983

由于您将购物应用程序作为一个项目进行，因此您可能需要考虑将第四个表添加到您的模式中，以保存订单。

您的表格可能看起来像：

```
Users
-----
UserID (PK)
... (Other user details)

Product
-------
ProductID (PK)
... (Other product details)

Order
-----
OrderID (PK)
UserID (FK)
OrderDate

OrderLine
---------
OrderID (PK)
ProductID (PK)
OrderQuantity 
```

然后，这将使您能够查看用户在任何给定日期购买了多少单位产品，而不仅仅是该用户曾经购买过多少单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:41:25.330

你需要三个表：

1) 用户表 2) 产品表 3) 交易表

用户 1:m 交易 交易 1:m 产品

交易需要密钥来链接用户和产品

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:55:13.090

MySQL 不允许您仅在两个表中使用多对多关系。您必须为要关联的两个表创建第三个表。

第三个表将只包含产品和用户的外键（加上每笔交易的 ID）。

一个简单的例子是：

```
CREATE TABLE Product_User (
    trans_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    product_id INT NOT NULL, 
    user_id INT NOT NULL, 
    FOREIGN KEY (product_id) REFERENCES Product_table (productid), 
    FOREIGN KEY (user_id) REFERENCES User_table (userid)
); 
```

具有表和 id 字段的相应名称。

# ios - XMPPFramework - 如何创建多用户聊天室？

> ID：15448784
> 
> 赞同：1
> 
> 时间：2013-03-16T11:37:30.047
> 
> 标签：ios, xmpp, xmppframework, multiuserchat

如何使用 XMPPFramework 在 iPhone 中实现 GroupChat。我尝试了闲置代码但没有创建房间。我怎么知道是否创建了房间。没有调用 XMPPRoomDelegate。当 Stream 断开连接时，调用了 handleDidLeaveRoom 方法。任何人都可以帮助我。提前致谢

```
#define XMPP_HOSTNAME_2  @"chat.someservername.com"
#define XMPP_JID         @"venkat@chat.someservername.com"
#define XMPP_PASSWORD    @"venkat"
#define ROOM_JID         @"venkat_muc@conference.chat.someservername.com/iMac"

- (void)mucSetupStream
{
    xmppStream = [[XMPPStream alloc] init];

    xmppStream.hostName = XMPP_HOSTNAME_2;
    xmppStream.myJID = [XMPPJID jidWithString:XMPP_JID];

    [xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];

    // Configure xmppRoom

    XMPPJID *roomJID = [XMPPJID jidWithString:ROOM_JID];
    xmppRoomStorage=[XMPPRoomCoreDataStorage sharedInstance];
    xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:self jid:roomJID dispatchQueue:dispatch_get_current_queue()];

    [xmppRoom activate:xmppStream];
    [xmppRoom addDelegate:self delegateQueue:dispatch_get_main_queue()];

    // Start connection process

    NSError *err = nil;
    if (![xmppStream connect:&err])
    {
        DDLogError(@"YapTesting: Cannot connect: %@", err);
    }

    [self performSelector:@selector(ConfigureNewRoom) withObject:nil afterDelay:5];                   
}

- (void)ConfigureNewRoom
{
    NSLog(@"The Room is Configure After 5 Secs");
    [xmppRoom fetchConfigurationForm];
    [xmppRoom configureRoomUsingOptions:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T05:40:04.667

```
 [self ConfigureNewRoom];

 XMPPRoomMemoryStorage *roomMemoryStorage = [[XMPPRoomMemoryStorage alloc] init];

XMPPRoom *xmppRoom1 = [[XMPPRoom alloc] initWithRoomStorage:roomMemoryStorage jid:[XMPPJID jidWithString:@"Fun@conference.server.com"] dispatchQueue:dispatch_get_main_queue()];

[xmppRoom1 activate:[self xmppStream]];

[xmppRoom1 joinRoomUsingNickname:@"Fun" history:nil];
[xmppRoom1 addDelegate:self delegateQueue:dispatch_get_main_queue()];
[xmppRoom1 fetchConfigurationForm];
[xmppRoom1 configureRoomUsingOptions:nil]; 
```

# java - 拉伸溢出在具有 PrintOrder Horizo ntal 的 Jasper 报告中不起作用

> ID：15448785
> 
> 赞同：0
> 
> 时间：2013-03-16T11:37:39.717
> 
> 标签：java, jasper-reports

我正在使用`JasperReports`with`Struts2`生成比较报告的 pdf。我正在做`printOrder="Horizontal"`明智的比较列。

在`detail`-

```
<detail>
    <band height="1200">
                <textField isStretchWithOverflow="true">
                <reportElement style="Serif_Normal" x="0" y="900" width="369" height="20" positionType="Float"/>
                <textFieldExpression class="java.lang.String">
                <![CDATA[$F{PROVFORDRAININGSEDIMENTS}]]>
                </textFieldExpression>
             </textField>
        </band>
</detail> 
```

但是 isStretchWithOverflow 在这里不起作用吗？文本仍然重叠。是因为 printOeder 设置为水平吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:03:15.383

`printOrder`设置为 时，`Horizontal`文本字段不会拉伸。这是因为 JasperReports 努力在报表中的列之间对齐每条记录，并且允许它们拉伸可能会导致后续数据未对齐。

# c# - 通过 Hotmail 向 gmail 发送电子邮件

> ID：15448788
> 
> 赞同：3
> 
> 时间：2013-03-16T11:38:06.770
> 
> 标签：c#

我正在开发发送电子邮件的应用程序。我已经在hotmail 上创建了帐户。这是我的代码：

```
try
{
    using (var smtpClient = new SmtpClient())
    {
        var mailAddressTo = new MailAddress(emailType.EmailAddress);
        var mailAddressFrom = new MailAddress("id");
        using (var mailMessage = new MailMessage(mailAddressFrom, mailAddressTo))
        {
            smtpClient.Host = "smtp.live.com";
            smtpClient.Port = 587;
            smtpClient.EnableSsl = true;
            smtpClient.Credentials = new NetworkCredential("id@hotmail.com", "pass");
            mailMessage.Subject = emailType.EmailSubject;               
            smtpClient.Send(mailMessage);
        }
    }
}
catch (Exception ex)
{} 
```

但这给了我例外：

> 信箱不可用。服务器响应是： 5.3.4 未采取请求的操作；我们注意到您的 Hotmail 帐户中有一些异常活动。为了帮助保护您，我们暂时封锁了您的帐户。

我不想使用 Gmail，因为它需要电话号码。我怎么能用hotmail做到这一点？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T11:49:00.580

试试这个，它对我有用。

```
SmtpClient SmtpServer = new SmtpClient("smtp.live.com");
var mail = new MailMessage();
mail.From = new MailAddress("email@hotmail.com");
mail.To.Add("ToGmail.com");
mail.Subject = "Your Sub";
mail.IsBodyHtml = true;
string htmlBody;
htmlBody = "HTML code";
mail.Body = htmlBody;
SmtpServer.Port = 587;
SmtpServer.UseDefaultCredentials = false;
SmtpServer.Credentials = new System.Net.NetworkCredential("email@hotmail.com", "YourPassword");
SmtpServer.EnableSsl = true;
SmtpServer.Send(mail); 
```

# xpath - 如何在 WSO2 ESB 中按故障顺序访问此消息？

> ID：15448791
> 
> 赞同：1
> 
> 时间：2013-03-16T11:38:21.293
> 
> 标签：xpath, xquery, wso2, wso2esb, wso2dss

如何访问来自 WSO2 ESB 故障序列 ERROR_CODE 中的 wso2dss 端标准错误的错误文本？

我做得很好，但是这个 ERROR_MESSAGE 给了 NULL。我怎样才能做到这一点？

这是 WSO2DSS 标准错误消息：

```
<soapenv:Fault xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Code>
      <soapenv:Value>soapenv:Receiver</soapenv:Value>
   </soapenv:Code>
   <soapenv:Reason>
      <soapenv:Text xml:lang="en-US" xmlns:xml="http://www.w3.org/XML/1998/namespace">The emp_DataService service, which is not valid, does not belong to the emp_DataService service group.</soapenv:Text>
   </soapenv:Reason>
   <soapenv:Detail/>
</soapenv:Fault> 
```

我想访问错误代码以及错误文本。为什么？因为我需要向后端部门发送邮件，这将帮助他们尽快追踪错误。

我如何在 WSO2ESB 中做到这一点？

我希望这两个节点显示：

1.  ```
    <soapenv:Code>
              <soapenv:Value>soapenv:Receiver</soapenv:Value>
           </soapenv:Code> 
    ```

> ```
>  &ltsoapenv:Text xml:lang="en-US"
>  xmlns:xml="http://www.w3.org/XML/1998/namespace">The emp_DataService
>  service, which is not valid, does not belong to the emp_DataService
>  service group. &lt/soapenv:Text> 
> ```

我怎样才能访问这个？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:55:09.417

在 ESB 中，默认情况下无法识别 SOAP 错误。它只是将它作为基本的肥皂消息传递。为了将其识别为 SOAP_FAULT，您应该设置属性

```
<property name="FORCE_ERROR_ON_SOAP_FAULT" value="true"> 
```

之后它将触发传入 SOAP_FAULT 的故障序列。所以你必须声明即将到来的消息是一个 SOAP_FAULT 所以你不得不说它是一个 SOAP_FAULT 并强制它出错序列。这在 [1] 我的 Amila 之前的博客中进行了解释。

对于问题的第二部分，您可以使用有效负载工厂转换。您可以使用以下顺序。

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="ErrorTransformSequence">
   <log level="full">
      <property name="SEQUENCE" value="----------------DSS FAULT------------------"/>
   </log>
   <payloadFactory>
      <format>
         <m:errorMessage xmlns:m="http://dss.error">                  
            <m:error>                     
               <m:message>$1</m:message>                  
            </m:error>
         </m:errorMessage>
      </format>
      <args>
         <arg value="/soapenv:Fault/soapenv:Reason/soapenv:Text/text()"/>
      </args>
   </payloadFactory>
   <header name="Action" value="urn:errormsg"/>
   <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
   <send>
      <endpoint>
         <address uri="http://localhost:9765/services/DssService.SOAP11Endpoint/"/>
      </endpoint>
   </send>
</sequence> 
```

可以指向您的任何电子邮件客户端。给定的 xpath 直接指向您在问题中发布的 SOAP 响应的错误消息。

要发送电子邮件，您可以使用 [2] 中的 wso2 esb 邮件传输。

[1]。[http://maharachchi.blogspot.com/2012/09/now-you-can-send-soapfaults-to-fault.html](http://maharachchi.blogspot.com/2012/09/now-you-can-send-soapfaults-to-fault.html)。

[2]。[http://wso2.org/library/knowledge-base/use-mail-transport-esb-convert-soap-message-plain-text-mail](http://wso2.org/library/knowledge-base/use-mail-transport-esb-convert-soap-message-plain-text-mail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T10:17:58.323

请使用以下代码作为故障序列。

```
<faultSequence>
<log level="custom">
<property name="message" expression="get-property('ERROR_MESSAGE')"/>
</log>
</faultSequence> 
```

# r - R中通过汽车包的三维散点图

> ID：15448793
> 
> 赞同：2
> 
> 时间：2013-03-16T11:38:43.727
> 
> 标签：r, graph

`R`我正在尝试通过`car`包制作三维散点图。MWE 如下所示。

```
pdf(file = "Hyperellipsoid.pdf")
library(car)
scatter3d(
    prestige ~ income + education
  , xlab = ""
  , ylab = ""
  , zlab = ""
  , surface=FALSE
  , fill=FALSE
  , grid=TRUE
  , axis.scales=FALSE
  , ellipsoid=TRUE
  , axis.col= "white"
  , square.col= "white"
  , point.col = "white"
  , data=Duncan
  )
dev.off() 
```

![在此处输入图像描述](../Images/e50d6d4541e22ebadaf8e35ea39193f3.png)

**问题**

1.  如何从图中删除数据圈？
2.  如何将绘图保存为pdf格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:03:15.797

似乎更改色点没有效果。一个解决方案是破解该功能。当我想破解一些 R 函数时，我会给出以下一般情况下的做法。因此，这是关于如何破解您自定义使用的函数的一般答案。

1.  `capture.output(getS3method('scatter3d','default'),file='my.scatter3d.R')`. 这将使用该函数创建一个新文件。
2.  然后，您打开文件并删除最后 2 行。你给这个函数起一个名字。例如：`my.scatter3d`
3.  更改您呼叫的线路`rgl.points`。
4.  最后你像这样调用函数：

    ```
     source('my.scatter3d.R')
     scatter3d(
            z= Duncan$prestige 
            x= Duncan$income ,
            y = Duncan$education,
            .... 
    ```

如果你想调用散点公式函数，你需要破解......

```
 `capture.output(getS3method('scatter3d','formula'),file='my.scatter3dformlua.R')` 
```

并更改线路

```
 scatter3d(X[, 2], X[, 1], X[, 3], xlab = xlab, ylab = ylab, 
            zlab = zlab, labels = labels, radius = radius, ...) 
```

和

```
 my.scatter3d(X[, 2], X[, 1], X[, 3], xlab = xlab, ylab = ylab, 
            zlab = zlab, labels = labels, radius = radius, ...) 
```

**附言**

如果函数抱怨找不到函数，一般我们将包名添加为 anemspace，例如：

```
 rgl:::FUNCTION_ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:30:47.813

你真的不需要破解完整的散点图函数（你可以通过 更容易地看到`car:::scatter3d.default`）；你可以使用`car:::ellipsoid`.

```
library("car")
dmat <- subset(Duncan,select=c(income,education,prestige))
dfn <- 3
dfd <- nrow(Duncan) - 1
level <- 0.95
ell.radius <- sqrt(dfn * qf(level, dfn, dfd))
library("rgl")
open3d()
rgl.material(color="blue")
ellips <- car:::ellipsoid(center = colMeans(dmat),
            shape = cov(dmat),
            radius = ell.radius)
wire3d(ellips)
rgl.postscript("ell3d.pdf",fmt="pdf") 
```

![在此处输入图像描述](../Images/f1b07dcd2dd1513b871b8bb7bcf52780.png)

# python - 用 Python 写入 IC

> ID：15448798
> 
> 赞同：0
> 
> 时间：2013-03-16T11:39:05.010
> 
> 标签：python, c, file-io

我有一个我想用 Python 与之通信的 IC。我有一个工作的 C 应用程序，它写入几个字节然后读取响应，但我似乎无法在 Python 中得到相同的结果。

IC 确实以 Python 代码响应，但错误地暗示写入的内容无效。

这是我到目前为止所拥有的。

工作C实现：

```
unsigned char buffer[2];
int dev;

dev = open(device_path, O_RDWR);

buffer[0] = 0xB8;
buffer[1] = 0x00;

if (write(*dev, buffer, 2) < 2){
    //error
}

buffer[0] = 0xBE;

if(write(*dev, buffer, 2) < 2){
    //error
}

if(read(*dev, output, 9) < 9){
    //error
}

close(dev); 
```

Python：

```
dev = open(device_path, 'r+')
buff = pack('BB', 0xB8, 0x00)
device.write(buff)
buff = pack('BB', 0xBE, 0x00)
device.write(buff)
out = device.read(9)
out = unpack('BBBBBBBBB', out)
print out
dev.close() 
```

工作Python：

```
dev = os.open(device_path, os.O_RDWR)
buff = pack('BB', 0xB8, 0x00)
os.write(device, buff)
buff = pack('BB', 0xBE, 0x00)
os.write(device, buff)
out = os.read(device, 9)
out = unpack('BBBBBBBBB', out)
print out
os.close(dev) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:46:34.400

您应该使用`os.open`打开设备来匹配 C 程序。

如果您坚持使用缓冲 IO，则至少应在尝试读取之前刷新。

# c# - 拦截基类的所有子方法

> ID：15448799
> 
> 赞同：1
> 
> 时间：2013-03-16T11:39:08.463
> 
> 标签：c#, inversion-of-control, aop

我想知道在 C# 中是否可以执行以下操作：

一个基类：

```
public abstract AbstractClass { } 
```

还有一些子类：

```
public class ConcreteClass : AbstractClass 
{
   public int SomeMethod(){}
}

public class ImplClass : AbstractClass 
{
   public int SomeOtherMethod(){}
} 
```

是否可以拦截所有（直接或间接）通过基类固有的类的所有方法？

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:06:04.207

由于 C# 支持 AOP，这可能是可能的

**[代码注入抛出属性](http://www.codeproject.com/Articles/8436/Intercepting-method-calls-in-C-an-approach-to-AOSD)**：使用反射获取其类的属性并调用所需的方法（常用）

[](http://en.wikipedia.org/wiki/Inversion_of_control)**使用像[Spring.Net这样的](http://www.springframework.net/doc-latest/reference/html/aop.html)[**IOC 框架**](http://en.wikipedia.org/wiki/Inversion_of_control)可能是另一种选择。（高级选项，使用第三方库）**

 ****[ContextBound Objects 方法](http://www.codeproject.com/Articles/8414/The-simplest-AOP-scenario-in-C)**`MarshalByRefObject`：您可以从或`ContextBoundObject`使用继承您的类`IMessageSink`。（艰难的路）

可以在[这里找到一篇比较方法的好文章](http://www.c-sharpcorner.com/uploadfile/shivprasadk/aspect-oriented-programming-in-C-Sharp-net-part-ii/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:43:58.597

这是可行的，如果您按照 MSDN 中的示例进行操作，就可以了，请参阅[http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)

抽象方法具有以下特点：

抽象方法隐含地是虚拟方法。抽象方法声明只允许在抽象类中。因为抽象方法声明没有提供实际的实现，所以没有方法体；方法声明仅以分号结尾，签名后没有大括号 ({ })。**

# c# - 将整数添加到标签以进行显示

> ID：15448812
> 
> 赞同：0
> 
> 时间：2013-03-16T11:40:19.167
> 
> 标签：c#

我如何添加一个整数，即。用于显示目的的计数变量？

```
int counter = 0;
    private void btnDisplay_Click(object sender, EventArgs e)
    {

        StreamReader myReader = new StreamReader("StudentRecords.txt");

        while (myReader.EndOfStream == false)
        {
            string[] storageArray = myReader.ReadLine().Split('#');
            if (storageArray[0] == "S")
            {
                lstDisplay.Items.Add("");
                lstDisplay.Items.Add("Student Name: " + storageArray[1]);
                lstDisplay.Items.Add("Student Number: " +storageArray[2]);
                lstDisplay.Items.Add("Attendance: " + storageArray[5]);
                lstDisplay.Items.Add("Modules: ");
                counter++;
            }
            else if (storageArray[0] == "M")
            {
                lstDisplay.Items.Add(storageArray[1]);

            }

        }

        //label to be used to display the number of students
        lblnoOfStudents. ??
        myReader.Close();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:41:32.287

将您的消息分配给`Text`标签的属性：

```
lblnoOfStudents.Text = string.Format("Students: {0}", counter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:41:43.643

```
lblnoOfStudents.Text = counter.ToString(); 
```

这会将标签上的文本更改为该数字。如果您想将其附加到现有文本的末尾，请使用`+=`：

```
lblnoOfStudents.Text += counter.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:43:00.340

您可以使用控件[`.Text`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.text.aspx)的属性。`Label`像;

> 获取或设置 Label 控件的文本内容。

```
lblnoOfStudents.Text = counter.ToString(); 
```

`counter`这将使用变量的字符串表示来更改您的标签文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:47:35.927

这是您的代码的工作示例

```
//int counter = 0; may as well move inside as it looks to be localised
private void btnDisplay_Click(object sender, EventArgs e)
{

    StreamReader myReader = new StreamReader("StudentRecords.txt");
    int counter = 0;
    while (myReader.EndOfStream == false)
    {
        string[] storageArray = myReader.ReadLine().Split('#');
        if (storageArray[0] = "S")
        {
            lstDisplay.Items.Add("");
            lstDisplay.Items.Add("Student Name: " + storageArray[1]);
            lstDisplay.Items.Add("Student Number: " +storageArray[2]);
            lstDisplay.Items.Add("Attendance: " + storageArray[5]);
            lstDisplay.Items.Add("Modules: ");
            counter++;
        }
        else if (storageArray[0] == "M")
        {
            lstDisplay.Items.Add(storageArray[1]);

        }

    }

    //label to be used to display the number of students
    lblnoOfStudents.Text = counter.ToString();
    myReader.Close();

} 
```

编辑：我觉得我应该改进我的答案，所以我想我只是改进你的代码。

```
//int counter = 0; may as well move inside as it looks to be localised
private void btnDisplay_Click(object sender, EventArgs e)
{

    using(StreamReader myReader = new StreamReader("StudentRecords.txt"))
    {
        int counter = 0;
         while (!myReader.EndOfStream)
         {
             string[] storageArray = myReader.ReadLine().Split('#');
              switch(storageArray[0])
              {
              case "S":

                   lstDisplay.Items.Add("");
                   lstDisplay.Items.Add("Student Name: " + storageArray[1]);
                   lstDisplay.Items.Add("Student Number: " +storageArray[2]);
                   lstDisplay.Items.Add("Attendance: " + storageArray[5]);
                   lstDisplay.Items.Add("Modules: ");
                   counter++;
                    break;
               case "M":
                     lstDisplay.Items.Add(storageArray[1]);
                    break;
              default:
                    break;
             }
         }
    }

    //label to be used to display the number of students
    lblnoOfStudents.Text = counter.ToString();
    }
} 
```

*   using 将自动为您关闭阅读器
*   `==false`是多余的，因为您已经可以从该运算符的左侧获得布尔值。
*   switch 语句将使您可以轻松添加多个不同的选项，而不是冗长的 else if

# highslide - Highslide 幻灯片自动显示控件

> ID：15448813
> 
> 赞同：0
> 
> 时间：2013-03-16T11:40:35.270
> 
> 标签：highslide

我有 Highslide (4.1.13) 在许多网站上愉快地工作，包括幻灯片和个人扩展图像，并希望坚持下去。

但是我对幻灯片最理想的做法是在自动模式下启动它，然后在用户悬停或点击图像时显示控件 - 如果用户想要，有效地允许“中断”切换到手动模式在图像上暂停或返回。有什么办法可以做到这一点，或者有没有人找到合理的解决方法？

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:33:05.497

这与您所追求的有多接近？如果您单击任何缩略图，幻灯片会自动开始（并且可以设置为在页面加载时自动开始），如果您悬停，则会出现控件，这会给您一个“暂停”按钮，如果您单击图像以“下一步”或单击“上一个”或“下一个”箭头，它会转到下一个（或上一个）图像并暂停幻灯片。

[http://earlyout.org/autoslide](http://earlyout.org/autoslide)

所有的“魔法”都在配置文件中：[http ://earlyout.org/autoslide/res/hsconfig.js](http://earlyout.org/autoslide/res/hsconfig.js)

# c# - 从另一个 WPF 窗口触发 WPF 窗口上的事件

> ID：15448816
> 
> 赞同：0
> 
> 时间：2013-03-16T11:40:39.353
> 
> 标签：c#, wpf, wpf-controls

我有 2 个 WPF 窗口：

*   主窗口
*   窗口1

在 Window1 中执行的一些查询后，数据被提取并存储在 Window1 中的 List 中

我要实现的目标如下：

1.  在 Window1 中的 botton clck 上，我希望 MainWindow 的复选框控件被取消选中
2.  在 Window1 中单击按钮时，我希望将 List 的数据加载到 MainWindow 的 datagrd1 中

考虑到#2，我尝试在 MainWindow 中引入一个公共静态方法，并在 Window1 中通过按钮单击调用它，但问题是我可以在该方法中引用 datagrid1。错误是：“无法在非静态字段 datagrid1 上引用”。

有没有办法实现上述？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:00:03.857

您可以获取 MainWindow 的当前实例：

```
MainWindow main = (MainWindow)Application.Current.MainWindow; 
```

我无法提出更好的方法，因为您的问题没有提供有关窗口如何交互的太多信息，但这应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T11:48:02.607

您可以使用数据绑定和 mvvm 来实现这一点。有关使用这些技术在窗口之间进行通信的简单应用程序，请参阅此处。

[从子用户控件绑定的 MVVM 主窗口控件](https://stackoverflow.com/questions/15418671/mvvm-main-window-control-bind-from-child-user-control/15418881#15418881)

**编辑** 使用我描述的技术将要求您以不同的方式解决您的问题，并且不会用您现有的代码解决问题。但我相信这比尝试使用静态方法和操作 uielements 要好

# java - 从方法中获取价值

> ID：15448817
> 
> 赞同：0
> 
> 时间：2013-03-16T11:40:41.743
> 
> 标签：java, methods

我有一个方法被称为参数，如下面的代码......我需要在我的代码中使用 Oncomplete 方法之外的参数“arry”......有没有办法可以实现？

```
 Request request = new Request(session,
            "/fql",                         
            params,                         
            HttpMethod.GET,                 
            new Request.Callback(){         
                public void onCompleted(Response response) {
                    String arry = graphObject.getProperty("data").toString();
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:50:11.993

创建一个扩展（实现）Request.Callback 的类并将其传递给方法。
此类可以存储 String 数组。

```
class RequestCallback extends Request.Callback {
    private String arry;

    public String getArry() {
      return arry;
    }

    public void inCompleted(Response response) {
      this.arry = graphObject.getProperty("data").toString();
    }
} 
```

然后：

```
RequestCallback callback = new RequestCallback();
Request request = new Request(session, "/fql", params, HttpMethod.GET, callback);
...
// after the request is completed
callback.getArry(); // and use it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:17:13.023

首先，我建议你在回调中做任何你需要做的事情。出于某种原因，API 似乎是这样设计的。大概是性能。显然被*异步*`onCompleted()`调用。因此，当您尝试在返回后立即访问（使用局部变量）时，该值仍然为空。*`arry``new Request()``final`*

 *但是，如果您仍然需要这样做，这是一种简单的方法。

```
final String result = null;
final CountDownLatch latch = new CountDownLatch(1);

Request request = new Request(session,
            "/fql",                         
            params,                         
            HttpMethod.GET,                 
            new Request.Callback(){         
                public void onCompleted(Response response) {
                    String arry = graphObject.getProperty("data").toString();
                    result = arry; // Assign response
                    latch.countDown(); // Mark completion
                }
            }

latch.await(); // Wait for Request to complete

System.out.println(result); // Use result 
```

再次重申，这将破坏`Reqeust`异步的目的并可能影响性能。*

# haskell - 调用栈管理

> ID：15448818
> 
> 赞同：2
> 
> 时间：2013-03-16T11:40:42.163
> 
> 标签：haskell, compilation, callstack

这根本不是一个真正的 Haskell 问题，但我想有很多追随 Haskell 标签的人会知道这个问题的答案......

我目前正在努力思考如何将函数的输入*和*输出*以及*局部变量*和*临时值都保存在同一个堆栈上，但最终在退出时得到正确的堆栈布局。

通常*堆栈*提供 Push 和 Pull 操作，它们仅修改最顶部的堆栈项。有时，您还可以随机读取堆栈下方的项目。（这解释了如何将变量保留在那里并随机访问它们。）但通常更改堆栈大小的唯一方法是从其中拉出项目。如果您想将项目保留在堆栈顶部并删除其下方的内容，那并不是很好。

真正的编译器是如何做这些事情的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:48:12.507

调用堆栈*帧*可以只在参数所在的空间*之前*为返回值保留空间，然后是局部变量。这就是为什么知道类型有助于确定保留空间的大小。或者，在像 Lisp 这样的动态语言中，指向装箱值的指针会放在那里。它只是特定函数调用协议的一部分。

顺便说一句，带有闭包的语言中的运行时堆栈通常是一棵树（参见“Funarg 问题”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T13:04:45.727

我不能直接与 Haskell 交谈，但一般来说，应用程序二进制接口（或 ABI）的工作是指定数据如何传入和传出函数（称为调用约定）。根据调用约定和数据的大小，您提到的部分或全部内容可能存储在寄存器（甚至是全局）而不是堆栈中。此外，调用函数的返回地址和可能的某些处理器状态也将存储在堆栈中。

以[OS X IA-32 Function Calling Conventions](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/LowLevelABI/130-IA-32_Function_Calling_Conventions/IA32.html#//apple_ref/doc/uid/TP40002492-SW4 "IA-32 函数调用约定")为例。堆栈布局：

![OS X IA-32 堆栈约定](../Images/628b36f78c42bf5139f1954aed875fa5.png)

在这种调用约定中，返回值通常存储在寄存器中

# api - Disqus API 解析线程消息

> ID：15448820
> 
> 赞同：3
> 
> 时间：2013-03-16T11:40:49.547
> 
> 标签：api, disqus

我试图通过 Disqus API 解析线程消息但没有成功。这是我在 php 脚本中的调用：

```
$endpoint = 'http://disqus.com/api/3.0/threads/details.json?api_key='.urlencode($apikey).'&forum='.$shortname.'&thread='.urlencode($thread); 
```

我得到的是一个包含信息但没有发布消息的正文的 .json。

如果我将方法更改`details.json`为`list.json`.

如果我打电话`listThreads.json`，我会得到一个带有以下行的 .json

```
{"code": 3, "response": "Endpoint resource not valid"} 
```

如果我打电话`listPosts.json`，我会得到

```
{"cursor": {"prev": null, "hasNext": false, "next": "0:0:0", "hasPrev": false, "total": null, "id": "0:0:0", "more": false}, "code": 0, "response": []} 
```

（本帖无评论）

# java - JavaMelody Overhead 而不是 JMX

> ID：15448822
> 
> 赞同：1
> 
> 时间：2013-03-16T11:41:09.900
> 
> 标签：java, tomcat, filter, overhead

我正在寻找一个用于 tomcat 的监控工具。我在这里找到了线程：[https ://stackoverflow.com/questions/242958/best-tools-to-monitor-tomcat](https://stackoverflow.com/questions/242958/best-tools-to-monitor-tomcat)

我注意到 JavaMelody 并安装它只花了 10 分钟。但是，我有以下问题，这是由于在 web.xml 中添加了 JavaMelody 作为过滤器，

这不是意味着所有请求在到达我的 servlet 之前都要经过 JavaMelody 吗？因此，这增加了处理每个请求的额外开销。

在我看来，这首先对处理大量请求的生产服务器来说是一个交易破坏者。评论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:51:11.017

我真的认为 javamelody 用户可以编写并给出自己的答案。

同时，还有一些关于[生产中 javamelody 开销的](https://github.com/javamelody/javamelody/wiki/Overhead)信息。

在我看来，javamelody 开销并不是一个交易破坏者。（我是javamelody的作者）

# c# - 不能为接口模拟传递构造函数参数

> ID：15448824
> 
> 赞同：21
> 
> 时间：2013-03-16T11:41:20.153
> 
> 标签：c#, moq

当我调试代码并阅读带有 mockLessonplannerAFactory 创建的行时，我收到错误：

> *不能为接口模拟传递构造函数参数。*

```
var mockSchoolclassCodeService = new Mock<ISchoolclassCodeService>();
var mockDateService = new Mock<IDateService>();
var mockLessonplannerAFactory = new Mock<ILessonplannerAFactory>(mockDateService.Object);
var mockLessonplannerBFactory = new Mock<ILessonplannerBFactory>(mockDateService.Object);

var service = new TimeTableService(mockUnitOfWork.Object, mockLessonplannerAFactory.Object, mockLessonplannerBFactory.Object, mockSchoolclassCodeService.Object); 
```

我的 TimeTableService 只接受接口类型的实例。但是 mockLessonplannerAFactory 和 BFactory... 想要在他们的构造函数中也传递一个 IDateService。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T11:45:17.090

从接口创建的模拟将具有默认构造函数，因为接口没有构造函数。请记住，您是在模拟接口而不是具体类。

“但是 mockLessonplannerAFactory 和 BFactory ......希望在他们的构造函数中也传递一个 IDateService。”

它们都是从接口模拟的，所以没有构造函数。模拟类将创建一个不需要传递任何东西的默认构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-29T10:35:43.227

你只是想做的事...

1）创建一个普通的界面模拟。

```
 var mockDateService = new Mock<IDateService>(); 
```

2）进行设置以接受您需要作为构造函数参数的事物方式。

```
mockDateService .Setup(s => s.ConstructorParam).Returns(constructorParamValue); 
```

# android - 将 CheckBox 添加到单选集 AlertDialog

> ID：15448828
> 
> 赞同：2
> 
> 时间：2013-03-16T11:41:37.263
> 
> 标签：android, android-layout, customization, android-alertdialog, radiobuttonlist

我想用一个选择列表向这个标准 AlertDialog 添加一个复选框

```
new AlertDialog.Builder(this)
.setSingleChoiceItems(R.array.difficultyLevel_list, 1, new DialogInterface.OnClickListener() {
    @Override public void onClick(DialogInterface dialog, int which) { level = which; }
})
.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
    }
})
.setNegativeButton(android.R.string.cancel, null)
.show(); 
```

现在，它很好地显示：

![在此处输入图像描述](../Images/eede34fe77f924204417ceadfabbef08.png)

我转向使用自定义布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <CheckBox
        android:id="@+id/levels_keep"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:checked="false"
        android:text="@string/levels_keep" />

    <ListView
        android:id="@+id/levels_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/difficultyLevel_list"
        android:choiceMode="singleChoice" />

</LinearLayout> 
```

使用此代码：

```
LayoutInflater inflater = getLayoutInflater();
final View customView = inflater.inflate(R.layout.dialog_levels, null);
final ListView list = (ListView) customView.findViewById(R.id.levels_list);
final CheckBox keep = (CheckBox) customView.findViewById(R.id.levels_keep);
// list.setSelected(level);
list.setItemChecked(level, true); // Marks the item as checked
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        level = position;
    }
});

new AlertDialog.Builder(this)
.setView(customView)
.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        CheckBox keep = (CheckBox) findViewById(R.id.levels_keep);
        if( keep.isChecked() ) {
            Context context = PlayersActivity.this;
            SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context);
            Editor editor = sp.edit();
            editor.putString(context.getString(R.string.pref_level_key), String.valueOf(level));
            editor.commit();
        }
    }
})
.setNegativeButton(android.R.string.cancel, null)
.show(); 
```

其中显示（列表可滚动）：

![在此处输入图像描述](../Images/1dd4f1973204fce1b09d02a63dfc8e56.png)

有几件事我无法弄清楚：

1.  为什么我在列表中看不到单选按钮？
2.  ~~如何设置默认选中项？~~（用解决方案编辑了代码）
3.  ~~如何聆听选择的变化？~~（编辑代码，因为我找到了怎么做）
4.  如何在复选框方块和复选框文本之间添加填充。我尝试了 android:paddingLeft 但更糟糕的是，文本和正方形重叠。我试过 android:drawablePadding 没有效果。
5.  为什么主题变了？（不是很重要，只是好奇）**编辑**似乎主题颜色都搞砸了，当我点击一个项目时，它的文本颜色变成黑色并“消失”到行的背景中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:51:48.443

> 为什么我在列表中看不到单选按钮？

似乎设置`android:entries`属性会`ListView`创建一个`ArrayAdapter`using`com.android.internal.R.layout.simple_list_item_1`作为布局。我不知道该布局是否完全复制了该`android.R.layout.simple_list_item_1`布局，但如果确实如此，那么它只是一个`TextView`所以不可`CheckBox`用。

> 如何设置默认选中项？

如果我上面说的是真的，那么删除属性并在代码中为`entries`*levels_list* 设置适配器，用作行布局。`ListView``android.R.layout.simple_list_item_single_choice`

> 如何聆听选择的变化？

`OnItemClickListener`在`ListView`from 布局上设置一个。

> 如何在复选框方块和复选框文本之间添加填充。我尝试了 android:paddingLeft 但更糟糕的是，文本和正方形重叠。我试过 android:drawablePadding 没有效果。

使用简单的`CheckBox`和 a`TextView`而不仅仅是 a `CheckBox`，您可以随意放置它们。

> 为什么主题变了？（不是很重要，只是好奇）

我不知道。首先，正如我在上面所说的，它`ListView`使用了一种特殊的布局（我不知道它的样式），而且您使用的是自定义视图而不是普通`ListView`内容，而普通内容又可以采用不同的样式。

如果您只想`ChekcBox`在标题中添加一个，为什么不在 上设置[一个自定义标题](http://developer.android.com/reference/android/app/AlertDialog.html#setCustomTitle%28android.view.View%29)`AlertDialog`并继续使用`setSingleChoiceItems`呢？

**由 OP 用解决方案编辑**

我在这里发布了工作代码，因为它绝对基于 Luksprog 的答案，我想将其标记为答案。这段代码已经过测试并且工作正常。

```
LayoutInflater inflater = getLayoutInflater();
final View customView = inflater.inflate(R.layout.dialog_levels, null);
final ListView list = (ListView) customView.findViewById(R.id.levels_list);
final CheckBox keep = (CheckBox) customView.findViewById(R.id.levels_keep);
String [] items = getResources().getStringArray(R.array.difficultyLevel_list);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, items);
list.setAdapter(adapter);
list.setItemChecked(level, true);
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        level = position;
    }
});

new AlertDialog.Builder(this)
.setView(customView)
.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        MyLog.w(TAG,"Level is " + level);
        if( keep.isChecked() ) {
            Context context = PlayersActivity.this;
            SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context);
            Editor editor = sp.edit();
            editor.putString(context.getString(R.string.pref_level_key), String.valueOf(level));
            editor.commit();
        }
    }
})
.setNegativeButton(android.R.string.cancel, null)
.show(); 
```

# windows-phone-7 - 我们可以在 Windows Phone 中以编程方式获取应用程序列表吗？

> ID：15448832
> 
> 赞同：1
> 
> 时间：2013-03-16T11:42:11.240
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1

是否可以使用 c# 代码在 windows phone 中获取应用程序列表及其名称？以及启动手机中安装的任何应用程序的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:45:52.557

您无法获取安装在 Windows Phone 上且由**调用应用程序的发布者以外的其他**人发布的应用程序列表。

**但是，有一种方法**可以获取设备上安装的应用程序列表，这些应用程序来自调用者应用程序的发布者。这就是[我所说的](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207014%28v=vs.105%29.aspx)：

```
IEnumerable<Package> apps = Windows.Phone.Management.Deployment.InstallationManager.FindPackagesForCurrentPublisher();
apps.First().Launch(string.Empty); 
```

这要求您的应用程序在 Windows Phone 8 设备上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:26:23.443

使用当前的 Windows Phone SDK，您无权访问该信息。

有些应用程序允许您提供您的 Live Id，然后它们将进入您的个人资料并获取有关您已安装的应用程序的信息，但这实际上将允许他们使用您的 Live Id 做任何他们想做的事情，所以我不会不要走那条路……

# forms - 事件表单 Symfony2.1

> ID：15448836
> 
> 赞同：0
> 
> 时间：2013-03-16T11:42:54.790
> 
> 标签：forms, symfony, symfony-2.1

我正在尝试使用表单的侦听器（尝试使用 pre_set_data 和 pre_bind），但出现此错误

缺少必需的选项“类”。

```
 public function bindData(DataEvent $event) {
    $data = $event->getData(); 
    $form = $event->getForm();

    if (null === $data) {
        return;
    }

    $form->add($this->factory->createNamed('citta','entity', array(
                    'label' => 'form.citta',
                    'empty_value' => 'form.scelta',
                    'required' => true,
                    'translation_domain' => 'FOSUserBundle',
                    'class' => 'MyBundle:GeoNames',
                    'property' => 'geonameid',
                    'query_builder' => function(\MyBundle\GeoBundle\Entity\GeoNamesRepository $er) {
                        //return $er->getCountry();
                    },
        )));
    //}
} 
```

如果将其放入静脉中，则相同

我也试试

```
$form->add($this->factory->createNamed('citta','entity',null, array( 
```

但是我有

```
Expected argument of type "Doctrine\ORM\QueryBuilder", "NULL" given 
```

我正在关注食谱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:15:09.467

它应该是 ：

```
$form->add($this->factory->createNamed('citta','entity', null, array( 
```

参见代码：/vendor/symfony/symfony/src/Symfony/Component/Form/FormFactory.php 第 45 行

# c# - 如何在不向方法传递参数的情况下从方法设置模拟数据

> ID：15448838
> 
> 赞同：2
> 
> 时间：2013-03-16T11:43:26.953
> 
> 标签：c#, moq

这就是我的方法，我只想返回一个周期列表而不关心参数。

courseplannerAFactory 需要被隔离。我只对获取返回值（句点）来测试类中的其他逻辑感兴趣。

```
 mockLessonplannerAFactory.Setup(s => s.Create(DateTime.Now, DateTime.Now, Enumerable.Empty<TimeTable>(), TimeTable.WeekType.A, DayOfWeek.Sunday,null)).Returns(periods); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:49:53.817

`It.IsAny<>()`如果您不关心参数的实际值，则可以使用：

```
mockLessonplannerAFactory.Setup(s => s.Create(It.IsAny<DateTime>(), It.IsAny<DateTime>(), It.IsAny<IEnumerable<TimeTable>>(), It.IsAny<TimeTable.WeekType>(), It.IsAny<DayOfWeek>(), null)).Returns(periods); 
```

我不知道最后一个参数是什么类型，但`It.IsAny<>()`如果您的测试代码没有为该参数传递 null，则您需要传递该参数。

# java - 将 JSON 响应映射到多个 POJO

> ID：15448839
> 
> 赞同：0
> 
> 时间：2013-03-16T11:43:36.513
> 
> 标签：java, json, spring, jackson

我以 JSON 的形式向 spring 控制器发送响应，我想将它映射到两个不同的 POJO。因为它包含两个 pojo 的组合数据。我该怎么做。

我发送 JSON 的代码

```
$("#configure-buy-online").click(
        function(e) {
            var customProduct = '{"name":"Custom'
                + '","vcpu" : "'
                + $('#core')
                        .val()
                + '","ram" : "'
                + $('#ram')
                        .val()
                + '","hddSata":"'
                + $('#hddsata')
                        .val()
                + '"}';
            console.log("Product :"+ customProduct);
            $
            .ajax({
                type : 'POST',
                url : '../addToCartCustomize.do',
                dataType : 'json',
                contentType : 'application/json',
                data : customProduct,
                success : function(data) {
                    alert("Success");
                },
                error : function() {

                }
            });
        }); 
```

弹簧控制器

```
String addCustomProductToCart(@RequestBody CustomProduct customProduct)
{

} 
```

我知道如何为 One pojo 做这件事。但不知道如何将相同的 JSON 映射到两个 Pojo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:51:36.170

我不知道有任何 JAX-RS 或类似的方式来做这件事。我会阅读未修​​改的 JSON（作为文本）并直接使用 Jackson：

```
void doSomething(@RequestBody String pureJson) {
  ObjectMapper mapper = new ObjectMapper();  
  PojoA pojoA = mapper.readValue(pureJson, PojoA.class);
  PojoB pojoB = mapper.readValue(pureJson, PojoB.class);
} 
```

或者，您可以将 PojoA 转换为 JSON，然后转换为 PojoB，如下所示：

```
void doSomething(@RequestBody PojoA pojoA) {
  ObjectMapper mapper = new ObjectMapper();  
  String pureJson = mapper.writeValueAsString(pojoA);
  PojoB pojoB = mapper.readValue(pureJson, PojoB.class);
} 
```

但这有点令人费解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:02:57.943

您可以将 2 个 POJO 包装在另一个 POJO 中。

例如。

```
class PapaPojo {

  private BabyPojo1 babyPojo1;

  private BabyPojo2 babyPojo2;
} 
```

您原来的 2 个 POJO在哪里`BabyPojo1`以及在哪里。`BabyPojo2`

# python - 将数字转换为十六进制

> ID：15448840
> 
> 赞同：0
> 
> 时间：2013-03-16T11:43:42.807
> 
> 标签：python

作为练习，我将数字转换为十六进制值。有没有更专业的方法？

```
def hexayacheviren(reqem):
    if reqem==10: 
        return "A"
    elif reqem==11: 
        return "B"
    elif reqem==12: 
        return "C"
    elif reqem==13: 
        return "D"
    elif reqem==14: 
        return "E"
    elif reqem==15: 
        return "F"
    else: 
        return reqem

def hexadecimal(n):
    cavab=[ ]
    i=0
    while (n>0):
        netice=n%16
        cavab.append(hexayacheviren(netice))
        i=i+1
        n=n//16
    string=''.join(str(e) for e in cavab)
    cvbstrng = string[::-1]
    print (cvbstrng)

hexadecimal(3200) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:44:57.010

使用内置函数：`hex`. Python 随附电池

```
>>> hex
<built-in function hex>
>>> hex(9)
'0x9'
>>> hex(21)
'0x15'
>>> hex(10101010101010101010101010101010101)
'0x1f204abeac202ce18095d40a57eb5L' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:11:28.697

你可以简单地使用你的第一个函数 a`dict`并可能抛出一些错误处理，例如：

```
def hexayacheviren(reqem):
    if not 0 <= reqem < 16:
        raise ValueError('Out of range')
    return {10: 'A', 11: 'B', 12: 'C', 13: 'D', 14: 'E', 15: 'F'}.get(reqem, str(reqem)) 
```

如果值为 10、11、12... 之一，则返回相应的字母，否则，将原始数字作为字符串返回。这将导致您能够简化您的第二个函数，因为它的输入总是采用 int，而它的输出将始终是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:35:37.860

这是我的解决方案，它使用了 Python 的一些更有趣的功能，例如产量、生成器理解、三元运算符、字符串索引和各种位旋转杂项：

```
#!/usr/bin/env python

def nibbles(n):
    m = max(4, (n.bit_length()+3) & -4)
    while m > 0:
        m -= 4
        yield (n >> m) & 0x0F

def _hexadecimal(n):
    return "".join("0123456789ABCDEF"[nib] for nib in nibbles(n))

def hexadecimal(n):
    return "-"+_hexadecimal(-n) if n < 0 else _hexadecimal(n)

if __name__ == "__main__":
    import sys
    u = [hexadecimal(i) for i in range(0x10010)]
    v = [hex(i)[2:].upper() for i in range(0x10010)]

    if u == v:
        print("tested ok")
        sys.exit(0)
    else:
        print("test failed!")
        sys.exit(1) 
```

# php - 在 smarty 中相当于 twig 中的宏

> ID：15448843
> 
> 赞同：1
> 
> 时间：2013-03-16T11:44:05.160
> 
> 标签：php, macros, smarty, twig, template-engine

我想知道在 smarty 中是否有来自 twig [http://twig.sensiolabs.org/doc/tags/macro.html的宏功能的等价物。](http://twig.sensiolabs.org/doc/tags/macro.html)

我不想为此使用 smarty 插件，因为我希望能够将这些宏直接写入模板。

我发现的唯一一件事是与`{block}` [http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl](http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl)的模板继承，但我也想传递参数。

有什么等价的吗？

在我的示例中，我想将其用于 html 表单和输入，例如

```
<input type="{$type}" name="{$name}" value="{$value} [...]> 
```

`{$type}`, `{$name}`, 和`{$value}`是参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T17:05:56.717

是的，Smarty 3 的`{function}`标签正是这样做的：[http ://www.smarty.net/docs/en/language.function.function.tpl](http://www.smarty.net/docs/en/language.function.function.tpl)

# robots.txt - 授权权限错误增加 - Google 网站管理员工具

> ID：15448845
> 
> 赞同：1
> 
> 时间：2013-03-16T11:44:08.077
> 
> 标签：robots.txt, google-search-console, google-crawlers

“授权许可错误增加”

在过去的两个晚上，我在我的一个网站的网站管理员工具中遇到了这个错误，我认为可能导致这个错误的唯一更改是我的 robots.txt 文件。

就是这个：

```
User-agent: Mediapartners-Google
Disallow:

User-agent: Googlebot
Disallow:

User-agent: bingbot
Disallow:

User-agent: Yahoo-slurp
Disallow:

User-agent: Msnbot
Disallow:

User-agent: *
Disallow: / 
```

这个机器人文件验证并在网站管理员中我运行了一个测试，看看谷歌是否可以抓取页面，它说谷歌机器人在第 5 行是允许的（这是正确的）但我只是想知道如果

```
User-agent: *
Disallow: / 
```

底部是否覆盖了 Googlebots 的命令？

在我开始收到此错误之前，我放置了

```
User-agent: *
Disallow: / 
```

最重要的是机器人特定的命令 - 但它没有验证，而且 - 我没有收到“授权权限错误增加”错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-12-10T08:16:42.287

```
User-agent: *
Disallow: / 
```

这就是导致爬行块的原因。

# xml - 使用静默模式升级 weblogic 域不断显示 xml 错误

> ID：15448846
> 
> 赞同：0
> 
> 时间：2013-03-16T11:44:21.997
> 
> 标签：xml, oracle, weblogic, weblogic-10.x, weblogic12c

如果您尝试使用静默模式（使用命令行）升级 weblogic，您必须做几件事。

1-使用**server/bin/set/setWLSEnv.sh设置环境**

2-[创建xml文件](http://docs.oracle.com/cd/E24329_01/web.1211/e24497/xml_ref.htm#CACIDHAJ)并将其附加到升级命令中。我们的 XML 是这样的：

```
<plugin-silent-responses>
  <group name="DomainSelectionGroup">
    <plugin name="SelectWebLogicVersionPlugIn">
      <input-adapter name="ChoiceIA">
        <bind-property name="selectedChoiceIds">
          <value>10.3.0.0</value>
        </bind-property>
      </input-adapter>
    </plugin>
    <plugin name="DomainDirectorySelectionPlugIn">
      <input-adapter name="IA">
        <bind-property name="selectedFile">
        ...
        ...
        ...
</plugin-silent-responses> 
```

3-然后导航到域位置并运行命令升级：

java weblogic.Upgrade -mode 静默类型域 [-responses weblogic-upgrade-domain-responses.xml] [-out 文件]

但我们得到像这样的错误：

```
Calling Wizard framework for upgrade: args2: [-mode=silent, -file=wcf/plugin_silent_wizard.xml, -p:plugin:plugin.silent.response.file=weblogic-upgrade-domain-responses.xml, -log=stdout, -p:plugin:plugin.executionPlan.file=weblogic/upgrade/domain/execplan.xml, -p:plugin:I18N_PLUGIN=weblogic/upgrade/i18n_upgrade, -p:plugin:TARGET_VERSION=12.1.1.0]
2013-03-16 10:01:10,055 ERROR [inputAdapter_silent] com.oracle.cie.wizard.WizardController - Uncaught Exception
java.lang.ArrayIndexOutOfBoundsException: 0
        at weblogic.upgrade.domain.directoryselection.SelectWebLogicVersionPlugIn.validateInputAdapter(SelectWebLogicVersionPlugIn.java:50)
        at com.bea.plateng.wizard.plugin.silent.tasks.InputAdapterSilentTask.execute(InputAdapterSilentTask.java:178)
        at com.oracle.cie.wizard.silent.tasks.AbstractSilentTask.run(AbstractSilentTask.java:28)
        at java.lang.Thread.run(Thread.java:722)
A fatal error has occurred.  This application will terminate. 
```

或此错误：

```
743 ERROR [execute] com.bea.plateng.wizard.plugin.silent.tasks.ExecutePlugInTask - Execute Exception ... weblogic.management.ManagementException: Error during transformation: weblogic/upgrade/domain/directoryselection/SelectWebLogicVersion.xsl 
```

很明显，这里的错误在 xml 文件值中

我们按照这里的 oracle 指令从以下位置获取它`(config.xml)` **：**

[http://docs.oracle.com/cd/E24329_01/web.1211/e24497/xml_ref.htm#CACIDHAJ](http://docs.oracle.com/cd/E24329_01/web.1211/e24497/xml_ref.htm#CACIDHAJ)

我们尝试了所有的替代方案，比如`<value>10.3</value>`我们删除了它，然后....但仍然无法正常工作。

我们也开了一个有oracle支持的案例一个多星期没有任何解决方案。

由于 SSL 配置，我看到某些人会发生此错误，但这不是我们这里的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:44:21.997

如果您从比 wls 9.0 更新的版本升级，则不应按照 oracle 文档中的说明填写 weblogic 版本。所以不要从`(config.xml)`

该值必须是`<value>9.0 or higher</value>` 您无法轻易猜到的，并且不在[Oracle 文档](http://docs.oracle.com/cd/E24329_01/web.1211/e24497/xml_ref.htm#CACIDHAJ)中。

所以你的 xml 将是这样的：

```
<plugin-silent-responses>
  <group name="DomainSelectionGroup">
    <plugin name="SelectWebLogicVersionPlugIn">
      <input-adapter name="ChoiceIA">
        <bind-property name="selectedChoiceIds">
          <value>9.0 or higher</value>
        </bind-property>
      </input-adapter>
    </plugin>
    <plugin name="DomainDirectorySelectionPlugIn">
      <input-adapter name="IA">
        <bind-property name="selectedFile">
        ...
        ...
        ...
</plugin-silent-responses> 
```

# javascript - 访问 JSON 中的密钥

> ID：15448849
> 
> 赞同：0
> 
> 时间：2013-03-16T11:44:33.127
> 
> 标签：javascript, json

我将 HashMap 从 Java 端转移到 Javascript 端，我都可以在 Java 端调试我的地图，我可以在浏览器控制台上看到

如果我写：`console.log(responseFromServer[0].userAttributes);`

```
Object
  cn: Array[1]
  sn: Array[1]
  uid: Array[1] 
```

但是当我尝试写

```
console.log(responseFromServer[0].userAttributes['uid']); 
```

或者

```
console.log(responseFromServer[0].userAttributes.uid); 
```

我明白了`null`。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:33:21.633

我正在使用 DWR，但我错过了 Java 控制台上关于缺少转换器的错误。

我将我的 bean 添加到 dwr.xml：

```
<dwr:convert type="bean" class="com.entity.OrganizationAttributeValue"/> 
```

# java - Galaxy Nexus 上的 LED 手电筒：应用程序通过 NULL 表面

> ID：15448851
> 
> 赞同：0
> 
> 时间：2013-03-16T11:44:54.827
> 
> 标签：java, android, camera, surfaceview, flashlight

我一直在尝试让我的 Galaxy Nexus 上的 LED 手电筒亮起，在 StackOverflow 上使用了几种不同的解决方案：

[Galaxy Nexus 上的 LED 手电筒可由什么 API 控制？](https://stackoverflow.com/questions/8876843/led-flashlight-on-galaxy-nexus-controllable-by-what-api)

[Galaxy Nexus 打开手电筒](https://stackoverflow.com/questions/10734858/opening-flashlight-of-galaxy-nexus)

但我仍然收到此错误，我不明白为什么：

> 相机：应用程序通过 NULL 表面

这是我的代码（或者更确切地说是来自其他解决方案的代码稍作编辑）：

```
package com.quinny898.doorcontrol;

import java.io.IOException;

import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;

public class DoorControlDoing extends Activity implements Callback {
public Camera mCamera;

  /** Called when the activity is first created. */

  public void onCreate(Bundle savedInstanceState) {
      setContentView(R.layout.dialog_surface);
      SurfaceView preview = (SurfaceView) findViewById(R.id.surface_view);
      SurfaceHolder mHolder = preview.getHolder();
      mHolder.addCallback(this);

      super.onCreate(savedInstanceState);
      setContentView(R.layout.dialog_surface);
      Camera mCamera = Camera.open();
      Parameters params = mCamera.getParameters();
      params.setFlashMode(Parameters.FLASH_MODE_TORCH);
      mCamera.setParameters(params);      
      mCamera.startPreview();
      try {
            mCamera.setPreviewDisplay(mHolder);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {}

public void surfaceCreated(SurfaceHolder holder) {
    setContentView(R.layout.dialog_surface);
    SurfaceView preview = (SurfaceView) findViewById(R.id.surface_view);
      SurfaceHolder mHolder = preview.getHolder();
    mHolder = holder;
    try {
        mCamera.setPreviewDisplay(mHolder);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    setContentView(R.layout.dialog_surface);
    SurfaceView preview = (SurfaceView) findViewById(R.id.surface_view);
      SurfaceHolder mHolder = preview.getHolder();
    mCamera.stopPreview();
    mHolder = null;
}
} 
```

这是布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <SurfaceView
    android:id="@+id/surface_view"
    android:layout_width="1px"
    android:layout_height="1px"/>
<TextView android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:text="@string/hi"/>
</LinearLayout> 
```

我看不出这里有什么问题，所有的 ID 都是正确的，并且它会很好地膨胀布局，那么为什么它是“NULL”？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T13:01:36.603

```
@Override

 public void surfaceCreated(SurfaceHolder holder) {

    try {
        camera.setPreviewDisplay(holder);
    } catch (Exception e) {

        e.printStackTrace();
    }
}
camera is
camera=Camera.open(); 
```

# ruby-on-rails - Ruby on Rails，delayed_job

> ID：15448859
> 
> 赞同：0
> 
> 时间：2013-03-16T11:45:33.767
> 
> 标签：ruby-on-rails, delayed-job

我将这个[gem](https://github.com/collectiveidea/delayed_job)用于我的应用程序。我找不到我需要的参数。我的控制器中有两个功能：创建和分析。我想`analyse-method`在调用创建方法的 5 分钟后运行一个，或者我在模型中还有一个函数：我想`anylse-method`在调用一个进程方法的 5 分钟后运行一个（来自控制器）的进程。

我发现 smt 是这样的：

```
handle_asynchronously :in_the_future, :run_at => Proc.new { 5.minutes.from_now } 
```

但它并没有说在它应该被调用的函数之后。

**编辑：** 我试图推迟我的工作，它似乎保存了一切，问题是 1 分钟后它没有运行`perform_analysis`方法。可能是什么问题？

模型：

```
after_create :process_name, :perform_analysis

 def perform_analysis
   list=Analysis.do_picture_analyse
   update_image_url(list)

  end
 handle_asynchronously :perform_analysis, :run_at => Proc.new { 1.minutes.from_now } 
```

> SQL (8.3ms) INSERT INTO "delayed_jobs" ("attempts", "created_at", "failed_at", "handler", "last_error", "locked_at", "locked_by", "priority", "queue", "run_at" , "updated_at") 值 (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [["attempts", 0], ["created_at", Sat, 16 Mar 2013 14: 30:19 UTC +00:00], ["failed_at", nil], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/ActiveRecord:Arraydb\n 属性:\ n id: 45\n arraydb_file_name: ND2_CD8_133A.CEL\n arraydb_content_type: !binary |-\n YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFt\n arraydb_file_size: 12110237\n 定义：'yes'\n 患者：ND\n 组织：CD8\n 刺激：\n芯片图像：\n 芯片信息：\n user_id: \n hist: \n hist_RMA: \n created_at: 2013-03-16 14:30:17.698742003 Z\n updated_at: 2013-03-16 14:30:19.297934640 Z\nmethod_name: :perform_analysis_without_delay\nargs: []\n"], ["last_error", nil], ["locked_at", nil], ["locked_by", nil], ["priority", 0], ["queue", nil], ["run_at "，2013 年 3 月 16 日星期六 14:31:19 UTC +00:00]，["updated_at"，2013 年 3 月 16 日星期六 14:30:19 UTC +00:00]]2013 年 3 月 16 日 14:31:19 UTC +00:00]，["updated_at"，星期六，2013 年 3 月 16 日 14:30:19 UTC +00:00]]2013 年 3 月 16 日 14:31:19 UTC +00:00]，["updated_at"，星期六，2013 年 3 月 16 日 14:30:19 UTC +00:00]]

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:55:22.817

您可以使用回调来触发该方法。这将触发方法`:in_the_future`在创建操作完成后作为延迟作业排队运行 5 分钟。

```
after_create :in_the_future 
```

# ios - 如何打破导航控制器链

> ID：15448860
> 
> 赞同：0
> 
> 时间：2013-03-16T11:45:42.770
> 
> 标签：ios, modalviewcontroller, segue, pushviewcontroller, uistoryboardsegue

在我的项目中，我有以下导航控制器链

```
Home controller -> Table View controller -> Page View Controller 
```

现在在页面视图控制器中至少查看一次所有页面后 - 我想自动转到完全不同的视图，即测验视图。

```
Quiz Controller-> Result Controller -> Another Quiz Controller-> Result controller -> Yet another quiz Controller -> Result Controller -> Back to Home Controller 
```

有3种不同的测验。完成所有三个测验后，我想回家。同样在每个结果控制器中，我想提供一个返回家的选项。当到达主页视图时，它应该是一个全新的重新启动。

在任何中间阶段，我都不想通过链返回——即不需要中间控制器。那么为此目的应该使用什么segue呢？

我反对 push segue，因为它会包含所有以前的视图控制器。有什么方法可以停止导航控制器链并启动新的控制器？

如果使用模态视图，则作为一种良好的编程习惯，父视图应该关闭子视图。但在这种情况下，我不想回去，而是想从这个模态视图开始新的导航控制器链。但是最后还是想直接回到home控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:55:05.540

使用`popToRootViewControllerAnimated`或`popToViewController:animated`

`popToRootViewControllerAnimated:`弹出堆栈上除根视图控制器之外的所有视图控制器并更新显示。

`popToViewController:animated:`弹出视图控制器，直到指定的视图控制器位于导航堆栈的顶部。

`popToViewController`例子

```
if([[self.navigationController  viewControllers] containsObject:HomecontrollerObj])
{
    [self.navigationController popToViewController:HomecontrollerObj animated:animation]; 
```

}

回家，也用

```
[HomecontrollerObj.navigationController popViewControllerAnimated:NO];
[TableViewcontrollerObj.navigationController popViewControllerAnimated:NO];
[PageViewControllerObj.navigationController popViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:31:34.233

我最终使用了故事板展开功能。

在 home 控制器中实现一个方法，然后从任何源控制器将 segue 连接到该方法就可以了。

[展开故事板Segues教程](http://www.techotopia.com/index.php/Using_Xcode_Storyboarding_%28iOS_6%29#Unwinding_Storyboard_Segues)

# java - Java：如何从文本文件中读取特定行？

> ID：15448863
> 
> 赞同：2
> 
> 时间：2013-03-16T11:46:02.573
> 
> 标签：java, file-io, text-files

我有这个文本文件：

```
2013001  Jaymarion Manalo L. Service Crew March 15, 2013   8:00   12:00   13:00   17:00   10.0
2013001  Jaymarion Manalo L. Service Crew March 16, 2013   8:00   12:05   13:05   17:30   10.0 
```

现在，我有一个条件，如果 String date1 = "2013 年 3 月 15 日"，它将读取它所属的行，并且只会得到 "8:00"、"12:00"、"13:00" 和“17:00”并将其显示在我声明的文本字段上。我的意思是，这甚至可能吗？它是如何完成的？我希望你明白我想说的话。我对 Java 很陌生-_-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:54:28.970

您可以使用这将文件作为字符串列表读取，[`FileUtils.readLines()`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#readLines%28java.io.File%29) 这将为您提供字符串列表。然后遍历列表并使用查找日期`string.contains("March 15, 2013")`。

注意：*我可以与您分享完整的代码，但您应该尝试使用上述信息进行编码。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:22:28.523

当然这是可能的。

您需要逐行读取文件。检查每一行是否包含`date1`. 如果确实如此，则提取并解析您想要的数据。

这是一个示例代码，您如何使用标准 api 实现这一点：

```
public class ReadFileLineByLineAnExtractSomeText {

    private static final String src = "test.txt";
    private static final String date1 = "March 15, 2013";

    @BeforeClass
    public static void genTextFile() throws IOException {
        OutputStream os = new FileOutputStream(src);
        os.write(("blah bla foo bar\n" +
                "2013001  Jaymarion Manalo L. Service Crew March 15, 2013   8:00   12:00   13:00   17:00   10.0\r\n" + 
                "2013001  Jaymarion Manalo L. Service Crew March 16, 2013   8:00   12:05   13:05   17:30   10.0\r" +
                "... the end").getBytes());
        os.close();
    }

    @Test
    public void testReadAndExtract() throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(src));
        String line = br.readLine();
        int lineNumber = 0;
        while(line != null) {
            lineNumber++;
            int i = line.indexOf(date1);
            if(i != -1) {
                int s = i + date1.length();
                int e = line.length();
                System.out.println(date1 + " found in line " + lineNumber  + " at index " + i + ", extract text from " + s + " to " + e);
                String extractedText = line.substring(s, e);
                String[] extractedTextParts = extractedText.trim().split("\\s+");
                for(String part : extractedTextParts) {
                    if(isTime(part)) {
                        System.out.println("    '" + part + "'");   
                    }
                }
            }
            line = br.readLine();
        }
        br.close();
    }

    private boolean isTime(String part) {
        return part == null ? false : part.matches("\\d{1,2}:\\d{1,2}");
    }
} 
```

输出

```
March 15, 2013 found in line 2 at index 42, extract text from 56 to 94
    '8:00'
    '12:00'
    '13:00'
    '17:00' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:55:25.447

逐行读取...

```
try {
    FileReader fileReader = 
        new FileReader(fileName);

    BufferedReader bufferedReader = 
        new BufferedReader(fileReader);
    //in any loop use bufferedreader.readline() untill you get your desired line
    //to part your string use split()
    bufferedReader.close();         
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:21:39.227

你可以试试这个：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class FileReaderService {

    public static void main(String[] args) {
        FileReaderService fileReaderService = new FileReaderService();
        fileReaderService.performExecute("March 15, 2013");
    }

    public void performExecute(String inputPattern) {
        List<String[]> matches = new ArrayList<String[]>();
        try {
            FileInputStream fileInputStream = new FileInputStream("C:/Users/Guest/Desktop/your-file.txt"); /*change your file path here*/
            DataInputStream dataInputStream = new DataInputStream(fileInputStream);
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(dataInputStream));
            String strLine;
            while ((strLine = bufferedReader.readLine()) != null) {
                if (strLine.contains(inputPattern)) {
                    String[] splits = strLine.split("[\\s]{3,}"); /*splits matching line with 3 consecutive white spaces*/
                    matches.add(splits);
                }
            }
            dataInputStream.close();

            for (String[] items : matches) {
                System.out.println(items[1] + "\t" + items[2] + "\t" + items[3] + "\t" + items[4]);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

**输出：**

```
8:00    12:00   13:00   17:00 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T11:49:40.827

正如建议的那样，您可以迭代到您想要的行，然后您可以尝试这样的事情：-

```
String s= FileUtils.readLines(filename).get(lineNumber); 
```

有关`FileUtils.readLines()`查看[此](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#readLines%28java.io.File%29)内容的更多信息。

# text - monodroid - 将数据写入文本

> ID：15448865
> 
> 赞同：0
> 
> 时间：2013-03-16T11:46:12.210
> 
> 标签：text, ip, xamarin.android

我有一个 IP 部分，包括一个将来可以更改的 IP 地址。

我希望能够读取此 IP 地址并将其写入我在 Assets 文件中创建的文本文件中。

我无法处理这个问题。储蓄可能会走另一条路。我只想读取该地址，并且每次打开应用程序时，我都想查看我输入的最后一个 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:30:51.637

无法覆盖资产中的文件。资产是永远不会改变的静态文件。但是，您想要完成的事情并非不可能。

我可以想到几种方法来实现这一点。

**1.使用`SharedPreferences`**

在代码中的某处有一个默认值。当您输入要连接的新 IP 地址或使用它执行任何操作时，将其保存到并`SharedPreferences`在启动时检查是否已设置并加载它而不是默认值。`key/value``SharedPreferences`

**2.使用应用程序个人存储或SD卡**

就像`SharedPreferences`在第一次启动应用程序时，在个人存储或 SD 卡上使用默认值创建一个文件，然后在您在应用程序中输入新值时覆盖它。

# javascript - 使用 Javascript / jQuery，将列表呈现为表格的最优雅方式是什么？

> ID：15448866
> 
> 赞同：0
> 
> 时间：2013-03-16T11:46:25.190
> 
> 标签：javascript, jquery, html-table

我有一个问题，我有一个从 ajax 回调返回的字符串数组（即图像 url），我需要将图像呈现到 html 表中。问题是我当然不知道列表的长度，但我需要始终呈现一个包含 6 列的表格。建立表格是否更好（然后填写单元格或即时建立表格（循环遍历`.each`下面每个语句中的列数）。第二个看起来更动态但不是很优雅。

```
var tableHTML = [];
tableHTML.push("<table>");

$.each(data.ImageURLs, function(index, imageURL) {

    // create table content
    if (index % 1 == 0) {
        tableHTML.push("<tr>");
    }
    tableHTML.push("<td>" + imageURL + "</td>");

    if (index % 6 == 0) {
        tableHTML.push("</tr");
    }
});

tableHTML.push("</table>");
$("#myTable").html(tableHTML.join("")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:18:53.930

我通常做的是创建一个辅助函数来在需要时将附加元素填充到最后一行。

您可以通过将项目数与每行项目的模数进行比较来获得所需的数量。我`slice`用来创建每一行数据

```
var items_per_row = 6;

var tableHTML = ['<table border="1">'];
var num_items = data.length;

for (j = 0; j < num_items; j = j + items_per_row) {
    var rowEnd = j + items_per_row;
    var rowData = data.slice(j, rowEnd);

    tableHTML.push('<tr>');
    $.each(rowData, function (idx, item) {
        tableHTML.push('<td>' + item + '</td>')
    });
    /* pad last row if needed */
    if (rowEnd > num_items) {
        tableHTML.push(emptyCells(num_items, items_per_row));
    }
    tableHTML.push('</tr>');

}

tableHTML.push("</table>");

function emptyCells(num_items, items_per_row) {
    var qty = items_per_row - (num_items % items_per_row);

    var cells = [];
    for (i = 0; i < qty; i++) {
        cells.push('<td class="empty">Empty</td>')
    }

    return cells.join('')
} 
```

演示：http: [//jsfiddle.net/VTLBF/2](http://jsfiddle.net/VTLBF/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:00:43.620

你能试试这个吗？

[演示](http://jsfiddle.net/mplungjan/D5fWh/)

[https://code.google.com/p/html5shiv/](https://code.google.com/p/html5shiv/)

而这个，只使用`<p>`s

```
@media only screen and (min-width: 740px) {
  #multicolumn { 
    column-count:6; 
    column-gap: 10px; 

    -webkit-column-count: 6; 
    -webkit-column-gap: 10px;

    -moz-column-count: 6;
    -moz-column-gap: 10px;
  }      
  p:first-of-type {
    margin-top:0 !important;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:03:57.890

我认为一个好方法（也许是最好的）是使用像[jquery tmpl](https://github.com/jquery/jquery-tmpl)这样的模板插件。

使用它，您可以通过给它一个数组来绘制整个表格或任何您想要的东西，或者您可以将数据传递给来自服务器的 JSON。

请检查以下问题：

[jQuery 模板可以绑定到原始数​​组吗？](https://stackoverflow.com/questions/6105943/can-jquery-template-bind-to-a-raw-array)

[如何将 jQuery.tmpl 模板呈现为字符串？](https://stackoverflow.com/questions/3991320/how-do-i-render-a-jquery-tmpl-template-to-a-string)

并且不要忘记查看[jquery tmpl](https://github.com/jquery/jquery-tmpl)文档以获取更多信息。

# ios - 越狱iOS设备应用：一致的后台操作

> ID：15448868
> 
> 赞同：2
> 
> 时间：2013-03-16T11:46:32.107
> 
> 标签：ios, jailbreak, airplay, cydia, mpnowplayinginfocenter

我是名为 AirFloat 的 Cydia 调整的作者。一个实现 AirPlay 音频协议（以前称为 AirTunes）的应用程序，可以将音频流式传输*到*您的 iOS 设备。AirFloat 最初是一个 App Store 应用程序，直到它被 Apple 从 App Store 启动。

从那以后，我在 Cydia 中免费提供了它。目前，该应用程序在 Cydia 中与之前的 App Store 版本完全相同。因此，我收到了很多让它在后台工作的请求。但我无法让它工作。

基本上我在考虑两种方法。

注意：AirFloat 在 iOS 锁定屏幕上显示当前正在播放的曲目。

1.  创建一个守护进程，它运行实际的 AirPlay 实现，并使用[notify](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/notify.3.html#//apple_ref/doc/man/3/notify)与 UI 应用程序通信。这行得通。有点儿。它运行并播放音频，但 MPNowPlayingInfoCenter 似乎不能从非 UI 应用程序更新。此外，当守护程序以用户*mobile*运行时。

2.  第二种方法是让它全部在 UI 应用程序中工作。但是我很难让它被暂停。我已将“必需的背景模式”设置为*audio*和*Continuous*。服务器可能仍在运行，但随后 Bonjour 广告被关闭，因为运行循环在后台停止。其次，应用程序应该使用 SpringBoard 自动启动，并在异常退出时重新启动。

我个人更喜欢第二种方法，因为我会避免进行进程间通信。对于这种工作方法，我需要完整的后台执行（包括运行循环），并让它在 SpringBoard 启动时启动并在异常退出时重新启动。

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:10:33.583

首先感谢您在 AirFlow RAOP 方面的出色工作，这是一件非常困难的事情！

所以你可以做的是

**1.创建一个后台任务处理程序作为dispatch_block_t，比方说**

```
 dispatch_block_t myDummyBackgroundTaskBlock = {
        [[UIApplication sharedApplication] endBackgroundTask:myDummyBackgroundTask];
        myDummyBackgroundTask = UIBackgroundTaskInvalid;
        myDummyBackgroundTask = [app beginBackgroundTaskWithExpirationHandler:myDummyBackgroundTask];
    }; 
```

**2\. 在某处定义此后台和前台任务处理程序**

```
 // foreground
        -(void)handleTasksForApplicationInForeground {
        if(myDummyBackgroundTask) { // reset that task
           [[UIApplication sharedApplication] endBackgroundTask: myDummyBackgroundTask];
           myDummyBackgroundTask = UIBackgroundTaskInvalid;
         }
        }

         // background
         -(void) handleTasksForApplicationInBackground {
             UIDevice *device = [UIDevice currentDevice];
             BOOL backgroundSupported = NO;
            if ([device respondsToSelector:@selector(isMultitaskingSupported)])
             backgroundSupported = device.multitaskingSupported;
            if(backgroundSupported && backgroundEnabled) { // perform a background task

                myDummyBackgroundTaskBlock = ^{
                    [[UIApplication sharedApplication] endBackgroundTask: myDummyBackgroundTaskBlock];
                    myDummyBackgroundTaskBlock = UIBackgroundTaskInvalid;
               };

               SEL sel = @selector(doDummyBackgroundTask);
               [self doBackgroundTaskAsync:sel];

               [self performSelector:@selector(doBackgroundTaskAsync:) withObject:nil afterDelay:500.0f]; /// LP: this is the funny part since iOS will kill the task after 500 sec.
                 }
               } 
```

**3.现在让我们在应用程序中处理委托后台模式（如之前定义的那样，您可以在应用程序.plist中使用不同的选项激活后台模式）：**

```
 -(void)applicationDidEnterBackground:(UIApplication *)application {
           [self handleTasksForApplicationInBackground];
         }

        -(void)applicationWillEnterForeground:(UIApplication *)application {
           [self handleTasksForApplicationInForeground];
         } 
```

**4\. 看看后台异步任务选择器做了什么**

```
 -(void) doBackgroundTaskAsync:(SEL)selector {

            @try {
                 if( [[UIApplication sharedApplication] backgroundTimeRemaining] < 5 ) { 
                   return;
                 }

               if(!myDummyBackgroundTaskBlock) { // need to create again on-the-fly
                    myDummyBackgroundTaskBlock = ^{
                          [[UIApplication sharedApplication] endBackgroundTask:myDummyBackgroundTask];
                         myDummyBackgroundTask = UIBackgroundTaskInvalid;
                    };
                 }

                myDummyBackgroundTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:myDummyBackgroundTaskBlock];
              dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

               while ([[UIApplication sharedApplication] backgroundTimeRemaining] > 5.0) {
                  int delta = 5.0;
                  [self performSelector: selector ];
                  sleep(delta);
              }
            });
          }
           @catch (...) {
         }
        } 
```

我知道这个解决方案效果很好，但我知道有时 iOS 无论如何都会终止应用程序后台任务。无论如何，如果用户突然在前台和后台之间切换应用程序，它将无限期地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:53:12.943

部分回答。如果您将“voip”添加为后台模式，它会由 SpringBoard 自动启动。

# php - PHP - 如何在 DOM createElement 中包含引号？

> ID：15448871
> 
> 赞同：0
> 
> 时间：2013-03-16T11:46:36.517
> 
> 标签：php, xml, dom

这是抛出一个错误

`$exp_date = $xml->createElement("expiration_date type='datetime'");`

使用引号内的引号是否有技巧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T11:49:34.493

[`createElement`](http://www.php.net/manual/en/domdocument.createelement.php)不能那样工作。它将*名称*且仅元素的名称作为第一个参数（第二个参数指的是内容，而不是属性）。如果要在其上设置属性，则必须将其作为单独的步骤进行：

```
$exp_date = $xml->createElement("expiration_date");
$exp_date->setAttribute('type','datetime'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:54:58.650

createElemt 的使用方式

```
createElement ( string $name [, string $value ] ) 
```

name：元素的标签名称。

value：元素的值。默认情况下，将创建一个空元素。

关于您的代码，您可以执行以下操作：

```
$exp_date = $xml->createElement("expiration_date");
$exp_date->setAttribute('type','datetime'); 
```

阅读[http://www.php.net/manual/en/domdocument.createelement.php](http://www.php.net/manual/en/domdocument.createelement.php)了解更多信息

# java - 用户可以更改应用主题

> ID：15448874
> 
> 赞同：0
> 
> 时间：2013-03-16T11:46:58.687
> 
> 标签：java, android, eclipse, themes, android-actionbar

我希望我的应用程序的用户能够更改应用程序主题。例如，深色、浅色、浅色，带有深色操作栏和设备默认设置。这怎么可能，我有一个偏好屏幕，里面有一个列表偏好，有四个选项（如上所示）。如何让用户更改应用主题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:56:27.717

如果您只想使用内置主题并且不需要自定义它们，这很容易。

作为一个例子，我将使用`ListPreferece`这样的条目值：

```
<string-array name="pref_theme_values" translatable="false">
    <item>THEME_LIGHT</item>
    <item>THEME_DARK</item>
</string-array> 
```

然后您可以使用此方法检索选定的值：

```
public int getThemeId(Context context) {
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
    String theme = settings.getString(context.getResources().getString(R.string.pref_theme_key), null);

    if (theme == null || theme.equals("THEME_LIGHT")) {
        return android.R.style.Theme_Holo_Light;
    } else if (theme.equals("THEME_DARK")) {
        return android.R.style.Theme_Holo;
    }

    // default
    return android.R.style.Theme_Holo_Light;
} 
```

之后，您应该覆盖该`onCreate`方法：

```
// onCreate
this.mCurrentTheme = this.getThemeId(this);
this.setTheme(this.mCurrentTheme);
this.setContentView(...); // should be after the setTheme call 
```

和`onStart`方法（因为您需要在用户从 settigns 页面返回后立即刷新主题）

```
// onStart
int newTheme = this.getThemeId(this);
if(this.mCurrentTheme != newTheme) {
    this.finish();
    this.startActivity(new Intent(this, this.getClass()));
    return;
} 
```

您还需要以某种方式保存活动状态，以便应用程序在活动重新启动后显示相同的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T12:28:08.827

这是一个如何做的例子；

```
 if (prefs.getBoolean("1darkTheme", false)==false){//user has selected dark theme
        setTheme(android.R.style.Theme_Holo);
        Toast.makeText(getApplicationContext(), "dark", Toast.LENGTH_SHORT).show();
    } else {
        setTheme(android.R.style.Theme_Holo_Light);
        Toast.makeText(getApplicationContext(), "light", Toast.LENGTH_SHORT).show();
    }
    setContentView(R.layout.main); 
```

# xpath - 小于、大于、等于在 XPath 中不能按预期工作

> ID：15448878
> 
> 赞同：0
> 
> 时间：2013-03-16T11:47:28.880
> 
> 标签：xpath, xquery

这是我的 xml 文件：-

```
 <products>
      <product_id value="1">
        <tab_id value="351">
          <tab_name value="test1"/>
          <dist_map value="5"/>
        </tab_id>
      </product_id>
      <product_id value="2">
        <tab_id value="352">
          <tab_name value="test2"/>
          <dist_map value="3"/>
        </tab_id>
      </product_id>
   </products> 
```

这是我的 xpath：-

```
var xPath = '//*[local-name() = "'+elName+'" and '+value+' and '+ value +' '+ls
        +' contains(concat(@value,","),"'+value+',")and '+
        ' translate(@value," -:","")]'+'/../../@value'; 
```

我有三个按钮和两个文本框，代码是：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "xml_converted.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );

        function get_node(ls)
        {
         var elName = $('#select').val();
         var value = $('#value').val();
        var xPath = '//*[local-name() = "'+elName+'" and '+value+' and '+ value +' '+ls
        +' contains(concat(@value,","),"'+value+',")and '+
        ' translate(@value," -:","")]'+'/../../@value';
        var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }

                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }
            $("#result").text(str);
        }
    </script>
</head>
<body>
    <input type="text" id="select">
    <input type="text" id="value">
    <input type="button" name="button" value="Less than" onclick="get_node('<')"></input>
    <input type="button" name="button" value="Grater than" onclick="get_node('>')"></input>
    <input type="button" name="button" value="Equal" onclick="get_node('=')"></input>
    <div id="result">
    </div>
</body>
</html> 
```

使用此代码o / p是：-
我`dist_map`
在第二个文本框中的第一个文本框中输入`3`（其dist_map属性值）
然后单击小于按钮，
如果单击大于按钮则不给出任何输出，然后显示两者`1,2`（其product_id属性值）
这不是完美的o/p。
这里 o/p 只是`1`（它的 product_id 属性值） bcoz 3 小于 to`5`
并且如果单击等于按钮然后工作完美`2`（它的 product_id 属性值）b'coz 两个文本框值在 xml 文件中匹配
这里只有问题 in我的 xpath 或参数传入按钮，如 ( `<`, `>`)
请检查我的这个问题并帮助解决我这个问题......
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:35:26.810

我真的不明白你想通过调用来实现什么`contains`，`concat`以及`translate`在你的 XPath 表达式中。但是，如果您只是想列出`dist_map`价值小于、等于或大于给定值的产品，则以下内容应该有效：

```
var xPath = '//*[local-name() = "' + elName + '" and @value ' + ls + ' ' + value
        + ']/../../@value'; 
```

这将创建如下表达式：

```
//*[local-name() = "dist_map" and @value > 3]/../../@value' 
```

请注意，这不会验证输入。因此，例如，如果输入的值不是数字，它可能会导致无效的 XPath 表达式。

# forms - CodeIgniter 如何在 form_open() 中使用 onsubmit 事件

> ID：15448882
> 
> 赞同：1
> 
> 时间：2013-03-16T11:47:34.447
> 
> 标签：forms, codeigniter

在 HTML 中，我可以调用如下的 javascript 函数

```
 <form type="post" onsubmit ="return test()" >
 </form> 
```

如何在中调用相同的 javascript 函数

```
 form_open(); 
```

当表单发布时，我希望调用函数测试。我如何在 CodeIgniter 中进行上述操作？

**更新**

x.html 是我的 HTML 页面

```
 <form>
    </form>

    <?php $data = array('submit'=>"test()");
   echo form_open(x,$data);
  echo  form_close();
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:56:31.417

在您的模板文件 x.html 中使用

```
<?php $data = array('onsubmit' => "test()"); ?>
<?php echo form_open('email/send', $data); ?>
<?php echo form_submit('mysubmit', 'Submit Post!'); ?>
<?php echo form_close(); ?> 
```

它工作正常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T11:54:37.100

将其作为数组添加到第二个参数中`form_open()`

```
<?= form_open('email/send', array('onsubmit' => 'your js')); ?> 
```

阅读[http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T09:45:50.067

应该试试这个

```
 <?php echo form_open($base_url.'pjremove', "style='display:inline' onsubmit='confirm(your message)'"); ?> 
```

# python - 嵌入 python 脚本安装 ImportError: No module named site

> ID：15448884
> 
> 赞同：2
> 
> 时间：2013-03-16T11:47:39.483
> 
> 标签：python, installation, pythonpath

您好我已经创建了一个允许最终用户使用 python 脚本的应用程序。应用程序的主要部分是用 python 编写的，我已经使用 pyinstaller 编译成一个 exe，这很好，应用程序的一部分工作得很好。

然后，该应用程序调用嵌入 python 的 DLL，然后调用一些最终用户 python 脚本。当我一直在测试它时，这没有问题，但是一旦我使用 pyinstaller 编译了程序，DLL 就会打印错误“ImportError：没有名为站点的模块”。

我在 Windows 上使用 Python 2.7。

从我从其他帖子中可以看出，这是 PYTHONHOME PYTHONPATH 环境变量的问题，我确信我可以在 DLL 中设置它。但是考虑到最终用户可能没有在他们的计算机上安装 Python，我是否需要提供完整的 Python 2.7 安装以及将 PYTHONHOME 和 PYTHONPATH 更改为该安装的程序？这是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:51:01.313

你是对的。即使系统上没有 python，最终用户也应该能够运行您的 exe。相反，当最终用户运行您的 exe 时，您的 exe 应该调用 pyx,pyo 文件。并且，这些文件将由 pyinstaller 打包。此外，您需要确保指向这些 pyx、pyo 文件的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:43:37.560

我让它工作的唯一方法是将一些 python 2.7 与应用程序一起分发，即与嵌入 python 的可执行文件位于同一文件夹中的 Python27 目录下的 Lib 和 DLLs 目录。

这克服了用户可能没有安装 python 的问题，这意味着他们将能够将自己的模块添加到应用程序本地的 python“家”中。这基本上就是我最终为了得到我想要的东西而做的事情。

[https://stackoverflow.com/a/2970407/722634](https://stackoverflow.com/a/2970407/722634)

# java - 保护我的 REST API 免受匿名调用

> ID：15448890
> 
> 赞同：0
> 
> 时间：2013-03-16T11:48:14.637
> 
> 标签：java, android, rest

我为我的 Android 应用程序制作了 REST API。但我想保护它免受任何匿名访问。只有我的 Android 应用程序应该能够访问它。我该怎么做。我想到了一个 API 令牌，我将使用来自我的 Android 应用程序的每个请求对其进行哈希处理并将其发送到我的 REST 服务器。但它并不安全，因为网络嗅探器可以轻松找到散列令牌并将其发送到我的 REST 服务器。是否有任何完整的证明方法可以保护我的 REST API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:59:21.110

正如评论部分中有人提到的，您可以考虑使用 HTTPS。[如果你在IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)上托管你的 web 服务，你可以有一条双向安全线路。应用程序获取证书中的公钥，网络服务器要求返回客户端证书。主题介绍：[如何在 iis 上设置 ssl](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)。对于证书生成，我强烈建议使用[OpenSSL](http://www.openssl.org/)。

另一方面，你可以看看谷歌的[App Engine](https://developers.google.com/appengine/)，我看过这个[教程](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)，看起来不错。

祝你好运！

# regex - 将用户输入转换为正则表达式

> ID：15448892
> 
> 赞同：6
> 
> 时间：2013-03-16T11:48:28.903
> 
> 标签：regex, expression, jsoup

我正在开发一个项目，用户使用 AND OR 运算符输入人类可读的搜索字符串。我举三个例子

1.  a AND (b OR c) -> (?=. *\ba\b)(?=.* (\bb\b)|(\bc\b)).*
2.  一个或（b 和 c）
3.  (a 或 b) 与 (c 或 d)

以上是我可能得到的输入样本。我想接受该输入并将其转换为正则表达式。这不是编译器的示例吗？看着它，我看到我想做的是将高级命令转换为低级命令。您对我如何完成上述工作有什么建议吗？我想要的是，将生成的正则表达式传递给 jsoup（伪选择器：matchesOwn）并查询 html 文档。感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:11:16.153

这样做的一般方法是以易于遍历的数据结构的形式制作中间表示。这通常称为 AST。如果您不熟悉这个概念，请查看[calculator-ast](http://util.io/calculator-ast)，它为计算器语言进行了这种转换。

为了将用户输入的字符串转换为 AST，您需要使用解析器。你可以看看antlr。我个人用的是v3，v4好像还不够成熟。看看[antlr3.org](http://www.antlr3.org/)。如果您想自己编写解析器，您可以尝试使用[pratt 解析器](http://en.wikipedia.org/wiki/Pratt_parser)。这不是微不足道的，并且结合良好的错误处理需要时间，但它可以是一个有趣的练习。

一旦有了 AST，通过遍历 AST 并在进行过程中输出字符，将其转换为正则表达式应该是微不足道的。

祝你好运！

# yii - 如何让这个 Yii 扩展显示资产图像？

> ID：15448895
> 
> 赞同：1
> 
> 时间：2013-03-16T11:48:53.350
> 
> 标签：yii

Yii 1.1.8

**问题：**

我有一个幻灯片（nivo）扩展，它或多或少可以工作，但页面上没有显示图像，也没有动画或效果运行。我看到按钮占位符文本，我可以制作下一个和上一个，但没有效果或图像。

**设想：**

该扩展的 assets 文件夹具有以下结构：

```
assets/themes/default/default.css
assets/themes/default/arrows.jpg
assets/themes/default/bullets.jpg
assets/themes/default/bkground.jpg 
```

在`default.css`我有以下声明：

```
background:#fff url(bkground.jpg) no-repeat 50% 50%;
(...)
background:url(bullets.png) no-repeat; 
```

等等，所以指向根。

这是`publishAssets()`此扩展程序上的内容：

```
$assets = dirname(__FILE__).'/assets';
$baseUrl = Yii::app()->assetManager->publish($assets);
if(is_dir($assets)){
 Yii::app()->clientScript->registerCssFile($baseUrl . '/themes/default/default.css';
} else {
 throw new Exception('Error: Couldn\'t publish assets.');
} 
```

**尝试：**

我已经测试过是否`registerCssFile`正在返回`NULL`，它不是。因此，我相信`default.css`已正确注册。

我检查了这些文件是否出现在 public_html/assets 文件夹中，它们确实出现在：

`public_html/assets/randomhash/themes/default/default.css`（等等...）

为了确定这一点，我检查了 Yii guts 上的发布方法：

```
publish($path,$hashByName=false,$level=-1,$forceCopy=false) 
```

`level=-1`意味着发布所有子目录和文件，所以也可以。

因此，资产正在发布。

**问题：**

我不知道在哪里看更多，为了找出为什么这些图像没有出现而扩展工作正常（但没有它们）。

谁能给我一个线索？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:55:34.360

您的 CSS 可以简单地使用 url(../images/bkground.jpg) 引用图像，而无需知道资产散列的值。

# jsf - Icefaces 和 Richfaces，配置

> ID：15448906
> 
> 赞同：0
> 
> 时间：2013-03-16T11:50:02.437
> 
> 标签：jsf, richfaces, icefaces

我对 JSF 非常陌生，并且正在从事一个项目。

我已经在使用 mojarra 2.0 版的 jsf-api 和 jsf-api-impl。

我也在使用 Richfaces，我的 web.xml 映射就像，

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping> 
```

此时一切正常。我有一个要求，我需要使用 Icefaces 为用户提供上传视频，就像我的经理所说的那样。

所以我从 [http://www.icesoft.org/java/downloads/icefaces-downloads.jsf](http://www.icesoft.org/java/downloads/icefaces-downloads.jsf)下载了版本 3 的jar

现在，我只在我的项目中添加了 icefaces.jar、icefaces-ace.jar。

现在，在 lib 文件夹中添加 jar 并且不修改项目中的任何内容后，我运行该项目。

工作项目现在不工作，我的意思是以前发生动作的几个链接现在没有发生，我认为它被 Icefaces 类拦截。

我不确定这个问题，我也没有得到太多关于日志的信息。

那么，我们可以在一个项目中同时使用 Icefaces 和 Rich Faces 吗？如果我们需要同时使用这两种配置，那么我们需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:26:11.907

Richfaces 和 Icefaces 不能一起使用。但是，由于您使用的是 JSF 2（我猜是 Richfaces 4），因此您可以同时使用 Richfaces 和 Primefaces。事实上，使用 Primefaces 只需要将 jar 添加到您的 CLASSPATH 中。

# python - Python tkinter.ttk 组合框在退出时抛出异常

> ID：15448914
> 
> 赞同：2
> 
> 时间：2013-03-16T11:51:01.070
> 
> 标签：python, combobox, tkinter, ttk

在我的 Python 3.3 代码中，我使用了 ttk 库中的一些组合框，它们运行良好，但如果我使用其中任何一个，当我使用 X 按钮关闭窗口时会出现异常。这是一个例子：

```
from tkinter import Tk,Label,Button
from tkinter import ttk
from tkinter.ttk import Combobox

def cbox_do(event):
    'Used for cbox.'
    clabel.config(text=cbox.get())

a = Tk()
cbox = Combobox(a, value=('Luke','Biggs','Wedge'), takefocus=0)
cbox.bind("<<ComboboxSelected>>", cbox_do)
cbox.pack()
clabel = Label(a)
clabel.pack()
a.mainloop() 
```

如果您在不选择值的情况下关闭它，一切都很好，但是在选择一个值后尝试关闭它，它会退出但会在 python 命令行中打印以下错误：

```
can't invoke "winfo" command:  application has been destroyed
    while executing
"winfo exists $w"
    (procedure "ttk::entry::AutoScroll" line 3)
    invoked from within
"ttk::entry::AutoScroll .41024560"
    (in namespace inscope "::" script line 1)
    invoked from within
"::namespace inscope :: {ttk::entry::AutoScroll .41024560}"
    ("uplevel" body line 1)
    invoked from within
"uplevel #0 $Repeat(script)"
    (procedure "ttk::Repeat" line 3)
    invoked from within
"ttk::Repeat"
    ("after" script) 
```

我该如何解决？如果您能提供任何帮助，我将不胜感激。

更新 1：我的 Python 版本是 v3.3，我使用捆绑的 Tcl/Tk 和 Tkinter。我尝试了 x86 和 x64 版本。

更新 2：仅当我从命令行运行脚本时才会引发异常。它不会出现在空闲状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:57:17.283

这是 ttk 中使用的 Tcl/Tk 绑定代码的问题。

在典型的 python Tkinter 安装中，tcl/tk8.5/ttk/entry.tcl 文件中的注释暗示了该问题：

```
## AutoScroll
#   Called repeatedly when the mouse is outside an entry window
#   with Button 1 down.  Scroll the window left or right,
#   depending on where the mouse is, and extend the selection
#   according to the current selection mode.
#
# TODO: AutoScroll should repeat faster (50ms) than normal autorepeat.
# TODO: Need a way for Repeat scripts to cancel themselves. 
```

基本上，在最后一个窗口关闭并且 Tk 完成后，延迟调用`after`不会被取消并且无法完成，因为过程/函数“winfo”不再存在。当你运行 IDLE 时，仍然有一个窗口，所以 Tk 没有最终确定，错误也没有出现。

您可以通过对消息进行绑定来解决此问题`WM_DELETE_WINDOW`，这会停止重复计时器。代码将是（在 Tcl/Tk 中）：

```
proc shutdown_ttk_repeat {args} {
    ::ttk::CancelRepeat
}
wm protocol . WM_DELETE_WINDOW shutdown_ttk_repeat 
```

对于 Tkinter，它应该以类似的方式工作：

```
from tkinter import Tk,Label,Button
from tkinter import ttk
from tkinter.ttk import Combobox

def cbox_do(event):
    'Used for cbox.'
    clabel.config(text=cbox.get())

a = Tk()
cbox = Combobox(a, value=('Luke','Biggs','Wedge'), takefocus=0)
cbox.bind("<<ComboboxSelected>>", cbox_do)
cbox.pack()
clabel = Label(a)
clabel.pack()

def shutdown_ttk_repeat():
    a.eval('::ttk::CancelRepeat')
    a.destroy()

a.protocol("WM_DELETE_WINDOW", shutdown_ttk_repeat)
a.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T13:33:21.020

我最近遇到了类似的问题。错误信息完全相同。我通过在 Exit 方法中添加 a.quit() 解决了这个问题。（之前这个方法里只有a.destroy()）也许你已经解决了这个问题。但是 schlenk 的回答对我来说效果不佳。所以我希望我的回答能给这个问题提供另一个线索

# zend-form - 在 Zend Framework 2 Forms 中处理依赖关系

> ID：15448919
> 
> 赞同：4
> 
> 时间：2013-03-16T11:51:26.840
> 
> 标签：zend-form, zend-framework2

我正在尝试在 ZF2 中构建一个表单。当我想从数据库表中填充 Select 输入元素的选项数组时，问题就出现了。对此问题的回应[Zend FrameWork 2 Get ServiceLocator In Form and populate a drop down list](https://stackoverflow.com/questions/12459180/zend-framework-2-get-servicelocator-in-form-and-populate-a-drop-down-list) by @timdev 向我指出了描述“正确”方法的 ZF2 文档。我仔细地遵循了这一点，但我怀疑他们一定遗漏了明显的代码，假设我可以填补空白，因为我无法让它工作。谁能看到我做错了什么？

我从添加字段集的表单开始：

```
namespace Ctmm\Form;
use Zend\Form\Form;

class AddPropertyForm extends Form {

public function __construct() {

    parent::__construct('AddProperty');

    $this->setName('addProperty');
    $this->setAttribute('method', 'post');

    $this->add(array(
        'name' => 'property',
        'type' => 'PropertyFieldset'
    )); 
```

} }

然后我创建字段集：

```
namespace Ctmm\Form;
use Ctmm\Model;
use Zend\Form\Fieldset;

class PropertyFieldset extends Fieldset { 

public function __construct(PropertyType $property_type) {
    $this->add(array(
        'name' => 'property_type',
        'type' => 'Zend\Form\Element\Select',
        'attributes' => array(
            'required' => true,
        ),
        'options' => array(
            'label' => 'Property Type',
            'value_options' => array(
                0 => 'Detached house',
                1 => 'Semi-detached house',
                2 => 'Terraced house',
                3 => 'Bungalow',
                4 => 'Maisonette',
                5 => 'Flat',
                6 => 'Land',
                7 => 'Development Opportunity',
            ),
        ),
    ));

} 
```

}

如您所见，我将 PropertyType 依赖项注入到字段集中。在这个阶段，我什至没有使用它来生成选项数组。我对数组值进行了硬编码，以避免添加另一个可能的错误来源。一旦获得要呈现的表单，我将尝试从 PropertyType 表中提取数组数据。

现在我在 Module.php 中设置表单元素管理器：

```
namespace Ctmm;
use Ctmm\Form\PropertyFieldset;
use Zend\ModuleManager\Feature\FormElementProviderInterface;

class Module implements FormElementProviderInterface {

public function getFormElementConfig() {
    return array(
        'factories' => array(
            'PropertyFieldset' => function($sm) {
                $serviceLocator = $sm->getServiceLocator();
                $property_type = $serviceLocator->get('Ctmm\Model\PropertyType');
                $fieldset = new PropertyFieldset($property_type);
            }
        )
    );
} 
```

}

此代码直接来自文档。我试过添加

```
return $fieldset; 
```

到 PropertyFieldset 工厂，我什至尝试添加

```
'invokables' => array(
'PropertyFieldset' => 'Ctmm\Form\PropertyFieldset'
) 
```

到 getFormElementConfig 数组，以及用可调用的替换工厂。

最后一步是使用表单元素管理器在我的控制器操作中创建表单：

```
public function addAction() {        
$formManager = $this->serviceLocator->get('FormElementManager');
    $form        = $formManager->get('Ctmm\Form\AddPropertyForm');
} 
```

无论我做什么，我都会收到一条错误消息，说 Servicemanager 无法创建 PropertyFieldset：

Zend\ServiceManager\Exception\ServiceNotFoundException

文件：

```
/home/mike/public_html/ctmm/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php:456 
```

信息：

```
Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for PropertyFieldset 
```

堆栈跟踪：

```
#0 /home/mike/public_html/ctmm/vendor/zendframework/zendframework/library/Zend/ServiceManager/AbstractPluginManager.php(103): Zend\ServiceManager\ServiceManager->get('PropertyFieldse...', true)
#1 /home/mike/public_html/ctmm/vendor/zendframework/zendframework/library/Zend/Form/Factory.php(110): Zend\ServiceManager\AbstractPluginManager->get('PropertyFieldse...')
#2 /home/mike/public_html/ctmm/vendor/zendframework/zendframework/library/Zend/Form/Form.php(145): Zend\Form\Factory->create(Array)
#3 /home/mike/public_html/ctmm/module/Ctmm/src/Ctmm/Form/AddPropertyForm.php(33): Zend\Form\Form->add(Array) 
```

AddPropertyForm.php 中的第 33 行是我尝试添加自定义 PropertyFieldset 的地方。显然，我在字段集本身或我声明它的方式上有一个错误。我尝试过不注入 PropertyType 依赖项，但这没有什么区别。为了完整起见，我的 PropertyType 模型的代码是：

```
namespace Ctmm\Model;

class PropertyType {
public $id;
public $property_type;
protected $adapter;

public function __construct($adapter) {
    $this->adapter = $adapter;
}

public function exchangeArray($data) {
    $this->id = (isset($data['id'])) ? $data['id'] : null;
    $this->property_type = (isset($data['property_type'])) ? $data['property_type'] : null;
}

public function getPropertyType() {
    return $this->property_type;
}

public function fetchAll() {

    $sql_query = "SELECT id, property_type from property_type";
    $statement = $this->adapter->createStatement($sql_query);
    $results = $statement->execute();
    return $results;
} 
```

}

编辑：

我没有答案，但我做了更多调查。我直接在控制器中创建了一个字段集来测试我的 PropertyFieldset 类及其依赖模型。

```
$property_type = $this->getServiceLocator()->get('Ctmm\Model\PropertyType');
$fieldset = new PropertyFieldset($property_type); 
```

这并没有立即奏效。首先，我必须从 Fieldset 构造器中获取提示

```
public function __construct(PropertyFieldset $property_type) { 
```

变成了

```
public function __construct($property_type) { 
```

然后我不得不添加

```
parent::__construct('propertyfieldset'); 
```

在它允许我添加一个元素之前。

一旦我添加了这些更改，我就可以在控制器中创建一个 PropertyFieldset 对象。我可以通过 var_dump() 对其进行测试。

不幸的是，对 PropertyFieldset 类的这些更改并没有解决基本问题，因此当我尝试在控制器中创建表单时，它会产生与以前相同的错误。我至少免除了 PropertyFieldset 类及其依赖模型，这对我说我的 Module.php 类中的 getFormElementConfig() 有问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T18:09:08.003

所以我做了一些小的改动：

正如您所指出的，`PropertyFieldSet`应该像这样调用父母构造：

```
parent::__construct('propertyfieldset'); 
```

ElementConfig 应该是这样的：

```
public function getFormElementConfig() {
    return array(
        'factories' => array(
            'PropertyFieldset' => function($sm) {
                $serviceLocator = $sm->getServiceLocator();
                $property_type = $serviceLocator->get('Ctmm\Model\PropertyType');
                $fieldset = new PropertyFieldset($property_type);
                return $fieldset;
            },
        )
    );
} 
```

AddPropertyForm 应该是这样的：

```
namespace Ctmm\Form;
use Zend\Form\Form;

class AddPropertyForm extends Form {

    public function init() {

        parent::__construct('AddProperty');

        $this->setName('addProperty');
        $this->setAttribute('method', 'post');

        $this->add(array(
            'name' => 'addproperty',
            'type' => 'PropertyFieldset',
        ));
    }
} 
```

我们不使用 __construct，而是使用 init()。这个函数在工厂实例化时显然被调用：http: [//framework.zend.com/apidoc/2.1/classes/Zend.Form.Form.html#init](http://framework.zend.com/apidoc/2.1/classes/Zend.Form.Form.html#init)

关于构建选择，我会将 TableGateway 对象传递给 fieldSet 而不是模型。然后使用 fetchAll 函数，我们可以在表单中执行以下操作：

```
class PropertyFieldset extends Fieldset {

    public function __construct(PropertyTypeTable $propertyTypeTable) {
        parent::__construct('propertyfieldset');

        $propertyValOpts = array();
        foreach($propertyTypeTable->fetchAll() as $propertyRow) {
            array_push($propertyValOpts,$propertyRow->property_type);
        }

        $this->add(array(
            'name' => 'property_type',
            'type' => 'Zend\Form\Element\Select',
            'attributes' => array(
                'required' => true,
            ),
            'options' => array(
                'label' => 'Property Type',
                'value_options' => $propertyValOpts
            ),
        ));
    }
} 
```

希望这可以帮助 ：）

# android - 为什么 android_avd_detials 中的密度不同于 getResources().getDisplayMetrics().density

> ID：15448928
> 
> 赞同：1
> 
> 时间：2013-03-16T11:52:07.800
> 
> 标签：android

在我的 android 中，avd 密度是`120`，但是当我在它的帮助下计算它时 `getResources().getDisplayMetrics().density`是`.75`。

为什么它们不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T04:56:44.460

AVD 密度值是设备所在的 DPI（每英寸点数）存储桶，其中之一：

```
LDPI   120
MDPI   160
HDPI   240
XHDPI  320
XXHDPI 480 
```

DisplayMetrics 密度值是基本密度 (MDPI) 的分数。1 DP（与设备无关的像素）在 MDPI 密度下等于 1 个像素，而 1 * 是所有其他像素的分数密度。

如果您只是想获得等效的 DPI 值，DisplayMetrics 中还有另一个名为`densityDpi`.

# c++ - 如何在不同级别命名相似的方法？

> ID：15448930
> 
> 赞同：2
> 
> 时间：2013-03-16T11:52:24.750
> 
> 标签：c++, naming

例如，我有两个方法 CreateNewDocument 和 OpenDocument，它们在我的 GUI 代码中处于两个不同的级别。一个是低级别，它只是按照方法名称的含义进行操作；另一个是高级别，它将在执行所需工作之前检查现有文档可能未保存的情况。低级名称出现在高级代码中，因为它们被调用来实现高级方法。我的问题是如何区分它们以免混淆用户和读者？下面请细化图解代码。

```
class GuiClass
{
public:
    // Re-implement to tell me how to do the low-level create new document.
    virtual void LowLevelCreateNewDocument(); 

    // Then I do the high-level version for you.
    void HighLevelCreateNewDocument()
    {
        // Handle unsavings and blabla...
        ...
        // Then do the low-level version
        LowLevelCreateNewDocument();
        // Afterward operations
        ...
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:17:50.387

我会制作那个“低级”`CreateNewDocument()`方法，`protected`或者`private`，因为看起来，它应该只从该类中的其他类成员或派生的成员中调用。

```
class GuiClass
{
public:
    // Then I do the high-level version for you.
    void CreateNewDocument()
    {
        // Handle unsavings and blabla...
        ...
        // Then do the low-level version
        CreateNewDocumentInternal();
    }

protected:
    //pure virtual to enforce implementation within derived classes.
    //                                        |
    //                                        V
    virtual void CreateNewDocumentInternal() = 0; 
};

class GuiClassImpl : public GuiClass
{
protected:
    /*virtual*/ void CreateNewDocumentInternal()
    {
        //Do the low-level stuff here
    }
}; 
```

如果这些方法确实在不同的实现级别上，请考虑将它们放入不同的类或名称空间中，如前所述。对于必须实现纯虚拟的受保护成员函数的子类，您已经有了适当的封装。

# datatable - 数据表 - 从字符串类型列获取最大值（日期）

> ID：15448936
> 
> 赞同：1
> 
> 时间：2013-03-16T11:52:42.323
> 
> 标签：datatable

我在 c# 中有这个数据表结果

```
DAY      Employee Job1   Job2   Job3
1/1/2012    a    1      1      1 
1/1/2012    b    2      2      2
1/1/2012    c    2      1      4
1/1/2012    d    4      2      1
1/2/2012    a    3      2      5
1/2/2012    b    2      2      2
1/2/2012    c    3      3      3
1/2/2012    d    1      1      1
1/3/2013    a    5      5      5
1/3/2013    b    2      2      6
1/3/2013    c    1      1      1
3/13/2013   d    2      3      4
2/1/2013    a    2      2      2
2/1/2013    b    5      5      2
2/7/2013    c    2      2      2
2/5/2013    a    3      3      3
3/2/2013    b    2      3      3
2/1/2013    a    4      4      2 
```

现在我想从第一列（MM/dd/yyyy）中找到最大日期，它应该是 2013 年 3 月 13 日。另请注意，此列是字符串数据类型。

拜托，任何人都可以建议我如何在 c# 中使用“Linq”来做到这一点，或者有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:40:50.090

使用`DateTime.Parse`或`DateTime.ParseExact`将字符串解析为数据时间。这应该有效：

```
DateTime maxDate = table.AsEnumerable()
    .Max(r => DateTime.Parse(r.Field<string>("DAY"))); 
```

但是，为什么它首先是一个字符串？

**编辑** 您还应该考虑用于创建此字符串的文化。解析字符串时必须再次使用这种文化。

所以这个结果适用于不同的文化，但结果是不同的，你可以在这里看到：

```
System.Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");
DateTime maxDate = table.AsEnumerable()
    .Max(r => DateTime.Parse(r.Field<string>("DAY")));
Console.WriteLine(maxDate);
System.Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("de-DE"); // germany
maxDate = table.AsEnumerable()
    .Max(r => DateTime.Parse(r.Field<string>("DAY")));
Console.WriteLine(maxDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:08:29.733

即使程序是由同一家公司制作的，程序之间的格式化也会很烦人。这个线程是相似的，希望能给你指明正确的方向：

[从 Excel 工作表导入时的日期时间格式不匹配](https://stackoverflow.com/questions/965017/datetime-format-mismatch-on-importing-from-excel-sheet)

如果您已确认它是 a `String`，那么您是否尝试过简单的： `DateTime dt = Convert.ToDateTime(date);`？

# gwt - 如何在 GWT 中使用 3party json 服务

> ID：15448940
> 
> 赞同：1
> 
> 时间：2013-03-16T11:53:32.947
> 
> 标签：gwt, jsonp, gwtquery, gquery

我正在寻找 GWT 中访问 3party json 休息服务并快速解析其响应的最佳方式。其余服务提供`callback`参数，他们给我们的示例是使用 jQuery.jsonp：

```
$.ajax({
  type: 'GET',
  url: 'http://server_name?id=and_id&callback=?',
  contentType: "application/json",
  dataType: 'jsonp',
  success: function(js) {/*{id='id',status='sold',prod_name='name',price=0.0 ...}*/},
  error: function(e) {}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:18:21.807

虽然 GWT 带有一个[JsonpRequestBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/jsonp/client/JsonpRequestBuilder.html)来通过脚本标签执行请求和[AutoBeans](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)来处理 json 响应并生成 java 实现，但我更喜欢[gwtquery](https://code.google.com/p/gwtquery/) [Ajax](https://code.google.com/p/gwtquery/wiki/Ajax)和[DataBinding](https://code.google.com/p/gwtquery/wiki/DataBinding)因为它的简单性。

在您的情况下，您可以拥有与您的提供者提供给您的几乎相同的语法：

```
 ajax("http://server_name?id=and_id&callback=?",
       $$("type:'get', dataType: 'jsonp'),
       new Function() {
        public void f() {
          Properties jso = getDataProperties();
          String status = jso.get("error");
        }
  }); 
```

如果您喜欢使用构建器，因为您喜欢 get/setters，您的代码可能如下所示：

```
 public static interface MResponse extends JsonBuilder {
    String getId();
    String getStatus();
    String getProd_name();
    double getPrice();
  }

  ajax(Ajax.createSettings()
           .setType("get")
           .setDataType("jsonp")
           .setUrl(""))
    .done(new Function() {
      public void f() {
        MResponse resp = GWT.<MResponse>create(MResponse.class)
                            .load(getDataProperties());
        String status = resp.getStatus();
      }
    }); 
```

# javascript - 使用变量调用对象属性

> ID：15448948
> 
> 赞同：1
> 
> 时间：2013-03-16T11:54:20.503
> 
> 标签：javascript

这段代码不像我想的那样工作。

```
var csd = {large10x10: 0}
var nextitem = "large10x10";
buildings.push(nextitem,"black",a);
csd.nextitem += 1; 
```

在`csd.nextitem +=1`我希望它为 csd.large10x10 加 1。我怎么做？或者我用谷歌搜索什么来找到答案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:55:30.817

您需要访问其值`nextitem`不在名为 nextitem 的属性中。在 JavaScript 中，这是用括号表示法完成的。

尝试

```
csd[nextitem] += 1; 
```

这是[代码工作的小提琴](http://jsfiddle.net/gvPUf/)

# javascript - D3 创建表

> ID：15448952
> 
> 赞同：1
> 
> 时间：2013-03-16T11:54:29.733
> 
> 标签：javascript, d3.js

根据此处给出的解决方案：[创建链接到 csv 文件的表](https://stackoverflow.com/questions/9268645/d3-creating-a-table-linked-to-a-csv-file)

我不明白这部分代码会发生什么：

```
var cells = rows.selectAll("td")
        .data(function(row) {
            return columns.map(function(column) {
                return row[column];
            });
        }) 
```

我知道 data() 将在我的数组“行”中的每个元素上循环，并且 Array.prototype.map() 将“创建一个新数组，其结果是对该数组中的每个元素调用提供的函数”。

在`return columns.map(function(column)`，“列”到底是什么？

如果有人能逐步解释两个匿名函数形成的循环，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T12:09:53.103

这是一个[嵌套选择](http://bost.ocks.org/mike/nest/)的例子。要理解它，您还需要考虑将数据绑定到行之前的代码。

在这段代码中发生的事情是，您告诉`data()`函数考虑在上一次`data()`调用中传入的数组的每个单独元素

```
var rows = tbody.selectAll("tr")
    .data(data)
    ... 
```

现在将依次处理并调用这些元素中的每一个`row`。内部匿名函数获取这一行，并且对于 的每个元素`columns`，从中获取`row`由特定指定的元素`column`。

也就是说，`row`是一个关联数组（或对象），其键名与数组中的元素名称相同`columns`。它将这些`map`元素提取到一个数组中，然后将其用作特定`td`单元格的数据。

在所有内部处理之后，将一个数组传递给`data()`——尽管传入了一个数组元素，但还是返回了一个数组。这样，可以使用行和列创建表（这就是嵌套选择的重点）。绑定到每个`td`单元格的东西是最里面的`return`返回值。

为了回答您的具体问题，该变量将依次`column`绑定到数组的每个元素。`columns`也就是说，在 的第一次迭代期间`map()`，它将是`columns[0]`，在第二次迭代期间，`columns[1]`以此类推。

# php - PHP - 在 PHP 会话中从 MYSQL 数据库中存储帐户 ID

> ID：15448958
> 
> 赞同：-3
> 
> 时间：2013-03-16T11:54:53.010
> 
> 标签：php, mysql, database, session

```
$id = mysql_query("SELECT id FROM account WHERE username='".$username."' LIMIT 1") or die(mysql_error);

$_SESSION['id'] = $id ;

echo ("ID: ".$_SESSION["id"].""); 
```

它输出“ID：0”，而数据库中帐户的 id 应该是 1。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:57:21.713

`mysql_query`返回一个资源。返回的结果资源应该传递给`mysql_fetch_array()`和其他处理结果表的函数，以访问返回的数据。

```
$result = mysql_query("SELECT id FROM account WHERE username='".$username."' LIMIT 1") or die(mysql_error); 
while ($row = mysql_fetch_assoc($result)) 
{
    $_SESSION['id'] = $row['id'] ;
}
echo ("ID: ".$_SESSION["id"].""); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T11:57:33.987

尝试这个

```
$id = mysql_query("SELECT id FROM account WHERE username='".$username."' LIMIT 1") or die(mysql_error);

while($myid = mysql_fetch_array($id)){

$_SESSION['id'] = $myid ;

}

echo ("ID: ".$_SESSION["id"].""); 
```

# php - PHP，资源 id# 而不是实际的字符串

> ID：15448961
> 
> 赞同：0
> 
> 时间：2013-03-16T11:55:00.973
> 
> 标签：php, mysql

我在查询服务期间遇到了一个问题，以便在 PHP 的在线数据库中添加一行。行的添加工作得很好。我从 url 获取用户 ID 和书籍 ID，并获取书籍和用户的名称以放入我添加到我的第三个和最后一个表的行中。当我得到名称时，将它们放入一个数组中，对其进行 json 编码，然后回显它，它就可以工作了。但是当我将它们放在行中时，它会打印资源 id#3 和资源 id#4 而不是名称。有任何想法吗？

这是我的服务：

```
<?php

$con = mysql_connect("localhost","root","root");

$userid=$_GET['uid'];
$id = $_GET['bookid'];
$type = $_GET['type'];
$zero = '0';
$one = '1';
$date = date("Y-m-d");

$arr = array();

if (!$con)
{
    die('Could not connect: ' . mysql_error());
    echo "error connection";
}

mysql_select_db("Jineel_lib",$con) or die("Could not select database");

$bkName = mysql_query("SELECT Name from books where ID='".$id."'");

$userName = mysql_query("SELECT Name from people WHERE User_ID='".$userid."'");

while($obj = mysql_fetch_object($userName))
{
    $arr[] = $obj;        
}

echo json_encode($arr);

if($type == 'borrow')
{
   $query="UPDATE books set Availablity = '".$zero."' where ID= '".$id."' ";
    mysql_query($query) or die (" borrow operation failed due to query 1");

   $query1="INSERT into borrowed (BookID, BookName, BorrowerID, BorrowedName, DateBorrowed, Extended, Returned) values('".$id."','".$bkName."','".$userid."','".$userName."','".$date."','".$zer‌​o."','".$zero."')";
    mysql_query($query1) or die (" borrow operation failed to due query 2");

    echo "borrow success";

}

else if($type=='return')

{
    $query="UPDATE books set Availablity = '".$one."' where ID= '".$id."' ";
    mysql_query($query) or die (" return operation failed");

    $query1="UPDATE borrowed set Returned = '".$one."' where BookID= '".$id."' ";
    mysql_query($query1) or die (" return operation failed 1");

    echo "return success";
}

else

echo "invalid parameters";

?> 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:34:27.033

您实际上并没有在此处检索 userName 值：

```
$userName = mysql_query("SELECT Name... 
```

`$userName`只是查询返回的结果资源对象。您`mysql_fetch_object`稍后会使用，这是合适的，但随后您尝试在插入查询中使用实际结果资源：

```
$query1="INSERT into borrowed ... 
```

它被转换为您看到的字符串。相反，您需要使用`$obj->Name`（您将结果提取到`$obj`中，并且可能只有一个结果）。如果有多个可能的结果，则必须循环执行。

* * *

听听关于你的问题的所有评论。

# iphone - 检索 NSData 时的 EXC_BAD_ACCESS

> ID：15448973
> 
> 赞同：0
> 
> 时间：2013-03-16T11:56:13.773
> 
> 标签：iphone, ios, objective-c, xcode

在我的应用程序中，我使用相机和照片库来获取 UIImage ...在选择图像后，我需要将其转换为 NSData 并希望将此数据传递给名为 addBlobToContainer:....但它给出了 EXC_BAD_ACCESS .... 我该如何解决这个问题？

这是我的照片库代码...

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    image.image = [info objectForKey:@"UIImagePickerControllerEditedImage"];
    imageData = [NSData dataWithData:UIImageJPEGRepresentation(image.image,1)];
    guid = [Guid randomGuid];
    NSLog(@"%@", guid.description);
    GUID = guid.description;
    NSLog(@"GUID===%@",GUID);
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(void)viewWillAppear:(BOOL)animated
{
     NSLog(@"STRIMAGEDATA===%@",imageData);

     if ([imageData length] != 0)
    {
        NSLog(@"%@",imageData);
       [client addBlobToContainer:newcontainer blobName:GUID contentData:imageData contentType:@"application/octet-stream" withBlock:^(NSError *error)
       {
            if (error)
            {
            NSLog(@"%@",[error localizedDescription]);
            }
              else
              {
              NSLog(@"blob inserted suuccessfully…");
              imageURL = [serviceURL stringByAppendingString:[NSString stringWithFormat:@"%@.jpg",GUID]];
              NSLog(@"IMAGEURL=%@",imageURL);
              }
          }];-->EXC_BAD_ACCESS
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:46:05.800

您不是在访问属性，而是在访问属性后面的变量。如果您希望属性自动保留数据，请使用属性设置器，例如，`self.imageData = ...`而不是`imageData = ...`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:46:23.687

尝试

self.imageData = UIImageJPEGRepresentation(image.image,1);

# wpf - 是否可以同时在 WPF 和 Silverlight 中开发一个应用程序？

> ID：15448978
> 
> 赞同：3
> 
> 时间：2013-03-16T11:56:37.330
> 
> 标签：wpf, macos, silverlight, silverlight-4.0, multiplatform

我已经使用过，`WPF`但我现在对此一无所知`SilverLight`我需要开发一个可以在 Mac 和 Windows 上运行的应用程序，所以我想写一个`WPF Application`with `MVVM`for`Windows`并在 Mac 上运行它使用`SilverLight`？这可能吗？从端口`WPF`到端口`Silverlight`以及需要多少工作，或者我应该`SilverLight`从一开始就编写应用程序，即使对于我的`Windows`用户也是如此？哪个更好更快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T12:13:26.113

一个快速的答案是是的..

但有很多事情要做。您可以跨平台共享**大部分**XAML 视图，但不是全部。

1.  尝试将所有业务逻辑放入 BAL 或中间层等服务层
2.  将表示逻辑放入 ViewModel 类库
3.  创建单独的 XAML 视图（用于 SL 和 WPF）

这里有几个关于目标多平台的文档..

*   [codeproject 上的跨平台 WPF、Silverlight 和 WP7 应用程序](http://www.codeproject.com/Articles/254506/XAMLFinance-A-Cross-platform-WPF-Silverlight-WP7-A)

*   [在 Silverlight 和 WPF 之间共享代码](http://msdn.microsoft.com/en-us/library/ff921109%28v=pandp.40%29.aspx)

# selenium-webdriver - 使用 selenium 进行 cookie 验证

> ID：15448981
> 
> 赞同：0
> 
> 时间：2013-03-16T11:57:11.887
> 
> 标签：selenium-webdriver, selenium-ide

我是硒的新手。实际上我正在做一些cookie验证项目，这需要我在多个浏览器（Firefox，即chrome，safari）中单击某些同意链接之前和之后手动检查存在的cookie。

之前在第 1 阶段项目中，我运行了一个 qtp 脚本来将 firefox 视为窗口对象并捕获屏幕截图，但如果分辨率发生变化或任何细微的外观变化，这将非常麻烦。此外，它也很难管理，它只能在 Firefox 上运行，我需要再次为 chrome 和 safari 编写相同的脚本。除此之外，由于 QTP 是许可产品，目前我们使用的是单机许可，因此我无法在多台机器上运行它以加快执行速度。

所以我想搬到 Selenium。目前我的要求是：

```
1\. open the page - take the screenshot once page loaded.
2\. check the cookies using firebug or any other way  - take the screenshot
3\. click the link to close the consent - take screenshot once consent closed.
4\. refresh the page and again check the cookies using firebug - take screenshot 
```

所以我对 selenium 做了一些研究，发现我可以使用 verifyCookie 验证 cookie，但我仍然需要 cookie 的萤火虫窗口截图。所以我被困在这里。

请帮我在这里..

我在 Firefox 上找到了一些可能的方法，但现在我期待在 Chrome 上找到类似的方法，如果可能的话。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:14:44.560

Selenium 无法以您希望的方式与 firefox 扩展或浏览器交互。

您可以通过以下方式收集页面上的 cookie 列表：

```
driver.manage().getCookies() 
```

这将为您提供 Selenium 可见的所有 cookie 的列表。请注意，这与 JavaScript 控制台中可见的 cookie 相同（并非所有 cookie 都通过 JavaScript 可见，例如使用 HTTPOnly 属性设置的 cookie）使用：

```
document.cookie 
```

我建议您使用 getCookies() 以编程方式验证 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:50:47.897

在 selenium IDE 中，如果您想截取页面使用`captureEntirePageScreenshot`命令的屏幕截图

```
 captureEntirePageScreenshot | D:\\test.png | 

     D:\\test.png - path of file where you want to save the file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:12:26.870

得到了一些解决方案

```
public class Selenium1st {

    /**
     * @param args
     */
    public static void main(String[] args) throws IOException, AWTException{
        // TODO Auto-generated method stub      
        System.setProperty("webdriver.firefox.bin","C:\\Program Files (x86)\\Mozilla Firefox\\Firefox.exe");
        FirefoxProfile firefoxProfile = new FirefoxProfile();

        String domain = "extensions.firebug.";
        firefoxProfile.setPreference("app.update.enabled", false);
        firefoxProfile.addExtension(new File("E:\\softs\\selenium-2.29.0\\firebug\\firebug-1.11.2-fx.xpi"));
        firefoxProfile.setPreference(domain + "currentVersion", "1.11.2");
        firefoxProfile.setPreference("extensions.firebug.cookies.enableSites", true);
        firefoxProfile.setPreference("extensions.firebug.allPagesActivation", "on");

        firefoxProfile.setPreference(domain + "framePosition", "bottom");
        firefoxProfile.setPreference(domain + "defaultPanelName", "cookies");

        WebDriver driver = new FirefoxDriver(firefoxProfile);
        driver.get("http://www.google.com/webhp?complete=1&hl=en");
        WebElement query = driver.findElement(By.name("q"));
        query.sendKeys("Cheese");
        query.sendKeys("\n");
        Robot robot = new Robot();
        BufferedImage img = robot.createScreenCapture(new Rectangle(new Dimension(1024, 768)));

        File path = new File("E:\\abc");//Path to your file
        if(path.getName().indexOf(".jpg") == -1){
            path = new File(path.getPath() + ".jpg");
        }       
        ImageIO.write(img, "jpg", path);                
    }

} 
```

可能有用。

# ruby - `Object#define_singleton_method(symbol, method)` 如何在 ruby 中工作？

> ID：15448982
> 
> 赞同：4
> 
> 时间：2013-03-16T11:57:16.543
> 
> 标签：ruby, ruby-1.9.3, singleton-methods

来自[`Doc of define_singleton_method`](http://www.ruby-doc.org/core-2.0/Object.html#method-i-define_singleton_method)

我有两种语法来定义`singleton`方法，如下所示：

> **define_singleton_method(symbol) { block } -> proc** :

使用上面的语法，我尝试了下面的代码和我理解的语法：

```
define_singleton_method :foo do |params = {}|
 params
end
#=> #<Proc:0x20e6b48@(irb):1 (lambda)>

foo
#=> {}

foo(bar: :baz)
#=> {:bar=>:baz}

foo(bar: :baz ,rar: :gaz )
#=> {:bar=>:baz, :rar=>:gaz} 
```

但是需要有人帮助找出每个具有以下语法的示例。

> **定义单例方法（符号，方法）-> 新方法**

根据文档 - 方法参数可以是 a *`Proc`*、 a*`Method`*或*`UnboundMethod`*对象。我在那里没有任何例子。

任何人都可以在这里帮我找到一个反对***斜体***字的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T12:20:10.557

使用、、或参数列表中的语法创建`Proc`对象。使用该方法可以得到一个对象，使用该方法可以得到一个对象。所以这里是每一个的例子：`lambda``proc``->``Proc.new``&``Method``method``UnboundMethod``instance_method`

```
p = Proc.new {|x| puts x}
m = method(:puts)
um = Object.instance_method(:puts)

define_singleton_method(:my_puts1, p)
define_singleton_method(:my_puts2, m)
define_singleton_method(:my_puts3, um)

my_puts1 42
my_puts2 42
my_puts3 42 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T12:23:53.310

有一个`Proc`：

```
define_singleton_method(:foo, proc{ 'foo' })
foo #=> 'foo' 
```

有一个`Method`：

```
oof = 'oof'
oof.define_singleton_method(:foo, oof.method(:reverse))
oof.foo #=> "foo" 
```

有一个`UnboundMethod`：

```
oof = 'oof'
oof.define_singleton_method(:foo, String.instance_method(:reverse))
oof.foo #=> "foo" 
```

# c# - 从 TDD 中的 Stream 类型的属性松散耦合的类

> ID：15448986
> 
> 赞同：3
> 
> 时间：2013-03-16T11:57:43.123
> 
> 标签：c#, tdd

我想编写一个通过 TDD 使用流类型属性的类。该类将从/向文件系统打开/写入文件。如下所示：

```
 public class Csv 
    {         
        private TextReader streamReader; //TextReader is an abstract class, parent of streamReader 
        private TextWriter streamWriter;  //similar to TextReader and StreamWriter
          //Read(), Write(), and other methods that are specific to CSV.
        } 
```

现在可以测试了。

问题是我希望它支持每个实例的读取或写入，而不是两者。因为 Csv 支持读取或写入，而不是两者。

另一个问题，类的调用者应该只提供文件名。

第三个问题，理想情况下，它应该有一个 Open(string fileName)。但这可能不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:34:01.887

我建议您按照依赖注入原则（就像您上面提到的那样）创建您的`CsvReader`,`CvsWriter`类，该类将接口作为构造函数参数。`IStream`

随着测试和代码准备就绪，您创建了一个小包装器，现在它的文件名是构造函数/方法参数。无需测试它，因为它只是打开流并将功能委派给已经测试过的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:43:19.703

我建议使用此解决方案，并且可以使用 TDD 进行测试。您可以使用 Moq 进行单元测试。

```
public class Csv : IReader, IWriter
{
    protected Stream Stream = null;
    public string IsReader;
    private StreamWriter writer = null;
    private StreamReader reader = null;
    public Csv(string fileName)
    {
        Stream = new FileStream(fileName, FileMode.OpenOrCreate);
    }

    public StreamWriter SrWriter
    {
        get
        {
            if (reader == null)
            {
                writer = new StreamWriter(Stream);
            }
            else
            {
                throw new NullReferenceException("Current stream type is reader");
            }

            return writer;
        }
    }

    public StreamReader SrReader
    {
        get
        {
            if (writer == null)
            {
                reader = new StreamReader(Stream);
            }
            else
            {
                throw new NullReferenceException("Current stream type is writer");
            }

            return reader;
        }
    }
}

    public interface IReader
    {
        StreamReader SrReader { get; }
    }
    public interface IWriter
    {
        StreamWriter SrWriter { get; }
    } 
```

# ios - 适用于 iOS 的 LAME api - 设置

> ID：15448988
> 
> 赞同：4
> 
> 时间：2013-03-16T11:58:33.327
> 
> 标签：ios, mp3, lame, caf

我看过很少有关于这个问题的帖子。一切都以模糊的方式解释。有没有办法知道逐步设置 LAME api for iOS ( [http://lame.sourceforge.net/](http://lame.sourceforge.net/) )。如果有人能有足够的耐心来解释 LAME iOS 的设置，那就太棒了。非常感谢提前

# javascript - 有没有更好的方法在 javascript 的 forEach 循环中填充数组？

> ID：15448989
> 
> 赞同：1
> 
> 时间：2013-03-16T11:58:45.237
> 
> 标签：javascript, arrays, multidimensional-array, foreach

由于我对 javascript 相当陌生，因此我无法以我想要的方式创建和填充我的数组“数据”：

```
var data = new Array();
var i = 0;

results.forEach(function(lake) {
    var data[i] = [{
        name: lake.name,
        fishs: lake.fisheryType,
        dist: lake.distance,
        lat: lake.latitude,
        long: lake.longitude
    }, ];
    i++;
}); 
```

这是结果的console.log：

```
[Object, Object] 0: Object 1: Object length: 2
__proto__: Array[0] 
```

执行此代码时，我得到

```
unexpected ] at line var data [i] = ... 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T12:02:41.760

使用该`map`方法以这种方式创建数组。回调返回的每个值都被插入到数组中。

```
var data = results.map(function (lake) {
    return {
        name: lake.name,
        fishs: lake.fisheryType,
        dist: lake.distance,
        lat: lake.latitude,
        long: lake.longitude
    }
}); 
```

# racket - Racket 博士获取像素图宽度/高度

> ID：15448990
> 
> 赞同：1
> 
> 时间：2013-03-16T11:59:11.497
> 
> 标签：racket

我正在为大学做一个项目，想知道是否有可能以某种方式获得像素图的高度和宽度。我知道矩形和圆形之类的东西是可能的...我正在使用它来绘制像素图，文件是jpg：

```
(define (draw-image! x y file)
  (let ((posn (my-make-posn x y)))
    ((draw-pixmap MainWindow) file posn))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:20:55.063

也许您已经知道这一点，但您使用的库已被弃用：在手册中，您会看到它是“旧版库”的一部分。

这是一个简单的程序，它使用 2htdp/image 库从 jpg 加载图片、显示并打印其尺寸：

```
#lang racket

(require 2htdp/image)

(define pic
  (bitmap "/Users/clements/Pictures/Photo Booth Library/Pictures/Photo on 2012-02-12 at 10.53.jpg"))
pic
(image-height pic)
(image-width pic) 
```

您可能必须更新路径....

# android - 安卓 x86 + 虚拟机

> ID：15448992
> 
> 赞同：1
> 
> 时间：2013-03-16T11:59:18.407
> 
> 标签：android, android-emulator, virtualbox, android-x86

我尝试将 android x86 4.2（我也尝试过 4.0 asus 笔记本电脑和 eeepc）安装到我的 VirtualBox。我的电脑配置：

*   视窗 7 x64
*   联想 Y570，英特尔酷睿 i7
*   NTFS 文件系统

我在 VirtualBox 中创建的内容：

*   名称：安卓x86
*   类型：其他（我也尝试过 Linux 2.4 x86 或 Linux 2.6 x86）
*   版本：其他/未知
*   内存：512 MB
*   创建虚拟硬盘 => VDI（或 HDD）=> 固定大小（或动态）=> 3 Gb（或 6）

比我启动我的设备并查看启动菜单。如果我尝试在不安装的情况下运行它，我会看到

> 检测 Android-x86... 位于 /dev/sr0
> 
> 警告：不是华硕产品
> 
> 安卓

没有更多的事情发生。但现在它必须像在不同的教程中一样运行。

如果我安装，我尝试从选择分区 => 创建/修改分区格式化我的主/逻辑可启动/不可启动磁盘（FS 类型是 Linux）。

我看到“在 sda 上找不到有效的 v7”这一行很快就消失了，而不是“无法挂载 /dev/sda1 你想格式化它吗？” 我再次转到选择分区菜单。

为什么模拟器不运行？

已编辑。答：这只是一种命运。我用 Win7 x32 在我的大电脑上安装了 VBox，一切都很好。在我的联想上，配置相同，但在 Win7 x64 上它不起作用。如果你真的想要好的安卓模拟器，你可以试试[YouWave](https://www.google.com/search?q=android%20youwave)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T07:10:20.027

我有带 win 7 的 HP430 笔记本电脑。我遇到了同样的问题。但我想出了解决方案。

在用win7启动计算机时，我进入了BIOS菜单。有一个针对虚拟化优化 pc 的选项。我选择了它。之后，一切顺利。

后来我在虚拟框中注意到，在系统设置中，加速类型是 VT-x AMD、嵌套分页、PAE/NX。这在优化之前是不同的。

希望这能提供一些想法。

# c++ - 将包含整数的字符串与包含十六进制的字符串进行比较的最简单方法

> ID：15448997
> 
> 赞同：-1
> 
> 时间：2013-03-16T11:59:56.997
> 
> 标签：c++, string, cstring, stringstream, hex

我有两个字符串，一个是整数（例如字符串 strInt = “100”），一个是十六进制数字（例如字符串 strHex = “0x64”）。如果 strInt 和 strHex 的值相等（数字），比较最快/最好/安全的方法是什么？

需要排除 sprintf 以防止缓冲区溢出也不能使用 snprintf - 我的编译器不支持 c++ 11

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:11:03.410

用于[`strtol`](http://www.cplusplus.com/reference/cstdlib/strtol/)将两者都转换为整数，然后进行比较。您可以使用`strHex.c_str()`将 c++ 字符串转换为`strtol`.

例子：

```
long int numHex = strtol(strHex.c_str(),NULL,16); // 16 is the base of the source

long int numInt = strtol(strInt.c_str(),NULL,10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T12:14:10.450

我看不出这个`sprintf()`or`snprintf()`函数是如何需要的。

```
std::string a = "1337";
std::string b = "0x539";

std::stringstream as;
as.str(a);
std::stringstream bs;
bs.str(b);

int na, nb;
as >> na;
bs >> std::hex >> nb;

std::cout << a << " is " << (na == nb ? "equal" : "not equal") << " to " << b << std::endl; 
```

# iphone - iOS - 如何使用 mkmapview 作为位置选择器

> ID：15448998
> 
> 赞同：2
> 
> 时间：2013-03-16T12:00:01.403
> 
> 标签：iphone, ios, mkmapview, mkannotation

在我的应用程序中，我有两个要使用地址文本填充的地址 UITextfields。我想要这种行为：

*   一旦用户输入地址文本字段，就会从下方出现一个地图。（已经完成了）
*   用户玩地图。当他这样做时，会出现一个即将掉落的浮动注释对象。
*   按下按钮（mkmapview 的子视图）时，会将这个浮动注释放到地图上。
*   一旦用户按下完成按钮，地图上的注释位置就会被反向地理编码。
*   地图视图消失（已经完成）。
*   UITextfield 填充了与地图视图中心相对应的地址文本。
*   另一个 UITextfield 也是如此。

我相信这是 mkmapview 的一个非常直接的用例。但是找不到任何已经完成的例子。我在 UIKit 中遗漏了一些非常明显的东西吗？

非常感谢您的帮助....

**编辑：**

我阅读了[Apple 的文档](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008207-CH1-SW25)，发现了许多指向这一点的[解决方案。](https://stackoverflow.com/search?q=MKAnnotationViewDragStateDragging)然而，他们似乎都假设 MKPinAnnotationView（或 MKAnnotationView）被覆盖。

有必要吗？如果是，除了拖动之外，我需要在子类中提供多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T16:00:17.433

无需子类化`MKPinAnnotationView`。就用它吧。如果您正在寻找一些自定义行为，您应该只将它作为子类。但是编写 a 很有用，`viewForAnnotation`因此您可以正确配置它。但通常我发现标准的配置`MKPinAnnotationView`非常简单，不需要子类化：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKPinAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"DroppedPin"];

    annotationView.draggable = YES;
    annotationView.canShowCallout = YES;
    annotationView.animatesDrop = YES;

    return annotationView;
} 
```

* * *

话虽如此，拥有自己的注释类并不罕见。我这样做可能至少有两个原因：

1.  您可以将反向地理编码保留`MKPlacemark`为注释的属性。从逻辑上讲，地理编码信息似乎是注释的属性，而不是视图的属性。然后，您可以查询`placemark`放置的 pin 的此属性，以获取您需要传递回其他视图的任何信息。

2.  如果需要，您可以将注释配置为既执行反向地理编码查找，`placemark`也可以在更改其时将标题更改为反向地理编码地址`coordinate`。通过这种方式，用户在地图上拖放图钉时会收到有关反向地理编码内容的积极反馈，但代码仍然非常简单：

因此，您可能有一个注释类，例如：

```
@interface DroppedAnnotation : NSObject <MKAnnotation>

@property (nonatomic, strong) MKPlacemark *placemark;
@property (nonatomic) CLLocationCoordinate2D coordinate;
@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;

@end

@implementation DroppedAnnotation

- (void)setCoordinate:(CLLocationCoordinate2D)coordinate
{
    CLLocation *location = [[CLLocation alloc] initWithLatitude:coordinate.latitude
                                                      longitude:coordinate.longitude];
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        // do whatever you want here ... I'm just grabbing the first placemark

        if ([placemarks count] > 0 && error == nil)
        {
            self.placemark = placemarks[0];

            NSArray *formattedAddressLines = self.placemark.addressDictionary[@"FormattedAddressLines"];
            self.title = [formattedAddressLines componentsJoinedByString:@", "];
        }
    }];

    _coordinate = coordinate;
}

@end 
```

你的视图控制器可以使用这个新类：

```
@property (nonatomic, weak) id<MKAnnotation> droppedAnnotation;

- (void)dropPin
{
    // if we've already dropped a pin, remove it

    if (self.droppedAnnotation)
        [self.mapView removeAnnotation:self.droppedAnnotation];

    // create new dropped pin

    DroppedAnnotation *annotation = [[DroppedAnnotation alloc] init];
    annotation.coordinate = self.mapView.centerCoordinate;
    annotation.title = @"Dropped pin"; // initialize the title
    [self.mapView addAnnotation:annotation];

    self.droppedAnnotation = annotation;
} 
```

需要明确的是，您*不需要*自己的注释类。例如，您可以使用标准`MKPointAnnotation`。但是你的视图控制器必须保持调用并跟踪反向地理编码信息本身。我只是认为当您使用自定义注释类时，代码会更清晰，更合乎逻辑。