# StackOverflow 问答 15319000-15319999

# c# - 您如何自动确定登录和 http 请求所需的客户端请求？

> ID：15319001
> 
> 赞同：-3
> 
> 时间：2013-03-10T04:43:42.023
> 
> 标签：c#, http, httpwebrequest, client-server, httprequest

*编辑：此时它倾向于 HttpListener .. 它可能还必须通过 Sockets + webclient 或所有套接字完成* 您必须发出 GET 请求以检索请求标头，仅此而已......套接字也可以允许服务器无需请求即可将内容推送给客户端，而这无法通过 webclients 完成*

我要做的是输入网站登录服务器的 url：大学校园、电子邮件、论坛、其他你每天需要的东西，并为他们创建一个工作登录。由于每个服务器可能不同，请求类型会发生变化：（即）：//castRequest.ServicePoint.Expect100Continue = false; //castRequest.ContentType = *"application/x-www-form-urlencoded"* ;

如何从 C# 客户端找到这些必要的更改，而不是手动处理数据包和其他苛刻的方法？

**我们开始...** - 好的，你打开一个站点 - 没问题 - 你从 html 中获取一些登录标签，很容易.. - 现在我在哪里：你尝试登录的地方 - 发送用户/密码不是'不仅仅是这两件事的帖子——有时也不只是进入页面——还有 http 凭证、网络凭证和安全凭证 + USER/PW 凭证

html 用户/密码输入很容易解析出来：输入 type="password" name="password" id="password" size="15" value="">，回到 ---> **how你会连接并确定服务器想要的所有请求吗？**

我将如何分析和打开/关闭每个请求的这些请求以及如何从网络中获取数据：“application/x-www-form-urlencoded”？我还发现这并不总是返回与我通过某些浏览器或其他系统获得的相同*#的 cookie。*为什么？？？

必要的代码片段：//BEGIN

通常这些网站都启用了 cookie，因此您使用启用了 cookie 的 WebClient：

```
namespace watcher
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
//throw in a function create a cookie container:
void startRequest(){
        CookieContainer cookieJar = new CookieContainer();
        HTTP http = new HTTP(cookieJar);
}
        public class HTTP : WebClient
        {
            public HTTP()
            : this(new CookieContainer())
            { }

            public HTTP(CookieContainer c)
            {
                CookieContainer = c;
            }
        public CookieContainer CookieContainer { get; set; }

        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest request = base.GetWebRequest(address);

            var castRequest = request as HttpWebRequest;
            if (castRequest != null)
            {
                castRequest.CookieContainer = CookieContainer;
                //castRequest.ServicePoint.Expect100Continue = false;
                //castRequest.ContentType = "application/x-www-form-urlencoded";
            }
                return request;
            }
         }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:12:21.077

我会使用 Firefox 附加组件 Greasemonkey 和 Firebug 的组合。您无法真正以编程方式确定服务器的期望。它们是由人类编写的，每个人都会使用创造力解决问题。您将必须手动为每个单独建立服务器期望的内容。即便如此，这也不是一件容易的事，（或者在某些情况下，我想，甚至是可能的。）您尝试登录的服务器可能对不同的客户端做出不同的反应，出于各种原因，人们只能猜测。（这就是您遇到 cookie 问题的原因）。您不需要处理数据包，但您确实需要手动查看正在发送和接收的请求、这些请求的内容以及数据的含义。为了获得进一步的帮助，你'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:58:31.277

它看起来像 HttpListener 在这一点上。它可能还必须通过 Sockets + webclient 或所有套接字来完成*您必须发出 GET 请求来检索请求标头，仅此而已......套接字还可以允许服务器无需请求即可将内容推送给客户端，而这无法通过 webclients 完成*

它是 HTTP 协议，如果没有客户端/服务器握手，互联网将无法正常工作。除了地址之外，您不需要预先提供信息。服务器的工作是为您工作，而不是相反。

# android - 如果我使用相同的签名进行签名，我能否收到另一个 Android 应用的 C2DM Intent？

> ID：15319010
> 
> 赞同：4
> 
> 时间：2013-03-10T04:44:57.967
> 
> 标签：android, broadcastreceiver, android-c2dm, android-permissions

我`com.example.myapp`安装了一个收到`C2DM` `Intent`s 的应用程序 ( )。我想借助它来执行我自己的处理，以`Intent`在单独的应用程序 ( `com.example.myapp2`) 中响应这些 s。根据[this answer](https://stackoverflow.com/a/5121330/9636)，`C2DM`客户端系统寻找：

> Intent 的广播接收器： `com.google.android.c2dm.intent.REGISTRATION`
> 
> 有权限的： `.permission.C2D_MESSAGE`

在原始应用程序中，定义和使用了以下权限，[如 C2DM 文档中所述](https://developers.google.com/android/c2dm/#manifest)

```
 <!-- Only this application can receive the messages and registration result --> 
   <permission android:name="com.example.myapp.permission.C2D_MESSAGE" android:protectionLevel="signature" />
   <uses-permission android:name="com.example.myapp.permission.C2D_MESSAGE" /> 
```

这是`com.example.myapp2`的清单，我在其中也使用了该权限：

```
<manifest package="com.example.myapp2" ...>

   <!-- Only this application can receive the messages and registration result --> 
   <uses-permission android:name="com.example.myapp.permission.C2D_MESSAGE" />

   <!-- This app has permission to register and receive message -->
   <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

   <!-- Send the registration id to the server -->
   <uses-permission android:name="android.permission.INTERNET" />

   <application...>
      <!-- Only C2DM servers can send messages for the app. If permission is not set - any other app can generate it --> 
      <receiver android:name=".C2DMReceiver" android:permission="com.google.android.c2dm.permission.SEND">
          <!-- Receive the actual message -->
          <intent-filter>
              <action android:name="com.google.android.c2dm.intent.RECEIVE" />
              <category android:name="com.example.myapp" />
              <category android:name="com.example.myapp2" />
          </intent-filter>
      </receiver>
      ...
   </application>
   ...
</manifest> 
```

我`C2DMReceiver`的是`com.example.myapp2.C2DMReceiver`。请注意，我没有在听`com.google.android.c2dm.intent.REGISTRATION` `Intent`s，因为我不关心注册。我只关心接收已经接收的`Intent`s 。`com.example.myapp`在我`IntentFilter`的 for `com.google.android.c2dm.intent.RECEIVE` `Intent`s 中，我过滤了两者`com.example.myapp`和`com.example.myapp2` `category`s，因为`C2DM`并没有具体说明 a 的`C2DM` `Intent`外观。任何帮助将不胜感激。

我已经验证`com.example.myapp2`有`com.example.myapp.permission.C2D_MESSAGE`权限。如果我使用调试密钥运行，我没有它，但如果我使用释放密钥运行，我有它。显然，我正在使用发布密钥在我的设备上运行该版本。

当`com.example.myapp`收到一个`C2DM` `Intent` `com.example.myapp2`不收到它。关于如何调试或如何使其工作的任何想法？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:06:01.597

AFAIK 这是不可能的。当应用程序注册 C2DM 消息时，它会生成一个基于应用程序包名称的密钥，并且每个设备只能拥有一个密钥。

如果您使用相同的签名，那么我假设您控制这两个应用程序，如果是这样，您必须让接收 C2DM 消息的应用程序通过他们都可以访问的服务将数据传输到第二个应用程序。

# android - 如何使用 Python 编写 Android 应用程序？

> ID：15319018
> 
> 赞同：27
> 
> 时间：2013-03-10T04:46:14.107
> 
> 标签：android, python

我将负责教一小群中学生如何编写电话应用程序。经过大量研究，我发现 Python 可能是最好的方法。

我是我大学的网站开发大四学生，但我之前没有使用过 Python。我了解 ActionScript 和 Javascript，我认为它们的逻辑可能有助于学习 Python。对于我熟悉的 Web 语言，我使用 Sublime2、Dreamweaver 或 Flash 对其进行编码。

所以我的问题是：

**我使用哪个程序来编写 Python 代码？
如何使用在 Python 中创建的代码在 Android 手机上工作？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T05:04:49.177

我建议你看看[http://kivy.org/#home](http://kivy.org/#home)。它支持 android、iphone 等。另外，如果您像您所说的那样熟悉 javascript，您可以尝试使用很棒的钛加速器，或者开发 android 应用程序的其他替代方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-10T04:53:39.533

有许多 IDE 可用于 Python。你必须找到一个适合你想做的事。官方 Python wiki 有[大量 IDE](http://wiki.python.org/moin/IntegratedDevelopmentEnvironments)和[编辑器](http://wiki.python.org/moin/PythonEditors)列表，您可以将其用作起点。

但是，请记住，当您教授课程时，最终不是教编辑，而是教语言/概念。

对于 Android，唯一支持的语言是 Java 和 Kotlin。有一个支持 Python 的[android-scripting](https://code.google.com/p/android-scripting/)项目，但是这只是实验性的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-19T18:04:18.863

老问题，我知道，但您也可以查看[pygame 子集 for android](http://pygame.renpy.org/)，它允许您将 pygame 应用程序转换为 android。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T04:49:48.550

您可以使用[Android 脚本层](https://code.google.com/p/android-scripting/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-06T12:25:34.803

python 博士是一个很好的 ide/编辑器，但它易于使用。如果您使用的是 linux，您可以在软件中心安装它。我不知道如何在 OSX/Windows 上安装它

# java - 我正在尝试了解 Java 中的 Singleton 类和多线程

> ID：15319021
> 
> 赞同：0
> 
> 时间：2013-03-10T04:46:36.590
> 
> 标签：java, multithreading, thread-safety, singleton

我将 Bean 制作为单例类，其中我使用 Bean 的单例对象为 bean.ThreadA 和 ThreadB 设置了 setter 和 getter。我希望 ThreadA 应该首先执行它的任务，然后 ThreadB 应该开始它的执行。我越来越不一致。我怀疑我的代码是否不正确，或者如何使我的代码完全线程安全。期待合作。

```
public class Test {
    public static void main(String args[])
    {
        Bean bean = Bean.getInstance();
        new ThreadA(bean);
        new ThreadB(bean);
    }
}
class Bean
{   
    private static Bean instance = null;
    protected Bean() {
        // TODO Auto-generated constructor stub
    }
    int x;
    public static Bean getInstance()
    {
        if(instance==null)
        {
            instance=new Bean();
            synchronized (instance) {
                instance=new Bean();

            }
        }
        return instance;
    }
    public  synchronized int getX() {
        return x;
    }

    public synchronized void  setX(int x) {
        this.x = x;
    }

}
class ThreadA extends Thread
{
    Bean  b;
    public ThreadA(Bean b) {
        this.start();
        this.b=b;
    }
    @Override
    public void run() {
        for (int i=1;i<=10;i++)
        {
            this.b.setX(i);
            System.out.println(Thread.currentThread().getName() + " "+this.b.getX());

        }
    }
}

class ThreadB extends Thread
{
    Bean b;
    public ThreadB(Bean b) {
        this.start();
        this.b=b;
    }
    @Override
    public void run() {
        for (int i=1;i<=10;i++)
        {
            this.b.setX(i);
            System.out.println(Thread.currentThread().getName() +" "+ this.b.getX());
        }
    }
} 
```

Thread-0 1 Thread-0 2 Thread-0 3 Thread-0 4 Thread-0 5 Thread-0 6 Thread-1 1 Thread-0 7 Thread-1 2 Thread-1 3 Thread-1 4 Thread-1 5 Thread- 0 8 线程 1 6 线程 1 7 线程 1 8 线程 1 9 线程 1 10 线程 0 9 线程 0 10

我得到的结果与上面的不一致。我希望我的 Thread-0 是 ThreadA 应该首先执行任务，然后 ThreadB = Thread-1 应该开始它的执行。

/////////////////////////我更改的代码从下面开始

```
package p1;

public class T {
    public static void main(String args[])
    {
      Bean1 bean = Bean1.getBean1();

      new ThreadA(bean);
    // bean.lock(true);
      new ThreadB(bean);
    }
}
class Bean1
{   
    private static Bean1 instance = null;
     static boolean threadAFinished=false;
    private Bean1() {
    }
    private boolean beanLocked;

    synchronized public void lock (boolean b) {
        if(b)
        {
            try {
                wait();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        beanLocked=b;
    }
    synchronized public boolean getLock()
    {
        if(!beanLocked)
        {
            notify();
        }

        return beanLocked;
    }
   int x;
    public static Bean1 getBean1() {
        if (instance==null) {
            instance=new Bean1();
        }
        return instance;
    }
    public  int getX() {

        return x;
    }

    public  void  setX(int x) {

        this.x = x;
    }
}
    class ThreadA implements Runnable {
        Bean1  b;
        public ThreadA(Bean1 b) {
            this.b=b;
        new Thread (this).start(); // run() uses b, set it before starting the thread

        }
        @Override
        public void run() {
            for (int i=1;i<=10;i++) {
                b.setX(i);
                System.out.println(Thread.currentThread().getName() + " "+b.getX());

        }
           b.threadAFinished=true;
          b.lock(false);
         b.getLock();
    }

    }

    class ThreadB implements Runnable {
        Bean1 b;
        public ThreadB(Bean1 b) {
            this.b=b;
            new Thread(this).start();

        }
        @Override
        public void run() {
        if(!b.threadAFinished)
        {
        b.lock(true);
        }
            for (int i=1;i<=10;i++) {
                b.setX(i);
                System.out.println(Thread.currentThread().getName() +" "+ b.getX());
    }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:14:14.767

这里有两个问题 - 制作一个类单例和线程同步。此外，我认为您使用了一些不必要的 this 和 synchronized 关键字。我对您的代码进行了快速而肮脏的编辑，希望对您有所帮助。

```
public class P4 {

    public static void main(String args[])
    {
        Bean bean = Bean.getBean();
        new ThreadA(bean);
    bean.lock(true, true);
        new ThreadB(bean);
    }
}

class Bean
{   
    private static Bean instance = null;
    private Bean() {
    }

    int x;
    public static Bean getBean() {
        if (instance==null) {
            instance=new Bean();
        }
        return instance;
    }

    private boolean beanLocked;
    synchronized public boolean lock (boolean b, boolean l) {
    if (b) {
        beanLocked = l;
        notify();
    } else {
        while (beanLocked) {
        try {
            wait();
        } catch (InterruptedException ex) {
    }}}
    return beanLocked;
    }

    public int getX() {
        return x;
    }

    public void  setX(int x) {
        this.x = x;
    }

}

class ThreadA implements Runnable {
    Bean  b;
    public ThreadA(Bean b) {
        this.b=b;
    new Thread (this).start(); // run() uses b, set it before starting the thread
    }
    @Override
    public void run() {
        for (int i=1;i<=10;i++) {
            b.setX(i);
            System.out.println(Thread.currentThread().getName() + " "+b.getX());

    }
    b.lock(true, false);
}}

class ThreadB implements Runnable {
    Bean b;
    public ThreadB(Bean b) {
        this.b=b;
        new Thread(this).start();
    }
    @Override
    public void run() {
    b.lock(false, false);   // Dont care about 2nd argument
        for (int i=1;i<=10;i++) {
            b.setX(i);
            System.out.println(Thread.currentThread().getName() +" "+ b.getX());
}}} 
```

# jboss7.x - 当单例 EJB 观察到相同的事件时，事件观察者不接收事件

> ID：15319022
> 
> 赞同：1
> 
> 时间：2013-03-10T04:46:51.250
> 
> 标签：jboss7.x, cdi

我有三个 bean，都具有相同的方法签名：

```
import javax.ejb.Singleton;
import javax.ejb.Startup;
@Startup    //  Eager initialization
@Singleton
public class ApplicationManager
{
    private void onRemoveUserLoginSession(@Observes @Removed UserLoginSession userLoginSession) {
        logger.info("ApplicationManager.onRemoveUserLoginSession");
    }

}

@SessionScoped
public class ManageEventOrWorkflowNotFoundLogConversations
{
    private void onRemoveUserLoginSession(@Observes @Removed UserLoginSession userLoginSession) {
        logger.info("ManageEventOrWorkflowNotFoundLogConversations.onRemoveUserLoginSession");
    }
}

@Dependent
public class ManageEventOrWorkflowNotFoundLogConversation
{
    private void onRemoveUserLoginSession(@Observes @Removed UserLoginSession userLoginSession) {
        logger.info("ManageEventOrWorkflowNotFoundLogConversation.onRemoveUserLoginSession");
    }
} 
```

当事件触发时，只有 ApplicationManager#onRemoveUserLoginSession 的事件观察者接收到事件（例如，其他两个方法都没有接收到事件）。

当我在 ApplicationManager 中删除事件观察器时，其他两个方法中的每一个都会接收到事件。

```
@Startup    //  Eager initialization
@Singleton
public class ApplicationManager
{
    private void onRemoveUserLoginSession(UserLoginSession userLoginSession) {
        logger.info("ApplicationManager.onRemoveUserLoginSession");
    }

} 
```

这是触发事件的bean：

```
@SessionScoped
public class SessionManager implements UserLoginSession
{
    @Inject @Removed Event<UserLoginSession> sessionRemovedEvent;

    @PreDestroy private void sessionDestroyed() {
        this.sessionRemovedEvent.fire(this);
    }
} 
```

为什么会这样？

# c# - MethodImplOptions.AggressiveInlining 与 TargetedPatchingOptOut

> ID：15319025
> 
> 赞同：25
> 
> 时间：2013-03-10T04:47:37.720
> 
> 标签：c#, .net, inline, jit, ngen

`MethodImplOptions.AggressiveInlining`带有选项的 MethodImplAttribute和之间有什么区别`TargetedPatchingOptOut`？

当我在谷歌上搜索时，每个人似乎都说两者（可能）都内联该方法，但没有给出区别。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T15:26:16.230

我在等着看其他人是否可以有更好的答案，但似乎没有。

在我阅读 dtb 评论后，我做了一些研究，发现了这个[http://blogs.microsoft.co.il/blogs/sasha/archive/2012/01/20/aggressive-inlining-in-the-clr-4 -5-jit.aspx](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/01/20/aggressive-inlining-in-the-clr-4-5-jit.aspx)。

我对这篇文章的理解是，您可以应用两个属性 AggressiveInlining 将删除该方法的内联大小限制，而像 dtb 所说的 TargetedPatchingOptOut 将允许跨程序集边界内联。

# python - PyBrain 预测误差

> ID：15319030
> 
> 赞同：4
> 
> 时间：2013-03-10T04:48:06.323
> 
> 标签：python, pybrain

我试图预测一组给定商品的销售价格。我在 pybrain 中使用 RecurrentNetwork 和 BackpropTrainer。这是我的代码，

```
def nnet(train, target, valid):

    ds = SupervisedDataSet(52-len(NU)+5, 1)

    for i in range(len(train)):
        ds.appendLinked(train[i], target[i])

    n = RecurrentNetwork()

    n.addInputModule(LinearLayer(52-len(NU)+5, name='in'))
    n.addModule(SigmoidLayer(3, name='hidden'))
    n.addOutputModule(LinearLayer(1, name='out'))

    n.addConnection(FullConnection(n['in'], n['hidden'], name='c1'))
    n.addConnection(FullConnection(n['hidden'], n['out'], name='c2'))
    n.addRecurrentConnection(FullConnection(n['hidden'], n['hidden'], name='c3'))

    n.sortModules()

    t = BackpropTrainer(n,learningrate=0.001,verbose=True)
    t.trainOnDataset(ds, 20)

    prediction = np.zeros((11573, 1), dtype = int)
    for i in range(11573):
        prediction[i] = n.activate(valid[i])

    return prediction 
```

这里 train 和 target 是 numpy 数组，用于训练模型，52-len(NU)+5 是属性（特征）的数量。对于有效的每个项目，我们必须预测销售价格。问题是，对于每件有效的商品，除了第一个商品外，我都得到了相同的销售价格。我做错了什么？提前致谢。

数组维度如下，

火车 - 401125, 52-len(NU)+5

目标 - 401125, 1

有效 - 11573, 52-len(NU)+5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T21:07:59.580

我不确定 PyBrain 的具体实现细节，但我看到了两种可能性。

1) 反向传播不适用于线性激活函数。根据 PyBrain 的实现细节，将“LinearLayer”的两个实例更改为“SigmoidLayer”可以解决此问题。

2) 对于递归神经网络，您必须使用随时间的反向传播（一种专门适用于 RNN 的算法）而不是正常的反向传播。根据 PyBrain 的实现细节，这个变体可能有一个单独的类。值得一试。

# python - OpenErp 新模块

> ID：15319031
> 
> 赞同：2
> 
> 时间：2013-03-10T04:48:10.097
> 
> 标签：python, openerp, constraints

我在任何地方都找不到，OpenErp 上的“组名”实际上是什么。

我正在尝试基于仓库管理 openerp 应用程序制作一个新应用程序，但每次我尝试安装它时，它都会说

> 约束错误
> 
> 组名必须唯一！

任何人都可以阐明这个组可能是什么？

已经在文件中搜索了“组”，并且我已经更改了`group_`通过此模块在原始对象上找到的一些名称，但没有成功。

编辑：

我想要实现的是拥有一份“库存”模块的副本，以便在不触及原始库存的情况下进行编辑和测试。

这些是微小的变化，例如字段名称、删除或添加一些字段等...

已经更改了所有组名并创建了一个全新的数据库。

例如我想删除库存产品部分的“会计”选项卡，但我猜它与product.product对象模型有关，我可以删除这个选项卡而不影响OpenErp中的所有product.product继承对象?

![account_tab_openerp](../Images/8d26448bbe31365011315734cffb907d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:21:30.207

根据错误，您正在尝试创建已经存在的组。请检查您要创建的组名。修改它并尝试再次添加您的模块。

您也可以检查数据库中的组名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:32:24.947

我怀疑您的模块正在尝试在表中创建`res_groups`一个名称与该表中已有记录之一匹配的记录。这违反了[唯一约束](http://bazaar.launchpad.net/~openerp/openobject-server/7.0/view/head:/openerp/addons/base/res/res_users.py#L76)并导致安装失败。

查看模块的数据 XML 文件，然后搜索“res.groups”。查看`category_id`and`name`字段，然后检查数据库中`res_groups`具有相同值的其他记录。

# ef-code-first - 实体框架何时创建自定义 DTO？

> ID：15319042
> 
> 赞同：0
> 
> 时间：2013-03-10T04:49:52.890
> 
> 标签：ef-code-first, entity-framework-5

我的应用程序中有一个非常简单的存储库模式，但现在我有一个异常情况，我需要返回 Code First 模型和一些额外的数据。见下文。

```
public IEnumerable<User> GetUsersWithinLocation(DbGeography geography) 
```

我真正想在返回模型中包含的是用户实例和与地理位置的距离（以英里或其他单位）。

**以下是我看到的选项：**

**选项1：**我可以返回用户对象列表，没有距离，在前端重新计算第二次，避免弄乱我的数据模型，但似乎有点多余......而且，这在某些情况下可能是不可能的，并且我只是觉得这种做法是错误的。

**选项 2：**另一个选项是创建一个新的 DTO，该 DTO 由 User 组成或继承 User，例如 UserDistance 对象。这会给我我需要的一切，但我会为此创建一个新的存储库吗？如果每种模型类型返回的数据有很多变化，我可能会认为在大型应用程序中维护这有点不守规矩。

**选项 3：**实现某种动态的 ExtraData ViewBag 层，我可以在其中任意传入额外数据和 DTO。这将在我的层之间创建更紧密的耦合，因为必须知道名称。我也不是很喜欢这种方法。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:04:57.153

以下是摆脱双重调用的方法`Distance`：

```
public IDictionary<User, double?> GetUsersWithinByLocation(DbGeography geography)
{
    return this.Query.Select(x => new KeyValuePair<User, double?>(x, x.Address.Location.Distance(geography)))
                     .OrderBy(kvp => kvp.Value)
                     .ToDictionary(kvp => kvp.Key, kvp => kvp.Value);
} 
```

你可以做的另一件事，我认为更好一点是改变你的返回类型，这样你就可以做一个更简单/更快的 LINQ 查询，这里是代码：

```
public IEnumerable<KeyValuePair<User, double?>> GetUsersWithinByLocation(DbGeography geography)
{
    return this.Query.Select(x => new KeyValuePair<User, double?>(x, x.Address.Location.Distance(geography)))
                     .OrderBy(kvp => kvp.Value);
} 
```

您可以使用这种方法，也`KeyValuePair<T1, T2>`可以使用`Tuple<T1, T2>`.

请注意，在这两种情况下，我所做的都是首先“存储”计算，`Distance`然后通过子句中的`Value`属性访问它。`KeyValuePair<T1, T2>``OrderBy`

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:52:38.523

那这个呢？这里有什么问题吗？

```
public IDictionary<User, double?> GetUsersWithinByLocation(DbGeography geography)
{
    return this.Query.OrderBy(x=>x.Address.Location.Distance(geography))
          .ToDictionary(x => x, x => x.Address.Location.Distance(geography));
} 
```

主要问题是我们运行这个距离函数两次，有没有办法解决这个问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:48:03.143

我通常会问自己一个不同的问题：我可以使用域对象进行数据传输吗？几乎没有答案是肯定的。为什么会这样？在很多情况下，UI 会切入领域模型，并希望从中分得一杯羹。（几乎）总是涉及一个视图模型。大多数情况下，视图模型都是经过验证的。

所以对我来说：**选项 2**。但是存储库不应该提供视图模型。它应该是位于存储库和视图（控制器，如果您在 mvc 中）之间的服务层，它协调存储库调用以收集视图模型的数据。存储库在内部公开`IQueryable`s，服务在这些 IQueryables 上编写查询并公开`IEnumerable`s。

# android - 如何实现显示 2 个数字之间的延迟

> ID：15319051
> 
> 赞同：0
> 
> 时间：2013-03-10T04:51:57.950
> 
> 标签：android

我正在使用 Eclipse IDE 在 android 中显示带有文本视图的数字。我必须在每个数字后延迟 2 分钟。我怎样才能做到这一点？这是我的代码：

```
 int counter1 = 0;
    String stringVal;
    TextView textview1;

    textview1 = (TextView) findViewById(R.id.textView1);

    while (counter1 < 10) {
         stringVal = Integer.toString(counter1);
         textview1.setText(stringVal);
         counter1++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:05:43.830

您不能阻止 UI 线程。通常，当您想要延迟做某事时，您应该考虑使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html). 在这种情况下，仅使用以下`postDelayed`功能可能会更简单`view`：

```
// needs to be `final` so it can be referenced from inside the Runnable
final TextView textview1 = (TextView) findViewById(R.id.textView1);
final Runnable r = new Runnable() {
    int counter = 0;
    public void run() {
        textview1.setText(Integer.toString(counter++));
        if (counter < 10) {
            textview1.postDelayed(this, 1000 * 60 * 2); // 2 minutes
        }
    }
}

r.run(); // starts things off 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:10:08.980

您可以使用 AsyncTask 并在每个 onProgressUpdate 中设置新的 TextView：

```
protected class InitTask extends AsyncTask<Context, Integer, String>
    {
        // -- run intensive processes here
        // -- notice that the datatype of the first param in the class definition matches the param passed to this method 
        // -- and that the datatype of the last param in the class definition matches the return type of this method
                @Override
                protected String doInBackground( Context... params ) 
                {
                        //-- on every iteration
                        //-- runs a while loop that causes the thread to sleep for 2 minutes
                        //-- publishes the progress - calls the onProgressUpdate handler defined below
                        //-- and increments the counter variable i by one
                        int i = 0;
                        while( i <= 50 ) 
                        {
                                try{
                                        Thread.sleep( 2*60*1000);
                                        publishProgress( i );
                                        i++;
                                } catch( Exception e ){
                                        Log.i("makemachine", e.getMessage() );
                                }
                        }
                        return "COMPLETE!";
                }

                // -- gets called just before thread begins
                @Override
                protected void onPreExecute() 
                {
                        Log.i( "makemachine", "onPreExecute()" );
                        super.onPreExecute();

                }

                // -- called from the publish progress 
                // -- notice that the datatype of the second param gets passed to this method
                @Override
                protected void onProgressUpdate(Integer... values) 
                {
                        super.onProgressUpdate(values);
                        Log.i( "makemachine", "onProgressUpdate(): " +  String.valueOf( values[0] ) );
                        _percentField.setText( ( values[0] * 2 ) + "%");
                        _percentField.setTextSize( values[0] );
                }

                // -- called if the cancel button is pressed
                @Override
                protected void onCancelled()
                {
                        super.onCancelled();
                        Log.i( "makemachine", "onCancelled()" );
                        _percentField.setText( "Cancelled!" );
                        _percentField.setTextColor( 0xFFFF0000 );
                }

                // -- called as soon as doInBackground method completes
                // -- notice that the third param gets passed to this method
                @Override
                protected void onPostExecute( String result ) 
                {
                        super.onPostExecute(result);
                        Log.i( "makemachine", "onPostExecute(): " + result );
                        _percentField.setText( result );
                        _percentField.setTextColor( 0xFF69adea );
                        _cancelButton.setVisibility( View.INVISIBLE );
                }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T05:47:02.933

您应该在此处使用 Handler，因为它们不会阻塞 UI 线程。如上所述。使用

```
posDelayed(your_runnable, deley_time_in_millis) 
```

有关更多信息，请参阅[Handler 文档](http://developer.android.com/reference/android/os/Handler.html)和教程：[Android Background Processing with Handlers and AsyncTask and Loaders](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T05:08:29.800

请执行下列操作

```
Handler handler = new Handler();

// perform first action
handler..postDelayed(new Runnable() {

            public void run() {
                // peform second action
            }
        }, 2*60*1000); 
```

# java - JSlider 问题

> ID：15319054
> 
> 赞同：0
> 
> 时间：2013-03-10T04:52:50.947
> 
> 标签：java, swing

我正在创建一个程序，它使用滚动条来选择标签的前景色，三个水平滚动条用于选择颜色的红绿和蓝色分量。我需要一个包含滚动条的面板上的标题边框。我才刚刚开始。我在使用此 messagePanel 时遇到问题。

```
import java.awt.*;
import javax.swing.*;

public class MessagePanel extends JPanel
{
    //The message to be displayed
    private String message;
    //The x-Coordinate
    private int xCoordinate;
    //The y-Coordinate
    private int yCoordinate;
    //Centered
    private boolean centered;
    //Interval length for moving message horizontally and vertically
    private int interval = 10;

    public MessagePanel()
    {
    }

    //Construct message panel with a specific message
    public MessagePanel(String message)
    {
        this.message = message;
    }

    //Return that specific message
    public String getMessage()
    {
        return message;
    }

    //Set a new message
    public void setMessage(String message)
    {
        this.message = message;
        repaint();
    }

    //Return xCoordinate
    public int getXCoordinate()
    {
        return xCoordinate;
    }

    //Set a new xCoordinate
    public void setXCoordinate(int x)
    {
        this.xCoordinate = x;
        repaint();
    }

    //Return yCoordinate
    public int getYCoordinate()
    {
        return yCoordinate;
    }

    //Set a new yCoordinate
    public void setYCoordinate(int y)
    {
        this.yCoordinate = y;
        repaint();
    }

    //Return Centered
    public boolean isCentered()
    {
        return centered;
    }

    //Set a new Centered
    public void setCenetered(boolean centered)
    {
        this.centered = centered;
    }

    //Return interval
    public int getInterval()
    {
        return interval;
    }

    //Set a new interval
    public void setInterval(int interval)
    {
        this.interval = interval;
        repaint();
    }

    //Paint the Message
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        if (centered)
        {
            //Current metrics for current font
            FontMetrics fm = g.getFontMetrics();

            //Find the center location to display                                               
            int stringWidth = fm.stringWidth(message);
            int stringAscent = fm.getAscent();

            //Get the position of the leftmost char in the baseline
            int xCoordinate = getWidth() / 2 - stringWidth / 2;
            int yCoordinate = getHeight() / 2 + stringAscent / 2;
        }

        //Draw String   
        g.drawString(message, xCoordinate, yCoordinate);
    }

    //Move the message to the left
    public void moveLeft()
    {
        xCoordinate -= interval;
        repaint();
    }

    //Move the message to the right
    public void moveRight()
    {
        xCoordinate += interval;
        repaint();
    }

    //Move the message up
    public void moveUp()
    {
        yCoordinate -= interval;
        repaint();
    }

    //Move the message down
    public void moveDown()
    {
        yCoordinate += interval;
        repaint();
    }

    //Override get method for preferredSize
    public Dimension getPreferredSize()
    {
        return new Dimension(200, 30);
    }
} 
```

这可能是 ScrollBar 类：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class ScrollBar extends JFrame
{
    //Creating scroll bars
    private JSlider jslHorz1 = new JSlider(JSlider.HORIZONTAL);
    private JSlider jslHorz2 = new JSlider(JSlider.HORIZONTAL);
    private JSlider jslHorz3 = new JSlider(JSlider.HORIZONTAL);

    //Creating the message panel
    private MessagePanel messagePanel = new MessagePanel("Show Color");

    //Adding scroll bars and message panel
    public ScrollBar(){
        //Creating UI
        setLayout(new BorderLayout(3, 3));

        //Adding messagePanel
        add(messagePanel, BorderLayout.CENTER);

        //Adding the scroll bars
        JPanel three = new JPanel(new GridLayout(3,1));
        three.add(new JLabel("Red"));
        three.add(jslHorz1);
        three.add(new JLabel("Green"));
        three.add(jslHorz2);
        three.add(new JLabel("Blue"));
        three.add(jslHorz3);
        add(three, BorderLayout.SOUTH);
        three.setBorder(new TitledBorder("Choose Color"));

    }

    //Main method
    public static void main(String[] args)
    {
        ScrollBar frame = new ScrollBar();
        frame.setTitle("Exercise 17_15");
        frame.setSize(300, 400);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //  frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:49:05.307

为了让您对我会做的**快速而肮脏**的事情有一个基本的了解（根据您的描述，您的代码对我来说似乎很奇怪）。

1.  设置一个容器（JFrame，JPanel，...），其中包含 JLabel（您说“标签”并使用 JPanel）和三个用于 RGB 的控件。在这里自由选择 - 只需确保它们以某种方式为您提供有效值。
2.  将控件设置为 0 到 255 之间的值（应该是每种颜色的范围）
3.  将基于值的侦听器绑定到您选择的三个 RGB 控件（这可能因您选择的控件而异）。
4.  当您通过读取每个控件值更改它们的值时，使侦听器更改为 JLabel 的颜色。

您可以使用 JLabel 的方法来设置它的每种颜色。

# android - 允许在 setSelection 之后滚动列表视图

> ID：15319062
> 
> 赞同：1
> 
> 时间：2013-03-10T04:54:26.403
> 
> 标签：android, android-listview

我有一个列表视图，每当更新列表时，我都会强制滚动到列表底部。但是，在滚动到列表底部后，由于某种原因，列表视图会固定在该点，用户无法在列表上来回滚动以查看其他数据。

问题：之后`setSelection(list.getBottom())`，我应该有什么才能再次滚动整个列表？

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
        /* the list is being populated here - the code has been omitted */          

            list.populateFrom(date, name, class);
            list.clearFocus();
            list.post(new Runnable() {

                @Override
                public void run() {

                    list.setSelection(list.getBottom());
                }
            });

        return list;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:03:08.243

问题在于您正在打电话

```
 list.setSelection(list.getBottom()); 
```

in ，**每次**ListView 需要绘制更多视图时`getView()`都会调用它。这意味着您不断向下滚动。

 **相反，从类外部（例如从 ）更新您拥有的数据集，*然后*`Adapter`重置`Activity/Fragment`的`ListView`适配器或清除适配器并读取项目，然后调用`setSelection()`。

一种方法：

*   `Activity`开始一个`AsyncTask`

*   `AsyncTask`通过更新`List`数据`doInBackground()`。

*   在中，用传递的 from`onPostExecute()`实例化。或者清除您当前拥有的数据集，然后循环遍历列表并将项目重新添加到.`Adapter``List``doInBackground()``Adapter``Adapter`

*   如果重新实例化，请将'`Adapter`设置为您创建的内容。`ListView``Adapter`

*   称呼`ListView#setSelection()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:12:50.473

```
 cus= new Customlistadapter(paramets for customer adapter));//Custom list adapter
   lv1 = (ListView) findViewById(R.id.list);
   lv1.setTranscriptMode(AbsListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
   lv1.setStackFromBottom(true);
   cus.notifyDataSetChanged();// for refreshing listview with updates
   lv1.setAdapter(cus);
   cus.registerDataSetObserver(new DataSetObserver() {
   @Override
   public void onChanged() {
    super.onChanged();
    lv1.setSelection(cus.getCount() - 1);    
   }
 }); 
```

在您的活动课程中使用上述内容。A--C 指出了问题所在。

如果您在活动类中使用 AysncTask，请尝试以下代码。

```
 private class DownloadFilesTask extends AsyncTask<Void, Void, VOid> {
 protected void onPreExecute()
 {
     //display progress dialog
 }
 protected Long doInBackground(Void... params) {
   // get data from server
     return null;
 }

 protected void onPostExecute(Void params) {
  // dismiss dialog
  //set  data
  // paste the above listview code here. 
 } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:39:34.900

正如 A--C 所建议的那样，这是问题

> list.setSelection(list.getBottom());

每次调用 getView() 时，您都会将视图移动/滚动到底部，因此，当您尝试再次滚动视图时，会调用 getView() 并再次移动到底部。因此，与其将列表视图中的选择设置为 getView() 的底部，不如在您的活动/片段中进行。在活动中，您观察更改并将选择设置到底部。

*如果这对您的问题有帮助的解释，请投票***

# javascript - JavaScript 对象定义属性和最大值

> ID：15319071
> 
> 赞同：0
> 
> 时间：2013-03-10T04:58:17.773
> 
> 标签：javascript, oop, getter-setter

我正在学习 JavaScript 中的 OOP 基础知识，但在这个示例中遇到了一些问题：

```
var Human = function (first, surname) {
    var x = {};
    Object.defineProperties(x, {
        first: {
            get: function () {
                return this.first;
            },
            set: function (value) {
                this.first = value;
            }
        },
        surname: {
            get: function () {
                return this.surname;
            },
            set: function (value) {
                this.surname = value;
            }
        }
    });
    return x;
};
var alex = new Human("Alex", "Corlette"); 
```

1.  这：`console.log(alex);`输出：

    > { }

2.  这：`console.log(alex.first);`输出：

    > 未捕获的 RangeError：超出最大调用堆栈大小

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T05:04:02.657

问题是范围。由于您正在定义一个属性，并且在 getter 和 setter 中引用了相同的 getter 和 setter。

该示例可以通过删除 this 关键字来修复。

```
var Human = function (first, surname) {
  var x = {};
  Object.defineProperties(x, {
    first: {
        get: function () {
            return first;
        },
        set: function (value) {
            first = value;
        }
    },
    surname: {
        get: function () {
            return surname;
        },
        set: function (value) {
           surname = value;
        }
    }
  });
  return x;
};
var alex = new Human("Alex", "Corlette"); 
```

# google-apps-script - setValue 在 Google Apps 中不起作用

> ID：15319074
> 
> 赞同：0
> 
> 时间：2013-03-10T04:58:27.280
> 
> 标签：google-apps-script, setvalue

我有以下代码：

```
var ee = SpreadsheetApp.getActiveSheet().getName();

if (ee == "Stuff") {

  SpreadsheetApp.getActiveSheet().getRange('B2').setValue(emailAddress);

}

else {
 SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Stuff").getRange('B2').setValue(emailAddress);

  }

} 
```

当我的活动表是“MAIN”时，会执行“else”，并且“emailaddress”的值会进入“Stuff”表上的单元格 B2。但是当我的活动工作表是“Stuff”时，即使调试器显示第一行已执行，B2 中也没有任何内容！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:09:38.540

为什么不总是执行这个？

```
SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Stuff").getRange('B2').setValue(emailAddress); 
```

您不需要“如果”，因为那里没有 2 种不同的行为。您在这两个部分都执行相同的操作。您正在写名为“Stuff”的工作表。

# java - 关于自定义排序列表

> ID：15319076
> 
> 赞同：-1
> 
> 时间：2013-03-10T04:59:18.227
> 
> 标签：java, list

在一次采访中，有人问了一个问题，有一个包含几个字符串的列表，如下所示，必须逐个字符进行比较

```
cDgHkJ----------->index 0
bAgHtR----------->index 1
aBEfgj----------->index 2 
```

现在我必须对列表进行排序，以某种方式我应该忽略不区分大小写的大小写它应该是但在 from 这样的

索引2和索引1的对比如下图

```
aAEfgj----------->index 1
bBgHtR----------->index 2 
```

然后比较索引1和索引2

```
cDgHkJ----------->index 0
aAEfgj----------->index 1   ( which we first sorted in first step) 
```

--------最终排序列表---------------

```
aAEfgJ---------> ultimately final sorted list , I want to achieve
cDgHkj----------->index 1  
aBEfgj----------->index 2 
```

请告知如何实现这一目标。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T05:18:19.760

您可以通过定义自己的比较器来轻松做到这一点，该比较器在强制为小写或大写*后比较两个字符串：*

```
List<String> strings = new ArrayList<>();

// fill with strings

Collections.sort(strings, 
                 new Comparator<String>() { 
                     @Override
                     public int compare(String s1, String s2) { 
                         return s1.toLowerCase().compareTo(s2.toLowerCase()); 
                     }
                 }
); 
```

# c++ - 如何在 C++ 中以二进制形式打印出 unsigned int？

> ID：15319081
> 
> 赞同：3
> 
> 时间：2013-03-10T04:59:51.150
> 
> 标签：c++, binary, type-conversion

我正在尝试在 C++ 中以二进制形式打印出一个无符号值。我为这项任务找到了许多技巧，例如

[http://www.java2s.com/Tutorial/Cpp/0040__Data-Types/Printinganunsignedintegerinbits.htm](http://www.java2s.com/Tutorial/Cpp/0040__Data-Types/Printinganunsignedintegerinbits.htm)

但是，我觉得应该有一个更直接的方法，也许用`sprintf`. 毕竟，有非常简单的方法可以打印十六进制或八进制值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T05:19:04.457

简单 - 使用 STL[位集](http://www.cplusplus.com/reference/bitset/bitset/bitset/)：

例如

```
bitset<10> n (120ul); // 10 bits in this case
cout << n.to_string() << endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T05:01:54.170

printf 系列不支持 base-2 打印。您需要使用自定义或非标准函数，例如[itoa](https://code.google.com/p/my-itoa/)（只需将基数/基数设置为 2）。

# java - 从需要登录的页面获取信息 (Java)

> ID：15319083
> 
> 赞同：0
> 
> 时间：2013-03-10T05:00:28.777
> 
> 标签：java, login, htmlunit

我正在制作一个小脚本，它应该从一个页面中获取大约 300 个链接并将它们制作成快捷方式（全部保存在一个文件夹中）。

我可以从某些页面获得我需要的所有链接，但有些是需要我先登录的网站的一部分。

我尝试了 HttpUnit，但我每次都失败了。到目前为止，我只是将 Html 页面放入 inputStream 并从那里读取（逐行查找我需要的内容），但我不知道如何连接到网站或在进入登录部分后做任何其他事情。

这是 HttpUnit 代码，如果它可以帮助任何人：

```
final WebClient webClient = new WebClient();

// Get the first page
final HtmlPage page1 = webClient.getPage("mywebsite");

ArrayList<HtmlForm> f;
f = (ArrayList<HtmlForm>) page1.getForms();

System.out.println(f);

// Get the form that we are dealing with and within that form, 
// find the submit button and the field that we want to change.
final HtmlForm form = page1.getFirstByXPath("//form[@id='login']");

final HtmlSubmitInput button = form.getFirstByXPath("//input[@value='Login']");
final HtmlTextInput username = form.getFirstByXPath("//input[@id='username']");

// Change the value of the text field
username.setValueAttribute("username");

final HtmlPasswordInput passField = form.getFirstByXPath("//input[@id='password']");

// Change the value of the text field
passField.setValueAttribute("pass");

// Now submit the form by clicking the button and get back the second page.
final HtmlPage page2 = button.click();

webClient.closeAllWindows(); 
```

请原谅我不好的变量命名：p 这是一个只为我自己编写的脚本，所以我并没有真正打扰。

我在“final HtmlPage page2 = button.click();”上得到一个 NullPointerException

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:22:37.873

您对按钮的搜索似乎失败了。在这条线之后

```
final HtmlSubmitInput button = form.getFirstByXPath("//submit[@value='Login']"); 
```

我会补充

```
assert(button != null) : "Could not find the button"; 
```

并使用断言运行您的应用程序（`-ea`JVM 的参数），它会在那里报告断言失败。

# javascript - IE8 中的 HTML5 localStorage getItem 问题

> ID：15319084
> 
> 赞同：1
> 
> 时间：2013-03-10T05:00:28.960
> 
> 标签：javascript, html, internet-explorer-8, local-storage

我有以下代码`localStorage`：

```
function supports_html5_storage() 
{
    try { 
        return 'localStorage' in window && window['localStorage'] !== null; 
    } 
    catch (e) {
        return false; 
    } 
}

function setFormFieldValues()
{
    if (supports_html5_storage()) {
        var retrievedUserDataObj = JSON.parse(localStorage.getItem('UserDataObj'));
        if (retrievedUserDataObj) {
            ...
        }       
    }
} 
```

现在这在 Firefox 和 Chrome 中运行良好，但在 IE8 中，我收到以下错误：

> 无法获取属性“getItem”的值：对象为空或未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:10:05.290

试试这个。如果您已经在使用`try/catch`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/DRPYG/)]]]

### 脚本：

```
function supports_html5_storage() {
    try {
        window.localStorage.setItem( 'checkLocalStorage', true );
        window.localStorage.removeItem( 'checkLocalStorage' );
        return true;
    } catch ( error ) {
        return false;
    };
};

document.getElementById( 'result' ).textContent = 
    'localstorage: ' + supports_html5_storage(); 
```

### HTML：

```
<div id="result"></div> 
```

# ios - HttpServletRequest getCookies() 对于 iOS 设备总是返回 null

> ID：15319090
> 
> 赞同：0
> 
> 时间：2013-03-10T05:02:18.197
> 
> 标签：ios, http, jakarta-ee, glassfish

当我在 Glassfish 3.1.2 下的 JAX-RS 应用程序中调用 HttpServletRequest getCookies() 方法时，iOS 设备（5 和 6）总是返回 null。

据我所知，我已经在 iOS 设备上启用了 cookie，它们存储在设备上，但它们不会随请求一起发送。Cookie 在桌面浏览器上运行良好。

关于如何使 cookie 过来以使 getCookies 不返回 null 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:38:26.307

我想通了，原来cookies的路径一开始就缺少/。一些浏览器将其视为无效而拒绝，另一些浏览器接受它但永远不会返回它，还有一些浏览器接受它并返回它。

我终于用下面的代码来追踪它：

```
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpMethod;
import org.apache.commons.httpclient.methods.GetMethod;

public class CheckCookies 
{
    public static void main(final String[] argv ) 
        throws Exception
    {
        HttpMethod method;
        HttpClient client;

        method = new GetMethod(argv[0]);
        client = new HttpClient();
        client.executeMethod(method);
    }
} 
```

这引发了一个异常，告诉我 cookie 无效，因为它`XXX`不是`/XXX`

# android - TextView 的自定义 OnClickListener/OnClick - 找不到

> ID：15319095
> 
> 赞同：1
> 
> 时间：2013-03-10T05:02:53.220
> 
> 标签：android, textview, onclicklistener

这是（我的）以下问题的扩展：

*   [带有自行实现的 OnClickListener 的 NullPointerException](https://stackoverflow.com/questions/15124640/nullpointerexception-with-self-implemented-onclicklistener)
*   [将参数/参数传递给 OnClickListener()](https://stackoverflow.com/questions/15123498/passing-arguments-parameters-to-onclicklistener)

除此之外，当我单击我的 TextLabel 时，我收到以下运行时错误/崩溃：

```
java.lang.IllegalStateException: Could not find a method onClick(View) in the activity class org.radio.app.Contacts for onClick handler on view class android.widget.TextView with id 'contactLabel' 
```

我认为这是因为我的自定义 OnClickListener 实现在另一个文件中。我尝试将它放入我的活动文件本身，但我得到了同样的错误。

我的 TextView 的 XML 具有以下内容：

```
<TextView
                android:id="@+id/contactLabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Label"
                android:textColor="@color/orange_theme_text"
                android:textStyle="bold"
                android:textSize="18sp"
                android:paddingRight="7dp"
                android:clickable="true"
                android:onClick="onClick"/> 
```

关于如何解决这个问题的任何想法？

编辑：这是我的自定义 OnClickListener，它甚至定义了一个 OnClick：

```
private class ContactOCL extends Activity implements OnClickListener {
    String contactInfo;
    public ContactOCL(String contactInfo) {
        this.contactInfo = contactInfo;
    }

    public void onClick(View v) {
        Log.v("onClick", "Are we even getting here?");
        // Check if contactInfo is an email address or a phone number
        if (contactInfo.contains("@"))
        {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            Uri data = Uri.parse("mailto:" + contactInfo);
            intent.setData(data);
            startActivity(intent); 
        }

        // Otherwise we have a phone number
        else
        {
            try {
                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:" + contactInfo));
                v.getContext().startActivity(callIntent);
            } catch (ActivityNotFoundException activityException) {
                Log.e("Calling a Phone Number", "Call failed", activityException);
            }
        }
    }

} 
```

再次编辑：这是我的活动片段：

```
TextLabel = (TextView) viewCI.findViewById(R.id.contactLabel);
TextLabel.setOnClickListener(new ContactOCL(info[i])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:05:53.827

您是否在代码中声明了以下内容

```
public void onClick(View v){
    // ur code
} 
```

编辑：

当您在布局 xml 中编写 android:onClick 时，您不需要实现 onClickListener。如果您想实现自定义 onClickListener，请执行以下操作

消除

```
android:onClick="onClick" 
```

在您的代码中添加以下行。

```
TextView tv = (TextView) findViewById(R.id.contactLabel);
tv.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:15:59.117

我最终取消了整个 TextView 点击，只为每个 ListView 项目执行了一次 onClick，效果非常好。它可能会在未来引起问题，但现在必须这样做，我需要继续研究其他功能。：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:30:53.393

你需要拿出

```
android:onClick="onClick" 
```

从你的 xml。`Activity`它正在寻找您的自定义`onClickListener`类中不存在的这种方法。如果您删除该行，那么它应该对您有用，或者至少修复该错误

尝试改变这个

```
TextLabel.setOnClickListener(new ContactOCL(info[i])); 
```

对此

```
TextLabel.setOnClickListener(new ContactOCL(info[i]), this); //this referring to `Activity` context 
```

然后将您的`onClick`类构造函数更改为接受`context`

**编辑**

由于这是一个`onClickListener`类，而不是从 xml 调用，您需要覆盖自定义类中的方法

```
@Override
public void onClick(View v)
{
...
} 
```

**另外的选择**

很好，但是我们缺少一些东西，如果不看到所有相关内容，很难说。但是，如果您只创建自定义侦听器类来访问从您传递的变量，`Activity`那么您真的不需要该类。你已经有了变量`info[]`。确保将其声明为`Activity`类的成员变量，然后您可以`onClick`在 xml中实现

在xml中把它放回去

```
<TextView
...
android:onClick="onClick"/> 
```

然后在你的`Activity`课上

```
public void onClick(View v)
{
      // do your work here. You have access to the contact because it was initialized as a member variable
}

 public class YourActivity extends Activity
{
DataType info[] = new DataType();

 public void onCreate()
{
    //set your contentView, button, etc here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T05:36:49.697

当您在 xml 中 TextView 的 android:onClick 属性中定义了函数名称时，您不必让 Activity 实现 onClickListener。您可以执行 xml 定义或通过 OnClickListener 接口。

***XML 定义***

当你定义

```
 <TextView
            android:id="@+id/contactLabel"
            ....
            ....
            android:onClick="onClick"/> 
```

您是说单击 TextView 时，它应该在我的定义 TextView 的活动中查找名为“onClick”的函数。因此，**您的函数名称可能是 ANYTHING (不一定是 onClick)**。您现在只需确保在您的活动中存在同名的函数。语法是：

```
 public void <function name> (View v) 
```

* * *

***OnClickListener 实现***

让您的 Activity 处理单击 TextView 的另一种方法是以编程方式进行，而不是通过 xml 这是在您的 Activity 实现 OnClickListener 并覆盖以下方法时完成的：

```
 @Override
    public void onClick(View v) 
```

**请注意，在这种情况下，函数名称必须是 onClick 并且该函数应该是覆盖函数**

为此，您现在必须告诉 Activity 正在处理您的 TextView 的点击。你这样做

```
 TextView textView = (TextView) findViewById(R.id.contactLabel);
    textView.setOnClickListener(this); 
```

* * *

最后，由于您同时执行了这两项操作，并且您的函数的函数名称恰好与您的 Activity 实现的 OnClickListener 类中的现有函数相同，因此存在歧义，因此引发了异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T05:37:02.780

所以，如果这是一个列表视图，您需要向适配器添加一个方法调用，让我们假设它是一个数组适配器，称为`arrayAdapter`

```
public View getView(int position, View convertView, ViewGroup parent)
{
  //做一些魔术来创建新视图

  View v = new View(....)//或赋值convertView

  v.setOnClickListener(新的 OnClickListner....)
}

```

# html - 在 div 中调整图片大小并对齐图片

> ID：15319097
> 
> 赞同：3
> 
> 时间：2013-03-10T05:03:08.313
> 
> 标签：html, css, image, dynamic-resizing

如何在 div 中调整图片大小和对齐图片？

我需要在 50x50px div 上显示调整大小的图像。我还希望它们集中在 div 上。我在下面制作了这张图片，以准确显示我想要做什么。

![在此处输入图像描述](../Images/0d8fcc24ef6cc00231a90125a1ae0b74.png)

问题在于，当图像的宽度较大且高度较大时，CSS 需要工作。

我使用 max-width 或 max-height 找到了此解决方案，但它仅适用于一个选项（更大的宽度或更大的高度）：

```
div.img-crop-thumb
{
    width: 50px;
    height: 50px;
    position: relative;
    overflow: hidden;
}
.img-crop-thumb img
{
    position: absolute;
    top: 0px;
    left: -50%;
    max-width: 30px;
    height: auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:16:57.907

这是我的功能（PHP）。虽然我做了很多动态图像文件调用

```
function remoteFileExists($url) {
    $curl = curl_init($url);

    //don't fetch the actual page, you only want to check the connection is ok
    curl_setopt($curl, CURLOPT_NOBODY, true);

    //do request
    $result = curl_exec($curl);

    $ret = false;

    //if request did not fail
    if ($result !== false) {
        //if request was ok, check response code
        $statusCode = curl_getinfo($curl, CURLINFO_HTTP_CODE);  

        if ($statusCode == 200) {
            $ret = true;   
        }
    }

    curl_close($curl);

    return $ret;
}

function pictureResize($imgDest, $width, $link){
    $default_pic = "default location"; //set a default image if none exists
    $exists = remoteFileExists($imgDest);
    if ($exists) {
        list($w_orig, $h_orig) = getimagesize($imgDest); //get size
        if($w_orig > $h_orig){ // if the width is greater than the height
            $ratio = $w_orig / $h_orig; // get the aspect ratio of the image
            $newWidth = $width * $ratio; // make a new width size
            $margin = round($newWidth/2); // find the margin
            $thisPic = '
                <div style="height:'.$width.'px; overflow:hidden; position:relative; width:'.$width.'px;">
                <img src="'.$imgDest.'" height="'.$width.'px" style="position:absolute; left:50%; margin-left:-'.$margin.'px;" /></div>'; 
        }else{
            $thisPic = '
                <div style="height:'.$width.'px; overflow:hidden; width:'.$width.'px;">
                <img src="'.$imgDest.'" width="'.$width.'px" /></div>'; 
        }
    }else{
        $thisPic = '
                <div style="height:'.$width.'px; overflow:hidden; position:relative; width:'.$width.'px;">
                <img src="'.$default_pic.'" width="'.$width.'px" height="'.$width.'px" style="position:absolute; left:50%; margin-left:-'.round(($width/2)-1).'px;" /></div>';
    }
    return $thisPic;
} 
```

这不会使高度居中，但会使宽度居中。像这样调用图像...

```
pictureResize($imgDest, /*set an int value for size*/, "set a string for location"); 
```

我希望这至少会为您指明正确的方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:10:09.613

使用 JavaScript：

工作演示：http: [//jsfiddle.net/wV4tn/](http://jsfiddle.net/wV4tn/)

（适用于横向、纵向和方形尺寸！）

```
//Takes in image's original width/height and the container's width height
function scaletofit(imgw, imgh, contw, conth){
    var perc = 0;
    if((conth / contw) > (imgh / imgw)){
        perc = contw / imgw;
    } else {
        perc = conth / imgh;
    }
    return [Math.round(imgw * perc), Math.round(imgh * perc)];
} 
```

为了集中在 div中，根据您的需要，将`left: 50%`and `margin-left`as `-imagewidth/2`OR`top: 50%`和`margin-top`as放在一起。`-imageheight/2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T05:16:51.423

使用 CSS3 `background-size: cover`。

这是一个工作示例：http: [//jsfiddle.net/HBPRv/](http://jsfiddle.net/HBPRv/)。

[您可以在此处](http://www.w3schools.com/cssref/css3_pr_background-size.asp)阅读文档。

# java - 同步循环链表

> ID：15319101
> 
> 赞同：1
> 
> 时间：2013-03-10T05:04:06.147
> 
> 标签：java, synchronization, linked-list

我正在编写一个有 2 个线程的程序。一个在迭代循环链表。列表总是有下一个元素，因为链表是循环的。修改列表的另一个线程。但我得到了并发修改异常。我能用它做什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:08:26.700

从以下 api 文档：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。

例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。

请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:08:34.927

在这种情况下不要使用迭代器，因为这就是异常的来源。

`currentElement = currentElement.next()`通过简单地设置或在您的（无限？）循环中调用它来推进当前元素。

如果列表不是线程安全的，那么在同时修改数据结构时可能会遇到麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T06:18:10.270

假设您的实现是线程安全的（您使用的是哪个类？）迭代器本身并不是线程安全的。他们不对 List 持有锁，因此他们不能阻止其他线程修改它。

如果您的 CircularList 自身同步（不确定您使用的是什么，但线程安全列表很常见 - 否则迭代器基本上总是非线程安全的），您可以通过以下方式解决此问题：

```
synchronized(list) {
  Iterator i = list.iterator();
  doSomething(i);
} 
```

另请参阅： [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#synchronizedList(java.util.List)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#synchronizedList(java.util.List))

# google-chrome - 直接来自 facebook 的 Facebook like 按钮在 FF、chrome 和 safari 中不起作用

> ID：15319105
> 
> 赞同：1
> 
> 时间：2013-03-10T05:04:53.907
> 
> 标签：google-chrome, firefox, safari, facebook-like, admin

所以我有一个非常奇怪的。

我正在尝试找出必须是 facebook 问题上的管理员的问题。

基本上简单的like按钮除了在IE中不显示

如果您在 Fire Fox、Chrome 或 Safari 中，它甚至不会在 Facebook 创建点赞按钮。例如尝试在 IE 以外的任何浏览器中创建一个按钮，如果输入公司名称，您将无法获得示例。 [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

除我的客户网站外，适用于任何其他 Facebook 页面。尝试 nordtrom 或 Ferrari 工作正常。

有没有人遇到过这个问题？这必须是 Facebook 中阻止它的设置。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:50:27.620

对于任何感兴趣的人来说，问题在于国家/地区的限制。删除了限制。奇迹般有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:50:59.980

我认为是因为您的页面不可访问。如果我点击[https://www.facebook.com/westseattlecoins](https://www.facebook.com/westseattlecoins)

我被重定向到我的 facebook 主页。如果我尝试法拉利，我会去法拉利的页面。Facebook 需要看到你的页面才能阅读它。

# c++ - 如何构造一个迭代器类？

> ID：15319107
> 
> 赞同：1
> 
> 时间：2013-03-10T05:05:23.163
> 
> 标签：c++, pointers, iterator

我希望了解以下迭代器类的[示例](http://www.cplusplus.com/reference/iterator/iterator/)。做什么`input_iterator_tag`？`mit.p`用作构造函数中使用的值，但不是指针`mit.p`？是什么`*this`？如果构造函数只允许整数和指针/值引用，是否`myiterator beginning(numbers)`允许？

```
// iterator example
#include <iostream>
#include <iterator>
using namespace std;

class myiterator : public iterator<input_iterator_tag, int>   // what is input_iterator_tag?
{
  int* p;
public:
  myiterator(int* x) :p(x) {}
  myiterator(const myiterator& mit) : p(mit.p) {}  // why isn't this p(*mit.p)?
  myiterator& operator++() {++p;return *this;}   // what is *this?
  myiterator operator++(int) {myiterator tmp(*this); operator++(); return tmp;}
  bool operator==(const myiterator& rhs) {return p==rhs.p;}
  bool operator!=(const myiterator& rhs) {return p!=rhs.p;}
  int& operator*() {return *p;}
};

int main () {
  int numbers[]={10,20,30,40,50};
  myiterator beginning(numbers);   // however, constructor is not overloaded with array
  myiterator end(numbers+5);
  for (myiterator it=beginning; it!=end; it++)
      cout << *it << " ";
  cout << endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T05:17:13.347

按照你问他们的顺序，你的问题的答案是：

1）`input_iterator_tag`在这里解释：http: [//en.cppreference.com/w/cpp/iterator/iterator_tags](http://en.cppreference.com/w/cpp/iterator/iterator_tags)

因此，`myiterator`扩展`iterator`并指定（在编译时）它是一个**输入**迭代器。它还指定它迭代的类型是`int`. （警告：这是我最不确定的答案，因为我对模板和迭代器没有丰富的经验。）

2）是的，`mit.p`是一个指针，但也是`p`，所以`p`（指针）被初始化为`mit.p`（也是一个指针）的副本。因此它们都指向同一个内存位置。

3)`*this`是迭代器本身。也就是说，`this`它是一个指向使用 调用方法的任何实际迭代器对象的指针，该对象的实际值也是如此：迭代器本身`this`。`*this`

4) 数组可以被视为 C++ 中的指针：保存数组的变量的行为本质上与指向数组中第一个元素的指针相同。因此，传递数组参数而不是指针参数是合法的。

# php - 使用 PHP 代码发送和返回 SOAP 响应

> ID：15319111
> 
> 赞同：0
> 
> 时间：2013-03-10T05:06:18.563
> 
> 标签：php, web-services, soap

我是这个“SOAP”的新手......

这是网络服务[http://www.sdlmi.com/MIHPService/MIHP.Service1.svc?wsdl](http://www.sdlmi.com/MIHPService/MIHP.Service1.svc?wsdl)

我正在使用 PHP 发送并获取响应以验证特定的用户 ID。这是我当前的 PHP 代码：

```
$userid = $_POST['tendigitid'];
$client = new SoapClient("http://www.sdlmi.com/MIHPService/MIHP.Service1.svc?wsdl");
$result = $client->isPersonEligible(array(....)); 
```

我很困惑如何发送我的 $userid 变量并从中获取响应。对于响应，我只需要一条简单的消息说明输入是否有效。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:27:57.323

为了帮助您，我们需要有关您正在连接的 Web 服务的更多信息。您可以提供文档的链接吗？

根据[这篇关于 SOAP 的维基百科文章](http://en.wikipedia.org/wiki/SOAP)，...

> SOAP 是一种协议规范，用于在计算机网络中实现 Web 服务时交换结构化信息。它的消息格式依赖于可扩展标记语言 (XML)

因此，您可能会使用 XML 发送您的请求信息。因此，请提供文档链接，您将获得更具体的帮助。您还需要提供有关您打算发送和接收的内容的更多信息。

尝试查看这些链接：

*   [PHP SOAP HTTP 请求](https://stackoverflow.com/questions/8805061/php-soap-http-request)
*   [如何从 PHP 发布 SOAP 请求](https://stackoverflow.com/questions/471115/how-to-post-soap-request-from-php)
*   [http://php.net/manual/en/book.soap.php](http://php.net/manual/en/book.soap.php)

另外，我**强烈**建议您在再次发布之前阅读 StackOverflow 常见问题解答。你的问题太模糊，没有足够的信息。我建议您相应地编辑您的帖子。

# java - 在 Java 中设置按钮的位置

> ID：15319112
> 
> 赞同：-2
> 
> 时间：2013-03-10T05:06:35.033
> 
> 标签：java, swing, layout-manager, null-layout-manager

我正在尝试向我的 JPanel 添加一个按钮并设置位置。我有

`buttonOptions.setLocation(1150, 700);`

但它将它添加到我的 JPanel 的中间，大约 600、20。我尝试添加

`buttonOptions.setLocation(1150, 700);`

在将按钮添加到面板后，但这也没有解决。我还设置了设置位置的操作，这很**有效**。

```
public class StartScreen extends JPanel implements ActionListener{
    ImageIcon imageButtonOptions = new ImageIcon(imageButtonOptionsPath);
    ImageIcon imageButtonOptionsHovered = new ImageIcon(imageButtonOptionsHoveredPath);

    JButton buttonOptions = new JButton(imageButtonOptions);

    public StartScreen() {  
        buttonOptions.setBorderPainted(false);  
        buttonOptions.setFocusPainted(false);  
        buttonOptions.setContentAreaFilled(false);
        buttonOptions.addActionListener(this);
        buttonOptions.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                buttonOptions.setIcon(imageButtonOptionsHovered);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                buttonOptions.setIcon(imageButtonOptions);
            }
        });
        buttonOptions.setLocation(1150, 700);
        add(buttonOptions);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T05:11:30.803

`JPanel`，默认情况下，默认使用 a `FlowLayout`。这会将组件（通常）以水平流的方式布局，默认情况下，从顶部中心开始，彼此相邻。

问题是，为什么需要绝对定位

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T05:09:13.550

您当前的问题是您上面的代码不尊重默认使用的布局管理器。

最好的解决方案是使用布局管理器为您进行组件布局，包括嵌套 JPanel，每个 JPanel 都使用自己的布局。有些人可能会建议您使用空布局，在大多数情况下这是错误的做法，因为它会使您的程序非常难以维护并且几乎无法升级。

顺便说一句，你想把按钮放在哪里？在 GUI 的右下角？

此外，与其在 JButton 中使用 MouseListener（这通常是一个坏主意），不如将 ChangeListener 添加到 JButton 的模型中。然后您可以轻松查看鼠标是否在按钮上。

**编辑**
你状态：

> 是的，右下角。

然后一种方法是使用 GridBagLayout 并将按钮放在右下角，方法是在 GridBagConstraints 参数中使用适当的常量。

**编辑 1**
例如：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class StartScreen extends JPanel implements ActionListener {
   private static final int PREF_W = 1200;
   private static final int PREF_H = 720;
   JButton buttonOptions = new JButton("Options");

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public StartScreen() {
      setLayout(new GridBagLayout());
      GridBagConstraints gbc = new GridBagConstraints(0, 0, 1, 1, 1.0, 1.0,
            GridBagConstraints.SOUTHEAST, GridBagConstraints.NONE, new Insets(
                  5, 5, 5, 5), 0, 0);
      add(buttonOptions, gbc);
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      // TODO Auto-generated method stub

   }

   private static void createAndShowGui() {
      StartScreen mainPanel = new StartScreen();

      JFrame frame = new JFrame("StartScreen");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

**编辑 2**
现在使用在悬停或“翻转”时更改的图标。我错了——没必要听 ButtonModel 的状态。只需设置按钮的图标及其翻转图标，按钮就会为您交换它们：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

@SuppressWarnings("serial")
public class StartScreen extends JPanel {
   private static final int PREF_W = 1200;
   private static final int PREF_H = 720;
   private static final int BI_WIDTH = 100;
   private static final int BI_HEIGHT = 30;

   private JButton buttonOptions = new JButton();
   private Icon nonHoveredIcon;
   private Icon hoveredIcon;

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public StartScreen() {
      hoveredIcon = createIcon("Hovered");
      nonHoveredIcon = createIcon("Non-Hovered");

      buttonOptions.setIcon(nonHoveredIcon);
      buttonOptions.setRolloverIcon(hoveredIcon);

      setLayout(new GridBagLayout());
      GridBagConstraints gbc = new GridBagConstraints(0, 0, 1, 1, 1.0, 1.0,
            GridBagConstraints.SOUTHEAST, GridBagConstraints.NONE, new Insets(
                  5, 5, 5, 5), 0, 0);
      add(buttonOptions, gbc);
   }

   private ImageIcon createIcon(String text) {
      BufferedImage img = new BufferedImage(BI_WIDTH, BI_HEIGHT, 
            BufferedImage.TYPE_INT_ARGB);
      Graphics g = img.getGraphics();
      g.setColor(Color.black);
      Graphics2D g2 = (Graphics2D) g;
      g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, 
            RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
      g.drawString(text, 10, 20);
      g.dispose();
      return new ImageIcon(img);
   }

   private static void createAndShowGui() {
      StartScreen mainPanel = new StartScreen();

      JFrame frame = new JFrame("StartScreen");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# iphone - 如何在目标 c 中使用 Google 自定义搜索进行图像搜索

> ID：15319115
> 
> 赞同：5
> 
> 时间：2013-03-10T05:07:17.407
> 
> 标签：iphone, ios, objective-c, google-custom-search, google-image-search

谁能告诉我如何在我的 iphone 应用程序中使用谷歌自定义搜索来仅搜索图像。我试过了，但它要求输入“cse”或“cx”参数。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T06:08:15.803

Google自**定义搜索 API**让您可以开发网站和程序，以编程方式从 Google 自定义搜索中检索和显示搜索结果。

使用此 API，您可以使用 RESTful 请求以 JSON 或 Atom 格式获取**Web 搜索**或**图像搜索**结果。

[请参阅此处](https://developers.google.com/custom-search/v1/overview)的可用文档

[这个](https://developers.google.com/image-search/v1/jsondevguide)也看

**笔记：**

**cx：**自定义搜索引擎的标识符。

访问[**Google 自定义搜索页面**](http://www.google.com/cse/)以创建自定义搜索引擎以进行测试。选择您要包含在搜索中的站点并配置其他选项。

点击“**控制面板**”并记下您的**搜索引擎唯一 ID**。这是API 使用的**cx 参数。**

在此处查看[完整文档](https://developers.google.com/custom-search/v1/getting_started)

例子：

```
GET https://www.googleapis.com/customsearch/v1?key=INSERT-YOUR-KEY&cx=017576662512468239146:omuauf_lfve&q=lectures

<script src="https://www.googleapis.com/customsearch/v1?key=YOUR-KEY&cx=017576662512468239146:omuauf_lfve&q=cars&callback=hndlr"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:10:06.103

顺便说一句，您可以使用我可怜的库（[YCustomSearchEngine](https://github.com/yanlobkarev/YCustomSearchEngine)）

# c - K&R 表查找代码

> ID：15319116
> 
> 赞同：4
> 
> 时间：2013-03-10T05:07:25.040
> 
> 标签：c

尝试理解以下代码，用于实现 K&R 中讨论的简单哈希查找算法的链表/结构：

```
struct nlist *lookup(char *);
char *strdup(char *);
/* install: put (name, defn) in hashtab */
struct nlist *install(char *name, char *defn)
{
    struct nlist *np;
    unsigned hashval;
    if ((np = lookup(name)) == NULL) { /* not found */
        np = (struct nlist *) malloc(sizeof(*np));
        if (np == NULL || (np->name = strdup(name)) == NULL)
            return NULL;
        hashval = hash(name);
        np->next = hashtab[hashval];
        hashtab[hashval] = np;
} else /* already there */
        free((void *) np->defn); /*free previous defn */
if ((np->defn = strdup(defn)) == NULL)
    return NULL;
return np; 
```

有几件事我不明白。这一行：

```
np = (struct nlist *) malloc(sizeof(*np)); 
```

在 if 语句将值分配`lookup(name)`给 np 之后发生。那么这个 malloc 赋值有什么作用呢？它会重新初始化值吗？如果是这样，以下行是怎么回事？

```
if ((np = lookup(name)) == NULL) 
```

如果 malloc 重新初始化它，它不会总是 NULL 吗？还是 malloc 只是简单地分配内存而不会弄乱之前分配给 np 的值？如果是这种情况，那么如果 np 在初始 if 语句中已经这样做了，为什么还要再次检查 np 是否为 NULL 呢？

说到`np->next`代码，我完全迷失了。为什么 np->next 似乎是指自己？

下面是 lookup() 函数的代码：

```
/* lookup: look for s in hashtab */
    struct nlist *lookup(char *s)
    {
    struct nlist *np;
    for (np = hashtab[hash(s)]; np != NULL; np = np->next)
        if (strcmp(s, np->name) == 0)
            return np; /* found */
    return NULL; /* not found */
} 
```

这是 nlist 结构：

```
struct nlist { /* table entry: */
    struct nlist *next; /* next entry in chain */
    char *name; /* defined name */
    char *defn; /* replacement text */
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T05:10:42.180

```
if ((np = lookup(name)) == NULL) 
```

做两件事。首先，它将结果分配给`lookup(name)`to `np`。其次，它测试那个赋值的结果，看它是否是`NULL`.

如果该`if`陈述为真，则意味着`np`is `NULL`，因此他们继续为其`malloc`赋值。

现在，如果`malloc`分配内存失败，则返回`NULL`. `strdup`内部调用`malloc`，所以这就是为什么下一行

```
if (np == NULL || (np->name = strdup(name)) == NULL) 
```

确保刚刚发生的两个分配都成功了。

* * *

首先，哈希表看起来像这样：它是一个指向链表的指针表。数组中的索引是哈希值：

![在此处输入图像描述](../Images/ba863524e935187aeed13e6ff48f92cf.png)

现在当我们添加一个新条目时：

```
 np->next = hashtab[hashval];
    hashtab[hashval] = np; 
```

`hashtab[hashval]`已经是具有相同哈希的条目列表的开头。它可能是 NULL。此代码将新条目添加到列表的*前面*！所以我们将新条目的`next`指针指向现有列表，并将哈希表设置为指向新条目，因此它现在是第一个。

![在此处输入图像描述](../Images/f75882e9076ffbcf64493b7a53dcc918.png)

他们将节点添加到列表的前面，因此插入是一个 O(1) 操作。

# zurb-foundation - Foundation 4 在导航栏中显示网格

> ID：15319117
> 
> 赞同：1
> 
> 时间：2013-03-10T05:07:44.810
> 
> 标签：zurb-foundation

在 Foundation 3 的导航栏文档中，您可以在导航菜单中添加网格。请参阅[http://foundation.zurb.com/old-docs/f3/navigation.php#nav-bar](http://foundation.zurb.com/old-docs/f3/navigation.php#nav-bar)

如果我在 Foundation 4 中尝试相同的方法，它就无法正常工作。这是它的外观截图。

![在此处输入图像描述](../Images/5bda47e17990140c38d52097457a39db.png)

```
<li class="has-dropdown"><a href="#">Settings</a>
    <ul class="dropdown">
        <li><label>Dropdown Level 1 Label</label></li>
        <li>
            <div class="row">
               <div class="small-6 columns"><a href="#">hello</a></div>
               <div class="small-6 columns"><a href="#">hello</a></div>
            </div>
       </li>
   </ul>
</li> 
```

他们是否删除了此功能，还是我做错了？

# mod-rewrite - Tuckey UrlRewriteFilter - 在根目录而不是子目录中重定向？

> ID：15319120
> 
> 赞同：0
> 
> 时间：2013-03-10T05:08:20.147
> 
> 标签：mod-rewrite, tuckey-urlrewrite-filter

我将 Tuckey UrlRewriteFilter 与 Tomcat 7 一起使用。我想缩短根文件夹中的一堆 URL，但又不会弄乱子文件夹等...

例如，我有类似...

```
/
/include/
/admin/
    page.jsp
    ...
/site/
    page.jsp
    ...
etc... 
```

我想做类似的事情：

```
^/$  >>  /site/page.jsp?handle=home
^/(.*) >> /site/page.jsp?handle=$1 
```

但是如何排除子目录？例如 /admin 仍然需要处理里面的文件。

我可以明确地将子目录重定向到另一个位置。但这不是那么优雅。

我也可以使用另一个子目录 - 例如 ^/s/(.*) 但我希望它们脱离根目录以提高可用性。

```
/
/features
/examples
/support
etc... 
```

做这种事情的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:43:45.700

只需匹配不包含斜线的任何内容，如下所示：

```
RewriteEngine On
RewriteBase /
Options -MultiViews
RewriteRule ^$ /site/page.jsp?handle=home [L]
RewriteRule ^[^/]+$ /site/page.jsp?handle=$0 [L] 
```

# c++ - 在此代码示例中锁定时 .push() 是否会失败或等待？

> ID：15319121
> 
> 赞同：0
> 
> 时间：2013-03-10T05:08:21.170
> 
> 标签：c++, thread-safety, locking, websocket, queue

哇，我希望我知道这个页面[https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)由我的 c++ 英雄[https://stackoverflow.com/users/1047661编写/zaphoyd](https://stackoverflow.com/users/1047661/zaphoyd)在我开始我的 c++ websocket 冒险之前。那里有很多课程。

如果我没看错（这是一个延伸的哈哈），看起来连接和消息发送和接收都是在一个线程中处理的（不能等到他“多线程”或者他所说的任何东西）在这个基本示例[http://www.zaphoyd.com/websocketpp/manual/common-patterns/server-initiated-messages](http://www.zaphoyd.com/websocketpp/manual/common-patterns/server-initiated-messages)中`WebSocket++ handlers block core networking functions. While this program is running its send loop in on_message, no new connections are being processed and no new messages are being received.`）并设置了一个单独的线程`boost::thread(bind(&broadcast_server::process_messages,&server));`来实际处理消息，而主 websocket++ 线程只是添加到排队必要的信息。

知识不足请大家多多指教：`.push()`如果和链接中这一段代码同时发生会不会失败

```
while(m_actions.empty()) {
    m_action_cond.wait(lock);
}

action a = m_actions.front();
m_actions.pop();

lock.unlock(); 
```

还是`.push()`只是等待锁被释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:57:21.933

`std::queue<T>`自己对线程一无所知；但是，在链接的代码中，所有调用`push`都包装如下：

```
 boost::unique_lock<boost::mutex> lock(m_action_lock);
    //std::cout << "on_open" << std::endl;
    m_actions.push(action(SUBSCRIBE,hdl));
    lock.unlock();
    m_action_cond.notify_one(); 
```

上面对象的构造函数`lock`在内部调用`m_action_lock.lock()`which 阻塞直到锁被释放。

请注意`m_action_cond.wait(lock)`，在您粘贴在问题中的代码中，在等待条件时解锁锁，并在它被唤醒后再次获取锁（由于来自另一个线程的信号，或者[可能是虚假](https://stackoverflow.com/questions/8594591/why-does-pthread-cond-wait-have-spurious-wakeups)的），所以它不会'不要阻止生产者（做的那个`push`）线程在等待时获取锁：它只是在唤醒和调用`lock.unlock()`阻塞之间发生。

# javascript - 哪个渲染最快的 Div、ul-li 或表格以显示非常长的列表

> ID：15319122
> 
> 赞同：-2
> 
> 时间：2013-03-10T05:08:24.897
> 
> 标签：javascript, jquery, html

我想在列表中显示非常非常大的数据：

1：**它应该是搜索引擎友好的**：像谷歌、必应这样的搜索引擎很容易找到我的内容。

2：**应该很快**：这是最快的。

我已经尝试将它用于本地系统的小列表，所有这些都需要几乎相同的时间来呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:13:18.383

我会选择ul/li。它可以通过 css 轻松编辑，并且填充列表将花费很少的精力。

任何带有文本的东西都会优化你的搜索引擎，所以你三个中的任何一个都可以。

这是一个讨论表格和 SEO 的主题： [https ://webmasters.stackexchange.com/questions/6890/are-html-tables-bad-for-seo](https://webmasters.stackexchange.com/questions/6890/are-html-tables-bad-for-seo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:59:39.060

他们都不会对*搜索引擎友好*！

如果您通过 JavaScript 填充您的页面，那么您的 HTML 代码在您的服务器最初发送时没有任何内容......无论是表格还是列表或其他任何内容，如果您停用 JS 或您是一个搜索机器人。
[搜索引擎可以索引 JavaScript 生成的网页吗？](https://stackoverflow.com/questions/826275/can-search-engines-index-javascript-generated-web-pages)

# css - Ruby on Rails 样式表渲染文件和带有通用 css 的 application.css

> ID：15319126
> 
> 赞同：1
> 
> 时间：2013-03-10T05:08:35.713
> 
> 标签：css, ruby-on-rails, ruby, stylesheet

我想知道`application.css`是为了什么？如果我正在创建一个新文件`header`，`footer`所以我的所有页面都可以只包含`header`和`footer`页面，我是否只是将所有常见的 css 语法放入`application.css`？还是我应该创建一个新的`custom.css`并放置将在整个应用程序中使用的所有语法，如正文、html、ul、a、标签和其他东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:20:11.103

是`application.css`为了什么？您是否阅读过关于**[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)**的 Rails 指南？仅该页面就回答了您的“它是做什么用的？” 问题和更清楚和彻底。

至于您的样式的放置，该指南提到：

> 编译文件的默认匹配器包括 application.js、application.css 和所有非 JS/CSS 文件（即 .coffee 和 .scss 文件在编译为 JS/CSS 时不会自动包含在内）：

这意味着默认情况下 Rails 只会`application.css`为您编译一个文件。当然，您可以将样式放入`app/assets/stylesheets/custom.css`其中并将其包含在

```
/**
 *= require custom 
 */ 
```

但是您的“自定义”样式听起来像应用程序样式，因此最好将其全部放入`application.css`并让 Rails 执行默认设置。

# c++ - 从超类的指针调用时，基类函数不会覆盖超类函数

> ID：15319131
> 
> 赞同：1
> 
> 时间：2013-03-10T05:10:00.640
> 
> 标签：c++, function, pointers, inheritance

我有一个`sub`继承自一个类的类`super`。它们都定义了一个函数`void function()`（因此 in 的函数`sub`会覆盖 in的函数`super`）。我创建一个`super`指针并为其分配一个新的`sub`. 然后我通过 指针调用`function()`实例。但是，函数 in被调用，而不是 in 。我希望它调用函数 in ，而不是调用 in 。我该怎么做？`sub``super``super``sub``sub``super`

```
#include <cstdio>  

class super {  
    public:
    void function() {  
        printf("Super\n");  
    }  
};  

class sub: public super {  
    public:  
    void function() {  
        printf("Sub\n");  
    }  
};  

int main() {  
    super *p;  
    p = new sub;  
    p->function();  
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:19:09.510

声明应为：

```
virtual void function() 
```

我对 C++ 生疏了，但基本上，如果函数不是虚拟的，编译器会告诉你，如果指针指向 super，则 function() 调用将转到 super::function()。Virtual 告诉它你希望它找出正确的。实际上，这意味着它将创建一个 vtable，并进行间接查找。那么它是 super* 还是 sub* 都没有关系，因为它们都有一个 vtable，并且 vtable 将针对对象的实际类型指向正确版本的 function()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:28:38.717

```
class super {  
    public:
    virtual void function() {  
        printf("Super\n");  
    }  
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:31:04.203

*   要使用基类指针调用派生类函数，您需要实现称为函数覆盖的概念。
*   但是在您的情况下，您实现了功能隐藏，而不是功能覆盖。
*   要覆盖函数，派生类和基类都应该具有相同的函数签名，并且必须使用**`virtual`**关键字声明基类函数声明。
*   如果**`virtual`**在基类声明中使用关键字，那么内存中的虚拟表会负责调用类链的大多数派生函数。

如需更多了解，请阅读以下内容：

*   [功能隐藏](http://www.learncpp.com/cpp-tutorial/116-adding-changing-and-hiding-members-in-a-derived-class/)
*   [函数覆盖](http://www.learncpp.com/cpp-tutorial/122-virtual-functions/)
*   [虚拟表](http://www.learncpp.com/cpp-tutorial/125-the-virtual-table/)

# haskell - 如何比较 Haskell 中的两个列表？

> ID：15319136
> 
> 赞同：16
> 
> 时间：2013-03-10T05:10:24.050
> 
> 标签：haskell

在 Haskell 中，如何比较两个列表以检查它们是否相等？顺序也不重要。

例子：

`[1,2] = [2,1]`

我试过`all (flip elem [1,2,3]) [2,1]`了，但这会返回`true`......

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T05:15:06.580

像这样的东西？

```
import Data.List (sort)
areEqual a b = sort a == sort b

OUTPUT:
*Main> areEqual [1,2] [2,1]
True 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T15:03:54.663

作为`Eq a => Eq [a]`（[http://www.haskell.org/ghc/docs/7.4.1/html/libraries/base-4.5.0.0/Data-Eq.html](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/base-4.5.0.0/Data-Eq.html)）

您不需要额外的代码来比较列表是否相等。

```
[1,2] == [2,1] 
```

如果要将列表作为包进行比较，则包是**MultiSet**，因此请查找[Multiset 包](http://hackage.haskell.org/packages/archive/multiset/0.2.2/doc/html/Data-MultiSet.html)

```
import "multiset" Data.MultiSet as M

-- or

import "multiset" Data.IntMultiSet as M   -- if you deal with Ints 

M.fromList [1,2] == M.fromList [2,1] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T12:20:40.350

“没有顺序或重复的收集”的一个很好的数据结构来自模块`Data.Set`：

```
import qualified Data.Set as S

sameElems xs ys = S.fromList xs == S.fromList ys 
```

但是，这确实认为`[1,1]`等于`[1]`，这可能不是您想要的。

# c - 对旧控制台 Magnavox Odyssey 2 进行编程？

> ID：15319143
> 
> 赞同：4
> 
> 时间：2013-03-10T05:12:15.173
> 
> 标签：c, assembly, console

我一直在四处寻找，但找不到任何关于如何真正开始为 Odyssey 2 编程的信息。我认为搞砸一个，也许尝试编写一个简单的游戏是很有趣的。但我想知道如何开始。例如，控制台用什么编码，程序集？C？网上有没有示例代码？有一些教程吗？我一直在寻找一些，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T05:19:07.373

它只有 64 字节的内存，所以是的，你需要使用汇编。有一个开源的，好评如潮的游戏[杀死攻击的外星人](http://soeren.informationstheater.de/g7000/ktaa.html)，它应该可以帮助你开始。如有疑问，您还可以查看 Odyssey² 开源模拟器[o2em](http://o2em.sourceforge.net/)的源代码。

[这里](http://soeren.informationstheater.de/g7000/)也有大量的系统文档（尤其是[这个页面](http://soeren.informationstheater.de/g7000/toc.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:18:07.423

它有一个 Intel 8048 CPU，所以你可能几乎被汇编语言困住了——我不知道有任何针对 8048 的编译器，并且只有几百字节的 RAM 可用（其中只有 64 字节用于通用用途），它似乎也不是编译器的好目标。周围有一些 8048 汇编器，其中大部分可免费下载。如果您稍微看一下，您还可以挖掘一些 Odessey 2 模拟器（同样，至少有些是免费的）。

# excel - Excel VBA列范围选择选择错误的列

> ID：15319148
> 
> 赞同：1
> 
> 时间：2013-03-10T05:13:17.103
> 
> 标签：excel, excel-2007, vba

我正在研究一个宏，它将在一个工作簿中的多个工作表上运行，在工作表之间切换并将数据复制/粘贴到一个主工作表。

我的问题是，当我使用**Windows(index).Activate**切换到另一个工作表然后尝试选择要删除的一些列时，它没有正确选择列。我正在使用下面的代码，并且完全相同的代码在主表中工作得很好，但是一旦我切换到 VBA 代码中的另一个表并使用它，它就会选择从第 1 列开始到末尾的所有列数据。

下面代码背后的想法是从第 1 列开始并搜索名为“综合评分”的列。然后我想删除从第 3 列开始到综合评级列的所有列。

有人可以告诉我我做错了什么吗？非常感谢您的帮助！

```
For counter = 1 To 40 Step 1
        Cells("1", counter).Select
        strval = ActiveCell.Value
    If strval = "Composite Rating" And counter <> 3 Then
        Range(Cells(1, 3), Cells(1, counter - 1)).EntireColumn.Select
        Selection.Delete Shift:=xlLeft
        Exit For
    End If
    Next counter 
```

编辑：对不起，应该提到我的设置。我在 Windows 7 上使用 Excel 2007。我已经尝试过 xls 和 xlsx 文件，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:49:22.977

试试下面的代码：

```
 Dim rng As Range
    Set rng = Range("A1:Z1").Find("Composite Rating")

    If Not rng Is Nothing Then
        If rng.Column > 3 Then
            Range("C1", rng).EntireColumn.Delete
        End If
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:21:53.910

选择其他窗口时，集合中的`index`属性会发生变化 -> 它是相对的！`Windows`

请改用该`Workbooks`集合。

# java - 使用 thrift 将 LongType 插入 Cassandra 失败

> ID：15319150
> 
> 赞同：3
> 
> 时间：2013-03-10T05:13:28.267
> 
> 标签：java, nosql, cassandra, thrift

我试图在 cassandra 中插入一个 longtype 列：

```
 Column docid = new Column();        
     docid.setName("docid".getBytes());      
     ByteBuffer val = ByteBuffer.allocate(8);
     val.putLong(123111111111111111L);
     docid.setValue(val);
     docid.setTimestamp(System.currentTimeMillis());
     client.insert(term, parent, docid, ConsistencyLevel.ONE); 
```

它运行正常，但是当我尝试通过 CLI 获取值时，它返回

```
[default@Test] get Term[utf8('hello')]['docid'] as long;
=> (column=docid, value=, timestamp=1362891987234) 
```

似乎没有正确插入值。为什么？

我尝试插入 ascii 类型并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T09:32:17.373

也许您已经找到了解决方案，或者您切换到了 CQL，但这会有所帮助：

将 long 值放入 ByteBuffer 后，您忘记了对其进行**翻转（）**。正如 javadoc 中所解释的，翻转缓冲区意味着*将限制设置为当前位置，然后将当前位置设置为零*。

如果您不翻转它，则从当前位置开始读取包含的值（就在您插入的字节之后），这就是为什么当您查询它时“值”为空的原因。

这是固定代码：

```
val.putLong(123111111111111111L);
val.flip(); // Flip the buffer
docid.setValue(val); 
```

**编辑 ：**

`val.array()`返回 ByteBuffer 的内部数组，因此不是翻转缓冲区，而是将列的值设置为`val.array()`也可以工作（但前提**是**不直接分配字节缓冲区）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:18:20.123

改变：

```
docid.setValue(val); 
```

至：

```
docid.setValue(val.array()); 
```

# delphi - 如何将 TShellListView 项目过滤为特定的文件扩展名？

> ID：15319154
> 
> 赞同：0
> 
> 时间：2013-03-10T05:13:44.300
> 
> 标签：delphi, delphi-7

我正在开发一个需要 ShellListView1 的 Delphi 7 项目，因此只显示 .PNG 或 .JPG 文件。

如何仅查看文件夹和特定文件类型（例如：'. *exe;* .bat'）？

有人告诉我是一个带有屏蔽的 ShellListView1 组件，但我尝试的网站处于脱机状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:12:57.577

您可以为该`OnAddFolder`事件编写一个处理程序，该处理程序会在要将项目添加到列表时触发。以下代码允许仅将带有`*.exe`或`*.bat`扩展名的文件添加到列表中：

```
procedure TForm1.ShellListView1AddFolder(Sender: TObject;
  AFolder: TShellFolder; var CanAdd: Boolean);
var
  FileExt: string;
begin
  CanAdd := not AFolder.IsFolder;
  if CanAdd then
  begin
    FileExt := ExtractFileExt(AFolder.PathName);
    CanAdd := (FileExt = '.exe') or (FileExt = '.bat');
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T07:59:28.920

```
uses Masks;
...
procedure TForm1.ShellListView1AddFolder(Sender: TObject;
  AFolder: TShellFolder; var CanAdd: Boolean);
begin
  CanAdd := AFolder.IsFolder or MatchesMask(AFolder.PathName, '*.exe');
end; 
```

函数 **MatchesMask()**返回 True 是与掩码指定的格式匹配的字符串值。

语法上有效的掩码由文字字符、集合和通配符组成。通配符是星号 (*) 或问号 (?)。星号匹配任意数量的字符。问号匹配单个任意字符。

# delphi - 使用 shell execute 以管理员身份运行 cmd

> ID：15319158
> 
> 赞同：21
> 
> 时间：2013-03-10T05:14:19.140
> 
> 标签：delphi, delphi-2010

我需要以管理员身份单击按钮运行 cmd。有用。但我需要以管理员身份运行它。这是怎么做到的？

```
 ShellExecute(Handle, 'open', 'c:\Windows\system32\cmd.exe', nil, nil, SW_SHOWNORMAL) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-10T18:55:28.837

将`open`动词替换`runas`为如下所示。无论如何，尽量避免路径硬编码：

```
uses
  ShellAPI;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ShellExecute(Handle, 'runas', 'cmd.exe', nil, nil, SW_SHOWNORMAL);
end; 
```

您还可以通过将[`ElevationRequired`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TButton.ElevationRequired)属性设置为 True 来为按钮添加盾牌图标。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-10T20:01:48.910

`ShellExecute/Ex()`使用`"runas"`动词是以可编程方式启动提升进程的唯一*官方*方法，特别是如果正在运行的可执行文件没有自己的 UAC 清单来调用提升。

但是，这不是启动提升进程的*唯一方法。*请查看以下文章，该文章详细解释了提升并提供了更灵活的替代实现，例如`CreateProcessElevated()`and ：`ShellExecuteElevated()`

[Vista UAC：权威指南](http://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-14T19:16:06.043

这是使用 ShellExecute + runas 运行提升的例程（即在完全管理员帐户下）的示例代码。它应该与旧 Windows 版本（Windows Vista 之前）中的 UAC 启用/禁用 + 一起使用。

```
unit RunElevatedSupport;

{$WARN SYMBOL_PLATFORM OFF}
{$R+}

interface

uses
  Windows;

type
  TElevatedProc        = function(const AParameters: String): Cardinal;
  TProcessMessagesMeth = procedure of object;

var
  // Warning: this function will be executed in external process.
  // Do not use any global variables inside this routine!
  // Use only supplied AParameters.
  OnElevateProc: TElevatedProc;

// Call this routine after you have assigned OnElevateProc
procedure CheckForElevatedTask;

// Runs OnElevateProc under full administrator rights
function RunElevated(const AParameters: String; const AWnd: HWND = 0; const AProcessMessages: TProcessMessagesMeth = nil): Cardinal; overload;

function  IsAdministrator: Boolean;
function  IsAdministratorAccount: Boolean;
function  IsUACEnabled: Boolean;
function  IsElevated: Boolean;
procedure SetButtonElevated(const AButtonHandle: THandle);

implementation

uses
  SysUtils, Registry, ShellAPI, ComObj;

const
  RunElevatedTaskSwitch = '0CC5C50CB7D643B68CB900BF000FFFD5'; // some unique value, just a GUID with removed '[', ']', and '-'

function CheckTokenMembership(TokenHandle: THANDLE; SidToCheck: Pointer; var IsMember: BOOL): BOOL; stdcall; external advapi32 name 'CheckTokenMembership';

function RunElevated(const AParameters: String; const AWnd: HWND = 0; const AProcessMessages: TProcessMessagesMeth = nil): Cardinal; overload;
var
  SEI: TShellExecuteInfo;
  Host: String;
  Args: String;
begin
  Assert(Assigned(OnElevateProc), 'OnElevateProc must be assigned before calling RunElevated');

  if IsElevated then
  begin
    if Assigned(OnElevateProc) then
      Result := OnElevateProc(AParameters)
    else
      Result := ERROR_PROC_NOT_FOUND;
    Exit;
  end;

  Host := ParamStr(0);
  Args := Format('/%s %s', [RunElevatedTaskSwitch, AParameters]);

  FillChar(SEI, SizeOf(SEI), 0);
  SEI.cbSize := SizeOf(SEI);
  SEI.fMask := SEE_MASK_NOCLOSEPROCESS;
  {$IFDEF UNICODE}
  SEI.fMask := SEI.fMask or SEE_MASK_UNICODE;
  {$ENDIF}
  SEI.Wnd := AWnd;
  SEI.lpVerb := 'runas';
  SEI.lpFile := PChar(Host);
  SEI.lpParameters := PChar(Args);
  SEI.nShow := SW_NORMAL;

  if not ShellExecuteEx(@SEI) then
   RaiseLastOSError;
  try

    Result := ERROR_GEN_FAILURE;
    if Assigned(AProcessMessages) then
    begin
      repeat
        if not GetExitCodeProcess(SEI.hProcess, Result) then
          Result := ERROR_GEN_FAILURE;
        AProcessMessages;
      until Result <> STILL_ACTIVE;
    end
    else
    begin
      if WaitForSingleObject(SEI.hProcess, INFINITE) <> WAIT_OBJECT_0 then
        if not GetExitCodeProcess(SEI.hProcess, Result) then
          Result := ERROR_GEN_FAILURE;
    end;

  finally
    CloseHandle(SEI.hProcess);
  end;
end;

function IsAdministrator: Boolean;
var
  psidAdmin: Pointer;
  B: BOOL;
const
  SECURITY_NT_AUTHORITY: TSidIdentifierAuthority = (Value: (0, 0, 0, 0, 0, 5));
  SECURITY_BUILTIN_DOMAIN_RID  = $00000020;
  DOMAIN_ALIAS_RID_ADMINS      = $00000220;
  SE_GROUP_USE_FOR_DENY_ONLY  = $00000010;
begin
  psidAdmin := nil;
  try
    // Создаём SID группы админов для проверки
    Win32Check(AllocateAndInitializeSid(SECURITY_NT_AUTHORITY, 2,
      SECURITY_BUILTIN_DOMAIN_RID, DOMAIN_ALIAS_RID_ADMINS, 0, 0, 0, 0, 0, 0,
      psidAdmin));

    // Проверяем, входим ли мы в группу админов (с учётов всех проверок на disabled SID)
    if CheckTokenMembership(0, psidAdmin, B) then
      Result := B
    else
      Result := False;
  finally
    if psidAdmin <> nil then
      FreeSid(psidAdmin);
  end;
end;

{$R-}

function IsAdministratorAccount: Boolean;
var
  psidAdmin: Pointer;
  Token: THandle;
  Count: DWORD;
  TokenInfo: PTokenGroups;
  HaveToken: Boolean;
  I: Integer;
const
  SECURITY_NT_AUTHORITY: TSidIdentifierAuthority = (Value: (0, 0, 0, 0, 0, 5));
  SECURITY_BUILTIN_DOMAIN_RID  = $00000020;
  DOMAIN_ALIAS_RID_ADMINS      = $00000220;
  SE_GROUP_USE_FOR_DENY_ONLY  = $00000010;
begin
  Result := Win32Platform <> VER_PLATFORM_WIN32_NT;
  if Result then
    Exit;

  psidAdmin := nil;
  TokenInfo := nil;
  HaveToken := False;
  try
    Token := 0;
    HaveToken := OpenThreadToken(GetCurrentThread, TOKEN_QUERY, True, Token);
    if (not HaveToken) and (GetLastError = ERROR_NO_TOKEN) then
      HaveToken := OpenProcessToken(GetCurrentProcess, TOKEN_QUERY, Token);
    if HaveToken then
    begin
      Win32Check(AllocateAndInitializeSid(SECURITY_NT_AUTHORITY, 2,
        SECURITY_BUILTIN_DOMAIN_RID, DOMAIN_ALIAS_RID_ADMINS, 0, 0, 0, 0, 0, 0,
        psidAdmin));
      if GetTokenInformation(Token, TokenGroups, nil, 0, Count) or
         (GetLastError <> ERROR_INSUFFICIENT_BUFFER) then
        RaiseLastOSError;
      TokenInfo := PTokenGroups(AllocMem(Count));
      Win32Check(GetTokenInformation(Token, TokenGroups, TokenInfo, Count, Count));
      for I := 0 to TokenInfo^.GroupCount - 1 do
      begin
        Result := EqualSid(psidAdmin, TokenInfo^.Groups[I].Sid);
        if Result then
          Break;
      end;
    end;
  finally
    if TokenInfo <> nil then
      FreeMem(TokenInfo);
    if HaveToken then
      CloseHandle(Token);
    if psidAdmin <> nil then
      FreeSid(psidAdmin);
  end;
end;

{$R+}

function IsUACEnabled: Boolean;
var
  Reg: TRegistry;
begin
  Result := CheckWin32Version(6, 0);
  if Result then
  begin
    Reg := TRegistry.Create(KEY_READ);
    try
      Reg.RootKey := HKEY_LOCAL_MACHINE;
      if Reg.OpenKey('\Software\Microsoft\Windows\CurrentVersion\Policies\System', False) then
        if Reg.ValueExists('EnableLUA') then
          Result := (Reg.ReadInteger('EnableLUA') <> 0)
        else
          Result := False
      else
        Result := False;
    finally
      FreeAndNil(Reg);
    end;
  end;
end;

function IsElevated: Boolean;
const
  TokenElevation = TTokenInformationClass(20);
type
  TOKEN_ELEVATION = record
    TokenIsElevated: DWORD;
  end;
var
  TokenHandle: THandle;
  ResultLength: Cardinal;
  ATokenElevation: TOKEN_ELEVATION;
  HaveToken: Boolean;
begin
  if CheckWin32Version(6, 0) then
  begin
    TokenHandle := 0;
    HaveToken := OpenThreadToken(GetCurrentThread, TOKEN_QUERY, True, TokenHandle);
    if (not HaveToken) and (GetLastError = ERROR_NO_TOKEN) then
      HaveToken := OpenProcessToken(GetCurrentProcess, TOKEN_QUERY, TokenHandle);
    if HaveToken then
    begin
      try
        ResultLength := 0;
        if GetTokenInformation(TokenHandle, TokenElevation, @ATokenElevation, SizeOf(ATokenElevation), ResultLength) then
          Result := ATokenElevation.TokenIsElevated <> 0
        else
          Result := False;
      finally
        CloseHandle(TokenHandle);
      end;
    end
    else
      Result := False;
  end
  else
    Result := IsAdministrator;
end;

procedure SetButtonElevated(const AButtonHandle: THandle);
const
  BCM_SETSHIELD = $160C;
var
  Required: BOOL;
begin
  if not CheckWin32Version(6, 0) then
    Exit;
  if IsElevated then
    Exit;

  Required := True;
  SendMessage(AButtonHandle, BCM_SETSHIELD, 0, LPARAM(Required));
end;

procedure CheckForElevatedTask;

  function GetArgsForElevatedTask: String;

    function PrepareParam(const ParamNo: Integer): String;
    begin
      Result := ParamStr(ParamNo);
      if Pos(' ', Result) > 0 then
        Result := AnsiQuotedStr(Result, '"');
    end;

  var
    X: Integer;
  begin
    Result := '';
    for X := 1 to ParamCount do
    begin
      if (AnsiUpperCase(ParamStr(X)) = ('/' + RunElevatedTaskSwitch)) or
         (AnsiUpperCase(ParamStr(X)) = ('-' + RunElevatedTaskSwitch)) then
        Continue;

      Result := Result + PrepareParam(X) + ' ';
    end;

    Result := Trim(Result);
  end;

var
  ExitCode: Cardinal;
begin
  if not FindCmdLineSwitch(RunElevatedTaskSwitch) then
    Exit;

  ExitCode := ERROR_GEN_FAILURE;
  try
    if not IsElevated then
      ExitCode := ERROR_ACCESS_DENIED
    else
    if Assigned(OnElevateProc) then
      ExitCode := OnElevateProc(GetArgsForElevatedTask)
    else
      ExitCode := ERROR_PROC_NOT_FOUND;
  except
    on E: Exception do
    begin
      if E is EAbort then
        ExitCode := ERROR_CANCELLED
      else
      if E is EOleSysError then
        ExitCode := Cardinal(EOleSysError(E).ErrorCode)
      else
      if E is EOSError then
      else
        ExitCode := ERROR_GEN_FAILURE;
    end;
  end;

  if ExitCode = STILL_ACTIVE then
    ExitCode := ERROR_GEN_FAILURE;
  TerminateProcess(GetCurrentProcess, ExitCode);
end;

end. 
```

* * *

用法：

```
unit Unit1;

interface

uses
  Windows{....};

type
  TForm1 = class(TForm)
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    Button1: TButton;
    Button2: TButton;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    procedure StartWait;
    procedure EndWait;
  end;

var
  Form1: TForm1;

implementation

uses
  RunElevatedSupport;

{$R *.dfm}

const
  ArgInstallUpdate     = '/install_update';
  ArgRegisterExtension = '/register_global_file_associations';

procedure TForm1.FormCreate(Sender: TObject);
begin
  Label1.Caption := Format('IsAdministrator: %s',        [BoolToStr(IsAdministrator, True)]);
  Label2.Caption := Format('IsAdministratorAccount: %s', [BoolToStr(IsAdministratorAccount, True)]);
  Label3.Caption := Format('IsUACEnabled: %s',           [BoolToStr(IsUACEnabled, True)]);
  Label4.Caption := Format('IsElevated: %s',             [BoolToStr(IsElevated, True)]);

  Button1.Caption := 'Install updates';
  SetButtonElevated(Button1.Handle);
  Button2.Caption := 'Register file associations for all users';
  SetButtonElevated(Button2.Handle);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  StartWait;
  try
    SetLastError(RunElevated(ArgInstallUpdate, Handle, Application.ProcessMessages));
    if GetLastError <> ERROR_SUCCESS then
      RaiseLastOSError;
  finally
    EndWait;
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  StartWait;
  try
    SetLastError(RunElevated(ArgRegisterExtension, Handle, Application.ProcessMessages));
    if GetLastError <> ERROR_SUCCESS then
      RaiseLastOSError;
  finally
    EndWait;
  end;
end;

function DoElevatedTask(const AParameters: String): Cardinal;

  procedure InstallUpdate;
  var
    Msg: String;
  begin
    Msg := 'Hello from InstallUpdate!' + sLineBreak +
           sLineBreak +
           'This function is running elevated under full administrator rights.' + sLineBreak +
           'This means that you have write-access to Program Files folder and you''re able to overwrite files (e.g. install updates).' + sLineBreak +
           'However, note that your executable is still running.' + sLineBreak +
           sLineBreak +
           'IsAdministrator: '        + BoolToStr(IsAdministrator, True) + sLineBreak +
           'IsAdministratorAccount: ' + BoolToStr(IsAdministratorAccount, True) + sLineBreak +
           'IsUACEnabled: '           + BoolToStr(IsUACEnabled, True) + sLineBreak +
           'IsElevated: '             + BoolToStr(IsElevated, True);
    MessageBox(0, PChar(Msg), 'Hello from InstallUpdate!', MB_OK or MB_ICONINFORMATION);
  end;

  procedure RegisterExtension;
  var
    Msg: String;
  begin
    Msg := 'Hello from RegisterExtension!' + sLineBreak +
           sLineBreak +
           'This function is running elevated under full administrator rights.' + sLineBreak +
           'This means that you have write-access to HKEY_LOCAL_MACHINE key and you''re able to write keys and values (e.g. register file extensions globally/for all users).' + sLineBreak +
           'However, note that this is usually not a good idea. It is better to register your file extensions under HKEY_CURRENT_USER\Software\Classes.' + sLineBreak +
           sLineBreak +
           'IsAdministrator: '        + BoolToStr(IsAdministrator, True) + sLineBreak +
           'IsAdministratorAccount: ' + BoolToStr(IsAdministratorAccount, True) + sLineBreak +
           'IsUACEnabled: '           + BoolToStr(IsUACEnabled, True) + sLineBreak +
           'IsElevated: '             + BoolToStr(IsElevated, True);
    MessageBox(0, PChar(Msg), 'Hello from RegisterExtension!', MB_OK or MB_ICONINFORMATION);
  end;

begin
  Result := ERROR_SUCCESS;
  if AParameters = ArgInstallUpdate then
    InstallUpdate
  else
  if AParameters = ArgRegisterExtension then
    RegisterExtension
  else
    Result := ERROR_GEN_FAILURE;
end;

procedure TForm1.StartWait;
begin
  Cursor := crHourglass;
  Screen.Cursor := crHourglass;
  Button1.Enabled := False;
  Button2.Enabled := False;
  Application.ProcessMessages;
end;

procedure TForm1.EndWait;
begin
  Cursor := crDefault;
  Screen.Cursor := crDefault;
  Button1.Enabled := True;
  Button2.Enabled := True;
  Application.ProcessMessages;
end;

initialization
  OnElevateProc := DoElevatedTask;
  CheckForElevatedTask;

end. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T03:17:24.377

```
uses ShellApi, ...;

function RunAsAdmin(const Handle: Hwnd; const Path, Params: string): Boolean;
var
  sei: TShellExecuteInfoA;
begin
  FillChar(sei, SizeOf(sei), 0);
  sei.cbSize := SizeOf(sei);
  sei.Wnd := Handle;
  sei.fMask := SEE_MASK_FLAG_DDEWAIT or SEE_MASK_FLAG_NO_UI;
  sei.lpVerb := 'runas';
  sei.lpFile := PAnsiChar(Path);
  sei.lpParameters := PAnsiChar(Params);
  sei.nShow := SW_SHOWNORMAL;
  Result := ShellExecuteExA(@sei);
end; 
```

// 例子

```
RunAsAdmin(Handle, 'c:\Windows\system32\cmd.exe', ''); 
```

# ios - iOS 6 - 如何验证应用内可更新订阅？

> ID：15319163
> 
> 赞同：2
> 
> 时间：2013-03-10T05:14:59.777
> 
> 标签：ios, in-app-purchase, subscription

我正在构建一个应用程序，它在应用程序中提供 30 天的高级服务订阅。我熟悉应用内购买（消耗品），并为此做好了一切准备。但是，我还没有找到任何好的教程或解释验证自动更新订阅的正确程序。

谁能指出我正确的方向？我想做的是有这样的订阅设置：

*   用户购买应用内订阅并通过验证
*   订阅结束日期（购买后 30 天）与用户的帐户信息一起添加到网络数据库
*   如何检测订阅何时更新，以便我可以更新网络数据库

**更新**

所以我已经弄清楚了原始的购买和收据验证，所以一切都很好。然后通过从收据数据中获取“expires_date”的值来获取过期日期。

我现在需要完成的是在应用加载时检查所有已完成交易的最佳方式（包括任何自动续订的订阅），以便我可以解锁高级服务。使用“restoreCompletedTransactions”可以让我接收旧的收据数据，但它会强制用户输入密码，我想避免这种情况。有哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:25:12.400

a user purchases a product and you save the receipt. keep track of a timestamp so you know how long the subscription is valid for. on each launch you validate the receipt. you will always get the latest receipt so you know whether the product was renewed. using the timestamp you can make sure the user doesnt get access after their subscription has cancelled.

# ios - Facebook IOS SDK：将facebook请求回调数据存储到全局变量中

> ID：15319169
> 
> 赞同：0
> 
> 时间：2013-03-10T05:16:31.647
> 
> 标签：ios, facebook-graph-api, objective-c-blocks, facebook-ios-sdk, facebook-requests

我正在使用新的 facebook ios sdk。我使用如下所示的新功能请求朋友数据。但是，由于它是一个以块为参数的函数，因此我在函数之外丢失了这些数据。如何保存数据（即存储在全局变量中）以便可以在另一个函数中使用它？

提前致谢。

代码：

```
-(void)requestFriends {
  [FBRequestConnection startForMyFriendsWithCompletionHandler:^(FBRequestConnection* connection, id data, NSError *error) {
    if(error) {
    [self printError:@"Error requesting /me/friends" error:error];
    return;
  }
  NSArray* friends = (NSArray*)[data data];
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:43:00.663

只需将其存储在属性上，然后刷新 UI。

```
// in .h or class extension
@property(nonatomic, strong) NSArray *friends;

-(void)requestFriends {
    [FBRequestConnection startForMyFriendsWithCompletionHandler:^(FBRequestConnection* connection, id data, NSError *error) {
      if(error) {
      [self printError:@"Error requesting /me/friends" error:error];
      return;
    }
    self.friends = (NSArray*)[data data];
}]; 
```

# oop - 爪哇。为什么这样做有用： Animal bear = new Bear();

> ID：15319170
> 
> 赞同：0
> 
> 时间：2013-03-10T05:16:35.990
> 
> 标签：oop, polymorphism

我明白为什么这是一个法律声明，但它为什么有用呢？

这与只是去有什么不同：

```
Bear bear = new Bear(); //? 
```

我可以用对象 Animal bear = new Bear(); 做什么 我不能用后者吗？

尝试澄清：

声明这样的东西有什么实际区别：

```
A. SuperClass x = new SubClass(); 
```

相对，

```
B. SubClass x = new SubClass(); 
```

你可以用 A 中的对象做什么而你不能用 B 做？为什么要声明这样的对象？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T05:24:37.470

一般来说，只要有可能，就希望有松散的耦合。在某种程度上，这意味着您的代码应该尽可能少地了解它使用的对象。如果您的代码知道它是 a 就足够了`Animal`，那么为什么要让它知道它是 a`Bear`呢？下周你可能想用`Chicken`.

通过将自己限制在由 公开的界面`Animal`，您现在可以轻松地将任何其他特定的动物放入它的位置，并且您知道您没有使用任何`Bear`特定的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:24:59.053

实现多态性并为所有 Animals 编写通用代码，而不是具体到熊。

因此，Animal animal = new Bear() 我们可以使用相同的引用来指向其他不同的动物。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T05:24:22.493

我想说我看到的主要区别`Bear bear = new Bear();`是定义为对象`Bear`，而定义为`Animal bear = new Bear();`对象`Animal`。此方法将新熊定义为动物，而另一种方法将新熊定义为熊。两者实际上是同一件事，但是如果您需要`new Bear()`在特定对象中使用一种方法可能会更有用。

# java - 查找导入的变量来自何处

> ID：15319171
> 
> 赞同：0
> 
> 时间：2013-03-10T05:16:37.317
> 
> 标签：java, string

我正在学习一个 Java 类，并有以下示例来帮助我使我的代码运行良好，但我无法让我的代码运行。我发现问题出在 strAlt 上，但是我不知道 strAlt 在以下代码中的定义位置。在 Net beans 中使用调试器时，我发现当它第一次在 switch 测试中使用时，strAlt 被定义为字符串“03”，它被转换为整数 3，但我不确定字符串 03 的来源。

```
public class NWSFB
{
   /** A class variable containing the Station Weather */
   private String strWea ;
   /** The Constructor */
   public NWSFB(String strVar)
   {
      // this is the constructor
       strWea = strVar;
   }

public String getWindInfo(String strAlt)
{
   String strRet;
   strRet = "The wind direction for " + strAlt + "000 feet is " + getWindDir(strAlt);
   return strRet;
}
/**
This routine will accept a string containing the altitude
and will return the starting position of the altitude weather
as an integer.
@param strAlt A string containing the altitude
@return An integer showing the position of the altitude weather within the station weather              
*/
private int getPos(String strAlt)
{
   int intAlt;
   int intRet =0;
   intAlt = Integer.parseInt(strAlt);
   switch (intAlt)
   {
     case 3:
      intRet = 4;
      break;
     case 6:
      intRet = 9;
      break;
     case 9:
      intRet = 14;
     // etc .... you can figure out the the other altitudes
   }
   return intRet;
}
 public String getAltitudeWeather(String strAlt)
 {
   // get the position in the station weather string
   int intPos = getPos(strAlt);

   // strAltitudeWeather contains a seven character string 
   String strRet = strWea.substring(intPos,intPos+7);

   // return the result
   return strRet;
 }
public String getWindDir(String strAlt)
 {
   String strRet = getAltitudeWeather(strAlt);
   return strRet.substring(0,2);
 }
} 
```

此类用于按如下方式运行类天气

```
// this code will be saved in a file called Weather.java
public class weather
{
   public static void main(String[] args)
    {
      // the next line is very long and ends with 352853
        //This code doesn't really end in 352853 I think when it did it was getting   diffrent weather data
     final String FAA_FD="SAN 3106 2915+23 2714+16 0710+08 1010-07 1916-17 222331 213141 203753";
     System.out.println("Start of Program Weather") ;
     NWSFB windsAloft = new NWSFB(FAA_FD);
     System.out.println(windsAloft.getWindInfo("03"));
     System.out.println(windsAloft.getWindInfo("06"));
     System.out.println(windsAloft.getWindInfo("09"));
     System.out.println(windsAloft.getWindInfo("12"));
     // etc. for the other altitudes
     System.out.println("End of Program Weather") ;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:35:31.557

这就是字符串的来源。

```
System.out.println(windsAloft.getWindInfo("03"));
System.out.println(windsAloft.getWindInfo("06"));
System.out.println(windsAloft.getWindInfo("09"));
System.out.println(windsAloft.getWindInfo("12")); 
```

字符串`NWSFB`通过`getWindInfo()`. 从那里它被传递到`getWindDir()` To`getAltitudeWeather()` 然后最后到`getPos()`

# javascript - 为什么这段代码在 jsbin 中有效，但在 jsfiddle 中无效？

> ID：15319172
> 
> 赞同：2
> 
> 时间：2013-03-10T05:16:43.473
> 
> 标签：javascript, html, google-maps, jsfiddle, jsbin

我正在重新发布/改写此内容，因为这里的另一个用户建议。下面的代码在**[jsbin](http://jsbin.com/osebov/1/edit)**中有效，但在**[jsfiddle](http://jsfiddle.net/wNaEX/)**中无效。有人知道为什么吗？

问题源于我尝试将此代码包含在博客文章中（[http://tetsingmaps.blogspot.ca/](http://tetsingmaps.blogspot.ca/)）

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
  var overlay;

  TQOverlay.prototype = new google.maps.OverlayView();

  function initialize() {
    var latlng = new google.maps.LatLng(42.345393812066433, -71.079311590576168);
    var myOptions = {
      zoom: 13,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var swBound = new google.maps.LatLng(42.255594, -71.18282318115234);
    var neBound = new google.maps.LatLng(42.43519362413287, -70.9758);
    var bounds = new google.maps.LatLngBounds(swBound, neBound);

    var srcImage = "http://www.jefftk.com/apartment_prices/apts-2011-06.png";
    overlay = new TQOverlay(bounds, srcImage, map);
  }

  function TQOverlay(bounds, image, map) {
    this.bounds_ = bounds;
    this.image_ = image;
    this.map_ = map;
    this.div_ = null;
    this.setMap(map);
  }

  TQOverlay.prototype.onAdd = function() {

    var div = document.createElement('DIV');
    div.style.border = "none";
    div.style.borderWidth = "0px";
    div.style.position = "absolute";

    var img = document.createElement("img");
    img.src = this.image_;
    img.style.width = "100%";
    img.style.height = "100%";

    img.style.opacity = .5;
    img.style.filter = 'alpha(opacity=50)';

    div.appendChild(img);
    this.div_ = div;
    var panes = this.getPanes();
    panes.overlayLayer.appendChild(div);
  }

  TQOverlay.prototype.draw = function() {
    var overlayProjection = this.getProjection();

    var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
    var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());

    var div = this.div_;
    div.style.left = sw.x + 'px';
    div.style.top = ne.y + 'px';
    div.style.width = (ne.x - sw.x) + 'px';
    div.style.height = (sw.y - ne.y) + 'px';
  }

  TQOverlay.prototype.onRemove = function() {
    this.div_.parentNode.removeChild(this.div_);
    this.div_ = null;
  }

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
  <div id="legend">
  <b>$/bedroom</b>
  <br><br>  
  <font color="#FF0000">&#9608;</font> $1800+<br>
  <font color="#FF2B00">&#9608;</font> $1700+<br>
  <font color="#FF5600">&#9608;</font> $1600+<br>
  <font color="#FF7F00">&#9608;</font> $1500+<br>
  <font color="#FFAB00">&#9608;</font> $1400+<br>
  <font color="#FFD500">&#9608;</font> $1300+<br>
  <font color="#FFFF00">&#9608;</font> $1200+<br>
  <font color="#7FFF00">&#9608;</font> $1100+<br>
  <font color="#00FF00">&#9608;</font> $1000+<br>
  <font color="#00FF7F">&#9608;</font> $900+<br>
  <font color="#00FFFF">&#9608;</font> $800+<br>
  <font color="#00D5FF">&#9608;</font> $700+<br>
  <font color="#00ABFF">&#9608;</font> $600+<br>
  <font color="#007FFF">&#9608;</font> $500+<br>
  <font color="#0056FF">&#9608;</font> $400+<br>
  <font color="#002BFF">&#9608;</font> $300+<br>
  <font color="#0000FF">&#9608;</font> $300-<br>
  <br>
  as of 6/2011<br>
  <a href="index.html">current</a><br>
  <a href="rooms-2011-06.html">$/room</a><br>
  (<a href="/news/2011-06-18.html">details</a>)
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:37:11.440

在 Chrome (F12) 中查看控制台时，会引发以下错误：

```
Uncaught ReferenceError: initialize is not defined
    onload 
```

所以当它试图调用时出了点问题`initialize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:34:32.940

您的`<head>`和`<body>`标签未正确关闭。只需查看输出页面的源代码（[http://fiddle.jshell.net/wNaEX/show/](http://fiddle.jshell.net/wNaEX/show/)，[http://jsbin.com/osebov/1](http://jsbin.com/osebov/1)），看看两者是如何无效的。虽然 JsBin 需要整个 HTML 页面（从 doctype 到`</html>`），但 jsfiddle 只会在其输出模板的 body 标记中插入“HTML”。有时浏览器可能会按预期解释，有时则不然。

# google-chrome - Chrome 扩展后台脚本未加载

> ID：15319175
> 
> 赞同：6
> 
> 时间：2013-03-10T05:16:55.100
> 
> 标签：google-chrome, google-chrome-extension

我的 chrome 扩展后台脚本没有被加载。我为他们遵循了谷歌的指南，但仍然没有。我不确定是否有另一种检查方法，但它不在 Inspect Element 中，并且脚本应该执行的操作没有发生。

[http://developer.chrome.com/extensions/background_pages.html](http://developer.chrome.com/extensions/background_pages.html)

manifest.json 文件

```
{
"manifest_version": 2,

"name": "WebDevFriend",
"description": "blah blah blah",
"version": "1.0",

"permissions": [
    "bookmarks",
    "tabs",
    "http://*/*"    ],  

"background": {
    "scripts": ["js/settings.js"],
},

"browser_action": {
    "default_icon": "images/icon.png",
    "default_popup": "html/popup.html"
}
} 
```

settings.js 文件

```
chrome.windows.onCreated.addListener(function(window){
  chrome.windows.getAll(function(windows){
      var length = windows.length;
      if (length == 2) {
          chrome.tabs.executeScript(null, {file: "content_script.js"});
      }
  });
});
document.write('hello'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:18:48.370

首先，您不能像普通的 html 页面那样查看背景页面。唯一的方法是使用 Chrome 开发者工具查看其内容。

![在此处输入图像描述](../Images/bcb2565eb4cb6582f8d6d37e95371a47.png)

只需单击`generated_background_page.html`浏览器的扩展部分。

其次使用`console.log()`语句来记录消息。

# php - 连续显示 PHP 输出？

> ID：15319179
> 
> 赞同：9
> 
> 时间：2013-03-10T05:18:01.243
> 
> 标签：php

我有一个运行大约 1 小时的脚本。我有 2 个虚拟主机，在其中一个中，我可以实时看到输出（它循环了一百万次并回显内容），而在另一个虚拟主机上，我必须等到脚本完成运行才能看到任何输出全部。

如何更改设置以实时显示输出？我想这是一个 php.ini 的东西。

添加代码：此代码将在第一台服务器中执行时输出，但在第二台服务器中不输出。附加信息，如果我将 1015 的值降低，第一台服务器将等待输出。所以似乎我的第一台服务器每 1015 个字符刷新一次，而第二台则没有。

```
while ($a++ < 5) {
  $b = 0;
  while ($b++ < 1015) {
    echo "H";
  }
  echo "<br><br>\n";
  sleep(1);
} 
```

在我的第二台服务器上，输出缓冲关闭，我尝试打开implicit_flush 无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T05:39:40.160

这与输出缓冲有关。如果打开输出缓冲，输出不会立即发送到客户端，而是会等到缓冲一定量的数据。这通常会提高性能，但会导致像您这样的问题。

简单的解决方案不需要更改任何`php.ini`设置，只需将其放在脚本的开头：

```
<?php
  while (@ob_end_flush());
?> 
```

这将立即刷新并禁用所有输出缓冲。

（来源：[http](http://www.php.net/manual/en/function.ob-end-flush.php#example-460) ://www.php.net/manual/en/function.ob-end-flush.php#example-460 ）

您可能还想阅读有关[输出控制](http://php.net/manual/en/book.outcontrol.php)的 PHP 手册。[此处](http://www.php.net/manual/en/outcontrol.configuration.php)`php.ini`列出了相关设置。

如果您想确保事情正在被发送（即在一项耗时的任务之前），请[`flush()`](http://www.php.net/flush)在适当的时间致电。

* * *

**编辑：**

事实上，浏览器可能有自己的缓冲区，尤其是在没有明确设置 Content-Type 的情况下（浏览器需要嗅探文件的 MIME 类型）。如果是这种情况，您将无法控制浏览器的行为。

可能解决它的一种方法是显式设置 Content-Type：

```
header("Content-Type: text/plain"); // if you don't need HTML
// OR
header("Content-Type: text/html"); 
```

但这**不能**保证有效。它适用于我的 Firefox 但不适用于[Chrome](https://code.google.com/p/chromium/issues/detail?id=31410)。

无论如何，您的最终代码应如下所示：

```
header("Content-Type: text/html"); // Set Content-Type
while (@ob_end_flush()); // Flush and disable output buffers
while ($a++ < 5) {
  $b = 0;
  while ($b++ < 1015) {
    echo "H";
    //flush(); // In fact because there is no significant delay, you should not flush here.
  }
  echo "<br><br>\n";
  flush(); // Flush output
  sleep(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T05:39:03.337

尝试[`flush`](http://www.php.net/flush)定期调用。如果您正在使用[output buffering](http://www.php.net/outcontrol)[`ob_end_flush`](http://www.php.net/ob_end_flush) ，您可能希望使用 或 use的序列来关闭它[`ob_flush`](http://www.php.net/ob_flush)。

# php - 没有从我的数据库中获取任何专辑

> ID：15319181
> 
> 赞同：0
> 
> 时间：2013-03-10T05:18:16.943
> 
> 标签：php, mysql

我正在尝试通过遵循有关图像上传网站的某个教程来完成工作任务。我卡住的部分是显示创建的专辑。这是相关代码（如果我遗漏了什么，请询问更多）。

```
function get_albums() {

$albums = array();

$albums_query = mysql_query("
SELECT `albums`.`album_id`, `albums`.`timestamp`, `albums`.`name`,     LEFT(`albums`.`description`, 50) as `description`, COUNT(`images`.`image_id`) as `image_count`
FROM `albums`
LEFT JOIN `images`
ON `albums`.`album_id` = `images`.`album_id`
WHERE `albums`.`user_id` = ".$_SESSION["user_id"]."
GROUP BY `albums`.`album_id`
");

while($albums_row = mysql_fetch_assoc($albums_query))
{
    $albums[] = array(
                      'id' => $albums_row["album_id"],
                      'timestamp' => $albums_row["timestamp"],
                      'name' => $albums_row["name"],
                      'description' => $albums_row["description"],
                      'count' => $albums_row["image_count"]
                      );
}

return $albums;

}
function create_album($album_name, $album_description) {
    $album_name = mysql_real_escape_string(htmlentities($album_name));
    $album_description = mysql_real_escape_string(htmlentities($album_description));

        mysql_query("INSERT INTO `albums` VALUES ('', '".$SESSION["user_id"]."', UNIX_TIMESTAMP(), '$album_name', '$album_description')");
        mkdir('uploads/' .mysql_insert_id(), 0744);
        mkdir('uploads/thumbs/' .mysql_insert_id(), 0744);

} 
```

这就是我认为相关的所有内容以及我认为问题所在的位置。这是专辑应该显示的地方：

```
<?php
$albums = get_albums();

if (empty($albums)) {
 echo '<p> You don\'t have any albums</p>';
} else {

    foreach ($albums as $album) {
        echo '<p>
        <a href="view_album.php?album_id=', $album['id'], '">', $album['name'], '</a> (', $album['count'], ' images)<br />
        ', $album['description'], '...<br />

        <a href="edit_album.php?album_id=', $album['id'], '">Edit</a> / <a href="delete_album.php?album_id=', $album['id'], '">Delete</a>
        </p>';
    }
}

include 'template/footer.php' 
```

?>

但是我总是收到一条消息说我没有专辑，这让我认为他总是认为专辑数组是空的。我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:23:36.650

您正在使用`$_SESSION["user_id"]`，但我没有`session_start()`在您的文件中看到任何地方。可能是您的会话未填充。

另一种可能性是您的用户没有任何相册。

顺便说一句，请将您的脚本迁移到`mysqli`：

> 建议使用 mysqli 或 PDO_MySQL 扩展。不建议在新开发中使用旧的 mysql 扩展，因为它在 PHP 5.5.0 中已被弃用，并且将来会被删除。

来自[http://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

# javascript - 显示表格中下拉菜单的选择

> ID：15319183
> 
> 赞同：0
> 
> 时间：2013-03-10T05:18:34.850
> 
> 标签：javascript, jquery, html, ajax, json

我有一组下拉菜单，下面有一个选择按钮。我想要尝试做的是，一旦用户通过三个下拉菜单并按下选择，选择的选项将显示在其指定类别的相应表中

HTML：

```
<form method="POST">
<select  name='first' id='first'>
    <option selected="selected" value="nothing">choose</option>   
    <option value='opt_a'>opt a</option>
    <option value='opt_b'>opt b</option>
</select>
<select name='sec' id='sec'>
</select>
<select name='third' id='third'>
</select>
<br />
<br />
<button id="select_btn" type="select" name="select">select</button>
<br />
<br />
<div id="result">
<table>
    <tr>
       <th>category</td>
       <th>choice</td>
    </tr>
    <tr>    
       <td>choice 1</td>
       <td></td>
    </tr>
    <tr>
       <td>choice 2</td>
       <td></td>
    </tr>
    <tr>
       <td>choice 3</td>
       <td></td>
    </tr>
    <tr>
       <td>choice 4</td>
       <td></td>
    </tr>
    <tr>    
       <td>choice 5</td>
       <td></td>
    </tr>
    <tr>
       <td>choice 6</td>
       <td></td>
    </tr>
    <tr>
       <td>choice 7</td>
       <td></td>
    </tr>
    <tr>
       <td>choice 8</td>
       <td></td>
    </tr>
</table>
</div>
</form> 
```

JS：

```
data = {
opt_a: ['choose_1','choose_2','choose_3','choose_4'],
opt_b: ['choose_5','choose_6','choose_7','choose_8'],
choose_1: ['yes','no','unsure','still unsure'],
choose_2: ['yes','no','unsure','still unsure'],
choose_3: ['yes','no','unsure','still unsure'],
choose_4: ['yes','no','unsure','still unsure'],
choose_5: ['a','b','avg','unclear'],
choose_6: ['a','b','avg','unclear'],
choose_7: ['a','b','avg','unclear'],
choose_8: ['a','b','avg','unclear']
}

$('#first').change(function(){
var firstopts = ''
$.each(data[$(this).val()],function(i,v){
    firstopts += "<option value='"+v+"'>"+v+"</option>"
}) 
$('#sec').html(firstopts)
})

$('#sec').change(function(){
var secopts = ''
$.each(data[$(this).val()],function(i,v){
    secopts += "<option value='"+v+"'>"+v+"</option>"
}) 
$('#third').html(secopts)
}) 
```

CSS：

```
select{width:150px;}

#result{width:450px; border:2px solid #234323;}

td{width:225px; text-align:center}

th{background:#656454; color:#eee; text-align:center} 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:54:33.787

由于您的`data`键被调用`choose_N`并且您的列具有 text `choice N`，因此您可以通过拆分值并获取最后一部分来匹配它们：

```
var number1 = 'choose_1'.split('_')[1];
var number2 = 'choice 1'.split(' ')[1];
return number1 == number2; // corresponding choice 
```

如果您想要更准确的内容，还可以使用相应的值注释您的 HTML：

```
<tr data-choice="choose_1">
   <td>choice 1</td>
   <td></td>
</tr>

$(myselector).data("choice"); // Will return "choose_1" 
```

现在您所要做的就是选择正确的行（与当前在 中选择的值相对应的行`#sec`）并将第二列设置为当前在 中选择的值`#third`。您可以`click`在选择按钮的回调中执行此操作，但更好的选择是`$('#third').change`直接执行此操作（这样用户就可以免于按下一个额外的按钮）：

```
$('#third').change(function() {
    $('table tr').filter(function() {                                // Filters the rows, by:
        var number1 = $('#sec').val().split('_')[1];                 // comparing the value at #sec
        var number2 = $(this).find('td:eq(0)').text().split(' ')[1]; // with the text of the first column.
        return number1 == number2;
    }).find('td:eq(1)').text($(this).val()); // Updates the second column.
}); 
```

[jsFiddle 的工作示例](http://jsfiddle.net/8HfHm/)。唯一需要注意的是，如果用户想要选择第一个选项（已经选择的那个），他必须更改它并再次更改以触发事件（从这个意义上说，`select`按钮更干净）。

如果您仍想仅在按下按钮时执行此操作，只需替换`$('#third').change(...)`为`$('#select_btn').click(...)`( *Edit:*和`$(this)`to `$('#third')`)。您可能还必须使用`event.preventDefault`，因此不会提交表单。

# sql - 关系模型中OneToMany关系表现的一般设计原则

> ID：15319184
> 
> 赞同：0
> 
> 时间：2013-03-10T05:18:53.957
> 
> 标签：sql, relational, schema-design

我注意到一个现在看起来很明显的模式。需要征求您对此的意见。

假设在关系模型中有从表 1 到表 2 的一对多关系。例如，表 1 可以是用户表，表 2 可以是记录所有用户登录的登录表。一个用户可以多次登录。给定一个用户，我们可以找到该用户的所有登录信息。

想到的第一个想法是将登录名仅存储在登录表中。这是设计一。

但是，如果对于某些用例，我们对用户的特定登录感兴趣（比如最后一次登录），那么在用户表本身中缓存最后一次登录时间“通常是一个好主意”。那正确吗？

设计 2 显然是多余的，因为我们总是可以通过执行连接然后丢弃除先前登录之外的所有内容来找到上次登录时间。

对于一个用户来说，两者都应该没问题。但是，如果您想通过 SQL 查询查找所有用户的上次登录时间，那么设计 1 将涉及连接和子查询以过滤掉不需要的结果。

但是考虑到我们的用例，最好将上次登录时间存储在用户表本身中，这将使我们免于加入。那正确吗？

这是您在设计模式时看到的通用模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:54:49.757

您混淆了 TABLE 和 RELATION 的概念，这是一个常见的错误。您的概念模型（用户和登录）中有两个关系，但实际上这将涉及物理模型中的两个以上的表，因为非聚集索引只不过是加速多个关系连接的附加表。

一旦 INDEX (UserID, LoginTime) 存在于 Logins 上以支持与用户的 FK 关系，则用于查找用户最近登录的查询将被非聚集索引覆盖。只有当使用此默认模型识别出已知的、可测量的、严重的性能问题时，才会考虑进行非规范化，因为这（与所有非规范化一样）会对非规范化表上的所有其他读取和写入操作造成性能损失。

# c# - 是否可以在不知道静态类名称的情况下访问静态类的静态方法

> ID：15319190
> 
> 赞同：1
> 
> 时间：2013-03-10T05:19:51.897
> 
> 标签：c#

我只是对此感到好奇.. 假设我有 N 个静态类，除了类名外，它们看起来与以下内容完全相同（假设我们有 Bank1、Bank2、...、BankN 作为类名）

```
static class Bank1{
   private static List<string> customers = new List<string>();

   static List<string> getCustomers(){
      return customers;
   } 
```

那么是否有可能有一个方法可以在不知道类名的情况下访问每个 Bank 类的 getCustomers() 方法？所以例如

```
void printCustomers(string s)
{ 
  *.getCustomers();
  //for-loop to print contents of customers List
} 
```

其中 * 代表在字符串参数中传递的类名（不必是字符串）。有没有办法在不使用类似的东西的情况下做到这一点

```
if(s.equals("Bank1")) {Bank1.getCustomers();}
else if (s.equals("Bank2")) {Bank2.getCustomers();} 
```

ETC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:33:51.133

您可能想为此使用反射：

```
// s is a qualified type name, like "BankNamespace.Bank1"
var customers = (List<string>)
        Type.GetType(s).InvokeMember("getCustomers",
             System.Reflection.BindingFlags.Static |
             System.Reflection.BindingFlags.InvokeMethod |
             System.Reflection.BindingFlags.Public, // assume method is public
             null, null, null); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-10T05:26:15.670

如果类是静态已知的，则可以使用泛型：

```
void printCustomers<T>()
{
    T.getCustomers();
    ...
} 
```

如果类不是静态已知的，那么自然的解决方案是使用虚拟方法（多态），因为这是在运行时解析方法的方式。

# java - 为什么某些 java 代码/石英代码需要 .class 文件？

> ID：15319191
> 
> 赞同：0
> 
> 时间：2013-03-10T05:20:01.587
> 
> 标签：java, quartz-scheduler, .class-file

为什么石英或任何 java 代码需要 .class 文件？常规 api 无法提供的 .class 文件有什么特别之处？

代码 -

```
 JobDetail job = JobBuilder.newJob(HelloJob.class)
        .withIdentity("dummyJobName", "group1").build(); 
```

来源 - [http://www.mkyong.com/java/quartz-2-scheduler-tutorial/](http://www.mkyong.com/java/quartz-2-scheduler-tutorial/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:25:08.553

所有 Java 代码都被编译成`.class`文件，所以这不足为奇。

但我认为您指的是与文件无关的`Foo.class` *语法。*`.class`这只是一种定义 type 的文字值的方法`Class<T>`，就像您可以使用双引号来定义 type 的文字值一样`String`。

# html - 导航栏的 CSS 样式

> ID：15319193
> 
> 赞同：0
> 
> 时间：2013-03-10T05:20:30.337
> 
> 标签：html, css

我有这个导航栏，我希望当点击一个锚点时，它会使用 CSS 加下划线：

```
<div id="nav"> 
            <a data-field="home" class="nav-menu">Homepage</a> <span>|</span>
            <a data-field="about" class="nav-menu">About us</a> <span>|</span>
            <a data-field="support" class="nav-menu">Support</a> <span>|</span>
            <a data-field="contact" class="nav-menu">Contact</a>        
</div> 
```

另外我怎样才能用列表做同样的事情：

```
<ul>
    <li><a data-field="home" id="homelink" class="tray-menu" id="tray-active" >Homepage</a></li>
    <li><a data-field="news" id="newslink" class="tray-menu">News</a></li> 
    <li><a data-field="products" id="productslink" class="tray-menu">Products</a></li>
    <li><a data-field="sales" id="saleslink" class="tray-menu">General Sales T&C</a></li>
    <li><a data-field="job" id="jobslink" class="tray-menu">Job Opportunities</a></li>
</ul> 
```

在这种情况下，这种情况下如何使一个`<li>`元素获得特定的“选定”css样式，而另一个元素`<li>`变灰或其他什么？

在 Javascript 中很简单，只需操作 DOM 并设置 id 或 class 标签。

**更新：**

基本上，我有这个工作，但使用 Java (GWT)；但是我想知道这是否可以只使用纯 CSS 和 HTML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:43:43.557

如果您希望在整个页面上使用此效果：

```
a:link 
{
text-decoration:none;
color:#000;
}
a:visited 
{
text-decoration:none;
color:#000;
}
a:hover 
{
text-decoration:none;
color:#008F68;
}
a:active 
{
text-decoration:underline;
color:#000;
} 
```

或者只是导航使用相同的但将“li”放在所有内容的前面。

CSS 的“活动”属性是单击时调用的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:19:33.337

听起来 :target 伪选择器可能会奏效。（*请参阅[http://css-tricks.com/on-target/](http://css-tricks.com/on-target/)）（不适用于旧版本的 IE）

**HTML**

```
<ul>
  <li id="homelink"><a href="#homelink" data-field="home" class="tray-menu" id="tray-active">Homepage</a>  </li>
  <li id="newslink"><a href="#newslink" data-field="news" class="tray-menu">News</a></li> 
  <li id="productslink"><a href="#productslink" data-field="products" class="tray-menu">Products</a></li>
  <li id="saleslink"><a href="#saleslink" data-field="sales" class="tray-menu" href="#saleslink">General Sales T&C</a></li>
  <li id="jobslink"><a href="#jobslink" data-field="job" class="tray-menu">Job Opportunities</a></li>
</ul> 
```

**CSS**

```
:target {
text-decoration: underline;
color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:49:43.483

对于“a”链接（以下行适用于页面中的所有链接）

```
a:active 
{
text-decoration:underline;
color:red;
} 
```

对于第二个问题，给`classname`ul like`myul`

```
<ul class="myul">

.myul li {
 background-color:red;
}
.myul li.selected {
 background-color:blue;
} 
```

# php - 为什么 PHP mysql_insert_id() 返回零？

> ID：15319195
> 
> 赞同：-1
> 
> 时间：2013-03-10T05:20:46.483
> 
> 标签：php, javascript, mysql

我有以下代码。$last_id 始终显示为零。我在“源”表中有一个具有自动增量 ID 的列。这段代码有什么问题？

索引.php：

```
<?php
// connect to the database
include('connect-db.php');
$last_id = mysql_insert_id($connection);
$content = "Please type your content here!";
?>

<!DOCTYPE html>
<html>
  <head>
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 

 <script type="text/javascript"> 

         $(document).ready(function(){
            $("#myform").submit( function () {    
              $.post(
               'submit.php',
                $(this).serialize(),
                    function(data){
                        alert("Your ID: <?php echo $last_id;?>");

                    }
              );
              return false;   
            });   
        });
</script> 

  </head>
  <body>

<div id="header" >

<form action="submit.php" method="post" id="myform">
<textarea id="editor" name="editor" id="editor"><?php echo $content; ?></textarea>
<br/>
<input type="submit" name="submit" value="Submit" id="submit"/>

</form>

</div>

  </body>
</html> 
```

连接数据库：

```
<?php
 $server = 'localhost';
 $user = 'mumbo';
 $pass = 'mumbo123';
 $db = 'jumbo';

 $connection = mysql_connect($server, $user, $pass) 
 or die ("Could not connect to server ... \n" . mysql_error ());
 mysql_select_db($db) 
 or die ("Could not connect to database ... \n" . mysql_error ());
?> 
```

提交.php：

```
<?php
include('connect-db.php');
$submit_date = date("Ymd");
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));
$ip_address = $_SERVER['REMOTE_ADDR'];

if ($content != '') {
mysql_query("INSERT INTO source (submit_date, ip, content) values('$submit_date','$ip_address','$content')") or die(mysql_error());    
mysql_close($connection);
} 
```

?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:29:28.680

试试这个作为 submit.php：

```
<?php
include('connect-db.php');
$submit_date = date("Ymd");
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));
$ip_address = $_SERVER['REMOTE_ADDR'];

if ($content != '') {
mysql_query("INSERT INTO source (submit_date, ip, content) values('$submit_date','$ip_address','$content')") or die(mysql_error());    
echo mysql_insert_id();
}
?> 
```

在javascript中：

```
<script type="text/javascript"> 

         $(document).ready(function(){
            $("#myform").submit( function () {    
              $.post(
               'submit.php',
                $(this).serialize(),
                    function(data){
                        alert("Your ID: " + data);

                    }
              );
              return false;   
            });   
        });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T05:25:17.260

此行是在原始页面加载时计算的：

```
 alert("Your ID: <?php echo $last_id;?>"); 
```

所以它是有效的：

```
 alert("Your ID: 0"); 
```

由于此时您所做的只是连接，因此没有插入 ID。我不熟悉 jquery，但大概回调的数据参数应该包含有关来自 submit.php 的响应的数据。您需要让 submit.php 返回 ID，然后通过 jquery 中的任何方式获取该数据，并显示它。

编辑：实际上，无论如何，看起来你正在做的事情并不能真正做到我所说的。

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

您正在设置一个处理程序，该处理程序在提交表单时运行 - 但是，这是在提交实际发生之前，因此您实际上无法在那里获得 ID。您的选择是使用 XmlHttpRequest 之类的东西来进行异步调用，或者在 submit.php 页面上显示此弹出窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T05:29:33.777

首先不要使用mysql，使用mysqli或者pdo，mysql是一个弃用的系统，不应该使用。它不安全，很容易被黑客入侵。

其次，mysql_insert_id 只有在插入之后直接调用它才有效...

又名

```
if ($content != '') {
mysql_query("INSERT INTO source (submit_date, ip, content) values('$submit_date','$ip_address','$content')") or die(mysql_error());    
  $last_id = mysql_insert_id();
  echo $last_id
mysql_close($connection); 
```

那么你的jQuery必须说

```
 alert("Your ID: "+data); 
```

返回的函数数据是您从脚本中回显的任何内容。Jquery 在您设置的任何回调变量（数据）中检索它，然后您可以使用它。

# dreamweaver - 如何在 Dreamweaver for spry 中创建上一个/下一个链接

> ID：15319196
> 
> 赞同：0
> 
> 时间：2013-03-10T05:20:53.377
> 
> 标签：dreamweaver, spry

有人知道在 Dreamweaver 中为 spry 数据集创建上一个/下一个链接的好方法吗？我可以用普通的数据集来做，但不是 spry。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T20:47:58.130

虽然问题很旧并且 Adob​​e 不再支持 SPRY（我无法准确理解短语 normal datasets 但不是 spry 的含义）我认为您可以使用[http://adobe.github.io/Spry/samples/ data_region/PagingSample.html](http://adobe.github.io/Spry/samples/data_region/PagingSample.html) 作为创建下一个 prev 链接的参考。

# charts - 如何从道场图表中删除系列的图例

> ID：15319197
> 
> 赞同：0
> 
> 时间：2013-03-10T05:21:14.050
> 
> 标签：charts, dojo

我有一个带有垂直线系列的道场图表，[请参阅](https://stackoverflow.com/questions/7450690/add-a-line-not-a-series-to-a-dojo-chart)。如何从图例中删除该系列，以便图例中仅显示我的“真实”系列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:53:44.753

尝试以下操作：

```
chart1.removeSeries("vertical line");  //Removes the series from the chart by series name
chart1.render();   //Refresh the chart
legend.refresh();  //Refresh the dojo legend object to update it 
```

# java - 如何在不使用 private 的情况下强制使用 setter 方法？（公共读取，私有写入）

> ID：15319199
> 
> 赞同：0
> 
> 时间：2013-03-10T05:21:18.293
> 
> 标签：java, private, public, getter-setter

我有一个 Circle 类类型的对象，我有一个成员 'r' 来存储它的半径。现在因为我经常使用这些对象，我不想将半径设为私有，因为其他类必须使用 getR() 方法，这会使代码难以阅读。例如，阅读这样的代码要容易得多： double alpha = b1.r + b2.r -2*b1.r*b2.r; 比读这个：double alpha = b1.getR() + b2.getR() - 2*b1.getR()*b2.getR();

然而，因为这是一个半径，它的平方也被大量使用，我想计算一次，我希望有一个半径的设置器，所以我可以同时更新 r 和它的平方。所以我希望 r 是私有的以强制使用 setR() 但我希望它是 publc 以便它可以被引用以供阅读。有谁知道在 Java 中执行此操作的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T05:33:27.313

Java 没有只读属性的概念。

如果您允许 r 可读，则有人可以并且会随机更改它。此外，养成这样的坏习惯。只是不要。长镜头的例子是：如果你需要它在一些奇怪的非欧几里得空间中运行怎么办？现在你必须去解决这个烂摊子。

现实的选择：

您可以偏离规范并将您的 getter 命名为 r()。几乎一样短。

或者，您可以将此类数学推入 circle 类，它可以直接引用其成员。您可以使用较短的名称获得更好的封装部分。

```
class Circle() {
   static double alpha(Circle c1, Circle c2) {
      return c1.r + c2.r -2*c1.r*c2.r
   }
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:35:41.820

一个）。不要跳过使用 getter 和 setter 来封装你的代码。

乙）。如果可读性是您的问题，那么我建议使用 getR() 方法获取半径并存储在局部变量中。例如 - int firstCircleRadius = first.getR() 和其他圆圈类似，并使用您的局部变量使公式易于阅读。

C）。不要使用 r 作为属性名称。改用半径，它本身会增加可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:30:46.847

我个人会使用 getter 和 setter。但是，您可以将真实半径存储在私有成员中，然后使用您`setR()`的方法更新虚拟半径`r`。这并不能解决能够`r`手动更改的问题。

```
private int radius;
public int r;
public void setR(int r) {
    radius = r;
    square(); //do you squaring and other math
    this.r = r;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T06:09:24.200

我最近一直被这个问题所困扰，并且冒着获得一堆反对票和 Java 社区愤怒的风险，我建议不要依赖 Java 访问 - 类变量或方法（或我曾经认为“私有”是为了封装在面向对象的编程语言中。只需将 public 用于所有内容并在晚上睡个好觉。这是一个解释，请考虑以下课程：

```
package hiddenscope;

public class Privacy {
    private int privateInt = 12;
    private double oneBy2pi = 0.5 / Math.PI;
    private String myClassName;

    public Privacy () { 
        privateInt = 12;
        myClassName = this.getClass().getName();
        print ("Constructor");
    }

    // Given the circumference of a circle, get its radius
    public double c2r (double c) {
        return c * oneBy2pi;
    }

    // Do not let any other class call this method
    private void print (String caller) {
        System.out.println ("["+caller+"] Current value of privateInt in class " + 
                                                myClassName + " is " + privateInt);
    }
} 
```

这是一个更改上述类的私有变量 privateInt 并将其称为私有“打印”方法的类，甚至从包外部（受保护，有人吗？）：

```
package userpackage;
import hiddenscope.Privacy;

import java.lang.reflect.*;

public class EditPrivate {

    private int i2set;
    private String fieldNameToModify, myClassName;
    private Object p;
    private Method printer;

    public EditPrivate (Object object, String fName, int value) {
        fieldNameToModify = fName;
        i2set = value;
        p = object;
        myClassName = this.getClass().getName();
        Method[] methods = p.getClass().getDeclaredMethods();
        for (Method m : methods) {
            if (m.getName().equals("print")) {
                printer = m;
                printer.setAccessible(true);
                break;
        }}

        if (printer == null)
            return;

        try {
            printer.invoke (p, myClassName);
        } catch (IllegalAccessException ex1)        {   ex1.printStackTrace();
        } catch (InvocationTargetException ex2)     {   ex2.printStackTrace();
    }}

    public void invadePrivacy () throws Exception {
        Field[] fields = p.getClass().getDeclaredFields();
        for (Field field : fields) {
            String fieldName = field.getName();
            if (fieldName.equals(fieldNameToModify)) {
                field.setAccessible(true);
                if ("int".equals(field.getType().toString())) {
                    try {
                        field.setInt(p, i2set);
                        if (printer != null)
                            printer.invoke (p, myClassName);
                        return;
                    } catch (IllegalAccessException ex) {
                        ex.printStackTrace();
        }}}}
        throw new Exception ("No such int field: " + fieldNameToModify);
    }

    public static void main(String[] args) {
        try {
            Privacy p = new Privacy();
            new EditPrivate(p, "privateInt", 15).invadePrivacy();
        } catch (Exception ex) {
            ex.printStackTrace();
}}} 
```

为了增加对这种伤害的侮辱，这就是多个线程将类的内部变量和私有变量弄乱时发生的情况（oneBy2pi 应该是私有的！）

```
package userpackage;
import java.lang.reflect.Field;
import java.util.concurrent.*;
import java.util.*;

import hiddenscope.*;

public class ThreadedPi implements Runnable {

    Privacy p = new Privacy();
    private int nSample = 2000, bins[] = new int[4]; // 94814117 999065 0003379, 2028859
    private Field c2dField;
    private boolean mutate;

    public ThreadedPi () {
        Field[] fields = p.getClass().getDeclaredFields();
        for (Field field : fields) {
            String fieldName = field.getName();
            if (fieldName.equals("oneBy2pi")) {
                field.setAccessible(true);
                c2dField = field;
    }}}

    synchronized private boolean setMutationOfField (boolean master, boolean value) {
        if (master)
            mutate = value;
        return mutate;
    }

    public void run () {
        Random rng = new Random();
        for ( ; ; ) {
            if (setMutationOfField (false, true)) {
                int nDigit = 2 + rng.nextInt(4);
                double doublePi = 4.0 * Math.atan(1.0),
                        decimal = Math.pow(10, nDigit),
                        apprxPi = Math.round(decimal * doublePi) / decimal;
                try {
                    c2dField.setDouble (p, 0.5/apprxPi);
                } catch (IllegalAccessException ex) {
                    ex.printStackTrace();
            }} else {
                return;
    }}}

    public void execute () {
        setMutationOfField (true, true);
        new Thread (this).start();
        Executed[] class2x = new Executed[nSample];
        ExecutorService executor = Executors.newCachedThreadPool();
        for (int i = 0 ; i < 4 ; i++)
            bins[i] = 0;
        for (int i = 0 ; i < nSample ; i++) {
            class2x[i] = new Executed();
            executor.execute(class2x[i]);
            double d = class2x[i].getDiameter(-1);
            if (d < 399.99)         bins[0]++;
            else if (d < 400)       bins[1]++;
            else if (d < 400.01)    bins[2]++;
            else                    bins[3]++;
            //System.out.println ("d: " + d);
        }
        setMutationOfField (true, false);
        for (int i = 0 ; i < 4 ; i++)
            System.out.print("\t\t[" + (i+1) + "] " + bins[i]);
        System.out.println ();
    }

    public static void main(String[] args) {
        ThreadedPi tp = new ThreadedPi();
        for (int k = 0 ; k < 5 ; k++)
            tp.execute();
    }

    private class Executed implements Runnable {
        private double d=-1, c = 2513.274123;

        synchronized double getDiameter (double setter) {
            if (setter < 0) {
                while (d < 0) {
                    try {
                        wait();
                    } catch (InterruptedException ex) {
            }}} else {
                d = setter;
                notify();
            }
            return d;
        }

        public void run () {
            getDiameter (p.c2d(c));
}}} 
```

上面所有的类都能完美地编译和运行，这就解释了为什么“private”在java中可能没有任何意义。盾牌起来，斯科蒂！

# javascript - 使用 javascript 在 iframe 上设置图像对象

> ID：15319202
> 
> 赞同：0
> 
> 时间：2013-03-10T05:21:53.710
> 
> 标签：javascript, html, iframe

当我单击该表内的图像时，我想在 iframe 中显示图像。问题是，在 iframe 中显示的图像太小（太大的图像现在不是问题）。因此，我尝试在单击图像时将图像传递给 javascript 函数并执行必要的调整大小，但是在这里我将图像对象设置为 iFrame 的 src 时遇到了另一个问题。有什么建议么？请指导我，如果您能提供帮助，我会节省很多时间。

这是我遇到问题的javascript代码。

```
function resize(e){
    var newImg = document.createElement('img');
    newImg.src = document.getElementById(e).src; 
    newImg.width = '448'; 
    newImg.height = '336';
    document.getElementById('passTo').src = newImg.src; /*newImg doesn't work aswell*/
} 
```

这是我的HTML代码...

```
<tr>
  <td colspan="2" height="336">
    <iframe id = "passTo" name="A" src="Activity 6.html"  style="width:100%; height:100%;" scrolling="no" marginheight="0" marginwidth="0">
      <p>iframes are not supported by your browser.</p>
    </iframe>
  </td>
</tr>
<tr>
  <td><img src = "index.jpg" id = "myimg" border="3" height="48" width="64" onclick="resize(myimg)"></img></td>
  <td><img src = "index.jpg" id = "myimg2" border="3" height="48" width="64" onclick="resize(myimg2)"></img></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:53:16.447

我建议只设置 iframe 主体的 innerHTML：

```
function resize(e){
    var imgURL = document.getElementById(e).src;
    var iframe = document.getElementById('passTo');
    var html = "<img width='448' height='336' src=" + imgURL + ">";
    var doc = iframe.contentDocument || iframe.contentWindow.document;
    doc.body.innerHTML = html;
} 
```

或者，如果您想自己创建 img 对象并插入它，您可以这样做：

```
function resize(e){
    var imgURL = document.getElementById(e).src;
    var iframe = document.getElementById('passTo');
    // get iframe document in cross browser way
    var doc = iframe.contentDocument || iframe.contentWindow.document;
    // create img object in the iframe's document.
    var img = doc.createElement("img");
    img.height = 336;
    img.width = 448;
    img.src = imgURL;
    doc.body.appendChild(img);
} 
```

您之前尝试的方法有几个问题：

1.  您正在将其设置`iframe.src`为图像 URL。这样做时，您无法控制创建的对象的`height`和，并且它与您创建的其他对象无关。`width``img``iframe``img`
2.  您不能在一个文档中创建一个`img`对象，然后在另一个文档中使用它。

将一些 HTML 放入另一个文档中的最简单方法是在其上设置 HTML 并让浏览器在正确的文档中创建对象。

另外，请记住，如果 iframe 与运行代码的窗口/框架位于同一域中，则只能修改或读取 iframe 的 DOM 内容（在您的示例中是可以的）。

# javascript - 在 Windows 上使用 shelljs 并存储进程的输出

> ID：15319209
> 
> 赞同：0
> 
> 时间：2013-03-10T05:23:37.123
> 
> 标签：javascript, node.js

我正在尝试将 shelljs ( [https://github.com/arturadib/shelljs](https://github.com/arturadib/shelljs) ) 用于我正在从事的项目，它在基于 Unix 的系统上就像一个魅力但是一旦我尝试在 Windows 上使用它，我就能够启动一个进程，但我完全无法获得该进程的输出。该文档提到，以下任何一种获取输出的方法都应该有效，但它们都不能在 Windows 上使用，有什么建议吗？

```
var version = exec('node --version', {silent:true}).output;

var child = exec('some_long_running_process', {async:true});
child.stdout.on('data', function(data) {
  /* ... do something with data ... */
});

exec('some_long_running_process', function(code, output) {
  console.log('Exit code:', code);
  console.log('Program output:', output);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-15T11:10:34.267

尝试这样做：

```
child.on("data",function(data){...} 
```

# c# - 从 App.config 文件中定义的连接字符串获取服务器名称？

> ID：15319213
> 
> 赞同：21
> 
> 时间：2013-03-10T05:24:13.657
> 
> 标签：c#, connection-string

我想从我的 app.config 文件中获取 ConnectionString 的 serverName 的 IP 地址，然后 ping 它。实际上我想在运行我的应用程序之前 ping 我的服务器。我该怎么做呢？我的连接字符串

```
<"name="ConnectionString"
 connectionString="Data Source=192.168.1.5;
                   Initial Catalog=CheckPass2;
                   User ID=User;
                   Password=myPassword" /> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-10T05:50:26.113

> 我该怎么做呢？

[您可以使用SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.datasource.aspx)获取服务器地址。`DataSource`此类的属性可用于此目的，如下所示：

```
// Retrieve the ConnectionString from App.config 
string connectString = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connectString);
// Retrieve the DataSource property.    
string IPAddress = builder.DataSource; 
```

此`DataSource`属性对应于连接字符串中的以下键。

*   数据源
*   服务器
*   地址
*   地址和
*   网络地址

无论在提供的连接字符串中提供了这些值中的哪一个，由创建的连接字符串`SqlConnectionStringBuilder`都将使用众所周知的`"Data Source"`键。

# r - 在 R 中使用函数和嵌套函数的值

> ID：15319215
> 
> 赞同：0
> 
> 时间：2013-03-10T05:24:31.503
> 
> 标签：r, function

我在 R 中编写了一个函数 - 称为“过滤器”：它需要一个数据帧，并且对于每一行它都说明它是否应该进入 bin 1 或 2。最后，我们有两个数据帧总结为原始输入, 并分别对应于 bin 1 或 bin 2 中抛出的所有行。这两组 bin 1 和 2 称为 filtre1 和 filtre2。为方便起见，计算了 filtre1 和 filtre2 的值但不返回，因为它是更大过程中的中间事物（而且它们是相当大的数据框）。我有以下问题：

(i) 当我后来想要使用 filtre1（或 filtre2）时，它们根本不会出现......就像它们的值被卡在函数中，并且不会在其他地方被识别 - 这将迫使我复制每次我想使用它时都会使用整个功能 - 非常痛苦和沉重。

我怀疑这是一件相当简单的事情，但我确实在网上搜索并没有真正找到答案（我不确定最佳关键词）。任何不便敬请谅解。谢谢/克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:47:18.227

由于您没有提供适当的示例，因此很难知道实现您想要的最佳方式，但我会尝试一下。如果您的变量 filtre1 和 filtre2 在您的函数内部定义并且您不返回它们，那么它们当然不会出现在您的环境中。但是您可以只返回分类并在之后制作 filtre1 和 filtre2 ：

```
#example data
df<-data.frame(id=1:20,x=sample(1:20,20,replace=TRUE))

filtre<-function(df){
   #example function, this could of course be done by bins<-df$x<10
  bins<-numeric(nrow(df))
  for(i in 1:nrow(df))
    if(df$x<10) 
      bins[i]<-1
  return(bins)
}

bins<-filtre(df)

filtre1<-df[bins==1,]
filtre2<-df[bins==0,] 
```

# ios - 如果 iCloud 开启，应用程序崩溃（链接到与 coreData 同步）

> ID：15319221
> 
> 赞同：1
> 
> 时间：2013-03-10T05:25:24.073
> 
> 标签：ios, core-data, icloud

这是我在 init 中用于存储类的代码，直到最近它都运行良好。当我尝试测试它时，它在 addPersistentStoreWithType 处崩溃（标记如下）......我在切换到 iPhone 5 后注意到了这一点并试图运行应用程序...但是如果我在手机上关闭 icloud 或在模拟器上对其进行测试，则没有问题...

```
-(id)init
{
    self = [super init];
    if(self)
    {
        NSLog(@"%s", __FUNCTION__);
        favColors = [[NSMutableArray alloc] init];
        model = [NSManagedObjectModel mergedModelFromBundles:nil];
        NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];
        NSString *path = [self itemArchivePath];
        NSURL *storeURL = [NSURL fileURLWithPath:path];
        NSError *error = nil;
        NSMutableDictionary *options = [NSMutableDictionary dictionary];

        NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
        if (ubiq) {
            NSLog(@"iCloud access at %@", ubiq);
            [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(contentChange:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:nil];
            NSFileManager *fm = [NSFileManager defaultManager];
            NSURL *ubcontainer = [fm URLForUbiquityContainerIdentifier:nil];
            [options setObject:@"color" forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:ubcontainer forKey:NSPersistentStoreUbiquitousContentURLKey];

        } else {
            NSLog(@"No iCloud access");
        }
   // ************ Crash here **************
        if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:(ubiq?options:nil) error:&error]) {
            [NSException raise:@"Open failed" format:@"Reason: %@", [error localizedDescription]];
        }
        context = [[NSManagedObjectContext alloc] init];
        [context setPersistentStoreCoordinator:psc];
        [context setUndoManager:nil];

        [self loadAllItems];
    }
    return self;
}

- (NSString *)itemArchivePath
{
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [documentDirectories objectAtIndex:0];
    return [documentDirectory stringByAppendingPathComponent:@"store.data"];
} 
```

此外，如果我运行该应用程序一次并在崩溃后关闭 icloud 并再次运行该应用程序.. 数据将从 icloud 中检索...并显示在应用程序上。

输出日志显示了这一点。

> iCloud 访问文件：//localhost/private/var/mobile/Library/Mobile%20Documents/xxx -PFUbiquitySetupAssistant performPreStoreSetupWithError:: CoreData: Ubiquity: 基线文件存在，但无法读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:39:55.093

这是一个内部 iCloud 错误。这不是你的错，你无法在代码中做任何事情来修复或阻止它。它会随机发生，没有可预测的模式何时或为什么。不幸的是，删除应用程序的数据是唯一真正的解决方案。这样做只会删除 iCloud 的数据副本，而不是存储在应用程序的 Documents 目录或其他非 iCloud 位置中的数据，因此旧数据仍然存在也就不足为奇了。

# git - 在没有 git bash 或命令提示符的情况下压缩 github 中的提交

> ID：15319225
> 
> 赞同：0
> 
> 时间：2013-03-10T05:26:02.643
> 
> 标签：git, github

是否可以将所有提交压缩到 github 项目而无需使用 Git Bash 或命令提示符？

例如，如果我将存储库 ProjectA/ProjectA 分叉到 ProjectA/fishbeinb。我开始一个拉取请求，我提交代码并更改 3-4 次到 ProjectA/fishbeinb。我在不使用 Git Bash 或命令提示符的情况下完成这一切。在拉/推我的代码之前，有什么办法可以压缩这些提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:18:13.790

目前无法通过 GitHub 的 webapp 压缩提交。在将提交推送到 GitHub 之前，您需要在本地计算机上为此使用 git。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T07:41:00.973

如果您使用的是 Chrome，一个选项是我编写的[这个 Chrome 扩展程序。](https://chrome.google.com/webstore/detail/whaler/kjfaikbmbbkbnjjeiambmjchclpfkedf?hl=en)它将 GitHub 合并按钮替换为 squash 合并。希望能帮助到你！

# python - 我的 python 树有什么问题

> ID：15319229
> 
> 赞同：0
> 
> 时间：2013-03-10T05:26:36.387
> 
> 标签：python, tree

我正在尝试实现树结构，但是当我尝试在树中打印数据时，会显示意外结果。

正确的结果将是：

```
root
 - A1
-- A2
--- A3
---- A4
----- A5 
```

但我得到了：

```
root
 - A1
-- A1
--- A2
~ infinite loop 
```

我的代码有什么问题？你可以回答我吗？

```
#!/usr/bin/python
class TreeNode :
    def __init__(self,key,obj=dict()) :
        print 'Node with '+key+' is created'
        self.key=key
        self.child=obj
    def add_child(self, key, obj) :
        self.child[key]=obj
        print 'child len ',
        print len(self.child)
    def get_child(self) :
        for key in self.child.keys() : 
            print key,
            pass
        print ''
        return self.child
    def find_child(self,key) :
        return self.child[key]
    def is_leap(self) : 
        print 'is_leap ',
        print len(self.child)
        if len(self.child)==0 :
            return 1
        else : return 0
    def append_rec(self,hier,data,depth) :
        # hier & data are lists
        if len(hier)== 1 : 
            print 'end of hierachy. append complete @ depth ',
            print depth
            return

        tmp = hier[0]
        tmp_child = hier[1:]
        name = str(hier[0])
        print 'self ',
        print tmp,
        print 'childs ',
        print tmp_child
        child_list = self.get_child()
        if child_list != None :
            if not name in child_list.keys() :  
                lc = TreeNode(name)
                self.add_child(name,lc)
                return lc.append_rec(hier[1:],data,depth+1)
            else :
                lc =child_list[name]
                return lc.append_rec(hier[1:],data,depth+1)
    def print_all(self,depth) :
        for i in range(depth) : print '-', 
        print self.key
        if len(self.child) == 0 : return
        if depth > 10 : 
            print 'depth limit over'
            return
        else :
            for k in self.child.keys() : 
                print 'Looking child having key = '+k
                return (self.child[k]).print_all(depth+1)

    # recursive method
class Tree :
    index = 0
    # root node of tree
    def __init__(self) :
        self.root=TreeNode('root')
        self.index=0
    def get_child(self) :
        return self.root.get_child()  
    def print_all(self) :
        self.root.print_all(0)
    def traverse(self) :
        node=self.root
        depth=0

        childs = node.get_child()
        if node.is_leap() : return
        else :
            for c in childs.keys() :
                print c,
                return self.traverse_rec(childs[c],depth+1)
        print ' end'

    def traverse_rec(self,node,depth) :
        i=0
        print 'depth ',
        print i,
        childs = node.get_child()
        if node.is_leap() : return
        else :
            for c in childs.keys() :
                print c,
                return self.traverse_rec(childs[c],depth+1)
        print ' end'

    def append(self,tup) :
        # root
        tmp = tup[0].split('/')
        data = tup[1]
        print 'root ['+data+']',
        tmp_child = tmp[1:]
        name = str(tmp[0])
        # if treenode with name tmp[0]
        child_list = self.root.get_child()
        if child_list != None :
            if not name in child_list.keys() :  
                #print 'name = '+name
                lc = TreeNode(name)
                self.root.add_child(name,lc)
                lc.append_rec(tmp_child,data,1)
            else :
                lc=child_list[name]
                lc.append_rec(tmp_child,data,1)

tree = Tree()
test_string = ('A1/A2/A3/A4/A5','example1')
tree.append(test_string)
tree.print_all() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:29:38.947

在 Python 中，默认参数只计算一次。所以每次你创建一个`TreeNode`没有显式`obj`参数的，它都会被分配给*同一个*字典。

解决这个问题的一种方法是使用 None 作为默认参数，就像这样。

```
def __init__(self,key,obj=None) :
    print 'Node with '+key+' is created'
    self.key=key
    self.child=obj if obj is not None else {} 
```

另一种选择是进行防御性副本。如果您不希望通过引用不小心将字典传递给它，这将有所帮助，尽管这意味着它可能会掩盖其他错误。另请注意，这只会进行浅拷贝，这通常是您想要的，但并非总是如此。

```
def __init__(self,key,obj=dict()) :
    print 'Node with '+key+' is created'
    self.key=key
    self.child=obj.copy() 
```

# java - 用线连接点以创建折线图

> ID：15319230
> 
> 赞同：0
> 
> 时间：2013-03-10T05:26:40.163
> 
> 标签：java, graph, points

您好，我对 java 还很陌生，并且已经在这个问题上停留了一段时间，所以希望有人能够拯救我。基本上我正在创建一个可以绘制方程的程序，现在我正在测试 -10 到 10 之间的 x^2。我可以在正确的位置绘制点，但我不知道如何填写点之间的点，所以它看起来像一个真实的图表。

这是我的代码：

```
import java.util.Scanner;
import javax.swing.JFrame;
import java.awt.*;

class PlotGraph extends JFrame{

public void paint(Graphics l){

    l.drawLine(50, 300, 550, 300); //x axis
    l.drawLine(300, 550, 300, 50); //y axis
    //Orignin x = 300 y = 300

    int xmin, xmax, y, tmin, tmax;
    xmin =(-10);
    xmax = 10;
    int x_bet, y_bet;

    while(xmin<=xmax){
        y = 300-(xmin*xmin);
        l.drawLine(xmin+300, y, xmin+300, y);

        //while(x_bet>xmin){
        //l.drawLine(, , , );
        //}

        xmin++;
    }

}

public static void main(String [] args) {

    PlotGraph graph = new PlotGraph();
    graph.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    graph.setSize(600, 600);
    graph.setVisible(true); 
    graph.setTitle("PlotGraph");

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:15:49.763

另一种方法是创建一个`GeneralPath`，像这样。

```
import javax.swing.JFrame;
import java.awt.*;
import java.awt.geom.*;

class PlotGraph extends JFrame{

    public void paint(Graphics l){

        l.drawLine(50, 300, 550, 300); //x axis
        l.drawLine(300, 550, 300, 50); //y axis

        int xmin, xmax, y, tmin, tmax;
        xmin =(-10);
        xmax = 10;
        int x_bet, y_bet;
        GeneralPath gp = new GeneralPath();

        y = 300-(xmin*xmin);
        gp.moveTo((double)xmin+300, (double)y);
        while(xmin<=xmax){
            y = 300-(xmin*xmin);
            gp.lineTo((double)xmin+300, (double)y);

            xmin++;
        }

        Graphics2D g2 = (Graphics2D)l;
        g2.setColor(Color.RED);
        g2.draw(gp);
    }

    public static void main(String [] args) {
        PlotGraph graph = new PlotGraph();
        graph.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        graph.setSize(600, 600);
        graph.setVisible(true);
        graph.setTitle("PlotGraph");
    }
} 
```

这个来源仍然有问题：

1.  GUI 更新应在 EDT 上完成。
2.  自定义绘画最好在 a `JPanel`/中完成，`JComponent`或者`BufferedImage`在 a 中显示`JLabel`。
3.  “图形组件”应声明首选大小，而不是为框架设置大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:32:11.137

也许试试这个：

```
int x = xmin;
int last_y = 300-(x*x);
for (x = xmin+1; x<=xmax; x++);
    y = 300-(x*x);
    l.drawLine(x-1, last_y, x, y);
    last_y = y;
} 
```

您希望在先前的 x 和 y 坐标与当前坐标之间绘制一条线。这`last_y`就是为了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:46:05.227

有几种方法可以做到这一点。如果这是一项作业，那么我猜您的教授正在寻找您想出的方法。在最基本的级别上，您只需从最后一点到当前点画一条线。你怎么能做到这一点？也许是不同颜色的折线？也许使用一些数学来绘制更大的圆圈然后穿过它们？

这是解决特定问题的一种简单方法。我不建议将其上交（如果是作业），但它向您展示了基本原则。

```
import java.util.Scanner;
import javax.swing.JFrame;
import java.awt.*;
class PlotGraph extends JFrame{
public void paint(Graphics l){

l.drawLine(50, 300, 550, 300); //x axis
l.drawLine(300, 550, 300, 50); //y axis

int xmin, xmax, y, tmin, tmax;
int z = 0;
xmin =(-10);
xmax = 10;
int x_bet, y_bet;
while(xmin<=xmax){
    y = 300-(xmin*xmin);
    l.drawLine(xmin+300, y, xmin+300, y);
    if(z!=0)
    l.drawLine(xmin+300, y, xmin+300, z);
    z=y;
    xmin++;
}
}

public static void main(String [] args) {
PlotGraph graph = new PlotGraph();
graph.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
graph.setSize(600, 600);
graph.setVisible(true); 
graph.setTitle("PlotGraph");
}
} 
```

# linux - 立即将 stdout 重定向到 fifo

> ID：15319231
> 
> 赞同：1
> 
> 时间：2013-03-10T05:26:58.417
> 
> 标签：linux, bash, pipe, fifo

例如，我有一个 ac 程序，它打印三行，相隔两秒，即：

```
 printf("Wait 2 seconds...\n");
  sleep(2);
  printf("Two more\n");
  sleep(2);
  printf("Quitting in 2 seconds...\n");
  sleep(2); 
```

我执行程序并将其重定向到管道：

```
./printer > myPipe 
```

在另一个终端上

```
cat < myPipe 
```

6 秒后，第二个终端立即打印！我希望它立即打印可用的行。我该怎么做？

**Obs：**我无法更改源代码。它实际上是棋盘游戏算法的输出，我必须立即得到它，以便我可以将其插入另一个算法，得到答案并插入第一个算法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:42:55.477

将程序更改为这种方法：

```
 printf("Wait 2 seconds...\n");
  fflush (stdout);
  sleep(2);
  printf("Two more\n");
  fflush (stdout);
  sleep(2);
  printf("Quitting in 2 seconds...\n");
  fflush (stdout);
  sleep(2); 
```

* * *

额外的：

如果你不能改变程序，真的没有办法在不修改程序的情况下影响程序的内置缓冲。

如果您可以重新链接程序，您可以替换一个`printf()`在每次调用后刷新的函数。或者将 stdout 的启动初始化更改为无缓冲或至少行缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:46:27.267

如果您无法更改源，您可能想尝试一些解决此相关问题的解决方案： [bash: force exec'd process to have unbuffered stdout](https://stackoverflow.com/questions/3332045/bash-force-execd-process-to-have-unbuffered-stdout)

基本上，你必须让操作系统交互地执行这个程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T05:46:54.760

我假设实际的源文件是完整的。如果是这样，那么您必须编译源代码并运行它以使其执行任何操作。使用`cat`只会打印文件的内容，**而不是**运行它。

如果它是用 bash 编写的，则必须设置模式位 +x，然后才能使其可执行。允许您从终端运行它 ./script

无需担心语法，因为您已经声明它不是更改它的选项并且......它是用 C 正确编写的。

# c++ - 窗口被销毁前的消息框显示

> ID：15319238
> 
> 赞同：0
> 
> 时间：2013-03-10T05:27:53.150
> 
> 标签：c++, windows, winapi

我正在编写一个 Win32 程序并尝试在终止程序之前显示一个消息框。我希望它显示错误，然后在用户读取错误并按 OK 后关闭。

这是我尝试过的：

```
MessageBoxA(hwnd, "An Error occured! Please restart the program and try again.", "Error", MB_ICONERROR);
PostQuitMessage(0);

MessageBoxA(0, "An Error occured! Please restart the program and try again.", "Error", MB_ICONERROR);
PostQuitMessage(0);

MessageBoxA(hwnd, "An Error occured! Please restart the program and try again.", "Error", MB_ICONERROR);
DestroyWindow(hwnd);

MessageBoxA(0, "An Error occured! Please restart the program and try again.", "Error", MB_ICONERROR);
DestroyWindow(hwnd); 
```

`hwnd`我的应用程序的主（也是唯一）窗口在哪里。它不仅不显示消息框，也不会立即终止程序。我可以听到许多连续的哔哔声，好像正在创建许多消息框，但我没有看到它们。

如何更改代码以显示消息框，用户按 OK，然后程序立即终止？

我在我的主 WndProc 中处理 WM_CLOSE 和 WM_DESTROY 如下：

```
case WM_CLOSE:
    DestroyWindow(hwnd);
    return 0;

case WM_DESTROY:
    PostQuitMessage(0);
    return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:52:25.913

在这里，尝试这种方法（您很容易提示响应，然后决定是否调用 EndDialog）

```
#include <windows.h>
#include <commctrl.h>
#include <stdio.h>
#include "resource.h"

HINSTANCE hInst;

BOOL CALLBACK DlgMain(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch(uMsg)
    {
    case WM_INITDIALOG:
    {
    }
    return TRUE;

    case WM_CLOSE:
    {
        MessageBox(hwndDlg, "An Error occured! Please restart the program and try again.", "Error", MB_ICONERROR);
        EndDialog(hwndDlg, 0);
    }
    return TRUE;

    case WM_COMMAND:
    {
        switch(LOWORD(wParam))
        {
        }
    }
    return TRUE;
    }
    return FALSE;
}

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    hInst=hInstance;
    InitCommonControls();
    return DialogBox(hInst, MAKEINTRESOURCE(DLG_MAIN), NULL, (DLGPROC)DlgMain);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:21:57.810

显示消息后，只需调用[`ExitProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682658.aspx)。

# c# - Windows Store App - 如何从绑定命令返回

> ID：15319241
> 
> 赞同：1
> 
> 时间：2013-03-10T05:28:13.773
> 
> 标签：c#, windows-store-apps, winrt-xaml, commandbinding

我对 Windows 应用商店应用程序中的绑定命令和框架导航有点困惑。我使用 Windows Store 中的 Grid App (XAML) 模板启动了一个项目，并添加了一个应用栏，如下所示：

```
<AppBar IsSticky="True" IsOpen="True">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <StackPanel x:Name="LeftPanel" Orientation="Horizontal">
        </StackPanel>
        <StackPanel x:Name="RightPanel" Grid.Column="1" HorizontalAlignment="Right" Orientation="Horizontal">
            <Button HorizontalAlignment="Stretch" Style="{StaticResource SaveAppBarButtonStyle}" Command="{Binding Item.UpdateItem}" />
        </StackPanel>
    </Grid>
</AppBar> 
```

然后我在我的类中创建了一个属性和一个方法，例如：

```
public ICommand UpdateItem 
{
    get { return new UpdateItemCommand(this); }
}

void Save()
{
    SampleDataSource.UpdateGroup(this);

    SampleDataSource.SaveFileAsync();
} 
```

到目前为止一切都很好，该组已更新并且文件也已保存。这是我对 UpdateItemCommand 类的实现：

```
class UpdateItemCommand : ICommand
{
    public UpdateItemCommand(SampleDataItem viewModel)
    {
        this.viewModel = viewModel;
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        this.viewModel.Save();
        if (CanExecuteChanged != null)
        {
            CanExecuteChanged(this, EventArgs.Empty);
        }
    }

    public SampleDataItem viewModel { get; private set; }
} 
```

现在我想找到一种方法（正确的方法）在 SampleDataSource.SaveFileAsync() 方法执行结束时返回到主框架 (GroupedItemsPage.xaml) 并显示文件保存成功的 MessageDialog。如果我不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:42:03.810

**通过Frame.Navigate**函数发送导航参数

```
void Save()
{
    SampleDataSource.UpdateGroup(this);
    SampleDataSource.SaveFileAsync();
    this.Frame.Navigate(typeof(GroupedItemsPage), "Saved");
} 
```

然后，在**GroupedItemsPage中读取在****LoadState**函数中发送到 Frame 的参数，如果它不为空，则显示带有该参数的消息对话框

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
   if (navigationParameter != null)
   {
        String msg = (String) navigationParameter;
        var popup = new Windows.UI.Popups.MessageDialog(msg, "Some title");
        await popup.ShowAsync();
   }
} 
```

# ruby-on-rails - Rails 查询数组属性包含与其他数组重叠的位置

> ID：15319242
> 
> 赞同：0
> 
> 时间：2013-03-10T05:28:25.150
> 
> 标签：ruby-on-rails, orm, where

我有一个名为 Listing 的模型，它代表公寓转租的列表。这些转租可以以不同的期限出租（夏季、冬季等）。因此，每个 sublet 的术语都存储为序列化字符串。（我知道这不是最好的方法，但我正在尝试启动这个应用程序）我正在为这些列表创建一个过滤器功能，因此用户可以选择他们想要的列表中的哪些属性并显示与过滤器匹配的结果. 但是，我在使用术语部分时遇到了麻烦。用户可以检查他们希望列表可用的术语，因此这也存储在序列化数组中。使用 rails orm 我该怎么做

```
listing=listing.where("term contains value(s) from input term") 
```

基本上，我希望它返回用户首选条款与列表条款至少有一个重叠的列表。

即，如果列表具有夏季会话 1 和冬季的条款，并且用户选择夏季会话 1 和春季，则应返回该列表。

有人有想法么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:42:00.043

这就是你要找的：

```
listings = Listing.where('term in (?)', terms) 
```

或者你可以这样做：

```
listings = Listing.where(:term => terms) 
```

# regex - 如何用 sed 中的新术语替换正则表达式模式？

> ID：15319244
> 
> 赞同：0
> 
> 时间：2013-03-10T05:28:36.113
> 
> 标签：regex, sed

我想用一个新术语替换所有以主题标签开头的术语

我正在使用 sed 但似乎存在语法错误

```
sed 's/#[a-zA-Z0-9]+/replacement/g' terms 
```

如何更正我的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:52:54.053

在我的 sed 版本上，`+`没有做任何有用的事情。你应该`*`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:06:06.503

`sed`支持不提供`+`作为特殊运算符的“基本正则表达式”（BRE）。

一个正确的替代品`+`是

```
sed 's/#[[:alnum:]]\{1,\}/replacement/g' 
```

或者

```
sed 's/#[[:alnum:]][[:alnum:]]*/replacement/g' 
```

`GNU sed`和最近`BSD sed`提供的“扩展正则表达式”（ERE）匹配：

```
sed -E 's/#[[:alnum:]]+/replacement/g' 
```

（尽管`GNU sed`您可能应该使用`-r`因为`-E`目前未记录）

他们还提供`\+`作为扩展`BRE`，

```
sed 's/#[[:alnum:]]\+/replacement/g' 
```

如果您需要可移植性，您应该坚持使用`BRE`常规的`sed`.

* * *

@user784637 我用`[[:alnum:]]`而不是`[a-zA-Z0-9]`. 例如，这也将匹配带有变音符号的字母。

```
$ printf "%s\n" ë è é | grep '[a-zA-Z0-9]'
$ 
```

对比

```
$ printf "%s\n" ë è é | grep '[[:alnum:]]'
ë
è
é
$ 
```

您可以使用适合您需求的任何一种..

# javascript - 自定义警报框不是 jquery 在哪里？

> ID：15319254
> 
> 赞同：1
> 
> 时间：2013-03-10T05:30:45.960
> 
> 标签：javascript, jquery-ui, user-interface, custom-controls, alert

我试图找到一些自定义警报框，它们不使用一些库，例如：jQuery、Prototype 等。我想获得简单的示例，它具有丰富的 UI 作为 jQuery，但不使用它。

我试过用谷歌搜索，但找到了一大群 jQuery 样本......我不需要它。也许您在网站上有一些带有纯 js 示例的链接，这些示例不使用某些库？

因为我想获得具有丰富 UI 的简单示例，这些示例不基于以下库：jQuery、Prototype.js、Enyo 等

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:33:01.690

我认为这些链接会帮助你：

1.  [http://www.codeproject.com/Articles/28812/Custom-Alert-Boxes-using-JavaScript-and-the-DOM](http://www.codeproject.com/Articles/28812/Custom-Alert-Boxes-using-JavaScript-and-the-DOM)

2.  [http://www.gayadesign.com/diy/customize-the-default-alert-function-of-javascript/](http://www.gayadesign.com/diy/customize-the-default-alert-function-of-javascript/)

3\. [http://www.scriptiny.com/2008/04/custom-javascript-dialog-boxes/](http://www.scriptiny.com/2008/04/custom-javascript-dialog-boxes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T06:07:13.463

这不是很困难。基本上你所要做的就是附加一些东西来覆盖整个屏幕和一些东西来显示内容到正文并正确定位它们并将事件侦听器附加到正确的元素以在正确的时间将其删除。所有（嗯，大部分）定位和样式都可以用 CSS 完成。例如，要将事物定位为覆盖整个屏幕，您可以使用以下 CSS：

```
position: fixed;
left: 0;
right: 0;
top: 0;
bottom: 0; 
```

你甚至可能想让它变得有点半透明，这样更容易判断对话框是模态的：

```
background: rgba(0, 0, 0, 0.2); 
```

[尝试一个小例子。](http://jsfiddle.net/LwvQT/embedded/result,js,css/)

# android-emulator - 使用Android访问Java中的Web服务时出错

> ID：15319256
> 
> 赞同：2
> 
> 时间：2013-03-10T05:30:52.017
> 
> 标签：android-emulator

我正在尝试使用 android 访问 web 服务，但我总是在下面列出一个错误 02-12 01:34:55.684: E/StrictMode(672): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d07d98 原来绑定在这里

请告诉我如何解决这个错误。等待答复

# php - 如何按规则小部分更新数据库表

> ID：15319261
> 
> 赞同：0
> 
> 时间：2013-03-10T05:31:42.567
> 
> 标签：php, mysql, ajax, loops, foreach

```
<?php

require_once( dirname(__FILE__) . '/shared.php');

function tabelle_holen_hosters( $condition = "" ) {
    global $wpdb;
    $sql = "SELECT * FROM whatever" . $condition;

    if( $table = $wpdb->get_results( $sql, ARRAY_A ) ) {
        return $table;
    } else {
        echo "SQL ERROR in tabelle_holen()";
        var_dump( $table );
        return false;
    }
}

$test = tabelle_holen_hosters( " WHERE working=1 AND alexacheck=0 LIMIT 200" );
?>
<table>
<tbody>
<?php
foreach ( $test as $row ){
    $rank = (int) alexaRank( $row['hoster'] );

    if ($rank == 0)
        $rank = 999999999;

    echo '<tr>';
    echo '<td>' . $row['hoster_id'] . '</td>';
    echo '<td>' . $row['hoster'] . '</td>';
    echo '<td>' . $rank . '<td>';
    echo '</tr>';

    $wpdb->update(
    'fhw_filehosters',
        array(
            'alexa' => $rank,
            'alexacheck' => 1
        ),
        array( 'hoster_id' => $row['hoster_id'] ),
        array(
            '%d',
            '%d'
        ),
        array( '%d' )
    );
    flush(); // <----- NOT working.
}
?>
</tbody>
</table>
<?php
function alexaRank( $url ) {
    $request_url = "http://data.alexa.com/data?cli=10&url=".$url;
    $xml = simplexml_load_file($request_url) or die("feed not loading");
    return $xml->SD->POPULARITY['TEXT'];
} 
```

我有这个脚本，我使用**没有 wordpress**的 wordpress 数据库类。我将行限制为 200，因为否则我会遇到诸如页面加载需要数年的问题，并且可能 php 执行时间来自 alexa 函数的 xml 需要很长时间。我在该数据库中有很多要检查的 url，我想用一个操作来更新它们，这意味着删除 200 限制。我该怎么做才能让它像一次做 50 个，然后输出然后继续？阿贾克斯？我该怎么做？

更新1：

正如我在评论中所说，我正在寻找一些东西来使我的网站（在后台）发生这种情况，我实际上并不确定此时是否涉及 php 执行时间限制，但对于“一次性”解决方案我刚刚在队列末尾测试了 flush() 并且它不起作用！

但是我正在寻找一个常规功能，现在我更新了问题，答案非常通用，我不是那个 exp。我很想看到一些实际的代码。如果那太多并且往往是“给我写一个程序”，那么我必须通过挖掘一段时间来解决这个问题。然后，我将接受最有帮助的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:43:38.073

您的直接问题（如何在脚本运行时开始输出）很容易回答：

```
flush(); 
```

但如果 PHP 执行时间限制限制了你，它不会解决你的问题。所以剩下的就是 AJAX：

*   将脚本分成两个文件：一个包含空文件`<table>`和 JavaScript，另一个将通过 AJAX 调用，执行实际处理并返回表行。
*   像这样限制处理的行数：`LIMIT $start, 50`，其中`$start`通过 GET/POST 参数提供
*   在 JavaScript 中，首先调用 start=0 的 PHP 脚本，然后处理完响应后，再次调用 start 增加 50。重复，直到响应为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:02:21.847

如果您只想更新行并且想知道更新了哪些项目，则不需要网络服务器。您可以使用 logger -> [KLogger](http://codefury.net/2008/07/klogger-a-simple-logging-class-for-php/)代替“echo”，并将更新信息写入磁盘。在这种情况下，使用[PHP CLI](http://php.net/manual/de/features.commandline.php)具有优势。您可以设置 max_execution_time(0) 并增加 memory_limit。另外，我认为它比使用 apache 或 nginx 快一点。您想进行批量更新吗？看看这篇[文章](http://www.edmondscommerce.co.uk/mysql/very-high-speed-batch-update-multiple-rows-of-a-table-in-single-query/)。或者，您可以使用[MySQL](https://stackoverflow.com/questions/11664684/how-to-bulk-update-mysql-data-with-one-query)。如果 working 和 alexacheck 有很多不同的状态，不要忘记对它们进行索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:03:35.357

以下是您应该考虑的方式：

*   创建一个伟大的上帝之母循环。
*   保留一个 $total 计数器和一个 $temp 计数器。
*   遍历循环 100 (n) 次并每次增加计数器。
*   一旦达到 100 个数字限制（或 50 或 200 或其他），您将重置临时计数器。
*   你让程序进入睡眠状态 3 秒（或类似的东西）。
*   您再次遍历 temp 变量 n 次，但您请求与 $total 计数器对应的数据。

或者

*   创建一个伟大的上帝之母循环。
*   有一个柜台。
*   在每次循环迭代中增加计数器。
*   一旦计数器达到您定义的最大值，您就将其重置。
*   睡觉。
*   重复。

无论哪种方式都可以获利。

现在，因为您需要一些代码和一些解释：

PHP手册说：

```
int sleep ( int $seconds )
"Delays the program execution for the given number of seconds." 
```

所以程序执行是延迟的，如果你延迟了执行时间，你就无法达到限制。

所以你可以这样做：

```
$i = 0;
$max = 50;
$sleepTime = 3;

foreach ( $test as $row ){
    $rank = (int) alexaRank( $row['hoster'] );

    if ($rank == 0)
    $rank = 999999999;

    echo '<tr>';
    echo '<td>' . $row['hoster_id'] . '</td>';
    echo '<td>' . $row['hoster'] . '</td>';
    echo '<td>' . $rank . '<td>';
    echo '</tr>';

    $wpdb->update('fhw_filehosters', array(
        'alexa' => $rank,
        'alexacheck' => 1
    ),
    array(
        'hoster_id' => $row['hoster_id']
    ),
    array(
        '%d',
        '%d'
    ),
    array( '%d' )
    );
    ii($i === $max)
    {
        $i = -1;
        sleep($sleepTime);
    }
    $i++;
} 
```

至少尝试一下，最好的学习方式就是体验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:16:37.953

像这样的长时间运行的进程可能是作业队列的候选者。

1.  一次将 50 个 URL 排入队列。
2.  让每个作业队列工作人员在完成后将结果发送到您的主应用程序。
3.  然后，您的应用程序将处理从队列中进入的结果的显示。

这一切都应该异步完成。

当应用程序进入“维护”模式时。您仍然可以使用相同的作业队列。就像提到的其中一条评论一样，您甚至可以拥有一个每天两次将作业发送到队列的 cron 作业。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T04:21:15.960

我通常使用函数[ob_start](http://www.php.net/manual/en/function.ob-start.php)和[ob_flush](http://php.net/manual/en/function.ob-flush.php)。它对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T10:05:04.520

首先，将工作机智库和前端代码分开会很好：

1.  ajax.getdata.php //这里我们根据给定的参数获取数据

    ```
    $page = $_GET["page"]; // I skip the validation, you should do it be yourself

    require_once( dirname(__FILE__) . '/shared.php');

    function tabelle_holen_hosters( $condition = "" ) {
        global $wpdb;
        $sql = "SELECT * FROM whatever" . $condition;

        if( $table = $wpdb->get_results( $sql, ARRAY_A ) ) {
            return $table;
        } else {
            echo "SQL ERROR in tabelle_holen()";
            var_dump( $table );
            return false;
        }
    }

    function alexaRank( $url ) {

        $request_url = "http://data.alexa.com/data?cli=10&url=".$url;
        $xml = simplexml_load_file($request_url) or die("feed not loading");
        return $xml->SD->POPULARITY['TEXT'];
    }

    $limit = 200;

    $start= $page*$limit;

    $test = tabelle_holen_hosters( " WHERE working=1 AND alexacheck=0 LIMIT $start,$limit" );

     $str = '<table>';

    foreach ( $test as $row ){

        $rank = (int) alexaRank( $row['hoster'] );

        if ($rank == 0)
            $rank = 999999999;

        $str.= '<tr>';
        $str.= '<td>' . $row['hoster_id'] . '</td>';
        $str.= '<td>' . $row['hoster'] . '</td>';
        $str.= '<td>' . $rank . '<td>';
        $str.= '</tr>';

        $wpdb->update(
        'fhw_filehosters',
            array(
                'alexa' => $rank,
                'alexacheck' => 1
            ),
            array( 'hoster_id' => $row['hoster_id'] ),
            array(
                '%d',
                '%d'
            ),
            array( '%d' )
        );

    }

    $str.='</table>';

    echo $str;

    exit;

    ?> 
    ```

2.  index.html // 构建前端视图，向服务器发送ajax请求。

    ```
    <div id="content">
    </div>

    <div id="controls">
    <span onCLick="goPrev()">
    Prev
    </span>
    <span onCLick="goNext()">
    Next
    </span>
    </div>

    <script>
    var page=0;

    //this functions can be moved to separate file

    function goNext(){
    page++;
    //here should be some limit for max page
    readData();
    }

    function goPrev(){
    if(page==0) return false;
    page--;
    readData();
    }

    function readData(){
    $.ajax({
    "url":"/path/to/ajax.getdata.php?page="+page,
    }).done(function(data){
    $("#content").html(data);
    });
    }

    readData();
    </script>

    </body>
    </html> 
    ```

所以现在您可以自己定义一次显示多少条记录，并且可以通过控件单击转到下一页或上一页。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T12:03:30.777

您可以想到的另一种方式：对于访问该站点的单个人，我是否只能更新某些行？为了得到幻觉，它都在更新。

在在线浏览器游戏中，这种情况很多。他们给人的错觉一切都是最新的，但实际上只是玩家信息已更新。

或者，您可以查看您的服务器主机是否有“预定脚本”选项，我知道有一些允许这样做。它会触发一个脚本以间隔或一天中的某些时间运行。

我希望这在某种程度上有所帮助。

# mysql - 如果未找到单行，则返回默认值

> ID：15319264
> 
> 赞同：20
> 
> 时间：2013-03-10T05:32:19.250
> 
> 标签：mysql, select, default, fallback, null-coalescing

我有以下选择语句来获取流的下一个预定项目。如果没有匹配的行，我希望它返回一个默认值。这是我正在使用的 SQL：

```
SELECT `file`
FROM `show`, `schedule` 
WHERE `channel` = 1
  AND `start_time` <= UNIX_TIMESTAMP() 
  AND `start_time` > UNIX_TIMESTAMP()-1800
  AND `show`.`id` = `schedule`.`file` 
ORDER BY `start_time`
DESC LIMIT 1 
```

这应该抓取最近安排的项目，但如果它在查询前 30 分钟以上则不会。

但是，如果用户没有安排任何事情，我想要一个默认值，以便在流上实际播放一些东西。我尝试了以下方法：

```
SELECT COALESCE(`file`, 'default.webm')
FROM `show`, `schedule`... 
```

和

```
SELECT IFNULL(`file`, 'default.webm')
FROM `show`, `schedule` 
```

但是，如果没有找到任何行，它总是返回一个空结果。我怎样才能返回一个默认值呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-10T05:37:43.577

一种方法

```
SELECT IFNULL(MIN(`file`), 'default.webm') `file` 
  FROM `show`, `schedule` 
 WHERE `channel` = 1 AND `start_time` <= UNIX_TIMESTAMP() 
   AND `start_time` > UNIX_TIMESTAMP()-1800 AND `show`.`id` = `schedule`.`file` 
 ORDER BY `start_time` DESC LIMIT 1 
```

由于您只返回一行，因此您可以在这种情况下使用聚合函数，以`MIN()`确保`NULL`在未选择任何记录时您将获得。然后`IFNULL()`或`COALESCE()`将完成它的工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-01-13T04:51:28.303

@peterm 的答案和这个答案旨在适应 SQL 逻辑，该逻辑将在结果集中返回最多一行。

他的答案旨在返回单行和单列。

我的答案旨在返回包含一列或多列的单行。

本质上，您可以`UNION`在第二个子句中使用硬编码值，该`SELECT`子句与第一个 SELECT 具有相同的列数。

对于 OP：

```
(
    SELECT `file`
    FROM `show`,
         `schedule` 
    WHERE `channel` = 1
      AND `start_time` BETWEEN UNIX_TIMESTAMP()-1799 AND UNIX_TIMESTAMP() 
      AND `show`.`id` = `schedule`.`file` 
    ORDER BY `start_time` DESC
    LIMIT 1
) UNION (
    SELECT 'default.webm'
)
ORDER BY file = 'default.webm'
LIMIT 1; 
```

除非出现任何语法错误，否则结果集将提供一行，其中一列键为`file`.

* * *

作为一个更一般的例子：（[DB-Fiddle Demo](https://www.db-fiddle.com/f/5M7eFGzcLc73NT1SSN5r1p/2)）

```
(
    SELECT Col1,Col2,Col3
    FROM ExampleTable
    WHERE ID='1234'
) UNION (
    SELECT 'Def Val','none',''
)
ORDER BY Col1 = 'Def Val'
LIMIT 1; 
```

结果：

*   如果在第一个 SELECT 中没有找到任何行，则结果集将填充第二个 SELECT 中的值。作为数组的结果集将是：

    ```
    [['Col1' => 'Def Val', 'Col2' => 'none', 'Col3' => '']] 
    ```

*   如果在第一个 SELECT 中找到一行，则在结果集中提供第一个 SELECT 值，而省略第二个 SELECT 值。结果集将是：（请参阅我的演示链接）

    ```
    [['Col1' => 'A', 'Col2' => 'B', 'Col3' => 'C']] 
    ```

*结果集中的关联键将由第一个 SELECT 查询中的列名/别名决定。

*后续的 SELECT 查询不需要指定列别名。

*UNION 不要求来自两个联合查询的列名相同。事实上，后续 SELECT 查询中的列名或数据源可能是*任何东西*（不同的列、函数调用等）。

```
(
    SELECT Col1,Col2,Col3
    FROM ExampleTable
    WHERE ID='1234'
) UNION (
    SELECT 'Def Val' AS `Fallback1`,
           'none'    AS `Fallback2`,
           ''        AS `Fallback3`
)
ORDER BY Col1 = 'Def Val'
LIMIT 1; 
```

我的观点是，这很容易阅读，而且看起来不像是一个繁重的查询。

* * *

感谢@LudovicKuty 发现了一个关于 UNION 生成的行顺序的潜在错误。[https://dev.mysql.com/doc/refman/8.0/en/union.html#union-order-by-limit要消除默认行在](https://dev.mysql.com/doc/refman/8.0/en/union.html#union-order-by-limit)*找到*的行之前排序的可能性，请编写一个 ORDER BY 子句足够的逻辑来确保默认行总是在结果集中的后面排序。将有不同的 sql-dialect-specific 语法可用于识别默认行。在某些`ORDER BY columnName = 'default value'`情况下就足够了，其他人可能会要求`IF`or `IIF`or`CASE`等​​。只要您构建逻辑以便默认返回一个真实的结果，那么 true 将被视为`1`并且 false 将被视为`0`- 当然`1`是在之后`0`升序排序时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T13:48:43.400

要处理更广泛的情况，您需要一些条件逻辑。这仅在 MySQL 中的存储过程中可用，因此您需要将此代码包装在一个过程中并调用它：

```
if exists (
       SELECT `file` FROM `show`, `schedule` 
       WHERE `channel` = 1 AND `start_time` <= UNIX_TIMESTAMP() 
       AND `start_time` > UNIX_TIMESTAMP()-1800 AND `show`.`id` = `schedule`.`file` 
) then
       SELECT `file` FROM `show`, `schedule` 
       WHERE `channel` = 1 AND `start_time` <= UNIX_TIMESTAMP() 
       AND `start_time` > UNIX_TIMESTAMP()-1800 AND `show`.`id` = `schedule`.`file` 
       ORDER BY `start_time` DESC LIMIT 1
; else
        select `DefaultValue` as `file`
; end if 
```

# html - 是否有等效于@font-face 的内联？

> ID：15319265
> 
> 赞同：1
> 
> 时间：2013-03-10T05:32:23.190
> 
> 标签：html, css, fonts, font-face

我遇到了一个问题，我无法编辑网页的 css 或 javascript。只有身体。所以，我需要使用所有系统都不支持的字体。那么有什么方法可以使用@font-face inline 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:40:28.733

在它的身体部位创建一个新的 CSS 怎么样？

```
<body>
   <style>
      @font-face ...
   </style>

   ...
</body> 
```

或使用内部带有@font-face 的外部样式表。

```
<link rel='stylesheet' href='webfont.css' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:46:58.987

您可以通过在应答器头中添加如下代码来轻松“覆盖”css：

```
<style>
  @font-face {
    font-family: 'new-font';
    ...
  }

  p {
    font-family:'new-font';
  }
</style> 
```

# jquery - 切片页面并显示 div（就像一起上下滑动）

> ID：15319266
> 
> 赞同：0
> 
> 时间：2013-03-10T05:32:40.667
> 
> 标签：jquery

我正在尝试创建一种效果，就像页面被水平切片并打开一样。然后它将上面的内容向上推，下面的内容向下推。

所以它有点像 jquery slideup 50% 和 slidedown 50% ......但是我在任何地方都找不到 jquery 效果所以我想知道它是否可能？

或者我是否需要向下滑动，然后同时滚动到可能会产生类似效果。

另一个设计师设计了这个！！非常感谢所有帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:36:45.230

您应该能够通过`.slideDown()`中心部分以及调整窗口滚动位置的第二个同步动画来实现此效果。

第二个动画可能是：

*   `.slideUp()`文档顶部的一些牺牲部分，正好是中心部分高​​度的一半
*   `$('html,body').animate(`滚动顶部`, ....)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:36:20.780

jQuery UI 的[Clip](http://docs.jquery.com/UI/Effects/Clip)效果可能正是您想要的。

# c++ - 从套接字冻结读取

> ID：15319267
> 
> 赞同：0
> 
> 时间：2013-03-10T05:32:45.590
> 
> 标签：c++, c, sockets

从服务器上的客户端读取数据时出现问题。在读取所有数据并等待更多数据后，read() 函数将始终冻结（阻塞），这对我来说是不受欢迎的。

服务器程序：

```
 soc = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
   struct sockaddr_in sin;  
   sin.sin_family = AF_INET;  
   sin.sin_port = htons(port);   
   sin.sin_addr.s_addr = INADDR_ANY; 
   bind(soc, (struct sockaddr*) &sin, sizeof(sin));

   if (listen(soc, MAX))
      return;

   int socc;               // socket for clinet     
   while (1) {
      if ((socc = accept(soc, (struct sockaddr *) &sin, sinlen)) < 0)
         break;
      while ((result = read(socc, pointer, SIZE)) > 0) {
         // after the data are readed, read function will block
      }
      // do some stuff and write reply to client => will never done
   } 
```

客户端程序：

```
 ...
   soc = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)  
   struct sockaddr_in socketAddr;
   socketAddr.sin_family = AF_INET;
   socketAddr.sin_port = htons(port);
   memcpy(&(socketAddr.sin_addr), host->h_addr, host->h_length);
   if (connect(soc, (sockaddr *)&socketAddr, sizeof(socketAddr)) == -1)  
      return;
   if (write(soc, req.c_str(), strlen(req.c_str())) < 0)
      return; 
```

The main problem is that I don't know how much data will be client sending to server, so the server should read all data from socket and after nothing is coming, leave the reading cycle. But the server read whole message for example (30 bytes) and waiting for more (but no more is coming). The sockets are still opened because the client is waiting for reply from server.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:47:55.227

如前所述，使用非阻塞或将 RCV_TIMEOUT 添加到套接字。

```
struct timeval tv;

tv.tv_sec = 30;  /* 30 Secs Timeout */

setsockopt(sockid, SOL_SOCKET, SO_RCVTIMEO,(struct timeval *)&tv,sizeof(struct timeval)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T05:40:31.317

您将需要使您的套接字非阻塞。在这种情况下，如果没有要读取的内容出现特定错误，读取将立即退出。

看看[C- Unix Sockets - 非阻塞读取](https://stackoverflow.com/questions/8107271/c-unix-sockets-non-blocking-read)

# php - 文件上传时间限制

> ID：15319271
> 
> 赞同：-5
> 
> 时间：2013-03-10T05:33:22.320
> 
> 标签：php, time, upload

我正在开发用户可以上传文件的项目。我现在很困惑！我想要开发这个系统的建议和想法。

当用户达到 5 个文件上传之后，每次上传会有 2 分钟的延迟。

快速分享示例

如果有人有想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:25:15.650

只需在`database`其中保存一个字段`last file upload date and time`，如果上传达到 5 的限制，则在上传文件之前检查最后一个文件上传时间。如果`difference`介于`last file upload time`和`current time`大于`2 minutes`然后允许上传文件，否则让`message`用户等待他可以上传下一个文件。

# android - Android listview 在模拟器模式下不滚动

> ID：15319273
> 
> 赞同：1
> 
> 时间：2013-03-10T05:33:34.553
> 
> 标签：android, listview, scroll

我无法让我的列表视图在 Android 的模拟器模式下滚动。我尝试使用鼠标滚轮和 pagedown 键，但没有任何效果。下面是我的布局。设备目标使用 Google API。列表视图是从服务器数据动态填充的。任何帮助表示赞赏。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
 >

<TextView
    android:text="Address is: "
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/address_view" />

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapvw"
    android:layout_width="match_parent" 
    android:layout_height="250dp" 
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0ZdvSz7dxNHNfiaO_ZqnKdW_ZiZbv35vqogG8sQ"
    />
<ListView 
    android:id="@+id/restaurant_list"
    android:layout_width="match_parent"
    android:layout_height="200sp"
    android:textColor="#FFFFFF"
    android:scrollbars="vertical"
    android:drawSelectorOnTop="false" />
 </LinearLayout> 
```

下面是我的java程序的开始。我不知道你应该把通知栏放在哪里？

```
 public class MainActivity extends MapActivity {

private MapView mapView;
private MapController mapController;
private GeoPoint point;
String latLongString = "";
TextView myLocationText;
String [] restaurants = new String[50];
float lat;
float lng;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mapView = (MapView) findViewById(R.id.mapvw);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite (false);
    mapView.setTraffic(true);
    mapController = mapView.getController();
    LocationManager locationManager;
    String svcName = Context.LOCATION_SERVICE;
    locationManager = (LocationManager)getSystemService(svcName);
//  myLocationText = (TextView)findViewById(R.id.myLocationText);

    String provider = LocationManager.GPS_PROVIDER;

    locationManager.requestLocationUpdates(provider, 3600, 1000, new LocationListener() {

        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}

        @SuppressWarnings("unchecked")
        public void onLocationChanged(Location loc) {
            if(loc != null) {
                lat = (float) (loc.getLatitude());
                lng = (float) (loc.getLongitude());

                String thislat = (String.valueOf(lat));
                String thislng = (String.valueOf(lng));

            //  String latLongString = "Lat:" + lat + "\nLong:" + lng;
            //  myLocationText.setText("Your current position is:\n" + latLongString);
                int latit = (int) (loc.getLatitude() * 1E6);
                int longit = (int) (loc.getLongitude() * 1E6);
                point = new GeoPoint(latit, longit);
                mapController.animateTo(point);
                mapController.setCenter(point);
                mapController.setZoom(12);
                String addr=getAddress(point);

                TextView addressView = (TextView) findViewById(R.id.address_view);

                new GetRestaurant().execute();

            }

        }
    });

}
class GetRestaurant extends AsyncTask<Void, Void, ArrayList<String>> {

 @Override
    protected ArrayList<String> doInBackground(Void...parameters ) {

        // TODO Auto-generated method stub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:20:09.380

使用单独的 ListActivity，因为 List View 不能很好地与 MapActivity 一起使用，或者您也可以使用 Fragment .. 或使用 FrameLayout ..

# xcode - 为多个项目使用一个存储库

> ID：15319274
> 
> 赞同：1
> 
> 时间：2013-03-10T05:33:44.090
> 
> 标签：xcode, git

我是 git 新手，虽然我可以看到分支/合并过程对单个项目的巨大好处，但在我看来，另一个有用的 Git 应用程序是使用它来集中您经常使用的核心自定义代码和模板在您的所有项目中，每个项目都作为自己的分支开始。

例如，我有大量自定义代码，这只是我用于所有应用程序的起点。如果我在这里和那里调整它，或者找到错误并修复它们，我希望在所有使用该代码的项目中复制它。

通过在 master 的单独分支中进行调整，然后合并回 master，然后将 master 与占用单独项目的其他分支合并，似乎我可以很好地实现这一点。

**这种 Git 方法有什么主要缺点吗？**

此外，虽然我知道存在子模块，但我现在不想使用它们，因为 Xcode 本身不支持它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:40:41.600

几个项目将倾向于按照自己的条件推进。如果您将所有人都放在同一个分支上，您会看到混合提交，并且没有任何历史感可辨。如果将每个项目放在单独的分支上，则必须从一个跳转到另一个，并且与单独的 git 存储库相比没有任何优势（git*非常*轻量级！）。

DVCS 确实增加了开销（如果有多个具有相同内容的存储库，它肯定会增加磁盘空间；但现在这很便宜......）。它的优点是您可以在任何地方自由工作（无需等待缓慢的连接），并且（至少使用 git）操作通常如此之快，以至于在您习惯它之前，您会有这种挥之不去的恐惧被骗了，什么都没做……

对于开发而言，分支和合并有效且成本低廉的事实意味着鼓励实验和探索。提交是即时的并且占用很少空间的事实导致了微提交（一个逻辑更改，甚至是最小的错误修复或错字，每次提交），而不是“一个早上的工作价值”转储。这使得历史可以理解，并且工具`git bisect`非常有用。

我有一堆 git 存储库，里面有我想保留历史的东西，但不一定会与其他人共享。我还保留在远程存储库中的一些更重要的东西（仅`git`在`ssh`另一端，并且需要不时地推送到那里的一些纪律）以进行备份。从这个意义上说，我更多地将 git 用作本地 VCS，这也具有我可以与他人分享的优势 ;-)

# objective-c - 用 writeToFile 保存 NSString 只会保存到一个位置

> ID：15319279
> 
> 赞同：1
> 
> 时间：2013-03-10T05:34:51.623
> 
> 标签：objective-c, nsstring, writetofile

使用下面的代码是我可以`writeToFile`实际保存文件的唯一方法。它输出到这个目录：

> /Users/Eric/Library/Containers/net.ericmann.Event-Gadget-Workshop-App/Data/Documents/gadget.ics

```
- (IBAction)Saved:(id)sender { 
    [self writeToTextFile];
    //mySaved.stringValue = [NSString stringWithFormat:@"Saved!"];
}

-(void) writeToTextFile{
    //get the documents directory:

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    //NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    //NSString *pathToDesktop = [NSString stringWithFormat:@"/Users/%@/Desktop", NSUserName()];

    //make a file name to write the data to using the documents directory:
    NSString *fileName = [NSString stringWithFormat:@"%@/gadget.ics", documentsDirectory];

    //create content - four lines of text
    NSString *content = myOutput.stringValue;

    //save content to the documents directory
    [content writeToFile:fileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil];
    mySaved.stringValue = fileName;
    myTestBox.stringValue = fileName;
} 
```

现在，如果我使用下面的代码，什么都不会写。我有测试文件名输出，它指向这里：

> /Users/Eric/Desktop/gadget.ics

```
-(void) writeToTextFile{
    //get the documents directory:

    // NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);

    //NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    //NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *pathToDesktop = [NSString stringWithFormat:@"/Users/%@/Desktop", NSUserName()];

    //make a file name to write the data to using the documents directory:
    NSString *fileName = [NSString stringWithFormat:@"%@/gadget.ics", pathToDesktop];

    //create content - four lines of text
    NSString *content = myOutput.stringValue;

    //save content to the documents directory
    [content writeToFile:fileName atomically:NO  encoding:NSStringEncodingConversionAllowLossy error:nil];
    mySaved.stringValue = fileName;
    myTestBox.stringValue = fileName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:37:48.617

*如果您实际上在 " " 方法中使用*错误参数，您最终可能会找到解决方案`writeToFile`：

例如：

```
NSError * error = NULL;
BOOL success = [content writeToFile:fileName atomically:NO encoding:NSUTF8StringEncoding error:&error];
if(success == NO)
{
    NSLog( @"error saving to %@ - %@", fileName, [error localizedDescription] );
} 
```

# python - 检查一个字典中的所有对是否也存在于另一个字典中，可能具有相等或较低的对应值

> ID：15319280
> 
> 赞同：0
> 
> 时间：2013-03-10T05:34:55.153
> 
> 标签：python

我在这里有一个 dict 和一个字符串，其中 dict 包含 char-count 作为键值对。我想检查字符串中的所有字符是否完全包含在字典中。

这意味着字典应该包含字符串的所有字符，它们的计数小于或等于它们在字典中的对应值。

```
def isValidWord(strng, dct):
    """
    Returns True if strng is entirely
    composed of letters in the dct.
    Otherwise, returns False.

    Does not mutate hand or dct.
    """

    d={}
    for x in strng:
        d[x]=d.get(x,0)

    for x in d:
        if d[x]> dct.get(x,0):
            return False

    return True 
```

在大多数情况下它似乎工作得很好，但在某些情况下却不行。例如 -

```
isValidWord('chayote', {'a': 1, 'c': 2, 'u': 2, 't': 2, 'y': 1, 'h': 1, 'z': 1, 
'o': 2}) 
```

这给出了输出`True`，但是正确的输出是`False`. 这是因为`e`字典中没有。

这里的错误在哪里？以及如何检查一个字典中的所有对是否也存在于另一个字典中，可能具有相等或较低的对应值（键）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:40:40.053

你是为了这条线

```
d[x]=d.get(x,0) 
```

成为

```
d[x]=d.get(x,0) + 1 
```

否则，字典中的所有值都将为`0`，并且函数将始终返回`True`（除非字符串为空或给定字典中的任何值都是`0`.

另请注意，它会更容易`collections.Counter`用于您的第一个循环：

```
d = collections.Counter(strng) 
```

至于您测试一个字典是否在另一个字典中的问题，您可以这样做：

```
all(k in dct and v < dct[k] for k, v in d.items()) 
```

# c# - CursorAdapter 是否比 ListAdapter/ArrayAdapter 更高效？

> ID：15319288
> 
> 赞同：1
> 
> 时间：2013-03-10T05:35:59.460
> 
> 标签：c#, android, sqlite, xamarin.android, android-cursor

我正在使用 Mono For Android 来创建我的 Android 应用程序。

我的解决方案结构如下：

*   核心 -> 包含我的业务逻辑的 .Net 类库。没有安卓代码。需要可互操作。
*   Core.AndroidLib -> 一个 Android 类库。包含 Android 特定代码
*   MyApp -> Android 应用程序项目。包含布局、活动等。

核心包含我的实体（即`Student`）。我的`Student`班级有一个财产`IEnumerable<Schedule> Schedules`。此属性由 Web 服务 ( `GetAllSchedules()`) 填充。为了节省资源，从服务下载的数据缓存到本地 SQLite 数据库（缓存逻辑位于 Core.AndroidLib 中）。每当请求调度数据时，它首先检查缓存，并且仅在需要其他数据时才转到 Web 服务。

到目前为止，Core 仍然是一个纯 .Net 类库。

在阅读了 Cursors 之后，我意识到 Cursor 在查询方面更有效，因为只有在需要时才“获取”数据（而不是`IEnumerable<Schedule> Schedules`一次性预先填充我的所有数据并将其存储在列表中）。

我没有将 Schedule 数据存储在 List 中，而是考虑将其存储在 Cursor（即`ICursor Schedule`）中，但是，这种方法会使我的 Core 库无法互操作，因为它将使用 Android 库中的类。

我应该只将 Schedule 数据保留在列表中并从 SQL ( ) 中预填充数据，`Select * from Schedules`还是应该公开一个 ICursor？公开 ICursor 会比获取所有数据并将其存储在列表中更有效吗？

# html - 如何在 CSS 中制作鼠标悬停菜单

> ID：15319289
> 
> 赞同：0
> 
> 时间：2013-03-10T05:36:06.860
> 
> 标签：html, css, menu, submenu

我有一个菜单。当我将鼠标悬停在子菜单上时，我需要显示子菜单。我有一些代码如下。但子菜单与现有菜单重叠。

以下是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>CSS Drop Down Menus</title>

  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }
    body {
      font-family: "Trebuchet MS", Helvetica, Sans-Serif;
      font-size: 14px;
    }
    a {
      text-decoration: none;
      color: #838383;
    }
    a:hover {
      color: black;
    }
    #menu {
      position: relative;
      margin-left: 30px;
    }
    #menu a {
      display: block;
      width: 140px;
    }
    #menu ul {
      list-style-type: none;
      padding-top: 5px;
    }
    #menu li {
      float: top;
      position: relative;
      padding: 3px 0;
      text-align: center;
    }
    #menu ul.sub-menu {
      display: none;
      position: absolute;
      top: 20px;
      left: -10px;
      padding: 10px;
      z-index: 90;
    }
    #menu ul.sub-menu li {
      text-align: top;
    }
    #menu li:hover ul.sub-menu {
      display: block;
      border: 1px solid #ececec;
    }
  </style>
</head>
<body>
<div id="menu">
  <ul>
    <li><a href="#">Home</a>
      <ul class="sub-menu">
        <li><a href="#">Pages</a></li>
        <li><a href="#">Archives</a></li>
        <li><a href="#">New Posts</a></li>
        <li><a href="#">Recent Comments</a></li>
      </ul>
    </li>
    <li><a href="#">About</a>
      <ul class="sub-menu">
        <li><a href="#">Get to know us</a></li>
        <li><a href="#">Find out what we do</a></li>
      </ul>
    </li>
    <li><a href="#">Contact</a>
      <ul class="sub-menu">
        <li><a href="#">E-mail Us</a></li>
        <li><a href="#">Use Our Contact Form</a></li>
      </ul>
    </li>
  </ul>
</div>
</body>
</html> 
```

我需要这样的效果。 ![在此处输入图像描述](../Images/9c5f16f346c401cbe82f072d77fba481.png)

我怎样才能做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:49:49.350

我认为您正在寻找一种称为**“带有下拉菜单的导航翻转”的东西。**

这是您可以找到的最佳实现之一 - 根据需要进行调整和使用：

[http://jorenrapini.com/blog/web-development/css-navigation-rollovers-with-drop-downs#post-170](http://jorenrapini.com/blog/web-development/css-navigation-rollovers-with-drop-downs#post-170)

而且，看看它是否值得尝试，这是最终结果：

[http://jorenrapini.com/posts/css-rollovers/post2.html](http://jorenrapini.com/posts/css-rollovers/post2.html)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:50:06.550

你已经设置好`left: -10px`了`#menu ul.sub-menu`，这就是它重叠的原因`#menu`。您应该将其设置为一个可以将其向右移动足够远以满足您的目的的值，也许`left: 140px`因为那是`menu`div 的宽度。

# imagemagick - 如何释放 ImageMagick GetImageHistogram() 分配的内存？

> ID：15319300
> 
> 赞同：0
> 
> 时间：2013-03-10T05:37:32.677
> 
> 标签：imagemagick

我`ColorPacket *GetImageHistogram(const Image *image, ...)`用来提取直方图。我看到 IM 来源并发现 GetImageHistogram 通过以下方式分配内存：

```
 histogram=(ColorPacket *) AcquireQuantumMemory((size_t) cube_info->colors,
    sizeof(*histogram)); 
```

我应该如何释放这个内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:29:30.273

要释放用 分配的内存`AcquireQuantumMemory`，请使用`RelinquishMagickMemory`：

```
histogram = RelinquishMagickMemory(histogram); 
```

请参阅[API 文档](http://www.imagemagick.org/api/memory.php#RelinquishMagickMemory)。这个函数总是返回`NULL`。

# ruby-on-rails - rake assets：预编译一些错误

> ID：15319301
> 
> 赞同：0
> 
> 时间：2013-03-10T05:37:41.393
> 
> 标签：ruby-on-rails, ruby, rake

我在 app/assets/javascripts/ 中创建了一些 js 文件并运行了 `rake assets:precompile`，但是 rails 生成了这个错误。

```
rake aborted!
Unexpected token: operator (>) (line: 14562, col: 9, pos: 545705)

Error<br />
at new JS_Parse_Error (<eval>:1720:22)<br />
at js_error (<eval>:1728:15)<br />
at croak (<eval>:2189:17)<br />
at token_error (<eval>:2196:17)<br />
at unexpected (<eval>:2202:17)<br />
at <eval>:2580:17<br />
at maybe_unary (<eval>:2665:27)<br />
at expr_op (<eval>:2685:45)<br /> 
```

> 在 expr_ops (:2692:24)
> 在maybe_conditional (:2696:28)
> 在maybe_assign (:2720:28)
> 在:2734:28
> 在prog1 (:2768:23)
> (在/home/anybuy/anybuy/app/assets/ javascripts/application.js)
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execj-> > 1.4.0/lib/execjs/ruby_racer_runtime.rb:34:in`rescue in block in eval' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:28:in`块在评估中'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:80:in `block in lock'<br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:78:in`call'
> /home/ anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:78:in `Locker' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:78:in`lock'
> /home/anybuy/.rvm/gems /ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:27:in `eval' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/execjs-> 1.4.0/lib/execjs/ruby_racer_runtime.rb:19:in`exec'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/uglifier-1.3.0/lib/uglifier.rb:100:in > `compile' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/compressors.rb:74:in`compress'
> /home/anybuy/.rvm/ gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/processing.rb:265:in `block in js_compressor=' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/processor.rb:29:in`call'
> /home/anybuy/.rvm/gems/ruby-1.9。 3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/processor.rb:29:in`evaluate' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/tilt-1.3.3/lib/tilt/template.rb:76:in >`渲染'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2。 8/gems/sprockets-> 2.1.3/lib/sprockets/context.rb:177:in `block in evaluate' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/context.rb:174:in`each'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets- > 2.1.3/lib/sprockets/context.rb:174:in`evaluate' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/bundled_asset.rb:26:in`初始化'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib /sprockets/base.rb:244：在`new'<br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:244:in`build_asset'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/index.rb:89:in `block in build_asset' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/caching.rb:19:in`cache_asset'
> /home/anybuy/。 rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/index.rb:88:in `build_asset' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:163:in`find_asset'
> /home/anybuy/.rvm/gems/ruby- 1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/index.rb:56:in `find_asset' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/static_compiler.rb:23:in`block in compile'
> /home/anybuy/.rvm/gems/ruby-1.9.3- p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:200:in`block (2 levels) in each_file'
> /home/anybuy/.rvm/gems/ruby-1.9.3- p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:190:in `each' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:190:in`each_entry'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/宝石/链轮-> 2.1.3/lib/sprockets/base.rb:198：在`block in each_file' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:197:in`每个'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:197:in `each_file' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/sprockets-> 2.1.3/lib/sprockets/base.rb:210:in`each_logical_path'
> /home/anybuy /.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/static_compiler.rb:18:in `compile' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/assets.rake:56:in`internal_precompile'
> /home/anybuy/.rvm/gems/ ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/assets.rake:60:in`block (3 levels) in '
> Tasks: TOP => assets:precompile:primary
> (通过使用 --trace 运行任务查看完整跟踪）
> rake aborted！
> 命令失败，状态为 (1)：[/home/anybuy/.rvm/rubies/ruby-1.9.3-p392/b...]
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@ 3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/assets.rake：`ruby_rake_task' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/assets.rake:21:in`invoke_or_reboot_rake_task'
> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/gems/actionpack-> 3.2.8/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>' <br /> /home/anybuy/.rvm/gems/ruby-1.9.3-p392@3.2.8/bin/ruby_noexec_wrapper:14:in`eval'
> /home/anybuy /.rvm/gems/ruby-1.9.3-p392@3.2.8/bin/ruby_noexec_wrapper:14:in `'
> Tasks: TOP => assets:precompile
> （通过使用 --trace 运行任务查看完整跟踪）

这是我的 app/assets/javascripts/application.js

> // 这是一个清单文件，它将被编译成 application.js，其中将包含下面列出的所有文件。
> // // 此目录中的任何 JavaScript/Coffee 文件、lib/assets/javascripts、>vendor/assets/javascripts、// 或插件的 vendor/assets/javascripts，如果有的话，都可以在此处使用相对 >path 进行引用。
> // // 不建议直接在此处添加代码，但如果这样做，它将出现在
> // 编译文件的底部 >。
> // //警告：第一个空白行标志着要处理的内容的结束，任何空白行都应该
> // 遵循以下要求。
> // //= 需要 jquery
> //= 需要 jquery_ujs
> //= 需要 jquery.ui.all
> //= 需要 twitter/bootstrap
> //= 需要 twitter/bootstrap/bootstrap-transition
> //= 需要 twitter/bootstrap/bootstrap-alert
> //= 需要 twitter/bootstrap/bootstrap-modal
> //= 需要 twitter/bootstrap/bootstrap-按钮
> //= 需要 twitter/bootstrap/bootstrap-collapse
> //= require_tree 。

# php - SQL 不会返回值

> ID：15319304
> 
> 赞同：1
> 
> 时间：2013-03-10T05:37:46.957
> 
> 标签：php, mysql, sql

让我首先开始说**我的 SQL 是正确的，并多次检查它**。

我的文件中有 2 个方法多次调用 SQL，但是当涉及到第二部分时，它不会返回任何值来填写字段。

这是给我问题的部分：

```
$query = mysql_query("SELECT * FROM MegaFilter WHERE Parent = '".$ThisPage."' ");
while($query2 = mysql_fetch_assoc($query)) {
    $SubID = $query2['Filter'];
    $query3 = mysql_query("SELECT * FROM SubCategories WHERE ID = '".$SubID."' ");
    while($query4 = mysql_fetch_assoc($query3)) {
        $SubCatID = $query4['ID'];
        $query5 = mysql_query("SELECT * FROM Web_Pages WHERE SubCat = '".$SubCatID."' ");
    }
    while($query6 = mysql_fetch_assoc($query5)) {
        $ProductName = $query6['Title'];
        $ProductID = $query6['ID'];
    }
    echo '<li class="item" data-id="id-'.$Productid.'" data-type="'.$SubID.'">'.$Productname.'</li>';
} 
```

除了没有定义最后 2 个变量外，它不会记录任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:41:45.233

[变量名](http://php.net/manual/en/language.variables.basics.php)在 php 中区分大小写。您正在分配值`$ProductName`，`$ProductID`但您正在使用`$Productid`（小写 i）和`$Productname`（小写 n）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:00:53.093

1.  不应再使用 mysql_ 库 - 它们已被弃用。
2.  您的牙套到处都是（如果我了解您想要达到的目标，请参见下文）。
3.  PHP 变量区分大小写。

我认为您需要的代码是（只需要一个 select 语句）：

```
$connection = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
$stmt = $connection -> mysqli_prepare('SELECT m.Filter AS SubID, w.Title AS ProductName, w.ID AS ProductID FROM MegaFilter AS m, INNER JOIN SubCategories AS sc ON (sc.ID = m.Filter) INNER JOIN Web_Pages AS w ON (w.SubCat = sc.ID) WHERE Parent = ?');
$stmt->bind_param('s', $ThisPage);
$stmt->bind_result($SubID, $ProductName, $ProductID);
$stmt->execute();
while ($stmt->fetch())
{
    echo '<li class="item" data-id="id-'.$ProductID.'" data-type="'.$SubID.'">'.$ProductName.'</li>'
} 
```

# objective-c - Cocoa 始终以权限运行应用程序

> ID：15319316
> 
> 赞同：0
> 
> 时间：2013-03-10T05:40:46.520
> 
> 标签：objective-c, xcode, macos, cocoa

如何使每次运行我的应用程序时它都以管理员身份运行？例如，当我在 xcode 上运行时，我有`read/write`权限，但是当我双击应用程序运行它时，我只有`read`权限。如何让它始终以`read/write`特权启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:55:43.257

在您的应用程序图标上使用“获取信息”，然后将“管理员”添加为您的应用程序的所有者。像这样：

![以这种方式添加新所有者](../Images/fdecaf81130a551b7f349d6fe0768777.png)

# c# - 如何为 iPhone 和 Android 分辨率调整图像大小？

> ID：15319317
> 
> 赞同：-3
> 
> 时间：2013-03-10T05:41:13.063
> 
> 标签：c#, asp.net-mvc, image-processing

我有一个 ASP.NET MVC 4 Web 应用程序。我有一个控制器，用于上传某些图像文件。图像必须匹配所有 Android 和 iPhone 设备。

此类任务是否有任何预先存在的第三方 dll？除了上传文件操作，我没有编写任何代码。

*   我认为可能会有一些自动的东西，所以不是在网络应用程序中裁剪图像，而是自动完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:03:40.550

调整应用程序本身的图像大小是否重要？否则我会建议[http://www.imagemagick.org/](http://www.imagemagick.org/)，这可能是强大的。但是在网络开发世界中众所周知并且非常受欢迎......

希望我能帮上忙

# jsch - NGit/Nsch 生成 SSH 密钥对 (c# Jgit)

> ID：15319318
> 
> 赞同：0
> 
> 时间：2013-03-10T05:41:13.843
> 
> 标签：jsch, jgit, ngit

我想生成一个用于 Ngit (Jgit) 的新密钥对。

如何通过代码生成新的密钥对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:31:14.737

JGit 有 JSch 作为 dep，看看这个例子[http://www.jcraft.com/jsch/examples/KeyGen.java.html](http://www.jcraft.com/jsch/examples/KeyGen.java.html)

# php - 我怎样才能回显这个值？

> ID：15319321
> 
> 赞同：0
> 
> 时间：2013-03-10T05:42:16.627
> 
> 标签：php

我需要做的就是回显数组口袋$row[0]。

```
while ($row = mysqli_result::fetch_array($result)) {
    echo '<br>' . $row[1];
}
echo $row[0]; 
```

我用谷歌搜索，但结果没有帮助。我知道我错过了一些愚蠢的东西，但我会很感激你的帮助！

我正在尝试回显数据库列“ID”。我要回显的数据示例是“3”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:44:46.327

要调试整行，请编写以下代码：

```
var_dump($row) 
```

要输出 column `ID`，请编写以下代码：

```
while ($row = mysqli_result::fetch_array($result)) {
    var_dump($row); // This will output all values for each row as they're looped through
    echo '<br>' . $row['ID'];
}
var_dump($row); // dumps the last row of the returned results, or false if no rows.
echo $row['ID']; // echos the ID of the last row. However if there are no rows, this will not work. 
```

请注意，正如@Daedalus 指出的那样，`$row`它是一个数组，因此 var_dump 行实际上只是用于调试。因为一个数组有多个值，PHP 不知道你想如何显示它。您需要编程每个元素的`$row`显示方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:49:51.503

边走边复制 $row[0]。

```
$lastZero = "";
while ($row = mysqli_result::fetch_array($result)) {
    echo '<br>' . $row[1];
    $lastZero = $row[0];
}
echo $lastZero; 
```

# windows - 使用 powershell 阻止 IP/域

> ID：15319322
> 
> 赞同：1
> 
> 时间：2013-03-10T05:42:17.913
> 
> 标签：windows

是否可以在 Windows 7 中使用 powershell 阻止 IP 地址和网站？

Hosts 文件对我来说不是一个选项，因为我想阻止 IP 地址，以便 Windows 无法连接到该网站。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:57:29.633

我认为这是不可能的，但我知道您可以使用 Windows 7 中的防火墙来阻止与 IP 地址的传出连接。创建一个传出规则（我认为端口类型将起作用），完成后转到属性并在范围选项卡上输入您要阻止的删除 IP 地址。操作必须设置为“阻止连接”。

您可以阻止所有端口或选定的端口列表。例如，您可以阻止 HTTP 流量的端口 80，同时仍允许其他流量通过。

# css - 带有 CSS 的重复图像标题和整页背景图像 [包含代码]

> ID：15319323
> 
> 赞同：0
> 
> 时间：2013-03-10T05:42:28.040
> 
> 标签：css, header, banner

我的网页使用整页拉伸背景图像。我的问题是背景图像似乎覆盖了我试图以重复背景图像的形式添加的顶部 10px 横幅/标题（所以我可以使用 CSS 不透明度）。这是完整的页面：

```
<html><head>
<style type="text/css" media=screen>

body{
    margin: 0px;
    color: #000;
    font-family: helvetica, times;
    font-size: 14px;
}

#bg {
  position: fixed; 
  top: 0; 
  left: 0; 

  /* Preserve aspet ratio */
  min-width: 100%;
  min-height: 100%;
}

#banner{
  background: url('images/banner2.gif');
  background-repeat: repeat-x;
  top: 0;
  left: 0;
  width: 100%;
  padding:50px;
  text-align: center;
}

</style></head>

<body>

<img src="images/background.jpg" id="bg">

<div id="banner">
Banner Test Text
</div>

</body>
</html> 
```

我尝试添加 z-index 但没有解决方案。非常感谢我做错的任何输入。请注意，整页背景图像的这种实现是我用我的图像实现的最好的，所以如果有一个解决方案来适应它，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:50:42.550

啊，自己设法弄到了。对于任何未来的读者，我需要做的就是添加

```
position:absolute; 
```

到#banner 代码。

# azure - Azure 服务总线丢弃消息？

> ID：15319327
> 
> 赞同：3
> 
> 时间：2013-03-10T05:43:02.157
> 
> 标签：azure, azureservicebus

我正在尝试在 Azure 中构建一个简单的 Web API REST 服务，并在后端使用服务总线队列工作程序。我可以很好地从 Web API 向工作人员发送一条消息。但是，我试图发送更多消息只是为了看看一切如何运作。所以，我创建了一个简单的控制器，如下所示：

```
for (int i = 0; i < 100; i++)
{
    var msg = new BrokeredMessage("Ping");
    BioConnector.QueueConnector.OrdersQueueClient.Send(msg);
} 
```

当我调用控制器时，我只收到大约 1/2 左右的工人收到的消息。其余的似乎被丢弃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:34:59.980

[使用此处](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/ "这里")发布的示例代码，我无法获得大约一半的消息，因此我编写了自己的测试代码。我已经尝试过超过 100 条队列消息，并且始终有 100% 的发送/接收奇偶校验。也许您对代码有类似的问题。

1.  创建一个新的 C# 控制台项目。
2.  添加对位于*C:\Program Files\Microsoft SDKs\Windows Azure.NET SDK\2012-06\ref\Microsoft.ServiceBus.dll*中的 Microsoft.ServiceBus 程序集的引用。
3.  在 app.config 中，使用您自己提供的值将其更改为：

    ```
    <appSettings>
        <add key="Microsoft.ServiceBus.ConnectionString" value="Endpoint=sb://blahblah.servicebus.windows.net/;SharedSecretIssuer=owner;SharedSecretValue=pDk0b....=" />
    </appSettings> 
    ```

4.  添加这些 using 指令：

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Xml;
    using System.Xml.Linq;
    using Microsoft.ServiceBus;
    using Microsoft.ServiceBus.Messaging;
    using System.Configuration;
    using System.Threading; 
    ```

5.  将代码方法更改为以下内容：

    ```
    class Program
    {
        static void Main(string[] args)
        {
            string connectionString = ConfigurationSettings.AppSettings["Microsoft.ServiceBus.ConnectionString"];
            var namespaceManager = NamespaceManager.CreateFromConnectionString(connectionString);
            QueueDescription queueDesc = new QueueDescription("TestQueue");
            if (!namespaceManager.QueueExists(queueDesc.Path))
            {
                namespaceManager.CreateQueue(queueDesc);
            }
            QueueClient topicClient = QueueClient.CreateFromConnectionString(connectionString, queueDesc.Path);
            int sentMsgCount = 0;
            int recdMsgCount = 0;

            for (int i = 0; i < 100; i++)
            {
                BrokeredMessage msg = new BrokeredMessage("Test message " + i);
                topicClient.Send(msg);
                sentMsgCount++;
                Console.WriteLine("Sent Message: " + msg);
            }

            QueueClient subClient = QueueClient.CreateFromConnectionString(connectionString, queueDesc.Path);

            bool moreMessages = true;
            while (moreMessages)
            {
                BrokeredMessage recdMsg = subClient.Receive(TimeSpan.FromSeconds(3));
                if (recdMsg != null)
                {
                    Console.WriteLine("Received Message: " + recdMsg);
                    recdMsgCount++;
                    recdMsg.Complete();
                }
                else
                {
                    moreMessages = false;
                }
            }
            Console.WriteLine("# of sent msgs: " + sentMsgCount + ", # of rec'd msgs: " + recdMsgCount);
            Console.Read();
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T18:11:41.393

Azure 服务总线提供持久消息传递，因此您不会丢失任何消息。需要进一步调查的一些项目：1）是否有另一个工作角色实例正在从该队列中提取消息 2）您是否使用 peek-lock 作为接收模式，因为这将是保证至少一次交付的唯一方法。接收和删除模式没有保证 3) 消息是否由于消息过期或超过最大传递计数而进入死信队列，即它们被接收但未完成多次 4) 如果上述均不适用，则引发支持票证和 Azure 产品团队可以调查这些症状，因为正如我所提到的，这是一个持久的消息传递系统，因此不会“丢失”任何消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T17:11:27.833

这是一个奇怪的问题。通过随机浏览“尝试的东西”，我最终更改了队列的字符串名称，然后一切都重新开始工作。除了队列的名称之外，我没有更改任何内容 - 根本没有更改任何配置参数。

Azure 上的特定队列似乎有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-29T10:23:25.517

我的项目中有[WindowsAzure.ServiceBus NuGet 包](https://www.nuget.org/packages/WindowsAzure.ServiceBus/)，用于`QueueClient.Send()`发送消息并面临相同的消息丢失问题。

我完全解决问题的解决方案：

在发送端，我不得不[使用 REST API 来发送消息](https://github.com/Huachao/azure-content/blob/master/articles/service-bus/service-bus-brokered-tutorial-rest.md)。

在接收端，这就是我提取消息正文的方式：

```
using (var stream = brokeredMessage.GetBody<Stream>())
{
    using (var streamReader = new StreamReader(stream, Encoding.UTF8))
    {
        var msg = streamReader.ReadToEnd();
        // Convert the JSON message to an object
        // var obj = JsonConvert.DeserializeObject<ObjectType>(msg);
    }
} 
```

# html - 从 C 中的 html 文件中提取纯文本

> ID：15319329
> 
> 赞同：0
> 
> 时间：2013-03-10T05:43:25.417
> 
> 标签：html, c, function

我真的很绝望。我需要提取所有 html 元素，包括 html 标签。我只想保留纯文本。我需要在 C 中执行此操作。我不鼓励使用 Regex。如果我使用字符串函数，它只会删除 delimiters ，而不是里面的字符串。我需要创建一个从 html 文件中提取纯文本的程序。任何指南都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:54:06.830

这是您的起点：

```
void remove_html(char* str) {
    char* html_str = str;
    while(*str) {
        if(*html_str == '<')
            while(*html_str && *html_str++ != '>');
        *str++ = *html_str++; 
    }
}

int main() {
  char foo[] = "hello <p>friends<b>!</b></p>";
  remove_html(foo);
  puts(foo);
} 
```

它只剥离了角度语法 - 不进行任何解析。此外，它不会转换转义字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:53:28.327

如果你在记事本中打开一个 html 文件，你会发现它是纯文本（没有图像或任何东西）。所有标签都以 < 开头并以 > 结尾，其他都是文本。这样，您可以只读取一次文件，不包括出现在 < > 符号之间的字符。

伪代码：

```
bool intag=false;
for (i=0;i<filesize;i++) {
    char c = readchar();
    if (c=='<') intag=true;
    if (!intag) writechar(c);
    if (c=='>') intag=false; 
```

这个逻辑应该适用于大多数情况，尽管您可能需要做更多的工作来处理缩进文本以及页面上可能的任何 javascript。

# c# - 远程服务器返回错误：（550）文件不可用（例如，找不到文件，无法访问）

> ID：15319330
> 
> 赞同：3
> 
> 时间：2013-03-10T05:43:54.447
> 
> 标签：c#, wpf

我想从 ftp 服务器下载图像，但是当我转到“FtpWebResponse”时，我只是得到了这个异常作为标题。

下面是我的下载功能

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(myStringWebSource);
request.Method = WebRequestMethods.Ftp.DownloadFile;
request.Credentials = new NetworkCredential(this.FtpUserID, this.FtpPassword);
FtpWebResponse response = (FtpWebResponse)request.GetResponse();
System.IO.Stream responseStream = response.GetResponseStream();
System.IO.StreamReader reader = new System.IO.StreamReader(responseStream);
System.IO.StreamWriter writer = new System.IO.StreamWriter(SaveFile);
writer.Write(reader.ReadToEnd());

writer.Close();
reader.Close();
response.Close(); 
```

我用谷歌搜索了这个异常几天，但我仍然无法弄清楚为什么会出错。如果没有足够的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:18:48.490

当您要下载的文件正在被另一个进程使用时，您将收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T21:58:05.240

为了解决这个问题，需要强制 System.Net.FtpWebRequest 命令恢复到它在 .Net Framework 2.0/3.5 中的旧行为，并在发出实际命令之前发出额外的 CWD 命令.

为此，需要在调用 System.Net.FtpWebRequest 类的任何实例之前放置以下代码。下面的代码只需要调用一次，因为它改变了整个应用程序域的设置。

```
private static void SetMethodRequiresCWD()
{
    Type requestType = typeof(FtpWebRequest);
    FieldInfo methodInfoField = requestType.GetField("m_MethodInfo", BindingFlags.NonPublic | BindingFlags.Instance);
    Type methodInfoType = methodInfoField.FieldType;

    FieldInfo knownMethodsField = methodInfoType.GetField("KnownMethodInfo", BindingFlags.Static | BindingFlags.NonPublic);
    Array knownMethodsArray = (Array)knownMethodsField.GetValue(null);

    FieldInfo flagsField = methodInfoType.GetField("Flags", BindingFlags.NonPublic | BindingFlags.Instance);

    int MustChangeWorkingDirectoryToPath = 0x100;
    foreach (object knownMethod in knownMethodsArray)
    {
        int flags = (int)flagsField.GetValue(knownMethod);
        flags |= MustChangeWorkingDirectoryToPath;
        flagsField.SetValue(knownMethod, flags);
    }
} 
```

[http://support.microsoft.com/kb/2134299](http://support.microsoft.com/kb/2134299)

# python - 无法运行 Popen.communicate() 两次。（Python子进程模块）

> ID：15319340
> 
> 赞同：3
> 
> 时间：2013-03-10T05:45:46.007
> 
> 标签：python, subprocess, popen

如果我运行通信功能两次，谁能解释为什么会出现此错误？

例如

```
from subprocess import *
SVN=Popen('which svn', shell=True, stdout=PIPE)
print SVN.communicate()[0] 
```

返回

```
"/usr/bin/svn" 
```

但运行再次通信......

```
print SVN.communicate()[0] 
```

返回...

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py",     line 746, in communicate
stdout = _eintr_retry_call(self.stdout.read)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 478, in _eintr_retry_call
return func(*args)
ValueError: I/O operation on closed file 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T05:49:14.290

因为实际上是被调用程序的标准输出的“文件”已经被关闭了。这意味着您已经阅读了上一个中的所有输出`communicate()`，因此再次调用它永远不会产生任何结果。

# jquery - 从 HTML (jQuery map/get) 动态地为幻灯片提供图像

> ID：15319356
> 
> 赞同：0
> 
> 时间：2013-03-10T05:49:09.953
> 
> 标签：jquery, image, map, slideshow, jquery-backstretch

我正在为我的背景幻灯片使用很棒的插件[jQuery BackStretch 。](http://srobbin.com/jquery-plugins/backstretch/)这是如何将图像传递给它的常用方法。

```
$.backstretch([
    "http://dl.dropbox.com/u/515046/www/outside.jpg", 
    "http://dl.dropbox.com/u/515046/www/garfield-interior.jpg", 
    "http://dl.dropbox.com/u/515046/www/cheers.jpg"
], {duration: 3000, fade: 750}); 
```

不过，我不想通过硬编码为其提供图像，我希望该函数能够获取我的 PHP 在该容器中生成的内容。这是我到目前为止所拥有的。

```
var images = $('#background img').map(function() { return this.src; }).get();
$.backstretch([$images], {duration: 3000, fade: 750}); 
```

显然，这不起作用 - 根据 FireBug，未定义可变图像 (?) 。尽管如果我“警告”该变量，它会显示以逗号分隔的图像 url。

知道我在做什么错吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:23:40.063

这应该足够了。`backstretch`期望第一个参数是引用图像的字符串数组。

```
$(document).ready(function () {
    var images = [];

    // iterate over your selection
    $('#background img').each(function () {
        // save source to list
        images.push(this.src);
    });

    // use plugin
    $.backstretch(images, {duration: 3000, fade: 750});
}); 
```

另外我假设你的 HTML 是这样的......

```
<div id="background">
    <img src="http://dl.dropbox.com/u/515046/www/outside.jpg" />
    <img src="http://dl.dropbox.com/u/515046/www/garfield-interior.jpg" />
</div> 
```

# javascript - JavaScript 是否在这里关闭解决方案，如何使用它？

> ID：15319367
> 
> 赞同：0
> 
> 时间：2013-03-10T05:51:00.263
> 
> 标签：javascript, jquery, function, google-maps, closures

我已经实现了谷歌地图并且我得到了纬度和经度，我希望在谷歌地图功能之外使用这些值。只有当我在谷歌地图代码中调用这些变量时，我才能将它们添加到 DOM。我如何在谷歌地图功能之外使用这些变量。

单击地图时，我需要将这些纬度和经度值作为查询字符串附加到 URL。

我不确定闭包是如何工作的。有人可以帮我将这些纬度和经度值添加到谷歌地图 initilaize() 函数之外的查询字符串中。

以下是我的代码；

```
<script>
function initialize() {
  var mapOptions = {
    center: new google.maps.LatLng(44.397, -122.644),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(44.397, -122.644),
    map: map,
    draggable: true
  });
  google.maps.event.addListener(map, 'mousemove', function ques(event) {
    var lat_value = event.latLng.lat();
    var lon_value = event.latLng.lng();
    document.getElementById("llat").value = lat_value;
    document.getElementById("llon").value = lon_value;
  });
  google.maps.event.addListener(map, 'click', function cclick() {
  })
}
</script>
<script>
$(function () {
  // Access functions and variables defined in google maps initialize() function here
  if(document.location.href.indexOf('?') == -1) {
    window.location = window.location + "?lat_value";
  }
});
</script> 
```

[**小提琴**](http://jsfiddle.net/VzF4Q/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:05:43.517

你不需要在这里使用 JS 闭包。您甚至不需要在该`initialize`方法的范围之外编写处理程序。只需按照与处理程序相同的方式进行操作`mousemove`即可：

```
google.maps.event.addListener(map, 'click', function (e) {
    var lat_value = e.latLng.lat();
    var lon_value = e.latLng.lng();
    window.location = window.location.href.split('?')[0] 
      + "?lat_value=" + lat_value
      + "&long_value=" + lon_value;
}); 
```

一般来说，如果您想在`mapOptions`初始化之外访问您的变量，只需在外部范围中定义它（即在`var mapOptions`之前进行声明`function initialize`）。

# asp.net - 无法将视图模型与淘汰赛绑定

> ID：15319369
> 
> 赞同：0
> 
> 时间：2013-03-10T05:51:10.117
> 
> 标签：asp.net, knockout.js

我正在尝试使用 knockout.js 将对象简单地绑定到视图；但是，我已经到了不明白发生了什么的地步……由于某种原因，我的观点没有受到约束。在我的页面上，我有一个包含产品类别列表的下拉列表。更改类别后，我想使用属于所选类别的产品信息填充 html 表。

以下是我正在使用的代码。

HTML：

```
 <asp:DropDownList ID="ddlProductCategory" runat="server" ClientIDMode="Static">
    </asp:DropDownList>
    <div id="divProducts">
        <table width='100%' border="1">
        <thead>
            <tr>
                <th width='25%'>
                    Product ID
                </th>
                <th width='25%'>
                    Product Name
                </th>
                <th width='15%'>
                    Supplier ID
                </th>
                <th width='10%'>
                    Category ID
                </th>
                <th>
                    QuantityPerUnit
                </th>
                <th>
                    UnitPrice                    
                </th>
                <th>
                     UnitsInStock
                </th>
                <th>
                     UnitsOnOrder
                </th>                    
            </tr>
        </thead>
        <tbody data-bind="foreach: Products">
           <tr>
                <td>
                    <span data-bind="text: ProductID"> </span>
                </td>
                <td>
                    <span data-bind="text: ProductName"> </span>
                </td>
                <td>
                    <span data-bind="text: SupplierID"> </span>
                </td>
                <td>
                    <span data-bind="text: CategoryID"> </span>
                </td>
                <td>
                    <span data-bind="text: QuantityPerUnit"> </span>
                </td>
                <td>
                    <span data-bind="text: UnitPrice"> </span>
                </td>
                <td>
                    <span data-bind="text: UnitsInStock"> </span>
                </td>
                <td>
                    <span data-bind="text: UnitsOnOrder"> </span>
                </td>
                <td>
                    <a href='#' data-bind='click: $parent.removeLine'>Remove</a>
                </td>
            </tr>
        </tbody>
    </table>
    </div> 
```

在服务器 .NET JavaScriptSerializer 对象上获取产品对象列表的 json 表示：

```
[WebMethod(EnableSession = true)]
[System.Web.Script.Services.ScriptMethod(ResponseFormat = System.Web.Script.Services.ResponseFormat.Json)]
public object ProcessRequest(string oData)
{
    // Some code to get listOfProducts
    var json = new JavaScriptSerializer().Serialize(listOfProducts);
    return json;
} 
```

这是我的 ViewModel 对象：

```
function ProductsListViewModel (bindingData) {
    var self = this;  

    this.Products = {};

    //////////////////////////////////////////////
    // Load
    /////////////////////////////////////////////
    this.BindViewModel = function (jsonProducts) {
        var _bindingData = jsonProducts;

        if (_bindingData && ObjectTypeChecker.IsJsonObject(_bindingData)) {
            _bindingData = $.parseJSON(_bindingData);
        }

        if (_bindingData && _bindingData.d) {
            _bindingData = eval(_bindingData.d);
        }

        self.Products = _bindingData;
        ko.mapping.fromJS(self.Products, self);
    };

    this.InitialLoad = function()
    {
        var _bindingData = bindingData;

        if (_bindingData && ObjectTypeChecker.IsJsonObject(_bindingData)) {
            _bindingData = $.parseJSON(_bindingData);
        }

        if (_bindingData && _bindingData.d) {
            _bindingData = eval(_bindingData.d);
        }

        self.Products = _bindingData;

        ko.mapping.fromJS(self.Products, {});
    }

    this.InitialLoad();

    ////////////////// STATIC METHODS ////////////////////////////
    ProductsListViewModel.GetCurrentModel = function () {
        return self;
    }
}; 
```

在客户端，在第一次加载时，我使用空值初始化我的视图模型，从服务器获取对象的“元数据”，效果很好：

```
$(document).ready(function () {

    // Call server for metadata
    var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler",   "GetMetadata", ["Products"]);
    var jsonProducts = agent.GetMetadata();

    // Now Load initial state for viewmodel
    LoadModels();
});

// Load metadata for all viewmodels
function LoadModels() {
    var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler",  "GetMetadata", ["Products"]);
    var jsonProducts = agent.GetMetadata();

    // Load ProductListViewModel //////////////////////////////////
    myProductsViewModel = new ProductsListViewModel(jsonProducts);
    ko.applyBindings(myProductsViewModel);
    ///////////////////////////////////////////////////////////////

} 
```

之后，每当下拉列表中的值发生更改时，我都会调用 JQuery.ajax 方法来获取产品信息，并尝试将返回的数据绑定到视图：

```
 // Event Handler for Categories Drpdown
 function onCategoryChange(event) {
    // get data
    var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler",  event.type, event.eventArgs);
    var jsonProducts = agent.GetProductsByCategory(event.eventArgs);

    // jsonProducts is a list of products in json format:
    // {"d":"  [{\"ProductID\":1,\"ProductName\":\"Chai\",\"SupplierID\":1,\"CategoryID \":1,\"QuantityPerU nit\":\"10 boxes x 20 bags\",\"UnitPrice\":18.0000,\"UnitsInStock\":39,\"UnitsOnOrder\":0},
//        {\"ProductID\":2,\"ProductName\":\"Chang\",\"SupplierID\":1,\"CategoryID\":1,\"QuantityPerUnit\":\"24 - 12 oz bottles\",\"UnitPrice\":19.0000,\"UnitsInStock\":17,\"UnitsOnOrder\":40}]"}

    // Re-bind view
    BindView(jsonProducts);
}

function BindView(jsonProducts) {
    ProductsListViewModel.GetCurrentModel().BindViewModel(jsonProducts);
} 
```

请帮忙！

* * *

这是对我之前帖子的更新。我发现以下工作正常：

```
var myProductsViewModel = null;

$(document).ready(function () {
    // Load all models
    LoadModels();
});

function onCategoryChange(event) {
     var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler", event.type, event.eventArgs);
     var jsonProducts = agent.GetProductsByCategory(event.eventArgs);
     BindView(jsonProducts);
}

function LoadModels() {
     var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler", "GetMetadata", ["Products"]);
     var jsonProducts = agent.GetMetadata();

     // Load ProductListViewModel //////////////////////////////////
     ///////////////////////////////////////////////////////////////
     if (jsonProducts && ObjectTypeChecker.IsJsonObject(jsonProducts)) {
        bbbData = $.parseJSON(jsonProducts);
     }

     if (bbbData && bbbData.d) {
         list = eval(bbbData.d);
     }

     this.Products = list;
     myProductsViewModel = ko.mapping.fromJS(this.Products, {});
     ko.applyBindings(myProductsViewModel);

 }

 function BindView(jsonProducts) {

      if (jsonProducts && ObjectTypeChecker.IsJsonObject(jsonProducts)) {
         zzzz = $.parseJSON(jsonProducts);
      }
      if (zzzz && zzzz.d) {
         lllll = eval(zzzz.d);
      }
      this.Products = lllll;
      ko.mapping.fromJS(this.Products, myProductsViewModel);
 } 
```

但这不起作用：

* * *

```
 $(document).ready(function () {
     // Load all models
     LoadModels();
 });

 function onCategoryChange(event) {
     var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler", event.type, event.eventArgs);
    var jsonProducts = agent.GetProductsByCategory(event.eventArgs);
    BindView(jsonProducts);
 }

 function LoadModels() {
      var agent = new WtrStpJsAgent("WtrStpWireHandler", "NorthwindActionHandler", "GetMetadata", ["Products"]);
      var jsonProducts = agent.GetMetadata();

  // Load ProductListViewModel //////////////////////////////////
      myProductsViewModel = new ProductsListViewModel(jsonProducts);
      ko.applyBindings(myProductsViewModel);
 }

 function BindView(jsonProducts) {
      ProductsListViewModel.GetCurrentModel().BindViewModel(jsonProducts);        
 } 
```

但是我仍然想保持代码更细化，所以我喜欢在后一个解决方案中描述的 JS 对象......因此，知道为什么它不起作用吗？？？？

仍然需要帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:56:11.133

如果您使用 KnockoutJS 并希望 UI 在 var 更改时更新，您需要使它们可观察。

```
function ProductsListViewModel (bindingData) {
var self = this;  

this.Products = ko.observableArray();

//////////////////////////////////////////////
// Load
/////////////////////////////////////////////
this.BindViewModel = function (jsonProducts) {
    var _bindingData = jsonProducts;

    if (_bindingData && ObjectTypeChecker.IsJsonObject(_bindingData)) {
        _bindingData = $.parseJSON(_bindingData);
    }

    if (_bindingData && _bindingData.d) {
        _bindingData = eval(_bindingData.d);
    }

    self.Products(_bindingData);
    ko.mapping.fromJS(self.Products, self);
  }; 
```

也看看[http://knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)

# c# - 如何使用 ItextSharp 将二进制图像从数据库添加到 Pdf

> ID：15319374
> 
> 赞同：-1
> 
> 时间：2013-03-10T05:51:56.557
> 
> 标签：c#, itextsharp

我在使用 iTextSharp 组件的报告中工作。它对我很好......现在我需要生成报告，其中有一些发票作为二进制保存在数据库中，第一页将是我制作的报告，但是当我生成报告时，我想添加发票到下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:10:13.243

我不是在编写整个代码，但会给你一个要做什么的概述。

我想发票是存储在数据库中的图像。

从数据库中以二进制对象获取图像。

要以二进制形式获取图像，请使用：

```
byte[] raw = (byte[])ds.Tables.Rows[i]["TiffImage"];//where ds is the dataset 
//in which you are getting your data and i is the ith row 
```

现在将此字节流传递给 itextsharp 图像对象并将其添加到文档中。参考： http: [//www.nerdyhearn.com/blog/176/](http://www.nerdyhearn.com/blog/176/)

您还可以设置图像的高度和宽度以适合一页。

# javascript - 弹出窗口不起作用

> ID：15319375
> 
> 赞同：0
> 
> 时间：2013-03-10T05:52:23.073
> 
> 标签：javascript, jquery, html

我试图在“弹出”按钮被按下时弹出一个窗口，作为我学校 Javascript 作业的一部分，但无法弄清楚为什么我的代码不起作用。我已将弹出按钮分配给 jQuery 选择器，但它仍然无法打开。

```
<html>
<head>
<title>Adam Ginther's Pop-up Window</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="panel">
Congrats! You won!
</div>
<div id="centreblock">
<h1>WOW! AMAZING!!!</h1>
<img src="images/ipad.gif" width="100%" height="250">
<p>Congratulations! You won a free iPad! Enter your name, address, and phone number to have it delivered now.
<form action="">
<br>
<label for="firstName">First Name: </label>
<input type="text" size="12" id="firstName" name="firstName">
<br>
<br>
<label for ="lastName">Last Name: </label>
<input type="text" size"12" id="lastName" name="lastName">
<br>
<br>
<label for="address">Address: </label>
<input type="text" size="12" id="address" name="address">
<br>
<br>
<label for="phoneNum">Phone Number: </label>
<input type="text" size="12" id="phoneNum" name="phoneNum">
</form>
<br>
<a href="#" id="popup"><br>REDEEM THIS SPECTACULAR OFFER NOW!</a>
<br>
</div>
<script src="http//code.jquery.com/jquery-latest.min.js"></script>
<script src="js/script.js"></script>
</body>
</html>

//script.js
var new_win;
var firstName;
var lastName;
var address;
var phoneNumber;

function newWindow() { 
    firstName = $('#firstName').val();
    if (firstName !='') {
    window.open('popup.html');
    } else {
        $('#firstName').addClass('error');
    };
    $(function() {
        $('#popup').click(function() {
            newWindow();
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:06:40.423

试试这个：

```
<html>
<head>
<title>Adam Ginther's Pop-up Window</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="js/script.js"></script>
<script language="javascript">

//script.js
var new_win;
var firstName;
var lastName;
var address;
var phoneNumber;

function popitup(url) {
    newwindow=window.open(url,'name','height=200,width=150');
    if (window.focus) {newwindow.focus()}
    return false;
}

function newWindow() { 
    firstName = $('#firstName').val();
    if (firstName !='') {
    popitup('popup.html');
    } else {
        $('#firstName').addClass('error');
    };
};

    $(document).ready(function(){
        $('#popup').click(function() {
            newWindow();
        });
    });
</script>
</head>
<body>
<div id="panel">
Congrats! You won!
</div>
<div id="centreblock">
<h1>WOW! AMAZING!!!</h1>
<img src="images/ipad.gif" width="100%" height="250">
<p>Congratulations! You won a free iPad! Enter your name, address, and phone number to have it delivered now.
<form action="">
<br>
<label for="firstName">First Name: </label>
<input type="text" size="12" id="firstName" name="firstName">
<br>
<br>
<label for ="lastName">Last Name: </label>
<input type="text" size"12" id="lastName" name="lastName">
<br>
<br>
<label for="address">Address: </label>
<input type="text" size="12" id="address" name="address">
<br>
<br>
<label for="phoneNum">Phone Number: </label>
<input type="text" size="12" id="phoneNum" name="phoneNum">
</form>
<br>
<a href="javascript:void(0)" id="popup"><br>REDEEM THIS SPECTACULAR OFFER NOW!</a>
<br>
</div>
</body>
</html> 
```

请注意：

*   jquery 版本已过时
*   javascript函数中进行了一些更改

我希望这可能会有所帮助。您可以根据您的流程和要求进行编辑。

# ios - 无法更改 UIImagePickerController 的 cameraFlashMode

> ID：15319378
> 
> 赞同：5
> 
> 时间：2013-03-10T05:52:43.387
> 
> 标签：ios, camera, uiimagepickercontroller

我的自定义相机覆盖上有一个按钮，可以调用此方法：

```
- (void) changeFlash:(id)sender
{
    //UIImagePickerControllerCameraFlashModeOff  = -1,
    //UIImagePickerControllerCameraFlashModeAuto = 0,
    //UIImagePickerControllerCameraFlashModeOn   = 1
    NSLog(@"before %d", self.picker.cameraFlashMode);
    switch (self.picker.cameraFlashMode) {
        case UIImagePickerControllerCameraFlashModeAuto:
            [(UIButton *)sender setImage:[UIImage imageNamed:@"flashOn"] forState:UIControlStateNormal];
            self.picker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOn;
            break;
        case UIImagePickerControllerCameraFlashModeOn:
            [(UIButton *)sender setImage:[UIImage imageNamed:@"flashOff"] forState:UIControlStateNormal];
            self.picker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff;
            break;

        case UIImagePickerControllerCameraFlashModeOff:
            [(UIButton *)sender setImage:[UIImage imageNamed:@"flashAuto"] forState:UIControlStateNormal];
            self.picker.cameraFlashMode = UIImagePickerControllerCameraFlashModeAuto;
            break;
    }
    NSLog(@"after %d", self.picker.cameraFlashMode);

} 
```

self.picker.cameraFlashMode 在更改前后始终为 0。我究竟做错了什么？

此外，闪光灯从不工作，即使它据说卡在 UIImagePickerControllerCameraFlashModeAuto 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:46:43.283

self.picker 为零。这是一个常见的错误，您需要经常检查，因为与 Java 和其他语言不同，在 Objective-C 中向 nil 发送消息是有效的。

# xcode4.6 - 在 NSString 对象中得到奇怪的汉字

> ID：15319380
> 
> 赞同：1
> 
> 时间：2013-03-10T05:52:59.980
> 
> 标签：xcode4.6

当我有以下代码时：

```
NSString *shape = @"▲";
int _length = 3;

setCardContents = [shape stringByPaddingToLength:_length withString:shape startingAtIndex:0]; 
```

当我在上面的最后一行之后放置一个断点然后检查值 setCardContents 时，我在文本的末尾得到了一些奇怪的字符。

从调试： ![调试的屏幕截图](../Images/68c67bd4a8aa77d2c4194246f8e8ef00.png)

# django - 同时循环表单集和列表中的表单+ FileField 需要错误：django

> ID：15319387
> 
> 赞同：0
> 
> 时间：2013-03-10T05:54:31.573
> 
> 标签：django, django-forms, django-templates, django-views

我有一个表单集，我在视图中对其进行了初始化。表单的字段之一是 FileField。我必须向用户显示他/她以前的文件名的名称。因为我无法初始化 FileField，所以我想在列表中发送文件名。（我的意思是，例如当你有一个 Charfield 时，你可以在视图中初始化它，当你渲染到模板时，你会看到一个填充了该数据的输入，但是当你有文件上传字段时，你不能在视图中填充它并且发送到模板）。我不知道如何同时循环表单集和列表中的表单。另一件事是当我在表单集中初始化表单并渲染到模板时（我的意思是例如写`data['form-0-Team']='team1'`但我不能写`data['form-0-Team']='a.png'`，所以当我渲染到模板时，我看到名为“团队”的字段已填充（值 = team1）并且名为“文件”的字段未填充，并且显示错误“需要此字段”ID。) 虽然这是我第一次访问此页面并且我的方法不是 POST。（通常，当用户单击提交时会显示表单错误，并在视图中检查 request.method == 'POST'，然后检查 form.is_valid 是否返回模板并显示错误，但在我的情况下，它会在euser 第一次访问该页面并且在他/她发布数据之前）。我希望我能说出我的问题。你能指导我解决这个问题吗？真的谢谢。

```
def myFunc(request):
    flagFormSet = formset_factory(FlagFileBaseForm)
    if request.method == 'POST':
        formset = flagFormSet(request.POST, request.FILES)
        if formset.is_valid():
          # do s.th
    else:
         data = {
                    'form-TOTAL_FORMS': 5,
                    'form-INITIAL_FORMS': u'0',
                    'form-MAX_NUM_FORMS': u'',
                    # add initial form data to it
                }
         list=['a.png', 'b.png', 'c.png', 'd.png' , 'f.png']

         formset = flagFormSet(data)
    return render_to_response('myPage.html', RequestContext(request, { 'formset': formset, 'list':list})) 
```

和我的模板：

```
<form method="post" action="" enctype="multipart/form-data">
{{ formset.management_form }}
    {% for form in formset.forms %}
        <div class="form">
           <div class="form-row Team">
              <div>
                <label class="required" for="id_Team">Team:</label>
                    {{ form.Team }}
                    {{ form.Team.errors }}
              </div>
           </div>                           
           <div class="form-row File">
               <div>
                  <label class="required" for="id_File">File:</label>
                       {{ form.File }}
                       {{ form.File.errors }}
               </div>

    #here i want show the name of previous file

           </div>
        </div>
    {% endfor %}
</form> 
```

编辑：当前结果（虽然请求未发布，但显示错误） ![在此处输入图像描述](../Images/372cd983fcbcb7dce3cf4d8116e11652.png)

期望的结果（文件名没有错误的表格） ![在此处输入图像描述](../Images/f42c0a8bd7b70a2a9064f20a6774a693.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:14:44.150

在 Django 模板中，如果您尝试呈现具有 FileField 的表单。你必须通过替换

```
<form method="post" action=""> 
```

和

```
<form method="POST" enctype="multipart/form-data"> 
```

[https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files-to-a-form](https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files-to-a-form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:03:48.600

恐怕我不太明白你的问题，如果这没有帮助，请道歉。

如果您的列表是任意的（从您的问题来看），那么您可以使用 django 内置的[forloop 计数器](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#for)来构造您的文件名 -

```
{% for form in formset %}
    {{ form }}
    <input type="text" name="file_name" value="{% forloop.counter %}.png">
{% endfor %} 
```

或者看看 python 的[zip 函数](http://docs.python.org/2/library/functions.html#zip)。您可以使用它来构建一个包含名称和表单的对象，并将其传递给您的模板。

# css - 如何使跨度元素的边距正确工作？

> ID：15319389
> 
> 赞同：2
> 
> 时间：2013-03-10T05:54:56.060
> 
> 标签：css, margin, html

我有一个跨度元素，我想出现在页面的右上角。为此，我使用了`margin-right:10px`. 但它显示没有效果。在哪里`margin-left`工作。为什么是这样？以及如何让span元素出现在页面的右侧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T05:58:13.747

试试这个（[jsFiddle](http://jsfiddle.net/tXVKP/)）

```
.right-corner {
    float:right;
} 
```

或者这个（[jsFiddle](http://jsfiddle.net/PJpyj/)）

```
.right-corner {
    position:absolute:
    top:0;
    right:0;
} 
```

margin-right 不起作用的原因是因为它只是给你的元素一个右边距而不是重新定位它。为了帮助你理解，如果你在你的元素后面加上一些东西，`margin-right`它们之间会有一个间隙，这就是边距。

`margin-left`这样做也是如此，它只是在左侧进行，并且由于元素是从左到右的位置，因此左侧存在间隙，看起来它只是向右移动。

看看[这个小例子](http://jsfiddle.net/GBYg9/)来尝试理解。如果你不明白，你应该阅读[CSS 盒子模型。](http://www.w3.org/TR/CSS2/box.html)

![CSS 盒子模型，来自 www.w3.org/TR/CSS2/box.html](../Images/44082eacd8729c04ba423da9b1783058.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:58:00.273

我认为您正在寻找的是 float:right;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T05:58:21.743

Margin-right 是右边距。

如果你想将它向右对齐，你可以使用 right:10px ，如果位置是绝对的。

否则你可以使用 float:right

您还可以将 display:inline-block 设置为跨度。

您可以了解有关边距的更多信息 [http://phrogz.net/css/htmlvsbody.html](http://phrogz.net/css/htmlvsbody.html) [http://www.htmldog.com/guides/cssbeginner/margins/](http://www.htmldog.com/guides/cssbeginner/margins/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T06:48:17.297

为了完成@Tyriar 的回答，这里有一个小提琴也向您展示了**`text-align: right`**. 以及为什么可以存在边距但没有可观察到的效果。以及如何`clear`在浮动元素和/或浮动元素容器上的 clearfix 之后使用该属性（此处两者都不是必需的）

[http://jsfiddle.net/rLQbk/](http://jsfiddle.net/rLQbk/)

还有一个建议：如果你不是真的（真的）确定你想要实现什么以及如何实现，就不要使用绝对定位；大多数时候它不是解决 CSS 问题的最佳方法。完全脱离流程，其内容将毫无顾忌地显示在其他内容之上......

# c# - 将十六进制转换为浮点数 32

> ID：15319390
> 
> 赞同：0
> 
> 时间：2013-03-10T05:54:58.337
> 
> 标签：c#, floating-point, hex

我有一个十六进制`(42 E6 56 00)`，应该翻译成这个浮点数：`115.2`，当然它是浮点数`32`（我`115.2`使用计算器）。现在我想使用 C# 执行此操作，我使用以下代码，但它给了我奇怪的值：

```
byte[] bytes = BitConverter.GetBytes(0x42E65600);
if (BitConverter.IsLittleEndian) {
    bytes = bytes.Reverse().ToArray();
}
float myFloat = BitConverter.ToSingle(bytes, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:09:40.760

更好的写法：

```
byte[] bytes = new byte[]{ 0x42, 0xE6, 0x56, 0x00 }; // Big endian data
if (BitConverter.IsLittleEndian) {
    Array.Reverse(bytes); // Convert big endian to little endian
}
float myFloat = BitConverter.ToSingle(bytes, 0); 
```

请注意，`BitConverter`使用平台的字节序。

我用[IEEE-754 Analysis](http://babbage.cs.qc.cuny.edu/IEEE-754/)测试过，看来你的源数据*真的*是大端，所以这是正确的写法。

你可能不知道，但`BitConverter.GetBytes(0x42E65600);`会`byte[]{ 0x00, 0x56, 0xE6, 0x42 }`在 little endian 平台上。

* * *

如果您坚持编写十六进制文字，则无需转换字节顺序（因为它始终是正确的，请参阅@George 的评论）

```
byte[] bytes = BitConverter.GetBytes(0x42E65600);
float myFloat = BitConverter.ToSingle(bytes, 0); // Always be correct 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:35:33.937

> 我有一个十六进制 (42 E6 56 00) 应该被翻译成这个浮点数：115.2

如果是这种情况，那么您的数据是大端格式

```
BitConverter.IsLittleEndian 
```

这将确定您的位转换位数是多少，因此您希望条件为

```
if (!BitConverter.IsLittleEndian) 
```

最后，您的字节序转换是错误的。您不想反转整个数组，而是交换各个浮点条目

```
 for (int i = 0; i < data.Length / 2; i++)
        {
            Swap<byte>(ref data[i], ref data[data.Length - i - 1]);
        } 
```

结合所有这些纠正，您的代码应该看起来像

```
 static void Swap<T>(ref T lhs, ref T rhs)
    {
        T temp;
        temp = lhs;
        lhs = rhs;
        rhs = temp;
    }
    static byte[] Big2Little(byte[] data)
    {
        for (int i = 0; i < data.Length / 2; i++)
        {
            Swap<byte>(ref data[i], ref data[data.Length - i - 1]);
        }
        return data;

    }
    static void Main(string[] args)
    {
        byte[] bytes = BitConverter.GetBytes(0x42E65600);
        if (!BitConverter.IsLittleEndian)
        {
            bytes = Big2Little(bytes);
        }
        float myFloat = BitConverter.ToSingle(bytes, 0);
        System.Console.Out.WriteLine(myFloat);
    } 
```

**注意**您可以从[IEEE 分析仪验证您的结果](http://babbage.cs.qc.cuny.edu/IEEE-754/)

# yahoo - 雅虎、谷歌、Yelp API

> ID：15319391
> 
> 赞同：0
> 
> 时间：2013-03-10T05:55:35.770
> 
> 标签：yahoo, yelp

是否有任何 php API 可以通过 Yelp、Google、Insiderpages、Yahoo 的电话号码收集有关企业的信息（地址、评论）。请帮助，我已经对这些进行了研究，但没有得到正确的信息yelp 通过它的电话号码提供信息，但他们在那里询问 ywsid 作为补充（[http://api.yelp.com/phone_search?phone=1234567890&ywsid=XXXXXXXXXXXXXXXX](http://api.yelp.com/phone_search?phone=1234567890&ywsid=XXXXXXXXXXXXXXXX)），但我只想通过电话号码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:40:11.960

请注意，所有 API 都有条款，其中大多数不允许您将其数据存储在自己的数据库中，并且大多数 API 都有显示要求，在进行任何开发之前，请仔细阅读它们的显示要求和条款。
根据您的项目，您可能不允许在项目中使用您可能需要/想要的数据。
另一种选择是报废网站，但大多数网站也有禁止报废的规则......
再次**阅读大量内容**，然后再对您首先被禁止的事情付出太多努力。

**Yelp**
ywsid = API 密钥，如果您使用 yelp API，则需要获取自己的密钥，如果您使用它来将其添加到您自己的数据库或将信息存储在违反其政策[显示要求](http://www.yelp.com/developers/getting_started/display_requirements)和[API的任何地方，请](http://www.yelp.com/developers/getting_started/api_terms)[在此处获取](http://www.yelp.com/developers/getting_started/api_access) [条款](http://www.yelp.com/developers/getting_started/api_terms)。 如果您使用任何 API，您必须在考虑做任何事情之前阅读它们的条款。

**Google 地方信息**
[API](https://developers.google.com/places/documentation/)

**Insiderpages**
我不认为他们有，但您可以使用[citygrid API](http://docs.citygridmedia.com/display/citygridv2/CityGrid+APIs)一次执行 [很多站点] 搜索。

**雅虎**
[雅虎 API](http://developer.yahoo.com/search/local/V3/localSearch.html)

**CityGrid**
正如之前提到[的 citygrid API](http://docs.citygridmedia.com/display/citygridv2/CityGrid+APIs)

**Foursquare**
[四方 API](https://developer.foursquare.com/)

**商圈**
[商圈API](http://api.merchantcircle.com/api/v1/docs)

**白页**
[白页 API](http://developer.whitepages.com/)

**黄页**
[黄页 API](http://developer.yp.com/apis)

底线是，所有这些公司都投入了大量的时间、精力和 **金钱**来建立他们的数据库，他们希望你将人们重定向回他们的页面，这样他们就可以赚回钱/盈利。

# eclipse - 安装更新后 Eclipse Juno 未启动

> ID：15319392
> 
> 赞同：1
> 
> 时间：2013-03-10T05:55:41.730
> 
> 标签：eclipse, ide, eclipse-juno

一切正常，直到我从 Eclipse 中的“检查更新”菜单选项安装了 Eclipse IDE 更新。重新启动时，它没有启动并显示此错误：

![在此处输入图像描述](../Images/0de86aa20a5035996e95be05629e6f83.png)

由于日志太长，我不得不从中间剪掉一部分：

```
!SESSION 2013-03-10 16:31:56.588 -----------------------------------------------
eclipse.buildId=M20130204-1200
java.version=1.7.0_17
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_IN
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product -clean

!ENTRY org.eclipse.equinox.ds 4 0 2013-03-10 16:32:00.720
!MESSAGE [SCR] Exception while activating instance org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager@25eaf052 of component org.eclipse.e4.ui.css.swt.theme  
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.getMethod(ServiceComponent.java:126)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.activate(ServiceComponent.java:213)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.activate(ServiceComponentProp.java:146)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:345)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)
    at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)
    at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)
    at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)
    at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)
    at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 15 more

!ENTRY org.eclipse.equinox.ds 4 0 2013-03-10 16:32:00.730
!MESSAGE [SCR] Exception while activating instance org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager@25eaf052 of component org.eclipse.e4.ui.css.swt.theme  
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.getMethod(ServiceComponent.java:126)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.activate(ServiceComponent.java:213)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.activate(ServiceComponentProp.java:146)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:345)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)
    at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)
    at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)
    at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)
    at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)
    at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 15 more

!ENTRY org.eclipse.osgi 4 0 2013-03-10 16:32:04.800
!MESSAGE An error occurred while automatically activating bundle org.eclipse.ui.workbench (688).
!STACK 0
org.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    ... 37 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 43 more
Root exception:
java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 43 more

!ENTRY org.eclipse.osgi 2 0 2013-03-10 16:32:05.210
!MESSAGE One or more bundles are not resolved because the following root constraints 

!SUBENTRY 2 overlay.com.android.ide.eclipse.adt.overlay 2 0 2013-03-10 16:32:05.480
!MESSAGE Missing required bundle org.eclipse.wst.sse.ui_0.0.0.
!SUBENTRY 2 overlay.com.android.ide.eclipse.adt.overlay 2 0 2013-03-10 16:32:05.480
!MESSAGE Missing required bundle org.eclipse.wst.xml.ui_0.0.0.
!SUBENTRY 2 overlay.com.android.ide.eclipse.adt.overlay 2 0 2013-03-10 16:32:05.480
!MESSAGE Missing required bundle com.android.ide.eclipse.adt_0.0.0.

!ENTRY org.eclipse.osgi 4 0 2013-03-10 16:32:05.490
!MESSAGE Application error
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "org.eclipse.ui.ide.application" was unable to instantiate class "org.eclipse.ui.internal.ide.application.IDEApplication".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:188)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/ui/application/WorkbenchAdvisor
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    ... 16 more
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.ui.workbench (688).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 22 more
Caused by: org.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 31 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    ... 37 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 43 more

!ENTRY org.eclipse.e4.ui.css.swt.theme 4 0 2013-03-10 16:32:05.600
!MESSAGE [SCR] Error while attempting to deactivate instance of component Component[
    name = org.eclipse.e4.ui.css.swt.theme
.
.
]
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.getMethod(ServiceComponent.java:126)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.deactivate(ServiceComponent.java:337)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.deactivate(ServiceComponentProp.java:161)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.dispose(ServiceComponentProp.java:387)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.dispose(ServiceComponentProp.java:102)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:366)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:306)
    at org.eclipse.equinox.internal.ds.Resolver.disposeComponentConfigs(Resolver.java:717)
    at org.eclipse.equinox.internal.ds.Resolver.disableComponents(Resolver.java:693)
    at org.eclipse.equinox.internal.ds.SCRManager.stoppingBundle(SCRManager.java:554)
    at org.eclipse.equinox.internal.ds.SCRManager.bundleChanged(SCRManager.java:233)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1568)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1504)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1499)
    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:506)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)
    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1206)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)
    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:692)
    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 39 more

!ENTRY org.eclipse.e4.ui.css.swt.theme 4 0 2013-03-10 16:32:05.610
!MESSAGE [SCR] Error while attempting to deactivate instance of component Component[
    name = org.eclipse.e4.ui.css.swt.theme
    activate = activate
    deactivate = deactivate
    modified = 
    configuration-policy = optional
    factory = null
    autoenable = true
    immediate = true
    implementation = org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager
    state = Disabled
    properties = 
    serviceFactory = false
    serviceInterface = [org.eclipse.e4.ui.css.swt.theme.IThemeManager]
    references = null
    located in bundle = org.eclipse.e4.ui.css.swt.theme_0.9.4.v20130123-162658 [230]
]
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.getMethod(ServiceComponent.java:126)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.deactivate(ServiceComponent.java:337)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.deactivate(ServiceComponentProp.java:161)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.dispose(ServiceComponentProp.java:387)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.dispose(ServiceComponentProp.java:102)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:366)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:306)
    at org.eclipse.equinox.internal.ds.Resolver.disposeComponentConfigs(Resolver.java:717)
    at org.eclipse.equinox.internal.ds.Resolver.disableComponents(Resolver.java:693)
    at org.eclipse.equinox.internal.ds.SCRManager.stoppingBundle(SCRManager.java:554)
    at org.eclipse.equinox.internal.ds.SCRManager.bundleChanged(SCRManager.java:233)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1568)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1504)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1499)
    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:506)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)
    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1206)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)
    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:692)
    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 39 more 
```

我试过了：-

*   使用 -clean option form 命令启动它
*   [按照Eclipse Juno 启动错误日志文件](https://stackoverflow.com/questions/11810102/eclipse-juno-startup-error-log-file)中的建议删除文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:01:57.867

您使用的是哪个版本的 Java？也许它的版本太旧了？即使某些套件（如 Android）需要 1.6 兼容级别，请确保安装和使用具有最新更新的 1.7。可以肯定的是，删除以前 Java 版本的所有实例。

# animation - 使用 CSS 3 淡入框阴影？

> ID：15319394
> 
> 赞同：2
> 
> 时间：2013-03-10T05:55:55.660
> 
> 标签：animation, css

我有一个脚本，只要用户开始滚动，就会添加一个看起来非常漂亮的框阴影。但是，此框阴影会立即添加。我希望它使用 CSS 3 淡入淡出。我尝试创建关键帧，在 1 秒内将不透明度从 0 更改为 1，但这不起作用。

这是我正在使用的脚本：

```
$(function() {
 $(window).scroll(function() {
    var top_offset = $(window).scrollTop();
    if (top_offset) {
      $('.top_head_separator').addClass('fixed-top fade-in');
  }
}); 
```

CSS：

```
.fixed-top {
  background:#FFFFFF;
  box-shadow: 0 7px 15px 4px rgba(0,0,0,0.38);
  height: 90px;
  overflow: hidden;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 9999;

}
@keyframes fadeIn {
  0% {opacity: 0;}  
  100% {opacity: 1;}
}

.fadeIn {
  animation-duration: 1s;
  animation-fill-mode: both;
  animation-name: fadeIn;
} 
```

如何让盒子阴影淡入？

注意：我在这个问题中省略了供应商前缀，但它们在我的代码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:00:28.553

我认为你只是有一个拼写错误和一个或两个语法错误，否则你很好。两件事情：

*   关闭jQuery 中的*两个*函数。
*   你的 CSS 提到`fadeIn`，但 jQuery 有`fade-in`

这是新的、固定的 jQuery 代码：

```
$(function() {
 $(window).scroll(function() {
    var top_offset = $(window).scrollTop();
    if (top_offset) {
      $('.top_head_separator').addClass('fixed-top fadeIn'); // <<<< "fadeIn"
    }
 }); // <<<< ADDED
}); 
```

有关工作示例，请参阅[此`-webkit-`演示](http://jsfiddle.net/VwaNn/)。

# database - 哈希索引优势背后的推理/何时应该在 BTREE 索引上使用它们？

> ID：15319396
> 
> 赞同：0
> 
> 时间：2013-03-10T05:56:23.117
> 
> 标签：database, indexing

我在使用 BTREE 索引或 HASH 索引之间进行辩论。

**从理论上讲，使用 HASH 索引有什么好处？**
**什么时候应该选择它们，更重要的是，为什么？**

我读过哈希索引对点查询很有用，但是为什么呢？

我已经知道 BTREE 索引最适合范围查询，因为您可以通过从左到右轻松遍历叶节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:56:24.587

您没有提到特定的 DBMS，所以这个答案非常通用。

正确执行的哈希索引应该在一次提取中达到点查询的答案。B-Tree 将使用类似 lg_B(n) 二级存储访问，其中 B 是近似的分支因子，n 是条目数。缓存和合理的节点大小可能会将其保持在几次提取，但对于哈希索引仍然是两倍。此外，每个 B-Tree 访问都有与其关联的非平凡计算，以便遍历每个节点中的子索引（类似于每个节点的 lg_2(B) 数据比较操作）。哈希索引的计算时间通常非常有限（哈希计算和少量数据比较操作 - 希望是一次）。对于基于 B-Tree 的索引，在每个节点内进行搜索的计算时间通常很重要。

在挑选方面，如果

*   你只期望点查询
*   您不希望数据属于系统哈希函数的任何性能不佳的情况（奇怪的情况，但我认为我应该提到它）

如果您有任何类型的范围查询和/或想要在一组可预先确定的列上排序结果，B-Tree 系列会更好。

# java - 默认密钥库文件不存在？

> ID：15319397
> 
> 赞同：32
> 
> 时间：2013-03-10T05:56:32.180
> 
> 标签：java, android, keystore

我收到这个错误。

```
C:\Program Files\Java\jre7\bin>keytool -list -v -keystore "C:\Users\Suresh\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android

keytool error: java.lang.Exception: Keystore file does not exist: C:\Users\Suresh\.android\debug.keystore

java.lang.Exception: Keystore file does not exist: C:\Users\Suresh\.android\debug.keystore

at sun.security.tools.KeyTool.doCommands(Unknown Source)
at sun.security.tools.KeyTool.run(Unknown Source)
at sun.security.tools.KeyTool.main(Unknown Source)

C:\Program Files\Java\jre7\bin> 
```

![在此处输入图像描述](../Images/5529f20ee8600cca03aab45d8ee0020c.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-10T06:15:37.430

您必须提供错误的`debug.keystore`文件路径。

请按照以下步骤获取正确的路径并完成您的命令：

1.  在eclipse中，点击Window menu -> Preferences -> *Expand* Android -> Build
2.  在右侧面板中，查找：*默认调试密钥库：*
3.  **选择步骤 2**中指定的标签旁边的整个框

 **最后，使用您刚刚从第 3 步复制的路径来构建您的命令：

例如，就我而言，它将是：

> C:\Program Files\Java\jre7\bin>keytool -list -v -keystore "C:\Users\Siddharth Lele.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android

**更新：**

如果您已经按照上述步骤操作，唯一的其他解决方案是删除`debug.keystore`并让 Eclipse 为您重新创建它。

第 1 步：转到存储密钥库的路径。在你的情况下，`C:\Users\Suresh\.android\debug.keystore`

第 2 步：关闭并重新启动 Eclipse。

第 3 步（可选）：您可能需要*在再次创建**之前清理您的项目。`debug.keystore`*

**来源： http:** [//www.coderanch.com/t/440920/Security/KeyTool-genkeypair-exception-Keystore-file](http://www.coderanch.com/t/440920/Security/KeyTool-genkeypair-exception-Keystore-file)

`debug.keystore`关于删除文件的部分，您可以参考此内容： [Eclipse Android 插件中的“调试证书已过期”错误](https://stackoverflow.com/questions/2194808/debug-certificate-expired-error-in-eclipse-android-plugins/2196397#2196397)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-05-06T05:28:04.597

将此用于 MAC 用户

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-06T18:58:59.443

对于 Mac 用户：该`debug.keystore`文件存在于`~/.android`目录中。有时，由于相对路径，上述错误不断弹出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-11T16:35:57.120

对于 Mac/Linux 调试密钥库，[Android 文档](https://developers.google.com/android/guides/client-auth)有：

```
keytool -exportcert -list -v \
-alias androiddebugkey -keystore ~/.android/debug.keystore 
```

但是有些事情可能并不明显：如果您放置反斜杠，请确保在`shift + return`反斜杠之后执行 in 终端，以便以开头的第二个`-alias`在新行上。简单地按原样粘贴是行不通的。

您的终端（如果成功）将如下所示：

```
$ keytool -exportcert -list -v \
→ -alias androiddebugkey -keystore ~/.android/debug.keystore
Enter keystore password: 
```

默认调试密码为：**android**

旁注：在 Android Studio 中，您可以管理登录：

**文件 > 项目结构 > 模块 - （您的应用程序）> 签名**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-16T10:34:52.620

转到 ~/.android 如果没有 debug.keystore 从你的项目复制它并粘贴到这里然后再次运行命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-27T16:35:52.630

在 macOS 中，打开终端并输入以下命令

```
~/.android 
```

它将导航到包含 Keystore 文件的文件夹（您可以使用 'ls' 命令确认）

就我而言，有一个名为“debug.keystore”的文件。然后从 ~/.android 目录在终端中键入以下命令。

```
keytool -list -v -keystore debug.keystore 
```

您将获得预期的输出。**

# python - 如何在 wxpython 中检索位图按钮的 ID？

> ID：15319398
> 
> 赞同：0
> 
> 时间：2013-03-10T05:56:35.490
> 
> 标签：python, wxpython, wxwidgets

```
self.btid = 0
self.btarray = [] 
self.btarray.append("x")#so that the buttons are appended according to their ids

self.bmt = wx.BitmapButton(panel, btid, pic, pos=(50,50))
self.btarray.append(self.bmt)

self.btid += 1 
```

我使用相同的代码创建多个按钮。以后如何检索单个按钮的 ID？

在此先感谢，斯威亚姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:09:50.290

`GetId`是获取对象Id的方法。所以你可以写：

```
id_of_button_n = button_n.GetId() 
```

**但是**，在您的情况下，这不是必需的，因为您已经将 id 存储为字典的键`self.btarray`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:10:18.840

这是一个快速而肮脏的脚本，它将向您展示如何获取按钮 ID 和标签。我使用的是普通的 wx.Button 对象，因为没有好的方法可以在 Stack 上包含位图按钮的图像：

```
import random
import wx

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)
        mainSizer = wx.BoxSizer(wx.VERTICAL)

        i = random.choice(range(5, 10))
        for index, item in enumerate(range(i)):
            num = index + 1
            btn = wx.Button(self, label="Button %s" % num)
            btn.Bind(wx.EVT_BUTTON, self.onClick)
            mainSizer.Add(btn, 0, wx.ALL|wx.CENTER, 5)

        self.SetSizer(mainSizer)

    #----------------------------------------------------------------------
    def onClick(self, event):
        """"""
        btn = event.GetEventObject()
        print "%s id => %s" % (btn.GetLabel(), btn.GetId())

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Random Buttons", size=(1024, 768))
        panel = MyPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    app.MainLoop() 
```

# c - 使用 C/Intel 程序集寻求最大位图（又名位数组）性能

> ID：15319402
> 
> 赞同：1
> 
> 时间：2013-03-10T05:57:01.150
> 
> 标签：c, performance, optimization, assembly, intel-vtune

继我之前的两个问题之后，[如何提高 64 位 C/intel 汇编程序的内存性能/数据局部性](https://stackoverflow.com/questions/15036169/how-to-improve-memory-performance-data-locality-of-64-bit-c-intel-assembly-progr)和[使用 C/Intel 汇编，测试 128 字节内存块是否包含全零的最快方法是什么？](https://stackoverflow.com/questions/15172102/using-c-intel-assembly-what-is-the-fastest-way-to-test-if-a-128-byte-memory-blo)，我进一步将这些问题中提到的测试程序的运行时间从 150 秒降低到了 62 秒，如下所述。

64 位程序有五个 4 GB 查找表（bytevecM、bytevecD、bytevecC、bytevecL、bytevecX）。为了减少（大量）缓存未命中的数量，在我上一个问题中分析过，我添加了五个 4 MB 位图，每个查找表一个。

这是原始的内部循环：

```
psz = (size_t*)&bytevecM[(unsigned int)m7 & 0xffffff80];
if (psz[0]  == 0 && psz[1]  == 0
&&  psz[2]  == 0 && psz[3]  == 0
&&  psz[4]  == 0 && psz[5]  == 0
&&  psz[6]  == 0 && psz[7]  == 0
&&  psz[8]  == 0 && psz[9]  == 0
&&  psz[10] == 0 && psz[11] == 0
&&  psz[12] == 0 && psz[13] == 0
&&  psz[14] == 0 && psz[15] == 0) continue;
// ... rinse and repeat for bytevecD, bytevecC, bytevecL, bytevecX

// expensive inner loop that scans 128 byte chunks from the 4 GB lookup tables... 
```

这个简单的“预检查”背后的想法是，如果所有 128 个字节都为零，则避免代价高昂的内部循环。然而，正如上次所讨论的，分析表明，由于大量缓存未命中，这种预检查是主要瓶颈。所以我创建了一个 4 MB 的位图来进行预检查。（顺便说一句，大约 36% 的 128 字节块是零，而不是我上次错误报告的 98%）。

这是我用来从 4 GB 查找表创建 4 MB 位图的代码：

```
// Last chunk index (bitmap size=((LAST_CHUNK_IDX+1)>>3)=4,194,304 bytes)
#define LAST_CHUNK_IDX      33554431
void make_bitmap(
   const unsigned char* bytevec,  // in:  byte vector
   unsigned char* bitvec          // out: bitmap
)
{
   unsigned int uu;
   unsigned int ucnt = 0;
   unsigned int byte;
   unsigned int bit;
   const size_t* psz;
   for (uu = 0; uu <= LAST_CHUNK_IDX; ++uu)
   {
      psz = (size_t*)&bytevec[uu << 7];
      if (psz[0]  == 0 && psz[1]  == 0
      &&  psz[2]  == 0 && psz[3]  == 0
      &&  psz[4]  == 0 && psz[5]  == 0
      &&  psz[6]  == 0 && psz[7]  == 0
      &&  psz[8]  == 0 && psz[9]  == 0
      &&  psz[10] == 0 && psz[11] == 0
      &&  psz[12] == 0 && psz[13] == 0
      &&  psz[14] == 0 && psz[15] == 0) continue;
      ++ucnt;
      byte = uu >> 3;
      bit  = (uu & 7);
      bitvec[byte] |= (1 << bit);
   }
   printf("ucnt=%u hits from %u\n", ucnt, LAST_CHUNK_IDX+1);
} 
```

欢迎提出更好的方法来做到这一点。

使用通过上述函数创建的位图，然后我将“预检查”更改为使用 4 MB 位图，而不是 4 GB 查找表，如下所示：

```
if ( (bitvecM[m7 >> 10] & (1 << ((m7 >> 7) & 7))) == 0 ) continue;
// ... rinse and repeat for bitvecD, bitvecC, bitvecL, bitvecX

// expensive inner loop that scans 128 byte chunks from the 4 GB lookup tables... 
```

这是“成功的”，因为在简单的单线程情况下，运行时间从 150 秒减少到 62 秒。但是，VTune 仍然会报告一些相当大的数字，如下所示。

我分析了一个更现实的测试，其中八个同时运行的线程在不同的范围内运行。内部循环检查零块的 VTune 输出如下所示：

```
> m7 = (unsigned int)( (m6 ^ q7) * H_PRIME );
> if ( (bitvecM[m7 >> 10] & (1 << ((m7 >> 7) & 7))) == 0 ) continue;

0x1400025c7  Block 15:
mov   eax, r15d                    1.058s
mov   edx, ebx                     0.109s
xor   eax, ecx                     0.777s
imul  eax, eax, 0xf4243            1.088s
mov   r9d, eax                     3.369s
shr   eax, 0x7                     0.123s
and   eax, 0x7                     1.306s
movzx ecx, al                      1.319s
mov   eax, r9d                     0.156s
shr   rax, 0xa                     0.248s
shl   edx, cl                      1.321s
test  byte ptr [rax+r10*1], dl     1.832s
jz    0x140007670                  2.037s

> d7 = (unsigned int)( (s6.m128i_i32[0] ^ q7) * H_PRIME );
> if ( (bitvecD[d7 >> 10] & (1 << ((d7 >> 7) & 7))) == 0 ) continue;

0x1400025f3  Block 16:
mov   eax, dword ptr [rsp+0x30]  104.983s
mov   edx, ebx                     1.663s
xor   eax, r15d                    0.062s
imul  eax, eax, 0xf4243            0.513s
mov   edi, eax                     1.172s
shr   eax, 0x7                     0.140s
and   eax, 0x7                     0.062s
movzx ecx, al                      0.575s
mov   eax, edi                     0.689s
shr   rax, 0xa                     0.016s
shl   edx, cl                      0.108s
test  byte ptr [rax+r11*1], dl     1.591s
jz    0x140007670                  1.087s

> c7 = (unsigned int)( (s6.m128i_i32[1] ^ q7) * H_PRIME );
> if ( (bitvecC[c7 >> 10] & (1 << ((c7 >> 7) & 7))) == 0 ) continue;

0x14000261f  Block 17:
mov   eax, dword ptr [rsp+0x34]   75.863s
mov   edx, 0x1                     1.097s
xor   eax, r15d                    0.031s
imul  eax, eax, 0xf4243            0.265s
mov   ebx, eax                     0.512s
shr   eax, 0x7                     0.016s
and   eax, 0x7                     0.233s
movzx ecx, al                      0.233s
mov   eax, ebx                     0.279s
shl   edx, cl                      0.109s
mov   rcx, qword ptr [rsp+0x58]    0.652s
shr   rax, 0xa                     0.171s
movzx ecx, byte ptr [rax+rcx*1]    0.126s
test  cl, dl                      77.918s
jz    0x140007667

> l7 = (unsigned int)( (s6.m128i_i32[2] ^ q7) * H_PRIME );
> if ( (bitvecL[l7 >> 10] & (1 << ((l7 >> 7) & 7))) == 0 ) continue;

0x140002655  Block 18:
mov   eax, dword ptr [rsp+0x38]    0.980s
mov   edx, 0x1                     0.794s
xor   eax, r15d                    0.062s
imul  eax, eax, 0xf4243            0.187s
mov   r11d, eax                    0.278s
shr   eax, 0x7                     0.062s
and   eax, 0x7                     0.218s
movzx ecx, al                      0.218s
mov   eax, r11d                    0.186s
shl   edx, cl                      0.031s
mov   rcx, qword ptr [rsp+0x50]    0.373s
shr   rax, 0xa                     0.233s
movzx ecx, byte ptr [rax+rcx*1]    0.047s
test  cl, dl                      55.060s
jz    0x14000765e 
```

除此之外，大量时间（令我困惑）归因于这条线：

```
> for (q6 = 1; q6 < 128; ++q6) {

0x1400075a1  Block 779:
inc   edx                          0.124s
mov   dword ptr [rsp+0x10], edx
cmp   edx, 0x80                    0.031s
jl    0x140002574
mov   ecx, dword ptr [rsp+0x4]
mov   ebx, dword ptr [rsp+0x48]
...
0x140007575 Block 772:
mov   edx, dword ptr [rsp+0x10]    0.699s
...
0x14000765e  Block 789  (note: jz in l7 section above jumps here if zero):
mov   edx, dword ptr [rsp+0x10]    1.169s
jmp   0x14000757e                  0.791s
0x140007667  Block 790 (note: jz in c7 section above jumps here if zero):
mov   edx, dword ptr [rsp+0x10]    2.261s
jmp   0x140007583                  1.461s
0x140007670  Block 791 (note: jz in m7/d7 section above jumps here if zero):
mov   edx, dword ptr [rsp+0x10]  108.355s
jmp   0x140007588                  6.922s 
```

我不完全理解上面 VTune 输出中的大数字。如果有人能更清楚地了解这些数字，我会全力以赴。

在我看来，我的 5 个 4 MB 位图比我的 Core i7 3770 处理器的 8 MB L3 缓存要大，导致许多缓存未命中（尽管比以前少得多）。如果我的 CPU 有 30 MB L3 缓存（正如即将推出的 Ivy Bridge-E 一样），我推测这个程序会运行*得*更快，因为所有五个位图都可以轻松放入 L3 缓存中。那正确吗？

此外，由于测试位图的代码，即：

```
m7 = (unsigned int)( (m6 ^ q7) * H_PRIME );
bitvecM[m7 >> 10] & (1 << ((m7 >> 7) & 7))) == 0 
```

现在在内循环中出现了五次，非常欢迎任何关于加速此代码的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:08:55.817

在循环的核心位中，使用`_bittest()`MSVC 内在位图检查将编译器创建的`shl`/`test`组合组合成一条指令，（在 SandyBridge 上）没有延迟/吞吐量损失，即它应该减少几个周期。

除此之外，只能考虑通过 recursive 减少位集来计算位图`POR`，作为零测试的一种变体，可能值得进行基准测试：

```
for (int i = 0; i < MAX_IDX; i++) {
   __m128i v[8];
   __m128i* ptr = ...[i << ...];

   v[0] = _mm_load_si128(ptr[0]);
   v[1] = _mm_load_si128(ptr[1]);
   v[2] = _mm_load_si128(ptr[2]);
   v[3] = _mm_load_si128(ptr[3]);
   v[4] = _mm_load_si128(ptr[4]);
   v[5] = _mm_load_si128(ptr[5]);
   v[6] = _mm_load_si128(ptr[6]);
   v[7] = _mm_load_si128(ptr[7]);
   v[0] = _mm_or_si128(v[0], v[1]);
   v[2] = _mm_or_si128(v[2], v[3]);
   v[4] = _mm_or_si128(v[4], v[5]);
   v[6] = _mm_or_si128(v[6], v[7]);

   v[0] = _mm_or_si128(v[0], v[2]);
   v[2] = _mm_or_si128(v[4], v[6]);

   v[0] = _mm_or_si128(v[0], v[2]);

   if (_mm_movemask_epi8(_mm_cmpeq_epi8(_mm_setzero_si128(), v[0]))) {
       // the contents aren't all zero
   }
   ...
} 
```

此时，纯加载/累积`OR`/提取掩码可能比 SSE4.2 的紧密循环更好，`PTEST`因为没有`flags`依赖项和分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:11:58.727

对于 128 字节的缓冲区，与更大的整数进行比较。

```
unsigned char cbuf[128];
unsigned long long *lbuf = cbuf;
int i;
for (i=0; i < 128/sizeof(long long); i++) {
    if (lbuf[i]) return false; // something not a zero
}
return true; // all zero 
```

# c++ - 在 Windows 上构建 Gstreamer 1.0.5

> ID：15319414
> 
> 赞同：3
> 
> 时间：2013-03-10T05:58:52.473
> 
> 标签：c++, gstreamer, glib

我按照自述文件中的描述设置了项目，并安装并编译了 GLib 2.28.8。当我开始编译 gstreamer 时，我收到了数千个错误，这些错误表明构建设置或 GLib 版本有问题。我找不到其他适用于 Windows 的 GLib 版本的简单来源（我在这里尝试了 GLib 的开发和源版本：[http](http://www.gtk.org/download/win32.php) ://www.gtk.org/download/win32.php ）。

第一个编译错误是：

```
...\build\gstreamer-1.0.5\gst/gstobject.h(170): error C2079: 'lock' uses undefined struct '_GMutex' 
```

在 gstobject 中，锁定义为：

```
GMutex         lock;        /* object LOCK */ 
```

Visual Studio 找到的 gthread.h 中定义的

```
typedef struct _GMutex          GMutex; 
```

所以对我来说一切都很好，但也许我忽略了一些东西。glibconfig.h 还将 _GMutex* 定义为 GStaticMutex，这会不会有干扰？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T17:45:14.287

我用的是glib.2.28.8，也遇到了同样的问题。以下两个线程（[1](https://bugs.webkit.org/show_bug.cgi?id=72085)和[2](http://gtk.10911.n7.nabble.com/Building-gtkmm-on-windows-td79888.html)）也讨论了相关问题。

就我而言，只需添加

```
struct _GMutex
{
  /*< private >*/
  gpointer p;
  guint i[2];
}; 
```

前

```
struct _GMutex GMutex; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:25:41.063

也许您应该尝试将您的 Glib 更新到 2.32.0

我使用 Glib 2.32.4 在 Linux 和 Windows Xp 上成功构建了 GStreamer-1.0.5

请参阅 configure.ac

dnl GLib

GLIB_REQ=2.32.0

AG_GST_GLIB_CHECK([$GLIB_REQ])

# java - java 外部线程（在它使用的类文件之外）

> ID：15319415
> 
> 赞同：0
> 
> 时间：2013-03-10T05:59:00.120
> 
> 标签：java, multithreading, class, external, internal

问题是，是否有可能有一个外部线程，或者他们必须在他们运行的班级内部。如果是这样，有人可以告诉我怎么做。（外螺纹）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:08:28.657

*线程*，或者更准确地说，执行*线程*是某种东西，而类`Thread`是密切相关但又不同的东西，您似乎混淆了这两个概念。

您可以将执行*线程*视为将按顺序执行操作的机器。定义和运行这种机器的一种方法是编写一个`MyClass`带有`main()`方法的类并调用`java MyClass`.

另一种方法是创建`Thread`类的新实例并调用其方法`start()`。这将创建一个新*的执行线程*，它将运行类`run()`方法中的代码，`Thread`默认情况下不执行任何操作。为了使它有用，您通常会覆盖该`run`方法，我认为您正在调用*该类内部的线程...*：

```
class MyThread extends Thread {
  @Override public void run() {
    // ... some code ...
  }
}
// ...
  final Thread t = new MyThread();
  t.start(); 
```

在此示例中，在`run()`类的方法`MyThread`返回后，与该实例关联*的执行线程*`MyThread`将终止（就像您的单线程程序从您的方法返回或到达您的`main()`方法的末尾时一样）。

另一种可能性是传递`Thread`a 的实例`Runnable`。然后你将两个概念分开：*执行线程，*由 的实例表示`Thread`，将执行 的实例中的代码`Runnable`：

```
class MyRunnable implements Runnable {
  @Override public void run {
    // this code will get executed by a thread
  }
}
  // ...
  final MyRunnable r = new MyRunnable();
  final Thread t = new Thread(t);
  t.start(); 
```

这可能更接近于您所说的*外部线程*，尽管这种命名法非常不合常规。

因此，您会看到这里有 2 个不同但密切相关的概念。

现在，在 Java 中，您可以创建一个*执行线程，*等待您给它一些代码来执行。创建后，它会进入一个*pool*并坐在那里。你*提交*一些代码让它运行，当它完成时，执行线程不会终止，而是保持活动状态并返回到那个*pool*。也许这就是你要找的。

为此，您通常使用`ExecutorService`. 例如：

```
class MyMainClass {
  private static final ExecutorService es = Executors.newFixedThreadPool(10);
  public static void main(String... args) {
    es.submit(new MyRunnable());
    es.submit(new MyRunnable());
    es.submit(new MyRunnable());
    es.submit(new MyRunnable());
    es.submit(new MyRunnable());
  }
} 
```

在此示例中，*池*包含 10 个执行线程。你可以为它提交任意数量的实例`Runnable`，它会将它们分布在 10 个线程中。`submit(...)`对on 的每次调用`ExecutorService`都会返回一个 的实例`Future`，您可以使用它来了解正在运行*的执行线程*`Runnable`是否已经完成，以及它是成功完成还是由于未捕获的异常。

我建议您查看我在这里提到的所有类的 javadocs ：`Thread`、`Runnable`、`ExecutorService`和. 从该文档中可以学到很多东西！`Executors``Future`

最后一点，请记住，如果您开始使用线程和`ExecutorService`s，您会感到各种头痛。您将不得不考虑执行无法继续的情况（死锁、活锁）、需要原子的操作（即，从不同线程递增变量）、内存可见性（即，如果您更改字段的值如果不“小心”，其他线程可能永远不会注意到该字段的更改！）。还要记住，在每个最后一个非守护线程完成之前，JVM 不会死。换句话说，上面的例子永远不会终止，即使所有提交`Runnable`的s都完成了，因为里面的执行*线程*`ExecutorService`还活着！

# jquery - 比 CSS 类更喜欢 jQuery 上的 `ui-selected` 类

> ID：15319417
> 
> 赞同：-1
> 
> 时间：2013-03-10T05:59:26.697
> 
> 标签：jquery, css, jquery-ui, bind, jquery-events

我在 jQuery 中有[这样的可选交互](http://jqueryui.com/selectable/)

CSS 代码：

```
<style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
</style> 
```

jQuery代码：

```
<script>
$(function() {
    $( "#selectable" ).selectable();
    });

$('#selectable li').bind({
    mouseover: function(){
        if($(this).hasClass('ui-selected')){
        }else{
            $(this).css("background","#bef4b4") 
        }
    },
    mouseout: function(){
        if($(this).hasClass('ui-selected')){
        }else{
            $(this).css("background","#d4f9cd") 
        }
    }

})

</script> 
```

HTML 代码：

```
<body>

<ol id="selectable">
     <li class="ui-widget-content">Item 1</li>
     <li class="ui-widget-content">Item 2</li>
     <li class="ui-widget-content">Item 3</li>
     <li class="ui-widget-content">Item 4</li>
     <li class="ui-widget-content">Item 5</li>
     <li class="ui-widget-content">Item 6</li>
     <li class="ui-widget-content">Item 7</li>
</ol>

</body> 
```

但我定义了这个变化`mouseover`的`mouseout`事件。`<li>``bakcground-color`

现在，当我单击元素`backgound-color`属性时（在 JQuery 代码上）比`#selectable .ui-selected`（在 CSS 代码上）更喜欢。

我想当我点击`<li>`标签时`#selectable .ui-selected`启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:29:30.047

看到这个：**[样本](http://jsfiddle.net/YsLKe/2/)**

```
#selectable li.ui-selectee:not(.ui-selected) {
   background: #d4f9cd;
   color: black;
}

#selectable li.ui-selectee:not(.ui-selected):hover {
   background: #bef4b4;
   color: black;
} 
```

# winforms - 单击取消按钮时会触发什么事件？

> ID：15319420
> 
> 赞同：1
> 
> 时间：2013-03-10T05:59:45.377
> 
> 标签：winforms

有没有办法在不添加取消按钮的情况下取消对表单的编辑？

`CancelButton.PerformClick()` 当我没有取消按钮时，我正在寻找一种打电话的方式。

在表单代码中，我添加了以下内容 - 但需要知道如何取消编辑。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
  if(keyData == Keys.Escape) {
    // What goes here?
  }
  return base.ProcessCmdKey(ref msg, keyData);
} 
```

该表单包含文本控件和一个 BindingNavigator

事实证明，我可以使用

```
navigator.BindingSource.CancelEdit(); 
```

但是我想知道 `form.CancelButton.PerformClick()`如果`form.CancelButton`未设置，它会调用类似的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:29:01.613

> 有没有办法在不添加取消按钮的情况下取消对表单的编辑？
> 
> 当我没有取消按钮时，我正在寻找一种调用 CancelButton.PerformClick() 的方法。

一句话，没有。除非您创建了取消按钮，否则没有取消按钮。该`Form.CancelButton`属性不会指定任何对象，除非您已将对象分配给它。

但是，可能有一种方法可以实现您想要实现的目标。想一想：如果你*确实*有一个取消按钮会发生什么？那个取消按钮会做什么？

它会关闭表单，丢弃所有用户的更改，对吗？那么为什么不直接关闭表单呢？就像是：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
  if(keyData == Keys.Escape) {
    this.Close();
  }
  return base.ProcessCmdKey(ref msg, keyData);
} 
```

如果您需要对取消进行更多清理（例如，通常在取消按钮的`Click`事件处理程序方法中放置的任何内容），您可以定义一个名为类似的表单类级别方法`CancelForm`，然后调用它。例如：

```
private void CancelForm() {
  // do cleanup
  this.Close(); 
}

protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
  if(keyData == Keys.Escape) {
    this.CancelForm();
  }
  return base.ProcessCmdKey(ref msg, keyData);
} 
```

再说一次，我质疑你想要这样做的动机。如果你想支持取消，为什么不添加一个取消按钮呢？为什么用户需要记住键盘命令？键盘命令*非常*适合*想要*使用它们的用户，但 GUI 如此受欢迎是有原因的。如果用户应该能够取消操作，给他们一个大的取消按钮让他们点击。请务必在无法取消时禁用它，以提供即时视觉反馈。

作为奖励，当您将`Form.CancelButton`属性设置为表单上的取消按钮时，该`Esc`键会自动调用取消按钮，从而使您免于覆盖`ProcessCmdKey`. 您似乎正在尝试向后解决问题。当您遵循标准习语时，WinForms 会自动为您处理所有这些。遵循标准习语有一些非常好的理由。

# php - phpass 警告？

> ID：15319421
> 
> 赞同：0
> 
> 时间：2013-03-10T05:59:45.157
> 
> 标签：php, hash, passwords, phpass

我刚刚在我的网站注册代码中实现了 phpass，它似乎可以工作，但它给了我以下警告

```
Warning: is_readable(): open_basedir restriction in effect. File(/dev/urandom) is not `within the allowed path(s): (/home/u997733154:/usr/lib/php:/tmp) in /home/u997733154/public_html/PasswordHash.php on line 51` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:04:52.317

查看您的 php.ini 文件。默认情况下，您可以打开哪些文件有一个限制。

有关详细信息，请参阅此链接：[http ://www.php.net/manual/en/ini.core.php#ini.open-basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

# wpf - CollectionViewSource 是如何工作的？

> ID：15319423
> 
> 赞同：2
> 
> 时间：2013-03-10T06:00:39.293
> 
> 标签：wpf, xaml, collectionviewsource

谁能告诉我应该如何在 Windows 8 的 XAML 中的 CollectionViewSource 中设置正确的属性？

```
<CollectionViewSource x:Name="itemsViewSource"     
        Source="{Binding Items}"
        d:Source="{Binding AllTasks, Source={d:DesignInstance Type=data:TaskItems,  IsDesignTimeCreatable=True}}"/> 
```

x:name 是对象的名称。什么是来源？d:Source 和 Source 有什么区别？谁能给我解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T08:51:59.163

[这方面的MSDN 文档](http://msdn.microsoft.com/en-gb/library/system.windows.data.collectionviewsource.aspx)非常好。

正如文档所暗示的， [Source](http://msdn.microsoft.com/en-gb/library/system.windows.data.collectionviewsource.source.aspx)是您指向的集合对象。例子`ObservableCollection<T>`

第一个链接还显示了一个使用示例。基本上用简单的英语 CollectionViewSource 用于过滤/分组/排序列表/集合中的数据，然后在视图中使用结果

至于您的疑问，`d:`如果没有在您的顶级元素中看到您的 xmlns 声明，我无法确定，但假设默认值`d:`对应于设计时数据/属性

[设计时属性](http://msdn.microsoft.com/en-gb/library/ff602277%28v=vs.95%29.aspx)

当实时数据可能不可用时，它用于在设计时帮助设计和可视化您的 UI。

# ruby-on-rails - Rails延迟作业连续运行

> ID：15319424
> 
> 赞同：0
> 
> 时间：2013-03-10T06:00:38.780
> 
> 标签：ruby-on-rails, delayed-job

我为我的网站创建了一个批处理电子邮件系统。我遇到的可怕问题是它不断地发送电子邮件。看来这项工作陷入了无限循环。请指教。这很疯狂，因为在我的开发服务器上，每个帐户只发送一封电子邮件，但在我的生产服务器上，我收到了 5 封电子邮件。因此，这意味着我网站的所有用户都收到了多封电子邮件。

控制器：

```
 class BatchEmailsController < ApplicationController

 before_filter :authenticate_admin_user!

 def deliver
 flash[:notice] = "Email Being Delivered"
 Delayed::Job.enqueue(BatchEmailJob.new(params[:batch_email_id]), 3, 10.seconds.from_now, :queue => 'batch-email', :attempts => 0)
 redirect_to admin_batch_emails_path
end
end 
```

lib 文件夹中的作业：

```
 class BatchEmailJob < Struct.new(:batch_email_id)
 def perform
 be = BatchEmail.find(batch_email_id)
 if be.to.eql?("Contractors")
   cs = Contractor.all
   cs.each do|c|
     begin
        BatchEmailMailer.batch_email(be.subject, be.message, be.link_name, be.link_path, be.to, c.id).deliver
     rescue Exception => e
          Rails.logger.warn "Batch Email Error: #{e.message}"
     end
 else
   ps = Painter.all
   ps.each do |p|
     begin
       BatchEmailMailer.batch_email(be.subject, be.message, be.link_name, be.link_path, be.to, p.id).deliver
     rescue Exception => e
       Rails.logger.warn "Batch Email Error: #{e.message}"
     end
   end
 end
 end
 end 
```

延迟作业初始化器：

```
 Delayed::Worker.max_attempts = 0 
```

**请提供有关此方法的反馈。我想向所有用户发送批量电子邮件，但如果出现问题，请避免多次重试。我添加了救援块来捕获电子邮件异常，希望批处理将跳过错误并继续处理。作为最后的手段，如果出现其他问题，请不要再次运行。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T19:11:45.113

在数百万封电子邮件之后，我的一个应用程序似乎可以完美运行：

1) 在初始化程序中，不要让 DelayedJob 重新尝试失败的作业，也不要让 DJ 删除失败的作业：

```
Delayed::Worker.destroy_failed_jobs = false
Delayed::Worker.max_attempts = 1 
```

2) 安排大量电子邮件是一项工作，也就是“主工作”

3）当那个作业运行时，它会产生 N 个作业，其中 N 是正在发送的电子邮件的数量。因此，每封电子邮件都有自己的工作。（注意：如果您使用具有“批量”功能的生产电子邮件服务，则一个“电子邮件”实际上可能是一批 100 或 1000 封电子邮件。）

4）我们有一个管理面板，它会显示我们是否有任何失败的作业，如果是，因为我们没有删除它们，我们可以检查失败的作业并查看发生了什么（格式错误的电子邮件地址等）

如果一封电子邮件失败，其他电子邮件不受影响。没有电子邮件可以发送两次。

# android - 如何在 Android Google Maps API v2 中将 LatLng 和半径转换为 LatLngBounds？

> ID：15319431
> 
> 赞同：51
> 
> 时间：2013-03-10T06:02:34.333
> 
> 标签：android, google-maps-android-api-2

我相信这是最近的 Google Maps API v2 的限制。他们最近增加了在地面上绘制圆圈的功能 - 但如果您想定位相机以使其显示整个圆圈，则没有办法这样做。

可以调用 CameraUpdateFactory#newLatLngBounds(bounds, padding)，其中“bounds”是 LatLngBounds，“padding”是以像素为单位的距离。问题是无法在 LatLngBounds 中创建 LatLng 和半径。

LatLngBounds 的构造函数只接受 2 个 LatLng 实例并生成一个矩形，其中这些是 NW 和 SE 角。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2015-06-24T14:29:45.787

就像[Risadinha](https://stackoverflow.com/a/19401650/1993204)提到的那样，您可以使用`android-maps-utils`. 只需添加：

```
compile 'com.google.maps.android:android-maps-utils:0.4.4' 
```

对于您的 gradle 依赖项，请使用以下代码：

```
public LatLngBounds toBounds(LatLng center, double radiusInMeters) {
    double distanceFromCenterToCorner = radiusInMeters * Math.sqrt(2.0);
    LatLng southwestCorner =
                SphericalUtil.computeOffset(center, distanceFromCenterToCorner, 225.0);
    LatLng northeastCorner = 
                SphericalUtil.computeOffset(center, distanceFromCenterToCorner, 45.0);
    return new LatLngBounds(southwestCorner, northeastCorner);
} 
```

编辑：

我们的目标是计算两点 ( `LatLngs`)：

*   `southwestCorner`

和

*   `northeastCorner`

从 javadoc 中，[`SphericalUtil`](http://googlemaps.github.io/android-maps-utils/javadoc/com/google/maps/android/SphericalUtil.html#computeOffset-LatLng-double-double-)您可以读到`225`and`45`是`heading`值，而 the`distanceFromCenterToCorner`是`distance`. 下图中数值的进一步解释：

[![视觉解释](../Images/ba88a7256f4de033ff16cf246ca42900.png)](https://i.stack.imgur.com/GkFzJ.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-11-13T18:19:17.933

使用 javascript 库，您可以绘制一个具有中心和半径的圆，然后获取它的边界。

```
centerSfo = new google.maps.LatLng(37.7749295, -122.41941550000001);
circle = new google.maps.Circle({radius: 5000, center: centerSfo});
bounds = circle.getBounds(); 
```

您可以使用 android api 执行相同的操作。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-10T07:54:37.073

这是完全可行的。

LatLng 是你的圆心吗？你想要做的就是在`LatLngBounds`（正方形内的圆圈问题）内写上你的圆圈，这样整个事物就会显示在地图上。

如果你把它画在纸上，你会发现你拥有计算`LatLngBounds`.

还记得如何[求直角三角形的边长](http://en.wikipedia.org/wiki/Pythagorean_theorem)吗？

```
a² + b² = c² 
```

如果你从圆心画一条线到西北角（左上角），再画一条直线到正方形的西墙（从中心到左边的直线），你就有一个三角形。现在您可以使用上面的等式求解，`c`因为您知道三角形另一边的长度（圆的半径）。

所以现在你的方程变成了

```
r² + r² = c² 
```

这减少到

> 2r² = c²

这进一步减少到

> c = squareRoot(2) * r

现在你有距离了。这当然是过于简单化了，因为地球不是平的。如果距离不是很大，您可以使用上面相同的等式，但修改为将球形地球投影到平面上：

[http://en.wikipedia.org/wiki/Geographical_distance#Flat-surface_formulae](http://en.wikipedia.org/wiki/Geographical_distance#Flat-surface_formulae)

请注意，这也使用了[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)，就像我们在上面所做的一样。

接下来，您需要根据给定方位的中心点和上面找到的距离计算端点（NW 和 SE 角）。

![在此处输入图像描述](../Images/795cf8c2358ef898efbac994389b03b1.png)

这篇文章可能会有所帮助：[计算给定距离、方位角、起点的端点](https://stackoverflow.com/questions/3225803/calculate-endpoint-given-distance-bearing-starting-point)

使用上面链接的帖子中的公式时，不要忘记将度数转换为弧度！（乘以度`pi/180`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-16T10:58:58.323

谷歌为此提供了一个实用程序库：

[http://googlemaps.github.io/android-maps-utils/](http://googlemaps.github.io/android-maps-utils/)

Google 推荐用于此任务和示例代码： [http ://code.google.com/p/gmaps-api-issues/issues/detail?id=5704](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5704)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-02T09:36:47.043

如果您的 LatLngBounds 定义一个正方形， [Bartek Lipinski 的](https://stackoverflow.com/users/1993204/bartek-lipinski)答案是正确的，但大多数 LatLngBounds 定义矩形，因此，东北点和西南点从中心的方位角并不总是 45 度和 255 度。

因此，如果您希望从任何四边形的中心获取半径的 LatLngBounds，请使用初始坐标，`bounds.northeast`如下`bounds.southwest`所示（使用 SphericalUtils）：

```
LatLng northEast = SphericalUtil.computeOffset(center, radius * Math.sqrt(2.0), SphericalUtil.computeHeading(center, bounds.northeast));
LatLng southWest = SphericalUtil.computeOffset(center, radius * Math.sqrt(2.0), (180 + (180 + SphericalUtil.computeHeading(center, bounds.southwest)))); 
```

`(180 + (180 + x))`从中心顺时针计算西南点的方位角。

# database - 数据库记录处理

> ID：15319432
> 
> 赞同：1
> 
> 时间：2013-03-10T06:02:55.903
> 
> 标签：database, delphi, delphi-xe2, accuracerdb

例如，如何将记录的工作负载拆分到多个线程，特别是具有 169 条记录和 7 个线程的 Accuracer DB。

因为我可以只拆分范围内的记录数并让每个线程处理该范围。但是，如果用户删除或添加记录，它将无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:53:36.657

您可以使用[OmniThreadLibrary](http://otl.17slon.com/)并行处理数据库中的记录，而无需太多麻烦。

**我用Pipeline**抽象写了一个例子。3个阶段的管道常量：

1.  第一阶段从*数据库*中读取数据，创建*容器对象*的一个​​实例来代表管道下一阶段的数据。
2.  第二阶段处理传入的数据。

    *   调用`DoSomethingWith`仅浪费大约 100 毫秒的过程。模拟数据*处理*
    *   释放容器实例的内存。
    *   然后将文字值添加`1`到输出队列中，以通知最后阶段已处理了另一条记录。

    此阶段配置为在 7 个线程中并行运行。

3.  最后一个阶段只*计算*前一阶段完成了多少条记录

该示例是一个控制台应用程序，您只需复制/粘贴即可查看它在您的机器中的实时运行。

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils,
  OtlCommon,
  OtlCollections,
  OtlParallel,
  System.Diagnostics,
  DB, DBClient;

type
  //auxiliar container, used to copy the database data
  //to avoid synchronization. remember TDataSet "current record"
  //may cause conflicts if changed from different threads.
  TContainer = class
  private
    FName: string;
    FID: Int64;
  public
    property ID: Int64 read FID write FID;
    property Name: string read FName write FName;
  end;

//does nothing, but wastes around 100ms. "processing" each record
procedure DoSomethingWith(const AValue: TContainer);
begin
  Sleep(100);
end;

//creates a DataSet on the fly with a random number of records
function CreateDataSet: TClientDataSet;
var
  I: Integer;
begin
  Result := TClientDataSet.Create(nil);
  with Result.FieldDefs.AddFieldDef do
  begin
    Name := 'ID';
    DataType := ftLargeint;
  end;
  with Result.FieldDefs.AddFieldDef do
  begin
    Name := 'NAME';
    DataType := ftString;
  end;
  Result.CreateDataSet;
  for I := 1 to Random(1000) do
    Result.InsertRecord([I, 'Test']);
end;

var
  RecordsProcessed: Integer;
  SW: TStopwatch;
  Data: TDataSet;
begin
  IsMultiThread := True;
  Randomize;
  Writeln('wait while processing...');
  SW := TStopwatch.Create;
  SW.Start;
  try
    Data := CreateDataSet;
    try
      RecordsProcessed := Parallel.Pipeline
        .Stage(
          procedure (const Input, Output: IOmniBlockingCollection)
          var
            RecData: TContainer;
          begin
            Data.First;
            while not Data.Eof do
            begin
              RecData := TContainer.Create;
              RecData.ID := Data.Fields[0].AsLargeInt;
              RecData.Name := Data.Fields[1].AsString;
              Output.Add(RecData);
              Data.Next;
            end;
          end)
        .Stage(
          procedure (const Input: TOmniValue; var Output: TOmniValue)
          begin
            //process the real thing here
            DoSomethingWith(Input);
            Input.AsObject.Free;
            Output := 1; //another record
          end)
        .NumTasks(7) //this stage is processed by 7 parallel tasks
        .Stage(
           procedure (const Input, Output: IOmniBlockingCollection)
           var
             Recs: Integer;
             Value: TOmniValue;
           begin
             Recs := 0;
             for Value in Input do
               Inc(Recs, Value);
             Output.Add(Recs);
           end)
        .Run.Output.Next;
      SW.Stop;
      Writeln(RecordsProcessed, ' records processed in ', SW.ElapsedMilliseconds, 'ms.');
      Writeln('Avg. ', (SW.ElapsedMilliseconds/RecordsProcessed):0:3, 'ms./record');
    finally
      Data.Free;
    end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  readln;
end. 
```

恕我直言，这样做的主要优点是：

*   你有一个灵活的机制在多个工人之间分配工作。如果某些记录需要更多时间来处理，图书馆会处理这种情况，您可以合理地期望在更短的时间内完成全部工作。
*   一旦您完成从数据库中读取第一条记录，您的第一个处理线程就会启动。
*   如果您必须等待基表中的更多传入记录，您可以轻松调整它。在阶段过程中的代码结束之前，阶段的输出队列不会被标记为完成。如果在某个时候没有更多工作要做，那么所有即将到来的阶段都会阻止等待更多数据处理。
*   您只需更改参数值即可更改工作线程的数量！

# android - 在android中实现oauth

> ID：15319433
> 
> 赞同：1
> 
> 时间：2013-03-10T06:03:02.460
> 
> 标签：android, oauth-2.0, facebook-android-sdk, android-facebook

我是 android 环境的新手，并且一直在尝试使用 android 中的不同事物。我不知道这是否可能，但我想实现如下某种功能：

当我的应用程序启动时，主要活动允许用户使用 facebook 或 Google 登录。我已经使用 Facebook SDK 为 facebook 提供登录和注销功能。（我仍在使用已弃用的方法）

现在，当用户使用 facebook 或 google 登录时，我希望我的应用程序自动导航到其他活动。

问题1：我该怎么做？同时使用 Facebook 和 Google？

此活动有四个按钮。使用这些，用户可以导航到应用程序的不同部分。这些按钮之一是设置。每当用户单击此按钮时，应用程序应显示用户的个人资料信息。我的第一个活动在提示用户登录时收集的信息。

问题 2：我应该如何在不同活动之间管理来自他们帐户的用户数据？（如他们的电子邮件或个人资料图片等）

问题 3：我应该在第一次登录活动中访问数据还是在用户单击“设置”按钮时访问数据？（在下一个活动中）有可能吗？如何？我想我可以使用我在第一次活动中获得的访问令牌，例如 (getAccessToken() in facebook sdk??)？

问题4：我可以在用户第一次登录时保存数据，这样我就不必每次登录都获取数据吗？我该怎么做？

在一个会话（登录和注销）之间，我不希望我的应用程序每次用户点击“设置”按钮时都获取数据.....我应该如何保存数据？共享偏好 ??

欢迎任何形式的评论、评论（仅相关）、文章、教程、项目、观点、建议！！我很困惑。谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:00:48.903

> 问题1：我该怎么做？

成功登录后使用[**Intent**](http://developer.android.com/reference/android/content/Intent.html)转到下一个活动。

> 问题 2：我应该如何在不同活动之间管理来自他们帐户的用户数据？（如他们的电子邮件或个人资料图片等）

用户登录时将详细信息存储在 SharedPreferences 中，并确保在注销时清除 SharedPreferences。

> 问题 3：我应该在第一次登录活动中访问数据还是在用户单击“设置”按钮时访问数据？（在下一个活动中）有可能吗？如何？我想我可以使用我在第一次活动中获得的访问令牌，例如 (getAccessToken() in facebook sdk??)？
> 
> 问题4：我可以在用户第一次登录时保存数据，这样我就不必每次登录都获取数据吗？我该怎么做？
> 
> 在一个会话（登录和注销）之间，我不希望我的应用程序每次用户点击“设置”按钮时都获取数据.....我应该如何保存数据？共享偏好 ??

是的，SharedPreferences 是解决这些问题的方法。这是您可以做的事情：

*   当用户第一次登录时，将访问令牌及其到期时间存储在 SharedPreferences 中。

*   之后，每次只需使用访问令牌检查会话是否有效。如果会话有效，则使用存储在您的首选项文件中的详细信息。如果会话已过期，请再次获取令牌并更新您的 SharedPreference 文件。

这是一个[关于 Android Facebook SDK的](http://www.youtube.com/course?list=ECE425D66F454D6AFA)*优秀* 视频教程系列，对您来说最好的部分是他使用 SDK 2.0（已弃用），就像您正在使用的一样！

# jquery - 三元或更简洁的 setClass 等价物

> ID：15319434
> 
> 赞同：0
> 
> 时间：2013-03-10T06:03:03.380
> 
> 标签：jquery, ternary-operator

我们有 addClass、removeClass、toggleClass

jQuery相当于什么

```
document.getElementById("field").className=(someBoolean)?"pass":"fail"; 
```

但是使用**保留现有类**的方法之一？

我最接近的是在我看来不是那么优雅

```
$("#field")
  .toggleClass("pass",someBoolean)
  .toggleClass("fail",!someBoolean); 
```

或者使用变量

```
$("#field")
  .toggleClass(classWhenTrue,someBoolean)
  .toggleClass(classWhenFalse,!someBoolean); 
```

例子：

```
$(function() {
  var pass = true;

    $("#field")
    .toggleClass("pass", pass)
    .toggleClass("fail", !pass);
    var classes = [...$("#field").get(0).classList];
    console.log(classes)
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<input id="field" type="text" class="test fail done" />
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:08:44.687

这个？

```
$("#field").removeClass('pass fail').addClass(someBoolean ? 'pass' : 'fail'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:04:58.990

就这样做吧。

```
$('#field').attr('class', someBoolean ? 'pass' : 'fail'); 
```

`.attr('class', 'newClass')`相当于`element.className = 'newClass';`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-30T08:48:22.557

你可以试试这个：

`$('.submit-button')[ someBoolean ? 'addClass' : 'removeClass' ]('active')`

# php - MySQL 查询和显示不起作用？

> ID：15319438
> 
> 赞同：1
> 
> 时间：2013-03-10T06:03:32.350
> 
> 标签：php, html, mysql

我的 MySQL 数据库设置为名称为“chatterr”，表名称为“maillist”。我目前正在使用下面的php：

```
<?php
mysql_connect("localhost","root","");

//query databae
$query = "SELECT * FROM maillist ORDER BY id DESC LIMIT 4";
$result=mysql_query($query) or die('Error, insert query failed');
$row=0;
$numrows=mysql_num_rows($result);

while($row<$numrows) {
    $id=mysql_result($result,$row,"id");
    $first_name=mysql_result($result, $row, "first_name");
    $last_name=mysql_result($result, $row, "last_name");
?>

<?php echo $id; ?>

<?php
$row++;
}
?> 
```

它适用于本地主机，但不适用于 PHP。代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:09:02.313

[`mysql_select_db`](http://php.net/manual/en/function.mysql-select-db.php)在查询之前选择一个数据库

```
mysql_connect("localhost","root","");
mysql_select_db("chatterr"); 
```

或在查询中指定数据库名称

```
$query = "SELECT * FROM chatterr.students ORDER BY id DESC LIMIT 4"; 
```

**更新：除此之外，您的连接可能失败。**改变

```
mysql_connect("localhost","root",""); 
```

至

```
$db = mysql_connect("localhost","root","");
if (!$db) {
    die('Could not connect: ' . mysql_error());
} 
```

看看是不是这样。

**UPDATE3：**把它们放在一起。尽管该代码有**很大**的改进空间，但它在我的机器上运行良好。

```
<?php
$db = mysql_connect("localhost","root","");
if (!$db) {
    die('Could not connect: ' . mysql_error());
}
$db_selected = mysql_select_db("chatterr", $db);
if (!$db_selected) {
    die ('Could not select db: ' . mysql_error());
}

//query databae
$query = "SELECT * FROM test.students ORDER BY id DESC LIMIT 4";
$result=mysql_query($query) or die('Error, insert query failed');
$row=0;
$numrows=mysql_num_rows($result);

while($row<$numrows)
{
$id=mysql_result($result,$row,"id");
$first_name=mysql_result($result,$row,"first_name");
$last_name=mysql_result($result,$row,"last_name"); ?>

<?php echo $id; ?>

<?php

$row++;
}
?> 
```

> 请不要将 mysql_* 函数用于新代码。它们已被 [弃用](http://php.net/manual/en/intro.mysql.php)。对[PDO](http://php.net/pdo) 或[MySQLi](http://php.net/mysqli)使用 [准备好的语句](http://goo.gl/vn8zQ)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:07:01.057

这样做：

```
<?php
$con = mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("chatterr",$con) or die(mysql_error());

//query database
$query = "SELECT * FROM maillist ORDER BY id DESC LIMIT 4";
$result=mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result))
{
    $id = $row["id"];
    $first_name = $row["first_name"];
    $last_name = $row["last_name"];
}
?> 
```

# c# - 如何保护控制器不通过用户输入访问父目录和根目录

> ID：15319439
> 
> 赞同：0
> 
> 时间：2013-03-10T06:03:37.667
> 
> 标签：c#, asp.net-mvc, controller, security

我有一个 ASP.Net MVC 控制器操作，旨在提供对我的 App_Data 文件夹中选择目录和子目录中特定文件的访问权限。

有人会告诉我如何锁定它，以便用户无法访问根目录或父目录，只能访问目录和子目录中的文件吗？

这是控制器操作的不安全版本：

```
public string GetFile(string fileName)
{
    string dataDir = AppDomain.CurrentDomain.GetData("DataDirectory").ToString();
    string specialFiles = "SpecialFiles";

    string finalPath = Path.Combine(dataDir, specialFiles, fileName);
    string text = System.IO.File.ReadAllText(finalPath);
    return text;
} 
```

天真的解决方案是检查`fileName`字符串组合，例如`..\`，然后抛出异常或其他东西。虽然我可以实施此解决方案，但如果存在最佳实践，我更愿意遵循。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:56:27.650

在将字符串组合成 finalPath 之前，请从`fileName`以下内容中提取 FileName：

```
fileName = System.IO.Path.GetFileName(fileName) 
```

# php - 我想就表单 paypal 征求专家的意见

> ID：15319443
> 
> 赞同：0
> 
> 时间：2013-03-10T06:04:21.910
> 
> 标签：php, mysql, paypal, paypal-ipn

我有一个 php 页面，其中包含一个名为“BuyForm”的表单和一个单独的提交按钮.. 像这样

```
<form id="BuyForm" name="BuyForm" method="post" action="purchase.php" enctype="multipart/form-data">
// form goes here
<input type="submit" name="submit" value="Buy Now" class="buyButton">
</form> 
```

现在，当我想添加一个贝宝按钮时，它给了我单独的表单代码，比如这个贝宝按钮代码

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
           <input type="hidden" name="cmd" value="_s-xclick">
           <input type="hidden" name="hosted_button_id" value="SOMEVALUE">
           <input type="image" src="https://www.paypalobjects.com/en_GB/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">
           <img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
           </form> 
```

我将此表单 action="purchase.php" 重定向到此页面只是因为所有验证都仅在此页面中，所以我的想法是在检查我的表单“BuyForm”是否有任何错误并且成功时我希望它重定向到另一个页面，那里有这个贝宝表格。我想对了吗？

用户必须点击两次，一次在提交按钮上然后它重定向到贝宝表单，在那里他将再次点击购买按钮进行购买.. 或者还有什么可以做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:17:28.207

这不是正确的方法。您应该从购买页面重定向用户，而不是让用户点击两次。在购买页面上，您将用户重定向到贝宝表单，编写此代码并通过以下方式直接将用户重定向到贝宝：

```
$paypal_email = "dummy@gmail.com";
$url='https://www.paypal.com/webscr?cmd=_xclick';   
$currency="USD";
$paypal_redirect .= $url;
$paypal_redirect .= '&amount='.$cost;
$item_name = 'Item name';
$notify_url = "http://example.com/notify.php";
$cancel_url = "http://example.com/cancel.php";

$paypal_redirect .= '&return = http://example.com/thanks.php&paymentaction=authorization&business='.$paypal_email.'&item_name='.$item_name.'&no_shipping=1&no_note=1&currency_code='.$currency.'&charset=UTF-8&notify_url='.urlencode($notify_url).'&cancel_url='.urlencode($cancel_url).'&rm=2';

header("Location:".$paypal_redirect); 
```

这是执行此操作的正确方法。

# salesforce - 在 PageBlocktable 的 visualforce 页面中动态添加行

> ID：15319444
> 
> 赞同：0
> 
> 时间：2013-03-10T06:04:35.920
> 
> 标签：salesforce, apex-code, visualforce

我正在创建一个虚拟的visualforce页面，其代码是

```
<apex:page controller="sampleCon">
    <apex:form>
    <apex:pageMessages id="message" />
    <apex:pageBlock>
    <apex:pageBlockTable value="{!wrap1}" var="item" id="hello">
    <apex:column headerValue="String" value="{! item.x}"></apex:column>
    <apex:column headerValue="Action"><apex:commandButton value="{!if(item.i == size-1,'Add','Delete')}" onclick="AddOrDelete({! item.i});" rerender="message"></apex:commandButton></apex:column>
    </apex:pageBlockTable>
    </apex:pageBlock>
    <apex:actionRegion >
     <apex:actionFunction name="AddOrDelete" action="{!addElement}" reRender="message,hello">
     <apex:param value="" name="fieldName" />
  </apex:actionFunction>
     </apex:actionRegion>
    </apex:form>
</apex:page> 
```

控制器代码是

```
public class sampleCon {
public List<Wrapper> wrap1{get;set;}
public Integer size{get;set;}

public sampleCon(){
wrap1=new List<Wrapper>();
wrap1.add(new wrapper(0));
 size=wrap1.size();

}

public PageReference addElement(){
size=wrap1.size();

System.debug('Hello ji'+Apexpages.currentPage().getParameters().get('fieldName')+'size is'+size);
Integer i=Integer.valueOf(ApexPages.currentPage().getParameters().get('fieldName'));

if(i == size-1)
{
wrap1.add(new wrapper(size));

size++;
}

return null;

}

    public class wrapper{
    public integer i{get;set;}
    public String x{get;set;}
    public wrapper(Integer p){
i=p;
    }}
    } 
```

我正在尝试的是最后一行按钮标签应该是添加，其他按钮标签应该是删除当我按下添加按钮时添加一个新行并且标签应该相应地更改为此我添加行但它没有按预期工作

初始页面截图是 ![在此处输入图像描述](../Images/baba7f53e68f5107dd9299a5fe9b0a8f.png) 当我按下添加按钮屏幕看起来像这样。 ![在此处输入图像描述](../Images/f9375430ac319ab0d45142f18a1c04e4.png) 当我再次按下添加按钮屏幕看起来像第一个屏幕截图。我期待当我点击上面屏幕截图中的添加按钮时会再添加一行。谁能告诉我为什么当我点击添加按钮时只显示一行第二个屏幕截图以及如何更正它，当我再次单击屏幕上方的添加按钮时，将再添加一行而不是显示初始屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:26:43.147

我建议你在下面的帖子中列出一个清单：

[http://boards.developerforce.com/t5/Visualforce-Development/Add-Row-functionality-in-VisualForce/mp/358921](http://boards.developerforce.com/t5/Visualforce-Development/Add-Row-functionality-in-VisualForce/m-p/358921)

希望这可以帮助。

# javascript - 使用 Javascript 进行转换？在 URL 中锚定

> ID：15319449
> 
> 赞同：0
> 
> 时间：2013-03-10T06:05:11.687
> 
> 标签：javascript, url, redirect, anchor

我怎样才能转换这个：

[http://example.com/?thisurl](http://example.com/?thisurl)

对此：

[http://example.com/#/thisurl](http://example.com/#/thisurl)

我有一堆旧的 URL 需要重定向到我页面上的特定锚点，但我不能用 htaccess 做到这一点，因为锚点没有通过。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:09:17.680

像这样的东西应该工作：

```
window.location.href = window.location.href.split('?')[0] + '#/' +
                       window.location.search.replace(/^?/, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:10:49.053

您可以像这样使用对象的`.hash`和`.search`部分`window.location`：

```
window.location.hash = "/" + window.location.search.substr(1); 
```

这将设置哈希而不重新加载页面。

* * *

如果您想重新加载页面以使其具有新 URL（`?thisUrl`在 URL 栏中没有 ，那么您可以执行以下操作：

```
var wl = window.location;
if (wl.search.length > 1) {
    wl.href = wl.href.replace(/\?.*$/, "") + "#" + wl.search.substr(1);
} 
```

# mongodb - $id 如何在 mongodb 中提供帮助？

> ID：15319453
> 
> 赞同：0
> 
> 时间：2013-03-10T06:05:25.100
> 
> 标签：mongodb, reference

我已将 mongodb 文档作为其他文档的参考。但我认为它没有按照我希望的方式工作！

例如：

```
> db.ttt.insert({_id: "a", b:"b" })
> db.ttt.insert({_id: "b", b: {$id:"a" } })
> db.ttt.find()
{ "_id" : "a", "b" : "b" }
{ "_id" : "b", "b" : { "$id" : "a" } } 
```

由于我将我的最后一次插入作为第一个裁判，所以它应该等同于：

```
{
   _id: "b", 
    b: {

         {_id: "a", b:"b" }

       } 
} 
```

但是为什么这个查询失败了？

```
> db.ttt.find({"b.b":"b"} ) 
```

我可能理解`$id`' 的属性是错误的。但是，如果不能通过引用来完成，那么我还有什么其他选择？引用的好处是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:48:26.673

首先，在文档中嵌入文档与引用文档不同。在您的情况下，您指的是文档而不是嵌入。所以你不应该把它当作嵌入式文档。你正在做的是查询它，就好像你有嵌入的文档，但它不是。

Mongodb 文档对如何使用引用非常清楚，我认为您必须访问[mongodb 文档以进行引用](http://docs.mongodb.org/manual/applications/database-references/)。但简而言之，一旦您获得了结果，`db.ttt.find({ "_id" : "b"})`您的应用程序应该进行另一个查询，以使用您在第一个查询中获得的引用来查找引用的文档。

要记住的重要一点是，在嵌入文档的情况下，您可以运行一个查询以从嵌入文档中获取结果，而在引用文档中，您必须借助第二个查询。

# java - 了解用于重叠计算的 mapreduce 算法

> ID：15319455
> 
> 赞同：6
> 
> 时间：2013-03-10T06:05:39.770
> 
> 标签：java, hadoop, mapreduce, elastic-map-reduce, hadoop-partitioning

我需要帮助理解算法。我首先粘贴了算法解释，然后是我的疑问。

**算法：（用于计算记录对之间的重叠）**

给定一个用户定义的参数 K，文件 DR(*Format:record_id,data*) 被分成 K 个几乎相等大小的块，使得一个文档的数据 Di 落入第 i/K 个块中。

我们覆盖了 Hadoop 的分区函数，该函数将映射器发出的键映射到减速器实例。每个键 (i,j) 都映射到第 j/K 组中的一个 reducer。

特殊键 i,* 及其关联值，即文档的数据最多被复制 K 次，从而可以在每个 reducer 上传递文档的全部内容。因此，组中的每个reducer 只需要恢复并加载内存中的一个DR 文件块，其大小可以通过改变K 任意小。因此可以计算重叠。这是以复制通过 MapReduce 框架交付的文档为代价的。

**疑点：**

我做了一些假设：

声明：每个键 (i,j) 都映射到第 j/Kth 组中的一个 reducer。假设：存在 K 个 reduce 节点，并且 key 映射到 j/Kth 个 reduce 节点。

疑问：一些reduce节点是否组合在一起？说 0,1,2 节点被分组为 Group-0？

声明：文档的数据最多被复制K次，这样每个reducer都可以传递文档的全部内容。

所以这意味着K等于否。减速器节点数？如果不是这样，我们就是在浪费计算节点，而不是使用它们，对吗？

主要疑惑：K是否等于Reducer节点的数量？？

希望得到回应！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:21:49.017

在节点变得不必要后针对您当前的程序测试相同的程序中断。我发现通常最好在操作完成后中断操作。

但是，如果操作只知道在操作期间稍后处理，则可能需要允许代码继续执行到最后。

# java - Quartz API 和 Joda Time API 之间有什么关系吗？

> ID：15319458
> 
> 赞同：9
> 
> 时间：2013-03-10T06:05:59.303
> 
> 标签：java, quartz-scheduler, jodatime

是否可以在 JodaTime 中创建一个日期，然后使用 JodaTime 对象让 Quartz 安排工作？我们可以给 Quartz API 一个 Period jodaPeriod 以便在一天的特定时间段内运行任务吗？

这两个 API 是否以任何方式相关和/或兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:42:31.703

AxonFramework 有一个[QuartzEventScheduler](http://www.axonframework.org/apidocs/2.0/org/axonframework/eventhandling/scheduling/quartz/QuartzEventScheduler.html)，它看起来就像你想要的那样。

这是[下载页面](http://www.axonframework.org/download/)，它在 Apache 2.0 许可下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:29:06.600

Quartz 提供了一个非常全面的 API，您可以随意扩展它。
您需要创建的钩子将针对[Trigger](http://quartz-scheduler.org/api/2.1.7/org/quartz/Trigger.html)接口，我之前已经创建了一个，但没有使用 Joda 时间。

从您的问题的声音来看，如果您想创建一个在一天中的特定时间段运行的作业，您也可以尝试使用`CronTrigger`. 例如，在上午 9 点到 11 点之间每分钟运行一次，您可以这样做

```
* 9-10 * * * 
```

显然，Joda 使配置变得更容易，但您的系统管理员更尊重您的 cron...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T14:05:23.333

我已经开始在我公司应用程序的较新部分中使用 Joda Time，我发现通过将 Joda Time 对象转换回 java.util.Date 旧部分更容易链接到旧部分（包括 Quartz 调度）还在期待。我希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T15:26:13.807

[TriggerBuilder](http://quartz-scheduler.org/api/2.1.7/org/quartz/TriggerBuilder.html)有一个如何手动安排作业的片段：

```
JobDetail job = newJob(MyJob.class)
         .withIdentity("myJob")
         .build();

Trigger trigger = newTrigger() 
         .withIdentity(triggerKey("myTrigger", "myTriggerGroup"))
         .withSchedule(simpleSchedule()
             .withIntervalInHours(1)
             .repeatForever())
         .startAt(futureDate(10, MINUTES))
         .build();

scheduler.scheduleJob(job, trigger); 
```

你将不得不为 startAt() 和 withIntervalInHours() 做一些转换工作......你得到了漂移

# php - 为什么用 PHP 和 C 编写服务器端脚本更容易（包含所有 Web 相关函数的库）？

> ID：15319460
> 
> 赞同：1
> 
> 时间：2013-03-10T06:06:09.097
> 
> 标签：php, c

如果 PHP 是用 C 编写的，那么在 PHP 与 C 中编写服务器端脚本之间究竟有什么区别，尤其是如果我使用 C 的 Web 框架可以处理 mysql 连接、SESSIONS 等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:12:15.447

这就像问为什么你不会在汇编中编写服务器端脚本。PHP 是一种高级语言，旨在使编写这些脚本更容易。不同之处在于完成工作所需的时间和精力......并使其在网络服务器上运行。

例子：

*   内存管理
*   内置全局变量，如 $_REQUEST、$_SERVER 等
*   内置会话机制
*   内置处理 HTTP 标头（读取和写入响应）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:12:12.103

PHP 程序使用更多内存且运行速度较慢，但​​有一个非常适合的大型库。编写 C 语言比较繁琐，而且会花费较长的时间，但它们会快速高效。速度和效率有多快，取决于程序。

如果您的 PHP 程序由于一段 PHP 代码（因为它是解释代码）而没有性能瓶颈，我可以建议您继续使用 PHP。

或者，顺便说一下，您可能还想尝试[Go](http://golang.org)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T06:12:34.347

你问了一个非常笼统的问题，所以这里有一个非常笼统的答案

PHP - 源自 perl，主要用作 Web 编程语言。一般解释，虽然一些项目，如 HipHop 编译它。它具有许多专为生成动态 Web 内容而设计的功能。其他东西可以作为图书馆使用。

C - 源自 Algol 68。用于对您能想象到的一切进行编程，至少在某一时刻。许多大型系统（例如 Linux 内核）完全用 c 编写。C 语言的特性很少，即使是基本的字符串处理也需要使用 C 标准库。

C 和某些 PHP 版本之间的一个出乎意料的相似之处是单一的全局命名空间。

你可以纯粹用 C 写一个网站。它以前做过，可以再做一次。但是，这样做的理由很少。最多，值得用 C 语言编写您网站的一小部分（甚至只是一些性能关键操作），其余部分则使用 PHP、Python 等解释性语言编写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T06:13:06.067

您绝对可以使用 C 作为您的服务器端应用程序。**话虽如此，请注意 PHP 是一种高级语言，它将带来更好的托管代码和更短的开发时间。**

例如，谷歌使用 C++ 来加速其基础设施中的关键系统。但是，如果您的目标不是追求性能，那么使用 PHP 之类的高级语言可能会更好。

**PHP 是用 C 编写的。**这意味着，如果您想用 C 编写服务器端应用程序，您必须自己完成所有额外的工作。（即内存管理、会话机制等...）

# javascript - 如何将数组数据存储在表中？

> ID：15319462
> 
> 赞同：0
> 
> 时间：2013-03-10T06:06:38.337
> 
> 标签：javascript, jquery, ajax

我希望用户在文本字段中输入任何字母，当他/她单击`Find!`按钮时，它将通过我的 php 文件并找到以该字母开头的单词列表（当然它只是有限数量的单词）。我想将它输出到一个有 5 列的表格中，每个单元格包含一个单词。

像这样的东西：

![5列](../Images/59c9d7a23ac7817f7bb09c4718fa555e.png)

> **在我的 HTML 中：**

```
 <label>
    Enter any alphabet:
      <input name="alphabet" type="text" id="alphabet"></label>
      <input type="button" value="Find!" id="goFind">

<table border="1" id="output">
</table> 
```

> **和 Javascript：**

```
$(document).ready(function () {
  $.ajaxSetup({
    cache: false
  });

  var bunchOfWords = function (data) {
    var listOfWords = "";

    if(!Array.isArray(data)) {
      return false;
    }
    else {
      for(i = 0; i < data.length; i = +5) {
        listOfWords += "<tr><td>" + data[i] + "</td>" +
          "<td>" + data[i] + "</td>" +
          "<td>" + data[i] + "</td>" +
          "<td>" + data[i] + "</td>" +
          "<td>" + data[i] + "</td></tr>";
      }
    }
  };

  $("#goFind").click(function () {
    var theWord = $("#alphabet").val();
    $("#output").html("Loading...");  //gives the user an indication that it's loading
    $.getJSON("wordslookup.php", "startswith=" + theWord, listOfWords);
  });
}); 
```

似乎无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:14:34.370

`listOfWords`超出范围`$.getJSON`也不是函数，您应该改为传递`bunchOfWords`给`$.getJSON`。要将数据放入表中，只需替换当前的内部 html，`$("#output").html(listOfWords);`

# mysql - Codeigniter：我应该如何在侧边栏中列出类别？我应该查询每个页面加载，还是有一种可接受的方式来缓存这些数据？

> ID：15319465
> 
> 赞同：2
> 
> 时间：2013-03-10T06:06:45.493
> 
> 标签：mysql, codeigniter, codeigniter-2, categories

我正在 Codeigniter 中建立一个小店面，我想知道列出类别的公认方式是什么。当然，在每次页面加载时对类别表进行查询似乎有点精神错乱。我目前正在使用模板方案，这样我就可以`some_view`加载

```
$data['page'] = 'some_view';
$this->load->view('index', $data); 
```

其中`index`将模板包装在对`some_view`. 是否有列出类别的标准 Codeigniter 方式，或者我应该`$data`为每个页面加载将类别列表传递到数组中（通过数据库调用）？我宁愿不对其中的值进行硬编码，但我想如果有必要我可以。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:51:29.797

您可以查看使用[http://ellislab.com/codeigniter/user-guide/database/caching.html](http://ellislab.com/codeigniter/user-guide/database/caching.html)来缓存 Db 调用

# codeigniter - xss clean 和 global xss 过滤的区别

> ID：15319470
> 
> 赞同：1
> 
> 时间：2013-03-10T06:08:00.153
> 
> 标签：codeigniter, xss

我是一名初学者 codeigniter 开发人员，需要您的帮助。我有一个表单，它被提交给控制器中的一个函数，我想对从表单接收到的发布数据应用 form_validation 库规则。我需要知道的是：输入类中的 $config['global_xss_filtering'] 开关是否与 form_validation 类中的 xss_clean 规则执行相同的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:45:12.350

是的，它是一样的。如果您通过配置文件启用了 $config['global_xss_filtering'] 您不必在表单验证中调用 xss_clean，

但是如果您关闭了 $config['global_xss_filtering']，则必须在表单验证中调用 xss_clean，并且还必须在 input->post 函数中添加其他参数（TRUE 或 FALSE）以进行 xss 过滤。见下文。

```
$name = trim($this->input->post('name',TRUE)); 
```

如果您在应用程序中使用 WYSIWYG 编辑器，这将很有帮助，然后您必须关闭 $config['global_xss_filtering'] 并且您必须像上面一样在 input->post 函数中传递其他参数，TRUE - 用于启用过滤和 FALSE用于禁用（无论您在何处使用所见即所得编辑器）。

# javascript - 在 IE 8 中，日期为 NaN/Nan/Nan

> ID：15319479
> 
> 赞同：0
> 
> 时间：2013-03-10T06:09:43.603
> 
> 标签：javascript, html, internet-explorer-8

在 IE8 中，我的日期没有正确显示。我尝试了许多实现，但它们无法正常工作。这是我最初在 FF、Chrome 和 IE9 中工作的内容。

```
var date = TranslateDate(new Date(CreatedDate); 
```

其中 CreatedDate 是 ac# datetime 对象。

```
function TranslateDate(d) {
    return GetMonth(d) + '/' + GetDay(d) + '/' + d.getFullYear();
}

function GetMonth(d) {
    var month = d.getMonth() + 1;
    return (('' + month).length < 2 ? '0' : '') + month;
}

function GetDay(d) {
    var day = d.getDate();
    return (('' + day).length < 2 ? '0' : '') + day;
} 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:09:34.843

到目前为止，最简单的解决方案是使用 moment.js。确保保存文件，而不是根据 IE 8 的 url 查找文件。

# android - 在 android 的列表视图中删除和编辑的快捷方式

> ID：15319482
> 
> 赞同：0
> 
> 时间：2013-03-10T06:10:16.347
> 
> 标签：android, listview

我有一个列表视图，它是一个事件列表。对于每个事件，我希望在其标题旁边有快捷图标，以便编辑和删除。如果我选择其中一个，它应该将我带到另一个意图来编辑/删除事件。我如何实现这一目标？

我的 xml 有一个这样的列表视图：

```
<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView> 
```

对于每个文本视图：

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"  
 android:id="@+id/rowTextView"   
 android:layout_width="fill_parent"   
 android:layout_height="wrap_content"  
 android:padding="10dp"  
 android:textSize="16sp" >  
</TextView> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:59:37.827

您需要做的是创建一个自定义`Adapter`并覆盖该`getView`方法，如下所示：

```
 private class MySecondAdapter extends ArrayAdapter<MiniTask>
{   
    private ArrayList<MiniTask> list;

    public MySecondAdapter(Context context, int textViewResourceId, ArrayList<MiniTask> miniTaskList) 
    {
        super(context, textViewResourceId, miniTaskList);
         this.list = new ArrayList<MiniTask>();
         this.list.addAll(miniTaskList);
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        miniTask = miniTaskList.get(position);
        ViewHolder holder = new ViewHolder();
        {
            LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.check_list_item_new, null);

            holder.title = (TextView) convertView.findViewById(R.id.tvItemTitle);
            holder.commentsPicturesButton = (ImageView) convertView.findViewById(R.id.iAddCommetOrPicture);
            holder.commentsPicturesButton.setTag(position);
            holder.commentsPicturesButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) 
                {
                     Intent intent = new Intent(getApplicationContext(), PicturesAndCommentsActivity.class);
                     intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                     intent.putExtra("mini_task_text", miniTask.getTitle());
                     startActivity(intent);
                }
            });
            holder.selected = (CheckBox) convertView.findViewById(R.id.cbCheckListItem);
            holder.selected.setTag(position);
            holder.selected.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v)
                {    
                    {                               
                        Log.d(TAG, "pressed the checkbox: " + v.getId() + " in position: " + position + " tag: " +v.getTag() +" and item from array: " + miniTaskList.get(position) );
                        CheckBox checkbox = (CheckBox) v;
                        miniTaskList.get(position).setSelected(checkbox.isChecked());   
                        numOfCheckedMiniTasks = 0;
                        for(int i=0;i<miniTaskList.size();i++)
                        {
                             miniTask = miniTaskList.get(i);
                             if(miniTask.isSelected())
                             {
                                numOfCheckedMiniTasks ++;
                             }
                        }
                        int percent = (int)(numOfCheckedMiniTasks * 100.0f) / miniTaskList.size();
                        Log.d(TAG, "the percentage is: " +percent);
                        tasksRepository.get(tasksRepository.indexOf(task)).setMiniTasksPercentageComplete(percent);
                    }
                }
            });

        }
        holder.title.setText(miniTask.getTitle());
        holder.selected.setChecked(miniTask.isSelected());
        return convertView;
    }
} 
```

在这种情况下，我每行都有一个复选框，您可以忽略它，并且持有者是：

```
static class ViewHolder 
{
     TextView title;
     CheckBox selected;
     ImageView commentsPicturesButton;
} 
```

虽然每一行的 XML 布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
android:background="@drawable/try2"
android:orientation="vertical" >
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <CheckBox 
        android:id="@+id/cbCheckListItem"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_marginLeft="10dp"
        android:layout_marginBottom="10dp"
        android:background="@drawable/checkbox_checklist_selector" 
        android:button="@drawable/checkbox_checklist_selector" />
    <TextView
        android:id="@+id/tvItemTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingRight="10dp"
        android:paddingTop="13dp"
        android:text="@string/checklist_item_string"
        android:textColor="@color/my_darker_gray" />
  </LinearLayout>

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:paddingTop="6.5dp" >

    <ImageView
        android:id="@+id/iAddCommetOrPicture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:contentDescription="@drawable/comment_or_photo_icon"
        android:src="@drawable/comment_or_photo_icon" />
</RelativeLayout> 
```

**更新：**

```
 holder.iParameterWidget.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                currentParameterPosition = position;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:15:26.570

为此，您必须单独创建自定义行。你可以找到很多例子。您可以看到以下链接开始

[http://androidzoo.wordpress.com/2011/10/28/working-with-listview-in-android-customize-listview-add-item-via-a-button-click-and-also-clickable-each-每行按钮/](http://androidzoo.wordpress.com/2011/10/28/working-with-listview-in-android-customize-listview-add-item-via-a-button-click-and-also-clickable-each-button-in-each-row/)

[http://www.geekmind.net/2009/11/android-custom-list-item-with-nested.html](http://www.geekmind.net/2009/11/android-custom-list-item-with-nested.html)

# c++ - C++ Windows 替代 lrint？

> ID：15319494
> 
> 赞同：2
> 
> 时间：2013-03-10T06:12:27.383
> 
> 标签：c++, math, math.h

windows中C99 lrint函数的正确替代方法是什么？

```
#define lrint(x) (floor(x+(x>0) ? 0.5 : -0.5)) 

/* and if fesetround(0) behavior is required*/

#define lrint(x) ((int)(x)) 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:26:19.830

没有 [simple] 单一定义`lrint`来执行 C99 标准定义的行为。这是因为 的行为`lrint`由对 的单独调用控制[`fesetround`](http://linux.die.net/man/3/fesetround)。相反，您应该为应用程序的所需行为使用具有保证语义的单独舍入函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T15:29:56.463

```
floor(x+(x>0) ? 0.5 : -0.5) 
```

只会正确舍入正数，而不是负数，因为 floor() 向负无穷大舍入，这意味着 floor(-7.1)=-8 ，并且引用的代码不能解决这个问题： floor(-7.1-0.5)= -8 仍然，而正确舍入到最接近的整数必须导致 -7。以下代码可以正确舍入：

```
return int(x + ((x >= 0.0) ? 0.5 : -0.5)); 
```

或者，

```
return ((x >= 0.0) ? floor(x+0.5) : ceil(x-0.5)); 
```

# heroku - 密钥无权访问应用程序

> ID：15319495
> 
> 赞同：0
> 
> 时间：2013-03-10T06:12:31.943
> 
> 标签：heroku, ssh

我在这里浏览了[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)中的教程，然后我将 git 的远程地址更改为 Heroku 仪表板中的应用程序之一。但是之后，当我尝试推动掌握时，我得到

```
git push heroku master

 !  Your key with fingerprint 55:55:55:55:55:55 is not authorized to access damp-garden-2012.

fatal: The remote end hung up unexpectedly 
```

我试过`ssh-add -d`了，但没有用

编辑：当我这样做时`ssh-add -D`，`ssh-add -l`我仍然得到：

```
2048 33:33:33:33:33:33:33 one@email.com (RSA)
2048 44:44:44:44:44:44:44 different@email.com (RSA) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:27:33.317

您可以通过 来检查 Heroku 拥有的密钥`heroku keys`，以添加新的密钥使用`heroku keys:add`。有关管理密钥的更多信息，请访问[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

# android - Android 检查设备是否支持应用内计费

> ID：15319500
> 
> 赞同：5
> 
> 时间：2013-03-10T06:13:14.190
> 
> 标签：android, in-app-purchase

我遵循本指南

[http://developer.android.com/google/play/billing/billing_integrate.html](http://developer.android.com/google/play/billing/billing_integrate.html)

刚开始做绑定服务时，如何查看Google Play是否真的支持应用计费？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T06:47:37.003

在 * 应用内计费采购项目上查看此[链接](http://developer.android.com/google/play/billing/api.html#purchase)*

> 您的应用程序向 Google Play 发送一个 isBillingSupported 请求，以确定您正在使用的 In-app Billing API 的目标版本是否受支持。

# javascript - 每个图形节点上的链接动画/过渡 - D3.js

> ID：15319501
> 
> 赞同：1
> 
> 时间：2013-03-10T06:13:19.970
> 
> 标签：javascript, animation, d3.js, transitions

我希望能够更改我使用[d3.js](https://github.com/mbostock/d3)创建的图中每个节点的半径。但是，我想一次更改每个节点的半径，并且我希望能够控制每次更改之间的延迟以及节点的顺序。

现在，这就是我在代码方面所拥有的：

```
var nodes = svg.selectAll(".node");
nodes.each(function() { 
  d3.select(this).
  transition().
  delay(100).
  attr("r", "5") 
}); 
```

您可以使用以下链接中的代码简单地复制它：http: [//bl.ocks.org/mbostock/4062045](http://bl.ocks.org/mbostock/4062045)。我上面粘贴的代码只是上述链接中代码的补充。

当我运行它时，`nodes`我的图形同时转换，即同时增大大小（半径）。但是，我希望它们一次一个地过渡，即增大尺寸（半径）。我再说一遍，我希望能够控制：

1.  每个和 `delay`之间的过渡`node`
2.  它的顺序`nodes`经历了转变。

任何指针、教程，甚至其他 stackoverflow 答案都会很棒。理想情况下，我想要一些代码示例。

就在线参考而言，我最接近的是关于 d3.js 转换的教程的这个小节：http: [//bost.ocks.org/mike/transition/#per-element](http://bost.ocks.org/mike/transition/#per-element)。但是，它缺少具体的代码示例。我一般是 d3.js 和 javascript 的新手，如果没有具体的代码示例，我无法掌握它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:27:36.137

您可以通过根据每个节点的索引计算延迟来很容易地做到这一点。Mike Bostock 在[这里](http://bl.ocks.org/mbostock/3885705)有一个这样的实现示例。这是相关代码：

```
var transition = svg.transition().duration(750),
    delay = function(d, i) { return i * 50; };

transition.selectAll(".bar")
    .delay(delay)
    .attr("x", function(d) { return x0(d.letter); }); // this would be .attr('r', ... ) in your case 
```

要控制过渡的顺序，您所要做的就是对数组进行排序，以便元素的索引反映您想要的动画流。要了解如何对数组进行排序，请参阅有关 JavaScript 的[array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)方法的文档，另请参阅 D3 API 参考的[数组 > 排序](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_ascending)部分。

# solr - Solr MLT：获取具有相似关键字的所有记录

> ID：15319502
> 
> 赞同：1
> 
> 时间：2013-03-10T06:13:58.010
> 
> 标签：solr, morelikethis

我有一个包含我想要的所有可搜索文本的字段，其中包含记录的关键字，如下所示：

```
 <field name="boardtext" type="text" indexed="true" stored="false" required="false" omitTermFreqAndPositions="true" />
    <copyField source="board_name"         dest="boardtext"/>
    <copyField source="offers_titles"      dest="boardtext"/>
    <copyField source="high_category_name" dest="boardtext"/> 
```

但是每当我尝试通过该字段获取类似记录（MLT）时，返回的结果**为零**。我错过了什么吗？Solr 在寻找什么？

**更新：**

文本类型分析器：

```
 <!-- in this example, we will only use synonyms at query time -->
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms_test.txt" ignoreCase="true" expand="false"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms_list.txt" ignoreCase="true" expand="false"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms_auto.txt" ignoreCase="true" expand="false"/>

        <!-- Case insensitive stop word removal.
          add enablePositionIncrements=true in both the index and query
          analyzers to leave a 'gap' for more accurate phrase queries.
        -->

        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" protected="protwords.txt" />

            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1" protected="protwords.txt" />

            <!-- Common Grams filter 
            <filter class="solr.CommonGramsFilterFactory" words="commongrams.txt" ignoreCase="true"/>-->

        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <filter class="solr.PatternReplaceFilterFactory" pattern="(\bcom\b)" replacement="\.$1" replace="all"/>

            <!-- Common Grams filter 
            <filter class="solr.CommonGramsFilterFactory" words="commongrams.txt" ignoreCase="true"/>-->

        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
            <filter class="solr.ASCIIFoldingFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
            <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-special-chars.txt"/>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>

            <filter class="solr.SynonymFilterFactory" synonyms="synonyms_test.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms_list.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms_auto.txt" ignoreCase="true" expand="true"/>
        <!-- <filter class="solr.SynonymFilterFactory" synonyms="synonyms_wn.txt" ignoreCase="true" expand="false"/> -->

        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" protected="protwords.txt" />

            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1" protected="protwords.txt" />

            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <filter class="solr.PatternReplaceFilterFactory" pattern="(\bcom\b)" replacement="\.$1" replace="all"/>

            <!-- Common Grams filter 
            <filter class="solr.CommonGramsQueryFilterFactory" words="commongrams.txt" ignoreCase="true"/>-->

        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
            <filter class="solr.ASCIIFoldingFilterFactory"/>
      </analyzer>
    </fieldType> 
```

# vim - 如何使用 Latex-Suite 在 vi m 中键入两个左大括号？

> ID：15319504
> 
> 赞同：3
> 
> 时间：2013-03-10T06:14:15.810
> 
> 标签：vim, latex-suite

当我键入两个左大括号`{{`时，Latex-Suite 将它们扩展为`\left\{ \right\}<++>`. 我使用标记来组织我的文件，所以不用说这很烦人。Latex-Suite 是否提供了一种输入两个左大括号的方法，或者是否有一种方法可以临时切换其绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:18:41.770

您可以通过注释掉该行来全局禁用此功能

```
call IMAP ('{{', '\left\{ <++> \right\}<++>', "tex") 
```

在`main.vim`vim 乳胶插件中。

就我而言，它是我的`~/.vim/ftplugin/latex-suite/main.vim`.

顺便说一句，我借此机会也禁用了键入时调用的函数`$$`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T14:22:23.740

您也可以简单地添加一个 imap 来为您执行此操作：

```
inoremap \{{ {{ 
```

如果您以这种方式定义它，它不会扩展 imap 定义中的大括号，它只会插入大括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:38:17.443

您可以避免触发由 Latex-Suite 定义的映射，方法是通过`<C-v>`（通常`<C-q>`在 Windows 上重新映射到）插入第二个大括号：`{<C-v>{`。

# ruby - 实例化对象时参数数量错误

> ID：15319505
> 
> 赞同：1
> 
> 时间：2013-03-10T06:14:18.923
> 
> 标签：ruby, object, instantiation

我正在从另一个对象中实例化一个对象，并且收到“参数数量错误（2 比 1）错误。

这是我的初始化函数（里面什么都没有）

```
class Handler::AtReply
    def initialize(stream, logger)
      # Actual operation for this handler goes here
    end
end 
```

我在哪里称呼它：

```
def load_handlers
  @logger.log("Loading Handlers")
  StatusBot::Handler.constants.sort.each do |handler_name|
    puts handler_name
    @logger.log("Loading Handler: #{handler_name}")
handler = StatusBot::Handler.const_get(handler_name).new(@stream, @logger)
  end
end 
```

在实例化对象时我做错了什么，我需要做什么才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:39:41.613

我不是 100% 确定为什么要修复它，但我从每个处理程序都有自己的初始化更改为从处理程序“父”类继承的处理程序，然后使用单独的“加载”方法来完成我的工作本来想做的。

# linq - 如何通过连接在 LINQ 中使用聚合函数

> ID：15319506
> 
> 赞同：1
> 
> 时间：2013-03-10T06:14:19.773
> 
> 标签：linq

在LINQ表达式中需要帮助，我有 2 个表`Article`，`comments`外键是`Article_id``article_id,Article_title,Total_Comments`

故事结构：

```
table 1(Article) : Article_ID,Article_Title.. etc
table 2(comments ): Comment_auto_id,Comment_text,Comment_by(User_ID),Article_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:05:21.870

类似的东西？

```
from article in Articles
join comment in Comments on article.Article_ID equals comment.ArticleID into articleComments
select new {
  Article = article,//or more detailed if you want only part of Articles entity
  Total_Comments = articleComments.Count()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:09:47.333

也许您需要使用 .GroupJoin() 扩展方法。来源：http: [//msdn.microsoft.com/en-us/library/system.linq.enumerable.groupjoin.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupjoin.aspx)

# wcf - 无法订阅 CheckinEvent

> ID：15319507
> 
> 赞同：0
> 
> 时间：2013-03-10T06:14:27.667
> 
> 标签：wcf, tfs

我正在尝试订阅 CheckinEvent，由于某种原因，我的 Notify 方法没有被调用。这是我的合同——

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
namespace TFSubscriber
{
    [ServiceContract(Namespace = "http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Notification/03")]
    public interface IRollupService
    {

        [OperationContract(Action = "http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Notification/03/Notify")]
        [XmlSerializerFormat(Style = OperationFormatStyle.Document)]
        void Notify(string eventXml, string tfsIdentityXml);

    }
} 
```

我的实现非常简单，空的方法。我在我的 Notify 方法中放置了一个断点，它没有被调用。

这就是我订阅 CheckinEvent 的方式 -

```
C:\Program Files\Microsoft Team Foundation Server2010\Tools>bissubscribe.exe /eventType CheckInEvent /address http://localhost:4556/Rollupservice.svc /collection http://localhost:8080/tfs/defaultcollection 
```

我已经将一个解决方案添加到源代码管理中，并且我正在检查一些文件并且断点没有被命中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:36:12.693

你确定你的订阅有效吗？例如，尝试记录有关输入参数 eventXML 的一些信息。因为，您需要确定您的订阅是否有效。如果是这样，您可以运行您的 SVC 项目并在其上附加一个调试器。这就是调试器应该如何击中你的断点。

# haskell - 如何为 Haskell 中的类创建相等运算符？

> ID：15319508
> 
> 赞同：4
> 
> 时间：2013-03-10T06:14:34.273
> 
> 标签：haskell

我有这种数据类型，我想为它定义一个相等运算符。Mlist 应该是 Eq 的一个实例。

```
data Mlist a = Mlist [a]

instance Eq a => Eq (Mlist a) where
    (==) :: [a] -> [a] -> Bool 
```

相等运算符应该允许我检查这一点（加上顺序无关紧要）：

```
m1 = Mlist [1,2,3]
m2 = Mlist [3,1,2]
-- then m1 equals m2
m3 = Mlist [3,2,1,5]
-- then m1 not equals m3 
```

上面的代码不起作用，有人可以帮忙吗？

编辑：这是一个新版本，但它不工作......

```
instance Eq a => Eq (Mlist a) where
    (==) :: (Eq a) => [a] -> [a] -> Bool
    (==) [] [] = True
    (==) [] _ = False
    (==) _ [] = False
    (==) (hd:tl) b = (==) tl $ delete hd b 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T06:52:37.137

要创建`Mlist a`的实例`Eq`，您必须定义

```
(==) :: Mlist a -> Mlist a -> Bool 
```

或者

```
(/=) :: Mlist a -> Mlist a -> Bool 
```

本质上，您需要实现一个可以确定两个列表是否相等的函数。由于`Eq`是唯一的约束，您可以使用[`Data.List.\\`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3a-92--92-). 例如：

```
instance Eq a => Eq (Mlist a) where
    Mlist xs == Mlist ys = length xs ==  length ys && null (xs \\ ys) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:15:59.000

解决您的编辑问题：新版本不起作用，因为实例声明不应具有类型签名。类型签名由类给出。

代码仍然不正确，因为您没有考虑`hd`in 不在的情况`b`。在这种情况下，`delete hd b`is just `b`，所以特别是 if `tl == b`then you'll return `True`，当你真的应该return 时`False`。

# ruby - ruby 中“nil”的“非对象性”

> ID：15319511
> 
> 赞同：1
> 
> 时间：2013-03-10T06:14:48.220
> 
> 标签：ruby

从 Ruby 的一个在线资源中，我发现了以下语句：

> 特殊对象 nil 实际上是一个对象（它是一个名为 NilClass 的类的唯一实例）。但在实践中，它也是一种非对象。nil 的布尔值是假的，但这只是它的非对象性的开始。

虽然`nil`响应方法调用如下，就像其他对象一样，`non-objectness`作者试图说：

```
nil.to_s #=> ""
nil.to_i #=> 0
nil.object_id #=> 4
nil.inspect #=> "nil" 
```

任何人都可以在这里帮助我理解哲学`non-object-ness`吗`nil`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:06:32.590

`nil`等价`null`于其他语言。通常，`null`不应将其视为合理的值。

然而——正如你可能注意到的——Ruby 语言的语法在对象上的方法调用上完成了所有事情，比 Python 做的事情要多得多。确定价值观的健全性是其中的一部分。

考虑以下示例

```
def foobar(arg)
  if arg < 1
    return nil
  else
    return "Oh, hi!"
  end
end

res = foobar(rand(2))
puts res unless res.nil? 
```

`nil?`如您所见，在最后一行中，我通过调用方法来检查结果是否为零。这是一种最有效的方法，因为比较运算符可以重载并且可以做非常不同的事情。`nil?`仅当`true`值可以被视为`nil`（通常，如果值为 nil - 但`nil?`方法也是可重写的，即使它非常不鼓励。开发人员通常不会重写此方法）。

它的另一个有用属性`nil`是有一个`to_s`方法，所以你可以`x = "#{nil}`得到一个空字符串。

如果`nil`不是一个对象，您就不能调用`nil?`它或其他有用的函数，但是您可能会遇到像 Java 中的 NullPointerException 或像 C/C++ 中的分段错误。而且通常是没有意义的。

# ember.js - Ember.js itemController 与模型和控制器混淆

> ID：15319513
> 
> 赞同：1
> 
> 时间：2013-03-10T06:15:23.320
> 
> 标签：ember.js

假设我已经正确设置了所有内容。我有一个模型`App.User`，我有一个控制器`App.UsersIndexUserController`。

* * *

***好 好 好 好 好***

以下视图模板...

```
<script type="text/x-handlebars" data-template-name="users_index_template">
  {{#each user in users}}
    {{log user}}
    {{#linkTo users.user user}}{{user.name}}{{/linkTo}}
  {{/each}}
</script> 
```

...这会在浏览器的 console.log 中输出以下内容 ...

```
<App.User:ember258> { created_at="2013-03-05T01:51:15Z", id=76 ... etc ... } 
```

* * *

***糟糕 糟糕 糟糕 糟糕 糟糕***

但是，当`itemController`在我的模板中使用指令时，就像这样......

```
<script type="text/x-handlebars" data-template-name="users_index_template">
  {{#each user in users itemController="usersIndexUser"}}
    {{log user}}
    {{#linkTo users.user user}}{{user.name}}{{/linkTo}}
  {{/each}}
</script> 
```

...这会在浏览器的 console.log 中输出以下内容 ...

```
<App.UsersIndexUserController:ember253> { target=<Ember.ArrayController:ember245> ... etc ... } 
```

* * *

我期待为这两种情况`{{log user}}`返回一个实例`App.User`。但正如您在上面看到的，它返回一个`App.UsersIndexUserController`使用`itemController`指令时的实例，并返回和`App.User`不使用`itemController`指令时的实例。

我是否应该`App.UsersIndexUserController`明确返回一些对象，以便在上述两种情况下`{{log user}}`都会返回`App.User`？

```
App.UsersIndexUserController = Ember.ObjectController.extend({
}); 
```

我正在使用 Ember.js v1.0.0-rc1

```
// Version: v1.0.0-rc.1
// Last commit: 8b061b4 (2013-02-15 12:10:22 -0800) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T09:03:51.803

我认为这种行为是对的。在第二种情况下，您明确告诉 ember 将每个用户对象包装在代理 (UsersIndexUserController) 中。因此，变量 user 的日志记录产生了这个代理的一个实例。从调试的角度来看，我完全同意日志助手的行为。一开始可能不直观，但如果不是这样的话，您将看不到您正在处理的真实对象。想象一下，您的 itemController 将定义一个计算属性，也称为名称。在这种情况下，{{user.name}} 将访问控制器而不是模型上的属性。这很可能是一个错误，通过助手的这种行为，您可以更容易地发现错误。

# html - Database + Java Servlet：如何运行数据库？

> ID：15319514
> 
> 赞同：0
> 
> 时间：2013-03-10T06:15:30.293
> 
> 标签：html, database, servlets, web

对于一个项目，我正在创建一个使用登录功能并有一个数据库来存储用户信息的小型网站。

我想知道是否可以简单地创建一个数据库，将它放在一个包含我所有其他网站文件的目录中，然后将该文件夹发送给某人，以便他们打开该文件夹时，他们将能够使用该网站，以及所有登录功能。

我知道如何在本地主机上运行 postgres 数据库，但我不明白如何将文件夹发送给其他人，因为他们显然无法访问我本地主机上的数据库。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:24:48.400

数据库必须在服务器上运行，它不仅仅是您读写的常规文件。如果您希望其他人访问您的数据库，您可以生成一个脚本，该脚本将从头开始创建数据库并发送该脚本。接收者将运行脚本并在其运行的服务器实例上创建数据库。

第二种选择是通过互联网直接连接到您的服务器。您必须有一个公共 IP（连接者知道）和适当配置的防火墙。

# php - 从 Microsoft Word 发布博客时出现格式错误

> ID：15319518
> 
> 赞同：5
> 
> 时间：2013-03-10T06:15:56.300
> 
> 标签：php, wordpress, windows-live-writer

我在 wodpress.stackexchange.com 上发布了这个问题，但没有得到任何回应。

我意识到这可能是 PHP 中的一个编程问题。

我正在尝试从 Microsoft Live Writer 将博客文章发布到基于 wordpress 的网站。这是我在 Microsoft 添加的示例文本，我也发布了。

```
" Temporary Blog Post
I am adding a temporary blog post here 
Let’s see how it goes
Thanks" 
```

然而，当我发表这篇文章时，它是这样的

```
/pI am adding a temporary blog post here
/ppLet’s see how it goes
/ppThanks 
```

注意`\pp`在文本中添加的标签。

知道格式错误背后的原因吗？我认为当您从 Microsoft Word 或 Microsoft Live Writer 发布时，它应该与 Microsoft Word/Live Writer 中的外观相同。

**更新**：当我从 Windows Live Writer 等其他发布软件发布时，我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T09:04:25.550

默认情况下，WordPress 在显示“the_content”时会自动在整个位置插入段落标签——这通常会在您尝试分隔文本时妨碍您，并且还会产生验证问题（插入隐式 p 标签）。如果您想从内容中去除自动插入的段落标签，只需在模板文件中的“the_content”标签上方插入这一行：

```
<?php remove_filter (‘the_content’, ‘wpautop’); ?> 
```

**或者**

使用可以帮助您解决问题的[cleanup_shortcode_fix()函数。](http://pastebin.com/USBetJAj)

查看以下链接了解更多信息，

1.  [删除 p 标签自动换行](https://wordpress.stackexchange.com/a/7848/18168)
2.  [删除 WordPress 帖子中的 <p> 和 <br/> 标签](https://stackoverflow.com/questions/6625458/removing-p-and-br-tags-in-wordpress-posts/6627460#6627460)
3.  [wordpress-wrapping-shortcodes-with-p-tags](http://www.simonbattersby.com/blog/2011/02/wordpress-wrapping-shortcodes-with-p-tags/)
4.  [禁用 wpautop](http://www.google.com/search?hl=en&q=disable%20wpautop&oq=disable%20wpautop&gs_l=serp.12...0.0.2.277007.0.0.0.0.0.0.0.0..0.0.les;..0.0...1c..6.serp.jPLX9HjEDXo)

这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T11:43:07.383

我发现[这篇](http://wordpress.org/support/topic/stop-wordpress-from-adding-p-tags-and-removing-line-break)文章似乎可以解决这个问题，虽然它很旧，所以我最初的问题是你使用的是什么版本的 wordpress？

要停止**wordpress**添加标签，只需添加：

```
 remove_filter ('the_content', 'wpautop'); 
```

到你的functions.php的顶部

附带说明一下，我不使用 word 的自动发布功能，我发现将文档剪切并粘贴到**Ultimate TinyMCE**是保持格式的最佳方法，但这只是我的意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:01:25.403

首先将其粘贴到记事本中，然后将其从记事本中重新复制，然后再将其粘贴到 wordpress 编辑器中。

那应该这样做。

或者，如果您不想使用记事本，

编辑器中有一个按钮，可让您直接从 Word 粘贴内容。这消除了 Word 用于在页面上布置内容的特殊格式，并使您的网站上的内容运行良好。（该按钮位于可视化编辑器的“厨房水槽”中，并在下图中圈出。）替代文本

![在此处输入图像描述](../Images/8eff910cbc731cf981dd8531cc4690cd.png)

# python - 将 Python 方法转换为 C 扩展的好处？

> ID：15319519
> 
> 赞同：1
> 
> 时间：2013-03-10T06:16:04.857
> 
> 标签：python, c, python-extensions

一个相对简单的问题：
如果我将一个受 CPU 限制的瓶颈方法从 Python 转换为 C 扩展（大致实现相同的算法），

*   我应该期望速度和性能提高多少？
*   是什么因素决定的？

更新：人们似乎在抱怨缺乏细节。我主要是想了解哪些因素会使一段 Python 代码成为用 C 重写的良好候选者（即，如果原始 Python 受 CPU 限制，那么何时移植到 C 实际上会提高速度）。

具体来说，这是我正在查看的一段代码。基本上它是一种递归方法，它采用两个列表列表（“列”列表，其中每列包含可能进入该列的可能值......基本上是一个模式），并查看是否有可能使小于 n （通常是 1）更改（其中更改可能是向列添加新值、添加新列、删除列等），以便您有一些值序列（每列中的一个值）可以从任一模式构建。它在精神上与计算字符串之间的编辑距离非常相似。这是代码：

```
def CheckMerge(self, schemai, schemaj, starti, startj, \
               changesLeft, path):
#        if starti == 0 and startj == 0:
#            print '\n'
#            print schemai.schema
#            print ''
#            print schemaj.schema
    if starti == len(schemai.schema) and startj == len(schemaj.schema):
        return (True, path)
    if starti < len(schemai.schema):
        icopy = schemai.schema[starti]
    else:
        icopy = []
    if startj < len(schemaj.schema):
        jcopy = schemaj.schema[startj]
    else:
        jcopy = []
    intersect = set(icopy).intersection(set(jcopy))
    intersect.discard('')
    if len(intersect) == 0:
        if starti < len(schemai.schema) and \
            ('' in schemai.schema[starti] or changesLeft > 0):

            if not '' in schemai.schema[starti]:
                changesLeft -= 1
            changesCopy = list(path)
            changesCopy.append('skipi')
            result,steps = self.CheckMerge(schemai, schemaj, starti+1, startj, \
                                     changesLeft, changesCopy)
            if result:
                return (result,steps)
            elif not '' in schemai.schema[starti]:
                changesLeft += 1

        if startj < len(schemaj.schema) and \
            ('' in schemaj.schema[startj] or changesLeft > 0):

            if not '' in schemaj.schema[startj]:
                changesLeft -= 1
            changesCopy = list(path)
            changesCopy.append('skipj')
            result,steps = self.CheckMerge(schemai, schemaj, starti, startj+1, \
                                     changesLeft, changesCopy)
            if result:
                return (result, steps)
            elif not '' in schemaj.schema[startj]:
                changesLeft += 1

        if changesLeft > 0:
            changesCopy = list(path)
            changesCopy.append('replace')
            changesLeft -= 1
            result,steps = self.CheckMerge(schemai, schemaj, starti+1, startj+1, \
                                     changesLeft, changesCopy)
            if result:
                return (result, steps)

        return (False, None)
    else:
        changesCopy = list(path)
        changesCopy.append('merge')
        result,steps = self.CheckMerge(schemai, schemaj, starti+1, startj+1, \
                                     changesLeft, changesCopy)
        if result:
            return (result, steps)
        else:
            return (False, None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:26:41.750

这完全完全取决于您的代码。如果硬件支持您的某些代码，例如，如果您正在计算汉明权重、进行 AES 加密、计算 CRC 或具有可矢量化的代码，则有硬件指令可以提高速度，并且您可以通过 C 代码而不是 python 代码访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:58:53.343

Python 运行得非常快，因此您需要一个明确的理由将 Python 函数转换为 C，例如访问硬件，这已经提到过。但是，这里还有另一个原因。

Python (C Python) 存在全局解释器锁 (GIC) 问题。Python 线程不能同时运行，一次只能运行一个。因此，您可以将特定于线程的代码放入 C 中，这不受 GIC 问题的限制。

一般来说，如果您认为您的 Python 代码很慢并且没有您在帖子中提到的特定原因，那么您可能需要适应更多 Python-ic 编码约定，例如列表推导和 Python 中的其他功能并且没有太多其他语言。

我的最后评论不是对您的代码示例的反映。相反，我将它作为我在听很多 Python 演示文稿时学到的一般智慧来提供。

# c - 在冒泡排序中使用第二个 for 循环

> ID：15319520
> 
> 赞同：2
> 
> 时间：2013-03-10T06:16:05.607
> 
> 标签：c, arrays, for-loop, bubble-sort

有人可以在下面的冒泡排序中解释第二个 for 循环的确切目的吗？我知道第一个循环正在查看数组的第 i 个整数，但是第二个 for 循环查看的到底是什么？

请原谅我对这个话题的无知。我已经编码不到一周了，对这个主题有些困惑。

```
void sort(int array[], int size) {
  for(int i = 0, x = size - 1; i < x; i++) {
    for(int j = 0; j < x - 1; j++) {
      if(array[j] > array[j + 1]) {
        int tmp = array[j];
        array[j] = array[j + 1];
        array[j + 1] = tmp;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T06:21:47.663

我猜你的第一个循环也是错误的，考虑到你想要实现`Bubble Sort`，因为第一个循环告诉了对列表进行排序所需的通过次数。在冒泡排序的情况下，它等于`Total Number of elements - 1`需要通过的次数来对 n 个元素的列表进行排序 (n - 1) 需要通过，因此`i`如果我没记错的话，我的拙见必须从 1 开始。此外，就您在需要时声明变量而言，您提供的代码段与 C 语言编码风格不同。

第二个循环基本上是为了减少比较（元素数 - 通过 - 1），在每次迭代之后，因为每次通过，我们将最大的元素放在右侧（逻辑上未排序的列表）。因此，由于该元素处于其应有的位置，因此我们不必将其与其他元素进行比较。

```
 4 3 2 1 Original List
  3 2 1 4 Pass 1
        -
        Now since this above 4 is in it's rightful place
        we don't need to compare it with other elements.
        Hence we will start from the zeroth element and 
        compare two adjacent values, till 1 (for Pass 2)
        Here comparison will take place between 3 and 2,
        and since 3 is greater than 2, hence swapping 
        between 3 and 2, takes place. Now 3 is comapred
        with 1, again since greater value is on left
        side, so swapping will occur. Now 3 is not compared
        with 4, since both these values are in their 
        rightful place.
  2 1 3 4 Pass 2
      - 
        Now since this above 3 is in it's rightful place
        we don't need to compare it with other elements.
        Hence we will start from the zeroth element and 
        compare two adjacent values, till 1 (for Pass 3)
        Here only one comparison will occur, between
        2 and 1\. After swapping 2 will come to it's rightful
        position. So no further comparison is needed.
  1 2 3 4 Pass 3
  Here the list is sorted, so no more comparisons, after Pass 3\.    

void bubbleSort(int *ptr, int size)
{
        int pass = 1, i = 0, temp = 0;
        for (pass = 1; pass < size - 1; pass++)
        {
                for (i = 0; i <= size - pass - 1; i++)
                {
                        if (*(ptr + i) > *(ptr + i + 1))
                        {
                                temp = *(ptr + i);
                                *(ptr + i) = *(ptr + i + 1);
                                *(ptr + i + 1) = temp;
                        }
                }
                printf("Pass : %d\n", pass);
                for (temp = 0; temp < size; temp++)
                        printf("%d\t", *(ptr + temp));
                puts("");
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:24:19.080

您的冒泡排序循环是错误的。这是正确的：

```
void bubbleSort(int numbers[], int array_size) {
  int i, j, temp;

  for (i = (array_size - 1); i > 0; i--) {
    for (j = 1; j <= i; j++) {
      if (numbers[j-1] > numbers[j]) {
        temp = numbers[j-1];
        numbers[j-1] = numbers[j];
        numbers[j] = temp;
      }
    }
  }
} 
```

第二个循环是做主要工作。它比较每一对并交换它们的位置，以便较大的数字向右（右边更接近数组的末尾）。

# c++ - Int to Float to Int 转换精度损失

> ID：15319524
> 
> 赞同：11
> 
> 时间：2013-03-10T06:16:19.960
> 
> 标签：c++, assembly, floating-point

最近写了一个小程序，用2个不同版本的mingw32(on Windows8)编译。令人惊讶的是，我得到了两个不同的结果。我尝试拆卸它，但没有发现任何特别之处。有人可以帮我吗？谢谢你。

exe文件： [https ://www.dropbox.com/s/69sq1ttjgwv1qm3/asm.7z](https://www.dropbox.com/s/69sq1ttjgwv1qm3/asm.7z)

结果：720720（gcc 4.5.2版）、720719（gcc 4.7.0版）</p>

编译器标志：-lstdc++ -static

代码截取如下：

```
#include <iostream>
#include <cmath>

using namespace std;

int main()
{
    int a = 55440, b = 13;
    a *= pow(b, 1);
    cout << a << endl;
    return 0;
} 
```

装配输出（4.5.2）：

[http://pastebin.com/EJAkVAaH](http://pastebin.com/EJAkVAaH)

装配输出（4.7.0）：

[http://pastebin.com/kzbbFGs6](http://pastebin.com/kzbbFGs6)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T11:39:23.660

我已经能够使用单个版本的编译器重现该问题。

我的是 MinGW g++ 4.6.2。

当我将程序编译为`g++ -g -O2 bugflt.cpp -o bugflt.exe`时，我得到`720720`.

这是反汇编`main()`：

```
_main:
        pushl   %ebp
        movl    %esp, %ebp
        andl    $-16, %esp
        subl    $16, %esp
        call    ___main
        movl    $720720, 4(%esp)
        movl    $__ZSt4cout, (%esp)
        call    __ZNSolsEi
        movl    %eax, (%esp)
        call    __ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_
        xorl    %eax, %eax
        leave
        ret 
```

如您所见，该值是在编译时计算的。

当我将它编译为 时`g++ -g -O2 -fno-inline bugflt.cpp -o bugflt.exe`，我得到`720719`.

这是反汇编`main()`：

```
_main:
        pushl   %ebp
        movl    %esp, %ebp
        andl    $-16, %esp
        subl    $32, %esp
        call    ___main
        movl    $1, 4(%esp)
        movl    $13, (%esp)
        call    __ZSt3powIiiEN9__gnu_cxx11__promote_2INS0_11__enable_ifIXaasrSt15__is_arithmeticIT_E7__valuesrS3_IT0_E7__valueES4_E6__typeES6_E6__typeES4_S6_
        fmuls   LC1
        fnstcw  30(%esp)
        movw    30(%esp), %ax
        movb    $12, %ah
        movw    %ax, 28(%esp)
        fldcw   28(%esp)
        fistpl  4(%esp)
        fldcw   30(%esp)
        movl    $__ZSt4cout, (%esp)
        call    __ZNSolsEi
        movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, 4(%esp)
        movl    %eax, (%esp)
        call    __ZNSolsEPFRSoS_E
        xorl    %eax, %eax
        leave
        ret
...
LC1:
        .long   1196986368 // 55440.0 exactly 
```

如果我将调用替换为`exp()`像这样加载 13.0：

```
_main:
        pushl   %ebp
        movl    %esp, %ebp
        andl    $-16, %esp
        subl    $32, %esp
        call    ___main
        movl    $1, 4(%esp)
        movl    $13, (%esp)

//        call    __ZSt3powIiiEN9__gnu_cxx11__promote_2INS0_11__enable_ifIXaasrSt15__is_arithmeticIT_E7__valuesrS3_IT0_E7__valueES4_E6__typeES6_E6__typeES4_S6_
        fildl    (%esp)

        fmuls   LC1
        fnstcw  30(%esp)
        movw    30(%esp), %ax
        movb    $12, %ah
        movw    %ax, 28(%esp)
        fldcw   28(%esp)
        fistpl  4(%esp)
        fldcw   30(%esp)
        movl    $__ZSt4cout, (%esp)
        call    __ZNSolsEi
        movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, 4(%esp)
        movl    %eax, (%esp)
        call    __ZNSolsEPFRSoS_E
        xorl    %eax, %eax
        leave
        ret 
```

我明白了`720720`。

`exp()`如果我在如下`fistpl 4(%esp)`指令的持续时间内设置 x87 FPU 控制字的相同舍入和精度控制字段：

```
_main:
        pushl   %ebp
        movl    %esp, %ebp
        andl    $-16, %esp
        subl    $32, %esp
        call    ___main
        movl    $1, 4(%esp)
        movl    $13, (%esp)

        fnstcw  30(%esp)
        movw    30(%esp), %ax
        movb    $12, %ah
        movw    %ax, 28(%esp)
        fldcw   28(%esp)

        call    __ZSt3powIiiEN9__gnu_cxx11__promote_2INS0_11__enable_ifIXaasrSt15__is_arithmeticIT_E7__valuesrS3_IT0_E7__valueES4_E6__typeES6_E6__typeES4_S6_

        fldcw   30(%esp)

        fmuls   LC1
        fnstcw  30(%esp)
        movw    30(%esp), %ax
        movb    $12, %ah
        movw    %ax, 28(%esp)
        fldcw   28(%esp)
        fistpl  4(%esp)
        fldcw   30(%esp)
        movl    $__ZSt4cout, (%esp)
        call    __ZNSolsEi
        movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, 4(%esp)
        movl    %eax, (%esp)
        call    __ZNSolsEPFRSoS_E
        xorl    %eax, %eax
        leave
        ret 
```

我也明白`720720`。

由此我只能得出结论，`exp()`计算 13 ¹不精确为 13.0。

可能值得查看它的源代码，`__gnu_cxx::__promote_2<__gnu_cxx::__enable_if<(std::__is_arithmetic<int>::__value)&&(std::__is_arithmetic<int>::__value), int>::__type, int>::__type std::pow<int, int>(int, int)`以确切了解它如何设法用整数搞砸求幂（请参阅，与 C 不同，`exp()`它需要两个`ints`而不是两个`doubles`）。

但我不会为此责备`exp()`。C++11 定义`float pow(float, float)`了 `long double pow(long double, long double)`C 的`double pow(double, double)`. 但`double pow(int, int)`标准中没有。

编译器为整数参数提供版本这一事实并没有对结果的精度做出任何额外的保证。如果`exp()`计算 a ^b为

    a ^b = 2 ^(b * log [2] (a))

或作为

    a ^b = e ^(b * ln(a))

对于浮点值，过程中肯定会存在舍入误差。

如果“整数”版本的`exp()`做类似的事情并由于舍入误差而导致类似的精度损失，它仍然可以正常工作。即使精度损失是由于一些愚蠢的错误而不是因为正常的舍入误差，它也会这样做。

无论这种行为看起来多么令人惊讶，它都是正确的。或者我相信直到被证明是错误的。

# h.264 - Gstreamer 一起播放音频和视频

> ID：15319526
> 
> 赞同：2
> 
> 时间：2013-03-10T06:16:56.387
> 
> 标签：h.264, gstreamer, aac

我试图了解 gstreamer 管道。现在我想播放一个包含 h264 编码视频帧和 aac 编码音频样本的 mp4 视频。为了播放视频样本，我使用了以下管道

```
gst-launch-0.10 filesrc location=~/samples/step_up_dance_1080p.mp4 ! qtdemux name=dmux dmux.video_00 ! h264parse ! ffdec_h264 ! autovideosink 
```

我使用以下管道单独播放音频

```
gst-launch-0.10 filesrc location=~/samples/step_up_dance_1080p.mp4 ! qtdemux name=dmux dmux.audio_00 ! aacparse ! faad ! autoaudiosink 
```

两者都工作正常，但我想结合音频和视频。我该怎么做 ？我试过了

```
gst-launch-0.10 filesrc location=~/samples/step_up_dance_1080p.mp4 ! qtdemux name=dmux dmux.video_00 ! h264parse ! ffdec_h264 ! autovideosink  dmux.audio_00 ! aacparse ! faad ! autoaudiosink 
```

但它不起作用。如何同时播放音频和视频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:44:48.690

首先，当说某事不起作用时，请说明发生了什么。如果管道停止，您只是忘记了为解码器创建新线程的队列元素。

```
gst-launch-0.10 filesrc location=~/samples/step_up_dance_1080p.mp4 ! qtdemux name=dmux dmux.video_00 ! queue ! h264parse ! ffdec_h264 ! autovideosink  dmux.audio_00 ! queue ! aacparse ! faad ! autoaudiosink 
```

仅使用 playbin 更简单。看看管道布局。

```
GST_DEBUG_DUMP_DOT_DIR=$PWD gst-launch-0.10 playbin2 uri=file://$HOME/samples/step_up_dance_1080p.mp4 
```

并使用graphviz（dot -Tsvg xxx.dot -o xxx.svg）渲染它创建的点文件。

# windows-phone-7 - windows phone 8 上 windows phone 7 应用程序的上边距问题

> ID：15319527
> 
> 赞同：2
> 
> 时间：2013-03-10T06:17:05.490
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1

我使用 7.1 SDK 开发的 windows phone 7 应用程序在 wp7 上占据了整个屏幕。但是在 Windows Phone 8 中打开同一个应用程序时，顶部会显示一些额外的边距，因为我的应用程序无法使用顶部的空间。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:33:14.073

WP7 仅支持一种分辨率 (480x800)。

对于 480x800 WP8 设备，这显然没问题。

对于 1280x768 设备，这可以很好地缩放，因为这是相同的纵横比。

但是 1280x720 设备具有不同的纵横比，这会使黑条留在屏幕顶部。

解决此问题的唯一方法是使用 WP8 SDK 将您的项目升级到 WP8（同时注意可能带来的任何细微问题）。

# python - 使用 PYTHON PIL 从验证码图像中去除背景噪声线

> ID：15319528
> 
> 赞同：4
> 
> 时间：2013-03-10T06:17:21.293
> 
> 标签：python, algorithm, image-processing, python-imaging-library, captcha

我有一个经过处理的验证码图像（放大），如下所示：
![验证码](../Images/ffc4e22ef3bdf4da6bab5234f02e76c7.png)

如您所见，“TEXT”的字体大小略大于噪声线的宽度。
所以我需要一种算法或代码来去除这张图片中的嘈杂线条。

在 Python PIL 库和下面提到的斩波算法的帮助下，我无法获得 OCR 可以轻松读取的输出图像。

这是我尝试过的 Python 代码：

```
import PIL.Image
import sys

# python chop.py [chop-factor] [in-file] [out-file]

chop = int(sys.argv[1])
image = PIL.Image.open(sys.argv[2]).convert('1')
width, height = image.size
data = image.load()

# Iterate through the rows.
for y in range(height):
    for x in range(width):

        # Make sure we're on a dark pixel.
        if data[x, y] > 128:
            continue

        # Keep a total of non-white contiguous pixels.
        total = 0

        # Check a sequence ranging from x to image.width.
        for c in range(x, width):

            # If the pixel is dark, add it to the total.
            if data[c, y] < 128:
                total += 1

            # If the pixel is light, stop the sequence.
            else:
                break

        # If the total is less than the chop, replace everything with white.
        if total <= chop:
            for c in range(total):
                data[x + c, y] = 255

        # Skip this sequence we just altered.
        x += total

# Iterate through the columns.
for x in range(width):
    for y in range(height):

        # Make sure we're on a dark pixel.
        if data[x, y] > 128:
            continue

        # Keep a total of non-white contiguous pixels.
        total = 0

        # Check a sequence ranging from y to image.height.
        for c in range(y, height):
            # If the pixel is dark, add it to the total.
            if data[x, c] < 128:
                total += 1

            # If the pixel is light, stop the sequence.
            else:
                break

        # If the total is less than the chop, replace everything with white.
        if total <= chop:
            for c in range(total):
                data[x, y + c] = 255

        # Skip this sequence we just altered.
        y += total

image.save(sys.argv[3]) 
```

所以，基本上我想知道一个更好的算法/代码来消除噪音，从而使图像能够被 OCR（Tesseract 或 pytesser）读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:37:04.303

要快速消除大部分线条，您可以将具有两个或更少相邻黑色像素的所有黑色像素变为白色。那应该可以修复杂散线。然后，当您有很多“块”时，您可以删除较小的块。

这是假设样本图像已被放大，并且线条只有一个像素宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T14:21:08.813

我个人如上所述使用扩张和侵蚀，但将其与宽度和高度的一些基本统计数据结合起来，尝试找出异常值并根据需要消除这些线。之后，在将临时图像用作原始图像之前，采用内核的最小值并在临时图像中转换该颜色的中心像素（向下迭代旧图像）的过滤器应该可以工作。在枕头/PIL 中，基于最小值的任务是通过 img.filter(ImageFilter.MINFILTER) 完成的。

如果这还不够，它应该生成一个可识别的集合，OpenCV 的轮廓和最小边界旋转框可用于旋转一个字母以进行比较（此时我推荐 Tesseract 或商业 OCR，因为它们有大量的字体和额外的聚类和清理等功能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T08:46:21.807

您可以使用自己的扩张和侵蚀功能，这将删除最小的线条。一个很好的实现可以在[这里](http://ostermiller.org/dilate_and_erode.html)找到。

# extjs - Sencha Touch 2.1.x 新手问题 - 尝试遵循在线指南

> ID：15319531
> 
> 赞同：0
> 
> 时间：2013-03-10T06:17:58.277
> 
> 标签：extjs, sencha-touch-2, sencha-architect

刚刚下载了煎茶完整试用版，因为我想尝试使用移动应用程序。我正在尝试遵循位于[http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)的指南，了解一切如何进行。马上我就有问题了。

“在目录和文件中组织 Sencha Touch 应用程序”中的指南显示了文件结构。好吧，我打开 Sencha Architect 并选择新建一个 Sencha Touch 2.1.x 项目。Project Inspector 显示的内容与指南所做的没有任何相似之处。本指南是针对旧版本的还是什么？我假设这是我的目录结构，但与列出的完全不同。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:32:00.713

该指南中的文件结构似乎是正确的，但当然，我总是相信框架创建者的产品，而不是外部指南。问题是，ST2 让您可以将东西放在很多不同的位置，并在`app.js`和中自定义这些位置`app.json`。如果您正在使用 Architect，我不会担心文件夹结构，因为它会将东西放在需要去的地方，并且会`app.js`正确地将它们包含在您的文件中。

综上所述，您可能需要查看[Architect 上的 Sencha 官方文档以](http://docs.sencha.com/architect/2/#!/guide)了解此类问题。

# entity-framework - EF 汇总栏

> ID：15319536
> 
> 赞同：0
> 
> 时间：2013-03-10T06:18:45.730
> 
> 标签：entity-framework, aggregate-functions, aggregate, summary

是否可以根据 LINQ 从数据库中 EF 生成的类中的另一个属性（列）添加摘要属性（无数据库列），并且当从数据库更新模型时，此属性不更新（从类中删除或删除）（因为此属性（ cloumn) 不在数据库中)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:36:26.880

是的。由 Entity Framework 生成的类作为 Entitied 始终标记为`partial`。它允许您使用自己的属性或方法扩展功能。

假设您的实体类名为`Post`。您可以使用以下代码对其进行扩展：

```
public partial class Post
{
    public int Average
    {
        get
        {
            return this.Items.Average();
        }
    }
} 
```

因为它不是设计器生成文件的一部分，所以在重新生成时不会被覆盖。但是，使其工作有一个要求：`Post`类的自定义部分必须与 EF 生成的代码位于完全相同的命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:46:31.417

尝试`[NotMapped]`在`partial class`. 这将被实体框架忽略。

```
public partial class EntityName
{
    [NotMapped]
    public int CalculatedProperty
    { 
        get 
        {
            return Numbers.Sum();
        }
    }
} 
```

# android - ActionBarSherlock 导致其他视图失真，无法正确显示

> ID：15319538
> 
> 赞同：0
> 
> 时间：2013-03-10T06:18:56.193
> 
> 标签：android, android-actionbar, actionbarsherlock, android-theme

我在我的应用程序中使用了支持库的最新 ActionBarSherlock 扩展。当我在模拟器 4.2 和 android 4.2 的设备上运行应用程序时，我发现视图和操作栏本身的外观很奇怪。请看一下模拟器的屏幕截图。我们可以看到在 ListView 的每个行分隔符中都出现了蓝线，并在主页图标下划线。![在此处输入图像描述](../Images/65e2ce83814fa5cd2b20a0b902db55e0.png)

小右箭头也有下划线，也没有正确缩放。从长远来看，它在 android 2.2 的模拟器中显示良好

我使用主题的方式是：

清单文件.xml：

```
android:theme="@style/AppThemeWithoutTitle" 
```

和styles.xml：

```
<style name="AppThemeWithoutTitle" parent="Widget.Sherlock.ActionBar">
  <item name="actionBarStyle">@style/MyActionBarWithoutTitle</item>
  <item name="android:actionBarStyle">@style/MyActionBarWithoutTitle</item>
</style>

<style name="MyActionBarWithoutTitle" parent="Widget.Sherlock.ActionBar">
  <item name="android:displayOptions">useLogo|showHome</item>
</style> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:10:25.320

`Widget.Sherlock.ActionBar`不是主题，是风格。第一个线索是它以`Widget`. Android 中主题的约定是以单词开头`Theme`或至少将单词`Theme`放在样式名称中。

您覆盖并尝试用作主题的样式是分配给`actionBarStyle`您要覆盖的样式的样式。

你需要有一个实际的主题作为你的父母，然后，只有这样你才能覆盖`actionBarStyle`并让它工作。

```
<style name="MyAppTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/MyActionBarTheme</item>
    <item name="android:actionBarStyle">@style/MyActionBarTheme</item>
</style>

<style name="MyActionBarTheme" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/bg_striped</item>
    <item name="android:background">@drawable/bg_striped</item>

    <item name="backgroundSplit">@drawable/bg_striped_split</item>
    <item name="android:backgroundSplit">@drawable/bg_striped_split</item>
</style> 
```

您可以[在此处](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/values/abs__themes.xml)找到可以覆盖的所有可用主题。

# php - 是否可以从 php 文件中调用不同的代码部分？

> ID：15319539
> 
> 赞同：0
> 
> 时间：2013-03-10T06:18:57.603
> 
> 标签：php

我对php很陌生。如果这是一个愚蠢的问题，请原谅。我已经通过 php 在我的博客中添加了社交分享图标。在主索引页面中，我添加了 facebook、twitter 和 google 以及共享图标，在单个帖子中，我添加了更多图标。

我是如何实施的？

我创建了两个 php 文件 social_main_index.php 和 social_single_post.php 然后在主索引模板中添加了代码`<? php include("social_main_index.php") ?>`

在单个帖子模板中，我添加了代码`<? php include("social_single_post.php") ?>`

我的问题

我可以创建一个包含这两个代码的单个 php 文件并专门调用它们中的任何一个吗？

我在 social_main_index.php 中的代码

```
<?php include_once("custom_css.php") ?>
<div class="social-single">
<!--Facebook Share-->
<div id="likebutton"><iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo rawurlencode(get_permalink()); ?>&layout=button_count&show_faces=false&width=100&action=like&font=verdana&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe></div>
<!--Google Plus Share-->
<div id="plusonebutton"><g:plusone href="<?php echo rawurlencode(get_permalink()); ?> "size="medium"></g:plusone></div>
<!--Twitter Share-->
<div id="twitterbutton"><script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script><div> <a href="http://twitter.com/share" class="twitter-share-button" data-url="<?php the_permalink() ?>" data-counturl="<?php the_permalink() ?>" data-text="<?php the_title(); ?>" data-via="nucleationin" data-related="nucleationin"></a></div>
</div>
</div> 
```

我在 social_single_post.php 中的代码

```
<?php include_once("custom_css.php") ?>
<div class="social-single">
<!--Facebook Share-->
<div id="likebutton"><iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo rawurlencode(get_permalink()); ?>&layout=button_count&show_faces=false&width=100&action=like&font=verdana&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe></div>
<!--Google Plus Share-->
<div id="plusonebutton"><g:plusone href="<?php echo rawurlencode(get_permalink()); ?> "size="medium"></g:plusone></div>
<!--Twitter Share-->
<div id="twitterbutton"><script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script><div> <a href="http://twitter.com/share" class="twitter-share-button" data-url="<?php the_permalink() ?>" data-counturl="<?php the_permalink() ?>" data-text="<?php the_title(); ?>" data-via="nucleationin" data-related="nucleationin"></a></div></div>
<!--Linkedin Share-->
<div id="linkedinshare"><script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url="<?php the_permalink() ?>" data-counter="right"></script></div>
<!--Stumble Share-->
<div id="stumblebutton"><script src="http://www.stumbleupon.com/hostedbadge.php?s=1"></script></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:40:00.750

这实际上是一件非常简单的事情，我建议您在有机会时阅读[手册。](http://us3.php.net/manual/en/index.php)只需创建一个返回任一 html 的函数：

```
function print_buttons($button_set) {
    if ($button_set == "one") { //if the local variable for the function is the string "one", then paste the data below where the function is called
        return '<div class="social-single">
            <!--Facebook Share-->
            <div id="likebutton"><iframe src="http://www.facebook.com/plugins/like.php?href='.rawurlencode(get_permalink()).'&layout=button_count&show_faces=false&width=100&action=like&font=verdana&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe></div>
            <!--Google Plus Share-->
            <div id="plusonebutton"><g:plusone href="'.rawurlencode(get_permalink()).'"size="medium"></g:plusone></div>
            <!--Twitter Share-->
            <div id="twitterbutton"><script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script><div> <a href="http://twitter.com/share" class="twitter-share-button" data-url="'.the_permalink().'" data-counturl="'.the_permalink().'" data-text="'.the_title().'" data-via="nucleationin" data-related="nucleationin"></a></div>
            </div>
            </div>';
    }
    else { //if the local variable is anything else, do the same thing, but with the below data instead.
        return '<?php include_once("custom_css.php") ?>
            <div class="social-single">
            <!--Facebook Share-->
            <div id="likebutton"><iframe src="http://www.facebook.com/plugins/like.php?href='.rawurlencode(get_permalink()).'&layout=button_count&show_faces=false&width=100&action=like&font=verdana&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe></div>
            <!--Google Plus Share-->
            <div id="plusonebutton"><g:plusone href="'.rawurlencode(get_permalink()).'"size="medium"></g:plusone></div>
            <!--Twitter Share-->
            <div id="twitterbutton"><script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script><div> <a href="http://twitter.com/share" class="twitter-share-button" data-url="'.the_permalink().'" data-counturl="'.the_permalink().'" data-text="'.the_title().'" data-via="nucleationin" data-related="nucleationin"></a></div></div>
            <!--Linkedin Share-->
            <div id="linkedinshare"><script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-url="'.the_permalink().'" data-counter="right"></script></div>
            <!--Stumble Share-->
            <div id="stumblebutton"><script src="http://www.stumbleupon.com/hostedbadge.php?s=1"></script></div>
            </div>';
    }
} 
```

然后使用它...

```
echo print_buttons("one"); //this will print the first group
echo print_buttons("anything else"); //this will print the second 
```

请注意，这是在黑暗中拍摄的，因为我不知道您回显的功能是什么，否则返回/做了什么。如果我这样做了，我可以肯定地说这对你有用。然而，我没有，因此以上。

要使用此功能，请确保它包含在正在使用它的页面中，就像上面的 css 通过`include()`. 例子：

some_functions.php：

```
<?php
function the_function_above() { }
?> 
```

进而...

The_page_above.php：

```
<?php
include("some_functions.php");

echo the_function_above();
?> 
```

# php - 自定义添加媒体按钮 wordpress 不适用于来自 url 的图像

> ID：15319541
> 
> 赞同：1
> 
> 时间：2013-03-10T06:19:28.613
> 
> 标签：php, wordpress

尝试插入帖子时，我遇到了自定义添加媒体按钮 wordpress 的问题。当我尝试从 url 插入发布时，图像没有显示（未定义的结果不是 url 图像）但是如果我从媒体库中选择，那么我按“插入发布”它就可以了。

这是我的代码：

```
 jQuery('.upload_image #upload_image_button').click(function() {

     formfield = jQuery('#upload_image').attr('name');
     tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
     targetInput = jQuery(this).next('input');
     previewImage = jQuery(this).prev('div');

    window.send_to_editor = function(html) {
     imgurl = jQuery('img',html).attr('src');    
     targetInput.val(imgurl);
     previewImage.html('<img src="' + imgurl + '" width="100px" height="100px" />');
     tb_remove();
    }

 return false;
}); 
```

这是我的html：

```
<ul class="prev-thumb">
    <li  class="upload_image"> 
    <div class="preview-image"><?php echo(isset($images[0])) ? '<img src="'.$images[0].'" width="100px" height="100px" />' : ''; ?></div>
    <input class="button button-primary button-large"  id="upload_image_button" value="Upload Image" type="button" /> 
    <input id="upload_image" size="36" name="item[images][]" type="hidden" />  
    </li >

    <li  class="upload_image"> 
    <div class="preview-image"><?php echo(isset($images[1])) ? '<img src="'.$images[1].'" width="100px" height="100px" />' : ''; ?></div>
    <input class="button button-primary button-large"  id="upload_image_button" value="Upload Image" type="button" /> 
    <input id="upload_image" size="36" name="item[images][]" type="hidden" />  
    </li >

    <li  class="upload_image"> 
    <div class="preview-image"><?php echo(isset($images[2])) ? '<img src="'.$images[2].'" width="100px" height="100px" />' : ''; ?></div>
    <input class="button button-primary button-large"  id="upload_image_button" value="Upload Image" type="button" /> 
    <input id="upload_image" size="36" name="item[images][]" type="hidden" />  
    </li >

    <li  class="upload_image"> 
    <div class="preview-image"><?php echo(isset($images[3])) ? '<img src="'.$images[3].'" width="100px" height="100px" />' : ''; ?></div>
    <input class="button button-primary button-large"  id="upload_image_button" value="Upload Image" type="button" />
    <input id="upload_image" size="36" name="item[images][]" type="hidden" />  
    </li >
</ul> 
```

对不起我的英语，提前谢谢，我是新来的:)

# grails - Groovy Grails 垂直而不是水平显示列表

> ID：15319544
> 
> 赞同：0
> 
> 时间：2013-03-10T06:20:04.153
> 
> 标签：grails, groovy

我试图在 Groovy 服务器页面 (GSP) 上垂直而不是水平显示项目列表。目前，我的列表是水平显示的。如下所示：

**示例 1**

```
[ A ] [ B ] [ C ]
[ D ] [ E ] [ F ]
[ G ] [ H ] [ I ]
[ J ] [ K ] [ L ] 
```

我希望我的列表垂直显示，或者按以下顺序显示，而不是水平显示此列表：

**示例 2：我希望完成的任务**

```
[ A ] [ E ] [ I ]
[ B ] [ F ] [ J ]
[ C ] [ G ] [ K ]
[ D ] [ H ] [ L ] 
```

为了完成水平列表的显示（示例 1），我执行了以下操作：

在我的控制器中，我定义了一个简单的列表：

```
def test() {
  def list = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L']
  [items: list]
 } 
```

在我的 test.gsp 页面上，我有以下内容：

```
<table>
        <tr>
            <%
            def counter = 0

            for (i in items) {
            counter = counter+1

            println("<td>" + i + "</td>")

            if (counter == 3) {
                println("</tr><tr>")
                counter = 0
            }
        }
        %>
    </tr>
</table> 
```

有谁知道如何让我的列表看起来像示例 2？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:55:27.087

你应该能够做到：

```
list.collate( 3 ).transpose().flatten() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:10:24.640

在您的控制器中：

```
List list = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L']
int size = list.size()
int modVal = 3

[items: list.collate( (size / modVal).toInteger() ).transpose().flatten(), modVal: modVal] 
```

在视图中：

```
<tr>
  <g:each in="${items}" var="item" status="i">
    <g:if test="${i % modVal == 0 && i != 0}">
      </tr><tr>
    </g:if>
    <td>${item}</td>
  </g:each>
</tr> 
```

# ruby - Ruby中的类变量垃圾收集？

> ID：15319545
> 
> 赞同：-1
> 
> 时间：2013-03-10T06:20:37.003
> 
> 标签：ruby

计划使用工厂方法来获取 ruby​​ 类的单例实例，但我不确定它是否适用于 Ruby 垃圾收集。

例如，如果我有类似的东西：

```
class Foo
def self.getInstance
  @@instance = Foo.new if @instance.nil?
  return @@instance
end

def counter
   @counter
end

 def increment
   @counter++
end

 private

 def initialize
     @counter = 0
 end
end 
```

所以这在我熟悉的其他语言中的工作方式是 @instance 可以无限期地在垃圾收集中存活，因此可以依赖 Foo.getInstance.increment 在程序的整个生命周期内拥有一个连续递增的计数器。

但是，我不确定什么可能会保留对类的实例变量 @@instance 的引用，所以它会被垃圾收集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:34:02.607

`@@instance`是类 var，而不是实例 var。该类持有对其类变量的引用，这会阻止它们的垃圾收集，直到类本身未定义。

请不要滚动您自己的单例模式。stdlib 有一个模块[Singleton](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html)，您可以将其混入到您的类中以使其成为单例。stdlib mixin 会处理您忘记的细节，例如初始化和 undefining 的线程安全`new`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T21:12:49.743

创建一个实例方法 'foo' 和一个与方法 '@foo' 同名的实例变量，使用单例运算符`||=`来分配或获取 的实例`Foo`，如果从类方法中执行此操作，则会产生内存泄漏

```
def foo
  @foo ||= Foo.new
end 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-10T08:25:21.237

当对象方法特定于该对象时，Singleton 类就是对象方法所在的地方，并且每个对象都可以持有或持有这样的类。

```
1.9.3p374 :315 > Jd = class<<self;self;end
 => #<Class:#<Object:0x007ff304078d08>> 
1.9.3p374 :316 > jd = Jd.new
TypeError: can't create instance of singleton class
    from (irb):316:in `new'
    from (irb):316
    from /Users/rfatahi/.rvm/rubies/ruby-1.9.3-p374/bin/irb:16:in `<main>'
1.9.3p374 :317 > Jd.class
 => Class 
```

向 Singleton 类添加方法：

```
1.9.3p374 :318 > class MyClass
1.9.3p374 :319?>   end
 => nil 
1.9.3p374 :320 > a = MyClass.new
 => #<MyClass:0x007ff30605b530> 
1.9.3p374 :321 > def a.method1
1.9.3p374 :322?>   end
 => nil 
```

# php - 值不会通过 ajax 将会话数组更改为 json 数组

> ID：15319550
> 
> 赞同：0
> 
> 时间：2013-03-10T06:22:11.510
> 
> 标签：php, json, session

我有一个会话数组**$_SESSION['Cartquantity']**。在第**200行的****php**文件中，我将此数组存储在变量 **$QtyArray 中**

 ****```
$QtyArray = $_SESSION['Cartquantity'] ; 
```

然后我在 **json中对数组进行编码以在****js**文件中使用它

```
echo "var cartQty = " . json_encode($QtyArray) . ";" ; (on line 201) 
```

现在通过**AJAX**，我以同样的方式更新第**120行的会话数组**

```
$QtyArray = $_SESSION['Cartquantity'] ;                (on line 120)
echo "var cartQty = " . json_encode($QtyArray) . ";" ; (on line 121) 
```

数组显然正在更新，因为我可以在萤火虫的控制台上看到它。但是当我在 js 文件中获取这个值时，值并没有改变。如果我重新加载通过 ajax 更新此值的页面，然后查看数量，它正在发生变化。为什么会这样？

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:55:35.577

改变

```
echo "var cartQty = " . json_encode($QtyArray) . ";" ;// (on line 121) 
```

至

```
echo json_encode($QtyArray); 
```

然后像这样进行ajax调用

```
$.ajax({
    url:"index.php",
    cache:false, 
    dataType:'json',
    data:{ q: "add_card", item_id: id, item_qty: qty, topping_extra_v: topping_extra_val,item_syskey:syskey },
    function(data){
        cartQty = data;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:31:44.040

确保在 ajax 调用中禁用缓存，如下所示：

```
$.ajax({
   url: "test.html",
   cache: false  //DISABLE CACHING
}).done(function( html ) {
   $("#results").append(html);
}); 
```

**更新：**
这里您的`.get()`呼叫适用于`.ajax()`缓存选项：

```
$.ajax({
   url: "index.php",
   data: { q: "add_card", item_id: id, item_qty: qty, topping_extra_v: topping_extra_val,item_syskey:syskey },
   cache: false  //DISABLE CACHING
}).done(function( data ) {
   alert(data);
}); 
```****

# sorting - 跟踪运行时复杂性

> ID：15319552
> 
> 赞同：-1
> 
> 时间：2013-03-10T06:22:53.913
> 
> 标签：sorting, big-o

计算任何方法的运行时复杂度的最佳方法是什么？对于非递归方法很容易做到这一点，比如冒泡排序

```
outer-for loop
{
   inner-for loop
      {
           compare and exchange
      }
} 
```

要检查，最好的方法是在最里面的循环中放置一个计数器。但是，当方法是递归时，我应该把计数器放在哪里，例如合并排序，

```
sort(int[] array){

    left = first-half
    right = second-half

    sort(left);
    sort(right);
   ret merge(left, right);

}

merge(int[] left, right)
{
    count = length(left + right);
    int[] result;
    loop-count-times
    {
       compare and put in result;
    }

  return result;
} 
```

因为这是归并排序，所以 big(o) 是 o(n log n)，所以 100 个整数的数组应该准确返回 200 的 big-o。柜台会去哪里？如果我把它放在 sort(..) 的顶部，我得到的平均数是 250、280、300，这应该是错误的。这个柜台的最佳位置是什么？

参考资料：[http ://en.wikipedia.org/wiki/Mergesort](http://en.wikipedia.org/wiki/Mergesort)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:40:12.980

> 因为这是归并排序，所以 big(o) 是 o(n log n)，所以 100 个整数的数组应该准确返回 200 的 big-o。

甚至没有接近正确。

使用大 Ordo 符号表示的计算复杂性并**不能**告诉您将准确执行多少步/计算操作。*它被称为渐近*复杂度而不是*相同*的复杂度是有原因的：它只为您提供一个函数，该函数**根据输入的大小接近（更准确地说，给出更高的界限）算法的运行时间。**

所以`O(n log n)`并不意味着对于 100 个元素，将执行 200 次操作（*顺便说一句，为什么对数的底必须是 10？*），它告诉您，如果您增加输入的大小，则 ( average-case) 运行时间将与添加的输入数据的数量成正比，乘以这个附加数据的数量的对数。

直截了当：如果要计算对递归函数的调用次数，则应将计数器作为参数放入，如下所示：

```
void merge_sort(int array[], size_t length, int *counter)
{
    (*counter)++;
    // apply the algorithm to `array`:
    merge_sort(array, length, counter);
} 
```

并这样称呼它：

```
int num_calls = 0;
merge_sort(array, sizeof(array) / sizeof(array[0]), &num_calls);
printf("Called %d times\n", num_calls); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:37:16.127

我认为您对 Big-O 表示法的概念有些误解。如果复杂度为 O(n log n) 并且 n 的值为 100，则没有严格的规定程序应该在 200 的 Big-O 中精确执行。它只给了我们一个上限。例如，考虑具有 O(n ² ) 复杂度的选择排序。即使 n 是 100，如果列表已经排序，内部循环内设置的计数器也不会给你 100 ^(2作为结果。)因此，在您的情况下，您得到的答案（250、280、300 等）是完全有效的。因为所有答案都受到 k 乘以 n log n 的限制，其中 k 是任意常数。

# c# - 初始 GET HTTP / 1.1 请求的请求标头来自哪里？

> ID：15319554
> 
> 赞同：1
> 
> 时间：2013-03-10T06:23:37.983
> 
> 标签：c#, http-headers, httpwebrequest, httplistener

*编辑：我也不相信 HttpListener 做任何事情*

1.  所以响应标头！= 下一篇文章的请求标头。
2.  为什么浏览器以正确的请求标头开头，但来自我的客户端的简单 GET HTTP / 1.1 看起来不一样，即使每个域的原始请求标头多次更改？？？？？？？
3.  这也不能正确使用 cookie。这是为什么？

我该如何做一些事情来给我这个浏览器的魔力？

*WebClient 没有 .RequestHeaders。

*将 HttpWebRequest 标头与 Chrome/Fiddler 嗅探进行比较。

```
using System.Net;
    private void Form1_Load(object sender, EventArgs e)
    {
        CookieContainer cookieJar = new CookieContainer();
        cookieJar.GetCookies(new Uri("https://www.google.com"));
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://www.google.com");
        request.CookieContainer = cookieJar;
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        this.Text = request.Headers.Count.ToString();
            WebHeaderCollection header = request.Headers;
            for (int i = 0; i < header.Count; i++)
            {
                richTextBox1.AppendText(header.GetKey(i) + ": " + header[i] + "\n");
            }
    } 
```

Fiddler/Chrome 组合返回 10 个请求标头；客户端返回 2。

另外为什么标题“Accept-Encoding：gzip，deflate，sdch”总是使响应成为一些奇怪的2字符数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:17:35.037

目前尚不清楚您要实现什么，但 WebClient 有一个 Headers 属性，您可以使用该属性使请求标头看起来如您所愿：

```
using (var client = new WebClient())
{
    client.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22";
    client.Headers[HttpRequestHeader.AcceptLanguage] = "fr-FR,fr;q=0.8";
    ... you could set here whatever headers you want

    string result = client.DownloadString("http://www.google.com");
} 
```

# c# - 将大型文本文件读入特定格式的数组

> ID：15319558
> 
> 赞同：0
> 
> 时间：2013-03-10T06:24:13.803
> 
> 标签：c#

我有一个具有以下信息格式的文本文件：

```
1 1.2323232 2.2356 4.232 1.23664  
2 1.344545  
3 6.2356 7.56455212   
etc.... 
```

如何在 C# 中读取文件，将其解析为数组，然后对其进行一些处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:59:20.577

使用[文件助手。](http://www.filehelpers.com)

例如。您所需要的只是将记录解析定义为：

```
[DelimitedRecord("|")]
public class Orders
{
   public int OrderID;

   public string CustomerID;
   [FieldConverter(ConverterKind.Date, "ddMMyyyy")]   public DateTime OrderDate;

   public decimal Freight;
} 
```

并按如下方式读取文件：

```
FileHelperEngine engine = new FileHelperEngine(typeof(Orders));

// to Read use:
Orders[] res = engine.ReadFile("TestIn.txt") as Orders[];

// to Write use:
engine.WriteFile("TestOut.txt", res); 
```

您也可以将分隔符更改为`" "`并适当地更新成员类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:20:45.490

嘿，您的代码看起来在位置一有一个 ID 值。所以我创建了一些示例代码。

```
private List<MyValues> Read(string fileName)
{
    var result = new List<MyValues>();
    var line = new string[] { };

    using (StreamReader sr = new StreamReader(fileName))
    {
        while (sr.Peek() > -1)
        {
            line = sr.ReadLine().Trim().Split(' ');

            var val = new MyValues();
            val.Id = Convert.ToInt32(line.ElementAt(0));

            for (int n = 1; n < line.Count(); n++)
            {
                val.Values.Add(Convert.ToDouble(line[n]));
            }

            result.Add(val);
        }
    }

    return result;
}

class MyValues
{
    public int Id = 0;
    public List<double> Values = new List<double>();
} 
```

# java - 将 GWT 与 CMS 一起使用（如 Vosao）

> ID：15319560
> 
> 赞同：0
> 
> 时间：2013-03-10T06:24:23.103
> 
> 标签：java, javascript, gwt, content-management-system, vosao

我有一个完全用 GWT 构建的工作网站。我想测试它以在 CMS 中使用；因为使用 CMS 很可能是将来更容易维护的一种方式，而不必如此重写代码。

以下是我使用 GWT 的原因：

*   不想用 JS 写 JS 代码和操作页面。
*   最重要的是我想重用我的动态小部件，比如我用来填充产品页面的 Flextable，而不是处理 CSS 和模板（以及类似的东西）

瓶颈在于 CMS（如 Vosao）不太容易使用

将 GWT 与 CMS 一起使用的正确策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:23:33.310

当您的网站开始**在规模和复杂性上增长时**。

页数以数百为单位，而不是**少数**。

**CMS 开始更多地成为实现特定通信和信息目标**的应用平台。

 **有关更多讨论，另请参见：[GWT with a Content Management System](https://stackoverflow.com/questions/952220/gwt-with-a-content-management-system)**

# java - 如何实现中值堆

> ID：15319561
> 
> 赞同：42
> 
> 时间：2013-03-10T06:24:30.383
> 
> 标签：java, python, algorithm, data-structures

像 Max-heap 和 Min-heap 一样，我想实现一个 Median-heap 来跟踪给定整数集的中位数。API 应具备以下三个功能：

```
insert(int)  // should take O(logN)
int median() // will be the topmost element of the heap. O(1)
int delmedian() // should take O(logN) 
```

我想使用数组 (a) 实现来实现堆，其中数组索引 k 的子项存储在数组索引 2*k 和 2*k + 1 中。为方便起见，数组从索引 1 开始填充元素。这是到目前为止我所拥有的：中值堆将有两个整数来跟踪到目前为止插入的整数数量，它们是>当前中值（gcm）和<当前中值（lcm）。

```
if abs(gcm-lcm) >= 2 and gcm > lcm we need to swap a[1] with one of its children. 
The child chosen should be greater than a[1]. If both are greater, 
choose the smaller of two. 
```

对于另一种情况也是如此。我想不出一个如何让元素下沉和游泳的算法。我认为应该考虑到数字与中位数的接近程度，例如：

```
private void swim(int k) {
    while (k > 1 && absless(k, k/2)) {   
        exch(k, k/2);
        k = k/2;
    }
} 
```

不过，我无法提出整个解决方案。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-03-10T06:30:05.290

你需要两个堆：一个最小堆和一个最大堆。每个堆包含大约一半的数据。最小堆中的每个元素都大于或等于中位数，最大堆中的每个元素都小于或等于中位数。

当 min-heap 比 max-heap 多包含一个元素时，中位数位于 min-heap 的顶部。当最大堆比最小堆多一个元素时，中值在最大堆的顶部。

当两个堆包含相同数量的元素时，元素的总数是偶数。在这种情况下，您必须根据您对中位数的定义进行选择： a) 两个中间元素的平均值；b) 两者中的较大者；c) 较小的；d）随机选择两者中的任何一个......

每次插入时，将新元素与堆顶部的元素进行比较，以确定将其插入的位置。如果新元素大于当前中值，则进入最小堆。如果它小于当前中值，则进入最大堆。然后你可能需要重新平衡。如果堆的大小相差不止一个元素，则从具有更多元素的堆中提取最小/最大值并将其插入另一个堆。

为了构造元素列表的中值堆，我们应该首先使用线性时间算法并找到中值。一旦知道了中值，我们就可以根据中值简单地将元素添加到 Min-heap 和 Max-heap 中。不需要平衡堆，因为中位数会将输入的元素列表分成相等的两半。

如果您提取一个元素，您可能需要通过将一个元素从一个堆移动到另一个堆来补偿大小变化。这样，您可以确保在任何时候，两个堆都具有相同的大小或仅相差一个元素。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-14T16:28:58.640

这是一个 MedianHeap 的 java 实现，是在上面 comocomocomocomo 的解释的帮助下开发的。

```
import java.util.Arrays;
import java.util.Comparator;
import java.util.PriorityQueue;
import java.util.Scanner;

/**
 *
 * @author BatmanLost
 */
public class MedianHeap {

    //stores all the numbers less than the current median in a maxheap, i.e median is the maximum, at the root
    private PriorityQueue<Integer> maxheap;
    //stores all the numbers greater than the current median in a minheap, i.e median is the minimum, at the root
    private PriorityQueue<Integer> minheap;

    //comparators for PriorityQueue
    private static final maxHeapComparator myMaxHeapComparator = new maxHeapComparator();
    private static final minHeapComparator myMinHeapComparator = new minHeapComparator();

    /**
     * Comparator for the minHeap, smallest number has the highest priority, natural ordering
     */
    private static class minHeapComparator implements Comparator<Integer>{
        @Override
        public int compare(Integer i, Integer j) {
            return i>j ? 1 : i==j ? 0 : -1 ;
        }
    }

    /**
     * Comparator for the maxHeap, largest number has the highest priority
     */
    private static  class maxHeapComparator implements Comparator<Integer>{
        // opposite to minHeapComparator, invert the return values
        @Override
        public int compare(Integer i, Integer j) {
            return i>j ? -1 : i==j ? 0 : 1 ;
        }
    }

    /**
     * Constructor for a MedianHeap, to dynamically generate median.
     */
    public MedianHeap(){
        // initialize maxheap and minheap with appropriate comparators
        maxheap = new PriorityQueue<Integer>(11,myMaxHeapComparator);
        minheap = new PriorityQueue<Integer>(11,myMinHeapComparator);
    }

    /**
     * Returns empty if no median i.e, no input
     * @return
     */
    private boolean isEmpty(){
        return maxheap.size() == 0 && minheap.size() == 0 ;
    }

    /**
     * Inserts into MedianHeap to update the median accordingly
     * @param n
     */
    public void insert(int n){
        // initialize if empty
        if(isEmpty()){ minheap.add(n);}
        else{
            //add to the appropriate heap
            // if n is less than or equal to current median, add to maxheap
            if(Double.compare(n, median()) <= 0){maxheap.add(n);}
            // if n is greater than current median, add to min heap
            else{minheap.add(n);}
        }
        // fix the chaos, if any imbalance occurs in the heap sizes
        //i.e, absolute difference of sizes is greater than one.
        fixChaos();
    }

    /**
     * Re-balances the heap sizes
     */
    private void fixChaos(){
        //if sizes of heaps differ by 2, then it's a chaos, since median must be the middle element
        if( Math.abs( maxheap.size() - minheap.size()) > 1){
            //check which one is the culprit and take action by kicking out the root from culprit into victim
            if(maxheap.size() > minheap.size()){
                minheap.add(maxheap.poll());
            }
            else{ maxheap.add(minheap.poll());}
        }
    }
    /**
     * returns the median of the numbers encountered so far
     * @return
     */
    public double median(){
        //if total size(no. of elements entered) is even, then median iss the average of the 2 middle elements
        //i.e, average of the root's of the heaps.
        if( maxheap.size() == minheap.size()) {
            return ((double)maxheap.peek() + (double)minheap.peek())/2 ;
        }
        //else median is middle element, i.e, root of the heap with one element more
        else if (maxheap.size() > minheap.size()){ return (double)maxheap.peek();}
        else{ return (double)minheap.peek();}

    }
    /**
     * String representation of the numbers and median
     * @return 
     */
    public String toString(){
        StringBuilder sb = new StringBuilder();
        sb.append("\n Median for the numbers : " );
        for(int i: maxheap){sb.append(" "+i); }
        for(int i: minheap){sb.append(" "+i); }
        sb.append(" is " + median()+"\n");
        return sb.toString();
    }

    /**
     * Adds all the array elements and returns the median.
     * @param array
     * @return
     */
    public double addArray(int[] array){
        for(int i=0; i<array.length ;i++){
            insert(array[i]);
        }
        return median();
    }

    /**
     * Just a test
     * @param N
     */
    public void test(int N){
        int[] array = InputGenerator.randomArray(N);
        System.out.println("Input array: \n"+Arrays.toString(array));
        addArray(array);
        System.out.println("Computed Median is :" + median());
        Arrays.sort(array);
        System.out.println("Sorted array: \n"+Arrays.toString(array));
        if(N%2==0){ System.out.println("Calculated Median is :" + (array[N/2] + array[(N/2)-1])/2.0);}
        else{System.out.println("Calculated Median is :" + array[N/2] +"\n");}
    }

    /**
     * Another testing utility
     */
    public void printInternal(){
        System.out.println("Less than median, max heap:" + maxheap);
        System.out.println("Greater than median, min heap:" + minheap);
    }

    //Inner class to generate input for basic testing
    private static class InputGenerator {

        public static int[] orderedArray(int N){
            int[] array = new int[N];
            for(int i=0; i<N; i++){
                array[i] = i;
            }
            return array;
        }

        public static int[] randomArray(int N){
            int[] array = new int[N];
            for(int i=0; i<N; i++){
                array[i] = (int)(Math.random()*N*N);
            }
            return array;
        }

        public static int readInt(String s){
            System.out.println(s);
            Scanner sc = new Scanner(System.in);
            return sc.nextInt();
        }
    }

    public static void main(String[] args){
        System.out.println("You got to stop the program MANUALLY!!");        
        while(true){
            MedianHeap testObj = new MedianHeap();
            testObj.test(InputGenerator.readInt("Enter size of the array:"));
            System.out.println(testObj);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-04T04:36:50.697

这里我的代码基于 comocomocomocomo 提供的答案：

```
import java.util.PriorityQueue;

public class Median {
private  PriorityQueue<Integer> minHeap = 
    new PriorityQueue<Integer>();
private  PriorityQueue<Integer> maxHeap = 
    new PriorityQueue<Integer>((o1,o2)-> o2-o1);

public float median() {
    int minSize = minHeap.size();
    int maxSize = maxHeap.size();
    if (minSize == 0 && maxSize == 0) {
        return 0;
    }
    if (minSize > maxSize) {
        return minHeap.peek();
    }if (minSize < maxSize) {
        return maxHeap.peek();
    }
    return (minHeap.peek()+maxHeap.peek())/2F;
}

public void insert(int element) {
    float median = median();
    if (element > median) {
        minHeap.offer(element);
    } else {
        maxHeap.offer(element);
    }
    balanceHeap();
}

private void balanceHeap() {
    int minSize = minHeap.size();
    int maxSize = maxHeap.size();
    int tmp = 0;
    if (minSize > maxSize + 1) {
        tmp = minHeap.poll();
        maxHeap.offer(tmp);
    }
    if (maxSize > minSize + 1) {
        tmp = maxHeap.poll();
        minHeap.offer(tmp);
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T09:47:26.887

完美平衡的二叉搜索树 (BST) 不是中值堆吗？的确，即使是红黑 BST 也并不总是完美平衡，但它可能已经足够接近您的目的了。并且 log(n) 性能得到保证！

[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)比红黑 BST 更加平衡，因此它们更接近于真正的中值堆。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-31T08:27:07.977

这是一个 Scala 实现，遵循上面 comocomocomocomo 的想法。

```
class MedianHeap(val capacity:Int) {
    private val minHeap = new PriorityQueue[Int](capacity / 2)
    private val maxHeap = new PriorityQueue[Int](capacity / 2, new Comparator[Int] {
      override def compare(o1: Int, o2: Int): Int = Integer.compare(o2, o1)
    })

    def add(x: Int): Unit = {
      if (x > median) {
        minHeap.add(x)
      } else {
        maxHeap.add(x)
      }

      // Re-balance the heaps.
      if (minHeap.size - maxHeap.size > 1) {
        maxHeap.add(minHeap.poll())
      }
      if (maxHeap.size - minHeap.size > 1) {
        minHeap.add(maxHeap.poll)
      }
    }

    def median: Double = {
      if (minHeap.isEmpty && maxHeap.isEmpty)
        return Int.MinValue
      if (minHeap.size == maxHeap.size) {
        return (minHeap.peek+ maxHeap.peek) / 2.0
      }
      if (minHeap.size > maxHeap.size) {
        return minHeap.peek()
      }
      maxHeap.peek
    }
  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-29T01:37:26.063

另一种不使用最大堆和最小堆的方法是立即使用中值堆。

在最大堆中，父级大于子级。我们可以有一种新类型的堆，其中父项位于子项的“中间”——左子项小于父项，右子项大于父项。所有偶数条目都是左孩子，所有奇数条目都是右孩子。

可以在最大堆中执行的相同游泳和下沉操作也可以在此中值堆中执行 - 稍作修改。在最大堆中的典型游泳操作中，插入的条目向上游泳直到小于父条目，在中值堆中，它将向上游泳直到小于父条目（如果它是奇数条目) 或大于父项（如果它是偶数项）。

这是我对这个中值堆的实现。为了简单起见，我使用了一个整数数组。

```
package priorityQueues;
import edu.princeton.cs.algs4.StdOut;

public class MedianInsertDelete {

    private Integer[] a;
    private int N;

    public MedianInsertDelete(int capacity){

        // accounts for '0' not being used
        this.a = new Integer[capacity+1]; 
        this.N = 0;
    }

    public void insert(int k){

        a[++N] = k;
        swim(N);
    }

    public int delMedian(){

        int median = findMedian();
        exch(1, N--);
        sink(1);
        a[N+1] = null;
        return median;

    }

    public int findMedian(){

        return a[1];

    }

    // entry swims up so that its left child is smaller and right is greater

    private void swim(int k){

        while(even(k) && k>1 && less(k/2,k)){

            exch(k, k/2);

            if ((N > k) && less (k+1, k/2)) exch(k+1, k/2);
            k = k/2;
        }

        while(!even(k) && (k>1 && !less(k/2,k))){

            exch(k, k/2);
            if (!less (k-1, k/2)) exch(k-1, k/2);
            k = k/2;
        }

    }

// if the left child is larger or if the right child is smaller, the entry sinks down
    private void sink (int k){

        while(2*k <= N){
            int j = 2*k;
            if (j < N && less (j, k)) j++;
            if (less(k,j)) break;
            exch(k, j);
            k = j;
        }

    }

    private boolean even(int i){

        if ((i%2) == 0) return true;
        else return false;
    }

    private void exch(int i, int j){

        int temp = a[i];
        a[i] = a[j];
        a[j] = temp;
    }

    private boolean less(int i, int j){

        if (a[i] <= a[j]) return true;
        else return false;
    }

    public static void main(String[] args) {

        MedianInsertDelete medianInsertDelete = new MedianInsertDelete(10);

        for(int i = 1; i <=10; i++){

            medianInsertDelete.insert(i);
        }

        StdOut.println("The median is: " + medianInsertDelete.findMedian());

        medianInsertDelete.delMedian();

        StdOut.println("Original median deleted. The new median is " + medianInsertDelete.findMedian());

    }
} 
```

# php - preg_replace 在表单上

> ID：15319562
> 
> 赞同：0
> 
> 时间：2013-03-10T06:24:37.043
> 
> 标签：php, preg-replace

以下来自一个php表单。我想通过删除任何非数字字符来格式化值。我认为 pregreplace 是最好的选择，但我不确定如何实现它。

任何帮助将不胜感激。代码如下。

```
if(isset($_GET['price-max'])) {
    if($_GET['price-max'] >= 1) {
        $args['meta_query'][] = array(
            'key' => 'pyre_price',
            'value' => $_GET['price-max'],
            'compare' => '<=',
            'type' => 'numeric'
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:29:54.217

这应该可以解决问题。

```
$value = preg_replace('/[^0-9]+/', '', $value); 
```

这会将所有不是 0-9 的字符替换为空字符串。有关该函数的文档，请参见[preg_replace()](http://php.net/manual/en/function.preg-replace.php)。您可能还想查看[PCRE 正则表达式语法](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:54:55.617

解决了以下问题：

```
$valuemax = $_GET['price-max'];

$valuemax = preg_replace('/[^0-9]+/', '', $valuemax);

if(isset($_GET['price-max'])) {

if($_GET['price-max'] >= 1) {

    $args['meta_query'][] = array(

        'key' => 'pyre_price',

        'value' => $valuemax,

        'compare' => '<=',

        'type' => 'numeric'

    );

}

} 
```

# c# - WPF 容器（Canvas、Grid 等）的通用类

> ID：15319566
> 
> 赞同：1
> 
> 时间：2013-03-10T06:24:56.237
> 
> 标签：c#, wpf, containers

我正在创建一个由按钮调用的方法。然后该方法将画布添加到按钮的父容器控件。因此，例如，按钮位于网格上。然后该方法创建一个显示在按钮下方的画布。但我有两个问题：

*   如何获取对按钮父容器的引用？
*   有容器控件的类吗？我不在乎按钮是否在网格、画布、Stackpanel 等中。所以我正在寻找所有类型的 contianers 实现的接口或它们继承的类。

第二个方面更重要，因为我可以手动传递对容器的引用。

编辑：

它应该看起来像这样（减去颜色，这些只是为了显示不同的元素。

![在此处输入图像描述](../Images/5868842ae2f2708cf04f8e916eceb0dc.png)

红色画布应该弹出来处理确认。也许甚至有一个漂亮的动画。我的想法是创建一个可以像这样调用的类：

```
MyPopup popup = new MyPopup("Are you sure?", "Yes", "No", delegateFirstButton, delegateSecondButton);
popup.Show(); 
```

到目前为止，我的代码还不是一个类，而只是一个方法。文本部分目前是硬编码的。标记线需要更加灵活，这就是我提出问题的原因。

```
public void ShowPopup(Control senderControl)
{
    //I need to have a parameter that accepts all containers instead of this line:
    this.myGrid.Children.Add(popup);

    Border border = new Border();
    popup.Children.Add(border);
    border.Margin = new Thickness() { Top = 10 };
    border.Child= text;
    text.Text = "Are you sure?";
    text.HorizontalAlignment = System.Windows.HorizontalAlignment.Center;
    popup.SizeChanged += delegate { border.Width = popup.ActualWidth; };

    popup.Children.Add(btn1);
    btn1.Content = "Yes";
    btn1.Height = 22;
    btn1.Padding = new Thickness(10, 0, 10, 0);
    btn1.Margin = new Thickness() { Left = 15, Top = 35 };

    popup.Children.Add(btn2);
    btn2.Content = "No";
    btn2.Height = 22;
    btn2.Padding = new Thickness(10, 0, 10, 0);
    btn1.SizeChanged += delegate { btn2.Margin = new Thickness() { Left = 30 + btn1.ActualWidth, Top = 35 }; };

    popup.Height = 70;
    btn2.SizeChanged += delegate
    {
        popup.Width = 45 + btn1.ActualWidth + btn2.ActualWidth;
        updatePositions(senderControl);
    };

    popup.Background = Brushes.Red;

    popup.VerticalAlignment = System.Windows.VerticalAlignment.Top;
    popup.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
}

public void updatePositions(Control senderControl)
{
    Point location = senderControl.TranslatePoint(new Point(0, 0), this.myGrid);

    popup.Margin = new Thickness()
    {
        Left = location.X + (senderControl.ActualWidth / 2) - (popup.Width / 2),
        Top = location.Y + senderControl.ActualHeight + 15
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:56:25.590

听起来你正在选择艰难的方式来做到这一点。

如果您需要弹出窗口，请使用[`Popup`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx).

否则，如果出于某种原因您不想使用它，您最好在 XAML 根附近的某处放置一个网格，并始终将其用作容器：

```
<Window>
   <Grid x:Name="MainUI"/>
   <Grid x:Name="PopupContainer"/>
</Window> 
```

否则，您几乎总是会遇到`Z-Index`问题（如果您遵循当前的方法）。

此外，在代码中创建所有 UI 内容是一个非常糟糕的主意。要么将你的 Yes/No 对话框封装在 a 中，`UserControl`要么为此创建一个适当`Template`的对话框。

正如我之前所说，不惜一切代价避免在代码中创建/操作 UI 元素，因为它会产生很多可维护性问题。

# python - pycuda代码的问题：Segmentation fault (core dumped)

> ID：15319572
> 
> 赞同：1
> 
> 时间：2013-03-10T06:26:13.347
> 
> 标签：python, numpy, pycuda

代码如下：

```
import pycuda.driver as cuda
import pycuda.autoinit
from pycuda.compiler import SourceModule
import numpy
dtype = numpy.float32

total_size = numpy.int32(1500)
hist_rgb = numpy.random.randn(total_size)
his_rgb = hist_rgb.astype(dtype)
#print hist_rgb
a_gpu = cuda.mem_alloc(hist_rgb.nbytes)
#print a_gpu
cuda.memcpy_htod(a_gpu, hist_rgb)
numblock = 1500/256
print numblock
mod = SourceModule("""
__global__ void enhance(float *a_gpu,int total){
int pixel= threadIdx.x+blockIdx.x*blockDim.x;
    if(pixel<total){
      a_gpu[pixel]*=2;
    }
}
""")

func = mod.get_function("enhance")
func(a_gpu, total_size, block=(256,1,1), grid=(numblock,1)) 
result=numpy.empty_like(a_gpu)
cuda.memcpy_dtoh(result, a_gpu)
print result 
```

但是我在终端中遇到如下错误：

```
Segmentation fault (core dumped) 
```

我不知道这是怎么回事？有人帮忙吗？

# python - 选择列表的第一个元素

> ID：15319576
> 
> 赞同：0
> 
> 时间：2013-03-10T06:26:51.807
> 
> 标签：python

我有一个这样的列表

```
[[('C', '0', 8.625), ('A', '0', 4.5)], [('B', '0', 15.3125), ('D', '2', 6.0625)],
[('C', '1', 8.1875), ('D', '2', 6.0625)], [('G', '2', 11.0625), ('D', '2', 6.0625)],
[('G', '2', 10.1875), ('C', '1', 8.1875)]] 
```

如何检查是否`('C', '0', 8.625)`在列表中（如果可能不使用循环）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:33:46.180

假设您的列表有 3 个“级别”，试试这个：

```
any(('C', '0', 8.625) in li for li in c) 
```

`c`你的清单在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T06:47:58.497

您可以按照@Schoolboy 的建议通过隐式循环对所有列表执行成员资格操作，也可以使用 itertools.chain

```
>>> some_list = [[('C', '0', 8.625), ('A', '0', 4.5)], [('B', '0', 15.3125), ('D', '2', 6.0625)],
[('C', '1', 8.1875), ('D', '2', 6.0625)], [('G', '2', 11.0625), ('D', '2', 6.0625)],
[('G', '2', 10.1875), ('C', '1', 8.1875)]]
>>> from itertools import chain
>>> ('C', '0', 8.625) in chain(*some_list)
True 
```

# node.js - Mongoose 查找文档然后限制每个变量类型，而不是全局

> ID：15319578
> 
> 赞同：0
> 
> 时间：2013-03-10T06:27:01.087
> 
> 标签：node.js, mongodb, find, mongoose, limit

我可以执行一个`.find()`文档但将返回的文档限制在一个特定的`field`，假设它只会`groups`为每个`type`组（模式字段）返回 5 个（模式）吗？

我测试过`.limit`，但这是一个全局限制，而不是特定领域的限制。

我知道我可以找到然后对返回的文档进行后处理，但我想要一种特定于猫鼬的方法来执行此操作，如果有的话。

希望这是有道理的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:54:26.903

更多的搜索完成了工作：D

在简历中，可以使用该`.find().distinct()`方法。

[这](https://stackoverflow.com/questions/8315992/does-mongooses-distinct-function-support-regex-in-a-query)是完整的答案：

# ruby-on-rails - 动作缓存不会重复使用大的缓存片段

> ID：15319581
> 
> 赞同：0
> 
> 时间：2013-03-10T06:27:42.250
> 
> 标签：ruby-on-rails, caching

我正在尝试在我的 Policy 控制器上实现动作缓存，但是，当呈现的片段大小增加时，它不会重新使用缓存的片段。

当我的操作“索引”仅显示**10 个 JSON 对象**时，它会正确创建和读取该操作的片段。证明：

```
Started GET "/policies" for 127.0.0.1 at 2013-03-10 01:03:38 -0500
Processing by PolicyController#index as JSON
Read fragment views/railsdev.com:3000/policies.json (0.3ms)
  VideoPolicy Load (0.4ms)  SELECT `video_policies`.* FROM `video_policies` 
Write fragment views/railsdev.com:3000/policies.json (0.5ms)
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 0.4ms)

Started GET "/policies" for 127.0.0.1 at 2013-03-10 01:03:56 -0500
Processing by PolicyController#index as JSON
Read fragment views/railsdev.com:3000/policies.json (0.4ms)
Completed 200 OK in 1ms (ActiveRecord: 0.0ms)
[2013-03-10 01:03:56] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

但是，当我将数量增加到**10,000 个 JSON 对象**时，它开始查询数据库并使用每个请求重新写入片段。证明：

```
Started GET "/policies" for 127.0.0.1 at 2013-03-10 01:12:45 -0500
Processing by PolicyController#index as JSON
Read fragment views/railsdev.com:3000/policies.json (0.3ms)
  VideoPolicy Load (6.8ms)  SELECT `video_policies`.* FROM `video_policies` 
Write fragment views/railsdev.com:3000/policies.json (3.8ms)
Completed 200 OK in 3482ms (Views: 0.2ms | ActiveRecord: 7.5ms)

Started GET "/policies" for 127.0.0.1 at 2013-03-10 01:12:52 -0500
Processing by PolicyController#index as JSON
Read fragment views/railsdev.com:3000/policies.json (0.2ms)
  VideoPolicy Load (1.7ms)  SELECT `video_policies`.* FROM `video_policies` 
Write fragment views/railsdev.com:3000/policies.json (115.0ms)
Completed 200 OK in 3713ms (Views: 0.2ms | ActiveRecord: 1.7ms)
[2013-03-10 01:12:55] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

我注意到当文件大小超过 1MB 标记时会发生这种情况（顺便说一句，这是 memcached 对象的最大大小。我也在使用 memcached。）是否存在某种最大片段大小或其他原因它没有缓存这些吗？

这也是我的控制器：

```
class PolicyController < ApplicationController
  caches_action :index, :cache_path => Proc.new {|controller| controller.params }

  def index
    policies = VideoPolicy.all
    respond_to do |format|
      format.html
      format.json{
        render :json => policies.to_json
      }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:58:20.767

我猜这是造成这种情况的 memcached 的默认页板大小。

[这个](http://www.ruby-forum.com/topic/100264)讨论讨论了这个问题和一些步骤。

[Memcahced 手册页](http://linux.die.net/man/1/memcached)说`-I <size>`可用于覆盖默认的 1 mb。您可以尝试将其设置为 2mb 并查看您的应用程序的行为是否发生变化？

# java - 哪些文件系统支持 Java UserDefinedFileAttributeView？

> ID：15319586
> 
> 赞同：9
> 
> 时间：2013-03-10T06:28:37.517
> 
> 标签：java, filesystems, metadata, nio

我需要将自定义数据与文件系统中的文件一起存储（每个文件大约 50 个字节）。我没有任何其他存储来保存数据，也无法为此创建额外的文件。这些是我的要求，我无法改变。

我发现这可以使用 UserDefinedFileAttributeView 类来完成。

哪些文件系统支持此功能？NTFS、FAT、Linux 上的任何其他文件系统？

数据实际存储在哪里以及它的可靠性如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:54:48.510

我已经通过 UserDefinedFileAttributeView 测试了以下文件系统支持自定义属性：NTFS、Ext4、ZFS。其他流行的文件系统也可能支持它们。在以下文件系统 FAT32、HFS+ 中未找到支持。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-08T21:21:23.797

我个人发现仅仅依靠一些列表是不够的。总有一种方法可以询问底层实现、支持哪些视图以及是否支持任何具体视图。查看以下代码：

```
final FileSystem defaultFS = FileSystems.getDefault();

for (String fileAttributeView : defaultFS.supportedFileAttributeViews()) {
    System.out.println("Default file system supports: " + fileAttributeView);
} 
```

输出：

```
Default file system supports: acl
Default file system supports: basic
Default file system supports: owner
Default file system supports: user
Default file system supports: dos 
```

[您可以在我关于NIO.2 中文件属性的](http://jakubstas.com/file-attributes-nio-2)文章中阅读更多内容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T06:45:17.980

我还没有找到所有受支持文件系统的完整列表。看起来支持许多现代文件系统（ntfs、ext*）。正确使用这些用户定义属性的唯一方法是[`supportsFileAttributeView`](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/FileStore.html#supportsFileAttributeView%28java.lang.Class%29)在读取和写入数据之前调用。

您也可以尝试[`Preferences API`](http://docs.oracle.com/javase/6/docs/technotes/guides/preferences/index.html)将数据存储在一些 JVM 管理的存储中，因此从技术上讲，您不会创建任何文件。

# java - 链表实现无限循环

> ID：15319588
> 
> 赞同：-4
> 
> 时间：2013-03-10T06:29:08.150
> 
> 标签：java, linked-list

这是我在java中的链表代码。代码进入无限循环，我无法找出问题所在。可能出了什么问题。

```
import java.io.*;
class LinkedList
{
public int data;
public LinkedList next;
LinkedList add(int a,LinkedList ob)
{   
    LinkedList p=ob;
    if(ob==null)
    {
        this.data=a;
        ob=this;
        return ob;
    }   
    else
    {
        while(p.next!=null)
        {   
            if(p.next==null)
            break;
            else
            p=p.next;
        }
        this.data=a;
        this.next=null;
        p.next=this;
    }
    return null;    
}
void display(LinkedList ob) 
{
    LinkedList p=ob;
    while(p!=null)
    {
        System.out.println(p.data); 
        p=p.next;
    }   
}
public static void main(String []args)throws IOException
{
    LinkedList head=null;
    LinkedList o=new LinkedList();
    head=o.add(5,head);
    o.add(6,head);
    o.add(7,head);
    o.display(head);        
}
} 
```

头部正确插入，但其他元素正在产生问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:54:20.893

你也应该有一个要添加的 LinkedList（这应该是一个节点，但是你这样做的方式是一个 LinkedList）

```
LinkedList p=ob;
LinkedList toAdd=new LinkedList(); 
```

并在您设置其部分的 add 方法的末尾，将其替换为 toAdd

```
toAdd.data=a;
toAdd.next=null;
p.next=toAdd; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T07:04:46.373

后

```
o.add(6,head); 
```

在添加（）中，

```
p.next=this; // this is causing infinite loop. A node is pointing to itself.<br> 
```

请参考以下 add()'ing 到 LinkedList 的方法：

```
LinkedList add(int a,LinkedList ob)
{   
    //for creating head
    if(ob==null)
    {
        this.data=a;
        ob=this;
        return ob;
    }   
    else
    {
        // iterate till the last node
        while(ob.next!=null)
        {               
            ob = ob.next;
        }
        LinkedList p = new LinkedList();
        p.data = a;
        p.next = null;
        ob.next = p;        
    }
    return null;    
} 
```

# sql - 查找已申请休假的员工人数

> ID：15319589
> 
> 赞同：0
> 
> 时间：2013-03-10T06:29:24.257
> 
> 标签：sql, ms-access, count, ms-access-2010

下面是我的表中的 3 列以及其他 4 列。

```
ID  EMP_ID  APPROVAL_STATUS
103 0023946 Pending
105 0025830 Pending
109 0022786 Pending
111 0023946 Pending 
```

**我的问题：**计算计划休假的员工人数的查询是什么？

请记住，ID 为 0023946 的员工已经申请了 2 次暂停，但仍然应该计数为 1，其余的加到总值中。

**我在 ASP 中编写的查询：**

```
SELECT COUNT(*), EMP_ID 
FROM TimeoffDetails 
WHERE APPROVAL_STATUS = 'Pending' 
GROUP BY EMP_ID 
```

实际结果应该是 3 名员工请假。但上面的查询在 asp 中产生 1，而我在数据库中运行这个查询，结果为 3。

请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:46:31.493

您可以使用 DISTINCT COUNT（对于单个总值，您不需要使用 GROUP BY）：

```
SELECT COUNT(DISTINCT EMP_ID) FROM table_name TimeoffDetails WHERE APPROVAL_STATUS='Pending' 
```

或与您的 GROUP BY：

```
SELECT COUNT(DISTINCT EMP_ID), EMP_ID FROM table_name TimeoffDetails WHERE APPROVAL_STATUS='Pending' GROUP BY EMP_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:38:40.203

好的，这有效：

```
SELECT Count(*) AS count_employee FROM (SELECT DISTINCT EMP_ID FROM timeoffdetails); 
```

# php - 如何使用 PHP 检索子字符串

> ID：15319591
> 
> 赞同：-1
> 
> 时间：2013-03-10T06:29:38.373
> 
> 标签：php

我试图弄清楚如何从我无法控制的字符串中提取一些子字符串。该字符串包含我需要的 3 条信息。他们是：

```
Order #
Middle Digits
CV2 Number 
```

这些信息中的每一个都是可变长度的。例如，在下面的字符串中，订单号是 2，但它很可能是 20 或 200，或 20174，或其他任何值。中间数字可以是 8 个数字或 2 个数字等，而 CV2 数字可以是 3、2 或 1 个数字...

```
Here are the middle digits of the card number for order #2:

Middle Digits: 11111111

And here is the CV2 number:

CV2 Number: 444 
```

在上面的示例字符串中，我需要获取订单号 (2)、中间数字 (11111111) 和 CV2 号 (444)。这些数字具有任意长度或可能根本不存在。

哪些 PHP 函数/逻辑可以帮助我可靠地检索这些值？我需要的唯一信息是数字。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:41:06.103

您可能需要结合[PCRE 正则表达式语法查看 php 的](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)[preg_match()](http://php.net/manual/en/function.preg-match.php)以匹配文本模式。

PCRE 正则表达式语法为您提供了匹配模式的强大功能。您可以通过实现以下模式来检索这些数字：（对于订单#NNNN）、（中间数字：NNNN）、（CV2 编号：NNNN）其中 NNNN 将是匹配的文本。

**编辑**

例如，要匹配订单号，请尝试以下操作：

```
preg_match('/order #([0-9]+)/', $str, $matches); 
```

然后`$matches[1]`应该包含匹配的订单号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:32:56.727

```
The explode() function breaks a string into an array.
explode(separator,string,limit); 
```

例如：

```
$str = "Hello world. It's a beautiful day.";
print_r (explode(" ",$str)); 
```

上面代码的输出将是：

```
Array
(
    [0] => Hello
    [1] => world.
    [2] => It's
    [3] => a
    [4] => beautiful
    [5] => day.
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T06:39:41.733

您需要 2 次思考才能使用：

1)substr() 你可以[在这里](http://php.net/manual/en/function.substr.php)阅读更多！

```
 string substr ( string $string , int $start [, int $length ] ) 
```

返回由 start 和 length 参数指定的字符串部分。

2)strpos() 你可以[在这里](http://php.net/manual/en/function.strpos.php)阅读更多！

```
 int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

在 haystack 字符串中查找第一次出现 needle 的数字位置。

***haystack*** - 要搜索的字符串。

***needle*** - 如果 needle 不是字符串，则将其转换为整数并用作字符的序数值。

***offset*** - 如果指定，搜索将从字符串开头开始计数的字符数。与 strrpos() 和 strripos() 不同，偏移量不能为负数。

您需要在您需要的值之前找到关键字，例如`"CV2 Number: 444"`您需要查看的键是位置是`CV2 Number:`和使用 substr() 获得的值`444`

或者你可以在 php 中使用 Reg_exp ：

```
int preg_match ( string $pattern , string $subject [, array &$matches [, int $flags = 0 [, int $offset = 0 ]]] ) 
```

在主题中搜索与模式中给出的正则表达式的匹配项。

而这个例子

```
<?php
$subject = "abcdef";
$pattern = '/^def/';
preg_match($pattern, substr($subject,3), $matches, PREG_OFFSET_CAPTURE);
print_r($matches);
?> 
```

会产生

```
Array
(
    [0] => Array
        (
            [0] => def
            [1] => 0
        )

) 
```

# php - 如何使用 PDO 在 MySQL 中找到下一个自动增量值？

> ID：15319594
> 
> 赞同：-2
> 
> 时间：2013-03-10T06:30:28.130
> 
> 标签：php, mysql, pdo, auto-increment, next

我正在开发一个使用 PHP 和 MySQL 编写的 Web 应用程序。我在其中使用了 PDO。
我需要知道**如何使用 PDO 在 MySQL 中找到下一个自动增量值**？
因为我想用记录 ID 号命名一些东西（例如：图像路径）。如果我从表中删除项目，我的应用程序必须将下一个自动增量值分配给新项目。

做`$db->lastInsertId()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:35:32.473

当然，您**不能**在插入之前获得*最后插入的 id*。

所以，照常做：**先将**
数据插入表中，然后获取插入的id，然后重命名

# java - 变量的方法级别范围

> ID：15319597
> 
> 赞同：2
> 
> 时间：2013-03-10T06:30:50.330
> 
> 标签：java, variables, methods, scope

我是Java的初学者，在练习时遇到了这些错误，所以我想澄清它们，而不是试图记住错误来避免它们。

```
public static int gcd(int a, int b) {
  if(a > b) {
    int result = a % b;
  }
  return result;
} 
```

这会产生我`a cannot find symbol`，但我认为我将结果初始化为`int`循环`if`？

```
public static int gcd(int a, int b) {
  if(a > b) {
    int result = a % b;
    return result;
  }
} 
```

为此，如果我在 if 循环中返回结果，是否因为它继续循环而出错？

```
public static int gcd(int a, int b) {
  int result = 0;
  if(a > b) {
    result = a % b;
  }
  return result;
} 
```

`if`在循环之外声明结果时错误消失。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T06:33:39.053

这与变量的范围有关`result`。当它在里面`if`时，当你离开`if`(the `}`) 时它就不再存在了。

```
public static int gcd(int a, int b){
    int result = 0;
    if (a > b) {
        result = a % b;
    }
    return result;
} // result exists until here

public static int gcd(int a, int b){
    if (a > b) {
        int result = a % b;
    } // result exists until here
    return result; // result doesn't exist in this scope
} 
```

基本上，您只能访问定义它们的代码块中的变量，代码块由花括号定义`{ ... }`。

您的函数的替代实现可以在没有变量的情况下完成。

```
public static int gcd(int a, int b){
    if (a > b) {
        return a % b;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:33:02.343

局部变量被称为*局部*变量，因为它们只能在创建它们的*块*内看到。

块是里面的任何代码`{ ... }`。

让我们看看您在第一个版本中拥有的块：

```
public static int gcd(int a, int b) { // first block starts here
  if(a>b) { // second block, an inner block, starts here
      int result=a%b;
  } // second block ends here
  return result;
} // first block ends here 
```

*因此，您在第二个*块中创建一个局部变量，并尝试在该块*之外*，即在第*一个*块中使用它。这就是编译器所抱怨的。*第二*块完成后，变量`result`种类消失了。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T06:34:18.243

第一个错误的原因是该`if`语句为变量建立了新的上下文。的声明`result`在 的主体之外不可见`if`。

在第二种情况下，`if`可能无法满足条件，在这种情况下，函数将不会执行`return`语句。这也是一个错误，因为函数需要`int`为每个执行路径返回一个（或抛出异常）。*

# c++ - 使用此 websocket++ 示例的线程安全用户数据

> ID：15319605
> 
> 赞同：0
> 
> 时间：2013-03-10T06:32:47.503
> 
> 标签：c++, thread-safety, locking, blocking, websocket++

[这个](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)websocket++ 的例子正是我想要做的核心。

虽然可以很容易地跟踪用户`websocketpp::connection_hdl`，但我需要保留更多关于他们的信息，就像堆栈可能如何跟踪我们正在查看的页面以更新投票、评论、答案、左上角的消息等。

我刚刚发现[在此代码示例中锁定时 .push() 是否失败或等待](https://stackoverflow.com/questions/15319121/does-push-fail-or-wait-while-locked-in-this-code-example)`std::queue`不是完全线程安全的？并且我将找到一种方法（可能使用堆栈 q）在[为 push 优化的线程安全 C/C++ 队列中工作](https://stackoverflow.com/questions/13561106/thread-safe-c-c-queue-optimized-for-push)。更重要的是，我刚刚发现线程安全向量更麻烦[Threadsafe Vector class for C++](https://stackoverflow.com/questions/1099513/threadsafe-vector-class-for-c)`boost::lockfree::queue`

从第一个链接中的代码，如何在不锁定和阻塞的情况下以线程安全的方式跟踪用户数据（例如当前查看的堆栈问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:44:00.053

我实际上是在 websocket++ 应用程序中自己做的，虽然我不使用实验分支。

我所做的是在 on_open 中创建一个 UserData 对象（我已定义），该对象在构造函数中获取连接。然后我将该对象放在 a 上`std::map<std::string, connection_hdl>`。该字符串是序列化的连接，它提供了一种唯一标识它的方法。你可以试验一下`std::map<connection_hdl, UserData>`。

当我想找到 UserData 时，我只需在地图中查找连接并返回 UserData。

然后为了使其线程安全，您需要在`boost::unique_lock<boost::mutex>`每次访问`std::map`. 几乎没有std 类是thead-aware 的，所以你应该总是添加这样的守卫。

编辑：[这](https://github.com/zaphoyd/websocketpp/blob/master/examples/chat_server/chat.cpp)是稳定的 websocket++ 中的示例，它显示了如何执行此操作的一种方法。

# javascript - 嵌套的 Javascript 循环产生奇怪的结果

> ID：15319609
> 
> 赞同：2
> 
> 时间：2013-03-10T06:33:11.517
> 
> 标签：javascript, arrays, variables, for-loop, nested

所以我试图通过两个“for”循环构建一个数组，一个用于多维数组的每一级。

变量：

```
var pos = new Array();
var scales = [
  2,   // Background
  0.9, // Slide_1 (farthest back)
  1,   // Slide 2
  1.15 // Slide 3
]; 
```

这是代码：

```
for(j = 0; j < 5; j++) {
  var nextPosition = 0;
  for(var i = 0; i < numZones; i++) {
    alert(j + '' + i);
    pos[j][i] = nextPosition;
    nextPosition = (nextPosition + screenWidth + bufferSize) / scales[j];
  }
} 
```

它会很好地遍历第一层，但是当它滚动到第二层时，Firebug 会在该`pos[j][i] = nextPosition`行抛出一个模糊的错误。它声称

```
TypeError: can't convert undefined to object 
```

不用说，我很生气和困惑。究竟什么是未定义的？我错过了什么？我在每次传递时都输入and`alert()`的值，它们很好，但是当它到达上述行时，它会抛出错误。`i``j``i=0``j=1`

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T06:36:23.890

问题是您从不定义`pos[j]`. 因此，`pos[j][i]`就像`undefined[i]`。试试这个：

```
for(j = 0; j < 5; j++) {
    var nextPosition = 0;
    pos[j] = [];                         <== new statement
    for(var i=0; i < numZones; i++) {
        alert(j + '' + i);
        pos[j][i] = nextPosition;
        nextPosition = (nextPosition + screenWidth + bufferSize) / scales[j];
    }
} 
```

顺便说一句，我建议`pos`使用数组文字进行初始化：

```
var pos = []; 
```

而不是与`new Array()`. 它被认为更时尚。:)

# google-maps - OpenStreetMaps 上的水深

> ID：15319610
> 
> 赞同：1
> 
> 时间：2013-03-10T06:33:20.057
> 
> 标签：google-maps, openstreetmap

是否可以在 OSM 上渲染水深？我想像谷歌地图上的卫星视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:45:36.033

我相信这是可能的。

表示将如下[所示](http://wiki.openstreetmap.org/wiki/Water_Depth#Data_for_water_depths)。请注意， a`Point`有一个名为 的属性`Depth`。

以下是来自 OSM wiki 的一些参考资料

1.  [水深](http://wiki.openstreetmap.org/wiki/Water_Depth)
2.  [Open Sea 地图](http://wiki.openstreetmap.org/wiki/OpenSeaMap)（是 OpenStreetMap 的一部分并使用与 OpenStreetMap 相同的数据库）

# python - python中的素数生成器：数字的累积

> ID：15319615
> 
> 赞同：0
> 
> 时间：2013-03-10T06:33:59.453
> 
> 标签：python, python-2.7, primes

我的发电机效果很好：我已经测试过很多次了。只是，有一个问题：随着数字的增加，正如人们所相信的那样，程序变得越来越慢。我已经想到了一种方法来做到这一点，但不知道如何，因为我不久前才开始使用 python。

我的生成器如下所示：

```
 while 0==0:
        i=input('Enter the number for which all previous shall be tested for primality: ')
        n=0
        a=[0,1,2]
        while n<=i:
            n=n+1
            for b in range(2,n):
                if n%b==0:
                    break
                if b==(n-1):
                    a.append(n)
                    print a` 
```

我发现如果我在 0==0 之前将 a=[0,1,2] 移动到空间，它会在程序运行时累积以前使用的所有数字。我想改变的是，随着素数的累积，它会使用这些素数来赶上下一个未知数。例如，假设我希望所有素数都达到 100。然后，我希望所有素数都达到 200。我不想重新计算最多 100 的素数，而是要编程跳过这些并继续100 之后的第一个素数。

任何建议都将不胜感激，我使用的是 2.7 Python。

```
a = [2,3,5,7,11]
while 1:
    b = input('Enter the number for which all previous shall be tested for primality: ')
    c = len(a)
    d = 0
    isprime = True
    while b<=a[c-1] and not d==c:
            if b==a[d]:
            print a[0:d]
        if d==(c-1) and not b==a[d]:
            break
        d = d + 1
    while b>a[c-1]:
        d = 0
        print a[c-1]
        if b%a[d]==0:
            isprime = False
            break
        while a[d]==a[c-1]:
            f = a[c-1] + 2
            for g in range(f,b,2):
                if b%g==0:
                    isprime = False
                    break
            if isprime:
                a.append(b)
                print a 
```

好的，我让这个程序工作，以便在找到质数时，将它们存储起来并用于下一组质数。有了这个，假设我想找到最大 1000 的素数。程序计算素数。然后，我想知道 2000 以内的素数。好吧，既然程序已经找到了 1000 以内的素数，就不需要复制它们了，所以它把所有小于或等于最大数的素数作为输入，然后通过将新数字除以已知素数来找到剩下的内容。然后它将新的素数添加到 a，并继续。

唯一的问题是，有一个问题。它不想按我计划的方式工作，我正在努力修复它。也许你们可以参与进来看看有什么问题？

好的，我已经编辑了代码，以便它运行得更快：

```
While 1:
    i=input('Enter the number for which all previous shall be tested for primality: ')
    n=0
    while n<=i:
        n=n+1
        a=int(n**.5)
        for b in range(2,n):
            if n%b==0:
                break
             if b==a:
                print n
                break 
```

到目前为止，这个程序运行的时间只是我原来的和我尝试过的那些时间的一小部分。在我进行的一次测试中，我得到了它，我的第一个算法找到了 100000 的所有素数。我的第一个算法花了 4 分钟多一点，不像我的新程序大约需要 1 分 40 秒。相当升级，如果我自己可以这么说的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:24:28.390

有[多种素数算法](http://en.wikipedia.org/wiki/Generating_primes#Prime_sieves)，其中筛子是最快的。如果您熟悉使用[c 扩展 python](http://docs.python.org/extending/embedding.html)，则可以包装[primesieve](https://code.google.com/p/primesieve/)。[以下是Eratosthenes 筛子的](http://code.activestate.com/recipes/117119-sieve-of-eratosthenes/)python 实现，如果您还有其他问题，请告诉我：

```
from __future__ import generators
def eratosthenes():
    '''Yields the sequence of prime numbers via the Sieve of Eratosthenes.'''
    D = {}  # map composite integers to primes witnessing their compositeness
    q = 2   # first integer to test for primality
    while 1:
        if q not in D:
            yield q        # not marked composite, must be prime
            D[q*q] = [q]   # first multiple of q not already marked
        else:
            for p in D[q]: # move each witness to its next multiple
                D.setdefault(p+q,[]).append(p)
            del D[q]       # no longer need D[q], free memory
        q += 1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T11:14:03.440

这应该更快：

```
while 1:
    i=input('Enter the number for which all previous shall be tested for primality: ')
    n=5
    a=[2,3]
    while n<=i:
        n=n+1
        isPrime = True
        for b in a:
            if n%b==0:
                isPrime = False
                break
        if isPrime:
            a.append(n)
            print a 
```

但我不认为你能比 O（见 sebastian 的评论）更快，除非你使用更高级的算法和非常大的 10**100。

数字越大，它总是会变慢。

# c++ - C ++中的垃圾收集/析构函数

> ID：15319621
> 
> 赞同：1
> 
> 时间：2013-03-10T06:34:56.560
> 
> 标签：c++, memory-management

我是 C++ 新手。根据我的阅读，与 java 不同，C++ 没有自动垃圾处理，因此在类中我们为对象添加析构函数：

```
class A{

class A();
~class A(); // destructor

}; 
```

我很好奇当我们使用结构时会发生什么。另外，当我们不向类添加析构函数时会发生什么？内存是如何释放的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:58:02.113

我认为回答的一个好方法是将 Java 与 C++ 进行比较。在 Java 中，所有引用类型都存储在堆中，而所有原语都存储在堆栈中。这意味着，原语在超出范围时被销毁；也就是说，只要声明它们的方法返回。另一方面，引用类型并非如此。

在 C++ 中，您可以控制动态（在堆中）或自动（在堆栈中）存储的变量。如果您使用`new`运算符创建一个对象，它会保留在堆中，直到您使用相应的`delete`. 如果您在没有运算符的情况下创建变量（或对象）`new`，则当对象超出范围时会释放其内存。

回答您关于构造函数和析构函数的问题：构造函数是一种始终在创建新对象时调用的方法。如果您不指定任何构造函数，则默认的构造函数（不带参数）是隐含的。当对象超出范围时调用析构函数，或者如果您使用`delete`运算符删除它（在您使用 动态创建它的情况下`new`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:36:44.473

C++ 没有任何垃圾收集。这几乎是真的。析构函数是一个非常有用的工具，也用于收集垃圾。

在一个类中有 4 种预定义方法：默认构造函数、复制构造函数、赋值运算符的重载和析构函数。这意味着此方法具有默认版本：

*   默认构造函数将调用所有类成员的默认构造函数。
*   复制构造函数会将所有类成员复制到另一个。
*   赋值运算符就像一个特殊的复制构造函数。
*   默认析构函数将调用所有类成员的析构函数。

当您定义时：

```
class A {
private:
    int* a;
public:
    A() { a = new int(5); }
}; 
```

默认析构函数只会擦除指针本身分配的内存，而不释放占用的内存`int(5)`。

因此我们需要定义一个特定的析构函数：

```
~A() { delete a; } 
```

甚至更好地使用智能指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T06:37:45.480

适用于类的相同规则也适用于 C++ 中的结构，但默认访问级别除外，其他没有。

如果你没有定义析构函数，编译器会为你定义一个默认的析构函数。对于类和结构。

默认构造函数调用基类的析构函数和拥有它们的所有成员的析构函数。默认析构函数只是一种商品，以防您不需要对类进行任何特殊处理，您不需要手动编写空版本（例如从堆中释放动态分配的对象，或管理非自动成员）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T06:39:08.503

C++ 中结构和类的唯一区别是默认访问控制——默认情况下，成员在类中是私有的，而在结构中是公有的。如果你没有定义自己的析构函数，编译器会给你一个默认的析构函数；当对象被销毁时，所有成员也都被销毁。如果任何类成员指向堆分配的内存，您只需要定义自己的析构函数。

# android - 代码一次又一次地请求雅虎天气服务

> ID：15319624
> 
> 赞同：1
> 
> 时间：2013-03-10T06:35:26.647
> 
> 标签：android, android-activity, activity-lifecycle, yahoo-weather-api

我开发了一个`Yahoo! Weather API` 用于获取天气信息的 android 应用程序，因为它允许每小时`Yahoo! Weather API`仅请求一次服务。`10 to 20`当我在它们之间来回切换时，我的应用程序有两个活动我的应用程序一次又一次地请求天气服务我的代码是：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub      
    String nameOfCity= pref.getString("cityname", cityNameInput.getText().toString());      
    getWeather(null, nameOfCity);// this the AsyncTask which is used to request Yahoo! Weather service.
    cityNameInput.setText(nameOfCity);
    super.onResume();
    Log.d("My_TAG", "in onResume()");
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub      
    editor = pref.edit();
    if(cityNameInput.getText().toString().equals("")){
        cityNameInput.setText(yahooWeatherInfo.getLocationCity());
    }else{
        editor.putString("cityname", cityNameInput.getText().toString());
    }
    editor.commit();
    super.onPause();
    Log.d("MY_TAG", "in onPause()");
} 
```

现在请告诉我如何限制它不要求`Yahoo! Weather Service`一次又一次地在活动之间切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:42:20.543

我看了你的代码。

你在`getWeather(null, nameOfCity);`打电话`onResume()`。`onResume()`当您的活动再次恢复时，将调用此方法。

例如：A ---> B 然后从 B 活动中按回，然后`onResume()`将调用 A 活动方法并向服务器发出请求。所以``getWeather(null, nameOfCity);`在`onCreate(bundle)`. 创建活动时仅调用一次。

# bash - Bash 函数参数验证

> ID：15319627
> 
> 赞同：0
> 
> 时间：2013-03-10T06:36:00.867
> 
> 标签：bash

我有一个 Bash 函数`f`，它将字符串值`s`作为其参数之一。

`s`如果之间不是整数，我需要中止执行`[1000-9999]`。

我最初以为我会尝试将字符串转换为 int 并对结果执行算术范围检查，在错误时中止，但所有其他参数都使用 RegEx 检查，所以我不妨保持一致。我必须，事实上。

重击版本：4+

我想不出比这更好看的模式：

```
[[ "$s" =~ [[:\<:]][[:digit:]]{4}[[:\>:]] ]] 
```

你能帮我提高上面的模式检查结构的可读性吗？

我特别不喜欢上面的模式是：

*   必须用反斜杠将单词边界字符转义`<`为`[[:\<:]]`
*   它的绝对长度，以及方括号的疯狂数量

我的一个想法是使用全线边界检查，尽管那是一种黑客行为？（即使用 ^...$ 而不是 \b...\b）

* * *

**可选**:: 在 Bash 中是否存在相当完善的参数验证模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:59:51.023

另外，我会尝试：

```
[[ $s =~ ^[1-9][0-9]{3}$ ]] 
```

否则`0999`会通过。但另一方面可能`+1234`是有效的输入，可能也是如此`1234.0`，所以如果你需要完整，你可能需要扩展你的正则表达式，或者毕竟执行值检查..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T13:46:40.307

`bash`可以进行整数比较：

```
shopt -s extglob # Needed for the extended pattern +(...)
f () {
    if [[ $1 == +([[:digit:]]) ]] &&
       (( $1 >= 1000 && $1 < 10000 )); then
    ...
    fi
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T11:38:03.367

见[http://mywiki.wooledge.org/BashFAQ/054](http://mywiki.wooledge.org/BashFAQ/054)

你可以只使用模式匹配来做到这一点，但我会拆分它。我会说这样的事情接近“通常”的方法：

```
f() {
    if [[
        $1 == +([[:digit:]]) &&
        "$1 >= 1000 && $1 < 10000" -ne 0
        ]]
    then
        ...
    fi
} 
```

在 Bash/ksh 测试表达式复合命令中，数值比较运算符的参数被计算为算术表达式。双引号允许表达式中包含空格，否则解析器无法区分某些算术运算符和测试表达式运算符。检验左边的表达式是否`0`基本等价于`(())`. 这与@chepner 的[答案](https://stackoverflow.com/a/15322913/495451)相同，除了只使用一个命令。我希望这会表现得稍微好一些，而且我已经习惯了语法，所以对我来说很清楚。有些人更喜欢另一种方式。您应该只在与其他一些测试结合使用时使用`[[`算术运算符。`((`

在将任何不可预测的输入用作算术表达式之前，您必须先进行验证。然后你可以检查它是否在一定范围内。还有其他方法可以做到这一点，但这是我个人的做法。这很清楚，适用于这个问题的所有排列。

我还应该补充一点，如果您的输入可能包含八进制或十六进制文字，则需要进一步处理。在这种情况下，通常运行输入`printf %d`效果很好。

# java - 操作 Java/Android color int 的 alpha 字节

> ID：15319635
> 
> 赞同：88
> 
> 时间：2013-03-10T06:37:28.803
> 
> 标签：java, android, bit-manipulation

如果我在 Java 中有一个 int 用作 Android 颜色（用于在 Canvas 上绘图），我该如何操作该 int 的 alpha 组件？例如，如何使用操作来执行此操作：

```
int myOpaqueColor = 0xFFFFFF;
float factor = 0;
int myTransparentColor = operationThatChangesAlphaBytes(myOpaqueColor, factor);
//myTransparentColor should now = 0x00FFFFFF; 
```

理想情况下，最好将这些第一个字节乘以任何`factor`值，而不是将字节设置为静态值。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2013-03-10T06:43:50.593

查看[颜色](http://developer.android.com/reference/android/graphics/Color.html)类。

你的代码看起来有点像这样。

```
int color = 0xFFFFFFFF;
int transparent = Color.argb(0, Color.red(color), Color.green(color), Color.blue(color)); 
```

所以将它包装在一个方法中可能看起来像：

```
@ColorInt
public static int adjustAlpha(@ColorInt int color, float factor) {
    int alpha = Math.round(Color.alpha(color) * factor);
    int red = Color.red(color);
    int green = Color.green(color);
    int blue = Color.blue(color);
    return Color.argb(alpha, red, green, blue);
} 
```

然后调用它来将透明度设置为 50%：

```
int halfTransparentColor = adjustAlpha(0xFFFFFFFF, 0.5f); 
```

我认为使用提供的 Color 类比自己进行位操作更能自我记录，而且它已经为你完成了。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2016-03-02T02:01:30.493

在 android-support-v4 中使用[ColorUtils#setAlphaComponent 。](https://developer.android.com/reference/android/support/v4/graphics/ColorUtils.html#setAlphaComponent(int,%20int))

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2016-10-22T12:54:19.043

在[android-support-v4](https://developer.android.com/reference/android/support/v4/graphics/ColorUtils.html)中：

```
int alpha = 85; //between 0-255
@ColorInt
int alphaColor = ColorUtils.setAlphaComponent(Color.Red, alpha); 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-10-10T04:32:44.063

另一种选择是：

```
int myOpaqueColor = 0xffffffff;
byte factor = 20;// 0-255;
int color = ( factor << 24 ) | ( myOpaqueColor & 0x00ffffff ); 
```

或使用浮点数：

```
int myOpaqueColor = 0xffffffff;
float factor = 0.7f;// 0-1;
int color = ( (int) ( factor * 255.0f ) << 24 ) | ( myOpaqueColor & 0x00ffffff); 
```

您可以通过更改按位值来更改任何通道`24`。

```
public final static byte ALPHA_CHANNEL = 24;
public final static byte RED_CHANNEL   = 16;
public final static byte GREEN_CHANNEL =  8;
public final static byte BLUE_CHANNEL  =  0;

// using:
byte red   = 0xff;
byte green = 0xff;
byte blue  = 0xff;
byte alpha = 0xff;
int color = ( alpha << ALPHA_CHANNEL ) | ( red << RED_CHANNEL ) | ( green << GREEN_CHANNEL ) | ( blue << BLUE_CHANNEL );// 0xffffffff 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-14T22:46:09.000

这不是直接回答问题，但最好记住 View 和 Drawable 有一个 setAlpha(float alpha) 方法，它可能会做你想做的事。或者您可能想尝试 view.getBackground().setAlpha()。

# c# - 处理枚举更改方法的更好方法？

> ID：15319638
> 
> 赞同：1
> 
> 时间：2013-03-10T06:38:18.933
> 
> 标签：c#, enums

最初，我希望对枚举进行某种封装，但显然[C# 还不可能](http://msmvps.com/blogs/jon_skeet/archive/2006/01/05/classenum.aspx)。我的目的是用枚举存储某种数据。理想情况下，拥有一个对象的枚举会很棒。但显然没有办法做到这一点。因此，我创建了一个状态类、一个公共枚举，并使用一个 setter 创建了一个公共 getter/setter，该 setter 初始化了一个方法，在该方法中我可以将对象作为属性填充。我想知道是否有更好的方法。对我来说理想的解决方案是以正常方式设置状态（枚举）：

```
car.State = CarStates.Idle; 
```

然后像这样访问有关该状态的更多数据：

```
string message = car.State.Message(); 
```

但这将涉及将属性附加到 State 枚举。有什么很酷的技巧可以达到这个效果吗？枚举是您可以通过简单地添加到末尾来制作**可切换**的、类似单例的值的唯一方法吗？`.Idle`

这是我现在拥有的代码，它通过添加一个层将状态信息保持在一个级别，这是可以通过的，但在声明类似`car.Mode.State = CarModeStates.Idle;`.

```
class Car
{
    public CarState Mode;

    public Car()
    {
        Mode = new CarState();
    }
}

class CarState //holds any metadata for given enum value
{
    private int _EnumInt;
    private string _Message;
    private bool _IsError = false;

    public CarModeStates State
    { 
        get { return (CarModeStates)_EnumInt; } 
        set { _EnumInt = (int)value; InitializeState(value); } 
    }
    public string Message { get { return _Message; } }
    public bool IsError { get { return _IsError; } }

    public void InitializeState(CarModeStates? cs)
    {
        switch (cs)
        {
            case (CarModeStates.Off):
                {
                    _Message = "Car is off.";
                    _IsError = false;
                    break;
                }
            case (CarModeStates.Idle):
                {
                    _Message = "Car is idling.";
                    _IsError = false;
                    break;
                }
            case (CarModeStates.Drive):
                {
                    _Message = "Car is driving.";
                    _IsError = false;
                    break;
                }
            case (CarModeStates.Accident):
                {
                    _Message = "CRASH!";
                    _IsError = true;
                    break;
                }
        }
    }
}

public enum CarModeStates
{
    Off,
    Idle,
    Drive,
    Accident,
}

//And from the outside:
class SomeController
{
    Car car = new Car();
    public string GetStateMessage()
    {
        car.Mode.State = CarModeStates.Idle;

        return car.Mode.Message;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:03:11.060

您是否尝试过扩展方法？在静态类中，定义：

```
public static string Message( this CarStates value )
{
    switch (value) {
    ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T06:45:01.203

C# 中的常规枚举通常不像您的问题所暗示的那样有问题。只需确保您的`switch`语句有一个`default`引发 an 的案例，`ArgumentException`以确保您获得有效值之一。您必须小心字面值`0`（可以隐式转换为任何枚举类型），但除此之外，`enum`C# 中的 an 确实在 API 级别提供了实质性的类型安全性。

C# 枚举的性能*明显*优于 Java 使用的完全封装的枚举。还有一些额外的细节需要注意（例如超出范围的值），但它们在实践中很少引起问题。

* * *

Java 风格的枚举类很容易在 C# 中创建。**编辑：除了你不能`switch`像这样在 C# 版本的枚举上使用语句。**

1.  上课`sealed`。
2.  确保该类至少有 1 个显式构造函数，并确保所有构造函数都是`private`.
3.  翻译如下成员：

爪哇：

```
enum Color { RED, GREEN, BLUE } 
```

C＃：

```
private class Color {
    public static readonly Color RED = new Color();
    public static readonly Color GREEN = new Color();
    public static readonly Color BLUE = new Color();

    private Color() { }
} 
```

如果你真的想模仿Java，你可以通过`Enum<T>`为这种形式的枚举创建一个抽象基类来保持一个`Ordinal`属性，并在类中创建一个`Values`如下所示的静态属性`Color`：

```
public Color[] Values { get { return new[] { RED, GREEN, BLUE }; } } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T07:20:26.900

与字典相结合的扩展方法可能是一种解决方案，而不是 switch 语句。

```
public static class CarExtensionMethods
{
    public static string Message(this CarStates value)
    {
        return carStateDictionary[value];
    }

    private static readonly Dictionary<CarStates, string> carStateDictionary;

    static CarExtensionMethods()
    {
        carStateDictionary = new Dictionary<CarStates, string>();

        carStateDictionary.Add(CarStates.Off, "Car is off.");
        carStateDictionary.Add(CarStates.Idle, "Car is idling.");
        carStateDictionary.Add(CarStates.Drive, "Car is driving.");
        carStateDictionary.Add(CarStates.Accident, "CRASH!");
    }
} 
```

用法非常简单：

```
CarStates state = CarState.Idle;
Console.WriteLine(state.Message());  //writes "Car is idling." 
```

同样作为旁注，通常名称只有在具有属性`enum`时才应该是复数。`[Flags]`关键是表明它们可以有多个状态。一个更适合您的枚举的名称是`CarState`因为它一次不能有多个状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T07:28:08.120

如果您**只想**使用`Enum`值，那么您可以创建自己的属性来提供额外的元数据。

下面的示例有效**，但**我个人不会以这种方式对我的域进行建模。

```
// sample test app
class Program
{
    static void Main(string[] args)
    {
        var carState = CarModeStates.Accident;

        // the call to get the meta data could and probably should be stored in a local variable
        Console.WriteLine(carState.GetMetaData().Message);
        Console.WriteLine(carState.GetMetaData().IsError);
        Console.WriteLine(carState.GetMetaData().IsUsingPetrol);
        Console.Read();
    }
} 
```

扩展枚举示例

```
// enum with meta data
public enum CarModeStates
{
    [CarStatus("Car is off."), IsError(false), IsUsingPetrol(false)]
    Off,

    [CarStatus("Car is idling."), IsError(false), IsUsingPetrol(true)]
    Idle,

    [CarStatus("Car is driving."), IsError(false), IsUsingPetrol(true)]
    Drive,

    [CarStatus("CRASH!"), IsError(true), IsUsingPetrol(false)]
    Accident
} 
```

自定义属性来装饰枚举

```
public interface IAttribute<out T>
{
    T Description { get; }
}

[AttributeUsage(AttributeTargets.Field)]
public class CarStatusAttribute : Attribute, IAttribute<string>
{
    private readonly string _value;

    public CarStatusAttribute(string value)
    {
        _value = value;
    }

    public string Description
    {
        get { return _value; }
    }
}

[AttributeUsage(AttributeTargets.Field)]
public class IsErrorAttribute : Attribute, IAttribute<bool>
{
    private readonly bool _value;

    public IsErrorAttribute(bool value)
    {
        _value = value;
    }

    public bool Description
    {
        get { return _value; }
    }
}

[AttributeUsage(AttributeTargets.Field)]
public class IsUsingPetrolAttribute : Attribute, IAttribute<bool>
{
    private readonly bool _value;

    public IsUsingPetrolAttribute(bool value)
    {
        _value = value;
    }

    public bool Description
    {
        get { return _value; }
    }
} 
```

用于获取有关枚举的元数据的扩展方法。

```
public static class CarModeStatesExtensions
{
    public static CarModeStateModel GetMetaData(this CarModeStates value)
    {
        var model = new CarModeStateModel
            {
                Message = value.GetDescriptionFromEnumValue<string>(typeof (CarStatusAttribute)),
                IsError = value.GetDescriptionFromEnumValue<bool>(typeof(IsErrorAttribute)),
                IsUsingPetrol = value.GetDescriptionFromEnumValue<bool>(typeof (IsUsingPetrolAttribute))
            };

        return model;
    }
}

public class CarModeStateModel
{
    public string Message { get; set; }
    public bool IsError { get; set; }
    public bool IsUsingPetrol { get; set; }
}

public static class EnumExtensions
{
    public static T GetDescriptionFromEnumValue<T>(this CarModeStates value, Type attributeType)
    {
        var attribute = value.GetType()
            .GetField(value.ToString())
            .GetCustomAttributes(attributeType, false).SingleOrDefault();

        if (attribute == null)
        {
            return default(T);
        }

        return ((IAttribute<T>)attribute).Description;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T07:58:44.943

也许你需要一个这样的“工厂”：

```
public class CarState
{
    private string message;
    private bool error;

    public CarState(string message, bool error)
    {
        this.message = message;
        this.error = error;
    }

    public string Message
    {
        get { return this.message; }
    }

    public bool Error
    { 
        get { return this.error; }
    }
}

public static class CarStateFactory
{
    public enum CarStateId { Off, Idle, Driving, Accident }

    public static CarState GetCarState(CarStateId carStateId)
    {
        switch(carStateId)
        {
            case (CarStateId.Off):
                { return new CarState("Car is off", false); }

            //add more cases

            default:
                return null;
        }
    }
} 
```

有了这个，你可以通过调用来设置你的汽车的状态：

```
car.State = CarStateFactory.GetCarState(CarStateFactory.ID.Off); //ID.Idle, ID.Driving, ID.Accident 
```

**和**

您可以使用 访问该消息`car.State.Message`。

编辑： CarStateFactory 的静态吸气剂

```
public static CarState Idle
{
    get
    {
        return new CarState("Car is off", false);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T07:49:39.477

我知道这已经很老了，但是对于更多的访问者来说，而不是为此使用枚举，也许使用状态管理器，其中一个对象代表每个状态？

抽象的

```
/// <summary>
/// Defines the expected members of a state
/// </summary>
internal interface ICarState
{
    /// <summary>
    /// Gets or sets the message.
    /// </summary>
    /// <value>
    /// The message.
    /// </value>
    string Message { get; }
} 
```

基础状态

```
/// <summary>
/// The class that all car states should inherit from.
/// </summary>
internal abstract class CarBaseState : ICarState
{
    #region ICarState Members

    /// <summary>
    /// Gets or sets the message.
    /// </summary>
    /// <value>
    /// The message.
    /// </value>
    /// </exception>
    public abstract string Message { get; }

    #endregion
} 
```

执行

```
/// <summary>
/// Represents the state when the car is off
/// </summary>
internal class OffState : CarBaseState
{
    /// <summary>
    /// Gets or sets the message.
    /// </summary>
    /// <value>
    /// The message.
    /// </value>
    /// </exception>
    public override string Message { get { return "Off"; } }
}

/// <summary>
/// Represents the state when the car is idling
/// </summary>
internal class IdleState : CarBaseState
{
    /// <summary>
    /// Gets or sets the message.
    /// </summary>
    /// <value>
    /// The message.
    /// </value>
    /// </exception>
    public override string Message { get { return "Idling"; } }
} 
```

经理

```
internal class CarStateManager
{
    #region Fields

    Dictionary<string, ICarState> _stateStore = null;

    #endregion

    #region Properties

    /// <summary>
    /// Gets (or privately sets) the state of the current.
    /// </summary>
    /// <value>
    /// The state of the current.
    /// </value>
    internal ICarState CurrentState { get; private set;  }

    #endregion

    #region Constructors and Initialisation

    /// <summary>
    /// Initializes a new instance of the <see cref="StateManager"/> class.
    /// </summary>
    public CarStateManager()
    {
        _stateStore = new Dictionary<string, ICarState>();
    }

    #endregion

    #region Methods

    /// <summary>
    /// Adds a state.
    /// </summary>
    /// <param name="stateId">The state identifier.</param>
    /// <param name="state">The state.</param>
    public void AddState(string stateId, ICarState state)
    {
        // Add the state to the collection
        _stateStore.Add(stateId, state);
    }

    /// <summary>
    /// Changes the state.
    /// </summary>
    /// <param name="stateId">The state identifier.</param>
    public void ChangeState(string stateId)
    {

        // Set thr current state
        CurrentState = _stateStore[stateId];
    }

    #endregion
} 
```

程序

```
class Program
{
    internal class StateKeys
    {
        public const string Off = "Off";
        public const string Idle = "Idle";
    }

    static void Main(string[] args)
    {
        // Instantiate the state manager
        CarStateManager stateManager = new CarStateManager();

        // Add the states
        stateManager.AddState(StateKeys.Off, new OffState());
        stateManager.AddState(StateKeys.Idle, new IdleState());

        // Change the state and display the message
        stateManager.ChangeState(StateKeys.Off);
        Console.WriteLine(stateManager.CurrentState.Message);

        // Change the state and display the message
        stateManager.ChangeState(StateKeys.Idle);
        Console.WriteLine(stateManager.CurrentState.Message);
        Console.ReadLine();
    }
} 
```

输出：

```
Off
Idling 
```

！

# jquery - jQuery 和 Ajax：在元素中包含 javascript，而不是与 HTML 文件关联

> ID：15319641
> 
> 赞同：0
> 
> 时间：2013-03-10T06:39:30.193
> 
> 标签：jquery, ajax

我使用 jQuery Ajax 来更新 div。一件事困扰着我：对于插入的 HTML 数据，似乎我必须将其关联的 javascripts 放入文件中，而不是将它们包含在`<head>`元素中。否则，Ajax 将无法工作。例如，我有以下 HTML 和 jQuery 代码：

`base.html`：

```
...
<head>
...
<script>   <!-- Get script -->
$(document).ready(function() {
  $('.getContent').click(function() {
    var url = $(this).attr('href');
    $('#content').load(url);
      return false;
  });
});
</script>
</head>
...
<div id="content">
  ...
  <!-- Insert the 'addMember.html' into 'content' div -->
  <a class="getContent" href="/addMember">Add member</a>
  ...
</div>
... 
```

`addMember.html`：

```
...
<form class="postContent" action="/addMember" method="post">
  ...
  <input type="submit" value="Submit" />
</form>

<script>   <!-- Post script -->
$(document).ready(function() {
  $('.postContent').ajaxForm({
    success: function(returnData) {
      $('#container2').html(returnData);
    }
  });
});
</script> 
```

如果我点击`Add member`，`addMember.html`将被加载到`content`div 中。然后当我点击 时`Submit`，帖子的结果也会更新`content`div。一切正常。但是，我也想将“发布脚本”放在`<head>`元素中，以便其他页面可以共享代码。但是，如果我这样做，Ajax 将无法工作（即，发布结果不会更新`content`div）。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:44:13.130

只需将其制成一个函数并在新内容加载时调用该函数。

```
function postScript() {
  $('.postContent').ajaxForm({
    success: function(returnData) {
      $('#container2').html(returnData);
    }
  });
}
...
$('#content').load(url, postScript); 
```

# networking - 不使用时 TCP 连接的带宽消耗

> ID：15319642
> 
> 赞同：0
> 
> 时间：2013-03-10T06:39:32.580
> 
> 标签：networking

如果实际上没有数据包传输发生，则 TCP 连接（在端口 xxxx 上）将消耗多少带宽。
实际上我需要编写一个应用程序，它会在端口 xxxx 上创建与服务器的 TCP 连接，然后服务器和客户端都将变得空闲（即，它们将在很长一段时间后传输 500KB-600KB 的非常小的数据包时间跨度；可能在 6 或 7 小时之后）。服务器一次将处理超过 10,000 个连接。
要记住的重要一点是，TCP 会话将在通信双方的生命周期内保持（直到客户端或服务器关闭）。
现在的问题是，在这种情况下带宽成本是多少。对于这个应用程序来说，一个通用的 Web 服务器就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:56:42.383

零，除非在套接字上启用了 TCP KEEPALIVE，在这种情况下它基本上仍然为零。

但是 500-600Kb 并不是“非常小的数据包”。你的意思是500-600*字节吗？*

# java - （java）根据输入值的数量设置数组的长度？

> ID：15319643
> 
> 赞同：0
> 
> 时间：2013-03-10T06:39:33.420
> 
> 标签：java, arrays, enter

我正在尝试根据用户的输入设置数组的长度，而不要求输入结束数组的键。例如，当用户键入“3 2 4”时，我的数组将是 {3,2,4}。如果用户键入“1”，则数组将为 {1}。数组的长度只会因用户的输入而异。我正在尝试查看 enter 键是否可以成为结束取值的触发器，但我真的很想得到一些帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:57:00.680

如果您使用的是 Java，请尝试以下操作（假设数字用空格分隔）：

```
Scanner sc = new Scanner(System.in);
String[] tokens = sc.nextLine().split(" ");
int[] result = new int[tokens.length];
int i = 0;
for (String token : tokens)
    result[i++] = Integer.parseInt(token);
// here you will have de desired array stored in the variable 'result'. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:45:13.353

在大多数编程语言中（因为没有给出语言），字符串已经可以用作数组

```
 var str = "hellp";
 print str[0]; 
```

这将打印出“h”。如果您要使用函数进行计数，那么它将计算数组中的数量。如 PHP = count() 或 javascript = .length

**编辑Java**

我不确定正则表达式在 Java 中是如何工作的，但试试这个

```
String s = "321351";
int charCount = s.replaceAll("\[^0-9]\", "").length();
println(charCount); 
```

这个链接可能有帮助[Java：如何计算字符串中 char 的出现次数？](https://stackoverflow.com/questions/275944/how-do-i-count-the-number-of-occurrences-of-a-char-in-a-string)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:44:57.373

```
Scanner sc = new Scanner(System.in);
        StringTokenizer stringTokenizer = new StringTokenizer(sc.nextLine(), " ");
        int[] result = new int[stringTokenizer.countTokens()];
        int i = 0;
        while (stringTokenizer.hasMoreTokens()){
            result[i] = Integer.parseInt(stringTokenizer.nextToken());
            System.out.println(result[i++]);
} 
```

使用上面的代码来处理用户输入给出的额外空格。像下面的字符串：

'1 2 3 4 5 6'

# extjs - Ext.Window.window 中的地图显示不完全

> ID：15319645
> 
> 赞同：0
> 
> 时间：2013-03-10T06:39:49.303
> 
> 标签：extjs, openlayers

我创建了扩展的 Ext.Panel.panel 组件，其中包含通过 openlayers 显示的地图，该组件位于 Ext.Window.window 中。但加载页面后，地图仅显示部分： [http ://habrastorage.org/storage2/17f/1be/3bd/17f1be3bdc2a9765c1852d93a95ee1b8.png](http://habrastorage.org/storage2/17f/1be/3bd/17f1be3bdc2a9765c1852d93a95ee1b8.png)

```
Ext.define('MA.view.components.OpenlayersPanel',
{
    extend: 'Ext.panel.Panel',
    alias: 'widget.openlayerspanel',
    multiSelect: true,

    initComponent: function()
    {
        this.callParent(arguments);
        this.on('afterrender', this.afterRender, this);
    },

    afterRender: function()
    {
        this.map = new OpenLayers.Map(this.body.dom.id);
        this.layer = new OpenLayers.Layer.OSM('OSM Map');
        this.fromProjection = new OpenLayers.Projection("EPSG:4326");
        this.toProjection = new OpenLayers.Projection("EPSG:900913");
        this.position = new OpenLayers.LonLat(75.1, 61.15).transform(this.fromProjection, this.toProjection);
        this.zoom = 12;
        this.map.addLayer(this.layer); 
        this.layer.setIsBaseLayer(true);           
        this.map.setCenter(this.position, this.zoom);
    }
}); 
```

应用程序.js：

```
Ext.application(
{
    requires: ['Ext.container.Viewport'],
    name: 'MA',
    appFolder: 'app',
    controllers:
        [
            'Map'
        ],
    launch: function()
    {
        Ext.create('Ext.window.Window',
            {
                layout:
                {
                    type: 'vbox'
                },
                items:
                    [
                        {
                            xtype: 'openlayerspanel'
                        },
                        {
                            xtype: 'button',
                            text: 'Load',
                        }
                    ]
            }).show();
    }
}); 
```

当我调整浏览器大小时，地图会刷新并正常显示。有什么办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:15:47.313

如果除了调整大小没有任何作用，请尝试以编程方式调整大小：

```
//inside window listeners
show: function(){
  this.setWidth(this.getWidth() + 1); // or height
} 
```

或使用超时来定义地图 - 显示窗口后创建地图： **不是后渲染，而是显示**

```
show: function(){
  setTimeout(function(){
    // init map here
    }, 100)
} 
```

或使用此代码：

```
function ShowMapWindow() {
    Ext.create('Ext.window.Window', {
        width: 400,
        height: 300,
        items: [{
            loader: {
                loadMask: { showMask: true },
                renderer: 'frame',
                url: 'http://www.openstreetmap.org/export/embed.html?bbox=37.314,55.568,38.031,55.927&amp;layer=mapnik'
            }
        }],
        layout: "fit",
        listeners: {
            close: function () {
                this.remove(true);
            }
        },
        modal: true
    }).show();
} 
```

![在此处输入图像描述](../Images/bdaab68223c060a8fb19e3e639b43be3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T15:06:19.313

我正面临着这个问题，而第一个解决方案的人是错误的。它与调整大小完全无关，因为如果您使用谷歌地图而不是 OSM，它可以完美运行。问题在于缺少地图属性，如 SRS、BBOX 等。检查 OpenLayers 属性的文档，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:52:58.363

如果你先放大（），然后再放大（）。或者将初始缩放设置为11，然后在地图居中后调用zoomIn()。

# java - 方法声明中参数声明之前的 final 关键字

> ID：15319648
> 
> 赞同：2
> 
> 时间：2013-03-10T06:40:05.437
> 
> 标签：java, methods, parameter-passing, final

```
class hello {
    public static void main(String arg[]){

    int[] c = { 2 };
    final int[] d = { 3 };

    }

static void useArgs(final int a, int b, final int[] c, int[] d) {

    c[0]=d[0]; // no error 
    c = d; //error 
    }
 } 
```

伙计们，任何人都可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T06:44:09.757

变量`c`是最终的。这意味着您不能为该变量分配另一个值。

但是数组本身的元素不是最终的，这就是为什么您可以更改对元素的赋值，例如`c[0]=d[0]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T06:42:33.187

c 是对整数数组的最终（常量）引用。并且由于 c 是最终的，因此您无法更改其值（即更改它所指的地址）。这适用于任何声明为 final 的变量（不仅仅是数组）。

这也行不通：

```
final int c = 1;
int d = 2;
c = 2; // Error
c = d; // Error 
```

# web-services - 通过 web 服务的 Sharepoint 2010 列表更新引发错误

> ID：15319654
> 
> 赞同：0
> 
> 时间：2013-03-10T06:40:33.040
> 
> 标签：web-services, list, sharepoint

我正在尝试通过 Web 服务更新 SharePoint 2010 列表。我的代码可以成功更新根级别（或网站集级别）上的任何列表。只有当我尝试更新变体级别的任何列表时，应用程序才会抛出错误“此处引用的列表不再存在。”。请记住，我已尝试设置 list.url 属性。手动更新 app.config。有更多的想法请分享。我的代码：

```
 try
        {
            System.Xml.XmlNode ndListView = list.GetListAndView("{GUID}", "");
            string strListID = ndListView.ChildNodes[0].Attributes["Name"].Value;
            string strViewID = ndListView.ChildNodes[1].Attributes["Name"].Value;
            XmlElement xmlBatchElement = xmlDoc.CreateElement("Batch");
            xmlBatchElement.SetAttribute("ListVersion", "1");
             xmlBatchElement.SetAttribute("OnError", "continue");
             xmlBatchElement.SetAttribute("ViewName", strViewID);
            xmlBatchElement.InnerXml = TheCaml; // TheCaml holds XML updates.
            try
            {
               XmlNode xmlReturn = list.UpdateListItems(strListID, xmlBatchElement); 
```

// UpdateListItems 给出列表不再存在的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:47:57.370

原来我使用 IP 地址作为服务参考，而我应该使用服务器名称而不是 IP 地址。

# sql - 在 sql server 2005 中生成插入和更新脚本的命令

> ID：15319658
> 
> 赞同：0
> 
> 时间：2013-03-10T06:41:34.093
> 
> 标签：sql, sql-server, tsql, sql-server-2005

是否有任何命令是生成插入/更新脚本的 sql server 2005？

我需要使用此步骤获得的相同输出：

*   右键单击表，然后选择“脚本表为”=>“插入到”或“更新到”，然后输出媒体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:05:24.367

[StackOverflow](https://stackoverflow.com/questions/982568/what-is-the-best-way-to-auto-generate-insert-statements-for-a-sql-server-table)中有一些关于此的主题。

例如，您可以使用名为**sp_generate_inserts**的第 3 方编写良好的存储过程。（或者您也可以根据这个想法编写自己的解决方案）

它不完全是您需要的，因为它通常用于记录现有数据，但从脚本中您可以找到一些想法，或者您可以检查 SP 的参数选项。

在这里找到它：Narayana Vyas Kondreddi：[sp_generate_inserts](http://vyaskn.tripod.com/code/generate_inserts_2005.txt)

# java - 无法对时间的非静态字段进行静态引用

> ID：15319659
> 
> 赞同：0
> 
> 时间：2013-03-10T06:41:35.327
> 
> 标签：java, android, time, static

您好，我正在尝试编写 Android 开发的时间

```
import android.text.format.Time; 
```

这是我在`MainActivity`受保护的 void 类中的代码`onCreate`。

```
TextView abc;
abc= (TextView) findViewById(R.id.clockTextView);
abc.setText("Time is " + Time.hour + ":" + Time.minute); 
```

为什么我不断收到错误`Cannnot make a static reference to the non-static field Time.hour`，我将如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:43:37.590

> 无法对非静态字段 Time.hour 进行静态引用

这是因为您试图以静态方式访问非静态字段。 `Time.hour`是一个实例字段**（不是静态的）**，因此将其称为`Time.hour`没有意义，因为您没有`Time`实例。

您需要创建一个`Time`对象，然后才能使用`myTime.hour`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T06:44:17.917

的`hour`和`minute`字段`android.text.format.Time`是实例字段。您需要创建一个实例`Time`来访问它们：

```
TextView abc;
Time time = new Time(); // initialized to January 1, 1970 in default time zone
time.setToNow();
abc= (TextView) findViewById(R.id.clockTextView);
abc.setText("Time is " + time.hour + ":" + time.minute); 
```

# c - C中fprintf的间距

> ID：15319660
> 
> 赞同：3
> 
> 时间：2013-03-10T06:41:43.233
> 
> 标签：c, unix, printf

这是我正在处理的代码的一部分：

```
void update_log(char *name, pthread_t ID, char *status, char *update)
{
    time(&rawtime);
    time_str = asctime(localtime(&rawtime));
    time_str[strlen(time_str) - 1] = 0;
    fprintf(log_file, "[%s]  [%12s]  [%u]  [%s]  %s\n", time_str, name, (unsigned int)ID, status, update);
} 
```

输出是：

```
[Sat Mar  9 21:36:20 2013]  [        main]  [197777152]  [OK]  ******
[Sat Mar  9 21:36:20 2013]  [update_table]  [172680960]  [OK]  **********
[Sat Mar  9 21:36:22 2013]  [update_table]  [172680960]  [OK]  ******
[Sat Mar  9 21:36:25 2013]  [        main]  [197777152]  [OK]  **************** 
```

有没有办法让**name**变量的输出看起来像这样（所以它仍然需要 12 个块并且仍然在括号中）：

```
[Sat Mar  9 21:36:20 2013]  [main]          [197777152]  [OK]  ******
[Sat Mar  9 21:36:20 2013]  [update_table]  [172680960]  [OK]  **********
[Sat Mar  9 21:36:22 2013]  [update_table]  [172680960]  [OK]  ******
[Sat Mar  9 21:36:25 2013]  [main]          [197777152]  [OK]  **************** 
```

我正在考虑在**fprintf()函数之前为****名称**变量添加括号，但是在 C 中是否有一种简单的方法可以在字符串的开头添加一个字符？

 **谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:51:53.323

这对我来说似乎很容易。

```
#include <stdio.h>

int main()
{
    char buffer[16];

    sprintf(buffer,"[%s]", "main");
    printf("[0] %-14s [2]\n", buffer);

    sprintf(buffer,"[%s]", "update_table");
    printf("[0] %-14s [2]\n", buffer);

    sprintf(buffer,"[%s]", "main");
    printf("[0] %-14s [2]\n", buffer);

    return 0;
} 
```

***输出***

```
[0] [main]         [2]
[0] [update_table] [2]
[0] [main]         [2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T06:55:02.953

您可以先将括号添加到名称变量的开头和结尾，然后`%12s`像您所做的那样打印名称，但**左对齐**而不是右对齐（这是默认值）

您可以使用 strcat 在开头和结尾添加括号。请参阅： [如何在 C 中连接 const/literal 字符串？](https://stackoverflow.com/questions/308695/c-string-concatenation?lq=1)

此链接显示如何左对齐：（参见标志表） [http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T06:51:15.837

我没有看到任何简单的方法，但是您可以从中制作另一个字符串：

```
void update_log(char *name, pthread_t ID, char *status, char *update)
{
    time(&rawtime);
    time_str = asctime(localtime(&rawtime));
    time_str[strlen(time_str) - 1] = 0;

    size_t len = strlen(name);
    char real_name[len + 3];
    real_name[0] = '[';
    strncpy(real_name + 1, name, sizeof(real_name));
    real_name[len + 1] = ']';
    real_name[len + 2] = 0;

    fprintf(log_file, "[%s]  [%12s]  [%u]  [%s]  %s\n", time_str, real_name, (unsigned int)ID, status, update);
} 
```**

# stored-procedures - 致命错误：函数名称必须是第 6 行 C:\xampp\htdocs\ambot\database.php 中的字符串

> ID：15319661
> 
> 赞同：0
> 
> 时间：2013-03-10T06:41:49.430
> 
> 标签：stored-procedures, php

我有从数据库调用存储过程的 PHP 代码。

```
<?php
include("DataBase.php");
$sql=$mysqli_query("CALL sp()");
if( $sql === FALSE ) {
trigger_error('Query failed returning error: '. $mysqli_error(),E_USER_ERROR);
} else {
while($row=$mysqli_fetch_array($sql))
{
echo $row['id'].'--'.$row['item'].'';
}
}
?> 
```

数据库连接；

```
<?php
$mysqli_hostname = "localhost";
$mysqli_user = "root";
$mysqli_password = "";
$mysqli_database = "liveedit";
$bd = $mysqli_connect($mysqli_hostname, $mysqli_user, $mysqli_password) 
or die("Opps some thing went wrong");
$mysqli_select_db($mysqli_database, $bd) or die("Opps some thing went wrong");
?> 
```

代码返回此错误：

```
Fatal error: Function name must be a string in C:\xampp\htdocs\ambot\database.php on line 6 
```

代码有什么问题？我试图解决这个问题，但是在我的代码中使用存储过程来解决这个问题会增加困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:25:21.320

您的代码在我的机器上运行良好。

您可以尝试切换`mysqli_*`扩展名，至少出于测试目的。为此，以这种方式更改您的代码，并确保您的连接信息正确（主机、用户名、密码、数据库名称）。

```
<?php
//include("DataBase.php");

$db = mysqli_connect("localhost","user","password", "dbname");
if (!$db) {
    die('Could not connect: ' . mysqli_error());
}

$sql = mysqli_query($db, "CALL sp()");
if( $sql === FALSE ) {
   die('Query failed returning error: '. mysqli_error());
} else {
       while($row=mysqli_fetch_array($sql))
       {
        echo $row['id']. "<br>";
       }
   }
?> 
```

# php - 如何在循环中从下拉列表中将指定值放入文本框

> ID：15319664
> 
> 赞同：0
> 
> 时间：2013-03-10T06:42:12.607
> 
> 标签：php, javascript, jquery

如何从已循环的下拉列表中为每个文本框设置指定值？

这是我的 PHP 代码：

```
<?php
while($rowb=mysql_fetch_array($b1)) 
 {
?>
        <input type="text" id="friendName">
   <select name="select[]" id="select" onchange="ChooseContact(this)"/>

<?php
   while($qrow=mysql_fetch_array($q1)) 
{
     <option value="<?php echo $qrow['type'];?>"><?php echo $qrow['type'];?></option>
<?php
   }
}  
?> 
```

Javascript：

```
function ChooseContact(data) {    
  document.getElementById ("friendName").value = data.value;    
} 
```

好的，我已经将代码编辑得更清楚，对第一个表示抱歉。

示例输出是假设我调用它循环 2 次。下拉菜单的选项值为“a”和“b”。所以它们将是 2 个下拉菜单和 2 个输入框。当我从第一个下拉列表中选择一个值时，可以说“a”，那么第一个输入框值也是“a”。但是当我在第二个下拉菜单上选择让我们说“b”时，第二个输入框的值应该是“b”，但它显示为空白，第一个输入框的值“a”变为“b”。我预计“b”应该出现在第二个输入框中，但我不知道该怎么做..

请帮助TNX！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:56:16.243

```
while($rowb=mysql_fetch_array($b1))
{
?>
   <input type="text" id="friendName">

   <select name="select[]" id="select" onchange="ChooseContact(this)">
<?
   while($qrow=mysql_fetch_array($q1))
   {
?>
     <option value="<?echo $qrow['type'];?>"><? echo $qrow['type'] ?> </option>
<?
   }
} 
```

编辑：

我认为您应该更改`<input type="text" id="friendName">`为`<input type="text" name="friendName[]">` 然后将功能更改为类似

```
function ChooseContact(data)
{ 
var x = document.getElementsByName("friendName[]");
for (i=1; i < x.length; i++) {
 x[i].value = data.value ;
 }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:50:52.130

尝试这个：

```
<?php
while($rowb=mysql_fetch_array($b1))
{
?>
   <input type="text" id="friendName">

   <select name="select[]" id="select" onchange="ChooseContact(this)" >

<?php
   while($qrow=mysql_fetch_array($q1))
   {
?>
     <option value="<?php echo $qrow['type']; ?>"><?php echo $qrow['type']; ?></option}
<?php
   }
?>
</select>
<?php
}  
?> 
```

# ruby-on-rails - Rails - 如何显示数据库中的无序列表列表

> ID：15319668
> 
> 赞同：1
> 
> 时间：2013-03-10T06:42:31.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design

我有一个关于如何从数据库中提取列表的问题。我使用 sqlite 进行开发，使用 postgres 进行生产（我知道我也需要在开发中使用 pg - 它在列表中）:) 我也在使用 simple_form。

我的应用程序可以在这里看到：[majorfinder.com](http://www.majorfinder.com/)，我正在研究专业部分。对于每个主要的展示页面，我都有一些想要展示的列表。

我有需要从数据库输出到无序列表的信息。无序列表是该专业的典型专业课程，它看起来像这样（例如，如果您正在查看的专业是语言学）：

```
<ul>
  <li>Phonetics and Phonology</li>
  <li>Syntax</li>
  <li>Semantics and Pragmatics</li>
  <li>Language in Society</li>
</ul> 
```

每个专业的课程将因每个专业而异，因此将是我需要放入数据库中的信息。您如何建议我将这些信息存储在数据库中，然后如何将其检索到我的视图中？列表项的数量可能会有所不同，但差别不大 - 有时可能有 2 个列表项，有时可能有 5 个。

* * *

更新：将课程放在一个表中，每个课程都与特定的专业相关。关系将如下所示：

少校.rb

> has_many :major_classes

专业类.rb

> 属于_to :major

major_class 模式如下所示：

```
create_table "major_classes", :force => true do |t|
  t.datetime "created_at"
  t.datetime "updated_at"
  t.integer  "major_id"
  t.text     "class_name", :unique => true, :null => false
end 
```

在我的控制器中，我会这样做：

```
@major_class = MajorClass.includes(:major) 
```

我是 Rails 新手，我不确定如何将其纳入我的视野。你能帮忙吗？

你会这样做吗？或者你会对此做出任何改变吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:46:40.177

列出模型

```
 list_id | list_name                  | child_of
    ------------------------------------------------
    1       | Linguistics                | 0
    2       | Phonetics and Phonology    | 1
    3       | Syntax                     | 1
    4       | Semantics and Pragmatics   | 1
    5       | Language in Society        | 1
    6       | Arts                       | 0
    7       | Music                      | 6
    8       | Dance                      | 6
    9       | Drama                      | 6 
```

**控制器**

```
@list = Lists.where(:child_of => Lists.find_by_list_name("Linguistics").list_id) 
```

**看法**

```
<ul>

@list.each do |i|

  <li><%= i.list_name %></li>

end

</ul> 
```

尽管 Rails 迁移方法很复杂，但没有什么比老式的 mysql create table 语句更好的了。如果我不使用创建表，那么我不使用数据库。

**迁移文件.rb**

```
class CreateLists < ActiveRecord::Migration
  def up
        execute "DROP TABLE IF EXISTS lists"
        execute <<-SQL
        CREATE TABLE IF NOT EXISTS lists (
                list_id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                list_name VARCHAR(255) NOT NULL,
                child_of INT(11) NOT NULL
                created_at DATETIME NOT NULL,
                updated_at DATETIME DEFAULT NULL,
                PRIMARY KEY (list_id),
                UNIQUE(list_name)
        ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
        SQL
  end
  def down
        execute "DROP TABLE lists"
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T07:15:25.117

静态数据可以创建为资源类：

```
rails g model Degree name 
```

并且可以填充到`db/seed.rb`文件中。

运行迁移并`seed.rb`更新文件后，您可以使用将记录添加到表中

`rake db:seed`

在要使用这些值的控制器操作中，添加：

```
@degrees = Degree.all 
```

并将`@degrees`包括所有记录。

# javascript - 到达页面顶部时删除类？

> ID：15319689
> 
> 赞同：0
> 
> 时间：2013-03-10T06:46:01.693
> 
> 标签：javascript, jquery

我正在使用以下脚本添加阴影和固定到我的标题的位置。但是，当用户一直滚动到顶部时，如何删除该类？

这是我的脚本：

```
$(function() {
 $(window).scroll(function() {
    var top_offset = $(window).scrollTop();
    if (top_offset) {
      $('.top_head_separator').addClass('fixed-top fade-in');
  }
}); 
```

当滚动条位于最顶部时，如何反转它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T06:52:31.497

检查是否`top_offset`是`0`，如果是则使用`removeClass`。

[jsFiddle 显示 top_offset 的值](http://jsfiddle.net/rKwKd/1/)

```
$(function () {
    $(window).scroll(function () {
        var top_offset = $(window).scrollTop();
        if (top_offset == 0) {
            $('.top_head_separator').removeClass('fixed-top fade-in');
        } else {
            $('.top_head_separator').addClass('fixed-top fade-in');
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:52:15.580

```
$(function() {
 $(window).scroll(function() {
    var top_offset = $(window).scrollTop();
    if (top_offset === 0)
      $('.top_head_separator').addClass('fixed-top fade-in');
    else if (top_offset > 100) // or something else
      $('.top_head_separator').removeClass('fixed-top fade-in');
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T06:50:40.213

*   用于`window.pageYOffset;`获取当前滚动位置。

*   检查当前位置是否是顶部并使用[removeClass](http://api.jquery.com/removeClass/)

# c++ - C++ 中的 char* 和 cin

> ID：15319690
> 
> 赞同：2
> 
> 时间：2013-03-10T06:46:02.747
> 
> 标签：c++, arrays, cin

我想使用 cin 向 char * 变量输入一个不定长度的字符串；

我可以做这个：

```
char * tmp = "My string";
cout << tmp << endl;
system("pause"); 
```

它完美地工作。

但我没有这样做：

```
 char * tmp
 cin >> tmp; 
```

你能告诉我有什么问题吗？”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T06:48:33.403

好吧，你还没有为`char*`to 指向创建一个对象。

```
char* tmp = new char[MAX_LENGTH]; 
```

应该让它更好地工作（你必须定义 MAX_LENGTH）。另一种方法是：

```
std::string strtmp;
cin >> strtmp;
const char* tmp = strtmp.c_str(); 
```

这种方法意味着您不需要使用`new`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T06:55:47.963

几个问题：

```
char * tmp
cin >> tmp; 
```

tmp 未分配（当前是随机的）。

`operator>>`（与 char* 或字符串一起使用时）读取单个（空格分隔）单词。

问题一：

如果您使用`char*`并分配一个缓冲区，那么您可能没有分配足够的空间。读取的字符可能比缓冲区中可用的字符多。一个更好的主意是使用 std::string （从这里你可以得到一个 C-String）。

问题 2：

没有办法读取不定字符串。但是您可以使用 . 一次读取一行`std::getline`。

```
std::string line;
std::getline(std::cin, line);

char* str = line.data(); 
```

# objective-c - 显示类似 Safari 的视图

> ID：15319691
> 
> 赞同：1
> 
> 时间：2013-03-10T06:46:05.940
> 
> 标签：objective-c, macos, cocoa, nsview

我有一个视图网格，当前显示在一个简单的网格架构中。但我想知道如何在弯曲架构中显示它，如下所示：

![在此处输入图像描述](../Images/c371702b8e61e76b669412dba8b7ec46.png)

# c# - 如何序列化复杂结构以通过 tcp/ip 发送？

> ID：15319696
> 
> 赞同：2
> 
> 时间：2013-03-10T06:46:32.740
> 
> 标签：c#, sockets, serialization, memorystream

我有以下结构

```
[Serializable()]
public struct Transfer_packet 
  {
     public int  _packet_type; // 0 is action 1 is data
     public int _packet_len; // length of data
     public byte[] _data;//Content of data it's Length depends on objects types 

        public byte[] serialize()
        {
            byte[] arr;
            BinaryFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream();
            bf.Serialize(ms, this);
            arr = ms.ToArray();
           return arr;
        }
    } 
```

在我的代码中的一些地方我这样做

```
 Transfer_packet sndpkt;  
            string cmd = "Some Commands in text or binary bytes";
            byte[] data = ASCIIEncoding.ASCII.GetBytes(cmd);
            sndpkt._packet_type = 0; // Action Packet 
            sndpkt._packet_len = data.Length;  // Length of command
            sndpkt._data = data;
            byte[] SendData = sndpkt.serialize();
            LanAdapter.Send(SendData, System.Net.Sockets.SocketFlags.None); // LanAdapter ->TcpSocket 
```

struct 中的`serialize`函数不能正常工作我想要一个`byte`结构的序列数组，用于通过网络发送它并在其他用 c++ 编写的应用程序中以相同的内存格式接收它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:18:10.380

您可以实现`ISerializable`接口
MSDN[示例](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)可以服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T14:01:56.370

您想检查[protobuf-net](http://code.google.com/p/protobuf-net/)以获得高性能、平台无关、对象序列化。恕我直言，这是最好的。

使用必要的属性修改您的对象：

```
[ProtoBuf.ProtoContract]
public struct Transfer_packet
{
    [ProtoBuf.ProtoMember(1)]
    public int _packet_type; // 0 is action 1 is data
    [ProtoBuf.ProtoMember(2)]
    public int _packet_len; // length of data
    [ProtoBuf.ProtoMember(3)]
    public byte[] _data;//Content of data it's Length depends on objects types 

    /// <summary>
    /// Private constructor required by protobuf
    /// </summary>
    private Transfer_packet() { }
} 
```

用法是一块蛋糕：

```
// write to a file
Serializer.Serialize(outputStream, Transfer_packet);

// read from a file
var person = Serializer.Deserialize<Transfer_packet>(inputStream); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:22:57.867

我将结构内的序列化函数更改`Transfer_packet`为这个，它对我来说很好，但我想要一个智能解决方案而不是这个，编组和 Iserialize 添加一些标题或将实际字节数组更改为一些我不知道的东西。

```
 public struct Transfer_packet 
        {
            public short  _packet_type; // 0 is action 1 is data
            public int _packet_len; // length of data
            public byte[] _data;//Content of data it's Length depends on objects types 

            public byte[] serialize()
            {
                byte[] arr;
                MemoryStream ms = new MemoryStream();
                arr = BitConverter.GetBytes(this._packet_type);
               // Array.Reverse(arr);
                ms.Write(arr, 0, arr.Length);
                arr = BitConverter.GetBytes(this._packet_len);
               // Array.Reverse(arr);
                ms.Write(arr,0,arr.Length);
                ms.Write(this._data, 0, this._data.Length);
                arr = ms.ToArray();
               return arr;
            }
        } 
```

# python - 如何生成 x 轴乱序的 Matplotlib 图？

> ID：15319699
> 
> 赞同：5
> 
> 时间：2013-03-10T06:46:45.460
> 
> 标签：python, matplotlib

我想用不按数字顺序出现的 x 轴绘制一些 y 数据：

例如：

```
y = [100, 99, 93, 88, 85, 43]
x = [0, 5, 4, 3, 2, 1]
plot(x, y) 
```

我希望 x 轴按该顺序显示为 0、5、4、3、2、1，均匀分布，上面有适当的 y 值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T06:54:58.227

我会使用`x`“值”作为 xtick 标签。例如：

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax = fig.add_subplot(111)
y = [100, 99, 93, 88, 85, 43]
xt = [0, 5, 4, 3, 2, 1]
ax.plot(y)
ax.set_xticklabels(xt)
fig.savefig("out.png") 
```

生产

![带有更改 xtick 标签的图片](../Images/d52645370a2b50142806c5e4c5da2256.png)

更一般地说，您可以将坐标设置为任何您想要的，`x`然后适当地设置。`xticks``xticklabels`

# java - 双向多语言字符串对话

> ID：15319707
> 
> 赞同：0
> 
> 时间：2013-03-10T06:48:22.647
> 
> 标签：java, swt, right-to-left, bidi

我正在尝试使用 SWT、Paperclips 和 Java 打印双向字符串。当我将字符串打印到屏幕上时 - 一切正常（在 Java-SWT 标签上）但是当我尝试用回形针打印它时，字符串混淆了。

这就是我想要得到的： ![屏幕应该是怎样的](../Images/48d0f77edf739b728cacb77f7c1b5062.png)

这就是我得到 ![事情是这样的](../Images/9589b283e7aa07ee89db5c63bacf1d72.png)
的：看起来 RTL/LTR 部分颠倒了。因为我没有将字符串定义为 RTL（在回形针上）的 API，我该如何对字符串进行转换，使其在回形针上看起来没问题？

顺便说一句，回形针是 swt 的开源打印支持。但据我了解，这个问题不是回形针问题，而是更多的双向/字符串对话问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:07:28.007

如果没有其他方法可以指定控件为 RTL，可以尝试将 RLE 字符（U+202B）放在开头，将 PDF 字符（U+202C）放在最后。

请注意，它不一定有效，因为我不确定 SWT 是否支持这些字符。此外，如果有人复制该文本，它可能会与这些控制字符一起复制。

# asp.net - 通过存储过程将用户添加到生产会员提供者数据库？

> ID：15319709
> 
> 赞同：1
> 
> 时间：2013-03-10T06:48:34.737
> 
> 标签：asp.net, oracle, asp.net-membership

我即将将一个小型 asmx webservice 部署到生产服务器，但我需要将用户添加到`MembershipProvider`数据库（Oracle 版本）。

我不能（不会）向该站点添加任何页面，它只是 Web 服务，IT 管理员不允许我添加 WebAdmin 工具（根据[http://forums.asp.net/t/932674。 aspx/1](http://forums.asp.net/t/932674.aspx/1)）所以我需要能够以某种方式将用户添加到后备数据库？

我可以看到有为此的 SP，但我不确定我需要调用什么以及使用什么参数。例如 createuser sp 有`UserName`and `UserId`...但不清楚每个是什么...而且似乎没有任何密码？？？

# android - Android 应用内购买是这样还是那样？

> ID：15319711
> 
> 赞同：0
> 
> 时间：2013-03-10T06:48:56.970
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

我在谷歌页面上找到了两种在应用计费中进行的方法

1.  [http://developer.android.com/training/in-app-billing/preparing-iab-app.html](http://developer.android.com/training/in-app-billing/preparing-iab-app.html)
2.  [http://developer.android.com/google/play/billing/billing_integrate.html](http://developer.android.com/google/play/billing/billing_integrate.html)

两者似乎都遵循不同的方法，所以主要问题是遵循什么方法？

对于数字 1，出于安全原因，我似乎必须提供一个密钥来建立连接，而对于 2，情况似乎并非如此。此外，没有。1 我需要将各种示例代码复制到我的项目中，似乎不需要。2 这不是必须的。有什么意见或见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:36:11.503

方法 1 为您提供了一个 Helper 类（IABHelper），该类具有与 GP 客户端建立服务连接、查询物品和采购等任务的功能。您可以使用这些函数来实现 IAB，就像使用现成的 API 一样，这将节省您的时间。

方法 2 将需要所有任务，如计费服务连接设置、查询缓存/库存和自行执行购买。但是，这将允许您自定义实现以最适合您的应用程序设计。执行此操作时，最好遵守示例代码中遵循的安全/实施指南。

您可以在两者之间做出决定。

如果您深入研究代码，您会发现这两种方法本质上是相同的。

```
For number 1 it seems that I have to provide a key 
```

无论哪种方式，您都必须在应用内计费实施中指定公钥作为安全措施。

# objective-c - 从有符号整数创建 CGEvent

> ID：15319716
> 
> 赞同：2
> 
> 时间：2013-03-10T06:49:51.973
> 
> 标签：objective-c, macos, cocoa, hotkeys, bitmask

[在我继续之前，我想在这篇文章的开头说这可能是最骇人听闻、彻头彻尾的邪恶、令人讨厌的话题，所以我不希望答案包含“合法”代码。]

在尝试访问 OS X Mountain Lion 用于包含激活听写的热键组合的内部首选项文件时，我遇到了一些制作精美的有符号整数，其中包含在 System Preferences.app 中定义的键码。问题是，我能想到的唯一方法`CGEvent`是通过并基本上解析给定密钥代码的位掩码，这可能是徒劳无益且令人讨厌的努力。并且因为`CGEvent`方便地对内部结构 ( `__CGEvent`) 进行类型定义，所以无法看到它的内部组织（换句话说，我无法`malloc()`摆脱这种情况）。到目前为止，我所获得的内容显示在下面的代码中：

```
/***************************************UNSAFE*****************************************************/
//1048584, -1048585 - Two Left CMD presses; 1048576, -1048577 - Two CMD presses; 8388608, -8388609 - Two Fn presses; 1048592, -1048593 - Two Right CMD presses
- (void)forceDictation {

    NSString *path = [[NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) lastObject]stringByAppendingPathComponent:@"Preferences/com.apple.symbolichotkeys.plist"];
    NSDictionary *dictationPrefs = [NSDictionary dictionaryWithContentsOfFile:path];
    NSDictionary *dictationDict = dictationPrefs[@"AppleSymbolicHotKeys"];
    NSDictionary *keyvalueDict = dictationDict[@"164"];
    NSDictionary *valueDict = keyvalueDict[@"value"];
    NSArray *parameters = valueDict[@"parameters"];
    NSInteger firstCode = [[parameters objectAtIndex:0]longLongValue];
    NSInteger secondCode = [[parameters objectAtIndex:1]longLongValue];
} 
```

任何熟悉 HIToolbox 中的事件位掩码的人都可以看到这些关键代码表示会有多么令人难以置信的帮助，只要它们可以轻松地转换为事件然后发射为蓝色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T10:12:50.927

让我们看看位模式（你会注意到我已经改变了你列出它们的顺序）：

```
2 × ⌘:
 1048576: 00000000000100000000000000000000
-1048577: 11111111111011111111111111111111

2 × left-⌘:
 1048584: 00000000000100000000000000001000
-1048585: 11111111111011111111111111110111

2 × right-⌘:
 1048592: 00000000000100000000000000010000
-1048593: 11111111111011111111111111101111

2 × Fn:
 8388608: 00000000100000000000000000000000
-8388609: 11111111011111111111111111111111 
```

我无法从中看出什么，除了：

*   假设正值是“真实”值（请参阅我关于为什么有两个以及为什么所有四对是互补的理论的评论），密钥标识符至少高出 20 位（请注意，在我的第一对中顺序，正值正好是`2**20`)，并且至少有 4 位长（2×Fn 是`2**23`）。
*   如果设置受到如此限制，则最低五位中的至少两位指定哪个键（左或右）。左似乎是第一个⌘，而右是第二个。如果这部分为零，则任何标识的键都将匹配——例如，左或右⌘。

但我们实际上可能不需要解析这些位。

在我的 MacBook Air 上，运行[Key Codes](https://itunes.apple.com/us/app/key-codes/id414568915)会给我以下输出：

> ```
> Modifier Change
>   Keys:       ⌘
>   Key Code:   65535 / 0xffff
>   Modifiers:  1048848 / 0x100110
> 
> Modifier Change
>   Keys:       
>   Key Code:   65535 / 0xffff
>   Modifiers:  256 / 0x100
> 
> Modifier Change
>   Keys:       ⌘
>   Key Code:   65535 / 0xffff
>   Modifiers:  1048840 / 0x100108
> 
> Modifier Change
>   Keys:       
>   Key Code:   65535 / 0xffff
>   Modifiers:  256 / 0x100
> 
> Modifier Change
>   Keys:       
>   Key Code:   65535 / 0xffff
>   Modifiers:  8388864 / 0x800100
> 
> Modifier Change
>   Keys:       
>   Key Code:   65535 / 0xffff
>   Modifiers:  256 / 0x100 
> ```

其中一些数字看起来非常熟悉，不是吗？

*   每当我按下 ⌘ 键时，修饰符状态都会更改为 1048000 范围内的某个值。
*   当我按 Fn 时，修饰符状态变为 8388864。你的是 8388608。

让我们看看 NSEvent.h 中的修饰符掩码：

> ```
> NSCommandKeyMask            = 1 << 20,
> NSFunctionKeyMask           = 1 << 23, 
> ```

噢！嗨。

这两个，实际上所有的修饰键（我们知道它们）掩码，都在`NSDeviceIndependentModifierFlagsMask`：

> ```
> NSDeviceIndependentModifierFlagsMask    = 0xffff0000UL 
> ```

这意味着*低*16 位*取决于*设备：它们可能因一台机器或一个键盘而异。换句话说，你的低 16 位可能与我的低 16 位不同。

*可是等等！还有更多！*

如果我们查看 I/O Kit 的 IOLLEvent.h，我们会发现类似于 NSEvent 中的掩码，此外还有：

> ```
> /* device-dependent (really?) */
> 
> #define   NX_DEVICELCTLKEYMASK    0x00000001
> #define   NX_DEVICELSHIFTKEYMASK  0x00000002
> #define   NX_DEVICERSHIFTKEYMASK  0x00000004
> #define   NX_DEVICELCMDKEYMASK    0x00000008
> #define   NX_DEVICERCMDKEYMASK    0x00000010
> #define   NX_DEVICELALTKEYMASK    0x00000020
> #define   NX_DEVICERALTKEYMASK    0x00000040
> #define NX_DEVICERCTLKEYMASK  0x00002000 
> ```

所以，`LCMDKEYMASK`是`0b1000`，`RCMDKEYMASK`是`0b10000`。这也与您找到的 left-⌘ 和 right-⌘ 值相匹配：left 是`NX_COMMANDMASK | NX_DEVICELCMDKEYMASK`，而 right 是`NX_COMMANDMASK | NX_DEVICERCMDKEYMASK`。

由此，我可以得出结论：

*   这些数字不是完整的 CGEvents。
*   在每一对中，正值是修饰符标志掩码，负值只是它的补码。
*   您需要生成的事件是修饰符更改事件 ( `kCGEventFlagsChanged`)，与 Key Codes 查找的相同（当您打开该复选框时），每个事件的修饰符标志如上所示。（你是否真的可以通过产生这样的事件来触发听写，我不知道——你必须自己看看。）
*   位布局并不是很重要，但如果你真的想知道，上半部分（“与设备无关”）标识打开了哪些修饰符，而下半部分（“与设备相关”，大概只存在于flags-changed 事件）标识刚刚按下哪些键来更改它们。
*   修改键按下的次数可能是硬编码的（或者，如果不是，则在其他地方指定）。

# java - 为什么我不能在参数中使用小于 0 的数字来参数化双 java？

> ID：15319718
> 
> 赞同：2
> 
> 时间：2013-03-10T06:50:27.390
> 
> 标签：java, double

为什么会这样：

```
public static double[][] param(double[][] data){
    for (int i=0;i<data.length;i++){
      for (int j=0;j<data[0].length;j++){
            if(j!=1){
           data[i][j] = data[i][j] * 1/10;//for some reason didn't accept as argument           

            }
            System.out.println(data[i][j]);
      }
    }
    return data;
} 
```

具有以下输出：

> 13581.0 337.42900390625 13571.0 337.1949951171875 13561.0 336.59599609375 13541.0 336.356005859375 13531.0 336.072998046875 13521.0 335.7989990234375 13511.0 335.5219970703125 13501.0

但这不是：

```
public static double[][] param(double[][] data, double param){

    for (int i=0;i<data.length;i++){
      for (int j=0;j<data[0].length;j++){
            if(j!=1){
           data[i][j] = data[i][j] * param;            

            }
            System.out.println(data[i][j]);
      }
    }
    return data;
} 
```

使用以下（不正确的）输出。

> 13581.0 0.0 13571.0 0.0 13561.0 0.0 13541.0 0.0 13531.0 0.0 13521.0 0.0 13511.0 0.0 13501.0

两种方法都编译得很好，但是当我尝试运行第二种方法时，它会使第一列中的所有数据 = 0。

它们都以相同的方式被调用，唯一的区别是一个从参数中获取 1/10 值，另一个是硬编码的（不理想，但这是我可以让它工作的唯一方法，因为一些莫名其妙的原因）。

这个问题的发生是因为它不喜欢被数字 < 0 参数化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:04:15.040

通过调用方法

```
public static double[][] param(double[][] data, double param) 
```

作为

```
param(data, 1/10); 
```

由于整数除法，值 1/10 被评估为`0` ，因此上述方法调用与

```
param(data, 0); 
```

该声明

```
data[i][j] = data[i][j] * param; 
```

在 param() 中相当于

```
data[i][j] = data[i][j] * 0 /*`param`*/; 
```

这就是为什么它在第二种情况下使第一列中的所有数据 = 0。

在第一种情况下，它不会使第一列中的数据= 0，因为语句：

```
data[i][j] = data[i][j] * 1/10; 
```

转换为等效如下

```
data[i][j] = (data[i][j] * 1)/10;// the (data[i][j] * 1) will return a double value 
```

操作完成`double/int`后，结果将是`double`. 这就是为什么第一种情况可以按您的预期工作，而第二种情况则不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:07:30.700

如果`param`初始化为

`double param = 0.1;` 或者

`double param = 1.0d/10.0d;`

代替

`double param = 1/10;`

因为在`double param = 1/10`when`1/10`执行的情况下，操作中使用了两个整数，它们被四舍五入为零并分配给 param。

它在您发布的第一种方法中运行良好，因为表达式是从左到右计算的，因为两者都`*`具有`/`相同的算术运算符优先级。

# html - 仅使用 css 滚动可调整大小的列

> ID：15319724
> 
> 赞同：2
> 
> 时间：2013-03-10T06:51:26.667
> 
> 标签：html, css, scrollbar, resizable

我正在尝试创建一个灵活的布局，其中包含不应包装的预格式化文本的列。我的问题是，仅当我将可滚动容器的宽度设置为具体宽度值时，列中的滚动条才会出现，% 似乎不起作用。如果我这样做，它周围的列仍将使用浏览器窗口正确调整大小，但容器的宽度不会相应改变，因为它是固定的。

这个优秀的教程在创建列方面帮助了我很多：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)但它建立在可调整大小的内容之上。

有什么办法可以用纯 CSS 调整滚动容器和列的大小？

![带有滚动条的可调整大小的列](../Images/9f015a150b9f60cfdd1a698d1d12de6b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:28:30.373

I have already been using `overflow:auto` but my floats always took as much space as their content was. This caused the columns extend beyond the screen size.

I found the answer in this SO question: [force a div to contain floated child divs](https://stackoverflow.com/questions/11964696/force-a-div-to-contain-floated-child-divs)

I basically had to make my container contain the floated elements and prevent it from collapsing. [http://jsfiddle.net/zfsjb/1/](http://jsfiddle.net/zfsjb/1/)

```
<style>
    #main {
    clear: both; /* Contain floating elements */
    background-color: red;
    }

    #main:after { /* Prevents the collapsing of the containing element. */
    content: ".";
    clear: both; /*  */
    display: block;
    visibility: hidden;
    line-height: 0;
    height: 0;
    }

    #primary {
    float: left;
    margin: 0;
    width: 20%;
    background-color: yellow;
    }
    #secondary {
    float: left;
    width: 80%;
    background-color: blue;
    }
</style>
<div id="main">
    <div id="primary">Primary</div>
    <div id="secondary">Secondary</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:25:44.377

设置`overflow: scroll`为左容器，然后在内部`p`或其他元素中设置宽度

```
#container1{
    overflow: scroll;
}
#container1 #coll p{
    width: 700px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T07:07:44.533

我认为您可能可以将溢出设置为滚动，这将解决问题

# android - Facebook登录android的错误配置

> ID：15319726
> 
> 赞同：0
> 
> 时间：2013-03-10T06:51:59.063
> 
> 标签：android, facebook, fbconnect

只是试图实现 facebook 与我的 android 应用程序的集成，但它向我显示了用于 facebook 登录的 Misconfig，我确信我的 hashkeys 我是从这篇[文章](https://stackoverflow.com/questions/4388992/key-hash-for-android-facebook-app)生成的，我的 facebook 应用程序配置是[这样的](http://s24.postimage.org/kuvor5j1x/Capture1.png)

它仍然给我那个错误：S

编辑：我的代码

```
 Request.executeMeRequestAsync(session,
                            new Request.GraphUserCallback() {

                                // callback after Graph API response with
                                // user object
                                @Override
                                public void onCompleted(GraphUser user,
                                        Response response) {
                                    if (user != null) {

                                        userPassword = user.getId();
                                        String email = user.getLink();
                                        email = email.replace(".", "");
                                        email = email
                                                .replace("http://", "");
                                        email = email.replace("https://",
                                                "");
                                        email = email.replace("/", "");
                                        email = email + "@anydomains.com";

                                        userMail = email;
                                        new Login(true).execute();

                                        // register with fb

                                    }
                                }
                            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:57:25.997

我想，你可以试试这个：

尝试调试您的应用程序，在**onSessionstateChange**中查看**Exception** not null。如果您的签名不匹配，您将在 Exception 中收到您的应用程序的正确签名（您也可以在 logcat 中看到它），而不是将其传递到 FaceBook 开发控制台。

**更新**：

以下代码对我有用：

```
@Override
protected void onSessionStateChange(SessionState state, Exception exception) 
{
    if (exception != null)
    {   
        Log.i(TAG, exception.toString());
    }
    if (state.isOpened()) 
    {
        Request request = Request.newMeRequest( this.getSession(),
                                    new Request.GraphUserCallback() 
        {
            @Override
            public void onCompleted(GraphUser user, Response response) 
            {

            }
        });
        Request.executeBatchAsync(request);
    }
} 
```

如果您的 keyhash 不匹配，您将在**LogCat中看到它**

```
if (exception != null)
{   
    Log.i(TAG, exception.toString());
} 
```

# linux - IO 操作 - 为什么不 cd？

> ID：15319727
> 
> 赞同：0
> 
> 时间：2013-03-10T06:52:01.350
> 
> 标签：linux, io, directory, cd

我不知道我在这方面是对还是错，但根据常识，`command file`会比or*稍微*快一点。`command dir/file``command dir1/.../dirN/file`

现在，假设这是真的，让我们考虑一下涉及处理可变数量目录中的大量文件的脚本和命令（例如编译您的 gentoo 内核）。如果脚本或程序足够聪明，可以`cd`进入包含大量文件的目录，是否会有任何性能提升？

在我看来，不再遵循这些指针数百或数千次所节省的时间可能会弥补 cd 进出目录所花费的时间。

现在我问我的问题：

*   有没有可能获得性能提升？
*   如果是这样，如何对其进行基准测试？
*   如果可以进行基准测试，一个目录中必须有多少文件才能在进出它的时间上达到平衡`cd`？
*   这也会影响 Java、PHP、Python 等的文件操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:10:26.927

如果您执行 chdir，您将查找目录并创建一个 dentry。以后对 dir/file 的调用应该已经有 dir 的目录。同样，如果您访问 dir/file1 和 dir/file2.... dir/fileN，则对 dir 的查找应该只发生一次。因此，我怀疑是否有性能提升。'Make' 可能出于其他原因执行 chdir。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:04:23.497

**有没有可能获得性能提升？**

计数：10,000,000（50,000 个文件，循环 200 次）

`stat *`: 真实 - 8m 47.112s
`cd ...`: 真实 - 8m 47.475s
`stat dir/dir/dir/*`: 真实 - 9m 33.609s

**如果是这样，如何对其进行基准测试？**

我使用以下命令进行测试：

```
mkdir dir;
mkdir dir/dir;
mkdir dir/dir/dir;
cd dir/dir/dir;
touch $(seq 1 50000);
time for i in $(seq 1 200); do stat * > /dev/null; done;
cd ../../../;
time for i in $(seq 1 200); do stat dir/dir/dir/* > /dev/null; done;
time $(cd dir/dir/dir; for i in $(seq 1 200); do stat * > /dev/null; done; cd ../../../); 
```

**如果可以进行基准测试，那么目录中必须有多少文件才能在 cd 进出它所花费的时间上达到平衡？**

如果没有没有其他进程运行的专用系统，就不可能确切知道这个数字，但看起来“收支平衡”数字似乎是：

1 目录：2,500
2 目录：1,250
3 目录：1,000

**这也会影响 Java、PHP、Python 等的文件操作吗？**

使用常识，我认为路径会增加这个微小的时间差异，但我能想到的唯一真正的解决方案是将所有包含的文件放在一个目录中，制作一个单独的包含文件以包含所有包含，并在您的运行时代码中包含“质量包含器”。

# java - 为什么invokeAndWait() 更适合applet 而不是独立应用程序？

> ID：15319742
> 
> 赞同：-1
> 
> 时间：2013-03-10T06:53:53.363
> 
> 标签：java, swing, applet, invokelater, invokeandwait

Java 文档说：

> 在 applet 中，必须使用 invokeAndWait() 从 init() 方法启动 GUI 创建任务；否则，init() 可能会在创建 GUI 之前返回，这可能会导致 Web 浏览器启动小程序时出现问题。

如果`init()`在创建 GUI 之前返回有什么问题？浏览器可能会出现什么样的问题？

文档进一步说：

> 在任何其他类型的程序中，调度 GUI 创建任务**通常**是初始线程所做的最后一件事，因此它使用 invokeLater() 还是 invokeAndWait() 都没有关系。

作为最后一件事完成的 GUI 创建任务如何改变任何事情？此外，它还谈到了**通常**`invokeAndWait()`的做法，如果创建 GUI 不是初始线程完成的最后一个任务，那么使用还是无关紧要`invokeLater()`？

我想我明白他们想说什么，但我仍然想确定，因此，我发布了这个问题。提前谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T06:55:25.870

> 如果`init()`在创建 GUI 之前返回有什么问题？浏览器可能会出现什么样的问题？

我主要关心的`start()`是在组件创建结束之前调用该方法。如果在 start 方法中引用了组件，这将导致`NullPointerException`.

> ..独立程序不会发生同样的事情吗？

桌面应用程序没有`start()`方法。该方法是[**小程序**生命周期](http://docs.oracle.com/javase/tutorial/deployment/applet/lifeCycle.html)的一部分，但不是应用程序的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:01:16.097

我会用一个例子告诉你我的经验 - 假设我们有一个带有 JMenuBar 的小程序（扩展 JApplet），有 2 个构造函数（一个调用 super()，另一个调用 this() 并根据其参数设置一个 Frame）。我们在类中还有一个 main 方法（applet 不需要）

1.  实例化一个 JFrame
2.  使用此 Frame 作为参数构造小程序（调用 super() 并设置类变量的重载构造函数） 调用小程序的 init() 方法
3.  使框架在屏幕上居中并可见（作为独立应用程序工作）

在 init() 方法中，除了其他 GUI 组件之外，我们还创建了菜单栏，如果在构造函数中设置了 Frame 的类变量（它在选择时调用 System.exit()），则将 JMenuItem 作为“Exit”放入.

现在，invokeAndWait() 机制（如教程中所述）可以作为小程序正常工作，因为小程序 UI 由单独的线程控制。作为应用程序运行，当我们调用 System.exit() 方法时，我们会遇到异常，因为主线程会在 UI 线程想要退出时尝试挂起变量。如果我们从 cmd/shell 启动应用程序，读取这些 JVM 错误会很烦人。这可能是不建议将其用于应用程序的原因之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:23:49.373

看看下面的代码——它既可以用作小程序，也可以用作应用程序。方法 init1() 和 init2() 创建相同的 UI。两者都有效。init2() 创建一个单独的事件调度线程，不会与浏览器中的任何其他线程竞争，建议用于小程序。但是，当单击“退出”按钮作为独立应用程序运行时，这会导致偶尔出现异常。这就是为什么建议将 init1() 用于应用程序的原因。无论如何，这是我的理解，我可能是错的。但是现在解释/理由有意义吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class P4  extends JApplet implements ActionListener {

    private Frame frame;        // null/applet, non-null/application

    public P4 () {          super();            }
    public P4 (Frame f) {       this();     frame = f;  }

    public void init () {
//      init1();        // better for application
        init2();        // better for applets
    }

    public void init1 () {
        createGUI();
    }

    public void init2 () {
        try {
                javax.swing.SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    createGUI();
                }
                });
        } catch (Exception ex) {
            ex.printStackTrace();
    }}

    private void createGUI () {
        JPanel p = new JPanel();
        JButton b = new JButton ("Click to say Hello to the world");
        b.addActionListener (this);
        p.add (b);
        if (frame != null) {            // application
            b = new JButton ("Exit");
            b.addActionListener (this);
            p.add (b);
            p.setPreferredSize (new Dimension (400, 50));
        }
        getContentPane().add(p);
    }

    public void actionPerformed (ActionEvent e) {
        if ("Exit".equals (e.getActionCommand()))
            System.exit (0);
        JOptionPane.showMessageDialog (frame, "Hello, world!");
    }

    public void start () { }
    public void stop () { }
    public void paint (Graphics g) { 
        super.paint (g);
    }

    public static void main (String[] args) {
        JFrame fr = new JFrame ("Appletication");
        P4 p4 = new P4 (fr);
        p4.init();      // initialize GUI
        fr.add (p4);        fr.pack();      fr.setVisible (true);
}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T17:22:07.603

@trashgod所以我放入了一个非空的 start() 方法，并添加了一个 JPanel，它制作了一个旋转正方形（使用从 start() 开始的线程动画）。我仍然发现 init1() 和 init2() 的行为完全相同。小心向 OP（和我自己）解释为什么您更喜欢在这种情况下使用 invokeAndWait() 。

@Andrew我知道我对上面的答案不正确。请详细说明我为什么不对，以及正确答案是什么。我试图遵循您的一个答案，但链接已断开。

这是可编译的应用程序（是的，通常我会将其放入 3 个单独的类中，但在这里我们试图回答一个特定问题）。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class P4  extends JApplet implements ActionListener {

    private Frame frame;        // null/applet, non-null/application
    private Painter painter = new Painter();

    public P4 () {          super();            }
    public P4 (Frame f) {       this();     frame = f;  }

    public void init () {
//      init1();        // better for application
        init2();        // better for applets
    }

    public void init1 () {
        createGUI();
    }

    public void init2 () {
        try {
                javax.swing.SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    createGUI();
                }
                });
        } catch (Exception ex) {
            ex.printStackTrace();
    }}

    private void createGUI () {
        JPanel p = new JPanel(new BorderLayout());
        JButton b = new JButton ("Click to say Hello to the world");
        b.addActionListener (this);
        p.add (b, "South");
        p.add (painter, "Center");
        if (frame != null) {            // application
            b = new JButton ("Exit");
            b.addActionListener (this);
            p.add (b, "North");
        }
        getContentPane().add(p);
    }

    public void actionPerformed (ActionEvent e) {
        if ("Exit".equals (e.getActionCommand()))
            System.exit (0);
        JOptionPane.showMessageDialog (frame, "Hello, world!");
    }

    public void start () {          new Thread (painter).start(); }
    public void stop () { }
    public void paint (Graphics g) { 
        super.paint (g);
    }

    public static void main (String[] args) {
        JFrame fr = new JFrame ("Appletication");
        P4 p4 = new P4 (fr);
        p4.init();      p4.start();     // initialize GUI
        fr.add (p4);        fr.pack();      fr.setVisible (true);
    }

    public class Painter extends JPanel implements Runnable {
        private int state, px[] = new int[4], py[] = new int[4];

        public Painter () {
            super();
            setPreferredSize (new Dimension (300, 200));
        }

        public void run () {
            for ( ; ; ) {
                if (++state == 45)
                    state = 0;
                repaint();
                try {
                    Thread.sleep (25);
                } catch (InterruptedException ex) {
        }}}

        public void paint (Graphics g) {
            int w = getWidth(), h = getHeight(),
                cx = w/2, cy = h/2, halfD = (cx < cy) ? cx : cy;
            halfD -= 10;
            Graphics2D g2 = (Graphics2D) g;
            g2.setPaint (Color.white);      g2.fillRect (0,0,w,h);
            for (int i = 0 ; i < 4 ; i++) {
                double theta = (i*90 + 2*state) * Math.PI / 180;
                px[i] = (int) Math.round (cx + halfD * Math.cos (theta));
                py[i] = (int) Math.round (cy - halfD * Math.sin (theta));
            }
            g2.setPaint (Color.red);
            g2.fillPolygon (px, py, 4);
}}} 
```

# ruby-on-rails - 我究竟做错了什么？未定义的方法“comment_content”

> ID：15319743
> 
> 赞同：0
> 
> 时间：2013-03-10T06:53:54.790
> 
> 标签：ruby-on-rails, ruby, rails-migrations

我按照这个页面一步一步地 [微博在用户页面上的评论（Ruby on Rails）](https://stackoverflow.com/questions/9669221/microposts-comments-on-users-page-ruby-on-rails)

然后我查看了我到这里的错误 [form_for ，未定义的方法名称](https://stackoverflow.com/questions/12985940/form-for-undefined-method-name)

我跑了“rails generate migration add_comment_content_to_micropost comment_content:text”然后跑了“rake db:migrate”

但是，我仍然收到未定义的方法“comment_content”错误

```
NoMethodError in Users#show

Showing C:/app/views/shared/_comment_form.html.erb where line #4 raised:

undefined method `comment_content' for #<Comment:0x4fe56b8> 
```

这是该列来自 schema.db 的部分

```
create_table "microposts", :force => true do |t|
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.text     "commentcontent"
    t.text     "comment_content"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:58:10.260

该错误是指一个`Comment`对象，而不是一个`Micropost`对象。在您的 show 方法中，您需要引用正确的对象。

看你提到的帖子，你犯了一些错误。例如，`Comment`类应该有`comment_content`字段，而不是`Micropost`.

我认为您没有正确创建模型。例如，您的`Comment`模型应该有一个`user_id`和一个`micropost_id`来满足`belongs_to :user`和`belongs_to :micropost`关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:13:24.613

看起来您`model`错误地设置了关联。请访问此处了解建立关联的方法。

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# ruby-on-rails - 无法创建包含来自另一个模型的实例的下拉列表

> ID：15319748
> 
> 赞同：0
> 
> 时间：2013-03-10T06:54:45.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在创建属于公司的新 Post 对象时遇到问题。一个帖子属于一个公司，一个公司有很多个帖子。当用户创建新帖子时，他可以选择与该帖子关联的公司：

```
<%= form.collection_select(:company, @companies, :id, :name ) %> 
```

当用户提交此表单时，会出现以下错误：

```
Company(#39435240) expected, got String(#9332080) 
```

在请求标头中，我们发送的是公司 ID。它应该发送一个ID吗？这是完整的请求负载：

```
------WebKitFormBoundaryJ7O26zoDPh5PB7Zk
Content-Disposition: form-data; name="utf8"

âœ“
------WebKitFormBoundaryJ7O26zoDPh5PB7Zk
Content-Disposition: form-data; name="post[title]"

fdasfa
------WebKitFormBoundaryJ7O26zoDPh5PB7Zk
Content-Disposition: form-data; name="post[content]"

fdsafsda
------WebKitFormBoundaryJ7O26zoDPh5PB7Zk
Content-Disposition: form-data; name="post[company]"

1
------WebKitFormBoundaryJ7O26zoDPh5PB7Zk
Content-Disposition: form-data; name="post[image]"; filename="nike.gif"
Content-Type: image/gif

------WebKitFormBoundaryJ7O26zoDPh5PB7Zk
Content-Disposition: form-data; name="commit"

Create New Post
------WebKitFormBoundaryJ7O26zoDPh5PB7Zk-- 
```

它发送的公司 ID 为 1（这是我的测试数据库中唯一存在的公司）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:57:54.993

那应该是`:company_id`而不是`:company`

```
<%= form.collection_select(:company_id, @companies, :id, :name ) %> 
```

# c++ - C ++中的浮点变量

> ID：15319753
> 
> 赞同：0
> 
> 时间：2013-03-10T06:55:24.677
> 
> 标签：c++

我正在学习 C++，并在一个简单的程序中遇到这些问题，所以请帮助我。

这是代码

```
#include<iostream>
using std::cout;
int main()
{   float pie;
    pie = (22/7);
    cout<<"The Value of Pi(22/7) is "<< pie<<"\n";
    return 0;
} 
```

输出是

```
The Value of Pi(22/7) is 3 
```

为什么 Pi 的值不是十进制的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:56:55.930

那是因为你在做**整数除法**。

**你想要的是真正的浮动除法：**

```
#include<iostream>
using std::cout;
int main()
{   
    float pie;
    pie = float(22)/7;//        22/(float(7)) is also equivalent

    cout<<"The Value of Pi(22/7) is "<< pie<<"\n";
    return 0;
} 
```

但是，这种类型转换：`float(variable)`or`float(value)`不是类型安全的。

您可以通过确保您正在计算的值是浮点数来获得您想要的值，如下所示：

```
22.0/7 
```

或者

```
22/7.0 
```

或者

```
22.0/7.0 
```

但是，这通常很麻烦，并且需要您跟踪您正在使用的所有类型。因此，**最终和最好的方法涉及使用 static_cast**：

```
static_cast<float>(22)/7 
```

或者

```
22/static_cast<float>(7) 
```

至于为什么你**应该**使用 static_cast - 看到这个：

[为什么使用 static_cast<int>(x) 而不是 (int)x？](https://stackoverflow.com/questions/103512/in-c-why-use-static-castintx-instead-of-intx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:57:25.490

```
pie = (22/7); 
```

这里的除法是整数除法，因为两个操作数都是`int`.

你打算做的是浮点除法：

```
pie = (22.0/7); 
```

这里`22.0`是`double`，所以除法变为浮点除法（即使仍然`7`是`int`）。

规则是如果两个操作数都是整数类型（例如`int`，，`long`等`char`），那么它是整数除法，否则它是浮点除法（即即使单个操作数是`float`或`double`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T07:15:16.500

采用：

```
 pi = 22/7.0 
```

如果您将 / 运算符的两个操作数作为整数给出，则执行的除法将是整数除法，结果不会是浮点数。

# java - Switch 只执行一条语句

> ID：15319764
> 
> 赞同：0
> 
> 时间：2013-03-10T06:56:32.793
> 
> 标签：java, switch-statement

我正在调试一个 java 类的应用程序，当我在 case 39 中更改为使 intPos 62 而不是 63 不再起作用时，我的 switch 语句。现在不是在所有情况下都打印控制台输出，而是只为 switch 语句中的最后一种情况提供它。带有 switch 语句的类的代码如下。

```
public class NWSFB
{
    /** A class variable containing the Station Weather */
    private String strWeather ;
   /** The Constructor */
     public NWSFB(String strVar)
     {
       strWeather = strVar;
     }
  /** A method that finds the station */    
  public String getStationID(String strVar)
  {
    String stationId = strVar ;
    return stationId.substring(0,3);
  }      
 public String getWindInfo(String strAlt)
 {
   String strRet;
   strRet = "The altitude weather for " + strAlt + "000 feet is " +     getAltitudeWeather(strAlt) 
       + "\nWind Direction:" +getWindDir(strAlt) +"0 degrees"
       + "\nWind Speed:" +getWindSpeed(strAlt) + " knots"
       + "\nWind temperature:" +getWindTemperature(strAlt) + "C"
       + "\n. . ."
       + "\n";

   return strRet;
 }

 private int getPos(String strAlt)
 {
   int intAlt;
   int intPos =0;
   intAlt = Integer.parseInt(strAlt);
   switch (intAlt)
   {
     case 3:
      intPos = 4;
      break;
     case 6:
      intPos = 9;
      break;
     case 9:
      intPos = 17;
      break;   
     case 12:
      intPos = 25;
      break;
     case 18:
      intPos = 33;
      break;   
     case 24:
      intPos = 41;
      break; 
     case 30:
      intPos = 49;
      break;   
     case 34:
      intPos = 56;
      break;   
     case 39:
      intPos = 62;
      break;  
    }
   return intPos;
 }
 public String getAltitudeWeather (String strAlt)
 {
  int intPosition = getPos(strAlt) ;
  String strPos = strWeather.substring(intPosition, intPosition+7);
  return strPos ;
 }
 //get wind direction
 public String getWindDir(String strAlt)
 {
  String strPos = getAltitudeWeather(strAlt);
  return strPos.substring(0,2);

 }
 //get wind speed
 public String getWindSpeed(String strAlt)
 {
   String strPos = getAltitudeWeather(strAlt);
   return strPos.substring(2,4);
 }
 //get wind temperature
 public String getWindTemperature(String strAlt)
 {
   String strPos = getAltitudeWeather(strAlt);
   return strPos.substring(4,7);
 }

} 
```

这是使用此代码的类

```
public class A19005 
{

    static String  strStationWeather = "SAN 1905 1808+24 1512+17 1209+10 1708-06 2016-16 211831 211941 192652" ;
    public static void main(String[] args) 
    {
     //Create the myWeather object
        NWSFB myWeather = new NWSFB(strStationWeather);   
     //use myWeather to get the weather at various altitudes
        System.out.println("Sation ID:   " + myWeather.getStationID(strStationWeather));
        System.out.println(myWeather.getWindInfo("03"));
        System.out.println(myWeather.getWindInfo("06"));
        System.out.println(myWeather.getWindInfo("09"));
        System.out.println(myWeather.getWindInfo("12"));
        System.out.println(myWeather.getWindInfo("18"));
        System.out.println(myWeather.getWindInfo("24"));
        System.out.println(myWeather.getWindInfo("30"));
        System.out.println(myWeather.getWindInfo("34"));
        System.out.println(myWeather.getWindInfo("39"));
    }
} 
```

当我运行程序时，我得到 39000 英尺的高度天气是 192652 风向：210 度 风速：19 节 风温：41 C 。. .

而不是像我在案例 39 错误地获取所有高度的信息

```
intPost =  63 
```

如何使我的代码工作，以便打印出所有高度的天气输出，而不仅仅是最后一个？

编辑：只是想出了更多信息，当最后一个案例是 3 而不是 2 时它起作用的原因是因为它不会在所有情况下编译最后一个案例，当 case39 被执行时，它是唯一运行的案例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:22:23.877

我没有看到问题 - 只是将代码复制到一个文件中，编译并运行它......结果在最后，我得到了所有高度的结果！

```
public class P4 
{
    static String  strStationWeather = "SAN 1905 1808+24 1512+17 1209+10 1708-06 2016-16 211831 211941 192652" ;

    public static void main(String[] args) 
    {
     //Create the myWeather object
        NWSFB myWeather = new NWSFB(strStationWeather);   
     //use myWeather to get the weather at various altitudes
        System.out.println("Sation ID:   " + myWeather.getStationID(strStationWeather));
        System.out.println(myWeather.getWindInfo("03"));
        System.out.println(myWeather.getWindInfo("06"));
        System.out.println(myWeather.getWindInfo("09"));
        System.out.println(myWeather.getWindInfo("12"));
        System.out.println(myWeather.getWindInfo("18"));
        System.out.println(myWeather.getWindInfo("24"));
        System.out.println(myWeather.getWindInfo("30"));
        System.out.println(myWeather.getWindInfo("34"));
        System.out.println(myWeather.getWindInfo("39"));
    }
}

class NWSFB
{
    /** A class variable containing the Station Weather */
    private String strWeather ;

   /** The Constructor */
     public NWSFB(String strVar)
     {
       strWeather = strVar;
     }

  /** A method that finds the station */    

  public String getStationID(String strVar)
  {
    String stationId = strVar ;
    return stationId.substring(0,3);
  }      

 public String getWindInfo(String strAlt)
 {
   String strRet;
   strRet = "The altitude weather for " + strAlt + "000 feet is " +     getAltitudeWeather(strAlt) 
       + "\nWind Direction:" +getWindDir(strAlt) +"0 degrees"
       + "\nWind Speed:" +getWindSpeed(strAlt) + " knots"
       + "\nWind temperature:" +getWindTemperature(strAlt) + "C"
       + "\n. . ."
       + "\n";

   return strRet;
 }

 private int getPos(String strAlt)
 {
   int intAlt;
   int intPos =0;
   intAlt = Integer.parseInt(strAlt);
   switch (intAlt)
   {
     case 3:
      intPos = 4;
      break;
     case 6:
      intPos = 9;
      break;
     case 9:
      intPos = 17;
      break;   
     case 12:
      intPos = 25;
      break;
     case 18:
      intPos = 33;
      break;   
     case 24:
      intPos = 41;
      break; 
     case 30:
      intPos = 49;
      break;   
     case 34:
      intPos = 56;
      break;   
     case 39:
      intPos = 62;
      break;  
    }

   return intPos;
 }

 public String getAltitudeWeather (String strAlt)
 {
  int intPosition = getPos(strAlt) ;
  String strPos = strWeather.substring(intPosition, intPosition+7);
  return strPos ;
 }

 //get wind direction
 public String getWindDir(String strAlt)
 {
  String strPos = getAltitudeWeather(strAlt);
  return strPos.substring(0,2);
 }

 //get wind speed
 public String getWindSpeed(String strAlt)
 {
   String strPos = getAltitudeWeather(strAlt);
   return strPos.substring(2,4);
 }

 //get wind temperature
 public String getWindTemperature(String strAlt)
 {
   String strPos = getAltitudeWeather(strAlt);
   return strPos.substring(4,7);
 }
} 

/* Output:
Sation ID:   SAN

The altitude weather for 03000 feet is 1905 18
Wind Direction:190 degrees
Wind Speed:05 knots
Wind temperature: 18C
. . .

The altitude weather for 06000 feet is 1808+24
Wind Direction:180 degrees
Wind Speed:08 knots
Wind temperature:+24C
. . .

The altitude weather for 09000 feet is 1512+17
Wind Direction:150 degrees
Wind Speed:12 knots
Wind temperature:+17C
. . .

The altitude weather for 12000 feet is 1209+10
Wind Direction:120 degrees
Wind Speed:09 knots
Wind temperature:+10C
. . .

The altitude weather for 18000 feet is 1708-06
Wind Direction:170 degrees
Wind Speed:08 knots
Wind temperature:-06C
. . .

The altitude weather for 24000 feet is 2016-16
Wind Direction:200 degrees
Wind Speed:16 knots
Wind temperature:-16C
. . .

The altitude weather for 30000 feet is 211831 
Wind Direction:210 degrees
Wind Speed:18 knots
Wind temperature:31 C
. . .

The altitude weather for 34000 feet is 211941 
Wind Direction:210 degrees
Wind Speed:19 knots
Wind temperature:41 C
. . .

The altitude weather for 39000 feet is  192652
Wind Direction: 10 degrees
Wind Speed:92 knots
Wind temperature:652C
. . .
*/ 
```

# perl - 在不使用 CPAN 包的情况下在 Windows 上使用 Perl 读取密码

> ID：15319768
> 
> 赞同：1
> 
> 时间：2013-03-10T06:57:05.087
> 
> 标签：perl, passwords

我们有一个使用终端读取密码的 Perl 脚本。此脚本在 Windows 上不起作用，因为终端不可用。

我们做了一些研究，发现 ReadKey/Readline 是一个替代方案。然而，这个包不是我们默认 Perl 安装的一部分。

有没有办法在不使用终端或 ReadKey/Readline 的情况下在 Perl 中读取密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:03:05.673

如果您正在寻找一种在终端不回显的情况下获取密码的方法，请尝试以下操作：

```
use Term::ReadKey;
print "Enter password:";
ReadMode('noecho'); 
my $password = <STDIN>;
chomp($password); 
```

稍后，如果您必须恢复正常的终端输入回显，请编写以下内容：

```
ReadMode(0); 
```

此解决方案需要安装[Term::ReadKey](http://search.cpan.org/perldoc?Term%3a%3aReadKey)，它也适用于 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:39:55.343

可以在此处找到有关使用 ActivePerl 安装 CPAN 模块的说明：

[如何将 CPAN 模块安装到 ActivePerl](http://www.activestate.com/blog/2010/10/how-install-cpan-modules-activeperl "ActivePerl CPAN/PPM 指令")

可以在此处找到有关使用 Strawberry Perl 安装 CPAN 模块的说明：

[草莓 Perl CPAN 指令](https://stackoverflow.com/questions/6643939/installing-modules-using-strawberry-perl)

# jquery - 在我的 asp.net 网站中添加 jQuery 插件

> ID：15319769
> 
> 赞同：-6
> 
> 时间：2013-03-10T06:57:06.117
> 
> 标签：jquery, asp.net, html, vb.net

我想在我的 asp.net/vb 网站中添加一个插件

这是插件

[http://archive.slidesjs.com/](http://archive.slidesjs.com/)

我从未使用过 javaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:39:07.690

将您的插件链接添加到我制作的 [ ] 中。您可以添加更多此“脚本”行

<script src="[这里是你插件的链接]"></script>

（删除空格）

# bash - BASH CURL：按顺序运行时不要关闭请求之间的连接

> ID：15319770
> 
> 赞同：10
> 
> 时间：2013-03-10T06:57:09.080
> 
> 标签：bash, http, curl, persistent-connection

我正在尝试编写一个 BASH 命令，该命令使用 CURL 向两个不同的网页发送 GET 请求，但使用相同的连接。对我来说，这就像向登录页面发送一个 GET 请求以对服务器进行身份验证，然后第二个请求模仿在 Web 浏览器中发生的自动重定向到主页（通过*元*刷新标签）。我需要链接请求，因为来宾用户的主页内容（由服务器生成）与经过身份验证的用户不同。

我首先根据[SOF 帖子](https://stackoverflow.com/questions/3110444/how-to-run-multiple-curl-requests-processed-sequentially)的建议尝试了这个命令（假设变量已经`$IP`用`$PORT`有效值定义）：

```
curl -u user:pass ${IP}:${PORT}/login.php && curl ${IP}:${PORT}/index.php 
```

但是，我总是在第一个 GET 结束和第二个 GET 开始之间发生这样的事情：

```
* Connection #0 to host 10.0.3.153 left intact
* Closing connection #0 
```

那么 SOF 的帖子错了吗？无论如何，执行此命令将成功保持两个请求之间的连接打开：

```
curl -u user:pass ${IP}:${PORT}/login.php ${IP}:${PORT}/index.php 
```

但是，我真的更喜欢更接近前一个命令的解决方案而不是后一个命令。主要原因是将第一页与第二页的输出分开到两个不同的输出文件中。所以我想做类似的事情：

```
curl page1.html > output1 && curl page2.html > output2 
```

当然，我需要重用相同的连接，因为 page2.html 的内容取决于我也在同一个 HTTP 会话中对 page1.html 发出请求。

我也对使用 netcat 或 wget 的解决方案持开放态度，**但不是 PHP！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T07:13:55.340

执行 curl a.html && curl b.html 将必然使用两个 TCP (http) 连接来获取数据。每个 curl 操作都是自己的进程，并且会打开自己的连接。

但是，网站不使用 TCP/HTTP 连接来跟踪登录信息。相反，某种令牌被放置在会话中（通常使用 cookie），该令牌在后续请求中传递给站点。该站点在后续请求中验证该令牌。

Curl 有一个选项 -c 来指示应该在连接之间存储 cookie 的位置

```
curl -c cookiejar -u user:pass login.php && curl -c cookierjar index.php 
```

会更近。我说得更近了，因为许多站点不使用 -u 选项支持的基于 http 的身份验证，而是使用自定义表单，其次，调用假定使用了 cookie（而不是在 javascript 或 url 路径中嵌入某些内容）。后者很可能，但我不会指望第一位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-14T19:07:48.907

根据[curl 手册](http://curl.haxx.se/docs/manpage.html)，概要如下：

`curl [options] [URL...]`

这意味着您可以在同一命令中一个接一个地指定多个 url。Curl 将重用每个后续 url 的句柄：

> curl 将尝试为多个文件传输重用连接，因此从同一服务器获取许多文件不会进行多次连接/握手。这提高了速度。当然，这仅适用**于在单个命令行上指定的文件，**并且不能在单独的 curl 调用之间使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T13:54:07.070

主要这就是我制作[Xidel](http://videlibri.sourceforge.net/xidel.html)的目的，您可以在一个命令调用中编写所有请求和操作，它的行为类似于保持 cookie 的浏览器，并且连接处于活动状态：

```
xidel http://${IP}/login.php --download page1.html -f '"index.php"' --download page2.html 
```

或者如果有从第一页到第二页的链接，它可以直接跟随该链接：

```
xidel http://${IP}/login.php --download page1.html -f //a --download page2.html 
```

但是，它不支持 http 身份验证或 80,8080 和 443 以外的其他端口（后端会支持它，但在这之间有一个 url 验证将其拒绝为无效 url）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-14T08:39:03.243

我只是想补充一点，虽然 cookie-jar 选项对于该用例可能是最重要的，但如果您确实需要使用相同的 TCP 连接，您可以使用：

```
curl --http1.1 \
 -u user:pass -c cookiejar --url ${IP}:${PORT}/login.php \
 --next \
 -c cookiejar --url ${IP}:${PORT}/index.php 
```

该参数`--http1.1`强制连接为 http1.1 支持`keepalive`，`http2`当然也可以工作。`--keepalive`也可以工作，而不是将事情限制在 HTTP1.1

该参数`--next`允许您为第一个调用独立设置标头，以便 user:pass 不会发送到第二个 url。

# css - 如何剪切div的一部分

> ID：15319780
> 
> 赞同：7
> 
> 时间：2013-03-10T06:58:12.823
> 
> 标签：css

我试着给你一个关于我的问题的广泛画面。假设我的`div`页面上有一个`z-index: 99;`, 和`background-color: rgba(0,0,0,0.5)`. 然后我想删除覆盖的一部分`div`，例如`100 x 100px`在`top: 50px;`and中`left: 200px;`。

通过删除我的意思是排除覆盖的一部分`div`以使该部分可见并`background-color`从中删除。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:01:13.430

我不确定您是否可以像您描述的那样删除部分背景。相反，您的叠加层可以具有透明背景，并且它可以包含四个 blue-ish-background `div`s，它们在您想要的孔周围形成一个框架。

这是一些执行此操作的代码：

```
body {margin: 0; padding: 0}
#main {width: 500px; height: 200px; background: yellow;}
.overlay {background: rgba(0,0,0,0.5); position:absolute;}
#overlay-container { width: 500px; height: 200px; z-index: 99; position: absolute;}
#top {width: 100%; height: 50px}
#left {top:50px; width: 200px; height: 100px}
#right {left: 300px; width: 200px; height: 100px}
#bottom {left: -300px; top: 100px; width: 500px; height: 50px}
```

```
<div id="main"/>
<div id="overlay-container">
    <div class="overlay" id="top"/>
    <div class="overlay" id="left"/>
    <div class="overlay" id="right"/>
    <div class="overlay" id="bottom"/>
</div>
```

您可能可以摆脱`overlay-container`并简化一些事情。

对于叠加层，您可以只使用`<div>`具有透明背景和半透明边框的 a。这是另一个例子：

```
body { margin: 0; padding: 0; }
#background {
    width:500px;
    height:200px;
    background: yellow;
}
#overlay {
    border-color: rgba(0,0,0,0.5);
    border-style: solid;
    border-top-width: 50px;
    border-left-width: 200px;
    border-right-width: 200px;
    border-bottom-width: 50px;
    position: absolute;
    top: 0;
    width: 100px;
    height: 100px;
    z-index: 99;
}
```

```
<body>
    <div id="background">some content</div>
    <div id="overlay"></div>
</body>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:57:24.337

你必须像 Ted 的例子那样做一些事情。您可以使用 JavaScript 计算要屏蔽的元素的矩形，并使用该信息来定位覆盖元素。

这是一个使用的快速示例`jQuery`，

[小提琴](http://jsfiddle.net/v6aW9/1/)

另一种方法是使用带有 clearRect 方法的 html 画布，

[小提琴](http://jsfiddle.net/z2J5p/1/)

画布解决方案的警告是画布覆盖在元素上，因此不可能例如。鼠标选择div中的内容等。

# joomla - 多语言joomla 2.5

> ID：15319785
> 
> 赞同：0
> 
> 时间：2013-03-10T06:59:38.923
> 
> 标签：joomla, joomla2.5, multilingual, joomla-extensions

我读过 Joomla 2+ 具有多语言能力，内容作者可以将文章写成多种语言，而 Joomla 可以根据浏览器默认语言或某种标志 UI 显示它们。

我正在寻找一个 Joomla 2+ 教程，它解释了我需要做的所有事情才能让它工作？它与 1.7 相同还是与 2.5 不同？

有没有人有教程或者我可以在哪里找到这方面的文档？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:50:13.977

如果您指的是本地 Joomla 多语言选项，这里有两个很好的链接：

[构建多语言 Joomla 2.5 站点 - 操作系统培训](http://bit.ly/LpPoV2)
[Joomla 多语言网络研讨会](http://www.youtube.com/watch?v=gnhVVtyejPg)

您的另一个选择是使用扩展名，[Joomfish](http://www.joomfish.net)或[FaLang](http://www.faboba.com/en/composants/falang.html)。我已经使网站使用了所有这三个。用于 Joomla 2.5 的 Joomfish 最近才发布，我认为仍然有一些粗糙的边缘，FaLang 运行良好。

就个人而言，我已经成为原生 Joomla 选项的转换者。初始设置需要一些弄清楚，但它对我来说效果很好。

祝你好运

# bash - 包括行号的 Bash 日志记录

> ID：15319786
> 
> 赞同：1
> 
> 时间：2013-03-10T06:59:52.777
> 
> 标签：bash, logging

我习惯于`SLF4J`在 Java 和`logging`Python 中使用函数名称*和* **行号**作为输出格式的字段。

强调：**行号**

我可以在 Bash 中得到类似的东西吗？

目标：构建一个`log_error`通用函数以从我的（巨大的）脚本调用，输出错误源的严重级别、函数名称和行号。

预期用途：

```
log_error "INFO: my info" ... # called from within my_function at line 20 
```

预期输出：

```
[INFO] my_function@20 my info 
```

这样的事情有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:18:32.577

使用[$LINENO](http://linux.about.com/cs/linux101/g/lineno.htm)：每次引用此参数时，shell 都会替换一个十进制数字，表示脚本或函数中的当前连续行号（从 1 开始）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-31T04:56:20.810

你最好使用`BASH_LINENO`数组。[这是Bash 手册](https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html)的摘录：

> BASH_LINENO 一个数组变量，其成员是调用 FUNCNAME 的每个相应成员的源文件中的行号。${BASH_LINENO[$i]} 是源文件 (${BASH_SOURCE[$i+1]}) 中调用 ${FUNCNAME[$i]} 的行号（或 ${BASH_LINENO[$i-1] } 如果在另一个 shell 函数中引用）。使用 LINENO 获取当前行号。

这是 Bash 的综合日志记录实现：

[https://github.com/codeforester/base/blob/master/lib/stdlib.sh](https://github.com/codeforester/base/blob/master/lib/stdlib.sh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T09:43:58.387

希望下面的例子有`shopt -s expand_aliases`帮助`alias`：

**尝试.sh**

```
#! /usr/bin/env bash

shopt -s expand_aliases

# =============================================================
# Define the logger
# =============================================================
alias logger='logger_function [${BASH_SOURCE##*/}] [$FUNCNAME] [$LINENO] '

logger_function()
{
    echo $@
}

# =============================================================
# Use the logger
# =============================================================
my_function()
{
    logger "hello world!"
}

my_function 
```

**测试结果：GNU bash，版本 3.2.57(1)-release**

```
$ ./try.sh
[try.sh] [my_function] [20] hello world! 
```

考虑到问题的重点是：**line number**，所以在这个例子中，没有使用完全相同的问题输入和输出。

但为了提供更多信息，日志记录实用程序定义添加了：

*   `$BASH_SOURCE`
*   `$FUNCNAME`
*   `$LINENO`

因此，它可以打印文件名、函数名和行号。

关于`alias`这里的用法，它看起来像但实际上不能与 C 宏相比，根据：[https ://tldp.org/LDP/abs/html/aliases.html](https://tldp.org/LDP/abs/html/aliases.html)

# c# - Access SQL表达式中如何处理字符串变量中的单引号或双引号

> ID：15319787
> 
> 赞同：1
> 
> 时间：2013-03-10T07:00:08.373
> 
> 标签：c#, ms-access, parameterized-query

我用c#写了这行来操作microsoft access数据库

```
OleDbCommand sComm = new OleDbCommand
  ("Update TableToBeImport set TextDefault = '" + resxValue + "' 
    WHERE ControlName = '" + resxKey + "'" , c); 
```

`resxValue` 并且`resxKey` 都是字符串变量。

当两个字符串变量很简单时，例如“abc”，“xyz”，一切正常，但是当一个字符串变量变得复杂时，在我的情况下，像这样：

提示：

1.  要修复费率计划和 rpt 错误，请使用“重新处理”

2.  要修复运营商、中继组、交易员错误，请使用“删除并重新插入”

程序抛出一个错误，当我进行调试时，sComm.CommandText 是这种形式：

> 更新 TableToBeImport 设置 TextDefault = 'TIPS: \r\n1\. 要修复速率计划和 rpt 错误，请使用“重新处理”\r\n2。要修复运营商、中继组、贸易商错误，请使用“删除并重新插入” WHERE Con​​trolName = 'frmCDRQuery.label7.Text'

我知道在 c# 中，我可以`@`在字符串变量之前使用，因此其中的任何转义字符都将被忽略。但是在访问中，我怎样才能得到相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:36:58.250

这对你有用吗？

```
var resxValue = ""; // obviously this will be whatever the type and value that is required
var resxKey = ""; // obviously this will be whatever the type and value that is required

// I am assuming here that you are already programming with a `using` statement
using (OleDbConnection c = new OleDbConnection(""))
{
    using (OleDbCommand sComm = new OleDbCommand("UPDATE TableToBeImport SET TextDefault = @p0 WHERE ControlName = @p1", c))
    {
        sComm.Parameters.Add(new OleDbParameter("@p0", resxValue));
        sComm.Parameters.Add(new OleDbParameter("@p1", resxKey));

        // rest of your code here E.G., sComm.ExecuteNonQuery();
    }
} 
```

# javascript - Lightbox 2.51 在任何浏览器中都无法正常工作

> ID：15319790
> 
> 赞同：1
> 
> 时间：2013-03-10T07:00:44.373
> 
> 标签：javascript, html, css, lightbox

**回答** 好的大家，找到了解决方案（由于我是新用户，它不会让我在不到8小时内回答我自己的问题，对不起）：

原来 LightBox 的最新版本 v2.51 仅支持 jQuery v1.7.2。我所做的只是下载那个版本的 jQuery 并使用它而不是最新版本，它马上就可以工作了。

我猜这是一个业余错误，没有测试它所构建的 jQuery 版本；）

感谢所有观看并尝试回答的人！

**原始问题**

我的第一个 stackoverflow 帖子，所以让我开始吧！

我正在尝试在我的网站上本地使用 Lightbox v2.51，因此我尝试制作一个快速简单的概念，以便在我实际尝试在我的网站上实现它之前看看它是如何工作的。

所以，这里我有一个简单的“gallery.htm”文件，内容如下：

```
<!DOCTYPE html>
<html>
<head>
<link href="engine/lightbox.css" rel="stylesheet" />
</head>
<body>
    <div>
        <a href="images/title.gif" rel="lightbox" title="The main graphic">Test</a>
    </div>
<script src="engine/jquery.js"></script>
<script src="engine/lightbox.js"></script>
</body>
</html> 
```

问题是当我单击“测试”链接时，它应该在灯箱中加载引用的图像链接，使屏幕变黑，然后为包含图像的 div 设置动画，放大到完整视图。屏幕变暗，但之后我什么也没有。这是[之前](http://i.imgur.com/fzSY1n3.png)和[之后](http://i.imgur.com/BEaOVFe.png)的镜头。当我单击链接时，如您所见，屏幕变暗但没有其他反应，图像根本没有加载。

jQuery 版本是 1.9.1，它存储在本地只是为了我的本地主机测试目的，当它在实时站点上时，它是从 Google ajax 主机调用的。

脚本和样式位于本地文件夹“engine”中。所有文件都正确命名，当使用谷歌浏览器时，我完全加载页面并按住 SHIFT+CTRL+J 检查控制台是否有错误，但一切都加载完美。

任何帮助表示赞赏，谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:21:23.837

您需要使用您的灯箱下载随附的给定 jQuery 包！这行得通！

```
<!DOCTYPE html>
<html>
    <head>
        <link href="lightbox.css" rel="stylesheet" />
        <link href="screen.css" rel="stylesheet" />
        <script src="jquery-1.7.2.min.js"></script>
        <script src="lightbox.js"></script>
    </head>
    <body>
        <div>
            <a href="1.jpg" rel="lightbox">TestLink</a>
        </div>
    </body>
</html> 
```

# android - 适合初学者的黑莓开发

> ID：15319792
> 
> 赞同：1
> 
> 时间：2013-03-10T07:01:46.253
> 
> 标签：android, blackberry, blackberry-simulator, blackberry-jde, blackberry-10

我是一名 iOS 开发人员，我正在尝试从 Blackberry 开发开始，我已经完成了我的部分研究并提出了这个：

BlackBerry 是一个开放平台，提供多种开发语言和运行时，旨在满足您的技能需求。您的选择将基于熟悉程度的组合，可能具有预先存在的代码库以及您希望服务的目标设备。

我的问题是：

1.  此功能（各种开发语言和运行时）是否仅适用于[BlackBerry Z10](http://us.blackberry.com/smartphones/blackberry-z10.html)？

2.  [Bold](http://worldwide.blackberry.com/blackberrybold/)和[Z10](http://us.blackberry.com/smartphones/blackberry-z10.html)的应用程序开发是否相同？

3.  对于[Android 应用程序的运行时](https://developer.blackberry.com/android/)。如果我有安卓背景，这对我来说是最好的选择吗？

4.  我想在黑莓中为触摸和非触摸设备制作一个应用程序。那可能吗 ？

5.  我应该使用[Eclipse](http://www.eclipse.org)来完成这项工作吗？？

6.  是否有适用于 Mac OSX 的 SDK？

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:40:53.647

> 此功能（各种开发语言和运行时）是否仅适用于 BlackBerry Z10？

黑莓 10 支持许多不同的运行时，如 Adob​​e Air、Android、C/C++ 中的本机开发。

较旧的 BlackBerry OS 仅原生支持 Java 开发。

> Bold 和 Z10 的应用程序开发是否相同？

不

> 对于 Android 应用程序的运行时。如果我有安卓背景，这对我来说是最好的选择吗？

应用程序的移植受到高度限制。不支持许多第三方库。不支持许多特定于 Android 的 API，例如地图、LVL、应用内计费等。它可能会也可能不会起作用，具体取决于您的应用程序的复杂性。

> 我想在黑莓中为触摸和非触摸设备制作一个应用程序。那可能吗 ？

是的。

> 我应该使用 Eclipse 来完成这项工作吗？？

两种 BlackBerry OS 都使用 Eclipse 作为本机 IDE。

> 是否有适用于 Mac OSX 的 SDK？

是的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T08:10:35.837

> 此功能（各种开发语言和运行时）是否仅适用于 BlackBerry Z10？

不，这些功能通常适用于 Blackberry 10 OS。

> Bold 和 Z10 的应用程序开发是否相同？

不，虽然 BB Bold 有 BB7 操作系统，但 BB Z10 有 BB10 操作系统，这与 BB7 完全不同。BB10 中的应用程序不向后兼容。

> 对于 Android 应用程序的运行时。如果我有安卓背景，这对我来说是最好的选择吗？

最佳选择取决于您的技能、目标和计划。IMO，如果您已经在 android 中拥有现有应用程序，您可以使用 Android 运行时轻松地将其移植到 BB10 中。但是，如果您想专注于纯 BB10 应用程序开发，最好的选择是 BB10 原生编程的 cascades。它是 QT（通常用于界面设计）和 C++（通常用于程序逻辑）的混合体。

> 我想在黑莓中为触摸和非触摸设备制作一个应用程序。那可能吗 ？

如果你还在谈论 BB10 设备，那么到目前为止还没有非触控设备。有带/不带物理键盘的设备。是的，为两种设备配置相同的应用程序非常容易。

> 我应该使用 Eclipse 来完成这项工作吗？？

Blackberry 提供了完整的开发环境，包括基于 Eclipse 的 IDE (QNX Momentics IDE)。看看[黑莓开发者的网站](https://developer.blackberry.com/)

> 是否有适用于 Mac OSX 的 SDK？

就在这里。您可以在[Blackberry 开发者网站上找到所需的一切](https://developer.blackberry.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T07:39:32.180

1) Z10 之前的 BB 版本只支持 Java 开发或基于 Web（又名 Javascript）的开发。BB7 及更早版本不支持本机开发。

2) 否 - 粗体是基于 Java 的。Z10 是基于 C++ 的，其他的则位于顶部。

3）这将很大程度上取决于您的应用程序。我自己没用过。

4) 我不认为他们对非触摸式 BB10 设备和开发人员支持有任何说法。我的猜测是 BB10 会接触到的所有东西。更大的问题是为 BB10 和 BB7 及更早版本制作应用程序——它们是不同的技术，在大多数情况下需要不同的代码库。他们有一组称为 WebWorks 的 JS 扩展，有点跨 BB，但对旧设备的支持取决于浏览器的支持。

5) 对于 BB10，您可能最终会使用他们的 Eclipse 变体 - QDE。对于 BB7 和更早版本，他们有一个 Eclipse 插件。对于 WebWorks，我只使用 emacs 和 Chrome，尽管他们有一个他们称之为 Ripple 的“模拟器”——我不是粉丝。

6）是的，但它出来的时间很晚，所以我不确定它到底涵盖了哪些版本。

# wordpress - woocommerce - 获取总购买商品

> ID：15319793
> 
> 赞同：4
> 
> 时间：2013-03-10T07:01:48.873
> 
> 标签：wordpress, woocommerce

我想计算在我的 wordpress 网站上购买的商品总数，并在某处显示这个数字。我正在使用 woocomerce 1.6.6 插件，我想要一些简码或函数或数据库查询来执行此操作。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-20T11:56:38.633

我意识到这个问题已经有一年多了，但是对于任何偶然发现它的人，就像我刚刚做的那样，这里是如何获得 Woocommerce 中所有产品的总销售额。我在一个项目中需要这个，因为对于购买的每一件产品，都会有一个捐赠给有需要的人。因此，我想显示捐赠的总数（= 销售额）。

每个产品都有一个 total_sales 元字段，所以我们需要做的就是在数据库中查询所有产品的 total_sales 的总和：

> ```
> function get_number_of_sales() {
>   global $wpdb;
> 
>   $result = $wpdb->get_row("
>       SELECT SUM(pm.meta_value) AS total_sales
>       FROM $wpdb->posts AS p
>       LEFT JOIN $wpdb->postmeta AS pm ON (p.ID = pm.post_id AND pm.meta_key = 'total_sales') 
>       WHERE p.post_type = 'product'
>   ");
> 
>   return $result->total_sales; 
> ```
> 
> }

基于[这个答案](https://stackoverflow.com/a/23321992/1546986)。

# javascript - 计算总时间

> ID：15319798
> 
> 赞同：1
> 
> 时间：2013-03-10T07:02:46.343
> 
> 标签：javascript, arrays, json

我有一些 json 数据，其中包含每天不同的时间。我必须根据天计算时间总和。这是我的 JSON

```
 [
    {
        "id":"1",
        "monday_NT":"3:45",
        "monday_TH":"2:45",
        "monday_DT":"4:45",
        "monday_DTH":"2:45",
    },
    {
        "id":"2",
        "monday_NT":"2:45",
        "monday_TH":"5:45",
        "monday_DT":"3:45",
        "monday_DTH":"1:49",
    }
] 
```

我已经完成了这个计算，但是我在这个计算中使用了太多的变量。这是我星期一的代码：

```
var monday_NT_hr=0;
var monday_TH_hr=0;
var monday_DT_hr=0;
var monday_DTH_hr=0;
var monday_NT_min=0;
var monday_TH_min=0;
var monday_DT_min=0;
var monday_DTH_min=0;
for(var i=0;i<data.length;i++)
{
    for(var index in data[i])
    {
        if(index=="monday_NT")
        {
            monday_NT_hr +=data[i][index].split(":")[0]; 
            monday_NT_min +=data[i][index].split(":")[1];
        }
        if(index=="monday_TH")
        {
            monday_TH_hr +=data[i][index].split(":")[0];
            monday_TH_min +=data[i][index].split(":")[1];
        }
        if(index=="monday_DT")
        {
            monday_DT_hr +=data[i][index].split(":")[0];
            monday_DT_min +=data[i][index].split(":")[1];
        }
        if(index=="monday_DTH")
        {
            monday_DTH_hr +=data[i][index].split(":")[0];
            monday_DTH_min +=data[i][index].split(":")[1];
        }
    }
} 
```

无论如何，这个计算使用的变量更少吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:13:47.357

如果我可以假设列出的每个值都是以小时和分钟为单位的时间，并且您想找到所有时间的总和，那么您可能会合并您的代码。

```
var total_time = 0;

for (var i = 0; i < data.length; i++) {
  for (var attr in data[i]) {
    if (attr != 'id') {
      total_time += getSeconds(data[i][attr]);
    }
  }
}

total_time = secToFormatted(total_time); // Total time in a formatted string

function getSeconds(strTime) {
  // Convert a string time to seconds
}

function secToFormatted(seconds) {
  // Convert seconds into hours and minutes string
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:16:31.883

您可以只设置两个名为`hours`and的对象，`minutes`然后根据原始数据中的确切键名添加总和：

```
var hours = {},
    minutes = {};

for (var i = 0, il = data.length; i < il; i++) {
    for (var k in data[i]) {
        var timeSplit = data[i][k].split(':'),
            hour = parseInt(timeSplit[0], 10),
            min = parseInt(timeSplit[1], 10);

        hours[k] = hours[k] ? hours[k] + hour : hour;
        minutes[k] = minutes[k] ? minutes[k] + min : min;
    }
}

console.log(hours);
// {id: 3, monday_NT: 5, monday_TH: 7, monday_DT: 7, monday_DTH: 3}
console.log(minutes);
// {id: NaN, monday_NT: 90, monday_TH: 90, monday_DT: 90, monday_DTH: 94} 
```

您可以忽略`id`.

## [看演示](http://jsfiddle.net/tTQjp/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T07:16:51.580

这应该好多了：（[小提琴](http://jsfiddle.net/xaMxb/)）

```
var monday_NT= {min:0, hr:0};
var monday_TH={min:0, hr:0};
var monday_DT={min:0, hr:0};
var monday_DTH={min:0, hr:0};

function splitSum(obj, data) {  
    data = data.split(":");
    obj.hr += Number(data[0]);
    obj.min += Number(data[1]); 
}

for(var i in arr) {    
    splitSum(monday_NT, arr[i].monday_NT);
    splitSum(monday_TH, arr[i].monday_TH);
    splitSum(monday_DT, arr[i].monday_DT);
    splitSum(monday_DTH, arr[i].monday_DTH);
} 
```

根据你的例子

```
monday_NT.min 
```

相当于

```
monday_NT_min 
```

* * *

尽管我相信所有这些辛勤工作并没有带来额外的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T06:50:39.053

如果要计算 24 小时甲酸的两倍时间差

```
var time1 = "22:00"
var time2 = "01:00" 
```

答：3:00 小时

```
var c = a.split(":")
var d = b.split(":")
var aH = parseInt(c[0])
var aM = parseInt(c[1])
var bH = parseInt(d[0])
var bM = parseInt(d[1])

if(aM > bH) {
 bH -= 1
 bM += 60
}
if(aH > bH) {
    bH += 24
}
var hour = bH - aH
var min = bM - aM
console.log( hour + ":" + min) 
```

[**看演示**](https://jsfiddle.net/dum43ky7/)

# unicode - 如何在 WP 中将 unicode 转换为 utf8

> ID：15319801
> 
> 赞同：0
> 
> 时间：2013-03-10T07:03:31.350
> 
> 标签：unicode, utf-8, windows-phone-8

在 Windows Phone 开发中，我想用以下代码编码的 utf8 编写一个 URI，但失败了。结果仍然是 unicode 但不是 %D6%DC 的形式...

```
 byte[] unicodeBytes = Encoding.Unicode.GetBytes(str);
        byte[] utf8bytes = Encoding.Convert(Encoding.Unicode, Encoding.UTF8, unicodeBytes);
        char[] utf8Chars = new char[Encoding.UTF8.GetCharCount(utf8bytes, 0, utf8bytes.Length)];
        Encoding.UTF8.GetChars(utf8bytes, 0, utf8bytes.Length, utf8Chars, 0);
        string utf8string = new string(utf8Chars);
        var URI = new Uri("http://www.jpwy.net/gc/search.php?" + utf8string); 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:07:33.443

我不确定您的目的是什么，但是有什么理由不使用 HttpUtility.UrlEncode 对字符串进行编码？Urlencode 的默认编码是 UTF8。

您应该能够将上面的代码替换为

```
var URI = new Uri("http://www.jpwy.net/gc/search.php?" + HttpUtility.UrlEncode(str)); 
```

# java - 无法实例化活动组件信息，获取运行时异常和 java.lang.nullpointer 异常

> ID：15319802
> 
> 赞同：0
> 
> 时间：2013-03-10T07:03:39.403
> 
> 标签：java, android

我正在开发一个通过**WiFi 直接执行****对讲机**功能的应用程序。我创建了使用**媒体记录器线程类记录音频并使用 RTP 套接字（** **Sendersocket 类**）将其发送到客户端的walkietalkiefunction活动。我尝试从片段开始此活动。我尝试了很多次，我发现了错误（运行时异常：无法实例化活动 ComponentInfo{com.walkietakli2.android.mcomp/com.walkietakli2.android.mcomp.WalkieTalkieFunction}：java.lang.NullPointerException）。所以请帮助我？我解决不了。你知道如何解决这个问题吗？

 ******```
03-09 08:40:09.361: E/AndroidRuntime(1301): FATAL EXCEPTION: main
03-09 08:40:09.361: E/AndroidRuntime(1301): java.lang.RuntimeException: Unable to instantiate activity componentInfo{com.walkietakli2.android.mcomp/com.walkietakli2.android.mcomp.WalkieTalkieFunction}: java.lang.NullPointerException
03-09 08:40:09.361: E/AndroidRuntime(1301):     at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.os.Looper.loop(Looper.java:137)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at java.lang.reflect.Method.invokeNative(Native Method)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at java.lang.reflect.Method.invoke(Method.java:511)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at dalvik.system.NativeStart.main(Native Method)
03-09 08:40:09.361: E/AndroidRuntime(1301): Caused by: java.lang.NullPointerException
03-09 08:40:09.361: E/AndroidRuntime(1301):     at com.walkietakli2.android.mcomp.WalkieTalkieFunction.<init>(WalkieTalkieFunction.java:26)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at java.lang.Class.newInstanceImpl(Native Method)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at  java.lang.Class.newInstance(Class.java:1319)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-09 08:40:09.361: E/AndroidRuntime(1301):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-09 08:40:09.361: E/AndroidRuntime(1301):     ... 11 more 
```

这是代码：包com.walkietakli2.android.mcomp；

```
 import android.net.wifi.p2p.WifiP2pDevice;
            import android.net.wifi.p2p.WifiP2pInfo;
            import android.os.Bundle;
            import android.app.Activity;
            import android.content.Context;
            import android.database.Cursor;
            import android.view.Menu;
            import android.view.View;
            import android.widget.EditText;
            import android.widget.ImageButton;

            public class WalkieTalkieFunction extends Activity {

                private WifiP2pDevice device =null;
                private WifiP2pInfo info =null;
                private FreqManager frqman =new FreqManager();
                private DeviceListFragment dlf=null;
                //Context context =null;
                //Object sstmonitor =new Object();

                Object mrtmonitor=new Object();

                String host = info.groupOwnerAddress.getHostAddress();

                @Override
                protected void onCreate(Bundle savedInstanceState)    
    {
           super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_walkie_talkie_function);

    ImageButton recorder1=(ImageButton)findViewById(R.id.recorderbtn);
    recorder1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

      SocketSenderThread sst =new SocketSenderThread(8988,device.deviceAddress, 
                                                  sstmonitor);

        EditText edtxt1= (EditText) findViewById (R.id.wtflbl1);

            if(frqman.isInSameGroup
                                     (dlf.getSelectedItemPosition()))
                      {
        MediaRecorderThread mrt =new MediaRecorderThread(host, 
                         mrtmonitor);
                                   mrt.run();
                        edtxt1.setText("now recording");
                                  // sst.init();
                                   //sst.run();
                                 }                          
                        }
                    });
                }

                @Override
           public boolean onCreateOptionsMenu(Menu menu) {

            getMenuInflater().inflate(R.menu.
            activity_walkie_talkie_function, menu);
                    return true;
                }

            }

enter code here
        package com.walkietakli2.android.mcomp;

        import java.io.File;
        import java.io.FileInputStream;
        import java.io.FileNotFoundException;
        import java.io.IOException;
        import java.io.InputStream;
        import java.net.DatagramSocket;
        import java.net.InetAddress;
        import java.net.SocketException;
        import java.net.UnknownHostException;

        import android.os.Environment;
        import android.util.Log;

        public class SocketSenderThread implements Runnable{

     public SocketSenderThread(int dport,
        String daddr, Object ssMonitor) {
    super();        
    this.daddr = daddr;
    this.dport = dport;
    ss_monitor = ssMonitor;

    init();
    }

   private void init()
   {
    DatagramSocket src_socket = null;
    try {
         src_socket = new DatagramSocket();         

 Log.i(TAG, "init: dest addr"+InetAddress.getByName(daddr)+" port: "+dport);
 rtp_socket = new RtpSocket(src_socket,   InetAddress.getByName(daddr),dport);
    } 
    catch (UnknownHostException e) {            
        e.printStackTrace();
    }
    catch (SocketException e) {
        Log.i(TAG, "Socket cannot be opened");
        e.printStackTrace();
    }
}

private InputStream audio_input;
private String daddr;
private int dport;

private static final String TAG = "WalkieTalkieEngine";

public static boolean all_files_sent = true;

RtpSocket rtp_socket = null;

Object ss_monitor = new Object();

@Override
public void run() {
    int sample_rate = 8000;
    int sample_size = 1;
    int frame_size = Constants.PKT_SIZE;
    int payload_type = 0;       
    boolean running = true;
    int last_file_sent = 0;
    int num_files = 0;

    int frame_rate = sample_rate/(frame_size/sample_size);

    while(running)
    {
        if(all_files_sent)
        {
            synchronized(ss_monitor)
            {
                try{
                    Log.i(TAG, "Waiting for notif");
                    ss_monitor.wait();
                }
                catch(InterruptedException e){}
                num_files = MediaRecorderThread.max_file_num;
            }
            Log.i(TAG, "Got Notif");
        }

        // create # of streams and set that to audio_input
        for (int i = last_file_sent; i < num_files; i++) 
        {
            String path = null;
            try {
                Integer file_num = new Integer(i+1);
            path =Environment.getExternalStorageState().
               toString()+file_num.toString()+".3gp";
                audio_input = new FileInputStream(path);
                payload_type = i+1;
            } catch (FileNotFoundException e2) {                    
                e2.printStackTrace();
            }

            if (audio_input==null) 
                return;

            Log.e(TAG, "Trying to to send RTP packet from File"+path);

            byte[] buffer=new byte[frame_size+12];
            RtpPacket rtp_packet=new RtpPacket(buffer,0);
            rtp_packet.setPayloadType(payload_type);      
            int seqn=0;
            long time=0;
            long byte_rate=frame_rate*frame_size;

            boolean reading=true;

            Log.i(TAG, "Reading blocks of "+(buffer.length-12)+" bytes");
            while(reading)
            {
                int num=0;
                try {
                num = audio_input.read(buffer,12,buffer.length-12);
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
                Log.i(TAG, "Number of blocks read: "+num);
                if(num > 0)
                {
                    rtp_packet.setSequenceNumber(seqn++);
                       rtp_packet.setTimestamp(time);
                       rtp_packet.setPayloadLength(num);

                       try {
                        rtp_socket.send(rtp_packet);
            Log.i(TAG, "Sent packet of size: "+rtp_packet.getLength());
                    } catch (IOException e) {
                        Log.i(TAG, "Send failure");
                        e.printStackTrace();
                    }

                       long frame_time=(num*1000)/byte_rate;
                       time+=frame_time;

                 try {  Thread.sleep(frame_time);  } catch (Exception e) {}
                }
                else
                {
                    reading=false;
                    Log.i(TAG, "Error reading from InputStream");
                }
            }//end while reading
        File fileToDelete =new File(path);
            fileToDelete.delete();
            last_file_sent++;
        } // end-for

        all_files_sent =  true;
    } // end-while running
    }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:10:36.717

错误是：

```
private WifiP2pInfo info =null;
...
String host = info.groupOwnerAddress.getHostAddress(); 
```

您尝试访问`info.groupOwnerAddress`时`info`为空。`info`您必须在尝试访问它之前进行实例化。

尝试使用：`private WifiP2pInfo info = new WifiP2pInfo();`******

# sharepoint - SharePoint 2013 - 匿名网站 - Chrome SharePoint 插件

> ID：15319803
> 
> 赞同：3
> 
> 时间：2013-03-10T07:04:06.177
> 
> 标签：sharepoint, iis, sharepoint-2013

当匿名浏览配置为匿名访问的 SharePoint 2013 网站时，我看到一个带有以下措辞的警告栏：

Mac 版 Chrome 显示：

> 无法加载 SharePoint 浏览器插件。

适用于 Windows 的 Chrome 显示：

> Microsoft Office 需要您的许可才能运行。

页面中嵌入了什么使 Chrome 想要运行插件，我该如何删除它？我似乎找不到任何关于此的信息，如果已得到解答，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:35:56.263

这是由于[SharePoint 浏览器支持知识库文章](http://technet.microsoft.com/en-us/library/cc263526.aspx)中记录的 Name.dll 冲突。

要删除此警告，您有两种选择。

如果 Web 应用程序中的任何网站集不需要此功能，则可以将其关闭，称为“人名操作和状态设置”的 Web 应用程序常规设置。[Randy Drisgill 的帖子介绍](http://blog.drisgill.com/2010/02/removing-name-activex-control-warning.html)了 SharePoint 2010 用户界面中的屏幕截图，非常相似。

或者，尝试按照 Alex在同一主题[的 SuperUser 线程中的建议](https://superuser.com/questions/42698/sharepoint-annoyances-what-is-name-dll/43138#43138)修改母版页。如果您不需要，请将下面的 JavaScript 添加到母版页以禁用状态图标。在主要以匿名方式访问的网站上，您很少需要它。

```
function ProcessImn()
{ }
function ProcessImnMarkers()
{ } 
```

**也可以看看**

*   [Message in the Information bar in Internet Explorer 7 when you browse to a Windows SharePoint Services 3.0 site or to a SharePoint Server 2007 site: "The Web site wants to run the following add-on: 'Name ActiveX Control'"](http://support.microsoft.com/kb/931509)

# c - C 拆分位

> ID：15319804
> 
> 赞同：1
> 
> 时间：2013-03-10T07:04:11.427
> 
> 标签：c, macros

我有一个 16 位地址，我需要将其拆分为 15-8 的页码和 7-0 的偏移量。

所以，我猜我可以对它进行按位运算？

假设`0xBEEF`是需要拆分的地址。

页码：
`0xBEEF & 0xFF80= 1011 1110 1110 1111 & 1111 1111 1000 0000 = 1011 1110 1000 0000 = 0xBE80`

抵消：
`0xBEEF & 0x007F= 1011 1110 1110 1111 & 0000 0000 0111 1111 = 0000 0000 0110 1111 = 0x006F`

除了 C 中宏的按位算术之外，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:06:36.460

您可以在大多数程序中使用位移运算符。

`top8 = 0xABCD >> 8; bottom8 = 0xABCD & 0x00FF;`

这会给你`top8 = 0x00AB`和`bottom8 = 0x00CD`。

请注意，您不必将它们移动 8 位，它可以是任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T07:53:59.267

是的，有几种不同的方法可以做到这一点，但我不推荐**任何一种**。

在 C 中将 16 位值分成高位和低位是一件非常棘手的事情，因为位的顺序取决于硬件的字节序。如果你的系统是大端系统，高位将被存储在第二个，如果你的系统是小端，高位首先被存储。

让我们以 0xBEEF 为例，这是它在内存中的样子：

```
little endian     |     big endian
-------------------------------------
... EF BE ...     |     ... BE EF ... 
```

如果您使用位算术来分隔这两个字节，则不必关心它们在内存中的顺序，但实际上任何其他方法都会受到影响，需要您以某种方式检测字节序并有条件地编程以获得可移植的解决方案.

话虽如此，如果您不关心可移植性，可以使用以下几种替代方法：

**1.) 演员表**

这种方法基本上是icepack提出的。您获取变量的地址，将其转换为指向 char 的指针，并将其视为数组，以获取单独的字节。

**2.) 工会**

具有与演员相同的效果，您还可以创建一个这样的联合：

```
union myvalue
  {
    uint16_t value;
    uint8_t bytes[2];
  } 
```

能够分别寻址字节和值

**3.) 反过来**

另一种完全不同的方法是首先将您的 16 位数据存储在一个无符号字符数组中，您购买的是地址上的计算开销，但您不需要分隔字节。当然，如果地址是某种计算的结果，并且无论如何您都必须拆分字节，那么这将不再有意义。

**最后一句话 - 如果您关心代码的可移植性，请使用 AND 和 shift 来提取字节。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T07:16:22.773

这是一种无需位操作即可执行此操作的方法：

对于大端系统：

```
#define OFFSET(x) (*(unsigned char *)x)
#define PAGE(x)   (*((unsigned char *)x + 1)) 
```

对于 little-endian 系统，请切换 和 的`OFFSET`定义`PAGE`。

请注意 char 在您的系统中是 8 位的假设（如果不是出于某种奇怪的原因，请使用适当的 8 位类型）。

# mahout - 如何使用 mahout-distribution-0.7 中的 jar 文件运行 lda

> ID：15319810
> 
> 赞同：0
> 
> 时间：2013-03-10T07:05:08.493
> 
> 标签：mahout, lda

我有几个 jar 文件，即 mahout-integration-0.7.jar、mahout-math-0.7.jar、mahout-core-0.7.jar、mahout-core-0.7-job.jar、mahout-examples-0.7.jar 和mahout-examples-0.7-job.jar。如何通过调用某个 jar 文件来运行 LDA，例如我应该首先声明什么及其参数？

我已经在互联网上搜索了示例，但其中大多数

```
bin/mahout lda --paratemer1 --para2 
```

但是这些 jar 文件中没有这样的 lda.class 文件。那么如果我使用这些 jar 文件，我应该怎么做才能运行 LDA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T06:46:10.870

对于 mahout 0.7，您需要使用 bin/mahout cvb。查看此链接了解详情： [https ://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html](https://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html)

# jpa - 在部署时为 JPA 表生成指定数据库

> ID：15319826
> 
> 赞同：0
> 
> 时间：2013-03-10T07:08:35.797
> 
> 标签：jpa, eclipselink, jta

我有一个包含两个数据库的应用程序，在部署时我想为不同的两个数据库中的实体生成表。例如，如果我有 Entity1、Entity2 和 Entity3，我希望在 database1 中生成 Entity1 和 Entity2 表，在 database2 中生成 Entity3 表。如：

```
Entity1 =====> DB1
Entity2 =====> DB1
Entity3 =====> DB2 
```

是否有处理数据库实体映射的特定注释？

这是我的持久性单元：

```
 <persistence-unit name="DB1_PU" transaction-type="JTA">
      <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
      <jta-data-source>jdbc/DB1</jta-data-source>
      <properties>
         <property name="eclipselink.ddl-generation" value="create-tables"/>
      </properties>
  </persistence-unit>

  <persistence-unit name="DB2_PU" transaction-type="JTA">
      <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
      <jta-data-source>jdbc/DB2</jta-data-source>
      <properties>
         <property name="eclipselink.ddl-generation" value="create-tables"/>
     </properties>
  </persistence-unit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:31:48.443

好的，这是一个简单的解决方案，我刚刚想通了。

我用了

```
@Table(name="ENTITY_1", schema="DB1.dbo")
@Table(name="ENTITY_2", schema="DB2.dbo") 
```

并成功地将实体映射到正确的数据库。

# java - GAE：重新运行增强器并检查输出中的错误

> ID：15319827
> 
> 赞同：2
> 
> 时间：2013-03-10T07:08:46.147
> 
> 标签：java, google-app-engine, google-cloud-datastore, datanucleus

我知道你一定有一个问题说它是一个重复的问题并且已经得到回答。但我尝试了所有提到的步骤“删除重复的 datanuc jar 文件（我从来没有重复的 jar 文件）和 ORM src/删除”但没有运气。

1）我最近将我的应用程序移至高复制，从那时起我就遇到了这个问题。

> xxxxx.getXXX 方法xxxxx 类出错“类 com.xxxx 似乎没有得到增强。您可能需要重新运行增强器并检查输出中的错误。” 数据库中没有表，但操作需要它。请检查该类的元数据规范。

知道如何解决吗？罐子细节在最底部供参考。

** 上述问题存在于本地以及 Google App 服务器中（实体存在于云 GAE 中）

2) 我的 Ubuntu 操作系统最近损坏了，所以不得不重新安装。当我尝试将我的 GAE 项目导入到 Eclipse 并重新运行它时，我在`localhost:8888/_ah/admin`. 我查看了我的`datastore-indexes-auto.xml`和`local_db.bin`两者似乎都有数据但无法在本地数据存储中查看我的实体？我怎样才能映射/恢复它？

### 罐子

*   ognl-2.7.3.jar
*   激活-1.1.jar
*   appengine-api-1.0-sdk-1.7.2.1.jar
*   appengine-api-labs.jar
*   appengine-endpoints.jar
*   appengine-jsr107cache-1.7.2.1.jar
*   commons-beanutils-1.7.0.jar
*   commons-codec-1.1.jar
*   commons-collections-3.2.jar
*   commons-digester-1.8.jar
*   commons-fileupload-1.2.1.jar
*   commons-io-1.3.2.jar
*   commons-lang-2.1.jar
*   commons-logging-1.0.4.jar
*   datanucleus-appengine-1.0.10.final.jar
*   datanucleus-core-1.1.5.jar
*   数据核-jpa-1.1.5.jar
*   facebook-java-api-3.0.2.jar
*   facebook-java-api-annotation-processor-3.0.2.jar
*   facebook-java-api-schema-3.0.2.jar
*   freemarker-2.3.15.jar
*   geronimo-jpa_3.0_spec-1.1.1.jar
*   geronimo-jta_1.1_spec-1.1.1.jar
*   jasypt-1.6.jar
*   jaxb-api-2.1.jar
*   jaxb-impl-2.1.9.jar
*   jdo2-api-2.3-eb.jar
*   json-20080701.jar
*   jsr107cache-1.1.jar
*   运行时-0.4.1.5.jar
*   stax-api-1.0-2.jar
*   struts2-core-2.1.8.1.jar
*   struts2-dojo-plugin-2.1.8.1.jar
*   struts2-gae-0.1.jar
*   struts2-tiles-plugin-2.1.8.1.jar
*   瓷砖-api-2.0.7.jar
*   瓷砖核心2.0.7.jar
*   瓦片-jsp-2.0.7.jar
*   xwork-core-2.1.6.jar

# c++ - C++：用户定义类的动态数组

> ID：15319831
> 
> 赞同：1
> 
> 时间：2013-03-10T07:09:30.077
> 
> 标签：c++

我试过这个：

```
int n;
cin >> n;
int * pn = new int[n]; 
```

然后我可以像这样使用数组：pn[i] = ...

但我想用我自己的班级组织一些类似的东西：

```
class MyString
{
    char* m_pStr;
    public:
    MyString(const char* pStr){ 
        this->CreateArray(pStr);
        strcpy(m_pStr, pStr);
    }
}

void main(){
    int N;
    cout << "Iinput N: ";
    cin >> N;
    MyString * ar = new MyString[N];

    char tmp[100];
    for (int i = 0; i < 4; i++){
        cout <<"Input the string for the Mystring " << i + 1 << " ";
        cin >> tmp;     
        ar[i] = MyString(tmp);
    }
} 
```

我得到：错误 C2512：'MyString'：没有合适的默认构造函数可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:11:49.187

您忘记包含**默认构造函数**！

```
MyString() : m_pStr(0) { } 
```

当您尝试从此处实例化 MyStrings 数组时发生该错误：

```
MyString * ar = new MyString[N]; 
```

它寻找一个默认的构造函数。由于您没有在类定义中定义一个，因此您遇到了您描述的错误。

**因此，要解决您的问题，请为您的类创建默认构造函数，并且所有内容都应该按应有的方式编译。**

有关更多详细信息，请参阅此链接（或阅读一些 C++）：

[http://en.wikipedia.org/wiki/Default_constructor](http://en.wikipedia.org/wiki/Default_constructor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:49:16.423

好的，我会在上面的代码中更改很多内容。

首先，回答您的问题：并不总是需要默认构造函数。事实上，如果你没有定义任何构造方法，那么默认的构造方法就会被自动调用。但是，由于您定义了带有参数的构造函数，因此您需要定义其行为。如果您不希望在代码中调用它，`private`请在类定义中定义它。现在，一旦你解决了这个问题，你就会遇到其他问题：

1.  `this`是指向当前对象的指针，而您正试图取消引用它并获取`CreateArray`不存在的成员函数。

2.  在 C++ 中编码时永远不要使用 C 风格的字符串，因为您可以创建`string`对象，并且如果您需要 c 风格的字符串，您可以使用`string`名为`c_str()`.

3.  不要使用`void`主程序。并非所有编译器都允许它

4.  释放动态创建的数组使用的内存，使用`delete [] ar`

所以，代码有很多问题。我认为这里真正的问题是你可能会一些 C，并且你正在急于学习 C++，但请记住，正确学习一门语言需要耐心，仅仅因为你的代码可能工作，并不意味着它很好代码，如果你想正确学习一门语言，你应该付出更多的努力。相信我，我已经学会了艰难的方式！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T07:11:31.307

您正在尝试`MyString`使用默认构造函数来实例化该类，而没有在这一行中定义一个：

```
MyString * ar = new MyString[N]; 
```

它必须初始化对象，因此会尝试使用未设置的默认构造函数。

我会亲自更改您的构造函数：

```
MyString(const char* pStr); 
```

至：

```
MyString(const char* pStr = ""); 
```

为了表现得像默认的一样。

# javascript - 使用 jQuery UI 库的拆分器

> ID：15319834
> 
> 赞同：2
> 
> 时间：2013-03-10T07:09:44.680
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在尝试创建像下面 [http://methvin.com/splitter/3csplitter.html这样的可调整大小的单元格（拆分器）](http://methvin.com/splitter/3csplitter.html)

但我需要使用 jQuery UI 来做到这一点。

我不确定使用 jQUery UI 可以实现多么相似的事情。

是否可以使用 jQuery UI Resiable( [http://jqueryui.com/resizable/](http://jqueryui.com/resizable/) )

如果是，请您提供任何相同的参考示例。它的行为应该类似于 Methvin.com/splitter

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:28:18.993

这是我一天使用的代码：

```
$(".resizable1").resizable({
    handles: 'e',
    minWidth: '50',
    maxWidth: '350',
    resize: function() {
        var remainingSpace = $(this).parent().width() - $(this).outerWidth(),
            divTwo = $(this).next(),
            divTwoWidth = remainingSpace - (divTwo.outerWidth() - divTwo.width());
        divTwo.width(divTwoWidth);
    }
}); 
```

[http://jsfiddle.net/8qzTJ/](http://jsfiddle.net/8qzTJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:14:50.533

使用 jquery ui 绝对可以做到这一点，请查看此处的文档[http://jqueryui.com/resizable/#helper](http://jqueryui.com/resizable/#helper)这只是一个简短的示例

```
$(function() {
    $( "#resizable" ).resizable({
      handles: "n,e,s,w" // chose the handle you want
    });
  }); 
```

# php - 如何使用 php 获取图像，调整大小并传递给 Android

> ID：15319837
> 
> 赞同：0
> 
> 时间：2013-03-10T07:10:06.630
> 
> 标签：php, android, image, base64, image-resizing

我在服务器中有一些图像，我想用 php 获取这些图像，调整它们的大小并传递给我的 Android 应用程序。我使用下面的代码来调整图像的大小：

```
<?php
$image = imagecreatefromjpeg("test.jpg");

$original_image_width = imagesx($image);
$original_image_height = imagesy($image);

$resize_ratio = 0.5;

$resized_height = $original_image_height * $ratio;
$resized_width =  $original_image_width* $ratio;

$new_image = imagecreatetruecolor($resized_width, $resized_height);
$resized_image = imagecopyresampled($new_image, $image, 0, 0, 0, 0, $resized_width, $resized_height, $original_image_width, $original_image_height);
?> 
```

之后我不知道如何将 resized_image 传递给 android。我正在使用 JSONObject 和 makeHttpRequest 在我的应用程序和服务器之间传递字符串变量，一切正常。我尝试使用以下代码将 resized_image 转换为 base64 字符串：

```
<?php
$thumbnail = imagejpeg($resized_image);
$thumbnail_base64 = base64_encode($thumbnail);
?> 
```

并像这样传递它，但我得到“类型 java.lang.String 无法转换为 JSONObject”错误。

将它传递给我的 Android 应用程序的最佳方法是什么？如果有人可以告诉我如何传递 base64 字符串，我可以在 Android 端处理其余的。提前致谢。

编辑：我的 Android 代码如下：

```
class getAllReports extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ShowAllReportsActivity.this);
        pDialog.setMessage(getResources().getString(R.string.getting_reports));
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        JSONObject json = jParser.makeHttpRequest(url_all_reports,
                "GET", params);
        Log.d("Reports: ", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                reports = json.getJSONArray(TAG_REPORTS);

                for (int i = 0; i < reports.length(); i++) {
                    JSONObject c = reports.getJSONObject(i);

                    callNoArrayList.add(c.getString(TAG_CALL_NO));
                    yearArrayList.add(c.getString(TAG_YEAR));
                    modelArrayList.add(c.getString(TAG_MODEL));
                    tumbnailArrayList.add(c.getString(TAG_THUMBNAIL);
                }
            } else {
                Intent i = new Intent(getApplicationContext(),
                        MainActivity.class);
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }
    protected void onPostExecute(String file_url) {
        long delayInMillis = 500;
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                pDialog.dismiss();
            }
        }, delayInMillis);
        runOnUiThread(new Runnable() {
            public void run() {
                populateList();
            }
        });
    }

} 
```

TAGs 和 ArrayLists 在主类中初始化。

我的 PHP 代码的其余部分：

```
$db = new DB_CONNECT();
mysql_query('SET CHARACTER SET utf8');

$result = mysql_query("SELECT *FROM reports") or die(mysql_error());

if (mysql_num_rows($result) > 0) {
$response["reports"] = array();

while ($row = mysql_fetch_array($result)) {
    $report = array();
    $report["call_no"] = $row["call_no"];
    $report["year"] = $row["year"];
    $report["model"] = $row["model"];
    $report["thumbnail"] = $thumbnail_base64;
    array_push($response["reports"], $report);
}
$response["success"] = 1;

echo json_encode($response);
} else {
$response["success"] = 0;
$response["message"] = "No reports found";

echo json_encode($response);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:55:24.837

我用不同的方法解决了这个问题。我没有尝试`$resized_image`即时传递数据，而是先将它保存在一个临时位置，base64 对其进行编码并传递它，`JSONObject`一切正常。完成后，我从目录中删除了临时文件。这是执行此操作的 PHP 代码：

```
imagejpeg($resized_image, "tempimage.jpg", 75);
$file = file_get_contents("tempimage.jpg");
$base64_image = base64_encode($file);
unlink('tempimage.jpg'); 
```

我可以很容易地通过这个`$base64_image`，而 JSONObject 没有问题。我想当我尝试即时操作时，它会在字符串中添加一些额外的字符，而这些字符会导致解析问题`base64_encode`。`$resized_image`

在 Android 上获得 base64 编码字符串后，我使用以下代码将其解码并转换为位图：

```
 String mThumbnail = thumbnailArrayList.get(position);
    byte[] decodedString = Base64.decode(mThumbnail, Base64.DEFAULT);
    Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
    mReportImage.setImageBitmap(decodedByte); 
```

使用这种方法，一切都可以顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:25:04.553

您是否尝试过使用 json_encode？像这样的东西：

```
$msg= array(  
         'image' => $image
     );  
     echo json_encode($msg); 
```

编辑：抱歉，刚刚在底部看到了其余的 PHP 代码。

编辑2：也许你可以尝试设置标题？

```
header('Content-Type: application/json'); 
```

# python - 执行 javascript 的 Python webbrowser 模拟器

> ID：15319844
> 
> 赞同：0
> 
> 时间：2013-03-10T07:11:13.047
> 
> 标签：python, selenium

最近，我必须为一些网站（注册、发布和解析）编写机器人。我用 [grablib](http://grablib.org)做这个，但现在，我必须在 JS 上为网站编写机器人。我看到许多变体，例如 Selenium 和 forks*?*。

但是我需要多线程，而且据我了解，Selenium 会打开一个浏览器，而我不需要。我必须在 Linux 服务器上的 80-120 流中工作。

我选择哪种工具以及阅读什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:45:43.517

有一个名为[PhantomJS](http://phantomjs.org/)的浏览器可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:30:44.943

Selenium /can/ 使用浏览器，但也可以使用 HTMLUnit 作为后端。这个问题有一些很好的信息：[How do I use the HTMLUnit driver with Selenium from Python?](https://stackoverflow.com/questions/4618373/how-do-i-use-the-htmlunit-driver-with-selenium-from-python)

# php - 不显示 0 值

> ID：15319849
> 
> 赞同：-1
> 
> 时间：2013-03-10T07:11:52.163
> 
> 标签：php, sql

我有两个问题。我有一个显示表格和列的 php 页面。member_id 中的某些值是 0 我不想显示其中包含 0 的任何内容。所有其他值的值都在 1 和无穷大之间，因为它是由主键分配的。

我的代码如下，但是当我说 hidden = 0 时，它甚至会显示所有带有值的代码

```
$result = mysql_query("SELECT * FROM e_track_access_log WHERE hidden = 0 ORDER BY    
datetime_accessed");

echo "<table border='1'>
<tr>
<th>MSISDN</th>
<th>Date</th>
<th>ID</th>
</tr>";
while($row = mysql_fetch_array($result))
 {
echo "<td><font color=red>" . $row['msisdn'] . "</td>";
echo "<td><center>" . $row['datetime_accessed'] . "</td>";
echo "<td><center>" . $row['member_id'] . "</td>";
echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

第二个问题是我需要在这个回显上显示最新的日期和时间。还有一种方法可以说明它可以显示多少行，因为它现在正在显示表中的所有行。我想显示最多 20 行，只显示 SQL 中的最新 20 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:17:08.460

第一个答案：

```
 where member_id != 0 AND hidden = 0 
```

第二个答案：

```
 select * 
    from e_track_access_log               
    where hidden = 0 AND member_id != 0   # filter
    order by datetime_accessed DESC       # the newest is first, the oldest ist last
    limit 0,20                            # show the first 20 row from result 
```

显示最后插入的 20 行。

# c# - 如何从 MySQL 中选择 sum(max保持(x+y+z)) 来捕获 sum(1200+1300+1400)

> ID：15319850
> 
> 赞同：4
> 
> 时间：2013-03-10T07:12:11.667
> 
> 标签：c#, mysql, sql, select

如何选择`sum(max remain(x + y + z)) from`MySQL，来捕捉`sum(1200+1300+1400)`？

```
id | user | remain
-----------------
1  | x   | 1000
----------------
2  | x   | 1200
----------------
3  | y   | 1100
----------------
4  | y   | 1300
----------------
5  | z   | 1200
----------------
5  | z   | 1400
----------------
using (SqlConnection cn = new SqlConnection(Class1.x))
        {
            cn.Open();
            string cm1 = "select sum(max remain(all users)) as 'total' from item_new_company";
            using (SqlCommand cmd = new SqlCommand(cm1, cn))
            {
                using (SqlDataReader dr = cmd.ExecuteReader())
                { dr.Read(); tot5 = dr["total"].ToString(); }
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T07:14:58.243

像这样：

```
SELECT SUM(MaxRemain) TotalOfMaxRemains
FROM
(
    SELECT MAX(remain) AS MaxRemain
    FROM item_new_company
    GROUP BY user
) AS t; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/f0830/1)

结果：

```
| TOTALOFMAXREMAINS |
---------------------
|              3900 | 
```

* * *

子查询：

```
SELECT MAX(remain) AS MaxRemain
FROM item_new_company
GROUP BY user 
```

使用`GROUP BY user`and `MAX(remain)`，将为您`remain`提供 each的最大值`user`，然后在外部查询中，`SUM`将为您提供总数。

* * *

## 更新

对于 SQL Server，前面的查询应该可以正常工作，但还有另一种方法：

```
WITH CTE AS
(
  SELECT *, ROW_NUMBER() OVER(PARTITION BY [user] 
                              ORDER BY id DESC) AS rownum 
  FROM item_new_company 
) 
SELECT SUM(remain) AS Total 
FROM CTE 
WHERE rownum = 1; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/336e8/1)

# mysql - cloudfoundry mysql更新不起作用

> ID：15319853
> 
> 赞同：0
> 
> 时间：2013-03-10T07:12:19.997
> 
> 标签：mysql, grails, cloud-foundry

我有一个使用 mysql db 部署在 cloudfoundry 上的 grails 应用程序。对表格的更新是不稳定的——当我更改值时，它有时会起作用，而大多数时候它不起作用。没有错误。看起来好像更新正在进入不同的数据库。我查找了 vmc 服务，并且只有一个与应用程序关联的数据库。

由于它们有时会起作用，因此看起来像是 Cloudfoundry 问题。有人见过这个吗？是否有特殊配置可以使更新始终如一地工作？任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:55:29.940

您可以通过 vmc 命令使用隧道来检查绑定到您的应用程序的数据库，并查看是否存在所需的记录。如果您发现它丢失，可能会出现一些应用程序问题。

# c++ - 如何在 C++ 中连接两个字符串？

> ID：15319859
> 
> 赞同：123
> 
> 时间：2013-03-10T07:13:51.870
> 
> 标签：c++

我有一个私有类变量`char name[10]`，我想向其中添加`.txt`扩展名，以便我可以打开目录中存在的文件。

我该怎么做？

最好创建一个保存连接字符串的新字符串变量。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-03-10T07:15:04.330

首先，不要使用`char*`or `char[N]`。使用`std::string`，然后一切变得如此简单！

例子，

```
std::string s = "Hello";
std::string greet = s + " World"; //concatenation easy! 
```

容易，不是吗？

现在，如果您`char const *`出于某种原因需要，例如当您想传递给某个函数时，那么您可以这样做：

```
some_c_api(s.c_str(), s.size()); 
```

假设这个函数被声明为：

```
some_c_api(char const *input, size_t length); 
```

`std::string`从这里开始探索自己：

*   [std::string 的文档](http://en.cppreference.com/w/cpp/string/basic_string)

希望有帮助。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-10T07:15:00.733

既然是 C++，为什么不使用`std::string`代替`char*`呢？连接将是微不足道的：

```
std::string str = "abc";
str += "another"; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-10T07:29:37.057

如果您使用 C 进行编程，那么假设`name`确实是一个固定长度的数组，就像您说的那样，您必须执行以下操作：

```
char filename[sizeof(name) + 4];
strcpy (filename, name) ;
strcat (filename, ".txt") ;
FILE* fp = fopen (filename,... 
```

你现在明白为什么每个人都推荐了`std::string`吗？

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-10T07:18:43.340

移植的 C 库中的[strcat()](http://www.cplusplus.com/reference/cstring/strcat/)函数将为您执行“C 样式字符串”连接。

顺便说一句，即使 C++ 有一堆函数来处理 C 风格的字符串，它可能对你有好处，你可以尝试想出你自己的函数来做到这一点，比如：

```
char * con(const char * first, const char * second) {
    int l1 = 0, l2 = 0;
    const char * f = first, * l = second;

    // step 1 - find lengths (you can also use strlen)
    while (*f++) ++l1;
    while (*l++) ++l2;

    char *result = new char[l1 + l2];

    // then concatenate
    for (int i = 0; i < l1; i++) result[i] = first[i];
    for (int i = l1; i < l1 + l2; i++) result[i] = second[i - l1];

    // finally, "cap" result with terminating null char
    result[l1+l2] = '\0';
    return result;
} 
```

...进而...

```
char s1[] = "file_name";
char *c = con(s1, ".txt"); 
```

...其结果是`file_name.txt`。

您可能也想编写自己的`operator +`，但是不允许仅使用指针作为参数的 IIRC 运算符重载。

另外，不要忘记这种情况下的结果是动态分配的，因此您可能希望对其调用 delete 以避免内存泄漏，或者您可以修改函数以使用堆栈分配的字符数组，当然前提是它有足够的长度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-01T20:35:11.007

C++14

```
std::string great = "Hello"s + " World"; // concatenation easy! 
```

回答问题：

```
auto fname = ""s + name + ".txt"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T17:02:31.613

strcat(destination,source) 可用于在 C++ 中连接两个字符串。

要深入了解，您可以在以下链接中查找 -

[http://www.cplusplus.com/reference/cstring/strcat/](http://www.cplusplus.com/reference/cstring/strcat/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-25T12:37:00.703

最好使用 C++ 字符串类而不是老式的 C 字符串，生活会容易得多。

如果您有现有的旧式字符串，则可以转换为字符串类

```
 char greeting[6] = {'H', 'e', 'l', 'l', 'o', '\0'};
    cout<<greeting + "and there \n"; //will not compile because concat does \n not work on old C style string
    string trueString = string (greeting);
    cout << trueString + "and there \n"; // compiles fine
    cout << trueString + 'c'; // this will be fine too. if one of the operand if C++ string, this will work too 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-06-23T19:22:15.500

```
//String appending
#include <iostream>
using namespace std;

void stringconcat(char *str1, char *str2){
    while (*str1 != '\0'){
        str1++;
    }

    while(*str2 != '\0'){
        *str1 = *str2;
        str1++;
        str2++;
    }
}

int main() {
    char str1[100];
    cin.getline(str1, 100);  
    char str2[100];
    cin.getline(str2, 100);

    stringconcat(str1, str2);

    cout<<str1;
    getchar();
    return 0;
} 
```

# xml - XQuery 构造函数必须只有一个参数（subtract-dates()）

> ID：15319861
> 
> 赞同：0
> 
> 时间：2013-03-10T07:14:01.933
> 
> 标签：xml, xquery

我目前在“ [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ”命名空间中使用减日期（arg1，arg2）函数，但是当我给它两个日期参数时，编译器会给出这个警告：“构造函数函数必须只有一个参数”

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:39:44.967

XSD 命名空间中没有subtract-dates() 函数。您正在使用的处理器似乎在想“如果它在 XSD 命名空间中，它必须是一个构造函数，如果它是一个构造函数，它必须有一个参数”。

您可能正在查看 op:subtract-dates()，它不是用户可见的函数，而是出现在规范中的内部函数，用于解释“-”运算符在应用于日期和持续时间。

# java - 休眠延迟加载不起作用

> ID：15319862
> 
> 赞同：0
> 
> 时间：2013-03-10T07:14:18.340
> 
> 标签：java, hibernate

我有 ModPm 课

```
 @Entity
    @Table(name="MOD_PM")
    public class ModPm extends WebPageObject implements Serializable, IDBNamedEntity {

        private static final long serialVersionUID = 1L;

        public final static String Q_GET_DEPENDENT_LIST_FOR_NEW_SCOPE = "ModPm.getDependentForNewScope";
        public final static String Q_GET_DEPENDENT_LIST_WITHOUT_STATUS_FOR_SCOPE = "ModPm.getDependentWithoutStatusForScope";
        public final static String Q_GET_STATUS_FOR_NEW_SCOPE = "ModPm.getStatusForNewScope";
        public final static String Q_GET_WITHOUT_STATUS_FOR_SCOPE = "ModPm.getWithoutStatusForScope";

        @Id
        @SequenceGenerator(name="MOD_PM_ID_GENERATOR", sequenceName="MOD_PM_SEQ", allocationSize=1)
        @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="MOD_PM_ID_GENERATOR")
        @Column(name="ID")
        private long id;

        @Column(name="COMMIT_NUMBER")
        private int commitNumber;

        @Lob()
        @Basic(fetch=FetchType.LAZY)
        @Column(name="LIST_ARCHIVE")
        private byte[] listArchive;

    ....

        @Lob
        @Basic(fetch=FetchType.LAZY)
        @Column(name="TEXT_MASTER")
        private String textMaster;

....

 @ManyToMany
    @JoinTable(
        name="MOD_PM_DEPENDENCE"
        , joinColumns={
            @JoinColumn(name="PRIMARY_PM_ID")
            }
        , inverseJoinColumns={
            @JoinColumn(name="DEPENDENT_PM_ID")
            }
        )
    private List<ModPm> modPms2; 
```

和命名查询

```
@NamedQueries({
    @NamedQuery(name = ModPm.Q_GET_DEPENDENT_LIST_FOR_NEW_SCOPE, 
            query = "SELECT DISTINCT p FROM ModPm p " +
                    "WHERE p.modSystem.id=(SELECT s.modSystem.id FROM ModScopeType s WHERE s.id=?1) " +
                    "AND p.test=false AND p.rejected=false " +
                    "AND p.modPms2 IS NOT EMPTY"),

...
} 
```

当我尝试执行查询时，休眠以递归方式加载所有数据库。从 ModPm 类开始（包括所有 blob 和集合）。

我的 persistence.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0"
        xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="mod-db-jpa" transaction-type="JTA">
            <provider>org.hibernate.ejb.HibernatePersistence</provider>
            <jta-data-source>jdbc/security</jta-data-source>
....
            <class>com.ecleasing.db.jpa.entity.ModPm</class>
....
            <exclude-unlisted-classes>true</exclude-unlisted-classes>
            <shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>
            <validation-mode>CALLBACK</validation-mode>
            <properties>
                <property name="hibernate.transaction.manager_lookup_class" 
                        value="org.hibernate.transaction.WebSphereExtendedJTATransactionLookup" />
                <property name="hibernate.transaction.factory_class"
                        value="org.hibernate.transaction.CMTTransactionFactory" />  
                <property name="hibernate.transaction.jta.platform" 
                        value="org.hibernate.service.jta.platform.internal.WebSphereExtendedJtaPlatform" />  

                <property name="hibernate.dialect" value="com.ecleasing.db.hibernate.dialect.Oracle10gExtendedDialect" />
                <property name="hibernate.format_sql" value="true" />

                <property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.EhCacheRegionFactory" />
                <property name="hibernate.cache.use_second_level_cache" value="true" />
                <property name="hibernate.cache.use_query_cache" value="false" />

                <property name="hibernate.max_fetch_depth" value="0" />

            </properties>
        </persistence-unit>
    </persistence> 
```

我还尝试为每个集合编写带有“fetch=FetchType.LAZY”的注释，但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:15:00.197

感谢 JB Nizet，

将 maven 任务添加到 pom.xml

```
<plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.3</version>
                <executions>
                    <execution>
                        <id>Hibernate bytecode optimization</id>
                        <phase>process-classes</phase>
                        <configuration>
                            <tasks>
                                <taskdef name="instrument"  classname="org.hibernate.tool.instrument.javassist.InstrumentTask">
                                    <classpath>
                                        <path refid="maven.dependency.classpath" />
                                        <path refid="maven.plugin.classpath" />
                                    </classpath>
                                </taskdef>
                                <instrument verbose="true">
                                    <fileset dir="${project.build.outputDirectory}">
                                        <include name="**/*.class" />
                                        <exclude name="**/I*_.class,**/WebPageObject.class" />
                                    </fileset>
                                </instrument>
                            </tasks>
                        </configuration>

                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins> 
```

# arrays - 将文本文件读入结构数组

> ID：15319863
> 
> 赞同：1
> 
> 时间：2013-03-10T07:14:27.240
> 
> 标签：arrays, file-io, struct

```
`#include <iostream>
#include <fstream>

using namespace std;

// user struct
struct userInfo {
    string username;
    string firstName;
    string lastName;
    string favTVshow;

}; 

// create text file with each person's information
void dataBase(){
    ofstream dataFile("db.txt");

dataFile << "8\ngboss\nGriffin\nBoss\nHow I Met Your Mother\nechill\nEdwina\nCarol\nGossip Girl\nestone\nEmma\nStone\nScrubs\njcasablancas\nJulian\nCasablancas\nLost\nrobflew\nRob\nFlewelling\nWorkaholics\ncwoodsum\nCam\nWoodsum\nGlee\nrydogfav\nRyan\nFavero\nHomeland\nfishmans\nSam\nFishman\nEntourage\n";

     dataFile.close();
}

// read in database text file to an array
void dataBase_toArray(){
    userInfo userArray[8]
    string line;
    int loop = 0;

ifstream dataFile("db.txt");

if (dataFile.is_open()){
    while (getline(dataFile,line))
    {
        userArray[loop].username = line;
        userArray[loop].firstName = line;
        userArray[loop].lastName = line;
        userArray[loop].favTVshow = line;
        cout << userArray[loop].username << endl;
        loop++;
    }
    dataFile.close();
}
else cout << "Can't open file" << endl;

}

// main function
int main() {

userInfo userArray[8];

dataBase();
dataBase_toArray();

} 
```

所以这是我试图在这个文本文件中读入一个结构数组的代码。但是，当我尝试计算每个用户的用户名时，它不起作用。它只是打印出我的文本文件的前 8 行。我该如何解决这个问题，让它将文本输入到结构数组中，然后只输出 8 个用户中每个用户的用户名？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:32:38.427

我假设文件中的第一行（“8”）是用户数：

```
int n;
dataFile >> n;
for (int i = 0; i < n; ++i)
{
    getline(dataFile,line);
    userArray[loop].username = line;
    getline(dataFile,line);
    userArray[loop].firstName = line;
    getline(dataFile,line);
    userArray[loop].lastName = line;
    getline(dataFile,line);
    userArray[loop].favTVshow = line;
    cout << userArray[loop].username << endl;
    loop++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:34:27.657

你的问题出在这里：

```
while (getline(dataFile,line))
{
    userArray[loop].username = line;
    userArray[loop].firstName = line;
    userArray[loop].lastName = line;
    userArray[loop].favTVshow = line;
    cout << userArray[loop].username << endl;
    loop++;
}
dataFile.close(); 
```

您收到这些错误的原因是**您只准备了*一次*线路，因此 , 和 的值`username`被分配给运行 getline 时存储的相同值。`firstname``lastname``favTVshow`**

我提出以下建议（这有点让人想起 C 的 fscanf）：

```
while (getline(dataFile,line1) && getline(dataFile, line2) && getline(dataFile, line3) && getline(dataFile, line4))
{
    userArray[loop].username = line1;
    userArray[loop].firstName = line2;
    userArray[loop].lastName = line3;
    userArray[loop].favTVshow = line4;
    ++loop;
} 
```

在哪里：

```
string line; 
```

已被替换为：

```
string line1, line2, line3, line4; 
```

这样，它**确保**成功读取了四行（这是结构中元素的数量），并且每行都被分配了值，现在可以**正确地分配**给结构数组中的每个元素。

现在，理想情况下，这不是最好的方法 -**你可以使用向量等**，但从你的问题集中，我将它保持在相同的格式。

# nginx - 如何处理http请求中传入的custorm标头然后反向代理请求取决于结果

> ID：15319869
> 
> 赞同：0
> 
> 时间：2013-03-10T07:15:07.000
> 
> 标签：nginx

我是 Nginx 的新手，我的要求差不多是这样的：

我在我的服务之前将 Nginx 设置为前端服务，这就像一个反向代理服务器，而我需要根据传入的客户标头处理任何传入的 http 请求。我知道我可以设置反向代理，如下所示：

```
server {
    listen      18080;
    server_name localhost;

    location /myService {
            proxy_pass http://host:port/myservice/;
    } 
```

}

我也知道通过使用 $http_my_header 从传入请求中获取传入的“my-header”，我需要的是，从请求中检索“my-header”，然后调用另一个远程 Web 服务，如“http://authserver:authport/authorize ” 在请求标头中带有“my-header”，authserver 将授权“my-header”并回复基于 JSON 的响应，例如：

```
{
   valid: "true"/"false";
} 
```

然后我需要根据响应“有效”值来决定 proxy_pass 请求到 nginx 后面的 myservice 或直接拒绝 403 http 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:46:46.077

您需要根据 nginx 发出子请求。

您可以使用 Eval 模块之一执行此操作，然后通过正则表达式解析响应，但不建议这样做。

推荐的方法是使用[http://wiki.nginx.org/HttpLuaModule](http://wiki.nginx.org/HttpLuaModule)。看看[http://openresty.org](http://openresty.org) nginx 包。

```
init_by_lua 'require "cjson"';

location /auth {
    proxy_pass http://authserver:12345/authorize;
}
location /myService {
    access_by_lua '
        res = ngx.location.capture("/auth")
        if res.status == ngx.HTTP_OK then
            local response = cjson.decode( res.body )
            if response.valid and response.valid == "true" then
                return
            end
        end
        ngx.exit(ngx.HTTP_FORBIDDEN)
    ';
    proxy_pass http://host:port/myservice/;
} 
```

注意 ngx.location.capture 发出的子请求默认继承当前请求的所有请求头。

# sql - SQL Server 2000 不支持 ALTER TABLE my_table ADD COLUMN column_name VARCHAR(50) AFTER col_name

> ID：15319873
> 
> 赞同：6
> 
> 时间：2013-03-10T07:15:38.620
> 
> 标签：sql, sql-server, alter-table

我在 SQL Server 2000 中尝试了以下查询，以便可以在提到的列之后添加一个新列。

```
alter table abc ADD dad varchar(50) after parentname 
```

但它向我抛出了以下错误消息

> *消息 170，级别 15，状态 1，第 1
> 行第 1 行：“之后”附近的语法不正确。*

在 SQL Server 2000 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T07:21:43.960

在 SQL Server 中没有这样的语法。

只需使用

```
ALTER TABLE abc ADD dad varchar(50) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T01:38:24.597

简短的回答：表格中没有顺序。

表是一组记录（无序集合），每个记录都是一组字段。这就是为什么 RDBMS 理论更喜欢使用“记录”和“字段”而不是“行”和“列”的原因。

如果查看一页数据（例如，通过在 MSSQL 中使用 DBCC PAGE），您将看到字段的存储顺序与您在 CREATE TABLE 语句中指定的顺序不对应。

排序由 SELECT 语句强加。

我的建议是停止将精力和时间花在 CREATE TABLE 的整洁上，而将其花在 SELECT 语句上。

# python - 使用 django orm 生成更新查询

> ID：15319875
> 
> 赞同：9
> 
> 时间：2013-03-10T07:15:57.193
> 
> 标签：python, django, orm, sql-update

我需要使用 django orm 来实现这个查询：

```
update table set field=field+1 where id=id 
```

我不想用这个：

```
o = model.objects.get(id=id)
o.field+=1
o.save() 
```

因为它使用 select 和 when update，而不是线程安全的。

如何通过 orm 实现这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-10T11:05:08.970

之前的两个回答者都有部分解决方案：您应该`update`结合使用`F()`：

```
Model.objects.filter(id=id).update(field=F('field') +1)) 
```

请注意，这完全不需要 SELECT 就地更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T07:24:43.613

您可以使用`update`，详细信息可以在[文档中找到](https://docs.djangoproject.com/en/1.10/ref/models/querysets/#update)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-20T22:17:39.730

对于`django`v 2.2（可能是 3+）SQL 语句编译函数可以是：

```
from django.db.models.sql.subqueries import UpdateQuery

def compile_update_query(query_set, update_kwargs):
    query = query_set.query.chain(UpdateQuery)
    query.add_update_values(update_kwargs)
    return str(query) 
```

where `query_set`is`MyShinyModel.objects.filter(id=42)`和`update_kwargs`是要更新的模型字段字典

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T19:03:07.203

如果您需要**将**`UPDATE ORM`查询转换为语句`UPDATE SQL`而不执行它

> update() 方法立即应用并返回查询匹配的行数（[django 1.8 docs](https://docs.djangoproject.com/en/1.8/topics/db/queries/#updating-multiple-objects-at-once)）

```
def generate_update_sql(queryset, update_kwargs):
    """  [checked on django 1.8]
    Converts queryset with update_kwargs
    like if was: queryset.update(**update_kwargs)
    """
    from django.db.models import sql

    query = queryset.query.clone(sql.UpdateQuery)
    query.add_update_values(update_kwargs)
    compiler = query.get_compiler(queryset.db)
    sql, params = compiler.as_sql()
    return sql % params 
```

**用法**

```
qs = Event.objects.exclude(app='some')
update_kwargs = dict(description='test', action='action')
generate_update_sql(qs, update_kwargs) 
```

**将返回**

```
UPDATE `api_event` SET `description` = test, `action` = action WHERE NOT (`api_event`.`app` = some) 
```

# java - Joda Time - 给定时间段内的时间段？

> ID：15319877
> 
> 赞同：2
> 
> 时间：2013-03-10T07:16:17.173
> 
> 标签：java, time, jodatime

我的用例——我是一名医生。在给定的一天，我有几个小时有空，有一些时间没有空。我想创建一个对象 Period myWorkDay。当有人确定上午 8 点到 9 点的约会时（即 Period patient1Appointment），该时间段将从 myWorkDay 中“删除”。当新患者访问 myWorkDay 时，他只能看到 myWorkDay - patient1Appointment。如果患者 1 释放他的时间段，那么新患者会看到完整的 myWorkDay。

是否可以使用 JodaTime 做到这一点？

有一个不必要的额外要求。但是，如果你知道怎么做，那么请告诉我。

Extra - 在 myWorkDay 中为特定期间定义任务并执行它们。例如。8-9 期间（8-8:30 钻牙，8:30 - 8:45 磨牙，8:45-9:00 做一些文书工作，然后在 9 点欢迎另一位患者）

```
import org.joda.time.*;

public class PeriodManager {

    public static void main(String[]args){

        DateTime startTime = new DateTime(2013, 7, 1, 9, 0);//(int year, int monthOfYear, int dayOfMonth, int hourOfDay, int minuteOfHour) 
        DateTime endTime = new DateTime(2013, 7, 1, 17, 0);// 9 to 5 (or 17) job :)

        Period fullDay = new Period(startTime, endTime);
        System.out.println("full day - " + fullDay);

        startTime = new DateTime(2013, 7, 1, 9, 0);
        endTime = new DateTime(2013, 7, 1, 10, 0);
        Period patient1Appointment = new Period(startTime, endTime);//9-10

        fullDay.minus(patient1Appointment);
        System.out.println("full day - pat 1 " + fullDay);

        startTime = new DateTime(2013, 7, 1, 9, 0);
        endTime = new DateTime(2013, 7, 1, 10, 0);
        Period patient1CancelAppointment = new Period(startTime, endTime);

        fullDay.plus(patient1CancelAppointment);
        System.out.println("full day + pat 1 " + fullDay);

        startTime = new DateTime(2013, 7, 1, 9, 0);
        endTime = new DateTime(2013, 7, 1, 10, 0);
        Period patient2Appointment = new Period(startTime, endTime);

        fullDay.minus(patient2Appointment);
        System.out.println("full day - pat 2 " + fullDay);

    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:04:43.360

JODA 代表日期和时间，因此在回答您的问题时，是的，可以使用 JODA 在某种程度上对此进行建模。但是您需要对问题域进行建模，而不仅仅是 JODA。

您实际上是在做类似于 Outlook 日历的事情。日历已在 Java 中使用，因此您可以将其称为日记。一个简单的日记会知道你的工作日是哪几天，你的工作时间是什么（开始时间，结束时间）。

您可能希望将您的日记表示为日/周/月块。对于每一天，您现在可以确定它是否是工作日，以及工作时间是多少。

然后，您将需要代表预约。最简单的约会有日期，开始时间和结束时间，与会者。您可以添加其他内容，例如描述、状态（忙碌等）。

当有人创建新约会时，您可以检查它的开始/结束时间是否与现有约会冲突。

所以从这个领域驱动的设计开始，我们可以说你可能有以下数据/实体。

1.  医生（可能是雇员）
2.  医生拥有 1 份或多份日记
3.  日记有工作日、工作时间；拥有约会
4.  约会有开始时间、结束时间、日期、参加者

这将为您提供有关数据和对象模型以及主数据关系的线索。没有理由不能使用标准类或 JODA 来实现它。

# iphone - iOS模拟器中的图像越界

> ID：15319882
> 
> 赞同：0
> 
> 时间：2013-03-10T07:16:32.080
> 
> 标签：iphone, ios, objective-c, xcode

我是 iPhone 开发的新手。我正在为 Crystal Ball 应用程序编写代码，当我运行 iPhone 模拟器时，其中的背景图像超出了范围。我正在努力务实地做事。以下是代码

# 导入“ViewController.h”

```
@interface ViewController ()

@end

@implementation ViewController
@synthesize predictionLabel;
@synthesize predictionArray;

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *image = [UIImage imageNamed: @"crystal_ball copy@2x.png"];
    UIImageView *imageView =[[UIImageView alloc] initWithImage:image];
    [self. view insertSubview:imageView atIndex:0];

   self.predictionArray = [[NSArray alloc] initWithObjects:@"It is decideley so",
                                @"good things coming", 
                                @"Good time is here",
                                @"Great profit",
                                @"stay possitive",@"Stay Foccused",@"all is well",nil];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setPredictionLabel:nil];
    [self setPredictionLabel:nil];
    [self setPredictionLabel:nil];
    [self setPredictionLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)buttonPressed:(UIButton *)sender {

    NSUInteger index = arc4random_uniform(self.predictionArray. count);

    self.predictionLabel.text = [self.predictionArray objectAtIndex: index];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:39:02.440

您应该创建没有“@2x”的图像。iOS 已经处理好了。

```
UIImage *image = [UIImage imageNamed: @"crystal_ball copy.png"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:49:53.993

很高兴您在非视网膜模拟器上运行它。否则你可能没有注意到这个问题。

这是问题：

```
UIImage *image = [UIImage imageNamed: @"crystal_ball copy@2x.png"]; 
```

当你不知道它的历史时，视网膜的东西有点难以理解：

曾几何时，没有视网膜显示器。你的文件名只是`"crystal_ball copy.png"`在这些黑暗的日子里。然后 Retina 出现了，Apple 试图让它对开发人员尽可能透明和容易。如果您没有对代码进行任何更改，那么该应用程序仍应在视网膜设备上运行，但不会利用分辨率。如果您提供了一个具有双分辨率的文件并添加`"@2x"`到文件名，但仍然没有对您的代码进行任何更改，那么系统将自动获取 Retina 设备上的高分辨率图像和非 Retina 设备上的标准图像。

因此，提供两种分辨率，一种带有`"@2x"`，一种没有，并且在引用文件名时省略`"@2x"`. 而已。此行将在这里解决您的问题：

```
UIImage *image = [UIImage imageNamed: @"crystal_ball copy.png"]; 
```

假设此图像文件存在并且确实具有非视网膜分辨率。

# java - 在 JDesktopPane Java 中添加外部框架

> ID：15319883
> 
> 赞同：0
> 
> 时间：2013-03-10T07:16:41.450
> 
> 标签：java, swing, jframe, grouplayout, jdesktoppane

我有一个名为“Menu_Project”的框架。

我有另一个名为“Main_Menu”的框架，其中有一个 JButton，单击该按钮后，我想在 JDesktopPane 中调用框架“Menu_Project”。我尝试在此链接上关注 YouTube 上的教程：[https ://www.youtube.com/watch?v=TUL3qEoZkR4](https://www.youtube.com/watch?v=TUL3qEoZkR4)

当我运行它时，我得到：

```
 " Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: adding a window to a container" 
```

我的代码：

```
import java.awt.BorderLayout;

public class Menu extends JFrame {

private JPanel contentPane;
private JDesktopPane desktopPane;
private JButton btnNewButton;
private Menu_Modifications_Single m1; //The Frame to be added
/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Menu frame = new Menu();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Menu() {
    initComponents();
    createEvents();
}
private void initComponents(){
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 1706, 995);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);

    btnNewButton = new JButton("Analyze Single");

    desktopPane = new JDesktopPane();
    desktopPane.setBackground(SystemColor.window);
    GroupLayout gl_contentPane = new GroupLayout(contentPane);
    gl_contentPane.setHorizontalGroup(
        gl_contentPane.createParallelGroup(Alignment.LEADING)
            .addGroup(Alignment.TRAILING, gl_contentPane.createSequentialGroup()
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(desktopPane, GroupLayout.PREFERRED_SIZE, 1597, GroupLayout.PREFERRED_SIZE))
            .addGroup(gl_contentPane.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnNewButton)
                .addContainerGap(1496, Short.MAX_VALUE))
    );
    gl_contentPane.setVerticalGroup(
        gl_contentPane.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_contentPane.createSequentialGroup()
                .addComponent(btnNewButton)
                .addGap(18)
                .addComponent(desktopPane, GroupLayout.DEFAULT_SIZE, 823, Short.MAX_VALUE))
    );
    GroupLayout gl_desktopPane = new GroupLayout(desktopPane);
    gl_desktopPane.setHorizontalGroup(
        gl_desktopPane.createParallelGroup(Alignment.LEADING)
            .addGap(0, 1597, Short.MAX_VALUE)
    );
    gl_desktopPane.setVerticalGroup(
        gl_desktopPane.createParallelGroup(Alignment.LEADING)
            .addGap(0, 823, Short.MAX_VALUE)
    );
    desktopPane.setLayout(gl_desktopPane);
    contentPane.setLayout(gl_contentPane);
}
private void createEvents(){
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            if(m1==null){
            m1 =  new Menu_Modifications_Single();
            desktopPane.add(m1);

            }
        }
    });

}
} 
```

任何人都可以指出哪里错了。我正在关注视频教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:28:08.380

您应该`JInternalFrame`在`JFrame`.`JDesktopPane`

您可以轻松地修改您的代码：

```
if(m1==null){
    m1 =  new Menu_Modifications_Single();
    desktopPane.add(m1);
} 
```

到：

```
if(m1==null){
    m1 =  new Menu_Modifications_Single();
    JInternalFrame iFrame = 
            new JInternalFrame("Internal Frame", true, true, true, true);    
            /* give the same contents of m1 */
    iFrame.setContentPane(m1.getContentPane());    
            /* additional Integer argument, required by JDesktopPane
              (although not strictly required) */
    desktopPane.add(iFrame, new Integer(0));    
} 
```

# javascript - 使用jquery动态加载div标签中的html页面

> ID：15319887
> 
> 赞同：-1
> 
> 时间：2013-03-10T07:17:18.783
> 
> 标签：javascript

使用 JavaScript 或 jQuery 在 div 标签内动态加载 html 页面。

```
<html>
<head>
<title>Untitled Document</title>
</head>
<script type="text/javascript">
$(document).ready(function(){
    $('#btn').click(function(){   
       $('#div_content').html('C:/xampp/htdocs/ex1.html');
    });
});
</script>
<body>
<input type="button" id="btn" value="Load" />
<div id="d_content">
</div>
</body>
</html> 
```

但它不起作用..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T07:29:57.500

您遇到的问题是 javascript 将`page.html`其视为对象，访问 property `html`。你需要做的是*引用*字符串，所以它被视为它的意图..作为一个字符串：

```
$('#div_content').load('page.html'); 
```

**更新1：**

首先，您上面的内容称为[jQuery](http://jquery.com/)。jQuery 是一个 javascript 库，您必须在 head 标记中包含它，然后才能使用任何 jquery 对象的方法：

```
<script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script> 
```

您必须在文档头中包含上述行，才能访问 jQuery`$`对象的方法和属性。

您目前没有这样做的事实是您的代码被破坏并拒绝工作的原因。此外，根据您的设置，您可能希望自己提供 jquery 文件，在这种情况下，您将下载它并将其放在服务器上的某个位置。

其次，`C:\`不是你的网络根。 `localhost`是的，因此要使该位起作用，您必须使用“ex1.html”的网址。而已。由于您的文档已经在网络根目录中（或者至少我认为是），它应该可以访问任何相邻文件......否则..

假设您的索引文件在 htdocs 中。然后，您的索引 url 将是`localhost/index.ext`（ext 是您使用的任何文件扩展名）。然后`ex1.html`在另一个文件夹中，比如“folder1”。要在您的 jquery 代码中正确访问它`folder1/ex1.html`...

最后，脚本标签要么出现在头部，要么出现在主体中。不是两者都出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T07:19:44.030

```
$(document).ready(function(){
    $('#btn').click(function(){   
        $('#div_content').load('html.page');
     });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T07:20:10.437

```
$('#div_content').load("page.html"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T07:20:16.737

尝试这个：

```
$(document).ready(function(){
$('#btn').click(function(){
$.get('page.html').success(function(data)
 {
     $('#div_content').html(data);
 });
 });
 }); 
```

替换`page.html`为您的页面

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T07:20:28.357

尝试这个..

```
$(document).ready(function(){
    $('#btn').click(function(){   
       $('#div_content').html('page.html');
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T13:33:52.973

**main.html**

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
<title>Untitled Document</title>
</head>
<script>

function check(){
$('#tar').load('test.html #target');  // here 'test.html' is a page and 'target' id a id of 'test.html'
}
  </script>

<body>
<input type="button" id="btn" value="Go"  onclick="check();"/>
<div id="tar">
</div>
</body>
</html> 
```

**测试.html**

```
<html>
<head></head>
<body>
<div id='target'>
 I am from test page.
</div>
</body>
</html> 
```

在这里我写了 2 个 html 程序。问题仅发生在功能上。我纠正了这一点，现在它工作得很好。我们也可以加载 txt 文件：示例：

```
function check(){
    $('#tar').load('test.txt');  // here 'test.txt' is a text file
    }
      </script> 
```

# flex4.6 - 无法在 flex 移动应用程序中从网络下载图像

> ID：15319889
> 
> 赞同：0
> 
> 时间：2013-03-10T07:18:04.413
> 
> 标签：flex4.6, flex-mobile, flash-builder4.5

我想将图像下载`URL`到我`Mobile`使用的`Flex Mobile`. 我找到了[这个](http://blog.flexexamples.com/2007/07/28/downloading-files-in-flex-using-the-filereference-class/)并尝试了这个：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView">

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <fx:Model id="fileRefModel">
        <file>
            <creationDate>{""}</creationDate>
            <creator>{""}</creator>
            <modificationDate>{""}</modificationDate>
            <name>{""}</name>
            <size>{""}</size>
            <type>{""}</type>
        </file>
    </fx:Model>
</fx:Declarations>
<fx:Script>
    <![CDATA[           
        import mx.collections.ArrayCollection;
        import flash.net.FileReference;

        [Bindable]
        private var arrColl:ArrayCollection;

        // URL of the file to download.
        private const FILE_URL:String = "http://www.thebiblescholar.com/android_awesome.jpg";

        private var fileRef:FileReference;
        private var urlReq:URLRequest;

        private function init():void {
            // Initialize the array collection to an empty collection.
            arrColl = new ArrayCollection();

            // Set up the URL request to download the file specified by the FILE_URL variable
            urlReq = new URLRequest(FILE_URL);

            // Define file reference object and add a bunch of event listeners.
            fileRef = new FileReference();
            fileRef.addEventListener(Event.CANCEL, doEvent);
            fileRef.addEventListener(Event.COMPLETE, doEvent);
            fileRef.addEventListener(Event.OPEN, doEvent);
            fileRef.addEventListener(Event.SELECT, doEvent);
            fileRef.addEventListener(HTTPStatusEvent.HTTP_STATUS, doEvent);
            fileRef.addEventListener(IOErrorEvent.IO_ERROR, doEvent);
            fileRef.addEventListener(ProgressEvent.PROGRESS, doEvent);
            fileRef.addEventListener(SecurityErrorEvent.SECURITY_ERROR, doEvent);
        }

        private function doEvent(evt:Event):void {
            // Create shortcut to the FileReference object.
            var fr:FileReference = evt.currentTarget as FileReference;

            // Add event order and type to the DataGrid control.
            arrColl.addItem({data:arrColl.length+1, type:evt.type, eventString:evt.toString()});

            try {
                // Update the Model.
                fileRefModel.creationDate = fr.creationDate;
                fileRefModel.creator = fr.creator;
                fileRefModel.modificationDate = fr.modificationDate;
                fileRefModel.name = fr.name;
                fileRefModel.size = fr.size;
                fileRefModel.type = fr.type;
                // Display the Text control.
                //txt.visible = true;
            } catch (err:*) {
                // uh oh, an error of sorts.
            }
        }

        private function downloadSourceCodeZip():void {
            // Clear existing array collection.
            arrColl = new ArrayCollection();

            fileRef.download(urlReq); // Here it gives me Exception >> (Suspended: TypeError: Error #1009: Cannot access a property or method of a null object reference.)  

        }       

    ]]>
</fx:Script>    

<s:Button label="Download" click="downloadSourceCodeZip()"/> 
```

但我正在`Suspended: TypeError: Error #1009: Cannot access a property or method of a null object reference.`了解如何让这段代码为我工作>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:16:18.477

看起来您的 init() 方法并未从任何地方调用，因此未创建 fileRef。

您需要添加`initialize="init()"`到您的视图标签。

# ruby-on-rails - 当 Ruby 会话过期时，Ajax 请求不会停止

> ID：15319894
> 
> 赞同：0
> 
> 时间：2013-03-10T07:18:51.310
> 
> 标签：ruby-on-rails, ruby, ajax, session

我已经阅读了很多关于如何在 ajax 运行时防止会话过期的内容。但是，我想要一些完全相反的东西。我希望网页在会话到期后立即停止发出 AJAX 请求。我正在使用 Ruby on Rails 来设计页面并使用 JQuery 来调用这些方法。目前，一旦会话到期，所有 AJAX 请求都会根据我在应用程序控制器上的代码重定向到登录页面。这会导致登录页面上的数千次点击。我希望这些请求在会话到期后立即停止。我该怎么做呢？

我正在使用`setInterval`视图页面上的方法来调用这些方法。

# php - 来自 Javascript 的高级调用 PHP 函数

> ID：15319896
> 
> 赞同：0
> 
> 时间：2013-03-10T07:19:06.530
> 
> 标签：php, javascript

这是我的代码。

```
<script>
  function test(div_id) {
    var newMail = '<?php echo count_new_mail($id); ?>';
    setTimeout(test, 10000);
  }
  test();
</script> 
```

我想要做的是每 10 秒调用一次 php 函数 count_new_mail 。当 javascript 由 php 生成时，结果如下所示。

```
var newMail = 1; 
```

我知道这是因为它运行了 php 并且 count_new_mail 给出的值为 1。如何让这个 javascript 每 10 秒调用一次函数，而不仅仅是保持相同的值？或者我是否必须将 php 函数编写为 javascript 函数并调用它以获得我想要的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:21:56.677

PHP 总是在 JavaScript 之前工作，所以让 JavaScript 让 PHP 再次运行的唯一方法是启动另一个请求。`XMLHttpRequest`JavaScript 可以通过使用通常称为 AJAX的方式启动请求而无需转到新页面。JavaScript 代码看起来像这样：

```
// For old versions of Internet Explorer, you need to catch if this fails and use
// ActiveXObject to create an XMLHttpRequest.
var xhr = new XMLHttpRequest();
xhr.open("GET" /* or POST if it's more suitable */, "some/url.php", true);
xhr.send(null);  // replace null with POST data, if any 
```

这样就可以发送请求，但您可能也想获取结果数据。为此，您必须设置一个回调（可能在您调用之前`send`）：

```
xhr.onreadystatechange = function() {
    // This function will be called whenever the state of the XHR object changes.
    // When readyState is 4, it has finished loading, and that's all we care
    // about.
    if(xhr.readyState === 4) {
        // Make sure there wasn't an HTTP error.
        if(xhr.status >= 200 && xhr.status < 300) {
            // It was retrieved successfully. Alert the result.
            alert(xhr.responseText);
        }else{
            // There was an error.
            alert("Oh darn, an error occurred.");
        }
    }
}; 
```

需要注意的一点是，`send`仅*启动*请求；它不会等到它完成。有时您必须重组代码以适应这种情况。

# css - 使用 CSS 样式化社交媒体按钮？

> ID：15319897
> 
> 赞同：1
> 
> 时间：2013-03-10T07:19:10.503
> 
> 标签：css, twitter, facebook-like, google-plus

我正在使用 Twitter 的推文按钮、Facebook 的点赞按钮和 Google 的 +1 按钮。我尝试使用我自己的外部 CSS 文件和内联 CSS 来设置它们的样式。但是，似乎无论我对 CSS 进行什么调整，它最终都会被 FB、twitter 或 Google 的 API 中的 CSS 否决。我需要让[此处](http://sportannica.com/predictions/38/)找到的按钮整齐排列。我尝试将每个按钮的浮动设置为左侧。但是，那没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:34:38.613

您可以使用 !important 来确保应用您的样式规则。

例如，

```
button {
   padding: 4px !important;
} 
```

如果 facebook、twitter 等任何框架将按钮的内边距设置为 8px，这会将其重置为 4px。

**工作示例**：http: [//jsfiddle.net/yLEwS/](http://jsfiddle.net/yLEwS/)。尝试`!important`从两条线上删除，看看会发生什么。

# css - 如何使单击徽标在 css/html 中显示为没有 href？

> ID：15319899
> 
> 赞同：0
> 
> 时间：2013-03-10T07:19:21.973
> 
> 标签：css, html, click

基本上我想让普通文本可点击，但是点击鼠标徽标会弹出！我可以使用“onclick”使文本可点击，但这不会像点击徽标一样提供悬停的文本。

对不起我的菜鸟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:21:17.630

使用 CSS 属性`cursor: pointer;`来达到预期的效果。

*编辑：*如果您想在用户将鼠标悬停在文本上时应用其他样式，则添加选择器`:hover`以在鼠标悬停期间将伪选择器包含在样式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:21:09.987

您只需在父元素上设置光标属性。

```
span { cursor: pointer; } 
```

工作示例：http: [//jsfiddle.net/XxrMM/](http://jsfiddle.net/XxrMM/)

# java - 使用 MockMvc 时如何在测试代码中加载 messages.properties

> ID：15319901
> 
> 赞同：0
> 
> 时间：2013-03-10T07:19:37.460
> 
> 标签：java, spring, testing, spring-mvc

我使用 MockMvc 为 spring mvc 测试控制器制作测试代码。很好！但我对messages.properties 有一些问题。

我已将“messageResource”注册到 applicationContext.xml。我已经用属性占位符检查了这个文件。

但是，它在测试代码中不起作用。但它在网络服务器中工作。如何将 messages.properties 设置为 MockMvc？

这是我的测试代码中的 applicationContext.xml。

```
<bean id="messageSource"
class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
<property name="basename" value="classpath:messages" />
<property name="defaultEncoding" value="UTF-8"/> 
```

这是我的测试代码。请帮我。;

```
@Test
public void addUserWithPostToSuccess() throws Exception {
    MvcResult result = mvc.perform(post("/user/add/index").param("loginId", "LOGIN_ID").param("name", "NAME").param("password", "PASSWORD"))
                          .andExpect(status().isOk())
                          .andReturn();
    Map<String, Object> model = result.getModelAndView().getModel();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:59:44.370

解决了。这是我的错。;; messages.properties 文件的位置

# asp.net - 异常“索引超出范围”

> ID：15319903
> 
> 赞同：0
> 
> 时间：2013-03-10T07:20:08.423
> 
> 标签：asp.net

在我的代码中，我有一个 CheckboxList 并动态添加它的项目！我想要的是保存文本，但只能从会话中**选中**的CheckBoxes 中保存，因为我将在下一个表单中需要它！

所以我想制作一些文本，如您所见，我将选中复选框中的文本保存在带有名称的列表中 `myche`，但是当我按下按钮查看该列表的第一项时 - 此代码`lblProba.Text = myche[0];`给了我一个异常“索引超出范围'。看来我的清单是空的。

```
public partial class FormEGN : System.Web.UI.Page
{
    string mynewstring;
   //List<List<string>> mycheckedList = new List<List<string>>();
    List<string> myche = new List<string>();
    CheckBoxList mycheckbox = new CheckBoxList();
    protected void Page_Load(object sender, EventArgs e)
    {
        mynewstring = (string)Session["id2"];

        if(!IsPostBack)
        {
            ddlNumberTourists.Items.Add("1");
            ddlNumberTourists.Items.Add("2");
            ddlNumberTourists.Items.Add("3");
        }
    }

    protected void btnProba_Click(object sender, EventArgs e)
    {
        lblProba.Text = myche[0];
    }

    protected void btnReserve_Click(object sender, EventArgs e)
    { 
        string num =Request.QueryString["ExcursionID"];
        Response.Redirect(String.Format("ClintsInformation.aspx?Excursiondate_ID={0}",num));

    }

    protected void ddlNumberTourists_SelectedIndexChanged(object sender, EventArgs e)
    {

        int numTourists = Convert.ToInt32(ddlNumberTourists.SelectedItem.Text);
        for (int i = 0; i < numTourists; i++)
        {

            Label myLabel = new Label();
            myLabel.ID = "lblAccomodation" + (i + 1).ToString();
            myLabel.Text = "Настаняване Турист" + (i + 1).ToString();
            Page.FindControl("form1").Controls.Add(myLabel);
            DropDownList myDropDownList = new DropDownList();
            myDropDownList.ID = "ddlTourist" + i.ToString();
            Page.FindControl("form1").Controls.Add(myDropDownList);
            Page.FindControl("form1").Controls.Add(new LiteralControl("<br />"));

            string connectionString = "Server=localhost\\SQLEXPRESS;Database=EXCURSIONSDATABASE;Trusted_Connection=true";
            string query =
      "SELECT Extra_Charge_ID, Excursion_ID, Amout, Extra_Charge_Description FROM EXTRA_CHARGES WHERE Excursion_ID=" + mynewstring;
            SqlConnection conn = new SqlConnection(connectionString);
            SqlCommand cmd = new SqlCommand(query, conn);

            try
            {
                conn.Open();
                SqlDataReader rd = cmd.ExecuteReader();
                int s = 0;

                while (rd.Read())
                {
                    mycheckbox.ID = "chkblextracharge" + i.ToString() + s.ToString();
                    mycheckbox.Items.Add(rd["Extra_Charge_Description"].ToString());
                    Page.FindControl("form1").Controls.Add(mycheckbox);

                    if (mycheckbox.Items[s].Selected == true)
                    {  
                        myche.Add(mycheckbox.Items[s].Text);
                    }
                    s++;
                }

            }//End of try

            catch (Exception ex)
            { }
            Session["chk"] = myche;

        }//end of for
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:00:32.710

使用前检查是否`myche`为空`lblProba.Text = myche[0]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:02:32.067

问题是`myche`当按钮单击事件处理程序被触发时，其中没有项目。

您实际*将*任何项目添加到列表中的唯一位置是在`ddlNumberTourists_SelectedIndexChanged`. 此事件处理程序**不会**在回发时调用，因此`myche`为空。

`myche`如果您希望它们在回发之间保留，则需要存储和加载 in viewstate 的值。

如果您想了解如何使其正常工作，我建议阅读有关[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)以及[真正了解 ViewState的内容。](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)

* * *

风格注意事项：

```
try
{
  //something
}
catch (Exception ex)
{ } 
```

是一种糟糕的做法——如果抛出异常，你永远不会知道。

# android - 如何使用Android上的按钮打破线程内的循环

> ID：15319906
> 
> 赞同：-2
> 
> 时间：2013-03-10T07:20:22.897
> 
> 标签：android, loops, methods, for-loop, try-catch

我想通过使用停止按钮来打破线程计时器内部的循环。但是 Ecclips 在 stopsound() 上显示错误“*令牌上的语法错误，错误的构造*”；线程计时器中的方法。

我知道我们不能在 for 循环中定义函数，这就是为什么会出现错误。但我只是想知道，我们如何使用停止按钮打破线程计时器内部的循环？

```
stop = (ImageButton) findViewById(R.id.imageButton3);

stop.setOnClickListener(new View.OnClickListener() {    
public void onClick(View v) {
        stopsound();
           }
    });

public void mpsleep() {
    mp.start();
    Thread timer= new Thread(){//create new  thread with anonymous class
        public void run(){
            try{
                for (i= 0;i< maxCount;i++){
                    sleep(5000);//5 pause
                    public void stopsound(){
                            break;
                        }
                }               
            }catch(Exception e){
                e.printStackTrace();//print the stack trace if have an error
            }finally{
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        mp.pause();
                        mp.seekTo(0);
                        loop=0;
                        bv.setImageResource(R.drawable.playzz);
                    }
                });
            }
        }
    };
    timer.start();
} 
```

找到了其他方法来打破它，但它只在按下停止按钮 5 秒后才会打破。

```
int loop=0;
stop.setOnClickListener(new View.OnClickListener() {    
public void onClick(View v) {
    loop=1
       }
});
public void mpsleep() {
Thread timer= new Thread(){
        public void run(){
            try{
                for (i= 0;i< maxCount;i++){
                    sleep(5000);//5 pause
                    if (loop==1){
                        break;
                    }
                }               
            }finally{
                runOnUiThread(new Runnable() {
                    public void run() {
                        mp.pause();
                        mp.seekTo(0);
                        loop=0;
                        bv.setImageResource(R.drawable.play);
                    }
                });
            }} 
```

单击停止按钮后，我们如何立即打破 for 循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:44:42.203

您编写的代码不是有效的 Java 语法。您不能在另一个方法声明中声明一个方法。

如果您想编写可以跳出的循环代码，您可以在线程之外声明一个`volatile`（[http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html) ）布尔变量，并检查它在线程内部的值。您的线程只会循环检查其值的变量，然后在它更改时中断。

也就是说，您似乎正在尝试编写使用`MediaPlayer`来播放音乐的代码。您应该为此使用[服务，而不是线程。](http://developer.android.com/reference/android/app/Service.html)

请参阅开发者指南：http: [//developer.android.com/guide/topics/media/mediaplayer.html#mpandservices](http://developer.android.com/guide/topics/media/mediaplayer.html#mpandservices)

# javascript - 使不可见的 div 在单击时变为可见不起作用

> ID：15319914
> 
> 赞同：0
> 
> 时间：2013-03-10T07:21:40.237
> 
> 标签：javascript, jquery, css, html

我已经尝试过，但似乎无法弄清楚如何调试它。在用户单击“立即兑换此优惠！”之前，该 div 应该是不可见的。按钮。“面板” div 应该出现在内容之上。如果用户没有在文本字段中输入任何内容，它应该变成红色。

```
<div id="centreblock">
            <h1>WOW! AMAZING!!!</h1>
            <img src="images/ipad.gif" width="100%" height="250">
            <h2>Congratulations! You won a free iPad! Enter your name, address, and phone number        to have it delivered now.</h2>
    <form action="">
    <label for="firstName">First Name: </label>
    <input type="text" size="12" id="firstName" name="firstName" maxlength="30">
    <br>
    <p id="output"></p>
    <input type="button" id="popup" value="REDEEM THIS OFFER NOW!">
    <br>
    </form>
    </div>
    <div id="panel">
        <h1 id="output-inside"></h1>
    </div>
    <script src="http//code.jquery.com/jquery-latest.min.js"></script>
    <script src="js/script.js"></script> 
```

## Javascript

```
//script.js
var firstName;

function newPanel() {
    $('#panel').show();
    $('#output-inside').text('Congrats ' + firstName + ', your iPad will be delivered to you in the next century') 
}

function panelCheck() {
    firstName = $('#firstName').val();
    if (firstName != '') {
        $('#firstName').removeClass('error');
        $('#output').text('');
        newPanel();
    } else {
        $('#firstName').addClass('error').focus();
        $('#output').text('We need your name');
    }
}
$(function() {
    $('#panel').hide();
    $('#popup').click(function() {
        panelCheck();
    });
    $('#firstName').keypress(function(e) {
        if (e.keyCode === 13) {
            panelCheck();
        }
    });
    $('#close-panel').click(function() {
        $('#panel').hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:47:42.063

你为什么不试试这样的东西？

```
<div id="centreblock">      
<form action="" id="panel2">
    <h1>WOW! AMAZING!!!</h1>
    <h2>Congratulations! You won a free iPad! Enter your name, address, and phone number to have it delivered now.</h2>
    <label for="firstName">First Name: </label>
    <input type="text" size="12" id="firstName" name="firstName" maxlength="30" />
    <br />
    <p id="output"></p>
    <input type="button" id="popup" value="REDEEM THIS OFFER NOW!" />
    <br />
</form>
<div id="panel">
    <h1 id="output-inside"></h1>
</div> 
```

```
function newPanel() {
$('#panel').show();
$('#output-inside').text('Congrats ' + firstName + ', your iPad will be delivered to you in the next century');
$('#panel2').hide();} 
```

这是一个工作演示[http://jsfiddle.net/FJrKq/3/](http://jsfiddle.net/FJrKq/3/)

我已经编辑了一些元素的顺序，并在面板显示后隐藏了其中一些元素。（我还删除了一些文本，以便更容易查看和快速编辑页面）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:19:25.070

将您的 JavaScript 代码写入：

```
$('document').ready(function(){
   // your code
}); 
```

在此范围之外编写您的函数。

添加

```
position:absolute 
```

到样式块中的“#panel”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T14:54:29.073

您应该在 jQuery 行的开头使用

```
$('document').ready(function(){
   // your code here

var firstName;

function newPanel() {
    $('#panel').show();
    $('#output-inside').text('Congrats ' + firstName + ', your iPad will be delivered to you in the next century') 
}

function panelCheck() {
    firstName = $('#firstName').val();
    if (firstName != '') {
        $('#firstName').removeClass('error');
        $('#output').text('');
        newPanel();
    } else {
        $('#firstName').addClass('error').focus();
        $('#output').text('We need your name');
    }
}
$(function() {
    $('#panel').hide();
    $('#popup').click(function() {
        panelCheck();
    });
    $('#firstName').keypress(function(e) {
        if (e.keyCode === 13) {
            panelCheck();
        }
    });
    $('#close-panel').click(function() {
        $('#panel').hide();
    });
});

}); 
```

# c# - 如何阻止滚动和 Web 工具栏出现？

> ID：15319920
> 
> 赞同：0
> 
> 时间：2013-03-10T07:22:07.177
> 
> 标签：c#, javascript, asp-classic

我已经在我的应用程序中实现了这段代码。如何更改它以防止它滚动和 URL 出现在浏览器中？

```
function openWindow() {
    window.open('default.aspx', null, 'height=200, width=400, status=yes, toolbar=no, menubar=no, location=no');
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:53:39.057

您无法隐藏地址栏，这是浏览器不再让您关闭的东西。

防止滚动可能最好通过您打开的任何内容中的 CSS 来处理。样式块中的以下内容

```
body {overflow: hidden} 
```

应该停止出现滚动条。

# objective-c - NSTableView 保存值而无需在失去焦点时按 Enter 键

> ID：15319922
> 
> 赞同：0
> 
> 时间：2013-03-10T07:22:25.650
> 
> 标签：objective-c, macos, cocoa, nstableview

![下图显示了我的应用](../Images/c04a264faba34b8531d34f585bb8f4ab.png)

“第一个数字”乘以“第二个数字”得到“小计”。按“总计”按钮给出“小计”的总和

如图所示，包含数字“5”的单元格处于可编辑状态。当我单击“总计”按钮时，会触发一种方法，该方法将“小计”列中的数字相加。我希望在执行加法之前自动保存处于可编辑状态的数字，以便正确答案为 156.00 而不是 136.00，如“总计”按钮下方的标签所示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:47:15.533

**回想一下 MVC 设计模式**

您`NSTableView`只是一个视图，您将模型（数组）显示在它上面。

因此，您更改了视图部分中的值，但您的模型没有更改。您需要更改模型，即您在表格视图中显示的数组或任何集合。

在按钮操作中只需调用`[tableView reloadData]`，然后`- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row` 将调用 tablview 的 : 委托方法，并且您的模型将得到更新。导致您输入的数据。

检查示例：

```
- (id)init
{
    self = [super init];
    if (self) {
        self.array=[NSMutableArray new];

        for (NSInteger i=0; i<30; i++) {
            [self.dict setObject:[NSString stringWithFormat:@"Obj %ld",i] forKey:[NSString stringWithFormat:@"%ld",i]];
            self.array[i]=@(i);
        }
    }
    return self;
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView{
    return self.array.count;
}

- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
    return self.array[row];
}

- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
    self.array[row]=object;

} 
```

你的答案在这里：

```
- (IBAction)button:(id)sender {

    [self.myTable reloadData];

    NSInteger row=[self.myTable selectedRow];
    NSLog(@"%@",[self.array objectAtIndex:row]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:37:38.740

您需要跟踪正在编辑的单元格（或者实际上是文本字段），当触摸“总计”按钮时，在该文本字段上调用“resignFirstResponder”，这也应该更新您的小计和您的数组或数组控制器，最终为您提供正确的总数。

跟踪正在编辑哪个单元格的一种方法是将所有可编辑单元格的文本字段设置为全部使用您的视图（或窗口）控制器作为委托，然后您将根据委托知道正在编辑哪个单元格方法[`control:textShouldBeginEditing:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSControlTextEditingDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSControlTextEditingDelegate/control%3atextShouldBeginEditing%3a)（正在编辑的文本字段通过“ `control`”参数传入...您可以在 ivar 或属性中跟踪它）。这就是你可以调用“ `resignFirstResponder`”的同一个单元格。

# c# - 如何将带有 Union 的 C++ 结构转换为 C#？

> ID：15319923
> 
> 赞同：0
> 
> 时间：2013-03-10T07:22:46.957
> 
> 标签：c#, c++-cli

我正在尝试将这段代码从 C++ 转换为 C# 或 CLI，但到目前为止没有任何效果，请有人帮助我。

```
ref struct token_t
{
    TokenTypes_t TokenType;     // enum class
    string       TokenString;    
     typedef  union
    {
        Keyword_t  KeywordID;  // enum class
        char       CharVal;   
        Operator_t OprID;    // enum type
    }; 
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:30:30.240

如果您没有在程序中使用数据别名这一事实，那么您最初可以简单地拥有额外的 3 个字段。

```
struct token_t
{
    TokenTypes_t TokenType;     // enum class
    string       TokenString;    
    Keyword_t  KeywordID;  // enum class
    char       CharVal;   
    Operator_t OprID;    // enum type
} 
```

最终的翻译取决于对联合的原始需求。通常结果是一个抽象基类（在这种情况下）具有 3 个派生类型，每个派生类型都包含原始联合的成员之一。如果该`TokenType`字段用于标记联合的当前有效成员，则该字段可能会被删除，因为每个实例的具体类型将很容易确定相同的信息。

# c# - 我应该如何将 MailMessages 保存到文件中？

> ID：15319925
> 
> 赞同：0
> 
> 时间：2013-03-10T07:23:18.947
> 
> 标签：c#, .net, wpf, winforms, xaml

我不确定我应该如何保存`MailMessages`到文件，以便以后可以从 WebBrowser 控件中读取它们并将它们显示在 WebBrowser 控件中。

我应该另存为哪种格式？

我正在使用 AE.NET Mail IMAP 库，这是我想出的代码。只是不确定我们应该如何保存消息正文。

```
int count = client.GetMessageCount("Inbox");

if (count > 0)
{
    AE.Net.Mail.MailMessage[] messages = client.GetMessages(0, 10, false, false);
    foreach (AE.Net.Mail.MailMessage message in messages)
    {
        collection.Add(new Message()
        {
            Id = message.MessageID,
            Sender = message.From.User,
            Subject = message.Subject,
            Content = message.Body
        });
    }

    list.ItemsSource = collection;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:49:22.463

您可以将邮件保存为 xml，并通过一点 xsl 转换，您可以轻松地显示邮件。例如：

邮件.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="email.xsl" ?>
<email>
    <id>1</id>
    <sender>Ali B</sender>
    <subject>Oops</subject>
    <content>What ever...</content>
</email> 
```

电子邮件.xsl

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <html>
            <body>
                <xsl:apply-templates/>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="id">
        <p>
            <xsl:value-of select="."/>
        </p>
    </xsl:template>

    <xsl:template match="sender">
        <p>
            <xsl:value-of select="."/>
        </p>
    </xsl:template>

    <xsl:template match="subject">
        <p>
            <xsl:value-of select="."/>
        </p>
    </xsl:template>

    <xsl:template match="content">
        <p>
            <xsl:value-of select="."/>
        </p>
    </xsl:template>

</xsl:stylesheet> 
```

# regex - 正则表达式提取特殊数字

> ID：15319926
> 
> 赞同：0
> 
> 时间：2013-03-10T07:23:21.293
> 
> 标签：regex

如何编写正则表达式来提取“整数+W”值

```
100W abc
60W cde
40W G9
60W CA2 
```

输出将是

100W 60W 40W 60W

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:25:19.400

```
[0-9]+W 
```

那应该这样做。这是一个细分，如果你想要的话：

[0-9]（匹配范围 0-9 [又名数字]）

+（要求 1 个或多个先前的匹配项 [一个或多个数字，又名整数]）

W（不言自明）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T07:33:51.983

`/\b\d+\a+/`仅匹配具有单位的数字，例如`100mA`，而不匹配其中包含数字的单词，例如`x4a`.

# php - 将所有 Wget 输出保存在 TextFile 中（附加）

> ID：15319932
> 
> 赞同：0
> 
> 时间：2013-03-10T07:25:19.233
> 
> 标签：php, wget

现在我有下面的代码，它获取 url 的内容并将值作为多个文件存储在文件夹**框中**`$url`。我需要的是我需要以附加样式存储单个文本文件中的所有输出。

```
<?php

for($i=0;$i<=10;$i++)
{

$url = "http://www.domain.com/file".$i,".php";
$get = exec("wget -P ./box/ $url > /dev/null 2>&1 &");
echo "done";

}
?> 
```

编辑：我需要后台的一切，所以 wget 是唯一的选择。有 1000 个 url 要执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:28:44.653

尝试[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)：

```
$get= file_get_contents("http://www.domain.com/file".$i,".php"); 
```

然后您可以根据需要解析内容。

# python - 如何允许通过套接字同时发送消息？

> ID：15319937
> 
> 赞同：0
> 
> 时间：2013-03-10T07:25:38.733
> 
> 标签：python, networking

我正在开发一款游戏（风险）。我已经完成了设置，因此不需要我完全重新设计网络的解决方案会更好。问题是我已经进入了主要的游戏玩法，我需要同时允许来自多个用户的消息。一般的想法是，当一个玩家轮到他们时，另一个玩家可以发送一个没收消息，并且仍然退出游戏而不会导致整个服务器崩溃。有没有办法做到这一点，可能使用线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:33:09.147

没有**理由**在一个连接上阻止您的主线程。
当建立连接时，您需要一个侦听线程，后台线程处理与客户端的通信。

您确实需要维护一个防弹**状态机**，以便客户端知道他们可以在任何给定状态下发送的适当消息，并且服务器需要知道在任何给定状态下可以处理哪些有效消息。搜索stackoverflow，你会发现很多例子，比如： [Sockets example](https://stackoverflow.com/questions/5742577/c-sharp-sockets-handling-multiple-clients?rq=1)

# ruby-on-rails - 输出到终端而不是 html doc

> ID：15319940
> 
> 赞同：0
> 
> 时间：2013-03-10T07:26:14.800
> 
> 标签：ruby-on-rails, ruby, linux

好的，所以我昨天刚拿起 ruby​​。我制作的应用程序跟踪推文并将它们存储在一个数组中，应该输出到网页，但我不知道正确的语法

输出只是在终端中运行。html

```
<h1>Posts#index</h1>
<p>Find me in app/views/posts/index.html.erb</p>
<%= @a %> 
```

红宝石

```
class PostsController < ApplicationController
  TWITTER_COMSUMER_KEY = ""
  TWITTER_CONSUMER_SECRET = ""
  TWITTER_OATH_TOKEN = ""
  TWITTER_OATH_TOKEN_SECRET = ""
  def index
    @a = Array.new(500)

    TweetStream.configure do |config|
       config.consumer_key = TWITTER_COMSUMER_KEY
       config.consumer_secret = TWITTER_CONSUMER_SECRET
       config.oauth_token = TWITTER_OATH_TOKEN
       config.oauth_token_secret = TWITTER_OATH_TOKEN_SECRET
     end
     i = 0
     TweetStream.track('weed') do |status|

     temp = status.text

     if(temp.include? "http")
          a[i] = status.text
          puts "#{status.text}"
          i = i+1
          end
       end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:36:03.500

我会做很多不同的事情，但是使用您的代码：

改变`a[i]`你的观点`@a[i]`...

你可以这样做：

```
<% @a.each do |tweet| %>
  <div class="tweet">
    <%= tweet %>
  </div>
<% end %> 
```

并适当地设计风格`<div>`。或者使用`<ul>`，`<li>`如果它更适合你。

# html - HTML5 地理定位 API 是如何在浏览器中实现的？

> ID：15319941
> 
> 赞同：0
> 
> 时间：2013-03-10T07:26:29.153
> 
> 标签：html, geolocation, ip-geolocation, w3c-geolocation

每个浏览器都以自己的方式实现地理定位 API 吗？或者是否有一些所有浏览器都可以做到的标准方式？

他们是怎么做到的？

他们什么时候无法进行地理定位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:49:45.363

HTML5 规范简单地说明了浏览器需要实现什么才能将自己标记为符合 HTML5 的浏览器。地理位置是该[规范](http://www.w3.org/TR/geolocation-API/#coordinates_interface)的一部分。

所以是的，每个 HTML 5 兼容浏览器都以自己的方式实现它。

地理位置 api 需要一个提供者来解析用户的位置。位置可以通过多种因素的组合使用来确定。

> 确定您所在位置的方法不止一种——您的 IP 地址、您的无线网络连接、您的手机正在与哪个蜂窝塔通话，或者根据天空中的卫星发送的信息计算纬度和经度的专用 GPS 硬件。（[链接](http://diveintohtml5.info/geolocation.html)）

然而，所有这些因素在许多情况下仍然可能效率低下。

例如：用户拒绝位置信息

或仅限于仅由 IP 地址解析的普通 PC。由于许多 ISP 使用动态 ip，并且提供程序的 ip 到位置表可能不会随此更改而更新。

# javascript - 防止机器人表单提交

> ID：15319942
> 
> 赞同：32
> 
> 时间：2013-03-10T07:26:34.313
> 
> 标签：javascript, jquery, forms, security, spam

我试图找出一种防止机器人提交我的表单的好方法，同时保持过程简单。我已经阅读了几个很棒的想法，但我考虑在提交表单时添加一个确认选项。用户单击提交并弹出一个需要用户交互的 Javascript 确认提示。

这会阻止机器人还是机器人可以很容易地解决这个问题？下面是演示我的想法的代码和 JSFIddle：

[JSFIDDLE](http://jsfiddle.net/Ztq83/)

```
$('button').click(function () {
  if(Confirm()) {
    alert('Form submitted');
    /* perform a $.post() to php */
  }
  else {
    alert('Form not submitted');
  }
});

function Confirm() {
  var _question = confirm('Are you sure about this?');
  var _response = (_question) ? true : false;
  return _response;
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-10T07:51:46.783

这是很多人都遇到过的一个问题。正如 user166390 在评论中指出的那样，机器人可以绕过 javascript 直接向服务器提交信息（参见[cURL](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)和[Postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)等简单实用程序）。现在，许多机器人都能够使用 javascript 并与之交互。Hari krishnan 指出了验证[码](http://en.wikipedia.org/wiki/CAPTCHA)的使用，其中最流行和最成功的（据我所知）是[reCaptcha](http://www.google.com/recaptcha/captcha)。但是验证码有其[问题](http://www.phpriot.com/articles/anti-spam-2/4)，并且被万维网纲要所劝阻，主要是因为[无效和无法访问](http://www.w3.org/TR/turingtest/)。

为了避免我们忘记，攻击者总是可以部署人类智能来击败验证码。有攻击者付钱让人们破解验证码以发送垃圾邮件的故事，而工人却没有意识到他们正在参与非法活动。亚马逊提供了一项名为[Mechanical Turk](https://www.mturk.com/mturk/welcome)的服务来解决此类问题。如果您将他们的服务用于恶意目的，亚马逊会强烈反对，它的缺点是需要花钱和创建书面记录。然而，有更多的*erhm*提供者不会持有这样的反对意见。

## 所以，你可以做什么？

我最喜欢的机制是隐藏的复选框。让它有一个标签，比如“您同意使用我们服务的条款和条件吗？” 甚至可能带有一些严肃的术语的链接。但是您将其默认为未选中并通过 css 将其隐藏：将其放置在页面之外，将其放在零高度或零宽度的容器中，在其顶部放置一个具有更高 z-index 的 div。在这里滚动您自己的机制并发挥创造力。

秘密是没有人会看到复选框，但*大多数*机器人通过检查页面并直接操作它来填写表格，而不是通过实际视觉。因此，任何带有该复选框值集的表单都可以让您知道它不是由人填写的。这种技术称为[机器人陷阱](https://www.google.com/search?q=bot%20trap)。自动表格填充机器人类型的经验法则是，如果人类必须通过调解来克服单个站点，那么他们就失去了通过传播他们的网站所能赚到的所有钱（以他们的时间形式）。垃圾邮件广告。

（以前的经验法则假设您正在保护论坛或评论表单。如果实际资金或个人信息在线，那么您需要的安全性不仅仅是一种启发式方法。这仍然是[通过默默无闻的安全性](http://en.wikipedia.org/wiki/Security_through_obscurity)，事实证明默默无闻足以保护您免受随意的脚本攻击。**不要自欺欺人地认为这可以保护您的网站免受所有攻击。**）

另一半的秘密就是保守着。如果选中该框，请勿以任何方式更改响应。显示相同的确认，谢谢，或者之后的任何消息或页面。这将防止机器人知道它已被拒绝。

我也是计时方法的粉丝。您必须完全在服务器端实现它。跟踪以持久方式（基本上是会话）提供页面的时间，并将其与表单提交的时间进行比较。这可以防止伪造甚至让机器人知道它正在计时 - 如果您将服务时间作为表单或javascript，然后您就让他们知道您正在使用它们，从而邀请了一种更复杂的方法。

同样，在提供相同的感谢页面时，只需默默地丢弃请求（或者如果您想报复，则在响应垃圾邮件表单时引入延迟 - 这可能无法阻止它们压倒您的服务器，甚至可能让它们不堪重负通过保持更多连接打开更长的时间，您可以更快。此时，您需要硬件解决方案，负载平衡器设置上的防火墙）。

有很多关于延迟服务器响应以减缓攻击者的资源，通常以暴力密码尝试的形式。[这个 IT 安全问题](https://security.stackexchange.com/questions/10305/with-which-algorithm-i-can-prevent-a-brute-force-on-a-login)看起来是一个很好的起点。

## 关于 Captcha 的更新

关于计算机视觉和表单提交的主题，我一直在考虑更新这个问题。最近出现的一篇文章将我引向了计算机视觉爱好者[Steve Hickson 的这篇博客文章。](http://stevenhickson.blogspot.ca/2014/01/hacking-snapchats-people-verification.html)Snapchat（显然是某个社交媒体平台？我从来没有用过，感觉每天都变老了……）推出了一个新的类似验证码的系统，你必须识别包含鬼魂的图片（真的是卡通片）。Steve 证明这并不能验证提交者是否蹲下，因为在典型的方式中，计算机在识别这种简单类型的图像方面会更好更快。

不难想象将类似的方法扩展到其他 Captcha 类型。我进行了搜索，发现这些链接也很有趣：

[reCaptcha 坏了吗？](https://stackoverflow.com/questions/448963/has-recaptcha-been-cracked-hacked-ocrd-defeated-broken)
[实用的、非基于图像的验证码](https://stackoverflow.com/questions/8472/practical-non-image-based-captcha-approaches?lq=1)
[如果我们知道验证码可以被击败，为什么我们还在使用它们？](https://security.stackexchange.com/questions/26656)
[使用 CAPTCHA 图像是否有真正的替代方法？](https://security.stackexchange.com/questions/29571)
[三名黑客如何让谷歌的 reCaptcha 崩溃](http://arstechnica.com/security/2012/05/google-recaptcha-brought-to-its-knees/)——特别有趣，因为它是关于音频验证码的。

[哦，如果没有强制性的XKCD 漫画](http://xkcd.com/233/)，我们几乎是不完整的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T00:35:46.217

今天我成功地阻止了我的表单的持续垃圾邮件。当然，这种方法可能并不总是有效，但它很简单，并且在这种特殊情况下效果很好。

我做了以下事情：

*   我将表单的 action 属性设置为*mustusejavascript.asp*，它只显示一条消息，表明提交无效并且访问者必须启用 javascript。

*   我将表单的 onsubmit 属性设置为一个 javascript 函数，该函数将表单的 action 属性设置为真正的接收页面，例如*receivemessage.asp*

有问题的机器人显然不处理 javascript，所以我不再看到任何垃圾邮件。对于人类（打开了javascript）来说，它完全没有任何不便或额外的交互。如果访问者关闭了 javascript，他会在提交时收到明确的消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T07:34:04.683

您的代码不会阻止机器人提交，但这不是因为您的代码如何。`action`那里的典型机器人更有可能对 URL（属性）进行外部/自动 POST 请求。典型的机器人不会呈现 HTML、CSS 或 JavaScript。他们正在阅读 HTML 并对其进行操作，因此不会执行任何客户端逻辑。例如，卷曲 URL 将获得标记，而无需加载或评估任何 JavaScript。可以创建一个简单的脚本来查找`<form>`然后使用匹配的键对该 URL 执行 CURL POST。

考虑到这一点，防止机器人提交的服务器端解决方案是必要的。验证码 + CSRF 就足够了。（[http://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-05T18:16:54.940

不，您是否仍然认为 Captcha 或 ReCap 是安全的？

Bots nowDays 很聪明，可以使用 OCR 工具轻松识别图像上的字母（搜索即可理解）

我说保护自己免受自动表单提交的最佳方法是每次显示提交表单时添加一个隐藏的哈希生成（并存储在当前客户端的服务器上的会话中）！

当 Bot 或任何 Zombie 提交您检查给定哈希是否等于会话存储哈希的表单时，这就是全部；）

了解更多信息 阅读有关**CSRF**的信息！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-10T07:32:22.360

您可以简单地添加`captcha`到您的表单中。由于验证码将在`different`并且也在 中`images`，因此机器人不能那样`decode`做。这是所有网站上使用最广泛的安全措施之一...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-10T07:36:09.750

你不能用 javascript 实现你的目标。因为客户端可以解析您的 javascript 并绕过您的方法。您必须通过验证码在服务器端进行验证。主要思想是您在服务器端存储一个秘密，并使用服务器端的秘密验证从客户端提交的表单。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-10T07:35:51.520

您可以测量注册时间，无需在文本框中填写永恒！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-05T00:27:02.207

我遇到了阻止编程输入注册的表单输入验证。

我最初的策略是抓住元素并将其设置为我想要的选项。我触发了对输入字段的关注并模拟了对每个元素的单击以显示下拉菜单，然后设置触发事件以更改值的值。但是当我尝试单击保存未注册为已更改的输入时。

```
 ;failed automation attempt because window doesnt register changes.
    ;$iUse = _IEGetObjById($nIE,"InternalUseOnly_id")
    ;_IEAction($iUse,"focus")        
    ;_IEAction($iUse,"click")
    ;_IEFormElementOptionSelect($iUse,1,1,"byIndex")
    ;$iEdit = _IEGetObjById($nIE,"canEdit_id")
    ;_IEAction($iEdit,"focus")
    ;_IEAction($iEdit,"click")
    ;_IEFormElementOptionSelect($iEdit,1,1,"byIndex")
    ;$iTalent = _IEGetObjById($nIE,"TalentReleaseFile_id")
    ;_IEAction($iTalent,"focus")
    ;_IEAction($iTalent,"click")
    ;_IEFormElementOptionSelect($iTalent,2,1,"byIndex")
    ;Sleep(1000)
    ;_IEAction(_IETagNameGetCollection($nIE,"button",1),"click") 
```

这让我重新思考如何通过直接操作鼠标的动作来模拟更多的鼠标类型行为选择来输入输入。不用说，我不必手动一张一张地上传图片来更新公司的产品图片。在字母前使用 Windows 编号将我的脚本放在目录末尾，当弹出图像上传窗口时，我必须使用主动可访问性从窗口获取 syslistview 并选择第二个元素，这是一张图片，第一个元素是一个文件夹. 或 findfirstfile 中的第一个元素仅返回文件调用。我使用该名称在项目数据库中搜索项目，然后访问这些项目并在上传图像后更新一些属性，然后我将文件从该文件夹移动到另一个文件夹，因此它不会

只是分享一个卑微的数据输入人员如何节省时间，并与所有这些邪恶的表单验证检查作斗争。

问候。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-12T15:02:41.937

这是一个非常短的版本，自从 4 年前在我的网站上实施以来一直没有失败，随着时间的推移会根据需要增加差异。这可以使用您需要的所有变量和 if else 语句构建

```
 function spamChk() {
    var ent1 = document.MyForm.Email.value
    var str1 = ent1.toLowerCase();
    if (str1.includes("noreply")) {
    document.MyForm.reset();
    }

<input type="text" name="Email" oninput="spamChk()"> 
```

实际上，我今天来这里是为了了解如何将特定的垃圾邮件机器人 IP 地址重定向到 HELL .. 只是为了好玩

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-18T18:18:51.973

伟大的想法。

不久前，我删除了重新验证码，将我的contactform.html 转换为contactform.asp 并将其添加到顶部（显然，中间有一些代码来完整填写一些功能，如sendmail、验证表格填写完整等）。

```
 <%
     if Request.Form("Text") = 8 then
        dothis
      else
        send them to google.com
     end if
   %> 
```

在表单上，​​我粘贴了一个带有名称 text 的基本文本字段，因此它看起来就像根本没有指定其用途的任何内容，然后我将一些文本粘贴在上方的 2 行红色中，说明在下面的框中输入什么 2 + 6 =提交您的请求。

# php - 调整图像大小并显示而不保存

> ID：15319944
> 
> 赞同：4
> 
> 时间：2013-03-10T07:27:17.477
> 
> 标签：php, codeigniter, gd

我已经建立了一个图片库并“按原样”保存了图片，没有裁剪它。我想在控制器中加载图像时动态调整图像大小，因此当我在浏览器中加载控制器时，它会显示调整大小为我想要的图像。我已将方法添加到`MY_Loader`，这是代码。

```
function show_image($image, $width, $height) {
    $this->helper('file');
    $image_content = read_file($image);

    //resize image
    $image = imagecreatefromjpeg($image);
    $thumbImage = imagecreatetruecolor(50, 50);
    imagecopyresized($thumbImage, $image, 0, 0, 0, 0, 50, 50, $width, $height);
    imagejpeg($thumbImage,"",85);
    imagedestroy($image);
    imagedestroy($thumbImage);

    header('Content-Length: '.strlen($image_content)); // sends filesize header
    header('Content-Type: '. get_mime_by_extension($image)); // send mime-type header
    header('Content-Disposition: inline; filename="'.basename($image).'";'); // sends filename header
    exit($image_content); // reads and outputs the file onto the output buffer
} 
```

从这段代码中，我收到了很多错误，包括标题错误。我究竟做错了什么？

错误：（如果有用）

```
Message: imagejpeg(): Filename cannot be empty

Message: Cannot modify header information - headers already sent by (output started at /Volumes/www/vhosts/ci/system/core/Exceptions.php:185)

Message: strrchr() expects parameter 1 to be string, resource given

Message: Cannot modify header information - headers already sent by (output started at /Volumes/www/vhosts/ci/system/core/Exceptions.php:185)

Message: basename() expects parameter 1 to be string, resource given

Message: Cannot modify header information - headers already sent by (output started at /Volumes/www/vhosts/ci/system/core/Exceptions.php:185) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T07:54:49.770

好的......所以......第一件事是，你不想保存图像，只是显示所以你应该使用只有一个参数的 imagejpeg。

```
 function show_image($image, $width, $height) {
        //$this->helper('file');                   why need this?
        //$image_content = read_file($image);      We does not want to use this as output.

        //resize image           
        $image = imagecreatefromjpeg($image);
        $thumbImage = imagecreatetruecolor(50, 50);
        imagecopyresized($thumbImage, $image, 0, 0, 0, 0, 50, 50, $width, $height);
        imagedestroy($image);
        //imagedestroy($thumbImage); do not destroy before display :)
        ob_end_clean();  // clean the output buffer ... if turned on.
        header('Content-Type: image/jpeg');  
        imagejpeg($thumbImage); //you does not want to save.. just display
        imagedestroy($thumbImage); //but not needed, cause the script exit in next line and free the used memory
        exit;
  } 
```

第一轮我推荐这个改变。请写信给我，错误会发生什么变化......并推荐阅读： http: [//php.net/manual/en/function.imagecopyresized.php](http://php.net/manual/en/function.imagecopyresized.php)

和这个 ：

```
 Message: Cannot modify header information - headers already sent by (output started at /Volumes/www/vhosts/ci/system/core/Exceptions.php:185) 
```

说我的异常 php 有问题...请检查，是文件开头的 BOM 字符...还是空格、.. 之后或 php 标记之前的换行符.. 某些代码编辑器放置了这些 irritatign 字符在php代码中...

并且应该像这样检查任何其他文件（出现此错误消息）。有时在 php 标记之前会留下一些字符......并且如果在 web 服务读取文件时关闭了输出缓冲，则使用默认标题立即发送到输出。（最近的 html/文本标题）。（如果已经发送了其他标头，则无法发送某些标头。例如，如果发送了 html/text，则无法发送 image/jpeg）

如果您不想为此工作。我不知道你的系统是什么样子的。我假设 index.php 是您的引导程序，请更改它。

```
 <?php
       ob_start();
       .... 
       ob_end_flush();
   ?> 
```

但更好的解决方案是检查您的 php 代码，并在 php 标记之前和之后删除行/字符。

# github - 如何在公共 github 存储库上创建后服务挂钩？

> ID：15319946
> 
> 赞同：7
> 
> 时间：2013-03-10T07:27:26.367
> 
> 标签：github, websub

我为自己的存储库创建钩子没有问题，但是，我还没有找到一种方法来为公共存储库创建这样的钩子。

有没有可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:10:31.593

是的，您是对的 - 似乎无法订阅您不拥有的存储库的事件（使用 PSHB），或为此类存储库创建挂钩。

也许这将是一个很好的功能请求发送到 support@github.com。

# java - 使用 JNI 获取运行时进程的 PID

> ID：15319947
> 
> 赞同：1
> 
> 时间：2013-03-10T07:27:32.800
> 
> 标签：java, runtime, pid

我需要获取通过 Java 的 Runtime.getRuntime().exec() 命令启动的进程的 PID。

我知道如何在 JNA 中做到这一点。但我真的很想用 JNI 来做这件事并创建我自己的库。有谁知道该怎么做？

```
import java.lang.reflect.Field;

class GetPid
{
    public native int getPid( long procHandle);

    static
    {
        System.loadLibrary("getpid");
    }

    public static void main(String args[])
    {
        try {

          Process process = Runtime.getRuntime().exec( "calc");
          Field f = process.getClass().getDeclaredField( "handle");
          f.setAccessible( true);
          long procHandle = f.getLong( process);

          System.out.println( "prochandle: " + procHandle + ", pid: " + new GetPid().getPid( procHandle));

        } catch( Exception e) {
          e.printStackTrace();
        }

    }
} 
```

但是C部分应该是什么样子？

```
JNIEXPORT jint JNICALL
Java_GetPid_getPid(JNIEnv *env, jobject obj, jlong handle)
{
    ...

    return ???;
} 
```

如果有人可以帮助我，那就太好了。我主要寻求 Windows 解决方案，因为您可以从 Process 字段获取 Linux 的 PID，但我不介意是否有人可以向我展示如何在 Linux / Solaris 中执行此操作。

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:52:30.377

知道了。它就像使用一样简单：

```
#define WINVER 0x0501
#define _WIN32_WINNT 0x0501 
```

和

```
JNIEXPORT jint JNICALL
Java_GetPid_getPid(JNIEnv *env, jobject obj, jlong handle)
{
  return GetProcessId((HANDLE) handle);
} 
```

感谢所有试图提供帮助的人:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:26:13.273

我发现这个页面可能有用 - [http://golesny.de/p/code/javagetpid](http://golesny.de/p/code/javagetpid)。它提供了用于在各种平台上提取外部进程 PID 的代码......以几种方式。

总之：

*   您可以使用`RuntimeMXBean`列出所有正在运行的进程，然后使用模式匹配来挑选一个与您要查找其 PID 的进程的名称相匹配的进程。（但问题是进程名称不是唯一的......）

*   在 Linux / UNIX 上，您可以使用反射从 XxxProcess 对象中找出 PID。

*   在 Windows 上，您必须使用 JNA 来获取 PID。执行此操作的一些代码位于链接页面上。

* * *

如果我这样做，我想我会采取不同的方法。我会看看是否有可能让外部命令（或包装器/启动器）找出 PID 是什么，然后将其写入父 JVM 可以读取的位置。

# php - php mysql 数据库排序方式

> ID：15319951
> 
> 赞同：0
> 
> 时间：2013-03-10T07:28:00.383
> 
> 标签：php, mysql, database

```
$query = mysql_query("SELECT `code`, `file` FROM `files` WHERE id >= '$idimg' ORDER BY id ASC LIMIT 1, 8");
while ($result = mysql_fetch_assoc($query)) {
    if (strlen($result['title']) < 12) {
        echo '<div id="recomimage5"><div id="linkstyle"><strong><a href="http://localhost/edu/1111111111111/download.php?code='. $result['code'] . ' "><img src="files/thumbs/' . $result['code'] . '/' . $result['file'] . '" alt="' . $result['title'] . '"></a></strong></div></div>';
    }
    else {
        echo '<div id="recomimage5"><div id="linkstyle"><strong><a href="http://localhost/edu/1111111111111/download.php?code='. $result['code'] . ' "><img src="files/thumbs/' . $result['code'] . '/' . $result['file'] . '" alt="' . $result['title'] . '"></a></strong></div></div>';   
    }
} 
```

我从 MySQL 数据库中订购了八张图像。

结果这个查询：

例如，我的 id 图片是“5”

```
Results now is: '6' '7' '8' '9' '10' '11' '12' '13' // id numbers images 
```

但我想要这样的结果 - 例如我重新加载页面中的图像是“5”

```
Result must be: '1' '2' '3' '4' '5' '6' '7' '8'     // id numbers images 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:20:15.027

请参考[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html) chnage WHERE id >= $idimg - 4 和限制 0,8 因为初始行是 0 而不是 1

# ruby-on-rails - 如果我使用 unicorn 和 nginx 作为应用程序服务器，Rails i18n 不起作用

> ID：15319958
> 
> 赞同：1
> 
> 时间：2013-03-10T07:28:47.620
> 
> 标签：ruby-on-rails, internationalization, nginx, unicorn

**当我使用默认的WEBrick**服务器 运行我的应用程序并从子域设置语言环境时，i18n 可以完美地用于“en”和“ja”。
但是，当我使用**Nginx 和 Unicorn**运行我的应用程序时，i18n 不像在 WEBrick 中那样工作。

我写下面的代码来设置子域的语言环境；

```
 def set_locale                                          
    I18n.locale = params[:locale] || I18n.default_locale  
     if request.host.starts_with? "en."                    
      I18n.locale = "en"                                  
     else                                                  
      I18n.locale = "ja"                                  
     end                                                   
 end 
```

我在这里想念什么？
我对 unicorn 和 nginx 的设置几乎是默认设置，除了我在 nginx.conf 中将应用名称或 proxy_pass 更改为 app。
谁能教我如何使 i18n 工作？我整天都在堆栈...
请原谅我糟糕的英语技能...
提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:07:05.290

尝试将以下行添加到您的配置中`location @app-name { }`或配置上方的Nginx 配置中`proxy_pass`：

```
proxy_set_header Host $http_host; 
```

如果您的 Nginx 配置中缺少该设置， Rails 将`proxy_pass`作为主机发送该设置。

# c++ - C ++的精确十进制数据类型？

> ID：15319967
> 
> 赞同：20
> 
> 时间：2013-03-10T07:30:16.573
> 
> 标签：c++, c, types, decimal, precision

PHP 有一个十进制类型，它没有浮点数和双精度数的“不准确性”，因此 2.5 + 2.5 = 5 而不是 4.999999999978325 或类似的东西。

所以我想知道C或C++是否有这样的数据类型实现？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-10T08:46:32.050

[Boost.Multiprecision](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/index.html)库有一个名为的基于十进制的浮点模板类[`cpp_dec_float`](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/boost_multiprecision/tut/floats/cpp_dec_float.html)，您可以为其指定任何所需的精度。

```
#include <iostream>
#include <iomanip>
#include <boost/multiprecision/cpp_dec_float.hpp>

int main()
{
    namespace mp = boost::multiprecision;
    // here I'm using a predefined type that stores 100 digits,
    // but you can create custom types very easily with any level
    // of precision you want.
    typedef mp::cpp_dec_float_100 decimal;

    decimal tiny("0.0000000000000000000000000000000000000000000001");
    decimal huge("100000000000000000000000000000000000000000000000");
    decimal a = tiny;         

    while (a != huge)
    {
        std::cout.precision(100);
        std::cout << std::fixed << a << '\n';
        a *= 10;
    }    
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T08:26:32.683

是的：

C++ 有任意精度库。
一个很好的例子是[GNU 多精度算术库](http://gmplib.org/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-22T18:14:52.773

如果您正在寻找支持货币/货币的数据类型，请尝试以下操作： [https ://github.com/vpiotr/decimal_for_cpp](https://github.com/vpiotr/decimal_for_cpp)

（这是仅标题的解决方案）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-10T08:19:57.817

总会有一些精确度。在任何数字表示的任何计算机上，总会有可以准确表示的数字，而其他数字则不能。

*   计算机使用 base 2 系统。0.5 (2^-1)、0.125 (2^-3)、0.325 (2^-2 + 2^-3) 等数字将被准确表示（上述情况为 0.1、0.001、0.011）。

*   在以 3 为底的系统中，这些数字不能准确表示（一半是 0.111111...），但其他数字可以是准确的（例如 2/3 是 0.2）

*   即使在以 10 为基础的人类系统中，也存在无法准确表示的数字，例如 1/3。

*   您可以使用有理数表示，以上所有内容都是准确的（1/2、1/3、3/8 等），但总会有一些无理数。您实际上还受到此表示的整数大小的限制。

*   对于每个不可表示的数字，您可以扩展表示以明确包含它。（例如比较有理数和表示`a/b + c/d*sqrt(2)`），但总会有更多的数字仍然无法准确表示。有一个数学证明是这样说的。

所以 - 让我问你这个：你到底需要什么？也许对基于十进制的数字进行精确计算，例如在某些货币计算中？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-10T08:01:14.207

你问的是反物理。

phyton（以及 C++）所做的就是通过在打印时舍入结果来消除不准确性，方法是减少有效数字的数量：

```
double x = 2.5;
x += 2.5;
std::cout << x << std::endl; 
```

只是使 x 以 6 位十进制数字精度打印（而 x 本身超过 12），并将四舍五入为 5，消除不精确。

替代方案根本不使用浮点，并实现仅执行整数“缩放”算术的数据类型： `25/10 + 25/10 = 50/10;`

但是请注意，这将减少每个整数类型表示的上限。精度（和准确度）的提高将导致更快地到达溢出。

有理算术也是可能的（每个数字由“分子”和“分母”表示），除法没有精度损失，（事实上，除非精确，否则不会这样做）但同样，随着数字的增加值操作的增长（数字越不“理性”，分子和分母越大）溢出的风险就越大。

换句话说，使用有限数量的比特这一事实（无论如何组织）总是会导致您必须在小数字方面付出损失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T07:45:18.607

我想你说的是 PHP 中的二进制计算器。不，C 运行时或 STL 中没有。但如果你愿意，你可以自己写。

这是使用 Facebook 的 HipHop for PHP 编译的 C++ 版本的 BCMath：http: [//fossies.org/dox/facebook-hiphop-php-cf9b612/dir_2abbe3fda61b755422f6c6bae0a5444a.html](http://fossies.org/dox/facebook-hiphop-php-cf9b612/dir_2abbe3fda61b755422f6c6bae0a5444a.html)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-03-10T07:33:10.177

作为一种更高级别的语言`PHP`只会切断你所谓的“不准确”，但它肯定存在。在 C/C++ 中，您可以通过将结果转换为整数类型来实现类似的效果。

# java - 如何使用 Twitter4j 显示推文

> ID：15319971
> 
> 赞同：0
> 
> 时间：2013-03-10T07:30:49.663
> 
> 标签：java, eclipse, twitter4j, tweets

我已经按照本教程[http://www.javacodegeeks.com/2012/03/twitter-api-on-your-java-application.html](http://www.javacodegeeks.com/2012/03/twitter-api-on-your-java-application.html)做了同样的事情。但我收到一个错误，如下所示。我错过了什么吗？我应该在任何文件中设置一些权限吗？我已经检查了很多地方，但仍然无法解决这个问题。请帮忙

```
Exception in thread "main" 401:Authentication credentials   
(https://dev.twitter.com/docs/auth) were missing or incorrect. Ensure that you have set 
valid conumer key/secret, access token/secret, and the system clock in in sync.
error - Not authorized
request - /1/statuses/user_timeline.json?     
TwitterException{exceptionCode=[ced778ef-115a04e4], statusCode=401, retryAfter=-1,   
rateLimitStatus=RateLimitStatusJSONImpl{remainingHits=145, hourlyLimit=150, 
resetTimeInSeconds=1362901, secondsUntilReset=1235, resetTime=Sun Mar 10 13:15:51 IST  
2013}, featureSpecificRateLimitStatus=null, version=2.2.5}
at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:185)
at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:85)
at twitter4j.TwitterImpl.get(TwitterImpl.java:1895)
at twitter4j.TwitterImpl.getUserTimeline(TwitterImpl.java:254)
at com.jdwb.twitterapi.tweet.main(tweet.java:33) 
```

* * *

```
 public class tweet {
     public static void main(String[] args) throws TwitterException {
         Twitter twitter = new TwitterFactory().getInstance();

         ResponseList < Status > a = twitter.getUserTimeline(new Paging(1, 5));
         for (Status b: a) {
             System.out.println(b.getText());
         }
     }
 }

-------------------------Properties file-------------

debug=true
oauth.consumerKey=***************
oauth.consumerSecret=***********
oauth.accessToken=*******************
oauth.accessTokenSecret=*********************** 
```

* * *

```
[Sun Mar 10 14:41:26 IST 2013]status: 401 Unauthorized
[Sun Mar 10 14:41:26 IST 2013]x-ratelimit-remaining: 143
[Sun Mar 10 14:41:26 IST 2013]content-encoding: gzip
[Sun Mar 10 14:41:26 IST 2013]date: Sun, 10 Mar 2013 09:11:26 GMT
[Sun Mar 10 14:41:26 IST 2013]x-ratelimit-reset: 1362908664
[Sun Mar 10 14:41:26 IST 2013]x-transaction: 58f6c286bb1aa6de
[Sun Mar 10 14:41:26 IST 2013]pragma: no-cache
[Sun Mar 10 14:41:26 IST 2013]cache-control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
[Sun Mar 10 14:41:26 IST 2013]{"request":"\/1\/statuses\/user_timeline.json?include_rts=true&include_entities=true&include_my_retweet=1&count=5&page=1","error":"Not authorized"}

 Exception in thread "main" 401:Authentication credentials   
 (https://dev.twitter.com/docs/auth) were missing or incorrect. Ensure that you have 
 set valid conumer key/secret, access token/secret, and the system clock in in sync.
 error - Not authorized 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:12:19.220

我认为您没有正确设置授权

在[这里](http://twitter4j.org/en/configuration.html#fileconfiguration)查看如何设置属性文件。

您需要注册[twitter dev](https://dev.twitter.com/)以获取您的 API 密钥，以便您可以填写所需的信息。

# java - Java 正弦和余弦

> ID：15319972
> 
> 赞同：0
> 
> 时间：2013-03-10T07:30:57.947
> 
> 标签：java, graph, trigonometry

您好，我正在尝试创建一个 Java 程序，该程序允许您绘制方程，并且到目前为止它运行良好，直到我希望它绘制余弦和正弦函数。当正弦和余弦返回双倍但 drawLine 只接受整数时，我对如何做到这一点感到困惑。我是java新手，所以这可能很容易，但如果你能提供帮助，我将不胜感激。

这是我的代码：

```
import java.util.Scanner;
import javax.swing.JFrame;
import javax.swing.*;
import java.awt.*;
import java.lang.Math;
import java.awt.geom.*;

class PlotGraph extends JFrame{

public void paintComponent(Graphics g){
    Graphics2D g2 = (Graphics2D) g;

    g.drawLine(50, 300, 550, 300); //x axis
    g.drawLine(300, 550, 300, 50); //y axis
    //Orignin x = 300 y = 300

    double xmin, xmax;
    double y;
    xmin =(0);
    xmax = 100;
    double x = xmin;

    double form = Math.cos(x);

    double last_y = 300-(form);

    for (x = xmin+1; x<=xmax; x++){
    double newForm = Math.cos(x);
    y = 300-(newForm);
    g2.draw(new Line2D.Double(x-1+(300), last_y, x+300, y));
    last_y = y;

    }

}

public static void main(String [] args) {

    PlotGraph graph = new PlotGraph();
    graph.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    graph.setSize(600, 600);
    graph.setVisible(true); 
    graph.setTitle("PlotGraph");

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:37:32.177

由于 Math.cos() 返回一个介于 -1 和 1 之间的值，因此转换为 int 将只产生 3 个值 -1、0 和 1，并且几乎总是为 0。

你想要做的是将双精度乘以一个大常数来创建一个整数范围：

```
 y = 300-(int)(300d * newForm); 
```

注意 300 之后的“d”：这使得 300 成为双倍，如果乘法也加倍，则结果会加倍，这保持了精细的粒度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:36:41.727

使用 Line2D.Double 对象，一个 Graphics2D Graphics 对象，并让 Graphics2D 对象使用其`draw(...)`方法绘制形状。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T07:34:33.623

尝试将 double 转换为 int。

```
int y = 300 - (int) (Math.cos(x) * scaleFactor); 
```

正如 Aiias 所说：cos 只会返回 -1 和 1 之间的值。因此，请确保将其乘以一个常数因子，否则在转换后您将丢失该值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T07:35:30.220

正确缩放后，您可以尝试以下任一方法：

*   类型转换`double`为`int`： `int i = (int)d;`

*   四舍五入，它返回`long`必须通过类型转换为`int`：`int i = (int)Math.round(d);`

# android - 如何仅获取 JSONObject Android

> ID：15319973
> 
> 赞同：0
> 
> 时间：2013-03-10T07:31:13.767
> 
> 标签：android

```
{"StatusID":"1","Error":"Register Successfull."} 
```

这是我的 JSONObject 我不知道如何在 android 中将其转换为字符串

请给我建议

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T07:33:02.860

获取 JSON 对象并获取这样的值。

```
JSONObject jsonObject = new JSONObject(res);
String statusId = jsonObject.getString("StatusID");
String error = jsonObject.getString("Error"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:36:59.270

如果你只想转换这个 json：

```
{"StatusID":"1","Error":"Register Successfull."} 
```

您必须使用 toString() 方法。

如果您想获取“状态 ID”或“错误”，您应该使用 getString() 方法

见[这个](http://www.json.org/javadoc/org/json/JSONObject.html)。

# c - 在 C 中经过一段时间后突破双倍

> ID：15319976
> 
> 赞同：0
> 
> 时间：2013-03-10T07:31:32.173
> 
> 标签：c, timer, signals, perfect-numbers

我有一个问题，我正在编写一个代码，该代码通过强制执行我的作业所需的算法来找到完美的数字。我想看看范围在 15 秒内能走多远。我尝试使用 while 循环和警报，但它似乎根本不起作用。我将如何从那里去？

谢谢

这是我的代码：

```
#define _POSIX_SOURCE
#define _BSD_SOURCE

#include <signal.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

volatile int stop=0;

void sigalrm_handler( int sig ){
    stop = 1;
}

int main(int argc, char **argv){
    struct sigaction sact;
    int num_sent = 0;

    sigemptyset(&sact.sa_mask);
    sact.sa_flags = 0;
    sact.sa_handler = sigalrm_handler;
    sigaction(SIGALRM, &sact, NULL);

    alarm(15);  /* Request SIGALRM in 60 seconds */
    while (!stop) {
        for (;;){
             for (;;){
            }
        }
    }
    printf("%d \n", num_sent);

    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:35:29.983

即使警报被触发并设置`stop`为非零值，您也不会注意到，因为您的`for`循环不会返回到外部`while`。您需要将 应用于`condition`应该停止的所有循环：

```
while (!stop) {
    for (;!stop;){
         for (;!stop;){
        }
    }
} 
```

另一种方法`alarm`是简单地检查您是否超过了某个时间点：

```
time_t end = time(0) + 15;
while (end < time(0)) {
    for (;end < time(0);){
         for (;end < time(0);){
        }
    }
} 
```

# git - Git 更新挂钩：查找所有被推送到新分支的文件

> ID：15319978
> 
> 赞同：3
> 
> 时间：2013-03-10T07:32:21.767
> 
> 标签：git, hook

我正在尝试在我的团队中强制执行一些编码风格。所以我写了一个 git update 钩子，它检查所有被推送的文件。

但是，它适用于远程现有的分支，但它不适用于新分支。

要获取现有分支上的文件列表，我使用`git diff --name-status --diff-filter=AM oldrev newrev`，其中 oldrev 和 newrev 是我作为参数获得的 SHA1。

*对新*分支使用同一行失败，报告 0{40} 是一个坏对象。经过一番浏览，我发现我可以使用这个：`git diff-tree --root newrev`. 但是，此命令仅返回*最后一次推送*中的文件，而不是分支中的所有文件。

如果它是一个新分支，有没有办法获取正在推送的分支中**所有文件的所有名称？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:15:55.143

你试过`git rev-list --first-parent newrev`吗？它似乎列出了分支之间的所有转速`newrev`和分支来自的参考。例如，在这个 repo 中：

```
$ git log --all --graph --decorate
* commit 03f6357bdcacfc8c8253ccb140f25010810c4433 (HEAD, origin/new_branch, new_branch)
|     Fifth
* commit 291d88908fefa94eab0c9483ad6b8ab5ebca21f6
|     Third
* commit 3ff20b8998d037cd9c9bb1ff53b1887837d9ed8e
|     Second
| * commit e9c2e99de892499d2b6037c8c0913a52dbade4c0 (origin/master, master)
|/      Fourth  
* commit 9574226673ffe2d04ae4e36b4d7976399320e29f
      First 
```

`rev-list`给出以下内容：

```
$ git rev-list --first-parent 03f6357bdcacfc8c8253ccb140f25010810c4433
03f6357bdcacfc8c8253ccb140f25010810c4433
291d88908fefa94eab0c9483ad6b8ab5ebca21f6
3ff20b8998d037cd9c9bb1ff53b1887837d9ed8e
9574226673ffe2d04ae4e36b4d7976399320e29f 
```

您可以将其限制为仅使用基本参考`tail -1`（我还没有找到一个 CLI 选项来更优雅地做到这一点）：

```
$ git rev-list --first-parent 03f6357bdcacfc8c8253ccb140f25010810c4433 | tail -1
9574226673ffe2d04ae4e36b4d7976399320e29f 
```

从那里，您可以使用原始`git diff`命令：

```
$ origrev=`git rev-list --first-parent 03f6357bdcacfc8c8253ccb140f25010810c4433 | tail -1`
$ git diff --name-status --diff-filter=AM $origrev 03f6357bdcacfc8c8253ccb140f25010810c4433
A       bar 
```

# c - 计算频谱分析仪的值

> ID：15319980
> 
> 赞同：2
> 
> 时间：2013-03-10T07:32:23.953
> 
> 标签：c, equalizer

我将如何实施像下面 WinAmp 中的频谱分析仪？

![Winamp 中的“均衡器条”示例](../Images/64859573be1588d780f761b475c98f04.png)

仅通过查看，我认为这些条被渲染以显示传入音频数据的特定频段的“音量级别”；但是，我不确定如何实际计算绘制条形图这一相当简单的任务所需的数据。

据我所知和理解，计算这些值可以通过使用 FFT 来完成——但是，考虑到输入数据的缓冲区，我不完全确定如何计算这些值——我在 FFT 的正确轨道上吗？我将如何对输入数据应用 FFT 并从 FFT 中获取一个整数，该整数表示特定频带的“音量”？

绘图部分不是问题，因为我可以直接绘制到我的帧缓冲区并将其渲染出来。我在 FPGA 上做这个项目，使用 Nios II 软 CPU，以防有人想知道潜在的硬件限制。音频数据以 96kHz 的 24 位数据形式出现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T08:39:31.780

您可能正在寻找[FFTw](http://www.fftw.org)。

编辑：

详细说明您的问题：

*可以通过使用 FFT 来计算这些值——但是，给定输入数据的缓冲区，我不确定如何计算这些值*：是的，你是对的；这正是它的完成方式。由于[时频不确定性原理，您需要一个（必然很小](http://en.wikipedia.org/wiki/Fourier_transform#Uncertainty_principle)) 从当前播放的音频数据中采样片段，并将其馈送到（通常）离散的、仅实数的 FFT（最著名、最广泛使用和最快的是 DCT 系列的 DFT 之一 - 实际上有高度优化FFTw 中大多数 DCT 的版本）。然后取出下一个样本片段并重复该过程。FFT 的输出将是输入的音频信号的频率分解 - 然后您需要决定如何显示它（即在 FFT 的输出上使用哪个函数，常见的候选者是 f(x) = x; f(x) = sqrt(x); f(x) = log(x)) 以及如何呈现/动画以下读数（例如，您可以在时间方向上平均每个波段，或者您可以有最大值“慢慢脱落”）。

* * *

愤怒编辑：附加链接，因为似乎有人知道如何投票但不知道如何使用谷歌：

*   [http://en.wikipedia.org/wiki/FFTW](http://en.wikipedia.org/wiki/FFTW)
*   [http://webcache.googleusercontent.com/search?q=cache:m6ou54tn_soJ:www.fftw.org/+&cd=1&hl=en&ct=clnk&gl=it&client=firefox-a](http://webcache.googleusercontent.com/search?q=cache:m6ou54tn_soJ:www.fftw.org/+&cd=1&hl=en&ct=clnk&gl=it&client=firefox-a)
*   [http://web.archive.org/web/20130123131356/http://fftw.org/](http://web.archive.org/web/20130123131356/http://fftw.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:24:50.650

这很简单——只需使用众多 FFT 算法中的一种！它们中的大多数都需要浮点计算，但谷歌搜索会显示只有整数的方法。不过，您是正确的，FFT 就是您想要的。

*   [http://en.wikipedia.org/wiki/Fast_Fourier_transform](http://en.wikipedia.org/wiki/Fast_Fourier_transform)

要了解如何应用 FFT，您应该阅读有关离散傅立叶变换的此页面，尽管它在数学上相当繁重：

*   [http://en.wikipedia.org/wiki/Discrete_Fourier_transform](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)

要在您的 FPGA 上实现它，我将查看该项目的源代码：

*   [http://qt-project.org/doc/qt-4.8/demos-spectrum.html](http://qt-project.org/doc/qt-4.8/demos-spectrum.html)

这是之前的 SO question，它总结了它的工作原理（使用任何语言）。

*   [如何在 C++ 中使用 fft 生成音频频谱？](https://stackoverflow.com/questions/4675457/how-to-generate-the-audio-spectrum-using-fft-in-c)

关于创建所谓的“频谱分析器”的信息量很大，必须有几十个完整的实现，源代码是免费的。例如，只需通过谷歌搜索“频谱分析仪源代码 C”。

# jsp - 如何解决struts2中的逗号分隔值

> ID：15319981
> 
> 赞同：3
> 
> 时间：2013-03-10T07:32:32.970
> 
> 标签：jsp, struts2, struts

我有一个让用户创建项目的 JSP。

创建后，我将它们显示在表格的同一页面中，并带有两个按钮，即更新和删除。

当用户更改值并单击更新时，值正在更改并显示添加，第一行列值+更改的值以逗号分隔。

谁能告诉我为什么会发生以及如何解决。

找到下面的jsp文件

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>

<script type="text/javascript">

    function updateRow(id) {
var manufacturer = document.getElementById("manufacturer").value;   
var family = document.getElementById("family").value;
                var model = document.getElementById("model").value;

        var url = "id="+id+"&manufacturer="+manufacturer+"&model="+model+"&family="+family;
            document.globalForm.action= "http://localhost:8080/ContentInventory/update.action?id=" + id + "&manufacturer="+ manufacturer + "&model=" + model + "&family=" + family;
        document.globalForm.submit(); 
    }

    function deleteRow(id) {
        document.globalForm.action = "http://localhost:8080/ContentInventory/delete.action?id="+id;
        document.globalForm.submit();

    }

    function addDetails() {
    document.globalForm.action = "http://localhost:8080/ContentInventory/add.action";
alert(document.globalForm.action);
document.globalForm.submit();

    }
</script>

<html>

<body>

    <h1>Global Handset Compatibility</h1>
    <s:actionerror />

    <s:form id="globalForm" name="globalForm" method="post" theme="simple" >
        <table>

            <tr>
                <td><s:label value="Manufacturer" />
                </td>
                <td><s:textfield name="manufacturer" label="Manufacturer" />
                </td>
            </tr>
            <tr>
                <td><s:label value="Model" />
                </td>
                <td><s:textfield name="model" label="Model" />
                </td>
            </tr>
            <tr>
                <td><s:label value="Family" />
                </td>
                <td><s:textfield name="family" label="Family" />
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                <!--<s:submit value="Add Inventory" align="center" />-->
                <input type="button" value="Add Inventory" id="addButton" onclick="javascript:addDetails()" >
                </td>
            </tr>
        </table>

        <h2>Inventory List</h2>
    <table id="global" border="1" width="100%">
        <tr>
            <th>Manufacturer</th>
            <th>Model</th>
            <th>Family</th>
            <th>Delete</th>
            <th>Edit/Update</th>
        </tr>

        <s:if test="%{globalList.size() > 0}">
            <s:iterator value="globalList" id="globals">

                <tr>

                    <td align="center">
                    <s:textfield id="manufacturer" name="#globals.manufacturer" /></td>

                    <td align="center"><s:textfield id="model" name="#globals.model" /></td>

                    <td align="center"><s:textfield id="family" name="#globals.family" /></td>

                    <td align="center"><input type="button" value="Delete" id="deleteButton" onclick="javascript:deleteRow('<s:property value="id"/>')">
</td>
                    <td align="center">
                                        <input type="button"  value="Update" id="updateButton<s:property value="id"/>"  onclick="javascript:updateRow('<s:property value="id"/>')">

                    </td>
                </tr>
            </s:iterator>

        </s:if>
        <s:else>
            <tr>
                <td colspan="5">No Data Found</td>
            </tr>
        </s:else>

    </table>
        </s:form>
</body>
</html> 
```

在动作类中，我有字段的 getter 和 setter 方法，在单击更新按钮时，我使用 js 获取更新的值并发送到后端。这些值插入正确，但是在显示页面时，它显示了用逗号分隔的值，第一和第二个值也是不正确的......

感谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-01T21:43:25.993

前几天这件事发生在我身上。事实证明，我有多个具有相同名称的字段。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:35:26.967

`id`s 中的属性`iterator`已弃用，请`var`改用。

我不确定你在这里问什么，但如果你正在迭代一个列表，并且你想唯一地引用该列表的一个元素（无论是在发布时，还是在通过 javascript 获取值时），你需要使用索引：

```
<s:iterator value="globalList" var="globals" status="ctr">

   <s:textfield id="manufacturer" name="globalList[#ctr.index].manufacturer" />

   <s:textfield id="model" name="globalList[#ctr.index].model" />

   <s:textfield id="family" name="globalList[#ctr.index].family" /> 
```

ETC...

您也可以使用 IteratorStatus 生成唯一的 HTML`id`字段（否则它将不是有效的 HTML），例如：

```
<s:textfield id="manufacturer_num_%{#ctr.index}" 
             name="globalList[#ctr.index].manufacturer" /> 
```

这样您就可以唯一地引用每个字段：

```
var manufacturer = document.getElementById("manufacturer_num_" + counter).value; 
```

当然，要使其正常工作，您需要将`counter`var 传递给 javascript 函数。

最后的想法是，在迭代元素中使用索引，您将不再需要任何 javascript 或单个帖子来**更新**值：只需在操作中声明 a`List<yourObject>` 并发布所有网格，列表将自动填充行来自您的 JSP；出于安全原因，您只需要为**删除**方法引用单个元素。

# php - 限制 PHP 中显示的目录

> ID：15319989
> 
> 赞同：0
> 
> 时间：2013-03-10T07:33:17.043
> 
> 标签：php, dir

如何使用 PHP 在目录中显示文件夹的限制？下面的代码显示了所有文件夹，但我只想查看 10 个文件夹。

```
function folderlist() {
  $startdir = './';
  $ignoredDirectory[] = '.';
  $ignoredDirectory[] = '..';
  if(is_dir($startdir)) {
    if($dh = opendir($startdir)) {
      while(($folder = readdir($dh)) !== false) {
        if(!(array_search($folder, $ignoredDirectory) > -1)) {
          if(filetype($startdir.$folder) == "dir") {
            $mtime = filemtime($startdir.$folder);
            $directorylist[$mtime]['name'] = $folder;
            $directorylist[$mtime]['path'] = $startdir;
          }
        }
      }

      closedir($dh);
    }
  }

  krsort($directorylist, SORT_NUMERIC);
  return $directorylist;
}

$folders = folderlist();
foreach($folders as $folder) {
  $path = $folder['path'];
  $name = $folder['name'];

  echo '<div class="urbangreymenu"><ul><li><a href="'.$path.'index.php?wallpapers='.$name.'" target="_parent">'.$name.'</a></li></ul></div>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:36:46.520

更改三行：

```
function folderlist($limit = 10) { 
```

和 ...

```
while (($folder = readdir($dh)) !== false && $limit) { 
```

和...

```
$limit--; 
```

一起：

```
function folderlist($limit = 10) {
    $startdir = './';
    $ignoredDirectory[] = '.'; 
    $ignoredDirectory[] = '..';
    if (is_dir($startdir)) {
        if ($dh = opendir($startdir)) {
            while (($folder = readdir($dh)) !== false && $limit) {
                if (!(array_search($folder,$ignoredDirectory) > -1)) {
                    if (filetype($startdir . $folder) == "dir") {
                        $mtime = filemtime($startdir . $folder);
                        $directorylist[$mtime]['name'] = $folder;
                        $directorylist[$mtime]['path'] = $startdir;
                        $limit--;
                    }
                }
            }
            //Rest of code unchanged... 
```

# php - 创建新的托管按钮与更新现有按钮？

> ID：15319991
> 
> 赞同：0
> 
> 时间：2013-03-10T07:33:37.223
> 
> 标签：php, paypal

我需要在我的网站上动态生成完整聚合购物车的价格——我已经建立了自己的购物车。只有当用户要结帐时，我才想生成一个带有总购物车价格的按钮。

有什么更好的方法？我是否应该通过 PayPal 的界面创建一个托管按钮，并在用户进入结帐阶段时对其进行更新？或者我应该为每个用户结帐创建一个新按钮？任何一种方法都会比另一种更昂贵吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:45:26.477

我建议为您销售的每件商品创建一个已保存的托管按钮。因为这样用户就不能篡改商品的价格。

如果您使用“自定义”按钮并自己更改表单变量而不将其保存在贝宝上，您将必须验证每个订单的价格，因为坦率地说，通过 DOM 更改它们非常容易。（对于本网站上的任何人尤其如此）

如果您有数千件商品，您可能需要研究第三方商家解决方案，以便您更轻松地更新商品。

# opencv - 仅提取分布中的峰值

> ID：15319997
> 
> 赞同：1
> 
> 时间：2013-03-10T07:34:34.727
> 
> 标签：opencv, gnuplot

我有一个表，其中一列中有帧号，另一列中有相应的颜色时刻。我发现他们使用openCV。一些帧的值非常高，而其余帧的值非常低。如何提取具有非常高峰值的帧？

这是分布图，我尝试使用高斯平滑，然后在下面的图上进行阈值处理。

![阴谋](../Images/5bc934c18229e79c0a5691c5b600fcbc.png)

我得到了这个结果。

![情节1](../Images/d6d8b093b59cc67a26dfdb17d317a062.png)

现在我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:50:41.283

基本上你正在寻找一个寻峰器......MATLAB有一个寻峰器功能来寻找峰值......我没有在OpenCV中找到任何现成的API，所以我实现了MATLAB的寻峰器......算法是这样的...... .

1.  初始假设或先验知识可以是**a)**您的分布中可以有“n”个峰**b)**您的峰被最小窗口“w”隔开，即没有两个峰比“w”更近。
2.  我可以告诉你窗口的实现。从一个数据点开始。将其位置标记为当前索引，并检查其长度为'w'的左右邻域是否存在大于当前索引值的值。
3.  如果是，请进入正题。将该点设为当前索引并重复 2。
4.  如果不是，那么它是您的局部最大值。将您当前的索引移动 'w' 长度并重复 2 直到到达数据集结束。

尝试实现这一点并检查峰值查找器的 MATLAB 帮助。如果没有运气，我可以发布代码..

**在看到您编辑**的图表后进行编辑，似乎该图表具有明确定义的最大峰值，因此您可以做的是跟踪图表的 dy/dx 的符号。最大峰值是 dy/dx 的符号从正变为负的点......在代码语言中

```
vector<double> array_of_max_peak;
if (sign( x(n+1) - x(n) ) ) > 0
  array_of_max_peak.push(x(n)); 
```