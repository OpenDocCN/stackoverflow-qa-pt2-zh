# StackOverflow 问答 13804000-13804999

# java - Java Ganymed-SSH - 从缓冲区读取时挂起

> ID：13804001
> 
> 赞同：0
> 
> 时间：2012-12-10T15:32:28.267
> 
> 标签：java, ssh

目前我正在尝试使用 Java 的 Ganymed-SSH2-Library 在 ssh 服务器上运行一些命令。因为我还需要调用 perl 脚本，所以我不能使用`Session.execCommand();`，因为它只会运行“正常”的 unix-commands（或者这是错误的吗？）。相反，我需要使用伪终端。

如果我运行以下代码，它会挂起：

```
session = con.openSession();
session.requestPTY("vt220");
session.execCommand("/bin/bash");
session.getStdin().write("echo test".getBytes());
int b = 1;
InputStream is = new StreamGobbler(session.getStdout());
while ((b = is.read()) != -1) {
    System.out.print((char)b);
}
System.out.println("finished"); 
```

将产生以下输出（经过审查的 USERNAME 和 HOST）：

```
echo testUSERNAME@HOST:~

# echo test 
```

但是代码会在此时挂起并且永远不会到达`System.out.println("finished");`

连接建立完美，如果我运行以下代码，它可以工作：

```
session = con.openSession();
session.execCommand("ls");
BufferedReader reader = new BufferedReader(new InputStreamReader(new StreamGobbler(session.getStdout())));
String line = reader.readLine();
while (line != null) {
    line = reader.readLine();
    System.out.println(line);
}
System.out.println("finished"); 
```

有谁知道，问题出在哪里？前段时间我用 Jsch（另一个 Java 的 SSH-Lib）试过这个，但它有同样的问题。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:13:49.883

我想问题不是来自 JSch 和 Ganymed。下面的呢？

```
session.getStdin().write("echo test; exit".getBytes()); 
```

# android - Android 2.3.3 中的 WindowBackground PreferencActivity

> ID：13804002
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:31:35.963
> 
> 标签：android, background, preferenceactivity

我已经为我的 PreferenceActivity 设置了 WindowBackground。

当我使用 2.3.3 时，背景图像会正确显示，但是当我滚动原始主题时，会出现在前景中。在我的情况下，白色背景。

我的清单文件：

```
 <activity android:name=".Activity_Settings" android:screenOrientation="portrait" android:theme="@style/PreferencesTheme"/> 
```

我的风格：

```
<style name="PreferencesTheme">   
         <item name="android:windowBackground">@layout/repeat</item> 
</style> 
```

谁能给我一个提示，为什么在我滚动时背景会变为原始主题？

最好的问候亚尼克

PS：Android 4.0 一切正常。

编辑：我的@layout/repeat 是：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/background"
android:tileMode="repeat" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:48:15.420

我想通了，请确保您在 Activity 的 onCreate 方法中设置了缓存颜色提示：

```
 getListView().setCacheColorHint(Color.TRANSPARENT); 
```

# python - 如何将dict值转换为python中的奇怪字符？

> ID：13804003
> 
> 赞同：0
> 
> 时间：2012-12-10T15:31:56.543
> 
> 标签：python

我收到 UnicodeDecodeError: 'utf8' codec can't decode bytes... invalid start byte。

我怀疑它与我字典中的一个值有关。要访问所有字段并将它们放入字典中，我使用：

```
 mydictionary = {x:y for x,y in zip(column, values)} 
```

我可以进行哪些更改以确保可以将值转换为符合 utf8 的某种方式或避免此错误？

column 包含所有列标题... values 包含一个元组，其中包含与该列对应的所有值

即列 = ('NAME', HOBBY') 值 = ('George', 'Basketball')

我遇到的问题是值的某个地方发生了一些事情，例如： values = ('-insert known utf8 noncompliant character-George', 'Basketball')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:51:36.873

如果您不关心错误值的确切内容，您可以简单地告诉 UTF-8 编解码器忽略错误，

```
import codecs
codec = codecs.lookup('utf-8')
mydictionary = {codec.decode(x, 'ignore'): codec.decode(y, 'ignore') for x,y in zip(column, values)} 
```

或者，替换`'ignore'`为`'replace'`将导致编解码器用 Unicode“替换字符”代码点 (U+FFFD) 替换任何格式错误的字符。如果您只关心 中的错误字符串`values`，您可以明显忽略键上的解码调用。

# c# - BackgroundWorker 与 SqlConnection

> ID：13804005
> 
> 赞同：2
> 
> 时间：2012-12-10T15:32:42.777
> 
> 标签：c#, sql, multithreading, user-interface, backgroundworker

我知道我在这里有一个巨大的 derp 时刻，这实际上可能很容易做到 - 我已经搜索并阅读了一些文章，但我仍然有点挣扎，所以任何反馈或指向有用资源的指针都会不胜感激！

无论如何，我有一个名为的类`PopulateDatagridViews`，其中有各种函数，其中一个名为`ExecuteSqlStatement`，这个函数很简单，它初始化一个 SQL 连接并返回一个`DataTable`填充了 SQL 查询结果的函数。在同一个类中，我还有各种使用字符串构建器来构建 SQL 语句的函数。（不理想，我知道。）

`PopulateDatagridViews`我在我的 GUI 线程中创建了一个对象，并使用它来设置各种数据网格视图，并使用返回的`DataTables`. 例如：

```
dataGridViewVar.DataSource = populateDgv.GetCustomers(); 
```

我遇到的一个问题自然是从数据库中读取的数据越多，UI 无响应的时间就越长。我想将通过 检索数据的过程转移`PopulateDatagridViews`到一个单独的线程，或者`BackgroundWorker`防止主 GUI 线程在处理该线程时锁定。

我意识到我可以创建一个`BackgroundWorker`来执行此操作，并在`DoWork`处理程序中调用我的`PopulateDatagridViews`.

我想我可以为班级`BackgroundWorker`中的每个单独的函数创建一个`PopulateDatagridViews`，但肯定有更有效的方法来做到这一点吗？我非常感谢在正确的方向上指出这一点，因为它正在驱使我绕过弯道！

附加信息：我使用 .Net 框架的 4.0 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:49:39.873

那么在这种情况下，我建议阅读这篇[msdn 文章](http://msdn.microsoft.com/en-us/library/dd460717%28v=vs.100%29.aspx)以获得一些想法。之后你应该寻找一些教程，因为 msdn 不是学习东西的最佳来源。;o)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:48:34.927

我强烈建议您使用 TPL（任务并行库）[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx) 在您的情况下，您将创建第一个任务来提取一些数据，然后开始第二个任务完成更新UI。我会尝试找到我为类似问题编写的代码。

编辑：添加代码

```
Task<return_type> t1 = new Task<return_type>(() =>
            {
                //do something to take some result
                return some_result; //return it
            });
            t1.Start();
            Task t2 = t1.ContinueWith((some_arg_that_represent_previous_task_obj) =>{//ContinueWith guarantees that t2 is started AFTER t1 is executed!                

                //Update your GUI here
                //if you need result from previos task:   some_arg_that_represent_previous_task_obj.Result   //Your dataset or whatever

            }, TaskScheduler.FromCurrentSynchronizationContext());  //VERY important - you must update gui from same thread that created it! (you will have cross thread exeption if you dont add TaskScheduler.FromCurrentSynchronizationContext() 
```

希望能帮助到你。

# php - 使用谷歌地图作为背景？

> ID：13804006
> 
> 赞同：1
> 
> 时间：2012-12-10T15:31:50.333
> 
> 标签：php, html, css, api, google-maps

好的，所以我尝试将 Google 地图作为我网站的背景。但是当我尝试使用此代码在其上放置文本时：

```
.content{
z-index:0;
background-color:fffff;
position: absolute; top: 0; left: 0;
width: 900;
height: auto;
margin-right: auto;
margin-left: auto;
} 
```

这给了我一个错误，它显示在地图顶部的地图，这是我想要的，但由于某种原因它不能与边距一起使用。我所有的代码都在这里： http: [//pastebin.com/uz6wwtYZ](http://pastebin.com/uz6wwtYZ)

谁能帮助我，因为我希望网页中心的内容和地图作为背景。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:38:55.057

当项目设置为绝对位置时，尝试调整顶部和左侧而不是边距：

```
.content{
z-index: 100;
background-color:fffff;
position: absolute; top: 100px; left: 100px;
width: 900;
height: auto;
margin-right: auto;
margin-left: auto;
} 
```

希望有帮助吗？也可能想要设置更高的 z-index 值，就像我在上面所做的那样。

如果您希望它以自动边距值水平居中但又绝对定位，我认为您不能这样做。

您可以通过为您的内容提供绝对宽度并偏移 left 属性来尝试此操作：

```
 .content{
width: 500px;
    z-index: 100;
    background-color:fffff;
    position: absolute; top: 100px; left: 50%;
    height: auto;
    margin: auto;
margin-left: -250px; /* half the value of the width */
    } 
```

这是使用您的代码的 JS Fiddle 的链接：http: [//jsfiddle.net/4FLKt/1/](http://jsfiddle.net/4FLKt/1/)似乎工作正常。

米奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:36:34.760

这是因为您的 using`position: absolute;`和 that 不能与`margin:auto;`.

在谷歌地图上放置一个全宽的 div 并使其成为绝对...然后在该 div 中您可以将另一个 div 居中。

**例子**

```
<div> //This div has position:absolute; and the width of the Google maps chart.
  <div> //This div has margin:0 auto;
     Content here
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:38:36.497

您是否尝试将内容放在地图顶部？

```
#map {
    z-index:1;
}
.content{
    z-index:100;
} 
```

# inline - 类模板+函数模板

> ID：13804007
> 
> 赞同：0
> 
> 时间：2012-12-10T15:32:44.040
> 
> 标签：inline, template-specialization, function-templates, class-template

当我尝试按如下方式创建模板类时：

```
template <typename TList>
class Variant
{
public :
    std::string toString(); // var.toString()

    template<typename T>
    std::string toString(); // var.toStrint<int>();

    protected:
    template <typename T>
    std::string toString(T v); // internal Specialization

    template <>
    std::string toString(int v); // internal Specialization

    template <typename T>
    const T & get() 
    {
        std::size_t  type_index = TypeListNamespace::IndexOf<TList, T>::value ;

        if ( type_index == max_num_of_t  || type_index != _type_index)
            throw std::bad_cast() ;  

        void * ptr = (void*) &_variant_holder;
        T * vptr = reinterpret_cast<T *>(ptr);
        return *vptr; 
    }
};

// CPP FILE:

template <typename TList>
std::string Variant<TList>::toString ()
{
    // var.toString()
}

template<typename TList>
template<typename T>
std::string Variant<TList>::toString ()
{               
    return toString( get<T>() );  
}

template<typename TList>
template<typename T>
std::string Variant<TList>::toString (T v)
{                
    // no default toString method.
    return "";
}

template<typename TList>
template<>       
std::string Variant<TList>::toString (int v)
{                
    // Specialized toString for int values:
    return Core::Utility::formatString("%i", v );
}

.. other specializations .. 
```

我收到以下错误：

```
error C2244: 'Core::Variant<TList>::toString': unable to match function definition to an existing declaration
2>          Definition
2>          'std::string Core::Variant<TList>::toString(int)'
2>          Available Deklarations
2>          'std::string Core::Variant<TList>::toString(T)'
2>          'std::string Core::Variant<TList>::toString(void)'
2>          'std::string Core::Variant<TList>::toString(void)' 
```

当我在类定义中拥有这些特化时，都立即编译了。所以我想我的模板语法有问题。但是很难找到混合了具有专业化的类和函数模板的示例。所以我最终来到这里希望有人对我有很好的暗示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:41:12.150

看来您不必将“模板<>”放在您的专业之上。

如果我删除它们，一切都会编译好（寻找不要在家里尝试这个）

```
template <typename TList>
class Variant
{
public :
    std::string toString(); // var.toString()

    template<typename T>
    std::string toString(); // var.toStrint<int>();

    protected:
    template <typename T>
    std::string toString(T v); // internal Specialization

    // DON'T TRY THIS AT HOME: template <>
    std::string toString(int v); // internal Specialization

    template <typename T>
    const T & get() 
    {
        std::size_t  type_index = TypeListNamespace::IndexOf<TList, T>::value ;

        if ( type_index == max_num_of_t  || type_index != _type_index)
            throw std::bad_cast() ;  

        void * ptr = (void*) &_variant_holder;
        T * vptr = reinterpret_cast<T *>(ptr);
        return *vptr; 
    }
};

// CPP FILE:

template <typename TList>
std::string Variant<TList>::toString ()
{
    // var.toString()
}

template<typename TList>
template<typename T>
std::string Variant<TList>::toString ()
{               
    return toString( get<T>() );  
}

template<typename TList>
template<typename T>
std::string Variant<TList>::toString (T v)
{                
    // no default toString method.
    return "";
}

template<typename TList>
// DON'T TRY THIS AT HOME: template<>       
std::string Variant<TList>::toString (int v)
{                
    // Specialized toString for int values:
    return Core::Utility::formatString("%i", v );
}

.. other specializations .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T11:24:57.130

正如您所说，您不需要模板<>，因为您没有专门化该功能。

你所做的是函数重载！

# matlab - 根据唯一值频率对向量进行排序

> ID：13804009
> 
> 赞同：4
> 
> 时间：2012-12-10T15:32:47.857
> 
> 标签：matlab, sorting, cluster-analysis

我正在`NxM`使用 对矩阵的行进行聚类`kmeans`。

```
clustIdx = kmeans(data, N_CLUST, 'EmptyAction', 'drop'); 
```

然后我重新排列矩阵的行，使相邻的行在同一个簇中

```
dataClustered = data(clustIdx,:); 
```

然而，每次我运行聚类分析时，我都会或多或少地得到相同的聚类，但具有不同的身份。因此，结构在`dataClustered`每次迭代后看起来都一样，但组的顺序不同。

我想重新排列我的集群标识，使得较低的集群标识代表密集的集群，而较高的数字是稀疏的集群。

有没有简单和/或直观的方法来做到这一点？

IE。兑换

```
clustIdx = [1 2 3 2 3 2 4 4 4 4]; 
```

至

```
clustIdx = [4 2 3 2 3 2 1 1 1 1] 
```

身份本身是任意的，信息包含在分组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:43:39.643

If I understand correctly, you want to assign cluster label 1 to the cluster with most points, cluster label 2 to the cluster with the second most points, etc.

Assume you have a cluster label array called `idx`

```
>> idx = [1 1 2 2 2 2 3 3 3]'; 
```

Now you can relabel idx like this:

```
%# count the number of occurrences
cts = hist(idx,1:max(idx));

%# sort the counts - now we know that 1 should be last
[~,sortIdx] = sort(cts,'descend')
sortIdx =
     2     3     1

%# create a mapping vector (thanks @angainor)
map(sortIdx) = 1:length(sortIdx);
map =
     3     1     2

%# and remap indices
map(idx)
ans =
     3     3     1     1     1     1     2     2     2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:44:14.043

It may not be efficient, but the easy way would be to first determine for each cluster how dense it is.

Then you can make a nx2 matrix that contains the `Density` and `ClusterIdx`

Afterwards a simple sort will give you the `ClusterIdx` in the right order

# c++ - 返回模板映射值作为参考

> ID：13804011
> 
> 赞同：0
> 
> 时间：2012-12-10T15:32:55.283
> 
> 标签：c++, map, reference, c++11, std

好吧，我必须说，使用 C++ 模板 + 由模板组成的 stl + 尝试编写快速的 c++11 代码是一种痛苦。大多数情况下，很多奇怪的编译器错误......我需要帮助，代码：

```
#include <SFML/Graphics.hpp>
#include <memory>
#include <map>

template <class T>
class cResourceManager
{
public:
T& get(const std::string & key);
bool add(const std::string & key, const std::shared_ptr<T> & ptr);
private:
std::map <std::string, std::shared_ptr<T> > resources;
};

template <class T>
T& cResourceManager<T>::get(const std::string & key)
{
    class std::map<std::string, std::shared_ptr<T>>::const_iterator citr =     resources.find(key);
    if (citr != resources.end()) return resources[key];
}

template <class T>
bool cResourceManager<T>::add(const std::string & key, const std::shared_ptr<T> & ptr)
{
if (resources.find(key) == resources.end())
{
    if(ptr != nullptr) 
    {
        resources.insert( std::move( std::make_pair(key, ptr) ) );
        return true; 
    }
}
return false;
}

int main(int argc, char **argv)
{
    cResourceManager<sf::Texture> resmgr;
    resmgr.add("key", std::make_shared<sf::Texture>() );
    resmgr.get("key");
    return 0;
} 
```

在 resmgr.get("key") 行我收到一个错误**“main.cpp:19:51: error: invalid initialization of reference of type of 'sf::Texture&' from expression of type'std::map, std: :shared_ptr, std::less >, std::allocator, std::shared_ptr > > >::mapped_type {aka std::shared_ptr}'"** 我不知道为什么，尝试使用模板和 STL 理解错误非常困难对我来说。我不知道出了什么问题。

第二件事是一个小问题。在线：**resources.insert(std::move(std::make_pair(key, ptr)))**我需要 std::move 函数来获得更好的性能吗？因为我想在使用硬币容器时尽可能避免使用临时对象，但我认为我并不了解所有内容，所以我不确定。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:41:10.167

错误在这一行：

```
if (citr != resources.end()) return resources[key]; 
```

`resources[key]`会给你一个`std::shared_ptr<T>`，但你的函数返回一个`T &`。你需要这样的东西：

```
if (citr != resources.end()) return *resources[key]; 
```

如果找不到密钥，您还需要决定要做什么。目前该函数在这种情况下不返回任何内容。

至于你的另一个问题， make_pair 返回一个临时对，它已经是一个右值，所以不需要显式移动。

# sqlite - PhoneGap + SQLite 问题

> ID：13804012
> 
> 赞同：1
> 
> 时间：2012-12-10T15:32:56.177
> 
> 标签：sqlite, cordova

由于某种原因，以下代码不起作用：

```
var users = window.SQLitePlugin.openDatabase("users","1.0","Demo",-1);
users.transaction(function(tx){
    KovarApp.lib.say("Transaction Started");
    var createString =  "CREATE TABLE IF NOT EXISTS 'users' ('id' integer(11) primary key, 'username' varchar(25),'password' varchar(100),'firstname' varchar(25),'lastname' varchar(25),'qdatabase' varchar(20),'ugroup' varchar(50),'status' varchar(50))";
    tx.executeSql(createString,[],function(tx,res){
        KovarApp.lib.say("Create Worked");
    },function(){
        KovarApp.lib.say("Create Failed");
    });

    var insertString = "INSERT INTO users (username,password,firstname,lastname,qdatabase,ugroup,status) values ('jktest','e10adc3949ba59abbe56e057f20f883e','Andrew','Rhyne','basictemplate','admin','yes')";
    tx.executeSql(insertString,[],function(tx,res){
        KovarApp.lib.say("Insert Worked");
    },function(){
        KovarApp.lib.say("Insert Failed");
    });

    var testString = "SELECT 1 FROM users WHERE username = 'jktest'";
    tx.executeSql(testString,[],function(tx,res){
        KovarApp.lib.say("res.rows.length: " + res.rows.length + " -- should be 1");
    });
    KovarApp.lib.say('Transaction Ended');
}); 
```

我的日志函数吐出事务已启动和事务已结束，但未针对单个查询触发回调。我正在使用 Brody 的 sqlite3 插件：[https ://github.com/brodyspark/PhoneGap-SQLitePlugin-Android](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android)

这里的任何帮助都会很棒。我真的不知道我做错了什么，但它根本不起作用。作为旁注，他已指定对数据库大小没有任何限制，这由 -1 表示（表示没有大小限制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:43:56.390

所有回调函数都是异步执行的。在您的代码中，插入/选择命令在前面的命令完成之前启动，事务在各个命令完成之前结束。

将启动命令的代码移动到上一个命令的成功回调函数中。
换句话说，`transaction`and`executeSql`调用应该始终是其包含函数中的最后一条语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:38:43.710

Brody 项目中的 Javascript 文件暂时依赖于平台。看起来最终会在 javascript 都可移植的地方进行抽象，但这就是问题所在 - 我在 Android 上运行了 JS 文件的 iOS 版本。呵呵

# c# - 图像显示不正确

> ID：13804017
> 
> 赞同：0
> 
> 时间：2012-12-10T15:33:29.407
> 
> 标签：c#, asp.net-mvc-3

我在 MVC3 程序中使用以下代码

```
 var images = "\\\\XXXX\\XX\\Files\\" + photo.Thumbnail;
     <a href = "@images" class="grouped-photos" rel="prettyPhoto"> <img src = "@images" alt="@photo.Filename" /> </a> 
```

它只会显示图像类型“PNG”。每个文件夹中有两张图片。一个是缩略图，另一个是全尺寸图片。如果我切换到全尺寸图像

```
 var images = "\\\\XXXX\\XX\\Files\\" + photo.FullImage; 
```

然后它显示所有图像类型（PNG、BMP、JPG 等），href 部分将弹出全尺寸图像“。我能看到的唯一区别是

```
 photo.Thumbnail = Thumbnail.ImageXXX.jpg (.bmp, .png, etc)
      photo.FullImage = ImageXXX.jpg (.bmp, .png, etc) 
```

我想知道问题是否在于缩略图图像名称有句点（。）而全尺寸图像没有。如果缩略图图像是 .PNG，那么也会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:59:11.813

我找到了解决方案。据我所知，这将起作用

```
 var images = Url.Content("\\\\XXXX\\XX\\Files\\" + photo.Thumbnail);
    var fullsize = Url.Content("\\\\XXXX\\XX\\Files\\" + photo.Fullsize);
    <a href = "@images" class="grouped-photos" rel="prettyPhoto"> <img src = "@fullsize" alt="@photo.Filename" width = "90" height = "70"/> </a> 
```

另一位开发人员告诉我切换到全尺寸图像，然后设置宽度和高度参数以反映缩略图大小。现在它显示所有图像并且尺寸也正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:48:53.650

我认为您应该使用 Url.Content 方法生成图像的 url：

```
var images = Url.Content("~/XXXX/XX/Files/" + photo.Thumbnail); 
```

# regex - 使用 sed 替换字符串 (fstab) 中文本的确切部分

> ID：13804021
> 
> 赞同：0
> 
> 时间：2012-12-10T15:33:33.423
> 
> 标签：regex, sed

我正在两台服务器之间迁移一些数据。数据保存在每台服务器上的相同文件夹结构中。

移动数据后，我想在所有受影响的 Linux 机器上更新 fstab 文件。我有一个 bash 脚本，它在服务器之间同步数据，然后登录到列表中的每台机器，并使用 sed 用新的 IP 地址更新 fstab。

```
sed "s/\(172.16.0.30\)\(.*\)\(${share}\)\(.*\)/172.16.0.35\2\3\4/" 
```

这在过去工作得非常好，但是这次我正在迁移一个名称与其他几个非常相似的文件夹，假设 $share 是“home”：

```
home
home-old
home-ancient 
```

我遇到的问题是这个正则表达式正在使用 $share 中包含的文本获取所有共享，而不仅仅是我想要的。

有没有办法调整正则表达式，以便它只替换我想要的单行上的 IP？我查看了 /b 变量，但似乎无法让它工作，不幸的是正则表达式通常让我感到困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:54:03.140

`\b`是 GNU 扩展，在这种情况下不起作用，因为它匹配单词边界，并且空格和`-`都在非单词组中。它将匹配所有这些。一个简单的选择是在 之后匹配空格（或行尾）字符`$share`，例如：

```
sed "s/\(172.16.0.30\)\(.*\)\(${share}\)\( \(.*\)\|$\)/172.16.0.35\2\3\4/" 
```

# mysql - 如何查询具有包含双管道的字符串的 MySQL 字段？

> ID：13804022
> 
> 赞同：0
> 
> 时间：2012-12-10T15:33:31.280
> 
> 标签：mysql, sql

该表有一个包含双管道的字段`"||"`

我不确定如何让查询识别管道。我猜他们没有被解释为字符串文字。

`WHERE field LIKE '||%value%||'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:43:26.773

The pipe character has no special meaning, neither in a string literal, nor in a `like` pattern.

Are you really looking for a value that starts and ends with two pipe characters, and contains `value` somehere between them? For examle `||asdfvalueqerty||`.

If you are looking for a value that contains `||value||`, you would use the pattern `'%||value||%'` instead.

# php - js和PHP文件与wordpress中变量的迭代

> ID：13804023
> 
> 赞同：0
> 
> 时间：2012-12-10T15:33:02.080
> 
> 标签：php, javascript, jquery, ajax, wordpress

我在 wordpress 中做一个联系表格，这是一个模板页面，在这个页面中还有一个谷歌地图，这个地图从我可以在 wordpress 的管理面板中设置的 php 变量中获取坐标。

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/contact-form/map.js"></script>
            <script type="text/javascript">
                var lat=<?php echo($GLOBALS['desklab_theme_settings']['latcord_text']);?>;
                var lng=<?php echo($GLOBALS['desklab_theme_settings']['lngcord_text']);?>;
                generateMap(lat,lng);
            </script> 
```

我已经这样做了，正如我在另一个问题中所建议的那样 问题是我必须在这个 php 文件中获取变量，所以我必须与电子邮件相同

```
 <?php
/*
Template Name: ContactForm
*/
?>

<?php get_header(); ?>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    var emailto=<?php echo($GLOBALS['desklab_theme_settings']['email_text']);?>;
</script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/contact-form/contactform.js"></script> 
```

问题是我不能对地图做同样的事情，因为联系表单的 js 从点击联系表单的按钮开始

```
<input class="btn" type="button" id="button-contact" value="Send" /> 
```

js：

```
$(document).ready(function() {

//click of form bottom
$("#bottone-contact").click(function(){ 
```

之后我进入另一个发送电子邮件（js）的PHP文件

```
$.ajax({
            type: "POST",
            url: "wp-content/themes/DeskLab/contact-form/mail.php", 
```

PHP 邮件.php

```
<?php

session_start();

    $nome       =   $_POST['nome'];
    $email      =   $_POST['email']; 
```

我该怎么做以及如何`emailto`在 php 中添加变量？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:08:41.247

我不确定我完全理解你的意思，但如果我理解正确，这样的事情可能会奏效。在您的表单中，将来自服务器的电子邮件放在一个隐藏字段中：

```
<input type="hidden" name="email" value="<?php echo($GLOBALS['desklab_theme_settings']['email_text']);?>" />
<input class="btn" type="button" id="button-contact" value="Send" /> 
```

# javascript - 如何在nodejs中编写阻塞函数

> ID：13804026
> 
> 赞同：1
> 
> 时间：2012-12-10T15:33:39.593
> 
> 标签：javascript, node.js

嗨，我正在尝试缩短我的网址

```
function shorutrl(link)
{
var linkpost = JSON.stringify({longUrl:link});.

        var optionslink = {
        host: "www.googleapis.com",
        port: 443,
        method: 'POST',
        path: "/urlshortener/v1/url",
        headers: {
        'Content-Type' : 'application/json'
        }
    };

optionslink.headers['Content-Length']=linkpost.length;
var linkreq = https.request(optionsimg, function(res) {
                res.on('data', function (d) {
                linkdata+=d;
                });
                res.on('end', function (x) {
                try { return JSON.parse(linkdata).id; } catch(e){ return link; }
                });
            }).on('error', function (e) {
                //console.log(e.message);
            });
linkreq.write(optionslink);
linkreq.end();
}

function nonworking_givelink()
{
   return shorutrl(txtlinks[Math.floor(Math.random() * txtlinks.length)]);
}

function working_givelink()
{
   return txtlinks[Math.floor(Math.random() * txtlinks.length)];
} 
```

nonworking_givelink 返回 undefined working_givelink 正常返回链接

我应该编写一个新函数并将参数传递给该函数并生成新链接并将参数传递给另一个函数有没有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:37:37.287

你不应该在 node.js 中编写阻塞代码，它违背了系统的设计。

您需要传递一个回调函数，该函数将在您的`.on('end', ...)`块中使用新 URL 调用。

或者，将其包装到一个新对象中，该对象本身会发出事件，例如：

```
var https = require('https');
var events = require('events');

function GoogleShortener() {
    events.EventEmitter.call(this);
};

GoogleShortener.super_ = events.EventEmitter;
GoogleShortener.prototype = Object.create(events.EventEmitter.prototype, {
    constructor: {
        value: GoogleShortener,
        enumerable: false
    }
});

GoogleShortener.prototype.shorten = function(link) {

    var self = this;
    var data = JSON.stringify({longUrl: link});

    var options = {
        hostname: 'www.googleapis.com',
        port: 443,
        path: '/urlshortener/v1/url',
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Content-Length': data.length
        }
    };

    var resp = '';

    var req = https.request(options, function(res) {
        res.setEncoding('utf8');
        res.on('data', function(d) {
            resp += d;
        }).on('end', function() {
            try {
                var id = JSON.parse(resp).id;
                self.emit('success', id);
            } catch (e) {
                self.emit('error', e);
            }
        });
    }).on('error', function(e) {
        self.emit('error', e);
    });

    req.write(data);
    req.end();

    return self;
};

exports.shorten = function(link) {
    return new GoogleShortener().shorten(link);
}; 
```

用法：

```
var g = require('gshort');
g.shorten('http://www.google.com/').on('success', function(link) {
     console.log(link)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:48:03.103

`return`不会从您希望它返回的函数返回。它立即从它周围的函数返回。考虑：

```
function foo() {
    var bar = function() {
        return "baz";  // This does _not_ return from `foo`! It returns from `bar`
    }
    bar();
}

console.log(foo())  // undefined 
```

# objective-c - TableView 数据在模拟器上不可见

> ID：13804029
> 
> 赞同：0
> 
> 时间：2012-12-10T15:33:44.673
> 
> 标签：objective-c, ios, ipad

我正在使用 TableView 来显示一组数据，但是当我编译应用程序时，似乎没有调用 TableView 的函数。下面是我为此目的使用的代码：

```
- (NSInteger)tableView:(UITableView *)TableView numberOfRowsInSection:(NSInteger)section {

    return listdata.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: @"myCell"];    
    if (cell == nil) {
        cell =  [[ UITableViewCell alloc ] initWithFrame:CGRectZero];
    }

    NSUInteger row = [indexPath row];
    cell.textLabel.text = [self.listdata objectAtIndex:row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:43:10.407

If you're nto using a `UITableViewController` but simply adding a `UITableView` in a `UIViewController`, you need to set the delegate and datasource of your TableView to the VC's class.

You can do this in your storyboard, by ctrl-dragging from the TableView to the ViewController and choosing delegate/datasource, or you can do it programmatically by putting this code in the ViewController's .m, in the `viewDidLoad` method :

```
_tableView.delegate = self;
_tableView.datasource = self; 
```

and add `<UITableViewDelegate, UITableViewDatasource>` to your ViewController's .h :

```
@interface MyViewController : UIViewController <UITableViewDelegate, UITableViewDatasource> 
```

# iphone - 从主屏幕启动的 iPhone 网络应用程序 - 链接仅在页面顶部滚动后才有效？

> ID：13804031
> 
> 赞同：1
> 
> 时间：2012-12-10T15:33:49.003
> 
> 标签：iphone, web-applications, mobile, web, jqtouch

我正在创建一个旨在部署到用户主屏幕的移动 Web 应用程序。该应用程序在 Mobile Safari 和其他移动浏览器中运行良好，但是当部署到主屏幕时，没有任何链接（它们使用 jQTouch 进​​行动画处理，如果这有什么不同的话）将起作用，直到我向上滚动第一页直到它部分离开屏幕 - 之后一切都很好。这是我的 DOM 的问题吗？

# jquery - 自定义字段为空时显示/隐藏 HTML 元素

> ID：13804036
> 
> 赞同：0
> 
> 时间：2012-12-10T15:33:58.793
> 
> 标签：jquery, wordpress, jquery-ui, show-hide, custom-fields

我在页面上有自定义字段，这些字段是从表单上的用户输入中收集的。每次只会插入一个（`customfield1`和`customfield2`）。如果or为空，我不知道如何隐藏整个`div`(class="customfield") 。我无法更改为不同的班级或身份证。`customfield1``customfield2``customfield`

非常感谢你！

```
<div class="customfield">
    <h4>Custom field title 1</h4>
    <?php if( get_post_meta($post->ID, "customfield1", true) ): ?>
    <?php echo get_post_meta($post->ID, "customfield1", true); ?>
    <?php endif; ?>                     
</div>

<div class="customfield">
    <h4>Custom field title 2</h4>
    <?php if( get_post_meta($post->ID, "customfield2", true) ): ?>
    <?php echo get_post_meta($post->ID, "customfield2", true); ?>
    <?php endif; ?>                     
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:43:51.630

```
$(".customfield").filter(function () {
   return $.trim($('p', this).text()) === '';
}).hide();​ 
```

这将隐藏所有`.customfield`包含 a`<p>`且没有文本的元素。

# c++ - 使用交换和弹出进行迭代时擦除向量中的元素

> ID：13804039
> 
> 赞同：5
> 
> 时间：2012-12-10T15:34:08.083
> 
> 标签：c++, vector

我想在迭代向量时擦除某些元素，但下面的代码导致“向量迭代器不可递增”断言失败。

```
for(auto iter=vec.begin(); iter!=vec.end(); ++iter) 
{     
    if((*iter).isDead())
    {        
        std::swap(*iter, vec.back());//swap with the back       
        vec.pop_back();     //erase the element
    } 
} 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T15:38:48.587

仅当您在该迭代中不删除任何元素时，才应递增迭代器：

```
for(auto iter=vec.begin(); iter!=vec.end();) 
{     
    if((*iter).isDead())
    {        
        std::swap(*iter, vec.back());//swap with the back       
        vec.pop_back();     //erase the element
    } 
    else
        ++iter;
} 
```

或者更好的是，将整个循环替换为`remove_if`：

```
vec.erase(std::remove_if(vec.begin(), vec.end(),
    std::bind(&ValueType::isDead, _1)), vec.end()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T15:39:50.270

您正在递增与当前元素交换的元素；如果那是最后一个元素，那么您刚刚删除了它并使您的迭代器无效。如果你没有擦除，你只想增加，使用类似的东西：

```
for(auto iter=vec.begin(); iter!=vec.end();) 
{     
    if((*iter).isDead())
    {        
        std::swap(*iter, vec.back());//swap with the back       
        vec.pop_back();     //erase the element
    } else {
        ++iter;
    }
} 
```

# ruby-on-rails-3 - 在 rails 3 中寻找每个用户、无源代码控制的配置文件覆盖

> ID：13804043
> 
> 赞同：0
> 
> 时间：2012-12-10T15:34:24.343
> 
> 标签：ruby-on-rails-3, development-environment

Rails 3 中有没有办法允许用户使用不进入源代码控制的文件覆盖 Rails 配置？

即使“环境”功能强大，提供了开箱即用的“开发”环境，您仍然希望为开发人员提供一种方法，即使是那些与开发人员机器无关的配置的开发默认值。

我希望是这样的：

*开发人员可以创建一个文件 config/environments/user.rb 永远不会被检入 git。开发人员可以在那里做他们想做的任何事情，而不会意外影响使用同一源代码树的其他人。*

# cpu-usage - 是否应该限制 CPU 使用率？

> ID：13804046
> 
> 赞同：1
> 
> 时间：2012-12-10T15:34:37.893
> 
> 标签：cpu-usage, utilization

我有一个计算密集型应用程序，它需要在没有其他应用程序的 Windows 服务器上运行。该应用程序专为水平可扩展性而设计，因此如果输入负载更多，它可以在多个服务器上运行。我是否应该担心 CPU 使用率并确保每次超过某个阈值时，我应该引入一个新服务器并让应用程序在其上运行以分散负载？或者如果应用程序以 100% 的 CPU 负载连续运行是否可以？

基本上让应用程序以 100% 运行有什么缺点吗？我知道 CPU 过热可能是个问题。此外，应用程序线程之间的上下文切换可能会导致整体吞吐量降低。

任何其他？是否有关于为 CPU 利用率设置阈值的指南？

谢谢， 亚什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:39:20.087

英特尔 (i) 系列 i5 和 i7 允许超线程和涡轮增压，据我所知，这使得 CPU 以 105-110% 的速度运行。

过热将是一个问题，但如果您可以在不同时间为不同核心设置亲和力，如果您有一个四核，则 2 可以在涡轮增压下运行，而其他两个冷却下来。假设你能做到这一点。

我希望我回答了你的问题（在某种程度上）。

# visual-c++ - 本机 sqlite 库在 c++/cli 中崩溃

> ID：13804050
> 
> 赞同：0
> 
> 时间：2012-12-10T15:34:46.770
> 
> 标签：visual-c++, sqlite, c++-cli, clr

**短篇小说**

当为具有公共语言运行时支持的 X64 平台编译 C++ 应用程序并使用其中的本机 sqlite 库时，应用程序在 sqlite3MemRealloc 内崩溃，试图分配大量内存（大约 5GB）。

当在没有 CLR 支持的情况下编译相同的应用程序时，所需的功能会起作用，并且不会尝试分配此数量的内存。我设置了一个带有条件的断点来验证这个事实。

数据库本身是一个 800KB 的小文件，我们正在尝试运行一个简单的“select * from XYZ”查询。使用我们代码库中现有的 sqlite 3.7.11 和最新的 sqlite 3.7.14 进行了尝试。

这个问题是一致的。无论我重建应用程序或使用某些设置多少次 - 在 CLR 支持下它会崩溃，在没有 CLR 支持的情况下它可以工作。

**更长的故事**

我试图开发一个应用程序，该应用程序利用现有的用 C++ 编写的代码库中的代码，但也利用了 .NET 框架的强大功能。

我创建了一个 C++/CLI 应用程序，该应用程序链接到现有代码（在其中使用 sqlite）。我的代码不直接使用 sqlite。使用 sqlite 的现有代码是其余代码库所依赖的本机 C++ 库。所以我不能轻易触摸它，因此不能简单地使用 System.Data.Sqlite。

我通过删除对 .NET 框架的所有依赖项并创建一个简单的应用程序来隔离这个问题，该应用程序只使用现有的本机代码而不使用任何 .NET 框架代码，并编译两次 - 有和没有 CLR 支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:54:40.777

最终，通过使用 memsys5 内存分配器编译 SQLITE 并将其配置为在启动时使用它来解决问题。当它不依赖于 MSVCRT 内存分配而是依赖于它自己的内部分配策略时，一切正常。

似乎由于某种神秘的力量，CLR 的存在干扰了 MSVCRT 的内存分配功能。

更多信息可以在[这里](http://www.sqlite.org/malloc.html)找到。

# perl - 将 perl 变量发布或传递到下一个网页？

> ID：13804051
> 
> 赞同：0
> 
> 时间：2012-12-10T15:34:49.587
> 
> 标签：perl

如何将变量从一个 perl 网页传递到下一个网页，这是我的示例：

这是我想要从第一页传递的内容，`$data[0]`并且`$data[2]`

```
<a href="Month_entries.pl?month='$data[2]'&user='$data[0]' 
       style="text-decoration:none" 
       onclick="return popitup('Month_entries')">$busitotal2</a> 
```

那么`Month_entries.pl`如何在新网页（Month_entries）中调用这些变量？这个过程叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:51:34.917

首先，您应该确保您正在构建您真正想要的 URI。

*   您可能不希望`'`数据中有字符
*   [您的问题应该是使用URI::Encode](https://metacpan.org/module/URI%3a%3aEncode)防止 XSS 和损坏的数据。

然后归结为从查询字符串中获取数据。

你如何做到这一点取决于你的服务器和 Perl 是如何通信的。

如果您使用的是 Plack（这对于现代 Perl 来说通常是一个好主意），那么请查看[Plack::Request](https://metacpan.org/module/Plack%3a%3aRequest)概要中的代码：

```
my $app_or_middleware = sub {
    my $env = shift;
    my $req = Plack::Request->new($env);
    my $path_info = $req->path_info;

    # Change 'query' to whatever you called your key in the query string
    my $query     = $req->param('query');

    my $res = $req->new_response(200);
    $res->finalize;
}; 
```

如果您使用的是框架（例如 Web::Simple、Catalyst 或 Dancer），那么它可能会提供自己的界面。

如果您使用 CGI 并使用 CGI 模块，您将：

```
my $cgi = CGI->new();
my $ query = $cgi->param('query') 
```

# ms-access - 将任务管理器设置为运行 VB 脚本

> ID：13804052
> 
> 赞同：2
> 
> 时间：2012-12-10T15:34:50.767
> 
> 标签：ms-access, vbscript, vba, taskmanager

我让任务管理器调用一个 VB 脚本，它每天在某个时间打开一个访问文档，当这个文档打开时，它设置了 VBA 代码以将文件导出为不同的文件类型。我收到一个错误，不允许它在任务管理器中运行。我真的很困惑，因为这应该是一个非常简单的任务，它实际上是创建一个新的访问程序打开文档，然后退出访问。我知道访问文件中的 VBA 代码是正确的，因为打开文件时它可以正常工作。任务管理器很简单，所以我知道它一定是我的 VB 脚本不正确（可能是格式化？），因为我双击它运行我得到一个运行错误。我只是设置任务管理器打开访问文件，但它不会退出访问所以我们就这样走了。下面是我脚本中的代码。

```
 dim accessApp as variant
 set accessApp = createObject("Access.Application")
 accessApp.OpenCurrentDataBase("File Location")
 accessApp.Quit
 set accessApp = nothing 
```

我已经在网上做了一些搜索，但运气不佳。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:41:53.133

您不能在带有 VBScript 的 Dim 语句中使用类型：

```
 dim accessApp
 set accessApp = createObject("Access.Application")
 accessApp.OpenCurrentDataBase("z:\docs\test.accdb")
 ''For testing purposes, comment out when testing is finished
 msgbox accessapp.name
 accessApp.Quit
 set accessApp = nothing 
```

# .net - c# - 是否可以在 .Net v3.5 上使用 Castle.Facilities.NHibernate？

> ID：13804053
> 
> 赞同：1
> 
> 时间：2012-12-10T15:34:57.293
> 
> 标签：.net, nhibernate, inversion-of-control, castle-windsor, windsor-nhfacility

我正在使用 Windsor 和 NHibernate 开发一个 ASP.NET 应用程序。我想使用 Castle 的新[NHibernateFacility](https://github.com/haf/Castle.Facilities.NHibernate/wiki "NHibernate 设施")，但我被困在 .NET 3.5 上，而 NHibernateFacility 和 AutoTx 仅针对 .NET 4。

在 v3.5 上重新编译它们是否安全？如果没有，是否有另一种简单的方法可以为每个应用程序维护多个 ISessionFactory？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:48:17.873

最简单的方法是`IDictionary<string, ISessionFactory>`。如果访问是单线程的，或者所有会话工厂在启动时都已初始化，则不需要同步。

# mysql - mysql - 使用子选择检索值

> ID：13804056
> 
> 赞同：2
> 
> 时间：2012-12-10T15:35:02.597
> 
> 标签：mysql, sql, subquery

```
SELECT  snr, nsname FROM type
WHERE snr in (SELECT snr FROM diet 
WHERE foodnr in (SELECT foodnr FROM food WHERE foodtype = 'FISH' )); 
```

在我的数据库中有更多的动物吃同一种食物但吃不同类型的食物，我如何得到只吃那种食物而不吃其他食物的动物。

呸，如果没有我的整个数据库，这是不可能回答的，我觉得只是问这个问题就像个混蛋，因为它太模糊了，但我想做的是我需要过滤掉除了 FISH 之外有更多食物类型的动物

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:36:44.463

`JOIN`而是表格，如下所示：

```
SELECT t.snr, t.nsname 
FROM type t 
INNER JOIN diet d ON t.snr = d.snr
INNER JOIN food f ON t.foodnr = f.foodnr
WHERE t.foodtype = 'FISH'
GROUP BY t.foodtype
HAVING COUNT(DISTINCT t.foodtype) = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:41:57.460

注意我假设您的架构如下：

*   类型：snr，nsname
*   饮食：snr，foodnr
*   食物：foodnr，食物类型

* * *

您可以使用`NOT EXISTS`：

```
SELECT t.snr, t.nsname 
FROM type t 
INNER JOIN diet d ON t.snr = d.snr
INNER JOIN food f ON d.foodnr = f.foodnr
WHERE f.foodtype = 'FISH'
AND NOT EXISTS
(
    SELECT 1 
    FROM diet dd
    INNER JOIN food ff ON dd.foodnr = ff.foodnr
    WHERE ff.foodtype <> 'FISH'
    AND dd.snr = t.snr
) 
```

或者您可以使用反连接模式：

```
SELECT t.snr, t.nsname 
FROM type t 
INNER JOIN diet d ON t.snr = d.snr
INNER JOIN food f ON d.foodnr = f.foodnr AND f.foodtype = 'FISH'
LEFT OUTER JOIN diet dd ON t.snr = dd.snr AND f.foodnr <> dd.foodnr
WHERE f.foodtype = 'FISH'
AND dd.snr IS NULL 
```

# javascript - 在元素下方对齐 div 并水平居中

> ID：13804059
> 
> 赞同：0
> 
> 时间：2012-12-10T15:35:12.080
> 
> 标签：javascript, jquery, html, css, dom

假设我有一个这样的上下文菜单

```
 |here|there|somewhere| 
```

这很简单

```
<ul>
    <li>here</li>
    ...
<ul> 
```

和 onclick 我想添加一个像这样的图像的 div：

```
 |here|there|somewhere|
            ^ 
```

在元素的中间水平对齐，在其下方垂直对齐。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:38:57.770

有很多方法，特别是取决于你想要做什么，但这里有一个：

```
$("li").on('click', function () {
   $("<div>").width($(this).width())
      .css({'display': 'inline-block', 'text-align': 'center'})
      .text('here')
      .appendTo(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:46:42.160

我会通过css将图像作为背景添加到菜单项中，然后将其放置在底部的中心：

**CSS：**

```
li { background: url(your_image_url) no-repeat center bottom; } 
```

**Javascript：**

```
document.getElementById('id').style.background = "url(your_image_url) no-repeat center bottom"; 
```

**查询：**

```
$('#id').css('background','url(your_image_url) no-repeat center bottom'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:58:00.230

嘿，伙计，为此目的使用 jquery offset() 函数！

```
$("ul li").click( function() {
var pos = $(this).offset();
var width = $(this).width();
var height = $(this).height();
var halfW = width/2;
var widthOfImageDiv = 20; // assume that div with image has width of 20px
var halfWIMG = widthOfImageDiv/2;
var posLeft = pos.left+halfW-halfWIMG;
var posTop = pos.top+height;
$(".imageDiv").css({ 'position':'absolute', 'top':posTop+"px", 'left':posLeft+"px" });
$(".imageDiv").show();
}); 
```

# java - 正则表达式 (Java) 中的匹配字符 *

> ID：13804061
> 
> 赞同：1
> 
> 时间：2012-12-10T15:35:15.103
> 
> 标签：java, regex

想要匹配字符 * in

> 字符串 s="foobar*";

我想用一个正则表达式字符获得确切的字符 *，我不想使用排除其他所有内容

> s.matches("[^\w]");

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:37:05.170

要匹配星号，您需要此正则表达式：

```
Pattern asteriskPattern = Pattern.compile("\\*"); 
```

但我没有看到这种模式的良好用途。如果您只想检查您的字符串是否包含它，请使用

```
boolean stringContainsAsterisk = string.contains("*"); 
```

或找到它的索引

```
int indexOfAsterisk = string.indexOf("*"); 
```

现在如果它不包含星号，则值为 -1，或者它在字符串中的索引值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:37:08.823

以下情况如何：

```
s.matches("\\*"); 
```

# ruby - Ruby：自定义 gem 需要其中的模块“要求”

> ID：13804062
> 
> 赞同：3
> 
> 时间：2012-12-10T15:35:19.317
> 
> 标签：ruby, module, gem, require

我已经构建了一个自定义 Ruby gem。调用它`MyGem`，然后文件`lib/innermodule.rb`包含：

```
module MyGem
    module InnerModule
        def self.foo(); puts "Hello world!"; end
    end
end 
```

要从另一个正在开发的 gem 中引用它，我必须这样做：

```
require 'mygem'
require 'innermodule' 
```

这是正常行为，还是 gemspec 有问题`MyGem`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:21:34.257

我不知道这是否一定是您的 gemspec 的问题，因为您通常只指定要包含在 gem 中的文件。Gemspecs 与 gem 进入另一个应用程序的方式没有任何关系。

在命名和文件路径约定方面，您的 gem 的构建/打包方式听起来像是一个问题。

构建 gems 和我上面提到的内容通常遵循一些常见的约定

[http://guides.rubygems.org/patterns/](http://guides.rubygems.org/patterns/)有一个很好的概述。

基本上，您通常希望创建一个位于“lib”目录中的文件（通常是 gem 的名称）。在这种情况下，“lib/mygem.rb”将对 gem 的内部依赖项有单独的要求。

```
#lib/mygem.rb
require 'innermodule' 
```

然后在任何其他应用程序中包含 gem（以及内部模块），你可以这样做

```
require 'mygem' 
```

# android - 在绘画活动中将视频设置为画布背景

> ID：13804065
> 
> 赞同：0
> 
> 时间：2012-12-10T15:35:57.370
> 
> 标签：android, video, canvas, draw, paint

我需要将视频作为画布的背景。当我暂停它时，可以在那个框架上作画。这可能吗？

我首先考虑播放视频，然后附加暂停和捕获按钮。如果我暂停，然后按捕获，这将使用该屏幕捕获创建一个位图，我将能够在其上绘制并保存它，然后，如果我返回，我将返回到视频，在我暂停的时间。但是如果可能的话，我想更动态地做，就像说的那样，把画布的背景作为视频，只要我想，只要我想暂停它并在上面画画，而不改变活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:00:30.693

我会将我会用 PaintActivity 和 videoview 膨胀的 myView 放在相同的相对布局中。我将绘画活动放在前面，并放置一个透明背景。我将视频设置在视频视图的背面。

# dns - CDN 使用新 DNS 需要多长时间

> ID：13804066
> 
> 赞同：0
> 
> 时间：2012-12-10T15:35:55.883
> 
> 标签：dns, amazon, cdn, amazon-cloudfront

我使用 Amazom CloudFront 作为 CDN，我们可能需要根据情况在两个系统之间进行更改。

这是我需要准备的——

1.  CDN每次解析新地址需要多少时间（新系统、旧系统）？域传播的同时？
2.  它在更改之前收集的缓存呢？

我正在阅读这篇文章[http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/HowToUpdateDistribution.html](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/HowToUpdateDistribution.html)

如果有人分享他/她的经验会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:29:28.300

当您在任何 CDN 上设置新容器时，您正在使用它们的域，这些域已经在世界范围内传播。如果您打算使用自己的域而不是他们的域，例如 cdn.yourdomain.com 或 static01.yourdomain.com 等，那么标准传播时间就会发挥作用。

您使用 CDN 发现的是，一旦您将文件上传到服务器，“传播”在所有网络上复制您的文件需要一些时间，例如说他们的主服务器在美国，那些从英国访问文件的人将从美国下载和在所有文件都通过网络克隆之前不是本地服务器，这需要几分钟到几个小时，具体取决于文件的数量和大小，好处是每个人都可以毫无延迟地使用这些文件，但可以获得全速优势这需要一点时间。

就缓存而言，它非常简单，您可以在容器上设置 TTL 过期时间，这意味着它们会被缓存等等。我个人使用 72 小时 TTL，并且受到 Google 和其他搜索引擎的青睐。

希望这可以帮助。

# iphone - 如果它是应用程序的第一次运行，请打开设置

> ID：13804069
> 
> 赞同：1
> 
> 时间：2012-12-10T15:36:02.263
> 
> 标签：iphone, objective-c, ios, uistoryboard

我正在开发一个最新的 iPhone 应用程序`SDK`和`XCode`.

我正在使用故事板，当用户第一次运行应用程序时，我不知道如何打开视图。

我将检查是否有用户`preferences`保存，如果没有，我将打开设置视图：

```
prefs = [NSUserDefaults standardUserDefaults];

if ([prefs stringForKey:APP_LANGUAGE_KEY] == nil)
{
    // Open SettingsViewController;
}
else
{
    // Continue usually.
} 
```

这是我的故事板： ![在此处输入图像描述](../Images/8b5fb17287c6181bd7749e4b67fe6699.png)

**我该怎么做？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:41:40.370

你几乎做对了。只需确保您在第一次启动时设置了密钥。

```
NSString *key = @"AppWasLaunchedInThePast";
BOOL firstLaunch = ![[NSUserDefaults standardUserDefaults] objectForKey:key];
if (firstLaunch) {
    // First launch. Open settings.
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"FileName" bundle:nil];
    NSString *anID = @"SettingsViewController"; // or whatever you set in IB.
    SettingsViewController *vc = [sb instantiateViewControllerWithIdentifier:anID];
    // push vc to your navigation controller, or present it modally here.
} else {
    // Not first launch.
}
// Make sure we remember that the app was launched:
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:key];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:48:31.587

打开视图使用

```
SettingsViewController *settingsView = [self.storyboard instantiateViewControllerWithIdentifier:@"SettingsViewController"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:26:02.777

您可以在应用程序初始视图控制器首次启动时显示模态视图。

将您的第一次启动检查放在初始视图控制器的 viewDidAppear 中并调用：

```
 [self presentModalViewController:vc animated:YES]; 
```

# java - JVM 能否更智能地共享字符串数据？

> ID：13804071
> 
> 赞同：0
> 
> 时间：2012-12-10T15:36:12.437
> 
> 标签：java, string

看看这个测试

```
 String s1 = "1234";
    String s2 = "123";
    Field field = String.class.getDeclaredField("value");
    field.setAccessible(true);
    char[] value1 = (char[]) field.get(s1);
    char[] value2 = (char[]) field.get(s2);
    System.out.println(value1 == value2); 
```

它打印出来`false`，这意味着 JVM 为 s1 和 s2 保存了两个不同的 char 数组。谁能解释为什么 s1 和 s2 不能共享同一个字符数组？似乎 java.lang.String 是为内容共享而设计的，不是吗？

注意：我不了解所有 JVM。这是 Oracle 的 Java HotSpot(TM) 客户端 VM 22.1-b02 (JRE 1.7)。

**更新**

另一方面，如果部分共享很少见（似乎仅适用于由 String.substring 创建的字符串），那么为什么所有字符串都应该具有`int count`和`int offset`字段？它是 8 个无用字节。而这不仅是大小，也是创作速度。对象越大，初始化的时间就越长。这是一个测试

```
 long t0 = System.currentTimeMillis();
    for (int i = 0; i < 10000000; i++) {
        new String("xxxxxxxxxxxxx");
    }
    System.out.println(System.currentTimeMillis() - t0); 
```

大约需要 200 毫秒。如果我使用这个类

```
class String2 {
    char[] value;
    String2(String2 s) {
        value = s.value;
    }
} 
```

大约需要 140 毫秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:39:33.593

> 谁能解释为什么 s1 和 s2 不能共享同一个字符数组？

他们*可以*，他们只是没有，可能是因为 JVM 启动时间会受到通过[字符串`intern`池](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)查找部分匹配的影响。

值得注意的是，对于非实习字符串，它们*可以*共享一个 char 数组，在某些情况下：

```
String s1 = "1234";
String s2 = s1.substring(0, 3); 
```

...至少通过 OpenJDK 6。显然，在[OpenJDK7 中，它们不再共享](http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/file/8c2c5d63a17e/src/share/classes/java/lang/String.java) *（感谢[Marko Topolnik在](https://stackoverflow.com/users/1103872/marko-topolnik)[这里](https://stackoverflow.com/a/13803521/157247)教我）*。

有趣的是，如果你实习的话，Sun 的 JVM 1.6 会将它们分开：

```
String s1 = "1234";
String s2 = s1.substring(0, 3);
Field field = String.class.getDeclaredField("value");
field.setAccessible(true);
char[] value1 = (char[]) field.get(s1);
char[] value2 = (char[]) field.get(s2);
System.out.println(value1 == value2);
s2 = s2.intern();
value2 = (char[]) field.get(s2);
System.out.println(value1 == value2); 
```

我得到：

```
真的
错误的
```

我猜它不喜欢在实习生池中有字符串是其他字符串的子集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T15:38:35.667

> 谁能解释为什么 s1 和 s2 不能共享同一个字符数组？

因为`"1234"`与 的字符序列不同`"123"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T07:43:42.020

我的看法是 JVM 在实习字符串时没有达到那个长度的原因是它根本不值得：

一个幼稚的实习实现可以*最大限度地减少*您建议的空间使用量，其`O(N^2)`性能将`N`是在 JVM 的生命周期中实习的唯一字符串数据的字符数。（好吧，它比那复杂一点......但它*很贵*。）

试图避免该`O(N^2)`问题的实现*通常*最终会使用比共享字符数组节省的更多空间来避免该问题。

String 实现（包括实习）是一种实用的实现，它平衡了相互竞争的关注点，以便在对一系列实际应用程序进行平均时提供最佳性能。

# html - CSS 媒体查询对移动设备没有影响

> ID：13804079
> 
> 赞同：1
> 
> 时间：2012-12-10T15:36:39.210
> 
> 标签：html, css, mobile, browser, frontend

我正在构建一个需要高度可扩展/响应的 tumblr 主题。它几乎只是居中网格中的帖子。我正在使用 CSS 媒体查询来跟踪浏览器窗口的大小，从而相应地调整网格的大小/居中。它们目前看起来像这样：

```
<link rel='stylesheet' media='screen and (max-width: 640px)' href='URL.css' />
<link rel='stylesheet' media='screen and (min-width: 640px) and (max-width: 959px)' href='URL.css' />
 <link rel='stylesheet' media='screen and (min-width: 960px) and (max-width: 1279px)' href='URL.css' />
 <link rel='stylesheet' media='screen and (min-width: 1280px) and (max-width: 1599px)' href='URL.css' />
 <link rel='stylesheet' media='screen and (min-width: 1600px) and (max-width: 1919px)' href='URL.css' /> 
```

第一个最大宽度为 640 像素，当我将 Firefox/chrome 窗口的大小调整为较小时，它可以完美运行，但在移动设备上似乎根本不起作用。我的手机是 Droid Razr Maxx，它似乎默认为 960 像素宽度，即使是“纵向”方向也是如此。

我尝试将样式默认为移动大小样式，但得到相同的结果，而且由于其他原因（Internet Explorer 就是其中之一），这也不是最佳的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-30T20:46:33.793

将此元标记放在您的 html 头中：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" /> 
```

许多现代智能手机试图缩放它们的视口，这会导致一切都失败。此元标记可防止这种缩放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:38:53.530

我经常处理查询 - 问题有时是您在移动浏览器中看到的不是设备规格可能显示的确切像素数量，特别是如果您使用任何类型的头部缩放。我喜欢做的事情是使用一个非常简单的 jquery 警报检查视口/文档的大小，以准确确定我正在使用的维度。[http://responsejs.com/labs/dimensions/](http://responsejs.com/labs/dimensions/)是一个很棒的网站，可以向您展示捕捉视口宽度和高度的各种方法。

我也更喜欢使用“all and ....”而不是“screen and ....”

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:37:42.213

找到这个人： [http ://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)

看起来“视口”元标记是我最好的新朋友。在我的手机和我办公室同事的 iPhone 上修复了它。

感谢您的建议！

# odp.net - ODP.NET 是存储过程所需的 OracleParameter 字段吗？

> ID：13804090
> 
> 赞同：2
> 
> 时间：2012-12-10T15:37:07.730
> 
> 标签：odp.net

有谁知道没有在 OracleParameter 上设置所有字段值以执行存储过程的后果？

例如，是否需要提供 OracleDbTypeEx、Size？

我会简单地提供名称、值、inOrOut？

你怎么看？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:43:34.347

对于输入参数，如果未指定，则从值推断类型。这就是说为了代码的整洁性和可维护性，我倾向于不为输入设置这些属性，使用与 SqlCommand 类上的 AddWithValue 方法类似的方法中的 Parameters.Add 方法：cmd.Parameters.Add("myvarname", varvalue)。

另一方面，长度确实会改变行为。IIRC，如果您不指定长度，则当值长度超过参数长度时会引发一种溢出异常。如果您确实设置了长度，则输入将被修剪为该长度，至少在 String/Varchar 的情况下。我倾向于远离设置长度，因为我更愿意收到截断警报，而是限制前端的输入。

输出参数是另一回事。不设置输出变量类型和长度往往会导致“字符串缓冲区太小”和“非法变量名称/编号”，因此在大多数情况下，您确实需要为输出参数设置这些属性。

# c - 获取 C 中的时区 GMT 偏移量

> ID：13804095
> 
> 赞同：16
> 
> 时间：2012-12-10T15:37:17.693
> 
> 标签：c, datetime, timezone, libc

我正在使用标准[`mktime`](http://linux.die.net/man/3/mktime)函数将 a`struct tm`转换为纪元时间值。这些`tm`字段在本地填充，我需要将纪元时间设为 GMT。`tm`有一个`gmtoff`字段允许您为此目的以秒为单位设置本地 GMT 偏移量。

但我不知道如何*获取*这些信息。当然一定有一个标准函数可以返回偏移量吗？怎么`localtime`做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T16:21:19.600

只需执行以下操作：

```
#define _GNU_SOURCE /* for tm_gmtoff and tm_zone */

#include <stdio.h>
#include <time.h>

/* Checking errors returned by system calls was omitted for the sake of readability. */
int main(void)
{
  time_t t = time(NULL);
  struct tm lt = {0};

  localtime_r(&t, &lt);

  printf("Offset to GMT is %lds.\n", lt.tm_gmtoff);
  printf("The time zone is '%s'.\n", lt.tm_zone);

  return 0;
} 
```

注意：自 epoch 返回的秒数按`time()`格林威治标准测量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T16:32:25.943

> localtime 是怎么做的？

根据`localtime`手册页

> localtime() 函数的行为就像它调用 tzset(3) 并设置外部变量 tzname 与有关当前时区的信息， ***时区* 与协调世界时 (UTC) 和本地标准时间之间的差异（以秒为单位）**

所以你可以打电话`localtime()`，你会有所不同`timezone`或打电话`tzset()`：

```
extern long timezone;
....
tzset();
printf("%ld\n", timezone); 
```

注意：如果您选择`localtime_r()`注意不需要设置这些变量，则需要先调用`tzset()`set `timezone`：

> 根据 POSIX.1-2004，localtime() 的行为就像调用了 tzset() 一样，**而 localtime_r() 没有这个要求。对于可移植代码 tzset() 应该在 localtime_r() 之前调用**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-10T17:27:59.090

我想我应该在问之前做更多的搜索。事实证明，有一个鲜为人知的[`timegm`](http://www.kernel.org/doc/man-pages/online/pages/man3/timegm.3.html)功能与`gmtime`. 它在 GNU 和 BSD 上受支持，这对我的目的来说已经足够了。更便携的解决方案是将`TZ`环境变量的值临时设置为“UTC”，然后使用`mktime`，然后再设置`TZ`回去。

但`timegm`对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-19T07:07:34.997

获取本地时间偏移功能的通用版本在这里。我从stackoverflow中的[这个答案](https://stackoverflow.com/q/32424125/3239341)
中 借用了一些代码。

```
int time_offset()
{
    time_t gmt, rawtime = time(NULL);
    struct tm *ptm;

#if !defined(WIN32)
    struct tm gbuf;
    ptm = gmtime_r(&rawtime, &gbuf);
#else
    ptm = gmtime(&rawtime);
#endif
    // Request that mktime() looksup dst in timezone database
    ptm->tm_isdst = -1;
    gmt = mktime(ptm);

    return (int)difftime(rawtime, gmt);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-30T14:35:56.213

这是适用于所有标准 C（和 C++）平台的可移植解决方案：

```
const std::time_t epoch_plus_11h = 60 * 60 * 11;
const int local_time = localtime(&epoch_plus_11h)->tm_hour;
const int gm_time = gmtime(&epoch_plus_11h)->tm_hour;
const int tz_diff = local_time - gm_time; 
```

`std::`使用 C++ 时添加命名空间。结果以小时为单位，范围为 [-11, 12]；

**说明：** 我们只是将日期时间“1970-01-01 11:00:00”转换为`tm`两次结构 - 使用本地时区和 GMT。结果是小时部分之间的差异。

选择“11:00::00”是因为这是我们在全球范围内拥有相同日期的唯一时间点（考虑到格林威治标准时间）。由于这个事实，我们不必在计算中考虑随着日期变化而产生的额外魔力。

**警告**

我的答案的先前版本仅适用于 linux：

```
// DO NOT DO THAT!!
int timezonez_diff = localtime(&epoch_plus_11h)->tm_hour -
                     gmtime(&epoch_plus_11h)->tm_hour; 
```

这可能不起作用，因为结果`tm`对象的存储作为指针返回`localtime`并且`gmtime`可能是共享的（并且它位于 windows/msvc 上）。这就是我引入临时计算的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-10T16:00:23.090

我相信至少在 linux 中是这样的：时区信息来自 /usr/share/zoneinfo/。localtime 读取 /etc/localtime，它应该是 zoneinfo 中相应文件的副本。您可以通过`zdump -v`对时区文件执行操作来查看里面的内容（zdump 可能在 sbin 中，但您不需要提升权限来读取时区文件）。这是其中的一个片段：

```
/usr/share/zoneinfo/EST5EDT 2033 年 11 月 6 日星期日 05:59:59 UTC = 2033 年 11 月 6 日星期日 01:59:59 EDT isdst=1 gmtoff=-14400
/usr/share/zoneinfo/EST5EDT 2033 年 11 月 6 日星期日 06:00:00 UTC = 2033 年 11 月 6 日星期日 01:00:00 EST isdst=0 gmtoff=-18000
/usr/share/zoneinfo/EST5EDT 2034 年 3 月 12 日星期日 06:59:59 UTC = 2034 年 3 月 12 日星期日 01:59:59 EST isdst=0 gmtoff=-18000
/usr/share/zoneinfo/EST5EDT 2034 年 3 月 12 日星期日 07:00:00 UTC = 2034 年 3 月 12 日星期日 03:00:00 EDT isdst=1 gmtoff=-14400
/usr/share/zoneinfo/EST5EDT 2034 年 11 月 5 日星期日 05:59:59 UTC = 2034 年 11 月 5 日星期日 01:59:59 EDT
```

如果你愿意，我想你可以自己解析这个。我不确定是否有一个只返回 gmtoff 的 stdlib 函数（很可能有，但我不知道......）

**编辑：** man tzfile 描述了 zoneinfo 文件的格式。您应该能够简单地映射到适当类型的结构中。这似乎是 zdump 基于它所做的事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-11T01:43:19.973

这是受@Hill 和@friedo 答案启发的两条线：

```
#include <time.h>
...
time_t rawtime = time(0);
timeofs = timegm(localtime(&rawtime)) - rawtime; 
```

以秒为单位返回与 UTC 的偏移量。

不需要`_GNU_SOURCE`定义，但请注意，这`timegm`不是 POSIX 标准，可能在 GNU 和 BSD 之外不可用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-25T10:00:24.947

就这样结束了。当然 tm_secs 是多余的，只是为了保持一致性。

```
int timezone_offset() {
    time_t zero = 0;
    const tm* lt = localtime( &zero );
    int unaligned = lt->tm_sec + ( lt->tm_min + ( lt->tm_hour * 60 ) ) * 60;
    return lt->tm_mon ? unaligned - 24*60*60 : unaligned;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-13T00:17:21.603

这是我的方式：

```
time_t z = 0;
struct tm * pdt = gmtime(&z);
time_t tzlag = mktime(pdt); 
```

替代自动本地存储`struct tm`：

```
struct tm dt;
memset(&dt, 0, sizeof(struct tm));
dt.tm_mday=1; dt.tm_year=70;
time_t tzlag = mktime(&dt); 
```

`tzlag`，以秒为单位，将是 UTC 偏移量的负数；与 UTC 相比，您的时区标准时间滞后：

`LocalST + tzlag = UTC`

如果您还想考虑“夏令时” ，请在申请后（或使用 获得后）减去特定本地时间`tm_isdst`的`tzlag`位置。`tm_isdst``struct tm``mktime``localtime`

工作原理：
该集合`struct tm`用于“纪元”时刻，即 1970 年 1 月 1 日，对应于0。在该日期`time_t`调用会将其转换为 UTC（因此得到 0），然后从中减去 UTC 偏移量为了产生输出。因此它产生 UTC_offset 的负数。`mktime()``time_t``time_t`

# sql - 如何在 SQL 中获取前导 0 的月份和日期？（例如 9 => 09）

> ID：13804096
> 
> 赞同：68
> 
> 时间：2012-12-10T15:37:18.367
> 
> 标签：sql, tsql

```
DECLARE @day CHAR(2)

SET @day = DATEPART(DAY, GETDATE())

PRINT @day 
```

如果今天是 12 月 9 日，上面将打印“9”。

我想打印“09”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-10T15:41:56.353

用 00 填充它并取右 2：

```
DECLARE @day CHAR(2)

SET @day = RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(DAY, GETDATE())), 2)

print @day 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-06-09T21:01:36.440

**对于 SQL Server 2012 及更高版本，带有前导零：**

```
 SELECT FORMAT(GETDATE(),'MM') 
```

**没有：**

```
SELECT    MONTH(GETDATE()) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-11-08T06:34:35.593

使用 SQL Server 的日期样式来预先设置日期值的格式。

```
SELECT
    CONVERT(varchar(2), GETDATE(), 101) AS monthLeadingZero  -- Date Style 101 = mm/dd/yyyy
    ,CONVERT(varchar(2), GETDATE(), 103) AS dayLeadingZero   -- Date Style 103 = dd/mm/yyyy 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-01-17T09:38:26.280

试试这个 ：

```
SELECT CONVERT(varchar(2), GETDATE(), 101) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-29T16:13:32.383

领先0天

```
SELECT FORMAT(GetDate(), 'dd') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-18T15:53:08.047

**SQL Server 2012+**（月*和*日）：

```
SELECT FORMAT(GetDate(),'MMdd') 
```

如果您决定也想要年份，请使用：

```
SELECT FORMAT(GetDate(),'yyyyMMdd') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-10T15:49:41.390

```
Select Replicate('0',2 - DataLength(Convert(VarChar(2),DatePart(DAY, GetDate()))) + Convert(VarChar(2),DatePart(DAY, GetDate()) 
```

干净得多，他在从脸颊上取下舌头后说。

通常当你必须开始在 SQL 中做这种事情时，你需要从 can I 切换到 should I。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-11T14:41:15.523

```
SELECT RIGHT('0' 
             + CONVERT(VARCHAR(2), Month( column_name )), 2) 
FROM   table 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-10T16:00:27.283

## 滚动你自己的方法

这是左填充任何东西的通用方法。这个概念是使用 REPLICATE 创建一个版本，它只不过是填充值。然后将其与实际值连接起来，如果数据可以为 NULL，则使用 isnull/coalesce 调用。你现在有一个字符串，它是目标大小的两倍，正好是目标长度或介于两者之间。现在只需简单地去掉 N 个最右边的字符，你就有了一个左填充字符串。

```
SELECT RIGHT(REPLICATE('0', 2) + CAST(DATEPART(DAY, '2012-12-09') AS varchar(2)), 2) AS leftpadded_day 
```

## 本地化

[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)函数提供了多种获取预格式化日期的方法。格式 103 指定`dd`保留前导零的方法，因此只需切掉前 2 个字符。

```
SELECT CONVERT(char(2), CAST('2012-12-09' AS datetime), 103) AS convert_day 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-11T09:56:08.130

```
DECLARE @day CHAR(2)

SET @day = right('0'+ cast(day(getdate())as nvarchar(2)),2)

print @day 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-17T07:58:41.487

采用

```
CONVERT(CHAR(2), DATE_COLUMN, 101) 
```

获取带有 2 个字符的月份部分和

```
CONVERT(CHAR(2), DATE_COLUMN, 103) 
```

白天。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-29T20:25:07.930

如果这是你想要的，我可以建议这个用户定义的函数：

```
CREATE FUNCTION dbo.date_code (@my_date date) RETURNS INT
BEGIN;
    DECLARE @retval int;
    SELECT @retval = CAST(CAST(datepart(year,@my_date) AS nvarchar(4))
                        + CONVERT(CHAR(2),@my_date, 101)
                        + CONVERT(CHAR(2),@my_date, 103) AS int);
    RETURN @retval;
END
go 
```

调用它：

```
SELECT dbo.date_code(getdate()) 
```

它从今天开始返回

> 20211129

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-04-06T09:41:19.943

select right('0000' + cast(datepart(year, GETDATE()) as varchar(4)), 4) + '-'+ + right('00' + cast(datepart(month, GETDATE()) as varchar (2)), 2) + '-'+ + right('00' + cast(datepart(day, getdate()) as varchar(2)), 2) as YearMonthDay

# c# - c# 到 vb.net 的转换

> ID：13804097
> 
> 赞同：6
> 
> 时间：2012-12-10T15:37:22.253
> 
> 标签：c#, asp.net, .net, vb.net, c#-to-vb.net

我正在尝试将 c# 块转换为 vb。

我使用 developerfusion.com 上的服务进行转换，但是当我将其粘贴到 Visual Studio 中时，它抱怨“键”语句（“在对象初始化程序中初始化的字段或属性的名称必须以'开头。' ”）。

我玩了几个小时的代码试图解决这个问题，但我所做的一切只会导致更多的错误。

所以我开始怀疑 developerfusion 的转换是否正确。

这是 vb.net 的 c#。

我不确定“钥匙”是从哪里来的，想知道是否有人可以启发我。

谢谢！

从

```
var combinedResults  = 
cars.Select(c=>new carTruckCombo{ID=c.ID,make=c.make,model=c.model})
.Union(tracks.Select(t=>new carTruckCombo{ID=t.ID,make=t.make,model=t.model})); 
```

至

```
Dim combinedResults = cars.[Select](Function(c) New carTruckCombo() With { _
Key .ID = c.ID, _
Key .make = c.make, _
Key .model = c.model _
}).Union(tracks.[Select](Function(t) New carTruckCombo() With { _
Key .ID = t.ID, _
Key .make = t.make, _
Key .model = t.model _
})) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T15:38:33.497

去除`Key`

改为这样做：

```
 Dim combinedResults = cars.Select(Function(c) New carTruckCombo() With { _
    .ID = c.ID, _
        .make = c.make, _
        .model = c.model _
     }).Union(tracks.Select(Function(t) New carTruckCombo() With { _
        .ID = t.ID, _
        .make = t.make, _
        .model = t.model _
     })) 
```

作为旁注，每当我需要它时，这个转换器总是对我更好：

[http://converter.telerik.com/](http://converter.telerik.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T15:45:59.740

在 C# 中，创建匿名类型时，它会使用匿名类型的所有属性为您生成一个`Equals`和实现。`GetHashCode`

VB.NET 做了类似的事情，但它要求您将[`Key`修饰符](http://msdn.microsoft.com/en-us/library/bb531349%28v=vs.90%29.aspx)放在匿名类型的属性上。

C#“只是这样做”，其中 VB.NET 使您可以灵活地定义在相等中使用哪些属性。由于 C# 使用了所有属性，因此转换器为您`Key`提供所有内容，因此相等的工作方式相同。

好的，这就是`Key`修饰符的背景故事，那么您的转换有什么问题？

转换器似乎错误地假设您使用的是匿名类型，但事实并非如此。您的类型是这样的`carTruckCombo`，因此它们的`Key`修饰符不起作用。删除`Key`修饰符将解决问题，因为您有一个定义明确的类，您可以在那里实现您的相等性。

# c - 为什么有些程序比我的要快？

> ID：13804099
> 
> 赞同：0
> 
> 时间：2012-12-10T15:37:30.940
> 
> 标签：c, image, performance, loading

今天我决定从一个文件将 7500 万个值加载到内存中，并意识到它真的很慢。该文件是一张 5000 x 5000 的图片，我知道这是不切实际的巨大但它有利于测试。我的程序所做的是将图片加载到数组中，以便对其进行编辑。问题是我用一个名为paint.net的程序制作了这张照片，它在30秒内加载它没问题。那么这些图像编辑程序是如何运行得如此之快的呢？我用 C 语言编写了我的程序，所以它应该和其他任何程序一样快，对吧？我还确保加载图像的循环非常基本，并且没有额外的代码无缘无故减慢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:41:31.627

为什么不阅读其他程序的源代码？Paint.NET 不是开源的，但同样擅长编辑图像的 GIMP[是](http://www.gimp.org/source/howtos/gimp-git-build.html).

# vba - 以特定顺序将多个页面导出为 PDF

> ID：13804102
> 
> 赞同：3
> 
> 时间：2012-12-10T15:37:55.903
> 
> 标签：vba, excel, pdf-generation, excel-2010

我正在尝试将工作簿的两个不同工作表中的页面导出为 1 个 PDF。

但是，我希望页面按以下顺序排列：Sheet1 中的 1 页，Sheet2 中的 5 页，Sheet1 中的 2 页。

目前我将这些导出为 3 个单独的 PDF，然后将它们合并到另一个应用程序中。

我一直在使用的代码如下：

```
ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, FileName:=sPath & quotept1filename, Quality:=xlQualityStandard, IncludeDocProperties:=True, IgnorePrintAreas:=False, From:=1, To:=1, OpenAfterPublish:=False

ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, FileName:=sPath & quotept2filename, Quality:=xlQualityStandard, IncludeDocProperties:=True, IgnorePrintAreas:=False, From:=2, To:=3, OpenAfterPublish:=False

Sheets("PPA Print Ready Quote").Select

ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, FileName:=sPath & optionsfilename, Quality:=xlQualityStandard, IncludeDocProperties:=True, IgnorePrintAreas:=False, From:=1, To:=NumberOfOptions, OpenAfterPublish:=False 
```

如何让它们按照我想要的顺序打印为一个 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:48:22.540

这似乎不是最好的方法，但我个人使用 PrimoPDF 之类的驱动程序来执行此操作。通过打印 PrimoPDF 所需的所有页面，您将获得一个 pdf 文件，其顺序与发送到标准打印机时出现的顺序相同。

它可以在这里免费下载[http://www.primopdf.com/](http://www.primopdf.com/)

# function - 在 Arduino 代码 (C/C++) 中调用函数时，函数前的句点是什么意思？

> ID：13804103
> 
> 赞同：3
> 
> 时间：2012-12-10T15:38:01.300
> 
> 标签：function, call, arduino, period

在 Arduino 代码 (C/C++) 中调用函数时，函数前的句点是什么意思？

例如，我正在使用[OLED](http://en.wikipedia.org/wiki/OLED)显示库，其中一个函数调用如下：

```
display.setTextSize(1); 
```

我知道这个函数是做什么的，但是在它之前有一些变量“显示”或其他东西的地方，语法意味着什么？

换句话说，为什么以这种方式调用函数而不是仅使用函数名称和输入的普通调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:53:43.263

“display”是一个对象的实例，或者是对某个全局/系统变量的引用。“setTextSize”方法是该对象的成员。最终结果意味着您正在设置“显示”或“显示”的文本大小。

这使您可以通过 display.setTextSize(1)、foo.setTextSize(1) 和 bar.setTextSize(1) 更简洁地执行操作，而无需为要设置文本大小的每个不同项目指定唯一的函数.

在 setTextSize 中，您可能会看到“this”。“this”仅在这一种情况下表示“显示”。如果您使用 bar.setTextSize(1)，“this”将表示“bar”等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:55:21.997

我可能错得离谱，但我认为这与结构有关。在 arduino 环境中，有一些不同的功能围绕使用串行通信展开。他们将其设置为一个库，每当您使用时都会调用该库`Serial.something();` 可能是串行的任何功能，例如`Serial.read();`

编辑忘了放一个来源。 [http://arduino.cc/en/Reference/Serial](http://arduino.cc/en/Reference/Serial)

抱歉，如果我离开了，仍然是新手，也无法弄清楚如何发表评论。

# perl - 更正正则表达式以清除配置文件中的注释和其他不需要的行

> ID：13804105
> 
> 赞同：0
> 
> 时间：2012-12-10T15:38:11.187
> 
> 标签：perl, parsing

我有一个配置文件，格式非常简单：

```
# comment
key = value 
```

这是我在输入循环中编写的内容，用于在拆分键值之前忽略不需要的行：

```
while (<C>) {
    chomp;
    # ignore all comments, blank lines or other wrongly formatted lines
    # so that we are only left with key = value
    next unless /(?<!#)\s*\w+\s*=\s*\w+/; 
```

我的问题：这是否足以满足忽略不需要的行的需要，还是我遗漏了什么？

**更新：**我的问题是关于我的`next unless...`陈述是否涵盖所有不需要的情况。我知道对于完成配置解析的最佳方式有不同的理念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:56:47.960

这可能是你想要的。配置将设置为 hash `%conf`。（您不必使用`split`。）

```
while(<C>) {
  chomp;

  # Skip comment
  next if /^#/;

  # Process configuration
  if(/^(\w+)\s*=\s*(.*)/) {
    ($key, $value) = ($1, $2);
    $conf{$key} = $value
  } else {
    print STDERR "Invalid format: $_\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:12:18.133

我最近才这样做：

```
while (my $line = <$fh>) {
    next if $line =~ /^\s*$/; # skip empty lines
    next if $line =~ /^\s*#/; # skip lines that are only comments

    # both sides of the '=' must contain alphanumeric characters
    if ($line != /^\s*\w+\s*=\s*\w+/) { warn "Invalid format in line $.\n" }

    # split by '=', producing a maximum of two items;
    # the value may contain whitespace
    my ($key, $value) = split '=', $line, 2;

    foreach ($key, $val) {
        s/\s+$//; # remove trailing whitespace
        s/^\s+//; # remove leading whitespace
    }

    # store in a hash or whatever you like
    $config{$key} = $value; 
```

我喜欢它，因为它允许非常灵活的配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:48:54.167

你可以简单地做：

```
while (<C>) {
    chomp;

    # if you only want to skip comments ( lines starting with # )
    # then you could just specify it directly 
    next if $_ =~ m/\A#/;

} 
```

使用“除非”会使事情复杂化，因为您说“除非它不是评论”，这可能意味着很多事情。如果您只使用“if”，您可以直接指定您正在跳过注释行。

您可能不清楚的事情： - $_ 是文件的当前行。- 正则表达式中的 \A 表示行首。

正则表达式匹配所有以 # 开头的行。

# apache - .htaccess 文件的 getHostByAddr？

> ID：13804108
> 
> 赞同：1
> 
> 时间：2012-12-10T15:38:34.093
> 
> 标签：apache, .htaccess, redirect, host

我遇到来自具有域`.kimsufi.com`和`.SteepHost.Net`. 我曾经使用以下 htaccess-command 阻止它们：

```
Deny from .SteepHost.Net
Deny from .kimsufi.com 
```

我不想阻止请求，而是将它们重定向到静态页面（例如“access.html”说“请联系管理员，...”）对于 IP 地址，这适用于以下命令：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_ADDR} ###.###.75.51
RewriteRule ^(.*)$ access.html 
```

但是我怎样才能使用用户的主机而不是 IP 地址呢？我试过例如：

```
RewriteCond %{REMOTE_HOST} ^(.*)\.kimsufi\.com$ [NC,OR]
RewriteCond %{REMOTE_HOST} ^(.*)\.SteepHost\.Net$ [NC] 
```

但它没有工作，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:44:51.983

Try to replace %{REMOTE_ADDR} by %{REMOTE_HOST}. But it implies to set [HostnameLookups](http://httpd.apache.org/docs/2.2/mod/core.html#hostnamelookups) to On (or Double), which can slow down your site.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:45:36.027

只需使用 REMOTE_HOST 而不是 REMOTE_ADDR。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_HOST} ^.+\.EvilDomain\.com$
RewriteRule ^(.*)$ access.html 
```

见：[http ://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# java - 如何在 Swing 应用程序中实现 UTF-8 格式？

> ID：13804113
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:38:04.290
> 
> 标签：java, swing, utf-8, character-encoding, encode

在我的 Swing 聊天应用程序中，我有发送按钮、一个文本区域和一个文本字段。

如果我按下发送按钮，我需要将文本从文本字段发送到文本区域。它在英语中运行良好，但在当地语言中却不行。

请给出一些想法或一些代码来帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:45:23.950

首先，String 的内部字符表示是 UTF-16，所以一旦你的 JVM 中有字符串，你就不用担心了。

问题可能是通过 Internet 发送的一系列字符与 String 对象之间的转换。解析字符串时需要提供编码，例如使用时`InputStreamReader`，必须传递`Charset`参数：

> `InputStreamReader(InputStream in, Charset cs)`
> 创建一个使用给定字符集的 InputStreamReader。

必须提供编码，因为 Java 无法神奇地猜测字节序列的编码。

# jsonp - WCF 数据服务工具包是否支持开箱即用的 CORS？

> ID：13804119
> 
> 赞同：1
> 
> 时间：2012-12-10T15:38:57.010
> 
> 标签：jsonp, wcf-data-services, cors, datajs

我正在尝试为 WCF 数据服务和 datajs 之间的跨域连接找到一个不错的解决方案。JSONP 适用于 GET 请求，但我无法发布任何内容。WCF 数据服务工具包是否支持开箱即用的 CORS？是否有任何资源显示如何为 WCF 数据服务实施 CORS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:48:31.363

WCF DS 不支持开箱即用的 CORS。我无法找到任何其他开箱即用的解决方案。通过为 WCF 创建消息检查器，可以将 CORS 支持添加到服务器。

# eclipse - 在 Eclipse Juno 中使用 Jetty

> ID：13804123
> 
> 赞同：0
> 
> 时间：2012-12-10T15:39:09.257
> 
> 标签：eclipse, jetty, eclipse-juno

据我了解，Eclipse Juno 版本嵌入了 Jetty servlet 容器。所以我假设，这意味着我可以在 Eclipse Java EE 中使用 Jetty，而无需安装任何额外的插件或包。我试过这个：

*   创建了一个简单的动态 Web 项目并在“J2EE Preview”服务器上运行它。结果我得到了404错误：

> 未找到错误404
> 
> 此服务器上没有上下文匹配或处理此请求。此服务器已知的上下文是：ServletTest(/ServletTest)

*   尝试创建嵌入式 Jetty 实例：

    ```
    public class Launcher {

        public static void main(String[] args) throws Exception {
            Server server = new Server(8080);
            server.start();
            server.join();
        }
    } 
    ```

我无法找到可以`org.eclipse.jetty.server.Server`从哪里导入课程。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:50:44.803

坚持你的第一种方法。看起来你快到了 - 你只是在 ping 错误的 URL。试试`http://localhost:8080/ServletTest`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T09:03:56.597

目前在使用 jetty 的 J2EE 预览版中存在一些错误。似乎此时 Run-Jetty 插件更好地实现了......

[http://code.google.com/p/run-jetty-run/](http://code.google.com/p/run-jetty-run/)

如果非常适合我的 Web 应用程序，只需使用 run as run-jetty

# winforms - 将 SlideGroup 实现为表单 [DevExpress] 的一部分

> ID：13804130
> 
> 赞同：2
> 
> 时间：2012-12-10T15:39:25.637
> 
> 标签：winforms, microsoft-metro, devexpress

我想在我的 WinForms 页面上使用 Windows UI 样式的 SlideGroup，但不想经历让文档管理器占用我的整个表单的废话。我只想在表单顶部添加几个按钮，然后在底部添加一个 slideGroup。按下按钮将幻灯片视图切换到相应的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:10:49.460

据我所知，[SlideGroup](http://help.devexpress.com/#WindowsForms/clsDevExpressXtraBarsDocking2010ViewsWindowsUISlideGrouptopic)仅可用作[WindowsUIView](http://help.devexpress.com/#WindowsForms/CustomDocument11358)中的[内容容器](http://help.devexpress.com/#WindowsForms/CustomDocument11771)，它是[DocumentManager](http://help.devexpress.com/#WindowsForms/CustomDocument11359)组件的一部分。可以在[WindowsUIView 设计器](http://help.devexpress.com/#WindowsForms/CustomDocument11768)的相关部分轻松添加内容容器。SlideGroup 组件本身不是控件，因此如果没有 DocumentManager，就无法使用 SlideGroup。

另请查看以下内容：[如何创建 SlideGroup 容器](http://help.devexpress.com/#WindowsForms/CustomDocument11795)。

如果要使用 Windows UI 按钮本身，可以使用[WindowsUIButtonsPanel](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraBarsDocking2010WindowsUIButtonPaneltopic)控件。

# character-encoding - 火鸟默认字符集

> ID：13804132
> 
> 赞同：10
> 
> 时间：2012-12-10T15:39:31.953
> 
> 标签：character-encoding, firebird

SQL 选择命令

```
SELECT a.RDB$CHARACTER_SET_NAME FROM RDB$DATABASE a 
```

返回 NULL。创建新数据库时未指定任何字符集时使用什么字符集？Firebird 的不同版本（1.0、2.0、2.5.1 等）之间有区别吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T19:36:53.520

在创建期间未指定字符集时，数据库的默认字符集是 character set `NONE`，请参阅 Interbase 6.0 数据定义指南的第 47 页（可在firebird 网站的[文档部分获得）。](http://www.firebirdsql.org/en/reference-manuals/)自 Firebird 之前（可能自创建 Interbase 以来）就一直采用这种方式，并且仍然适用于现有版本。但是，在 Firebird 2.5 下，当创建没有默认字符集的数据库时，`RDB$CHARACTER_SET_NAME`将具有 value `NONE`。我不确定这在早期版本中是否有所不同，我的猜测仍然是它`NONE`用作默认值，即使它报告`NULL`.

如果您想确定，您可以简单地创建一个带有`CHAR`or`VARCHAR`列而没有字符集规范的基本表，然后使用以下查询来确定默认值：

```
SELECT a.RDB$FIELD_NAME, a.RDB$RELATION_NAME, 
       b.RDB$CHARACTER_SET_ID, c.RDB$CHARACTER_SET_NAME
FROM RDB$RELATION_FIELDS a
INNER JOIN RDB$FIELDS b 
   ON b.RDB$FIELD_NAME = a.RDB$FIELD_SOURCE
INNER JOIN RDB$CHARACTER_SETS c 
   ON c.RDB$CHARACTER_SET_ID = b.RDB$CHARACTER_SET_ID
WHERE RDB$RELATION_NAME = 'TABLE_NAME' 
```

`(VAR)CHAR`您可以使用它来查找任何 ( ) 字段 BTW的字符集。

字符集`NONE`意味着没有字符集假设，因此您可以将数据以任何字符集存储在其中。但是，您不能将其存储或与具有显式字符集的列进行比较（可能字符集除外`OCTETS`，对此不确定）。

如果您使用`NONE`，那么您需要确保在连接到数据库时始终使用相同的连接字符集，或者如果您使用字符集`NONE`作为连接字符集，那么您的应用程序、驱动程序、访问组件或编程语言始终使用相同的编码，否则会遇到音译问题（字符编码问题）。

用作`NONE`连接字符集还有其他问题。例如**，列的数据将始终按原样发送，并按接收方式存储，**除非列的字符集中不允许字节组合。基本上，这意味着数据库必须在与创建它的语言环境相同的语言环境中使用。

一般来说，最好明确默认字符集，除非您知道自己在做什么。

# java - 提交响应后无法转发当我按下按钮时

> ID：13804134
> 
> 赞同：2
> 
> 时间：2012-12-10T15:39:32.330
> 
> 标签：java, eclipse, jsp, servlets

在我的项目中，我使用主页 Browse.jsp，我可以在其中添加/编辑/删除用户。我有 3 个按钮“添加”、“编辑”和“删除”。但是当我按下任何按钮时，我都会出错。

这是我的 BrowseServlet

```
public class BrowseServlet extends HttpServlet {

protected void service (HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException{
    if (req.getParameter("addButton") !=null){
        add (req, resp);
    } else if (req.getParameter("editButton") !=null){
        edit (req, resp);
    } else if (req.getParameter("deleteButton") !=null){
        delete (req, resp);
    } else if (req.getParameter("detailsButton") !=null){
        details (req, resp);
    }
    browse(req, resp);

}

private void details(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    // TODO Auto-generated method stub

}

private void delete(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException{
    // TODO Auto-generated method stub

}

private void edit(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException{
    String idStr = req.getParameter("id");
    if (idStr == null || idStr.trim().length() == 0) {
        req.setAttribute("error", "You must select the user");
        req.getRequestDispatcher("/browse.jsp").forward(req, resp);
        return;
    }
    try{
        User user = DaoFactory.getInstance().getUserDao().find(new Long(idStr));
        req.getSession().setAttribute("user", user);
    } catch (Exception e) {
        req.setAttribute("error", "ERROR:" + e.toString());
        req.getRequestDispatcher("/browse.jsp").forward(req, resp);
        return;
    }
    req.getRequestDispatcher("/edit").forward(req, resp);

}

private void add(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    req.getRequestDispatcher("/add").forward(req, resp);

}

private void browse(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    Collection users;
    try {
        users = DaoFactory.getInstance().getUserDao().findAll();
        req.getSession().setAttribute("users", users);
        req.getRequestDispatcher("/browse.jsp").forward(req, resp);
    } catch (DatabaseException e) {
        throw new ServletException(e);
    }

}

} 
```

这是我的 AddServlet

```
public class AddServlet extends EditServlet {

protected void processUser(User user) throws DatabaseException {
    DaoFactory.getInstance().getUserDao().create(user);
}

protected void showPage(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    req.getRequestDispatcher("/add.jsp").forward(req, resp);
}

} 
```

这是我的 WEB-INF BROWSE.jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html>
<head><title>User management </title></head>
<body>
<form action="<%=request.getContextPath()%>/browse" method="post">
<table id="UserTable" border="1">
<tr>
<th></th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Date of birth</th>
</tr>
<c:forEach var="user" items="${session.Scope.users}">
<tr>
<td><input type="radio" name="id" id="id" value="${user.id}"</td>
    <td>${user.firstName}</td>
    <td>${user.lastName}</td>
    <td>${user.dateOfBirth}</td>
</tr>
</c:forEach>
</table>
<input type="submit" name="addButton" value="Add">
<input type="submit" name="editButton" value="Edit">
<input type="submit" name="deleteButton" value="Delete">
<input type="submit" name="detailsButton" value="Details">
</form>
<c:if test="${requestScope.error != null}">
<script>
    alert('${requestScope.error}');
</script>
</c:if>
</body>
</html> 
```

添加.jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<html>
<head><title>User management. Add </title></head>
<body>
<form action="<%=request.getContextPath()%>/add" method="post">
    First name <input type="text" name="firstName" value=""><br>
    Last name  <input type="text" name="lastName" value=""><br>
    Date of birth <input type="text" name="date" value=""><br>
    <input type="submit" name="okButton" value="Ok">
    <input type="submit" name="cancelButton" value="Cancel">
</form>
<c:if test="${requestScope.error != null}">
<script>
    alert('${requestScope.error}');
</script>
</c:if>
</body>
</html> 
```

但是当我尝试按下“addButton”时，我有这个错误

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.IllegalStateException: Cannot forward after response has been committed
com.rudniev.usermanagment.web.BrowseServlet.browse(Unknown Source)
com.rudniev.usermanagment.web.BrowseServlet.service(Unknown Source)
javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
note The full stack trace of the root cause is available in the Apache Tomcat/5.5.12 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:45:51.677

`browse()`无论调用的操作如何，您总是在调用。如此有效地，当一个动作被调用时，你正在执行第二次前进（这反过来已经执行了它）。

也许你想把它放在`else`块里？

```
if (req.getParameter("addButton") !=null){
    add (req, resp);
} else if (req.getParameter("editButton") !=null){
    edit (req, resp);
} else if (req.getParameter("deleteButton") !=null){
    delete (req, resp);
} else if (req.getParameter("detailsButton") !=null){
    details (req, resp);
} else {
    browse(req, resp);
} 
```

# facebook - OpenGraph 元素可以在不同的应用程序之间共享吗？

> ID：13804137
> 
> 赞同：1
> 
> 时间：2012-12-10T15:39:45.293
> 
> 标签：facebook, facebook-opengraph

我有一堆 Facebook 应用程序，它们必须使用相同的一组 Open Graph 概念（动作和对象）......

我是否需要为每个应用程序重复定义它们，或者它们可以在一个应用程序中定义并在其他应用程序中重复使用？

该[教程](http://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial)似乎对此有点模棱两可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:53:53.500

我会说它不起作用，因为域不同（您必须在开发人员设置中设置一个 URL）。此外，afaik 它在 Facebook 规则中的某处不允许您将同一个应用程序用于不同的页面/目的。

# uitabbarcontroller - -[__NSCFConstantString objectForKey:]：无法识别的选择器发送到实例 0x21eb4

> ID：13804144
> 
> 赞同：0
> 
> 时间：2012-12-10T15:40:16.990
> 
> 标签：uitabbarcontroller, xcode4.5, segue, detailsview, uisearchdisplaycontroller

我目前正在尝试让搜索显示控制器转到详细视图，但运气不佳！我的搜索工作正常，mainTableView（原始表格视图）与标题和图像进行了分割，但是当我尝试从 searchdisplaytableview 分割时它崩溃了。它在此阶段的详细视图中崩溃：

```
self.navigationItem.title = [self.detailItem objectForKey:@"name"]; 
```

详细视图的完整代码是：

。H

```
#import <UIKit/UIKit.h>

@interface SearchDetailViewController : UIViewController<UISplitViewControllerDelegate>

@property (strong, nonatomic) id detailItem;

@property (strong, nonatomic) IBOutlet UIImageView *detailImage;

@end 
```

.m

```
#import "SearchDetailViewController.h"

@interface SearchDetailViewController ()

@end

@implementation SearchDetailViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.navigationItem.title = [self.detailItem objectForKey:@"name"];
        [self.detailImage setImage:[UIImage imageNamed:self.detailItem[@"image"]]];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

搜索代码是：.h

```
#import <UIKit/UIKit.h>

@class SearchDetailViewController;

@interface SearchWillWorkViewController : UIViewController<UITableViewDataSource, UITableViewDelegate, UISearchDisplayDelegate, UISearchBarDelegate>
{
    NSMutableArray *graniteArray;
    NSMutableArray *marbleArray;
    NSMutableArray *quartzArray;
    NSMutableArray *silestoneArray;
    NSArray *searchRowSelected;

    NSMutableArray *sectionArray;

    UITableView *mainTableView;

    NSMutableArray *contentsList;
    NSMutableArray *searchResults;
    NSString *savedSearchTerm;

}

@property (strong, nonatomic) SearchDetailViewController *detailViewController;

@property (nonatomic, strong) IBOutlet UITableView *mainTableView;
@property (nonatomic, strong) NSMutableArray *contentsList;
@property (nonatomic, strong) NSMutableArray *searchResults;
@property (nonatomic, copy) NSString *savedSearchTerm;
@property (strong, nonatomic) NSArray *stoneSections;

- (void)handleSearchForTerm:(NSString *)searchTerm;
- (void)createStoneData;

@end 
```

.m

```
#import "SearchWillWorkViewController.h"
#import "SearchDetailViewController.h"

@interface SearchWillWorkViewController ()

@end

@implementation SearchWillWorkViewController

@synthesize mainTableView;
@synthesize contentsList;
@synthesize searchResults;
@synthesize savedSearchTerm;
@synthesize stoneSections;
@synthesize detailViewController = _detailViewController;

- (void)viewDidUnload
{
    [super viewDidUnload];

    // Save the state of the search UI so that it can be restored if the view is re-created.
    [self setSavedSearchTerm:[[[self searchDisplayController] searchBar] text]];

    [self setSearchResults:nil];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self createStoneData];

    // Restore search term
    if ([self savedSearchTerm])
    {
        [[[self searchDisplayController] searchBar] setText:[self savedSearchTerm]];
    }
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [[self mainTableView] reloadData];
}

- (void)createStoneData {

    self.stoneSections=[[NSArray alloc] initWithObjects:
                        @"Granite",@"Marble",@"Quartz",@"Silestone",nil];

    graniteArray = [[NSMutableArray alloc] init];
    marbleArray = [[NSMutableArray alloc] init];
    quartzArray = [[NSMutableArray alloc] init];
    silestoneArray = [[NSMutableArray alloc] init];

    [graniteArray addObject:[[NSMutableDictionary alloc]
                             initWithObjectsAndKeys:@"Angel Cream", @"name",
                             @"angel-cream.jpg", @"image", nil]];

    [marbleArray addObject:[[NSMutableDictionary alloc]
                            initWithObjectsAndKeys:@"Arabescato", @"name",
                            @"arabescato.jpg", @"image", nil]];

    [quartzArray addObject:[[NSMutableDictionary alloc]
                            initWithObjectsAndKeys:@"Caesarstone: Black Knight", @"name",
                            @"Black Knight.jpg", @"image", nil]];

    [silestoneArray addObject:[[NSMutableDictionary alloc]
                               initWithObjectsAndKeys:@"Cielo: Aluminio Nube", @"name",
                               @"silestone-aluminio-nube.jpg", @"image", nil]];

    NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:graniteArray,marbleArray,quartzArray,silestoneArray, nil];
    [self setContentsList:array];

}

/*
 // Override to allow orientations other than the default portrait orientation.
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
 */

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)handleSearchForTerm:(NSString *)searchTerm
{
    [self setSavedSearchTerm:searchTerm];

    if ([self searchResults] == nil)
    {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        [self setSearchResults:array];
    }

    [[self searchResults] removeAllObjects];

    if ([[self savedSearchTerm] length] != 0)
    {
        for (NSMutableArray *array in contentsList)
        {
            for (NSDictionary* dictionary in array)
            {
                NSString *currentstring = [dictionary objectForKey:@"name"];
                NSRange r = [currentstring rangeOfString:searchTerm options:NSCaseInsensitiveSearch];
                if (r.location != NSNotFound) {
                    [[self searchResults] addObject:currentstring];
                }
            }
        }
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    if (tableView == [[self searchDisplayController] searchResultsTableView])
        return 1;
    else
        return [self.stoneSections count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (tableView == [[self searchDisplayController] searchResultsTableView])
        return nil;
    else
        return [self.stoneSections objectAtIndex:section];
}

#pragma mark -
#pragma mark UITableViewDataSource Methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger rows;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        rows = [[self searchResults] count];
    else
        rows = [[self.contentsList objectAtIndex:section] count];

    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"stoneCell";

 UITableViewCell *cell = (UITableViewCell *)[mainTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *contentForThisRow = nil;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        contentForThisRow = [self.searchResults objectAtIndex:indexPath.row];
    else
        contentForThisRow = [[[[self contentsList] objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];

    cell.textLabel.text = contentForThisRow;

    return cell;
}

#pragma mark -
#pragma mark UITableViewDelegate Methods

- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
            if (self.searchDisplayController.active) {
        [self.detailViewController setDetailItem:[self.searchResults objectAtIndex:indexPath.row]];
}
    else
        [self.detailViewController setDetailItem:[[contentsList objectAtIndex:indexPath.section]
                                                  objectAtIndex: indexPath.row]];

}

#pragma mark -
#pragma mark UISearchDisplayController Delegate Methods

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self handleSearchForTerm:searchString];

    // Return YES to cause the search result table view to be reloaded.

    return YES;
}

- (void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
    [self setSavedSearchTerm:nil];

    [[self mainTableView] reloadData];      
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"detailview"]) {
        if (self.searchDisplayController.active) {
            self.detailViewController=segue.destinationViewController;
        }
        else
        self.detailViewController=segue.destinationViewController;
    }
}

@end 
```

请问有人能告诉我哪里出错了吗？这让我发疯了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:42:48.023

It's because `self.detailItem` is a constant string, which doesn't respond to `objectForKey`, not some other custom object.

You haven't posted the class definition of what it's supposed to be, so I cannot tell you more.

# c# - 测试依赖 MEF 注入的非导出类

> ID：13804146
> 
> 赞同：2
> 
> 时间：2012-12-10T15:39:35.607
> 
> 标签：c#, silverlight, prism, mef

我正在使用 MEF 将我的对象组合在一起，并且在测试一些未导出到 MEF 容器但依赖于 MEF 将对象实例注入属性设置器的类时遇到了问题。

例如考虑以下两个视图模型

```
public class ViewModelA
{
    [Import]
    internal IAdmin AdminService
    {
        get;
        private set;
    }

    public ViewModelA()
    {
        CompositionInitializer.SatisfyImports(this);
    }

    //constructor for testing
    internal ViewModelA(IAdmin adminService)
    {
        this.AdminService = adminService;
    }

    public void DoSomething()
    {
        this.AdminService.SetCurrentWindow(new ViewModelB());
    }
}

public class ViewModelB 
{
    [Import]
    internal IAdmin AdminService
    {
        get;
        private set;
    }

    [Import]
    internal IAnotherService AnotherServiceService
    {
        get;
        private set;
    }

    public ViewModelB()
    {
        CompositionInitializer.SatisfyImports(this);
    }

    public void DoAnotherThing()
    {
        //Does something with the properties injected via MEF
    }

} 
```

这些类不会导出到 MEF 容器，因此我依靠调用`CompositionInitializer.SatisfyImports(this)`来强制导入依赖项。

我想为 ViewModelA 创建一个测试，检查对 DoSomething 的调用导致该`IAdmin.SetCurrentWindow`方法被 ViewModelB 的实例调用一次。为了满足这一点，我为 ViewModelA 创建了一个以 IAdmin 作为参数的构造函数重载，我还利用 Moq 和 Silverlight 单元测试框架创建了以下测试。

```
 [TestMethod]
    public void DoSomethingStandard_CallsSetCurrentWindowWithViewModelB()
    {
        var adminServiceMock = new Mock<IAdmin>();
        var vmA = new ViewModelA(adminServiceMock.Object);
        vmA.DoSomething();
        adminServiceMock.Verify(ad => ad.SetCurrentWindow(It.IsAny<ViewModelB>()), Times.Exactly((1)));
    } 
```

我的问题是，当测试运行调用以`ViewModelA.DoSomething`实例化 ViewModelB 时，它又会抛出一个

> System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

这是因为 ViewModelB 构造函数调用`CompositionInitializer.SatisfyImports(this)`但在我的测试项目中没有设置 MEF 容器。

**关于如何最好地测试这种情况有什么想法吗？或者如何重组代码以使其可测试？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:14:51.687

我认为您唯一能做的就是将 [Import] ed 属性更改为使用公共设置器公开并直接设置实例。您不应该担心单元测试中的 MEF。

这个[线程](https://stackoverflow.com/questions/3166859/moq-a-mef-import)更深入地进入它。

# php - 检索返回异常数据的php数据

> ID：13804158
> 
> 赞同：1
> 
> 时间：2012-12-10T15:41:22.047
> 
> 标签：php, mysql

我要做的就是从数据库返回计数行数。

这是代码：

```
<?
   echo "sdsdsdsdsd";

?> 
```

我得到的结果是：

> {\rtf1\ansi\ansicpg1252\cocoartf1038\cocoasubrtf360 {\fonttbl\f0\fswiss\fcharset0 Helvetica;} {\colortbl;\red255\green255\blue255;} \paperw11900\paperh16840\margl1440\margr1440\vieww9000\viewh8400\ pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural\f0\fs24\cf0 sdsdsdsdsd\ }

为什么显示这个数据？为什么 echo 不只是显示字符串值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T15:44:01.457

If you want to use WordPad to write PHP code (a strange choice) you need to save the file as *plain text*, not rich text.

**Update:** Even if it's not WordPad, you need a text editor that's able to produce plain text. If your editor cannot do that, you need to find another one.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:45:16.337

您正在使用写字板（`rtf`编辑器）进行编辑吗？使用像`Notepad++`.

**[更新]：**

编辑器`wordpad`（如您的情况下的编辑器`TextEdit`- `Mac OsX`）默认为`RTF`（富文本格式：[http](http://en.wikipedia.org/wiki/Rich_Text_Format) ://en.wikipedia.org/wiki/Rich_Text_Format ）

应该使用纯文本来使用它：

**`Code Editor`对于 Mac OS X：**

*   [http://tacosw.com/htmledit/screenshots.php](http://tacosw.com/htmledit/screenshots.php)
*   [http://www.xm1math.net/texmaker/](http://www.xm1math.net/texmaker/)（**注：**跨平台）

* * *

**`Code Editor`对于 Linux（如 Linux）：**

*   gpedit (install `apt-get install gedit`)**注意：** gnome 中的默认值
*   Leafpad (安装`apt-get install leafpad`)**注意：**默认在 lxde

* * *

**`Code Editor`对于安卓：**

*   [http://www.touchqode.com/](http://www.touchqode.com/) (touchqode)

* * *

**`Code Editor``FTP client`对于 iOS（Iphone 和 Ipad）：**

*   [https://itunes.apple.com/hr/app/codeanywhere/id436736239?mt=8（Codeanywhere](https://itunes.apple.com/hr/app/codeanywhere/id436736239?mt=8)）

* * *

**`Code Editor`和：`FTP client`_`Google Chorme`**

*   [https://chrome.google.com/webstore/detail/codeanywhere/ndcfkjjcjfpmmhdedhnbkknbehiadgjg](https://chrome.google.com/webstore/detail/codeanywhere/ndcfkjjcjfpmmhdedhnbkknbehiadgjg)

* * *

**`Code Editor`对于 Java（虚拟机）：**

*   [http://www.jedit.org/](http://www.jedit.org/) (jedit)

* * *

**`Code Editor`对于 Windows：**

*   [http://notepad-plus-plus.org/download/v6.2.2.html](http://notepad-plus-plus.org/download/v6.2.2.html) (notepad++)
*   [http://www.editpadlite.com/](http://www.editpadlite.com/) (editpad lite)
*   [http://www.flos-freeware.ch/notepad2.html](http://www.flos-freeware.ch/notepad2.html) (notepad2)

# sql-server - SSIS - 仅在 SQL 代理中无法在 Unicode 和非 Unicode 字符串数据类型之间转换

> ID：13804159
> 
> 赞同：0
> 
> 时间：2012-12-10T15:40:48.983
> 
> 标签：sql-server, ssis

当我的包通过 SQL 代理运行时，我收到“无法在 Unicode 和非 Unicode 字符串数据类型之间转换”错误，但是当我通过编辑器运行包时，我没有收到错误。

源数据在 Oracle 中，它被插入到 SQL 数据库中。从 SQL 代理运行时，从 Oracle 提取数据的其他软件包似乎都没有问题。

有什么想法吗？

# button - 更新面板触发器

> ID：13804162
> 
> 赞同：0
> 
> 时间：2012-12-10T15:41:35.370
> 
> 标签：button, triggers, updatepanel

我很难使用 ASP.NET UpdatePanel。问题是我的按钮不会触发其 onclick 事件。我已经尝试了很多东西，但根本无法弄清楚。这是一个代码示例：

```
<asp:ScriptManager ID="smDefault" runat="server"></asp:ScriptManager>

<div style="display: none;">
<a id="various1" class="ltbtn" href="#inline1" style="display:none;"></a>

    <!--  / light box \ -->
    <div class="lightBox" id="inline1">     
        <h2>Nieuw tijdsvak</h2>

        <fieldset>
            <div class="nieuweReactie">
                <asp:UpdatePanel ID="pnlNieuwTijdsvak" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
                    <ContentTemplate>
                        <label>Start tijd</label><asp:TextBox ID="txtStartTijd" runat="server" CssClass="field datepicker"></asp:TextBox>
                        <label>Eind tijd</label><asp:TextBox ID="txtEindTijd" runat="server" CssClass="field datepicker"></asp:TextBox>
                        <asp:Button ID="btnVoegTijdToe" runat="server" Text="Toevoegen"
                            CssClass="btn" onclick="btnVoegTijdToe_Click" />
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="btnVoegTijdToe" EventName="Click" />
                    </Triggers>
                </asp:UpdatePanel>                    
            </div>
        </fieldset>            
    </div>
    <!--  \ light box / -->
</div> 
```

我的想法是这应该是有效的，还是我在这里遗漏了什么？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:53:28.767

我自己找到了一个易于实施的解决方案。[例子](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)

# asp.net - 嵌套中继器 - ItemCommand 仅在通过标记附加时触发

> ID：13804169
> 
> 赞同：0
> 
> 时间：2012-12-10T15:41:55.033
> 
> 标签：asp.net, events, repeater, webforms, databound-controls

我有一个嵌套在`ItemTemplate`父中继器中的中继器。我通常在标记中以声明方式将它们连接到控件。

```
<asp:Repeater runat='server' id='myParentRepeater'>
    <ItemTemplate>
        <asp:Repeater runat='server' id='mynestedRepeater' OnItemCommand='myMethod'>
           ...
        </asp:Repeater>
        ...
    </ItemTemplate>
</asp> 
```

今天我决定在代码隐藏中进行，特别是`ItemDataBound`在父中继器的方法中。/

```
((Repeater)e.item.FindControl("MyParentRepeater")).ItemCommand += ... 
```

但它不会以这种方式工作。除非我使用标记，否则事件处理程序不会触发。为什么是这样？或者，假设它*应该*起作用，有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:45:41.003

该`ItemDataBound`事件仅在`Repeater`数据绑定时触发，而不是在每次回发时触发。但是必须在每次回发时重新创建事件。因此，请改用[`ItemCreated`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcreated.aspx)事件。

```
protected void myParentRepeater_ItemCreated(Object Sender, RepeaterItemEventArgs e) {
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
          ((Repeater)e.item.FindControl("MyParentRepeater")).ItemCommand += ...
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:17:15.217

添加

```
 OnItemCommand="repNested_ItemCommand" 
```

到

```
<asp:Repeater ID="rptNested" runat="server" OnItemCommand="repSales_ItemCommand"> 
```

代码隐藏：

```
Protected Sub repNested_ItemCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.RepeaterCommandEventArgs)

 Select Case e.CommandName
// Do whatever you want 
```

# javascript - Javascript 函数只调用一次

> ID：13804171
> 
> 赞同：0
> 
> 时间：2012-12-10T15:41:55.720
> 
> 标签：javascript, jquery, d3.js

我有一个应该在每次迭代时调用的函数，但是看起来它只被调用一次，然后就不再调用了。

我看不出来，但是这个代码块里肯定有东西；应该调用的函数是`draw()`：

```
ws.onmessage = function (evt) {
    dataset.length = 0;
    var distances = JSON.parse(evt.data);
    //console.log(distances);

    for (var i = 0; i < buffer.length; i++) {
        if (buffer[i][0] == distances.miles) {
            buffer[i][1][0]++;
        }
        //console.log(buffer);
        dataset.push(buffer[i][1][0]);
        //console.log(dataset);  
        draw();
    }

} 
```

我知道该函数`draw()`有效，并且它从数据集数组中获取正确的更新数据，因为这些数据已发送到函数`draw()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:43:03.083

`draw()` is outside your loop, move it up two lines :)

# ubuntu - 加载来宾添加时出现 Virtualbox 错误

> ID：13804174
> 
> 赞同：5
> 
> 时间：2012-12-10T15:42:03.197
> 
> 标签：ubuntu, webserver, virtualbox

我在 Windows 7 主机下的 Virtualbox 中安装了 Ubuntu Server，用作我的主要 Web 开发设置。我星期一早上刚进来，在整个周末都关闭计算机后，打开我的虚拟机发现这个错误：

> VBoxService：错误：VbglR3Init 失败，rc=VERR_FILE_NOT_FOUND

我试图`sudo /etc/init.d/virtualbox-guest-utils`开始，但这只是重现了错误消息。我尝试卸载并重新安装来宾添加 CD（并不是说它应该有任何区别）并且我已经更新了我的服务器 vm。我仍然不知所措；谷歌搜索没有提取任何相关/最近的内容。最近有人遇到这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-28T04:44:30.603

我已经重新安装了 virtualbox-guest-utils，重新启动系统，它又可以工作了。

祝你好运！

# java - 删除 标记后的所有空格

> ID：13804176
> 
> 赞同：2
> 
> 时间：2012-12-10T15:42:04.497
> 
> 标签：java, html, replace, whitespace

我需要删除`<br />` 字符串中的所有空格。我正在使用以下代码在 android 应用程序中编写的 xml 文档中获取一些 html 文本：

`information_view.setText(Html.fromHtml(information));`.

问题是这个html代码：

```
&nbsp;

 Betsson vill att du ska vinna jackpotten p&aring; &ouml;ver 90 miljoner !<br />
 D&auml;rf&ouml;r &nbsp;f&aring;r du&nbsp;5 free spins&nbsp;p&aring;&nbsp;Mega fortune&nbsp;varje dag fram tills jackpotten har g&aring;tt till en lycklig vinnare.&nbsp;<br />
 <br />
 Regler och Villkor:<br />
 Bonuspengar m&aring;ste oms&auml;ttas 35 g&aring;nger innan uttag.<br />
 &nbsp; 
```

在应用程序中打印时如下所示：

```
 Betsson vill att du ska vinna
jackpotten på över 90 miljoner !
    Därför får du 5 free spins på Mega
Fortune varje dag fram tills jackpotten
har gått ut till en lycklig vinnare.

    Regler och villkor:
    Bonuspengarna måste omsättas 35
gånger innan uttag. 
```

如您所见，html 代码中都出现了`&nbsp;`和空格。`" "`但是替换其中一个就足够了，因为我可以替换`&nbsp;`为`" "`或相反。

我已经尝试搜索了几天，非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:43:46.150

```
String html = ...
// replace your &nbsp;
html = html.replaceAll("<br />\\s+", "<br />"); 
```

但我更喜欢使用 JSoup 之类的 HTML 解析器来解析 HTML。

正如@Christoph 指出的那样，您也可以使用它：

```
html = html.replaceAll("<br />\\p{Space}+", "<br />"); 
```

# jquery-mobile - jQuery 移动滑动在 Windows Phone 上不起作用

> ID：13804179
> 
> 赞同：2
> 
> 时间：2012-12-10T15:42:12.813
> 
> 标签：jquery-mobile, windows-phone, swipe, mousemove

我使用 jQuery Mobile 的 swiperight 和 swipeleft 事件。它们在开发时在我的台式电脑和 iphone 上工作得很好，但是当我在我的 windows 手机上测试它时，这两个事件都不会触发。

看起来很简单：

```
<div class="swiper">Content</div> 
```

和脚本

```
$(".swiper").swiperight(function(event){
    alert('swiperight');
});
$(".swiper").swipeleft(function(event){
    alert('swipeleft');
}); 
```

同样的问题 $(".swiper").live('swipeleft swiperight')

有人对此有解决方案吗？根据[http://jquerymobile.com/blog/2012/08/01/announcing-jquery-mobile-1-2-0-alpha/](http://jquerymobile.com/blog/2012/08/01/announcing-jquery-mobile-1-2-0-alpha/)他们对 Windows Phone 有 A 级支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:52:35.183

不幸的是，Windows Phone 上的 Internet Explorer 浏览器不支持触摸事件。这意味着用于滑动的 jQuery Mobile 事件在 Windows Phone 上不起作用。据我所知，没有解决方案或解决方法，因为浏览器不会触发必要的事件来检测滑动动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T16:13:51.523

由于 windows phone 7 设备不支持鼠标移动事件，因此向右/向左滑动事件将不起作用。此问题已在 Windows Phone 8 设备中得到解决。

[http://stackoverflow.com/a/15030700/1482739](http://Reference%20link)

# google-provisioning-api - 如何使用 Gdata API 重置会话 cookie

> ID：13804187
> 
> 赞同：1
> 
> 时间：2012-12-10T15:42:14.700
> 
> 标签：google-provisioning-api

使用 Provisioning API，将 changePasswordAtNextLogin 设置为 true 是否还会重置当前登录 cookie？

如果没有，有没有办法通过 API 重置这些 cookie（关闭所有活动会话）？

或者这是仅在控制面板中可用的功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:12:48.960

设置 changePasswordAtNextLogin 不会重置用户会话 cookie。

没有与 CPanel 重置 cookie 设置等效的 API。

# javascript - 我可以从外部 javascript 访问控制台命令行 API（例如来自 Firebug 或 Chrome Inspector 控制台的 $$ 和 traceAll）吗？

> ID：13804188
> 
> 赞同：2
> 
> 时间：2012-12-10T15:42:49.847
> 
> 标签：javascript, api, console, command, firebug

是否可以从外部 API访问[命令行API？](https://getfirebug.com/wiki/index.php/Command_Line_API)

*简单示例：*

HTML

```
 <div id="myDiv"></div>
  <script src="myScript.js"></script> 
```

myScript.js

```
$$('#myDiv').textContent = 'this will not work'; 
```

我不想加载像 jQuery 或 Zepto 这样的外部库，因为这样的视图已经在本地加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:04:59.763

要回答你的问题，不。但我不认为你真的想要。API 可能会更改，从而破坏您的代码。如果您要查找的只是查询选择器。我认为您最好使用 MDN 上的片段。

```
function $ (selector, el) {
    if (!el) {el = document;}
    return el.querySelector(selector);
}
function $$ (selector, el) {
    if (!el) {el = document;}
    return el.querySelectorAll(selector);
    // Note: the returned object is a NodeList.
    // If you'd like to convert it to a Array for convenience, use this instead:
    // return Array.prototype.slice.call(el.querySelectorAll(selector));
}
alert($('#myID').id); 
```

[Document.querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector "MDN")

# hibernate - Hibernate - How to make hibernate and in-memory grid solution work simultaneously with?

> ID：13804192
> 
> 赞同：2
> 
> 时间：2012-12-10T15:43:03.637
> 
> 标签：hibernate, caching, in-memory

In my server I need to server high method calls rate (300 method calls per second). In order to stand this requirement I know that I need a cache/in-memory solution.

**The conflict is how to do that when I'm using hibernate:**

1.  If I will use Hibernate 2nd level cache **doesn't saves the real entity** but the identifier, thus, it doesn't fit.

2.  If I will use an in-memory solution as Infinispan or Couchbase I will need to **develop a layer that doe's** duplicated works (save/delete/update to DB and memory).

Is there any way that I can save/update/delete a JPA Entity to hibernate and to in-memory grid without to develop a layer that doe's that?

I also tried to find the Hibernate API docs but it looks deprecated (if someone can redirect me I'll be happy).

Thanks! Tomer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:08:37.087

你能确认你唯一想要的就是替换 Hibernate 的缓存吗？而不是持久层？

因此，如果您想要在 Hibernate 中拥有“更快”的二级缓存，您是否使用 Infinispan 进行了测试（[https://docs.jboss.org/author/display/ISPN/Using+Infinispan+as+JPA-Hibernate+Second +Level+Cache+Provider](https://docs.jboss.org/author/display/ISPN/Using+Infinispan+as+JPA-Hibernate+Second+Level+Cache+Provider) )，这是一个缓存解决方案。这可能是今天最好的选择。Couchbase 不仅仅是一个缓存（它具有基于 memcached 的缓存，但也允许您将数据作为 NoSQL 引擎持久保存到磁盘上）。

以防万一您可能已经看到 Hibernate OGM ( [http://www.hibernate.org/subprojects/ogm.html](http://www.hibernate.org/subprojects/ogm.html) )，它允许您将数据存储到 NoSQL 实例中，而不是存储到 RDBMS 实例中。我目前正在为 OGM 开发 Couchbase 提供商。（[https://github.com/tgrall/hibernate-ogm/tree/couchbase-support](https://github.com/tgrall/hibernate-ogm/tree/couchbase-support)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:49:23.147

内存缓存提供程序的一种选择是[GridGain](http://www.gridgain.com)。

我不使用它们的后端持久性功能，但它们提供了一个可插入的[GridCacheStore](http://www.gridgain.com/javadoc40DG/index.html?org/gridgain/grid/cache/GridCache.html)接口，因此当您调用 gridGainCache.put(...) 时，它将同步（默认情况下）或异步（使用后写） ，将新条目写入持久层。

文档在[这里](http://www.gridgain.com/book/book.html#_key_concepts)，请注意，他们有一个使用 Hibernate 处理内容的示例。

# javascript - JWPlayer 控制栏导致回发

> ID：13804194
> 
> 赞同：4
> 
> 时间：2012-12-10T15:43:11.750
> 
> 标签：javascript, jwplayer

当用户点击播放/暂停、音量或全屏按钮时，页面会进行回发。这已在 Windows 和 Mac 的 Chrome 23、IE 9、Safari 5 中看到。Firefox 17 和 Opera 12 都可以。最好的可能必须是 Safari 中的全屏。

这是我用来嵌入视频的代码：

```
<div id='my-video'></div>
<script type='text/javascript'>
    jwplayer('my-video').setup({
         file: '/videos/Penultimate_Md.mp4',
         image: '/videos/penultimate_first.png',
         width: '480',
         height: '270',
         });
</script> 
```

如何解决？这只是一个与我无关的错误吗？

## 确认的

这是 HTML5 视频播放器中的一个错误。控制栏输入都是 html 按钮，这会导致 ASP 验证器触发（感谢@Lando 指出这一点）。Longtail 表示它将在下一个版本中修复。`primary: flash,`如果用户安装了 Flash，则添加将起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:07:40.947

我无法告诉您这是否真的是一个错误，但您页面中的以下代码与您的 JWPlayer 设置冲突。

```
<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script> 
```

不知何故，播放器的 html 版本正在触发，`__doPostBack`而后者又触发`theForm.submit()`并最终重新加载页面。

**解决方法 1**

将播放器放在表格之外。

**解决方法 2**

切换到**Flash**作为主要播放器，您可以通过添加`primary: 'flash'`到您的设置来做到这一点，请参见下面的代码。

```
jwplayer('my-video').setup({
     file: '/videos/Penultimate_Md.mp4',
     image: '/videos/penultimate_first.png',
     width: '480',
     height: '270',
     primary: 'flash'
}); 
```

当然，当闪存不可用时，这不会解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:32:55.640

我相信 Mike 的问题是 jwplayer 还没有完成加载。只需在加载播放器后将其添加到事件中即可。这在我的代码中有效

```
 <div id="my-video">Loading the player...</div>
    <script type='text/javascript'>
        $(document).ready(function () {
            jwplayer('my-video').setup({
                playlist: [{
                    sources: [{ file: 'SampleVideo.mp4' }]
                }]
            });
            jwplayer().onReady(function (event) {
                $('#my-video button').on('click', function (event) { return false; });
                alert('Ready');
            });
        });
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:34:14.713

## Hack-tastic 解决方案

严重地。如果有人有更好的解决方案，请告诉我。

当 JWPlayer 检测到兼容 HTML 5 的浏览器时，它会呈现 HTML 5 版本的视频播放器。控制栏按钮是`<button>`元素，默认情况下会导致 ASP.NET 验证器触发，进而导致回发。

使用 Javascript/JQuery，我尝试将`onclick`所有按钮的属性设置`return false;`为`window.onload`事件。但是，由于某种原因，在页面生命周期中的那个时候还没有呈现播放器——JQuery 选择器`$("button")`返回了 0 个元素。

所以这就是我最终要做的。如前所述，这是hack-tacular，我讨厌它。希望 Longtail 能尽快解决这个问题。

```
<div onclick="disableButtons(); return false;" >                
    <div id='my-video'></div>
    <script type='text/javascript'>
        jwplayer('my-video').setup({
            file: '/videos/Penultimate_Md.mp4',
            image: '/videos/penultimate_first.png',
            width: '480',
            height: '270'
            });

function disableButtons() {
    var buttons = $("my-video button");
    buttons.attr('onclick', 'function () { return false; }');

    </script>
</div> 
```

因此，每当用户单击`<div>`包含播放器时，所有按钮都设置为`return false;`. ~~**注意**这适用于页面上的所有按钮。如果您的页面上有任何其他按钮，它也会影响它们。~~我合并了@goodwince 的建议，该建议仅针对指定`div`.

# jsf - How to change the color of the selected row in a data table ace

> ID：13804195
> 
> 赞同：0
> 
> 时间：2012-12-10T15:43:09.113
> 
> 标签：jsf, icefaces

My question is how you can change the color of the selected row in a datatable ace, as the default color is dark blue.

# cordova - update many line with sqlite

> ID：13804197
> 
> 赞同：0
> 
> 时间：2012-12-10T15:43:15.777
> 
> 标签：cordova, jquery-mobile

I use Phonegap I want to change multiple lines on the same table using sqlite. i use this code, but not work.

```
for (var i = 0; i < id_input_type_cotation.length ; i++)
    {
var sql ="UPDATE Selectionner  SET QuotationParDefaut = '?'  WHERE  (IdPrestation = '3') and (IdPhrase = "+id_input_type_cotation[i]+") ; ";

params = [ id_input_type_cotation[i] ];
tx_commenter.executeSql(sql, params);
console.log("I= "+i);

    } 
```

# java - Changing real Array of byte Java

> ID：13804198
> 
> 赞同：0
> 
> 时间：2012-12-10T15:43:21.640
> 
> 标签：java, reference, call

I have that:

```
 byte[] AllNumber = {4,3,2,1,0,5,6,7,8,9};
      byte[] MultNumber = {4,3,2,1,0,5,6,7,8,9}; // No matter the content
      byte[] DivNumber = {4,3,2,1,0,5,6,7,8,9}; // No matter the content

      Alter(AllNumber,MultNumber,DivNumber,5.0,3,2); //The Arrays must be Altered!!

      for (int i = 0; i<MultNumber.length; i++) {
        System.out.println("MultNumber["+i+"]:"+MultNumber[i]);
      }
      for (int i = 0; i<DivNumber.length; i++) {
        System.out.println("DivNumber["+i+"]:"+DivNumber[i]);
      } 
```

Now I have this method:

```
 Alter(byte[] src, byte[] Mlt, byte[] Dvs, double dNum, int Lngt, int Ini) {
        // INI THE PROBLEM
        Mlt = Arrays.copyOf(Mlt, src.length + Lngt);  //HERE IS THE ASSIGNATION
        for (int i = ini; i<Mlt.length; i++) {
          Mlt[i] = Mlt[i]*dNum; //No matter the operation (to simplify the problem)
        }

        Dvs = Arrays.copyOf(Dvs, src.length - Lngt);  //HERE IS THE ASSIGNATION
        for (int i = Ini; i<Dvs.length; i++) {
          Dvs[i] = Dvs[i]/dNum; //No matter the operation (to simplify the problem)
        }
        // END THE PROBLEM
      } 
```

Another Attempt

```
 //Another Attempt!!! 
      Alter(byte[] src, byte[] Mlt, byte[] Dvs, double dNum, int Lngt, int Ini) {
        // INI THE PROBLEM
        byte[] TM = new byte[src.length + Lngt]
        for (int i = ini; i<Mlt.length; i++) {
          TM[i] = Mlt[i]*dNum; //No matter the operation (to simplify the problem)
        }
        Mlt = TM;  //HERE IS THE ASSIGNATION
        TM = null;

        byte[] TD = new byte[src.length - Lngt]
        for (int i = Ini; i<Dvs.length; i++) {
          TD[i] = Dvs[i]/dNum; //No matter the operation (to simplify the problem)
        }
        Dvs = TD;  //HERE IS THE ASSIGNATION
        TD = null;
        // END THE PROBLEM
      } 
```

I want to get two arrangements changed after performing the call of method "Alter". How I can do it this?

I need to change the length of Arrays!

Thank you for your valuable help.

PD. It seems later to make the assignations to the arrays, the "Call by Reference" is converted in "Call by Value". If THE ASSIGNATION is omitted the "Call by Reference" follows being.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:51:13.967

> 我需要改变数组的长度！

这在 Java 中是不可能的。您可以使用动态数据结构，例如`java.util.List`接口的实现。

您的分配没有帮助，因为方法参数是局部变量，引用原始对象。所以你的对象有两个引用，你只改变你方法中已知的引用。

Java 使用按值调用，对于引用数据类型，值是引用的值（因此您获得对同一对象的引用）。

当你想改变一个数组时，你可以做这样的事情。

```
public static int[] arrayTwiceAsBig(int[] original) {
    int[] newOne = new int[original.length * 2);
    System.arraycopy(original, 0, newOne, 0, original.length);
    return newOne;
} 
```

并这样称呼它：

```
int[] myArray = {1,2,3};
myArray = arrayTwiceAsBig(myArray);
System.out.println(Arrays.toString(myArray)); 
```

# android - 媒体查询不适用于移动设备

> ID：13804199
> 
> 赞同：0
> 
> 时间：2012-12-10T15:43:22.140
> 
> 标签：android, css, mobile, media-queries

我为移动设备创建了一个样式表。我用这个加载它：

```
<link rel="stylesheet" media="handheld, screen and (max-width: 650px)" href="/mobile.css?t=<?php echo rand(); ?>" /> 
```

在那个文件里面我有：

```
@media handheld, screen and (max-width: 650px) {
     -- Styles here
}

@media handheld, screen and (max-width: 446px) {
     -- Styles here
} 
```

当我调整浏览器大小时它可以工作，但出于某种原因，至少在 android 上我看到了正常的网络，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:46:45.127

发生这种情况的原因有很多：

1.  **您的 Android 不支持媒体查询。**有少数 Android 设备无法识别媒体查询，您的机器人可能就是其中之一。

2.  **您的媒体查询没有按照您认为的方式进行解释。**您是在寻找“手持设备，（屏幕和最大宽度：650 像素）”，还是必须是最大宽度为 650 像素的手持式屏幕？如果您期待第一个，那么您实际上可能会得到后者。如果是这种情况，那么您可能永远不会触发该代码，因为很少有智能手机将自己注册为“手持设备”。

3.  **你的屏幕宽度不是你想象的那样。**仅仅因为您的屏幕为 1.5" x 3"，并不意味着您的分辨率最高可达 650 像素甚至 446 像素。由于这些智能手机可以实现高密度，您的机器人实际上可能比您的桌面显示器具有更高的分辨率。例如，iPhone5 只会在纵向模式下读取您的第一个查询，因为它的最小边是 640 像素，而较长的边是 1136 像素。Android 操作系统支持的最大分辨率是高达 2560x1600 的分辨率！）

# c# - nhibernate joinqueryover 不相关的表（相同的外键）

> ID：13804204
> 
> 赞同：3
> 
> 时间：2012-12-10T15:43:30.127
> 
> 标签：c#, nhibernate

基本上我想做的是在外键上加入两个表。我有这个查询：

```
 var result =
            _session.QueryOver(() => contentReferenceAlias)
                    .Inner.JoinAlias(() => contentReferenceAlias.ContentReference, () => contentLibrarySearchAlias.ContentReference)
                    .Where(() => contentReferenceAlias.ToLanguage.Id == languageId && contentReferenceAlias.ContentReference.Id == contentLibrarySearchAlias.ContentReference.Id)
                    .SelectList(list => list
                                            .Select(() => contentReferenceAlias.ContentReference)
                                            .Select(() => contentLibrarySearchAlias.ContentReference)
                                            .Select(() => contentReferenceAlias.ContentReference.Id).WithAlias(() => resultAlias.ContentReferenceId)
                                            .Select(() => contentReferenceAlias.ContentReference.Id).WithAlias(() => resultAlias.ContentReferenceId)
                                            .Select(() => contentReferenceAlias.OrderedFrom).WithAlia 
```

试图重新创建的 SQL：

```
 SELECT A.OrderedFrom, C.LastOrdered, A.ContentReferenceId, B.Title FROM TranslationContentReference A
  INNER JOIN TranslationOrder C ON (A.TranslationOrderId = C.Id)
  INNER JOIN ContentLibrarySearch B ON (A.ContentReferenceId = b.ContentReferenceId)
  WHERE A.ToLanguageId = 'xxxx-xxxx-xxxx-xxxx-xxxx' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:34:24.647

如果我确实正确理解了您的情况，则无法通过 QueryOver API 实现加入中间人（外键引用）。NHibernate 需要知道从头到尾的路径，所以如果没有从`TranslationContentReference`到`ContentReference`的明确映射`ContentLibrarySearch`，那么我们就无法创建正确的 JoinAliases。

所以，第一个选择是扩展中间人对象

```
public class ContentReference
{
    ...
    public virtual IList<TranslationContentReference> TranslationContentReference { get; set;}
    public virtual IList<ContentLibrarySearch> ContentLibrarySearch { get; set;}
} 
```

然后我们可以导航（创建路径）

*   从`TranslationContentReference`到`ContentReference`
*   从`ContentReference`到`ContentLibrarySearch`

第二个选项，即少 NHibernate 多 SQL，是创建`ISQLQuery`

```
ISQLQuery query = session.CreateSQLQuery(
  "SELECT A.OrderedFrom, C.LastOrdered, A.ContentReferenceId, B.Title 
    FROM TranslationContentReference A
     INNER JOIN TranslationOrder C ON (A.TranslationOrderId = C.Id)
     INNER JOIN ContentLibrarySearch B ON (A.ContentReferenceId = b.ContentReferenceId)
    WHERE A.ToLanguageId = :language");
query.SetString("language", "xxxx-xxxx-xxxx-xxxx-xxxx");
var result = query.SetResultTransformer(new AliasToBeanResultTransformer(typeof(MyDTO)))
.List(); 
```

# php - 将 url 从一个 php 文件传递 到另一个

> ID：13804205
> 
> 赞同：0
> 
> 时间：2012-12-10T15:43:36.367
> 
> 标签：php

我有一个搜索功能，可以搜索 youtube 视频并将它们显示在我的首页上。就像 YouTube 一样，我想在我的网站上有另一个页面，这样当他们点击视频时，它会将他们带到一个新页面并在那里显示视频 - 仍然是我网站的一部分。

我有一个 search.php，您可以在其中进行搜索，还有一个 video.php，您应该可以在其中观看视频。

我的video.php上有这个：

```
 <a href='video.php?var=$video_id['v']'>Data link</a> 
```

$video_id['v'] = 包含 youtube 页面的 url。

在我的 video.php 上，我有：

```
 <?php
      echo $_GET['var'];
    ?> 
```

var 的值等于“var”。不是我想得到的 URL。你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:46:26.497

在你的 search.php

```
echo "<a href='video.php?var=".urlencode($video_id['v'])."'>Data link</a>"; 
```

这将允许您将完整的 url（包括其他 & 和？）作为变量添加到 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:46:19.947

```
$url = sprintf('video.php?var=%s', $video_id['v']);
<a href="<?php echo $url; ?>">Data link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:17:34.847

您拥有的页面`$video_id['v']`，即search.php，请先检查它以了解它是否获得所需的值，然后再检查video.php

你会怎么做：就在那个 Anchor 标记之前`print_r($video_id['v'])`，[print_r](http://php.net/manual/en/function.print-r.php)是 PHP 中的一个调试函数

现在，我通过所需的更正来保持您的风格。你犯了一些错误。我在下面解释。

```
 <a href="video.php?var=<?php echo urlencode($video_id['v'])?>">Data link</a> 
```

1.  HTML 属性，即href 应该用双引号而不是单引号提供值。
2.  你没有保留引号的包围。两个单引号相互碰撞并中断。
3.  在纯 HTML 中，您使用了不会被解析的 PHP 变量。
4.  即使您在那里有 PHP，您也使用了不会解析内部变量的单引号。
5.  URL 需要经过编码才能通过 URL（即 $_GET）。

# google-chrome - How can I capture events triggered on an extension icon?

> ID：13804213
> 
> 赞同：3
> 
> 时间：2012-12-10T15:43:19.990
> 
> 标签：google-chrome, javascript-events, google-chrome-extension

I want to write an extension for Chrome where, certain mouse actions on the extension icon trigger certain responses.

For example, I want the icon to behave differently when it's clicked, double clicked, scroll clicked, and scrolled on ¹

How can I attach event listeners to the extension icon? I don't mind if the icon has to be in the address bar or in the extensions bar.

^(1\. I actually am focussed on one event, "being scrolled on"--because this is the only even that can be triggered without having the window in focus. But I decided that a more general question is better.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:08:13.670

可以跟踪单击和双击

a)[浏览器动作](https://developer.chrome.com/extensions/browserAction.html)

b)使用 chrome 扩展的[页面操作。](https://developer.chrome.com/extensions/pageAction.html)

默认情况下，chrome 有一个用于[浏览器](https://developer.chrome.com/extensions/browserAction.html#event-onClicked)和[页面](https://developer.chrome.com/extensions/pageAction.html#event-onClicked)操作的单鼠标单击事件侦听器，通过扩展它，您也可以捕获双击事件。

**浏览器操作的单击和双击事件演示**

此示例代码更改了单击和双击的[浏览器操作图标](https://developer.chrome.com/extensions/browserAction.html#method-setIcon)，同样可以使用其[Listener](https://developer.chrome.com/extensions/pageAction.html#event-onClicked)和[setter扩展](https://developer.chrome.com/extensions/pageAction.html#method-setIcon)[页面操作](https://developer.chrome.com/extensions/pageAction.html)。

***清单.json***

在清单中注册浏览器操作和后台脚本

```
{
    "name": "Mouse Clicks",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "This demonstrates how mouse clicks are tracked",
    "background":{
        "scripts":["background.js"]
    },
    "browser_action":{
        "default_icon":"normal.png"
    }

} 
```

***背景.js***

```
//Set click to false at beginning
var alreadyClicked = false;
//Declare a timer variable
var timer;

//Add Default Listener provided by chrome.api.*
chrome.browserAction.onClicked.addListener(function (tab) {
    //Check for previous click
    if (alreadyClicked) {
        //Yes, Previous Click Detected

        //Clear timer already set in earlier Click
        clearTimeout(timer);
        console.log("Double click");

        //Change Icon
        chrome.browserAction.setIcon({
            "path": "double.png"
        }, function () {
            console.log("Changed Icon for Double Click");
        });

        //Clear all Clicks
        alreadyClicked = false;
        return;
    }

    //Set Click to  true
    alreadyClicked = true;

    //Add a timer to detect next click to a sample of 250
    timer = setTimeout(function () {
        //No more clicks so, this is a single click
        console.log("Single click");

        //Chane Icon
        chrome.browserAction.setIcon({
            "path": "single.gif"
        }, function () {
            console.log("Changed Icon for Single Click");
        });

        //Clear all timers
        clearTimeout(timer);

        //Ignore clicks
        alreadyClicked = false;
    }, 250);
}); 
```

浏览器操作\页面操作图标的宽度和高度最多可达 19 个下降（与设备无关的像素）。较大的图标会调整大小以适应，理想情况下您不能`scroll click`或`scroll on`这些小图像。

如果您需要更多信息，请与我们联系

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-11T04:33:32.733

使用 Sudarshan 的答案，我能够修改代码并编写我的答案，如下所示：

```
var OnDoubleClickListener = function(config){
    // Max time between click events occurrence;
    var CONTROL_TIME = 250;

    //Set click to false at beginning
    var alreadyClicked = false;
    var timer;

    if(config && config.onDoubleClick instanceof Function)
    return function(tab) {

        //Check for previous click
        if (alreadyClicked) {
            //Yes, Previous Click Detected

            //Clear timer already set in earlier Click
            clearTimeout(timer);

            //Clear all Clicks
            alreadyClicked = false;

            return config.onDoubleClick.apply(config.onDoubleClick,[tab]);
        }

        //Set Click to  true
        alreadyClicked = true;

        //Add a timer to detect next click to a sample of 250
        timer = setTimeout(function () {
            //Clear all timers
            clearTimeout(timer);
            //Ignore clicks
            alreadyClicked = false;
        }, CONTROL_TIME);
    };
    throw new Error("[InvalidArgumentException]");
}; 
```

然后很简单：

```
//Add Default Listener provided by chrome.api.*
chrome.browserAction.onClicked.addListener(new OnDoubleClickListener({
    onDoubleClick : function(tab) {
        alert("Double Clicked!!!");
    }
})); 
```

# assembly - ARM memcpy 和对齐

> ID：13804215
> 
> 赞同：2
> 
> 时间：2012-12-10T15:44:05.603
> 
> 标签：assembly, arm, neon

我在 Cortex-A8 处理器上使用带有 Windows Embedded Compact 7 ARM 汇编程序的 ARM 网站上的[预加载实现的 NEON 内存副本。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13544.html)

我注意到当我为该函数提供非字对齐值时出现数据类型未对齐异常

例如：

```
; NEON memory copy with preload
ALIGN
LEAF_ENTRY NEONCopyPLD
    PLD [r1, #0xC0]
    VLDM r1!,{d0-d7} ;datatype misalignment
    VSTM r0!,{d0-d7}
    SUBS r2,r2,#0x40
    MOV R0, #0
    MOV PC, LR
ENTRY_END

size_t size = /* arbitrary */;
size_t offset = 1;
char* src = new char[ size + offset ];
char* dst = new char[ size ];

NEONCopyPLD( dst, src + offset, size );

memcpy( dst, src + offset, size ); /* works perfectly */ 
```

这是 VLDM 命令的预期吗？文章没有提到这个实现仅限于字对齐的值。它可以修复吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:04:44.880

即使您没有指定明确的对齐要求，您仍然需要在元素边界（即本例中的双字边界）上对齐数据。这条规则有一些例外，但最好不要依赖它们，除非你有充分的理由这样做。

有关详细信息，请参阅 Cortex-A8 技术参考手册 (ARM DDI 0344J)。

# c# - Mixing .NET 3.5 with 4/4.5 assemblies in the same process

> ID：13804219
> 
> 赞同：31
> 
> 时间：2012-12-10T15:44:14.573
> 
> 标签：c#, .net, clr

I'd like to migrate a .NET 3.5 WinForms based application to the latest .NET version (4.5).

The application uses "external" components (can be thought of as plugins) that are also currently .NET 3.5 based.

I'd like to know what runtime/core libraries are used in case we convert **ONLY THE APPLICATION** to compile using .NET 4.5?

Should this scenario properly work? (loading .NET 3.5 assemblies in a 4.5 process)? * The plugin assemblies are loaded via reflection.

How does the CLR runtime handle such a scenario? is this a safe practice?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-10T16:11:56.837

如果您将应用程序的主 EXE 重新编译为面向 .NET 4.x 或使用带有`<supportedRuntime>`元素的 app.exe.config 文件来强制使用 CLR 版本 4，那么使用 .NET 3.5 和 .NET 将毫无问题。 NET 4.0 程序集。CLR v4 读取 3.5 程序集没有问题，它向后兼容。反之亦然，CLR v2 无法读取版本 4 程序集，这就是如果您的 EXE 不是针对 v4 时您需要 .config 文件的原因。

唯一的问题是 3.5 程序集对旧框架程序集的依赖关系。例如，它将要求 mscorlib.dll 的 2.0.0.0 版本。CLR 自动*翻译*这些请求并将它们替换为版本 4.0.0.0。通常工作得很好，标准的 4.0 框架程序集与旧版本非常兼容。

然而，微软确实抓住了这个机会，将 4.0 作为一个新的并行版本并修复了无法轻易修复的旧错误，而不会冒着破坏意外依赖错误行为的代码的风险。它们是非常晦涩的错误，这些错误修复不太可能让您感到厌烦。但是，您必须重新测试您的代码以确保。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-10T16:45:20.057

所有程序集都将使用应用程序所针对的 .NET Framework 中的类型。

这是一个简单的测试：

项目“ **Net2Library** ”是一个**.NET Framework 2.0 类库**，具有以下类：

```
using System;
using System.Collections.Generic;

namespace Net2Library
{
    public class Class1
    {
        public static List<string> GetStrings()
        {
            var strings = new List<string>();
            Console.WriteLine("From Net2Library: {0}", strings.GetType().AssemblyQualifiedName);
            return strings;
        }
    }
} 
```

项目“ **Net4Application** ”是一个**引用 Net2Library.dll**并具有以下类的**.NET Framework 4.0 控制台应用程序**：

 **```
using System;
using Net2Library;

namespace Net4Application
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("From Net4Application: {0}", Class1.GetStrings().GetType().AssemblyQualifiedName);
        }
    }
} 
```

控制台输出将是：

> 来自 Net2Library：System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken= b77a5c561934e089 来自 Net4Application：System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken =b77a5c561934e089

您还可以查看以下资源： [.NET Framework 程序集统一概述](http://msdn.microsoft.com/en-us/library/db7849ey(v=vs.100).aspx)和[程序集绑定重定向](http://msdn.microsoft.com/en-us/library/2fc472t2.aspx)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-10T15:54:59.940

如果您有一个从 4.5 可执行文件引用的 3.5 程序集，则这两个程序集都将在 4.5 的 CLR 环境中运行。但是，3.5 程序集将针对 v3.5 库，而不是 v4.0（尽管 4.0 库将具有与 3.5 相同的功能，甚至更多）。

因此，至少根据我的经验，如果您想要针对 2.0-3.5 的程序集和针对 4.0-4.5 的其他程序集，您将需要在客户端计算机上安装 3.5 和 4.5 框架版本。3.5 完全向后兼容回到 2.0，因此您可以在一个环境中运行 3.5、3.0 和 2.0。4.0-4.5 与大多数旧代码兼容，但有一些重大更改（CAS 是我最近偶然发现的一种情况），您必须明确定位 4.0（或设置 SupportedRuntime app.config 键）。**

# iphone - UIViewController container: allow different orientations for childs

> ID：13804223
> 
> 赞同：0
> 
> 时间：2012-12-10T15:44:48.867
> 
> 标签：iphone, ios, uiviewcontroller, uideviceorientation

**UPDATED:** Is it possible to have one `UIViewController` (`vc1`) as container and one `UIViewController` as a child (`vc2`)

```
[vs1 addChildViewController:vc2];
[vs1.view addSubview:vc2.view]; 
```

and allow orientation change in `vc2` independently from `vc1` supported orientations?

F.e `vc1` supports only portrait orientation, but `vc2` supports all orientations. I want to see `vc2` view rotated to landscape meanwhile `vc1` view still in portrait.

**F.e I have VC1 and VC2 (popup)**

![Portrait](../Images/d5d0361386b02d0ca5dc2bc486e2725c.png)

**Only portrait orientation is supported for VC1, but VC2 supports all orientations.**

![enter image description here](../Images/0a2fabde3320abea5c7e7a74d5a48989.png)

**I would like to have landscape orientation for popup**

![enter image description here](../Images/9e1b684d4669a6b41fc6e3566102c63a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:52:48.600

方向由父视图控制器检测。我使用的方法是在父视图控制器中，检测哪个视图是当前活动视图，然后根据它进行定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:13:11.373

抱歉，标准行为无法实现您想要的。当 childViewController 支持某个方向时，它的父级和当前层次结构中的所有其他 ViewController 也必须支持该方向。

您应该做的是注册 parentViewController 以接收设备旋转通知，然后根据这些通知您可以转换 childViewController 的视图。因此，基本上您的应用程序将始终保持纵向模式，但 childViewController 的视图将被转换为看起来像在横向模式。

像这样注册设备方向通知

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(deviceDidRotate:) name: UIDeviceOrientationDidChangeNotification object: nil]; 
```

然后这样处理

```
// This method gets called everytime the device (!), not the viewController rotates
-(void)deviceDidRotate: (NSNotification*) notification
{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

    // Animate the transform here based on the orientation
} 
```

请记住，UIDeviceOrientation 和 UIInterfaceOrientation 是相反的。UIDeviceOrientationLandscapeLeft = UIInterfaceOrientationLandscapeRight。设备向左旋转，因此用户界面必须向右旋转。

# android - ActionBar Sherlock 与谷歌地图

> ID：13804226
> 
> 赞同：0
> 
> 时间：2012-12-10T15:44:55.527
> 
> 标签：android, google-maps, actionbarsherlock

> **可能重复：**
> [将 ActionBarSherlock 与新的 SupportMapFragment 一起使用](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment)

抱歉这个菜鸟问题，但我想知道是否有办法将 actionBar sherlok 与谷歌地图一起使用？
这里的问题是操作栏需要扩展 SherlockActivity，但地图需要扩展 MapActivity。还有其他选项可以在地图上使用 actionBar 吗？

任何信息将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:48:00.220

你可以使用片段。您可以`MapFragment`使用：http: [//developer.android.com/reference/com/google/android/gms/maps/MapFragment.html](http://developer.android.com/reference/com/google/android/gms/maps/MapFragment.html)

或者：

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:49:40.610

您可以将地图制作成 webView

[https://developers.google.com/maps/articles/android_v3](https://developers.google.com/maps/articles/android_v3)

# java - 尝试捕捉“找不到符号”

> ID：13804228
> 
> 赞同：2
> 
> 时间：2012-12-10T15:44:57.663
> 
> 标签：java, try-catch

嗨，我试图在我的代码中进行一些小的验证，但是，当我尝试捕获大面积的文本（如下面的）时，我在 catch 上方收到错误消息，上面写着“找不到符号”有人可以指出我在正确的方向上做错了什么？任何帮助表示赞赏

```
try{
    while (option != 0) {     

    }//End Loop      
} catch(InputMismatchException e) {    
    System.out.println("\nNot a number or an integer!\n");
    option = menuSystem();    
}
}
}//End OF Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:48:26.283

我猜你`try/catch` **的不包含**在任何方法实现中。

说明你在大括号之后关闭了类`catch`的大括号！**方法的花括号在哪里？**

您是否至少有一个`main`包含您的代码的方法（或其他方法）？

当然，如果您在类声明之后开始编码，这将导致一些警报/错误。例子：

```
public class Job{
  try{ //Unexpected token !!!
  }
  catch(Exception e){

  }
} 
```

您的问题不是由缺少异常标识符引起的。在这种情况下，您最终会收到“预期标识符”警报。

此外，在课程结束后删除最后一个花括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:53:10.817

当编译器无法识别类名时发生java 错误**找不到符号。**以下是此类错误的原因：

1）当程序员拼错类名时。

2当程序员不导入类名时。

阅读[此文档](http://www.roseindia.net/java/java-get-example/cannot-find-symbol.shtml)以获取更多信息，并在阅读后再次检查您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:11:01.250

> 当我尝试编译时，它好像在寻找一个类我得到这个错误“符号：类 InputMismachException 位置：类 Assigment.MenuResults}catch(InputMismachException e) 1 错误”

正确查看错误：

> 错误“符号：类 InputMismachException 位置：类 Assigment.MenuResults }catch(InputMismachException e) 1 错误”

我假设您正在从记事本运行此代码。如果你是我建议你使用像 Eclipse/netbean 这样的 IDE ......现在，出现错误，它说它找不到**InputMismachException**。您缺少导入语句。

将其导入您的班级，例如：

```
 import java.util.InputMismatchException; 
```

# c# - JSON.Net Struct Serialization Discrepancy

> ID：13804230
> 
> 赞同：9
> 
> 时间：2012-12-10T15:45:02.513
> 
> 标签：c#, json, json.net

When using JSON.Net to serialize/deserialize structs, a build-in struct type (like System.Drawing.Size) serializes to a string, whereas a custom struct type serializes to a JSON object.

For example:

```
using System;
using System.Drawing;
using Newtonsoft.Json;

namespace TestJsonNet
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(JsonConvert.SerializeObject(new Size(50, 50)));
            Console.WriteLine(JsonConvert.SerializeObject(new Size2(50, 50)));
        }
    }

    struct Size2
    {
        public int Width { get; set; }
        public int Height { get; set; }
        public Size2(int w, int h) : this()
        {
            Width = w; Height = h;
        }
    }
} 
```

Outputs the following:

```
"50, 50"
{"Width":50,"Height":50} 
```

I can understand the thinking behind serializing a struct to a string, since the memory layout is always the same; however, why the discrepancy when serializing a custom struct?

Also, I would (for internal legacy reasons), like to have JSON.Net serialize structs like the latter case (i.e. as JSON, not string). If it's possible, how can that be achieved?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T13:10:27.670

使用反射可以解决这个问题。我参加了您自己建议的解决方案的一部分，并使用反射来获取属性名称和值。

```
class StructConverter : JsonConverter
{
    public override void WriteJson(
        JsonWriter writer, object value, JsonSerializer serializer)
    {
        var myObject = (object)value;
        var jObject = new JObject();

        Type myType = myObject.GetType();
        IList<PropertyInfo> props = new List<PropertyInfo>(myType.GetProperties());

        foreach (PropertyInfo prop in props)
        {

            jObject.Add(prop.Name, prop.GetValue(myObject, null).ToString());
        }
        serializer.Serialize(
            writer,  jObject);
    } 
```

……

```
 public override bool CanConvert(Type objectType)
    {
        return objectType.IsValueType;
    }
} 
```

# android - 从指定文件夹获取图像的列表视图

> ID：13804239
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:45:32.703
> 
> 标签：android, image, listview

我有一个应用程序，其中列表视图是从数据库中填充的。

从这个数据库中，我获取一个文本和一个包含文件夹的字符串，例如 /sd-card/my-folder/image.jpg

我需要用图像和文本创建一个列表视图。

我知道所有关于 listview 适配器和其他的东西......但我不知道如何放置这个图像，因为我没有 id（比如`getResources().getIdentifier("foto_"+Integer.parseInt(data_mio.getString(id_immagine)), "drawable", getPackageName()))`

但只有字符串....我能得到的最大值是可绘制的：-|

```
 String[] from = new String[] {"photo","description"};
        int[] to = new int[] {R.id.list_image,R.id.list_content};
        final SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,R.layout.lista, data_db, from, to); 
        list_inventario.setAdapter(adapter); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:07:36.133

我自己建立了解决方案！很简单！

```
 String[] from = new String[] {"foto","descrizione"};
        int[] to = new int[] {R.id.prova,R.id.list_content};
        final SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,R.layout.lista, data_db, from, to); 
        list_inventario.setAdapter(adapter); 
```

图像正常工作。这是满足:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:51:47.840

listView.setImageBitmap(BitmapFactory.decodeFile(Environment.getExternalStorageDirectory()+"/path_to_file"))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:52:33.217

用这个

```
Bitmap bitmap = BitmapFactory.decodeFile("the path");

yourview.setImageBitmap(bitmap); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:55:59.493

由于您知道文件的路径，因此可以使用标准 Java I/O 类非常轻松地打开它（假设它存储在 SD 卡上，对于内部存储，您将需要使用不同的方法）。

然后，您可以像这样创建一个可绘制对象：

```
FileInputStream readFile = new FileInputStream("/sd-card/my-folder/image.jpg");
Drawable yourDrawable = Drawable.createFromStream(readFile, "image.jpg"); 
```

然后你就可以像往常一样使用 Drawable 了。

如果图像的路径是内部存储路径，则可以这样创建 Drawable：

```
Drawable yourDrawable = Drawable.createFromStream(getAssets().open("/my-folder/image.jpg"), "image.jpg"); 
```

# android - 手机上的模糊/像素化图像

> ID：13804247
> 
> 赞同：0
> 
> 时间：2012-12-10T15:46:00.193
> 
> 标签：android, css, webkit

在我的 phonegap 应用程序中，我在列表视图中显示了一个 240x240 的图像，它被调整为 80x80。这工作正常，图像清晰：

![酥脆](../Images/4992092156a2bba80ca52f8486570218.png)

但是，在我的应用程序的其他地方，我也想显示这些图像。因为我想显示更多，所以我使用精灵。尽管如此，精灵元素（精灵中的一个图像）是 240x240 并再次调整为 80x80（使用`background-size`），但现在看起来像这样：

![模糊](../Images/8c17a8e7cb7c61214c54d7867e52dd54.png)

如果我使用较小的尺寸（如 120x120 或 80x80）并将其调整为 80x80，它不会像素化，但会非常模糊。与所描述的第一种情况的唯一区别是使用 CSS sprites，但有很多人使用它们，我无法想象这是一个问题。有谁知道可能导致此问题的原因以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:32:32.320

顺便说一句，我找到了问题的根源：`z-index`.

这些图像被绘制为`div`存在于 wrapping 中的元素上的背景图像`div`。如果我给他们一个`z-index`以确保他们在上面，他们会变得模糊。删除`z-index`导致它们完美呈现。

这实际上可能是 Webkit 引擎中的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:48:58.527

如果您使用的是 Paint，请在使用 Paint 实例之前确认以下内容：

```
paint.setAntiAlias(true);
paint.setDither(true);
paint.setFilterBitmap(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T21:00:28.240

添加`border-radius: 1%;`为我修复了这个

# math - golang中的负零文字

> ID：13804255
> 
> 赞同：12
> 
> 时间：2012-12-10T15:46:34.173
> 
> 标签：math, floating-point, go, ieee-754

IEEE754 支持负零。但是这段代码

```
a  := -0.0
fmt.Println(a, 1/a) 
```

输出

```
0 +Inf 
```

我本来期望的地方

```
-0 -Inf 
```

浮点格式基于 IEEE754 的其他语言允许您创建负零文字

爪哇：

```
float a = -0f;
System.out.printf("%f %f", a, 1/a); // outputs "-0,000000 -Infinity" 
```

C＃ ：

```
var a = -0d;
Console.WriteLine(1/a); // outputs "-Infinity" 
```

Javascript：

```
​var a = -0;
console.log(a, 1/a);​ // logs "0 -Infinity" 
```

但我在 Go 中找不到等价物。

你如何在 go 中写一个负零文字？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T16:18:03.613

有[一个已注册的问题](https://github.com/golang/go/issues/2196)。

它恰好给出了一种解决方案：

```
a := math.Copysign(0, -1) 
```

它并没有那么糟糕，因为它显然是指`copysign`由`IEEE754`.

但这意味着您需要导入一个包，这对于（诚然次要和罕见的）需求来说仍然显得过于繁重。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T15:51:54.403

```
package main

import (
        "fmt"
        "math"
)

func main() {
        a := 1\. / math.Inf(-1)
        fmt.Println(a, 1/a)
} 
```

（也在[这里](http://play.golang.org/p/TeQqOq8g7F)）

* * *

输出：

```
-0 -Inf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:17:49.660

我刚试过这个，它似乎对我有用。

```
package main

import (
    "fmt"
    )

func main() {
    zero := float64(0)
    neg_zero := -zero
    fmt.Println(zero, neg_zero)
} 
```

虽然当我这样做时它没有按预期工作`neg_zer0 := - float64(0)`

# video - 有没有办法在嵌入式 youtube 或 vimeo（或其他）视频上强制高清（720p）？

> ID：13804258
> 
> 赞同：2
> 
> 时间：2012-12-10T15:46:43.730
> 
> 标签：video, youtube, video-streaming, vimeo

以前，通过添加`"&hd=1"`到 youtube URL 会强制高清。不过，这种情况最近发生了变化。使用本机 youtube 嵌入式播放器或备用 youtube 视频嵌入代码是否有任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:10:17.737

在 Vimeo 上执行此操作的唯一方法是，`"Default this video to HD when embedded"`如果您是会员，请在您自己的视频上`Plus`勾选该选项`PRO`。不过，观众的偏好总是高于这一点。因此，当您第一次看到 Vimeo 视频时，我们将使用视频所有者的偏好设置，但如果观看者更改了 HD/SD 设置，则该设置将适用于所有视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T11:48:56.600

经过大量研究，我找到了一篇关于 Vimeo 解决方案的[博客文章：](http://www.dailytech.com/Tutorial+Heres+How+to+Force+YouTube+or+Vimeo+VIdeos+to+Embed+as+HTML5/article37383.htm)

添加 iframe 属性

```
 sandbox="allow-same-origin allow-scripts allow-popups" 
```

添加 API 参数

```
?api=1 
```

查看[Force HTML5 youtube 视频](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)，了解有关 Youtube 的信息。

# javascript - JQuery：触发对 Ajax 生成的 HTML 的点击

> ID：13804259
> 
> 赞同：1
> 
> 时间：2012-12-10T15:46:44.573
> 
> 标签：javascript, jquery, dom

如果我不清楚，请随时编辑标题或描述。

今天的大问题：DOM 到底做`alert('foobar');`了什么？！

这是我的问题：我在数据库中有一个大树要获取（3 个级别）。所以在我的`<form>`我逐渐加载它，使用AJAX（你可以在图片上看到它）![人机交互](../Images/9a23745a70583a4ecaa043cdd7fbe476.png) 这是我的代码（简化） - 很抱歉粘贴大部分代码，但一切都需要 - ：

```
<script type="text/javascript">
    $(document).ready(function(){
        // generate the CAT box
        $("input[name='or-idgd']").change(function(){
            var idgd = this.value;
            $.post(GLOBAL_HOST+"ajax.php", {'myarg':idgd},
              function(data){
                var form = '';
                var obj = jQuery.parseJSON(data);
                form += '<div>';
                for (var i = 0 ; i < obj.length ; i++) {
                  form += '<label for="'+obj[i].id_cat+'_cat">';
                  form += '<input id="'+obj[i].id_cat+'_cat" type="radio" name="or-idcat"';
                  form += 'value="'+obj[i].id_cat+'" >';
                  form += obj[i].cat_name+'</label>';
                }
                form += '</div>';
                $("div#box_cat").append(form);
              }
            );
        });
          // generate the COMP box
        $("input[name='or-idcat']").change(function(){
          var idcat = this.value;
          $.post(GLOBAL_HOST+"ajax.php", {'myarg2':idcat},
            function(data){
              $("div#box_comp").empty();
              var form = '';
              var obj = jQuery.parseJSON(data);
              form += '<div>';
              for (var i = 0 ; i < obj.length ; i++) {
               form += '<label for="'+obj[i].id_comp+'_comp">';
               form += '<input id="'+obj[i].id_comp+'_comp" type="radio" name="or-idcomp"';
               form += ' value="'+obj[i].id_comp+'">';
               form += obj[i].competence_nom+'</label>';
              }
              form += '</div>';
              $("div#box_comp").append(form);
            }
          );
        }));
<?php   /*** THIS IS THE INTERESTED PART - rebulding the tree cf screenshot ***/
        // When the form is submitted :
        if (!empty($_POST['or-idgd'])) { ?>
            $('#<?php echo $_POST['or-idgd']; ?>_gd').trigger('click');
<?php       if (!empty($_POST['or-idcat'])) { ?>
                //alert('before');
                $('#<?php echo $_POST['or-idcat']; ?>_cat').trigger('click');
                //alert('after');
<?php           if (!empty($_POST['or-idcomp'])) { ?>
                    $('#<?php echo $_POST['or-idcomp']; ?>_comp').prop('checked', true);
<?php           }
            }
        } ?>
    }); // document.ready
</script> 
```

上面的代码工作正常。但是，当我提交表单时，我在 JQuery 中重建树，`.trigger()`用于**模拟**点击。我们在这里：像这样，这是行不通的。只有 cat_box 被创建（感谢 PHP 中内置的 gd_box），*即*只有第一个`.trigger('click')`工作。是的，我知道，我想我可以在 PHP 中重建它，但我不想......

**但是要振作起来**：如果我取消注释这两个`alert()`，其他人`.trigger()`也可以，我可以拥有我想要的东西（cf screenshot）。

**两个问题：**

1.  到底是如何`alert()`让 Jquery 重新考虑 DOM 的？好的，我明白了，谢谢。
2.  我该如何解决？（我试过`.live()`，，`.on()`等等......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:54:44.453

警报会停止浏览器，在您的情况下，它可以：

1.  完成ajax请求
2.  将新元素插入 dom*

您需要添加一些功能让您`trigger()`等待最后一次调用完成，因此它实际上可以在您的元素上执行。
通常这是通过将回调传递给完成后执行的函数来完成的。

```
function doStuff(callback){
   // do Stuff

   callback();
}
function doMoreStuff(){
   // do more stuff after doStuff() is done
}

// do stuff and after(!) that do more stuff
function doStuff(doMoreStuff); 
```

*****实际上，这已放入事件队列中，并安排在您的其余代码之前。在警报期间，GUI 线程中的 JS 完全停止。ajax-callback 的评估安排在您的其余代码之前（不确定您是否可以依赖它）。

编辑：

您的代码可能如下所示：

```
$("input[name='or-idgd']").change(function(e,callback){
   // first parameter (e) is always the event object
   ...
   // if this eventhandler is called with a callback function given
   // execute it in the end of your function
   if(callback){callback()}
}

// and your modified trigger:

$('#<?php echo $_POST['or-idgd']; ?>_gd').trigger('change',
      // handing over the second trigger as a callback function
      // which gets executed after the first one is ready
      function(){$('#<?php echo $_POST['or-idcat']; ?>_cat').trigger('click');}
  ); 
```

[请参阅工作回调功能](http://jsfiddle.net/FJQPL/)的简约示例。第一次，更改是通过回调触发的，随后的所有时间都正常调用。

# javascript - 如何防止元素具有相同的偏移值？

> ID：13804264
> 
> 赞同：0
> 
> 时间：2012-12-10T15:46:22.947
> 
> 标签：javascript, jquery, css

我正在尝试创建一个与 facebook 布局相似的页面。我使用 Masonry 插件创建了两列网格。

现在我正在尝试为每个创建时间线效果的帖子创建 facebook 的小工具提示。问题是有些文章是对齐的，它们的工具提示会重叠。有没有办法检查任何两篇文章是否具有相同的顶部偏移量 (??)，如果是这样，请为其中一篇文章添加一些边距，以使它们不一样。

我试图在这里说明网格[http://d.pr/i/9MzP](http://d.pr/i/9MzP) - 我的想法是绿色框是我遇到的问题，我不希望它们彼此平行。

谢谢

# javascript - ExtJS Ajax 请求超时对 Internet Explorer 没有影响

> ID：13804266
> 
> 赞同：2
> 
> 时间：2012-12-10T15:47:02.660
> 
> 标签：javascript, ajax, jquery, extjs, extjs3

我正在使用 ExtJS 3.4。我有一个长时间运行的异步进程，我需要等到它完成。它适用于 Firefox，但 Internet Explorer 不会等待。我该如何解决这个问题？

这是我的客户端代码：

```
function SaveUser(form, myDataObject, url) {
    if (form.isValid()) {

        StatusMessage.show('Please wait. New User Registrations may take up to one minute to complete.');

            Ext.Ajax.request(
            {
                url: url,
                method: 'POST',
                timeout: 30000,
                params: myDataObject,
                success: function (result, request) {
                    StatusMessage.hide();
                    formSubmit = Ext.util.JSON.decode(result.responseText);

                    if (!formSubmit.success) {
                        Ext.Msg.show({
                            title: 'Error',
                            msg: formSubmit.msg,
                            buttons: Ext.Msg.OK,
                            icon: Ext.MessageBox.WARNING,
                            minWidth: 390,
                            maxWidth: 390,
                            closable: false
                        });                 
                    } else {
                        ShowRegistered();
                    }
                },
                failure: function (result, request) {
                    StatusMessage.hide();
                    ShowServerError(result);
                }

            });
        } else {
            ShowValidationErrors();
        }
    } 
```

这是我的服务器端代码：

```
CreateUserInActiveDirectory(user);

//Internet Explorer Time Out immediately instead of waiting here
System.Threading.Thread.Sleep(20000);

AuthenticateUser(user); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:07:28.947

这不是 extjs 问题，而是 IE 问题。其实 30000 是 extjs 的默认超时时间。

大多数时候这是因为全局 IE 全局超时设置。查看 **ReceiveTimeout键的****HKCU\Software\Microsoft\Windows\CurrentVersion\Internet 设置**，如果存在则将其删除，如果没有以毫秒为单位的值创建它。

 **如果这个问题是新的并且以前从未发生过，请检查您最近安装的最新软件产品，有几个设置了这个值。**

# windows - 当应用程序没有焦点时禁用 Qt 鼠标事件

> ID：13804267
> 
> 赞同：1
> 
> 时间：2012-12-10T15:47:03.340
> 
> 标签：windows, qt

我有一个 Qt (4.7) Windows 7 应用程序，其中某些组件对`QEvent::HoverEnter`, `QEvent::HoverLeave`, `QEvent::HoverMove`,`QEvent::MouseMove`事件作出反应。当显示主应用程序窗口但没有焦点时，我想忽略这些事件。

例如，假设我有两个并排的窗口：我的主应用程序窗口和一个 Web 浏览器窗口。如果我在浏览器窗口上单击鼠标左键，则浏览器具有焦点。如果我现在将鼠标指针移到我的主应用程序窗口上而不单击它，我不希望应用程序做出反应。当前行为是我的应用程序接收鼠标事件并对它们做出反应（打开菜单等）。

由于我的主类`MyApplication`是从 派生的`QtSingleApplication`，我想重写该方法

```
virtual bool MyApplication::notify(QObject* receiver, QEvent* event) 
```

并添加一个测试，这样如果我的应用程序没有任何焦点窗口，我就可以忽略特定事件。有没有办法在 Qt 中验证这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:14:58.660

您可以使用`QApplication::activeWindow()`，如果您的应用程序不在焦点上，它将返回零指针。

# php - 结合 2 个 if 语句

> ID：13804272
> 
> 赞同：0
> 
> 时间：2012-12-10T15:47:14.613
> 
> 标签：php

我有 2 个 if 语句我想合并为一个。

这些是当前的 if 语句：

```
if (empty($_POST['route']))
{
    $formerrors[] = '<span class="error">route</span>';
} else {
    $route = escape_data($_POST['route']);

}

if (mysql_num_rows($result) == 0)
{
    $formerrors[] = '<span class="error">route</span>';
} else {
    $route = escape_data($_POST['route']);

} 
```

我需要类似的东西：

```
if (empty($_POST['route'])) & (mysql_num_rows($result) == 0)
{
    $formerrors[] = '<span class="error">route</span>';
} else {
    $route = escape_data($_POST['route']);

} 
```

但不是 100% 确定如何实现这一目标

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:47:58.780

根据您实际想要的含义：更改`&`为`&&`("and") 或`||`("or")`。

[http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:49:13.870

你必须在`||`这里使用（逻辑或）：

```
if ( empty($_POST['route']) || mysql_num_rows($result) == 0) {
  ...
} 
```

`$_POST['route']`...否则，仅当 BOTH和`$result`为空时才会调用您的错误处理代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T15:49:27.270

```
if (empty($_POST['route']) ||  mysql_num_rows($result) == 0)
{
    $formerrors[] = '<span class="error">route</span>';
} else {
    $route = escape_data($_POST['route']);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:59:44.133

不知道如何感谢大家，但[http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)是我所追求的。

谢谢大家，这给了我一些阅读的东西，也考虑到你所有的评论

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T15:56:48.660

您需要学习 PHP 中的运算符。您使用`&`which 实际上是按位运算`and`符，而不是真正的`and`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T15:48:44.053

你几乎明白了。

```
if ((empty($_POST['route'])) && (mysql_num_rows($result) == 0))
{
    $formerrors[] = '<span class="error">route</span>';
} else {
    $route = escape_data($_POST['route']);
} 
```

# iphone - 通过手势旋转同一图像后，CoreGraphics 擦除图像的问题？

> ID：13804275
> 
> 赞同：2
> 
> 时间：2012-12-10T15:47:26.133
> 
> 标签：iphone, objective-c, image, core-graphics, uigesturerecognizer

目前，我遇到了一个有点危险的问题。我正在做的是在核心图形的帮助下擦除图像并在同一图像上应用旋转效果。当我只是擦除图像时，擦除工作正常，但是当我先旋转该图像然后擦除同一图像时。当我移动以擦除图像的任何特定像素时，图像变得模糊并且图像的高度正在减小。这是我用来擦除图像的代码片段：-

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
        UITouch *touch = [[event allTouches] anyObject];
        mPreviousPoints = [touch locationInView:self];
        mPreviousPoints.y = mPreviousPoints.y ;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

        UITouch *touch = [[event allTouches] anyObject];
        CGPoint currentPoint = [touch locationInView:self];
        currentPoint.y = currentPoint.y ;

        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        UIGraphicsBeginImageContext(self.frame.size);
        CGContextRef currentContext = UIGraphicsGetCurrentContext();
        [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
        CGContextSetBlendMode(currentContext,kCGBlendModeClear);
        CGContextSetLineCap(currentContext, kCGLineCapRound);
        CGContextSetLineWidth(currentContext, 20);
        CGContextSetStrokeColorWithColor(currentContext, [[UIColor clearColor] CGColor]);
        CGContextBeginPath(currentContext);
        CGContextMoveToPoint(currentContext, mPreviousPoints.x , mPreviousPoints.y );
        CGContextAddLineToPoint(currentContext, currentPoint.x , currentPoint.y);
        CGContextStrokePath(currentContext) ;
        self.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
} 
```

如果我不旋转图像，代码工作正常。

我也尝试使用触摸事件旋转图像，但没有任何变化，所以这是我在我的应用程序中使用的滚动代码：-

```
#pragma mark Rotation Gesture

- (void)rotateImage:(UIRotationGestureRecognizer *)recognizer
{
if (objAppDelegate.touchBool == YES)
{
    if([recognizer state] == UIGestureRecognizerStateEnded)
    {
        previousRotation = 0.0;
        return;
    }

    CGFloat newRotation = 0.0 - (previousRotation - [recognizer rotation]);

    CGAffineTransform currentTransformation = touchImageView.transform;
    CGAffineTransform newTransform = CGAffineTransformRotate(currentTransformation, newRotation);

    touchImageView.transform = newTransform;

    previousRotation = [recognizer rotation];
}
} 
```

我正在发布屏幕截图，以便您可以正确理解我的问题。所以，请看看它并帮助我。

![原始图像](../Images/de72be6dd194b539949997c2b8291e8e.png)

![仅应用擦除效果后的图像](../Images/4288eddd848766be24499d313fe0f7b6.png)

![旋转后的图像](../Images/72c16907fc4d2760034c56aae0714613.png)

![旋转和擦除后的图像](../Images/9841ae60637dc45113d7f6b81433984e.png)

如果可以，请你帮助我！

提前致谢 ：）

# php - 多站点登录栏

> ID：13804277
> 
> 赞同：1
> 
> 时间：2012-12-10T15:47:28.200
> 
> 标签：php

如何实现多站点登录栏？我正在开始一个个人项目，该项目需要多个站点上方的标题栏，以允许用户登录或做其他事情，我正在用 PHP 编写代码，除了 wordpress 插件之外，我无法在网上找到任何东西。

编辑：对不起，我昨晚很晚才写了这篇文章，所以我对此很含糊。我会更详细一点。

一个例子是顶部的 StackExchange 栏，我将有一个统一的登录数据库，每个站点都可以访问。

我想我只是好奇如何最好地通过 PHP 或一些 MVC 框架来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:52:07.600

您需要添加一个`username`和`password`字段，一个`site`字段，可能是一个`select`输入元素。

在处理登录凭据之前，您会看到用户选择了哪个站点并从那里获取它。

我假设您正在为自定义项目自己编写代码。

如果您知道`sql`并且基本`php` `sessions`，`cookies`那么这应该不会太难。

# iphone - iPhone 4 和 5 的区别

> ID：13804278
> 
> 赞同：0
> 
> 时间：2012-12-10T15:47:28.403
> 
> 标签：iphone, media-queries

如果我想区分 iPhone 4 和 iPhone 5，我需要使用哪些媒体查询？（我也需要区分垂直和水平）

更新：有人向我询问*了*iPhone 5，但我正在寻找 4 种不同的，它们只会影响 iPhone 和完全相同尺寸的手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:52:08.367

由于屏幕较长，iPhone 5 的最大设备宽度不同。

```
@media only screen and (min-device-width: 640px) and (max-device-width: 1136px) and (-webkit-min-device-pixel-ratio: 2) {
    /* iPhone 5 specific stuff */
} 
```

# android - 如果处理程序用于发布消息，则 Imageview 不会更新

> ID：13804279
> 
> 赞同：0
> 
> 时间：2012-12-10T15:47:31.793
> 
> 标签：android, imageview

**这是我的代码**

```
public void invalidateWidget(boolean invalidateUsingCaches) {
        mUpdatingWidget = true;

        if (invalidateUsingCaches) {
            widget.invalidateUsingCaches();
            if (widget.isRefreshRequired()) {
                widget.initializeRefreshRequired();
                mWidgetUpdateHandler.removeMessages(handlerMessage);
                mWidgetUpdateHandler.sendEmptyMessageDelayed(handlerMessage,
                        handlerDelay);
            }
        } else {
            widget.invalidate(false);
        }

        refreshImageView();

        mUpdatingWidget = false;
    } 
```

**这条线**

```
mWidgetUpdateHandler.sendEmptyMessageDelayed(handlerMessage,
                        handlerDelay); 
```

导致 imageview 不会随着 android 版本 2.3 手机上的更改而更新，但适用于较新的 android 版本。

到目前为止，我已经尝试了以下方法：

1.  `imageview.invalidate();`
2.  使用带有处理程序的可运行文件。
3.  `activity.runOnUiThread();`

请记住，该代码适用于较新的 android 版本。好吧，它应该适用于所有版本，因为代码遵循 Android 指南。

有人知道为什么会发生这种情况吗？解决方案？
MessageQueue在这里有事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:36:51.430

问题在于向 imageview 提供新的位图。在处理程序的 handleMessage() 中，我为 imageview 提供了新的位图，这导致它不会随着更改而刷新。处理程序工作正常。虽然我仍然不明白为什么 imageview 拒绝旧 android 版本上的新位图。

我通过保持相同的位图解决了这个问题。

# ruby-on-rails - Coffeescript 显示 HTML 表单 - 出现错误“Shell for 未验证

> ID：13804280
> 
> 赞同：1
> 
> 时间：2012-12-10T15:47:32.637
> 
> 标签：ruby-on-rails, coffeescript

JSFiddle = [http://jsfiddle.net/burtondav/Vke9u/](http://jsfiddle.net/burtondav/Vke9u/)

咖啡脚本：

```
$('#calModal').modal('show')
$("savebtn").bind 'click', (event)  =>
  $("calModal").modal('hide')
  title = $(".modal-body #title").val()
  hours = $(".modal-body #hours").val()
  console.log title
  console.log hours
  return​ 
```

得到：

```
{"error": "Shell form does not validate{'html_initial_name': u'initial-js_lib', 'form':
    <mooshell.forms.ShellForm object at 0x9703acc>, 'html_name': 'js_lib', 'label': u'Js 
    lib', 'field': <django.forms.models.ModelChoiceField object at 0x959a8ec>, 
    'help_text': '', 'name': 'js_lib'}"
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:53:34.667

您不能在 JSFiddle 上提交 html 表单，因为没有服务器可以接收它们。

# arrays - 在数组上聚合函数

> ID：13804281
> 
> 赞同：14
> 
> 时间：2012-12-10T15:47:44.260
> 
> 标签：arrays, postgresql, aggregate-functions

我有一张这样的桌子：

```
+-----+----------------+
| 身份证 | 数组300 |
+-----+----------------+
| 100 | {110,25,53,..} |
| 101 | {56,75,59,...} |
| 102 | {65,93,82,...} |
| 103 | {75,70,80,...} |
+-----+----------------+

```

*array300*列是一个包含 300 个元素的数组。我需要有 100 个元素的数组，每个元素代表*array300*的 3 个元素的平均值。对于此示例，答案将类似于：
array100
{62.66,...}
{63.33,...}
{80,...}
{78.33,...}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T16:05:46.487

尝试这样的事情：

```
SELECT id, unnest(array300) as val, ntile(100) OVER (PARTITION BY id) as bucket_num
FROM your_table 
```

这将为您提供每条相同的`SELECT`300 条记录，并为它们分配（1 代表第 3 个元素，2 代表接下来的 3 个元素，依此类推）。`array300``id``bucket_num`

然后使用这个选择来获取`avg`桶中的元素：

```
SELECT id, avg(val) as avg_val
FROM (...previous select here...)
GROUP BY id, bucket_num 
```

接下来 - 只需聚合`avg_val`into 数组：

```
SELECT id, array_agg(avg_val) as array100
FROM (...previous select here...)
GROUP BY id 
```

详细信息：[unnest](http://www.postgresql.org/docs/current/static/functions-array.html)，[ntile](http://www.postgresql.org/docs/current/static/functions-window.html)，[array_agg](http://www.postgresql.org/docs/current/static/functions-aggregate.html)，[OVER (PARTITION BY )](http://www.postgresql.org/docs/9.2/static/tutorial-window.html)

UPD：试试这个功能：

```
CREATE OR REPLACE FUNCTION public.array300_to_100 (
  p_array300 numeric []
)
RETURNS numeric [] AS
$body$
DECLARE
  dim_start int = array_length(p_array300, 1); --size of input array
  dim_end int = 100; -- size of output array
  dim_step int = dim_start / dim_end; --avg batch size
  tmp_sum NUMERIC; --sum of the batch
  result_array NUMERIC[100]; -- resulting array
BEGIN

  FOR i IN 1..dim_end LOOP --from 1 to 100.
    tmp_sum = 0;

    FOR j IN (1+(i-1)*dim_step)..i*dim_step LOOP --from 1 to 3, 4 to 6, ...
      tmp_sum = tmp_sum + p_array300[j];  
    END LOOP; 

    result_array[i] = tmp_sum / dim_step;
  END LOOP; 

  RETURN result_array;
END;
$body$
LANGUAGE 'plpgsql'
IMMUTABLE
RETURNS NULL ON NULL INPUT; 
```

它需要一个`array300`并输出一个`array100`。要使用它：

```
SELECT id, array300_to_100(array300)
FROM table1; 
```

如果您在理解它时有任何问题 - 只要问我。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T19:01:38.123

将 Igor 的碎片换成另一种形式：

```
 select id, array300, (
    select array_agg(z) from
    (
        select avg(x) from 
        (
            select x, ntile(array_length(array300,1)/3) over() from unnest(array300) x
        ) y 
        group by ntile
    ) z
) array100
from your_table 
```

对于这样的小示例表

```
 id |       array300        
----+-----------------------
  1 | {110,25,53,110,25,53}
  2 | {56,75,59,110,25,53}
  3 | {65,93,82,110,25,53}
  4 | {75,70,80,110,25,53} 
```

结果是：

```
 id |       array300        |                   array100                    
----+-----------------------+-----------------------------------------------
  1 | {110,25,53,110,25,53} | {(62.6666666666666667),(62.6666666666666667)}
  2 | {56,75,59,110,25,53}  | {(63.3333333333333333),(62.6666666666666667)}
  3 | {65,93,82,110,25,53}  | {(80.0000000000000000),(62.6666666666666667)}
  4 | {75,70,80,110,25,53}  | {(75.0000000000000000),(62.6666666666666667)}
(4 rows) 
```

**编辑**我的第一个版本使用了修复`ntile(2)`。这仅适用于大小为 6 的源数组。我已通过改用来解决此问题`array_length(array300,1)/3`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:00:02.253

Is this any faster?

Edit: This is more elegant:

```
with  t as (select generate_series(1, 100,1) a , generate_series(101,200,1) b , generate_series(201,300,1) c)

    select 
        id,
        array_agg((array300[a] + array300[b] + array300[c]) / 3::numeric order by a)  as avg
    from 
        t,
        tmp.test2
    group by 
        id 
```

End of edit

Edit2 This is the shortest select I can think of:

```
select 
    id,
    array_agg((array300[a] + array300[a+100] + array300[a+200]) / 3::numeric order by a)  as avg
from 
    (select generate_series(1, 100,1) a) t,
    tmp.test2
group by 
    id 
```

End of edit2

```
with 

t as (select generate_series(1, 100,1) a , generate_series(101,200,1) b , generate_series(201,300,1) c)

,u as (
    select 
        id,
        a,
        (array300[a] + array300[b] + array300[c]) / 3::numeric as avg
    from 
        t,
        tmp.test2 /* table with arrays - id, array300 */
    order by 
        id,
        a
 )

select 
    id, 
    array_agg(avg)
from 
    u 
group by 
    id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T13:47:38.463

我无法完全回答您的问题，但是我找到了用于对整数数组求和的聚合函数。也许有人（或您）可以将其修改为 avg。

来源： http: [//archives.postgresql.org/pgsql-sql/2005-04/msg00402.php](http://archives.postgresql.org/pgsql-sql/2005-04/msg00402.php)

```
CREATE OR REPLACE FUNCTION array_add(int[],int[]) RETURNS int[] AS '
  DECLARE
    x ALIAS FOR $1;
    y ALIAS FOR $2;
    a int;
    b int;
    i int;
    res int[];
  BEGIN
    res = x;

    a := array_lower (y, 1);
    b := array_upper (y, 1);

    IF a IS NOT NULL THEN
      FOR i IN a .. b LOOP
        res[i] := coalesce(res[i],0) + y[i];
      END LOOP;
    END IF;

    RETURN res;
  END;
'
LANGUAGE plpgsql STRICT IMMUTABLE;

--- then this aggregate lets me sum integer arrays...

CREATE AGGREGATE sum_integer_array (
    sfunc = array_add,
    basetype = INTEGER[],
    stype = INTEGER[],
    initcond = '{}'
);

Here's how my sample table looked  and my new array summing aggregate
and function:

#SELECT * FROM arraytest ;
 id | somearr
----+---------
 a  | {1,2,3}
 b  | {0,1,2}
(2 rows)

#SELECT sum_integer_array(somearr) FROM arraytest ;
 sum_integer_array
-------------------
 {1,3,5}
(1 row) 
```

# android - FragmentTabHost 底部 TabWidget

> ID：13804287
> 
> 赞同：2
> 
> 时间：2012-12-10T15:48:00.153
> 
> 标签：android, android-layout, android-fragments, android-tabhost, android-tabs

您好如何在 FragmentTabHost 中创建底部 TabWidget ？我的 xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="fill_parent" />
    </FrameLayout>

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:orientation="horizontal"
        android:tabStripEnabled="false" />
</LinearLayout> 
```

但我的 TabWidget 仍然在顶部。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T12:00:59.337

经过六小时的努力，我想出了这个解决方案..

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />

    <android.support.v4.app.FragmentTabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />
    </android.support.v4.app.FragmentTabHost>

</LinearLayout> 
```

**更新：**

对于实现自定义选项卡：

```
mTabHost.addTab(setIndicator(mTabHost.newTabSpec("Tab1"),
                        R.drawable.image1),

    public TabSpec setIndicator(Context ctx,TabSpec spec, int resid) {
        // TODO Auto-generated method stub
        View v = LayoutInflater.from(ctx).inflate(R.layout.tabs_text, null);
        v.setBackgroundResource(resid);
        TextView text = (TextView) v.findViewById(R.id.tab_title);
        text.setText(spec.getTag());
        return spec.setIndicator(v);
    } 
```

参数resid为Drawable，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/tab_compose_h" android:state_selected="true"/>
    <item android:drawable="@drawable/tab_compose_h" android:state_pressed="true"/>
    <item android:drawable="@drawable/tab_compose"/>

</selector> 
```

[https://github.com/rameshkec85/BottomTabsFragmentTabHost](https://github.com/rameshkec85/BottomTabsFragmentTabHost)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T12:04:12.847

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />

    <android.support.v4.app.FragmentTabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />
    </android.support.v4.app.FragmentTabHost>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:51:25.853

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:background="@drawable/tabbar_bg"
        android:tabStripEnabled="false" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0" />
</LinearLayout> 
```

# ruby-on-rails - HttpRequest.setRequestHeader 在 Dart 上生成 DOM 异常 11

> ID：13804294
> 
> 赞同：1
> 
> 时间：2012-12-10T15:48:27.593
> 
> 标签：ruby-on-rails, post, httprequest, dart

我正在关注[本教程](http://www.dartlang.org/articles/json-web-service/)，以便运行从 dart 到我的 ruby​​ on rails 后端应用程序的 POST 方法。所以，我第一次尝试教程显示的代码，只是更改了我的 URL 和 JSON 数据。

```
void main() {   
  String jsonData = '{"color":"blue","x":"100","y":"100"}'; 
  saveData(jsonData, onSuccess); // send the data to  // the server
}

void onSuccess(HttpRequest req) {
    print(req.responseText); // print the received raw JSON text
}

void saveData(String data, onSuccess(HttpRequest req)) {
  HttpRequest req = new HttpRequest(); // create a new XHR

  // add an event handler that is called when the request finishes
  req.on.readyStateChange.add((Event e) {
    if (req.readyState == HttpRequest.DONE &&
        (req.status == 200 || req.status == 0)) {
      onSuccess(req); // called when the POST successfully completes
    }
  });

  var url = "http://localhost:3030/colored_rectangles.json";
  req.open("POST", url); // Use POST http method to send data in the next call
  req.send(data); // kick off the request to the server

} 
```

这是我的控制器中的方法和我在 ruby​​ 中的模型（非常简单，使用脚手架生成）：

```
 # POST /colored_rectangles
  # POST /colored_rectangles.json
  def create
    @colored_rectangle = ColoredRectangle.new(params[:colored_rectangle])

    respond_to do |format|
      if @colored_rectangle.save
        format.html { redirect_to @colored_rectangle, notice: 'Colored rectangle was successfully created.' }
        format.json { render json: @colored_rectangle, status: :created, location: @colored_rectangle }
      else
        format.html { render action: "new" }
        format.json { render json: @colored_rectangle.errors, status: :unprocessable_entity }
      end
    end
  end 
```

```
class ColoredRectangle < ActiveRecord::Base
  attr_accessible :color, :x, :y
end 
```

当我运行代码时，我在 Dart 中收到以下错误：

```
 Failed to load resource: the server responded with a status of 500 (Internal Server Error)
  http://localhost:3030/colored_rectangles.json 
```

并在 Rails 中登录：

```
REXML::ParseException (The document "{\"color\":\"blue\",\"x\":\"100\",\"y\":\"100\"}" does not have a valid root):
 activesupport (3.2.9) lib/active_support/xml_mini/rexml.rb:35:in `parse'
 C:in `parse'
  etc.... 
```

阅读[此问题](https://stackoverflow.com/questions/6106556/rails-throws-rexmlparseexception-does-not-have-a-valid-root-exception)后，我尝试将标题更改为“Content-Type：application/json”，然后尝试调用[overriedMimeType 方法](http://api.dartlang.org/docs/bleeding_edge/dart_html/HttpRequest.html#overrideMimeType)，但它给了我同样的错误。

```
req.overrideMimeType("application/json"); 
```

我还调用了[setRequestHeader 方法](http://api.dartlang.org/docs/bleeding_edge/dart_html/HttpRequest.html#setRequestHeader)，代码如下：

```
void saveLanguageData(String data, onSuccess(HttpRequest req)) {
  HttpRequest req = new HttpRequest(); // create a new XHR

  // add an event handler that is called when the request finishes
  req.on.readyStateChange.add((Event e) {
    if (req.readyState == HttpRequest.DONE &&
        (req.status == 200 || req.status == 0)) {
      onSuccess(req); // called when the POST successfully completes
    }
  });

  var url = "http://localhost:3030/colored_rectangles.json";
  req.setRequestHeader("Content-type", "application/json"); //This was added
  req.open("POST", url); // Use POST http method to send data in the next call
  req.send(data); // kick off the request to the server

} 
```

但我从 Dart 收到以下错误：

```
Exception: Error: INVALID_STATE_ERR: DOM Exception 11
Stack Trace: #0      HttpRequest.setRequestHeader (E:\b\build\slave\dartium-win-full-trunk\build\src\build\Release\obj\global_intermediate\webkit\bindings\dart\dart\html\HttpRequest.dart:34:1)
#1      saveLanguageData (http://localhost:3030/rademo_dart/web/rademo.dart:45:23)
#2      main (http://localhost:3030/rademo_dart/web/rademo.dart:10:19) 
```

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:28:15.633

哦，好吧，我找到了我的问题的答案...实际上setRequestHeader需要在req.open之后调用，所以saveData方法代码如下：

```
void saveData(String data, onSuccess(HttpRequest req)) {
  HttpRequest req = new HttpRequest(); // create a new XHR

  // add an event handler that is called when the request finishes
  req.on.readyStateChange.add((Event e) {
    if (req.readyState == HttpRequest.DONE &&
        (req.status == 200 || req.status == 0)) {
      onSuccess(req); // called when the POST successfully completes
    }
  });

  var url = "http://localhost:3030/colored_rectangles.json";
  req.open("POST", url); // Use POST http method to send data in the next call
  req.setRequestHeader("Content-type", "application/json");
  req.send(data); // kick off the request to the server

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:30:24.137

在`@colored_rectangle = ColoredRectangle.new(params[:colored_rectangle])`您的`create`方法中，您将数据发送到 ColoredRectangle 的构造函数，但您是通过使用 root 来完成的`:colored_rectangle`。您发送的 json 中不存在此根。要修复它，只需将根添加到 json 中，如下所示：`String jsonData = '{"colored_rectangle": {"color":"blue","x":"100","y":"100"}}';`

# java - 使用 Spring IoC 在 Guava EventBus 中自动注册 bean

> ID：13804295
> 
> 赞同：5
> 
> 时间：2012-12-10T15:48:28.327
> 
> 标签：java, spring, guava, vaadin, event-bus

假设我的应用程序中有一个语言更改事件接口（它基于 Vaadin）：

```
public interface ILanguageChangeListener{
    @Subscribe onLanguageChange(LanguageChangeEvent event);
} 
```

而且我有许多 bean 实现了这个用 @Component 注释的接口，因此它们在 Spring IoC 中可用。我还有一个 EventBus bean：

```
<bean id="languageSwitcher" class="com.google.common.eventbus" scope="session" /> 
```

现在，在从 IoC 获取任何 bean 的实例后，我还必须获取 languageSwitcher 的实例并在其中注册新创建的 bean：

```
languageSwitcher.register(myNewBean); 
```

为了接收这个事件。是否有可能以某种方式告诉 IoC 我想在每个实现 ILanguageChangeListener 的新 bean 上调用 languageSwitcher bean 的 register 方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T19:51:23.150

好的，使用 BeanPostProcessor，注册接口的每个 bean：

```
public class EventBusRegisterBeanPostProcessor implements BeanPostProcessor,
        ApplicationContextAware {

    private ApplicationContext context;

    @Autowired
    private EventBus eventBus; // The only event bus i assume...

    public Object postProcessBeforeInitialization(Object bean, String beanName)
            throws BeansException {

        return bean;
    }

    public Object postProcessAfterInitialization(Object bean, String beanName)
            throws BeansException {

        if (bean instanceof ILanguageChangeListener) {
            registerToEventBus(bean);
        }

        return bean;
    }

    private void registerToEventBus(Object bean) {
        this.eventBus.register(bean);
    }

    public void setApplicationContext(ApplicationContext applicationContext)
            throws BeansException {
        this.context = applicationContext;
    }

} 
```

请注意，如果您有许多 EventBus bean，则应使用`ApplicationContext.getBean(String)`来获取所需的 EventBus。

我引用[javadoc](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html#postProcessAfterInitialization%28java.lang.Object,%20java.lang.String%29)：

> 在使用 FactoryBean 的情况下，将为 FactoryBean 实例和由 FactoryBean 创建的对象（从 Spring 2.0 开始）调用此回调。后处理器可以通过相应的 bean instanceof FactoryBean 检查来决定是否应用到 FactoryBean 或创建的对象或两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-20T19:27:49.853

IMO，使用类级别注释来标记应该注册的bean，而不是实现标记接口，它甚至更好（耦合更少）。这是修改后的 bean 后处理器代码：

```
public class EventBusListenersRegistererBeanPostProcessor implements BeanPostProcessor{

    Logger log = LoggerFactory.getLogger(this.getClass());

    @Inject
    private EventBus bus;

    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        if(bean.getClass().isAnnotationPresent(RegisterWithEventBus.class)){
            log.info("Event Bus is registering bean named \"{}\" of class {}.", beanName, bean.getClass().getCanonicalName());
            bus.register(bean);
        }

        return bean;
    }
} 
```

和注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@Inherited // important when working with dynamically generated proxies i.e. CGLib
public @interface RegisterWithEventBus {} 
```

请注意，注释接口具有 @Inherited 元注释。这在使用 CGLIB 代理的 Spring 应用程序中是必需的，因为注释不会在对象的实际（动态）类上，而是在父类上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:25:47.487

为您的事件总线使用工厂 bean，并在您的上下文中注入所有 ILanguageChangeListener bean 的列表。

```
public class EventBusFactoryBean implements FactoryBean<EventBus> {

    @Autowired
    private List<ILanguageChangeListener> languageChangeListeners;

    private EventBus instance;

    @PostConstruct
    public void init() {

        this.instance = new EventBus();

        for (ILanguageChangeListener listener : this.languageChangeListeners) {
            this.instance.register(listener);
        }
    }

    public EventBusFactoryBean() {

    }

    public EventBus getObject() throws Exception {
        return this.instance;
    }

    public Class<?> getObjectType() {
        return EventBus.class;
    }

    public boolean isSingleton() {
        return true;
    }

    public List<ILanguageChangeListener> getLanguageChangeListeners() {
        return languageChangeListeners;
    }

    public void setLanguageChangeListeners(
            List<ILanguageChangeListener> languageChangeListeners) {
        this.languageChangeListeners = languageChangeListeners;
    }

} 
```

然后在 Spring Bean 定义文件中定义你的 bean 或者用`@Component`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:44:35.187

一种方法是使用接口[InitializingBean](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/beans/factory/InitializingBean.html)并在您的 bean 中注入语言切换器。像这样的东西：

```
public class NotVeryUsefulLanguageListener implements ILanguageChangeListener,
        InitializingBean {

    @Autowired
    private EventBus languageSwitcher;

    public void afterPropertiesSet() throws Exception {

        this.languageSwitcher.register(this);
    }

    //... getters, setters, etc

} 
```

如果`NotVeryUsefulLanguageLisetener`是单例，它只会发生一次……如果是原型，那么每次你从 Spring 获得一个实例

如果您使用的是 XML，那么您可以使用如下内容：

```
<bean id="languageListenerA" init-method="afterPropertiesSet" class="org.company.whatever.NotVeryUsefulLanguageListener">
        <!-- stuff -->
    </bean> 
```

# c# - 在运行时在 app.config 中设置 defaultProxy

> ID：13804301
> 
> 赞同：1
> 
> 时间：2012-12-10T15:48:44.523
> 
> 标签：c#, soap, app-config

我正在研究封装在 COM-dll 中的 SOAP 客户端。不幸的是，我无法提供 app.config，因此我必须在运行时插入我的值：

```
 try
        {
            var dataSet = ConfigurationManager.GetSection("system.data") as System.Data.DataSet;
            dataSet.Tables[0].Rows.Add("FirebirdClient Data Provider"
            , ".Net Framework Data Provider for Firebird"
            , "FirebirdSql.Data.FirebirdClient"
            , "FirebirdSql.Data.FirebirdClient.FirebirdClientFactory, FirebirdSql.Data.FirebirdClient, Version=2.6.0.0, Culture=neutral, PublicKeyToken=3750abcc3150b00c");              
        }
        catch
        { } 
```

但我不知道如何在运行时设置默认代理：

```
<system.net>
  <defaultProxy useDefaultCredentials="true"/>
</system.net> 
```

如果没有此选项，我将无法通过代理进行通信...

```
BasicHttpBinding basicHttpBinding = new BasicHttpBinding();
EndpointAddress endpointAddress = new EndpointAddress(Adress);

ServiceReference.DataTransferationServiceSoap serviceClient = new ServiceReference.DataTransferationServiceSoapClient(basicHttpBinding, endpointAddress);

serviceClient.doSomething(); 
```

如何在运行时设置 useDefaultCredentials？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:53:35.110

您应该能够执行以下操作：

```
WebRequest.DefaultWebProxy.Credentials = CredentialCache.DefaultCredentials; 
```

这会将默认 Web 代理使用的凭据设置为默认凭据，其效果应与`useDefaultCredentials="true"`.

# python - 如何生成 YearMonthDay 格式的特定日期范围？

> ID：13804307
> 
> 赞同：0
> 
> 时间：2012-12-10T15:49:12.790
> 
> 标签：python, date

`YearMonthDay`有没有办法以Python的形式生成日期列表？我需要为 2010 年 6 月 12 日至 2012 年 12 月 8 日之间的每个星期六制作一个包含该格式日期的列表。

我尝试过`pandas.date_range('6/12/2010','12/8/2012', freq='W-SAT')`，但无法将生成的时间戳对象转换为上述格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:06:47.610

从[pandas 0.8](http://pandas.pydata.org/pandas-docs/dev/whatsnew.html#v0-8-0-june-29-2012)开始，该`Timestamp`类型继承了`datetime`标准库中的标准类。因此，您可以使用`datetime.strftime`,

```
>>> [ d.strftime('%Y%m%d') for d in pandas.date_range('6/12/2010','12/8/2012', freq='W-SAT') ]
['20100612',
 '20100619',
 '20100626',
 '20100703',
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:00:17.740

是的，您使用[日期时间库](http://docs.python.org/2/library/datetime.html)并创建星期六的第一个作为`date`对象。然后创建一个`timedelta`7 天的对象，并将其添加到第一个`date`对象。继续添加，直到到达最后一个星期六。

要从这些对象创建 'yearmonthday' 格式的字符串，最简单的`.strftime()`方法是使用对象的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:03:06.950

像这样的东西应该可以获取日期（仅`datetime`在标准库中使用）。

```
from datetime import date,timedelta

def first_sat_after(d):
    for i in range(7):
        new_day = d.replace(day = d.day + i)
        if new_day.weekday() == 6:
            return new_day

def weekday_range(d1,dend):
    week = timedelta(days = 7)
    yield d1
    d2 = d1 + week
    while d2 <= dend:
        yield d2
        d2 = d2 + week 
```

所以你的程序看起来像：

```
d1 = date(2010,6,12)
dend = date(2012,8,12)

date_strings = [ x.strftime('%Y%m%d') for x in weekday_range(first_sat_after(d1),dend) ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:07:32.263

我认为您只想使用格式化（尽管不相信这需要熊猫！-查看 dateutil 或仅使用内置的 datetime 模块）：

```
>>> dr = pandas.date_range('6/12/2010','12/8/2012', freq='W-SAT')
>>> ['{:%B %d %Y}'.format(d) for d in dr[:5]]
['June 12 2010', 'June 19 2010', 'June 26 2010', 'July 03 2010', 'July 10 2010']
>>> ['{:%Y%m%d}'.format(d) for d in dr[:5]]
['20100612', '20100619', '20100626', '20100703', '20100710'] 
```

# iphone - 如何创建动态表格视图我想知道

> ID：13804313
> 
> 赞同：0
> 
> 时间：2012-12-10T15:49:36.863
> 
> 标签：iphone, ios, xcode, uitableview

![在此处输入图像描述][1]我想显示按下按钮的部分。而且，我想在部分标题上显示当前时间。并且，显示一个单元格部分。日期按钮被同时按下，部分标题是我不要两个。我先做了一个静态的TableView。我试图以此为目的，然后在阅读各个站点时使用动态 TableView。代码被注释掉了。请告诉我代码示例。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
    //return [array count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *title = @"section";
    return title;

    //return [array objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%@ %i", @"row", indexPath.row];
    return cell;
}

-(void)addButton
{
    NSDate *date = [NSDate date];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterMediumStyle];

    NSString *strTime = [[NSString alloc] initWithFormat:@"%@",[formatter stringFromDate:date]];

    array = [[NSMutableArray alloc] initWithCapacity:0];
     [array addObject:strTime];
    [array count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:45:17.173

不确定您打算在这里实现什么。假设您要显示按下添加按钮的时间并在表格视图的部分标题中显示。代码将如下所示，

声明一个 @property 来保存当前类 .h 文件中的日期，

```
@property (nonatomic, retain) NSString *dateString; 
```

在添加按钮操作中，

```
-(void)addButton
{
    NSDate *date = [NSDate date];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterMediumStyle]; //set the date format appropriately, Check SO for sample date formats.

    self.dateString = [formatter stringFromDate:date];
    [self.tableView reloadData];//reload your table view to show this date in title
} 
```

您的部分标题委托方法将如下所示，

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if (section == 0)
        return self.dateString;//modify this as per your requirement
    else 
        return @"title";
} 
```

调整上面的代码以满足您的要求。

# bitnami - 远程访问时出现严重的致命错误

> ID：13804319
> 
> 赞同：1
> 
> 时间：2012-12-10T15:49:59.627
> 
> 标签：bitnami, gitorious

我刚刚安装了一个新的gitorious服务器。从局域网内部，我可以毫无问题地拉\推。但是从局域网外部我得到：

```
== Gitorious: ==========================================================
fatal error
========================================================================

fatal: The remote end hung up unexpectedly 
```

我发现以下错误`gitorious_auth.log`：

```
FATAL -- : NoMethodError private method `gsub!' called for nil:NilClass: /opt/bitnami/apps/gitorious/htdocs/script/../lib/gitorious/ssh/client.rb:34:in `initialize' 
```

这是什么意思，我该如何解决？为什么它只发生在远程访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:34:51.190

我现在相信问题的根本原因是我使用`:`而不是`/`在 url 中。例如我用过：

```
git@[domain]:[proj]/[repo.git] 
```

代替：

```
git@[domain]/[proj]/[repo.git] 
```

我不确定为什么在远程访问时这很重要，而当我在局域网内时却没有...

# http - SoundCloud API：GET 成功，HEAD 失败

> ID：13804320
> 
> 赞同：2
> 
> 时间：2012-12-10T15:49:59.830
> 
> 标签：http, soundcloud

我使用 SoundCloud API 来检索可流式轨道的流 URL。我遵循重定向，最终得到一个如下所示的 URL：

```
http://ec-media.soundcloud.com/eodihgiuh.128.mp3?<a string>
    AWSAccessKeyId=<access key>
    &Expires=<timestamp>
    &Signature=<signature> 
```

或者

```
http://ak-media.soundcloud.com/euieuieie.128.mp3?
    AWSAccessKeyId=<access key>
    &Expires=<timestamp>
    &Signature=<signature>
    &__gda__=<a string> 
```

然后我开始在这个 URL 上流式传输 MP3 数据。

首先，我发送一个`HEAD`读取`Content-Length`标题的请求，这样我就知道需要发送多少个`GET`请求才能播放整首歌曲。

然后我发送几个部分`GET`请求，每个请求都有不同的`Range`标头。

问题是有时`HEAD`请求会返回`403`状态码，即使`GET`对完全相同的 URL 的请求会返回`200`状态码。似乎当且仅当主机是 时才会发生这种情况`ak-media.soundcloud.com`。

这应该发生吗？我希望`HEAD`请求返回与请求完全相同的标头`GET`，只是没有正文响应。

干杯，

铅

PS：我可能应该提一下，我的代码*不是*在计算机上运行，​​而是在具有*非常*有限资源的微型 8 位处理器的音频设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:37:25.460

不幸的是，目前我们只为 GET 请求提供有保证的正确响应。

作为一个黑客，你可以尝试用非常短的 s 来做请求`range`。

# jquery - 在文档单击时取消固定 div

> ID：13804321
> 
> 赞同：0
> 
> 时间：2012-12-10T15:50:05.830
> 
> 标签：jquery, css, html

我有一个 div 可以在悬停时切换并在点击时固定。我正在尝试添加一个在用户单击页面其余部分时取消固定 div 的功能。

我尝试使用这个：

```
$( document ).on('click', function( e ) {
   if( e.target.id != 'dialog-box' ){
      $( ".dialog-box" ).hide();
   }   
}); 
```

但是，即使单击激活 div，它也会隐藏 div。

这是我用于 pin 的 jQuery：

```
$(document).ready(function(){
    $(".two").hover(function() {
        if (!$(this).data('pinned')) $(".dialog-box").toggle("slow");
    });
$(".two").click(function() {
    $(this).data('pinned', !$(this).data('pinned'));
    });
}); 
```

这是我所做的工作，不包括上面的第一个脚本：

[http://jsfiddle.net/XXd5t/1/](http://jsfiddle.net/XXd5t/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:56:44.340

只需在单击 div 时停止事件冒泡，这样您就知道单击事件是否到达文档，而不是单击 div。

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

```
$( document ).on('click', function( e ) {
    $( ".dialog-box" ).hide();
});

$(".two").click(function(e) {
    e.stopPropagation();
    $(this).data('pinned', !$(this).data('pinned'));
}); 
```

# javascript - 使用 JQuery 将网站切换到移动 css 客户端

> ID：13804322
> 
> 赞同：0
> 
> 时间：2012-12-10T15:50:06.023
> 
> 标签：javascript, jquery, css, mobile-website

我正在尝试根据浏览器的版本和屏幕上的空间来更改网页的显示。我需要完全改变页面的外观，如下所示：

*   如果网站显示在手机上，我想要迷你版。
*   如果网站显示在桌面浏览器上，但窗口太小，我想要迷你版。
*   如果站点显示在桌面浏览器上并且窗口可以容纳完整版本，我希望显示完整版本。
*   如果没有可用的 javascript，则应显示完整版本。

我刚开始使用一些非常基本的代码，它依赖于 userAgent：

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) 
```

例如，有没有一种干净的方法来实现我想要用 JQuery 做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:52:12.783

使用[CSS 媒体查询](http://css-tricks.com/css-media-queries/)。嗅探用户代理是不可靠的，并且会导致未来的维护问题。此外，使用媒体查询意味着不需要 javascript，这从关注点分离的角度来看是好的。

# plsql - 启动工作流的 Oracle 触发器调用过程

> ID：13804324
> 
> 赞同：1
> 
> 时间：2012-12-10T15:50:16.787
> 
> 标签：plsql, triggers, oracle11g, workflow, procedure

我有以下问题：我创建了一个触发器，该触发器在将一行插入表中时被激活。然后触发器启动一个过程。然后该过程开始工作流程。

当我开始程序时，它工作正常。但是当我通过输入新行启动触发器时，出现以下错误：

```
Zeile 12: ORA-20001: Task not found - Please check the Task Type, Name and Location are correct.
ORA-06512: in "OWBSYS.WB_RT_API_EXEC", Zeile 759
ORA-06512: in "OWB***.EXECUTE_WF_ABC", Zeile 10
ORA-06512: in "OWB***.START_EXECUTE_WF_ABC", Zeile 7
ORA-06512: in "OWB***.ABC_WORKFLOW", Zeile 2 
```

这是我的触发器：

```
create or replace
TRIGGER  ABC_WORKFLOW
BEFORE INSERT  
ON OWB***.STG_ABC  
FOR EACH ROW

BEGIN  
OWB***.EXECUTE_WF_ABC;   
END ; 
```

这是我的程序：

```
create or replace
PROCEDURE        EXECUTE_WF_ABC

AS
  status   NUMBER;
  -- paramlist VARCHAR2(30000 CHAR);
BEGIN

   owbsys.wb_rt_script_util.set_workspace ('OWBREPOWN.OWB***');
   status :=
      owbsys.wb_rt_api_exec.run_task (
       p_location_name => 'OWF_LOCATION',
       p_task_type => 'PROCESS',
       p_task_name => 'WF_ABC',
  --     p_custom_params => paramlist ,
       p_system_params => '', 
       p_oem_friendly => 0 ,
       p_background => 1); -- execute in background

   DBMS_OUTPUT.put_line (status);
   COMMIT;
---   EXCEPTION
---   when others then
---   message;
---      null;

END; 
```

我在这里错过了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:18:38.823

如果您的表是 TASK 表，那么您的触发器在该行存在之前触发，因此如果该工作流正在检查您正在插入的行中的数据，那么难怪它会失败。

在触发器中也`COMMIT;`非常糟糕（如果您插入超过 1 行，则会失败）。

# css - 三列的宽度

> ID：13804327
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:50:32.357
> 
> 标签：css, width, z-index

我已经坐了一段时间来想出解决问题的办法。我想制作一个由三列（左、中、右）组成的网站。这三个将一起覆盖整个屏幕宽度。一列将由一个固定的像素值组成，另外两列的宽度应与中间列在屏幕中央的宽度相同。

我需要左右两列的原因是因为我想在它们后面隐藏东西，然后将这些东西动画化到中心列中。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:06:26.527

我对宽度不满意：对此有 10000% 位，也许有人可以想出一个更清洁的解决方案，但我认为这可以满足您的描述。当您正在寻找纯 CSS 解决方案时，这些类型的布局有点棘手。

HTML：

```
<div id="content">
<p>Content goes in here</p>
<ul>
    <li>Whatever</li>
    <li>Kind</li>
    <li>Of</li>
    <li>Content</li>
</ul>        
<div class="sideCol" id="left"></div>
<div class="sideCol" id="right"></div> 
```

​</p>

CSS：

```
#content
{
    width: 200px;
    margin: 0 auto;
    position: relative;
}

.sideCol
{
    width: 10000%;
    height: 100%;
    position: absolute;
}

#left
{
    background-color: red;
    right: 200px;
    top: 0;
}

#right
{
    background-color: blue;
    top: 0;
    left: 200px;
}​ 
```

[http://jsfiddle.net/fLH9T/](http://jsfiddle.net/fLH9T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:55:26.977

**HTML**

```
<div class="left"></div>
<div class="center"></div>
<div class="right"></div> 
```

**CSS**

```
.left { float:left; width:33%; height:200px; z-index:100; diplay:block; }
.center { float:left; width:33%; height:200px; z-index:1; diplay:block; }
.right { float:right; width:33%; height:200px; z-index:100; diplay:block; } 
```

我想这就是你想要的。

# javascript - 上传文件 - 自定义 Html

> ID：13804328
> 
> 赞同：-2
> 
> 时间：2012-12-10T15:50:39.610
> 
> 标签：javascript, html, css, file, upload

当我单击“上传”按钮时，如何浏览我的文件？

我需要创建一个隐藏文件输入吗？

更多解释：

我无法编辑我的 html 表单的输入类型文件的 css。所以在每个浏览器中我都有不同的布局。我不想要它。我想自定义我的表单。

我创建了一个按钮。当我点击按钮时，我想出现文件选择屏幕。当我选择文件并按 ok 时，我想将文件的路径字符串放入我创建的输入中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:53:54.547

你能提供更多信息吗？您需要使用`file`html 表单元素。

该`file`元素可让您自然地浏览本地文档。

要处理文件附件，您需要了解一种编程语言，例如`php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:44:53.483

我用这段代码解决了我的问题：

```
<div class="input-append">
    <label for="showpath">File Upload:</label>
    <input id="showpath" type="text" onclick ="javascript:document.getElementById('CommentFile').click();"/>
    <button type="button" onclick ="javascript:document.getElementById('CommentFile').click();"></button>
    <input type="file" name="data[Comment][file]" id="CommentFile" style='visibility: hidden;' onchange="updateInput(this.value,'showpath')"/>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T16:13:24.363

`<input type='file' />`

更多信息在[w3schools](http://www.w3schools.com/tags/att_input_type.asp)。

# android - 带有 Box2D 扩展的 AndEngine

> ID：13804329
> 
> 赞同：0
> 
> 时间：2012-12-10T15:50:42.863
> 
> 标签：android, box2d, andengine, game-physics, physics-engine

我是 AndEngine 的新手。我做了一些研究，发现了 Box2D 的两个扩展。一种由 Nicholas Gramlich 自己开发：[https](https://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension) ://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension ，另一种由 Real Mayo 开发：[https ://github.com/RealMayo/AndEnginePhysicsBox2DExtension](https://github.com/RealMayo/AndEnginePhysicsBox2DExtension)

现在，我很困惑我应该使用哪一个？谁能解释一下这两者有什么区别以及我应该使用哪个扩展？

问候，Syed Umair。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:42:30.783

使用 Nicholas Gramlich 开发的那个。

我浏览了 RealMayo 扩展，它只有 1 个提交。它一定是由 RealMayo 上传过一次的，从那以后他就没有在那儿做任何更改。

# c++ - C++ 等于运算符

> ID：13804332
> 
> 赞同：0
> 
> 时间：2012-12-10T15:50:44.850
> 
> 标签：c++, equals-operator

我有以下等于运算符：

```
 bool operator==(const Duration& x, const Duration& y){
        return ( x.hrs == y.hrs, x.mins == y.mins, x.secs == y.secs );
    } 
```

我也试过：

```
 bool operator==(const Duration& x, const Duration& y){
        return ( (x.hrs == y.hrs) && (x.mins == y.mins) && (x.secs == y.secs) );
    } 
```

在我的主要方法中，我有：

```
 //Arbitrary Durations - Testing
    Duration dTest0 (01,45,12);
    Duration dTest1 (01,35,45);
    Duration dTest2 (01,35,45);
    Duration dTest3 (01,25,05);

    if ( dTest0 == dTest1 ){
        cout<< "broken" << endl;
    }
    else{
        cout<< "working" << endl;
        } 
```

我的程序不断输出“损坏”，这表明 dTest0 和 dTest1 实际上是相等的......我哪里出错了？

附加：如果我使用`x.getHours == y.getHours...`它在下面放一条红线`"."`并说：“错误：指向绑定函数的指针只能用于调用函数”。

任何意见，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T15:57:25.103

第一个实现仅在`x.secs == y.secs`. 前两次比较的结果将被丢弃。运算符计算其`,`第二个操作数的值，在这种情况下归结为 just `x.secs == y.secs`。

然而，第二个是正确的。如果它不起作用，那么您必须在 的构造函数中错误地设置`hrs`、`mins`和的值。`secs``Duration`

您遇到的问题`getHours`是您需要调用它。毕竟是成员函数。所以`x.getHours()`代替`x.getHours`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T15:53:10.953

第一个是错误的。 `,`不能那样工作。

第二个是正确的，假设`Duration`是合理的。

您的`Duration`构造函数中可能存在错误。我什至认为很有可能。

# python - 有没有休息作家？

> ID：13804333
> 
> 赞同：5
> 
> 时间：2012-12-10T15:50:46.647
> 
> 标签：python, restructuredtext, docutils

是否有用于[docutil.nodes树的](http://docutils.sourceforge.net/docutils/nodes.py)**reST Writer**？我找不到一个，但也许我错过了一些明显的东西。还是自己写一个微不足道？我想实现从 reST 到 reST 的转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:38:11.557

没有，而且很难，如果不是不可能实现一个超越微不足道的 ReST 标记。

ReST 角色和指令可以*在解析时执行任意代码*。特别是角色或指令可以创建具有任意内容的任意类型的节点并将其插入到文档树中。因此，文档树和 ReST 源代码之间没有直接映射，因此不可能获得任意文档树的原始 ReST 源代码——或者至少是接近的东西。

一个真实的例子是来自[Sphinx](http://sphinx.pocoo.org)的各种指令，例如`py:class`. 这些指令将`pending_xref`节点插入到文档树中，这些节点在稍后的时间点被解析为真正的交叉引用。但是，没有对应于`pending_xref`节点的单个指令，因此没有直接对应于包含此类节点的文档树的 ReST 源。

可以为简单的标准 ReST 标记（即标题、段落、强调等）实现编写器。我不知道任何实现，但这对你自己来说是微不足道的。对于您的目的，这可能或可能不够。

如果您的文档包含角色、指令或替换，则不可能完成 ReST 到 ReST 的转换。但是，您可以通过首先取消注册所有角色和指令，然后注册一个函数来捕获所有角色和指令并将它们按字面意思保存在文档树中来进行某种欺骗。基于这样的树，您可以恢复源（或至少接近此）。然而，替换会丢失，因为这些替换是在解析的早期阶段应用的，并且不会出现在生成的树中。

# drupal - 试图限制对特定节点的访问

> ID：13804334
> 
> 赞同：-1
> 
> 时间：2012-12-10T15:50:48.580
> 
> 标签：drupal, drupal-6

我正在尝试限制对 Drupal 中特定节点（非节点类型）的访问。

我没有找到一个能够做到这一点的好模块（或者我不明白如何去做）。

似乎内容访问可能是一个不错的选择 - 但我认为没有办法不授予对特定节点的访问权限。

在 Drupal 6 中限制对特定节点的访问的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:43:54.880

[节点访问](http://drupal.org/project/node_access)应该可以解决问题

> 按角色和用户帐户提供全局和**节点特定的安全权限。**
> 
> *   所有内容类型和节点的全局安全性（默认）。
> *   每个内容类型和该内容类型的所有节点。
> *   **每节点安全方案**

强调我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:46:52.210

[内容访问](http://drupal.org/project/content_access)模块确实是一个不错的模块。

安装并启用后，转到`Home › Administer › Content management`并选择您感兴趣的内容类型。单击`Edit`，然后单击`Access control`选项卡。看看页面底部的面板`Per content node access control settings`。

当您启用此选项时，会在查看内容时显示内容访问设置的新选项卡，从而允许控制每个单独节点的访问。

如果您正在寻找更细粒度的每个节点访问控制，请查看[Flexi Access](http://drupal.org/project/flexiaccess)（但它目前仅适用于 Drupal 7）。默认情况下，它设置为控制每个节点的访问，还允许您创建和维护访问控制列表，将访问控制分解为每个用户和每个节点。

我自己正在使用这两种方法，它们都有效。

有关更多选项，请参阅页面：[节点访问模块概述](http://drupal.org/node/270000)@ Drupal.org。

# asp.net - 使用 Code First 重新创建数据库时登录失败

> ID：13804335
> 
> 赞同：2
> 
> 时间：2012-12-10T15:50:40.487
> 
> 标签：asp.net, entity-framework, ef-code-first

我使用 ASP.NET Entity Framework 的 Code First 从模型创建数据库，当模型更改后需要重新创建数据库时，登录似乎失败。

在 Global.asax 中，我有以下内容：

```
protected void Application_Start()
{
    Database.SetInitializer(new DropCreateDatabaseIfModelChanges<EntriesContext>());

    // ...
} 
```

在我的控制器中，我有以下内容：

```
public ActionResult Index()
{
    // This is just to force the database to be created
    var context = new EntriesContext();
    var all = (from e in context.Entries select e).ToList();
} 
```

当数据库不存在时，它的创建没有问题。但是，当我对模型进行更改、重建和刷新时，我收到以下错误：

```
Login failed for user 'sa'. 
```

我的连接字符串如下所示：

```
<add name="EntriesContext"
     connectionString="Server=(LOCAL);Database=MyDB;User Id=sa;Password=password"
     providerName="System.Data.SqlClient" /> 
```

登录确实有效，因为我可以使用这些凭据从 Management Studio 连接到服务器和数据库。

如果我手动删除数据库，一切正常，并且数据库按预期重新创建，架构反映了对模型所做的更改。

似乎密码或对数据库的访问权限正在丢失。

我还需要做些什么来使它正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:28:20.087

在连接到已重新创建的数据库时，Code First 使用连接字符串中指定的密码似乎有问题。将其更改为使用受信任的连接可以解决问题，因为不再需要存储密码。

所以，而不是这个：

```
Server=(LOCAL);Database=MyDB;User Id=sa;Password=password 
```

改用以下内容

```
Server=(LOCAL);Database=MyDB;Trusted_Connection=true 
```

您可能需要将您的帐户或 ASP.NET 使用的帐户添加到 SQL Server 并授予它“dbcreator”权限，以便它可以删除和重新创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:02:33.213

我相信使用 sa 可能是一个问题。无论哪种方式，我认为创建一个单独的用户配置文件以在您的连接字符串中使用是一种很好的做法。

# .htaccess - 使用可选参数重写 Htaccess

> ID：13804336
> 
> 赞同：0
> 
> 时间：2012-12-10T15:50:53.337
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

尽管我花了很长时间研究它，但我对 HTACCESS 了解甚少。我认为真正的原因是因为正则表达式超出了我的能力范围。

目前，在 HTACCESS 中，我使用了这一行：

```
RewriteRule ^website/([^/]+)(/([^/]+))?$ controller/url.php?method=$1&param=$3 
```

这将允许用户拥有一个看起来像 www.website.com/website/method/optional_parameter 的漂亮 url

如何向 HTACCESS 重写行添加第二个和第三个可选参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:04:03.960

最简单的方法是允许第二组在“方法”组之后包含 URL 的其余部分。

```
RewriteRule ^website\/([^/]+)\/(.*)$ controller/url.php?method=$1&params=$2 
```

然后使用 PHP 在每个处拆分参数`/`

希望有帮助。

# iphone - 图片放入数组 Ios 开发中

> ID：13804337
> 
> 赞同：2
> 
> 时间：2012-12-10T15:50:55.040
> 
> 标签：iphone, objective-c, ios, arrays, image

我的项目中有一个包含图片的文件夹，我想知道如何将这些图片从文件夹中放入数组中

我该怎么做？

我试过这个把图像放在数组中

```
 UIImage*image = [[NSBundle mainBundle]pathsForResourcesOfType:@"jpg" @"jpeg" @"gif" inDirectory:@"Images"];
    NSArray*images = [[NSMutableArray alloc]initWithContentsOfFile:image]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:08:14.240

您可以执行以下操作，获取文件名数组，然后用图像本身填充另一个数组（假设这是您想要做的）。

```
NSMutableArray *imagePaths = [[NSMutableArray alloc] init];
NSMutableArray *images = [[NSMutableArray alloc] init];

NSArray *imageTypes = [NSArray arrayWithObjects:@"jpg", @"jpeg", @"gif", nil];

// load the imagePaths array

for (NSString *imageType in imageTypes)
{
    NSArray *imagesOfParticularType = [[NSBundle mainBundle]pathsForResourcesOfType:imageType 
                                                                        inDirectory:@"Images"];
    if (imagesOfParticularType)
        [imagePaths addObjectsFromArray:imagesOfParticularType];
}

// load the images array

for (NSString *imagePath in imagePaths)
    [images addObject:[UIImage imageWithContentsOfFile:imagePath]]; 
```

顺便说一句，除非这些是很小的缩略图图像并且您只有很少的图像，否则通常不建议像这样一次加载所有图像。通常，由于图像会占用大量 RAM，因此您会保留文件名数组，但将图像的加载推迟到您真正需要它们时。

* * *

如果您没有成功检索图像，则有两个问题：

1.  **这些文件包含在我的捆绑包中吗？**当您为 Target 的设置选择“Build Phases”并展开“Copy Bundle Resources”（见下图）时，您看到包含的图像了吗？如果您没有在此列表中看到您的图像，则在您构建应用程序时它们不会包含在应用程序中。要添加您的图像，请单击“+”并将它们添加到此列表中。

    ![在此处输入图像描述](../Images/b64ec646901dc88d0418534685111252.png)

2.  **这些文件是在“组”中还是在实际子目录中？**将文件添加到项目时，您将看到以下对话框：

    ![在此处输入图像描述](../Images/a337415a1514f9e616ce3e27d4fdbe6c.png)

    如果您选择“为添加的文件夹创建文件夹引用”，那么该文件夹将在您的项目中显示为蓝色（请参阅`db_images`前面屏幕快照中我的“”文件夹旁边的蓝色图标）。但是，如果您选择“为添加的文件夹创建组”，则“ `Images`”组旁边会出现典型的黄色图标。最重要的是，在这种情况下，您要在子目录“ `Images`”中查找图像，您希望使用“为添加的文件夹创建文件夹引用”选项，并在图像旁边显示蓝色图标。

最重要的是，您需要确保图像在您的应用程序包中，并且它们在您认为的位置。另请注意，iOS 区分大小写（尽管模拟器不区分大小写），因此请确保“ `Images`”的大小写正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:05:46.167

如果我正确理解了您的问题 initWithContentsOfFile 不符合您的预期，根据文档：

“使用给定路径指定的文件内容初始化新分配的数组。”

此外，pathsForResourceOfType 已经在创建一个数组，而不是 UIImage，您可以简单地执行以下操作：

```
NSArray* images = [[NSBundle mainBundle]pathsForResourcesOfType:@"jpg" @"jpeg" @"gif" inDirectory:@"Images"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:08:05.163

```
[[NSBundle mainBundle]pathsForResourcesOfType:@"jpg" @"jpeg" @"gif" inDirectory:@"Images"]; 
```

已经返回了这些对象的数组。将您的行更改为：

```
 NSArray *images = [[NSBundle mainBundle]pathsForResourcesOfType:@"jpg" @"jpeg" @"gif" inDirectory:@"Images"]; 
```

请注意，此数组将仅保存所有图像的路径。为了制作它们的图像，您需要调用

```
for(NSString* imagePath in images) {

    UIImage* anImage = [[UIImage alloc] initWithContentsOfFile:imagePath];
    //do something with your image here.
} 
```

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:09:07.723

阅读`initWithContentsOfFile`方法的文档`NSArray`：

> 由 aPath 标识的文件中的数组表示必须仅包含属性列表对象（NSString、NSData、NSArray 或 NSDictionary 对象）。该数组包含的对象是不可变的，即使该数组是可变的。

在您的情况下，您需要使用`NSFileManager`枚举目录中的文件。以下是文档中目录枚举的示例：

```
NSFileManager *localFileManager=[[NSFileManager alloc] init];
NSDirectoryEnumerator *dirEnum =
    [localFileManager enumeratorAtPath:docsDir];

NSString *file;
while (file = [dirEnum nextObject]) {
    if ([[file pathExtension] isEqualToString: @"doc"]) {
        // Create an image object here and add it to 
        // mutable array
    }
}
[localFileManager release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:14:46.613

尝试这个：

```
 NSMutableArray* paths=[NSMutableArray new];
    NSFileManager* manager=[NSFileManager new];
    NSBundle* bundle= [NSBundle mainBundle];
    NSDirectoryEnumerator* enumerator= [manager enumeratorAtPath: [bundle bundlePath] ];
    for(NSString* path in enumerator)
    {
        if([path hasSuffix: @".jpg"] || [path hasSuffix: @".jpeg"] || [path hasSuffix: @".gif"])
        {
            [paths addObject: path];
        }
    } 
```

对于解释，我建议您查看[NSDirectoryEnumerator 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDirectoryEnumerator_Class/Reference/Reference.html)。

# jboss5.x - 与 CMT 的 xa 交易

> ID：13804338
> 
> 赞同：2
> 
> 时间：2012-12-10T15:50:57.230
> 
> 标签：jboss5.x, distributed-transactions

最近我参与了使用 JBoss 5.1 处理分布式事务，其中使用了容器管理事务。但我担心的是我不了解不同的 xa 资源如何参与由 JBossTS 事务管理器管理的分布式事务。基本上我正在寻找什么是交易边界。我应该把我想要作为交易的一部分执行的代码放在哪里？以及容器如何理解哪个 bean 属于哪个 xa-datasource。

我已经用谷歌搜索并试图从 JBoss 文档中获取一些东西，但找不到任何有用的东西。

我已经知道如何配置数据源和事务管理器。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:52:02.173

我得到了答案。Wolf-Dieter Fink 回答了这个问题。它在[这里](http://community.jboss.org/message/782594#)

# caching - Symfony 内置缓存与 APC

> ID：13804339
> 
> 赞同：1
> 
> 时间：2012-12-10T15:51:05.163
> 
> 标签：caching, symfony1, symfony-1.4, apc

我将通过缓存来优化一个 symfony (1.4) 项目。我不知道我应该用什么？是使用 symfony 内置缓存缓存整个页面、组件、部分还是通过 APC 缓存 sql 结果更好？各有什么优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:08:46.293

我会说：两者都用。

您可以`Doctrine_Cache_Apc`用于所有 Doctrine 查询，并在复杂的操作/组件上使用 Symfony 缓存。

如果您有 CMS，请记住使缓存无效，以便用户可以“实时”看到他的编辑。例如，在 CMS 中的保存操作中，您可以使用`sfFileCache::removePattern`删除缓存文件，然后使用 .on-the-fly 重新创建缓存文件`sfWebBrowser::get`。

# php - 在查询中定义一个变量然后在同一个查询中使用它？

> ID：13804342
> 
> 赞同：1
> 
> 时间：2012-12-10T15:51:14.903
> 
> 标签：php, mysql

我建立了一个类连接来处理查询，然后从数据库返回所有需要的数据：

问题是如何在查询中定义一个变量来处理我想在同一个查询中插入它的一个值！

```
$invoice_connection_add = new connection("
SET @myvar := select `brand_name` from `brands` where `brand_code` = $_POST[brand_code]
insert into `invoices` (`brand_code`, `brand_name`, `quantity`, `price`,`date`, `salesman`) values ('$_POST[brand_code]',@myvar, '$_POST[quantity]', '$_POST[price]', '$_POST[date]', '$_SESSION[username]');","insert_update"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:03:53.393

似乎没有其他人在回答，所以我试一试——你可以做这样的事情。您可能需要稍微尝试一下引用和内容，但它会让您了解您想要做什么。

```
INSERT INTO invoices (all your columns) 
  SELECT '$_POST[brand_code]', brand_name, '$_POST[quantity]', 
  '$_POST[price]', '$_POST[date]', '$_SESSION[username]' 
  FROM `brands` 
  WHERE `brand_code` = $_POST[brand_code] 
```

# xml - 使用 VBA 从 XML 中提取数据

> ID：13804343
> 
> 赞同：1
> 
> 时间：2012-12-10T15:51:17.520
> 
> 标签：xml, vba

作为一个背景，我对编码来说是一个相当新的人。自从我上次“编码”以来已经快 10 年了，所以请放轻松；）。

我目前正在尝试从下面的 XML 文件中提取数据：

```
- <IPNumber IPNumber="5">
- <Band Band="1">
- <Channel Channel="1">
  <CMPWRE>0.123456</CMPWRE> 
  <CMPWIM>0.234567</CMPWIM> 
  </Channel>
- <Channel Channel="2">
  <CMPWRE>-0.123456</CMPWRE> 
  <CMPWIM>0.234567</CMPWIM> 
  </Channel>
  </Band>
- <Band Band="2">
- <Channel Channel="1">
  <CMPWRE>0.123456</CMPWRE> 
  <CMPWIM>0.234567</CMPWIM> 
  </Channel>
  </Band>
</IPNumber5>
- <IPNumber IPNumber="6">
- <Band Band="1">
- <Channel Channel="1">
  <CMPWRE>0.123456</CMPWRE> 
  <CMPWIM>0.234567</CMPWIM> 
  </Channel>
- <Channel Channel="2">
  <CMPWRE>-0.123456</CMPWRE> 
  <CMPWIM>0.234567</CMPWIM> 
  </Channel>
  </Band>
- <Band Band="2">
- <Channel Channel="1">
  <CMPWRE>0.123456</CMPWRE> 
  <CMPWIM>0.234567</CMPWIM> 
  </Channel>
  </Band>
</IPNumber6> 
```

目前我希望用户选择他们想要的 IP 号码、频道和频段。然后我想在如下列表中为每个提取 CMPWRE 和 CMPWIM 数据：

```
IPNumber 'X'
Band     'X'
Channel  'X'
CMPWRE   'XXX'
CMPWIM   'XXX' 
```

这是我试图用来提取数据的一小段代码，但我只是没有运气让它工作。

代码：

```
Set oXML = CreateObject("MSXML.DOMDocument")
oXML.async = False
oXML.Load ("H:\14-13-21.xml")

Dim LgChan As String
Dim LgChan1 As String
Dim LgChan2 As String
**Dim LgChan3 As String
Dim LgChan4 As String**

Dim Test As Integer 
Dim Test2 As Integer
Dim Test3 As Integer

Test = mobelenum0.Value ' User Box on GUI where a value is inputted E.G. the number 5
Test2 = FeedSubBand.Value ' User Box on GUI where a value is inputted E.G. the number 1 
Test3 = LogicChannel.Value ' User Box on GUI where a value is inputted E.G. the number 1

LgChan = "TableContents/IPModuleNumber[@IPModuleNumber='1']"
LgChan1 = "//TableContents/IPModuleNumber/FeederSubBand[@FeederSubBand=" & Test2 & "]"
LgChan2 = "//TableContents/IPModuleNumber/FeederSubBand/LogicalChannel[@LogicalChannel=" & Test3 & "]" 
**LgChan3 = "//TableContents/IPModuleNumber/FeederSubBand/LogicalChannel[@LogicalChannel=" & Test3 & "]/CMPWRE"
LgChan4 = "//TableContents/IPModuleNumber/FeederSubBand/LogicalChannel[@LogicalChannel=" & Test3 & "]/CMPWIM"**

 Worksheets("sheet1").Range("B101").Value = oXML.DocumentElement.SelectSingleNode(LgChan).NodeTypedValue
 Worksheets("sheet1").Range("B102").Value = oXML.DocumentElement.SelectSingleNode(LgChan1).nodeTypedValue
 Worksheets("sheet1").Range("B103").Value = oXML.DocumentElement.SelectSingleNode(LgChan2).nodeTypedValue
**Worksheets("sheet1").Range("B104").Value = oXML.DocumentElement.SelectSingleNode(LgChan3).nodeTypedValue
Worksheets("sheet1").Range("B105").Value = oXML.DocumentElement.SelectSingleNode(LgChan4).nodeTypedValue** 
```

我正在努力获取代码，以便如果选择了不同的频段，那么显然通道值将会改变......再次过滤IPNumber更改。

任何帮助都会很棒！

小精灵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:21:58.147

您将需要添加代码来捕获“选择不同波段时”的事件。该代码取决于用户如何选择波段，但如果波段是从用户窗体中的 Combobox 中选择的，您将捕获 Combobox_Change 事件，如下所示：

```
Private Sub FeedSubBand_Change()
    DisplayBands
End Sub 
```

**编辑：如果用户按下***执行*按钮 选择了乐队，您应该使用按钮的 Click 事件，如下所示：

```
Private Sub ExecuteButton_Click()
        DisplayBands
End Sub 
```

正如您所建议的，重要的是要注意这里的性能问题。如果 XML 文件很大，读取它会花费很长时间。这样做是一个好主意，只在用户通过按下按钮明确要求时才读取文档。另一种选择是在每次其中一个文本框更改时自动读取，但如果 XML 文档很大，那就不好了。

# linux - 如何在没有酒的情况下在linux中更改windows exe文件的图标？

> ID：13804344
> 
> 赞同：3
> 
> 时间：2012-12-10T15:51:18.630
> 
> 标签：linux, windows, exe, embedded-resource

我知道我可以使用[ResHacker](http://www.angusj.com/resourcehacker/)从 Windows 更改资源，并且我知道我可以使用[ResourceUpdate](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648049%28v=vs.85%29.aspx)函数来做同样的问题（再次在 Windows 中）。我的问题是我必须在不使用 wine 的情况下更新 linux 中的 windows exe 文件的图标。

（不使用 wine 的原因是该过程应该在更改文件并对其签名的自动化服务器上​​运行）。

我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T16:51:54.030

有一个名为[windres](http://sourceware.org/binutils/docs/binutils/windres.html)的程序可以满足您的需求

哎呀，这只是一个资源编译器，对不起。

但是有[pefile](http://code.google.com/p/pefile/)一个用于处理 PE 可执行文件的 python 模块，也许您可​​以使用它编写一个脚本来执行您想要的操作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T16:55:52.130

您可以像这样更改文件元数据：

```
gvfs-set-attribute '/path/to/file' -t stringv metadata::custom-icon "/path/to/image.png" 
```

# java - 使用逻辑或条件实现：等于

> ID：13804349
> 
> 赞同：3
> 
> 时间：2012-12-10T15:51:35.947
> 
> 标签：java, struts, equals

我是 struts 的新手，我在想我们是否可以用 struts 实施`OR`和`AND`条件`logic:equal`？如果不是，那么有什么选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-18T04:27:05.333

对于 AND 类似 if(Column1 == "1" && Column2 == "2") { .... }

您可以使用 ：

```
<logic:equal name="urList" property="Column1" value="1">
  <logic:equal name="urList" property="Column2" value="2">
  doSomeThing
  </logic:equal>
</logic:equal> 
```

或“或”：

```
<logic:equal name="urList" property="Column1" value="1">
  doSomeThing
</logic:equal>
<logic:equal name="urList" property="Column2" value="2">
  doSomeThing
</logic:equal> 
```

抱歉英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:19:56.810

您可以将 EL 与 Strut 的 taglib 一起使用。您还可以使用 JSTL（在本例中为 c:if）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T09:09:06.577

使用 JSP scriptlet 而不是逻辑：等于

```
if(string.equals("Rejected") || string.equals("selected")){
do someting
} 
```

在 JSP 中：

```
<%if(string.equals("Rejected") || string.equals("selected")){
do someting
}%> 
```

# perl - 分配一个变量并检查哈希键是否存在

> ID：13804351
> 
> 赞同：0
> 
> 时间：2012-12-10T15:51:45.090
> 
> 标签：perl

由于我对 Perl 知之甚少，我很惊讶这种语法不起作用：

```
if (exists $wid = $dict{$w}) {
 print "$wid:$c\n";
} 
```

似乎我无法进行分配`$wid = $dict{$w}`并检查它是否同时存在：

> 存在参数不是 HASH 或 ARRAY 元素，也不是 createWordIndex.pl 第 31 行的子例程。

有没有办法做这种任务？还是我只需要先检查存在，然后在条件为真时进行分配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:59:56.580

您是否想在打印之前弄清楚那里是否存在价值？然后你必须这样做：

```
if ( exists($dict{$w}) ) {
    my $wid = $dict{$w};
    print "$wid: $c\n";
} 
```

如果您知道存储的值将始终被定义，您可以这样做

```
if ( defined( my $wid = $dict{$w} ) ) {
    print "$wid: $c\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:03:39.390

或者（毕竟是 TIMTOWTDI），您可以使用智能匹配运算符（对于 Perl 版本 >= 5.10）：

```
if($w ~~ (keys %dict))
{
  my $wid = $dict{$w};
  print "$wid: $c\n";
} 
```

或者，或者：

```
if(grep{$w eq $_}(keys %dict))
{
  my $wid = $dict{$w};
  print "$wid: $c\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:03:10.003

你刚刚在你的问题中回答了你的问题。

> “或者我只需要先检查存在，如果条件为真，再分配？”

代码中的**exists**函数采用标量 $wid。并且在您的错误中明确指出存在函数需要哈希或数组元素

> 存在参数不是 HASH 或 ARRAY 元素，也不是 createWordIndex.pl 第 31 行的子例程。

所以是的。您需要先检查它是否存在。

友好的建议：在提问之前尝试所有你能想到的事情/解决方案，因为你可能已经知道问题的答案。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:04:17.800

你可以做到，只需跳过`exists`. 如果进行了分配（因为有 $dict{$w}），则副作用为真。

```
my %dict;

$dict{one} = 1;
$dict{two} = 2;
$dict{three} = 3;

if ($wid = $dict{four}) {
  print "$wid\n";
}
else {
  print "NO!\n";
} 
```

# android - Google Maps Android API v2：我的位置标记总是高于其他标记？

> ID：13804361
> 
> 赞同：4
> 
> 时间：2012-12-10T15:52:11.627
> 
> 标签：android, android-mapview, google-maps-android-api-2, android-maps-v2

目前正在将使用 Google Maps 的 Android 应用程序迁移到 Google Maps Android v2；我希望地图显示内置位置标记以及自定义标记。使用以前的库，我曾经在自定义标记“下方”绘制位置标记，使用

```
mapView.setReticleDrawMode(ReticleDrawMode.DRAW_RETICLE_UNDER); 
```

我在新 API 中找不到类似的选项。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T17:34:51.393

经过一番搜索，我找不到这样的选择。

我终于删除了定位销，并在地图上添加了一个类似的 Marker 和 Circle；由于它是经典标记，因此它出现在其他标记下方。

```
map.setMyLocationEnabled(false);

// ...
// get the current location with Android LocationManager in some way
// ...

// then draw it on the map when it changes:
if (null == getMyLocation())
    return;

if (null != locationMarker) {
    locationMarker.remove();
}
if (null != locationCircle) {
    locationCircle.remove();
}
LatLng loc = getMyLocation();

locationMarker = map.addMarker(new MarkerOptions()
        .icon(BitmapDescriptorFactory
                .fromResource(R.drawable.blue_pin_12))
        .position(getMyLocation()).anchor(0.5f, 0.5f));

float accuracy = getMyLocationAccuracy();

locationCircle = map.addCircle(new CircleOptions().center(loc)
            .radius(accuracy)
            .strokeColor(Color.argb(255, 0, 153, 255))
            .fillColor(Color.argb(30, 0, 153, 255)).strokeWidth(2)); 
```

![定位销](../Images/343b6b1611de163d38e31b52cde43754.png)

# javascript - JQuery 选择器（在 td 中的表中查找单元格）

> ID：13804364
> 
> 赞同：0
> 
> 时间：2012-12-10T15:52:14.233
> 
> 标签：javascript, jquery, css-selectors

我有一个 HTML 表格

```
 <table id="sometable">
 <tr>
   <td>
       <table class="wTable">
            <tr>
                 <td>
                       <input type="radio" name="rdGroup" val="0" /> 
                 </td>
                 <td>
                       <input type="radio" name="rdGroup" val="5" />
                 </td>
                 <td>
                       <input type="radio" name="rdGroup" val="10" />
                 </td>
            </tr>
       </table>
   </td>
 </tr>
 </table> 
```

在 TD 中使用表格的原因是出于蒙皮和定位的目的。当谈到 JQuery 时，我不是很好，我想知道是否有一种选择器技术可以在单击该单元格时访问该单选按钮。

例如，以前我的代码设置为（蒙皮之前）：

```
 <table>
 <tr>header stuff</tr>
 <tr>
     <td>data</td>
     <td>data 2</td>
     <td><input type="radio" name="rdGroup" value="0"> No Warranty </br>
         <input type="radio" name="rdGroup" value="5"> 1 year Warranty </br>
         <input type="radio" name="rdGroup" value="10"> 2 year Warranty </br>
     </td>
     <td>data 3</td>
 </tr>
 <tr>footer stuff</tr>
 </table> 
```

以上是原始的基本表结构。

```
 $("#dnn_ctr391_Account_ctl00_ctl01_grdItems tr:first,#dnn_ctr391_Account_ctl00_ctl01_grdItems tr:last").addClass("info"); 
```

上面添加了一个名为 info 的类到表的页眉和页脚（我不关心其中的任何数据）

从那里我创建了一个 td click 函数来处理数据：

```
 $("#dnn_ctr391_Account_ctl00_ctl01_grdItems tr:not(.info) td:nth-child(7)").click(function() { //DO CODE HERE }); 
```

在该点击功能中，我能够访问我需要的其他单元格的数据：

```
 var warval = 0;

 warval = $(this).closest("tr").find("input[type=radio]:checked").val(); 
```

当单击该单元格以获取单选按钮值时，我有没有办法使用相同样式的编码来获取访问权限，然后离开该表以返回它所在的 TD，然后获取访问权限到另一个 td 使用 $(this).closest("tr").find() 方法？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:00:39.187

我想你正在寻找这样的东西：

```
$('table#sometable table.wTable td').click(function () {
    var isChecked = $(this).children('input[type=radio]').val();
    //To get 'back to the tr'
    var $warval = $(this).closest("tr");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:17:31.050

好的，根据您在评论中所说的，我希望这会有所帮助：

首先，我建议将表格标记更改为 div。这不是强制性的，但它会导致代码更清晰、更易于管理。可能是这样的：

```
<p>data 1</p>
<p>data 2</p>
<div>
    <input type="radio" name="rdGroup" id="rdGroup_0" value="0" />
    <label for="rdGroup_0">No Warranty</label>
</div>
<div>
    <input type="radio" name="rdGroup" id="rdGroup_5" value="5" />
    <label for="rdGroup_5">1 year Warranty</label>
</div>
<div>
    <input type="radio" name="rdGroup" id="rdGroup_10" value="10" />
    <label for="rdGroup_10">2 year Warranty</label>
</div>
<p>data 3</p>
<div class="footer">Footer</div> 
```

你的 jQuery 钩子可以像这样简单：

```
$(function() {
    $('input[type=radio]').change(function() {
        // do whatever needs to be done here when the radio button value changes
        console.log("value '"+this.value+"' was selected for the warranty option");
    });
});​ 
```

如果您需要在使用存储在 DB 中的数据加载表单时设置相应的值，您可以使用此函数来完成（如果您已设置单选框 ID，如上所示）：

```
var setWarrantyOption = function(value) {
    $('#rdGroup_' + value).click();
}; 
```

你可以在这里摆弄代码：http: [//jsfiddle.net/gruese/fsj2v/](http://jsfiddle.net/gruese/fsj2v/)

请告诉我这是否有帮助，或者我是否误解了您的问题。

# facebook - 如何检索带有描述的 Facebook 赞

> ID：13804365
> 
> 赞同：0
> 
> 时间：2012-12-10T15:52:14.747
> 
> 标签：facebook, facebook-graph-api, set, facebook-fql, facebook-opengraph

如何获取带有描述的 facebook 喜欢列表（用户喜欢的页面）

我使用`/me/likes`对象，但它不会给我喜欢的描述。我知道我可以将 FQL 与**“WHERE page_id in (LIST_OF_IDS)”**一起使用- 或单独请求每个类似

有没有办法通过一个请求来获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:57:31.913

或者以这种方式使用**Graph API**：`USER_ID?fields=likes.fields(description)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:16:31.387

如果可以使用 Graph API，请不要使用 FQL。Graph API 通常更快更容易：

```
me/likes?fields=id,name,description 
```

结果（来自我的帐户）：

```
"data": [
{
  "id": "244993732224805",
  "name": "Jón Gnarr",
  "created_time": "2012-12-06T00:35:43+0000"
},
{
  "id": "161086703983",
  "name": "Design Shack",
  "description": "We only offer the cream of great design, filtering through lots of the redesigns that occur every day across the Internet, and cataloguing the greatest projects out there - perfect for getting that spark of creativity going again.\n\t\nRegular articles will teach you new techniques for creating your own designs, and daily community news ensures that you're up to date with the latest developments elsewhere.\n\t\nIf you want to be updated every time a new design or tutorial is added, you can subscribe:\n\t\nDesign Shack RSS Feed\nhttp://feeds.feedburner.com/designshack\n\nTwitter\nhttp://twitter.com/designshack",
  "created_time": "2012-12-04T14:40:08+0000"
},
{
  "id": "274797542535942",
  "name": "Chasing Aurora",
  "description": "Chasing Aurora is an explorative 2D aerial action game about the dream of flight.\n\nDrop from the cliff and ride the wind from peak to peak. Fight for the beacon of light with up to three friends in the hostile environment of the Alps.",
  "created_time": "2012-12-04T12:07:13+0000"
}, 
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:33:07.787

是的，这可以通过 FQL 使用以下查询来完成：

> SELECT name, description FROM page WHERE page_id IN (SELECT page_id FROM page_fan WHERE uid=me())

[https://developers.facebook.com/tools/explorer?fql=SELECT%20name%2C%20description%20FROM%20page%20WHERE%20page_id%20IN%20(SELECT%20page_id%20FROM%20page_fan%20WHERE%20uid%3Dme( ))%0A](https://developers.facebook.com/tools/explorer?fql=SELECT%20name%2C%20description%20FROM%20page%20WHERE%20page_id%20IN%20(SELECT%20page_id%20FROM%20page_fan%20WHERE%20uid%3Dme())%0A)

# php - 使用 PHP 缓存生成的图像

> ID：13804366
> 
> 赞同：0
> 
> 时间：2012-12-10T15:52:20.067
> 
> 标签：php, html, apache, image-caching

我有一个脚本，它在服务器上使用 PHP 生成图像，格式为 image.png。然后我在不同的地方使用这个图像`<img src="http://domain.com/images/image.png" />`。

我遇到的问题是，即使图像每 30 分钟重新生成一次，它似乎已被缓存并且在我转到[http://domain.com/images/image.png](http://domain.com/images/image.png)之前不会显示新值然后`ctrl+shift+refresh`。

有什么办法可以保持图像名称相同，但让它始终显示图像的最新版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:57:00.953

这发生在**浏览器缓存超过 30 分钟时**。由于您的图像每 30 分钟生成一次，因此**您应该相应地设置`Expires`和`Cache-control`标题**。

请参阅这些标题。

```
Expires: Mon, 10 Dec 2012 16:25:18 GMT
Cache-Control: max-age=1800 
```

这里`Expries`设置为从现在起 30 分钟后的时间 ( `Date: Mon, 10 Dec 2012 15:55:18 GMT`)。而且`Cache-Control`还需要设置。单位在这里是第二的。

我将这些标头用于缓存持续时间为 60 分钟的图像生成站点。这些是我缓存它所遵循的规则。

1.  检查图像文件是否存在
    *   如果它比我的缓存持续时间旧，请删除它，然后生成新图像。
2.  如果图像文件不存在
    *   生成图像并保存
3.  现在我们有了一个有效的图像。
4.  计算图像的文件修改日期并添加缓存时长。
5.  使用适当的标题提供它，其中过期日期将是我们在步骤 4 中计算的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T15:57:28.943

有几种选择，具体取决于您的情况。如果“images/image.png”是服务器上的实际文件并且您正在直接访问它，那么您必须更改文件夹上的缓存设置或使用 .htaccess 通知浏览器重新发送它。

```
<FilesMatch "\.(ico¦pdf¦flv¦jpg¦jpeg¦png¦gif¦js¦css¦swf)$">
ExpiresDefault A604800
Header set cache-control: "no-cache, public, must-revalidate"
</FilesMatch> 
```

如果您使用 PHP 查找图像并返回它，您可以使用 PHP 发送标头。

```
header("Expires: ".gmdate("D, d M Y H:i:s", time()+1800)." GMT");
header("Cache-Control: max-age=1800"); 
```

要使用 PHP 完美地做到这一点，您可以检查它是否实际修改

```
$last_modified_time = @filemtime($file);
header("Expires: ".gmdate("D, d M Y H:i:s", $last_modified_time+1800)." GMT"); 
//change with $last_modified_time instead of time().
//Else if you request it 29mins after it was first created, you still have to wait 30mins
//but the image is recreated after 1 min.

header("Cache-Control: max-age=1800");
header("Vary: Accept-Encoding");

// exit if not modified
if (array_key_exists('HTTP_IF_MODIFIED_SINCE', $_SERVER)) {
    if (@strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == $last_modified_time) { 
        header("HTTP/1.1 304 Not Modified"); 
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:55:58.113

您可以尝试使用 PHP 加载图像：

```
<?php
//generateImage.php

$path = "xxxx/xxx.jpg";
$img =imagecreatefromjpeg($path);

header("Content-Type: image/jpeg");
imagejpeg($img);
imagedestroy($img);

?> 
```

然后像这样调用图像：

```
<img src="http://domain.com/generateImage.php" /> 
```

# cluster-computing - pbs作业忙时无输出

> ID：13804373
> 
> 赞同：0
> 
> 时间：2012-12-10T15:52:37.663
> 
> 标签：cluster-computing, pbs, qsub, torque

我在使用 PBS 时遇到了问题，在我提交的所有作业中，往往有一小部分不会产生应有的任何输出。我必须重新提交他们几次，直到他们都产生了输出。我还注意到，当其他用户提交大量作业时，这尤其糟糕。在这种情况下，我的所有作业都无法生成预期的输出文件。

我只是 PBS 的用户，所以不明白发生了什么。如果有人可以提出一些建议，那就太好了。谢谢。

# .net-4.0 - .NET 4.0 支持生命周期父产品是什么？

> ID：13804374
> 
> 赞同：1
> 
> 时间：2012-12-10T15:52:39.553
> 
> 标签：.net-4.0, lifecycle

.NET 支持日期现在链接到父产品的支持生命周期“作为一个组件，.NET 采用与父产品完全相同的支持生命周期。”：http: [//blogs.technet.com/b/lifecycle/archive /2010/04/30/net-framework-3-5-sp1-and-later-now-supported-as-part-of-microsoft-windows.aspx](http://blogs.technet.com/b/lifecycle/archive/2010/04/30/net-framework-3-5-sp1-and-later-now-supported-as-part-of-microsoft-windows.aspx)

根据下页的图表，我可以看到 .NET 3.5 链接到 Windows 7，.NET 4.5 链接到 Windows 8 [http://msdn.microsoft.com/en-us/library/bb822049.aspx](http://msdn.microsoft.com/en-us/library/bb822049.aspx)

但是.NET 4.0（基于该链接上的信息）不包含在任何客户端或服务器操作系统中，所以我对它的支持结束日期感到困惑。

就我而言，我选择将 .NET 4.0 安装到 Windows 2008 服务器上，但它并没有预装在该服务器上，并且可能可以在 Windows 2012 上运行，所以我对官方的内容感到非常迷茫支持日期的结束是为此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-08T09:11:08.437

根据[此页面](http://support.microsoft.com/lifecycle/search/?sort=pn&alpha=.net%20framework)，并非所有版本都有父产品和 .net 4.0 扩展支持将于 2016 年 12 月 1 日结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T12:06:37.107

基于[该](http://support.microsoft.com/lifecycle/search/?sort=pn&alpha=.net%20framework)页面，Framework .Net 4.0 扩展支持将于 2016 年 1 月 12 日结束。

# bash - 如何在 ubuntu 10.04 的 gedit 嵌入式终端中自动运行“/bin/bash --login”？

> ID：13804382
> 
> 赞同：1
> 
> 时间：2012-12-10T15:53:11.503
> 
> 标签：bash, ubuntu, terminal, gedit

背景：我将 RVM 更新到最新版本和 .rvmrc，以便我可以指导 rVM 使用项目特定的 gemset。但它现在要求 bash shell 是登录 shell。所以我通过 ubuntu 终端的 Edit |preference 做到了这一点。这工作得很好。

但是，gedit 的嵌入式终端仍然不是“将命令作为登录 shell 运行”。但是我可以通过在 gedit 启动后在嵌入式终端上输入“/bin/bash --login”来解决这个问题。

这是一个不错的解决方法，但我觉得必须有一种方法可以自动执行此操作。

我尝试将以下变体添加到 ~/.bashrc 文件的末尾，并且它可以正常工作，但是我必须按 ctrl-c 才能返回提示模式。另一个副作用，普通终端现在还需要我按 ctrl-C 才能返回提示模式。

```
/bin/bash -l -i 
```

如何告诉 ~/.bashrc 文件执行该命令并返回提示模式，而无需每次都按 ctrl-C？或任何其他方式来实现这一目标。

提前致谢。

ps 我也在 askubuntu 上发布过

[https://askubuntu.com/questions/226694/how-to-change-gedit-embedded-terminal-to-be-run-command-as-login-shell](https://askubuntu.com/questions/226694/how-to-change-gedit-embedded-terminal-to-be-run-command-as-login-shell)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T16:25:06.717

将此添加到您的 bashrc 脚本中：

`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"`

为我工作。

（您仍然需要：`PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting`

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:16:30.103

终端插件是用 Python 编写的，因此您可以尝试自定义它。请注意，如果您直接编辑已安装的文件，您的更改将在软件包更新时被覆盖。

在“/usr/lib/gedit/plugins/terminal.py”文件的第 90 行附近，您会发现如下所示的一行： `self._vte.fork_command_full(Vte.PtyFlags.DEFAULT, None, [Vte.get_user_shell()], None, GLib.SpawnFlags.SEARCH_PATH, None, None)`

将参数添加到列表中的 shell： `self._vte.fork_command_full(Vte.PtyFlags.DEFAULT, None, [Vte.get_user_shell(), "-l", "-i"], None, GLib.SpawnFlags.SEARCH_PATH, None, None)`

# php - 而数组内的脚本

> ID：13804384
> 
> 赞同：0
> 
> 时间：2012-12-10T15:53:17.587
> 
> 标签：php, arrays, while-loop

非常直接的问题 - 我正在尝试创建一个数组来存储从我的数据库表中获取的模型和成本值。我想我可以开始数组，然后创建一个 while 循环，然后结束数组，然后到处微笑。我可能弄错了，或者我可能盲目地错过了我的代码中的某些内容，但是你能看一下吗？

```
$array = array(
    while ($overall_cost = mysql_fetch_assoc($query_ocost)) {
            $overall_cost["model"] => $overall_cost["cost"],
    }
);

var_dump($array); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:55:47.243

我想这就是你要找的：

```
$array = array();

while ($overall_cost = mysql_fetch_assoc($query_ocost)) {
    $array[$overall_cost["model"]] = $overall_cost["cost"];
}

var_dump($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:56:31.577

你不能这样做。您需要在 while 循环内添加到数组中：

```
$array = array();
while ($overall_cost = mysql_fetch_assoc($query_ocost)) {
        $array[$overall_cost["model"]] = $overall_cost["cost"];
}    

var_dump($array); 
```

将是这样做的一种方式。

编辑以产生简单的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:56:52.653

我认为这行不通。尝试类似：

```
$array = array();
while ($overall_cost = mysql_fetch_assoc($query_ocost)) {
      $array[$overall_cost["model"]] = $overall_cost["cost"];
}

var_dump($array); 
```

# android - 如何制作 GCM servlet？

> ID：13804385
> 
> 赞同：2
> 
> 时间：2012-12-10T15:53:20.487
> 
> 标签：android, eclipse, servlets, google-cloud-messaging

我一直在关注[本指南](http://developer.android.com/google/gcm/gs.html#server-app) ，但仍然不明白（我对整个 android-stuff 很陌生，对不起）。

“1\. 创建一个 servlet（或其他服务器端机制），Android 应用程序可以使用它来发送 GCM 接收到的注册 ID。应用程序可能还需要发送其他信息——例如用户的电子邮件地址或用户名——以便服务器可以将注册 ID 与拥有该设备的用户相关联。
2\. 同样，创建一个用于注销注册 ID 的 servlet。

我认为本指南总体上不是很详尽，但在这里我遇到了一些麻烦。有没有可以帮助我的密码破解者？如何为 GCM 制作“servlet”？
先感谢您！

PS。我使用日食

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:31:30.077

您可能应该查看[GCM 演示应用程序](http://developer.android.com/google/gcm/demo.html)页面，特别是[设置服务器](http://developer.android.com/google/gcm/demo.html#server-setup)部分，其中显示了设置 GCM 服务器的两种方法。我已经看到其他一些 GCM 开发人员将 Google App Engine 用于他们的 GCM 服务器，详见链接的[第二点](http://developer.android.com/google/gcm/demo.html#appengine-setup)。

还有一些商业解决方案，例如[AirBop](http://airbop.com/)（我碰巧帮助创建）、[Urban Airship](http://www.urbanairship.com/)和其他一些解决方案。

# c# - 在 Mono 项目中使用 Microsoft 程序集的问题

> ID：13804386
> 
> 赞同：1
> 
> 时间：2012-12-10T15:53:30.300
> 
> 标签：c#, mono, assemblies

我想构建一个使用 Microsoft.Build 名称的单声道项目。

```
using System;
using System.Diagnostics;
using System.IO;
using Microsoft.Build.Framework;
using Microsoft.Build.Utilities; 
```

整个文件可[在此处](https://github.com/golergka/MonoSublimeLogger/blob/master/LoggerImpl.cs)获得。

但是，我收到这些错误：

```
$ mcs LoggerImpl.cs
LoggerImpl.cs(4,17): error CS0234: The type or namespace name `Build' does not exist in the namespace `Microsoft'. Are you missing an assembly reference?
LoggerImpl.cs(5,17): error CS0234: The type or namespace name `Build' does not exist in the namespace `Microsoft'. Are you missing an assembly reference?
LoggerImpl.cs(15,41): error CS0246: The type or namespace name `IEventSource' could not be found. Are you missing a using directive or an assembly reference?
LoggerImpl.cs(28,44): error CS0246: The type or namespace name `ProjectStartedEventArgs' could not be found. Are you missing a using directive or an assembly reference?
LoggerImpl.cs(36,43): error CS0246: The type or namespace name `BuildFinishedEventArgs' could not be found. Are you missing a using directive or an assembly reference?
LoggerImpl.cs(52,41): error CS0246: The type or namespace name `BuildErrorEventArgs' could not be found. Are you missing a using directive or an assembly reference?
LoggerImpl.cs(62,43): error CS0246: The type or namespace name `BuildWarningEventArgs' could not be found. Are you missing a using directive or an assembly reference?
Compilation failed: 7 error(s), 0 warnings 
```

smcs也一样。这很奇怪，因为 gacutil 将 Microsoft.Build 列为已安装的程序集：

```
$gacutil -l Microsoft.Build
The following assemblies are installed into the GAC:
Microsoft.Build, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
Number of items = 1 
```

甚至安装了 Microsoft.Build.Framework （也被使用）：

```
$ gacutil -l Microsoft.Build.Framework
The following assemblies are installed into the GAC:
Microsoft.Build.Framework, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
Microsoft.Build.Framework, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
Number of items = 3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:59:04.403

Microsoft.Build.dll 在那里，但您需要引用它：

```
mcs LoggerImpl.cs -r:Microsoft.Build.dll 
```

# javascript - 限制fineuploader上传元素的大小

> ID：13804388
> 
> 赞同：1
> 
> 时间：2012-12-10T15:53:39.223
> 
> 标签：javascript, jquery, css

我正在使用[http://fineuploader.com/提供的文件上传插件，可从](http://fineuploader.com/)[https://github.com/valums/file-uploader/wiki/Releases](https://github.com/valums/file-uploader/wiki/Releases)下载。该插件确实具有精美的拖放功能，但我只想要一个非常基本的上传器，并且正在使用 FineUploaderBasic 选项。

我希望在表格的每一行上添加一个上传按钮。我的代码如下，现场演示位于[http://tapmeister.com/test/fineuploader-3.0/test1.html](http://tapmeister.com/test/fineuploader-3.0/test1.html)。上传按钮是每行的第二个图标。

我让它工作了，但是，上传可点击区域比上传图标占用的区域大得多。实际上，如果您点击上传图标的左侧或下方，就会触发上传。查看使用 FireBug 的 DOM，我看到它`<input type="file" multiple="multiple" name="file" style="position: absolute; right: 0px; top: 0px; font-family: Arial; font-size: 118px; margin: 0px; padding: 0px; cursor: pointer; opacity: 0;">`被添加到目标 div 元素内，就在图标之后。

如何将输入的大小限制为原始上传 div 和/或图标的大小和位置？谢谢

代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Fine Uploader - Basic</title>
        <style>
            #myTable td {width:50px;}
            #myTable div {display:inline;}
        </style>
    </head>

    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="fineuploader-3.0.js"></script>
    <script>
        $(document).ready(function() {

            var uploader={
                request: {endpoint: 'server.php'},
                validation: {
                    allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
                    sizeLimit: 204800 // 200 kB = 200 * 1024 bytes
                },
                callbacks: {
                    onSubmit: function(id, fileName) {},
                    onUpload: function(id, fileName) {},
                    onProgress: function(id, fileName, loaded, total) {},
                    onComplete: function(id, fileName, responseJSON) {}
                },
                debug: true
            };

            $('#myTable div.upload').each(function(){
                uploader.button=(this);
                new qq.FineUploaderBasic(uploader);
            })

        });
    </script>

    <body>
        <table id="myTable">
            <tr><td>Col1</td><td><img src="folder.png" alt="folder"><div class="upload" title="upload"><img src="upload.png" alt="upload"></div></td><td>Col3</td></tr>
            <tr><td>Col1</td><td><img src="folder.png" alt="folder"><div class="upload" title="upload"><img src="upload.png" alt="upload"></div></td><td>Col3</td></tr>
            <tr><td>Col1</td><td><img src="folder.png" alt="folder"><div class="upload" title="upload"><img src="upload.png" alt="upload"></div></td><td>Col3</td></tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:55:04.767

上传对象的容器应该具有相对位置（这可能是可选的），但需要隐藏溢出以防止不可见按钮呈现在容器之外。

```
<table id="myTable">
    <tr>
        <td>Col1</td>
        <td class="upload-container"><img src="folder.png" alt="folder"><div class="upload" title="upload"><img src="upload.png" alt="upload"></div></td>
        <td>Col3</td>
    </tr>
</table>

<style>
    .upload-container {
        overflow: hidden;
        position: relative;
    }
</style> 
```

也不是必需的，但您应该将上传元素更改为跨度而不是 div。它仍将正常运行，并避免了表格单元格内的 div 的 W3C 合规性问题。

# c# - 没有目标节点的Treeview拖放

> ID：13804397
> 
> 赞同：1
> 
> 时间：2012-12-10T15:54:36.933
> 
> 标签：c#, winforms, drag-and-drop, treeview

我有两个`TreeView`单独的形式。

*   `treeView1`
*   `treeView2`

我实现了一个`Drag and Drop`功能，以便我可以从一个树拖到另一个，并且它与我在[这里](http://support.microsoft.com/kb/307968)找到的代码一起工作，我必须处理 3 个事件。

事情是我的窗户的设置是这样的：

![在此处输入图像描述](../Images/5dcc4c1355e94863b50fea242a9c2d4f.png)

正如你所看到的，`Window2`隐藏我的`Window1`，**它是故意的，需要保持这样**。问题是我`Drag and Drop`是从`Window2`到`Window1`所以我不能指定一个目标节点。有没有办法简单地放入一个`TreeView`没有任何目标节点的节点并说在其他节点旁边创建一个父节点？

* * *

链接死的例子不：

```
private void Form1_Load(object sender, System.EventArgs e)
{
    this.treeView1.ItemDrag += new System.Windows.Forms.ItemDragEventHandler(this.treeView_ItemDrag);
    this.treeView2.ItemDrag += new System.Windows.Forms.ItemDragEventHandler(this.treeView_ItemDrag);
    this.treeView1.DragEnter += new System.Windows.Forms.DragEventHandler(this.treeView_DragEnter);
    this.treeView2.DragEnter += new System.Windows.Forms.DragEventHandler(this.treeView_DragEnter);
    this.treeView1.DragDrop += new System.Windows.Forms.DragEventHandler(this.treeView_DragDrop);
    this.treeView2.DragDrop += new System.Windows.Forms.DragEventHandler(this.treeView_DragDrop);   
}

private void treeView_ItemDrag(object sender,
        System.Windows.Forms.ItemDragEventArgs e)
{
    DoDragDrop(e.Item, DragDropEffects.Move);
}

private void treeView_DragEnter(object sender,
        System.Windows.Forms.DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

private void treeView_DragDrop(object sender, System.Windows.Forms.DragEventArgs e)
{
    TreeNode NewNode;

    if(e.Data.GetDataPresent("System.Windows.Forms.TreeNode", false))
    {
        Point pt = ((TreeView)sender).PointToClient(new Point(e.X, e.Y));
        TreeNode DestinationNode = ((TreeView)sender).GetNodeAt(pt);
            NewNode = (TreeNode)e.Data.GetData("System.Windows.Forms.TreeNode");
        if(DestinationNode.TreeView != NewNode.TreeView)
        {     
            DestinationNode.Nodes.Add((TreeNode) NewNode.Clone());
            DestinationNode.Expand();
            //Remove Original Node
            NewNode.Remove();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:52:29.290

`treeview_dragdrop`将两者更改为`forms`以下内容：

```
 private void treeView_DragDrop(object sender, System.Windows.Forms.DragEventArgs e)
    {
        TreeNode NewNode;

        if(e.Data.GetDataPresent("System.Windows.Forms.TreeNode", false))
        {
            NewNode = (TreeNode)e.Data.GetData("System.Windows.Forms.TreeNode");
            if (!(sender as TreeView).Nodes.Contains(NewNode))//Edit: add this if you don't want to add the same one again.
            {    
                 (sender as TreeView).Nodes.Add((TreeNode) NewNode.Clone());                 
                 NewNode.Remove(); //Edit: add this if you want to remove original one.
            } 
        }
    } 
```

# c - 指针和数组的区别

> ID：13804398
> 
> 赞同：0
> 
> 时间：2012-12-10T15:54:43.013
> 
> 标签：c

我有一段代码如下，它们有什么区别？第一个，结构的`buf`元素地址比结构的地址大4，而第二个不是。

第一的

```
#include <stdio.h>

typedef struct A
{
    int i;
    char buf[];  //Here
}A;

int main()
{
    A *pa = malloc(sizeof(A));
    char *p = malloc(13);
    memcpy(p, "helloworld", 10);
    memcpy(pa->buf, p, 13);

    printf("%x %x %d %s\n", pa->buf, pa, (char *)pa->buf - (char *)pa, pa->buf);
} 
```

第二

```
typedef struct A
{
    int i;
    char *buf; //Here
}A; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:02:23.880

第一个是 C99 的“灵活数组成员”。第二个是当您没有 C99 或更高版本时的可靠后备。

使用灵活的数组成员，您可以为数组分配所需的空间以及主结构：

```
A *pa = malloc(sizeof(A) + strlen(string) + 1);

pa->i = index;
strcpy(pa->buf, string);

...use pa...

free(pa); 
```

就内存分配而言，`buf`成员没有大小（所以`sizeof(A) == sizeof(int)`除非由于数组对齐而存在填充问题——例如，如果你有一个灵活的数组`double`）。

替代方案需要两个分配（和两个版本），或者在设置中需要注意：

```
typedef struct A2
{
    int   i;
    char *buf;
} A2;

A2 *pa2 = malloc(sizeof(A2));
pa2->buff = strdup(string);

...use pa2...

free(pa2->buff);
free(pa2); 
```

或者：

```
A2 *pa2 = malloc(sizeof(A2) + strlen(string) + 1);
pa2->buff = (char *)pa2 + sizeof(A2);

...use pa2...

free(pa2); 
```

请注意，使用 A2 需要更多内存，无论是指针大小（单次分配），还是指针大小和第二次内存分配的开销（双重分配）。

你有时会看到一些被称为“struct hack”的东西正在使用中；这早于 C99 标准，并且已被灵活的数组成员淘汰。代码如下：

```
typedef struct A3
{
    int  i;
    char buf[1];
} A3;

A3 *pa3 = malloc(sizeof(A3) + strlen(string) + 1);
strcpy(pa3->buf, string); 
```

这和灵活的数组成员差不多，但结构更大。在示例中，在大多数机器上，该结构的`A3`长度为 8 个字节（而不是 4 个字节`A`）。

GCC 对零长度数组有一些支持；您可能会看到数组维度为 0 的 struct hack。这对于任何不模仿 GCC 的编译器都是不可移植的。

它被称为“struct hack”，因为语言标准不能保证它是可移植的（因为您访问的是声明数组的边界之外）。然而，从经验上看，它“一直有效”并且可能会继续这样做。尽管如此，您应该优先使用灵活的数组成员而不是 struct hack。

* * *

### ISO/IEC 9899:2011 §6.7.2.1 结构和联合说明符

> ¶3结构或联合不应包含不完整或函数类型的成员（因此，结构不应包含自身的实例，但可能包含指向自身实例的指针），除了结构的最后一个成员具有多个命名成员可能具有不完整的数组类型；这样的结构（以及任何可能递归地包含此类结构的成员的联合）不应是结构的成员或数组的元素。
> 
> ¶18 作为一种特殊情况，具有多个命名成员的结构的最后一个元素可能具有不完整的数组类型；这称为*灵活数组成员*。在大多数情况下，灵活数组成员被忽略。特别是，结构的大小就像省略了柔性数组成员一样，只是它可能具有比省略所暗示的更多的尾随填充。然而，当一个`.`（或`->`) 运算符的左操作数是（指向）具有灵活数组成员的结构，右操作数命名该成员，它的行为就好像该成员被替换为最长的数组（具有相同的元素类型），不会使结构大于被访问的对象；数组的偏移量应保持灵活数组成员的偏移量，即使这与替换数组的偏移量不同。如果这个数组没有元素，它的行为就好像它有一个元素，但如果尝试访问该元素或生成一个越过它的指针，则行为是不确定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:09:10.473

```
struct A {
    int i;
    char buf[];
}; 
```

不为数组*或*指向数组的指针保留任何空间。这说明了一个数组可以直接跟随 的主体`A`并通过 来访问`buf`，如下所示：

```
struct A *a = malloc(sizeof(*a) + 6);
strcpy(a->buf, "hello");
assert(a->buf[0] == 'h');
assert(a->buf[5] == '\0'; 
```

`a`注意我为“hello”和 nul 终止符保留了 6 个字节。

指针形式使用间接（内存可以是连续的，但这既不依赖也不需要）

```
struct B {
    int i;
    char *buf;
};

/* requiring two allocations: */
struct B *b1 = malloc(sizeof(*b1));
b1->buf = strdup("hello");

/* or some pointer arithmetic */
struct B *b2 = malloc(sizeof(*b2) + 6);
b2->buf = (char *)((&b2->buf)+1); 
```

第二个现在的布局与`a`上面相同，除了在整数和 char 数组之间有一个指针。

# php - 使用 Ajax 加载的内容会丢失样式

> ID：13804400
> 
> 赞同：1
> 
> 时间：2012-12-10T15:54:45.060
> 
> 标签：php, sql, ajax, jquery

我创建了一个加载 10 个元素的页面，并在页面底部放置了经典按钮“加载更多”以加载 10 个更多元素。

问题在于 jQuery， :nth-child() 属性给出的样式不适用于接下来的 10 个元素，依此类推。

有没有办法解决这个问题？

例如：

文件 main.js

```
$("#main_content > p:nth-child(3n+2)").addClass("small-product-wrapper");
$("#main_content > p:nth-child(3n+3)").addClass("small-product-wrapper"); 
```

文件 example.php

```
<script type="text/javascript">
  $('#more_button').click(function(){

    loaded_messages += 10;

    $('#loading').ajaxSend(function() {
      $("#loading").stop(true,true).fadeIn().delay(200).fadeOut();
    });

    var dati = "twitterpagination/get_messages/" + loaded_messages;
    $.ajax({
      url:'twitterpagination/get_messages/' + loaded_messages,
      type: 'get',
      data: dati,
      cache: false,
      success: function() {
    $.get(dati, function(data){
      $("#main_content").append(data);
    });

    if(loaded_messages >= num_messages - 10) {
      $("#more_button").hide();
    }
      },
      error: function() {
    // do nothing 
      }
    });
    return false;
  });
</script>

<div id="main">
  <?php
  foreach($latest_messages as $message) {
    echo '<p>'.$message->message .'</p>';
  }
  ?>
  <div id="more_button">more</div>
</div> 
```

Ajax url 加载的文件：

```
<?php
  foreach($latest_messages as $message) {
    echo '<p>'.$message->message .'</p>';
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:00:03.980

在ajax加载的文件中：

```
<?php
  foreach($latest_messages as $message) {
    echo '<p class="small-product-wrapper">'.$message->message .'</p>';
  }
?> 
```

将样式添加到返回的 P 标签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:58:57.610

从 AJAX 添加新的 html 后，您需要立即重新运行这 2 行 jQuery。

```
success: function() {
    $.get(dati, function(data){

        $("#main_content").append(data);
        // here
        $("#main_content > p:nth-child(3n+2)").addClass("small-product-wrapper");
        $("#main_content > p:nth-child(3n+3)").addClass("small-product-wrapper");
    });
} 
```

这是因为这些原始行仅在页面加载时运行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:59:44.323

当您使用 Ajax 加载新内容时，自动为其分配样式的唯一方法是为其提供一个类并在 css 中定义该类样式。

如果不这样做，则必须在 ajax 调用的回调函数中再次分配样式。

# php - 在数组 php 中使用 file_exist 时出错？

> ID：13804401
> 
> 赞同：0
> 
> 时间：2012-12-10T15:54:50.877
> 
> 标签：php

我有一个样品

```
$image_src = array(
'image1.jpg',  //Yes
'image2.jpg',  //This image is 404
'image3.jpg'   //Yes
);
for($i=0; $i<count($image_src); $i++) {
   if(!file_exists($image_src[$i])) {
      $image_src[$i] = 'image_change.jpg';
   }
}
print_r($image_src); 
```

但是当运行结果显示全部`image_change.jpg`

```
[0] => 'image_change.jpg',
[1] => 'image_change.jpg',
[2] => 'image_change.jpg' 
```

结果正好是：

```
[0] => 'image1.jpg',
[1] => 'image_change.jpg',
[2] => 'image3.jpg' 
```

=>如何解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:57:39.113

文件名必须是文件的完整路径，调用前请确保设置了文件的基目录。

```
for($i=0; $i<count($image_src); $i++) {
   if(!file_exists($imageBaseDir . '/'. $image_src[$i])) {
      $image_src[$i] = 'image_change.jpg';
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:56:08.473

你想用[`file_exists()`](http://php.net/manual/en/function.file-exists.php)，没有`file_exist()`。

# sharepoint - Sharepoint Xpath 包含问题

> ID：13804404
> 
> 赞同：0
> 
> 时间：2012-12-10T15:55:05.340
> 
> 标签：sharepoint, xslt, xpath

我想知道是否有人可以提供帮助。

我是 Xpath 和 SharePoint 2010 的新手，但到目前为止我相处得很好，但是这个小问题让我很头疼！

如果在 SharePoint 列表的同一列中没有具有相似名称的另一个值（希望这是有道理的），我正在尝试做的是在字段中显示该值。

如果您对要比较的值进行硬编码，我有以下选择， `<xsl:value-of select="$thisNode/@Txt_x0020_Doc_x0020_Ref[contains(.,'Test')]"/>`这将显示在这种情况下具有测试的所有值。

我所追求的是将当前选择的 Txt_x0020_Doc_x0020_Ref 列与 Txt_x0020_Doc_x0020_Ref 列中的所有其他结果进行比较

如果有人能指出我正确的方向，那就太棒了！

*更新@Ian 这是共享点设计器中页面的全部内容。

我想要它做的是删除重复的命名值并仅显示最高值，即

当前列表

*   测试 1*   测试 1*   你好 1*   罗伯特 1

我想要的是

*   测试 1*   你好 1*   罗伯特 1

只是为了提供有关 SharePoint 列表用途的更多信息。它是一个表单库，存储输入的表单，所有表单都被提交，所以每个版本都被保留，下面的视图的目的是只显示表单的最新版本，然后我会有另一个视图来显示其他版本.

请在下面找到来自 sharepoint 设计器的完整代码：

```
<code> 
<asp:Content ContentPlaceHolderId="PlaceHolderPageTitle" runat="server">
<SharePoint:ListProperty Property="TitleOrFolder" runat="server"/> - 
<SharePoint:ListProperty Property="CurrentViewTitle" runat="server"/></asp:Content>
<asp:Content ContentPlaceHolderId="PlaceHolderPageTitleInTitleArea" runat="server">
<SharePoint:ListProperty Property="TitleBreadcrumb" runat="server"/>
<SharePoint:UIVersionedContent UIVersion="4" runat="server">
<ContentTemplate>
            <span class="ms-ltviewselectormenuheader" runat="server">
                <SharePoint:ListTitleViewSelectorMenu AlignToParent="true" id="LTViewSelectorMenu" runat="server" />
            </span>
        </ContentTemplate>
    </SharePoint:UIVersionedContent>
</asp:Content>
<asp:content contentplaceholderid="PlaceHolderAdditionalPageHead" runat="server">
    <SharePoint:RssLink runat="server"/>
</asp:content>
<asp:Content ContentPlaceHolderId="PlaceHolderPageImage" runat="server">
    <SharePoint:ViewIcon Width="145" Height="54" runat="server"/></asp:Content>
<asp:Content ContentPlaceHolderId="PlaceHolderLeftActions" runat="server">
<SharePoint:RecentChangesMenu runat="server" id="RecentChanges"/>
<SharePoint:ModifySettingsLink runat="server"/>
</asp:Content>
<asp:Content ContentPlaceHolderId ="PlaceHolderBodyLeftBorder" runat="server">
    <div height="100%" class="ms-pagemargin"><img src="/_layouts/images/blank.gif" width='6' height='1' alt="" /></div>
</asp:Content>
<asp:Content ContentPlaceHolderId="PlaceHolderMain" runat="server">
        <WebPartPages:WebPartZone runat="server" FrameType="None" ID="Main" Title="loc:Main"><ZoneTemplate>
        <WebPartPages:XsltListViewWebPart runat="server" Description="" PartOrder="2" Default="TRUE" HelpLink="" AllowRemove="True" IsVisible="True" AllowHide="True" UseSQLDataSourcePaging="True" ExportControlledProperties="False" IsIncludedFilter="" DataSourceID="" Title="Demand Management" ViewFlag="5" AllowConnect="True" DisplayName="Main View" PageType="PAGE_DEFAULTVIEW" FrameState="Normal" PageSize="-1" PartImageLarge="" AsyncRefresh="False" ExportMode="NonSensitiveData" Dir="Default" DetailLink="/Strategy-and-Architecture/Business-Account-Managers/Demand Management" ShowWithSampleData="False" ListId="cafbbdc7-079d-4ae1-bf40-4a695834e510" ListName="{CAFBBDC7-079D-4AE1-BF40-4A695834E510}" FrameType="Default" PartImageSmall="" IsIncluded="True" SuppressWebPartChrome="False" AllowEdit="True" ViewGuid="{1766D7BE-7DC0-4277-8418-EBA815716C60}" AutoRefresh="False" AutoRefreshInterval="60" AllowMinimize="True" WebId="00000000-0000-0000-0000-000000000000" ViewContentTypeId="0x" InitialAsyncDataFetch="False" GhostedXslLink="main.xsl" MissingAssembly="Cannot import this Web Part." HelpMode="Modeless" ID="g_1766d7be_7dc0_4277_8418_eba815716c60" ConnectionID="00000000-0000-0000-0000-000000000000" AllowZoneChange="True" TitleUrl="/Strategy-and-Architecture/Business-Account-Managers/Demand Management" ManualRefresh="False" __MarkupType="vsattributemarkup" __WebPartId="{1766D7BE-7DC0-4277-8418-EBA815716C60}" __AllowXSLTEditing="true" __designer:CustomXsl="fldtypes_Ratings.xsl" WebPart="true" Height="" Width=""><ParameterBindings>
            <ParameterBinding Name="dvt_sortdir" Location="Postback;Connection"/>
            <ParameterBinding Name="dvt_sortfield" Location="Postback;Connection"/>
            <ParameterBinding Name="dvt_startposition" Location="Postback" DefaultValue=""/>
            <ParameterBinding Name="dvt_firstrow" Location="Postback;Connection"/>
            <ParameterBinding Name="OpenMenuKeyAccessible" Location="Resource(wss,OpenMenuKeyAccessible)" />
            <ParameterBinding Name="open_menu" Location="Resource(wss,open_menu)" />
            <ParameterBinding Name="select_deselect_all" Location="Resource(wss,select_deselect_all)" />
            <ParameterBinding Name="idPresEnabled" Location="Resource(wss,idPresEnabled)" />
            <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noitemsinview_doclibrary)" />
            <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noitemsinview_doclibrary_howto2)" />
        </ParameterBindings>
<XmlDefinition>
            <View Name="{1766D7BE-7DC0-4277-8418-EBA815716C60}" DefaultView="TRUE" Type="HTML" DisplayName="Main View" Url="/Strategy-and-Architecture/Business-Account-Managers/Demand Management/Forms/Main View.aspx" Level="1" BaseViewID="1" ContentTypeID="0x" ImageUrl="/_layouts/images/dlicon.png">
                <Query/>
                <ViewFields>
                    <FieldRef Name="LinkFilename"/>
                    <FieldRef Name="Txt_x0020_Doc_x0020_Ref"/>
                    <FieldRef Name="Txtdescription"/>
                    <FieldRef Name="Txt_x0020_Doc_x0020_Status_x0020_Hidden"/>
                    <FieldRef Name="Ddl_x0020_DM_x0020_Project_x0020_Status"/>
                    <FieldRef Name="Modified"/>
                    <FieldRef Name="Editor"/>
                    <FieldRef Name="Txt_x0020_Version"/>
                    <FieldRef Name="Title" Explicit="TRUE"/>
                </ViewFields>
                <RowLimit Paged="TRUE">30</RowLimit>
                <Toolbar Type="Standard"/>
            </View>
        </XmlDefinition>
<DataFields>
</DataFields>
<Xsl>
<xsl:stylesheet xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:d="http://schemas.microsoft.com/sharepoint/dsp" version="1.0" exclude-result-prefixes="xsl msxsl ddwrt" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:asp="http://schemas.microsoft.com/ASPNET/20" xmlns:__designer="http://schemas.microsoft.com/WebParts/v2/DataView/designer" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:SharePoint="Microsoft.SharePoint.WebControls" xmlns:ddwrt2="urn:frontpage:internal" xmlns:o="urn:schemas-microsoft-com:office:office"> 
  <xsl:include href="/_layouts/xsl/main.xsl"/> 
  <xsl:include href="/_layouts/xsl/internal.xsl"/> 
            <xsl:param name="AllRows" select="/dsQueryResponse/Rows/Row[$EntityName = '' or (position() &gt;= $FirstRow and position() &lt;= $LastRow)]"/>
            <xsl:param name="dvt_apos">'</xsl:param>
            <xsl:template match="FieldRef[@Name='LinkFilename']" name="LinkFilenameNoMenu.LinkFilename" mode="Computed_LinkFilename_body" ddwrt:tag="a" ddwrt:dvt_mode="body" ddwrt:ghost="" xmlns:ddwrt2="urn:frontpage:internal">
                <xsl:param name="thisNode" select="."/>
                <xsl:param name="ShowAccessibleIcon" select="0"/>
                <xsl:param name="folderUrlAdditionalQueryString"/>
                <xsl:param name="IncludeOnClick" select="1"/>
                <xsl:choose>

                    <xsl:when test="$thisNode/@FSObjType='1'">
                        <xsl:choose>
                            <xsl:when test="$RecursiveView">
            <xsl:value-of select="$thisNode/@FileLeafRef" />
          </xsl:when>
                            <xsl:otherwise>
                                <xsl:variable name="FolderURL">
              <xsl:value-of select="$PagePathFinal" />RootFolder=<xsl:value-of select="$thisNode/@FileRef.urlencode" /><xsl:value-of select="$ShowWebPart"/>&amp;FolderCTID=<xsl:value-of select="$thisNode/@ContentTypeId" />&amp;View=<xsl:value-of select="$View"/><xsl:value-of select="$folderUrlAdditionalQueryString"/>
            </xsl:variable>
                                <xsl:choose>
                                    <xsl:when test="$IsDocLib">
                                        <xsl:variable name="OnMouseDownJS">
                  javascript:VerifyFolderHref(this,event,'<xsl:value-of select="$thisNode/@File_x0020_Type.url" />','<xsl:value-of select="$thisNode/@File_x0020_Type.progid" />','<xsl:value-of select="$XmlDefinition/List/@DefaultItemOpen" />','<xsl:value-of select="$thisNode/@HTML_x0020_File_x0020_Type.File_x0020_Type.mapcon" />','<xsl:value-of select="$thisNode/@HTML_x0020_File_x0020_Type" />','<xsl:value-of select="$thisNode/@serverurl.progid" />');return false;
                </xsl:variable>
                                        <xsl:variable name="OnClickJS">
                  return HandleFolder(this,event,&quot;<xsl:value-of select="$PagePathFinal" />RootFolder=&quot; + escapeProperly(&quot;<xsl:value-of select="$thisNode/@FileRef" />&quot;) + '<xsl:value-of select="$ShowWebPart" />&amp;FolderCTID=<xsl:value-of select="$thisNode/@ContentTypeId" />&amp;View=<xsl:value-of select="$View" /><xsl:value-of select="$folderUrlAdditionalQueryString"/>','TRUE','FALSE','<xsl:value-of select="$thisNode/@File_x0020_Type.url" />','<xsl:value-of select="$thisNode/@File_x0020_Type.progid" />','<xsl:value-of select="$XmlDefinition/List/@DefaultItemOpen" />','<xsl:value-of select="$thisNode/@HTML_x0020_File_x0020_Type.File_x0020_Type.mapcon" />','<xsl:value-of select="$thisNode/@HTML_x0020_File_x0020_Type" />','<xsl:value-of select="$thisNode/@serverurl.progid" />','<xsl:value-of select="$thisNode/@CheckoutUser.id" />','<xsl:value-of select="$Userid" />','<xsl:value-of select="$XmlDefinition/List/@ForceCheckout" />','<xsl:value-of select="$thisNode/@IsCheckedoutToLocal" />','<xsl:value-of select="$thisNode/@PermMask" />');
                </xsl:variable>
                <a onfocus="OnLink(this)" href="{$FolderURL}">
                                        <xsl:choose>
                                            <xsl:when test="$IncludeOnClick = '1'">
                                                <xsl:attribute name="onmousedown">
                        <xsl:value-of select="$OnMouseDownJS"/>
                      </xsl:attribute>
                                                <xsl:attribute name="onclick">
                        <xsl:value-of select="$OnClickJS"/>
                      </xsl:attribute>
                    </xsl:when>
                                        </xsl:choose>
                  <xsl:value-of select="$thisNode/@FileLeafRef" />
                                        <xsl:choose>
                                            <xsl:when test="$ShowAccessibleIcon">
                      <img src="/_layouts/images/blank.gif" class="ms-hidden" border="0" width="1" height="1" alt="{$idPresEnabled}" />
                    </xsl:when>
                                            <xsl:otherwise></xsl:otherwise>
                                        </xsl:choose>
                </a>
              </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:variable name="OnClickJS">
                  javascript:EnterFolder(&quot;<xsl:value-of select="$PagePathFinal" />RootFolder=&quot; + escapeProperly(&quot;<xsl:value-of select="$thisNode/@FileRef" />&quot;) + '<xsl:value-of select="$ShowWebPart" />&amp;FolderCTID=<xsl:value-of select="$thisNode/@ContentTypeId" />&amp;View=<xsl:value-of select="$View" /><xsl:value-of select="$folderUrlAdditionalQueryString" />');return false;
                </xsl:variable>
                <a onfocus="OnLink(this)" href="{$FolderURL}">
                                        <xsl:choose>
                                            <xsl:when test="$IncludeOnClick = '1'">
                                                <xsl:attribute name="onclick">
                        <xsl:value-of select="$OnClickJS"/>
                      </xsl:attribute>
                    </xsl:when>
                                        </xsl:choose>
                  <xsl:value-of select="$thisNode/@FileLeafRef" />
                                        <xsl:choose>
                                            <xsl:when test="$ShowAccessibleIcon">
                      <img src="/_layouts/images/blank.gif" class="ms-hidden" border="0" width="1" height="1" alt="{$idPresEnabled}" />
                    </xsl:when>
                                            <xsl:otherwise></xsl:otherwise>
                                        </xsl:choose>
                </a>
              </xsl:otherwise>
                                </xsl:choose>
          </xsl:otherwise>
                        </xsl:choose>
      </xsl:when>
                    <xsl:otherwise>
        <a onfocus="OnLink(this)" href="{$thisNode/@FileRef}" onmousedown="return VerifyHref(this,event,'{$XmlDefinition/List/@DefaultItemOpen}','{$thisNode/@HTML_x0020_File_x0020_Type.File_x0020_Type.mapcon}','{$thisNode/@serverurl.progid}')" 
           onclick="return DispEx(this,event,'TRUE','FALSE','{$thisNode/@File_x0020_Type.url}','{$thisNode/@File_x0020_Type.progid}','{$XmlDefinition/List/@DefaultItemOpen}','{$thisNode/@HTML_x0020_File_x0020_Type.File_x0020_Type.mapcon}','{$thisNode/@HTML_x0020_File_x0020_Type}','{$thisNode/@serverurl.progid}','{$thisNode/@CheckoutUser.id}','{$Userid}','{$XmlDefinition/List/@ForceCheckout}','{$thisNode/@IsCheckedoutToLocal}','{$thisNode/@PermMask}')">
          <xsl:value-of select="/dsQueryResponse/Rows/Row[1]" />

          <xsl:value-of select="$thisNode/@FileLeafRef.Name" /></a>

                        <xsl:if test="$thisNode/@Created_x0020_Date.ifnew='1'">
                            <xsl:call-template name="NewGif">
                                <xsl:with-param name="thisNode" select="$thisNode"/>
                            </xsl:call-template>

        </xsl:if>
      </xsl:otherwise>
                </xsl:choose>
  </xsl:template>
    <xsl:template name="FieldRef_Text_body.Txt_x0020_Doc_x0020_Ref" ddwrt:dvt_mode="body" match ="FieldRef[@Name='Txt_x0020_Doc_x0020_Ref']" mode="Text_body" ddwrt:ghost="" xmlns:ddwrt2="urn:frontpage:internal">
        <xsl:param name="thisNode" select="."/>

<!---  This is the field I wish to change --->

 <xsl:value-of select="$thisNode/@Txt_x0020_Doc_x0020_Ref[contains(.,'Test')]"/> 

  </xsl:template></xsl:stylesheet></Xsl>
</WebPartPages:XsltListViewWebPart>

</ZoneTemplate></WebPartPages:WebPartZone>
</asp:Content>
<asp:Content ContentPlaceHolderId="PlaceHolderBodyAreaClass" runat="server">
<style type="text/css">
.ms-bodyareaframe {
    padding: 0px;
}
</style>
</asp:Content>
<asp:Content ContentPlaceHolderId="PlaceHolderPageDescription" runat="server">
<SharePoint:ListProperty CssClass="ms-listdescription" Property="Description" runat="server"/>
</asp:Content>
<asp:Content ContentPlaceHolderId="PlaceHolderCalendarNavigator" runat="server">
    <SharePoint:SPCalendarNavigator id="CalendarNavigatorId" runat="server"/>
  <ApplicationPages:CalendarAggregationPanel id="AggregationPanel" runat="server"/>
</asp:Content>

</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:38:27.727

在表选择语句中，将“AllRows”选择语句更改为以下

这将只显示相同文档名称的一个结果，然后在 xml 中添加一个 order by 子句，如下所示以显示最新结果。

```
 <Query>
                <OrderBy>
                    <FieldRef Name="Modified" Ascending="FALSE"/>
                </OrderBy>
                <GroupBy>
                </GroupBy>
            </Query> 
```

# actionscript-3 - 使用 AS3 Worker 录制声音

> ID：13804405
> 
> 赞同：0
> 
> 时间：2012-12-10T15:55:06.433
> 
> 标签：actionscript-3, flash, flash-builder, backgroundworker, worker

您好，我正在尝试使用 AS3 Worker 录制用户声音，当涉及到 Worker 和主场景之间的通信时，一切正常，但我认为录制功能在这里有问题，我使用的是来自 bytearray.org 的 Record Clash（http： //www.bytearray.org/?p=1858），这是我的代码我错过了什么：

```
 package objects
{
    import flash.events.Event;
    import flash.system.MessageChannel;
    import flash.system.Worker;
    import flash.system.WorkerDomain;
    import flash.utils.ByteArray;

    import starling.display.Button;
    import starling.display.Image;
    import starling.display.Sprite;
    import starling.events.Event;

    public class RecordComponent extends Sprite
    {
        private var audioContainer:Image;
        private var recButton:Button;
        private var playButton:Button;
        private var stopButton:Button;

        //background thread for recording       
        private var worker:Worker;
        private var wtm:MessageChannel;
        private var mtw:MessageChannel;
        private var output:ByteArray;

        public function RecordComponent()
        {
            super();
            worker = WorkerDomain.current.createWorker(Workers.RecordWorker);
            wtm = worker.createMessageChannel(Worker.current);
            mtw = Worker.current.createMessageChannel(worker);

            worker.setSharedProperty("wtm",wtm);
            worker.setSharedProperty("mtw",mtw);
            worker.start();
            wtm.addEventListener(flash.events.Event.CHANNEL_MESSAGE,onChannelMessage);
            this.addEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
        }

        protected function onChannelMessage(event:flash.events.Event):void
        {
            output = wtm.receive();
        }

        protected function onAddedToStage(event:starling.events.Event):void
        {
            this.removeEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
            drawScreen();
        }

        private function drawScreen():void
        {
            audioContainer  = new Image( Assets.getAtlas().getTexture("audioContainer") );
            addChild(audioContainer);           

            //record button
            recButton = new Button( Assets.getAtlas().getTexture("recordButton") );
            recButton.x=Math.ceil(194/2 - recButton.width/2);
            recButton.y=5;
            addChild(recButton);

            //stop button
            stopButton = new Button( Assets.getAtlas().getTexture("stopButton") );
            stopButton.x=recButton.x+10;
            stopButton.y=10;
            stopButton.visible = false;
            addChild(stopButton);

            //play button
            playButton = new Button( Assets.getAtlas().getTexture("playButton") );
            playButton.x=Math.ceil(194 - playButton.width)-25;
            playButton.y=10;
            playButton.visible = false;
            addChild(playButton);

            this.addEventListener(starling.events.Event.TRIGGERED, buttons_triggeredHandler);
        }

        private function buttons_triggeredHandler(event:starling.events.Event):void
        {
            var currentButton:Button = event.target as Button;
            switch(currentButton)
            {
                case recButton:
                    startRecording();
                    break;
                case stopButton:
                    stopRecording();
                    break;
                case playButton:
                    playRecording();
                    break;
            }
        }

        private function playRecording():void
        {
            mtw.send("RECORD_PLAY");
        }

        private function stopRecording():void
        {
            stopButton.visible = false;
            recButton.x = 25;
            playButton.visible = true;
            recButton.visible = true;
            mtw.send("RECORD_STOP");
            //
        }

        private function startRecording():void
        {
            recButton.visible = false;
            stopButton.visible = true;
            playButton.visible = false;
            mtw.send("RECORD_START");
        }

    }
} 
```

唱片工作者

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.media.Microphone;
    import flash.system.MessageChannel;
    import flash.system.Worker;

    import org.as3wavsound.WavSound;
    import org.bytearray.micrecorder.MicRecorder;
    import org.bytearray.micrecorder.encoder.WaveEncoder;
    import org.bytearray.micrecorder.events.RecordingEvent;

    public class RecordWorker extends Sprite
    {
        private var wtm:MessageChannel;
        private var mtw:MessageChannel;
        // volume in the final WAV file will be downsampled to 50%
        private var volume:Number = .75;
        // we create the WAV encoder to be used by MicRecorder
        private var wavEncoder:WaveEncoder = new WaveEncoder( volume );
        // we create the MicRecorder object which does the job
        private var recorder:MicRecorder = new MicRecorder( wavEncoder,Microphone.getEnhancedMicrophone() );

        public function RecordWorker()
        {
            wtm = Worker.current.getSharedProperty("wtm");
            mtw = Worker.current.getSharedProperty("mtw");

            mtw.addEventListener(Event.CHANNEL_MESSAGE,command_Handler);
        }
        //message received from the main component
        protected function command_Handler(event:Event):void
        {
            switch(mtw.receive())
            {
                case "RECORD_START":
                    trace("recording.....");
                    recorder.record();
                    recorder.addEventListener(RecordingEvent.RECORDING, onRecording);
                    recorder.addEventListener(flash.events.Event.COMPLETE, onRecordComplete);
                    break;
                case "RECORD_STOP":
                    trace("record stopped....");
                    recorder.stop();
                    break;
                case "RECORD_PLAY":
                    if(recorder.output.length>0)
                    {
                        var player:WavSound = new WavSound(recorder.output);
                        player.play();
                    }
                    break;
            }
        }
        private function onRecording(event:RecordingEvent):void
        {
            trace ( event.time );
        }

        private function onRecordComplete(event:flash.events.Event):void
        {

        }
    }
} 
```

anny 帮助将被应用

谢谢， 哈立德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T07:45:51.467

查看[有关 Adob​​e 的 AS3 参考的这篇文章](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)，似乎因为每个创建的工作人员都是“Flash 运行时的*虚拟*实例”，它与任何核心运行时的输入或输出通道没有直接连接。Microphone 类就是这样一种截断接口，这就是为什么它无法访问工作人员内部的系统麦克风的原因。

# module - 在 phpfox 中更改模块标题名称

> ID：13804406
> 
> 赞同：0
> 
> 时间：2012-12-10T15:55:07.277
> 
> 标签：module, phpfox

我正在使用 phpfox 工具开发一个网站。在仪表板中，我想将活动提要标题更改为不同的内容。我怎样才能改变那个标题？我尝试使用块管理器标题更改选项，它没有反映在页面中。请帮我更改标题名称...如果您有任何在线参考链接来学习 phpfox，我是 phpfox 的新手，请也发送链接。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:11:53.673

1.  转到您网站的管理区域

    admincp->扩展->语言->短语管理器

2.  搜索“活动提要”

3.  从这里您可以更改活动提要的标题

# mapping - Dozer - 如何让 Dozer 将值从源复制到目标，即使它已经在目标中设置？

> ID：13804413
> 
> 赞同：1
> 
> 时间：2012-12-10T15:55:27.590
> 
> 标签：mapping, dozer

我正在使用 Dozer (5.3.2) 从源 Person 对象映射到目标 Person 对象。Person 超类的默认构造函数在对象上设置了一个 UUID。因此，当我将源映射到新 Person 时，新 Person 上的 UUID 已经设置，因此不会从源对象复制。在代码中（完整代码进一步向下）：

```
DozerBeanMapper MAPPER = // ... see code further down;
Person source = new Person();
Person target = new Person();
MAPPER.map(source, target); 
```

我想要什么：在调用 MAPPER.map(...) 之后，我希望 target.getUuid() 等于 source.getUuid()。到目前为止，它们是不同的（因为它们在超级构造函数中设置为 UUID.randomUUID，见下文）。

我可以通过设置解决这个问题

```
target.setUuid(null); 
```

在调用 MAPPER.MAP(...) 之前，但这不是我想要的，因为这是对更复杂问题的简化。是否有某种方法可以配置 Dozer 或制作自定义类，以便映射器在目标对象中设置值，即使目标对象中的值不为空？

我的代码如下：

```
public abstract class AbstractEntity
{
    private long uuid;

    public AbstractEntity() {
        this(UUID.randomUUID());
    }

    public AbstractEntity(long uuid) {
        this.uuid = uuid;
    }

        public UUID getUuid()
    {
        return this.uuid;
    }

    public void setUuid(final UUID uuid)
    {
        this.uuid = uuid;
    }

}

public class Person extends AbstractEntity
{
    // Getters and setters...
} 
```

下面是创建和执行推土机映射器的代码：

```
DozerBeanMapper MAPPER = new DozerBeanMapper();
BeanMappingBuilder builder = new BeanMappingBuilder() {
    protected void configure() {
        mapping(UUID.class, UUID.class, TypeMappingOptions.oneWay(), TypeMappingOptions.mapNull(true),
                TypeMappingOptions.beanFactory(UuidBeanFactory.class.getName()));
    }
};
MAPPER.addMapping(builder);

Person source = new Person();
Person target = new Person();
MAPPER.map(source, target); 
```

UUIDBeanFactory 的代码 - 我使用它是因为 UUID 没有空的构造函数，这会使 Dozer 抛出异常。

```
public class UuidBeanFactory implements BeanFactory
{
    @Override
    public Object createBean(Object sourceObject, Class<?> aClass, String s)
    {
        if (sourceObject == null)
        {
            return null;
        }

        UUID source = (UUID) sourceObject;
        UUID target = new UUID(source.getMostSignificantBits(), source.getLeastSignificantBits());

        return target;
    }
} 
```

# ruby-on-rails - 错误：nil:NilClass 的未定义方法 `contact'

> ID：13804414
> 
> 赞同：0
> 
> 时间：2012-12-10T15:55:37.040
> 
> 标签：ruby-on-rails, ruby, hobo

我有一个几年前有人写的 ruby​​/rails/hobo 系统，我需要移植到最新版本的 ruby​​/rails/hobo。似乎 ruby​​ 并不关心向后兼容性，所以以前在旧应用程序中工作的代码不再工作了：

在 observation.rb 模型文件中，旧应用程序有这个：

```
belongs_to :survey
has_one :site, :through => :survey

def create_permitted?
  acting_user == self.survey.contact or acting_user.administrator?
end 
```

survey.rb 模型文件有这个：

```
belongs_to :contact, :class_name => 'User', :creator => true 
```

不幸的是，observation.rb 中的代码在新的 ruby​​/rails/hobo 下不起作用，它给了我错误：

```
NoMethodError in Observations#index

Showing controller: observations; dryml-tag: index-page where line #1 raised:

undefined method `contact' for nil:NilClass
Extracted source (around line #1):

0
Rails.root: /home/simon/ruby/frogwatch2

Application Trace | Framework Trace | Full Trace
app/models/observation.rb:48:in `create_permitted?' 
```

应该如何更改“create_permitted”方法？我发现 ruby​​/rails/hobo 的文档非常糟糕（这很公平，因为它是免费软件）。另外我什至不知道如何开始在谷歌上搜索这个（我已经尝试了好几天）。

请帮忙！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:10:54.417

除了对 Rails 文档的不同看法外，您还调用`contact`了一个在这种情况下不存在的调查，导致调用`nil.contact`.

一种替代方法是在呼叫之前检查调查是否存在`contact`，例如以这种方式。

```
def create_permitted?
  acting_user == (survey && survey.contact) or acting_user.administrator?
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:09:34.540

您收到错误是因为引用 column( `survey_id`) 可能包含一个`null`或无效的引用 ID。

如果`null`允许或无效引用，则更改代码以处理它

```
( self.survey and acting_user == self.survey.contact ) or acting_user.administrator? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:20:44.657

我将附和其他两位所说的话。您尝试引用的调查是`nil`，并且`nil`没有调用方法`contact`。我将提供一个稍微不同的解决方案：

```
def create_permitted?
  acting_user == survey.try(:contact) or acting_user.administrator?
end 
```

该`#try`方法存在于`nil`和 上`survey`。它基本上将方法调用包装在`rescue`. 从概念上讲，它看起来像：

```
def try(method_name, *args)
  self.send(method_name, args) rescue nil
end 
```

这可能会减少您为捕获可能不存在关系的条件而必须编写的代码量，从而防止`NoMethodError`异常。

`#try`是 Rails 核心扩展的一部分`Object`。实际上，它不像我上面所说的那样工作，因为调用 to 引起的异常`Object#try`仍然会像往常一样发生。相反，它`Object`通过调用`send`. `NilClass`它通过返回进行扩展`nil`，因此它不会尝试向 发送任何方法`NilClass`，从而防止`NoMethodError`. 正如 tadman 在评论中指出的那样，一个包罗万象的异常处理程序通常不是一个好主意。

[https://github.com/rails/rails/blob/6ef9fda1a39f45e2d18aba4881f60a19589a2c77/activesupport/lib/active_support/core_ext/object/try.rb](https://github.com/rails/rails/blob/6ef9fda1a39f45e2d18aba4881f60a19589a2c77/activesupport/lib/active_support/core_ext/object/try.rb)

**更新**

一个更好的解决方案，我忘记了，是使用`delegate`.

例如：

```
class User < ActiveRecord::Base
  delegate :contact, to: :survey, prefix: true, allow_nil: true
end 
```

然后你会打电话`user.survey_contact`，如果调查是，你会优雅地失败`nil`。

# vector - 两个地理位置之间的方向向量

> ID：13804415
> 
> 赞同：2
> 
> 时间：2012-12-10T15:55:40.143
> 
> 标签：vector, geolocation, augmented-reality, haversine, bearing

我正在构建一个 Android AR-App（是的，另一个），但我更感兴趣的是理解它背后的数学而不是使用框架（知道[这个](https://stackoverflow.com/questions/6494069/ios-augmented-reality-with-compass-and-location)和[这个](https://code.google.com/p/android-augment-reality-framework/wiki/HowItWorks)）。

给定位置 (lat1,long1) 和 (lat2,long2) 我正在搜索从 Location1 到 Location2 的方向向量 (x,y,z)。

使用这个[站点](http://www.yourhomenow.com/house/haversine.html)，我可以计算 Location1 和 Location2 之间的距离和（初始）方位。

现在我开发了两种方法（忽略高度）

```
x = distHaversine(lat1,long1,lat1,long2);
z = distHaversine(lat1,long1,lat2,long1);
if (lat1 < lat2)
  z *= -1;
if (long1 > long2)
  x *= -1; 
```

和

```
distance = distHaversine(lat1,long1,lat2,long2);
angle = 90.0-bearing(lat1,long1,lat2,long2);
x = cos(angle)*distance;
z = sin(angle)*distance; 
```

但现在我被困住和烦躁......结果不应该是一样的吗？我在哪里可以找到我的推理错误？我如何计算方向向量（或者更确切地说：为什么我的第二种方法没有工作？）？

谢谢你的帮助

# c - 在 C 中传递、编辑和返回变量

> ID：13804424
> 
> 赞同：0
> 
> 时间：2012-12-10T15:56:01.330
> 
> 标签：c, function

我想将整数传递给函数，让函数对其进行编辑，然后将整数传回主函数。我正在为此努力，但它不起作用。

这是我的代码：

```
int update_SEG_values(int DIGIT_1, int DIGIT_2) {

    // How many tens in the "TEMP_COUNT".
    DIGIT_2 = ((TEMP_COUNT) / 10);

    // How much is left for us to display.
    TEMP_COUNT = TEMP_COUNT - ((DIGIT_2) * 10);

    // How many ones.
    DIGIT_1 = ((TEMP_COUNT) / 1);

    return(DIGIT_1, DIGIT_2);
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:58:41.233

C中只能返回一个值

当你给：

```
return(DIGIT_1, DIGIT_2); 
```

由于逗号运算符`DIGIT_2`将被返回。有关更多信息，请参阅[http://en.wikipedia.org/wiki/Comma_o​​perator](http://en.wikipedia.org/wiki/Comma_operator)

您可以通过使用指针或结构来完成您的工作（两个数字都将是相同结构的一部分并且您返回相同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:59:05.383

C 不允许您返回多个值。如果您需要更改传递给函数的值，则需要通过指针传递：

```
void update_SEG_values(int *DIGIT_1, int *DIGIT_2) // Note the void 
```

在函数内部，取消引用指针以更改值：

```
*DIGIT_2 = ((TEMP_COUNT) / 10); // Note the asterisk
...
*DIGIT_1 = ((TEMP_COUNT) / 1); 
```

调用函数时，需要将指针传递给变量，如下所示：

```
int digit1 = 5, digit2 = 1;
update_SEG_values(&digit1, &digit2); // Note the ampersands 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:58:20.200

您不能一次返回两个值。考虑使用指针，以便修改值本身而不返回任何内容。

```
// note the change to "void" in the function's signature--it will not return anything,
// rather, it will change the information passed in through the pointer parameters
void update_SEG_values(int *DIGIT_1, int *DIGIT_2)
{
    // How many tens in the "TEMP_COUNT".
    *DIGIT_2 = ((TEMP_COUNT) / 10);

    // How much is left for us to display.
    TEMP_COUNT = TEMP_COUNT - ((DIGIT_2) * 10);

    // How many ones.
    *DIGIT_1 = ((TEMP_COUNT) / 1);
    // The variables passed in as params for DIGIT_1 and _2 will be updated
    // in the main function w/o needing to return anything
} 
```

[有关指针的更多信息](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:58:49.980

将变量的地址传递给函数。如果进行了任何更改，那么它将被反映。

```
update_SEG_values(int *DIGIT_1, int *DIGIT_2)
{

...
} 
```

使用 int 值的地址调用函数，例如，

```
int a, b;
update_SEG_values(&a, &b); 
```

返回两个整数不符合您的目的。

查看修改后的代码。我猜你会照顾 TEMP_COUNT。

```
void update_SEG_values(int *DIGIT_1, int *DIGIT_2) {

    /* How many tens in the "TEMP_COUNT". */
    *DIGIT_2 = ((TEMP_COUNT) / 10);

    /* How much is left for us to display. */
    TEMP_COUNT = TEMP_COUNT - ((*DIGIT_2) * 10);

    /* How many ones. */
    *DIGIT_1 = ((TEMP_COUNT) / 1);

    return; //No use anyway. 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:03:08.360

有两种选择。您可以通过引用传递整数并且没有返回值，或者您可以为您尝试返回的元组创建一个结构。

第一种方式看起来像：

```
void update_SEG_values(int* DIGIT_1, int* DIGIT_2) {

    /* How many tens in the "TEMP_COUNT". */
    *DIGIT_2 = ((TEMP_COUNT) / 10);

    /* How much is left for us to display. */
    TEMP_COUNT = TEMP_COUNT - ((*DIGIT_2) * 10);

    /* How many ones. */
    *DIGIT_1 = ((TEMP_COUNT) / 1);
}

int main() {
    int x = 111, y = 222;
    int result = update_SEG_values(&x, &y);
    ....

} 
```

第二种方式看起来像：

```
struct tuple {
    int DIGIT_1;
    int DIGIT_2;
};

struct tuple update_SEG_values(int DIGIT_1, int DIGIT_2) {

    /* How many tens in the "TEMP_COUNT". */
    DIGIT_2 = ((TEMP_COUNT) / 10);

    /* How much is left for us to display. */
    TEMP_COUNT = TEMP_COUNT - ((DIGIT_2) * 10);

    /* How many ones. */
    DIGIT_1 = ((TEMP_COUNT) / 1);

    struct tuple result;
    result.DIGIT_1 = DIGIT_1;
    result.DIGIT_2 = DIGIT_2;
    return result;
} 
```

我还注意到您没有在任何地方定义 TEMP_COUNT。它应该在 update_SEG_values 中使用它之前进行初始化，可能作为该函数的第一行。

# ios - 如何利用硬件解码音频？

> ID：13804429
> 
> 赞同：2
> 
> 时间：2012-12-10T15:56:11.063
> 
> 标签：ios, ffmpeg, core-audio, audioqueue

我有一个缓冲区，其中包含 ffmpeg 从使用 H264/AAC 编码的视频文件中读取的数据包根据 Apple 文档，在 AAC 中编码的音频流可以在硬件支持下进行解码，

如何在硬件支持的情况下解码音频流？

更新：我使用音频队列服务来输出音频。现在我使用 ffmpeg 解码 AAC 数据包并将 LPCM 音频发送到 AQS。根据 Apple 文档，我可以直接将 AAC 音频发送到 AQ，它会负责解码任务。它是用硬件解码的吗？我需要，以及如何设置音频队列的参数来启用音频硬件解码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T21:21:23.023

您可以告诉系统不要使用硬件解码，但可能不是相反。

常量来确定可以使用哪些硬件编解码器。

```
enum {
    kAudioFormatProperty_HardwareCodecCapabilities = 'hwcc',
}; 
```

常量 `kAudioFormatProperty_HardwareCodecCapabilities` 一个 UInt32 值，指示可以使用的指定列表中的编解码器的数量，如果应用程序要以指定的顺序开始使用它们。将参数设置为描述一组一个或多个音频编解码器`inSpecifier`的结构数组。`AudioClassDescription`如果属性值与参数中数组的大小相同，`inSpecifier`则可以使用所有指定的编解码器。在 iOS 3.0 及更高版本中可用。在 AudioFormat.h 中声明。讨论 使用此属性来确定是否可以同时实例化所需的编解码器集。

基于硬件的编解码器只能在使用音频队列服务或使用接口（如使用音频队列服务的 AV Foundation）播放或录制时使用。特别是，您不能将基于硬件的音频编解码器与 OpenAL 一起使用或在使用 I/O 音频单元时使用。

在描述硬件编解码器的存在时，系统不考虑当前的音频会话类别。某些类别不允许使用硬件编解码器。仅根据硬件是否支持指定的编解码器组合，通过此常数认为一组硬件编解码器可用。

一些编解码器可能在硬件和软件实现中都可用。使用`kAudioFormatProperty_Encoders`和`kAudioFormatProperty_Decoders`常量来确定给定的编解码器是否存在，以及它是基于硬件的还是基于软件的。

基于软件的编解码器总是可以被实例化，因此在使用软件编码或解码时不需要使用这个常量。

以下代码示例说明如何按优先级顺序检查硬件 AAC 编码器和硬件 AAC 解码器是否可用：

```
AudioClassDescription requestedCodecs[2] = {
    {
        kAudioEncoderComponentType,
        kAudioFormatAAC,
        kAppleHardwareAudioCodecManufacturer
    },
    {
        kAudioDecoderComponentType,
        kAudioFormatAAC,
        kAppleHardwareAudioCodecManufacturer
    }
};

UInt32 successfulCodecs = 0;
size = sizeof (successfulCodecs);
OSStatus result =   AudioFormatGetProperty (
                        kAudioFormatProperty_HardwareCodecCapabilities,
                        requestedCodecs,
                        sizeof (requestedCodecs),
                        &size,
                        &successfulCodecs
                    );
switch (successfulCodecs) {
    case 0:
        // aac hardware encoder is unavailable. aac hardware decoder availability
        // is unknown; could ask again for only aac hardware decoding
    case 1:
        // aac hardware encoder is available but, while using it, no hardware
        // decoder is available.
    case 2:
        // hardware encoder and decoder are available simultaneously
} 
```

[https://github.com/mooncatventures-group/sampleDecoder](https://github.com/mooncatventures-group/sampleDecoder)

但是，您最好使用 audioUnits 而不是音频队列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:28:08.207

您可以，尽管像往常一样使用 Core Audio 有各种警告和边缘情况需要注意。

将属性设置`kExtAudioFileProperty_CodecManufacturer`为`kAppleHardwareAudioCodecManufacturer`。在设置客户端数据格式之前执行此操作。

中的一些文档`ExtendedAudioFile.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T22:55:58.610

找到这个宝石：

[https://developer.apple.com/library/ios/qa/qa1663/_index.html](https://developer.apple.com/library/ios/qa/qa1663/_index.html)

由于 AudioFormatGetProperty 不经常工作。上面描述了如何将 AudioFormatGetPropetyInfo 用于编码器或解码器，并检测硬件或软件中存在哪些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T00:37:40.770

而不是做这个计算只是在这里强制一个非常大的缓冲区大小。

status = AudioQueueAllocateBufferWithPacketDescriptions(audioQueue_, _audioCodecContext->bit_rate * kAudioBufferSeconds / 8, _audioCodecContext->sample_rate * kAudioBufferSeconds / _audioCodecContext->frame_size + 1, &audioQueueBuffer_[i]);

# c# - 用于将 Windows 应用程序连接到 MVC 4 的 Web 服务或 Web API？

> ID：13804435
> 
> 赞同：7
> 
> 时间：2012-12-10T15:56:40.067
> 
> 标签：c#, winforms, wcf, asp.net-mvc-4, asp.net-web-api

在搜索了一整天我应该使用什么之后，我不确定哪个选项最适合我的需求，所以我希望有更多经验的人可以帮助我。

我有一个`winforms`应用程序 ( `c#`) 和一个`ASP.NET MVC 4`Web 应用程序 ( `c#`)。我希望连接这些，目标是从我在`MVC 4`项目中使用的数据库发送和接收数据，但从 Windows 窗体应用程序中。我从 Windows 窗体应用程序发送到数据库的数据，然后由`MVC 4`Web 应用程序使用。

我对 web services / 完全陌生，`Web Api`所以我无法真正决定哪种选择是最好的。任何帮助将非常感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T12:03:34.807

如果您已经创建了`MVC4`项目，那么您可以向任何控制器添加操作并返回`JSON`如下数据：

```
public JsonResult GetCategoryList()
{
    var list = //return list
    return Json(list, JsonRequestBehavior.AllowGet);
} 
```

或者您可以创建新项目`MVC4`并选择`WEBAPI`模板。它将为您创建 webapi 项目。它将使用示例创建。因此很容易创建`webapi`。在`webapi`它返回的数据自动转换为`xml`并`json`按照`request`

Web `WCF`API 抽象映射`ASP.NET` `Web API`大致如下

```
WCF Web AP -> ASP.NET Web API
Service -> Web API controller
Operation -> Action
Service contract -> Not applicable
Endpoint -> Not applicable
URI templates -> ASP.NET Routing
Message handlers -> Same
Formatters -> Same
Operation handlers -> Filters, model binders 
```

[其他链接](http://wcf.codeplex.com/wikipage?title=How%20to%20Migrate%20from%20WCF%20Web%20API%20to%20ASP.NET%20Web%20API)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-30T21:45:27.083

如果您已经有 MVC 4 应用程序，最好使用 Web API（RESTful 服务）

它的配置和使用都很简单。您实际上需要的是创建一个新控制器，例如：

```
class MyApiController: ApiController {

   public Post(SomeClass item) {
      ....connect to db and do whatever you need with the data
   }
} 
```

您还应该为 Api 配置路由。

然后在您的 winForms 应用程序中，您可以简单地使用`HttpClient`类来执行 api 调用。

```
HttpClient aClient = new HttpClient();

// Uri is where we are posting to: 
Uri theUri = new Uri("https://mysite.com/api/MyApi");

// use the Http client to POST some content ( ‘theContent’ not yet defined). 
aClient.PostAsync(theUri, new SomeClass()); 
```

在这里查看一些实现细节： [Web Api Getting Started](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api)

开始使用 WCF 并不像使用 Web API 那样容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:08:16.507

鉴于您使用的标签，我猜您是在 SOAP Web 服务和 WCF 之间做出决定。鉴于这两个，我说去 WCF。SOAP Web 服务（在 Visual Studio 中实现）是较旧的技术；仍然可以使用，但是 WCF 可以做旧 SOAP 服务可以做的所有事情（包括看起来完全像 SOAP 服务）等等。

如果您有一个将您的 Web 服务器连接到您的数据库服务器的 Web 服务（这两个东西应该在不同的机器上；您的 Web 服务器必然会暴露给世界，而您的 DB 服务器应该像 Fort Knox 一样被锁定），我看不出为什么您不应该为内部 WinForms 应用程序使用相同的服务（使用 LAN/VPN 访问数据库服务器上的服务层）。对于必须通过 Internet 访问数据的 WinForms 应用程序，我建议将该服务重新实现为支持安全加密数据传输的 WCF 服务。您还可以将服务端点设置为仅接受 HTTPS 连接，从而只需通过 SSL/TLS 运行现有服务。

您选择什么主要取决于您可以投入多少时间资源来解决问题；迁移到 HTTPS 是一种快速修复，几乎不需要更改任何代码，而在 WCF 中重新实现将需要更多时间，但除了简单的安全隧道之外，还允许采取额外的安全措施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-26T12:51:49.127

或者像南希这样轻量级的东西：http: [//nancyfx.org/](http://nancyfx.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-01T23:09:31.393

我们在使用 MVC4 WebApi 时遇到了一些问题，最终在服务器端 JavaScript/AJAX上使用[ServiceStack用于 Web 客户端，](https://github.com/ServiceStack) [RestSharp](http://restsharp.org/)用于厚客户端。

我们的具体问题之一是无法自动生成文档、显着的性能差异以及对单元/集成测试的更好支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-30T15:25:26.573

`WCF`我建议您使用`WCF Data Services`or ，而不是特别提倡`OData`，但前提是您需要确保它的安全。如果你选择 pure `WCF`，你会发现你最终会创建大量代码来处理从数据库中检索信息，然后将这些信息直接发送回你的客户。起初听起来并没有那么糟糕，但是在数据库中有大约 30 个实体之后，您很快就会厌倦纯粹的`WCF`解决方案。

`OData`很棒，它使用`Entity Framework`，并且可以快速打开现有数据库或您将要创建的数据库的数据操作。如果您可以确保服务安全，它将为您节省大量的开发时间。数据响应的格式是灵活的。还有很多为其他编程语言移植的客户端库。

保护服务的步骤非常简单。始终部署到`https`. 任何登录或注册方法都需要是 post 方法，它返回一个令牌（加密值）或一个可以加密并为任何后续请求发回的唯一秘密。最好使用令牌，并且令牌过期..因为否则您的服务和您的应用程序（无论是移动设备还是桌面设备）都需要具有共享的加密/解密方法。

# websphere - 无法否决 Websphere 8.0 中特定于阶段的 @Specializes 类

> ID：13804440
> 
> 赞同：1
> 
> 时间：2012-12-10T15:56:54.393
> 
> 标签：websphere, cdi

在我第一次涉足 JSF 和 CDI 世界时，我一直在尝试使用 @Specializes 批注来仅在单元测试中覆盖托管 bean 中的行为。我们在 WEB-INF/lib 中有 MyFaces CODI jar，并且单元测试方面工作得很好，即我的 Mock 专业化被拾取并使用：

```
@ProjectStageActivated(ProjectStage.UnitTest.class)
@Specializes
class MockCustomerSearchScreenBean extends CustomerSearchScreenBean {
... 
```

*当项目阶段确实是*单元测试时，这很好用，但是当它是其他任何东西时，WAR 启动失败并出现

```
org.apache.webbeans.exception.WebBeansDeploymentException: org.apache.webbeans.exception.inject.InconsistentSpecializationException: Specialized bean for class : class bla.bla.MockCustomerSearchScreenBean is not enabled in the deployment.
    at org.apache.webbeans.config.BeansDeployer.checkSpecializations(BeansDeployer.java:653) 
```

我知道 @Observes ProcessAnnotatedType 在 bean 发现期间触发，因为我可以看到 CODI ActivationExtension 在 ProcessAnnotatedType 上设置了否决标志，并且我还编写了自己的扩展，明确否决了 Mock 版本，但容器仍然确定尝试使用专用版本，而不是“普通”版本。我还尝试包装 AnnotatedType 以不宣传 @Specialization 注释。

我也没有简单的方法不将模拟子类部署到我的桌面服务器。

有什么方法可以说服 WebSphere 的开放 Web bean 版本忽略基于项目阶段的专业化（或我可以控制的其他一些因素）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:34:13.567

WAS 8.0 使用了相当老的 OpenWebBeans 版本。这个问题很久以前就在 OpenWebBeans 中修复了。我会搬到8.5+。和/或使用@Alternative 尝试相同（但关闭BDA）。

# visual-studio-2010 - 错误：标识符“PrintGuessesRemaining”、“PrintWordSpaceDelinated”、“PrintWordsRemainingIsUndefined”

> ID：13804443
> 
> 赞同：1
> 
> 时间：2012-12-10T15:57:02.407
> 
> 标签：visual-studio-2010, class, linker, compiler-errors, linker-errors

我创建了一个打印类，在其中创建了所有这些功能。

当我尝试调用这些函数时，我得到了标识符错误。我确定我错误地设置了我的课程。请帮助构建打印类

附上代码：

```
// Print.cpp - Print Class implementation
// Written by Varun Patel

#include "Print.h"

Print::Print()
{
}

Print::Print(const string& word)
{
    Word = word;
}

void Print::PrintWordsRemaining(set<string>& possibleWords_, bool  displayNumberOfWordsRemaining_)
{
    if(displayNumberOfWordsRemaining_) 
    {
        cout << "There are " << possibleWords_.size() << " possible words left." << endl;
    } 
    else 
    {
        //Do nothing
    }

}

void Print::PrintWordSpaceDelinated(string word_)
{
    for (size_t i = 0; i < word_.size(); i++) 
    {
        cout << word_[i] << " ";
    }
    cout << endl;
}

void Print::PrintGuessesRemaining(int guessesRemaining_)
{
    cout << "You have " << guessesRemaining_ << " guesses remaining." << endl;
} 
```

这是我尝试调用其中一个函数的方法：

```
#include "UpdateGuessesRemaining.h"

void UpdateGuessesRemaining(set<string>& newPossibleWords, int& guessesRemaining, 
    char guessChar, string& guessedWord) 
{
        set<string>::iterator wordPtr = newPossibleWords.begin();
    if (wordPtr->find(guessChar) == -1) 
    {
        cout << "Sorry, incorrect guess. ";
        PrintGuessesRemaining(--guessesRemaining);
    } 
    else 
    {
        cout << "Correct! The word contains " << guessChar << "." << endl;
    }
} 
```

这是我的头文件：

```
// Print.h - Print Class declaration
// Written by Varun Patel

#pragma once
#include <iostream>
#include <set>
#include <string>

#include "PromptForGuessesRemaining.h"

using namespace std;

class Print
{
public:
    // Default constructor
    Print();

    Print(const string& word);

    void PrintWordsRemaining(set<string>& possibleWords, bool displayNumberOfWordsRemaining);

    void PrintWordSpaceDelinated(string word);

    void PrintGuessesRemaining(int guessesRemaining);

private:

     string Word;

}; 
```

感谢您的帮助，

瓦伦

# list - 对联合类型的 F# 列表进行操作

> ID：13804444
> 
> 赞同：4
> 
> 时间：2012-12-10T15:57:09.723
> 
> 标签：list, f#, discriminated-union

这是我在[F# List of Union Types](https://stackoverflow.com/questions/13770911/f-list-of-union-types)上的问题的延续。多亏了有用的反馈，我能够创建一个`Report`s 列表，其中`Report`之一是`Detail`或`Summary`。这是数据定义再次：

```
module Data

type Section = { Header: string;
                 Lines:  string list;
                 Total:  string }

type Detail = { State:     string;
                Divisions: string list;
                Sections:  Section list }

type Summary = { State:    string;
                 Office:   string;
                 Sections: Section list }

type Report = Detail of Detail | Summary of Summary 
```

现在我已经`Report`在一个名为 的变量中获得了 s的列表`reports`，我想遍历这些`Report`对象并基于每个对象执行操作。除了处理`Detail.Divisions`或的情况外，操作是相同的`Summary.Office`。显然，我必须以不同的方式处理这些问题。但我不想复制所有代码来处理每个类似的`State`代码`Sections`。

我的第一个（工作）想法类似于以下内容：

```
for report in reports do
    let mutable isDetail  = false
    let mutable isSummary = false

    match report with
    | Detail  _ -> isDetail  <- true
    | Summary _ -> isSummary <- true

    ... 
```

这将给我一种方法来知道何时处理`Detail.Divisions`而不是`Summary.Office`. 但这并没有给我一个可以使用的对象。我仍然坚持`report`，不知道它是什么，`Detail`或者`Summary`，也无法访问属性。我想转换`report`为适当的`Detail`or`Summary`然后使用相同的代码来处理任何一种情况，除了`Detail.Divisions`and `Summary.Office`。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:37:42.207

你可以这样做：

```
for report in reports do
    match report with
    | Detail { State = s; Sections = l }
    | Summary { State = s; Sections = l } ->
        // common processing for state and sections (using bound identifiers s and l)

    match report with
    | Detail { Divisions = l } ->
        // unique processing for divisions
    | Summary { Office = o } ->
        // unique processing for office 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T22:37:21.110

如果我有你描述的数据结构，@kvb 的答案可能是我会使用的方法。但是，我认为考虑您拥有的数据类型是否是最好的表示是有意义的。

两者`Detail`和`Summary`共享两个属性 (`State`和`Sections`) 的事实可能意味着，`Report`无论报告的类型如何，都可以共享 a 的某些共同部分（并且报告可以添加`Divisions`，如果它是详细的，或者只是`Office`如果是摘要） .

使用以下内容可以更好地表达类似的内容（`Section`保持不变，因此我没有将其包含在代码段中）：

```
type ReportInformation = 
  | Divisions of string list
  | Office of string

type Report = 
  { State       : string;
    Sections    : Section list 
    Information : ReportInformation } 
```

如果你使用这种风格，你可以只访问`report.State`和`report.Sections`（做共同部分的处理）然后你可以匹配上`report.Information`做不同部分的处理。

**编辑 -**回答 Jeff 的评论 - 如果数据结构已经固定，但视图已更改，您可以使用 F#*活动模式*编写“适配器”，使用我上面描述的视图提供对旧数据结构的访问：

```
let (|Report|) = function
  | Detail dt -> dt.State, dt.Sections
  | Summary st -> st.State, st.Sections

let (|Divisions|Office|) = function
  | Detail dt -> Divisions dt.Divisions
  | Summary st -> Office st.Office 
```

第一个活动模式总是成功并提取公共部分。第二个允许您区分这两种情况。然后你可以写：

```
let processReport report =
  let (Report(state, sections)) = report
  // Common processing
  match report wiht
  | Divisions divs -> // Divisions-specific code
  | Office ofc -> // Offices-specific code 
```

这实际上是 F# 活动模式如何提供允许您隐藏实现细节的抽象的一个很好的示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T16:50:12.607

kvb 的答案很好，可能是我会使用的。但是您表达问题的方式听起来像是您想要经典继承。

```
type ReportPart(state, sections) =
  member val State = state
  member val Sections = sections

type Detail(state, sections, divisions) =
  inherit ReportPart(state, sections) 
  member val Divisions = divisions

type Summary(state, sections, office) =
  inherit ReportPart(state, sections) 
  member val Office = office 
```

然后你可以做你所期望的：

```
for report in reports do
  match report with
  | :? Detail as detail ->   //use detail.Divisions
  | :? Summary as summary -> //use summary.Office
  //use common properties 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T16:38:03.623

当您使用单独的函数匹配和处理or值时，您可以在每个联合案例中对`Detail`or记录进行模式匹配，例如`Summary``Divisions``Office`

```
let blah =
    for report in reports do
        let out = match report with
        | Detail({ State = state; Divisions = divisions; Sections = sections } as d) -> 
            Detail({ d with Divisions = (handleDivisions divisions) })
        | Summary({ State = state; Office = office; Sections = sections } as s) -> 
            Summary( { s with Office = handleOffice office })

    //process out 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T16:48:07.950

您可以重构代码以使每个公共字段都有一个实用函数并使用嵌套模式匹配：

```
let handleReports reports =
   reports |> List.iter (function 
                  | Detail {State = s; Sections = ss; Divisions = ds} ->
                     handleState s
                     handleSections ss
                     handleDivisions ds
                  | Summary {State = s; Sections = ss; Office = o} ->
                     handleState s
                     handleSections ss
                     handleOffice o) 
```

您还可以在不同的功能中分别过滤`Detail`和处理它们：`Summary`

```
let getDetails reports =
    List.choose (function Detail d -> Some d | _ -> None) reports 

let getSummaries reports =
    List.choose (function Summary s -> Some s | _ -> None) reports 
```

# virtualenv - virtualenv 只是修改 pythonpath 吗？

> ID：13804445
> 
> 赞同：0
> 
> 时间：2012-12-10T15:57:13.207
> 
> 标签：virtualenv

我正在将 Django 与 virtualenv 一起部署在生产服务器上，并且无法在服务器上激活 virtualenv

```
source .../bin/activate 
```

我做了一些研究，发现pythonpath会根据我们是否在virtualenv中而改变。

sys.path（激活 virtualenv）

```
['',
'/.../virtualenv/test_path/bin',
'/.../virtualenv/test_path/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
'/.../virtualenv/test_path/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
'/.../virtualenv/test_path/lib/python2.7',
'/.../virtualenv/test_path/lib/python2.7/plat-linux2',
'/.../virtualenv/test_path/lib/python2.7/lib-tk',
'/.../virtualenv/test_path/lib/python2.7/lib-old',
'/.../virtualenv/test_path/lib/python2.7/lib-dynload',
'/usr/lib/python2.7',
'/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk',
'/.../virtualenv/test_path/local/lib/python2.7/site-packages',
'/.../virtualenv/test_path/local/lib/python2.7/site-packages/IPython/extensions'] 
```

sys.path（不激活 virtualenv）：

```
['',
'/usr/local/bin',
'/usr/lib/python2.7',
'/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk',
'/usr/lib/python2.7/lib-old',
'/usr/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages/PIL',
'/usr/lib/python2.7/dist-packages/gst-0.10',
'/usr/lib/python2.7/dist-packages/gtk-2.0',
'/usr/lib/pymodules/python2.7',
'/usr/local/lib/python2.7/dist-packages/IPython/extensions'] 
```

只需将 pythonpath 更改为指向 virtualenv 就足够了

```
.../python2.7/site-packages 
```

文件夹以获得与运行相同的结果

```
source .../bin/activate 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:22:42.367

不它不是。virtualenv 不仅仅是关于`site-packages`，它是关于一个完整的孤立的 python 环境。

这样做`source /path/to/venv/bin/activate`只是更改您的`$PATH`环境变量以包含您的 virtualenv`bin`目录作为第一次查找。

如果你`python`直接调用，它只是一个快捷方式：

```
$ /path/to/venv/bin/python myscript.py 
```

如果你调用`pip`一个激活的virtualenv，它是一样的：

```
$ /path/to/venv/bin/pip install XYZ 
```

# java - JGoodies Binding：使用 JCombobox 和默认值绑定对象

> ID：13804449
> 
> 赞同：0
> 
> 时间：2012-12-10T15:57:26.587
> 
> 标签：java, swing, data-binding, jcombobox, jgoodies

我有以下问题：

我想在我的视图中将一个 JCombobox 与我的模型“DomainModel”绑定，以便以后可以使用“AnotherModel”获取它。getModel();

我写了一个自己的 CellRenderer 让它看起来像“ID - Name”。但是当我选择 Combobox 的值并调用 'AnotherModel'.getModel 时，该值不会保存在其中。

不能用 JGoodies Bindings 绑定复杂的数据类型吗？使用 String 可以正常工作，但我想绑定一个“DomainModel”对象

这是简化的代码：

风景：

```
public class View extends JPanel {

    private JComboBox<DomainModel> cmbValueModel;

    public View(AntotherModel antotherModel,  List<DomainModel> manyDomainModels) {

    PresentationModel<DomainModel> domainModel = new PresentationModel<DomainModel>();
    domainModel.setBean(antotherModel.getModel());

    cmbValueModel = BasicComponentFactory.createComboBox(new SelectionInList<DomainModel>(manyDomainModels, domainModel.getModel(DomainModel.PROPERTYNAME_NAME)));

    Bindings.bind(cmbValueModel, new SelectionInList<>(), "");
    cmbValueModel.setRenderer(new DefaultListCellRenderer(){

        @Override
        public Component getListCellRendererComponent(JList<?> list,
                Object value, int index, boolean isSelected,
                boolean cellHasFocus) {

            return super.getListCellRendererComponent(list, value == null ? null : ((DomainModel)value).getId() + " - " + ((DomainModel)value).getName() , index, isSelected,
                    cellHasFocus);
        }

    });

    }

} 
```

域名：

```
public class DomainModel extends Model{

public static final String PROPERTYNAME_NAME = "name";

@GeneratedValue
private int id;
private String name;

public void setName(String name) {
    String oldVal = this.name;
    this.name = name;
    changeSupport.firePropertyChange(PROPERTYNAME_NAME, oldVal, name);
}

public String getName(){
    return name;
}

public int getId(){
    return id;
}

} 
```

另一种型号：

```
 public class AntotherModel extends Model{

        public static final String PROPERTYNAME_MODEL = "model";

        private int id;
        private DomainModel model;

        public int getId() {
            return id;
        }
        public DomainModel getModel() {
            return model;
        }
        public void setId(int id) {
            this.id = id;
        }
        public void setModel(DomainModel model) {
            DomainModel oldVal = this.model;
            this.model = model;
            changeSupport.firePropertyChange(PROPERTYNAME_MODEL, oldVal, model);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:52:17.527

您的代码无法编译或运行，因此很难弄清楚您要做什么。如果这是您所追求的，下面的示例显示一个组合框绑定到 DomainModels 列表；您可以将 valueChangeListener 添加到 selectionInList 以在用户更改选择时执行某些操作。高温高压

```
import java.awt.Component;
import java.util.ArrayList;
import java.util.List;

import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;

import com.jgoodies.binding.adapter.BasicComponentFactory;
import com.jgoodies.binding.list.SelectionInList;

public class View extends JPanel {

    private JComboBox comboBox;

    public View(AnotherModel anotherModel, List<DomainModel> manyDomainModels) {
        final SelectionInList<DomainModel> selectionInList = new SelectionInList<DomainModel>(manyDomainModels);
        comboBox = BasicComponentFactory.createComboBox(selectionInList);

        comboBox.setRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                return super.getListCellRendererComponent(list, value == null ? null : ((DomainModel) value).getId() + " - "
                    + ((DomainModel) value).getName(), index, isSelected, cellHasFocus);
            }
        });

        add(comboBox);
    }

    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        final AnotherModel anotherModel = new AnotherModel();
        final List<DomainModel> manyDomainModels = new ArrayList<DomainModel>();
        final DomainModel domainModel1 = new DomainModel();
        domainModel1.setName("foo");
        final DomainModel domainModel2 = new DomainModel();
        domainModel2.setName("bar");
        final DomainModel domainModel3 = new DomainModel();
        domainModel3.setName("baz");
        manyDomainModels.add(domainModel1);
        manyDomainModels.add(domainModel2);
        manyDomainModels.add(domainModel3);
        frame.getContentPane().add(new View(anotherModel, manyDomainModels));
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# simulator - Windows Phone 8 模拟器在右侧显示数字

> ID：13804452
> 
> 赞同：1
> 
> 时间：2012-12-10T15:57:32.350
> 
> 标签：simulator, windows-phone-8

> **可能重复：**
> [我的 Windows Phone Silverlight 应用右侧的这些数字是什么？](https://stackoverflow.com/questions/5393485/what-are-these-numbers-on-the-right-side-of-my-windows-phone-silverlight-app)

我使用默认模板创建了一个 Windows Phone 8 应用程序。但是，当我运行它时，模拟器会在模拟器的右侧显示很多数字。如何删除这些数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T15:57:32.350

显示的数字实际上是一个帧率计数器。附加调试器时，默认项目模板会启用帧率计数器。要隐藏帧率计数器，请转到**App.xaml.cs**并删除（或注释）以下行：

`Application.Current.Host.Settings.EnableFrameRateCounter = true;`

当然，您也可以将值设置为`false`。

完成此操作后，再次构建并运行您的应用程序，数字将不再显示。

# android - 单击侦听器无法解决键入

> ID：13804457
> 
> 赞同：0
> 
> 时间：2012-12-10T15:57:51.873
> 
> 标签：android

我是初学者，我正在尝试为 android 制作一个简单的计算器，但他给了我一个语法错误

```
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    final EditText e  = (EditText)findViewById(R.id.value);
    final EditText e2 = (EditText)findViewById(R.id.value2);

    getMenuInflater().inflate(R.menu.activity_main, menu);
    Toast.makeText(this,"Welcome",Toast.LENGTH_LONG).show();
    Button welcome = (Button)findViewById(R.id.x);
    welcome.setText("push ");
    welcome.setonclickListener(new View.onclickListener() {

        @Override
        public void onclick(View v) {
            int v1 = Integer.parseInt(e.getText().toString());
            int v2 = Integer.parseInt(e2.getText().toString());
            int v3 = v1 + v2 ;
            Toast.makeText(MainActivity.this,"= " + v3, Toast.LENGTH_LONG).show();

             return true;

         }
         });

} 
```

}

[http://imageshack.us/photo/my-images/24/problem00.png/](http://imageshack.us/photo/my-images/24/problem00.png/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:00:03.433

试试：`View.OnClickListener()`用大写的 O 和 C。同样的事情用`setOnClickListener`. 这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:06:52.290

使用`OnClickListener()`. 您不必指定`View`. 此外，请确保在覆盖的`onClick()`方法中使用大写的“C”。确保包含`import android.view.View.OnClickListener;`在您的导入部分中。Eclipse 应该为您服务，但如果不是，或者您正在使用 Eclipse，请将其手动添加到类的顶部。如果您只是执行以下操作，那应该对您有用：

```
 welcome.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            int v1 = Integer.parseInt(e.getText().toString());
            int v2 = Integer.parseInt(e2.getText().toString());
            int v3 = v1 + v2;
            Toast.makeText(MainActivity.this, "= " + v3, Toast.LENGTH_LONG).show();

            return true;

        }
    }); 
```

--------为完整示例编辑--------

在你的项目中，你有你的主要活动。该活动应使用 XML 资源中的布局。该 XML 资源可能看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout> 
```

在您的活动类中，您必须将该资源设置为活动的内容视图，使用`setContentView(resID)`. 假设您的 XML 文件名为 helloworld.xml，您将`setContentView(R.layout.helloworld)`在`onCreate(Bundle s)`调用`super.onCreate(s)`.

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.helloworld);

} 
```

一旦您设置了活动的视图，您就可以访问该布局的元素（EditTexts、按钮等）。为此，您必须创建 EditText 和 Button 对象（您已经在发布的代码中这样做了，我们只需要在其他地方进行）。继续我的示例，您可以在`onCreate(Bundle s)`函数中执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.helloworld);

    EditText et1 = (EditText) findViewById(R.id.edittext1);
    EditText et2 = (EditText) findViewById(R.id.edittext2);
    Button but = (Button) findViewById(R.id.button1);

    but.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v)
            et2.setText(et1.getText().toString());
            // this will set the second EditText's text to whatever is in
            // the first EditText, but you could do anything with the value.
        }
    }
} 
```

如果要根据菜单项选择更改按钮的功能，则必须覆盖`onOptionsItemSelected(MenuItem item)`除`onCreateOptionsMenu(Menu menu)`. `onCreateOptionsMenu(Menu menu)`只需为要打开的菜单按钮创建菜单。`onOptionsItemSelected(MenuItem item)`实际上决定了当你选择一个菜单项时要做什么。

请参阅此页面上的教程以获取完整的概要[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)，但这里是他们的示例和一些解释。这些示例不是来自我上面的示例应用程序，而是来自 Android Developer API 页面。我强烈建议您阅读他们的教程。

您所要做的`onCreateOptionsMenu(Menu menu)`就是告诉 Android 从哪里获取菜单并扩充该资源。这意味着在项目目录中的文件夹中调用`game_menu`了一个 XML 文件。`menu``res`

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.game_menu, menu);
    return true;
} 
```

`onOptionsItemSelected(MenuItem item)`是菜单逻辑的核心所在，让您可以根据选择的菜单项执行不同的任务。在此示例中，`game_menu`上述函数中提到的 XML 文件具有名为`new_game`和的菜单项`help`。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.new_game:
            newGame();
            return true;
        case R.id.help:
            showHelp();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# sql - AddDays 是 LINQ to SQL

> ID：13804462
> 
> 赞同：0
> 
> 时间：2012-12-10T15:58:11.670
> 
> 标签：sql, vb.net, linq

我正在尝试在 Where 子句中使用 LINQ to SQL 中的 AddDays 函数。

我需要返回所有大于当前日期加上用户定义范围的结果。

这是我的代码。

```
Where (DateTime.Now >= DateTime.Now.AddDays(UserEnteredDaysToAdd) 
```

我究竟做错了什么？还是有可能？

谢谢，

**编辑：** 对不起，我犯了一个错误。我想获取当前日期和用户输入或存储在数据库中的天数之间的所有记录。

所以它应该是， Where (StockOrderDate >= DateTime.Now.AddDays(UserEnteredDaysToAdd))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:02:08.020

让我们看看您的查询：

```
Where (DateTime.Now >= DateTime.Now.AddDays(UserEnteredDaysToAdd)) 
```

除了没有正确的身体外，您还要检查今天是否大于或等于今天加上 x 天。如果您不允许`UserEnteredDaysToAdd`.

您的数据结构（结果）必须有一些您想要检查的日期属性，例如`ResultDate`，那么您的查询看起来像

```
IEnumerable<ResultType> results;
...
var resultsAfterDate = results.Where(r => r.ResultDate >= DateTime.Now.AddDays(UserEnteredDaysToAdd)); 
```

# java - 1 服务器 2 客户端 java

> ID：13804463
> 
> 赞同：0
> 
> 时间：2012-12-10T15:58:14.863
> 
> 标签：java, multithreading, webserver, udp, client

我想制作一个有 2 个玩家的游戏。我将使用 udp 服务器和 2 个客户端，我不知道如何将 2 个客户端同时连接到 1 个服务器以及它们将如何通信。我将只使用java。最后鼠标单击将如何与服务器同步

```
 public void mousePressed(MouseEvent event) { 
  }  
  public void mouseReleased(MouseEvent event) { 
  }  
  public void mouseEntered(MouseEvent event) { 
  }  
  public void mouseExited(MouseEvent event) { 
  } 
```

服务器

```
public class Provider {
public ServerSocket providerSocket;
Socket connection = null;
ObjectOutputStream out;
ObjectInputStream in;
String message;
String[] torino={"null","null"};
Provider() {}
void run()
{
    try {
        //1\. creating a server socket (8080=port , 2 =number of connections)
        providerSocket = new ServerSocket(8080, 2 );
        //2\. Wait for connection
        System.out.println("Waiting for connection");
        connection = providerSocket.accept();
        System.out.println("Connection received from " + connection.getInetAddress().getHostName());
        //3\. get Input and Output streams
        out = new ObjectOutputStream(connection.getOutputStream());
        // flush= clean the object out
        out.flush();
        in = new ObjectInputStream(connection.getInputStream());
        sendMessage("Connection successful");
        //4\. The two parts communicate via the input and output streams
        try {
            //take the message from client
            message = (String)in.readObject();
            if (torino[0]=="null") 
                torino[0]=message;
            } else if (torino[1]=="null") {
                torino[1]=message;              
            }
        }
        catch(ClassNotFoundException classnot) {
            System.err.println("Data received in unknown format");
        }
    } catch(IOException ioException) {
        ioException.printStackTrace();
    }
    finally {
        //4: Closing connection
        try {
            in.close();
            out.close();
            providerSocket.close();
        } catch(IOException ioException) {
            ioException.printStackTrace();
        }
    }
}
//method to send messages from server to clients
void sendMessage(String msg)
{
    try {
        out.writeObject(msg);
        out.flush();
        System.out.println("server>" + msg);
    }
    catch(IOException ioException) {
        ioException.printStackTrace();
    }
}

//main method
public static void main(String args[])
{
    Provider server = new Provider();
    while(true) {
        server.run();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:52:36.933

所以现在您可以在代码中看到服务器套接字正在等待连接。那就是 accept() 方法。此时，您需要创建一个新的线程来处理连接，并让主线程继续等待另一个连接。您可能想要跟踪变量中建立的连接数，例如 numConnections。

```
 while(numConnections < 2){
       connection = providerSocket.accept();
       Thread t = new Thread(new ConnectionHandler(connection));
       t.start();
       numConnections++;
 } 
```

现在您的 ConnectionHandler 类将完成连接的工作：

```
 class ConnectionHandler implements Runnable{
        Socket connection;
        public ConnectionHandler(Socket connection){
             this.connection = connection;
        }

        public void run(){
           //here you do all the code associated with handling the connection
           //such as your Object Streams and so on.
        }
 } 
```

一个快速的谷歌搜索会出现很多教程和例子，比如[这个](http://tutorials.jenkov.com/java-multithreaded-servers/multithreaded-server.html)。还有一些 YouTude 视频。您可能想从其中之一开始。

# matlab - 计算短时窗傅里叶变换

> ID：13804466
> 
> 赞同：0
> 
> 时间：2012-12-10T15:58:24.107
> 
> 标签：matlab, fft

任何人都可以提出一种方法来计算给定信号的短时间加窗傅里叶变换，也称为加窗傅里叶变换，对具有改变周期性的信号进行计算？考虑这个示例数据系列：

```
t = 1:365;
x = cos((2*pi)/12*t)+randn(size(t)); 
```

我了解该方法背后的原理，但是尝试在matlab中实现它是另一回事。我这个例子不足以提供答案，任何对具有不同周期性的信号的解决方案都将不胜感激。

# android - 如何从相关应用程序内部使用自定义 url 启动意图？

> ID：13804467
> 
> 赞同：1
> 
> 时间：2012-12-10T15:58:23.027
> 
> 标签：android, android-intent, android-webview, intentfilter

我有一个注册自定义 url 方案的 android 应用程序（比如说 app://）

在`onResume()`我的主要活动的方法中，我通过调用从 url 获取数据`getIntent().getData()`。

当我浏览到包含此类链接（如 ）的网页时，`app://action/1234`然后`getIntent().getData()`返回我需要采取适当措施的信息。没关系。

现在我想在我的应用程序中有一个 WebView 做同样的事情。这是我的代码：

```
WebView banner = ...
banner.setWebViewClient(new WebViewClient() {

    @Override
    public void onLoadResource(WebView view, String url) {

        if (url.startsWith("app://")) {

            try {
                Intent i = Intent.parseUri(url, Intent.URI_INTENT_SCHEME);
                startActivity(i);

                return true;

            } catch (URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return false;

        }
    }
} 
```

当我单击 WebView 中的链接时，`onResume()`主要活动的方法称为 BUT `getIntent().getData()`returns `null`。

我猜

```
Intent i = Intent.parseUri(url, Intent.URI_INTENT_SCHEME);
startActivity(i); 
```

不是这样做的好方法。

我应该如何重现单击浏览器中的链接时发生的相同事件？

编辑：

我的活动已经发生`android:launchMode="singleTop"`并且似乎是我的问题的原因，但如果我不设置启动模式，则会启动另一个活动副本（我不想要那个）。我试图通过覆盖来处理意图，`onNewIntent()`并且在赋予它的意图中我可以看到数据。但是我希望我的应用程序以相同的方式从其内部或从另一个应用程序启动时做出反应

这样做安全吗？：

```
@Override
public void onNewIntent(Intent intent) {
    getIntent().setData(intent.getData());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:34:56.133

```
Intent i=new Intent(Intent.ACTION_VIEW, Uri.parse(url)); 
```

应该这样做。

# android - 使用 WebKit 进行本地（无互联网访问）数据收集？

> ID：13804469
> 
> 赞同：0
> 
> 时间：2012-12-10T15:58:29.043
> 
> 标签：android, ios, webkit

我的 CTO 有这样的想法，如果我们在新的移动应用程序上使用 WebKit，我们可以将本地存储的 XML 渲染到屏幕上，然后将用户输入保存在本地的数据库或文件中。（不能访问服务器）

有人见过以这种方式使用 WebKit 吗？

谢谢。

# vb.net - 在 VB 2010 中的表单上显示输出

> ID：13804473
> 
> 赞同：1
> 
> 时间：2012-12-10T15:58:47.347
> 
> 标签：vb.net, winforms, printing

我正在设计一个窗体。我有输出显示在它自己的表单上。尝试使用打印，但它不起作用。我怎么做？

我没有打印表格。

添加：我需要在每个数字旁边显示 3 个带有文本字符串的数字。我想以一种在表单中显示或在表单中显示标签的方式执行此操作，而不会覆盖以前的结果。

例子：

```
 3 (wrong) 1 (right) 8 (wrong)
    2 (wrong) 1 (right) 5 (right)
    9 (right) 1 (right) 5 (right) 
```

补充：感谢大家的帮助。还有一个问题，我认为我很好。

我正在考虑在循环中做这样的事情，问题是我不能将一个字符串和一个 int 一起添加来创建一个新的 var：Xnum1 = Xnum1 + 50

```
 Xnum2 = Xnum1 + ".0F"

    Ynum1 = Ynum1 + 50

    Ynum2 = Ynum1 + ".0F" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:09:27.203

在 VB6 中，您可以使用该`Print`语句绘制到窗体的表面。但是，在 VB.NET 中，您应该使用该 `Form.CreateGraphics`方法创建一个新`Graphics`对象，该对象可用于绘制到窗体的表面。例如：

```
Private Sub PrintText(text As String, x As Single, y As Single)
    Dim g As Graphics = Me.CreateGraphics()
    g.DrawString(text, New Font("Arial", 16), New SolidBrush(Color.Black), New PointF(x, y))
End Sub 
```

`Print`这与使用 VB6语句最接近。

但是，我强烈建议使用控件来显示数据。看起来您需要显示的数据，一个简单的多行文本框或标签就足够了。例如：

```
Private Sub AppendResult(index As Integer, right As Boolean)
    If right Then
        TextBox1.Text = TextBox1.Text & " " & index.ToString() & " (right)"
    Else
        TextBox1.Text = TextBox1.Text & " " & index.ToString() & " (wrong)"
    End If
End Sub 
```

如果你想变得更花哨，你可以考虑使用数据网格、列表框、列表视图，甚至是表格​​布局控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:24:50.683

我相信最有效的方法是使用6 列的[tableLayoutPanel 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)在每个单元格中添加一个标签，在第一个单元格中显示数字，在第二个单元格中显示该数字的指示符（正确/错误）。对第二个和第三个数字做同样的事情。（第二个数字=第三个和第四个单元格，第三个数字=第五个和第六个单元格）

对于下一组数字，您可以在每个单元格中添加带有标签的新行。

我将添加一些代码以使我的答案更专业。

首先，在表单中添加 tableLayoutPanel。您可以随意调整它的大小（使其宽度足够长以处理数据）删除 lastRow 然后添加列（您希望有 6 列）。您将列的大小编辑为 Percentage =16.67%

```
Public Class Form1

Private rowIndex
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    For i = 0 To 4 Step 2
        Dim val As Integer = 3
        AddLabels(val, i, 0)
    Next
    For i = 1 To 5 Step 2
        Dim val As String = "right"
        AddLabels(val, i, 0)
    Next
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    rowIndex = rowIndex + 1

    Me.TableLayoutPanel1.RowStyles.Add(New RowStyle(SizeType.Absolute, 30))
    Me.TableLayoutPanel1.Height = Me.TableLayoutPanel1.Height + 30
    For i = 0 To 4 Step 2
        Dim val As Integer = 3 'here you have to put your number
        AddLabels(val, i, rowIndex)
    Next
    For i = 1 To 5 Step 2
        Dim val As String = "right" 'here you have to put your indicator
        AddLabels(val, i, rowIndex)
    Next

End Sub

Private Sub AddLabels(ByVal lblValue As String, ByVal column As Integer, ByVal row As Integer)
    Dim lblHeader As New Label
    lblHeader.AutoSize = True
    lblHeader.Margin = New Padding(0)
    lblHeader.BackColor = Color.Transparent
    lblHeader.TextAlign = ContentAlignment.MiddleLeft
    lblHeader.Dock = DockStyle.None
    lblHeader.Text = lblValue

    'Put the lblHeader in the right cell
    Dim lblHeaderPos As New TableLayoutPanelCellPosition(column, row)
    TableLayoutPanel1.SetCellPosition(lblHeader, lblHeaderPos)
    TableLayoutPanel1.Controls.Add(lblHeader)

End Sub 
```

如果您遇到任何问题，请告诉我。

此外，如果您不知道要添加多少行，请将 tableLyoutPanel 放在面板中。使面板的属性 AutoScroll=True 然后您可以添加无限数量的新行。

# css - 仅当链接没有“文件夹”类时，如何进行悬停？

> ID：13804475
> 
> 赞同：3
> 
> 时间：2012-12-10T15:58:50.933
> 
> 标签：css

我有以下内容：

```
<a class="folder"><span>Background</span></a> 
```

和以下CSS：

```
 ul.arbo li > a:hover span,
        ul.arbo li > a.current span {
            background: #999999;
        } 
```

如果链接具有文件夹类，我如何修改 CSS 使其不适用。换句话说，它不适用于上述 HTML

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:02:07.967

您可以在css中使用否定伪类选择器[`:not`](http://www.w3.org/TR/css3-selectors/#negation)，如下所示：

```
:not(.folder) {

} 
```

请参阅工作[**演示**](http://jsfiddle.net/8r4GP/)（由 insertusernamehere 提供）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:02:09.373

CSS3 有`:not()`选择器，您可以将其添加到您的 CSS 中（或者您可以使用 jQuery 来执行此操作，无论哪种方式）。请注意，这仅适用于较新的浏览器。

[http://www.w3schools.com/cssref/sel_not.asp](http://www.w3schools.com/cssref/sel_not.asp)

```
:not(.folder) 
```

在你的例子中：

```
ul.arbo li > a:not(.folder):hover span,
ul.arbo li > a:not(.folder).current span { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:05:44.850

你不需要 JavaScript 或 jQuery，你也可以在没有 CSS3 的情况下做到这一点（这可能与你计划支持的浏览器有关）。

只需添加另一条规则以防止背景在某些元素上发生变化，如下所示：

```
ul.arbo li > a.folder:hover span
{
    background: inherit;   
} 
```

[工作示例。](http://jsfiddle.net/6qSe4/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:06:55.283

```
:not(.folder) {

} 
```

是一个很好的解决方案。不要忘记检查你想要什么浏览器也可以工作！

:not 选择器是 CSS3 选择器，并非所有浏览器都支持它...例如 IE8 和更早版本不支持 :not 选择器。

# android - 如何在不等待 Android 上的位置更改的情况下获取当前 GPS 位置？

> ID：13804481
> 
> 赞同：4
> 
> 时间：2012-12-10T15:58:59.420
> 
> 标签：android, gps, location

我想使用 gps 提供程序获取设备的当前位置，但这实际上是在等待 gps 位置发生变化。

所以我有一个简单的应用程序来监听位置变化。这可以`NETWORK_PROVIDER`立即使用，但是`GPS_PROVIDER`我等了 15 分钟并且没有发生任何动作。

我正在使用 API 级别 8。

```
public class MainActivity extends Activity {
    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) this.findViewById(R.id.textView1);
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll = new mylocationlistener();

        //lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll); // this works fine
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
    }

    private class mylocationlistener implements LocationListener {
        public void onLocationChanged(Location location) {
            Date today = new Date();
            Timestamp currentTimeStamp = new Timestamp(today.getTime());
            if (location != null) {
                Log.d("LOCATION CHANGED", location.getLatitude() + "");
                Log.d("LOCATION CHANGED", location.getLongitude() + "");
                String str = "\n CurrentLocation: " + "\n Latitude: "
                        + location.getLatitude() + "\n Longitude: "
                        + location.getLongitude() + "\n Accuracy: "
                        + location.getAccuracy() + "\n CurrentTimeStamp "
                        + currentTimeStamp + "\n Altitude: "
                        + location.getAltitude() + "\n Bearing"
                        + location.getBearing() + "\n Speed"
                        + location.getSpeed() + "\n ";
                Toast.makeText(MainActivity.this, str, Toast.LENGTH_LONG)
                        .show();
                tv.append(str);
            }
        }

        public void onProviderDisabled(String provider) {
            Toast.makeText(MainActivity.this, "Error onProviderDisabled",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String provider) {
            Toast.makeText(MainActivity.this, "onProviderEnabled",
                    Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            Toast.makeText(MainActivity.this, "onStatusChanged",
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

我确实将许可放在清单中，所以这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:29:17.613

你在里面测试吗？除非您在外面，否则您可能根本无法获得 GPS 锁定，这意味着手机将尽可能多地尝试获得锁定（因为您在 requestLocationUpdates 调用中指定了最短时间和距离为 0 和 0 ）。

不幸的是，您只需要等待设备获得 GPS 锁定，如果不是因为信号不足，您将继续等待。缓解这种情况的第一件事是尝试获取 GPS 提供商的最后一个已知位置。如果设备最近有 GPS 锁定并存储了一个位置，这将返回一个位置：

```
Location lastLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

除此之外，您应该尝试从网络提供商那里获取位置，因为正如您已经观察到的那样，这可能会比 GPS 更快地返回位置。这是因为位置数据（手机信号塔和 WIFI）来源丰富，只要您有无线信号，就可以在任何地方（包括室内）使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T00:09:25.273

```
try{
                LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

                //Location location = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                Location location = manager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

                double longitude = location.getLongitude();
                double latitude = location.getLatitude();
                String stlongitude = Double.toString(longitude);
                String stlatitude = Double.toString(latitude);

                TextView celllocation = (TextView) findViewById(R.id.txtCellLocation);
                celllocation.setText(stlatitude + " , " + stlongitude);

                //String uri = String.format(Locale.ENGLISH, "geo:%f,%f", latitude, longitude);
                //Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
                //startActivity(intent);
    }

    catch (Exception a) {
        LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Location location = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 

        double longitude = location.getLongitude();
        double latitude = location.getLatitude();
        String stlongitude = Double.toString(longitude);
        String stlatitude = Double.toString(latitude);

        TextView celllocation = (TextView) findViewById(R.id.txtCellLocation);
        celllocation.setText(stlatitude + " , " + stlongitude);

    } 
```

# android - Android 中正确的 HTTP POST 请求

> ID：13804483
> 
> 赞同：0
> 
> 时间：2012-12-10T15:59:09.870
> 
> 标签：android, http, request

嗨，我如何使用这个基于 json 的 API 在 android 中正确发出 HTTP post 请求。

```
curl -H "Content-type: application/json" -X POST \
-d '{    
  "service_key": "e93facc04764012d7bfb002500d5d1a6",
  "incident_key": "srv01/HTTP",
  "event_type": "trigger",
  "description": "FAILURE for production/HTTP on machine srv01.acme.com"
  }
}' \
"https://events.pagerduty.com/generic/2010-04-15/create_event.json" 
```

我有这个代码，但它给了我 400 的状态错误 - [https://gist.github.com/26af7af09b509c0e8c2a#comments](https://gist.github.com/26af7af09b509c0e8c2a#comments)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:03:29.267

您是否请求访问网络的权限？请参阅此问题（可能重复）：

[使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

需要在您的清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:37:36.900

我在这里的其他地方得到了一些代码，它起作用了...... :)

```
public void requestAction(String service_key, String event_type, String incident_key, String description) 
{
    HttpClient hc = new DefaultHttpClient();
    String message;
    HttpPost p = new HttpPost("https://events.pagerduty.com/generic/2010-04-15/create_event.json");
    JSONObject object = new JSONObject();
    try 
    {
        object.put("service_key", service_key); 
        object.put("event_type", event_type);
        object.put("incident_key", incident_key);
        object.put("description","PI RedPhone: "+description);
    } 
    catch (Exception ex) 
    { }
    try 
    {
        message = object.toString();
        p.setEntity(new StringEntity(message, "UTF8"));
        p.setHeader("Content-type", "application/json");
        HttpResponse resp = hc.execute(p);
        Log.d("Status line", "" + resp.getStatusLine().getStatusCode());
    } catch (Exception e) 
        {e.printStackTrace();}

} 
```

# apache - 通过代理服务器使用具有不同会话的多个 iframe

> ID：13804484
> 
> 赞同：0
> 
> 时间：2012-12-10T15:59:13.090
> 
> 标签：apache, proxy, reverse-proxy

我正在使用 javascript/jQuery 开发一个自动化工具。

为了操纵 DOM，我通过代理服务器对所有 iframe/浏览器访问进行了隧道访问，以使它们都位于同一个域中。

这一切都很好！但是我的端点应用程序是一个事务性 jsp/servlet 数据库，我想对它进行多次访问。

我想，因为代理“隧道”通过代理的所有访问都具有相同的会话，这是不可取的，因为我需要对应用程序进行多次访问，为此我必须创建不同的会话。

我试图弄清楚如何为每个指向通过相同（？）代理服务器的相同 Web 应用程序的 Iframe/浏览器实现唯一的 sessionID，大致：

```
iframe ---\
iframe -----> browser ---> apache proxy ---> jsp transactional app
iframe ---/ 
```

我在 FireFox (FireBug) 上嗅探流量，所有 iframe 都具有相同的会话 ID。这不仅仅在 iframe 上，即使我启动另一个浏览器并使用通过代理传递的链接，我也会保留相同的会话 ID。

使用 Apache http 服务器 2.2.20 (win32)。

代理配置（如果有用）：

```
ProxyPass  /bbb http://xxx/bbb/
ProxyPassReverse /bbb/ http://xxx/bbb/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:10:32.403

**iframe src 属性是否指向同一个域或子域？**

请记住，Session 是通过 cookie 实现的，并且 cookie 通过它们所属的域和子域共享，例如：

如果 Cookie 属于*yourdomain.com* ，则*subdomain.yourdomain.com*可以访问它

但

如果 Cookie 属于*subdomain.yourdomain.com*那么*yourdomain.com*或*subdomain1.subdomain.yourdomain.com* **没有**访问它

它是 iframe 还是其他浏览器窗口或选项卡都没关系......

# forms - ZF2 如何在布局中设置搜索表单

> ID：13804501
> 
> 赞同：1
> 
> 时间：2012-12-10T16:00:24.353
> 
> 标签：forms, layout, zend-framework2

在网站的任何页面上可见的 layout.ptml 中使用 Zend Framework 2 设置（搜索）表单的正确方法是什么？

提前致谢。

缺口

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T07:24:14.783

通过 EventManager 为 ZF2 中的所有布局设置任何变量非常简单，只需附加 EVENT_RENDER 事件，例如：

```
class Module
{
    public function onBootstrap($e)
    {
        $app = $e->getParam('application');
        $app->getEventManager()->attach(MvcEvent::EVENT_RENDER, array($this, 'setFormToView'), 100);
    }

    public function setFormToView($event)
    {
        $form = new MyForm();
        $viewModel = $event->getViewModel();
        $viewModel->setVariables(array(
            'form' => $form,
        ));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T11:42:46.670

对于布局中的视图使用：

```
 <?php if ($user = $this->identity()): ?>
        <?php echo 'Login with user' . $this->escapeHtml($user->nome); ?>
        | <a href="<?php echo $this->url('auth/default', array('controller' => 'index', 'action' => 'logout'));?>"><?php echo $this->translate('Sair'); ?></a>
    <?php else: ?>
    <?php
        echo $this->form()->openTag($form);
        echo "<h5>Forneça seu login e senha </h5>";
        echo $this->formRow($form->get('username'));
        echo $this->formRow($form->get('password'));
        echo $this->formRow($form->get('rememberme'));
        echo $this->formSubmit($form->get('submit'));
        echo $this->form()->closeTag();
    ?>
    <?php endif; ?> 
```

# javascript - 如果我的模块依赖于另一个模块，如何使用 node.js 在客户端和服务器之间共享模块？

> ID：13804508
> 
> 赞同：1
> 
> 时间：2012-12-10T16:00:31.030
> 
> 标签：javascript, oop, node.js

这是我的 Node.js 情况：

我正在尝试在我的 Node.js 服务器和游戏浏览器之间共享代码。基本上，我想分享游戏逻辑。

假设我的游戏有一个表格，而该表格可以有玩家。我希望每个模块都是客户端和服务器都可以使用的模块。

我知道我可以做这样的事情：

```
(function(exports){

   exports.test = function(){
        return 'hello world'
    };

})(typeof exports === 'undefined'? this['Table']={}: exports); 
```

我可以用我的表得到类似的东西。但是，如果我需要在这个 Table 模块中使用 Players 怎么办？就像是：

```
(function(exports){

   exports.test = function(){
        var Player = require('./Player');
        var p1 = new Player();
    };

})(typeof exports === 'undefined'? this['Table']={}: exports); 
```

虽然这可以在 Node 中使用，但它显然不会在浏览器中使用，因为没有定义 require。如果没有 require，它可以在浏览器上运行，但不能在 Node.js 上运行。

**TL;DR**：我需要将一个模块中的代码“包含”到另一个模块中，这些代码可以由浏览器（客户端）和服务器共享。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T16:04:38.273

您可以使用 require.js 在节点和浏览器中加载模块。

[请参阅 require.js 页面上的文档](http://www.requirejs.org/docs/node.html)

# cordova - 飞溅后Phoneagap编译的应用程序黑色加载屏幕

> ID：13804510
> 
> 赞同：0
> 
> 时间：2012-12-10T16:00:38.740
> 
> 标签：cordova, jquery-mobile

哟，伙计们，

我的应用程序有问题。

我有初始屏幕图像和所有内容，它们显示得很精彩。但是......它来了:)

启动画面显示完成后，屏幕变黑，并且可能需要 2-10 秒才能显示真正的应用程序。

现在这很烦人，因为这不是好的和流畅的:)

有没有人对此有解决方案，知道我在说什么，对这个问题有一个想法，例如。等等？:)

最好的祝福

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:02:41.470

我自己做了很多测试。

我删除了所有外部 CSS 和 JS 文件，然后将其创建为 Local。

我尝试重新编写我的代码。

我删除了一些未使用的代码。

闪屏消失后，我仍然会出现黑屏。

我将接受我自己的答案，但不是作为解决方案，而是接受这很难找到解决方案。

# android - SupportMapFragment 与自定义布局，可能吗？

> ID：13804511
> 
> 赞同：4
> 
> 时间：2012-12-10T16:01:01.547
> 
> 标签：android, google-maps-android-api-2

我正在尝试使用自定义布局的 SupportMapFragment，现在以下代码有效：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        View view = super.onCreateView(inflater, container, savedInstanceState);
        // initMap();
        return view;
    } 
```

但我想改变`onCreateView()`方法来膨胀不同的布局，而不是调用`super.onCreateView()`方法。看起来像这样：

```
View view  = inflater.inflate(R.layout.fragment, container,false);
mMap = (GoogleMap)view.findViewById(R.id.mapview); 
```

但是 GoogleMap 不是，`view`所以我**不能**将它添加到 xml 中，如下所示：

```
<com.google.android.gms.maps.GoogleMap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T08:47:57.583

如果您想创建具有自定义布局的 SupportMapFragment，我更喜欢`android.support.v4.app.Fragment`从 Support Library 扩展并使用`com.google.android.gms.maps.MapView`那里的和其他视图扩展您的自定义 XML。

但要小心地将 livecycle 方法转发到这里[引用](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView)`MapView`的this 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-22T19:01:17.530

我在地图上方添加了一个 LinearLayout。我对按钮使用了这种布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:id="@+id/llPlaces"
android:orientation="horizontal"
android:background="@color/ACGris">
    <Button android:id="@+id/btn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="BUTTON1"/>
    <Button android:id="@+id/btn2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="BUTTON2"/>
    <Button android:id="@+id/btn3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="BUTTON3"/> 
```

然后我创建了一个扩展 SupportMapFragment 的类

```
public class FrgMapas extends SupportMapFragment{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View viewMain = super.onCreateView(inflater, container, savedInstanceState);
    View viewButtons = inflater.inflate(R.layout.layout_buttons, null);

    FrameLayout mainChild = (FrameLayout) ((ViewGroup)viewMain).getChildAt(0);
    mainChild.addView(viewButtons);

    Button btn1 = (Button) viewMain.findViewById(R.id.btn1);
    btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(getActivity(), "TuTa :)", Toast.LENGTH_LONG).show();
        }
    });

    return viewMain;
} 
```

希望这对你有用

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T16:04:32.517

`com.google.android.gms.maps.MapView`是一个`View`你可以嵌入到你的布局中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-28T19:48:25.027

您可以在从 SupportMapFragment 派生的类中覆盖 onCreateView。您可以调用 super.onCreateView 然后将结果插入到您膨胀或实例化的自定义 ViewGroup 中。这是一些示例代码

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    FrameLayout layout = (FrameLayout) inflater.inflate(R.layout.my_layout,
            container, false);

    View v = super.onCreateView(inflater, container, savedInstanceState);
    layout.addView(v, 0);
    return layout;
} 
```

# java - 带有 ascii 折叠的 elasticsearch 通配符查询

> ID：13804514
> 
> 赞同：4
> 
> 时间：2012-12-10T16:01:04.473
> 
> 标签：java, lucene, elasticsearch

我正在使用通配符查询搜索名称，它工作正常，但是当我们搜索 ascii 字符时，它不像用户搜索“Hélè*”时那样工作得很好，它无法搜索。

请注意，我已经创建了在名称字段上执行 ascii 折叠和小写的分析器。

当我们在 query_string 中进行搜索时，它也可以正常工作。这是否意味着通配符不分析 ascii 折叠和查询字符串呢？如果是，那么有没有办法用 ascii 实现通配符？

任何帮助将不胜感激。

谢谢，莫辛

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:29:56.580

尝试使用设置为的`field`查询。`analyze_wildcard``true`

默认情况下，elasticsearch 不会尝试分析通配符查询中的文本，它只会对某些查询进行小写。因此，您的查询正在搜索所有以开头的术语，`hélè`并且由于 ascii 折叠过滤器，索引中没有此类术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:27:39.967

在 Solr 中有一个[ReversedWildcardFilterFactory](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/analysis/ReversedWildcardFilterFactory.html)，它在索引时使用。如果查询包含通配符，则使用它时，不会将其转换为 ascii，否则将使用 ascii 进行转换和搜索。您可以在 ASCIIFoldingFilterFactory 之后定义它。

我不知道 Lucene 中存在类似的东西，但您可以通过查看其[源代码](https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_4_0/solr/core/src/java/org/apache/solr/analysis/ReversedWildcardFilterFactory.java)来编写您的 FilterFactory 。

您还可以发现[此文档](http://solr.pl/en/2010/12/20/wildcard-queries-and-how-solr-handles-them/)很有用。

# reporting-services - 如何将页面组值传递给 SSRS 中的不同数据集

> ID：13804515
> 
> 赞同：0
> 
> 时间：2012-12-10T16:01:01.453
> 
> 标签：reporting-services

我在 ssrs 中有 2 个数据集。一种是联合，另一种是简单查询，但我必须在不由用户输入的情况下将参数传递给两个数据集，而是使用页面参数，即设备编号。基本上报告是根据每个设备编号显示的，应该传递给这些数据集. 一个数据集查询是

```
SELECT        
    BHEQNO
    ,CertifDesc
    ,Company
    ,EffDate
    ,ExpDate
    ,BHEQSN
    ,BHEQIV
    ,BHEQYR
    ,BHEQMF
    ,0 AS AI
    ,0 AS LP
    ,CZDRNM
    ,CZADD1
    ,CZCITY
    ,CZST
    ,CZZIP
    ,BHEQNO AS Equip
    ,NULL AS Name
    ,NULL AS Addess
    ,NULL AS City
    ,NULL AS State
    ,NULL AS Zip
    ,Rate
    ,ShortName
    ,ExportShortName
    ,Coverage
FROM            
    EquipmentRateLookUp
WHERE        
    BHEQNO = @BHEQNO
UNION ALL
SELECT        
    EquipmentNumber
    ,NULL AS Expr6
    ,NULL AS Expr7
    ,NULL AS Expr8
    ,NULL AS Expr9
    ,NULL AS Expr10
    ,NULL AS Expr11
    ,NULL AS Expr12
    ,NULL AS Expr13
    ,AI
    ,LP
    ,NULL AS Expr14
    ,NULL AS Expr15
    ,NULL AS Expr16
    ,NULL AS Expr17
    ,NULL AS Expr18
    ,NULL AS Expr19
    ,Name
    ,Address
    ,City
    ,State
    ,ZIP
    ,0 As Rate
    ,NULL As ShortName
    ,NULL As EShortName
    ,NULL As Coverage
FROM            
    LossPayee
WHERE        
    EquipmentNumber = @BHEQNO 
```

**第二个数据集**

```
SELECT        
    EquipmentNumber
    ,EBDRNO
    ,EBEFDTF
    ,EBEFDTT
    ,EBTXID
    ,EBNAME1
    ,EBADD1
    ,EBADD2
    ,EBCITY
    ,EBSTATE
    ,EBZIP
FROM            
    Select_DriverB
WHERE        
    EquipmentNumber = @BHEQNO
ORDER BY 
    EBEFDTF DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:41:05.730

Well the parameters are automatically added when you create the datasets. Then, go to the properties for the parameter and change the parameter visibility to hidden or internal.

How are you going to be accessing the report? You can pass the value of the parameter through the url:

[Passing parameter via url to sql server reporting service](https://stackoverflow.com/questions/1078863/passing-parameter-via-url-to-sql-server-reporting-service)

# sql - 在哪里添加索引？

> ID：13804516
> 
> 赞同：0
> 
> 时间：2012-12-10T16:01:11.043
> 
> 标签：sql, performance, indexing

我试图弄清楚我可以在哪里添加索引或修改现有索引以使查询更快。

主要问题是我无法更改查询本身，它是由 Business Objects 生成的。

奇怪的是，如果我将 WHERE 子句更改为使用另一个表，那么查询真的很快！

查询如下：

```
SELECT Year(listingperformanceindicator.date), 
       Month(listingperformanceindicator.date), 
       categoryflattened.parentname, 
       categoryflattened.groupname, 
       categoryflattened.categoryname, 
       Count(listingperformanceindicator.listingid), 
       ( Count(listingperformanceindicator.listingid) ) / 30, 
       Sum(listingperformanceindicator.listingviews), 
       CASE 
         WHEN ( ( Count(listingperformanceindicator.listingid) ) / 30 ) = 0 THEN 
         0 
         ELSE ( Sum(listingperformanceindicator.listingviews) ) / 
              ( ( Count(listingperformanceindicator.listingid) ) / 30 ) 
       END 
FROM   listingperformanceindicator 
       RIGHT OUTER JOIN categorytolisting 
                     ON ( categorytolisting.siteid = listingperformanceindicator.siteid 
                          AND categorytolisting.listingid = listingperformanceindicator.listingid ) 
       RIGHT OUTER JOIN categoryflattened 
                     ON ( categoryflattened.siteid = categorytolisting.siteid 
                          AND ( categoryflattened.parentid = categorytolisting.categoryid 
                                 OR categoryflattened.categoryid = categorytolisting.categoryid 
                                 OR categoryflattened.groupid = categorytolisting.categoryid ) ) 
       RIGHT OUTER JOIN site ON (site.id=categoryflattened.siteId)
WHERE  --listingperformanceindicator.siteid = 'DED29E78-17B0-423B-A1D1-67E2F3CA864D' --THIS IS REALLY FAST :/
       site.id = 'DED29E78-17B0-423B-A1D1-67E2F3CA864D' --THIS IS REALLY SLOW! :(
       AND categoryflattened.languagecode ='SE'
GROUP  BY Year(listingperformanceindicator.date), 
          Month(listingperformanceindicator.date), 
          categoryflattened.parentname, 
          categoryflattened.groupname, 
          categoryflattened.categoryname 
```

我试过查看执行计划，但这对我来说毫无意义:(

他们来了：

快速：http: [//imageshack.us/a/img211/5755/fastquery.png](http://imageshack.us/a/img211/5755/fastquery.png)

慢：http: [//imageshack.us/a/img823/7227/slowquery.png](http://imageshack.us/a/img823/7227/slowquery.png)

任何建议表示赞赏！

谢谢！

# erlang - 如何构建 Erlang OTP UDP 服务器

> ID：13804520
> 
> 赞同：3
> 
> 时间：2012-12-10T16:01:33.593
> 
> 标签：erlang, udp, erlang-otp

我只是在阅读*Manning 的 Erlang & OTP In Action*。很不错的书，我觉得。它包含一个不错的 TCP 服务器示例，但我想编写一个 UDP 服务器。到目前为止，这就是我构建应用程序的方式。

```
my_app                        % app behaviour
|-- my_sup                    % root supervisor 
    |-- my_server.erl         % gen_server to open UDP connection and dispatch
    |-- my_worker_sup         % simple_one_to_one supervisor to start workers
        |-- my_worker_server  % gen_server worker 
```

所以，`my_app`开始`my_sup`，然后开始`my_worker_sup`和`my_server`。UDP 连接`my_server`在活动模式下打开，以便`handle_info/2`在每个新的 UDP 消息上调用，作为响应，我调用`my_worker_sup:start_child/2`该消息将消息传递给新的工作进程进行处理。（实际上，根据本书的建议，最后一次调用`start_child/2`是封装在一个 API 函数中以隐藏一些细节，但这实际上就是发生的情况。）

我是否患有 OTP 发烧？应该`my_worker_server`真正实现 gen_server 行为吗？我需要`my_worker_sup`吗？

我是这样设置的，这样我就可以`my_worker_sup`通过调用将其用作工厂，`start_child/2`但我只使用 worker`init/1`和`handle_info(timeout,State)`函数来首先设置状态，然后在关闭 worker 之前处理消息。

我应该直接产生工人吗？也许另一种行为更适合？

谢谢，慧聪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:56:29.833

这个问题的关键答案是：“*你希望你的应用程序如何崩溃？* ”

如果工人死了，那该怎么办？如果这应该停止一切，包括 UDP 连接，那么您当然可以直接在 my_server 下 spawn_link 它们，不需要主管树。但是如果你想让它们能够优雅地重启或者别的什么，那么上图通常会更好。也许在 my_server 的工作人员上添加一个监视器，这样它就可以保存一本关于谁还活着的书。

在我的 utp erlang 库中，我的结构几乎相同。Master 处理 UDP 套接字并根据 ETS 中保存的路由表转发给 worker。每个worker保持一个连接状态并且可以处理传入的信息。

由于您不跟踪状态，那么您最好的选择可能是通过运行`proc_lib:spawn_link`，然后将它们作为瞬态进程连接到 s_1_1 主管。这样，您将强制将过多的崩溃传播到主管树，但允许它们以`normal`. 这使您可以让它们只运行一次。

请注意，您也可以直接在 my_server 中处理所有内容，但是您将无法同时处理数据。这可能会或可能不会被接受。一般规则是当您有并发工作需要彼此相邻执行、阻塞或以某种方式*表现时，生成一个新进程。*

# iis-7 - VS2012 中的间歇性“无法在 Web 服务器上开始调试...”

> ID：13804527
> 
> 赞同：2
> 
> 时间：2012-12-10T16:01:59.910
> 
> 标签：iis-7, asp.net-mvc-4, visual-studio-2012

关于 stackoverflow 有很多关于“无法在 Web 服务器上开始调试...”的问题，但我有这个问题的变体：它是间歇性的，如果我重新启动 VS2012，它就会消失。*这往往表明某个进程或其他进程正在锁定另一个进程，或者某个文件被devenv.exe* （即 VS2012）锁定等等，并且关闭 VS 会解锁文件/进程/其他任何东西。

Visual Studio 解决方案包含许多使用在我的 64 位 Windows 7 开发计算机上运行的 IIS 的 MVC4 网站。此 VS 解决方案中的所有网站、域模型和测试项目均针对 .NET 4.5 进行配置。*MvcBuildViews*在 CS 项目文件中设置为 true。

我已经尝试为启动项目回收IIS应用程序池，停止和启动IIS站点，完全重置IIS，但无济于事。我怀疑错误消息实际上可能不正确，但这只是一个怀疑。有什么想法吗？

# android - phonegap 2.2.0 无法通过 Android 上的“设备就绪”屏幕

> ID：13804533
> 
> 赞同：1
> 
> 时间：2012-12-10T16:02:16.643
> 
> 标签：android, cordova

我刚刚下载了最新的（2.2.0）phonegap 包，并试图运行它附带的 exampleCordava 应用程序。该应用程序永远不会通过带有科尔多瓦立方体徽标的“设备就绪”启动屏幕。

我尝试将其部署到具有 Android 2.2、4.0.3 和 4.1.2 的模拟器，结果相同。它们都使用 Intel Atom (x86) CPU。

我在 LogCat 中收到以下错误/警告/消息

sqlite 返回：错误代码 => 14，msg = 无法在 27 处打开文件 .... in webview.db

在没有当前上下文的情况下调用 OpenGL ES API（每个线程记录一次）

我注意到在较旧的phonegap/cordova 版本中，您必须手动将cordova jar 文件添加到构建路径中。那不在 exampleCordova 应用程序的构建路径中。我尝试将其添加到构建路径中，但仍然无法正常工作。得到了同样的结果。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:39:45.067

显然 kitchensink 应用程序没有附带最新的 phonegap 包。如果您看到“设备已就绪”，则表示 cordova 正在成功运行。

# iphone - UITableView 的所有项目在仅删除其中一项后消失

> ID：13804534
> 
> 赞同：0
> 
> 时间：2012-12-10T16:02:18.160
> 
> 标签：iphone, ios, uitableview

看起来是一项微不足道的任务，但是我找不到我做错了什么。我有一个带有部分的表格视图，我可以删除 1 个项目，但是当我尝试删除多个项目时，所有项目都会从表格中消失。

重要的是要在这里提到，如果我只删除 1 行，该场景效果很好。删除一行不会影响 UITableView 的项目。

当我单击编辑按钮时，每一行都是删除的候选者。代码是

```
[self.tableView setEditing:YES animated:YES]; 
```

当我删除一行时，代码调用：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSMutableArray *itemsOfGroup = [[table1 getItems] retain];
    int section = indexPath.section;
    section = section - 1;

    MyItem *deleteItem = (MyItem*)[[[sections objectAtIndex:section] objectForKey:@"SectionEntries"] objectAtIndex:indexPath.row];
    [itemsOfGroup removeObject:deleteItem];

    [table1 setItems:[itemsOfGroup autorelease]];
    [[[sections objectAtIndex:section] objectForKey:@"SectionEntries"] removeObjectAtIndex:indexPath.row];

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject: indexPath] withRowAnimation:UITableViewRowAnimationRight];  
    [self createSections];
    [self.tableView reloadData];
} 
```

我的记忆可能有问题吗？（我认为一旦出现消息“发送到已释放实例的消息”出现在一个`NSArray`类中）

值得一提的是，我的项目实际上并未从数据源中删除。它们只会从表格视图中消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:22:53.287

当您刚刚将表 1 中的 Items 设置为它时，为什么要自动释放 itemsOfGroup？应该是设置后的释放调用，或者更好地使用带有属性的 self... 机制。在此处检查您的内存分配/删除。您是否正在丢弃所有内容？另外，删除后，您的 numberOfRowsInSection: 和 numberOfSections: 返回是多少？检查那些。

# css - 带有 :before 的自定义列表项目符号

> ID：13804544
> 
> 赞同：6
> 
> 时间：2012-12-10T16:03:04.750
> 
> 标签：css, css-selectors, html-lists

我正在创建一个包含以下部分的表单：

![在此处输入图像描述](../Images/895e1f3684763a56febd9ad5ab2a799c.png)

我对活动和对象部分的方法是使用列表创建这些选项。

```
<div class="formBlock">
    Activities
    <ul id="coloringAct">
        <li>Activity Type A</li>
        <li>Activity Type B</li>
        <li>Activity Type C</li>
    </ul>
</div> 
```

我希望能够使用自定义列表样式（不是图像）或使用 :before 选择器来创建彩色块，就好像它们是列表的项目符号一样。本质上，是这样的：

```
#formTable tr td .formBlock li {
    list-style:none;
    margin:0;
    padding:0;
    border-top:1px solid #DDD;
}
#formTable tr td .formBlock li:before {
    content: "";
    width:20px;
    height:20px;
    background:red;
} 
```

我怎样才能使用 CSS 完成一些事情？这是行不通的。

[**这是一个小提琴。**](http://jsfiddle.net/JonMoore/B5F4N/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T16:09:31.603

稍微调整一下：

```
formTable tr td .formBlock li:before {
    content: "";
    width:20px;
    height:20px;
    background:red;
    display: block;
    float: left;
    margin-right: 5px;
} 
```

为什么？

display: block 让你看到方块

float: left 避免它在下一行发送文本

margin-right：避免文本太靠近正方形

您必须进行很多调整以适应您的风格和情况:)但关键元素是缺少“显示块”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T16:09:58.553

我想出了解决方案。显然我有正确的代码，但我需要做的就是添加

```
display:inline-block; 
```

以下是正确的：

```
 .formBlock {
        float:left;
        background-color:#f5f5f5;
        padding:0px 10px 0px 10px;
        color:#627686;
        line-height:32px;
        overflow:hidden;
        width:150px;
        border-radius:5px;
        margin-right:15px;
    }  
    .formBlock li {
        list-style:none;
        margin:0;
        padding:0;
        border-top:1px solid #DDD;
    }
    .formBlock li:before {
        display:inline-block;        
        content: "";
        width:10px;
        height:10px;
        background:red;    
        margin-right:5px;            
    }​ 
```

# java - 覆盖 equals() 时覆盖 hashCode()

> ID：13804547
> 
> 赞同：3
> 
> 时间：2012-12-10T16:03:09.433
> 
> 标签：java

> **可能重复：**
> [在 Java 中，为什么 equals() 和 hashCode() 必须一致？](https://stackoverflow.com/questions/1678205/in-java-why-must-equals-and-hashcode-be-consistent)

我读到在覆盖equals（）时应该始终拥有code（）。

谁能举一个实际的例子说明为什么否则它可能是错误的？即覆盖equals()而不是hashCode()时可能出现的问题。

每当我们覆盖 equals() 时，是否有必要编写一个健壮的 hasCode() 函数？还是一个简单的实现就足够了？

例如，

像下面这样一个糟糕的实现足以满足equals（）和hashCode（）之间的约定？

```
public int hashCode() {
   return 91;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:07:40.680

两者`equals`都`hashcode`基于对象的唯一性原则。如果`equals`返回`true`两个对象的哈希码必须相同，否则基于哈希的结构和算法可能会产生未定义的结果。

考虑一个基于哈希的结构，例如`HashMap`. `hashcode`将作为基础调用以获取密钥的引用，而不是`equals`，因此在大多数情况下无法找到密钥。此外，糟糕的实现`hashcode`会产生影响性能的冲突（多个对象具有相同的`hashcode`，哪个是“正确的”？）。

恕我直言，覆盖`equals`OR `hashcode`（而不是覆盖两者）应该被视为代码异味，或者至少是潜在的错误源。也就是说，除非您 100% 确定它迟早不会影响您的代码（我们什么时候如此确定？）。

注意：有各种库通过拥有`equals`和`hashcode`构建器来提供对此的支持，例如Apache [Commons](http://commons.apache.org/)和.`HashcodeBuilder``EqualsBuilder`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:06:11.697

`equals()`and`hashCode()`在某些集合中连用，例如`HashSet`and `HashMap`，所以你必须确保如果你使用这些集合，你会`hashCode`根据合同覆盖。

如果您根本不覆盖`hashCode`，那么您将遇到问题`HashSet`and `HashMap`。特别是，两个“相等”的对象可能被放入不同的哈希桶中，即使它们应该相等。

如果您确实 override `hashCode`，但做得很差，那么您将遇到性能问题。您的所有条目`HashSet`和`HashMap`将被放入同一个存储桶中，您将失去 O(1) 性能并取而代之的是 O(n)。这是因为数据结构本质上变成了一个线性检查的链表。

至于在这些条件之外破坏程序，这是不可能的，但你永远不知道 API（尤其是在 3rd 方库中）何时会依赖于这个合约。*对于没有*实现它们中的任何一个的对象，该契约是有效的，因此可以想象一个库可能会在某个地方依赖它而不使用哈希桶。

在任何情况下，实现一个好的`hashCode`东西都很容易，特别是如果您使用的是 IDE。Eclipse 和 Netbeans 都有能力为你生成`equals`和`hashCode`为你遵循所有契约的方式，包括相反的规则`equals`（断言 that `a.equals(b) == b.equals(a)`）。您需要做的就是选择要包含的字段并继续。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:29:36.280

下面是一些代码，说明了不实现 hashCode() 可以引入的错误： Set.contains() 将首先检查对象的 hashCode()，然后检查 .equals()。因此，如果您不同时实现两者， .contains() 将不会以直观的方式表现：

```
public class ContainsProblem {

// define a class that implements equals, without implementing hashcode
class Car {
    private String name;

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Car)) return false;
        Car car = (Car) o;
        if (name != null ? !name.equals(car.name) : car.name != null) return false;
        return true;
    }

    public String getName() {return name;}

    public Car(String name) { this.name = name;}
}

public static void main(String[] args) {
    ContainsProblem oc = new ContainsProblem();

    ContainsProblem.Car ford = oc.new Car("ford");
    ContainsProblem.Car chevy = oc.new Car("chevy");
    ContainsProblem.Car anotherFord = oc.new Car("ford");
    Set cars = Sets.newHashSet(ford,chevy);

    // if the set of cars contains a ford, a ford is equal to another ford, shouldn't
    // the set return the same thing for both fords? without hashCode(), it won't:
    if (cars.contains(ford) && ford.equals(anotherFord) && !cars.contains(anotherFord)) {
        System.out.println("oh noes, why don't we have a ford? isn't this a bug?");
    }
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T16:08:53.223

您的简单实现是正确的，但会降低基于哈希的集合的性能。

如果您的类的两个不同实例比较相等，则默认实现（由 提供`Object`）将违反合同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:12:07.507

我建议阅读 Joshua Bloch 的“Effective Java”第 3 章“所有对象的通用方法”。没有人能比他解释得更好。He He领导了众多Java平台特性的设计和实现。

# vb.net - Vb.Net - 根据模式复制文件

> ID：13804549
> 
> 赞同：2
> 
> 时间：2012-12-10T16:03:16.760
> 
> 标签：vb.net

我有一个名为 FILELISTS 的表

```
Table Name - Filelists
Field - FileNames 
```

## 数据价值

1.  文件1.txt
2.  文件2.csv
3.  文件 3*.csv

我正在努力编写代码，如上所述，如果它具有需要从源复制到目标的文件名（如 file1.txt 和 file2.txt）。如果文件名是模式（如 File3*.csv），则将与此模式匹配的所有文件从源复制到目标。

我正在使用数据阅读器在 Vb.net 中枚举上面的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:10:19.983

您可以使用[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd383571.aspx)and [`File.Copy`](http://msdn.microsoft.com/de-de/library/9706cfs5%28v=vs.110%29.aspx)，例如：

```
var filePatterns = database.GetFileNamePattern(); // your method that returns the list of files
// assuming you've stored the source- and dest.-directories in the app-settings
string sourceFolder = Properties.Settings.Default.SourceFolder;      
string destFolder = Properties.Settings.Default.DestinationFolder;
foreach (string pattern in filePatterns)
{
    var files = Directory.EnumerateFiles(
        sourceFolder,
        pattern,
        SearchOption.TopDirectoryOnly);
    foreach (string file in files)
    {
        File.Copy(file, Path.Combine(destFolder, Path.GetFileName(file)), true);
    }
} 
```

**编辑**：对不起，这里是 VB.NET 版本：

```
' your method that returns the list of files:
Dim filePatterns = database.GetFileNamePattern()  
' assuming you've stored the source- and dest.-directories in the app-settings
Dim sourceFolder As String = My.Settings.SourceFolder
Dim destFolder As String = My.Settings.DestinationFolder
For Each pattern As String In filePatterns
    Dim files = Directory.EnumerateFiles(sourceFolder, pattern, SearchOption.TopDirectoryOnly)
    For Each file As String In files
       IO.File.Copy(file, IO.Path.Combine(destFolder, IO.Path.GetFileName(file)), True)
    Next
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:10:42.007

DirectoryInfo，FileInfo - 在我点击帖子之前，您删除了您的其他问题......但这适用于.net framework 2.0，就像您问的那样

```
Option Strict On
Imports sO = System.IO.SearchOption
Imports dI = System.IO.DirectoryInfo
Public Class Form1
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        For Each F In (New dI("C:\")).GetFiles("*.*", sO.TopDirectoryOnly)
            MsgBox(F.FullName)
            'Do your copy here
        Next
    End Sub
End Class 
```

# r - 将函数应用于列表 R 中每个表的每一列

> ID：13804553
> 
> 赞同：-5
> 
> 时间：2012-12-10T16:03:28.597
> 
> 标签：r

我在 R 中有一个表列表。行数因表而异，但列数是统一的（22）。我需要计算每个表中每一列的最小值、最大值和中值，并将其放入向量中。每个表需要有一个单独的向量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:14:55.533

```
lapply(your_list,function(x){apply(x,2,mean)}) 
```

替换`mean`为`min`，`max`或`median` 根据您要计算的值。

`apply(x,2,...)`将函数应用于矩阵、数组或数据帧的每一列（即第二维）。 `lapply(...)`将函数应用于列表的每个元素。

# mysql - MySQL 存储过程在 Mac OS X 上不起作用

> ID：13804556
> 
> 赞同：0
> 
> 时间：2012-12-10T16:03:44.607
> 
> 标签：mysql, macos, centos

我有以下存储过程（取自对[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)的评论，用于检查表上是否存在索引）：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `create_index_if_not_exists`$$

CREATE DEFINER=`user`@`%` PROCEDURE `create_index_if_not_exists`(table_name_vc varchar(50), index_name_vc varchar(50), field_list_vc varchar(200))
SQL SECURITY INVOKER
BEGIN

set @Index_cnt = (
select  count(1) cnt
FROM    INFORMATION_SCHEMA.STATISTICS
WHERE   table_name = table_name_vc
and index_name = index_name_vc
);

IF ifnull(@Index_cnt,0) = 0 THEN set @index_sql = concat('Alter table ',table_name_vc,' ADD INDEX ',index_name_vc,'(',field_list_vc,');');

PREPARE stmt FROM @index_sql;
EXECUTE stmt;

DEALLOCATE PREPARE stmt;

END IF;

END$$
DELIMITER ; 
```

奇怪的是，它在 CentOS 5.4 和 MySQL 5.5.25 上完美运行，但在 Mac OS X 10.8.1 和 MySQL 5.5.24 上不工作。在 Mac 上，如果我添加，@Index_cnt 始终为 0

```
select @Index_cnt 
```

在存储过程中。如果我自己执行该`SELECT COUNT(1) cnt ...`语句，则返回应为的 1 或 0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:11:28.237

我重新编写了存储过程，现在可以在所有平台上使用：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS myschema.create_index_if_not_exists $$
CREATE PROCEDURE myschema.create_index_if_not_exists(in p_tableName VARCHAR(128), in p_indexName VARCHAR(128), in p_columnName VARCHAR(128) )
BEGIN

PREPARE stmt FROM 'SELECT @indexCount := COUNT(1) from information_schema.statistics WHERE `table_name` = ? AND `index_name` = ?';
SET @table_name = p_tableName;
SET @index_name = p_indexName;
EXECUTE stmt USING @table_name, @index_name;
DEALLOCATE PREPARE stmt;

-- select @indexCount;

IF( @indexCount = 0 ) THEN
  SELECT 'Creating index';
  SET @createIndexStmt = CONCAT('CREATE INDEX ', p_indexName, ' ON ', p_tableName, ' ( ', p_columnName ,')');
  PREPARE stmt FROM @createIndexStmt;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;
END IF;

END $$

DELIMITER ; 
```

按如下方式使用它：

```
call myschema.create_index_if_not_exists('MyTable','end_time_index','end_time'); 
```

这是在 MAC OS X 10.8.2 和 MySQL 5.5.24 和 Windows 7 和 MySQL 5.5.21 上测试的

# objective-c - 滚动图像，内存警告

> ID：13804566
> 
> 赞同：0
> 
> 时间：2012-12-10T16:04:07.307
> 
> 标签：objective-c, ios, ios4

我需要滚动超过 200 张图像。我找到了一个教程，说我可以使用教程代码制作超过 1000 张图像。教程是：

[http://soulwithmobiletechnology.blogspot.com.br/2011/05/how-to-load-1000s-of-uiimageview-on.html?m=1](http://soulwithmobiletechnology.blogspot.com.br/2011/05/how-to-load-1000s-of-uiimageview-on.html?m=1)

我按照教程进行操作，但是当我使用 100 张图片时，应用程序崩溃并出现内存警告。

我的代码在这里：

[http://pastebin.com/BKmsdXxf](http://pastebin.com/BKmsdXxf)

我已经使用 UIIMagenamed，使用 initWithContentsOfFile

但问题仍然存在。请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:32:44.510

我已经定了！

```
 - (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
CGPoint scrollOffset=scrollView.contentOffset;
int pagAtual = scrollOffset.x/scroll.frame.size.width;
if(pagAtual != 0) { //always release all imageViews and load the current and next
for(int iCnt = 0; iCnt < [scroll.subviews count]; iCnt++) {
    UIView *viewLiberar = [scroll.subviews objectAtIndex:iCnt];
 if ([viewLiberar isKindOfClass:UIImageView.class]) {
    [viewLiberar removeFromSuperview];
     viewLiberar = nil;
   }
 }
}

if(pageOnScrollView < ((int)scrollOffset.x/scroll.frame.size.width))
 { 

 //load the next page
[self loadNextPage:(pagAtual)];
[self loadNextPage:(pagAtual + 1)];
 }
else if(pageOnScrollView > ((int)scrollOffset.x/scroll.frame.size.width))
  {
  if(pagAtual>0)[self loadNextPage:((int)scrollOffset.x/scroll.frame.size.width)-1];
    }

     pageOnScrollView=scrollOffset.x/scroll.frame.size.width;
      } 
```

# mysql - 关税数据库模式

> ID：13804569
> 
> 赞同：1
> 
> 时间：2012-12-10T16:04:14.313
> 
> 标签：mysql, database, database-design

使用以下数据库模式，我正在尝试实现这一目标......

每家商店都有 1 个关税，根据一周中的一天有不同的成本。

商店 1 的关税很低 周一 - 周六 - $1.00 周日 - $0.50

商店 2 的关税很高 周一 - 周五 - 2.00 美元 周六 - 1.00 美元 周日 - 0.50 美元

这些关税可能有数百种不同的变化。

![数据库模式](../Images/623f0b3d42bf9798588b0ec5788d9e0d.png)

上面的模式是否实现了这一点？建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:14:15.477

最直接的关税表实现如下所示：

```
Tariff
------
Store ID
Sunday Tariff
Monday Tariff
Tuesday Tariff
Wednesday Tariff
Thursday Tariff
Friday Tariff
Saturday Tariff 
```

您的其他选择如下所示：

```
Tariff
------
Store ID
Day of Week ID
Tariff 
```

主键是 Store ID 和 Day of Week ID。

# svg - 如何使用 D3.js 在 SVG 中创建流布局？

> ID：13804574
> 
> 赞同：3
> 
> 时间：2012-12-10T16:04:17.777
> 
> 标签：svg, d3.js

假设我有一个带有几个形状的 SVG 容器：

```
<svg>
    <g class="container">
        <rect id="first" x="0" y="0" width="100" height="100" fill="red" />
        <rect id="second" x="100" y="0" width="100" height="100" fill="green" />
        <rect id="third" x="200" y="0" width="100" height="100" fill="blue" />
    </g>
</svg> 
```

使用 D3 我将操纵这些形状的宽度，例如在过渡中。我如何确保矩形将始终保持此顺序，它们之间没有任何空间？也就是说，如果我修改`width`of `first`，`x`of`second`并且`third`会立即更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T18:39:07.233

我做了一个树布局的变体，使其成为流布局。您可以在此处查看[演示](http://billdwhite.com/wordpress/wp-content/js/flowtree_02.html)并在此处查看[要点](http://bl.ocks.org/billdwhite/6929178)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:15:45.370

**选项 A：**创建[树状图](http://bl.ocks.org/4063582)并将粘性选项设置为 true `.sticky(true)`：。树形图布局为您提供 x、y、宽度和高度值，您可以使用它们来操作 DOM/SVG。粘性选项负责平滑过渡。

**选项 B**：使用纯 html 元素，例如`div`代替`svg:rect`元素。如果您真的只是操纵宽度，那应该是更合理的选择：

```
<style>
    #container div{ float: left; }
</style>
<div id="container">
    <div id="first"  style="width:100px; height:100px; background-color:red;"   ></div>
    <div id="second" style="width:100px; height:100px; background-color:green;" ></div>
    <div id="third"  style="width:100px; height:100px; background-color:blue;"  ></div>
</div> 
```

使用纯 html，您可以操纵宽度，浏览器的布局/CSS 引擎处理浮动。D3 不限于 SVG，它还可以处理普通的 html 元素（[树形图示例](http://bl.ocks.org/4063582)也使用`div`元素）。

**顺便说一句：**在 d3 中，您不应该直接操作 DOM。始终考虑基础数据并使更新数据驱动，即，当使用树图时，您将在源数据中设置`item.value`数据`item`，例如：

```
data = [ {value: 100}, {value:200}, {value:100} ]
//...
updateData() //changes some values in your data
drawChart()  //draws the whole chart based on the data, e.g., computes the x, y,
             //width, height from the `item.value` (e.g., via d3.layout.treemap)
             //and manipulates/animates the DOM via d3 
```

# c# - 泛型类不绑定到 HierarchicalDataTemplate

> ID：13804581
> 
> 赞同：1
> 
> 时间：2012-12-10T16:04:43.413
> 
> 标签：c#, wpf, treeview, hierarchicaldatatemplate

我是 WPF 的新手，所以可能会遗漏一些明显的东西，但无法在任何地方找到答案。

基本上我正在构建一个以特定方式排序的自定义树集合，并且树的节点被键入到集合的类型。当节点是通用的时，在测试中`TreeView`不起作用`HierarchicalDataTemplate`。如果它们不是通用的，那很好。

这是一个简单的节点类来说明：

```
public class SimpleNode<T>
{
    private List<SimpleNode<T>> _children;
    private string _name;

    public SimpleNode(string name)
    {
        _name = name;
    }

    public List<SimpleNode<T>> Children
    {
        get
        {
            return _children;
        }
        set
        {
            _children = value;
        }
    }

    public string Name
    {
        get
        {
            return _name;
        }
    }
} 
```

然后在 xaml 中：

```
HierarchicalDataTemplate DataType="{x:Type local:SimpleNode`1}" ItemsSource="{Binding Children}" 
```

显然，附加到类型的 `1 是`SimpleNode`具有 1 个通用参数的结果。如果我剥离泛型类的`HierarchicalDataTemplate`作品，我可以在`TreeView`. 有了泛型，它就不会这样做。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:13:30.910

没有开箱即用的支持。但是您可以通过创建自己的`DataTemplateSelector`支持泛型来使其工作：

```
public class OpenGenericTypeDataTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item,
                                                DependencyObject container)
    {
        var element = container as FrameworkElement;
        if (item != null && element != null)
        {
            if (item.GetType().IsGenericType)
            {
                var genericTypeDefinition = item.GetType()
                                                .GetGenericTypeDefinition();
                var key = new DataTemplateKey(genericTypeDefinition);
                return element.TryFindResource(key) as DataTemplate;
            }
        }

        return null;
    }
} 
```

你可以像这样使用它：

```
<UserControl.Resources>
  <OpenGenericTypeDataTemplateSelector x:Key="GenericTemplateSelector" />
</UserControl.Resources>
...
<TreeView ItemTemplateSelector="{StaticResource GenericTemplateSelector}" ...>
  <TreeView.Resources>
    <HierarchicalDataTemplate DataType="{x:Type local:SimpleNode`1}"
                              ItemsSource="{Binding Children}">
      ...
    </HierarchicalDataTemplate>
  </TreeView.Resources> 
```

这样做实际上非常简单：
当您`DataTemplate`为某个类型创建一个时，该类型的名称将自动成为该模板的键。
默认`DataTemplateSelector`使用项目的类型作为查找值。但是泛型类的实例的类型是*封闭的泛型类型*，即具有指定泛型类型参数的类型。
问题是：模板已注册为*开放的泛型类型*，即没有指定泛型类型参数。这就是为什么默认`DataTemplateSelector`不会`DataTemplate`获取为开放泛型类型注册的 s 的原因。
我提供的实现通过简单地检查项目的类型来增加对开放泛型类型的支持。如果它是泛型的，我们会为自己获取开放的泛型类型（通过`GetGenericTypeDefinition`）并将其用作键。

要真正使用这个选择器，我们必须告诉`TreeView`它应该使用它。我们通过指定`ItemTemplateSelector`.

# excel - 根据数据中的特定字符将多个文本文件导入 Excel，并在导入时添加附加数据

> ID：13804585
> 
> 赞同：1
> 
> 时间：2012-12-10T16:04:53.960
> 
> 标签：excel, import, vba

我找到了将大量文本文件中的数据行导入 Excel 工作表的答案（[https://stackoverflow.com/a/4941605/1892030](https://stackoverflow.com/a/4941605/1892030)由 Chris Neilsen 回答）。但是，我还想执行以下操作：

1.  我要导入的有用数据前后都有垃圾数据。我要导入的数据行都以星号 (*) 开头。
2.  数据以逗号分隔，并且在导入 Excel 时必须以这种方式解析。我可以通过编辑上述答案中的解析代码来改变这一点。
3.  在导入的每一行的末尾，我想添加一个额外的数据项，它是从中导入数据的文本文件的名称（仅文件名，没有文件扩展名）。

上面提到的克里斯的答案非常有效，所以我想编辑代码以允许我在上面第 1 点和第 3 点下的额外要求 - 但不知道如何。为了完整起见，我从下面的较早答案中复制代码。非常感谢。

```
Sub ReadFilesIntoActiveSheet()

    Dim fso As FileSystemObject
    Dim folder As folder
    Dim file As file
    Dim FileText As TextStream
    Dim TextLine As String
    Dim Items() As String
    Dim i As Long
    Dim cl As Range

    ' Get a FileSystem object
    Set fso = New FileSystemObject

    ' get the directory you want
    Set folder = fso.GetFolder("C:\#test")

    ' set the starting point to write the data to
    Set cl = ActiveSheet.Cells(1, 1)

    ' Loop thru all files in the folder
    For Each file In folder.Files

        ' Open the file
        Set FileText = file.OpenAsTextStream(ForReading)

        ' Read the file one line at a time
        Do While Not FileText.AtEndOfStream

            TextLine = FileText.ReadLine

            ' Parse the line into comma delimited pieces
            Items = Split(TextLine, ",")

            ' Put data on one row in active sheet
            For i = 0 To UBound(Items)
                cl.Offset(0, i).Value = Items(i)
            Next

            ' Move to next row
            Set cl = cl.Offset(1, 0)

        Loop

        ' Clean up
        FileText.Close

    Next file

    Set FileText = Nothing
    Set file = Nothing
    Set folder = Nothing
    Set fso = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:56:42.120

我还没有为你做这一切（我希望文件名需要整理以适应你想要的格式）但是把这个代码放进去，它会让你开始......

```
 ' Read the file one line at a time
    Do While Not FileText.AtEndOfStream

        TextLine = FileText.ReadLine

        ' Process lines which don't begin with Asterisk (*)
        If Left(TextLine,1)<>"*" Then 

            ' This crudely appends the filename as if it were a column in the source file
            TextLine = TextLine + "," + file.Name

            ' Parse the line into comma delimited pieces
            Items = Split(TextLine, ",")

            ' Put data on one row in active sheet
            For i = 0 To UBound(Items)
                cl.Offset(0, i).Value = Items(i)
            Next

            ' Move to next row
            Set cl = cl.Offset(1, 0)
        End If
    Loop 
```

# soap - 查看 Web 服务返回的 SOAP

> ID：13804588
> 
> 赞同：0
> 
> 时间：2012-12-10T16:05:15.953
> 
> 标签：soap, wsdl, vb.net-2010

我在我的 VS2010 项目中创建了一个 Web 服务引用，并使用 WSDL 服务地址 URL 对其进行了配置。VS2010 为我创建了一个不错的代理类来使用 Web 服务。

我得到了一个我不喜欢的结果，并且为了排除故障，我希望看到从 Web 服务返回的 XML。最简单的方法是什么？我希望能够在我的 Visual Studio 调试会话中执行此操作，但如果我必须超出此范围，那就这样吧。

我正在尝试进行以下工作：

```
 Dim response As HttpWebResponse = Nothing
        Dim reader As System.IO.StreamReader = Nothing

        Dim hwrResponse As HttpWebResponse = DirectCast(**request**.GetResponse(), HttpWebResponse)
        Dim responseStream As System.IO.Stream = hwrResponse.GetResponseStream()

        Dim xtrSmp As New System.Xml.XmlTextReader(responseStream)
        Dim strXm As String = xtrSmp.ReadInnerXml()
        xtrSmp.Close()

        hwrResponse.Close() 
```

但我不知道我的**要求**应该是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:06:52.463

您的**REQUEST**应该是一个 REQUEST 对象，它被配置为访问您尝试访问的 SOAP 服务...

在这里你可以找到更多...

HTTPWEBRESPONSE 对象[http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)

HTTPWEBREQUEST 对象[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T10:42:57.947

使用其中一种
WebServiceStudio ( [http://webservicestudio.codeplex.com/](http://webservicestudio.codeplex.com/) )、Storm ( [http://storm.codeplex.com/](http://storm.codeplex.com/) ) 或出色的 Eclipse WSDL 编辑器和 Web 服务资源管理器（查看[http://wiki. eclipse.org/index.php/Introduction_to_the_WSDL_Editor](http://wiki.eclipse.org/index.php/Introduction_to_the_WSDL_Editor)）

这些将允许您使用从 WSDL 生成的 ad-hoc GUI 客户端调用您的服务方法，并访问请求和响应 XML。

上面的工具列表当然是不完整的。

# javascript - 使用 *.user.js 制作所有图像的来源 https://

> ID：13804590
> 
> 赞同：1
> 
> 时间：2012-12-10T16:05:22.737
> 
> 标签：javascript, jquery, html, ssl, userjs

编辑：为什么这不起作用？

```
@match http://tumblr.com/*
$(document).ready(function() {
    $(img).each(function() {
        var i = $(this).attr("src");
        var n = i.replace("http://", "https://");
        $(this).attr("src", function() {
            return n;
        });
    });
});​ 
```

编辑：要清楚，我不拥有该网站。我想在[https://facebook.com/](https://facebook.com/)和[https://tumblr.com/](https://tumblr.com/)之类的网站上使用 https。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:12:38.473

嘿伙计，这很简单，据我所知，你想要的！您想更改所有图像 src 吗？

```
$(document).ready( function() {
$("img").each( function() {
var i = $(this).attr("src");
var n = i.replace("http://", "https://");
$(this).attr("src", function() {
return n;
});
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T03:28:05.580

OP 非常接近，只需要调整选择器`$(img)`：`$("img")`

```
$(document).ready(function() {
        $("img").each(function() {
          var link = $(this).attr("src");
          var newLink = link.replace("http://example.com", "//example.com");
          $(this).attr("src", function() {
            return newLink
        });
     });
  }); 
```

jQuery 要求在 DOM 元素选择器周围使用引号，OP 脚本会抛出未定义的 img。

# c++ - 1字节整数数据类型

> ID：13804591
> 
> 赞同：8
> 
> 时间：2012-12-10T16:05:25.007
> 
> 标签：c++, char, hex, int, uint8t

我写了以下代码：

```
 #include <iostream>
 #include <iomanip>
 #include <stdint.h>

 using namespace std;

 int main()
 {
     uint8_t c;

     cin  >> hex >> c;
     cout << dec << c;

     return 0;
 } 
```

但是当我输入`c`-hex for 12 - 输出也是`c`. 我期待 12。后来我了解到：

> `uint8_t`通常是`unsigned char`. 所以它实际上读`c`作 ASCII 0x63。

是否有一个 1 字节整数在执行 I/O 时表现为整数而不是字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:13:03.883

从来没听说过。

您可以使用更广泛的整数类型执行 I/O，并酌情使用范围检查和强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:18:41.140

恐怕我也不知道有什么办法，但是将十六进制数读入整数类型可以如下完成：

```
#include <iostream>
using namespace std;

int main () {
    short c;
    cin >> std::hex >> c;
    cout << c << endl;
    return 0;
} 
```

# asp.net-mvc - 将现有数据库视图/表从对象资源管理器添加到实体图

> ID：13804592
> 
> 赞同：0
> 
> 时间：2012-12-10T16:05:26.207
> 
> 标签：asp.net-mvc, linq-to-entities

我创建了一个新的 asp.net 2012 mvc 应用程序。我正在将现有的 Web 表单应用程序移至 mvc 模型。Web 表单应用程序使用 linq to sql，但由于它不再受支持，我将使用 linq to 实体。

我从未使用过 mvc 或 linq 到实体，我一直在阅读我能找到的每一篇文章。我添加了 ado.net 实体模型并从我现有的 sql server 2005 数据库生成了图表。我在 .edmx 图表中遇到了关系问题，因此我删除了希望能够**将其拖回图表**的视图。

我已经查看了将现有数据库视图/表添加到图表的所有方法，但没有成功。我不想重新生成它，我花了很多时间修改当前图表中的关系等。如何将数据库中的视图/表添加回现有图表？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:28:41.733

我担心从数据库选项更新模型会改变我在模型中所做的事情，所以我避免了它。经过数小时的搜索，我决定尝试一下，呃……它让我选择了我想要添加的内容。右键单击您的 .edmx 文件并选择从数据库更新模型。检查你想要什么，就是这样。

# winjs - 在 Windows 应用商店应用中执行命令

> ID：13804595
> 
> 赞同：0
> 
> 时间：2012-12-10T16:05:32.127
> 
> 标签：winjs

我正在开发一个具有一些 URL-s 的 Windows 应用商店应用程序。我只是想达到的是，如果我单击其中之一，我的应用程序将切换到 Internet Explorer。

有没有办法做到这一点？

桑德尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:12:31.077

```
// The URI to launch
var uriToLaunch = "http://www.bing.com";
// Create a Uri object from a URI string 
var uri = new Windows.Foundation.Uri(uriToLaunch);

Windows.System.Launcher.launchUriAsync(uri).then(
   function (success) {
       if (success) {
           // URI launched
       } else {
           // URI launch failed
       }
   }); 
```

这样做吗？

# java - 在将数据从 jsp 传递到 servlet 方面需要帮助

> ID：13804596
> 
> 赞同：0
> 
> 时间：2012-12-10T16:05:32.033
> 
> 标签：java, jsp, servlets

我目前是 java ee 的新手。我需要有关如何将我的数据从 jsp 传递到我的 servlet 以填写我的查询的帮助。每当我运行时，都会捕获错误并打印出异常。它说java.null.exception ..我找不到我的错误在哪里..请帮助我...谢谢..

这是我的代码：

更新ProductServlet.java

```
 try {
        String description = request.getParameter("description");
        float price = Float.parseFloat(request.getParameter("price"));
        String size = request.getParameter("size");
        int aisle_id = Integer.parseInt(request.getParameter("aisle"));
        int id = Integer.parseInt(request.getParameter("id"));

        ProductsDao productsDao = new ProductsDao();
        productsDao.updateProduct(description, price, size, aisle_id, id);

    } catch (Exception e) {
        out.println(e);
    } 
```

和我的 ProductDao.java

```
public void updateProduct(String description, float price, String size, int aisle_id, int id) 
        throws ClassNotFoundException, SQLException {
    Connection conn = null;
    PreparedStatement stmt = null;
    String sql = "UPDATE products "
            + "SET description = ?, price = ?, size = ?, aisle_id = ? "
            + "WHERE id = ? ";

    try {
        conn = ConnectionFactory.getConnection();
        stmt = conn.prepareStatement(sql);
        stmt.setString(1, description);
        stmt.setFloat(2, price);
        stmt.setString(3, size);
        stmt.setInt(4, aisle_id);
        stmt.setInt(5, id);
        stmt.executeUpdate();

    } finally {
        if (conn != null) {
            conn.close();
        }

        if (stmt != null){
            stmt.close();
        }
    }
} 
```

这是我的 ProductById.jsp

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    <script>
        function functionEdit()
        {
            document.getElementById("edit").type="hidden";
            document.getElementById("update").type="button";
            document.getElementById("delete").type="hidden";
            document.getElementById("cancel").type="button";

            document.getElementById("description").disabled="";
            document.getElementById("size").disabled="";
            document.getElementById("price").disabled="";
            document.getElementById("select").disabled="";
        }

        function functionUpdateRecord(){
            if(confirm('Update existing record?')){
                document.location.href="/MachineProblemWebApp/UpdateProductServlet";
                alert('Update success!');
                document.location.href="/MachineProblemWebApp/GetAllProductsServlet";

            }else{ 
                alert('No changes have been made!');
            }

        }

    </script>
</head>
<body>
    <table border="0">
        <tr>
            <td>id: </td>
            <td><input type="text" name="id" id="id" value="${product.id}" disabled="disabled"></td>
        </tr>
        <tr>
            <td>Description: </td>
            <td><input type="text" name="description" id="description" value="${product.description}" disabled="disabled"></td>
        </tr>
        <tr>
            <td>Aisle </td>
            <td><select name="aisle" disabled="disabled" id="select">
                    <c:forEach var="aisle" items="${aisles}" >
                        <option value="${aisle.id}" ${(aisle.id==product.aisle.id)?"selected" : ""}>${aisle.description}</option>
                    </c:forEach>
                </select></td>
        </tr>
        <tr>
            <td>Size: </td>
            <td><input type="text" name="size" id="size" value="${product.size}" disabled="disabled"></td>
        </tr>
        <tr>
            <td>Price: </td>
            <td><input type="text" name="price" id="price" value="${product.price}" disabled="disabled"></td>
        </tr>
        <tr>
            <td><input type="button" name="edit" id="edit" onClick="functionEdit()" value="Edit" >
                <input type="hidden" name="update" id="update" onClick="functionUpdateRecord()"value="Update">
                <input type="button" name="delete" id="delete" value="Delete">
                <input type="hidden" name="cancel" id="cancel" value="Cancel"></td>
        </tr>
    </table>

</body> 
```

这是堆栈跟踪吗？张贴在 Apache Tomcat 日志中？

```
Dec 10, 2012 7:38:13 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [UpdateProductServlet] in context with path     [/MachineProblemWebApp] threw exception
java.lang.NullPointerException
at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1008)
at java.lang.Float.parseFloat(Float.java:452)
at grocerific.ui.UpdateProductServlet.processRequest(UpdateProductServlet.java:45)
at grocerific.ui.UpdateProductServlet.doGet(UpdateProductServlet.java:75)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

Dec 10, 2012 9:36:40 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextDestroyed()
Dec 10, 2012 9:36:40 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextDestroyed()
Dec 10, 2012 9:36:46 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
Dec 10, 2012 9:36:46 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
Dec 10, 2012 9:36:46 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@8a47d9') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:49:20.693

看来您尝试传递数据： `document.location.href="/MachineProblemWebApp/UpdateProductServlet";`

这是不可能的，因为这条线只是重定向到“UpdateProductServlet”而不发送数据。

您需要使用表单标签来提交数据。

在下面的链接中你可以看到如何设置表单标签： [http ://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:44:58.467

堆栈跟踪告诉您错误在哪里：

```
at grocerific.ui.UpdateProductServlet.processRequest(UpdateProductServlet.java:45) 
```

我猜是这条线

```
float price = Float.parseFloat(request.getParameter("price")); 
```

您传递给 parseFloat 的字符串不是浮点数。它可能是 "" 或 "1,0" 而不是 "1.0" 或类似的。

从架构的角度来看，您完全走错了路。JSP 已经过时并且已知有许多许多问题，您正处于一条非常痛苦的道路的开始。

看看使用速度而不是 JSP。最好研究一些网络应用程序框架。有一些处理表单处理得很好。

# ant - 使用 ant 执行 selenium test suit jar

> ID：13804598
> 
> 赞同：1
> 
> 时间：2012-12-10T16:05:35.293
> 
> 标签：ant, junit, selenium-rc

我有一个使用 JUNIT 测试用例的 Selenium RC 测试项目。我已经制作了一个 JAR 文件，我正在通过 ANT 构建文件执行该 JAR：

我的 ant 文件如下所示：

*

```
<project name="test" default="run-all" basedir=".">
    <property name="src" value="./src" />
    <property name="lib" value="./lib" />
    <property name="bin" value="./bin" />
    <property name="report" value="./report" />
    <path id="test.classpath">
        <pathelement location="${bin}" />
        <fileset dir="${lib}">
            <include name="**/*.jar" />
        </fileset>
    </path>
    <target name="init">
        <delete dir="${bin}" />
        <mkdir dir="${bin}" />
    </target>
    <target name="exec" depends="init">
        <delete dir="${report}" />
        <mkdir dir="${report}" />
            <mkdir dir="${report}/xml" />
        <junit printsummary="yes" haltonfailure="no">
            <batchtest fork="yes" todir="${report}/xml">
            <resources>
               <zipfileset src="BVTTest.jar" includes="**/*TestSuite.class"/>
            </resources> 

            </batchtest>
            <classpath>
            <fileset dir="">
                <include name="**/*.jar" />
            </fileset>
            </classpath>
        </junit>

        <junitreport todir="${report}">
            <fileset dir="${report}/xml">
                <include name="TEST*.xml" />
            </fileset>
            <report format="frames" todir="C:/eclipse/html" />
        </junitreport>
    </target>
    <target name="start-selenium-server">
            <java jar="selenium-server-standalone-2.25.0.jar" fork="true" spawn="true">
                <arg line="-timeout 30" />
            </java>
        </target>
    <target name="browse">
        <exec executable="C:\Program Files\Internet Explorer\iexplore.exe">
          <arg value="C:/eclipse/html/index.html"/>
        </exec>
      </target>
    <target name="stop-selenium-server">
            <get taskname="selenium-shutdown" 
                src="http://localhost:4444/selenium-server/driver/?cmd=shutDown" 
                dest="result.txt" 
                ignoreerrors="true" />
            <echo message="selenium server stopped succesfully"/>
        </target>
    <target name="run-all">
            <parallel>
                <antcall target="start-selenium-server">
                </antcall>
                <sequential>
                    <echo taskname="waitfor" message="Wait for proxy server launch" />
                    <waitfor maxwait="1" maxwaitunit="minute" checkevery="100">
                        <http url="http://localhost:4444/selenium-server/
                            driver/?cmd=testComplete" />
                    </waitfor>
                    <antcall target="exec">
                    </antcall>
                    <antcall target="stop-selenium-server">
                    </antcall>
                    <antcall target="browse">
                        </antcall>
                </sequential>
            </parallel>
        </target>
</project> 
```

*

它的作用是跳过`<junit>`; 然后`<mkdir>`直接跳转到`<junitreport>`. 请帮忙。

# eclipselink - 审核 OneToOne 属性

> ID：13804602
> 
> 赞同：0
> 
> 时间：2012-12-10T16:05:46.847
> 
> 标签：eclipselink

使用 Glassfish 3.1.2 和 eclipselink 2.2.0。我必须跟踪以下实体的更改：

```
@Entity
@EntityListeners({AuditListener.class})
@Customizer(AuditListener.class)
public class Client extends Person {
...
@OneToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
private ConsumptionRoomAndPost consumptionRoomAndPost;
...
@OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
private List<Document> documentList;
... 
```

**审计监听器：**

```
public class AuditListener extends DescriptorEventAdapter implements DescriptorCustomizer {
...
@Override
public void postMerge(DescriptorEvent event) {
    if (event.getChangeSet() != null) {
    ...
    }
} 
```

}

这适用于文档列表，changeSet 不为空，但不适用于 ConsumptionRoomAndPost。变更集为空。

当然，我可以为 ConsumptionRoomAndPost 添加自己的侦听器 ConsumptionRoomAndPostAuditListener，但对于审计，我需要一个客户信息，而且我无法将此客户信息提供给 ConsumptionRoomAndPostAuditListener。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:10:53.017

解决了。

将关系更改为双向后，eclipse 链接会跟踪所有属性的更改。我已添加到实体 ConsumptionRoomAndPost：

```
public class ConsumptionRoomAndPost {
...
@OneToOne(mappedBy = "consumptionRoomAndPost", cascade = CascadeType.ALL)
private Client client;
...
} 
```

它的全部。

# wpf - 使用 Windows.Shapes.Path 创建圆角和弯曲的底部形状

> ID：13804604
> 
> 赞同：0
> 
> 时间：2012-12-10T16:05:51.213
> 
> 标签：wpf, xaml, styles, shapes

我正在寻找使用 System.Windows.Shapes.Path 在 XAML 中创建以下形状 ![在此处输入图像描述](../Images/74553cc40c5faddb12ad509edcd32266.png)

（图像有点粗糙，但显示了左上角和右上角的弯曲角以及弯曲的底部图像）。

到目前为止，我的底部曲线如下：

```
<Path Data="M0,0 L300,0 L300,40.768158 L296.83832,41.189522 C253.5976,46.794456 203.45944,50.000004 150,50.000004 C96.540565,50.000004 46.402409,46.794456 3.1617098,41.189522 L0,40.768158" ... /> 
```

但我不确定如何使顶角变圆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:44:35.560

您可以在路径几何中使用椭圆弧（类[ArcSegment ）：](http://msdn.microsoft.com/en-us/library/system.windows.media.arcsegment.aspx)

```
<Path Fill="Black"
      Data="M0,20 A20,20 0 0 1 20,0 L280,0 A20,20 0 0 1 300,20 L300,150 A150,75 0 0 1 0,150 Z"/> 
```

或者，您可以像这样使用[CombinedGeometry](http://msdn.microsoft.com/en-us/library/ms653071.aspx)：

```
<Path Fill="Black">
    <Path.Data>
        <CombinedGeometry GeometryCombineMode="Union">
            <CombinedGeometry.Geometry1>
                <RectangleGeometry Rect="0,0,300,170" RadiusX="20" RadiusY="20"/>
            </CombinedGeometry.Geometry1>
            <CombinedGeometry.Geometry2>
                <EllipseGeometry Center="150,150" RadiusX="150" RadiusY="75"/>
            </CombinedGeometry.Geometry2>
        </CombinedGeometry>
    </Path.Data>
</Path> 
```

# android - Android系统中哪个文件代表手机的身份？

> ID：13804605
> 
> 赞同：0
> 
> 时间：2012-12-10T16:06:04.707
> 
> 标签：android

我有 root 访问权限并想更改手机的身份，以便让软件提供商将此手机视为新手机。那么您知道Android系统中的哪个文件或哪些文件代表了软件可能读取的手机身份，以确定这是新客户还是旧客户？谢谢，希望我把问题说清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:50:58.770

使用[Settings.Secure 类](http://developer.android.com/reference/android/provider/Settings.Secure.html)，并尝试获取[Android_ID](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)。这是我自己的代码片段：

```
String android_id = Secure.getString(getBaseContext().getContentResolver(),
                Secure.ANDROID_ID); 
```

你的类必须扩展 Activity 否则你会得到一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:43:31.027

使用Android ID（可以在root手机上更改）

参考[http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)

# object - 在运行时在 PhysX 中查找对象的位置

> ID：13804606
> 
> 赞同：0
> 
> 时间：2012-12-10T16:06:08.900
> 
> 标签：object, position, nvidia, physx

我正在尝试根据玩家（盒子）当时的位置在世界上产生一个球。为此，我需要知道盒子的位置，当我按下按钮时，球将出现在盒子顶面的中心。

因此，为此我还需要能够获得该位置的 Y 轴，并且在网上搜索后我找不到任何帮助。

有人知道如何帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:49:04.767

没有任何代码很难给你一个准确的答案。

然而，沿着这些路线的东西是你的目标：

```
NxVec3 ballSpawn = box.getGlobalPosition();
ball.setGlobalPosition(NxVec3(ballSpawn.x, ballSpawn.y+boxHeight, ballSpawn.z)); 
```

PhysX SDK 文档具有出色的基础搜索功能。

# mercurial - 如何使用 Mercurial Queues 重命名文件？

> ID：13804608
> 
> 赞同：4
> 
> 时间：2012-12-10T16:06:14.247
> 
> 标签：mercurial, mq, mercurial-queue

*Mercurial Queues*是关于补丁的，而补丁对文件重命名一无所知。这是 Mercurial Queues 不支持文件重命名的原因，还是我在重命名文件时做错了什么？我研究了一个补丁队列，只修改了一个名为`foo`. 现在我回到补丁 4 并通过以下方式重命名文件`hg mv`：

```
hg qpop 4     # Unapply all patches until patch 4.
hg mv foo bar # Rename file and led Mercuial know about it.
hg qrefresh   # Should apply changes to unapplied patch 4.
hg qpush -a   # Should apply all unapplied patches. 
```

我收到以下错误：

```
unable to find 'foo' for patching
1 out of 1 hunks FAILED -- saving rejects to file foo.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh 5.diff 
```

**那么我应该如何使用 Mercurial Queues 处理文件重命名呢？**Mercurial*提交*处理文件重命名是有原因的（如果没有，它会丢失有关重命名后文件编辑的整个历史记录）。

**更新**

刚刚注意到`hg histedit`折叠变更集并且`hg collapse`也丢失了文件重命名的信息，文件显示为新文件而不是重命名的文件，我想这是出于同样的原因。似乎在不丢失该信息的情况下，在 Mercurial 中无法折叠私有变更集？

**更新 2**

发现在不丢失重命名信息的情况下折叠私有变更集是可能的`hg rebase`，它的`--collapse`选项，例如`hg rebase -s 5 -d 4 --collapse`. 其他命令应该保留重命名信息的问题仍然悬而未决，但是使用该`hg rebase`命令至少有一种方法可以达到预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:24:52.353

> 这就是 Mercurial Queues 不支持文件重命名的原因吗？

不。

> 还是我在重命名文件时做错了什么？

不。

是的，链中的补丁**会**遇到麻烦，如果它们是为`foo`文件准备的，但稍后会有问题`bar`，但由于不同的原因：补丁是独立的，每个补丁都不知道其他补丁的变化 - 它们与上下文一起工作，而不是在单独的补丁中执行一系列操作。您正确地完成了重命名，但是这个变更集**使以后的变更集无效，这些变更集是在****旧内容**上准备的

# java - 使用反射捕获断言错误

> ID：13804610
> 
> 赞同：0
> 
> 时间：2012-12-10T16:06:20.230
> 
> 标签：java, reflection

文件中要测试的代码是：

```
public void testFail() {
    assert false;
} 
```

我需要使用反射来捕捉它并增加一个“失败”的计数器。这是我的尝试：

```
 try {
          Object t = c.newInstance();
          m[i].invoke(t, new Object[0]); // m is the array that holds all Methods for c
          passed ++;
      } catch (AssertionError ae) {
          failed ++;
      } catch (Exception e) {
          errors ++;
      }
    } 
```

assertFalse 只是通过并不会引发任何异常。我怎么能抓住这个？

谢谢。

# java - 用 Java 读出一个 csv 文件。用数组列表填充数组列表

> ID：13804612
> 
> 赞同：2
> 
> 时间：2012-12-10T16:06:24.060
> 
> 标签：java, arrays, csv, arraylist

我尝试读出一个 csv 文件。在我的代码中，我读出了 csv 文件中的行。因此，我使用 arraylist 将行中的每个项目添加到 arraylist。

读出一行后，我将数组列表存储在另一个数组列表中，然后读取下一行，依此类推。

现在我有几个问题和一个问题。

1）当我将一个项目添加到一个数组列表时，它是否总是添加到列表的末尾（当我没有给出在我的代码中添加项目的具体位置时）？这样就可以保持 csv 文件的顺序。

2）我发现，当我清除 arraylist datatemp 以准备读取下一行时，数组列表数据的内容也被清除。如何防止我的代码这样做？

3）有没有办法从我拥有的arraylist数据中制作一个普通的数组？

4) 我读出 csv-File 的方式是正确的还是有更好的方法？

```
public class CSVReader {    

public void ReadCSV (String csvfilepath) {

    BufferedReader CSVFile = null;
    String dataRow = null;
    ArrayList<Float> datatemp = new ArrayList<Float>(); 
    ArrayList<ArrayList<Float>> data = new ArrayList<ArrayList<Float>>(); 

    try {
        CSVFile = new BufferedReader(new FileReader(csvfilepath));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    try {
        dataRow = CSVFile.readLine();
    } catch (IOException e) {
        e.printStackTrace();
    }

    while (dataRow != null){
        String[] dataArray = dataRow.split(",");
        for (String item:dataArray) {
            datatemp.add(Float.valueOf(item));
        }
        try {
            dataRow = CSVFile.readLine();
        } catch (IOException e) {
            e.printStackTrace();
        }

        data.add(datatemp);
        datatemp.clear();
    }

    try {
        CSVFile.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:22:07.447

> 1）这样，csv文件的顺序将被保留。

是的

> 2）如何防止我的代码这样做？

每次都需要创建一个新的 tempArrayList：

```
while (dataRow != null){
    datatemp = new ArrayList<Float>(); 
```

> 3）有没有办法从我拥有的arraylist数据中制作一个普通的数组？

您可以创建一个数组列表数组：

```
ArrayList[] array = data.toArray(new  ArrayList[data.size()]); 
```

然后你可以递归地创建一个二维数组，但我会坚持使用更容易处理的列表列表。

> 4) 我读出 csv-File 的方式是正确的还是有更好的方法？

使用一个库，[有很多，](https://stackoverflow.com/questions/200609/can-you-recommend-a-java-library-for-reading-and-possibly-writing-csv-files)已经测试过了。正确解析 CSV 文件比乍看起来要困难得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:27:47.933

广告 1\. 你读过 ArrayList 参考资料吗？方法 add() “将指定元素附加到此列表的末尾。”

广告 2。您似乎还不了解参考的工作原理。只需在循环内声明 datatemp 并且不要清除它，它应该可以正常工作。

广告 3\. 请阅读课程参考。有一种排列方法。在我们的示例中像这样使用它：

```
Float[] array = data.toArray(new Float[data.size()]) 
```

广告 4\. 如果这不是学校作业，请使用图书馆。检查此线程：[Java 的 CSV API](https://stackoverflow.com/questions/101100/csv-api-for-java)

PS：请使用 Oracle 的文档，您的所有答案都在这里：[http ://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:19:47.823

不看细节，为什么不[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)？自己用过，好东西，相信我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:27:24.533

您将 datatemp 添加到数据数组，但随后清除数组。它也会清除数据中的数据。你需要像这样复制数组：

```
data.add(new ArrayList<Float>( datatemp ) ); 
```

我建议使用开源 csv 库而不是自己进行解析。

# mysql - 如何在 MySql 分页中使用或模拟 distinct

> ID：13804619
> 
> 赞同：0
> 
> 时间：2012-12-10T16:06:46.957
> 
> 标签：mysql, pagination, distinct

我有下表：

```
ID   Category_ID  Score  Name
1    1            60     Name_1
2    1            50     Name_2
3    2            40     Name_3
4    3            30     Name_4
5    4            10     Name_5 
```

假设我运行以下查询：

```
SELECT * from table ORDER BY Score DESC LIMIT 0, 2 
```

这将带给我：

```
ID   Category_ID  Score  Name
1    1            60     Name_1
2    1            50     Name_2 
```

如何避免在我的结果中重复 Category_ID（尽可能多），但将 ORDER BY 分数作为第一个条件。例如，我怎样才能得到以下内容：

```
ID   Category_ID  Score  Name
1    1            60     Name_1
3    2            40     Name_3   <-- Following higher score with different Category_ID 
```

并且对于

`SELECT * from table ORDER BY Score DESC LIMIT 1, 2`预期结果是：

```
ID   Category_ID  Score  Name
2    1            50     Name_2
4    3            30     Name_4 
```

`SELECT * from table ORDER BY Score DESC LIMIT 2, 2` 预期结果是：

```
ID   Category_ID  Score  Name
5    4            10     Name_5 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:51:04.790

您只需要选择所需的 ID。这将需要连接回原始表。这个版本给出了最小 id 的结果：

```
select t.*
from t join
     (select category_id, min(id) as minid
      from t
      group by category_id
     ) tsum
     on t.id = tsum.minid
order by max_score
limit 0, 2 
```

如果您想要最高分，请改为：

```
select t.*
from t join
     (select category_id, max(score) as maxscore
      from t
      group by category_id
     ) tsum
     on t.category_id = tsum.category_id and
        t.score = tsum.maxscore
order by max_score
limit 0, 2 
```

当然，这是假设最高分数只出现在一条记录上。

# embedded - Autosar——面向软件开发人员

> ID：13804623
> 
> 赞同：0
> 
> 时间：2012-12-10T16:06:53.693
> 
> 标签：embedded, autosar

考虑到我是一名可以用 C 语言编写一些软件的软件开发人员，您能否就与 Autosar 相关的这一点提出建议？

现在我用 C 语言开发一个功能，它必须读取一些 ECU 特定数据，处理它并更新一些 ECU 特定数据（可以是一些变量或 i/o 信号）。

1.  现在我将如何使用 Autosar RTE 和虚拟功能总线？对软件开发人员有什么用？

2.  另外，正如 Autosar 所说*的“接口标准化”*是什么意思？这是否意味着如果世界各地的其他人也在开发相同的功能（用 C 语言，比如我），我们都将使用相同名称的 API 来处理这些 I/O 信号？

3.  RTE 在单元测试中对我有什么帮助？或者从软件开发人员的角度来看，RTE 真正在做什么？

[http://www.autosar.org/gfx/AUTOSAR_TechnicalOverview_b.jpg](http://www.autosar.org/gfx/AUTOSAR_TechnicalOverview_b.jpg)

我阅读了很多技术术语......但作为一名软件开发人员，这些要点对我来说很重要。你能给我解释一下吗。

您的回复将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T09:50:53.777

我认为这不会那么容易……我相信您正在开发 Autosar SWC（软件组件）。我建议您开发一个可移植的 C 模块。这有非常明确的输入、输出和请求。执行时（检查 Autosar runnables）。请记住 Autosar ECU 包括 RTOS，因此您的模块将成为 OS 任务的一部分。如果您要构建 Autosar ECU，您将能够封装模块并使用 Autosar 虚拟功能总线信号连接输入/输出。为此，您将需要 Autosar 框架和可能的配置工具。这些是复杂且昂贵的。以测试 C 模块的常用方式对模块进行单元测试。祝你好运。

PS RTE 只是配置工具根据 ECU BSW 的配置和该 ECU 的系统提取自动生成的“胶水”代码。你会在包装过程中担心它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T09:39:32.563

将 AUTOSAR SWC 和 Basic 软件中的功能分开的想法是使应用程序软件开发独立于任何平台。回答你的问题。

1.  RTE 为应用程序提供了一个基于信号的接口，因此您希望其他软件组件（ECU 间/ECU 内部）以信号的形式提供所需的数据，您不必关心平台或通信介质的类型
2.  是的，通过标准化接口（所有类型的交互），软件组件或任何基本软件模块都可以**固定**到软件架构中。阅读有关不同类型的 AUTOSAR 接口的更多信息。
3.  参考答案1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T14:18:20.160

1.  RTE 作为“抽象”系统内部组件的层存在。例如，如果您需要访问系统安装的闪存，您必须使用与 RTE 相关的内存功能。

2.  你是对的。您只需要阅读规范并使用相应的功能即可在 AUTOSAR 系统中获得您想要的结果。

3.  RTE 确保软件组件和中间层系统的开发人员能够以最少的交互正常工作。SWC 开发人员只需要阅读 AUTOSAR 标准并遵循它以确保与中间层系统的兼容性，因为预计中间层系统开发人员将遵循相同的标准来提供自己的功能。它还可以帮助开发人员提高其软件的可移植性。

我认为您的所有问题都可以通过阅读[AUTOSAR 网站](http://www.autosar.org)上的 AUTOSAR 标准文档来回答。我在 AUTOSAR 系统开发方面的大部分知识有限（已经开始阅读它近一个月了），我到了那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T03:41:55.733

回答您的问题如果您将通过 AUTOSAR 的分层架构，您会知道遵循该架构以最小化每个模块（层）与较低层的依赖关系。

1.  同样，RTE 是一个类似的包装器，用于分离较低层的依赖关系，这使得可以独立地在每一层上工作。大多数虚拟总线都与 RTE 映射，根据我的经验，我曾在 IOC 上工作过，它允许与 RTE 映射，并通过内存和核心边界与其他 SWC 进行通信。对于 OS 开发人员，它通过应用程序层和映射的软件分区。

2.  该标准用于保持所有软件层的统一，但是为了满足需求，开发人员可能有不同的实现和设计方式，但 API 和需求将是通用的。
    这对于标准化接口也很有用。

3.  对于开发人员操作系统设计和实现的单元测试，RTE 作为抽象模块工作。

阅读不同模块的规范将解决大部分疑问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-18T08:57:10.497

我是一名软件开发人员，他为 Autosar RTE 开发了一个控制台应用程序工具，为 RTE 开发了测试用例生成，并为我创建的工具编写了单元测试脚本。我使用 C# 和 NUnit 框架开发了这些。同样可以使用 C 或 java 或任何其他语言开发。最终目标是根据需求生成 AUTOSAR 模块（.c 和 .h 文件）。

**一、软件开发者范围**

作为一名软件开发人员，我的任务是为已实施的 RTE 代码实施完整的 RTE 和测试应用程序。

输入和输出：基本上我们的输入是软件组件文件和 ECU 提取，它们是 ARXML 格式，输出是 Rte 以及根据要求创建的测试应用程序源和头文件（.c 和 .h）。

作为开发人员的任务：在这里，作为开发人员，我们需要执行从 AXXML 到我们自己的数据结构的输入解析、模式验证、模式验证、文件生成等。

**2.标准化**

是的，AUTOSAR 架构提供标准化接口。无论实施策略如何，API 结构都保持不变，从而简化了使用。这充当了一个通用库，您可以在其中使用已经开发的模块，或者您可以通过考虑 API 规范以自己的方式实现模块。您只需遵循为您使用的每个模块提供的规范。要求因公司而异，但使用 API 的方式保持不变。

**3\. 单元测试**

单元测试与 RTE 或 AUTOSAR 模块无关。您将测试代码的单位。当我说您的代码时，它是您用来开发任何特定模块（例如 Rte.c）而不是测试生成的模块本身的代码。您将测试您为生成特定模块而开发的源代码。您的源代码不是 RTE 或任何其他模块实现的一部分，而是生成模块实现的工具。

**概述：**

软件开发人员在生成 AUTOSAR 模块方面有不同的范围，具体取决于需求。您可以开发一个工具来生成 AUTOSAR 模块。您可以开发一个编辑器，用于编辑/创建 AUTOSAR XML 文件。（例如：Artop）开发可能听起来很复杂，因为除了规范之外我们没有直接的资源。一旦你进去，你会学到很多东西。

# java - 将输入密码与 Web 应用程序中存储的哈希密码进行比较

> ID：13804627
> 
> 赞同：3
> 
> 时间：2012-12-10T16:07:07.533
> 
> 标签：java, security, servlets, passwords

在阅读了这个美丽的问题之后：[为什么 char[] 优于 String 的密码？](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords)，我很好奇这如何应用于基于 servlet 的 Web 应用程序。假设您的 UI 有一些密码输入字段，密码将可以检索`request.getParameter("passwordFieldName")`，返回一个`String`. 即使您随后将其转换为 a `char[]`，您也必须等待 GC 清除该`String`对象。

此外，我正在研究用于密码散列的许多加密/散列库都有一个方法，例如`checkPassword(plaintext, hashed)`，如果输入的纯文本字符串给出的散列等于`hashed`. 有了这个，即使你有一个`char[]`，你仍然需要使用`new String(char[])`构造函数将数组转换为 String 。

在我看来，您似乎无法避免将密码作为字符串与其存储的表示进行比较。如果您担心在那个小窗口期间发生攻击，您如何保护自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:17:27.277

这是一种过度反应，实际上只是“安全剧院”。攻击者根本不希望在 Java 应用程序中使用长字符串作为密码。如果内存耗尽攻击是一个问题，那么不要在任何地方使用字符串。

话虽如此， [CWE-521](http://cwe.mitre.org/data/definitions/521.html)规定密码必须具有最大大小。字符串实际上没有最大大小，使用 a`char[x]`是强制执行最大大小的好方法。

# java - 获取位的位置以及是否设置

> ID：13804628
> 
> 赞同：0
> 
> 时间：2012-12-10T16:07:07.777
> 
> 标签：java, bit

我有一个函数可以检查是否设置了 int 中的某个位。但我认为会有一个更快的实现，因为这个是线性的，不能是最有效的，虽然我知道 int 应该在 1 到 1024 之间。

```
 public static int getBitPos(final int n) {
        if (Integer.bitCount(n) != 1)
            return Constants.UNDEFINED;
        else {
            for (int i = 0; i < Integer.MAX_VALUE; ++i) {
                if (testBit(n, i))
                    return i;
            }
        }
        return Constants.UNDEFINED;
    } 
```

`testBit`以下标准函数在哪里：

```
public static boolean testBit(final int n, final int pos) {
    int mask = 1 << pos;
    return (n & mask) == mask;
} 
```

但是桅杆有更快的方法，不是吗？如果我有值 17 并且我想知道是否设置了第 4 位（n = 8）？应该有一种更快的方法来检查是否设置了 n=8 的位...

希望你能帮我...

**编辑1：** 感谢您的支持。评论和答案使我误入歧途。我错误地设置了值，这使得它比需要的更复杂。我从来不擅长移位。如果我想设置第二位，我会这样设置值：

```
value = 2; 
```

如果我也想设置第 4 位，我根据第 4 位添加值：

```
value += 8; 
```

所以值为 10，并设置了第 2 位和第 4 位。因此，我将数字保存在班级中，而不是位位置（8 作为值，而不是 4 用于第 4 位，...）。更改此设置后，我可以摆脱不必要的功能，这太过分了！感谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:15:32.277

如果只有一个，您的代码总是返回最低位 1。你可以通过这样做来达到同样的目的：

```
int foo = whatever;
int lowestSetBit = Integer.numberOfTrailingZeros(foo) + 1; 
```

你的代码是

```
public static int getBitPos(final int n) {
    if (Integer.bitCount(n) == 1)
        return Integer.numberOfTrailingZeros(n) + 1;
    return Constants.UNDEFINED;
} 
```

# c++ - 带有查找表的霍夫曼代码

> ID：13804629
> 
> 赞同：5
> 
> 时间：2012-12-10T16:07:13.200
> 
> 标签：c++

我在互联网上读过一篇文章，知道从根目录遍历解码的自然方式，但我想用查找表更快地做到这一点。

读完后，我仍然无法获得积分。

前任：

```
输入：“abcdaabaaabaaa”
代码数据
0个
10 乙
110摄氏度
111天

```

文章说由于长度可变，它通过取一些最大代码长度的字符串来确定长度并将其用作索引。

```
输出：“010110111001000010000”
索引索引（二进制）代码位需要
0 000 一 1
1 001 一 1
2 010 一 1
3 011 一 1
4 100 乙 2
5 101 乙 2
6 110 c 3
7 111 天 3

```

我的问题是：

1.  这是什么意思`due to variable length, it determine the length by taking a bit of string of max code length`？如何确定长度？

2.  如何生成查找表以及如何使用它？背后的算法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:13:46.060

对于您的示例，最大代码长度为 3 位。因此，您从流 (010) 中获取前 3 位并使用它来索引表。这给出了代码“a”和位 = 1。您从输入流中消耗 1 位，输出代码，然后继续。在第二次运行时，您将获得 (101)，其索引为 'b' 和 2 位等。

要构建表，请将其设为 1 << max_code_length，并填写详细信息，就像您将索引解码为霍夫曼代码一样。如果您查看示例，所有以“0”开头的索引都是a，以“10”开头的索引是b，依此类推。

# c# - 无法在 Silverlight DataGrid 列中应用字符串格式

> ID：13804630
> 
> 赞同：1
> 
> 时间：2012-12-10T16:07:26.440
> 
> 标签：c#, .net, silverlight, datagrid, format

我有一个数据网格。其项目源设置为列表。我的问题是我无法应用字符串格式。这是我尝试过的格式。我错过了什么吗？StringFormat='MM/dd/yyyy' StringFormat={0:dd-MMM-yyyy}

附加生成的网格

```
 <sdk:DataGridTemplateColumn   Header="Recieved Date" Width="Auto"  >
                            <sdk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=RecievedDate, StringFormat=\{0:dd-MMM-yyyy\} }" />
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>
                            <sdk:DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <sdk:DatePicker Name="dtpFinancialAndComplianceLog" Text="{Binding Path=RecievedDate,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellEditingTemplate>
                        </sdk:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T05:15:41.677

如果我了解您要正确执行的操作，则您有一个 DataGrid 列，您希望以某种格式显示 DateTime 对象。通常，DateTime 对象会根据 System.Threading.Thread.CurrentUICulture 整理出自己的格式。

我所知道的将任何对象强制转换为某种格式的最简单方法是使用自定义 IValueConverter：

```
namespace MyProject.Converters
{
    public class FormatConverter : IValueConverter
    {//Suitable only for read-only data

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value == null)
                return string.Empty;
            if(string.IsNullOrEmpty(parameter.ToString()))
                return value.ToString();

            return string.Format(culture, parameter.ToString(), value);
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return null;
        }
    }
} 
```

将命名空间添加到您的 xaml:`xmlns:conv="clr-namespace:MyProject.Converters"`并在控件的资源中声明您的转换器后`<conv:FormatConverter x:Key="Formatter" />`，您需要使用新转换器绑定列的数据：

```
<TextBlock Text="{Binding Path=RecievedDate, Converter={StaticResource Formatter}, ConverterParameter=\{0:dd-MMM-yyy\} }" /> 
```

# iphone - 仅适用于 iphone 的 monotouch 应用程序分发

> ID：13804632
> 
> 赞同：1
> 
> 时间：2012-12-10T16:07:34.820
> 
> 标签：iphone, ios, xamarin.ios, distribution

我正在尝试为 iphone 分发一个 ios monotouch 项目。但每当我上传到 iTunes 连接二进制详细信息时不断告诉我它也可用于 ipad。

我确实在 info.plist 中指定了 targetdevice 有人对 monotouch 有同样的问题吗？或者更好，知道如何解决这个问题！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:01:28.673

您不能只针对 iPhone。iPad 100% 与 iPhone 兼容，可以运行所有 iPhone 应用程序（您对此无能为力）。

也许您可以解释为什么要将您的应用程序限制在 iPhone 上？

# java - 严重：org.hibernate.MappingException：命名查询未知：

> ID：13804635
> 
> 赞同：2
> 
> 时间：2012-12-10T16:07:43.097
> 
> 标签：java, spring, hibernate

在我的实体类中，我有以下内容，调用返回 sys_refcursor 的 oracle 函数

```
 @Entity
    @javax.persistence.NamedNativeQuery(name = "getEmp", 
    query = "{ ? = call getemployees }", resultClass = Employees.class, hints = {
    @javax.persistence.QueryHint(name = "org.hibernate.callable", value = "true") })
    @Table(name = "EMPLOYEES")
    public class Employees { 
```

在 DAO 我有

```
@Inject
    private SessionFactory sessionFactory;

    @Override
    public List<Employees> getEmployees() {

        List query = new ArrayList<Employees>();
         try{
         query = sessionFactory.getCurrentSession()
                .getNamedQuery("getEmp").list();
         }
         catch(Exception e){
             System.out.println("exception "+e.getMessage());
             e.printStackTrace();
         }
        return query;
    } 
```

但是当我运行我的应用程序时，我得到了以下异常

> 异常命名查询未知：getEmp 严重：org.hibernate.MappingException：命名查询未知：org.hibernate.internal.SessionImpl.getNamedQuery(SessionImpl) org.hibernate.internal.AbstractSessionImpl.getNamedQuery(AbstractSessionImpl.java:149) 的 getEmp .java:1257) 在 net.test.employees.dao.EmployeesDAO.getEmployees(EmployeesDAO.java:34) 在 net.test.employees.service.EmployeesService.getEmployees(EmployeesService.java:24)

我该如何解决这个问题？任何帮助都是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:51:57.857

我通过在**applicationContext.xml**添加以下内容解决了这个问题。

```
<property name="annotatedClasses">  
          <list>
           <value>net.test.model.Employees</value>
           </list>  
           </property> 
```

# c# - IIS 抱怨使用 LDAP 身份验证的身份模拟

> ID：13804636
> 
> 赞同：21
> 
> 时间：2012-12-10T16:07:42.523
> 
> 标签：c#, asp.net, authentication, .net-4.0, ldap

我按照教程在 ASP.NET/C# 4.0 Web 应用程序中实现 LDAP 身份验证。我在 Visual Studio 2010 中这样做了。该站点通过 Visual Studio 在调试模式下运行良好，但是当我在 IIS7 中发布该站点时，它失败并出现以下错误：

> HTTP 错误 500.24 - 内部服务器错误 检测到 ASP.NET 设置不适用于集成托管管道模式。
> 
> 最可能的原因：
> 
> *   system.web/identity@impersonate 设置为 true。

事实上，教程的一部分要求我将它添加到配置文件中......

```
<identity impersonate="true"/> 
```

那么为什么我会收到这个错误，我该如何解决呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-10T16:12:10.063

尝试将应用程序池的管道模式更改为“经典”

您可以通过打开 IIS -> Application Pools -> 右键单击​​您的应用程序池并选择 Basic Settings -> Managed pipline mode 来执行此操作，更改为`Classic`

重新启动您的应用程序池和站点（不应该尝试但永远不会受到伤害），然后重试。

您可以尝试的另一件事，而不是上面的，是将以下内容放入您的`web.config`文件中，在`<system.webServer>`节点内：

```
 <validation validateIntegratedModeConfiguration="false" /> 
```

# java - Java中连接表的JPA POJO

> ID：13804643
> 
> 赞同：0
> 
> 时间：2012-12-10T16:08:27.077
> 
> 标签：java, jakarta-ee, jpa, many-to-many, jointable

我想实现的是以下几点：

我有一个仪表板类和一个用户类。在我的（Java EE 项目）Java 代码中，我想获取用户已订阅的所有仪表板。

该数据库包含一个表 (dashboard_users)，其中包含以下字段：idUser、idDashboard、isDefault 和 ID。还应该有一个连接表的 Java POJO。

我的问题：

*   这三个类之间的 JPA MM 连接应该如何（Dashboard.java/User.java/UserDashboard.java）？

我遵循了很多教程和示例，但由于某种原因，总是存在错误或其他问题。如果有人可以举个例子，那将是非常受欢迎的，所以我可以看到我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:19:59.183

鉴于关联表上的额外属性，您将需要对其建模（通过`UserDashboard.java`您要求的类）。很不幸，因为它给你的模型层增加了大量的工作。

如果你发现你根本不需要额外的属性，那么我会使用一组仪表板对用户进行建模，通过`@JoinTable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:43:54.220

`User`您可以这样做的一种方法是将和之间的关系`Dashboard`视为一个映射，其中`Dashboard`是一个键，每个`Dashboard`与 关联的条目都有一个条目`User`，值是一个标志，指示这是否`Dashboard`是该的默认值`User`。我承认这有点强迫；这是看待这种关系的一种奇怪的方式，甚至可能像被指控的那样怀疑。

但是这个视图的优点是它可以让你从这样的一切中映射出生活日光：

```
@Entity
public class Dashboard {

    @Id
    private int id;
    private String name;

    public Dashboard(int id, String name) {
        this.id = id;
        this.name = name;
    }

    protected Dashboard() {}

}

@Entity
public class User {

    @Id
    private int id;
    private String name;
    @ElementCollection
    private Map<Dashboard, Boolean> dashboards;

    public User(int id, String name) {
        this.id = id;
        this.name = name;
        this.dashboards = new HashMap<Dashboard, Boolean>();
    }

    protected User() {}

    // disclaimer: the following 'business logic' is not necessarily of the finest quality

    public Set<Dashboard> getDashboards() {
        return dashboards.keySet();
    }

    public Dashboard getDefaultDashboard() {
        for (Entry<Dashboard, Boolean> dashboard : dashboards.entrySet()) {
            if (dashboard.getValue()) {
                return dashboard.getKey();
            }
        }
        return null;
    }

    public void addDashboard(Dashboard dashboard) {
        dashboards.put(dashboard, false);
    }

    public void setDefaultDashboard(Dashboard newDefaultDashboard) {
        Dashboard oldDefaultDashboard = getDefaultDashboard();
        if (oldDefaultDashboard != null) {
            dashboards.put(oldDefaultDashboard, false);
        }
        dashboards.put(newDefaultDashboard, true);
    }

} 
```

这映射了一个看起来像[这个 Hibernate-generated SQL](https://gist.github.com/4253248)的表结构，我认为这大致是你想要的。桌子上生成的名字`User_dashboards`很粗制滥造；您可以使用一些注释或一些 XML 轻松自定义它们。就个人而言，我喜欢将对象和数据库之间实际映射的所有肮脏细节保存在`orm.xml`; 这是您需要添加的内容以使用更合理的名称：

```
<entity class="User">
    <attributes>
        <element-collection name="dashboards">
            <map-key-join-column name="Dashboard_id" />
            <column name="is_default" />
        </element-collection>
    </attributes>
</entity> 
```

# c - Visual Studio 中的 printf SSE 变量 __m128i

> ID：13804644
> 
> 赞同：4
> 
> 时间：2012-12-10T16:08:30.607
> 
> 标签：c, visual-studio-2010, simd

我有一些使用 SIMD 优化和各种 __m128i 变量的代码。显然， printf 无法处理它们。有没有一种简单的方法可以打印它们的内容？我正在使用带有 C/C++ 的 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:15:58.507

使用此功能打印它们：

```
void print128_num(__m128i var)
{
    uint16_t *val = (uint16_t*) &var;//can also use uint32_t instead of 16_t
    printf("Numerical: %i %i %i %i %i %i %i %i \n", 
           val[0], val[1], val[2], val[3], val[4], val[5], 
           val[6], val[7]);
} 
```

您在打印之前将 128 位拆分为 16 位（或 32 位）。

如果您有 64 位支持，这是 64 位拆分和打印的一种方式：

```
void print128_num(__m128i var) 
{
    int64_t *v64val = (int64_t*) &var;
    printf("%.16llx %.16llx\n", v64val[1], v64val[0]);
} 
```

如果您想要输出，请替换`llx`为。`lld``int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:08:00.830

我根据 Vlad 的方法找到了答案：

```
__m128i var;
 printf("0x%I64x%I64x\n",var.m128i_i64[1], var.m128i_i64[0]); 
```

这会将整个 128 位值打印为十六进制字符串。

# excel - 数据验证，奇怪的错误

> ID：13804647
> 
> 赞同：1
> 
> 时间：2012-12-10T16:08:41.027
> 
> 标签：excel, excel-2010

我正在尝试验证 Excel 列是否只有包含`length > 1`以“d”结尾的值的值。我的尝试是以下公式：

```
=AND(LEN(INDIRECT(ADDRESS(ROW(),COLUMN())))>1,RIGHT(INDIRECT(ADDRESS(ROW(),COLUMN())),1) = "d") 
```

Excel 说公式包含错误。奇怪的是第一部分本身是正确的。但是当我把它放入 AND 时，我得到了错误。此外，当我用绝对引用替换 inderect 引用时，它会起作用：

```
=LEN(INDIRECT(ADDRESS(ROW(),COLUMN())))>1 => works

=AND(LEN(F4)>1, TRUE) => works

=AND(LEN(INDIRECT(ADDRESS(ROW(),COLUMN())))>1, TRUE) => fails 
```

为什么是这样？是否有其他方法或解决方法可以做到这一点？

在此先感谢，马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:18:20.803

不知道为什么你需要这么复杂。在列中顶部单元格的数据/验证自定义公式中，输入类似`=AND(LEN(H1)>1,RIGHT(H1,1)="d")` 的内容（例如，对于 col H）。然后复制该单元格，并为列中的其余单元格粘贴特殊/验证。有什么好处吗？

# java - PlaneManagerApp - 覆盖航空公司

> ID：13804648
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:08:42.773
> 
> 标签：java, hashmap, treemap

嘿，我正在制作一个 planeManagerApp。我有一个 TreeMap 包含 Airline ， HashMap(String,Plane);

我希望航空公司打印出属于它的飞机。因此，对于 RyanAir，我希望为他们打印 3 架飞机，对于 AerLingus，我希望为他们打印 3 架飞机。但是当我跑步时，我最后添加了航空公司，并添加了所有飞机。

这是我的代码：

```
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class MainApp
{
    public static void main(String[] args)
    {
        //PlaneStore map = new PlaneStore();

        Airline a1 = new Airline("Aer Lingus");

        Plane p1 = new Plane("A01", 150.5, 10.5, 500, Plane.AIRPLANETYPE.AIRBUS);
        Plane p2 = new Plane("B01", 50.3, 1.5, 91, Plane.AIRPLANETYPE.CORPORATE);
        Plane p3 = new Plane("C01", 12.2, -3.1, 56, Plane.AIRPLANETYPE.AIRBUS);

        Airline a2 = new Airline("Brian Air");

        Plane p4 = new Plane("D01", 10.5, 1.5, 430, Plane.AIRPLANETYPE.PRIVATE);
        Plane p5 = new Plane("E01", 0.3, 2.1, 101, Plane.AIRPLANETYPE.CORPORATE);
        Plane p6 = new Plane("F01", 2.2, -3, 291, Plane.AIRPLANETYPE.AIRBUS);

        HashMap<String, Plane> airlineMap = new HashMap<String, Plane>();

        airlineMap.put(p1.getFlightNumber(), p1);
        airlineMap.put(p2.getFlightNumber(), p2);
        airlineMap.put(p3.getFlightNumber(), p3);

        airlineMap.put(p4.getFlightNumber(), p4);
        airlineMap.put(p5.getFlightNumber(), p5);
        airlineMap.put(p6.getFlightNumber(), p6);

        TreeMap<Airline, HashMap<String, Plane>> map = new TreeMap<Airline, HashMap<String, Plane>>();
        map.put(a1, airlineMap);
        map.put(a2, airlineMap);

        System.out.println("\n-------- PRINT KEY DETAILS --------");
        for(Map.Entry theEntry : map.entrySet())
            System.out.println(theEntry.getKey());

        for(Map.Entry theEntry : map.entrySet())
        {   
            HashMap<String, Plane> map2= (HashMap<String, Plane>)theEntry.getValue();

            System.out.println("\n-------- PRINT CLIENT DETAILS --------");
            for(Map.Entry theNextEntry : map2.entrySet())
                System.out.println(theNextEntry.getValue());    
        }

        //Plane p4 = new Plane("D01", 300.9, 45, 402, Plane.AIRPLANETYPE.PRIVATE);
        //Plane p5 = new Plane("E01", 455, 23, 100, Plane.AIRPLANETYPE.AIRBUS);

        //Airline.airlineMap.add("Aer Lingus", p1);

       // map.put(Airline.getAirlineName(), p1);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:15:17.520

这些飞机从未与特定航空公司相关联。你创建 6 架飞机，给他们航班号。将航班号与飞机相关联，然后将两家航空公司与整个`airlineMap`哈希图相关联。

```
map.put(a1, airlineMap);
map.put(a2, airlineMap); 
```

这条线路是将飞机与航空公司联系起来的唯一线路。

# ios - 如何构建针对 iOS 优化的 ffmpeg，可能使用硬件解码？

> ID：13804651
> 
> 赞同：1
> 
> 时间：2012-12-10T16:09:03.790
> 
> 标签：ios, ffmpeg

我为 ios 制作了一个基于 FFMPEG 的播放器。它在模拟器上运行良好，但在真实设备（iPhone 4）上帧速率很低，使我的音频和视频不同步。该播放器在 iPhone 4s 上运行良好，所以我猜这只是设备计算能力的问题。

那么，无论如何构建针对iOS设备（armv7，arvm7s arch）优化的FFMPEG？还是有没有利用 ios 设备硬件来解码视频流？

我的视频流采用 H264/AAC 编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:38:10.837

这些流应该可以正常播放，我假设因为您使用 ffmpeg 您没有使用 iOS 直接支持的视频协议。

我们使用 ffmpeg 做 rtsp/rtmp，我们使用 h264/aac 获得了良好的性能

导致 av/sync 问题的因素有很多，通常需要对视频进行某种类型的预缓冲，网络在其中也起着重要作用。

至于你的第二个问题，硬件编码只能通过 avfoundation 获得，你可以使用 avassetwriter 来编码你的视频，但同样取决于你是否需要实时。

看到这个链接[https://github.com/mooncatventures-group/FFPlayer-beta1/blob/master/FFAVFrames-test/ViewController.m](https://github.com/mooncatventures-group/FFPlayer-beta1/blob/master/FFAVFrames-test/ViewController.m)

```
-(void) startRecording {

    //  // create the AVComposition
    //  [mutableComposition release];
    //  mutableComposition = [[AVMutableComposition alloc] init];

    movieURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%llu.mov", NSTemporaryDirectory(), mach_absolute_time()]];

    NSError *movieError = nil;
    assetWriter = [[AVAssetWriter alloc] initWithURL:movieURL 
                                            fileType: AVFileTypeQuickTimeMovie 
                                               error: &movieError];
    NSDictionary *assetWriterInputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                              AVVideoCodecH264, AVVideoCodecKey,
                                              [NSNumber numberWithInt:FRAME_WIDTH], AVVideoWidthKey,
                                              [NSNumber numberWithInt:FRAME_HEIGHT], AVVideoHeightKey,
                                              nil];
    assetWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType: AVMediaTypeVideo
                                                          outputSettings:assetWriterInputSettings];
    assetWriterInput.expectsMediaDataInRealTime = YES;
    [assetWriter addInput:assetWriterInput];

    assetWriterPixelBufferAdaptor = [[AVAssetWriterInputPixelBufferAdaptor  alloc]
                                     initWithAssetWriterInput:assetWriterInput
                                     sourcePixelBufferAttributes:nil];
    [assetWriter startWriting];

    firstFrameWallClockTime = CFAbsoluteTimeGetCurrent();
    [assetWriter startSessionAtSourceTime:kCMTimeZero];
    startSampleing=YES;
} 
```

现在的一个缺点是需要确定一种方式来读取正在写入的编码数据，相信我，当我说我们中的一些开发人员在我写这篇文章时试图弄清楚如何做到这一点时。

# c# - 调整 WriteableBitmap 大小时获得全黑结果

> ID：13804659
> 
> 赞同：1
> 
> 时间：2012-12-10T16:09:28.777
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone

我发现我的问题在于我用来调整图片大小的方法：这是代码：

```
 private WriteableBitmap ResizeImage(BitmapImage original, double destWidth, double destHeight)
        {
            Image image = new Image()
            {
                Source = original,             
                Stretch = Stretch.UniformToFill
            };
            image.UpdateLayout();
            int origWidth = original.PixelWidth;
            int origHeight = original.PixelHeight;
            ScaleTransform st = new ScaleTransform();                
            st.ScaleX = destWidth / (double)origWidth;
            st.ScaleY = destHeight / (double) origHeight;
            WriteableBitmap result = new WriteableBitmap((int)destWidth, (int)destHeight);
            result.Render(image, st);
            result.Invalidate();
            return result;
        } 
```

我在两种情况下测试了我的代码：

1.  从“相机胶卷”传递图片
2.  从其他相册传递图片

我的代码将适用于“相机胶卷”图片，但对于从其他相册加载的图片，它将返回一个全黑的结果。

在任何一种情况下，无论位图是否全黑，此方法都会返回位图正确的宽度和高度。

对于这两种情况，我使用相同的方法加载图片，但是为什么只能显示来自相机胶卷的图片而来自其他相册的图片不能显示？

我知道 WriteableBitmapEx 库有完美调整大小的方法。但我只是好奇为什么我的方法不起作用？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:05:00.967

尝试以下操作：

```
private static BitmapSource ResizeImage(BitmapImage original, int destWidth, int destHeight)
{
    if (original == null) return null;
    if (destWidth == original.PixelWidth && destHeight == original.PixelHeight) return original;
    return new TransformedBitmap(original, new ScaleTransform((double)destWidth / original.PixelWidth, (double)destHeight / original.PixelHeight));
} 
```

我不确定 Windows Phone 上是否可以使用 TransformedBitmap ......

* * *

顺便说一句，您正在执行整数除法：

```
st.ScaleX = destWidth / origWidth;
st.ScaleY = destHeight / origHeight; 
```

例如， if`destWidth=150`和`origWidth=300`then`st.ScaleX`将是**0.0**（不是**0.5**）。

# javascript - 如果我们刷新页面，Jquery UI 滑块不会保留所选值

> ID：13804663
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:09:51.777
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery UI 滑块，它工作正常。但是，如果我刷新页面，滑块将返回默认值，而不是保留所选值。请帮我解决这个问题。

Javascript：

```
 var selected = $( "#selectedValue" ).html();

    $("#valueSlider").slider({
        min: 0,
        max: 100,
        range: "min",
        slide: function( event, ui ) {
            $('#selectedValue').html(ui.value);
            selected = ui.value;
        },
        value: selected,
    });
    $('#selectedValue').html($( "#valueSlider" ).slider( "value" )); 
```

HTML：

```
<div class="valueSliderContainer">
                <label>
                    Value: <span id="selectedValue">45</span>                                           
                    <div id="valueSlider"></div>
                </label>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:17:12.157

除非您将所选值放入存储中，例如客户端存储，例如 cookie 等，否则您的滑块将设置回默认值。（这就是刷新的作用）

对于使用 cookie 并在此处设置值是一个很好的教程

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# android - PhoneGap 的推送消息

> ID：13804667
> 
> 赞同：2
> 
> 时间：2012-12-10T16:10:02.257
> 
> 标签：android, iphone, ios, cordova, apple-push-notifications

我使用 Phonegap 为 iPhone 和 Android 创建了一个应用程序。

现在我想添加已经很好用的推送功能。

当推送消息到达我的 iPhone 时，我会在主屏幕上收到一条消息。如果我滑动它，iOS 将打开我的应用程序。- 到目前为止，一切都很好。

现在，在我的 PhoneGap 应用程序中，我需要检查该消息的实际内容，以便**通过 JavaScript**在我的应用程序中打开正确的视图。

我知道有很多关于此的帖子，但我找不到这些问题的明确答案：

*   PhoneGap 是否支持推送消息？
*   如果是，那么文档在哪里？
*   如果没有，可以推荐哪些插件/框架？到目前为止，我找到了 pushwoosh 和 Urbanair。他们有什么好处吗？
*   关于 Pushwoosh，我注意到我需要某种 pushwoosh ID - 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:27:19.490

通过 Pushwoosh ID，您很可能是指 Pushwoosh 应用程序 ID 或应用程序代码。这是您在 Pushwoosh 控制面板中的应用程序 ID（当前格式为 XXXXX-XXXXX）。只要在 Pushwoosh 中添加新应用程序，您就会看到它。

Holly Schinsky 发表了一篇关于 PhoneGap 与 Pushwoosh 轻松集成的相当广泛的博客文章

[http://devgirl.org/2012/12/04/easy-phonegap-push-notifications-with-pushwoosh/](http://devgirl.org/2012/12/04/easy-phonegap-push-notifications-with-pushwoosh/)

对于所有希望将推送通知集成到他们的应用程序中的 PhoneGap 开发人员来说，它应该非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:31:19.363

我找到了一个非常简单的解决方案，无需使用框架。

我只是将以下代码添加到方法*didFinishLaunchingWithOptions*的最后（就在 return 语句之前）：

```
if (launchOptions != nil)
{
    NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if (dictionary != nil)
    {
        NSLog(@"Launched from push notification: %@", dictionary);
        [self addMessageFromRemoteNotification:dictionary updateUI:NO];
    }
} 
```

此外，我将这个新方法添加到我的 AppDelegate.m 中，它从推送消息中获取有效负载：

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo
{
    NSLog(@"Received notification: %@", userInfo);
    [self addMessageFromRemoteNotification:userInfo updateUI:YES];
} 
```

*（上面的 NSLog 调用将显示推送消息中的内容）*

作为最后一步，我添加了这个监听器，以便对有效负载做任何我想做的事情：

```
- (void)addMessageFromRemoteNotification:(NSDictionary*)userInfo updateUI:(BOOL)updateUI
{
 // do what ever you want with userInfo
} 
```

如果您想使用此信息进行额外的 JavaScript 调用，我建议使用：

```
[self.viewController.webView stringByEvaluatingJavaScriptFromString:@"callSomeJSFunction()"]; 
```

当然，如果需要，您也可以将参数作为字符串传递给该 JS 函数。

# scp - 如果您通过 ssh 隧道 scp 文件，该文件会被加密两次吗？

> ID：13804670
> 
> 赞同：2
> 
> 时间：2012-12-10T16:10:20.627
> 
> 标签：scp, ssh-tunnel

背景信息：服务器 A 需要向服务器 B 发送数据，但我不允许在它们之间的防火墙中打开任何其他端口。有一个 ssh 端口打开，所以我选择通过 ssh 隧道发送数据。但是，我现在还需要将文件从 A 复制到 B。

问题：如果我通过现有的 ssh 隧道从 A 到 B scp 文件，文件会被加密两次吗？还是 scp “足够聪明” 可以利用现有隧道？

如果可能的话，我想避免加密两次的额外开销。

还有其他方法可以通过 ssh 隧道发送文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T11:24:58.463

不确定双重加密（我猜是的），但为什么要`scp`使用`ssh tunnel`? `scp`正在使用 ssh 连接，因此，防火墙等没有问题。

如果您正在寻找替代方案，则可以使用`rsync`over`ssh`与以下类似的内容：

`rsync -avz -e ssh /home/me myname@servername:/some/folder`

希望这可以帮助。

# javascript - 在需要时加载 javascript 文件

> ID：13804677
> 
> 赞同：1
> 
> 时间：2012-12-10T16:10:47.523
> 
> 标签：javascript, jquery

我正在开发一个基于小部件/小工具的网站，因为用户可以在屏幕上选择他/她想要的小部件/小工具。

这意味着我将拥有数百/数千个 js 文件，每个小部件/小工具 1 个。我认为我可以根据用户选择在需要时使用 $.getScript 加载正确的 js 文件。

我发现的问题是 $.getScript 只能通过 javascript 全局变量发送变量。全局变量和 $.getScript 似乎不能很好地结合在一起。

还有另一种方法吗？即以某种方式仅根据用户选择在需要时加载js文件，其中加载的js文件可以从调用子js文件的js文件中接收变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:14:30.820

这个问题的解决方案是使用像[require.js](http://requirejs.org/)这样的模块加载器系统。

它会根据每个名为依赖项的文件自动知道要加载哪些文件。

您的模块将清楚地概述它们的依赖关系，如下所示：

```
require(["helper/util"], function(util) {
    //This function is called when scripts/helper/util.js is loaded.
    //If util.js calls define(), then this function is not fired until
    //util's dependencies have loaded, and the util argument will hold
    //the module value for "helper/util".
}); 
```

一旦他们完成了 require.js 加载器将自动为您加载正确的 JS 文件。这有点不同的语法，但它会解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T16:13:51.617

> 我发现的问题是 $.getScript 只能通过 javascript 全局变量发送变量。全局变量和 $.getScript 似乎不能很好地结合在一起。

通过加载的脚本`$.getScript`可以很好地访问全局变量。（并不是说全局变量是个好主意。）

但是将信息传递给加载的脚本的另一种方法是让每个脚本根据脚本名称实现加载后回调，并且让加载器代码调用该回调（使用要传递给它的参数）`$.getScript`一次它的东西。

[实例](http://jsbin.com/amuhoq/1)| [资源](http://jsbin.com/amuhoq/1)

当然，该示例也使用了全局变量——`$`对于 jQuery，新脚本的`theNewScript`加载完成函数是全局变量。在生产系统中，要做到这一点，我的整个应用程序只有**一个**全局变量（例如，`MyApp`），在一个作用域函数中定义我的所有代码以避免创建任何其他全局变量，并让新脚本设置它“加载完成”功能作为其属性。（通常我根本不定义任何全局变量，因为我通常不要求加载脚本。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:38:02.760

尝试使用纯 javascript 调用您的脚本

```
 var html_doc = document.getElementsByTagName('head')[0];
        js = document.createElement('script');
        js.setAttribute('type', 'text/javascript');
        js.setAttribute('src', '../scripts/jquery-1.7.2.min.js');
        html_doc.appendChild(js);
        js.onreadystatechange = function () {
            if (js.readyState == 'loaded' || js.readyState == 'complete') {
                doSomething
            }
        }

        //works on ff e no chrome
        js.onload = function () { doSomething } 
```

# linux - BUG：无法处理内核分页请求

> ID：13804682
> 
> 赞同：11
> 
> 时间：2012-12-10T16:11:01.167
> 
> 标签：linux, kernel, driver, paging, pci

我正在为一个简单的测试设备编写 PCI 驱动程序。

使用 lspci 可以正确识别硬件（您可以看到我的驱动程序*vabs*已注册）：

```
04:02.0 Non-VGA unclassified device: Device bace:55aa
    Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
    Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
    Latency: 0
    Region 0: Memory at f0000000 (32-bit, prefetchable) [size=16M]
    Kernel driver in use: vabs 
```

驱动程序和 PCI 子系统的初始化和取消初始化工作正常。我得到了一个设备号，并且 udev 创建了一个设备文件。

从设备文件读取时，我收到以下错误消息：

```
BUG: unable to handle kernel paging request at 00000000f0000000 
```

我在初始化中成功请求 PCI 资源。这将为 memstart0 返回 00000000f0000000，这是我的 PCI 基地址 0。

```
memstart0 = pci_resource_start( pdev, 0 );
memlen = pci_resource_len( pdev, 0 );
if( request_mem_region(memstart0,memlen,pdev->dev.kobj.name)==NULL ) {
    dev_err(&pdev->dev,"Memory address conflict for device\n");
    goto cleanup_mem;
} 
```

尝试使用以下代码从该 memio 地址读取会出现上述错误：

```
ssize_t driver_read(struct file *instance, char __user *buffer, size_t max_bytes_to_read, loff_t *offset) {
    u32 test;

    dev_dbg(vabs_dev,"copying from %p\n", (void *) memstart0);
    test = readl((void *) memstart0);

    return max_bytes_to_read;
} 
```

我还尝试了其他访问函数，如 memcpy_fromio、ioread32 和直接指针访问，结果相同。

硬件在 Windows 机器上工作。唯一显着的区别是，Windows 将基地址 0 保留为 00000000f **d** 000000，而 Linux 将其保留为 00000000f **0** 000000。

这是用于公立学校的非营利教育目的。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T17:08:03.320

阅读[Documentation/IO-mapping.txt](http://lxr.free-electrons.com/source/Documentation/io-mapping.txt)（搜索“iomap”）和/或[LDD3 的第 15 章](http://lwn.net/images/pdf/LDD3/ch15.pdf)。

`request_mem_region`只是确保没有其他驱动程序已经占用了该内存区域。您仍然需要将其映射到内核的 VM 空间，`iomap`然后才能读取/写入它。

请注意，整个`pci_resource_start`etc. 舞蹈在某种程度上已被弃用。我相信这些天推荐的方法是：

```
pci_request_regions(pdev, "myname");  /* to request regions for all BARs */ 
```

然后：

```
void __iomem *base = pci_iomap(pdev, 0, pci_resources_len(pdev,0)); /* to map BAR 0 */ 
```

然后：

```
ioread32(base + offset);  /* Or readl(base + offset), but this is more generic */ 
```

最后，最后：

```
pci_iounmap(pdev, base);  /* Release kernel VM mapping (undoes pci_iomap) */
pci_release_regions(pdev); /* Release all regions (undoes pci_request_regions) */ 
```

您可以通过组合`pci_resource_start`、`pci_resource_len`、`request_mem_region`和手动执行前两个操作`iomap`。但以上是 (a) 更短且 (b) 内存映射设备和使用旧 x86 I/O 空间的设备之间的通用性。（并不是说周围有很多这样的人了。）

# php - 如何将图像从画布标签保存到 php 服务器？

> ID：13804683
> 
> 赞同：4
> 
> 时间：2012-12-10T16:11:17.927
> 
> 标签：php, javascript, ajax, html

我有一个这样的javascript代码

```
var testCanvas = document.getElementById('canvas-1');
var canvasData = testCanvas.toDataURL("image/png");
var ajax = new XMLHttpRequest();
ajax.open("POST",'http://www.domain.com/imgsave.php',true);
ajax.setRequestHeader('Content-Type', 'canvas/upload');
ajax.send("canvasData"+canvasData ); 
```

我的php代码是这样的

```
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{
    // Get the data
    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    $unencodedData=base64_decode($filteredData);
    $fp = fopen( 'test.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
        echo "saved";
}
  else{

  echo "no raw data";
  } 
```

执行此代码时，我得到了一个零大小的 png 文件图像？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:18:37.543

我最近不得不自己做这件事。

首先，我将 canvasData 放入一个隐藏字段并将其发布到我的 PHP 页面。

它以这种格式返回：`data:image/png;base64,iVBORw0......`

您需要先拆分数据，因为：`data:image/png;base64,`是标题信息。其余的是编码数据。

```
$rawData = $_POST['imageData'];
$filteredData = explode(',', $rawData);

$unencoded = base64_decode($filteredData[1]); 
```

然后我在我的服务器上创建图像：

```
//Create the image 
$fp = fopen('sigs/test1.png', 'w');
fwrite($fp, $unencoded);
fclose($fp); 
```

然后阅读它来做我想做的任何事情。

```
$file_name = 'test1.png';
$file_size = strlen($filteredData[1])/1024; //This may be wrong, doesn't seem to break for me though.

$fh = fopen('sigs/test1.png', 'r');
$content = fread($fh, $file_size);
$content = base64_encode($content);
fclose($fh); 
```

我非常确定有一个更优雅的解决方案，但这对我有用！

检查此以获取更多信息（可能）：[我自己的问题](https://stackoverflow.com/questions/13751555/how-can-i-save-a-dynamically-generated-image-to-my-database)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:30:44.960

这是我通过 ajax 从画布中保存图像的方法。我在客户端使用 jQuery

```
 jQuery.ajax({
     url: 'save.php',
     type: 'POST',
     data: {
         data: c.toDataURL('image/png')
     },
     complete: function(data, status)
     {
         if(status=='success')
         {
            alert('saved!');
         }
         alert('Error has been occurred');
     }

 }); 
```

php:

```
 $based64Image=substr($_POST['data'], strpos($_POST['data'], ',')+1);

    $image = imagecreatefromstring(base64_decode($based64Image));

    $fileName='';
    if($image != false)
    {
        $fileName=time().'.png';
        if(!imagepng($image, $fileName))
        {
//          fail;
        }
    }
    else
    {
//          fail;
    } 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:21:32.867

根据[手册中的评论](http://php.net/manual/en/reserved.variables.httprawpostdata.php)，要获取 HTTP_RAW_POST_DATA，您需要执行以下操作：

```
<?php $postdata = file_get_contents("php://input"); ?> 
```

该手册对包装器进行了说明，例如`php://input`：

> 对于 POST 请求，最好使用 php://input 而不是 $HTTP_RAW_POST_DATA，因为它不依赖于特殊的 php.ini 指令。

# c# - linq 使用时间戳列进行过滤

> ID：13804684
> 
> 赞同：1
> 
> 时间：2012-12-10T16:11:18.860
> 
> 标签：c#, asp.net, asp.net-mvc, linq, entity-framework

我有一个具有时间戳列的 sqlserver 表，我正在尝试使用它来过滤这样的 linq 查询：

```
byte[] filtroTimeStamp = SessionBag.Current.mesasTimeStamp; 

var ubicAbiertas = from uA in db.TableA
    select uA;

ubicAbiertas = ubicAbiertas.Where(
     y => y.BitAbierta == true 
   & y.BitBloqueada == true 
   & y.TimeStampUltimoCambio == filtroTimeStamp); 
```

当我尝试这种方式时，它显示一个错误：运算符 & 不能应用于 bool 和 byte[] 类型的操作数

如何使用 Byte[] 值作为 linq Query 的过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:14:21.853

那应该是 && （两个不是一个＆符号），例如

```
&& y.BitBloqueada == true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:16:29.830

您必须使用执行逻辑与的[&& 运算符：](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDEQFjAA&url=http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.71%29.aspx&ei=LwvGUMfNHsHi4QSRgYGYCA&usg=AFQjCNGeR1L3L_RCqlMOdAMudPserpIkpw)

```
ubicAbiertas = ubicAbiertas.Where(y => y.BitAbierta == true 
                                  && y.BitBloqueada == true
                                  && y.TimeStampUltimoCambio == filtroTimeStamp); 
```

# knockout.js - 如何将 knockoutjs 数据绑定与 winjs datepicker 一起使用

> ID：13804686
> 
> 赞同：3
> 
> 时间：2012-12-10T16:11:23.677
> 
> 标签：knockout.js, winjs

我使用以下代码创建了一个 DataPicker 控件。

```
<div id="date" data-win-control="WinJS.UI.DatePicker"></div> 
```

我想使用敲除绑定到从 WinJS 生成的 3 个选择列表。有没有办法使用淘汰声明性数据绑定来绑定到生成的选择列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:37:52.333

```
ko.bindingHandlers['winjsDatePicker'] = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor(),
            allBindings = allBindingsAccessor(),
            options = allBindings['winjsDatePickerOptions'] || {};
        options['current'] = value;

        // Flatten the options for DatePicker
        var dpOptions = {};
        ko.utils.arrayForEach([
            'calendar', 'current', 'datePattern', 'disabled', 'element',
            'maxYear', 'minYear', 'monthPattern', 'yearPattern'
        ], function (prop) {
            if (options.hasOwnProperty(prop)) {
                dpOptions[prop] = ko.utils.unwrapObservable(options[prop]);
            }
        });

        // Use jQuery to store the value-observable with the element
        $(element).data('winjsDatePickerCurrent', value);

        // Create the DatePicker, and pass it the options
        var dp = new WinJS.UI.DatePicker(element, dpOptions);

        // Wire up the onchange event
        dp.addEventListener("change", function() {
            var value = $(element).data('winjsDatePickerCurrent');
            if (ko.isWriteableObservable(value)) {
                value(dp.current);
            }
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor) {
        var dp = element.winControl,
            value = valueAccessor(),
            allBindings = allBindingsAccessor(),
            options = allBindings['winjsDatePickerOptions'] || {};
        options['current'] = value;

        // Update the value-observable
        $(element).data('winjsDatePickerCurrent', value);

        // Update any properties
        ko.utils.arrayForEach([
            'calendar', 'current', 'datePattern', 'disabled', 'element',
            'maxYear', 'minYear', 'monthPattern', 'yearPattern'
        ], function (prop) {
            if (options[prop] !== undefined) {
                dp[prop] = ko.utils.unwrapObservable(options[prop]);
            }
        });
    }
}; 
```

```
<div data-bind="winjsDatePicker: date"></div>​
<div data-bind="winjsDatePicker: date, winjsDatePickerOptions: { minYear: 2012 }"></div>​ 
```

[http://jsfiddle.net/MizardX/rs8Cd/](http://jsfiddle.net/MizardX/rs8Cd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:58:31.417

我可能会研究自定义绑定。您仍然可以为 DatePicker 使用声明性标记，但在自定义绑定中实例化 DatePicker 可能更容易。

注意：我没有机会对此进行测试，但它可能会为您指明正确的方向。另外，我认为在 WinJS 世界中，他们更喜欢你这样做，`data-win-bind="winControl.current: yourprop"`但如果你想使用 KO，可能有办法。

```
ko.bindingHandlers.winDatePicker = {
    init: function (element, valueAccessor) {
        var currentDate = valueAccessor() || {};

        // In order for this to be true, you would had to call WinJS.UI.processAll() and *then* ko.applyBindings()
        if (element.winControl) {
            element.winControl.current = currentDate;
        }

    },
    update: function (element, valueAccessor) {
        var currentDate = valueAccessor() || {};

        if (element.winControl) {
            element.winControl.current = currentDate;
        }
    }
};

/// <div data-bind="winDatePicker: myObservable" data-win-control="WinJS.UI.DatePicker" /> 
```

你可以看看我做的这个要点。但是没有任何保证！您需要`WinJS.Binding.processAll`在使用此之前致电：[https ://gist.github.com/4183235](https://gist.github.com/4183235)

# php - 使用 get_file_contents() 创建一个数组

> ID：13804694
> 
> 赞同：0
> 
> 时间：2012-12-10T16:11:53.303
> 
> 标签：php, arrays, csv

我正在尝试上传一个 CSV 文件并将其内容放入一个数组中，但我收到了一个错误：（10 后每行的此错误的倍数）

```
Notice: Undefined offset: 1 in C:\xampp\htdocs\amazon\upload_file.php on line 10 
```

以下是我的代码示例：

```
if ($handle = file_get_contents($_FILES["file"]["tmp_name"])) {

$data = array();

while ($csv = array(file_get_contents($_FILES["file"]["tmp_name"]))) {
    $data = array(
        'order-id' => $csv[0],
        'order-item-id' => $csv[1], //This is line 10.
        'purchase-date' => $csv[2],
        'payments-date' => $csv[3], 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:14:01.573

`file()`opens 将每个元素作为一个数组元素。`fgetcsv()`它的函数族在处理 csv 文件时非常有用。

您的代码`array(file_get_contents($_FILES["file"]["tmp_name"]))`将永远只有一个元素，因为 file_get_contents 返回一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:14:10.213

### 如果您的文件只有一行，则会出现此问题。

我想你需要这样做。

```
$row = explode(",", $csv[0]);
$data = array(
    'order-id' => $fileArray[0],
    'order-item-id' => $row[1], //This is line 10.
    'purchase-date' => $row[2],
    'payments-date' => $row[3]
); 
```

此外，您可以使用[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)解析 CSV 文件等功能。

# c# - EF5 代码优先 - 带有额外字段的多对多

> ID：13804701
> 
> 赞同：4
> 
> 时间：2012-12-10T16:12:12.557
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

我正在尝试首先使用带有代码的 EF5 - 我需要制作一个带有额外字段的多对多表。

我有一个产品表、订单表，并且需要一个带有“尺寸”字段的订单产品表。

我所做的是创建了一个新的“ProductOrder”类，即它们之间的连接表，并进行了引用。

它在创建新订单时工作，但在获取订单时不工作 - 它没有获得连接的订单（插入后存在于数据库中）。

想法为什么？:)

我的课程是：

```
public class Order
{
    public int ID { get; set; }
    ...
    public ICollection<ProductOrder> Products { get; set; }
    public Order()
    {
        Products = new HashSet<ProductOrder>();
    }
}

public class Product
{
    public int ID { get; set; }
    public ICollection<ProductOrder> Orders { get; set; }
}

public class ProductOrder
{
    public int ID { get; set; }
    public int ProductID { get; set; }
    public int OrderID { get; set; }
    public int Size { get; set; }

    [ForeignKey("OrderID")]
    public Order order { get; set; }

    [ForeignKey("ProductID")]
    public Product product { get; set; }
} 
```

并在 onModelCreating

```
 modelBuilder.Entity<Order>()
        .HasMany(p => p.Products)
        .WithRequired(o => o.order)
        .HasForeignKey(o => o.OrderID);

    modelBuilder.Entity<Product>()
        .HasMany(o => o.Orders)
        .WithRequired(p => p.product)
        .HasForeignKey(p => p.ProductID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:16:34.253

您的导航属性需要是虚拟的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:43:29.040

从我所见，将导航属性标记为虚拟会为这些属性开启延迟加载。

在不延迟加载的情况下使其工作的另一种方法是将`.include()`语句添加到您的选择中。这告诉 EF 撤回您想要的额外数据。

# symfony - 使用 HWIOAuthBundle 自动注册用户

> ID：13804703
> 
> 赞同：2
> 
> 时间：2012-12-10T16:12:15.210
> 
> 标签：symfony, hwioauthbundle

我正在使用`HWIOAuthBundle`with`FOSUserBundle`成功。

当我转到该`/login`页面时，它会将我重定向到 Google 帐户、授权并返回填写数据的注册表单（密码字段除外）。

是否可以使用省略注册表单自动注册用户？

在这种情况下，由于使用 Google 帐户进行身份验证，我们不需要密码。

我应该如何实现这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T18:10:38.473

一个问题有点老了，但迟到总比没有好。

您只需要创建一个**自定义提供程序**- 如果您想将捆绑包与 FOSUserBundle 集成，您需要覆盖[FOSUBUserProvider](https://github.com/hwi/HWIOAuthBundle/blob/master/Security/Core/User/FOSUBUserProvider.php)类。

在[HWIOAuthBundle/Security/Core/User](https://github.com/hwi/HWIOAuthBundle/tree/master/Security/Core/User)目录中，您可以找到 OAuthBundle 中可用的所有提供程序。

*要在连接*时创建新用户，您只需覆盖 FOSUBUserProvider（或 EntityUserProvider 等）提供程序类的 loadUserByOAuthUserResponse() 方法。如您所见，如果在数据库中找不到用户，默认方法会抛出异常，您只需要它调用 userManager 并创建新条目。

这与 FOSFacebookBundle 集成的情况完全相同（如果您这样做了）。

希望这个答案对您有所帮助（尤其是听起来有点混乱）。

**编辑：**
我发布了[一篇](http://www.osmialowski.co.uk/symfony-2-oauth-a-better-way-to-integrate-hwioauthbundle-with-fosuserbundle/)解释集成过程的博客文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T20:44:22.213

试试这个[要点](https://gist.github.com/danvbe/4476697)

或本[教程](http://www.diegocaprioli.com/adding-hwioauthbundle-to-your-symfony2-project/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T10:44:30.943

这里有一个关于如何集成 HWIOAuthBundle 和 FOSUserBundle 以实现自动用户注册*和*更新的很好的演练，可能值得一读：

[https://gist.github.com/danvbe/4476697](https://gist.github.com/danvbe/4476697)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-12T14:34:45.650

是的当然。

您应该处理来自 google 的响应并手动授权用户，例如：

```
// authorize 
$token = new OAuthToken(null, $user->getRoles());
$token->setUser($user);
$token->setAuthenticated(true);

// update session
$session = $this->getContainer()->get('session');
$session->set('_security_secured_area', serialize($token));
$session->save(); 
```

在用户被授权后，用户重定向到呼叫页面

# entity-framework - 连接字符串 - MVC 实体框架 - 数据库优先

> ID：13804704
> 
> 赞同：1
> 
> 时间：2012-12-10T16:12:19.843
> 
> 标签：entity-framework, asp.net-mvc-4, connection-string, database-first

谁能建议我如何以编程方式切换调试和实时连接字符串？

我已经看到其他人从控制器将 EntityConnection 传递给构造函数，如下所示：

```
private XYZDatabase db = new XYZDatabase(ConfigurationManager.
ConnectionStrings["XYZDatabase-TEST"].ConnectionString); 
```

但它仍然需要手动更改它？有没有办法使用

`System.Net.Dns.GetHostName()`或类似的自动切换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:53:52.997

Ayende 有一篇文章解决了这个问题。

[http://ayende.com/blog/135169/frictionless-development-web-config-and-connection-strings](http://ayende.com/blog/135169/frictionless-development-web-config-and-connection-strings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:40:53.680

In my software I just have 2 connection strings of the same name in my app.config and comment/uncomment to switch between configurations.

Another method is that you could create a static property in your solution (.asax file?) and just use that to swap between XYZDatabase-TEST and XYZDatabase when you are fetching ConnectionStrings.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:49:24.823

将连接字符串添加到您的 Web.config，例如：

```
<connectionStrings>
    <add name="XYZDatabase-TEST" connectionString="Server=.\SQLEXPRESS;Database=XYZDatabase-TEST";integrated security=SSPI;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

然后打开你的 Web.Release.config 并添加

```
<connectionStrings>
    <add name="XYZDatabase-TEST"
        connectionString="Data Source=OTHERSERVER;Initial Catalog=XYZDatabase-TEST;Persist Security Info=True;User ID=sa;Password=password" providerName="System.Data.SqlClient"
        xdt:Transform="SetAttributes"
        xdt:Locator="Match(name)"/>
</connectionStrings> 
```

现在，每次您使用**发布**配置将应用程序发布到部署服务器时，它将使用来自 web.release.config 的连接字符串

请注意，当您调试时，此转换不会在本地工作。您必须发布才能运行 web.config 转换。

# knockout.js - 在 foreach 中单击绑定到父函数

> ID：13804705
> 
> 赞同：11
> 
> 时间：2012-12-10T16:12:21.867
> 
> 标签：knockout.js

我有以下html：

```
<div data-bind="foreach: Contacts">
   <a data-bind="click: $parent.Foo($data), text: Name">link</a>
</div>
<button data-bind="click: AddContacts">click</button> 
```

和js代码：

```
var viewModel = ko.mapping.fromJS({"Selected":null,"Contacts":[]});
viewModel.AddContacts = function(){
    this.Contacts([{"Name":"C1"},{"Name":"C2"}]);
}

viewModel.Foo = function (contact) {
    alert(contact.Name);
}

ko.applyBindings(viewModel); 
```

当我单击按钮时，每个联系人都会调用 Foo。在单击任何链接之前，我根本没想到会调用它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T16:19:49.977

正如[nemesv](https://stackoverflow.com/a/13804760/338208)所说。参数是函数引用。所以你正在做的是使用函数的结果作为点击事件。

您传递的对函数的调用将自动包含该项目的数据，因此您无需手动传递它：

```
<div data-bind="foreach: Contacts">
   <a data-bind="click: $parent.Foo, text: Name">link</a>
</div> 
```

[http://jsfiddle.net/4cUv9/](http://jsfiddle.net/4cUv9/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-10T16:15:41.603

绑定的`click`参数是一个函数引用。所以你需要将你的调用包装成一个匿名函数：

```
<div data-bind="foreach: Contacts">
   <a data-bind="click: function() { $parent.Foo($data); }, text: Name">link</a>
</div> 
```

因此，当您想将其他参数传递到您的`click`绑定中时，您需要将其包装成一个函数。另请参阅[click 文档中的示例](http://knockoutjs.com/documentation/click-binding.html)

该`<button data-bind="click: AddContacts">`表达式有效，因为您在`AddContacts`那里直接引用了该函数。

# c++ - boost::spirit (qi) 在 float 和 double 之间做决定

> ID：13804709
> 
> 赞同：2
> 
> 时间：2012-12-10T16:12:38.617
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我有一个解析器，它解析来自输入文件的不同数据类型。我已经想通了，这种精神可以在 short 和 int 之间做出决定，例如：

```
value %= (shortIntNode | longIntNode); 
```

和

```
shortIntNode %= (qi::short_ >> !qi::double_)
                [qi::_val = phoenix::bind(&CreateShortIntNode, qi::_1)];
longIntNode  %= (qi::int_ >> !qi::double_)
                [qi::_val = phoenix::bind(&CreateLongIntNode, qi::_1)]; 
```

我也使用这种类型的规则来检测双打（来自[这里](https://stackoverflow.com/questions/13261502/parse-int-or-double-using-boost-spirit-longest-d)和[这里](https://stackoverflow.com/questions/3125582/boost-spirit-qi-numeric-parsing-of-integer-and-floating-points)的答案）。解析器能够在数字 > 65535 的 int 和数字 <= 65535 的 short 之间做出决定。但是，对于 float_ 和 double_ 它不能按预期工作。如果有这样的规则，它只是将这些值四舍五入以将其解析为浮点值：

```
 value %= (floatNode | doubleFloatNode); 
```

和

```
floatNode       %= (qi::float_)
                   [qi::_val = phoenix::bind(&CreateFloatNode, qi::_1)];
doubleFloatNode %= (qi::double_)
                   [qi::_val = phoenix::bind(&CreateDoubleFloatNode, qi::_1)]; 
```

您知道是否有类似选项或其他技巧可以根据数据类型范围在 float_ 和 double_ 之间做出决定？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:01:32.703

Lexing 可以提供帮助。最终***你***决定，而不是解析器。订购您的分支机构应该会有所帮助。也可以看看

*   [使用 boost 精神 (longest_d) 解析 int 或 double](https://stackoverflow.com/questions/13261502/parse-int-or-double-using-boost-spirit-longest-d/13268320#13268320)

*   [不匹配 qi::repeat 和可选解析器](https://stackoverflow.com/questions/8574972/no-match-with-qirepeat-and-optional-parser/8575843#8575843)

对于具有 Boost Spirit 的类似解析器。

如果您想在 float/double 之间做出决定，则没有真正的输入标准。我建议总是解析成双精度。但是，您当然可以使用语义操作来强制浮动一定大小。

以下是 C++ 语法的作用（例如）：

```
floatrule  = lexeme [ float_ >> 'f' ];
doublerule = double_;

float_or_double = floatrule | doublerule; 
```

# internationalization - 从 fxml 访问资源属性

> ID：13804710
> 
> 赞同：3
> 
> 时间：2012-12-10T16:12:47.547
> 
> 标签：internationalization, javafx-2, fxml

我知道我可以通过编写类似这样的东西在 fxml 文件中国际化 JavaFX 应用程序 `<Label id="versionLabel" text="%appVersion" />`。但是，如果我想使用两个资源项的串联怎么办。我已经尝试过了， `<Label id="versionLabel" text="%appVersion.prefix%appVersion.number" />`但它不起作用。如何正确执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:20:34.180

另一种方式

```
<HBox spacing="0">
  <children>
    <Label id="versionLabel1" text="%appVersion.prefix" />
    <Label id="versionLabel2" text="%appVersion.number" />
  </children>
</HBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:38:41.280

我不确定这是否可能。（但我可能错了）

您可能需要提交增强请求：http: [//javafx-jira.kenai.com](http://javafx-jira.kenai.com)

作为一种解决方法，您可以在控制器中设置文本。

# drupal - 为上游部署配置 Drupal

> ID：13804711
> 
> 赞同：0
> 
> 时间：2012-12-10T16:12:48.217
> 
> 标签：drupal, drupal-6

我正在尝试帮助同事配置 Drupal 站点，以便我们可以在上游部署相同的站点而无需更改数据库。我们在文件路径方面遇到问题。这是我所拥有的：

1.  一个 Nginx webroot 指向我的 Drupal 6（在这种情况下）安装（`/opt/frameworks/drupal-6`）的根目录。
2.  该站点的内容位于`/opt/www/my-site`.
3.  符号链接存在于`/opt/frameworks/drupal-6/sites`：`dev-my-site -> /opt/www/dev-my-site`

由于正在进行一些共享，盒子上有多个版本`my-site`，因此它们必须具有不同的符号链接名称。现在，“文件系统路径”设置为`sites/dev-my-site/files`在上游移动时会中断。

有没有办法可以设置配置变量来覆盖数据库设置？还是有更好的方法来配置我的 webroot 和站点？我对 Drupal 了解不多，但我想构建它以便部署尽可能简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:56:50.880

2 位没有经验的 Drupal 人员通过反复试验得出了一个可能的解决方案。看起来设置`$conf['file_system_directory']`in`settings.php`正是我们需要的。每个盒子上的每个站点都有自己的设置文件，部署不会触及，所以我们可能都很好。

如果有更好的方法或者这种特殊方法有意想不到的副作用，我很想听听更有经验的 Drupal 管理员的回答。

# regex - 正确获取 html 标签之间的文本

> ID：13804713
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:12:55.880
> 
> 标签：regex, dreamweaver

我想使用 Dreamweaver 的搜索和替换工具来获取 html 标记之间的文本。

链接格式是标准的 a 标签，例如

```
<a href="http://alink.com">Text</a> 
```

或者：

```
<a href="http://alink.com">Text</a> and <a href="http://alink2.com">Text 2</a> 
```

或者：

```
<a href="http://alink.com" target="_blank">Text</a> 
```

我正在使用以下表达式：

```
<a href="(.*)">(.*)</a> 
```

这对于示例 1 工作正常，但在示例 2 的情况下，它会拾取第一个开始标记`<a href`和最后一个结束标记之间的所有内容`</a>`。

我能做些什么来只针对每个单独的链接？

另外，在示例 3 中链接也具有`target="_blank"`属性的情况下，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:22:45.497

如果您只想要标签正文中的“文本”

```
<a[^>]*>([^<]*)</a> 
```

会工作

如果你也想要href

```
<a[^>]*href="([^>"]*)"[^>]*>([^<]*)</a> 
```

# sql - 在 SQL 中转换日期

> ID：13804716
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:13:09.980
> 
> 标签：sql

```
Select ReceiveDate,SentDate
From Customers

ReceiveDate                    SentDate
2012-11-29 19:17:00         2007-08-28 10:48:00 
```

我想改变这样的格式是：月日，年（例如：2012 年 11 月 29 日）

我能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:19:00.490

您没有指定什么 RDBMS，但如果您使用的是 SQL Server，则可以使用：

```
select 
  convert(varchar(6), receivedate, 100)+', '+cast(year(receivedate) as char(4)) ReceiveDate,
  convert(varchar(6), sentdate, 100)+', '+cast(year(sentdate) as char(4)) SentDate
from customers 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7f4bc/9)

结果：

```
|  RECEIVEDATE |     SENTDATE |
-------------------------------
| Nov 29, 2012 | Aug 28, 2007 | 
```

如果您使用的是 MySQL，那么您可以使用以下[`Date_Format()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)功能：

```
select 
  date_format(receivedate, '%b %e, %Y') ReceiveDate,
  date_format(sentdate, '%b %e, %Y') SentDate
from customers 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/adfbe/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:21:04.613

我不认为有一个特定的 mysql 函数可以做到这一点。

但是，如果您想在网站上显示格式为（1998 年 1 月 24 日）的日期，则可以使用 php.ini。

您进行了三个查询，一个代表当天，一个代表月份，一个代表年份。

然后，您为该月制作 switch case 以将其与其名称相关联（例如 03 -> Mar）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:21:29.717

`SQL Server`你可以使用`CONVERT`and ;`STUFF`

```
SELECT STUFF(CONVERT(VARCHAR(11), GETDATE(),100),7,1,', ')
--Results: Dec 10, 2012 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:21:40.840

假设 SQL 服务器您想要[DATEPART](http://msdn.microsoft.com/en-us/library/ms174420.aspx)和[DATENAME](http://msdn.microsoft.com/en-us/library/ms174395.aspx)的某种组合，如下所示：

```
SELECT 
   DATENAME(month, '2012-11-29 19:17:00') + ' ' + 
   CAST(DATEPART(dd, '2012-11-29 19:17:00') AS VARCHAR)+ ', ' + 
   CAST(DATEPART(yyyy, '2012-11-29 19:17:00') AS VARCHAR); 
```

# c - 命令行参数不起作用 C

> ID：13804720
> 
> 赞同：0
> 
> 时间：2012-12-10T16:13:24.390
> 
> 标签：c, unix, terminal, cat

我试图将`File1.txt ">" File2.txt`终端参数作为终端参数传递给我的程序以覆盖 cat 命令。但由于某种原因，该程序无法正常工作。尽管在上述定义的情况下 argc 为 4，但程序中的条件仍然不成立。这是代码：

```
int main(int argc, char *argv[])
{
int readbytes,fp;
char buf[1024];

if(argc==2)
{
    fp=open(argv[1],O_RDONLY);
    dup2(0,fp);
    close(fp);
    readbytes=read(STDIN_FILENO,buf,1024);
    write(STDOUT_FILENO,buf,readbytes);
}

if(argc==4)
{
    printf("inside4");
    fp=open(argv[1],O_RDONLY);

    dup2(fp,0);

    close(fp);

    fp=open(argv[3],O_WRONLY|O_CREAT|O_TRUNC,S_IRWXU);

    dup2(fp,1);

    close(fp);

    readbytes=read(STDIN_FILENO,buf,1024);

    //printf("%c",buf);

    write(STDOUT_FILENO,buf,readbytes);
}
return 0;
} 
```

我找不到这个问题的解决方案，所以我现在把它留给专家。这个问题的原因是什么？

**笔记：**

出于某种原因，当我将 ./prog File1.txt > File2.txt 发送到程序时，`argc==2`选择了条件，但是 argc 为 4。这是为什么？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:19:24.500

这可能是由您运行程序的方式引起的。打字

```
./myProg foo > bar 
```

将指示大多数 shell`myProg`使用参数运行`foo`并将打印到的任何内容保存`stdout`在名为`bar`. 要传递`foo`、`>`和`bar`作为命令行参数，请使用

```
./myProg foo \> bar 
```

或者

```
./myProg 'foo' '>' 'bar' 
```

旁注：因为管道输出到文件 using`>`是 shell 的一部分，而不是像`cat`它本身这样的程序，所以您可能不必担心它。只需写入，`stdout`shell 将处理其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:22:29.473

你是什​​么意思`the condition in the program is not getting true`？你是说你没有看到“inside4”打印到终端？有几件事需要考虑。首先，您不进行错误检查。我们将不得不假设您的所有`open`电话都`dup2`成功了。我希望“inside4”被打印到输出文件的末尾。原因很简单，`printf`实际上并没有写任何东西。它只是将字符串“inside4”存储在缓冲区中，但在程序退出之前，该缓冲区不会写入输出，到那时基础文件描述符已更改为输出文件。最简单的解决方法是在输出中附加一个换行符，然后写`printf( "inside4\n" );` 在正常设置中，打印换行符会导致内部缓冲区被刷新。您还可以在调用后显式刷新`printf`缓冲区`fflush`。

# php - CodeIgniter form_validation 中的 regex_match 生成：消息：preg_match()：未找到结束分隔符 '/'

> ID：13804721
> 
> 赞同：6
> 
> 时间：2012-12-10T16:13:29.743
> 
> 标签：php, regex, codeigniter

我一直在寻找其他类似的帖子，问题似乎是一个未转义的斜线。但是我正在逃避他们。

这是字符串的外观：

**2012 年 12 月 23 日**

这就是我声明验证规则的方式：

```
regex_match[/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20)[0-9]{2}$/] 
```

结束分隔符在那里，日期中间的两个斜杠用反斜杠转义。我也试过这个略有不同，但我得到了同样的错误：

```
regex_match[/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20)\d\d$/] 
```

错误在哪里？

**编辑：**

按照您的建议，我尝试使用回调函数。这是声明，位于执行表单验证的控制器类中：

```
function mach_date($date) {
   /* DEBUG */ echo 'Here I am!'; exit; // execution should stop here displaying the echo
   return (bool)preg_match('/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20)\d\d$/', $date);
} 
```

**application/config/form_validation.php**中的验证规则：

```
$config = array(
     // other validation groups.....,
     'articles' => array(
          // other validated fields.....,
          array(
                'field' => 'date_p',
                'label' => 'Publishing date',
                'rules' => 'callback_match_date'
          )
     )
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:00:08.583

当你设置验证规则时，你用 | 分隔它们。所以你的正则表达式中的 | 导致验证规则在那些地方分裂，这导致了错误。[在这里](https://expressionengine.com/forums/archive/topic/220094/form-validation-regex_match)讨论这个问题。这似乎是codeigniter中的限制或错误。您可以通过运行带有和不带有 | 的正则表达式来测试它，看看使用管道是否会导致错误。如果是这种情况，那么您可能必须通过其他方式通过正则表达式进行验证，也许使用[本页](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)详述的回调函数，您的函数将使用正则表达式进行 preg_match ，当然这需要在函数内部，然后返回 true /错误的。

# matlab - 在Matlab中的一段时间内只接受一个按键

> ID：13804724
> 
> 赞同：1
> 
> 时间：2012-12-10T16:13:39.807
> 
> 标签：matlab, events, user-interface, keypress, figure

我有一个简单的 GUI 代码，如下所示。这个“test_keypress”函数创建一个图形，它响应按键（空格）。

现在，我想添加一个约束，以便 Matlab 在一段时间内（比如 1 秒）只接受一个按键。换句话说，如果在上一次按键发生后 1 秒内发生按键，我想拒绝它。

我怎样才能做到这一点？

```
function test_keypress

f = figure;
set(f,'KeyPressFcn',@figInput);
imshow(ones(200,200,3));

end

function figInput(src,evnt)

if strcmp(evnt.Key,'space')
    imshow(rand(200,200,3));
end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:42:23.273

You can store the current time, and only evaluate the `imshow` command if the key-press occurs at least 100 seconds after the last one.

```
function test_keypress

f = figure;
set(f,'KeyPressFcn',@figInput);
imshow(ones(200,200,3));

%# initialize time to "now"
set(f,'userData',clock);

end

function figInput(src,evnt)

currentTime = clock;
%# get last time
lastTime = get(src,'UserData');

%# show new figure if the right key has been pressed and at least
%# 100 seconds have elapsed
if strcmp(evnt.Key,'space') && etime(lastTime,currentTime) > 100
    imshow(rand(200,200,3));
    %# also update time
    set(src,'UserData',currentTime)
end

end 
```

# php - Ubuntu autoload_register 上的 PHP 和命名空间问题

> ID：13804734
> 
> 赞同：0
> 
> 时间：2012-12-10T16:14:10.447
> 
> 标签：php, ubuntu, namespaces, spl-autoload-register

我这里有问题。我已经为所有类创建了命名空间。以前我使用 Windows 7 开发当前的应用程序，一切都很好。现在我刚搬到ubuntu，问题来了。

索引.php

```
spl_autoload_extensions(".php");
/*spl_autoload_register(function ($class) {
    require __DIR__ . '/../' . $class . '.php';
});*/
//provided i have tried the above method, which works on windows 7 but not Ubuntu
spl_autoload_register(function ($class) {
    require '/../' . $class . '.php';
});

//for your info, i do this
//require "../resources/library/Config.php";
//it works, no error

use resources\library as LIB;
use resources\dal as DAL;

//instantiation
$config = new LIB\Config();
print_r($config->fbKey()); 
```

我收到了这个错误

```
PHP Warning:  require(../resources\\library\\Config.php): failed to open stream: No such file or directory in /home/user/dir1/dir2/index.php 
```

我找不到错误。希望你们能帮助我。任何问题都不要犹豫评论我会编辑。提前致谢。

**更新 - 额外信息**

PHP 版本 5.4.6

**最近更新**

知道如何在不使用 str_replace 的情况下解决这个问题吗？JULP 和 MOONWAVE 有答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:20:57.073

您的目录分隔符有问题，因为它在 Win 和 Unix 中是不同的。

为了保持一致，您应该更新您的自动加载功能：

```
spl_autoload_register(function ($class) {
    require '/../' . str_replace("\\", DIRECTORY_SEPARATOR, $class) . '.php';
}); 
```

编辑：该解决方案在生产环境中被[广泛接受。](https://github.com/symfony/ClassLoader/blob/master/UniversalClassLoader.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:17:53.610

您使用哪个 PHP 版本？（在 PHP < 5.3.3 中，默认 spl_autoload_register 不支持命名空间 - 我的意思是 \ 在 Unix 系统上没有被 / 替换）

在您的代码中，尝试替换：

```
require __DIR__ . '/../' . $class . '.php'; 
```

经过：

```
require __DIR__ . '/../' . str_replace('\\', '/', $class) . '.php'; 
```

=> 始终在路径中使用斜杠，它们无处不在。反斜杠，不要。并且不要忘记文件名在 Unix 系统上是区分大小写的，这与 Windows 正好相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:19:13.597

`DIRECTORY_SEPARATOR`如果您要进行跨平台开发，您应该熟悉 PHP 常量的使用。

那里的错误信息应该告诉你所有你需要知道的。您没有生成正确的 LINUX 文件路径。

# selenium - 硒无效键序列

> ID：13804737
> 
> 赞同：0
> 
> 时间：2012-12-10T16:14:21.887
> 
> 标签：selenium

我正在使用以下键序列，

```
protected void assertFieldValues(String fieldId, String value) {
    focus("id=" + fieldId);
    type("id=" + fieldId, value);
    keyDown("id=" + fieldId, value);
    keyUp("id=" + fieldId, value);
} 
```

当我第一次调用该方法时，它可以正常工作，

```
public String REQUISITION_TOTAL = "requisitionTotal";

//initially add total
assertFieldValues2(REQUISITION_TOTAL, "1500"); 
```

当我第二次调用它来覆盖原始值时，

```
//Overwrite total, but fails. 
assertFieldValues2(REQUISITION_TOTAL, "2500"); 
```

我收到以下错误，无效的键序列。它似乎在 keydown 上失败，如果我删除 keydown 它在 keyup 上失败。

任何想法我做错了什么？我需要 keyup 来运行 js 计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:22:18.513

这取决于您要按下和释放哪个键。例如，如果您要按**“Enter 键”**，代码将如下所示：

```
selenium.keyDown(REQUISITION_TOTAL."\13");
selenium.keyUp(REQUISITION_TOTAL."\13"); 
```

其中**13 是 Enter Key 的键值**。

对于模式键代码，请参阅此链接[Key Codes and ASCII Values](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:57:11.530

在覆盖该字段之前，始终建议清除该字段的先前内容。

```
query = Driver.FindElement(By.Id(fieldId));
query.Clear(); 
```

我希望这会有所帮助......一切顺利:)

# html - 样式 » 内跨度

> ID：13804738
> 
> 赞同：0
> 
> 时间：2012-12-10T16:14:22.153
> 
> 标签：html, css

假设我有一个看起来像这样的跨度：

```
<span> This is my string &raquo;  and it continues </span> 
```

我希望跨度内的字体颜色为黑色，除了我希望它为红色的 »。

这样做的好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:16:56.900

最好的 HTML/CSS 方式是

```
<span> This is my string <span>&raquo;</span> and it continues </span> 
```

`<span>`并随心所欲地设计你的内在

```
span { color: #000 }
span span { color: #c00 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:17:01.963

### `<span>`用另一个标签把它包起来。

最好的方法是以这种方式用另一个`<span>`标签包装它：

```
<span> This is my string <span class="r">&raquo;</span>  and it continues </span> 
```

并以这种方式赋予风格：

```
span span.r {color: red;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:17:22.000

您可以尝试将其包装`&raquo;`在另一个元素中并对其进行样式设置。

**html:**

```
<span> This is my string <em>&raquo;</em> and it continues</span> 
```

**CSS：**

```
span { color: #000000; }
span em { color: #ff0000; font-style: normal; } 
```

# regex - Vim 语法高亮显示继续注释直到下一个关键字

> ID：13804739
> 
> 赞同：1
> 
> 时间：2012-12-10T16:14:23.387
> 
> 标签：regex, vim, syntax-highlighting

我有这样的代码：

```
# some comment
comment  This is a comment \
         that continues.
keyword option=3.123e4 
```

注释以“#”或“comment”开头，可以以“\”和换行符继续。我想匹配最后一个“\”之后的下一行，或者直到列表中的一个关键字。这是我所拥有的：

```
syn match atlasComment "#.*$"
syn match atlasComment "comment.*$"
syn keyword myKeyword keyword anotherKW nextgroup=myOption skipwhite
syn keyword myOption option 
```

是否可以使用从“评论”到突出显示的关键字列表中的特定关键字的范围？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:49:29.643

您会在 中找到一些有用的提示`:help :syn-oneline`。

> “oneline”参数表示该区域不跨越线边界。它必须在当前行中完全匹配。但是，当该区域包含的项目确实跨越了行边界时，它无论如何都会在下一行继续。包含的项目可用于识别续行模式。

这导致以下解决方案：

```
:syn region atlasComment start="comment" end="$" oneline contains=atlasCommentContinuation
:syn match atlasCommentContinuation "\\$" contained 
```

# sencha-touch-2 - 更改索引栏的字体大小

> ID：13804746
> 
> 赞同：-2
> 
> 时间：2012-12-10T16:14:53.290
> 
> 标签：sencha-touch-2, sass, font-size

我是煎茶触摸的新手。我需要设置索引栏的字体大小请看下图

![在此处输入图像描述](../Images/3613087fe6455a0544401659a19decf0.png)

这是我的scss文件

```
 $base-color: #1674B6;
$active-color: #BCC8DA;

$index-bar-height: 50em ;

@import 'sencha-touch/default/all';

// You may remove any of the following modules that you
// do not use in order to create a smaller css file.
@include sencha-panel;
@include sencha-buttons;
@include sencha-sheet;
@include sencha-picker;
@include sencha-tabs;
@include sencha-toolbar;
@include sencha-toolbar-forms;
@include sencha-indexbar;
@include sencha-list;
@include sencha-layout;
@include sencha-carousel;
@include sencha-form;
@include sencha-msgbox;
@include sencha-loading-spinner;
@include sencha-list-paging;
@include sencha-list-pullrefresh;
@include sencha-toolbar-ui('cusToolbar', #E1E4ED, 'glossy');
// Your custom code goes here...

@include pictos-iconmask('card2');
@include pictos-iconmask('button3');
@include pictos-iconmask('circle2');
@include pictos-iconmask('circle3');
@include pictos-iconmask('bullseye1');
@include pictos-iconmask('reply');
@include pictos-iconmask('add_black');
@include pictos-iconmask('user_list');
@include pictos-iconmask('user_list2');
@include pictos-iconmask('list');
@include pictos-iconmask('note1');
@include pictos-iconmask('team1');
@include pictos-iconmask('user');

//--Custom GroupBy List css --
.tweet-wrapper {
  h2 { font-weight: bold; padding-bottom: 3px; }
  img { border-radius: 5px; float: left; }
  .tweet {
    font-size: 63%;
    margin-left: 60px;
    min-height: 40px;
  }
  .posted { float: right; }
}

.txtwhite {
  font-family: "Helvetica Neue",HelveticaNeue,"Helvetica-Neue",Helvetica,"BBAlpha Sans",sans-serif;
    font-size: .7em;
    margin-left: 60px;
    min-height: 50px;
      font-weight: bold;

  color:white;

}

h2 { font-weight: bold; padding-bottom: 3px; }
img { border-radius: 5px; float: left; }
.tweet {
    font-size: 70%;
    margin-left: 60px;
    color: #333;
    min-height: 50px;
}
.posted { float: right; }

.x-pullmenu {
    display: -webkit-box!important;
    display: box!important;
    -webkit-box-orient: horizontal;
    box-orient: horizontal;
    -webkit-box-align: center;
    box-align: center;
    -webkit-box-pack: center;
    box-pack: center;
    position: absolute!important;

}
.x-pullmenu-top {
    top: -30px;
    left: 0;
    width: 100%;
    height: 30px;   
}

.x-pullmenu-left {
    top: 0px;
    left: -100px;
    width: 100px;
    height: 100%;
}

    .pullmenu#my-top-menu .x-body {
            background-color: black!important;
        }
        .bottom-menu {
            background-image: url(../images/bottom-menu.png) ;
            background-repeat: no-repeat ;
            background-size: 100% 100% ;
        }

        .menu-top {
            background-image: url(../images/top-menu.png) ;
            background-repeat: no-repeat ;
        }
        .doc-button {
            background-image: url(../images/info.png)!important;
            background-repeat: no-repeat ;
            background-size: 100% 100% ;
            width: 30px ;
            height: 30px ;
            margin: 5px 20px 0 20px;
        }
        .ok-button {
            background-image: url(../images/ok.png)!important;
            background-repeat: no-repeat ;
            background-size: 100% 100% ;
            width: 30px ;
            height: 30px ;
            margin: 5px 0 5px 20px;
        }
        .saving {
            margin-top: 8px; 
        }
        #doc-content {
            font-size: 15px ;
        }
        .doc-opt-label {
            display: inline-block;
            width: 100px ;
        }
        .doc-opt-expl {
            display: inline-block ;
            width: 100% ;
        }
        .pull-menu-doc {
            color: white ;
        }

@import '../global';

/**
 * @class Ext.dataview.IndexBar
 */

/**
 * @var {measurement} $index-bar-width
 * Width of the index bar.
 */
$index-bar-width: 1.1em !default;

/**
 * @var {color} $index-bar-bg-color
 * Background-color of the index bar.
 */
$index-bar-bg-color: hsla(hue($base-color), 10%, 60%, .8) !default;

/**
 * @var {color} $index-bar-color
 * Text color of the index bar.
 */
$index-bar-color: darken(desaturate($base-color, 5%), 15%) !default;

/**
 * Includes default index bar styles.
 */

 @mixin sencha-indexbar {
  .x-indexbar {
    padding: 0 .3em;
    width: $index-bar-width;
    @include display-box;
    @include box-orient(vertical);
    @include box-align(stretch);
    @include box-pack(center);
    position: absolute;
    top: 1.5em;
    right: 0;
    bottom: 1em;
    z-index: 3;
  }

  .x-indexbar-body {
    padding: .3em 0;
  }

  .x-indexbar-pressed .x-indexbar-body {
    @include border-radius(($index-bar-width - .6em)/2);
    background-color: $index-bar-bg-color;
  }

  .x-indexbar-item {
    color: $index-bar-color;
    font-size: 3em;
    text-align: center;
    line-height: 3em;
    font-weight: bold;
    display: block;
  }
} 
```

我需要将字体大小设置为更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:33:18.737

从我检查索引栏时可以看到，您需要覆盖 css `.x-indexbar > font-size`：

![在此处输入图像描述](../Images/4ddd42308b47d4104ede98344f3b1790.png)

```
.x-indexbar > div {
  font-size: 1em; // for instance
} 
```

希望这可以帮助

# forms - 表单标签/输入对齐方式与 IE7 中的预期不一致

> ID：13804750
> 
> 赞同：1
> 
> 时间：2012-12-10T16:15:07.910
> 
> 标签：forms, html, css, internet-explorer-7

我有一个 html5 表单，它可以在 IE8 及更高版本中按预期显示，也可以在 Chrome、Safari、Forefox 和 Opera 中显示。但在 IE7 中，标签对齐方式完全不同 - 标签显示在输入字段上方而不是左侧，并且水平对齐，这就是我所追求的。

我没有在 StackOverflow 上找到这个问题，但在 CSS 技巧上确实找到了一些非常相似的东西。我在这里确实有一个链接，但作为第一次发帖，我的问题被拒绝了，因为其中有超过 2 个链接（由于下面的附加 2 个链接显示了问题的屏幕截图）。所以我不得不删除它...关于 CSS 技巧的帖子的答案给了我一些值得关注的领域，但它并不具体 - 它说“我自己想出来的。解决方案涉及移动标签标签和一些 IE 条件 CSS。”

这些屏幕截图显示了表单显示的差异：

IE7：[http ://www.s203574650.websitehome.co.uk/Screenshots/IE7_form.jpg](http://www.s203574650.websitehome.co.uk/Screenshots/IE7_form.jpg)

IE10：[http ://www.s203574650.websitehome.co.uk/Screenshots/IE10_form.jpg](http://www.s203574650.websitehome.co.uk/Screenshots/IE10_form.jpg)

HTML 代码：

```
<form id="contact" action="contact_us.php" method="post">
<div>
<label for="fullname">Your Full Name:</label>
<input id="fullname" name="fullname" type="text" placeholder="eg. John Smith" required aria-       required="true" >
</div>
<div>
<label for="email">Your Email Address:</label>
<input id="email" name="email" type="email" placeholder="eg. johnsmith@gmail.com" required aria-    required="true" title="Please enter a valid email address">
</div>
<div>
<label for="phone">Your Phone Number (optional):</label>
<input id="phone" name="phone" type="tel" placeholder="eg. 07000 123456" pattern="([0-9]|( |-)?)    {10,14}" title="Please use only digits, spaces and hyphens.">
</div>
<div>
<label for="experience">Your Badminton Experience:</label>
<select name="experience">
<option value="default">Please Choose</option>
                <option value="Intermediate">Intermediate</option>
                  <option value="Advanced">Advanced</option>
                   <option value="Don't know">Don't know</option>
                   </select>                
</div>
 <div>
<label for="club_matches">Have you previously played matches for a club?:</label>
 <input type="radio" name="club_matches" value="Yes">Yes
 <input type="radio" name="club_matches" value="No" checked>No
 </div>
<div>                   
<label for="info">Additional Info / Questions: </label>
<textarea name="info" type="text">
</textarea>
</div>
<div>
<label for="blank"></label>
<input type="submit" id="submit" value="Submit Form" name="sent">
</div>
</form> 
```

和CSS：

```
 /* styles for contact form */
#contact
{
background-color: #DDE2E2;
-webkit-border-radius: 10px;
-o-border-radius: 10px;
-moz-border-radius: 10px; 
border-radius: 10px;
border: solid slategrey 2px;
box-shadow: 3px 3px 5px slategrey;
-o-box-shadow: 3px 3px 5px slategrey;
-moz-box-shadow: 3px 3px 5px slategrey;
-webkit-box-shadow: 3px 3px 5px slategrey;
padding: 3%;
font-family: arial;
color: #0099FF;
font-weight:bold;
align:center;
width: 80%;
margin-left:40px;
}

label
{
width: 40%;
float:left;
text-align:right;
margin-right: 2em;
font-size: 0.8em;
}

label, select, textarea, input
{
margin-bottom: 1.5em;
clear:left;
margin-left: 1em;
}

#submit
{
margin-top: 5%;
margin-bottom: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:30:34.570

问题是您正在清除选择框、文本区域和输入以及标签的浮动，而您应该只清除标签的浮动。

```
label, select, textarea, input {
    margin-bottom: 1.5em;
    clear: left;
    margin-left: 1em;
} 
```

`clear: left;`从 CSS 选择器中删除 for并将`label, select, textarea, input`其添加到 for `label`：

```
label {
    width: 40%;
    float: left;
    clear: left;
    text-align: right;
    margin-right: 2em;
    font-size: 0.8em;
}
label, select, textarea, input {
    margin-bottom: 1.5em;
    margin-left: 1em;
} 
```

# python - 融合表导入行

> ID：13804754
> 
> 赞同：3
> 
> 时间：2012-12-10T16:15:17.193
> 
> 标签：python, google-fusion-tables

有没有人使用过融合表 API 中的 importRows() 函数？作为下面的 API 参考， [https://developers.google.com/fusiontables/docs/v1/reference/table/importRows](https://developers.google.com/fusiontables/docs/v1/reference/table/importRows) 我必须在请求正文中提供 CSV 数据。但是我应该为 html 正文做些什么呢？

我的代码：

```
http = getAuthorizedHttp()

DISCOVERYURL = 'https://www.googleapis.com/discovery/v1/apis/{api}/{apiVersion}/rest'

ftable = build('fusiontables', 'v1', discoveryServiceUrl=DISCOVERYURL, http=http)

body = create_ft(CSVFILE,"title here")   # the function to load csv file and create the table with columns from csv file.
result = ftable.table().insert(body=body).execute()
print result["tableId"]   # good, I have got the id for new created table

# I have no idea how to go on here..
f = ftable.table().importRows(tableId=result["tableId"])
f.body = ?????????????
f.execute() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:35:45.533

我终于解决了我的问题，我的代码可以在以下链接中找到。 [https://github.com/childnotfound/parser/blob/master/uploader.py](https://github.com/childnotfound/parser/blob/master/uploader.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-03T07:00:24.513

我解决了这样的问题：

```
media = http.MediaFileUpload('example.csv',  mimetype='application/octet-stream', resumable=True)
request = service.table().importRows(media_body=media, tableId='1cowubQ0vj_H9q3owo1vLM_gMyavvbuoNmRQaYiZV').execute() 
```

# mysql - 在同一个 SQL 查询中使用多个 CASE ... WHEN 语句时会发生什么？

> ID：13804756
> 
> 赞同：0
> 
> 时间：2012-12-10T16:15:26.567
> 
> 标签：mysql, sql, database, case

在我[上一个问题](https://stackoverflow.com/questions/13802495)之后，我有一个 SQL 查询，如下所示：

```
SELECT * 
WHERE ... 
ORDER BY 
  CASE user_id WHEN 34 THEN 1 ELSE 2 END, 
  CASE status WHEN 'active' THEN 1 ELSE 2 END 
```

正如您在上面的代码中看到的，有*两个* `CASE ... WHEN`语句。在这种情况下会发生什么？也就是说，*记录将如何排序？那些“加倍”的陈述可能会发生冲突吗？*

* * *

**更新**：我想让它按以下顺序返回记录：（1）记录在哪里`user_id = 34`和`status = 'active'`；(2) 记录在哪里`status = 'active'`（无条件`user_id`）；(3) 所有其他记录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:17:58.730

首先将出现 user_id =34 且状态为 "active" 的所有记录，然后是 user_id=34 且状态不是 "active" 的记录，然后是 user_id 不等于 34 且状态等于 "active" 的记录，最后是所有剩余状态不是的记录“积极的”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:23:33.197

Order by 是按照您编写它们的顺序完成的。

您的记录将被排序：

[first]
user_id = 34, status = 'active'
user_id = 34, status <> 'active'
user_id <> 34, status = 'active'
user_id <> 34, status <> 'active'
[last]

# html - 快速加载head标签的任何源代码

> ID：13804757
> 
> 赞同：0
> 
> 时间：2012-12-10T16:15:31.167
> 
> 标签：html, load, head

通常在网页中，`<body>`标签和`<head>`网页一起加载，因此网页通常看起来很枯燥，因为有时**样式表**和**java 脚本**加载缓慢，甚至有好几次没有加载。所以我正在寻找一个加载器，它将首先加载头部标签中的内容，然后在加载头部标签中的内容之后，它会加载正文内容。

是否有这种脚本或任何其他技巧让`<head>`标签首先加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:21:26.907

页面从上到下线性加载。它将在源中遇到其他链接资产时检索它们。这些资产返回到浏览器的顺序将取决于它所采用的路径和文件的大小。

您的 JS 不应从 HEAD 部分链接，因为 JS 文件可能会阻止其他资产的并发加载。相反，将您的 JS 文件链接放在`</body>`标记之前。

至于 CSS 文件，您可以编写一个脚本，等待 CSS 完全加载，然后“显示”页面的其余部分，但我强烈建议您反对，因为这只是互联网的工作方式。您担心的“沉闷的外观”对于其他使用互联网的人来说真的无关紧要。

# jquery - 如果链接具有特定的类名，如何限制 onclick 事件不起作用？

> ID：13804759
> 
> 赞同：2
> 
> 时间：2012-12-10T16:15:33.447
> 
> 标签：jquery

我有以下 JQuery：

```
 $("#content-button-panel")
                       .on('click', 'a', function (event) {
                           event.preventDefault();
                           var $link = $(this);
                           ServerFunctions.getContentAjax($link);
                       }); 
```

仅当链接没有“文件夹”类时，如何才能使这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T16:17:24.827

```
 $("#content-button-panel")
                       .on('click', 'a:not(".folder")', function (event) {
                           event.preventDefault();
                           var $link = $(this);
                           ServerFunctions.getContentAjax($link);
                       }); 
```

*   [http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:18:15.420

您可以使用`.hasClass`以下功能；

```
 $("#content-button-panel")
                   .on('click', 'a', function (event) {
                       event.preventDefault();
                       if (!$(this).hasClass('folder'))
                       {
                          var $link = $(this);
                          ServerFunctions.getContentAjax($link);
                       }
                   }); 
```

# matrix - 将全局分层旋转转换为本地并返回

> ID：13804762
> 
> 赞同：2
> 
> 时间：2012-12-10T16:15:52.977
> 
> 标签：matrix, rotation, global, local, quaternions

我有一个分层骨架，其中平移和旋转在全局空间中表示。我需要将骨架转换为局部坐标并再次返回。我对翻译没有任何问题，但我似乎无法让旋转工作。

最初，我有旋转矩阵，但我可以轻松地将它们转换为欧拉或四元数，并尝试使用它们。我正在使用 Irrlicht 引擎数学库。

所以，我的代码会遍历每一个骨骼，只要骨骼有下一个父级，就会应用转换。

从全球到本地：

```
for(; iter != absolutePose.end(); iter++)
{
    if(hierarchy->find(iter->boneID) != hierarchy->end())
    {
        BoneID parentNodeID = hierarchy[iter->boneID];
        relativePose[iter->boneID].position.X = iter->position.X - absolutePose[parentNodeId].position.X;
        relativePose[iter->boneID].position.Y = iter->position.Y - absolutePose[parentNodeId].position.Y;
        relativePose[iter->boneID].position.Z = iter->position.Z - absolutePose[parentNodeId].position.Z;

                    ////Rotation Part/////////
        float pq[4] ={0.0,0.0,0.0,0.0};
        MatrixToQuaternion(absolutePose[parentNodeId].orientation, pq);

        irr::core::quaternion quat(q[0],q[1],q[2],q[3]);
        irr::core::quaternion parentquat(pq[0],pq[1],pq[2],pq[3]);

        quat = quat.makeInverse();

        quat = quat*parentquat;

        float newQuat[4] = {quat.X, quat.Y, quat.Z, quat.W};
        QuaternionToMatrix(newQuat,relativePose[iter->first].orientation);

    }
    else // top bone
    {
        relativePose[iter->boneID].position.X = iter->position.X;
        relativePose[iter->boneID].position.Y = iter->position.Y;
        relativePose[iter->boneID].position.Z = iter->position.Z;

        relativePose[iter->boneID].orientation = iter->second.orientation;
    }
} 
```

然后从本地到全球：

```
for(; iter != relativePose.end(); iter++)
    {
        absolutePose[iter->boneID].position.position = iter->position;
        auto nextParent = hierarchy->find(iter->boneID);
        while(nextParent != hierarchy->end())
        {
            absolutePose[iter->boneID].position.X += relativePose[nextParent->boneID].position.X;
            absolutePose[iter->boneID].position.Y += relativePose[nextParent->boneID].position.Y;
            absolutePose[iter->boneID].position.Z += relativePose[nextParent->boneID].position.Z;

            ////Rotation part///
            float q[4] ={0.0,0.0,0.0,0.0};
            MatrixToQuaternion(relativePose[iter->boneID].orientation, q);

            float pq[4] ={0.0,0.0,0.0,0.0};
            MatrixToQuaternion(relativePose[nextParent->boneID].orientation, pq);
            irr::core::quaternion quat(q[0],q[1],q[2],q[3]);
            irr::core::quaternion parentquat(pq[0],pq[1],pq[2],pq[3]);

            quat = parentquat*quat;

            float newQuat[4] = {quat.X, quat.Y, quat.Z, quat.W};
            QuaternionToMatrix(newQuat,absolutePose[iter->boneID].orientation);
            //////

            nextParent = hierarchy->find(nextParent->boneID);
        }
    } 
```

我已经有一段时间遇到这个问题了，并且也尝试过保持矩阵模式并切换到欧拉角。谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:24:03.093

使用矩阵还是四元数都没有关系。我建议不要在这里使用欧拉角。在我看来，问题在于您在转换为局部坐标时正在反转子四元数而不是父四元数，而在转换为全局坐标时您没有传播旋转。

考虑（假设方向应用于右侧的列向量）：

**q_1**、**q_2**和**q_3**是链中三个物体的全局方向。如果我们想使用相对方向**r_2**和**r_3**，那么您必须将*父级的*旋转从其后代中取出。所以我们可以看到**q_2** = **q_1** * **r_2**和**q_3** = **q_1** * **r_2** * **r_3** = **q_2** * **r_3**。

求解你的相对值，你会得到**r_3** = **q_2'** * **q_3** 和同样 的**r_2** = **q_1'** * **q_2**（其中**q_2'**是矩阵或四元数逆）。

从另一个方向从全局转换为本地，您需要记住：

**q_3** = **q_1** * **r_2** * **r_3**

所有的父方向都需要向下传播到最终的后代。因此，您要么需要使用递归来获取从子节点到根节点的所有方向变化，要么需要从父节点开始，在遍历子节点时传播/累积每个链接的所有方向变化。

As an afterthought, I suppose that you also need to be sure that the root node realizes that its `relativePose` is equal to its `absolutePose`. Otherwise you'll have problems.

# c# - 工厂模式在 DDD 中应该放在哪里？

> ID：13804765
> 
> 赞同：11
> 
> 时间：2012-12-10T16:16:11.177
> 
> 标签：c#, design-patterns, domain-driven-design, architectural-patterns

我已经争论了一段时间了，但仍然没有得出结论。虽然我看到的大多数示例在应用程序层中都有工厂代码，但我倾向于认为它应该在域层中。原因：有时我会在我的工厂完成初始验证，我希望所有对象的创建都通过。我希望此代码可用于我的对象的所有实例。有时一个操作需要参数信息，这感觉不自然地传递给构造函数。还有一些不那么重要的原因。

是否有理由说明这是一种不好的做法？这会打破其他模式吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T16:30:59.220

DDD 中的工厂只是[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的一个实例，因此应该在最有意义的地方使用它。另一个需要考虑的原则是[信息专家](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29)模式，该模式本质上表明行为应该分配给最接近信息的类别。因此，如果您想要强制执行某些特定于域的规则和逻辑，请将工厂放在域层中 - 毕竟，工厂创建域对象。但是请注意，您可能在其他层中有其他类型的工厂。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T16:25:04.397

根据记忆，Eric Evans 的书中有一些示例，其中对象工厂在很大程度上是领域层的一部分。

对我来说，把你的工厂设在这里是非常有意义的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-10T16:33:06.160

+1 这样做。可访问性将是一个很好的理由，我会保持创建代码至少接近域模型层。否则，域模型的用户在查找受限访问构造函数时会很困惑如何专门实例化它。实际上，将它分开的一个合理理由是您有不同的有效方法来创建相同的东西，例如，在使用抽象工厂时通常就是这种情况。

如果我不得不将它分开，我会将它放在一个包中（在 Java 的情况下），至少与域模型的级别相同，并始终与它一起发送，例如

```
upper
  --> domain
  --> domain_factory 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-21T15:21:18.367

我更喜欢应用层中的工厂。

如果您将工厂保留在域层中，那么当您需要复杂类型作为参数时，它们将无济于事（C# 代码示例）：

```
Application Layer:

//this Factory resides in the Domain Layer and cannot reference anything else outside it
Person person = PersonAggregateFactory.CreateDeepAndLargeAggregate(
            string name, string code, string streetName,...
            and lots of other parameters...);

//these ones reside in Application Layer, thus can be much more simple and readable:
Person person = PersonAggregateFactory.CreateDeepAndLargeAggregate(CreatePersonCommand);
Person person = PersonAggregateFactory.CreateDeepAndLargeAggregate(PersonDTO);

Domain Layer:

public class Person : Entity<Person>
{
    public Address Address {get;private set;}
    public Account Account {get;private set;}
    public Contact Contact {get;private set;}
    public string Name {get;private set;}

    public Person(string name, Address address,Account account, Contact contact)
    {
        //some validations & assigning values...
        this.Address = address;
        //and so on...

    }

}

public class Address:Entity<Address>{
    public string Code {get;private set;}
    public string StreetName {get;private set;}
    public int Number {get;private set;}
    public string Complement {get;private set;}
    public Address(string code, string streetName, int number, string complement?)
    {
        //some validations & assigning values...
        code = code;
    }

}

public class Account:Entity<Account>{
    public int Number {get;private set;}

    public Account(int number)
    {
        //some validations & assigning values...
        this.Number = number;
    }

}

//yout get the idea:
//public class Contact... 
```

此外，没有义务将工厂保持在领域层内（来自[领域驱动设计快速](http://www.infoq.com/minibooks/domain-driven-design-quickly)）：

> 因此，将创建复杂对象和聚合实例的责任转移到一个单独的对象上，该对象**本身在领域模型中可能没有责任，**但**仍然是领域设计的一部分**。提供一个封装所有复杂程序集的接口，并且不需要客户端引用被实例化对象的具体类。将整个聚合创建为一个单元，强制执行它们的不变量。

由于我不使用工厂将持久对象加载到内存中，因此不必从应用程序层之外的其他层访问它们。这就是为什么（来自[领域驱动设计快速](http://www.infoq.com/minibooks/domain-driven-design-quickly)）：

> 另一个观察结果是工厂需要从头开始创建新对象，或者它们需要重构以前存在但可能已持久化到数据库的对象。**将实体从它们在数据库中的静止位置带回内存涉及与创建新实体完全不同的过程**。一个明显的区别是新对象不需要新的身份。该对象已经有一个。违反不变量的处理方式不同。**从头开始创建新对象时，任何违反不变量的行为都会导致异常。对于从数据库重新创建的对象，我们无法做到这一点。**需要以某种方式修复对象，以便它们可以正常工作，否则会丢失数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T15:51:54.203

如果建设者/工厂只依赖于领域类和原语，则将它们放在领域层中，否则将它们放在领域层之外。

# cakephp - 如何访问配置文件模型文件名字段以显示每个用户的个人资料图片

> ID：13804766
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:16:14.657
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1, cakephp-model

大家好，我正在尝试在每个用户登录系统时访问他们的个人资料图片文件名。我有一个“配置文件”表，当我尝试加载配置文件图像时，我需要在我的 default.ctp 视图文件中提供它。

我目前使用在我的 appController 的 beforefilter 中设置的 $current_user 变量以 $current_user['filename'] 的形式访问'users'。我的用户和个人资料关系已在我的模型中相应地设置。如果有人可以提供帮助，我将不胜感激。提前致谢。

我的 AppController 的 beforeFilter 声明：

```
$this->loadModel('Profile');
    $profiles = $this->Profile->find('all');
    $this->set('profiles', $profiles); 
```

我的 default.ctp 查看文件代码尝试：

```
<?php echo $this->Html->image('/uploads/profile/filename/thumb/small/'.$profile['filename']); ?> 
```

当前代码：

```
<?php echo $this->Html->image('/uploads/profile/filename/thumb/small/'.$current_user['filename']); ?> 
```

我需要能够访问当前用户的配置文件模型文件名字段，以显示他们已经保存到文件名字段的图片。它将在用户登录时调用，我想显示此用户的个人资料图片。

在 default.ctp 视图中，我使用下面的代码，但我需要针对每个用户的个人资料图片进行调整。

```
foreach($profiles as $profile) : 
    echo $current_user['Profile']['filename'];
endforeach 
```

;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:42:22.523

Joshua, first of all, instead of posting again try keeping your thread all together (you can edit your post, and this helps others who are searching for the same answer).

[How to make a Model available in a View Cakephp 2.x](https://stackoverflow.com/q/13792826/1867941)

Again, I'd recommend doing this with an view element and requestAction, but as you didn't accept that answer last time, I'll work with what you are doing here:

If the user is already authenticated, you should have some information about them that you can check in:

```
 $this->Auth->User(); 
```

So, I'd re-work your code as follows:

```
$this->loadModel('Profile');
$user_id = $this->Auth->User('id');
$profile = $this->Profile->find('first', array('conditions'=>array('Profile.user_id'=>$user_id), 'fields'=>array('filename'));
$this->set(compact('profile')); 
```

Now in your default.ctp file you should be able to call the following:

```
echo $this->Html->image('/uploads/profile/filename/thumb/small/'.$profile['Porfile']['filename']); 
```

# c# - 当某些东西被缓存在 c# asp.net 中时，它是缓存在服务器上还是客户端上？

> ID：13804769
> 
> 赞同：1
> 
> 时间：2012-12-10T16:16:29.500
> 
> 标签：c#, asp.net, performance, caching, singleton

```
 private Obj CacheSomething()
    {
       Obj retVal = (Obj)System.Web.HttpRuntime.Cache["key"];

        if (retVal == null)
        {
            retVal = new Obj();
            System.Web.HttpRuntime.Cache["key"] = retVal;
        }
        return retVal;
    } 
```

这可能是一个愚蠢的问题，但它是存储在服务器内存还是客户端内存中？

另外，执行上述操作和使用单例有什么区别？

例如：

```
myObj= GenericSingleton<Obj>.GetInstance(); 
```

和

```
myObj= CacheSomething(); 
```

当我每次声明一个新对象时显然需要更长的时间，但是上述两种方法都比不缓存和不使用单例要快。使用单例基本上是缓存吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:19:27.570

它缓存在服务器上。最显着的区别是，由于内存压力，或者因为您在插入时指定了过期或依赖关系信息，可以从缓存中逐出项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:22:35.757

1.  `System.Web.HttpRuntime.Cache`是服务器端的。

2.  使用`Singleton`模式时，您通常编写期望单例实例存在的代码。使用缓存项，您永远不能依赖它的存在，并且应该相应地编写代码。例如，如果`retVal`创建是一个时间/资源消耗，你应该`lock`防止其他线程做同样的工作来构造它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:22:30.897

它缓存在服务器上。从课堂手册：

> 每个应用程序域创建一个此类的实例，只要应用程序域保持活动状态，它就保持有效。有关此类实例的信息可通过 HttpContext 对象的 Cache 属性或 Page 对象的 Cache 属性获得。

你可以在这里找到它：[缓存类](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

# java - 我怎样才能使这种方法并行？

> ID：13804773
> 
> 赞同：0
> 
> 时间：2012-12-10T16:16:45.320
> 
> 标签：java, multithreading, concurrency, parallel-processing

我现在完全停电了。在底部有一个名为 drawlines2 的方法，我怎样才能让它与两个不同的参数并行执行？我已经尝试过实现可运行，但我不知道在 run 方法中放入什么，我没有掌握它，因为我想在同一个类中创建线程。

```
package javastuff;
/**
 * Copyright © 2011 Parag Patil
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * You may not use this file except in compliance with  Apache License, Version 2.0
 * You may obtain a copy of the license at
 * http://www.apache.org/licenses/LICENSE-2.0

**/

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TreeAnimation {
   public static final int SIZE_X = 1366;
   public static final int SIZE_Y = 768;
   public static void main(final String[] args) {

        final PFrame pframe = new PFrame();         
        pframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                      
        final PCanvas canvas = new PCanvas((int)pframe.getBounds().getWidth(),(int)pframe.getBounds().getHeight());
        pframe.add(canvas);
        pframe.setVisible(true);
        canvas.setIgnoreRepaint(true);
    }
}
class PFrame extends JFrame {   
    private static final long serialVersionUID = 1L;

    PFrame() {
        setUndecorated(true);
        final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(0,0,screenSize.width, screenSize.height);
        final KeyStroke escapeKeyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0, false);
        Action escapeAction = new AbstractAction() {
            private static final long serialVersionUID = 1L;

            public void actionPerformed(final ActionEvent e) {
            System.exit(0);
            }
        };
        getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(escapeKeyStroke,"ESCAPE");
        getRootPane().getActionMap().put("ESCAPE", escapeAction);
    }
}
class PCanvas extends Canvas{
    private static final long serialVersionUID = 1L;
    public static int xsize;
    public static int ysize;
    public static final double TRIM_FACTOR = 0.8;
    public static final double INITIAL_LENGTH = 180;
    public static final double EXIT_LENGTH = 2;
    public static final double BRANCH_ANGLE = Math.PI / 9.0;
    public static final int WAIT = 10;

    PCanvas(int size_x, int size_y) {
        super();
        xsize = size_x;
        ysize = size_y - size_y / 20;
        setBackground(Color.black);
        setForeground(Color.white);
    }

    @Override
    public void paint(final Graphics g) {
        drawLine2(g, xsize / 2, 0, INITIAL_LENGTH, Math.PI / 2);
    }

    public void drawLine2(final Graphics g, final double x1, final double y1, final double l, final double theta) {

        if (l < EXIT_LENGTH) {
            return;
        }
        final double x2 = x1 + l * Math.cos(theta);
        final double y2 = y1 + l * Math.sin(theta);

        g.drawLine((int)x1, (int)(ysize - y1), (int)x2, (int)(ysize - y2));

            //Here be parallelizable code
        drawLine2(g, x2, y2, l * TRIM_FACTOR, theta - BRANCH_ANGLE);
        drawLine2(g, x2, y2, l * TRIM_FACTOR, theta + BRANCH_ANGLE);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:21:01.943

请注意，正如评论中指出的那样，在 Swing 中进行绘制并不是一个好主意。但是特别关注您的 OP 问题，要并行运行**drawLine2**语句，这就是（通常）您会做的事情：

```
// start first
new Thread(new Runnable() {
    public void run() {
        drawLine2(g, x2, y2, l * TRIM_FACTOR, theta - BRANCH_ANGLE);
    }
}).start();
// start second
new Thread(new Runnable() {
    public void run() {
        drawLine2(g, x2, y2, l * TRIM_FACTOR, theta + BRANCH_ANGLE);
    }
}).start() 
```

# c# - Linq 按主键查找项目并显示名称（位于不同的表中）

> ID：13804775
> 
> 赞同：0
> 
> 时间：2012-12-10T16:16:52.140
> 
> 标签：c#, asp.net, linq, entity-framework, ef-code-first

我正在显示我的数据库中的一条记录。该记录从其他表中提取数据并使用主表中的 Int 来表示值，因此 Item 表的 Division 等于 1 并且 Division 表 1 = ALL 。现在我正在显示记录，我试图将 1 变为全部。所有 ID 字段都显示 int。这就是我的代码告诉它要做的事情。但我正在尝试显示名称，当我这样做时，我会得到很多红色。它找不到名称。`CatagoryID`应该是`CategoryName`。

希望这是有道理的。

```
if (!IsPostBack)
{
     string v = Request.QueryString["ContactID"];
     int itemid;
     int.TryParse(v, out itemid);
     var customerInfo =  GetCustomerInfo(itemid);
     CONTACTID.Text = customerInfo[0].ContactID.ToString();
     ContactTitle.Text = customerInfo[0].ContactTitlesID.ToString();
     ContactNameB.Text = customerInfo[0].ContactName;
     DropDownAddCategory.Text = customerInfo[0].CategoryID.ToString();
     DDLAddDivision.Text = customerInfo[0].DivisionID.ToString();
     ContactPhoneBox.Text = customerInfo[0].ContactOPhone;
     ContactCellBox.Text = customerInfo[0].ContactCell;
     ContactEmailBox.Text = customerInfo[0].ContactEmail;
     CextB.Text = customerInfo[0].Ext;
}

private List<Solutions.Models.Contact> GetCustomerInfo(int itemid)
{
     using (ItemContext context = new ItemContext())
     {
         return (from c in context.Contacts 
                 where c.ContactID == itemid
                 select c).ToList();
     }
} 
```

这是模型

```
public class Contact
{
        [ScaffoldColumn(false)]
        public int ContactID { get; set; }    
        public System.DateTime ContactCreated { get; set; }    
        public string ContactName { get; set; }    
        public int? ContactTitlesID { get; set; }    
        public string ContactOPhone { get; set; }    
        public bool cApproved { get; set; }    
        public string User { get; set; }
        public string ContactCell { get; set; }    
        public string ContactEmail { get; set; }    
        public int? DivisionID { get; set; }    
        public int? CategoryID { get; set; }    
        [StringLength(5)]
        public string CExt { get; set; }           
        public virtual Division Division { get; set; }
        public virtual Category Category { get; set; }
        public virtual ContactTitle ContactTitle { get; set; }    
        public string Ext { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:58:12.377

使用实体框架，您可以在查询结果中[包含](http://msdn.microsoft.com/en-us/library/bb738708.aspx)相关实体：

```
 return (from c in context.Contacts.Include("Catagory") 
         where c.ContactID == itemid
         select c).ToList(); 
```

这将返回具有类别对象的联系人：`customerInfo.Catagory.CategoryName`

*顺便说一句*，不是返回联系人列表并按索引选择第一个（因此可能有索引超出范围异常），而是修改您的方法以返回第一个联系人（或默认值，如果未找到）：

```
private Solutions.Models.Contact GetCustomerInfo(int itemid)
{
     return (from c in context.Contacts.Include("Catagory") 
             where c.ContactID == itemid
             select c).FirstOrDefault();
} 
```

并以这种方式使用它：

```
var customerInfo =  GetCustomerInfo(itemid);
if (customerInfo != null)
{        
    CONTACTID.Text = customerInfo.ContactID.ToString();
    // etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:32:12.167

您使用的是 LINQ to SQL 还是实体框架？再次检查您的模型并确保两个表之间的关系设置正确。模型中可能缺少该关系，并导致此问题。

# smartgwt - ListGrid 不想设置删除按钮列的宽度

> ID：13804782
> 
> 赞同：1
> 
> 时间：2012-12-10T16:17:08.097
> 
> 标签：smartgwt

在 ListGrid 上，当您启用删除记录时，每条记录行上都有一个交叉图像支架。是否可以调整此列的大小？当我询问 listGrid 的字段列表时，它给了我

```
for (ListGridField field : listGrid.getFields()) {
  System.out.println("'" + field.getName() + "'");
} 
```

列名列表，然后是名称为“$54h”的列...我认为它是删除按钮列的名称。

但似乎这段代码：

```
for (ListGridField field : listGrid.getFields()) {
  field.setWidth("100%");
}
listGrid.getField("$54h").setWidth(60); 
```

不产生我想要的：意味着我的删除按钮列不是 60px 宽度。

有谁明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:47:57.553

要解决此问题，请使用

```
ListGridField removeFieldProperties = new ListGridField("View-delete", "Delete this record", 40);
listGrid.setRemoveFieldProperties(removeFieldProperties); 
```

# html - HTML 无法删除整个页面“内部”边框（正文边框？）

> ID：13804784
> 
> 赞同：0
> 
> 时间：2012-12-10T16:17:11.627
> 
> 标签：html, css

我正在开发一个网站，我突然注意到在 IE9 中几乎只有我的布局有这样的问题（与我最近浏览的其他网站不同）

我的页面周围有一个无法删除的灰色边框。

我已经有`body{margin:0;padding:0;}`并且我尝试过`html,body{margin:0;padding:0;}`，但它仍然继续存在。

这是一个小屏幕截图![在此处输入图像描述](../Images/f6c3b593fbd0557402c6dbda42017bc1.png)

请帮我删除这个边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:22:46.710

这些边框来自 Internet Explorer 本身，您无法删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:34:17.807

要删除这些空格，只需将其添加到您的 css 中：

```
body {
    margin:0px;
} 
```

# c#-4.0 - BizTalk 业务流程中的字符串到 XNamespace 隐式转换

> ID：13804789
> 
> 赞同：1
> 
> 时间：2012-12-10T16:17:22.123
> 
> 标签：c#-4.0, linq-to-xml, biztalk, biztalk-2010

我对我所看到的有点困惑，因此前往 SO。

我正在开发 BizTalk (2010) 编排，我想解析传入的 XML 消息。我只需要检索特定节点重复的次数。我本可以使用 XPath。但是，我选择使用 LinqToXml。

我创建了一个类型变量`System.Xml.Linq.XNamespace`并在表达式形状内，我为其分配了一个字符串值.. 说`http://mycompany/v1.0`。这是一个完全有效的 C# 语句，因为存在从 String 到 XNamespace 的隐式转换（[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.op_implicit.aspx)）。

但是编排根本不会编译。我得到这个错误`cannot implicitly convert type System.String to System.Xml.Linq.XNamespace`。

如果我不使用 XNamespace 变量并像这样在传入消息上直接运行 LinqToXml

```
MessageCount = MyXElement.Elements("{http://mycompany/v1.0}ListOfNotifications").Elements("{http://mycompany/v1.0}Notification").Count(); 
```

我得到一个`cannot convert from String to XName`错误。即使这是令人困惑的。

我正在使用 BizTalk 2010 和 C# 4.0。有人可以解释我是否遗漏了什么？我已经使用 LinqPad 尝试了所有这些代码片段，并且得到了预期的响应。因此，没有错别字或缺少参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:04:54.903

我选择使用该`XPath`选项来检索我需要的值，而不是使用 LinqToXml。我最终编写的代码如下所示：

```
xpath(myOrchVariable, "string(/*[local-name()='InputRootNode' and namespace-uri()='http://my/name/space'])") 
```

# jquery - 让 Bootstrap Typehead ajax 工作

> ID：13804790
> 
> 赞同：0
> 
> 时间：2012-12-10T16:17:22.533
> 
> 标签：jquery, twitter-bootstrap, bootstrap-typeahead

许多关于 typeahead 的帖子都使用了插件，尽管自 2.1.0 以来 Bootstrap 已经支持对 typeahead 的 ajax 调用。

我无法使它满足我的需要-建议单词的ajax调用，此时单击一个会产生重定向。

因此，例如，如果您输入“lif”，它将查询“lif”（REST）到另一个页面，返回选项（life=>http://life.com、lifealone=>http://lifealone.net 等），然后单击 life 或 lifealone 将带您到与之关联的尊重 url。

我知道我可以使用 jqueryui 自动完成功能，但我更愿意将其保留在 Bootstrap 的原生 JS/CSS 中。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:16:11.467

从文档中手动调用 typeahead：

```
$('.typeahead').typeahead(); 
```

您可以传递选项。您正在寻找的是来源：

```
$('.typeahead'.typeahead({
    source: function(query/*text input value*/,callback/*used for asynchronous update*/) {
    $.get('yourdata.file?q='  + query, function (data) {
        callback(data);
    });
}
}); 
```

然后，您需要将事件处理程序附加到您的选择事件。这不是用 bootstrap.typeahead 本地处理的，但是有一个分支添加了这个功能。

[https://gist.github.com/1891669](https://gist.github.com/1891669)

# opengl - 在 OpenGL 保留深度测试中渲染 2D 图像（有深度）

> ID：13804794
> 
> 赞同：0
> 
> 时间：2012-12-10T16:17:38.097
> 
> 标签：opengl, composition, depth-buffer, depth-testing

我有一个来自外部源（比如软件光线追踪器）的图像，它也有一个深度缓冲区。我想在 OpenGL 场景（包含其他几个 3D 对象）中渲染该图像，以便正确更新 OpenGL 深度缓冲区，即应该使用正确的深度测试组合图像和其他 3D 对象。有任何想法吗？没有着色器的解决方案会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:23:38.317

通过加载深度图[`glDrawPixels(..., ..., GL_DEPTH_COMPONENT, ..., ...)`](http://www.opengl.org/sdk/docs/man2/xhtml/glDrawPixels.xml)并照常渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:24:34.480

使用 OpenGL pixel_buffer_object，您可以绑定深度纹理。所以过程如下：

1.  加载外部纹理
2.  加载外部深度纹理
3.  使用两个纹理创建 pixel_buffer_object
4.  将 PBO 设置为渲染目标并渲染几何体的其余部分（渲染前不要 glClear）。

# linux - 不删除中间文件

> ID：13804797
> 
> 赞同：0
> 
> 时间：2012-12-10T16:17:48.243
> 
> 标签：linux, gcc, makefile

我知道 Make 的默认行为是删除中间文件。我还添加了`.INTERMEDIATE`删除所有中间文件的特殊目标，`.o`但 Make 仍然没有删除它们。

我已经阅读了有关 Stackoverflow 的所有其他类似问题的帖子，遵循了答案的建议，但对我没有任何帮助。有人可以看看吗？这是我的制作：

```
CC = gcc
CFLAGS = -Wall -Werror -Wmissing-prototypes
OBJS = server.o rio.o list.o
LDLIBS = -lpthread

.INTERMEDIATE: %.o

all: syst

sysstatd: $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) $(LDLIBS) -o syst -L thread-pool -lthreadpool

server.o: server.h server.c
rio.o: rio.h rio.c
list.o: list.h list.c

clean:
     rm -f *~ *.o syst 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:30:59.467

就个人而言，我会使用

```
.INTERMEDIATE: $(OBJS) 
```

我不相信您可以在目标中使用`%`语法，这让我觉得风险太大。但是，既然您已经有了一个方便的目标文件列表，为什么不直接使用它呢？`.INTERMEDIATE``*.o`

# java - 与 C# 中的匿名接口实现相对应

> ID：13804804
> 
> 赞同：2
> 
> 时间：2012-12-10T16:18:01.397
> 
> 标签：java, c#, code-translation

我正在将一些代码从 Java 转换为 C#，但遇到了一些麻烦，也许有人可以帮忙？

我在尝试复制 Java 中广泛使用的匿名接口实现时遇到问题，但不知道如何去做。

一个例子是：

```
List<DATA> queue1 = new ArrayList<DATA>(dataSet);
            // Sort by distance to the first promoted data
            Collections.sort(queue1, new Comparator<DATA>() {
                @Override
                public int compare(DATA data1, DATA data2) {
                    double distance1 = distanceFunction.calculate(data1, promoted.first);
                    double distance2 = distanceFunction.calculate(data2, promoted.first);
                    return Double.compare(distance1, distance2);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:23:17.483

> 我在尝试复制 Java 中广泛使用的内联函数时遇到问题

这些不是内联函数，而是实现特定接口的匿名类。

C# 提供了可以内联或在单独函数中定义的*委托。*

下面是使用委托对 a`List<DATA>`进行就地排序的示例：`Comparison<T>`

```
List<DATA> queue = new List<DATA>();
queue.Sort(
    (left, right) => {
        double distance1 = distanceFunction.Calculate(left, promoted.first);
        double distance2 = distanceFunction.Calculate(right, promoted.first);
        return Double.Compare(distance1, distance2);
    }
); 
```

请注意，为了使其工作，该`distanceFunction`变量需要在您调用的位置处于范围内`queue.Sort`。它可以是在调用点之上定义的局部变量，也可以是包含进行调用的函数的类的成员变量/属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:24:04.213

在 C# 中，您最终会在可能的情况下使用委托而不是接口，尤其是在这种情况下，调用者可能希望内联定义方法。您可以使用 lambda 在需要任何委托的地方内联定义匿名方法。

```
List<String> list = new List<String> { "B", "D", "E" };

list.Sort((a, b) => a.CompareTo(b)); 
```

在 C# 中没有等效于 Java 的匿名接口实现，因此如果需要接口（排序 a 不是这种情况`List`），您将需要创建一个命名类来实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:21:48.810

C# 使用委托的概念代替匿名接口实现。

假设您已替换`ArrayList<DATA>`为 .Net `List<DATA>`：

```
IEnumerable<DATA> sorted =
    queue1.OrderBy(q => distanceFunction.calculate(q, promoted.first)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:22:25.567

假设您在 c# 中有一个数据对象列表：

```
queue1.OrderBy(a => distanceFunction.Calculate(a, promoted.First)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T21:53:34.187

如果您想要与原始 Java 类似的东西，那么：

```
internal virtual void test()
{
    List<int> queue1 = new List<int>(dataSet);
    queue1.Sort(new ComparatorAnonymousInnerClassHelper());
}

private class ComparatorAnonymousInnerClassHelper : IComparer<int>
{
    public virtual int compare(int data1, int data2)
    {
        double distance1 = distanceFunction.calculate(data1, promoted.first);
        double distance2 = distanceFunction.calculate(data2, promoted.first);
        return distance1.CompareTo(distance2);
    }
} 
```

# javascript - 拉斐尔的甜甜圈/径向图

> ID：13804807
> 
> 赞同：2
> 
> 时间：2012-12-10T16:18:10.317
> 
> 标签：javascript, raphael

我是拉斐尔的初学者。谁能告诉我如何做一个带有动画的甜甜圈/径向图，类似于这些。

[http://dribbble.com/shots/670348-Segment-Graphs](http://dribbble.com/shots/670348-Segment-Graphs)

我现在正在努力。到目前为止，我已经走到了这一步。我会随着我的进步而更新。我现在的总结块是动画外环的颜色变化。

```
window.onload = function () {

    // Creates canvas 320 × 200 at 10, 50
    var paper = Raphael(10, 50, 320, 200);

    // Creates circle at x = 50, y = 40, with radius 10
    var circle1 = paper.circle(50, 40, 40);

    var circle2 = paper.circle(50, 40, 20);

    circle2.attr("fill", "#fff");
    circle2.attr("stroke", "#fff");

    circle1.attr("fill", "#336699");
    circle1.attr("stroke", "#fff");

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T20:39:53.987

**致谢：** 在[raphael 网站上](http://raphaeljs.com/polar-clock.html)有一个使用弧的示例。stackoverflow 上还有一个类似主题的问题：[在 raphael js 中绘制居中弧](https://stackoverflow.com/questions/5061318/drawing-centered-arcs-in-raphael-js)。那里接受的答案有一个代码最重要部分的简化和注释版本，还有一个 jsfiddle 链接显示正在运行的代码：http: [//jsfiddle.net/Bzdnm/2/](http://jsfiddle.net/Bzdnm/2/)

*所以我做了什么*：我从[链接的问题](https://stackoverflow.com/questions/5061318/drawing-centered-arcs-in-raphael-js)中获取代码，将它与[eve结合起来，这是 RaphaelJS 的](https://github.com/DmitryBaranovskiy/eve)[创建者制作](http://dmitry.baranovskiy.com/)的另一个 javascript 库，我得到的是：http: [//jsfiddle.net/cristighenea/aP7MK/](http://jsfiddle.net/cristighenea/aP7MK/)

乍看上去：

1.创建弧线后，我们将其旋转 180 度并开始对其进行动画处理：

```
theArc.rotate(180, 100, 100).animate({
    arc: [100, 100, amount, 100, 40]
}, 1900, function(){
    //animation finish callback goes here
}); 
```

2.使用 eve 我们将一个事件绑定到 *raphael.anim.frame.**

3.每次触发事件时，我们用弧的新值更新中间的文本

如果您有任何问题，请告诉我

# shopify - 用于验证 Shopify Webhooks 的标头的正确名称是什么？

> ID：13804812
> 
> 赞同：1
> 
> 时间：2012-12-10T16:18:24.687
> 
> 标签：shopify, webhooks

该文档将标题名称称为`HTTP_X_SHOPIFY_HMAC_SHA256`

查看进入我的服务器的 webhook 请求，标头被命名为`x-shopify-hmac-sha256`

哪个是正确的名称？是否区分大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:05:33.553

根据[RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)，HTTP 标头不区分大小写。请参阅文档的第 4.2 节，标题为消息标题。

# android - 为什么我的活动无法启动？

> ID：13804817
> 
> 赞同：0
> 
> 时间：2012-12-10T16:18:37.603
> 
> 标签：android

我有一个从 PC 远程控制的工业应用程序。该应用程序有 2 个略有不同的版本 - 一个用于 Honeycomb 平板电脑，另一个用于 Gingerbread 手机。不同之处在于利用硬件中的独特功能（例如，手机有更好的摄像头，平板电脑可以显示更大的图形）但活动启动代码是相同的。

应用程序中的线程接收来自 PC 的命令并显示不同的屏幕（即启动不同的活动）。它在手机上运行良好，但在平板电脑上，一项活动不会开始，但不会引发异常。断点和登录该活动的*onResume()*永远不会被命中，即使它们在电话上。这是我尝试开始活动的方式。. .

```
 try {
        Intent svc = new Intent(ctx, RemoteControlActivity.class);
        ctx.startActivity(svc);
    } 
    catch (Exception e) {  // or ActivityNotFoundException e
        Log.d("ShowButtons(normal)", "startActivity failed");
    } 
```

（ctx 是一个上下文 - 在调试器中，上下文对于在非工作情况下的工作都是相同的）

无法在平板电脑上启动的活动在 manifest 中是这样定义的。. .

```
 <activity
       android:launchMode="singleTask"   
       android:label="@string/app_name"
       android:windowNoTitle="false"
       android:configChanges="orientation"
       android:screenOrientation="landscape"
       android:name="RemoteControlActivity">
       <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />  
       </intent-filter>
    </activity> 
```

这让我很生气 - 在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:34:36.303

试试这个

```
 Intent svc = new Intent(ctx, RemoteControlActivity.class);
   svc.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
   ctx.startActivity(svc); 
```

根据文档

> 使用此标志时，如果您现在正在启动的 Activity 已经在运行任务，则不会启动新的 Activity；相反，当前任务将简单地以其上次所处的状态被带到屏幕的前面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:20:42.533

我找到了解决方案。我以这种方式发布它，因此我可以将其标记为“已回答”，以防其他人遇到此问题并正在寻找解决方法。但我承认我不明白它为什么起作用。

突破是发现当我尝试启动 RemoteControlActivity 时屏幕上当前的活动很重要。当我有一个在屏幕上显示一些图形的活动时发生了故障。我替换了一个显示一些按钮的不同活动，问题就消失了。

查看清单我注意到“好”活动设置为：

```
Android:launchMode="singleTask" 
```

而“坏”的设置为：

```
Android:launchMode="singleInstance" 
```

当我将图形活动更改为“singleTask”时，问题就消失了。

# arrays - numpy 掩码数组中加权平均值的不一致结果

> ID：13804821
> 
> 赞同：1
> 
> 时间：2012-12-10T16:18:50.143
> 
> 标签：arrays, numpy, mask, weighted-average

当我在完全屏蔽的屏蔽数组中计算加权平均值时，我得到不同的结果`weights=None`or `weights=1`：

```
import numpy.ma as ma
a = ma.arange(2.)
a[:] = ma.masked                             # fully masked
ma.average(a)                                # returns NaN, which is ok since all elements are masked
ma.average(a, weights=None,  returned=True)  # returns (NaN, 0.0), which is ok also
ma.average(a, weights=(1,1), returned=True)  # returns 'masked' 
```

我希望最后两行产生相同的结果 - 即相同数量的输出和相同的值，但它们没有。最烦人的是，在最后一种情况下，尝试检索第二个输出参数时会发生错误。为什么我会得到这些结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:58:59.397

我同意这种行为很烦人，但这只是`numpy.ma.average`编码的方式。如果您查看[它的源代码](http://projects.scipy.org/numpy/browser/trunk/numpy/ma/extras.py?rev=8473)，您会看到在第 505 行附近，如果`weights=None`或如果它是其他东西，if 子句的执行方式会有所不同。

当`weights != None`操作导致中间产品之一是掩码数组时。稍后在代码中（第 562 行），检查这些中间数组中的屏蔽数组，如果为真，则输出将始终被屏蔽。另一种情况何时`weights == None`导致 a`NaN`被抛出，所以这将是输出。

别担心，这种不一致似乎只在数组的所有元素都被屏蔽时才会发生。在现实世界的例子中，将权重设置为`None`或统一数组将给出相同的结果。

# python-3.x - 如何在 Windows 8 中关闭 pygame？

> ID：13804822
> 
> 赞同：0
> 
> 时间：2012-12-10T16:18:51.327
> 
> 标签：python-3.x, pygame

我在新的 win8 安装中用 Python 做了一个小实验，发现了以下问题：

代码：

```
import pygame, sys

screen = pygame.display.set_mode([1280,960])
myball=pygame.image.load("Globe.png")
screen.blit(myball, [576, 416])
pygame.display.flip()
while 1:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            sys.exit 
```

但是，当我点击 pygame 窗口上的“X”按钮时，什么也没有发生。这只是一个win8问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:22:46.797

一般的做法是在退出程序时也调用 pygame.quit()。见下文：

```
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit() 
```

编辑 - 这也可能不是您的代码的完整复制/粘贴，但如果您的代码字面上只是说 sys.exit 而没有 () 它不是函数调用:)

# bash - 在 bash 中检查 rcode 和管道

> ID：13804824
> 
> 赞同：0
> 
> 时间：2012-12-10T16:18:54.400
> 
> 标签：bash, pipe

我想做这个：

```
./first.sh
if [ $? -ne 0 ]; then
exit
fi
# pipe output of first.sh to second.sh 
```

因此`second.sh`，除非成功，否则不应运行，`first.sh`但我真的不知道同时将输出`first.sh`传递到哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:20:57.530

为什么不将其转储到文件中，然后将其写入`second.sh`if`first.sh`成功？

```
./first.sh > /tmp/first.pid 
if [ $? -ne 0 ]; then
   exit
fi   
./second.sh < /tmp/first.pid 
```

如果并发是一个问题，您可能希望使用 pid 或类似的文件来限定您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:26:08.233

您可以设置`bash`选项`pipefail`以在管道中的命令失败时导致错误并报告退出：

```
set -e # Set exit on error
set -o pipefail # Set exit on error to work with pipes 
```

[信息来源](http://petereisentraut.blogspot.co.uk/2010/11/pipefail.html)。

# javascript - 如何在 javascript 中立即手动运行 setTimeout 计时器？

> ID：13804828
> 
> 赞同：2
> 
> 时间：2012-12-10T16:19:18.167
> 
> 标签：javascript, jquery, asp.net, settimeout

我有一个包含 a 的表单，`Repeater`其中包含 a`RadioButtonList`和 a `TextBox`。当用户更改其中一个 TextBoxes 中的单选按钮或文本时，该 Repeater 项目的选定项目和关联文本应保存到数据库中。

由于该`.change()`功能，当单选按钮更改时保存很容易，但是对于`TextBox`我正在创建一个计时器，当文本更改时保存数据 2 秒后用户停止键入

问题是，如果用户在计时器执行之前离开页面或开始输入不同的文本框，我需要手动执行计时器。我怎样才能做到这一点？

我的 javascript 看起来像这样：

```
var typingTimer;                //timer identifier
var doneTypingInterval = 2000;  //time in ms, 2 second for example

$('textarea').on('input', function () {
    // Clear timer
    clearTimeout(typingTimer);

    // Set new timer to save form, passing current repeater item to Save method
    var parent = $(this).closest('.my-repeater-section');
    typingTimer = setTimeout(function () { saveForm(parent); }, doneTypingInterval);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:22:02.947

计时器只是一个延迟的函数调用。所以，命名你的函数，你就可以“手动”调用它：

```
var typingTimer;                //timer identifier
var doneTypingInterval = 2000;  //time in ms, 2 second for example

$('textarea').on('input', function () {
    // Clear timer
    clearTimeout(typingTimer);

    // Set new timer to save form, passing current repeater item to Save method
    var parent = $(this).closest('.my-repeater-section');

    function callback() {
        saveForm(parent);
    }

    typingTimer = setTimeout(callback, doneTypingInterval);

    // call it manually like usual:
    // callback();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:25:05.367

在模糊上调用您的保存功能，这样当用户离开该文本区域时，它将失去焦点，如果您收听该事件，您可以在那里使用您的保存功能

```
 $("textarea").blur(function(){
  //Call your save function here
}); 
```

# javascript - 在浏览器中播放 HTML5 视频——什么适用于大多数 Android 设备？

> ID：13804830
> 
> 赞同：5
> 
> 时间：2012-12-10T16:19:25.167
> 
> 标签：javascript, android, html, video

我正在尝试让 HTML5 视频在移动设备上播放。它们似乎在最新版本的 iOS 上运行良好，但我与 Android 设备有很多不一致之处。

我正在使用 video.js 并监听对缩略图的点击，这反过来将元素替换为 HTML5 视频并自动播放。以下代码在 Android 模拟器上完全不起作用（单击缩略图没有任何作用）。当我在我自己的 Droid Razr 上试用它时，它开始加载视频，然后浏览器死机。这发生在本机浏览器*和*Chrome 中，这告诉我它是设备本机的。

```
$(".video").live("click", function(e) {
    e.preventDefault();
    $(this).replaceWith("<video id='" + $(this).data("video-id") + "' class='video-js' preoload='auto' width='100%' height='100%' poster='" + $(this).data("video-poster-url") + "'><source type='video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"' src='" + $(this).data("video-url")  + "'></video>");

    video  = _V_($(this));
    video.ready(function() {
       this.play();
       this.requestFullScreen();
    });
}); 
```

HTML最终是：

```
<video id='fv3530' class='video-js' preoload='auto' width='100%' height='100%' poster='/posters/fv3530.jpg'>
    <source type='video/mp4; codecs="avc1.42E01E, mp4a.40.2" src='/videos/fv3530.mp4'>
</video> 
```

有谁知道为什么这会导致 Android 设备完全死机，以及我可以做些什么来让视频在大多数 Android 设备上始终如一地运行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:25:28.973

请看这个问题：[Android 上的 HTML5 <video> 元素](https://stackoverflow.com/questions/1711078/html5-video-element-on-android)

显然，根据[http://developer.android.com/about/versions/android-2.0-highlights.html](http://developer.android.com/about/versions/android-2.0-highlights.html) ，有可能在 android 上使用 HTML5 视频 但是为了使这项工作有一些严格的参数（见检查对问题的回答）。

在您的情况下，使用模拟器处理事件并不容易，尤其是 html5 等，因此您应该始终使用真实设备进行测试（非常推荐）。关于您的手机，它无法正常工作的可能原因是您使用了不受支持的视频编解码器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:50:59.693

从声明中删除`type`属性。`source`这通常会导致 Android 出现问题，尤其是旧版本。

您的源声明应该是：

```
<source src='/videos/fv3530.mp4'> 
```

我有一个[小网站](http://tobymanley.com)，它在 Android 上有一个工作 HTML5 视频（刚刚在运行 Android 2.2 的 HTC Desire 上对其进行了测试）。

# ruby-on-rails - 你怎么能允许 <3 或任何标签 < 任何不以 < 或 > 结尾的字符清理

> ID：13804832
> 
> 赞同：-2
> 
> 时间：2012-12-10T16:19:26.340
> 
> 标签：ruby-on-rails, sanitize, strip-tags

消毒（“你好”）=>你好

但如果我有

sanitize("<3") 它只返回 3

如果不以 < 或 > 结尾，我希望它应该允许字符串

就像我做 sanitize("<3 >4") 它应该简单地返回 <3 >4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:36:43.317

首先，Rails 的内置清理不处理格式错误的标记。

我强烈建议您使用 Sanitize gem 来处理任何可能出现格式错误的内容：

[https://github.com/rgrove/sanitize](https://github.com/rgrove/sanitize)

但是您的问题是非 html 编码的字符实体。通过 CGI.escape() 运行它们

```
require 'cgi'
CGI.escape('<3') # => "%3C3" 
```

为了完成：

```
require 'cgi'
Sanitize.clean( CGI.escape('<3') ) # => "%3C3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:29:13.080

您应该对您的内容进行预清理，以正确编码您想要保留的值。例如：

```
content.gsub!(/\<3/, '&lt;3') 
```

唯一需要担心的是，您的清洁工可能会双重逃避这一点，`&amp;lt;3`这可能会很烦人。至少如果需要的话，这是可以逆转的。

如果不去除无效的括号，就不可能“清理”。一些浏览器会在这种事情上窒息，如果处理不当，它可能会使您的页面完全损坏。

# matlab - 使用 MATLAB svmtrain

> ID：13804833
> 
> 赞同：3
> 
> 时间：2012-12-10T16:19:28.870
> 
> 标签：matlab, svm

这是我的第一个 Matlab 程序。

我正在尝试将 svmtrain 和 svmclassify 与自定义内核一起使用。

假设我的内核是常规的内积。

我应该怎么写？

我做了：

```
function [K] = mykernel(U, V)
    for i=size(U,1)
        for j=size(V,1)
            K(i,j) = dot(U(i,:),V(j,:));
        end
    end
    return 
end 
```

然后在命令窗口中：

```
x=randn(1000,10);
w=rand(1,10);
y=sign(x*w');
a=svmtrain(x,y,'kernel_function',mykernel); 
```

我得到：

```
Error using mykernel (line 2)
Not enough input arguments. 
```

也许一个人有一个没有循环的技巧，比如 U*V'，知道这个技巧会很好，但我需要循环执行，因为我要将内积更改为更多复杂的东西。

我也不太明白那些 U、V 是什么，我也没有真正明白这个函数应该返回什么（它是 Gram 矩阵吗？）

谢谢你的帮助！！

- - 编辑：

我做了以下事情：

```
function [K] = mink(U, V)
    for i=1:size(U,1)
        for j=1:size(V,1)
            K(i,j) = min(exp(-dot(U(i,:),U(j,:))),exp(-dot(V(i,:),V(j,:))));
        end
    end
    return 
end

>>x=randn(100,10);
>>w=rand(1,10);
>>y=sign(x*w');
>>a=svmtrain(x,y,'kernel_function',@mink);
>>svmclassify(a, x)
Error using svmclassify (line 114)
An error was encountered during classification.
Attempted to access U(89,:); index out of bounds because size(U)=[88,10]. 
```

所以现在 svmtrain 可以工作，但 svmclassify 抱怨尺寸错误（它是如何得到 88 的？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:36:10.990

为了传递一个函数，你需要使用`@`符号。这显示在[docs](http://www.mathworks.com/help/bioinfo/ref/svmtrain.html)中，其中引用：

> @kfun — 内核函数的函数句柄。核函数必须是以下形式

最重要的是，这将起作用。

```
a=svmtrain(x,y,'kernel_function',@mykernel); 
```

# c++ - 使用 gmock 模拟 pthread_create

> ID：13804838
> 
> 赞同：2
> 
> 时间：2012-12-10T16:19:39.367
> 
> 标签：c++, gmock

我有一个调用`pthread_create(...)`. 是否可以模拟并期望输出，`pthread_create`所以我实际上并没有启动线程？

我问这个是因为整个类是一个模拟对象，一旦我在测试用例结束时删除对象，线程段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:29:44.580

是的。声明模拟类和函数：

```
struct phtread_interface
{
    virtual int pthread_create(...) = 0;
    ... // other methods
};

class pthread_mock : public phtread_interface
{
public:
    MOCK_METHOD1(pthread_create, int(...));
    ....
};

pthread_interface *current_pthread_mock;

void set_current_pthread_mock(phtread_interface *mock)
{
    current_pthread_mock = mock;
}

int pthread_create(...)
{
    return current_pthread_mock->pthread_create(...);
} 
```

在每个测试功能中执行以下操作：

```
pthread_mock mock_obj;
set_current_pthread_mock(&mock_obj);

// set expectations over mock_obj, use pthread_create ... 
```

在源文件中`pthread_create`添加条件包括：

```
#ifndef TESTING
#include <pthread.h>
#else
#include "pthread_mock.h"
#endif 
```

# visual-studio-2010 - Visual Studio Built Nant.exe 以代码 1 退出

> ID：13804839
> 
> 赞同：1
> 
> 时间：2012-12-10T16:19:42.067
> 
> 标签：visual-studio-2010, nant

我在预构建事件中有以下行：

```
"$(SolutionDir)SolutionItems\NAnt\bin\NAnt.exe" configMerge -D:buildfile="$(SolutionDir)SolutionItems\NAnt\default.build" -D:sourcefile="$(SolutionDir)Web\web.format.config" -D:destinationfile="$(SolutionDir)Web\web.config" 
```

它给出了以下错误：

```
Error   191 The command ""D:\Projects\trunk\SolutionItems\NAnt\bin\NAnt.exe" configMerge -D:buildfile="D:\Projects\trunk\SolutionItems\NAnt\default.build" -D:sourcefile="D:\Projects\trunk\Web\web.format.config" -D:destinationfile="D:\Projects\trunk\Web\web.config"" exited with code 1. 
```

知道为什么它说代码 1 吗？我也试过不带参数，也不管用。Nant.exe 是否仍然适用于预构建事件？

我知道还有更多这样的问题。但是他们都没有给我答案来解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T11:55:10.610

代码 1 表示 nant 构建失败。仔细查看输出，看看是否有东西告诉您构建失败的*原因。*

# python - 在 Simulink 和 Blender 之间链接数据

> ID：13804840
> 
> 赞同：0
> 
> 时间：2012-12-10T16:19:42.597
> 
> 标签：python, hyperlink, simulink, blender

我一直在尝试确定一种在正在运行的 Simulink 模型和 Blender（或 Python）之间链接数据的方法。我不知道从哪里开始，但我确实找到了一个可能已经解决它的软件，如果我能让它安装正确的话；模拟服务器。

我在 StackOverflow 上发现了 SimServer（原始问题在[此处](https://stackoverflow.com/questions/8198488/access-call-simulink-from-python)），但是我无法正确安装它，它在 httpwrapper.c 文件中的 mex 期间出错，指出“语法错误；找到`SOCKET' expecting`}'”（如果我删除相同mex 命令中的 httpwrapper.c 文件，它会以相同的方式在另一个文件上出错）。

有没有办法解决这个问题，还是我应该继续尝试寻找另一种解决方案？我觉得另一种解决方案会更可取，并且可能更容易安装到其他机器上。有没有办法可以将信息从正在运行的 Simulink 模型传输到文件，并让 Blender/Python 监视该文件的更改并实时更新 Blender Game 中的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:42:16.810

如果您有兴趣从 Simulink 将数据写入文件，有几种方法可以做到这一点。我认为最简单的方法是使用 add_exec_event_listener 添加一个回调来监听你的块的“PostOutputs”事件。在此回调中，您可以访问块中的数据并写入文件。

[您可以在http://www.mathworks.com/help/simulink/slref/add_exec_event_listener.html](http://www.mathworks.com/help/simulink/slref/add_exec_event_listener.html)找到 add_exec_event_listener 的文档

从 Simulink 写入文件的其他方法是

1.  使用 MATLAB Function 模块。使用您自己的“外部”函数写入文件。
2.  在 MATLAB 或 C/C++ 中编写 S-Function。

从外部程序中，您可以查看此文件以获取更新。在这种方法中具有实时性是值得怀疑的。写入磁盘中的文件和其他程序注意到更改可能会有延迟。

# c++ - 将 Yuv420 转换为 rgb 并在 qt pixmap 上显示

> ID：13804844
> 
> 赞同：2
> 
> 时间：2012-12-10T16:19:55.730
> 
> 标签：c++, qt, rgb, yuv

我想将 yuv 图片转换为 RGB 以显示在 QT 像素图上。我现在看到的是一个空的像素图。

```
int convertYUVtoRGB(int y, int u, int v) {
    int r,g,b;

    r = y + (int)(1.402f*v);
    g = y - (int)(0.344f*u +0.714f*v);
    b = y + (int)(1.772f*u);

    r = r>255? 255 : r<0 ? 0 : r;
    g = g>255? 255 : g<0 ? 0 : g;
    b = b>255? 255 : b<0 ? 0 : b;
    return 0xff000000 | (b<<16) | (g<<8) | r;
}

unsigned char * convertYUV420_NV21toRGB8888(unsigned char data[78080], int width, int height) {
    int size = width*height;
    int offset = size;
    unsigned char * pixels = new unsigned char[size];
    int u, v, y1, y2, y3, y4;

    // i percorre os Y and the final pixels
    // k percorre os pixles U e V
    for(int i=0, k=0; i < size; i+=2, k+=2) {
        y1 = data[i  ]&0xff;
        y2 = data[i+1]&0xff;
        y3 = data[width+i  ]&0xff;
        y4 = data[width+i+1]&0xff;

        u = data[offset+k  ]&0xff;
        v = data[offset+k+1]&0xff;
        u = u-128;
        v = v-128;

        pixels[i  ] = convertYUVtoRGB(y1, u, v);
        pixels[i+1] = convertYUVtoRGB(y2, u, v);
        pixels[width+i  ] = convertYUVtoRGB(y3, u, v);
        pixels[width+i+1] = convertYUVtoRGB(y4, u, v);

        if (i!=0 && (i+2)%width==0)
            i+=width;
    }

    return pixels;
}
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    unsigned char * buffer;
    unsigned char * image = NULL;
    QPixmap pixmap;
    QImage img(320, 122, QImage::Format_ARGB32_Premultiplied);
    img.fill(QColor(Qt::white).rgb());

    ifstream is;
    is.open ("bunny.yuv", ios::binary );
    //    is.seekg (0, ios::end);
    //    length = is.tellg();
    //    is.seekg (0, ios::beg);
    buffer = new unsigned char[78081];
    is.read((char * )buffer,78080);
    is.close();

    /*
     for (int x = 0; x < 10; ++x) {
       for (int y = 0; y < 10; ++y) {
         img.setPixel(x, y, qRgb(0, 0, 0));
       }
     }
     */

    for(int i = 0; i < 78080; i++)
        qDebug() << buffer[i]<< endl;

    image = convertYUV420_NV21toRGB8888(buffer,320,122);
    QByteArray byteImage((const char *)image);
    pixmap.loadFromData(byteImage);

    QLabel myLabel;
    myLabel.setPixmap(pixmap);
    myLabel.setGeometry(20,100,320,122);
    myLabel.show();

    return a.exec();
} 
```

编辑：我添加了正确的格式和括号。还是同样的问题。亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:56:43.820

In `convertYUV420_NV21toRGB8888`,`pixels`是一个 unsigned char 数组，但您试图将 a 分配`int`给它。您将得到的只是低字节，并且输出中的大部分字节都将保持未设置。您需要完全重新考虑编写输出的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:25:34.730

这不会做你认为它做的事情：

```
r = y + (int)1.402f*v;
g = y - (int)(0.344f*u +0.714f*v);
b = y + (int)1.772f*u; 
```

由于您错过了括号，因此在计算之前将您的浮点常量转换为整数。

然后将您的 YUV 数据转换为打包成 int 的 RGB，然后将该 int 存储到 char ...

所以：

```
unsigned char * pixels = new unsigned char[size]; 
```

应该是：

```
unsigned int* pixels = new unsigned int[size]; 
```

显然这也会影响函数的返回类型。您可能还想将 YUV -> RGB 函数的类型也更改为无符号，以保持一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:38:27.610

当您在 Jason 的帖子中完成计算时 - 像素图的最佳格式是 QImage::Format_ARGB32_Premultiplied - 格式是`Blue byte Green byte Red byte 0xff`

# javascript - 如何在子元素列表中替换元素/节点？

> ID：13804848
> 
> 赞同：-3
> 
> 时间：2012-12-10T16:20:00.240
> 
> 标签：javascript

我在 a 中有一个`<p>`元素列表，`<DIV>`我想在单击任何标签时将其替换`<p>`为新的。`<DIV>``<p>`

```
<div class="list">
 <p onClick="replaceWithDiv">para one</p>
 <p onClick="replaceWithDiv">para two</p>
 <p onClick="replaceWithDiv">para three</p>
</div>

when the second <p> is clicked I want it to change to

<div class="list">
 <p onClick="replaceWithDiv">para one</p>
 <div>NEW DIV</div>
 <p onClick="replaceWithDiv">para three</p>
</div> 
```

我怎样才能在 javacsript 中做到这一点？非常感谢任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:26:18.687

像这样的东西：

```
function replaceWithDiv(obj) {
    var div = document.createElement('div');
    div.innerHTML = 'NEW DIV';
    obj.parentNode.insertBefore(div, obj);
    obj.parentNode.removeChild(obj);
}​ 
```

HTML：

```
<p onclick="replaceWithDiv(this)">para one</p> 
```

[http://jsfiddle.net/dfsq/kcZYW/](http://jsfiddle.net/dfsq/kcZYW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:25:55.300

尝试[替换子](https://developer.mozilla.org/en-US/docs/DOM/Node.replaceChild?redirectlocale=en-US&redirectslug=DOM/element.replaceChild)

```
function replaceWithDiv() 
    var div = document.createElement("DIV");
    //...
    this.parentNode.replaceChild(div, this);
}

<p onclick="replaceWithDiv.call(this)">para one</p> 
```

# bash - 如何使用正则表达式分隔符获取第 n 列

> ID：13804849
> 
> 赞同：8
> 
> 时间：2012-12-10T16:20:10.650
> 
> 标签：bash, unix, text, text-processing

基本上我从`ls -la`命令中得到一行：

```
-rw-r--r--  13 ondrejodchazel  staff  442 Dec 10 16:23 some_file 
```

并想要获取文件的大小（442）。我已经尝试过`cut`命令`sed`，但没有成功。仅使用基本的 UNIX 工具（cut、sed、awk ...），我如何从标准输入中获取特定列，其中分隔符是正则`/ +/`表达式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T16:56:24.003

如果你想这样做，`cut`你需要先挤压空间 ( `tr -s ' '`) 因为`cut`不支持`+`. 这应该有效：

```
ls -la | tr -s ' ' | cut -d' ' -f 5 
```

`sed`使用(GNU sed)时需要做更多的工作：

```
ls -la | sed -r 's/([^ ]+ +){4}([^ ]+).*/\2/' 
```

如果您使用 grep 替代品（GNU grep），则需要更多的手指打孔：

```
ls -la | grep -Eo '[^ ]+( +[^ ]+){4}' | grep -Eo '[^ ]+$' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T16:22:26.980

解析`ls`输出比你想象的要难。改用专用工具，例如`stat`。

```
size=$(stat -c '%s' some_file) 
```

`ls -la some_file | awk '{print $5}'`如果数字使用空格作为千​​位分隔符（这在某些欧洲语言环境中很常见），则可能会中断一种方法。

另请参阅[为什么不应该解析*ls* (1)](http://mywiki.wooledge.org/ParsingLs)的输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:23:03.423

管道输出：

```
awk '{print $5}' 
```

甚至更好的是我们使用这样的 stat 命令（在 Mac 上）：

```
stat -f "%z" yourFile 
```

或者（在 Linux 上）

```
stat -c "%s" yourFile 
```

这将以字节为单位输出文件大小。

# unit-testing - 如何使用 CodeIgniter 轻松进行单元测试？

> ID：13804850
> 
> 赞同：8
> 
> 时间：2012-12-10T16:20:14.160
> 
> 标签：unit-testing, codeigniter, phpunit

我想用 CodeIgniter 测试我的控制器/模型。如何使用 CodeIgniter 完成此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:28:25.220

请在此处查看单元测试： [使用 CI进行单元测试](https://www.codeigniter.com/user_guide/libraries/unit_testing.html)

这也可能有帮助：[stackoverflow 链接](https://stackoverflow.com/questions/4883333/automated-unit-testing-with-codeigniter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T17:35:42.227

您使用的平台无关紧要。您可以使用内置的 CodeIgniter[单元测试](http://ellislab.com/codeigniter/user-guide/libraries/unit_testing.html)库，或者如果您想要一种更类似于许多常见单元测试库的方法，我建议您使用 Toast：http: [//jensroland.com/projects/toast /](http://jensroland.com/projects/toast/)

# jquery - 4个jCarousel实例，只有最后一个有效

> ID：13804851
> 
> 赞同：0
> 
> 时间：2012-12-10T16:20:15.560
> 
> 标签：jquery, jcarousel

我正在研究[http://staticstore.cambiumlearning.com/](http://staticstore.cambiumlearning.com/)。有一个`#tabInnerContainer`元素有四个`<ul class="tabItem">`实例，我试图在每个实例上运行 jCarousel，但似乎只有最后一个实例有效！我什至尝试通过它们的 ID 单独初始化它们，但仍然 - 只有最后一个引用的会运行！

抱歉，如果这太模糊了；如果需要，我很乐意提供更多信息。TIA 任何人都可以给我任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:47:53.707

每个轮播都有一对箭头，但是您的箭头彼此重叠（最后一个轮播具有更高的 z-index），这就是为什么只有最后一个 UL 在点击时被更改。您应该将“隐藏”类放在 UL 和箭头的容器上，而不是放在 UL 本身上。

```
function selectTab(thing) {
    $('#tabContainer .tabs a').each(function(index) {
        $(this).removeClass('tabSelected');
    });
    $(thing).addClass('tabSelected');
    $('#tabInnerContainer ul.tabItem').each(function(index) {
        if ($(this).attr('data-category') === $(thing).attr('data-category')) {
            $(this).parent('.jcarousel-skin-tango').removeClass('hide');
            //alert($(this).attr('id') + ' should be visible!');
        } else if ($(this).attr('data-category') != $(thing).attr('data-category')) {
            $(this).parent('.jcarousel-skin-tango').addClass('hide');
        }
    });
} 
```

# asp.net - 从 Windows 服务托管的 WCF 到 ASP.NET 客户端的进度报告（可能是 ajax？）

> ID：13804853
> 
> 赞同：0
> 
> 时间：2012-12-10T16:20:19.307
> 
> 标签：asp.net, ajax, wcf

我们有一个 asp.net webform 应用程序 (3.5) 和一个通过 windows 服务托管的 wcf 服务（一个在服务启动时激活的服务库）。两者都部署在同一台服务器中。

WCF 服务用于少数长时间运行的任务。

现在客户想要一些定制的报告，这将花费大量时间。

我的想法是在 UI 中显示任务的进度，但我正在努力寻找正确的方法。

是否可以通过以下方式，

1.  根据 page 的请求，服务异步启动处理并将状态报告给某个变量。（我不想写入数据库）

2.  来自客户端页面的异步轮询，它与 wcf 服务的另一个操作通信以检索变量值。

Ajax 客户端可以与 wcf 服务进行通信，但看起来该服务需要托管为 Web 应用程序（这里不太了解）

还有其他想法吗？使用 wcf 回调（双工通信）的任何选项？太糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:29:20.593

一年前我们取得了类似的成就。

1) 我们使用 Singleton InstanceMode 创建了一个 WCF 服务器，它处理请求并同时保持状态。另一种方法，例如 GetStatus 将状态返回给客户端。它还提供错误详细信息，以防出现任何错误。但是，我们还保留了处理细节。

2）在网页上，一旦请求被初始化并在网页上显示进度条，我们就会异步点击 getstatus。

这对我们很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:26:07.297

您可以考虑使用[SignalR 之](http://signalr.net/)类的东西将响应从您的 Web 应用程序推送到您的客户端（除其他好处外，这使用了[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)技术，因此减少了您必须执行的轮询量）。

要从 WCF 服务获取对 Web 应用程序的响应，您可以使用[对服务的异步请求](http://msdn.microsoft.com/en-us/library/ms730059.aspx)，或使用消息传递解决方案，例如[Windows Azure Service Bus](http://msdn.microsoft.com/en-us/library/ee732537.aspx)。

我们`Client > JQuery > MVC > WCF > Service Bus > MVC > SignalR > Client`用作管道，它非常适合长时间运行的流程。

# php - 在元素点击时切换 CSS 样式

> ID：13804856
> 
> 赞同：2
> 
> 时间：2012-12-10T16:20:25.547
> 
> 标签：php, javascript, jquery, css, wordpress

对不起，如果这个问题被问了很多。我目前正在一个将拥有自定义画廊的网站上工作。在所有现在要卡住的事情中，它的画廊页面指示器。

在此页面上，左侧部分将由“画廊”组成，每个“页面”显示 6 个画廊。[http://www.ct-social.com/ctsdev/aff/news-and-events/](http://www.ct-social.com/ctsdev/aff/news-and-events/)

画廊上方是小蓝点，将用作画廊指标。创建图库指标的代码如下：

```
 <?php for ($i=0; $i < $n2; $i++): ?>
    <div class="event-gallery-unselected"></div>
    <?php endfor; ?> 
```

加载后，我希望为最左边的点赋予不同的样式，该样式归因于 class="event-gallery-selected"。单击任何其他点（当前选择除外）后，当前选定的点需要恢复为“未选择的事件库”，并且单击的点呈现“已选择的事件库”

我对 PHP 有点陌生，对 JavaScript 和 JQuery 很陌生。如果使用这两种语言中的任何一种作为示例，您能否分解一下您的解释？非常感谢您的所有帮助。

更新代码：CSS

```
.event-gallery.selected {
position: relative; 
top: -0.7em;  
background: white;
background-color: #1e93bb;
width: 20px;
height: 20px;
margin: 7px;
border-radius: 50%; 
}
.event-gallery {    
position: relative; 
top: -1.1em;  
background: white;
background-color: #63c5e7;
width: 15px;
height: 15px;
border-radius: 50%;
margin: 7px;
float: right;
cursor: pointer;
} 
```

更新代码 JS

```
<script type="text/javascript">
jQuery(document).ready(function($){
    $(".event-gallery").click(function() {
        $(this).addClass('selected').siblings().removeClass('selected');
    });
});
</script> 
```

现在才开始工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:23:24.650

我建议在您的所有画廊`div`元素上开设一个课程。这将允许维护通用样式，并且还允许您只有 1 个单击处理程序。然后，您可以拥有一个单独的`selected`类，您可以根据需要进行切换。尝试这个：

```
<?php for ($i = 0; $i < $n2; $i++): ?>
    <div class="event-gallery"></div>
<?php endfor; ?> 
```

```
.event-gallery { 
    color: #000; /* default styling ... */
    padding: 5px;
}
.event-gallery.selected { 
    color: #FFF; /* selected item styling ... */
    background-color: #C00;
} 
```

```
$(".event-gallery").click(function() {
    $(this).addClass('selected').siblings().removeClass('selected');
}); 
```

[**示例小提琴**](http://jsfiddle.net/P7ecV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:24:25.917

像这样使用 jQuery：

```
$('divid').click(function(){
    $('divid').css('background-image', 'pic2.jpeg');
}); 
```

例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:25:39.983

如果你有一组元素：

```
<div class="wrapper">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
</div> 
```

我通常这样处理它：

```
var $items = $('#wrapper .item'); 
$('.item').click(function(){
    $items.removeClass('active'); // 'reset' the active links
    $(this).addClass('active'); // apply the active class to the clicked item
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:26:09.717

这可以通过 jQuery 的一点帮助轻松完成。

```
$(function() {
    $(".even-gallery-unselected").on("click", function() {
        this.removeClass("event-gallery-unselected")
            .addClass("event-gallery-selected");
    });
}); 
```

# c# - 温莎城堡到 Autofac

> ID：13804857
> 
> 赞同：1
> 
> 时间：2012-12-10T16:20:38.060
> 
> 标签：c#, dependency-injection, castle-windsor, autofac

我有一个 DevExpress 示例 mvc 网站应用程序。它使用温莎城堡作为国际奥委会。我只是尝试通过 Autofac 替换，但没有运气！

这是示例代码：

```
container
    .Register(Component
        .For<DbRepositories.ClinicalStudyContext>()
        .LifestylePerWebRequest()
        .DependsOn(new { connectionString }))
    .Register(Component
        .For<DbRepositories.IClinicalStudyContextFactory>()
        .AsFactory())
    .Register(Component
        .For<FirstStartInitializer>()
        .LifestyleTransient())
    .Register(Component
        .For<IUserRepository>()
        .ImplementedBy<DbRepositories.UserRepository>()) 
```

这是我的 Autofac 转换：

```
var builder = new ContainerBuilder();

builder.RegisterControllers(typeof(MvcApplication).Assembly);

builder.Register(c => 
    new DbRepositories.AdminContext(connectionString))
    .InstancePerHttpRequest();

builder.RegisterType<DbRepositories.IAdminContextFactory>()
    .As<DbRepositories.IAdminContextFactory>();

builder.RegisterType<DbRepositories.UserRepository>()
    .As<IUserRepository>().InstancePerHttpRequest(); 
```

关于我的研究，Autofac 上没有 AsFactory() 的实现。

这是`IAdminContextFactory`界面：

```
public interface IAdminContextFactory
{
    AdminContext Retrieve();
} 
```

这是错误应用程序说：

> 在“公共绑定标志”中找不到“Admin.Infrastructure.EFRepository.IAdminContextFactory”类型的构造函数。

谁能帮忙？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:55:30.593

Your `IAdminContextFactory` registration will fail, because the first part of the `RegisterType` must be a service type. In this case, a class that *implements* the `IAdminContextFactory` interface. Autofac tries to build an instance of the type, which certainly will fail because you cannot instantiate an interface.

So, what you need is an *implementation* of the `IAdminContextFactory` interface. The Castle `AsFactory` method generates this implementation for you. You can get this behavior with [the Autofac AggregateService](https://autofac.readthedocs.io/en/latest/advanced/aggregate-services.html?highlight=AggregateService) extra.

With the bits in place you can do:

```
builder.RegisterAggregateService<IAdminContextFactory>(); 
```

# spring-batch - Spring Batch & Spring Batch 管理项目

> ID：13804878
> 
> 赞同：3
> 
> 时间：2012-12-10T16:21:56.847
> 
> 标签：spring-batch, jettison

我们有一个带有 Spring Batch 和 Spring Batch Admin 的项目。最近我们`java.util.EmptyStackException`在运行批处理过程时得到了。

谷歌搜索后，我对这个问题有了一些了解，并通过将 jettison jar 从 1.1 升级到 1.3.2 来解决它。

我们通过在 pom.xml 中排除 spring 批处理核心声明中的 jettison 并在**pom.xml****中**添加 jettison 作为依赖项来做到这一点。

 **我们的问题是这是解决这个问题的正确方法吗？由于将 jettison 升级到 1.3.2，Spring Batch 会不会有任何问题？

我们得到的错误的堆栈跟踪：

```
Caused by: java.util.EmptyStackException
    at org.codehaus.jettison.util.FastStack.peek(FastStack.java:39)
    at org.codehaus.jettison.mapped.MappedXMLStreamWriter.writeEndElement(MappedXMLStreamWriter.java:200)
    at com.thoughtworks.xstream.io.xml.StaxWriter.endNode(StaxWriter.java:107)
    at com.thoughtworks.xstream.io.WriterWrapper.endNode(WriterWrapper.java:37)
    at com.thoughtworks.xstream.io.path.PathTrackingWriter.endNode(PathTrackingWriter.java:48)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:138)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.visit(AbstractReflectionConverter.java:113)
    at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:129)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:95)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:54)
    at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:78)
    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:63)
    at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:63)
    at com.thoughtworks.xstream.converters.collections.MapConverter.marshal(MapConverter.java:58)
    at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:78)
    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:63)
    at com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:98)
    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:38)
    at com.thoughtworks.xstream.XStream.marshal(XStream.java:845)
    at com.thoughtworks.xstream.XStream.marshal(XStream.java:834)
    at com.thoughtworks.xstream.XStream.toXML(XStream.java:815)
    at com.thoughtworks.xstream.XStream.toXML(XStream.java:805)
    at org.springframework.batch.core.repository.dao.XStreamExecutionContextStringSerializer.serialize(XStreamExecutionContextStringSerializer.java:43)
    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao.serializeContext(JdbcExecutionContextDao.java:212)
    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao.updateExecutionContext(JdbcExecutionContextDao.java:122)
    at org.springframework.batch.core.repository.support.SimpleJobRepository.updateExecutionContext(SimpleJobRepository.java:188)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy61.updateExecutionContext(Unknown Source)
    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:145)
    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:61)
    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:60)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:144)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-23T12:43:53.443

我最近也遇到了这个。我不确定你是否有完整的堆栈跟踪，但在我的应用程序中有一个调用：

```
sun.misc.Unsafe 
```

2016 年发生了一个变化，它破坏了一些像 groovy 这样的 jvm 语言。抛弃 1.1 显然没有使用这个“不安全”调用，它可能会在 JVM 版本中发生变化（它不是普通 java API 的一部分）**

# pascal - 尽管有 readln，Pascal 还是会立即编译并关闭；

> ID：13804883
> 
> 赞同：0
> 
> 时间：2012-12-10T16:22:07.953
> 
> 标签：pascal, readline

```
program words;
uses crt;
type
    T2DArray = array[1..100, 1..100] of string;
var
    ch:char;
    x,y:integer;
    MapArray: T2DArray;
begin
    x:=0;
    y:=0;
    repeat
            MapArray[10, 10] := 'you are at a tree';
            writeln(MapArray[x,y]);
            write('current positon is ');
            write(x);write(',');write(y);
            ch:=ReadKey;
            case ch of
            #0 : begin
                    ch:=ReadKey; {Read ScanCode}
                    case ch of
                    'w'  :  y:=y+1;
                    'a'  :  x:=x-1;
                    's'  :  y:=y-1;
                    'd'  :  x:=x+1;
                    end;
            end;
            #27 : WriteLn('ESC');
            end;
    until ch=#27;
    readln;
end. 
```

我有这段简单的代码，可以让我将事物分配给二维数组的 XY 坐标。尽管有 readln，代码仍会立即编译并关闭；在底部。一切顺利，阿兰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:07:24.923

在开发过程中始终启用范围检查 {$R+}。您有一个基于 1 的数组，但您的 x 和 y 值在您第一次从中读取时为零。

# git - heroku git:clone 创建空存储库

> ID：13804885
> 
> 赞同：8
> 
> 时间：2012-12-10T16:22:08.990
> 
> 标签：git, heroku

我在从 heroku 检索当前应用程序代码时遇到问题。我认为 Heroku 搞砸了，但他们的支持还没有回复（3 天而且还在计数）。但也许其他人知道可能出了什么问题，或者是否有其他我可以尝试的东西。

终端输出：

```
$ heroku git:clone -a APPNAME
Cloning from app 'APPNAME'...
Cloning into 'APPNAME'...
warning: You appear to have cloned an empty repository.

$ git pull
Your configuration specifies to merge with the ref 'master'
from the remote, but no such ref was fetched. 
```

.git/config 看起来不错，但本地目录没有分支或其他内容。

* * *

**更新** 问题确实是一个损坏的 git 存储库。Heroku 支持重新初始化了解决所有问题的存储库。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-12-29T12:10:38.770

摘自 [https://help.heroku.com/XOBUHLKQ/why-do-i-see-a-message-you-appear-to-have-cloned-an-empty-repository-when-using-heroku-git-克隆](https://help.heroku.com/XOBUHLKQ/why-do-i-see-a-message-you-appear-to-have-cloned-an-empty-repository-when-using-heroku-git-clone)

> **为什么**当通过我们的平台 API 部署到您的应用程序时会出现此错误消息 - 通常这些是通过 Heroku 按钮单击进行的部署。
> 
> *   使用 Heroku Button 部署应用程序并记住您创建的应用程序名称。
>     
>     
> *   返回显示 Heroku 按钮的位置并复制它的基础 URL，例如 [https://heroku.com/deploy?template=https://github.com/jamesward/heroku-connect-phone-change](https://heroku.com/deploy?template=https://github.com/jamesward/heroku-connect-phone-change)
>     
>     
> *   现在提取[https://github.com](https://github.com)部分，所以从上面的例子中你会得到 [https://github.com/jamesward/heroku-connect-phone-change](https://github.com/jamesward/heroku-connect-phone-change)
>     
>     
> *   克隆 repo `heroku git:clone -a <YOUR-APP-NAME>`- 它将被报告为空 - 可以 cd 进入项目并添加一个指向原始源的 git 远程，
>     
>     
>     
>     `git remote add origin https://github.com/jamesward/heroku-connect-phone-change`
>     
>     
> *   从远程原点拉
>     
>     
>     
>     `git pull origin master`
>     
>     
> *   您现在将拥有已部署应用程序的代码，您可以在本地对其进行更改并将其部署回 Heroku。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-16T08:44:42.287

您可以使用heroku slog 下载。请参考[https://help.heroku.com/FZDDCBLB/how-can-i-download-my-code-from-heroku](https://help.heroku.com/FZDDCBLB/how-can-i-download-my-code-from-heroku)。

首先，安装 heroku-slugs CLI 插件

```
heroku plugins:install heroku-slugs 
```

，然后运行：

```
heroku slugs:download -a APP_NAME 
```

这会将您的 slug 下载并压缩到具有该`app`名称的目录中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T20:15:25.840

看起来您只是克隆了一个空存储库。

你可以自己试试。创建一个空存储库 ( `git init a`)，克隆该空存储库 ( `git clone a b`) 并尝试从中提取 ( `cd b; git pull`)。

这应该给出与您的情况完全相同的结果。

您确定您曾经将任何代码推送到该应用程序吗？真的是你心目中的应用吗？

您还可以尝试创建另一个新应用程序，推送提交，并检查是否能够将其克隆到新目录中。也许这会让你知道可能出了什么问题。

# java - JLabel 中的可点击词

> ID：13804894
> 
> 赞同：2
> 
> 时间：2012-12-10T16:22:40.207
> 
> 标签：java, swing, click, jlabel, mouselistener

我想在 Jlabel 文本中有可点击的单词，并且我想为每个单词注册一个 MouseListener 或获取点击的单词（否则）。下图展示了我想要的。这可能吗 ？！

![在此处输入图像描述](../Images/8adcddb1373b2864e8ebda6780bbd3a8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T16:29:41.123

不，您只能使整个 JLabel 可点击。但是您当然可以将多个 JLabel 并排放置，从而只使几个可点击（并且外观不同）。

`JEditorPane`如果适合您的需要，您还可以使用 HTML，例如在 a中，并通过 HTML 使某些单词可点击。我在这里找到了一些关于它的东西[，](http://www.coderanch.com/t/345547/GUI/java/Making-clickable-links-HTML-JLabel "这里")这就是你的样子：

```
JEditorPane jep = new JEditorPane("text/html", "Click <a href='pdf'>here</a> to display a PDF file. For more information click <a href='info'>here</a>.");
jep.setEditable(false);
jep.setOpaque(false);
jep.addHyperlinkListener(new HyperlinkListener() {
  public void hyperlinkUpdate(HyperlinkEvent hle) {
    if (HyperlinkEvent.EventType.ACTIVATED.equals(hle.getEventType())) {
      if (hle.getDescription().equalsIgnoreCase("pdf")) {
        // display PDF
      } else if (hle.getDescription().equalsIgnoreCase("info")) {
        // display information
      }
    }
  }
}); 
```

# c++ - 每种类型的多实例计数器

> ID：13804899
> 
> 赞同：4
> 
> 时间：2012-12-10T16:22:47.970
> 
> 标签：c++, templates

听起来很简单，但我想不出一个合适的解决方案：对于寄存器分配器，我需要一个从 0 开始计数并在每个分配步骤上递增的计数器。

好的，让我们把这个问题变成一个普遍的问题（不是特定于寄存器分配）：我需要一个可以有多个实例的类（这很重要！）并且它有一个模板化的成员函数，它返回一个整数，它的值在每次调用时都在计数。界面应如下所示：

```
class Counter
{
public:
  template<class T>
  int plus1() {
    // ?
  }
private:
  // what member ?
}; 
```

当一个人使用计数器时，它的功能应该是这样的：

```
int main() {
  Counter a,b;

  assert( a.plus1<int>() == 0);    
  assert( a.plus1<int>() == 1);    

  assert( b.plus1<float>() == 0);  
  assert( b.plus1<float>() == 1);  

  assert( a.plus1<float>() == 0);  
} 
```

显然，当放宽“多实例”要求时，可以使用`static int`局部变量来实现。但是我需要多个实例，我认为这使整个事情变得棘手。

*** 解决方案/编辑 ***

我认为@log0 给出了正确的解决方案。为了完整起见，完整的工作 C++11 代码（至少它似乎工作）：

```
class Counter
{
public:
  template<class T>
  int plus1() {
    return counters[ std::type_index( typeid(T) ) ]++;
  }
private:
  std::map<std::type_index, int> counters;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:35:15.683

您可以使用 type_index (c++11)

```
class Counter
{
public:
  template<class T>
  int plus1() {
    return map_[std::type_index(typeid(T))]++;
  }
private:
  std::map<std::type_index, int> map_;
}; 
```

`typeid`如果未在对多态对象的引用上调用，则在编译时推导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:37:47.570

这对我有用：

```
class Counter
{
    public:
        template<class T>
        int plus1()
        {
            static std::map<Counter*, int> s_counters;
            return s_counters[this]++;
        }
}; 
```

它取决于类型和对象。不是很优雅...

# android - 'touch' 工作和'mkdir' 会失败吗？

> ID：13804902
> 
> 赞同：0
> 
> 时间：2012-12-10T16:22:57.587
> 
> 标签：android, unix, mkdir, inode, terminal-emulator

在目录中是否存在可以工作但**会**失败的情况。`touch``mkdir`

我知道这两个调用都涉及写入`inode`父目录。因此，如果 touch 有效，它不是自动意味着 inode 是可写的，因此`mkdir` *不可能失败。*

这是**Android**（我只听说过一个报告，实际上并没有看到这种情况）并且命令是从**终端模拟器**运行的，在`/system`目录中（在请求之后`su`），但这不*应该*对IMO产生影响。

* * *

编辑：mkdir 失败了`"permission denied"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:14:14.507

我可以想到几种可能发生这种情况的方法：

1）如果你已经达到了一个目录下的最大子目录数（一般在32000左右），你就不能了`mkdir`，但是你可以去`touch`一个文件。

2）如果你的磁盘空间非常低，你将无法做到，`mkdir`因为它需要 4K，但你可以保存`touch`一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:35:00.563

也许您对父目录没有写权限？如果您拥有这些文件或对它们具有写权限，您仍然可以访问目录中的`touch` *现有*文件。（但是，对不存在的文件调用 touch 仍然会失败，因为该目录是只读的。）

`stat`父目录和`touch`ed 文件的输出是什么？

# jquery - Flexslider 2 显示延迟

> ID：13804905
> 
> 赞同：0
> 
> 时间：2012-12-10T16:23:05.110
> 
> 标签：jquery, flexslider, delayed-execution

我正在研究我自己的投资组合（现在还不完整），并且我遇到了 Flexslider 2 的问题（由[Woothemes 提供](http://flexslider.woothemes.com/)）。

请参阅此处：[http](http://www.gaelle-fernandez.fr/Folio2012/#Works) ://www.gaelle-fernandez.fr/Folio2012/#Works 如果您单击作品（任何图像），将打开一个带有滑块和说明的 slickbox。如您所见，滑块在第一次打开时不显示图像，您必须至少等待 10 秒。这很尴尬，因为我想毫不拖延地展示我的作品......

这是我的**index.php代码**

```
<head>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
   <link rel="stylesheet" type="text/css" href="Styles/flexslider.css" media="screen"/>
   <script src="Js/jquery.flexslider.js"> </script>
</head>
<body>
    <script charset="utf-8" type="text/javascript">
         $(window).load(function() {
             $('.flexslider').flexslider({
               animation: "slide",
               controlNav: true,
               animationLoop: true,
               slideshow: false,
             });
          }); 
   </script>  
    <div id="header">
        <!-- my header content -->
    </div>
    <ol id="main" class="curtains">
        <li id="Works" class="cover">
            <h2 style="padding-left:615px;">Derniers Travaux</h2>
            <div id="slickbox">
               <div id="sliderContent">
                   <div class="flexslider">
                        <ul class="slides">
                            <li>
                                <img src="Img/creas/crea.png" />
                            </li>
                            <!-- other images -->
                        </ul>
                    </div>
                </div>
                <h1>TITLE </h1>
                <p>Big Description Bacon Ipsum.</p>
                <div id="btn-close"><b>X</b></div>
             </div>
             <div id="worksContent">
                 <ul id="themes"> Themes LI</ul>
                 <ul id="creations" class="step">
                     <li class="step frmwk">
                          <div class="item">
                              <a href="#">
                                  <img src="Img/creas/crea.png" alt="title" title="" width="226" height="147"/>
                              </a>
                              <div class="caption">
                                 <h3>Framework Work</h3>
                                 <p>Little description</p>
                              </div>
                           </div>
                      </li>
<!-- Other content -->
</body> 
```

（或者你可以用萤火虫看到它）

我知道我的代码会毁了你的眼睛，但目前它更像是草稿而不是真正的网站。

那么，您能帮我知道**为什么我的图像在滑块中的显示会出现延迟**吗？

**提前感谢您的时间！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:46:54.207

尝试将所有幻灯片设置为`display:none`这样

```
#sliderContent .slides li {
    display: none;
} 
```

那为我修好了。我认为 FlexSlider 希望从一开始就隐藏所有幻灯片。您看到的延迟是因为它显示最后一张幻灯片，但在内部逐步遍历所有幻灯片，运行它们的动画和所有内容，但您只是看不到它，因为最后一张具有更高的 z-index 并且可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:30:40.383

我有同样烦人的问题。

添加这个

```
style="display: list-item" 
```

到第一个列表 (li) 内的子级`.slides`就可以了。

# javascript - 将鼠标悬停在父文本上的下拉菜单

> ID：13804909
> 
> 赞同：1
> 
> 时间：2012-12-10T16:23:22.670
> 
> 标签：javascript, jquery, html

以下是基本的下拉菜单，孩子出现在父鼠标悬停上。

```
<script type="text/javascript">
  $(document).ready(function () { 
    $('#nav li').hover(
      function () {
      //show its submenu
        $('ul', this).stop().slideDown(100);
      }, 
      function () {
      //hide its submenu
        $('ul', this).stop().slideUp(100); 
      }
    );
  });
</script>

<style type="text/css">
  #nav li {background-color:#CCC; }
</style>

<ul id="nav">
  <li><a href="#" class="selected">Parent A</a>
    <ul>
      <li><a href="#">Item a1</a></li>
      <li><a href="#" class="selected">Item a2</a></li>
      <li><a href="#">Item a3</a></li>
    </ul>
  </li>
  <li><a href="#">Parent B</a>
    <ul>
      <li><a href="#">Item b1</a></li>
      <li><a href="#">Item b2</a></li>
      <li><a href="#">Item b3</a></li>
      <li><a href="#">Item b4</a></li>
    </ul> 
  </li>
</ul> 
```

当前，当悬停在父框区域的任何位置（即也在文本之外，在父 div 的不可见区域上）时，会出现子项。

我希望孩子只出现在父链接的悬停上（仅在“href”文本上）。

我在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:27:58.077

尝试使用`a`元素作为目标`hover`而不是整个`li`，如下所示：

```
<script type="text/javascript">
  $(document).ready(function () { 
    $('#nav ul').hide();

    $('#nav li > a').hover(
      function () {
      //show its submenu
        $('ul', this.parentNode).stop().slideDown(100);
      }
    );
   $('#nav li').hover(null, 
      function (e) {
      //hide its submenu
        $('ul', this.parentNode).stop().slideUp(100); 
      }
   );
  });
</script> 
```

请参阅工作[**演示**](http://jsfiddle.net/7GGab/)。

# oracle - 在哪里可以看到来自 RAISE_APPLICATION_ERROR 的错误消息？

> ID：13804919
> 
> 赞同：1
> 
> 时间：2012-12-10T16:23:41.810
> 
> 标签：oracle, triggers

我在 Oracle 数据库中创建了一个触发器。此触发器将在插入过程之前执行，以终止所有重复数据。该过程由 C# 应用程序执行。

```
TRIGGER Kill_Duplicates

BEGIN

IF ( xxx ) THEN
  Raise_application_error(-22222, ' is duplicate!');
END IF;

END 
```

1.  在哪里阅读来自 Raise_application_error 的消息？例如，如果一些重复数据进入数据库，它会触发 Raise_application_error，在哪里读取这个 - “（-22222，'是重复的！'）”？
2.  有什么方法可以调试触发器吗？如果我的触发器不正确，例如语法问题、逻辑问题，那么如何读取触发器本身的异常消息？我怎么知道以及如何获取异常/错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:57:28.653

异常将被传递给执行导致触发器执行的 DML 语句的会话。

我怀疑您的错误消息表明您正在尝试使用触发器强制执行完整性。这通常是一件坏事。

# macos - Propertyregex：转义路径中的空格

> ID：13804923
> 
> 赞同：2
> 
> 时间：2012-12-10T16:24:02.313
> 
> 标签：macos, ant, ant-contrib

我在使用 ant-contrib 的 propertyregex 转义空格时遇到问题。以下适用于 Windows：

```
<propertyregex property="env.ESCAPED_JOB_NAME" override="true"
 input="${env.JOB_NAME}" regexp=" " replace="\\\\ "
 defaultValue="${env.JOB_NAME}" /> 
```

这给了我一个很好的逃生路径，所以

```
/SomeFolder/On my machine/ 
```

变成

```
/SomeFolder/On\ my\ machine/ 
```

但是，关键是我希望它可以在我们的 OSX 构建机器上工作，但它不能。沿线某处 \ 切换到 / 并且找不到文件夹。这是我在 Mac 上看到的输出：

```
/SomeFolder/On/ my/ machine/ 
```

这显然永远不会奏效。有任何想法吗？有没有其他方法可以逃离空间？

编辑：这看起来可能是 ANT 的复制命令的问题。我可以正确地回显路径，但副本将 \ 交换为 /。是否有一种对 osx 友好的方式来进行复制？

# function - 日期函数修剪 DB2 中的时间戳

> ID：13804929
> 
> 赞同：0
> 
> 时间：2012-12-10T16:24:23.650
> 
> 标签：function, date, datetime, db2

有没有办法去掉 DB2 日期函数中的时间戳？

有 DB2 select 语句，我从数据库中选择一个日期并将其保存到一个变量中。然后，我将该变量用作另一个 db2 select 的参数，方法是向其添加 30days，但我认为它与添加到末尾的时间戳不一致。

```
Select business_date From DB2INST1.BusDate Where key = 0 
```

该日期的数据库中没有时间戳，但在末尾添加了“12:00:00AM”

它将这个选择保存到一个变量中，我在这里的另一个选择中使用它

```
where expirdate > (DATE(@BusDate) + 30 DAYS) 
```

我收到此错误：

> {"ERROR [428F5] [IBM][DB2/AIX64] SQL0245N 例程 \"DATE\" 的调用不明确。位置 \"1\" 中的参数没有最佳匹配。"} System.Exception {IBM .Data.DB2.DB2Exception}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:28:40.057

选择营业日期作为 varchar/string

```
 Select varchar_format(business_date,'YYYY-MM-DD') 
```

然后执行此操作以稍后使用它，将其转换为日期，然后使用日期函数将 30 天添加到它：

```
 (DATE(to_date(@BusDate, 'YYYY-MM-DD') + 30 DAYS)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:45:42.883

尝试

```
where expirdate > DATE(@BusDate + 30 DAYS) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:02:44.153

第一个 SELECT 语句和第二个 SELECT 语句是同一个存储过程的一部分吗？您是否将结果日期存储在任何 .Net 变量中？如果您将其存储在 .Net DateTime 变量中，我的建议是`date addition`在 .Net 代码本身中执行操作。然后在传递到数据库之前从变量中删除时间部分。

也看看这个：[Datetime field overflow with IBM Data Server Client v9.7fp5](https://stackoverflow.com/questions/11549943/datetime-field-overflow-with-ibm-data-server-client-v9-7fp5/14215249#14215249)

如果两个 SELECT 语句都是存储过程的一部分，并且没有涉及到 .Net DateTime 变量，那么情况就不同了。

# javascript - Javascript：只允许字母和数字

> ID：13804936
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:24:51.120
> 
> 标签：javascript

```
 function f_check_NumOrLett(form){    //Only letters and numbers allowed  

        var text = form.bucketname.value;
        alert(text);

        var filter = /^[A-Za-z0-9]+$/;
        if (filter.test(text)) {
            form.submit(); 
        } else {
            form.bucketname.select();
            alert("Only Allow letters and numbers!");
        }
    } 
```

当我使用此功能时，alert(text) 可以工作，但它既不能提交表单也不能警告“只允许字母和数字”消息。似乎它没有执行 IF 条件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:28:35.523

如果您对支持*新*浏览器并且没有*legacy*很酷，您可以使用可用的 new`pattern`属性`input elements`（我认为您在这里使用）

例子：

```
<input type="text" pattern="[A-Za-z0-9]"/> 
```

该`pattern`属性采用正常的*正则表达式语法*。此外，您可以添加`required`(boolean) 属性，该属性指示*表单提交*仅在满足模式时才起作用。

```
<input type="text" pattern="[A-Za-z0-9]" required/> 
```

# c# - 在 C# 中使用嵌入式资源图标作为应用程序图标

> ID：13804937
> 
> 赞同：1
> 
> 时间：2012-12-10T16:24:53.833
> 
> 标签：c#, visual-studio-2010, resources, icons

我试图找到一种方法来指定我的 C# 应用程序以使用嵌入式资源（图标）作为我的应用程序图标（为任务栏、任务切换等显示的图标）。然而，由于我已经在资源中嵌入了我的图标，我可以设法在我的表单中使用它，但还不能在我的应用程序中使用。

事实上，如果有人能先告诉我我可以在哪里手动设置这个（哪个文件）而不是使用 VS2010 GUI 来指定它，那将是一个很好的开始！

然而，我的图标可以通过以下两种方式使用： `{{Namespace}}.Properties.Resources.c_name.ico`和 in `{{Namespace}}.Refs.c_name.ico`（作为`public static class`类库内部的属性）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T16:50:52.670

Windows 是一个非托管操作系统，它不知道有关托管资源的 bean。它可以显示的唯一图标是作为*非托管*资源嵌入的图标。您可以在 Visual Studio 中查看非托管资源的外观。使用 File + Open + File 并选择一个 .NET exe 文件（在 Express 中不起作用）。一个 .NET 程序应该有三个，一个图标，一个声明程序与 UAC 兼容的清单和一个版本资源。这一切都是由编译器自动完成的，例如，请注意 Version 资源属性如何匹配您在 AssemblyInfo.cs 中设置的属性

IDE 使设置程序图标变得简单，您可以使用 Project + Properties、Application 选项卡、Icon setting。只需选择与嵌入为托管资源相同的 .ico 文件即可。忘记尝试分享，它不能按设计工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T21:35:33.440

只需设置 Icon=yourNamespace.Properties.Resources.yourEmbeddedIconName;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T08:16:34.653

```
System.Drawing.Icon.FromHandle(Properties.Resources.EliminarNota.GetHicon()); 
```

# java - Java Web Start 应用程序可以在浏览器窗口中运行吗？

> ID：13804939
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:25:00.280
> 
> 标签：java, browser, java-web-start

这是一个问题：JWS 应用程序可以在网页上占用 requin 还是代表整个网页和/或访问浏览器状态参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:27:28.240

Java Web Start 应用程序独立于浏览器运行。如果您希望 Java 应用程序与托管浏览器交互，则必须将其设为小程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:39:44.587

[请参阅小程序信息](https://stackoverflow.com/tags/applet/info)中的最后一个链接。[页](https://stackoverflow.com/tags/applet/info)。

> *   [下一代 Java 插件技术中的 JNLP 支持（在**Java SE 6 更新 10**中引入）](http://www.oracle.com/technetwork/java/javase/jnlp-136707.html)进一步详细介绍了小程序的新功能。

我突出显示了该版本，因为它是最近的一项功能，并且我得到的印象是您想要支持较旧的浏览器/JRE 组合。从你之前的问题。

该页面展开..

> 下一代 Java 插件技术（以下简称“Java 插件”）支持直接从 JNLP 文件启动小程序。以前，只有 Java Web Start 使用 JNLP 文件来启动 Java 应用程序。现在可以使用相同的元描述符来描述 Java 小程序。

另请注意，使用 JWS 启动嵌入式小程序并不能解决将富客户端 GUI 嵌入到较轻的 HTML GUI 中固有的任何问题。

1.  HTML 元素和小程序或小程序之间的焦点问题。Sun 从来没有费心去尝试定义应该发生什么，这导致小程序或 HTML 获得焦点，仅此而已（就键盘而言）。
2.  然后是小程序的 PLAF 问题，它模仿但从未完全匹配用于 HTML 表单的元素。特别是如果他们有风格，这让我......
3.  小程序不响应 CSS！对于小程序开发人员来说，这可能是直观的，但对于站点设计人员来说，挫败感永无止境。
4.  通常，至少有一个浏览器版本无法正确加载最简单的小程序。在所有这些类型的错误中，我“最喜欢”的是一个 FF 版本，如果用户“向上”滚动，它会重新加载小程序。我可以继续，继续，继续……

# java - hibernate "where" 查询仅适用于 id 字段

> ID：13804940
> 
> 赞同：3
> 
> 时间：2012-12-10T16:25:01.190
> 
> 标签：java, sql, hibernate

我的 Hibernate 查询有问题，如下所示：

```
List persons = getList("FROM creator.models.Person p WHERE p.lastName="+userName); 
```

（该`getList(String queryString)`方法只是使用会话工厂执行查询。）

这是我的个人课程：

```
@Entity
@Table(name="persons")
public class Person{
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name = "id")
    private Long        id;

    @Column(name="first_name", nullable=false, updatable=true)
    private String firstName;

    @Column(name="last_name", nullable=false, updatable=true)
    private String lastName;
    /// etc 
```

这是表格：

```
CREATE TABLE persons(
    id INTEGER NOT NULL AUTO_INCREMENT,
    first_name CHAR(50),
    last_name CHAR(50),
    abbreviation CHAR(4),

    PRIMARY KEY (id)
); 
```

搜索名为 TestName 的人时，我收到一条异常消息：

```
org.hibernate.exception.SQLGrammarException: Unknown column 'TestName' in 'where clause'
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
//etc 
```

Hibernate 创建的查询如下所示：

```
INFO: HHH000397: Using ASTQueryTranslatorFactory
Hibernate: select person0_.id as id8_, person0_.abbreviation as abbrevia2_8_, person0_.first_name as first3_8_, person0_.last_name as last4_8_ from persons person0_ where person0_.last_name=TestName
Dec 10, 2012 5:14:26 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions 
```

顺便说一句，搜索 id ( `...`WHERE p.id `="3"`) 工作正常！

我希望有人知道出了什么问题，因为对我来说查询看起来是正确的，但我不知道为什么 lastName 突然被视为列名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:27:37.967

您需要将 userName 放在引号中：

```
"FROM creator.models.Person p WHERE p.lastName='"+userName+"'"; 
```

或者（更好）使用参数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T16:30:44.510

将您的 hql 替换为：

```
 Query query = session.createQuery("from creator.models.Person p where p.lastName = ?")
       .setParameter(0, userName);
    List persons = query.list(); 
```

这样你也可以防止sql注入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:27:53.490

你需要用单引号包裹你的参数：

```
List persons = getList("FROM creator.models.Person p WHERE p.lastName='"+userName+"'"); 
```

但使用参数化查询要好得多：

```
 String hql = "FROM creator.models.Person p WHERE p.lastName= :userName";
        Query query = session.createQuery(hql);
        query.setString("userName",userName);
        List results = query.list(); 
```

# javascript - auth.authResponseChange - 状态改变时如何触发

> ID：13804941
> 
> 赞同：1
> 
> 时间：2012-12-10T16:25:00.487
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在编写一个脚本来检查Facebook用户是否连接到我们的站点，并且该脚本在头文件中，因此当我们调用另一个页面时会重复调用它，我需要的是如何使该脚本仅在状态下触发条件变了，请问怎么办？我使用的脚本如下：-

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
  //Attaches an handler to an event
}); 
```

'auth.authResponseChange' - 当 authResponse 改变时触发

我认为它无法正常工作，即使用户状态保持不变，当我们刷新页面时，此命令仍会触发。谁能帮我解决这个问题？谢谢大家，祝你好梦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:27:31.043

FB 对象（您调用 FB.login()、FB.api() 等的对象）不在页面加载之间存在。在每次页面加载时都会重新创建它，并且在每次页面加载期间的某个时间点，它会第一次收到 authResponse。从 FB 对象的 POV 来看，这是从未知到已知的变化，因此它会触发 change 事件。

# ruby-on-rails - Rails 生成 development_structure.sql - 转储顺序

> ID：13804944
> 
> 赞同：2
> 
> 时间：2012-12-10T16:25:04.930
> 
> 标签：ruby-on-rails, activerecord, oracle11g

我正在使用 Rails 3.2.8 并且有

```
config.active_record.schema_format = :sql 
```

在我的 config/application.rb 中。

在 Oracle 11g 数据库中，我定义了一个表，其中包含依赖于用户定义函数的虚拟列：

```
CREATE TABLE BAR (
  ID NUMBER(19,0) NOT NULL,
  STATUS NUMBER(19, 0) DEFAULT 1,
  CALCULATED_STATUS NUMBER(19,0) GENERATED ALWAYS AS (MY_FUNCTION(STATUS)) VIRTUAL) 
```

当 Rake 执行 db:test:clone_structure (Tasks: TOP => default => spec => db:test:clone_structure) 时，我正在打：

OCIError: ORA-00904: "FOO"."MY_FUNCTION": 无效标识符: CREATE TABLE "BAR" (...

我认为正在发生的事情是 db:structure:dump 在函数之前导出表，因此在 development_structure.sql 中，CREATE FUNCTION MY_FUNCTION 出现在 CREATE TABLE BAR 语句之后。

我必须进去monkeypatch db:structure:dump 是如何工作的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:01:38.457

我最终在 github.com/rsim/oracle-enhanced 中找到了适用的源代码，并在我放入 config/initializers 的文件中覆盖了 structure_dump 和 structure_dump_db_stored_code 方法。

# http - 是否有一套标准的 HTTP 500.xx 代码？

> ID：13804955
> 
> 赞同：1
> 
> 时间：2012-12-10T16:25:55.113
> 
> 标签：http, rest, web

我已经看到服务器返回 500 个内部服务器错误代码，并在十进制分隔的子代码中包含额外的“详细信息”，例如 500.19。

这个子代码是标准化的还是我可以自由使用？如何防止在 IIS 或 ASP.NET 中崩溃到供应商代码？

卢克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:45:16.050

> 这个子代码是标准化的还是我可以自由使用？

无法使用它，引用[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-6.1.1)：

> Status-Code 元素是一个 3 位整数

MSDN 说[`HttpResponse.SubStatusCode`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.substatuscode.aspx)：

> 无论是否配置**了跟踪，代码都不会作为对请求的最终响应的一部分发送**

因此，它仅用于日志记录和故障排除，不发送给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:28:41.767

有一个*Microsoft*标准列表。请参阅 - [http://support.microsoft.com/kb/943891](http://support.microsoft.com/kb/943891)

> IIS 7.0 定义了以下 HTTP 状态代码，指示 500 错误的更具体原因：
> 
> *   500.0 - 发生模块或 ISAPI 错误。
>     *   500.11 - Web 服务器上的应用程序正在关闭。
>     *   500.12 - 应用程序正忙于在 Web 服务器上重新启动。
>     *   500.13 - Web 服务器太忙。
>     *   500.15 - 不允许直接请求 Global.asax。
>     *   500.19 - 配置数据无效。
>     *   500.21 - 模块无法识别。
>     *   500.22 - ASP.NET httpModules 配置不适用于托管管道模式。
>     *   500.23 - ASP.NET httpHandlers 配置不适用于托管管道模式。
>     *   500.24 - ASP.NET 模拟配置不适用于托管管道模式。
>     *   500.50 - 在 RQ_BEGIN_REQUEST 通知处理期间发生重写错误。发生配置或入站规则执行错误。
>     *   注意 这里是为入站和出站规则读取分布式规则配置的地方。
>     *   500.51 - 在 GL_PRE_BEGIN_REQUEST 通知处理期间发生重写错误。发生全局配置或全局规则执行错误。
>     *   注意 这里是读取全局规则配置的地方。
>     *   500.52 - 在 RQ_SEND_RESPONSE 通知处理期间发生重写错误。发生出站规则执行。
>     *   500.53 - 在 RQ_RELEASE_REQUEST_STATE 通知处理期间发生重写错误。发生出站规则执行错误。该规则配置为在更新输出用户缓存之前执行。
>     *   500.100 - 内部 ASP 错误。

# hibernate - 严重：org.hibernate.exception.GenericJDBCException：索引处缺少 IN 或 OUT 参数:: 1

> ID：13804956
> 
> 赞同：2
> 
> 时间：2012-12-10T16:25:57.333
> 
> 标签：hibernate, jpa

我有一个返回 sys_refcursor 的 Oracle 函数，它是

```
CREATE OR REPLACE FUNCTION SCOTT.getemployees
   RETURN SYS_REFCURSOR
AS
   o_cursor   SYS_REFCURSOR;
BEGIN
   OPEN o_cursor FOR
      SELECT EMPNO,
             ENAME,
             JOB,
             MGR,
             HIREDATE,
             SAL,
             COMM,
             DEPTNO
        FROM emp;   
   RETURN o_cursor;
END;
/ 
```

在我的实体类中，我声明为

```
@Entity
    @javax.persistence.NamedNativeQuery(name = "getEmp", 
    query = "{ ? = call getemployees }", resultClass = Employees.class, hints = {
    @javax.persistence.QueryHint(name = "org.hibernate.callable", value = "true") })
    @Table(name = "EMPLOYEES")
    public class Employees { 
```

在 DAO 我有

```
@Inject
    private SessionFactory sessionFactory;

    @Override
    public List<Employees> getEmployees() {

        List query = new ArrayList<Employees>();
         try{
         query = sessionFactory.getCurrentSession()
                .getNamedQuery("getEmp").list();
         }
         catch(Exception e){
             System.out.println("exception "+e.getMessage());
             e.printStackTrace();
         }
        return query;
    } 
```

当我跑步时出现异常，这可能是什么原因？

> 信息：休眠：{？= 调用 getemployees } 严重：org.hibernate.exception.GenericJDBCException：在 org.hibernate.engine 的 org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54) 处的索引处缺少 IN 或 OUT 参数:: 1。 jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) 在 org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler。 continueInvocation(AbstractStatementProxyHandler.java:129) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:49:43.310

我已经设法解决了这个问题。

定义为数字的数据库表列`int`在 Entity 类中声明。我已将这些更改为`Integer`并且问题得到了解决。

```
private Integer deptNo;

public Integer getDeptNo() {
        return deptNo;
    }

    public void setDeptNo(Integer deptNo) {
        this.deptNo = deptNo;
    } 
```

# java - EJB2 - $Proxy0 无法转换为 com.TestEJB.TestEJBInterfaceRemote 错误

> ID：13804962
> 
> 赞同：0
> 
> 时间：2012-12-10T16:26:13.117
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0, ejb-2.x

我正在尝试构建一个简单的 Hello world 类型的 EJB 2.1 应用程序。这个应用程序的预期运行时应该是 Jboss 5.1.0。这是我写的代码。

EJB 配置文件：

ejb/TestEJBInterfaceBean com.TestEJB.TestEJBInterfaceHome com.TestEJB.TestEJBInterfaceRemote com.TestEJB.TestEJBInterfaceBean 无状态容器

主页界面：

```
import javax.ejb.EJBHome;

public interface TestEJBInterfaceHome extends EJBHome {
    public TestEJBInterfaceRemote create() throws java.rmi.RemoteException,
            javax.ejb.CreateException;
}

Remote Interface:

import java.rmi.RemoteException;
import javax.ejb.EJBObject;

public interface TestEJBInterfaceRemote extends EJBObject { 

    public String ping(String version) throws RemoteException;
} 
```

豆类：

```
import java.rmi.RemoteException;
import java.util.Date;

import org.jboss.logging.Logger;

public class TestEJBIInterfaceBean extends BaseSessionBean implements TestEJBIInterfaceRemote{

    private static final long serialVersionUID = 1L;

    final Logger log = Logger.getLogger(TestEJBIInterfaceBean.class);   

    public String ping(String arg0) throws RemoteException {

        String response = this.getClass().getSimpleName() + " pinged @ " + new Date().getTime();

        log.info(response);
        return response;
    }

    public void ejbActivate() throws EJBException, RemoteException {
        // TODO Auto-generated method stub

    }

    public void ejbPassivate() throws EJBException, RemoteException {
        // TODO Auto-generated method stub

    }

    public void ejbRemove() throws EJBException, RemoteException {
        // TODO Auto-generated method stub

    }

    public void setSessionContext(SessionContext arg0) throws EJBException,
            RemoteException {
        // TODO Auto-generated method stub

    }

    public EJBHome getEJBHome() throws RemoteException {
        // TODO Auto-generated method stub
        return null;
    }

    public Handle getHandle() throws RemoteException {
        // TODO Auto-generated method stub
        return null;
    }

    public Object getPrimaryKey() throws RemoteException {
        // TODO Auto-generated method stub
        return null;
    }

    public boolean isIdentical(EJBObject arg0) throws RemoteException {
        // TODO Auto-generated method stub
        return false;
    }

    public void remove() throws RemoteException, RemoveException {
        // TODO Auto-generated method stub

    }

} 
```

测试客户端：

```
public class TestEJBInterfaceClientTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        try {
            Context ctx = new InitialContext();

            TestEJBInterfaceRemote obj = (TestEJBInterfaceRemote)ctx.lookup("ejb/TestEJBInterfaceBean");

            System.out.println(obj.ping("12345"));

        } catch (NamingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
} 
```

当我运行客户端时，我收到以下错误：

```
Exception in thread "main" java.lang.ClassCastException: $Proxy0 cannot be cast to com.TestEJB.TestEJBInterfaceRemote
    at TestEJBInterfaceClientTest.main(TestEJBInterfaceClientTest.java:21) 
```

该错误似乎表明演员表是错误的，但我怀疑演员表与错误无关。（我试图转换为 TestEJBInterfaceHome 但我得到了同样的错误）。我的怀疑实际上是在应用程序的版本中。

问题

*   Jboss 是否有可能将其视为 EJB3 应用程序？查看配置文件，我没有指定这是一个 EJB2.1，所以这可能会导致问题吗？
*   有没有办法找出`ctx.lookup`调用返回的类型？我试过了`getClass().getName`，`getClass().getCanonicalName()`我得到的只是名字之类的`$proxy0, $proxy20`。
*   我错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:26:43.470

EJB-3.0 之前的查找结果是主界面，因此请尝试转换为`TestEJBInterfaceHome`。请注意，为了可移植性，您需要在转换为目标接口之前对 ctx.lookup 的返回值使用[PortableRemoteObject.narrow](http://docs.oracle.com/javase/7/docs/api/javax/rmi/PortableRemoteObject.html#narrow%28java.lang.Object,%20java.lang.Class%29)。

实际类型是代理类，因此`getClass().getName()`返回正确的东西。要确定类实现了哪些接口，请使用`getClass().getInterfaces()`.

# fonts - lua - 以粗体文本打印

> ID：13804963
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:26:16.783
> 
> 标签：fonts, lua

在这个 lua 函数中，我想以粗体打印设备和温度值。由于报告模型是连续的，因此不确定这将如何工作。

```
function getmail(index)
if ((last_mail == nil) or (now - last_mail > set_timer)) then 

report_model = [[
Device: %s
Device Location: %s
___________________________________

Current Temperature: %d F
Temperature Limit: (%d-%d F)
Current Humidity Level: %d %%
Humidity Limit: (%d-%d %%)

**Time Recorded at: %s**]]

d = devicetable[index]

report_content = report_model:format(device_name, description,
      temperature, t_under_limit, t_over_limit,
      humidity, h_under_limit, h_over_limit,
      os.date()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:52:22.533

Lua 对字体或显示一无所知。它的 IO 库，就像 C 的一样，只知道字节/字符流。

> 报告模型是 concat

这意味着什么？输出连接到文本文件？纯文本文件不支持将单个单词加粗。如果您的输出是 HTML/RTF/等。-- 一些支持标记的格式 -- 你可以选择。如果您的输出是终端，则某些平台上的某些输出支持[转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)，因此您也可以在那里选择。

底线，这不是 Lua 问题。您需要根据您的平台和输出机制重新构建问题。

# bash - 如何发球到标准错误？

> ID：13804965
> 
> 赞同：57
> 
> 时间：2012-12-10T16:26:22.900
> 
> 标签：bash, stderr, tee

我想拆分`stdout`以便将其同时打印到`stdout`和`stderr`。这听起来像是一份工作，`tee`但语法却在逃避我——

```
./script.sh | tee stderr 
```

当然，`stderr`这里究竟应该怎么称呼呢？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-12-12T20:51:28.517

我发现在交互式和非交互式 shell 中都适用的唯一跨平台方法是：

```
command | tee >(cat 1>&2) 
```

tee 的参数是文件或文件句柄。使用[进程替换](http://en.wikipedia.org/wiki/Process_substitution)，我们将输出发送到进程。在过程 =cat= 中，我们将 stdout 重定向到 stderr。shell (bash/ksh) 负责设置 1 和 2 文件描述符。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-10T16:32:53.327

```
./script.sh | tee /dev/fd/2 
```

请注意，这取决于操作系统支持，而不是 tee 中的任何内置功能，因此不是通用的（但可以在 MacOS、Linux、Solaris、FreeBSD 等其他平台上运行）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-10T17:56:46.590

```
./script.sh 2>&1 >/dev/null | tee stderr.out 
```

这会将 STDERR 打开到 STDOUT，然后处理 STDOUT。

# php - 在 Win7 上从 PHP 运行 Photoshop Droplet

> ID：13804966
> 
> 赞同：3
> 
> 时间：2012-12-10T16:26:25.067
> 
> 标签：php, photoshop, uac, photoshop-script

我正在尝试为一个商业项目组合一个概念验证，该项目从网页上传图像文件并输出使用各种 Photoshop 过滤器和第 3 方商业过滤器转换的图像。因为它是概念验证，并且仅在内部 IP 上可用，所以我并不特别担心安全性。在这一点上，我只想证明这在理论上是可能的。

问题是我可以使 Photoshop Droplet 完美运行，就像使用完整路径从 CMD 提示符执行...但是当我在 PHP 中使用完全相同的命令行调用**exec**时（通过使用 echo 进行调试验证）， droplet exe 运行（由 Sysinternals ProcessExplorer 验证），但 Photoshop 无法启动，或者如果它已经在运行（即使作为管理员），它也无法执行 droplet 中的操作。

我试过了：

*   在测试 PC 上禁用 UAC 控制 (Win7)
*   将所有用户的所有相关进程设置为“以管理员身份运行”（mydroplet.exe、photoshop.exe、httpd.exe、php.exe）
*   提升 httpd.exe 的权限
*   php.ini 中没有“安全模式”
*   将液滴执行包装到一个 BAT 文件中，以便从 PHP exec 调用

注意：我试图实现的特定图像处理对于 ImageMagik 或类似的东西来说太复杂了（请不要对此提出任何建议），并且第 3 方过滤器仅在 Windows 上可用。对于我的测试，我没有使用这个 3rd 方过滤器。我只是想让上面的内容首先使用简单的内置 Photoshop 过滤器。我正在使用 PS CS3。

简而言之...**如何从 PHP 执行 Photoshop droplet（在 Win7 上）？**

[ 我在整个过程中都使用绝对路径（与 DOS 兼容），如果我在 CMD 提示符下手动运行传递给 exec 的字符串，它会按预期工作，所以我强烈怀疑权限问题（我在让液滴在外部工作时遇到了类似的问题PHP，我使用[http://helpx.adobe.com/photoshop/kb/troubleshoot-photoshop-droplets-windows.html](http://helpx.adobe.com/photoshop/kb/troubleshoot-photoshop-droplets-windows.html)中的说明解决了这个问题）。服务器安全不是问题（在这个阶段），所以理想情况下，我想将所有内容设置为拥有**所有**权限（就像在过去更容易的 win95 天一样！;-)——它只是内部 LAN 上的一个测试盒！！！我可以在演示后将其关闭。至少在 Linux 上，我可以 chmod -R 777 /* -- 稍后重新格式化硬盘 --- Windows7 上的等价物是什么？（即把一切都给大家？）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:31:17.537

I'd say you've changed everything except the "Allow service to interact with desktop" checkbox for the Apache service.

# bash - Bash：弹出文件中的行

> ID：13804967
> 
> 赞同：6
> 
> 时间：2012-12-10T16:26:36.013
> 
> 标签：bash, line

我需要用 bash 读取文件并删除请求行吗？一些类似于弹出/推送功能。

我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T16:44:34.287

## 对！`sed`会做得很好！

### 介绍

正如[@Lee Netherton](https://stackoverflow.com/users/341459/lee-netherton)的评论所正确指出的那样，在运行[sed](/questions/tagged/sed "显示标记为“sed”的问题")进行*就地*编辑时，**强烈**建议使用备份！（当然，一旦完成，您的脚本必须`sed`在继续之前测试命令是否成功......）

### 测试用例

所以让我们快速构建一个测试文件：

```
printf "Line #%2d\n" {1..7} >file 
```

### 对于*弹出*（从堆栈顶部）：

作为*真正的 push/pop*，以下命令返回所需的行**并将**它们从命名文件中删除。

```
sed -e \$$'{w/dev/stdout\n;d}' -i~ file
Line # 7 
```

然后

```
cat file
Line # 1
Line # 2
Line # 3
Line # 4
Line # 5
Line # 6 
```

### 对于*移位*（从堆栈底部）：

```
sed -e 1$'{w/dev/stdout\n;d}' -i~ file
Line # 1 
```

### 用于*拼接*（堆栈中的随机访问）

（删除第**n**行）

```
lineNum=3
sed -e $lineNum$'{w/dev/stdout\n;d}' -i~ file
Line # 4 
```

### *推送*（到堆栈顶部）：

```
printf -v val "Line #%2d" 28
echo "$val" >>file 
```

注意：这可以通过使用来完成`sed`：

```
sed -e "\$a$val" -i~ file 
```

（其中`$a`不是变量，而是*sed*位置`$`，这意味着*在文件末尾*和`a`命令，这意味着*在当前行之后追加*）

### 对于*unshift*（到堆栈底部）：

```
printf -v val "Line #%2d" 62
sed -e 1i"$val" -i~ file 
```

然后终于

```
cat file
Line #62
Line # 2
Line # 3
Line # 5
Line # 6
Line #28 
```

### 进入变量

当然，目标是将它们检索到变量中。根据您使用的是[bash](/questions/tagged/bash "显示标记为“bash”的问题")还是其他*POSIX* [shell](/questions/tagged/shell "显示标记为“外壳”的问题")，您可以使用以下之一：

```
lastline=`sed -e \\\$$'{w/dev/stdout\n;d}' -i~ file`
echo $lastline 
Line #28

lastline=$(sed -e \$$'{w/dev/stdout\n;d}' -i~ file)
echo $lastline 
Line # 6

read lastline < <(sed -e \$$'{w/dev/stdout\n;d}' -i~ file)
echo $lastline 
Line # 5 
```

## 为 2018 年新增

**新年快乐！**

### 简单的 bash 函数示例：

```
fpop() { local v n=$'\n';read -r v < <(
    sed -e $'${w/dev/stdout\n;d}' -i~ "$1")
    printf ${2+-v} $2 "%s${n[${2+2}]}" "$v"
}
fshift() { local v n=$'\n';read -r v < <(
    sed -e $'1{w/dev/stdout\n;d}' -i~ "$1")
    printf ${2+-v} $2 "%s${n[${2+2}]}" "$v"
}
fsplice() {
    [ "$2" ] || return ; local v n=$'\n';read -r v < <(
    sed -e $2$'{w/dev/stdout\n;d}' -i~ "$1");
    printf ${3+-v} $3 "%s${n[${3+3}]}" "$v"
}
fpush() { sed -e "\$a$2" -i~ "$1"; }
funshift() { sed -e "1i$2" -i~ "$1"; } 
```

注意：Line是我在函数中经常使用`printf ${2+-v} $2 "%s${n[${2+2}]}" "$v"`的一种*技巧。*如果作为第二个参数提交，此行将填充一个变量。否则，此行将添加*换行符*并打印到*`STDOUT`*.

小运行示例：

```
printf "Line #%2d\n" {3..12} >file   

fpop file
Line #12
fpop file myvar
echo $myvar
Line #11

fshift file
Line # 3
fshift file myvar
echo $myvar
Line # 4

fsplice file 3 
Line # 7
fsplice file 3 myvar
echo $myvar
Line # 8

funshift file "Line # 192"
fpush file "Line # 42"

cat file
Line # 192
Line # 5
Line # 6
Line # 9
Line #10
Line # 42

declare -p myvar
declare -- myvar="Line # 8" 
```

（变量*myvar*不包含*换行符*。）

而且（我无法抗拒！;-)：

```
fpop file myvar
echo $((9? ${myvar#*#} :-b))
42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-14T13:09:59.490

sed 是面向流的，你可以使用适合编辑文件的 ed。

```
#/usr/bin/sh

ed -s filename <<EDSCRIPT
1p
d
wq
EDSCRIPT 
```

1.  将第一行打印到标准输出。
2.  删除它。
3.  保存并退出。

如果您想做其他事情， `1,3`则适用于第 1 行至第 3 `$`行。适用于最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:33:19.020

您可以使用`sed`删除与给定模式匹配的特定行号或行：

```
$ cat file
line 1
line 2 
line 3 
line 4
line 5

$ sed -i '3d' file             # Delete the 3rd line
line 1
line 2 
line 4
line 5    

$ sed -i '/^line 4$/d' file    # Delete the line that matches the pattern
line 1
line 2 
line 3 
line 5

$ sed '$d' file                # Delete the last line in the file
line 1
line 2 
line 3 
line 4 
```

但是，您将无法`push`返回这些行。

# c# - 使用正则表达式在 Visual Studio 搜索框中搜索电子邮件地址

> ID：13804969
> 
> 赞同：3
> 
> 时间：2012-12-10T16:26:40.760
> 
> 标签：c#, .net, regex, visual-studio-2010, visual-studio

Visual Studio 中的正则表达式搜索非常有限，我需要一个正则表达式来在一个非常大的解决方案中搜索电子邮件地址。

[这篇文章](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.100%29.aspx)解释了这个问题

> 您可以在“查找和替换”窗口的“查找内容”和“替换为”字段中使用一**组特定的正则表达式**

*** 编辑 *** 我需要 VS 2010 SP1 但不是 VS 2012

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T16:47:45.093

打开 Visual Studio 查找对话框并尝试此选项：我已经这样做了。

电子邮件正则表达式：`\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b`

您可以指定您的限制。

![在此处输入图像描述](../Images/ff1042f9df25e126f91862e3a7788511.png)

# java - 未引入 Maven 瞬态依赖

> ID：13804971
> 
> 赞同：1
> 
> 时间：2012-12-10T16:27:13.607
> 
> 标签：java, maven, dependencies, dependency-management

将分类器标记指定为配置文件一部分的临时依赖项是否默认不引入？

更具体地说，我有一个项目 A ，它定义了如下依赖项：

```
<dependency>
     <groupId>com.dependency1</groupId>
     <artifactId>dependency1</artifactId>
     <version>12</version>
     <classifier>${os.classifier}</classifier>
</dependency> 
```

和一个指定的配置文件`${os.classifier}`

```
<profiles>
    <profile>
        <id>x86</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <os.classifier>x86</os.classifier>
        </properties>
    </profile>
    <profile>
        <id>x86-64</id>
        <properties>
            <os.classifier>x86-64</os.classifier>
        </properties>
    </profile>
</profiles> 
```

当我从项目 B 依赖项目 A 时，`com.dependency1`没有引入。我缺少什么或者这是默认行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:59:38.970

实际上引入了传递依赖。我的设置没有任何问题。我所要做的就是强制从项目 B 重新导入依赖项。

# jquery - 使用 :contains 查找特定的 td 元素

> ID：13804973
> 
> 赞同：0
> 
> 时间：2012-12-10T16:27:18.203
> 
> 标签：jquery

我有以下呈现的html：

```
<table width="420" cellspacing="0" cellpadding="3" border="0">
<tbody>
<tr><td>....</td>
</tr>
<tr>
<td>Total Amount Due:</td>
<td>$168.88</td>
</tr> 
```

我的最终目标是获取并更改总金额后显示的值。我首先尝试选择包含文本“应付总额：”的元素。

这是我尝试这样做的代码：

```
var tdElement = $("td:contains('Total Amount Due:')");
alert($(tdElement).text()); 
```

我曾尝试在 Firebug 的命令行中稍微更改语法，但当我这样做时，我总是在第一行收到错误。使用这样的代码，直到第二行出现 TypeError: $(tdElement) 为空时，我才会收到错误消息。

此外，不确定这是否会影响任何内容，但该表实际上位于其他两个表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:29:48.940

> 我得到一个 TypeError: $(tdElement) is null。

即使它不匹配任何东西，jQuery 也会返回一个有效的 jQuery 对象（不包含匹配的元素）， not `null`，所以听起来像：

*   您没有加载 jQuery。检查 JavaScript 控制台以查看您是否有加载错误并解决您发现的任何错误。

*   或者你确实已经加载了它，但你还加载了另一个库，如 Prototype 或 MooTools，它们窃取了`$`符号。如果是这样，您有三个选择（至少）：

    1.  尝试停止使用其他库，并将其从页面中删除。

    2.  使用`jQuery`而不是在`$`任何你想使用 jQuery 的地方。

    3.  或者将您的 jQuery 代码放在一个可以用来隐藏`$`符号的函数中，如下所示：

        ```
        // If you have another library loaded, out here $ may not === jQuery
        (function($) {
            // Here, your code can happily assume $ === jQuery...
        })(jQuery); 
        ```

一旦你整理出来：

`:contains`如果页面大小不限，我强烈建议不要使用。相反，如果该元素在页面上是唯一的，请使用 an`id`并使用`$("#theid")`. 如果没有，请使用一个类，并使用`$(".theclass").find(":contains('Total Amount')")`.

最后：你正在使用

```
var tdElement = $("td:contains('Total Amount Due:')"); 
```

但后来也

```
alert($(tdElement).text()); 
```

无需`$`第二次调用，只需使用第一个 jQuery 实例：

```
alert(tdElement.text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:42:38.897

嘿，伙计，给那个包含金额的 td，例如每节课 $320.00，或者如果你不想上课，你需要一个假的。

您尚未指定要更改其他值的事件的其他事情，例如单击按钮更改值我已经使用文档就绪功能完成了它，您可以向其中添加任何事件以及数量:)

案例 1) 如果你可以上课

```
$(document).ready( function() {
    $(".amount").text("any value you want");
});

<table width="420" cellspacing="0" cellpadding="3" border="0">
    <tbody>
        <tr>
            <td>....</td>
        </tr>
        <tr>
            <td>Total Amount Due:</td>
            <td class="amount">$168.88</td>
        </tr> 
```

案例 2) 你不能添加类

我注意到`td`您要更改数量的是 tr 的子代，它是 tr 的最后一个`tr`。`table`所以，我们可以使用 PSEUDO。

```
$(document).ready( function() {
    $("table tbody tr:last td:last").text("any value you want");
});

<table width="420" cellspacing="0" cellpadding="3" border="0">
    <tbody>
        <tr><td>....</td></tr>
        <tr>
            <td>Total Amount Due:</td>
            <td>$168.88</td>
        </tr> 
```

CASE 3）如果`TR`表的IF是第二，第三，第四......在它是第三的情况下

```
$(document).ready( function() {
    $("table tbody tr:nth-child(3) td:last").text("any value you want");
});

<table width="420" cellspacing="0" cellpadding="3" border="0">
    <tbody>
        <tr><td>....</td></tr>
        <tr>
            <td>Total Amount Due:</td>
            <td>$168.88</td>
        </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:29:57.697

```
$('td', 'table').filter(function() {
    return $(this).text().toLowerCase().indexOf('amount due') != -1;
}).next('td').text('$320.00'); 
```

[**小提琴**](http://jsfiddle.net/J3q8C/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:38:01.807

这是一个略有不同的配置，但我认为它可能对您有用。

```
<table width="420" cellspacing="0" cellpadding="3" border="0">
<tbody>
<tr><td>....</td>
</tr>
<tr>
<td>Total Amount Due:</td>
<td id="amountDue">$168.88</td>
</tr>
</tbody>
</table> 
```

和 JavaScript：

```
alert($("td#amountDue").text()); 
```

[http://jsfiddle.net/BAW8c/](http://jsfiddle.net/BAW8c/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:42:01.637

是否有理由不尝试执行以下操作？

```
<table width="420" cellspacing="0" cellpadding="3" border="0">
<tbody>
<tr><td>....</td>
</tr>
<tr>
<td>Total Amount Due:</td>
<td id="total-amount-due">$168.88</td>
</tr>
var ttl = $('#total-amount-due').text(); 
```

根据您发布的内容，这似乎是最简单的解决方案。

# excel - Excel now() 不应更新现有时间戳

> ID：13804975
> 
> 赞同：2
> 
> 时间：2012-12-10T16:27:25.280
> 
> 标签：excel, excel-formula

我有一个excel公式`=IF(NOT(ISBLANK(A2)), TEXT(NOW(), "mm/dd/yyyy HH:ss"),"")`

我的问题是：当然，每次我打开这张表时，它都会更新与最近时间戳关联的单元格值。如果它已经存在，我不希望这个时间戳改变。

我想要的是某种方式：如果 A2 不是空白并且最近没有更新，那么不要更新时间戳，否则更新。

如果可能的话，我正在寻找一个内联函数。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:49:21.700

您可以使用 VBA 宏执行此操作：

1.  打开 VBA 编辑器（工具 > 宏 > Visual Basic 编辑器）
2.  在左侧，右键单击 Sheet1 并选择查看代码
3.  将以下内容复制到编辑器中：

* * *

```
Private Sub Worksheet_Change(ByVal Target As Range)
  If Target.Column = 1 And Target.Row = 2 Then
    If Target.Value = "" Then
      Cells(2, 2).Value = ""
    Else
      Cells(2, 2).Value = Format(Now, "mm/dd/yyyy HH:mm:ss")
    End If
  End If
End Sub 
```

* * *

如果你在 A2 单元格中写了一些东西，那么一个时间戳将被写入到单元格 B2 中，当你删除 A2 时，B2 也会被删除。时间戳不会自动更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:19:33.700

如果（A2:C2 或 E3:F4）中的任何单元格被编辑，我想你想在一系列单元格（比如 A9:C20 和 D11:E12）中记录编辑时间。

你可以这样做：

右键单击工作表选项卡并选择“查看代码”并粘贴以下代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Intersect(Target, Range("A2:C2,E3:F4")) Is Nothing Then Exit Sub
Range("A9:C20,D11:E12").Value = Now()
Range("A9:C20,D11:E12").NumberFormat = "mm/dd/yyyy hh:mm:ss"
End Sub 
```

除非再次编辑（A2:C2 或 E3:F4）中的任何一个，否则时间戳不会自动更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-05T18:12:20.407

文件>选项>公式>检查手动计算>取消选中“保存前重新计算工作簿”。如果需要，还检查启用迭代并将最大迭代设置为 1，如上所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-26T18:52:13.657

只需将默认迭代更改为`1`，因此它会在停止之前重新计算一次。

去这个：

1.  办公室按钮
2.  Excel 选项
3.  公式
4.  迭代

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-08-03T20:36:23.823

好的 - 所以我意识到这个线程很古老。
但是，我遇到了一个我认为我会分享的 excel 公式化方法：

单元格 A1 = 具有完整、不完整数据验证列表的单元格 A2 = IF(A1="Complete",IF(A2="",NOW(),A2),"")

需要打开迭代 - 所以要考虑其他潜在的循环引用 - 但这将返回一个空白单元格，直到您将 A1 翻转为“完成”。完成此操作后，它将更新 A2。只要您不更改 A1 的状态，A2 就会保持该状态。

您还可以将触发器更改为其他字段等，在我的情况下，我将其保持在不完整状态，直到表格准备好，然后将其翻转为 Complete 并且时间戳记。

# python - 如何从自身重新加载 python 模块？

> ID：13804988
> 
> 赞同：9
> 
> 时间：2012-12-10T16:28:09.173
> 
> 标签：python

我有一个包含很多变量的 python 模块。许多其他模块使用和更改这些变量。我想在它发生时从自身重新加载这个模块（用于刷新）。

怎么做？

**更新：**所以..这是我，问题作者，问题发布日期后 8 年。我不知道为什么我会尝试做那样的事情。

如果您阅读本文，请尝试使用适当的配置管理技术（大部分时间由您的框架提供）。

```
# ==================================
# foo.py

spam = 100

def set_spam(value):
    spam = value
    foo = reload(foo) # reload module from itself

# ==================================
# bar.py

import foo
print foo.spam # I expect 100
# assume that value changes here from some another modules (for example, from eggs.py, apple.py and fruit.py)
foo.set_spam(200)
print foo.spam # I expect 200 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:02:02.203

你想要实现的目标有很多问题，除非你故意设置一个自我修改的代码系统，它看起来不像你。

### 1\. 全局变量

```
spam = 100

def set_spam(value):
    spam = value
    foo = reload(foo) #reload module from itself 
```

这是行不通的。由于 Python 闭包的工作方式，您的`spam = value`行将在您的函数中创建一个新的*局部*变量，然后不会被使用。要正确更改 global 的值，您必须使用关键字，例如：`spam``set_spam``spam``global`

```
spam = 100

def set_spam(value):
    global spam
    spam = value 
```

### 2.“从自己”重新加载模块

据我所知，没有办法真正做到这一点，你也不应该这样做。您已`import`编辑的任何模块都是从其他模块调用的，一直到`__main__`. 您只需从该调用模块刷新它。是的，您*可以*尝试自行导入模块（尽管可能存在无限循环问题，如 mgilson 所述），但即便如此（使用名为“foo”的示例），如果您让它自行导入，您只需have `foo.foo`，并且做类似的事情`foo.reload(foo)`（如果这甚至是有效的）只会重新加载 sub- `foo`，而不是 base 。

### 3\. 重新`foo.py`加载

```
# ==================================
# foo.py

spam = 100

def set_spam(value):
    global spam
    spam = value 
```

请注意，在此代码的顶部，您如何将 100 分配给`spam`. *每次导入模块*时，您都会再次这样做。因此，即使您已经更改了`spam`导入代码中的值`foo`，当您重新加载模块时，您实际上也会破坏您刚刚所做的更改。例子：

```
>>> import foo
>>> foo.spam
100
>>> foo.spam = 9
>>> foo.spam
9
>>> reload(foo)
>>> foo.spam
100 
```

因此，如果您想保留对变量所做的更改`foo`，则不应**重新**加载模块。而且，你真的不需要使用`set_spam`函数来改变`spam`，你可以像我一样直接设置它。

### 4.尝试在其他模块中使用这个“改变”的模块值

最后，如果我正确理解你想要做什么，那是行不通的。这在很大程度上是因为我在第 3 部分中提到的一些事情，其中​​每次加载`foo`时，该`spam=100`行都会重置`spam`. 同样，如果您`foo`在两个不同的其他模块中导入模块，当每个模块导入它时，它们都会以 . 开头`spam = 100`，完全独立于另一个模块对`foo.spam`. 例如，如果两者都包含`bar1.py`和`bar2.py`包含以下行`import foo`：

```
>>> import bar1, bar2
>>> bar1.foo.spam
100
>>> bar2.foo.spam
100
>>> bar1.foo.spam = 200
>>> bar1.foo.spam
200
>>> bar2.foo.spam
100 
```

通过对您尝试做什么的更多解释，我们可以帮助您重组代码以使其更好地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T18:25:07.133

在 Python 2.6.2 中，这很简单。假设您的模块名为“t”并定义如下：

```
import imp

def reload():
    name="t"
    imp.load_module(name,*imp.find_module(name))

print("loaded") 
```

加载此模块后，添加另一个成员并执行 t.reload()。

ps 我想每个人都认为这是一个坏主意：他们可能是对的，但是如果您正在交互式地开发一个模块，也许它会让事情变得更方便。在将代码分发给其他人之前将其取出，否则他们可能会感到困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-31T01:18:53.907

这里

```
import sys

reload(sys.modules[__name__]) 
```

注意，这不适用于`main`模块，但适用于任何其他模块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T16:32:40.410

我看不出你怎么能干净地做到这一点而不会陷入无限循环。也许有一个功能会更好`reset`？

```
def reset():
    global spam
    spam = 100 
```

请注意，这个设计对我来说仍然有点时髦。从长远来看，似乎更好的数据封装可能会对您有很大帮助——也许是这样的：

```
def new_namespace():
    return {'spam':100} 
```

然后，您的每个其他函数都可以接受命名空间字典作为参数，而不是依赖`foo`命名空间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-22T23:15:19.987

您还可以计算模块重新加载的次数！：

## 我的模块.py

```
import importlib
import sys

count = 0
var = 0

def refresh():
    global count
    c = count
    importlib.reload(sys.modules[__name__])
    count = c + 1
    print (f'reloaded {count} time(s)') 
```

## 主文件

```
import mymodule

mymodule.var = 'changed'
mymodule.refresh()
  # -> reloaded 1 times(s)
print(mymodule.var)
  # -> 0
mymodule.refresh()
  # -> reloaded 2 times(s) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T16:40:14.697

This operation doesn't make sens at all. From [Python documentation](http://docs.python.org/2/library/functions.html#reload):

> reload(module): Reload a previously imported module. The argument must be a module object, so it must have been successfully imported before.

So, `reload` make sens only from context of other module which performed `import` previously.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-28T23:23:57.343

这是先前答案的另一个版本，仅在计数器不存在时才对其进行初始化。在 python 3.8.6 上测试

```
# mod.py
import importlib, sys

a=0

def reload():

    importlib.reload(sys.modules[__name__])
    global i
    try:
        i += 1
    except:
        i = 1
    print(f'reloaded {i} time(s)') 
```

* * *

```
# main.py
import mod

mod.a = 10
print (mod.a) # -> 10
mod.reload() # -> reloaded 1 time
print (mod.a) # -> 0
mod.reload() # -> reloaded 2 times 
```

# c++ - OpenCv：无法打开 Kinect 的捕获对象

> ID：13804989
> 
> 赞同：1
> 
> 时间：2012-12-10T16:28:11.903
> 
> 标签：c++, opencv, kinect, openni

[我已经按照这里](http://mitchtech.net/ubuntu-kinect-openni-primesense/)的教程安装了 OpenNI 和 SensorKinect ：并且示例查看器工作得很好。我已经下载了 OpenCV 2.4.3，然后执行了以下操作：

1.  mkdir 发布
2.  光盘发行
3.  cmake-gui ..
4.  点击配置
5.  将 WITH_OPENNI 设置为勾选
6.  检查它是否找到了 OPENNI dirs 和 primesense dir
7.  点击配置然后生成
8.  跑了

然后我尝试运行 OpenCV-2.4.3/samples/openni_capture.cpp 中的示例代码

但是我得到以下输出：

```
Device opening ...
done.
Can not open a capture object. 
```

相关代码为：

```
VideoCapture capture(CV_CAP_OPENNI);
if( isVideoReading )
    capture.open( filename );
else
    capture.open( CV_CAP_OPENNI );

cout << "done." << endl;

if( !capture.isOpened() )
{
    cout << "Can not open a capture object." << endl;
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:22:55.367

好的，我有同样的问题。

我通过再次安装[SensorKinect 驱动程序](https://github.com/avin2/SensorKinect/)解决了这个问题（第一次出了点问题），然后我安装了 OpenCV 2.4.3，就像你描述的那样：

```
mkdir release
cd release
cmake-gui ..
hit configure
enabled WITH_OPENNI
hit configure and then generate
ran sudo make 
```

我必须使用 运行`make`，`sudo`否则我总是会出错。

最后你必须做

```
sudo make install 
```

我的意思是，这就是上面整个过程的意思，不是吗？;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T16:01:12.887

将此调试行 ,`cout << cv::getBuildInformation() << endl;`放在您的代码中，就在前面

`if( !capture.isOpened() ) { cout << "Can not open a capture object." << endl; return -1; }`

这会让你知道你的opencv是否安装了openni。如果切换，

`OpenNI: YES (ver 1.5.4, build 0) OpenNI PrimeSensor Modules: YES (/usr/lib/libXnCore.so)`

在`NO`您的情况下，那么您可能需要考虑使用`cmake`flag重新编译您的 opencv 模块`-D WITH_OPENNI=ON`。

干杯!

# objective-c - 将项目添加到块内的 NSMutableArray 时出现问题

> ID：13804994
> 
> 赞同：0
> 
> 时间：2012-12-10T16:28:33.670
> 
> 标签：objective-c, ios, nsmutablearray, objective-c-blocks

更新：我刚刚发现了一个棘手的部分......如果我做这样的事情，它会起作用：

```
[_friendsArrayInBlock insertObject:@"Bla" atIndex:itemIndex]; 
```

但它没有：

```
[_friendsArrayInBlock insertObject:friend atIndex:itemIndex]; 
```

为什么我不能添加自定义对象，但我可以添加 NSString？有什么问题

ORIGINAL PART：这里可以看到相关的代码部分：

```
@implementation ORGFriendsTableViewController
{
    NSMutableArray *_friendsArray;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _friendsArray = [NSMutableArray array];
    __block NSMutableArray *_friendsArrayInBlock = _friendsArray;

    [FBRequestConnection startForMyFriendsWithCompletionHandler: ^(FBRequestConnection *connection,
                                                                   id result,
                                                                   NSError *error) {
        FBGraphObject *fbGraphObject = (FBGraphObject *)result;

        NSMutableArray *userArray = fbGraphObject[@"data"];
        for (FBGraphObject *user in userArray) {

            ORGFBUser *friend = [[ORGFBUser alloc] initWithId:user[@"id"] name:user[@"name"] andPhotoURL:@"someurl"];

            NSInteger itemIndex = 0;
            [_friendsArrayInBlock insertObject:friend atIndex:itemIndex];
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForItem:itemIndex inSection:0]] withRowAnimation:UITableViewRowAnimationRight];
        }
    }];
} 
```

问题出现在这一行：

```
[_friendsArrayInBlock insertObject:friend atIndex:itemIndex]; 
```

程序接收信号“EXC_BAD_ACCESS”

我认为它与块概念有关，并从中改变了非线程安全的 NSMutableArray。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:36:31.570

块可以在不使用的情况下访问实例变量`__block`（参见[this](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW3)）。因此这应该工作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _friendsArray = [NSMutableArray array];

    [FBRequestConnection startForMyFriendsWithCompletionHandler: ^(FBRequestConnection *connection,
                                                                   id result,
                                                                   NSError *error) {
        FBGraphObject *fbGraphObject = (FBGraphObject *)result;

        NSMutableArray *userArray = fbGraphObject[@"data"];
        for (FBGraphObject *user in userArray) {

            ORGFBUser *friend = [[ORGFBUser alloc] initWithId:user[@"id"] name:user[@"name"] andPhotoURL:@"someurl"];

            NSInteger itemIndex = 0;
            [_friendsArray insertObject:friend atIndex:itemIndex];
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForItem:itemIndex inSection:0]] withRowAnimation:UITableViewRowAnimationRight];
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T16:33:24.870

试试这个

```
@implementation ORGFriendsTableViewController
{
    NSMutableArray *_friendsArray;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _friendsArray = [NSMutableArray array];
    __block NSMutableArray *_friendsArrayInBlock = _friendsArray;

    [FBRequestConnection startForMyFriendsWithCompletionHandler: ^(FBRequestConnection *connection,
                                                                   id result,
                                                                   NSError *error) {
        FBGraphObject *fbGraphObject = (FBGraphObject *)result;

        NSMutableArray *userArray = fbGraphObject[@"data"];
        for (FBGraphObject *user in userArray) {

            ORGFBUser *friend = [[ORGFBUser alloc] initWithId:user[@"id"] name:user[@"name"] andPhotoURL:@"someurl"];

            [_friendsArrayInBlock addObject:friend];
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_friendsArrayInBlock.count-1 inSection:0]] withRowAnimation:UITableViewRowAnimationRight];
        }
    }];
    [self.tableView reloadData];
} 
```