# StackOverflow 问答 14055000-14055999

# django - 表单预览安全哈希操作

> ID：14055001
> 
> 赞同：1
> 
> 时间：2012-12-27T12:48:32.590
> 
> 标签：django, forms, security, hash, preview

我在其中一个模型中有三个整数字段，如下所示：

```
class SomeModel(models.Model):
    min_age = models.IntegerField()
    max_age = models.IntegerField()
    savings = helpers.MoneyField() 
```

MoneyField 是一个自定义字段，它使用一个小部件将金额（170000）分解为两个下拉列表，分别为 100000（十万）和（70000）千。

对于我使用上述货币字段的表单，我有一个`form preview`视图，它强制用户在发布之前预览表单。

使用相同的想法，我想更改`min_age`并`max_age`使用单个小部件。所以我，

1.  添加了一个 AgeFields（多值字段如下）：

    类 AgeField(forms.MultiValueField):

    ```
    def __init__(self, *args, **kwargs):
        """ 
        Have to pass a list of field types to the constructor, else we
        won't get any data to our compress method.
        """

        all_fields = ( 
            forms.CharField(),
            forms.CharField(),
            )   
        super(AgeField, self).__init__(all_fields, *args, **kwargs)

    def compress(self, values):
        if values:
            print values
            return '|'.join(values)
        return '' 
    ```

然后在表单中，我隐藏了模型字段并使用上面的字段来使用看起来类似于`MoneyWidget()`

```
class PostForm(forms.ModelForm):
    age = AgeField(widget=widgets.AgeWidget(),
            required=False)

    def is_valid(self):
        return super(PostForm, self).is_valid()

    def full_clean(self, *args, **kwargs):
        print self.data
        if 'age_0' in self.data:
            newdata = self.data.copy()
            newdata['min_age'] = self.data['age_0']
            newdata['max_age'] = self.data['age_1']
            print newdata
            self.data = newdata
        super(PostForm, self).full_clean(*args, **kwargs)

    class Meta:
        model = models.SomeModel
        fields = (
                  'age', 'min_age', 'max_age',
                  'savings'
                 )
        widgets = {
            'min_age' : forms.HiddenInput(),
            'max_age' : forms.HiddenInput(),
            'savings' : widgets.MoneyWidget(),
        } 
```

目前一切正常，尽管`FormPreview`创建了一个循环。正如我使用上述`full_clean`方法将值插入到实际模型字段中一样。

这就是发生的事情。

1.  用户填写表格并单击“预览”。
2.  `security_hash`这将为该特定表单创建一个并呈现预览视图。
3.  如果表单没问题，用户再次提交表单，否则他单击编辑按钮再次编辑表单。

现在，如果表单没问题，并且用户单击提交按钮，表单预览而不是提交表单会循环回预览。然后在预览模板上再次单击提交按钮时，表单将被提交。

这很可能是因为我们在生成 security_hash 之后在上面的 full_clean 方法中设置了`min_age`和的值。`max_age`上面的方法在我们操作数据时会改变 security_hash。

第二次，用户提交表单。`min_age`和`max_age`字段已经有相同的数据，所以`security_hash`保持不变。

有什么方法可以操纵 security_hash，或者可以在生成 security_hash 之前将值插入 min_age 和 max_age。让它保持不变？

实现上述目标的最佳方法是什么？

欢迎任何建议。谢谢。

## 更新：

我试图更深入地挖掘，因为我假设安全哈希失败了。因此，为了确保我在调用视图`failed_hash()`之前重写了打印错误消息的方法，并猜测这是被调用的方法并将表单重定向回方法。`preview_post()``FormPreview``preview_post()`

我认为安全哈希无法匹配，因为我`POST`在上述`full_clean()`方法中操作数据，所以我设置了 min_age 和 max_age `required=False`，然后尝试显式设置`save()`方法中的值，如下所示

```
def save(self, *args, **kwargs):
    if 'age_0' in self.data:
        newdata = self.data.copy()
        newdata['min_age'] = self.data['age_0']
        newdata['max_age'] = self.data['age_1']
        self.data = newdata
    super(PostForm, self).save(*args, **kwargs)

def __init__(self, *args, **kwargs):
    super(PostForm, self).__init__(*args, **kwargs)
    for key in self.fields:
        self.fields['min_age'].required = False
        self.fields['max_age'].required = False 
```

但仍然没有运气。该`failed_hash()`方法仍在被调用，循环仍然存在。:(

# asp.net-mvc - 如何设置 Oauth Facebook

> ID：14055015
> 
> 赞同：0
> 
> 时间：2012-12-27T12:49:37.120
> 
> 标签：asp.net-mvc, oauth, facebook-oauth

我的项目 asp.net-mvc4 没有配置 Oauth，我在教程中看到项目有文件夹 App Start / Auth.Config - 在我的项目中没有这些文件，因为我使用这个配置启动项目？或者我该如何安装？- 我需要登录我的 Facebook 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:59:53.850

如果您使用的是 Visual Studio 2012，请在 MVC 项目选择对话框中选择“Internet 应用程序”。如果您选择任何其他类型，则必须自己创建这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:17:00.590

看看[DotNetOpenAuth](http://www.dotnetopenauth.net/)

你可以找到一些很好的例子。查看示例[源代码](https://github.com/DotNetOpenAuth/DotNetOpenAuth)

# android - 视图未附加到窗口

> ID：14055018
> 
> 赞同：7
> 
> 时间：2012-12-27T12:49:52.440
> 
> 标签：android, debugging, android-logcat

警告`The view is not attached to a window`是什么意思？在尝试调试我的游戏时，我不断地在 Logcat 中获取它。

**确切的输出：**

```
12-27 18:14:12.415: W/View(16827): The view is not attached to a window 
```

我已搜索此警告，但找不到任何内容。我得到的只是[关于 Window Manager 的错误](https://stackoverflow.com/questions/5612842/view-not-attached-to-window-manager)，这不是我在这里得到的。我想知道这个警告的原因，只是为了确认它是否与 FPS 下降有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T13:25:33.383

这意味着在方向更改时您可以运行任何**对话框。**只需关闭活动的 onFinish 或 onDestroy 中的对话框。

# c# - 代码在 c# dll 和 powershell 中的行为不同

> ID：14055020
> 
> 赞同：2
> 
> 时间：2012-12-27T12:49:57.923
> 
> 标签：c#, powershell

在 C# 中，我的代码如下：

```
OleDbConnection cxn = New OleDbConnection();
cxn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Extended Properties='text;HDR=Yes;FMT=Delimited(,)';Data Source=" + System.IO.Path.GetDirectoryName(csvFilePath);
cxn.Open();
cxn.Close(); 
```

此代码执行没有任何错误。

powershell 中的相同内容类似于：

```
$cxn = new-object System.Data.OleDb.OleDbConnection
$cxn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Extended Properties='text;HDR=Yes;FMT=Delimited(,)';Data Source=" + [System.IO.Path]::GetDirectoryName($csvFilePath);
$cxn.Open();
$cxn.Close(); 
```

但是上面给出了一个错误说：

> 使用“0”参数调用“打开”的异常：“'Microsoft.Jet.OLEDB.4.0' 提供程序未在计算机上注册”

我使用的是 64 位 Ms Windows 2008 Server R2 操作系统。我还看到另一个帖子说如果你改变`Jet.OLEDB.4.0`它`ACE.OLEDB.12.0`应该可以工作。它确实有效，但是我不明白为什么相同的东西在 dll/exe 中“有效”，因为它在 powershell 中失败了。

然而，我面临的问题是一个完全不同的问题。类似的代码存在于 Web 应用程序（wcf 服务）中。我相信这在框架 3.5 (clr 2.0) 上运行。类似的代码也存在于 Windows 服务中；它失败的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:58:24.167

发生这种情况是因为您使用的是 64 位 Powershell 的 Microsoft Jet 4.0（仅支持 32 位）。尝试从 32 位 Powershell 运行相同的命令（位于：“$env:WINDIR\syswow64\windowspowershell\v1.0\powershell.exe”）

它在 IIS 中工作的原因是因为应用程序池设置为允许执行 32 位应用程序。

# java - Java & Android 混淆器工具建议

> ID：14055024
> 
> 赞同：4
> 
> 时间：2012-12-27T12:50:18.287
> 
> 标签：java, android, obfuscation

我们同时开发 Android 和 Java 项目，我们需要一个具有*加密*能力的*混淆器工具。*价格不是问题。你能给我什么建议？可用于 Java 和 Android 项目的最佳*混淆器是什么？*

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T13:06:22.097

一些混淆器是，

## [ProGuard](http://proguard.sourceforge.net/)

ProGuard 是一个免费的 Java 类文件收缩器和混淆器。它可以检测和删除未使用的类、字段、方法和属性。然后，它可以使用无意义的短名称重命名剩余的类、字段和方法。由此产生的罐子更小，更难逆向工程。

## [yGuard](http://www.yworks.com/products/yguard)

yGuard 是 RetroGuard 的改进版本，带有一个 ant 任务。

## [乔德](http://jode.sourceforge.net/)

JODE 是一个包含反编译器和 Java 优化器的 java 包。优化器可以通过脚本文件控制以各种方式转换类文件。它支持以下操作：

*   将类、方法、字段和本地名称重命名为更短、混淆或唯一的名称，或根据给定的转换表
*   删除调试信息
*   删除死代码（类、字段、方法）和常量字段
*   优化局部变量分配

## [JavaGuard](http://sourceforge.net/projects/javaguard/)

JavaGuard 是一种通用字节码混淆器，旨在轻松融入您的常规构建和测试过程，让您高枕无忧，让您的宝贵 Java 代码更安全地防止反编译和其他形式的逆向工程。

## [罐子](http://jarg.sourceforge.net/)

jarg 减小了存储 java 类文件的 jar 文件的大小。“可以简单地进行规模缩减”是第一个目标。但是，通过jarg处理的结果是，Java类文件由于被优化，所以变得更快，并且由于被重命名，变得更难分析。也就是说，jarg 是“Java Optimizer”，它是“Java Obfuscator”，也是“Java Shrinker”或“Java Reducer”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T12:55:24.327

Proguard 的（java 和 android，开源）兄弟 DexGuard（android，闭源）进行字符串加密。

见：[https ://www.guardsquare.com/en/dexguard](https://www.guardsquare.com/en/dexguard)

我还要补充一点，proguard 页面还列出了很多其他（！）混淆器：[https ://www.guardsquare.com/en/proguard#alternatives.html](https://www.guardsquare.com/en/proguard#alternatives.html)**

# c - 为什么这个程序会进入无限循环？

> ID：14055026
> 
> 赞同：-3
> 
> 时间：2012-12-27T12:50:23.930
> 
> 标签：c

```
main()
{
int i;
int a[5];
for (i = 1; i <= 5; i++)
    a[i] = 0;
printf("Hello, how are you? ");
} 
```

为什么程序没有退出循环？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T12:51:35.150

C 数组是从零开始的，因此您应该使用索引 [0..4] 而不是 [1..5]。

写入`a[5]`超出数组范围的写入。这有未定义的结果；在您的情况下，这恰好是您的循环计数器的地址，`i`它被重置为 0。

您可以通过使用解决此问题

```
for (i = 0; i < 5; i++) 
```

或更好，

```
for (i = 0; i < sizeof(a)/sizeof(a[0]); i++) 
```

作为你的循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T12:54:03.123

您正在越界访问数组（大小为 5 的数组的合法索引是索引 0 到 4，而不是 1 到 5）。就标准而言，这意味着您的程序会调用未定义的行为，并且可以按照自己喜欢的方式行事。

就实际实现而言，实际发生的情况可能是您的最后一次数组访问（即`a[5] = 0;`）覆盖了`a`内存中出现的变量，该变量恰好`i`在您的系统上。So`i`被重置为 0 并且循环永远继续。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T13:10:11.290

```
#include <stdio.h>
main()
{
int a[5];
int i;
printf("Memory location of i = %p\n",&i);
printf("Memory location of a[5] = %p\n",&a[5]);
for (i = 1; i <=5; i++)
{
    a[i] = 0;
    sleep (2);
   printf("Value of i=%d\n",i);
}
printf("Hello, how are you? \n");
} 
```

* * *

看到 o/p 很有趣.. [将理解为什么 i 的值变为 0（零）]

```
mnds@mind-AcerPower-Series:/tmp$ ./a.out 
Memory location of i = 3218951772
Memory location of a[5] = 3218951772
Value of i=1
Value of i=2
Value of i=3
Value of i=4
Value of i=0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T12:52:26.943

如果你正在写作`a[5]`，那就超出了界限。

你的循环应该是：

```
for(i=0; i<5; i++) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T12:52:42.110

您传递整数数组的大小，数组大小为 5，因此`a[4]`可以访问最大值。试试这个：

```
main()
{
    int i;
    int a[5];
    for (i = 0; i < 5; i++)
        a[i] = 0;
    printf("Hello, how are you? ");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T12:53:00.563

因为它调用未定义的行为，所以任何事情都可能发生（包括无限循环）。

当您的数组有 5 个元素时，这些元素的索引范围为 0 到 4。访问`a[5]`是无效操作。

C中的数组是零索引的，所以为了你的程序正常工作，你应该写

```
for (i = 0; i < 5; i++) 
```

# javascript - 如何调用依赖于先前加载的 xml 文件的函数？

> ID：14055029
> 
> 赞同：0
> 
> 时间：2012-12-27T12:50:28.373
> 
> 标签：javascript, javascript-events

我正在使用两种方法创建一个简单的类：

*   **初始化**（'/path/to/xmlfile'）
*   **测试**（东西）

主要问题是**测试方法取决于加载工作的xml文件**......所以，当我做这样的事情时：

```
f.init('/sources/model.xml');
f.test(it); 
```

它失败了，因为**test**使用了加载 xml 文件时创建的结构。

由于我使用 Jquery 加载 xml 文件，使用**get**方法，我可以这样做一些事情：

```
f.init('/sources/model.xml',
    function() {
       if (this.test(it) ) {
            alert('OK, it works!');
        }else {
            alert('Wrong!');
       }
   }); 
```

并将我的回调放在**get Jquery方法的****成功**回调中......但是，有可能做我上面放的类似的事情吗？？？

 **我将不胜感激任何帮助。

**注意：我尝试在****测试**函数中使用变量“已加载” ，并使用**setInterval**函数检查是否加载了 xml 文件，但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:16:03.370

您应该使用回调来防止阻塞，但如果您真的希望`init`函数阻塞直到它收到响应，您可以选择使用 $.ajax 方法而不是 $.get

$.ajax 支持一个`async`选项，如果设置为`false`将阻止脚本执行，直到服务器响应

基本用法：

```
$.ajax({
    url: "/path/to/file"
    type: "GET",
    async: false,
    success: function(data) {
        // do something
    }
}); 
```

文档， [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)**

# jquery - jQuery on event 不适用于未来的选择器

> ID：14055030
> 
> 赞同：2
> 
> 时间：2012-12-27T12:50:31.890
> 
> 标签：jquery, event-delegation

我有一个模态窗口。在其中有一个 ID 为**WebPartWPQ2**的表，它将在三种不同的状态下具有三个不同的类。这些类是***ms-applyfiltersinactive***、***ms-applyfiltersactive***和***ms-applyfiltershoverover***。最初，当模态窗口弹出时，表格将具有*ms-applyfiltersinactive*类。只有在其中的选择框中更改选项时，表的类才会更改为*ms-applyfiltersactive*，然后在鼠标悬停时，该类会更改为*ms-applyfiltershoverover*。关闭窗口时，表的类重置为*ms-applyfiltersinactive*。

要求是只有当它处于活动状态时，我才需要在表上有一个点击事件，即有一个类*ms-applyfiltersactive*或*ms-applyfiltershoverover*。

我在用

```
$(document).on("click","#WebPartWPQ2 .ms-applyfiltersactive, #WebPartWPQ2 .ms-applyfiltershoverover", function(){
    alert("Clicked");
}); 
```

这无法将点击事件附加到表格。这可能是因为表的类是*ms-applyfiltersinactive*。

如果我使用以下代码

```
$(document).on("click","#WebPartWPQ2 table[class*='ms-applyfilter']", function(){
    alert("Clicked again");
}); 
```

在所有三种情况下都会触发该事件，这是我不想要的。

我尝试使用*hasClass*和*is*事件过滤掉选择器。

```
$(document).on("click","#WebPartWPQ2 table[class*='ms-applyfilter']", function(){
    alert($(this).is("table.ms-applyfiltersactive"));
}); 
```

但是当表有任何类时，这会返回相同的布尔值。

这个你能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:36:13.060

没有 HTML，我无法使用您当前的代码。但是，我创建了一个应该有所帮助的示例。

我建议执行以下操作：

JAVASCRIPT：

```
$(document).on("click","#WebPartWPQ2", function(){
    switch($("#WebPartWPQ2").attr("class")){
        case 'ms-applyfiltersinactive':
            //do something
            break;
        case 'ms-applyfiltersactive':
            //do something
            break;
        case 'ms-applyfiltershoverover':
            //do something
            break;    
    }
}); 
```

演示：http: [//jsfiddle.net/PKWKn/11/](http://jsfiddle.net/PKWKn/11/)

希望这可以帮助！

# java - JTextArea 上的 KeyEvent 问题

> ID：14055039
> 
> 赞同：2
> 
> 时间：2012-12-27T12:51:17.727
> 
> 标签：java, swing, jtextarea, jtextpane, keyevent

我是 GUI 编程新手。在练习`KeyEvent`Java Swing 处理时，`JTextarea`我遇到了一个问题。侦听器接口由文本区域本身实现。

当我`VK_ENTER`在文本区域中按下键时，我从文本区域获取文本，然后将该文本显示到`JTextPane`. 之后，我将文本设置为文本区域上的空字符串。在这里，我使用`keyPressed`了关键事件 - 它在文本区域中创建了一个新行，但我已经将文本区域行设置为 0（零）。

实际上我想要文本区域中的一行我不想要文本区域中的两行，如何解决这个问题？

这是我的代码：

```
public void keyPressed(KeyEvent evt) {

   try {
       if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
           if (evt.isShiftDown()) {  
              textArea .setText(textArea.getText() + "\n");
           } else {   
                inputMsg = textArea.getText().trim();
                textArea.setText(EMPTYSTRING);
                if (!inputMsg.equals(EMPTYSTRING)) {   
                   textPane.setText(inputMsg);
                }
                textArea.requestFocus();
              }
          }
     } catch (Exception ex) {
         logger.log(Level.SEVERE, "Exception in textArea.keyReleased() : ", ex);
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:06:38.910

> 实际上我想要 textarea 中的一行我不想要 textarea 中的两行，如何解决这个问题？

那你为什么使用textarea？，使用`JTextField`

**在提问者的评论后**编辑：****

 **`keyPressed`当您在方法中提供您的逻辑时，额外的新行即将到来。当您释放该键时，ENTER 使其对文本区域产生影响（通过为 ENTER 添加新行）。

您可以在方法中尝试您的逻辑`public void keyReleased(java.awt.event.KeyEvent evt)`，它**应该可以**工作。

其他方式可能是在您的逻辑之后在按下事件中使用释放的事件，但我不确定如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:11:28.433

当您输入任何长度的单行时，您应该考虑使用`JTextField`.

理想情况下，`JTextArea`可用于接受多行输入。**

# visual-c++ - 如何在 Visual Studio C++ 中通过网络使用 LibVLC 流式传输存储在内存缓冲区中的原始图像数据？

> ID：14055046
> 
> 赞同：3
> 
> 时间：2012-12-27T12:51:49.213
> 
> 标签：visual-c++, opencv, stream, libvlc

因为我的目标是：

1.  使用 LibVLC 从 IP 摄像机流式传输视频
2.  使用 OpenCV 处理视频
3.  然后使用 LibVLC 通过网络重新传输处理后的视频/图像，以便其他连接的客户端可以实时看到处理后的视频/图像（不先将视频/图像存储到磁盘）。

我已经成功完成了前两个任务，但是现在我想通过网络从内存缓冲区作为源流处理过的视频/图像，内存缓冲区是一个 iplimage 变量，它可以是 Mat 变量。所以，如果有人知道如何使用 libvlc 流式传输这样的原始数据，那么请帮忙，或者指出正确的方向或示例代码或链接。将不胜感激..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:34:01.217

试试[imem](http://forum.videolan.org/viewtopic.php?f=32&t=93842)，然后你可以使用内存输入作为流源。通过实现模块的 get-release 回调，您可以指向缓冲区的位置并设置解码演示时间戳的值。以下是获取和发布的原型：

```
 int imemGetCallback(void *userdata, const char* cookie, int64_t *dts, int64_t *pts, unsigned *flags, size_t *bufferSize, void **buffer);
    int imemReleaseCallback(void *data, const char *cookie, size_t bufferSize, void *buffer); 
```

# css - 根据 .right 高度修改 .left 高度

> ID：14055051
> 
> 赞同：0
> 
> 时间：2012-12-27T12:51:58.747
> 
> 标签：css, height

我创建了一个测试 HTML 文档

```
<!DOCTYPE html>
<html>
<head>
  <style>
  html {
    background-color:#ff8700
}

#header {
    width:99%;
    height:70px;
    margin-top:-10px;
    background-color:red;
    border-radius:5px;
    position:fixed;
    z-index:1
}

.left {
    width:5%;
    height:400px;
    /* Make the same of .right ? */
    background-color:blue;
    border-radius:5px;
    float:left
}

.right {
    width:94%;
    height:auto;
    background-color:orange;
    border-radius:5px;
    float:right
}

#footer {
    width:100%;
    height:auto;
    margin-bottom:-15px;
    background-color:red;
    border-radius:5px;
    clear:both
}

h1 {
    color:#fff;
    font-family:cursive
}

</style>
<title>Test</title>
</head>
<body>
    <div id="header"><h1>Test Site</h1></div><br>
    <div class="left"></div>
    <div class="right"><h2 style="margin-top: 40px">Lorem Ipsum</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod, libero ac ullamcorper consequat, nunc justo placerat neque, eget fringilla odio massa vitae dui. In hac habitasse platea dictumst. Maecenas dapibus purus in arcu lobortis pharetra. Quisque sed augue libero, vitae bibendum tortor. Curabitur mi lacus, tristique quis venenatis non, imperdiet eget sapien. Quisque nunc ligula, commodo nec pellentesque sed, malesuada id lorem. Proin non orci consequat elit lacinia scelerisque id eu lacus. Integer eu sem nec orci facilisis ultricies. Nam fermentum, quam ac vehicula porta, lectus tortor porta libero, in imperdiet tellus urna ac purus. Sed nec nulla arcu, quis lobortis dui. Suspendisse feugiat accumsan blandit. Quisque semper fermentum ligula quis vehicula. Vestibulum in magna accumsan est dapibus sodales. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla ullamcorper quam a nulla iaculis vel facilisis quam sollicitudin. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod, libero ac ullamcorper consequat, nunc justo placerat neque, eget fringilla odio massa vitae dui. In hac habitasse platea dictumst. Maecenas dapibus purus in arcu lobortis pharetra. Quisque sed augue libero, vitae bibendum tortor. Curabitur mi lacus, tristique quis venenatis non, imperdiet eget sapien. Quisque nunc ligula, commodo nec pellentesque sed, malesuada id lorem. Proin non orci consequat elit lacinia scelerisque id eu lacus. Integer eu sem nec orci facilisis ultricies. Nam fermentum, quam ac vehicula porta, lectus tortor porta libero, in imperdiet tellus urna ac purus. Sed nec nulla arcu, quis lobortis dui. Suspendisse feugiat accumsan blandit. Quisque semper fermentum ligula quis vehicula. Vestibulum in magna accumsan est dapibus sodales. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per</p>
        <ul>
            <li>Test text 1</li>
            <li>Test text 2</li>
            <li>Test text 3</li>
        </ul>
    </div>
    <div id="footer">(c) 2012 thisisonlyatest.com</div>
</body>
</html> 
```

你可以[在这里](http://htmledit.squarefree.com)测试它。我希望蓝色块 (.left) 的大小与 (.right) 相同。我尝试使用 height`auto`和`100%`，但似乎没有用，而是消失了。我还尝试制作 a`.parent` 并放入. 然后我将高度更改为 100%，但没有工作。`.left``.right``.parent``.left`

帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:03:46.560

`div (.cointeiner)`添加具有固定高度的父级，并应用于`height:auto;`两侧（`.left`和`.right`）。

[关联](http://jsfiddle.net/AXwRW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:00:55.933

将左侧更改为 50%，将右侧更改为 50%，并将它们的高度设置为相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:03:45.263

我建议您使用一些 jQuery 使 .left 和 .right 具有相同的高度。

这个 jQuery 插件将获取您输入的最大元素的高度，并使所有元素都达到该高度。

你可以在这里得到它：

[http://www.cssnewbie.com/equalheights-jquery-plugin/](http://www.cssnewbie.com/equalheights-jquery-plugin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:16:05.603

而不是浮动这两个块，使用`display: table-cell;`，并完全删除高度指令。其他一切都可以保持不变：

[http://jsfiddle.net/cwh9z/1/](http://jsfiddle.net/cwh9z/1/)

# linux - 为什么我在屏幕上运行程序界面会改变？

> ID：14055053
> 
> 赞同：0
> 
> 时间：2012-12-27T12:52:04.487
> 
> 标签：linux, terminal, gnu-screen

首先对不起我的英语。为什么我在屏幕上运行程序界面会改变？

无屏幕

```
 +--------[ Қош келдіңіздер! ]--------+
                                |                                    |
                                | Введите Ваше имя : usr             |
                                | Пароль           :                 |
                                |                                    |
                                +------------------------------------+ 
```

带屏幕

```
 ош келдіңіздер! ]--------+
                                +--------[ 
                                |                                    |
                                | Введите Ваше имя : usr             |
                                | Пароль           :                 |
                                |                                    |
                                +------------------------------------+ 
```

# c# - 开始读取进程的 TCP/IP 事件

> ID：14055055
> 
> 赞同：0
> 
> 时间：2012-12-27T12:52:13.200
> 
> 标签：c#, events, tcp, event-handling, tcpclient

我正在开发一种解决方案，通过 TCP/IP 连接将数据从带有 GPRS 调制解调器（服务器）的微控制器发送到我在计算机（一个客户端）中的应用程序。

我首先设计了使用串行端口连接的应用程序（逐步进行更容易），现在我必须对其进行调整以便从套接字而不是串行端口接收，我是全新的我以为它会更直。

我已经阅读了几天，但我没有得到任何清楚的东西。我看到的大多数解决方案都只是发送和接收一个数据包，或者太复杂了。

我的服务器将每秒发送数据包，客户端必须读取它们然后分析它们。

我想要这样的东西：

`this.serialPort.DataReceived += new SerialDataReceivedEventHandler(this.routineRx);`

但是对于 NetworkStream。当有要阅读的东西时唤醒阅读过程（RoutineRx）的东西。

也许我必须改变主意，忘记这种事情。我正在尝试充分利用我的旧代码。

可能我问的是以前问过很多次的东西，但我真的没有找到。如果是这样，对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:01:54.623

a没有`DataReceived`事件`NetworkStream`。您可以使用该`DataAvailable`属性来确定何时读取数据供您读取，并用于`Read`读取该数据。

在c#中确实有很多读/写TCP数据的例子。它与读取串行端口数据不同，您可能需要重新考虑您的设计。

# cassandra - 使用 Cassandra 中的工具 sstable2json 将 JSON 写入输出文件

> ID：14055059
> 
> 赞同：2
> 
> 时间：2012-12-27T12:52:31.167
> 
> 标签：cassandra

我想将 SSTables 导出为 JSON。所以我正在使用`sstable2json.bat`. 我可以使用命令提示符运行这个 bat，并且可以在命令提示符本身上看到 JSON 结果打印。我使用了以下命令：

```
sstable2json H:/cassandra/db/data/191/191/191-191-hd-1-Data.db 
```

我必须将此 JSON 内容写入输出文件。为此，我使用了以下命令：

```
sstable2json -f H:/output.json H:/cassandra/db/data/191/191/191-191-hd-1-Data.db 
```

但是这个命令向我显示了异常，例如：

```
您必须提供一个 sstable
用法：org.apache.cassandra.tools.SSTableExport 
<sstable> [-k key [-k key [...]]
-x 键 [-x 键 [...]]]

```

如果有的话，任何人都可以纠正我的错误。我正在使用 Cassandra 1.1.2 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:29:37.530

只需将标准输出重定向到一个文件。您可以在此处找到重定向文档：http: [//www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx? mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)

例如：

```
 sstable2json H:/cassandra/db/data/191/191/191-191-hd-1-Data.db>mysstable.json 
```

然后内容将在一个名为`mysstable.json`.

# c# - 只写控制台命令的输出

> ID：14055064
> 
> 赞同：1
> 
> 时间：2012-12-27T12:52:59.847
> 
> 标签：c#, .net, console, outputstream

我正在尝试构建一个 .net 应用程序，它将运行一些控制台命令（如运行 phantomJs）并返回操作结果。但默认情况下，我会得到从开始`cmd.exe`到关闭的所有内容。有什么快速修复的想法还是我需要使用正则表达式？

这是我现在的代码：

```
System.Diagnostics.ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo("cmd.exe");
psi.UseShellExecute = false;
psi.RedirectStandardOutput = true;
psi.RedirectStandardInput = true;
psi.RedirectStandardError = true;

System.Diagnostics.Process proc = System.Diagnostics.Process.Start(psi);
System.IO.StreamReader sOut = proc.StandardOutput;

System.IO.StreamWriter sIn = proc.StandardInput;

sIn.WriteLine("phantomjs -v");
sIn.WriteLine("EXIT");

proc.Close();

string results = sOut.ReadToEnd().Trim();

sIn.Close();
sOut.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:59:32.433

PhantomJS 是一个可执行文件（根据他们的文档） - 为什么不直接执行它而不是运行 cmd.exe？这将避免 cmd.exe 噪音。

或者将phantomjs的输出重定向到一个日志文件并加载日志文件。

或者，如果您绝对必须使用 cmd.exe 并且无法重定向......我可能会在 phantomjs 周围抛出一些回声哨兵作为解析开始/停止点。

例如，

```
echo PARSE START
runcommand.exe
echo PARSE STOP 
```

但不要那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:01:21.057

而不是使用不同的流。为什么不使用`cmd`as`filename`并将其传递给`-c "phantomjs -v"`as 参数。然后用于`proc.StandardOutput.ReadToEnd()`抓取控制台中输出的所有内容。这应该忽略不需要的信息，因为它只读取执行命令的输出。

下面的代码可能不起作用，但应该给你一个大致的想法。

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = "cmd";
psi.Arguments = "/c \"phantomjs -v\"";
psi.UseShellExecute = false;
psi.RedirectStandardOutput = true;
// Optional other options

Process proc = Process.Start(psi);

string output = proc.StandardOutput.ReadToEnd();

proc.WaitForExit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:56:47.153

如果您在 unix 机器上：

```
sIn.WriteLine("phantomjs -v > /dev/null"); 
```

视窗：

```
sIn.WriteLine("phantomjs -v > NUL"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:42:38.333

我希望以下内容会有所帮助！

```
{

 Process xyProcess = new Process();

 xyProcess.StartInfo.FileName = "FilenameYouWant";
 xyProcess.StartInfo.UseShellExecute = false;
 xyProcess.StartInfo.CreateNoWindow = true;
 xyProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
 xyProcess.StartInfo.RedirectStandardInput = true;
 xyProcess.StartInfo.RedirectStandardOutput = true;
 xyProcess.StartInfo.RedirectStandardError = true;

 xyProcess.StartInfo.Arguments += "any arg1 you want ";
 xyProcess.StartInfo.Arguments += "any arg2 you want ";

 xyProcess.EnableRaisingEvents = true;
 xyProcess.OutputDataReceived += process_DataReceived;

 // Start the process
 xyProcess.Start();
 xyProcess.BeginErrorReadLine();
 xyProcess.BeginOutputReadLine();
 xyProcess.WaitForExit();

}
static private void process_DataReceived(object sender, DataReceivedEventArgs e)
{
    //Catch the process response here
} 
```

# java - 如何在另一个类中检索用户名和密码？

> ID：14055065
> 
> 赞同：0
> 
> 时间：2012-12-27T12:53:10.020
> 
> 标签：java, mysql, sql, database

以下 LOGINFORM 类存储用于登录 GUI 的正确用户名和密码。

登录课程....

```
public class LoginForm extends javax.swing.JFrame {

String username;
String password;

//rest of code here 
```

我如何检索要在该行中另一个类的准备语句中使用的 Loginform 用户名和密码（“SELECT * FROM AcademicInfo where Email=? and Password=?”）；替换 ? ，这将使我能够从 sql 数据库中获取特定字段？

检索类....

```
public void retrieveAcademic() {

try {
pst = con.prepareStatement("SELECT * FROM AcademicInfo where Username=? and Password=?");
rs = pst.executeQuery();
while (rs.next()) {
          title = (rs.getString(2));
          forename = (rs.getString(3));
          surname = (rs.getString(4));
          role = (rs.getString(5));
          room = (rs.getString(6));
          page = (rs.getString(7));
          hours = (rs.getString(8));
          phone = (rs.getString(9));
          mobile = (rs.getString(10));
          email = (rs.getString(11));

         } //end while
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:56:02.690

`Loginform`需要*引用*包含该`retrieveAcademic()`方法的类的实例。您如何创建/传递该引用在很大程度上取决于您的应用程序的结构（例如，通过依赖注入、简单的构造等）。

请注意，另一种方法是让您的 db 相关类引用`LoginForm`并调用适当的 getter，例如`getPassword()`和`getUsername()`

但是，我怀疑您想要某种包含这些凭据的*模型对象，以便其他组件可以在需要时/在需要时访问它们。*您的登录表单是暂时的，您将来可能有其他登录方式（例如，您可能有网络服务或类似服务）。我意识到这可能是想得很远，但你明白了。

然后传递用户名/密码的最简单方法是将它们作为 2 个参数传递，例如

```
db.retrieveAcademic(username, password); 
```

并在相应字段的方法调用[PreparedStatement.setString()中。](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)

（您可能希望将`username`and`password`字段包装到单独的对象`Credentials`或类似对象中，但那是以后的事了）

# php - 切换数据库php activerecord

> ID：14055067
> 
> 赞同：0
> 
> 时间：2012-12-27T12:53:41.610
> 
> 标签：php, activerecord, phpactiverecord

我正在使用[ActiveRecord](http://www.phpactiverecord.org)，我需要切换数据库。当我登录时，我选择了一个数据库。数据库是相同的模式。我试过了：

```
$connections = array(
   '1' => 'mysql://root:pass@localhost/db1;charset=utf8',
   '2' => 'mysql://root:pass@localhost/db2;charset=utf8',
   'test' => 'mysql://root:password@localhost/database_name'
 );

 $current_db = $_SESSION['db'] ?  $_SESSION['db'] : '2';

 ActiveRecord\Config::initialize(function($cfg) use ($connections, $current_db)
 {
   $cfg->set_model_directory(MODEL_PATH);
   $cfg->set_connections($connections);

   $cfg->set_default_connection($current_db);
 }); 
```

db '2' 是默认值。但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:01:47.903

[我在这里](http://www.phpactiverecord.org/boards/4/topics/765-optionally-selecting-connection-on-a-per-query-basis)找到了一个链接，其中包含用于切换数据库的出色解决方案

**编辑**`switch_connection`：我定义了一个在我的模型中调用的方法

```
 public static function switch_connection($name) {

     $cfg = ActiveRecord\Config::instance();    
     $valid = $cfg->get_connections();
     if ( ! isset($valid[$name])) {
       throw new ActiveRecord\DatabaseException('Invalid connection specified');
     }

     // Get the name of the current connection
     $old = self::$connection;

     $cm = ActiveRecord\ConnectionManager::instance();
     $conn = $cm::get_connection($name);
     static::table()->conn = $conn;

     return $old;
   } 
```

如果您在链接中看到，请注意我添加了`static`关键字。我认为这是更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:13:00.813

我一般使用这样的方法；

```
$all = new SomeModel(); // class of ActiveRecord\Model
$all->table()->class->setStaticPropertyValue("connection","test"); //test - defined in cfg
$all->table()->reestablish_connection();
//then use it as usual.
$all_data = $all->all(); 
```

# java - Greenfoot - 鼠标点击并移除一个对象

> ID：14055068
> 
> 赞同：1
> 
> 时间：2012-12-27T12:53:42.633
> 
> 标签：java, greenfoot

这里是 Java 新手，但我一直在尝试...

我试图在 Greenfoot 中实现这一点：我想让鼠标点击一个对象（Actor），它就会从世界上消失。到目前为止，这是我的代码：

```
public void act() 
    {
        disappear();
    }    

    public void disappear(){
        if(Greenfoot.mouseClicked(this)){
            getWorld().removeObject(this);
        }
    } 
```

据我了解，单击鼠标时，它将从世界中删除对象……但是对象仍然没有消失，我在这里缺少什么？

非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T13:05:50.553

您可以注册该操作

```
getWorld().removeObject(this); 
```

到鼠标点击事件列表。

也许向我们展示您系统的类架构可以为我们提供更多信息。

# javascript - Ajax 和会话变量

> ID：14055075
> 
> 赞同：0
> 
> 时间：2012-12-27T12:54:06.643
> 
> 标签：javascript, ajax, session, yii, popup

想象一下这个场景：

1.  我有一个链接可以启动一个 JavaScript 函数（其中有一个 Ajax 请求）。

2.  JavaScript 函数有一个由链接的 onclick='jsFunction(param)' 传递的参数。

3.  JavaScript 函数在将参数值设置为会话变量的控制器内的函数中发送参数值。

4.  然后，控制器中的函数会将会话变量的新值发送回 JavaScript 函数的 Ajax 请求。

5.  当数据到达 Ajax 请求时，将使用正在传递的数据调用另一个函数。

问题：

由于我正在谈论将会话变量的值传递给 Ajax 请求，我如何实时处理来自链接到第二个函数的数据？我想在这里发布代码，但是对于我只需要的信息来说太冗长了。

我的代码的当前状态是，我无法获取正确/最新的数据。相反，我得到以前的数据来自我点击的上一个链接。

是否有一个 Ajax 功能，如果第一个函数处理完最新数据，我只能继续执行下一个函数？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:01:34.613

您可以使用任何 jQuery AJAX 方法的回调来延迟另一个函数的执行，直到请求完成之后。

```
 $.post('/some/url', somedata, function(returnData) {
        // put the code you want to execute on completion here
   }); 
```

或者如果你已经定义了返回数据后要调用的函数，你可以这样写：

```
 $.post('/some/url', somedata, processData); 
```

# java - 未捕获的类型错误：对象# chrome 中没有“提交”方法

> ID：14055076
> 
> 赞同：1
> 
> 时间：2012-12-27T12:54:16.477
> 
> 标签：java, javascript, forms

我正在通过 ajax 提交表单，我收到上述错误。它仅适用于 Firefox，但不适用于 IE、Chrome、Safari、Opera。

这是我的表单提交：

```
document.forms.loginPage.action="<%=request.getContextPath()%>/colAuth?pAct=login";
document.forms.loginPage.submit(); 
```

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:17:13.100

如果需要用jquery实现，

```
$("#formid").submit(); 
```

或通过与 jquery 的链接，

```
<a href="javascript:;" onclick="$('#formid').submit();">submit</a> 
```

# binary - WSO2响应二进制？

> ID：14055081
> 
> 赞同：3
> 
> 时间：2012-12-27T12:54:41.577
> 
> 标签：binary, response, wso2

我在 WSO2 中公开了一个 http 服务。服务地址是`"http://172.30.60.73:8888/XMPPService/recieveMsg?param=yes"`，响应是`"notifyresult=000000"`。但是

在 WSO2 中，日志输出为：`<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><axis2ns7:binary xmlns:axis2ns7="http://ws.apache.org/commons/ns/payload">bm90aWZ5cmVzdWx0PTAwMDAwMDENCg==</axis2ns7:binary></soapenv:Body></soapenv:Envelope>`

我使用脚本中介：

```
 var symbol=mc.getPayloadXML().toString();
 var response=symbol.substring(13,symbol.length)
 mc.setPayloadXML(<p:createGroupResponse xmlns:p="http://iag.sdp.coship.com/xmpp/"><notifyresult>{ response }</notifyresult></p:createGroupResponse>); 
```

客户端是：

```
 <p:createGroupResponse xmlns:p="http://iag.sdp.coship.com/xmpp/">
     <notifyresult>Wx0PTAwMDAwMDENCg==</notifyresult>
  </p:createGroupResponse> 
```

似乎响应是二进制的。如何将此响应转换为`"notifyresult=000000"`. 任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:00:14.913

默认情况下，ESB 使用版本 4.6.0 中的直通传输。在直通中我们不构建消息..您可以切换到 NIO 传输并检查吗？编辑 axis2.xml ，传输侦听器，来自 NIO 传输的发送者

# c# - 制作多下载 Asp.net zipFile 类

> ID：14055082
> 
> 赞同：0
> 
> 时间：2012-12-27T12:54:43.580
> 
> 标签：c#, asp.net

要多次下载文件，我需要使用 ZipFile 类。我正在使用 .Net 2010，我需要对 ZipFile 类的引用，该类在 .Net 2012 中可用，我可以获得它的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:58:53.497

最简单的方法是使用[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)。[这个答案](https://stackoverflow.com/questions/8893891/creating-zip-file-using-sharpziplib)和[这些示例](https://github.com/icsharpcode/SharpZipLib/wiki/Zip-Samples)可能会帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:22:32.377

我建议使用[DotNetZip](http://dotnetzip.codeplex.com/)，IMO 它比 SharpZipLib 更容易使用，以下是使用示例：

[http://dotnetzip.codeplex.com/wikipage?title=Examples&referringTitle=Home](http://dotnetzip.codeplex.com/wikipage?title=Examples&referringTitle=Home)

# javascript - 在画布中上传图像文件并使用 node.js 中的 socket.emit 将其广播给客户端

> ID：14055083
> 
> 赞同：0
> 
> 时间：2012-12-27T12:54:47.820
> 
> 标签：javascript, node.js, socket.io

我只是喜欢将图像从服务器广播到客户端。

我可以在客户端的一端上传图像。但它并没有反映在另一边。我必须包括什么片段才能使这些东西起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:17:34.353

我认为您不应该将 Socket.IO 用于高负载流（如图片）。

试试这个：

在您的服务器中：

```
var socket = require('socket.io'),
    io = socket.listen(yourApp);

io.sockets.on('connection', function(client) {

  client.on('imageUploaded', function(imgURL) {
    client.broadcast.emit('imageBroadcast', imgURL);    
  });

}); 
```

在您的客户中：

```
var server = io.connect(yourServerIp);

// You image upload logic here. You can get the URL after uploading and then you call this function:
function imageUploaded(url){
  server.emit('imageUploaded', url);
}

server.on('imageBroadcast', function(imgURL){
  // Here you decide what to do with the image
}); 
```

# iphone - 从弹出视图导航到另一个视图控制器

> ID：14055085
> 
> 赞同：1
> 
> 时间：2012-12-27T12:54:57.040
> 
> 标签：iphone, ios

我的弹出视图中有一张桌子。但是当点击表格行时，它不会导航到另一个视图控制器。是否有任何直接的方法可以从弹出视图导航到另一个视图控制器？

提前致谢。

代码：：

```
ProductListView1 *p = [[ProductListView1 alloc]initWithNibName:@"ProductListView1" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:p animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:03:45.977

popover 的 ContentViewController，应该是一个导航控制器。

首先创建以rootViewController为tableViewController的navigationController（第一个要显示在popover中的控制器）

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:tableViewController]; 
```

然后在 popover 中显示 navigationController

```
[popOver setContentViewController:navigationController animated:YES]; 
```

然后你可以在 tableViewController 的 didSelectRowAtIndexPath: 委托方法中推送另一个控制器

```
ProductListView1 *p = [[ProductListView1 alloc]initWithNibName:@"ProductListView1" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:p animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:17:34.900

你试过了吗`[self presentViewController:p animated:YES completion:nil];`

如果你没有 a `UINavigationController`，你就不能推 a `UIViewController`。

另请注意，如果您将 a 推入`UIViewController`a `UIPopoverController`，它只会扩大 UIPopover。如果您想要显示一个全新的视图，那么您必须使用`presentViewController:`并且您可以将 UIToolbar 放到 UINavigationController 到该模态视图上。

# jquery - CRUD 操作不适用于数据库 kendo ui web

> ID：14055090
> 
> 赞同：1
> 
> 时间：2012-12-27T12:55:27.177
> 
> 标签：jquery, kendo-ui

我正在使用 Kendo 网格来显示员工数据并执行创建、更新和删除。读取操作执行得很好，但是剩下的三个操作没有反映回数据库

这是我尝试过的代码

```
<div id="grdCRUD">
</div>
    <script type="text/javascript">
        $(document).ready(function () {
 dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url: "GridWebService.asmx/GetData"
                },
                update: {
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: function (EmpNames) {
                        return "GridWebService.asmx/UpdateEmp" + EmpNames.eid
                    },
                    dataType: "json"
                },
                destroy: {
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url: "GridWebService.asmx/DeleteEmp"
                },
                create: {
                    url: "",
                    dataType: "jsonp"
                },
                parameterMap: function (options, operation) {
                    if (operation !== "read" && options.models) {
                        return { models: kendo.stringify(options.models) };
                    }
                }
            },
            batch: true,
            pageSize: 6,
            schema: {
                data: "d",
                model: {
                    id: "eid",
                    fields: {
                        ename: { validation: { required: true} },
                        age: { type: "number", validation: { required: true, min: 1} },
                        salary: { type: "number", validation: { required: true, min: 1} }
                    }
                }
            }
        });
        $("#grdCRUD").kendoGrid({
            dataSource: dataSource,
            pageable: {
                refresh: true,
                pageSizes: true
            },
            height: 300,
            toolbar: ["create"],
            columns: [
                                    { field: "ename", title: "EmployeeName", width: "150px" },
                                    { field: "age", title: "EmployeeAge", width: "150px" },
                                    { field: "salary", title: "EmployeeSalary", width: "100px" },
                                    { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" }
                                 ],
            editable: "popup"
        });
 });
</script> 
```

这是我的网络服务

```
[WebMethod]
public List<EmpNames> GetData()
{
    SqlDataAdapter da = new SqlDataAdapter("select * from Emp", con);
    DataSet ds = new DataSet();
    da.Fill(ds, "emp");
    return LstEmpNames(ds);
}

public List<EmpNames> LstEmpNames(DataSet ds)
{
    List<EmpNames> objenamelst = new List<EmpNames>();
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        EmpNames objemp = new EmpNames();

        objemp.eid = Convert.ToInt32(ds.Tables[0].Rows[i][0]);
        objemp.ename = ds.Tables[0].Rows[i][1].ToString();
        objemp.age = Convert.ToInt32(ds.Tables[0].Rows[i][2]);
        objemp.salary = Convert.ToInt32(ds.Tables[0].Rows[i][3]);
        objenamelst.Add(objemp);
    }
    return objenamelst;
}
[WebMethod]
public DataSet DeleteEmp(int id)
{
    con.Open();
    SqlCommand cmd = new SqlCommand("delete  Emp where eid=" + id, con);
    cmd.ExecuteNonQuery();
    con.Close();
    return null;
}

[WebMethod]
public DataSet CreateEmp()
{
    con.Open();
    SqlCommand cmd = new SqlCommand("Insert into Emp values", con);
    cmd.ExecuteNonQuery();
    con.Close();
    return null;
}

[WebMethod]
public DataSet UpdateEmp(int eid)
{
    con.Open();
    SqlCommand cmd = new SqlCommand("update emp set ename='SHANKI',age=25,salary=6000 where eid=1", con);
    con.Close();
    return null;
} 
```

是我错过了什么，或者如果代码有误，您能否提供任何示例代码非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:14:35.260

这是一个使用 ASP.NET Web 服务的完整工作的 CRUD 应用程序：[https ://github.com/telerik/kendo-examples-asp-net/tree/master/grid-web-service-crud](https://github.com/telerik/kendo-examples-asp-net/tree/master/grid-web-service-crud)

您的实现的问题是方法的签名 - 检查链接的示例方法的外观。

关于从 JavaScript 调用 ASP.NET Web 服务的详细说明可以在这篇优秀的博客文章中找到：http: [//encosia.com/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

# android - 仅使用图像名称获取字节数组

> ID：14055091
> 
> 赞同：0
> 
> 时间：2012-12-27T12:55:33.220
> 
> 标签：android, uiimageview, bytearray

我陷入了困境。我在可绘制文件夹中有一组 10 张图像。在我的代码中，我只有图像名称。例如“elephant.png”，我想要图像的**字节数组**（可绘制）对应于图像名称。

```
String imageName = getResources().getResourceEntryName(GroupIconAdapter.mThumbIds[position]); 
```

从这里我得到图像名称，我想要字节数组。

有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:05:54.387

尝试：

```
 // get Drawable id 
int drawableid =getResources().getIdentifier(GroupIconAdapter.mThumbIds[position], 
                       "drawable",this.getPackageName());

Drawable drawable_img = getResources().getDrawable(drawableid);  // get Drawable

Bitmap drawable_bitmap = ((BitmapDrawable)drawable_img).getBitmap();
ByteArrayOutputStream outstream = new ByteArrayOutputStream();
drawable_bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outstream);

// get byte array here
byte[] bytearray_of_drawable = outstream.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:01:10.743

将此图像放入您的assets目录中，您可以通过这种方式访问

```
String url = "file:///android_asset/elephant.png"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T16:45:38.167

我认为这种方式应该向右移动

首先我应该把我的图片放在资产文件夹中，然后制作相同的drawbles

```
String filePath="file:///android_asset/images/test.png";
Drawable d = Drawable.createFromPath(filePath); 
```

然后进行相应的流式传输以制作一个字节数组-

```
Bitmap drawable_bitmap = ((BitmapDrawable)d).getBitmap();
ByteArrayOutputStream outstream = new ByteArrayOutputStream();
drawable_bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outstream);

// get byte array here
byte[] bytearray_of_drawable = outstream.toByteArray(); 
```

这样我们就可以得到图片名称的drawable和对应的字节数组。

谢谢

# android - Android 通用 ArrayAdapter

> ID：14055093
> 
> 赞同：3
> 
> 时间：2012-12-27T12:55:41.567
> 
> 标签：android, android-arrayadapter

我有多个类，它们都扩展了一些 BasicDataModel：

```
public class NewsItem extends BasicDataModel
public class PhotosItem extends BasicDataModel 
```

等等。所以我需要为所有这些对象制作 ArrayAdapter，我想知道是否可以制作一些通用的 ArrayAdapter 来适应我所有的对象。到目前为止，我试图使

```
public class MyAdapter extends ArrayAdapter<BasicDataModel> 
```

但只要我通过 ArrayList，例如，这不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T12:59:08.803

尝试

```
public class MyAdapter<T extends BasicDataModel> extends ArrayAdapter<T> 
```

并使用

```
MyAdapter<NewsItem> news; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-18T08:58:13.637

我尝试了 Nikita Beloglazov 的建议：

```
public class MyAdapter<T> extends ArrayAdapter<T extends BasicDataModel> 
```

但发现它不会编译。

然后我尝试了：

```
public class MyAdapter<T extends BasicDataModel> extends ArrayAdapter<T> 
```

这工作得很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T05:05:19.143

试试 PIArrayAdapter。减少您的代码大小和再次维护它的头痛。只需使用简单的注释即插即用

拉它@https [://github.com/peeyush18/CustomAdapter.git](https://github.com/peeyush18/CustomAdapter.git)

或在 [https://github.com/peeyush18/CustomAdapter查看](https://github.com/peeyush18/CustomAdapter)

# javascript - 按键事件上的 preventDefault() 不起作用

> ID：14055096
> 
> 赞同：17
> 
> 时间：2012-12-27T12:55:50.907
> 
> 标签：javascript, jquery, google-chrome, internet-explorer-8

我不能`preventDefault()`去上班。

以下是我尝试过的一些不同的代码变体：

第一的：

```
$(document).keyup(function (evt) {
    var charCode = (evt.which) ? evt.which : event.keyCode;
    if (charCode == 192) {
        alert('192');
        return false;
    }
}); 
```

第二：

```
$(document).keyup(function (evt) {
    var charCode = (evt.which) ? evt.which : event.keyCode;
    if (charCode == 192) {
        alert('192');
        evt.preventDefault();
    }
}); 
```

第三：

```
$(document).keyup(function (evt) {
    var charCode = (evt.which) ? evt.which : event.keyCode;
    if (charCode == 192) {
        alert('192');
        evt.preventDefault();
        return false;
    }
}); 
```

只有警报有效。
一切都可以在 Opera 上运行，但不能在 Chrome 和 IE 上`keydown`运行`keypress`。在`keypress`脚本上不起作用。 `$('#thetext').keydown(function(evt){});`两者都不起作用。
这是整个代码：[http ://bbullett.tk/test/kakey.html](http://bbullett.tk/test/kakey.html)

```
Key 192 = ` 
```

我正在尝试插入一些文本或符号而不是`

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-27T13:03:07.367

监听`keyup`事件来不及调用`preventDefault`，尝试监听`keypress`或`keydown`代替。

```
$('input[type=text], textarea').on('keydown', function(event){
    if (event.which == 192) {
        console.log('192');
        event.preventDefault();
    }
}); 
```

请注意，jQuery 规范化`which`属性并且它是跨浏览器的。

[http://jsfiddle.net/763ys/](http://jsfiddle.net/763ys/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T13:03:49.597

`.keyup()`;没有默认行为 它在触发默认行为的按键后触发。请改用`.keydown() or`.keypress()`。

**来源：** [http ://api.jquery.com/category/events/keyboard-events/](http://api.jquery.com/category/events/keyboard-events/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T13:04:47.993

您正在使用 JQuery，它规范了浏览器之间的差异，因此您只需要检查 evt.which 属性。请参阅 JQuery 文档：[http ://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

正如其他人所说 - keyup 为时已晚，无法停止密钥的处理。请改用 keydown 或 keypress 。[http://api.jquery.com/category/events/keyboard-events/](http://api.jquery.com/category/events/keyboard-events/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:04:21.393

在这里查看工作示例[http://jsfiddle.net/WGSvm/](http://jsfiddle.net/WGSvm/)

在您使用的所有三个示例中

```
$(document).keyup(function (evt) {  }); 
```

我会说使用特定的 div id 而不是`$(document).keyup(function (evt) { });`

喜欢`$("#DivIdName").keyup(function (evt) { });` 并且也`onkeypress` 严格使用，因为如果你使用`onkeyup` 它，它已经执行了它的默认打印任务或其他任何任务。

# ruby-on-rails - 与垃圾邮件错误匹配后是否可以保留输入数据？

> ID：14055097
> 
> 赞同：0
> 
> 时间：2012-12-27T12:55:54.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的情况下，如果用户连续提交，它将与垃圾邮件警报相匹配。
这工作正常。但它刷新了所有字段，所有字段都变为空。
我怎样才能避免这种情况？

**控制器**

```
 @user = User.find_by_username(params[:id])
    @post = @user.comment_threads.last

    if @post
        last_time = @post.created_at
        if Time.now - last_time <= 10.second
            redirect_to :controller => 'users', :action => 'show', :id => @user.username
            flash[:notice] = "You cannot spam!"   
            return
        end
    end

    @user_who_commented = current_user
    @comment = Comment.build_from( @user, @user_who_commented.id, params[:users][:body] )
    @comment.comment_icon = params[:users][:comment_icon]
    @comment.save
    redirect_to :controller => 'users', :action => 'show', :id => @user.username
    flash[:notice] = "comment added!" 
```

**看法**

```
<%=form_for :users, url: url_for( :controller => :users, :action => :add_comment ) do |f| %>

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div>
    <div class="field">
    <%= f.file_field :comment_icon %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div>

<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:25:10.843

您应该将垃圾邮件控制逻辑移至模型。

```
validate :spam_validation

 def spam_validation
   if !user_id.blank?
     post = user.comment_threads.last
     last_time = post.created_at
     if Time.now - last_time <= 10.second
       errors.add(:base, "You cannot spam!")
     end
   end
 end 
```

# ios - 如何传递数据类型为 CMTime 的浮点值？

> ID：14055098
> 
> 赞同：10
> 
> 时间：2012-12-27T12:55:59.333
> 
> 标签：ios, objective-c, iphone, audio, mixing

我正在创建一个应用程序，我必须在其中混合歌曲。我已经完成了这个，但问题是当我使用以下函数时。

```
- (BOOL)insertTimeRange:(CMTimeRange)timeRange ofTrack:(AVAssetTrack *)track atTime:(CMTime)startTime error:(NSError **)error; 
```

我必须在**atTime参数中传递****CMTime**类型值，但它不需要浮点值，我必须以某个浮点值添加另一首歌曲。有可能吗？

 *** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T12:59:55.117

您可以使用其中一项`CMTimeMake...()` [功能](https://developer.apple.com/library/mac/documentation/CoreMedia/Reference/CMTime/Reference/reference.html#//apple_ref/doc/uid/TP40009748-CH201-SW10)。您必须提供时间点和时间刻度值。前者是64位整数；您可以截断或四舍五入将`float`其转换为整数，或使用必要的高时间刻度：

```
CMTime tm = CMTimeMake(53425, 10000); // @ 5.3425 sec 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-09T07:22:56.927

在 Swift 4.2 和 Xcode 10.1 中

```
CMTimeMake(value: 53425, timescale: 10000)// @ 5.3425 sec 
```**

# php - PHP会话销毁功能在Opera中不起作用

> ID：14055103
> 
> 赞同：1
> 
> 时间：2012-12-27T12:56:17.763
> 
> 标签：php, session

**我用 PHP 制作了一个登录系统，并且在Google Chrome**和**Mozilla**中一切正常。但是在 **Opera**中，当我单击注销时，它可以正常工作，之后如果我在浏览器中按下后退按钮，那么它会进入上一页（`profile page`）并显示该页面中的内容，即使我注销但如果我刷新页面然后会话被正确销毁。我使用以下代码`session destroy`

```
session_start();
$_SESSION = array();
session_destroy();
session_unset(); 
```

我处于关键阶段，请帮助我提供正确的建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:00:29.317

插入您不想被缓存的页面的头部。

```
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache"> 
```

# python - Python regex：在字符串中出现模式之前替换一些字符

> ID：14055106
> 
> 赞同：0
> 
> 时间：2012-12-27T12:56:27.280
> 
> 标签：python, regex, string, replace

我在使用 python 的 3 正则表达式替换字符串中的字符时遇到问题。我能够找到模式出现，但我想替换模式中第一个出现的字符。不幸的是，我正在替换整个模式。另一方面 - 我在使用正则表达式来完成这项任务时可能是错误的。这是我所拥有的：

```
>>> my_table1='\nParametr JednostkaNormaGodzinaŚrednia(1)123456789101112131415161718192021222324 \nDwutlenek siarki (SO2) µg/m3 350 56 53 50 51 51 44 41 36 39 42 34 30 34 33 26 25 24 23 24 25 21 21 22 24 35 \nTlenek azotu (NO) µg/m3 30 30 27 29 44 98 192 
```

我想要做的是插入'，'或';' 数之间。我不能简单地用逗号替换所有空格，因为我不想拆分这部分：`\nDwutlenek siarki (SO2) µg/m3`. `r'\s\d+'`所以我想用正则表达式 ( )来查找空格和数字的出现。这会正确找到所有实例。现在我想使用 sub 函数将 \s 替换为 ',' 但我不知道如何将 \s 从模式中隔离出来。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:03:46.607

使用lookbehind/lookahead，像这样：

```
p = re.compile(r'(?<=\d)\s(?=\d)')
p.sub(';', my_table1) 
```

正向后视`(?<=\d)`匹配数字 ( `\d`) 之后的任何内容，但不匹配数字本身；`\s`匹配单个空白字符；正向前瞻`(?=\d)`匹配任何后跟数字的内容。因此，这会将两位数之间的任何单个空格替换为`;`. 请注意，lookbehind/ahead 需要是固定长度（所以你不能使用类似的东西`(?<=\d+)`）。

在您的情况下，这应该足够了`r'\s(?=\d)'`，可能不需要向后看。

# jquery - 使用 caroufredsel 滚动时如何添加一些自定义动画？

> ID：14055107
> 
> 赞同：0
> 
> 时间：2012-12-27T12:56:27.147
> 
> 标签：jquery, slideshow, scroller, caroufredsel

我想在缩略图滚动时添加一些自定义动画。例如，当用户单击*下一个*按钮时，我想要离开屏幕淡出的缩略图和出现在屏幕上淡入的缩略图。

从示例中我知道这是要使用的功能：

```
 onBefore: function( data ) {} 
```

## 小提琴链接

这是一个没有自定义动画 **[的演示。](http://jsfiddle.net/ignaciocorreia/F5MW7/)**

## 例子

**[类似的东西。](http://coolcarousels.frebsite.nl/c/45/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:00:32.337

在这里，我设法为 Fade 和 Size 设置动画，但还有一个错误。图像不会恢复可见。

## 添加：

```
var defaultCss = {
    opacity: 0,
    width: 0,
    height: 0
};
var selectedCss = {
    opacity: 1,
    width: "77px",
    height: "77px"
};    
var scroolItems = 6; 
```

## 和：

```
scroll: {
            items: scroolItems ,
            duration: 1000,
            onBefore: function( data ) {
                data.items.old.find('img').animate(defaultCss);
                data.items.visible.eq(scroolItems ).find('img').animate(selectedCss);
            }
        } 
```

## [演示链接](http://jsfiddle.net/ignaciocorreia/F5MW7/6/)

# android - 如何伪造屏幕分辨率

> ID：14055110
> 
> 赞同：1
> 
> 时间：2012-12-27T12:56:34.637
> 
> 标签：android

有没有办法让 Android 相信当前设备的屏幕尺寸（像素，而不是密度）小于实际的显示尺寸（同样是像素，而不是密度）？

我需要以下内容：在具有 1280x720 像素（例如）显示器的设备（不是模拟器）上，我只想使用 800x480 像素 - 导致主屏幕连接到其中一个角落，显示器的其余部分为黑色（或其他任何内容）颜色）。

这与屏幕分辨率无关，因为更改分辨率会填满整个屏幕——这是我不想要的（见上文）。

关于 SO 的类似问题尚未得到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:05:17.057

`DisplayMetrics metrics = new DisplayMetrics();` `getWindowManager().getDefaultDisplay().getMetrics(metrics);`

`metrics.heightPixels;`
`metrics.widthPixels;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:07:29.597

您可以修复主布局的高度和宽度

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_height="800px"
    android:layout_width="480px">
    ...
    ...

</RelativeLayout> 
```

# c# - 如何使数据服务发送一个带有凭据的请求而不是两个？

> ID：14055112
> 
> 赞同：2
> 
> 时间：2012-12-27T12:56:41.233
> 
> 标签：c#, wcf-data-services

我有 Windows 授权的 OData Web 服务。

```
connection = new BaseWCFService.ASUTBEntities(new Uri("pathtoservice"));
connection.Credentials = CredentialCache.DefaultCredentials;
string SID = System.Security.Principal.WindowsIdentity.GetCurrent().User.Value;
var finduser = (from o in IS.connection.User
                where o.SID == SID
                select o).ToList(); 
```

此代码发出两个请求而不是一个请求。首先，它发送简单的 text/html 请求，得到 401 错误，然后发送带有身份验证的普通 atom 请求：

![在此处输入图像描述](../Images/9d9ca706af140b6c8a4f1e7e8fdacca2.png)

如何让他通过身份验证发出一个请求并避免发送 text/html 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:13:15.447

我只是猜测，但我会说构造函数已经连接到 web 服务。

也许是这样的：

```
new BaseWCFService.ASUTBEntities(new Uri("pathtoservice"), CredentialCache.DefaultCredentials); 
```

或者

```
connection = new BaseWCFService.ASUTBEntities();
connection.Credentials = CredentialCache.DefaultCredentials;
connection.Url = new Uri("pathtoservice"); 
```

但我再次猜测。但是，由于第一个请求具有未经授权的权限，因此承包商似乎在没有凭据的情况下进行连接。在我重写该函数并在执行基本函数之前先添加凭据之前，有一个类似的自定义函数，它已解决。（在我的情况下，我仍然需要两个请求，因为我想从初始化中获得结果）

# mysql - mysql匹配多个单词

> ID：14055116
> 
> 赞同：16
> 
> 时间：2012-12-27T12:57:19.590
> 
> 标签：mysql, full-text-search

下面是我坚持使用的示例 sql，它不会返回名为“iphone 4s”的产品，它会返回 10 个其他结果。任何帮助都会非常感谢

## 第一个 sql 示例

```
SELECT * FROM products 
          WHERE match(desc) against('+iphone +4s' IN BOOLEAN MODE) LIMIT 10"; 
```

结果：包含单词“iphone”和“4s”

## 第二个 sql 示例

```
SELECT * FROM products 
           WHERE match(desc) against('+iphone 4s' IN BOOLEAN MODE) LIMIT 10"; 
```

结果：包含单词“iphone”，但如果它们还包含“4s”，则排名更高

## 第三个 sql 示例

```
SELECT * FROM products 
           WHERE match(desc) against('iphone 4s' IN BOOLEAN MODE) LIMIT 10"; 
```

结果：包含单词“iphone”或“4s”

我要搜索的是“iphone 4s”，但它带有其他结果，例如“iphone 很好，但是 4s...”、“新的 iphone 5 已发布...”、...

谁能帮我解决它？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T13:11:04.583

要匹配一个精确的短语，只需使用双引号将要匹配的短语括起来；

```
SELECT * 
FROM products 
WHERE MATCH(desc) 
      AGAINST('"iphone 4s"' IN BOOLEAN MODE) 
LIMIT 10 
```

[更多信息在手册页](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:13:40.670

使用[正则表达式](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)

```
SELECT * FROM products 
WHERE desc REGEXP 'iphone[[. .]]*4s'
LIMIT 10; 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/82dd2/1)

# php - 不允许安装 PEAR 模块的主机的数据库抽象选项

> ID：14055121
> 
> 赞同：0
> 
> 时间：2012-12-27T12:57:59.307
> 
> 标签：php, pear, mdb2, database-abstraction

预期主机不允许 PEAR 模块，但 VPS/专用帐户除外。负担不起在业余爱好网站上的 VPS 上每年花费 2000-3000 美元，因此该选项已失效。

我想添加一些数据库抽象并使用 MDB2 在本地重新编码我的大部分站点，然后再遇到当前主机的问题（堆叠服务器、旧硬件、性能缓慢）。

是否有在没有本机 PEAR 模块的情况下实现 DB 抽象的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T01:13:00.737

> 是否有在没有本机 PEAR 模块的情况下实现 DB 抽象的选项？

*PECL*模块需要编译和安装，因此需要系统管理员干预。

*PEAR*模块是纯 PHP 的。[您可以简单地从http://pear.php.net/](http://pear.php.net/)获取 tar 文件，解压缩它们，然后将内容推送到需要的地方。假设您需要的模块具有合理的许可，您甚至可以将它们与您现有的源代码捆绑在一起。

也就是说，您**不**应该在当今时代使用 PEAR 的 MDB2。使用 PDO。它是 PHP 原生的，可以完成 MDB2 所做的大部分事情，只是没有那么*糟糕*。方便的方法很容易通过简单的继承来添加。如果您确实需要一个 SQL*构建器*，那么 Zend Framework (Zend Db Select) 中包含的那个并不算太简陋。

# vb.net - Visual Basic 控制台应用程序只循环一次

> ID：14055124
> 
> 赞同：0
> 
> 时间：2012-12-27T12:58:25.243
> 
> 标签：vb.net, loops, console, while-loop

对这里的一切都是新的，当我发现我的程序只循环一次时，我正在玩弄 VB 2012。帮助将不胜感激。

```
Module Module1
    Dim i As Integer = 0

    Sub Main()
        While i < 3
            i = i + 1
            Console.WriteLine(i)
            Console.ReadLine()
        End While
        End
    End Sub
End Module 
```

编辑：是的，这里的人是对的，用那个代码是不可能的，所以我搞砸了一点，想出了一个解决方案

```
Module Module1
    Dim i As Integer = 0
    Sub Main()
        While i < 3
            i = i + 1
            Console.WriteLine(i)
            System.Threading.Thread.Sleep(1000)
        End While
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:01:04.037

你为什么要多加`End`？你确定这不是罪魁祸首。

```
While i < 3
    i = i + 1
    Console.WriteLine(i)
    Console.ReadLine()
End While
End  <-- not required. 
```

# file - 如何使文件上传强制yii

> ID：14055125
> 
> 赞同：0
> 
> 时间：2012-12-27T12:58:34.490
> 
> 标签：file, file-upload, yii, validation

我对此有点新意，我有一个带有属性 file_id 的模型，但它会显示为 File。我应该强制执行..但是当用户上传文件时，我将文件路径和所有文件都存储在文件表中。并从该表中获取 id 并将其存储在我的模型中。

谁能告诉我如何使 **文件上传强制创建而不是更新**

我的文件上传代码是：

```
 <?php echo $form->labelEx($model,'file'); ?>
                <?php echo $form->fileField($model, 'file');?>
                <?php echo $form->error($model,'file'); ?>` 
```

它工作正常。但我需要对当前模型强制执行此操作。我需要在文件模型或当前模型的规则功能中使其成为必需吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:51:11.637

最简单的方法是在模型规则中：

```
array('file', 'required','on'=>'insert'), 
```

然后它只需要插入而不是更新。

另一种方法是使用 before 或 afterValidate 方法：

```
protected function afterValidate(){
    if($this->isNewRecord){
        if(!isset($this->file)){ //Not sure about handling files if this works.
            $this->addError("file","Not file selected.  Please choose a file to upload.");
            return false;
        }
    }
    return parent::afterValidate();
} 
```

# c++ - 调整场景节点的大小

> ID：14055127
> 
> 赞同：0
> 
> 时间：2012-12-27T12:58:37.857
> 
> 标签：c++, scale, ogre

我在我的 ogre 项目中使用 Prefab Cube，我想将其设置为 10x10x10。我看到的唯一方法是使用`setScale`，但我不知道场景节点的初始尺寸。我在食人魔论坛上发现了一些旧主题，但它们依赖于边界框，而边界框显然随着时间而改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:45:21.007

如果您查看 OGRE 源代码，您可以看到默认大小为 100。

有关参考，请参见*OgrePrefabFactory.cpp*中的*createPlane()*、*createCube()*和*createSphere()*。

# ruby-on-rails - 在 Rails 视图中进行查询的性能影响

> ID：14055133
> 
> 赞同：1
> 
> 时间：2012-12-27T12:58:59.483
> 
> 标签：ruby-on-rails

在 Rails 中，我们通常会遇到从视图（甚至是助手）触发一些查询的情况。例如，如果我想在我的页面中添加一个选择框，我会写如下内容；

```
<%= collection_select(:person, :city_id, City.all, :id, :name) %> 
```

这个例子取自 Rails Guides。在这里，我们使用了“City.all”而不是实例变量。我的问题是，这会对我的应用程序的性能产生任何影响吗？

以下是做同样事情的更好方法吗？为什么？
在控制器中：

```
@cities = City.all 
```

然后在视图中：

```
<%= collection_select(:person, :city_id, @cities, :id, :name) %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:56:00.463

实际上是有区别的，有时甚至是必不可少的。渲染速度（响应时间）很大程度上取决于注入的密集查询。解释为什么会发生这种情况可能很乏味，但将其作为一个规则更容易：以这种方式设计您的应用程序，其中 ActionView 与准备好的（加载到内存中的）对象一起工作。

而且我认为 ActionView - 是 Rails 的一大瓶颈（尤其是 ERB 编译）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:05:09.070

它不会对应用程序本身产生**特殊**影响，无论是视图还是控制器，因为对于系统而言，它只是一样 --> 发出查询。但这是一种根本不被鼓励的做法，那么代码隔离和模块化的整个概念就会被折腾。

出于这个原因，我建议在视图中的查询上使用实例变量。

# php - 使用 Data URI Scheme 将图像数据导出到 Excel（在我的例子中，在 PHP 中）

> ID：14055134
> 
> 赞同：3
> 
> 时间：2012-12-27T12:58:58.943
> 
> 标签：php, html, export-to-excel

在过去的几个小时里，我一直在尝试将图像数据放入 Excel 工作表中。

有些人可能知道，Excel 可以导入 HTML 页面。

现在，这一切都很好地与桌子一起工作。虽然，当我想像这样添加一些图像数据时：

```
<img src="data:[mime-type];[compression-type],[data]"> 
```

我收到一个红色 X 和以下消息：

```
The image cannot be displayed. Your computer may not have enough memory... 
```

# android - 如何在 android webview 中渲染大尺寸的 pdf 文档？

> ID：14055136
> 
> 赞同：5
> 
> 时间：2012-12-27T12:59:05.683
> 
> 标签：android

在我的应用程序中，我正在显示位于服务器中的 pdf 文档。我能够显示一个小尺寸的样本 pdf。但我的 pdf 文档大小是 25mb。当我尝试显示我的 pdf 时，它显示错误消息，指出文件太大。如何在android中显示更大尺寸的pdf doc？

在这方面的任何建议将不胜感激。

我的代码：

```
WebView webView = (WebView) findViewById(R.id.web);
webView.setWebViewClient(new WebViewClient());
webView.addView(webView.getZoomControls());
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("http://www.stluciadance.com/prospectus_file/sample.pdf");
webUrl="http://www.stluciadance.com/prospectus_file/mydoc.pdf";
webView.loadUrl("https://docs.google.com/gview?embedded=true&url="+ webUrl); 
```

![在此处输入图像描述](../Images/b2a8622f367a54cd6885098395eed43b.png)

# c++ - 通过仅循环一次来组合 C++ 标准算法

> ID：14055138
> 
> 赞同：8
> 
> 时间：2012-12-27T12:59:11.020
> 
> 标签：c++, algorithm, stl, c++11, std

我目前已启动并运行此代码：

```
string word="test,";
string::iterator it = word.begin();
for (; it != word.end(); it++)
{
    if (!isalpha(*it)) {
        break;
    }
    else {
       *it = toupper(*it);
    }
}
word.erase(it, word.end());
// word should now be: TEST 
```

我想通过以下方式使其更紧凑和可读：

1.  组合现有的标准 C++ 算法 (*)
2.  只执行一次循环

(*) 我假设结合现有算法使我的代码更具可读性......

# 替代解决方案

除了按照`transform_until`jrok 的建议定义自定义算法之外，还可以定义一个自定义迭代器适配器，该适配器将使用底层迭代器进行迭代，但通过在返回之前修改底层引用来重新定义 operator*()。像这样的东西：

```
template <typename Iterator, typename UnaryFunction = typename Iterator::value_type (*)(typename Iterator::value_type)>
class sidefx_iterator: public std::iterator<
                         typename std::forward_iterator_tag,
                         typename std::iterator_traits<Iterator>::value_type,
                         typename std::iterator_traits<Iterator>::difference_type,
                         typename std::iterator_traits<Iterator>::pointer,
                         typename std::iterator_traits<Iterator>::reference >
{
  public:
    explicit sidefx_iterator(Iterator x, UnaryFunction fx) : current_(x), fx_(fx) {}

    typename Iterator::reference operator*() const { *current_ = fx_(*current_); return *current_; }
    typename Iterator::pointer operator->() const { return current_.operator->(); }
    Iterator& operator++() { return ++current_; }
    Iterator& operator++(int) { return current_++; }
    bool operator==(const sidefx_iterator<Iterator>& other) const { return current_ == other.current_; }
    bool operator==(const Iterator& other) const { return current_ == other; }
    bool operator!=(const sidefx_iterator<Iterator>& other) const { return current_ != other.current_; }
    bool operator!=(const Iterator& other) const { return current_ != other; }
    operator Iterator() const { return current_; }

  private:
    Iterator current_;
    UnaryFunction fx_;
}; 
```

当然，这仍然很原始，但它应该给出想法。使用上述适配器，我可以编写以下内容：

```
word.erase(std::find_if(it, it_end, std::not1(std::ref(::isalpha))), word.end()); 
```

预先定义以下内容（可以通过一些模板魔术来简化）：

```
using TransformIterator = sidefx_iterator<typename std::string::iterator>;
TransformIterator it(word.begin(), reinterpret_cast<typename std::string::value_type(*)(typename std::string::value_type)>(static_cast<int(*)(int)>(std::toupper)));
TransformIterator it_end(word.end(), nullptr); 
```

如果标准包含这样的适配器，我会使用它，因为这意味着它完美无缺，但由于情况并非如此，我可能会保持我的循环不变。

这样的适配器将允许重用现有算法并以今天不可能的不同方式混合它们，但它也可能有缺点，我现在可能会忽略......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T14:06:24.647

我认为没有一种干净的方法可以使用单一的标准算法来做到这一点。我所知道的没有一个使用谓词（您需要一个谓词来决定何时提前中断）并允许修改源序列的元素。

如果您真的想以“标准”方式进行操作，您可以编写自己的通用算法。让我们称之为，嗯，`transform_until`：

```
#include <cctype>
#include <string>
#include <iostream>

template<typename InputIt, typename OutputIt,
         typename UnaryPredicate, typename UnaryOperation>
OutputIt transform_until(InputIt first, InputIt last, OutputIt out,
                         UnaryPredicate p, UnaryOperation op)
{
    while (first != last && !p(*first)) {
        *out = op(*first);
        ++first;
        ++out;
    }
    return first;
}

int main()
{
    std::string word = "test,";
    auto it =
    transform_until(word.begin(), word.end(), word.begin(),
                    [](char c) { return !::isalpha(static_cast<unsigned char>(c)); },
                    [](char c) { return ::toupper(static_cast<unsigned char>(c)); });
    word.erase(it, word.end());
    std::cout << word << '.';
} 
```

这是否比你所拥有的更好是有争议的 :) 有时一个简单的 for 循环是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:09:41.497

在更好地理解了您的问题之后，我有了一个可能可行但需要[Boost](http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29)的想法。

您可以使用调用所有字符的[transform_iterator](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/transform_iterator.html)`toupper`并将其用作 or 的输入迭代`find_if`器`remove_if`。不过，我对 Boost 不够熟悉，无法提供示例。

正如@jrok 指出的那样，transform_iterator 只会在迭代期间转换值，而不会实际修改原始容器。为了解决这个问题，您需要复制到一个新的序列，而不是在相同的序列上操作，使用类似[remove_copy_if](http://www.cplusplus.com/reference/algorithm/remove_copy_if/)的东西。只要谓词不正确，就会复制，所以`std::not1`需要。这将取代`remove_if`案件。

用于`std::copy`复制直到迭代器返回`std::find_if`以使其他情况正常工作。

最后，如果您的输出字符串为空，则输出需要一种`std::inserter`迭代器。

# mongodb - 带身份验证的 MongoDB

> ID：14055141
> 
> 赞同：1
> 
> 时间：2012-12-27T12:59:31.540
> 
> 标签：mongodb

我正在尝试通过身份验证让 MongoDB 在我的本地主机（Windows）上运行。

为此，我首先必须添加一个用户，对吗？我通过使用以下命令启动守护程序来做到这一点：

```
C:\[…]\mongod.exe -f C:\[…]\mongo.config 
```

mongo.config 包含以下内容：

```
# Basic database configuration
dbpath = C:\[…]\db\
bind_ip = 127.0.0.1
port = 20571

# Security
noauth = true

# Administration & Monitoring
nohttpinterface = true 
```

之后，我通过以下命令连接：

```
C:\[…]\mongo.exe --port 20571 127.0.0.1 
```

在那里我添加了一个用户：

```
> use admin
switched to db admin
> db.addUser('test', 'test')
{ "n" : 0, "connectionId" : 1, "err" : null, "ok" : 1 }
{
    "user" : "test",
    "readOnly" : false,
    "pwd" : "a6de521abefc2fed4f5876855a3484f5",
    "_id" : ObjectId("50db155e157524b3d2195278")
} 
```

为了检查一切是否正常，我做了以下事情：

```
> db.system.users.find()
{ "_id" : ObjectId("50db155e157524b3d2195278"), "user" : "test", "readOnly" : false, "pwd" : "a6de521abefc2fed4f5876855a3484f5" } 
```

这对我来说似乎没问题。

之后，我在 mongo.config 文件中将“noauth = true”更改为“auth = true”并重新启动了守护进程。

现在我希望能够连接用户和密码：

```
C:\[…]\mongo.exe --port 20571 -u test -p test 127.0.0.1 
```

使用此消息拒绝访问我：

```
MongoDB shell version: 2.0.4
connecting to: 127.0.0.1:20571/127.0.0.1
Wed Dec 26 16:24:36 uncaught exception: error { "$err" : "bad or malformed command request?", "code" : 13530 }
exception: login failed 
```

所以这是我的问题：**为什么登录失败？**

我仍然可以在不提供用户名和密码的情况下连接，但无法访问任何数据，因为“未经授权的 db:admin lock type:-1 client:127.0.0.1”。这实际上是我所期望的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:09:15.630

正如 Andrei Sfat 在对这个问题的评论中告诉我的那样，我犯了两个重大错误。

首先，我认为我可以将 IP 作为一个简单的参数传递给客户端。但是您必须为此使用 --host 。相反，我认为是 IP 地址的参数实际上应该是数据库名称。所以连接服务器的正确命令如下：

```
C:\[…]\mongo.exe --port 20571 -u test -p test --host 127.0.0.1 admin 
```

其次，用户是每个数据库的。因为我只将用户“test”添加到数据库“admin”，所以它只在那里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:00:47.463

显然`auth = true`配置没有成功加载。重新启动 mongod.exe 时是否忘记了 -f 参数？

```
C:\[…]\mongod.exe -f C:\[…]\mongo.config 
```

# c# - 在 where 子句中浏览实体

> ID：14055144
> 
> 赞同：3
> 
> 时间：2012-12-27T12:59:38.423
> 
> 标签：c#, entity-framework, where

我在使用实体框架编写 linq 表达式时遇到了一些麻烦。我有两个相关的实体。Pago（支付）和Cuota（股票）。在 Cuota，我有 id_prestamo（贷款 ID）。

我需要的是为一笔 Prestamo（贷款）获得所有 Pago（付款）。但由于我的 Pago 仅与 Cuota 相关，因此我必须从 Cuota 获取 id_prestamo。问题是我无法像这样导航 throw Cuota：

```
Lista_pagos = db.Pago.Where(x => x.Cuota.Prestamo.id_prestamo == prestamo.id_prestamo).ToList(); 
```

我也试过这个表达式，但它也不起作用：

```
Lista_pagos = db.Pago.Where(x => x.Cuota.Where(y => y.Prestamo.id_prestamo == prestamo.id_prestamo)).ToList(); 
```

当我说它不起作用时，是因为我无法编译应用程序。这个地方一定有错误，`x.Cuota.Where(y =>`但不知道如何正确使用where语句。我明白了：

![在此处输入图像描述](../Images/fc4c75d423e99ea8081b07cbf80b701d.png)

“代表不接受 1 个参数”

有谁知道我怎样才能正确地写出这个表达式？

我附上下面的实体关系。

![在此处输入图像描述](../Images/2385fb64c347dd1c96630040bd433df0.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:07:27.943

您的查询中有语法错误。

```
db.Pago.Where() 
```

...接受一个谓词——一个返回的函数`bool`。

```
x.Cuota.Where() 
```

...返回`IQueryable<Cuota>`

所以：

```
db.Pago.Where(x => x.Cuota.Where( ... )) 
```

...是无效代码，因为`IQueryable<Cuota>`不是`bool`.

我*认为*你真正想要的是：

```
Lista_pagos = db.Pago.Where(
    x => x.Cuota.Any(y => y.Prestamo.id_prestamo == prestamo.id_prestamo)
).ToList(); 
```

（注意`Any`而不是`Where`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:12:42.523

你的 Prestamos 有 Cuotas（顺便说一下，Cuota 是分期付款，而不是 Share，share 是 Acción）并且你想要给定 Prestamo 的所有 Pagos：

```
Lista_Pagos = (from p in Pagos 
                join c in Cuotas 
                on p.Cuota.Cuota_Id equals c.Cuota_Id 
                where c.Prestamo.Prestamo_Id == prestamo.Prestamo_Id
                select p).ToList<Pago>(); 
```

# google-chrome - 从 Native Client/Pepper 插件调用 Windows API

> ID：14055152
> 
> 赞同：5
> 
> 时间：2012-12-27T13:00:16.400
> 
> 标签：google-chrome, plugins, google-nativeclient, ppapi

我的目的是为 Windows 用户创建一个 chrome 插件。是否可以从 Native Client /PPAPI 调用 windows api。如果可能怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T08:37:17.147

我正在回答我的问题，因为经过一些研究，我发现西方的答案有点不对。我尝试在 Pepper(PPAPI) 插件中调用 Windows API，它可以与命令行开关“--register-pepper-plugins”（不是 West 指定的--no-sandbox）一起正常工作。使用这个命令行属性似乎更安全，因为它只是在 Chrome 浏览器中注册一个插件，而不是删除任何沙箱。我想在找到一个正在使用的实际辣椒插件后添加一个答案，该插件使用开关（用于 chromeos 的 NetFlix 辣椒插件）。

有更多信息要添加。Chrome API 可以提供多显示器信息：**chrome.systemInfo.display**对象提供所有必要的信息。chrome 文档未更新。***需要注意的重要一点是，要在清单中添加“systemInfo.display”权限以使用此对象***。在此对象的功能中报告了两个错误。
**1.** *所有监视器的监视器名称都相同“通用即插即用监视器”，文档声称提供监视器的用户友好名称。*
**2.** *有一个事件应该在监视器的分辨率更改时被调用，但该事件永远不会被调用。*

Currently the implementation is only for Windows OS. Support for other OS are on the way. **Documentation says that the API is only available for Chrome App, but I haves tested that and the API is available on Chrome Extensions as well.**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:29:03.133

不幸的是，简短的回答是“不”。Native Client 被设计为独立于操作系统并且与 JavaScript 一样安全。将 Native Client 视为具有与 JavaScript 相同的功能和限制的本机代码。进行 Windows API 调用的 Native Client 模块会破坏这两个设计原则：它不能在例如 Mac 上运行，并且会带来重大的安全风险（想象一下浏览到决定从其中删除文件的网页）你的硬盘）。

既然您提到了 Chrome，您可能会很想知道 Web 应用程序（无论它们使用 JavaScript 还是 Native Client）都可以在 Chrome 网上应用店中作为打包应用程序请求[额外的权限。](http://developer.chrome.com/apps/api_index.html)但是，由于上面列出的原因，本机操作系统调用仍然是不可能的。

NPAPI 插件没有这些限制，但是 NPAPI 的未来，至少在 Chrome 中是不确定的（参见[http://blog.chromium.org/2012/07/npapi-plug-ins-in-windows的最后一段-8-metro-mode.html](http://blog.chromium.org/2012/07/npapi-plug-ins-in-windows-8-metro-mode.html) )。

出于开发目的，可以使用命令行标志 --no-sandbox 关闭 Chrome 的外部沙箱，然后运行直接调用操作系统的 PPAPI 插件。这适用于开发人员，不适合最终用户使用。

如果您可以多说一些关于您想要实现的目标，可能有一些方法可以使用 Native Client/Pepper 来做到这一点。

# asp.net - 在 Visual Studio 2012 中通过 FTP 访问网站

> ID：14055158
> 
> 赞同：2
> 
> 时间：2012-12-27T13:00:58.547
> 
> 标签：asp.net, visual-studio, iis, ftp

我尝试通过 ftp 连接我的网站。我通过浏览器成功连接了文件夹，但在 Visual Studio 2012 中，我只能通过本地地址（10.100.101.100）而不是远程地址连接站点。当我尝试以远程地址连接时出现此错误：

> 无法从服务器检索文件夹信息。无法连接到端口 21 上的“（远程 IP 地址）”。检查服务器名称和代理设置。如果设置正确，服务器可能暂时不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-21T01:31:42.453

这个问题已有六年历史了，但仍然有人可能会从中受益。打开 Visual Studio 后，在起始页中，转到打开网站。

然后在出现的对话框中选择 FTP 站点。

在字段中，对于“服务器”，请提供您网站的 IP 地址，而不是名称。对于“端口”，输入 21。对于“目录”，使用 ip 地址和斜杠，如下所示：“165.63.29.89/”。然后使用您的用户名和密码。您将打开您的网站并列出文件。

**Edit1**：如果它不起作用，做同样的事情，但只使用“/”作为目录。它会起作用的。

Edit2：如果仍然没有建立连接，选择“被动模式”做同样的事情。

[并在此处](https://docs.microsoft.com/en-us/previous-versions/34322t8f%28v%3Dvs.140%29)查看 Microsoft 文档

# php - 贝宝将用户数据存储到数据库

> ID：14055166
> 
> 赞同：0
> 
> 时间：2012-12-27T13:01:13.490
> 
> 标签：php, paypal

我有一个带有帐户系统的网站。我正在销售一些服务。我正在使用贝宝动态订阅按钮进行销售。我的问题是，当 IPN 从 paypal 发回时，我怎么知道是哪个用户付款的？我有一个将付款信息发送到贝宝的工作脚本和另一个从贝宝​​接收信息并将其插入数据库的脚本，但我不知道如何知道哪个用户发送了付款。我正在寻找如何实现这一点的想法。

发送按钮：

```
<form name="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr method="post">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="business" value="user@example.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="no_shipping" value="1">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_subscribe_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input type="hidden" name="a3" value="<?php echo $pay_value; ?>">
<input type="hidden" name="p3" value="1">
<input type="hidden" name="t3" value="M">
<input type="hidden" name="src" value="1">
<input type="hidden" name="sra" value="1">
</form> 
```

ipn脚本：

```
<?php

// tell PHP to log errors to ipn_errors.log in this directory
ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

// intantiate the IPN listener
include('include/ipnlistener.php');
include('include/conn.php');
$listener = new IpnListener();

// tell the IPN listener to use the PayPal test sandbox
$listener->use_sandbox = true;

// try to process the IPN POST
try {
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
} catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
}

if ($verified) {

    $errmsg = '';   // stores errors from fraud checks

    // Make sure the payment status is "Completed" 
    if ($_POST['payment_status'] != 'Completed') { 
        }
        exit(0); 
    }

     if ($_POST['txn_type'] == 'subscr_eot') {
            $link = mysql_connect($conn_host,$conn_user,$conn_pass) or die('Connection to mysql failed!');
            mysql_select_db($conn_db,$link) or die('Connection to database failed!');

            $sql = mysql_query("UPDATE user_data SET paid='0.00' WHERE uid='$userID'");

            mysql_close($link);

    if (!empty($errmsg)) {

        // manually investigate errors from the fraud checking
        $body = "IPN failed fraud checks: \n$errmsg\n\n";
        $body .= $listener->getTextReport();
        mail('user@example.com', 'IPN Fraud Warning', $body);

    } else {

         $link = mysql_connect($conn_host,$conn_user,$conn_pass) or die('Connection to mysql failed!');
         mysql_select_db($conn_db,$link) or die('Connection to database failed!');

         $sql = mysql_query("UPDATE user_data SET paid='$paid' WHERE uid='$userID'");

         mysql_close($link);
    }

} else {
    // manually investigate the invalid IPN
    mail('user@example.com', $listener->getTextReport());
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:20:29.473

您可以将表单中的加密用户 ID 作为自定义变量发送

```
<input type="hidden" name="custom" value="put user id here " /> 
```

IPN 会将此自定义代码发回给您，以便您更新数据库。

您将在 IPN 验证页面中使用 $_POST['custom'] 获取值。

请在下面找到完整的变量集。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_xclick-subscriptions">
  <input type="hidden" name="business" value="nora@paypal.com">
  <input type="hidden" name="item_name" value="Baseball Hat Monthly">
  <input type="hidden" name="item_number" value="123">
  <input type="hidden" name="image_url" value="https://www.yoursite.com/logo.gif">
  <input type="hidden" name="no_shipping" value="1">
  <input type="hidden" name="return" value="http://www.yoursite.com/thankyou.htm">
  <input type="hidden" name="cancel_return" value="http://www.yoursite.com/cancel.htm">
  <input type="hidden" name="a1" value="0">
  <input type="hidden" name="p1" value="1">
  <input type="hidden" name="t1" value="W">
  <input type="hidden" name="a2" value="5.00">
  <input type="hidden" name="p2" value="2">
  <input type="hidden" name="t2" value="M">
  <input type="hidden" name="a3" value="50.00">
  <input type="hidden" name=”p3" value="1">
  <input type="hidden" name="t3" value="Y">
  <input type="hidden" name="src" value="1">
  <input type="hidden" name="sra" value="1">
  <input type="hidden" name="srt" value="5">
  <input type="hidden" name="no_note" value="1">
  <input type="hidden" name="custom" value="customcode">
  <input type="hidden" name="invoice" value="invoicenumber">
  <input type="hidden" name="usr_manage" value="1">
  <input type="image" src="http://images.paypal.com/images/x-click-but01.gif" border="0" name="submit" alt="Make payments with PayPal - it’s fast, free and secure!"> 
```

我希望这有帮助。

谢谢。

# android - 在 Android 中的其他视图元素之间插入/删除视图元素

> ID：14055167
> 
> 赞同：0
> 
> 时间：2012-12-27T13:01:14.933
> 
> 标签：android, android-layout

如何在视图元素之间添加 TextView/Button。

我正在从服务器获取评论及其回复，如果评论有回复，那么它将显示查看回复按钮，当用户触摸该按钮时，它将获取该评论的回复并仅在该评论下方显示。当用户再次按下回复时按钮，它会消失

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:fillViewport="true"
            android:orientation="vertical" >

                    <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:id="@+id/commentScrollLayout"

                    >

                   </LinearLayout>

            </ScrollView> 
```

获取的评论添加到 LinearLayout-id-commentScrollLayout 中，所以我的问题是如何插入/删除对该评论的回复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:05:24.480

您可以使用[addView](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int%29)方法`LinearLayout`。此方法采用第二个参数 - 要插入视图的位置索引。现在您需要根据按下的评论确定此索引。您可以为此使用[indexOfChild](http://developer.android.com/reference/android/view/ViewGroup.html#indexOfChild%28android.view.View%29)方法：

```
View pressedComment; // Comment pressed by user.
LinearLayout comments = (LinearLayout) findViewById(R.id.commentScrollLayout); 
// Get index of pressed comment.
int index = comments.indexOfChild(pressedComment);
// Create reply text view.
TextView reply = ..;
// Insert reply after the comment.
comments.addView(reply, index + 1); 
```

对于删除，您可以按索引删除回复，或者如果您在某处保存了视图，则可以按视图删除。检查[removeView](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)和[removeViewAt](http://developer.android.com/reference/android/view/ViewGroup.html#removeViewAt%28int%29)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T13:07:38.560

您可以使用这 2 个命令删除和添加视图。

```
View.removeView();
View.addView(); 
```

通过调用获取视图

```
findViewById(R.id.yourviewid); 
```

在代码中创建视图：

```
TextView tv = new TextView(this); 
```

**例子**

添加视图

```
LinearLayout ll = (LinearLayout) findViewByid(R.id.commentScrollLayout);
TextView tv = new TextView(this);
tv.setId(1337);
tv.setText("Test");
ll.addView(tv); 
```

删除视图

```
LinearLayout ll = (LinearLayout) findViewByid(R.id.commentScrollLayout);
TextView tv = (TextView) findViewByid(1337);
ll.removeView(tv); 
```

或者

使 TextView 全局化，您不需要 id。

# python - Python 多处理 apply_async + 值

> ID：14055171
> 
> 赞同：1
> 
> 时间：2012-12-27T13:01:30.770
> 
> 标签：python, multiprocessing, counter, shared

我尝试通过 apply_async 将共享计数器传递给多处理中的任务，但它失败并出现这样的错误“RuntimeError：同步对象只能通过继承在进程之间共享”。这是怎么回事

```
def processLine(lines, counter, mutex):
    pass

counter = multiprocessing.Value('i', 0)
mutex = multiprocessing.Lock()
pool = Pool(processes = 8)
lines = []

for line in inputStream:
    lines.append(line)
    if len(lines) >= 5000:
         #don't queue more than 1'000'000 lines
         while counter.value > 1000000:
                 time.sleep(0.05)
         mutex.acquire()
         counter.value += len(lines)
         mutex.release()
         pool.apply_async(processLine, args=(lines, counter, ), callback = collectResults)
         lines = [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:01:31.353

让池处理调度：

```
for result in pool.imap(process_single_line, input_stream):
    pass 
```

如果顺序无关紧要：

```
for result in pool.imap_unordered(process_single_line, input_stream):
    pass 
```

`pool.*map*()`函数有`chunksize`参数，您可以更改以查看它是否会影响您的情况下的性能。

如果您的代码期望在一次调用中传递多行：

```
from itertools import izip_longest

chunks = izip_longest(*[iter(inputStream)]*5000, fillvalue='') # grouper recipe
for result in pool.imap(process_lines, chunks):
    pass 
```

限制排队项目数量的一些替代方法是：

*   `multiprocessing.Queue`设置最大大小（在这种情况下您不需要池）。`queue.put()`当达到最大大小时将阻塞，直到其他进程调用`queue.get()`
*   使用 Condition 或 BoundedSemaphor 等多处理原语手动实现生产者/消费者模式。

注意：每个值都有关联的锁，你不需要单独的锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:39:38.327

I solved it in such not elegant way

```
def processLine(lines):
    pass

def collectResults(result):
    global counter
    counter -= len(result)

counter = 0
pool = Pool(processes = 8)
lines = []

for line in inputStream:
    lines.append(line)
    if len(lines) >= 5000:
         #don't queue more than 1'000'000 lines
         while counter.value > 1000000:
             time.sleep(0.05)
         counter.value += len(lines)
         pool.apply_async(processLine, args=(lines), callback = collectResults)
         lines = [] 
```

# c# - Microsoft MessageQueue Formatter 属性始终为空

> ID：14055173
> 
> 赞同：1
> 
> 时间：2012-12-27T13:01:37.773
> 
> 标签：c#, .net, ipc, message-queue

我对基本的 Microsoft 消息队列实现有以下问题：

在阅读端`Formatter`，无论我在发送端输入什么，消息的属性始终为空。

发送代码：

```
System.Messaging.Message m = new System.Messaging.Message("string to send");
m.Formatter = new XmlMessageFormatter( new Type[1] { typeof(string) } );
queue.Send(m, "label"); 
```

接收代码：

```
MessageEnumerator enumerator = queue.GetMessageEnumerator2();
while (enumerator.MoveNext())
{
    Message m = enumerator.RemoveCurrent();
    Console.WriteLine("MSQ: " + m.Label);

    Console.WriteLine("Formatter: " + m.Formatter.GetType().ToString()); // crash because formatter property is null

    Console.WriteLine("Body: " + m.Body); //also crashes since formatter is null
} 
```

由于`Formatter`为空，我也无法得到`m.Body`我最需要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:57:38.940

使用该属性对消息进行*反序列化。*`MessageQueue.Formatter`所以必须在接收代码中初始化`MessageQueue.Formatter`属性（**queue.Formatter ）：**

```
((XmlMessageFormatter)queue.Formatter).TargetTypes = new Type[1] { typeof(string) }; 
```

# javascript - 在 javascript/DOM 中存储文本内容的最快和/或最干净的方法是什么？

> ID：14055189
> 
> 赞同：5
> 
> 时间：2012-12-27T13:03:00.180
> 
> 标签：javascript, jquery

我通常会看到版本 1，但我从事的一些开源项目使用版本 2，并且我过去使用过版本 3。有没有人有一个更优雅的解决方案，也许是一个更具可扩展性的解决方案？

版本 1：

```
var text1 = 'this is my script\'s content'; 
```

版本 2：

```
<script type="text/plain" id="text1">This is my content</script>
<script> var text1 = $('#text1').html(); </script> 
```

版本 3：

```
<input type="hidden" id="text1" value="this is my content">
<script> var text1 = $('#text1').val(); </script> 
```

版本 4：

```
<span class="hidden" id="text1">this is my content</span> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:09:49.590

v1，因为它是在 JavaScript 中存储文本的唯一方法。您列出的所有其他内容都是在 DOM 中存储文本。

DOM 是“表示”，混合“数据”和“表示”通常是个坏主意。例如，当您在 3D FPS 中实现碰撞时，您永远不会从屏幕（演示）扫描模型，而是在数据中比较它们的坐标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T13:08:23.567

我从来没有用过v2。我只在与后端通信时使用 v3 和 v4，以防他们需要向我发送一个变量以在我的 JS 中使用。但是对于我所做的任何事情，我都使用 v1 - 没有必要污染你的 html。交互和内容分离。*此外，我根据我的内容在双引号和单引号之间切换。不需要所有的转义斜线。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:11:15.863

在版本 1 中存储文本与在 DOM 中存储数据一样好

# visual-studio-2008 - Microsoft Visual Studio 2008 速成版 - APPCRASH

> ID：14055190
> 
> 赞同：0
> 
> 时间：2012-12-27T13:03:04.777
> 
> 标签：visual-studio-2008

我无法在 Microsoft Visual Studio 2008 Express Edition 上执行我的 VC++ 程序。它显示一条错误消息，指出 .exe 已停止工作。问题事件名称是 APPCRASH。你能告诉我如何解决它。我无法运行任何程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:09:36.957

您是否尝试在调试器中启动应用程序？或者您可以查看问题签名，该签名应由错误对话框提供。

金

# c# - 更新和删除 Outlook 约会

> ID：14055195
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:03:18.727
> 
> 标签：c#, outlook

需要创建、更新和删除 Outlook 约会的逻辑流程

我可以使用 C# 在 Outlook 中创建约会，但现在我想使用 C# 更新或删除约会。

我必须使用EntryId吗？

但是如何使用此更新或删除或建议我更新和删除约会的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:21:08.433

Microsoft.Office.Interop.Outlook.AppointmentItem 有一个 Delete 方法和一个 Save 方法。

请参阅：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.appointmentitem_methods (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.appointmentitem_methods%28v=office.14%29.aspx)

# python - Python中的行读取，将行的列表变量视为整数？

> ID：14055196
> 
> 赞同：0
> 
> 时间：2012-12-27T13:03:30.377
> 
> 标签：python, python-3.x, typeerror

我在**python 3.2中有那个代码**

```
infile = self._handle_bom(infile)
for line in infile:
    if (not line) or (line[-1] not in ('\r', '\n', '\r\n')):   # <- error here
        continue
    for end in ('\r\n', '\n', '\r'):
        if line.endswith(end):
            self.newlines = end
            break
    break 
```

有一个错误：

```
TypeError: 'int' object is not subscriptable 
```

为什么 python 将 line 视为 int？

**编辑：** 好的，看起来我的东西更复杂。

`_handle_bom`是一个处理 BOM 的类函数。我不熟悉 chartypes 但遵循所有其他方法，似乎最终 infile 被 .decode（不同类型的东西）解码返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:58:49.003

毫无疑问，您的问题实际上是在`_handle_bom`例行公事中。

但这个逻辑也是多余的。

```
if (not line) or (line[-1] not in ('\r', '\n', '\r\n')): 
```

也就是说，“如果该行为空（或无，或 0，或 [] 或 {}）或不以换行符结尾，则继续循环”

```
for end in ('\r\n', '\n', '\r'):
    if line.endswith(end):
        break 
```

这重复了前一个 if 语句的后半部分。

* * *

除此之外，这段代码实际上回答了这个问题：

> 此文件中的第一个非空行以哪种换行符结尾？

可以这样重写：

```
def get_newline_type(self, lines):
    for line in lines:
        if line:
            # Prevents your TypeError, but your BOM code probably shouldn't be
            # returning non-string lines anyway?
            line = str(line) 
            newline_types = filter(lambda x: line.endswith(x), ('\r\n', '\r', '\n'))
            if newline_types:
                return newline_types[0]
            else:
                return None 
```

然后你可以简单地这样称呼它：

```
self.newline_type = self.get_newline_type(self._handle_bom(infile)) 
```

当然这里还有另一个问题 -`self.newlines`如果第一个非空白行不以 结尾，您是否真的想成为 None （或者在您的情况下，无论在调用该代码之前设置的任何内容）`'\r\n', '\n', or '\r'`？如果这无关紧要，因为永远不会有这些行之一，或者您确实想要 EOL 字符，只需删除 else 条件。

# php - 如何使用 api 获取所有谷歌搜索结果

> ID：14055197
> 
> 赞同：21
> 
> 时间：2012-12-27T13:03:33.310
> 
> 标签：php, google-search-api

我需要获取谷歌搜索结果进行查询。但是使用这样的东西

```
$query = 'Nikita Platonenko';
$url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=".urlencode($query);
$body = file_get_contents($url);
$json = json_decode($body);
var_dump($json) 
```

我只得到 4 个结果，我已经阅读过有关 google ajax 搜索的信息，但无法理解。请告知如何获得所有结果，或仅获得前 100 个结果？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-24T14:05:36.290

```
<?php
$query = 'Nikita%20Platonenko';
$url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=".$query;

$body = file_get_contents($url);
$json = json_decode($body);

for($x=0;$x<count($json->responseData->results);$x++){

echo "<b>Result ".($x+1)."</b>";
echo "<br>URL: ";
echo $json->responseData->results[$x]->url;
echo "<br>VisibleURL: ";
echo $json->responseData->results[$x]->visibleUrl;
echo "<br>Title: ";
echo $json->responseData->results[$x]->title;
echo "<br>Content: ";
echo $json->responseData->results[$x]->content;
echo "<br><br>";

}

?> 
```

[由于 AJAX Api 现在已贬值，您可以使用SerpApi](https://serpapi.com)等第三方服务来获取 Google 结果。他们有一个[GitHub](https://github.com/serpapi/google-search-results-php)存储库，应该很容易集成：

```
$query = [
    "q" => "Coffee",
    "google_domain" => "google.com",
];

$serp = new GoogleSearchResults();
$json_results = $serp.json($query); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T13:49:39.157

### 答案：

这是我成功使用的：

```
http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=[q]&key=[key]&cx=[account]&rsz=large&userip=[userip]&start=[start] 
```

我认为您无法完全控制在查询中可以获得多少结果。但是您可以控制结果大小 ( `rsz=large`) 以及它的开始位置。

### 其他注意事项：

此外，最好在其中包含用户的 IP 地址。因为，谷歌限制了基于唯一 IP 地址的查询数量（意思是，来自一个 IP 地址的数量）。因此，如果它们都来自您的服务器，那么您可以发送的查询数量将受到限制，但如果您发送用户的 IP 地址，则限制会大大降低。此外，将结果缓存几天是一个额外的好处。

# javascript - 将 JQuery 插件用于滑块时 Dart 不能像 JavaScript 那样工作

> ID：14055203
> 
> 赞同：3
> 
> 时间：2012-12-27T13:03:50.830
> 
> 标签：javascript, jquery, dart, flexslider

我开始使用 Dart 进行前端开发，但遇到了一些麻烦。我需要的是通过 Js-Interop Dart 库使用一个名为 FlexSlider [http://www.woothemes.com/flexslider/的 JQuery 插件。](http://www.woothemes.com/flexslider/)但是它不像纯 JavaScript 那样工作，我什至无法理解生成 Dart2Js 的一堆难以辨认的代码。

代码是这样的： 编辑 1：我修复了它，在导入 js.dart 时删除了 document.ready 并添加了 de js 文件夹。

```
import 'dart:html';
import 'dart:json';
import 'package:js/js.dart' as js;

void main()
{
    js.scoped(()
    {
        var element = js.context.jQuery('.flexslider');
        var options = js.map
        ({
            'animation' : 'slide'
        });
        element.flexslider(options);
    });
} 
```

当然，我的 dart 脚本所在文件夹内的“packages”文件夹中有 js.dart 库文件。当然，我之前已经在 HTML 文档中加载了 JQuery，我在其中调用了 Dart2Js 生成的 JavaScript。

在用 Alexandre 的反馈进行更正后......比如现在 Google Chrome Inspector 抛出以下 2 个错误：

1 **Uncaught ReferenceError: ReceivePortSync is not defined / (1):24** StackTrace: - ProxiedObjectTable / (1):24 - (anonymous function) / (1):162 - (anonymous function) / (1):511 - $. $defineNativeClass.nY indexz.dart.js:1986 - $.fb indexz.dart.js:1087 - 绑定 indexz.dart.js:1089 - $$.e7.P indexz.dart.js:612 - $$.J1 .P indexz.dart.js:454 - $.Zs indexz.dart.js:1215 - $.i indexz.dart.js:1217 - $.e indexz.dart.js:1220 - $.s indexz.dart。 js:1219 - $.E2 indexz.dart.js:1117 - $$.aX.vV indexz.dart.js:767 - $.Rq indexz.dart.js:1190 - (匿名函数) indexz.dart.js: 2830

2 **未捕获的类型错误：无法调用 null indexz.dart.js:439** 的方法 'get$g' StackTrace: - $$.J1.get$g indexz.dart.js:439 - $.sL indexz.dart.js: 1293 - $.fC indexz.dart.js:1205 - $.$defineNativeClass.JX indexz.dart.js:1907 - $.i indexz.dart.js:1217 - $.e indexz.dart.js:1220 - $ .s indexz.dart.js:1219 - $.E2 indexz.dart.js:1117 - $$.aX.vV indexz.dart.js:767 - $.Rq indexz.dart.js:1190 -（匿名函数） indexz.dart.js:2830

我在 HEAD 中的 HTML 代码是这样的：

```
<pre>
<head>
    <?php script('jquery') ?>
    <?php script('flexslider') ?>
        <script>
            jQuery = $.noConflict();
        </script>
    <?php script('indexz.dart') ?>
    <?php wp_head() ?>
<?php woo_head() ?>
    <?php style('global') ?>
    <?php style('flexslider') ?>
</head>
</pre> 
```

我的 Slider 的 HTML 代码是这样的：

```
<pre>
<div class="flexslider col-full" style="margin-left: auto; margin-right: auto;">
    <ul class="slides">
        <li>
            <?php image('1.png') ?>
        </li>
        <li>
            <?php image('2.png') ?>
        </li>
        <li>
            <?php image('3.png') ?>
        </li>
        <li>
            <?php image('4.png') ?>
        </li>
    </ul>
</div>
</pre> 
```

我清楚我正在使用 Wordpress 和 PHP，并且图像、脚本和样式 PHP 函数完美地为每个元素和文件生成相应的 HTML 标记。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:18:25.740

如果您使用[pub](http://pub.dartlang.org/)您的导入应该是`import 'package:js/js.dart' as js;`.

你也可以跳过`js.context.$(document).ready`，因为 Dart`main()`也是如此。

由于[Dart2js 错误](http://code.google.com/p/dart/issues/detail?id=2265)，您必须使用别名`$`才能`jQuery = $.noConflict();`使 javascript 编译的代码正常工作。

最后，一个工作示例可能是：

```
import 'dart:html';
import 'package:js/js.dart' as js;

void main() {
  js.scoped(() {
    var element = js.context.jQuery('.flexslider');
    var options = js.map({
      'animation' : 'slide'
    });
    element.flexslider(options);
  });
} 
```

和

```
<div class="flexslider">
  <ul class="slides">
    <li>
      <img src="slide1.jpg" />
    </li>
    <li>
      <img src="slide2.jpg" />
    </li>
    <li>
      <img src="slide3.jpg" />
    </li>
    <li>
      <img src="slide4.jpg" />
    </li>
  </ul>
</div>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<script src='http://flexslider.woothemes.com/js/jquery.flexslider.js'></script>
<script>
  var jQuery = $.noConflict();
</script>
<script type="application/dart" src="my_script.dart"></script>
<script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"‌​&gt;</script> 
```

# javascript - 数组删除javascript中具有键值对的重复项

> ID：14055208
> 
> 赞同：1
> 
> 时间：2012-12-27T13:04:18.117
> 
> 标签：javascript

我有一个具有如下键值对的数组：

```
[3, "Rey"],[3,"Rhio"],[4,"Rey"],[1,"derter"]; 
```

我想得到一个结果数组，这样如果值相同，那么将采用具有最大值的键。如下所示

```
[3,"Rhio"],[4,"Rey"],[1,"derter"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:11:23.583

我会告诉你可以采取的方法：

开始迭代数组，不断将每个数组元素推送到映射，其中第一个元素是键，第二个是值。由于有条件地覆盖了重复键，因此重复项消失了。

然后通过迭代地图自己形成一个数组，其中每个数组元素都是一个数组本身，其中 kay 作为第一个元素， value 作为第二个元素。一切顺利。

# git - git push 上的错误/警告消息

> ID：14055221
> 
> 赞同：0
> 
> 时间：2012-12-27T13:05:16.163
> 
> 标签：git

当我执行成功`git push`时，我收到以下消息。

> 远程：/usr/bin/env：ruby：Arquivo ou diretório não encontrado
> 
> 错误：无法运行挂钩/接收后：没有这样的文件或目录

它为什么要寻找红宝石，为什么要尝试执行一些接收后挂钩？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:07:56.813

它正在`post-receive`您推送到的远程服务器上运行服务器端钩子 ( )。钩子需要运行 ruby​​。您必须联系您要推送到的 git 存储库的管理员。

如果您拥有远程存储库，或者您想向管理员提供说明，请检查存储库的`.git`目录或根目录及其`hooks`下的文件夹。`post-receive`如果不需要，可以移除挂钩。

# blackberry - 黑莓图像背景重复

> ID：14055225
> 
> 赞同：1
> 
> 时间：2012-12-27T13:05:33.233
> 
> 标签：blackberry, java-me, background

在我的应用程序中，我正在设置verticalFieldManager 的位图图像，但它正在重复。用于设置我正在使用的图像

```
VerticalFieldManager vertical=new VerticalFieldManager(USE_ALL_HEIGHT | USE_ALL_WIDTH )
{
    protected void sublayout(int maxWidth, int maxHeight) 
    {               
       super.sublayout(Display.getWidth(), Display.getHeight());
       setExtent(Display.getWidth(), Display.getHeight());
    }
};

vertical.setBackground(BackgroundFactory.createBitmapBackground(
    Bitmap.getBitmapResource( "bg_640.png" ) )); 
```

它显示像![灰色图像重复四次](../Images/f390a40c18de6dfa35c8c774f3d0c42a.png)

我被困在这里。任何想法都会得到认可。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T03:50:47.437

而不是打电话

```
vertical.setBackground(BackgroundFactory.createBitmapBackground(Bitmap.getBitmapResource("bg_640.png"))); 
```

使用[这个版本的 createBitmapBackground(Bitmap, int, int, int)](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/decor/BackgroundFactory.html#createBitmapBackground%28net.rim.device.api.system.Bitmap,%20int,%20int,%20int%29)

并像这样传递参数：

```
vertical.setBackground(BackgroundFactory.createBitmapBackground(Bitmap.getBitmapResource("bg_640.png"), 
                       Background.POSITION_X_LEFT, 
                       Background.POSITION_Y_TOP, 
                       Background.REPEAT_NONE)); 
```

# facebook - 我可以收到 Facebook 回复吗

> ID：14055227
> 
> 赞同：0
> 
> 时间：2012-12-27T13:05:43.700
> 
> 标签：facebook, plugins, action, social

当我在我的网站上使用社交插件时，我能否以某种方式从 Facebook 收到关于用户采取行动（例如、分享……）的回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:38:20.807

是的：

[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

您将不得不对自己的通知程序进行 ajax 调用...

# kendo-ui - Kendo UI 网格未调用 Web 服务

> ID：14055230
> 
> 赞同：1
> 
> 时间：2012-12-27T13:06:20.770
> 
> 标签：kendo-ui

我是 Kendo UI 的新手，我有一个从 JSON 格式的 asmx Web 服务填充的网格，它可以很好地显示数据。我已经启用了编辑，但是当我单击更新按钮时没有任何反应，我没有到达我的 webmethod 中的断点。

这是相关的代码片段。谢谢

```
//references
    <link href="Content/kendo/2012.3.1114/kendo.common.min.css" rel="Stylesheet" />
    <link href="Content/kendo/2012.3.1114/kendo.default.min.css" rel="Stylesheet" />

    <script src="Scripts/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="Scripts/kendo/2012.3.1114/kendo.web.min.js" type="text/javascript"></script>

//Data Model Classes
    [Serializable]
    public class Make
    {
        public int PhoneMakeID { get; set; }
        public string PhoneMakeDesc { get; set; }
        public string BillingDesc { get; set; }
    }

//Web Methods
    //Phone Make Get that populates the grid, works 100%     
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public List<Make> GetPhoneMakes(string Active, string OfferTypeID, string TrackMonthID, string NetworkID)
        {
            DataTable dtPhoneMakes = new DataTable();

            Microsoft.Practices.EnterpriseLibrary.Data.Database db = DatabaseFactory.CreateDatabase("PricingConnection");
            DbCommand dbCommand = null;
            dbCommand = db.GetStoredProcCommand("uspPS_PhoneMake_Get");
            db.AddInParameter(dbCommand, "@OfferTypeID", DbType.String, OfferTypeID);
            db.AddInParameter(dbCommand, "@TrackMonthID", DbType.String, TrackMonthID);
            db.AddInParameter(dbCommand, "@NetworkID", DbType.String, NetworkID);
            db.AddInParameter(dbCommand, "@Active", DbType.String, Active);

            dtPhoneMakes = db.ExecuteDataSet(dbCommand).Tables[0];

            List<Make> ml = new List<Make>();
            Make m;

            foreach (DataRow dr in dtPhoneMakes.Rows)
            {
                m = new Make();
                m.PhoneMakeID = Convert.ToInt32(dr["PhoneMakeID"].ToString());
                m.PhoneMakeDesc = dr["PhoneMakeDesc"].ToString();
                m.BillingDesc = dr["BillingDesc"].ToString();

                ml.Add(m);
            }

            return ml;
        }

 //Phone Make Update, not getting to here
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public void UpdatePhoneMakes(string PhoneMakeID, string PhoneMakeDesc, string BillingDesc)
        {
            Microsoft.Practices.EnterpriseLibrary.Data.Database db = DatabaseFactory.CreateDatabase("PricingConnection");
            DbCommand dbCommand = null;
            dbCommand = db.GetStoredProcCommand("uspPS_PhoneMake_Update");
            db.AddInParameter(dbCommand, "@PhoneMakeID", DbType.String, PhoneMakeID);
            db.AddInParameter(dbCommand, "@PhoneMakeDesc", DbType.String, PhoneMakeDesc);
            db.AddInParameter(dbCommand, "@BillingDesc", DbType.String, BillingDesc);

            db.ExecuteNonQuery(dbCommand);

        }

//Transports
            var transpPhoneMake = {
                read: function (options) {
                    $.ajax({
                        type: "POST",
                        url: "webmethods/phones.asmx/GetPhoneMakes",
                        contentType: "application/json; charset=utf-8",
                        data: jdPhoneMake,
                        dataType: 'json',
                        success: function (msg) {

                            options.success(msg);
                        }
                    });
                },
                update: function (options) {
                    url: "webmethods/phones.asmx/UpdatePhoneMakes/";
                    contentType: "application/json; charset=utf-8";                    
                    type: "POST";  
                },
                parameterMap: function (data, operation) {
                    if (operation != "read") {                             
                        return JSON.stringify({ products: data.models })
                    }
                    else {                           
                        data = $.extend({ sort: null, filter: null }, data);
                        return JSON.stringify(data);
                    }
                }
            };

 //DataSources
            var dsPhoneMake = new kendo.data.DataSource({
                transport: transpPhoneMake,
                schema:
                {
                    data: "d",
                    total: "d.length",
                    model:
                    {
                        id: "PhoneMakeID",
                        fields:
                        {
                            PhoneMakeID: { type: "string", editable: false, nullable: true },
                            PhoneMakeDesc: { type: "string", editable: true },
                            BillingDesc: { type: "string", editable: true }
                        }
                    }
                },
                pageSize: 10,
                sort:
                {
                    field: "PhoneMakeDesc",
                    dir: "asc"
                }
            });

//Grids
                var gridPhoneMakes = $("#gridPhoneMakes").kendoGrid({
                    dataSource: dsPhoneMake,
                    columns:
                        [
                            { command: ["edit", "destroy"], title: "&nbsp;", width: "175px" },
                            {
                                field: "PhoneMakeID",
                                title: "Make ID",
                                filterable: false,
                                editable: false,
                                width: 75
                            },
                            {
                                field: "PhoneMakeDesc",
                                title: "Make Description",
                                editable: true
                            },
                            {
                                field: "BillingDesc",
                                title: "Make Code",
                                editable: true
                            }
                        ],
                    toolbar: kendo.template($("#tmplPhoneMakeToolbar").html()),
                    selectable: "row",
                    sortable: true,
                    groupable: true,
                    pageable: true,
                    filterable: true,
                    autoBind: false,
                    editable: "inline",
                    batch: false
                }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:12:20.257

你的`transport`定义说：

```
update: function (options) {
    url: "webmethods/phones.asmx/UpdatePhoneMakes/";
    contentType: "application/json; charset=utf-8";                    
    type: "POST";  
}, 
```

当您实际上没有定义函数时。它应该是这样的：

```
update: {
    url: "webmethods/phones.asmx/UpdatePhoneMakes/",
    contentType: "application/json; charset=utf-8",
    type: "POST",
}, 
```

**但**所有`transport`定义必须一致（摘自 KendoUI 文档）

> 注意：传输方法应该是一致的——创建、更新和销毁也应该被指定为函数

（感谢@LindsySimon 的评论）

你应该这样做`read`：

```
read: function (options) {
    $.ajax({
        url: "webmethods/phones.asmx/UpdatePhoneMakes/",
        contentType: "application/json; charset=utf-8",
        type: "POST",
        success: function (result) {
            ...
        }
    });
} 
```

# jquery - 在不破坏数据过滤器的情况下动态填充 jquery 移动列表视图

> ID：14055234
> 
> 赞同：1
> 
> 时间：2012-12-27T13:06:39.660
> 
> 标签：jquery, jquery-ui, jquery-mobile

很多帖子都提到了

```
$('#ListViewID').listview("refresh") 
```

在您动态修改定义为列表视图的元素的 DOM 之后需要进行的调用。我没有问题让列表视图看起来正确。问题是，我标记了我的 listview 元素以使用 jquery mobile 的数据过滤器功能。这适用于静态列表视图，但不会过滤我的列表视图的动态填充内容。我没有连接一个字符串来创建我的列表视图 - 我正在克隆一个原型单元格。这是问题吗？

这是我的代码

```
// capture prototype
        var prototype = $("#" + currentPage).find(".prototype"); 
```

在确定原型之后，我同样锁定了 listview 元素的“Shell”：

```
 var shell = $("#" + currentPage).find(".Rolodex");
        // declare variable for focus cell
        var thisrow;

....

                // map fields
                var pTitle;
                var pSubtitle1;
                var pSubtitle2;
                var pJumper;
                var cellLock; 
```

在这里，我根据需要多次复制原型单元格，以便输入数据

```
 // build empty rows
                for (i=0; i<len; i++) {
                    thisrow = prototype.clone();
                    thisrow.show();
                    thisrow.addClass('cell'); 
```

在这里，我删除了每个单元格的原型类，因此我可以通过“.cell”类识别我的所有“单元格”

```
 thisrow.removeClass('prototype');
                    thisrow.attr("id","cell_"+i);
                    shell.append(thisrow);
                }
                shell.listview("refresh");

                for(i=0; i<len; i++) {
                    // map available fields
                    thisrow = shell.find(".cell").eq(i);
                    pTitle = shell.find(".title").eq(i+1);
                    pSubtitle1 = shell.find(".subtitle1").eq(i+1);
                    pSubtitle2 = shell.find(".subtitle2").eq(i+1);
                    pJumper = shell.find(".execBrowse").eq(i+1);
                    // log row info
                    console.log("Row = " + i + " content = " + 
results.rows.item(i).code_content);
                    // is hyperlink?
                        if (/^http[s]?\:\/\//.test(results.rows.item(i).code_content)) {
                            thisrow.find(".sub-menu").show();
                            pJumper.attr("href",results.rows.item(i).code_content);

                                // yes is a hyperlink

...                                     
pTitle.html(results.rows.item(i).code_content);
... 
```

所有这一切都很好，并且产生了一个看起来和我期望的一样的列表视图 - 问题是，数据过滤器属性不适用于搜索这个动态创建的列表视图。有什么想法吗？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:14:22.157

这应该很容易工作。

我为您创建了一个示例：http: [//jsfiddle.net/Gajotres/pCqjs/](http://jsfiddle.net/Gajotres/pCqjs/)。

其中有一个小列表视图，并且 $.ajax 正在向它动态附加更多项目。可以通过过滤器搜索新的项目。

您需要检查动态生成的内容是否与规范相同，它应该如下所示（这是一个示例）：

```
<li>
    <a href="#cars">
        <h3>Movie title: Jurasic Park</h3>
        <p>Blah Blah Blah</p>
    </a>
</li> 
```

# php - Wordpress：获取 slug 名称为 LIKE 的帖子 ID

> ID：14055236
> 
> 赞同：0
> 
> 时间：2012-12-27T13:06:51.080
> 
> 标签：php, sql, wordpress

请帮助我使用我的自定义函数`get_post_by_slug`，该函数尝试查询数据库并获取 slug`LIKE` `something%`来自特定类别 ( `id=5`) 的帖子 ID。它一直工作到 WP 3.5，但现在坏了，我认为缓存可能有问题。我添加`$wpdb->prepare`了 WP 3.5，但它并没有真正解决问题。

```
function get_post_by_slug($post_slug) {
  global $wpdb;
  $post = $wpdb->get_var($wpdb->prepare("SELECT ID FROM $wpdb->posts LEFT JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id WHERE post_name LIKE '%s%' AND term_taxonomy_id=5 LIMIT 1", $post_slug));
  return $post;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:22:30.563

`prepare`就像`sprintf`它使用`%`你使用的那样，`LIKE`你可以这样做。此外，如果您使用准备，您应该删除`''`周围的`%s`，准备会为您报价。认为下一个示例对您有用。

```
function get_post_by_slug($post_slug) {
    global $wpdb;
    $post_slug = '%' . $post_slug . '%';
    $post = $wpdb->get_var($wpdb->prepare("SELECT ID FROM $wpdb->posts LEFT JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id WHERE post_name LIKE %s AND term_taxonomy_id=5 LIMIT 1", $post_slug));
    return $post;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T16:55:37.230

通过 slug 获取帖子 ID 的最简单解决方案是：

```
$your_desired_title = "yourtitle";

global $wpdb;
$id = $wpdb->get_var("SELECT ID FROM $wpdb->posts WHERE post_name = $your_desired_title ");
echo $id; 
```

# extjs - 在 extjs 的下拉列表中显示空白记录

> ID：14055238
> 
> 赞同：0
> 
> 时间：2012-12-27T13:07:01.960
> 
> 标签：extjs

我在我的 extjs 应用程序中的下拉列表，其中数据通过 Json 加载。如果仅存在一条记录，则默认情况下会显示单个记录。而不是这个，我希望用户单击下拉菜单并选择该记录。所以默认情况下用户可以看到空文本。

这是我的代码。

```
 Ext.create('Ext.panel.Panel', {
                itemId:'dsUnitPanel',
                border:0,
                items:[UnitGrid,{
                xtype:'combobox',
                tpl: '<tpl for="."><div class="x-boundlist-item" >{name} [{freeSize} GB Free] </div></tpl>',
                style:'margin:10px;',
                fieldLabel: 'Group(*)',
                editable:false,
                bodyStyle:'padding-left:10px;',
                store: dsGroupStore,
                valueField:'name',
                displayField:'name',
                multiSelect: false,
                name: 'txtMode',
                id:'dsGroupId',
                queryMode: 'local',
                triggerAction: 'all',
                emptyText:'Select Group' 
```

我想在默认情况下始终显示空文本，以便用户也可以单击并选择单个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:04:58.663

同样的问题总是一次又一次地出现。这里的重点是您需要一种允许用户选择**nothing**的方法，但是他们选择了空白选项，它不是**什么都不**是，而是一个有效的选项。

我强烈建议避免这种方式。如果您需要提供一种取消选择组合的方法，您可以为此使用触发器。

![在此处输入图像描述](../Images/57f5dd32c8b6927e09df273597dc2885.png)

请看一下以下问题的答案： [Extjs4 add an empty option in a combobox](https://stackoverflow.com/questions/13830537/extjs4-add-an-empty-option-in-a-combobox/13835193#13835193)

并检查 jsfiddle 中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:48:53.633

在您的商店中，添加一条空记录，如下所示：

```
dsgroupStore.add( { name: '' } ); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T07:20:14.750

我还找到了一个总是显示空文本的答案：“选择组”，即使在单项输入的情况下也是如此。只需要放

```
forceSelection: true; 
```

# android - 从地图片段切换到另一个片段并返回

> ID：14055239
> 
> 赞同：5
> 
> 时间：2012-12-27T13:07:02.350
> 
> 标签：android, google-maps, android-fragments

我有一个片段活动，可以在单击按钮时切换片段。
我切换的两个片段是：

1.  谷歌地图 android v2 片段
2.  另一个带有文本视图的片段

这就是我切换片段的方式：

```
public void onClick(View v) {
    FragmentManager fm = getSupportFragmentManager();
    if(tv.getText().toString().equalsIgnoreCase("Click ME!!")){
        tv.setText("MAP");
        if (fm != null) {
            if(map == null){    
                map = new Map();
            }
            FragmentTransaction ft = fm.beginTransaction();
            ft.replace(R.id.lay_contaier, map);
            ft.commit();

        }
    }
    else{
        tv.setText("Click ME!!");
        if (fm != null ){
            FragmentTransaction ft = fm.beginTransaction();
            ft.replace(R.id.lay_contaier,new empty());
            ft.commit();

        }
    }
} 
```

这是我的 Maps Fagment 代码

```
 public class Map extends Fragment implements OnMarkerClickListener,    OnInfoWindowClickListener, OnMarkerDragListener {

private static final LatLng PERTH = new LatLng(-31.952854, 115.857342);
private static final LatLng SYDNEY = new LatLng(-33.87365, 151.20689);

  private GoogleMap mMap;

private Marker mPerth;
  private Marker mSydney;
  @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.activity_main,null);

        return view;
  } 
```

活动邮件.xml

```
<?xml version="1.0" encoding="utf-8"?>

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

但是每次我切换回地图片段时，应用程序都会崩溃。我应该如何使这段代码正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-12T22:55:31.437

我怀疑这发生在您身上，因为您在 XML 布局文件中定义了地图片段。为了以这种方式交换片段，您需要在代码中实例化您的地图，如下所示：

```
private void initializeMap() {

    mMapFragment = SupportMapFragment.newInstance();
    FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
    fragmentTransaction.add(R.id.fragment_container, mMapFragment, "map");
    fragmentTransaction.commit();

    handler.post(new Runnable() {
        @Override
        public void run() {
            mMap = mMapFragment.getMap();

            mMap.setOnCameraChangeListener(new GoogleMap.OnCameraChangeListener() {
                @Override
                public void onCameraChange(CameraPosition cameraPosition) {
                    // Do something here
                }
            });
        }
    });
} 
```

我发现它`mMapFragment.getMap()`返回 null，这就是为什么您需要通过`Handler`实例安排其余设置的原因。我的布局 XML 如下所示：

```
<android.support.v4.widget.DrawerLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/drawer_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".LauncherActivity">

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/fragment_container">

    <!-- The fragments will go here -->
</RelativeLayout>

<RelativeLayout
    android:layout_gravity="start"
    android:layout_height="match_parent"
    android:layout_width="wrap_content"
    android:background="@color/drawer_background">
...
</RelativeLayout>
</android.support.v4.widget.DrawerLayout> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:09:43.337

您正在制作 FragmentManager Null。删除`fm=null`. 同样在 else 循环中，您要替换两个片段。不要一次做双重替换。在调用 commit() 之前，你只做一次替换

# mysql - MySQL + Rails 按找到的关键字计数排序

> ID：14055240
> 
> 赞同：0
> 
> 时间：2012-12-27T13:07:09.073
> 
> 标签：mysql, ruby-on-rails, ruby, innodb

我在 MySQL/InnoDB 中有一个 Faq 类，它具有实例关键字，例如

```
apple,juice,fruit 
```

我有一个类方法

```
def self.find_by_string string = nil
 unless string.present?
   return
 end

 keywords = string.gsub(/(\,|\.|\s)/, " ").split.uniq.join("|")

 Faq.find(
          :all, 
          :conditions => "keywords like '%" + keywords.gsub(/\|/, "%' or keywords like '%") + "%'"
        )
end 
```

我需要根据在其中找到的关键字的数量来排序 find 的结果。我的意思是，如果 SQL 找到 4 个关键字，它的结果必须高于 3 个关键字。怎么做？

# java - 带有 DES 的 Java JEC 加密

> ID：14055243
> 
> 赞同：1
> 
> 时间：2012-12-27T13:07:23.980
> 
> 标签：java, cryptography, padding

我在 WAS 7、Windows XP 和 Java 6 上。解密时出现以下异常：

```
javax.crypto.BadPaddingException: Given final block not properly padded
[12/27/12 17:50:48:832 PKT] 00000013 SystemErr     R    at com.ibm.crypto.provider.DESCipher.engineDoFinal(Unknown Source)
[12/27/12 17:50:48:832 PKT] 00000013 SystemErr     R    at com.ibm.crypto.provider.DESCipher.engineDoFinal(Unknown Source)
[12/27/12 17:50:48:832 PKT] 00000013 SystemErr     R    at javax.crypto.Cipher.doFinal(Unknown Source)
[12/27/12 17:50:48:832 PKT] 00000013 SystemErr     R    at com.test.util.encrypt.StringEncrypter.decrypt(StringEncrypter.java:170) 
```

这是我的java代码：

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.KeySpec;
import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESKeySpec;
import org.apache.log4j.Logger;
import com.test.exceptions.EncryptionException;
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public final class StringEncrypter {

  private KeySpec keySpec;
  private SecretKeyFactory keyFactory;
  private Cipher cipher;

  private static final Logger LOGGER = Logger.getLogger("com.test.util.StringEncrypter");

  public StringEncrypter(String anEncryptionKey) throws EncryptionException {

    if (anEncryptionKey == null) {
      throw new EncryptionException(new InvalidKeyException("encryption key was null"));
    }
    else if (anEncryptionKey.trim().length() < 24) {
      throw new EncryptionException(new InvalidKeyException("encryption key was less than 24 characters"));
    }
    else {

      try {

        byte[] keyAsBytes = anEncryptionKey.getBytes("UTF-8");

        keySpec = new DESKeySpec(keyAsBytes);

        keyFactory = SecretKeyFactory.getInstance("DES");

        cipher = Cipher.getInstance("DES");

      }
      catch (InvalidKeyException ike) {
        throw new EncryptionException(ike);
      }
      catch (UnsupportedEncodingException uee) {
        throw new EncryptionException(uee);
      }
      catch (NoSuchAlgorithmException nsae) {
        throw new EncryptionException(nsae);
      }
      catch (NoSuchPaddingException nspee) {
        throw new EncryptionException(nspee);
      }
    }
  }

  public String encrypt(String anUnencryptedString) throws EncryptionException {
    if (anUnencryptedString == null || anUnencryptedString.trim().length() == 0) {
      throw new EncryptionException(new InvalidKeyException("unencrypted string was null or empty"));
    }
    else {
      try {
        SecretKey secretKey = keyFactory.generateSecret(keySpec);
        cipher.init(Cipher.ENCRYPT_MODE, secretKey);
        byte[] cleartext = anUnencryptedString.getBytes("UTF-8");

        byte[] ciphertext = cipher.doFinal(cleartext);

        BASE64Encoder base64encoder = new BASE64Encoder();
        return base64encoder.encode(ciphertext);
      }
      catch (InvalidKeySpecException ikse) {
        throw new EncryptionException(ikse);
      }
      catch (InvalidKeyException ike) {
        throw new EncryptionException(ike);
      }
      catch (UnsupportedEncodingException uee) {
        throw new EncryptionException(uee);
      }
      catch (IllegalBlockSizeException ibse) {
        throw new EncryptionException(ibse);
      }
      catch (BadPaddingException bpee) {
        throw new EncryptionException(bpee);
      }
    }
  }

  public String decrypt(String anEncryptedString) throws EncryptionException {
    if (anEncryptedString == null || anEncryptedString.trim().length() <= 0) {
      throw new EncryptionException(new InvalidKeyException("encrypted string was null or empty"));
    }
    else {
      try {
        SecretKey secretKey = keyFactory.generateSecret(keySpec);

        cipher.init(Cipher.DECRYPT_MODE, secretKey);

        BASE64Decoder base64decoder = new BASE64Decoder();

        byte[] cleartext = base64decoder.decodeBuffer(anEncryptedString);

        byte[] ciphertext = cipher.doFinal(cleartext);

        return bytesToString(ciphertext);
      }
      catch (InvalidKeySpecException ikse) {
        throw new EncryptionException(ikse);
      }
      catch (InvalidKeyException ike) {
        throw new EncryptionException(ike);
      }
      catch (IllegalBlockSizeException ibse) {
        throw new EncryptionException(ibse);
      }
      catch (BadPaddingException bpee) {
          bpee.printStackTrace();
        throw new EncryptionException(bpee);
      }
      catch (IOException ioe) {
        throw new EncryptionException(ioe);
      }
    }
  }

  private static String bytesToString(byte[] someBytes) {
    StringBuffer stringBuffer = new StringBuffer();
    for (int i = 0; i < someBytes.length; i++) {
      stringBuffer.append((char) someBytes[i]);
    }
    return stringBuffer.toString();
  }
} 
```

# iphone - 如何将变量值发送到目标c中的nsmutable数组

> ID：14055246
> 
> 赞同：0
> 
> 时间：2012-12-27T13:07:26.040
> 
> 标签：iphone, objective-c

如何将变量字符串值发送到目标 c 中的 nsmutable 数组？
如果`global`是我的`NSMutableArray`并且`temp`是包含字符串的变量，那么

```
[global addObject:@"%@",temp]; 
```

不工作请检查家伙并回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:10:10.807

只需添加对象。

```
[global addObject:temp]; 
```

为什么要尝试使用[字符串格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:17:57.350

如果你想添加一些格式化的字符串，你可以像这样使用

```
[global addObject:[NSString stringWithFormat:@"%@",temp]]; 
```

否则[DrummerB 的答案](https://stackoverflow.com/a/14055281/468724)是绝对有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:19:49.363

您需要先创建一个对象。

它可能是一个`NSString`（如你的情况），或者可能是任何诸如数组、字典等之类的东西。

然后将其添加到数组中。但数组必须是`NSMutableArray`.

```
[global addObject:yourObject]; //will add at last 
```

或者

```
[global addObject:yourObject atIndex:desiredIndex];//insert at the given index 
```

如果是string，可以使用string类下的很多方法来形成,,like`initWithString`等`stringWithFormat`。

```
NSString *yourObject=.....;//create an object using any of the class or instance method of NSString. 
```

# python-2.7 - 返回具有共同“关键字”的书籍元组

> ID：14055248
> 
> 赞同：0
> 
> 时间：2012-12-27T13:07:28.847
> 
> 标签：python-2.7

我有一个保存为元组列表的数据库，每个元组都有 4 个元素。第一个元素是书号，第二个元素是书名，第三个元素是书的作者，第四个元素是书的出版年份。

我需要一个名为 的函数，它以元组列表和字符串`findBook(L, keyword)`的形式接收书籍，并返回其中的所有内容。应该是这样的：`keyword``tuples of books``keyword``tuple of the book`

```
(BookNumber, BookName, Author, YearPublished) 
```

如何编写一个搜索引擎来帮助我们找到这些特定的书籍？

我试图从这个开始，但它不起作用：

```
def findBook(L,keyword):

    for i in L:
        BookNumber=i[0]
        BookName=i[1]
        Author=i[2]
        YearPublished=i[3]
        i=(BookNumber,BookName,Author,YearPublished)

        if keyword == str(BookName) or keyword==BookNumber or keyword==str(Author) or keyword==str(YearPublished):
            return i 
```

所以如果我有一本哈利波特书，我输入关键字：“哈利”，它应该返回所有的整个元组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:20:53.840

您可以遍历可能具有`keyword`您正在寻找的条目，将它们分组到一个列表中，该列表应在流程结束时返回：

```
def findBook(L, keyword):

    books = list()
    for book in L:

        book = tuple(entry for entry in book)
        if [i for i in book if str(i).find(keyword) != -1]:
            books.append(book)

    return books

L = [(2,"harry potter and the prisoner of azkaban ","J.K Rowling","1998"),
        (3,"harry potter and the half blood prince","J.K Rowling","2007"),
        (6,"Harry potter and deathly hallows","J.K Rowling","2010"),
        (8,"The secret","someone","2009")]

print findBook(L, "harry") 
```

输出：

```
[(2, 'harry potter and the prisoner of azkaban ', 'J.K Rowling', '1998'), (3, 'harry potter and the half blood prince', 'J.K Rowling', '2007')] 
```

注意没有找到第三个条目，因为它`keyword`是“harry”而不是“Harry”，要进行不区分大小写的搜索，请使用：

```
def findBook(L, keyword):

    books = list()
    keyword = keyword.tolower()

    for book in L:

        book = tuple(entry for entry in book)
        if [i for i in book if str(i).tolower().find(keyword) != -1]:
            books.append(book)

    return books 
```

# python - 使用 PyQt 在 Python 中使用 QtNetwork 进行 TCP 消息传递

> ID：14055249
> 
> 赞同：1
> 
> 时间：2012-12-27T13:07:30.207
> 
> 标签：python, sockets, chat, pyqt4, messaging

我正在尝试在我的应用程序中实现 TCP 消息传递系统。

[这是我的代码](http://pastebin.com/0GpuQhkG)。

在此，我可以通过在最底部的行编辑中输入系统名称来向目标系统发送消息。最后一个是发送消息。

当客户端收到消息时，将弹出一个消息框。

有时它工作，有时它不工作。

我让这个模块通过在系统框中输入系统来向多个系统发送消息，用逗号（，）分隔它们

这里的主要问题是，我只能为第一个人发送消息，但不能为剩下的人发送消息。

任何人都可以帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:30:58.927

得到了解决方案。[在过去的bin](http://pastebin.com/0GpuQhkG)中更新

需要更新`SendData`定义

```
def SendData(self):

    TargetSystems = self.targetSystem.text().split(',')
    Msg2Send = self.lineedit.text()

    for TargetSystem in TargetSystems:

        self.Clientsocket.connectToHost(TargetSystem, PORT)
        self.Clientsocket.waitForConnected(-1)  # This is required data to be writing
        self.request = QtCore.QByteArray()
        stream = QtCore.QDataStream(self.request, QtCore.QIODevice.WriteOnly)
        stream.setVersion(QtCore.QDataStream.Qt_4_2)
        stream.writeUInt32(0)
        stream.writeQString(Msg2Send)
        stream.device().seek(0)
        stream.writeUInt32(self.request.size() - SIZEOF_UINT32)
        self.Clientsocket.write(self.request)
        self.nextBlockSize = 0
        self.request = None
        self.Clientsocket.disconnectFromHost() # .close() is not closing the socket connection, so i changed it this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:31:18.717

尝试了一些选项，但 nmap 从未显示该端口是打开的，最好的解决方案就是在这里监听对话。

[PyQt QTcpServer：如何向多个客户端返回数据？](https://stackoverflow.com/questions/9355511/pyqt-qtcpserver-how-to-return-data-to-multiple-clients)

启动服务器时的线路有问题，这是正确的。

self.tcpServer.listen(QtNetwork.QHostAddress("0.0.0.0"), PORT)

在每条发送的消息中都会调用函数 socketError，我猜这是家庭作业。

一直想用 pyqt 编写我自己的超级秘密消息应用程序，但我现在是一个懒惰的程序员（我被迫编写 PHP O_O 代码），也许现在我会基于你的。

# jquery - 保存某些输入字段并保存所有输入字段

> ID：14055250
> 
> 赞同：0
> 
> 时间：2012-12-27T13:07:34.473
> 
> 标签：jquery, forms

所以基本上我正在设置一个管理面板，您可以在其中输入信息并将其保存到数据库中。管理面板有三个容器，每个容器一个用于：

1.  个人信息
2.  教育信息
3.  密码

每个容器都包含一个表单和一个提交按钮。除此之外，我想为用户提供“保存所有更改”按钮的选项。然后这应该检测所有三个表单中的所有更改并将它们保存到数据库中。

我该怎么做？我的第一个想法是嵌套表单，我读到这不是正确的做法。我的第二个想法是将点击处理程序绑定到“保存所有更改”按钮，然后从所有输入字段中获取值。但是，输入字段有三种不同的形式。我将如何提及他们？这甚至是正确的方法还是有人能想到更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:26:49.277

第一件事。所有信息都将保存在同一张表中吗？

如果是，那么您可以考虑只用一种形式包装这些容器。

如果不是，那么为了将来的维护，用单独的表格包装这些容器。然后执行单独的功能将它们保存到数据库中。喜欢：

```
saveContainer1IntoDB()
saveContainer2IntoDB()
saveContainer3IntoDB() 
```

这样您就可以根据需要重复使用它们。最后，你点击“保存所有更改”按钮并调用所有三个函数

# ruby-on-rails - Rails - 使用 json 对象创建 json-array

> ID：14055252
> 
> 赞同：1
> 
> 时间：2012-12-27T13:07:45.080
> 
> 标签：ruby-on-rails, json, fullcalendar

我需要为我的数据创建一个 json 数组。但在我的数据模型中，有些字段是不必要的，有些字段名称需要为 json-array 更改。因此，我创建了一个简单的函数来将一个对象转换为我需要使用的 json 格式：

```
 def testMethod
    {title: self.title, start: self.start_date, end: self.end_date, resource: Resource.find(self.resource_id).name}.to_json
  end 
```

所以这个 json 对象的输出是：

```
{:title=>"Test", :start=>Thu, 27 Dec 2012 10:25:00 UTC +00:00, :end=>Thu, 27 Dec 2012 10:25:00 UTC +00:00, :resource=>"Resource1"} 
```

但是当我使用以下循环迭代所有对象时：

```
@calJson   = []
@calendars.each do |cal|
    @calJson.push(cal.testMethod)
end 
```

我会有这个无用的字符串：

> ["{\"标题\":\"测试\",\"开始\":\"2012-12-27T10:25:00Z\",\"结束\":\"2012-12-27T10:25 :00Z\",\"resource\":\"Resource1\"}", "{\"title\":\"ikincii\",\"start\":\"2012-12-27T10:25:00Z \",\"end\":\"2012-12-27T10:25:00Z\",\"resource\":\"Resource2\"}", "{\"title\":\"b da son \",\"开始\":\"2012-12-27T10:27:00Z\",\"结束\":\"2012-12-27T10:27:00Z\",\"资源\":\ "资源 1\"}"]

而我想要这样的东西：

> [ {标题：'午餐 12.15-14.45'，开始：新日期（y，m，d，12，15），结束：新日期（y，m，d，14，45），
> 
> ```
>  resource: 'resource1'
>           },              
>           {
>               title: 'Meeting',
>               start: new Date(y, m, d, 10, 30),
>               end: new Date(y, m, d+4, 11, 00),
> 
>               resource: 'resource1'
>           } ] 
> ```

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:10:09.933

尝试将其添加到相应的控制器中：

```
respond_to do |format|
  format.html
  format.js { render json: @events }
end 
```

另外，在我的事件模型中，我用这个覆盖了默认的 as_json 方法：

```
def as_json(options = {})
{
  :id => self.id,
  :title => self.name,
  :description => self.description || "",
  :start => starts_at.rfc822,
  :end => ends_at.rfc822,
  :allDay => self.all_day
}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:15:37.723

直接回答你的问题：

```
 def testMethod
  {title: self.title, start: self.start_date, end: self.end_date, resource: Resource.find(self.resource_id).name}
 end

 @calJson = @calendars.each_with_object([]) {|cal, array| array << cal.testMethod }.to_json 
```

但是您有更好的选择：json 构建器专门用于此类任务。

# android - Android：根据按钮点击依次显示值数组

> ID：14055253
> 
> 赞同：0
> 
> 时间：2012-12-27T13:07:53.020
> 
> 标签：android, arrays, button, onclick

我有一个由 12 个整数值组成的数组，我想一个接一个地显示它

最初在应用程序运行时，我显示 6 个值。

在按钮上单击我想一一显示其他6个值

上一个按钮- > **value1** **value2** **value3** **value4** **value5** **value6** -> 下一个按钮

所以**在下一个按钮**点击它应该是这样的。

接下来的 6 个值应该像这样显示

**上一个按钮**-> **value2** **value3** **value4** **value5** **value6** **value7** ->**下一个按钮**

这应该持续到 12 个值

**并且在prevbutton**的情况下应该发生反转。

 **总是感谢您的帮助，谢谢

我正在显示像这样的前 6 个值

```
 public void autoTune() {
    Log.i("autotune", " called");

    if (frequency[0] == 0.0)
        station1.setText("");
    else
        station1.setText("" + frequency[0]);
    if (frequency[1] == 0.0)
        station2.setText("");
    else
        station2.setText("" + frequency[1]);
    if (frequency[2] == 0.0)
        station3.setText("");
    else
        station3.setText("" + frequency[2]);
    if (frequency[3] == 0.0)
        station4.setText("");
    else
        station4.setText("" + frequency[3]);
    if (frequency[4] == 0.0)
        station5.setText("");
    else
        station5.setText("" + frequency[4]);
    if (frequency[5] == 0.0)
        station6.setText("");
    else
        station6.setText("" + frequency[5]);

}

    @Override
    protected Boolean doInBackground(Context... params) {
        // TODO Auto-generated method stub
        Log.i("in autotune", " before freq length");
        int[] freq = { 911, 943, 947, 932, 901, 964, 843, 835, 946,904,908,873,877 };
        freqCounter = 0;
        Log.i("in autotune", "after freq length : " + freq.length);
        frequency = new double[freq.length];
        Log.i("in autotune", "after frequency length : " + frequency.length);
        for (int k = 0; k < freq.length; k++) {
            Log.i("In Radio.java", "Freq : " + freq[k]);
            frequency[k] = freq[k];
            frequency[k] = frequency[k] / 10;
            if (frequency[k] == 0.0)
                break;
            freqCounter++;
            Log.i("In Radio.java", "Frequency : " + frequency[k]);
        } 
```

我已经尝试过使用此代码，但这根本不起作用

```
 public void forwardtune(){
Button[] buttons = new Button[5];
buttons[0] = (Button)findViewById(R.id.radiostation1);
buttons[1] = (Button)findViewById(R.id.radiostation2);
buttons[2] = (Button)findViewById(R.id.radiostation3);
buttons[3] = (Button)findViewById(R.id.radiostation4);
buttons[4] = (Button)findViewById(R.id.radiostation5);
buttons[5] = (Button)findViewById(R.id.radiostation6);
if(currentlyDisplayingFromPosition + 6 >= arraySize)
       return;

   for(int i=0; i<arraySize; i++){
       buttons[i].setText("");
   }
   for(int i=currentlyDisplayingFromPosition; i<=currentlyDisplayingFromPosition+6; i++){
       if (frequency[i] == 0.0)
           buttons[i].setText("");
        else
            buttons[i].setText("" + frequency[0]);
   }
  } 
```

我在下一个按钮单击中调用此函数 forwardtune() 。仍然没有运气！有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:17:01.650

你可以试试这个。

```
int currentlyDisplayingFromPosition = 0;
int arraySize = 12;

public void forwardTune(){
   if(currentlyDisplayingFromPosition + 6 >= arraySize)
       return;

   for(int i=0; i<arraySize; i++){
       textView[i].setText("");
   }
   for(int i=currentlyDisplayingFromPosition; i<=currentlyDisplayingFromPosition+6; i++){
       if (frequency[i] == 0.0)
            textView[i].setText("");
        else
            textView[i].setText("" + frequency[0]);
   }

} 
```

同样，您也可以通过反转上面的代码来尝试backwardTune()。**

# linux - 带有 aplay/arecord 的声音驱动程序不能与其他应用程序一起正常工作

> ID：14055254
> 
> 赞同：1
> 
> 时间：2012-12-27T13:07:55.113
> 
> 标签：linux, driver, alsa, pjsip

我为 Raspberry Pi 编写了一个 I2S 声音驱动程序。我看起来效果很好。使用 alsa-aplay 我可以播放一些音乐，使用 alsa-arecord 我可以录制一些听起来很棒的声音！

现在，问题是……我用 pjproject/pjsip 交叉编译了一个简单的应用程序，目的是将 Raspberry Pi 用作软件电话。一些附加信息：我使用 Openembedded 构建自己的内核（埃发行版）和 rootfs，也包括 PJproject。PJproject 有一些测试应用程序，其中一个 (pjsystest) 我用来简单地测试我的声音驱动程序是否正常工作。它没有..

pjsysstest 有一些不同的测试选项，例如播放音调和录制音频。通过调试，我可以得出结论，当我开始播放音调选项时，会调用下一个回调。- PCM 播放打开 - PCM 播放硬件参数 - PCM 播放准备 - PCM 播放触发（开始） **- PCM 播放触发（停止） - PCM 播放准备**

仅使用 aplay： - PCM 播放打开 - PCM 播放硬件参数 - PCM 播放准备 - PCM 播放触发（开始）//当文件结束时： - PCM 播放触发（停止） - PCM 播放硬件空闲 - PCM 播放关闭

使用 pjsystest 进行调试会产生一些奇怪的结果。我不明白为什么第二次调用触发器回调来停止流，然后只调用准备回调（而不是触发器启动回调）。因此没有播放曲调（因为播放流已经停止并且 nog 再次开始）。

现在，我希望你能明白我的问题是什么，也希望有人能在正确的方向上给我一个答案或建议（甚至更好的解决方案）。

非常感谢！

[编辑] 与此同时，我尝试了其他一些 PJproject 示例应用程序：stereotest 和 auddemo。这些实际上正在工作:) 很好，这说明（我认为）： - 我的内核和 rootfs 没有任何问题 - 我的驱动程序没有任何问题。

现在的问题是：为什么 PJSYSTEST 不工作。为什么它调用触发器开始然后直接停止它？

[/编辑]

# javascript - Javascript：如何在没有 jQuery 或 AJAX 的情况下将 JSON 对象加载为文件？

> ID：14055256
> 
> 赞同：2
> 
> 时间：2012-12-27T13:08:02.233
> 
> 标签：javascript, json, node.js

> **可能重复：**
> [如何使用 NodeJS 解析 JSON？](https://stackoverflow.com/questions/5726729/how-to-parse-json-using-nodejs)

我正在运行服务器。代码使用 Node.js 在服务器上运行——从不在浏览器中运行。

如何将 JSON 文件（“data.json”）作为 javascript 对象加载到 javascript 代码中？我应该只使用 jQuery/AJAX 来做到这一点吗？有没有简单的js方法？提前致谢！顺便说一句，我在谷歌和这个网站上都搜索了这个，没有任何明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:10:58.880

看看[这个](http://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback)

读取文件的全部内容，然后解析它。
看看这个[问题](https://stackoverflow.com/questions/5726729/how-to-parse-json-using-nodejs)。

# asp.net - ASP.Net MVC 使 Html.DropDownList 无法选择

> ID：14055257
> 
> 赞同：0
> 
> 时间：2012-12-27T13:08:22.433
> 
> 标签：asp.net, asp.net-mvc, readonly, html-select

我想在自定义只读模式下显示一些 Html.DropDownList 控件。控件应该能够打开底层弹出窗口，但它不应该保存用户选择的值。例如，我有三个值的 Html.DropDownList 控件：值 1 值 2 值 3

控件“值 2”的选定项目

用户看到带有显示项目“值 2”的组合框控件。当用户单击控件弹出窗口时，应打开所有三个值（与通常的组合框控件一样）。如果用户选择与“值 2”不同的值，则不应将所选值保存在控件中。因此，当用户从基础列表中单击项目“值 3”时，控件仍应显示已选择的项目“值 2”是否有可能以任何方式？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:41:04.777

啊。作为您系统的用户，**我不会喜欢您在此处创建的内容！**当我第一次尝试单击值 3 时，它会在没有任何警告的情况下弹回到值 2，我会认为我单击错误，我会立即重试。希望我会意识到您正在重新设置该下拉列表，但我不会马上得到它，我会很生气。

这是一个更好的 UI 选择：禁用无效的 OPTION 标签，以便我可以在下拉列表中看到它们，但我无法选择它们。这是它的jQuery：

```
$(function () {
     $("#select[name=test] option").not(":selected").attr("disabled", true);
}); 
```

我从一位经验丰富的程序员（甚至不是“真正的”设计人员）那里了解到，UI 设计的最大罪过是允许用户选择无效的选项。尽你所能避免必须“纠正”用户选择的内容。通过允许他们选择一个无效的选项，然后在没有任何用户反馈的情况下使用 JavaScript 立即取消它，您违反了本指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:18:35.380

如果你没事。使用 jQuery。这应该适合你。

```
(function () {
    var previous;
    // Grab the initial value in focus event.
    $("select[name=test]").focus(function () {
        previous = this.value;
    // On change event, use previous to set the value of dropdown.
    }).change(function() {
        $("select[name=test]").val(previous);
    });
})();​ 
```

这是工作[示例](http://jsfiddle.net/x5PKf/701/)。

受另一个 StackOverflow[答案](https://stackoverflow.com/questions/4076770/getting-value-of-select-dropdown-before-change)的启发。

# model-view-controller - MVC 控制器可以授权预定的 Web 请求吗？

> ID：14055260
> 
> 赞同：0
> 
> 时间：2012-12-27T13:08:28.740
> 
> 标签：model-view-controller, web, request, quartz.net

我的网络应用程序必须在后台进行一些计算。我研究了多种解决方案，我想使用业务逻辑而不是触发所有计算的 SQL 作业。经过几天的研究，我仍然不相信什么是我的案例的最佳解决方案。

很多文章提到 Quartz.NET，一个单独的 Windows 服务（但我认为这不是大多数共享 Web 主机服务的选项），一个 Windows 任务等......

为了将计算保留在业务逻辑中，我将使用专用的“任务”控制器扩展我的 Web 应用程序，该控制器自动触发计算，然后返回其操作的结果。

Q1：使用 Quartz.NET 定时 Web 请求调用控制器不会那么难，**但我怎样才能保证它的安全？**如果我将 [Authorize] 属性添加到我的“任务”控制器，它将阻止请求。（请注意，我在 Internet Web 应用程序上使用表单身份验证）我不希望 Internet 上的用户能够启动我的“任务”控制器。

Q2：另外，如果我认为共享 Web 主机服务不支持安装单独的 Windows 服务或远程桌面连接是正确的，我将有 2 个选项：

*   希望共享 Web 主机服务支持 Windows 任务（**但这可以使用授权凭据调用吗？**）

*   从我的 application_start 启动 Quartz.NET（这当然不是一个理想的解决方案......）

提前致谢

氪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:38:02.700

首先，我不会从计划的作业中调用 ASP.NET MVC 控制器。我只是委派给业务组件/服务（无论名称是什么），并确保我们在那里运行具有上下文权限的正确事物。这可能意味着我使用有关为谁完成计算的信息来启动该工作，并将该信息传递给服务组件（计算用户 X 的每日平均值）。我没有看到使用 ASP.NET MVC 堆栈伪装调用的真正好处。

所以 Q1：代码级别的安全，不使用 ASP.NET MVC 堆栈

您始终可以在没有 Windows 服务的情况下运行，然后您只需承担应用程序池在不使用时关闭的风险。解决此问题的一种方法是拥有一个外部 ping 程序，以确保有调用，正如您所指出的那样并不理想。在数据库中拥有作业和触发器可以防止丢失信息，但不能防止失火。

Q2：很可能运行 Quartz.NET 比尝试访问 Windows 计划任务要容易得多。

一些共享提供程序对运行代码有非常严格的设置。如果沙盒过于严密，Quartz.NET 可能根本无法运行。

# php - 重音字符 form_validation codeigniter

> ID：14055261
> 
> 赞同：0
> 
> 时间：2012-12-27T13:08:33.813
> 
> 标签：php, regex, validation, codeigniter-2

如何扩展我现有的 form_validaion 类以使其接受我正在使用 codeigniter 的重音字符，到目前为止这是 MY_Form_validation：

```
class MY_Form_validation extends CI_Form_validation{
    public function __construct(){
        parent::__construct();
    }
    public function alpha_dash($str){
        return (!preg_match("/^([-a-z0-9 _-])+$/i", $str)) ? FALSE : TRUE;
    }
} 
```

通过重音字符，我的意思是：

> > “é à è ç ê î â ô ï ö ë ä ù ...”

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:12:04.740

只需在类中添加想要的字符：

```
[a-z0-9 _àèéù-] 
```

或使用 unicode 属性：

```
[\pL\pN_ -] 
```

`\pL`代表 `\pN`任何数字的任何字母

**示例：**

```
$str = 'abcèéù';
echo preg_match('/^[\pL\pN_ -]+$/', $str) ? 'TRUE' : 'FALSE'; 
```

**输出：**

```
TRUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-22T19:27:10.003

这是一个老问题，但接受的答案是不完整的。搜索模式 \pL 受 setLocale 配置的影响。为了让它在任何地方都能工作，你必须使用 unicode。像这样的东西：

```
public function alpha_dash($str){
    return (bool) preg_match('/^[0-9\pL _-]+$/u',$str);
} 
```

# jsf - 在提交 a4j:commandlink 我得到该动作的随机 html 而不是 JSF 中的 html

> ID：14055262
> 
> 赞同：1
> 
> 时间：2012-12-27T13:08:39.573
> 
> 标签：jsf, seam

我正在使用 SEAM - JSF 框架

我的 xhtml 页面上有以下 a4j 命令链接。

```
<a4j:commandLink id="rateImage" action="#{ratingSessionAction.rateImage}" oncomplete="getNewImageForSlider();"/> 
```

当我在清除浏览器历史记录后第一次单击此链接时，我得到以下 html

```
 <?xml version="1.0"?>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<link class="component"
    href="/abc/a4j/s/3_3_3.Finalorg/richfaces/renderkit/html/css/basic_classes.xcss/DATB/eAELXT5DOhSIAQ!sA18_"
    rel="stylesheet" type="text/css" />
<link class="component"
    href="/abc/a4j/s/3_3_3.Finalorg/richfaces/renderkit/html/css/extended_classes.xcss/DATB/eAELXT5DOhSIAQ!sA18_"
    media="rich-extended-skinning" rel="stylesheet" type="text/css" />
<script
    src="/abc/a4j/g/3_3_3.Finalorg.ajax4jsf.javascript.AjaxScript"
    type="text/javascript">

</script>
<script
    src="/abc/a4j/g/3_3_3.Finalorg/ajax4jsf/javascript/scripts/form.js"
    type="text/javascript">

</script>
<script
    src="/abc/a4j/g/3_3_3.Finalorg/richfaces/renderkit/html/scripts/skinning.js"
    type="text/javascript">

</script>
</head>
<body>
    <meta name="Ajax-Update-Ids" content="" />
    <span id="ajax-view-state"><input type="hidden"
        name="javax.faces.ViewState" id="javax.faces.ViewState"
        value="" />
    </span>
    <meta id="Ajax-Response" name="Ajax-Response" content="true" />
    <span id="org.ajax4jsf.oncomplete">getNewImageForSlider();</span>
</body>
</html> 
```

> 我故意从视图状态隐藏字段中删除值以减少帖子的长度。

谁能解释我为什么会发生这种情况，以及如何克服它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:47:07.737

Richfaces (a4j) 总是返回一个完整的 html 响应。返回后，它将使用 ajax-update-id 将响应拆分为多个部分，并将它们放置在您定义了 rerender 属性的 id 的位置。

您没有指定要重新渲染的任何内容，因此只有您的 js 应该在完成时执行。

您可以在 a4j 请求期间直接获取新图像并使用重新渲染（您的页面需要准备好使用 img 标签和随机 src 我想）或者您在 oncomplete 回调中执行此操作并创建一个新的 img标记并自己放置。

第二种方法可能会很棘手，因为服务器状态不会在下一个请求中对齐，例如假设您在 seam 中使用对话

# ajaxcontroltoolkit - 模态弹出扩展器

> ID：14055264
> 
> 赞同：0
> 
> 时间：2012-12-27T13:09:01.833
> 
> 标签：ajaxcontroltoolkit

我必须创建 ModalPopupExtender。为此，我创建了一个简单的应用程序，而我的所有期望都是如此。但是当我在母版页中添加弹出窗口时它不起作用，我该如何解决这个问题？

我的弹出窗口

```
<asp:Button ID="Button1" runat="server" Text="Click here to show iframe in modalpopup" />
      <asp:ModalPopupExtender ID="ModalPopupExtender1" BackgroundCssClass="ModalPopupBG"
         runat="server" CancelControlID="btnCancel" OkControlID="btnOkay" TargetControlID="Button1"
         PopupControlID="Panel1" Drag="true" PopupDragHandleControlID="PopupHeader">
      </asp:ModalPopupExtender>
      <div id="Panel1" style="display: none;" class="popupConfirmation">
         <iframe id="frameeditexpanse" frameborder="0" src="InnerPage.aspx" height="161">
         </iframe>
         <div class="popup_Buttons" style="display: none">
            <input id="btnOkay" value="Done" type="button" />
            <input id="btnCancel" value="Cancel" type="button" />
         </div>
      </div> 
```

我在 InnerPage.aspx 中的脚本

```
<script language="javascript" type="text/javascript">
      function okay() {
         window.parent.document.getElementById('btnOkay').click();
      }
      function cancel() {
         window.parent.document.getElementById('btnCancel').click();
      }
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:08:56.797

将此脚本与扩展器放在同一页面上

```
<script type="text/javascript">
    function clickOk() {
        $get("<%= btnOkay.ClientID %>").click();
    }

    function clickCancel() {
        $get("<%= btnCancel.ClientID %>").click();
    }
</script> 
```

而不是`parent.window.document.getElementById().click()`使用`parent.window.clickOk()`和`parent.window.clickCancel()`

# actionscript-3 - 我可以通过使用外部类属性的值来访问主类变量吗

> ID：14055269
> 
> 赞同：1
> 
> 时间：2012-12-27T13:09:17.127
> 
> 标签：actionscript-3

好的，所以我的问题是这个。

在我的主类中，我有一个布尔类型变量。在外部类中，我有一个 String 类型的变量。

是否可以通过在我的外部类中使用变量的字符串值来访问我的主类中的变量。请注意，外部类属性的字符串值与主类变量匹配。

我只是尝试这样做：

主类 CardGame.as 有一个变量`var slot1:Boolean`。

在外部类中有变量`var slot:String = slot1;` 我也有这行代码：`CardGame['slot'] = false;`

它似乎不起作用:(。任何帮助将不胜感激。谢谢

部分主类文件：

```
function drawCard():void
    {

        var card:Card = new Card();
        if(slot1 == false)
        {
            card.x = 30;
            slot1 = true;
            card.slot = "slot1";
        }
        else if(slot2 == false)
        {
            card.x = 190;
            slot2 = true;
            card.slot = "slot2";
        }
        else if(slot3 == false)
        {
            card.x = 350;
            slot3 = true;
            card.slot = "slot3";
        }
        else if(slot4 == false)
        {
            card.x = 510;
            slot4 = true;
            card.slot = "slot4";
        }
        else if(slot5 == false)
        {
            card.x = 670;
            slot5 = true;
            card.slot = "slot5";
        }
        else
        {
            card.x = 830;
            slot6 = true;
            card.slot = "slot6";
        }
        card.y = cardY;
        cardContainer.addChild(card);
    } 
```

和外部文件：

```
import flash.display.MovieClip;
import flash.events.MouseEvent;
import CardGame;

public class Card extends MovieClip
{
    public var slot:String;

    public function Card()
    {
        // constructor code
        addEventListener(MouseEvent.CLICK, removeCard)
    }

    function removeCard(event:MouseEvent):void
    {
        this.parent.removeChild(this);
        CardGame['slot'] = false;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:05:35.410

您需要在外部类中添加几行代码：

```
// in CardGame.as

// declare slot1 as a public var right after the class declaration to insure the 
// correct scope

public class CardGame extends MovieClip {

     public static var slot1:Boolean;

     ....

// in external class
import CardGame // depends on where this is in relation to the external class

function theFunction():void {
    // somewhere in your external class
    var slot:String = CardGame.slot1.toString();
}

// Example classes that show how it works
// Main Class - instantiates ExtClass
package {
    import flash.display.Sprite;

    public class MainVar extends Sprite {
        public static var slot1:Boolean;
        private var extClass:ExtClass;

        public function MainVar() {
            slot1 = true;
            this.extClass = new ExtClass();
        }
    }
}

// External Class accesses static var, modifies static var
package {
    public class ExtClass {
        public function ExtClass() {
            var slot:String = MainVar.slot1.toString();
            var index:String = "1";
            var slotVar:String = "slot" + index;
            trace(slot);
            // get the value using a string
            trace("String access: ", MainVar[slotVar])
            MainVar.slot1 = false;
            slot = MainVar.slot1.toString();
            trace("Var access: ", slot);
        // get the value using a string
            trace("String access: ", MainVar[slotVar]);
        }
    }
} 
```

# android - Android > 4.0：如何录制/捕获内部音频（例如 STREAM_MUSIC）的想法？

> ID：14055272
> 
> 赞同：39
> 
> 时间：2012-12-27T13:09:23.277
> 
> 标签：android, audio, capture, alsa

几个月前，我使用 Android ICS (4.0) 开发了一个 android 内核模块，它拦截“pcmC0D0p”模块以获取所有系统音频。

我的目标是通过 AirPlay 将所有音频（或至少播放的音乐）流式传输到远程扬声器。

内核模块可以工作，但是有几个问题（内核版本、root 权限等）所以我停止了这个工作。

现在，我们有了 Android 4.1 和 4.2，我有了新的希望！

谁知道如何在 Android 中捕获音频？

我有以下想法：

1.  [通过蓝牙连接](https://stackoverflow.com/questions/13875126/android-possible-to-connect-bluetooth-to-self/13879176#13879176) 到同一部手机，将路由设置为 BT 并在“另一端”获取音频：这应该行不通

2.  像以前一样使用内核模块拦截音频：hardcore，让它工作但不适用

3.  [JACK 音频连接套件](http://jackaudio.org/)：遗憾的是，Android 使用“tinyALSA”而不是“ALSA”。TinyALSA 不支持任何像 JACK 这样的过滤器（但这带来了内核模块的想法）

4.  使用 PulseAudio 作为 AudioFlinger 的替代品，但这也不适用

* * *

编辑（忘记他们）：

5.  [我从tinyALSA](https://github.com/tinyalsa/tinyalsa) （Android 上的 ALSA ）编译了“tinymix”（ALSA 混音器的婴儿版），并尝试将音频输出路由到麦克风输入 - 但没有成功（[我无法理解](https://stackoverflow.com/questions/10733214/android-how-to-configure-tinymix-to-record-system-audio-with-tinycap)）。这也需要生根：不适用

6.  我测试了[OpenSL ES](http://www.khronos.org/opensles/)，但我不是 C-crack 并且它以“我可以录制麦克风，但没有更多”结束（也许我错了？）

* * *

我刚刚找到[ROUTE_TYPE_LIVE_AUDIO](http://developer.android.com/reference/android/media/MediaRouter.html#ROUTE_TYPE_LIVE_AUDIO)：

> 支持实时音频路由的设备将允许将媒体音频流路由到支持的目的地。这可以包括设备本身的内部扬声器或音频插孔、A2DP 设备等。
> 
> 一旦启动，此路由对应用程序是透明的。媒体流上播放的所有音频都将路由到选定的目的地。

也许这有任何帮助？

我的想法不多了，但想“破解这个坚果”，也许有人可以帮助我？

编辑：

我真的是 C 和内核编码的新手（但我成功地创建了一个交叉编译的音频拦截模块） - 但在 PCM 数据从用户空间（JAVA ，C层？）到内核空间（tinyALSA，内核模块），没有黑客和生根？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T10:07:12.767

您必须通过本地套接字服务器传递音频流量：

1.  创建本地套接字服务器

2.  通过本地套接字服务器将音频 http 流地址修改为路径，例如地址

    ```
    http://example.com/stream.mp3  ->

    http://127.0.0.1:8888/http://example.com/stream.mp3 
    ```

    其中 8888 是您的套接字端口。

3.  玩

    ```
    http://127.0.0.1:8888/http://example.com/stream.mp3 
    ```

    带默认媒体播放器

4.  读取本地套接字服务器中对端口 8888 的所有传入请求，对其进行分析并传递给 example.com 服务器。

5.  从 example.com 读取响应并将其传递给本地客户端（媒体播放器）。在这里您可以捕获音频流！

# google-apps-script - 获取 php 文件的文本而不执行它 - 使用 GAS urlfetch()

> ID：14055276
> 
> 赞同：0
> 
> 时间：2012-12-27T13:09:48.090
> 
> 标签：google-apps-script, mime-types, urlfetch

我正在使用通用的 Google Apps 脚本函数来读取、美化和发布来自 scriptdb 的 Google Apps 脚本代码和数据。我最近将其扩展为从 Gist 或给定网址发布代码。它能够在文档中包含实时代码片段的目的。[对于大多数用例](http://ramblings.mcpher.com/Home/excelquirks/gaspublish)，包括 html 和其他基于服务器的文件，我都可以正常工作。

但是，当使用 urlFetch() 访问 php 文件时，会执行而不是（而不是作为 text/html 返回）。我知道它是沿镜头拍摄的，但有没有人知道任何标题选项，或者实际上任何其他技术，我可以用来通常覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:35:58.660

您所要求的将是一个主要的安全问题。不可能要求 php 代码而不是 php 脚本执行的结果。好吧，不完全是——这取决于托管该 php 脚本的服务器如何处理它。如果服务器上没有安装 php 扩展，它将返回 php 代码或整个文件。

但是为了帮助您的请求：您应该询问服务器管理员/网站所有者该代码是否在某处可用，如果可以，则 url 是什么。我相信有一个 php 扩展，它允许使用颜色、文本缩进和所有内容来查看文件 - 但我认为默认情况下它是禁用的（或者您需要将您的 php 文件重命名为其他名称）

# javascript - 具有 KnockoutJS 可观察属性的 JavaScript 克隆对象

> ID：14055279
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:09:54.397
> 
> 标签：javascript, object, knockout.js, clone, cloning

我有一个混合 KnockoutJS 可观察对象和标准属性的对象：

```
var original = {
  a: ko.observable("a"),
  b: "b"
}; 
```

我想创建一个`original`没有任何引用的对象的克隆，这样我就可以做到：

```
var cloned = clone(original);
cloned.a("a cloned");
original.a(); //-> "a" ERROR HERE

original.a("a original");
cloned.a(); //-> "a cloned" ERROR HERE 
```

和

```
cloned.b = "b cloned";
original.b //-> "b" OK

original.b = "b original";
cloned.b //-> "b cloned" OK 
```

我已经尝试过使用该功能，但它导致 KnockoutJS 可观察属性被复制，而不是克隆：

```
cloneObj = function(obj){
  if(obj === null || typeof obj !== 'object')
    return obj;

  var temp = obj.constructor(); // Give temp the original obj's constructor
  for (var key in obj) {
    temp[key] = cloneObj(obj[key]);
  }

  return temp;
}; 
```

正如您在这个小提琴[http://jsfiddle.net/Ep3jY/](http://jsfiddle.net/Ep3jY/)中看到的那样，问题只发生在 KnockoutJS Observable 属性上，而正常的 JavaScript 属性被正确克隆。

现在我使用一种解决方法来返回带有函数的对象，但这很烦人：

```
function(){
  return {
    a: ko.observable("a");
  };
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T13:43:27.200

好的，看来问题出在 KnockoutJS observables 上。我这样解决了：

```
cloneObj = function(obj){
  if(ko.isWriteableObservable(obj)) 
      return ko.observable(obj()); // This is the trick
  if(obj === null || typeof obj !== 'object') 
      return obj;

  var temp = obj.constructor(); // Give temp the original obj's constructor
  for (var key in obj) {
    temp[key] = cloneObj(obj[key]);
  }

  return temp;
}; 
```

# c# - 在 MVC 中使用下拉菜单时出错？

> ID：14055286
> 
> 赞同：1
> 
> 时间：2012-12-27T13:10:35.283
> 
> 标签：c#, asp.net-mvc-4

在这里，我正在使用下拉列表并收到类似的错误

```
ArgumentNullException was unhandled by user code 
Value cannot be null.
Parameter name: items 
```

收到此错误是因为在发布期间我获得了项目的空值。我已经[在 MVC 中尝试过这个示例下拉](https://stackoverflow.com/questions/10484774/dropdown-in-mvc) 列表 这是我的下拉列表

```
@Html.DropDownListFor(m => m.SelectedItem, new SelectList(Model.Items, "Value", "Text")}) 
```

和我的模特

```
 public class OptimizeModels
    {   
 public string SelectedItem { get; set; }
 public IEnumerable<Item> Items { get; set; }
}
 public class Item
    {
        public string Value { get; set; }
        public string Text { get; set; }
    } 
```

和我的控制器

```
public ActionResult Optimize()
        {
            var model = new OptimizeModels
            {                
                Items = new[] 
                {
                    new Item { Value = "Sales", Text = "Units" },
                    new Item { Value = "RetGM", Text = "Rtlr Gross Margin ($)" },
                    new Item { Value = "MfrGM", Text = "Mfr Gross Margin ($)" },
                }
            };
            return View(model);
        }
[HttpPost]
   public ActionResult Optimize(OptimizeModels model)
        {
            ObjOptimizeService = new OptimizeEventPerformance();

            if (ModelState.IsValid)
            {
                ObjOptimizeInputParameter.ObjectivetoOptimize = model.SelectedItem;
                model.ResponseXML = resultXMLContent;
                XmlDocument xdoc = new XmlDocument();
                xdoc.LoadXml(resultXMLContent);
                xdoc.Save(Server.MapPath("..\\XML_Files\\OutputXML.xml"));
            }
            model.ChartName = ObjCommon.GetFusionSWFReportName("Optimization", "OEP_3");
            //return PartialView("../Home/RenderFusionChartView", model);
            return View(model);
        } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T06:28:32.073

在您的`HttpPost`操作中，您忘记在渲染视图之前重新绑定 DropDown 的值。由于集合永远不会发布到服务器，因此您需要像在 GET 操作中那样填充它：

```
[HttpPost]
public ActionResult Optimize(OptimizeModels model)
{
    ObjOptimizeService = new OptimizeEventPerformance();
    if (ModelState.IsValid)
    {
        ObjOptimizeInputParameter.ObjectivetoOptimize = model.SelectedItem;
        model.ResponseXML = resultXMLContent;
        XmlDocument xdoc = new XmlDocument();
        xdoc.LoadXml(resultXMLContent);
        xdoc.Save(Server.MapPath("..\\XML_Files\\OutputXML.xml"));
    }
    model.ChartName = ObjCommon.GetFusionSWFReportName("Optimization", "OEP_3");

    // if you intend to redisplay the same view you need to assign a value
    // for the Items property because your view relies on it (you have bound
    // a dropdownlist to it, remember?)
    model.Items = new[] 
    {
        new Item { Value = "Sales", Text = "Units" },
        new Item { Value = "RetGM", Text = "Rtlr Gross Margin ($)" },
        new Item { Value = "MfrGM", Text = "Mfr Gross Margin ($)" },
    };

    return View(model);
} 
```

通常，如果值是动态的（例如来自数据库或其他东西），您需要这样做。但如果它们是静态的，您可以直接将它们放在视图模型的 getter 属性中：

```
public class OptimizeModels
{   
    public string SelectedItem { get; set; }
    public IEnumerable<Item> Items 
    {
        get
        {
            return new[] 
            {
                new Item { Value = "Sales", Text = "Units" },
                new Item { Value = "RetGM", Text = "Rtlr Gross Margin ($)" },
                new Item { Value = "MfrGM", Text = "Mfr Gross Margin ($)" },
            };
        }
    }
} 
```

请注意，我已经删除了 Items 属性的设置器，因为您不再需要为它分配值，无论是在您的 GET 操作还是在 POST 操作中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:13:48.903

`OptimizeModels.Items`集合不会在 HTTP POST 操作中传递给服务器。您还需要显式设置它们并返回您的 POST 操作方法。

# php - 为 php mysql 查询创建缓存

> ID：14055287
> 
> 赞同：1
> 
> 时间：2012-12-27T13:10:40.273
> 
> 标签：php, mysql, caching

我正在运行一个从 MySQL 表中提取数据的 php 脚本。我将在经常访问的服务器上运行它，并希望将数据在缓存中保存 X 时间。所以一旦你拉它，数据就会保存在服务器上，而时间还没有过去。这是脚本：

```
<?php
include('mysql_connection.php');

$c = mysqlConnect();

$locale = $_GET['locale'];
$last_news_id = $_GET['news_id'];

sendQuery ("set character_set_results='utf8'"); 
sendQuery ("set collation_connection='utf8_general_ci'"); 

if(strcmp($locale,"ru") != 0)
    $locale = "en";
$result = sendQuery("SELECT * FROM news WHERE id > ".$last_news_id." and locale = '".$locale."' ORDER BY id DESC LIMIT 10");
echo '<table width=\"100%\">';
while($row = mysqli_fetch_array($result, MYSQL_NUM))
{
    echo '<tr><td width=\"100%\"><b>Date: </b>'.$row[2].'</td></tr>';
    echo '<tr><td width=\"100%\">'.preg_replace('/#([^#]*)#(.*)/', ' <a href="$2" target="_blank">$1</a>', $row[3]).'</td></tr>';
    echo '<tr><td width=\"100%\"><hr style="height: 2px; border: none; background: #515151;"></td></tr>';
}
echo '</table>';

mysqliClose($c); 
```

?>

使用哪些 php 函数来缓存数据？最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:16:00.687

您可以使用 php Memcache：只需将此代码添加到脚本中的“sendQuery()”功能之后，并将其存储在缓存中，如下所示：

```
$memcache_obj = memcache_connect('memcache_host', 11211);
memcache_set($memcache_obj, 'var_key', $result, 0, 30);
echo memcache_get($memcache_obj, 'var_key'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:19:52.920

Apc/Memcached 可以使用并且通常用于这种类型的事情。您必须注意这种方法可能出现的问题：管理新的插入/更新等等。只要您并不真正关心这些信息，您可以设置数据过期的任意时间间隔，但如果这些信息确实与您的应用程序相关，那么这种方法将不起作用。

此外，mysql 已经缓存了 2 个请求之间未修改的选择，所以基本上，如果您现在执行选择，并且在 10 分钟内使用完全相同的查询进行选择，如果表中没有任何更改，您将从查询中获得结果mysql的缓存。仍然存在发出数据请求和接收数据的开销，但速度极快。默认情况下，这种方法适用于更新/删除问题，因为每当表中的记录发生修改时，相关的查询缓存都会被删除，因此您将获得所有修改原样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:07:07.023

两个首选解决方案是 APC 和 Memcache。前者也是opcache，后者可以分布式。选择最适合您的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:14:54.597

事实上，您的数据已经保存在服务器上。
这样的查询应该很快。

所以，这里似乎不需要缓存。特别是如果您没有遇到负载问题但只是以防万一。

# wordpress - Metabox保存功能看起来不起作用

> ID：14055288
> 
> 赞同：2
> 
> 时间：2012-12-27T13:10:42.977
> 
> 标签：wordpress, plugins

我目前正在创建元框。我用了下面的教程和一些自适应的。教程链接：[http ://wp.tutsplus.com/tutorials/reusable-custom-meta-boxes-part-1-intro-and-basic-fields/](http://wp.tutsplus.com/tutorials/reusable-custom-meta-boxes-part-1-intro-and-basic-fields/)

现在我收到以下错误消息：

> 注意：未定义索引：第 181 行 /customers/0/d/a/xxx/httpd.www/wordpress/wp-content/plugins/ds-flexslider/includes/cpt-manager.php 中的 dsmeta_image 注意：未定义索引：dsmeta_image_caption在第 181 行的 /customers/0/d/a/xxx/httpd.www/wordpress/wp-content/plugins/ds-flexslider/includes/cpt-manager.php

似乎该变量不存在，如果我理解正确，我正在使用 Metabox 的数组字段并创建了一个 foreach 循环引导您完成它。

这个问题怎么解决。保存元框时无论如何都会出错...

设置字段数组的部分：

```
// Create the fields array
$prefix = 'dsmeta_';
$custom_meta_fields = array(
    array(
        'label' => 'Image',
        'desc' => '',
        'id' => $prefix . 'image',
        'type' => 'image'
    ),
    array(
        'label' => 'Image caption',
        'desc' => '',
        'id' => $prefix . 'image_caption',
        'type' => 'text'
    )
); 
```

部分保存功能：

```
add_action('save_post', 'dsslider_manager_save_extras');
function dsslider_manager_save_extras($post_id) {
    global $custom_meta_fields;

    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
        return $post_id;
    }

    // loop through fields and save the data
    foreach ($custom_meta_fields as $field) {
        $old = get_post_meta($post_id, $field['id'], true);
        $new = $_POST[$field['id']];
        if ($new && $new != $old) {
            update_post_meta($post_id, $field['id'], $new);
        } elseif ('' == $new && $old) {
            delete_post_meta($post_id, $field['id'], $old);
        }
    } // end foreach
} 
```

## 请求后更新

在这里，我为字段添加元框：

```
 // Add meta box support
// This registers a function to be called when the WordPress admin interface is visited
add_action("admin_init", "dsslider_manager_add_meta");
function dsslider_manager_add_meta(){

    // Create this cool new meta box for Portfolio Options
    add_meta_box("dsslider-meta", "Brandbox Options", "dsslider_manager_meta_options", "brandbox-slider", "normal", "high");
} 
```

这是构建元字段的功能：

```
function dsslider_manager_meta_options(){

    global $custom_meta_fields, $post;
    if(defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
        // (integer) (optional) The post ID whose custom fields will be retrieved. 
        // Default: Current post
        return $post_id;
?>

<div class="dsslider_manager_extras">

    <div class="ds-metabox" data-max_rows="5" data-min_rows="0">

        <table class="meta ds-input-table">

<?php

        foreach ($custom_meta_fields as $field) {
            $custom = get_post_meta($post->ID, $field['id'], true); // Returns a multidimensional array with all custom fields of a particular post or page. 

            // Past HTML markup
?>          

            <tbody class="ui-sortable">
            <?php 

                echo '<tr class="row">';
                echo '<td class="order"></td>';
                echo '<td>';

                switch($field['type']) {
                    // case items will go here

                    // image
                    case 'image':
                        $image = get_template_directory_uri().'/images/image.png';
                        echo '<span class="custom_default_image" style="display:none">'.$image.'</span>';

                        if($custom) { 
                            $image = wp_get_attachment_image_src($custom, 'thumbnail'); 
                            $image = $image[0]; 

                        } // end if statement

                        echo '<img src="' . $image . '" class="custom_preview_image" alt="" />

                        <input type="button" class="button add-image" name="' . $field['id'] . '" value="' . $custom . '"><a href="#" class="remove-image">Remove Image</a>';
                    break;

                    // text
                    case 'text':

                        echo '<input type="text" class="text" name="' . $field['id'] . '" value="' . $custom . '">';

                    break;

                } //end switch

                echo '</td>';
                echo '</tr>';

        } // End foreach loop
             ?>
            </tbody>
        </table><!-- End .meta ds-input-table -->

        <ul class="ds-repeater-footer hl clearfix">
            <li class="right">
                <a href="#" class="repeatable-add ds-button">Add New Slide</a>
            </li>
        </ul><!-- End ul.hl clearfix repeater-footer -->

    </div><!-- End .ds-metabox -->

</div><!-- End .dsslider_manager_extras -->

<?php           
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:32:09.213

问题是您使用 $custom_meta_fields 数组来生成输入字段并使用免费键名从 $_POST 数组中获取信息。

这通常不会成为问题，但事实是您使用的某些字段实际上并未将信息传递给 $_POST 数组。一个例子：

```
case 'image':
    $image = get_template_directory_uri().'/images/image.png';
    echo '<span class="custom_default_image" style="display:none">'.$image.'</span>';

    if($custom) { 
        $image = wp_get_attachment_image_src($custom, 'thumbnail'); 
        $image = $image[0]; 

    } // end if statement

    echo '<img src="' . $image . '" class="custom_preview_image" alt="" />

    <input type="button" class="button add-image" name="' . $field['id'] . '" value="' . $custom . '"><a href="#" class="remove-image">Remove Image</a>';
break;

//Later on....
foreach ($custom_meta_fields as $field) {
    $old = get_post_meta($post_id, $field['id'], true);
    $new = $_POST[$field['id']]; //<-- BOOM
    if ($new && $new != $old) {
        update_post_meta($post_id, $field['id'], $new);
    } elseif ('' == $new && $old) {
        delete_post_meta($post_id, $field['id'], $old);
    }
} // end foreach 
```

在该 foreach 循环中，您试图获取一个不存在的变量 $_POST['dsmeta_image'] ，因为您的表单永远不会传递该特定键。一个简单的修复将是这样的：

```
foreach ($custom_meta_fields as $field) {
    if(isset($_POST[$field['id'])){
        $old = get_post_meta($post_id, $field['id'], true);
        $new = $_POST[$field['id']];
        if ($new && $new != $old) {
            update_post_meta($post_id, $field['id'], $new);
        } elseif ('' == $new && $old) {
            delete_post_meta($post_id, $field['id'], $old);
        }
    }
    else
        continue;
} // end foreach 
```

您还需要记住，Button 类型的输入字段不会将信息发送到 $_POST 数组。如果这是您的意图，您需要通过 Hidden Field 或其他方式发送您想要的信息。

希望这可以帮助。

# c# - 如何将密钥发送到应用程序

> ID：14055290
> 
> 赞同：0
> 
> 时间：2012-12-27T13:10:57.407
> 
> 标签：c#

我有一个非常基本的问题，对于一个游戏（Dota 2）我想写一个打开控制台的小宏，写“setinfo name”...... ......."" 进入它然后关闭它，控制台的热键设置为'#'。为此，我编写了一个应用程序，它侦听要按下的键“f”，然后发送

```
1) '#' (open the console)
2) "messag ebla bla b...."
3) '#' (close the console) 
```

一切正常，只是它不会打开控制台（但如果控制台已经打开，它会在我按 f 键时将 #messagej.j....# 写入其中）

我发送密钥的代码。

```
SendKeys.Send("#");
SendKeys.Send("my message for consol");
SendKeys.Send("#"); 
```

有人知道为什么热键不能通过发送密钥来工作吗？我认为这是对用户按下 F 或 Q 时的模拟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:31:14.857

您应该尝试的第一件事是在按键之间添加“软件”延迟。

```
string MSG = "#yourmessage#";
foreach (object c_loopVariable in MSG) {
    c = c_loopVariable;
    Sendkeys.Send(c);
    sleep(20);

} 
```

另一件要考虑的事情 - sendkeys 不会在硬件层模拟按键 - 它在 Windows API 级别，而 DirectX DirectInput.，大多数用于用户输入处理的游戏都更进一步。因此，您可能无法如此轻松地做到这一点。

您应该查看更多的 keybd_event。我使用它的运气更好——据我所知，它比发送键更深层次。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304(v=vs.85).aspx)

无论如何，我希望你不会在一款出色的游戏中使用它来发送垃圾邮件！:)

# asp.net-mvc-4 - MapRoute 用于重载 Action

> ID：14055294
> 
> 赞同：4
> 
> 时间：2012-12-27T13:11:06.793
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我有这个控制器：

```
public class ProfileController : Controller
{
    public ActionResult Index( long? userkey )
    {
        ...
    }

    public ActionResult Index( string username )
    {
        ...
    }
} 
```

我如何为这个动作定义 MapRoute 的工作方式如下：

> mysite.com/Profile/8293378324043043840

这必须首先采取行动

> mysite.com/Profile/MyUserName

这必须进行第二次行动

我有第一个行动的路线

```
routes.MapRoute( name: "Profile" , url: "Profile/{userkey}" , defaults: new { controller = "Profile" , action = "Index" } ); 
```

我需要添加另一个 MapRoute 吗？或者我可以为这两个动作更改当前的 MapRoute 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:27:10.003

首先，如果您使用相同的 Http Verb（在您的情况下为 GET），则不能重载控制器操作，因为您需要具有唯一的操作名称。

因此，您需要以不同的方式命名您的操作：

```
public class ProfileController : Controller
{
    public ActionResult IndexKey( long? userkey )
    {
        ...
    }

    public ActionResult IndexName( string username )
    {
        ...
    }
} 
```

或者您可以使用`ActionNameAttribute`为您的操作指定不同的名称：

```
public class ProfileController : Controller
{
    [ActionName("IndexKey")]
    public ActionResult Index( long? userkey )
    {
        ...
    }

    [ActionName("IndexName")]
    public ActionResult Index( string username )
    {
        ...
    }
} 
```

然后，您将需要两条路线，并在 上[使用路线约束](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx#adding_constraints_to_routes)`userkey`作为数值来设置您的操作：

```
routes.MapRoute(name: "Profile", url: "Profile/{userkey}",
                defaults: new { controller = "Profile", action = "IndexKey" },
                constraints: new { userkey = @"\d*"});

routes.MapRoute(name: "ProfileName", url: "Profile/{userName}",
                defaults: new {controller = "Profile", action = "IndexName"}); 
```

# python - 用python获取url标题

> ID：14055301
> 
> 赞同：-2
> 
> 时间：2012-12-27T13:11:28.407
> 
> 标签：python, url, title

我想问有没有办法用 python 获取 url 标题？如果是的话，简单的代码或只是任何想法如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:18:29.737

使用 BeautifulSoup 和 urllib2.urlopen 你可以尝试：

```
import urllib2
from BeautifulSoup import BeautifulSoup

#fetch html
source = urllib2.urlopen(url)

#parse with BeautifulSoup
BS = BeautifulSoup(source)

#search for title element, print element.text
print BS.find('title').text 
```

# c# - C# 应用程序中的堆栈溢出

> ID：14055302
> 
> 赞同：4
> 
> 时间：2012-12-27T13:11:30.540
> 
> 标签：c#, memory, stack-overflow

我对编程中的内存划分概念很陌生。我发现堆栈的大小在大多数情况下在 .NET 应用程序中为 1MB 左右。我的问题是：“在某些函数中我使用局部变量来表示大于 1MB 的“图像”类型时，堆栈溢出是如何出现的。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:13:55.600

因为`StackOverflow`异常与堆栈或堆内存管理无关。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)：

> 执行堆栈溢出时抛出的异常，因为它包含太多的嵌套方法调用。这个类不能被继承。

现在，如果您谈论的`stack`是就记忆而言，那么我们就在另一个世界中。您*存储在内存*中的图像可能保存在[大对象堆上](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)。内存管理及其讨论对于本论坛来说过于宽泛——但如果您有关于内存管理的具体问题，那么我们可以解决这个问题。

**重要的是你要明白你在你的问题中混合了两个命名法和概念，并且两者之间有明显的区别。我不希望你继续认为你应该`StackOverflow`因为大对象而获得例外。我*也不*希望您继续认为由于大对象和内存管理而导致*异常*。`StackOverflow`**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T13:13:22.213

图像本身不存储在堆栈中，它存储在堆中。只有一个指向图像的指针/引用保存在堆栈上，这要小得多。

```
public static void DoSomethingToImage()
{
    Image img = new Image(...);
} 
```

在上面的代码片段中，图像被分配在堆上，并且对图像的引用存储在`img`堆栈上的变量中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T13:14:21.280

只有作为值类型的局部变量才仅在堆栈上分配。对于`Image`只有引用分配在堆栈上的引用类型，对象分配在堆上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T13:13:16.627

您的局部变量实际上是引用（“指针”）。这些图像不存储在堆栈中；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T14:45:16.277

发生堆栈溢出错误的主要原因是有大量的函数调用，通过此错误的示例如下：

```
static int x = 0;

static void Main()
{
    fn();
}

static void fn()
{
    Console.WriteLine(x++);
    fn();
} 
```

发生这种情况是由于代码有问题，因为这通常发生在**数千次**调用之后。

上面的应用程序像这样退出：

```
...
15706
15707
15708
Process is terminated due to StackOverflowException. 
```

您可以学习在调试器中查看“调用堆栈”窗口，它将显示函数调用列表。

# ios - ios 回合制游戏调试和游戏中心开发

> ID：14055305
> 
> 赞同：0
> 
> 时间：2012-12-27T13:11:43.863
> 
> 标签：ios, game-center

我正在为 ios 设备开发基于回合的游戏。但是，当我使用模拟器在游戏中心创建比赛时，我无法在我的设备中检索比赛。我无法设置调试游戏的方式。你们能给我一些关于游戏中心开发的建议吗？1 个模拟器和 1 个带有 2 个测试帐户的设备就足够了吗？

谢谢你的建议

正义便士

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T23:42:07.923

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/TestingYourGameCenter-AwareGame/TestingYourGameCenter-AwareGame.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/TestingYourGameCenter-AwareGame/TestingYourGameCenter-AwareGame.html)查看此文档（尤其是页面底部）。

“排行榜和成就在模拟器中的工作方式与在设备上的工作方式相同。但是，当您的游戏在模拟器中运行时，可能无法发送或接收配对邀请。” 确实如此，这取决于您使用的 Xcode 版本和几件事。但请尝试在 Game Center MatchMaker UI 上选择“立即播放”。它通常工作正常。但是邀请通常是模拟器的一个恼人的问题。希望能帮助到你。

# c# - sharepoint 2013 结果源 api

> ID：14055306
> 
> 赞同：1
> 
> 时间：2012-12-27T13:11:45.940
> 
> 标签：c#, sharepoint-2013

我正在尝试在控制台应用程序中使用 c# 创建新的结果源并且每次都会出错，我成功更新了现有的结果源但无法创建新的结果源，这是我的代码：

```
using (SPSite oSPsite = new SPSite("http://XXXXXXX/sites/SearchAdministration"))
        {
            Microsoft.SharePoint.SPServiceContext context = SPServiceContext.GetContext(oSPsite);

            // Get the search service application proxy
            SearchServiceApplicationProxy searchProxy = context.GetDefaultProxy(typeof(SearchServiceApplicationProxy)) as SearchServiceApplicationProxy;

            // Get the search service application info object so we can find the Id of our Search Service App
            SearchServiceApplicationInfo ssai = searchProxy.GetSearchServiceApplicationInfo();

            // Get the application itself
            SearchServiceApplication application = Microsoft.Office.Server.Search.Administration.SearchService.Service.SearchApplications.GetValue<SearchServiceApplication>(ssai.SearchServiceApplicationId);

            FederationManager fedManager = new FederationManager(application);
            SearchObjectOwner owner = new SearchObjectOwner(SearchObjectLevel.SPSite, oSPsite.RootWeb);
            Source currentResultSource = fedManager.CreateSource(owner);
            currentResultSource.Commit();                 
        } 
```

错误在提交函数中-“您尝试的操作违反了对象之间的强制依赖关系，例如依赖于不存在的对象或删除其他对象依赖的对象。” 我注意到在创建结果源之后，currentResultSource.id 全为零

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:09:23.703

尝试为结果源分配至少一个属性。如果我为 currentResultSource 分配例如 Name 和 Provider Id，您的代码就可以工作；

```
using (SPSite oSPsite = new SPSite("http://hostsite.host/sites/SearchAdministration"))
        {
            SPServiceContext context = SPServiceContext.GetContext(oSPsite);                
            // Get the search service application proxy
            SearchServiceApplicationProxy searchProxy = context.GetDefaultProxy(typeof(SearchServiceApplicationProxy)) as SearchServiceApplicationProxy;
            // Get the search service application info object so we can find the Id of our Search Service App
            SearchServiceApplicationInfo ssai = searchProxy.GetSearchServiceApplicationInfo();
            // Get the application itself
            SearchServiceApplication application = Microsoft.Office.Server.Search.Administration.SearchService.Service.SearchApplications.GetValue<SearchServiceApplication>(ssai.SearchServiceApplicationId);
                //Microsoft.Office.Server.Search.Administration.SearchService.Service.SearchApplications.GetValue<SearchServiceApplication>(ssai.SearchServiceApplicationId);

            Microsoft.Office.Server.Search.Administration.Query.FederationManager fedManager = new Microsoft.Office.Server.Search.Administration.Query.FederationManager(application);
            SearchObjectOwner owner = new SearchObjectOwner(SearchObjectLevel.SPSite, oSPsite.RootWeb);
            Source currentResultSource = fedManager.CreateSource(owner);
            currentResultSource.Name = "Test Result Source ";
            currentResultSource.ProviderId = fedManager.ListProviders()["Local SharePoint Provider"].Id;
            currentResultSource.Commit();
        } 
```

# c# - NCrawler 中的自定义机器人过滤

> ID：14055309
> 
> 赞同：0
> 
> 时间：2012-12-27T13:12:39.623
> 
> 标签：c#, web-crawler

哪种是实现机器人过滤器的正确方法，`IRobot`在 Ncrawler 中扩展接口？

在我找到的少数文档中，说[这是可能的](http://ncrawler.codeplex.com/wikipage?title=InMemoryCrawler,%20IsolatedStorageCrawler,%20DbServices,%20what%20is%20that?)，但没有说如何去做。此外，我是 C# 的新手，所以我不明白一些代码。

特别是在示例中找到的以下部分，似乎很容易引入新的规则类而不是新的机器人过滤器：

```
// Register new implementation for ICrawlerRules using our custom class CustomCrawlerRules defined below
NCrawlerModule.Register(builder =>
        builder.Register((c, p) =>
            {
                NCrawlerModule.Setup(); // Return to standard setup
                return new CustomCrawlerRules(p.TypedAs<Crawler>(), c.Resolve<IRobot>(p), p.TypedAs<Uri>(),
                p.TypedAs<ICrawlerHistory>());
            }).
        As<ICrawlerRules>().
        InstancePerDependency()); 
```

`RobotService`类在某处“注册”，但在里面的任何地方都没有设置`CustomCrawlerRules`。所有代码都可以在[这里](http://ncrawler.codeplex.com/SourceControl/changeset/view/79962)找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:21:14.043

尝试在**NCrawlerModule**注册表中注册您自己的**CustomRobotService 。**

 **代码应该是这样的：

```
builder.Register((c, p) => new CustomRobotService(p.TypedAs<Uri>(), c.Resolve<IWebDownloader>())).As<IRobot>().InstancePerDependency(); 
```**

# javascript - 使用 PlacesServices 进行地理定位

> ID：14055312
> 
> 赞同：0
> 
> 时间：2012-12-27T13:12:53.710
> 
> 标签：javascript, html, google-maps, geolocation

我想要做的是使用 Geolocation API 找到我当前的位置，然后添加谷歌地点，以显示我周围的情况。然而我到目前为止只返回一个特定的位置......

```
 <script>
  var map;
  var infowindow;

  function initialize() {
    var pyrmont = new google.maps.LatLng(-33.8665433, 151.1956316);

    map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 15
    });

    var request = {
      location: pyrmont,
      radius: 500,
      types: ['store']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

如您所见，pyrmont - 给了我经纬度，但我想用这个替换用户当前的位置。所以我可以找出他们在哪里，然后给他们一些商店。当我尝试这样做时，我一直在画一个空白。我以前做过地理定位：

```
new google.maps.LatLng(position.coords.latitude, position.coords.longitude); 
```

但是，如果我在 lat long 部分使用这个 var，我会得到一个可爱的错误。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:35:30.773

好的，这样做了：

```
 <script>
 var map;

      function initialize() {
        var mapOptions = {

        };
        map = new google.maps.Map(document.getElementById('contact-map'),{
    zoom: 15,
    mapTypeId: google.maps.MapTypeId.ROADMAP   
        });

        // Try HTML5 geolocation
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
                                             position.coords.longitude);

            var request = {
          location: pos,
          radius: 500,
          types: ['store']
        };

            var marker = new google.maps.MarkerImage('../img/layout/marker.png');

            var infowindow = new google.maps.InfoWindow({
              map: map,
              position: pos,
              icon: marker,
              content: 'youre here'
            });
            var service = new google.maps.places.PlacesService(map);
            service.nearbySearch(request, callback);            

            function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
          }
        }
      }

      function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });
      google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
  });
  }

            map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });
        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }
      }

      function handleNoGeolocation(errorFlag) {
        if (errorFlag) {
          var content = 'Error: The Geolocation service failed.';
        } else {
          var content = 'Error: Your browser doesn\'t support geolocation.';
        }

        var options = {
          map: map,
          position: new google.maps.LatLng(60, 105),
          content: content
        };

        var infowindow = new google.maps.InfoWindow(options);
        map.setCenter(options.position);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

# android - 如何正确扩展 WebView？

> ID：14055313
> 
> 赞同：3
> 
> 时间：2012-12-27T13:12:54.473
> 
> 标签：android, webview, android-viewpager

我在[ViewPager 中使用水平滚动 webview 的解决方案](https://stackoverflow.com/questions/7774642/scroll-webview-horizontally-inside-a-viewpager/9925980)

它看起来很有用，我在 xml 中引用了 ExtendedWebView，

```
<ExtendedWebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

.class 中的实例 ExtendedWebView，

```
LayoutInflater mInflater =  (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
layout  = mInflater.inflate(R.layout.lay1, null);
ExtendedWebView webView = (ExtendedWebView)layout.findViewById(R.id.webview); 
```

但我得到'错误膨胀类 ExtendedWebView'，所以任何人都可以帮助我给我一些想法，感谢您的时间和经验！

这是整个堆栈跟踪，

```
12-27 22:14:44.263: E/AndroidRuntime(10824): FATAL EXCEPTION: main
12-27 22:14:44.263: E/AndroidRuntime(10824): android.view.InflateException: Binary XML file line #7: Error inflating class com.vv_package_name.ExtendedWebView
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at com.vv_package_name.vv_main$ExtendedPagerAdapter.instantiateItem(vv_main.java:135)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.support.v4.view.ViewPager.populate(ViewPager.java:930)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.View.measure(View.java:8226)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.View.measure(View.java:8226)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.View.measure(View.java:8226)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.View.measure(View.java:8226)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.View.measure(View.java:8226)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.os.Looper.loop(Looper.java:123)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.app.ActivityThread.main(ActivityThread.java:4627)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at java.lang.reflect.Method.invokeNative(Native Method)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at java.lang.reflect.Method.invoke(Method.java:521)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at dalvik.system.NativeStart.main(Native Method)
12-27 22:14:44.263: E/AndroidRuntime(10824): Caused by: java.lang.ClassNotFoundException: com.vv_package_name.ExtendedWebView in loader dalvik.system.PathClassLoader[/data/app/com.vv_package_name-2.apk]
12-27 22:14:44.263: E/AndroidRuntime(10824):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.createView(LayoutInflater.java:466)
12-27 22:14:44.263: E/AndroidRuntime(10824):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
12-27 22:14:44.263: E/AndroidRuntime(10824):    ... 33 more 
```

如果使用 WebView 而不是 ExtendedWebView，我的代码工作正常 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:15:01.950

您需要提供对该类的完整引用，包括包。

例如，

```
<org.example.myapp.ExtendedWebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
 /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T09:58:28.997

抱歉，我是菜鸟，这是我的问题，我将这些扩展 webview 代码放在主 Activity 类中的一个 .class 文件中...它应该与独立的 .class 文件一起保存...:)

```
public class ExtendedWebView extends WebView { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-14T15:30:08.767

通过在我的 XML 中使用它为我解决了：

```
 <view
    class="com.example.MainActivity$MyWebView"
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/> 
```

# c# - 在我的 Windows 应用程序中从 SQL Server 2008 R2 访问多个数据库

> ID：14055314
> 
> 赞同：-4
> 
> 时间：2012-12-27T13:12:54.570
> 
> 标签：c#, sql-server-2008-r2

如何在我的 Windows 应用程序中从 SQL Server 2008 R2 访问多个数据库？

我想在我的 windows 应用程序中从单个 sqlserver 访问多个数据库。例如：我想从 DB1 中选择学生详细信息，我想从 DB2 中选择员工详细信息，两者都在我的单一 windows 应用程序中使用，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:27:25.850

您最好尝试将实体保存在一个数据库中，但如果由于某种原因您不能或不想这样做，解决方案是在您的应用程序中使用多个连接字符串。

并且根据您选择的 ADO.Net 选择，可以有不同的方法来实现。

编辑：这就是我的做法`Linq-to-Sql`

我有两个数据库，每个数据库都有一个表，这是架构：

**TeachersDB**（第一个数据库）：-
Teachers {TeacherID [int], TeacherName[string]}

**StudentsDB**（第二个数据库）： -Students
{StudentID [int], TeacherID[int] StudentName[string]}

```
StudentsDataContext studentsDB = new StudentsDataContext();
TeachersDataContext teachersDB = new TeachersDataContext(); 
```

*所以每个学生都有一个老师（为了简单起见）*

```
Student st;
Teacher t;

st = (from stu in studentsDB.Students
     where stu.StudentID == int.Parse(txtStudentID.Text)
     select stu).SingleOrDefault<Student>();

t = (from teach in teachersDB.Teachers
    where teach.TeacherID == st.TeacherID
     select teach).SingleOrDefault<Teacher>();

MessageBox.Show(t.TeacherName); 
```

如您所见，我从两个表（每个表都在一个单独的数据库中）获取数据并将它们保存在内存中（类对象 st 和 t），然后与它们一起工作并找到学生老师。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:26:18.180

为此，您可以使用不同`connectionstrings`的方式将 设置`initial catalog`为不同的数据库。
硬编码在代码中，它们看起来像：

```
SqlConnection conn1 = new SqlConnection("Data Source=YourServer;Initial Catalog=Db1;User   Id=user;Password=pass;")
SqlConnection conn2 = new SqlConnection("Data Source=YourServer;Initial Catalog=Db2;User Id=user;Password=pass;") 
```

并为每个特定查询使用连接字符串。那些你也可以添加到你的`app.config`or`web.config`中。

或者当您的ie中`USE MyDbName`没有`Initial Catalog`指定时，在您的查询顶部添加一个。在这种情况下，您将为两个数据库使用相同的连接字符串。`connectionstring``USE MyDbName SELECT * FROM MyTable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:28:11.623

您将需要 2 个连接字符串，根据您的需要将其发送到该方法，并将您的网格/数据连接到任何需要的地方。

```
using(SqlConnection connection = new SqlConnection(<connstring>))
{
connection.Open();

SqlCommand command = new SqlCommand();
command.Connection = connection;

command.CommandText = <query1>;
using(SqlDataReader reader = command.ExecuteReader())
{

DataGrid1.DataSource = reader;
DataGrid1.DataBind();
}

command.CommandText = <query2>;
using(SqlDataReader reader = command.ExecuteReader())
{

DataGrid2.DataSource = reader;
DataGrid2.DataBind();
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:28:52.840

创建一个 App.Config 文件并在 appsettings 中添加以下内容：

```
<appSettings>
    <add key="appDSN" value="data source=SERVER-NAME;initial catalog=StudentDB;integrated security=SSPI;persist security info=False;packet size=4096" />
    <add key="appDSN2" value="data source=SERVER-NAME2;initial catalog=EmpolyeeDB;integrated security=SSPI;persist security info=False;packet size=4096" />
</appSettings> 
```

键是您给设置的名称，在这种情况下，值是连接字符串

并在连接以从两个数据库中检索数据时使用以下内容：

```
//
// In a using statement, acquire the SqlConnection as a resource.
//
using (SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["appDSN1"]))
{
    //
    // Open the SqlConnection.
        //
    con.Open();
    //
    // The following code shows how you can use an SqlCommand based on the SqlConnection.
    //
    using (SqlCommand command = new SqlCommand("SELECT * FROM Students", con))
    using (SqlDataReader reader = command.ExecuteReader())
    {
    while (reader.Read())
    {
          //read through the first database
    }
    }
}

//
// In a using statement, acquire the SqlConnection as a resource.
//
using (SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["appDSN2"]))
{
    //
    // Open the SqlConnection.
        //
    con.Open();
    //
    // The following code shows how you can use an SqlCommand based on the SqlConnection.
    //
    using (SqlCommand command = new SqlCommand("SELECT * FROM employees", con))
    using (SqlDataReader reader = command.ExecuteReader())
    {
    while (reader.Read())
    {
          //read through the second database
    }
    } 
```

这是使用 sqlreader 的简单而古老的方法。今天更多的是使用 mahdi tahsildari 方式（Linq to SQL）。

# tridion - Tridion Query：根据关键字列表过滤/排除组件

> ID：14055315
> 
> 赞同：3
> 
> 时间：2012-12-27T13:12:55.180
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在使用 Tridion.ContentDelivery.DynamicContent.Query。我正在尝试过滤组件并通过分类关键字排除其中一些组件，我的代码：

```
List<Criteria> excludeCriteria = new List<Criteria>();
foreach (string keywordUri in excludeKeywords)
{
    excludeCriteria.Add(new TaxonomyKeywordCriteria(categoryUri, keywordUri, false));                                
}
Criteria criteria = new NotInCriteria(new AndCriteria(excludeCriteria.ToArray())));
Query query = new Query(criteria); 
```

问题是，结果我有一个仅按分类关键字标准之一过滤的列表。应用 excludeKeywords 列表中的第一个条件，而忽略所有其他条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:06:29.837

我不完全确定，但我有一种感觉，当你像这样添加标准时，你会以某种方式得到一个 OR 列表（你可以检查代理的调试日志，应该在那里执行查询）。

您可以换一种方式尝试，将您的 TaxonomyKeywordCriteria 包装在 NotInCriteria 中并将其添加到 AndCriteria 中吗？所以是这样的：

```
List<Criteria> excludeCriteria = new List<Criteria>();
foreach (string keywordUri in excludeKeywords)
{
    excludeCriteria.Add(new NotInCriteria(new TaxonomyKeywordCriteria(categoryUri, keywordUri, false)));                                
}
Criteria criteria = new AndCriteria(excludeCriteria.ToArray()));
Query query = new Query(criteria); 
```

# perl - 使用 JSON-RPC 协议的 Perl 客户端到 API 使用哪些模块？

> ID：14055316
> 
> 赞同：2
> 
> 时间：2012-12-27T13:12:55.380
> 
> 标签：perl, json-rpc, mojolicious

我希望为使用 JSON-RPC 的 API 开发一个 perl 客户端。为此使用的最佳模块是什么？使用 Mojolicious 可能/有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:54:53.853

Mojolicious 有非常好的 JSON 编码/解码，虽然下面的示例并不完全是 JSON-RPC，但让它完全兼容是微不足道的：

```
post '/prefetch' => sub {
    my ($self) = @_;

    my $post = $self->req->json;

    my %row;
    for my $key (qw(country state city district suburb address number complement latitude longitude)) {
        $row{$key} = $post->{$key} if exists $post->{$key};
    } 
```

# javascript - 如果“它们不适合”，如何使图像填充 100% 的 div

> ID：14055319
> 
> 赞同：0
> 
> 时间：2012-12-27T13:13:15.210
> 
> 标签：javascript, css

我有多个图像（50x50），我的网站宽度是 980 像素

我想用图像填充一行，没有任何间隙。但是如果没有你的任何 CSS/JS/帮助，第 20 张图像最终会出现在第二行。

如何显示第 20 张图像中的 40%？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:17:55.197

在你的`container`div 上：

```
#container{
    overflow:hidden; /* Hide the overflow */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:17:29.707

我自己找到了解决方案。

使用 CSS 显示较短的宽度：

```
<?php
    $img = "";
    $width = 50;
    for($i=0;$i<20;$i++) {
        if($i == 19) {
            $width = 30;
        }
?>
<img src="<?=$img;>" style="width: <?=$width;?>px; height:50px;" />
<?php
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:28:45.457

```
img:nth-child(20n) { width:30px; } 
```

# mysqli - 关于 Select 语句的准备语句

> ID：14055321
> 
> 赞同：0
> 
> 时间：2012-12-27T13:13:20.967
> 
> 标签：mysqli, prepared-statement

我刚刚开始将我网站的所有代码转换为准备好的语句以提供额外的安全缓冲，但我发现自己遇到了同样的问题。

经过一番阅读，我决定在所有选择查询中使用准备好的语句，但是我不确定这些查询中的所有变量是否都需要在准备好的语句中用作“参数”。

例如：

> 1.  其中 some_column 为 NULL
> 2.  其中 some_column = $_SESSION['some-session-var']
> 3.  其中 some_column IN ($someArray)

另外，有没有办法给每个条件一个“名称”而不是使用问号？我觉得我以前在文档中看到过这个，但从那以后我就没有找到它了。

例如：`Where city_name = :cityName`。如果是这样，我将如何在这里绑定参数？

谢谢，

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:16:37.943

是的。所有进入查询的数据都应该通过占位符添加。否则根本没有安全感。

尽管准备好的语句非常有限并且仅支持标量值，因此，您的第一个和第三个示例需要额外的编码（示例可以在标签下找到很多）

您提到的命名占位符属于 PDO，mysqli 不支持它们

# symfony - Symfony2 学说级联删除子关系

> ID：14055323
> 
> 赞同：1
> 
> 时间：2012-12-27T13:13:22.860
> 
> 标签：symfony, doctrine

考虑一个有 0..n 个孩子的父母。当我从父对象中删除子对象并保留父对象时，我需要删除子对象。目前，我得到这个工作的唯一方法是实际删除孩子，就像这样：

```
$parent->removeChild($child);
$em->remove($child); 
```

我认为我的关系设置正确，因为如果我完全删除父项，则子项也会从数据库中删除。为什么以下行不足以删除孩子？：

```
$parent->removeChild($child); 
```

很少的背景信息：我正在尝试使用 x 个子对象更新父对象，我需要删除以前关联的子对象并添加新的子对象。但我觉得我应该需要遍历这两个集合以找出要删除和/或添加的集合。

有没有人有一个明确的例子？请忘记 Symfony 的/Doctrine 的文档。我都读过了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:32:26.013

孩子有自己的生活，你不应该仅仅因为他们与父母分开就抛弃他们。换句话说，它们是独立的实体，在许多用例中，您会破坏关系但仍想维护两个对象，因此当我们删除它的关系时，我们不会自动删除一个对象。

您的直觉是正确的，您确实需要遍历这两个列表。我知道您说过您阅读了所有文档，但请再看一下[如何嵌入表单集合](http://symfony.com/doc/current/cookbook/form/form_collections.html#allowing-tags-to-be-removed)的结尾。它包括一个用于父对象的工作编辑功能，它正是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-07T12:30:42.730

如果您的子实体在没有父实体的情况下不应该存在，并且父实体私有地拥有子实体，那么您可以使用 orphanRemoval。

```
/** 
 * @OneToOne(targetEntity="StandingData", orphanRemoval=true) 
 */
private $standingData;

$contact->standingData(new StandingData("Firstname", "Lastname", "Street")); 
```

如果联系人有旧的“standingData”，它将从数据库中删除。有关更多信息，请参阅[http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#orphan-removal](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#orphan-removal)。

# git - 如何在“commit -a”中输入邮件主题和邮件核心？

> ID：14055327
> 
> 赞同：1
> 
> 时间：2012-12-27T13:13:46.963
> 
> 标签：git

我正在为使用 git 作为存储库的开源开发做出贡献。

在完成我的修改后，我`git commit -a`为了在本地提交

`git commit -a`然后我在窗口的评论字段中输入我的评论

然后，如果我发送补丁，`git send-email`我会在电子邮件的主题中收到整个消息。

我想在`git commit -a`窗口中分别输入主题和电子邮件核心

怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:05:53.227

您需要在以下之间放置一个空行：

*   提交信息的第一行，将用作主题）和
*   提交消息的其余部分，将由[`git send-email`](http://git-scm.com/docs/git-send-email).

# android - 使用意图通过引用传递参数

> ID：14055333
> 
> 赞同：3
> 
> 时间：2012-12-27T13:14:01.590
> 
> 标签：android, reference

使用`itent.putExtra`复制我的对象。因此，在接收该项目的活动上对该对象所做的更改不会反映其他活动。

在我的情况下，最好参考这个对象而不是副本，这可能吗？

ps：我知道我可以`onActivityResult`用来检索对对象所做的更改，但在我的情况下，对对象所做的更改需要在活动结束之前完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:21:11.153

另一种方法是：设置对来自 activity1 的公共属性的引用（我正在使用 MyApplication）。activity2 知道在哪里可以通过 getter 找到该引用，并将使用它。决定是否要修改activity2中的属性，完成后/每次都可以在activity1中有引用。

这种方式也不需要序列化/反序列化对象。（也提高了性能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:24:53.667

您可以将对象的引用存储在静态成员变量中，如下所示：

```
public class Globals {
     public static MyObject myObject;
} 
```

现在，在包含该对象的代码中，您只需执行以下操作：

```
Globals.myObject = object; 
```

在新活动中，您可以像这样获得它：

```
doSomethingWith(Globals.myObject); 
```

现在，话虽如此，您需要注意以下几点：

如果您的应用程序几乎随时都在后台，Android 可以终止您的进程。当用户然后返回到您的应用程序时，Android 将为您的应用程序创建一个新进程，然后它将**仅重新创建位于活动堆栈顶部的活动**（即：正在显示的活动）。在这种情况下，新创建的活动将无法通过访问来获取 iobject，`Globals.myObject`因为该进程是新创建的并且该成员变量为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:30:38.270

您应该使用 Application 类，您可以使用 getApplicationContext() 方法获得对它的引用。

最重要的是，创建一个应用程序类，您将能够从应用程序中的任何类引用它，然后您可以引用该类的本地变量。

这是一个很好的 SO 问题： [Using the Android Application class to persist data](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)

# jquery - Jquery号码验证+印度

> ID：14055337
> 
> 赞同：1
> 
> 时间：2012-12-27T13:14:17.190
> 
> 标签：jquery, jquery-validate, numbers, comma

这是一个更具体的地区问题。我正在 asp.net mvc3 中为印度开发一个应用程序。

我有一个采用十进制值的字段。如果以印度格式输入的数字，则该字段的 jQuery 验证将失败。

示例：如果我输入，Jquery 工作正常：

```
500000.12 
```

或者

```
500,000.12 
```

但是当它以印度格式编写时失败，即

```
5,00,000.12 // Fails with error - This is not a number. 
```

在印度格式中，

```
5,000 = 5,000
50,000 = 50,000
500,000 = 5,00,000
5,000,000 = 50,00,000
50,000,000 = 5,00,00,000 
```

我应该怎么做才能确保数字字段的 jQuery 验证不会失败？

非常感谢

/////////////////////////

我在这里找到了解决方案[MVC 3 jQuery Validation/globalizing of number/decimal field](https://stackoverflow.com/questions/5199835/mvc-3-jquery-validation-globalizing-of-number-decimal-field)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:10:07.057

我在 Microsoft 的 jQuery Globalization 插件中找到了答案

```
<script src="@Url.Content("~/Scripts/jquery.globalize/globalize.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.globalize/cultures/globalize.culture.hi-IN.js")" type="text/javascript"></script>
<script type="text/javascript">
    $.validator.methods.number = function (value, element) {
        return !isNaN(Globalize.parseFloat(value));
    }

    $(document).ready(function () {
        Globalize.culture('hi-IN');
    });
</script> 
```

这是基于[MVC 3 jQuery Validation/globalizing of number/decimal field](https://stackoverflow.com/questions/5199835/mvc-3-jquery-validation-globalizing-of-number-decimal-field)

# php - TinyMce 中的顶部填充

> ID：14055342
> 
> 赞同：0
> 
> 时间：2012-12-27T13:14:46.277
> 
> 标签：php, mpdf

我使用 TinyMce 加载用户可以填写的模板。它后来被转换为使用 MPDF 的 PDF。现在我的问题是我无法减少纸张顶部和文本之间的空间有什么解决方案为了那个原因。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:26:02.793

这与 TinyMCE 几乎没有任何关系，因为您需要告诉 MPDF 设置页面上的边距。

您可以在[MPDF 构造函数](http://mpdf1.com/manual/index.php?tid=184)中以毫米为单位指定边距。

`$margin_left`， ETC：

> 设置新文档的页边距。所有值都应指定为以毫米为单位的 LENGTH。如果您正在创建双面文档，则指定的边距值将用于奇数页；偶数页的左右边距将被镜像。BLANK 或省略使用默认值。

# php - 使用 smarty 模板引擎在数组中打印数组

> ID：14055343
> 
> 赞同：1
> 
> 时间：2012-12-27T13:14:46.707
> 
> 标签：php, templates, foreach, smarty

我有一个这样的数组。这个数组的树形结构很大。我想使用 html 文件中的 smarty 标签打印数组。我正在使用此代码来执行此操作，

在 PHP 文件中这样分配，`$smarty->assign("arrForumData", $arrForumData);`

在这样的 HTML 文件中，用于一维数组。

```
{foreach item=foo from=$arrForumData}
{$foo.question}
{$foo.name} etc...
{/foreach} 
```

我不知道如何在 smarty 中打印如下所示的数组。请指导我如何在 smarty 中打印多维数组。希望我的问题很清楚。提前致谢。

![大批](../Images/5ba7d5f9a65eb65a2361fcdf4dd277d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:47:47.697

准确的答案。工作对我来说完美。

```
{foreach name=outer item=v from=$arrForumData}
        {$v[0].question_id}
        {$v[0].project_id}
        {$v[0].name}
        {$v[0].email}
        {$v[0].question}
        {$v[0].created_on}

      {foreach key=key item=item from=$v[1]}
        {$item.aQId}
        {$item.aAns}
        {$item.aName}
        {$item.aEmail}
        {$item.aDate}
      {/foreach}
{/foreach} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:21:16.513

你可以尝试这样的事情：

```
{foreach key=key item=item from=$arrForumData}
  {if $item|@is_array}
    {foreach key=inner_key item=inner_item from=$arrForumData[$key]}
      {if $inner_item|@is_array}
        {foreach key=innermost_key item=innermost_item from=$arrForumData[$key][$inner_key]}
            {$innermost_item.aQId}
            {$innermost_item.aAns}
            {$innermost_item.aName}
            {$innermost_item.aEmail}
            {$innermost_item.aDate}
        {/foreach}
      {else}
        {$inner_item.question_id}
        {$inner_item.project_id}
        {$inner_item.name}
        {$inner_item.email}
        {$inner_item.question}
        {$inner_item.created_on}
      {/if} 
    {/foreach}
 {/if}
{/foreach} 
```

# c++ - 在 Qt 中缩放 QImage

> ID：14055347
> 
> 赞同：-2
> 
> 时间：2012-12-27T13:15:05.897
> 
> 标签：c++, image, qt, scale, qimage

将图像绘制为背景的最简单方法是`QGraphicsRectItem`什么？我可以按如下方式设置背景，但无法缩放图像：

```
 QGraphicsRectItem *enemyItem;

 QImage *image = new QImage(":/PaperMario.png");

 QBrush *brush = new QBrush(*image);

 enemyItem = new QGraphicsRectItem();
 enemyItem->setBrush(*brush);

 enemyItem->setRect(enemy->getXPos()*30,enemy->getYPos()*30,30,30);
 scene->addItem(enemyItem); 
```

在 QGraphicsRectItem 里面

```
void MySquare::setBrush(QColor _color){
    color = _color;
    color_pressed = _color;
    update(); //repaint
} 
```

我已经尝试过使用：

```
QBrush *brush = new QBrush(*image->scaled(10)); 
```

但我被困住了：不想编译。这是这样做的方法吗？

编辑：

```
 QImage *image = new QImage(":/PaperMario.png");
    QImage *scaled_image = new QImage(image->scaled(35,35,Qt::KeepAspectRatio));
    QBrush *brush = new QBrush(*scaled_image); 
```

确实绘制了它，但它仍然在绘图中多次显示图像 ![在此处输入图像描述](../Images/6f9bfb7911e9187f9138220345c4319c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:27:39.463

当您在场景中显示图像时（我猜）为什么不使用`QGraphicsScene::addPixmap(QPixmap)`并使用 将`QPixmap::fromImage ( const QImage & image, Qt::ImageConversionFlags flags = Qt::AutoColor )`图像转换为正确的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:22:28.307

`*image->scaled(10)`不适用于`QImage*`. 要么你写`*image.scaled`，要么（更好）`image->scaled`。

# jquery - 在响应式设计中禁用灯箱

> ID：14055352
> 
> 赞同：2
> 
> 时间：2012-12-27T13:15:23.777
> 
> 标签：jquery, responsive-design, fluid-layout

我搜索了以前关于 jQuery 和响应式设计的 SO 帖子，但没有找到类似的东西。我的问题是，我有一个网站，当它达到 > 960 像素时，它会掉下所有的眼睛糖果并变得流畅。在某些页面上，我使用灯箱从缩略图中预览更大的图像。当 960px 被击中时，我想放弃灯箱效果。这是我设置灯箱的方式：

灯箱：

```
<a href="images/some-img.jpg" rel="lightbox" title="some title">some text &raquo;</a> 
```

有没有办法说在 > 960px 处使用 jQuery 禁用 rel="lightbox"？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T13:29:41.747

为此，您必须使用 js。根据您使用的灯箱库，您可能需要在重新`rel`添加灯箱属性后重新初始化它。

```
var lightboxOnResize = function lightboxOnResize() {
    if ($(window).width() < 960) {
        $('a[rel="lightbox"]')
            .removeProp('rel')
            .addClass('lightboxRemoved');
    } else {
        $('a.lightboxRemoved').prop('rel', 'lightbox');
    }
}

$(document).ready(lightboxOnResize);
$(window).resize(lightboxOnResize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:22:55.117

像这样的东西可能会起作用：此代码未经测试，只会删除`rel="lightbox"`，而不会在调整大小时将其重新添加。如果它对您很重要，应该很容易添加它。

```
var responsiveLightbox = function () {
   var viewportWidth = $(window).width();
   if (viewportWidth > 960){
       $('[rel=lightbox]').attr('rel', '');
   }
}

$(document).ready(function() {
    responsiveLightbox();
});
$(window).resize(function() {
    responsiveLightbox();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:21:11.750

这是编码方法。

在将 lightbox 连接到 div 时，您需要设置一个条件。

条件类似于

if(screenPixel>960) { 将我的灯箱添加到 div }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T08:53:38.080

以前的答案都不适用于我从特定元素中删除 Lightbox，因此我发布了另一个解决方案，可以帮助当前遇到类似问题的人。

我的 Lightbox2 版本调用一个`initList`函数，该函数绑定`click`函数并基于 DOM 中已“标记”哪些元素以供 Lightbox 调用，然后调用该`start`函数。如果您想为特定屏幕尺寸的特定元素禁用 Lightbox，那么取消绑定 click 事件可能会起作用。

**解除绑定时要小心，因为可能有其他脚本具有附加到元素的点击行为！如果您将处理程序存储在变量中，您可以稍后引用这样的行为`unbind('click', handler)`。不幸的是，我的 Lightbox2 版本没有以这种方式设置，据我所知，[Github 上的 2.8.2](https://github.com/lokesh/lightbox2/releases/tag/v2.8.2)版本没有取消绑定功能，也没有全局引用处理程序变量。因此，在这种情况下，当您需要保留其他附加的点击事件时，您必须调整代码库。**

无论如何，代码将类似于：

```
$(document).ready(function() {
  if (screen.width < 1024) {
    $('#some-id').unbind('click');
  }
}); 
```

您甚至不必删除元素中的`rel`属性：`a`

```
<a href="./linkedcontenturl.ext" id="some-id" rel="lightframe" target="_blank">click here!</a> 
```

根据您链接到的内容（例如 PDF），添加也可能是一个好主意`target="_blank"`，但重要的是首先在目标设备集上测试体验，不同的设备可能会显示不同的行为。

# google-chrome - 如何在 chrome web 检查器中隐藏内容脚本选项卡

> ID：14055354
> 
> 赞同：1
> 
> 时间：2012-12-27T13:15:34.743
> 
> 标签：google-chrome, web-inspector

内容脚本选项卡没用，不是吗？默认情况下如何隐藏它并显示源选项卡？

![在此处输入图像描述](../Images/d6060cef5ad5d45b4b8238396d088a0a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:47:56.943

不幸的是，除非你想重新编译 Chrome 的专有代码（如果你能得到它），否则这是不可能的。您可以使用 O/S 的 Chromium 来做到这一点。

也就是说，当我为我编写了自定义内容脚本的 SysAdmin Chromium 浏览器时，我发现内容脚本选项卡很有用。

# ios - UIView 框架的动画更改不起作用

> ID：14055356
> 
> 赞同：1
> 
> 时间：2012-12-27T13:15:40.657
> 
> 标签：ios

我有一个包含几个子视图的屏幕。在用户的交互上，我想再添加一个子视图，改变其他子视图的位置，让它们同时消失。我的代码是：

```
[self.view addSubview:imageView];
[UIView animateWithDuration:0.3
                      delay:0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     for (UIView *currentItemView in self.currentItemViews) {
                         currentItemView.center = someCenter;
                         currentItemView.alpha = 0;
                     }
                 } completion:^(BOOL finished) {

                 }]; 
```

在我使用新的子视图添加代码之前一切正常，但现在唯一的动画是 alpha 的设置。子视图不动。知道为什么以及如何解决这个问题吗？

提前致谢！

**编辑：**

创建`currentItemViews`数组的代码：

```
self.currentItemViews = [[NSMutableArray alloc] initWithCapacity:6];
for (Item *item in arrayOfItems) {
    ItemView *itemView = [[NSBundle mainBundle] loadNibNamed:@"ItemView" owner:self options:nil].lastObject;
    itemView.item = item;
    [self.currentItemViews addObject:itemView];
    [self.view addSubview:itemView];
} 
```

我`ViewController`在，是一个 childViewController 到另一个，所以它的视图也被添加为子视图。这可能是问题吗？

# php - 带有会话的 PHP 登录页面

> ID：14055363
> 
> 赞同：0
> 
> 时间：2012-12-27T13:16:18.473
> 
> 标签：php, mysql, session, login

我用 php mysql 创建了一个登录页面。它工作正常，但我不理解代码的一部分。我了解 php 会话，但无法弄清楚是什么`$obj = @mysql_fetch_object($r)`意思：

```
$r = mysql_query($q); 
if ( $obj = @mysql_fetch_object($r) )
{
    $_SESSION["valid_localid"] = $obj->id;
    $_SESSION["valid_localuser"] = $_POST["username"];
    $_SESSION["valid_localtime"] = time();

    Header("Location: homepage.php");
}
else
{
    die("Sorry, could not log you in. Wrong login information.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:22:19.717

mysql_fetch_object 是一个 PHP 函数，它将获取结果行作为对象。@ 运算符只是意味着该表达式可能生成的任何错误消息都将被忽略。[您可以在http://www.php.net/manual/en/](http://www.php.net/manual/en/)获得更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:22:29.983

该`mysql_fetch_object()`函数将记录集中的一行作为对象返回，您正在使用`@mysql_fetch_object()`它来抑制错误消息和警告。

有关`mysql_fetch_object()`阅读手册的更多信息：

[http://php.net/manual/en/function.mysql-fetch-object.php](http://php.net/manual/en/function.mysql-fetch-object.php)

# assembly - 模拟 Intel TSX 指令

> ID：14055367
> 
> 赞同：5
> 
> 时间：2012-12-27T13:16:39.537
> 
> 标签：assembly, x86, emulation, intel-tsx

我想在芯片可用之前试用新的 Intel TSX 指令。英特尔是否提供了仿真器，或者是否有其他一些被广泛使用的技术？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T22:53:33.000

请务必注意，如果您为任何大中型公司工作，英特尔可能会为您提供免费硬件（就像我们一样）。

> 对于这个实验，需要最新版本 (5.31) 的英特尔® 软件开发模拟器（英特尔® SDE）和一个可以生成 RTM 指令（通过内在函数或直接机器代码）的编译器。请注意，使用运行 RTM 的英特尔 SDE 进行性能测量的价值有限，因为在软件中模拟 TM 而不是使用真实硬件的开销很大，但正如您稍后将看到的那样，英特尔 SDE 已经可以向并发库开发人员展示 RTM 使用的要点和应用程序程序员。

请参阅[http://software.intel.com/en-us/blogs/2012/11/06/exploring-intel-transactional-synchronization-extensions-with-intel-software](http://software.intel.com/en-us/blogs/2012/11/06/exploring-intel-transactional-synchronization-extensions-with-intel-software)

# python - 在 python 中处理巨大的数组

> ID：14055373
> 
> 赞同：2
> 
> 时间：2012-12-27T13:17:06.303
> 
> 标签：python, memory, virtual-memory

我的程序运行一个模拟，它需要巨大的对象来存储数据。blob 的大小大于 2-3GB。即使我的 MBP 中应该有足够的内存，python（Mac OS X 上的 Python 2.7.3，来自端口）似乎无法全部使用它，并且系统完全冻结。

为了保存模拟的状态，我使用了pickle，但它也不适用于太大的对象，似乎pickle会在转储之前复制内存中的对象......

问题：是否有一个标准库可以处理巨大的 python 数据结构（dict、set、list），而不会将它们一直保存在内存中？或者有没有办法强制 python 在虚拟内存中运行？（我对 numpy 不是很熟悉，在这种情况下对我有帮助吗？）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:31:26.087

如果您使用的是 64 位版本的 Python，但仍然遇到`pickle`其他内置模块或其他内置模块的问题，则可以将 Python 对象存储在面向对象的数据库中。我们每天都在这里处理大型对象（~10GB），并为此使用[ZODB](http://zodb.org/)。这不是最快的，但可以完成工作。

我还听说[dobbin](http://pypi.python.org/pypi/dobbin)可能是一个不错的选择。

# wcf - SvcUtil 不生成 .xsd 文件

> ID：14055374
> 
> 赞同：2
> 
> 时间：2012-12-27T13:17:16.163
> 
> 标签：wcf, xsd, wsdl, svcutil.exe

我想通过在服务描述中添加几个新方法来更新我的 WCF 服务。我已经使用新方法构建了新的 dll，将它们复制到托管在远程服务器的 IIS 上的 WCF 网站的 bin 文件夹中，并尝试使用 svcutil 生成新的代理。

但是，Svcutil 不会生成 .xsd 文件。mex 端点已设置，httpGetEnabled 设置为 true。IIS 设置的任何更改都会导致这种情况吗？因为这是自我上次成功更新服务以来唯一可能发生的变化，大约一个月前。

# json - REST 找不到 application/json 类型的 writer 或 datasourceprovider

> ID：14055379
> 
> 赞同：0
> 
> 时间：2012-12-27T13:17:41.063
> 
> 标签：json, rest, writer

我正在创建一个 REST 服务，它接受作为 PathParam 的输入并生成 JSON 响应。代码运行良好，我可以构建响应。返回响应后，REST 会抛出类似“无法找到 WRITER OR DATASOURCEPROVIDER FOR (ResponseClass) and MediaType application/json”的错误。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:55:53.583

这就是我如何让 jackson 2.1.3 与 Wink 作为 JSON 提供程序一起工作。

```
import java.util.HashSet;
import java.util.Set;
import javax.ws.rs.core.Application;

//see  http://www.ibm.com/developerworks/web/library/wa-aj-jackson/
import com.fasterxml.jackson.jaxrs.json.JacksonJaxbJsonProvider;
import com.fasterxml.jackson.databind.AnnotationIntrospector;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.introspect.JacksonAnnotationIntrospector;
import com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector;
import com.fasterxml.jackson.databind.type.TypeFactory;

/**
 * @see https://cwiki.apache.org/WINK/jax-rs-getting-started.html
 */
public class JaxrsApp extends Application {

@Override
public Set<Class<?>> getClasses() {
    Set<Class<?>> classes = new HashSet<Class<?>>();
    classes.add(YourJaxRSAnnotated.class);
    //...
    return classes;

}
 @Override
  public Set<Object> getSingletons() {
    Set<Object> s = new HashSet<Object>();

    // See http://wiki.fasterxml.com/JacksonJAXBAnnotations for more information
    ObjectMapper mapper = new ObjectMapper();
    AnnotationIntrospector primary = new JaxbAnnotationIntrospector( TypeFactory.defaultInstance() );
    AnnotationIntrospector secondary = new JacksonAnnotationIntrospector();
    AnnotationIntrospector pair = AnnotationIntrospector.pair(primary, secondary);
    mapper.getDeserializationConfig().with(pair);
    mapper.getSerializationConfig().with(pair);

    // Set up the provider
    JacksonJaxbJsonProvider jaxbProvider = new JacksonJaxbJsonProvider();
    jaxbProvider.setMapper(mapper);

    s.add(jaxbProvider);
    return s;
  }
} 
```

然后，在 web.xml

```
<servlet>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>org.apache.wink.server.internal.servlet.RestServlet</servlet-class>
    <!--  this param tells the RestServlet which custom Application sub-class
    will return a list of our classes that have JAX-RS annotations -->
    <init-param>
              <param-name>javax.ws.rs.Application</param-name>
              <param-value>com.example.JaxrsApp</param-value>
            </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:33:51.413

我想你用的是泽西岛。

首先，检查依赖关系：http: [//jersey.java.net/nonav/documentation/latest/chapter_deps.html#d4e1716](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html#d4e1716)

这是我的 pom.xml：

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.15</version>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.15</version>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-servlet</artifactId>
        <version>1.15</version>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T09:15:00.527

I myself found that the WinkApplication is not loaded properly. The restsdkservice configuration in web.xml was incorrect and because of that **JacksonJaxbJsonProvider** was not loaded into the Wink. Finally got it after 2 days.
*Thanks everyone!!*

# javascript - 为什么我的 mootools 幻灯片实例会阻止执行代码和幻灯片？

> ID：14055382
> 
> 赞同：0
> 
> 时间：2012-12-27T13:17:55.380
> 
> 标签：javascript, slider, mootools, jsfiddle, rte

我正在尝试`slideIn()`在 RTE 上实现一个简单的 mootools。当 RTE 区域悬停时`mouseenter`（请看下面的链接，应该是不言自明的

所以我的问题是，当我尝试创建一个`Fx.Slide`实例时，代码没有被执行。我用这个`show`方法试了一下，效果很好。

这是我的工作代码的[jsfiddle](http://jsfiddle.net/ABmeP/13/)，不起作用的部分被注释掉。

同样，我想要的是在触发事件`buttonbar`时滑入元素。`mouseenter`这适用于幻灯片实例，`show`但不适用于幻灯片实例。

如果有人能指出我正确的方向，我会很高兴。

如果还有其他问题，请发表评论，如果需要，我会提供更多信息。

久违了，利诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:30:07.753

好吧，我才意识到我做错了什么。就是这个小片段：

```
wrap.grab(buttonbar.hide()); 
```

这是垃圾，因为`buttonbar`它已经不在 DOM 中了。它必须拆分为：

```
wrap.grab(buttonbar);
buttonbar.slide('hide'); 
```

之后，只需对事件设置进行一些更改：

```
editor.addEvents({
    'click': function(ev) {
        ev.stop();
        buttonbar.show();
    },
    'mouseenter': function(ev) {
        ev.stop();
        this.addClass('mark');
        buttonbar.show();
        //this.slideIn();
    },
    'mouseleave': function(ev) {
        ev.stop();
        //buttonbar.hide();
        this.removeClass('mark');
    }
}); 
```

对此：

```
editor.addEvents({
    'click': function(ev) {
        ev.stop();
        buttonbar.slide('toggle');
    },
    'mouseenter': function(ev) {
        ev.stop();
        this.addClass('mark');
        buttonbar.slide('in');
    },
    'mouseleave': function(ev) {
        ev.stop();
        this.removeClass('mark');
        buttonbar.slide('out');
    }
}); 
```

现在我的幻灯片像地狱一样滑动:)) 这里是[小提琴](http://jsfiddle.net/ABmeP/20/)的链接。

# java - 使用 ID 检索 LinearLayout

> ID：14055384
> 
> 赞同：0
> 
> 时间：2012-12-27T13:17:58.513
> 
> 标签：java, android, android-resources

我有一个**8x8 板**，有**64 个四个字段**，每个字段都是**LinearLayout**。

每个**LinearLayout**都有其 ID，例如 (field1, field2... field64)。现在我想稍后在我的程序中修改每个字段的背景，但我不知道如何检索我想要修改的布局。我想把它们都放在数组中，但它不起作用。

```
private LinearLayout[] fields = new LinearLayout[65];
this.fields[field_id].setBackgroundColor(colour); 
```

另一种方法：

```
for (int i=1; i<65; i++) {
       findViewById(R.id.field+i).setBackgroundColor(Color.WHITE);
} 
```

它也不起作用（显然）。我应该如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:21:38.727

用你的 id 做一个数组。

```
int[] ids = {R.id.field1,R.id.field2...}

for (int i=0; i<ids.lenght; i++) {
findViewById(ids[i]).setBackgroundColor(Color.WHITE);
} 
```

或者

```
ViewGroup viewgroup = findViewById(R.id.parentview);

for(int i = 0; i < viewgroup.getChildCount();i++)
{
View child = viewgroup.getChildAt(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:22:22.713

您可以将它们添加到列表中，如下所示：

```
List fieldList = new ArrayList(64);
fieldList.add(R.id.field1);
fieldList.add(R.id.field2);
fieldList.add(R.id.field3);
// etc.
fieldList.add(R.id.field64); 
```

或者使用任何其他方法来创建这样的列表/数组。像这样添加所有字段有点繁琐，但它提供了一个可以在循环中使用的可用列表。

也可以（我*认为*）重新编号字段的 ID（在 中`R.java`）。如果您随后制作它们，您可以使用您在问题的示例代码中尝试的方法。我不确定这些ID在`R.java`重新生成时是否保持不变...如果不是，则此方法不可用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:24:52.017

您可以通过这种方式访问​​它们，稍微慢一点，但怀疑您会遇到问题：

```
for (int i=1; i<65; i++) {
  int id = getResources().getIdentifier("field" + i, "id", getPackageName())
  findViewById(id).setBackgroundColor(...);
} 
```

听起来像在 xml 中添加它们（我假设？）需要做很多工作。最好通过代码添加它们，然后将它们保存在数组中。

# android - 在列表视图内单击的复选框上设置行背景

> ID：14055386
> 
> 赞同：0
> 
> 时间：2012-12-27T13:18:25.993
> 
> 标签：android, android-listview, android-cursoradapter

我有每行有 2 个文本框和 1 个复选框的列表视图。我希望当用户选中复选框时，将预定义的可绘制对象设置为该行的背景。

我曾尝试在我的 cusotm 光标适配器内的 getView 方法上的 Lisnner 上执行此操作，但没有成功，请帮助！！！。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T13:56:33.367

在`getView`您的`ListAdapter`：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.list_item, null);
    CheckBox checkBox = (CheckBox) view.findViewById(R.id.check);
    checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            View row = (View) buttonView.getParent();
            if (isChecked) {
                row.setBackgroundResource(R.drawable.list_item_background_checked);
            } else {
                row.setBackgroundResource(android.R.color.transparent);
            }
        }
    });
    return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:29:08.740

首先找到复选框ID，然后，

```
 box.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if (isChecked) {
                //set background when checked
            }else{
                //when unselect checkbox change background
            }

        }
    }); 
```

如果此代码有用，则给 +1 或接受。

# android - 尝试更新时出现 Sqlite 替换问题

> ID：14055390
> 
> 赞同：0
> 
> 时间：2012-12-27T13:18:43.907
> 
> 标签：android, sqlite, replace

我有这个 SQL 查询

bd.replace(TABLE,null,cv);

其中 cv 是 {_id=1,column1=x,column3=z}; // 注意没有 column2

TABLE 具有以下方案：

_id（作为主键）| 第 1 列（作为文本）| 第 2 列（作为文本）| 第 3 列（作为文本）

在我运行查询之前，我已经有了具有以下值的寄存器 _id=1 (_id=1,column1=a,column2=b,column3=c) 所以在它运行查询之后我得到了 (_id=1,column1= x,column2=null,column3=z) 为什么不将 column2 保留为 b？

¿ 有谁知道如何保持这个值与以前一样？

重要提示：我使用替换因为我需要插入一个新行以防它不存在。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:10:55.030

解决方案：

我知道发生了什么事。

根据sqlite docs，当您首先更新一行时，它会删除该行，因为我的column2等于null，

我也有这样的散步：

```
long id=bd.insert(TABLE, null,cv);
if(id==-1) {
    int idrow=(Integer) cv.get("_id");
    cv.remove("_id");
    bd.update(TABLE,cv,"_id=?",new String[]{String.valueOf(idrow)});
} 
```

如果有人知道更好的东西，请重播这篇文章。

谢谢

# blackberry - 刷新屏幕以使用新数据更新 ListField

> ID：14055392
> 
> 赞同：0
> 
> 时间：2012-12-27T13:19:15.010
> 
> 标签：blackberry, java-me

我正在使用 ListField 控件来显示从 xml webservice 返回的数据。我想每分钟刷新一次 ListField 或屏幕，以使用新记录或数据更新 ListField。

我尝试使用下面的代码，但它不能正常工作（它挂起）。

```
public MyApp() {
    // Push a screen onto the UI stack for rendering.
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            UiApplication.getUiApplication().pushScreen(new MyScreen());
        }
    },5000,true);
}
ResponseHandler handler = new ResponseHandler();
ListField listUsers = new ListField(handler.getItem().size());

public MyScreen() {
    setTitle("yQAforum");
    //Fetch the xml from the web service
    String wsReturnString = GlobalV.Fetch_Webservice("myDs");
    //Parse returned xml
    SAXParserImpl saxparser = new SAXParserImpl();
    ByteArrayInputStream stream = new ByteArrayInputStream(wsReturnString.getBytes());
    try {
        saxparser.parse( stream, handler );
    } 
    catch ( Exception e ) {
        response.setText( "Unable to parse response.");
    }
    //Return vector sze from the handler class
    listUsers.setSize(handler.getItem().size());
    listUsers.setCallback(this);
    listUsers.setEmptyString("No Users found", 0);
    add(listUsers);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:46:39.403

您正在尝试从 UI 线程上的 Web 服务获取数据。这几乎总是错误的做法。

UI 线程（也称为*主*线程）负责绘制 UI，并跟踪用户操作，如触摸，或通过触控板/轨迹球进行导航。如果 UI 线程在等待远程 Web 服务器响应时被阻塞，则它无法为 UI 提供服务。

您应该进行一些更改：

```
public MyApp() {
    // Push a screen onto the UI stack for rendering.
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            UiApplication.getUiApplication().pushScreen(new MyScreen());
        }
    },5000,true);
} 
```

应该改为

```
public MyApp() {
    // Push a screen onto the UI stack for rendering.
    pushScreen(new MyScreen());
} 
```

构造`MyApp()`函数将已经在 UI 线程上调用，因此无需使用在 UI 线程上`invokeLater()`执行`pushScreen()`调用。`MyApp`如果从构造函数中运行，它将在 UI 线程上调用。此外，5000 毫秒的延迟并没有真正的帮助。这只会将您的应用程序的启动延迟 5 秒，这是用户会讨厌的。

如果您正在尝试实现启动画面或类似的东西，当应用程序启动时，请在堆栈溢出中搜索“黑莓启动画面”，我相信您会找到结果。

现在，一旦您的`MyScreen`类被创建，您应该注意**不要**从 UI 线程获取 Web 服务结果。构造`MyScreen`函数将在 UI 线程上运行。如果需要，您可以在屏幕显示后在后台线程上*发起Web 服务请求。*一种方法是使用`onUiEngineAttached()`：

```
protected void onUiEngineAttached(boolean attached) {
    if (attached) {
        // TODO: you might want to show some sort of animated
        //  progress UI here, so the user knows you are fetching data

        Timer timer = new Timer();
        // schedule the web service task to run every minute
        timer.schedule(new WebServiceTask(), 0, 60*1000);
    }
}

public MyScreen() {
    setTitle("yQAforum");

    listUsers.setEmptyString("No Users found", 0);
    listUsers.setCallback(this);
    add(listUsers);
}

private class WebServiceTask extends TimerTask {
    public void run() {
        //Fetch the xml from the web service
        String wsReturnString = GlobalV.Fetch_Webservice("myDs");
        //Parse returned xml
        SAXParserImpl saxparser = new SAXParserImpl();
        ByteArrayInputStream stream = new ByteArrayInputStream(wsReturnString.getBytes());
        try {
           saxparser.parse( stream, handler );
        } 
        catch ( Exception e ) {
           response.setText( "Unable to parse response.");
        }
        // now, update the UI back on the UI thread:
        UiApplication.getUiApplication().invokeLater(new Runnable() {
           public void run() {
              // TODO: record the currently selected, or focused, row

              //Return vector sze from the handler class
              listUsers.setSize(handler.getItem().size());
              // Note: if you don't see the list content update, you might need to call
              //   listUsers.invalidate();
              // here to force a refresh.  I can't remember if calling setSize() is enough.

              // TODO: set the previously selected, or focused, row
           }
        });
    }
} 
```

您需要添加一些错误处理，以防 Web 服务没有响应或花费超过一分钟的时间（如果最后一个请求尚未完成，您不希望发出新请求）。

但是，这应该让你开始。

**注意：**一旦你解决了在 UI 线程上运行网络代码的问题，你可能*仍然*会发现你的代码不起作用。获取 Web 服务数据可能存在问题。你必须调试它。我只向您展示发布代码的**一个**问题。如果您仍然对 Web 服务获取有问题，请发布另一个问题（已修复 UI 线程问题）。谢谢。

# html - CSS 将鼠标悬停在某物上并有一个完全不同的 div 更改其属性

> ID：14055394
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:19:31.433
> 
> 标签：html, css

我试图编写一个代码，你将鼠标悬停在一个 div 上并让一个完全不同的 div 改变它的效果

这是我的代码

html

```
 <div class="a">LOREM IPSUM</div>
    <div class="boxhighlight"></div> 
```

css

```
 .a:hover, .boxhighlight
    {
        background-color:black;
    } 
```

我想要发生的是，当用户将鼠标悬停在单词 lorem ipsum 上时，div boxhighlight 将改变其背景颜色

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:31:23.873

像这样使用

```
<div class="a">LOREM IPSUM</div>
<div class="boxhighlight" >asdf</div> 
```

你的 CSS

```
.a:hover ~ .boxhighlight  {
background-color:black;
color: white;
} 
```

请参阅此供您[参考](https://stackoverflow.com/questions/6867257/is-there-any-way-to-hover-over-one-element-and-effect-a-different-element)

请参阅此[Fiddle中的示例](http://jsfiddle.net/Dineshkani/aeqkm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:24:58.413

将选择器更改为：

```
.a:hover + .boxhighlight {
    background-color:black;
} 
```

选择器在悬停时更改具有`boxhighlight`旁边的类的元素的样式。`.a`

# java - 使用枚举代替字符串

> ID：14055395
> 
> 赞同：0
> 
> 时间：2012-12-27T13:19:32.147
> 
> 标签：java, string, enums

我正在执行一个用于将数字转换为单词的 java 代码（例如 999--> 999）。我使用了两个字符串来定义单词。

```
private static final String[] tensWords ={ "", " ten", " twenty", " thirty"}
public enum tenWords{ten, twenty, thirty} 
```

当我使用**枚举**时，我无法像在字符串数组中那样放置**空白“” 。**所以它导致错误的输出。请建议如何解决这个问题。下面是我使用枚举访问值的代码。

```
if (number % 100 < 20)
{
    soFar = tensWords.values()[number % 100].toString();
    number /= 100;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:25:23.417

您可以使用枚举参数在枚举值中存储您想要的任何内容：

```
enum TensWords {
    NONE(""),
    TEN("Ten"),
    TWENTY("Twenty");
    ///...

    private final String text;

    TensWords(String text) {
        this.text = text;
    }

    public String getText() {
        return text;
    }
} 
```

还可以考虑将通过数字确定 TensWords 的代码作为静态方法移动到枚举中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:25:39.533

您可以使用枚举并分配值：

```
public enum TenWords{
     ZERO(""), TEN("ten"), TWENTY("twenty"), THIRTY("thirty");

     private final String value;
     private TenWords(String value) {
       this.value = value;
     }
     public String getValue() {
       return value;
     }
} 
```

并像这样访问它：

```
System.out.println(TEN.getValue());
System.out.println(ZERO.getValue()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:26:43.323

您可以在枚举上实现 toString()，以获得所需的空间。

# php - 从 php 中的 pl/sql 函数中恢复 varchar2 表

> ID：14055397
> 
> 赞同：2
> 
> 时间：2012-12-27T13:19:40.527
> 
> 标签：php, plsql

我在 pl/sql 中创建了一个返回 varchar2 表的函数，我在 sqldeveloper 上对其进行了测试，我知道它可以工作。但是现在，我想用一个 php 项目来检索这个表。首先，我试过这个

```
oci_bind_by_name($stid,":returnValue",$returnValue); 
```

但我得到了这个：

```
 Warning: oci_execute() [function.oci-execute]: ORA-06550: line 2, column 41: PLS-00382: expression is of wrong type ORA-06550: line 2, column 25: PL/SQL: Statement ignored in C:\xampp\htdocs\BCN_REQUETEUR\index.php on line 15 
```

然后我尝试了这个

```
 oci_bind_array_by_name($stid,":returnValue",$returnValue,250,250); 
```

但我遇到了同样的错误。那么，我们如何在 php 中检索这个 varchar2 表呢？谢谢

编辑：我终于成功了，我没有使用 pl/sql 函数，而是使用了一个带有“输出参数”的过程，然后在 php 端：

```
 $query = "BEGIN 
             ecrire_requete(30, :thesechar); 
           END;";
 $stid = oci_parse($conn, $query);
 $tabvars = oci_new_collection($conn,'MYTABLETYPE');
 oci_bind_by_name($stid, ':thesechar', $tabvars, -1, SQLT_NTY);
 oci_execute($stid, OCI_DEFAULT);
 for ($i = 0;$i < count($tabvars);$i++) 
 { 
     echo "<br>".$tabvars->getElem($i);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T13:10:15.593

我想你可以像这样使用 pl/sql....我像你一样使用了相同的 pl/sql 脚本，但不是 Preprocedure

```
<?php
$dbServerName = 'localhost';
$dbName = 'CGG1';
$dbUserName = 'SYSTEM';
$dbPassword = 'admin';

$port = 1521;

$c2 = oci_connect($dbUserName, $dbPassword, "(DESCRIPTION=(ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = $dbServerName)(PORT = $port)))(CONNECT_DATA=(SID=$dbName)))");

if($c2)
{
    $v = "DECLARE
    --var_num1 number; 
    --var_num2 number; 
    BEGIN 
        --var_num1 := 100; 
        --var_num2 := 200; 
        DECLARE 
        var_mult number; 
        BEGIN 
            -- AMATIA_TIPO_ADMIN;
            delete from AMATIA_TIPO_ADMIN;
            Insert into AMATIA_TIPO_ADMIN (ID_TIPO_ADMIN,NOMBRE) values (8,'Vista Contratista');
            Insert into AMATIA_TIPO_ADMIN (ID_TIPO_ADMIN,NOMBRE) values (5,'Vista Matriz legal');
            Insert into AMATIA_TIPO_ADMIN (ID_TIPO_ADMIN,NOMBRE) values (6,'Superadministrador');
            Insert into AMATIA_TIPO_ADMIN (ID_TIPO_ADMIN,NOMBRE) values (7,'Vista Gestor');

            select max(ID_TIPO_ADMIN) into var_mult from AMATIA_TIPO_ADMIN;

            execute immediate
            'DROP SEQUENCE SEQ_AMATIA_TIPO_ADMIN';
            var_mult := var_mult + 1 ;
            execute immediate
            'CREATE SEQUENCE SEQ_AMATIA_TIPO_ADMIN INCREMENT BY 1 START WITH '|| var_mult || ' MAXVALUE 9999999999999999999999999999 MINVALUE 0 CACHE 20';
        END; 
    END; 
    ";
    $stid = oci_parse($c2, $v);

    $checkExe = oci_execute($stid);

    echo $checkExe . "<hr>";
}
else
{
    echo "NOT SUCCESS";
}
?> 
```

# sql - SQL Server 数据类型 nvarchar 和 varchar 不兼容错误

> ID：14055400
> 
> 赞同：15
> 
> 时间：2012-12-27T13:20:13.437
> 
> 标签：sql, sql-server, tsql

我继承了一个已转换为 vb 的 C# 应用程序。我收到一个错误，据我所知，该错误与转换无关。

我有一个 SQL 语句，它是....

```
SELECT   ResolverID AS ddlValue, ResolverTeam & ' | ' & ResolverPerson AS ddlText 
FROM     dbo.TblResolvers 
ORDER BY ResolverTeam, ResolverPerson; 
```

当它运行时，我收到错误：

> *数据类型 nvarchar 和 varchar 在布尔 AND 运算符中不兼容。*

表中`ResolverTeam`和`ResolverPerson`均指定为 ( `nvarchar(255`), `null`)

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-27T13:25:36.473

尝试替换`&`; `+`从外观上看，您要做的是连接 2 列。您需要注意的是它`nvarchar`的大小是常规的两倍`varchar`，这意味着表`nvarchar`中没有字符`varchar`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T13:23:37.607

您应该使用[**`+`**](http://msdn.microsoft.com/en-us/library/ms177561.aspx)for 字符串连接：

```
SELECT 
  ResolverID AS ddlValue, 
  ResolverTeam + ' | ' + ResolverPerson AS ddlText 
FROM dbo.TblResolvers 
Order By ResolverTeam, ResolverPerson; 
```

> 为什么我会收到此错误？

由于[**`&`**operator](http://msdn.microsoft.com/en-us/library/ms174965.aspx)，即*Bitwise AND* ，您收到了该错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T13:24:09.240

要在 MSSQL 中连接字符串，您应该使用`+`

```
SELECT ResolverID AS ddlValue, 
  ResolverTeam + ' | ' + ResolverPerson AS ddlText 
    FROM dbo.TblResolvers Order By ResolverTeam, ResolverPerson; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-27T13:25:20.547

这是串联尝试吗？`ResolverTeam & ' | ' & ResolverPerson`

`&`是按位运算符`AND`，将其替换为`+`，看看会发生什么。

# iphone - 我们可以使用 SLComposeViewController 在 FB 上分享视频吗？

> ID：14055413
> 
> 赞同：2
> 
> 时间：2012-12-27T13:21:09.817
> 
> 标签：iphone, facebook, social-framework, slcomposeviewcontroller

我使用 SLComposeViewController 来共享图像和 url，如下所示：

```
 SLComposeViewController *fbComposer =
  [SLComposeViewController
   composeViewControllerForServiceType:SLServiceTypeFacebook];

  if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
  {
   SLComposeViewControllerCompletionHandler __block completionHandler=
   ^(SLComposeViewControllerResult result){

    [fbComposer dismissViewControllerAnimated:YES completion:nil];

    switch(result){
     case SLComposeViewControllerResultCancelled:
     default:
     {
      NSLog(@"Cancelled.....");
     }
      break;
     case SLComposeViewControllerResultDone:
     {
      NSLog(@"Posted....");
      UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Sent"
                                                       message:nil
                                                      delegate:nil
                                             cancelButtonTitle:@"Dismiss"
                                             otherButtonTitles: nil];
      [alert show];
     }
      break;
    }};
    NSString *message=@"posting to FB test";
   [fbComposer setInitialText:message];
   [fbComposer addImage:[UIImage imageNamed:@"2.jpg"]];
   [fbComposer addURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=GoZ2Be2zLq8"]];
   [fbComposer setCompletionHandler:completionHandler];
   [self presentViewController:fbComposer animated:YES completion:nil];
  } 
```

我们还可以使用 SLComposeViewController 共享视频文件吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T02:44:29.963

不，我们不能使用 SLComposeViewController 共享视频文件。为了发送视频文件，我们必须

使用 Fb 图形 API。请参考此链接并使用它，您可以轻松地将视频文件发送到 fb：

[http://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/](http://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T11:11:10.767

如果您想将视频 url 分享到 Facebook，可以使用以下代码。

```
SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
[controller setInitialText:string];  
[controller addImage:image];
[controller addURL:[NSURL URLWithString:URLString]];
[self.controller presentViewController:controller animated:YES completion:Nil];
[controller setCompletionHandler:^(SLComposeViewControllerResult result){
            switch (result) {
                case SLComposeViewControllerResultCancelled:
                    // Cancelled
                    break;

                case SLComposeViewControllerResultDone:
                   // Success
                    break;

                default:
                    break;
            }
        }]; 
```

# android - Android：扩展一个通过反射获得的隐藏类

> ID：14055419
> 
> 赞同：1
> 
> 时间：2012-12-27T13:21:25.590
> 
> 标签：android, inheritance, reflection, bluetooth, bluetooth-lowenergy

如何扩展只能通过反射访问的类？

基本上，我正在尝试扩展 Galaxy S3 中的 com.samsung.bluetoothle.BluetoothLEClientProfile 类，以使其能够与我的蓝牙 LE 设备进行通信。该类是隐藏的，我需要扩展它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:51:03.067

在项目的正确包 ( ) 中添加一个虚拟类`com.samsung.bluetoothle`，然后对其进行扩展。在运行时系统类将被加载，并且您应该获得所需的行为。

# c# - 将文本框值设置为 XML 元素值时会引发空引用异常

> ID：14055425
> 
> 赞同：0
> 
> 时间：2012-12-27T13:21:41.623
> 
> 标签：c#, xaml

我有一个如下的 XML：

```
<E:Events xmlns:E="Event-Details">
 <Date>12/27/2012</Date>
  <Time>‎11:12 PM</Time>
<Message>Happy Anniversary guyss!!!..</Message>
</E:Events> 
```

在我通过以下代码检索元素值后，即`12/27/2012`, `11:12 PM`, `Happy Anniversary guyss!!!..`:

```
XElement read = new XElement.Parse(a.ReadToEnd()); 
read.Element("Date").Value;  //retrieves the Date value and 
read.Element("Message").Value; //retrieves the Time Value. 
```

我尝试将这些值分配给我的 xaml UI 元素。

例如

```
DateTime dt;
dt = DateTime.Parse(read.Element("Date").Value)    
datepicker.Value = dt

 OR

txtMessage.Text = (read.Element("Message").Value) 
```

两者都给出 NullReferenceException。所以我不能为我的 UI 元素分配检索到的 XML 值。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:52:57.467

首先，请检查您`datepicker`的代码段运行时是否`txtMessage`已初始化控件（例如未初始化`null`）。

`NullReferenceException`如果您看到整个代码，这是非常具体且易于定位的错误。为了帮助我们，我们必须看到完全相同的触发异常的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:31:21.577

我尝试通过再次调用 InitializeComponent() 方法再次初始化我的 MainPage，它采用了我的值。

谢谢大家的帮助。

# asp.net-mvc-3 - Spring.net + ASP.NET MVC 3 + PostgreSQL

> ID：14055428
> 
> 赞同：1
> 
> 时间：2012-12-27T13:21:52.347
> 
> 标签：asp.net-mvc-3, web-config, spring.net, postgresql-8.4

我正在尝试与 结合`sprig.net`，`ASP.NET MVC3`使用 PostgreSQL 作为数据库。我之前用 MySQL 成功地做到了这一点。这是我的 2 个配置文件：

1）网络配置：

```
<configuration>
<configSections>
<sectionGroup name="spring">
<section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler,     Spring.Core" />
<section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
<section name="context" type="Spring.Context.Support.WebContextHandler, Spring.Web" />
</sectionGroup>
</configSections>
<!-- spring context -->
<spring>
<parsers>
<parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data" />
</parsers>
<context>
<resource uri="~/spring-dao.xml" />
</context>
</spring>
.... 
```

2) spring-dao.xml (对于 MySQL DB) 是：

```
 <db:provider id="DbProvider" provider="MySql.Data.MySqlClient"
 ConnectionString="Server=localhost;Database=db_movies;Uid=root;Pwd=1234;"/>
 <object id="SessionFactory" type="Spring.Data.NHibernate.LocalSessionFactoryObject,
 Spring.Data.NHibernate32">
 <property name="DbProvider" ref="DbProvider"/> ... 
```

注意：我引用了 Npgsql.dll。

我是否需要另一个 .DLL 以及如何更改`<db:provider .../>`以使用 Postgres 作为提供程序？

我通过谷歌查找示例或教程，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:15:03.533

Find below a working configuration of NHibernate32 and Npgsql-2.0 (2.0.11.92) for Spring.Net 1.3.2:

```
<db:provider id="PqSqlDbProvider" provider="Npgsql-2.0" connectionString="Server=localhost;Port=5432;User Id=nhibernate;Password=123456789;Database=Xxxxxxxx;" />

<object name="SessionFactory" type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate32" dependency-check="none">
  <property name="DbProvider" ref="PqSqlDbProvider"/>
  <property name="ExposeTransactionAwareSessionFactory" value="true" />
  <property name="MappingAssemblies">
    <list>
      <value>Xxxxxxxx</value>
    </list>
  </property>

  <property
    name="HibernateProperties">
    <dictionary>        
      <entry key="connection.provider" value="NHibernate.Connection.DriverConnectionProvider" />
      <entry key="connection.driver_class" value="NHibernate.Driver.NpgsqlDriver" />
      <entry key="dialect" value="NHibernate.Dialect.PostgreSQLDialect" />
      <entry key="hbm2ddl.auto" value="create-drop"/>
    </dictionary>
  </property>
</object>

<object
  name="HibernateTransactionManager"
  type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate32"
  dependency-check="none">
  <property name="DbProvider" ref="PqSqlDbProvider"/>
  <property name="SessionFactory" ref="SessionFactory"/>
</object>

<!-- Attribute driven transaction manager. -->
<tx:attribute-driven transaction-manager="HibernateTransactionManager"/> 
```

You also need to amend the `web.config` to load the proper .dll instead of the one referenced by Spring:

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="Npgsql" publicKeyToken="5d8b90d52f46fda7" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-65535.65535.65535.65535" newVersion="2.0.11.92" />
    </dependentAssembly>      
  </assemblyBinding>
</runtime> 
```

# fonts - 如何在 SSIS 中更改表达式生成器的字体大小

> ID：14055429
> 
> 赞同：1
> 
> 时间：2012-12-27T13:21:52.080
> 
> 标签：fonts, ssis, font-size, expressionbuilder

使用 SQL Server Integration Services 时，我喜欢保持灵活性，因此我将所有硬编码的名称保存在变量中。这意味着要大量使用表达式生成器，但问题是实际表达式的字体太小，尤其是在编写代码时。

我发现自己经常在 SSIS 和 Notepad++ 之间复制和粘贴，一定有办法调整字体大小，但我一直没找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:33:00.757

另一种选择是获取 BIDSHelper。它是 Visual Studio 的免费插件。编辑变量时，您有一个新的弹出窗口来处理表达式。它为您提供了更多的工作空间。不幸的是，它对派生列转换没有帮助。我发现如果我的表达式从窗格中滚动出来，这通常表明是时候将逻辑推送到脚本转换中了。

[http://bidshelper.codeplex.com/](http://bidshelper.codeplex.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T13:26:42.093

使用这个独立的应用程序，您可以轻松地开发和测试表达式。它就像一个工作台，可以快速尝试事物，而无需打开包裹或弄乱您当前正在处理的东西。它被设计为易于移植，只需提取文件并运行，但它确实需要在机器上安装 SQL Server 集成服务。

[应用](http://expressioneditor.codeplex.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T13:33:28.917

尝试使用 BiXpress 社区版，而不是使用独立的应用程序。它集成到 Visual Studio（或 BIDS）中并且是免费的：http: [//pragmaticworks.com/Portals/0/ProductInstallers/bixpress_x86_x64_community.msi](http://pragmaticworks.com/Portals/0/ProductInstallers/bixpress_x86_x64_community.msi)

它具有比您想要的更多的功能。

# android - AlertDialog 中的自定义 Listview 隐藏对话框的消息？

> ID：14055431
> 
> 赞同：3
> 
> 时间：2012-12-27T13:22:13.983
> 
> 标签：android, android-alertdialog

我正在开发一个应用程序，其中我在`AlertDialog`. 在某些情况下，会出现对话框，显示其`Title`和。问题是，当我在列表中添加超过 4 个条目时，设置的对话框消息被列表视图隐藏。无论列表有多长，我都想在消息下方显示列表视图。谁能帮我吗？？？？`Message``Custom listview`

实施如下：

```
AlertDialog.Builder builder = new AlertDialog.Builder(xActivity.this);
     builder.setTitle("Title");
     builder.setMessage("Following items are in the List");                 
     final ListView modeList = new ListView(xActivity.this);
     ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(xActivity.this, android.R.layout.simple_list_item_1, android.R.id.text1, simpleArray);
     modeList.setAdapter(modeAdapter);
     modeList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
     builder.setView(modeList);
     builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

     public void onClick(DialogInterface arg0, int arg1) {

    // Do Something

    }
}});

final Dialog dialog = builder.create(); 
dialog.show(); 
```

任何帮助表示赞赏.... :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:38:09.797

我建议并认为最好的方法是创建自定义对话框而不是预定义的 AlertDialog。创建自己的 xml。

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Following items are in the List"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ListView
        android:id="@+id/lvList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.15" >
    </ListView>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Yes" />

</LinearLayout> 
```

爪哇

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.dialog_listview);

Button btn = (Button) dialog.findViewById(R.id.button1);
btn.setOnClickListener(new OnClickListener(){

    public void onClick(View arg0) {
        dialog.cancel();
        }    
});

dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:54:34.143

I suggest using the same manner exposed above, **only** that instead of using basic `Dialog` class, the [DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html "DialogFragment") class which is keeps its state when the device's state changes (rotation/keyboard...) Hope it helps... ;)

# castle-windsor - Castle Windsor Logging Interceptor Example 是否有任何源代码？

> ID：14055432
> 
> 赞同：0
> 
> 时间：2012-12-27T13:22:18.400
> 
> 标签：castle-windsor, castle, iinterceptor

这是一篇很棒的 wiki 文章：[http ://docs.castleproject.org/Windsor.Introduction-to-AOP-With-Castle.ashx](http://docs.castleproject.org/Windsor.Introduction-to-AOP-With-Castle.ashx)

但是，它缺少 DataContractSerialize 的代码。我很确定这种方法相当简单，但为了完整起见，最好有一个例子。

一个存在吗？或者，是否有代码的工作示例？

谢谢

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:24:04.313

好吧，我认为 Jan Wilson 忽略了这一点，因为这对于他的 AOP 介绍来说是不必要的，并且因为有多种方法可以序列化/转储数据，你可以在这里阅读它：

[http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/](http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/)

所以你可以简单地使用以下内容：

```
private static void DataContractSerialize(object argument, Type argumentType)
{
    var settings = new XmlWriterSettings { Indent = true, ConformanceLevel = ConformanceLevel.Auto };
    var serializer = new DataContractSerializer(argumentType);
    using (XmlWriter xml = XmlWriter.Create(YOUR_PATH_TO_LOGFILE_CONST_STRING, settings))
    {
        xml.WriteStartDocument();
        serializer.WriteObject(xml, argument);
    }
} 
```

# ios - 如何从 ABRecordID 获取 ABRecordRef？

> ID：14055438
> 
> 赞同：8
> 
> 时间：2012-12-27T13:22:29.140
> 
> 标签：ios, abaddressbook

我已经访问了通讯录，并且成功地从中完全提取了记录和必要的信息。我还提取**了 recordid**。我的问题是以后如何使用这个rec​​ordid来提取记录。我正在使用的代码是：

```
ABRecordID recordId;
ABAddressBookRef _addressBookRef = ABAddressBookCreate ();
NSArray* allPeople = (NSArray *)ABAddressBookCopyArrayOfAllPeople(_addressBookRef);

for (id record in allPeople) {
    recordId = ABRecordGetRecordID(record);

    //i am saving each one  how to use them later to extract particular record
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T14:25:10.540

显然，结果`ABAddressBookCopyArrayOfAllPeople`是一个数组`ABPersonRef`，然后您可以单独使用它来获取您的`ABRecordID`. 如果在以后的某个时间，您想用您的`recordId`来检索`ABPersonRef`，您可以使用[`ABAddressBookGetPersonWithRecordID`](http://developer.apple.com/library/ios/documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookGetPersonWithRecordID).

# iphone - MPMoviePlayerViewController 戴上动画就完成了吗？

> ID：14055442
> 
> 赞同：1
> 
> 时间：2012-12-27T13:22:41.880
> 
> 标签：iphone, ipad, ios6, ios5.1, mpmovieplayer

```
self.moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:pathToFile]];
[self presentMoviePlayerViewControllerAnimated:self.moviePlayerViewController]; 
```

MoviePlayer 正在显示。但是单击完成按钮它会以一些奇怪的行为消失。理想情况下，电影播放器​​应该像正常一样关闭，`dismissMoviePlayerViewControllerAnimated`但我的控件看起来像现在的动画，我的控制器将覆盖电影播放器​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:49:36.463

尝试如下并检查这是否适合您：

```
moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];
[moviePlayerController.moviePlayer prepareToPlay];
moviePlayerController.moviePlayer.shouldAutoplay=YES;
moviePlayerController.view.frame = self.view.frame;
[self presentMoviePlayerViewControllerAnimated:moviePlayerController];
[moviePlayerController.moviePlayer play]; 
```

# ios - 将按钮添加到导航控制器的中心

> ID：14055447
> 
> 赞同：0
> 
> 时间：2012-12-27T13:23:03.220
> 
> 标签：ios, navigationcontroller

如何将按钮添加到导航控制器的中心我已经尝试了下面的代码

> UIButton *titleButton = [UIButtonbuttonWithType:UIButtonTypeRoundedRect];
> 
> ```
> [titleButton setFrame:CGRectMake(0, 0, 200, 35)];
> 
> self.navigationItem.titleView = titleButton; 
> ```

但是屏幕显示空白按钮没有颜色如何正常显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:29:33.053

```
UIButton *titleButton = [UIButtonbuttonWithType:UIButtonTypeRoundedRect];

[titleButton setFrame:CGRectMake((self.view.frame.size.width - 200)/2, 3, 200, 35)];

[self.navigationController.navigationBar addSubview:titleButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:28:33.547

我用它和我的代码工作正常

```
UIButton *titleButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[titleButton setTitle:@"Title" forState:UIControlStateNormal];
[titleButton setFrame:CGRectMake(0, 0, 200, 35)];

self.navigationItem.titleView = titleButton; 
```

试试看。

# regex - Qt 的 QRegExp 和方法顺序

> ID：14055451
> 
> 赞同：0
> 
> 时间：2012-12-27T13:23:24.217
> 
> 标签：regex, qt

我有两个 QRegExp 对象，用于搜索某些文本的开头和结尾。我的代码看起来像：

```
// strText defined earlier
QRegExp start(...);
QRegExp end(...);

int iStart = start.indexIn(strText);
int iEnd = end.indexIn(strText, iStart) + end.matchedLength(); 
```

关于这段代码，我有两个问题：

(1) 假设找到了每个正则表达式正在寻找的文本。调用上述代码会在运行时调用以下错误：

> TerminalWindow.exe 中 0x66b48b3f 处未处理的异常：0xC0000005：访问冲突读取位置 0x00000004。

如果我将代码更改为以下内容，我会得到同样的错误：

```
int iStart = start.indexIn(strText);
int iTemp = end.matchedLength();
int iEnd = start.indexIn(strText, iStart) + iTemp; 
```

第二个代码片段中的错误对我来说很有意义，因为内部matchedLength() 可能正在针对尚未分配的对象运行。但是，我不明白为什么我也从第一个代码片段中得到同样的错误。在所有其他条件相同的情况下，操作顺序不是从左到右吗？如果我将代码更改为以下内容，那么我会得到我期望的结果：

```
// strText defined earlier
QRegExp start(...);
QRegExp end(...);

int iStart = start.indexIn(strText);
int iEnd = end.indexIn(strText, iStart);
iEnd += end.matchedLength(); 
```

(2) 如果我的示例中的 strText 看起来像：

```
<start>
  stackoverflow is awesome!
</start>
<start>
  I like cake!
</start>
<start>
  Girls are pretty!
</start> 
```

如何编写一个 Qt RegExp 来捕获每个起始元素的内容？就像是：

```
QRegExp reg("<start>(.*?)</start>"); 
```

即使它似乎应该与 POSIX 正则表达式一起使用（我相信这是 Qt 实现的），它也永远不会为我工作。（注意：我知道执行此操作的理想方法是使用 XML/HTML 解析器（我实际上正在解析 HTML），但我现在对正则表达式解决方案感兴趣）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:30:04.047

`<`并且`>`需要逃脱。尝试：

```
QRegExp reg("\<start\>(.*?)\</start\>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:06:36.113

我无法用您的第一个代码片段重现该问题。它在我的 Ubuntu 机器上对我来说很好用。

就您的正则表达式而言，存在一些问题。首先，您使用 是`?`为了使您的正则表达式不贪婪，但它不适用于`Qt`. 相反，您必须调用该`QRegExp.setMinimal(bool)`方法。引用[QRegExp 参考文档](http://doc.qt.digia.com/qt/qregexp.html#notes-for-perl-users)：

> 非贪心匹配不能应用于单个量词，但可以应用于模式中的所有量词

如果你的字符串是这样的：

```
'<root>\n<start>\nSo is awesome!\n</start>\n<start>\nI like cake!\n</start>\n</root>' 
```

那么下面的正则表达式就可以正常工作（在我的 Ubuntu 机器上测试的 PyQt 版本）：

```
QRegExp rx("<start>\n(.*)\n</start>");
rx.setMinimal(true); 
```

现在你所要做的就是循环如下（不完全确定，我不是 C++ 人）：

```
QStringList list;
int pos = 0;  
while ((pos = rx.indexIn(str, pos)) != -1) {
    list << rx.cap(1);
    pos += rx.matchedLength();
} 
```

我看到的第二个问题是，正如您在问题中所说，不应该将正则表达式用于此任务。`Qt`提供`QtXml`包含大量用于操作 XML 数据的类的模块。

在您的情况下，您的一种可能性是使用`QDomDocument`该类。以下 PyQt 代码显示了如何执行此操作：

```
from PyQt4.QtXml import QDomDocument

mydata = "<root><start>\nSo is awesome!\n</start>\n<start>\nI like cake!\n</start><start>\nI like girls!\n</start></root>"
document = QDomDocument()
document.setContent(mydata)
root = document.documentElement()
element = root.firstChildElement("start")
while (not element.isNull()):
    value = element.firstChild().nodeValue()
    element = element.nextSiblingElement("start")
    print value 
```

`Qt`如果您尝试一下，我相信您可以很容易地将其转换为代码。

# actionscript-3 - 如何将鼠标事件从顶部精灵传递到底部精灵？

> ID：14055457
> 
> 赞同：0
> 
> 时间：2012-12-27T13:23:46.373
> 
> 标签：actionscript-3, sprite, mousemove

我正在使用“Loader”类将外部 SWF 加载到我的舞台上。然后，我将“Loader”类放入“MovieClip”对象中，并将其添加到舞台上。我现在在透明图层上添加另一个图层，右上角有一个“x”按钮，周围有一个边框。（客户端要求这两个层是分开的，这意味着 - 我不能将“x”和边框添加到外部加载的 SWF 本身）。

这是两层分开的样子：

![](../Images/b26ac942f85d6325f570efc2f2c5ff33.png)

这是两层相互重叠的样子： ![](../Images/ad125d9e225144c1129abdac75faa2d5.png)

我需要的是：我有一个用于顶层的“鼠标翻转”和“鼠标滚出”和“鼠标点击”的事件捕捉器。当“翻转”发生时 - 我改变了边框的宽度。单击“x”时 - 我隐藏了两个图层。

问题是 - 外部加载的 SWF 的底层是带有动画的交互式 SWF。我也需要能够让鼠标与底层交互。

我尝试将“Mouse-Move”事件分派到保存 SWF 的“MovieClip”，并尝试将其分派到其中的“Loader”对象，但没有成功。

（当鼠标悬停在它上面时，我应该能够看到一些动画发生变化）。

我怎样才能达到我所需要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:30:45.093

解决此问题的一种方法是将边框和“x”图标分成两个单独的对象。将`mouseEnabled`边框对象的属性设置为`false`，并让它完全覆盖您加载的 SWF。现在“x”图标只需要和图标本身一样大，它只会覆盖加载的 SWF 的一小部分。

现在唯一应该“窃取”鼠标事件的是“x”图标，我想你的客户可以接受它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:42:50.140

似乎顶层阻挡了底层的鼠标跟踪，检查顶层的透明区域，不应该有任何透明物体，如alpha为0的矩形。

# ios - iOS Safari + CSS calc() + CSS 转换 = Instant Crash

> ID：14055461
> 
> 赞同：27
> 
> 时间：2012-12-27T13:24:22.563
> 
> 标签：ios, css, safari, css-transitions

当我尝试使用`left: -webkit-calc(100% - 100px);`（假设`left: 0;`是初始状态）它在 iOS 6.0.1 中工作得很好。但是当我用它做同样的事情时，`transition: left 1s linear;`它会立即让 Safari 崩溃，每次。是已知的错误还是我做错了什么？

它在 Safari 5 中也不起作用（没有反应）。但它适用于 Firefox 和 Chrome。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T10:31:55.753

您可以通过使用除 auto 之外的任何内容初始化属性来解决此问题：

```
.menu {
  left: 0;
  transition: left 1s linear;
}

.menu-open .menu {
  left: -webkit-calc(100% - 50px);
  left: calc(100% - 50px);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T23:18:18.830

一段时间以来，这一直是 WebKit 的错误。现在您可以使用 JS 来完成相同的最终效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-28T23:44:10.797

到目前为止发布的答案都没有对我有用。

起作用的是`calc`使用负边距解决声明：

```
#example {
  left: 100%;
  margin-left: -100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T23:05:59.257

把这个小测试放在一起，看看它是否会得到修复。目前它使 mac safari 6.0.5 和 iOS safari 崩溃。

[http://jsbin.com/omexek/3/](http://jsbin.com/omexek/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T02:42:33.597

在花了很多时间在 Chrome 中测试我的响应式而非 iOS 移动设计后，我遇到了同样的问题。有许多“弹性”元素，所以我想要一个至少在早期版本中可以涵盖所有这些元素的解决方案。

如果您正在使用纯 CSS 进行响应式设计，那么至少可以避免崩溃的方法是：

```
@media (max-device-width: 1024px) {

* {
  -webkit-transition: width 0, top .8s !important;
  -moz-transition: width 0, top .8s !important;
  -o-transition: width 0, top .8s !important;
  transition: width 0, top .8s !important;
} 
```

我想保持顶部定位转换到位，所以必须这样做。

这个解决方案可能会更好，因为它会与使用 1024 显示器和 Android 的人有一些重叠，但我确实使用*max-device-with*代替*max-width*以避免与小窗口重叠。我假设 1024 位显示器用户可能没有使用现代浏览器，但想修复 Android 重叠。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-10T22:11:09.680

也许做这样的事情：

```
.class{
    left: -webkit-calc(100% - 100px);
    transition: margin-left 1s linear, right 1s linear;
}

.class.open {
    margin-left: -100%;
    right: 100px;
} 
```

警告：未经测试

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T13:43:14.537

不幸的是，我必须这样做才能完成类似的任务：

```
$('.modal').css({
  'height': $(window).height() - 40
}); 
```

# javascript - 编辑此下拉 javascript

> ID：14055467
> 
> 赞同：-4
> 
> 时间：2012-12-27T13:24:50.657
> 
> 标签：javascript, redirect

请我想编辑这个脚本：

我想删除点击后出现的弹出框，我只是希望它在有人点击按钮时重定向到给定的网址？

```
 <!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        var citiesByState = {
            "USA": ["NY","NJ"],
            "Singapore": ["taas","naas"]
        }
        var navURLs = {
            "USA": {"NY": "http://www.yahoo.com","NJ": "http://www.google.com"},
            "Singapore": {"taas": "http://www.bing.com","naas": "http://www.ibm.com"}
        }
        function makeSubmenu(value) {
            if(value.length==0) document.getElementById("citySelect").innerHTML = "<option></option>";
            else {
                var citiesOptions = "";
                for(cityId in citiesByState[value]) {
                    citiesOptions+="<option>"+citiesByState[value][cityId]+"</option>";
                }
                document.getElementById("citySelect").innerHTML = citiesOptions;
            }
        }
        function displaySelected() {
            var country = document.getElementById("countrySelect").value;
            var city = document.getElementById("citySelect").value;
            alert(country+"\n"+city);
            navURL = navURLs[country][city];
            if(navURL){
                alert(navURL);                    
                window.location.href = navURL;
            }
        }
        function resetSelection() {
            document.getElementById("countrySelect").selectedIndex = 0;
            document.getElementById("citySelect").selectedIndex = 0;
        }
    </script>
</head>
<body onload="resetSelection()">
    <select id="countrySelect" size="1" onchange="makeSubmenu(this.value)">
        <option></option>
        <option>USA</option>
        <option>Singapore</option>
    </select>
    <select id="citySelect" size="1">
        <option></option>
    </select>
    <button onclick="displaySelected()">show selected</button>
</body>
</html> 
```

请帮助或至少给我一个执行此操作的脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:27:33.527

从此块中删除警报：

```
if(navURL){
   alert(navURL);                    
   window.location.href = navURL;
} 
```

所以这将是：

```
if(navURL){                    
   window.location.href = navURL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:29:27.430

“我想删除点击后出现的弹出框”，你的意思是警报？只需删除包含任何`alert()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:29:43.860

试试这个

```
 <!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        var citiesByState = {
            "USA": ["NY","NJ"],
            "Singapore": ["taas","naas"]
        }
        var navURLs = {
            "USA": {"NY": "http://www.yahoo.com","NJ": "http://www.google.com"},
            "Singapore": {"taas": "http://www.bing.com","naas": "http://www.ibm.com"}
        }
        function makeSubmenu(value) {
            if(value.length==0) document.getElementById("citySelect").innerHTML = "<option></option>";
            else {
                var citiesOptions = "";
                for(cityId in citiesByState[value]) {
                    citiesOptions+="<option>"+citiesByState[value][cityId]+"</option>";
                }
                document.getElementById("citySelect").innerHTML = citiesOptions;
            }
        }
        function displaySelected() {
            var country = document.getElementById("countrySelect").value;
            var city = document.getElementById("citySelect").value;
            //alert(country+"\n"+city);
            navURL = navURLs[country][city];
            if(navURL){
                //alert(navURL);                    
                window.location.href = navURL;
            }
        }
        function resetSelection() {
            document.getElementById("countrySelect").selectedIndex = 0;
            document.getElementById("citySelect").selectedIndex = 0;
        }
    </script>
</head>
<body onload="resetSelection()">
    <select id="countrySelect" size="1" onchange="makeSubmenu(this.value)">
        <option></option>
        <option>USA</option>
        <option>Singapore</option>
    </select>
    <select id="citySelect" size="1">
        <option></option>
    </select>
    <button onclick="displaySelected()">show selected</button>
</body>
</html> 
```

# magento - 到处都是 404 页面 - 迁移后无法访问后端

> ID：14055487
> 
> 赞同：-2
> 
> 时间：2012-12-27T13:26:43.290
> 
> 标签：magento, migration, http-status-code-404

我们的网站最近被转移。

我们按照本教程中的说明进行操作：http: [//www.magentocommerce.com/wiki/groups/227/move_magento_to_another_directory](http://www.magentocommerce.com/wiki/groups/227/move_magento_to_another_directory)

我认为一切正常……现在我得到了全面的 404……什么都没有出现，我无法访问后端。

任何人都可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:14:40.883

显然这是一个url设置问题。由于您现在无法访问后端，因此还有另一种方法可以恢复您的站点。寻找

> 应用程序->etc->local.xml

**删除/重命名它。**

现在**重新安装**您的**Magento** ，显然使用**相同的数据库。**您的设置和产品将保持原样，但使用全新的 URL。

# imagemagick - 将 ImageMagick 与 zend_pdf 一起使用

> ID：14055489
> 
> 赞同：0
> 
> 时间：2012-12-27T13:27:12.323
> 
> 标签：imagemagick, zend-pdf

如何将使用 ImageMagick 处理的图像（未保存）传递给 Zend_Pdf_Image？我想转移 $image = new Imagick($imageFile); 直接到 $pdfImage = Zend_Pdf_Image:: ...，不保存。那可能吗？

感谢您的建议，于尔根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:05:13.833

我正要简单地说“不”，但后来我想我会仔细检查代码并考虑是否还有其他可能性。

该`imageWithPath()`方法利用其他类中的一些辅助方法来解码`$filePath`参数引用的图像。这些辅助方法中的每一个所做的第一件事就是打开`$filePath`using `fopen()`。

所以*这意味着*您可以将任何类型的资源传递给`imageWithPath()`您的 PHP 安装支持的方法。

一般来说，这意味着文件和 URL，但从 PHP 5.2 开始，它还包括`data://`包装器。我自己没有使用过这个（多年来我一直在写出临时文件，然后将它们传递给它们`imageWithPath()`），但根据手册页，它可能只允许您传入修改后的数据而不必先将其保存到文件中.

更多信息： http: [//php.net/manual/en/wrappers.data.php](http://php.net/manual/en/wrappers.data.php)

如果您使用这种方法得到了一些工作，请让我们都知道。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T12:35:29.793

我将把我的 3 美分加到上面的詹姆斯回答中。他是完全正确的——允许使用数据：包装器。

展示如何使用 ImageMagick 将 svg 转换为 Zend_Pdf_Image 的示例方法：

```
class My_Pdf extens Zend_Pdf {

    function imageFromSvg($path, $w, $h) {
        if (!class_exists('Imagick') || !file_exists($path)) return false;
        $svg = file_get_contents($path);
        $im = new Imagick();
        $im->readImageBlob($svg);
        $im->setImageFormat('png8');
        $im->adaptiveResizeImage($w,$h);
        return new Zend_Pdf_Resource_Image_Png('data:image/png;base64,'.base64_encode   ($im));
    }
} 
```

注意 Zend_Pdf_Resource_Image_Png 不支持位深度大于 8 的 png。返回的对象可以很容易地使用它的 drawImage 方法嵌入到 Zend_Pdf 中。例子：

```
$pdf = new My_Pdf();
$page = $pdf->newPage(Zend_Pdf_Page::SIZE_A4);
$page->drawImage($pdf->imageFromSvg($svg,400,400),400,100,100,100); 
```

我使用重新缩放为 400x400 的 svg，因为那时我可以获得更好的打印质量。您可以根据自己的需要对此进行试验。祝你好运！

# batch-file - 如何通过批处理脚本根据他的文件夹名称重命名文件

> ID：14055495
> 
> 赞同：2
> 
> 时间：2012-12-27T13:27:54.150
> 
> 标签：batch-file, batch-processing, dos, batch-rename

*我有这部分批处理脚本正在执行以下操作：*
-有一个主文件夹，主文件夹中有两个文件（电影和字幕文件）和一个名为“字幕”的子文件夹

-此脚本采用电影的名称文件并用它重命名字幕文件+将字幕文件移动到“字幕”子文件夹中，然后重命名主文件夹。所以最后我们有一个电影名称，用于字幕文件和主文件夹。

```
@echo off
setlocal EnableDelayedExpansion

cd /D "%~DP0"
echo BASE FOLDER: %cd%
set n=0
for /D %%a in (*) do (
set /A n+=1
cd "%%a"
echo ==================================================================
echo Processing folder: %%a

for %%b in (*.avi *.mp4 *.mkv) do set movieName=%%~Nb
echo Movie name: !movieName!
for %%b in (*.srt *.sub) do (
   move "%%b" "Subtitles\!movieName!%%~Xb"
  echo File "%%b" moved and renamed to "Subtitles\!movieName!%%~Xb"
)

cd ..
ren "%%a" "!movieName!"
echo Folder "%%a" renamed to "!movieName!" 

)
echo ==================================================================
echo %n% FOLDERS PROCESSED
pause 
```

**！！！！！！我需要的是：！！！！！！**
-**我需要反之亦然**，因此**名称将取自主文件夹**而不是电影文件，因此**主文件夹的名称将用于电影和字幕文件**。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:49:54.653

```
@echo off
setlocal EnableDelayedExpansion

cd /D "%~DP0"
echo BASE FOLDER: %cd%
set n=0
for /D %%a in (*) do (
set /A n+=1
cd "%%a"
echo ==================================================================
echo Processing folder: %%a
set movieName=%%~a

for %%b in (*.avi *.mp4 *.mkv) do (
   ren "%%~b" "!movieName!%%~Xb"
   echo Movie file "%%b" renamed to "!movieName!%%~Xb"
)

for %%b in (*.srt *.sub) do (
   move "%%~b" "Subtitles\!movieName!%%~Xb"
   echo File "%%b" moved and renamed to "Subtitles\!movieName!%%~Xb"
)

cd ..

)
echo ==================================================================
echo %n% FOLDERS PROCESSED
pause 
```

# c# - C# mvc 4 中的 Wkhtmltopdf 编码问题

> ID：14055502
> 
> 赞同：6
> 
> 时间：2012-12-27T13:28:17.287
> 
> 标签：c#, asp.net-mvc-4, wkhtmltopdf

我正在使用 wkhtmltopdf 将 html 转换为 pdf。问题是带有 č、š、ž、đ 等字符的字体（这些是塞尔维亚语、克罗地亚语、斯洛文尼亚语使用的字符）。它们不会以 pdf 格式显示。Html 正确呈现。

这就是我的 html 的构造方式：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Export</title>
</head>
<body>
    <h3>č,š,ž,đ</h3>
</body>
</html> 
```

在我使用 wkhtmptopdf 的 C# 代码中，我这样做了

```
 Process p;
        ProcessStartInfo psi = new ProcessStartInfo();
        psi.FileName = HtmlToPdfExePath;
        psi.WorkingDirectory = Path.GetDirectoryName(psi.FileName);

        // run the conversion utility
        psi.UseShellExecute = false;
        psi.CreateNoWindow = true;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardError = true;

        // note: that we tell wkhtmltopdf to be quiet and not run scripts
        string args = "-q -n ";
        args += "--disable-smart-shrinking ";
        args += "--orientation Portrait ";
        args += "--outline-depth 0 ";
        args += "--page-size A4 ";
        args += "--encoding utf-8";
        args += " - -";

        psi.Arguments = args;

        p = Process.Start(psi); 
```

如您所见，我在 html 和 wkhtmltopdf 上使用 utf-8 编码作为参数，但字符不能正确呈现。我错过了什么？以下是我在 pdf 中得到的内容。英文字符呈现正常。

![这是 pdf 作为图像](../Images/bc0ada51960aec82b5ddaf40f02d4f58.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T16:28:41.973

重定向流的默认编码由您的默认代码页定义。您需要将其设置为 UTF-8。

不幸的是`Process`，不允许您这样做，因此您需要自己制作`StreamWriter`：

```
StreamWriter stdin = new StreamWriter(process.StandardInput.BaseStream, Encoding.UTF8); 
```

# c - C函数看不到全局变量

> ID：14055507
> 
> 赞同：0
> 
> 时间：2012-12-27T13:28:38.040
> 
> 标签：c, gcc, global-variables

为什么我的 normals_since 函数看不到我的全局变量跳跃？我不敢相信在 main 中声明的变量在整个程序中不可用是什么封装或隐藏或什么意思？它是否可以通过诸如 main.z 或 _ *main* _z 之类的秘密方式访问？我的 gcc 错误>>

```
yrs_since.c: In function ‘normals_since’:
yrs_since.c:40:9: error: ‘leaps’ undeclared (first use in this function)
yrs_since.c:40:9: note: each undeclared identifier is reported only once </p>
for each function it appears in

possible answer
looks like if I want all functions to see the vars, I have to move 
int z; //place holder
int leaps;
int normals; 
```

在 main 之外并在 #defines 之后将它们声明在顶部

```
#include stdio.h>
#include stdlib.h>
#define START_GREG 1582
int yrs_since(int year); //type-declare the function
int leaps_since(int years);
int normals_since(int years);

int main(int argc, char* argv[]){
    int year = 1599; //local var
    int z; //place holder
    int leaps;
    int normals;
    z = yrs_since(year); //call the function
    leaps = leaps_since(z); //leap years move the doomsday fwd by 2 days
    normals= normals_since(z); //normal years it adjusts one day
    printf("blah blah %d,", z);//print the result
    printf("leap years since 1582:-->> %d  <<", leaps);
    printf("normal years since 1582:-->> %d  <<", normals);
    return EXIT_SUCCESS;
}
int yrs_since(year){
    int x;
    x=year-START_GREG;
    return x;
};
int leaps_since (years){
    return years/4;
};

int normals_since(years){
    int x;
    x=years-leaps;
    return x;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:32:41.427

对，正如您所发现的，函数内部的变量仅对该函数可见。`main`是一个函数，就像任何其他函数一样，它没有以任何特殊方式处理。

全局变量在函数之外声明（但通常最好避免使用全局函数。

如果要避免使用全局变量，解决方案是将变量从 main 传递到使用该变量的函数中。

例如：

```
int normals_since(int years, int leaps){
    int x;
    x=years-leaps;
    return x;
}; 
```

请注意，我在 years 变量中添加了“int”。虽然在某些编译器中仍然允许使用旧式 C，但绝对建议使用 ANSI 标准（添加`-ansi -strict -Wall -std=c99`到您的 gcc 命令行中，为您提供“您可能做错的事情”的警告以及不遵循 ANSI 标准的错误）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:30:38.933

在中声明的变量*仅*对其自身`main()`可见。您要么需要将这些变量移动到全局范围（在所有函数之外），要么将指向它们的指针传递给其他函数。*`main()`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T13:32:26.057

因为您已经在函数体内*定义*了跳跃`main()`。如果您希望它真正是全局的，请在`main()`函数外部定义它，例如，在原型的正下方：

```
int normals_since(int years); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:29:37.963

可能的答案：看起来如果我想让所有函数都看到变量，我必须移动

```
int z; //place holder
int leaps;
int normals; 
```

在 main 之外并在`#defines`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T13:31:10.513

在块内声明的任何`var`内容都不会在块外定义。
没有什么好相信的，它就是它的工作方式（在其他编程语言中也是如此）。
如果你想要一个全局`var`- 在所有块之外声明它。*

# sql - 我可以使用这个 sql 语句来搜索 asp:textbox

> ID：14055508
> 
> 赞同：0
> 
> 时间：2012-12-27T13:28:41.673
> 
> 标签：sql, .net-4.0

我有这个运行良好的 SQL 语句，但它不能满足我的需要。它正在从表中检索应该完全相同的所有数据。我的意思是`First name`表格中的应该正是文本框的文本。这是我正在使用的 SQL 语句。

```
SELECT        
    CustomerID, FirstName, LastName, Email, Mobile
FROM
    Customers
WHERE        
    (FirstName = @FirstName) 
```

我需要的是与`LIKE`我猜想的条件相关的东西，它的工作原理如下：表格“示例文本”中有数据，我在文本框中写下 Samp、Sam、Sa 以及与数据相同的任何文本在表格中数据将自动显示。顺便说一句，我正在使用 Micosoft Visual Studio 来帮助我使用查询生成器构建我的查询。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:35:12.480

好吧，至少在查询方面，这是您需要的：

```
SELECT        CustomerID, FirstName, LastName, Email, Mobile
FROM            Customers
WHERE        FirstName LIKE '%' + @FirstName 
```

您将从文本框中将临时名字发送到 SQL 服务器并显示结果以供选择。

# unix - 计算匹配词的出现次数

> ID：14055511
> 
> 赞同：-4
> 
> 时间：2012-12-27T13:29:01.753
> 
> 标签：unix, sed, awk

> **可能重复：**
> [需要 awk unix 中的代码或使用 substr](https://stackoverflow.com/questions/14054466/need-code-in-awk-unix-or-use-substr)

我想在单词之间打印单词`ctr{words}`并计算单词的频率。

我试过了：

```
$ sed -n 's/.*ctr{\(.[^}]*\).*/\1/p' file 
```

该代码可以完美地打印出单词，但我需要计算单词的频率。

上述代码的输出：

```
莫7法扎特
JaishanaIN
再尔库尔
ZainUnlimited
巴拉克新
ZainElKulSN

```

但是我需要：

```
1 莫7法扎特
1 JaishanaIN
2 ZainElKul
1 ZainUnlimited
1 阿尔巴拉克新
1 ZainElKulSN

```

该文件是：

```
962796057604|mar0101|0|00000107A20E00000A6C331650B920340C00|0|0|400019FD7DBFBF7F|1001|962796057604|0 |01001|||-1|795971936|  00962795971936|16||-1|  00962795971936|-1|0|2|0|416019000659493|0||||||0|0|2012.12.01 00:07:09|12|30|0|516|16|1|2012.12.01 00:06:39|1|0||202|20001||0B12F1001104697209100300000000000000|1|1|11000|0|0||0881006972091003F000||0 714F610045584E6|000000000000|3|1|0000000000000000|0|140|0|0|0|0|0|0|||0|2|||||||||||||||||||||0|||0| |0|1|143|acf{0}cif{0}fcf{0}con{0}cuf{0}ctr{**Mo7afazat**}cgpa{962796057604}vlr{0096279001300}cff{0}roaf{0}mpty{0}ftksn{JMT}ftksr{0001}ftktp{CallTicketCPOCS} ||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962796298894|mar0101|0|000001028225AE4AD868A8B750B900980C00|1|0|4000018001000002||962796298894|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|0|||||||||||||0|0|||3797|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|244|tid{111210532409329884}pfid{20}gob{1}rid{globitel} afid{}uid1{962796298894}aid1{1}ar1{0}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC COMMIT AMOUNT 0}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**JaishanaIN**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||
1|34|2012.12.01 00:08:35|12|4|100-50-0-962796605155|mar0101|0|00000102A20400000A6A439D50B920520C00|0|0|400019FD7DBFBF7F|1001|962796605155|1 6||||-1|b116c||16||-1||-1|0|0|0|416017002233360|0||||||0|0|1970.01.01 02:00:00|0|0|0|220|0|1|1970.01.01 02:00:00|1|0||194|0||000000000000000000000000000000000000|0|0||0|0||00000000000000000000||0000000000 000000|000000000000|0|0|0000000000000000|0|370|0|0|0|0|0|0|||0|0|||||||||||||||||||||0|||0||0|1|70|a cf{3}ussd{1}ctr{**ZainElKul**}ftksn{JMT}ftksr{0001}ftktp{CallTicketCPOCS}||
1|34|2012.12.01 00:08:35|12|4|100-10-0
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962797611253|mar0101|0|0000010282B54BD015FF4C4B50B8F96E0C00|1|0|4000018001000002||962797611253|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|0|||||||||||||0|0|||885|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|243|tid{111220371293561120}pfid{20}gob{1}rid{globitel} afid{}uid1{962797611253}aid1{1}ar1{0}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC COMMIT AMOUNT 0}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**ZainElKul**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||

-962795292027|mar0101|0|00000101A20200000A6A96B750B920300C00|0|0|400019FD7DBFBF7F|1001|962795292027|0 |01004|||-1|797196452|  00962797196452|16||-1|  00962797196452|-1|0|2|0|416018002276781|0||||||0|0|2012.12.01 00:07:09|12|12|23|516|16|1|2012.12.01 00:06:34|1|0||202|1||0B12F1001104697209100300000000000000|1|1|11000|0|0||0881006972091003F000||0714F 6100455AD67|000000000000|3|1|0000000000000000|0|30|0|0|0|0|0|0|||0|0|||||||||||||||||||||0|||0||0|1| 171|acf{0}cif{0}fcf{0}con{0}cuf{0}ctr{ZainUnlimited}cgpa{962795292027}vlr{0096279001300}cff{0}roaf{0}mpty{0}cacc{1;0;30}cquo{1;230;}ftksn{JMT}ftksr{000 1}ftktp{CallTicketCPOCS}||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962796012818|mar0101|0|0000010882218115085D5F9150B920520C00|0|0|4000018001000002||962796012818|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|1|||||||||||||0|0|||70|0|0|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|258|tid{111221366974701289}pfid{17}gob{1}rid{globitel} afid{}uid1{962796012818}aid1{1}ar1{-2147483648}uid2{}aid2{-1}pid{DEFAULT_DECISION}pur{!GDRC Balance Check}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**AlBarakehNew**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962797251349|mar0101|0|0000010282A451483EDFCFD350B920400C00|1|0|4000018001000002||962797251349|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|0|||||||||||||0|0|||440|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|245|tid{111211342745325133}pfid{20}gob{1}rid{globitel} afid{}uid1{962797251349}aid1{1}ar1{0}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC COMMIT AMOUNT 0}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**ZainElKulSN**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:41:29.513

只需`| sort | uniq -c`在单行的末尾添加即可。

它成为了 ：

```
sed -n 's/.*ctr{\(.[^}]*\).*/\1/p' file | sort | uniq -c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:47:53.773

您甚至不必为此使用正则表达式，请看：

```
cat test.txt | tr "}" "\n" | grep "ctr" | cut -d "{" -f 2 | sort | uniq -c 
```

输出：

```
 1 AlBarakehNew
  1 JaishanaIN
  1 Mo7afazat
  2 ZainElKul
  1 ZainElKulSN
  1 ZainUnlimited 
```

# c++ - '{'令牌类继承之前的c ++预期类名

> ID：14055516
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:29:29.543
> 
> 标签：c++, inheritance

> **可能重复：**
> [错误：“{”标记之前的预期类名](https://stackoverflow.com/questions/5319906/error-expected-class-name-before-token)

我有一个主要的超类 GameObject 和派生类 GuiBitMapFont。它总是抛出预期的类名错误。但是如果我在 GuiBitMapFont**类 GameObject 中添加前向推导；**它会引发**对不完整类型 'class GameObject' 的无效使用和 'class GameObject' 的**前**向声明**。

**编辑** 是的，GameObject 文件中有#include GuiBitMapFont。但这是我在写这个问题时的错误。编译器仍然抛出这两个错误。

```
#ifndef GAMEOBJECT_H
#define GAMEOBJECT_H

#include <string>
#include "Texture.h"

class GameObject {
private:
    int x;
    int y;
    int width;
    int height;
public:
    GameObject();
    GameObject(int x, int y, int width, int height);
    GameObject(const GameObject& orig);
    virtual ~GameObject();

    virtual void draw();
    virtual void update();

    //ignore those, i need to rewrite it....
    void setX(int x);
    void setY(int y);
    void setWidth(int width);
    void setHeight(int height);
    int getX() const;
    int getY() const;
    int getWidth() const;
    int getHeight() const;
};

#endif  /* GAMEOBJECT_H */ 
```

并派生出

```
#ifndef GUIBITMAPTEXT_H
#define GUIBITMAPTEXT_H

#include <string>
#include "SDL.h"
#include "GameObject.h"
#include "BMF.h"

class GuiBitMapText : public GameObject { //error: expected class-name before '{' token
private:
    std::string text;
    BMF *font;

    //SDL_Surface *surf;
    SDL_Texture *texture;
public:
    GuiBitMapText(int x, int y, std::string text, BMF *font);
    GuiBitMapText(const GuiBitMapText& orig);
    virtual ~GuiBitMapText();

    virtual void draw();
    virtual void update();
};

#endif  /* GUIBITMAPTEXT_H */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:32:44.287

你有一个循环包含。从 GameObject.h 中删除这一行：

```
#include "GuiBitMapText.h" 
```

您不会在 GameObject.h 中使用此类，因此甚至不需要包含该类。在某些情况下，在处理定义相互引用的类型时，您必须前向声明类，但由于`GameObject`没有对 进行任何引用`GuiBitMapText`，因此在这种情况下没有理由需要前向声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:35:19.627

你有一个循环包含。考虑一下何时编译包含`GameObject.h`（例如）的内容。将被包括在内，然后在 的定义之上包括 ，然后在 的定义之上包括。但是，您的包含守卫将阻止最后一个包含实际执行任何操作，因此将无法编译，因为它之前没有定义。`GameObject.cpp``GameObject.h``GuiBitMapText.h``GameObject``GameObject.h``GuiBitMapText``GuiBitMapText``GameObject`

但`GameObject`甚至不依赖于`GuiBitMapText`，所以没有理由在`#include "GuiBitMapText.h"`那里。只要摆脱它，你会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:14:20.090

您需要正确理解标头依赖性。

您应该了解何时实际包含标头以及何时使用前向声明。

在 GameObject 的情况下，它实际上完全没有外部依赖。您的头文件不需要包含任何其他头文件。

对于 GuiBitMapText：

*   它是一种游戏对象。要从一个类派生，您必须包含其标题（您有）。因此保持`#include GameObject.h`
*   您的班级有一个字符串作为成员。`<string>`所以你也需要标题
*   你的类有一个指向 BMF 的指针。提前声明就足够了。删除包含可能会破坏一些期望此包含存在但修复该代码而不是此文件的代码。替换`#include "BMF.h"`为`class BMF;`
*   你的类有一个指向 SDL_Texture 的指针。不仅如此，这个指针只出现在类的私有部分，根本没有出现在公共接口中。（与出现在公共构造函数和类成员中的 BMF 指针不同）。所以更重要的是，在这里你应该使用前向声明。然后，您班级的用户不会获得该包含的开销。替换`"#include SDL.h"`为`class SDL_Texture;`

这对学习很有用，并且将在将来以及在这种特殊情况下对您有所帮助。

将头文件更改为仅使用前向声明后，与这些文件（即 .cpp 文件）相关的编译单元现在必须包含头文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T14:11:32.823

该错误是由我有这两行的另一个文件触发的

```
#include "GameObject.h"
#include "GuiBitMapText.h" 
```

我真的不需要在那个文件中包含 GuiBitMapText，所以我删除了 include GuiBitMapText，现在它可以工作了......

# android - 我的 Android 应用程序在模拟器上运行，但在 android 设备上运行

> ID：14055525
> 
> 赞同：0
> 
> 时间：2012-12-27T13:30:10.837
> 
> 标签：android, android-emulator, android-manifest

我在模拟器（版本 2.2）上运行我的 android 应用程序，它工作正常。但是，当我在我的 android 设备（4.1 版）上尝试该应用程序时，它不起作用。我在日志中收到如下错误：

```
12-27 16:54:22.080: E/Trace(25485): error opening trace file: No such file or directory (2)
12-27 16:54:22.845: E/AndroidRuntime(25485): FATAL EXCEPTION: main
12-27 16:54:22.845: E/AndroidRuntime(25485): java.lang.RuntimeException: Binary XML file line #73: You must supply a layout_width attribute.
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:5696)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:5832)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.RelativeLayout$LayoutParams.<init>(RelativeLayout.java:1099)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.RelativeLayout.generateLayoutParams(RelativeLayout.java:956)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.RelativeLayout.generateLayoutParams(RelativeLayout.java:70)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:748)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.ResourceCursorAdapter.newView(ResourceCursorAdapter.java:104)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at example.smartdialup.PhoneSpellDialer$ContactListAdapter.newView(PhoneSpellDialer.java:720)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.CursorAdapter.getView(CursorAdapter.java:246)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.AbsListView.obtainView(AbsListView.java:2457)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.ListView.makeAndAddView(ListView.java:1775)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.ListView.fillDown(ListView.java:678)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.ListView.fillFromTop(ListView.java:739)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.ListView.layoutChildren(ListView.java:1614)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.AbsListView.onLayout(AbsListView.java:2292)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.View.layout(View.java:14055)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup.layout(ViewGroup.java:4602)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.View.layout(View.java:14055)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup.layout(ViewGroup.java:4602)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.View.layout(View.java:14055)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup.layout(ViewGroup.java:4602)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1655)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1513)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1426)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.View.layout(View.java:14055)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup.layout(ViewGroup.java:4602)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.View.layout(View.java:14055)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewGroup.layout(ViewGroup.java:4602)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1990)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1811)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1110)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4470)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.Choreographer.doFrame(Choreographer.java:525)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.os.Handler.handleCallback(Handler.java:615)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.os.Looper.loop(Looper.java:137)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at java.lang.reflect.Method.invokeNative(Native Method)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at java.lang.reflect.Method.invoke(Method.java:511)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-27 16:54:22.845: E/AndroidRuntime(25485):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 Manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="example.smartdialup"
   android:versionName="1.81" android:versionCode="14">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".PhoneSpellDialer"
                  android:label="@string/app_name"
                  android:screenOrientation="portrait"
                  android:theme="@style/Main">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.intent.action.CALL_BUTTON"/>
                <action android:name="android.intent.action.DIAL" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" /> 
            </intent-filter>
        </activity>
        <activity android:name="Preferences"></activity>
    </application>

    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <!--  <uses-sdk android:minSdkVersion="3"></uses-sdk>-->
    <supports-screens
        android:anyDensity="true" />
</manifest> 
```

您知道如何在我的设备上成功运行该应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:32:26.577

您在您定义的自定义列表项视图似乎`newView(...)`缺少一个属性。`android:layout_width`需要始终设置（连同 layout_height 属性）为`fill_parent`或者`wrap_content`

查看您在代码中膨胀的 xml 布局文件：`example.smartdialup.PhoneSpellDialer$ContactListAdapter.newView(PhoneSpellDialer.java:720)`

一个`RelativLayout`那里或一个，如果它可能是子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:33:34.233

正如日志所说：

> 二进制 XML 文件第 73 行：您必须提供 layout_width 属性。

意味着您忘记 `android:layout_width="wrap_content"` 为 View 添加 Activity 的 Xml 布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:37:16.717

很奇怪，您会在模拟器和真实设备之间发现“差异”，因为该错误也应该发生在您的模拟器上。这就是我在模拟器和真实设备中开发的原因之一，两者之间的行为比你喜欢的要大得多。

XML 文件第 73 行：您必须提供 layout_width 属性。

这个错误很直接，你添加到布局 XML 的每个元素都应该有一个 layout_width 和 layout_height ，所以 Android 知道如何显示它们。

您尚未提供布局 XML，因此我无法向您展示更正后的 XML。我的布局中的一个示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#FFFFFF">
    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </ListView>
</LinearLayout> 
```

请注意，所有“XML 标签”中都使用了 layout_width 和 layout_height，因此 Android 知道如何定位它们。

match_parent 是值之一，您需要的值可以在 Android 开发者网站上找到：http: [//developer.android.com/guide/topics/resources/layout-resource.html#layoutvalues](http://developer.android.com/guide/topics/resources/layout-resource.html#layoutvalues)

提示：您使用 Eclipse 进行 Android 开发？输入： android:layout_width=" 然后按 CTRL+SPACEBAR 它应该自动完成；)

# java - JBoss 等价于 HTTPModule

> ID：14055529
> 
> 赞同：1
> 
> 时间：2012-12-27T13:30:30.027
> 
> 标签：java, .net, jboss, cross-platform, httpmodule

序言：.NET 开发人员，涉足 Java/JBoss 领域。

首先，如果这个问题以前在这里提出过，我很抱歉；但到目前为止，我只能挑选一些零碎的信息。我真的很感激一些综合信息。

我有一个用 .NET 编写的正在进行的 SSO 项目，它拦截所有 HTTP 请求（或基于 MIME 类型的特定集合），与一些预加载的缓存配置（应用程序）和状态（会话/登录用户）数据相匹配并决定如何处理该请求 - 允许、拒绝或要求提供凭据。（不幸的是，由于要求我们无法选择现成的解决方案。）

在 IIS/.NET 下，此功能由 HTTP 模块处理，该模块将自身插入请求处理管道并派生必要的操作，甚至在应用程序本身被调用之前。它工作正常，但仅适用于 ASP 和 ASP.NET 应用程序；我们的下一个任务是使其可用于 Java 应用程序，重点是 JBoss。

那面文字墙说，这是实际的问题：

是否有与我们当前使用的 HTTP 模块功能等效的 JBoss - 在应用程序之前执行但可以访问会话/应用程序状态，并且可以读取与应用程序本身一起存储的某种 XML 配置文件？还有另一种更好的方法来实现我们没有研究的吗？

非常感谢您的参与。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:06:16.730

我认为您在 Java/Java EE 中使用 HTTP Servlet 过滤器。[您可以在 HttpServlet Filter 上搜索数百个示例实现，本文](http://www.oracle.com/technetwork/java/filters-137243.html)提供了一个这样的示例。您主要必须编写一个实现[Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)接口的类，然后在文件中添加必要的配置（即过滤器将捕获的请求类型和过滤器本身的定义）`WEB-INF\web.xml`。

此外，HttpServletFilters 不仅限于 JBoss，它是 Java Servlet 规范的一部分，因此可用于任何实现规范的容器（Weblogic、Websphere、Tomcat 等）。

# video - 中型企业的视频托管服务提供商（youtube 替代品）

> ID：14055530
> 
> 赞同：0
> 
> 时间：2012-12-27T13:30:35.173
> 
> 标签：video, video-streaming, youtube-api, html5-video, vimeo

我想获得您对视频托管服务提供商的建议。

我们需要一个付费平台来托管我们的视频并将它们嵌入到我们的网页中。我们的要求：

*   每天 100 万次观看。每个视频 3-5MB
*   无广告
*   没有像 Youtube 这样的品牌
*   发布视频的 API 访问权限
*   URL 自定义（例如，我们希望它是 ourdomain.com/myvideo 而不是 youtube.com/myvideo）
*   视频可在大多数设备上观看

我看到了这个问题[https://stackoverflow.com/questions/1060020](https://stackoverflow.com/questions/1060020)但它已经超过 3 年了。

根据我的研究，vimeo PLUS/PRO 不适合我们。Vimeo PRO 每年仅允许约 200 万次观看，我们可以在几天内完成。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:18:58.830

Brightcove、Kaltura 和 Ooyala 目前在点播视频托管和流媒体方面可能是前三名，而 Livestream 是一个不错的选择，如果您需要（顾名思义）流式传输直播活动。在顶级供应商中，没有太多技术差异（除了他们使用谁来进行云存储、CDN 等），因此可能会归结为价格、客户服务等，你必须根据与他们所有人的交谈来确定。

我们个人更喜欢 Kaltura，因为它们对开源更友好，这可能对您的业务在哲学上很重要，也可能不重要。如果您想自己托管，他们所有的代码和软件都是免费的（在所有意义上），如果您想为他们的 SaaS 产品付费，他们拥有坚如磐石的云托管。我认识的其他人也对 Brightcove 非常满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T11:33:32.703

我第二个iplayerhd.com。它是 < 30 美元/月，并且不限制观看次数。它确实包括每月的带宽限制，但是当我们向他们询问时，他们愿意提高限制——事实证明它足够高，我们没有达到它......希望永远存在；-}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T19:06:58.453

Vimeo Pro 目前只有每周 20 GB 的上传限制（更多按需）。但是，查看和下载不受限制。 [https://vimeo.com/help/faq/vimeo-membership/vimeo-pro](https://vimeo.com/help/faq/vimeo-membership/vimeo-pro)

# javascript - 将带有格式化 CSS 的 html 表导出到 Javascript 或 Jquery 中的 Excel 或 PDF 文件中

> ID：14055535
> 
> 赞同：2
> 
> 时间：2012-12-27T13:30:45.340
> 
> 标签：javascript, jquery, html, excel, html-table

我尝试了几种方法，即单击按钮的 Datatable 方法以及此 Javascript：

```
<script type="text/javascript">
var tableToExcel = (function () {
    var uri = 'data:application/vnd.ms-excel;base64,',
        template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',
        base64 = function (s) {
            return window.btoa(unescape(encodeURIComponent(s)))
        },
        format = function (s, c) {
            return s.replace(/{(\w+)}/g, function (m, p) {
                return c[p];
            })
        }
    return function (table, name) {
        if (!table.nodeType) table = document.getElementById(table)
        var ctx = {
            worksheet: name || 'Worksheet',
            table: table.innerHTML
        }
        window.location.href = uri + base64(format(template, ctx))
    }
})()
</script> 
```

使用此按钮：

```
<input type="button" onclick="tableToExcel('myTable', 'W3C Example Table')" value="Export to Excel"> 
```

是否可以保存格式化的 CSS 表？我只格式化了 tr 的表格，例如：

```
<tr class="wassat">
<td><a>280 Zzzap</a></td>
<td><a>Bally Astrocade</a></td>
<td><a>arc 4/10</a></td>
<td><a>badan</a></td>
<td><a>3/5</a></td>
<td><a>Rc</a></td>
<td><a>Arc</a></td>
<td><a>1978</a></td>
<td><a>Didam</a></td>
<td><a></a></td>

</tr> 
```

CSS代码是这样的

```
tr.wassat { background-color:#DF7401; } 
```

我希望这不是一个在搜索中找不到的双重帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-14T10:34:08.527

尝试这个：

```
var tableToExcel = (function () {
            var uri = 'data:application/vnd.ms-excel;base64,'
                , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
                , base64 = function (s) { return window.btoa(unescape(encodeURIComponent(s))) }
                , format = function (s, c) { return s.replace(/{(\w+)}/g, function (m, p) { return c[p]; }) }
            return function (table, name) {
                if (!table.nodeType) table = document.getElementById(table)
                var ctx = { worksheet: name || 'Worksheet', table: table.innerHTML }
                var blob = new Blob([format(template, ctx)]);
                var blobURL = window.URL.createObjectURL(blob);

                if (ifIE()) {
                    csvData = table.innerHTML;
                    if (window.navigator.msSaveBlob) {
                        var blob = new Blob([format(template, ctx)], {
                            type: "text/html"
                        });
                        navigator.msSaveBlob(blob, '' + name + '.xls');
                    }
                }
                else
                window.location.href = uri + base64(format(template, ctx))
            }
        })()

        function ifIE() {
            var isIE11 = navigator.userAgent.indexOf(".NET CLR") > -1;
            var isIE11orLess = isIE11 || navigator.appVersion.indexOf("MSIE") != -1;
            return isIE11orLess;
        } 
```

# php - MySql 表现不佳

> ID：14055547
> 
> 赞同：0
> 
> 时间：2012-12-27T13:31:51.453
> 
> 标签：php, mysql, database

请看这段代码，我正在使用mysql。

```
create table `dictionary_one` (`dict_id` int(10) primary key)
engine = innodb;

create table `already_exists`(
  `pk_id`             int(10) primary key,
  `ref_dict_one_id`   int(10),
  constraint `Already_exists_ibfk_1` foreign key(`ref_dict_one_id`) references `dictionary_one`(`dict_id`)
); 
```

到目前为止，似乎一切进展顺利。现在 - 添加引用另一个表的另一列。

```
create table `dictionary_two` (`dict_id` int(10) primary key)
engine = innodb;

alter table `already_exists` add column `ref_dict_two_id` int(10), add foreign key `Already_exists_ibfk_2`(`ref_dict_two_id`) references `dictionary_two`(`dict_id`); 
```

没有语法错误，一切都做对了，但是：

```
ERROR 1050 (42S01): Table './test/already_exists' already exists
1 row in set (0.00 sec) 
```

我的问题是……为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:42:32.450

```
alter table `already_exists` 
  add column `ref_dict_two_id` int(10),

  add constraint `Already_exists_ibfk_2`
    foreign key (`ref_dict_two_id`) 
    references `dictionary_two`(`dict_id`); 
```

# mysql - Mysql以间隔选择时间戳

> ID：14055549
> 
> 赞同：1
> 
> 时间：2012-12-27T13:31:55.613
> 
> 标签：mysql, sql, database

我有一张这样的桌子

```
CREATE TABLE `TPS_INFO` (
    `TPS` INT(10) NULL DEFAULT NULL,
    `AT_TIME` TIMESTAMP NOT NULL 
              DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) 
```

我想选择 TPS 值和时间戳，这样时间戳的选择相差 1 分钟。

我怎么能在mysql中做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:08:14.600

```
select *,TIMESTAMPDIFF(SECOND,t1.AT_TIME,t2.AT_TIME) AS diff from tps_info t1 , tps_info  t2 having diff='60' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T13:44:15.813

终于我做到了，就这样——

```
Select m.tps,m.at_time from TPS_info m, tps_info c 
where (date_add(m.at_time, INTERVAL 1 MINUTE) = c.at_time) OR
  (date_add(m.at_time, INTERVAL -1 MINUTE) = c.at_time)
group by m.at_time
order by m.at_time 
```

最初我尝试喜欢，

```
Select m.tps,m.at_time from TPS_info m, tps_info c 
where date_add(m.at_time, INTERVAL 1 MINUTE) = c.at_time 
```

看[**演示**](http://sqlfiddle.com/#!2/0e6bb/1)

**注意：**它工作正常，除了最后一条记录没有被检索。

结果相同

```
Select m.tps,m.at_time from TPS_info m, tps_info c 
where 60 = TIME_TO_SEC( TIMEDIFF( m.at_time, c.at_time ) ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T13:50:21.190

```
select * from TPS_INFO where TIMESTAMPDIFF(SECOND, AT_TIME,NOW()) < 60 
```

# image - uibinder如何使用静态图片资源？

> ID：14055550
> 
> 赞同：0
> 
> 时间：2012-12-27T13:31:54.953
> 
> 标签：image, gwt, uibinder

我有一个带有 uibinder 布局文件的 java 类，我想在其中引用图像并将其显示在 focusPanel 中。

在 uibinder 中使用静态图像的最佳方法是什么？为什么找不到我的图像？

```
src/main/java/de/myProject:
> .ui.xml
> .java
> image.png 
```

ui.xml：

```
<g:FocusPanel>
    <g:Image url="image.png"/>
</g:FocusPanel> 
```

结果：找不到 404 图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:43:36.837

您必须将此图像放在 Web 服务器上可公开访问的文件夹中。它不能在 /src 文件夹中。

# python - Tkinter 验证是否必须采取严厉措施？

> ID：14055551
> 
> 赞同：0
> 
> 时间：2012-12-27T13:32:07.300
> 
> 标签：python, tkinter

我正在为 Python/Tkinter 应用程序设计一个“设置”框架，允许用户指定 IP 地址、端口号和其他几个可配置选项。我想在让用户关闭框架以应用它们之前验证用户条目。

根据到目前为止我对`Entry`小部件`validate`和`validatecommand`选项的阅读（和尝试），他们提供的唯一选择是“重手”验证。在条目有效之前，阻止用户离开条目小部件（或什至键入任何更多击键）的那种。这正是我在设计 GUI 时避免的行为，因为这对用户来说很烦人。

我计划切换到使用 .trace 方法来监视值，并且只禁用“确定/应用”按钮，直到框架中的所有条目都有效。不过，在我这样做之前，我想知道我是否遗漏了有关内置验证选项的任何内容。有没有我错过的不那么严厉的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:56:13.197

您可以使用验证功能而无需“笨手笨脚”。设置确定/应用按钮的状态后，让您的验证始终返回 True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:51:47.003

如果你使用跟踪，那么你就拥有了你想要的东西，而根本不需要使用 Tkinter 的验证。使所有跟踪都转到相同的功能，您可以根据需要在其中测试和验证所有值，并根据该功能启用或禁用确定按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:27:44.773

我不确定您是否应该这样做，但是您可以附加一个`invalidcommand`处理程序，该处理程序将对条目进行操作*，就好像*一切都很好。

示例脚本：

```
import Tkinter as tk

def onvalidate(d,i,P,s,S,v,V,W):
    # only lowercase is valid
    valid = (P.lower() == P)
    # set red background if invalid
    newcolor = 'red' if not valid else default_color
    root.nametowidget(W).configure(background=newcolor)
    return valid

def oninvalid(d,i,P,s,S,v,V,W):
    #called if widget is invalid
    widget = root.nametowidget(W)
    # S is the character that *would* have been
    # inserted or deleted, but won't because it is invalid
    # So we do it ourselves
    if S:
        if d=='0':
            widget.delete(i, len(S))
        elif d=='1':
            widget.insert(i, S)
    # Changing the text clears the 'validate' value
    # so we have to reset it
    widget.after_idle(lambda W,v: root.nametowidget(W).configure(validate=v), W, v)

root = tk.Tk()

valhook = (root.register(onvalidate), '%d', '%i', '%P', '%s', '%S', '%v', '%V', '%W')
invhook = (root.register(oninvalid), '%d', '%i', '%P', '%s', '%S', '%v', '%V', '%W')

entry = tk.Entry(root, validate="key", validatecommand=valhook, invalidcommand=invhook)

default_color = entry.cget('background')

entry.pack()

root.mainloop() 
```

这将创建一个条目，如果无效则具有红色背景，否则将具有白色背景，但即使条目无效，文本仍将被插入或删除。

# java - 从 Excel 表中读取日期值 (Java)

> ID：14055554
> 
> 赞同：0
> 
> 时间：2012-12-27T13:32:20.243
> 
> 标签：java, apache-poi

我有一个显示 excel 工作表内容的 Java 代码。现在，当我使用*数字/字符串/布尔*数据时，它总是给我正确的结果。不同的是，为了测试我的代码，我在 Excel 中做了一些更改，并添加了一个*日期值*，例如*4-sep-09*。在运行我的代码时，它返回了不想要的结果。代码和o/p如下所示。**如何从 Excel 表中读取和显示日期值？**我正在使用 Apache Poi。我本可以做类似 的事情`XSSFDateUtil`并检查单元格值是日期还是不使用`if-else`？这是一个可能的解决方案吗？

Java 代码：

```
FileInputStream file = new FileInputStream(new File(FileName));
       System.out.println("The contents of sheet are:\n");
       XSSFWorkbook workbook = new XSSFWorkbook(file);
       XSSFSheet sheet = workbook.getSheetAt(0);
       Iterator<Row> rowIterator = sheet.iterator();
       while(rowIterator.hasNext()) {
           Row row = rowIterator.next(); 
           Iterator<Cell> cellIterator = row.cellIterator();
           while(cellIterator.hasNext()) {
               Cell cell = cellIterator.next();
               switch(cell.getCellType()) {
                   case Cell.CELL_TYPE_NUMERIC:
                       System.out.print(cell.getNumericCellValue() + "\t\t");
                       break;
                   case Cell.CELL_TYPE_STRING:
                       System.out.print(cell.getStringCellValue() + "\t\t");
                       break;
               }
           }
           System.out.println("");
       }    
       file.close(); 
```

我得到的 O/P

```
ColA   | ColB....(few other columns)
32755.0|(other values) 
```

相反，我希望必须打印该日期值而不是数字。我的工作表在*ColA下有**4-SEP-89*日期，并且显示了一些数字。

 *所需的 O/P

```
ColA    | ColB....(few other columns)
4-SEP-89|(other values) 
```

**注意**：-**这是我的代码的一部分，运行良好。它没有给出任何错误，但是我需要在上面提到的 o/p 中进行小的更改。**我已经为此工作了一段时间。在此之前，我已经问过与显示 Excel 表格相关的问题——[阅读 Excel 文档（Java 代码）时](https://stackoverflow.com/questions/13856466/issu-while-reading-excel-document-java-code)的问题，该文档与其他几个文档一起解决。不管怎么说，还是要谢谢你。

另外，据我所知，excel中的所有内容都被读取为字符串（布尔值除外）？不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:41:10.277

你可能想看看[`DateUtil.isCellDateFormatted()`](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DateUtil.html)

DateUtil 是一个实用类，可帮助您处理 Excel 日期。它还具有从`double`您获得的 Java 日期的方法`Cell`*

# xpath - 如何匹配类属性

> ID：14055558
> 
> 赞同：1
> 
> 时间：2012-12-27T13:32:35.327
> 
> 标签：xpath

我有一个包含用`class="iana-group-15 iana-type-1"`or标记的元素的文档`class="iana-group-15 iana-type-1 iana-type-3"`。我想匹配属性中`iana-type-1`的所有元素`class`。CSS 有符号[[class~=iana-type-1]](http://www.w3.org/TR/2011/REC-CSS2-20110607/selector.html#matching-attrs "匹配属性和属性值")和[.iana-type-1](http://www.w3.org/TR/2011/REC-CSS2-20110607/selector.html#class-html "类选择器")对匹配这个非常有用。

使用 XPath 我匹配：

```
@class="iana-type-1"
    or starts-with(@class, "iana-type-1 ")
    or contains(@class, " iana-type-1 ")
    or substring(@class, string-length(@class) - 11) = " iana-type-1" 
```

这很痛苦。有没有更好的方法可以像使用 CSS 选择器一样简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:01:03.167

您可以用空格包围两者。IE：

```
contains(concat(" ", @class, " "),  " iana-type-1 " ) 
```

或者在 XPath 2 中：

```
tokenize(@class, " ") = "iana-type-1" 
```

或者只是使用 css。

# android - 未按名称在 Google 地图上获取位置

> ID：14055563
> 
> 赞同：0
> 
> 时间：2012-12-27T13:32:55.217
> 
> 标签：android, geocoding

我正在尝试通过传递位置名称来获取位置或想在地图上显示位置。
我做了一个在地图上显示当前位置的示例项目。但我不明白如何在谷歌地图上传递名称和搜索地点。
这是我的代码，可以帮助您理解我的问题。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
    mapController = mapView.getController();
    mapController.setZoom(14); // Zoom 1 is world view
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
        0, new GeoUpdateHandler());

    myLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocationOverlay);

    String value = "kasarwadi,pune";
    // Do something with value!

    Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());    
      try {
          List<Address> addresses = geoCoder.getFromLocationName(
              value, 5);
          String add = "";
          if (addresses.size() > 0) {
           GeoPoint   p = new GeoPoint(
                      (int) (addresses.get(0).getLatitude() * 1E6), 
                      (int) (addresses.get(0).getLongitude() * 1E6));
              mapController.animateTo(p);    
              mapView.invalidate();
          }    
      } catch (IOException e) {
          e.printStackTrace();
      }

    myLocationOverlay.runOnFirstFix(new Runnable() {
      public void run() {
        mapView.getController().animateTo(myLocationOverlay.getMyLocation());
      }
    });

    Drawable drawable = this.getResources().getDrawable(R.drawable.point);
    itemizedoverlay = new MyOverlays(this, drawable);
    createMarker();
  }

  @Override
  protected boolean isRouteDisplayed() {
    return false;
  }

  public class GeoUpdateHandler implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
         String value = "kasarwadi,pune";
         // Do something with value!

         Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());    
           try {
               List<Address> addresses = geoCoder.getFromLocationName(
                   value, 5);
               String add = "";
               if (addresses.size() > 0) {
                GeoPoint   p = new GeoPoint(
                           (int) (addresses.get(0).getLatitude() * 1E6), 
                           (int) (addresses.get(0).getLongitude() * 1E6));
                   mapController.animateTo(p);    
                   mapView.invalidate();
               }    
           } catch (IOException e) {
               e.printStackTrace();
           }

    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
  }

  private void createMarker() {
    GeoPoint p = mapView.getMapCenter();
    OverlayItem overlayitem = new OverlayItem(p, "", "");
    itemizedoverlay.addOverlay(overlayitem);
    if (itemizedoverlay.size() > 0) {
      mapView.getOverlays().add(itemizedoverlay);
    }
  }

  @Override
  protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
  }

  @Override
  protected void onPause() {
    super.onPause();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
  } 
```

我还生成 MD5 指纹和有效的 api 密钥。但是当我试图显示它时只显示当前位置，但我需要显示名称经过我的位置。
请给我一个参考或提示。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:42:55.070

由于您要求最多 5 个地址

```
List<Address> addresses = geoCoder.getFromLocationName(value, 5); 
```

第 5 个或最后一个位置的纬度和经度有可能与第 1 个值完全不同（更合适）。

并且您正在尝试动画到最后一个位置。尝试动画到第一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:45:50.250

我在我的模拟器上也遇到了类似的问题，可能它最终会在设备上工作（尚未在设备上测试过！）所以我解决这个问题的方法是使用另一个原始 api 将地址转换为地理点......

所以，我建议不要删除或更改您当前的代码（因为它对我来说看起来不错，谁知道最终可能会在设备场景中工作），但是在您的 catch (IOException) 子句中调用此方法 tryAlternative()。我正在写下 tryAlternative()

```
private void tryAltesrnative(String address) {

    String strCompleteAddress = address.replaceAll(" ", "%20");
    String streetName = strCompleteAddress.substring(strCompleteAddress.indexOf(",")+1);
    String cityName = streetName.substring(streetName.indexOf(",")+1);
    String addressToToast = "";

    HttpGet httpGet = new HttpGet("http://maps.google." + "com/maps/api/geocode/json?address=" + address + "ka&sensor=false");

    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
        response = client.execute(httpGet);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Double lon = new Double(0);
    Double lat = new Double(0);

    try {

        lon = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
            .getJSONObject("geometry").getJSONObject("location")
            .getDouble("lng");

        lat = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
            .getJSONObject("geometry").getJSONObject("location")
            .getDouble("lat");

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

     point = new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6));

     mapController.animateTo(point);
     mapController.setZoom(12);

     List<Overlay> mapOverlays = mapView.getOverlays();
     Drawable drawable = this.getResources().getDrawable(R.drawable.mark_green);
     AddItemizedOverlay itemizedOverlay = new AddItemizedOverlay(drawable, this);

     OverlayItem overlayitem = new OverlayItem(point, "Customer", addressToToast);

     itemizedOverlay.addOverlay(overlayitem);
     mapOverlays.add(itemizedOverlay);
     mapView.invalidate();

     Toast.makeText(this, "Lat: " + point.getLatitudeE6() +", Lon:  "+ point.getLongitudeE6() + "Address: " + addressToToast, Toast.LENGTH_LONG).show();

} 
```

# java - 我的安卓应用程序无法安装在我的设备中

> ID：14055566
> 
> 赞同：0
> 
> 时间：2012-12-27T13:33:00.933
> 
> 标签：java, android

我开发了一个包含 tts 引擎的 android 应用程序。毕竟我成功地通过模拟器运行了应用程序。但是当我尝试在真实设备中安装它时，我收到一条消息，例如“未安装应用程序”。有谁知道这个问题，请建议我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:36:11.417

检查您的 Logcat。我的猜测是，您用来签署您正在安装的应用程序的密钥与您设备上的密钥不匹配。如果您使用调试密钥进行签名以进行测试，并且尝试通过使用您的生产密钥签名的应用程序（具有相同的包名称）进行安装，则会发生这种情况。

键入：`adb logcat`从命令行发现您的确切错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:56:06.490

如果您只想运行该应用程序以便在实际设备上对其进行测试，只需确保在您的设备上正确安装了所有 USB 驱动程序，启用了开发人员选项和 USB 调试，您可以从 Eclipse 中简单地运行它单击`"play"`按钮。

如果您想制作应用程序的最终版本（适合上传到 Google Play 和分发，请按照[此链接上的指南操作如何签署您的 apk](http://developer.android.com/tools/publishing/app-signing.html)

# php - 需要获取图片的url/src

> ID：14055567
> 
> 赞同：0
> 
> 时间：2012-12-27T13:33:06.170
> 
> 标签：php, wordpress

我需要在“the_content”中检索 img 的 src，还需要在最后一个锚点中打印它，如下面的代码所示。我从我的知识和互联网上尝试了几乎所有东西，但没有运气。请帮忙。
我删除了我尝试过的所有内容并放置了干净的代码，以便你们可以轻松理解它。

```
<?php query_posts('cat=7');?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

    <div class="impresna  zoom-img" id="zoom-img">
        <?php the_content();  // it contain images>
        <span class="main"><span class="emboss">MARCA - SP</span><?php the_date(); ?>

            <a class="lb_gallery" href="need to print url of image here">+ZOOM</a></span>
            <br clear="all" />
            </div>
        <?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:00:08.857

您将需要解析从返回的字符串`the_content()`以提取`img`标签。以下是[在 PHP 中解析 HTML 的多种方法](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)。例如，对于 DOM，它将是这样的：

```
<?php
$content = get_the_content();
echo $content;
$last_src = '';

$dom = new DOMDocument;
if($dom->loadHTML($content))
{
    $imgs = $dom->getElementsByTagName('img');
    if($imgs->length > 0)
    {
        $last_img = $imgs->item($imgs->length - 1);
        if($last_img)
            $last_src = $last_img->getAttribute('src');
    }
}
?>
<a class="lb_gallery" href="<?php echo htmlentities($last_src); ?>"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:08:13.377

将此添加到 function.php

```
function get_first_image_url ($post_ID) {
 global $wpdb;
 $default_image = "http://example.com/image_default.jpg";   //Defines a default image
 $post = get_post($post_ID);
 $first_img = '';
 ob_start();
 ob_end_clean();
 $output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
 $first_img = $matches [1] [0];

 if(empty($first_img))
 { 
    $first_img = $default_image;
 }
 return $first_img; } 
```

要检索 img 的 src ：

```
<a class="lb_gallery" href="<?php echo get_first_image_url ($post->ID); ?>"> 
```

# java - 从 Java 驱动程序读取时 Mongo Db 随机超时 - 无法调用某些东西

> ID：14055570
> 
> 赞同：1
> 
> 时间：2012-12-27T13:33:28.923
> 
> 标签：java, mongodb

我有一个应用程序在客户端尝试登录时从 Mongo DB 中查找一个文档。虽然这在大多数情况下都有效，但有时会在“com.mongodb.MongoException$Network: can't call something : ...”下引发超时

一旦请求失败（在预配置的超时之后），下一个请求似乎工作正常，但随后一些其他调用随机失败并出现相同的异常。堆栈跟踪的相关部分是

```
at com.mongodb.DBTCPConnector.innerCall(DBTCPConnector.java:295)
at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:257)
at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:310)
at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:295)
at com.mongodb.DBCollection.findOne(DBCollection.java:727)
at com.mongodb.DBCollection.findOne(DBCollection.java:669) 
```

我正在使用 Spring 的 MongoTemplate 来获取一个集合，然后查询它以查找单个文档。我的代码片段将如下所示

```
BasicDBObject query = new BasicDBObject();
query.put("myIntParam", 283);
DBCollection collection = mongoTemplate.getDb().getCollection(collectionName);
DBObject foundDocument = collection.findOne(query); 
```

相同的 mongo 模板实例在应用程序中用于不同集合中的其他读写目的（我认为建议每个应用程序仅使用一个实例）。

问题通常出现在我让应用程序闲置一段时间后。我在 Ubuntu 12.10 服务器（我的本地环境具有适用于 Ubuntu 12.10 的桌面版本）上运行 JDK 1.7，来自 tomcat。Java 驱动程序版本为 2.10.1。提供以下配置选项

```
mongoOptions.connectTimeout=5000
mongoOptions.socketTimeout=60000
mongoOptions.socketKeepAlive=true
mongoOptions.maxWaitTime=15000
mongoOptions.autoConnectRetry=true 
```

有什么建议或想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:46:28.627

删除该`mongoOptions.socketTimeout=60000`项目，或捕获超时异常然后自行处理。

# c# - 如何以编程方式创建网桥？

> ID：14055571
> 
> 赞同：6
> 
> 时间：2012-12-27T13:33:30.203
> 
> 标签：c#, winapi, network-programming, wmi, wdk

我想使用 c# 在 Windows 7 中的两个适配器之间创建一个网桥。我找不到合适的 API 文档来访问组件并创建桥接器。请帮我找到解决方案。

谢谢，Bhaswanth Gattineni。

# php - 根据使用的浏览器选择链接

> ID：14055573
> 
> 赞同：0
> 
> 时间：2012-12-27T13:33:33.703
> 
> 标签：php, javascript, browser, download

对于带有下载链接的横幅，我想有条件地添加超过 1 个链接

如果用户有 Internet Explorer，它将显示 Internet Explorer 的下载链接如果用户有 Google Chrome 或 Safari，它应该显示该浏览器的链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:37:32.147

Use this to get browser info in PHP:

```
$info = get_browser(null, true); 
```

It will return an array with the browser information. You can use that information to build the proper link from the server side. See the documentation for details: [http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:37:09.487

```
navigator.sayswho= (function(){
    var N= navigator.appName, ua= navigator.userAgent, tem;
    var M= ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
    if(M && (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
    M= M? [M[1], M[2]]: [N, navigator.appVersion, '-?'];

    return M;
})(); 
```

THIS IS NOT MINE! It was posted by @kennebec on this other question: [jQuery browser detection?](https://stackoverflow.com/questions/4498057/jquery-browser-detection)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T13:38:00.827

If you want to detect Internet Explorer, You have to read about [**conditional comments**](https://www.google.com/search?q=Conditional%20comments&oq=Conditional%20comments). You do not need Javascript at all.

You can write:

```
<!--[if IE]>
<a href="ielink">some text</a>
<![endif]-->

<!--[if !IE]> -->
<a href="otherlink">some text</a>
<!-- <![endif]--> 
```

# asp.net-mvc-3 - MVC 中的 AJAX：在 mvc 中使用 ajax 调用控制器操作时出错

> ID：14055576
> 
> 赞同：0
> 
> 时间：2012-12-27T13:34:37.980
> 
> 标签：asp.net-mvc-3

在 mvc 中使用 Ajax 调用控制器操作时出错

**请参阅我用来在控​​制器中调用方法的 ajax 函数**

```
function ChangeEndDate(e) {

     $.ajax({
                type: "POST",
                url: "MonitoringSupplyOn/YourAction",
               contentType: "application/json; charset=utf-8",
                data:JSON.stringify({ 
                             id:e.value 
                            }),
                success: function (result) {
                    alert(result);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("oops: " + textStatus + ": " + jqXHR.responseText);

                }
            });
} 
```

**控制器中的方法如下：**

```
 [HttpPost]

    public ActionResult YourAction(string id)
    {
                    return Json(new { id = "succsess" });

    } 
```

**错误如下：** 哎呀：错误：

```
<head>

    <title>Runtime Error</title>

    <style>

     body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 

     p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}

     b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}

     H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }

     H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }

     pre {font-family:"Lucida Console";font-size: .9em}

     .marker {font-weight: bold; color: black;text-decoration: none;}

     .version {color: gray;}

     .error {margin-bottom: 10px;}

     .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }

    </style>

</head>

<body bgcolor="white">

        <span><H1>Server Error in '/RB.MONICA.Web' Application.<hr width=100% size=1 color=silver></H1>

        <h2> <i>Runtime Error</i> </h2></span>

        <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

        <b> Description: </b>An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed.

        <br><br>

        <b>Details:</b> To enable the details of this specific error message to be viewable on the local server machine, please create a &lt;customErrors&gt; tag within a &quot;web.config&quot; configuration file located in the root directory of the current web application. This &lt;customErrors&gt; tag should then have its &quot;mode&quot; attribute set to &quot;RemoteOnly&quot;. To enable the details to be viewable on remote machines, please set &quot;mode&quot; to &quot;Off&quot;.<br><br>

        <table width=100% bgcolor="#ffffcc">

           <tr>

              <td>

&lt;!-- Web.Config Configuration File --&gt;

&lt;configuration&gt;

    &lt;system.web&gt;

        &lt;customErrors mode=&quot;RemoteOnly&quot;/&gt;

    &lt;/system.web&gt;

&lt;/configuration&gt;

              </td>

           </tr>

        </table>

        <br>

        <b>Notes:</b> The current error page you are seeing can be replaced by a custom error page by modifying the &quot;defaultRedirect&quot; attribute of the application&#39;s &lt;customErrors&gt; configuration tag to point to a custom error page URL.<br><br>

        <table width=100% bgcolor="#ffffcc">

           <tr>

              <td>

&lt;!-- Web.Config Configuration File --&gt;

&lt;configuration&gt;

    &lt;system.web&gt;

        &lt;customErrors mode=&quot;On&quot; defaultRedirect=&quot;mycustompage.htm&quot;/&gt;

    &lt;/system.web&gt;

 &lt;/configuration&gt;

              </td>

           </tr>

        </table>

        <br>

</body>

</html> 
```

我总是在这里收到错误消息。请告诉我哪里出错了。

哎呀：错误：

```
<head>

    <title>The HTTP verb POST used to access path '/RB.MONICA.Web/MONICA/MonitoringSupplyOn/MonitoringData/MonitoringSupplyOnController/YourAction' is not allowed.</title>

    <style>

     body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 

     p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}

     b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}

     H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }

     H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }

     pre {font-family:"Lucida Console";font-size: .9em}

     .marker {font-weight: bold; color: black;text-decoration: none;}

     .version {color: gray;}

     .error {margin-bottom: 10px;}

     .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }

    </style>

</head>

<body bgcolor="white">

        <span><H1>Server Error in '/RB.MONICA.Web' Application.<hr width=100% size=1 color=silver></H1>

        <h2> <i>The HTTP verb POST used to access path '/RB.MONICA.Web/MONICA/MonitoringSupplyOn/MonitoringData/MonitoringSupplyOnController/YourAction' is not allowed.</i> </h2></span>

        <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

        <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

        <br><br>

        <b> Exception Details: </b>System.Web.HttpException: The HTTP verb POST used to access path '/RB.MONICA.Web/MONICA/MonitoringSupplyOn/MonitoringData/MonitoringSupplyOnController/YourAction' is not allowed.<br><br>

        <b>Source Error:</b> <br><br>

        <table width=100% bgcolor="#ffffcc">

           <tr>

              <td>

                  <code> 
```

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

```
 </td>

           </tr>

        </table>

        <br>

        <b>Stack Trace:</b> <br><br>

        <table width=100% bgcolor="#ffffcc">

           <tr>

              <td>

                  <code><pre> 
```

[HttpException (0x80004005)：不允许使用 HTTP 动词 POST 访问路径“/RB.MONICA.Web/MONICA/MonitoringSupplyOn/MonitoringData/MonitoringSupplyOnController/YourAction”。]

System.Web.DefaultHttpHandler.BeginProcessRequest（HttpContext 上下文，AsyncCallback 回调，对象状态）+4170038

System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +405

System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375

```
 </td>

           </tr>

        </table>

        <br>

        <hr width=100% size=1 color=silver>

        <b>Version Information:</b>&nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272

        </font>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:14:15.280

请使用固定格式和 JsonRequestBehavior.AllowGet：

```
[HttpPost]
public JsonResult YourAction(string id)
{
       return Json(new { id = "succsess" }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:03:00.857

```
Iam always getting the below error while calling the method in a controller from view:

oops: error: <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>IIS 7.5 Detailed Error - 404.0 - Not Found</title> 
<style type="text/css"> 
<!-- 
body{margin:0;font-size:.7em;font-family:Verdana,Arial,Helvetica,sans-serif;background:#CBE1EF;} 
code{margin:0;color:#006600;font-size:1.1em;font-weight:bold;} 
.config_source code{font-size:.8em;color:#000000;} 
pre{margin:0;font-size:1.4em;word-wrap:break-word;} 
ul,ol{margin:10px 0 10px 40px;} 
ul.first,ol.first{margin-top:5px;} 
fieldset{padding:0 15px 10px 15px;} 

.summary-container fieldset{padding-bottom:5px;margin-top:4px;} 
legend.no-expand-all{padding:2px 15px 4px 10px;margin:0 0 0 -12px;} 
legend{color:#333333;padding:4px 15px 4px 10px;margin:4px 0 8px -12px;_margin-top:0px; 
 border-top:1px solid #EDEDED;border-left:1px solid #EDEDED;border-right:1px solid #969696; 
 border-bottom:1px solid #969696;background:#E7ECF0;font-weight:bold;font-size:1em;} 
a:link,a:visited{color:#007EFF;font-weight:bold;} 
a:hover{text-decoration:none;} 
h1{font-size:2.4em;margin:0;color:#FFF;} 
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.4em;margin:10px 0 0 0;color:#CC0000;} 
h4{font-size:1.2em;margin:10px 0 5px 0; 
}#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS",Verdana,sans-serif; 
 color:#FFF;background-color:#5C87B2; 
}#content{margin:0 0 0 2%;position:relative;} 
.summary-container,.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;} 
.config_source{background:#fff5c4;} 
.content-container p{margin:0 0 10px 0; 
}#details-left{width:35%;float:left;margin-right:2%; 
}#details-right{width:63%;float:left;overflow:hidden; 
}#server_version{width:96%;_height:1px;min-height:1px;margin:0 0 5px 0;padding:11px 2% 8px 2%;color:#FFFFFF; 
 background-color:#5A7FA5;border-bottom:1px solid #C1CFDD;border-top:1px solid #4A6C8E;font-weight:normal; 
 font-size:1em;color:#FFF;text-align:right; 
}#server_version p{margin:5px 0;} 
table{margin:4px 0 4px 0;width:100%;border:none;} 
td,th{vertical-align:top;padding:3px 0;text-align:left;font-weight:bold;border:none;} 
th{width:30%;text-align:right;padding-right:2%;font-weight:normal;} 
thead th{background-color:#ebebeb;width:25%; 
}#details-right th{width:20%;} 
table tr.alt td,table tr.alt th{background-color:#ebebeb;} 
.highlight-code{color:#CC0000;font-weight:bold;font-style:italic;} 
.clear{clear:both;} 
.preferred{padding:0 5px 2px 5px;font-weight:normal;background:#006633;color:#FFF;font-size:.8em;} 
--> 

</style> 

</head> 
<body> 
<div id="header"><h1>Server Error in Application "DEFAULT WEB SITE/RB.MONICA.WEB"</h1></div> 
<div id="server_version"><p>Internet Information Services 7.5</p></div> 
<div id="content"> 
<div class="content-container"> 
 <fieldset><legend>Error Summary</legend> 
  <h2>HTTP Error 404.0 - Not Found</h2> 
  <h3>The resource you are looking for has been removed, had its name changed, or is temporarily unavailable.</h3> 
 </fieldset> 
</div> 
<div class="content-container"> 
 <fieldset><legend>Detailed Error Information</legend> 
  <div id="details-left"> 
   <table border="0" cellpadding="0" cellspacing="0"> 
    <tr class="alt"><th>Module</th><td>IIS Web Core</td></tr> 
    <tr><th>Notification</th><td>MapRequestHandler</td></tr> 
    <tr class="alt"><th>Handler</th><td>StaticFile</td></tr> 
    <tr><th>Error Code</th><td>0x80070002</td></tr> 

   </table> 
  </div> 
  <div id="details-right"> 
   <table border="0" cellpadding="0" cellspacing="0"> 
    <tr class="alt"><th>Requested URL</th><td>http://localhost:80/RB.MONICA.Web/MONICA/MonitoringSupplyOn/MonitoringData/@Url.Action(&quot;YourAction&quot;)?id=101</td></tr> 
    <tr><th>Physical Path</th><td>D:\TOMAS-MONICA\SourceCode\Application\WebServer\MONICA\MonitoringSupplyOn\MonitoringData\@Url.Action(&quot;YourAction&quot;)</td></tr> 
    <tr class="alt"><th>Logon Method</th><td>NTLM</td></tr> 
    <tr><th>Logon User</th><td>apac\rkv1cob</td></tr> 

   </table> 
   <div class="clear"></div> 
  </div> 
 </fieldset> 
</div> 
<div class="content-container"> 
 <fieldset><legend>Most likely causes:</legend> 
  <ul>  <li>The directory or file specified does not exist on the Web server.</li>  <li>The URL contains a typographical error.</li>    <li>A custom filter or module, such as URLScan, restricts access to the file.</li> </ul> 
 </fieldset> 
</div> 
<div class="content-container"> 
 <fieldset><legend>Things you can try:</legend> 
  <ul>  <li>Create the content on the Web server.</li>  <li>Review the browser URL.</li>    <li>Create a tracing rule to track failed requests for this HTTP status code and see which module is calling SetStatus. For more information about creating a tracing rule for failed requests, click <a href="http://go.microsoft.com/fwlink/?LinkID=66439">here</a>. </li> </ul> 
 </fieldset> 
</div> 

<div class="content-container"> 
 <fieldset><legend>Links and More Information</legend> 
  This error means that the file or directory does not exist on the server. Create the file or directory and try the request again. 
  <p><a href="http://go.microsoft.com/fwlink/?LinkID=62293&amp;IIS70Error=404,0,0x80070002,7601">View more information &raquo;</a></p> 

 </fieldset> 
</div> 
</div> 
</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:01:35.273

您正在指定 json 数据类型，但您正在通过 JSON.stringify 传递具有 JSON 语法的字符串。另请注意，这是仅 Firefox 的功能。

尝试以下`data`参数

```
function ChangeEndDate(e) {

     $.ajax({
                type: "POST",
                url: "MonitoringSupplyOn/YourAction",
               contentType: "application/json; charset=utf-8",
                data: { id: e.value },
                success: function (result) {
                    alert(result);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("oops: " + textStatus + ": " + jqXHR.responseText);

                }
            });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:08:59.380

你可以试试这个修改后的代码：

$.ajax({ url: '@Url.Action("YourAction")',

```
 type: 'POST',

        data: { id: "101" },

        async: false,

        success: function (data) {

            alert(data);
        },

        error: function (jqXHR, textStatus, errorThrown) {
            alert("oops: " + textStatus + ": " + jqXHR.responseText);

        }
    }); 
```

并且在控制器中

```
public JsonResult YourAction(string id)
 {
      return Json(new { id = "succsess" });
 } 
```

# jquery-plugins - jPlayer 不是函数错误 - Stream Player

> ID：14055579
> 
> 赞同：4
> 
> 时间：2012-12-27T13:34:51.013
> 
> 标签：jquery-plugins, jplayer

很抱歉问这个问题，因为它可能会在互联网上被问到几次，但没有一个建议的解决方案在我的网站上有效。

我正在尝试用广播流广告一个 jPlayer（作为大学项目的一部分）。

我将 jPlayer 的 JavaScript - jQuery 部分包含在一个名为 functions.js 的文件中：

```
// Reproductor de audio

$(document).ready(function(){

var stream = {
    title: "Postaway Radio",
    mp3: "http://listen.radionomy.com/1-PostawayRadio"
},
ready = false;

$("#jquery_jplayer_1").jPlayer({
    ready: function (event) {

        ready = true;
        $(this).jPlayer("setMedia", stream);
    },
    pause: function() {
        $(this).jPlayer("clearMedia");
    },
    error: function(event) {
        if(ready && event.jPlayer.error.type === $.jPlayer.error.URL_NOT_SET) {
            $(this).jPlayer("setMedia", stream).jPlayer("play");
        }
    },
    swfPath: "js",
    supplied: "mp3",
    preload: "none",
        wmode: "window"
});

}); 
```

这是文本的 HTML 部分：

```
 <div id="jquery_jplayer_1" class="jp-jplayer"></div>

        <div id="jp_container_1" class="jp-audio-stream">
            <div class="jp-type-single">
                <div class="jp-gui jp-interface">
                    <ul class="jp-controls">
                        <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                        <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                        <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                        <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                        <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                    </ul>
                    <div class="jp-volume-bar">
                        <div class="jp-volume-bar-value"></div>
                    </div>
                </div>
                <div class="jp-title">
                    <ul>
                        <li>Postaway Radio</li>
                    </ul>
                </div>
                <div class="jp-no-solution">
                    <span>Update Required</span>
                    To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                </div>
            </div>
        </div> 
```

我试着玩它，它根本不起作用。我在 FireZilla 中收到此错误：

```
 TypeError: $("#jquery_jplayer_1").jPlayer is not a function 
```

Chrome 控制台抛出此错误：

```
Uncaught TypeError: Object [object Object] has no method 'jPlayer' 
(anonymous function) functions.js:11
l jquery-1.8.3.min.js:2
c.fireWith jquery-1.8.3.min.js:2
v.extend.ready jquery-1.8.3.min.js:2
A 
```

并将此行指示为问题：

```
`enter code here`$("#jquery_jplayer_1").jPlayer({ 
```

另一个是 jQuery。

但我无法找到问题所在。

我下载了一个 jPlayer 演示，代码很相似 - 和我的一样，但它在那里工作，而不是在我的网页中。还查看了开发人员（jPlayer）并没有找到解决方案。

Could anyone help me please?

Thanks for your help

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:39:57.477

You probably didn't include jplayer library. Check demo again and see did you load jplayer js file properly. And check console in Google Chrome.

And which browser do you use. If the browser doesn't support html5, it will load flash player, but maybe the address for swf file is not good. That's set in this parameter swfPath: "js"

Try with this:

```
$player = $("#jquery_jplayer_1")
jPlayer_method = $player.jPlayer
$player.jPlayer({
    ready: function () {
           jPlayer_method.call( $player, "setMedia", {
                                       [...same as before...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-01T19:43:42.273

If somehow you are still using it in or after 2018 like me, make sure jquery library is loaded first then jplayer.min.js file.

# iphone - NSDictionary 解析后返回空值

> ID：14055585
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:35:44.010
> 
> 标签：iphone, objective-c, ios, xcode, xml-parsing

我正在为我的应用程序做 XMLParsing。为了得到字典中的解析值，我使用了`XMLReader.h`文件`XMLReader.m`。它适用于所有 Web 服务，但返回`null`. 它以 XML 格式给了我正确的响应。

这是我在字典中获取值的代码

```
-(void)parser:(NSXMLParser *) parser foundCharacters:(NSString *)string
{

    if(elementFound)
    {
        [soapResults appendString:string];
        NSLog(@"soap result of hotel  is %@",soapResults);
        NSError *parseError = nil;
        NSDictionary *xmlDixtionary =  [XMLReader dictionaryForXMLString:soapResults error:&parseError];

        NSLog(@"dictionary is  is %@",xmlDixtionary);
    }

} 
```

但是日志给了我一个`null`值，我应该怎么做才能得到字典中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:01:47.080

soapResults 不是您要搜索的完整字符串，您只需将一段字符串附加到它。您需要继续附加字符并仅在元素末尾创建字典。

实现这个方法：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:05:38.903

我为你找到了一些东西：[XML Parsing - NSXMLParserErrorDomain 错误 5](https://stackoverflow.com/questions/5486116/xml-parsing-nsxmlparsererrordomain-error-5)

它显示了编码问题的可能性。

另一个链接：[[iPhone] 无法解析简单的 XML](https://discussions.apple.com/thread/1924078?start=0&tstart=0)

希望它对你有用。

# java - Solr StandardTokenizerFactory tokinize on dots filter

> ID：14055588
> 
> 赞同：0
> 
> 时间：2012-12-27T13:35:59.090
> 
> 标签：java, apache, solr, solrj

I wan't to search for certain numbers in my index but I'm having trouble with certain results. (I'm using edismax.)

Example:

```
 Term in index  I want to search: b1.123.456
    Query I use is b1 123 456 (no spaces) 
```

This doesn't work because a . is not the same as a - (I've read the documentation) I looked for a solution and found that I have to use a Filter on my field:

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <charFilter  class="solr.MappingCharFilterFactory" mapping="mapchar.txt" />
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <charFilter  class="solr.MappingCharFilterFactory" mapping="mapchar.txt" />
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

This is my fieldtype, the mapchar contains "."=>" "

Now when I try to search:

```
 b1.123.456   returns all results for each token (normal behaviour)
    "b1.123.456" returns what I'm looking for.
    "b1 123 456" returns what I'm looking for.
     b1 123 456  **returns nothing** 
```

**Why does a normal edismax query without phrase search return 0 results?**

Edit:

I've found an error in the logs when I use the last query:

```
<record>
  <date>2012</date>
  <millis></millis>
  <sequence></sequence>
  <logger>org.apache.solr.servlet.SolrDispatchFilter</logger>
  <level>SEVERE</level>
  <class>org.apache.solr.common.SolrException</class>
  <method>log</method>
  <thread>12</thread>
  <message>null:java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at org.apache.solr.util.SolrPluginUtils.calculateMinShouldMatch(SolrPluginUtils.java:563)
    at org.apache.solr.util.SolrPluginUtils.setMinShouldMatch(SolrPluginUtils.java:518)
    at org.apache.solr.search.ExtendedDismaxQParser.parse(ExtendedDismaxQParserPlugin.java:264)
    at org.apache.solr.search.QParser.getQuery(QParser.java:143)
    at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:118)
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:185)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1699)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)
    at ...
</message>
</record> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:23:10.300

由于默认查询处理程序有效（/select），我开始认为我的查询处理程序有问题。

为了找出问题所在，我开始稍微禁用我自己的请求处理程序的一部分。

```
 <!--<str name="mm"></str>--> 
```

一个**空的mm**会给你**错误**！

我曾经有一个 mm 参数，但我真的不再需要它了，所以我把它留空了......

# knockout.js - how to access property in a observable

> ID：14055594
> 
> 赞同：1
> 
> 时间：2012-12-27T13:36:38.987
> 
> 标签：knockout.js

I want to access the property in 'selectedCeremonyToUpdate()' observable whose property name is in 'name'. If 'name' contains 'City' then i want

```
self.edit = function (data, event, name) {
alert("In " + self.selectedCeremonyToUpdate().City());
} 
```

how to do this..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:08:25.290

您可以使用数组语义按名称访问对象属性。尝试这个：

```
self.selectedCeremonyToUpdate()[name]() 
```

# c# - References the Visual Studio Project

> ID：14055597
> 
> 赞同：0
> 
> 时间：2012-12-27T13:37:13.370
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, visual-studio-2008

i'm making a project in visual studio and there are references in my project such as **Microsoft.Office.Interop.Excel** .. etc

I set CopyLocal of **Microsoft.Office.Interop.Excel** to *False*

and the directory of **Microsoft.Office.Interop.Excel** is *C:\Program Files\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office12\Microsoft.Office.Interop.Excel.dll*

after i build my application then i install it on another computer,

you know, in another computer there are no files like Microsoft.Office.Interop.Excel.dll or the like in ***"C:\Program Files\Microsoft Visual Studio 9.0\"*** to be used for my application. but strangely, my application is work fine.

**Why Did This Happen?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:44:17.443

Primary Office Assemblies which includes Microsoft.Office.Interop.Excel are installed with Office, therefore you can use it without Visual Studio.

[http://msdn.microsoft.com/en-us/library/kh3965hw(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/kh3965hw(v=vs.100).aspx)

# java - Why we need apache common logging jars to install spring framework in eclipse

> ID：14055602
> 
> 赞同：6
> 
> 时间：2012-12-27T13:37:40.967
> 
> 标签：java, spring, eclipse, apache, spring-mvc

I was reading some of the tutorials and some of them are adding apache common logging jars in order to use/install spring framework instead. I have no knowledge about apache common logging.Is it necessary to install apache common logging if I want to work/learn with/from spring/springMVC.What is exactly is apache common logging? What is the most preferable way to install spring in eclipse.

Thanks

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T13:43:36.313

Commons Logging 是 Spring 用来记录自己的数据的日志框架：

[http://blog.springsource.org/2009/12/04/logging-dependencies-in-spring/](http://blog.springsource.org/2009/12/04/logging-dependencies-in-spring/)

Spring 与任何其他产品一样是一种产品，因此它自己进行日志记录。它使用 Commons Logging 作为 API 来执行日志记录。

为了学习 Spring，您不需要完全了解 Commons Logging；但是您需要安装 Commons Logging 才能使 Spring Framework 正常工作。

您不会“在 Eclipse 中安装 Spring”。Eclipse 是一个 IDE。您只需下载 Spring 并通过编辑项目的构建路径（右键单击项目并选择“属性”）使其可用于您的 Eclipse 项目。

（使 Spring 可用于 JavaEE 应用程序涉及更多。有关它的信息可在简单的 Google 搜索中轻松获得）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-02T19:36:15.803

是的，有必要在 spring 项目中包含 commons-logging 依赖项。日志记录是 Spring 的一个非常重要的依赖项，因为

> a) 它是唯一强制性的外部依赖
> b) 每个人都喜欢看到他们正在使用的工具的一些输出
> c) Spring 与许多其他工具集成，所有这些工具也都选择了日志依赖。

应用程序开发人员的目标之一通常是在一个中心位置为整个应用程序（包括所有外部组件）配置统一的日志记录。
在几乎所有企业或 webapp 项目中，都需要记录与错误、调试、信息（其他重要信息/事件）相关的所有信息以存储在某处。**在实际应用程序中，开发人员稍后会使用这些日志来找出代码中的错误。**因此日志记录很重要。

我们可以在构建项目时将这个依赖包含在 pom.xml 中，如下所示（使用 maven 时），或者我们可以下载 commons-logging jar。

```
<dependencies>
 <dependency>
 <groupId>org.springframework</groupId>
 <artifactId>spring-webmvc</artifactId>
 <version>${spring.version}</version>
 <exclusions>
 <exclusion>
 <artifactId>commons-logging</artifactId>
 <groupId>commons-logging</groupId>
 </exclusion>
 </exclusions>
 </dependency>
 </dependencies> 
```

下载 jar/依赖项后，我们需要在 src 文件夹中创建**commons-logging.properties**。

```
org.apache.commons.logging.Log = org.apache.commons.logging.impl.Log4JLogger 
```

Logger 类可以是以下任何一个：
1)org.apache.commons.logging.impl.Log4JLogger
2)org.apache.commons.logging.impl.Jdk14Logger
3)org.apache.commons.logging.impl.SimpleLog

我们需要将**log4j.properties**添加到 src 文件夹。

```
log4j.rootLogger=DEBUG, file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=D:\\logger.log
log4j.appender.file.MaxFileSize=5MB
log4j.appender.file.MaxBackupIndex=10
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

现在，配置了两个库后，我们可以在类中使用它们：

```
 import org.apache.commons.logging.Log;
    import org.apache.commons.logging.LogFactory;
    public class HowToLog
    {
         private static Log logger = LogFactory.getLog(HowToLog.class);
          public static void main(String[] args){
                logger.info("Log info");
               logger.debug("Debug info");

     }
   } 
```

记录器日志：

```
2015-01-30 22:12:20 INFO  HowToLog:14 - Log info
2015-01-30 22:12:20 DEBUG HowToLog:15 - Debug info 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T13:42:35.587

Apache Common Logging 用于记录 spring 系统的状态。没有这个库，spring 框架就无法正常工作。

在我的电脑中，我使用 myeclipse 代替它可以帮助你添加弹簧功能。

最好的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T16:44:04.780

Apache Commons Logging (JCL) 提供了一个 Log 接口，它既是轻量级的，又是其他日志工具包的独立抽象。它为中间件/工具开发人员提供了一个简单的日志抽象，允许用户（应用程序开发人员）插入特定的日志实现。

JCL 为其他日志工具提供瘦包装日志实现，包括 Log4J、Avalon LogKit（Avalon 框架的日志基础设施）、JDK 1.4，以及用于 1.4 之前的系统的 JDK 1.4 日志 API (JSR-47) 的实现。该接口紧密映射到 Log4J 和 LogKit。

# php - php domdocument createelement method automatically changing special characters

> ID：14055604
> 
> 赞同：1
> 
> 时间：2012-12-27T13:37:55.803
> 
> 标签：php, createelement

I'm creating an XML according to a user input. suppose the user entered one of the XML special characters, i want to replace it to it's XML representation. Now, suppose:

```
$value = 'bla"bla'; 
```

And this is my code:

```
$value = str_replace(array("&", "<", ">", "\"", "'"), array("&amp;", "&lt;", "&gt;", "&quot;", "&apos;"), $value);
//at this point the value of $value is 'bla&quot;bla'
$attrRoot = $doc->createElement($key, $value);
//at this point the value of $attrRoot->nodeValue is 'bla"bla' again. 
```

I want the value to appear inside my XML like the value of $value. any suggestions?

# java - Processing applet in browser, 'init failed unsupported os'

> ID：14055608
> 
> 赞同：0
> 
> 时间：2012-12-27T13:38:11.453
> 
> 标签：java, macos, opengl, applet, jogl

I'm getting familiar with processing and I currently have a working environment set up with eclipse and eclipsep5exporter.

I successfully run my projects and export them to native applications, however, exporting applets that run in the browser has proven to be a real pickle.

Currently I have a Java applet in the browser that gives me the error:

```
error init failed unsupported os arch mac os x x86 64 
```

I've searched the internet and found hints about `JOGLAppletLauncher` being the villain when it comes to this issue. However I'd love to hear from someone else before I look into it further.

Also if anyone can get it to run on a different system than mine, please let me know.

[http://augustbjornberg.com/dir/workspace/applet/index.html](http://augustbjornberg.com/dir/workspace/applet/index.html)

# api - Get my current playlist with REST API in Spotify

> ID：14055609
> 
> 赞同：0
> 
> 时间：2012-12-27T13:38:13.323
> 
> 标签：api, spotify

There is any way to get a user playlist via the REST API?

I search about it, but REST API is really squishy.

My idea is really simple. I just want to get all my playlists from spotify and share that ones I want to in my website

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:50:30.880

In short: No.

In medium: No, but you can use the [Spotify Play Button](https://developer.spotify.com/technologies/spotify-play-button/) to embed a playlist into your website instead. You need to manually make one for each playlist, but once created the embedded widget will automatically stay in sync with the playlist.

A long: If you write it yourself, yes. You'd need to write a libspotify wrapper on the server-side that exposes a REST API for your website to consume. It's not for the faint of heart, though.

# android - Curious about Camera Width and height in andEngine

> ID：14055610
> 
> 赞同：1
> 
> 时间：2012-12-27T13:38:18.003
> 
> 标签：android, andengine

I looked at many examples of andEngine Gles2.0 All of them take these :

```
private static final int CAMERA_WIDTH = 720;
private static final int CAMERA_HEIGHT = 480; 
```

Why is this value fixed? Why can't I do this:

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
int honeyComb = android.os.Build.VERSION_CODES.HONEYCOMB_MR2;

Display display = getWindowManager().getDefaultDisplay();
if (currentapiVersion >= honeyComb) {
    Point size = new Point();
    display.getSize(size);
    CAMERA_WIDTH = size.x;
    CAMERA_HEIGHT = size.y;
} else {
    CAMERA_WIDTH = display.getWidth();
    CAMERA_HEIGHT = display.getHeight();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:44:35.517

如果你愿意，你可以这样做。我认为关键是定义一个固定大小，如 480x800，并将您的游戏/应用程序写入该大小，以确保一切看起来都在该分辨率下。然后使用 RatioResolutionPolicy 并让 AndEngine 处理缩放以适应其他屏幕尺寸。有关此问题的更多想法，请参阅我对这个问题的回答

[不同屏幕尺寸Andengine Android上的精灵尺寸](https://stackoverflow.com/questions/11399045/sprite-size-on-different-screen-size-andengine-android/11412294#11412294)

# c# - .NET Math.Round( , ,MidpointRounding.AwayFromZero) not working correctly

> ID：14055611
> 
> 赞同：6
> 
> 时间：2012-12-27T13:38:23.883
> 
> 标签：c#

I am using Visual Studio Professional 2012. I created a new C# ConsoleApplication, targeting .NET Framework 4.5, with following code:

```
 static void Main(string[] args)
    {
        double x = 2.44445;
        double y = Math.Round(x, 4, MidpointRounding.AwayFromZero);
        Console.WriteLine(y);
        Console.ReadKey();
    } 
```

The expected result should be 2.4445, but it actually returns 2.4444. //Same result with previous framework version, and I tried VCE2010.

I know such problem usually results from the way double data type is stored (i.e. finite decimals converted to infinite binary fraction). But I didn't expect this to happen with only 5 decimal digits like 2.44445

I'm worrying if such thing could happen with even shorter decimals. I would also like to learn a safer way to round (using away from zero convention) in C#. Thanks.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T13:45:09.787

这确实是由于浮点数的脆弱精度。0.5 可以完美地存储在 IEEE 浮点中，但 0.45、0.445 等不能。例如，当您指定 2.44445 时存储的实际值是 11009049289107177/4503599627370496，即 2.44449999999999989519494647... 现在应该很明显为什么该数字按原样四舍五入了。

如果您需要精确存储小数，请考虑改用该`decimal`类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T13:46:59.710

[来自 msdn 的注释](http://msdn.microsoft.com/en-us/library/f5898377.aspx)：

> 由于将十进制值表示为浮点数或对浮点值执行算术运算可能导致精度损失，因此在某些情况下，Round(Double, Int32, MidpointRounding) 方法可能不会按照指定的方式舍入中点值通过模式参数。这在以下示例中进行了说明，其中 2.135 舍入为 2.13 而不是 2.14。发生这种情况是因为该方法在内部将值乘以 10 位，并且**这种情况下的乘法运算会损失精度**。

这就是 Round 的实现方式：

```
double num = roundPower10Double[digits];
value *= num;
if (mode == MidpointRounding.AwayFromZero)
{
    double num2 = SplitFractionDouble(&value);
    if (Abs(num2) >= 0.5)
    {
        value += Sign(num2);
    }
} 
```

如您所见，value 乘以 num，它是来自的值

```
roundPower10Double = new double[] { 1.0, 10.0, 100.0, 1000.0, 10000.0, 
      100000.0, 1000000.0, 10000000.0, 100000000.0, 1000000000.0, 10000000000,  
      100000000000, 1000000000000, 10000000000000, 100000000000000, 1E+15 }; 
```

所以，实际上你有`2.44445 * 10000.0 - 24444,0`which 给`0,499999999996362`. 小于`0.5`。这样你就有了`2.4444`。

# asp.net-mvc - 部分视图操作？

> ID：14055613
> 
> 赞同：2
> 
> 时间：2012-12-27T13:38:50.437
> 
> 标签：asp.net-mvc, layout, action, partial-views

> **可能重复：**
> [部分视图的 ASP.NET MVC 3 控制器操作](https://stackoverflow.com/questions/7274831/asp-net-mvc-3-controller-action-for-partial-view)

我有一个包含部分视图的页面。

这个局部视图有一个自定义模型，我考虑用常规的动作+视图调用来替换它，`Html.RenderAction`这样我就可以分别控制它的模型检索、样式和脚本。

问题是我想从该视图中排除外部布局页面。是否可以？这有效率吗？有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:41:29.670

我想我在[这里](https://stackoverflow.com/a/7276944/75500)找到了答案。

简而言之，应该返回而不是返回`View`那个动作。`PartialView`

# c# - Custom config section key

> ID：14055621
> 
> 赞同：1
> 
> 时间：2012-12-27T13:39:33.583
> 
> 标签：c#, web-config, app-config

I have implemented custom config section like this

```
 <directorySettings>
   <domainConfigurationList>
     <domainConfiguration id="1" name="name1" url="http://www.google.com"/>
     <domainConfiguration id="2" name="name2" url="http://www.bing.com"/>
   </domainConfigurationList>
 </directorySettings> 
```

I can set only one field as key:

```
 protected override object GetElementKey(ConfigurationElement element)
    {
        return ((DirectorySettingsConfigurationElement)element).Name;
    } 
```

but I also need to have possibility to search using not only by key 'name' but also by field 'id'. Here is part of my `DirectorySettingsConfigurationElementCollection`:

```
 public DirectorySettingsConfigurationElement Get(string name)
    {
        return (DirectorySettingsConfigurationElement)BaseGet(name);
    }

    public DirectorySettingsConfigurationElement GetById(int id)
    {
        // ???
        return null;
    } 
```

What is the best way to get my `DirectorySettingsConfigurationElement` by custom field (not by key)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:17:59.963

可能有更直接的答案；但我通常看到的方法是使用`ConfigurationElementCollection`（[http://msdn.microsoft.com/en-us/library/system.configuration.configurationelementcollection.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelementcollection.aspx)）

您将获得 domainConfigurations 的集合，并且您可以遍历它或使用 LINQ 查询来获取匹配值。

# android - 在我的列表视图中使用加载指示设置适配器

> ID：14055626
> 
> 赞同：1
> 
> 时间：2012-12-27T13:40:07.903
> 
> 标签：android, listview, loading

下面是我的代码，我从 doinbackground() 中的 web 服务（远程服务器）获取数据。我想在 UI 上设置数据。一切正常。但是由于我要从服务器检索大量数据，所以进度条显示了很长时间。所以，我决定使用类似 CW 无尽适配器或根据[this](https://stackoverflow.com/questions/1080811/android-endless-list)的东西。这几天一直让我很伤心。

1) **CW 无限适配器：**我在将它作为库项目包含时遇到了很多问题，当我尝试运行演示时，它总是向我显示**！**红色的符号。当我单击运行时，它说您的项目有错误，但甚至没有一个线索该错误发生在哪里。即使我也无法理解必须做的事情，因为这些对于我作为初学者来说有些困难。所以，我决定按照其他人。

2）**在[此](https://stackoverflow.com/questions/1080811/android-endless-list)，**我无法了解如何在我的场景中使用它，因为我在完成`doInBackground()`.

有人可以通过相关的代码片段帮助我吗？我会非常感谢你的帮助。

我在`onCreate()`方法中调用这个异步任务。

```
class LoadAllData extends AsyncTask<String, String, String> {
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(GetData.this);
        pDialog.setMessage("Loading Data. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All Data from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("datatobefetched", datadetails));
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_ads, "POST", params);
        Log.d("All Products: ", json.toString());
        try {
            // Checking for SUCCESS TAG
            int check = json.getInt(CHECK);
            if (Check == 1) {
                // Data found
                // Getting Array of Data
                dataJsonArray = json.getJSONArray("totaldata");
                // looping through All data
                for (int i = 0; i < dataJsonArray.length(); i++) {
                    JSONObject jobj = dataJsonArray.getJSONObject(i);
                    // Storing each json item in variable
                    String id = jobj.getString("rowid");
                    String product = jobj.getString("data1");
                    String review = c.getString("data2");
                    String imagepath = c.getString("image_url");

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    // adding each child node to HashMap key => value
                    map.put("id", id);
                    map.put("product", product);
                    map.put("review", review);
                    map.put("imageurl", imagepath);     
                    // adding map to ArrayList
                    productsList.add(map); // ProductList is arrayList.
                }
            }
            else {
                // no data found
            }
        } 
        catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * After completing background task Dismissing the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Updating parsed JSON data into ListView
                // Getting adapter by passing xml data ArrayList
                ListView list = (ListView)findViewById(R.id.list);   
                adapter = new CustomListAdapter(GetAllAds.this, productsList, passedcategory);        
                list.setAdapter(adapter);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:52:16.467

使用您发布的代码似乎没有任何需要花费大量时间的东西。

我不相信制作一个无限列表（使用无限适配器或手动）适合您，因为显然您正在与之通信的网络服务器没有页面选项（例如，当您在特定项目的 URL 上时）每页和页码是这样`?per_page=20&page_no=1`的：），而那些类型的列表只对这样有意义。

就像一个简单的测试一样，将这些行放在代码之后：

```
long now = System.currentTimeMillis();
JSONObject json = jParser.makeHttpRequest(url_all_ads, "POST", params);
Log.d("Test", "Elapsed time is: " + Long.toString(System.currentTimeMillis() - now)); 
```

然后您可以检查您的 LogCat 发出 http 请求需要多长时间。

**编辑：**

建议替代 HashMap<> 因为我不认为它们是存储数据的非常有效的方法。

```
public class MyData(){
    JSONObject data;
    public MyData(JSONObject data){ this.data=data; }
    public String getId(){ return data.getString("rowid"); }
    // repeat for the other info you need, also override the toString to return the data.toString();
} 
```

这样，所有 JSON 解析将在稍后的时间点以小批量完成，并且您的 for 循环将非常简单：

```
 for (int i = 0; i < dataJsonArray.length(); i++) {
     productList.add(new MyData(dataJsonArray.getJSONObject(i));
 } 
```

# c# - 在 asp.net mobile 中使用 facebook 按钮实现登录

> ID：14055627
> 
> 赞同：1
> 
> 时间：2012-12-27T13:40:20.887
> 
> 标签：c#, asp.net-mvc, mobile

我遗漏了一些非常明显的东西。我已经从[asp.net](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)实现了使用 Facebook 登录教程，然后我创建了一个移动 MVC 4 网站。

我创建了一个 AuthConfig，它调用：

```
OAuthWebSecurity.RegisterFacebookClient(
    appId: "...",
    appSecret: "..."); 
```

然后，在 Views/Home/Login.cshtml 中，我创建了一个按钮

```
 <li>@Html.ActionLink("Log in with Facebook", "FacebookLogin")</li> 
```

最后，在 /Controllers/HomeController.cs 我添加了：

```
 public ActionResult FacebookLogin()
    {
        return new FacebookLoginResult(this.Url.Action("ExternalLoginCallback"));
    }

    [AllowAnonymous]
    public ActionResult ExternalLoginCallback(string returnUrl)
    {
        AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
        if (!result.IsSuccessful)
        {
     ... 
```

（为了完整起见，FacebookLogin result 是一个继承自 ActionResult 并调用

```
 OAuthWebSecurity.RequestAuthentication("facebook", "/Home/ExternalLoginCallback"); 
```

在 ExecuteResult() 覆盖中。当我单步执行它时，我看到按钮被按下，我看到 ExecuteResult() 被调用，但它从未到达 ExternalLoginCallback()。整个过程只是出错了。我可能遗漏了一些非常简单且非常明显的东西，但除此之外，我怎样才能启用更多扩展日志记录以查看它在哪里发生故障？我将 IIS Express 用于有效的 MVC 站点和无效的 MVC 移动站点。

谢谢！

# cloud-foundry - CF 是否为 SSO 应用程序提供任何支持？

> ID：14055629
> 
> 赞同：1
> 
> 时间：2012-12-27T13:40:28.063
> 
> 标签：cloud-foundry

只是想了解 CF 是否为 SSO 应用程序提供任何支持？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:17:15.770

UAA 支持的用例之一是 SSO。来自[CF.org 博客](http://blog.cloudfoundry.org/2012/07/24/high-level-features-of-the-uaa/)：

由于是集中式的，UAA 可以为 Cloud Foundry 平台中的应用程序提供单点登录 (SSO) 服务。cloudfoundry.com 平台有几个 UI 组件，它们需要安全的地方委托给 UAA 进行身份验证。示例是支持站点和 Micro Cloud Foundry 站点。（核心 Cloud Foundry 开源平台中没有其他具有 UI 的组件，因此在您将平台扩展到核心用例之外之前，没有必要拥有 SSO 功能。）

需要 SSO 的 UI 组件使用 UAA 中的 /userinfo 端点，它只是一个常规的 OAuth2 保护资源（UAA 充当资源服务器的一个示例）。

# mysql - 如何在mysql中将列中的前3个字段显示为水平行？

> ID：14055632
> 
> 赞同：1
> 
> 时间：2012-12-27T13:40:52.510
> 
> 标签：mysql, sql, select, group-concat

我在 MySQL 中有下表，

```
+-------------+-----------+-----------+----------+-----------+------------------+-------------+--------+
| ServiceCode | ser_count | FirstName | LastName | PatientID | HealthCardNumber | DateOfBirth | Gender |
+-------------+-----------+-----------+----------+-----------+------------------+-------------+--------+
| AAAA        |         1 | krishna   | Mangeter |         1 | ABC123           | 1982-02-02  | M      |
| BBBB        |         4 | Pinthna   | Paratter |         2 | KBC123           | 1981-02-02  | M      |
| IIII        |         2 | Pinthna   | Paratter |         2 | KBC123           | 1981-02-02  | M      |
| AAAA        |         1 | Pinthna   | Paratter |         2 | KBC123           | 1981-02-02  | M      |
| CCCC        |         1 | Pinthna   | Paratter |         2 | KBC123           | 1981-02-02  | M      |
| BBBB        |         3 | Pelahna   | Kumatter |         3 | SDF123           | 1984-02-02  | M      |
| AAAA        |         2 | Pelahna   | Kumatter |         3 | SDF123           | 1984-02-02  | M      |
| AAAA        |         1 | Pelahna   | Kumatter |         3 | SDF123           | 1984-02-02  | M      |
| BBBB        |         2 | Pelahna   | Kumatter |         3 | SDF123           | 1984-02-02  | M      |
| BBBB        |         2 | Pelahna   | Kumatter |         3 | SDF123           | 1984-02-02  | M      |
| GGGG        |         1 | Manshna   | Bituater |        14 | MKO123           | 1982-02-02  | M      |
| FFFF        |         1 | Manshna   | Bituater |        14 | MKO123           | 1982-02-02  | M      |
| IIII        |         3 | Manshna   | Bituater |        14 | MKO123           | 1982-02-02  | M      |
| GGGG        |         1 | Bahshna   | Vitueter |        15 | ZXS123           | 1982-02-02  | F      |
| IIII        |         1 | Krishhn   | Ishqeter |        16 | VGT123           | 1987-02-02  | M      |
+-------------+-----------+-----------+----------+-----------+------------------+-------------+--------+ 
```

我想要上表中的前三名`ser_count`&`ServiceCode`并且`PatientID`想要水平显示它们，如下所示。我尝试在 MySQL 提示符下使用存储过程，但它失败了。另外我不知道存储过程在 iReport/jasperserver 中是否有效。

```
+-------------+-----------+-----------+----------+-----------+------------------+-------------+--------+------------------------+
| ServiceCode | ser_count | FirstName | LastName | PatientID | HealthCardNumber | DateOfBirth | Gender |Description             |
+-------------+-----------+-----------+----------+-----------+------------------+-------------+--------+------------------------+
| AAAA        |         1 | krishna   | Mangeter |         1 | ABC123           | 1982-02-02  | M      |(1)AAAA                 |
| BBBB        |         4 | Pinthna   | Paratter |         2 | KBC123           | 1981-02-02  | M      |(4)BBBB (2)IIII (1)AAAA |
| BBBB        |         3 | Pelahna   | Kumatter |         3 | SDF123           | 1984-02-02  | M      |(3)BBBB (2)AAAA (2)BBBB |
| GGGG        |         1 | Manshna   | Bituater |        14 | MKO123           | 1982-02-02  | M      |(3)IIII (1)FFFF (1)GGGG |
| GGGG        |         1 | Bahshna   | Vitueter |        15 | ZXS123           | 1982-02-02  | F      |(2)GGGG                 |
| IIII        |         1 | Krishhn   | Ishqeter |        16 | VGT123           | 1987-02-02  | M      |(1)IIII                 |
+-------------+-----------+-----------+----------+-----------+------------------+-------------+--------+------------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:57:05.533

试试这个

```
 select * FROM your_table GROUP BY PatientID order by PatientID 
```

看[**DEMO SQLFIDDLE**](http://sqlfiddle.com/#!2/80391/1)

编辑。

如果他想要前 3 名，那么只需添加`limit`子句

```
 select * FROM Table1 GROUP BY PatientID order by PatientID  limit 3 
```

[**这里演示**](http://sqlfiddle.com/#!2/80391/25)

**编辑 3**

如果您想为每个 PatientID 获得 3 个结果，那么就可以了

```
 SELECT ServiceCode, ser_count, FirstName,LastName,PatientID,HealthCardNumber,DateOfBirth,Gender
     FROM  (select ServiceCode, ser_count, FirstName,LastName,PatientID,HealthCardNumber,DateOfBirth,Gender,
           @num := if(@group = PatientID, @num + 1, 1) as row_number,
           @group := PatientID as dude
    FROM   Table1
    ORDER BY PatientID, ServiceCode) as ord
    WHERE  row_number <= 3 
```

在此处查看[**演示**](http://sqlfiddle.com/#!2/80391/32)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:58:21.443

试试这个：

```
SELECT ServiceCode, ser_count, FirstName, LastName, PatientID, 
       HealthCardNumber, DateOfBirth, Gender, 
       GROUP_CONCAT(IF(auto <= 3, code, '') ORDER BY ser_count DESC, servicecode SEPARATOR ' ') Description 
FROM (SELECT *, CONCAT('(', ser_count, ')', servicecode) code, 
             IF(@value=(@value:=PatientID), @auto:=@auto+1, @auto:=1) auto
      FROM table1, (SELECT @auto:=1, @value:=0 ) A
      ORDER BY PatientID, ser_count DESC, servicecode) as A 
GROUP BY PatientID; 
```

# javascript - 使用 jquery.event.drag 拖动多个元素

> ID：14055639
> 
> 赞同：4
> 
> 时间：2012-12-27T13:41:27.327
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, drag-and-drop

我想用 jQuery 插件[jquery.event.drag拖动多个元素](http://threedubmedia.com/code/event/drag)

这是[原始演示的小提琴](http://jsfiddle.net/Vinyl/8JP72/1/)：

这是[原始演示](http://threedubmedia.com/code/event/drag/demo/multi)的链接：

在演示中，用户单击他想要选择的方块并拖动它们。

但我想做一些最简单的事情：只需单击方块“1”并移动所有方块。

我尝试了不同的东西，结果并不好，请看这个小提琴：

[http://jsfiddle.net/Vinyl/gVFCL/2/](http://jsfiddle.net/Vinyl/gVFCL/2/)

你能帮我解决这个问题吗？

HTML 代码：

```
<div class="drag" style="left:20px;"></div>
<div class="drag" style="left:100px;"></div>
<div class="drag" style="left:180px;"></div> 
```

CSS 代码

```
.drag {
    position: absolute;
    border: 1px solid #89B;
    background: #BCE;
    height: 58px;
    width: 58px;
    cursor: move;
    top: 120px;
}
.selected {
    background-color: #ECB;
    border-color: #B98;
    } 
```

jQuery

```
jQuery(function($){
    $('.drag')
        .click(function(){
            $( this ).toggleClass("selected");
        })
        .drag("init",function(){
            if ( $( this ).is('.selected') )
                return $('.selected');
        })
        .drag(function( ev, dd ){
            $( this ).css({
                top: dd.offsetY,
                left: dd.offsetX
            });
        });
}); 
```

编辑 Rajagopal 的答案中给出的链接是可以的。我还发现这个插件 MultiDraggable 非常易于使用：[https ://github.com/someshwara/MultiDraggable](https://github.com/someshwara/MultiDraggable)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:53:07.360

```
jQuery(function($) {

    $('.drag').drag("init", function() {
        if ($(this).is('#test')){
            return $('.selected');
        }
    }).drag(function(ev, dd) {
        $( this ).css({
                top: dd.offsetY,
                left: dd.offsetX
            });
    });
}); 
```

演示[http://jsfiddle.net/gVFCL/3/](http://jsfiddle.net/gVFCL/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:36:32.240

你必须做这样的事情，

```
$('.drag').drag("init", function(ev, dd) {
    if (this.id == "test") {
        return $(".drag").addClass("selected");
    }
}).drag(function(ev, dd) {
    if (ev.target.id == "test") {
        $(this).css({
            top: dd.offsetY,
            left: dd.offsetX
        });
    }
});​ 
```

这是工作[示例](http://jsfiddle.net/ubEqb/)。希望，这个对你有帮助。

**编辑：**

对于这种情况，您可以简单地使用 jquery-ui 可拖动插件。看看这个[http://jqfaq.com/how-to-drag-the-multiple-elements-with-jquery-ui-draggable/](http://jqfaq.com/how-to-drag-the-multiple-elements-with-jquery-ui-draggable/)。霍普，这个可以帮助你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-02T16:57:25.380

我的代码升级多拖多选：

[http://jsfiddle.net/F4AwY/](http://jsfiddle.net/F4AwY/)

```
$('.drag').drag("init", function() {
  return $('.selected');
}).drag(function(ev, dd) {
    $( this ).css({
       top: dd.offsetY,
       left: dd.offsetX
    });
});

$('div[class*="drag"]').click(function(){
    $(this).toggleClass("selected");
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T13:56:30.197

在原来的jsfiddle改变

```
.click(function(){
        $(this).toggleClass("selected");
    }) 
```

到

```
.click(function(){
        $('.drag').toggleClass("selected");
    }) 
```

# java - 在 intellij idea 12 中，是否有任何设置可以过滤掉我不想在项目视图中列出的文件？

> ID：14055643
> 
> 赞同：17
> 
> 时间：2012-12-27T13:41:33.943
> 
> 标签：java, intellij-idea

一些文件或目录，如 *.iml、.idea、.settings、.gitignore 等。

是否有任何设置可以过滤掉这些文件。

非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-27T14:12:10.897

`File`| `Settings`| `File Types`| **忽略文件和文件夹**。 ![在此处输入图像描述](../Images/1775eb90b67f7eab83ce474ae655f394.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:45:22.393

`project structure > modules >`根据需要排除目录/文件

# mysql - 为什么我不能将它插入 MySQL？

> ID：14055644
> 
> 赞同：3
> 
> 时间：2012-12-27T13:41:45.627
> 
> 标签：mysql

我可能在查询语法上犯了一个愚蠢的错误，但我无法修复它。这是我的程序尝试执行的查询：

```
INSERT INTO filez (
  filename,
  uploadedby,
  dateuploaded,
  public,
  FileSize,
  FileTransferSize,
  key,
  bytes
)
VALUES(
  'tacct/tesABCscdsdasdasdD.testtest',
  'tacct',
  '%27 %December %2012, %7:%32:%15%AM',
  1,
  7,
  7,
  '`',
  'TestDoc'
) 
```

这是mysql_error：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key, bytes) VALUES('tacct/tesABCscdsdasdasdD.testtest', 'tacct', '%27 %D' 附近使用正确的语法

`mysql_real_escape_string()`除了查询中的 FileSize 和 FileTransferSize 之外，我做了所有事情。你能告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T13:43:07.737

该错误告诉您错误发生在 text `key`，并且非常正确：[`key`是 MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

在将其用作字段名称的地方，*必须*将其括在反引号 (`) 中；无论如何，这是一个很好的一般做法。

所以：

```
INSERT INTO `filez` (
  `filename`,
  `uploadedby`,
  `dateuploaded`,
  `public`,
  `FileSize`,
  `FileTransferSize`,
  `key`,
  `bytes`
)
VALUES(
  'tommy3244/tesABCscdsdasdasdD.testtest',
  'tommy3244',
  '%27 %December %2012, %7:%32:%15%AM',
  1,
  7,
  7,
  '`',
  'TestDoc'
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T13:44:21.567

尝试使用以下查询

```
INSERT INTO filez (filename, uploadedby, dateuploaded, public, FileSize, FileTransferSize, `key`, bytes) VALUES
('tommy3244/tesABCscdsdasdasdD.testtest', 'tommy3244', '%27 %December %2012, %7:%32:%15%AM', 
1, 7, 7, '`', 'TestDoc') 
```

`key`是关键字，所以你必须使用我上面使用的反引号。有关更多信息，请检查以下问题 [选择带有关键字名称的列](https://stackoverflow.com/questions/12400735/select-a-column-with-a-keyword-name)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T13:44:53.483

**key 是保留字**，如果不使用 backtics，就不能在列名中使用它。尝试这个

```
INSERT INTO filez (`filename`, `uploadedby`, `dateuploaded`, `public`, `FileSize`, `FileTransferSize`, `key`, `bytes`) VALUES('tommy3244/tesABCscdsdasdasdD.testtest', 'tommy3244', '%27 %December %2012, %7:%32:%15%AM', 1, 7, 7, '`', 'TestDoc') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-27T13:45:04.733

```
 INSERT INTO `filez` (`filename`, `uploadedby`, `dateuploaded`, 
                    `public`, `FileSize`, `FileTransferSize`, 
                     `key`, `bytes`) 
        VALUES('tommy3244/tesABCscdsdasdasdD.testtest',   'tommy3244', 
                '%27 %December %2012, %7:%32:%15%AM', 1, 7, 7, '`', 'TestDoc') 
```

好的，

`syntax to use near 'key, bytes)` 两者都是保留词，良好的做法是始终使用 ` 符号作为用户定义的标识符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T13:53:51.180

`KEY`是mysql的保留关键字

尝试其他列名或像那样做反引号

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T13:55:18.663

问题是 key 是 mysql 的保留关键字，你不能用它作为列名，如果你真的想用反引号把它括起来

`key`

# javascript - 启动 Firefox、使用特权 nsI* API 驱动第 3 方站点的最简单方法

> ID：14055646
> 
> 赞同：2
> 
> 时间：2012-12-27T13:41:53.243
> 
> 标签：javascript, firefox, xul, startup, mozrepl

启动 Firefox、加载第 3 方网站（我被**授权**“自动化”）并针对该网站运行一些“特权”API 的最简单方法是什么？（例如：nsIProgressListener、nsIWindowMediator 等）。

我尝试了两种方法：

1.  使用 XULrunner 创建一个选项卡式浏览器，“探测”第 3 方站点打开新窗口、遵循 302 重定向等所需的所有适当 API。这样做会产生大量代码，并且需要（afaict）用户安装应用程序，或使用 -app 运行 Firefox。它也非常脆弱。：-/

2.  启动 Firefox 传递第 3 方站点的 URL，MozRepl 已经在监听。然后在启动后不久，从“启动”脚本远程登录到 MozRepl，使用 mozIJSSubScriptLoader::loadSubScript 加载我的代码，然后在 3rd 方站点的上下文中从 MozRepl 执行我的代码 -*这是我目前正在做的方式它*。

使用第一种方法，我遇到了很多安全问题（显然）要解决，而且似乎我编写的浏览器“管道”代码比自动化代码多 10 倍。

使用第二种方法，我看到了很多“时间问题”，即：

*   MozRepl（或执行我提供的特权代码）以某种方式阻止了第 3 方站点的加载？？？，或
*   3rd 方站点加载，但 MozRepl 执行的代码没有看到它加载，或者
*   3rd 方站点加载，并且 MozRepl 还没有准备好接受请求（尽管页面中运行了其他 JavaScript，并且端口 4242 被 Firefox 进程绑定），
*   等等

我想也许做这样的事情：

以某种方式修改 MozRepl 源，以便在启动时从文件系统中可预测的位置加载特权 JavaScript（或与 Firefox 命令行参数交互）并在第 3 方网站的上下文中执行它。

...甚至编写另一个更专注于该任务的类似附加组件。

有更简单的想法吗？

* * *

**更新：**

经过大量的反复试验，回答了我自己的问题（如下）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:19:11.640

我发现最简单的方法是编写一个专门构建的 Firefox 扩展！

**第 1 步。**我不想做一堆不必要的 XUL/插件相关的东西；“Bootstrapped”（或重新启动）扩展只需要一个`install.rdf`文件来识别插件，以及一个`bootstrap.js`文件来实现引导接口。

*   引导扩展： [https ://developer.mozilla.org/en-US/docs/Extensions/Bootstrapped_extensions](https://developer.mozilla.org/en-US/docs/Extensions/Bootstrapped_extensions)

*   很好的例子：[http ://blog.fpmurphy.com/2011/02/firefox-4-restartless-add-ons.html](http://blog.fpmurphy.com/2011/02/firefox-4-restartless-add-ons.html)

bootstrap 接口可以非常简单地实现：

```
const path = '/PATH/TO/EXTERNAL/CODE.js';
const Cc = Components.classes;
const Ci = Components.interfaces;
const Cu = Components.utils;
var loaderSvc = Cc["@mozilla.org/moz/jssubscript-loader;1"];
                    .getService(Ci.mozIJSSubScriptLoader);

function install() {}
function uninstall() {}
function shutdown(data, reason) {}
function startup(data, reason) { loaderSvc.loadSubScript("file://"+path); } 
```

`install.rdf`您通过将和`bootstrap.js`放入新 zip 文件的顶层来编译扩展名，并将zip 文件扩展名重命名为`.xpi`.

**第 2 步。**为了有一个可重复的生产和测试环境，我发现最简单的方法是使用专用于自动化任务的配置文件启动 Firefox：

*   启动 Firefox 配置文件管理器：`firefox -ProfileManager`
*   创建一个新的配置文件，指定易于重复使用的*位置*（我称为 mine `testing-profile`），然后退出配置文件管理器。
*   从用户的 mozilla 配置中删除新的配置文件`profiles.ini`（这样它就不会干扰正常浏览）。
*   使用该配置文件启动 Firefox：`firefox -profile /path/to/testing-profile`
*   从文件系统（而不是 addons.mozilla.org）安装扩展。
*   执行准备配置文件所需的任何其他操作。（例如：我需要添加第 3 方证书并允许相关域的弹出窗口。）
*   保持单个`about:blank`选项卡处于打开状态，然后退出 Firefox。
*   快照配置文件：`tar cvf testing-profile-snapshot.tar /path/to/testing-profile`

从那时起，每次我运行自动化时，我都会解压`testing-profile-snapshot.tar`现有`testing-profile`文件夹并运行`firefox -profile /path/to/testing-profile about:blank`以使用“原始”配置文件。

**第 3 步。**所以现在当我启动 Firefox 时，它会在每次启动`testing-profile`时“包含”外部代码。`/PATH/TO/EXTERNAL/CODE.js`

**注意：**我发现我必须在上面的第**2**`/PATH/TO/EXTERNAL/`步中将文件夹移动到其他位置，因为外部 JavaScript 代码将被缓存（**!!!** - 在开发过程中不受欢迎）在配置文件中（即：不会看到对外部代码的更改下次发射时）。

 ****外部代码具有特权，可以使用任何 Mozilla 平台 API。然而，有一个*时间*问题。包含（并因此执行）外部代码的时刻是`DOMWindow`尚不存在 Chrome 窗口对象（因此不存在对象）的时刻。

所以我们需要等待，直到有一个有用的`DOMWindow`对象：

```
// useful services.
Cu.import("resource://gre/modules/Services.jsm");    
var loader = Cc["@mozilla.org/moz/jssubscript-loader;1"]
                .getService(Ci.mozIJSSubScriptLoader);

var wmSvc = Cc["@mozilla.org/appshell/window-mediator;1"]
                .getService(Ci.nsIWindowMediator);

var logSvc = Cc["@mozilla.org/consoleservice;1"]
                .getService(Ci.nsIConsoleService);

// "user" code entry point.
function user_code() {   
   // your code here!
   // window, gBrowser, etc work as per MozRepl!
}

// get the gBrowser, first (about:blank) domWindow, 
// and set up common globals.
var done_startup = 0;
var windowListener;
function do_startup(win) {

    if (done_startup) return;
    done_startup = 1;
    wm.removeListener(windowListener);

    var browserEnum = wm.getEnumerator("navigator:browser");
    var browserWin = browserEnum.getNext();
    var tabbrowser = browserWin.gBrowser;
    var currentBrowser = tabbrowser.getBrowserAtIndex(0);
    var domWindow = currentBrowser.contentWindow;
    window = domWindow.QueryInterface(Ci.nsIInterfaceRequestor)
                 .getInterface(Ci.nsIWebNavigation)
                 .QueryInterface(Ci.nsIDocShellTreeItem)
                 .rootTreeItem.QueryInterface(Ci.nsIInterfaceRequestor)
                 .getInterface(Ci.nsIDOMWindow);
    gBrowser = window.gBrowser;

    setTimeout = window.setTimeout;
    setInterval = window.setInterval;
    alert = function(message) { 
        Services.prompt.alert(null, "alert", message); 
    };
    console = { 
        log: function(message) { 
            logSvc.logStringMessage(message); 
        } 
    };

    // the first domWindow will finish loading a little later than gBrowser...
    gBrowser.addEventListener('load', function() {
        gBrowser.removeEventListener('load', arguments.callee, true);
        user_code();
    }, true);
}

// window listener implementation
windowListener = {
    onWindowTitleChange: function(aWindow, aTitle) {},
    onCloseWindow:       function(aWindow) {},
    onOpenWindow:        function(aWindow) {
        var win = aWindow.QueryInterface(Ci.nsIInterfaceRequestor)
                     .getInterface(Ci.nsIDOMWindowInternal || Ci.nsIDOMWindow);
        win.addEventListener("load", function(aEvent) {
            win.removeEventListener("load", arguments.callee, false);
            if (aEvent.originalTarget.nodeName != "#document") return;
            do_startup();
        }
};

// CODE ENTRY POINT!
wm.addListener(windowListener); 
```

**第 4 步**。所有这些代码都在“全局”范围内执行。如果您稍后需要加载其他 JavaScript 文件（例如：jQuery），请在（全局！）范围`loadSubscript`内显式调用`null`

```
function some_user_code() {
    loader.loadSubScript.call(null,"file:///PATH/TO/SOME/CODE.js");
    loader.loadSubScript.call(null,"http://HOST/PATH/TO/jquery.js");
    $ = jQuery = window.$;
} 
```

现在我们可以通过将第二个参数传递给选择器调用来使用`jQuery`任何对象！`DOMWindow``<DOMWindow>.document`****

# java - android和tesseract ocr错误

> ID：14055647
> 
> 赞同：0
> 
> 时间：2012-12-27T13:42:00.577
> 
> 标签：java, android, ocr

我在调试 android OCR 应用程序时遇到此错误，
日志是：（您可以在最后几行看到错误）

```
12-27 16:18:01.050: D/TextLayoutCache(4953): Using debug level: 0 - Debug Enabled: 0
12-27 16:18:01.150: D/memalloc(4953): /dev/pmem: Mapped buffer base:0x5c266000             size:16297984 offset:12529664 fd:62
12-27 16:18:01.650: D/memalloc(4953): /dev/pmem: Mapped buffer base:0x5d2f1000 size:20066304 offset:16297984 fd:65
12-27 16:18:02.150: D/memalloc(4953): /dev/pmem: Mapped buffer base:0x5e614000 size:10739712 offset:6971392 fd:68
12-27 16:18:03.910: V/SimpleAndroidOCR.java(4953): Starting Camera app
12-27 16:18:04.310: D/memalloc(4953): /dev/pmem: Unmapping buffer base:0x5c266000 size:16297984 offset:12529664
12-27 16:18:04.310: D/memalloc(4953): /dev/pmem: Unmapping buffer base:0x5e614000 size:10739712 offset:6971392
12-27 16:18:04.320: D/memalloc(4953): /dev/pmem: Unmapping buffer base:0x5d2f1000 size:20066304 offset:16297984
12-27 16:18:05.230: W/IInputConnectionWrapper(4953): showStatusIcon on inactive InputConnection
12-27 16:18:15.730: I/SimpleAndroidOCR.java(4953): resultCode: -1
12-27 16:18:15.770: D/dalvikvm(4953): GC_FOR_ALLOC freed 67K, 7% free 12729K/13599K, paused 33ms
12-27 16:18:15.770: I/dalvikvm-heap(4953): Grow heap (frag case) to 15.359MB for 3000016-byte allocation
12-27 16:18:15.800: D/dalvikvm(4953): GC_FOR_ALLOC freed 4K, 6% free 15654K/16547K, paused 18ms
12-27 16:18:15.830: D/dalvikvm(4953): GC_CONCURRENT freed <1K, 6% free 15654K/16547K, paused 2ms+2ms
12-27 16:18:16.080: V/SimpleAndroidOCR.java(4953): Orient: 6
12-27 16:18:16.080: V/SimpleAndroidOCR.java(4953): Rotation: 90
12-27 16:18:16.100: D/dalvikvm(4953): GC_FOR_ALLOC freed 37K, 6% free 15629K/16547K, paused 20ms
12-27 16:18:16.110: I/dalvikvm-heap(4953): Grow heap (frag case) to 18.191MB for 3000016-byte allocation
12-27 16:18:16.180: D/dalvikvm(4953): GC_FOR_ALLOC freed <1K, 5% free 18559K/19491K, paused 56ms
12-27 16:18:16.240: D/dalvikvm(4953): GC_CONCURRENT freed 0K, 5% free 18559K/19491K, paused 2ms+2ms
12-27 16:18:16.270: D/dalvikvm(4953): GC_FOR_ALLOC freed 2930K, 20% free 15629K/19491K, paused 13ms
12-27 16:18:16.270: I/dalvikvm-heap(4953): Grow heap (frag case) to 18.191MB for 3000016-byte allocation
12-27 16:18:16.310: D/dalvikvm(4953): GC_FOR_ALLOC freed <1K, 5% free 18558K/19491K, paused 25ms
12-27 16:18:16.330: V/SimpleAndroidOCR.java(4953): Before baseApi  
(THE ERROR STARTS HERE)
12-27 16:18:16.330: W/dalvikvm(4953): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/googlecode/tesseract/android/TessBaseAPI;  
12-27 16:18:16.330: D/AndroidRuntime(4953): Shutting down VM
12-27 16:18:16.330: W/dalvikvm(4953): threadid=1: thread exiting with uncaught exception (group=0x40ab3210)
12-27 16:18:16.340: E/AndroidRuntime(4953): FATAL EXCEPTION: main 
```

.java 文件：

```
 Log.v(TAG, "Before baseApi");

// the error starts from here

    TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.setDebug(true);
    baseApi.init(DATA_PATH, lang);
    baseApi.setImage(bitmap);

    String recognizedText = baseApi.getUTF8Text();

    baseApi.end();

    // the next line is not exist in the log

    Log.v(TAG, "OCRED TEXT: " + recognizedText); 
```

如果你知道这个例外是什么，请告诉我....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:42:30.847

问题出在调试项目前的ndk-build命令，我重建项目成功，问题消失了，感谢帮助

# android - 如何更改标题的 TextColor 及其在 SherlockFragmentActivity 中显示的大小？

> ID：14055648
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:42:02.870
> 
> 标签：android, actionbarsherlock

我有以下 SherlockFragmentActivity 的代码。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Theme_Sherlock);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sherlock);

    } 
```

这是它的样子。

![SherlockFragmentActivity](../Images/1ee8a28cbb0426e7b51cb31cb9c2df49.png)

我的问题是我无法在此活动中更改顶部标题颜色，并且我还想更改此 SherlockDemo 标题的背景。

那个顶部标题叫什么？是没有添加任何动作或其他任何东西的 ActionBar 吗？

请让我知道我该怎么做。

**编辑我的应用主题**

```
 <style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="android:actionBarStyle">@style/MYAction.ActionBarStyle</item>
</style>

<style name="MYAction.ActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
    <item name="android:titleTextStyle">@style/MyBar.ActionBar.TitleTextStyle</item>

</style>

<style name="MyBar.ActionBar.TitleTextStyle" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">@color/green</item>
    <item name="android:textSize">20sp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:47:14.953

您需要在 style.xml 中有一个自定义主题。

此自定义主题必须具有任何默认 ActionBarSherlock 主题的父主题。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="YOURTHEME" parent="Theme.Sherlock.Light">
<item name="android:actionBarStyle">@style/YOURTHEME.ActionBarStyle</item>
<item name="actionBarStyle">@style/YOURTHEME.ActionBarStyle</item>
</style>

<style name="YOURTHEME.ActionBarStyle" parent="Widget.Sherlock.Light.ActionBar">
<item name="android:titleTextStyle">@style/YOURTHEME.ActionBar.TitleTextStyle</item>
<item name="titleTextStyle">@style/YOURTHEME.ActionBar.TitleTextStyle</item>
</style>

<style name="YOURTHEME.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
<item name="android:textColor">@color/YOUR_COLOR</item>
<item name="textColor">@color/YOUR_COLOR</item>
<item name="android:textSize">@dimension/MEDIUM_TEXT</item>
<item name="textSize">@dimension/MEDIUM_TEXT</item>
</style>
</resources> 
```

# android - gitignore android 包含 apk

> ID：14055650
> 
> 赞同：2
> 
> 时间：2012-12-27T13:42:18.097
> 
> 标签：android, eclipse, git, gitignore

在我的存储库中，我想排除所有二进制文件、所有生成的文件等。但我确实想包含最终的 apk 文件。我拿起了标准的 gitignore for android（见[这里](https://gist.github.com/4388441/revisions)）并根据[这个问题](https://stackoverflow.com/questions/5533050/gitignore-exclude-folder-but-include-specific-subfolder)对其进行了更改。但现在它并没有忽略 bin/res 文件夹。当然，我也可以添加另一行来手动排除 bin/res，但这似乎并不标准。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:00:00.040

如果该`apk`文件仅存在于 bin/ 目录中，您可以尝试：

```
bin/
!*.apk 
```

这将类似于“ [gitignore 排除规则如何实际工作？](https://stackoverflow.com/a/3001967/6309) ”中描述的设置。

您尝试的类似于“[否定模式如何在 .gitignore 中工作？](https://stackoverflow.com/a/2820310/6309) ”，这可能有效：

```
bin/*
!bin/*.apk
bin/res/ 
```

# svg - 如何创建支持多个像素比的 SVG？

> ID：14055651
> 
> 赞同：2
> 
> 时间：2012-12-27T13:42:28.403
> 
> 标签：svg, retina-display, resolution-independence, pixel-ratio

我想创建使用 <image> 元素的与分辨率无关的 SVG。是否可以测试用户代理的实际像素比？请看示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="640" height="480">
    <defs>
        <pattern id="test" patternUnits="userSpaceOnUse"
            x="0" y="0" width="130" height="100"
            viewBox="0 0 130 100" >
            <IF PIXEL RATIO = 2>
                <image xlink:href="test_2x.png" id="svg_1" height="100" width="130" y="0" x="0"/>
            <ELSE>
                <image xlink:href="test.png" id="svg_1" height="100" width="130" y="0" x="0"/>
            <END IF>
        </pattern> 
    </defs>
    <rect id="rectangle" stroke="rgb(29, 29, 255)"  fill="url(#test)" x="50" y="47" width="320" height="240" />
</svg> 
```

我只在[文档中找到了](http://www.w3.org/TR/SVG/struct.html#SwitchElement "开关元件")[Switch Element](http://www.w3.org/TR/SVG/struct.html#SwitchElement "开关元件") ，但它似乎不是很有帮助，因为没有“视网膜显示”功能。或者有吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:59:02.697

您可以使用 CSS 媒体选择器来检测视网膜显示。使用 display 属性，您可以根据设备打开和关闭图像。

我手头没有 Apple Retina 设备可供测试，但我认为[这样的事情](http://tinkerbin.com/hYNkeg6V)应该可以工作：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="640" height="480">
  <style type="text/css">
    @media all {
      #test_2x_png {display:none}
    }
    @media (-webkit-min-device-pixel-ratio: 2) {
      #test_png    {display:none;}
      #test_2x_png {display:inline;}
    }
  </style>
  <defs>
    <pattern id="test" patternUnits="userSpaceOnUse"
        x="0" y="0" width="130" height="100"
        viewBox="0 0 130 100" >
          <image xlink:href="test_2x.png" height="100" width="130" y="0" x="0" id="test_2x_png"/>
          <image xlink:href="test.png" height="100" width="130" y="0" x="0" id="test_png"/>
    </pattern> 
  </defs>
  <rect id="rectangle" stroke="rgb(29, 29, 255)"  fill="url(#test)" x="50" y="47" width="320" height="240" />
</svg> 
```

# android - 安卓堆栈。在这种情况下如何使用标志？

> ID：14055653
> 
> 赞同：1
> 
> 时间：2012-12-27T13:42:33.803
> 
> 标签：android, android-intent

**这是我的情况：** 我有 MAIN 活动，四个 TOOLBAR 活动，用户可以从始终可见的工具栏和其他活动启动。

**我想要什么：** 应用程序以 MAIN Activity 开始。然后用户转到 Main -> TOOLBARActivity (1) - OtherActivity(1) - OtherActivity(2) - ... - TOOLBARActivity(2)。启动 TOOLBARActivity(2) 时，我需要清除从 Main 到 TOOLBARActivity(2) 的所有堆栈。因此，如果现在用户按下后退按钮，他将返回到 MAIN Activity。

所以，我只需要找到清除堆栈中所有活动的方法，除了第一个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:45:42.833

当你去你的第二个活动时，你可以这样使用：

```
intent = new Intent(this,SecondActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
StartActivity(intent); 
```

此标志清除 Activity 堆栈的顶部

# android - Parcel.readStringArray() 的参数是什么？

> ID：14055656
> 
> 赞同：18
> 
> 时间：2012-12-27T13:42:38.017
> 
> 标签：android, parcelable

我试图`Fragment`通过使用来保存我的状态`Parcelable`。

当我希望取回我保存在 Parcelable 中的字符串数组时，这会导致以下代码：

```
public MyObject createFromParcel(Parcel in) {
            titles=in.readStringArray(???);
} 
```

现在`readStringArray`需要一个参数，a `String[]`...但是为什么呢？它可以只给出我存储在其中的字符串。我不知道先验有多少，所以这很糟糕。:(

该[文档](http://developer.android.com/reference/android/os/Parcel.html#readStringArray%28java.lang.String%5B%5D%29)说明了以下内容：

 `也就是说，什么都没有。

**编辑：**如果有人有同样的问题：我最终使用`writeBundle()`/`readBundle()`并将我`String[]`的放入`Bundle`.

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-07-24T15:25:11.783

使用`createStringArray()`而不是`readStringArray(String[])`. 它将返回您需要的数组。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T13:46:10.623

这是 Android 4.1.2 中此方法的实现：

```
public final void readStringArray(String[] val) {
    int N = readInt();
    if (N == val.length) {
        for (int i=0; i<N; i++) {
            val[i] = readString();
        }
    } else {
        throw new RuntimeException("bad array lengths");
    }
} 
```

所以它将值写入给定的数组。并且什么也不返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-15T11:53:46.430

`readStringArray(String[] val)`我认为并排查看这两种方法可能很有用`createStringArray()`：

我们先来看`readStringArray(String[] val)`方法。它需要 a`String[]`作为参数，`NullPointerException`如果您传递未初始化的数组对象 ( `null`)，可能会导致 a。此外，您必须确切知道数组 (N) 的长度，否则您将从`RuntimeException`方法中得到抛出：

```
public final void readStringArray(String[] val) {
    int N = readInt();
    if (N == val.length) {
        for (int i=0; i<N; i++) {
            val[i] = readString();
        }
    } else {
        throw new RuntimeException("bad array lengths");
    }
} 
```

哦，另一方面，由于`createStringArray()`您不需要形成并提供 a`String[]`作为参数，它也会通过具有正确长度的方法为您形成，因此您不必担心`NullPointerException`or `RuntimeException`：

```
public final String[] createStringArray() {
    int N = readInt();
    if (N >= 0) {
        String[] val = new String[N];
        for (int i=0; i<N; i++) {
            val[i] = readString();
        }
        return val;
    } else {
        return null;
    }
} 
```

总而言之，作为这个基本分析的结果，我们可以得出结论并说第二种方法更好，更安全。`

# java - google安全浏览查找api代码为java

> ID：14055658
> 
> 赞同：1
> 
> 时间：2012-12-27T13:42:46.203
> 
> 标签：java, http, post, safe-browsing

我在编程时遇到了一些困难，请求正文的含义很混乱。它总是返回 400 个响应代码。请帮助我。

```
 String baseURL="https://sb-ssl.google.com/safebrowsing/api/lookup";

 String arguments = "";
 arguments+=URLEncoder.encode("client", "UTF-8")+"="+URLEncoder.encode("demo-app", "UTF-8")+"&";
 arguments+=URLEncoder.encode("apikey", "UTF-8")+"="+URLEncoder.encode("apikey", "UTF-8")+"&";
 arguments+=URLEncoder.encode("appver", "UTF-8")+"="+URLEncoder.encode("1.5.2", "UTF-8")+"&";
 arguments+=URLEncoder.encode("pver", "UTF-8")+"="+URLEncoder.encode("3.0", "UTF-8")+"&";
 arguments+=URLEncoder.encode("post_req_body", "UTF-8")+"="+URLEncoder.encode("2\nhttp://www.google.com\nhttp://www.facebook.com", "UTF-8");

 String query = arguments;

    System.out.println("Sending POST request - " + query);
// Construct the url object representing cgi script
    URL url = new URL( baseURL );

    // Get a URLConnection object, to write to POST method
    URLConnection connect = url.openConnection();

    // Specify connection settings
    connect.setDoInput(true);
    connect.setDoOutput(true);

// Get an output stream for writing
    OutputStream output = connect.getOutputStream();

    PrintStream pout = new PrintStream (output);

    pout.print ( query );
    pout.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:57:51.953

你的要求是错误的。如果您使用 POST 请求，则参数*client*、*apikey*、*apiver*和*pver*应该是 URL 的一部分。

请求正文应仅包含要检查的 URL（加上第一行的 URL 数量）。

所以它可能看起来像这样：

```
String baseURL="https://sb-ssl.google.com/safebrowsing/api/lookup";

String arguments = "";
arguments + =URLEncoder.encode("client", "UTF-8") + "=" + URLEncoder.encode("myapp", "UTF-8") + "&";
arguments + =URLEncoder.encode("apikey", "UTF-8") + "=" + URLEncoder.encode("12341234", "UTF-8") + "&";
arguments + =URLEncoder.encode("appver", "UTF-8") + "=" + URLEncoder.encode("1.5.2", "UTF-8") + "&";
arguments + =URLEncoder.encode("pver", "UTF-8") + "=" + URLEncoder.encode("3.0", "UTF-8");

// Construct the url object representing cgi script
URL url = new URL(baseURL + "?" + arguments);

// Get a URLConnection object, to write to POST method
URLConnection connect = url.openConnection();

// Specify connection settings
connect.setDoInput(true);
connect.setDoOutput(true);

// Get an output stream for writing
OutputStream output = connect.getOutputStream();
PrintStream pout = new PrintStream (output);
pout.print("2");
pout.println();
pout.print("http://www.google.com");
pout.println();
pout.print("http://www.facebook.com");
pout.close(); 
```

# php - 如何100%禁用缓存

> ID：14055663
> 
> 赞同：4
> 
> 时间：2012-12-27T13:43:13.660
> 
> 标签：php, html, caching

> **可能重复：**
> [缓存控制失败](https://stackoverflow.com/questions/12599382/cache-control-fails)

我目前正在使用：

```
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
```

和

```
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="-1">
<meta http-equiv="pragma" content="no-cache"> 
```

然而它仍然缓存

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:50:22.183

您还可以添加[Pragma: no-cache](https://www.rfc-editor.org/rfc/rfc2616#section-14.32)。并且确保`Last-Modified`过去已经足够远：客户端和服务器之间的一些小时钟偏差可能会诱使您的客户端认为它具有文档的新版本；使用`Tue, 15 Nov 1994 12:45:26 GMT`例如。并且还添加一个带有过去日期的[Expires标头。](https://www.rfc-editor.org/rfc/rfc2616#section-14.21)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:53:05.937

我通常在我的 .htaccess 中添加这个

```
<filesMatch "\.(js|css)$">
FileETag None
<ifModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>
</filesMatch> 
```

修改 fileMatch 以添加其他扩展...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:47:50.150

在每个 URI 的末尾添加时间戳，浏览器不会从缓存中检索它（因为下次加载时会使用另一个 URI）

# node.js - nodejs-redis(&connect-redis) 如何处理同步和异步？

> ID：14055665
> 
> 赞同：3
> 
> 时间：2012-12-27T13:43:28.413
> 
> 标签：node.js, redis

我的会话存储使用了**connect-redis**，当我使用时`req.session`，似乎所有的操作都是**同步**的，就像对普通的Javascript变量进行操作一样，代码服从顺序。但我检查了[源代码](https://github.com/visionmedia/connect-redis/blob/master/lib/connect-redis.js)，它使用异步方式，所以我想知道为什么会`req.session`这样。

另一个问题是，如果我有多个**redis**查询，

```
client.sadd('test', 1);
client.del('test');
client.sadd('test', 2);
client.sadd('test', 3); 
```

不管我把**del**操作放在哪里，结果总是一样的。我认为这些查询可以按任何顺序运行，对吗？因为它们都是异步调用的，所以我预期的结果每次都应该不同。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:20:45.783

异步管理到 Redis 服务器的往返并不意味着查询将以随机顺序发送。

Redis（以及因此大多数 Redis 客户端库）支持[流水线](http://redis.io/topics/pipelining)，通常用于优化往返次数。这个想法是发送多个查询，然后等待回复。顺序很关键，因为客户端使用它来匹配查询和回复。

Node.js 非常适合支持这种机制。Matt Ranney 的[node_redis](https://github.com/mranney/node_redis)客户端以透明的方式支持流水线。如果使用相同的客户端对象，所有查询将被序列化并按顺序执行。

在您的示例中，查询总是以相同的顺序执行是正常的。您可以通过使用[monitor](http://redis.io/commands/monitor)命令显示发送到 Redis 的查询流来检查这一点。

现在，重要的是管道的最后一个查询与回调相关联，否则您的程序将永远不会知道最后一个查询何时完成。

# php - Zend Framework 2 - 注释表单和 Doctrine2 - 可捕获的致命错误 - ObjectManager

> ID：14055669
> 
> 赞同：2
> 
> 时间：2012-12-27T13:43:36.243
> 
> 标签：php, doctrine-orm, zend-framework2, zend-db

我正在使用 Zend、Doctrine2.1 和 AnnotationForms。

我的实体如下所示：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="myentity")
 * @Form\Name("myentity")
 * @Form\Attributes({ "class": "form-horizontal" })
 * @Form\Hydrator("\DoctrineModule\Stdlib\Hydrator\DoctrineObject")
*/
class MyEntity {
   ...
} 
```

使用它时，`DoctrineObject`我收到以下错误：

> 可捕获的致命错误：传递给 DoctrineModule\Stdlib\Hydrator\DoctrineObject::__construct() 的参数 1 必须是 Doctrine\Common\Persistence\ObjectManager 的一个实例，没有给出，在 C:\vendor\zendframework\zendframework\library\Zend 中调用\Form\Factory.php 在第 566 行，并在第 63 行的 C:\vendor\doctrine\doctrine-module\src\DoctrineModule\Stdlib\Hydrator\DoctrineObject.php 中定义

我不能使用`Zend\Stdlib\Hydrator\ObjectProperty`，因为那时我得到

> 致命错误：无法访问受保护的财产

我很迷茫。有人知道我能做些什么来解决这个问题吗？

我猜我需要一个`__construct()`函数。但是我在里面放什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:54:32.007

有人可能会想出一个仅限 Annotation 的函数，如果存在的话，同时你可以采用这种方法：

```
$form = //create the annotation form WITHOUT a hydrator
$objectManager = $serviceLocator->get('Doctrine\ORM\EntityManager');
$hydrator = new \DoctrineModule\Stdlib\Hydrator\DoctrineObject($objectManager);
$form->setHydrator($hydrator);

//continue in your controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:30:02.637

注释表格也有问题。我的解决方案是令人费解的。我花了很长时间才知道。我的问题出在注释代码的第一行。

```
/** 
```

此行通常用于注释您的注释代码，但几乎所有人都将其留空。通常没有问题，但这会以某种方式导致表单注释出现问题。您应该添加一些注释、添加空格或将第一行代码向上移动。所以：

```
/** Some comment to make this annotation work
/** (<-- a space) 
```

或者这样开始：

```
/** @ORM\Entity 
```

不要问我为什么会这样（一些解析错误？）。我在 GitHub 上的一篇文章中发现了这个，有人报告说有类似的问题 ( [https://github.com/doctrine/common/issues/331](https://github.com/doctrine/common/issues/331) )。据我了解，该错误不是教义，而是 ZF2 问题，并且已被报告。

不确定这也是你的问题，但发布这是我能做的至少......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-26T21:16:31.137

请看一下[这个解决方案](https://github.com/doctrine/DoctrineORMModule/issues/102)，它非常好

# java-me - 在 Java Me 中使用 Textfield 切换到可视组件

> ID：14055672
> 
> 赞同：1
> 
> 时间：2012-12-27T13:43:52.437
> 
> 标签：java-me, textfield, midp, lcdui

我正在使用 java me，我使用表单可视组件构建了一个应用程序。我正在尝试根据用户在文本字段项目中的输入切换到其他形式。例如，我希望用户能够在文本字段中输入数字“1”，然后被带到 form1 或输入“2”并被带到 form2 等。

执行此操作的代码是什么？

这是我所做的，但它没有按预期工作：

```
form.setItemStateListener(new ItemStateListener() {

            public void itemStateChanged(Item item) {
                if (item == TextField) {
                     if ("1".equals(TextField.getString())) {
                        switchDisplayable(null, form1);
              }   
           }   
} 
```

* * *

我已经按照建议做了。我在文本字段项中添加了一个命令并监听它以读取文本字段内容，然后将内容作为字符串进行比较，以切换表单。请参阅下面的代码，仍然无法正常工作。我想也许我遗漏了一些东西，或者我的逻辑不正确。

```
 form.setCommandListener(new CommandListener() {

            public void commandAction(Command command, Displayable displayable) {
                if (command == getTextFieldItemCommand()) {
                    if ("1".equals(TextField.getString())) {
                        switchDisplayable(null, form1);
                    } else if ("2".equals(TextField.getString())){
                        switchDisplayable(null, form2);
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:38:24.273

看起来您希望`itemStateChanged`在您觉得方便时调用方法，例如在文本字段中的每个字符输入处。

[上述预期是错误的， API javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ItemStateListener.html#itemStateChanged%28javax.microedition.lcdui.Item%29)中解释了指定的行为：

> 由设备决定何时认为已将新值输入到项中...通常，不期望在每次更改后都调用侦听器...

如上所述，使用`itemStateChanged`您想要的方式几乎没有意义，请考虑更改 MIDlet 的设计。

* * *

我可能只是`Go`在表单或文本字段中添加一个命令和命令侦听器，并在用户调用该命令以找出他们想要切换到的可显示内容时读取文本字段内容。

# listview - BlackBerry Cascades 中的 ListView 崩溃

> ID：14055674
> 
> 赞同：0
> 
> 时间：2012-12-27T13:44:11.987
> 
> 标签：listview, crash, qml, blackberry-10

我`ListView`在我的 Cascades 应用程序中使用 a 并且我在 QML 中做大​​部分事情。这是`attachedObjects: [ ]`里面的`ListView`：

```
attachedObjects: [
    FmnModel {
        id: fmnModel
    },
    FmnListModel {
        id: asynkDataSource
        source: "sql/fgmt.db"
        query: "SELECT lists.id, lists.name, (SELECT COUNT(1) FROM tasks WHERE tasks.listid=lists.id AND tasks.status=\"Pending\") AS pendings FROM lists"

        onDataLoaded: {
            if(data.length > 0) {
                fmnModel.insertList(data);
            }
        }
    }
] // Attached Objects 
```

以及将下一页加载到的代码`NavigationPane`：

```
property variant taskpaged
onTriggered: {
    taskpaged = taskPageDefinition.createObject();
    navPane.push(taskpaged);

    taskpaged.back.connect(navPane.pop);
} 
```

因此，当我在页面中单击“返回”时`taskpaged`，应用程序崩溃了。知道为什么吗？还是我需要提供更多代码？（如果是，是哪个？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:27:11.190

您需要`signal back()`在 QML 中为您的`taskPageDefinition`. 然后您还需要为页面定义导航窗格属性，并指定单击后退按钮时发生的操作：

```
Page {
  id: taskPage
  signal back()

  paneProperties: NavigationPaneProperties {
    backButton: ActionItem {
        onTriggered: {
            // Send the back() signal, which you already connected to nav.pop()
            taskPage.back();
        }
    }
  }
} 
```

希望这会有所帮助。你也可以看看[这个问题](https://stackoverflow.com/questions/13741217/blackberry-10-cascades-qml-methods)，我在那里发布了一个完整的导航窗格示例，但在那个示例中，我只是直接从后退按钮的 onTriggered 调用 nav.pop() 。在这里，您正在使用信号和插槽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:50:41.320

可能会引发一些错误，但如果您从一个页面开始然后推送另一个页面，您将看不到它们。让您的应用指向 (taskpage) 作为要加载的第一页。你会看到有很多例外。修复它们然后返回原始代码

# opencv - 如何找到略微拉长的椭圆形/带有弯曲角的矩形/有时是圆的扇区？

> ID：14055676
> 
> 赞同：1
> 
> 时间：2012-12-27T13:44:18.150
> 
> 标签：opencv, pattern-matching, computer-vision, robotics, contour

[如何使用opencv从顶视图识别斑马线？](https://stackoverflow.com/questions/14041109/how-to-recognise-a-zebra-crossing-from-top-view-using-opencv)

在我之前的问题中，问题是使用opencv找到弯曲的斑马线。现在我认为以下方法会更容易检测它，

(i) 精明的

(ii) 找到其中的轮廓

(iii) 找到其中的黑色条纹，在我的情况下，它的形状略呈椭圆形

现在我的问题是如何找到那个略呈椭圆形的形状？

在此处查看穿越的图像：www.shaastra.org/2013/media/events/70/Tab/422/Modern_Warfare_ps_v1.pdf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:15:12.703

一般来说，我相信您可以考虑两种方法。

正如您所描述的，一种方法是更强力的*图像分析方法。*在这里，您将根据对问题的了解应用启发式方法，以识别路径部分中涉及的像素。请注意，这里的“蛮力”并不是一件坏事，只是一个形容词。

另一种方法是应用*模式识别*技术来找到图像中很有可能成为路径一部分的区域。在这里，您将把图像转换为（希望）有意义的特征：线、点、梯度（例如：[定向梯度直方图（HOG）](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)）、相对强度（例如：[Haar-like features](http://en.wikipedia.org/wiki/Haar-like_features)）等，并使用*机器学习*技术来计算找出这些特征如何描述道路与隧道（在您的示例中）。

当您询问前者时，我将在这里重点讨论。如果您想了解更多关于后者的信息，请浏览 Internet、StackOverflow 或发布您的具体问题。

因此，对于“蛮力图像分析”方法，您的第一步*可能*是根据需要对图像进行预处理；

*   如果您稍后要分析颜色，请考虑颜色归一化，这将有助于使您的算法对车库与活动工作室中的照明差异具有鲁棒性。它还将提高对相机协作差异的稳健性，尽管主办比赛的组织会为他们将使用的相机提供规格（不要忽略这一点信息）。

*   如果您对逐个像素的值（例如边缘）不太感兴趣，而对更大的结构（例如渐变）更感兴趣，请考虑对图像进行模糊处理以减少噪声。

*   考虑出于模糊的相反原因锐化图像。

*   对图像预处理做一些研究。这绝对是一个探索的话题，但几乎没有“解决”（不管那意味着什么）。在这个阶段有很多事情要尝试，当然，废话=>废话。

之后，您将要生成一些“功能”..

*   正如您所提到的，**边缘**似乎是解决此问题的合适特征空间。不要忘记除了 Canny 之外还有许多其他出色的边缘检测算法（参见[Prewitt](http://en.wikipedia.org/wiki/Prewitt_operator)、[Sobel](http://en.wikipedia.org/wiki/Sobel_operator)等）。但是，在应用边缘检测算法之后，您仍然只有像素数据。要获得您可能想要从边缘提取线条的*功能。*这就是[霍夫变换空间](http://en.wikipedia.org/wiki/Hough_transform)派上用场的地方。

*   （另外，作为一个想法，您可以考虑与边缘检测器一起使用的颜色空间。我的意思是，边缘检测器通常在黑白颜色空间中工作，但不是将图像转换为灰度，您可以将其转换为适当的颜色空间并且只使用一个通道。例如，如果游戏板是红色的，而人行横道上的线是蓝色的，则将图像转换为 HSV 并获取色调通道作为边缘检测器的输入。您可能会得到更好的对比度区域不仅仅是灰度。对于明亮与暗淡使用值通道，对于黄色与蓝色使用 Opponent 颜色空间等）

*   也可以**看点**。Harris 角点检测器或高斯拉普拉斯算子 (LOG) 等算法将提取“关键点”（每种算法的定义不同，但通常可重现）。

*   还有许多其他功能空间可供探索，不要停在这里。

现在，这就是蛮力部分的用武之地。

*   首先想到的是平行线。即使在曲线中，线条的边缘也“大致”平行。您可以轻松地开发一种算法，通过查找每条线大致平行于它们的邻居来找到游戏中的轨迹。请注意，通常应用像霍夫变换这样的线检测器，以便它们在数据集中找到“峰值”或过度表示的角度。因此，如果您为整个图像生成 Hough 变换，您将很难找到您想要的任何线条。相反，您可能希望使用滑动窗口单独检查每个区域。

*   具体来说，对于弯曲区域，您可以使用 Hough 变换很容易地检测圆形和椭圆。您可以应用启发式方法：两个具有给定半径差异的同心半圆（在您的问题中约为 250）表示一条道路。

*   如果您使用点/角，您可以尝试提出一种算法来将一条线的角连接到下一条线。您可以限制从一个角到下一个角的距离和旋转角度，这将允许圆角转弯但禁止不可能的路径。这可以阐明道路的边缘，同时对转弯具有鲁棒性。

您现在可能开始明白为什么这些硬编码算法一开始很简单，但调整起来却变得乏味，而且往往没有很好的结果。此外，它们往往僵化且不适用于其他甚至类似的问题。

**说了这么多..**你说的是解决一个没有开箱即用解决方案的问题。思考解决方案是一半的乐趣，一半的挑战。我在这里描述的一切都是基本的图像分析、计算机视觉和问题解决。开始阅读一些关于这些主题的论文，想法很快就会出现。祝你在比赛中好运。

# blackberry-10 - 如何在 BlackBerry 10 的 data($HOME) 文件夹中添加文件

> ID：14055678
> 
> 赞同：0
> 
> 时间：2012-12-27T13:44:26.713
> 
> 标签：blackberry-10

我正在尝试在 BlackBerry 10 模拟器提供的文件系统的数据文件夹中添加一些可写文件。提供的链接中的 PFB 文件系统层次结构：[https ://developer.blackberry.com/cascades/documentation/device_platform/filesystem/index.html](https://developer.blackberry.com/cascades/documentation/device_platform/filesystem/index.html)

在 bar-descriptor.xml 文件中尝试了以下选项，但其中任何一个都没有成功。1\. $HOME/jsapp.html 2\. ${HOME}/jsapp.html

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:58:48.517

正如理查德所说，这直接来自 Quotes 示例应用程序

```
 void CustomSqlDataSource::copyFileToDataFolder(const QString fileName)
{
    // Since we need read and write access to the file, it has
    // to be moved to a folder where we have access to it. First,
    // we check if the file already exists (previously copied).
    QString dataFolder = QDir::homePath();
    QString newFileName = dataFolder + "/" + fileName;
    QFile newFile(newFileName);

    if (!newFile.exists()) {
        // If the file is not already in the data folder, we copy it from the
        // assets folder (read only) to the data folder (read and write).
        QString appFolder(QDir::homePath());
        appFolder.chop(4);
        QString originalFileName = appFolder + "app/native/assets/" + fileName;
        QFile originalFile(originalFileName);

        if (originalFile.exists()) {
            // Create sub folders if any creates the SQL folder for a file path like e.g. sql/quotesdb
            QFileInfo fileInfo(newFileName);
            QDir().mkpath (fileInfo.dir().path());

            if(!originalFile.copy(newFileName)) {
                qDebug() << "Failed to copy file to path: " << newFileName;
            }
        } else {
            qDebug() << "Failed to copy file data base file does not exists.";
        }
    }

    mSourceInDataFolder = newFileName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:59:14.677

您的问题尚不清楚，但听起来您正试图在 BAR 文件中包含这些文件。你不能这样做。使用 BAR 文件部署的所有资产都包含在应用程序签名中，并且无法更改（除了在模拟器或具有未签名 BAR 的开发人员令牌的设备上）。如果您需要在安装后修改资产，请使用 BAR 文件部署初始版本并将其复制到数据目录。其中一个示例程序（如果我没记错的话是报价数据库示例）执行此操作。

# ant - FDT 编译 swf 模块和后编译

> ID：14055679
> 
> 赞同：0
> 
> 时间：2012-12-27T13:44:29.850
> 
> 标签：ant, air, fdt

我正在开发一个需要许多 swf 模块的 AIR 项目。所以我有一个主项目，它在需要时加载 swf 文件，我现在需要设置一个只编译模块 swf 的项目，将其复制到主项目并启动主项目。

第一次尝试是使用启动器链，但是没有用。似乎启动器链不执行外部项目。

第二次尝试是使用 ant 脚本并在 swf 编译后执行它。我在 FDTs “Post compile ant file”中链接了脚本，但这也不起作用。我只能手动执行 ant 文件。

如何设置在编译 ant 文件后启动的项目，该文件执行/启动另一个项目？

下面是一个包含主项目和模块项目的示例：[fdt_ant.zip](http://solanomorales.com/fdt/fdt_ant.zip) ant 文件在包含的模块项目中，应该只将生成的 swf 复制到主项目中。

# android - 将imageView放在android中的textview之后

> ID：14055680
> 
> 赞同：4
> 
> 时间：2012-12-27T13:44:30.043
> 
> 标签：android, android-layout

如果 textview 变成两行，我在 textview 之后放置 imageview 时遇到问题。我想展示这个（图片就在文字之后，文字可以是一行，两行或三行）![在此处输入图像描述](../Images/2479614ddf4241822312d3b3dc0b9e81.png)

如果文本很短（一行），我的 imageview 就在 textview 之后。但是当文本变得更长（两行）时，图像会像这样进入下一行![在此处输入图像描述](../Images/5774b3c67804711faad51fb4024d570d.png)

我知道这个问题的原因，但不知道如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T14:26:57.637

经过大量的谷歌搜索，我找到了解决问题的好方法

```
TextView textView =new TextView(this);
                SpannableStringBuilder ssb = new SpannableStringBuilder( "Here's a smiley how are you " );
                Bitmap smiley = BitmapFactory.decodeResource( getResources(), R.drawable.movie_add );
                ssb.setSpan( new ImageSpan( smiley ), ssb.length()-1,  ssb.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE );  
                textView.setText( ssb, BufferType.SPANNABLE ); 
```

**借助上述代码，您可以在 Textview 的任何位置添加图像。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:19:58.460

而不是 ImageView 尝试*clickable="true"*和*drawableEnd*

```
<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:drawableEnd="@drawable/navigation_icon"
    android:text="Text"
    android:clickable="true"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:57:58.100

尝试使您的 xml 如下所示。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="TextView" />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:src="@drawable/my_icon" />
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:04:29.637

使用以下布局

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
     android:padding="2dp"
    android:background="@android:color/transparent"
    >
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:gravity="left"
     android:padding="1dp"
    android:layout_gravity="left"
     android:orientation="horizontal" >

    <TextView
        android:id="@+id/contentText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Medium T"
          android:gravity="center"
            android:minLines="2"
         android:layout_gravity="center"
         android:textColor="@color/white"
          android:padding="5dp"
          android:visibility="invisible"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <ImageView
        android:id="@+id/contentImage1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:padding="5dp"
        android:visibility="invisible"
        android:src="@drawable/browse_product_thumbnail" />

</LinearLayout>

</LinearLayout> 
```

-普雷亚

# math - 如何找到列表列表中元素之间的第一个差异？

> ID：14055685
> 
> 赞同：0
> 
> 时间：2012-12-27T13:45:08.330
> 
> 标签：math, for-loop, python-2.7

我有一个列表如下：

```
data = [
[0.051, 0.05],
[],
[],
[],
[],
[],
[0.03],
[0.048],
[],
[0.037, 0.036, 0.034, 0.032],
[0.033, 0.032, 0.03]
] 
```

我试图找到每个子列表中元素之间的第一个区别，但无法完全弄清楚如何使用 python 做到这一点。这是我写的：

```
x = {}
index = 0
for item in data:
    if len(item) < 2:
        x[index] = "NA"      
        index += 1
    else:
        try:
            x[index] = item[0] - item[1]
            index += 1        
        except IndexError:
            x[index] = "NA"
            index += 1
y = {}
index = 0
for item in data:
    if len(item) < 2:
        y[index] = "NA"      
        index += 1
    else:
        try:
            y[index] = item[1] - item[2]
            index += 1        
        except IndexError:
            y[index] = "NA"
            index += 1
z = {}
index = 0
for item in data:
    if len(item) < 2:
        z[index] = "NA"      
        index += 1
    else:
        try:
            z[index] = item[2] - item[3]
            index += 1        
        except IndexError:
            z[index] = "NA"
            index += 1 
```

但是，我更喜欢一个更动态的版本，它可以根据每个子列表中的元素数量进行扩展。在数学上，对于 n 个元素，将有 n - 1 个一阶微分 x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:09:31.613

```
data = [
[0.051, 0.05],
[],
[],
[],
[],
[],
[0.03],
[0.048],
[],
[0.037, 0.036, 0.034, 0.032],
[0.033, 0.032, 0.03]
]

x = {}
for i in range(0,len(data)):
    tmp = []
    #print "\ndata[i]= ", data[i]
    try:
        z = 0
        for s in range(0,len(data[i])):
            try:
                z = str(data[i][s] - data[i][s+1])   #WITHOUT THIS STR() HERE VALUES GOT ROUNDED - so instead of getting 0.001 it was 0.000999999999994 or sth like that.
                #print "difference = ", z
                tmp.append(z)
                #print "tmp = ", tmp
            except:
                pass
                #print "inside error"
    except:
        pass
        #print "error"#, i
    x[i+1] = tmp

print x 
```

这是我的工作代码。我希望这就是你的意思。

----> v 这是固定的 v <----

我只有一个问题 - 例如：

```
difference = 0.001
tmp = [0.000999999999999994] 
```

差异（z 变量）附加到 tmp，tmp 看起来像“四舍五入”而不是完整的 0.001，我真的不知道如何正确格式化:(。

我现在将尝试处理它，如果我设法以某种方式完成它，我将编辑我的帖子。

@@@@ 修复： @@@@@

我通过将差异值更改为 str 而不是将其保留为浮点数来修复它。

# android - Android将完整视图转换为位图

> ID：14055690
> 
> 赞同：0
> 
> 时间：2012-12-27T13:45:25.050
> 
> 标签：android, bitmapimage

我可以将整个`linearlayout`或其他布局转换为位图吗？我的代码是这样的：

```
LinearLayout view = (LinearLayout)findViewById(R.id.linear_parent);
view.setDrawingCacheEnabled(true);

view.buildDrawingCache();

Bitmap bm = view.getDrawingCache();

ByteArrayOutputStream bytes = new ByteArrayOutputStream();
bm.compress(Bitmap.CompressFormat.JPEG, 40, bytes); 
```

问题是，如果布局大于屏幕尺寸，我只能得到屏幕上的内容而不是整个内容，例如 textview 等，它们当前不在屏幕上，但属于布局的一部分。

任何建议都在那里。这是紧急和重要的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:38:44.313

您可以在获取位图之前尝试设置大小。使用以下代码获取 Bitmap 并尝试。

```
LinearLayout view = (LinearLayout)findViewById(R.id.linear_parent);
view.setDrawingCacheEnabled(true);
view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 
view.buildDrawingCache(true);
Bitmap b = Bitmap.createBitmap(view.getDrawingCache());
view.setDrawingCacheEnabled(false); // clear drawing cache 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:15:41.840

好吧，这很容易。假设您尝试将视图保存到位图。好吧，这是我的完整保存方法，请检查一下，看看它是如何工作的。

```
void Save() {
    if (null != view.getDrawable()) {
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        save = view.getDrawingCache();
        final File myDir = new File(folder);
        myDir.mkdirs();
        final Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        final String fname = "StyleMe-" + n + ".png";
          file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        try {
            final FileOutputStream out = new FileOutputStream(file);
            save.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));
            Toast.makeText(getApplication(), "Image Saved",
                    Toast.LENGTH_SHORT).show();
        } catch (final Exception e) {
            Toast.makeText(getApplication(),
                    "Something Went Wrong check if you have Enough Memory",
                    Toast.LENGTH_LONG).show();
        }
    } else {
        final Toast tst = Toast.makeText(getApplication(),
                "Please Select An Image First", Toast.LENGTH_LONG);
        tst.setGravity(Gravity.CENTER, 0, 0);
        tst.show();
    }
    view.setDrawingCacheEnabled(false);
} 
```

这是图像将保存到的文件夹名称。

```
 String folder = "/sdcard/Pictures/StyleMe"; 
```

您可以将 StyleMe 更改为您的应用名称或任何您喜欢的名称。这是我的文件，只是在你的类名下声明。或者只是将它们添加到方法中`static File file;`

# html - 我没有看到“Chiller”字体中的文字，我在使用谷歌网络字体时请求

> ID：14055694
> 
> 赞同：-1
> 
> 时间：2012-12-27T13:45:31.430
> 
> 标签：html, fonts, google-api

我试图在我的 JSP 页面上使用 google 网络字体，但它似乎无法正常工作。在我的*Fedora 16 操作系统*上，我安装了`Chiller`字体。当我`Chiller`在 Fedora 上运行使用 google font apis 以字体显示文本的代码时，它会以该字体显示文本，但是当我在未安装冷却器字体的*Ubuntu*上尝试时，浏览器会显示默认字体可能在后备中使用。这可能是什么原因？片段：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Chiller">
    <style>
        #page_font {
            font-family: 'Chiller';
            font-size: 50px;
        }
    </style>
    <title>New Year Countdown </title>

</head>

<body> <div id="page_font"> <br /> Countdown </div>  </body> 
```

*注意：[该 JSP 页面的网址，我在其中使用了此代码段](http://programworks.appspot.com/nyblast.jsp)。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:07:16.443

调用[http://fonts.googleapis.com/css?family=Chiller](http://fonts.googleapis.com/css?family=Chiller)时，Google 网站会回复：

```
Error (400): Missing font family 
```

他们没有名为“Chiller”的字体！

# php - 在管理员面板中更新 Joomla 版本“媒体管理器”后不起作用

> ID：14055704
> 
> 赞同：1
> 
> 时间：2012-12-27T13:46:15.837
> 
> 标签：php, joomla, joomla1.5

“我的网站仍在旧的 Joomla 平台上，但我上周进行了更新，我可能不应该这样做，因为一切正常。更新后，我检查了几个功能，所有功能似乎都运行正常。然后大约一周后，我回去将照片添加到**媒体管理器**，现在它超时了，我收到一条错误消息。” - （未知）

它将我转移到以下页面：**[http ://www.my-site.xxx/administrator/index.php?option=com_media](http://www.my-site.xxx/administrator/index.php?option=com_media)**

并在此页面上出现以下错误：“**致命错误：第 506 行 /home/theaarc/public_html/libraries/joomla/filesystem/folder.php 中的最大执行时间超过 30 秒**”

这是图像： ![错误图像](../Images/ce854375f333c4038d1d802171768021.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:12:34.503

如果您在升级之前没有备份以前的站点，恐怕无法恢复，否则会非常困难和耗时。备份您拥有的当前网站并尝试使用[jUpgrade](http://redcomponent.com/redcomponent/jupgrade)升级到 Joomla 2.5 。

我在这篇 Stackoverflow 帖子中解释了为什么确保您的 Joomla 版本是最新的很重要。

[为什么我应该保持我的 Joomla 版本是最新的？](https://stackoverflow.com/questions/12247985/why-should-i-keep-my-joomla-version-up-to-date/12247989#12247989)

完成后，检查媒体管理器是否正常工作。

希望这可以帮助

# php - 替换 CSV 中的换行符

> ID：14055705
> 
> 赞同：3
> 
> 时间：2012-12-27T13:46:16.860
> 
> 标签：php, regex, csv, preg-replace

我有一个关于将 CSV 字符串转换为数组的问题。

```
INV;165;1;0;1 Username;0;10000;"Here is multiline-text.

with line-breaks:

";20 Offen;0,00
INV;166;1;0;1 Username2;0;10000;"Here is another multiline-text.

with line-breaks:

";20 Offen;0,00 
```

我试图用 str_getcsv 拆分字段，但问题是，分隔符只出现在一个字段中，并且函数也在拆分多行字段。

我的解决方案是首先通过 preg_replace 转换换行符，但我没有进入它。这是我的正则表达式，仅替换由 ;" 和 "; 包围的换行符 ：

```
/(;")(.*)(\n)(.*)(";)/ 
```

这种模式实际上只匹配第一个换行符。谁能给我一个提示来做这项工作？

先感谢您。

这是原始 CSV：

```
CMXINV;165;1;0;1 Felix Hirschberg;0;10000;Herr;;Max;Muster;Company;;Street;123;City;DE;(0 40) 6 25 6;;(0 40) 6 25 6;mail@muster.de;;;;;;;;0;20121217;20121217;1 Sofort ohne Abzug;EUR;1 Agentur;0 ;0,00;;"Vielen Dank für Ihren Auftrag.

Vereinbarungsgemäß berechnen wir Ihnen:

";"Mit besten Grüßen

Invoice Man";;0;0;0;0;;20 Offen;0,00;;0 ;0,00;0,00;;EXW;;;;;;;;;;;;;;;;2;;Project: Test-Project;;0,000;0,00;1,000;0,00;0,00;0;0;0;0;0
CMXINV;165;2;0;1 Felix Hirschberg;0;10000;Herr;;Max;Muster;Company;;Street;123;City;DE;(0 40) 6 25 6;;(0 40) 6 25 6;mail@muster.de;;;;;;;;0;20121217;20121217;1 Sofort ohne Abzug;EUR;1 Agentur;0 ;0,00;;"Vielen Dank für Ihren Auftrag.

Vereinbarungsgemäß berechnen wir Ihnen:

";"Mit besten Grüßen

Invoice Man";;0;0;0;0;;20 Offen;0,00;;0 ;0,00;0,00;;EXW;;;;;;;;;;;;;;;;0;1;"- job1 (1h)
- job2 (1h)
- job3 (0,75h)
- job4 (1h)
- job5 (0,5h)";HR;3,25;100,00;1,00;0,00;325,00;1;0;0;0;0
MESSAGE;S;210053;INVOICE_GET hat 1 Datensätze zurückgegeben
MESSAGE;S;204020;Datenübertragung erfolgreich. Es wurden 1 Datensätze verarbeitet. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:24:08.713

你可以试试这个：

```
/;"(([^"]*)([\r\n])+([^"]*))+"/im 
```

这将匹配分隔符内每个换行符前后的文本`;"`。第二个匹配是前面的文本，第四个匹配是后面的文本。

请注意，我已经省略了最后一个 ';' 以确保如果多行值是行中的最后一个值，这仍然匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:48:38.413

根据 php 手册中的用户评论，[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)应该[`str_getcsv()`](http://php.net/manual/en/function.str-getcsv.php)正确处理换行符。

您可能应该利用这些实现（它们应该已经解决了您可能遇到的任何可能的问题）。

* * *

### 编辑：自己的解析器

或者您可以编写自己的解析器（基于评论）：

```
// Browse file one character after another
while (false !== ($c = fgetc($fp))) {
    // We are not inside the value, newline = new row
    if( ($c == "\n") || ($c == "\r")){
       // Newline, add to result
       continue;
    }

    // Whitespace? continue, do nothing
    if( ctype_space( $c)){
        continue;
    }

    // Okay, now we can use switch
    switch( $c){
        case ',':
            // Add empty value
            break;

        // Escaped value
        case '"':
        case "'":
            $escapeChar = $c;
            $prevChar = '';
            $value = '';

            while( false !== ($c = fgetc($fp))){
                // We just hit and end of escaped sequence, check escaped val by \
                if( ($c == $escapeChar) && ($c != '\\') ){
                   break;
                }

                // If we got \ and prev value is \ = "blah blah \\"
                // Prevent escape escape character of being guessed incorrectly
                if( ($c == '\\') && ($prevChar == '\\')){
                    $prevChar = '';
                } else {
                    $prevChar = $c;
                }

                $value .= $c;
            }

            // $value is your value
            break;

        // Normal, non escaped value:
        default:
            $value = '';
            while( false !== ($c = fgetc($fp))){
                if( ($c == ',') || ($c == '\n') || ($c == '\r')){
                    break;
                }
                $value .= $c;
            }

            // $value = your field value
            break;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:38:49.987

如果您在文件中有 CSV 输入，则可以使用[`fgetcsv()`](http://php.net/fgetcsv)，它可以很好地处理多行条目。

如果 CSV 输入在字符串中，您可以使用特殊的[`php://temp`](http://php.net/manual/en/wrappers.php.php)I/O 流将其有效地传递给`fgetcsv()`：

```
$fp = fopen( 'php://temp', 'w+' );
fputs( $fp, $csv );
rewind( $fp );
$data = fgetcsv( $fp, 0, ';', '"' );
fclose( $fp ); 
```

# android - Android 始终处于使用套接字连接的后台服务中

> ID：14055708
> 
> 赞同：1
> 
> 时间：2012-12-27T13:46:26.680
> 
> 标签：android, service, background

我正在为特定环境设计一个自定义应用程序，该应用程序将始终在相同的硬件中运行，并且我将完全控制在其上运行的软件。

我需要有一个类似于推送连接的永久套接字连接来向设备传递少量数据。用户可能会更改为不同的应用程序，因此我需要打开套接字的后台服务并防止 Android 将其杀死。我不能依赖第三方推送解决方案（甚至是谷歌），因为这些设备没有互联网连接。

我看到了很多与这个主题相关的帖子，但他们都认为这不是一个好主意/可能。由于该应用程序将在特定上下文中运行，因此不会伤害任何人:)

你能建议/指导我吗？

雪儿！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:56:11.943

偶尔被杀是不是大问题？你不能只检查它是否正在运行，如果没有就启动吗？要在您的活动中执行此操作：

```
if (!isMyServiceRunning()) {
    startService();
}

...

private boolean isMyServiceRunning() {
   ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
   for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
      if (MyService.class.getName().equals(service.service.getClassName())) {
     return true;
      }
   }
   return false;
}

private void startService() {
   Intent myService = new Intent(this, MyService.class);
   startService(myService);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:57:03.990

虽然我不建议在不推送任何数据的情况下打开套接字连接。您可以尝试使用异步任务保持套接字连接打开。每当套接字连接关闭时。你可以产生一个异步任务。

# java - 安卓。Support4Demos 崩溃

> ID：14055709
> 
> 赞同：0
> 
> 时间：2012-12-27T13:46:30.537
> 
> 标签：java, android, sample

执行 Support4Demos 示例时出现运行时错误。

我正在尝试启动 Support4Demos 示例（在模拟器和设备上）。Eclipse 中没有错误，并且运行良好。如您所知，我首先应该选择类别（例如“Fragment”），然后选择子类别（例如“Tabs”）。在我选择了子类别后 - 应用程序崩溃并显示以下日志

```
12-27 16:39:51.796: E/AndroidRuntime(384): FATAL EXCEPTION: main
12-27 16:39:51.796: E/AndroidRuntime(384): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android.supportv4/com.example.android.supportv4.app.FragmentTabs}: java.lang.ClassNotFoundException: com.example.android.supportv4.app.FragmentTabs in loader dalvik.system.PathClassLoader[/data/app/com.example.android.supportv4-1.apk] 
```

我没有对源代码进行任何更改。可能是我错过了什么？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:08:17.847

您应该将 android-support-v4.jar 放到您项目的名为“libs”的目录中，然后刷新项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T13:19:15.870

如果您添加 android-supportv4.jar 它将起作用。以下是有关如何执行此操作的一些详细说明：

[http://developer.android.com/tools/extras/support-library.html#Downloading](http://developer.android.com/tools/extras/support-library.html#Downloading)

您需要按照该链接中的“t”的每个步骤进行操作。但是，有时说明不是很清楚。因此，我将尝试解释一些说明的含义：

*   我在以下目录中找到了需要添加的 .jar 文件：

    ```
     C:\Users\nadir\android-sdks\extras\android\support\v4 
    ```

    *   步骤说，在 Eclipse 中，右键单击 Package Explorer 中的 JAR 文件，选择 Build Path > Add to Build Path

让我向您展示我的计算机上的样子：

![在此处输入图像描述](../Images/ca0a3a488e53083c6b9dda2359bb07eb.png)

说明还说：选择构建路径>添加到构建路径，您可能不会发现它的措辞完全一样。这是我所做的，我（注意：我点击了“添加外部 JAR”按钮）：

![在此处输入图像描述](../Images/ae58b8f65b31c47ed1e147907d6f4857.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:52:22.037

确保 android-supportv4.jar 在您的类路径中。

jar 位于 /extras/android/support/v4/android-support-v4.jar 下

# c - 即使我正在保存，数据库也没有在 C 上输出

> ID：14055713
> 
> 赞同：1
> 
> 时间：2012-12-27T13:46:44.183
> 
> 标签：c, output

我正在做一个订单数据库，在这种情况下处理交易。

程序如下：

1.  首先，客户输入他的 ID。如果未找到，则退出到主菜单，否则继续（客户必须在数据库中注册一个 ID，该 ID 存储在另一个文件中）

2.  它询问他们要购买哪种产品（它询问产品名称 [这是讲师想要的名称]，如果没有找到它存在，否则它会继续

3.  它询问他们要购买多少，并检查库存是否足够。如果是，则继续，否则询问用户是否要输入另一个数字或退出

4.  自动计算价格并要求确认。如果客户确认，则保存完成，否则退出到主菜单

现在我的问题是，即使我的 STRUCT 正在保存，每当我在数据库中输出任何订单时（现在测试，因为我首先需要客户的最后一个订单）数据库总是显示为空。下面是编码[很长很抱歉，但我不明白哪里错了]，并且还将提供 List All 功能。

还提供了屏幕截图以更好地了解该程序的工作原理：

```
void customerOrder()
{
    int checkID = 0; //variable to hold the ID input
    char ch;
    char ch1;
    char ch2;
    char option;
    char tempName [100];
    int  order = 0;
    int  tempStock = 0;
    float tempPrice = 0;

    printf ("\n\n\n\n\t\t    ************* Add Customer Order *************\n \n \n");

    // ----------- LOADING OF THE 3 DATA FILES -----------//
    if ((ofp = fopen ("orders.dat","a+b")) == NULL)
    {
        fputs   ("Error! Cannot open orders.dat\n",stderr);
        system  ("PAUSE");
        orderMainMenu();
    }
    rewind (ofp);

    if ((cfp = fopen ("customers.dat","r"))== NULL)
    {
        fputs ("Error! Cannot open customers.dat\n",stderr);
        system ("PAUSE");
        orderMainMenu();
    }
    rewind (cfp);

    if ((pfp = fopen ("products.dat","r+b"))== NULL)
    {
        fputs ("Error! Cannot open products.dat\n",stderr);
        system ("PAUSE");
        orderMainMenu();
    }
    rewind (pfp);

    //-------- Confirm whether to start Order ------------//
    printf ("WARNING: In order for an Order to be made, the Customer must be in the Database\n");
    printf ("Are you sure you want to continue? Y or N\n");
    while (getchar() !='\n')
    {
    }
    ch1 = getchar ();
    if (ch1 == 'Y' || ch1 == 'y')
    {
        // ---- INPUT OF CUSTOMER ID --------------//
        printf ("\nPlease Enter ID: ");

            while (scanf ("%d",&checkID) == 0)
            {
                printf ("\n\nInvalid Input!!!\n");
                printf ("Either you have entered a Letter!!\n");
                printf ("Press 'Y' to enter another ID or any key to return to MainMenu\n\n");
                while (getchar()!='\n')
                    {
                    }
                option = getchar();
                if (option == 'Y' || option == 'y')
                {
                    printf ("\nPlease Enter Another ID Number:\n");
                }
                else
                {
                    printf ("\nReturning to Order Management Menu\n");
                    system ("PAUSE");
                    fflush(stdin);
                    orderMainMenu();

                }
            }
            //---------- CHECK WHETHER ID EXISTS OTHERWISE EXIT TO MENU --------------//
            while (fread (&c, STRUCTSIZEC,1,cfp) == 1)
            {
                if (c.ID == checkID)
                {

                    clrscr();
                    printf ("\n\n\n\n\t\t    ************* Add Customer Order *************\n \n \n");

                    // SHOWS WHICH ID IS BEING SERVED //
                    printf ("\n\nNew Order For ID: %d\n", c.ID);

                    // ASKS WHICH PRODUCT TO BUY //
                    printf ("\nWhich Product do you want to buy?\n\n");
                    printf ("WARNING! Product Name is CASE SENSITIVE:\n");

                    // INPUT NAME //
                    printf ("Product Name: ");
                    while (getchar() !='\n')
                    {
                    }

                    fgets  (tempName, 100, stdin);
                    while (fread (&p, STRUCTSIZEP,1,pfp)== 1)
                    {
                        if (strncmp (tempName,p.pName,sizeof(tempName)) == 0)
                        {

                    // --- SHOWING ID and WHICH PRODUCT CUSTOMER IS GOING TO BUY -- //
                    clrscr ();
                    printf ("\n\n\n\n\t\t    ************* Add Customer Order *************\n \n \n");
                    printf ("Order for ID: %d\n", c.ID);
                    printf ("Product Name: %s\n\n", p.pName);

                    tempStock = p.pStock;

                    printf ("How many do you wish to buy?\n");
                    printf ("Currently there is %d in Stock", tempStock);
                    printf ("Order:  ");

                    while (scanf ("%d",&order) == 0)
                    {
                        printf ("Invalid Order! Only Numbers are  allowed!\n");
                        while (getchar() !='\n')
                        {
                        }
                    }
                    //---- CHECK WEHTHER ORDER IS BIGGER THAN WHAT IS FOUND IN STOCK ----//
                    //---- IF YES ASK IF USER WANTS TO INPUT ANOTHER NUMBER OR EXIT ----//
                    while (order > tempStock)
                    {
                        printf ("There is not enough items in Stock to satisfy that quantity!\n");
                        printf ("Do you want to enter another quantity? 'Y' for yes, any key to return to Menu\n");
                        fflush (stdin);
                        ch2 = getchar();
                        if (ch2 == 'Y' || ch2 == 'y')
                        {
                            printf ("Please enter another quantity:\n");
                            scanf ("%d",&order);
                        }
                        else
                        {
                            printf ("Order Canceled! Returning to Main Menu");
                            system ("PAUSE");
                            fclose (cfp);
                            fclose (ofp);
                            fclose (pfp);
                            orderMainMenu();
                        }
                    }

                    printf ("\nTotal Price for this Order will be:\n");
                    tempPrice = (order * p.pPrice);
                    printf ("Total: %.2f\n", tempPrice);

                    // ---- SHOW THE TRANSACTION OF THE USER AND ASK WHETHER TO CONFIRM ---- //
                    clrscr();
                    printf ("\n\n\n\n\t\t    ************* Add Customer Order *************\n \n \n");

                    printf ("This is the Customer's Overview of Purchase:\n\n");
                    printf ("Customer's ID: %d\n",c.ID);
                    printf ("Customer's Product: %s",p.pName);
                    printf ("Order: %d\n",order);
                    printf ("Total Price: %.2f\n\n",tempPrice);

                    printf ("\n\n----------------------------------------\n\n");
                    printf ("Are you sure you of this transaction?\n");
                    printf ("Warning: After Confirming you cannot change the Order!\n");
                    printf ("Press 'Y' to confirm the Transaction otherwise press 'N' to cancel the order and return to Main Menu\n");

                    while (getchar() !='\n')
                    {
                    }

                    ch = getchar();
                    if (ch == 'N' || ch == 'n')
                     {
                         printf ("Transaction CANCELLED! Returning to Order Main Menu!\n");
                         system ("PAUSE");
                         orderMainMenu();
                     }
                     else if (ch == 'y' || ch == 'Y')
                     {
                         tempStock = (tempStock - order);
                         p.pStock = tempStock; //Updates the new stock number in Products' Database
                         fseek (pfp,-STRUCTSIZEP,SEEK_CUR);
                         fwrite(&p, STRUCTSIZEP,1,pfp);
                         fclose (pfp);

                         o.quantity = order;
                         o.cID = c.ID;
                         o.price = tempPrice;
                         strncpy(o.pName,p.pName, sizeof(p.pName));
                         o.timer = time(NULL);

                         fwrite (&o,STRUCTSIZEO,1,ofp);
                         fclose (ofp); //Closing of Files
                         fclose (cfp);
                         fclose (pfp);

                         printf("The Transaction Order saved is as follows:\n");
                         printf("ID: %d\nProduct: %sQuantity: %d\nPrice: %.2f\n",o.cID,o.pName,o.quantity,o.price);
                         printf("Transaction Made at: %s\n",asctime(localtime(&o.timer)));
                         system ("PAUSE");
                         orderMainMenu();
                     }
                }
            }
        }
    }
    }
    else
    {
        printf ("Returning to Order Main Menu\n");
        system ("PAUSE");
        orderMainMenu();
    }
} 
```

ListAll 方法：

```
void oListAll()
{
    order o;

    printf ("\n\n\n\n\t\t    ********** Current Products in the Database *******\n \n \n");

    //--------------- LOADING OF FILE ------------ //
    if ((ofp = fopen ("orders.dat","rb")) == NULL)
    {
        fputs ("Cannot open products.dat file!\n",stderr);
        printf ("Returning to Order Main Menu\n");
        system ("PAUSE");
        orderMainMenu();
    }
    rewind (ofp);

    // --------- START TO TRAVERSE THE DATABASE AND OUTPUT DATA -------- //
    printf ("Current Orders in the Database:\n");
    while (fread (&o, STRUCTSIZEO,1,pfp)==1)
    {
        printf (" Name: %s Price: %.2f\n In Stock: %d\n\n", o.pName, o.price, o.quantity);
    }
    system ("PAUSE");
    productMainMenu();

} 
```

这些是屏幕截图：

1.  [http://tinypic.com/r/110x7c2/6](http://tinypic.com/r/110x7c2/6)
2.  [http://tinypic.com/r/1446ya/6](http://tinypic.com/r/1446ya/6)
3.  [http://tinypic.com/r/315iy3s/6](http://tinypic.com/r/315iy3s/6)
4.  [http://tinypic.com/r/15xo4lt/6](http://tinypic.com/r/15xo4lt/6)
5.  [http://tinypic.com/r/2ze9wfr/6](http://tinypic.com/r/2ze9wfr/6)
6.  [http://tinypic.com/r/jtx8xw/6](http://tinypic.com/r/jtx8xw/6)

我知道这很长，但请耐心等待，我已经花了 4 个多小时试图弄清楚它有什么问题。谢谢一堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:02:01.520

您的`oListAll()`函数打开`FILE *ofp`，但从 读取`pfp`。尝试阅读`ofp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:43:01.357

由于这不是整个程序，我找不到问题，但我猜它与您的文件指针是全局变量有关。您应该将它们设为本地并始终确保它们正确关闭。

我会将 customerOrder() 函数分解为更小的函数。这将使您的代码更易于阅读、调试和修改。例如（这只是伪代码，您必须填写空白）：

```
void customerOrder()
{
    int checkId = getCustomerID(); // Checks the DB to see if user exists
    bool productExists = checkProduct(tempName); // Checks the DB to see if product exists
    int productCount = getProductCount(tempName);  // Checks the DB to get count of items in stock
    saveOrder(checkId, tempName, order);  // Save the order
}

// Save the order in DB. Ensures FILE pointers are closed when done
void saveOrder(int customerID, const char * productName, int count)
{
    order o;
    // Create the order here....
    FILE *ofp = fopen ("orders.dat","ab");
    if (NULL != ofp) {
        fwrite (&o,STRUCTSIZEO,1,ofp);
        fclose (ofp); //Closing of Files
    }
} 
```

# javascript - Javascript：数组成员变量在原型继承中不能用作实例变量

> ID：14055715
> 
> 赞同：1
> 
> 时间：2012-12-27T13:46:46.167
> 
> 标签：javascript, prototype, prototypal-inheritance

我正在尝试在我的代码中使用 javascript 继承。以下是相同的jsfiddle。 [http://jsfiddle.net/Fetsz/3/](http://jsfiddle.net/Fetsz/3/)

```
var baseObject = Object.create(Object, {  
    // this works as an instance variable for derived objects  
    name: {
        writable: true,
        configurable: true,
        enumerable: true,
        value: null    
    },   
    // this should act as instance variable for derived objects   
    values: {
        writable: true,
        configurable: true,
        enumerable: true,
        value: []    
    },
    displayAlert: {
        value: function (){
            alert("Alert from base object");
        }
    }
});

var derivedObj1 = Object.create(baseObject, {});    
var derivedObj2 = Object.create(baseObject, {});    

function displayValues (obj) {
    alert("values for " + obj.name + "\n" + JSON.stringify(obj.values));
};

$(document).ready(function(){
    derivedObj1.name = "Object 1";
    derivedObj2.name = "Object 2";

    derivedObj1.values.push("DO1 element");
    derivedObj2.values.push("DO2 element");

    derivedObj1.displayAlert();

    // should display values added only for derivedObj1
    displayValues(derivedObj1);

    // should display values added only for derivedObj2
    displayValues(derivedObj2);
}); 
```

我还检查了以下问题，它很好地解释了为什么我的代码不起作用。[Javascript继承：父数组变量保留值](https://stackoverflow.com/questions/9311032/javascript-inheritance-parents-array-variable-retains-value)

我需要在每个派生类中都有一个包含某些值的数组成员变量。我试图通过在基类中添加数组来实现相同的目的。正如上面问题中提到的，为了达到同样的效果，我必须向每个派生类添加数组成员。有没有其他方法可以在不修改每个派生类的情况下实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:59:21.497

当它们被创建时，两者都`derivedObj1.values`指向`derivedObj2.values`同一个数组对象。如果您首先使用 重新分配每个`derivedObj1.values = [];`，就像您重新分配`name`属性一样，您的代码将按预期运行。

`values`您可以创建一个`init`将数组添加到实例的方法，而不是将属性添加到原始 baseObject：

```
var baseObject = Object.create(Object, {  
    // this works as an instance variable for derived objects  
    name: {
        writable: true,
        configurable: true,
        enumerable: true,
        value: null    
    },   
    // this should act as instance variable for derived objects   
    init: {
        writable: true,
        configurable: true,
        enumerable: true,
        value: function(){
            this.values = [];
        }
    },
    displayAlert: {
        value: function (){
            alert("Alert from base object");
        }
    }
});

var derivedObj1 = Object.create(baseObject, {});
derivedObj1.init();
var derivedObj2 = Object.create(baseObject, {});
derivedObj2.init(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:06:57.367

如果您不希望它们被所有实例共享，则您的变量不能在原型上。您可以仅使用数组的属性定义创建第二个对象，并将其作为第二个参数传递给`Object.create`：

```
var arrDef = {
        values: {
            writable: true,
            configurable: true,
            enumerable: true,
            value: []
        }
}
var derivedObj1 = Object.create(baseObject, arrDef);    
var derivedObj2 = Object.create(baseObject, arrDef); 
```

# git - 管理 Git 登台服务器和实时服务器

> ID：14055723
> 
> 赞同：3
> 
> 时间：2012-12-20T00:56:15.717
> 
> 标签：git

我在开发一个新站点时一直在使用 Git/Beanstalk，它在将更改从本地服务器推送到暂存服务器方面创造了奇迹。我现在正处于想要使用生产服务器“直播”的地步，并且想知道正常的程序是什么（许多其他链接都没有涵盖这个......）。

I would like to start over "fresh" with this new Production Server instead of pushing the thousands of changes I've made over the past 6 months from the Staging server. Is there a way to do this? Do I simply create a new repo, get rid of the old one, etc.? How can I clear the history so that it simply takes what is on the staging server now and pushes that (or do I push from the local server). I use Tower so I know just enough about Git to almost not get in trouble (command line isn't my thing). Can you wrap everything up and say "This is Version 1.0, let's start from here" sort of thing?

Also, I was kind of lazy when it came to ignoring the cache files and images, etc. Can I easily add those .gitignore files after the fact?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:25:40.910

请注意，Beanstalk 只会部署您的文件的最新版本（或者如果您想要任何其他版本）。因此，当您添加生产服务器时，Beanstalk 会将当前存储库中的所有文件上传到生产服务器。

它不会通过变化来部署它，因此任何“历史”都不会减慢它的速度或使用任何空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:43:16.813

As Adrian says this isn't really an issue unless you've got large numbers of binary files in Git that shouldn't be (eg image uploads etc). Personally I wouldn't nuke my history as it's invaluable for debugging, though I'm pretty disciplined about what I commit and how often.

If you want to remove files from your repo that you have previously added, but want to keep a local copy do:

git rm --cached /path/to/remove

This will remove them from the current state of the index and but keep the actual file, which you can then add to your .gitignore. This is handy for files you *just* added to git by mistake, or for small files that aren't a concern for repo size or security.

However if you've previously committed the files, they will still be in your history, so your total repo size may be inflated (for example if you added a PSD or some large images in the past. If you want to completely remove a file from your history (also handy if sensitive data crept in somehow) you can do:

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch <NAME OF FILE>' --prune-empty --tag-name-filter cat -- --all 
```

This command will run the entire history of every branch and tag, changing any commit that involved the file you specify, and any commits afterwards. Commits that are empty afterwards (because they only changed the Rakefile) are removed entirely. **Warning:** It will overwrite your existing tags as well.

Once you've removed the file you may need to force pushing your changes with a:

```
git push <remote> <branch> --force 
```

But you want to be pretty sure you're doing the right thing at that point though, as you will overwrite the history on the remote as well, and at that point it really will be gone. There is an excellent, more detailed tutorial [here](https://help.github.com/articles/remove-sensitive-data) if you go down this route.

但是，当您使用 Beanstalk 时，这不是一个主要问题，因为它只会部署您的文件的最新版本，而不是您的整个 repo/history。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T03:39:46.120

Unless your git repository is really large (because you added a bunch of media files to it accidentally or something), there is pretty much no point doing this. The whole point of version control is to keep a history of changes, so you can look back and see when and why something was added. The reason why no tutorials cover this is because it's simply not how you would normally use git.

The only reason I could see you wanting to do this is if you added a whole bunch of files which don't belong in git (large media files, caches etc), which have since been deleted and are taking a long time to push to your production server (since you mentioned you forgot to start with a `.gitignore` file). All text files are compressed in git, so there is no need to worry about how many commits you have made (for comparison, the [PHP source code](https://github.com/php/php-src) has over 70,000 commits, dating back 14 years, the [linux kernel](https://github.com/mirrors/linux) has over 300,000 commits, and many other successful open source projects are like this too - so even if you have made 1000 commits, you are barely scratching the surface of what git can handle).

In that case, what you are talking about doing is wiping your entire history and just creating a new blank git repository. All you need to do is delete the `/.git` directory, and initialize a new one (from Tower, or the command line with `git init`).

Note if you create a fresh repository, then try to push to your staging server, you will need to use the `--force` option, otherwise it will complain that you are trying to rewrite history (which you are). Tower has a similar force checkbox when you click Push.

You can certainly add `.gitignore` files after the fact. However, keep in mind that this doesn't remove any files which you previously added to the repository. So it's always better to avoid committing files in the first place, otherwise they end up permanently in your repository history (there are ways to rewrite history and properly remove all traces of files even from old commits, but they are difficult and beyond the scope of this answer).

# arrays - Redim Preserve 给出“下标超出范围”

> ID：14055734
> 
> 赞同：2
> 
> 时间：2012-12-27T13:48:37.560
> 
> 标签：arrays, vba, excel, subroutine, preserve

我想要`Redim Preserve`一个数组，我不断收到错误“下标超出范围”。我知道只有最后一个维度的大小可以更改。这正是我正在做的。这里出了什么问题？数组的类型是`Variant`。

```
BmMatrix = Sheets("BENCH").Range("a60", ActiveSheet.Range("a60").End(xlDown).End(xlToRight))
'totaal gewicht per subdeel in array wegschrijven
Dim aBmMatrix()
aBmMatrix = BmMatrix
rij = UBound(BmMatrix, 1)
kol = UBound(BmMatrix, 2) + 1
ReDim Preserve aBmMatrix(rij, kol)
TotGewKol = UBound(aBmMatrix, 2)
For i = 2 To UBound(BmMatrix, 1)
    g = 0 'g wordt totaal gewicht van land bv
    If BmMatrix(i, bm_kolom) <> "x" Then
        For j = 2 To UBound(bmexnul, 1)
            If bmexnul(j, weightkolom) = BmMatrix(i, bm_kolom) Then g = g + bmexnul(j, 10)
        Next j
    End If
    aBmMatrix(i, TotGewKol) = g
    aBmMatrix(1, TotGewKol) = "Totaal gewicht" 'titel kolom
Next i 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:04:06.110

因为您使用范围的属性分配`aBmMatrix`数组`Value`，所以返回的数组具有每个维度的下限`1`。

当您稍后在不明确提供下限的情况下对其进行重新调整时，重新调整会尝试为每个维度分配默认的下限，即`0`.

您需要明确提供下限：

```
ReDim Preserve aBmMatrix(lbound(aBmMatrix,1) to rij, lbound(aBmMatrix,2) to kol) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-17T06:05:36.857

只有在仅更改数组的最后一个维度时才能使用 preserve。

# android - 如何防止使用 Server 重新创建 AlarmManager？

> ID：14055737
> 
> 赞同：0
> 
> 时间：2012-12-27T13:48:44.523
> 
> 标签：android, alarmmanager, android-pendingintent, repeatingalarm

我有这个服务在后台做其他事情，并且必须始终运行。在其 onCreate 上，我设置了一个每天发送一次电子邮件的警报。服务器没有在前台运行，所以有时它会被系统杀死，然后再次创建，当这种情况发生时，它会再次创建警报，并在每次发生时发送另一封电子邮件。所以我的问题是，如果它已经设置为在系统中重复，有没有办法阻止它触发警报？或者在服务中是否有另一个“地方”我可以创建一次警报并防止它被重新创建？

```
public class ObserverService extends Service {  

private String BABAS = "babas";

@Override
public void onCreate() {

    setRecurringAlarm(this);

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {      

    return START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {

    return null;
}

private void setRecurringAlarm(Context context) {
    Log.i(BABAS, "entrou no set alarme");

    Calendar updateTime = Calendar.getInstance();
    updateTime.setTimeZone(TimeZone.getDefault());//getTimeZone("GMT"));
    updateTime.set(Calendar.HOUR_OF_DAY, 00);
    updateTime.set(Calendar.MINUTE, 00);
    Intent downloader = new Intent("ALARME");//context, AlarmReceiver.class);
    PendingIntent recurringDownload = PendingIntent.getBroadcast(context,
            0, downloader, PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager alarms = (AlarmManager)        context.getSystemService(Context.ALARM_SERVICE);
    alarms.setInexactRepeating(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), AlarmManager.INTERVAL_DAY, recurringDownload);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:10:21.770

如果该代码是您的服务所做的一切，那么您可以完全摆脱该服务。

该服务唯一要做的就是每天在警报管理器上安排一次广播，为什么不直接从活动中安排呢？

**编辑：**

鉴于您的评论，我的原始答案仍然是：AlarmManager 上设置的警报是永久性的，直到设备关闭或重新启动。因此，您可以通过设置第一个警报`Activity`并将其标记为活动`SharedPreferences`。创建一个`BroadcastReceiver`接收 onBoot 事件，此接收器将检查`SharedPreferences`警报是否处于活动状态，如果是，则在 AlarmManager 上重新注册。

您的服务仍然执行相同的 ContentObserver 内容，但与重复的 AlarmManager 事件没有关联。

我认为这将是最干净的解决方案。

或者（但我认为这不是一个好的/干净的解决方案），您可以使用`AlarmManager.cancel()`删除现有的 PendinIntent，然后重新触发它

[http://developer.android.com/reference/android/app/AlarmManager.html#cancel(android.app.PendingIntent](http://developer.android.com/reference/android/app/AlarmManager.html#cancel(android.app.PendingIntent) )

# svn - svn树冲突

> ID：14055738
> 
> 赞同：1
> 
> 时间：2012-12-27T13:48:48.080
> 
> 标签：svn

我不断遇到树冲突，即使阅读所有线程，我似乎也无法理解原因。我的背景是清晰的，所以 svn 对我来说是新的。当我将树冲突与任何 clearcase 活动联系起来时，它没有意义。以下是导致问题的我的情况。

我有树干、分支和标签区域的标准 svn 结构。主干是我们的生产代码，开发人员不在这里工作。

情况是这个开发人员在分支区域创建了一个名为 fix1 的目录，并从主干复制文件以在该区域工作。工作完成后，发布组将更改合并回主干。这工作正常

下一个开发人员在分支下创建一个名为 fix2 的目录，并从主干获取文件的副本（在上一个示例中由 rm 刚刚合并回来），当他的更改完成时，这将被合并回主干，我们得到一个树冲突。

在所有情况下，开发人员在他的工作区域都做了一个 svn up，而 rm 人在合并之前做了一个 svn up

在这两种情况下， rm 人都将目录更改为 trunk 并执行了 svn merge ../branches/fix1 或 svn merge ../branches/fix2

问题是三个方面

是什么导致了树冲突？

当我解决冲突（svn resolve -R --accept=working）时，我没有将文件的内容合并回来？

此类工作的推荐方法是什么？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:04:06.270

问题可能来自您创建分支的方式：

> 该开发人员在分支区域创建了一个名为 fix1 的目录，并从主干复制该文件以在该区域中处理。

这不是应该做的。您不应该手动复制文件。相反，您应该从主干创建一个分支，将您的工作副本切换到该分支，进行修改和提交。每隔一段时间，当分支上的工作完成时，您应该从主干合并到分支，以将主干的所有更改合并到分支中。

然后你应该切换到主干，将分支重新集成到主干中，提交并删除分支。

这在[SVN 书中](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.commonpatterns.feature)有更详细的解释。

# scala - 在 scala 上编写 netbeans RCP 应用程序

> ID：14055740
> 
> 赞同：2
> 
> 时间：2012-12-27T13:49:18.547
> 
> 标签：scala, netbeans-7, netbeans-platform

有没有人尝试在 scala（而不是 Java）中编写 Netbeans RCP 应用程序。我的问题的原因是Scala中有一个包装JavaFX的API。同样，是否有任何 API 可用于开发用 scala 编写的基于 Netbeans RCP 的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:49:21.180

对于包装 JavaFX，有[ScalaFX](http://code.google.com/p/scalafx/)。Netbeans 富客户端平台并不小，Scala 包装器对我来说似乎不切实际（我不知道有）；只需从 Scala 调用 Java 代码。Java/Scala 互操作性通常不错，所以虽然您可能偶尔需要编写一点 Java 作为接口，但您几乎可以将 Scala 用于任何 Java 项目。

（不过，让构建过程正常工作可能有点棘手；希望在那里投入一点时间。）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-27T15:21:56.157

我个人没有看到任何有用的用例来使用 JVM 语言开发 NB RCP/Plugin。注意它自己提供了一个 IDE，您可以在其中使用拖放功能、代码生成、基于注释的 IDE 来创建它。如果您想在编写 NB RCP 时使用语法糖，那么我觉得我们已经拥有一个好的 IDE 是浪费时间。JVM 不会对现有环境产生太大影响。

如果你发现你需要一个像 Scala 生态系统中的模块化、基于 GUI 的框架那样的 NB，我个人认为编写绑定不会解决这个问题。Scala 需要像 Griffon 这样的框架。

# typo3 - Typo3 FCE 引用类属性中字段 uri 的文件类型

> ID：14055741
> 
> 赞同：0
> 
> 时间：2012-12-27T13:49:37.547
> 
> 标签：typo3

x我想将插入文件的文件类型插入到 aa href 类中：

一个 href 类“icon-filetype-”

我现在有这样的东西：

```
10 = TEXT
10.field = field_uri
10.wrap = icon-filetype-| 
```

但比我在课堂上得到洞网址：D

谢谢你的时间

（顺便说一句，我使用这些网站作为参考，所以也许我给你一个开始： [Typo3 FCE 引用容器字段内的字段](https://stackoverflow.com/questions/12913835/typo3-fce-refer-a-field-inside-a-container-field) 和[http://typo3.org/extension-manuals/rs_linklayout/1.3.1/view/ 1/3/](http://typo3.org/extension-manuals/rs_linklayout/1.3.1/view/1/3/) )

这是我使用的映射：

```
<ul class="section-container">
<li>
<a class="" href="#" target="_blank"><span>Item 1</span><span class="size"></span></a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:43:18.827

没有测试这段代码：

```
10 = TEXT
10.field = field_uri
10.split {
   token = .
   # if you get an different part or some parts added, this optionsplit is wrong
   cObjNum = |*||*| 1 || 2 
   # render nothing means remove this part
   1 = TEXT
   1.value =
   # render only the filetype
   2 = TEXT
   2.current = 1
}
10.wrap = icon-filetype-| 
```

# actionscript-3 - Flex Dropdownlist dataprovider 在刷新时重置

> ID：14055746
> 
> 赞同：0
> 
> 时间：2012-12-27T13:50:06.240
> 
> 标签：actionscript-3, apache-flex, sorting, arraycollection, dataprovider

我有几个下拉列表控件，它们共享相同的数据提供者（相同的参考）。

我已经为排序函数覆盖了 set dataprovider 方法。（下面的代码）。问题是，当我将此共享 dataprovider 设置为新的下拉列表时，共享 dataprvider 的所有现有下拉控件都将被取消选择（丢失其先前选择的值）。

```
 override public function set dataProvider(value:IList):void{
            if(value is ArrayCollection){
            var sort:Sort=new Sort();
            var sortField:SortField = new SortField();
            sortField.numeric=false;
            sort.fields=[sortField];

            ArrayCollection(value).sort=sort;
            ArrayCollection(value).refresh();
        }
        super.dataProvider=value; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:03:57.647

有很多问题在组件之间共享 dataProvider。我们已经在许多使用我们的 AutoCompleteComboBox 的客户中遇到过这种情况。

您可以轻松地使用相同的源，但为每个 dataProviders 使用不同的——单独的——集合。

```
var dataProvider1 :ArrayCollection = new ArrayCollection(someArray);
var dataProvider2 :ArrayCollection = new ArrayCollection(someArray);
var dataProvider3 :ArrayCollection = new ArrayCollection(someArray); 
```

每个集合只是基本源的包装。排序一个不会影响其他任何一个，使您的其他 ComboBoxes 或 DropDownLists 保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:19:15.773

我对此没有进行任何研究，但出现了两个问题/想法：

1.  如果您从字面上使用对相同数组集合的相同引用，则不需要多次对该数组进行排序（实际上您通过多次分配相同的数组集合来做到这一点）
2.  如果它只有单选下拉菜单，那么有一个简单的解决方案：

    ```
    var oldSelected : TypeOfItem = selectedItem as TypeOfItem;
    // do the sort (like in your code)
    super.dataProvider=value;
    selectedIndex = getItemIndex(oldSelected); 
    ```

# c# - 在C#中关闭该文件进程后如何删除文件

> ID：14055748
> 
> 赞同：2
> 
> 时间：2012-12-27T13:50:08.563
> 
> 标签：c#, file

我想删除一个文件。但它不能这样做，因为它使用另一个进程。错误信息 ：

```
"The process cannot access the file '*file path\4.JPG*' because it is being used by another process." 
```

我的程序的描述是，假设我将图像复制到一个公共文件中。然后如果我想从公共文件夹中删除这个图像，则会生成错误消息。file.Delete(..) 在我的代码中不起作用。

```
 private void btnDelete_Click(object sender, EventArgs e)
    {
        DialogResult result = MessageBox.Show("Are you sure do you want to delete this recorde?","Delete",MessageBoxButtons.YesNo,MessageBoxIcon.Question);

        if (result.ToString().Equals("Yes"))
        {
            string deleteQuery = "DELETE FROM dbo.fEmployee WHERE EmpId=@empId";
            SqlParameterCollection param = new SqlCommand().Parameters;
            param.AddWithValue("@empId",cmbEmpIdD.SelectedValue);
            int delete = _dataAccess.SqlDelete(deleteQuery,param);
            if (delete>0)
            {
                **ImageDeletion();**
                MessageBox.Show("Recorde Deleted sucessfully.","Delete",MessageBoxButtons.OK,MessageBoxIcon.Exclamation);
            }
            else if (delete.Equals(0))
            {
                 MessageBox.Show("Recorde is not deleted.","Falied",MessageBoxButtons.OK,MessageBoxIcon.Exclamation);
            }
        }
    }

    private void ImageDeletion()
    {
        string ext;
        ext = Path.GetExtension(txtImgPathD.Text.Trim());
        if (!string.IsNullOrWhiteSpace(ext))
        {
            string path = appPath + @"\" + @"EmployeeImages\" + cmbEmpId.SelectedValue.ToString().Trim() + ext;
            PictureBox.InitialImage = null;
            PictureBox.Invalidate();
            PictureBox.Image = null;
            PictureBox.Refresh();
            File.Delete(path);
        }
    } 
```

请给我一个删除文件部分的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:53:30.043

此处的错误消息告诉您所有您需要知道的信息 - 某些东西保留了您的文件，因此您无法删除它。

您是否在应用程序的其他地方打开了文件，并且没有正确关闭文件流，也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:55:26.463

尝试将图像放置在`PictureBox`.

```
PictureBox.Image.Dispose(); 
```

# posix - S_IRUSR中的“我”是什么意思

> ID：14055755
> 
> 赞同：20
> 
> 时间：2012-12-27T13:50:56.613
> 
> 标签：posix

S_IRUSR 是 posix 的 sys/stat.h 中的一个宏常量。它代表用户读取权限位。

前缀 S_ 可能代表 RUSR 的“状态”，可能是用户的读取。但是“我”是什么意思？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-18T01:13:18.477

该命名具有历史意义……可以追溯到 UNIX 的早期。“S”代表 STAT，“I”代表 INODE（POSIX 本身在基本原理之外没有真正使用的术语），“R”代表 READ，“USR”代表 USER。

索引节点确实得到了一些提及，并且统计结构还包括“st_ino”，该标准将其描述为“文件序列号”。在许多 POSIX 实现中，inode 是一种数据结构，其中包含文件的所有元数据（其中大部分是 stat() 调用读取的内容）。

（来自维基百科：）将这些指定为“i”节点的原因尚不清楚。当被问到时，Unix 先驱丹尼斯·里奇回答说：

> 事实上，我也不知道。这只是我们开始使用的一个术语。“索引”是我最好的猜测，因为稍微不寻常的文件系统结构将文件的访问信息存储为磁盘上的平面数组，所有分层目录信息都在此之外。因此，i-number 是该数组中的一个索引，i-node 是该数组的选定元素。

（第 1 版手册中使用了“i-”符号；连字符逐渐被去掉。）

# java - 带/不带 validate() 的 Java JApplet

> ID：14055757
> 
> 赞同：0
> 
> 时间：2012-12-27T13:51:08.290
> 
> 标签：java, swing, layout-manager

我有这段代码并阅读了**validate**可以指的是布置容器的子组件。“布局相关的更改，例如设置组件的边界，或**将组件添加到容器中**，**会自动使容器失效**。” （来源：javadoc）。

但是，我认为保留**validate()**或从这段代码中删除它之间**没有任何区别。**你能给我一个令人信服的例子，你可以在两种情况下（有或没有验证）看到不同的行为来证明一个观点吗？任何其他意见/建议表示赞赏。

 **```
public class Sw1 
extends JApplet
{
    JLabel lbl;

    public void init() 
    {
        lbl = new JLabel ("a label");  
        JPanel pan = (JPanel) getContentPane ();
        pan.add(lbl);
        validate();
    }
} 
```

这是我打算按下按钮添加标签后的程序。当我按下按钮时它会呈现一个异常：

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class Sw_test 
extends JApplet
implements ActionListener
{
    JLabel lbl;
    JButton bt ;
    JPanel pan ;
    JLabel l;

    public void init() 
    {
        lbl = new JLabel ("label 1");  
        bt = new JButton ("go ahead, press me");
        bt.addActionListener(this);

        JPanel pan = (JPanel) getContentPane ();
        pan.setLayout(new FlowLayout());
        pan.add(lbl);
        pan.add(bt);

        validate();
    }

    public void actionPerformed(ActionEvent ev)
    {
        l = new JLabel("new label");
               pan.add(l);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:54:05.600

如果在面板初始化并使其可见*后将*组件添加到面板，则需要调用它。

尝试向您的小程序添加一个按钮，然后单击该按钮，为小程序添加一个新标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:55:53.150

我将引用 API：

> validate 方法用于使容器重新布置其子组件。在容器显示后修改此容器的子组件（添加到容器或从容器中删除，或更改布局相关信息）时，应调用它。

如您所见，如果您在初始化后修改布局，这一点很重要。这就是为什么你看不到任何区别的原因

顺便说一句：这是你的例子：

```
public class TestFrame extends JFrame{

private JButton b = new JButton();

public TestFrame() {
    this.setLayout(new GridLayout(5,5));
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.add(b);
    b.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            TestFrame.this.add(new JLabel("whatever"));
            //try it with and without
            //validate();
        }
    });
    this.setSize(300, 300);
    this.setVisible(true);
}

public static void main(String[] args) {
    new TestFrame();
}
} 
```**

# javascript - jquery $ 如何在 javascript 中既充当对象又充当函数？

> ID：14055758
> 
> 赞同：4
> 
> 时间：2012-12-27T13:51:16.877
> 
> 标签：javascript

> **可能重复：**
> [jQuery 如何表现得像一个对象和一个函数？](https://stackoverflow.com/questions/8734115/how-can-jquery-behave-like-an-object-and-a-function)

在 jquery 中，我们可以使用 $ 作为函数以及命名空间。例如，这两个用例都是有效的。

1.  `$("div").html("<b>Wow!</b> Such excitement...");`
2.  `var trimmed = $.trim(someString);`

一个标识符 $ 如何同时充当**对象**和**函数**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:55:00.403

首先要做的事情：（`jQuery`或其别名`$`）是一个*函数*。这非常重要，因为函数是 JavaScript 中的“一等”对象。而且由于它们本身就是对象，因此它们能够像任何其他对象一样被赋予属性和方法。例如：

```
var f = function() {};

f.h = function(x) {
    console.log(x);
}; 
```

这就是让 jQuery 发挥其魔力的原因。此外，通过使用继承，我们有可能像您在第一个示例中展示的那样*链接方法。*根据 which 的值`$(selector)`返回一个 jQuery“接口”（技术上） ，从中我们可以运行诸如、和等等之类的方法。`[object Object]``selector``.html``.css``.toggle`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T13:53:13.413

它不是。

`$`只是**一个**功能。

它也有可以使用的原型函数，因为一个函数*可以*有其他函数作为它的一部分（因为一个函数本身就是一个对象）。

* * *

你可以做：

```
console.log( Object.getOwnPropertyNames($) ); 
```

查看所有附加的功能（和属性）。

# java - 理解 Java 中泛型的语法

> ID：14055761
> 
> 赞同：0
> 
> 时间：2012-12-27T13:51:45.627
> 
> 标签：java, hierarchy, class-hierarchy, generics

我开始学习 Java 泛型。而且我对泛型语法及其含义有一些误解。如果我的问题看起来太琐碎，我请求理解。

1.  你可以写：

    ```
    public class MyClass<SomeClass> {} 
    ```

2.  你可以写：

    ```
    public class MyClass<C extends SomeClass> {} 
    ```

3.  你也可以写：

    ```
    public class MyClass<? extends SomeClass> {} 
    ```

这些案例有什么**区别**？

1.  第一种情况对我来说非常清楚：您可以使用*SomeClass*的*实例和他的子*类的实例作为 MyClass 的类参数。
2.  我认为在这种情况下你只能使用*MyClass 的子类的实例*
3.  相同：只使用MyClass 的子类的*实例作为 MyClass 的类*参数。

我的猜测是对还是错？特别是第二种和第三种情况的使用有什么区别？

提前感谢您的解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:00:07.033

那么不同的是你不能`?`在泛型类声明中使用

```
public class MyClass<? extends SomeClass> {} // this isn't valid 
```

上述声明导致编译器错误。

[**从文档：**](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

> 泛型类使用以下格式定义：
> 
> class name { /* ... */ } 类型参数部分，由尖括号 (<>) 分隔，跟在类名之后。它指定类型参数（也称为类型变量）T1、T2、...和Tn。

```
public class MyClass<C extends SomeClass> {} 
```

在这个声明`C`中是一个**类型参数**，它可以是 SomeClass 或其任何子类的类型。

**例子 ：**

```
Class SomeOtherClass extends SomeClass {
}

MyClass clazz = new MyClass<SomeOtherClass>();
MyClass clazz = new MyClass<SomeClass>(); 
```

# ruby - 使用 Rails 3 配置分类

> ID：14055765
> 
> 赞同：0
> 
> 时间：2012-12-27T13:52:02.010
> 
> 标签：ruby, ruby-on-rails-3, categorization

我希望能够为我的用户分配类别（最多 2 个，允许 1 个）。我希望此用户的任何帖子仅从同一类别列表中分配一个类别（在我的应用程序中称为职业）。

目前，我已经对其进行了配置，以便我可以为每个分配 1，在用户、帖子和专业模型之间具有简单的 belongs_to 和 has_many 关联。这适用于帖子，因为它只需要 1 个专业分配，但对于用户来说，它限制了 2 个的能力。

用户的视图有两个下拉列表，由专业中的项目填充。我可以选择两种不同的职业，但只有一种保留了该职业的价值，我希望它保留这两种职业，或者如果只选择一种，则只接受一种。我的主要限制是，在用户数据库中，只有一个职业列引用了职业 ID。无法复制职业栏，如何设置才能添加第二个职业栏？

或者，我应该如何改变我的数据库设计和模型来完成这个？

用户.rb：

```
 class User < ActiveRecord::Base
      devise :database_authenticatable, :registerable,
             :recoverable, :rememberable, :trackable, :validatable

      attr_accessible :email, 
                      :password, 
                      :password_confirmation,
                      :remember_me, 
                      :first_name, 
                      :last_name, 
                      :profile_name, 
                      :full_bio, 
                      :mini_bio,
                      :current_password,
                      :photo,
                      :profession_id

      attr_accessor :current_password

      validates :first_name, :last_name, :profile_name, presence: true

      validates :profile_name, uniqueness: true,
                               format: {
                                  with: /^[a-zA-Z0-9_-]+$/
                               }

      has_many :posts
      belongs_to :profession

      has_attached_file :photo,
                        :default_url => 'default.png'

      def full_name
        first_name + " " + last_name
      end
    end 
```

post.rb:

```
 class Post < ActiveRecord::Base
      attr_accessible :content, :name, :user_id, :profession_id
      belongs_to :user
      belongs_to :profession

      validates :content, presence: true,
                  length: { minimum: 2 }

      validates :name, presence: true,
                  length: { minimum: 2 }

      validates :user_id, presence: true

    end 
```

职业.rb：

```
 class Profession < ActiveRecord::Base
      attr_accessible :name

      has_many :posts
      has_many :users
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:42:28.177

在这种情况下，`has_many :through`您的用户和专业的关联可能效果最好。使用诸如“Specialty”之类的附加模型，您可以对这种关系进行建模，如下所示：

```
class User < ActiveRecord::Base
  has_many :specialties
  has_many :professions, :through => :specialties
end

class Profession < ActiveRecord::Base
  has_many :specialties
  has_many :users, :through => :specialties
end

class Specialty < ActiveRecord::Base
  belongs_to :user
  belongs_to :profession
end 
```

然后，您可以在视图中使用[nested_form gem](https://github.com/ryanb/nested_form)来接受与该用户关联的职业。

# tomcat - 使用 Ant 将简单的 Web 应用程序部署到 Tomcat

> ID：14055767
> 
> 赞同：3
> 
> 时间：2012-12-27T13:52:08.560
> 
> 标签：tomcat, deployment, ant

我正在尝试部署由一个 Web servlet 和一个 JSP 组成的简单 Web 应用程序。我没有使用任何框架，例如 Spring 或任何东西，只是一个*helloWorld*网络应用程序。

我使用 Ant 来进行部署。但是当我运行我的部署目标时，它给了我：

> java.lang.NoClassDefFoundError: org/apache/tomcat/util/buf/B2CConverter

我正在使用 Tomcat 7，并且我已将 Tomcat lib 目录下的所有库和 *tomcat-juli.jar*也包含在我`webcontent/web-inf/lib`的中。

我的 Ant 文件目标如下：

```
<!-- Configure the directory into which the web application is built -->
    <property name="build" value="${basedir}/build" />
    <property name="lib.dir" value="${basedir}/WebContent/WEB-INF/lib" />
    <property name="src.dir" value="${basedir}/src" />

    <!-- Configure the context path for this application -->
    <property name="path" value="/myapp" />

    <!-- Configure properties to access the Manager application -->
    <property name="url" value="http://localhost:8080/manager/text" />
    <property name="username" value="gbids" />
    <property name="password" value="tomcat" />

    <!-- Configure the custom Ant tasks for the Manager application -->
    <taskdef name="deploy" classname="org.apache.catalina.ant.DeployTask" />
    <taskdef name="list" classname="org.apache.catalina.ant.ListTask" />
    <taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask" />
    <taskdef name="findleaks" classname="org.apache.catalina.ant.FindLeaksTask" />
    <taskdef name="resources" classname="org.apache.catalina.ant.ResourcesTask" />
    <taskdef name="start" classname="org.apache.catalina.ant.StartTask" />
    <taskdef name="stop" classname="org.apache.catalina.ant.StopTask" />
    <taskdef name="undeploy" classname="org.apache.catalina.ant.UndeployTask" />

<!-- Class path -->
    <path id="project.classpath">
        <fileset dir="${lib.dir}">
            <include name="**/*.jar" />
            <include name="**/*.zip" />
        </fileset>
    </path>

    <!-- Executable Targets -->
    <target name="compile" description="Compile web application">
        <javac srcdir="${src.dir}" destdir="${build}/classes" nowarn="on">
            <classpath refid="project.classpath" />
        </javac>

    </target>

    <target name="makeWar" depends="compile">
        <delete file="${build}${path}.war"/>
        <war destfile="${build}${path}.war" webxml="WebContent/WEB-INF/web.xml">
            <fileset dir="WebContent" />
            <lib dir="WebContent/WEB-INF/lib" />
            <classes dir="build/classes" />
        </war>
    </target>

    <target name="deploy" description="Install web application" depends="makeWar" >
        <deploy url="${url}" username="${username}" password="${password}" path="${path}" war="${build}${path}.war" />
    </target> 
```

而且我的*tomcat-users.xml*文件中也有以下内容：

```
 <role rolename="manager-gui"/>
  <role rolename="admin-gui"/>
  <role rolename="manager-script"/>

  <user username="manager" password="tomcat" roles="manager-gui"/>
  <user username="admin" password="tomcat" roles="admin-gui"/>
  <user username="gbids" password="tomcat" roles="manager-script"/> 
```

谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:37:49.090

我找到了解决方案。我试图根据 Tomcat 文档中给出的指南来完成这项任务。据他们说，他们只要求将“catalina-ant.jar”文件复制到 Ant lib 目录。

但是，一旦我将 'tomcat-coyote.jar' 、 'tomcat-juli.jar' 、 'tomcat-util.jar' 文件与 'catalina-ant.jar' 文件一起复制到 Ant 的*lib*目录中，它对我来说非常有效.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:38:58.947

你需要对你`<taskdef>`的 s 更聪明：

```
<property name="catalina.home" value="/path/to/tomcat" />
<path id="tomcat.classpath">
  <fileset dir="${catalina.home}" includes="lib/*.jar" />
</path>

.
.
.

<taskdef name="deploy"
         classname="org.apache.catalina.ant.DeployTask"
         classpathref="tomcat.classpath" /> 
```

您的项目`WEB-INF/lib`目录中不应该有任何 Tomcat 的 JAR 文件：将它们全部删除。

最后，从 ant 获取更多信息很容易：运行`ant --help`以查看您有哪些调试选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T11:12:04.207

这听起来像是一个运行时错误。缺少的类是“ [tomcat-coyote.jar](http://search.maven.org/#search%7Cga%7C1%7Cg%3a%22org.apache.tomcat%22%20AND%20fc%3a%22org.apache.tomcat.util.buf.B2CConverter%22) ”的一部分，您确定它已正确复制到您的战争文件中吗？

检查 wAR 文件内容如下：

```
unzip -t myapp.war | more 
```

jars 应该都位于“WEB-INF/lib”目录下。其他任何地方都意味着它们不包含在类路径中，并且会解释这个错误

# javascript - jquery捕获加载函数的url

> ID：14055770
> 
> 赞同：0
> 
> 时间：2012-12-27T13:52:22.397
> 
> 标签：javascript, jquery, jquery-load

我有一个带有链接的 html 页面：

**page.html**（它的网址是`http://myhost/home/`）

```
<a href="javascript:void(0)" id="first">Link</a> 
```

**脚本.js：**

```
$(function() {
    $('#first').click(function() {
         $('#some_div').load('home/new/new_page.html');
         var pathname = window.loaction.pathname;
         alert(pathname);
    }
}); 
```

当我单击 中的链接时`page.html`，`new_page.html`正在加载`#some_div`，并且可以正常工作。如何捕获加载函数的 url，所以当我像上面的示例中那样提醒它时，我会得到`'/home/new/'`而不是`'/home/'`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:00:09.857

改变

```
var pathname = window.location.pathname; 
```

至

```
var pathname = window.loaction.pathname; 
```

# css - 为菜单 PNG 图像动态着色

> ID：14055771
> 
> 赞同：0
> 
> 时间：2012-12-27T13:52:23.410
> 
> 标签：css, png

我正在使用现代菜单样式，其中包括左右两侧的 2 个 PNG 图像，为菜单提供 3d 外观和感觉。

由于我想让我的网站样式可定制，我还需要这些图像来根据客户对颜色的需求来改变它们的颜色。

我的问题是我不知道如何做到这一点。

我发现了一个带有笑脸的东西，我的意思是，但在我的情况下，它不是一个 css 创建的笑脸，而是一个 png 图像（[http://lab.artlung.com/css3-smiley/](http://lab.artlung.com/css3-smiley/)）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:40:00.643

使用边框半径设计圆角非常容易。要创建小三角形，您可以制作一个 css 三角形（[请参阅this fiddle](http://jsfiddle.net/TccZ9/)），您可以使用一些渐变来设置该三角形的样式，以获得 3d 效果！只需将小三角形放在圆角矩形的左下角，瞧！这是没有 png 的 3D 效果！

三角形代码：

CSS：

```
.arrow-left {
margin-left:50px;
width: 0; 
height: 0; 
border-top: 50px solid transparent;
border-bottom: 50px solid transparent; 

border-right:50px solid blue; 
transform:rotate(135deg);
-ms-transform:rotate(135deg); /* IE 9 */
-moz-transform:rotate(135deg); /* Firefox */
-webkit-transform:rotate(135deg); /* Safari and Chrome */
-o-transform:rotate(135deg); /* Opera */ 
```

}​</p>

HTML

```
<div class="arrow-left"></div>​ 
```

# php - PHP 致命错误：在非对象上调用成员函数 getUser()

> ID：14055773
> 
> 赞同：0
> 
> 时间：2012-12-27T13:52:31.617
> 
> 标签：php, facebook

我是 OOP 的新手，并试图从 Facebook WP 插件中的父类中调用一个函数，我从父类的文件中得到错误

我的代码是：

```
class check_fb extends Wdfb_Model {
function __construct() {
            Wdfb_Model::get_wp_user_from_fb();
    }
}

//REST OF THE CODE 
```

这是类[http://codepad.org/d7MtD9i7](http://codepad.org/d7MtD9i7)的代码，知道它是 WP facebook 插件中的一个类，并且在该插件中运行良好

通常我要做的是`$this->fb->api('/me');`在我的类中定义属性以获取用户 FB 信息，因为我无法声明已经从插件声明的类 FACEBOOK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:49:26.547

将“Wdfb_model::”更改为“$this->”：

```
$this->get_wp_user_from_fb(); 
```

# html - 为什么程序不能正常运行？

> ID：14055779
> 
> 赞同：-5
> 
> 时间：2012-12-27T13:53:06.407
> 
> 标签：html, asp-classic

我是 html 和 asp 的初学者。我应该在记事本中编写程序代码。我希望程序在我单击随机按钮时生成一个随机数，当我单击检查按钮时，程序会比较我的猜测和随机数。我写了这段代码，但是在运行程序时，不显示随机数也不进行比较。为什么？

```
<html>
<head>
<script>

var numOfGuess=new number(0);
var numRandom;
var num;

function RandomNum(){
 numRandom=new number(math.floor(math.random()*100));
 response.write(numRandom);
 numOfGuess=0;
}

 fucntion Guess(){
 num=document.getElementById("guess");
 var alert=""; 
 if(num.value<numRand){
   alert="grater than!";
   numOfGuess++;
 }
 esle if (num.value>numRand){
  alert="lower than!";]
  numOfGuess++;
 }
 else{
  alert="equal!";
  numOfGuess++;

}
document.getElementById("message").innerHtml=alert;
}
</script>
</head>

<body>

<input type="text" id="guess">
<input type="submit" onClick='RandomNum()' value="Random">

<p id="message"></p>

<input type="submit" onClick='Guess()' value="Check">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:15:17.280

编程时需要严谨。

您的代码中有一些语法错误，例如：

*   **在声明 Guess 函数时使用函数而**不是****函数**。**
***   您将 numRandom 声明为全局变量，但您使用的是 numRand，不幸的是，这两个变量根本不一样。此外，没有声明 numRand（这是逻辑，因为它应该是 numRandom）。*   您正在使用 innerHtml 而不是**innerHTML**（区分大小写）以帮助用户找到正确的数字。**

 **也许还有一些我已经忘记的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:01:53.463

就像 AnthonyLeGovic 说的：

> 编程时需要严谨

这是您要查找的内容：

```
<html>
<head>
    <title>test</title>
    <script language="javascript">
        var numRand = 0;
        var numGuess = 0;
        var numTry = 1;

        function setRand(){
            numRand = Math.floor((Math.random()*100)+1);
            numTry = 0;
            alert("done");
        }

        function guess(){
            var msg = document.getElementById("message");
            numGuess=Number(document.getElementById("guess").value);
            if(numGuess>numRand){
                msg.innerHTML = "lower than!";
            }
            else if(numGuess<numRand){
                msg.innerHTML = "grater than!";
            }
            else {
                msg.innerHTML = "equal! tried " + numTry +"times";
            }
            numTry++;
        }
    </script>
</head>
<body>
    <input type="text" id="guess" />
    <input type="button" onclick="setRand()" value="Random" />
    <p id="message"></p>
    <input type="button" onclick="guess()" value="Check" />
</body> 
```

不要忘记`language="javascript"`在您的脚本标签中，否则您的脚本将无法正常工作！**

# php - 带有 gif 文件的 php md5_file 函数？

> ID：14055780
> 
> 赞同：0
> 
> 时间：2012-12-27T13:53:07.123
> 
> 标签：php, image, dynamic, md5, gif

我发现当我使用php`md5_file`函数获取`md5 checksum`图像时，校验和每次都不一样。

是 gif 图像还是`md5_file()`动态功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:44:06.350

除非文件内容发生变化，否则这是不可能的

```
md5_file("path/file"); 
```

如果`file`保持相同，则每次输出将是相同的哈希

# android - android onMarkerClick 在 InfoWindow 隐藏在 GoogleMap Google Maps Android API v2 后不调用

> ID：14055785
> 
> 赞同：4
> 
> 时间：2012-12-27T13:53:29.433
> 
> 标签：android, map, google-maps-markers

我将 Google Maps Android API v2 集成到我的应用程序中，并且在 GoogleMap 中的标记有奇怪的行为。在 InfoWindow 隐藏后不会调用 OnMarkerClickListener#onMarkerClick(Marker marker)。它不取决于我如何显示 InfoWindow (既不是**marker.showInfoWindow()**也不是

```
@Override
public boolean onMarkerClick(final Marker marker) {
.....
return true;} 
```

不起作用。在我通过触摸或更改缩放来更改相机位置后，它会工作一次。我在 GoogleMapDemo 中看到的相同行为。

这是我的代码

```
 private GoogleMap mMap;

@Override
protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.map_address_activity);
    setUpMapIfNeeded(); // from oficial sample

    mMap.setOnMapClickListener(new OnMapClickListener() {

        @Override
        public void onMapClick(LatLng point) {
            mMap.clear();
            mMap.addMarker(new MarkerOptions().position(point).title("Marker"));
            final CameraPosition cameraPosition = new CameraPosition.Builder().target(point).zoom(mMap.getCameraPosition().zoom).build();

            mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
        });
    mMap.setOnMarkerClickListener(new OnMarkerClickListener() {

        @Override
        public boolean onMarkerClick(final Marker marker) {
        Log.e("TESTING", "on Marker click: " + marker.getTitle());
            if (!marker.isInfoWindowShown())
                marker.showInfoWindow();
            else 
                marker.hideInfoWindow();

            return true;
        }
    });
} 
```

隐藏 InfoWindow 后，您能帮我处理标记上的点击事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T07:59:43.943

这就是应该发生的事情！onMarkerClick 只会在单击标记时调用，而不是在 infoWindow 隐藏时调用。

如果您想监听 InfoWindows 隐藏事件，您必须在您 hideInfoWindow 的 onMarkerClick 方法或覆盖的 onMapClick 方法中实现您自己的逻辑（因为单击地图上的任何位置可以隐藏信息）。在最后一种情况下，您必须使用激活的 infoWindow 保持对最后一个标记的引用并检查该窗口状态以实现您的逻辑。

# asp.net - WindowsServer 2008R2 64 位 IIS Framework64 文件夹；ashx 出现错误 500.21

> ID：14055788
> 
> 赞同：1
> 
> 时间：2012-12-27T13:53:44.753
> 
> 标签：asp.net, windows-server-2008-r2, aspnet-regiis.exe

尝试调用我编写的 ashx 时出现 500.21 错误（它在本地主机上的开发 PC 上运行良好）；根据服务器上的详细错误页面，最可能的错误原因之一是`ASP.NET is not installed or is not installed completely`.

当 Windows Server 2008R2 在 64 位服务器上运行时，我的假设是*只需要在 Framework64 文件夹中*执行如下命令，32 位文件夹中也不需要。这个假设正确吗？

```
 run %windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i
  run %windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:49:57.480

我们尝试了这两个命令并没有解决问题。500.21 对 PUT 动词的响应。

显然，WebDAV 模块将阻止 IIS 的 DELETE 和 PUT（更新）动词。

我们设法解决这个问题的唯一方法是从站点的处理程序中删除 WebDAV，在 web.config 中添加以下行：

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    <handlers>
        <remove name="WebDAV" />
    </handlers>
</system.webServer> 
```

更多信息：[http ://forums.iis.net/t/1166025.aspx](http://forums.iis.net/t/1166025.aspx)

# perl - 如何在 perl 中运行这种命令？

> ID：14055789
> 
> 赞同：1
> 
> 时间：2012-12-27T13:53:47.113
> 
> 标签：perl, bash

我想运行这里看到的这个[命令](https://stackoverflow.com/a/454549/807893)：

```
diff  <(echo "string1" ) <(echo "string2") 
```

从perl，我试过`system`：

```
system('diff  <(echo "string1" ) <(echo "string2")'); 
```

但它导致：

```
sh: 1: Syntax error: "(" unexpected 
```

有谁知道诀​​窍吗？

此外，当从两个可能需要转义的变量中读取`string1`和读取时，如何安全地运行这种命令？`string2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:26:32.743

使用 bash 执行命令

```
system('/bin/bash -c \'diff  <(echo "string1" ) <(echo "string2")\''); 
```

默认情况下，系统会使用 /bin/sh 来执行命令，而 /bin/sh 不支持特性 '()'

为了安全运行，需要转义关键字符，例如。这里的报价。

错误代码：

```
my $var1 = "\"string1;ls";
my $var2 = "\"string2;ls";
my $cmd = "diff <(echo \"$var1\") <(echo \"$var2\" )";
print $cmd . "\n";
my @args = ("bash", "-c", $cmd);
system(@args);
print "=======" . "\n"; 
```

安全代码：

```
$var1 = "\"string1;ls";
$var2 = "\"string2;ls";
$var1 =~ s/(\")/\\$1/g;
$var2 =~ s/(\")/\\$1/g;
$cmd = "diff <(echo \"$var1\") <(echo \"$var2\" )";
print $cmd . "\n";
@args = ("bash", "-c", $cmd);
system(@args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:14:15.107

即使它不处理空格（如您所愿），我也在修复它，它不会引用第一个字符。我让它更聪明，所以它没有引用明显的东西。

```
# this will escape all the characters in the string  
my $str = '/?\abc"';
( my $str3 = $str) =~ s/([^a-zA-Z0-9])/\\\1/g;

printf ("%s\n",$str);
printf ("%s\n",$str3);

my @args = ( "bash", "-c", 'diff <(echo "$foo" ) <(echo "string2")' );

system(@args); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:35:24.590

无壳（但可能不太便携）版本：

```
#!perl
use strict;
use warnings;
use Fcntl;

open my $one, '-|', 'echo', 'string1' or die "$! opening first input";
fcntl $one, F_SETFD, (fcntl($one, F_GETFD, 0) & ~FD_CLOEXEC)
  or die "$! keeping open first input";
open my $two, '-|', 'echo', 'string2' or die "$! opening second input";
fcntl $two, F_SETFD, (fcntl($two, F_GETFD, 0) & ~FD_CLOEXEC)
  or die "$! keeping open second input";

open my $diff, '-|', 'diff', "/dev/fd/".fileno($one), "/dev/fd/".fileno($two)
  or die "$! running diff";

while (<$diff>) {
    print;
} 
```

这基本上正是shell所做的（为第一个“echo”命令打开一个子进程，为第二个“echo”命令打开一个子进程，允许子进程继承它们的文件句柄，然后打开一个子进程到“diff”命令，其参数是指向打开的文件句柄的特殊文件名）。唯一的区别是，我们不是让 diff 打印到屏幕上，而是捕获输出并自己打印——因为我认为您可能想要对输出做一些事情而不仅仅是*查看*它。

## 新版本（无/bin/echo，无转义，无死锁）

```
#!/usr/bin/perl
use strict;
use warnings;
use Fcntl;

my $pid_one = open my $one, '-|';
die "$! opening first input" unless defined $pid_one;
if (!$pid_one) { # child
    print "string1\n";
    exit;
}
fcntl $one, F_SETFD, (fcntl($one, F_GETFD, 0) & ~FD_CLOEXEC)
  or die "$! keeping open first input";

my $pid_two = open my $two, '-|';
die "$! opening second input" unless defined $pid_two;
if (!$pid_two) { # child
    print "string2\n";
    exit;
}
fcntl $two, F_SETFD, (fcntl($one, F_GETFD, 0) & ~FD_CLOEXEC)
   or die "$! keeping open second input";

 open my $diff, '-|', 'diff', "/dev/fd/".fileno($one), "/dev/fd/".fileno($two)
  or die "$! running diff";
 while (<$diff>) {
    print;
} 
```

`string1`并且`string2`可以是任何东西，包括来自父进程的变量或其他命令的输出。

# c# - 双击后WPF TreeView恢复其焦点

> ID：14055794
> 
> 赞同：7
> 
> 时间：2012-12-27T13:54:05.533
> 
> 标签：c#, wpf, treeview

我有一个带有 XAML 的 WPF TreeView，如下所示：

```
<TreeView x:Name="twElements">
            <TreeView.Resources>
                <v8r:IconTypeConverter x:Key="IconConverter"/>
            </TreeView.Resources>

            <TreeView.ItemContainerStyle>
                <Style TargetType="{x:Type TreeViewItem}">
                    <EventSetter Event="MouseDoubleClick" Handler="twElements_MouseDoubleClick" />
                </Style>
            </TreeView.ItemContainerStyle>

            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding ChildItems}">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="{Binding Icon, Converter={StaticResource IconConverter}}"/>
                        <TextBlock Text="{Binding Text}" Margin="3,0,0,0"/>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate> 
```

任务是在双击子项后打开某个表单。

DoubleClick 事件的代码隐藏：

```
private void twElements_MouseDoubleClick(object sender, MouseButtonEventArgs e)
        {
            if (e.Source is TreeViewItem && ((TreeViewItem)e.Source).IsSelected)
            {
                e.Handled = true;

                var twi = (TreeViewItem)e.Source;

                var Editable = twi.Header as IEditable;
                if (Editable != null)
                {

                    Window Editor = Editable.GetEditor();
                    Editor.Show(); // Editor is a WPF.Window

                }

            }

} 
```

问题：打开所需窗口后，带有树视图的表单会自行激活，使新窗口成为背景。如何使新窗口保持活动状态？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T23:55:34.650

在打开新窗口之前，您可能需要让 WPF 完成处理当前鼠标单击事件的工作。通过像这样将新窗口添加到当前调度程序的队列中，让新窗口成为*下一个UI 作业：*

```
(...)

//Editor.Show();
Action showAction = () => Editor.Show();
this.Dispatcher.BeginInvoke(showAction); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T14:27:16.567

在新表单集的构造函数中

```
this.Focus(); 
```

另外，你的新表单应该是模态窗口吗？如果是，则使用`Editor.ShowDialog()`而不是`Editor.Show();`它将自动解决焦点问题

# java - 检测何时从 PostgreSQL 数据库中删除行

> ID：14055797
> 
> 赞同：0
> 
> 时间：2012-12-27T13:54:25.203
> 
> 标签：java, database, postgresql

最近我的团队遇到了一种情况，我们共享的测试数据库中的一些记录没有明确的原因消失了。因为它是一个共享数据库（被很多团队使用），所以我们无法追踪它是编程错误还是有人运行了一个错误的 sql 脚本。

所以我正在寻找一种方法来通知（在数据库级别）特定表 A 的一行被删除时。我查看了 Postgres TRIGGER，但它没有给我导致删除的特定 sql。

无论如何我可以记录导致删除表A中某些行的sql语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:09:47.953

你可以使用这样的[东西](http://wiki.postgresql.org/wiki/Audit_trigger)。

它允许您为 PostgreSQL 表创建一个特殊的触发器，记录对所选表的所有更改。

此触发器可以记录导致更改的查询（通过`current_query()`）。

以此为基础，您可以添加更多字段/信息来记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:57:24.037

您将对实际的 postgres 配置文件执行此操作：

[http://www.postgresql.org/docs/9.0/static/runtime-config-logging.html](http://www.postgresql.org/docs/9.0/static/runtime-config-logging.html)

> log_statement（枚举）
> 
> ```
> Controls which SQL statements are logged. Valid values are none (off), ddl, mod, and all (all statements). ddl logs all data 
> ```
> 
> 定义语句，例如 CREATE、ALTER 和 DROP 语句。mod 记录所有 ddl 语句，以及数据修改语句，例如 INSERT、UPDATE、DELETE、TRUNCATE 和 COPY FROM。如果 PREPARE、EXECUTE 和 EXPLAIN ANALYZE 语句包含的命令属于适当的类型，则它们也会被记录。对于使用扩展查询协议的客户端，当接收到 Execute 消息时发生日志记录，并且包含 Bind 参数的值（任何嵌入的单引号加倍）。
> 
> ```
> The default is none. Only superusers can change this setting. 
> ```

您希望 ddl 或 all 成为选择。这是您需要更改的内容：
在您的`data/postgresql.conf`文件中，将`log_statement`设置更改为“全部”。此外，可能还需要验证以下内容：

```
1) make sure you have turned on the log_destination variable
2) make sure you turn on the logging_collector
3) also make sure that pg_log actually exists relative to your data directory, and that the postgres user can write to it. 
```

取自[这里](https://stackoverflow.com/a/722236/205426)

# python - 从python中的列表中删除项目

> ID：14055799
> 
> 赞同：3
> 
> 时间：2012-12-27T13:54:27.763
> 
> 标签：python, list

我是 python 新手，我想知道如何从列表中删除项目。说我有清单：

```
a=[(102,12,0),(123,12,0),(124,12,1)] 
```

我想删除末尾有 0 的项目，所以我的列表最终会像：

```
a = [(124,12,1)] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T13:55:22.007

这里：

```
a = [i for i in a if i[-1] != 0] #list comprehension (1 line) method. 
```

当父列表也是目标列表时，没有列表理解的“正常”方式。

```
tmp = []
for i in a:
    if i[-1] != 0:
        tmp.append(i)
a = tmp 
```

在行动：

```
>>> a=[(102,12,0),(123,12,0),(124,12,1)]
>>> a = [i for i in a if i[-1] != 0]
>>> a
[(124, 12, 1)]
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:59:27.130

您可以使用[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

`val[-1]`最后会给你 0 的元组，假设`val`是迭代时使用的变量。

因此，您的代码将是这样的：

```
a = [val for val in a if val[-1]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T08:23:11.640

不像单行列表理解那么棒，但仍然可以做到这一点:)。

```
b = tuple
for tple in a:
    b = b + tple
result = tuple
for val in set(b):
    if val % 10 != 0:
        result = result + (val,) 
```

# spring - 在单元测试中初始化 WebApplicationContext

> ID：14055803
> 
> 赞同：2
> 
> 时间：2012-12-27T13:54:43.150
> 
> 标签：spring

我有一个实用方法，我想为其编写单元测试。由于此实用程序在 webapp 下运行，因此它旨在从 WebApplicationContext 获取 Spring bean。（以下代码未在单元测试中）动作 bean 类

```
private IUnitBiz unitBiz;
public UnitBean()
{
    unitBiz = CommonUtils.getBean(IUnitBiz.class);
} 
```

在 CommonUtils.class 中

```
public static ApplicationContext getWebApplicationContext() {
        return FacesContextUtils.getWebApplicationContext(FacesContext.getCurrentInstance());
    }

    public static <T> T getBean(Class<T> beanType) {
        return getWebApplicationContext().getBean(beanType);
    } 
```

------------------在单元测试中----------------

在单元测试中它返回 null，我如何为我的单元测试初始化​​ WebApplicationContext 或 getBean？当我新建动作 bean 时，getBean 方法返回 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:10:18.170

[EasyMock](http://www.easymock.org/)可能是一个解决方案。

例子：

```
WebApplicationContext mockWebApplicationContext = EasyMock.createMock(WebApplicationContext.class);
MockServletContext mockServletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE,
                                    mockWebApplicationContext);

EasyMock.expect(mockWebApplicationContext.getServletContext()).andReturn(mockServletContext).anyTimes(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T14:14:03.653

你可以让你的测试用例扩展 org.springframework.test.context.junit4.AbstractJUnit4SpringContextTests。

通过扩展此类，您可以访问 org.springframework.context.ApplicationContext 的一个实例，该实例可以使用并传递给您的实用程序方法...实际上，我不知道您是否正在使用，但您应该尝试使用 spring -test，这是在 JUnit 测试中使用 Spring 的最佳方式，它独立于框架（可以与 Wicket、JSF 等一起使用）。

您应该首先在 Maven pom.xml 中包含以下依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>4.0.0.RELEASE</version>
    <scope>test</scope>
</dependency> 
```

# javascript - 返回按钮返回动态添加控件的状态

> ID：14055805
> 
> 赞同：0
> 
> 时间：2012-12-27T13:54:53.407
> 
> 标签：javascript, html, forms

我有一个 HTML 表单，它使用 JavaScript 向表单添加控件。例如，当单击表单上的按钮时，会在表单中添加一个文本框。

当用户提交表单时，用户将被带到另一个视图。但是，如果用户单击浏览器上的后退按钮，她/他将被带到前一个表单（具有添加控件的按钮），但他/她之前动态添加的文本框都不会显示。但是，其他静态表单控件显示之前输入的数据。

我怎样才能让它按下后退按钮返回到完整的先前状态？还是我需要在自定义按钮中实现它？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:09:07.227

`sessionStorage`应该合适，这里。

1.  当用户添加输入字段时，将添加的事实及其值保存到`sessionStorage`
2.  当用户按下“返回”时，检查是否有任何字段保存在 中`sessionStorage`，如果是这样，
3.  根据存储中添加的字段，重新构建表单，
4.  如果删除了字段，请不要忘记从存储中删除条目。

一些伪代码：

```
function fieldAdded(name, value){
    sessionStorage[name] = value;
    // You can also use this function to update the saved value, when fields are edited.
}

function pageLoad(name, value){ // load event after pressing "back"
    var optionalFields = ['telephone','fax','name','description'];
    for(var i = 0; i < optionalFields.length; i++){
        if(sessionStorage[optionalFields[i]]){
            // addField(Name, value);
            addField(optionalFields[i], sessionStorage[optionalFields[i]]);
        }
    }
}

function fieldRemoved(name){
    delete sessionStorage[name];
} 
```

# vba - 如何从 Excel VBA 中动态加载的 OCX 库向控件添加事件处理

> ID：14055810
> 
> 赞同：2
> 
> 时间：2012-12-27T13:55:10.203
> 
> 标签：vba, excel, ocx

在 Excel 2003 VBA 项目中，我使用的是 MSCOMCTL.OCX 中的 TreeCtrl。我将控件动态添加到我的应用程序中的表单中（请参见下面的代码）。

**我想处理 TreeCtrl 的 NodeClick 事件。**

由于控件是动态添加的，因此仅使用 TreeCtrl_NodeClick 似乎不起作用。我也不能使用 WithEvents 方法，因为它似乎不适用于编译时未知的类型。

```
'Does not work. WithEvents probably only works on known data types that have events.
'private WithEvents treeCtrl As Object 

'This code adds the control to the form
Private Sub UserForm_Initialize()
    Dim treeCtrl As Object
    Set treeCtrl = Me.Controls.Add("MSComctlLib.TreeCtrl.2", "MyTreeCtrl")
    'Does not work: AddHandler is not available in VBA.
    'AddHandler TreeCtrl.NodeClick, AddressOf UserForm1.MyTreeCtrl_NodeClick 
End Sub

'This is supposed to be the event handler but it does not get called.
Private Sub MyTreeCtrl_NodeClick(ByVal Node As Object) 
    MsgBox "Node clicked"
End Sub 
```

请注意，我需要动态加载 MSCOMCTL.OCX。我不能将它作为静态引用放入我的 VBA 项目中（因为我的项目必须在不同版本的 Excel 中运行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:16:12.713

根据[MS 的此响应](http://social.msdn.microsoft.com/Forums/sk/isvvba/thread/7d24e065-2475-404a-946c-1ec108cf0006)“您无法处理使用 Excel VBA 在运行时添加的 TreeView 控件的事件”，尽管有使用 VB6（！）的建议解决方法。

是否在设计时添加控件，然后隐藏它直到需要一个选项？

# sql - 将多个参数传递给 SQL Server

> ID：14055811
> 
> 赞同：3
> 
> 时间：2012-12-27T13:55:17.357
> 
> 标签：sql, sql-server, sql-server-2008, tsql

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)
> [SQL Server 2005 中的逗号分隔值插入](https://stackoverflow.com/questions/2597607/comma-separated-value-insertion-in-sql-server-2005)

我正在尝试使用 where in 子句在我的数据库中搜索，但我的字符串采用以下格式：

```
'233052,57516351,254689' 
```

我需要使用以下查询在我的数据库中进行咨询：

```
SELECT * FROM myTable WHERE field IN (@list_string) 
```

我该如何做这个动作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:01:46.393

使用SQL Server 2008 中引入的[表值参数。](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

这些使您可以传入可用于查询的表结构。

对于其他选项，我建议阅读Erland Sommarskog 的[Arrays and Lists in SQL Server](http://www.sommarskog.se/arrays-in-sql.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:22:50.930

多年来，我一直在使用[Itai Goldstein 的 Split 函数](http://blogs.microsoft.co.il/blogs/itai/archive/2009/02/01/t-sql-split-function.aspx)来应对这种情况。然后，您可以执行以下操作：

```
SELECT * 
FROM [myTable] 
WHERE [field] IN (
    SELECT [Data]
    FROM [dbo].[Split] (@list_string, ',')
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:56:13.407

尝试执行 sql 语句连接的 EXEC：

```
declare @sql varchar(200)
set @sql='SELECT * FROM myTable WHERE field IN ('+@list_string+')'
exec(@sql) 
```

# android - Android：在 android 模拟器中请求位置更新后，应用程序停止工作

> ID：14055815
> 
> 赞同：0
> 
> 时间：2012-12-27T13:55:25.357
> 
> 标签：android, location, android-4.0-ice-cream-sandwich, android-3.0-honeycomb

在 android 模拟器中请求位置更新后，我的应用程序停止工作。这仅适用于 3.0 以上的 android 版本。任何类似以下的代码

```
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

该应用程序停止工作。这是这些版本的模拟器中的常规行为还是我做错了什么？

更多信息：如果我启动 android 2.3 或更低版本的模拟器，则会正确捕获异常。这在其他版本中不会发生。

```
 12-27 19:17:59.183: W/dalvikvm(640): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
 12-27 19:17:59.253: E/AndroidRuntime(640): FATAL EXCEPTION: main
 12-27 19:17:59.253: E/AndroidRuntime(640): android.os.NetworkOnMainThreadException
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at com.rahul.places.AddNewLocation.getUrlArray(AddNewLocation.java:147)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at com.rahul.places.AddNewLocation.access$6(AddNewLocation.java:139)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at com.rahul.places.AddNewLocation$2.onClick(AddNewLocation.java:69)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.view.View.performClick(View.java:4084)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.view.View$PerformClick.run(View.java:16966)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.os.Handler.handleCallback(Handler.java:615)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.os.Handler.dispatchMessage(Handler.java:92)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.os.Looper.loop(Looper.java:137)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at android.app.ActivityThread.main(ActivityThread.java:4745)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at java.lang.reflect.Method.invokeNative(Native Method)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at java.lang.reflect.Method.invoke(Method.java:511)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
 12-27 19:17:59.253: E/AndroidRuntime(640):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:41:27.500

这是意料之中的。在最近的版本中，Android 在处理 UI 线程上的工作时更加严格。

解决方案是使用[处理程序](https://developer.android.com/reference/android/os/Handler.html)在位置更新可用时更改 UI 线程上的 UI（即在您的 onLocationChanged() 方法中）。

# c# - 将 Kinect 应用程序连接到 Kinect Studio

> ID：14055816
> 
> 赞同：2
> 
> 时间：2012-12-27T13:55:38.610
> 
> 标签：c#, visual-studio-2010, kinect, kinect-sdk

我正在使用 Kinect SDK 1.6 版构建 Kinect 应用程序。我想用 Kinect Studio 录制一个 .xed 文件，然后使用该 .xed 文件来测试我的应用程序，而不必每次都连接 Kinect 传感器。

我已经成功记录了 .xed 文件，现在我正在尝试使用 .xed 文件作为输入而不是传感器来运行我的应用程序。问题是，当我的应用程序第一次加载时，它会检查连接的传感器并连接到一个（如果存在）——如果一个不存在，它就无法连接并且必须退出。但是，我的应用程序必须在 Kinect Studio 加载时运行，以便 Studio 连接到正在运行的 Kinect 应用程序。所以我的问题是——设计模式是什么？

应用程序是否应该开始运行并等待激活的传感器，然后连接？或者 Studio 是否应该正在运行并等待 Kinect 应用程序启动，然后将自身连接到该应用程序？微软给出的所有示例都只检查一次连接的设备，如果不存在则退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:57:04.533

您可以为 Kinect 传感器状态更改时添加事件处理程序：

```
KinectSensor.KinectSensors.StatusChanged += Kinect_StatusChanged; 
```

然后，当状态发生变化并且传感器已连接时，您可以像通常在启动时所做的那样初始化传感器：

```
void Kinect_StatusChanged(object sender, StatusChangedEventArgs e)
{
    switch (e.Status)
    {
        case KinectStatus.Connected:
            if (kinectSensor == null)
            {
                kinectSensor = e.Sensor;
                Initialize();
            }
            break;
        case KinectStatus.Disconnected:
            if (kinectSensor == e.Sensor)
            {
                Clean();
                // Notify user, change state of APP appropriately
            }
            break;
        case KinectStatus.NotReady:
            break;
        case KinectStatus.NotPowered:
            if (kinectSensor == e.Sensor)
            {
                Clean();
                // Notify user, change state of APP appropriately
            }
            break;
        default:
            // Throw exception, notify user or ignore depending on use case
            break;
    }
} 
```

* * *

总而言之，我在启动时使用的模式是：

1.  订阅 StatusChanged 事件
2.  尝试初始化 Kinect 传感器

然后当 Kinect 传感器的状态发生变化时，我的应用程序可以做出适当的反应。

请注意，这种类型的模式应该适用于所有应用程序，而不仅仅是这个特定的用例。所有启用 Kinect 的应用程序都应在 Kinect 传感器断开连接时做出适当反应。

# java - Swing GUI 中被阻止的外部进程

> ID：14055818
> 
> 赞同：0
> 
> 时间：2012-12-27T13:55:41.160
> 
> 标签：java, swing, process, ffmpeg, runtime.exec

我正在开发一个带有 java swing 和 ffmpeg 的编码器。我创建了一个 GUI 界面，在其中指定了我的输入`(devices, frame rate, bitrate..)`。然后我调用`ffmpeg`编码和流式传输。

我的问题是编码类可以从主类中很好地执行，但是在从 swing 接口（特别是`jButtonactionperformed()`）调用时会被阻止。

谁能帮我？

这是我的按钮动作

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    Encode s = new Encode();
    s.Encode(cmdLine);
} 
```

这是我的编码方法

```
public void Encode(String cmdLine) {
    try {
        Process p2 = Runtime.getRuntime().exec(cmdLine);
        //logProcessOutputAndErrors(p2); 
    }
    catch(Exception ex) {
        ex.printStackTrace();
    }
} 
```

Ps: Cmdline 是我从输入中收集的命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:08:39.837

首先，将 Encode 方法转换为 Runnable 类。

```
public class Encode implements Runnable {

    protected String    cmdLine;

    public Encode(String cmdLine) {
        this.cmdLine = cmdLine;
    }

    @Override
    public void run() {
        try {
            Process p2 = Runtime.getRuntime().exec(cmdLine);
            // logProcessOutputAndErrors(p2);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

} 
```

然后，将类实例化为 Thread，并启动它。

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    Encode s = new Encode(cmdLine);
    new Thread(s).start();
} 
```

# asp.net - 带有 Clientcertificate 的 Web 服务给出错误在 IIS 中运行时无法创建 SSL/TLS 安全通道

> ID：14055821
> 
> 赞同：0
> 
> 时间：2012-12-27T13:55:54.023
> 
> 标签：asp.net, web-services, iis, ssl, x509certificate

我有以下代码可以使用客户端证书访问 Web 服务。当我在控制台应用程序中运行此代码时，一切似乎都运行良好。如果我尝试从在 IIS 7 中运行的 Web 应用程序运行它。我收到错误消息“请求已中止：无法创建 SSL/TLS 安全通道。”

这是代码：

```
 System.Net.ServicePointManager.SecurityProtocol = System.Net.SecurityProtocolType.Ssl3 | System.Net.SecurityProtocolType.Tls; //from other stackoverflow case
            System.Net.ServicePointManager.Expect100Continue = true; //from other stackoverflow case
            db2wsService service = new db2wsService();
            service.Url = this.WebserviceUrl;                

            HttpServerUtility server = HttpContext.Current.Server;
            X509Certificate certificate = new X509Certificate(server.MapPath(this.CertificatePath), this.CertificatePassword);

            service.ClientCertificates.Add(certificate);

            service.PreAuthenticate = true;  
//do some stuff here to call webservices 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:52:36.420

我遇到了同样的问题。这个解决方案是 winhttpcertcfg。如果你在谷歌上搜索使用，你会找到它。

# javascript - 如何致富：上传接受从文件夹中拖放文件？

> ID：14055822
> 
> 赞同：0
> 
> 时间：2012-12-27T13:56:00.760
> 
> 标签：javascript, jquery, html, jsf, richfaces

我已经使用rich:upload 标签实现了文件上传，现在新的要求是让它接受从文件夹中拖放文件，然后触发文件上传过程。

我的问题是如何实现这个？不管 Html5、jQuery 等，只要实现它。

如果它可以集成到richfaces，例如，一旦收到拖动事件，我可以触发rich:upload 与jQuery 等类似的东西，这是最好的。

项目web框架为richfaces + jsf。

先感谢您。

补充：这里是一个jquery文件上传[demo](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:04:09.013

[这里](http://html5demos.com/file-api)有一个示例，展示了如何使用[File API](http://www.w3.org/TR/FileAPI/)。

基本上，您必须使用`ondrop`事件和`FileReader`对象：

```
<div id='holder'></div>
<script>
    var holder = document.getElementById('holder');
    holder.ondrop = function (e) {
        var file = e.dataTransfer.files[0],
            reader = new FileReader();

        reader.onload = function (event) {
            // your file info
            console.log(event.target);
        };

        // do read
        reader.readAsDataURL(file);

        return false;
    };
</script> 
```

# android - 如何在谷歌地图api中为每条街道使用唯一标识符

> ID：14055830
> 
> 赞同：0
> 
> 时间：2012-12-27T13:56:32.467
> 
> 标签：android, google-maps

我的目标是在用户询问方向时识别用户是否已经在谷歌地图方向搜索结果中给出的街道之一（即使不是在完全相同的坐标中）。

它是这样发生的：
当用户只是浏览街道时，应用程序会不时地使用地理编码 API 向谷歌询问用户在哪里。然后它注册它（我仍然需要知道我应该使用哪些信息）。

在未来的另一个时间，用户会询问到他想去的特定地方的路线，应用程序会询问谷歌地图的替代方案，然后它将决定使用哪条路径，如果用户愿意的话根据配置，尽可能多地识别他的进步或相反。

问题是我不知道将什么用作每条街道的唯一标识符。

注意：目前我没有将大街道划分为扇区。这样应该更容易。Ofc，如果这比考虑整条街道更容易，我会将街道划分为扇区。

我已经测试过我不能使用用户所在位置的坐标。为了不与附近的街道重叠并提供良好的精度，即使被截断，我也无法使用坐标。
我还检查了当我问路时，使用地理编码返回的地点的名称似乎不可用。方向 api 不会使用相同的标识符命名街道......

**请帮忙**。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:43:40.160

我知道你现在可能已经继续前进或想通了，但我会告诉你我会做什么。

如果我想识别可能熟悉的街道，我会将街道上的街区识别为一组起点和终点坐标。您可以检查是否接近块的末端。

您应该能够通过对块上某个点的地址进行地理编码并将地址行字符串用空格拆分来找到块的末端。将第一个数字解析为 int，减去街道号码的模数除以 100，然后在开头加 1，结尾加 99。

```
String[] splitAddr  = address.getAddressLine(0).toString().split("\\s");        
    houseNum    = splitAddr[0];
    street      = address.getAddressLine(0).toString().substring(houseNum.length());        
    blockNum    = Integer.parseInt(houseNum);
    blockNum    = (blockNum - (blockNum % 100));
    blockstart  = blockNum + 1;
    blockEnd    = blockNum + 99 
```

# php - 如何通过 URL 在 PHP 中接收 POST 响应

> ID：14055842
> 
> 赞同：0
> 
> 时间：2012-12-27T13:57:35.150
> 
> 标签：php

我发现的信息对我没有用，或者我根本不明白我在读什么。

正在向特定位置 (URL) 发出 POST 请求，并且响应将被发送回我必须指定的 URL，该 URL 存在于我的域中。（例如`www.mysite.org/answers/answer.php`）

为了提取发送到该位置的每条信息，我需要做什么？

现在，在用户将表单（已通过 POST 提交）提交到`answer.php`which 检查后，我正在从表单页面重定向，`if isset($_POST["submit"])`但它没有给我任何东西。

此外，如果我有很多用户提出请求，我会使用什么 URL，以便将每个用户重定向到他们自己的答案页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:29:50.167

“提交”可能是提交按钮的名称？只有当表单确实通过按钮提交时，该值才会出现在请求中。您可以有多个按钮，以防帖子数据中仅显示单击按钮的名称。

此外，如果用户在选择最后一个输入字段时仅按 Enter 提交，则表单也会提交，但没有按下任何按钮。在这种情况下，提交按钮的名称在 $_POST（也不是 $_REQUEST）中根本不可用。

长话短说：不要检查按钮的名称。只需检查可用的现场数据。如果你愿意，你可以遍历发布数据：

```
foreach ($_POST as $postkey => $postdata)
{
  // $postkey contains the key
  // $postdata contains the value
  // any code here is repeated for every posted value.
} 
```

或者，只要您只是在测试：

```
var_dump($_POST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:24:49.880

您需要某种存储机制（会话、数据库等）和令牌（会话 ID、主键等）。

1.  当用户提交数据时，在您的网站上生成一个令牌（例如，使用会话 ID）。
2.  将此令牌连同提交的数据一起提交到其他网站。
3.  将用户发送到等待页面（见下文）。
4.  另一个网站将（希望）将令牌与响应数据一起回显到您的答案脚本。
5.  在您的应答脚本中，使用令牌将响应保存在存储中（例如，使用 session_id(token) 函数加载用户会话，然后设置会话变量）。
6.  在等待页面中，不断轮询存储，看是否有响应到达。您可以使用每 10 秒刷新一次页面的元刷新标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T14:20:16.227

而不是 Post 使用 $_REQUEST，它适用于 Post 和 Get

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T14:33:15.970

在您的 html 表单上添加类似这样的内容。

```
 <form action="answer.php" method="post">
 <input type="hidden" name="submitted" value="true" /> 
```

然后在 answer.php

```
 <?php
 if (isset($_POST['submitted'])) {
   print_r($_POST);
 }
 ?> 
```

# python - 嵌套函数的性能开销是多少？

> ID：14055843
> 
> 赞同：10
> 
> 时间：2012-12-27T13:57:39.253
> 
> 标签：python, performance, function

在 Python 中，可以嵌套这样的函数：

```
def do_something():
    def helper():
        ....
    .... 
```

除非 Python 更巧妙地处理这种情况，否则`helper`每次`do_something`使用时都必须重新创建。实际上这样做是否会对性能造成影响，而不是在主函数之外创建辅助函数，如果是，它有多好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T13:57:39.253

是的，在 main 函数中声明一个助手比单独声明它们要慢：

```
### test_nested.py ###
import timeit
def foo():
    def bar():
        pass
    pass
print(timeit.timeit("foo()", setup="from __main__ import foo"))

### test_flat.py ###
import timeit
def foo():
    pass
def bar():
    pass
print(timeit.timeit("foo()", setup="from __main__ import foo, bar"))

### Shell ###
✗ python3 ./test_flat.py
0.42562198638916016
✗ python3 ./test_nested.py
0.5836758613586426 
```

这是大约 30% 的放缓。请记住，在这种简单的情况下，创建和调用函数是解释器所做的一切。在任何实际使用中，差异都会小得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T09:30:15.820

性能损失肯定存在。如果一个函数是在对另一个函数的调用中创建的，那么每次调用外部函数时都会真正创建函数对象。但这种惩罚很小，通常可以忽略不计。特别是考虑到一个明显的事实：在大多数情况下，只有当它不能放在外面时，您才应该创建一个嵌套函数。

您可能需要嵌套函数的原因是需要在嵌套函数内访问外部函数的范围变量。通常这将导致直接或间接地从外部函数返回内部函数对象（就像在装饰器中一样），或者，也许，将内部函数作为回调传递给某处。嵌套函数访问的变量将一直存在，直到嵌套函数对象被销毁，并且对于嵌套函数的不同实例，它们将是不同的，因为每个实例都看到来自不同范围实例的变量。

在我看来，仅仅将创建一个空的内部函数所需的时间与使用放置在外部的相同函数进行比较几乎是没有意义的。性能差异纯粹源于代码行为的差异。所需的代码行为应该使您选择放置函数的位置。

只是一个小插图：

```
def outer(n):
    v1 = "abc%d" % n
    v2 = "def"
    def inner():
        print locals().keys()
        return v1
    v1 = "_" + v1
    return inner
f1 = outer(1)
f2 = outer(2)
print f1()
print f2() 
```

输出是：

```
['v1']
_abc1
['v1']
_abc2 
```

关键时刻：

1.  内部函数的 locals() 仅包括它使用的外部函数 locals（v1，但不包括 v2）。

2.  v1 在创建函数对象后更改。但是，即使 v1 的类型是不可变的 (str)，内部函数仍然可以看到更改。因此，内部函数看到的是外部函数局部变量的真正子集，而不仅仅是在函数对象创建时存储的引用。幸运的是，内部函数对象的存在并不能阻止 v1 以外的范围变量被破坏。如果我将 v2 值替换为在被销毁时打印某些内容的对象，它会在外部函数退出时立即打印消息。

3.  inner() 的不同实例不共享单个外部范围实例：v1 值不同。

如果不使用嵌套函数，所有这些效果根本无法实现。这就是为什么应该使用嵌套函数的原因，实际上并没有性能损失：额外的行为需要额外的时间。如果您需要这种额外的行为，您应该使用嵌套函数。如果你不需要它，你不应该。

# jquery - Jquery - 动画背景位置与缓动

> ID：14055848
> 
> 赞同：4
> 
> 时间：2012-12-27T13:58:03.170
> 
> 标签：jquery, mousemove, easing

我正在尝试使用 jquery animate 为 mousemove 上的背景设置动画。但无法弄清楚如何停止动画的排队并让动画“跟随”鼠标

HTML：

```
Animate Background<br />
<div id="animateme"></div>​ 
```

JS：

```
$("#animateme").bind('mousemove', function(e) {

    $(this).animate({
        'background-position-x': e.pageX,
        'background-position-y': e.pageY
    }, 100, 'swing');

});​ 
```

我已经建立了一个 jsfiddle 希望能说明我的意思 [http://jsfiddle.net/KunZ4/1/](http://jsfiddle.net/KunZ4/1/)

将鼠标悬停在顶部图像上，您可以看到背景动画跟随鼠标。但我想为此添加一些缓和，所以它跟随鼠标更平滑一点。

使用 jquery 动画似乎要排队，但我希望动画在鼠标移动停止时有点延迟地赶上鼠标。

我想在不使用 UI 或插件的情况下实现这一点。

希望这有某种意义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:27:28.397

我发现了一些对我有用的东西，对于其他正在寻找它的人

[http://jsfiddle.net/KunZ4/6/](http://jsfiddle.net/KunZ4/6/)

缓动可以通过改变持续时间来调整

```
$.easing.smoothmove = function (x, t, b, c, d) {
return -c *(t/=d)*(t-2) + b;
 }; 

$("#animateme").bind('mousemove', function(e){

 $(this).animate({
   'background-position-x': e.pageX,
   'background-position-y': e.pageY
 }, {queue:false,duration:200,easing:'smoothmove'});

 }); 
```

感谢所有的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:36:19.073

尝试在函数`stop(true)`之前添加`.animate`：

```
$("#animateme").bind('mousemove', function(e) {

    $(this).stop(true).animate({
        'background-position-x': e.pageX,
        'background-position-y': e.pageY
    }, 100, 'swing');

});​ 
```

小提琴：http: [//jsfiddle.net/maniator/KunZ4/4/](http://jsfiddle.net/maniator/KunZ4/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T19:00:55.803

已开发（当鼠标在 BODY 中移动时）：http: [//jsfiddle.net/hX22a/](http://jsfiddle.net/hX22a/)

```
$.easing.smoothmove = function (x, t, b, c, d) {
return -c *(t/=d)*(t-2) + b;
}; $("body").bind('mousemove', function(e){
$("#animateme").animate({
'background-position-x': e.pageX,
'background-position-y': e.pageY
}, {queue:false,duration:200,easing:'smoothmove'});
}); 
```

# ios-simulator - 如何使用 iPhone 模拟器扫描条形码（使用 ZBar SDK 生成）？

> ID：14055849
> 
> 赞同：2
> 
> 时间：2012-12-27T13:58:03.973
> 
> 标签：ios-simulator

> **可能重复：**
> [zbar sdk 无法使用相机模拟器在 iphone 模拟器上工作](https://stackoverflow.com/questions/13583800/zbar-sdk-not-working-on-iphone-simulator-by-using-camera-simulator)

我想使用 iPhone 相机测试我的条码扫描器。

我正在使用 ZBar SDK 进行条码扫描。

我有一个扫描按钮。当我点击扫描按钮时，它向我显示消息，“**相机模拟，用两根手指点击并按住以选择图像**”。当我这样做时，它显示“无照片”另一种看法。

**谁能告诉我如何选择条形码图像并使用模拟器扫描它？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:02:13.363

模拟器中有图片要测试吗？如果没有，可以通过两种方式将图像添加到模拟器照片库中。

1.  将图像从 Finder 拖放到模拟器中。它将在 Safari 中打开，您可以按住图像，然后会弹出一个操作表，要求您保存。

2.  直接在模拟器上进入 Safari，导航到你想要的图像，并以与步骤 1 相同的方式保存它。

# php - PHP OOP 是否与 Java 中的 main() 等效？

> ID：14055850
> 
> 赞同：2
> 
> 时间：2012-12-27T13:58:09.873
> 
> 标签：php, object, coding-style

为了代码清晰起见，我想知道是否可以让 PHP 中的对象在定义时执行函数或块，以使事情更像 Java。

不是通过 实例化它`__construct()`，而是像`main()`在 Java 中那样定义它。PHP 是否与`main()`Java 中的等价物？

对于在 OO PHP 中编写整个项目的经验的人：您如何决定哪些代码应该和不应该包含在对象中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:07:22.807

对象中应该包含什么代码？嗯，这是一个非常开放的问题：这取决于。

对于小型项目，您可以按程序进行所有操作。但是 OO 确实为大型项目提供了一些好处，例如*封装*（仅根据需要授予外部方法/属性访问权限，并从其他不相关的部分隐藏一个部分的机制）和*继承*（非常有助于解决一般情况，然后缩小范围满足您的要求，同时保持代码井井有条）。

对于大型 Web 项目，尤其是那些使用现代 PHP 框架的项目，我想说 80% 的代码可以是 OO 的——视图层中的控制器和代码片段除外。但是某些系统（例如 Wordpress）强制采用更程序化的样式，因此您的 OO 可能只占您代码的 30%（我在 OO 中进行 WP 插件开发，但据我所知，这种方法很不寻常）。

要了解更多信息，您可能会发现选择一个 PHP 框架（Symfony、Zend、Cake 等）并运行他们的教程很有帮助。与抽象学习相比，你将学到更多的*东西*，imo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:00:39.910

如果你真的想要，你可以创建一个“main”函数，然后调用它：

```
function main(){

     $obj1 = new Obj1();
     doSomething();
     //etc...

}

main(); 
```

如果我正确理解了你的问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T14:00:47.803

您要问的不是面向对象的问题。Java 和类似语言中的 main() 是一种框架特性，而不是 OO 特性。所有 main() 定义的都是应用程序的入口点，这是您无论如何都要做的事情。

所以简短的回答是，这无关紧要。更长的答案是，如果你想要那种执行顺序，你可以在 PHP 中寻找一个特定的框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:06:12.233

您将在堆栈跟踪中看到 main 。它只是您的应用程序的入口点。通常是调用解析器的第一个文件的第一行（或零行）。

![在此处输入图像描述](../Images/f7b707c6ba610b013f9f104e9858cb10.png)

# git - 是否可以仅忽略 GitHub 文件进行同步？

> ID：14055852
> 
> 赞同：1
> 
> 时间：2012-12-27T13:58:24.473
> 
> 标签：git, github

我对 GitHub 还很陌生，但我现在使用它来跟踪小型 Web 开发项目的本地版本已经有一段时间了。假设我有一个项目，其中包含一堆 HTML、CSS 和 JS 文件，还有一个 PHP 文件来访问 MySQL 数据库。PHP 文件包含我的 MySQL 凭据，包括密码，所以显然我不想公开这个文件。我想在本地跟踪对我的项目所做的所有更改，包括 PHP 文件，但如果我想将项目放到网上，我需要一些方法来将此文件排除在同步之外。

所以我的问题是：我可以忽略与我的 GitHub 帐户同步的文件，同时仍然在我的本地存储库中被跟踪吗？如果我完全走错了路，我会很高兴听到更可靠的解决方案来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:45:29.790

有很多解决方案可以省略部分文件，但对于刚开始使用*git*时，这些解决方案太复杂了。大多数技巧都是围绕所谓的*过滤器*发展而来的，过滤器是在您的生产站点上结帐时解析和创建文件的命令。但你不需要这些。

最简单的技巧为您提供了使应用程序更安全和更便携的额外好处。

它更安全，因为所有秘密数据都保存在一个文件中，该文件可以获得非常严格的权限（因此有权访问例如 FTP 到代码库的人看不到凭据）。它具有更好的可移植性，因为它允许您的团队以他们想要的方式在他们自己的开发机器上运行他们自己的凭证。例如，使用 XAMP 的人可能有不同的数据库名称，然后有人使用虚拟机或自制脚本来管理他们的项目。

在服务器上，创建一个文件`/path/only/www-data/has/read-access/secret.inc`

```
<?php
/** Hashing **/
define("SECRET_HASH", "hogwards");

/** Database **/
define("DB_USER", "harry");
define("DB_PASS", "alora");
?> 
```

然后，在您的`settings.php`或您现在存储这些凭据的位置：

```
<?php
require("/path/only/www-data/has/read-access/secret.inc");
// Or slightly more portable
// require("../etc/secret.inc");
?> 
```

`secret.inc`您还可以检查新协作者的示例`secret.inc.example`，具有定义，但使用空字符串作为值。

现在您可以简单地推送`settings.php`所有其他提交。它将获取在生产中发现的“secrets.inc”；使用骄傲服务器登录详细信息，例如您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:51:26.360

在省略某些内容的同时无法推送提交。这样做会导致 SHA1 标识符发生变化，从而导致不同的提交。

您可以在一个分支上进行公共开发，然后将这些更改合并到另一个分支，您可以在其中跟踪需要保密的配置信息。由于您可以在携带未提交更改的同时切换分支，因此您甚至可以使用已签出的私有分支进行大部分开发和测试，只需切换到公共分支进行提交，然后切换回来并合并这些更改。

但是，在推送时只推送公共分支而不推送私有分支时需要小心。一般来说，将不想推送的信息保存在一个小的单独文件中是一个更好的主意，可以安全地从跟踪中完全忽略该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:06:15.927

您可以忽略 git 存储库中正在跟踪的文件。这在类似情况下很常见。

项目的根目录上有一个名为 .gitignore 的文件。在此文件中，您将不想跟踪的文件的路径放在 git 存储库中。

请在以下位置找到有关如何使用的完整说明：[https ://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

在您的情况下，您将不得不手动将此“数据库配置”文件发送到您的服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:27:58.477

不，这是不可能的，但我认为你没有正确地做到这一点。将凭据存储在 PHP 文件中是一种不好的做法。您应该有一个带有设置的不同文件，但话又说回来，取决于您放置该设置文件的位置以及在存储库中拥有存根设置文件的重要性，您可能会回到相同的问题，但在不同的文件中.

# macos - 须藤 gacutil 权限

> ID：14055853
> 
> 赞同：0
> 
> 时间：2012-12-27T13:58:33.243
> 
> 标签：macos, sudo, gacutil

我正在尝试在我的 Mac 上使用 gacutil。当我这样做时，我收到错误：

```
gac directories could not be created, possibly permission issues. 
```

那么，考虑到这是我的电脑，我该如何获得许可？！计算机上有两个用户，geoff 和 admin。我试过了：

```
sudo gacutil -i mysql.data.dll 
```

然后给了管理员的密码，但我得到了

```
Sorry, try again. 
```

我这样做无济于事。那么我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:01:06.113

`sudo`需要当前用户的密码，而不是管理员密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:15:01.477

事实证明，问题与 gacutil 或 sudo 无关，但不知何故我的用户名与我的帐户名不匹配。在交换的另一部分发布后，我发现了问题及其答案：[https ://apple.stackexchange.com/questions/76068/whoami-is-not-who-i-am](https://apple.stackexchange.com/questions/76068/whoami-is-not-who-i-am)

# python - 结构打包/拆包类设计

> ID：14055859
> 
> 赞同：1
> 
> 时间：2012-12-27T13:58:49.157
> 
> 标签：python, struct, binaryfiles

我正在实现二进制文件格式（约 15 种不同的结构）读取器/写入器，但我有点纠结应该使用哪种设计模式。

1.  每个结构都包含打包/解包的方法：

    ```
    class Struct1:  
        def pack():
            struct.pack(self.foo)
            ...
        def unpack():  
            self.foo = struct.unpack()
            ...
    class Struct2:  
        def pack():
            struct.pack(self.foo)
            ...
        def unpack():  
            self.foo = struct.unpack()
            ...
    ... 
    ```

    对比

2.  每个结构都有带有读/写方法的 Reader/Writer 类：

    ```
    class Reader:
        def read_struct1():
            s = Struct1()
            s.foo = struct.unpack()
            ...
            return s
        def read_struct2():
            s = Struct2()
            s.foo = struct.unpack()
            ...
            return s
        ...
    class Writer:
        def write_struct1(s):
            struct.pack(s.foo)
            ...
        def write_struct2(s):
            struct.pack(s.foo)
            ...
        ... 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:59:51.207

编写单独的 Reader/Writer 类的目的是支持不同的输出处理——写入控制台、写入字节、写入 JSON 字符串等等。重要的是每个类 Struct1、Struct2 等都知道哪些属性对于保存它们的状态很重要。这是 pickle 模块使用的理念。

```
class Struct1(object):
    fields = ('a','b','c')
    ...

class Struct2(object):
    fields = ('foo', 'bar', 'baz')
    ... 
```

现在可以使用此元数据编写各种编写器类，而无需编写特定于类的代码：

```
class StructWriter(object):
    packTypeMap = {int:'i', float:'f', str:'s'}

    def write(self, obj):
        fields = obj.fields
        packstring = ''.join(packTypeMap[type(f)] for f in fields)
        packargs = (getattr(obj,f) for f in fields)
        return struct.pack(packstring, *packargs)

class DictWriter(object):
    def write(self, obj):
        return dict((f, getattr(obj,f)) for f in obj.fields)

class JSONWriter(object):
    jsonTypeMap = {str:lambda s:"'"+s+"'"}
    defaultJsonFunc = lambda x:str(x)
    def write(self, obj):
        # not really recommended to roll your own strings, but for illustration...
        fields = obj.fields
        outargs = (getattr(obj,f) for f in fields)
        outvals = (jsonTypeMap.get(type(arg),defaultJsonFunc)(arg) 
                       for arg in outargs)
        return ('{' +
            ','.join("'%s':%s" % field_val for field_val in zip(fields, outvals))
            '}')

class ZipJSONWriter(JSONWriter):
    def write(self, obj):
        import zlib
        return zlib.compress(super(ZipJSONWriter,self).write(obj))        

class HTMLTableWriter(object):
    def write(self, obj):
        out = "<table>"
        for field in obj.fields:
            out += "<tr><td>%s</td><td>%s</td></tr>" % (field, getattr(obj,field))
        out += "</table>"
        return out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:02:38.500

前者似乎更有意义——结构就是*事物*，因此将它们表示为对象更有意义。我认为第二种方法没有真正的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:23:20.273

它们必须是对象吗？出于管理目的，我很想考虑将`pack`/`unpack`字符串放入`dict`（以（命名）元组作为值）中，并将其放在单独的模块中......

some_file.py：

```
structs = {
    'struct1': ('unpack', 'pack'),
    'struct2': ('other unpack', 'other pack')
...
} 
```

如果需要有一个`PackerUnPacker`可以接受并使用它的类......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:34:55.830

重点应该是*如何充分利用类继承来避免代码重复？*我会尝试为常见的`pack`/`unpack`方法定义一个抽象类：

```
class PackUnpack(object):  
    def pack(self):
        struct.pack(self.foo)
        ...
    def unpack(self):  
        self.foo = struct.unpack()
        ...

class Struct1(object, PackUnpack):
    ...

class Struct2(object, PackUnpack):
    ... 
```

但即使这不可能（或实施起来太麻烦），第一选择似乎更自然并且更容易维护。

# java - 从 Servlet/JSP 调用 Unix Shell 命令

> ID：14055860
> 
> 赞同：2
> 
> 时间：2012-12-27T13:59:16.767
> 
> 标签：java, perl, servlets, sh

我需要从我的 Servlet 中调用一些 Unix 命令。我有一些 Perl 脚本，但我想将它们“翻译”成 Java。这是我想在 Java 上做的事情，但我是用 Perl 做的：

```
system("myfolder/myscript.sh > /myfolder/logs/myscript.log"); 
```

是否可以在 Servlet 上执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:24:35.420

是的，但请注意，重定向是您想要的 shell 的一部分：

```
ProcessBuilder pb = 
   new ProcessBuilder("/bin/sh", "-c", "myfolder/myscript.sh > /myfolder/logs/myscript.log");
pb.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T14:05:29.437

简短的回答：

这是可能的，但这是糟糕的设计，并且可能带来安全风险。最好以某种方式标记脚本需要运行并通过脚本检查标志

长答案（在评论之后）：

Servlet 通常用于为某事提供用户界面（或 api），例如访问数据或在您的情况下触发操作。因此，它们暗示了从远程资源（例如远程计算机）进行访问的可能性。在某些（实际上是大多数）情况下，远程计算机甚至可能不在网络中，例如某人的家。

暴露于外部世界的每台服务器都有可能以某种方式被黑客入侵或攻击，风险与该资源所带来的兴趣程度直接相关。

例如，如果您为一家大公司工作（这会被黑客注意到），并且此 servlet 用于触发本地存储库中的构建，并且您决定开发人员将能够在家工作并且需要登录为了触发构建或检查其构建状态，这意味着任何拥有正确凭据的人都可以从世界任何地方访问 servlet。现在让我们假设您的 perl 脚本需要访问您的 CI 服务器以获取某些数据，并且需要访问您的源存储库以获取其他数据（也许它甚至复制源而不是让 CI 服务器这样做）。在这种情况下，您只是在世界某个地方的某个人与公司的源代码之间创建了直接链接。这也意味着，即使它' 很难渗透您难以置信的安全服务，因为您花费了大量时间来弥补所有潜在的差距，它们仍然可能触发许多不必要的构建，如果您在持续部署中工作，甚至使这些构建投入生产（可能导致DOS 攻击或服务中断）。如果在某些时候有人决定脚本也需要从 servlet 中获取参数，那么您甚至可以让黑客的生活变得更轻松，最终可以让他访问您的系统。

我在上一段中描述的所有内容可能与您的情况完全无关，您可能正在开发一项服务，该服务将在您的家用计算机上运行并且除了您自己之外不会引起任何人的兴趣，但这并不能改变这是一个糟糕的设计这一事实（顺便说一句，这可能适合家庭使用）。

我在简短的回答中说的是，最好让 servlet 标记系统需要采取行动，例如在数据库甚至文件中设置一个标志，在这种情况下，黑客的生活会更加困难，因为有没有直接链接。这也使 servlet 立即响应，可能会自动更新状态，而不是等待 perl 脚本完成运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:15:01.020

你试过[Jsch 吗？](http://www.jcraft.com/jsch/)它可以做 ssh 和执行 shell 命令。

# java - 堆内存分配和性能

> ID：14055865
> 
> 赞同：1
> 
> 时间：2012-12-27T13:59:29.523
> 
> 标签：java, performance, memory-management, server-administration

一个应用程序在具有 16 GB RAM 和 100 GB 硬盘的高端 Linux 服务器上运行。我们有以下命令来运行程序。

> nohup java -server -Xmn512m -Xms1024m -Xmx1024m -Xss256k -verbose:gc -Xloggc:/logs/gc_log.txt MyClass >> /output.txt

这是由其他人写的，我试图理解为什么**使用 -verbose:gc -Xloggc:**。当我检查此命令时，它会收集 gc 日志，但这**会导致应用程序出现性能问题吗？** 此外，我想重新查看我的内存参数，该应用程序使用完整的 16 GB RAM，CPU 利用率低于 5%。我们正在分析内存使用的原因。但是**我们是否可以增加内存参数值以获得更好的性能或现有的就足够了？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:20:28.113

您问题的第一部分的答案是 -verbose:gc 意味着更多的 GC 日志将附加到 -Xloggc 中提供的文件中。如果 CPU 使用率小于 5%，则将 gc 日志保持为详细没有问题。

对于第二部分，如果您分配 1024m 的堆并且应用程序仍然占用 16GB RAM，这是不可能的。

# c++ - 我可以用 std::chrono::high_resolution_clock 替换 SDL_GetTicks 吗？

> ID：14055866
> 
> 赞同：6
> 
> 时间：2012-12-27T13:59:38.300
> 
> 标签：c++, c++11, sdl

检查来自 C++ 的新东西，我找到了 std::chrono 库。

我想知道 std::chrono::high_resolution_clock 是否可以很好地替代 SDL_GetTicks？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T16:30:36.177

使用 with 的优点`std::chrono::high_resolution_clock`是避免将时间点和持续时间存储在`Uint32`. 该`std::chrono`库附带了各种各样的`std::chrono::duration`s，您应该使用它们。这将使代码更具可读性，并且不那么模棱两可：

```
Uint32 t0 = SDL_GetTicks();
// ...
Uint32 t1 = SDL_GetTicks();
// ...
// Is t1 a time point or time duration?
Uint32 d = t1 -t0;
// What units does d have? 
```

与：

```
using namespace std::chrono;
typedef high_resolution_clock Clock;
Clock::time_point t0 = Clock::now();
// ...
Clock::time_point t1 = Clock::now();
// ...
// Is t1 has type time_point.  It can't be mistaken for a time duration.
milliseconds d = t1 - t0;
// d has type milliseconds 
```

用于保存时间点和持续时间的类型化系统相对于仅将内容存储在`Uint32`. 除了也许东西会被存储在一个`Int64`代替。但是，即使您真的想要，您也可以自定义：

```
typedef duration<Uint32, milli> my_millisecond; 
```

您可以检查的精度`high_resolution_clock`：

```
cout << high_resolution_clock::period::num << '/' 
     << high_resolution_clock::period::den << '\n'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:04:39.527

SDL_GetTicks 返回毫秒，因此完全可以使用 std::chrono 代替，但请注意必要的单位转换。它可能不像 SDL_GetTicks 那样简单。而且，起点也不一样。

# php - 将特定数量的值从 php 返回到 Android

> ID：14055867
> 
> 赞同：2
> 
> 时间：2012-12-27T13:59:55.970
> 
> 标签：php, android, mysql, json

我的 android 代码遇到问题。我正在尝试在 Android 中绘制图表。我想使用 PHP 脚本连接到 MySQL 库。我正在尝试向脚本发送一些参数，但它一直返回 null。PHP代码：

```
<?

mysql_connect(...);
mysql_select_db("temperature");

$Vreme = $_POST['Vreme'];
$Datum = $_POST['Datum'];

$q = mysql_query("SELECT * FROM temperature WHERE 
           ((datum > $Datum) || (datum = $Datum)) && (vreme > $Vreme) ");
while($e = mysql_fetch_assoc($q))
    $output[] = $e;

print(json_encode($output));

mysql_close();
?> 
```

和安卓代码：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("Vreme",s1));
nameValuePairs.add(new BasicNameValuePair("Datum",s2));
InputStream is = null;
try {
    String adresa="http://senzori.open.telekom.rs/grafik.php";
    HttpPost httppost = new HttpPost(adresa);
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
}
catch(Exception e) {
    Log.e("log_tag", "Error in http connection "+e.toString());
}
//convert response to string
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    result = sb.toString();

}
catch(Exception e) {
    Log.e("log_tag", "Error converting result "+e.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:51:04.980

综合评论区：

1：更改为 mysqli 或 pdo（请参阅[MySQLi 优于 MySQL 的优势](https://stackoverflow.com/questions/1171344/advantages-of-mysqli-over-mysql)）

2：防止sql注入（见中途[https://stackoverflow.com/tags/php/info](https://stackoverflow.com/tags/php/info)）

此外，在查看您的代码时，您不要在日期周围使用引号（如果不是数字，则使用 vreme）。尝试

```
"SELECT * FROM temperature WHERE (datum>='$Datum' && vreme>'$Vreme')" 
```

如果它不起作用，请在常规浏览器中测试您的页面，以确保 PHP 部分正常工作。您也可以添加一些`var_dump()`来检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:50:23.487

您应该尝试单独调试各个部分。

1.  尝试使用普通浏览器连接到您的 php 页面。如果它有效，您就知道错误在您的 java 代码中。如果它不起作用，您可以暂时不理会 java 代码并专注于使 php 页面正常工作。
2.  硬编码 Datum 和 Vreme 的有效值，并查看 php 代码在将 POST 部分排除在等式之外时是否有效。
3.  在 mysql 中尝试您的查询，看看它在放入 php 之前是否符合您的预期。
4.  启用[通用查询日志](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)以查看 php 发送到 mysql 的内容。

这样，您将查明错误。

# jquery - jQuery社会主义插件不起作用

> ID：14055870
> 
> 赞同：2
> 
> 时间：2012-12-27T14:00:00.080
> 
> 标签：jquery, jquery-plugins, plugins, social, referenceerror

我正在使用这个插件，但我没有运气。 [http://plugins.in1.com/socialist/demo](http://plugins.in1.com/socialist/demo)

我正在使用运行提供的示例代码的 WampServer。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src='./jquery.socialist.js'></script>
<link href="./jquery.socialist.css" rel="stylesheet" />
<script type="text/javascript">
$(document).ready(function(){
    $('#content').socialist({
        networks: [
            {name:'linkedin',id:'buddy-media'},
            {name:'facebook',id:'in1dotcom'},
            {name:'twitter',id:'in1dotcom'}
           ],
        isotope:false,
        random:false,
        fields:['source','heading','text','date','image','followers','likes']
    });
});
</script>
</head>
<body>
    <div id="content"></div>
</body>
</html> 
```

我在萤火虫中不断收到此错误。

```
ReferenceError: $ is not defined
$(document).ready(function () {
index.html (line 8) 
```

这会导致空白页。有人可以分享他们的知识吗？它成为一种痛苦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:03:21.257

您应该包含 jQuery 的本地版本，因为如果在您尝试准备好文档之前未加载 jQuery，则可能会发生这种情况。

也许它被防火墙了，或者你从 api 页面得到了超时；换句话说：插件与您的问题无关。

这里有一个类似的问题： [Uncaught ReferenceError: $ is not defined?](https://stackoverflow.com/questions/2075337/uncaught-referenceerror-is-not-defined)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:34:10.830

如何指定仅列出来自 FB 和 Twitter 的最新提要？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T14:18:18.597

实际上，如果您检查代码中的 jquery 脚本标记：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

您可以看到链接本身不正确。你只使用了 // 而不是 http://

好的链接是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

更正链接，您就可以开始了。

# c# - 将回调包装在回调中，以使用 monodevelop 在 C# 和 Objective-C 之间进行互操作

> ID：14055877
> 
> 赞同：2
> 
> 时间：2012-12-27T14:00:33.263
> 
> 标签：c#, objective-c, callback, interop, monodevelop

我正在包装一个使用 MonoDevelop 进行回调的块的 Obj-C api。我设法将我的 C# 委托连接到 Objective-C 中的一个块中，只要我用 [MonoPInvokeCallback] 装饰它们，它就可以正常工作，这样它就可以编译 AOT。

这一切都很好，直到一个块返回一个类实例。这让我回到了 C# 中一个指向类的指针（在我的实现中为 IntPtr）。通常，当我从 Obj-C 调用的方法返回此指针时，我会用我自己的托管类包装句柄并从那里调用所有方法 - 为包装的句柄提供一个不错的 C# 接口。在这种特定情况下， IntPtr 被直接调用到用户制作的回调中，所以我没有机会很好地包装它。

```
delegate void GetUserCallback(User user);

//User callback
[MonoPInvokeCallback (typeof (GetUserCallback))]
void PrintUserName(User user) {
    Console.WriteLine(user.name);
}

void GetUserById (int id, GetUserCallback callback) {
    ApiGetUserById(id, callback);
} 
```

现在这不起作用，因为我无法从 Objective-C 获取托管用户类。相反，我得到一个指向非托管用户类的指针。所以它是这样工作的：

```
delegate void GetUserCallbackPtr(IntPtr userPtr);

//User callback
[MonoPInvokeCallback (typeof (GetUserCallbackPtr))]
unsafe void PrintUserName(IntPtr userPtr) {
    User user = new User(userPtr);
    Console.WriteLine(user.name);
}

void GetUserById (int id, GetUserCallbackPtr callback) {
    ApiGetUserById(id, callback);
} 
```

这可以工作，但它在两种方面很丑：1.它要求用户明确声明“不安全”，属性（无法阻止）并实际将指针传递给包装类，这样他/她就会有一个“用户”的漂亮 C# 接口。

我试过这样做：在调用 API 并提供回调的方法上，创建一个新的回调来获取 IntPtr，包装它，并使用它来调用原始回调 - 例如像这样：

```
delegate void GetUserCallback(User user);
delegate void GetUserCallbackPtr(IntPtr userPtr);

//User callback
void PrintUserName(User user) {
    Console.WriteLine(user.name);
}

void GetUserById (int id, GetUserCallback callback) {
    ApiGetUserById(id, InnerCallback);
}

[MonoPInvokeCallback (typeof (GetUserCallbackPtr))]
void InnerCallback(IntPtr userPtr) {
    // How do I run the original "callback" from here?
} 
```

无法运行回调。所以我尝试了匿名委托（或 lambda）：

```
delegate void GetUserCallback(User user);
delegate void GetUserCallbackPtr(IntPtr userPtr);

//User callback
void PrintUserName(User user) {
    Console.WriteLine(user.name);
}

void GetUserById (int id, GetUserCallback callback) {
    ApiGetUserById(id, delegate(IntPtr userPtr) {
        callback(userPtr);
    });
} 
```

这也不起作用，因为匿名委托没有用 MonoPInvokeCallback 属性修饰，并且它是编译的 JIT，在 iphone 上不起作用。

除了让用户专门包装他/她自己不满足我的指针之外，我找不到任何其他方法来解决它。考虑过使用静态数组来存储回调，但我无法真正将返回的内部回调与我想要调用的回调匹配（或者我可以吗？）

有什么建议么？:)

编辑：我想我只是想在原始回调和调用者之间添加一个回调桥——就像一个中间人。但我不能用匿名代表来做这件事。有没有办法做到这一点？

# javascript - MVC3：获取通过 Javascript 添加的控件的值

> ID：14055880
> 
> 赞同：0
> 
> 时间：2012-12-27T14:00:42.213
> 
> 标签：javascript, asp.net-mvc-3, textbox, controller

我通过javascript向我的表单添加了一个文本框，如下所示

```
<input type="text" name="odd" id="odd" /> 
```

我在我的模型中添加了一个参数

```
public string odd {get; set;} 
```

现在，我希望通过调用变量奇数来检索控制器中此文本框中的文本，但它始终为空。除了给它们赋予相同的名称之外，我还需要做些什么来将这两者绑定在一起吗？

编辑

我的表格看起来像

```
using (Html.BeginForm("ControllerName", "Home", FormMethod.Get, new { enctype ="multipart/form-data" })){
  <div> @Html.DropDownListFor(m => m.model1.mode,
                        new SelectList(Model.model1.mylist, "Value", "Text"), "Select", new { @onchange="javascriptFxn(this.options[this.selectedIndex].text);"})
                    <div id="Other"></div>
 } 
```

和 javascript 看起来像

```
javascriptFxn(name){
  document.getElementById('Other').innerHTML = '<br /> <input type="text" name="odd">';
 } 
```

我的 Model 1 看起来像

```
public class model1{
  public string odd {get; set;}
 } 
```

和提交给控制器

```
 public ActionResult Submit(MyModel model)
   {
      string s = model.model1.odd;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:21:51.220

从提供的代码部分来看，您的模型（被传递给视图）似乎没有 Odd 属性，而是模型具有 Model1 属性，而该属性又具有 Odd 属性。尝试直接在模型上使用 Odd 属性，并检查在提交表单时是否发布了值。

# macos - OS X 山狮 Java 版

> ID：14055881
> 
> 赞同：0
> 
> 时间：2012-12-27T14:00:44.380
> 
> 标签：macos, osx-mountain-lion, java

我想在 Mac OS X 10.8.2 上使用 java 和 javac，但是在终端中当我用这个命令询问版本时：`java -version`或者`javac -version`它返回以下版本：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

和

```
javac 1.6.0_37 
```

当我转到设置应用程序并点击该`Other`部分中的 Java 图标时，它会打开 Java 控制面板，并且 jre 版本是`1.7.0_10`

使用哪个？以及如何更新终端中的 java，而不是使用 1.6.0 版本？有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:07:44.613

打开Java Preference App，你可能会发现几个JDK，你可以将JDK7拖到列表顶部，然后重新打开shell，调用java -version。它将更改为JDK7。

# mysql - 获取表 MySQL 中的元数据

> ID：14055885
> 
> 赞同：-3
> 
> 时间：2012-12-27T14:00:57.907
> 
> 标签：mysql, metadata

我需要编写一个查询来获取特定表中的元数据，但我不知道该怎么做。我真的不明白该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:47:15.283

使用以下查询获取表的元数据

```
select * from information_schema.tables
 where table_schema='your_database_name' and table_name='your_table_name'; 
```

它将提供 table_type、engine、version、row_format、table_rows、avg_row_length 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:31:23.933

有关表的元数据信息分布在 INFORMATION_SCHEMA 数据库中的几个表中。

table: schemata 保存与数据库相关的信息
table: tables 保存与数据库中
的表相关的信息 table: columns 保存与表中的列相关的信息

如果您无法使用当前 mysql 用户读取 information_schema，那么以下简单查询也可以为您提供帮助：（`show create table xx`这将返回一条记录作为结果集，您必须对其进行解析 - 不太容易做到）或`desc xx`（这将返回指定表中的列，以及有关它们的信息 - 列名、数据类型、null/not null、有关键的信息、有关默认值的信息）。

# javascript - 减去数组javascript的第一个和最后一个日期时间

> ID：14055890
> 
> 赞同：0
> 
> 时间：2012-12-27T14:01:11.237
> 
> 标签：javascript

我需要减去我从 XML 文件中获得的数组的第一个和最后一个元素（日期）。

该字符串具有以下格式：

```
 27/12/2012 13:09:15
 27/12/2012 13:40:47
 27/12/2012 14:56:43 
```

有谁知道如何做减法？

此致

我的功能是这样的：

```
 function recorrido() {

 downloadUrl("dates.asp", function(data) {
    var xml = xmlParse(data);
    var markersPath = xml.documentElement.getElementsByTagName("marker");   
    var path = [];

    for (var i = 0; i < markersPath.length; i++) {
    var lat = parseFloat(markersPath[i].getAttribute("lat"));
    var lng = parseFloat(markersPath[i].getAttribute("lng"));
    var timestamp= markersPath[i].getAttribute("timestamp");

    var time = 0;
    time+= Math.abs(timestamp[0]) - Math.abs(timestamp[timestamp.length-1]);

}//finish loop

alert(time);
alert(timestamp[0]);
alert(timestamp[timestamp.length-1]);

}); //end download url
}//end function 
```

动态加载的xml是这个：

```
<markers>
<marker id="1" lat="37.1914496222793" lng="-3.72511240175617" timestamp="27/12/2012 16:37:03"/>
<marker id="2" lat="37.1914401951048" lng="-3.72517991386109" timestamp="27/12/2012 16:37:05"/>
<marker id="3" lat="37.1914308368611" lng="-3.72523615956726" timestamp="27/12/2012 16:37:07"/>
<marker id="4" lat="37.1914216855078" lng="-3.72525860611944" timestamp="27/12/2012 16:37:09"/>
<marker id="5" lat="37.1913854939084" lng="-3.72528079402709" timestamp="27/12/2012 16:42:38"/>
<marker id="6" lat="37.191367191181" lng="-3.72532568708827" timestamp="27/12/2012 16:42:40"/>
</markers> 
```

所以我想要得到的是车辆已经行驶的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:05:43.617

你的问题分为两部分。数组访问和日期时间解析。

对于数组访问，对于数组a，`a[0]`和`a[a.length-1]`分别是第一个和最后一个。

Vanilla Javascript 有一个`Date.parse`方法，但它不是很灵活，并且不适用于您的特定字符串格式。我更喜欢像[Moment.js](http://momentjs.com/)这样的库。完成解析后，您可以减去日期（大概以毫秒为单位的时间差？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:54:50.397

转换为毫秒，然后计算差异：

```
a=['27/12/2012 13:09:15','27/12/2012 13:40:47','27/12/2012 14:56:43'];
alert(arrayDateSpan(a));
function dateToMilisec(str){
    var d=str.match(/([\d]{2})\/([\d]{2})\/([\d]{4}) ([\d]{2}):([\d]{2}):([\d]{2})/i)
    var date=new Date(d[3],d[2],d[1],d[4],d[5],d[6],0);
    return date.getTime();
}
function milisecToDays(unixmilisec){
    var unix=unixmilisec/1000;
    var day=60*60*24;
    var dayrest=unix%day;
    var days=(unix-dayrest)/day;
    var hourrest = dayrest%(60*60);
    var hours= (dayrest-hourrest)/(60*60);
    var minuterest = hourrest%60;
    var minutes=(hourrest-minuterest)/60;
    var seconds=minuterest;
    return days+' Days '+hours+':'+minutes+':'+seconds;

}
function arrayDateSpan(array){
    diff=dateToMilisec(array[array.length-1])-dateToMilisec(array[0]);
    return milisecToDays(diff);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:28:35.610

我会将日期转换为毫秒，然后减去它以获得差异。

例如：

```
<script>
var date1 = getTimeInMillisecond('27/12/2012 13:09:15');
alert("Date 1: "+date1.getTime());

var date2 = getTimeInMillisecond('27/12/2012 14:56:43');
alert("Date 2: "+date2.getTime());

var diff = date2-date1;
alert(diff/1000 + " seconds");
alert(diff/1000/60 + " minutes");
alert(diff/1000/60/60 + " hours");

function getTimeInMillisecond(timeString) {
    var time1 = '27/12/2012 13:09:15';
    // create date object for time 1
    var dateInfo = timeString.match(/(\d+)\/(\d+)\/(\d+) (\d+):(\d+):(\d+)/);
    return new Date(dateInfo[3],dateInfo[2]-1,dateInfo[1],dateInfo[4],dateInfo[5],dateInfo[6]);
}
</script> 
```

希望这就是您要实现的目标。

# java - 在 POST 到外部 URL 之前执行一些 JSF 业务逻辑

> ID：14055891
> 
> 赞同：2
> 
> 时间：2012-12-27T14:01:19.457
> 
> 标签：java, jsf, url, post, jsf-2

我的 JSF 页面上有以下表格，该表格发布到外部信用卡处理器。我想改用 JSF 操作方法，以便编写一些业务逻辑。如何通过操作方法发布帖子并包含以下字段？

```
 <form action="#{checkoutBean.sagepayURL}" method="post"
            id="SagePayForm" name="SagePayForm">

            <input type="hidden" name="VPSProtocol"
                value="#{checkoutBean.sagepayMessage.vpsProtocol}" /> <input
                type="hidden" name="TxType"
                value="#{checkoutBean.sagepayMessage.transactionType}" /> <input
                type="hidden" name="Vendor"
                value="#{checkoutBean.sagepayMessage.vendor}" /> <input
                type="hidden" name="Crypt" class="crypt"
                value="#{checkoutBean.sagepayMessage.crypt}" /> <input
                type="submit" 
                value="Proceed to Checkout" />

        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T11:36:31.633

您可以使用 JavaScript 提交隐藏的 JSF ajax 表单，该表单进而呈现提交付款表单的脚本。

```
<form action="#{checkoutBean.sagepayURL}" method="post"
    id="SagePayForm" name="SagePayForm">
    ...
    <input type="button" value="Proceed to Checkout" 
        onclick="document.getElementById('hiddenForm:link').click()" />
</form>

<h:form id="hiddenForm" style="display:none">
    <h:commandLink id="link" action="#{checkoutBean.preprocess}">
        <f:ajax render="@form" />
    </h:commandLink>
    <h:outputScript rendered="#{checkoutBean.preprocessed}">
        document.getElementById("SagePayForm").submit();
    </h:outputScript>
</h:form> 
```

和

```
private boolean preprocessed; // +getter

public void preprocess() {
    // ...

    preprocessed = true;
} 
```

* * *

根据您的问题历史，您似乎正在使用[OmniFaces](http://omnifaces.org)，在这种情况下，您还可以使用[`<o:commandScript>`](http://showcase.omnifaces.org/components/commandScript)以下方式对其进行简化：

```
<form action="#{checkoutBean.sagepayURL}" method="post"
    id="SagePayForm" name="SagePayForm">
    ...
    <input type="button" value="Proceed to Checkout" onclick="preprocess()" />
</form>

<h:form>
    <o:commandScript name="preprocess" action="#{checkoutBean.preprocess}"
        oncomplete="document.getElementById('SagePayForm').submit()" />
</h:form> 
```

# c# - codeSubDirectories 的问题

> ID：14055892
> 
> 赞同：0
> 
> 时间：2012-12-27T14:01:20.400
> 
> 标签：c#, asp.net, runtime-error, app-code

这是一个冗长的 - 请忍耐..！

我有一个网站，目前使用一个整体的“app_code”dll 文件 - 并且正在考虑将 dll 分成几部分以便更好地维护。

我正在使用 web.config 中的部分将我的 app_code 拆分为多个文件夹式 dll 文件。该部分如下所示：

```
<codeSubDirectories>
  <add directoryName="CodeSubDir1"/>
  <add directoryName="CodeSubDir2"/>
  ...
</codeSubDirectories> 
```

我已经为“app_code”文件夹中的每个文件创建了单独的子文件夹，`.cs`除了少数相互引用的 .cs 文件 - 因此需要放在同一个子文件夹中。.cs 文件被移动到其相应的子文件夹。在这些更改之后，“app_code”文件夹下没有 .cs 文件。我已经设置了*codeSubDirectories*中元素的顺序，以便处理所有其他引用。

该网站在我的开发中成功构建和发布。环境。发布时选中“允许此预编译站点可更新”和“使用固定命名和单页程序集”复选框。没有`app_code.dll`，并且`app_code.compiled`在发布期间会创建文件，因为“app_code”文件夹下没有 .cs 文件。app_code 下的每个子文件夹都发布为`app_subcode_sub_folder_name.dll`和`app_subcode_sub_folder_name.compiled`。

该网站及其发布的版本在我的开发中也可以正常工作。环境。

在我将发布的文件更新到我的暂存设置 [`.NET 3.5/IIS 6/Win 2003]`后，我收到这两个错误 [在两个单独的 URL 上]：

**URL-1 上的错误：**
无法加载文件或程序集“App_Code，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.IO.FileNotFoundException：无法加载文件或程序集“App_Code，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。源文件：xxx\v2.0.50727\Temporary ASP.NET Files\xxx\xxx\xxx\App_Web_xxx.8.cs 行：0

**URL-2 上的错误：** 找不到资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。

我的分段更新过程是：我将`"app_subcode_xxx.dll"`和`"app_subcode_xxx.compiled"`文件复制到“bin”文件夹并删除现有的“app_code.dll”和“app_code.compiled”文件。我在登台时将*codeSubDirectories*部分添加到 web.config 中。

我已经在`GAC`、代码和注册表中搜索了对程序集“app_code”的任何引用，但没有成功。我错过了什么？是否需要任何其他步骤才能在我的临时站点上进行这项工作？我是否还需要从 dev.xml 复制所有其他已发布的 DLL。分期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:10:31.810

将所有 dll 和编译文件从发布文件夹复制到登台环境。可能是其他 dll 和编译文件仍在引用应用程序代码。

# php - Session Handler 写操作返回值

> ID：14055893
> 
> 赞同：1
> 
> 时间：2012-12-27T14:01:21.973
> 
> 标签：php, session

使用 PHP`SessionHandler`可以[`SessionHandler::write()`](http://php.net/sessionhandler.write)返回一个值。该手册对此有些含糊：

> **返回值**
> 
> 返回值（通常`TRUE`在成功时，`FALSE`在失败时）。请注意，此值在内部返回给 PHP 进行处理。

*（[界面相同](http://php.net/sessionhandlerinterface.write)）*

我想知道PHP处理的含义是什么。

我已经很聪明了，但没有提到回调[`session_set_save_handler`](http://php.net/session_set_save_handler)的返回值。*`write()`*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:35:27.803

好吧，在这种情况下，“内部返回给 PHP”意味着：它*不会*传递回您的代码（因为返回类型`session_write_close()`是`void`.）

换句话说，PHP 用它做了什么应该被视为未知（除非您查看 PHP 的实际 C 源代码）；因此，如果您的自定义会话处理程序以某种方式无法写入会话数据，我会简单地遵循返回`true`成功的建议。`false`

如果我猜的话，我会说也许 PHP 会生成一条警告消息，或者这可能只是为了在更高版本的 PHP 中使用。

找出答案的一种方法是简单地覆盖`SessionHandler::write()`以始终返回 false 并查看会发生什么。检查控制台是否有任何警告。

# c++ - 将 8 个十六进制字符转换为 4-uint8_t 数组的最有效方法？

> ID：14055898
> 
> 赞同：1
> 
> 时间：2012-12-27T14:01:48.137
> 
> 标签：c++, integer, hex

我有一个`const char*`, 指向一个包含 8 个字符的数组（可能是较大字符串的一部分），其中包含一个十六进制值。我需要一个将这些字符转换为 4 数组的函数`uint8_t`，其中源数组中的前两个字符将成为目标数组中的第一个元素，依此类推。例如，如果我有这个

```
const char* s = "FA0BD6E4"; 
```

我希望它转换为

```
uint8_t i[4] = {0xFA, 0x0B, 0xD6, 0xE4}; 
```

目前，我有这些功能：

```
inline constexpr uint8_t HexChar2UInt8(char h) noexcept
{
    return static_cast<uint8_t>((h & 0xF) + (((h & 0x40) >> 3) | ((h & 0x40) >> 6)));
}

inline constexpr uint8_t HexChars2UInt8(char h0, char h1) noexcept
{
    return (HexChar2UInt8(h0) << 4) | HexChar2UInt8(h1);
}

inline constexpr std::array<uint8_t, 4> HexStr2UInt8(const char* in) noexcept
{
    return {{
        HexChars2UInt8(in[0], in[1]),
        HexChars2UInt8(in[2], in[3]),
        HexChars2UInt8(in[4], in[5]),
        HexChars2UInt8(in[6], in[7])
    }};
} 
```

这是我从哪里调用它的样子：

```
const char* s = ...; // the source string
std::array<uint8_t, 4> a; // I need to place the resulting value in this array
a = HexStr2UInt8(s); // the function call does not have to look like this 
```

我想知道，有没有更有效（和便携）的方式来做到这一点？例如，返回是`std::array`一件好事，还是应该将`dst`指针传递给`HexChars2UInt8`? 或者还有其他方法可以改善我的功能吗？

我问这个的主要原因是因为我可能需要在某个时候优化它，如果将来更改 API（函数原型）会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:49:49.493

您可以添加并行性，因为 HexChar2Uint8 可以同时访问 8 个字符。一次加载未对齐的 64 位值可能比加载 8 个字符更快（并调用转换函数）

```
hexChar2Uints(uint8_t *ptr, uint64_t *result)  // make result aligned to qword
{
  uint64_t d=*(uint64_t*)ptr;
  uint64_t hi = (d>>6) & 0x0101010101010101;
  d &= 0x0f0f0f0f0f0f0f0f;
  *result = d+(hi*9);  // let compiler decide the fastest method
} 
```

最后阶段必须按照 OP 的建议完成，只需从修改后的“字符串”中读取：

```
for (n=0;n<4;n++) arr[n]=(tmp[2*n]<<4) | tmp[2*n+1]; 
```

可以大大加快速度的可能性很小。该`<< 4`操作也可以注入到 hexChar2Uints 使其并行，但我怀疑它可以在少于 4 次算术运算中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:20:06.380

最有效的，即最快的转换方法可能是为每对可能的 2 个字符设置一个包含 65536 个值的表，并将它们的转换存储在有效的值中。

如果您将它们存储为无符号字符，您将无法捕获错误，因此您只需要希望获得有效的输入。如果您将值类型存储为大于 unsigned char ，您将能够使用某种“错误”值，但检查是否得到一个将是开销。（额外的 65536 字节可能不是）。

不过，您所写的内容可能也足够有效。当然，您也不会再检查无效输入，并且无论如何都会得到结果。

如果你保留你的，我可能会改变：

```
((h & 0x40) >> 3) | ((h & 0x40) >> 6) 
```

这似乎可以替代

```
( (h & 0x40) ? 10 : 0 ) 
```

我看不出我的表达效率如何不如您的表达，并且意图可能更清晰。（`0xA`如果您坚持使用十六进制，请使用而不是 10）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-27T14:41:41.390

有几种可能的方法。最简单和最便携的是将字符分解为两个 character `std::string`，使用每个来初始化一个`std::istringstream`，设置正确的格式标志，并从中读取值。一个更有效的解决方案是创建一个字符串，插入空格来分隔各个值，然后只使用 one `std::istringstream`，例如：

```
std::vector<uint8_t>
convert4UChars( std::string const& in )
{
    assert( in.size() >= 8 );
    std::string tmp( in.begin(), in.begin() + 8 );
    int i = tmp.size();
    while ( i > 2 ) {
        i -= 2;
        tmp.insert( i, 1, ' ');
    }
    std::istringstream s(tmp);
    s.setf( std::ios_base::hex, std::ios_base::basefield );
    std::vector<int> results( 4 );
    s >> results[0] >> results[1] >> results[2] >> results[3];
    if ( !s ) {
        //  error...
    }
    return std::vector<uint8_t>( results.begin(), results.end() );
} 
```

如果您真的想手动完成，另一种方法是创建一个 256 条目表，按每个字符索引，然后使用它：

```
class HexValueTable
{
    std::array<uint_t, 256> myValues;
public:
    HexValueTable()
    {
        std::fill( myValues.begin(), myValues.end(), -1 );
        for ( int i = '0'; i <= '9'; ++ i ) {
            myValues[ i ] = i - '0';
        }
        for ( int i = 'a'; i <= 'f'; ++ i ) {
            myValues[ i ] = i - 'a' + 10;
        }
        for ( int i = 'A'; i <= 'A'; ++ i ) {
            myValues[ i ] = i - 'a' + 10;
        }
    }
    uint8_t operator[]( char ch ) const
    {
        uint8_t results = myValues[static_cast<unsigned char>( ch )];
        if ( results == static_cast<unsigned char>( -1 ) ) {
            //  error, throw some exceptions...
        }
        return results;
    }
};

std::array<uint8_t, 4>
convert4UChars( std::string const& in )
{
    static HexValueTable const hexValues;
    assert( in.size() >= 8 );
    std::array<uint8_t, 4> results;
    std::string::const_iterator source = in.begin();
    for ( int i = 0; i < 4; ++ i ) {
        results[i] = (hexValues[*source ++]) << 4;
        results[i] |= hexValues[*source ++];
    }
    return results;
} 
```

# macos - 我可以为 Autolayout 中的默认 Aqua 空间使用什么常量？

> ID：14055900
> 
> 赞同：23
> 
> 时间：2012-12-27T14:01:55.000
> 
> 标签：macos, cocoa, autolayout

根据[Cocoa Auto Layout Guide](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/constraintFundamentals.html#//apple_ref/doc/uid/TP40010853-CH2-SW1)，我可以使用视觉约束格式语言中的破折号来“表示标准 Aqua 空间：”

```
[self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"[a]-[b]"
                                                             options:0
                                                             metrics:nil
                                                               views:viewDict]]; 
```

*但是，如果我在不*使用可视格式语言的情况下构建约束，我似乎找不到`NSLayout...`允许我做同样事情的常量或方法：

 *```
[self addConstraint:[NSLayoutConstraint constraintWithItem:a
                                                 attribute:NSLayoutAttributeTrailing
                                                 relatedBy:NSLayoutRelationEqual
                                                    toItem:b
                                                 attribute:NSLayoutAttributeLeading
                                                multiplier:1.0f
                                                  constant:<# ??? #>]]; 
```

在这种情况下，是否有一个常量（或其他值或方法）可以用来定义 Aqua 空间？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-27T16:03:05.610

我发现“标准 Aqua 空间”在兄弟视图之间为 8.0，在视图与其父视图之间为 20.0。

```
NSView* view = [NSView new] ;
NSLayoutConstraint* constraintWithStandardConstantBetweenSiblings = [NSLayoutConstraint constraintsWithVisualFormat:@"[view]-[view]"  options:0  metrics:nil  views:NSDictionaryOfVariableBindings(view) ] [0] ;
CGFloat standardConstantBetweenSiblings = constraintWithStandardConstantBetweenSiblings.constant ;    // 8.0

NSView* superview = [NSView new] ;
[superview addSubview:view] ;
NSLayoutConstraint* constraintWithStandardConstantBetweenSuperview = [NSLayoutConstraint constraintsWithVisualFormat:@"[view]-|"  options:0  metrics:nil  views:NSDictionaryOfVariableBindings(view) ] [0] ;
CGFloat standardConstantBetweenSuperview = constraintWithStandardConstantBetweenSuperview.constant ;    // 20.0 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-28T01:55:01.590

对于 iOS 用户：

```
#import "NSLayoutConstraint+StandardOffsets.h"

@implementation NSLayoutConstraint (StandardOffsets)

+ (CGFloat)standardConstantBetweenSiblings
{
    static CGFloat value;

    if(!isnormal(value)) {
        UIView *view = [UIView new] ;
        NSLayoutConstraint* constraintWithStandardConstantBetweenSiblings = [NSLayoutConstraint constraintsWithVisualFormat:@"[view]-[view]"  options:0  metrics:nil  views:NSDictionaryOfVariableBindings(view) ] [0] ;
        value = constraintWithStandardConstantBetweenSiblings.constant ;    // 8.0
    }
    return value;
}

+ (CGFloat)standardConstantBetweenSuperview
{
    static CGFloat value;

    if(!isnormal(value)) {
        UIView *view = [UIView new] ;
        UIView *superview = [UIView new] ;
        [superview addSubview:view] ;
        NSLayoutConstraint* constraintWithStandardConstantBetweenSuperview = [NSLayoutConstraint constraintsWithVisualFormat:@"[view]-|"  options:0  metrics:nil  views:NSDictionaryOfVariableBindings(view) ] [0] ;
        value = constraintWithStandardConstantBetweenSuperview.constant ;    // 20.0
    }
    return value;
}

@end 
```

PS：我输入了一个错误报告，头文件中没有提供常量！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T23:11:18.230

根据[John Sauer 的回答](https://stackoverflow.com/a/14057523/104200)，我最终在 NSLayoutConstraint 类别上编写了几个方法来查找常量：

*   `+standardAquaSpaceConstraintFromItem:toItem:`返回使用可视格式语言构造的单个 NSLayoutConstraint；它断言从格式生成的约束数组只有一个项目，然后获取该项目并将其返回。
*   `+standardAquaSpaceFromItem:toItem:`从前一个方法中将常量从约束中拉出，并将其作为 CGFloat 返回。

这样，如果我需要进行计算，我可以自己获取常量值，或者只获取具有正确间距的单个布局约束（例如，分配给约束`@property`或直接添加到我的视图中）。*

# php - 将用户提供的（但与模型无关的）参数传递给控制器 ？

> ID：14055903
> 
> 赞同：0
> 
> 时间：2012-12-27T14:02:04.537
> 
> 标签：php, cakephp, cakephp-1.3

这个问题是在维护一个用 CakePHP 1.3 编写的应用程序时出现的。请记住，虽然我可以并且确实阅读了文档，但我对 Cake 的经验非常有限。

该应用程序有一个 Widget 模型和一个 WidgetController。编辑 Widget 时，用户可选择的一种选择是以三种模式之一将数据大量导入 Widget：添加、删除或用导入的内容替换 Widget 数据。

当前的实现完全是一团糟（有一个“编辑”操作执行 Widget 支持的所有 10 种左右不同的变异功能；它通过从提交的表单中嗅探参数来决定要做什么），所以我打破了“大量的东西”变成一个新的动作：

```
function batch($id)
{
    // massively apply data to Widget $id; either add, remove or replace
} 
```

此操作由“编辑”视图中的表单触发：

```
// Only relevant elements shown
echo $form->create('Widget', array('enctype'=>'multipart/form-data', 'action' => 'batch')); ?>
echo $form->input('id');
echo $form->input('action', array('type'=>'select',
    'options'=>array(
        'append'=>__('Append', true), 
        'replace'=>__('Replace existing', true), 
        'delete'=>__('Delete specified', true)
    ));
echo $form->end(); ?> 
```

就目前而言，这种形式将`action`参数捆绑到`Widget`数组中，我可以从控制器中获取它的唯一方法是使用`$this->data['Widget']['action']`.

这是丑陋的并且在语义上是错误的，所以我希望有更好的方法来做到这一点。

理想情况下，我想提交到 URL `/widget/batch/X/append`，但这是不可能的，因为该`append`部分没有固定。所以我会解决以下任何一个问题：

*   以某种方式将操作作为控制器参数传递，例如`$id`
*   以某种方式将动作作为命名参数传递，允许`$this->params['named']['action']`
*   其他一些不需要安装自定义路由且不需要 JavaScript 的方式

Cake 1.3 能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:42:18.427

## 不

不，您不能根据 post 参数将请求路由到不同的操作，也不能单独使用 php 更改表单的操作。这可能与任何框架都相同。

> 理想情况下，我想提交到 URL /widget/batch/X/append，但这是不可能的，因为附加部分不是固定的。

做到这一点的唯一方法是使用 javascript - 当然，编写一些适当的 js来做到这[一点并不难。](https://stackoverflow.com/questions/8295104/jquery-to-change-a-forms-target)

## 然而

如果您不想在用户更改选择时使用 javascript 来操作表单操作，或者只是想要最简单的解决方案 - 您可以使用[setAction](https://github.com/cakephp/cakephp/blob/1.3/cake/libs/controller/controller.php#L770)在内部将请求重定向到更合适、专用的控制器操作：

```
function batch() {
    if (!empty($this->data['Widget']['action'])) {
        $this->setAction($this->data['Widget']['action']);
    }
}

function append() {
    if ($this->data) {
        if ($this->Widget->append($this->data)) {
            $this->Session->setFlash('Widget appended successfully');
        } else {
            $this->Session->setFlash('Error: Unable to append widget');
        }
    }
} 
```

通过这种方式，您可以将现有代码重构为更易于管理和合乎逻辑的方法。

# jquery - jquery - 变量是否只需要声明函数的顶部？

> ID：14055905
> 
> 赞同：0
> 
> 时间：2012-12-27T14:02:19.560
> 
> 标签：jquery

听说按照标准，变量都需要在函数的顶部声明。

但是如果元素是在函数之间创建的，而另一个元素取决于创建元素的宽度或高度（动态），我们如何在顶部声明变量？

这是我的功能：

```
var stepSlider = function(holder,column){

    $.each(holder, function(i,value) {

       var  container = $(value),
            colCount = column,
            boardViewer = container.find('.stepRangeCompound'),
            boardHolder = container.find('.boardHolder'),
            board =  container.find('.indBoard'),
            boardCount = board.size(),
            boardWidth = board.outerWidth(true),
            boardHeight = board.outerHeight(true),

            initial=0;

        //setting sizes

        while(initial < boardCount){
            if(initial % colCount === 0){
                $('<div />',{
                    class:'boardColumn',
                    css:{
                        float:'left',
                        height:boardHeight*colCount
                    }
                    })
                .appendTo(boardHolder) //after append only i am getting the width and element at all.
            }
            $('.boardColumn:last').append(board[initial]);
            initial++;
        }

        var colWidth = $('.boardColumn').width(), //i am declaring variable here
            coloSize = $('.boardColumn').size();

        boardViewer.css({
            width:colCount*colWidth // i am applying the values here.
        });

        boardHolder.css({
            width:coloSize * colWidth // i am applying the values here.
        });

    })
} 
```

如果我错了，有人会指导我以正确的方式仅在顶部声明所有变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:09:49.083

您可以在 JavaScript 中动态声明一个变量。**无需声明**。但即便如此，您仍想在顶部声明所有使用的变量。你可以用空值声明它们，然后为它们分配你想要的值

```
var colWidth,coloSize ;  // on the top you declare 
.
.
.
colWidth = $('.boardColumn').width();  // in the middle you assign them the value
coloSize = $('.boardColumn').size(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:05:14.193

您可以在顶部声明它们，使用 null 值，并在创建元素时分配值

# visual-studio - 在 Windows 8 上安装 Visual Studio 2005

> ID：14055907
> 
> 赞同：2
> 
> 时间：2012-12-27T14:02:38.590
> 
> 标签：visual-studio, visual-studio-2008, windows-8, visual-studio-2005

我目前正在从事一个长期项目，我需要 Visual Studio 2005、2008、2012（不需要 2010）。现在我有 Windows 7，但我真的很想升级。是否可以在 Windows 8 上安装所有这些版本的 Visual Studio？

2012 显然可以安装（并且不需要 2010）。我已经发现报告说，如果通过 Windows 功能启用 3.5 框架，2008 也是可能的，但我不确定 Visual Studio 2005。

有可能吗，有人有这方面的经验吗？

PS：不要提供“为什么还要使用2005、2008、...”的解决方案，我真的需要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:52:05.397

在 VMWare 上安装后（Virtualbox 出现错误），我启用了框架 3.5（确实包含 2.0 和 2.5）。之后我安装了 Visual Studio C# Express Edition。在 VS 的安装和启动过程中，它会给出很多“该程序以兼容性问题而闻名”的警告，并且它们提供在线搜索帮助或像往常一样运行它。我一直选择让它像往常一样运行。它安装得很好，我可以编译和运行 Visual C# Windows 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T19:17:09.590

Visual Studio 2005 Standard 安装对我来说基本没问题。我将它安装在 x64 CPU 上的 Windows 8 上。它抱怨了一堆“已知的兼容性问题”，但如果我告诉它继续，一切似乎都很好。唯一的问题是“Microsoft SQL Server 2005 Express Edition x64”安装失败。此外，我第一次必须以管理员身份运行 Visual Studio，以便它可以完成设置，但之后我只是用我的普通帐户运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T14:19:45.523

下载 Windows 8 Enterprise 评估版并安装到 VMWare 或 Virtual Box。这是一个 3 个月的试用期，可以让您测试 VS2005 以及其他。下载后，它是一个快速安装。您可以从这里下载：http: [//msdn.microsoft.com/en-us/evalcenter/jj554510.aspx](http://msdn.microsoft.com/en-us/evalcenter/jj554510.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-08T16:02:08.397

为了在 Windows 7 和 Windows 8 上安装 Visual Studio 2005，我安装了三个东西：(1) Visual Studio 2005，(2) Visual Studio 2005 Service Pack 1，和 (3) Visual Studio 2005 Service Pack 1 Update for Windows远景。

在 Microsoft 的网站上找到 Visual Studio 2005 服务包可能有点困难，因为所有内容都与 Visual Studio 2012 及更高版本有关。

安装 Visual Studio 2005 时，会显示许多不兼容的警告。我只需点击它们即可到达终点。

我还进行了自定义安装，但不安装某些组件：(1) Crystal Reports 和 (2) SQL Server 2005 Express Edition。

[Microsoft Visual Studio 2005 Team Suite Service Pack 1](http://www.microsoft.com/en-us/download/details.aspx?id=5553)似乎适用于 Visual Studio 2005 的所有版本，包括我使用的专业版。

[Microsoft Visual Studio 2005 Service Pack 1 Update for Windows Vista](http://www.microsoft.com/en-us/download/details.aspx?id=7524)需要更新 Service Pack 1 才能与 Windows Vista 及更高版本一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-20T19:14:09.167

默认情况下，Visual Studio 2005 / 2008 不会安装在高于 7 的 Windows 版本上。

在 Windows 8.1 中，转到：控制面板 > 程序和功能 > 打开或关闭 Windows 功能

选中标有“.NET 3.5（包括 1.0 和 2.0）”的框，然后按 OK / Apply。

我的系统在尝试下载此类程序的文件时遇到问题，因此有一种方法可以通过运行从 Windows 安装光盘安装文件的脚本来绕过此错误。

这是脚本（至少对于错误 0x800F0906）： `Dism /online /enable-feature /featurename:NetFx3 /All /Source:D:\sources\sxs /LimitAccess`

如果需要，您可以将 /Source:D: 替换为您可能用于光驱/虚拟驱动器的任何驱动器号。

# c# - 获取 2 个数据集 c# 中的差异

> ID：14055909
> 
> 赞同：10
> 
> 时间：2012-12-27T14:02:43.207
> 
> 标签：c#, merge, dataset, diff

我正在编写一个简短的算法，它必须比较两个数据集，以便可以进一步处理两者之间的差异。我尝试通过合并这两个 DataSet 来实现这个目标，并将产生的更改放入一个新的 DataSet 中。

我的方法如下所示：

```
 private DataSet ComputateDiff(DataSet newVersion, DataSet oldVersion) 
    {
        DataSet diff = null;
        oldVersion.Merge(newVersion);
        bool foundChanges = oldVersion.HasChanges();
        if (foundChanges) 
        {
            diff = oldVersion.GetChanges();
        }
        return diff;
    } 
```

foundChanges 的结果始终为 false，即使两个 DataSet 中的值不同。两个数据集具有相同的结构。它们由三个数据表组成，这些数据表是数据库中三个查询的结果。合并工作正常，没有问题。

我的问题是：是否有任何合理的解释为什么 foundChanges 变量总是错误的，如果没有，Linq 是否会为这个问题提供适当的解决方案，或者我是否必须通过遍历数据集来确定更改

以下是一些进一步的信息： 编程语言是 C# 我正在使用 .Net 框架 4.0 我正在 Windows 8 机器上开发 提到的数据来自数据库（MSSQL Server 2012 express） 我的数据集或数据表没有任何 PK我所知道的。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:09:03.383

我认为问题在于您不了解 .NET 数据集。DataTable 保留加载到其中的每个值的“原始”副本。当一个值发生变化时，DataTable 能够检测到变化。同样，DataTable 跟踪已添加或删除的行。该`HasChanges()`函数只是爬取数据表并检查是否有任何更改（更改的值、新行、删除的行等）

请参阅 MSDN 文档：http:
[//msdn.microsoft.com/en-us/library/system.data.dataset.haschanges.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataset.haschanges.aspx)

比较两个数据集很棘手，我不知道有任何内置函数可以处理这个问题（因为每个程序员都有自己的“等价”定义）。

看：

*   [如何比较](https://stackoverflow.com/questions/7517968/how-to-compare-2-datatables/7518025#7518025)StackOverflow 上的 2 个数据表
*   在 CodeProject 上 [使用 LINQ 比较数据集](http://www.codeproject.com/Articles/30102/Comparing-DataSets-using-LINQ)

下面的代码将通过基于键列查找添加/删除的行来比较两个数据表，并通过比较匹配行的值（同样基于键）来查找修改的行。扩展它来比较数据集（通过比较数据集之间名称相似的表）将是相当简单的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;

namespace DataSetComparison
{
    class Program
    {
        static void Main( string[] args )
        {

            var l_table1 = new DataTable();
            l_table1.Columns.Add( "Key", typeof( int ) );
            l_table1.Columns.Add( "Name", typeof( string ) );
            l_table1.Columns.Add( "Age", typeof( int ) );

            var l_table2 = new DataTable();
            l_table2.Columns.Add( "Key", typeof( int ) );
            l_table2.Columns.Add( "Name", typeof( string ) );
            l_table2.Columns.Add( "Age", typeof( int ) );

            l_table1.Rows.Add( l_table1.NewRow() );
            l_table1.Rows[l_table1.Rows.Count - 1]["Key"] = 0;
            l_table1.Rows[l_table1.Rows.Count - 1]["Name"] = "Alfred Harisson";
            l_table1.Rows[l_table1.Rows.Count - 1]["Age"] = 36;
            l_table1.Rows.Add( l_table1.NewRow() );
            l_table1.Rows[l_table1.Rows.Count - 1]["Key"] = 1;
            l_table1.Rows[l_table1.Rows.Count - 1]["Name"] = "Matthew George";
            l_table1.Rows[l_table1.Rows.Count - 1]["Age"] = 41;
            l_table1.Rows.Add( l_table1.NewRow() );
            l_table1.Rows[l_table1.Rows.Count - 1]["Key"] = 2;
            l_table1.Rows[l_table1.Rows.Count - 1]["Name"] = "Franklin Henry";
            l_table1.Rows[l_table1.Rows.Count - 1]["Age"] = 33;

            l_table2.Rows.Add( l_table2.NewRow() );
            l_table2.Rows[l_table2.Rows.Count - 1]["Key"] = 0;
            l_table2.Rows[l_table2.Rows.Count - 1]["Name"] = "Alfred Harisson";
            l_table2.Rows[l_table2.Rows.Count - 1]["Age"] = 36;
            l_table2.Rows.Add( l_table2.NewRow() );
            l_table2.Rows[l_table2.Rows.Count - 1]["Key"] = 1;
            l_table2.Rows[l_table2.Rows.Count - 1]["Name"] = "Matthew George";
            l_table2.Rows[l_table2.Rows.Count - 1]["Age"] = 42; // Record 1 "modified"
            // Record 2 "deleted"
            // Record 3 "added":
            l_table2.Rows.Add( l_table2.NewRow() );
            l_table2.Rows[l_table2.Rows.Count - 1]["Key"] = 3;
            l_table2.Rows[l_table2.Rows.Count - 1]["Name"] = "Lester Kulick";
            l_table2.Rows[l_table2.Rows.Count - 1]["Age"] = 33;

            // Using table 1 as the control, find changes in table 2

            // Find deleted rows:
            var l_table2Keys = l_table2.Select().Select( ( r ) => (int) r["Key"] );
            var l_deletedRows = l_table1.Select().Where( ( r ) => !l_table2Keys.Contains( (int) r["Key"] ) );

            foreach ( var l_deletedRow in l_deletedRows )
                Console.WriteLine( "Record " + l_deletedRow["Key"].ToString() + " was deleted from table 2." );

            // Find added rows:
            var l_table1Keys = l_table1.Select().Select( ( r ) => (int) r["Key"] );
            var l_addedRows = l_table2.Select().Where( ( r ) => !l_table1Keys.Contains( (int) r["Key"] ) );

            foreach ( var l_addedRow in l_addedRows )
                Console.WriteLine( "Record " + l_addedRow["Key"].ToString() + " was added to table 2." );

            // Find modified rows:
            var l_modifiedRows = l_table2.Select()
                                         .Join(
                                            l_table1.Select(),
                                            r => (int) r["Key"],
                                            r => (int) r["Key"],
                                            ( r1, r2 ) => new
                                                {
                                                    Row1 = r1,
                                                    Row2 = r2
                                                } )
                                        .Where(
                                            values => !( values.Row1["Name"].Equals( values.Row2["Name"] ) &&
                                                         values.Row1["Age"].Equals( values.Row2["Age"] ) ) )
                                        .Select( values => values.Row2 );

            foreach ( var l_modifiedRow in l_modifiedRows )
                Console.WriteLine( "Record " + l_modifiedRow["Key"].ToString() + " was modified in table 2." );

            Console.WriteLine( "Press any key to quit..." );
            Console.ReadKey( true );

        }
    }
} 
```

控制台输出：

> 从表 2 中删除记录 2。在表 2
> 中添加记录 3。
> 在表 2 中修改记录 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:17:54.000

如果两个数据集的架构相同，那么您可以尝试以下一个

```
Dataset dsTest1
DataSet dsTest2
DataSet dsFinal;
dsFinal.Merge(dsTest1);
dsFinal.AcceptChanges();
dsFinal.Merge(dsTest2);
DifferenceDataSet = dsFinal.GetChanges() 
```

如果两个数据集的架构不同，那么您必须手动执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T14:50:41.367

正如您从其他一些答案中看到的那样，要区分两个数据集并不容易。

这就是 DataSet.GetChanges() 的目的。如果您从数据集开始并直接对该数据集进行更改（即，当用户更新单元格时，当用户提交表单时，等等），那么 DataSet 会跟踪更改。这样您就可以调用 DataSet.GetChanges() 来获取更改（或差异）。然后，您可以只处理更改。

获取初始数据集和最终数据集并获得差异是一个难题。同样将最终数据集与旧数据集合并没有意义，因为最终数据集是合并的结果。

# android - （未详细）创建 Android 虚拟设备 (AVD) 时出现恐慌

> ID：14055910
> 
> 赞同：1
> 
> 时间：2012-12-27T14:02:52.240
> 
> 标签：android, avd, panic

编程新手，刚刚开始使用所有这些......我已经搜索过，但我没有找到任何与我的问题相关的内容

所以就在这里，所以我正在尝试为 android 构建一个简单的 hello world 应用程序，但我想测试运行 AVD 只是为了检查一下。但我遇到了这个问题：（![截图 1](../Images/25b364d960f4de97c28e42a8d61bc690.png) 它只显示“恐慌：无法创建 AVD”，没有更多信息）

我曾尝试创建基于 4.2 和 2.3.3 的虚拟设备，但这些都没有启动。我已经启动并运行了sdk，没问题。![截图 2](../Images/49ba1b30b91968f6b2b57745e6d410fd.png) 我也有所需的所有文件（如系统映像等） Eclipse 64 位也运行良好（有一些错误，但使用搜索解决了它们）

有什么帮助吗？我运行 Windows 7 64 位、500gb 硬盘、4gb 内存、i3@2.4ghz SDK、Java、Eclipse 和所有其他工具都是基于 64 位的。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T08:10:46.770

如果模拟器花费太多时间来加载或出现滞后，那么你应该试试这个。称为带有 HAXM 的英特尔虚拟化技术。

我知道这不是您问题的答案，但这可能对您有所帮助。:) 它可以大大提高模拟器速度。

你可以检查：**[这里](https://stackoverflow.com/questions/25437922/successfully-running-an-android-avd-manager-and-creating-new-emulator/25521874#25521874)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:38:05.863

当您从 shell/命令提示符运行以下命令时会发生什么？这应该会在模拟器启动时为您提供更多信息，并有助于诊断问题。

```
emulator -verbose -avd <name of emulator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:28:31.610

如果您使用的是 Windows，请确保 AVD 可以访问的 RAM 量为 512MB 或更少。无论您的计算机有多少 RAM，这都是一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T13:24:47.140

您必须（从安全性或 PC 的高级属性）将本地变量 ANDROID_SDK_HOME 建立到您的 docs 文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T15:57:30.223

好的，我似乎已经解决了我的问题我所做的是将默认的 .android 文件夹（它是在 D:.android 中自动生成的）复制到 C:\Users\Administrator 虽然这仅适用于一次启动对于每个后续的 avd 启动，我不得不重新复制文件夹并仅替换已编辑的文件

感谢大家尝试提供帮助！

# css - 更改捆绑文件上的 css

> ID：14055911
> 
> 赞同：0
> 
> 时间：2012-12-27T14:02:59.683
> 
> 标签：css, asp.net-mvc, asp.net-mvc-4, bundle

我在mvc网站上工作

我有 2 个 CSS 文件，一个用于阿拉伯语用户，另一个用于英语用户

但是第一个 css 文件添加到 bundle

喜欢：

```
bundles.Add(New StyleBundle("~/Content/css").Include("~/Content/site.css")) 
```

我想添加另一个样式包

喜欢：

```
bundles.Add(New StyleBundle("~/Content/css").Include("~/Content/site.ar.css")) 
```

并根据用户选择更改使用过的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T14:34:59.123

实际上这是可能的。这是我为我的英语/法语网站所做的：

在 BundleConfig.cs 中：

```
bundles.Add(new StyleBundle("~/Content/css-en-US").Include(
            "~/Content/site.en-US.css"));
bundles.Add(new StyleBundle("~/Content/css-fr-FR").Include(
            "~/Content/site.fr-FR.css")); 
```

在我的视图中（在我的情况下为 _Layout.cshtml）：

```
@{
    var culture = System.Threading.Thread.CurrentThread.CurrentUICulture.Name.ToLowerInvariant();
}
...
    @Styles.Render("~/Content/css-" + culture)
... 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:05:58.680

捆绑包是在应用程序启动期间配置的（在 global.asax 中），因此更改 BundleConfig.cs 以工作不会有帮助，除非在应用程序启动期间可以使用向捆绑包添加或删除 css 的首选项（这可能不会是这种情况）。

因此，另一种选择是当用户将首选项选择为阿拉伯语时，将这个新的 css 文件发送到浏览器。从技术上讲，这意味着在布局中有一个条件来检查首选项并包含阿拉伯 css。但是在这种情况下，它不会是捆绑包的一部分。

# android - 警报管理器设置为每年

> ID：14055912
> 
> 赞同：0
> 
> 时间：2012-12-27T14:03:11.880
> 
> 标签：android

此代码在 2012 年 12 月 25 日设置了警报。怎么可能用每一年代替 2012 年？

```
Calendar cal = Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());
cal.set(Calendar.DATE,25);
cal.set(Calendar.MONTH,Calendar.DECEMBER);  
cal.set(Calendar.YEAR,2012); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:45:15.220

请记住，警报不会保存到磁盘。由于您的设备很可能会在触发警报之前很长时间被重置、重新启动或电池电量耗尽，因此长时间使用 AlarmManager 并不是一个好主意。您可以有一个用于设备启动的广播接收器（BOOT_COMPLETED）并注册您的警报，但这也不太可靠，并且可能在 ICS 及更高版本上不可用（除非用户手动启动您的应用程序）。

上面的评论是正确的，一种方法是让每个警报安排下一个警报。

# qt - 无法从通过 QProcess::execute 生成的进程中的标准输入读取

> ID：14055918
> 
> 赞同：0
> 
> 时间：2012-12-27T14:03:26.830
> 
> 标签：qt, qprocess

示例代码

```
int main(int, char * argv[]) {
    QString input = QTextStream(stdin).readLine();
    QTextStream(stdout) << input << "\nWe need to go deeper...\n";
    return QProcess::execute(argv[0]);
} 
```

测试运行

```
./test 
level 1<Enter>
level 1
We need to go deeper...
level 2<Enter> 
```

什么都没有发生……

PS。system() 有效，但需要编写代码以正确转义命令行参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:42:31.820

通过使用 execvp() 而不是 QProcess::execute() 解决。

# sql - 存储的 SQL Server 绑定变量

> ID：14055923
> 
> 赞同：0
> 
> 时间：2012-12-27T14:03:41.340
> 
> 标签：sql, sql-server, database, bind

SQL Server 中是否有一个表，我可以在其中查看使用的绑定变量的历史记录（相当于`v$sql_bind_data`在 Oracle 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:47:16.013

SQL Server 没有与 Oracle 相同的绑定变量的概念，据我所知，没有等效的表。

# javascript - 监控所有当前和未来窗口+选项卡的窗口打开、关闭、DOMContentLoaded 事件

> ID：14055924
> 
> 赞同：7
> 
> 时间：2012-12-27T14:03:51.447
> 
> 标签：javascript, firefox, screen-scraping, xul

**背景：**

我被*授权*“自动化”第三方站点，以便将“服务订单”推送到其中并监控这些请求的进度。

我尝试采用普通的“抓取”方法（使用Perl`WWW::Mechanize`中的 ,​​ 等），但在预测站点中的 JavaScript 在各种情况下会做什么时`HTML::Query`遇到了*很多问题。*如果我从运行 3rd 方站点的产品供应商那里获得支持，或者可以获得一些更好的产品业务规则文档，我打算回到这种方法。

为了避免再次猜测 JavaScript 代码并节省大量时间，我最终采取了一种方法，即在专用 VM 上加载 Firefox 中的第 3 方站点，然后在其中执行“特权”代码（即：nsI*）站点的上下文来“驱动”和“抓取”站点。

我目前正在使用`nsIWebProgressListener`/ `DOMContentLoaded`（当我已经有对 ChromeWindow 的引用时），并且`nsIWindowMediator`从调用 window+tab 枚举`setInterval`来查找新窗口和选项卡（当我无法预测它们打开时，也无法获得对其 DOMWindow 对象的引用由于第 3 方 JavaScript 的作用域）。

**问题：** 我怎样才能在现在（以及将来）由 3rd 方站点的 JavaScript 打开的每个窗口/选项卡中自动安装一个“挂钩”？在这种情况下，整个 Firefox UI的“窗口观察器”`nsI~`界面将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:10:46.603

有很多方法可以做到这一点，所以正确的选择取决于你如何处理其他所有事情。

这里只是倾听的几种方式，而不是轮询。

1.  新的 Chrome 窗口

    ```
    function ChromeWindowObserver() {
        this.observe = function(subject, topic, data) {
           // subject is a ChromeWindow
        }
    }
    Components.classes["@mozilla.org/embedcomp/window-watcher;1"]
          .getService(Components.interfaces.nsIWindowWatcher)
          .registerNotification(new ChromeWindowObserver()); 
    ```

2.  新标签

    ```
    function tabListener(event) {
        var browser = gBrowser.getBrowserForTab(event.target):
    }
    gBrowser.tabContainer.addEventListener("TabOpen", tabListener, false); 
    ```

3.  [观察者通知](https://developer.mozilla.org/en-US/docs/Observer_Notifications)（我最喜欢的）

    ```
    const dumpObserver = {
        observe: function(subject, topic, data) { dump(topic + "\n"); }
    }
    const domObserver = {
        observe: function(subject, topic, data) { dump(subject.location + "\n"); }
    }
    const ObserverService = Components.classes["@mozilla.org/observer-service;1"]
          .getService(Components.interfaces.nsIObserverService);

    /* debug log notifications */
    ObserverService.addObserver(dumpObserver, "*", false);
    /* debug log all new content locations */
    ObserverService.addObserver(domObserver, "content-document-global-created", false); 
    ```

旁注，查看[JavaScript 代码模块](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/Using)。我认为在 chrome 窗口之间共享数据时这可能对您有所帮助。

# asp.net-mvc-3 - Razor 视图中的强类型实体框架对象出错

> ID：14055930
> 
> 赞同：0
> 
> 时间：2012-12-27T14:04:15.093
> 
> 标签：asp.net-mvc-3, entity-framework, razor

使用强类型的 Entity Framework 生成的 POCO 创建剃刀视图会出现以下错误。

***'System.Data.Objects.DataClasses.EntityObject' 类型在未引用的程序集中定义。您必须添加对程序集“System.Data.Entity，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。***

但是，我将 System.Data、System.Data.Entity dll 添加到了我的 MVC 3 项目中。如果我使用 ViewModel 对象而不是 EF Created POCO，它不会显示错误。

在 Razor View 中绑定 Entity Framework 对象有什么问题？

**编辑：**[在 ASP.Net MVC 视图页面中](https://stackoverflow.com/questions/9186291/using-entity-model-object-in-asp-net-mvc-view-page)阅读使用实体模型对象对我没有帮助。我可以在这里做什么，我需要为每个 POCO 创建另一个 ViewModel 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:11:56.027

尝试添加

```
<add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /> 
```

到`<system.web>`您的 web.config 部分

# objective-c - Objective-C for 循环设置变量文本值

> ID：14055931
> 
> 赞同：3
> 
> 时间：2012-12-27T14:04:28.243
> 
> 标签：objective-c

我有两件事看起来应该很容易，我打赌它们很容易，但这是我的第一个 Objective-C 程序，所以它不像我的本地 Perl 那样容易。这两个示例几乎相同，但我在想，因为使用`@synthesize`它的人可能会非常不同。

示例 1

```
// What Works
@synthesize display0 = _display0;
@synthesize display1 = _display1;
@synthesize display2 = _display2;
@synthesize display3 = _display3;

// What I would like to do:
for (int i=0; i<4; i++)
{
    @synthesize display$i = _display$i;
} 
```

示例 2

```
// Works
- (IBAction)clearPressed
{
    self.display0.text = @"0";
    self.display1.text = @"0";
    self.display2.text = @"0";
    self.display3.text = @"0";
}

// What I would like to see
- (IBAction)clearPressed
{
    for (int i=0; i<4; i++) {
        self.display$i.text = @"0";
    }
} 
```

任何让我朝着正确方向前进的帮助都会很棒！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T14:19:48.660

如果您使用 UILabel，不妨试试这个：

```
@property (nonatomic, retain) IBOutletCollection(UILabel) NSArray *valueFields;

- (IBAction)clearPressed
{
    for(UILabel *label in valueFields)
    {
        label.text = @"0";
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-27T14:14:47.267

只需使用 IBOutletCollection：

```
@property (strong) IBOutletCollection(UILabel) NSArray *labels; 
```

然后你可以使用快速枚举循环遍历它：

```
UILabel *label;
for (label in labels) {
    label.text = @"0";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T15:16:48.967

One way would be using `-valueForKey`, which retrieves the value of the property-name passed to it. Combined with `+stringWithFormat` we can do something like this:

```
for (int i = 0; i < 4; i++) {
    NSString *key = [NSString stringWithFormat:@"display%i",i];
    UILabel *label = [self valueForKey:key];
    label.text = @"";
} 
```

But you should consider using an array. If you are creating the labels in interface builder, use an `IBOutletCollection`.

```
//Connect to every label (.h)    
@property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *displays;

//Use a fast enumeration to clear every label
for (UILabel *label in self.displays) {
    label.text = @"";
}
//Setting one labels text from an array
[(UILabel *) self.displays[numberOfLabel] setText:@"text"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T10:02:31.603

使用键值观察

```
for (int i=0; i<4; i++) {
     [self setValue:@"0" forKeyPath:[[NSString alloc] initWithFormat:@"display%i", i]];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T14:12:50.240

为什么不使用数组？

```
@property (nonatomic, strong) NSMutableArray *display;

@synthesize display;

- (IBAction)clearPressed
{
    for (int i=0; i<4; i++) {
        [self.display setObject:@"0" atIndexedSubscript:i];
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T14:15:22.207

至于示例 1——如果您的 Xcode 最新版本不需要@synthesize，它会自动为您完成

示例 2——我不相信你想要做的事情可能像在 Objective-C 中那样（H2CO3 在他的[回答](https://stackoverflow.com/a/14056058/480415)中证明我错了），但如果你宁愿有一个循环，我会创建一个你的 UILabel 的 NSMutableArray 或UITextFields 和简单的循环使用它们：

```
for(UILabel *lbl in lblArray)
{
    lbl.text = @"0";
} 
```

或者你可以遍历你的 UIViews 子视图并这样做：

```
for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UILabel class]])
    {
        UILabel *lbl = (UILabel *)view;
        lbl.text = @"0";
    }
} 
```

# c - 信号量等待案例

> ID：14055933
> 
> 赞同：0
> 
> 时间：2012-12-27T14:04:38.230
> 
> 标签：c, pthreads, semaphore

我想确保我的 sempahore 做我期望做的事情，但我不能把它带到一个或多个线程等待的状态。我一次只需要 3 个线程就可以处理链表。

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <math.h>
#include <semaphore.h>

struct dataBlock{
    struct node *root;
    int listSize;
    int forIndex;
};

struct node { // std linked list node
    int value;
    int worker;
    struct node *next;
};

int limit = 5;

sem_t sem;

pthread_mutex_t mutp = PTHREAD_MUTEX_INITIALIZER;   // mutex
pthread_cond_t  condvar = PTHREAD_COND_INITIALIZER;   //condvar

void *deleteDoneNodes(struct node *n){
    struct node *root = n;
    struct node *it = root;
    struct node *prev = NULL;
    do{
        if(it->value == 1){
            struct node *next = it->next;
            if (prev != NULL) {
                prev->next = next;
            }
            if (it == root) {
                root = next;
            }
            free(it);
            it = next;
        }
        else {
            prev = it;
            it = it->next;
        }
    }while(it !=  NULL);

    return root;
}

void * worker( void *data ){
    //get list
    int wFlag;
    struct dataBlock *inData = ( struct dataBlock * ) data;
    struct node *root = inData->root;
    int forIndex = inData ->forIndex;
    free(data);

    while(1){

        if( sem_wait( &sem )  != 0 ){
            printf( " > waiting...  \n" );
        }
        // pthread_mutex_lock( &mutp );
        struct node *it = root;

        do{
            if( forIndex == it->worker ){
                if( it->value > 2 ){
                    while( it->value != 1 )
                    it->value = sqrt(it->value);
                }
            }
            else{
                // printf("Not sqrt-able node %d\n",it->value);
            }
            it = it->next;
        }while(it !=  NULL);

        // pthread_cond_signal( &condvar ); 
        // pthread_mutex_unlock( &mutp );
        sem_post(&sem); 
        // sleep(100); // "create" concurrancy envi.
        pthread_exit(0);    
    }

    return NULL;
}

int main( int argc, char *argv[] ){
    if ( argc != 3 ){
        printf( "Programm must be called with \n NR of elements and NR of workers! \n " );
        exit( 1 );
    }

    int i;
    struct node *root;
    struct node *iterator;  

//prepare list for task
    int listSize = atoi(argv[1]);
    int nrWorkers = atoi(argv[2]);
    root = malloc(sizeof( struct node) );

    root->value = rand() % 100;
    root->worker = 0;
    iterator = root;

    for( i=1; i<listSize; i++ ){
        iterator->next = malloc(sizeof(struct node));
        iterator = iterator->next;
        iterator->value = rand() % 100;
        iterator->worker = i % nrWorkers;
        printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
    }
    iterator->next = NULL;
    printf("? List got populated\n");
// init semaphore > keeps max 3 threads working over the list

    if( sem_init(&sem,0,3) < 0){
      perror("semaphore initilization");
      exit(0);
    }

// Create all threads to parse the link list
    int ret;    
    pthread_mutex_init(&mutp,NULL);

    pthread_t w_thread;
    pthread_t* w_threads = malloc(nrWorkers * sizeof(w_thread));

    for( i=0; i < nrWorkers; i++ ){         
        struct dataBlock *data = malloc(sizeof(struct dataBlock));
        data->root = root;
        data->listSize = listSize;
        data->forIndex = i;
        ret = pthread_create ( &w_threads[i], NULL, worker, (void *) data );
        if( ret ) {
            perror("Thread creation fail");
            exit(2);    
        }   
    } 

    deleteDoneNodes( root );

    int join;
    for ( i = 0; i < nrWorkers; i++ ){
        join = pthread_join(w_threads[i],NULL);
    }

    iterator = root;
    for ( i = 0; i < listSize; i++){
        printf("val: %d  worker: %d _  \n", iterator->value, iterator->worker);
        iterator = iterator->next;
    }

    free(root);
    free(iterator);
    sem_destroy(&sem);
    return 0;
} 
```

终端~> ./s 16 16

```
node #1 worker: 1  value: 86
node #2 worker: 2  value: 77
node #3 worker: 3  value: 15
node #4 worker: 4  value: 93
node #5 worker: 5  value: 35
node #6 worker: 6  value: 86
node #7 worker: 7  value: 92
node #8 worker: 8  value: 49
node #9 worker: 9  value: 21
node #10 worker: 10  value: 62
node #11 worker: 11  value: 27
node #12 worker: 12  value: 90
node #13 worker: 13  value: 59
node #14 worker: 14  value: 63
node #15 worker: 15  value: 26
? List got populated
val: 1  worker: 0 _  
val: 1  worker: 1 _  
val: 1  worker: 2 _  
val: 1  worker: 3 _  
val: 1  worker: 4 _  
val: 1  worker: 5 _  
val: 1  worker: 6 _  
val: 1  worker: 7 _  
val: 1  worker: 8 _  
val: 1  worker: 9 _  
val: 1  worker: 10 _  
val: 1  worker: 11 _  
val: 1  worker: 12 _  
val: 1  worker: 13 _  
val: 1  worker: 14 _  
val: 1  worker: 15 _ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:21:42.487

使用来自 glib "http://developer.gnome.org/glib/stable/glib-Thread-Pools.html" 的线程池

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:07:05.310

我可以在您的代码中看到一些潜在的错误。

首先，我认为您的批评区是所有节点，因此您应该使用互斥锁保护所有访问。在您的工人中，您没有这样做。

但是，您的信号量应该可以工作：在线程函数的开头使用 3 和 sem_wait 初始化，最后使用 sem_post 初始化。

所以，我能想到的最大问题是你的 deletenodes 函数。不要忘记 main 也将是一个线程，并且由于您在连接之前删除节点并且发送到线程的数据是用指针构造的，如果您的所有线程在处理数据之前都丢失了处理器，并且您的主线程获取处理器，它将清除所有节点，使您的数据类型，传递给工作线程，过时的，空的，最好的情况下为空。就像我说的那样，发生这种情况是因为您通过指针/引用而不是通过复制将值传递给数据。我可以看到两种可能的解决方案：要么在加入后调用删除节点（将主线程状态设置为阻塞，断言您对删除节点的调用在所有线程结束后发生），要么通过复制将值传递给数据（至在我看来，将

希望这可以帮助。

# c# - 列表框内的计时器c#

> ID：14055938
> 
> 赞同：0
> 
> 时间：2012-12-27T14:05:14.463
> 
> 标签：c#, timer, listbox

所以我目前正在开发一个程序，在该程序中，我需要在列表框中的每个项目上附加一个计时器，我有这个工作，但我无法选择任何项目，有没有办法能够选择项目，但也有一个计时器显示到列表框中的每个项目？

更新：

将项目添加到新列表框时，这是我拥有的代码：

```
private void btnSchedule_Click(object sender, EventArgs e)
        {
            try
            {
                string name = lsbScheduled.SelectedItem.ToString();// saves the selected item to a string
                string newItem = (moveItem(name));//calls the method and passes the variable to it
                tmrCheckedIn.Enabled = true;
                tmrCheckedIn.Start();
                newItem += "      " + "00:00:00";
                lsbScheduled.Items.Remove(name);// removes the item from the list
                lsbCheckedIn.Items.Add(newItem); //adds the item to the list          
            }
            catch (NullReferenceException)
            {
            }
        }
here is my code for the tick event: 

 private void tmrCheckedIn_Tick(object sender, EventArgs e)
    {
        int count = lsbCheckedIn.Items.Count;

        for (int i = 0; i < count; i++)
        {
            string item = lsbCheckedIn.Items[i].ToString();
            string[] line = item.Split();
            string time = line[8];

            Time oldTime = new Time();
            oldTime.StartTime = time;

            lsbCheckedIn.Items.Remove(item);
            string newTime = string.Format(line[0] + " " + line[1] + " " +line[2] + "      " + "{0:c}", oldTime.EndTime);
            lsbCheckedIn.Items.Add(newTime);

            oldTime = null;

        }

    }

and here is my class that I use to increase the timer:
 public class Time
    {
        private int seconds, minutes, hours;
        string startTime, endTime;

       public Time()
        {
            seconds = 00;
            minutes = 00;
            hours = 00;
            startTime = " ";
            endTime = "";
        }

        public string StartTime
        {
            set { startTime = value;
            CalcNewTime();
            }
            get { return startTime; }
        }

        public string EndTime
        {
            set { endTime = value; }
            get { return endTime; }
        }

        public int Hours
        {
            set { hours = value; }
            get { return hours; }
        }

        public int Minutes
        {
            set { minutes = value; }
            get { return minutes; }
        }

        public int Second
        {
            set { seconds = value; }
            get { return seconds; }
        }

        private void CalcNewTime()
        {
            const int LIMIT = 6, CONVERT = 10;

            string[] divisions = startTime.Split(':');
            hours = Convert.ToInt32(divisions[0]);
            minutes = Convert.ToInt32(divisions[1]);
            seconds = Convert.ToInt32(divisions[2]);

            int hoursTens = hours / CONVERT;
            int hoursOnes = hours % CONVERT;
            int minutesTens = minutes / CONVERT;
            int minuteOnes = minutes % CONVERT;

            seconds += 1;
            int secondTens = seconds / CONVERT;
            int secondOnes = seconds % CONVERT;

            if (secondTens >= LIMIT)
            {
                secondTens = 0;
                secondOnes = 0;
                minutes += 1;

                minutesTens = Minutes / CONVERT;
                minuteOnes = minutes % CONVERT;
                if (minutesTens >= LIMIT)
                {
                    minutesTens = 0;
                    minuteOnes = 0;
                    hours += 1;

                    hoursTens = hours / CONVERT;
                    hoursOnes = Hours % CONVERT;
                }
            }
            endTime = Convert.ToString(hoursTens + hoursOnes + ":" + minutesTens + minuteOnes + ":" + secondTens + secondOnes);
        }

    } 
```

在使用 Visual Studio 2010 编写 Windows 窗体应用程序时，使用可以从工具箱中选择的计时器。我需要能够选择列表框中的项目，但现在我可以，因为我不断地从列表框中添加和删除项目。我希望列表框中显示的时间增加，但我也需要它，以便我可以选择列表框中的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:40:30.140

您的问题是您要从列表框中删除项目，然后添加新项目。这就是为什么项目不会保持选中状态的原因。相反，只需更换物品。

```
lsbCheckedIn.Items[i] = newTime; 
```

# c# - 在 IE 打印 -> 页面设置中更改设置

> ID：14055941
> 
> 赞同：-3
> 
> 时间：2012-12-27T14:05:26.053
> 
> 标签：c#, javascript, asp.net-mvc, internet-explorer, automation

> **可能重复：**
> [css打印样式](https://stackoverflow.com/questions/7086342/css-print-styling)

如何在 asp.net mvc 应用程序中以编程方式更改打印 -> 页面设置（服务器端或客户端）的设置？

在打印页面内容之前，我需要更改布局、边距和“打印背景颜色和图像”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:12:47.313

您是否尝试过指定一个特殊的 .css 仅用于打印目的？

```
<link rel="stylesheet" href="URL to your print.css" type="text/css" media="print" /> 
```

并重写此 print.css 中的 .css，以便打印时看起来不错。

其他来源：
[W3Schools](http://www.w3schools.com/css/css_mediatypes.asp)
[onextrapixel](http://www.onextrapixel.com/2009/05/05/how-to-create-a-simple-print-css-for-your-site/)

# php - 检查数组中是否有比 X 更大的数字

> ID：14055943
> 
> 赞同：0
> 
> 时间：2012-12-27T14:05:32.290
> 
> 标签：php, arrays, comparison

我需要一个不循环的函数来检查数组值是否大于我选择的**X**数。如果有，返回false。

有没有一种很好的有效方法来做到这一点？也许一些匿名功能？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:07:34.197

一个简单的解决方案是使用[`min` *^([docs])*](http://php.net/manual/en/function.min.php)：

```
if (min($values) > $my_value) {
    // all values are larger
} 
```

您可以在这个类似的问题中找到其他解决方案：[PHP: Check to see if all the values in an array are less than x](https://stackoverflow.com/questions/6992872/php-check-to-see-if-all-the-values-in-an-array-are-less-than-x)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:10:32.010

你可以把它变成一个匿名函数......

```
function is_bigger($x,$arry){
    if(max($arry) > $x){
        return false;
    }
} 
```

或作为匿名功能...

```
$res = function($x,$arry){
    if(max($arry) > $x){
        return false;
    }else{
        return true;
    }
} 
```

# java - 在空 Activity 中分配的内存

> ID：14055947
> 
> 赞同：0
> 
> 时间：2012-12-27T14:05:47.783
> 
> 标签：java, android

**背景信息**
我正在构建这个应用程序几个月，它几乎完成了。但是几天后我看到内存随着日志的增加而增加

```
D/dalvikvm(25624): GC_CONCURRENT freed 1782K, 17% free 22647K/27143K, paused 15ms+16ms, total 80ms 
```

如您所见，我分配了很多内存。因此，在搜索/阅读了几天并使用 MAT 查找我的漏洞之后，我决定剥离应用程序并在一个新项目中逐个活动地构建它，以找出问题所在。

**问题**
所以现在我有一个新项目，我只打开一个活动。我在项目中添加了一些图像，但它们没有被使用。我在 Activity 中添加了一个函数，这样我就可以在日志中看到使用的内存。

**代码**
@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 设置内容视图（R.layout.main）；

```
 Log.d("HOME", "START");

        ShowMemoryStats("MAIN");
    }

    public void ShowMemoryStats(String activityName) {

        Double allocated = new Double(Debug.getNativeHeapAllocatedSize())
                / new Double((1048576));
        Double available = new Double(Debug.getNativeHeapSize()) / 1048576.0;
        Double free = new Double(Debug.getNativeHeapFreeSize()) / 1048576.0;
        DecimalFormat df = new DecimalFormat();
        df.setMaximumFractionDigits(2);
        df.setMinimumFractionDigits(2);

        Log.d("gettings", "debug. START ================================= "
                + activityName);
        Log.d("gettings",
                "debug.heap native: allocated " + df.format(allocated)
                        + "MB of " + df.format(available) + "MB ("
                        + df.format(free) + "MB free)");
        Log.d("gettings",
                "debug.memory: allocated: "
                        + df.format(new Double(Runtime.getRuntime()
                                .totalMemory() / 1048576))
                        + "MB of "
                        + df.format(new Double(
                                Runtime.getRuntime().maxMemory() / 1048576))
                        + "MB ("
                        + df.format(new Double(Runtime.getRuntime()
                                .freeMemory() / 1048576)) + "MB free)");

        Runtime rt = Runtime.getRuntime();
        long maxMemory = rt.maxMemory();
        Log.v("onCreate", "maxMemory:" + Long.toString(maxMemory));

        ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        int memoryClass = am.getMemoryClass();
        Log.v("onCreate", "memoryClass:" + Integer.toString(memoryClass));

        Log.d("gettings", "debug. END ================================= "
                + activityName);
    } 
```

**结果**
调试。开始 ================================== 主 debug.heap 本机：分配 2,41MB 的 2,59MB (0 ,18MB free) debug.memory: 已分配：12,00MB of 64,00MB (0,00MB free) maxMemory:67108864 memoryClass:64 debug。结束 ================================== 主

所以现在我只想知道是什么导致了这种内存使用。这是每个应用程序在启动时都会获得的某种默认内存吗？

谢谢您的帮助。

**更新 [30-12-2012]**
仍在解决这个问题，但有时我认为这不是问题。原因是当我使用 AVD (Heapsize: 24MB) 时，我看到了完全不同的结果： ![在此处输入图像描述](../Images/7f489e1abcd86657a468834322f5bfa8.png)

与我在手机（Galaxy S3）上调试应用程序时相比： ![在此处输入图像描述](../Images/2a41696e38b0cc4ed6bc6100f4ee4808.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:11:52.340

如果您说您正在使用 MAT，您应该能够根据被认为可疑的线程搜索泄漏。

此外，如果您想从特定可疑对象获取特定数据，请尝试以下操作： [http ://www.javamex.com/classmexer](http://www.javamex.com/classmexer)

*我不确定 Android API 是否支持这种机制。

# php - Codeigniter 2.1 - __construct 中的调用函数

> ID：14055948
> 
> 赞同：0
> 
> 时间：2012-12-27T14:05:48.990
> 
> 标签：php, codeigniter, codeigniter-2

我有以下功能：

```
public function admin_login_check()
{
    if($this->session->userdata('is_logged_in') == FALSE)
        redirect('admin/admin_login');
} 
```

而这个（暂时）：

```
public function index()
{
    $this->admin_login_check();
    $data['title'] = 'Početna | TOP';
    $data['main_content'] = 'admin_home';
    $data= $this->data + $data;
    $this->load->view('admin/admin_template', $data);

}

public function admin_login()
{
        $data['title'] = 'Prijava | TOP';
        $data['main_content'] = 'admin_login';
        $data= $this->data + $data;
        $this->load->view('admin/admin_template', $data);
} 
```

当我`$this->admin_login_check()`在`__construct`函数内部时，我收到以下错误：

> xxx/admin/admin_login 的网页导致了过多的重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:19:35.200

您有太多重定向的原因是因为当您放置

```
$this->admin_login_check(); 
```

在您`admin`的构造函数控制器中。这将始终在`admin`控制器内的每个方法/函数上运行。

而且由于您重定向到同一个`admin`控制器，

```
redirect('admin/admin_login'); 
```

它会首先检查您是否已注销，因此它会一次又一次地尝试重定向您。一种解决方案是在单独的控制器上实际分离您的`admin_login`页面。`home`如果你有，也许是控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:31:25.597

您可以对当前方法名称进行一次检查，如下所示：

```
public function admin_login_check()
{
    $loged_in = $this->session->userdata('is_logged_in') ? TRUE : FALSE;
    if($this->router->method != 'admin_login' && $loged_in==FALSE)
        redirect('admin/admin_login');
} 
```

IF 会检查您是否在除 admin_login 页面之外的任何页面并且您没有登录。

我如何认为这种重定向方法有点错误。如果你让一个函数 is_admin 返回 TRUE/FALSE 并做这样的事情会好很多......

```
public function __construct()
{
    parent::__construct();
    if($this->is_admin() == FALSE && $this->router->method != 'admin_login')
        redirect('admin/admin_login');
}

public function is_admin()
{
    return $this->session->userdata('is_logged_in') ? TRUE : FALSE;
} 
```

# ios - 将 UIScrollView 添加到 UIViewController

> ID：14055950
> 
> 赞同：10
> 
> 时间：2012-12-27T14:06:00.487
> 
> 标签：ios, uiviewcontroller, uiscrollview

我有一个`UIViewController`，我想添加一个`UIScrollView`（启用滚动支持），这可能吗？

我知道这是可能的，如果你有 a`UIScrollView`添加`UIViewController`到它，但如果 reverse 是真的，我也很感兴趣，如果我不能将 a 添加`UIScrollView`到现有的`UIViewController`，这样我就可以获得滚动功能。

*编辑*

我想我找到了答案：[将 UIViewController 添加到 UIScrollView](https://stackoverflow.com/questions/8607135/adding-a-uiviewcontroller-to-uiscrollview)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-27T14:12:44.653

安`UIViewController`有一个`view`财产。因此，您可以在`UIScrollView`其`view`. 换句话说，您可以将滚动视图添加到视图层次结构中。

这可以通过代码或通过 XIB 来实现。此外，您可以将视图控制器注册为滚动视图的委托。通过这种方式，您可以实现用于执行不同功能的方法。见`UIScrollViewDelegate`协议。

```
// create the scroll view, for example in viewDidLoad method
// and add it as a subview for the controller view

[self.view addSubview:yourScrollView]; 
```

您还可以覆盖类的`loadView`方法`UIViewController`并将滚动视图设置为您正在考虑的控制器的主视图。

*编辑*

我为你创建了一个小样本。在这里，您有一个滚动视图作为 a 视图的子视图`UIViewController`。滚动视图有两个子视图：（`view1`蓝色）和`view2`（绿色）。

在这里，我想你只能在一个方向上滚动：水平或垂直。在下面，如果您水平滚动，您可以看到滚动视图按预期工作。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIScrollView* scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
    scrollView.backgroundColor = [UIColor redColor];
    scrollView.scrollEnabled = YES;
    scrollView.pagingEnabled = YES;
    scrollView.showsVerticalScrollIndicator = YES;
    scrollView.showsHorizontalScrollIndicator = YES;
    scrollView.contentSize = CGSizeMake(self.view.bounds.size.width * 2, self.view.bounds.size.height);    
    [self.view addSubview:scrollView];

    float width = 50;
    float height = 50;
    float xPos = 10;
    float yPos = 10;

    UIView* view1 = [[UIView alloc] initWithFrame:CGRectMake(xPos, yPos, width, height)];
    view1.backgroundColor = [UIColor blueColor];    
    [scrollView addSubview:view1];

    UIView* view2 = [[UIView alloc] initWithFrame:CGRectMake(self.view.bounds.size.width + xPos, yPos, width, height)];
    view2.backgroundColor = [UIColor greenColor];    
    [scrollView addSubview:view2];
} 
```

如果您只需要垂直滚动，您可以进行如下更改：

```
scrollView.contentSize = CGSizeMake(self.view.bounds.size.width, self.view.bounds.size.height * 2); 
```

显然，您需要重新排列 和 的`view1`位置`view2`。

PS这里我使用ARC。如果不使用 ARC，则需要显式分配`release`初始化对象。

# c# - 在 Windows 8 中添加顶部导航栏 - 教程问题

> ID：14055954
> 
> 赞同：0
> 
> 时间：2012-12-27T14:06:24.310
> 
> 标签：c#, windows-8, visual-studio-2012

我正在尝试一个关于 WIndows 8 的[教程](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)。我需要添加一个`Navigation Bar`. 步骤如下；

以下内容来自教程。

1.  在解决方案资源管理器中，双击 MainPage.xaml 将其打开。
2.  在文档大纲中，选择“pageRoot”元素。
3.  在“属性”面板中，单击“属性”按钮 () 以显示“属性”视图。
4.  在 Properties 面板的 Common 下，找到 TopAppBar 属性。
5.  单击 TopAppBar 旁边的新建按钮。页面中添加了一个 AppBar 控件。
6.  在 Document Outline 中，展开 TopAppBar 属性。
7.  选择“photoPageButton”元素，将其拖到 AppBar 上，然后放下。
8.  在“属性”面板的“布局”下，将“水平对齐”属性设置为“右”()。
9.  按 F5 构建并运行应用程序。要测试应用栏，请右键单击主页。应用栏在屏幕顶部打开。

我双击了`MainPage.xaml`，然后在`Document Outline`i 中选择了`pageRoot`。并在`properties`展开的窗口中`Common`，我单击了`New`旁边的`TopAppBar`.

它在它下面添加了其他几个`Fields`。`Allow Drop`，`Background`并且`Cache Mode`是其中的一部分。然后在`Document Outline`我将按钮拖到`AppBar`下面`TopAddBar`。更改`HorizontalAlignment`为`Right`，构建并执行应用程序。但我没有看到添加到顶部导航栏的按钮。我在这里做错了什么？

更新

```
<Page.Resources>

    <!-- TODO: Delete this line if the key AppName is declared in App.xaml -->
    <x:String x:Key="AppName">My Application</x:String>
</Page.Resources>
<common:LayoutAwarePage.TopAppBar>
    <AppBar Background="#E5A41D1D" AllowDrop="True" BorderBrush="#E5C5A7A7" HorizontalAlignment="Right">
        <Button Content="Next Page&#xD;&#xA;" HorizontalAlignment="Right" VerticalAlignment="Stretch" Width="230" Height="70" Background="#FF12668D" FontFamily="Shruti" FontSize="36" Click="Button_Click_2"/>
    </AppBar>
</common:LayoutAwarePage.TopAppBar>

<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout
-->
<Grid Style="{StaticResource LayoutRootStyle}" Background="#FF282D40">
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Back button and page title -->

    <!-- Back button and page title -->
    <!-- Back button and page title -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock x:Name="pageTitle" Grid.Column="1" Text="Welcome !!! " Style="{StaticResource PageHeaderTextStyle}" Foreground="#DE2374AC"/>
    </Grid>

    <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <!-- The back button and title have different styles when snapped -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:59:07.017

您在[这里学习本教程](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)，对吗？您似乎将错误的按钮拖到 TopAppBar。

您应该拖动的按钮名为 photoPageButton（它的 x:Name 属性）。相反，您在 TopAppBar 中的按钮没有名称，并显示文本“下一页”。

将 photoPageButton 拖到 TopAppBar 后，TopAppBar 的 XAML 标记应如下所示：

```
<common:LayoutAwarePage.TopAppBar>
    <AppBar HorizontalAlignment="Right">
        <Button x:Name="photoPageButton" Content="Go to photo page"/>
    </AppBar>
</common:LayoutAwarePage.TopAppBar> 
```

在您进一步了解本教程并对按钮应用样式后，您的 TopAppBar 标记将如下所示：

```
<common:LayoutAwarePage.TopAppBar>
    <AppBar HorizontalAlignment="Right">
        <Button x:Name="photoPageButton" 
            Click="photoPageButton_Click"
            HorizontalAlignment="Right" 
            Style="{StaticResource PicturesAppBarButtonStyle}"/>
    </AppBar>
</common:LayoutAwarePage.TopAppBar> 
```

将其他 AppBar 设置也放在其中是完全可以接受的 - 背景、BorderBrush；这些是对颜色的无害更改 - 我相信 AllowDrop 默认为 true，所以这也很好。

# hadoop - Hadoop PIG Max of Tuple

> ID：14055956
> 
> 赞同：6
> 
> 时间：2012-12-27T14:06:26.317
> 
> 标签：hadoop, apache-pig

如何`MAX`在 Pig 中找到元组的 ？

我的代码如下所示：

```
A,20
B,10
C,40
D,5

data = LOAD 'myData.txt' USING PigStorage(',') AS key, value;
all = GROUP data ALL;
maxKey = FOREACH all GENERATE MAX(data.value);
DUMP maxKey; 
```

这将返回 40，但我想要完整的键值对：`C,40`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T15:32:11.313

这适用于猪 0.10.0：

```
data = LOAD 'myData.txt' USING PigStorage(',') AS (key, value: long);
A = GROUP data ALL;
B = FOREACH A GENERATE MAX(data.value) AS val;
C = FILTER data BY value == (long)C.val;
DUMP C; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T13:37:14.927

试试这个：

```
data = LOAD 'myData.txt' USING PigStorage(',') AS (key: chararray, value: int);

sorted = ORDER data BY value DESC;

limited = LIMIT sorted 1;

projected = FOREACH limited GENERATE key;

DUMP projected; 
```

# java - Java 使用亚马逊 mws？

> ID：14055962
> 
> 赞同：2
> 
> 时间：2012-12-27T14:06:58.267
> 
> 标签：java, amazon-mws

我在理解如何使用 amazon mws java 库时遇到问题。我能够实现它，我可以调用 ListMatchingProducts 并将一些 xml 打印到控制台中。但是我如何从中获取部分信息，例如产品标题？我刚刚开始编程，可能我只是不了解这里的 api 使用基础知识。请帮帮我。这就是我调用搜索方法的方式：

```
 searchF.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            AmazonSearch.amazonSearch(searchF.getText());               
        }
    }); 
```

这是我想使用的亚马逊 api 类的摘录：

```
 invokeListMatchingProducts(service, request);

    }

    public static ListMatchingProductsResponse response;

    public static void invokeListMatchingProducts(MarketplaceWebServiceProducts service, 
            ListMatchingProductsRequest request) {
        try {

            response = service.listMatchingProducts(request);

            System.out.println ("ListMatchingProducts Action Response");
            System.out.println ("=============================================================================");
            System.out.println ();

            System.out.println("    ListMatchingProductsResponse");
            System.out.println();
            if (response.isSetListMatchingProductsResult()) {
                System.out.println("        ListMatchingProductsResult");
                System.out.println();
                ListMatchingProductsResult  listMatchingProductsResult = response.getListMatchingProductsResult();
                if (listMatchingProductsResult.isSetProducts()) {
                    System.out.println("            Products");
                    System.out.println();
                    ProductList  products = listMatchingProductsResult.getProducts();
                    java.util.List<Product> productList = products.getProduct();
                    for (Product product : productList) {
                        System.out.println("                Product");
                        System.out.println();
                        if (product.isSetIdentifiers()) {
                            System.out.println("                    Identifiers");
                            System.out.println();
                            IdentifierType  identifiers = product.getIdentifiers();
                            if (identifiers.isSetMarketplaceASIN()) {
                                System.out.println("                        MarketplaceASIN");
                                System.out.println();
                                ASINIdentifier  marketplaceASIN = identifiers.getMarketplaceASIN();
                                if (marketplaceASIN.isSetMarketplaceId()) {
                                    System.out.println("                            MarketplaceId");
                                    System.out.println();
                                    System.out.println("                                " + marketplaceASIN.getMarketplaceId());
                                    System.out.println();
                                }
                                if (marketplaceASIN.isSetASIN()) {
                                    System.out.println("                            ASIN");
                                    System.out.println();
                                    System.out.println("                                " + marketplaceASIN.getASIN());
                                    System.out.println();
                                }
                            } 
                            if (identifiers.isSetSKUIdentifier()) {
                                System.out.println("                        SKUIdentifier");
                                System.out.println();
                                SellerSKUIdentifier  SKUIdentifier = identifiers.getSKUIdentifier();
                                if (SKUIdentifier.isSetMarketplaceId()) {
                                    System.out.println("                            MarketplaceId");
                                    System.out.println();
                                    System.out.println("                                " + SKUIdentifier.getMarketplaceId());
                                    System.out.println();
                                }
                                if (SKUIdentifier.isSetSellerId()) {
                                    System.out.println("                            SellerId");
                                    System.out.println();
                                    System.out.println("                                " + SKUIdentifier.getSellerId());
                                    System.out.println();
                                }
                                if (SKUIdentifier.isSetSellerSKU()) {
                                    System.out.println("                            SellerSKU");
                                    System.out.println();
                                    System.out.println("                                " + SKUIdentifier.getSellerSKU());
                                    System.out.println();
                                }
                            } 
                        } 
                        if (product.isSetAttributeSets()) {
                            System.out.println("                    Attributes");
                            AttributeSetList attributeSetList = product.getAttributeSets();
                            for (Object obj : attributeSetList.getAny()) {
                                Node attribute = (Node) obj;
                                System.out.println(ProductsUtil.formatXml(attribute));
                            }
                            System.out.println();
                        }
                       ...
                    }
                } 
            } 
            if (response.isSetResponseMetadata()) {
                System.out.println("        ResponseMetadata");
                System.out.println();
                ResponseMetadata  responseMetadata = response.getResponseMetadata();
                if (responseMetadata.isSetRequestId()) {
                    System.out.println("            RequestId");
                    System.out.println();
                    System.out.println("                " + responseMetadata.getRequestId());
                    System.out.println();
                }
            } 
            System.out.println();
            System.out.println(response.getResponseHeaderMetadata());
            System.out.println();

        } catch (MarketplaceWebServiceProductsException ex) {

            System.out.println("Caught Exception: " + ex.getMessage());
            System.out.println("Response Status Code: " + ex.getStatusCode());
            System.out.println("Error Code: " + ex.getErrorCode());
            System.out.println("Error Type: " + ex.getErrorType());
            System.out.println("Request ID: " + ex.getRequestId());
            System.out.println("XML: " + ex.getXML());
            System.out.print("ResponseHeaderMetadata: " + ex.getResponseHeaderMetadata());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:29:12.563

让它自己工作。我只需要访问`public static ListMatchingProductsResponse response;`并将其转换为 xml。其实没那么难。

# c# - 从 Point 获取行信息 (CalcHitInfo,GridHitInfo,GridHitTest)

> ID：14055966
> 
> 赞同：2
> 
> 时间：2012-12-27T14:07:16.180
> 
> 标签：c#, winforms, devexpress, xtragrid

我的代码有问题，没有发送包含按下按钮的行的信息：

```
//This is the code that creates the button in the column.
else if (e.Column.Name == ActivePrescriptionGridFindReplaceButton.Name) {
    GetGridButton(true, "Replace", PrescriptionGridFindReplaceButton_Click, e);
}

//This is my event, (GetGridButton is a function that make this an event)
void PrescriptionGridFindReplaceButton_Click(object sender, ButtonPressedEventArgs e) {
    //My point have the information, it works and gives the correct coordinates
    DoShowMenu(ActivePrescriptionsGridView.CalcHitInfo(m_Point), MenuMode.Replace);
}

//This receives the information  
void DoShowMenu(DevExpress.XtraGrid.Views.Grid.ViewInfo.GridHitInfo hi, MenuMode mode) {
    //Here the hi.HitTest says that does not have a value (NONE)
    if (hi.HitTest == DevExpress.XtraGrid.Views.Grid.ViewInfo.GridHitTest.RowCell) {
        //So RxMedication take the value of NULL    
        PatientPrescriptionEntity RxMedication = ActivePrescriptionsGridView.GetRow(hi.RowHandle) as PatientPrescriptionEntity;
        //Gets out of the event
        if (RxMedication != null) {
            RenewMenu menu = new RenewMenu(ActivePrescriptionsGridView, RxMedication, mode);
            menu.Init(hi);
            menu.OnReplaceMedication += menu_OnReplaceMedication;
            menu.Show(hi.HitPoint);
        }
    }
} 
```

有人有想法吗？请帮助我还有另一种方法吗？
我做错了什么？...

# audio - 增加传入音频流的增益

> ID：14055969
> 
> 赞同：1
> 
> 时间：2012-12-27T14:07:27.880
> 
> 标签：audio, audio-streaming, radio, html5-audio, javasound

我所有的问题都与同一个问题有关：调整网页上外部音频流的增益。

当您访问我的网页时，您会听到来自我的在线广播电台的音频流。

音频流通过嵌入页面的 Flash 播放器传递。

Flash 播放器无法更改，我提供的代码中唯一的变量是更改播放的流的地址。该流是一个在线广播电台。

该电台的广播水平远低于 0dB，因此使用音量控制几乎不会增加网站上听到的声音。

我需要一个可以添加到标准播放器代码中的代码：

增加在网站上听到的流的增益或全新的 Flash 播放器代码，它将从电台流式传输音频并增加音频的增益。

请帮助伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:37:58.857

不幸的是，您（当前）不能在客户端修改该流。你不能增加增益。您所能做的就是使用自定义 Flash 播放器将音量设置为 0dB，而且您现在使用的可能已经有它了。

修改音频内容的唯一方法是在服务器端进行压缩和增益，并在发送到客户端之前重新编码流。您将损失质量，因为您正在减少已经有损压缩的动态范围和有损压缩数据。最好的办法是修复源材料。

# css - 这是设置带有两个色标的 CSS 渐变的正确方法吗？

> ID：14055972
> 
> 赞同：0
> 
> 时间：2012-12-27T14:07:30.253
> 
> 标签：css, less

我一直在尝试让我的代码与下面的所有浏览器前缀一起工作。这就是我想出的。有人能告诉我这是否是使用 Less 对渐变进行编码的正确方法吗？特别是我对 -webkit-linear-gradient 感到困惑，因为我找不到如何使用规范来做到这一点。

我的少代码：

```
.setTopGradient(@startClr, @endClr, @st1Clr, @st1Pos, @st2Clr, @st2Pos) {
   @st1PosPercent: @st1Pos * 100%;
   @st2PosPercent: @st2Pos * 100%;

   background: -moz-linear-gradient(
        top,
        @startClr,
        @st1Clr @st1PosPercent,
        @st2Clr @st2PosPercent,
        @endClr
   );

   background: -webkit-gradient(
        linear, 
        left @startClr,
        left @endClr, 
        color-stop(@st1Pos, @st1Clr),
        color-stop(@st2Pos, @st2Clr)
   );

   background: -webkit-linear-gradient(
      linear,
      left top,
      left bottom,
      from(@startClr),
      to(@endClr),
      color-stop(@st1Pos, @st1Clr),
      color-stop(@st2Pos, @st2Clr)
   );

    background: -ms-linear-gradient(
        @startClr 0%,
        @st1Clr @st1PosPercent,
        @st2Clr @st2PosPercent,
        @endClr 100%
    );

    background: -o-linear-gradient(
        @startClr 0%,
        @st1Clr @st1PosPercent,
        @st2Clr @st2PosPercent,
        @endClr 100%
    );

    background: linear-gradient(
        to @endClr,
        @st1Clr @st1PosPercent,
        @st2Clr @st2PosPercent,
        @endClr 100%
    );

} 
```

样本输入：

```
.setTopGradient(#8b8b8b,#bfbfbf,#a9a9a9,0.1,#bdbdbd,0.3); 
```

输出 CSS：

```
 background: -moz-linear-gradient(top, #8b8b8b, #a9a9a9 10%, #bdbdbd 30%, #bfbfbf);
  background: -webkit-gradient(linear, left #8b8b8b, left #bfbfbf, color-stop(0.1, #a9a9a9), color-stop(0.3, #bdbdbd));
  background: -webkit-linear-gradient(linear, left top, left bottom, from(#8b8b8b), to(#bfbfbf), color-stop(0.1, #a9a9a9), color-stop(0.3, #bdbdbd));
  background: -ms-linear-gradient(#8b8b8b 0%, #a9a9a9 10%, #bdbdbd 30%, #bfbfbf 100%);
  background: -o-linear-gradient(#8b8b8b 0%, #a9a9a9 10%, #bdbdbd 30%, #bfbfbf 100%);
  background: linear-gradient(to #bfbfbf, #a9a9a9 10%, #bdbdbd 30%, #bfbfbf 100%); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:46:07.857

在回答这个问题时，将您的止损设置为百分比（没有小数），以便这些行...

```
 background: -webkit-gradient(linear, left #8b8b8b, left #bfbfbf, color-stop(0.1, #a9a9a9), color-stop(0.3, #bdbdbd));
  background: -webkit-linear-gradient(linear, left top, left bottom, from(#8b8b8b), to(#bfbfbf), color-stop(0.1, #a9a9a9), color-stop(0.3, #bdbdbd)) 
```

...变得...

```
 background: -webkit-gradient(linear, left #8b8b8b, left #bfbfbf, color-stop(10%, #a9a9a9), color-stop(30%, #bdbdbd));
  background: -webkit-linear-gradient(linear, left top, left bottom, from(#8b8b8b), to(#bfbfbf), color-stop(10%, #a9a9a9), color-stop(30%, #bdbdbd)) 
```

# javascript - firefox 插件 - self.port.on 与 $ (jquery) 冲突。

> ID：14055974
> 
> 赞同：0
> 
> 时间：2012-12-27T14:07:36.383
> 
> 标签：javascript, jquery, firefox-addon

在我的 main.js 文件中：我将 contentScriptFile 配置为 script.js。此外，此脚本文件嵌入在 index.html 中，这是一个将使用 tabs.open 打开的选项卡。

我在那个脚本文件中有 self.port.on 和 jquery 相关的东西。如果 self.port 写在其他 jquery 事物之上，self.port.on 正在工作，而 jquery 不工作。但是，self.port.on 写在下面，jquery 工作正常，self.port 不工作。

脚本文件实际上处理使用 self.port 获得的数据（只有在打开选项卡时才会出现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:53:11.013

将所有 jQuery 代码包装在一个安全的环境中怎么样？

使用 $：

```
(function($) {
    // use $
})(jQuery) 
```

使用 $jq：

```
(function($jq) {
    // use $jq
})(jQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:08:35.400

使用 jQuery 的 noConflict 设置。

```
$jq = jQuery.noConflict(); //use $jq instead of $ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:24:52.517

许多 JavaScript 库使用`$`函数或变量名，就像 jQuery 一样。在 jQuery 的情况下，`$`它只是 的别名`jQuery`，因此所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用将 $ 的控制权返回给另一个库`$.noConflict()`：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

这种技术与 .ready() 方法对 jQuery 对象的别名能力结合起来特别有效，因为在传递给 .ready() 的回调中，如果我们愿意，我们可以使用 $ ，而不必担心以后会发生冲突：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
    $("div").hide();
  });
  // Code that uses other library's $ can follow here.
  $("content").style.display = 'none';
</script> 
```

来源：[**jQuery.noConflict**](http://api.jquery.com/jQuery.noConflict/)

# c++ - C++11 现代风格循环与旧式循环的性能

> ID：14055975
> 
> 赞同：11
> 
> 时间：2012-12-27T14:07:38.607
> 
> 标签：c++, performance, c++11, foreach, auto

这是我在这里发布的第一个问题，所以我希望我不会做错任何事情。

我的问题涉及现代风格的 C++11 循环（`std::for_each`基于范围的 for）与旧式 C++ 循环（`for (...; ...; ...)`）的性能。根据我的理解，在我看来，现代 C++ 的座右铭是“表现力不妥协”。现代 C++ 风格带来安全、干净和快速的代码，几乎没有性能损失，并且可能比旧式 C++ 获得性能提升。

*现在我做了一个小测试来评估这个增益对循环*的影响有多大。首先我写了以下三个函数：

```
using namespace std;

void foo(vector<double>& v)
{
    for (size_t i = 0; i < v.size(); i++)
    {
        v[i] /= 42;
    }
}

void bar(vector<double>& v)
{
    for (auto& x : v)
    {
        x /= 42;
    }
}

void wee(vector<double>& v)
{
    for_each(begin(v), end(v), [] (double& x)
    {
        x /= 42;
    });
} 
```

`main()`然后我通过这种方式调用它们来比较它们的性能（正确注释/取消注释循环内的三行：

```
vector<double> make_vector()
{
    vector<double> v;
    for (int i = 0; i < 30000; i++) { v.push_back(i); }
    return v;
}

int main()
{
    time_t start = clock();

    auto v = make_vector();
    for (int i = 0; i <= 50000; i++) 
    { 
        // UNCOMMENT THE FUNCTION CALL TO BE TESTED, COMMENT THE OTHERS

        foo(v);
        // bar(v); 
        // wee(v);
    }

    time_t end = clock();
    cout << (end - start) << endl;

    return 0;
} 
```

通过注释/取消注释`main()`'s 循环中的行并使用旧式循环作为基线，平均每个版本的程序执行 10 次以上，基于范围的 for 循环的性能差约 1.9 倍，而基于`std::for_each`并且 lambdas 的性能差了约 2.3 倍。

我使用 Clang 3.2 来编译它，我还没有尝试过 MS VC11（我正在使用 WinXP）。

考虑到我期望获得可比较的执行时间，我的问题是：

1.  我做了什么明显错误的事情吗？
2.  如果不是，那么 2 倍的性能损失难道不是不采用现代风格循环的好理由吗？

我想指出，我确实相信以现代 C++ 风格编写的代码的清晰度和安全性会为可能的性能损失带来回报，但我完全不同意在清晰度/安全性之间没有权衡的说法一边和另一边的表现。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T15:04:35.687

看起来只有当您没有在编译器中启用优化时才会出现差异。

使用 Clang，您可以使用`-O[0-3]`标志启用优化。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-25T19:17:51.747

[Mankarse](https://stackoverflow.com/a/14056730/1762344)是对的 - 很可能您没有启用优化。

实际上在 Clang 上，它们在主循环中产生几乎相同的结果 ASM 代码，并且前后代码的差异很小。

我测试了四个版本：`hand_loop_index`, `hand_loop_iterator`, `range_based_for`,`for_each_algorithm`

`hand_loop_iterator`,`range_based_for`和`for_each_algorithm`- 对于完整的函数体，这三个确实产生**完全相同的结果 ASM**，唯一的区别在于标签的名称。

即用迭代器手工编写的 for 循环产生与基于范围的 for 和 std::for_each 完全相同的 ASM 代码。

带索引的循环和带迭代器的循环之间存在一些差异。

两种情况下的主循环几乎相同。唯一的小区别是迭代器`rdx`使用版本寄存器而不是`rsi`.

# 索引版本：

```
.LBB0_7:                                # %vector.body
                                        # =>This Inner Loop Header: Depth=1
    movupd  -48(%rsi), %xmm1
    movupd  -32(%rsi), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -48(%rsi)
    movupd  %xmm2, -32(%rsi)
    movupd  -16(%rsi), %xmm1
    movupd  (%rsi), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -16(%rsi)
    movupd  %xmm2, (%rsi)
    addq    $64, %rsi
    addq    $-8, %rdi
    jne .LBB0_7 
```

# 迭代器版本：

```
.LBB1_6:                                # %vector.body
                                        # =>This Inner Loop Header: Depth=1
    movupd  -48(%rdx), %xmm1
    movupd  -32(%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -48(%rdx)
    movupd  %xmm2, -32(%rdx)
    movupd  -16(%rdx), %xmm1
    movupd  (%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -16(%rdx)
    movupd  %xmm2, (%rdx)
    addq    $64, %rdx
    addq    $-8, %rsi
    jne .LBB1_6 
```

索引与迭代器版本的前/后代码有很多差异，但对于足够大的数组，它不应该对总结果时间产生太大影响。

# [**带有 ASM 输出的 Coliru 上的 LIVE DEMO**](http://coliru.stacked-crooked.com/a/abb9d53fdde588fb)

```
#include <algorithm>
#include <iterator>
#include <vector>

using namespace std;

void hand_loop_index(vector<double> &v)
{
    for (size_t i = 0; i < v.size(); ++i)
    {
        v[i] /= 42;
    }
}

void hand_loop_iterator(vector<double> &v)
{
    for (auto first = begin(v), last = end(v); first!=last; ++first)
    {
        *first /= 42;
    }
}

void range_based_for(vector<double> &v)
{
    for (auto &x : v)
    {
        x /= 42;
    }
}

void for_each_algorithm(vector<double> &v)
{
    for_each(begin(v), end(v), [] (double &x)
    {
        x /= 42;
    });
} 
```

# 结果 ASM：

```
# clang++ -std=c++1z -O3 -Wall -pedantic -pthread main.cpp -S
    .text
    .file   "main.cpp"
    .section    .rodata.cst16,"aM",@progbits,16
    .align  16
.LCPI0_0:
    .quad   4631107791820423168     # double 4.200000e+01
    .quad   4631107791820423168     # double 4.200000e+01
    .section    .rodata.cst8,"aM",@progbits,8
    .align  8
.LCPI0_1:
    .quad   4631107791820423168     # double 42
    .text
    .globl  _Z15hand_loop_indexRSt6vectorIdSaIdEE
    .align  16, 0x90
    .type   _Z15hand_loop_indexRSt6vectorIdSaIdEE,@function
_Z15hand_loop_indexRSt6vectorIdSaIdEE:  # @_Z15hand_loop_indexRSt6vectorIdSaIdEE
    .cfi_startproc
# BB#0:
    movq    (%rdi), %rax
    movq    8(%rdi), %rcx
    subq    %rax, %rcx
    je  .LBB0_11
# BB#1:                                 # %.lr.ph
    sarq    $3, %rcx
    cmpq    $1, %rcx
    movl    $1, %edx
    cmovaq  %rcx, %rdx
    xorl    %edi, %edi
    testq   %rdx, %rdx
    je  .LBB0_10
# BB#2:                                 # %overflow.checked
    xorl    %edi, %edi
    movq    %rdx, %r8
    andq    $-4, %r8
    je  .LBB0_9
# BB#3:                                 # %vector.body.preheader
    cmpq    $1, %rcx
    movl    $1, %edi
    cmovaq  %rcx, %rdi
    addq    $-4, %rdi
    movq    %rdi, %rsi
    shrq    $2, %rsi
    xorl    %r9d, %r9d
    btq $2, %rdi
    jb  .LBB0_5
# BB#4:                                 # %vector.body.prol
    movupd  (%rax), %xmm0
    movupd  16(%rax), %xmm1
    movapd  .LCPI0_0(%rip), %xmm2   # xmm2 = [4.200000e+01,4.200000e+01]
    divpd   %xmm2, %xmm0
    divpd   %xmm2, %xmm1
    movupd  %xmm0, (%rax)
    movupd  %xmm1, 16(%rax)
    movl    $4, %r9d
.LBB0_5:                                # %vector.body.preheader.split
    testq   %rsi, %rsi
    je  .LBB0_8
# BB#6:                                 # %vector.body.preheader.split.split
    cmpq    $1, %rcx
    movl    $1, %edi
    cmovaq  %rcx, %rdi
    andq    $-4, %rdi
    subq    %r9, %rdi
    leaq    48(%rax,%r9,8), %rsi
    movapd  .LCPI0_0(%rip), %xmm0   # xmm0 = [4.200000e+01,4.200000e+01]
    .align  16, 0x90
.LBB0_7:                                # %vector.body
                                        # =>This Inner Loop Header: Depth=1
    movupd  -48(%rsi), %xmm1
    movupd  -32(%rsi), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -48(%rsi)
    movupd  %xmm2, -32(%rsi)
    movupd  -16(%rsi), %xmm1
    movupd  (%rsi), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -16(%rsi)
    movupd  %xmm2, (%rsi)
    addq    $64, %rsi
    addq    $-8, %rdi
    jne .LBB0_7
.LBB0_8:
    movq    %r8, %rdi
.LBB0_9:                                # %middle.block
    cmpq    %rdi, %rdx
    je  .LBB0_11
    .align  16, 0x90
.LBB0_10:                               # %scalar.ph
                                        # =>This Inner Loop Header: Depth=1
    movsd   (%rax,%rdi,8), %xmm0    # xmm0 = mem[0],zero
    divsd   .LCPI0_1(%rip), %xmm0
    movsd   %xmm0, (%rax,%rdi,8)
    incq    %rdi
    cmpq    %rcx, %rdi
    jb  .LBB0_10
.LBB0_11:                               # %._crit_edge
    retq
.Lfunc_end0:
    .size   _Z15hand_loop_indexRSt6vectorIdSaIdEE, .Lfunc_end0-_Z15hand_loop_indexRSt6vectorIdSaIdEE
    .cfi_endproc

.section    .rodata.cst16,"aM",@progbits,16
    .align  16
.LCPI1_0:
    .quad   4631107791820423168     # double 4.200000e+01
    .quad   4631107791820423168     # double 4.200000e+01
    .section    .rodata.cst8,"aM",@progbits,8
    .align  8
.LCPI1_1:
    .quad   4631107791820423168     # double 42
    .text
    .globl  _Z18hand_loop_iteratorRSt6vectorIdSaIdEE
    .align  16, 0x90
    .type   _Z18hand_loop_iteratorRSt6vectorIdSaIdEE,@function
_Z18hand_loop_iteratorRSt6vectorIdSaIdEE: # @_Z18hand_loop_iteratorRSt6vectorIdSaIdEE
    .cfi_startproc
# BB#0:
    movq    (%rdi), %rdx
    movq    8(%rdi), %rax
    cmpq    %rax, %rdx
    je  .LBB1_11
# BB#1:                                 # %.lr.ph.preheader
    movabsq $4611686018427387900, %rsi # imm = 0x3FFFFFFFFFFFFFFC
    leaq    -8(%rax), %rcx
    subq    %rdx, %rcx
    shrq    $3, %rcx
    incq    %rcx
    xorl    %edi, %edi
    movq    %rcx, %r9
    andq    %rsi, %r9
    je  .LBB1_8
# BB#2:                                 # %vector.body.preheader
    andq    %rcx, %rsi
    leaq    -4(%rsi), %rdi
    movq    %rdi, %r11
    shrq    $2, %r11
    xorl    %r10d, %r10d
    btq $2, %rdi
    jb  .LBB1_4
# BB#3:                                 # %vector.body.prol
    movupd  (%rdx), %xmm0
    movupd  16(%rdx), %xmm1
    movapd  .LCPI1_0(%rip), %xmm2   # xmm2 = [4.200000e+01,4.200000e+01]
    divpd   %xmm2, %xmm0
    divpd   %xmm2, %xmm1
    movupd  %xmm0, (%rdx)
    movupd  %xmm1, 16(%rdx)
    movl    $4, %r10d
.LBB1_4:                                # %vector.body.preheader.split
    leaq    (%rdx,%r9,8), %r8
    testq   %r11, %r11
    je  .LBB1_7
# BB#5:                                 # %vector.body.preheader.split.split
    subq    %r10, %rsi
    leaq    48(%rdx,%r10,8), %rdx
    movapd  .LCPI1_0(%rip), %xmm0   # xmm0 = [4.200000e+01,4.200000e+01]
    .align  16, 0x90
.LBB1_6:                                # %vector.body
                                        # =>This Inner Loop Header: Depth=1
    movupd  -48(%rdx), %xmm1
    movupd  -32(%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -48(%rdx)
    movupd  %xmm2, -32(%rdx)
    movupd  -16(%rdx), %xmm1
    movupd  (%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -16(%rdx)
    movupd  %xmm2, (%rdx)
    addq    $64, %rdx
    addq    $-8, %rsi
    jne .LBB1_6
.LBB1_7:
    movq    %r8, %rdx
    movq    %r9, %rdi
.LBB1_8:                                # %middle.block
    cmpq    %rdi, %rcx
    je  .LBB1_11
# BB#9:
    movsd   .LCPI1_1(%rip), %xmm0   # xmm0 = mem[0],zero
    .align  16, 0x90
.LBB1_10:                               # %.lr.ph
                                        # =>This Inner Loop Header: Depth=1
    movsd   (%rdx), %xmm1           # xmm1 = mem[0],zero
    divsd   %xmm0, %xmm1
    movsd   %xmm1, (%rdx)
    addq    $8, %rdx
    cmpq    %rdx, %rax
    jne .LBB1_10
.LBB1_11:                               # %._crit_edge
    retq
.Lfunc_end1:
    .size   _Z18hand_loop_iteratorRSt6vectorIdSaIdEE, .Lfunc_end1-_Z18hand_loop_iteratorRSt6vectorIdSaIdEE
    .cfi_endproc

.section    .rodata.cst16,"aM",@progbits,16
    .align  16
.LCPI2_0:
    .quad   4631107791820423168     # double 4.200000e+01
    .quad   4631107791820423168     # double 4.200000e+01
    .section    .rodata.cst8,"aM",@progbits,8
    .align  8
.LCPI2_1:
    .quad   4631107791820423168     # double 42
    .text
    .globl  _Z15range_based_forRSt6vectorIdSaIdEE
    .align  16, 0x90
    .type   _Z15range_based_forRSt6vectorIdSaIdEE,@function
_Z15range_based_forRSt6vectorIdSaIdEE:  # @_Z15range_based_forRSt6vectorIdSaIdEE
    .cfi_startproc
# BB#0:
    movq    (%rdi), %rdx
    movq    8(%rdi), %rax
    cmpq    %rax, %rdx
    je  .LBB2_11
# BB#1:                                 # %.lr.ph.preheader
    movabsq $4611686018427387900, %rsi # imm = 0x3FFFFFFFFFFFFFFC
    leaq    -8(%rax), %rcx
    subq    %rdx, %rcx
    shrq    $3, %rcx
    incq    %rcx
    xorl    %edi, %edi
    movq    %rcx, %r9
    andq    %rsi, %r9
    je  .LBB2_8
# BB#2:                                 # %vector.body.preheader
    andq    %rcx, %rsi
    leaq    -4(%rsi), %rdi
    movq    %rdi, %r11
    shrq    $2, %r11
    xorl    %r10d, %r10d
    btq $2, %rdi
    jb  .LBB2_4
# BB#3:                                 # %vector.body.prol
    movupd  (%rdx), %xmm0
    movupd  16(%rdx), %xmm1
    movapd  .LCPI2_0(%rip), %xmm2   # xmm2 = [4.200000e+01,4.200000e+01]
    divpd   %xmm2, %xmm0
    divpd   %xmm2, %xmm1
    movupd  %xmm0, (%rdx)
    movupd  %xmm1, 16(%rdx)
    movl    $4, %r10d
.LBB2_4:                                # %vector.body.preheader.split
    leaq    (%rdx,%r9,8), %r8
    testq   %r11, %r11
    je  .LBB2_7
# BB#5:                                 # %vector.body.preheader.split.split
    subq    %r10, %rsi
    leaq    48(%rdx,%r10,8), %rdx
    movapd  .LCPI2_0(%rip), %xmm0   # xmm0 = [4.200000e+01,4.200000e+01]
    .align  16, 0x90
.LBB2_6:                                # %vector.body
                                        # =>This Inner Loop Header: Depth=1
    movupd  -48(%rdx), %xmm1
    movupd  -32(%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -48(%rdx)
    movupd  %xmm2, -32(%rdx)
    movupd  -16(%rdx), %xmm1
    movupd  (%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -16(%rdx)
    movupd  %xmm2, (%rdx)
    addq    $64, %rdx
    addq    $-8, %rsi
    jne .LBB2_6
.LBB2_7:
    movq    %r8, %rdx
    movq    %r9, %rdi
.LBB2_8:                                # %middle.block
    cmpq    %rdi, %rcx
    je  .LBB2_11
# BB#9:
    movsd   .LCPI2_1(%rip), %xmm0   # xmm0 = mem[0],zero
    .align  16, 0x90
.LBB2_10:                               # %.lr.ph
                                        # =>This Inner Loop Header: Depth=1
    movsd   (%rdx), %xmm1           # xmm1 = mem[0],zero
    divsd   %xmm0, %xmm1
    movsd   %xmm1, (%rdx)
    addq    $8, %rdx
    cmpq    %rdx, %rax
    jne .LBB2_10
.LBB2_11:                               # %._crit_edge
    retq
.Lfunc_end2:
    .size   _Z15range_based_forRSt6vectorIdSaIdEE, .Lfunc_end2-_Z15range_based_forRSt6vectorIdSaIdEE
    .cfi_endproc

.section    .rodata.cst16,"aM",@progbits,16
    .align  16
.LCPI3_0:
    .quad   4631107791820423168     # double 4.200000e+01
    .quad   4631107791820423168     # double 4.200000e+01
    .section    .rodata.cst8,"aM",@progbits,8
    .align  8
.LCPI3_1:
    .quad   4631107791820423168     # double 42
    .text
    .globl  _Z18for_each_algorithmRSt6vectorIdSaIdEE
    .align  16, 0x90
    .type   _Z18for_each_algorithmRSt6vectorIdSaIdEE,@function
_Z18for_each_algorithmRSt6vectorIdSaIdEE: # @_Z18for_each_algorithmRSt6vectorIdSaIdEE
    .cfi_startproc
# BB#0:
    movq    (%rdi), %rdx
    movq    8(%rdi), %rax
    cmpq    %rax, %rdx
    je  .LBB3_11
# BB#1:                                 # %.lr.ph.i.preheader
    movabsq $4611686018427387900, %rsi # imm = 0x3FFFFFFFFFFFFFFC
    leaq    -8(%rax), %rcx
    subq    %rdx, %rcx
    shrq    $3, %rcx
    incq    %rcx
    xorl    %edi, %edi
    movq    %rcx, %r9
    andq    %rsi, %r9
    je  .LBB3_8
# BB#2:                                 # %vector.body.preheader
    andq    %rcx, %rsi
    leaq    -4(%rsi), %rdi
    movq    %rdi, %r11
    shrq    $2, %r11
    xorl    %r10d, %r10d
    btq $2, %rdi
    jb  .LBB3_4
# BB#3:                                 # %vector.body.prol
    movupd  (%rdx), %xmm0
    movupd  16(%rdx), %xmm1
    movapd  .LCPI3_0(%rip), %xmm2   # xmm2 = [4.200000e+01,4.200000e+01]
    divpd   %xmm2, %xmm0
    divpd   %xmm2, %xmm1
    movupd  %xmm0, (%rdx)
    movupd  %xmm1, 16(%rdx)
    movl    $4, %r10d
.LBB3_4:                                # %vector.body.preheader.split
    leaq    (%rdx,%r9,8), %r8
    testq   %r11, %r11
    je  .LBB3_7
# BB#5:                                 # %vector.body.preheader.split.split
    subq    %r10, %rsi
    leaq    48(%rdx,%r10,8), %rdx
    movapd  .LCPI3_0(%rip), %xmm0   # xmm0 = [4.200000e+01,4.200000e+01]
    .align  16, 0x90
.LBB3_6:                                # %vector.body
                                        # =>This Inner Loop Header: Depth=1
    movupd  -48(%rdx), %xmm1
    movupd  -32(%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -48(%rdx)
    movupd  %xmm2, -32(%rdx)
    movupd  -16(%rdx), %xmm1
    movupd  (%rdx), %xmm2
    divpd   %xmm0, %xmm1
    divpd   %xmm0, %xmm2
    movupd  %xmm1, -16(%rdx)
    movupd  %xmm2, (%rdx)
    addq    $64, %rdx
    addq    $-8, %rsi
    jne .LBB3_6
.LBB3_7:
    movq    %r8, %rdx
    movq    %r9, %rdi
.LBB3_8:                                # %middle.block
    cmpq    %rdi, %rcx
    je  .LBB3_11
# BB#9:
    movsd   .LCPI3_1(%rip), %xmm0   # xmm0 = mem[0],zero
    .align  16, 0x90
.LBB3_10:                               # %.lr.ph.i
                                        # =>This Inner Loop Header: Depth=1
    movsd   (%rdx), %xmm1           # xmm1 = mem[0],zero
    divsd   %xmm0, %xmm1
    movsd   %xmm1, (%rdx)
    addq    $8, %rdx
    cmpq    %rdx, %rax
    jne .LBB3_10
.LBB3_11:                               # %_ZSt8for_eachIN9__gnu_cxx17__normal_iteratorIPdSt6vectorIdSaIdEEEEZ18for_each_algorithmR5_E3$_0ET0_T_SA_S9_.exit
    retq
.Lfunc_end3:
    .size   _Z18for_each_algorithmRSt6vectorIdSaIdEE, .Lfunc_end3-_Z18for_each_algorithmRSt6vectorIdSaIdEE
    .cfi_endproc

    .ident  "clang version 3.7.0 (tags/RELEASE_370/final 246979)"
    .section    ".note.GNU-stack","",@progbits 
```

# css - JQuery UI 菜单栏下拉问题

> ID：14055976
> 
> 赞同：0
> 
> 时间：2012-12-27T14:07:41.480
> 
> 标签：css, jquery-ui, jquery-ui-menubar

当我有一个包含子菜单的菜单项时，此子菜单显示在菜单的 div 内，拧 css（将鼠标悬停在*服务*选项卡上）：http: [//jsfiddle.net/jYXnE/2/](http://jsfiddle.net/jYXnE/2/)

在初始化菜单栏插件时，这部分 JS（似乎每个人都在使用）困扰着我：

```
position: {
        within: $('#frame').add(window).first()
} 
```

由于官方示例中没有任何`frame`id ，我猜它会即时创建一个 div ？

我将我的代码与其他一些菜单栏 jsFiddle 进行了比较，但我找不到它的问题，任何帮助将不胜感激。

![在此处输入图像描述](../Images/6bc12c65a959900b3f174ecaceace728.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:12:00.900

好像我忘记链接[菜单栏的 CSS](http://view.jqueryui.com/menubar/themes/base/jquery.ui.menubar.css)了。现在一切都很好。

# emacs - Emacs 框架周围的边框/框架

> ID：14055977
> 
> 赞同：7
> 
> 时间：2012-12-27T14:07:42.273
> 
> 标签：emacs, border, frame

如何更改某些外边框或内边框的颜色？每当我更改`border-color`框架时，我都看不到任何更改，并且不允许我更改边框宽度。

到目前为止，起作用的是

```
(set-frame-parameter (selected-frame) 'internal-border-width 15) 
```

这在缓冲区周围添加了一些帧。

但我不知道如何改变内部颜色。有谁知道如何在工作空间周围有一个漂亮的边框/框架？

任何方法都行。

编辑：添加了 sds 完成的内容：

我实际上希望它周围的区域有不同的颜色，所以在红色之外。

![在此处输入图像描述](../Images/48e25af5d045ecdd5f67569f047cc365.png)

我找到了一个我想要完成的框架的例子（阅读：这就是我一直以来的样子）。

![示例图像](../Images/f3be3a4864ae0c52fd4f53fd4c623925.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:36:44.843

似乎您无法更改现有框架的边框宽度，但您可以创建一个具有所需边框宽度的新框架：

```
(frame-parameter (make-frame '((border-width . 10))) 'border-width)
==> 10 
```

`border-width`但是，新框架的外观（据我在 ubuntu 上所知）与所有其他框架的外观（其中为 0）没有区别；[考虑到窗口管理器可能不注意您指定的 [边框宽度]](http://www.gnu.org/software/emacs/manual/html_node/emacs/Borders-X.html)，我想这并不奇怪。

我认为，更相关的问题是你真正想要做什么？

您希望 Emacs 窗口（在 Emacs 世界中称为框架）在视觉上与所有其他窗口不同吗？

如果这是您所追求的，那么您必须意识到窗口装饰是窗口管理器的域（如上所述），应用程序（如 Emacs）只能影响使用“提示”的那些，并且窗口管理器可以自由别理他们。

但是，您可以更改`fringe`面部的参数：

```
(set-face-background 'fringe "red") 
```

这应该使 Emacs 框架外观非常独特。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:54:42.840

我认为您正在指定边缘。如果您使用的是颜色主题功能，您可以使用它来设置边缘颜色。

```
(defun color-theme-whatever ()
  "A color theme"
(color-theme-install
 '(color-theme-whatever
   ((fringe ((t (:background "#111" :foreground "#444")))))))) 
```

# asp.net-mvc - Kendo MVC Wrappers 客户端验证

> ID：14055978
> 
> 赞同：1
> 
> 时间：2012-12-27T14:07:44.213
> 
> 标签：asp.net-mvc, telerik, data-annotations, kendo-ui, telerik-mvc

我正在使用 Kendo UI Server Side Wrappers 创建一个网格来管理（CRUD）我们系统中的消息列表。该模型非常简单，只要求消息不超过 150 个字符。为了强制消息长度，我在模型中使用了以下数据注释：

```
[StringLength(150, ErrorMessage = "Message exceeded the maximum length allowed.  Please ensure you message is no longer than 150 characters")] 
```

这是我的网格的样子：

```
@model OperatorMessageListModel

@{
    TransactionStatusType status = Model.TransactionStatus;
    ViewBag.Title = String.Format("{0} Transaction Operator Messages", status);
    string header = string.Format("{0} Transaction Messages", status);
    string messagesTableId = string.Format("{0}TransactionOperatorMessagesGrid", status);
}

<h2>@header</h2>

@(Html.Kendo().Grid(Model.OperatorMessages)
      .Name(messagesTableId)
      .TableHtmlAttributes(new { style = "width: 50% height:75%" })
      .Columns(columns =>
                   {

                       columns.Bound(m => m.Message).Title("");
                       columns.Bound(m => m.Index).Hidden(true);
                       if (!Model.IsInherited) //only edit if you own the list and there's anyhting to edit
                       {
                           columns.Command(cmd =>
                                               {
                                                   cmd.Edit().UpdateText("Save");
                                                   cmd.Destroy();
                                               }).Width("20%");

                       }
                   })
     .Pageable()
     .Scrollable(s => s.Enabled(false))
     .ToolBar(cmd =>
                  {

                      if (!Model.IsInherited) //you can add messages to the lists that you own
                      {
                          cmd.Create().Text("Add new message");
                      }

                      if (!Model.OwnedByRoot && Model.OperatorMessages.Any()) //if the root owns this it can't override or inherit its own list.
                      {
                          var actionName = Model.IsInherited ? "OverrideTrasactionMessageList" : "InheritTrasactionMessageList";
                          cmd.Custom().Text(Model.OverrideOrInheritButtonText).Action(actionName, "OperatorMessage", new { Model.OrgId, Model.TransactionStatus });
                      }
                  }
           )

     .Editable(editable => editable.Mode(GridEditMode.InLine))
     .DataSource(ds => ds
        .Server()
        .Model(model => model.Id(m => m.Index))
        .Create(c => c.Action("CreateTransactionMessage", "OperatorMessage", new { @Model.OrgId, @Model.TransactionStatus }))
        .Read(c => c.Action("List", "OperatorMessage", new { @Model.OrgId, @Model.TransactionStatus }))
        .Update(c => c.Action("EditTransactionMessage", "OperatorMessage"))
        .Destroy(c => c.Action("DeleteTrasactionMessage", "OperatorMessage"))

     )
) 
```

这是控制器代码：

```
[HttpPost]
public ActionResult CreateTransactionMessage([DataSourceRequest] DataSourceRequest request,
                                                 OperatorMessageModel newMessage, string OrgId,
                                                 string TransactionStatus)
{

    _transactionOperatorMessageService.AddOperatorMessage(OrgId, TransactionStatus, newMessage,
                                                          CurrentUser.Name());
    return RedirectToAction("List", new {OrgId, TransactionStatus});
} 
```

当用户输入超过 150 个字符的消息时，我希望向用户显示验证消息。此外，表单不会被发送回控制器。在 Chrome 和 Firefox 中一切正常。但是，在 IE8 中显示消息，但仍将表单发送回控制器。有人见过这个吗？

# session - 记录未登录用户的会话

> ID：14055985
> 
> 赞同：0
> 
> 时间：2012-12-27T14:08:28.690
> 
> 标签：session, symfony

我正在使用 Symfony2.0，我想知道是否有一种方法可以通过一种会话来“记录”访问者。

这个想法是：我有一个关于问题的网站。你需要记录一些问题，但我想创建一个试用模式。这个想法是来访者，尝试试用，当她/他稍后回来时，仍然有她/他玩过的问题，保存。她/他的分数将被保存为其他用户。

除了如果我们丢失了会话，这不是问题。（比如如果她/他重置了 cookie，或者我们清理了试用数据库记录）

理想的情况是在数据库中存储一个会话号，当用户回来时，我检查他是否在记录中匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:17:30.040

我在这里看到的唯一解决方案是 cookie，但如果用户从不同的电脑进入，那么你什么都没有，你可以提供“类似用户”的体验，但有限制。

在用户浏览器中保存一个 cookie，然后创建一个会话对象，但一定要以非易失的方式保存它。看起来你会很好地为此专门实现一个会话类，听起来很有趣。

# android - 创建路线 Android 谷歌地图

> ID：14055995
> 
> 赞同：0
> 
> 时间：2012-12-27T14:09:14.590
> 
> 标签：android, google-maps

我正在尝试创建一个以先前选择的点为中心的 mapView。我想在此点和设备的当前位置之间创建一条路线。你能帮助我吗？也许发布教程或示例？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:13:56.040

您可以使用以下代码下载包含两点之间路径的 kml 文件：

```
public static Document getKml(GeoPoint src, GeoPoint dest) {
        // connect to map web service
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");// from
        urlString.append(Double.toString((double) src.getLatitudeE6() / 1.0E6));
        urlString.append(",");
        urlString
                .append(Double.toString((double) src.getLongitudeE6() / 1.0E6));
        urlString.append("&daddr=");// to
        urlString
                .append(Double.toString((double) dest.getLatitudeE6() / 1.0E6));
        urlString.append(",");
        urlString
                .append(Double.toString((double) dest.getLongitudeE6() / 1.0E6));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        // Log.d("xxx","URL="+urlString.toString());
        // get the kml (XML) doc. And parse it to get the coordinates(direction
        // route).

        HttpURLConnection urlConnection = null;
        URL url = null;

        try {
            url = new URL(urlString.toString());
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            return db.parse(urlConnection.getInputStream());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }
    } 
```

然后 ip 由你来解析它并在地图上显示它;-)

暗示：

```
 if (doc != null
            && doc.getElementsByTagName("GeometryCollection").getLength() > 0) {

        // String path =
        // doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getNodeName();
        String path = doc.getElementsByTagName("GeometryCollection")
                .item(0).getFirstChild().getFirstChild().getFirstChild()
                .getNodeValue();
        // //Log.d("xxx","path="+ path);
        String[] pairs = path.split(" ");
        String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:18:49.357

参考这个例子

```
 public class MapDirection extends MapActivity{
        MapView mapview;
        MapRouteOverlay mapoverlay;
        Context _context;
        List<Overlay> maplistoverlay;
        Drawable drawable,drawable2;
        MapOverlay mapoverlay2,mapoverlay3;
        GeoPoint srcpoint,destpoint;
        Overlay overlayitem;
        public void onCreate(Bundle savedInstanceState){
          super.onCreate(savedInstanceState);
          requestWindowFeature(Window.FEATURE_NO_TITLE);  
          setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
          setContentView(R.layout.map_direction);
          RegisterActivities.registerActivity(this);
          mapview=(MapView)this.findViewById(R.id.mapview);
          callMap();
          }
         private void callMap() {

           srcpoint=new GeoPoint((int)(Data.src_lat_date*1E6),(int)(Data.src_long_data*1E6));
            maplistoverlay=mapview.getOverlays();
            drawable=this.getResources().getDrawable(R.drawable.green_a);
            mapoverlay2=new MapOverlay(drawable);
            OverlayItem overlayitem = new OverlayItem(srcpoint, "", "");
            mapoverlay2.addOverlay(overlayitem);
            maplistoverlay.add(mapoverlay2);

            destpoint=new GeoPoint((int)(Data.dest_lat_data*1E6),(int)(Data.dest_long_data*1E6));
            drawable2=this.getResources().getDrawable(R.drawable.green_b);
            mapoverlay3=new MapOverlay(drawable2);
            OverlayItem overlayitem3 = new OverlayItem(destpoint, "", "");
            mapoverlay3.addOverlay(overlayitem3);
            maplistoverlay.add(mapoverlay3);

            double dest_lat = Data.dest_lat_data;
            double dest_long = Data.dest_long_data;

            GeoPoint srcGeoPoint = new GeoPoint((int) (Data.src_lat_date* 1E6),
                (int) (Data.src_long_data * 1E6));
            GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),
                (int) (dest_long * 1E6));

            DrawPath(srcGeoPoint, destGeoPoint, Color.BLUE, mapview);

            mapview.getController().animateTo(srcGeoPoint);
            mapview.getController().setZoom(13);
            //mapview.setStreetView(true);
            mapview.setBuiltInZoomControls(true);
            mapview.invalidate();

          }
          private void DrawPath(GeoPoint src, GeoPoint dest, int color,
              MapView mMapView01) {

            // connect to map web service
            StringBuilder urlString = new StringBuilder();
            urlString.append("http://maps.google.com/maps?f=d&hl=en");
            urlString.append("&saddr=");//from
            urlString.append( Double.toString((double)src.getLatitudeE6()/1.0E6 ));
            urlString.append(",");
            urlString.append( Double.toString((double)src.getLongitudeE6()/1.0E6 ));
            urlString.append("&daddr=");//to
            urlString.append( Double.toString((double)dest.getLatitudeE6()/1.0E6 ));
            urlString.append(",");
            urlString.append( Double.toString((double)dest.getLongitudeE6()/1.0E6 ));
            urlString.append("&ie=UTF8&0&om=0&output=kml");
            Log.d("xxx","URL="+urlString.toString());

            //System.out.println(urlString);
            // get the kml (XML) doc. And parse it to get the coordinates(direction route).
            Document doc = null;
            HttpURLConnection urlConnection= null;
            URL url = null;
            try
            {
              url = new URL(urlString.toString());
              urlConnection=(HttpURLConnection)url.openConnection();
              urlConnection.setRequestMethod("GET");
              urlConnection.setDoOutput(true);
              urlConnection.setDoInput(true);
              urlConnection.connect();

              DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
              DocumentBuilder db = dbf.newDocumentBuilder();
              doc = db.parse(urlConnection.getInputStream());

              if(doc.getElementsByTagName("GeometryCollection").getLength()>0)
              {
                //String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getNodeName();
                String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getFirstChild().getNodeValue() ;
                Log.d("xxx","path="+ path);
                String [] pairs = path.split(" ");
                String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude lngLat[2]=height
                // src
                GeoPoint startGP = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));
                //mMapView01.getOverlays().add(overlayitem);
                GeoPoint gp1;
                GeoPoint gp2 = startGP;
                for(int i=1;i<pairs.length;i++) // the last one would be crash
                {
                  lngLat = pairs[i].split(",");
                  gp1 = gp2;
                  // watch out! For GeoPoint, first:latitude, second:longitude
                  gp2 = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));
                  mMapView01.getOverlays().add(new MapRouteOverlay(gp1,gp2,2,color));
                  Log.d("xxx","pair:" + pairs[i]);
                }
                //mMapView01.getOverlays().add(new MapRouteOverlay(dest,dest, 3)); // use the default color
              }
            }
            catch (MalformedURLException e)
            {
              e.printStackTrace();
            }
            catch (IOException e)
            {
              e.printStackTrace();
            }
            catch (ParserConfigurationException e)
            {
              e.printStackTrace();
            }
            catch (SAXException e)
            {
              e.printStackTrace();
            }

          }
          @Override
            protected boolean isRouteDisplayed() {
              // TODO Auto-generated method stub
              return false;
            }
        } 
```

MapRouteOverlay.java：

```
 public class MapRouteOverlay extends Overlay {

      private GeoPoint gp1;
      private GeoPoint gp2;

      private int mode=0;
      private int defaultColor;

      public MapRouteOverlay(GeoPoint gp1,GeoPoint gp2,int mode) // GeoPoint is a int. (6E)
      {
        this.gp1 = gp1;
        this.gp2 = gp2;
        this.mode = mode;
        defaultColor = 999; // no defaultColor

      }

      public MapRouteOverlay(GeoPoint gp1,GeoPoint gp2,int mode, int defaultColor)
      {
        this.gp1 = gp1;
        this.gp2 = gp2;
        this.mode = mode;
        this.defaultColor = defaultColor;
      }

      public int getMode()
      {
        return mode;
      }

      public boolean draw
        (Canvas canvas, MapView mapView, boolean shadow, long when)
        {
          Projection projection = mapView.getProjection();
          if (shadow == false)
          {

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            Point point = new Point();
            projection.toPixels(gp1, point);

            if(mode==2)
            {
              if(defaultColor==999)
                paint.setColor(Color.RED);
              else
                paint.setColor(defaultColor);
              Point point2 = new Point();
              projection.toPixels(gp2, point2);
              paint.setStrokeWidth(5);
              paint.setAlpha(120);
              canvas.drawLine(point.x, point.y, point2.x,point2.y, paint);
            }

          }
          return super.draw(canvas, mapView, shadow, when);
        }
    } 
```

MapOverlay.java：

```
 public class MapOverlay extends ItemizedOverlay {
      private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

      public MapOverlay(Drawable _defaultMarker) {

        super(boundCenterBottom(_defaultMarker));
      }

      @Override
      protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
      } 
      public void addOverlay(OverlayItem overlay) {
          mOverlays.add(overlay);
          populate();
      }

      @Override
      public int size() {
        return mOverlays.size();
      }

    } 
```

# android - 使用 fb sdk 在 facebook 墙上发布视频

> ID：14055996
> 
> 赞同：1
> 
> 时间：2012-12-27T14:09:39.923
> 
> 标签：android, facebook, facebook-graph-api

我在日志猫中遇到错误

> {Response: responseCode: 400, graphObject: null, error: {HttpStatus: 400, errorCode: 353, errorType: OAuthException, errorMessage: (#353) Missing video file}, isFromCache:false}

使用以下方法

```
 private void postVideo() {         
        try {

            File file = new File(videoPath);

            ParcelFileDescriptor descriptor = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
            Bundle parameters = new Bundle(1);
            parameters.putParcelable(file.getName(), descriptor);

            new Request(Session.getActiveSession(), "me/videos", parameters, HttpMethod.POST, new Request.Callback() {

                @Override
                public void onCompleted(Response response) {                        
                    Constants.showLog(TAG, "In Response " + response.getGraphObject().getProperty("id"));       

                    JSONObject graphResponse = response.getGraphObject().getInnerJSONObject();
                    String postId = null;
                    try {
                        postId = graphResponse.getString("id");
                        Constants.showLog(TAG, "In Response id " + postId);
                    } catch (JSONException e) {
                        Constants.showLog(TAG,"JSON error "+ e.getMessage());
                    }

                }
            }).executeAsync();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:59:39.833

我看到您使用的是 Android SDK 3.0，并且我们提供了一种上传视频的简单方法。这是我用来将视频上传到 Facebook 的代码：

```
Request.Callback callback5 = new Request.Callback() {
    public void onCompleted(Response response) {    
        // response will have an id if successful
    }
};
File tempFile;
try {
    tempFile = Util.createTempFileFromAsset(getApplicationContext(), "video.mp4");
    Request request5 = Request.newUploadVideoRequest(session,
                    tempFile, callback5);
    RequestAsyncTask task5 = new RequestAsyncTask(request5);
    task5.execute();
} catch (IOException e) {
    Log.e(Util.TAG, "failed to create temp file");
    e.printStackTrace();
} 
```

和代码`createTempFileFromAsset`：

```
public static File createTempFileFromAsset(Context context, String assetPath) 
    throws IOException {
    InputStream inputStream = null;
    FileOutputStream outStream = null;

    try {
        AssetManager assets = context.getResources().getAssets();
        inputStream = assets.open(assetPath);

        File outputDir = context.getCacheDir(); // context being the
                                                // Activity pointer
        File outputFile = File.createTempFile("prefix", assetPath,
                outputDir);
        outStream = new FileOutputStream(outputFile);

        final int bufferSize = 1024 * 2;
        byte[] buffer = new byte[bufferSize];
        int n = 0;
        while ((n = inputStream.read(buffer)) != -1) {
            outStream.write(buffer, 0, n);
        }

        return outputFile;
    } finally {
        Utility.closeQuietly(outStream);
        Utility.closeQuietly(inputStream);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:38:47.227

选择文件 onActivityResult....

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        uiHelper.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {

        case RESULT_LOAD_IMAGE:
            if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                         filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                SubmitPost.this.file = new File(SubmitPost.this.file, picturePath);

//              MimeTypeMap mime = MimeTypeMap.getSingleton();
//              String type = mime.getMimeTypeFromExtension(ext);

                cursor.close();
            }
            break;
} 
```

并使用

```
if (!postParams.containsKey(MIGRATION_BUNDLE_PARAM)) {
                            postParams.putString(MIGRATION_BUNDLE_PARAM, FbSdkVersion.MIGRATION_BUNDLE);
                        } 
```

后

```
ParcelFileDescriptor descriptor = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
            Bundle parameters = new Bundle(1);
            parameters.putParcelable(file.getName(), descriptor); 
```

# php - 数组迭代php

> ID：14055999
> 
> 赞同：-3
> 
> 时间：2012-12-27T14:09:57.257
> 
> 标签：php, arrays, json

我是 php 新手，打印一些 JSON 内容时遇到问题

这是我的代码

```
//Read text file
$json_data = file_get_contents('data/data.txt');

//Decode it
$obj=json_decode($json_data, true);

//Print array content
print_r($obj);

//Loop the array to write content
foreach( $obj as $Item ){

    // add comment to html list
    echo $Item;
} 
```

我的 JSON 文件

```
[{"name":"ken"}, {"name":"barbie"}] 
```

我的输出

```
(
    [0] => Array ( [name] => ken )
    [1] => Array ( [name] => barbie )
)
ArrayArray 
```

我怎样才能只打印“ken”和“barbie”？

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:11:23.590

改变

```
echo $Item; 
```

至

```
echo $Item['name']; 
```