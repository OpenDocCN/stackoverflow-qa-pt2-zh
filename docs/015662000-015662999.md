# StackOverflow 问答 15662000-15662999

# tfs - TFS 2012 将工作项添加到积压工作

> ID：15662000
> 
> 赞同：2
> 
> 时间：2013-03-27T14:56:28.030
> 
> 标签：tfs, scrum, tfs-workitem

我正在尝试了解如何使用 scrum 方法来操作 Team Foundation Service。我的一个问题是：

我有一个产品待办事项和五个工作项。三个工作项分配给积压项并显示在“板”上，因此我可以将它们移动到待办事项、进行中和已完成之间。另外两个没有在船上展示。为什么？我如何将它们分配给积压工作以便能够在船上看到它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:16:22.913

不幸的是，董事会不支持这一点。对于要显示在板上的任务，它们*必须*是 PBI 或 Bug（或需求类别中的任何工作项）的子项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T16:03:01.893

我能够通过创建一个新任务来完成此任务，然后使用 ID# 作为父项将积压项目链接到任务（它也可以通过添加为子项来工作，如@JamesTupper 所述）。保存后，该项目出现在我的板上。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:46:47.993

我通过创建“项目任务”尖峰来实现这一点，以使这些类型的任务出现在他们自己的车道上。如果你想确保这项工作计入你的速度，你也可以估计这个 SPIKE，但我倾向于将这些视为不产生价值的“开销”任务，所以我不会在我们的速度中报告它们.

如果任务与您交付的价值直接相关（例如，您正在执行调查高峰以确定如何估计用户故事），您绝对应该估计 PBI，给它打分，然后将这些任务添加到该 PBI .

无论哪种方式，将任务添加为 PBI 的子项都是让它们加入董事会的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T18:18:59.397

如果我正确理解您的问题，请搜索您要分配给积压项目的工作项目。右键单击任务任务，然后选择“链接到现有工作项”。为链接类型选择父级，并确保您知道积压日志项的工作项 ID 并将其输入到工作项 ID 中。按确定，然后将任务项保存在网页的下部。

这对我有用。

# iis - Bluedragon 7.1 Application.cfm 被所有页面调用，而不仅仅是 cfm 页面

> ID：15662001
> 
> 赞同：1
> 
> 时间：2013-03-27T14:56:29.310
> 
> 标签：iis, iis-7, coldfusion, bluedragon, application.cfm

我们当前所有的网络服务器都具有以下配置： IIS 6.0 Windows Server 2003 Bluedragon 6.22

我们最近被告知要升级到 windows server 2008。为此，我们必须升级到 Bluedragon 7.1 和 IIS 7.0

我们遇到的问题是我们的网络应用程序中的所有页面/文件都调用了 application.cfm 文件，而不仅仅是 CFM 页面。因此，HTML/CFM 标签被注入到 .js 和其他类型的文件中，导致它们无法运行。

有谁知道如何配置这个？Application.cfm 应该只为 CFM 页面调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:21:16.807

我会首先检查 IIS 管理器下的处理程序映射，在服务器级别，然后是站点级别，以确保您仅将 cfm 处理程序附加到您希望的文件类型。

# c++ - 错误：非静态成员引用必须相对于特定对象

> ID：15662004
> 
> 赞同：0
> 
> 时间：2013-03-27T14:56:34.217
> 
> 标签：c++, visual-studio-2010, audio, windows-7

我正在尝试使用 C++ 程序来获取端点音频设备的 GUID。

```
 #include<stdio.h>
    #include<mmdeviceapi.h>

void main()
{
   wchar_t asid[100];
   HRESULT res; 

   res=IMMDevice::GetId(asid);      //This line gives ERROR
      if(res==S_OK)
        printf("1");

} 
```

# c++ - 表达式的类型

> ID：15662006
> 
> 赞同：4
> 
> 时间：2013-03-27T14:56:39.343
> 
> 标签：c++, c, language-lawyer

考虑 C++ 程序的以下部分；打印到控制台的值作为注释给出。

```
{ // case 1
unsigned int x = 10; 
unsigned int y = 20; 
std::cout << "u/u x - y: " << x-y << std::endl; // 4294967286
}   

{ // case 2
int x = 10; 
int y = 20; 
std::cout << "s/s x - y: " << x-y << std::endl; // -10
}   

{ // case 3
unsigned int x = 10; 
int y = 20; 
std::cout << "u/s x - y: " << x-y << std::endl; // 4294967286
}   

{ // case 4
int x = 10; 
unsigned int y = 20; 
std::cout << "s/u x - y: " << x-y << std::endl; // 4294967286
} 
```

我试图弄清楚 C++（尝试使用 gcc 4.7.2）如何从表达式定义类型（更具体地说，它的符号）。对于情况 1、3 和 4，通常的算术转换应将这两个值提升为无符号整数：

```
 10 = b00000000000000000000000000001010
 20 = b00000000000000000000000000010100 
```

然后，它会做一个 2 的补码得到 -20 并添加它：

```
 10 = b00000000000000000000000000001010
-20 = b11111111111111111111111111101100
      b11111111111111111111111111110110 
```

将其解释为**无符号**整数，您会得到 4294967286 - 非常好。

显然，对于案例 2，您会得到相同的计算/结果；但是，通常的算术转换应该导致两个操作数都被解释为有符号整数，并且结果似乎也被解释为有**符号**整数。

由此，我推断，如果操作数在通常的算术转换之后被签名，则结果是有符号的。否则，结果是无符号的。

所以，我的问题是：

1.  我的推论正确吗？
2.  标准在哪里定义了这一点？我在 C 或 C++ 标准中找不到对此的任何引用。
3.  其他操作呢？我怀疑`+`,`*`等会以相同的方式工作，但是移位和逻辑操作呢？

**编辑：**这似乎与[C++11 类型的（有符号 + 无符号）有关？](https://stackoverflow.com/questions/15314778/c11-type-of-signed-unsigned?rq=1)，但我的问题的关键部分似乎从那里接受的答案中丢失了：在通常的算术转换之后，表达式的结果是否总是两个操作数的类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:07:42.370

转换遵循整数转换等级原则。简而言之，整数操作数的处理方式如下。

首先，每个小于的操作数`int`都被转换为`int`（如果原始类型的所有值都适合），否则转换为`unsigned int`。

之后，如果（可能转换的）操作数类型是：

*   完全一样，没有转换发生。

*   大小相同，无符号优先。

*   大小不同，较小的转换为较大的。如果较大是无符号的，较小的也将转换为无符号。

这种转换将操作数转换为相同的类型，这也是结果的类型。

它被`[expr]§9`C++11 标准所涵盖。它还与`[conv]`和密切相关`[conv.rank]`。具体适用于哪些运营商在`[expr]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:07:12.807

好的，这很简单，我只是误读了标准...来自 C++ 11, §5 [expr] p9：

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。*目的是产生一个通用类型，这也是结果的类型。*这种模式称为通常的算术转换，...

# javascript - 为 RESTful JSON API 构建 Backbone.js 用户模型、集合和视图

> ID：15662011
> 
> 赞同：0
> 
> 时间：2013-03-27T14:56:48.237
> 
> 标签：javascript, node.js, backbone.js, restful-architecture

所以我刚刚为节点中的用户制作了一个完全 RESTful JSON API。当你访问时`http://localhost:8080/user/create`，你会得到你通常期望的东西——一个新用户，然后将其存储在数据库中，在我的例子中是 mongoDB。

```
{
  "createdAt": Date(),
  "updatedAt": Date(),
  "id": 1
} 
```

我的经验在于服务器端编程，但我正在尝试进入 Backbone.js。谁能指出我正确的方向或告诉我如何创建一个非常简单的主干用户模型和视图来注册用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:27:14.413

首先，Backbone 有一个 REST API，您只需要 1 个 URL 即可执行所有 REST 操作（GET、POST、PUT、DELETE、[PATCH]）。因此，如果您需要的不仅仅是 POST 请求，您可能需要考虑仅将 user/create 更改为 user，因为它对其他类型的请求没有意义。

现在对于代码，基于这种形式：

```
<div id="form">
  <input type="text" id="username" />
  <button id="post">Send</button>
</div> 
```

[这](http://jsfiddle.net/tJ3Yu/)是我创建一个带有输入的用户的完整示例。很简单，如果需要，可以要求更高的精度。

# java - 使用 AspectJ 的 AOP 在春季不起作用？

> ID：15662013
> 
> 赞同：4
> 
> 时间：2013-03-27T14:56:52.860
> 
> 标签：java, spring, aspectj, spring-aop, spring-annotations

我的 Aspect 课程将是，

```
@Configuration
@EnableAspectJAutoProxy
@Component
@Aspect
public class AspectClass {

    @Before("execution(* com.pointel.aop.test1.AopTest.beforeAspect())")
    public void logBefore(JoinPoint joinPoint) {

        System.out.println("Before running the beforeAspect() in the AopTest.java class!");
        System.out.println("Hijacked Method name : " + joinPoint.getSignature().getName());
        System.out.println("************************");
    }

} 
```

我的其他java类

```
public class AopTest {

    public void beforeAspect() {
        System.out.println("This is beforeAspect() !");
    }
} 
```

我的主要课程是

```
public class MainMethod {

    public static void main(String[] args) {    
        ApplicationContext context = new FileSystemXmlApplicationContext("ApplicationContext/applicationContext.xml");
        AopTest test = (AopTest)context.getBean("bean1");
        test.beforeAspect();
    }
} 
```

我的 applicationContext.xml 是，

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

    <bean id="bean1" class="com.pointel.aop.test1.AopTest" />

</beans> 
```

在运行 Main 方法时， in this `@Before("execution(* com.pointel.aop.test1.AopTest.beforeAspect())")`in`AspectClass`不会在`beforeAspect()`in之前执行。`AopTest`

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:10:13.203

首先，如果您要使用基于注释的配置，请使用`AnnotationConfigApplicationContext`而不是`FileSystemXmlApplicationContext`. 并摆脱该`applicationContext.xml`文件，只需`@Bean`在您的配置类中添加一个方法。像这样的东西：

```
@Configuration
@EnableAspectJAutoProxy
@ComponentScan(basePackages = "your.aspect.package")
public class AspectConfig {
    @Bean 
    public AopTest aopTest() {
        return new AopTest();
    }
} 
```

在你的主要

```
public class MainMethod {

    public static void main(String[] args) {    
        AnnotationConfigApplicationContextcontext = new AnnotationConfigApplicationContext(AspectConfig.class);
        // don't forget to refresh
        context.refresh();
        AopTest test = (AopTest)context.getBean("aopTest");
        test.beforeAspect();
    }
} 
```

`AspectClass`你应该有`@Component`, ，并且`@Aspect`你的方法应该有建议或切入点注释，如`@Before`. 它必须是`@Component`，以便 Spring 知道扫描它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:58:59.677

这里需要在xml中添加一些代码来使用注解- 1.for @component注解。

```
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd" 
```

2.之后使用组件扫描获取所有使用@component注解的注解bean类，并使用aop autoproxy-

```
<context:annotation-config/>
<context:component-scan base-package="mypackage"></context:component-scan>
 <aop:aspectj-autoproxy>
</aop:aspectj-autoproxy> 
```

例如，请访问[www.technicaltoday.com/p/spring.html](http://www.technicaltoday.com/p/spring.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:45:21.093

您在方面类中缺少切点定义。

例如;

```
@Pointcut("execution(* *.advice(..))")  
public void logBefore(){}  

@Before("logBefore()")  
public void beforeAdvicing(){  
System.out.println("Listen Up!!!!");  
} 
```

您首先必须定义将方面编织到的点。您可以使用切点来执行此操作。这是您在 @Before 注释中给出的切点名称。查看我的博客文章以获取更多信息@ [http://dinukaroshan.blogspot.com/2010/06/aop-with-spring.html](http://dinukaroshan.blogspot.com/2010/06/aop-with-spring.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T13:44:49.183

我`AspectClass`在 bean 配置中看不到你的。您还应该将其声明为 Bean。

# javascript - 在服务器端存储网格位置

> ID：15662015
> 
> 赞同：0
> 
> 时间：2013-03-27T14:56:54.690
> 
> 标签：javascript, extjs

我正在使用会话管理器将网格列位置、宽度、.. 存储在 cookie 中：

```
Ext.state.Manager.setProvider(new Ext.state.CookieProvider({
  expires: new Date(new Date().getTime()+(1000*60*60*24*7))
})); 
```

在网格上，我将属性设置为：

```
stateful: true 
```

它工作正常。但问题是，这些数据存储在客户端 cookie 中。使用不同浏览器打开同一页面时，位置不会保持不变。

我如何将这些数据存储在服务器端，然后在需要时将其发送给客户端？有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:35:10.740

这是可以做到的，我们目前正在我们的网络服务器上进行。它的要点是我们将 json 字符串状态存储在我们服务器的持久层中的 cookie 上。在服务器上构建页面时，它会将关联用户的 json 数据嵌入页面中。然后，客户端代码使用我们定义的提供程序，该提供程序继承自`Ext.state.Provider`该提供程序以及许多其他内容，它读取嵌入的 json 数据以设置状态。

# php - PHP：尽可能将字符串转换为浮点数

> ID：15662021
> 
> 赞同：0
> 
> 时间：2013-03-27T14:57:10.200
> 
> 标签：php, type-conversion

在 PHP 中，我需要编写一个函数，该函数接受一个字符串并尽可能将其转换为浮点数，否则只返回输入字符串。

我认为这个功能会起作用。显然比较是错误的，但我不明白为什么。

```
function toNumber ($input) {
    $num = floatval($input); // Returns O for a string
    if ($num == $input) { // Not the right comparison?
        return $num;
    } else {
        return $input;
    }
}

echo(gettype(toNumber("1"))); // double
echo(gettype(toNumber("3.14159"))); // double
echo(gettype(toNumber("Coco"))); // double (expected: string) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:59:51.630

```
function toNumber($input) {
    return is_numeric($input) ? (float)$input : $input;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:05:14.097

try `if($num){return $num;}else{return $input}`，这会很好，它只会跳转到 else 语句部分，当 $num = 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:59:58.193

如果我理解正确的话，最快的事情就是检查 $num == 0 而不是 $num == $input。

# orm - 如何从字符串中返回 EntityBase2？

> ID：15662022
> 
> 赞同：0
> 
> 时间：2013-03-27T14:57:10.683
> 
> 标签：orm, vb.net-2010, llblgenpro

我有一个用我的实体名称填充的 ListBox，即 A1AllocationHelp1Entity

在选择时，我需要传递该字符串名称以获取 EntityBase2 类型。

我可以使用反射得到它：

```
Public Function CreateEntity(ByVal entityName As String) As EntityBase2
    Dim myAssembly = Assembly.LoadFrom(DALFileName)
    Dim assemblyName = Split(dynamicAssembly.FullName, ",")(0)
    Dim myEntityName = assemblyName & ".EntityClasses." & entityName
    Dim handle = Activator.CreateInstance(assemblyName, myEntityName)
    Dim entity = CType(handle.Unwrap(), EntityBase2)
    Return entity
End Function 
```

但是如果我有 llblgen 生成的类型，我希望能够以某种方式实例化它而不诉诸反射。

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:54:03.533

所有的反射代码都可以用一行替换

```
Return GeneralEntityFactory.Create( _
    CType(System.Enum.Parse(GetType(EntityType), entityName), EntityType)) 
```

这返回相同的类型，是我正在寻找的答案。

# c# - 控制递归方法深度 - 获取所有子文件夹

> ID：15662025
> 
> 赞同：3
> 
> 时间：2013-03-27T14:57:24.187
> 
> 标签：c#, recursion, .net-3.5

我正在浏览一些共享以获取信息/权限..等我正在使用递归遍历所有子共享。它工作正常但是，用户应该能够将子共享级别限制为特定数量，这是应用程序中的一个参数？

```
private static INodeCollection NodesLookUp(string path)
    {
        var shareCollectionNode = new ShareCollection(path);
        // Do somethings

       foreach (var directory in Directory.GetDirectories(shareCollectionNode.FullPath))
        {
            shareCollectionNode.AddNode(NodesLookUp(directory));

        }
        return shareCollectionNode;
    } 
```

此代码将一直到最低级别，我该如何在特定级别停止它？例如，只获得 2 个级别的所有份额？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:59:24.810

在每个级别的递归调用之后传递`level`变量并增加它怎么样？这将允许您控制当前的递归级别或剩余的级别。不要忘记检查空值。

```
private const int maxDepth = 2;

private static INodeCollection NodesLookUp(string path, int level)
{
   if(level >= maxDepth)
        return null;

   var shareCollectionNode = new ShareCollection(path);
   // Do somethings

   foreach (var directory in Directory.GetDirectories(shareCollectionNode.FullPath))
   {
       var nodes = NodesLookUp(directory, level + 1);

       if(nodes != null)
            shareCollectionNode.AddNode(nodes);

   }
   return shareCollectionNode;
} 
```

初始级别可以是零索引，例如

```
NodesLookUp("some path", 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:16:18.247

与其使用全局变量来控制级别，不如在`maxLevel`每个递归调用中传递和递减。

```
private static INodeCollection NodesLookUp(string path, int maxLevel)
{
    var shareCollectionNode = new ShareCollection(path);
    if (maxLevel > 0)
    {
        foreach (var directory in Directory.GetDirectories(shareCollectionNode.FullPath))
        {
            shareCollectionNode.AddNode(NodesLookup(directory, maxLevel-1));
        }
    }
    return shareCollectionNode;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:14:15.377

那这个呢：

```
 private static INodeCollection NodesLookUp(string path, Int32 currentLevel, Int32 maxLevel)
    {
        if (currentLevel > maxLevel)
        {
            return null;
        }

        var shareCollectionNode = new ShareCollection(path);
        // Do somethings

        foreach (var directory in Directory.GetDirectories(shareCollectionNode.FullPath))
        {
            INodeCollection foundCollection = NodesLookUp(directory, currentLevel + 1, maxLevel)

            if(foundCollection != null)
            {                
                shareCollectionNode.AddNode();
            }
        }

        return shareCollectionNode;
    } 
```

在这种情况下，您不必担心每次方法运行时都会修改私有字段的状态。而且，就您的其余代码是线程安全的而言，它将是线程安全的。

# javascript - 带有回调的javascript发布订阅

> ID：15662030
> 
> 赞同：0
> 
> 时间：2013-03-27T14:57:34.173
> 
> 标签：javascript, jquery

场景：- 需要将带有已检查和未检查项目计数的 json 发送到一个通用函数，该函数又进行一些基本验证或显示错误。不同的 css/js 团队处理不同的函数，它们调用此函数并根据公共函数结果（真/假）为 json 提供检查/取消检查状态的每个团队/模块执行相关操作。因此，通用函数（比如 getcount）和调用该函数的每个独立团队都依赖于通用函数独立操作 dom/css 的结果，而通用函数也独立操作 dom。

而不是调用函数的传统方式（比如 getCount({"chk" : 2 , "unchk" : 4})），我正在寻找 pusblish/subcribe 方法，它比 Jquery 更干净，并且易于传达给所有人作为唯一的主题name & contract/json 需要描述（也少 if/else 条款）。由于通用功能是订阅者，并且当每个独立功能发布生成的 chk/unchek json 时，通用功能可以使用发布/订阅方法轻松进行操作，但独立方法也必须执行反操作，这只有在订阅功能可以的情况下才有可能发送结果。我知道javascript是异步的，我也知道通用方法可以发布（比如“resultOfGetCount”），每个独立的功能/模块都可以收听&

寻找这种情况的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:00:22.823

[这是这篇博客文章](http://benmccormick.org/blog/2013/02/13/simple-publish-subscribe-with-jquery/)中的一个简单的 jQuery 发布订阅模型

```
var exampleHandle = function(){
    //do stuff when topic is published
    ...
}

function subscribe(topic,handle){
    $("#subscription").bind(topic,handle);
}

function publish(topic,params){
    $("#subscription").trigger(topic,params)
}

function unsubscribe(topic,handle){
    $("#subscription").unbind(topic,handle);
} 
```

您可以在其中使用简单的字符串作为主题来订阅或取消订阅该主题，并将句柄作为回调函数附加。如有必要，该句柄也可用于稍后取消订阅该主题。

> 该方法基于 jQuery 的 trigger 和 bind 函数。这些允许您侦听元素上的自定义事件，并手动触发元素上的事件。这为简单订阅模型提供了基本的骨干。
> 
> 如果应用程序元素想要订阅主题，它们会将处理程序绑定到“订阅元素”。这可以是页面上的指定元素，也可以只是窗口元素。当然，您也可以为不同的订阅使用不同的元素。然后，当某些内容发布到该主题时，处理函数将执行。
> 
> 对于发布，函数可以将主题和参数传递给发布函数。这会调用 jQuery 的触发器来触发事件主题，并传递参数。这些参数被传递给句柄函数。
> 
> 如果一个元素想要取消它的订阅，他们可以将主题和句柄函数传递给 unsubscribe 方法。请注意，句柄必须与最初订阅时使用的函数对象相同，而不是副本或类似函数。你也可以使用 jQuery 的 unbind 来取消对某个主题的所有订阅，只指定主题而不使用句柄函数。

# python - Django最大聚合比较问题

> ID：15662032
> 
> 赞同：0
> 
> 时间：2013-03-27T14:57:39.217
> 
> 标签：python, django

我对将 Decimal 值与 Django Max 聚合查询集中的值进行比较感到困惑。当我期望它为真时，比较返回假，我不知道为什么。

我得到如下查询集：

```
prev_hourly_rate = PayRate.objects.filter(employee__exact=emp_pk).exclude(pk=pay_rate_id).aggregate(Max('hourlyRate')) 
```

那返回

```
 {'hourlyRate__max': Decimal('25.1234')} 
```

我想将该 Decimal 值与另一个 Decimal 值 25.1234（由变量 hr 表示）进行比较，但返回的是 False。我正在做这样的比较：

```
if prev_hourly_rate['hourlyRate__max'] == hr: 
```

或者

```
if prev_hourly_rate['hourlyRate__max'] == Decimal(hr): 
```

甚至

```
if prev_hourly_rate['hourlyRate__max'] == Decimal.from_float(hr): 
```

它总是返回 False。我显然错过了一些非常简单的东西。请指出我疲惫的大脑是什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:41:56.743

您可能想查看[此 SO 讨论](https://stackoverflow.com/questions/316238/python-float-to-decimal-conversion)以获取更多信息，但简短的版本是`Decimal(hr) == Decimal('25.123400000000000176214598468504846096038818359375')`

为了创建具有您想要的确切值的 Decimal，您必须使用浮点数的字符串表示形式。`prev_hourly_rate['hourlyRate__max'] == Decimal(repr(hr))`应该得到你想要的。

# javascript - 打字稿 + Jquery Ajax + 这个

> ID：15662038
> 
> 赞同：11
> 
> 时间：2013-03-27T14:57:57.647
> 
> 标签：javascript, jquery, ajax, this, typescript

我正在将一些 javascript 代码移植到打字稿上，但遇到了一个问题。

我有一个 ajax 调用，它将一个对象作为上下文传递，该对象包含一些回调和一些其他信息，这些信息由成功或错误回调读出，这些信息指示成功调用应重定向到的位置：

```
function SomeAjaxService
{
    var self = this;

    self.CheckErrorType = function(...) {
        // Do something
    };

    var SuccessProxyCallback = function(results) {
        // Do some stuff with results, like send off some events
        this.successCallback(results);
    };

    var FailureProxyCallback = function(...) {
        // Do some stuff with errors, and fire some events
        var someErrorType = self.CheckErrorType(...);
        this.failureCallback(someErrorType);        
    };

    self.SendRequest = function(requestArgs) {
        var ajaxSettings = {
            context: requestArgs,
            // Assign a load of stuff
        };

        $.ajax(ajaxSettings);
    };
} 
```

现在您可以看到失败代理调用本地方法以及使用“this”上下文对象。那么如何使用 typescript 处理这种情况呢？

您可以`self = this`在构造函数中设置并像以前一样继续吗？

== 编辑 ==

正如这里所要求的那样，上面的类表示显示了由于缺少 self 变量而需要两件事的问题。

```
class SomeAjaxService
{
    public CheckErrorType(someArg1: any, someArg2: any) {
        // Do some stuff with data
    };

    private SuccessProxyCallback(results: any) {
        // Do some stuff with results, like send off some events
        this.successCallback(results); 

        // Does the above *THIS* usage point to the context of the 
        // Ajax call or the actual instantiated class
    };

    private FailureProxyCallback(...) {
        // Do some stuff with errors, and fire some events
        var someErrorType = this.CheckErrorType(...);

        // The above *THIS* call cannot be correct if the context has overwritten
        // the scope of this, however I dont know if this is true, do I even need
        // this.CheckErrorType to invoke a local method?

        this.failureCallback(someErrorType);        

        // As mentioned above same issue here but the *THIS* should hopefully
        // point to the context object on the ajax object not the local instance.
    };

    public SendRequest(requestArgs: any) {
        var ajaxSettings : JqueryAjaxSettings = {
            context: requestArgs,
            // Assign a load of stuff
        };

        $.ajax(ajaxSettings);
    };
} 
```

就像我在上面所说的那样，主要问题是在一个方法中我需要调用其中一个实例方法以及从 ajax 调用调用上下文对象上的方法。使用原始 javascript，我将拥有`self = this`然后我可以绕过`this`被覆盖，这是将 ajax 异步状态对象保持在范围内所必需的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:22:22.373

> 您可以在构造函数中设置 self = this 并像以前一样继续吗？

抽象地说，在构造函数中执行此操作通常不会解决任何问题（除非您稍后在该方法中捕获它——见下文）。TypeScript 类将类实例数据存储在对象本身上，而不是捕获本地数据。因为`self`将存储在`this`对象上，所以您最终不会拥有以前没有的任何东西。

这是一种方法：

```
class SomeAjaxService
{
    private FailureProxyCallback(context, arg) {
        // now 'this' is the class instance and 'context' is requestArgs 
    }

    public SendRequest(requestArgs) {
        var self = this; // Note: captured local used in closure below
        var ajaxSettings = {
            context: requestArgs,
            // Do not use an arrow function here, even though it's tempting!
            error: function(arg) { self.FailureProxyCallback(this, arg) }
        };

        $.ajax(ajaxSettings);
    };
} 
```

# algorithm - 将不规则圆柱体细分为等体积段

> ID：15662042
> 
> 赞同：1
> 
> 时间：2013-03-27T14:58:04.037
> 
> 标签：algorithm, geometry, cgal, cylindrical

我想知道是否有人对如何解决这个问题有任何想法。

我有一个 3D 中的“不规则”（意味着直径沿长度方向不是恒定的）圆柱形物体。我想将其细分为体积相等的较小部分（长度方向）。这种事情有什么算法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:43:33.383

这只是告诉您如何集成基于三角网格的圆柱体集成。

设 Z 为圆柱体中所有顶点的纵向坐标。对 Z 进行排序并删除重复项。

现在，在每个 z[i] 和 z[i+1] 之间，圆柱体的交叉面积要么均匀地增加，要么均匀地减小。因此，这两个横截面之间的体积为 = (A[i]+A[i+1])*(z[i+1] - z[i])) 其中 A[i] 是横截面在长度上的面积z[i]。

因此，总体积 = \sum (A[i]+A[i+1])*(z[i+1] - z[i])) for i=1..(n-1)

令 V[i] 为 z[i] 和 z[i+1] 之间的体积。设 2W 为圆柱体的总体积。

初始化 U=W，如果 U>V[i]，则对每个 i 减去 V[i]。否则：z* = Z[i]+ (V[i]-U)*(z[i+1]-z[i])/V[i] 是中点。

# database - 您如何从多个表中选择多个列以及总成本？

> ID：15662043
> 
> 赞同：0
> 
> 时间：2013-03-27T14:58:05.757
> 
> 标签：database, oracle, select

我有四张表，但为此我只需要三张表，我想显示customerid、orderid、productid、数量和不在任何表中但需要计算的总成本？到目前为止，我已经设法让它显示一个带有订单 ID 的订单的总成本，但我希望它显示上面提到的所有列

**订购**：

```
order_id(primary key)
customer_id( foreign key) 
```

**订单线**：

```
orderid(fk) + productid(fk) (pk)
quantity 
```

**产品**：

```
productid(pk)
price 
```

我所做的是

```
select orderid, sum(rowcost) as totalcost
  from (select o.quantity, o.productid, o.orderid, os.customerid, p.price, 
              (o.quantity * p.price) as rowcost
         from orderline o 
              inner join order os 
                      on o.orderid = os.orderid 
              inner join product p 
                      on p.productid = o.productid 
         where productid = 123) 
 group by orderid; 
```

现在我希望它显示所有 orderid 以及 productid、customerid、totalcost、orderid 和数量。该列表应遵循 customerid 顺序。

我该怎么做？

当我在选择中添加更多变量时，它会给我错误。我尝试了很多方法，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:03:06.183

你的意思是你想要这样的东西：

```
select o.quantity, o.productid, o.orderid, os.customerid, p.price, 
       (o.quantity * p.price) as rowcost,
       sum(o.quantity * p.price) over (partition by os.customerid) as totalcost
  from orderline o 
       inner join order os 
               on o.orderid = os.orderid 
       inner join product p 
               on p.productid = o.productid 
 where p.productid = 123 
```

或者这个，如果您想在之后对产品进行过滤，以保持总和正确

```
select *
  from (select o.quantity, o.productid, o.orderid, os.customerid, p.price, 
               (o.quantity * p.price) as rowcost,
               sum(o.quantity * p.price) over (partition by os.customerid) as totalcost
          from orderline o 
               inner join order os 
                       on o.orderid = os.orderid 
               inner join product p 
                       on p.productid = o.productid)
 where productid = 123--or just remove this where clause 
```

小提琴：[http ://sqlfiddle.com/#!4/3103d/1](http://sqlfiddle.com/#!4/3103d/1)

# iphone - 将后退按钮的背景更改为与导航栏相同

> ID：15662046
> 
> 赞同：0
> 
> 时间：2013-03-27T14:58:16.787
> 
> 标签：iphone, ios

我正在尝试为导航栏和上面的按钮实现自定义图像。我设法使用它为我的导航背景设置了正确的设置

![这就是下面的代码发生的事情](../Images/36edd9733a1ea12ccac54f41bdf48071.png)

```
 - (void)customAppearance
{  
    UIImage* NavBG = [UIImage imageNamed:@"header.png"];
    [[UINavigationBar appearance] setBackgroundImage:NavBG forBarMetrics:UIBarMetricsDefault];
} 
```

但是当我尝试为后退按钮或其他按钮做类似的事情时，它们只是混合在一起（我可以看到后退按钮的文字，但没有后退按钮的轮廓）

这是我的后退按钮

```
UIImage *backButtonBG = [[UIImage imageNamed:@"header.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 6)];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonBG forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

我想让它看起来像这样：![目标是什么](../Images/e07abd02b5ff9fb498961519172463e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:33:53.613

我认为最简单的方法是对导航栏进行着色，因为默认情况下那些栏按钮项始终使用导航栏的颜色。

```
[[UINavigationBar appearance] setTintColor:[UIColor redColor]]; 
```

或者您可以使用 rgb 值使用更精确的颜色

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithRed:val green:val blue:val alpha:1]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:05:22.460

我使用自定义图像创建了我的有色按钮（请参阅最后的代码）然后只需将 设置`leftBarButtonItem`为这个按钮。

```
+ (UIBarButtonItem *)createBarButtonItemWithImage:(UIImage *)normalImage highlightedImage:(UIImage *)highlightedImage
{
    UIBarButtonItem *barButtonItemToReturn;
    if (normalImage == nil && highlightedImage == nil)
    {
        return barButtonItemToReturn;
    }
    else if (normalImage != nil)
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setImage:normalImage forState:UIControlStateNormal];

        if (highlightedImage != nil)
        {
            [button setImage:highlightedImage forState:UIControlStateHighlighted];
            [button setFrame:CGRectMake(0, 0, normalImage.size.width, normalImage.size.height)];
        }

        barButtonItemToReturn = [[UIBarButtonItem alloc] initWithCustomView:button];
    }
    return barButtonItemToReturn;
} 
```

当你想添加一个目标/动作时，你必须通过以下方式添加它：

```
 [((UIButton*)barButtonItem.customView) addTarget:self selector:@selector(doSomething:) forControlEvents:UIControlEventTouchUpInside]; 
```

您还可以使用可调整大小的图像等

# neo4j - Neo4J HelloWorld 不工作

> ID：15662059
> 
> 赞同：1
> 
> 时间：2013-03-27T14:58:56.877
> 
> 标签：neo4j

我是 Neo4J 的新手，并遵循 neo4j 网站 ( [http://docs.neo4j.org/chunked/milestone/tutorials-java-embedded-hello-world.html](http://docs.neo4j.org/chunked/milestone/tutorials-java-embedded-hello-world.html) ) 上的 HelloWorld 教程。

我的目的是创建 2 个节点和它们之间的关系，最后在可通过以下方式访问的仪表板上观察这一点

```
[http://localhost:7474/webadmin/#] 
```

但问题是当我运行我的代码时出现错误，我不知道如何解决它。

任何帮助将非常感激

非常感谢你

这是我的代码和错误

**代码**

```
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Relationship;
import org.neo4j.graphdb.RelationshipType;
import org.neo4j.graphdb.Transaction;
import org.neo4j.graphdb.factory.GraphDatabaseFactory;

public class HelloNeo4J {

private static enum RelTypes implements RelationshipType
{
    KNOWS
}

public static String DB_PATH= " /home/anas/graph/data/graph.db/" ; 

public static void main ( String[] args){

    GraphDatabaseService graphDb= new GraphDatabaseFactory().newEmbeddedDatabase( DB_PATH );
    Node firstNode, secondNode;
    Relationship relationship;

    Transaction tx = graphDb.beginTx();
    try
    {
        firstNode = graphDb.createNode();
        firstNode.setProperty( "message", "Hello, " );
        secondNode = graphDb.createNode();
        secondNode.setProperty( "message", "World!" );

        relationship = firstNode.createRelationshipTo( secondNode, RelTypes.KNOWS );
        relationship.setProperty( "message", "brave Neo4j " );
        tx.success();
    }
    finally
    {
        tx.finish();
    }

}
} 
```

**错误**

```
Exception in thread "main" org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition org.neo4j.kernel.AbstractGraphDatabase$DefaultKernelExtensionLoader@691f36 from NONE to STOPPED
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.init(LifeSupport.java:388)
at org.neo4j.kernel.lifecycle.LifeSupport.init(LifeSupport.java:82)
at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:116)
at org.neo4j.kernel.AbstractGraphDatabase.run(AbstractGraphDatabase.java:224)
at org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:79)
at org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:70)
at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:195)
at org.neo4j.graphdb.factory.GraphDatabaseFactory.newEmbeddedDatabase(GraphDatabaseFactory.java:56)
at HelloNeo4J.main(HelloNeo4J.java:20)
Caused by: java.lang.VerifyError: class org.neo4j.kernel.InternalAbstractGraphDatabase overrides final method getStoreDir.()Ljava/lang/String;
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.neo4j.index.lucene.LuceneIndexProvider.load(LuceneIndexProvider.java:65)
at org.neo4j.kernel.AbstractGraphDatabase$DefaultKernelExtensionLoader.loadIndexImplementations(AbstractGraphDatabase.java:1180)
at org.neo4j.kernel.AbstractGraphDatabase$DefaultKernelExtensionLoader.init(AbstractGraphDatabase.java:1152)
at  org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.init(LifeSupport.java:382)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:22:25.363

有两个问题，

首先：信息：在日志中检测到非干净关闭...恢复已开始

您看到的信息是因为您没有使用 db.shutdown() 彻底关闭数据库，因此它必须恢复未应用的事务日志。

第二：

如果您想在 Neo4j-Server 中查看结果，您必须使用与中相同的 db-directory，`conf/neo4j-server.properties`并且您**必须**在向其写入数据时停止服务器。

Oherwise 您也可以在嵌入式数据库之上运行服务器，请参阅：[http ://docs.neo4j.org/chunked/milestone/server-embedded.html](http://docs.neo4j.org/chunked/milestone/server-embedded.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T03:47:45.590

请实现一个图形数据库（一种 NoSQL）。该图数据库应由实体的节点（具有属性）和关系的边（具有单个或多个属性，可以是定向的或双向的）组成，并支持节点索引和查询。查询语言具有以下关键字：START、MATCH、WHERE、RETURN、ORDER BY、AGGREGATE、SKIP 和 LIMIT。

# android - 如何在 JAVA 文件中的其他 optjek 下设置 TextView，例如 Button？

> ID：15662061
> 
> 赞同：1
> 
> 时间：2013-03-27T14:58:58.197
> 
> 标签：android, textview, android-ui

是否可以将 Java 文件中的 TextView 设置为定义的位置？这是我的 xml 文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/layoutebusbaum"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".EbusBaum" >

<EditText
    android:id="@+id/EditText01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:hint="Anzahl an Funktionsfeldern"
    android:inputType="number" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/EditText03"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/EditText01"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:hint="Anzahl an Parameterwerten"
    android:inputType="number" />

<EditText
    android:id="@+id/EditText02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/EditText03"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:hint="Anzahl an Funktionparameter"
    android:inputType="number" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/EditText02"
    android:layout_centerHorizontal="true"
    android:onClick="generate"
    android:text="Generieren" />

</RelativeLayout> 
```

现在我想在按钮的onClick事件上设置一个TextView，在按钮下！这是我的java代码：

```
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class Ebusbaum extends Activity {

Integer run1 = 0;
Integer run2 = 0;
Integer run3 = 0;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_ebusbaum);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.ebusbaum, menu);
    return true;
}

public void generate(View Conect){

    EditText anz1 = (EditText) findViewById(R.id.EditText01);
    String anz11 = anz1.getText().toString();
    Integer Anzahl1 = Integer.parseInt(anz11);

    EditText anz2 = (EditText) findViewById(R.id.EditText02);
    String anz22 = anz2.getText().toString();
    Integer Anzahl2 = Integer.parseInt(anz22);

    EditText anz3 = (EditText) findViewById(R.id.EditText03);
    String anz33 = anz3.getText().toString();
    Integer Anzahl3 = Integer.parseInt(anz33);

    //Here i like to creat the Textview, but i dont know how!
}   
} 
```

有人可以帮助我吗？我在互联网上搜索并找到了一些代码示例，但我的应用程序不适用于这些示例。我使用安卓 API 11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:06:25.883

在按钮下方插入您的文本视图并将其隐藏

```
<Button
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/EditText02"
android:layout_centerHorizontal="true"
android:onClick="generate"
android:text="Generieren" />

<TextView
android:id="@+id/txtYourTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:layout_below="@+id/button1" 
android:visibility="invisible"
/> 
```

OnClick 事件显示 textView。

```
TextView btextView = (TextView) findViewById(R.id.txtYourTextView);
btextView.setVisibility(View.VISIBLE);
btextView.setText("yourText"); 
```

它应该工作。

# php - Kohana 3.3 模型::factory() 类未找到

> ID：15662070
> 
> 赞同：0
> 
> 时间：2013-03-27T14:59:25.777
> 
> 标签：php, kohana

所以我知道 PSR-0 标准在 Kohana 3.3 中的实现。但是，一定有一些我不理解的东西，因为我收到以下代码的类未找到错误：

```
$model = Model::factory('MyModel'); 
```

模型定义位于：

```
classes/Model/MyModel.php 
```

怎么没有准确找到我的班级？

实际代码：

型号位于`classes/Model/VoiceTalent.php`

```
<?php defined('SYSPATH') or die('No direct script access.');

    class VoiceTalent
    {
         //methods and fields
    } 
```

控制器代码：

```
$talent = Model::factory('VoiceTalent'); 
```

确切的错误信息：

```
ErrorException [ Fatal Error ]: Class 'Model_VoiceTalent' not found
SYSPATH\classes\Kohana\Model.php [ 26 ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:46:13.503

你的班级名字很糟糕。

你有：

```
class VoiceTalent 
```

应该：

```
class Model_VoiceTalent 
```

因为您必须在类名中包含它包含的所有文件夹（由 分隔`_`）。在这种情况下，您只需要添加`Model_`前缀。[您可以在 Kohana 的文档](http://kohanaframework.org/3.3/guide/kohana/conventions#class-names-and-file-location)中阅读有关类命名约定的更多信息。

# javascript - Javascript中的嵌套函数

> ID：15662073
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:59:27.740
> 
> 标签：javascript, function

在下面的 JS 中 - 我试图嵌套一个函数，这样我就不必为表单中的每个字段重复“添加字段”。

但是 - 警报“特罗格多！” 仅在之前放置时显示`addfield('rcname', 'RC Name');`

结果，增量（i 和 n）当然都没有更新。

语法有问题吗？

```
function addcameragroup() {
    var newcamgroup = document.createElement("div");
    newcamgroup.setAttribute("id", "camera-" + i);
    var camform = document.getElementById('formtable');
    camform.appendChild(newcamgroup);

    function addfield(fieldname, fieldtxt) {
        var newformrow = document.createElement("div");
        newcamgroup.appendChild(newformrow);
        newformrow.setAttribute("class", "formrow");
        var fieldlabel = document.createElement("label");
        newformrow.appendChild(fieldlabel);
        fieldlabel.setAttribute("for", fieldname);
        fieldlabel.innerHTML(fieldtxt);
    }

    addfield('rcname', 'RC Name');
    alert('Trogdor!');
    i++;
    n++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:11:24.037

```
fieldlabel.innerHTML(fieldtxt); 
```

应该

```
fieldlabel.innerHTML = fieldtxt; 
```

innerHTML 不是一个函数，它是一个属性。试图调用它会导致错误并使您的程序停止执行。您应该考虑了解您最喜欢的浏览器的调试和开发工具。

innerHTML 的 MDN 文档：[MDN](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

# opencart - Opencart 为密码生成错误的哈希值

> ID：15662078
> 
> 赞同：1
> 
> 时间：2013-03-27T14:59:41.933
> 
> 标签：opencart

我很难在 Opencart 中以管理员身份登录。

不知何故，我之前创建的管理员/管理员工作正常，但是当我在管理面板中创建新用户时，我无法登录。它说密码或电子邮件不正确。

我检查了数据库。一切都被添加在那里。

然后我尝试直接在数据库中将密码的哈希字符串转换为另一个。我在另一个网站上生成了它。之后我就可以登录了。

似乎是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T16:39:01.037

您是否更改了数据库架构或控制器/模型文件中的任何内容？

散列算法通常不会无缘无故地改变。

您是否安装了任何相关的新插件？

如果还没有，我建议检查：

1.  创建一个新用户，尝试登录并转到 Admin->System->Error Logs。寻找线索。
2.  如果这是在托管解决方案上完成的，请确保您对文件具有正确的权限。
3.  确保您的 Encription 密钥正确，转到 Admin->System->Settings->Server 并查看是否正常。它应该正好是 32 个字符长。
4.  如果您精通 MVC 和 php，请转到匹配的控制器和模型文件并执行 var_dump() 以查看它们实际获得的信息。

如果所有这些都没有帮助，请再次在这里发布您的发现，我会尽力提供帮助。

# javascript - 将内联 JavaScript 迁移到外部文件

> ID：15662080
> 
> 赞同：1
> 
> 时间：2013-03-27T14:59:51.477
> 
> 标签：javascript, html

我在几个不同的页面上有一些内联 JavaScript，如下所示：

```
$(function() {
   var myVar1 = ...;
   var myVar2 = ...;
   var myVar3 = ...;

   function myFunc1() {
      ...
   }

   function myFunc2() {
      ...
   }

   if (blah blah) {
      myFunc1();
   }
   else {
      myFunc2();
   }
}); 
```

我想将它们移动到外部脚本中，这是部署客户端 JavaScript 的推荐方式。

但是，对于每个单独的页面，我对 variable 有不同的值`myVar1`，所以看起来我必须创建多个非常相似的 JS 文件，因为这个微小的差异。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:02:27.410

您可以将变量存储在相关的现有 HTML 元素属性中，并在代码中检索它：

```
<div class="myclass" data-var1="Page 1"></div>

$(function() {
   var myVar1 = $(".myclass").data("var1");
   var myVar2 = ...;
   var myVar3 = ...;

   function myFunc1() {
      ...
   }

   function myFunc2() {
      ...
   }

   if (blah blah) {
      myFunc1();
   }
   else {
      myFunc2();
   }
}); 
```

* * *

另一种解决方案是`myVar1`从您的函数中取出并将其声明为每个页面中的全局变量。

例如：

```
<script type="text/javascript">
  var myVar1 = 'Page1';
</script>
<script type="text/javascript" src="myscript.js"></script> 
```

为澄清起见，“myscript.js”将是：

```
$(function() {
   var myVar2 = ...;
   var myVar3 = ...;

   function myFunc1() {
      ...
   }

   function myFunc2() {
      ...
   }

   if (blah blah) {
      myFunc1();
   }
   else {
      myFunc2();
   }
}); 
```

# javascript - Virtuemart 2.0 模块购物车，jQuery

> ID：15662091
> 
> 赞同：1
> 
> 时间：2013-03-27T15:00:14.737
> 
> 标签：javascript, jquery, joomla2.5, virtuemart

我在使用 Virtuemart 购物车模块正在使用的 jQuery 版本时遇到问题。我需要加载不同版本的 jQuery。该模块使用以下链接：`ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js`. 我需要加载版本 1.9.1。

我不知道在哪里可以更改此链接。有人知道在哪里看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:11:33.933

我已经找到了。我在这个网站上找到了答案：`http://dev.virtuemart.net/projects/virtuemart/wiki/General_JS-Problems_with_templates_and_jQuery/10/diff`

Virtuemart 中有一个选项可以禁用 jQuery 库。只需转到：index.php?option=com_virtuemart&view=config。单击选项卡模板，您将找到禁用 jQuery 的选项。

# asp.net - 使用 System.Web.Optimization 时如何将 type="text/javascript" 添加到脚本标签

> ID：15662096
> 
> 赞同：9
> 
> 时间：2013-03-27T15:00:31.207
> 
> 标签：asp.net, xhtml, bundling-and-minification, system.web.optimization

我有以下

```
bundles.Add(new ScriptBundle("~/bundles/scripts/common").Include(
                  "~/Scripts/jquery.validationEngine.js",
                  "~/Scripts/common.js")); 
```

产生

```
<script src="/bundles/scripts/common?v=9O0Yi3fV_GWpGyJQ_QYURiOYy6SEmxUQtkUVN4GXo2U1"></script> 
```

渲染时

```
 <asp:PlaceHolder ID="PlaceHolderJs" runat="server">                
            <%: Scripts.Render("~/bundles/scripts/common") %>
    </asp:PlaceHolder> 
```

这不是有效的 HTML，因为它缺少 type="text/javascript"。如何让 BundleCollection 在脚本标签中输出这个元素？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T15:41:53.663

一种方法是更改​​渲染脚本的方式：

从：

```
@Scripts.Render("~/bundles/scripts/common") 
```

到：

```
<script src="@BundleTable.Bundles.ResolveBundleUrl("~/bundles/scripts/common")" type="text/javascript"></script> 
```

或者根据您实施捆绑的方式，您可能需要：

```
<script src="@Microsoft.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/scripts/common")" type="text/javascript"></script> 
```

或者对于网络表单：

```
<script src="<%= Microsoft.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/scripts/common")%>" type="text/javascript"></script> 
```

虽然如果有办法使用@Script.Render 我想看看它。

**更新：**响应您的评论，如[this SO answer](https://stackoverflow.com/a/14882255/1810243)中所指定，在预发布版本中`System.Web.Optimization`，有一个名为的选项`RenderFormat`可以让您也这样做......但我认为上面的内容更容易阅读这种特殊情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T11:29:43.070

我相信标记的答案对 是不正确的`type="text/css"`，它对 JavaScript 是正确的（也许问题标题具有误导性？）。对于 CSS 文件，您应该使用

```
@Styles.Render("~/bundles/styles/common") 
```

而**不是** `@Scripts.Render(...)`。原因是缩小已经完成，并且只`@Styles.Render(...)`知道级联样式表语法，`@Scripts.Render(...)`专门用于 JavaScript 缩小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-31T21:19:11.063

我已经这样解决了

```
>      bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
>                             "~/Scripts/node_modules/jquery/dist/jquery.min.js")); 
```

我认为你需要用 ~/bundles/jquery 替换 ~/bundles/scripts/common

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-31T21:26:17.533

我已经这样解决了

```
bundles.Add(
    new ScriptBundle("~/bundles/jquery").Include(
        "~/Scripts/node_modules/jquery/dist/jquery.min.js"
    )
); 
```

我认为您需要替换`~/bundles/scripts/common`为`~/bundles/jquery`

# perl - 如何在 Mongoose::Join 对象上调用 all()

> ID：15662104
> 
> 赞同：2
> 
> 时间：2013-03-27T15:00:42.843
> 
> 标签：perl, moose

我使用猫鼬来建立以下（简化和压缩）数据模型：

```
package Model::Tag;
use Moose; 
use Mongoose::Class; with 'Mongoose::Document';
has 'value'         => (is  => 'rw', isa => 'Str', required => 1);
no Moose;
__PACKAGE__->meta->make_immutable;

package Model::Document;
use Moose; 
use Mongoose::Class; with 'Mongoose::Document';
has 'title'         => (is => 'rw', isa => 'Str', required => 1);
has_many 'tags'     => (is => 'rw', isa => 'Model::Tag');
no Moose;
__PACKAGE__->meta->make_immutable; 
```

我的测试的重要部分是：

```
package main;
use strict; 
use warnings;
use Data::Dumper;

my $expected; my $got;

my $doc = Model::Document->new(title => 'My new document with many tags');
my $tag1 = Model::Tag->new(value => 'foo');
my $tag2 = Model::Tag->new(value => 'bar');

my $x1 = $doc->tags->add($tag1);
my $x2 = $doc->tags->add($tag2);

# print "x1 = $x1 x2 = $x2 \n";

my $document_tags = $doc->tags;
print Dumper $document_tags;

can_ok($document_tags, 'all');

my $tag_array_ref = $document_tags->all(); 
```

现在的问题：

$document_tags 的转储输出是一个 Mongoose::Join 对象：

```
$VAR1 = bless( {
             'delete_buffer' => {},
             'with_class' => 'Model::Tag',
             'buffer' => {
                           '58102804' => bless( {
                                                  'value' => 'foo'
                                                }, 'Model::Tag' ),
                           '58069732' => bless( {
                                                  'value' => 'bar'
                                                }, 'Model::Tag' )
                         }
           }, 'Mongoose::Join' ); 
```

关于[Mongoose::Join](http://search.cpan.org/~rodrigo/Mongoose-0.23/lib/Mongoose/Join.pm)的文档列出了方法：

```
add, remove, find, find_one, first, all, hash_on, hash_array, query, collection, with_collection_name 
```

但打电话

```
$document_tags->all(); 
```

导致错误

```
Can't use an undefined value as a HASH reference at C:/Perl/site/lib/Mongoose.pm line 132. 
```

问题是什么？

提前感谢您的帮助和想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:46:25.330

错误消息来自 Mongoose，而不是直接来自您的测试程序。最新版本的 Mongoose (0.23) 的 Mongoose.pm 的第 132 行是在建立与 MongoDB 的连接的方法中。

在此之后，我注意到您的测试代码不包含对`Mongoose->db()`. 这是指定要连接的数据库所必需的。添加它并尝试您的测试程序后，我还注意到您的文档在尝试从中检索属性（即标签）之前没有先保存到 MongoDB。

这是您的测试代码，其中包含我为解决问题所做的更改。关键位以行开头`# Connect to database`。

```
package Model::Tag;
use Moose;
use Mongoose::Class; with 'Mongoose::Document';
has 'value'         => (is  => 'rw', isa => 'Str', required => 1);
no Moose;
__PACKAGE__->meta->make_immutable;

package Model::Document;
use Moose;
use Mongoose::Class; with 'Mongoose::Document';
has 'title'         => (is => 'rw', isa => 'Str', required => 1);
has_many 'tags'     => (is => 'rw', isa => 'Model::Tag');
no Moose;
__PACKAGE__->meta->make_immutable;

package main;
use strict;
use warnings;
use Data::Dumper;

my $doc = Model::Document->new(title => 'My new document with many tags');
my $tag1 = Model::Tag->new(value => 'foo');
my $tag2 = Model::Tag->new(value => 'bar');

my $x1 = $doc->tags->add($tag1);
my $x2 = $doc->tags->add($tag2);

my $document_tags = $doc->tags;
print Dumper $document_tags;

# Connect to database
Mongoose->db('foo');
# and save our document first
$doc->save();

# now we can retrieve the array (note, not array ref) of tags
my @tag_array = $document_tags->all();
print Dumper(\@tag_array); 
```

# php - 具有大量数据的 PHP/MySQL 测试应用程序

> ID：15662107
> 
> 赞同：0
> 
> 时间：2013-03-27T15:00:50.467
> 
> 标签：php, javascript, mysql, arrays

应用程序：我有一个测试应用程序（类似于测验），它显示随机图像，用户单击单选按钮对 imgs 进行评分。我目前正在使用 Javascript 来获取单选按钮的值。

我想我需要在 JS 中创建一个数组来保存答案，并以某种方式将该数组转换为 PHP 数组，以便在测试结束时所有答案都可以插入到 MySql 数据库中。

更复杂的是数组将有 120 个元素！

在这种情况下，我是否应该费心将数据保存在数组中并在 JS 和 PHP 之间转换它们？

我想出的替代方案是：

1.  使用纯 PHP 处理数据并使数组仅在 PHP 中插入到测试结束时。我不认为每次用户单击答案时对数据库进行查询是好的，因为系统上有很多答案（120）和许多用户。

2.  使用 PHP 和临时表来保存答案。在测试结束时，将临时表中的数据复制到将存储数据的表中。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:25:11.327

您应该使用 JSON。要将答案数组转换为 javascript 中的字符串，只需使用`JSON.stringify`，它将数组转换为字符串。例如：

```
var jsonnedArray=JSON.stringify(arrayOfAnswers) 
```

然后传递`jsonnedArray`给服务器，并使用 PHP 函数进行处理，该函数`json_decode`将使用 javascript 函数`JSON.stringify`生成的字符串转换为它所代表的值。然后将其插入数据库。这是一些代码：

```
<?php
#un-jsonnify the arrray of answers
$arrayOfAnswers=json_decode($_POST['jsonnedArray']);
#loop through the answers and insert each one into the database
foreach($arrayOfAnswers as $currentAnswer){
    #do something here to insert $currentAnswer into the database
} 
```

这是未经测试的，请在评论中告诉我它是否不起作用。

# google-chrome - Chrome 控制台日志看不到 AJAX 发布/获取请求/响应

> ID：15662108
> 
> 赞同：4
> 
> 时间：2013-03-27T15:00:51.730
> 
> 标签：google-chrome, console

我不知道它是否来自 Chrome 最近的更新之一，我不知道它是否是我设法在不知不觉中关闭的选项。但是无论哪种方式，在过去几天的某个时候，我在 Chrome 上的控制台日志都停止显示发布/获取请求，所以我可以看到正在发布的内容和发回的响应的情况，我知道这不完全是像火狐上的萤火虫，但同样相似。

如果 chrome 上的 firebug 对我的影响没有超过它的帮助，我会使用它，但它会干扰我在 chrome 中的需求，因为我无法一直向下滚动。每次刷新页面时，我都会丢失我正在尝试跟踪错误的数据。

所以问题是，有没有办法重新打开它？查看 POST/GET 请求/响应的能力。我知道我可以打开“Log XMLHttpRequests”，但这只会告诉我正在触发哪些函数，而不是实际发布的数据或响应。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-06-03T17:12:17.510

打开控制台，然后选中“保留日志”。

如果您想查看 AJAX 发布/获取请求/响应，请执行以下操作：

1.  打开控制台
2.  右键单击控制台日志流
3.  选中或选择“记录 XMLHttpRequests”

![这是我在说什么的图片](../Images/f762cae4628ad59f397c241089e46d6c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T18:34:43.517

右键单击控制台区域，选择“导航时保留日志”，然后刷新页面（或执行任何获取/发布操作），GET/POST 日志将可见。

或者，“网络”选项卡也可用于检查 GET/POST 事件。

确保你不会错过任何这样的事情 - [Chrome：console.log，console.debug 不工作](https://stackoverflow.com/questions/18760213/chrome-console-log-console-debug-are-not-working)

# c++ - 如何为向量内的向量创建指针？

> ID：15662111
> 
> 赞同：0
> 
> 时间：2013-03-27T15:01:08.013
> 
> 标签：c++

我目前有这个：

```
vector<int> *ptrvec1;
vector<vector<int> > *ptrvec2;
vector<vector<int> > vec;
ptrvec1 = ?????
ptrvec2 = &vec; 
```

我想将 与`ptrvec1`里面的向量的地址相关联`vec`。

问题是外部 vec 长度不是恒定的，它取决于用户输入

不是 3 和 10 个向量。那是向量的长度...

假设您有地址为 0、1 和 2 的向量，其中每个地址都有另一个向量。我想在 0、1 和 2 地址内的每个向量中运行指针

```
0,    0, 1, 2
1,    0, 1, 2
2,    0, 1, 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:02:06.987

你可以使用：

```
ptrvec1 = &vec[0]; 
```

当然，假设它`vec`包含至少一个元素（在您显示的代码中没有）。

替换`0`为所需的索引。

# android - 即使更改字节后，ImageView 仍显示相同的图像

> ID：15662112
> 
> 赞同：0
> 
> 时间：2013-03-27T15:01:10.020
> 
> 标签：android, imageview

我正在开发一个 Android 应用程序，在该应用程序中，我通过蓝牙将图像从 PC 发送到我的 Android 手机，并一次在 ImageView 中显示它们。当用户按下“下一个”按钮时，应该显示下一个图像。

我发送的第一张图片显示正确；但是，当用户按下“下一步”按钮时，即使第二张图像的字节正在使用`BitmapFactory.decodeByteArray()`.

这是代码：

```
public void displayImage()
{
    runOnUiThread(new Runnable() {
        public void run() { 
            setContentView(R.layout.screen); 
            imv = (ImageView) findViewById(R.id.imageView1); 
            if (scrn[img_no] == null) 
                Log.d("Screen","Screen in null"); 
            else { 
                imv.setImageBitmap(scrn[img_no]); 
                imv.postInvalidate(); 
            }
        }
    });
} 
```

`scrn[]``Bitmap`是我在上面的代码中初始化的一个数组，它`img_no`是一个计数器，在按下下一个时递增 1，在按下上一个时递减 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:16:59.713

终于明白了.. 刚刚重新初始化了我从中读取图像字节的 DataInputStream。似乎第一个图像字节一次又一次地被覆盖，因此显示了相同的图像..奇怪但真实..希望它对你们中的一些人有所帮助

# jquery - 仅当表单中的元素发生更改时如何启用提交按钮

> ID：15662113
> 
> 赞同：0
> 
> 时间：2013-03-27T15:01:10.490
> 
> 标签：jquery, html, forms

我已经用下面的代码实现了这个：

```
$(':input[type!="submit"]', form.get(0)).live ('change', function (e) {
    form.find (':submit').removeAttr ('disabled');
}); 
```

这完美地工作，但是，当用户将元素更改回其原始状态时，提交按钮仍处于启用状态：

例子：

*   最初表单有一个复选框被选中 - 提交按钮将被禁用
*   用户取消选中复选框 - 提交按钮将被启用
*   用户再次选中复选框（返回原始状态） - 提交按钮仍处于启用状态（我希望再次禁用它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:28:01.277

试试这个：

```
$(document).on('change', 'input[name=cb1]', function () {
    $('input[type=submit]').prop('disabled', $(this).is(':checked'));
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/3VB3C/)**

我正在`.on()`根据您对`.live()`.

# excel - 接收到 Complie 错误方法或未找到数据成员

> ID：15662116
> 
> 赞同：0
> 
> 时间：2013-03-27T15:01:30.170
> 
> 标签：excel, vba, compilation

我正在创建一个共享工作表 - 在 O 列中，当他们单击时，我创建了一个用户表单，询问 3 个问题。我需要将这些答案放入隐藏的工作表中。我已经编写了代码，但是当我运行它时，我得到了编译错误方法。由于我对 VBA 很陌生，我确定我错过了一些我不明白的东西。我错过了各种错误。这是我的第一个，我还没有复制和粘贴。所以任何帮助将不胜感激！在这种情况下，我在谷歌上搜索并找到了一个关于我正在寻找的表格，并尝试对其进行调整以适应我需要的内容。可能是我的第一个错误！

它突出了

```
iRow = ws.Cells.Find(What:="*", SearchOrder:=x1Rows, _
        SearchDirection:=x1Previous, LookIn:=x1Values).Row + 1 
```

这是我的整个代码。请帮忙！

```
Private Sub cmdAdd_Click()
    Dim iRow As Long
    Dim ws As Worksheet
    Set ws = Worksheets("WebLeadInfo")

    'find first empty row database
   iRow = ws.Cells.Find(What:="*", SearchOrder:=x1Rows, _
        SearchDirection:=x1Previous, LookIn:=x1Values).Row + 1

    'check for a contact
    If Trim(Me.txtContact.Value) = " " Then
        Me.txtContact.SetFocus
        MsgBox "Please enter info"
        Exit Sub
    End If

    'copy the data to the database
    'use protect and unprotect lines,
    '   with your password
    '   if worksheet is protected
    With ws
    '   .Unportect Password:="sunway12"
       .Cells(lRow, 1).Value = Me.txtContact.Value
       .Cells(lRow, 3).Value = Me.txtFind.Value
       .Cells(lRow, 4).Value = Me.txtSearch.Value
       .Protect Password:="sunway12"
    End With

    'clear the data
    Me.txtContact.Value = " "
    Me.txtFind.Value = " "
    Me.txtSearch.Value = " "
    Me.txtContact.SetFocus

End Sub

Private Sub cmdClose_Click()
    Unload Me
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:04:48.093

x1Rows（以及其他）。他们在那里使用“一个”字符。但它们应该拼写为“L”XLROWS，而不是 X1ROWS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:18:41.537

在**Find 方法的文档中，**您可以看到 **参数 SearchOrder**可以是以下**XlSearchOrder**常量之一：

```
xlByRows
xlByColumns 
```

SearchDirection可以是以下**XlSearchDirection**常量**之一：**

```
xlNext  
xlPrevious 
```

最后**LookIn**参数应设置为：

```
xlValues 
```

因此，在您的情况下，它将是：

```
'find first empty row database
Dim findResult As Range
Set findResult = ws.Cells.Find(What:="*", SearchOrder:=xlByRows, _
        SearchDirection:=xlPrevious, LookIn:=xlValues)

iRow = 1 ' in case that the sheet contains no data the first empty row is the first one
If (Not findResult Is Nothing) Then iRow = findResult.Row + 1

' ...

With ws
'   .Unportect Password:="sunway12"
   .Cells(iRow, 1).Value = Me.txtContact.Value
   .Cells(iRow, 3).Value = Me.txtFind.Value
   .Cells(iRow, 4).Value = Me.txtSearch.Value
   .Protect Password:="sunway12"
End With 
```

# c# - Ajax.ActionLink 和确认对话框

> ID：15662120
> 
> 赞同：3
> 
> 时间：2013-03-27T15:01:44.220
> 
> 标签：c#, javascript, asp.net, ajax, asp.net-mvc-4

我有一些问题

```
@Ajax.ActionLink 
```

我想显示确认对话框，是的，我知道我可以这样做：

```
@Ajax.ActionLink("Do it!", "Delete", new AjaxOptions(){ Confirm = "Are you sure?" }); 
```

但我想拥有自己的 MyConfirm 对话框
，我使用**alertify**。

所以我的代码是：

```
 @Ajax.ActionLink("Do it!", "Delete", new AjaxOptions(){  OnBegin="return MyConfirm();"}) 
```

我的 JavaScript 函数：

```
function MyConfirm() {
        alertify.confirm("Do you really want to do that??", function (e) {
           if (e) return true;
           else return false;
        });    
 } 
```

但是，如果我在**MyConfirm()**函数中只返回“ **false** ”Ajax 请求停止并且我的“ **Delete** ”操作不会启动（因此它应该按照它应该的方式工作）。但在我的示例函数**MyConfirm()**中显示我的 MyConfirm 对话框，但它也立即返回 true 并且“**删除**”操作开始！如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:28:53.500

根据：[Javascript Alertify 并从确认返回](https://stackoverflow.com/questions/14408627/javascript-alertify-with-return-from-confirm)

Alertify 是一个非阻塞代码，它在用户做出响应之前返回。使用 fiddler 或 firebug 查看用户选择和 ajax 请求的时间线。

```
function MyConfirm() {
        alertify.confirm("Do you really want to do that??", function (e) {
           if (e) alert('after they pressed confirm, but ajax is already sent');
           else alert('after they pressed confirm, but ajax is already sent');
        });
        // no return here
 } 
```

根据[http://yassershaikh.com/how-to-use-onbegin-method-with-ajax-beginform/](http://yassershaikh.com/how-to-use-onbegin-method-with-ajax-beginform/)返回 false 应该取消 Ajax 调用。但是您的函数目前不返回任何内容。

所以尼古拉斯的答案可能是唯一正确的答案。

回应您的评论。假设您知道如何阻止 js 的执行（这是一件可怕的事情！而且您不应该这样做！）这将为您解决问题：

```
// this tells us if use made a choice
var userClicked = false;
// this is for user's choice
var userChoice;

function MyConfirm() {
    alertify.confirm("Do you really want to do that??", function (e) {
        // mark that user clicked
        userClicked = true;
        if (e) {
            userChoice = true;
        } else {
            userChoice = false;
        }
    });

    // Put your delay code here 
    // userClicked tells you that user made a choice
    // Remember that setTimout will fail here as it's a fork, not a blocking function
    // you will have to do some crazy while loops that will make unicorns cry

    userClicked = false;
    return userChoice;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:24:40.460

我没有使用过`alertify`，但是从方法签名来看，我假设它会`alertify.confirm`立即返回并在用户稍后关闭弹出窗口时运行回调方法。

这意味着您的`MyConfirm`方法也立即返回，如果它没有返回 false，则启动 ajax 调用。

您可以通过始终返回来解决此问题`false`，`MyConfirm`并且仅在`alertify.confirm`回调函数中进行 ajax 调用：

```
function MyConfirm() {
    alertify.confirm("Do you really want to do that??", function (e) {

       // this actually makes the ajax call if required
       if (e) doAjaxCall();
    });    

    return false; 
 } 
```

# linux - Qt Designer & Qt Assistant 启动时出现段错误

> ID：15662123
> 
> 赞同：1
> 
> 时间：2013-03-27T15:01:49.567
> 
> 标签：linux, qt4, qt-designer

如果这是在错误的部分，我深表歉意-根据需要移动...

一点背景知识：我有一个我构建的 Qt 4.8.4 应用程序，它运行得很漂亮……对我来说。我使用 VNC 连接到 Linux Redhat 盒子。

但是，当将应用程序提供给同事使用时，他无法在没有分段错误的情况下使其运行：基本上，他会尝试选中其中一个复选框，应用程序将出现分段错误并使用 gdb，回溯显示：

```
#0  0x00000000 in ?? ()
#1  0xb7a2b9e8 in QGtkStyle::drawComplexControl () from /usr/local/Trolltech/Qt-4.8.4/lib/libQtGui.so.4
#2  0xb7b315b5 in QScrollBar::paintEvent () from /usr/local/Trolltech/Qt-4.8.4/lib/libQtGui.so.4
#3  0xb7682fd4 in QWidget::event () from /usr/local/Trolltech/Qt-4.8.4/lib/libQtGui.so.4
... 
```

需要注意的几点：

1.  另一个用户：他和我在同一个 Linux Redhat 机器上，只是登录名不同。他的`PATH`, `QTDIR`, `QTLIB`, `QTBIN`, `QTINC`, &`QTMAKESPEC`和我一样。我们都在使用 bash shell。
2.  我在我的应用程序中进行了一些调试，以比较 qt 已知的系统环境，它们是相同的（使用用户名/登录信息的执行）。

我一直在我的桌子上敲打我的头试图弄清楚这一点。

好吧，我决定随机做一些事情，然后我运行了已安装的 Qt Designer ......它无法启动。*有趣的...*

所以我做了一些调查，发现菜单中的Qt Designer是针对Qt-3.3的，也安装了。那，或者我读过的，不应该是一个问题。

然后，我尝试启动与 Qt 4.8.4 一起打包的 Qt Designer，但它也无法启动。如果我尝试从终端启动它，我会得到“Segmentation Fault”输出。（进一步调查显示 Qt 助手正在做同样的事情......）

通过 gdb 运行设计器（对于 qt 4.8.4），回溯显示：

```
#0  0x00000000 in ?? ()
#1  0xb6f049e8 in QGtkStyle::drawComplexControl() from /usr/local/Trolltech/Qt-4.8.4/lib/libQtGui.so.4
#2  0xb700a5b5 in QScrollBar::paintEvent() from /usr/local/Trolltech/Qt-4.8.4/lib/libQtGui.so.4
#3  0xb6b5bfd4 in QWidget::event () from /usr/local/Trolltech/Qt-4.8.4/lib/libQtGui.so.4 
```

**设计师的回溯与我的应用程序的回溯相同！**

...而且我不知道这对我的应用程序/其他用户意味着什么。

我最初想重新安装 Qt，但如果它对我来说工作正常，那将如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:50:54.263

因此，对于遇到类似问题的任何人，我相信我已经找到了答案，至少在这种情况下：

在比较了我的主目录和其他用户的主目录后，我发现了两个最让我感兴趣的文件夹：

```
.config/
.qt/ 
```

事实证明，另一个用户*丢失*了 .qt 文件夹！在我的 .config 文件中，我有一个他没有的“Trolltech”文件夹。所以我把我的复制到他的，并在尝试再次运行之前注意到最后一件事......

在 .config/ 下，有一个文件名为`Trolltech.conf`- 猜猜看：他的和我的完全不同：我的 Trolltech.conf 文件没有设置 Qt 4.8.4 的所有内容。所以我也复制了。

瞧——Qt Designer（适用于 3.3 和 4.8.4）、Qt 助手和我的应用程序现在都运行良好。:D

# c# - 执行 File.Copy 时的 C#未授权访问异常

> ID：15662124
> 
> 赞同：3
> 
> 时间：2013-03-27T15:01:59.347
> 
> 标签：c#, file, copy

我正在尝试将文件从客户端复制到具有共享驱动器的服务器。当我这样做时，我得到了`UnauthorizedAccessException`它，它说拒绝访问我试图复制到的这条路径。这很奇怪，因为我拥有所有权限并且我以管理员身份登录。奇怪的是，当写入服务器上同一路径上的文本文件时，它可以工作。像这样：

```
FileStream fs = new FileStream(@"\\SIMON-VAIO\SimonShared\Users\Simon\Desktop\Files\Clients\clients.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

        using (StreamReader sr = new StreamReader(fs))
        {
            while (sr.Peek() >= 0) //as long as there are characters to read
            {
                ListViewItem lvwItem = new ListViewItem();
                lvwItem.Text = sr.ReadLine();
                AddListViewItem(lvwItem);
            }
            sr.Close();
        } 
```

但是在执行复制方法时，我得到了这个异常。这是我复制的方式：

```
FileInfo file = new FileInfo(sourcePath);
            string newPath = targetPath + "\\" + file.Name;
            File.Copy(sourcePath, newPath, true); 
```

所以我输入了源和目标的文件名和扩展名的整个路径。

我已经尝试过诸如“ `File.SetAttributes(dest, FileAttributes.Normal);`”之类的东西，以及服务器上的所有内容，例如地图上的安全性等。

你知道出了什么问题吗？非常感谢您的帮助！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:08:57.893

您可能特别具有对该文件的读/写权限，但对文件夹本身没有。这就是您无法在该位置创建新文件的原因之一。

另请记住，如果您启用了 UAC，应用程序将不会“继承”您的管理员权限，除非您明确授予它们（通过以管理员身份运行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:09:05.903

由于以下问题，可能会出现该特定问题：

*   对驱动器的无效访问
*   对文件夹的无效访问
*   对覆盖或移动文件的访问无效。

根据路径位置，它会让我相信它是另一台计算机。您必须确保它满足执行任务所需的可访问性要求。

您可以通过几种不同的方式完成此操作：

*   为适当的提升权限编写测试。
*   尝试让您的程序模拟管理员或网络服务帐户。
*   您可以在尝试与之交互之前查询权限。

这些是您可以做到这一点的几种方法。

你甚至可以针对 UAC 进行测试：

```
WindowsIdenetity user = WindowsIdentity.GetCurrent();
WindowsPrincipal role = new WindowsPrincipal(user);

if (Environment.OSVersion.Platform == PlatformId.Win32NT) && (Environment.OSVersion.Version.Major > 6)
{
     if(!(String.NullOrEmpty(user.ToString())))
     {
          if(role.IsInRole(WindowsBuiltInRole.Administrator)
          {
              // Good
          }
     }
} 
```

这将是一种实际验证您担任适当角色的方法；如果不是，那么您实际上可以编写一个`MessageBox`或其他方式来指示权限不足。

你甚至可以查询目录：

```
string remotePath = @"\\SomeLocation";
bool IsAccess = false;

DirectoryInfo di = new DirectoryInfo(remotePath);
if(di.Exists)
{
    try
    {
        var acl = di.GetAccessControl();
        IsAccess= true;
    }
    catch(UnauthorizedAccessException ex)
    {
       if(ex.Message.Contains("read-only"))
       {
           IsAccess = true;
       }
       else
       {
           // No Access Fail, do something else.
       }
    }
} 
```

如您所见，在这种情况下您有很大的灵活性。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:49:56.593

我很抱歉，但问题是我第一次共享驱动器时忘记将权限更改为“完全控制”，并且只有读取权限。这使得计算机除了通过共享网络读取之外，无法做任何事情。再次对不起，是我的错！无论如何，我真的很感谢你的帮助，谢谢！

# jquery - 关闭 jQuery 菜单中的先前项目

> ID：15662126
> 
> 赞同：1
> 
> 时间：2013-03-27T15:02:07.760
> 
> 标签：jquery, menu, toggle, slide

第一次在这里发帖，但我在研究时总是先来这里。无论如何，我到处搜索，找不到解决问题的可靠方法。这是问题所在，我使用 jQuery 1.9.1 和 slideToggle 函数创建了一个垂直滑动菜单。我在 jsFiddle [http://jsfiddle.net/JWaXM/1/中放了一个例子](http://jsfiddle.net/JWaXM/1/)

```
<li class="topnav"><a href="#">ITEMS LIST 1</a>
<ul>
    <li class="subnav">ITEM 1
        <ul>
            <li>List subitem 1</li>
            <li>List subitem 2</li>
        </ul>
    </li>
    <li class="subnav">ITEM 2
        <ul>
            <li>List subitem 1</li>
            <li>List subitem 2</li>
        </ul>
    </li>
 </ul>
</li>

<li class="topnav"><a href="#">ITEMS LIST 2</a>
<ul>
    <li class="subnav">ITEM 1
        <ul>
            <li>List subitem 1</li>
            <li>List subitem 2</li>
        </ul>
    </li>
    <li class="subnav">ITEM 2
        <ul>
            <li>List subitem 1</li>
            <li>List subitem 2</li>
        </ul>
    </li>
 </ul>
</li>

<script type="text/javascript">
$(document).ready(function(){
$(".topnav, .subnav").click(function(event){
 event.stopPropagation();
 $(this).children("ul").slideToggle();
});
});
</script> 
```

菜单效果很好，但我需要弄清楚当我打开另一个子菜单时如何关闭前一个子菜单。另外，我需要一种方法来区分父母和孩子，以便它知道关闭顶部导航或子导航。我是整个 jQuery 的新手，但我正在慢慢学习。感谢您的帮助，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:12:25.303

您可以向上滑动单击元素兄弟的所有子元素：

```
$(this).siblings().children('ul').slideUp(); 
```

这样你就不需要知道点击的元素是否是一个`topnav`or`subnav`元素，它会`<ul>`根据需要支持尽可能多的嵌套

[演示](http://jsfiddle.net/JWaXM/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:09:46.780

尝试

```
$(document).ready(function(){
    $(".topnav, .subnav").click(function(event){
        event.stopPropagation();
        $(this).closest('ul').find('.active').stop().slideToggle().removeClass('active');
        $(this).children("ul").slideToggle().addClass('active');
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/6e93H/2/)

# google-chrome-extension - chrome.app.window 的关闭事件

> ID：15662127
> 
> 赞同：10
> 
> 时间：2013-03-27T15:02:14.703
> 
> 标签：google-chrome-extension, google-chrome-app

当 Chrome 应用程序窗口关闭时，是否可以检测到该事件？并在关闭窗口之前执行操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T21:34:11.743

[chrome.app.window.current().onClosed](http://developer.chrome.com/apps/app.window.html#event-onClosed)允许您在窗口关闭时注册事件侦听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-19T17:27:03.680

文森特的回答在某些情况下会起作用，但文档警告说，在触发 onClosed 事件时，某些 chrome api 功能将丢失。

> 请注意，这应该从正在关闭的窗口以外的窗口收听，例如从后台页面

要从后台页面监听此事件，请执行以下操作：

```
chrome.app.window.get(windowIDUsedToCreateChildWindow).onClosed.addListener(function(){...}) 
```

# ios - MPMoviePlayerController 黑窗口，不加载音频文件

> ID：15662129
> 
> 赞同：1
> 
> 时间：2013-03-27T15:02:18.110
> 
> 标签：ios, audio, video, mpmovieplayercontroller, loading

为我的教堂制作一个应用程序，需要从 xml 下载后播放 mp3 文件。NSLog 正确显示 url，但是当我运行它时，我只是得到一个旋转的“加载”和一个黑框。关于为什么的任何建议？

谢谢！

```
-(void)viewDidAppear:(BOOL)animated
{
RSSItem* item = (RSSItem*)self.detailItem;
self.title = item.title;
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:item.link];
NSLog(@"The url is %@", item.link);
moviePlayerController.view.frame = CGRectMake(73, 203, 640, 360);
[self.view addSubview:moviePlayerController.view];
[moviePlayerController prepareToPlay];
moviePlayerController.fullscreen = YES;
[moviePlayerController play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:55:23.670

试试这个..

```
RSSItem* item = (RSSItem*)self.detailItem;
self.title = item.title;
if(item.link)
{
//NSURL *url = [NSURL fileURLWithPath:item.link];
MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:item.link];
moviePlayer.view.frame = CGRectMake(0, 0, 500, 500);
moviePlayer.moviePlayer.shouldAutoplay=YES;
moviePlayer.moviePlayer.controlStyle = MPMediaTypeMusicVideo;
[moviePlayer.moviePlayer setFullscreen:YES animated:YES];
[self.view addSubview:moviePlayer.view];
[moviePlayer.moviePlayer play];
}
else
{
NSLog(@"no url");
} 
```

# android - 为多个听众设置一个广播动作还是多个广播动作更好？

> ID：15662130
> 
> 赞同：1
> 
> 时间：2013-03-27T15:02:18.380
> 
> 标签：android, android-broadcast

在遇到 android 的各种挑战（特别[是由 AlarmManager 重新创建的服务](https://stackoverflow.com/questions/15435117/service-being-re-created-by-alarmmanager)和[日志不起作用（或似乎删除了一些行）](https://stackoverflow.com/questions/15409796/log-not-working-or-seems-to-drop-some-lines)）之后，我正在重新设计我的一些代码以使用广播意图和广播接收器工作。现在，假设您有一个信息源和许多听众。信息源希望在任何时间点仅向其中一个接收者发送信息：

```
time=1: Broadcaster->Recevier 1
time=2: Broadcaster->Recevier 2
time=3: Broadcaster->Recevier 3 
```

有两种方法可以实现这一点：

1.  所有接收器都可以使用相同的操作代码，例如“com.me.stuff.INFO_FROM_SOURCE”。这意味着android系统只有一种额外的可能的广播类型来处理，但是信息会发送到每个接收器，每个接收器必须决定信息是否适合他们。

2.  每个接收器都有自己的代码，例如“com.me.stuff.INFO_FROM_SOURCE_TO_RECEIVER_X”。这意味着 android 系统有更多可能的广播要处理，但只有一个接收器必须处理传入的广播。

总体而言，哪个系统负载最小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:36:46.280

我会用第二种方法。br 消息旨在做一件事。我想你可以在意图包中有一个不同的动作，但是当你可以按动作过滤时，这似乎是一个不必要的步骤，它意味着过滤的方式。

您可以为多个操作使用相同的接收器过滤器，然后在您的 onReceive 上，放入一个 if 语句来检查所有可能的操作。

# javascript - Javascript滚动 - 水平和垂直 - 到页面上的特定位置？

> ID：15662141
> 
> 赞同：0
> 
> 时间：2013-03-27T15:02:44.313
> 
> 标签：javascript, jquery, scroll

这是我的网站：violetoeuvre.com

我想做的是在页面上有多个垂直和水平滚动。我想我应该用 Jquery 来做这件事。

垂直：单击顶部的写作链接会向下滚动，以便侧栏上的写作部分位于页面顶部。

顶部的联系链接——同样的事情（当我掌握了这个窍门时，我将在侧边栏中的元素两侧添加向上和向下箭头，以向上和向下滚动到下一个/上一个元素。）

水平：在侧边栏的写作部分，我希望当点击这些按钮时，deadspin、gawker 和 awl 链接滚动到写作框中的内容。我想这会有一个溢出：隐藏元素某处？如果在这个框中垂直滚动会更容易，那也没关系。

我发现了这个很棒的网站，我认为它会有所帮助：

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

相对位置和相对选择器看起来很有希望。

我猜我让每个按钮成为一个链接，可以滚动到页面的另一部分。

所以我会选择这个类选择器（顶部的联系人导航栏），例如：

```
.nav_box_r {
    display: block;
    float:left;
    width:219px;
    text-align: left;
    padding-right: 40px;
    padding-top: 169px;
    margin-top: 0;
} 
```

作为一个链接滚动到页面底部的联系信息，比如

```
$(...).scrollTo( 0, 800, {queue:true} ); 
```

（第二个问题：我应该重做所有的统计元素来固定位置吗？）

我是新手，所以会很感激特异性。（脚本是否进入头部，向上/向下滚动到相对或固定位置等）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:06:45.053

希望这会有所帮助，您可以使用 href 跳转到您网站中的 div。

```
<a href="#some_div">Link</a> 
```

还有这个页面也可以帮助你。 [如何使用 jquery 滚动到页面上的特定位置？](https://stackoverflow.com/questions/1586341/how-can-i-scroll-to-a-specific-location-on-the-page-using-jquery/1586379#1586379)

试试这个代码

$(".yourclass").click(function() {

```
 $(this).animate({ scrollTop: $('#title1').offset().top }, 1000); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:45:41.153

看看 Balupton 的 ScrollTo 插件，它可能对你来说更容易 + 那里有一个演示，向你展示如何设置它。

[在 Github 下载 zip](https://github.com/balupton/jquery-scrollto)

# c++ - C++ 返回一个数组

> ID：15662142
> 
> 赞同：0
> 
> 时间：2013-03-27T15:02:45.223
> 
> 标签：c++, arrays, return

我是 C++ 编程的新手，我想创建一个函数，将所有公共分隔符放入一个数组中，然后在`int main()`

是否可以从函数返回数组：D？

谢谢！

代码： http: [//pastebin.com/K8195wzF](http://pastebin.com/K8195wzF)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:11:09.000

返回一个动态大小的容器[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)，这里有最好的用例：

```
#include <vector>
...

std::vector<int> dividers(int x, int y) {
    std::vector<int> divi;

    ...
    return divi;
} 
```

按值返回会创建一个副本，确保没有[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)。通过指针返回本地数组时就是这种情况：当函数退出时内存将丢失，而指针指向垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:09:35.580

是的，可以以指针的形式返回数组，但不建议这样做，因为您不会提前知道它的大小。**但请注意不要返回局部变量的地址（分配在堆栈上！！）**。您的代码的另一个问题是您没有初始化`d`. 首选的 C++ 方法是返回该类型的向量（您不再需要`d`）

```
 #include <vector>
   ....
   vector<int> dividers(int y,int x){
    int yx;
    vector<int> divi;
    divi.reserve(100);
    if(y > x){
      yx = y;
    }
    if(x > y){
      yx = x;
    }

    for (int n = 1; n <= yx; n++){
      if ((n%y==0) && (n%x==0)){
        divi.push_back(n);
      }
    }

    return divi;
  } 
```

您也应该阅读迭代器以修改主函数中的循环。

删除了我的代码中的大错误...感谢您指出。我对向量犯了与数组相同的错误。现在修复...愚蠢的我...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T15:03:57.230

不，这是不可能的。您可以返回一个向量，也可以将指向数组第一个元素的指针传递给您的函数。

查看您的代码，指针选项看起来像这样

```
int dividers(int y,int x, int* divi){
    ...
}

int main()
{
    int divi[100];
    ...
    dividers(x, y, divi);
} 
```

矢量解决方案可能如下所示

```
std::vector<int> dividers(int y,int x){
    std::vector<int> divi;
    ...
        divi.push_back(n); // when you want to add a divider to your vector
    ...
    return divi;
}

int main()
{
    std::vector<int> divi;
    ...
    divi = dividers(x, y);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T15:26:16.613

您可以执行以下操作：

```
typedef int arrT[10]

arrT *func() {} 
```

其中将 arrT 定义为 10 个整数数组的别名，或者

```
int (*func())[10]{} 
```

其中一个在取消引用时定义 func 以返回 10 个整数的数组。

这样的`using`声明`using arrT = int[10]`也是可能的。

正如其他人所指出的，使用声明为的函数可以从包含所需类型的函数返回 std::vector `std::vector<int> func(){}`。

此外，您可以使用另一个容器`std::array<>`并完全忘记内置数组。

参考：

[C++ 入门；李普曼、拉乔伊、穆](https://rads.stackoverflow.com/amzn/click/com/0321714113)

# asp.net-mvc-4 - 实体框架代码优先多对多关系和继承

> ID：15662145
> 
> 赞同：6
> 
> 时间：2013-03-27T15:02:51.473
> 
> 标签：asp.net-mvc-4, ef-code-first, entity-framework-5

如果这个问题已经在某个地方得到回答，请原谅我，我一直很难找到解决这个问题的方法。

我正在尝试在 MVC4 项目上设置 EF Code First。我有一个从 Person 继承的 User 和 Customer。然后我有一个模板对象，它与客户具有多对多关系，与用户具有一对多关系。这是我的设置方式：

**楷模**

```
public class Person
{
    [Key]
    public int PersonID { get; set; }

    public string LastName { get; set; }
    public string FirstName { get; set; }

    public string FullName
    {
        get
        {
            return String.Format("{0} {1}", FirstName, LastName);
        }
    }

    public string Email { get; set; }

    public virtual List<Template> Templates { get; set; }
}

public class User : Person
{
    .... 
}

public class Customer : Person
{
    ....
}

public class Template
{
    public int TemplateId { get; set; }
    public string TemplateName { get; set; }

    public virtual List<Customer> Customers { get; set; }

    [ForeignKey("User")]
    public int UserId { get; set; }
    public virtual User User { get; set; }
} 
```

**语境**

```
public class ProjectContext : DbContext
{
    public ProjectContext()
        : base("name=ProjectDB")
    {
    }

    public DbSet<Template> Templates { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Person> People { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions
            .Remove<PluralizingTableNameConvention>();

        modelBuilder.Entity<Template>()
            .HasMany(x => x.Customers)
            .WithMany(x => x.Templates)
            .Map(x => x.MapLeftKey("TemplateId")
                .MapRightKey("PersonId")
                .ToTable("TemplateCustomer")
            );
    }
} 
```

如果我将 Person DBSet 从上下文中删除，这可以正常工作，但会设置 TPT 继承。我想使用 TPH 继承，但是当我在上下文中使用 Person DBSet 启用迁移时，它会阻塞：

NavigationProperty“模板”无效。AssociationType 'MvcProject.Models.Template_Customers' 中 FromRole 'Template_Customers_Target' 的类型 'MvcProject.Models.Customer' 必须与声明此 NavigationProperty 的类型 'MvcProject.Models.Person' 完全匹配。

我在哪里错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T20:21:42.637

您不能从基础实体继承*导航属性。*它们总是必须在关系的另一端所引用的类中*声明。*

*   `Template.Customers`是指`Customer`（而不是`Person`），因此反向导航属性`Templates`必须在`Customer`（而不是`Person`）中声明
*   `Template.User`是指`User`（而不是`Person`），因此反向导航属性`Templates`必须在`User`（而不是`Person`）中声明

因此，基本上您必须将`Templates`集合从`Person`两个派生类中移出：

```
public class Person
{
    // no Templates collection here
}

public class User : Person
{
    //... 
    public virtual List<Template> Templates { get; set; }
}

public class Customer : Person
{
    //...
    public virtual List<Template> Templates { get; set; }
} 
```

然后你可以像这样使用 Fluent API 定义这两种关系：

```
modelBuilder.Entity<Template>()
    .HasMany(t => t.Customers)
    .WithMany(c => c.Templates) // = Customer.Templates
    .Map(x => x.MapLeftKey("TemplateId")
               .MapRightKey("PersonId")
               .ToTable("TemplateCustomer"));

modelBuilder.Entity<Template>()
    .HasRequired(t => t.User)
    .WithMany(u => u.Templates) // = User.Templates
    .HasForeignKey(t => t.UserId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:15:15.163

将您的 HasMany 选择器更改为 People：

```
 modelBuilder.Entity<Template>()
        .HasMany(x => x.People) // here
        .WithMany(x => x.Templates)
        .Map(x => x.MapLeftKey("TemplateId")
            .MapRightKey("PersonId")
            .ToTable("TemplateCustomer")
        ); 
```

# java - 如何设计包含大量数据的 JMS 消息

> ID：15662146
> 
> 赞同：4
> 
> 时间：2013-03-27T15:02:51.537
> 
> 标签：java, database, jms

我正在设计一个系统，该系统使用 ETL 工具来检索一批数据，即插入/更新/删除一个或多个表，并将它们放在 JMS 主题上，以便稍后由多个客户端处理。现在，关于主题的每条消息都代表一条记录 I/U/D，我们有一条特殊消息来分隔批处理的结束。在单个事务中处理批次很重要，因此由一个特殊的消息分隔一堆消息并不理想：会话发布和接收消息都必须针对多条消息进行设计；批处理分隔符消息是一个混乱的解决方案（每次我们收到一条消息，我们都需要检查它是否是最后一条）并且非常容易出错；系统难以调试和维护；关于该主题的消息数量迅速变得庞大（高达数百万）。

现在，我认为改进架构的下一个自然步骤是将所有记录打包在单个 JMS 消息中，这样当接收到消息时，它包含单个事务，很容易检测到故障，没有“孤儿”关于主题的记录等。我只看到这样做的好处！现在这是我的问题：

*   创建这样一个打包消息的最佳方法是什么？我认为我的选择是`StreamMessage`，`ByteMessage`或`ObjectMessage`。我排除了文本和地图消息，因为第一个将需要文本解析，这会降低性能，我认为第二个似乎并不真正适合该场景。我有点倾向于`StreamMessage`因为它看起来非常紧凑，尽管它需要大量的工作来编写自定义序列化代码（对于 ByteMessage 来说更糟）。不确定 ObjectMessage，它是如何执行的？是否有开箱即用的解决方案？
*   每条消息允许的最大大小是多少？它可能是数百 KB 甚至几 MB 的数量级吗？

感谢您的想法！

乔瓦尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:26:03.520

您可以使用两个（或更多）队列、相关 ID 和一个消息选择器，而不是使用一条大消息。

排队：

1.  将通知消息发布到“通知队列”以指示应该开始处理
2.  将命令消息发布到“命令队列”，相关 ID 设置为通知消息消息 ID（如果队列深度太高，您可以使用多个命令队列）
3.  提交交易

加工：

1.  从“通知队列”接收通知消息（例如使用消息驱动 bean）
2.  使用消息选择器接收和处理来自“命令队列”的所有相关消息
3.  提交交易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:41:05.837

使用字节（例如 ByteMessage）可能会占用较少的内存。

如果您操作 Java 对象，则可以使用快速且字节有效的序列化/反序列化库，如[Kryo](https://code.google.com/p/kryo/)

我们很乐意在消息系统的生产环境中使用 Kryo，但您有很多替代品，例如流行的[Google Protocol Buffers](https://code.google.com/p/protobuf/)

# ios - 在 iOS 版 Google 地图中控制动画持续时间

> ID：15662148
> 
> 赞同：28
> 
> 时间：2013-03-27T15:02:56.480
> 
> 标签：ios, animation, google-maps-sdk-ios

iOS 版 Google 地图的文档指出：

> 调用多种方法之一，使您可以将相机移动到新位置。您可以使用 CoreAnimation 控制动画的持续时间。

对于我的生活，我无法弄清楚如何控制动画持续时间。我尝试过使用 UIView 动画，例如：

```
 [UIView animateWithDuration: 5 animations:^{
         GMSCameraPosition *camera = [self newCamera];
        self.mapView.camera = camera;
    } completion:^(BOOL finished) {
    }]; 
```

我在 CoreAnimation 中查看了 CALayer 动画。但是，我不知道如何将图层动画应用于地图视图。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-27T15:43:36.060

我找到了答案……您可以通过将其中一个 animate* 方法包装在 CATransaction 中来控制动画持续时间，如下所示：

```
 [CATransaction begin];
   [CATransaction setValue:[NSNumber numberWithFloat: 1.0f] forKey:kCATransactionAnimationDuration];
   // change the camera, set the zoom, whatever.  Just make sure to call the animate* method.
   [self.mapView animateToCameraPosition: [self newCamera]];
   [CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-12-06T18:02:57.570

对于 Swift 3.0：

```
CATransaction.begin()
CATransaction.setValue(1.5, forKey: kCATransactionAnimationDuration)
// your camera code goes here, example:
// mapView.animate(with: update)
CATransaction.commit() 
```

值越大（在本例中为 1.5），动画越慢。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-27T21:49:33.527

斯威夫特 2.0

```
CATransaction.begin()
CATransaction.setValue(NSNumber(float: 1.0), forKey: kCATransactionAnimationDuration)
// change the camera, set the zoom, whatever.  Just make sure to call the animate* method.
CATransaction.commit() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-31T15:34:08.127

很遗憾，使用您提供的相同方法无法知道动画是否已经结束。

是的，我知道，有一个使用此方法的**CATransaction 完成块**，但它根本不起作用！:(

```
[CATransaction begin];
[CATransaction setValue:[NSNumber numberWithFloat: 1.0f] forKey:kCATransactionAnimationDuration];

[CATransaction setCompletionBlock:^{
// ... whatever you want to do when the animation is complete
}];

[self.googleMapsView animateToCameraPosition:[GMSCameraPosition 
                    cameraWithLatitude:LATITUDE
                             longitude:LONGITUDE
                                  zoom:ZOOM]];

[CATransaction commit]; 
```

而且我不能使用**MapView:didIdle** hack 来知道动画已经结束*，因为*如果没有相机位置变化，它将不会被调用。

任何人都知道如何检测动画已结束事件？

FOUND A THREAD About THIS（已解决）： [立即调用 CATransaction 完成](https://stackoverflow.com/questions/19975938/catransaction-completion-being-called-immediately)

# php - 我将文本文件用作 db @ php，但有时无法保存

> ID：15662149
> 
> 赞同：0
> 
> 时间：2013-03-27T15:02:56.540
> 
> 标签：php

嗨，我正在使用`serialize`&`unserialize`函数和`fwrite`&`fopen`用于基于文本的数据库

```
<?php

ini_set('display_errors', 'on');
header('Content-Type: text/html; charset=utf-8');
$debugged = (bool) isset($_GET['debug']);
error_reporting($debugged ? E_ALL : 0);
$data_filename = "database.txt";

$admins = array(
    "admin" => "admin",
    "admin2" => "admin2"
);

$superadmin = "admin";
$order      = "asc";
include_once "functions.php";
?>

<?php
function clean($d) {
    return str_replace(array(
        "\t",
        "\n",
        "\s",
        "\r"
    ), "", $d);
}

function add($email, $age_id, $gender_id, $city, $prof_id, $model, $token, $os_version, $udid, $admin) {
    global $data_filename;

    $datax['email']      = $email;
    $datax['age_id']     = $age_id;
    $datax['gender_id']  = $gender_id;
    $datax['city']       = $city;
    $datax['prof_id']    = $prof_id;
    $datax['model']      = $model;
    $datax['token']      = $token;
    $datax['os_version'] = $os_version;
    $datax['udid']       = $udid;
    $datax['admin']      = $admin;

    $data         = array();
    $data_content = get_file_content($data_filename);
    if ($data_content !== NULL)
        $data = unserialize($data_content);
    $entrie       = serialize($datax);
    $data[]       = $entrie;
    $data_content = serialize($data);
    put_file_content($data_filename, $data_content);
    return $data_content;
}

function get_file_content($filename) {
    if (!file_exists($filename))
        fclose(fopen($filename, "w"));
    if (!file_exists($filename))
        die("sie.");
    $content = (filesize($filename) > 0) ? @fread(fopen($filename, "r+"), filesize($filename)) : NULL;
    if ($content === false)
        die("aq");
    return $content;
}
if (!$data_filename) {
    die("sie-31");
}
$datasey      = array();
$data_content = get_file_content($data_filename);
if ($data_content !== NULL)
    $datasey = @unserialize($data_content);

function put_file_content($filename, $content) {
    if (file_put_contents($filename, $content, LOCK_EX)) {
        return true;
    } else {
        usleep(250000);
        put_file_content($filename, $content, LOCK_EX);
    }
}

function reverse_data($data) {
    $data = array_reverse($data);
    foreach ($data as $key => $entrie)
        $key = $entries_num - $key - 1;
    return $data;
}

function del_admin_contents($who) {
    global $admin, $superadmin, $data_filename;
    ;
    $array        = array();
    $data_content = get_file_content($data_filename);
    if ($data_content === NULL)
        return;
    $array = unserialize($data_content);
    foreach ($array as $key => $value) {
        $bok = unserialize($value);
        if ($bok["admin"] == $who) {
            unset($array[$key]);
        }
    }
    $temp = array();
    foreach ($array as $value)
        $temp[] = $value;
    $data_content = serialize($array);
    put_file_content($data_filename, $data_content);
    return $data_content;
}

function del_entries($select, $udid) {
    global $data_filename;
    $data         = array();
    $data_content = get_file_content($data_filename);
    if ($data_content === NULL)
        return;
    $data         = unserialize($data_content);
    $data         = del_id($data, $select, $udid);
    $data_content = serialize($data);
    put_file_content($data_filename, $data_content);
    return $data_content;
}
function del_id($array, $id_array, $udid) {
    global $admin, $superadmin;
    foreach ($id_array as $id)
        if (isset($array[$id])) {
            $bok = unserialize($array[$id]);
            if ($bok["admin"] == $admin || $admin == $superadmin) {
                if ($bok["udid"] == $udid) {
                    unset($array[$id]);
                }
            }
        }
    $temp = array();
    foreach ($array as $value)
        $temp[] = $value;
    return $temp;
}

function up_id($array, $new_array, $id) {
    global $admin, $superadmin;
    if (isset($array[$id])) {
        $array[$id] = serialize($new_array);
    }
    return $array;
}

function update_id($data, $id, $new_array) {
    global $data_filename;
    $data         = up_id($data, $new_array, $id);
    $data_content = serialize($data);
    put_file_content($data_filename, $data_content);
    return true;
}

function emailupdate($udid, $email) {
    global $data_filename;
    $data         = array();
    $ret          = false;
    $data_content = get_file_content($data_filename);
    if ($data_content === NULL)
        return false;
    $data = unserialize($data_content);
    $id   = 0;
    foreach ($data as $d) {
        $new_array = unserialize($d);
        if ($new_array["udid"] == $udid) {
            $new_array["email"] = $email;
            update_id($data, $id, $new_array);
            $ret = true;
        }
        $id++;
    }
    return $ret;
}

function alldata() {
    global $datasey;
    $benimdata = array();
    if (count($datasey) > 0) {
        foreach ($datasey as $key => $entrie) {
            $gec         = unserialize($entrie);
            $benimdata[] = $gec;
        }
        return $benimdata;
    } else {
        return false;
    }
}

function cleaner() {
    global $data_filename, $max_entries;
    if ($max_entries == 0)
        return;
    $data         = array();
    $data_content = get_file_content($data_filename);
    if ($data_content !== NULL)
        $data = unserialize($data_content);
    while (count($data) >= $max_entries)
        $data = clear_id($data, array(
            0
        ));
    $data_content = serialize($data);
    put_file_content($data_filename, $data_content);
    return true;
}

function logincheck($user, $pass) {
    global $admins;
    if (array_key_exists($user, $admins)) {
        if ($admins[$user] == $pass) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
}

$backup = "./backup/" . date("Ymd-H:i") . ".dat";

if (!file_exists($backup)) {
    $backup_data_content = get_file_content($data_filename);
    file_put_contents($backup, $backup_data_content, LOCK_EX);
}
?> 
```

因为这里是我如何添加新值的示例：

```
 $data_content=add($_POST["email"],$_POST["age_id"],$_POST["gender_id"],$_POST["city_id"],$_POST["prof_id"],$_POST["model"],"N/A",$_POST["os_version"],$randomudid,$admin); 
```

删除：

```
 $data_content=del_entries(array($_GET["del"]),$_GET["delete"]); 
```

我的问题是，当 2 个管理员尝试同时输入一个值时，它只将最后一个发送的值写入数据库并删除旧值，我该如何解决这个问题？

# jquery - 使用 div 而不是表格如何锁定第一个标题行

> ID：15662154
> 
> 赞同：0
> 
> 时间：2013-03-27T15:03:07.243
> 
> 标签：jquery, html, tablerow

我想要做的是让一组 div 使用 display:table、display:table-row 等来做一个表。所有这个表都包含在另一个有滚动条的 div 容器中。当我滚动这个外部容器时，我希望第一行滚动并保持可见

如果我有以下 html

```
<div class="tableContainer">
    <div class="divTable">
        <div class="divRow headerRow">
            <div class="divCell header">A</div>
            <div class="divCell header">B</div>
            <div class="divCell header">C</div>
            <div class="divCell header">D</div>
            <div class="divCell header">E</div>
            <div class="divCell header">F</div>
            <div class="divCell header">G</div>
            <div class="divCell header">H</div>
        </div>

        <div class="divRow">
            <div class="divCell">something</div>
            <div class="divCell">something</div>
            <div class="divCell">something</div>
            <div class="divCell">something</div>
            <div class="divCell">something</div>
            <div class="divCell">something</div>
            <div class="divCell">something</div>
            <div class="divCell">something</div>
       </div>

      <!--repeat above row a bunch of times to make the scrollbar appear-->  
    </div>
</div> 
```

和以下CSS

```
.tableContainer {
    height: 500px;
    overflow: auto;    
}

.divTable {
    display: table;
    position: relative;
}

.divRow {
    display: table-row;
}

.headerRow {
    display: table-row;
    position: fixed;
    top: 0px;
    left: 0px;
    z-index: 1000;
    background-color: white;
}

.divCell {
    display: table-cell;
    padding: 3px;
}

.header {
    font-weight: bold;
} 
```

和下面的 JQuery 脚本

```
 $('.tableContainer').scroll(function() {
        $('.headerRow').css('top', $('.tableContainer').scrollTop() + 'px');
    }); 
```

如果我运行上面的东西，我可以看到 headerRow 的顶部发生了变化，但显然它永远不会移动，它只是停留在表格的顶部并滚动到视野之外。我可以让它向下滚动的唯一方法是，如果我将 headerRow 类更改为绝对定位，但如果我这样做，那么它会破坏列宽，并且标题行与详细信息行的列宽不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:22:37.193

如果我完全理解您的问题，那么您可以尝试以下方法...

```
<script>

 $(document).ready(function(){

 $('.tableContainer').scroll(function() {
    $('.headerRow')
          .stop()
          .animate({"marginTop": ($(window).scrollTop() + 0) + "px"}, "slow" );
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:06:39.417

当您使用固定宽度时，它非常简单。看看这个CSS：

```
html, body {
    margin:0;
}
.tableContainer {
    height: 200px;
    overflow: auto;
}
.divTable {
    display: table;
    position: relative;
    width: 600px;
    margin-top: 1.2em;
}
.divRow {
    display: table-row;
}
.headerRow {
    width: 600px;
    display: table-row;
    position: fixed;
    top: 0px;
    left: 0px;
    z-index: 1000;
    background-color: rgba(255,255,255,0.6);
}
.divCell {
    display: table-cell;
    padding: 3px;
    width: 75px;
}
.header {
    font-weight: bold;
} 
```

如果你想要一个非固定宽度，试试这个：

```
$(document).ready(function () {
    var cellWidth = $(".divCell").css("width");
    var tableWidth = $(".divRow").css("width");
    $(".headerRow").css({
        "width": tableWidth,
        "position": "fixed"
    }).find(".divCell").css("width", cellWidth);
}); 
```

[这个小提琴](http://jsfiddle.net/jakschu/WWCeL/)的例子。如果没有 JS 支持，它提供了一个很好的回退：标题保留在表中。

# cocoa - 附件中的边界

> ID：15662163
> 
> 赞同：0
> 
> 时间：2013-03-27T15:03:32.653
> 
> 标签：cocoa, email, mime, email-attachments

我写了一个简单的邮件，但每次我发送附件时，我都会在附件中找到我的边界。以下内容进入服务器：

```
From: Some valid E-Mail
Reply-To: The same valid E-Mail
To: my E-Mail (hosted by 1&1)
Cc: 
Bcc: 
Subject: Anhang Serie
MIME-Version: 1.0
X-Mailer: KizzyCode Mailer 0.1
X-Priority: 1
Content-Type: multipart/mixed;
     boundary="--KCMailC68HStFfPS701hQuestionaryWySNk6"

This is a multi-part message in MIME format.

----KCMailC68HStFfPS701hQuestionaryWySNk6
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1187.37">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
</style>
</head>
<body>
<p class="p1">TestText</p>
</body>
</html>

----KCMailC68HStFfPS701hQuestionaryWySNk6
Content-Type: text/plain;
     name="splittet Kopie.txt"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;    filename="splittet Kopie.txt"

RGllcyBpc3QgZWluIFRlc3QtVGV4dA==

--KCMailC68HStFfPS701hQuestionaryWySNk6--
. 
```

base64 字符串被解码：Dies ist ein Test-Text *（这是一个测试文本）*
如果我打开附件，它看起来像这样：

```
 <br>
Dies ist ein Test-Tex--KCMailC68HStFfPS701hQuestionaryWySNk6--t 
```

换行符都是\r\n，如果我发送一个不同的附件，比如PDF，我会在文档中得到这个边界。有什么想法吗？（其他一切正常）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:55:24.973

您的最后一个边界缺少两个前导连字符

```
--KCMailC68HStFfPS701hQuestionaryWySNk6-- 
```

尝试将其更改为

```
----KCMailC68HStFfPS701hQuestionaryWySNk6-- 
```

（并且电子邮件缺少`Date`-Header，不是您当前问题的原因，而是您的下一个问题，如果您不添加它;-)）

# c# - TypeDescriptor 和子元素

> ID：15662164
> 
> 赞同：4
> 
> 时间：2013-03-27T15:03:38.517
> 
> 标签：c#, list, propertydescriptor

这段代码：

```
foreach (PropertyDescriptor descriptor in TypeDescriptor.GetProperties(lst[0]))
{
   Console.WriteLine(descriptor.Name);
} 
```

将写出我列表中所有元素的名称。即 FirstName / LastName 或什么。如何写出元素的子元素？如果我的列表有一个元素 Cars，它有汽车的类型和颜色，我将如何使用 TypeDescriptor 来写出来呢？

我现在得到的是：

*   名
*   姓
*   车

我想要的是这样的：

*   名
*   姓
*   车：丰田，红色
*   车：三菱、格林

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:10:13.613

`PropertyDescriptor`-class 提供了一个名为 的方法`GetChildProperties(System.Object)`。
您应该能够将当前对象的引用传递给该方法，并作为回报接收另一个包含子属性的集合。
从这个类继承以获得完整的功能甚至可能是有意义的。

有关文档，请参见[此处](http://msdn.microsoft.com/en-us/library/szzsy8sb.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:10:23.173

您需要检查对象类型，然后在类型正确时获取其属性。

```
foreach (PropertyDescriptor descriptor in TypeDescriptor.GetProperties(lst[0]))
{
   Console.WriteLine(descriptor.Name);

   if(descriptor.PropertyType == typeof(Car))
   {
      foreach(var child in descriptor.GetChildProperties())
      {
          Console.WriteLine(child.Name);
      }
   }   

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:41:32.763

想我明白了。只要我有我需要孩子（汽车）的类型，我就可以这样做：

```
 foreach (Car c in lst[0].Cars)
                {
                    PropertyInfo[] properties = car.GetType().GetProperties(); 
                    foreach (PropertyInfo item in properties)
                    {
                        string propertyName = item.Name;
                    }
                } 
```

# windows - 在 Windows 7 + Delphi 上将应用程序与文件扩展名关联

> ID：15662172
> 
> 赞同：-6
> 
> 时间：2013-03-27T15:03:58.387
> 
> 标签：windows, delphi

你好我如何编码关于 Delphi [http://delphi.about.com/cs/adptips2001/a/bltip0801_3.htm](http://delphi.about.com/cs/adptips2001/a/bltip0801_3.htm) 在 Windows 7 上运行。因为此代码仅适用于 windows XP 谢谢，早上好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:47:40.777

显示的代码将起作用，您只需要提升权限即可写入 HKEY_CLASSES_ROOT。以管理员身份运行或向您的应用程序添加适当的清单。

# android - 如何结合 db4o 和 android 意图

> ID：15662173
> 
> 赞同：0
> 
> 时间：2013-03-27T15:04:04.170
> 
> 标签：android, android-intent, db4o

我正在制作（我的第一个）android 应用程序，我对 db4o 的使用有点困惑。

我有一个活动，其中有一个 listView，并让用户选择一个对象。然后我通过一系列意图将此对象传递给其他活动（以填充其字段），然后返回主要活动。

但问题是，当我传递一个对象（它是可序列化的）时，我脱离意图的对象与我放入的对象不同。（不同的 id，当我使用调试检查时）。所有字段都是相同的，但它不是“相同”的对象。

因此，当我尝试将更新的对象存储在 db4o 中时，它无法识别它，并存储了一个双精度对象。

我想出了两种解决方法：

*   还传递一个“原始/未修改”对象，并使用它来获取 db4o 引用（通过 QBE），然后使用已更改对象的值更新该对象的字段。

*   使用全局变量，所以我不必使用意图（传递对象）

但在我看来，两者都很糟糕？什么可能是真正的解决方案，而不是解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:29:51.207

您可以尝试使用单例来存储您的对象和其他类（？）需要设置的字段，以便每个人都可以访问。我不清楚您在此解释中对意图的使用。

# sqlite - SQLite 数据库在会话之间不持久

> ID：15662175
> 
> 赞同：2
> 
> 时间：2013-03-27T15:04:20.547
> 
> 标签：sqlite, windows-phone-8

我使用 Windows Phone 8 应用程序

> C#/XAML SQLite v3.7.15 sqlite-net 1.0.7' & Peter Huene 的 sqlite-net-wp8 ( [https://github.com/peterhuene/sqlite-net-wp8](https://github.com/peterhuene/sqlite-net-wp8) )

从 VS 调试时，我能够创建一个表，将数据添加到表中并在 UI 中显示数据。但是，停止调试，然后从最后一个会话恢复数据就消失了。

我像这样创建连接

```
Connection = new SQLiteAsyncConnection("taskDB.db"); 
```

我不确定将数据库放在哪里？

我已经尝试了以下方法，因此可以确定数据库的放置位置，但会导致以下错误。我对此感到惊讶，因为我在多个示例中看到了此语句。

```
_dbPath = Path.Combine(ApplicationData.Current.LocalFolder.Path, "taskDB.db");
Connection = new SQLiteAsyncConnection(_dbPath); 
```

这会导致 SQLite.cs 本身出现此错误：

## 错误信息

```
SQLite.SQLiteException was unhandled by user code
HResult=-2146233088
Message=no such table: Tasks
Source=JustSQLite 
```

知道为什么数据库在调试会话之间没有持久化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T09:33:03.913

Emulator 实例会保留更改，直到它运行为止。关闭模拟器后，文件将不再存在，因为它依赖于模拟器实例

# c# - 使用带有 asp:Button 的 PostBackUrl 属性的 OnClick 事件

> ID：15662176
> 
> 赞同：2
> 
> 时间：2013-03-27T15:04:27.237
> 
> 标签：c#, javascript, asp.net, postback

我有这样的`asp:Button`控制；

```
<asp:Button ID="btnPayCC" CssClass="paymentButton" runat="server" Text="ONAYLA"  
OnClientClick="if(!doPostBack()) return false; frmMaster.target='_blank'" 
PostBackUrl="http://www.google.com" OnClick="btnPayCC_Click" /> 
```

而`doPostBack`javascript函数是；

```
function doPostBack() 
 {
   __doPostBack('<%= btnPayCC.ClientID %>', '');
   return true;
 }; 
```

当我单击按钮时，它会按我的意愿打开新页面（google.com），但不要回发到按钮控件的`OnClick`事件中。

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:10:45.850

我有同样的问题。我通过在按钮的 onClick 事件末尾添加 Response.Redirect("url") 并从按钮中删除 PostbackUrl 属性来解决它，以便使用自动回发到相同的 url。IE：

```
protected void Button_Click(object sender, EventArgs e)
{ 
   //do your button click events here
   Response.Redirect("~/url.aspx");
} 
```

和

```
<asp:Button ID="Button" runat="server" CausesValidation="false" OnClick="Button_Click"> 
```

# api - 无法通过 OAuth 使用 Magento REST API

> ID：15662180
> 
> 赞同：3
> 
> 时间：2013-03-27T15:04:47.297
> 
> 标签：api, magento, rest, oauth, magento-1.7

我正在使用 Magento 版本 1.7.0.2 并尝试通过 OAuth 集成来使用 Magento Rest API。我已经安装了 OAuth，以下是我放在 magento 根目录中的代码片段，我通过键入[http://xxxx:5009/oauth_customer.php在 Web 浏览器中运行它](http://x.x.x.x:5009/oauth_customer.php)

```
$callbackUrl = "http://x.x.x.x:5009/oauth_customer.php";
$temporaryCredentialsRequestUrl = "http://x.x.x.x:5009/oauth/initiate?oauth_callback=" . urlencode($callbackUrl);
$adminAuthorizationUrl = 'http://x.x.x.x:5009/oauth/authorize';
$accessTokenRequestUrl = "http://x.x.x.x:5009/oauth/token";
$apiUrl = "http://x.x.x.x:5009/api/rest";
$consumerKey = 'yourconsumerkey';
$consumerSecret = 'yourconsumersecret';

session_start();
if (!isset($_GET['oauth_token']) && isset($_SESSION['state']) && $_SESSION['state'] == 1)  {
    $_SESSION['state'] = 0;
}
try {
$authType = ($_SESSION['state'] == 2) ? OAUTH_AUTH_TYPE_AUTHORIZATION : OAUTH_AUTH_TYPE_URI;
$oauthClient = new OAuth($consumerKey, $consumerSecret, OAUTH_SIG_METHOD_HMACSHA1, $authType);
$oauthClient->enableDebug();

if (!isset($_GET['oauth_token']) && !$_SESSION['state']) {
    $requestToken = $oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
    $_SESSION['secret'] = $requestToken['oauth_token_secret'];
    $_SESSION['state'] = 1;
    header('Location: ' . $adminAuthorizationUrl . '?oauth_token=' . $requestToken['oauth_token']);
    exit;
} else if ($_SESSION['state'] == 1) {
    $oauthClient->setToken($_GET['oauth_token'], $_SESSION['secret']);
    $accessToken = $oauthClient->getAccessToken($accessTokenRequestUrl);
    $_SESSION['state'] = 2;
    $_SESSION['token'] = $accessToken['oauth_token'];
    $_SESSION['secret'] = $accessToken['oauth_token_secret'];
    header('Location: ' . $callbackUrl);
    exit;
} else {
    $oauthClient->setToken($_SESSION['token'], $_SESSION['secret']);
    $resourceUrl = "$apiUrl/products";
    $oauthClient->fetch($resourceUrl);
    $productsList = json_decode($oauthClient->getLastResponse());
    print_r($productsList);
}
} catch (OAuthException $e) {
   print_r($e);
} 
```

[http://xxxx:5009](http://x.x.x.x:5009)是 IP 地址，后跟 5009，其中 5009 是指定的端口号。当我们在浏览器中运行它时，我总是收到以下错误 - Invalid auth/bad request (got a 401, expected HTTP/1.1 20X or a redirect) oauth_problem=signature_invalid&debug_sbs=Bya6oE4ujTEEFLVL6Mm04PqTA4g=

我无法完成这项工作。

注意 - 我已经生成了消费者密钥和密钥。不确定如何创建具有客户访问 REST API 资源的用户凭据适合上述脚本。另外我想知道我们是否可以在任何非 magento 站点上以编程方式使用 magento apis 与 oAuth 集成，而无需用户每次都授予对应用程序的访问权限以生成请求令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:24:19.673

您必须先生成 oauth 令牌。按照这个[http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/](http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/)然后测试[http://www.magentocommerce。 com/api/rest/testing_rest_resources.html](http://www.magentocommerce.com/api/rest/testing_rest_resources.html)

如果您不想进行身份验证，您可以使用 curl 来获取所需的数据。[http://snipplr.com/view/44760/](http://snipplr.com/view/44760/)

在 url 中传递有效的 magento 资源 url，例如 www.yourwebsite.com/api/rest/products

# performance - Qt4/Qt5 QListWidget 慢吗？

> ID：15662192
> 
> 赞同：2
> 
> 时间：2013-03-27T15:05:48.427
> 
> 标签：performance, qt

我正计划创建一个需要在 QListWidget（或者可能是 QListView/QListModel）中接收/显示大量数据的应用程序（我对替代方案持开放态度）。QListWidget 每秒将接收大量项目（+100）。如果/当使用滚动条时，我将需要显示所有这些项目，并且我想达到不迟钝的效果。

如果您使用过 Procmon（仅限 Windows），那么这就是我所说的一个很好的例子。

我的问题是：Qt 可以处理这么多数据而不会很慢吗？我应该考虑什么实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:41:53.737

我建议创建一个小型原型并尝试性能是否对您来说足够好。我会说 QListView 对你来说可能足够快。实际上，当我使用类似的日志视图时，我发现 QTableView 比 QListView 快一点。

但是您还应该考虑列表视图是否是最好的用户界面。当您在列表中有 100 万个项目时（一个半小时后），滚动条将毫无用处。除了单击向上/向下箭头之外，您不能再将其用于细粒度滚动。而当你每秒获得 200 个新项目时，不断绘制这些新线并不是很有用，用户无论如何也无法阅读它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T17:11:47.257

## 备选方案 1

要显示日志，您还可以使用`QTextDocument`或`QTextEdit`。实现更直接，而且开销可能更少。

如果您将它与 混合`QSyntaxHighlighter`，那么您可以拥有一个非常易读且易于使用的日志流。

## 备选方案 2

您还可以对数据进行某种分页或分组，您可以轻松地跳到开头或最近的数据。

## 备选方案 3

您可以考虑的另一个想法是，大多数人不想尝试一次查看这么多数据。您可以汇总呼叫，并将它们汇总。

例如：

```
State 1 abcd
State 1 abcd
State 1 abcd
State 1 abcd
State 2 efg 
```

可以表示为

```
State 1 abcd (x4)
State 2 efg (x1) 
```

## 备选方案 4

或者您可以使用图形方法。使用类似的东西`Qwt`或`QGraphicsView`以对您正在显示的大量数据有意义的方式绘制数据流。

## 备选方案 5

最后，另一种可能被证明有用的方法是将其写入硬盘驱动器。如果用户想查看当前的日志文件，则有一个按钮。

希望有帮助。

# ios - 未找到有效的配置文件

> ID：15662195
> 
> 赞同：1
> 
> 时间：2013-03-27T15:05:59.143
> 
> 标签：ios, xcode, instruments, provisioning-profile

每当我尝试使用 Xcode Instruments 测试我当前的应用程序时，都会弹出两条相同的消息：

![在此处输入图像描述](../Images/5635d00061b0b56bb463320ddcb93d7c.png)

这只发生在我使用仪器时。该应用程序的先前版本已被应用程序商店接受，我只是将另一个版本发送给 Apple 进行审查，没有任何关于配置文件的投诉。

这不是什么大问题，因为我可以忽略警报并使用 Instruments，但这很烦人。

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:24:55.483

这是因为使用 Instruments 的分析需要在发布配置中使用 Ad-hoc 配置文件完成。您看到该消息可能是因为您尝试用于 Instruments 的设备不在您正在使用的配置文件中。

因此，您必须进入 iOS 开发者门户，将您的设备添加到配置文件中，然后重新安装配置文件。那么该消息不应该再次出现！

# security - 将 UsernamePasswordForm 身份验证与自定义 AuthenticationProvider 一起使用

> ID：15662196
> 
> 赞同：1
> 
> 时间：2013-03-27T15:05:59.913
> 
> 标签：security, authentication, symfony

我正在为 Symfony2 的自定义身份验证机制而苦苦挣扎。

**我想要做什么：** 我需要修改基于常规 UsernamePasswordForm 身份验证的行为。唯一需要的修改是，不根据数据库检查凭据，而是检查一些自定义的 unix auth 守护程序。用户本身仍然位于数据库中。

**我做了什么：我尝试了一个基于这个**[Symfony 食谱条目](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html) 的完整的自定义身份验证提供程序，并且大多数部分只是扩展不同的 UsernamePassword 类，但它还没有成功。我在服务配置中设置 AuthenticationListener 时遇到了一些问题，因为它`UsernamePasswordFormAuthenticationListener`有很多必需的参数。目前我不确定它最终是否会成功，因为我们的数据库设置存在一些问题。

**我需要什么：** 有没有更简单的方法来修改默认登录表单而无需完整的 AuthenticationProvider？恕我直言，在默认行为中进行一些自定义修改是一个很常见的问题。

会对任何想法或提示感到高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:09:29.803

我自己没有尝试过，但是您应该可以通过设置参数来插入自己的 AuthenticationProvider：

```
 security.authentication.provider.dao.class:
   ..Security\Core\Authentication\Provider\MyDaoAuthenticationProvider 
```

您的提供者将扩展 Dao 并覆盖 checkAuthentication。

同样，我实际上并没有这样做，而且安全系统非常敏感，所以它可能会也可能不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:23:54.400

[回答我自己的问题：由于这篇博客文章](http://blog.vandenbrand.org/2012/06/19/symfony2-authentication-provider-authenticate-against-webservice/)显示了一个解决方案，我终于设法解决了我的问题。基本思想是**扩展**默认表单登录身份验证并“窃取”其侦听器。这样您就可以重用大部分现有代码。关键部分是 an`AuthenticationProvider`和 a的创建和配置`SecurityFactory`。并且不要错过使用您自己的提供程序密钥而不是`form_login`在`security.yml`.

在博客文章中，作者创建了自己的`UserProvider`，但它也仅使用默认数据库之一。

# ruby - 显示使用特定标签失败的测试数量（Ruby，Cucumber，在 Jenkins 中）

> ID：15662198
> 
> 赞同：2
> 
> 时间：2013-03-27T15:06:04.177
> 
> 标签：ruby, jenkins, cucumber

我正在考虑将@high_priority 和@low_priority 添加到我们测试套件中的某些测试中，以便找出有多少高优先级（风险）测试失败。理想情况下，我希望在 Jenkins 中的测试作业旁边有一列显示

> 1/100 高优先级和 8/60 低优先级测试失败。

尽管如有必要，我对控制台输出中的类似输出感到满意。

目前 Jenkins 作业正在运行命令行执行，例如：

```
cucumber --tags @AU_smoke ENVIRONMENT=beta --format html --out 'C:\git\testingworkspace\Reports\smoke_BETA_test_report.html'  --format pretty 
```

编辑：添加额外的作业并不是真正的解决方案，我们有大量的作业运行所有测试的子集，因此为高优先级和低优先级添加额外的作业需要我们拥有的作业数量增加三倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T13:24:21.677

我已经决定将描述设置器插件与额外的列插件一起使用。这允许我将构建描述添加为我的视图和我的代码中的列

```
After do |scenario|
  if scenario.status.to_s=="passed"
    $passed=$passed+1
  elsif scenario.status.to_s=="failed"
    $failed=$failed+1
    puts "FAILED!"
  elsif scenario.status.to_s=="undefined"
    $undefined=$undefined+1
  end
  $scenario_count=$scenario_count+1
  if scenario.failed?
    Dir::mkdir('screenshots') if not File.directory?('screenshots')
    screenshot = "./screenshots/FAILED_#{scenario.name.gsub(' ','_').gsub(/[^0-9A-    Za-z_]/, '')}.png"
    @browser.driver.save_screenshot(screenshot)
    puts "Screenshot created: #{screenshot}"
    embed screenshot, 'image/png'
    #@browser.close
  end
  #@browser.close
end

at_exit do
  end_time=Time.now

  elapsed_time=end_time.to_i - $start_time.to_i
  puts "\#description#scenarios total: #{$scenario_count}, passed: #{$passed}, failed:     #{$failed}, known bug fails: #{$known_bug_failures}, undefined: #{$undefined}.#description#"
... 
```

然后在描述设置器插件中我使用正则表达式

```
/#description#(.+)#description#/ 
```

并使用第一个匹配组作为构建描述名称。这也让我可以查看作业的构建历史，并一目了然地了解过去几周有多少测试以及通过了多少。

# php - 显示最接近当前日期和时间的结果（MySQL 和 PHP）

> ID：15662205
> 
> 赞同：1
> 
> 时间：2013-03-27T15:06:16.790
> 
> 标签：php, mysql, date

我正在尝试进行查询，但经过数小时的尝试后，我似乎无法做到正确。我正在尝试做的是从数据库中显示最接近当前日期和时间并且在当前日期和时间之后的一件事。

我的专栏看起来像这样：

```
 date         time
1364399654     15:00
1364684400     16:00
1367272800     12:00 
```

我的 PHP 看起来像这样：

```
$timestamp_now = strtotime(date('d-m-Y')); //Creates a timestamp of the currect date
$time_now = date('H:i');
$sql = mysql_query('SELECT * FROM table_name ORDER BY date ASC, time ASC (WHERE date > '.$timestamp_now.') AND (time > "'.$time_now.'") LIMIT 1') or die(mysql_error());
$data = mysql_fetch_array($sql); 
```

但是，这不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:13:20.257

我会放弃使用 PHP 日期/时间方法并依靠 MySQL 提供看起来像的查询

```
SELECT * FROM table_name 
WHERE date > CURRENT_DATE
OR (
    date = CURRENT_DATE
    AND 
    time > CURRENT_TIME
)
ORDER BY date ASC, time ASC LIMIT 1 
```

OR 确保它获得正确的记录，否则 TIME 部分将阻止，即如果当前时间为 06:00，则从第二天的 03:00 出现结果

我看到您在那里使用时间戳值，因此您仍然可以始终传入 PHP 日期数字来代替 CURRENT_DATE。这将给出一个最终脚本

```
$timestamp_now = strtotime(date('d-m-Y')); //Creates a timestamp of the currect date
$sql = mysql_query('SELECT * FROM table_name 
                    WHERE date > '.$timestamp_now.'
                    OR (
                        date = '.$timestamp_now.'
                        AND 
                        time > CURRENT_TIME
                    )
                    ORDER BY date ASC, time ASC LIMIT 1') or die(mysql_error());
$data = mysql_fetch_array($sql); 
```

如果可能，我建议考虑更改数据库以将其存储为 MySQL DATETIME 字段，然后您可以将此查询更改为 simple `WHERE datetime > NOW()`，但这完全取决于您。只是一直发现 MySQL 日期处理比 PHP 更合乎逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:16:03.133

您应该再使用一项测试：

*   `DATE(date) > CURDATE()`: 如果是明天或更晚
*   `DATE(date) = CURDATE() AND time > TIME(NOW())`: 是今天，但以后

完整代码：

```
$sql = mysql_query('SELECT * 
                    FROM table_name 
                    WHERE DATE(date) > CURDATE()
                    OR (DATE(date) = CURDATE() AND time > TIME(NOW()))
                    ORDER BY date ASC, time ASC 
                    LIMIT 1'
                  ) or die(mysql_error());
$data = mysql_fetch_array($sql); 
```

请注意，您在您的`date`领域中使用时间戳。时间戳包括日期**和**时间，所以也许你可以使用这个请求：

```
SELECT * 
FROM table_name 
WHERE date > NOW()
ORDER BY date ASC
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:11:24.810

我相信您需要在 ORDER BY 之前使用 WHERE 构建 SQL

```
SELECT * FROM table WHERE (date>$now) and (time>$now) ORDER BY date,time LIMIT 1 
```

# c# - 具有多个操作的进度条

> ID：15662206
> 
> 赞同：0
> 
> 时间：2013-03-27T15:06:19.610
> 
> 标签：c#, visual-studio-2008, stored-procedures, progress-bar

我设计了一个进度条，我想在加载网格时使用它（我从存储过程加载 datagridview）。然而，调用存储过程的进程有几个不同的调用项（见下文）。我很早就让进度条工作了（它不在下面的代码中，因此我在这里），但我的问题是这个。

当我正在跟踪的进度是多种不同的方法时，进度条能否正常工作。“LoadGrid”方法是我真正想要跟踪进度的方法，因为它是存储过程的处理和datagridview 的加载（即耗时的过程）。我想我更多的是问什么是正确的技术而不是使用的确切代码，但我对进度条的了解有限。我知道我可以只使用一个显示“忙碌”的随机图标，但如果可以合法地做，我宁愿有进度条。

```
public void btnLoadGrid_Click(object sender, EventArgs e)
{
    frmProgress progressForm = new frmProgress();

    try
    {
        progressForm.MdiParent = this;
        progressForm.Text = "Importing DSC_0";
        progressForm.Top = this.Height / 3 - progressForm.Height / 2;
        progressForm.Left = this.Width / 2 - progressForm.Width / 2;
        //ofd1.Title = "Import legacy DSC balances";
        //this.ofd1.ShowDialog(this);

        //Need code to empty grid before loading
        grd1.Rows.Clear();
        grd1.Refresh();

        //Load grid based on new selections
        GetUserSelections();
        GetUserRelatedInfo();
        LoadLabelForecastType();
        LoadGrid();
    }
    catch (Exception ex)
    {
        util.LogError(ex);
        MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    }
    Cursor.Current = Cursors.Default;
    progressForm.Close();         

} 
```

还有进度条本身：

```
namespace AmortClient
{
    public partial class frmProgress : Form
    {
        public frmProgress()
        {
            InitializeComponent();
        }

        public ProgressBar Pbar
        {
            get { return this.pb1; }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:16:57.723

我们有一个使用后台线程和事件回调的进度条。它还使用“params”参数和委托，以便可以将其泛化到代码中的任何进程中。

这里有一些小片段......

```
private delegate T Method(ProgressBarCallBackInterface callingform, params object[] argsobject);

private void frmProgress_Load(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(FormTitle))
    {
        lblSampleTitle.Text = FormTitle;
        this.Text = FormTitle;
    }
    else
    {
        lblSampleTitle.Text = string.Empty;
        this.Text = string.Empty;
    }

    bgWorkerThread.RunWorkerAsync();
}

private void bgWorkerThread_DoWork(object sender, DoWorkEventArgs e)
{
    Delegate method = Delegate.CreateDelegate(typeof(Method), instanceOfClassHavingTheFunction, FullFunctionName, true, true);
    if (method != null)
    {
        ReturnValue = ((Method)method)(this, Parameters);
    }
}

public void ReportProgress(int percentage, string statusText)
{
    lblProgress.SetPropertyThreadSafe(() => lblProgress.Text, statusText);
    bgWorkerThread.ReportProgress(percentage);
} 
```

然后在使用它的任何代码中，我都可以调用

```
if (progressBar != null)
    progressBar .ReportProgress(6, "Verifying Journal Integrity"); 
```

我的代码稍微复杂一些，因为`T`cannot be `void`，所以我不得不添加一些开关和辅助方法以允许它在有`void`返回的进程上运行。但基本形状就在那里。

以下是进度条的入口点示例：

```
//note: FunctionName, Class Having Function, Params....
frmProgress _frmProgress = new frmProgress("UpdateRigX", RigFacade.Instance, rigX, dRigVersion, ModuleVersion);
_frmProgress.FormTitle = "Updating RigX...";
_frmProgress.ShowDialog(); 
```

# java - 是什么导致此错误消息？

> ID：15662208
> 
> 赞同：0
> 
> 时间：2013-03-27T15:06:23.317
> 
> 标签：java

这是我的代码，注释总结了程序应该做什么。

```
// This program will read in from a file a number that tells how many
// wages and hours worked the file contain. And then calculates the
// salary
import java.util.*;
import java.text.*;

public class Lab10
{
        public static void main(String[] args)
        {
          // Declare variables
          Scanner scan = new Scanner(System.in);
          DecimalFormat fmt = new DecimalFormat("0.00");
          String name;
          double wages;
          double hoursWorked;
          double salary;
          int numCalculate;
          int EmployeeNumber ;
          int i = 0 ;

          // Read in how many employees the file contains
          EmployeeNumber =scan.nextInt() ;

          // for loop that reads and records the name hoursworked and wages , and prints out the information
          for ( ; i < EmployeeNumber +1; i ++ )
          {
           name = scan.next () ;
           wages = scan.nextDouble() ;
           hoursWorked = scan.nextDouble() ;

           salary = calculateSalary(wages,hoursWorked) ;
           System.out.println(name +" worked " +fmt.format(hoursWorked) + " with a wage of " + "$" +fmt.format(wages) + " and got paid $" +fmt.format(salary) );
          }
          // End of control loop

         } // End of main method

         public static double calculateSalary(double wages, double hoursWorked)
         {
//Declare constants
          final int OVERTIME_BREAK = 40;
          final double OVERTIME_MULTIPLE = 1.5;
          double salary = 0 ;

          //Calculate salary

          if(hoursWorked > OVERTIME_BREAK)
          {
          salary = (hoursWorked - OVERTIME_BREAK) * wages * OVERTIME_MULTIPLE + hoursWorked * wages;
          }
          else
          {
            salary = hoursWorked * wages;
          }
          // Return the salary
           return salary ;

         } // end of calculateSalary method
} // End of Lab10 class 
```

使用此输入文件时：

```
3
Smith 12.50 25
Jones 25.89 60
Brown 7.86 19.89 
```

我得到了我想要的输出，但最后附加了这条消息：

```
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:855)
    at java.util.Scanner.next(Scanner.java:1364)
    at Lab10.main(Lab10.java:32) 
```

有人可以告诉我这意味着什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:11:30.307

你循环一个太多次了。

您有 3 名员工，因此应该像这样循环：

```
for ( ; i < EmployeeNumber; i ++ )
{
    name = scan.next () ;
    ...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:32:14.710

Java 的数组索引从 0 开始，所以如果你有 3 个元素，它们存储在 0、1 和 2 处。正如上面在你的 for 循环中所说，如果你只放 i < EmplyeeNumber 就足够了，而不是 EmployeeNumber + 1。

# angularjs - 使用 AngularJS 和动态字段进行表单验证

> ID：15662212
> 
> 赞同：2
> 
> 时间：2013-03-27T15:06:27.490
> 
> 标签：angularjs, validation

我遇到了关于 AngularJS 表单验证的奇怪问题。如果动态添加的控件（例如文本框）需要验证并从表单中删除，如果删除的控件无效，则表单将保持无效。

最后一句话有点混乱。[通过此 plnkr 预览](http://embed.plnkr.co/qvCJZx44WkcTHiQjsnH7)查看它的实际效果（或查看[plnkr 编辑器](http://plnkr.co/edit/qvCJZx44WkcTHiQjsnH7)）。

我检查了[FormController API](http://docs.angularjs.org/api/ng.directive%3aform.FormController)。根据文档，没有任何方法可以引发任何形式的表单验证状态刷新，尽管 AngularJS 源代码定义了 FormController 中的`$removeControl()`和等方法。`$setValidity()`

是否有规避验证问题的标准方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:20:55.680

我以前遇到过这个问题，有关更多详细信息，请参阅此答案：[https ://stackoverflow.com/a/15192773/317180](https://stackoverflow.com/a/15192773/317180)

显然这是一个活跃的错误。

一种解决方法是提供一个隐藏计数器，当元素更改时该计数器会增加，这会强制表单重新验证：

在模板中：

```
<input type="hidden" ng-bind="abc" /> 
```

在控制器中：

```
$scope.remove = function(position) {
    $scope.items.splice(position, 1);
    $scope.abc += 1;
} 
```

# nlp - 情感分析（SentiWordNet）——判断一个句子的上下文

> ID：15662213
> 
> 赞同：1
> 
> 时间：2013-03-27T15:06:28.757
> 
> 标签：nlp, stanford-nlp, wordnet, sentiment-analysis

我试图在以下步骤中找出一个**句子是肯定的还是否定的：**

1.)使用斯坦福 NLP 解析器从句子中检索*词性（动词、名词、形容词等）。*

2.) 使用*SentiWordNet*找到与每个词性相关的正值和负值。

3.) 将得到的正值和负值相加来计算与句子相关的*净正值*和*净负值。*

但问题是，SentiWordNet 根据不同的感觉/上下文返回一个正/负值列表。是否可以将特定句子与词性一起传递给 SentiWordNet 解析器，以便它可以自动判断语义/上下文并**仅返回一**对正负值？

或者这个问题还有其他替代解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-11T18:16:33.477

[SentoWordNet 演示代码](http://sentiwordnet.isti.cnr.it/code/SentiWordNetDemoCode.java) 这可能会对您有所帮助。

```
//    Copyright 2013 Petter Törnberg
//
//    This demo code has been kindly provided by Petter Törnberg <pettert@chalmers.se>
//    for the SentiWordNet website.
//
//    This program is free software: you can redistribute it and/or modify
//    it under the terms of the GNU General Public License as published by
//    the Free Software Foundation, either version 3 of the License, or
//    (at your option) any later version.
//
//    This program is distributed in the hope that it will be useful,
//    but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU General Public License for more details.
//
//    You should have received a copy of the GNU General Public License
//    along with this program.  If not, see <http://www.gnu.org/licenses/>.

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

public class SentiWordNetDemoCode {

    private Map<String, Double> dictionary;

    public SentiWordNetDemoCode(String pathToSWN) throws IOException {
        // This is our main dictionary representation
        dictionary = new HashMap<String, Double>();

        // From String to list of doubles.
        HashMap<String, HashMap<Integer, Double>> tempDictionary = new HashMap<String, HashMap<Integer, Double>>();

        BufferedReader csv = null;
        try {
            csv = new BufferedReader(new FileReader(pathToSWN));
            int lineNumber = 0;

            String line;
            while ((line = csv.readLine()) != null) {
                lineNumber++;

                // If it's a comment, skip this line.
                if (!line.trim().startsWith("#")) {
                    // We use tab separation
                    String[] data = line.split("\t");
                    String wordTypeMarker = data[0];

                    // Example line:
                    // POS ID PosS NegS SynsetTerm#sensenumber Desc
                    // a 00009618 0.5 0.25 spartan#4 austere#3 ascetical#2
                    // ascetic#2 practicing great self-denial;...etc

                    // Is it a valid line? Otherwise, through exception.
                    if (data.length != 6) {
                        throw new IllegalArgumentException(
                                "Incorrect tabulation format in file, line: "
                                        + lineNumber);
                    }

                    // Calculate synset score as score = PosS - NegS
                    Double synsetScore = Double.parseDouble(data[2])
                            - Double.parseDouble(data[3]);

                    // Get all Synset terms
                    String[] synTermsSplit = data[4].split(" ");

                    // Go through all terms of current synset.
                    for (String synTermSplit : synTermsSplit) {
                        // Get synterm and synterm rank
                        String[] synTermAndRank = synTermSplit.split("#");
                        String synTerm = synTermAndRank[0] + "#"
                                + wordTypeMarker;

                        int synTermRank = Integer.parseInt(synTermAndRank[1]);
                        // What we get here is a map of the type:
                        // term -> {score of synset#1, score of synset#2...}

                        // Add map to term if it doesn't have one
                        if (!tempDictionary.containsKey(synTerm)) {
                            tempDictionary.put(synTerm,
                                    new HashMap<Integer, Double>());
                        }

                        // Add synset link to synterm
                        tempDictionary.get(synTerm).put(synTermRank,
                                synsetScore);
                    }
                }
            }

            // Go through all the terms.
            for (Map.Entry<String, HashMap<Integer, Double>> entry : tempDictionary
                    .entrySet()) {
                String word = entry.getKey();
                Map<Integer, Double> synSetScoreMap = entry.getValue();

                // Calculate weighted average. Weigh the synsets according to
                // their rank.
                // Score= 1/2*first + 1/3*second + 1/4*third ..... etc.
                // Sum = 1/1 + 1/2 + 1/3 ...
                double score = 0.0;
                double sum = 0.0;
                for (Map.Entry<Integer, Double> setScore : synSetScoreMap
                        .entrySet()) {
                    score += setScore.getValue() / (double) setScore.getKey();
                    sum += 1.0 / (double) setScore.getKey();
                }
                score /= sum;

                dictionary.put(word, score);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (csv != null) {
                csv.close();
            }
        }
    }

    public double extract(String word, String pos) {
        return dictionary.get(word + "#" + pos);
    }

    public static void main(String [] args) throws IOException {
        if(args.length<1) {
            System.err.println("Usage: java SentiWordNetDemoCode <pathToSentiWordNetFile>");
            return;
        }

        String pathToSWN = args[0];
        SentiWordNetDemoCode sentiwordnet = new SentiWordNetDemoCode(pathToSWN);

        System.out.println("good#a "+sentiwordnet.extract("good", "a"));
        System.out.println("bad#a "+sentiwordnet.extract("bad", "a"));
        System.out.println("blue#a "+sentiwordnet.extract("blue", "a"));
        System.out.println("blue#n "+sentiwordnet.extract("blue", "n"));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T11:22:29.753

我们可以将 pos 传递给 sentiwordnet 解析器。下载模式python模块

```
from pattern.en import wordnet

print wordnet.synsets("kill",pos="VB")[0].weight 
```

wordnet.synsets 返回同义词列表，我们从中选择第一个项目输出将是（极性，主观性）的元组希望这有帮助......

# c# - .NET XML 文档文件是否需要部署到生产环境？

> ID：15662214
> 
> 赞同：0
> 
> 时间：2013-03-27T15:06:34.877
> 
> 标签：c#, .net

我认为将 PDB 文件部署到生产环境是有好处的，它似乎会影响错误报告。

现在，将大型 XML 文档文件部署到生产服务器有什么好处（像 foo.xml 这样的文件出现在 foo.pdb 和 foo.dll 旁边）

它们正在消耗 FTP 时间，如果它们没有提供任何好处，我想将它们从部署包中踢出。

（当然，它们仍然存在于源代码控制中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:08:14.530

简而言之，没有。

它们主要由开发人员使用（想想智能感知......）。当其他开发人员将其用作库时，通常应与程序集一起部署。

我也会避免将它们添加到源代码管理中。（同样适用于 dll 和 pdb）它们是在编译时从源代码生成的，因此不需要它们处于源代码控制中。

# android - 不同风格的标签（ActionBarSherlock）

> ID：15662215
> 
> 赞同：0
> 
> 时间：2013-03-27T15:06:36.867
> 
> 标签：android, android-layout, tabs, styles, actionbarsherlock

我想创建两个具有不同样式的选项卡。我必须做什么才能得到这样的结果，比如例子？

例子：

![在此处输入图像描述](../Images/49fb695ca9df84214d68b26f76019128.png)

而我现在拥有的：

![在此处输入图像描述](../Images/0a4718cad9e6d54893593361033f4e93.png)

**标签活动**

```
public class TabsActivity extends SherlockFragmentActivity {

    private TabsAdapter mTabsAdapter;
    private ActionBar mActionBar;
    private TabHost tabHost;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.l_maintab);

        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            BitmapDrawable bg = (BitmapDrawable)
            getResources().getDrawable(R.drawable.bg_striped);         
            getSupportActionBar().setBackgroundDrawable(bg);

            BitmapDrawable bgSplit = (BitmapDrawable) 
            getResources().getDrawable(R.drawable.bg_striped_split_img);
            bgSplit.setTileModeXY(Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);
            getSupportActionBar().setSplitBackgroundDrawable(bgSplit);
        }

        final ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayOptions(0, ActionBar.DISPLAY_USE_LOGO);
        bar.setDisplayShowTitleEnabled(true);
        bar.setDisplayShowHomeEnabled(true);

        mTabsAdapter = new TabsAdapter(this, (ViewPager) findViewById(R.id.pager));

        ActionBar.Tab events_tab = bar.newTab().setText("Events");
        ActionBar.Tab volo_tab = bar.newTab().setText("Volunteers");

        mTabsAdapter.addTab(events_tab, EventFragment.class, null);
        mTabsAdapter.addTab(volo_tab, UserFragment.class, null);

        bar.selectTab(bar.getTabAt(tabnum));
    } 
```

**l_maintab.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
       />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:00:33.807

这由您分配给选项卡的背景控制（通常通过样式和主题）。为选项卡创建样式：

```
<style name="MyTabStyle" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/my_tab_indicator</item>
</style> 
```

我扩展了 ActionBarSherlock 样式，以便唯一相关的覆盖是背景属性。在您的主题定义中，将这些添加到您的主题中：

```
<item name="actionBarTabStyle">@style/MyTabStyle</item>
<item name="android:actionBarTabStyle">@style/MyTabStyle</item> 
```

然后，您需要做的就是为每个状态制作一个可绘制资源，并为您的背景包含一个状态列表可绘制资源。

编辑：如果您有两种不同的标签样式：

```
<style name="MyTabStyle" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/my_tab_indicator</item>
</style>

<style name="MyOtherTabStyle" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/my_other_tab_indicator</item>
</style> 
```

制作您的应用主题，然后制作第二个扩展它：

```
<style name="MyAppTheme" parent="Theme.Sherlock...">
    <!-- other theme attributes -->
    <item name="actionBarTabStyle">@style/MyTabStyle</item>
    <item name="android:actionBarTabStyle">@style/MyTabStyle</item>
</style>

<style name="MyAppTheme.Alternate">
    <!-- Override just the tab style -->
    <item name="actionBarTabStyle">@style/MyOtherTabStyle</item>
    <item name="android:actionBarTabStyle">@style/MyOtherTabStyle</item>
</style> 
```

在您的清单中，`android:theme="@style/MyAppTheme"`在`<application>`元素中设置。对于需要第二个选项卡样式的活动，请`android:theme="@style/MyAppTheme.Alternate"`在`<activity>`元素中使用。

# python - 如何调整 GtkGrid 单元格的大小？

> ID：15662217
> 
> 赞同：6
> 
> 时间：2013-03-27T15:06:43.720
> 
> 标签：python, user-interface, gtk3, pygobject

我正在用**Python** + **Gtk3**编写一个小应用程序。我使用的是`GtkGrid`一列两行的。

在第一行中，我放了： a `GtkScrolledWindow`，其中 a`TreeView`有两列。

在第二行中，我放了： a `ButtonBox`，在其中 a `GtkButton`， a`ComboBox`和 another `GtkButton`。

**问题是：**第二行（底部有按钮）在按钮上方和下方有太多空间，那么我该如何设置该单元格的高度以匹配按钮的高度，而不会“浪费”上方的空间和下面？

代码在[这里](https://dl.dropbox.com/u/10411539/Set-Wall-Gnome3.py)，这是我的程序的屏幕截图：

![在此处输入图像描述](../Images/cbffeb962b9b960ee198b791244a8f5d.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T19:52:54.507

您正在为列和行创建具有均匀间距的 GtkGrid；这意味着您的列和行将接收相同的大小，这是所有列和行之间的最大自然大小。

创建网格时，删除该`row_homogeneous=True`属性。如果你想让 TreeView 展开，你应该在它上面设置`hexpand`和`vexpand`属性`True`，即：

```
 # creamos una grilla
    self.grid = Gtk.Grid(column_homogeneous=True,
                         column_spacing=10,
                         row_spacing=10)

    [...]

    # creamos el TreeView
    self.treeview = Gtk.TreeView(model=self.liststore)
    # set the TreeView to expand both horizontally and vertically
    self.treeview.set_hexpand(True)
    self.treeview.set_vexpand(True) 
```

GtkGrid 是一个容器和布局管理器，它尊重 GtkWidget 上的水平和垂直扩展和对齐标志，而不是像 GtkBox 或 GtkTable 那样具有打包属性。

# java - HttpUrlConnection PUT 方法不起作用

> ID：15662223
> 
> 赞同：2
> 
> 时间：2013-03-27T15:06:51.033
> 
> 标签：java, web-services, rest, httpurlconnection, restful-architecture

我已经使用**AppacheHttpClient**完成了以下客户端应用程序来使用 REST 服务（一种 PUT 方法） （它正在工作）：

```
 public class UserLogin {

    private static final String URL = "http://192.168.1.236:8080/LULServices/webresources";

    public static void main(String[] args) throws Exception {

    final DefaultHttpClient httpclient = new DefaultHttpClient();

    try {
            httpclient.getCredentialsProvider().setCredentials(
                new AuthScope("localhost", 8080),
                new UsernamePasswordCredentials("xxxxx", "xxxxx"));

    HttpPut httpPut = new HttpPut(URL + "/services.users/login");
    HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);

    httpPut.addHeader("Content-type", "multipart/form-data");

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("login", "xxxxx"));
    nameValuePairs.add(new BasicNameValuePair("password", "xxxxx"));

    httpPut.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = httpclient.execute(httpPut);

    try {
            HttpEntity entity = response.getEntity();
            String putResponse = EntityUtils.toString(entity);
            System.out.println("Login successful! Secret id: " + putResponse);
            EntityUtils.consume(entity);

        } finally {
            httpPut.releaseConnection();
        }

        } finally {
            httpclient.getConnectionManager().shutdown();
        }
    }
} 
```

现在我想做同样的事情，使用**HttpUrlConnection**，但不工作：

```
 public class PUTmethod {

    public static void main(String[] args) throws Exception
    {
        HttpURLConnection urlConnection = null;

    try {
        String webPage = "http://localhost:8080/LULServices/webresources/services.users/login";

                Authenticator myAuth = new Authenticator() 
                {
                  final static String USERNAME = "xxxxx";
                  final static String PASSWORD = "xxxxx";

                  @Override
                  protected PasswordAuthentication getPasswordAuthentication()
                  {
                    return new PasswordAuthentication(USERNAME, PASSWORD.toCharArray());
                  }
                };

                Authenticator.setDefault(myAuth);

        URL urlToRequest = new URL(webPage);
        urlConnection = (HttpURLConnection) urlToRequest.openConnection();

                urlConnection.setReadTimeout(10000);
                urlConnection.setConnectTimeout(15000);
                urlConnection.setRequestMethod("PUT");
                urlConnection.setRequestProperty("Content-type", "multipart/form-data");
                urlConnection.setDoOutput(true);
                urlConnection.setDoInput(true);

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("login", "xxxxx"));
                nameValuePairs.add(new BasicNameValuePair("password", "xxxxx"));

                OutputStream out = urlConnection.getOutputStream();
                BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(out, "UTF-8"));
                writer.write(getQuery(nameValuePairs));
                writer.close();
                out.close();

                urlConnection.connect();

    } catch (MalformedURLException e) {
            e.printStackTrace();
    } catch (IOException e) {
            System.out.println("Failure processing URL");
            e.printStackTrace();
    } catch (Exception e) {
            e.printStackTrace();
    }
        finally {
        if (urlConnection != null) {
            urlConnection.disconnect();
        }
    }
    }
public static String getQuery(List<NameValuePair> params) throws UnsupportedEncodingException
    {
        StringBuilder result = new StringBuilder();
        boolean first = true;

        for (NameValuePair pair : params)
        {
            if (first)
                first = false;
            else
                result.append("&");

            result.append(URLEncoder.encode(pair.getName(), "UTF-8"));
            result.append("=");
            result.append(URLEncoder.encode(pair.getValue(), "UTF-8"));
        }
        System.out.println(result.toString());
        return result.toString();
    }        
} 
```

不工作是指没有出现错误，但 PUT 不起作用，就像我使用 ApacheHttpClient 解决方案时一样。我的代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:16:38.393

尝试调用`urlConnection.getResponseCode();`after`urlConnection.connect();`以强制刷新底层输出流并读取输入流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T14:22:56.290

尝试设置

```
urlConnection.setRequestProperty("Content-type", "application/x-www-form-urlencoded"); 
```

后

```
urlConnection.setRequestMethod("PUT"); 
```

# plsql - 运行 PL/SQL 程序时如何在输出中禁用旧值和新值选项

> ID：15662224
> 
> 赞同：13
> 
> 时间：2013-03-27T15:06:51.887
> 
> 标签：plsql, sqlplus

我是 pl/sql 的新手，所以这可能是一个愚蠢的问题，我创建了一个简单的 PL/SQL 程序：

```
DECLARE
        inputData VARCHAR2(1024);
BEGIN
        inputData :='&&inputData' ;
        Dbms_Output.put_line('Value entered is:' || inputData);
END;
/ 
```

当我运行这个程序时，我得到以下输出：

```
Enter value for inputdata: check
old   4:         inputData :='&&inputData' ;
new   4:         inputData :='check' ;
Value entered is:check

PL/SQL procedure successfully completed. 
```

当显示输出时，我们如何摆脱旧值和新值的行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-27T15:09:10.940

只需设置它（参见[sqlplus 用户指南](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12040.htm)）：

```
set verify off 
```

在脚本的顶部。

```
SQL> set verify off
SQL> DECLARE
  2          inputData VARCHAR2(1024);
  3  BEGIN
  4          inputData :='&&inputData' ;
  5          Dbms_Output.put_line('Value entered is:' || inputData);
  6  END;
  7  /
Enter value for inputdata: sdf

PL/SQL procedure successfully completed.

SQL> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-26T07:38:00.560

要禁用 :old 和 :new 输出，请使用：

```
SET VERIFY OFF; 
```

要禁用更新和其他输出：

```
SET FEEDBACK OFF; 
```

# iphone - HPple 无法识别标签

> ID：15662225
> 
> 赞同：1
> 
> 时间：2013-03-27T15:06:54.143
> 
> 标签：iphone, ios, objective-c, hpple

您好，我使用这是我当前的路径

```
NSString *XpathQ2 = @"//table[@class='grid']/tbody"; 
```

当我尝试将其更改为

```
NSString *XpathQ2 = @"//table[@class='grid']/tbody/tr"; 
```

或者

```
NSString *XpathQ2 = @"//table[@class='grid']/tbody/tr[4]"; 
```

代码输出 Nodes 为 nil

# php - 对 Symfony 上传文档感到困惑

> ID：15662227
> 
> 赞同：2
> 
> 时间：2013-03-27T15:06:57.020
> 
> 标签：php, symfony

我正在尝试按照[Symfony 2.1 文档处理上传](http://symfony.com/doc/2.1/cookbook/doctrine/file_uploads.html)，但我对他们代码中的变量之一来自哪里感到困惑。

上传方法中的 $this->file 变量来自哪里？

**Symfony 上传方法：**

```
public function upload()
{
    // the file property can be empty if the field is not required
    if (null === $this->file) {
        return;
    }

    // use the original file name here but you should
    // sanitize it at least to avoid any security issues

    // move takes the target directory and then the
    // target filename to move to
    $this->file->move(
        $this->getUploadRootDir(),
        $this->file->getClientOriginalName()
    );

   // set the path property to the filename where you've saved the file
    $this->path = $this->file->getClientOriginalName();

    // clean up the file property as you won't need it anymore
    $this->file = null;
} 
```

因为文档前面描述的 Document 实体只有 id、name 和 path 三个变量

**Symfony 实体：**

```
 /**
* @ORM\Entity
*/
class Document
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    public $id;

    /**
     * @ORM\Column(type="string", length=255)
     * @Assert\NotBlank
     */
    public $name;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    public $path;
} 
```

我误解了吗？

# android - 在 GridLayout 周围拖放项目 - Android

> ID：15662229
> 
> 赞同：3
> 
> 时间：2013-03-27T15:07:03.103
> 
> 标签：android, grid-layout

我有一个 GridLayout，里面有一些项目。没什么特别的。

我只是想知道我是否可以拖动项目并使其他项目自动排列。

如果您将一个图标移到另一个图标附近，这就像 Android 在 Jellybean 中所做的那样。

这在 GridLayout 中可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:43:18.267

我觉得有很多项目可以比其他答案更好地解决这个问题：

*   请参阅[以下问题](https://stackoverflow.com/questions/12690568/drag-and-drop-in-gridview-in-android)
*   其中，提到了以下项目：
    *   [PagedDragDropGrid](https://github.com/mrKlar/PagedDragDropGrid)
    *   [替代视图拖放](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)
    *   Google Project 和其他一些 3rd 方的东西

这也可以帮助您找到除 GridViews 之外的一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:19:59.417

我不知道 a 是否可行`GridLayout`，对此表示怀疑，但这是一个看起来像 a并实现拖放[的示例。](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)`GridLayout`这应该可以解决您的问题。

# wcf - 在一个 Windows 服务中的单个 TCP 端口上托管多个 WCF 服务

> ID：15662231
> 
> 赞同：7
> 
> 时间：2013-03-27T15:07:08.027
> 
> 标签：wcf

下面是我的主机 Windows 服务的 app.config 文件片段。

```
<services>
      <service name="Share.Services.MainService">
        <endpoint address="net.tcp://localhost:8001/MainService" behaviorConfiguration="netTcpBehavior" binding="netTcpBinding" contract="Share.Services.IClaimService" />
      </service>
      <service name="Share.Services.MainMasterPageService">
        <endpoint address="net.tcp://localhost:8001/MainMasterPageService" behaviorConfiguration="netTcpBehavior" binding="netTcpBinding" contract="Share.Services.IMainMasterpageService" />
      </service>
      <service name="Share.Services.SMSService">
        <endpoint address="net.tcp://localhost:8001/SMSService" behaviorConfiguration="netTcpBehavior" binding="netTcpBinding" contract="Share.ServiceContracts.Messaging.ISMSService" />
      </service>
    </services> 
```

有 3 个 wcf 服务配置为使用端口为 8001 的 TCP 端点。在 Windows 服务中，我使用以下代码注册服务主机

```
private static ServiceHost[] Hosts = null;

public static void Start()
{     
    try
    {
        while (!System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable())
        {
            System.Threading.Thread.Sleep(1000);
        }
        BaseLog.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

        Hosts = new ServiceHost[] 
            {
                new ServiceHost(typeof(MainService)), 
                new ServiceHost(typeof(MainMasterPageService)),
                new ServiceHost(typeof(SMSService)) 
            };

        foreach (ServiceHost host in Hosts)
        {
            RegisterServiceHost(host);
        }

        _log.Info("All Hosts Open");
    }
    catch(Exception e)
    {
        _log.Error( "MainServiceHost", e);
    }
} 
```

对于我调用 RegisterServiceHost 函数的每个 ServiceHost 对象，该函数的代码如下

```
public static void RegisterServiceHost(ServiceHost host)
{
    var ops = (from e in host.Description.Endpoints
            from o in e.Contract.Operations
            select o).ToList();

    ops.ForEach(
        operation => operation.Behaviors.Add(new MainContextOperationBehavior())
            );

    host.Open();
} 
```

上面的代码可以正常工作，没有任何问题。我的问题是所有服务都共享同一个端口 8001。所有服务如何能够共享同一个端口。甚至机器上也没有启用 Net.TCP 端口共享服务。我的另一个问题是，它会在共享同一端口时对性能造成任何影响。如果我为每个服务提供独特的端口，例如 8001,8002 ,8003，那么它的优势是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:11:50.247

它们可以共享同一个端口，因为它们都有不同的路径。显然，这一切正常，因此 WCF 主机足够智能，可以弄清楚如何让它们在端口 8001 上共享相同的侦听套接字。然后它可以区分请求，因为请求将包含作为 WCF 一部分的服务名称端点配置。

我预计这不会导致任何性能问题，但这完全取决于 WCF 服务主机的工作方式。

# javascript - 如何获取页面元素？

> ID：15662236
> 
> 赞同：1
> 
> 时间：2013-03-27T15:07:16.677
> 
> 标签：javascript, dynamics-crm-2011

这很奇怪，我觉得有点愚蠢。

在 CRM 中，我点击`F12`并检查了黄色警告部分是一个带有 id *Notifications的 DIV（以及称为**Notification0*、*Notification1*等的子 DIV ）。

然而，当我去的时候`document.getElementById("Notifications")`，我蹲了下来。怎么回事？！

另外，当我去的时候`document.write("")`，什么都没有改变。在 Cr 和 FF 中，它做到了，但 IE 没有反应。我疯了吗？

编辑：

![在此处输入图像描述](../Images/72c6c7537eff69e0ad7e967e66c5ab99.png)

以上为笔误。当我尝试执行时：

```
document.getElementById("crmNotifications") 
```

我得到nada，也没有......建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:18:58.430

你没有疯，CRM 和浏览器也没有错 :)

如果您从浏览器的控制台运行 javascript，则您处于`window`整个页面的上下文中。然而，CRM 表单内容位于`contentIFrame`iframe 中。IFrames 实际上是单独的页面，您甚至可以编辑此 iframe 在 F12 开发人员工具中指向的链接到您想要的任何其他链接。尝试将其中的`src`属性更改为`http://www.bing.com`，您将在 CRM 窗口中看到 Bing 主页（仅保留功能区）：

```
<iframe title="This is IFrame" id="contentIFrame" src="http://www.bing.com" 
        style="width: 100%; height: 100%; border-top-style: none; 
               border-right-style: none; border-bottom-style: none; 
               border-left-style: none; display: inline;" > 
```

这就是为什么您无法获取`crmNotifications`DOM 元素的原因 - 因为从控制台运行 javascript 时，您处于父窗口的上下文中。当您指定`window.frames[0]`时，它将为您提供页面上的第一个 IFrame（实际上这只是一个），在其中您将能够获得`crmNotifications`，因为它就在那里。

当您运行通过 CRM 自定义添加的自定义脚本时 - 它们链接到内部表单页面（IFrame 指向该页面），这就是您可以`crmNotifications`直接从这些脚本中获取的原因，因为您已经在“内容”页面上下文中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:36:51.703

如果我看得很清楚，你可能不是疯了一点点：D 通知是类而不是 id。id 是 crmNotifications。我写通知，我的书签中有这个[链接](http://rockstarbits.blogspot.pt/2011/08/crm-2011-notification-area.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:10:42.120

尝试

```
frames[0].document.getElementById('crmNotifications') 
```

无论出于何种原因在 IE 中你都需要这个`frames[0]`位。如果你也想使用`Xrm`对象也是一样的。

# twitter-bootstrap - 试图将角度指令包装在另一个指令中

> ID：15662237
> 
> 赞同：1
> 
> 时间：2013-03-27T15:07:29.407
> 
> 标签：twitter-bootstrap, angularjs, angularjs-directive

我正在尝试将指令包装在另一个指令中，并且遇到了问题。例如，使用 UI Bootstrap 选项卡和窗格指令：

我想变成这样的东西：

```
<tabs>
    <pane heading="FOO">...</pane>
    <pane heading="BAR">...</pane>
</tabs> 
```

进入：

```
<tabs>
    <pane-wrapper heading="FOO">...</pane-wrapper>
    <pane-wrapper heading="BAR">...</pane-wrapper>
</tabs> 
```

其中窗格包装器指令如下所示：

```
angular.module('test').directive('paneWrapper', function(){
        return{
            restrict: 'E',
            replace: true,
            template: "<pane ng-transclude></pane>" //somehow need to pass along the heading attribute
        }
    }); 
```

我想这样做的原因是，我不想大量修改窗格，我想包装它，并且可能在一个中包含多个指令等。我想我可以完全复制窗格指令并将其更改为一个选项。

无论如何，我得到了错误：

```
Error: Multiple directives [ngTransclude, ngTransclude] asking for 'ngTransclude' controller on <div class='tab-pane' ng-class='active: selected' ng-show='selected' ng-tranclude=''> 
```

想法？

我不应该需要创建一个窗格包装器范围吗？有一个包含各种数据的父范围......我只想包装它并创建一个可重用的组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:43:41.633

您是否尝试过使用

```
iElement.html($compile(<pane..)(scope)); 
```

删除模板属性并依赖于`<pane>`直接编译和更新 iElement html。

您可能希望`replace: true`在 wrapper 指令中使用属性。

# php - “插入忽略”或“选择并插入”更快

> ID：15662238
> 
> 赞同：1
> 
> 时间：2013-03-27T15:07:29.507
> 
> 标签：php, mysql, performance

mysql数据库。

表在字段“代码”上有索引。我需要插入表格新行。什么工作更快？

1)

*   字段代码的简单索引 - 用于快速选择
*   在插入检查行之前：`SELECT COUNT(*) FROM table WHERE Code = 'NewCode';`
*   简单插入（如果未找到行）：`Insert into table values ('NewCode')`

2)

*   字段代码的唯一索引 - 用于插入
*   `Insert IGNORE into table values ('NewCode')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:14:06.840

对我来说更安全（并且可以是更改的备份 - 更好的方法）是第一个，但我认为操作是相似的。有关更多详细信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

圣骑士

# facebook - Facebook 身份验证问题，500 服务器错误

> ID：15662240
> 
> 赞同：0
> 
> 时间：2013-03-27T15:07:32.460
> 
> 标签：facebook, facebook-graph-api, facebook-login, facebook-authentication

从昨天开始，我的网站在尝试登录网站时从 facebook 服务器端收到 500 服务器错误，我确定我没有更新我的代码，我搜索了所有内容，但没有找到任何解决方案。请检查我的代码并帮助我。

```
<?php
session_start();
require 'config/fbconfig.php';
require 'facebook/facebook.php';
include"core.php";
connectdb();

$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            ));

    $user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }

    if (!empty($user_profile )) {
        # User info ok? Let's print it (Here we will be adding the login and registering routines)

        $username = $user_profile['name'];
             $uid2 = $user_profile['id'];
         $email = $user_profile['email'];
         $validated = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM users WHERE email='".$email."'"));
       if($validated[0]== 1){
           $get_data = mysql_fetch_array(mysql_query("SELECT * FROM users WHERE email='".$email."'"));
           $visits = $get_data['visits'];
           $visits2 = $get_data['visits']+1;
           $sid= keygen(30);
           mysql_query("UPDATE users SET fbid='".$uid2."', visits= '".$visits2."', sid='".$sid."' WHERE email='".$email."'");

           $_SESSION['sid'] = $sid;
           $expire=time()+60*60*24*30;
           setcookie("sid", $_SESSION['sid'], $expire); 

           if($get_data['cat_sec']==0){
              header('Location: cat_select.php');
               exit();

           }else{
               if(isset($_SESSION['curl'])){
                header('Location:'.$_SESSION['curl']); 
             }else{
               header('Location: index.php');
             }
               exit();

           }
       }else{
         $sid= keygen(30);
         $register = mysql_query("INSERT INTO users SET fname='".$username."', email='".$email."', fbid='".$uid2."', active='1' , sid='".$sid."'");  

           include_once"reg_fb_mail.php";
           header('Location: cat_select.php');
               exit();

       }

        $permissions = $facebook->api("/me/permissions");
    if (array_key_exists('publish_stream', $permissions['data'][0])) {

        $attachment = array(
    'message' => 'my web site message',
    'name' => 'www.mywebsite.com!',
    'caption' => "caption.",
    'link' => 'http://www.website.com',
    'description' => 'website description gose here ',
    'picture' => 'http://website.com/images/fb.png',
    'actions' => array(
        array(
            'name' => 'www.website.com',
            'link' => 'http://www.website.com'
        )
    )
);

$result = $facebook->api('/me/feed/', 'post', $attachment);
} 

    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl(array( 'scope' => 'email,publish_stream'));
    header("Location: " . $login_url);
}
?> 
```

我已附上所有代码。请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:13:05.090

错误计算！问题不在于此代码。在 facebook 设置页面中，我发现 APP ID 之前有一个空格。它现在已修复.. Facebook dosent 从身份验证中的获取参数中修剪或删除空格。如果存在无效字符，则会在 facebook 中收到 500 服务器错误。我认为这是一个关键的安全问题。Hal Rotholz - 谢谢你的线索..

# javascript - 输入和提交的锚链接

> ID：15662242
> 
> 赞同：0
> 
> 时间：2013-03-27T15:07:36.663
> 
> 标签：javascript, html, forms

我有一个小表格，我打算让用户通过输入一个数字来跳转到一个部分，这将成为一个锚链接：

```
Jump to <input type="text" value="" name="a_gobox" id="a_gobox" /> 
<input type="image" class="button" name="submit" src="/images/gobutton.png" alt="Go" /> 
```

因此，如果用户输入“7”，那么我希望页面的哈希锚点更改为`#section7`.

重要的是地址栏中的实际哈希值发生变化，并在页面上反映这一点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:10:53.533

您应该能够简单地执行以下操作：

```
window.location.hash = '#' + $('#a_gobox').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:17:53.810

你可以使用类似的东西

```
$('.button').on('click', function() {
   var which_number = $('#a_gobox').val(),
       section_to_jump_to = '#section_' + which_number;
    window.location.hash= section_to_jump_to; 
}); 
```

还有一点小提琴[http://jsfiddle.net/ftWZh/1/](http://jsfiddle.net/ftWZh/1/)

# java - 获取在特定线程中执行的方法的名称

> ID：15662245
> 
> 赞同：0
> 
> 时间：2013-03-27T15:07:41.620
> 
> 标签：java, trace

在我的 Java 应用程序中，我希望获得在特定线程中执行的不同方法的名称（和实际运行时类）。它与获取常规堆栈跟踪不同。就像我在观察我的程序的执行，并看到不同方法的名称在它们运行时出现。

一种（幼稚且实际上不可行的）方法是在每个方法的开头放置一条打印消息以打印其名称（类、行号等）。我可以使用异常跟踪来获取要打印的所有相关信息，但是我必须在每个方法的开头添加至少一行，这不是很优雅。此外，如果我错过/忘记在任何方法的开头添加一行，则不会显示该方法名称。此外，这种策略也不是面向未来的。是否有任何仪器/其他技术可以帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:14:22.663

你应该看看面向方面的编程和所有实现它的框架。

如果您使用的是 spring，您可以查看简单的跟踪拦截器，它将完全按照您的要求进行：[http ://static.springsource.org/spring/docs/1.2.9/api/org/springframework/aop/interceptor /SimpleTraceInterceptor.html](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/aop/interceptor/SimpleTraceInterceptor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:16:46.560

除了下面另一个答案中提到的 AOP 和 Spring Listener 之外，您还可以使用一些更复杂的代码生成框架，例如 ASM 或 CGLib。您将编写代码以在运行时重写每个类，并将这些打印指令附加到方法的开头。但这需要对字节码有更深入的了解。

# php - PHP + Sybase ASE 数据库连接困难

> ID：15662247
> 
> 赞同：0
> 
> 时间：2013-03-27T15:07:46.480
> 
> 标签：php, database, sybase, sap-ase

我正在开发一个需要访问 SAP Sybase ASE 数据库的 PHP 应用程序。

我在尝试使用 PHP 连接到 Sybase ASE 时遇到了很大的问题。我不想使用 ODBC，因为我想避免接触和配置我的客户端机器。

有没有连接到 Sybase ASE 的简单解决方案？在 Java 中，我只需下载一个 JDBC 文件，奇迹就发生了……对于 PHP，有这样的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:49:59.320

您可能需要查看 ASE PHP 模块的[Sybase 程序员指南](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01693.1570/doc/html/title.html)，并安装[PHP 扩展模块](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01693.1570/doc/html/car1311906440579.html)（Sybase SDK 的一部分）

# php - bcrypt 散列应该存储在主用户表中还是它自己的表中？

> ID：15662251
> 
> 赞同：2
> 
> 时间：2013-03-27T15:07:59.903
> 
> 标签：php, mysql, bcrypt

根据我的阅读，bcrypt 生成的哈希应该存储为 type `CHAR(60)`。

`User`现在，这些 bcrypt 散列应该与用户的`UserID`and一起存储在主表中`Username`，还是应该存储在它自己的具有 2 列的表中`(UserID, BcryptHash)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:09:26.433

把它存放在`User`表中就很好了。这并不重要。为简单起见，我会将其存储在`User`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:18:21.150

我认为根据您的喜好，第一范式是项目的重复；关于这个概念，您只能使用一个字段，但是（如果我必须这样做）我更喜欢 2 列。圣骑士

# c# - 如何使用带有实体框架的 ASP.net MVC4 上传/显示图像

> ID：15662252
> 
> 赞同：6
> 
> 时间：2013-03-27T15:08:01.900
> 
> 标签：c#, asp.net-mvc, image

我有一个像这样的数据模型

```
 public class NewsItem
{
    public virtual int Id { get; set; }
    public virtual string NewsTitle { get; set; }
    public virtual string NewsContent { get; set; }
    public virtual byte[] NewsImage { get; set; }
    public virtual DateTime DateAdded { get; set; }
    public virtual bool IsLive { get; set; }
} 
```

然后我通过这样的视图显示这些数据：

```
@model BusinessObject.Domain.NewsItem
<div class="row-fluid">
    <h3>
        @Html.ValueFor(model => model.NewsTitle)
    </h3>
    <div class="span5">
    <img src="~/Content/images/stock.jpg" />
    </div>

<div class="span7">
<p>
    @Html.ValueFor(model => model.DateAdded)
</p>
<p>
    @Html.ValueFor(model => model.NewsContent)
</p>
</div>
 </div> 
```

然后我使用控制器中的 _db.SaveChanges() 保存数据，如下所示：

```
[Authorize]
    [HttpPost]
    public ActionResult Create(CreateNewsViewModel input)
    {
        if (ModelState.IsValid)
        {
            var news = new NewsItem();
            news.NewsTitle = input.nTitle;
            news.NewsContent = input.nContent;
            news.DateAdded = input.nDateAdded;
            news.IsLive = input.nIsLive;
            Mydb data = new Mydb();
            data.NewsItems.Add(news);
            data.SaveChanges();
            return View("Index", data.NewsItems);

        }
        else
        {
            return View(input);
        }
    } 
```

目前我没有图像上传位。我该怎么办？在我的数据库中，我有一个二进制字段，我的对象中的数据类型是字节 []。但我不知道我需要在哪里处理图片上传？

我是否需要一个单独的操作来返回视图？在这方面的一些指示将是伟大的。

干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T15:19:12.370

您需要从视图上传一个文件类型的输入字段，并需要一个 WebImage 实例来处理上传的图像：

看法：

```
<input type="file" name="image" /> 
```

控制器：

```
WebImage image = WebImage.GetImageFromRequest();
byte[] toPutInDb = WebImage.GetBytes();

// ... put the byte array into the database 
```

要显示数据库中的图像，您需要一个控制器 Action，它从数据库中检索字节数组并返回 FileAction。您可以通过在您从数据库中检索的 bytearray 上实例化另一个 WebImage 实例来获取此图像（用于图像检索控制器操作）：

```
WebImage image = new WebImage(byteArrayFromDb);

File(image.GetBytes(), "image/" + image.ImageFormat, image.FileName); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-17T08:22:11.520

我会这样：

在您的模型类中：

```
 public class NewsItem
{
    public virtual int Id { get; set; }
    public virtual string NewsTitle { get; set; }
    public virtual string NewsContent { get; set; }
    public virtual string NewsImage { get; set; } //string instead of byte because you don't wanna store your whole image file in your database, but just the path of the image, and the image you will store in a folder somewhere on the server
    public virtual DateTime DateAdded { get; set; }
    public virtual bool IsLive { get; set; }
} 
```

在您的控制器中：

```
[Authorize]
    [HttpPost]
    public ActionResult Create(CreateNewsViewModel HttpPostedFileBase file)// add this 
    {
        if (ModelState.IsValid)
        {
            if (file != null)
            {
                file.SaveAs(HttpContext.Server.MapPath("~/Images/") + file.FileName);
                car.ImagePath = file.FileName;
            }
        // the rest of the code... 

        }
        else
        {
            return View(input);
        }
    } 
```

那么在你看来，你应该有：

上传：

```
<input id="NewsImage" title="Upload a image" type="file" name="file" /> 
```

在 foreach 循环中显示添加：

```
@Html.DisplayFor(modelItem => item.NewsImage) 
```

不要忘记`enctype = "multipart/form-data"`添加`Html.BeginForm`

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:14:33.960

看看[jquery file uploader](http://blueimp.github.com/jQuery-File-Upload/) 你可以找到它的[示例代码](https://github.com/blueimp/jQuery-File-Upload/wiki)

希望这可以帮助

# macos - 如何在 monomac 中访问表单上的控件元素？

> ID：15662255
> 
> 赞同：0
> 
> 时间：2013-03-27T15:08:09.550
> 
> 标签：macos, mono, xamarin-studio

我正在尝试在 monomac 上编译一个 hello world 应用程序。我已经用 XCode 修改了 .xib 文件。我已将标签和按钮控件添加到表单中。之后，我将下一个代码添加到 MainWindowController.h：

```
@interface MainWindowController : NSWindowController {
    NSButton *_helloButton;
    NSTextField *_helloLabel;
}
@property (nonatomic, retain) IBOutlet NSButton *helloButton;
@property (nonatomic, retain) IBOutlet NSTextField *helloLabel;
- (IBAction)helloButtonClick:(id)sender; 
```

这段代码是由 XCode MainWindowController.m 自动生成的：

```
@synthesize helloButton = _helloButton;
@synthesize helloLabel = _helloLabel;
- (IBAction)helloButtonClick:(id)sender {
} 
```

返回 Xamarin Studio 后，我已将此代码添加到 MainWindowController.cs：

```
partial void helloButtonClick (NSObject sender) 
{
   helloLabel.StringValue = "Hello";
} 
```

在 MainWindow.designer.cs 中，自动添加了下一个代码：

```
 [Outlet]
    MonoMac.AppKit.NSButton helloButton { get; set; }
    [Outlet]
    MonoMac.AppKit.NSTextField helloLabel { get; set; }
    [Action ("helloButtonClick:")]
    partial void helloButtonClick (MonoMac.Foundation.NSObject sender); 
```

但是我在通过这种方式访问​​标签时遇到了问题。当我单击 helloButton 时，我得到一个 NullExeption。似乎没有创建 helloLabel，helloLabel 为空。但是 helloButton 工作正常！

我也尝试从 AwakeFromNib() 方法访问标签。结果是一样的。

谁能解释我应该如何清楚地完成它？我正在使用 MacOSX 10.8、XamarinStudio 4.0.3 和 XCode 4.6.1。谢谢！

# android - 如何在内部存储中保存位图

> ID：15662258
> 
> 赞同：48
> 
> 时间：2013-03-27T15:08:23.000
> 
> 标签：android, bitmap, save

这是我的代码，我想将此位图保存在我的内部存储中。公共布尔值 saveImageToInternalStorage 是来自谷歌的代码，但我不知道如何使用它。当我触摸 button2 时，请按照 button1 操作。

```
public class MainActivity extends Activity implements OnClickListener {
Button btn, btn1;
SurfaceView sv;
Bitmap bitmap;
Canvas canvas;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    btn=(Button)findViewById(R.id.button1);
    btn1=(Button)findViewById(R.id.button2);
    sv=(SurfaceView)findViewById(R.id.surfaceView1);

    btn.setOnClickListener(this);
    btn1.setOnClickListener(this);

    bitmap=BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);

}
@Override
public void onClick(View v) {
    canvas=sv.getHolder().lockCanvas();
    if(canvas==null) return;
    canvas.drawBitmap(bitmap, 100, 100, null);
    sv.getHolder().unlockCanvasAndPost(canvas);

}

public boolean saveImageToInternalStorage(Bitmap image) {

    try {
    // Use the compress method on the Bitmap object to write image to
    // the OutputStream
    FileOutputStream fos = openFileOutput("desiredFilename.png", Context.MODE_PRIVATE);

    // Writing the bitmap to the output stream
    image.compress(Bitmap.CompressFormat.PNG, 100, fos);
    fos.close();

    return true;
    } catch (Exception e) {
    Log.e("saveToInternalStorage()", e.getMessage());
    return false;
    }
    }
 } 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-27T15:14:03.473

要将位图保存在 sdcard 中，请使用以下代码

**店铺形象**

```
private void storeImage(Bitmap image) {
    File pictureFile = getOutputMediaFile();
    if (pictureFile == null) {
        Log.d(TAG,
                "Error creating media file, check storage permissions: ");// e.getMessage());
        return;
    } 
    try {
        FileOutputStream fos = new FileOutputStream(pictureFile);
        image.compress(Bitmap.CompressFormat.PNG, 90, fos);
        fos.close();
    } catch (FileNotFoundException e) {
        Log.d(TAG, "File not found: " + e.getMessage());
    } catch (IOException e) {
        Log.d(TAG, "Error accessing file: " + e.getMessage());
    }  
} 
```

**获取图像存储路径**

```
/** Create a File for saving an image or video */
private  File getOutputMediaFile(){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this. 
    File mediaStorageDir = new File(Environment.getExternalStorageDirectory()
            + "/Android/data/"
            + getApplicationContext().getPackageName()
            + "/Files"); 

    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            return null;
        }
    } 
    // Create a media file name
    String timeStamp = new SimpleDateFormat("ddMMyyyy_HHmm").format(new Date());
    File mediaFile;
        String mImageName="MI_"+ timeStamp +".jpg";
        mediaFile = new File(mediaStorageDir.getPath() + File.separator + mImageName);  
    return mediaFile;
} 
```

**编辑** 根据您的评论，我已经在此编辑了 onclick 视图，button1 和 button2 函数将分别执行。

```
public onClick(View v){

switch(v.getId()){
case R.id.button1:
//Your button 1 function
break;
case R.id. button2:
//Your button 2 function
break;
} 
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-12-23T23:55:21.943

```
private static void SaveImage(Bitmap finalBitmap) {

    String root = Environment.getExternalStorageDirectory().getAbsolutePath();
    File myDir = new File(root + "/saved_images");
    myDir.mkdirs();

    String fname = "Image-"+ o +".jpg";
    File file = new File (myDir, fname);
    if (file.exists ()) file.delete ();
    try {
        FileOutputStream out = new FileOutputStream(file);
        finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
        out.flush();
        out.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:13:49.033

修改`onClick()`如下：

```
@Override
public void onClick(View v) {
    if(v == btn) {
        canvas=sv.getHolder().lockCanvas();
        if(canvas!=null) {
            canvas.drawBitmap(bitmap, 100, 100, null);
            sv.getHolder().unlockCanvasAndPost(canvas);
        }
    } else if(v == btn1) {
        saveBitmapToInternalStorage(bitmap);
    }
} 
```

* * *

有几种方法可以强制执行`btn`之前必须按下的方法，`btn1`以便`bitmap`在尝试保存之前绘制它。

我建议您最初禁用`btn1`，并在`btn`单击时启用它，如下所示：

```
if(v == btn) {
    ...
    btn1.setEnabled(true);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-02T21:17:36.020

将文件保存到目录中

```
 public static Uri saveImageToInternalStorage(Context mContext, Bitmap bitmap){

    String mTimeStamp = new SimpleDateFormat("ddMMyyyy_HHmm").format(new Date());

    String mImageName = "snap_"+mTimeStamp+".jpg";

    ContextWrapper wrapper = new ContextWrapper(mContext);

    File file = wrapper.getDir("Images",MODE_PRIVATE);

    file = new File(file, "snap_"+ mImageName+".jpg");

    try{

        OutputStream stream = null;

        stream = new FileOutputStream(file);

        bitmap.compress(Bitmap.CompressFormat.JPEG,100,stream);

        stream.flush();

        stream.close();

    }catch (IOException e) 
    {
        e.printStackTrace();
    }

    Uri mImageUri = Uri.parse(file.getAbsolutePath());

    return mImageUri;
} 
```

所需权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-28T11:25:15.447

您可能可以使用以下内容来解码、压缩和保存图像：

```
 @Override
     public void onClick(View view) {
                onItemSelected1();
                InputStream image_stream = null;
                try {
                    image_stream = getContentResolver().openInputStream(myUri);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }

                Bitmap image= BitmapFactory.decodeStream(image_stream );
                // path to sd card
                File path=Environment.getExternalStorageDirectory();
                //create a file
                File  dir=new File(path+"/ComDec/");
                dir.mkdirs();
                Date date=new Date();
                File file=new File(dir,date+".jpg");

                OutputStream out=null;
                try{
                    out=new FileOutputStream(file);
                    image.compress(format,size,out);
                    out.flush();
                    out.close();

                    MediaStore.Images.Media.insertImage(getContentResolver(), image," yourTitle "," yourDescription");

                    image=null;

                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }
                Toast.makeText(SecondActivity.this,"Image Save Successfully",Toast.LENGTH_LONG).show();
            }
        }); 
```

# python - Subprocess.Call 不能/不会访问 D：

> ID：15662260
> 
> 赞同：0
> 
> 时间：2013-03-27T15:08:24.733
> 
> 标签：python, operating-system, subprocess, drive

我目前正在尝试让 Python 使用 Subprocess 从 D:/My Games 运行 .exe。目的很简单，只要运行选中的游戏即可。我现在使用的代码在我尝试访问我的 C: 驱动器时有效，但在尝试访问我的 D: 驱动器时出现错误。“错误表超出范围”是我得到的错误。任何人都知道如何能够从 Python 中访问此驱动器？

```
import wx
import subprocess
import os

GamesList=(os.listdir('D:\\My Games\\'))
for item in GamesList:
    if str(item) == 'desktop.ini':
        GamesList.remove(item)

class MainMenu(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,"Games List", size=(550,400))
        panel=wx.Panel(self)

        GameBox = wx.ListBox(panel, -1,(407,5),(122,350),GamesList,wx.LB_SINGLE)
        GameBox.Bind(wx.EVT_LISTBOX, OnGameSelection)

def OnGameSelection(Event):
    GameBox = Event.GetEventObject()
    GameIndex = GameBox.GetSelection()
    SelGame = GamesList[GameIndex]
    subprocess.call(['D:\\My Games\\'+ SelGame + '\\' + SelGame + '.exe'])

if __name__=='__main__':
    app=wx.PySimpleApp()
    frame=MainMenu(parent=None,id=-1)
    frame.Show()
    app.MainLoop() 
```

# visual-studio-2012 - MSDeploy 通过 MSBuild 发布复制所有文件而不是同步文件

> ID：15662261
> 
> 赞同：1
> 
> 时间：2013-03-27T15:08:25.630
> 
> 标签：visual-studio-2012, web-deployment, msdeploy, msbuild-4.0

[正如 Hanselman 在他的Tiny Happy Features #3](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)中提到的那样，我设置了以下构建目标来执行我的部署，并且在许多其他地方也提到了我认为推荐的方法：

```
msbuild my_web_application.csproj /p:Configuration=Production;
                                     DeployOnBuild=true;
                                     PublishProfile=Production;
                                     VisualStudioVersion=11.0;
                                     AllowUntrustedCertificate=true;
                                     AuthType=NTLM 
```

这完成了工作，并替换了我之前通过在命令行上调用 ms deploy 的部署步骤：

```
msdeploy.exe" -source:package="c:\source_to_my_web_application.zip" -dest:auto,my_server_name,includeAcls="False" -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -setParamFile:"c:\source_to_my_web_application\Package.SetParameters.xml" 
```

我在这两种方法中看到的最大区别是命令行调用只会推送有修改的文件，而 msbuild 调用每次都会推送整个 Web 应用程序。

有没有办法让 msbuild 版本执行“同步”行为，就像直接调用 msdeploy 为我做的那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:44:46.500

从我能够建立的情况来看，从一个包（比如为这个特定的 MSBuild 命令创建的包）同步会发现与它尝试部署的本地工作副本相关的差异。

如果我重新签出，然后构建和部署，它将发布整个 Web 应用程序。

如果我对该工作副本进行清理和重建，它只会发布重建的 dll。

如果我在此基础上进行构建，它只会发布经过转换的 web.config 文件和其他一些我无法押韵或推理的随机 dll。

我想，最重要的是，在我们的 CI 服务器设置中，应该假设所有文件都将发布到服务器，如果它恰好发布的数量少于这个，那就是带宽奖励。

附带说明一下，在执行其他正常的 ms deploy 命令时，我还遇到了随机的、不可靠的 404 错误。它们似乎是断断续续的，并且在我自己的工作站、我的同事和 CI 服务器之间可能会有所不同，因此 MS Deploy 服务将返回 404 或在每次连续调用的几秒钟内正常执行。我为此类行为找到的解决方案包括从重新启动 Visual Studio 到卸载和重新安装各种组件，并确保您以正确的顺序进行操作，并且仅在任何以“ary”结尾的月份的第三周的第二个星期二进行。 ..

对我来说，这个工具是粗略的，如果你能得到一个以任何可靠性工作的设置，那是一个奇迹，你不应该再碰它，并向硅神祈祷它保持这种状态。

# image - 使用 netcat 提供包含图像的 HTTP 响应

> ID：15662262
> 
> 赞同：4
> 
> 时间：2013-03-27T15:08:28.623
> 
> 标签：image, bash, http, netcat

我正在尝试使用 netcat 编写一个小型 HTTP 服务器。对于纯文本文件，这可以正常工作，但是当我尝试发送图片时，浏览器仅显示损坏图像的图标。我所做的是提取所请求文件的 mime 类型和大小并将其发送给客户端。我的示例图片的请求标头如下所示：

```
HTTP/1.0 200 OK
Content-Length: 197677 
Content-Type: image/jpeg 
```

这是我使用 netcat 工具的 -e 选项启动的 bash 脚本：

```
#!/bin/bash

# -- OPTIONS
index_page=index.htm
error_page=notfound.htm

# -- CODE

# read request
read -s input
resource=$(echo $input | grep -P -o '(?<=GET \/).*(?=\ )') # extract requested file
[ ! -n "$resource" ] && resource=$index_page # if no file requested, set to default
[ ! -f "$resource" ] && resource=$error_page # if requested file not exists, show error pag

# generate output
http_content_type=$(file -b --mime-type $resource) # extract mime type
case "$(echo $http_content_type | cut -d '/' -f2)" in
    html|plain)
        output=$(cat $resource)

        # fix mime type for plain text documents
        echo $resource | grep -q '.css$' && http_content_type=${http_content_type//plain/css}
        echo $resource | grep -q '.js$' && http_content_type=${http_content_type//plain/javascript}
    ;;

    x-php)
        output=$(php $resource)
        http_content_type=${http_content_type//x-php/html} # fix mime type
    ;;

    jpeg)
        output=$(cat $resource)
    ;;

    png)
        output=$(cat $resource)
    ;;

    *)
        echo 'Unknown type'
esac

http_content_length="$(echo $output | wc -c | cut -d ' ' -f1)"

# sending reply
echo "HTTP/1.0 200 OK"
echo "Content-Length: $http_content_length"
echo -e "Content-Type: $http_content_type\n"
echo $output 
```

如果有人能够帮助我会很高兴:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:16:41.800

我希望二进制数据中的特殊字符在您的 shell 脚本中处于活动状态。

我建议您通过以下方式获取文件大小：

```
http_content_length=`stat -c '%s' $resource` 
```

你“发送”它：

```
...
echo -e "Content-Type: $http_content_type\n"
cat $resource 
```

# objective-c - 重构目标 C 的类似方法

> ID：15662267
> 
> 赞同：0
> 
> 时间：2013-03-27T15:08:57.037
> 
> 标签：objective-c, refactoring, nsmutablearray

如何为以下（目标 C）重构类似的方法？

```
- (void)insertNewSong:(Song *)newSong forArtist:(Artist *)artist {
    NSMutableArray *newSongList = [[artist songs] mutableCopy];

    BOOL hasInserted = NO;

    for (int i = 0; i < [[artist songs] count]; i++) {
        Song *existingSong = [[artist songs] objectAtIndex:i];
        if ([[newSong title] caseInsensitiveCompare:[existingSong title]] == NSOrderedAscending) {
            [newSongList insertObject:newSong atIndex:i];
            hasInserted = YES;
            break;
        }
    }

    if (hasInserted == NO) {
        [newSongList addObject:newSong];
    }
    artist.songs = newSongList;
}

- (void)insertNewArtistToSongList:(Artist *)newArtist {
    BOOL hasInserted = NO;

    for (int i = 0; i < [_artists count]; i++) {
        Artist *existingArtist = [_artists objectAtIndex:i];

        if ([[newArtist name] caseInsensitiveCompare:[existingArtist name]] == NSOrderedAscending) {
            [_artists insertObject:newArtist atIndex:i];
            hasInserted = YES;
            break;
        }
    }

    if (hasInserted == NO) {
        [_artists addObject:newArtist];
    }
} 
```

对于 insertNewSong 方法，使用包含每个 Song 对象的 NSMutableArray [艺术家歌曲]。对于 insertNewArtist 方法，使用了包含每个 Artist 对象的 NSMutableArray 实例变量 _artists。

这两种方法都通过将输入对象的文本属性与数组中的文本属性进行比较，将对象插入到 NSMutableArray 中。

目前上述方法包含一些重复但很容易理解（在我的例子中）。我在想是否有办法将其简化为更通用的方法，并且不会损害可读性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:13:51.527

没有一般规则，但这里有一些一般规则：

*   有时像这样组合代码是有意义的，有时则不然。很多优点/缺点。
*   有时最好将操作的一部分抽象出来，而让另一部分自定义。
*   一般来说，如果你有很多“如果事情A那么做这个，否则做那个”的逻辑，你做错了（或者根本不应该做）。
*   当您可以编写一个例程并只传递不同的参数（不仅仅是布尔开关）来区分多种情况时，这是最好的。
*   这个很难（硬。

而且，作为一般规则，在我有几乎相同逻辑的第三个实例之前，我不会太努力地抽象。

（通常来说，一般来说。）

# .net - Windows 服务中的 MEF 导入失败

> ID：15662271
> 
> 赞同：5
> 
> 时间：2013-03-27T15:09:08.803
> 
> 标签：.net, vb.net, visual-studio-2012, mef

我的 Windows 服务中的 MEF 组合存在问题

下面的类是继承自`System.ServiceProcess.ServiceBase`

```
Imports System.ServiceProcess

<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Partial Class svc_EpmsOPCService_6Cylinder_Zone1
    Inherits System.ServiceProcess.ServiceBase

    'UserService overrides dispose to clean up the component list.
    <System.Diagnostics.DebuggerNonUserCode()> _
    Protected Overrides Sub Dispose(ByVal disposing As Boolean)
        Try
            If disposing AndAlso components IsNot Nothing Then
                If _catelog IsNot Nothing Then _catelog.Dispose()
                If _mefContainer IsNot Nothing Then _mefContainer.Dispose()
                components.Dispose()
            End If
        Finally
            MyBase.Dispose(disposing)
        End Try
    End Sub

    ' The main entry point for the process
    <MTAThread()> _
    Shared Sub Main()

#If Not Debug Then
        Dim ServicesToRun() As System.ServiceProcess.ServiceBase
        ServicesToRun = New System.ServiceProcess.ServiceBase() {New svc_EpmsOPCService_6Cylinder_Zone1}
        System.ServiceProcess.ServiceBase.Run(ServicesToRun)
#Else
        Dim service = New Worker
        service.InitWork()
#End If

    End Sub

    'Required by the Component Designer
    Private components As System.ComponentModel.IContainer

    ' NOTE: The following procedure is required by the Component Designer
    ' It can be modified using the Component Designer.  
    ' Do not modify it using the code editor.
    <System.Diagnostics.DebuggerStepThrough()> _
    Private Sub InitializeComponent()
        components = New System.ComponentModel.Container()
        Me.ServiceName = "JCB.EpmsOPCService_6Cylinder_Zone1"

    End Sub

End Class

Imports System.ComponentModel.Composition
Imports System.ComponentModel.Composition.Hosting
Imports Service.Common

Public Class svc_EpmsOPCService_6Cylinder_Zone1

    Private _catelog As AssemblyCatalog
    Private _mefContainer As CompositionContainer

    <Import(GetType(IServiceWorker))>
    Private Property ServiceWorker As IServiceWorker

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        Dim catelog As AggregateCatalog = New AggregateCatalog(New DirectoryCatalog("."), New AssemblyCatalog(Reflection.Assembly.GetExecutingAssembly().CodeBase))
        _mefContainer = New CompositionContainer(_catelog)
        _mefContainer.ComposeParts(Me)

    End Sub

    Protected Overrides Sub OnStart(ByVal args() As String)
        ServiceWorker.InitWork()
    End Sub

    Protected Overrides Sub OnStop()
        ServiceWorker.StopWork()
        _mefContainer.Dispose()
    End Sub

End Class 
```

我遇到的问题是，当 MEF 尝试在`IServiceWorker`它失败的属性上运行组合时。最初我虽然`IServiceWorker`没有作为可用部分之一通过`AggregateCatalog`

```
Dim catelog As AggregateCatalog = New AggregateCatalog(New DirectoryCatalog("."), New AssemblyCatalog(Reflection.Assembly.GetExecutingAssembly().CodeBase)) 
```

为了确认这是一个有效的零件，我使用以下代码将零件集合输出到一个文本文件。

```
For Each p As System.ComponentModel.Composition.Primitives.ComposablePartDefinition In catelog.Parts
    System.IO.File.AppendAllText(compositionErrorLog, String.Concat(vbCrLf, p.ToString, vbCrLf), Text.Encoding.Unicode)

    For Each meta As KeyValuePair(Of String, Object) In p.Metadata
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat("Meta Data Key : ", meta.Key, vbCrLf), Text.Encoding.Unicode)
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat("Meta Data Val : ", meta.Value.ToString, vbCrLf), Text.Encoding.Unicode)
    Next

    For Each exp As Primitives.ExportDefinition In p.ExportDefinitions
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat("Export Definition Contract Name : ", exp.ContractName, vbCrLf), Text.Encoding.Unicode)
    Next

    For Each imp As Primitives.ImportDefinition In p.ImportDefinitions
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat("Import Definition Contract Name : ", imp.ContractName, vbCrLf), Text.Encoding.Unicode)
    Next

    System.IO.File.AppendAllText(compositionErrorLog, vbCrLf, Text.Encoding.Unicode)

Next 
```

您可以从下面的摘录中看到该`Service_EPMS_OPC_6Cylinder_Zone1.Worker`部件`IServiceWorker`在其`ExportDefinitions`

```
Service.Common.DataAccess.AuditLogger
Export Definition Contract Name : Service.Common.DataAccess.IAuditLogger
Import Definition Contract Name : Service.Common.DataAccess.IDatabaseHelperFactory

Service.Common.DataAccess.DataHelper
Export Definition Contract Name : Service.Common.DataAccess.IDataHelper
Import Definition Contract Name : Service.Common.DataAccess.IDatabaseHelperFactory

Service.Common.DataAccess.SqlDatabaseHelperFactory
Export Definition Contract Name : Service.Common.DataAccess.IDatabaseHelperFactory

Service.Common.Logging.ErrorLogger
Export Definition Contract Name : Service.Common.Logging.ILogger
Import Definition Contract Name : Service.Common.DataAccess.IDataHelper

Service.Common.Network.NetworkAvailability
Export Definition Contract Name : Service.Common.Network.INetworkAvailability
Import Definition Contract Name : Service.Common.DataAccess.IDataHelper
Import Definition Contract Name : Service.Common.Network.IRemoteServiceHost

Service.Common.Network.RemoteServiceHost
Export Definition Contract Name : Service.Common.Network.IRemoteServiceHost

Service.Common.ObjectCreation.EngineBuilder
Export Definition Contract Name : Service.Common.ObjectCreation.IEngineBuilder
Import Definition Contract Name : Service.Common.DataAccess.IDataHelper

Service.Common.Opc.OpcHelper
Export Definition Contract Name : Service.Common.Opc.IOpcHelper

Service_EPMS_OPC_6Cylinder_Zone1.Worker
Export Definition Contract Name : Service.Common.IServiceWorker

Service_EPMS_OPC_6Cylinder_Zone1.ZoneProcess
Export Definition Contract Name : Service.Common.IZoneProcess
Import Definition Contract Name : Service.Common.Logging.ILogger
Import Definition Contract Name : Service.Common.DataAccess.IDataHelper
Import Definition Contract Name : Service.Common.Network.INetworkAvailability
Import Definition Contract Name : Service.Common.ObjectCreation.IEngineBuilder
Import Definition Contract Name : Service.Common.Opc.IOpcHelper
Import Definition Contract Name : Service.Common.DataAccess.IAuditLogger 
```

这是我所期望的，因为`Worker`该类在 type 上执行 Export `IServiceWorker`。我已经在这个类上注释掉了两个额外的 Imports，以确保它们不会导致问题。

```
Imports System.ComponentModel.Composition
Imports System.ComponentModel.Composition.Hosting
Imports System.Threading
Imports Service.Common
Imports Service.Common.Enums
Imports Service.Common.Logging

<Export(GetType(IServiceWorker))>
Public Class Worker
    Implements IServiceWorker

    Private _thread As Thread

    '<Import(GetType(IZoneProcess))>
    'Private Property Processor() As IZoneProcess

    '<Import(GetType(ILogger))>
    'Private Property Logger() As ILogger

#Region " Service Methods"

    ''' <summary>
    ''' Tear down the service
    ''' </summary>
    ''' <remarks></remarks>
    Public Sub StopWork() Implements IServiceWorker.StopWork
        'Tear down the worker thread
        If Not _thread Is Nothing Then
            If Not _thread.Join(100) Then
                _thread.Abort()
            End If
        End If

    End Sub

    ''' <summary>
    ''' Initialise the worker thread
    ''' </summary>
    ''' <remarks></remarks>
    Public Sub InitWork() Implements IServiceWorker.InitWork

        Dim objThreadStart As New ThreadStart(AddressOf Me.StartWork)
        _thread = New Thread(objThreadStart)
        _thread.Start()

    End Sub

    ''' <summary>
    ''' Start the worker thread functionality
    ''' </summary>
    ''' <remarks></remarks>
    Private Sub StartWork()

        Try
            If Not Initialise() Then
                Me.StopWork()
            End If

        Catch ex As Exception
            ' If Logger IsNot Nothing Then Logger.LogError(My.Settings.ApplicationID, "StartWork", ex.Message, IssueSeverity.Critical)
            Me.StopWork()
        End Try
    End Sub

#End Region

    Private Function Initialise() As Boolean

#If DEBUG Then
        RunDebugModeComposition()
#End If
        'Return Processor.InitialiseApplication()

    End Function

    Private Sub RunDebugModeComposition()

        Try
            Dim catelog As AggregateCatalog = New AggregateCatalog(New DirectoryCatalog("."), New AssemblyCatalog(Reflection.Assembly.GetExecutingAssembly().CodeBase))
            Dim container As CompositionContainer = New CompositionContainer(catelog)
            container.ComposeParts(Me)
        Catch ex As CompositionException
            Throw New ApplicationException("The composition of the application failed. Pleae check the underlying exception", ex)
        End Try

    End Sub

End Class 
```

我用下面的代码进一步查询了组合问题

```
Try
    _mefContainer.ComposeParts(Me)
Catch ex As CompositionException
    For Each e As CompositionError In ex.Errors
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat(vbCrLf, "Description : ", e.Description, vbCrLf), Text.Encoding.Unicode)
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat(vbCrLf, "Message : ", e.Exception.Message, vbCrLf), Text.Encoding.Unicode)
        System.IO.File.AppendAllText(compositionErrorLog, String.Concat(vbCrLf, "Stack Trace : ", e.Exception.StackTrace, vbCrLf), Text.Encoding.Unicode)

        If e.Exception.InnerException IsNot Nothing Then
            System.IO.File.AppendAllText(compositionErrorLog, String.Concat(vbCrLf, "Message : ", e.Exception.InnerException.Message, vbCrLf), Text.Encoding.Unicode)
            System.IO.File.AppendAllText(compositionErrorLog, String.Concat(vbCrLf, "Stack Trace : ", e.Exception.InnerException.StackTrace, vbCrLf), Text.Encoding.Unicode)
        End If

    Next
End Try 
```

这个游戏我在文本文件中的以下输出

```
Description : Cannot set import 'Service_EPMS_OPC_6Cylinder_Zone1.svc_EpmsOPCService_6Cylinder_Zone1.ServiceWorker (ContractName="Service.Common.IServiceWorker")' on part 'Service_EPMS_OPC_6Cylinder_Zone1.svc_EpmsOPCService_6Cylinder_Zone1'.

Message : The composition produced a single composition error. The root cause is provided below. Review the CompositionException.Errors property for more detailed information.

1) No exports were found that match the constraint: 
    ContractName    Service.Common.IServiceWorker
    RequiredTypeIdentity    Service.Common.IServiceWorker

Stack Trace : 
```

现在我不确定的是为什么`IServiceWorker`MEF Catelog Parts 集合中的 Export 没有被`ComposeParts`. 据我所见， Worker 类上的 Export 属性应该与`ServiceWorker`属性中的 Import 匹配`svc_EpmsOPCService_6Cylinder_Zone1`

知道为什么此导入不起作用吗？

编辑：我已经重构了代码，以便将“Worker”类称为具体实现，然后组合发生在“Worker”类中，一切正常。是否存在不能从继承自 'System.ServiceProcess.ServiceBase' 的 Windows 服务组件中组合 MEF 部件的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:25:15.217

在这个聚会上迟到了，但我想知道这个问题是否与 Windows 如何注册和维护服务更相关。我相信 SCM 或其他一些后端服务组件在服务注册时会锁定资源。

我不认为这是 Service 基类本身的问题，它看起来并不太奇怪，它不是静态的，它只是扩展了 Component 等。相反，我敢打赌它与 Services 本身和资源管理。

对于笑容和笑声，您是否将 ShadowCopy 用于您的 MEF DirectoryCatalog？如果您不是，我想知道它是否会有所帮助...其中一些是猜测，因为我还没有时间设置自己的测试台，但这是分别从 MEF 和服务经验得出的有根据的猜测。

# file - 未找到 COBOL 文件目录

> ID：15662276
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:09:23.873
> 
> 标签：file, directory, cobol

我有一个 COBOL 程序 (CH5PPB.cblproj) 尝试读取 CH5PP.DAT 但没有成功；找不到该文件。我已经分别尝试了以下 ASSIGN 行。

每次运行都会给我一个 COBOL FileHandlingException 13 File not found。我试过用谷歌搜索这个问题，没有效果。此外，我所有尝试访问文件的 COBOL 程序都有同样的问题。我试过在有和没有调试的情况下运行。

```
 SELECT IN-EMPLOYEE-FILE
           ASSIGN TO 'CH5PP.DAT'
            ORGANIZATION IS LINE SEQUENTIAL.

       SELECT IN-EMPLOYEE-FILE
           ASSIGN TO 'C:\Users\nsacket\Desktop\COBOL TEXTBOOK FILES\ch05\CH5PPB\CH5PPB\CH5PP.DAT'
            ORGANIZATION IS LINE SEQUENTIAL.

       SELECT IN-EMPLOYEE-FILE
           ASSIGN TO 'C:\CH5PP.DAT'
            ORGANIZATION IS LINE SEQUENTIAL. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:32:00.847

问题已解决还是您仍然面临问题。您尚未提供您正在使用什么 COBOL 的信息。您似乎正在使用 Micro Focus COBOL Visual Studio 项目？

从 ASSIGN TO 'CH5PP.DAT' 中删除 ' 引号，它应该是 ASSIGN TO CH5PP.DAT

如果你试图读取这个文件，如果没有通过环境变量设置，这个文件应该默认放在加载文件夹中。

还要避免使用类似的路径

> 分配给 'C:\Users\nsacket\Desktop\COBOL 教科书文件\

COBOL TEXTBOOK 文件中的空格会使您的生活变得困难。

# c# - 实现 IXmlSerializable 需要 Collection 属性具有 Setter

> ID：15662277
> 
> 赞同：3
> 
> 时间：2013-03-27T15:09:25.923
> 
> 标签：c#, xmlserializer, ixmlserializable

我有一个从 BindingList 继承的自定义类型的集合属性。目前，该属性通过 XmlSerializer 进行序列化，即使它没有 Setter。我现在正在尝试在此自定义集合类上实现 IXmlSerializable，并看到 WriteXml() 和 ReadXml() 接口方法只有在我的集合属性具有 Setter 时才会被调用。为什么序列化现在会忽略此属性，除非在没有 Setter 的情况下正确序列化之前存在 Setter。

重现：

首先，有一个名为“Item”的类：

```
public class Item
{
    public Item() {}

    // Generates some random data for the collection
    private MyCollectionType GenerateContent()
    {
        Random ranGen = new Random();
        MyCollectionType collection = new MyCollectionType();

        for (int i = 0; i < 5; i ++)
        {
            collection.Add("Item" + ranGen.Next(0,101));
        }

        return collection;
    }

    public MyCollectionType Items
    {
        get
        {
            if (m_Items == null)
            {
                m_Items = GenerateContent();
            }
            return m_Items;
        }
    }
    private MyCollectionType m_Items = null;
} 
```

接下来创建集合类“MyCollectionType”（请注意，IXmlSerializable 在开始的片段中故意缺少）：

```
public class MyCollectionType : BindingList<string>
{
    public MyCollectionType()
    {
        this.ListChanged += MyCollectionType_ListChanged;
    }

    void MyCollectionType_ListChanged(object sender, ListChangedEventArgs e){ }

    public MyCollectionType(ICollection<string> p)
    {
        this.ListChanged  += MyCollectionType_ListChanged;
    }

    #region Implementation of IXmlSerializable

    public void WriteXml(XmlWriter writer)
    {
        throw new NotImplementedException();
    }

    public void ReadXml(XmlReader reader)
    {
        throw new NotImplementedException();
    }

    public XmlSchema GetSchema() { return null; }

    #endregion
} 
```

最后，在 Main() 中添加一些代码来序列化和反序列化“项目”：

```
 Item myItem = new Item();
        Item newItem = null;

        // Define an XmlSerializer
        XmlSerializer ser = new XmlSerializer(typeof(Item));

        // Serialize the Object
        using (TextWriter writer = File.CreateText(@"c:\temporary\exportedfromtest.xml"))
        {
            ser.Serialize(writer,myItem);
        }

        // Deserialize it
        using (Stream reader = new FileStream(@"c:\temporary\exportedfromtest.xml", FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            using (XmlDictionaryReader xmlDictionaryReader = XmlDictionaryReader.CreateTextReader(reader, XmlDictionaryReaderQuotas.Max))
            {
                newItem = (Item)ser.Deserialize(xmlDictionaryReader);
            }
        } 
```

因此，如果您按原样运行，您应该会看到它在没有 Setter 的情况下进行序列化和反序列化。目前，该集合没有在上面的代码段中列出“IXmlSerializable”，但方法在那里。因此，如果您现在返回并将“IXmlSerializable”添加到 MyCollectionType 类并再次运行，您会注意到集合属性未序列化，并且未调用 WriteXml() 和 ReadXml() 方法。另请注意，如果您添加一个空的 Setter，这些方法将突然被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-13T02:30:59.540

这是记录在案的行为。尽管不清楚，但在[介绍 XML 序列化](https://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.110%29.aspx)中进行了解释：

> **XML 序列化不转换**方法、索引器、私有字段或**只读属性（只读集合除外）**。要序列化对象的所有字段和属性，包括公共的和私有的，请使用 DataContractSerializer 而不是 XML 序列化。

如您所见，get-only 属性通常不会序列化——*只读集合*除外。但微软的意思是什么？集合毕竟不是财产。

它们的含义如下：

**XML 序列化不转换仅获取属性或只读字段（具有预初始化集合的仅获取集合值属性除外）**。

（顺便说一句，这意味着，如果您在包含类型的构造函数中将项目添加到集合中，然后对其进行序列化和反序列化，则默认项目将被*重复*。有关原因的解释，请参阅[XML 反序列化具有代码默认值的集合属性](https://stackoverflow.com/questions/27927496/xml-deserialization-of-collection-property-with-code-defaults)。如果我反序列化您的`Item`课程，我看到了这种行为。）

这如何适用于您的情况？好吧，当您使您的集合实现`IXmlSerializable`时，序列化程序不再将其解释为集合；它将其解释为一个黑匣子。因此，它对收藏的特殊规则不再适用。引用您的集合的属性现在必须是读/写的；`XmlSerializer`将自己构造一个实例，对其进行反序列化，并将其设置为它的父级，就像任何其他非集合属性值一样。

# cassandra - 完全删除退役的 Cassandra 节点

> ID：15662281
> 
> 赞同：4
> 
> 时间：2013-03-27T15:09:36.550
> 
> 标签：cassandra

运行 Cassandra 1.0，我将环从 5 个节点缩小到 4 个。为此，我在`nodetool decommission`要删除的节点上运行，然后在该主机上停止 cassandra 并使用`nodetool move`并将`nodetool cleanup`剩余 4 个节点上的令牌更新为重新平衡集群。

我的种子节点是 A 和 B。我删除的节点是 C。

这似乎可以正常工作 6-7 天，但现在我的四个节点之一认为退役的节点仍然是环的一部分。

为什么会发生这种情况，从环中完全移除退役节点的正确方法是什么？

`nodetool ring`这是仍然认为退役节点是环的一部分的一个节点上的输出：

```
Address         DC          Rack        Status State   Load            Owns    Token                                       
                                                                               127605887595351923798765477786913079296     
xx.x.xxx.xx     datacenter1 rack1       Up     Normal  616.17 MB       25.00%  0                                           
xx.xxx.xxx.xxx  datacenter1 rack1       Up     Normal  1.17 GB         25.00%  42535295865117307932921825928971026432      
xx.xxx.xx.xxx   datacenter1 rack1       Down   Normal  ?               9.08%   57981914123659253974350789668785134662      
xx.xx.xx.xxx    datacenter1 rack1       Up     Normal  531.99 MB       15.92%  85070591730234615865843651857942052864      
xx.xxx.xxx.xx   datacenter1 rack1       Up     Normal  659.92 MB       25.00%  127605887595351923798765477786913079296 
```

这是`nodetool ring`其他 3 个节点上的输出：

```
Address         DC          Rack        Status State   Load            Owns    Token                                       
                                                                               127605887595351923798765477786913079296     
xx.x.xxx.xx     datacenter1 rack1       Up     Normal  616.17 MB       25.00%  0                                           
xx.xxx.xxx.xxx  datacenter1 rack1       Up     Normal  1.17 GB         25.00%  42535295865117307932921825928971026432      
xx.xx.xx.xxx    datacenter1 rack1       Up     Normal  531.99 MB       25.00%  85070591730234615865843651857942052864      
xx.xxx.xxx.xx   datacenter1 rack1       Up     Normal  659.92 MB       25.00%  127605887595351923798765477786913079296 
```

**更新：** 我尝试使用`nodetool removetoken`节点 B 删除节点，该节点仍然声称节点 C 在环中。该命令运行了 5 个小时，似乎没有做任何事情。唯一的变化是，当我`nodetool ring`在节点 B 上运行时，节点 C 的状态现在是“离开”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:43:51.050

我能够使用 删除退役的节点`nodetool removetoken`，但我必须使用该`force`选项。

这是我的命令的输出：

```
iowalker:~$ nodetool -h `hostname` removetoken 57981914123659253974350789668785134662

<waited 5 hours, the node was still there>

iowalker:~$ nodetool -h `hostname` removetoken status
RemovalStatus: Removing token (57981914123659253974350789668785134662). Waiting for replication confirmation from [/xx.xxx.xxx.xx,/xx.x.xxx.xx,/xx.xx.xx.xxx].
iowalker:~$ nodetool -h `hostname` removetoken force
RemovalStatus: Removing token (57981914123659253974350789668785134662). Waiting for replication confirmation from [/xx.xxx.xxx.xx,/xx.x.xxx.xx,/xx.xx.xx.xxx].
iowalker:~$ nodetool -h `hostname` removetoken status
RemovalStatus: No token removals in process. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T15:08:56.887

使用 Cassandra 2.0，您需要在要删除的节点上使用 sh nodetool decommission。在您的情况下，检查您是否已删除 cassandra-topology.properties 中的条目

# actionscript-3 - 单击导入的 swf 中的按钮时，AIR iOS 应用程序挂起

> ID：15662283
> 
> 赞同：2
> 
> 时间：2013-03-27T15:09:44.237
> 
> 标签：actionscript-3, sdk, air, flash

整天把头撞在墙上，以为我会看看是否有人可以对此有所了解-

我有一个导入远程 swf 的 iOS 空气应用程序。导入后，事件侦听器将添加到导入的 swf 内的按钮。单击该按钮会导致应用程序挂起。这是一些代码 -

```
private function loadRemoteSWF():void{
    var urlRequest:URLRequest = new URLRequest("http://www.domain.com/remote.swf");

    var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaded);
    loader.load(urlRequest);
}

private function onLoaded(e:Event):void{
     var loaderInfo:LoaderInfo = e.currentTarget as LoaderInfo;
     var adPanel:MovieClip = loaderInfo.content as MovieClip;

     adPanel.continueButton.addEventListener(TouchEvent.TOUCH_BEGIN, onContinueClicked);

     addChild(adPanel)
}

private function onContinueClicked(e:TouchEvent):void{
    trace("onContinueClicked");

} 
```

我正在使用 Flash Builder 4.7 AIR SDK 3.5 ASC 2.0。

这只发生在发布版本上，调试版本工作正常，几乎不可能找到原因。在同一 SDK 版本上使用旧版编译器时，它也可以正常工作。

在按钮上以编程方式调度触摸事件也可以正常工作。（以为我可以尝试/捕获来查找错误）

```
adPanel.continueButton.dispatchEvent(new TouchEvent(TouchEvent.TOUCH_BEGIN)); 
```

触摸按钮只会杀死应用程序，它甚至不会命中跟踪。

任何人都知道如何调试这个，或者为什么会发生这个问题？

谢谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:59:13.517

你能做一个测试吗：不要使用本机加载器，而是尝试使用 API，比如 greensocks api - SWFLoader。

此外，在加载 swf 文件之前尝试通过安全类设置接受域：

```
import flash.system.Security;

public class Main extends MovieClip{

    public function Main(){
       Security.allowDomain("*");
    }
} 
```

我建议尝试在另一台机器上使用相同的设置进行编译，以确保 Builder 安装没有一些问题。

另外，您是否尝试过不同的设备（可能是您使用的设备的问题）？

# groovy - 如何以编程方式在 SoapUI 中创建测试步骤？

> ID：15662286
> 
> 赞同：0
> 
> 时间：2013-03-27T15:09:46.393
> 
> 标签：groovy, soapui

我希望在现有的 SoapUI 项目中自动创建测试步骤。每个测试步骤都是从保存在单个文件中的记录的 SOAP 请求中加载的。每个测试步骤都可以有相同的断言，从另一个测试步骤复制而来。

我想我可以在安装脚本中使用 Groovy 做一些事情。我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:41:57.523

是的，使用 Groovy 中的[WsdlTestStepFactory](http://www.soapui.org/apidocs/index.html?com/eviware/soapui/impl/wsdl/teststeps/registry/WsdlTestStepFactory.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T13:45:59.583

有很多不同的测试步骤。对于常规测试步骤，您可以尝试以下操作：

```
 public String createGroovyScriptTestStep() {
    try {
        String projectName = "C:\\YourProjectName.xml";
        File projectFile = new File(projectName);
        WsdlProjectPro project = new WsdlProjectPro(projectName);

        if (!projectFile.exists()) {
            return "no_project_already_exists";
        }

        WsdlTestSuite testSuite = project
                .getTestSuiteByName("TestSuiteName");

        if (testSuite == null) {
            return "testsuite does not exist";
        } else {
            WsdlTestCase testCase = testSuite
                    .getTestCaseByName("TestCaseName");

            if (testCase == null) {
                return "testcase does not exist";
            } else {

                if (testCase.getTestStepByName("StepName") != null) {

                    return "teststep_already_exists";
                }

                WsdlGroovyScriptTestStep testStep = (WsdlGroovyScriptTestStep) testCase
                        .addTestStep(GroovyScriptStepFactory.GROOVY_TYPE,
                                "StepName");

                testStep.setDescription("Description");
                testStep.setScript("System.out.println('Hi')");

                project.saveIn(projectFile);

                return "teststep_successfully_created";
            }
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

您需要以下 Maven 依赖项：

```
 <dependency>
        <groupId>com.github.redfish4ktc.soapui</groupId>
        <artifactId>maven-soapui-extension-plugin</artifactId>
        <version>4.6.4.1</version>
    </dependency>
    <dependency>
        <groupId>com.fifesoft</groupId>
        <artifactId>rsyntaxtextarea</artifactId>
        <version>1.4.1</version>
    </dependency> 
```

# bash - 是否可以在 bash 中运行一个 for 循环来遍历多个目标？

> ID：15662288
> 
> 赞同：0
> 
> 时间：2013-03-27T15:09:54.390
> 
> 标签：bash, for-loop

是否可以在 bash 中运行一个 for 循环来遍历多个目标？还是我需要使用嵌套的 for 循环？

例如：

```
for i in *.config,*.command; do
  echo "Do something"
done 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:15:26.663

你的意思是这样吗？目前还不太清楚你想要达到什么目标。你能说出你想用哪些配置文件或参数运行哪些命令吗？

```
for i in *.config *.command; do
  echo "Do something to $i"
done 
```

（注意：没有逗号！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:22:13.863

让文件通配符在数组声明中展开。

```
$ touch {1..5}.txt
$ touch {1..5}.cfg

# use nullglob
$ shopt -s nullglob

$ list=(*.txt *.cfg)

# loop over all elements in array
$ for file in "${list[@]}"; do echo "$file"; done
1.txt
2.txt
3.txt
4.txt
5.txt
1.cfg
2.cfg
3.cfg
4.cfg
5.cfg

# number of items
$ echo "${#list[@]}"
10 
```

见[空球](http://mywiki.wooledge.org/NullGlob)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T15:14:55.487

您可以使用

```
for i in `ls *.config *.command` 
do
  echo "hhhh"
done 
```

# javascript - 为什么 'this.value' 有效但 e.value 无效？

> ID：15662290
> 
> 赞同：1
> 
> 时间：2013-03-27T15:09:55.950
> 
> 标签：javascript, this

我是新来的。我在stackoverflow上读了很多，但这是我的第一个问题。希望这不是一个愚蠢的。我知道人群有时会很苛刻，而且通常是应得的。:)

在下面的代码中，当您在第一个输入框中输入文本时，警报不会显示您输入的内容。但是，在第二个框中，当您输入某些内容时，警报会显示它。

区别在于“this.value”与“e.value”的使用。

我认为它们都应该工作，因为'e.value'引用了一个元素，我认为'this.value'也可以，但显然缺少一些东西，因为它没有做同样的事情。

提前致谢。

```
<!DOCTYPE html>
<html>
<head><script>
window.onload = function () {var e;
    e = document.getElementById('eInput');
    if (!e.onkeyup) {e.onkeyup = function () {alert (e.value); }; }
    e = document.getElementById('thisInput');
    if (!e.onkeyup) {e.onkeyup = function () {alert (this.value); }; }
}
</script></head>
<body>
<input type="text" id='eInput'></input><br><br>
<input type="text" id='thisInput'></input>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:25:30.910

函数中的`e`应该引用触发事件的元素。你应该把它改成`function (e) {alert (e.target.value); }; }`

现在`e`是触发 onkeyup 函数的事件，您可以访问目标以获取值。

见[http://jsfiddle.net/yAaYX/](http://jsfiddle.net/yAaYX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:25:16.893

第一个输入不起作用的原因 - 您的`e`变量被覆盖，它指向第二个输入，当时它是空的。

如果您删除第二个输入的 2 行，您会发现它可以正常工作`e.value`- [工作示例](http://jsfiddle.net/WBssG/)

或者只是给变量不同的名称 -`e1`和`e2`-[示例](http://jsfiddle.net/WBssG/1/)

# javascript - jQuery连接选择器而不创建新实例？

> ID：15662293
> 
> 赞同：1
> 
> 时间：2013-03-27T15:10:00.590
> 
> 标签：javascript, jquery, jquery-selectors

*是否可以在不*创建新选择器的情况下连接两个 jQuery 选择器？一个例子如下：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    </head>
    <body>
        <span class="a">A</span>
        <span class="a">B</span>
        <span class="b">C</span>
        <script language="JavaScript" type="text/javascript">
            <!--
                var a = $('.a');
                var b = $('.b');
                var c = a.add(b);

                console.log(a);
                console.log(b);
                console.log(c);
            //-->
        </script>
    </body>
</html> 
```

如上所述编写时会产生以下选择器：

```
a = [ A, B ]
b = [ C ]
c = [ A, B, C ] 
```

我想修改它以产生：

```
a = [ A, B, C ]
b = [ C ]
c = whatever 
```

*在此过程中无需*创建新的选择器，相当于在选择器中的每个元素上使用 Array 的“push”方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:12:37.773

您可以在 jQuery中使用[多个选择器：](http://api.jquery.com/multiple-selector/)

```
$('.a, .b') 
```

上面的选择器将选择所有具有类`.a`和/或`.b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:11:36.593

您可以在 jQuery 字符串中使用多个选择器，只需用逗号分隔它们，如下所示：

```
$('.a, .b') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:21:23.910

您可以使用***内部破解***方法[`push`](https://github.com/jquery/jquery/blob/master/src/core.js#L268)：

```
a.push.apply(a, b.get());  // it accepts only native DOM elements 
```

但我不建议您使用它，因为它没有记录并且仅供内部使用。而是使用简单的：`a = a.add(b)`。

**参考：** [https ://stackoverflow.com/a/14345461/1249581](https://stackoverflow.com/a/14345461/1249581)

# ios - 为背景图像处理不同的 iphone 屏幕尺寸/分辨率

> ID：15662296
> 
> 赞同：2
> 
> 时间：2013-03-27T15:10:09.270
> 
> 标签：ios, ios5, uiimage, iphone-5, screen-size

我想更好地了解 iphone 分辨率等。

我有一个具有基本 buttonView 和 logoView 的应用程序。我已经输出了 logoView 的高度，它将根据屏幕尺寸自动适应高度。

对于 iphone5，我有 318 可以使用。对于 iphone4(<) 我有 230 个可以使用。

我的问题是，我应该如何处理用于该视图背景的图像。我会为以下创建一个三个单独的图像吗？-iphone3 等 (230) -iphone4 视网膜 (230 尺寸, @2) -iphone5 视网膜 (328 尺寸, @2)

还是我只创建 2x 230 图像，当使用 iphone5 并且有更多可用空间时，我可以将图像拉伸到 318 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:46:38.647

这一切都取决于你的形象：

*   如果您的图像可以拉伸，UIImageView 将完成所有工作。
*   如果你的图像只有一部分应该被拉伸，你应该使用这个：
    *   `imageView.image = [imageView.image resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)];`
*   如果您的图像无法拉伸，您应该为手机制作不同的图像并在运行时更改它们。

**更新**

`viewDidLoad`最后一点，你可以在你的方法中做这样的事情：

```
BOOL isIPhone = [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone;
BOOL isIPhone5 = isIPhone && ([[UIScreen mainScreen] bounds].size.height > 480.0);
if (isIPhone5) {
   imageView.image = [UIImage imageNamed:@"iphone4image.png"];
} else {
    imageView.image = [UIImage imageNamed:@"iphone5image.png"];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-17T10:16:50.923

iOS 8 对不同的屏幕有不同的尺寸等级。这里解释得很好。每个 iOS 开发者都应该通过这个[链接](https://medium.com/@getaaron/ios-8-development-tips-for-iphone-6-and-iwatch-1c772554ffe0)：

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-20T19:28:20.377

如果你想让它更简洁一点，你可以用宏来解释更长的屏幕尺寸。

```
#define ASSET_BY_SCREEN_HEIGHT(regular, longScreen) (([[UIScreen mainScreen] bounds].size.height <= 480.0) ? regular : longScreen) 
```

示例用法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.splashScreenImageView.image = [UIImage imageNamed:ASSET_BY_SCREEN_HEIGHT(@"Default", @"Default-568h")];
} 
```

# android - Adobe Flash AIR 覆盖 Android 后退按钮

> ID：15662300
> 
> 赞同：1
> 
> 时间：2013-03-27T15:10:15.163
> 
> 标签：android, actionscript-3, flash, air, adobe

在我的 AIR AS3 应用程序中，我试图像这样覆盖后退按钮：

```
NativeApplication.nativeApplication.addEventListener( KeyboardEvent.KEY_DOWN, onKey );

private function onKey(e:KeyboardEvent):void 
{
    if (e.keyCode == Keyboard.BACK)
    {
        //stage.addChild(new MainMenuScreen());
        //stage.removeChild(this);
        //removeEventListener(KeyboardEvent.KEY_DOWN, onKey);
    }
} 
```

在我看来，我的代码已经完成，但默认的 Android 行为*（应用程序已关闭）*也被执行。
有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:00:12.063

如果你想停止应用关闭，你应该拦截 EXITING 事件：

```
NativeApplication.nativeApplication.addEventListener(Event.EXITING, exitHandler);

function exitHandler(event:Event):void
{
    event.preventDefault();
} 
```

我想我应该补充一点，您可以手动关闭应用程序：

```
NativeApplication.nativeApplication.exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:24:28.327

只需阻止默认操作*（关闭应用程序）*，但确保在无事可做时仍允许关闭应用程序*（例如，通过使用`readyToClose`变量）*：

```
private function onKey(e:KeyboardEvent):void 
{
    if(e.keyCode == Keyboard.BACK)
    {
        if(!readyToClose)
        {
            e.preventDefault();

            //stage.addChild(new MainMenuScreen());
            //stage.removeChild(this);
            //removeEventListener(KeyboardEvent.KEY_DOWN, onKey);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:30:31.963

谢谢大家的帮助！问题是由于我的 FlashDevelop IDE 造成的。我使用了 PackageApp.bat 而不是 Run.bat，所以我的 .apk 的错误版本被部署到了设备上。希望这篇文章能帮助其他可能面临这个问题的人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T22:47:11.893

这是另一种方法 - 如果您使用多个阶段，您可以将其放在第一个操作面板的第 1 帧中

```
NativeApplication.nativeApplication.addEventListener(KeyboardEvent.KEY_DOWN, CheckKeypress, false, 0, true)

function CheckKeypress(event:KeyboardEvent):void 
{ 
    switch (event.keyCode) 
    { 
        case Keyboard.BACK: 
        event.preventDefault();
        gotoAndPlay (1);
        break; 
        case Keyboard.MENU: 
        trace("Menu key is pressed.");
        break; 
        case Keyboard.SEARCH: 
        trace("Search key is pressed."); 
        break; 
        } 
        } 
```

# ms-access - MS Access 失败后如何恢复 ODBC 连接

> ID：15662302
> 
> 赞同：2
> 
> 时间：2013-03-27T15:10:16.660
> 
> 标签：ms-access, odbc, database-connection, vba, reconnect

有一个 MS Access 应用程序，其中包含通过 ODBC 链接的 MS SQL Server 上的表。当连接丢失时，我收到 ODBC 错误 3146。在物理上恢复连接后，我仍然收到 ODBC 3146 错误。我必须重新连接到服务器。我如何在 MS Access 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:30:57.987

我认为您需要做的就是刷新表格链接。您是否在问如何以编程方式重新链接表格？您是否尝试在断开连接后刷新链接并验证它可以解决问题？刷新 VBA 中的链接类似于

```
Dim db as Database
Set db = Currentdb()
db.TablesDefs(1).RefreshLink 
```

您可能必须遍历表以获取索引我不确定它是否会采用表名，但您可以先尝试这种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:57:49.143

参考 SQL Server 的 Access 表在哪里？如果您的 Access 表是本地的并且您是唯一使用它的人，那么刷新表链接就足够了。但是，如果 Access db 位于服务器或其他许多人使用它的共享空间上，如果您使用的是 USER DSN，他们将无法访问 SQL 表。设置系统 DSN 或 dsn 文件将为 Access 提供它正在寻找的有关 SQL 表所在位置的信息。

# ruby-on-rails - 用户控制器中的名称错误#show

> ID：15662304
> 
> 赞同：2
> 
> 时间：2013-03-27T15:10:19.110
> 
> 标签：ruby-on-rails, nameerror, uninitialized-constant

我目前正在编写 Michael Hartl 的 Ruby on Rails 教程。我试图通过在视图目录中创建一个带有嵌入式 ruby​​ 页面的 HTML 来为我的数据库中的每个用户添加一个页面。show.html.erb 的代码如下：

```
 <%= @user.name %>, <%= @user.email %> 
```

当我将用户添加到 user_controller.rb 文件时，它看起来像这样：

```
class UsersController < ApplicationController
    def show
       @user = User.find(params[:id])
    end

    def new
    end
  end 
```

当我运行 rails 服务器并单击打开 users/1 URL 时，我收到 NameError 抱怨未初始化的常量。错误和跟踪如下：

```
NameError in UsersController#show
uninitialized constant UsersController::User

Rails.root: /usr/sample_app
Application Trace | Framework Trace | Full Trace

app/controllers/users_controller.rb:3:in `show'
actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.12) lib/active_support/callbacks.rb:414:in         
.
.
.
. 
```

请让我知道如何解决这个问题，因为我无法通过我的规范测试并出现此错误。如果有人有任何建议或见解，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:08:17.430

控制器文件名应该是`users_controller.rb`

正如你在评论中提到的`you don't have any User model defined`。创建模型运行`rails g model user name:string email:string`。这将创建`User`具有属性的模型`name and email`。

尝试 Rails`scaffolding`并查看它创建的文件（`controller, model and views`暂时忽略其他文件）并查看这些文件的内容。使用脚手架进行创建`User`如下：

```
 rails g scaffold user name:string email:string
     rake db:migrate 
```

# c# - C#文件输出（.exe）即使没有程序运行也可以运行代码

> ID：15662307
> 
> 赞同：0
> 
> 时间：2013-03-27T15:10:28.937
> 
> 标签：c#, embed, exe

好吧，我承认标题有些模糊，我不知道如何在标题中描述它。即使是标签，我也不知道该为这个问题添加什么。

所以，我有一个加密和解密程序（在 c# 中），我可以将它加密成 .exe 文件。现在，我想在不运行程序的情况下将其解密。我只是想运行 .exe 文件，它会自行解密（使用我自己的算法）。

我现在的概念是我需要在加密时嵌入我的解密代码。有什么办法吗？Google() 不能真正帮助我，因为我不知道这方面的条款。也许这里的任何人都可以帮助我？

大概的概念：

我的加密功能：

```
Encrypt(string input, string output, string key)
{
    .....after all encryption happens....
    <produce output which is .exe>
    <embed the decryption function, which will run when .exe is launched>
} 
```

我的解密功能（加密文件时需要嵌入的功能）：

```
Decrypt(string input, string output, string key) 
```

如果我让自己感到困惑，请提醒我。我会尽量让它更容易理解。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:13:41.607

我有两个建议：

**复杂的解决方案：**

1.  使用 make en.exe 加密您的文件
2.  打开 en.exe 并将其逐字节嵌入到项目中的字符串中，该项目将 Decryptor 作为主函数运行。
3.  编译步骤 2 的项目。结果是自我贬低者

注意：您可以即时执行第 2 步。我的意思是你的加密器在运行时制作这个 C# 项目，然后编译它。此方法使用 RunTime Compile 概念。

**简单的解决方案：**

使用`WinRar`. 它可以加密/解密，密码保护和制作EXE文件。一切都非常简单，可以用命令行完成。

# android - 在 android 上验证 md5sum

> ID：15662309
> 
> 赞同：0
> 
> 时间：2013-03-27T15:10:41.827
> 
> 标签：android, busybox, md5sum

我想在我的 android 应用程序中提供一个 md5 验证器，它比较服务器 md5 和刚刚在设备上创建的一个。输出应该是正确或不正确的，而不是用户必须比较哈希值。我已经发现可以通过

```
/system/xbin/busybox md5sum /sdcard/Download/FILENAME 
```

. 当然，我可以将命令的输出打印到屏幕上，但这不是我想要的。因为我不想重新发明轮子，这样的东西已经可用了吗？SHA1 也是可能的，两种哈希都可用。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:17:56.407

对于“服务器 md5”，我猜你的意思是服务器上另一个包含 md5 哈希的文件。

所以你可以下载 md5 文件，打开它并将里面的字符串与你计算的 md5 进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:20:02.367

我已经使用这种方法来计算 Android 应用程序内部的 md5

```
private String getMD5(String file){
    String md5 = "";

    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        FileInputStream is = this.openFileInput(file);

        DigestInputStream dis = new DigestInputStream(is, md);
        byte data[] = new byte[1024];
        @SuppressWarnings("unused")
        int count;
        while ((count = dis.read(data)) != -1) {

        }
        byte[] digest = md.digest();

        for (int i=0; i < digest.length; i++) {
            md5 += Integer.toString( ( digest[i] & 0xff ) + 0x100, 16).substring( 1 );
        }
        return md5;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return md5;
} 
```

# java - 为什么我的 array.size() 给出错误的值？

> ID：15662314
> 
> 赞同：0
> 
> 时间：2013-03-27T15:10:58.283
> 
> 标签：java, arraylist

我有一个`ArrayList`名为的实例`array`。当我解析一些 JSON 数据时，它将全部存储在`array`. 当我这样做时，`System.out.println(array);`它会列出一长串项目，大约 30 个，但是当我写`System.out.println(array.size);`它时，它会给出一个值。

当列表包含至少 30 个值时，为什么它只给我值 1？

我的代码：

```
public void setLocationName (String name) {
    array = new ArrayList<String>();
    array.add(name);
    System.out.println(array); //This return a long list
    System.out.println(array.size()); //But this only return the value 1
}

public String[] getLocationName() {
    String tArray[] = null;
    for (int i = 0; i < array.size(); i++){
      System.out.println(i);
      tArray = array.toArray(new String[i]);    
    }       
    return tArray;
} 
```

}

长名单：

```
[Brunnsparken, Göteborg]
[Brunnsgatan, Göteborg]
[Brunnslyckan, Lerum]
[Brunnsbotorget, Göteborg]
[Brunnsnäs, Ulricehamn]
[Brunnshult, Mellerud]
[Brunnsdal, Skövde]
[Brunns skola, Ulricehamn]
[Brunnsgården, Kungälv]
[Brunns kyrka, Ulricehamn]
[Boråsparken, Borås]
[Stadsparken, Ulricehamn]
[Lysekilsparken, Lysekil]
[Mössebergsparken, Falköping]
[Dalaborgsparken, Vänersborg]
[Rösparken, Åmål]
[Lillhagsparken Norra, Göteborg]
[Lillhagsparken Södra, Göteborg]
[Sylte Ryrbäcksparken, Trollhättan]
[Skogstomtsparken, Borås]
[Svinesundsparken, Norge]
[Håjumsparken, Trollhättan]
[Eriksdalsparken, Bollebygd]
[Fridhemsparken, Lidköping] 
```

我的结果将是列表中仅返回一项，`tArray`但我想返回整个列表。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:16:06.500

Java不明白`Json`，基本上你正在做的是将一个字符串添加到一个数组中

`this.array.add(name);`---> 向数组添加一个值，因此大小只有一个

您可能需要使用特定的`Json`库将数据解析为 java 数组列表。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:38:00.863

看起来你需要将它们解析`String`成对。

在我看来，`Map`可能是最适合存储数据的结构 - 我认为值的第一部分是唯一的。

正则表达式可能是解析数据的最佳方法：

```
public static void main(String[] args) {

    final String data = "[Brunnsparken, Göteborg]\n"
            + "[Brunnsgatan, Göteborg]\n"
            + "[Brunnslyckan, Lerum]\n"
            + "[Brunnsbotorget, Göteborg]\n"
            + "[Brunnsnäs, Ulricehamn]\n"
            + "[Brunnshult, Mellerud]\n"
            + "[Brunnsdal, Skövde]\n"
            + "[Brunns skola, Ulricehamn]\n"
            + "[Brunnsgården, Kungälv]\n"
            + "[Brunns kyrka, Ulricehamn]\n"
            + "[Boråsparken, Borås]\n"
            + "[Stadsparken, Ulricehamn]\n"
            + "[Lysekilsparken, Lysekil]\n"
            + "[Mössebergsparken, Falköping]\n"
            + "[Dalaborgsparken, Vänersborg]\n"
            + "[Rösparken, Åmål]\n"
            + "[Lillhagsparken Norra, Göteborg]\n"
            + "[Lillhagsparken Södra, Göteborg]\n"
            + "[Sylte Ryrbäcksparken, Trollhättan]\n"
            + "[Skogstomtsparken, Borås]\n"
            + "[Svinesundsparken, Norge]\n"
            + "[Håjumsparken, Trollhättan]\n"
            + "[Eriksdalsparken, Bollebygd]\n"
            + "[Fridhemsparken, Lidköping]";
    final Pattern pattern = Pattern.compile("\\[([^,]++),\\s++([^\\]]++)\\]");
    final Matcher matcher = pattern.matcher(data);
    final Map<String, String> items = new TreeMap<>();
    while (matcher.find()) {
        items.put(matcher.group(1), matcher.group(2));
    }
    for (final Entry<String, String> entry : items.entrySet()) {
        System.out.println(entry);
    }
} 
```

输出：

```
Boråsparken=Borås
Brunns kyrka=Ulricehamn
Brunns skola=Ulricehamn
Brunnsbotorget=Göteborg
Brunnsdal=Skövde
Brunnsgatan=Göteborg
Brunnsgården=Kungälv
Brunnshult=Mellerud
Brunnslyckan=Lerum
Brunnsnäs=Ulricehamn
Brunnsparken=Göteborg
Dalaborgsparken=Vänersborg
Eriksdalsparken=Bollebygd
Fridhemsparken=Lidköping
Håjumsparken=Trollhättan
Lillhagsparken Norra=Göteborg
Lillhagsparken Södra=Göteborg
Lysekilsparken=Lysekil
Mössebergsparken=Falköping
Rösparken=Åmål
Skogstomtsparken=Borås
Stadsparken=Ulricehamn
Svinesundsparken=Norge
Sylte Ryrbäcksparken=Trollhättan 
```

您可以通过循环（如上）或`Map`通过按键获取值来访问项目。`TreeMap`我使用的将按键排序数据，您也可以使用 a按`LinkedHashMap`插入顺序存储数据。

您还可以将项目存储在`List`类似元组的结构中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:34:03.253

```
public void setLocationName (String name) {
    array = new ArrayList<String>();
    array.add(name);
    System.out.println(array); //This return a long list
    System.out.println(array.size()); //But this only return the value 1
} 
```

`ArrayList`每次调用此方法时，您都会创建一个新的：

`array = new ArrayList<String>();`

您可以只删除上面的行，但是我建议您重命名该方法，因为这不再是一个 setter，实际上您现在每次调用此方法时都会添加到现有列表中。

我建议您要做的是在解析到 setter 之前构建您的 List，也许使用[`foreach`循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)（我不确定您正在使用哪种对象）并简化您的 setter ( `setLocationName`) 以适应。

所以它会变成：

```
public void setLocationName(ArrayList<String> names)
    {
        this.array = names;
        System.out.println(array); //This return a long list
        System.out.println(array.size()); //But this only return the value 1
    } 
```

# c# - 传入字典的模型项是 X 类型，但是这个字典需要 X 类型的模型项

> ID：15662316
> 
> 赞同：0
> 
> 时间：2013-03-27T15:11:00.373
> 
> 标签：c#, asp.net-mvc-4

我正在尝试创建一个`ViewModel`. 对于我的应用程序，我想显示一个客户列表，其中他们的帐户存在错误。错误由另一个程序存储在数据库中。

最终目的是定期向其帐户中的项目有错误的客户发送消息（我们正在处理车辆，因此一个示例可能是车牌检查出现问题并需要客户采取行动） .

我创建了一个`ViewModel`名为 CustomerAlerts.cs

```
using MyProjectName.Models;

namespace MyProjectName.ViewModels
{
    public class CustomerAlerts
    {
        public IEnumerable<string> companynames { get; set; }
    }
} 
```

我创建了一个控制器 CustomerAlertsController.cs。

```
private TestDB_FleetCompany_Dashboard_Entities db = new TestDB_FleetCompany_Dashboard_Entities();

public ActionResult Index()
{

    var viewModel = new CustomerAlerts
    {
        companynames = (from v in db.Vehicles.Include(v => v.Company)
                        where v.Issue != null
                        select new { customernames = v.Company.Name }).Select(v => v.customernames).AsEnumerable()
    };

    return View(viewModel);
} 
```

在我的视野中，我有

```
@model IEnumerable<MyProjectName.ViewModels.CustomerAlerts> 
```

我想显示受影响的公司名称列表（我打算稍后添加一列，用于计算有问题的车辆数量）。

```
@foreach (var affected in Model)
{
    <tr>
        <td>@Html.DisplayForModel(affected.companynames)</td>
        <td></td>
    </tr>
} 
```

当我尝试运行所有内容时，我收到以下消息：

> 传入字典的模型项的类型为“MyProjectName.ViewModels.CustomerAlerts”，但此字典需要“System.Collections.Generic.IEnumerable`1[MyProjectName.ViewModels.CustomerAlerts]”类型的模型项。

虽然我喜欢一个解决方案或一点帮助，但我会很感激我应该阅读的内容，以帮助我自己找出解决方案。

我试过了：

```
return View(viewModel.AsEnumerable()); 
```

但这会导致“不包含 AsEnumerable 的定义”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:14:46.047

您正在将单个实例传递`CustomerAlerts`给您的视图，但您的视图的模型类型是`CustomerAlerts`.

传递一个集合`CustomerAlerts`，或者将您的视图模型类型更改为：

```
@model MyProjectName.ViewModels.CustomerAlerts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:14:52.527

这是因为您`CustomerAlerts`从您的`Index`方法中返回了您的单个实例，并且您的视图需要它的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:07:57.460

As per @devdigital above the answer that worked for me was to change the view model type to:

```
@model MyProjectName.ViewModels.CustomerAlerts 
```

I did try this before, but was missing something else in the view that was causing an exception. The foreach statement needed some adjustment to this:

```
@foreach (var companyname in Model.companynames)
{
    <tr>
        <td>@companyname</td>
        <td>@companyname.Count()</td>
    </tr>
} 
```

This now shows a handy list of the companies carrying errors and how many vehicles in their inventory are in an error state.

# perl - Perl 正则表达式示例不起作用

> ID：15662319
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:11:07.807
> 
> 标签：perl

我只是想测试我在杂志（Linux Shell Handbook）上看到的东西。我从来没有真正尝试过这样的事情，但我知道这可能很有用

例子是

```
perl -n -e '/^The \s+(.*)$/ print "$1\n"' heroes.txt 
```

在 heros.txt 它有

```
Catwoman
Batman
The Tick
Spider-Man
Black Cat
Batgirl
Danger Girl
Wonder Woman
Luke Cage
Ant-Man
Spider-Woman 
```

这应该显示 Tick，但是我得到了

```
perl -n -e '/^The \s+(.*)$/ print "$1\n"' heroes.txt
syntax error at -e line 1, near "/^The \s+(.*)$/ print"
Execution of -e aborted due to compilation errors. 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:15:47.410

最好这样做：

```
$ perl -lne 'print $1 if /^The\s+(.*)$/' heroes.txt
Tick 
```

或者

```
$ perl -lne '/^The\s+(.*)$/ && print $1' heroes.txt
Tick 
```

您的原始命令中有一些错误：

```
perl -n -e '/^The \s+(.*)$/ print "$1\n"' heroes.txt 
```

*   这是一个语法错误，您不能使用`m//`（*匹配*运算符，`m`如果与分隔符一起使用，则不是强制性的`/`），后跟`print`：
*   最好使用`if`or `&&`（就像在我的 2 个片段中一样）语句来不打印不匹配的行
*   `\s`已经是一个空格（或空白字符），所以不要重复文字空格和`\s`

* * *

```
action if condition; 
```

是的简写

```
if (condition) {action}; 
```

# class - 从另一个表单访问我的课程

> ID：15662322
> 
> 赞同：1
> 
> 时间：2013-03-27T15:11:10.620
> 
> 标签：class

我已经在我的表单中启动了一个类，如下所示：

```
namespace StartScreen
{
    public partial class SetupScreen : Form
    {
        Battleship myBattleship;
        Control myObject;

        public SetupScreen()
        {
            InitializeComponent();

            myBattleship = new Battleship();
            //Create Class Object
        }
    }
} 
```

我想以另一种形式访问类对象 myBattleship，我可以通过它，但是当我这样做时，我无法将其公开，因此可以从新形式的任何地方访问它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:16:59.163

在主要形式：

```
 public  class Battleship
{
   //define what you want///
}
 public  myBattleship = new Battleship(); 
```

在您想使用 myBattleship 的表单中：

```
MainForm.myBattleship; 
```

# jetty - 获取 Jetty HttpClient 以跟踪重定向

> ID：15662323
> 
> 赞同：0
> 
> 时间：2013-03-27T15:11:11.017
> 
> 标签：jetty, jetty-8

我有一个使用 Jetty 版本 8 发送 http 帖子的程序。我的响应处理程序工作，但我得到一个 http 响应代码 303，这是一个重定向。我读了一条评论说码头 8 支持遵循这些重定向，但我不知道如何设置它。我试过查看[javadocs](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/client/package-summary.html)，找到了 RedirectListener 类，但没有关于如何使用它的详细信息。我试图猜测如何编码它没有奏效，所以我被困住了。感谢所有帮助！

**编辑**

我查看了码头源代码，发现它只会在响应代码为 301 或 302 时重定向。我能够覆盖 RedirectListener 以使其也处理休息代码 303。之后，Joakim 的代码完美运行。

```
public class MyRedirectListener extends RedirectListener
{
   public MyRedirectListener(HttpDestination destination, HttpExchange ex)
   {
      super(destination, ex);
   }

   @Override
   public void onResponseStatus(Buffer version, int status, Buffer reason)
       throws IOException
   {
      // Since the default RedirectListener only cares about http
      // response codes 301 and 302, we override this method and
      // trick the super class into handling this case for us.
      if (status == HttpStatus.SEE_OTHER_303)
         status = HttpStatus.MOVED_TEMPORARILY_302;

      super.onResponseStatus(version,status,reason);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:46:29.380

足够简单

```
HttpClient client = new HttpClient();
client.registerListener(RedirectListener.class.getName());
client.start();

// do your exchange here
ContentExchange get = new ContentExchange();
get.setMethod(HttpMethods.GET);
get.setURL(requestURL);

client.send(get);
int state = get.waitForDone();
int status = get.getResponseStatus();
if(status != HttpStatus.OK_200)
   throw new RuntimeException("Failed to get content: " + status);
String content = get.getResponseContent();

// do something with the content

client.stop(); 
```

# xcode - NSScrollView 位置总是底部

> ID：15662327
> 
> 赞同：1
> 
> 时间：2013-03-27T15:11:20.353
> 
> 标签：xcode, macos, user-interface, interface-builder, nsscrollview

我正在编写一个安装程序插件，由于屏幕上的信息量很大，我需要使用 NSScrollView。问题是现在滚动条的默认位置在底部，而我希望它在顶部。

如何将滚动条的默认位置设置为顶部。

# javascript - Ace Editor 可以在一页中支持多个代码编辑器吗？

> ID：15662337
> 
> 赞同：11
> 
> 时间：2013-03-27T15:11:38.713
> 
> 标签：javascript, jquery, ace-editor, code-editor

我正在寻找实现一个网络应用程序，该应用程序具有“编码竞赛”风格的界面，在一个屏幕上带有 2 个不同的代码编辑器。一个是只读的，另一个是活动的，允许用户编辑。

我目前正在使用 Ace Editor，我发现它很棒且易于使用。

但是，这是我的问题。**尝试在单个页面中实现 2 个不同的编辑器时，我似乎遇到了错误。**

> 未捕获的 RangeError：超出最大调用堆栈大小

js脚本中的变量“editor”是受限词还是使用什么变量名无关紧要？

这是我的 JS 文件中的代码：

```
var editorFirst = ace.edit("editorFirst");
var editorSecond= ace.edit("editorSecond");
setupEditor();

function setupEditor() {
    editorFirst.setTheme("ace/theme/eclipse");
    editorFirst.getSession().setMode("ace/mode/javascript");
    editorFirst.setShowPrintMargin(false);
    editorFirst.setHighlightActiveLine(true);
    editorFirst.resize();
    editorFirst.setBehavioursEnabled(true);
    editorFirst.getSession().setUseWrapMode(true);
    document.getElementById('editorFirst').style.fontSize = '14px';

    editorSecond.setTheme("ace/theme/eclipse");
    editorSecond.getSession().setMode("ace/mode/javascript");
    editorSecond.setShowPrintMargin(false);
    editorSecond.setHighlightActiveLine(true);
    editorSecond.resize();
    editorSecond.setBehavioursEnabled(true);
    editorReducer.getSession().setUseWrapMode(true);
    document.getElementById('editorSecond').style.fontSize = '14px';
} 
```

这是我的html文件代码：

```
<script src="../assets/js/main.js"></script>
<script src="../assets/js/src/ace.js" type="text/javascript" charset="utf-8"></script>
<div id="editorFirst"></div>
<div id="editorSecond"></div> 
```

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-11-24T21:28:56.443

我所做的不是使用 id 编辑器，而是将其设置为一个类，所以我只是迭代了每个编辑器。

```
var editor;
$('.editor').each(function( index ) {
  editor = ace.edit(this);
  editor.getSession().setMode('ace/mode/csharp');
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T21:44:03.137

Ace 可以支持任意数量的[编辑器](http://ace.ajax.org/demo/scrollable-page.html)。问题是最近的[回归](https://github.com/ajaxorg/ace/issues/1322)，这`resize`让编辑们`height=0`看到[这个演示](http://jsbin.com/ojijeb/44/edit)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-06T07:42:08.017

是的，它可以支持。看看我的例子[http://jsfiddle.net/igos/qLAvN/](http://jsfiddle.net/igos/qLAvN/)

```
$(function() {
    var editor1 = ace.edit("editor1");
    editor1.getSession().setMode("ace/mode/java");

    var editor2 = ace.edit("editor2");
    var editor3 = ace.edit("editor3");
    $( "#accordion" ).accordion({
        fillSpace: true,
        change: function() {
            $(editor1).resize(); 
            $(editor2).resize(); 
            $(editor3).resize(); 
        }
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T07:23:08.783

这个方法可以制作无限的王牌编辑器：

```
<pre class='editor' data-name='editor_1' id='editor_1'></pre>
<input  name='editor_1' type='hidden' value='' />

<pre class='editor' data-name='editor_2' id='editor_2'></pre>
<input  name='editor_2' type='hidden' value='' />

<pre class='editor' data-name='editor_3' id='editor_3'></pre>
<input  name='editor_3' type='hidden' value='' />

<script type="text/javascript">

$(document).ready(function(){

ace.require("ace/ext/language_tools");
var editor;
var ednum = 0;
ace_config = {
    maxLines: Infinity,
    enableBasicAutocompletion: true,
    enableSnippets: true,
    enableLiveAutocompletion: false
};

$('.editor').each(function( index ) {
    ednum++;
    _name = "editor_"+ednum;
    code = "var name = $(this).data('name');"
    +_name+" = ace.edit(this);"
    +_name+".setTheme('ace/theme/chrome');"
    +_name+".getSession().setMode('ace/mode/less');"
    +_name+".setOptions(ace_config);"
    +"var code_"+ednum+" = $('textarea[name='+name+']');"
    +_name+".getSession().setValue($('input[name='+name+']').val());"
    +_name+".getSession().on('change', function(){"
    +"$('input[name='+name+']').val("+_name+".getSession().getValue());"
    +"});";
    eval(code);

});

</script> 
```

演示：[无限王牌编辑](https://codepen.io/Aghaie/pen/OjLzNz)

# ios - ios关于引用传递

> ID：15662338
> 
> 赞同：3
> 
> 时间：2013-03-27T15:11:41.130
> 
> 标签：ios, reference, pass-by-reference

根据我目前的理解，“通过引用”的推荐方式（启用 ARC）如下：

```
-(void)somefunc:(someclass **)byref; 
// and 'someclass **' should be inferred to 'someclass * __autoreleasing *'
// am i right?

//or we could just explicitly define it like 
-(void)somefunc:(someclass * __autoreleasing *)byref; 
```

但是，从这个线程的答案，[Handling Pointer-to-Pointer Ownership Issues in ARC](https://stackoverflow.com/questions/8814718/handling-pointer-to-pointer-ownership-issues-in-arc)。

似乎 -(void)somefunc:(someclass *__strong *)byref 也可以解决问题（在上述链接的 demo2 中）。

```
1.-(void)somefunc:(someclass * __autoreleasing *)byref;
2.-(void)somefunc:(someclass *__strong *)byref 
```

对于第一个，正如 Apple 所记录的，它应该由编译器隐式重写，如下所示：

```
NSError * __strong error;
NSError * __autoreleasing tmp = error;
BOOL OK = [myObject performOperationWithError:&tmp];
error = tmp; 
```

看来第二个的性能更好？因为它省略了“赋值回”和“自动释放”的过程。但我很少看到这样声明的函数。使用第二个函数来完成“按引用传递”工作是更好的方法吗？

有什么建议或解释吗？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T15:42:33.400

第二个函数不是线程安全的/'延迟安全'。第一个更正确。

与为什么块捕获参数和 performSelector 保留对象的原因相同。

* * *

想象调用者 fA 分配了对 A 的强引用，然后调用了 ASYNC 函数 fB。fA 完成了，fB 还没有跟注.... 那么在此期间谁保留了 A？

# c++ - Visual Assist 的查找所有引用是否只能找到对某些类构造函数的引用？

> ID：15662352
> 
> 赞同：3
> 
> 时间：2013-03-27T15:12:16.050
> 
> 标签：c++, visual-studio, visual-assist

我有 C++ 代码，并且 VA 工作得很好，但是当我去的时候我有点不喜欢

```
MyClass::MyClass(const std::string& arg); 
```

并尝试查找引用它会找到 MyClass 的引用，而不仅仅是这个特定的 ctor。可以实现期望的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-08T13:16:25.080

尽管此功能在 VS2013 SP3 中仍然不可用，但存在一种解决方法。有些人可能会认为这是胡扯，但对我有用的是更改构造函数签名（通过引入额外的未使用参数）并重新编译整个解决方案。让编译错误指出所有调用。不需要 VA。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:14:41.900

根据他们论坛上的[这篇文章](http://forums.wholetomato.com/forum/topic.asp?TOPIC_ID=10865&SearchTerms=1262)，它尚未实施。

*他们列举了检测对象构造*与*显式成员访问*的难度增加。

# c# - 如何从 Windows 事件查看器获取特定应用程序的事件日志

> ID：15662353
> 
> 赞同：4
> 
> 时间：2013-03-27T15:12:16.203
> 
> 标签：c#, event-log, eventlog-source

我正在实现一个类似于 Windows 事件查看器的应用程序。我的意思是它在类的帮助下监控系统事件日志和应用程序事件`EventLog`日志`EventLogEntry`。

是否可以获取特定进程（例如 Chrome）的应用程序事件日志？

在日志条目列表中，我可以找到不同的来源，例如、`"Winlogon"`等，但不是特定应用程序的名称。`"WMI"``"MSSQL$SQLEXPRESS"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:15:08.277

应用程序名称未记录在事件日志条目中。事实上，即使来源也不是可靠的指标，因为您可以使用任何您想要的来源编写自己的信息。

# visual-studio - Team Foundation 服务器自动构建

> ID：15662357
> 
> 赞同：0
> 
> 时间：2013-03-27T15:12:30.017
> 
> 标签：visual-studio, tfsbuild

我们有一个通过批处理文件构建的大型非 Visual Studio C++ 项目。我已将它集成到 Visual Studio 中作为 makefile 项目，在项目属性中自定义“构建命令行”，效果很好并且已经完成了一年多。

我现在希望介绍 Team Foundation Server 并配置自动构建。

如果我在 Visual Studio 中构建项目，那么项目将正常构建。
如果我使用自动构建服务器来构建项目，构建每次都会失败

在构建报告中查看日志文件的选项显示为灰色。给出的报告是

*命令“Autobuild.cmd”以代码 1 退出。*

其中 autobuild 是解决方案的“构建命令行”中指定的 cmd 文件。

谁能想到可能是这种情况的原因，我假设构建服务器只会使用“要构建的项目”框中指定的项目运行构建命令。如果是这种情况，那么我看不出它为什么会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:26:39.020

有很多可能的原因；不幸的是，您没有提供足够的信息来回答这些问题。

要尝试的第一件事是将构建定义日志记录级别更改为`Diagnostic`. （您也可以在对新构建进行排队时执行此操作）。

我还建议实际上将您的 makefile 包装在 msbuild.proj 文件中。

像这样简单的东西：

```
<Project ToolsVersion="4.0" DefaultTargets="build"
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="build">
    <Exec Command="autobuild.cmd" />
  </Target>
</Project> 
```

[Exec 任务](http://msdn.microsoft.com/en-us/library/ms124737.aspx)有很多选项可以自定义 cmd的调用方式，并且可以帮助您诊断错误。

一般来说，如果您想利用 TFS 构建，我建议您将尽可能多的 autobuild.cmd 迁移到 msbuild。MSBuild 是 TFS 的“makefile”语言，可以这么说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:19:19.990

在您的构建定义中，您可以选择记录，在那里您可以将其更改为`Verbose`记录。也许你会在你的日志文件中得到一些信息。

对于 exited with code 1 的问题，我认为您需要添加一些额外的信息行以在 cmd 程序中打印，并且当您登录 TFS Build 时，您可能会看到有关它的更多信息。

# javascript - Object.create 是否也创建自己的属性

> ID：15662363
> 
> 赞同：0
> 
> 时间：2013-03-27T15:12:42.840
> 
> 标签：javascript, inheritance

我知道您可以使用此函数设置新对象的原型（[阅读 mozzilla 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)），但如果它在这样的对象文字中使用，它是否也会创建自己的属性

```
return Object.create(this); 
```

我也从一个 Klass 文字中知道这个方法，它只复制实例方法

```
var subclass = function() { };
subclass.prototype = parent.prototype;
klass.prototype = new subclass; 
```

主要是我对 object.create 方法感兴趣

编辑

```
 var Klass = {
  init: function(){},

  prototype: {
    init: function(){}
  },

  create: function(){
    var object = Object.create(this);
    console.log('object with class create');
    console.log(object);
    console.log("object's parent is this");
    console.log(this);
    object.parent = this;
    object.init.apply(object, arguments);
    console.log('returned object from create');
    console.log(object);
    return object;
  },

  inst: function(){
    var instance = Object.create(this.prototype);
    console.log('de instance na object create');
    console.log(instance);
    instance.parent = this;
    instance.init.apply(instance, arguments);
    console.log('arguments in inst');
    console.log(arguments);
    return instance;
  },

  proxy: function(func){
    var thisObject = this;
    return(function(){ 
      return func.apply(thisObject, arguments); 
    });
  },

  include: function(obj){
    var included = obj.included || obj.setup;
    for(var i in obj)
      this.fn[i] = obj[i];
    if (included) included(this);
  },

  extend: function(obj){
    var extended = obj.extended || obj.setup;
    for(var i in obj)
      this[i] = obj[i];
    if (extended) extended(this);
  }
};

Klass.fn = Klass.prototype;
Klass.fn.proxy = Klass.proxy; 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:43:39.723

[MDN 对象.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

> 概括
> 
> 使用指定的原型对象和属性创建一个新对象。

因此，让我们看一个简单的例子，其中一个用`new`关键字实例化的对象和一个用`Object.create`;实例化的对象。

```
function objectDotCreate() {
    this.property = "is defined";
    this.createMe = function () {
        return Object.create(this);
    };
}
var myTestObject = new objectDotCreate();
console.log(myTestObject, myTestObject.createMe()); 
```

*[JSBin](http://jsbin.com/ipipat/1/edit)*

现在看看控制台输出

![控制台输出](../Images/add76b83ab710bd2fb00a19313b0665c.png)

*左：`new`右：`Object.create`*

如您所见，两者都使用它们的属性创建了一个新的对象实例。

仅有的`Object.create`

> 使用指定的原型对象和属性创建一个新对象。

和`new`（[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)）

> [...] 创建用户定义的对象类型或具有构造函数的内置对象类型之一的实例。

因此，使用创建的实例`Object.create`可以获得对属性的访问权限，因为它们被它所遮蔽，`prototype`并且使用的那个实例`new`具有其自己的属性，由其构造函数定义。

所以不，它不会创建自己的属性。（虽然您可以传递一个 Object 来直接定义 Objects 属性描述符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:51:21.900

> 它是否也创建自己的属性

如果您阅读[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)，它会说“*否”* ——除非您用第二个参数告诉它这样做。它的基本用途是创建一个*新的空*对象，并将其内部原型设置为参数。第二个论点会像[`defineProperties`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperties)那时一样起作用。

> 如果它在这样的对象文字中使用
> 
> `return Object.create(this);`

我在这里看不到任何对象文字，但是由于您不使用第二个参数，因此返回的对象将没有自己的属性。

# jquery - jQuery POST 工作但没有响应

> ID：15662366
> 
> 赞同：0
> 
> 时间：2013-03-27T15:12:48.140
> 
> 标签：jquery

我先贴代码

```
<script>
$(document).ready(function(){
$('select[name="id"]').change(function(){
    $.post("http://www.example.com/api/getval.php",
      {
        id:$(this).val(),
      },
      function(data,status){
        alert("Data: " + data + "\nStatus: " + status);
      });
});
});
</script> 
```

我敢肯定，正在发布数据。但似乎没有任何反应。

我需要你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:17:29.760

你在这里有一个尾随`,`：

```
 {
    id:$(this).val(),
  }, //-------------^-----this one 
```

如果你得到`json`回应，你可以试试这个：

```
$(document).ready(function(){
   $('select[name="id"]').change(function(){
      $.post("http://www.example.com/api/getval.php", {id:$(this).val()}, function(data,status){
         alert("Data: " + data + "\nStatus: " + status);
      }, "json");
   });
}); 
```

我建议你使用`console.log()`而不是`alert()`.

```
console.log("Data: " + data + "\nStatus: " + status); 
```

# javascript - 使用javascript倒计时

> ID：15662369
> 
> 赞同：2
> 
> 时间：2013-03-27T15:12:52.637
> 
> 标签：javascript

我正在尝试为我创建的测验创建倒计时。测验将创建一个百分比，我正在尝试创建一个 JavaScript 函数，该函数将从 100% 倒数到用户测验得分百分比。

还可以在倒计时时更改百分比的颜色吗？示例 100% 绿色，当它达到 59% 及以下时，它开始变红？

我现在正在使用的内容：

```
<div id="counter">
</div>

var stop = 6;

for(i=1; i <= 100; i++) {
    $('#counter').append('<p>' + i + '%');
}

$('#counter').cycle({
    delay: 600,
    fx:     'none',
    backwards: true,
    speed: 300,
    timeout:  60, 
    autostop: 1,
    autostopCount: stop,
}); 
```

链接：http: [//jsfiddle.net/joshsmith/WE3UA/4/](http://jsfiddle.net/joshsmith/WE3UA/4/)

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:36:06.133

这将使它从 100% 的纯绿色变为 50% 的纯红色。我不确定你是否希望它一直保持绿色直到 60%。如果你想要这样，那么只需将三元语句放入绿色函数中，如“return i > 60 ? 255 : Math.round(256*(i+40)/50-256)”

```
var stop = 60;
function green(i) { return Math.round(256*i/50-256); }
function red(i) { return 256-green(i); }
function toHex(c) { var h = c.toString(16); return h.length > 1 ? h : '0'+h; }
function color(i) { return i <= 50 ? 'f00' : toHex(red(i)) + toHex(green(i)) + '00'; }

for(i=1; i <= 100; i++) {
    $('#counter').append('<p style="color: #' + color(i-1) + '">' + i + '%');
}

$('#counter').cycle({
    delay: 600,
    fx:     'none',
    backwards: true,
    speed: 300,
    timeout:  60, 
    autostop: 1,
    autostopCount: stop,
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:17:08.097

看起来你在倒计时本身已经做得很好了。

您可以使用类似这个 jQuery 颜色插件的东西轻松地为颜色设置动画：
[https ://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:18:48.180

由于您的[`cycle`](http://www.malsup.com/jquery/cycle/options.html)插件只是迭代了许多已经创建的元素，您可以简单地将 valeus 的段落设置为 59 以下的任何值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:24:26.073

您会得到一个 after 事件，该事件在每个滴答声后被触发。您可以使用它来更改文本的颜色。

```
var stop = 6;

for(i=1; i <= 100; i++) {
    $('#counter').append('<p>' + i + '%');
}
var nCounter = 0;
$('#counter').cycle({
    delay: 600,
    fx:     'none',
    backwards: true,
    speed: 300,
    timeout:  60, 
    autostop: 1,
    autostopCount: stop,
    after: function(currSlideElement, nextSlideElement, options, forwardFlag)
    {
       nCounter++
       var percent = nCounter /stop * 100;
       if(percent  < 10)
       {
           $('#counter').css("color", "red");
       }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T15:32:27.933

U 只需要根据用户进度增加 RGB 值。

试试看 :)
var c1=c2=c3=0;
for(i=1; i <= 100; i++)
{
document.getElementById("#counter").style.color=rgb(c1,c2,c3);
if(i>30 && i<60)
{
c2++;
}
}

# module - Fortran 中 INCLUDE 和模块之间的区别

> ID：15662371
> 
> 赞同：21
> 
> 时间：2013-03-27T15:13:09.597
> 
> 标签：module, include, fortran

`use`使用带有语句的模块或带有语句的隔离文件之间有什么实际区别`include`？我的意思是，如果我有一个在整个程序中经常使用的子例程：我什么时候或为什么应该将它放在一个模块中，或者只是将它写在一个单独的文件中，并将它包含在程序的每个其他需要它的部分中用过的？

另外，将所有打算进入模块的子例程编写在单独的文件中并`include`在模块内部使用是一种好习惯吗？特别是如果子例程中的代码很长，以便更好地组织代码（这样所有子例程都打包在 mod 中，但如果我必须编辑一个，我不需要经过迷宫般的代码）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-27T19:55:31.173

两者之间的概念差异映射到非常显着的实际差异。

INCLUDE 行在源代码级别运行 - 它完成简单的（“哑”）文本包含。在包含行中没有对“文件名”的任何特殊处理器解释（不要求它实际上是一个文件）的情况下，完整的源代码可以很容易地由程序员手动拼接在一起并提供给编译器，没有什么区别- 在源的语义中如此。包含的源代码没有孤立的真正解释 - 它的含义完全取决于引用包含的源代码的包含行出现的上下文。

模块在程序的更高实体级别上运行，即在编译器正在考虑源实际描述的事物的级别上。一个模块可以独立于其下游用户进行编译，一旦它被编译，编译器就会确切地知道该模块可以为程序提供什么。

通常，使用包含行的人*希望*做的是模块实际*设计*要做的事情。

示例问题：

*   因为实体声明可以分布在多个语句中，包含的源描述的实体可能不是您所期望的。考虑包含以下来源：

    `INTEGER :: i`

    孤立地看，这似乎将名称声明`i`为整数标量（或者可能是函数？谁知道！）。现在考虑包含上述内容的以下范围：

    `INCLUDE "source from above"`
    `DIMENSION :: i(10,10)`

    `i`现在是二阶阵！也许你想让它成为一个指针？一个可分配的？一个虚假的论点？也许这会导致错误，或者它可能是有效的来源！将隐式输入混入其中，以真正增加潜在的乐趣。

    在模块中定义的实体是由模块“完全”定义的。可以更改特定于使用范围的属性（VOLATILE、可访问性等），但基本实体保持不变。名称冲突被明确指出，并且可以通过 USE 语句中的重命名子句轻松解决。

*   Fortran 对语句顺序有限制（规范语句必须在可执行语句之前，等等）。包含的源代码也受到这些限制，同样*是在包含点的上下文中*，而不是在源定义点的上下文中。

    语句函数定义（规范部分）和赋值语句（可执行部分）之间的源歧义很好地混合在一起，以获得一些完全模糊的错误消息，或者更糟糕的是，编译器默默地接受错误代码。

    引用模块的 USE 语句出现在哪里是有要求的，但实际模块程序单元的来源完全独立于其使用点。

*   想要在相关过程中共享一些全局状态并且您想使用包含？让我向您介绍常见的块以及序列关联的相关底层概念......

    序列关联是早期底层 Fortran 处理器实现的不幸渗入，它容易出错、不灵活、反优化不合时宜。

    模块变量使公共块及其相关的弊端完全没有必要。

*   如果您使用的是包含行，请注意您实际上并未包含常用过程的源代码（第一段中的建议只会导致编译器出现大量语法错误）。您通常会做的是包含描述过程*接口*的源代码。对于任何重要的过程，描述接口的源代码都不同于过程的完整源代码——这意味着您现在需要维护同一事物的两个源代码表示。这是一个容易出错的维护负担。

    如前所述 - 编译器自动获得模块过程接口的知识（编译器知识是“显式”的，因为它实际上看到了过程的代码 - 因此称为“显式接口”）。程序员无需再做任何事情。

    *上述的一个结果是，除非*有很好的相反理由（可能存在循环或过度广泛的依赖关系），否则根本不应该使用外部子程序- 基本起点应该是把*所有东西都*放在一个模块或主程序中程序。

其他张贴者提到了模块的源代码组织优势——包括能够将相关过程和其他“东西”组合到一个包中，并控制内部实现细节的可访问性。

根据问题的第二段，我接受 INCLUDE 行的有效使用-大型模块的大小变得笨拙。F2008 通过子模块解决了这个问题，这也带来了许多其他好处。一旦它们得到广泛支持，就应该放弃包含行的解决方法。

第二个有效用途是克服语言对通用编程技术（C++ 中提供的模板）缺乏支持的问题——即，操作中涉及的对象类型可能会有所不同，但描述对这些技术做什么的标记序列对象本质上是一样的。在语言解决这个问题之前可能还需要十年左右的时间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T15:24:03.797

将过程放入模块并使用这些模块使过程的接口变得明确。它允许 Fortran 编译器检查调用中的实际参数和过程的虚拟参数之间的一致性。这可以防止各种程序员错误。Fortran >=90 的某些“高级”功能也需要显式接口；例如，可选或关键字参数。如果没有显式接口，编译器将不会生成正确的调用。仅仅包含一个文件并不能提供这些优势。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T18:28:51.183

MSB 的回答很好，可能是更喜欢模块而不是包含的最重要原因。我想补充一些想法。

如果这对您很重要，那么使用模块可以减少编译后的二进制文件大小。一个模块被编译一次，当你编译`use`它时，你象征性地加载该模块以使用代码。当您`include`创建一个文件时，您实际上是将新代码插入到您的例程中。如果你使用`include`很多，它可能会导致你的二进制文件很大并且还会增加你的编译时间。

您还可以通过巧妙地使用模块中的公共和私有函数以及用户定义的类型，使用模块来伪造 Fortran 90 中的 OOP 样式编码。即使您不想这样做，它也提供了一种对逻辑上属于一起的函数进行分组的好方法。

# sql - SQL 性能

> ID：15662372
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:13:13.833
> 
> 标签：sql

我有数据表说

**角色定位**

```
RL1 CR1 LG1
RL2 CR2 LG2
RL3 CR3 LG3
RL4 CR4 LG4
RL5 CR5 LG1
RL6 CR6 LG1 
```

**契约角色**

```
CR1 Policy1
CR2 Policy1
CR3 Policy1
CR4 Policy1
CR5 Policy2
CR6 Policy2 
```

我只想取

```
RL2
RL3
RL4 
```

所以我在下面写的查询工作正常，但我怀疑它会表现良好..任何帮助表示赞赏。谢谢

```
SELECT 
    RL.ROLE_LOCATION_ID 
FROM 
    ROLELOCATION RL, contractrole CR
WHERE 
    CR.CONTRACT_ROLE_ID = RL.CONTRACT_ROLE_ID
    AND CR.CONTR_COMPONENT_ID = policy1
    AND RL.LOCATION_GROUP_ID NOT IN (SELECT RL2.LOCATION_GROUP_ID 
                                     FROM ROLELOCATION RL2,CONTRACTROLE CR2 
                                     WHERE RL2.CONTRACT_ROLE_ID = CR2.CONTRACT_ROLE_ID 
                                     AND CR2.CONTR_COMPONENT_ID <> policy1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:26:04.457

这是进行查询的方法：

```
select role_location_id
from (SELECT RL.ROLE_LOCATION_ID,
             sum(case when cr.policy <> 'policy1' then 1 else 0 end) over (partition by rl.location_group_id) as NumNotPolicy1
      FROM ROLELOCATION RL join
           contractrole CR
           on CR.CONTRACT_ROLE_ID = RL.CONTRACT_ROLE_ID
     ) t
where NumNotPolicy1 = 0 
```

这会计算非策略 1 在位置组级别出现的次数。它只选择此计数为 0 的行。

# c# - 如何在静态方法中写入 cookie

> ID：15662374
> 
> 赞同：2
> 
> 时间：2013-03-27T15:13:18.673
> 
> 标签：c#, asp.net, static-methods, httpcontext

我需要在静态方法中编写一个cookie（我需要静态，因为我想从其他类调用这个方法）。我找到了解决方案`HttpContex.Current`，但它对我不起作用。我收到这个错误

> 非静态字段、方法或属性“System.Web.Mvc.Controller.HttpContext.get”需要对象引用

我也试过添加`using System.Web.HttpContext.Current;`，我得到这个错误

> “System.Web.HttpContext.Current”是一个“属性”，但用作“类型”

我的方法：

```
public static void WriteCookie(Guid token)
{ 
    HttpCookie cookie = new HttpCookie("LoginControl");

    cookie.Value = token.ToString();
    cookie.Expires = DateTime.Now.AddHours(0.5);

    HttpContext.Current.Reponse.Cookies.Add(cookie);
} 
```

有什么建议么？非常感谢马修。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:15:22.397

您可以使用方法参数传递 HttpContext 吗？

```
public static void WriteCookie(HttpContext context, Guid token)
{ 
    HttpCookie cookie = new HttpCookie("LoginControl");

    cookie.Value = token.ToString();
    cookie.Expires = DateTime.Now.AddHours(0.5);

    context.Response.Cookies.Add(cookie);
} 
```

# java - 如何访问语法中的当前树节点？

> ID：15662375
> 
> 赞同：0
> 
> 时间：2013-03-27T15:13:19.023
> 
> 标签：java, antlr, antlr3

问题是关于如何访问`{"action"}`语法块内的当前树节点。

我说的是`Java`目标，所以在生成的规则方法中我想访问对象`root_1`（见下文，标准生成代码，`SUBJECT`这是我语法中的标记，没关系）：

```
 {
    Object root_1 = (Object)adaptor.nil();
    root_1 = (Object)adaptor.becomeRoot((Object)adaptor.create(SUBJECT, "SUBJECT"), root_1);
    adaptor.addChild(root_1, stream_noun.nextTree());
    adaptor.addChild(root_0, root_1);
  } 
```

在语法内部，我希望有能力做类似的事情：

```
subject :   noun -> ^(SUBJECT noun) { ... place code here to work with `root_1` object ... } ; 
```

有人可以提出任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:32:13.737

我相信你正在寻找`$tree`房产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:35:14.400

好吧，我发现了一些*丑陋*的方法。我可以访问提到的`root_1`对象，使用`@after`构造并访问`root_0`对象：

```
subject
@after{
    // ...((CommonTree)root_0).getChild(0)... - this is `root_1` object.
}
    :   noun -> ^( SUBJECT noun); 
```

但是，如果有人会提出更合适的方法 - 它会受到欢迎。

**UPD：**正如亲爱[的 280z28](https://stackoverflow.com/users/138304/280z28)提到的，这个`((CommonTree)root_0)`可以`$tree`用 set替换`options{ASTLabelType=CommonTree;}`。

# ios - 无法以 .p12 格式导出 Apple 生产推送 SSL 证书

> ID：15662377
> 
> 赞同：200
> 
> 时间：2013-03-27T15:13:30.540
> 
> 标签：ios

我在我的应用程序中使用 Urban airship 进行推送通知。所以，我需要从 Apple 开发者门户下载推送 SSL 证书。下载后，我在钥匙串访问中添加了它。但是没有为证书创建私钥。当我尝试右键单击并导出证书时，我无法将其导出为*.p12*文件，因为*.p12*文件扩展名在保存时被禁用。由于声誉较低，我无法在此处附上屏幕截图。

有人请告诉我这里的问题在哪里。我该怎么做？

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2013-10-21T19:22:04.173

事实证明，您所要做的就是在左侧面板上选择“我的证书”并启用 .p12 选项。

[![在此处输入图像描述](../Images/056857c730b14647ffcb058c519174dc.png)](https://i.stack.imgur.com/uLlex.png)

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2014-01-11T09:21:33.590

就我而言，我将 .cer 文件设置为“系统”选项，而不是“登录”选项。然后我将 .cer 文件从“系统”移动到“登录”选项，然后按“我的证书”然后导出它。p12 就可以了..

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-03-27T15:19:34.537

Apple 不会存储您用于创建证书的私钥。您需要在您的机器上已经有它的副本。

听起来好像是其他人请求了您尝试下载的推送证书，或者您在另一台机器上请求了它。如果您找不到私钥，您将需要创建一个新的证书请求并通过开发人员门户上传。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-02-17T22:56:44.370

为了导出为 p12，您要么需要从您的机器生成证书，要么拥有用于在您的机器上生成证书的密钥。

为确保这将起作用：

1.  登录 Apple 开发中心

2.  转到供应门户或证书、标识符和配置文件

3.  转到证书并创建 Apple 推送通知服务 SSL 从这里开始，您将被引导完成证书生成过程。

4.  下载生成的证书后，将其安装到您的钥匙串中（双击证书文件或拖放到钥匙串窗口中。

5.  然后从左侧面板中选择“证书”。右键单击要导出的证书，将出现 p12 选项。

注意：除非您从机器生成证书，否则它不会存在

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-12-15T23:00:35.587

除了验证证书是从同一台计算机上的 Keychain Access -> Certificate Assistant 的证书请求中颁发的之外，还要确保将收到的 .cer 文件安装到正确的 keychain 中。

最好的方法是在左侧钥匙串下选择适当的钥匙串，最有可能是“登录”，确保在“类别”下选择“我的证书”，然后将 .cer 文件拖放到主文件列表区域。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-12-14T10:05:17.480

就我而言，直到我按名称搜索证书才出现！我什至拍了一个视频作为证据。“登录”和“我的证书”都被选中，我经历了两次从头开始重新生成的完整流程，每次证书不存在让我导出 .p12 文件。一旦我在搜索栏中输入它的名称，它就会出现！:flip_table_emoji:

苹果，修复你的错误！我生命中永远不会回来的两个小时。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-12-26T16:07:25.837

对我来说，我不必右键单击 Keychain Access 中的主证书行并选择`Export`，而是单击我尝试导出的证书旁边的下拉箭头，然后右键单击其下方的条目，然后选择`Export`. 那么你实际上是在选择私钥部分而不是公钥部分。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-12-19T23:12:08.997

让您选择私钥而不是公钥，因为您可能在列表中同时拥有这两种类型。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-22T11:20:27.493

您可以使用[Onesignal 供应商工具](https://onesignal.com/provisionator)来创建推送 SSL 证书。它是免费的，可以为您解决所有令人困惑的问题。

它会在您生成它时撤销您当前的，因此如果您在现场，将其上传到相关位置时一定要快速。

这对我适用于 OneSignal 推送通知，但我看不出它为什么不适用于其他推送通知。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-04T22:39:31.333

尝试了上面的很多建议，这是对我有用的解决方案（@Greg）：

您在生成证书签名请求时在 Keychain Access**左侧选择的钥匙串****必须与您将签名证书导入回的钥匙串相同**。否则，它会将其视为其他人的，并且钥匙串访问不会在下拉菜单中显示私钥。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-23T06:41:34.463

您需要在 Access Key Chain 中选择“证书”选项卡。

[![在此处输入图像描述](../Images/5e0858c2754bb18aa1e44fceb23756f3.png)](https://i.stack.imgur.com/Cd0o3.png)

# sql - SQL Server 精确表转置

> ID：15662382
> 
> 赞同：0
> 
> 时间：2013-03-27T15:13:54.573
> 
> 标签：sql, sql-server-2008-r2, pivot, unpivot

如何在 SQL 中实现精确转置？

```
Month | High | Low | Avg
-------------------------
Jan   | 10    | 9   | 9.5
-------------------------
Feb   | 8  |  7   | 7.5
-------------------------
Mar   | 7    | 6   | 6.5
------------------------- 
```

结果

```
------ Jan | Feb | Mar
--------------------------
High-- 10  | 8   | 7
--------------------------
Low--  9   | 7   | 6
--------------------------
Avg    9.5 | 7.5 | 6.5
-------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:20:21.163

伟大的用途`pivot`和`unpivot`：

```
with t as (
    select 'Jan' as mon, cast(10.0 as float) as high, cast(9.0 as float) as low, cast(9.5 as float) as average union all
    select 'Feb' as mon, 8.0, 7.0, 7.5
   )
select stat, Jan, Feb, Mar
from (select mon, STAT, value
      from t
      unpivot  (value for stat in (high, low, average)) u
     ) t
pivot (max(value) for mon in (Jan, Feb, Mar)) as pt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:28:15.730

为了获得结果，您首先必须通过将,和列转换为行来*取消*旋转这些列。然后，您将应用*数据透视*函数将值转换为列。（参见：MSDN [PIVOT/UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)文档）`High``Low``Avg`*`month`*

 *由于您使用的是 SQL Server 2008+，因此您可以使用`CROSS APPLY`和`VALUES`取消透视。unpivot 的代码是：

```
select t.month, 
  c.col, 
  c.value
from yourtable t
cross apply
(
  values ('High', high), ('Low', Low), ('Avg', Avg)
) c (col, value) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/04108/1)。这以可以按月旋转的格式给出结果：

```
| MONTH |  COL | VALUE |
------------------------
|   Jan | High |    10 |
|   Jan |  Low |     9 |
|   Jan |  Avg |   9.5 |
|   Feb | High |     8 |
|   Feb |  Low |     7 | 
```

一旦数据在行中，您将应用数据透视函数，因此代码将是：

```
select col, Jan, Feb, Mar
from
(
  select t.month, 
    c.col, 
    c.value
  from yourtable t
  cross apply
  (
    values ('High', high), ('Low', Low), ('Avg', Avg)
  ) c (col, value)
) d
pivot
(
  sum(value)
  for month in (Jan, Feb, Mar)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b0504/3)。这给出了结果：

```
|  COL | JAN | FEB | MAR |
--------------------------
|  Avg | 9.5 | 7.5 | 6.5 |
| High |  10 |   8 |   7 |
|  Low |   9 |   7 |   6 | 
```

由于您正在旋转月份名称，我怀疑您是否需要动态 SQL 版本，但如果您有未知数量的值，那么您可以使用动态 sql 来获取结果。*

# oracle - 解析大型 XML，然后使用 forall 插入

> ID：15662386
> 
> 赞同：0
> 
> 时间：2013-03-27T15:14:06.360
> 
> 标签：oracle, xml-parsing, oracle10g

我正在尝试解析大型 XML，然后使用 FORALL 语句将其插入表中。

我创建了下表：

```
create table users(EMPNO NUMBER(4),SAL NUMBER(4),HIREDATE DATE); 
```

这是我的代码

```
declare

TYPE import_q_rec IS RECORD (
      EMPN     dbms_sql.NUMBER_TABLE,
      SALN     dbms_sql.NUMBER_TABLE,
      HIREDATE dbms_sql.Date_Table  );

l_import_q_tab import_q_rec;
l_row_index    number := 0;
l_temp_nd      XMLTYPE;

l_result_xml   XMLTYPE:=XmlType('<ROWSET>
          <ROW>
         <EMPNO>2290</EMPNO>
         <SAL>2000</SAL>
         <HIREDATE>31-DEC-1992</HIREDATE>
       </ROW>
     </ROWSET>');

begin

   WHILE l_result_xml.Existsnode('/ROWSET/Row[' || To_Char(l_row_index) || ']') > 0
   LOOP
     l_temp_nd :=l_result_xml.Extract('/ROWSET/Row[' || To_Char(l_row_index) || ']');
     l_import_q_tab.EMPN(l_row_index) := (l_temp_nd, '/Row/EMPNO/text()', NULL);
     l_import_q_tab.SALN(l_row_index) :=  (l_temp_nd, '/Row/SAL/text()', NULL);
     l_import_q_tab.HIREDATE(l_row_index) := (l_temp_nd, '/Row/HIREDATE/text()', NULL);
     l_row_index := l_row_index + 1;
   END LOOP;

   FORALL i IN 1 .. l_row_index - 1
     INSERT INTO users
     VALUES (l_import_q_tab.EMPN(i), l_import_q_tab.SALN(i), l_import_q_tab.HIREDATE);

end; 
```

它给了我以下错误

```
ORA-06550: line 21, column 38:
PLS-00320: the declaration of the type of this expression is incomplete or malformed
ORA-06550: line 21, column 2:
PL/SQL: Statement ignored
ORA-06550: line 22, column 39:
PLS-00320: the declaration of the type of this expression is incomplete or malformed
ORA-06550: line 22, column 2:
PL/SQL: Statement ignored
ORA-06550: line 23, column 42:
PLS-00320: the declaration of the type of this expression is incomplete or malformed
ORA-06550: line 23, column 2:
PL/SQL: Statement ignored
ORA-06550: line 30, column 51:
PLS-00382: expression is of wrong type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:37:04.830

你有几个语法错误

1.  `l_row_index Number:=0`应该从1开始。
2.  `(l_temp_nd, '/Row/EMPNO/text()', NULL);`没有意义。你必须`extract`从这里的 xmltype 开始。
3.  最后一列的 FORALL 缺少索引。
4.  `to_date`日期字段上需要。

一个基本的修复：

```
SQL> create table users(EMPNO NUMBER(4),SAL NUMBER(4),HIREDATE DATE);

Table created.

SQL> Declare
  2    TYPE import_q_rec IS RECORD
  3                             (EMPN          dbms_sql.NUMBER_TABLE,
  4                             SALN           dbms_sql.NUMBER_TABLE,
  5                             HIREDATE       dbms_sql.Date_Table
  6                              );
  7    l_import_q_tab import_q_rec;
  8    l_row_index      Number:=1;
  9    l_temp_nd        XMLTYPE;
 10    l_result_xml         XMLTYPE:=XmlType('<ROWSET>
 11                                              <ROW>
 12                                             <EMPNO>2290</EMPNO>
 13                                             <SAL>2000</SAL>
 14                                             <HIREDATE>31-DEC-1992</HIREDATE>
 15                                           </ROW>
 16                                              <ROW>
 17                                             <EMPNO>111</EMPNO>
 18                                             <SAL>123</SAL>
 19                                             <HIREDATE>30-NOV-1992</HIREDATE>
 20                                           </ROW>
 21                                         </ROWSET>');
 22  begin
 23    WHILE l_result_xml.Existsnode('/ROWSET/ROW[' || To_Char(l_row_index) || ']') > 0
 24    LOOP
 25      l_temp_nd :=l_result_xml.Extract('/ROWSET/ROW[' || To_Char(l_row_index) || ']');
 26      l_import_q_tab.EMPN(l_row_index) := l_temp_nd.extract('/ROW/EMPNO/text()').getstringval();
 27      l_import_q_tab.SALN(l_row_index) :=  l_temp_nd.extract('/ROW/SAL/text()').getstringval();
 28      l_import_q_tab.HIREDATE(l_row_index) := to_date(l_temp_nd.extract('/ROW/HIREDATE/text()').getstringval(), 'dd-mon-yyyy');
 29      l_row_index := l_row_index + 1;
 30    END LOOP;
 31
 32  FORALL i IN 1..l_row_index-1
 33      INSERT INTO users
 34    VALUES
 35    (l_import_q_tab.EMPN(i), l_import_q_tab.SALN(i),l_import_q_tab.HIREDATE(i));
 36  End;
 37  /

PL/SQL procedure successfully completed.

SQL> select * from users;

     EMPNO        SAL HIREDATE
---------- ---------- ---------
      2290       2000 31-DEC-92
       111        123 30-NOV-92 
```

简化的重写以避免所有数组+批量处理：

```
SQL> declare
  2    l_result_xml         XMLTYPE:=XmlType('<ROWSET>
  3                                              <ROW>
  4                                             <EMPNO>2290</EMPNO>
  5                                             <SAL>2000</SAL>
  6                                             <HIREDATE>31-DEC-1992</HIREDATE>
  7                                           </ROW>
  8                                              <ROW>
  9                                             <EMPNO>111</EMPNO>
 10                                             <SAL>123</SAL>
 11                                             <HIREDATE>30-NOV-1992</HIREDATE>
 12                                           </ROW>
 13                                         </ROWSET>');
 14  begin
 15
 16    insert into users
 17    select /*+ cursor_sharing_exact */
 18           empno, sal, to_date(hiredate, 'dd-mon-yyyy')
 19      from xmltable('/ROWSET/ROW' passing l_result_xml
 20                    columns
 21                      empno number path 'EMPNO',
 22                      sal number path 'SAL',
 23                      hiredate varchar2(20) path 'HIREDATE'
 24                   );
 25
 26  end;
 27  /

PL/SQL procedure successfully completed.

SQL> select * from users;

     EMPNO        SAL HIREDATE
---------- ---------- ---------
      2290       2000 31-DEC-92
       111        123 30-NOV-92 
```

# php - PHP - 数组到 MySQL 表

> ID：15662388
> 
> 赞同：1
> 
> 时间：2013-03-27T15:14:12.740
> 
> 标签：php, mysql, arrays, while-loop

`while`我正在尝试使用循环将文本框字段文本插入 MySQL 表行。

这是代码的一部分：($datetoday = 270313)

```
 <?php 

        $i=0;
        while ($i < $row_Num) {
            ${'date_'.$i} = $_REQUEST["{'date_'.$i}"];
            ${'text_'.$i} = $_REQUEST["{'text_'.$i}"];
            ${'con_name_'.$i} = $_REQUEST["{'con_name_'.$i}"];
            ${'con_phone_'.$i} = $_REQUEST["{'con_phone_'.$i}"];

           $values= array(${'date_'.$i},${'text_'.$i},${'con_name_'.$i},${'con_phone_'.$i});
           print_r($values);
           $sql = "INSERT INTO data.$datetoday(`KEY,`DATE`,`COLOR`,`TEXT`,`CON_NAME`,`PHONE`) VALUES (`$i`,`$values[0]`,`FFFFFF`,`$values[1]`,`$values[2]`,`$values[3]`)";
           $result = mysql_query($sql,$link);
           if (!$result) {
            die ("Can't create table named $datetoday : " . mysql_error());
            }
           $i++;
           }

        ?> 
```

该页面的网址是：

```
> http://localhost:5110/test.php?date_0=000000&text_0=QWERTY&con_name_0=iuytre&con_phone_0=0000000000&date_1=111111&text_1=ASDFGHJK&con_name_1=lkjhgfd&con_phone_1=1212121212 
```

但是它不会更新表格或打印数组（用于测试）。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:37:58.597

有几个小问题，使用你的 URL 子字符串我得到了它的工作，见下文：

```
$row_Num = 1;
$i = 0;
while ($i <= $row_Num) {
    // In the $_REQUEST you were indexing the curly braces, remove them.
    ${"date_" . $i} = $_REQUEST["date_$i"];
    ${"text_" . $i} = $_REQUEST["text_$i"];
    ${"con_name_" . $i} = $_REQUEST["con_name_$i"];
    ${"con_phone_" . $i} = $_REQUEST["con_phone_$i"];

    $values = array(
        ${"date_" . $i},
        ${"text_" . $i},
        ${"con_name_" . $i},
        ${"con_phone_" . $i}
    );
    // Not printr() And this is how I print arrays, it is cleaner.
    echo '<pre>', print_r($values, true), '</pre>';
    $i++;
} 
```

输出：

```
Array
(
    [0] => 000000
    [1] => QWERTY
    [2] => iuytre
    [3] => 0000000000
)
Array
(
    [0] => 111111
    [1] => ASDFGHJK
    [2] => lkjhgfd
    [3] => 1212121212
) 
```

* * *

**编辑**

我仍然不清楚你是如何设置的`$row_Num`。

```
$_SESSION['row_Num'] = $_REQUEST["row_Num"]; 
```

这并没有告诉我任何事情，因为`$_REQUEST`您显示的字符串不包含“row_Num”。因此，由于您的查询需要`DATE`我进行`foreach`循环来计算`DATE`出现的次数。试试下面的代码，让我知道。

```
$i = 0;
$count = 0;
// I added this line to take care of how many times the loop runs
foreach ($_REQUEST as $key => $value) { (strstr($key, 'date')) ? $count++ : NULL; }
// Changed '<=' to '<' because it would loop 3 times since we start $i at 0.
// $i needs to remain at 0 since your URL substring indexing starts at 0.
while ($i < $count) {
    ${'date_' . $i} = $_REQUEST["date_$i"];
    ${'text_' . $i} = $_REQUEST["text_$i"];
    ${'con_name_' . $i} = $_REQUEST["con_name_$i"];
    ${'con_phone_' . $i} = $_REQUEST["con_phone_$i"];

    $values = array(
        ${"date_" . $i},
        ${"text_" . $i},
        ${"con_name_" . $i},
        ${"con_phone_" . $i}
    );

    ### Echo for troubleshooting ###
    echo '<pre>', print_r($values, true), '</pre>';
    $sql = "INSERT INTO `data`.`".$datetoday."` (`KEY`,`DATE`,`COLOR`,`TEXT`,`CON_NAME`,`PHONE`) VALUES 
        (
            '".$i."',
            '".$values[0]."',
            'FFFFFF',
            '".$values[1]."',
            '".$values[2]."',
            '".$values[3]."'
        )";

    ### Echo for troubleshooting ###
    echo '<pre>', $sql, '</pre>';
    $result = mysql_query($sql, $link) or die ('Could not insert values: '.mysql_error());
    $i++;
} 
```

**输出：**

```
Array
(
    [0] => 000000
    [1] => QWERTY
    [2] => iuytre
    [3] => 0000000000
)
INSERT INTO `data`.`280313` (`KEY`,`DATE`,`COLOR`,`TEXT`,`CON_NAME`,`PHONE`) VALUES 
        (
            '0',
            '000000',
            'FFFFFF',
            'QWERTY',
            'iuytre',
            '0000000000'
        )
Array
(
    [0] => 111111
    [1] => ASDFGHJK
    [2] => lkjhgfd
    [3] => 1212121212
)
INSERT INTO `data`.`280313` (`KEY`,`DATE`,`COLOR`,`TEXT`,`CON_NAME`,`PHONE`) VALUES 
        (
            '1',
            '111111',
            'FFFFFF',
            'ASDFGHJK',
            'lkjhgfd',
            '1212121212'
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:17:03.683

使用`'date_' . $i`代替`'date_'.'$i'`

`'date_'.'$i'`is always ，由于使用了单引号`date_$i`，因此不会对变量进行扩展。`$i`如果要在字符串中展开变量，请使用双引号（如果 $variables 位于字符串的开头或结尾，则不使用引号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:26:39.997

请注意，调用 n 次 SQL 请求很慢。如果你发送一个 SQL 请求会更好。像这样的东西：

```
<?php 
 $i=0;$comma="";$all_values="";
 while($i<$row_Num)
 {${'date_'.$i}=$_REQUEST["date_".$i];
  ${'text_'.$i}=$_REQUEST["text_".$i];
  ${'con_name_'.$i}=$_REQUEST["con_name_"$i];
  ${'con_phone_'.$i}=$_REQUEST["con_phone_".$i];

  $values=array(${'date_'.$i},${'text_'.$i},${'con_name_'.$i},${'con_phone_'.$i});
  print_r($values);
  $all_values.=$comma."('".$i."','".$values[0]."','FFFFFF','".$values[1]."','".$values[2]."','".$values[3]."')";
  $comma=",";
  $i++;
 }
 $sql="INSERT INTO data.$datetoday (`KEY,`DATE`,`COLOR`,`TEXT`,`CON_NAME`,`PHONE`) VALUES ".$all_values;
 $result=mysql_query($sql,$link);
 if(!$result)
     die("Can't create table named $datetoday : ".mysql_error());
?> 
```

# core-data - 使用绑定的 NSTableView 创建/删除自反关系

> ID：15662389
> 
> 赞同：1
> 
> 时间：2013-03-27T15:14:13.177
> 
> 标签：core-data, entity-relationship, nstableview

在我的 Core Data 应用程序中，我有一个“Person”实体，它具有一个属性（“名称”）和一个关系“persons”，它与 Person 存在多对多关系（反身关系）。

我的想法是将一个人“链接”到另一个人。当 A 链接到 B 时，B 会自动链接到 A。但是如何做到这一点呢？

我有一个 NSTableView (NSTableViewController Persons)，其单列绑定到 Person.name。我可以添加或删除对象，这很简单。

我有第二个 NSTableView (NSTableViewController Links)，其内容集是 Persons.selection.persons。这也可以。

现在，如何添加或删除与此 Links 控制器的关系？我该如何设置？比如说，在 NSTableViewController Persons 中选择了 Person A。我想我可以使用 (+) 按钮将项目添加到 NSTableViewController 链接中，然后从 NSPopMenuCell 中选择链接的人。

但现在我陷入了一场束缚的噩梦。或者也许我应该继承 Person 并拦截 (+) 动作并通过代码设置关系？

我真的需要一些帮助！谢谢！

# ember.js - 如何将事件发送到另一个视图

> ID：15662391
> 
> 赞同：1
> 
> 时间：2013-03-27T15:14:22.437
> 
> 标签：ember.js

[作为我上一个问题](https://stackoverflow.com/questions/15642077/accessing-other-controller-from-a-view)的答案，我了解到两个控制器之间的绑定是一种糟糕的设计。我试图通过事件处理来解决它。

```
App.TestView = Ember.CollectionView.extend({     
 tagName:'tbody',
 contentBinding: 'this.controller.content',
 itemViewClass: Em.View.extend({
   templateName:'test',
   classNameBindings:['selected:selected'],
   selectedBinding: 'content.selected',
   click: function(event){
     var controller =  this.get('controller');
     this.resetSelection(); 
     this.content.set('selected',true);
     router = this.get('controller.target.router');  
     router.transitionTo('inc.index',this.content);
     // just sends it to the parentView
     controller.send('noHide',false);
   }
 })
});
App.MainMenuView = Em.View.extend({
 noHide: function(event){
 this.get('controller').set('isHidden',false);
 }
}) 
```

但是现在我不知道如何将事件发送到其他视图或不是父视图的其他路由。当我单击表格的一行时，我只想切换隐藏的菜单项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:07:26.750

您可以使用`Ember.Instrumentation`从其他任何地方调用任何控制器。

首先订阅 中的事件`setupController`，您可以为事件选择所需的名称并在 before 处理程序中调用所需的函数。有效载荷是可选的。

```
App.MyRoute = Ember.Route.extend({
  setupController: function (controller, model) {
    Ember.Instrumentation.subscribe("app.myEventName", {
      before: function (name, timestamp, payload) {
       controller.send('functionToCall', payload);
      },
      after: function () { }
    });
  }
}); 
```

当您要调用该函数时，请执行以下操作

```
Ember.Instrumentation.instrument('app.myEventName', myPayload); 
```

你可以在这里阅读更多[http://emberjs.com/api/classes/Ember.Instrumentation.html](http://emberjs.com/api/classes/Ember.Instrumentation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:35:22.263

好的，我自己想通了。这是解决方案：

```
App.TableController = Em.ArrayController.extend({
 needs: ['mainMenu'],
 hidden:true,
 hiddenBinding: 'controllers.mainMenu.isHidden', 
  noHide: function(test){
    this.get('controllers.mainMenu').changeHidden(test);
 }
 })
App.MainMenuController= Em.Controller.extend({
 isHidden: true,
 changeHidden: function(test){
 this.set('isHidden',test)
 }
 }); 
```

该事件被委托给 parentView 的控制器。从那里我通过“需要”获得了指向我的 mainMenuController 的链接，以调用 changeHidden 函数。

# wireframe - 带有 CSS 边框图像的粗略样式边框？有人鉴定过这个物种吗？

> ID：15662398
> 
> 赞同：1
> 
> 时间：2013-03-27T15:14:33.907
> 
> 标签：wireframe, css

说我疯了，但是将手写/粗略样式的边框应用于您的 HTML 元素不是很酷吗？有没有人成功地做到了这一点？请分享！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:34:09.007

我只是试了一下。我不是艺术家，但这个概念很有效。[jsFiddle](http://jsfiddle.net/apaul34208/t3x5P/2/)

```
div {
  border: 15px solid transparent;
  width: 350px;
  padding: 10px 20px;
}

#round {
  border-image: url("http://s3.amazonaws.com/dfc_attachments/images/3247065/sketchy_web.png") 30 30 round;
}

#stretch {
  border-image: url("http://s3.amazonaws.com/dfc_attachments/images/3247065/sketchy_web.png") 30 30 stretch;
} 
```

# jdeveloper - 如何在 Jdeveloper 10g 中清理项目

> ID：15662401
> 
> 赞同：0
> 
> 时间：2013-03-27T15:14:42.320
> 
> 标签：jdeveloper

如何在 Jdeveloper 10g 中清理项目。我想将一个项目上传到颠覆，但在我想清理它之前。

谢谢你的帮助。

问候，

劳尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:10:03.717

从 wordpress 中的每个项目中删除所有类文件夹，删除所有“ *.log”文件所有“* .tmp”文件。应该在 .svnignore 文件中添加这个后缀。

# php - 在 php 中不工作 SESSION['user']

> ID：15662403
> 
> 赞同：0
> 
> 时间：2013-03-27T15:14:50.687
> 
> 标签：php

如果我想将当前在我网站上的用户的名称存储到 $_SESSION['user'] 中，并且我想在每个页面上写一条消息，比如 Hy“用户”，我该怎么办？我试过了：

```
<?php 
      session_start();
?>  
   <form> ... </form> 
```

进入我的验证页面

```
 <?php  
      $_SESSION['user']=$_POST['user'];
      ...
    ?> 
```

//在我的其他页面上

```
 <?php
echo "Hy ".$_SESSION['user'];
... 
```

?>

在我的网站上，我只有“Hy”，没有用户。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:15:48.940

[`session_start()`在每一页的开头调用。](http://php.net/manual/en/function.session-start.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T15:16:10.810

您必须确保函数[session_start()](http://php.net/manual/en/function.session-start.php)在您要使用会话的每个页面上。此外，在将任何标头/输出发送到浏览器之前，需要使用 session_start()。

**好的：**

```
<?php
session_start();

//Do something with sessions
$_SESSION['user'] = $username; 
```

**坏的：**

```
<?php
echo 'Hi';
session_start(); 
```

**坏的：**

```
<head>
    <title>Page Title</title>
</head>
<?php
session_start(); 
```

此外，如果您不清理输出，您当前的实现会带来安全风险。确保在输出用户名时使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)，否则您很容易受到 XSS 攻击：

```
echo htmlspecialchars($_SESSION['user'], ENT_QUOTES, "utf-8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:16:35.280

您`session_start()`在其他页面的开头缺少，一旦您在特定页面中启动会话，就可以访问会话值。

# ember.js - 从另一个视图访问 Ember ApplicationController

> ID：15662407
> 
> 赞同：11
> 
> 时间：2013-03-27T15:14:57.587
> 
> 标签：ember.js

我想在 ApplicationController 中初始化所有用户的列表，然后在另一个视图的下拉列表中显示它们。如何从不同的视图访问 ApplicationController？

以下是相关代码：

```
 App.ApplicationRoute = Ember.Route.extend({
   setupController:function(controller) {
    controller.set('users', App.User.find());
    controller.set('selectedUser', null);
  }
 });

 <script type="text/x-handlebars" data-template-name="users">
   {{view Ember.Select
   contentBinding="App.ApplicationController.users"
   optionValuePath="content.id"
   optionLabelPath="content.fullName"
   selectionBinding="App.ApplicationControllerselectedUser"}}

   selected user: {{App.ApplicationController.selectedUser.fullName}}
 </script> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T15:57:34.847

`needs`在视图的控制器中指定

```
App.UsersController = Ember.Controller.extend({
  needs: ['application']
}); 
```

在您看来，您可以按如下方式访问应用程序控制器

```
controllers.application 
```

在你的例子中

```
<script type="text/x-handlebars" data-template-name="users">
  {{view Ember.Select
         contentBinding="controllers.application.users"
         optionValuePath="content.id"
         optionLabelPath="content.fullName"
         selectionBinding="controllers.application.selectedUser"}}

  selected user: {{controllers.application.selectedUser.fullName}}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-05T06:51:39.503

您可以通过容器查找控制器

```
this.container.lookup('controller:application') 
```

# javascript - JavaScript AngularJS在ngGrid中没有正确拼接

> ID：15662409
> 
> 赞同：0
> 
> 时间：2013-03-27T15:15:01.417
> 
> 标签：javascript, angularjs, angular-ui

我正在使用 AngularJS 和 ngGrid 在网格中显示一些字母。

[http://plnkr.co/edit/SDr51bjiIW7EmP26b5w2](http://plnkr.co/edit/SDr51bjiIW7EmP26b5w2)

有一列“名称”显示字母“a”到“e”。
当我单击“名称”时，它可以对字母进行升序和降序排序。

但是，当字母降序时，“e”是列中的第一个，“a”是最后一个，我单击“删除第一个条目”按钮，字母“e”没有被删除。“a”和“b”被删除，另一个“e”被添加到列表中。

然后列表是这样的： e, e, d, c
而不是：e, d, c, b

这是启动 AngularJS 应用程序的 main.js 中要删除的代码：

```
var app = angular.module('myApp', ['ngGrid']);
app.controller('MyCtrl', function($scope) {
    $scope.myData = [{name: "a"}, {name: "b"}, {name: "c"},{name: "d"}, {name: "e"}];
    $scope.gridOptions = {data: 'myData'};

$scope.remove = function(){
    $scope.myData.splice(0,1);
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:25:55.207

ngGrid 1.9.0 版中不存在该问题。
这是一个使用旧 ngGrid 版本的 Plunker：

[http://plnkr.co/edit/EeQtkFTiEa5uCBALm6A0](http://plnkr.co/edit/EeQtkFTiEa5uCBALm6A0)

一旦该列按降序对字母进行排序，该按钮将删除数组中的第一项，而不会将字母添加回网格中。

# c++ - 如何在迭代无序地图时从无序地图中删除多个项目？

> ID：15662412
> 
> 赞同：21
> 
> 时间：2013-03-27T15:15:10.670
> 
> 标签：c++, iterator, unordered-map

请考虑以下情况：

```
using namespace std;
unordered_map<int, vector<A>> elements; 
```

现在我正在迭代这个无序的地图：

```
for (auto it = elements.begin(); it != elements.end(); ++it) 
```

在循环内部，我正在从几个元素`elements`（当前`it`指向的元素和更多元素，不一定是下一个元素！）中形成集群。因为每个元素只能是一个集群的一部分，我想从地图中删除这些元素，然后继续下一个元素（即构建下一个集群）。

我怎样才能做到这一点并且仍然在正确的位置继续迭代？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-27T15:21:04.477

```
for (auto it = elements.begin(); it != elements.end();) {
   if(you have to rease) {
      it = elements.erase(it);
   }
   else
      it++;
} 
```

这样，您可以确保在擦除后不会增加，并且不会增加 end()。

在建议[没有充分理由](https://stackoverflow.com/questions/1379246/any-reason-to-replace-whilecondition-with-forcondition-in-c)使用不会增加任何内容的 for 循环之后，您可能希望我们使用 while 循环。主要是为了提高可读性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-27T15:18:24.630

[`unordered_map::erase`](http://en.cppreference.com/w/cpp/container/unordered_map/erase)将返回已删除元素的迭代器。

您需要以下代码：

```
it = myMap.erase( it ); 
```

**重要提示：**如果您在循环中执行此操作，则需要确保避免在循环结束时出现**典型的增量。`it`**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-27T15:18:05.373

该[`erase`](http://en.cppreference.com/w/cpp/container/unordered_map/erase)函数在删除的元素之后返回迭代器（所有集合`erase`函数都这样做）。您可以使用它继续。

请记住，在擦除元素的情况下不要增加迭代器，否则会越过一个元素。

# java - 读取文件夹中所有 .xml 文件以及特定标签之间的值的 java 代码

> ID：15662414
> 
> 赞同：0
> 
> 时间：2013-03-27T15:15:15.200
> 
> 标签：java, xml

我有一个仅包含 .xml 文件的文件夹。我的程序需要读取每个文件，然后返回标签之间具有“假”的文件的名称。我刚在想：

```
 final Pattern pattern = Pattern.compile("<isTest>(.+?)</isTest>");
        final Matcher matcher = pattern.matcher("<isTest>false</isTest>");
        matcher.find();
        System.out.println(matcher.group(1)); 
```

我是java新手，所以任何帮助都将不胜感激。

你能告诉我哪里出错了吗？

```
public class FileIO 
{
    public static void main(String[] args) 
    {
        File dir = new File("d:\temp");

        List<String> list = new ArrayList<String>();

        //storing the names of the files in an array. 
        if (dir.isDirectory()) 
        {
          String[] fileList = dir.list();
          Pattern p = Pattern.compile("^(.*?)\\.xml$");

          for (String file : fileList) 
          {
            Matcher m = p.matcher(file);
            if (m.matches()) 
            {
              list.add(m.group(1));
            }
          }
        }

        try
        {

            XPathFactory xPathFactory = XPathFactory.newInstance( );
            XPath xpath = xPathFactory.newXPath(  );
            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance(  );
            DocumentBuilder builder = docBuilderFactory.newDocumentBuilder(  );

            //Loop over files

            for (int i = 0; i < fileList.length; i++)
            {   
                Document doc =  builder.parse(fileList[i]);
                boolean matches = "false".equals(xpath.evaluate("//isTest/text()", doc)); 
            }
        }

        catch(Exception e) 
        {
            e.printStackTrace();
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:23:11.803

如果文件具有您可以使用的 XSD，`JAXB`则这是首选的解决方案。您不想在 XML 上使用正则表达式，因为`CDATA`嵌套标签会毁了您的一天。

像这样使用 SAX 是一个可能的解决方案：

```
public static void main(String[] args)
{
SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();

    DefaultHandler handler = new DefaultHandler() {

    boolean isTest= false;

    public void startElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {

        System.out.println("Start Element :" + qName);

        if (qName.equalsIgnoreCase("isTest")) {
            isTest= true;
        }

    }

    public void endElement(String uri, String localName,
        String qName) throws SAXException {

        System.out.println("End Element :" + qName);

    }

    public void characters(char ch[], int start, int length) throws SAXException {

        if (isTest) {
            System.out.println("is test : " + new String(ch, start, length));
            isTest= false;
        }
    }

     };

       saxParser.parse("c:\\file.xml", handler);  
} 
```

[从这里](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)改编的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:22:08.800

Sax 可能更有效（内存方面），但这里是 xPath 版本的片段，可能更短，行方面

```
XPathFactory xPathFactory = XPathFactory.newInstance( );
XPath xpath = xPathFactory.newXPath(  );
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance(  );
DocumentBuilder builder = docBuilderFactory.newDocumentBuilder(  );

/* Loop over files */

Document doc =  builder.parse(file);
boolean matches = "false".equals(xpath.evaluate("//isTest/text()", doc)); 
```

# php - mysql 查询在此脚本中不起作用

> ID：15662416
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:15:25.533
> 
> 标签：php, phpmyadmin

```
$host     = 'localhost';
$user     = 'root';
$password = '';
$database = 'egov';

$conn = mysql_connect($host, $user, $password) or die('Server Information is not Correct');
mysql_select_db($database, $conn) or die('Database Information is not correct');

$sql = "CREATE TABLE IF NOT EXISTS 'upload'(
file_id INT(11) NOT NULL,
fName VARCHAR(255) NOT NULL,
lName VARCHAR(255) NOT NULL,
Mo INT(11) NOT NULL,
dese VARCHAR(255) NOT NULL,
Email VARCHAR(255) NOT NULL,
file_name VARCHAR(255) NOT NULL,
PRIMARY KEY(file_id))ENGINE = MYISAM";

if (isset($_POST['upload']) && $_FILES['userfile']['size'] > 0) {
    $fileName = $_FILES['userfile']['name'];
    $tmpName  = $_FILES['userfile']['tmp_name'];
    $fileSize = $_FILES['userfile']['size'];
    $fileType = $_FILES['userfile']['type'];

    $fp      = fopen($tmpName, 'r');
    $content = fread($fp, filesize($tmpName));
    $content = addslashes($content);
    fclose($fp);

    if (!get_magic_quotes_gpc()) {
        $fileName = addslashes($fileName);
    }

    $da = date("dmy");
    echo $da;

    $fname = $_REQUEST['lastname'];
    $lname = $_REQUEST['firstname'];
    $pno   = $_REQUEST['mbo'];
    $email = $_REQUEST['email'];
    $query = $_REQUEST['description'];

    $sql = "INSERT INTO upload (
                    fName,
                    lName,
                    Mo,
                    dese,
                    Email                   
                )
                VALUES (
                    '$fname',
                    '$lname',
                    '$pno',
                    '$email',
                    '$query ',
                    'file_name',
                    NOW()
                )";
}

$query = "SELECT * FROM upload";
    $result = mysql_query($query);

    echo "<table>";
    echo "<tr>";

    while( ($row = mysql_fetch_array($result)))
{
    echo "<tr>";
    echo "<td>".$row['fName']."</td>";
    echo "<td>".$row['lName']."</td>";
    echo "<td>".$row['Mo']."</td>";
    echo "<td>".$row['dese']."</td>";

    echo "<td>".$row['Email']."</td>";
    echo "</tr>";
}

    echo "</tr>";
    echo "</table>"; 
```

数据没有插入到表中，我已经问过了，但没有得到答复。不要拒绝投票，因为它会毁了我的帐户。

我的html代码是：

```
<input type="hidden" name="MAX_FILE_SIZE" value="2000000">
<input name="userfile" type="file" id="userfile"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:20:22.543

问题在于您的`INSERT`声明（您从未执行过）。

```
$sql = "INSERT INTO upload (
                fName,
                lName,
                Mo,
                dese,
                Email                   
            )
            VALUES (
                '$fname',
                '$lname',
                '$pno',
                '$email',
                '$query ',
                'file_name',
                NOW()
            )"; 
```

您的列列表有 5 列，您要发送 7 列。

如评论中所述，您应该停止使用`mysql_`函数并使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:24:14.070

您的插入语句将不起作用（即使您执行了它），因为您没有添加`file_id`设置为`NOT NULL`并且是您的主键的，并且如上所述，您传递的值比提到的字段多。所以我首先将创建表更改为：

```
$sql = "CREATE TABLE IF NOT EXISTS  'upload'(file_id INT(11) NOT NULL AUTO_INCREMENT,... 
```

如果您不想明确命名`file_id`，然后去查看更多教程，网络上有很多教程。并仔细阅读它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:28:07.107

您的代码中有以下错误：

1 - 从创建表查询中删除单引号，即

从改变

```
$sql = "CREATE TABLE IF NOT EXISTS  'upload'(file_id INT(11) NOT NULL,fName VARCHAR(255)    
NOT NULL,lName VARCHAR(255) NOT NULL,Mo INT(11) NOT NULL,dese VARCHAR(255) NOT 
NULL,Email VARCHAR(255) NOT NULL,file_name VARCHAR(255) NOT NULL,PRIMARY 
KEY(file_id))ENGINE = MYISAM"; 
```

到

```
$sql = "CREATE TABLE IF NOT EXISTS  upload (file_id INT(11) NOT NULL,fName VARCHAR(255)    
NOT NULL,lName VARCHAR(255) NOT NULL,Mo INT(11) NOT NULL,dese VARCHAR(255) NOT 
NULL,Email VARCHAR(255) NOT NULL,file_name VARCHAR(255) NOT NULL,PRIMARY 
KEY(file_id))ENGINE = MYISAM"; 
```

2 - 您的插入查询错误。

值的数量大于参数的数量，即

$sql = "INSERT INTO upload (fName, lName, Mo, dese, Email
) VALUES ('$fname', '$lname', '$pno', '$email', '$query', 'file_name', NOW ())"; 对于 5 列，您将提供 7 列。更改查询，例如

```
 INSERT INTO upload (
                fName,
                lName,
                Mo,
                dese,
                Email                   
            ) .... 
```

到

```
INSERT INTO upload (
                fName,
                lName,
                Mo,
                dese,
                Email,
               NAME_OF_YOUR_QUERY_COLUMN,
               NAME_OF_YOUR_file_name_COLUMN,
               NAME_OF_YOUR_CURRENT_DATE_COLUMN
            ) .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:29:48.987

首先，您没有使用 `mysql_query($sql)` and执行查询

其次，您的列数和您发送的插入值不一样......这将产生mysql错误

# ruby-on-rails - Ruby on Rails：一个可选参数让我重复代码行

> ID：15662418
> 
> 赞同：1
> 
> 时间：2013-03-27T15:15:26.723
> 
> 标签：ruby-on-rails, optional-arguments

我有以下代码片段：

```
if my_string.comment.blank?
  xml.string(:name => my_string.name) {
    xml.text(variation_value(my_string, variation_id))
  }
else
  xml.string(:name => my_string.name, :comment => my_string.comment) {
    xml.text(variation_value(my_string, variation_id))
  }
end 
```

我不喜欢这里两次提到 xml.string 及其块。这怎么可能改写？

是否可以重写为有两个不同的 xml.string 调用，但对它们都使用一个块？

或者可以`:comment => my_string.comment`通过或不通过，取决于`my_string.comment.blank?`条件？

PS 这个片段使用 Nokogiri 来形成 XML，并且没有“字符串”方法可以查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:21:00.753

我能想到的第一件事是事先准备参数散列：

```
args = {:name => my_string.name}
args[:comment] = my_string.comment unless my_string.comment.blank?

xml.string(args) {
  xml.text(variation_value(my_string, variation_id))
} 
```

但也许存在一种更清洁的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:56:25.550

**方法一：使用合并构造选项**

```
xml.string(
  {:name => my_string.name}.merge(
    my_string.comment.present? ? {:comment => my_string.comment} : {}
  )
){
  xml.text(variation_value(my_string, variation_id))
} 
```

**方法 2：使用 Tap 构建选项**

```
xml.string(
  {:name => my_string.name}.tap { |o| 
    o[:comment] = my_string.comment if my_string.comment.present? 
  }
){
  xml.text(variation_value(my_string, variation_id))
} 
```

**方法 3：预先创建选项**

[看上面](https://stackoverflow.com/a/15662544/163203)的答案

我更喜欢方法3，然后是2。

# highcharts - 在 highcharts 气泡图中使用全高

> ID：15662421
> 
> 赞同：0
> 
> 时间：2013-03-27T15:15:35.813
> 
> 标签：highcharts, bubble-chart

我有一个问题，我无法利用情节区域的全部高度。我正在制作一个图表，说明在给定类别（A 到 H）上分布的人数。气泡的大小代表人数。请参阅[http://jsfiddle.net/rnilsen/fXzke/8/](http://jsfiddle.net/rnilsen/fXzke/8/)。气泡的大小变化很大，从 5 到 600 不等，但在观察时，您几乎看不到大小的差异。

内容 div 只有 75px 的高度。但是，如果我将其更改为例如 300 像素，您将立即看到不同之处。我希望气泡看起来与将其更改为 300 像素时相同，但使用较低的图表以适应小空间。

我怎样才能做到这一点，基本上使用所有可用的高度？

这是我使用的图表：

```
$(function () {
window.chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        zoomType: 'x',
        marginBottom: 25,
        marginTop: 0,
        plotBorderColor: 'red',
        plotBorderWidth: 1,
        spacingTop: 0,
        spacingBottom: 0,
    },

    credits : {
        enabled : false
    },

    exporting: {
        enabled: false
    },

    title: null,

    xAxis: {
        lineWidth: 0,
        lineColor: 'transparent',
        labels: {
            enabled: true
        },
        categories: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'],
    },

    yAxis: {
        lineColor: 'transparent',
        labels: {
            enabled: false
        },
        title: { text: null },
    },

    plotOptions: {
        lineWidth: 0
    },

    legend: {
        enabled: false
    },

    series: [
    {
        type: 'bubble',
        lineWidth: 0,

        data: [
            [0, 0, 5],
            [1, 0, 10],
            [2, 0, 200],
            [3, 0, 600],
            [4, 0, 20],
            [null,null,null],
            [6, 0, 500],
            [7, 0, 400]
        ],
    }]
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:25:55.767

有设置最小/最大气泡大小的选项。默认情况下，最大尺寸为图表高度的 20%。您可以在 plotOptions 中更改它，例如：

```
 plotOptions: {
        lineWidth: 0,
         bubble: {
                minSize:2,
                maxSize:"50%"
         }
    }, 
```

请注意，您还可以将最大值设置为像素数。

# jquery - 使用 jQuery 自动滚动图像（平滑）

> ID：15662426
> 
> 赞同：4
> 
> 时间：2013-03-27T15:15:51.957
> 
> 标签：jquery

我想为我的 wordpress 网站创建自己的 jQuery 动画，因为没有我需要的 wordpress 插件而且我不想使用 jquery 插件，它会在 wordpress 内部产生问题。

我的 html 包含一个水平图像列表，我只想自动平滑地向左滚动（几乎就像自动滚动的网站广告显示）

我该怎么做？

我尝试了以下，但滚动不流畅....

这是我的[小提琴](http://jsfiddle.net/tUj3N/15/)

代码：

jQuery：

```
var w = $('#clientsSlider ul').width();

$('#clientsSlider > ul').animate({
     left: -w
  }, 30000) 
```

HTML：

```
<div id="clientsSlider">
    <ul>
        <li><img src="..." /></li>
        <li><img src="..." /></li>
        <li><img src="..." /></li>
        <li><img src="..." /></li>
        <li><img src="..." /></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:38:29.300

你可以这样做

*   将您的图像合并到 1 个 .png 文件中
*   设置图像和元素背景，重复（0 中心）
*   使用 jQuery 为背景位置设置动画

```
(function slide(){
  $('#clientsSlider').animate({backgroundPosition : '-=2px'}, 20, 'linear', slide);
})();
```

```
#clientsSlider{
  height: 96px;
  background: #e5e5e5 url(http://i.stack.imgur.com/kejzw.png) repeat 0 center;
  margin: 0 auto;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="clientsSlider"></div>
```

将您的图像合并为一个：

![商标](../Images/fb495d43a027bdedc62ae44198fdae82.png)
^(（©免责声明：用于本答案和相关演示示例的随机选择的徽标是其各自所有者的商标和财产。）)

* * *

## 如果您想为每个徽标添加*点击功能*

是的，在背景图片上，并*在悬停时暂停，*就像：

```
var $sl = $('#clientsSlider'),
    slPos = 0,
    goTo = "",
    totW = 1254, // total image width
    imgMap = {
      /* logoEndsAtPX  : "urlToFollow" */
      366  : "planet.html",
      516  : "absa.html",
      766  : "kumbra.html",
      1051 : "bosch.html",
      1254 : "samancor.html"
    };

function slide(){
  slPos -= 1 ;
  $sl.animate({backgroundPosition : slPos}, 10, 'linear', slide);
}

$sl.hover(function(ev) {
  return ev.type=='mouseenter' ? $(this).stop() : slide() ;
}).on('click', function( ev ) {
  var mX = ev.clientX - $(this).offset().left;
  var mFixed = (Math.abs(slPos) + mX)  % totW;
  console.log(mFixed);
  $.each(imgMap, function( key, val ){
    goTo = val;
    if(key>mFixed)return false;
  });	
  alert( goTo ); // DO WITH URL WHATEVER YOU LIKE
});

slide(); // START!
```

```
#clientsSlider{
  height: 96px;
  background: #e5e5e5 url(http://i.stack.imgur.com/kejzw.png) repeat 0 center;
  margin: 0 auto;
  cursor:pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="clientsSlider"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:21:04.593

问题是你`duration`的水平太高了。这就是为什么它不能平滑。您的动画现在需要`30 seconds`（30000 毫秒）才能完成。

动画范围内没有足够的像素在如此长的持续时间内看起来很流畅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:02:48.960

以下是一些很酷的插件和水平自动滚动条的示例 - 称为**Marquees**

[http://remysharp.com/2008/09/10/the-silky-smooth-marquee/](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)

[小提琴](http://jsfiddle.net/FWWEn/)示例

鼠标悬停暂停的[小提琴示例：](http://jsfiddle.net/zrW5q/)

一些代码可以让该死的 stackoverflow 安静下来“到 JSfiddle 的链接必须伴随着 ...blabla”

```
(function($) {
        $.fn.textWidth = function(){
             var calc = '<span style="display:none">' + $(this).text() + '</span>';
             $('body').append(calc);
             var width = $('body').find('span:last').width();
             $('body').find('span:last').remove();
            return width;
        };....see the fiddle 
```

# css - 如何让我的背景拉伸整个页面

> ID：15662427
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:15:58.077
> 
> 标签：css

我知道有人问过这个问题，我认为我做得对，但它只是拉伸了内容的高度。

这是我的例子：

![在此处输入图像描述](../Images/10c11bcb2081f1fc3e091f4c21b92d6f.png)

我的CSS如下：

```
body 
{   
  background-color: #ffffff;
  font-size: .85em;
  font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
  margin: 0;
  padding: 0;
  color: #4c89b6;

        background-image: url('../Content/images/tribackground.png');
        background-repeat: repeat-x;
        background-size: 1px 100%;

} 
```

关于如何让它用背景填充页面的任何建议？

======= 更新 =======

我对以下内容进行了更改：

```
body 
{   
  background-color: #ffffff;
  font-size: .85em;
  font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
  margin: 0;
  padding: 0;
  color: #4c89b6;

  backgound-size: cover;
  background-image: url('../Content/images/tribackground.png');
  background-repeat: repeat-x;
} 
```

我也试过：

```
body 
{   
  background-color: #ffffff;
  font-size: .85em;
  font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
  margin: 0;
  padding: 0;
  color: #4c89b6;

  background-size:100%;
  background-image: url('../Content/images/tribackground.png');
  background-repeat: repeat-x;
} 
```

两者都这样做：

![在此处输入图像描述](../Images/966f5a7ad53982d3c5335f161f7552e5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:17:53.683

在现代浏览器中，您可以使用

```
backgound-size: cover; 
```

这里列出了一些不同的方法：http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

但这里的主要问题是您的 body/html 的最小高度不是 100%。如果您只使用它可能会起作用：

```
body, html {
   min-height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:08:47.293

从您在问题中包含的图像看来，您的图像在上升时会淡出，您只是在页面底部重复。如果不是这种情况，他们已经给出的答案完全涵盖了这个问题。

默认情况下，背景图像将水平和垂直重复，直到覆盖整个背景区域。如果您希望将一张图像延伸到整个空间，请参阅其他答案。如果您希望图像在屏幕底部水平重复而不是垂直重复，那么您需要添加：

```
background-attachment: fixed;
background-position: bottom; 
```

并删除 background-size: 属性。这将导致图像停留在屏幕底部，如果内容超出屏幕底部，文本将在其上滚动。如果您的内容没有填满整个屏幕，图像仍会在页面底部重复出现。

如果您删除 background-attachment: 属性，则图像将在内容区域的底部重复，而不是在屏幕的一部分上方或完全滚动到屏幕底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:18:17.610

你能试试吗：

```
background-size: 100% auto; # width and height, can be %, px or whatever. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:19:57.707

背景大小：100%；

您的版本（1px 100%）正在限制高度。

# jasper-reports - 将 Jasper 参数注入字段规范

> ID：15662450
> 
> 赞同：2
> 
> 时间：2013-03-27T15:16:43.207
> 
> 标签：jasper-reports

我想要共享（模板）适用于各种 XML 数据源的 .JRXML 文件。

我所知道的唯一可能会阻止这种情况的是，现场规格会略有不同。

对于一个 XML 文件，名称字段的 XPATH 可能是：

```
 person/name/last 
```

对于另一个 XML 文件，XPATH 可能是：

```
 contact/last_name 
```

理想情况下，我可以将 XPATH 作为参数传递并像这样使用它：

```
 <field name="name" class="java.lang.String">
    <fieldDescription> $P{NAME_XPATH} </fieldDescription>
</field> 
```

但是 Jasper 似乎不支持在`<fieldDescription>`标签中使用参数。

我是否可以通过某种方式将字段规范注入到我的 JRXML 模板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:09:33.067

由于您的系统是基于 XML 的，为什么不使用 XSLT？您的 JRXML 模板可以调整为 XSL 样式表，然后使用您的 XML 配置文件作为输入，XSLT 处理器可以将字段描述替换为配置内容。

示例： **JRXML/XSL**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/report-config">

    <jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd">

    ...

    <field name="name" class="java.lang.String">
        <fieldDescription><xsl:value-of select="name"/></fieldDescription>
    </field>

    ...

    </jasperReport>

  </xsl:template>
</xsl:stylesheet> 
```

**配置 XML**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<report-config>
    <name>person/name/last</name>
</report-config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:59:19.973

Jasper 不支持在`<fieldDescription>`标签中使用参数。

我下载了 Jasper 源代码，但我认为您无法通过简单地实现替代方法来添加此功能`XPathExecutor`。原因是因为包含参数的上下文对 XPathExecutor 工厂类不可用。简而言之，需要添加很多上下文传递。

您当然可以尝试添加它，但它会影响许多类文件，然后它会成为 Jasper 可能无法接受的那种更改，并且您将永远合并不同的源。

我不准备冒这个险。另外，我认为 Jasper 迟早会添加这个。

但是，我确实提出了一个解决方案，该解决方案基本上涉及编写您自己的自定义 XPathExecutor，然后通过 Threadlocal 变量实现将上下文传递给它。在下面的示例代码中，Threadlocal 变量是`ReportGeneratorJasper.requestContext`

```
static ThreadLocal<ReportRequest> requestContext; 
```

这是在我的班级中设置自定义 XPathExecutor 的代码`ReportGeneratorJasper`：

```
 JasperReport repResource = getJasperReport(report);
    JasperPrint jp = null;

    // Setup for eReports XPATH executers
    //
    JasperReportsContext jrc = DefaultJasperReportsContext.getInstance();
    jrc.setProperty(
        JRXPathExecuterUtils.PROPERTY_XPATH_EXECUTER_FACTORY, 
        XalanNamedParameterXPathExecutor.class.getCanonicalName());

    requestContext = 
               new ThreadLocal<ReportRequest>() {
                         protected synchronized ReportRequest initialValue() {
                         return request;
             };
    };

    JasperFillManager jfm = JasperFillManager.getInstance(jrc); 
```

ReportRequest 是我自己的 bean，它包含定义“这个”特定报告生成请求的所有属性。

这是自定义的 XPathExecutor（它也提供了自己的工厂）。：

```
public class XalanNamedParameterXPathExecutor 
            extends XalanXPathExecuter implements JRXPathExecuterFactory {

    // Reference to the Threadlocal
    //
    private ReportRequest request;

    public static final String PREFIX = "$";

    public XalanNamedParameterXPathExecutor() {
        this.request = ReportGeneratorJasper.requestContext.get();
    }

    @Override
    public Object selectObject(Node arg0, String xpath) throws JRException {

        String useXpath = xpath;

        if (xpath.startsWith("$")) {
            String value = request.getScalarParamAsString(xpath);
            useXpath = (value != null ? value : xpath);         
        }

        return super.selectObject(arg0, useXpath);
    }

    @Override
    public JRXPathExecuter getXPathExecuter() {
        return new XalanNamedParameterXPathExecutor();
    } 
```

使用 Threadlocal 并不是一个理想的解决方案。如果报表填充器在不同的线程中运行，它很容易中断。但在当前版本的 Jasper 中，这似乎不是问题。

希望 Jasper 将为此实现内置支持。

# database-design - 处理公共和非公共数据的数据库设计

> ID：15662451
> 
> 赞同：-2
> 
> 时间：2013-03-27T15:16:45.343
> 
> 标签：database-design

我正在做一个设计。目前，我们有一个数据库，其中包含“发布”的内容。意味着它可供公众使用。我被要求修改此过程，以便在“重新发布”该记录之前不会公开对数据的任何其他更改。

目前，有一个标志指示记录是否已发布。

我想将记录保存在一个数据库中，而不是一分为二。

这种情况有什么标准做法吗？

谢谢

TR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:20:37.083

这是批准工作流程的一个非常基本的示例。有几种不同的方法可以解决这个问题，但基本上归结为将已发布的内容与待处理的内容分开。因此，例如，您将有一个代表完全发布和公开内容的表格。然后另一个表可以保存公共表中记录的未决更改。一旦管理员或编辑批准更改，您只需将现在批准的记录的内容复制到公共表中即可。

通过跟踪文档、草稿等的多个版本的方法，您可以得到比这更复杂的方法……但它们都是相同原则的扩展：将公共与待处理分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:28:25.920

> 目前，有一个标志指示记录是否已发布。

美好的。添加修改和重新发布的值。

# c# - MemoryMappedFile CreateViewAccessor 抛出“没有足够的存储空间来处理此命令。”

> ID：15662455
> 
> 赞同：4
> 
> 时间：2013-03-27T15:17:05.207
> 
> 标签：c#, memory-mapped-files

我们在 MemoryMappedFile 中加载了一个 222MB 的文件来访问原始数据。使用 write 方法更新此数据。经过一些计算，数据应重置为文件的原始值。我们目前正在通过释放类并创建一个新实例来做到这一点。这在很多时候都很顺利，但有时 CreateViewAccessor 会崩溃，但会出现以下异常：

> System.Exception：没有足够的存储空间来处理此命令。---> System.IO.IOException: 没有足够的存储空间来处理这个命令。
> 
> 在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.MemoryMappedFiles.MemoryMappedView.CreateView(SafeMemoryMappedFileHandle > memMappedFileHandle, MemoryMappedFileAccess access, Int64 offset, Int64 size) 在 System.IO.MemoryMappedFiles.MemoryMappedFile.CreateViewAccessor( Int64 偏移，Int64 > 大小，MemoryMappedFileAccess 访问）

以下类用于访问内存映射文件：

```
public unsafe class MemoryMapAccessor : IDisposable
{
    private MemoryMappedViewAccessor _bmaccessor;
    private MemoryMappedFile _mmf;
    private byte* _ptr;
    private long _size;

    public MemoryMapAccessor(string path, string mapName)
    {
        FileInfo info = new FileInfo(path);
        _size = info.Length;

        using (FileStream stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Delete | FileShare.ReadWrite))
            _mmf = MemoryMappedFile.CreateFromFile(stream, mapName, _size, MemoryMappedFileAccess.Read, null, HandleInheritability.None, false);

        _bmaccessor = _mmf.CreateViewAccessor(0, 0, MemoryMappedFileAccess.CopyOnWrite);
        _bmaccessor.SafeMemoryMappedViewHandle.AcquirePointer(ref _ptr);
    }

    public void Dispose()
    {
        if (_bmaccessor != null)
        {
            _bmaccessor.SafeMemoryMappedViewHandle.ReleasePointer();
            _bmaccessor.Dispose();
        }
        if (_mmf != null)
            _mmf.Dispose();
    }

    public long Size { get { return _size; } }

    public byte ReadByte(long idx)
    {
        if ((idx >= 0) && (idx < _size))
        {
            return *(_ptr + idx);
        }

        Debug.Fail(string.Format("MemoryMapAccessor: Index out of range {0}", idx));
        return 0;
    }

    public void Write(long position, byte value)
    {
        if ((position >= 0) && (position < _size))
        {
            *(_ptr + position) = value;
        }
        else
            throw new Exception(string.Format("MemoryMapAccessor: Index out of range {0}", position));
    }
} 
```

此问题的可能原因是什么，是否有任何解决方案/解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T08:45:51.647

*   尝试使用 x64 平台**和**处理而不是 x32平台

*   确保每次都手动处理 MemoryMapAccessor。根据您的实现，GC**不会**为您调用 Dispose - 这里有很好的解释[正确使用 IDisposable 接口](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)

*   调用 Dispose 不会使您的变量为空，因此 GC 会等到它理解没有人使用这些变量。确保您的变量在 Dispose 之后超出范围，或者只是将它们标记为空。最简单的情况是在 Dispose 中处理 - 如果不再需要变量，为什么不将它们标记为 null？这允许 GC 更快地吃掉它们。

*   这是关于此类错误的另一个好主题（尽管提到了 VS.Net IDE，但它包含可能发生此类错误的详细信息）[没有足够的存储空间可用于在 VisualStudio 2008 中处理此命令](https://stackoverflow.com/questions/995906/not-enough-storage-is-available-to-process-this-command-in-visualstudio-2008)如果您经常需要非常大的部分的想法之一内存，这会导致内存碎片，所以当你仍然有足够的总可用内存时，你没有足够大的可用内存块。

*   对于您的特定情况，将数组从文件中读入内存可能是一个很好的主意`byte[]`，尽管不涉及非托管资源。通过一些幸运的编码，它可能会导致 CLR 更好地管理内存；但您需要谨慎对待此类决定。

# html - cakephp 2.3 链接标签与 rel='apple-touch-icon-precomposed'

> ID：15662457
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:07.517
> 
> 标签：html, cakephp

我需要使用 cakephp 2.3 生成以下 html 标记请提供任何帮助来生成它。我在`img`文件夹中有一张图片，它作为 href 属性值出现。

```
 <link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144-precomposed.png"> 
```

我尝试使用 meta 的不同选项，但我无法解决图像路径问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:31:26.943

```
echo $this->Html->meta(array(
    'rel' => 'apple-touch-icon-precomposed',
    'sizes' => '144x144',
    'link' => '/img/apple-touch-icon-144-precomposed.png',
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:06:55.670

您可以通过以下方式构建任何 Html 标签`HtmlHelper::tag`：[http ://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::tag](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::tag)

# java - 使用 Java 和 COM4J 的 Quality Center V11 脚本统计

> ID：15662461
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:22.513
> 
> 标签：java, hp-quality-center, com4j

我正在尝试访问 ALM V11 (QC) 测试脚本详细信息，例如使用 Java 的特定项目的通过/未运行，但我得到空值。有人可以帮我吗？

我得到的错误：

```
java.lang.NullPointerException
at com.testpack.HPTest2.main(HPTest2.java:53) 
```

我用来连接的代码

```
 ITDConnection itd=ClassFactory.createTDConnection();
        System.out.println("Test1.1:"+ itd.connected());
        itd.initConnectionEx(url);
        System.out.println("Test1:"+ itd.connected());
        itd.connectProjectEx(domain,project,username,password);

        ITestFactory testFactory;
        //ITSTest2 testFactory;
        ITDFilter2 filterF;
        IList executinList;

        testFactory=(itd.testFactory()).queryInterface(ITestFactory.class);
        //testFactory=(ITestFactory)itd.testFactory().queryInterface(ITestFactory.class);
        filterF=testFactory.fields().queryInterface(ITDFilter2.class);
        String query="\"Passed\"";
        filterF.filter("TC_STATUS",query);
        executinList=filterF.newList(); 
```

我正在尝试比较我拥有的 VBScript

```
Set tdc = CreateObject("tdapiole80.tdconnection")
tdc.InitConnection serverName, domainName
tdc.ConnectProject projectName, projUserName, projPassword

'Get the test factory filter
Set TestSetFact = tdc.TSTestFactory
'TestSetFact.AddItem()
Set TestSetFilter = TestSetFact.Filter
stemp = ApplicationName
appsplit = Split(ApplicationName, "or")

irowtemp = 18
'----------------------------------------------------

'--------------------------------
For iLoop = 0 To UBound(appsplit)
    TestSetFilter.Filter("TS_USER_06") = appsplit(iLoop)

    If initiativeName <> "" Then
        TestSetFilter.Filter("TS_USER_04") = initiativeName
    End If
    TestSetFilter.Filter("TC_STATUS") = "Passed"

    Sheet1.Cells(irowtemp, 2).Value = Trim(appsplit(iLoop)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:05:18.900

如果包装的 COM 对象不是该类型，则 Com4jObject.queryInterface() 方法返回 null。

它可能只是自动完成，弄乱了你的代码，但你应该使用

```
filterF=testFactory.filter().queryInterface(ITDFilter2.class); 
```

获取过滤器，而不是 fields()。

# html - 外接显示器影响 Chrome 字体清晰度？

> ID：15662466
> 
> 赞同：4
> 
> 时间：2013-03-27T15:17:32.907
> 
> 标签：html, google-chrome, font-face, font-awesome, text-rendering

我在 Google Chrome 中遇到字体清晰度问题。我正在 www.transitioncville.org 上开发一个网站，使用 @font-face 网络字体和 FontAwesome 在我的导航栏中呈现文本和图标。当我插入外接显示器（但 Chrome 窗口在我的 macbook 显示器上）并导航到我的网站时，我会看到清晰、清晰的文本/图标：

![清晰的文字](../Images/d683db2cd27c42ac4f8286e8242b9f3f.png)

如果我拔掉外​​接显示器，我会继续获得清晰、清晰的文本/图标（即使我刷新页面或清除缓存）。但是，如果我在拔掉外接显示器的情况下打开一个新的 Chrome 选项卡并导航到同一个网站，文本和图标会突然变得模糊（见下文）。我已经在其他机器上复制了这个。这可能是什么原因造成的？问题似乎不仅限于 FontAwesome，因为您也可以看到文本变大。

![在此处输入图像描述](../Images/4f9c3f47f3a1dde8e47312925de121a8.png)

对于它的价值，Safari 和 Firefox 似乎都没有任何问题。

Google Chrome 25.0.1364.172 (Official Build 187217) OS Mac OS X WebKit 537.22 (@145275) JavaScript V8 3.15.11.17 Flash 11.6.602.180 User Agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.22 (KHTML, like壁虎）Chrome/25.0.1364.172 Safari/537.22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T00:58:53.650

我不确定具体发生了什么，但是当使用以下 CSS 时，有时奇怪的浏览器特定字体渲染问题会消失。尝试将此添加到页面中包含的全局 css 文件中。

```
html, body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
} 
```

# sql - 计数比较，其中某些字符是数字

> ID：15662468
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:34.220
> 
> 标签：sql

真的把你们当作一个共鸣板，但这是我的情况

我试图弄清楚如何根据员工编号（Num 字段）为员工表创建准确的计数，其中一些员工编号中有字母。

详情：四家公司，大约 2 年前合并。主要公司一直使用纯数字作为员工编号。First Sub Company 以前使用字母和数字，现在改用所有 Numbers，但老员工记录仍然有字母。（其他子公司在同一张表中，但就本报告而言，它们无关紧要）

从 00000-55555 的所有员工记录是主公司和 55556-88888 第一子公司。此外，任何带有字母的员工编号也是第一子公司的一部分。

我知道如何纯粹为数字范围做一个案例陈述，但是员工编号的字母部分让我失望。

我不确定如何准确计算两家公司的员工人数。和那些在场的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:30:20.700

这样的事情应该有效（如果我对您的情况的理解是正确的）：

```
SELECT
    SUM( IsFirstSubCompany ) FirstSubCompanyEmployeeCount
    , SUM( IsMainCompany ) MainCompanyEmployeeCount
FROM
    (
        SELECT
            IsFirstSubCompany = CASE 
                WHEN u.Num LIKE '%[a-z]%' OR ( 1 = ISNUMERIC( u.Num ) AND CONVERT( INT, u.Num ) BETWEEN 55556 AND 88888 ) THEN 1 ELSE 0
            END,
            IsMainCompany = CASE
                WHEN 1 = ISNUMERIC( u.Num ) AND CONVERT( int, u.Num ) BETWEEN 00000 and 55555 THEN 1 ELSE 0
            END
        FROM
            UserTable u    
    ) q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:30:45.667

如果您在 SQL Server 中（您没有在帖子中提到您的 RDBMS），您可以使用以下内容来实现您正在寻找的内容：

```
SELECT  Company,
        COUNT(*) AS NoOfEmployees
FROM
    (
        SELECT  CASE ISNUMERIC(EmployeeNo)
                    WHEN 1 THEN
                        CASE 
                            WHEN (EmployeeNo < 55556) THEN 'Main Company'
                            ELSE 'First Sub Company'
                        END
                    ELSE 'First Sub Company'
                END AS Company
          FROM  [table]
    ) a
GROUP BY Company 
```

请记住`EmployeeNo`用您的员工编号列的实际名称和`table`您的表的名称替换。

这将输出一个包含公司列（第一个子公司或主要公司）的表，后跟属于每个公司的员工人数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:34:59.150

假设 SQLServer，请尝试：

```
with cte as
(select
 case when convert(numeric,
                   case isnumeric(employee_no) when 1 then employee_no else '99999' end)
           between 0 and 55555 then 'Main' else 'Sub' end co
 from employee)
select co, count(*) from cte group by co 
```

[（这里](http://sqlfiddle.com/#!3/21f36/7)的 SQLFiddle ）

# mysql - MySQL GROUP BY 有两个计数

> ID：15662469
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:35.250
> 
> 标签：mysql, count

我有一个表，其中包含我感兴趣的两列，created_at 和 total_time。我想执行一个查询，将记录按创建的星期几分组，计算总计数以及 total_time > 5 的计数。

例如，如果星期五有 6 条记录，其中 4 条的时间 > 5，则查询应为星期五返回：

星期五 | 6 | 4

我有一天和计数 > 5 像这样工作：

```
SELECT
DAYNAME(created_at) as weekday,
COUNT(*) AS count
FROM my_table
WHERE
total_time > 5
GROUP BY weekday
ORDER BY count DESC 
```

但是有没有办法让总计数也包括在内（不管总时间）？

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:20:20.080

您可以获得两个计数，但使用以下方法：

```
SELECT DAYNAME(created_at) as weekday,
  COUNT(*) AS count,
  sum(case when total_time > 5 then 1 else 0 end) TimeOver5
FROM my_table
GROUP BY weekday
ORDER BY count DESC 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/55218/1)。

这使用带有`CASE`表达式的聚合函数来获取`total_time >5`

# namespaces - 如何使用基于命名空间的自动加载将库包含到 Zend Framework 2 应用程序中？

> ID：15662471
> 
> 赞同：2
> 
> 时间：2013-03-27T15:17:45.307
> 
> 标签：namespaces, zend-framework2, autoload, zend-autoloader

我在其中创建了一个子文件夹`MyNamespace`（`/vendor/`它是存放自己的库的正确位置吗？）并且想`MyNamespace\Mvc\Router\MyCustomRouter`在我的应用程序中使用类。如何将此库包含到基于命名空间的自动加载中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:10:39.820

除了 Rob 的回答之外，还有其他一些自动加载自定义库的方法

首先，确保您的文件夹结构符合 psr0

示例中使用的神话 psr0 兼容 MyNamespace 库的典型结构

```
vendor/
    MyNamespace/
        lib/
            MyNamespace/
                FooClass.php
                BarClass.php 
```

使用从 Module.php 文件中包含`getAutoloaderConfig`

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                'MyNamespace' => __DIR__ . '/../../vendor/MyNamespace/lib/MyNamespace',
            ),
        ),
    );
} 
```

直接在`index.php`使用`AutoloaderFactory`中配置`StandardAutoloader`

```
// Setup autoloading
require 'init_autoloader.php';

Zend\Loader\AutoloaderFactory::factory(array(
    'Zend\Loader\StandardAutoloader' => array(
        'namespaces' => array(
            'MyNamespace' => __DIR__ . '/../vendor/MyNamespace/lib/MyNamespace',
        ),
    )
)); 
```

你甚至可以在 ./config/autoload/ 文件中做同样的事情

```
<?php    
// file ./config/autoload/namespaces.local.php

Zend\Loader\AutoloaderFactory::factory(array(
     'Zend\Loader\StandardAutoloader' => array(
         'namespaces' => array(
             'MyNamespace' => __DIR__ . '/../../vendor/MyNamespace/lib/MyNamespace',
         ),
     )
)); 
```

包含您的库的另一种选择是编辑`vendor/composer/autoload_namespaces.php`

```
<?php

// autoload_namespaces.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'Zend\\' => $vendorDir . '/zendframework/zendframework/library/',
    'MyNamespace\\' => $vendorDir . '/MyNamespace/lib/',
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:01:12.817

编辑`init_autoloader.php`并将`if ($zf2Path) {`部分更改为：

```
if ($zf2Path) {
    if (isset($loader)) {
        $loader->add('Zend', $zf2Path);
    } else {
        include $zf2Path . '/Zend/Loader/AutoloaderFactory.php';
        Zend\Loader\AutoloaderFactory::factory(array(
            'Zend\Loader\StandardAutoloader' => array(
                'autoregister_zf' => true,
                'namespaces' => array(
                    'MyNamespace' => __DIR__ . '/vendor/MyNamespace',
                ),                    
            )
        ));
    }
} 
```

请注意`MyNamespace`在该部分中添加的键`Zend\Loader\StandardAutoloader`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T07:34:53.007

您也可以使用[作曲家自动加载](https://getcomposer.org/doc/01-basic-usage.md#autoloading)

```
{
"autoload": {
    "psr-0": {"MyNamespace\\": "vendor/MyNamespace/"}
}} 
```

# asp.net - 如何允许 Select 在 Datagrid 中也进入编辑模式？

> ID：15662476
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:54.217
> 
> 标签：asp.net, vb.net

问题说明了一切。我基本上需要允许用户在 Datagrid 中单击 Select 并进入编辑行模式，而不是用户必须单击 select 然后编辑？我需要首先进行选择的原因是因为我在后面的代码中将一些值传递给数据库。现在，正如我所说，用户单击选择，然后单击编辑，然后标记一个需要的复选框，然后进行更新。我想将此过程剪切为选择，标记复选框并更新。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:30:57.430

它有点（稍微）取决于您当前正在处理的事件。

在您的`SelectedIndexChanged`活动中，您可以这样做：

```
yourGridView.EditIndex = yourGridView.SelectedIndex; 
```

如果你参加了`SelectedIndexChanging`活动，你需要这样做：

```
yourGridView.EditIndex = e.NewSelectedIndex; 
```

其中“e”是您的`GridViewSelectEventArgs`对象。

根据代码的结构，您可能需要`yourGridView.DataBind();`在设置 EditIndex 后调用。

# wordpress - 由于 htaccess，wordpress 无法访问 wp-admin

> ID：15662478
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:58.873
> 
> 标签：wordpress, .htaccess

我是 wordpress 新手，我将网站路径从以下位置更改：

```
localhost/site/ 
```

到：

```
localhost/site/home/ 
```

现在我无法访问文件和 wp-admin 来撤消它。我应该修改哪个文件来修复我的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:26:45.663

假设您可以访问数据库，您可以更新 wp_options 表，修改 option_names 为“siteurl”和“home”的行。

如果您不能修改这些，那么您可以将这些添加到您的 wp-config 文件中（设置相关路径）：

定义（'WP_HOME'，'http://yourdomain.com' [）](http://yourdomain.com)；定义（'WP_SITEURL'，'http://yourdomain.com' [）](http://yourdomain.com)；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:26:59.307

以下是一些快速提示：

1.  确保新路径在您的`wp-admin -> settings`
2.  确保新路径反映为 RewriteBase 在`$WP_HOME/.htaccess`
3.  确保新路径反映为 RewriteBase 在`$WP_HOME/admin/.htaccess`
4.  完成此处列出的每一个步骤：[https ://codex.wordpress.org/Moving_WordPress](https://codex.wordpress.org/Moving_WordPress)

# c# - Windows RT 和 Toast 通知行为

> ID：15662479
> 
> 赞同：0
> 
> 时间：2013-03-27T15:17:59.963
> 
> 标签：c#, xaml, windows-8, notifications

您好，
我正在测试 Windows RT 应用程序的 Toast 通知。我在清单文件上将“Toast Capable”设置为yes，并创建了一个由按钮调用的示例方法，其中包含以下代码：

> var toastTemplate = ToastNotificationManager.GetTemplateContent(ToastTemplateType.ToastImageAndText01);
> 
> var text = toastTemplate.GetElementsByTagName("text")[0] as XmlElement; text.AppendChild(toastTemplate.CreateTextNode("这是测试！"));
> 
> var image = toastTemplate.GetElementsByTagName("image")[0] as XmlElement; image.SetAttribute("src", String.Format("ms-appx:///{0}", "Images/rss_logo.png"));
> 
> ToastNotification toastNotification = new ToastNotification(toastTemplate); ToastNotifier toastNotifier = ToastNotificationManager.CreateToastNotifier(); toastNotifier.Show(toastNotification);

当我点击按钮时，通知出现在屏幕的右上角，但没有文字和图像......只有框，带有应用程序的标志。

你能告诉我我哪里错了吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:52:59.210

关于第一个问题（文字未出现）：

在清单文件“Package.manifest”中，我将前景文本设置为“深色”。
问题是默认情况下，文本前景是白色的。

关于 Image 的问题：

我的图像格式不正确，并且不在正确的目录中。在 MS 快速入门（[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868254(v=win.10).aspx][1]）中，它说：

>“版本为每个图像源显示此步骤。图像大小必须 > 小于 200 KB 且小于 1024 x 1024 像素。"

# c - 错误：stdio.h：在制作过程中没有这样的文件或目录错误

> ID：15662480
> 
> 赞同：7
> 
> 时间：2013-03-27T15:17:59.987
> 
> 标签：c, ubuntu, gnu-make

我正在尝试在 Ubuntu 中编译以下程序。但我不断收到错误：“stdio.h：没有这样的文件或目录”错误。

```
#include <stdio.h>

int main(void)
{
  printf("Hello world");
} 
```

我的makefile是：

```
obj-m += hello.o 
all:
    make -I/usr/include -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules
clean:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-27T15:23:14.910

您构建程序的方式是构建内核模块而不是 c 程序应用程序的方式。并且`stdio.h`不存在于内核开发环境中，这就是您收到错误的原因：

```
error: "stdio.h: No such file or directory" error 
```

1）如果你想构建一个 linux 应用程序，那么你的 Makefile 是错误的：

你应该修改你的 Makefile

使用以下 Makefile：

```
all: hello

test: test.c
    gcc -o hello hello.c

clean:
    rm -r *.o hello 
```

2）如果你想构建一个内核模块那么你的c代码是错误的

*   **您不能**`stdio.h`在内核空间开发中使用。它在内核开发环境中不存在，所以这就是您收到错误的原因
*   **您不能**`main()`在内核模块 C 代码中使用
*   **您不能**`printf()`在内核模块 C 代码中使用

**代替**using `stdio.h`，您必须使用以下 include

```
#include <linux/module.h>   /* Needed by all modules */
#include <linux/kernel.h>   /* Needed for KERN_INFO */ 
```

**代替**using `int main() {`，你必须使用

```
int init_module(void) { 
```

**而不是**使用 `printf()`使用`printk()`

使用以下[hello 模块](http://www.tldp.org/LDP/lkmpg/2.6/html/x121.html)而不是您的 hello 代码

```
/*  
 *  hello-1.c - The simplest kernel module.
 */
#include <linux/module.h>   /* Needed by all modules */
#include <linux/kernel.h>   /* Needed for KERN_INFO */

int init_module(void)
{
    printk(KERN_INFO "Hello world 1.\n");

    /* 
     * A non 0 return means init_module failed; module can't be loaded. 
     */
    return 0;
}

void cleanup_module(void)
{
    printk(KERN_INFO "Goodbye world 1.\n");
} 
```

有关内核模块开发的更多详细信息，请参阅以下[链接](http://www.tldp.org/LDP/lkmpg/2.6/html/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T15:41:22.860

问题是你不能在内核内部使用`printf()`和`stdio.h`，你也不能使用`main()`函数。你需要`printk()`并且`module.h`

```
#include <linux/module.h> /* Needed by all modules */
#include <linux/kernel.h>

int init_module(void)
{
    printk(KERN_INFO "Hello world\n");

    return 0;
} 
```

当它卸载时，您还应该有一个`exit()`/`cleanup()`类型函数。

```
void clean_module(void)
{
    printk(KERN_INFO "Cleaning and exiting\n");
} 
```

然后加载模块的功能：

```
module_init(init_module);
module_exit(clean_module); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:22:15.427

您的 Makefile 不正确，请查看众多教程之一，例如： http: [//mrbook.org/tutorials/make/](http://mrbook.org/tutorials/make/)

构建独立应用程序的最简单的 Makefile 应该如下所示：

```
all: hello

hello: hello.o
    gcc hello.o -o hello

hello.o: hello.cpp
    gcc -c hello.cpp

clean:
    rm -rf *o hello 
```

希望能帮助到你 ！

# c# - 无法填充数据库表

> ID：15662483
> 
> 赞同：1
> 
> 时间：2013-03-27T15:18:06.550
> 
> 标签：c#

```
protected void ButtonAddDatabase_Click(object sender, EventArgs e)
{
    using (KnowItCvdbEntities db = new KnowItCvdbEntities())
    {
        SPWeb theSite = SPControl.GetContextWeb(Context);
        SPUser theUser = theSite.CurrentUser;
        string strUserName = theUser.LoginName;

        var theEmplDbSkill = (
                        from p
                        in db.EMPLOYEES
                        where p.username == strUserName
                        select p).FirstOrDefault();

        _emp = theEmplDbSkill;

        if (_emp != null)
        {                        
            foreach (var vItem in ListBoxDatabases.Items)
            {
                if (ValueAlreadyInListDb(vItem))
                    return;
            }                        

      //Get existing skilllevel from db
      var skillLevel = (from sL in db.TECHNICAL_SKILL_LEVEL 
                        where sL.technical_skill_level_id == Convert.ToInt32(DropDownListDB.SelectedValue)
                        select sL).FirstOrDefault();

       //Get existing skillvalue from db
        var skillValue = (from sV in db.TECHNICAL_SKILLS
                         where sV.technical_skill_id == Convert.ToInt32(RadioButtonListDatabase.SelectedValue)
                         select sV).FirstOrDefault();

       //Adding to employees_technical_skills table
       var empSkill = new EMPLOYEES_TECHNICAL_SKILLS
       {
            technical_skill_id = Convert.ToInt32(DropDownListDB.SelectedItem.Value),
            TECHNICAL_SKILLS = skillValue,
            technical_skill_level_id = Convert.ToInt32(RadioButtonListDatabase.SelectedItem.Value)
            TECHNICAL_SKILL_LEVEL = skillLevel,
            employee_id = _emp.employee_id
        }

            _emp.EMPLOYEES_TECHNICAL_SKILLS_Add(empSkill);
            db.SaveChanges();

            _emp.EMPLOYEES_TECHNICAL_SKILLS.Add(empSkill);
            db.SaveChanges();

        }                
    }
} 
```

现在我正在填充下表： ![在此处输入图像描述](../Images/46996e9399c9f22476c6e99b7cc4301a.png)

这是我的桌子： ![在此处输入图像描述](../Images/08be582f7f52bf6dbdd627b931cbb580.png)

但我不断收到错误：

> LINQ to Entities 无法识别方法“Int32 ToInt32(System.String)”方法，并且该方法无法转换为存储表达式。

问候，克里斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:42:00.503

看起来实体框架无法转换`Convert.ToInt32()`为 SQL 表达式。我会`int`先将单选按钮和下拉列表值转换为内存，然后将它们传递给查询：

```
int TechnicalSkillLevelID = int.Parse(DropDownListDB.SelectedValue);
int TechnicalSkillID = int.Parse(RadioButtonListDatabase.SelectedValue);
//Get existing skilllevel from db
      var skillLevel = (from sL in db.TECHNICAL_SKILL_LEVEL 
                        where sL.technical_skill_level_id == TechnicalSkillLevelID)
                        select sL).FirstOrDefault();

       //Get existing skillvalue from db
        var skillValue = (from sV in db.TECHNICAL_SKILLS
                         where sV.technical_skill_id == TechnicalSkillID)
                         select sV).FirstOrDefault();

       //Adding to employees_technical_skills table
       var empSkill = new EMPLOYEES_TECHNICAL_SKILLS
       {
            technical_skill_id = skillValue.technical_skill_id,
            TECHNICAL_SKILLS = skillValue,
            technical_skill_level_id = skillLevel.technical_skill_level_id)
            TECHNICAL_SKILL_LEVEL = skillLevel,
            employee_id = _emp.employee_id
        } 
```

此外，由于您已经撤回了技能等级和技能值，因此无需从下拉/单选按钮列表中获取值。只需使用`skillValue`and`skillLevel`对象。

# python - 使 Python 乌龟命令更小/更紧凑

> ID：15662484
> 
> 赞同：0
> 
> 时间：2013-03-27T15:18:10.820
> 
> 标签：python, command

如何使我的项目代码更小？这是我的刽子手图形的巨大定义。

```
def joonista_mees(valede_pakkumiste_arv):
    if valede_pakkumiste_arv == 0:
        ht()
        up()
        right(90)
        forward(150)
        right(90)
        forward(30)
        right(180)
        down()
        forward(200)
        back(170)
        left(90)
        forward(150)
        right(90)
        forward(100)
        right(90)
    if valede_pakkumiste_arv == 1:
        forward(15)
        right(90)
        circle(15)
        left(90)
        up()
        forward(30)
        down()
    if valede_pakkumiste_arv == 2:
        forward(45)
        backward(45)
        right(45)
        forward(20)
        backward(20)
        left(90)
    if valede_pakkumiste_arv == 3:
        forward(20)
        backward(20)
        right(45)
        forward(45)
        right(30)
    if valede_pakkumiste_arv == 4:
        forward(45)
        backward(45)
        left(60)
    if valede_pakkumiste_arv == 5:
        forward(45)
        backward(45)
        right(30)
        up()
        backward(67)
    if valede_pakkumiste_arv == 6:
        right(90)
        forward(3)
        right(45)
        down()
        forward(3)
        backward(6)
        forward(3)
        right(90)
        forward(3)
        backward(6)
        forward(3)
        right(45)
        up()
        forward(6)
        left(45)
        down()
        forward(3)
        backward(6)
        forward(3)
        right(90)
        forward(3)
        backward(7) 
```

有什么办法可以让这个更小，更紧凑？我可以在一行中写几个命令吗？我正在使用 Python 3.3，这是我项目的一部分，我真的很想得到一些帮助。如果你不能让它变小也没关系......但我只是想知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:24:38.913

您可以为迷你语言编写一个简单的解释器。例如，您可以编码

```
forward(3)
right(90)
forward(3)
backward(7) 
```

在一个字符串中`dostring = "f 3 r 90 f 3 b 7"`

解释器可能如下所示：

```
def interpret( dostring ):
     tokens = dostring.split()
     for command_id in range(0, len(tokens), 2):
             command = tokens[command_id]
             param = int(tokens[command_id+1])
             if command == "f":
                 forward( param )
             elif command == "b":
                 backward( param )
             elif command == "r":
                 right(param)
             else:
                 print("Unknown command: %s" % command) 
```

然后你只需调用：

```
interpret("f 3 r 90 f 3 b 7") 
```

# php - Composer 在 Packagist 之前使用 Github

> ID：15662485
> 
> 赞同：3
> 
> 时间：2013-03-27T15:18:12.783
> 
> 标签：php, symfony, composer-php

我在这里做了一个[FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)[的分支 RLovelett/FOSRestBundle 它有一个分支`dev-411`](https://github.com/RLovelett/FOSRestBundle/tree/dev-411)。我想在 Symfony2 项目中使用我的 FOSRestBundle 的 fork 和分支。

`composer.json`为了尝试这个，我像这样（完整）修补了我的 symfony2 项目[`composer.json`](https://gist.github.com/RLovelett/5254999)：

```
diff --git a/composer.json b/composer.json
index ec36007..19e82b5 100644
--- a/composer.json
+++ b/composer.json
@@ -23,7 +23,7 @@
         "jms/security-extra-bundle": "1.4.*",
         "jms/di-extra-bundle": "1.3.*",
         "jms/serializer-bundle": "0.12.x-dev",
-        "friendsofsymfony/rest-bundle": "0.11.*"
+        "friendsofsymfony/rest-bundle": "dev-411"
     },
     "scripts": {
         "post-install-cmd": [
@@ -42,12 +42,18 @@
     "config": {
         "bin-dir": "bin"
     },
-    "minimum-stability": "alpha",
+    "minimum-stability": "dev",
     "extra": {
         "symfony-app-dir": "app",
         "symfony-web-dir": "web",
         "branch-alias": {
             "dev-master": "2.2-dev"
         }
-    }
+    },
+    "repositories": [
+        {
+            "type": "vcs",
+            "url": "https://github.com/RLovelett/FOSRestBundle"
+        }
+    ]
 } 
```

当我运行时，`composer update`我收到以下错误消息：

```
Updating dependencies (including require-dev)
Your requirements could not be resolved to an installable set of packages.

Problem 1
- The requested package friendsofsymfony/rest-bundle dev-411 could not be found.

Potential causes:
- A typo in the package name
- The package is not available in a stable-enough version according to your minimum-stability setting
see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details.

Read <http://getcomposer.org/doc/articles/troubleshooting.md> for further common problems. 
```

***我的配置有什么问题？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:22:27.803

分支名称的Composer 前缀`dev-`以清楚地识别它们，因此如果分支是 `dev-411`，则它的 Composer 版本将是`dev-dev-411`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:46:09.233

试试这个 ：`"friendsofsymfony/rest-bundle": "0.11.dev-feature/411"`

更多信息在这里：[https ://github.com/composer/composer/issues/935](https://github.com/composer/composer/issues/935)

# image - matlab - VideoReader 帧未准确解码

> ID：15662486
> 
> 赞同：4
> 
> 时间：2013-03-27T15:18:13.223
> 
> 标签：image, matlab, video, image-processing, computer-vision

我在 Matlab 中处理视频，遇到了麻烦。

我在 Mac OS X 10.8.2（Mountain Lion）上使用 Matlab R2012a。

我可以在使用中加载视频`VideoReader`并像这样抓取一个帧：

```
vid = VideoReader('movie.mp4');
pic = read(vid, 20);
imshow(pic); 
```

但是，我在 Matlab 中看到的是..

![在此处输入图像描述](../Images/5d5f6951249cdd25aa0de03b6792957e.png)

而不是这个（在VLC中）..

![在此处输入图像描述](../Images/5b7b1dbc17e62f33207b0ee8111af736.png)

不仅运动出现乱码（绿松石卡车），而且背景中的绿色卡车实际上已经被该帧消失了。我猜编解码器正在以 Matlab 无法补偿的方式压缩电影。但是，我找不到任何其他 Matlab 可以接受的视频格式。

显示的视频是 mpeg4，yuv420p。我看到 Matlab 提到了很多关于支持 mpeg2 和 AVI 的偏好。我已经将视频转换为各种格式，`ffmpeg`但 Matlab 对所有其他文件格式都给出了以下错误：

> > 使用 VideoReader/init 时出错（第 447 行）
> > 无法初始化内部资源。
> > 
> > VideoReader 错误（第 132 行）
> > obj.init(fileName);

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:38:53.787

知道了。

感谢 @wakjah 提供有关 QuickTime 的提示。一位视频编辑朋友建议将[MPEG StreamClip](http://www.squared5.com/svideo/mpeg-streamclip-mac.html)转换为 QuickTime 格式。

这个工具拿走了我的 mp4 文件，让我`Export as QuickTime`.

果然，Matlab 把它加载到`mov`文件上没问题，工件也不见了。

干杯。

# firefox - 有什么方法（也许是某种黑客）可以忽略 Firebug 中的特定错误/警告？

> ID：15662487
> 
> 赞同：0
> 
> 时间：2013-03-27T14:04:58.160
> 
> 标签：firefox

作为一名 Web 开发人员，我经常使用 Firebug，而且我已经遇到了足够多的这些持续性错误/警告，无论如何这些错误/警告总是会出现。其中一个是“不推荐使用组件对象”错误（应该是警告），另一个是“将 chrome JS 对象暴露给没有**暴露Props_**的内容是不安全和不推荐使用的”。

无论如何，我已经截取了我一直得到的三个项目的屏幕截图：http: [//snaps.vertigofx.com/009/snap1330_2013-03-27_06.54.41.png](http://snaps.vertigofx.com/009/snap1330_2013-03-27_06.54.41.png)

有时我也会收到其他错误/警告，就像我已经提到的那些，它们与我正在处理的任何事情无关，所以我只需要尝试忽略它们。但是，无论我认为自己多么“习惯”，当我看到那个红色文字时，我会自动认为我已经破坏了某些东西，这让我很烦恼。

我最近刚刚将 Firefox 升级到 19.0.2。在此之前，错误/警告甚至更糟，但它们仍然没有消失。我在互联网上找到了一个关于“组件对象”的论坛帖子，原始发帖人说他让它消失了，但对那是什么不够具体。

无论如何，如果有人知道我能做些什么来摆脱这些，我将不胜感激。

# ms-access - VBA 转换 Office 2007 到 Office 2010

> ID：15662493
> 
> 赞同：0
> 
> 时间：2013-03-27T15:18:32.350
> 
> 标签：ms-access, vba

我在 Access 2007 数据库中有一个函数，在我的 PC 升级到 Office 2010 之前它一直运行良好。程序如下，违规行是设置了“originalFolder”的位置：

```
Function ExportToSharePoint()
Dim oFs As New FileSystemObject
Dim originalFolder As Folder
Dim destinationPath As String
Dim ofile As file
Dim XLApp As Excel.Application
Dim xlwb As Excel.Workbook
Dim strFileName As String
Dim oFolder As String
oFolder = "//chs114file1/dovpasres/Public/Script/InfoCentre/Delays"
Set oFs = CreateObject("Scripting.FileSystemObject")
Set XLApp = New Excel.Application
    Kill "K:\Public\Script\InfoCentre\Delays\*.xlk"
    Set originalFolder = oFs.GetFolder(oFolder)  
    destinationPath = "https://companyname.sharepoint.com/PRR/Documents/"

    For Each ofile In originalFolder.Files

        strFileName = oFs.GetFileName(ofile)

            Set xlwb = XLApp.Workbooks.Open(ofile)
            xlwb.SaveAs (destinationPath + strFileName)

    Next

xlwb.Close True
XLApp.Quit
Set xlwb = Nothing
Set XLApp = Nothing

End Function 
```

我得到的错误是：

> 错误 13：数据类型不匹配

我很困惑，因为这是一个字符串，按要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:44:28.990

Microsoft 文档将[`GetFolder`](http://msdn.microsoft.com/en-us/library/f1xtf7ta%28v=vs.84%29.aspx)返回类型列为[`Folder`](http://msdn.microsoft.com/en-us/library/1c87day3%28v=vs.84%29.aspx)is ，但我怀疑您的问题是由后期绑定（通过`CreateObject`）与早期绑定（通过强类型的文件夹变量）混合引起的。
要么导入引用以避免`CreateObject`调用，要么将类型更改为变体，或者可能是对象：

```
Dim originalFolder As variant 
```

# cmake - CMAKE_CURRENT_SOURCE_DIR 和 CMAKE_CURRENT_LIST_DIR 之间的区别

> ID：15662497
> 
> 赞同：137
> 
> 时间：2013-03-27T15:18:41.827
> 
> 标签：cmake

## 来自维基：

**CMAKE_CURRENT_SOURCE_DIR** 这是当前处理的CMakeLists.txt所在的目录

**CMAKE_CURRENT_LIST_DIR** （从 2.8.3 开始）这是当前正在处理的列表文件的目录。

## 从文档：

**CMAKE_CURRENT_SOURCE_DIR：**当前正在处理的源目录的路径。这是 cmake 当前正在处理的源目录的完整路径。

**CMAKE_CURRENT_LIST_DIR：**当前正在处理的列表文件的完整目录。当 CMake 处理项目中的列表文件时，此变量将始终设置为当前正在处理的列表文件 (CMAKE_CURRENT_LIST_FILE) 所在的目录。该值具有动态范围。当 CMake 开始处理源文件中的命令时，它会将此变量设置为该文件所在的目录。当 CMake 完成处理来自文件的命令时，它会恢复以前的值。因此，宏或函数内的变量值是调用调用堆栈最底部条目的文件的目录，而不是包含宏或函数定义的文件的目录。

在什么情况下这些变量会有不同的值？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-03-27T18:49:54.810

变量[`CMAKE_CURRENT_SOURCE_DIR`](https://cmake.org/cmake/help/latest/variable/CMAKE_CURRENT_SOURCE_DIR.html)和[`CMAKE_CURRENT_LIST_DIR`](https://cmake.org/cmake/help/latest/variable/CMAKE_CURRENT_LIST_DIR.html)可以引用 CMake 列表文件的不同目录，该文件由[包含](https://cmake.org/cmake/help/latest/command/include.html)命令的另一个文件包含。例如，如果 a`CMakeLists.txt`存在于目录中`project`并包含以下指令

```
include(src/CMakeLists.txt) 
```

然后 while`src/CMakeLists.txt`正在处理`CMAKE_CURRENT_LIST_DIR`将引用`project/src`while`CMAKE_CURRENT_SOURCE_DIR`仍然指向外部目录`project`。

`CMAKE_CURRENT_LIST_DIR``CMakeLists.txt`当您需要查找位于当前正在处理的文件旁边的模板文件或批处理脚本等资源文件时，它会派上用场。

* * *

[注意：当使用`add_subdirectory()`命令而不是`include()`时，行为是不同的，并且在`src/CMakeLists.txt`处理时，两个变量都会指向`project/src`。]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2021-05-17T10:59:48.657

**定义**

`CMAKE_SOURCE_DIR`：包含 CMakeList.txt 文件的最顶层文件夹（源目录）。该值在不同的范围内永远不会改变。

`PROJECT_SOURCE_DIR`：包含 CMakeList.txt 文件的最近文件夹，具有自己的范围，其中包含 project() 命令。

`CMAKE_CURRENT_SOURCE_DIR`：最近的文件夹，其中包含具有自己作用域的 CMakeList.txt 文件。（文件不需要包含 project() 命令）

`CMAKE_CURRENT_LIST_DIR`：包含当前处理的 CMakeList.txt 或 .cmake 文件的文件夹。

我的意思是它自己的范围与范围规则有关。虽然 include(file) 命令没有创建新范围，但 add_subdirectory 正在创建一个影响 PROJECT_SOURCE_DIR 和 CMAKE_CURRENT_SOURCE_DIR 值的新范围。

**例子**

让项目结构如下：

```
A/
=> CMakeList.txt
=> B/
   => CMakeList.txt 
```

让我们假设我们通过将消息命令放入子文件夹 B 中的 CMakeList.txt 文件来打印所有 cmake 变量。

*   如果文件夹 A 中的 CMakeList.txt 包含一行 include("B/CMakeList.txt")，则

`CMAKE_SOURCE_DIR`将是源目录，即“项目路径/A”。

`PROJECT_SOURCE_DIR`将是“项目/A 的路径”，因为包含命令不会创建新范围，并且最近的具有自己的范围并包含项目命令的 CMakeList.txt 文件位于文件夹 A 中。

`CMAKE_CURRENT_SOURCE_DIR`将是“项目/A 的路径”，因为 include 命令不会创建新范围，并且最近的具有自己范围的 CMakeList.txt 文件位于文件夹 A 中。

`CMAKE_CURRENT_LIST_DIR`将是“项目/A/B 的路径”，因为当前处理的文件位于子文件夹 B 中。

*   如果 CMakeList.txt 包含一行 add_subdirectory("./B")，那么

`CMAKE_SOURCE_DIR`将是源目录，即“项目路径/A”。

`PROJECT_SOURCE_DIR`将是“项目/A/B 的路径”，因为 add_subdirectory 命令创建了一个新范围，并且最近的具有自己的范围并包含项目命令的 CMakeList.txt 文件位于子文件夹 B 中。

`CMAKE_CURRENT_SOURCE_DIR`将是“项目/A/B 的路径”，因为 add_subdirectory 命令创建了一个新范围，并且最近的具有自己范围的 CMakeList.txt 文件位于子文件夹 B 中。

`CMAKE_CURRENT_LIST_DIR`将是“项目/A/B 的路径”，因为当前处理的文件位于子文件夹 B 中。

**参考**：[https ://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/Useful-Variables](https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/Useful-Variables)

# silverlight - Silverlight 选项卡控件 - 一个选项卡上的多个控件

> ID：15662502
> 
> 赞同：0
> 
> 时间：2013-03-27T15:18:49.587
> 
> 标签：silverlight, xaml, tabcontrol

我在 Silverlight 5 - VS 2012 工作，遇到了一个有趣的问题。

我有一个有 6 个选项卡的选项卡控件。每个选项卡都需要包含多个控件。但是，每个选项卡只能放置一个控件。这似乎不是一个太大的问题，但我不知道如何将多个控件添加到单个选项卡。

是否有我需要修改的属性设置？任何信息将不胜感激。

先感谢您！埃里克

这是我的 XAML： - 注意：我想使用数据网格向选项卡添加一个按钮。

```
<sdk:TabControl x:Name="tabMain" HorizontalAlignment="Left" Height="307" Margin="176,452,0,0" VerticalAlignment="Top" Width="817" TabStripPlacement="Left">
        <sdk:TabItem Header="Home">
            <Grid/>
        </sdk:TabItem>
        <sdk:TabItem x:Name="tabGatelets" Header="Gatelets" Loaded="tabGatelets_Loaded" GotFocus="tabGatelets_GotFocus">
            <sdk:DataGrid x:Name="grdGatelets" HorizontalAlignment="Left" Height="279" VerticalAlignment="Top" Width="700" Margin="12,0,0,0" AlternatingRowBackground="#FFB4CDCD" AutoGenerateColumns="False" ItemsSource="{Binding Gatelets}">
                <sdk:DataGrid.Columns>
                    <sdk:DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" />
                    <sdk:DataGridTextColumn Header="URL" Binding="{Binding Path=Url}" />
                    <sdk:DataGridTextColumn Header="Binding" Binding="{Binding Path=Binding}" />
                    <sdk:DataGridTextColumn Header="Applications" Binding="{Binding Path=Applications}" />
                </sdk:DataGrid.Columns>
            </sdk:DataGrid>
        </sdk:TabItem>
        <sdk:TabItem Header="Applications">
            <Button x:Name="btnApplications" Content="Applications" HorizontalAlignment="Left" Height="24" VerticalAlignment="Top" Width="89" Margin="357,51,0,0"/>
        </sdk:TabItem>
        <sdk:TabItem Header="Auditing">
            <Button x:Name="btnAudits" Content="Audits" HorizontalAlignment="Left" Height="24" VerticalAlignment="Top" Width="69" Margin="197,133,0,0"/>
        </sdk:TabItem>
        <sdk:TabItem Header="Tracing">
            <Button x:Name="btnTracing" Content="Tracing" HorizontalAlignment="Left" Height="26" VerticalAlignment="Top" Width="92" Margin="193,256,0,0"/>
        </sdk:TabItem>
        <sdk:TabItem Header="About">
            <TextBlock HorizontalAlignment="Left" Height="295" TextWrapping="Wrap" Text="This is where we put stuff about the application." VerticalAlignment="Top" Width="486"/>
        </sdk:TabItem>
    </sdk:TabControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:35:33.477

您需要在每个选项卡控件中添加一个网格，然后将您的内容添加到网格中。有关使用网格控件的文章，请参阅以下链接。

[http://www.silverlightshow.net/items/Using-the-Grid-control-in-Silverlight-2-Beta-1.aspx](http://www.silverlightshow.net/items/Using-the-Grid-control-in-Silverlight-2-Beta-1.aspx)

这应该可以解决您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:45:51.807

您已经得到了答案，但只是为了为您澄清一般问题：

XAML 中的元素可以有一个内容子级或多个（或没有），具体取决于它们的类型。

TabItem 只能包含一个内容子项，这就是为什么当您尝试添加多个内容时它抱怨已经设置了 Content 属性。其他只能有一个 Content 元素的项目包括 ContentControl、Button 等等。

大多数允许多个孩子的东西都是面板，专门设计用于为多个孩子执行布局。主要的是 Grid（执行行/列布局）和 StackPanel（简单地水平或垂直堆叠子项）。还有其他一些，例如 WrapPanel（它会堆叠，但如果空间不足，则会换行）可能很有用。

因此，您必须将某种 Panel 放入 TabItem 中才能拥有多个孩子。这巧妙地分离了布局逻辑： TabItem 只需要知道它可以容纳*一些东西*，如果你确实想要多个孩子，你可以根据你想要的布局来切换 Panel 类型。

# ios - iPhone 不会为上传的照片显示“通过应用程序名称”

> ID：15662503
> 
> 赞同：3
> 
> 时间：2013-03-27T15:18:52.960
> 
> 标签：ios, facebook-graph-api, facebook-opengraph

我们正在使用 Facebook iOS SDK 从我们的 iPhone 应用程序上传照片，以下是详细信息：

1.  应用在应用中心获批，包括命名空间、应用id、深度链接等...
2.  应用程序在 iTunes 中获得批准
3.  用户提供代表他们发布的权限
4.  我们使用 startWithGraphPath:@"me/photos" 发布用户相册和新闻提要

现在我们的问题：

对于 iPad 上 Facebook 应用程序上的帖子，我们获得了“通过应用程序名称”的所需行为，其中应用程序名称链接到应用程序或正确重定向到 iTunes 商店。

在 iPhone 上，我们测试了 4 和 5 版本，我们没有在帖子中获得“通过应用程序名称”。我们已经尝试了几件事，验证了 App 条目中的设置，但无法解决此问题。关于可能导致这种情况的任何想法？

# android - 有人使用 ACR1222L android 库吗？

> ID：15662504
> 
> 赞同：3
> 
> 时间：2013-03-27T15:18:59.543
> 
> 标签：android, nfc, smartcard, smartcard-reader

我正在编写一个将在平板电脑上运行的应用程序。平板电脑将连接到 ACR1222L NFC 阅读器。

我正在使用他们的 android 库与读者进行交互。我可以检测到 USB 读卡器，也可以读取读卡器的名称。但我正在努力从 NFC 标签中读取数据。事实上，我不知道从哪里开始，使用哪些类/方法。

有没有人已经使用过 ACR1222L 及其 android 库？

一些指导方针、示例代码、教程可以挽救我的生命。

**编辑：**

好吧，我现在变得更聪明了，我可以读取 UID。这是怎么做的。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
............... your code
mReader = new Reader(mManager);
    mReader.setOnStateChangeListener(new OnStateChangeListener() {

        @Override
        public void onStateChange(int slotNum, int prevState, int currState) {
        //This command is for the card UID
            byte[] command = {(byte) 0xFF,(byte) 0xCA,0x00,0x00,0x00};
         byte[] response = new byte[300];
         int responseLength;
          if (currState == Reader.CARD_PRESENT) {
 try {
                    mReader.power(slotNum,Reader.CARD_WARM_RESET);
                    mReader.setProtocol(slotNum, Reader.PROTOCOL_T0|     Reader.PROTOCOL_T1);
                    responseLength=mReader.transmit(slotNum,command,     command.length, response,response.length);

 //Here i have the card UID if i send the proper command
                    responsedata=NfcUtils.convertBinToASCII(response);

          }             

 }
} 
```

但我仍在努力从标签中读取有效负载。我还研究了 nfctools 库。但我不知道从哪里开始。如果有人引导我穿过图书馆，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-14T11:19:04.180

是的，这是可能的 - 与使用 ACR 122 完全相同，因为 API 几乎相同。

我开发了一个（商业上可用的）[库](https://github.com/skjolber/external-nfc-api)，它可能完成您正在研究的大部分内容，或者可以作为您自己实现的起点。

# node.js - 如何使用 nodejs 踏板

> ID：15662507
> 
> 赞同：0
> 
> 时间：2013-03-27T15:19:12.620
> 
> 标签：node.js

我想使用多个线程并在父线程中接收子线程的中间计算而不阻塞它。我怎样才能实现这个？

# entity-framework - 使用通用存储库的结构映射注册类型的问题

> ID：15662511
> 
> 赞同：0
> 
> 时间：2013-03-27T15:19:30.553
> 
> 标签：entity-framework, entity-framework-5, repository-pattern, structuremap

我的来源在[https://github.com/tonyeung/generic-repo](https://github.com/tonyeung/generic-repo)

我想创建一个可以在不同项目中引用的通用存储库。我见过的大多数通用存储库实现都使这变得困难。我偶然发现了[http://blog.damianbrady.com.au/2012/07/24/a-generic-repository-and-unit-of-work-implementation-for-entity-framework/](http://blog.damianbrady.com.au/2012/07/24/a-generic-repository-and-unit-of-work-implementation-for-entity-framework/)并发现它会很好用对于我的想法。我的每个项目都可以在其中定义一个上下文，然后我只需要引用一个通用存储库项目或 dll 并传入上下文，我就可以开始了。

我唯一想弄清楚的是如何连接结构图，因为有一些嵌套的依赖项需要解决。不幸的是，该博客并没有真正解决如何使用通用存储库实现依赖注入。我试图修改实现（参见上面引用的 git hub repo），但是在配置结构映射时我做错了。

依赖关系是这样工作的：存储库在构造函数中获取一个上下文，而上下文又获取一个连接字符串。构造函数参数都是符合 IType 映射到 Type 的默认约定的接口。我的假设是，因为我有自动注册，所以我需要做的就是明确定义上下文的注册，告诉结构映射它应该从 app.config 获取连接字符串，我应该很高兴。

但是，structuremap 无法像我想象的那样计算出注册：

```
StructureMap Exception Code:  202
No Default Instance defined for PluginFamily Generic_Repository_Test.IGenericRepository`1
    [[ViewModel.Customer, ViewModel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], 
    Generic Repository Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" 
```

注册码

```
 //This is commented out since it should not be necessary.
        //I tried to put this in for grins
        //and see if it would resolve the issue but it doesn't.
        //For<IGenericRepository<Customer>>().Use<GenericRepository<CustomerContext, Customer>>();

        For<ICustomerContext>()
                .Use<CustomerContext>()
                .Ctor<string>("connectionString")
                .EqualToAppSetting("ConnectionString");

        //I've tried moving scan to the top but it didn't make a difference
        Scan(x =>
        {
            x.AssembliesFromApplicationBaseDirectory();
            x.WithDefaultConventions();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:00:30.323

这个问题实际上是一个配置问题。问题是 app.settings 连接字符串设置返回 null，我不确定为什么会发生这种情况，但我硬编码连接字符串只是为了笑。稍后会解决这个问题。

解决了这个问题后，我仍然不得不手动配置 repo 和上下文，因为弹出了另一个错误。

解决了这个问题后，结构映射似乎试图自行解决，所以我不得不添加一个命名空间排除项。

完成的代码如下所示：

```
public class DependencyRegistry : Registry
{
    public DependencyRegistry()
    {
        For<ICustomerContext>()
                .Use<CustomerContext>()
                .Ctor<string>("connectionString")
            //.EqualToAppSetting("ConnectionString");
                .Is(@"Data Source=(localdb)\Projects;Initial Catalog=EventStorage;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False");
        For<IGenericRepository<Customer>>().Use<GenericRepository<ICustomerContext, Customer>>();

        Scan(x =>
        {
            x.AssembliesFromApplicationBaseDirectory();
            x.ExcludeNamespace("StructureMap");
            x.WithDefaultConventions();
        });
    }
} 
```

# macos - Cocoa - 创建更多定制的应用程序

> ID：15662512
> 
> 赞同：-3
> 
> 时间：2013-03-27T15:19:32.067
> 
> 标签：macos, cocoa, user-interface

到目前为止，在我使用 Objective c 和 cocoa 的过程中，我已经制作了一些简单`OSX`的应用程序，这些应用程序利用了一些基本的苹果 UI 元素，例如`NSButton`、`NSTextFeild`、`NSView`等。但是，现在我发现我想在我的不完全适合给定 UI 元素的程序。IE。在我现在正在编写的程序中，我想创建一个清单，用户可以在其中输入新元素，检查元素以删除它们等等，所有这些都使用自定义 UI。我现在的问题是我什至不知道从哪里开始寻找我需要的信息来学习如何创建更高级的东西，或者搜索什么来开始查找信息。谁能让我走上正确的轨道，让我知道我应该寻找什么信息以及我可以去哪里找到它？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T15:27:10.430

你可能想看看 Cocos2d 甚至 OpenGL。我猜这可能对您的解决方案来说有点过头了。您还可以覆盖或扩展一些基本 UI 元素。

如果您不熟悉 Objective-C 和 Mac OS 编程，我建议您稍微慢一点。通常，我们开发人员会构想出巨大的复杂界面，而实际上，一个基本的、普通的界面对我们的用户来说就可以很好地工作。

对于您的第一个版本，请保持简单，并在短时间内发布一些代码。然后与您的用户合作，看看他们真正想如何使用您的应用程序并从那里开始。

祝你好运！

D b

# python - 从字符串中的集合中获取任何字符的第一次出现 - python

> ID：15662516
> 
> 赞同：1
> 
> 时间：2013-03-27T15:19:57.443
> 
> 标签：python, python-2.7

有没有更好的方法来找到其中一个字符的第一次出现：'x'，'y'，'z' 在 someStr 中？

```
def findFirstAppearance(someStr):
    x = someStr.find('x');
    y = someStr.find('y');
    z = someStr.find('z');

    if x == -1: x= len(someStr);
    if y == -1: y= len(someStr);
    if z == -1: z= len(someStr); 

    return min(x,y,z); 
```

例如：对于 someStr = "axby" 它应该返回 1。对于 someStr = "aybx" 它也应该返回 1。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:28:48.723

也许：

```
>>> s = 'this string x contains y several letters z'
>>> next(i for i,c in enumerate(s) if c in 'xyz')
12
>>> s[12]
'x' 
```

如果找不到，这将引发异常，这可以通过使用默认值来修复：

```
>>> next(i for i,c in enumerate(s) if c in 'Q')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> next((i for i,c in enumerate(s) if c in 'Q'), -1)
-1 
```

您还可以预先构建一个集合来测试成员资格：

```
>>> special = set("vmp")
>>> next((i for i,c in enumerate(s) if c in special), -1)
27 
```

如果有很多字母要测试，这可能会更快；这在很大程度上取决于所涉及的尺寸。如果它很重要，很容易进行实验，但（剧透警告）它可能不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:01:02.647

这是使用正则表达式的替代方法。

```
import re
def find_first_dx(needles, haystack):
    match = re.search('|'.join(map(re.escape, needles)), haystack)
    return match.start() if match else -1 
```

例子：

```
>>> find_first_dx('xyz', 'abcyax')
3
>>> find_first_dx('xyz.', 'a.bcyax')
1
>>> find_first_dx('xyz', 'fee fi foe fum')
-1
>>> find_first_dx(['foe', 'fum'], 'fee fi foe fum')
7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:27:30.620

我想这就是你要找的。这会在字符串中找到第一次出现的可能字符 ( `items`)。它的工作原理就像`str.find`.

```
def findany(string, items, start, end=-1):
    if end == -1:
        end = len(string)

    for i in range(start, end):
        c = string[i]
        if c in items:
            return i

    return -1

#      01234567
inp = "hellozxy"

print findany(inp, "xyz")    # 5 = z
print findany(inp, "?")      # -1 = not found
print findany(inp, ["o", "l"], 3)    # 3, skips the first 'l' 
```

注意：您将字符列表（1 个字符的字符串）作为`items`. 在python中，字符串就是这样。如果你传递类似 ["x", "y", "blah"] 的东西，它不会起作用（它会忽略 "blah"）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:29:32.033

使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)，它为字符串的每个字符生成一个元组。

元组的第一个元素是索引，第二个元素是字符本身。

```
In [103]: def find_first(strs):
   .....:     for i,x in enumerate(strs):
   .....:         if x in 'xyz': #if current character is either
                                 #'x' or 'y' or 'z' then return index
   .....:             return i
   .....:     return -1              #if the loop completed successfully then return -1
   .....: 

In [104]: find_first("fooxbaryzx")
Out[104]: 3

In [105]: find_first("qwerty")
Out[105]: 5

In [106]: find_first("qwert")
Out[106]: -1

In [107]: find_first("axby")
Out[107]: 1

In [108]: find_first("aybx")
Out[108]: 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T15:36:37.060

这应该有效：

```
def findany(s1, s2):
    for i, x in enumerate(s1):
        if x in s2:
            return i
    return -1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T15:52:55.780

对于很多字符，您应该认真考虑使用正则表达式，特别是如果您在应用程序的循环中执行此操作：

```
import re
def findall(string, chars)
    m = re.search("[%s]" % chars, string, re.DOTALL)
    if m:
        return m.start()
    return -1 
```

这应该比调用每个字符的“查找”的纯 python 循环至少快 100 倍。

请注意，如果您需要在正则表达式 "[ ]" 中找到用于其他目的的字符，则应将它们转义（如 "-"、"^"）

# batch-file - 从变量中获取字符串的最后一个字符

> ID：15662520
> 
> 赞同：23
> 
> 时间：2013-03-27T15:20:06.630
> 
> 标签：batch-file, substring

我在用大多数语言很容易完成的问题上遇到问题，但我似乎无法批量解决。我想提取字符串的最后一个字符。在伪代码中..

```
if var1.substring(var1.length, -1) = "0"
  do something 
```

在英语中...如果字符串中的最后一个字符是 0 那么...

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-27T15:23:39.590

```
set var=%var:~-1% 
```

`SET /?`从 docco 的提示中看到。

* * *

```
@ECHO OFF
SETLOCAL
SET var=abcd
SET var2=%var:~-1%
CALL :show "-1"
SET var2=%var:~-2%
CALL :show "-2"
SET var2=%var:~-3%
CALL :show "-3"
SET var2=%var:~1%
CALL :show "1"
SET var2=%var:~2%
CALL :show "2"
SET var2=%var:~3%
CALL :show "3"
SET var2=%var:~0,1%
CALL :show "0,1"
SET var2=%var:~0,2%
CALL :show "0,2"
SET var2=%var:~0,3%
CALL :show "0,3"
SET var2=%var:~0,-1%
CALL :show "0,-1"
SET var2=%var:~0,-2%
CALL :show "0,-2"
SET var2=%var:~0,-3%
CALL :show "0,-3"
SET var2=%var:~1,-1%
CALL :show "1,-1"
SET var2=%var:~1,-2%
CALL :show "1,-2"
SET var2=%var:~1,-3%
CALL :show "1,-3"
GOTO :eof

:show
echo Test with "var:~%~1" : var=%var% var2=%var2%
GOTO :eof 
```

结果：

```
Test with "var:~-1" : var=abcd var2=d
Test with "var:~-2" : var=abcd var2=cd
Test with "var:~-3" : var=abcd var2=bcd
Test with "var:~1" : var=abcd var2=bcd
Test with "var:~2" : var=abcd var2=cd
Test with "var:~3" : var=abcd var2=d
Test with "var:~0,1" : var=abcd var2=a
Test with "var:~0,2" : var=abcd var2=ab
Test with "var:~0,3" : var=abcd var2=abc
Test with "var:~0,-1" : var=abcd var2=abc
Test with "var:~0,-2" : var=abcd var2=ab
Test with "var:~0,-3" : var=abcd var2=a
Test with "var:~1,-1" : var=abcd var2=bc
Test with "var:~1,-2" : var=abcd var2=b
Test with "var:~1,-3" : var=abcd var2= 
```

对于您的`IF`陈述，请尝试

```
IF "%var:~-1%"=="0" (dosomething) else (dosomethingelse) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T15:23:47.833

Batch 不使用 C 风格的逻辑，因此您确实必须对其中的大部分内容进行不同的思考。

也就是说， String -right 似乎是你想要的：http: [//www.dostips.com/DtTipsStringManipulation.php#Snippets.RightString](http://www.dostips.com/DtTipsStringManipulation.php#Snippets.RightString)

```
%str:~-1% 
```

这会让你得到最后一个角色。

# facebook - 如何在没有任何验证码的情况下保护 Facebook 等网站免受机器人攻击

> ID：15662522
> 
> 赞同：9
> 
> 时间：2013-03-27T15:20:10.837
> 
> 标签：facebook, captcha

Facebook 和 Twitter 等网站在注册期间如何防止机器人入侵？我的意思是，注册表单上根本没有验证码？

我想为一个项目创建一个注册表单，我不希望在注册过程中出现机器人，而且验证码通常很难看..

**编辑：** 我的问题实际上是在注册期间，因为我知道 Facebook 在第一次注册后使用验证码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T21:46:18.757

Facebook 使用某种隐藏的垃圾邮件保护，如果您查看注册表单的来源，您会看到如下内容：

```
class="hidden_elem"><div class="fsl fwb">Security Check</div>This is a standard security test that we use to prevent spammers from creating fake accounts and spamming users. 
```

因此，当 javascript 认为您是机器人时，捕获变得可见。

几乎没有什么方法可以让机器人在不捕获的情况下更难完成注册，比如填写表格的时间、鼠标点击事件的发起者等。表单中还有基于随机会话的值（以防止直接提交而无需先下载表单）

也有些人使用隐藏的表单元素，例如“电子邮件”，在 css 中的样式是不可见的，但常见的简单机器人会尝试填写所有表单字段，因此如果这个隐藏元素有任何值，你可以阻止它们

twitter 和 fb 花了很多时间开发阻止垃圾邮件发送者的技术，我认为他们不会将其公开，因为这对他们打击垃圾邮件发送者会适得其反。

但是你可以从 fb 或 twitter 下载所有客户端的 JavaScript，如果你愿意的话可以研究它们，因为大多数保护将发生在客户端而不是服务器上。

服务器只能发出一些随机会话变量，检查请求中的有效标头，总时间等。它真的很有限。

在用户填写表单时，一些网站还在服务器和客户端之间使用 ajax 交换，主要是为了让机器人开发人员更难进行模拟的虚假数据交换。

无论如何，不​​幸的是，哪里没有简单的解决方案来做体面的保护，特别是没有验证码或某种问题

此外，对于提交按钮，您可以使用图像映射而不是按钮，您可以使用 PHP 中的 GDI 之类的东西在随机位置动态创建带有提交按钮图像的大图像，并使用 css 仅显示该图像的一部分与实际按钮，并在服务器端检查鼠标点击位置的 X 和 Y 位置，这对于机器人来说很难破解。除非他们使用真正的浏览器并且只是模拟键盘和鼠标。无论如何，正如我不幸所说的那样，哪里没有简单的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:28:50.877

一种方法是将验证发送到用户的电子邮件地址或手机并获得验证（因此在这种情况下，您必须每个帐户只允许一个电子邮件地址或手机）

另一种选择是使用“ [Negative CAPTCHA](http://damienkatz.net/2007/01/negative_captch.html) ”或“ [Honeypot Captcha](http://haacked.com/archive/2007/09/11/honeypot-captcha.aspx) ”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:28:27.643

我不知道 Facebook 和 Twitter 是如何做到的，但如果你想创建一些简单且不影响网站美观的东西，我知道有些网站只是要求用户输入一个简单数学问题的答案，例如“什么是 2 + 3？”。这不是最安全的方法，但这只是一个想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T15:39:08.387

好吧，您也可以随时部署硬件解决方案来创建第 4-7 层防火墙规则。您可以创建特定规则来查找爬网机器人的知名代理。但是，要停止新创建的机器人，您需要知道他们为机器人使用的代理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T23:37:56.563

由于您不需要 CAPTCHA，您可以使用 Keypic - [keypic.com](http://keypic.com) - 这是一种隐形保护，不需要 CAPTCHA。对于任何 Web 表单，它都是一种有效的反垃圾邮件方法。网站用户没有通过任何对网站有利的测试，因为它提高了用户体验的质量，从而提高了用户参与度。解决方案是一种专家系统，它分析用户的行为并检查数据库，然后得出请求是来自合法用户还是机器人的结论。顺便说一句，Twitter 和 Facebook 仍然使用 CAPTCHA 进行密码验证，这在这种保护的效率方面是一个非常有争议的方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-19T18:32:48.310

我在注册我的任天堂网站时遇到了大量机器人的问题，所以我在注册页面上放了一张马里奥的图片（确保图像数据中没有任何内容显示“马里奥”），并附有文字“这是谁？回答总而言之。” 从那以后就没有一个机器人注册。不确定这是否真的是一个好的解决方案，不确定机器人有多聪明。我有点惊讶它奏效了。

理论上它可能会阻止一些合法用户，但很难想象任天堂网站的许多合法用户不知道马里奥是谁......

# javascript - 为什么这个 if 语句不起作用？

> ID：15662525
> 
> 赞同：0
> 
> 时间：2013-03-27T15:20:19.133
> 
> 标签：javascript, jquery, html, audio

我有一些 div，当单击链接时，我使用 jQuery 的淡入/淡出将其带到页面上。每个页面都有一个相关的 html5 音频元素，该元素也会相应地淡入/淡出。

```
$('.link').on('click', function(e){
    var targetpage = $($(this).attr("href"));
    $('.pagecontainer>div').fadeOut(0); //fade out currently displayed page
    targetpage.fadeIn(); //fade in page associated with link
    if (targetpage.children().hasClass('backgroundmusic')) {
        $('audio').animate({volume: 0}, 1000); //fade out currently playing audio
        alert('audio faded out');
        $.each($('audio'), function () { //stop all audio
            this.currentTime=0;
            this.pause();
            alert('audio stopped');
        });
        alert('stop function executed');
    }
});

$('.sound').on('play', function () { //since volume was faded out, reset volume when click play button
    $('audio').animate({volume: 1}, 100);
}); 
```

HTML：

```
<a href="#page1" class="link">Audio 1</a>
<a href="#page2" class="link">Audio 2</a>
<a href="#page3" class="link">Audio 3</a>

<div class="pagecontainer">

<div id="page1"> //all three audio elements are in exact same spot
                 //clicking page link fades in current audio and fades in new one
    <div class="backgroundmusic">
    <audio controls loop class="sound" preload="none">
        <source src="../../site/music/music1.mp3"/>
        <source src="../../site/music/music1.ogg"/>
    </audio>
    </div>
</div>

<div id="page2">
    <div class="backgroundmusic">
    <audio controls loop class="sound" preload="none">
        <source src="../../site/music/music2.mp3"/>
        <source src="../../site/music/music2.ogg"/>
    </audio>
    </div>
</div>

<div id="page3">
    <div class="backgroundmusic">
    <audio controls loop class="sound" preload="none">
        <source src="../../site/music/music3.mp3"/>
        <source src="../../site/music/music3.ogg"/>
    </audio>
    </div>
</div>

</div> 
```

“alert('audio faded out')” 将执行，但“alert('audio stopped')”**不会执行**，因为它根本没有运行“$.each($('audio'), function” 脚本，“alert('stop function executed')”也没有。我必须使用这个“each”脚本，因为 $('audio').currentTime=0 不起作用，$('audio').pause() 也不起作用，因为我的页面上有多个音频实例。

有谁知道为什么这不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:27:51.973

你传入`e`你的函数但不使用它。可能想要阻止该点击事件的默认操作。

```
e.preventDefault(); //Put this at the top of the callback 
```

这应该可以解决您的 .each() 问题。此外，您应该使用控制台而不是警报，以免冻结您的页面。

```
console.log('audio faded out'); //Use console instead of alerts
$('audio').each(function () { //Do it this way.
    this.currentTime=0;
    this.pause();
    console.log('audio stopped');
});
console.log('stop function executed'); 
```

# c - 将程序返回到预触发状态

> ID：15662533
> 
> 赞同：0
> 
> 时间：2013-03-27T15:20:33.400
> 
> 标签：c, function, operators

首先这会被触发：

```
if ((temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit) | (temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit))
     activateAlarm(channelID); 
```

触发激活警报，然后从那里：

```
void activateAlarm(int channelID);   
{  while (temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit || temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit)
   {    
    logSubsystem(temperatureChannel[channelID].currentTemperature); 
   }    
} 
```

然后在以下情况下触发警报屏幕：

```
int logSubsystem(int currentTemperature)

case 'F': //if user input is 'F'
case 'f': //if user input is 'f'        

            currentTemperature--;
            printf("your current exceeded temp is %i\n \n", currentTemperature);    
            if (currentTemperature <= 100 || currentTemperature >= 50);
                  compareLimit();
                break; //exits loop 
```

如何设置此功能，以便如果用户使用 F 递减并使当前温度低于限制（<100 或 >50），那么它将返回到 compareLimit 功能和对上限的要求/下限触发状态将为 FALSE，将程序返回到其原始预警状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:57:09.060

我认为你会从对程序如何流动的大量思考中受益匪浅。现在，我可以推断出您的程序流程是：

*   您有一个外部循环来检查至少一个通道 ID 上的温度。在那个循环中，你有`if`你第一次向我们展示的语句。
*   然后激活警报会做一些其他事情，但*会循环直到温度下降，调用`logSubsystem`.*
*   logSubsystem 然后大概会获取某种用户输入，然后从那里，您希望它调用您的初始函数，大概称为准备限制。

问题是这些功能都没有完成。他们都互相调用，你最终会得到一个堆栈溢出。很好，因为这是该网站的名称，但不是您想要的。

你基本上需要的是一个状态机。你需要一些东西来跟踪值，查看这些值，并调用**返回**对这些值进行操作的函数。应该只有一个循环，它应该根据这些值来控制所发生的一切。好消息是，您已经准备好所有这些了。`temperatureChannel`正在为您跟踪值，并且您有很多 while 循环。

让我给你我建议你的程序应该如何流动的建议：

```
bool checkTemperatureValuesOutOfRange(int channelID) {
    // this is just a convenience, to make the state machine flow easier.
    return (temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit) || // note the || not just one |
           (temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit);
} 

void actOnUserInput() {
    char input = // ... something that gets a user input.  It should check if any is available, otherwise return.
    switch (input) {
        case 'F':
        case 'f':
             temperatureChannel[channelID].currentTemperature--;
             break; // This doesn't exit the loop - it gets you out of the switch statement
}

void activateAlarm(int channelID) {
    // presumably this does something other than call logSubsystem?
    // if that's all it does, just call it directly
    // note - no loop here
    logSubsystem(channelID); 
}

void logSubsystem(int channelID) { // Not the current temperature - that's a local value, and you want to set the observed value
    // I really think actOnUserInput should be (an early) part of the while loop below.
    // It's just another input for the state machine, but I'll leave it here per your design
    // Presumably actually logs things, too, otherwise it's an unnecessary function
    actOnUserInput();
}

while (TRUE) { // this is the main loop of your function, and shouldn't exit unless the program does
    // do anything else you need to - check other stuff
    // maybe have a for loop going through different channelIDs?
    if (checkTemperatureValuesOutOfRange(channelID)) {
         activateAlarm(channelId);
    // do anything else you need to
} 
```

我相信您可以看到您的代码和我的代码之间存在很多差异。以下是一些需要考虑的关键事项：

*   现在所有函数都返回了。主while循环调用检查状态的函数，并调用改变状态的函数。
*   我强烈建议将用户输入作为主 while 循环的一部分。这只是状态机的另一个输入。获取它，采取行动，然后检查您的状态。您可能需要从用户那里获得一些输入，否则您一开始就永远不会陷入糟糕的状态。
*   现在，每次都会发生激活警报。使用您显示的代码，这很好 - 因为 logSubsystem 是所有被调用的。如果您只希望警报响一次，请在 temperatureChannel[channelId] 中保留一个布尔跟踪器，表示警报是否响起，在 activateAlarm 中将其设置为 true，然后根据 checkTemperatureValuesOutOfRange 的返回值将其重置为 false。
*   与其将自己留在 activateAlarm/logSubsystem 区域，不如每次返回，并检查您的值以查看您是否还在那里。这是关键点 - 你的功能应该是快速的，而不是垄断你的处理器。让每个函数只做一种事情，并让所有控制都来自主循环。

我对您的代码进行了很多更改，我不知道您是否可以进行所有更改，但是您需要类似的东西。它更加强大，并为您提供全方位成长的空间。

# r - 在 R 中使用修剪后的方法进行聚合

> ID：15662536
> 
> 赞同：2
> 
> 时间：2013-03-27T15:20:40.760
> 
> 标签：r, aggregate, mean

我正在尝试在 R 中聚合这样的数据：

```
df = data.frame(c("a","a","a","a","a","b","b","b","b","b","c","c","c"))
colnames(df) = "f"
set.seed(10)
df$e = rnorm(13,20,5)

    f   e
1   a   20.09373
2   a   19.07874
3   a   13.14335
4   a   17.00416
5   a   21.47273
6   b   21.94897
7   b   13.95962
8   b   18.18162
9   b   11.86664
10  b   18.71761
11  c   25.50890
12  c   23.77891
13  c   18.80883 
```

我想按列*f*聚合，并为每个唯一的*f*类型（即产生 3 行数据）有一个**修剪**后的*e平均值。*

 *我试过：

```
df2=data.frame(0) 
df2=aggregate(df$e, by = "f",mean(df$e, trim=0.1)) 
```

收到以下错误：

```
Error in match.fun(FUN) : 
  'mean(df$e, trim = 0.1)' is not a function, character or symbol 
```

在网上搜索了几遍，结果都是空的。我的实际数据由大约 30 个*e* per *f*值组成，所以我不担心它`trim=0.1`实际上不会修剪示例中的平均值（因为没有点位于上和下 5 个百分位之外）它会与真实数据一起使用，这个只是为了让聚合函数按预期工作。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:23:30.120

试试这个

```
df2=aggregate(e~f,data=df,mean,trim=0.1)
  f        e
1 a 18.15854
2 b 16.93489
3 c 22.69888 
```

在这种情况下用于计算的函数可以仅通过其名称给出，例如 ，`mean`并且该函数所需的附加参数设置在逗号之后。*

# r - R：彭博会议未开始，Rbbg

> ID：15662538
> 
> 赞同：1
> 
> 时间：2013-03-27T15:20:44.660
> 
> 标签：r

我一直在运行 Rbbg 一段时间没有问题。我试图在另一台机器上重现完全相同的设置（完全相同的设置），但 Rbbg 不起作用。

这是我得到的回溯消息。

> 追溯（）

7：停止（列表（消息=“java.lang.IllegalStateException：会话未开始”，

```
 call = .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod",

       cl, .jcast(if (inherits(o, "jobjRef") || inherits(o,

           "jarrayRef")) o else cl, "java/lang/Object"), .jnew("java/lang/St 
```

戒指”，

```
 method), j_p, j_pc, use.true.class = TRUE, evalString = simplify,

       evalArray = FALSE), jobj = <S4 object of class "jobjRef">)) 
```

6：.Call（RJavaCheckExceptions，静默）

5：.jcheck（沉默=假）

4: .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,

```
 .jcast(if (inherits(o, "jobjRef") || inherits(o, "jarrayRef")) o else cl,

       "java/lang/Object"), .jnew("java/lang/String", method),

   j_p, j_pc, use.true.class = TRUE, evalString = simplify,

   evalArray = FALSE) 
```

3: .jrcall(x, 名字, ...)

2：conn$blp（证券，领域）

你能帮忙吗？

# javascript - jQuery 对象`toString()` 方法

> ID：15662542
> 
> 赞同：9
> 
> 时间：2013-03-27T15:20:53.613
> 
> 标签：javascript, jquery

我扩展了 jQuery 对象以返回它的内部 HTML ...

```
$.fn.toString = function() {
  return this.html();
};

console.log("The inner HTML is: " + $("<div>Here, <i>there</i>, everywhere</div>")); 
```

有什么理由为什么这不是默认行为？这会破坏什么吗？

* * *

## 更新以回应答案/评论

首先，除了依赖将 jQuery 对象强制转换为字符串以及匹配该字符串中的文本的类型检查外，我看不出它会如何破坏。我错了吗？

这将返回`outerHTML`集合中所有元素的连接。这对其他人有意义吗？对我来说，这很有意义。

```
var li, list;

$.fn.toString = function() {
  var out;
  out = [];
  $.each(this, function(k, v) {
    return out.push($(v)[0].outerHTML);
  });
  return out.join("\n");
};

list = $("<ul>\n  <li>some <a href='/'>link</a> items</li>\n  <li>some <a href='/'>link</a> items</li>\n  <li>some <a href='/'>link</a> items</li>\n  <li>some <a href='/'>link</a> items</li>\n  <li>some <a href='/'>link</a> items</li>\n</ul>");

li = $("li", list);

console.log("The html of it..: " + li); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T15:36:25.997

**[`Object.toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString) *返回一个表示对象的字符串*（来自文档）。**

在谈论 jQuery 对象时，预期的返回值`Object.toString`是`"[object Object]"`.

让它返回 HTML 只是糟糕的设计，并且可能会破坏东西。

另外，根据我们想要从 jQuery 对象中检索的内容，使用不同的显式方法是有意义的：[`.html()`](http://api.jquery.com/html/)对于 HTML，[`.text()`](http://api.jquery.com/text/)对于剥离标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T15:25:26.720

嗯，jQuery 对象不仅仅是`.html`. 如果 jQuery 必须实现`toString`，它应该足够通用，可以基于 jQuery 对象中的选择器返回。

例如，如果选择器选择了多个元素，则您拥有的版本将简单地返回第一个元素的 html 内容。

所以我想说的是，这`toString`并不像你想象的那么简单，我也想不出有什么好的用途`toString`。

# c# - 检查每个页面中的会话？

> ID：15662543
> 
> 赞同：6
> 
> 时间：2013-03-27T15:20:55.597
> 
> 标签：c#, .net

我对 .NET 很陌生 - 我正在制作一个网站，其中包含一个只有登录用户才能看到的管理部分。我已经创建了登录代码，一旦用户通过身份验证，我就会为他们分配一个会话变量。我的问题是：有没有更有效的方法来检查会话变量，而不是在每个页面上都有以下功能？

```
protected void Page_Load(object sender, EventArgs e)
{
      checkSession();

 }
public void checkSession()
{
    if (Session["LoggedIn"] != "true")
    {
        Response.Redirect("default.aspx");
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:25:37.093

如果您使用的是 a `MasterPage`，则可以将检查代码放入`MasterPage's Page_Load`事件中，如果不使用 the`Global.asax`或自定义`HttpModule`，则将检查代码放入第`AcquireRequestState`一个事件`PostRequestHandlerExecute`处理程序和第二个事件处理程序中

**以 Global.asax 为例**

```
public class Global : System.Web.HttpApplication
{ ...
    void Application_AcquireRequestState(object sender, EventArgs e)
    {            
        HttpContext context = HttpContext.Current;
        // CheckSession() inlined
        if (context.Session["LoggedIn"] != "true")
        {
          context.Response.Redirect("default.aspx");
        }
    }
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:24:22.243

您可能应该考虑使用表单身份验证：
[http ://www.asp.net/web-forms/videos/authentication/using-basic-forms-authentication-in-aspnet](http://www.asp.net/web-forms/videos/authentication/using-basic-forms-authentication-in-aspnet)

您可以将页面或文件夹配置为始终需要授权，因此运行时将处理该要求，而不必手动检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T15:23:26.073

从派生自 Page 的自定义类派生您的页面

通过添加会话检查代码来覆盖 Load 方法

现在你所有的页面都有验证

```
public class MyPage : System.Web.UI.Page
 protected void Page_Load(object sender, EventArgs e)
 {
   if (Session["yoursession"] != "true")
   {
     //code
   }
 }

public class yourCustomPage1 : MyPage
{   
 protected void Page_Load(object sender, EventArgs e)
 {
   //you don't have to check or call any method..
 }
}

public class yourCustomPage2 : MyPage
{   
 protected void Page_Load(object sender, EventArgs e)
 {
   //you don't have to check or call any method..
 }
} 
```

ETC...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T15:24:07.367

您可以使您的页面成为一个继承自检查登录用户的基类的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T15:25:07.033

开始了解 ASP.Net 中的表单身份验证的一个好方法是创建一个全新的网站。进入 Visual Studio 并创建新项目，选择 Web，然后选择 ASP.NET Web 应用程序。在 Account 文件夹中查看它以了解流程和 ASP.Net 方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-27T15:25:29.940

您可以创建 BasePage 并从此基本页面继承您的所有页面，在您的基本页面中设置功能。

```
public class BasePage : Page
{
   protected void checkSession()
   {
    if (Session["LoggedIn"] != "true")
    {
        Response.Redirect("default.aspx");
    }
   }
} 
```

您的页面

```
public partial class YourPage : BasePage
{
....
} 
```

另一个解决方案：

在您的 Http 模块中，创建 Principal(Roles) 和 Identity 以设置身份验证和授权功能，在您的 http 模块中将这些信息附加到当前线程。

链接：http: [//msdn.microsoft.com/en-us/library/system.security.principal.iidentity.isauthenticated.aspx](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.isauthenticated.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-21T11:00:07.757

```
 public class BasePage : Page
            {
             protected void checkSession()
               {
                  if (Session["LoggedIn"] == null)
                   {
                           Response.Redirect("~/default.aspx/");
                    }
               }
            } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-24T10:58:34.240

第一种方式：Global.asax.cs 添加

```
 void Application_AcquireRequestState(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        Page page = context.Handler as Page;

        if ((string)context.Session["LoggedIn"] != "true"
            && !(page.AppRelativeVirtualPath == "~/Default.aspx"))
            context.Response.Redirect("default.aspx");
    } 
```

第二种方式：您可以在母版页中进行相同的会话管理。页面加载事件。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-04T11:59:09.920

您可以在 GLOBAL.asax.cs 中添加此代码，这将检查会话是否为空，并且如果此请求是从登录页面初始化的，它也不会重定向，否则它将陷入循环。

```
 void Application_AcquireRequestState(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        // CheckSession() inlined
        if (Context.Request.Url.LocalPath != "/UIComponents/User/Login.aspx")
        {
            if (context.Session["Name"] == null)
            {
                FormsAuthentication.RedirectToLoginPage();
            }
        }
    } 
```

# ssl - 从普遍信任的证书创建我自己的中间认证机构

> ID：15662545
> 
> 赞同：1
> 
> 时间：2013-03-27T15:21:01.233
> 
> 标签：ssl, certificate, signing, pki, certificate-authority

我有一个简单的问题（也许很愚蠢），但我没有找到任何明确的答案。如果我从受信任的签名公司（如威瑞信......）为我的一台服务器（例如网络）获得证书，我将拥有一个私有公钥。有了这个证书，我可以设置我自己的中间 CA 并签署证书请求并受到每个人的信任（我知道这不应该......）？我真正的问题是：什么会阻止我颁发证书以及公司如何保证没有人这样做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:39:30.060

为您的网站颁发的证书适用于 SSL/TLS，不适合颁发其他证书（Key Usage 字段不同）。因此，虽然您在技术上可以使用您的 CA 生成另一个证书，但正确实施和配置的验证器（检查密钥使用的验证器）不会信任此类生成的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:30:17.413

您没有为证书发布支付威瑞信或其他证书组织，而是为证书验证支付费用，这意味着他们有 Web 服务来响应您的证书是否有效、是否仍然有效且未过期以及您的联系信息是否符合要求.

不幸的是，如果您确实需要在您的网站上使用 ssl，那么您必须忍受它并付钱给他们。

我为我的局域网服务器使用了自制证书，当我访问这个 https 站点时，一个大的红色警告通知我这个站点是恶意的并且它没有有效的证书。这并不困扰我，但我相信如果我的所有客户看到他们的浏览器弹出如此大胆的警告，他们都会释放出来。

你能做什么？这是一个公司的世界

# objective-c - ObjectiveC - 从控制台字符串中读取多行 (Breaks\newLine)

> ID：15662549
> 
> 赞同：1
> 
> 时间：2013-03-27T15:21:05.960
> 
> 标签：objective-c, string, console-application, newline, scanf

在objectiveC中有没有办法从控制台中的用户输入中读取多行字符串？我正在 Xcode 中制作一个简单的控制台应用程序，我希望人们能够粘贴可能只有几行的 SQL 查询。

目前我正在使用：

```
char strIn[512];
NSMutableString* str;
scanf("%[^\n]", strIn);
str = [NSString stringWithUTF8String:strIn];
NSLog(@"\n%@",str); 
```

但这只会得到第一行。请记住 - 这不是从文件中读取，而是从控制台读取。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:35:01.450

以下代码应该可以帮助您入门。它从标准输入读取并收集变量中的输入行`inputString`，直到找到分号。

```
NSFileHandle *inputFile = [NSFileHandle fileHandleWithStandardInput];
NSMutableString *inputString = [NSMutableString string];

do {
    // Read from stdin, check for EOF:
    NSData *data = [inputFile availableData];
    if ([data length] == 0) {
        NSLog(@"EOF");
        break;
    }
    // Convert to NSString, replace newlines by spaces, append to current input:
    NSMutableString *tmp = [[NSMutableString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    [tmp replaceOccurrencesOfString:@"\n" withString:@" " options:0 range:NSMakeRange(0, [tmp length])];
    [inputString appendString:tmp];
    // Check for semi-colon:
} while ([inputString rangeOfString:@";"].location == NSNotFound);

NSLog(@"input=%@", inputString); 
```

（请注意，此示例代码仅检查输入中某处的分号。它不检查分号是否例如嵌入在字符串中。）

# html - CSS div inline-block + img 最大宽度

> ID：15662561
> 
> 赞同：1
> 
> 时间：2013-03-27T15:21:41.053
> 
> 标签：html, css, css-position

我一直在寻找答案已经有一段时间了，并且正在修补它一段时间，但似乎找不到解决方案。可能这很容易，但我无法绕过它。

我在容器中得到了内联样式为“max-width:44%”的图像。

如何使容器与其中的图像宽度相同？

```
<div class="post" >
<img src="http://placekitten.com/200/300" style="vertical-align:bottom; max-width:44%;"/>                                        
</div>

.post{position:relative; display:inline-block;  border: 1px solid lime; } 
```

这是 jsfiddle 示例：http: [//jsfiddle.net/37Fyb/2/](http://jsfiddle.net/37Fyb/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:41:36.190

百分比宽度将子元素设置为其父元素宽度的百分比。在这种情况下，孩子是你`img`的，父母是你的`.post`分隔符。将图像的宽度设置为 44% 会将其设置为分隔线宽度的 44% - 这意味着无论您使用什么容器，图像将始终为其宽度的 44%。

解决这个问题的一种方法是给你的`img`100% 宽度和你的`.post`分隔器 44% 的宽度，然后将它包裹在另一个具有固定宽度的分隔器中：

**HTML**

```
<div class="outerContainer">
    <div class="post" >
        <img src="..." style="... width:100%;" />                                        
    </div>
</div> 
```

**CSS**

```
.outerContainer {
    width:202px;
}
.post{
    border: 1px solid lime;
    width:44%;
} 
```

[JSFiddle 示例](http://jsfiddle.net/37Fyb/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:25:12.463

尝试这个：

```
.post{
  position:relative; 
  display:inline-block;  
  border: 1px solid lime; 
  max-width:44%}

img{ 
  vertical-align:bottom; 
  max-width:100%;
} 
```

# magento - 使用“简单可配置产品”Magento 进行动态 SKU 更改

> ID：15662562
> 
> 赞同：0
> 
> 时间：2013-03-27T15:21:46.153
> 
> 标签：magento, magento-1.7, configurable, configurable-product

我安装了免费扩展“简单可配置产品”，但不幸的是，在 github 上对它的任何更新/响应都很慢或不存在。

我需要购物车做的是在可配置产品页面中选择简单产品时动态更新 SKU。

我可以让购物车显示可配置的产品 SKU，但是当我通过下拉菜单选择任何简单产品时，它不会动态更新。

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:37:37.453

我最终使用以下 URL 上的步骤解决了这个问题：http: [//ashpointlane.com/2011/03/magento-dynamic-sku-display-on-configurable-products/](http://ashpointlane.com/2011/03/magento-dynamic-sku-display-on-configurable-products/)

但是它并不完全准确，因此我在放入该代码后也在这里提出了建议的更改：[在可配置产品视图 Magento 上显示动态 SKU](https://stackoverflow.com/questions/13444995/display-dynamic-sku-on-configurable-product-view-magento)

如果您有自定义主题，这也有点棘手，您必须做更多的工作才能让动态 SKU 显示在前端，并放置在您希望它显示的位置。

# javascript - 使用 Javascript 切换/格式化

> ID：15662566
> 
> 赞同：1
> 
> 时间：2013-03-27T15:22:04.423
> 
> 标签：javascript

我不久前发布了关于使用 javascript 隐藏/显示文本的深刻见解......现在我需要更进一步。找不到合适的组合来使其发挥作用。

这是我**需要**的：

1.  当查看者来到此页面时，第一个隐藏/显示元素将显示在文本框中，并且
2.  该元素也以某种颜色突出显示以显示它处于活动状态。
3.  最后，当单击每个隐藏/显示元素时，它会一直突出显示，直到选择下一个。

这是我的开发网站的链接。我认为这样更容易。

[http://verus.exigodigital.com/services/](http://verus.exigodigital.com/services/)

这是我之前关于隐藏/显示文本的帖子： [使用 Javascript 显示和隐藏文本](https://stackoverflow.com/questions/15160016/showing-hiding-text-with-javascript)

真的很感谢帮助，伙计们！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:46:58.590

您可以创建 2 个 CSS 定义，一个用于当前选定的文本框，一个用于未选择
的文本框当有人单击其中一个文本框以编辑其内容（onfocus 事件）时，您只需调用一个贯穿所有文本框的函数你的文本框，并为每一个检查它是否是有焦点的 - 如果是，将元素的 className 变量设置为“selected”或其他东西，它不是有焦点的那个，然后将它的 className 变量设置为“正常" 或者什么
如果我不明白这个问题或者你需要更多信息，请告诉我:)

# c - 为什么 printf("%02x"...) 会改变输出？

> ID：15662575
> 
> 赞同：0
> 
> 时间：2013-03-27T15:22:23.410
> 
> 标签：c, hash, printf, sha1

```
/*HASHING*/
unsigned char *do_hashing(unsigned char *buffer){
    unsigned char outbuffer[20];
    unsigned char output[20];
    SHA1(buffer, strlen(buffer), outbuffer);

    for (int i=0; i<20; i++) {
        output[i]=outbuffer[i];
    }

    printf("The hash: ");

    for (int i = 0; i < 20; i++) {
          printf("%02x ", outbuffer[i]);
    }

    printf("\n");

    return output;
}
/*HASHING*/ 
```

如果我删除 printf 函数，为什么这个函数会产生不同的输出（错误的输出）。例如：

```
./ftest
The hash: a1 2a 9c 6e 60 85 75 6c d8 cb c9 98 c9 42 76 a7 f4 8d be 73 
The hash: a1 2a 9c 6e 60 85 75 6c d8 cb c9 98 c9 42 76 a7 f4 8d be 73 
=with for-loop print

./ftest

The hash: 6c 08 40 00 00 00 00 00 0a 00 00 00 00 00 00 00 00 00 00 00
=without for-loop print 
```

在这种情况下，我没有包含主函数或#includes，因为此函数内部发生错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:23:22.773

您正在返回一个指向局部变量的指针`unsigned char output[20];`，

函数结束后变量不存在导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:32:15.887

目前，您正在返回本地指针（放置在堆栈上）。这会导致**未定义的行为**。

如果你想这样做，请使用`malloc()`函数在堆中分配内存。

```
unsigned char* output = malloc(20*sizeof(unsigned char)); 
```

但是不要忘记调用`free()`释放分配的内存，否则你会得到内存泄漏。

# powershell-3.0 - 在powershell中选择多列

> ID：15662577
> 
> 赞同：6
> 
> 时间：2013-03-27T15:22:26.570
> 
> 标签：powershell-3.0

这可能是一个非常菜鸟的 powershell 问题，但在这里。

在使用特定 cmdlet 时，我只想选择几个属性进行显示，但是当我使用 select 语句将它们组合在一起时，只会显示 select 语句中的第一个属性。

例如，我感兴趣的 cmdlet 是 Get-VM

当我自己执行 Get-VM 时，我会得到一些默认字段：

```
 Name                   State       CPUUsage(%) MemoryAssigned(M) Uptime     Status
----                   -----       ----------- ----------------- ------     ------
everything             OffCritical 0           0                 00:00:00   Cannot connect to virtual machine configuration storage
SCOrch                 Running     0           1393              1.05:02:16 Operating normally
Server 2012 Base Image Off         0           0                 00:00:00   Operating normally
Server 2012 DC         Off         0           0                 00:00:00   Operating normally 
```

现在，假设我只想显示名称和状态。我试过`Get-VM | select Name,State` 了，我只返回了 Name 列

```
Name
----
everything
SCOrch
Server 2012 Base Image
Server 2012 DC 
```

我只将第一个参数传递给返回的 select 语句，它只是忽略了其他参数。我怎样才能只返回我想要的列？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T21:08:32.303

我怀疑缓冲区/窗口的大小有问题。如果缓冲区比缓冲区宽，则某些列可能会变得“不可见”。默认情况下，状态`[enum]`（阅读：`[int]`伪装）将始终右对齐。名称 ( `[string]`) 将左对齐。怀疑您只需更改顺序即可看到所有内容。

看看这个截图：

![缓冲区比窗口宽](../Images/90b13e579943a18bb5302ea62729ee5a.png)

![缓冲区匹配窗口宽度](../Images/40b233bf2feacfba3a33d158a808bd6d.png)

这是相同的命令，我只是更改了窗口的宽度以匹配缓冲区的宽度......看起来很熟悉？

# css - 灵活的盒子模型 - 显示：flex、box、flexbox？

> ID：15662578
> 
> 赞同：27
> 
> 时间：2013-03-27T15:22:28.050
> 
> 标签：css, flexbox

今天，我们中的许多人都知道，在 CSS3 中引入了新的灵活盒子模型之后，该`display`属性`inline`的旧值`block`已经过时了。但是，我们可能会在同一个灵活的盒子模型中在网络上找到不同的信息。

我们可能会发现主要有 3 个不同的属性值，`display`即和。这三种柔性盒模型有什么区别，用哪一种？`flex``box``flexbox`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-28T00:05:09.573

您可以使用您需要支持的浏览器。

# [`display: box`](http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/)

*   火狐2.0？（前缀）
*   铬 4.0？（前缀）
*   Safari/iOS 3.1？（前缀）
*   Android 2.1（前缀）

据我所知，`box-lines: multiple`在任何浏览器中都没有实现包装 via。

# [`display: flexbox`](http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/)

*   铬 17-?? （前缀）
*   Internet Explorer 10（带前缀）

# [display: flex](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/) - 当前标准

*   Chrome 21（带前缀）、29（无前缀）
*   Opera 12.1（无前缀）、15（webkit 前缀）
*   Firefox 22（无前缀）
*   Safari/iOS 7（前缀）
*   黑莓 10（前缀）
*   Internet Explorer 11（无前缀）

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)（请注意，IE10 是唯一标记为支持包装的部分支持的浏览器）

`flexbox`和的规范`flex`足够相似，没有理由*不*包括两者，尤其是因为 IE10 仅支持`flexbox`规范。的规范`box`非常不同，根据您所追求的效果可能不值得包括在内，即使几乎所有属性都与`flexbox`/`flex`规范中的属性类似。

您可能会发现有些浏览器支持多种规格。可能会有一段时间他们会放弃对旧规范的支持，因此请始终确保包含这些`flex`属性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-27T15:22:28.050

据我所知，以上三个不同版本的柔性盒模型可以按照年龄来分类。

1.  `display: box`- 这是2009年左右被接受为最新型号的第一个柔性盒模型。不要使用它。

2.  `display: flexbox`- 这种灵活的盒子模型于 2011 年问世，仍在开发中。不要使用它。

3.  `display: flex`- 这是最新的柔性盒子模型，目前已成为最新的盒子标准。这可能会进一步发生一些变化，但这比其他两个标准更受欢迎。

# c++ - C++ 库“仅供内部使用”编码风格

> ID：15662582
> 
> 赞同：4
> 
> 时间：2013-03-27T15:22:32.860
> 
> 标签：c++, coding-style, encapsulation

我正在用 C++ 编写一个库。所有类和全局函数都在`mylibrary`命名空间内声明。我需要创建一些仅供内部使用的类：谁将使用这个库应该立即注意到哪些类不打算在库外使用。不幸的是，我不能使用私有函数，因为这会破坏所有封装。我不能使用私有类，因为内部类必须由同一个库中的“普通”类访问。

我想这样做的一个好方法是创建名称空间`mylibrary::internal`并将所有“私有”内容放入其中。这是正确的方法吗？还有其他常见的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:25:10.213

为您的内部功能使用匿名命名空间。这将确保没有外部代码能够链接到它。在这里阅读更多：[匿名命名空间](https://stackoverflow.com/questions/3363684/anonymous-namespace)

# c++ - 在 Tile Map 上绘制精灵

> ID：15662585
> 
> 赞同：2
> 
> 时间：2013-03-27T15:22:39.203
> 
> 标签：c++, opengl

所以我有一个二维数组，它充当要绘制的图块的地图。

```
int sMap[12][20] = {
  {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
  {1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1},
  {1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1},
  {1, 0, 1, 0, 1, 2, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1},
  {1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1},
  {1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
  {1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1},
  {1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 2, 0, 0, 1, 0, 0, 0, 1},
  {1, 1, 0, 0, 0, 0, 0, 1, 2, 1, 0, 0, 1, 0, 1, 1, 2, 2, 2, 1},
  {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1},
  {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
  {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
}; 
```

一旦我的瓷砖被加载，我用它`function()`来放置瓷砖：

```
for (int y = 0; y < 12; y++){
    for (int x = 0; x < 20; x++){
        if    (sMap[y][x] == 1)
            glBindTexture( GL_TEXTURE_2D, brick1);
        else if (sMap[y][x] == 2)
            glBindTexture( GL_TEXTURE_2D, brick2);
        else
            glBindTexture( GL_TEXTURE_2D, wall );

        glBegin(GL_QUADS);
        glTexCoord2f(0.0f, 0.0f); glVertex3f(float(x + offsetx),     float(MAP_SIZEY - (y + offsety)), 0.0f); 
        glTexCoord2f(1.0f, 0.0f); glVertex3f(float(x + 1 + offsetx), float(MAP_SIZEY - (y + offsety)), 0.0f); 
        glTexCoord2f(1.0f, 1.0f); glVertex3f(float(x + 1 + offsetx), float(MAP_SIZEY - (y + 1 + offsety)), 0.0f); 
        glTexCoord2f(0.0f, 1.0f); glVertex3f(float(x + offsetx),     float(MAP_SIZEY - (y + 1 + offsety)), 0.0f);
        glEnd();
    }
} 
```

我想我可能对瓷砖的坐标系感到困惑，因为当我绘制一个`OpenGL`充当精灵的基本正方形时，我在运行程序时会出现黑屏。

我不确定这是否意味着精灵对瓷砖的比例是错误的，或者精灵和瓷砖是否在不同的`Z`平面上......

如果有人能解释坐标系，我将不胜感激，以防我没有像我想象的那样理解它，并建议我如何`OpenGL`在相同的坐标上画一个正方形。

目前我有这个来绘制我的基本精灵：

```
struct RECT{float x, y, w, h;};
RECT sprite = {0, 0, 10, 10};

void drawSprite (RECT rect){
    glBegin(GL_QUADS);
    glColor3f(1.0f, 0.0f, 0.0f);    
        glVertex3f(rect.x, rect.y, 0.0);
        glVertex3f(rect.x, rect.y+rect.h, 0.0);
        glVertex3f(rect.x+rect.w, rect.y+rect.h, 0.0);
        glVertex3f(rect.x+rect.w, rect.y, 0.0);
    glEnd();
} 
```

**编辑：**

调整屏幕大小：

```
glViewport(0,0,width,height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.1f,20.0f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

绘制场景：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();
gluLookAt(10.0f, 8.0f, 20.0f, 10.0f, 8.0f, 0.0f, 0.0f, 1.0f, 0.0f);
glTranslatef(5.0f,4.0f,0.0f);
draw_tiles();
draw_sprite(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:15:13.980

在 draw_tiles 函数中，您可能传递了不正确的坐标 - 也许您应该将 x 和 y 值乘以您的图块大小。

还可以尝试关闭深度测试和背面剔除以帮助解决黑屏问题。

```
glDisable( GL_DEPTH_TEST );
glDisable( GL_CULL_FACE ); 
```

# python - 将类方法作为参数传递给另一个类方法时出错

> ID：15662588
> 
> 赞同：0
> 
> 时间：2013-03-27T15:22:52.693
> 
> 标签：python

我试图将一个类方法作为参数传递给另一个类方法。下面是一个例子...

```
import time

class MyClass(object):

    def doSomething(self,argument2,argument3):
        print argument2,argument3

    def attemptTenTimes(self,fun,*args):
        attempt = 0
        while True:
            try:
                print 'Number of arguments: %s' % len(*args)
                print args
                output = fun(*args)
                return output
            except Exception as e:
                print 'Exception: %s' % e
                attempt += 1
                time.sleep(10)
                if attempt >= 10: return
                else: continue

MC = MyClass()
MC.attemptTenTimes(MC.doSomething,(MC,'argument2','argument3',)) 
```

输出是......

```
Number of arguments: 3
((<__main__.MyClass object at 0x7f7e6be4e390>, 'argument2', 'argument3'),)
Exception: doSomething() takes exactly 3 arguments (2 given)
Number of arguments: 3
((<__main__.MyClass object at 0x7f7e6be4e390>, 'argument2', 'argument3'),)
Exception: doSomething() takes exactly 3 arguments (2 given)
Number of arguments: 3
((<__main__.MyClass object at 0x7f7e6be4e390>, 'argument2', 'argument3'),)
Exception: doSomething() takes exactly 3 arguments (2 given)............. 
```

我将三个参数传递给函数 doSomething，但是，这个异常不断出现。我以前使用函数作为其他函数的参数，但这是我第一次在类的上下文中这样做。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:26:28.267

你还没有通过三个参数；你通过了两个。你需要这个：

```
MC.attemptTenTimes(MC.doSomething,*('argument2','argument3')) 
```

或这个（等效）：

```
MC.attemptTenTimes(MC.doSomething,'argument2','argument3') 
```

该`attemptTenTimes`函数具有参数`*args`，它将位置参数收集到本地称为 的元组中`args`。您将整个元组作为唯一的位置参数传递给它，因此在本地您有一个`args`名为`((MC,'argument2','argument3'),)`. 结果，当您将其解包并将其传递给您的函数时，您只是传递了内部元组。

顺便说一句，你也不应该在将 args 传递给 args 时对其进行解包`len`，因为这会引发错误。你只需要`len(args)`在上面的 12 号线。

**或者**，您可以将您的尝试TenTimes 函数签名更改为：

```
def attemptTenTimes(self,fun,args): 
```

然后，您可以将整个 args 元组传递给它，就像您最初所做的那样。不过，我相信使用`*args`更标准，而且我个人认为它更清晰。

# php - 如何使用jquery可排序功能提交项目的顺序

> ID：15662594
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:23:09.883
> 
> 标签：php, javascript, jquery, jquery-ui-sortable

我有一份 22 名司机的名单。我需要根据比赛结果订购它们。为此，我想使用 jQuery 中的可排序函数。这看起来不错。现在只有一个问题。当我准备好项目订单时，我想将其提交到 PHP 页面。我该如何提交。

一个工作示例在这里[http://jsfiddle.net/UVeB6/](http://jsfiddle.net/UVeB6/)

制作项目清单我这样做

```
<ul id="sortableQual">
    <li id="qual_1" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>S Vettel<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_2" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>M Webber<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_3" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>F Alonso<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_4" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>F Massa<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_5" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>J Button<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_6" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>S Perez<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_7" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>K Raikkonen<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_8" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>R Grosjean<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_9" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>N Rosberg<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_10" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>L Hamilton<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_11" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>N Hulkenberg<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_12" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>E Gutierrez<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_14" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>P di<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_15" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>A Sutil<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_16" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>P Maldonado<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_17" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>V Botta<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_18" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>J Vergne<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_19" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>D Ricciardo<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_20" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>C Pic<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_21" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>G van<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_22" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>M Chilton<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
    <li id="qual_23" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>J Bianchi<font size="1" style="float:right;"><sub>qual</sub></font>

    </li>
</ul> 
```

但是如何提交`<li>`订单？有了警报，我可以看到订单

```
stop: function (event, ui) {
            alert($(this).sortable('serialize'));
        } 
```

但我需要它而不是警报将其提交到 PHP 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:29:00.953

基本上你应该做这样的事情。（非常笼统的答案，不知道更多细节）

```
stop: function (event, ui) {
            $.get('some url', { someParam : $(this).sortable('serialize')}, function(){
                 do something on callback complete
            });
        } 
```

# ruby-on-rails - 数据库模式 - 多态关联与单独的表

> ID：15662600
> 
> 赞同：1
> 
> 时间：2013-03-27T15:23:23.330
> 
> 标签：ruby-on-rails, database-design

用户有很多任务。(tasks.user_id = user_id)

任务有很多标签（通过[Acts as taggable on](https://github.com/mbleigh/acts-as-taggable-on)

用户有很多列表 -> 有很多任务（一个列表只是多个标签的包装，例如 {List id => 1, name => "shopping holiday summer"} 将检索所有标记有所有这些标签的任务）

例如，如果用户访问 url tags/shopping%20vacation，我的代码会查找：

```
Task.all.tagged_with(["shopping", "vacation"]) 
```

task.list_id 没有查找表或外键

我希望用户能够与其他用户共享任务、列表和标签。

共享任务的用户仅与其他用户共享该任务。

共享列表的用户会向其他用户打开该列表中的所有任务。

共享标签的用户将使用该标签标记的所有用户任务打开给另一个用户。

对我来说，有几个选择，我想就每个我可能没有想到的优缺点提供一些意见。

一个是每个可共享项目的不同表：

shared_tasks：task_id、shared_to_id（或 user_id） shared_lists：list_id、shared_to_id shared_tags：tag_id、shared_to_id

OR：多态关联

可共享：shared_id(item_to_share)、shared_to_id、shared_type

各自的优缺点是什么？

还有其他我没有想到的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:58:14.390

我个人会更改架构设计。以任务为例，我现在将其视为与用户的多对多关系，而不是当前的多对一关系。因此，这意味着删除列 tasks.UserId 并添加一个名为 UserTasks 的新表，该表将 Tasks 与定义为（UserId、TaskId、IsOwner）的用户链接起来。IsOwner 对于任务所属的用户设置为 1，如果它是共享的但属于其他人，则设置为 0。这将使查询更容易，例如您可以执行一次选择来获取拥有和共享的任务，而不是 2 个单独的查询，也可以避免联合。

# javascript - 打开 jQueryUI 对话框时页面切换

> ID：15662602
> 
> 赞同：2
> 
> 时间：2013-03-27T15:23:29.693
> 
> 标签：javascript, jquery, jquery-dialog

我有时会在打开对话框时观察到页面移动。

```
<a class="myLink" href="javascript:void(0)">clickMe</a>
$("a.myLink").click(function(e) {$("#myDialog").dialog("open");}); 
```

不久前，我发现添加`return false;`click() 回调修复了该行为。

我今天才知道我应该`e.preventDefault();`改用。

所以，我要回去摆脱我所有的`return false;`陈述，我开始质疑我是否首先需要它们。大多数时候，即使没有`return false;`. 我不知道它是否与浏览器类型或版本、jQuery 版本、jQueryUI 版本或我的 JavaScript 有关。

我现在开始相信/希望它只发生在目标是锚链接时，我认为正在发生的是，当打开对话框时，链接的默认行为会触发并转到页面顶部。这是正确的，还是由其他原因引起的？

谢谢

# java - 我们会得到什么作为编译结果？

> ID：15662608
> 
> 赞同：-7
> 
> 时间：2013-03-27T15:23:48.523
> 
> 标签：java, compilation

这是一些片段

```
 public class Overload {
      public void method(Object o) {
        System.out.println("Object");
      }
      public void method(java.io.FileNotFoundException f) {
        System.out.println("FileNotFoundException");
      }
      public void method(java.io.IOException i) {
        System.out.println("IOException");
      }
      public static void main(String args[]) {
        Overload test = new Overload();
        test.method(null);
      }
    } 
```

这是简单的代码。我们将得到什么作为编译结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:29:49.597

该程序将打印出“FileNotFoundException”。

这是由于多态方法在 Java 中的工作方式。 `test.method(null)`是一个模棱两可的方法调用，因为可以使用这三种实现中的任何一种。当多个签名适用于给定参数时，将选择最具体的子类。

在这种情况下，这是`FileNotFoundException`因为继承层次结构如下所示：

```
System.Object
  System.Exception
    System.SystemException
      System.IO.IOException
        System.IO.FileNotFoundException 
```

一般来说，程序员应该意识到这种行为，但不应该试图利用它。这种代码可能非常令人困惑，并且经常导致意想不到的后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:28:02.633

会是“对象”吗

Null 不是我知道的对象，但我怀疑 Object o arg 会设置为 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:26:32.803

你得到 FileNotFoundException

但是是的，您可以运行它并自己查看；）

# r - 计算数据框中每个人的变量更改次数

> ID：15662612
> 
> 赞同：3
> 
> 时间：2013-03-27T15:23:57.887
> 
> 标签：r, for-loop

可能是一个非常简单的问题，但我很难在 r 中解决这个问题。我有一个包含四个变量的数据集：ID（用于识别参与者）、类型（这次为 1 值）、决策（A 或 B）和反馈（0 或 1）。两个参与者的数据集如下所示：

```
ID   Type    Decision    Feedback
1     1       A           0
1     1       A           0
1     1       B           1
1     1       B           1
1     1       B           0
2     1       A           0
2     1       A           1
2     1       A           1
2     1       A           0
2     1       B           1
etc... 
```

我想根据先前的反馈计算决策过程中的更改次数。换句话说，如果参与者选择 A 并收到负面反馈，她/他会再次选择 A（Stay）还是 B（Shift）。因此，对于一位参与者，我的代码如下：

```
Stay=0
Shift=0  

for(i in 2:length(mydf$Type)){  
    if(mydf$Decision[i] == "A" && mydf$Feedback[i-1]==1 && mydf$Decision [i-1] == "A" ){
    Stay= Stay+1
    }
    else if(mydf$Decision [i] == "B" && mydf$Feedback[i-1]==1 && mydf$Decision [i-1] == "B" ){
    Stay= Stay+1
    }
    else if(mydf$ Decision [i] == "A" && mydf$Feedback[i-1]==1 && mydf$Decision [i-1] == "B" ){
    Shift= Shift+1
    }
    else if(mydf$Decision [i] == "B" && mydf$Feedback[i-1]==1 && mydf$Decision [i-1] == "A" ){
    Shift= Shift+1
    }
} 
```

但是，我的数据框包含 20 个参与者，我不知道如何扩展我的代码来获取每个参与者的停留和轮班次数（即，最后得到这样的东西）：

```
#ID    Stay    Shift
#1     10      10
#2     16      4
#etc... 
```

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:39:25.517

最好`ddply`在[plyr](http://plyr.had.co.nz/)包中完成此操作（您必须安装它），它会根据其中一列拆分数据框，并对每一列进行一些分析，然后再重新组合成一个新的数据框。

首先，编写一个函数`num.stay.shift`，在给定数据框的单个子集的情况下计算您的逗留和移位值（在注释中解释）：

```
num.stay.shift = function(d) {
    # vector of TRUE or FALSE for whether d$Feedback is 1
    negative.feedback = (head(d$Feedback, -1) == 1)
    # vector of TRUE or FALSE for whether there is a change at each point
    stay = head(d$Decision, -1) == tail(d$Decision, -1)
    # summarize as two values: the number that stayed when feedback == 1,
    # and the number that shifted when feedback == 1
    c(Stay=sum(stay[negative.feedback]), Shift=sum(!stay[negative.feedback]))
} 
```

然后，使用`ddply`将该函数应用于数据框中的每个人，并按 ID 将其拆分：

```
print(ddply(tab, "ID", num.stay.shift)) 
```

在您显示的数据框的子集上，您最终会得到

```
#   ID Stay Shift
# 1  1    2     0
# 2  2    2     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:29:17.020

如何按 ID 和反馈进行很好的细分：

```
 library(data.table)
  X <- data.table(mydf, key="ID")

  X[, list(Dif=abs(diff(as.numeric(Decision))),  
          FB=head(Feedback, -1))
        , by=ID][,list(Shifted=sum(Dif), Stayed=length(Dif)-sum(Dif)), by=list(ID,FB)]

  #     ID FB Shifted Stayed
  #  1:  1  0       1      1
  #  2:  1  1       0      2
  #  3:  2  0       1      1
  #  4:  2  1       0      2 
```

* * *

或者，如果您不希望按 分解`Feedback`，则更简洁：

```
X[ , {Dif=abs(diff(as.numeric(Decision))); 
     list(Shifted=sum(Dif), Stayed=length(Dif)-sum(Dif))}
  , by=list(ID)]

#      ID Shifted Stayed
# 1:  1       1      3
# 2:  2       1      3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T09:54:37.273

`embed`正如@DavidRobinson's answer的评论中提到的，这是使用该函数的一个稍微复杂的替代方案。

```
d<-read.table(text="ID   Type    Decision    Feedback
1     1       A           0
1     1       A           0
1     1       B           1
1     1       B           1
1     1       B           0
2     1       A           0
2     1       A           1
2     1       A           1
2     1       A           0
2     1       B           1", header=TRUE)

do.call(rbind,
    by(d, d$ID, function(x) {
        f <- function(x) length(unique(x)) == 1
        stay <- apply(embed(as.vector(x$Decision), 2), 1, f)
        neg.feedback <- x$Feedback[1:nrow(x)-1] == 1
        c(Stay = sum(stay & neg.feedback), Shift = sum((! stay) & neg.feedback))
    })
)
#   Stay  Shift
# 1    2      0
# 2    2      0 
```

# ruby-on-rails - 毫无意义的路由错误……无论如何对我来说

> ID：15662613
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:00.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, routes

好的，这是我单击特定链接时收到的浏览器中显示的一般错误消息：

没有路线匹配 {:action=>"edit", :controller=>"timesheets", :incident_id=>nil}

这是包含链接的页面的代码（包括创建新记录的路径）

```
<div style="float:left;padding:25px;">
<p><%= link_to "Add a Command Officer", new_incident_timesheet_command_officer_path %></p>
</div> 
```

在我单击链接之前，浏览器 url 如下所示：

本地主机：3000/事件/197/时间表/编辑

上面的浏览器 url 完全有意义。

当我将鼠标悬停在“添加指挥官”的链接上时，浏览器底部会显示：localhost:3000/incidents/197/timesheets/command_officers/new

但是当我点击它时，我得到了我在顶部提到的路由错误。这是来自 Command_Officers_controller 和路由文件的代码。

我相信我已经包含了所有必需的信息，以便有人帮助我，但如果我遗漏了什么，请告诉我。谢谢您的帮助

路由.rb

```
root :to => "incidents#index"

resources :users
resources :profiles

resources :incidents do

resource :mat_list
member do
post :send_notice
end
member do
get :changestatus
end

resource :timesheet do
    resources :command_officers
    resources :fire_chiefs
    resources :fire_fighters
    resources :safety_officers
    resources :emts
    resources :hazmat_specialists
    resources :command_vehicles
    resources :engines
    resources :emergency_supports
    resources :hazmat_units
    resources :field_units
    resources :pumpers
    resources :tankers
    resources :rescue_units
    resources :ladder_truck75s
    resources :ladder_truck150s
end
end

resource :session do
  member do
  get :resetpass
  post :resetpass
 end
end 
```

command_officers_controller.rb

```
def new
   @command_officer = CommandOfficer.new
   @timesheet = Incident.find(params[:incident_id]).timesheet

   respond_to do |format|
     format.html # new.html.erb
   end
end

# GET /command_officers/1/edit
def edit
   @command_officer = CommandOfficer.find(params[:id])
end

# POST /command_officers
# POST /command_officers.xml
def create
   # @new_command_officer = CommandOfficer.new(params[:command_officer])
  @timesheet = Incident.find(params[:incident_id]).timesheet
      @command_officer = @timesheet.command_officer.build(params[:command_officer])

  respond_to do |format|
    if @command_officer.save
               format.html { redirect_to(edit_incident_timesheet_path, :notice => 'Command officer was successfully created.') }
    else
        flash[:error] = "What happened?"
        format.html { render :new }
        end
end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:28:46.137

你做了一个嵌套路由但没有传递事件ID，如果你有一个名为的实例变量`@incident`，你可以这样做：

```
<%= link_to "Add a Command Officer", new_incident_timesheet_command_officer_path(@incident) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:29:36.243

问题是您正试图在下一页上生成一些链接，但您传递给 rails 的 event_id 为 nil。检查您的视图/控制器并删除/修复有问题的代码。

更一般地说，学习如何阅读 rails 提供的堆栈跟踪信息，以便您自己跟踪这些信息。

# php - file_put_contents 和图像 url 空格

> ID：15662620
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:24:13.507
> 
> 标签：php

我从 url 获取图像时遇到问题。我正在使用 file_put_contents ，我发现问题是图像 url 中的空格，因为没有任何空格的图像工作。

我正在获取图像的 URL 看起来是：

```
/support/member_profile/16-New%20Image%20(With%20Logo)%20(Medium).jpg 
```

我尝试使用 urlencode() 但它仍然无法正常工作。如果我回显编码的网址，我会得到：

```
%2Fsupport%2Fmember_profile%2F16-New+Image+%28With+Logo%29+%28Medium%29.jpg 
```

我该如何解决这个问题？提前致谢

**编辑：**

我发现我只需要用 %20 替换空格。使用 urlencode 时，它​​会编码整个 URL，这就是它不起作用的原因。

任何提示如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:44:25.583

使用[urldecode](http://php.net/urldecode)转换`%20`为真实空间。
然后就可以调用了`file_put_contents`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:44:07.170

您应该只对文件名进行 URL 编码，而不是包括斜杠在内的整个路径：

```
$path = '/support/member_profile/16-New Image (With Logo) (Medium).jpg';
$p = pathinfo($path, PATHINFO_DIRNAME);
$f = pathinfo($path, PATHINFO_FILENAME);
$e = pathinfo($path, PATHINFO_EXTENSION);

echo sprintf('%s/%s.%s', $p, urlencode($f), urlencode($e)); 
```

而且，实际上，您还需要对每个*路径部分*进行 urlencode 。

```
$path = '/support/member profile/16-New Image (With Logo) (Medium).jpg';
$p = explode('/', $path);

foreach ($p as $pp)
  $pathparts[] = urlencode($pp);

echo implode('/', $pathparts); 
```

# java - 无法打印包含数字和字母“M”的字符串。为什么？

> ID：15662623
> 
> 赞同：1
> 
> 时间：2013-03-27T15:24:17.820
> 
> 标签：java, string, maven-2, jvm

我试图打印到由数字和大写 M 组成的控制台字符串。就像：

```
System.out.println("blah");
System.out.println("123M");
System.out.println("blah blah"); 
```

结果是

```
blah
blah blah 
```

所以`println("123M")`甚至没有被执行，因为另外两个人之间没有空行。数字数字和组合无关紧要，但如果'M'之前有任何字母或'M'之后有非空白字符，则会打印字符串。

在 java 1.7.0_03-b05 和另外两个（不知道版本）上试过。谢谢你的任何线索。

**更新：** 问题出现在 Maven 项目中。

下面是截图：

![在此处输入图像描述](../Images/68c3f222f2e83d35510249357a41f520.png)

**另一个更新：**

在[Charlee Chitsuk](/users/813999/charlee-chitsuk)关于 pom 的帖子之后，我将我的帖子改为：

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <configuration>
        <archive>
          <manifest>
            <mainClass>javaapplication4.JavaApplication4</mainClass>
          </manifest>
        </archive>
        <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

在`mvn clean compile assembly:single`我终于收到正常工作的罐子之后。为什么它不能与 exec-maven-plugin 一起工作对我来说仍然是一个谜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:08:18.883

> 我写了这门课，得到了一个线索。它仅在 Maven 项目中失败。

在这种情况下，几乎可以肯定您正在运行的代码不是您认为正在运行的代码。这是唯一合理的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:45:14.533

我注意到您正在使用`org.codehaus.mojo:exec-maven-plugin:1.2:exec`来执行您的`JavaApplication4.java`. 然后我猜你`pom.xml`可能看起来像

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
      <execution>
        <goals>
          <goal>exec</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <executable>java</executable>
      <arguments>
        <argument>-classpath</argument>
        <!-- automatically creates the classpath using all project dependencies,
             also adding the project build directory -->
        <classpath/>
        <argument>javaapplication4.JavaApplication4</argument>
        ...
      </arguments>
    </configuration>
  </plugin> 
```

使用`build and clean`方式`Eclipse Menu`与`mvn clean install`. 通常我使用以下步骤在 Eclipse 中使用 Maven：-

1.  右键单击项目选择`Run As ----> Maven clean`
2.  右键单击项目选择`Run As ----> Maven test`或`Run As ----> Maven install`

我想通知您检查`org.codehaus.mojo:exec-maven-plugin`配置并尝试使用步骤 1 清理项目。然后再次运行您的类。

我希望这可能会有所帮助。

# php - 如何知道一个网站是否仍将我的 iframe 放在他/她的网站上

> ID：15662627
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:23.247
> 
> 标签：php, javascript, jquery

抱歉标题不好，我不知道这项技术叫什么，所以基本上我想知道我是否将 iframe 放在网站上，并知道该网站是否仍将我的 iframe 放在他/她的网站上，而无需查看网站我把我的 iframe 放在

所有帮助表示赞赏

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:35:24.527

你可以记录 $_SERVER["HTTP_REFERER"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:05:23.703

添加到@Thomas Kjær Pedersen 答案：

您可以运行您期望 iframe 的 URL的自动 wget（在命令行中）或 file_get_contents（使用 furl_open）或 curl 请求（[http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php) ）成为。然后同时您需要在充当 iframe 的页面上记录 $_SERVER["HTTP_REFERER"]。然后，您可以使用您的服务器 IP（运行自动脚本的 IP）验证 $_SERVER["REMOTE_ADDR"] 以验证来源并查看是否给出了引用者命中。

听起来合乎逻辑？

# android - 创建基于三个不同标准对产品进行评分的单一活动

> ID：15662629
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:28.140
> 
> 标签：android, android-listview, android-xml, android-gridview

我想创建一个有四列的活动。第一列将自动填充产品名称（来自数据库），而其他三列则带有评级栏。

例子：

姓名 | 价格|设计| 公司

产品1 | rtb1 | rtb2 | rtb3

产品2 | rtb1 | rtb2 | rtb3

产品3 | rtb1 | rtb2 | rtb3

产品4 | rtb1 | rtb2 | rtb3

产品5 | rtb1 | rtb2 | rtb3

当我点击评分栏时，一项新活动将开始包含 5 个评分栏（子类别），其总和将显示在我主要 acritivity 的“母亲”评分栏上。

我只想知道哪种方法是开发它的最佳方法。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:23:27.760

如果产品多于一个屏幕，我会使用带有 CursorAdapter 的 ListView。使用 ListView 项目的可选部分有一些细微差别，但所有条目都将采用相同的形式，您只需解决一次即可。使用带有 CursorAdapter 的 ListView 比使用 GridView 性能要好得多。

如果您使用双片段列表详细信息平板电脑视图，这尤其好，因为它将像这样很好地使用设备空间：

![多窗格布局](../Images/20e4f6d500e0efc404dbfe7a6301baf4.png)

# twitter-bootstrap - 使用引导轮播的绘制时间问题

> ID：15662632
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:33.353
> 
> 标签：twitter-bootstrap, css-transitions, carousel, repaint, reflow

所以我使用 Bootstrap Carousel 来创建一个简单的滑块，但问题是当第一次触发转换时，每张幻灯片的绘制时间都需要很长时间，但在那之后它们似乎就好了，我的猜测是第一次转换导致回流，这就是它发生的原因，但不确定。

[这是我在 Chrome 开发工具中看到的](http://i.stack.imgur.com/GZMpL.png)

这也是轮播的链接：http: [//dev.around25.net/inzimo/#/weddings](http://dev.around25.net/inzimo/#/weddings)

任何解决此问题的建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:33:36.550

好的，所以我只是想`-webkit-backface-visibility: hidden;`在 Chrome 上使用轮播上的 hack 可以正常工作。不过，仍然欢迎任何其他建议。

# qt - 无法运行编译 qt 应用程序。Qt Creator 忽略斜线

> ID：15662636
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:38.810
> 
> 标签：qt, compiler-errors, mingw, qt5

我刚刚安装了 Windows 7（64 位）和 Qt 5.0.1。之后我无法运行任何 Qt 程序。我尝试重新安装库、MinGW 和 Qt Creator。我也尝试自己建立图书馆，但没有帮助。它忽略了所有的斜线。以下是一些屏幕： http: [//imgur.com/O2UOGNJ](http://imgur.com/O2UOGNJ)和[http://imgur.com/vMjpCQT](http://imgur.com/vMjpCQT)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:34:20.377

尝试从 Windows 命令提示符 cmd.exe 运行 mingw32-make

我注意到您的终端使用正斜杠（“C:/MinGW”），这表明您正在使用 MSYS。您的 Makefile 使用反斜杠（“C:\Qt”），MSYS 可能无法正确解析。

# javascript - 我可以使用另一个 Javascript 从 DOM 中删除一个 javascript 吗？

> ID：15662639
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:50.860
> 
> 标签：javascript, dom

我有这种情况，我必须从 DOM 中删除一个脚本标签，而只能为此使用另一个脚本。我知道这不是一种好的工作方式，但这是目前唯一的选择。

因此，我的问题是这是否可能。我认为当我删除这个脚本时，你仍然可以使用里面的函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:31:46.777

> 是否可以为此使用另一个脚本从 DOM 中删除脚本标记。

是的，您可以从 DOM 中删除`<script>`节点，因为您也可以修改任何其他节点。您甚至可以编写一个脚本来删除它自己的元素。

> 我认为当我删除这个脚本时，你仍然可以使用里面的函数。

[那是正确的](https://stackoverflow.com/q/14782688/1048572)。当脚本已经执行时，它对环境所做的修改将保留。除了卸载页面（或显式覆盖它们 - 如果可能）之外，您无法撤消它们。

# postgresql - 我如何在 postgres 中返回一点

> ID：15662640
> 
> 赞同：0
> 
> 时间：2013-03-27T15:24:51.297
> 
> 标签：postgresql

我是 postgres 的新手，并试图设置一个返回一点的函数。

我不断收到错误

> 函数的最终语句必须是 SELECT 或 INSERT/UPDATE/DELETE RETURNING。

我明白那个

[除非函数声明为返回 void，否则最后一条语句必须是 SELECT，或者具有 RETURNING 子句的 INSERT、UPDATE 或 DELETE。](http://www.postgresql.org/docs/8.4/static/xfunc-sql.html)

这是代码

```
CREATE OR REPLACE FUNCTION "f"(...)
  RETURNS bit AS
 DO $$
 Begin
        IF  someStuff
        THEN 
           0; //also tried select 0 //also tried return 0
        ELSE
           1;  //also tried select 1 //also tried return 0
        END IF;
        0; //also tried select 0 //also tried return 0
END $$ 
```

我的语法哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:34:57.180

有几个错误：

*   `DO`函数定义中的错误
*   您缺少语言规范
*   在 PL/pgSQL 你`return`用来返回函数的结果

所以你的功能变成：

```
CREATE OR REPLACE FUNCTION f(some_value integer)
  RETURNS bit AS
 $$
 Begin
    IF (some_value = 1)
    THEN 
       return 0; 
    ELSE
       return 1; 
    END IF;
END $$
language plpgsql 
```

但是您应该使用`boolean`而不是位来返回真/假标志：

```
CREATE OR REPLACE FUNCTION f(some_value integer)
  RETURNS boolean AS
 $$
 Begin
    IF (some_value = 1)
    THEN 
       return false; 
    ELSE
       return true; 
    END IF;
END $$
language plpgsql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:40:44.627

如果您想使用 plpgsql，请按照 a_horse 的答案执行，但如果您不需要 plpgsql，请在 sql 中执行：

```
create or replace function f(some_value integer)
returns boolean as $$

    select some_value = 1;

$$
language sql; 
```

如果该功能是[此问题](https://stackoverflow.com/q/15661766/131874)中的功能，那么它将执行此操作：

```
create or replace function isPersonQualifiedForJob(pid integer, jid)
returns boolean as $$

    select exists (
        select 1
        from
            getskillsforjob(jid) j
            inner join
            getskillsforperson(pid) p on j.skillid = p.skillid
    )

$$
language sql; 
```

检查`exists`比计数要快得多，因为它足以找到第一个匹配项。

# python - 在哪里下载 Python3.3 的 Scipy？

> ID：15662643
> 
> 赞同：13
> 
> 时间：2013-03-27T15:24:57.110
> 
> 标签：python, scipy

我想在 Windows 中为 Python3.3 安装 Scipy。但我只在以下链接中找到了适用于 Python 3.2 版的 Scipy 安装文件：

[http://sourceforge.net/projects/scipy/files/scipy/0.12.0b1/](http://sourceforge.net/projects/scipy/files/scipy/0.12.0b1/)

那么这个时候还是不可用吗？有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T17:02:04.957

我强烈建议获取 的所有组件[`Scipy-stack`](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy-stack)，它们就在`scipy`上面评论中链接的文件下方。不幸的是，维护者还没有更新`scipy-stack`到 3.3（我给他发了电子邮件），但是所有的组件（`numpy-MKL`, `scipy`, `matplotlib`, `ipython`, `pandas`, `sympy`, and `nose`），以及所有的依赖项（`Python-dateutil`, `distribute`, `gmpy`, `PIL`, `pygments`, `pyreadline`, `pytz`, `statsmodels`, and `tornado`） Win32 和 AMD64 都有 3.3 版本。根据您将要进行的计算类型，这些软件包将为您提供良好的开端，并且由于它们都来自同一来源，因此它们应该可以很好地协同工作。

**更新**

我刚收到 Christoph Gohlke 的消息，他正在推迟更新，`scipy-stack`直到`numpy-1.7.1`、`scipy-0.12`和`ipython-0.13.2`发布，所以可能要几个月。如果您想构建自己的版本，他的[`redist_wininst.py`](http://www.lfd.uci.edu/~gohlke/code/redist_wininst.py.html)脚本可以让您做到这一点。

**更新 2**

[`scipy-stack`](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy-stack)已更新其组件的新版本，适用于 Python 2.7 和 3.3。享受！

# requirejs - 将 CDN 与 RequireJS 优化器一起使用

> ID：15662644
> 
> 赞同：9
> 
> 时间：2013-03-27T15:25:02.000
> 
> 标签：requirejs

RequireJS 允许从 CDN 加载库。如果 CDN 出现故障，还可以有一个备份选项，文件可以位于其他位置（在这种情况下，我们假设它位于本地）。这一切都在路径对象中完成。例如，为了从 CDN 加载 JQuery，然后在 CDN 关闭时在本地加载，请执行以下操作：

```
 paths : {
    jquery : [ 
        'https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min',
        'lib/jquery',
    ]} 
```

上面的示例将首先尝试从 CDN 中查找查询，然后从 lib/jquery 中查找。

**问题** 我的印象是，在使用 requirejs 优化器时，事情会被缩小并混淆成一个大文件。备份选项如何在优化器中工作？它会包含在缩小文件中吗？如果是这样，那么使用 CDN 绝对没有优势。但是如果优化版本中不包含备份选项，那么如果 CDN 出现故障，优化代码将如何应对？

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:47:47.967

您可以为常规站点与用于提供优化器的站点设置不同的配置设置，因此在这种情况下，您将在优化器版本中使用“空”配置，这样它就不会在组合/缩小版本中包含 jQuery ：

```
paths: {
    jquery: "empty:"
} 
```

有关详细信息，请参阅文档： [http ://requirejs.org/docs/optimization.html#empty](http://requirejs.org/docs/optimization.html#empty)

# apache - 拒绝来自文件中 ips 的访问

> ID：15662645
> 
> 赞同：2
> 
> 时间：2013-03-27T15:25:02.907
> 
> 标签：apache, .htaccess

是否有 .htaccess 命令拒绝访问特定文件中的每个 ip？假设我有一个名为 bans.txt 的文件（位于我的 .htaccess 文件旁边），其中包含一个简单的 ips 列表，一个在另一个之下。我想拒绝访问该文件中的每个 ip。是否有一个简单的 .htaccess 命令可以做到这一点？就像是：

```
Deny from bans.txt 
```

我一直在寻找，我认为没有，但只是检查一下，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:27:23.087

实际上，有一种巧妙的方法可以完全从 Apache 完成这项任务。您需要使用一个名为**[RewriteMap的功能](https://httpd.apache.org/docs/current/rewrite/rewritemap.html)**

1 - 首先启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放入您的`httpd.conf`以启用`RewriteMap`调用`ipmap`：

```
RewriteMap ipmap txt:/some/path/to/ipmap.txt 
```

2 - 然后创建您的文本文件，其中**包含您要禁止的所有 IP 的**`/some/path/to/ipmap.txt`条目，如下所示：

 **```
192.168.0.1 1
192.168.0.4 1
10.119.35.8 1
...
... 
```

3 - 反弹你的 Apache 进程（因为你已经改变了`httpd.conf`）

4 - 最后把这段代码放在你`.htaccess`的`$DOCUMENT_ROOT`目录下：

```
RewriteEngine On
RewriteBase /

# if IP is found in ipmap then return Forbidden error
RewriteCond ${ipmap:%{REMOTE_ADDR}} ^1$
RewriteRule ^ - [F,L] 
```**

# c# - C# 嵌套 IF OR 和条件？

> ID：15662646
> 
> 赞同：-6
> 
> 时间：2013-03-27T15:25:03.917
> 
> 标签：c#, if-statement

哪一个更好？明智的表现和明智的最佳实践。为什么？

```
if ((process_checking == true) && (standard_output.Contains("0")))
{
}
else if ((process_checking == true) && (standard_output.Contains("1")))
{
} 
```

或者

```
if (process_checking==true)
{
   if (standard_output.Contains("0"))
   {
     blah
   }
   else
    //there is only 0 or 1 value
   {
      blah
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:28:32.013

第一个必须查看`process_checking`两次的值，因此性能会（非常非常可以忽略不计）更差。当然，您对“0”和“1”的假设，第一个必须检查“1”，这是一项额外的工作。

真正的区别在于可读性。第二个更具可读性 - 很清楚你在做什么，如果`process_checking`不是真的，整个块都会被跳过。

只要你没有嵌套太深，一点点嵌套绝对是首选，因为它可以增加可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:29:24.360

在我看来，第二个版本更好，因为你不重复`process_checking`条件。它更具可读性，因为控制流更易于识别和理解，并且性能可能会稍微提高一些，因为您不需要重新计算`process_checking`if 第一个`if`子句失败。但是，这只是我的意见；其他人可能有不同的看法...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:29:14.597

第二个实例更好，因为它只进行一次 process_checking 比较。并且由于您说只有 0 或 1（输入已经过验证，我假设这是您的 process_checking 标志的用途），因此它不会调用 .Contains 方法两次，从而节省了另一个函数调用和比较。

您可以使用布尔变量（例如 process_checking）做的另一件巧妙的事情是让它成为该条件的唯一部分，就像您使用 .Contains 方法所做的那样：

```
if (process_checking) 
{
    if (standard_output.Contains("0")) { /*stuff*/ }
    else { /*other stuff*/ }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:50:40.223

在我看来，两者的结合会产生更好的结果，因为有时你只处理两个或三个选项，然后你使用`if`，`else if`更一般地说，经常使用`if`with `else`，更好的主意是

```
if(condition = true)
{
// statements
}
else if(other condition = true)
{
// statements
}
else
{
// for all general options, which you have'nt addressed
} 
```

# cassandra - Astyanax：如果 MutationBatch 中途失败，我有什么保证？

> ID：15662657
> 
> 赞同：2
> 
> 时间：2013-03-27T15:25:28.687
> 
> 标签：cassandra, astyanax

我知道从 0.8 开始，Cassandra 保证行更新是原子的。

但是，如果我准备（使用 MutationBatch）几个行修改或跨多个列族的修改，是否保证行将按照我设置它们的顺序更新？例如，如果我有

*   更新 CF 1，第 1 行
*   更新 CF 1，第 2 行
*   更新 CF 2，第 3 行

CF 2 是否可以更新，而 CF 1 由于故障而保持不变？

如果我设置了会发生什么：

*   更新 CF 1，第 1 行，A 列
*   更新 CF 1，第 2 行
*   更新 CF 2，第 3 行
*   更新 CF 1，第 1 行，B 列

或者，我应该准备三个 MutationBatches 并分别执行它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:24:27.193

所有更新都是并行完成的，因此无法保证排序。部分成功将导致批处理日志接管并从 1.2 开始完成批处理：[http ://www.datastax.com/dev/blog/atomic-batches-in-cassandra-1-2](http://www.datastax.com/dev/blog/atomic-batches-in-cassandra-1-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:40:59.303

Playorm 提供了刷新支持，可以一次性将所有持久性内容推倒，因此它可以将其作为一个工作单元发送（不是事务）

[http://buffalosw.com/wiki/flush-support/](http://buffalosw.com/wiki/flush-support/)

# c# - 将十进制的 linq 结果转换为 ObservableCollection

> ID：15662661
> 
> 赞同：0
> 
> 时间：2013-03-27T15:25:36.203
> 
> 标签：c#, linq

尝试将 LINQ 查询的结果存储到 ObservableCollection 中，但 linq 的结果是十进制类型。

```
ObservableCollection<string> cost = 
    new ObservableCollection<string>((from i in context.Items
                                      where i.Cost != null
                                      && i.Cost > 0
                                      orderby i.Cost
                                      select i.Cost).Distinct()); 
```

它没有编译说`'The best overloaded method match for 'System.Collections.ObjectModel.ObservableCollection<string>.ObservableCollection(System.Collections.Generic.IEnumerable<string>)' has some invalid arguments.`

我看了[这里](https://stackoverflow.com/questions/1465285/cast-linq-result-to-observablecollection)，但对我没有多大帮助。

**更新**

我尝试了以下但没有成功：

```
ObservableCollection<string> cost = 
new ObservableCollection<string>((from i in context.Items
                                  where i.Cost != null
                                     && i.Cost > 0
                                  orderby i.Cost
                                  select i.Cost).Distinct()
                                                .Select(i=>i.ToString())); 
```

和

```
ObservableCollection<string> cost = 
new ObservableCollection<string>((from i in context.Items
                                  where i.Cost != null
                                  && i.Cost > 0
                                  orderby i.Cost
                                  select i.Cost.ToString()).Distinct()); 
```

当我在 LINQPad 中运行两者时，我收到以下错误：
`LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression. Message LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:27:30.637

转换`Cost`为字符串`ToString`：

```
ObservableCollection<string> cost = 
    new ObservableCollection<string>((from i in context.Items
                                      where i.Cost != null
                                      && i.Cost > 0
                                      orderby i.Cost
                                      select i.Cost.ToString()).Distinct()); 
```

调用时使用任何`CultureInfo`你需要的东西，如果有的话`ToString()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:34:43.663

做`ToString` **之后**`Distinct`。_ 这样它就不会创建这么多的字符串并比较不同的字符串。

```
ObservableCollection<string> cost = 
    new ObservableCollection<string>((from i in context.Items
                                      where i.Cost != null
                                         && i.Cost > 0
                                      orderby i.Cost
                                      select i.Cost).Distinct()
                                                    .Select(i=>i.ToString())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T17:34:43.513

尝试

```
ObservableCollection<string> cost = 
    new ObservableCollection<string>((from i in context.Items
                                      where i.Cost != null
                                      && i.Cost > 0
                                      orderby i.Cost
                                      select i.Cost).Distinct()
                                                    .AsEnumerable()
                                                    .Select(c => c.ToString())); 
```

由于显然 EF 提供程序似乎无法将`ToString()`调用转换为 SQL，因此调用 to`AsEnumerable()`会将查询带入内存，并且`ToString()`调用将使用 LINQ to Objects。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T15:28:01.510

为什么不使用 ToString()？

```
ObservableCollection<string> cost = 
    new ObservableCollection<string>((from i in context.Items
                                  where i.Cost != null
                                  && i.Cost > 0
                                  orderby i.Cost
                                  select i.Cost.ToString()).Distinct()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T15:29:24.140

您应该通过将它们转换为来选择字符串值`context.Items`来创建`ObservableCollection<string>``String`

```
ObservableCollection<string> cost = 
    new ObservableCollection<string>((from i in context.Items
                                      where i.Cost != null
                                      && i.Cost > 0
                                      orderby i.Cost
                                      select i.Cost.ToString()).Distinct()); 
```

或者创建一个`ObservableCollection<decimal>`

```
ObservableCollection<decimal> cost = 
    new ObservableCollection<decimal>((from i in context.Items
                                      where i.Cost != null
                                      && i.Cost > 0
                                      orderby i.Cost
                                      select i.Cost).Distinct()); 
```

# javascript - 使用不同的符号绘制数据不起作用

> ID：15662663
> 
> 赞同：2
> 
> 时间：2013-03-27T15:25:37.700
> 
> 标签：javascript, jquery, flot

我试图在我的浮动图上为我的一个数据系列使用不同的符号，因为它的规模比其他数据大得多。我使用这个例子作为参考：[http ://www.flotcharts.org/flot/examples/symbols/index.html](http://www.flotcharts.org/flot/examples/symbols/index.html)

这是我到目前为止所拥有的：

我的包括：

```
<script  type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.flot.js"></script>
<script type="text/javascript" src="jquery.flot.symbol.js"></script> 
```

然后我像这样配置我的浮动选项：

```
var options = {
        grid: {hoverable : true},
        xaxis: { mode: "time", timeformat: "%H:%M", tickLength: 1},
        series: { points : { show: true } }
        }; 
```

然后我实际绘制数据：

```
 $.plot('#placeholder', [{
               data: my_data,
               lines: { show : true},
               points: { symbol: "square"},
               color: '#CB4B4B',
               label: 'My Data'
               }], options);
        } 
```

但是，`flot`仍将点绘制为默认圆。我在 firebug 中没有收到错误消息，我什至尝试在`jquery.flot.symbol.js`库本身中添加一条日志消息，以查看“square”处理程序是否被这样调用：

```
var handlers = {
            square: function (ctx, x, y, radius, shadow) {
                console.log("Square handler was called");
                // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2
                var size = radius * Math.sqrt(Math.PI) / 2;
                ctx.rect(x - size, y - size, size + size, size + size);
            }, 
```

我没有收到控制台消息，所以我假设处理程序没有被正确调用。我在这里错过了什么吗？

**编辑：**

我试图绘制的数据示例：

```
var d1 = [
[1364342400000, 208],
[1364346000000, 107],
[1364353200000, 42],
[1364371200000, 1680],
[1364360400000, 52],
[1364349600000, 67],
[1364385600000, 1118],
[1364367600000, 163],
[1364382000000, 1359],
[1364378400000, 1468],
[1364389200000, 1023],
[1364356800000, 63],
[1364374800000, 1601],
[1364392800000, 556],
[1364364000000, 84],
],
d2 = [
[1364342400000, 86],
[1364346000000, 42],
[1364353200000, 13],
[1364371200000, 458],
[1364360400000, 10],
[1364349600000, 22],
[1364385600000, 453],
[1364367600000, 45],
[1364382000000, 369],
[1364378400000, 379],
[1364389200000, 358],
[1364356800000, 17],
[1364374800000, 471],
[1364392800000, 147],
[1364364000000, 16],
],
d3 = [
[1364342400000, 7],
[1364346000000, 5],
[1364382000000, 11709],
[1364371200000, 58336],
[1364360400000, 1],
[1364349600000, 1],
[1364367600000, 2],
[1364389200000, 1191],
[1364378400000, 9085],
[1364385600000, 4688],
[1364374800000, 9386],
[1364392800000, 1140],
[1364364000000, 1],
]; 
```

我还编辑了我的`options`参数以及绘图函数的调用方式：

```
var options = {
grid: {hoverable : true},
xaxis: { mode: "time", timeformat: "%H:%M", tickLength: 1}
}; 

 $.plot("#placeholder", [{
data: d1,
lines: { show : true },
points: { show: true},
color: '#EDC240',
label: "d1"
}, {
data: d2,
lines: { show : true },
points: { show : true},
color: '#AFD8F8',
label: "d2"
}, {
data: d3,
yaxis: 2,
lines: { show : true},
points: { show: true, symbol: "square"},
color: '#CB4B4B',
label: "d3"
}], options); 
```

我也确定该`symbol`库已包含在内，因为我已将一些日志记录添加到该库中，并且显示效果很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:58:39.413

我认为你所做的没有问题。我在这里做了一个快速的工作示例：http: [//jsfiddle.net/ryleyb/shLtU/1/](http://jsfiddle.net/ryleyb/shLtU/1/)

我猜你没有包含符号库（即使你说你有）。

或者显示您的数据，可能存在某种问题（值得怀疑？）。

这是`flot`我为制作一个工作示例而运行的完整代码（加上包括 flot 和符号库）：

```
$.plot('#placeholder', [{
    data: [
        [1, 1],
        [2, 3],
        [4, 4],
        [5, 9]
    ],
    lines: {
        show: true
    },
    points: {
        show: true,
        symbol: "square"
    },
    color: '#CB4B4B',
    label: 'My Data'
}]); 
```

# c# - 邮件中的 HTML 标记

> ID：15662667
> 
> 赞同：0
> 
> 时间：2013-03-27T15:25:52.643
> 
> 标签：c#, html, email, smtp, markup

```
private void button1_Click(object sender, EventArgs e)
{
    if (check() == true)  // True: sends mail
    {
        try
        {
            // Mailmessage wordt gedeclareerd (hiermee kan je mails sturen)
            MailMessage mail = new MailMessage(); 
            // SMTP server van GMAIL wordt hier aangegeven
            SmtpClient smtpali = new SmtpClient("smtp.gmail.com");                

            mail.From = new MailAddress("xxxxxx@gmail.com");
            mail.To.Add("xxxxxx@gmail.com");
            mail.Subject = "Test Mail";
            mail.Body = "Beste gebruiker";
            smtpali.Port = 587;
            smtpali.Credentials = new NetworkCredential("user", "xxxxxxx");
            smtpali.EnableSsl = true;
            smtpali.Send(mail);
            MessageBox.Show("Mail is verzonden!");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }
    else
    {
        MessageBox.Show("Verkeerde combinatie!");
    }
} 
```

大家好。我在 C# 中创建了一个登录系统，并刚刚完成了“重新发送密码”表单。此表单使用他的密码（简单明了）向用户发送一封邮件。我想知道，我可以通过什么方式在正文中使用 HTML 标记：

```
mail.Body = "content here" 
```

我尝试使用：

```
mail.Body = "<h1>content here</h1>" 
```

...等等，但这当然是纯文本。对我的案子有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:27:39.793

设置[`MailMessage.IsBodyHtml`](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml.aspx)为真。

```
mail.IsBodyHtml = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:27:48.277

您应该将[IsBodyHtml](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml.aspx)设置为 true 才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:30:50.803

尝试`mail.IsBodyHtml = true;`在您的代码中使用

# sql - 使用合并后是否需要删除表？在我合并的表上运行 select top 1000 查询时出错

> ID：15662673
> 
> 赞同：0
> 
> 时间：2013-03-27T15:26:09.187
> 
> 标签：sql, sql-server

我更改了我的存储过程以使用 Merge，这样我就可以在它们不存在时插入条目，或者在我存在时更新它们。

运行以下脚本后，我可以查看我的表，我是否需要删除合并表或结束它或其他什么？

当我运行选择前 1000 个查询时，它只是挂起。

下面的 SQL 中是否存在会导致此错误的内容？

```
ALTER PROCEDURE [Suppliers].[ProductPropertyInsert]
@ProductId int
,@PropertyId int
,@PropertyValue nvarchar(50)

AS

BEGIN   
    SET NOCOUNT ON;

    MERGE Suppliers.ProductProperties AS target
    USING (SELECT @ProductId, @PropertyId) AS source (ProdId, PropId)
    ON (target.ProductId = source.ProdId)
    WHEN MATCHED THEN 
        UPDATE SET PropertyValue = @PropertyValue
    WHEN NOT MATCHED THEN    
        INSERT (ProductId, PropertyId, PropertyValue)
        VALUES (@ProductId, @PropertyId, @PropertyValue);

    INSERT INTO Suppliers.ProductProperties (ProductId, PropertyId, PropertyValue)
    VALUES(@ProductId, @PropertyId, @PropertyValue)

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:35:45.643

没有使用过 MERGE，但我也想知道它是如何工作的。看起来应该将参数合并到 MERGE 中。遵循[MSDN 中的示例 A](http://msdn.microsoft.com/en-us/library/bb510625.aspx)，看起来您应该能够编写：

```
MERGE Suppliers.ProductProperties AS target
USING (SELECT @ProductId, @PropertyId, @PropertyValue) AS source (ProdId, PropId, PropVal)
ON (target.ProductId = source.ProdId)
WHEN MATCHED THEN 
    UPDATE SET PropertyValue = source.PropVal
WHEN NOT MATCHED THEN    
    INSERT (ProductId, PropertyId, PropertyValue)
    VALUES (source.ProdId, source.PropId, source.PropVal); 
```

我猜你第一次通过时留下了额外的 INSERT 吗？它不是 MERGE 的一部分。

```
INSERT INTO Suppliers.ProductProperties (ProductId, PropertyId, PropertyValue)
VALUES(@ProductId, @PropertyId, @PropertyValue) 
```

所以我会省略第二个 INSERT。不过，我看不出您的代码应该锁定 Suppliers.ProductProperties 表的任何原因。这应该为您提供记录计数：

从 Suppliers.ProductProperties 中选择 COUNT(1)

看看这是否有帮助。

# c++ - 为什么 std::getline 在使用 operator>> 两次后会失败？

> ID：15662675
> 
> 赞同：3
> 
> 时间：2013-03-27T15:26:15.143
> 
> 标签：c++, operators, getline, extraction

我有给定的输入：

```
 local
 127.0.0.1 localhost
 other
 next 
```

使用下面的代码，输出是我期望**其他**的空白。输出是“输出：”

```
#include <iostream>
using namespace std;

int main() {
    std::string ip, domain, header;
    std::getline(cin, header);
    cin >> ip >> domain;
    std::getline(cin, header);
    std::cout << "output: " << header;
} 
```

但是，我注意到`cin >> ip >> domain;`在调用之前提取两次 ( )时会出现此问题`std::getline`。如果我有`cin >> ip`. 为什么我在使用 double extract( `operator>>`) with时会看到这个奇怪的结果`std::getline`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:31:37.917

Stream提取在它提取的数据*之前*`operator>>`的空白，而不是之后。这意味着它将“localhost”提取到中，但在流中跟随换行符。然后只读取这个换行符。*`domain``getline()`*

# charts - 图表的动态数据范围参考

> ID：15662680
> 
> 赞同：1
> 
> 时间：2013-03-27T15:26:18.943
> 
> 标签：charts, openoffice-calc

我有一个用于跟踪某些数据的 OpenOffice Calc 电子表格。我有三个由数据制成的图表。我会定期向电子表格添加更多数据。我目前将其传播到图表的方法是手动更改每个图表的数据范围。我想自动执行此操作，或者至少不必分别冗余更改每个图表。

我目前的想法是为保存当前最后一行`$A$1:$A{$F$1}`的范围做一些事情。`$F$1`不幸的是，OpenOffice 不承认这一点，但我认为可能有一个功能或解决方法。我还没有找到一个。

那么，有没有办法执行我的想法，或者可能是更好的方法呢？

有一个与此非常相似的问题，但提问者要求更多功能，答案是使用电子表格以外的东西。从未回答过此特定功能是否可行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-12T20:39:34.547

还：

第一种方法是向下扩展图形范围，留出大量空白空间。第二种方法是在图表中只包含一行额外的数据，当您添加数据时，始终将其插入该行上方。

# java - 如何在 Android 中运行时调整位图的大小

> ID：15662681
> 
> 赞同：0
> 
> 时间：2013-03-27T15:26:22.630
> 
> 标签：java, android, imageview, surfaceview

我有一个`Panel`类，它扩展了`SurfaceView`. 面板填满了我的整个活动。在面板内，我画了一个球 - 位图（和其他一些东西（线条/正方形））。

我添加了一些伪深度。像 2.5 D 的东西，不是真正的 3D，但有点像。但是现在我面临一个问题，当球进入深度时，我不知道如何调整它的大小。因为球不断地来回移动（左/右，上/下）。

我不知道在哪里阅读它，但我认为如果我将 Bitmap 添加到 an `ImageView`，这将解决我所有的问题。

我的第一个问题，这甚至可以解决我的问题吗？如果没有，我还能如何解决它。

我的第二个问题是，如何`Imageview`在 a 上添加一个`SurfaceView`？

我在这里找到了一些很好的提示：[将 ImageView 实现到 SurfaceView](https://stackoverflow.com/questions/9285509/implement-a-imageview-to-a-surfaceview) 但它只说明要做什么，而不是如何去做。因为在我的活动中什么都没有发生。一切都发生在我的`Panel`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:08:39.783

我认为我的一个问题的答案可能会对您有所帮助：[Unable to draw on top of a custom SurfaceView class](https://stackoverflow.com/questions/15390948/unable-to-draw-on-top-of-a-custom-surfaceview-class)。不可能将 ImageView 添加到 SurfaceView 中，因为 SurfaceView 不扩展 ViewGroup 类，但正如该答案所示，在 SurfaceView 上绘制很简单。

在那个问题中，我有一个名为 DrawOnTop 的自定义视图，它直接从 View 继承，并且我在该视图的画布上绘制了调整大小和旋转的位图，没有任何问题。我的猜测是你将能够对你的球对象做同样的事情。我使用的代码如下：

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.bitmap);
int bitmapOrg_width = bitmapOrg.getWidth();
int bitmapOrg_height = bitmapOrg.getHeight();

float bitmapScaleFactor = 1.5;   // to create a resized bitmap 50% bigger
float angle = 90;                // to rotate by 90 degrees

Matrix matrix = new Matrix();
// resize the bit map
matrix.postScale(bitmapScaleFactor, bitmapScaleFactor);
// rotate the Bitmap
matrix.postRotate(angle);
// create the resized bitmap
Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0, bitmapOrg_width, bitmapOrg_height, matrix, true);
canvas.drawBitmap(resizedBitmap, left, top, null); 
```

# html - IE10 锚标签 z-index 问题

> ID：15662687
> 
> 赞同：1
> 
> 时间：2013-03-27T15:26:35.693
> 
> 标签：html, css

在 IE 10 中，我有一个相对定位的包装 div，其中包含一些内容（图像/文本）。该 div 内部是一个绝对定位的锚标记，其定位为“覆盖”整个包装 div。它有一个 z-index 集。所以包装器 div 内的整个区域都应该是可点击的。但是，只有包装 div 中没有内容的区域是可点击的。整个包装器 div 在除 IE 10 之外的所有其他浏览器中都是可点击的。这是一个小提琴：http: [//jsfiddle.net/NUyhF/3/](http://jsfiddle.net/NUyhF/3/)。帮助？

```
<div class="wrapper">
    <div class="imgWrapper">
        <img src="http://www.google.com/images/srpr/logo4w.png" />
    </div>
    <p>Here is some text</p>
    <a href="#"></a>
</div>

.wrapper { position : relative; width: 500px; height: 300px; }
.wrapper a { position: absolute; top: 0px; width: 500px; height: 300px; z-index: 2; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:51:07.040

现在将块级元素包装在锚标记中在语义上是正确的（使用 html5 文档类型）。我建议修改你的标记。

**HTML**

```
<a href="#">
    <div class="imgWrapper">
        <img src="http://www.google.com/images/srpr/logo4w.png" />
    </div>
    <p>Here is some text</p>
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:36:22.920

一段时间以来，我发现这是 IE 的一个令人讨厌的特性，为了解决它，我必须制作一个透明图像并将其用作锚标签的背景：

```
background:url(transparent1x1.gif) repeat; 
```

[http://jsfiddle.net/NUyhF/6/](http://jsfiddle.net/NUyhF/6/)

# ruby-on-rails - 回形针返回不存在样式的 url

> ID：15662689
> 
> 赞同：0
> 
> 时间：2013-03-27T15:26:43.783
> 
> 标签：ruby-on-rails, paperclip

我在 Rails 模型中添加了回形针样式：

```
class Asset < ActiveRecord::Base

   has_attached_file :media,
                :styles => {:thumb => "100x100>"}
end 
```

上传的新资产具有适当的拇指样式，这将返回正确的 url：

```
asset = Asset.last
asset.media(:thumb) = correct_url 
```

但似乎即使不存在的样式也会返回一个 url：

```
asset = Asset.last
asset.media(:foobar) = some_url 
```

我正在向我的模型添加新样式，例如“大”，如果以前保存的模型实例不存在该样式，我希望它返回错误或空字符串。

如果实例不存在样式，如何让回形针返回空字符串？

```
asset = Asset.last #doesn't have style foobar
asset.media(:foobar) = ''   #or could return an error 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:50:19.560

我不确定我是否明白你到底想要什么。

如果您想在请求 JUST WRONG 样式的 url 时得到一个错误/空字符串（即开发人员拼写错误），那么您可以尝试以下操作。

默认情况下，它只是替换您在`has_attached_file`. 请参阅[插值](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/interpolations.rb)方法。

看起来可以使用选项更改此默认行为。您需要实现与`Paperclip::Interpolations`. 见`self.default_options` [这里](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/attachment.rb)。`:interpolator`是给你的。

另一方面，如果您想为特定附件的缺失样式获取空 url（即正确，但由于某种原因文件不存在 - 也许您只是添加了新样式），那么：

我猜这可能会影响性能（即使用文件系统甚至外部服务）。因此，对于通用用法不是一个好主意。

添加新样式时，您可能应该考虑运行 rake 任务。回形针已经`rake paperclip:missing_styles`（[在 github 上](https://github.com/thoughtbot/paperclip/blob/master/lib/tasks/paperclip.rake)）可以做到这一点。但这可能是一个运行时间很长的任务（例如，我的托管服务器在完成之前杀死了 rake 进程）。

如果性能对您来说不是问题，您可以再次制作自己的插值器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:10:28.003

> 如果实例不存在样式，如何让回形针返回空字符串？

在这种简单的情况下，设置`:default_url`为`""`应该可以工作：

```
class Asset < ActiveRecord::Base
  has_attached_file :media, :styles => {:thumb => "100x100>"}, :default_url => ""
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T11:52:36.337

我不认为 :default_url 会处理这种情况，我必须检查一下。但是当我真的需要知道一种风格是否存在时，我为你的案例所做的事情如下：

```
flavor = (Faraday.head(post.photo.url(:output)).status == 200) ? :output : :original
url = post.photo.url(flavor) 
```

它会下载您喜欢的文件，因此请记住这一点。这还假设您不想使用回形针 rake 任务重新处理所有现有附件。

# android - String.find 不适用于“。” （点）字符：corona SDK

> ID：15662691
> 
> 赞同：1
> 
> 时间：2013-03-27T15:26:50.053
> 
> 标签：android, string, character, coronasdk

我正面临电晕 SDK 的问题。

当我在`.`字符串中搜索索引时，它总是返回`1`（即使字符串不包含`.`）。我无法弄清楚真正的问题是什么。我的代码如下：

```
 local myString = "123.456"
 local dotIndex = string.find(myString, ".");
 print(dotIndex ) -- always returns 1 even if myString  dosen't contains a '.' 
```

我在某个地方错了吗？任何建议都是可观的...谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:22:57.910

`find()`使用模式语法。一个点代表“任何字符”。这将匹配您搜索的任何字符串的第一个字符。为了搜索文字点，您需要这样做：

```
local dotIndex = string.find(myString, "%."); 
```

[这是模式文档。](http://developer.coronalabs.com/content/strings#Patterns)

# php - 会话不工作 - PHP

> ID：15662692
> 
> 赞同：1
> 
> 时间：2013-03-27T15:26:57.197
> 
> 标签：php, session

我在 PHP 中的会话有一些问题。以前，我有一个网站，而不是我正在改进布局。我认为这很容易，但很多事情都改变了。例如：在我声明一个类似的变量`$Variable = $_SESSION['test'];`并且工作正常之前，即使没有带有 issets 的条件。现在，它说没有声明变量。

好吧，这只是为了提供信息。我的问题是登录会话。我正在尝试创建一个函数来验证用户是否已登录（如果没有，用户将是“匿名的”。

这是使用户登录的 .php 文件。它适用于 JQuery 脚本，只是为了不刷新页面。

```
<?php
session_start();

include_once ($_SERVER['DOCUMENT_ROOT'] . '/inclusoes/Conexao.php');
include_once ($_SERVER['DOCUMENT_ROOT'] . '/classes/Funcoes.php');
$Funcoes = new Funcoes();

$Login = $_POST['dado_login'];
$Senha = $_POST['dado_senha'];
$Mensagem = array();

if (empty($_POST['dado_login']))
  $Mensagem[] = "<img src='../imgs/Error.png'><span style='color: red; font-weight: bold;'> Please, enter username.</span>";

elseif (empty($_POST['dado_senha']))
  $Mensagem[] = "<img src='../imgs/Error.png'><span style='color: red; font-weight: bold;'> Please, enter password.</span>";

$countError = count($Mensagem);

    if($countError > 0)
    {
        for($i=0;$i<$countError;$i++)
          /*echo ucwords($Mensagem[$i]) . ' ';*/
          echo $Mensagem[$i];
    }
    else
    {
      $Query = "SELECT id_usuario, nick, senha FROM usuarios WHERE nick = '$Login' && senha = '$Senha'";
//        $LoginCorreto = mysql_query($Query, $conexao) or die (mysql_error());
      $LoginCorreto = $Funcoes->MySQLError($Query, $conexao);
      $ChecarUsuario = mysql_num_rows($LoginCorreto);

        if ($ChecarUsuario > 0)
        {
          $_SESSION["sessionUsuario"] = $Login;
          echo 'Correct';
        }
        else
        {
          echo "<img src='../imgs/Error.png'><span style='color: red; font-weight: bold;'> Login failed. Please, try again.</span>";
        }
    }
?> 
```

这里是函数，很简单。

```
 function isLogado()
{
    if (!isset($_SESSION['usuarioSession']))
      return false;
    else
      return true;
} 
```

这就是我正在做的

```
include ('functions.php');
$Funcoes = new Funcoes();

if (!$Funcoes->isLogado)
  *show the login form*
else
  *welcome, User!* 
```

会话始终为空，或未设置。如果您“回显”会话，它将不会显示任何内容。在我只是写作之前`$Variable = $_SESSION['test']`没有发生错误，从来没有。

如何解决？先谢谢了。

# oauth - 多重身份+单点登录安全

> ID：15662699
> 
> 赞同：1
> 
> 时间：2013-03-27T15:27:13.040
> 
> 标签：oauth, single-sign-on

这是一个理论问题。

假设我有一个带有电子邮件地址的 Twitter、Facebook、G+、Instagram 帐户`bill@example.com`，现在我想设计一个 Web 应用程序，允许用户使用他们的 Twitter、Facebook、G+、Instagram 帐户或标准注册表单登录到应用程序.

**我的用户的唯一标识符是他们的电子邮件地址。**

现在假设我已经有一个通过电子邮件注册的帐户，`bill@example.com`我应该如何设计机制以允许我链接我的 Twitter、Facebook、G+、Instagram 帐户？

**方法一**

要求用户先登录，然后连接到他们的其他帐户。

临：

*   安全的

缺点：

*   可能会很痛苦，如果用户忘记了他们的用户名和密码怎么办？

**方法二**

假设第三方 oauth 提供商确认电子邮件，只需将第三方帐户与现有帐户（在我的应用程序中）与第三方提供的现有电子邮件相关联。

临：

*   简单，简单

缺点：

*   安全？

**问题**

如何确保`bill@example.com`来自 Facebook 的内容与`bill@example.com`来自 G+ 的内容相同？还是没有简单/用户友好的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:58:00.353

您不能假设他们用于创建您的帐户的电子邮件与他们用于创建 Twitter 或 Facebook 帐户的电子邮件相同。此外，twitter 不会返回与用户帐户关联的电子邮件地址。解决方案 1 确实是您唯一的选择。

# facebook - 使用 rest fb api 通过 facebook 应用程序发送通知

> ID：15662703
> 
> 赞同：1
> 
> 时间：2013-03-27T15:27:14.307
> 
> 标签：facebook, facebook-graph-api, notifications, restfb

我正在尝试使用 restfb api 通过 facebook 应用程序向 facebook 用户发送通知。尝试发布此类通知时，它显示异常

```
"com.restfb.exception.FacebookGraphException: Received Facebook error response of type 
GraphMethodException: Unsupported post request". 
```

下面是我的代码：

```
FacebookType = facebookAppAccessToken.publish("user_id/notification?access_token=app_access_token"), 
FacebookType.class, Parameter.with("template","send_notification"), 
Parameter.with("href,"sample_link")); 
```

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T04:06:32.440

```
public void sendNotification(String externalUserId, String message) {
    AccessToken appAccessToken = new DefaultFacebookClient()
            .obtainAppAccessToken(APP_KEY, APP_SECRET);
    FacebookClient facebookClient = new DefaultFacebookClient(
            appAccessToken.getAccessToken());
    try {
        facebookClient.publish(externalUserId
                + "/notifications", FacebookType.class,
                Parameter.with("template", message));
    } catch (FacebookOAuthException e) {
        if (e.getErrorCode() == 200) {
            //Not an app user
        } else if (e.getErrorCode() == 100) {
            //Message cannot be longer than 180 characters
        }
    }
} 
```

适当处理错误代码。您可以根据需要添加 href 和 ref 。 [以下](https://developers.facebook.com/docs/games/notifications/#impl)是参数的详细信息。

# ckeditor - CKEDITOR 4.1：如何捕获新的 p 元素？

> ID：15662704
> 
> 赞同：0
> 
> 时间：2013-03-27T15:27:17.613
> 
> 标签：ckeditor

我对 CKEDITOR 还是很陌生。

每当创建新的 p 元素时，是否有事件或方法可以得到通知？

p 元素在用户按下回车时创建。

我将需要访问该 p 元素，以便我可以插入自定义标签。

CKEDITOR 版本是 4.1。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:03:15.707

没有办法做到这一点（几乎，但我认为我们是理智的）。[但是，您可以通过使用dataProcessor](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Data_Processor) ( )从编辑器获取数据时轻松地将任何内容附加到您的 DOM 结构中`editor.dataProcessor.htmlFilter.addRules()`。

查看一些代码（[sample#1](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/htmlwriter/samples/outputforflash.html#L175-L228)、[sample#2](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/htmlwriter/samples/outputhtml.html#L160-L209)）来了解这个想法。您也可以修改元素的子元素。

# c# - 在 Windows Phone 8 Bing 地图上设置图钉 (XAML C#)

> ID：15662707
> 
> 赞同：5
> 
> 时间：2013-03-27T15:27:31.133
> 
> 标签：c#, xaml, windows-phone-8, bing-maps, pushpin

我正在尝试为 Windows Phone 8 构建一个简单的示例应用程序。我想在我的 MainPage.xaml 上创建一个 Bing 地图，以点 (37.227700, -80422037) 为中心，并且已经在地图上填充了图钉（不是用户添加的，只是我根据我目前硬编码的一些动态数据预填充的特定位置的标记）。当我运行我的代码时，它会转到页面并加载地图，但没有显示任何图钉。此外，尽管我在 xaml 中设置了 ZoomLevel 属性，但地图根本没有放大。我是这种编码范式的新手，所以一定有我遗漏的东西。这是我在 xaml 和 c# 文件中的内容：

MainPage.xaml.cs（只显示了构造函数，但为了简单起见，我没有其他方法）（您可以看到注释掉的部分，我尝试了多种方法，但都没有奏效）

```
public MainPage()
    {
        InitializeComponent();
        Map myMap = new Map();
        MapLayer layer0 = new MapLayer();

        Pushpin pushpin0 = new Pushpin();
        //Pushpin pushpin0 = (Pushpin)this.FindName("pushpin0");
        //Pushpin pushpin0 = MapExtensions.GetChildren(myMap).OfType<Pushpin>().First(p => p.Name == "pushpin0");
        //if (pushpin0 == null) { pushpin0 = new Pushpin(); }
        pushpin0.GeoCoordinate = new GeoCoordinate(37.228510, -80.422860);
        MapOverlay overlay0 = new MapOverlay();
        overlay0.Content = pushpin0;
        overlay0.GeoCoordinate = new GeoCoordinate(37.228510, -80.422860);
        layer0.Add(overlay0);

        Pushpin pushpin1 = new Pushpin();
        pushpin1.GeoCoordinate = new GeoCoordinate(37.226399, -80.425271);
        MapOverlay overlay1 = new MapOverlay();
        overlay1.Content = pushpin1;
        layer0.Add(overlay1); 
        Pushpin pushpin2 = new Pushpin();
        pushpin2.GeoCoordinate = new GeoCoordinate(37.228900, -80.427450);
        MapOverlay overlay2 = new MapOverlay();
        overlay2.Content = pushpin2;
        layer0.Add(overlay2);

        ContentPanel.Children.Add(myMap);
    } 
```

主页.xaml

```
<phone:PhoneApplicationPage
x:Class="SimpleApp.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True"
xmlns:Controls="clr-namespace:Microsoft.Phone.Maps.Controls;assembly=Microsoft.Phone.Maps"
xmlns:toolkit="clr-namespace:Microsoft.Phone.Maps.Toolkit;assembly=Microsoft.Phone.Controls.Toolkit">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock Text="Simple Map Application with Pushpins" Style="{StaticResource PhoneTextNormalStyle}" Margin="12,0"/>
        <TextBlock Text="Pushpins" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Controls:Map x:Name="myMap" ZoomLevel="17" Center="37.227700, -80.422037" CartographicMode="Road">
            <toolkit:MapExtensions.Children>
                <toolkit:Pushpin x:Name="pushpin0" Content="My Position"/>
                <toolkit:Pushpin x:Name="pushpin1" Content="My Position"/>
                <toolkit:Pushpin x:Name="pushpin2" Content="My Position"/>
            </toolkit:MapExtensions.Children>
        </Controls:Map>
    </Grid>  

</Grid>

</phone:PhoneApplicationPage> 
```

实际上还有更多的引脚要添加，但我假设如果我只有几个可以工作，添加更多类似的将是微不足道的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:48:11.770

您遇到的最大问题是您创建了第二个 Map 控件并将其显示在第一个之上。

您创建的那个没有 ZoomLevel 和 Center 集。

您还没有将带有图钉的图层添加到地图中。

让您了解正在发生的事情的最快方法是将构造函数更改为以下内容：

```
public MainPage()
{
    InitializeComponent();
    //Map myMap = new Map(); // You shouldn't do this as you already have a map on the page
    MapLayer layer0 = new MapLayer();

    Pushpin pushpin0 = new Pushpin();
    //Pushpin pushpin0 = (Pushpin)this.FindName("pushpin0");
    //Pushpin pushpin0 = MapExtensions.GetChildren(myMap).OfType<Pushpin>().First(p => p.Name == "pushpin0");
    //if (pushpin0 == null) { pushpin0 = new Pushpin(); }
    pushpin0.GeoCoordinate = new GeoCoordinate(37.228510, -80.422860);
    MapOverlay overlay0 = new MapOverlay();
    overlay0.Content = pushpin0;
    overlay0.GeoCoordinate = new GeoCoordinate(37.228510, -80.422860);
    layer0.Add(overlay0);

    Pushpin pushpin1 = new Pushpin();
    pushpin1.GeoCoordinate = new GeoCoordinate(37.226399, -80.425271);
    MapOverlay overlay1 = new MapOverlay();
    overlay1.Content = pushpin1;
    layer0.Add(overlay1);
    Pushpin pushpin2 = new Pushpin();
    pushpin2.GeoCoordinate = new GeoCoordinate(37.228900, -80.427450);
    MapOverlay overlay2 = new MapOverlay();
    overlay2.Content = pushpin2;
    layer0.Add(overlay2);

    // Add the layer with the pins in to the map
    myMap.Layers.Add(layer0);
    //ContentPanel.Children.Add(myMap);
} 
```

然后，您可以删除您在 XAML 中定义的引脚。

# algorithm - 分而治之——为什么有效？

> ID：15662719
> 
> 赞同：5
> 
> 时间：2013-03-27T15:27:53.230
> 
> 标签：algorithm, complexity-theory, big-o, divide-and-conquer

我知道像mergesort和quicksort这样的算法使用分而治之的范式，但我想知道为什么它可以降低时间复杂度......

为什么通常“分而治之”的算法比非分而治之的算法效果更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:30:58.973

分而治之的算法工作得更快，因为它们最终做的工作更少。

考虑一下二分搜索的经典分治算法：二分搜索不是通过查看`N`项目来找到答案，而是最终只检查`Log2N`它们。自然，当你做的工作越少，你就能完成得越快；这正是分治算法正在发生的事情。

当然，结果很大程度上取决于您的策略在划分工作方面的效果：如果划分在每一步都或多或少公平（即您将工作分成两半），那么您将获得完美的`Log2N`速度。但是，如果划分不完美（例如快速排序的最坏情况，当它花费`O(n^2)`对数组进行排序时，因为它在每次迭代中只消除了一个元素），那么分而治之的策略就没有帮助，因为您的算法没有减少工作量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:29:34.423

分而治之的算法不会“通常工作得更好”。它们只是工作，就像其他非分而治之的算法一样。它们不会降低排序复杂性，它们与其他算法一样好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:41:58.840

分而治之的工作，因为数学支持它！

考虑一些分而治之的算法：

**1）二分搜索：**该算法每次将您的输入空间减少一半。很明显，这比线性搜索要好，因为我们会避免查看很多元素。

但是好到什么程度呢？我们得到重现（注意：这是最坏情况分析的重现）：

`T(n) = T(n/2) + O(1)`

数学暗示`T(n) = Theta(log n)`. 因此，这比线性搜索要好得多。

**2）合并排序：**这里我们分成（几乎）相等的两半，对两半进行排序然后合并。为什么这应该比二次方更好？这是复发：

`T(n) = 2T(n/2) + O(n)`

可以用数学方法证明（比如使用主定理）`T(n) = Theta(n log n)`。因此，T(n) 渐近优于二次。

观察到*天真*的快速排序最终给了我们最坏情况下的递归

`T(n) = T(n-1) + O(n)`

从数学上讲，它是二次的，在最坏的情况下，并不比冒泡排序好（渐近地说）。但是，我们可以证明，在平均情况下，快速排序是 O(n log n)。

**3 选择算法**：这是一种分治算法，用于找到第 k 个最大的元素。这个算法是否比排序更好（甚至它不是二次的）并不明显。

但从数学上讲，它的重现（同样是最坏的情况）结果是

`T(n) = T(n/5) + T(7n/10 + 6) + O(n)`

可以用数学方法证明`T(n) = O(n)`，因此它比排序更好。

**也许是一种常见的看待它们的方式：**

您可以将算法视为树，其中每个子问题都成为当前的子树，并且可以用完成的工作量标记节点，然后可以为每个节点添加总工作量。

对于二分查找，work是O(1)（只是比较），其中一个子树，work是0，所以总的work是O(log n)（本质上是一条路径，就像我们在二叉搜索树中做）。

对于合并排序，对于具有 k 个子节点的节点，工作量为 O(k)（合并步骤）。每个级别完成的工作是 O(n) (n, n/2 + n/2, n/4 + n/4 + n/4 + n/4 等)，并且有 O(log n) 个级别，并且所以归并排序是 O(n log n)。

对于快速排序，在最坏的情况下，二叉树实际上是一个链表，所以完成的工作是 n+n-1 + ... + 1 = Omega(n^2)。

对于选择排序，我不知道如何将其可视化，但我相信将其视为具有 3 个孩子（n/5、7n/10 和其余）的树可能仍然有帮助。

# android - ViewPager - 从活动更新片段

> ID：15662721
> 
> 赞同：1
> 
> 时间：2013-03-27T15:27:58.430
> 
> 标签：android, android-activity, android-viewpager, fragment

我有一个带有 3 个片段的 ViewPager。一个片段从网站下载数据并将其显示在 TextViews 中。现在，当用户在 MainActivity 的菜单中单击“刷新”项时，片段应该重新下载数据并显示它。我试图在片段的类中创建一个函数刷新并从 MainActivity 的菜单中调用它。这行得通，但随后它崩溃了，因为应用程序找不到文本视图。变量视图为空，并导致空指针异常。

我能做些什么来解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:32:32.747

从您的片段活动中，

```
Fragment tehFraggerz = getSupportFragmentManager().findFragmentByTag(string); 
```

其中字符串是标签。您在添加、替换等方法中设置片段的标签。

一旦你有了你的片段，你可以做

```
TextView tehTexterz = (TextView) tehFraggerz.getView().findViewById(R.id.tehText); 
```

# php - 我如何将星级评分的值存储在mysql数据库中

> ID：15662722
> 
> 赞同：0
> 
> 时间：2013-03-27T15:27:58.823
> 
> 标签：php, html, mysql, css

嗨，我有包含评级、姓名、电子邮件和评论的表格。我能够为姓名、电子邮件和评论插入用户输入数据。但不知道如何将星级评分存储在数据库中。任何人请帮助我。谢谢

```
 <?php
if(isset($_POST['submit']))
{

$name = $_POST['name'];
$email = $_POST['email'];
$comments = $_POST['comments'];
$ratings = $_POST['ratings'];
$link = mysqli_connect("localhost", "root", "", "imakr");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$res = mysqli_query($link, "insert into imakr.customer_review(name, email, comments, ratings) values('$name','$email','$comments', '$ratings')");

    if($res)
    {
        echo "Your feedback is saved";
    }
    else
    {
        echo " OOPs!! there is some error. Please check the fields";
    }

}
?>

<form id="customer_review" name="cust_rev"action="" method="post" onsubmit="return validate()">
  <table width="535" border="0">
    <tr>
      <td>Rate This Product:
      </td>
      <td>
      <span id="rateStatus">Rate Me...</span>
<span id="ratingSaved">Rating Saved!</span> 

<div id="rateMe" title="Rate Me...">
    <a onclick="rateIt(this)" id="_1" title="Poor" onmouseover="rating(this)" onmouseout="off(this)"><span class="ratings">1</span></a>
    <a onclick="rateIt(this)" id="_2" title="Not Bad" onmouseover="rating(this)" onmouseout="off(this)"><span class="ratings">2</span></a>
    <a onclick="rateIt(this)" id="_3" title="Pretty Good" onmouseover="rating(this)" onmouseout="off(this)"><span class="ratings">3</span></a>
    <a onclick="rateIt(this)" id="_4" title="Excellent" onmouseover="rating(this)" onmouseout="off(this)"><span class="ratings">4</span></a>
    <a onclick="rateIt(this)" id="_5" title="Marvellous" onmouseover="rating(this)" onmouseout="off(this)"><span class="ratings">5</span></a>
</div>
      </td>
    </tr>
    <tr>
      <td width="129"><span class="titles">Name</span><span class="star">*</span>:</td>
      <td width="396"><label for="name"></label>
      <input type="text" name="name" id="name" /></td>
    </tr>
    <tr>
      <td><span class="titles">Email</span><span class="star">*</span>:</td>
      <td><label for="email"></label>
      <input type="text" name="email" id="email" /></td>
    </tr>
    <tr>
      <td height="61">Comments:</td>
      <td><label for="comments"></label>
      <textarea name="comments" id="comments" cols="45" rows="5" onchange="maxlength('comments', 500)"></textarea></td>
    </tr>

    <tr>
      <td>&nbsp;</td>
      <td><input type="submit" name="submit" id="submit" value="Submit" /></td>
    </tr>
  </table>
  <p>&nbsp;</p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:39:03.663

1.  选择一种数据类型，如果您只存储整数评级，[例如：3/5 星]，然后使用`TINYINT`. 如果您要存储星的分数，[例如：3.5/5 星]，然后使用`DECIMAL(2,1)`.
2.  存储一些关于用户的识别信息，以防止多次评级。如果用户无需登录即可对某项内容进行评分，则将其 IP 地址与评分一起存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:35:16.730

创建一个名为 rating 的隐藏输入字段

```
<input id="ratings" type="hidden" name="ratings" value="" /> 
```

然后使用 Javascript 根据蜜蜂点击的评分值动态更新此输入的值。

类似于以下内容：

```
document.getElementById('ratings').value='4' 
```

或者，如果您不想在不提交表单的情况下动态执行此操作，那么您可以使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求将此信息提交到您的数据库。

作为一个非常重要的附注，在您继续之前，**请停止使用`mysql_*`**函数并开始使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。特别是查看带有绑定值的准备好的语句，除非您当然希望看到整个数据库被 SQL 注入删除。

# python - OpenCV 相机校准的均方根太高

> ID：15662723
> 
> 赞同：3
> 
> 时间：2013-03-27T15:27:59.137
> 
> 标签：python, opencv, camera-calibration

我正在尝试在 python 中使用 opencv cv2 校准我的单个网络摄像头。我正在使用 cv2.findChessboardCorners 和 cv2.calibrateCamera 函数。但是，我从 calibrateCamera 函数返回的均方根似乎非常高。无论使用多少带有找到板的框架，它总是在 50 左右。我读到好的值范围是 0-1。我在一张贴在木板上的纸上使用 5x8 黑白棋盘格图案。谁能帮我把这个降低？奇怪的是我使用了从 3D 建模软件 Blender 渲染的图像，其中没有镜头失真，并且板的坐标是肯定的，我能够获得 0.22 的 RMS，这很好。使用类似的代码虽然我无法用我的网络摄像头复制这些结果。也许我错过了一些东西。非常感谢所有看到这个的人。这是完整的代码：

```
import sys
import os
import numpy as np
import cv2
import time

'''
This module finds the intrinsic parameters of the camera. These parameters include
the focal length, pixel aspect ratio, image center, and lens distortion (see wiki
entry for "camera resectioning" for more detail). It is important to note that the
parameters found by this class are independent of location and rotation of the camera.
Thus, it only needs to be calculated once assuming the lens and focus of the camera is
unaltered. The location and rotation matrix are defined by the extrinsic parameters.
'''

class Find_Intrinsics:
    '''Finds the intrinsic parameters of the camera.'''
    def __init__(self):
        #Import user input from Blender in the form of argv's 
        self.rows = int(sys.argv[1])
        self.cols = int(sys.argv[2])
        self.board_width_pxls = float(sys.argv[3])
        self.pxls_per_sq_unit = float(sys.argv[4])
        self.printer_scale = float(sys.argv[5])

    def find_calib_grid_points(self,cols,rows,board_width_pxls,pxls_per_sq_unit,printer_scale):
        '''Defines the distance of the board squares from each other and scale them.

            The scaling is to correct for the scaling of the printer. Most printers
            cannot print all the way to the end of the page and thus scale images to
            fit the entire image. If the user does not desire to maintain real world
            scaling, then an arbitrary distance is set. The 3rd value appended to
            calib_points signifies the depth of the points and is always zero because
            they are planar. 
        '''
        #should be dist for each square
        point_dist = (((board_width_pxls)/(pxls_per_sq_unit))*printer_scale)/(cols+2)
        calib_points = []
        for i in range(0,cols):
            for j in range(0,rows):
                pointX = 0 + (point_dist*j)
                pointY = 0 - (point_dist*i)
                calib_points.append((pointX,pointY,0))    
        np_calib_points = np.array(calib_points,np.float32)
        return np_calib_points

    def main(self):
        print '---------------------------Finding Intrinsics----------------------------------'       
        np_calib_points = self.find_calib_grid_points(self.cols,self.rows,self.board_width_pxls,
                                                 self.pxls_per_sq_unit,self.printer_scale)
        pattern_size = (self.cols,self.rows)
        obj_points = []
        img_points = []        

        camera =  cv2.VideoCapture(0)
        found_count = 0
        while True:
            found_cam,img = camera.read()            
            h, w = img.shape[:2]
            print h,w
            gray_img = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
            found, corners = cv2.findChessboardCorners(img, pattern_size)            

            if found:            
                term = ( cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_COUNT, 30, 0.1 )
                cv2.cornerSubPix(gray_img, corners, (5, 5), (-1, -1), term)

                cv2.drawChessboardCorners(img, pattern_size, corners, found)
                found_count+=1

                img_points.append(corners.reshape(-1, 2))
                obj_points.append(np_calib_points)

            cv2.putText(img,'Boards found: '+str(found_count),(30,30), 
                cv2.FONT_HERSHEY_DUPLEX, 0.8,(0,0,255,1))
            cv2.putText(img,'Press any key when finished',(30,h-30), 
                cv2.FONT_HERSHEY_DUPLEX, 0.8,(0,0,255,1))
            cv2.imshow("webcam",img)

            if (cv2.waitKey (1000) != -1):
                cv2.destroyAllWindows()
                del(camera)
                np_obj_points = np.array(obj_points)
                print "Calibrating.Please be patient"
                start = time.clock()

                #OpenCV function to solve for camera matrix
                try:
                    print obj_points[0:10]
                    rms, camera_matrix, dist_coefs, rvecs, tvecs = cv2.calibrateCamera(obj_points, img_points, (w, h))
                    print "RMS:", rms
                    print "camera matrix:\n", camera_matrix
                    print "distortion coefficients: ", dist_coefs

                    #Save the camera matrix and the distortion coefficients to the hard drive to use
                    #to find the extrinsics
                    #want to use same file directory as this file
                    #directory = os.path.dirname(os.path.realpath('Find_Intrinsics.py'))
                    np.save('C:\\Users\\Owner\\Desktop\\3D_Scanning\\Blender_3d_Scanning\\camera_matrix.npy',camera_matrix)
                    np.save('C:\\Users\\Owner\\Desktop\\3D_Scanning\\Blender_3d_Scanning\\dist_coefs.npy',dist_coefs)    

                    elapsed = (time.clock() - start)
                    print("Elapsed time: ", elapsed, " seconds") 

                    img_undistort = cv2.undistort(img,camera_matrix,dist_coefs)
                    cv2.namedWindow('Undistorted Image',cv2.WINDOW_NORMAL)#WINDOW_NORMAL used bc WINDOW_AUTOSIZE does not let you resize
                    cv2.resizeWindow('Undistorted Image',w,h)
                    cv2.imshow('Undistorted Image',img_undistort)
                    cv2.waitKey(0)
                    cv2.destroyAllWindows()

                    break

                except:
                    print "\nSorry, an error has occurred. Make sure more than zero boards are found."
                    break

if __name__ == '__main__' and len(sys.argv)== 6:
    Intrinsics = Find_Intrinsics()
    Intrinsics_main = Intrinsics.main()
else:
    print "Incorrect number of args found. Make sure that the python27 filepath is entered correctly."
print '--------------------------------------------------------------------------------' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:38:03.843

哇，我不知道在 stackoverflow 上发布后立即拥有 aha 时刻（或者，doh！如果你看《辛普森一家》的时刻）是什么意思，哈哈。这是一个彻头彻尾的错误。我设法弄乱了 calibrateCamera 函数的 obj_points 参数的构造。OpenCV 将第一个点放在左上角，然后从左到右遍历每一**行**，直到到达最后一个点（右下角）。因此，我的 find_calib_grid_points 函数是错误的。这是正确的代码，以防其他人被绊倒，尽管这可能不太可能：

```
for j in range(0,rows):
            for i in range(0,cols):
                pointX = 0 + (point_dist*i)
                pointY = 0 - (point_dist*j)
                calib_points.append((pointX,pointY,0))    
        np_calib_points = np.array(calib_points,np.float32) 
```

感谢所有看到这个并向我发送通灵信息的人，所以我可以弄清楚这个哈哈。他们工作了！我的 RMS 是 0.33！

# php - 如何持续保持与当年硬件相关的 bcrypt 轮数？

> ID：15662729
> 
> 赞同：9
> 
> 时间：2013-03-27T15:28:09.450
> 
> 标签：php, security, passwords, bcrypt

我看到一个建议，将轮数设置为`($currentYear - 2000)`考虑摩尔定律，这样 2013 年将是`13`轮数，因此是`2^13`总迭代。当然，您需要考虑您自己的硬件以确保它不会花费太长时间（我认为`1 second`推荐用于检查密码/哈希值是“安全的”，并且在我当前的硬件上该标记周围有 13 轮）。

对于社交网络类型的网站，这听起来合理吗？或者我是否会在将来通过使用设置自己进行非常慢的密码检查`($currentYear - 2000)`？

另外，你如何处理从一年到下一年的轮数变化？更改轮数不会更改哈希值，因此不允许您在 2014 年检查 2013 年的哈希值，因为检查会使用额外的一轮？您是否必须每年重新计算每个哈希值，或者它是如何工作的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T16:19:18.130

首先，我质疑该建议（根据年份调整成本）。成本应基于硬件的速度，而不是当前日期。如果您从现在到 2015 年之间不升级您的服务器，则没有理由增加成本。你所做的只是放慢一个已经很慢的过程。

话虽如此，我也质疑 1 秒对于大多数用途的建议。如果您正在处理高度敏感的信息，则 1 秒（或更长）就可以了。但对于一般的网站，我通常建议在 0.25 到 0.5 秒之间。在某些情况下，你可以降低，但我不会没有充分的理由。

现在，问题本身。使用[`crypt()`](http://php.net/crypt)or[`password_hash()`](http://php.net/password_hash)时，迭代计数以返回哈希格式存储。事实上，盐也是如此。所以计算哈希所需的所有信息都包含在其中！

如果你没有使用这些 API（或我维护的 polyfill：[password-compat](https://github.com/ircmaxell/password_compat)），那么我真的想知道你为什么不使用。不要发明自己的密码加密。除非您有充分的理由（出于某些政府合规性原因，或与 PHP <= 5.2 的兼容性），否则不要使用使用本机哈希的库（如 phpass）。

一般认为 bcrypt 是当今最强的哈希格式。SCrypt 更强大，但它也存在一些问题，而且它仍然很新（而且它还没有在 PHP 核心中可用）。所以只需使用 bcrypt ...

该`password_hash()`api 有一个机制让你做你所要求的：[`password_needs_rehash()`](http://php.net/password_needs_rehash). 基本上，你传入散列，以及你今天使用的选项，它会告诉你是否需要重新散列：

```
if (password_verify($password, $hash)) {
    if (password_needs_rehash($hash, PASSWORD_BCRYPT, ['cost' => 14])) {
        $hash = password_hash($password);
        update_password_in_database($hash);
    }
    $loggedin = true;
} 
```

阅读[有关 password_hash() 的 RFC 以](https://wiki.php.net/rfc/password_hash)了解有关它的更多信息（我从大量来源收集数据，并在 RFC 中包含参考资料）。

# 编辑 - 跟进@AnotherParker 的评论：

> 犯罪分子不会因为您没有升级服务器而停止升级他们的破解盒。您确实需要随着时间的推移增加工作参数以阻止离线攻击。

有点真实。嗯，是的，但错过了我上面所说的重点。

散列函数的成本参数是时间和精力的权衡。您需要花费一些时间来为每个散列增加额外的工作量。在相同的硬件上，花更多的时间会产生更多的工作。产生更多工作的另一种方法是获得更快的硬件。

但建议是在您当前的硬件上测试散列函数，并使其尽可能昂贵。如果 0.5 秒是您今天所能承受的最大值，除非您升级服务器硬件，否则增加成本对您有何帮助？简而言之，它不会因为你会打破你已经确定的最重要的时间限制。

所以你不能在不增加服务器能力的情况下增加工作参数，除非你已经产生了弱散列。

另外，请查看[有关该主题的此答案](https://stackoverflow.com/questions/17234741/password-strength-checkers-that-take-into-account-moores-law/17234991#17234991)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T15:57:11.100

当您使用 bcrypt 时，轮数是生成的哈希的一部分：

```
crypt ( 'Password', '$2a$04$thisshallbemysalt' ); 
```

会导致类似

```
$2a$04$thisshallbemysalt.rAnd0ml0ok1ngch4rsh3re 
```

`2a`在第一个 $ 符号之后代表 bcrypt 算法，下一个`04`代表轮数 - 因此通过查看哈希，您可以看到创建它的轮数。

因此，当您决定是时候增加轮数时，您可以检查用户登录时用于生成存储哈希的轮数 - 如果不是您当前的轮数，您可以在那里重新哈希他们的密码并然后，将其保存为新哈希（当然，*在*检查他们的密码是否与现有哈希匹配之后;-)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T16:02:42.243

[密钥拉伸](http://en.wikipedia.org/wiki/Key_stretching)的想法是使暴力破解变得不可行，因为在每一轮计算散列需要攻击者系统上相同数量的额外时间。

如果需要 1 秒或 0.9 秒或 2.5 秒，这并不重要。这个想法是每秒暴力破解数百万个密码哈希是不可行的。这是重要的因素，而不是实际的轮数。

例如，如果您使用 SHA256 哈希，系统每秒可以执行 X（例如 1,000,000）次哈希。通过密钥拉伸（因此散列，例如，500 次），您可以将此系统降低到每个密码每秒 1,000,000 / 500 = 2,000 次尝试。您有效地将攻击者的速度减慢了 500 倍。如果您使用 750 回合，您……完全正确！使攻击者减速 750 倍。但是增加回合数也会影响您的系统/网站/应用程序，因此您不想“只是为了确定”而*太高；*用户会抱怨登录缓慢！

这源于这样一个事实，例如，SHA1/256/512、MD4/5 等*针对速度进行了优化*。你**不**想要的是速度优化算法，这样你就可以减慢攻击者的速度。因此，每隔几年，您只需将轮数增加一些因素，即您的用户的登录时间仍然可以接受，但它会减慢攻击者的速度，以至于不值得尝试暴力破解哈希（或至少迫使他们专注于更少的帐户而不是所有帐户）。

[正如CBroe 解释](https://stackoverflow.com/a/15663356/215042)的那样，当你增加轮数时，你会重新计算。

我不知道谁提出了 2 ^(($currentYear - 2000))推荐（~~我很想看到一个来源！~~没关系，[找到它](https://security.stackexchange.com/questions/17207/recommended-of-rounds-for-bcrypt)）但如果你问我这完全是公牛。我建议您更仔细地[阅读答案](https://security.stackexchange.com/questions/17207/recommended-of-rounds-for-bcrypt)并检查[此问题/答案](https://security.stackexchange.com/questions/3959/recommended-of-iterations-when-using-pkbdf2-sha256/3993#3993)。

如果你的 bcrypt 需要 0.2 到 0.5 秒（如果你问我，这是一个可以接受的“延迟”登录时），这意味着攻击者可以在相同硬件的情况下每秒暴力破解大约 5 到 2 个哈希值，如果他/她可能会大量投资 5,000/2,000 或 5,000,000/2,000,000。在可接受的时间（甚至生命周期）内暴力破解整个 160 位 (SHA1)、256 位 (SHA256) 甚至 448 位 (bcrypt) 空间仍然不可行。

# spring - 如何在spring restful中一起使用@Requestparam @RequestBody

> ID：15662742
> 
> 赞同：1
> 
> 时间：2013-03-27T15:28:45.183
> 
> 标签：spring, rest

如何在spring restful中一起使用@Requestparam @RequestBody

```
@RequestMapping(method = RequestMethod.POST, value = "/upate")
@ResponseBody
public ModelAndView availableCheck(
        @RequestParam("key") String key, @RequestBody User user)
        throws Exception {
    //handle
    //
} 
```

我想通过唯一键更新用户，所以我需要请求键参数和新的用户 json 对象。提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:35:45.663

有一些可能的错误：如果您返回 a`ModelAndView`那么您不太可能希望它成为 ResponseBody，因此请删除`@ResponseBody`。

* * *

另一个问题是 RespondeBody 用于字符串。这意味着将 Body 字符串放入此变量中。所以它`user`是由某种形式填充的命令对象，然后只需删除`@RequestBody`注释

```
@RequestMapping(method = RequestMethod.POST, value = "/upate")
public ModelAndView availableCheck(
        @RequestParam("key") String key, User user)
        throws Exception {
    //handle
    //
} 
```

# android - android ACRA crashreports：多个formKeys

> ID：15662744
> 
> 赞同：0
> 
> 时间：2013-03-27T15:28:47.130
> 
> 标签：android, acra

我有一个库项目和带有图像/teksts 等的不同子项目，它们使用这个库。我希望每个应用程序（子项目）都有自己的 crashreport formkey，但我只能在库的 Application 类中静态设置一次，使用“@ReportsCrashes(formKey=...”

是否有另一种设置方法，因此我使用此库创建的每个应用程序的表单键都可能不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:45:50.807

找到了解决方案。您将需要最新版本的 Acra，并执行以下操作：

```
@ReportsCrashes(formKey = "")
public class RootApplication extends Application {

@Override
public void onCreate() {

    ACRA.getConfig().setFormKey(
            getResources().getString(R.string.acra_form_key));
    ACRA.init(this);
    ACRA.getErrorReporter().setReportSender(new HockeySender());

    super.onCreate();
}

} 
```

当然，您只在使用 hockeyapp 时才使用 hockeysender。

# ajax - 来自 Safari 扩展的 Ajax JSONP Express parseError

> ID：15662748
> 
> 赞同：0
> 
> 时间：2013-03-27T15:28:50.957
> 
> 标签：ajax, safari, express, jsonp

首先，我在这里阅读了很多帖子，但在我自己的代码中没有发现问题，包括这个[$.ajax 和 JSONP。ParseError 和 Uncaught SyntaxError: Unexpected token :](https://stackoverflow.com/questions/10507345/ajax-and-jsonp-parseerror-and-uncaught-syntaxerror-unexpected-token)

我正在构建一个 Safari 扩展，需要发布/获取到我的服务器并处理响应。Safari 抛出此错误：

```
SyntaxError: Unexpected token ':' 
```

和这条消息

```
"handle was not called" 
```

其中 'handle' 是此扩展代码中的回调：

```
var server="http://localhost:3001/api/login";
$.ajax({
       type : "GET",
       url :  server,
       data: {"something" : "else"}
       dataType: 'jsonp',
       jsonp:false,
       jsonpCallback: 'handle',
       success: function(data, text){
        var json = $.parseJSON(data);
        console.log(json)
       },
       error: function (request, status, error) {
        console.log(error );
       }  
}); 
```

Express.js (2.5.5) 代码是：

```
//in the config
app.set( "jsonp callback", true )

app.all('/', function(req, res, next){
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "X-Requested-With");
  next();
});

app.get('/api/login', function(req, res){
res.json(
  {
    "success": {"that":"this"}
  }
);
}); 
```

注意：我尝试过 res.jsonp、设置内容类型等，但响应相同。在这个过程中，我学到了很多关于 CORS 和 Ajax 的知识，但我的眼睛显然很模糊。点击我的高跟鞋三下也没有帮助。

线索？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:35:09.463

通过设置`dataType: 'jsonp'`，它已经为您解析了 JSON。`jsonp: true`是不正确的。这个组合应该有效：

### JSONP

```
$.ajax({
   url : "http://localhost:3001/api/login",
   data: {"something" : "else"},
   dataType: 'jsonp',
   success: function(data){
     // It is already an object, don't parse it again.
     console.log(data)
   },
   error: function (request, status, error) {
     console.log(error );
   }  
}); 
```

和

```
app.get('/api/login', function(req, res){
  res.jsonp({
    "success": {"that":"this"}
  });
});

// Remove this:
app.set( "jsonp callback", true ) 
```

### CORS 浏览器和 JSON：

```
$.ajax({
   url : "http://localhost:3001/api/login",
   data: {"something" : "else"},
   dataType: 'json',
   success: function(data){
     // It is already an object, don't parse it again.
     console.log(data)
   },
   error: function (request, status, error) {
     console.log(error );
   }  
}); 
```

和

```
// This is 'app.use', not 'app.all'.
app.use('/', function(req, res, next){
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "X-Requested-With");
  next();
});

app.get('/api/login', function(req, res){
  res.json({
    "success": {"that":"this"}
  });
}); 
```

# php - 使用 Simple Html Dom 在两个 div 标签之间获取内容

> ID：15662751
> 
> 赞同：2
> 
> 时间：2013-03-27T15:28:54.833
> 
> 标签：php, parsing, simple-html-dom

我正在使用简单的 HTML Dom 来解析 HTML 标签之间的文本。在我遇到这个挑战之前，一切都很顺利。我可以轻松地解析 div 标签中的文本，但是如何解析两个 div 标签之间的文本。

这是要解析的 HTML：

```
<div class="album"><b>Album1</b> (1997)</div>
<a href="song11.html" target="_blank">song11</a><br />
<a href="song12.html" target="_blank">song12</a><br />

<div class="album"><b>Album2</b> (1998)</div>
<a href="song21.html" target="_blank">song21</a><br />
<a href="song22.html" target="_blank">song22</a><br />

<div class="album"><b>Album3</b> (1999)</div>
<a href="song31.html" target="_blank">song31</a><br />
<a href="song32.html" target="_blank">song32</a><br /> 
```

我想要第一张专辑标题 (Album1)、它的年份 (1997) 以及两首歌曲都与它们的标题链接在一个数组中。然后是第二个数组中的第二张专辑和第三个数组中的第三张专辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:50:29.187

不要将其视为两个 div 节点之间的文本，将其视为迭代 div 节点并包括跟随它们的一些 a 节点：

```
$html =<<<EOF
<div class="album"><b>Album1</b> (1997)</div>
<a href="song11.html" target="_blank">song11</a><br />
<a href="song12.html" target="_blank">song12</a><br />
<div class="album"><b>Album2</b> (1998)</div>
<a href="song21.html" target="_blank">song21</a><br />
<a href="song22.html" target="_blank">song22</a><br />
<div class="album"><b>Album3</b> (1999)</div>
<a href="song31.html" target="_blank">song31</a><br />
<a href="song32.html" target="_blank">song32</a><br />
EOF;

require('simple_html_dom.php');
$doc = str_get_html($html);
$albums = array();

foreach($doc->find('div.album') as $div){
  $album = array();
  $album['title'] = $div->find('b', 0)->innertext;
  $album['song1'] = $div->nextSibling()->innertext;
  $albums[] = $album;
}

var_dump($albums); 
```

# css - 当我尝试调整浏览器窗口的大小时，网页中的元素变得扭曲

> ID：15662753
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:28:58.877
> 
> 标签：css, html, resize, position, overlap

我是 css 新手，我使用 css 创建了一个网页，当浏览器最大化时，它看起来完全符合预期。但是当我重试网页时，我在页面中使用的 div 元素相互重叠，使事情变得一团糟......！

我尝试包装 div 元素。

```
#wrapper
{
min-width:500px;
overflow-x:scroll;
} 
```

并且还尝试将最小宽度属性设置为父 div。什么都没解决...

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:13:17.313

尝试

```
#wrapper
{
    min-width: 500px;
    overflow-x: scroll;
    position: relative;
} 
```

# ruby-on-rails - 在 Heroku 上使用 PDFKit 生成文件 - 没有这样的文件或目录

> ID：15662756
> 
> 赞同：1
> 
> 时间：2013-03-27T15:29:06.990
> 
> 标签：ruby-on-rails, heroku, resque, pdfkit, cedar

我正在使用 PDFKit 从 Heroku Cedar 上的 Resque 作业中的给定 url 创建 pdf。我的代码如下所示：

```
kit = PDFKit.new(url)
pdf = kit.to_file("/tmp/#{SecureRandom.hex}.pdf") 
```

然后我使用雾将文件上传到 S3 以进行永久存储。这项工作通常有效，但也可能有三分之一的时间失败：

```
No such file or directory - /tmp/a05c165fc80878b75fd15c447695de71.pdf 
```

在控制台中手动运行代码将产生相同的错误。

根据 Heroku 文档，我应该能够在 Cedar 上的应用程序目录中的任何位置编写一个临时文件。我尝试过首先创建 tmp 目录（在控制台中），但这似乎并没有改变任何东西。也没有保存到“#{Rails.root}/tmp/#{SecureRandom.hex}.pdf”。

任何想法将不胜感激。

**更新**

控制台中的完整错误是：

```
Error: Failed loading page http://grist.org/living/you-look-great-in-green-clothing-industry-gets-a-makeover-maybe.html
(sometimes it will work just to ignore this error with --load-error-handling ignore)
Errno::ENOENT: No such file or directory - /tmp/55a1d418074736decfd4e123d8e2bba2.pdf 
```

似乎这可能是来自 wkhtmltopdf 的错误，但是，如果我通过 PDFkit 使用 wkhtmltopdf，我不确定在哪里添加此标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:05:48.877

看起来解决方案，正如我第二次发布的错误所建议的那样，是忽略加载错误。我这样做了：

```
PDFKit.configure do |config|
  config.default_options[:load_error_handling] = 'ignore'
end 
```

起初我没有看到这个警告，因为 Resque 只显示了最后一个错误。谢谢@ctshryock，你的问题让我对这个错误的确切来源有了更多的思考。

# sql - sql查询总和带回不同的结果

> ID：15662757
> 
> 赞同：0
> 
> 时间：2013-03-27T15:29:13.750
> 
> 标签：sql

我在下面有以下两个查询，总计返回不同，但我以相同的方式在每个查询中添加总和。为什么返回的总数不同？

```
 select [Total Children] = (SUM(demo.NumberOfPreschoolers) + SUM(demo.NumberOfToddlers) + SUM(demo.NumberOfInfants)),
County = co.Description
from ClassroomDemographics as demo
inner join Classrooms as c on demo.Classroom_Id = c.Id
inner join Sites as s on c.Site_Id = s.Id
inner join Profiles as p on s.Profile_Id = p.Id
inner join Dictionary.Counties as co on p.County_Id = co.Id
where co.Description = 'MyCounty'
Group By co.Description

select [Number Of DLL Children] = SUM(cd.NumberOfLanguageSpeakers),
[Total Children] = (SUM(demo.NumberOfPreschoolers) + SUM(demo.NumberOfToddlers) + SUM(demo.NumberOfInfants)),
County = co.Description
from ClassroomDLL as cd
inner join Classrooms as c on cd.Classroom_Id = c.Id
inner join Sites as s on c.Site_Id = s.Id
inner join Profiles as p on s.Profile_Id = p.Id
inner join Dictionary.Counties as co on p.County_Id = co.Id
inner join ClassroomDemographics as demo on c.Id = demo.Classroom_Id
where co.Description = 'MyCounty'
Group by co.Description 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:44:12.427

您对`Classrooms`表的联接正在与第二个查询中的一个额外表联接。

查询一：

```
from ClassroomDemographics as demo
inner join Classrooms as c on demo.Classroom_Id = c.Id 
```

查询 2：

```
from ClassroomDLL as cd
inner join Classrooms as c on cd.Classroom_Id = c.Id
...
inner join ClassroomDemographics as demo on c.Id = demo.Classroom_Id 
```

我敢打赌，该`ClassroomDLL`表中的数据较少，或者其中一个连接条件列的行为空，其中任何一个都可能从结果中排除行并抛出您的汇总总计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:32:52.407

快速浏览一下这两个问题，我认为：

```
inner join ClassroomDemographics as demo on c.Id = demo.Classroom_Id 
```

在第二个查询中排除了第一个查询中的结果，因此聚合值会有所不同。

# javascript - Typescript 函数数组和调用

> ID：15662759
> 
> 赞同：1
> 
> 时间：2013-03-27T15:29:15.280
> 
> 标签：javascript, typescript

我试图在数组中调用 aa 函数。我收到一条错误消息：***表达式类型 { function } 不可分配给布尔值。***

**宣言：**

```
 public conditions: { (value: any): bool; }[] = []; 
```

**用法：**

```
 var myBool: bool = conditions["myKey"]("someParam"); 
```

这里有什么问题？我需要在这里投吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:37:28.957

这适用于使用 0.8.3 的[TypeScript playground](http://www.typescriptlang.org/Playground/#src=var%20conditions%3a%20%7B%20%28value%3a%20any%29%3a%20bool;%20%7D%5B%5D%20=%20%5B%5D;%0Avar%20myBool%3a%20bool%20=%20conditions%5B%22myKey%22%5D%28%22someParam%22%29;%0A%0A)。你确定这实际上是有问题的代码吗？通过字符串对数组进行索引会产生一个 type 的值`any`，因此那里的函数调用与类型目的无关，因为它也只会产生一个`any`。

# php - max_execution_time 影响上传？

> ID：15662762
> 
> 赞同：0
> 
> 时间：2013-03-27T15:29:25.797
> 
> 标签：php, file-upload

可以`max_execution_time`（我保留默认值 30）`php.ini`影响上传吗？我也将`upload_max_filesize`and设置`post_max_size`为**20M**和`client_max_body_size`（在 nginx 中），但是一些用户一直告诉我他们在上传大于（比如说）1M 的文件时遇到问题（I/O 上传错误），而他们可以毫无问题地上传 400KB 文件。

也许连接速度很慢，flash(?) 脚本超过了 30 秒的限制，并且上传没有完成..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:36:40.157

否`max_execution_time`不会影响上传，但是`max_input_time`会。

见[http://nl3.php.net/manual/en/features.file-upload.common-pitfalls.php](http://nl3.php.net/manual/en/features.file-upload.common-pitfalls.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:33:49.047

不，从[文档](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)中：

> 最大执行时间不受系统调用、流操作等影响。

# ruby-on-rails - Rails 键值存储总是在保存时重新序列化存储

> ID：15662769
> 
> 赞同：0
> 
> 时间：2013-03-27T15:29:36.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, key-value, key-value-store

```
class Car < ActiveRecord::Base
    store :options, accessors: [:bla, :blaa, :blaaa]
end 
```

在控制台中：

```
Car.create(name: "aventador")

car = Car.last
=> #<Item id: 5839, name: "aventador">

car.options_changed?
=> false

car.save
(0.3ms) UPDATE "cars" SET "updated_at" = '2013-03-27 15:26:05.435320', "options" = '--- {}' 
```

没有任何改变，商店没有被访问。为什么每次保存记录时都会重新序列化**选项存储？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:03:30.150

这实际上是一个功能：[https ://github.com/rails/rails/issues/8328](https://github.com/rails/rails/issues/8328)

这样做是因为有一种方法可以更改这些存储中的数据而不将它们标记为脏数据。出于这个原因，他们选择总是重新序列化它们。将来可能会改变。

# javascript - JQuery 对话框 - 仅在单击按钮时加载

> ID：15662772
> 
> 赞同：0
> 
> 时间：2013-03-27T15:29:49.110
> 
> 标签：javascript, jquery, asp.net, jquery-ui

使用 JQuery 对话框[http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation) 该对话框在页面加载时出现我只希望它在单击“删除发票”时出现。

我试过了：`<input id="RemoveInvoice" type="button" value="Remove Invoice" onclick="ConfirmDeleteInvoice()" />`

然后将实际的 JS 放入 ConfirmDeleteInvoice 函数中：

```
 function ConfirmDeleteInvoice() {
      //  $(function () { //removed this line and added the above line
        $("#dialog-confirm").dialog({
            resizable: false,
            height: 140,
            modal: true,
            buttons: {
                "Are you sure you want to delete this invoice": function () {
                    $(this).dialog("close");
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        });
    });
    } 
```

错误：JavaScript 运行时错误：“ConfirmDeleteInvoice”未定义

抱歉还是 JS 的初学者，请多多包涵。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:35:01.900

`});`在最后一个右括号之前你有一个额外的尾随，把它拿出来，它会起作用的。

此外，在我的小提琴中，您会看到我在 jQuery 中添加了点击事件，因为`onclick`在 HTML 中被认为是不好的做法。我通过添加：

```
$("#RemoveInvoice").click(ConfirmDeleteInvoice); 
```

见这里：http: [//jsfiddle.net/P4VHw/](http://jsfiddle.net/P4VHw/)

# javascript - 如何使用纬度和经度获取位置名称或城市？

> ID：15662775
> 
> 赞同：13
> 
> 时间：2013-03-27T15:29:56.020
> 
> 标签：javascript, geolocation

我正在使用下面的代码，但是如何从经度和纬度中获取城市名称或位置名称？

```
var x=document.getElementById("location");
function getLocation()
{
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition,showError);
    }
    else {
        x.innerHTML="Geolocation is not supported by this browser.";
    }
}

function showPosition(position)
{
    x.innerHTML="Latitude: " + position.coords.latitude + 
        "<br>Longitude: " + position.coords.longitude;  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:32:43.983

您可以使用 Google Maps v3 API 对纬度和经度对执行反向地理编码。您可以在此处找到如何执行此操作的示例：[https](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding) ://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding 。

# r - 交互，组数

> ID：15662781
> 
> 赞同：0
> 
> 时间：2013-03-27T15:30:32.867
> 
> 标签：r, interaction

从向量 a 我正在寻找一个函数（快速计算），它返回一个向量，其数字介于 1 和向量 a 中的级别数之间，并指示哪些值相等。

我知道如何使用 for 循环来做到这一点，但运行起来有点慢。

```
a=vector(11,14,11,22,14,22)

levels(as.factor(a))==3 
```

解决方案

```
 b=vector(1,2,1,3,2,3) 
```

这意味着在位置 1 和 3（b 中的数字 1 所在的位置）a 中的值相等。在位置 2 和 5（b 中的数字 2 在哪里），a 中的值相等。ETC...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:34:02.957

你可以使用`as.numeric()`一个因素来得到这个：

```
a <- c(11,14,11,22,14,22)
as.numeric(factor(a))
# [1] 1 2 1 3 2 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:59:10.300

这是一个快速完成的功能：

```
numberfun <- function(x){y <- unique(x)
                         match(x,y)}

a <- c(11,14,11,22,14,22)
numberfun(a)
#[1] 1 2 1 3 2 3

a <- c(99,99,22,22,44,22,99)
numberfun(a)
#[1] 1 1 2 2 3 2 1 
```

# android - 使用 Service 或 IntentService 的 Android Client/Server Socket 通信

> ID：15662783
> 
> 赞同：4
> 
> 时间：2013-03-27T15:30:37.100
> 
> 标签：android, sockets, android-service

到目前为止，我能够在一个 android 设备（wifi 网络共享/热点）上启动一个服务器，并让客户端（另一个 android）连接并向服务器发送消息。然后服务器回复了。我意识到我需要一种方法来保持服​​务器监听客户端，即使聊天应用程序没有运行。客户端应该能够发送消息并且服务器应该接收到这个。**我应该使用 Service 还是 IntentService 来归档这个？**我不能从 AsyncTask & Service 扩展...如何实现这个？一些示例代码会很棒。

这是我的服务器的样子：

```
public class Server extends AsyncTask<Integer, Void, Socket> {

    private ServerSocket serverSocket;
    private TextView textView;
    private String incomingMsg;
    private String outgoingMsg;

    public Server(TextView textView) {
        this.textView = textView;
    }

    public void closeServer() {
        try {
            serverSocket.close();
        } catch (IOException e) {
            Log.d("Server", "Closung the server caused a problem");
            e.printStackTrace();
        }       
    }

    @Override
    protected Socket doInBackground(Integer... params) {

        try {
            serverSocket = new ServerSocket(params[0]);       

            //accept connections
            Socket socket = serverSocket.accept();

            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            incomingMsg = in.readLine() + System.getProperty("line.separator");

            //send a message
            outgoingMsg = "You are connected to the Server" + System.getProperty("line.separator");
            out.write(outgoingMsg);
            out.flush();

            return socket;

        } catch (InterruptedIOException e) {
            //if timeout occurs
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();

        } 
//      finally {
//          if (serverSocket != null) {
//              try {
//                  serverSocket.close();
//              } catch (IOException e) {
//                  e.printStackTrace();
//              }
//          }
//      }

        return null;
    }

    protected void onPostExecute(Socket socket) {

        if(socket != null) {
            try {

                Log.i("Server", "Server received: " + incomingMsg);
                textView.setText("Server received: " + incomingMsg + "\n");

                textView.append("Server sent: " + outgoingMsg + "\n");
                Log.i("Server", "Server sent: " + outgoingMsg);

                socket.close();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } else {
            Log.d("Server", "Can't communicate with the client!");
        }
    }
} 
```

这是我的客户：

```
public class Client extends AsyncTask<Integer, Void, Socket> {

    private WifiManager wifi;
    private Context context;
    private String outMsg;
    private String inMsg;

    public Client(Context context, WifiManager wifiManager) {
        this.context = context;
        this.wifi = wifiManager;
    }

    @Override
    protected Socket doInBackground(Integer... params) {

        try {

            String gateway = intToIp(wifi.getDhcpInfo().gateway);
            Socket socket = new Socket(gateway, params[0]);

            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));

            String ipAdress = intToIp(wifi.getConnectionInfo().getIpAddress());

            outMsg = ", Client " + ipAdress +" is connecting!" + System.getProperty("line.separator"); 
            out.write(outMsg);
            out.flush();

            //accept server response
            inMsg = in.readLine() + System.getProperty("line.separator");

            return socket;

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null; 
    }

    public String intToIp(int addr) {
        return  ((addr & 0xFF) + "." + 
                ((addr >>>= 8) & 0xFF) + "." + 
                ((addr >>>= 8) & 0xFF) + "." + 
                ((addr >>>= 8) & 0xFF));
    }

    protected void onPostExecute(Socket socket) {

        if(socket != null) {

            Log.i("Client", "Client sent: " + outMsg);
            Toast.makeText(context, "\nClient sent: " + outMsg + "\n", Toast.LENGTH_LONG).show();

            Log.i("Client", "Client received: " + inMsg);
            Toast.makeText(context, "Client received: " + inMsg + "\n", Toast.LENGTH_LONG).show();

        } else {
            Log.d("Client", "Can't connect to server!");
            Toast.makeText(context, "Can't connect to server!", Toast.LENGTH_LONG).show();
        }           
    }
} 
```

**如何从服务器中创建服务？客户端也应该是服务吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:47:49.570

使用服务但忘记 AsyncTask。让您的服务启动您的通用线程 ( [https://developer.android.com/reference/java/lang/Thread.html](https://developer.android.com/reference/java/lang/Thread.html) ) 并设置您的套接字 + 侦听器。该服务甚至还可以处理消息的发送（通过以下链接中涵盖的众多选项之一）。

不要忘记正确清理服务的 onDestroy() 中的线程。

另请注意，如果您希望应用程序继续接收来自其他客户端的消息，则需要确保服务被强制进入前台（请参阅[http://developer.android.com/reference/android/app/Service .html#startForeground(int](http://developer.android.com/reference/android/app/Service.html#startForeground(int) , android.app.Notification). 然而，这不是万无一失的，你的服务仍然可以被杀死。

这就是为什么人们倾向于使用托管在某个专用盒子上的服务器而不是每个单独的设备...

# drupal - 命令需要更高的引导级别才能运行

> ID：15662791
> 
> 赞同：0
> 
> 时间：2013-03-27T15:30:58.423
> 
> 标签：drupal, bootstrapping, drush

我一直在寻找解决方案，但我只是没有找到它。我正在尝试在我的 MAMP 平台上使用 drush（我有 Leopard）。安装似乎很顺利，但是当我尝试使用它时出现错误。

我的默认外壳是 tcsh。我创建了一个文件 .bash_profile 并在其中添加了“export PATH="/Applications/MAMP/Library/bin:/Applications/MAMP/bin/php5.3/bin:$PATH" 行。然后我更改为 bash shell并发送命令：drush en views_ui.（我从 tcsh shell 得到同样的错误）

我在网站的根。

对不起，如果这是一个重复的问题。请帮忙...

* * *

```
bash-3.2$ drush en views_ui
Command pm-enable needs a higher bootstrap level to run - you will need to invoke drush from a more functional Drupal environment to  [error]
run this command.
The drush command 'en views_ui' could not be executed.                                                                                [error]
Drush was not able to start (bootstrap) the Drupal database.                                                                          [error]
Hint: This may occur when Drush is trying to:
 * bootstrap a site that has not been installed or does not have a configured database. In this case you can select another site with
a working database setup by specifying the URI to use with the --uri parameter on the command line. See `drush topic docs-aliases` for
details.
 * connect the database through a socket. The socket file may be wrong or the php-cli may have no access to it in a jailed shell. See
http://drupal.org/node/1428638 for details.

Drush was attempting to connect to: 
  Drupal version    : 7.0
  Site URI          : http://default
  Database driver   : mysql
  Database hostname : localhost
  Database username : root
  Database name     : d7dev
  Default theme     : garland
  Administration theme: garland
  PHP configuration : /private/etc/php.ini
  Drush version     : 5.8
  Drush configuration: 
  Drupal root       : /Applications/mamp/htdocs/d7dev
  Site path         : sites/default
  Modules path      : sites/all/modules
  Themes path       : sites/all/themes
  File directory path: sites/default/files
  %paths            : Array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T14:38:00.257

所以我知道这是一个旧的，但是您是否尝试过[https://drupal.org/node/1428638](https://drupal.org/node/1428638)上的解决方案（上面的错误消息中提供的 URL）？

结果是您应该在 settings.php 中更新您的数据库“主机”值：

```
'host' => php_sapi_name() == 'cli' ? '127.0.0.1' : 'localhost', 
```

对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T17:55:59.247

我在本地开发人员（**不**使用 XAMP 或 MAMP）上遇到了同样的问题。我所做的只是安装 php5-mysql 和 drush en 工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T13:34:42.927

对于像我这样对 XAMPP 有同样问题的人来说，这篇文章是如何以某种方式结束的。以下代码行对我有用。确保你首先“cd”到你是 Drupal 根。

```
sudo ln -s /Applications/XAMPP/xamppfiles/var/mysql /var/mysql 
```

# symfony - 如何在开发环境中为其他邮件服务器定义 delivery_address？

> ID：15662795
> 
> 赞同：3
> 
> 时间：2013-03-27T15:31:04.850
> 
> 标签：symfony, dependency-injection, swiftmailer

我正在使用两个 swiftmailer 服务，一个作为假脱机，一个用于即时邮件，如此处所述[如何定义附加邮件服务以使用假脱机并在 Symfony2 中发送即时电子邮件](https://stackoverflow.com/questions/12270162/how-to-define-an-additional-mailer-service-to-use-the-spool-and-send-instant-ema)

但现在我在 config_dev.yml 中的设置

```
swiftmailer:
    delivery_address: test@test.com 
```

仅适用于使用 spool 的服务。

**更新：**
所以我在 github 上环顾四周，发现[这个](https://github.com/symfony/SwiftmailerBundle/issues/6#issuecomment-15610813)，应该是可能的，但我不明白我必须如何配置我的服务。

# node.js - node.js 异步发送邮件

> ID：15662796
> 
> 赞同：0
> 
> 时间：2013-03-27T15:31:09.100
> 
> 标签：node.js

我是 node.js 的新手，正在使用 restify、mongoose 和 mongodb 构建服务。我正在构建的服务之一需要发送一封电子邮件，并且不需要通知服务的消费者电子邮件的发送状态。我使用下面的代码作为测试创建了代码，它以我想要的方式工作，但我想确保没有我没有看到的潜在问题。我担心的是，如果此服务在短时间内被调用 1,000 次并且电子邮件发送速度有些慢（每次 1-3 秒），那么这会导致我的节点服务器性能下降吗？我不确定这些项目是如何在内部排队的，也不确定是否有限制。我假设过程。nextTick 本质上是对要执行的项目进行排队，但是在开始压倒节点的事件循环之前，项目的数量是否有限制？这是我的测试代码：

```
var sendUsingTemplate = function(template, mergeData) {
    console.log('emailManager.sendUsingTemplate starting...');
    console.log('template: ' + template);
    console.log('mergeData: ' + mergeData);
    process.nextTick(function(){
        console.log('setting up async code in here...');
        setTimeout(function() {
           console.log('ok done with async!'); 
        }, 10000);
    });    
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:47:12.980

由于发送电子邮件本质上是基于 I/O 的操作，因此我认为您不需要`process.nextTick`（因为无论如何 Node 都可以很好地处理 I/O）。

但是，我建议您使用本地 MTA（邮件传输代理），它将承担实际发送电子邮件的部分（SMTP 部分）。在该设置中，Node 会将邮件发送到本地 MTA（这是一个快速操作），然后 MTA 将开始发送这些电子邮件。当接收邮件服务器离线或暂时拒绝传入邮件时，MTA 通常也会处理邮件排队。

[nodemailer](https://github.com/andris9/Nodemailer)可以配置为使用 SMTP 来传递电子邮件，或者将它们交给 sendmail（这是您应该使用的传输方式）；[node-email](https://github.com/aheckmann/node-email) 仅将电子邮件交给 sendmail。在这两种情况下，`sendmail`也可以是另一个 MTA，如 Exim 或 Postfix，它们提供了与 sendmail 兼容的接口。

# regex - 用于替换或添加文本文件中的行的 Powershell 函数

> ID：15662799
> 
> 赞同：6
> 
> 时间：2013-03-27T15:31:12.853
> 
> 标签：regex, powershell, replace, append

我正在研究修改配置文件的powershell脚本。我有这样的文件：

```
#####################################################
# comment about logentrytimeout
#####################################################
Logentrytimeout= 1800 
```

谁应该看起来像这样：

```
#####################################################
# comment about logentrytimeout
#####################################################
Logentrytimeout= 180
disablepostprocessing = 1
segmentstarttimeout = 180 
```

如果有键集（Logentrytimeout），只需将其更新为给定值。忽略注释，其中提到了键（以 # 开头的行）。密钥不区分大小写。

如果未设置键（禁用后处理和段启动超时），则将键和值附加到文件中。到目前为止，我的功能是这样的：

```
function setConfig( $file, $key, $value )
{
  (Get-Content $file) |
  Foreach-Object {$_ -replace "^"+$key+".=.+$", $key + " = " + $value } |
  Set-Content $file
}

setConfig divider.conf "Logentrytimeout" "180"
setConfig divider.conf "disablepostprocessing" "1"
setConfig divider.conf "segmentstarttimeout" "180" 
```

*   什么是正确的正则表达式？
*   如何检查是否有替代品？
*   如果没有替换：那么我如何将 $key+" = "+$value 附加到文件中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T16:33:38.027

假设`$key`您要替换的始终位于行首，并且不包含特殊的正则表达式字符

```
function setConfig( $file, $key, $value ) {
    $content = Get-Content $file
    if ( $content -match "^$key\s*=" ) {
        $content -replace "^$key\s*=.*", "$key = $value" |
        Set-Content $file     
    } else {
        Add-Content $file "$key = $value"
    }
}

setConfig "divider.conf" "Logentrytimeout" "180" 
```

如果没有替换`$key = $value`将附加到文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-16T14:37:12.187

如果需要，使用一些参数化和详细输出更新上述函数的版本。

```
 Function Set-FileConfigurationValue()
{
    [CmdletBinding(PositionalBinding=$false)]   
    param(
        [Parameter(Mandatory)][string][ValidateScript({Test-Path $_})] $Path,
        [Parameter(Mandatory)][string][ValidateNotNullOrEmpty()] $Key,
        [Parameter(Mandatory)][string][ValidateNotNullOrEmpty()] $Value,
        [Switch] $ReplaceExistingValue,
        [Switch] $ReplaceOnly
    )

    $content = Get-Content -Path $Path
    $regreplace = $("(?<=$Key).*?=.*")
    $regValue = $("=" + $Value)
    if (([regex]::Match((Get-Content $Path),$regreplace)).success)
    {
        If ($ReplaceExistingValue)
        {
            Write-Verbose "Replacing configuration Key ""$Key"" in configuration file ""$Path"" with Value ""$Value"""
            (Get-Content -Path $Path) | Foreach-Object { [regex]::Replace($_,$regreplace,$regvalue) } | Set-Content $Path
        }
        else
        {
            Write-Warning "Key ""$Key"" found in configuration file ""$Path"". To replace this Value specify parameter ""ReplaceExistingValue"""
        }
    } 
    elseif (-not $ReplaceOnly) 
    {    
        Write-Verbose "Adding configuration Key ""$Key"" to configuration file ""$Path"" using Value ""$Value"""
        Add-Content -Path $Path -Value $("`n" + $Key + "=" + $Value)       
    }
    else
    {
        Write-Warning "Key ""$Key"" not found in configuration file ""$Path"" and parameter ""ReplaceOnly"" has been specified therefore no work done"
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T15:44:34.757

我会这样做：

```
function setConfig( $file, $key, $value )
{
  $regex = '^' + [regex]::escape($key) + '\s*=.+'
  $replace = "$key = $value"
  $old = get-content $file
  $new = $old -replace $regex,$replace 

  if (compare-object $old $new)
    {  
      Write-Host (compare-object $old $new |  ft -auto | out-string) -ForegroundColor Yellow
      $new | set-content $file
    }

    else {
           $replace | add-content $file
           Write-Host "$replace added to $file" -ForegroundColor Cyan
         }

} 
```

编辑：添加了一个替换铃，和一个不匹配的哨子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T15:52:38.893

把函数改成这样：

```
function Set-Config( $file, $key, $value )
{
    $regreplace = $("(?<=$key).*?=.*")
    $regvalue = $(" = " + $value)
    if (([regex]::Match((Get-Content $file),$regreplace)).success) {
        (Get-Content $file) `
            |Foreach-Object { [regex]::Replace($_,$regreplace,$regvalue)
         } | Set-Content $file
    } else {
        Add-Content -Path $file -Value $("`n" + $key + " = " + $value)          
    }
} 
```

然后，当您调用该函数时，请使用以下格式：

```
Set-Config -file "divider.conf" -key "Logentrytimeout" -value "180" 
```

编辑：如果它不存在，我忘记了您添加该行的要求。这将检查`$key`，如果存在，它将其值设置为`$value`。如果它不存在，它将添加`$key = $value`到文件的末尾。我还重命名了该函数以更符合 power shell 命名约定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T18:23:52.100

@CarlR 函数适用于 PowerShell 版本 3。这同样适用于**PowerShell 版本 2**。

**编辑：更改正则表达式以修复 Set-FileConfigurationValue 上的两个错误：**

1.  如果你有这样的一行：

    `; This is a Black line`

    你试着做：

    `Set-FileConfigurationValue $configFile "Black" 20 -ReplaceExistingValue`

    您收到一条关于“更换”的消息，但没有任何反应。

2.  如果你有这样的两行：

    文件Tmp= 50
    Tmp=50

    你试着做：

    `Set-FileConfigurationValue $configFile "Tmp" 20 -ReplaceExistingValue`

    你改变了两条线！

    文件Tmp=20 Tmp=20

**这是最终版本：**

```
Function Set-FileConfigurationValue()
{
    [CmdletBinding()]
    param(
        [Parameter(Mandatory=$True)]
        [ValidateScript({Test-Path $_})]
        [string] $Path,
        [Parameter(Mandatory=$True)]
        [ValidateNotNullOrEmpty()]
        [string] $Key,
        [Parameter(Mandatory=$True)]
        [ValidateNotNullOrEmpty()] 
        [string]$Value,
        [Switch] $ReplaceExistingValue,
        [Switch] $ReplaceOnly
    )

    $regmatch= $("^($Key\s*=\s*)(.*)")
    $regreplace=$('${1}'+$Value)

    if ((Get-Content $Path) -match $regmatch)
    {
        If ($ReplaceExistingValue)
        {
            Write-Verbose "Replacing configuration Key ""$Key"" in configuration file ""$Path"" with Value ""$Value"""
            (Get-Content -Path $Path) | ForEach-Object { $_ -replace $regmatch,$regreplace } | Set-Content $Path
        }
        else
        {
            Write-Warning "Key ""$Key"" found in configuration file ""$Path"". To replace this Value specify parameter ""ReplaceExistingValue"""
        }
    } 
    elseif (-not $ReplaceOnly) 
    {    
        Write-Verbose "Adding configuration Key ""$Key"" to configuration file ""$Path"" using Value ""$Value"""
        Add-Content -Path $Path -Value $("`n" + $Key + "=" + $Value)       
    }
    else
    {
        Write-Warning "Key ""$Key"" not found in configuration file ""$Path"" and parameter ""ReplaceOnly"" has been specified therefore no work done"
    }
} 
```

**我还添加了一个从配置文件中读取的函数**

```
Function Get-FileConfigurationValue()
{
    [CmdletBinding()]
    param(
        [Parameter(Mandatory=$True)]
        [ValidateScript({Test-Path $_})]
        [string] $Path,
        [Parameter(Mandatory=$True)]
        [ValidateNotNullOrEmpty()]
        [string] $Key,
        [Parameter(Mandatory=$False)]
        [ValidateNotNullOrEmpty()] 
        [string]$Default=""
    )

    # Don't have spaces before key. 
    # To allow spaces, use "$Key\s*=\s*(.*)"
    $regKey = $("^$Key\s*=\s*(.*)")

    # Get only last time 
    $Value = Get-Content -Path $Path | Where {$_ -match $regKey} | Select-Object -last 1 | ForEach-Object { $matches[1] }
    if(!$Value) { $Value=$Default }

    Return $Value
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-26T19:44:26.590

```
function sed($filespec, $search, $replace)
{
    foreach ($file in gci -Recurse $filespec | ? { Select-String $search $_ -Quiet } )
    { 
    (gc $file) | 
     ForEach-Object {$_ -replace $search, $replace } | 
     Set-Content $file
    }
} 
```

用法：

```
sed ".\*.config" "intranet-" "intranetsvcs-" 
```

# sql - 选择至少有 P 和 R 的数据

> ID：15662802
> 
> 赞同：0
> 
> 时间：2013-03-27T15:31:24.633
> 
> 标签：sql, select, relational-division

我有一个名为 Table1 的表，如下所示：

```
ID  AccountNo     Trn_cd
1   123456           P
2   123456           R
3   123456           P
4   12345            P
5   111              R
6   111              R
7   5625             P 
```

我想显示那些 accountNo 出现多次（重复）并且 trn_cd 至少同时具有 P 和 R 的记录。

在这种情况下，输出应该是这样的：

```
ID  AccountNo     Trn_cd
1   123456           P
2   123456           R
3   123456           P 
```

我已经完成了这个 sql 但不是我想要的结果：

```
select * from Table1 
where AccountNo IN 
(select accountno from table1 
where trn_cd = 'P' or trn_cd = 'R' 
group by AccountNo having count(*) > 1) 
```

结果如下，其中 AccountNo 111 不应该出现，因为 111 没有 trn_cd P：

```
ID  AccountNo   Trn_cd
1   123456        P
2   123456        R
3   123456        P
5   111           R
6   111           R 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:36:24.853

为此使用聚合。要获取帐号：

```
select accountNo
from table1
having count(*) > 1 and
       sum(case when trn_cd = 'P' then 1 else 0 end) > 0 and
       sum(case when trn_cd = 'N' then 1 else 0 end) > 0 
```

要获取帐户信息，请使用`join`or`in`语句：

```
select t.*
from table1 t
where t.accountno in (select accountNo
                      from table1
                      having count(*) > 1 and
                             sum(case when trn_cd = 'P' then 1 else 0 end) > 0 and
                             sum(case when trn_cd = 'N' then 1 else 0 end) > 0
                     ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:34:16.877

这个问题叫做`Relational Division`.

这可以通过过滤包含的记录来解决，`P`并对`R`每个`AccountNo`返回的记录进行计数，然后使用`COUNT(DISTINCT Trn_CD) = 2`.

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  AccountNo
            FROM    TableName
            WHERE   Trn_CD IN ('P','R')
            GROUP   BY AccountNo
            HAVING  COUNT(DISTINCT Trn_CD) = 2
        ) b ON a.AccountNO = b.AccountNo 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/421b2/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

输出

```
╔════╦═══════════╦════════╗
║ ID ║ ACCOUNTNO ║ TRN_CD ║
╠════╬═══════════╬════════╣
║  1 ║    123456 ║ P      ║
║  2 ║    123456 ║ R      ║
║  3 ║    123456 ║ P      ║
╚════╩═══════════╩════════╝ 
```

要获得更快的性能，请添加`INDEX`on 列`AccountNo`。

# c# - 如何使用 javascript 在 asp .net 中禁用 MenuItem

> ID：15662804
> 
> 赞同：0
> 
> 时间：2013-03-27T15:31:30.370
> 
> 标签：c#, javascript, asp.net, menuitem

我创建了一个菜单

```
<asp:Menu ID="Name1" runat="server" OnMenuItemClick="DoSth_MenuItemClick" Visible="true">
  <Items>
    <asp:MenuItem Text="Function description" Value="Val" ToolTip="ToolTip description" meta:resourcekey="resourceKey">
    </asp:MenuItem>
  </Items>
</asp:Menu> 
```

现在我想使用 JavaScript 动态启用/禁用 MenuItem 我尝试使用以下 JavaScript 函数

```
function hideMenu() {
  var menu = $get('<%=Name1.ClientID %>');
  menu.getItems().getItem(0).set_enabled(false);
} 
```

我得到了菜单对象，但是它是 HTMLTalbeElement，然后在第二行中失败了。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:40:32.640

我认为您不能禁用菜单项。
因为它呈现为锚标记。
我认为您可以将其设置为`javascript:void(0);`

您可以`css-class`为您的菜单和子菜单设置 。
并使用 jquery 查找菜单并将其 URL 设置为`javascript:void(0);`

# postgresql - 将PostgreSQL中的IP地址转换为整数？

> ID：15662805
> 
> 赞同：8
> 
> 时间：2013-03-27T15:31:30.747
> 
> 标签：postgresql, ip

有没有一个查询可以做到这一点？

例如给定一个条目'216.55.82.34' ..我想用'.'分割字符串，并应用等式：

IP 编号 = 16777216*w + 65536*x + 256*y + z 其中 IP 地址 = wxyz

仅通过查询就可以实现吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-07-10T11:42:24.993

您可以简单地将 inet 数据类型转换为 bigint：`(inet_column - '0.0.0.0'::inet)`

例如：

```
SELECT ('127.0.0.1'::inet - '0.0.0.0'::inet) as ip_integer 
```

将输出 2130706433，即 IP 地址 127.0.0.1 的整数表示

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-27T15:45:15.753

您可以使用`split_part()`. 例如：

```
CREATE FUNCTION ip2int(text) RETURNS bigint AS $$ 
SELECT split_part($1,'.',1)::bigint*16777216 + split_part($1,'.',2)::bigint*65536 +
 split_part($1,'.',3)::bigint*256 + split_part($1,'.',4)::bigint;
$$ LANGUAGE SQL  IMMUTABLE RETURNS NULL ON NULL INPUT;

SELECT ip2int('200.233.1.2');
>> 3370713346 
```

或者，如果不想定义函数，只需：

```
SELECT split_part(ip,'.',1)::bigint*16777216 + split_part(ip,'.',2)::bigint*65536 +
 split_part(ip,'.',3)::bigint*256 + split_part(ip,'.',4)::bigint; 
```

后者的缺点是，如果该值是由某些计算给出的，而不仅仅是一个表字段，那么计算效率可能会低下，或者写起来很难看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-01T13:20:43.090

PG 9.4

```
create or replace function ip2numeric(ip varchar) returns numeric AS
$$
DECLARE
  ip_numeric numeric;
BEGIN
  EXECUTE format('SELECT inet %L - %L', ip, '0.0.0.0') into ip_numeric;

  return ip_numeric;
END;
$$ LANGUAGE plpgsql; 
```

用法

```
select ip2numeric('192.168.1.2');
$ 3232235778 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-11T19:34:27.163

```
create function dbo.fn_ipv4_to_int( p_ip text)
returns int
as $func$ 
select cast(case when cast( split_part(p_ip, '.', 1 ) as int ) >= 128
then 
(
( 256 - cast(split_part(p_ip, '.', 1 ) as int ))
* 
-power ( 2, 24 ) 
)
+ (cast( split_part(p_ip, '.', 2 ) as int ) * 65536 )
+ (cast( split_part(p_ip, '.', 3 ) as int ) * 256 )
+ (cast( split_part(p_ip, '.', 4 ) as int )  )

else (cast(split_part(p_ip, '.', 1 ) as int) * 16777216)
+ (cast(split_part(p_ip, '.', 2 ) as int) * 65536)
+ (cast(split_part(p_ip, '.', 3 ) as int) * 256)
+ (cast(split_part(p_ip, '.', 4 ) as int))
end as int )
$func$ LANGUAGE SQL  IMMUTABLE RETURNS NULL ON NULL INPUT; 
```

如果您需要获得 32 位整数。它将返回超过 128.0.0.0 的 ips 的负数。如果可以的话，我会使用 bigint，但是当我将数字存储为来自另一个数据库的 32 位数字时，我有一个案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-07T20:08:24.823

考虑将列数据类型更改为 inet，也许效率更高。

```
ALTER TABLE iptable ALTER COLUMN ip_from TYPE inet
USING '0.0.0.0'::inet + ip_from::bigint;

create index on iptable using gist (ip_from inet_ops); 
```

然后去查询

```
SELECT ip_from
FROM iptable 
WHERE ip_from = '177.99.194.234'::inet 
```

# c# - C# MVC FindView / FindPartialView 奇怪的性能问题

> ID：15662807
> 
> 赞同：2
> 
> 时间：2013-03-27T15:31:35.340
> 
> 标签：c#, performance, model-view-controller

我在使用 FindPartialView() 时遇到了一些奇怪的性能问题，为了调试我有以下在发布模式下运行的代码：

```
var startTime = DateTime.Now;
var view = this.BaseViewEngine.FindPartialView(context, proposedViewPath, useCache);
var timeTaken = DateTime.Now - startTime;

this.log.Write(string.Format("FindPartialView Result: useCache='{0}' proposedViewPath='{1}' TimeTakenMS={2}ms", useCache, proposedViewPath, timeTaken.TotalMilliseconds)); 
```

其中 BaseViewEngine 是在 Application_Start 创建的 WebFormViewEngine 的一个实例。

当不在缓存中时，它会生成类似的日志

```
FindPartialView Result: useCache='True' proposedViewPath='~/Controls/Navigation/TopNavigation.ascx' TimeTakenMs=0ms
FindPartialView Result: useCache='False' proposedViewPath='~/Controls/Navigation/TopNavigation.ascx' TimeTakenMs=1607ms
FindPartialView Result: useCache='True' proposedViewPath='~/Controls/Navigation/FooterMenu.ascx' TimeTakenMs=0ms
FindPartialView Result: useCache='False' proposedViewPath='~/Controls/Navigation/FooterMenu.ascx' TimeTakenMs=0ms
FindPartialView Result: useCache='True' proposedViewPath='~/Controls/Navigation/FooterMenuItem.ascx' TimeTakenMs=0ms
FindPartialView Result: useCache='False' proposedViewPath='~/Controls/Navigation/FooterMenuItem.ascx' TimeTakenMs=1279ms 
```

当它是：

```
FindPartialView Result: useCache='True' proposedViewPath='~/Controls/Navigation/TopNavigation.ascx' TimeTakenMs=0ms
FindPartialView Result: useCache='True' proposedViewPath='~/Controls/Navigation/FooterMenu.ascx' TimeTakenMs=0ms
FindPartialView Result: useCache='True' proposedViewPath='~/Controls/Navigation/FooterMenuItem.ascx' TimeTakenMs=0ms 
```

这不会那么糟糕，但我们遇到的问题是它似乎经常随机地从缓存中删除项目（77 个日志条目中的 17 个仅相隔几分钟）。因为它在缓存中找不到它，所以它使用 useCache=false 运行，这通常需要很长的时间（我们已经记录了它需要超过 4 秒）。

首先，有人知道为什么需要这么长时间吗？它不是在调试模式下编译的，我们给它一个绝对路径，所以它不应该搜索它。我尝试给它完整的文件系统路径（例如 C:\Web\Controls\Navigation\FooterItem.ascx），但它根本无法工作。

其次，有没有办法让它使用自定义视图缓存，这样至少我们可以确保项目保持缓存？

谢谢！

**编辑：**好的，到目前为止我已经得到了这个，它似乎适用于我们的使用模式，有人能想到一个不这样做的好理由吗？

```
/// <summary>
/// Optimised WebFormViewEngine to fix performance issue with FindView / FindPartialView
/// </summary>
public class FastWebFormViewEngine : WebFormViewEngine
{
    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
    {
        // If absolute path then no need to search for the view
        return partialViewName.StartsWith("~") 
            ? new ViewEngineResult(this.CreatePartialView(controllerContext, partialViewName), this) 
            : base.FindPartialView(controllerContext, partialViewName, useCache);
    }

    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        // If absolute path then no need to search for the view
        return viewName.StartsWith("~") && (string.IsNullOrEmpty(masterName) || masterName.StartsWith("~"))
                   ? new ViewEngineResult(this.CreateView(controllerContext, viewName, masterName), this)
                   : base.FindView(controllerContext, viewName, masterName, useCache);
    }
} 
```

# gdb - GDB：捕获信号并继续调试

> ID：15662810
> 
> 赞同：6
> 
> 时间：2013-03-27T15:31:44.277
> 
> 标签：gdb

我试图在 GDB 中捕获浮点异常（SIGFPE），而不是将其传递给进程并继续调试。我给了gdb这个：

```
handle SIGFPE stop nopass 
```

当 SIGFPE 发生时，GDB 会在正确的位置停止。问题是我不能也不知道如何继续调试。我试过给 GDB

```
continue 
```

或者

```
signal 0 
```

但它仍然挂在违规线上并拒绝继续。

有没有办法在收到信号后继续调试？

我正在使用我自己编译的 GDB 7.5.1，我也尝试过使用我的 12.04 Ubuntu 发行版附带的 GDB 7.4。两者都有相同的行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:38:53.717

问题是当您在同步信号之后继续执行程序时，它会重新执行导致该信号的相同指令，这意味着您将再次获得该信号。如果您告诉它忽略信号（直接或通过 gdb），它将进入一个紧密循环重复执行该指令。

如果您想在导致信号的指令之后的某个地方实际继续程序，则需要`$pc`在发出命令之前手动将寄存器设置为下一条（或其他）指令`continue`。

# computer-vision - 使用立体视觉的 3D 重建 - 理论

> ID：15662814
> 
> 赞同：1
> 
> 时间：2013-03-27T15:31:48.183
> 
> 标签：computer-vision, triangulation, stereo-3d, disparity-mapping, photogrammetry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-23T11:12:19.817

您的方法通常是正确的。

您可以将立体相机系统视为空间中已知相对方向的两个点。这是光学中心。在每个光学中心的前面，都有一个坐标系。这些是图像平面。当你找到两个对应的像素时，你可以为每个像素计算一条线，这条线穿过像素和各自的光学中心。两条线相交的地方，就是 3D 中的对象点。由于不完美的世界，它们可能不会相交，并且可能会使用线彼此最接近的点。

存在几种算法来检测哪些点对应。

使用视差时，需要对齐两个图像平面，使图像平行，并且图像 1 中的每一行对应于图像 2 中的同一行。然后只需要逐行搜索对应关系。那么知道单个对应点在x轴上的差异也足够了。这就是差距。

# python - Tastypie query limit

> ID：15662815
> 
> 赞同：0
> 
> 时间：2013-03-27T15:31:54.217
> 
> 标签：python, django, tastypie, throttling, django-piston

Is there any way to handle query per user limitations with tastypie API library ?

I would like for example to limit all users to 200 queries per day.

I looked all over the documentation and only found how to handle query results ranges limitations.

Edit : I found out that [piston](https://bitbucket.org/jespern/django-piston/wiki/Documentation) was proposing query throttling but everywhere people say that tastypie is better than piston.

# android - AdListner 无法正常工作

> ID：15662816
> 
> 赞同：0
> 
> 时间：2013-03-27T15:31:55.477
> 
> 标签：android, admob

如果他们被点击一次，我希望删除广告。我实现了以下代码。我还在`android:launchMode="singleInstance"` 清单和清单`android:alwaysRetainTaskState="true"`的活动部分中添加了。

但是当我点击广告并返回应用程序时，广告仍在显示。我的代码如下。

```
public class MainActivity extends Activity implements AdListener{
 adView = (AdView)findViewById(R.id.ad);

       adView.loadAd(new AdRequest());
 // my code

  @Override
public void onDismissScreen(Ad arg0) {
    if (adView != null) {
        adView.destroy();
      }
    // TODO Auto-generated method stub

}

@Override
public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {
    // TODO Auto-generated method stub

}

@Override
public void onLeaveApplication(Ad arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onPresentScreen(Ad arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onReceiveAd(Ad arg0) {
    // TODO Auto-generated method stub

}

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:52:17.987

```
adView.setAdListener(this); /* first you should add listener register */

and for dismiss screen

public void onDismissScreen(Ad p1)
{
    yourlayout.removeView(adView); // your layout should me remove here
} 
```

# ios - 为什么Core Data会从我在NSDate的天数中减去1

> ID：15662819
> 
> 赞同：0
> 
> 时间：2013-03-27T15:32:03.937
> 
> 标签：ios, json, core-data, nsdate, nsdateformatter

当我尝试使用 JSON 将日期值解析为我的核心数据时，日期值会减去一天。例如，在 JSON 中，我写：“date”：“14/03/13”并将其作为 13/03/13 存储在我的核心数据中。关于为什么会发生这种情况的任何想法？下面是我的代码

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd - MM - yy"];
    [dateFormatter setCalendar:[[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar]];

    dayinfo.date = [dateFormatter dateFromString:[obj objectForKey:@"date"]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:37:04.470

尝试根据您当地的时区设置时区作为日期。

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

或者

```
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

或者

```
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]]; 
```

# java - getResource puts a leading / before the disk name using java 1.7 windows 7

> ID：15662820
> 
> 赞同：20
> 
> 时间：2013-03-27T15:32:05.640
> 
> 标签：java, getresource

The following gives a leading slash before the disk name. How can I avoid that?

```
String pngpath = getClass().getResource("/resources/image.png").getPath();
System.out.println("pngpath = "+pngpath); 
```

Gives:

```
pngpath = /C:/Users/jgrimsdale/Documents/NetBeansProjects/HelloCV/build/classes/resources/image.png 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-27T15:55:01.870

Use:

```
String pngpath = getClass().getResource("/resources/image.png").getFile();
File file = new File(pngpath);
System.out.println(file.getAbsolutePath()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-04T09:40:10.507

File(uri) 或 File(string) 的构造函数有助于从系统相关的路径字符串或 URI 对象中获取文件对象。

它是使用 Java 库的解决方案。

```
System.out.println(new File("/C:/Users/jgrimsdale").toString()) 
```

[https://docs.oracle.com/javase/7/docs/api/java/io/File.html#File(java.net.URI)](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#File(java.net.URI))

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T15:49:27.770

您可以使用此代码执行此操作。

```
System.out.println("pngpath = "+pngpath.substring(1,pngpath.length())); 
```

# php - php - 传递给函数的动态变量数量

> ID：15662824
> 
> 赞同：5
> 
> 时间：2013-03-27T15:32:09.213
> 
> 标签：php, function, variables

我正在寻找最优雅的方法来传递可变数量的参数来传递函数。

考虑这样一个函数：

```
function abc ($x, $y, $l, $m) {
...
} 
```

有没有一种优雅的方法，没有很多“ifs”或变量数组作为一个变量来调用函数：

```
all ($x, $y, $l, $m) arguments
first three ($x, $y, $l) arguments
first and third ($x, $l) arguments
only second ($y) argument
last two ($l, $m) arguments 
```

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:33:12.057

我宁愿使用数组作为参数，并在函数内部检查它以查看您的变量是否存在：

```
function abc ($data) {

    if(isset($data['x']){
       //whatever
    }

    if(isset($data['y']){
       //whatever
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:34:51.460

看看`func_get_args()`，`func_get_arg()`和`func_num_args()`。

当然，当您使用这些时，您无法仅通过调用来获得“第一个”和“第三个”参数`abc($x, $l)`。你必须打电话`abc($x, null, $l)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-11T17:13:42.573

我最近需要一个函数来动态调用其他函数，并试图做一些最优雅和易于维护的东西。也许这种方法对于那些需要将不同数量的参数传递给同一个函数寻找如何使用一种方法来调用所需的任何函数的人很有用。

```
$return = call_user_func_array($function_name, $parameters); 
```

在我的例子中，我传递了一个 Web 服务中可用的函数，并`$parameters`为每个函数所需的参数提供数组。

[https://secure.php.net/manual/en/function.call-user-func-array.php](https://secure.php.net/manual/en/function.call-user-func-array.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:37:09.797

```
// use **func_get_args** function to grab all arg passed in funcion
function variadic($a,$b) {
    $args = func_get_args();
    foreach ($args as $arg) {
        echo "$arg<br />\n";
    }
}

// pass as array 
$arg = array('a'=> $a,'a'=> $b)
function variadic($arg) 
{
   if(isset($arg[a]))
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T15:35:32.700

您是想说要检查函数中设置了多少变量吗？也许这可以帮助

```
function abc($a) {
    $args = func_num_args();
    for($i = 0; $i < $args; $i++) {
        print_r(func_get_arg($i));   
    }
}
abc(1,2,3,4); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T15:45:33.090

我想不出您的解决方案的任何确切替代方案...要么您必须将 null 传递给您不想发送的参数，例如`abc (null, $y, null, $m)`

或者正在考虑的是使用 call_user_func_array 之类的东西

```
 $params = array('','y','','m');
 call_user_func_array('abc', $params); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T15:45:41.030

```
function abc ($x=null, $y=null, $l=null, $m=null) {

} 
```

然后你会像这样调用函数：

所有 ($x, $y, $l, $m) 参数

前三个 ($x, $y, $l) 参数

第一个和第三个 ($x, null, $l) 参数

只有第二个 (null, $y) 参数

最后两个 (null, null, $l, $m) 参数

# macos - 使用 OpenCV ffmpeg 在 Mac 上编写 MP4 文件

> ID：15662827
> 
> 赞同：10
> 
> 时间：2013-03-27T15:32:13.110
> 
> 标签：macos, opencv, ffmpeg, fourcc

我在 Mac 上使用 OpenCV 和 ffmpeg 来编写视频。我已经能够使用编解码器/fourcc 代码 FMP4 成功编写 .avi 文件。但是，我想编写 .mp4 文件。当我尝试使用fourcc FMP4 编写.mp4 文件时，出现此错误：

```
[mp4 @ 0x100b4ec00] Tag FMP4/0x34504d46 incompatible with output codec id '13' ( [0][0][0]) 
```

当我使用 AVC1 时，出现以下错误：

```
[libx264 @ 0x104003000] broken ffmpeg default settings detected
[libx264 @ 0x104003000] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0x104003000] preset usage: -vpre <speed> -vpre <profile>
[libx264 @ 0x104003000] speed presets are listed in x264 --help
[libx264 @ 0x104003000] profile is optional; x264 defaults to high
Could not open codec 'libx264': Unspecified error 
```

这里有没有人知道正确的编解码器与 OpenCV 和 ffmpeg 一起使用来写入 Mac 上的 MP4 容器？

如果 AVC1 是正确的编解码器，我该如何正确安装 ffmpeg + OpenCV？我做了

```
brew install gpac
brew install ffmpeg
brew install opencv 
```

我用来打开录像机的电话：

```
fourcc = cv2.cv.CV_FOURCC('A', 'V', 'C', '1')   
video_out = cv2.VideoWriter(
    filename=output_filename,
    fourcc=fourcc,
    fps=video_fps,
    frameSize=(video_width,video_height),
    isColor=1) 
```

当我跑步时，`x264 --help`我得到

```
% x264 --help
x264 core:125
Syntax: x264 [options] -o outfile infile

Infile can be raw (in which case resolution is required),
  or YUV4MPEG (*.y4m),
  or Avisynth if compiled with support (no).
  or libav* formats if compiled with lavf support (no) or ffms support (no).
Outfile type is selected by filename:
 .264 -> Raw bytestream
 .mkv -> Matroska
 .flv -> Flash Video
 .mp4 -> MP4 if compiled with GPAC support (no)
Output bit depth: 8 (configured at compile time)

Options:

  -h, --help                  List basic options
      --longhelp              List more options
      --fullhelp              List all options

Example usage:

      Constant quality mode:
            x264 --crf 24 -o <output> <input>

      Two-pass with a bitrate of 1000kbps:
            x264 --pass 1 --bitrate 1000 -o <output> <input>
            x264 --pass 2 --bitrate 1000 -o <output> <input>

      Lossless:
            x264 --qp 0 -o <output> <input>

      Maximum PSNR at the cost of speed and visual quality:
            x264 --preset placebo --tune psnr -o <output> <input>

      Constant bitrate at 1000kbps with a 2 second-buffer:
            x264 --vbv-bufsize 2000 --bitrate 1000 -o <output> <input>

Presets:

      --profile <string>      Force the limits of an H.264 profile
                                  Overrides all settings.
                                  - baseline,main,high,high10,high422,high444
      --preset <string>       Use a preset to select encoding settings [medium]
                                  Overridden by user settings.
                                  - ultrafast,superfast,veryfast,faster,fast
                                  - medium,slow,slower,veryslow,placebo
      --tune <string>         Tune the settings for a particular type of source
                              or situation
                                  Overridden by user settings.
                                  Multiple tunings are separated by commas.
                                  Only one psy tuning can be used at a time.
                                  - psy tunings: film,animation,grain,
                                                 stillimage,psnr,ssim
                                  - other tunings: fastdecode,zerolatency

Frame-type options:

  -I, --keyint <integer or "infinite"> Maximum GOP size [250]
      --tff                   Enable interlaced mode (top field first)
      --bff                   Enable interlaced mode (bottom field first)
      --pulldown <string>     Use soft pulldown to change frame rate
                                  - none, 22, 32, 64, double, triple, euro (requires cfr input)

Ratecontrol:

  -B, --bitrate <integer>     Set bitrate (kbit/s)
      --crf <float>           Quality-based VBR (0-51) [23.0]
      --vbv-maxrate <integer> Max local bitrate (kbit/s) [0]
      --vbv-bufsize <integer> Set size of the VBV buffer (kbit) [0]
  -p, --pass <integer>        Enable multipass ratecontrol
                                  - 1: First pass, creates stats file
                                  - 2: Last pass, does not overwrite stats file

Input/Output:

  -o, --output <string>       Specify output file
      --sar width:height      Specify Sample Aspect Ratio
      --fps <float|rational>  Specify framerate
      --seek <integer>        First frame to encode
      --frames <integer>      Maximum number of frames to encode
      --level <string>        Specify level (as defined by Annex A)
      --quiet                 Quiet Mode

Filtering:

      --vf, --video-filter <filter0>/<filter1>/... Apply video filtering to the input file

      Filter options may be specified in <filter>:<option>=<value> format.

      Available filters:
      crop:left,top,right,bottom
      select_every:step,offset1[,...] 
```

谢谢，-s

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-15T17:53:52.530

这似乎是一个老问题，但我会为了那些偶然发现它的人的利益而回答它。除非您从源代码安装 ffmpeg，否则您无法让 ffmpeg 与 x264 一起使用。因此，来自包管理器的二进制安装不会启用 x264 包。您可以二进制安装 x264（但可能您想使用源代码来控制要与正确版本的 ffmpeg 兼容的 x264 版本）。

所以回答这个问题：你的安装需要先安装x264，然后用--enable-libx264编译ffmpeg。

现在有很多关于如何从源代码编译 ffmpeg 的指南。一个快速的谷歌搜索抛出了这个：[http](http://www.martinlos.com/?p=41) ://www.martinlos.com/?p=41 for mac 和[https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide) for ubuntu。我经常在 ubuntu 上从源代码编译，并且知道这些指令有效，而且 mac 指令看起来也不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-31T18:49:19.753

要安装 ffmpeg，试试这个对我有用的：

`brew install --build-from-source ffmpeg`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-13T17:53:39.537

在 Mac 上使用 Homebrew 安装 ffmpeg 及其所有依赖项更加容易和灵活：

[http://www.renevolution.com/how-to-install-ffmpeg-on-mac-os-x/](http://www.renevolution.com/how-to-install-ffmpeg-on-mac-os-x/)

# ember.js - {{collection}} vs {{each}}

> ID：15662828
> 
> 赞同：0
> 
> 时间：2013-03-27T15:32:14.623
> 
> 标签：ember.js

我有一个`#each`用于生成列表的模板。该列表包含每个项目的进度条，但如果一个移动，它们都会移动（每个项目的进度条都会移动，而不仅仅是我触发动作的那个）。这是否意味着我应该重写模板和控制器以使用 collectionView？

```
{{#each dataset in controller}}
<div class="box">
  <h3>{{dataset.data_set.name}}</h3>
  <div>
      {{view App.ProgressBar isStriped=true isAnimated=true progressBinding="progressvalue"}}
  </div>
</div>
{{/each}} 
```

# performance - Matlab从并行函数中获取结果很慢

> ID：15662832
> 
> 赞同：2
> 
> 时间：2013-03-27T15:32:16.327
> 
> 标签：performance, matlab, function, parallel-processing, parfor

我需要并行执行两个 Matlab 函数。问题是从它们那里获得结果比执行要慢得多。

第一种方法：

```
spmd;
 if labindex==1, 
  K=MatricaK(NP, NE, r, Kxx, N, h, 1); %K is 1000x1000 matrix
 end;
 if labindex==2,
  F=Apkrovos(NP, NE, N, r, Ta, h, 1); %F is 1000x1 vector
 end;
end;
%This part is quite fast, around 0.17s.
K=K{1};
F=F{2};
%This part is very slow, around 1.15s. 
```

第二种方法：

```
parfor i=1:2
 if i==1
  K=MatricaK(NP, NE, r, Kxx, N, h, 1); %this way doesn't return K outside the loop, but very fast, around 0.15 for all loop
 ..
  K{i}=MatricaK(NP, NE, r, Kxx, N, h, 1); %this works, but slow, around 1.5s
 ..
  K = [K MatricaK(NP, NE, r, Kxx, N, h, 1)]; %also works, but slow, around 1.5s
 ...
end; 
```

我怎样才能让结果快速返回？我发现[MATLAB 上的 Parallel Programming 可以同时执行 3 个不同的函数，](https://stackoverflow.com/questions/6248439/parallel-programming-on-matlab-to-execute-3-different-functions-at-the-same-time)但速度没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:52:26.240

因此，问题在于传递结果所产生的开销。虽然我不能给你一个具体的答案 - 这取决于你的情况和 matlab 的版本 - 我可以建议一些事情来尝试。

1.  尝试从 matlabpool 实验室检索数据的不同方法。其中一些可能允许 matlab 在幕后进行一些优化。为此，我建议查看分布式数组。或者，如果您不需要对数据进行任何后续处理，您可以直接将其保存到磁盘而不是通过内存传递。

2.  尝试将其作为分布式[批处理作业](http://www.mathworks.co.uk/help/distcomp/introduction-to-parallel-solutions.html#brjw1fx-2)运行。最新版本的 matlab 允许您创建批处理作业并在本地计算机上运行它们（而不是在专用集群上）。由于您的两个功能是完全独立的，您可以使用这种方法来更快地检索数据。

3.  尝试以某种方式将结果放置在共享内存中。这很困难，因为 Matlab 的并行处理是基于 MPI 进行消息传递的；某些模式基本上是 MPI 上的 matlab 包装器。这意味着每个工作人员都是具有单独内存空间的单独的 Matlab 实例，因此当您再次收集数据时，它实际上是在生成一条 MPI 消息，这会产生一些开销。避免这种情况的方法之前已经在[stackoverflow](https://stackoverflow.com/questions/872209/sharing-memory-between-processes-matlab)上讨论过。

4.  看看里面的功能。如果您可以/被允许修改您正在调用的两个函数，您可能能够以一种没有这种通信开销的方式并行化它们。在向量的并行处理方面，Matlab 非常聪明，因此如果有任何操作可以转换为向量/矩阵操作，您可以在那里显着节省速度，而无需通信开销。

5.  试试matlab以外的东西。如果您有时间和编码技能，那么您可以使用允许多线程执行的语言（例如 C++ 和 OpenMP）重新编写函数。

我自己在 Matlab 中也遇到过类似的并行编程问题，尽管在我的情况下，尽管共享输入数据，但问题是令人尴尬的并行，所以我最终将输出直接从工作节点保存到磁盘。

# jquery - JQuery：循环输入元素

> ID：15662836
> 
> 赞同：8
> 
> 时间：2013-03-27T15:32:30.420
> 
> 标签：jquery, loops

我有几行需要迭代的输入框（文本），将一行中的值相乘，然后对乘积求和。我能找到的唯一解决方案是将输入框转换为数组：

```
var array1 = $('input[id$="txtVal1"]').toArray();
var array2 = $('input[id$="txtVal2"]').toArray();
var temp1;
var temp2;
var sum=0; 
```

然后使用以下方法迭代和求和：

```
for (i = 0; i < array1.length; i++) {
    if (array1[i].value.length > 0) { //make sure we have data
        temp1 = parseFloat(array1[i].value);
        temp2 = parseFloat(array2[i].value);
        sum += temp1 * temp2;
    }
} 
```

这行得通。但是我只是在学习 JQuery 并想使用规范方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T15:35:56.950

您可以直接遍历通过选择器找到的所有项目，如下所示：

```
$('input').each(function(index,data) {
   var value = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:53:43.710

As mentioned you can use .each() to accomplish this task but here is an example that uses your data as requested in the the question. You mentioned 'rows' of input so I'm assuming it's in a table row:

```
$('tr').each(function () {
    var $this = $(this),
        sum = parseFloat($this.find('input[id$="txtVal1"]').val()) * parseFloat($this.find('input[id$="txtVal2"]').val());
    alert(sum);
}); 
```

Here's a [jsFiddle Example](http://jsfiddle.net/gZynL/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T15:35:01.590

不需要使用`toArray`，使用[.each()](http://api.jquery.com/each/)方法。

```
$('input[id$="txtVal1"]').each(function(index) { 
    // do something here
    $(this).addClass( "myClass" );
}) 
```

# javascript - Javascript字符串到数组/字典

> ID：15662840
> 
> 赞同：2
> 
> 时间：2013-03-27T15:32:47.717
> 
> 标签：javascript, python, arrays, string, list

我怎样才能转换这样的字符串：

```
"{u'value': {u'username': u'testeuser', u'status': 1,
 u'firstName': u'a', u'lastName': u'a', u'gender': u'a',
 u'date': u'2013-03-06T09:01:27.939007',
 u'id': u'b1dab21bef3f3fd050d7c2f3e8006045'},
 u'key': u'2013-03-06T09:01:27.939007'}" 
```

到一个列表之类的东西，我可以找到类似`data['value']`或的信息`data['username']`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:35:08.760

您的字符串看起来像是错误地序列化了您的字典。要将数据（例如字典、列表等）传递到客户端，您需要以**JSON**格式对其进行序列化。

为了在您的 Python 代码中执行此操作，您应该[`json.dumps(dict)`](http://docs.python.org/2/library/json.html#json.dumps)从`json`包中使用，而在客户端您需要申请[`JSON.parse(data)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)以加载数据。

# ios - ios __weak 和 __autoreleasing

> ID：15662843
> 
> 赞同：2
> 
> 时间：2013-03-27T15:32:53.123
> 
> 标签：ios, pass-by-reference, weak, hidden-variables

[阅读此线程处理 ARC 中的指针对指针所有权问题](https://stackoverflow.com/questions/8814718/handling-pointer-to-pointer-ownership-issues-in-arc)的答案后，我遇到了一些问题；

对于演示 1，当传递对“强”属性变量的引用时，会隐式创建一个 hidden(__autoreleasing) 变量，并且不会保留该对象。但是对于演示 4，当传递对“弱”属性变量的引用时，该对象确实会保留一次。

所以我的问题很简单，只是我的好奇心，为什么只有从'__weak'创建的隐藏变量才能获得对象retain+1？这种模式是为任何特殊问题设计的吗？

希望我清楚地解释我的问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:57:39.577

> 隐式创建了一个 hidden(__autoreleasing) 变量，并且该对象不会被保留

这不是真的。`__autoreleasing`是保留和自动释放的东西。

# c# - 在按下 esc 键时关闭 XtraUserControl

> ID：15662846
> 
> 赞同：0
> 
> 时间：2013-03-27T15:33:02.057
> 
> 标签：c#, devexpress

我有一堂课

```
MyWindows : XtraUserControl,ISmartPartInfoProvider 
```

我想在按下转义键时关闭它。

我使用 Microsoft.Practices.CompositeUI.SmartParts MyWindows 来显示窗口，如下所示： MyWindows temp = new MyWindows(); myWorkspace.Show(temp);

我尝试以下方法：

在构造函数中

```
PreviewKeyDown += OnKeyDownP;
KeyDown += OnKeyDown; 
```

使用方法：

```
 private void OnKeyDownP(object sender, PreviewKeyDownEventArgs e)
    {
        if (e.KeyData == Keys.Escape)
        {
            this.Dispose();
        }
    }
    private void OnKeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyData == Keys.Escape)
        {
            this.Dispose();
        }
    } 
```

但是没有事件被触发。

我错过了什么吗？

**编辑** 这篇文章对我有用： [在按下 esc 键时关闭 XtraUserControl](https://stackoverflow.com/questions/15662846/close-a-xtrausercontrol-on-esc-key-pressed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:35:47.213

是的。您应该将您的`KeyPreview`属性设置`Form`为`true`. 你应该使用你的`Form`事件来捕捉按键。

# php - 电子邮件 TCPDF 使用 php 邮件功能生成的 PDF 文件

> ID：15662858
> 
> 赞同：1
> 
> 时间：2013-03-27T15:34:02.773
> 
> 标签：php, email, tcpdf

tcpdf 库正在生成 PDF 文件，但我无法将其附加到电子邮件中。它发送带有空的 1kb PDF 文件的电子邮件。

> ```
> $to = 'receiver@gmail.com';
> $subject = 'Receipt';
> $repEmail = 'info@gmail.com';
> 
> $fileName = 'receipt.pdf';
> $fileatt = $pdf->Output($fileName, 'S');
> $attachment = chunk_split($fileatt);
> $eol = PHP_EOL;
> $separator = md5(time());
> 
> $headers = 'From: Sender <'.$repEmail.'>'.$eol;
> $headers .= 'MIME-Version: 1.0' .$eol;
> $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";
> 
> $message = "--".$separator.$eol;
> $message .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
> $message .= "This is a MIME encoded message.".$eol;
> 
> $message .= "--".$separator.$eol;
> $message .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
> $message .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
> 
> $message .= "--".$separator.$eol;
> $message .= "Content-Type: application/pdf; name=\"".$fileName."\"".$eol; 
> $message .= "Content-Transfer-Encoding: base64".$eol;
> $message .= "Content-Disposition: attachment".$eol.$eol;
> $message .= $attachment.$eol;
> $message .= "--".$separator."--";
> 
> if (mail($to, $subject, $message, $headers)){
> echo "Email sent";
> }
> 
> else {
> echo "Email failed";
> } 
> ```

我知道使用 phpmailer 更容易，但我需要使用邮件功能来完成它并且不使用任何库。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:52:42.623

解决方案在**vodich**发送的链接上。

你的代码是正确的。您必须更改一行：

```
$fileatt = $pdf->Output($fileName, 'S'); 
```

和

```
$fileatt = $pdf->Output($fileName, 'E'); 
```

# haskell - 是否有用于引用的模板 haskell 函数？

> ID：15662862
> 
> 赞同：10
> 
> 时间：2013-03-27T15:34:09.810
> 
> 标签：haskell, template-haskell

我正在玩 Template Haskell。我想创建一个准引用器，它允许我为记录创建默认初始化程序，即类似

```
[record| data Config = { shouldDoX = True; featureY :: Integer, optionZ = Nothing } |] 
```

应该创建一个函数

```
defaultConfig = Config { shouldDoX = True, optionZ = Nothing } 
```

基本上它与数据声明的语法相同，由默认值扩展。现在`record`是一个自定义的 QuasiQuoter，但是我不想在其中解析自己的表达式和类型。理想情况下，我只需要将花括号内的块划分为语句并查找`=`and `::`。

`[e| ...|]`所以我正在寻找一个与使用or引用有效相同的函数`[t| ...|]`。我在 Hoogle 中搜索了一个函数`String -> ExpQ`，或者`String -> Q Exp`没有找到任何东西。

**如果我不清楚我在寻找什么：**我知道 QuasiQuoters。正如我所提到的：`record` *是*一个 QuasiQuoter。现在传递给我的准引用器的字符串包含表达式 (like `Node 7 (Node 8 Nil Nil) Nil`) 和类型 (like `True`or `Maybe (Either A B)`)。我可以自己解析这些，但我希望有一个函数可以为我完成，就像我将字符串传递到像`[e|...|]`.

所以：我正在寻找一个函数，我可以将表达式作为字符串或类型作为字符串提供，并返回适当的`Exp`或`Type`对象。我相信它必须存在于 Q monad 中，因为它应该根据上下文评估表达式或类型（就像引用一样）。

```
functionOfMyDreams "Node 7 (Node 8 Nil Nil) Nil" :: Q Exp 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-19T14:38:09.203

我认为功能

```
parseExp :: String -> Either String Exp
parseType :: String -> Either String Type 
```

from `haskell-src-meta`package 是你想要的。

[http://hackage.haskell.org/package/haskell-src-meta-0.6.0.4/docs/Language-Haskell-Meta-Parse-Careful.html](http://hackage.haskell.org/package/haskell-src-meta-0.6.0.4/docs/Language-Haskell-Meta-Parse-Careful.html)

这是一个quasiquoter[的自包含示例](https://github.com/nushio3/practice/tree/a38a566c54b41ab9d12480f28027ee5551fb7822/template-haskell/embed-expr "嵌入表达式")`haskell-src-meta`，它可以使用.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:03:53.820

你有正确的想法，但它会是一个像`String -> Q [Dec]`

要创建一个 quasiquoter，你必须创建一个[QuasiQuoter](http://hackage.haskell.org/packages/archive/template-haskell/2.8.0.0/doc/html/Language-Haskell-TH-Quote.html)类型的值，它有四个类型的函数，`String -> Q Blah`其中 Blah 是你正在拼接的 Template Haskell 类型。

在您的情况下，您只需要定义声明引用者。

```
quoteRecord :: String -> Q [Dec]
quoteRecord = ...

record :: QuasiQuoter
record = QuasiQuoter (error "record is not a expression quoter")
                     (error "record is not a pattern quoter")
                     (error "record is not a type quoter")
                     quoteRecord 
```

然后您可以在另一个文件中使用您的记录准引用器

```
[record| ... |] 
```

[Haskell wiki](http://www.haskell.org/haskellwiki/Quasiquotation)上有一个很好的演练

您可能还想查看[BNFC-meta](http://hackage.haskell.org/package/BNFC-meta)，它将从语法中生成一个 quasiquoter。

# c++ - STL：从已作为第二对添加到映射的结构中访问数据

> ID：15662871
> 
> 赞同：2
> 
> 时间：2013-03-27T15:34:39.693
> 
> 标签：c++, stl

我有一张这样的地图：

```
typedef std::map<std::string, Copied_Instrument_Data> InternalIdWise_Copied_Instrument_Data; 
```

其中，`Copied_Instrument_Data`是一个结构：

```
typedef struct 
{
    std::string type;
    std::string marketListId;
    std::string sectorCode;
    std::string validToDate;
    int notificationType;
    bool npgFlag;
}Copied_Instrument_Data; 
```

我使用以下方法将数据插入到我的地图中：

```
InternalIdwise_Copied_Instrument_Data__Map.insert( std::pair<std::string, Copied_Instrument_Data >(internalId, CID) ); 
```

其中 CID 是`Copied_Instrument_Data`结构变量。

后来我用：`iter = InternalIdwise_Copied_Instrument_Data__Map.find("SomeKeyString");`

在这样声明之后`iter`：`InternalIdWise_Copied_Instrument_Data::iterator iter;`

然后我有：

```
if (iter != InternalIdwise_Copied_Instrument_Data__Map.end() )
        Instrument_available = true;
if (Instrument_available == true)
{
        ins_todate = *(iter).second.validToDate;
       std::cout<<ins_todate; 
} 
```

然而，这不起作用。我没有得到任何数据`ins_todate`。

所以，我的问题是：

如何正确访问该元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:37:55.007

它与运算符优先级有关：

```
ins_todate = *(iter).second.validToDate; 
```

使用取消引用运算符`iter.second.validToDate`（取消引用 ( `*`) 运算符的优先级低于元素选择 ( `.`) 运算符）。

你应该做

```
ins_todate = (*iter).second.validToDate; 
```

或者

```
ins_todate = iter->second.validToDate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:14:30.647

不是答案，而是对这里的编码风格的一些建议：

I. 如果你正在编写 C++，你应该这样做：

```
struct Copied_Instrument_Data
{
    ...
}; 
```

代替

```
typedef struct 
{
    ...
} Copied_Instrument_Data; 
```

后者给出一个未命名的`struct`然后你`typedef`它，这是不必要的，你不能在 this 上使用前向声明`struct`。

二、您可以使用`std::make_pair`将元素插入地图，我个人认为它更清晰，更容易：

```
Map.insert( std::make_pair(internalId, CID) ); 
```

三、如果它只是一个标志，则应替换临时变量，即

```
if (iter != InternalIdwise_Copied_Instrument_Data__Map.end() )
        Instrument_available = true;
if (Instrument_available == true)
{
    ...
} 
```

应该

```
if (iter != InternalIdwise_Copied_Instrument_Data__Map.end())
{
    ...
} 
```

或者，这可以通过返回调用来排除错误条件：

```
if (iter == InternalIdwise_Copied_Instrument_Data__Map.end())
{
    // print some error log?
    return;
}

// continue your work! 
```

（可以参考*Refactoring: Impriving the design of existing code, 2nd Ed., Item 6.3 Inline Temp*）

希望有帮助！:)

# java - 传递一个可包裹的数组列表

> ID：15662873
> 
> 赞同：0
> 
> 时间：2013-03-27T15:34:44.323
> 
> 标签：java, android, parcelable, parcel

我想在活动之间传递一个包含 2 个对象的可打包数组

```
Intent i = new Intent();
        i.setClass(act, ChoiceLanguage.class);      
        for(Language l:langueControl.getListeLangues())
        {
            System.out.println("Contents" + l.getTuto_p1()); // no problem here , my objects are stored and i can read them
        }
        i.putParcelableArrayListExtra("listeLangues", langueControl.getListeLangues());
        act.startActivity(i); 
```

但是当我尝试在另一个活动中读取我的数组列表时

```
ArrayList<Language> listeLangues= getIntent().getParcelableArrayListExtra("listeLangues");  

                for(Language l:listeLangues)
                {
                    System.out.println("Contents" + l.getTuto_p1());// error here
                } 
```

我收到以下错误：`03-27 16:26:46.842: E/AndroidRuntime(12495): java.lang.ClassCastException: java.lang.Boolean cannot be cast to com.dev.pojo.Language`当它尝试读取列表的第二个对象时（显示第一个对象）

我不明白为什么它说布尔值，因为我的对象中没有任何布尔值

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:42:44.993

我不知道如何解决您的问题，但我使用可序列化来传递我复杂的附加功能。你可以试试这个，而不是一个 parcelable。

```
 i.putParcelableArrayListExtra("listeLangues", langueControl.getListeLangues()); 
```

至

```
 i.putExtra("listeLangues", langueControl.getListeLangues()); 
```

[http://developer.android.com/reference/android/content/Intent.html#putExtra](http://developer.android.com/reference/android/content/Intent.html#putExtra)

# node.js - 我可以将 npm 设置为使用 .pac 文件吗？

> ID：15662878
> 
> 赞同：5
> 
> 时间：2013-03-27T15:34:54.133
> 
> 标签：node.js, npm

我正在尝试为 npm (nodejs) 设置私有注册表，但我不想复制整个公共数据库。我已经看过有关如何执行此操作的帖子，但是，即使我遵循这种方法，我也会遇到另一个问题。我的工作站在 VPN 后面，所以我需要在 NPM 中设置代理才能从公共注册表中获取模块。如果我创建我的私人注册表，它将位于公司 VPN 内（使其可公开访问不是一种选择）。这意味着我不需要代理来访问我的私有注册表，但就像我之前所说的，我确实需要它来访问公共注册表。我从 git 获得了 NPM 的代码，但在修改它之前，我想我只想问一下，有人知道如何解决这个问题吗？我知道您可以在运行 npm install 时指定注册表和代理，但我希望能够只运行 npm install。无论如何将pac文件应用于npm？除了修改源代码，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T20:20:59.143

我遇到了这个确切的问题。我们在私有 npm 注册表前设置了一个 nginx 代理。我们在 404 上创建了一个回退到全局 npm 注册表。

因此，在进行 npm 安装时，我们只需要指定 nginx 代理，如果找到，它将负责从私有注册表提供包，如果没有，则从全局注册表提供包。

这是您可以使用的 nginx 配置：

```
server {
    listen 80 default_server;

    location ~ ^/registry/*/ { 
        proxy_set_header  X-Real-IP $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header  Host  $http_host;
        proxy_set_header  X-NginX-Proxy true;

        proxy_pass  http://private_npm_upstream;
        proxy_intercept_errors  on;
        error_page 404 = @fallback-2;

        proxy_redirect off;
    }
    location @fallback-2 {
        access_log /var/log/nginx/global_npm.access.log;

        proxy_set_header  X-Real-IP $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header  Host  registry.npmjs.org;
        proxy_set_header  X-NginX-Proxy true;

        proxy_pass http://registry.npmjs.org;
        proxy_redirect off;
        proxy_intercept_errors  on;
    }
}

upstream global_npm_upstream {
    server registry.npmjs.org;
}

upstream private_npm_upstream { 
    server 127.0.0.1:5984; 
} 
```

# php - PHP-GD PNG透明图像变黑

> ID：15662885
> 
> 赞同：2
> 
> 时间：2013-03-27T15:35:06.930
> 
> 标签：php, png, alpha-transparency, php-gd

我在我的一个项目中使用 JCrop（用户必须裁剪他的脸）并将坐标和源图像发送到 PHP 处理程序。流程应如下所示：根据接收到的坐标，处理程序裁剪图像并用于`imagecopy()`将新创建的图像（在我的情况下为 90x90）放在使用`ImageCreateTrueColor()`. 到目前为止这工作正常，但下一步是：我必须加载一个带有透明部分的 png 图像。（我希望我解释得足够清楚）与之前的布局具有相同的宽度和高度，并且上面有裁剪区域。最后一步是再次使用`imagecopy()`将 png 放在布局上，并最终得到模板，其透明部分被用户制作的作物覆盖。这是我的代码：

```
$targ_w = $targ_h = 90;
$jpeg_quality = 100;
$src = $_POST['s'];
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );
imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);
$layout = ImageCreateTrueColor(459,683);
imagecopy($layout, $dst_r, 263, 249, 0, 0, 90, 90);
$template = 'template.png';
$src_r = imagecreatefrompng($template);
$background = imagecolorallocate($src_r, 255, 255, 255);
imagecolortransparent($src_r, $background);
imagealphablending($src_r, false);
imagesavealpha($src_r, true);
imagecopy($layout, $src_r, 0, 0, 0, 0, 459, 683);
header('Content-type: image/png');
imagepng($src_r); 
```

我尝试了很多在网上找到的东西，但似乎没有任何效果。编辑：问题是透明部分是黑色的，而不是裁剪的脸。我真的需要一些建议。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T03:45:20.647

我之前写了一个类，它会解决你的问题吗？[http://www.gdenhancer.com](http://www.gdenhancer.com)

这是[示例](http://www.gdenhancer.com/index.php?content=methods&method=backgroundresize)

# c# - 如何使用没有通配符的 C# 泛型？

> ID：15662895
> 
> 赞同：9
> 
> 时间：2013-03-27T15:35:31.993
> 
> 标签：c#, generics, wildcard, covariance

在 java 中，我非常习惯于使用泛型和通配符。像这样的事情：`List<? extends Animal>`。这允许您拥有 Animals 子类型的集合并在每个元素上运行通用例程（例如`makeNoise()`）。我正在尝试在 C# 中完成此操作，但有点困惑，因为没有通配符。

在领域方面，我们在这里所做的是使用 SQL SMO 库从我们的数据库中收集脚本。我们有一个基本接口类型，它被多次扩展以编写脚本和收集不同的对象（表、视图、函数等——这是 T）

```
public interface IScripter<T> where T : IScriptable
{
    IList<T> CollectScripts(params...)
}

public abstract class AbstractScripter<T> : IScripter<T> where T : IScriptable
{
    ....
}

public class TableScripter : AbstractScripter<Table>
{
    ....
}

public class ViewScripter : AbstractScripter<View>
{
    ....
} 
```

到现在为止还挺好。看起来像一个完全合理的对象层次结构对吗？这是我打算做的，直到我发现没有通配符：

```
public class Program
{
    static void Main(string[] args)
    {
        // auto discover all scripter modules, table, view, etc
        IList<Iscripter<? extends IScriptable>> allScripters = GetAllScripterModules(); 
        foreach (IScripter<? extends IScriptable> scripter in allScripters)
        {
            IList<? extends IScriptable> scriptedObjects = scripter.CollectScripts(...);
            // do something with scripted objects
        }
    }
 } 
```

现在既然`<? extends IScriptable>`这里不存在，那我应该怎么做呢？我尝试了很多东西，泛型方法，只使用基本类型，各种讨厌的转换，但没有什么能真正奏效。

你会建议用什么来替换这`IList<Iscripter<? extends IScriptable>`件作品？

TIA

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T15:42:27.443

通过使用`out`and 仅从接口中传递`T`或其他协变`T`接口，您可以使接口[协变](http://msdn.microsoft.com/en-gb/library/dd469487.aspx)；

```
public interface IScripter<out T> where T : IScriptable
{
    IEnumerable<T> CollectScripts(params...)
} 
```

然后你不能添加到结果中，因为你不能使用非协变`IList`，所以当你想添加时添加单独的接口：

```
public interface IScripterAddable<T> where T : IScriptable
{
    //either:
    IList<T> CollectScripts(params...)
    //or add just what you need to, this is usually better
    //than exposing the underlying IList - basic encapsulation principles
    void AddScript(...)
} 
```

然后只需删除`? extends`.

```
 // auto discover all scripter modules, table, view, etc
    IList<Iscripter<IScriptable>> allScripters = GetAllScripterModules(); 
    foreach (IScripter<IScriptable> scripter in allScripters)
    {
        IEnumerable<IScriptable> scriptedObjects = scripter.CollectScripts(...);
        // do something with scripted objects
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-27T16:40:47.153

协方差是“如果一个苹果是水果，那么一碗苹果就是一碗水果”的性质。这立即提出了一个问题：您可以将橙子放入一碗水果中。如果一碗苹果就是一碗水果，你可以把一个橙子放进一碗水果里，那么你就可以把一个橙子放进一碗苹果里。那时显然它不再是一碗苹果。

C# 和 Java 采用两种不同的方法来防止这种违反类型安全的行为。C# 的方法是说协变接口必须预先声明其协变，并且该接口不公开任何可用于违反类型安全的方法。

因此`IEnumerable<T>`在 C# 中的 T 中是协变的，因为没有办法将橙子放入苹果序列中；上没有“添加”方法`IEnumerable<T>`。有一个 Add 方法`IList<T>`，因此它在 C# 中不是协变的。

Java 采用了不同的方法。*它说“您现在*可以将这碗苹果用作一碗水果，前提是*您实际上并未在其中添加橙子*。差异发生在*特定位置*，而不是界面的整体属性。

为了解决您的实际问题：如果您无法`IScripter<T>`在 T 中使您的接口协变，因为它可以交回一个`IList<T>`，您可能会被卡住。但是，如果你可以让它包含一个，`IEnumerable<T>`那么你可能会很幸运。将接口标记为`IScripter<out T>`，然后确保它`T`仅用于“输出”位置。

# email - 在线电子邮件帐户使用的端口，例如 Yahoo Mail、Gmail 等

> ID：15662898
> 
> 赞同：0
> 
> 时间：2013-03-27T15:35:38.030
> 
> 标签：email, smtp, port, pop3

假设我使用 Yahoo Mail 或 Gmail 发送电子邮件。可以使用数据包嗅探器拦截此电子邮件吗？

电子邮件在哪个端口上传输？HTTP、SMTP、POP3？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:39:02.973

*   当您在网络浏览器中键入电子邮件时，它会使用**HTTP(S)**传输到服务提供商 (yahoo/google)
*   单击发送时，邮件将通过**SMTP**发送到目标邮件服务器
*   当收件人下载邮件时，它通常通过**POP3**或**IMAP**传输到他的邮件客户端（或者如果他在网络浏览器中阅读它，那么它又是**HTTP(S)**）

对于所有这些协议，都有“普通”和“加密”变体：

例子：

*   HTTP -> *HTTPS*
*   SMTP ->*带有 TLS 的 SMTP*
*   POP3 -> *POP3S*
*   IMAP -> *IMAPS（或带 TLS 的 IMAP）*

对于有权访问源或目标系统的人来说，即使使用了加密协议，也总是可以拦截并读取流量。介于两个系统之间的人（例如路由器操作员）可以拦截数据包，但如果流被加密，通常不会读取内容。

# model-view-controller - MVC，如何避免Routing类与Model耦合？

> ID：15662904
> 
> 赞同：0
> 
> 时间：2013-03-27T15:35:48.247
> 
> 标签：model-view-controller, routing, url-routing

我正在研究 MVC 网站中的路由类。某些路由可能包含用户名：

```
http://www.domain.com/John-Smith/ 
```

其他标签：

```
http://www.domain.com/Fun-Stuff/ 
```

路由类需要检测 URL 中是否存在用户名或标签。这意味着路由类将需要访问用户模型和标签模型来将 url 段与数据库进行比较。

目前只有我的控制器与模型接触，将 Routing 类与模型耦合感觉不太合适。有没有办法或任何架构解决方案来避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:35:02.770

我认为您错过了路由的重点。它几乎可以做任何你想做的事情。**你**告诉它映射到哪里。以以下路线为例：

```
routes.MapRoute(
    "Default",
    "{something}",
    new { controller="MyDefault", action="Something", something=""}); 
```

因此，对于 url `http://mydomain.com/miles-davis1234/`，它将与路由中指定的控制器和操作相匹配。在以下操作中，您可以使用`{something}`令牌的值：

```
public ActionResult Something(string something)
{
    // something = miles-davis1234
    var x = this._myService.WorkOutWhatSomethingIs(something);

    // now do something with x
} 
```

因此，在回答您关于“检测它是用户名还是标签”的问题时，您可以执行上述操作。虽然我不会推荐它。我会做以下事情：

```
routes.MapRoute(
    "Users",
    "User/{username}",
    new { controller="User", action="Detail", username="" });

routes.MapRoute(
    "Tags",
    "Tag/{tag}",
    new { controller="Tag", action="Search", tag="" }); 
```

因为如果您尝试使用相同的路由/令牌来处理标签和用户名，例如，当某人的用户名与标签相同时会发生什么？你无法区分。无论如何，MVC 模式的重点是“RESTful”网址。应该*代表*控制器（模型）、动作和任何其他元数据。在您的实例中，您甚至可以（并且可能应该）使用基本`{controller}/{action}/{data}`模式进行路由。从数据的角度来看，它完全可以满足您的需求。

# entity-framework - Entity Framework 6 是否有计划的发布日期？

> ID：15662908
> 
> 赞同：12
> 
> 时间：2013-03-27T15:35:58.497
> 
> 标签：entity-framework, entity-framework-6

我的问题说明了一切，但这里有一些背景：

由于各种限制，我至少在 2014 年 7 月之前一直使用 .NET 4.0。但是，我的任务是将我们的 DAL 转换为使用实体框架来帮助提高可伸缩性和性能。目前，我们将所有数据从单个 xml 文件加载到内存中，因此我正在考虑将 Code First 与我们现有的实体一起使用。我们有一个非常庞大且复杂的模型，其中包含许多继承和枚举，我真的很希望在新版本中提供枚举支持和性能改进。

那么，我现在是否开始使用 EF6 并希望它在我们的发布日期之前是官方的，从 EF4 开始然后迁移？还是等到我们的下一个产品发布后再开始使用 EF？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T20:21:14.843

如果您想使用 CodeFirst，您可以从 .NET Framework 4 的 EF5 开始，然后移至 EF6。您将错过此版本中不可用的许多功能（EF5 依赖于 System.Data.Entity.dll，它是 .NET Framework 版本的一部分，因此 .NET Framework 4 的 EF5 无法使用枚举等功能，空间类型等，因为它们在 .NET Framework 4 附带的 System.Data.Entity dll 中不受支持）。或者，您可以尝试 EF6。目前最新版本是alpha3。另一方面，它是一个开源版本，所以如果某些东西不工作或者你需要一些东西，你可以继续自己做。请注意，EF6 中的提供程序模型发生了变化，因此如果您不使用 Sql Server 或 Sql Server CE，则需要确保您的数据库有一个支持 EF6 的提供程序。

**编辑**

这是我们团队的一位成员关于发布日期的有趣博客文章：[EF6 发布日期……或缺少发布日期](http://blog.oneunicorn.com/2013/05/31/ef6-release-datesor-lack-thereof)。

# mysql - 使用 MySQL 在表中搜索 Point in Polygon

> ID：15662910
> 
> 赞同：10
> 
> 时间：2013-03-27T15:36:01.203
> 
> 标签：mysql, point-in-polygon

我在 MySQL 5.5 中创建了一个包含一些边界的表 (municipal_border)。

```
CREATE TABLE `municipal_border` (
  `boundary` polygon NOT NULL,
  `municipalID` int(10) NOT NULL,
) ENGINE=InnoDB 
```

字段 urbanID 不是唯一的。

我正在使用下面的代码来测试一个点是否属于多边形。

```
set @r = (SELECT municipal_border.boundary FROM municipal_border WHERE municipalID=9001);
set @p = GeomFromText('POINT(24.1621 41.0548)');
select if(contains(@r, @p), 'yes', 'no'); 
```

第一个语句 set @r = ... 只返回一行，我专门选择它进行测试。它工作得很好。

我想要做的是搜索整个表（换句话说，擦除 SQL 问题中的 WHERE 部分）并找到该点在哪个多边形中。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T13:46:44.890

经过一夜睡眠后，我找到了以下解决方案。

```
set @p = GeomFromText('POINT(23.923739342824817 38.224714465253733)');
select municipalID FROM ecovis.municipal_border
where ST_Contains(municipal_border.boundary, @p); 
```

它适用于已实现[ST_ 前缀功能的 MySQL 5.6.1。](http://dev.mysql.com/doc/refman/5.6/en/functions-for-testing-spatial-relations-between-geometric-objects.html)尽管我没有从经典方法（X 射线算法）中获得任何测量结果，但我相信这相当快。在 2700 个多边形中定位一个点需要 0.17 秒，其中一些多边形的点数远远超过 1,500 个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-14T05:23:16.460

Pavlos Papanikolaou 的解决方案很棒。就我而言，表：**TestPoly**和列：**pol** Insert Query

```
SET @g = 'POLYGON((22.367582117085913 70.71181669186944, 22.225161442616514 70.65582486840117, 22.20736264867434 70.83229276390898, 22.18701840565626 70.9867880031668, 22.22452581029355 71.0918447658621, 22.382709129816103 70.98884793969023, 22.40112042636022 70.94078275414336, 22.411912121843205 70.7849142238699, 22.367582117085913 70.71181669186944))';
INSERT INTO TestPoly (pol) VALUES (ST_GeomFromText(@g)) 
```

选择查询

```
set @p = GeomFromText('POINT(22.4053386588057 70.86240663480157)');
select * FROM TestPoly where ST_Contains(pol, @p); 
```

# c - 无法修复 Bison 语法中的移位/减少冲突

> ID：15662911
> 
> 赞同：1
> 
> 时间：2013-03-27T15:36:04.670
> 
> 标签：c, grammar, bison, reduce, shift

我有以下野牛语法：

```
%error-verbose
%{
#include "node.h"
NBlock *programBlock;

#define YYDEBUG 1

extern int yylex();
void yyerror(const char *s) { printf("Error: %s\n", s); }
%}

%union {
    Node *node;
    NBlock *block;
    NBody *body;
    NHeader *header;
    NExpression *expression;
    NStatement *statement;
    NIdentifier *identifier;
    NVariableDeclaration *variableDeclaration;
    NDoWhileStatement *doWhileStatement;
    NWhileStatement *whileStatement;
    NIfStatement *ifStatement;
    NForStatement *forStatement;
    std::vector<NVariableDeclaration*> *variableDeclarations;
    std::vector<NExpression*> *expressions;
    std::vector<NStatement*> *statements;
    std:string *string;
    int token;
}

/*
The %token directive is used to associate a type to a terminal symbol.
%token <type> 'terminal_list'
associates the specific type <type> to each terminal in 'terminal_list'.
The type <type> is the same used in the %union declaration
*/

%token <string> TIDENTIFIER TINTEGER TDOUBLE
%token <token> TCEQ TCNE TCLT TCLE TCGT TCGE TEQUAL
%token <token> TLPAREN TRPAREN TLBRACE TRBRACE TCOMMA TDOT
%token <token> TPLUS TMINUS TMUL TDIV TDO TDOUBLE_TYPE TINT_TYPE
%token <token> TELSE TFOR TIF TSEMICOLON TTHEN TWHILE

/*
The %type directive is used to associate a type to a nonterminal symbol.
%type <type> nonterminal_list
associates the specific type <type> to each nonterminal in 'nonterminal_list'.
The type <type> is the same used in the %union declaration
*/

%type <expression> expression term factor
%type <block> program body header tail statements
%type <statement> statement forStatement ifStatement doWhileStatement whileStatement variableDeclaration
%type <token> comparison
%type <string> identifier_type

/*
Operator precedence for mathematical operators
*/

%left TPLUS TMINUS
%left TMUL TDIV
%left TCEQ TCNE TCLT TCLE TCGT TCGE

/*
Start grammar symbol
*/

%start program

%%

program:                TLBRACE body TRBRACE { printf("Reduce body to program\n"); }
                        ;

body:                   header TLBRACE block TRBRACE tail { printf("Reduce header block tail to body\n"); }
                        ;

header:                 TLBRACE variableDeclarations TRBRACE { printf("Reduce variableDeclarations to header\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to header\n"); }
                        ;

variableDeclarations:   variableDeclaration TSEMICOLON { printf("Reduce variable declaration to header\n"); }
                        | variableDeclarations variableDeclaration TSEMICOLON { printf("Reduce variable declaration list to header\n"); }
                        ;

tail:                   TLBRACE statements TRBRACE { printf("reduce statement list to tail\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to tal\n"); }
                        ;                   

statements:             statement TSEMICOLON { printf("Reduce statement to statement list\n"); }
                        | statements statement TSEMICOLON { printf("Reduce statement list to statement list\n"); }
                        ;

statement:              ifStatement { printf("Reduce if to statement\n"); };
                        | forStatement { printf("Reduce for to statement\n"); };
                        | doWhileStatement { printf("Reduce doWhile to statement\n"); };
                        | whileStatement { printf("reduce while to statement\n"); }
                        | TIDENTIFIER TEQUAL expression { printf("Reduce assignment to expression\n"); }
                        ;

forStatement:           TFOR TLPAREN expression TSEMICOLON expression TSEMICOLON expression TRPAREN block { printf("Reduce for to for statement\n"); }
                        ;

ifStatement:            TIF expression TTHEN block { printf("Reduce if to if statement\n"); }
                        | TIF expression block TELSE block { printf("Reduce ifelse to if statement\n"); }
                        ;

doWhileStatement:       TDO block TWHILE expression { printf("reduce dowhile to while statement\n"); }
                        ;

whileStatement:         TWHILE block expression { printf("Reduce while to while statement\n"); }
                        ;

block:                  TLBRACE statements TRBRACE { printf("Reduce statement list to block\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to block\n"); }
                        ;

variableDeclaration:    identifier_type TIDENTIFIER { printf("reduce uninitialized identifier to variable declaration\n"); }
                        | identifier_type TIDENTIFIER TEQUAL expression { printf("Reduce initialized identifier to variable declaration\n"); }
                        ;

identifier_type:        TINT_TYPE { printf("Reduce int to identifier type\n"); }
                        | TDOUBLE_TYPE { printf("Reduce double to identifier type\n"); }
                        | { printf("Reduce empty to identifier type\n"); }
                        ;

expression:             term { printf("Reduce term to expresson\n"); }
                        | expression comparison expression { printf("Reduce comparison to expression\n"); }
                        | expression TPLUS term { printf("Reduce addition to expression\n"); }
                        | expression  TMINUS term { printf("Reduce subtraction to expression\n"); }
                        ;

term:                   factor { printf("Reduce factor to term\n"); }
                        | term TMUL factor { printf("Reduce multiplication to term\n"); }
                        | term TDIV factor { printf("Reduce division to term\n"); }
                        ;

factor:                 TLPAREN expression TRPAREN { printf("Reduce nested expression to expression\n"); }
                        | TMINUS factor { printf("Reduce -factor to factor\n"); }
                        | TIDENTIFIER { printf("Reduce identifier to factor\n"); }
                        | TINTEGER { printf("Reduce integer to numeric\n"); }
                        | TDOUBLE { printf("Reduce double to numeric\n"); }
                        ;

comparison:             TCEQ { printf("Reduce eq to comparison\n"); }
                        | TCNE { printf("Reduce ne to comparison\n"); }
                        | TCLT { printf("Reduce lt to comparison\n"); }
                        | TCLE { printf("Reduce le to comparison\n"); }
                        | TCGT { printf("reduce gt to comparison\n"); }
                        | TCGE { printf("Reduce ge to comparison\n"); }
                        ; 
```

我得到 8 个班次/减少冲突，我不知道如何解决。

以下是我使用 --report=all 参数生成的 parser.output 文件的一部分。它是受 8 个移位/减少冲突影响的状态：

```
State 79

   29 expression: expression . comparison expression
   29           | expression comparison expression .  [TCEQ, TCNE, TCLT, TCLE, TCGT, TCGE, TRPAREN, TLBRACE, TPLUS, TMINUS, TSEMICOLON, TTHEN]
   30           | expression . TPLUS term
   31           | expression . TMINUS term
   40 comparison: . TCEQ
   41           | . TCNE
   42           | . TCLT
   43           | . TCLE
   44           | . TCGT
   45           | . TCGE

    TCEQ    shift and go to state 56
    TCNE    shift and go to state 57
    TCLT    shift and go to state 58
    TCLE    shift and go to state 59
    TCGT    shift and go to state 60
    TCGE    shift and go to state 61
    TPLUS   shift and go to state 62
    TMINUS  shift and go to state 63

    TCEQ      [reduction with rule 29 (expression)]
    TCNE      [reduction with rule 29 (expression)]
    TCLT      [reduction with rule 29 (expression)]
    TCLE      [reduction with rule 29 (expression)]
    TCGT      [reduction with rule 29 (expression)]
    TCGE      [reduction with rule 29 (expression)]
    TPLUS     [reduction with rule 29 (expression)]
    TMINUS    [reduction with rule 29 (expression)]
    $default  reduction with rule 29 (expression)

    comparison  go to state 64 
```

如果我理解得很好，问题是解析器不知道是继续阅读另一段文本还是立即减少规则表达式：表达式比较表达式。

我会说立即减少是正确的。但是，如果我这是正确的，那么我如何强制立即减少转移？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:56:56.513

您的语法不明确 - 输入 like`1 < 2 < 3`可以解析为`(1 < 2) < 3`or 或`1 < (2 < 3)`.

有两种方法可以解决这个问题——要么添加//`%left`指令以使用 bison 的内部优先级处理，要么引入额外级别的规则来处理它。`%right``%nonassoc`

现在，对于您的其他运算符 ( `*` `/` `+` `-`)，您正在同时执行这两项操作——这通常是一个错误，您只想执行其中一项。但是如果你同时*做*这两个，额外的规则将优先，优先指令将被忽略，有时会导致令人惊讶的问题。

像这样的关系的“正常”处理是说你不能有多个（这`1 < 2 < 3`是一个语法错误，不应该被解析为左或右递归。）要使用其他规则来做到这一点，你会改变你的表达规则：

```
expression:           add_expression
                    | add_expression comparison add_expression
                    ;
add_expression:       term
                    | add_expression TPLUS term
                    | add_expression TMINUS term
                    ; 
```

使用优先指令，摆脱`term`, `factor`, 和`comparison`( 将它们全部移入`expression`并添加：

```
%nonassoc TCEQ TCNE TCLT TCLE TCGT TCGE
%left TPLUS TMINUS
%left TMUL TDIV 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:17:24.573

问题是关联规则（如您的`%left`指令）不能通过语法间接工作。如果您取消`comparison`规则并将所有比较运算符拉到`expression`规则中，问题就会消失。（我用 Bison v2.4.1 验证了这一点。）

这可能很不方便，因为它`expression`比您想要的更冗长。一种解决方法是将决定推回扫描仪。定义`COMPARISON`为单个标记，并将比较的风格作为单独的枚举类型传递`yylval`，因此它可以作为`$n`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:46:50.810

感谢您的回答。这是完整的 Bison 语法：

```
%error-verbose
%{
#include "node.h"
#include <iostream>
#include <string>
NBlock *programBlock;

#define YYDEBUG 1

extern int yylex();
void yyerror(const char *) { printf("Error: %s\n", s); }
%}

%union {
    Node *node;
    NBlock *block;
    NBody *body;
    NHeader *header;
    NExpression *expression;
    NStatement *statement;
    NIdentifier *identifier;
    NVariableDeclaration *variableDeclaration;
    NDoWhileStatement *doWhileStatement;
    NWhileStatement *whileStatement;
    NIfStatement *ifStatement;
    NForStatement *forStatement;
    std::vector<NVariableDeclaration*> *variableDeclarations;
    std::vector<NExpression*> *expressions;
    std::vector<NStatement*> *statements;
    std:string *string;
    int token;
}

%token <string> TIDENTIFIER TINTEGER TDOUBLE
%token <token> TCEQ TCNE TCLT TCLE TCGT TCGE TEQUAL
%token <token> TLPAREN TRPAREN TLBRACE TRBRACE TCOMMA TDOT
%token <token> TPLUS TMINUS TMUL TDIV TDO TDOUBLE_TYPE TINT_TYPE
%token <token> TELSE TFOR TIF TSEMICOLON TTHEN TWHILE TLSQUARE TRSQUARE

%type <expression> expression term factor
%type <block> program body header tail
%type <statements> statements
%type <statement> statement
%type <forStatement> forStatement
%type <ifStatement> ifStatement
%type <doWhileStatement> doWhileStatement
%type <whileStatement> whileStatement
%type <variableDeclaration> variableDeclaration
%type <token> comparison
%type <string> identifier_type
%type <variableDeclarations> variableDeclarations

/*
Start grammar symbol
*/

%start program

%%

program:                TLBRACE body TRBRACE { printf("Reduce body to program\n"); }
                        ;

body:                   header TLBRACE block TRBRACE tail { printf("Reduce header block tail to body\n"); }
                        ;

header:                 TLBRACE variableDeclarations TRBRACE { printf("Reduce variableDeclarations to header\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to header\n"); }
                        ;

variableDeclarations:   variableDeclaration TSEMICOLON { printf("Reduce variable declaration to header\n"); }
                        | variableDeclarations variableDeclaration TSEMICOLON { printf("Reduce variable declaration list to header\n"); }
                        ;

tail:                   TLBRACE statements TRBRACE { printf("reduce statement list to tail\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to tal\n"); }
                        ;                   

statements:             statement TSEMICOLON { printf("Reduce statement to statement list\n"); }
                        | statements statement TSEMICOLON { printf("Reduce statement list to statement list\n"); }
                        ;

statement:              ifStatement { printf("Reduce if to statement\n"); };
                        | forStatement { printf("Reduce for to statement\n"); };
                        | doWhileStatement { printf("Reduce doWhile to statement\n"); };
                        | whileStatement { printf("reduce while to statement\n"); }
                        | TIDENTIFIER TEQUAL expression { printf("Reduce assignment to expression\n"); }
                        | TIDENTIFIER TLSQUARE TINTEGER TRSQUARE TEQUAL expression { printf("Reduce array assignment to expression\n"); }
                        ;

forStatement:           TFOR TLPAREN expression TSEMICOLON expression TSEMICOLON expression TRPAREN block { printf("Reduce for to for statement\n"); }
                        ;

ifStatement:            TIF expression TTHEN block { printf("Reduce if to if statement\n"); }
                        | TIF expression TTHEN block TELSE block { printf("Reduce ifelse to if statement\n"); }
                        ;

doWhileStatement:       TDO block TWHILE expression { printf("reduce dowhile to while statement\n"); }
                        ;

whileStatement:         TWHILE block expression { printf("Reduce while to while statement\n"); }
                        ;

block:                  TLBRACE statements TRBRACE { printf("Reduce statement list to block\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to block\n"); }
                        ;

variableDeclaration:    identifier_type TIDENTIFIER { printf("Reduce uninitialized identifier to variable declaration\n"); }
                        | identifier_type TIDENTIFIER TLSQUARE TINTEGER TRSQUARE { printf("Reduce  array to variable declaration\n"); }
                        | identifier_type TIDENTIFIER TEQUAL expression { printf("Reduce initialized identifier to variable declaration\n"); }
                        | identifier_type TIDENTIFIER TLSQUARE TINTEGER TRSQUARE TEQUAL expression { printf("Reduce initialized array to variable declaration\n"); }
                        ;

identifier_type:        TINT_TYPE { printf("Reduce int to identifier type\n"); }
                        | TDOUBLE_TYPE { printf("Reduce double to identifier type\n"); }
                        | { printf("Reduce empty to identifier type\n"); }
                        ;

expression:             add-expression { printf("Reduce add-expression to expression\n"); }
                        |add-expression comparison add-expression { printf("Reduce add-expression comparison add-expression to expression\n"); }

add-expression:         term { printf("Reduce term to expresson\n"); }
                        | add-expression TPLUS term { printf("Reduce addition to expression\n"); }
                        | add-expression  TMINUS term { printf("Reduce subtraction to expression\n"); }
                        ;

term:                   factor { printf("Reduce factor to term\n"); }
                        | term TMUL factor { printf("Reduce multiplication to term\n"); }
                        | term TDIV factor { printf("Reduce division to term\n"); }
                        ;

factor:                 TLPAREN expression TRPAREN { printf("Reduce nested expression to expression\n"); }
                        | TMINUS factor { printf("Reduce -factor to factor\n"); }
                        | TIDENTIFIER { printf("Reduce identifier to factor\n"); }
                        | TINTEGER { printf("Reduce integer to numeric\n"); }
                        | TDOUBLE { printf("Reduce double to numeric\n"); }
                        ;

comparison:             TCEQ { printf("Reduce eq to comparison\n"); }
                        | TCNE { printf("Reduce ne to comparison\n"); }
                        | TCLT { printf("Reduce lt to comparison\n"); }
                        | TCLE { printf("Reduce le to comparison\n"); }
                        | TCGT { printf("reduce gt to comparison\n"); }
                        | TCGE { printf("Reduce ge to comparison\n"); }
                        ; 
```

# javascript - img.height 与 img.style.height 有什么区别？

> ID：15662921
> 
> 赞同：1
> 
> 时间：2013-03-27T15:36:42.110
> 
> 标签：javascript, html, dom, html5-canvas

我正在尝试通过遍历数组并调整它们的大小来调整一堆图像的大小

```
if(items[0].height > 700 || items[0].width > 700){
  items[0].style.height = "700px";
   items[0].style.width = "700px";
} 
```

当我使用画布尝试裁剪图像时，我注意到我给它裁剪的坐标并没有削减我的预期。

我将假设 img.style.height 仅更改显示属性，而 img.height 更改 img 的实际尺寸？还是他们做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:39:37.660

`img.height`指元素上的height属性，`img.style.height`指定义为样式的高度（如在css中）

为了

`img.height`将是 20。

为了

```
<img id="example" style="height:20"> 
```

`img.style.height`将是 20。如果您通常设置样式，则最好更喜欢使用样式并将您对将高度硬编码为属性的担忧分开。所以在这种情况下可能会在图像上设置一个类并将高度放在 CSS 中。

如果您正在阅读样式，`img.height`无论其设置如何，都会返回实际高度，因此更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:47:51.457

我发现的主要区别（除了@ben336 描述的属性的性质）在于它们可以表示的内容。

*   **img.height**将始终以*像素为单位表示高度。*这仅在 HTML5 中是正确的，这就是我根据标签猜测您正在使用的内容。早期版本的 HTML 允许通过 img.height 指定百分比和像素，这让我的观点没有实际意义。

    ```
    img.height = 20; // Always means 20 pixels. 
    ```

*   **另一方面， img.style.height**将表示高度，以*像素*为单位或以原始大小的*百分比表示。*

    ```
    img.style.height = 20px; // 20 pixels in height; 
    ```

    或者

    ```
    img.style.height = 20%; // 20% of original height. 
    ```

# ruby - Ruby 继承和建议方法？

> ID：15662932
> 
> 赞同：0
> 
> 时间：2013-03-27T15:37:06.250
> 
> 标签：ruby

我想要的是一个单一的 API，它根据通过初始化程序传递的参数来确定将方法委托给的类。这是一个基本示例：

```
module MyApp
  class Uploader
    def initialize(id)
      # stuck here
      # extend, etc. "include Uploader#{id}"
    end
  end
end

# elsewhere
module MyApp
  class UploaderGoogle
    def upload(file)
      # provider-specific uploader
    end
  end
end 
```

我想要的结果：

```
MyApp::Uploader('Google').upload(file)
# calls MyApp::UploaderGoogle.upload method 
```

请注意，以上仅用于演示目的。我实际上将传递一个对象，该对象包含一个带有上传者 ID 的属性。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:51:05.287

听起来你想要一个简单的子类。`UploaderGoogle < Uploader`Uploader 定义了基本接口，然后子类定义了提供者特定的方法，根据需要调用 super 来执行上传。未经测试的代码 OTTOMH 下面...</p>

```
module MyApp
    class Uploader
        def initialize(id)
            @id = id
        end

        def upload
            #perform upload operation based on configuration of self. Destination, filename, whatever
        end
    end

    class GoogleUploader < Uploader
        def initialize(id)
            super
            #google-specific stuff
        end

        def upload
            #final configuration/preparation
            super
        end
    end
end 
```

类似的东西。为了基于传递的参数，我会使用一个`case`语句。

```
klass = case paramObject.identifierString
    when 'Google'
        MyApp::GoogleUploader
    else
        MyApp::Uploader
    end 
```

两件事：如果你在几个地方这样做，可能会将它提取到一个方法中。其次，如果您从用户那里获得输入，那么如果您直接从提供的字符串创建类名，那么您还有很多反注入工作要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:19:48.473

还没有测试过，但是如果你想要`include`一个模块：

```
module MyApp
  class Uploader
    def initialize(id)
      mod = ("Uploader"+id).constantize
      self.send(:include, mod)
    end
  end
end 
```

如果你想用一个模块扩展你的类：

```
module MyApp
  class Uploader
    def initialize(id)
      mod = ("Uploader"+id).constantize
      self.class.send(:extend, mod)
    end
  end
end 
```

# joomla - joomla 1.5，致命错误：找不到类“JModelList”

> ID：15662938
> 
> 赞同：1
> 
> 时间：2013-03-27T15:37:24.283
> 
> 标签：joomla, content-management-system, joomla1.5, joomla-extensions, classnotfound

一个 joomla 网站给了我这个错误：

> 致命错误：在第 16 行的 /home/site/public_html/administrator/components/com_joomdoc/libraries/joomdoc/application/component/modellist.php 中找不到类“JModelList”

我今天早上尝试搜索时才注意到它，我最后一次在该网站上工作是一个多月前（安装，删除扩展，修复错误......）所以我真的无法弄清楚这一点错误浮出水面。

我在某处读到 JModelList 类未在 Joomla 1.5 中使用（我正在使用的）....我不知道这是怎么发生的，因为我确信我使用的扩展支持 joomla 1.5，我从来没有进行了升级。

以防万一，modellist.php 的第 16 行是

```
jimport('joomla.application.component.modellist');

class JoomDOCModelList extends JModelList { ... 
```

帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:33:55.813

就像你说的，`JModelList`它不是 Joomla 1.5 的一部分，所以你的扩展与 Joomla 1.5 不兼容。

Joomla 本身不会更新任何内容。如果您没有改变任何东西，那么其他人已经改变了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:36:04.710

JModelList 在 Joomla 1.5 中确实不可用。它是在 Joomla 1.6 中引入的。

显然，在这种情况下，扩展不再与 Joomla 1.5 兼容。您必须联系扩展程序的开发人员以获取更多信息或将错误通知他。

但是，无论如何，您都应该升级 Joomla。您使用的是不受支持的版本。

# php - 与 mysql_real_escape_string 苦苦挣扎

> ID：15662939
> 
> 赞同：0
> 
> 时间：2013-03-27T15:37:31.330
> 
> 标签：php

任何人都可以帮忙。我试图在传递给 PHP 的值上使用 mysql_real_escape_string 来支持我的安全性，以用于内部消息传递服务，但我一定是在某处出现语法错误，因为这些值没有被插入到数据库中。我四处寻找教程，帮助等，但努力做到正确。

我正在使用的代码如下。未转义的值（$email、$from、$time）输入正确，但其他值只是输入空白。

```
<?php
session_start();
$conn = mysqli_connect('localhost', 'username', 'password', 'dbname');

$email=$_SESSION['email'];
$to = $_POST ['touser'];
$toemail = $_POST['touseremail'];
$from = $_SESSION['name'];
$message = $_POST['message'];
$subject = $_POST['subject'];
$time = time();

$query ="INSERT INTO messages
(to_user, to_email, subject, message, from_user, from_email, daterecord)
VALUES (
'" . mysql_real_escape_string($conn, $to) . "', 
'" . mysql_real_escape_string($conn, $toemail) . "', 
'" . mysql_real_escape_string($conn, $subject) . "', 
'" . mysql_real_escape_string($conn, $message) . "', 
'$from', '$email', '$time')";
$send = $conn -> query($query);

echo "Message sent!";

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:38:57.527

查看函数[mysqli_real_escape_string()](http://php.net/manual/en/mysqli.real-escape-string.php)

我还应该注意，这些天转义字符串的首选方法是[参数绑定](http://php.net/manual/en/mysqli-stmt.bind-param.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:39:11.540

您正在使用`mysql_real_escape_string`而不是`mysqli_real_escape_string`.
修复它，它会更好地工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:40:24.793

改用函数**mysqli_real_escape_string()**

文档：[http ://www.php.net/manual/en/mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:43:58.013

您遇到的实际问题是您在`mysql`扩展程序和`mysqli`扩展程序之间混淆了。

如果您正在使用`mysqli_connect()`，那么您使用的所有 DB 函数都必须开始`mysqli_`。

当您`mysql_real_escape_string`真正想要的功能是`mysqli_real_escape_string`.

这`i`是非常重要的。

但是，如果您允许我超越所描述的实际问题，我建议您不要使用转义查询，而是使用参数化查询。

参数化查询是一种允许您指定如下查询的技术：

```
SELECT fieldname from talbe WHERE arg = ? AND arg2 = ? 
```

然后`?`用你的变量替换那些 s [`mysqli_bind_param()`](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)。

这种技术被认为是比使用转义字符串更好的技术。

希望有帮助。

# android - 在 android 和 ios 设备之间转码电影文件

> ID：15662942
> 
> 赞同：0
> 
> 时间：2013-03-27T15:37:45.190
> 
> 标签：android, ios, video-processing, transcoding, mov

我有一个 iOS 和 Android 应用程序，允许用户捕获视频并在我们的服务器上发布，然后允许他们通过电子邮件将视频发送给其他成员。

问题是从 iOS 设备拍摄的视频不能在 Android 设备上播放，我认为反过来也不是问题。

有谁知道任何很容易设置的服务器端视频转码工具，以便我可以将所有视频转换为可以在任何设备上播放的通用格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:57:41.347

看看[FFMPEG](http://www.ffmpeg.org/)。

您可以在后端系统中使用它。此任务应该是异步的，因为它可能很耗时。此外，您还需要限制要转码的媒体的大小及其数量，因为此类任务会迅速导致重要的性能问题。

另一方面，Android 用户可以使用 Play 商店中许多支持 FFMPEG 的免费播放器（例如[MXPLayer](https://play.google.com/store/apps/details?id=com.mxtech.videoplayer.ad&hl=fr) ）播放 iOS 用户共享的媒体。因此，使用或构建整个服务器端转码系统可能是一项重要的开销。

# bash - sed & awk，第二列修改

> ID：15662943
> 
> 赞同：0
> 
> 时间：2013-03-27T15:37:50.577
> 
> 标签：bash, sed, awk

我有一个文件，我需要对其进行一些简单的修改。通常，我不会有问题，但是列几乎相同，这让我很失望。

一些例子：

```
net_192.168.0.64_26 192.168.0.64_26  
net_192.168.0.128-26 192.168.0.128-26 
```

ETC

现在，通常在流中我只修改第二列，但是我需要将其写入一个让我感到困惑的文件。

下面的字符串做了我需要它做的事情，但是我失去了对第一列的可见性，并且无法将它传递到有用的地方：

```
cat file.txt | awk '{print $2}' | sed 's/1_//g;s/2_//g;s/1-//g;s/2-//g;s/_/\ /g;s/-/\ /g' | egrep '[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}\.[[:digit:]]{1,3}' 
```

输出需要看起来像（子网成为第 3 列）：

```
net_192.168.0.64_26 192.168.0.64 26  
net_192.168.0.128-26 192.168.0.128 26 
```

我该如何做上述行，同时保持两列可见，以便我可以将它们通过管道传输到新文件/修改旧文件等。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:43:47.747

试试这个，如果它适合你：

```
awk '{gsub(/[_-]/," ",$2)}1' file 
```

使用您的示例文本进行测试：

```
kent$  echo "net_192.168.0.64_26 192.168.0.64_26  
net_192.168.0.128-26 192.168.0.128-26"|awk '{gsub(/[_-]/," ",$2)}1'
net_192.168.0.64_26 192.168.0.64 26
net_192.168.0.128-26 192.168.0.128 26 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:43:56.763

如果您只想替换 characters `_`，`-`请在第二个字段中使用一个空格，然后：

```
$ awk '{gsub(/[-_]/," ",$2)}1' file
net_192.168.0.64_26 192.168.0.64 26
net_192.168.0.128-26 192.168.0.128 26 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:54:40.600

还有一个`sed`版本：

```
sed 's/\(.*\)[-_]/\1 /' file 
```

# solr - 附加到 Solr 索引

> ID：15662945
> 
> 赞同：0
> 
> 时间：2013-03-27T15:37:52.883
> 
> 标签：solr, indexing

这可能是一个微不足道的问题，但我正在尝试附加到现有的 Solr 索引，并且似乎每次都覆盖了那里的内容。我有两个要从中获取数据的数据库，我可以分别从每个数据库导入数据，但是当我从一个数据库导入数据然后立即从第二个数据库导入数据时，第一个被覆盖。我在我的 db-config.xml 文件中映射了两个数据源，并且我正在使用标准的管理 UI 来运行导入。我的配置文件看起来像这样。

```
<dataConfig>
  <dataSource 
    name="ds-1"
    type="JdbcDataSource" 
    driver="Driver"
    url="jdbc_url1" 
    user="user1" 
    password="pass1"/>

<dataSource
    name="ds-2"
    type="JdbcDataSource" 
    driver="Driver"
    url="jdbc_url2" 
    user="user2" 
    password="pass2"/>

   <document>

 <entity name="entity1" dataSource="ds-1" query="SELECT YYY  FROM TABLE">
      ...
    </entity>

 <entity name="entity2" dataSource="ds-2" query="SELECT ZZZ FROM TABLE">
      ...
    </entity>

  </document>
</dataConfig> 
```

我能做些什么来防止原始索引被覆盖。我想一直递增地添加来自各种不同来源的数据，所以让我的索引被擦除现在对我有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:49:31.873

您的问题是您可能正在将索引文档的键定义为数据库中的主键 id，并且值是重叠的。为了防止这种情况，您需要为 Solr 指定一个唯一的 ID。通常，当我过去遇到这个问题时，我使用一个字符串字段作为 id 字段，并将一个或两个字符附加到数据库中的 id 以使其唯一。示例：产品表中的项目将具有 P1、P2 等 ID，订单表中的项目将具有 O1、O2 等 ID。

您应该能够使用数据导入处理程序[TemplateTransformer](http://wiki.apache.org/solr/DataImportHandler#TemplateTransformer)来帮助您完成此操作。

# android - Android UI：从 html 到 XML

> ID：15662947
> 
> 赞同：0
> 
> 时间：2013-03-27T15:37:57.160
> 
> 标签：android, html, xml, user-interface

我已经使用 XML Eclipse 工具开发了一个应用程序，也构建了我的 UI。现在，我想使用像 Axure 这样的工具来创建一个“更好”的界面。我的问题是：有没有一种简单的方法可以从 XML 切换到 HTML（因为 Axure 是从 Wireframe 设计中生成 HTML 文件）？如果没有，如何将 HTML 文件“插入”到现有应用程序（使用 R.layout.xxx 或 R.id.xxx 访问显示的元素）。

顺便说一句，我对 Android 还是很陌生...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:45:18.377

你不能真正做到你所描述的。在 XML 中指定 Android 布局的方式根本无法与网站的 HTML 进行比较。此外，Axure 是一个模型工具。它创建交互式模型和原型 - 不是任何东西的最终解决方案。

如果你真的想使用 Axure，也许你会想使用[PhoneGap 之](http://phonegap.com/)类的 Web 应用程序——它们是用 HTML 和 JavaScript 编写的，但可能性较小。

# reporting-services - SSRS 2010 条形图数据系列

> ID：15662951
> 
> 赞同：0
> 
> 时间：2013-03-27T15:38:02.063
> 
> 标签：reporting-services

我有一个条形图，我试图将销售数据限制在特定的月份/年份。我想要 2012 年的销售额总和和 2013 年的销售额总和。月份名称的格式为 2012 年 1 月、2013 年 1 月等。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:45:21.757

您需要选择“类别组属性”并将其更改为按年份分组，而不仅仅是日期。

1.  对于我们的示例，选择“类别组”添加一个组，例如“dt”，它是一个日期字段。
2.  现在单击它旁边的向下箭头，然后选择“属性”。
3.  在“常规”窗格中，选择“分组：”部分，然后单击函数的“fx”按钮。
4.  把它放在 =Year(Fields!dt.Value)
5.  点击确定

您现在正在覆盖您的默认分组，现在按年份而不是完整日期分组。这个过程也可以持续数月和数天。

如果您的日期数据字段不是合法的日期字段，您需要首先确保它是“日期”或“日期时间”数据类型。

# twitter-bootstrap - 防止月/年选择更改日期

> ID：15662952
> 
> 赞同：1
> 
> 时间：2013-03-27T15:38:07.527
> 
> 标签：twitter-bootstrap, datepicker

我正在使用[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)并尝试更改特定行为：当您从可以选择一天的视图更改为可以选择一个月的视图时（或查看可以选择年份的位置），当您选择月份（或年份）时，日期将更改为该月（或年份）的第一天。我不希望那样触发`changeDate`事件。

或者，如果有办法禁用月/年视图，那可能也可以。

我在这个日期选择器的文档中没有看到任何表明这是可能的，但我希望它是可能的。

**跟进：**

我打开`bootstrap-datepicker.js`并注释掉了第 285-292 行，这似乎适用于上述内容。

```
//if (this.viewMode !== 0) {
//  this.date = new Date(this.viewDate);
//  this.element.trigger({
//      type: 'changeDate',
//      date: this.date,
//      viewMode: DPGlobal.modes[this.viewMode].clsName
//  });
//} 
```

`onRender`但是，在同样的情况下如何预防呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:47:09.410

在同一个`bootstrap-datepicker.js`文件中，我修改了第 210 行：

```
clsName = this.onRender(prevMonth); 
```

对此：

```
clsName = (this.viewMode == 0) ? this.onRender(prevMonth) : ''; 
```

`viewMode`现在，仅当当前为`0`（天）时才调用 onRender 。

# javascript - Chrome DOM/JavaScript 参考

> ID：15662958
> 
> 赞同：19
> 
> 时间：2013-03-27T15:38:40.533
> 
> 标签：javascript, google-chrome, dom

是否有像[*Mozilla 开发者网络*](https://developer.mozilla.org/)这样的 Chrome Javascript/DOM 参考页面？哪个其他页面涵盖了“标准”的 Chrome 特定实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T15:56:16.810

我所知道的没有任何特定的*Chrome 浏览器。*有[Webkit API 文档](http://developer.apple.com/library/safari/#documentation/appleapplications/conceptual/SafariJSProgTopics/WebKitJavaScript.html#//apple_ref/doc/uid/30001232-SW1)，但不是很全面，也只是指向 MDN！如果您看到*Using the Document Object Model From JavaScript → Other Resources*页面，它指出：

> Mozilla [Gecko DOM 参考](https://developer.mozilla.org/en/Gecko_DOM_Reference)是 JavaScript DOM 最全面的参考之一

[WebPlatform.org](http://www.webplatform.org/)最终将覆盖所有浏览器。

另外，我通常发现 MDN 无论如何都会强调其他浏览器的兼容性，例如 Chrome 显示在[DOM Mutation Observer](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)页面上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:44:37.250

[https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-discuss/N56v_0tOVaM](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-discuss/N56v_0tOVaM)

Chrome 使用 V8 JavaScript 引擎，它实现了 ECMAScript ECMA-262，[http://www.ecma-international.org/publications/standards/Ecma-262.html](http://www.ecma-international.org/publications/standards/Ecma-262.html)

查看这些链接以了解实施和标准

# html - Twitter bootstrap 下拉活动导航创建一个白色区域，看起来很奇怪

> ID：15662960
> 
> 赞同：2
> 
> 时间：2013-03-27T15:38:43.473
> 
> 标签：html, css, twitter-bootstrap, drop-down-menu, nav

我已经看了好几个小时了，不知道发生了什么。任何帮助将不胜感激，谢谢。这是一个非常奇怪的问题，我认为最好只向您展示，而不是详细说明，所以请在下面找到问题的链接，目前在我网站的开发页面上。

[http://dev.cccit.co.uk/about-us/our-team/](http://dev.cccit.co.uk/about-us/our-team/)

正如您所看到的，活动下拉菜单似乎与导航栏中的活动标题一起工作，但是当突出显示导航选择时，它会使标题看起来更暗并且也没有选择整个框（错过了信息部分） . 亲自查看可能更容易......将鼠标悬停在导航栏中的“关于我们”上，您会看到。

我最初认为这可能与css相关....有一个单独的css文件用于颜色选择，我已经更改了每个选项而没有任何影响，而让我认为这无济于事的是整个菜单的奇怪方式悬停时不会改变。请在下面找到代码的副本，请记住我在本节中使用 php，但无论如何它也做同样的事情，所以我还更改了“支持”的标题，以便您可以看到它正在做一样。

我想有人可能遇到过同样的事情，如果您需要更多信息或文件，请与我们联系。先感谢您

`div 类="容器">

```
 <div id="nav-wrapper">
            <div class="navbar">
                <div class="navbar-inner">
                    <div class="container">
                        <div class="buttons-container">
                        </div>
                        <div class="nav-collapse">
                            <ul class="nav nav-pills">
                                <li class="single"><a href="../index.php">HOME
                                        <i></i>
                                    </a>
                                </li>
                                <li <?php if($pageName == "About Us")echo " class='dropdown active' ";?> class="dropdown">
                                    <a href='/about-us'>
                                        ABOUT US<i></i>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li <?php if($pageMetaTitle == "Our Team")echo " class='active' ";?>><a href="/about-us/our-team">Our Team</a></li>
                                        <li <?php if($pageMetaTitle == "Philosophy")echo " class='active' ";?>><a href="/about-us/philosophy">Philosophy</a></li>
                                        <li <?php if($pageMetaTitle == "FAQs")echo " class='active' ";?>><a href="/about-us/faqs">FAQs</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown active">
                                    <a href="/support">
                                        SUPPORT<i>IT support for business</i>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="/support/support-packages">Support Packages</a></li>
                                        <li><a href="/support/sla">Service Level Agreements</a></li>
                                        <li><a href="/support/faqs">FAQs</a></li>
                                    </ul>
                                </li> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:48:30.243

删除您为`<i>`标签设置的自定义背景颜色。

注意到 Firebug 上的悬停效果，颜色与父元素的悬停效果不匹配。

# authentication - http_basic_authenticate_with 和 authenticate_or_request_with_http_basic 有什么区别？

> ID：15662969
> 
> 赞同：23
> 
> 时间：2013-03-27T15:39:17.180
> 
> 标签：authentication, ruby-on-rails-3.2

和有什么区别

```
http_basic_authenticate_with() 
```

和

```
authenticate_or_request_with_http_basic() 
```

方法？

感谢您的完整解释。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-27T15:53:33.227

据我从[文档](http://apidock.com/rails/ActionController/HttpAuthentication/Basic "文档")中了解到的，`http_basic_authenticate_with`充当一个接受名称和密码的前置过滤器，例如

```
http_basic_authenticate_with :name => "dhh", :password => "secret", :except => :index 
```

而 authenticate_or_request_with_http_basic 接受一个块，允许您插入一些代码以确定是否应该对其进行身份验证（[文档](http://apidock.com/rails/ActionController/HttpAuthentication/Basic/ControllerMethods/authenticate_or_request_with_http_basic)）。例如

```
before_filter :authenticate

def authenticate
  authenticate_or_request_with_http_basic('Administration') do |username, password|
    ActiveSupport::SecurityUtils.secure_compare(username, "admin") &&
    ActiveSupport::SecurityUtils.secure_compare(password, "password")
  end
end 
```

# java - 使用 Android NDK 构建 Soundtouch

> ID：15662981
> 
> 赞同：3
> 
> 时间：2013-03-27T15:40:08.497
> 
> 标签：java, android, c++, android-ndk, soundtouch

我正在尝试在我的 Android 项目中导入 Soundtouch 库，但我不是本机代码高级用户，所以这可能就是为什么我在理解构建的方式时遇到了一些问题。
我尝试遵循他的指导方针：
[Android : Help in Compiling SoundTouch lib in android](https://stackoverflow.com/questions/11289145/android-help-in-compiling-soundtouch-lib-in-android)
这意味着，我创建了 2 个文件夹（**include/**和**SoundTouch/**）并分别插入了标题和 .cpp 文件。
之后，我使用了他的*Android.mk*，当我尝试*ndk-build*时，我得到了这个：

`Android NDK: WARNING: Ignoring invalid values in LOCAL_CPP_FEATURES definition in /home/user/workspace/Player/jni/Android.mk: -fno-exceptions
Android NDK: WARNING: Ignoring invalid values in LOCAL_CPP_FEATURES definition in /home/user/workspace/Player/jni/Android.mk: -fno-exceptions
make: *** No rule to make target /home/user/Downloads/android-ndk-r8d/build/core/SoundTouch/AAFilter.cpp', needed by /home/user/workspace/Player/obj/local/armeabi-v7a/objs/SoundTouch/SoundTouch/AAFilter.o'. Stop.`

据我所知，我可以删除*-fno-exceptions*标志，因为在较新版本的 NDK 中，默认情况下禁用异常处理，但我不明白*make*部分有什么问题。
提前致谢。

# jquery - 在用户模型中使用 jQuery 渲染部分

> ID：15662982
> 
> 赞同：1
> 
> 时间：2013-03-27T15:40:18.743
> 
> 标签：jquery, ruby-on-rails, ruby, ajax

我对 Rails 比较陌生，所以我不确定我是否正确路由/构造了我的控制器和视图。

简单地说，我只是尝试使用 user/show.html.erb 页面中的选项卡来使用 jQuery 在其下方的内容区域中呈现部分内容。

但是，当我使用代码刷新页面时，出现以下错误：

```
undefined local variable or method `userprofile_path' for #<#<Class:0x007f8c181e9ff0>:0x007f8c171662a0> 
```

我的 app>views>users>show.html.erb ：

```
<div id="profile-box">
<ul class="profile-tabs">
        <%= link_to "<li class=\"tab selected\">Current</li>".html_safe, userprofile_path, remote: true %>
        <%= link_to "<li class=\"tab\">Offers</li>".html_safe, userprofile_path, remote: true %>
        <%= link_to "<li class=\"tab\">Sales</li>".html_safe, userprofile_path, remote: true %> 
    </ul>

<div id="profile-content">

</div>
</div> 
```

我的 app>controllers>users_controller.rb ：

```
class UsersController < ApplicationController

def show
    @user = User.find(params[:id])
end

def userprofile
    respond_to do |format|
        format.js
    end
end

end 
```

我的 app>assets>javascripts>userprofile.js ：

```
$(function() {
        $("li.tab").click(function(e) {
          e.preventDefault();
          $("li.tab").removeClass("selected");
          $(this).addClass("selected");
          $("#profile-content").html("<%= escape_javascript(render partial: 
"users/offers")%>");
        });
    }); 
```

我也在使用设计，所以这是我的 routes.rb 文件：

```
devise_for :admin_users, ActiveAdmin::Devise.config

devise_for :users, :path => '', :path_names => {:sign_in => 'login', :sign_out => 'logout'}

resources :users 
```

由于我是 Rails 新手，我不确定它是否是代码错误或缺失、文件命名不正确、是否需要某个新文件以使其工作，或者它到底是什么问题。

如果有人能在我需要的代码和应用程​​序的结构方面为我指明正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:08:24.887

您必须在使用操作之前声明一条路线......`resources`仅创建标准的宁静路线，在这种情况下您必须添加自定义路线。例子 ：

```
resources :users do
  collection do
    get :userprofile # it would create a helper like userprofile_users_path
  end
end 
```

有关更多信息，请参阅[有关路由的 rails 指南。](http://guides.rubyonrails.org/routing.html)

作为旁注，如果您的操作仅涉及一个用户，请使用`member`而不是`collection`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:16:21.933

要添加`userprofile_path`路线，请执行以下操作：

```
devise_for :users, :path_names => {:sign_in => 'login', :sign_out => 'logout'} do
   match '/profile', :to => 'users#userprofile', :as => 'userprofile'
end 
```

# haskell - 加速 GHC 中的编译

> ID：15662984
> 
> 赞同：11
> 
> 时间：2013-03-27T15:40:19.670
> 
> 标签：haskell, ghc, compilation-time

除了 之外，是否有`-O0`可以加快编译时间的选项？

生成的程序是否不会被优化并不重要。实际上，我只想经常快速地对大型 haskell 包进行类型检查。

Flag`-fno-code`极大地加快了编译速度，但由于该程序使用了 TemplateHaskell，因此无法使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:48:21.307

看起来像是[hdevtools](https://github.com/bitc/hdevtools)的任务！Hdevtools 被用作同名 vim 插件的后端，它直接从编辑器提供快速的语法和类型检查。重新加载模块时，它与 ghci 一样快。我假设它可以从命令行使用。

另一种选择是保持 ghci 实例运行并使用它来检查您的模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:34:24.170

我发现拆分大文件可以加快编译速度。

# javascript - div scrollTop（）不工作

> ID：15662985
> 
> 赞同：0
> 
> 时间：2013-03-27T15:40:21.120
> 
> 标签：javascript, jquery, html, scroll

所以我有这个小提琴：http: [//jsfiddle.net/TLkmK/](http://jsfiddle.net/TLkmK/)

```
<div class="test" style="height:100px;width:70px;overflow:auto">
    sadfsadf

    saf
    sadf
    saf
    s
    af
    saf
    saf
    sadf
    sadfsafsafsaf
    sadfsaf

    sadfsafsadf

    sadfsaf
    sa
    dfsa
    fsadf
</div>
alert($('.test').scrollTop()); 
```

尝试向下滚动栏

我正在尝试获取 div 的 scrollTop() 属性，但它总是返回 0 而不是正确的 scrollTop

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:43:40.917

它总是`0`在您最初加载页面时，因为您还没有时间滚动。我还建议您使用`console.log`而不是，`alert`这样您就可以继续使用该页面。

您可以使用该`scroll`事件来侦听用户滚动，然后根据该事件更新您想要的任何内容。我不能说没有你的用例，但无论如何你都应该使用一些事件来触发读取位置。

[http://jsfiddle.net/TLkmK/1/](http://jsfiddle.net/TLkmK/1/)

```
var el = $('.test');
console.log(el.scrollTop());

el.on('scroll', function(){
  console.log(el.scrollTop());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:45:18.597

你可以很容易地做这样的事情

```
$('.test').scroll(function() {
    alert($(this).scrollTop());
}); 
```

每次都会提醒一个新值，或者使用console.log

```
 $('.test').scroll(function() {
        console.log($(this).scrollTop());
   }); 
```

# html - 铬合金。无论我做什么，用户代理样式表都会覆盖边框。如何去除边框？

> ID：15662986
> 
> 赞同：0
> 
> 时间：2013-03-27T15:40:23.470
> 
> 标签：html, css, dreamweaver, fireworks

![截屏](../Images/1a1d03ff7582d4abc1b7fa84a8a4c2b5.png)

我从烟花中雕刻出这个简单的时事通讯，无论我做什么，边框的用户代理样式表仍然存在。

我什至尝试过内联样式（截图），但仍然无法覆盖用户代理样式表。

如何从我的表格中删除边框？

也试过reset.css

代码在这里[pastebin](http://pastebin.com/ShkdhKns)

此处为大屏幕截图[大屏幕截图](https://i.imgur.com/UmSVBFs.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:07:01.820

您正在使用表格进行布局，这是完全错误的并且已经过时了。表格仅用于列出项目，而不用于一般结构/布局！

尝试使用正确的 HTML/CSS 重建布局！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:09:05.737

您应该使用 css`border`属性而不是边框​​属性。

`table{ border:none;}`

# c# - 如何在winforms中更新数据网格视图？

> ID：15662989
> 
> 赞同：0
> 
> 时间：2013-03-27T15:40:33.390
> 
> 标签：c#, winforms, visual-studio, datagridview

我的winforms中有一个页面，我想在表格上显示所有数据，以便用户可以在表格中看到信息，但在winforms上。我以前没有这样做过，所以需要你们的一些指导，我希望它能够始终如一地（当添加新记录时）更新并且是可编辑的，以便在需要时可以删除一行。我拥有的表是“预订”，我可以向该表添加数据的表单是“frmBooking”，所以我希望在程序运行时进行的预订数据存储在 datagridview 中，以便用户可以查看他们的预订。谢谢我的代码是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace project
{
    public partial class frmViewBookings : Form
    {
        public frmViewBookings()
        {
            InitializeComponent();
        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            Form3 mainpage = new Form3();
            mainpage.Show();
            this.Close();
        }

        private void frmViewBookings_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'usersDataSet1.Booking' table. You can move, or remove it, as needed.
            this.bookingTableAdapter.Fill(this.usersDataSet1.Booking);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:45:34.230

您可以使用将 datagridview 绑定到源的 datagridview 的 DataSource 属性。例如。一个数据表。

每当编辑数据表时，都会更新数据网格视图。

您还可以通过添加行和列来手动修改 datagridview，但这需要更多的工作。

编辑：如果您希望您的更改更新到 datagridview，您需要修改作为绑定源的数据表。

# python - 如何在一个 .py 文件中获取所有类的列表？

> ID：15662990
> 
> 赞同：2
> 
> 时间：2013-03-27T15:40:35.707
> 
> 标签：python

```
mm.py

class A():
    def __init__(self):
           pass
class B():
    def __int__(slef):
           pass 
```

如何生成 mm.py 中所有类的列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:25:51.710

您可以使用`inspect`：

```
import myModule

import inspect    
print inspect.getmembers(myModule, inspect.isclass) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:59:38.887

您可以使用 dir (module) 导入模块并扫描其中的所有名称：

```
import mymodule
import types

for item in dir(mymodule):
    itemtype = type(item)
    if itemtype == types.ClassType:
        print item + "is old style class"
    if itemtype == types.TypeType:
        print item + "is new style class" 
```

更新了新旧样式类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:23:58.403

可能您可以将 locale() 函数与过滤一起使用。

# c++ - 设置指向对象的指针，使对象相互指向

> ID：15662991
> 
> 赞同：2
> 
> 时间：2013-03-27T15:40:35.887
> 
> 标签：c++

我正在创建一个名为 Team 的类。如何让两个对象作为合作伙伴相互指向？这是我迄今为止一直在做的事情。我仅使用布尔数据字段对其进行了测试，并且我知道我的程序的其余部分到目前为止都可以正常工作。

```
#include <iostream>
using namespace std;

 class Team
{
    public:

    Team();
    Team(bool prac, Team *part);
    Team *partner;
    bool practiced;
    void createPairing (Team *t1, Team *t2);
};

Team::Team()
{
    practiced = false;
    partner = 0;
}

Team::Team(bool prac, Team *part)
{
    practiced = prac;
    partner = part;
}

void Team::createPairing (Team *t1, Team *t2)
{
    t1->partner = t2;
    t2->partner = t1;
}

int main()
{
    Team Harry;
    Team Ron;
    Team *p1 = &Harry;
    Team *p2 = &Ron;
    Team createPairing(p1, p2);

    cout << Harry.partner << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:44:17.960

`createPairing`应该是`static`：

```
static void createPairing(Team* t1, Team* t2); 
```

除此之外，问题在于，当您这样做时`Team createPairing(p1, p2);`，您实际上并没有调用该`createPairing`函数，而是*隐式调用了***第二个构造函数** 。它正在创建一个被调用并转换为. （编译时应该有一个警告，假设你有**警告**。）*`Team``createPairing``p1``bool`*

 ***在你创建`createPairing`函数之后`static`，你会这样称呼它：

```
Team::createPairing(&Harry, &Ron); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:05:40.263

如果您想有两个参数进行配对，您应该将其设为自由函数（在类之外）。否则我建议省略第一个参数（从对象的角度来看它是“this”）。两者都将有助于防止 magtheridon96 已经提供修复的错误。

```
void Team::createPairing (Team *other)
{
    partner = other;
    other->partner = this; // here, making the member private and providing a setter would be better
} 
```

或者，作为一个自由函数（使用 setter）

```
void createPairing(Team& lhs, Team& rhs) // use references to avoid potential pointer issues
{
    lhs.setPartner(&rhs);
    rhs.setPartner(&lhs);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:58:49.950

```
#include <iostream>
using namespace std;

class Team
{ 
    public:

    Team();
    Team(bool prac, Team *part);
    Team *partner;
    bool practiced;
    static void createPairing (Team *t1, Team *t2);
};

Team::Team()
{
    practiced = false;
    partner = 0;
}

Team::Team(bool prac, Team *part)
{
    practiced = prac;
    partner = part;
}

void Team::createPairing (Team *t1, Team *t2)
{
    t1->partner = t2;
    t2->partner = t1;
}

int main()
 {
    Team Harry;
    Team Ron;
    Team *p1 = &Harry;
    Team *p2 = &Ron;
    Team::createPairing(p1, p2);

    return 0;
} 
```***

# lex - 在 Lex 中捕捉换行符时出错

> ID：15662996
> 
> 赞同：0
> 
> 时间：2013-03-27T15:40:45.767
> 
> 标签：lex

我已经调试了几天，似乎无法修复此错误。以下代码是 C 语言语法的 Lex 文件。

我有两个问题我还没有发现。

首先是换行检测。它似乎将换行符留在输出中，并且不会增加行 var（以跟踪行、列以获取错误反馈）。

我有换行符转义序列的所有组合，但似乎无法捕捉到它。

第二个是检测单引号后跟换行符，这应该会产生非法字符错误。

我没看到什么？提前致谢！

```
%{
int col = 1;
int line = 1;
int aux_col = 0;
int err = 0; 
%}

%x C_COMMENT

 /* Identifiers */
ids    [a-zA-Z_]([a-zA-Z0-9_])*
 /* Integers    */
inteiros    0|[1-9]([0-9])*

 /* Chars or any Escape Sequence */
chrlit    (\'[^\n\'\\]?\')|(\'\\.\')
 /* Strings */  
strlit    (\"[^\n\"\\]?+\")         

 /* Char Error: Multi Char Constant */
chr_multi    (\'[^\n\']{2,}\')

 /* Char Error: Non-terminated Char Constant */
chr_nonterm    (\'[^\n\']{1,})

 /* String Error: Non-terminated String Constant */
strerr    (\"[^\n\"]?+)

%%

"/*"    {BEGIN(C_COMMENT); if(col==0) {aux_col=3;} else {aux_col=2;}}
<C_COMMENT>"*/"    {col+=aux_col+2; aux_col=0; BEGIN(INITIAL);}
<C_COMMENT><<EOF>>    {printf("Line %d, col %d: unterminated comment\n",line, col); BEGIN(INITIAL);}
<C_COMMENT>.    {aux_col++;}

"do"|"struct"|"auto"|"long"|"switch"|"break"|"enum"|"register"|"typedef"
"case"|"extern"|"union"|"float"|"short"|"unsigned"|"const"|"for"|"signed"       "void"|"continue"|"goto"|"sizeof"|"volatile"|"default"|"static"
{col+=yyleng; printf("RESERVED\n");}

return    {col+=yyleng; printf("RETURN\n");}

while    {col+=yyleng; printf("WHILE\n");}

printf    {col+=yyleng; printf("PRINTF\n");}

atoi    {col+=yyleng; printf("ATOI\n");}

if    {col+=yyleng; printf("IF\n");}

int    {col+=yyleng; printf("INT\n");}

itoa    {col+=yyleng; printf("ITOA\n");}

char    {col+=yyleng; printf("CHAR\n");}

"&&"    {col+=yyleng; printf("AND\n");}

"&"    {col+=yyleng;  printf("AMP\n");}

"="    {col+=yyleng;  printf("ASSIGN\n");}

"*"    {col+=yyleng; printf("AST\n");}

","    {col+=yyleng; printf("COMMA\n");}

"/"    {col+=yyleng; printf("DIV\n");}

"=="    {col+=yyleng; printf("EQ\n");}

">="    {col+=yyleng; printf("GE\n");}

">"    {col+=yyleng; printf("GT\n");}

"{"    {col+=yyleng; printf("LBRACE\n");}

"<="    {col+=yyleng; printf("LE\n");}

"("    {col+=yyleng; printf("LPAR\n");}

"["    {col+=yyleng; printf("LSQ\n");}

"<"    {col+=yyleng; printf("LT\n");}

"-"    {col+=yyleng; printf("MINUS\n");}

"%"    {col+=yyleng; printf("MOD\n");}

"!="    {col+=yyleng; printf("NE\n");}

"!"    {col+=yyleng; printf("NOT\n");}

"+"    {col+=yyleng; printf("PLUS\n");}

"}"    {col+=yyleng; printf("RBRACE\n");}

")"    {col+=yyleng; printf("RPAR\n");}

"]"    {col+=yyleng; printf("RSQ\n");}

";"    {col+=yyleng; printf("SEMI\n");}

\|\|    {col+=yyleng; printf("OR\n");}

{ids}    {col+=yyleng; printf("ID(%s)\n",yytext);}
{inteiros}    {col+=yyleng; printf("INTLIT(%s)\n", yytext);}
{strlit}    {col+=yyleng; printf("STRLIT(%s)\n", yytext);}
{chrlit}    {col+=yyleng; printf("CHRLIT(%s)\n", yytext);}

{chr_multi}    {if(col==0) {col++;err=1;}
            printf("Line %d, col %d: multi-character char constant\n", line, col);
            col+=yyleng;
            if(err == 1) {col--;err=0;}}

{chr_nonterm}    {if(col==0) {col++;err=1;}
            printf("Line %d, col %d: unterminated char constant\n", line, col);
            col+=yyleng;if(err == 1) {col--;err=0;}}

{strerr}    {if(col==0) {col++;err=1;}
            printf("Line %d, col %d: unterminated string constant\n", line,col);
            col+=yyleng;
            if(err == 1) {col--;err=0;}}

" "    {col++;};
'\n'    {col=1;line++;printf("BAR N\n");}
"\\n"    {col=1;line++;printf("BAR N2\n");}
\n    {col=1;line++;printf("BAR N3\n");}

.|\'    {printf("Line %d, col %d: illegal character ('%s')\n", line, col, yytext); col++;}

%%

int main () {
    yylex();
    return 0;
}

int yywrap(){
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:03:46.360

您没有在评论中匹配换行符。`.`匹配**除**换行符以外的任何字符。

在修复规则以匹配关键字（添加几个`|`并将其全部放在一行上）之后，程序**确实**在单引号后跟换行符上报告了一个非法字符。因此，请给出会产生意外结果的确切输入。

布莱恩同胞致以最诚挚的问候。

# c++ - 使用 C++11 从点向量创建一个 int 向量

> ID：15662998
> 
> 赞同：1
> 
> 时间：2013-03-27T15:40:51.643
> 
> 标签：c++, vector, c++11

我有一个简单的点结构

```
struct mypoint
{
    int x;
    int y;
}; 
```

和一个`vector`_`mypoint`

```
vector<mypoint> myvector; 
```

如果我想创建一个`int`包含所有点坐标的向量（即`x1`, `y1`, `x2`, `y2`, `x3`, `y3`, ...），我可以通过以下方式轻松完成

```
vector<mypoint>::iterator pt, ptend(myvector.end());
vector<int> newvector;

for(pt=myvector.begin(); pt!=ptend; ++pt)
{
    newvector.push_back(pt->x);
    newvector.push_back(pt->y);
} 
```

有没有办法使用 C++11 在一行（或两行）代码中获得相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:48:49.107

```
std::vector<int> extractIntsFromPoints(const std::vector<mypoint>& pointVector)
{
    std::vector<int> retVector;    
    for (const auto& element : pointVector)
    {
        retVector.push_back(element.x);
        retVector.push_back(element.y);
    }
    return retVector;
} 
```

在需要 int 向量的地方调用此函数。我加入了基于范围的 for 循环，使其成为额外的 C++11。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:47:56.510

由于您使用的是 C++11，因此您可以使用新的 for 语法。

```
vector<int> newvector;

for( const auto &pt : myvector)
{
    newvector.push_back(pt.x);
    newvector.push_back(pt.y);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:49:55.397

从帖子中窃取：[C++ std::transform vector of pairs->first to new vector](https://stackoverflow.com/questions/9094132/c-stdtransform-vector-of-pairs-first-to-new-vector)

```
vector<int> items;
std::transform(pairs.begin(), 
               pairs.end(), 
               std::back_inserter(items), 
               [](const std::pair<int, int>& p) { return p.first; }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T15:50:32.467

这是大约 4 行，使用 lambda：

```
vector<mypoint> points;
vector<int> iv;

points.push_back(mypoint(1,2));
points.push_back(mypoint(3,4));
points.push_back(mypoint(5,6));

for_each(points.cbegin(), points.cend(),
    [&iv](const mypoint &pt) {
        iv.push_back(pt.x);
        iv.push_back(pt.y);
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T15:51:12.600

您可以使用 a`std::pair<>`在其中推送坐标`std::make_pair`，然后将其推`std::pair<>`送到向量中，例如：

```
mypoint a_point;
std::pair<int, int> point = std::make_pair(a_point.x, a_point.y);
vector<std::pair<int, int>> vec.push_back(point). 
```

也许笨重，但在两行中它运行良好并封装了一个点，而不是分离每个点轴的大小并将它们放在一个`std::vector`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T09:53:38.510

正如 reima 已经指出的那样，如果您只想引用现有序列，则强制转换`myvector.data()`为`int*`（假设`sizeof(mypoint) == 2 * sizeof(int)`保持）就足够了。但是，如果您明确想要一个展平序列的副本，您最好创建一个像这样的小型实用程序函数：

```
 template <typename T, typename U>
    std::vector<T> flatten(std::vector<U> const& other) {
        static_assert(std::is_trivially_copyable<U>::value,
                      "source type must be trivially copyable!");
        static_assert(std::is_trivially_copy_constructible<T>::value,
                      "destination type must be trivially copy constructible!");
        static_assert((sizeof(U) / sizeof(T)) * sizeof(T) == sizeof(U),
                      "sizeof(U) must be a multiple of sizeof(T)!");

        return std::vector<T>(reinterpret_cast<T const*>(other.data()),
           reinterpret_cast<T const*>(std::next(other.data(), other.size())));             
    }

    template <typename U>
    std::vector<typename U::value_type> flatten(std::vector<U> const& other) {
         return flatten<typename U::value_type>(other);
    } 
```

减少你的代码

```
 auto newvector = flatten<int>(myvector); 
```

或者 - 如果你为你配备`mypoint` `struct`（符合 STL 的）`value_type`成员类型 - 甚至

```
 auto newvector = flatten(myvector); 
```

请注意，这个实用函数只不过是一个经过调整的构造函数，它使用固有的不安全`reinterpret_cast`将`mypoint`指针转换为`int`指针。为了摆脱伴随使用的安全警告`reinterpret_cast`，该`flatten`函数使用了一些`static_assert`降落伞。因此，最好将所有这些隐藏在一个单独的函数中。尽管如此，它还是使用了许多 C++11 特性`auto`，例如移动构造、`static_assert`类型特征，`std::next`并且`vector::data()`几乎将您的调用站点代码剥离到最低限度。

此外，这是尽可能高效的，因为 range 构造函数`vector`只会执行内存分配和调用`uninitialized_copy`，这可能会归结为`memcpy`对普通可复制类型的调用。