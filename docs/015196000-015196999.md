# StackOverflow 问答 15196000-15196999

# algorithm - 算法 A 的运行时间至少为 O(n²) - 为什么它没有意义？

> ID：15196004
> 
> 赞同：9
> 
> 时间：2013-03-04T06:45:39.540
> 
> 标签：algorithm, big-o, asymptotic-complexity

为什么是这样的说法：

> 算法A的运行时间至少为O(n²)

没有意义吗？

> 插入排序算法的运行时间最多为 O(n²)

这是正确的吗？

我尝试了网络，但无法得到很好的解释。

我有另一个问题：

> 我知道任何线性函数 a⋅n+b 都是 O(n) 也是 O(n²)。它也是O（n³）吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T04:34:07.563

`T(n)``T(n)` : Algo A 的运行时间。我们只关心语句的上限和下限：`T(n) >= O(n^2)`

Upper bound: 因为`T(n) >= O(n^2)`, 那么没有关于`T(n)` Lower bound: Assume 的上界的信息: Assume `f(n) = O(n^2)`, 然后是语句: `T(n) >= f(n)`, 但`f(n)`可能是任何比`n^2`, Ex:更“小”的东西`constant, n,...`, 所以没有关于下界的结论`T(n)`too

=> 声明毫无意义

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T06:56:22.663

一个原因可能是没有上限的下限不是很有用。“至少”意味着在正常情况下它可以是指数的。如果您不知道上限，您可能无法在实际应用程序中使用该算法，因为您无法知道程序是否在 Universe 完成之前完成。

正确使用大 O 表示法表示上限。因此，将下限声明为大 O 是在滥用该符号。

说“无意义”是一个强烈的词。即使它不充分，它当然也是有用的信息。为您的问题提供更多背景信息，您可以获得更好的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-14T07:05:14.960

一个比喻：

这句话有点像说：“我家屋顶的高度至少是地面。” 没错，但完全没有信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-16T22:34:09.397

O(n^2) 是最坏的情况，这意味着 A 的运行时间将是 n^2 或更快。如果它的运行时间至少为 O(n^2)，那么这意味着 A 可以拥有的最快运行时间至少为 O(n^2)。这意味着它也可能比 O(n^2) 慢。这些语句意味着 A 可以有任何可能的运行时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-06T23:46:53.283

> 我知道任何线性函数 an+b 都是 O(n) 也是 O(n^2)。它也是 O(n^3) 吗？

是的。big-O 符号表示整个函数集合。但是我们应该用它来尽可能接近地描述一个函数。虽然这是真的，`f(n) = an+b`甚至`O(n^2)`是`O(n^3)`这样说更准确`f(n) = O(n)`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T07:26:13.950

O-notation，换句话说，意味着：f(x) 属于集合 O(g(x)) 如果 f(x) < C * g(x)，对于所有 C（那些是实数）

即您的算法不会增长超过二次函数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T09:37:51.433

这不是没有意义的，例如，如果您不知道确切的算法，可以使用它，但您当然知道它需要 O(n^2) 操作。

例如，如果一个人不知道排序算法，但知道要对数组进行排序，我们至少需要查看每个元素，那么可以说“对数组进行排序至少是 O(n)”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T15:54:24.837

因为没有人关心它在最佳情况下的运行速度有多快，所以最坏的情况很重要。通常人们有兴趣知道在最坏的情况下需要多少。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-04T15:04:43.457

设`f(n)`为算法的运行时间。

```
=> f(n) >= O(n2)
=> f(n) >= 0 , because 0 is a member of set of functions that are O(n2) 
```

这对于 总是如此`f(n)`，因为运行时间总是非负数。因此，该声明是多余的。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-03-04T07:16:50.343

“算法A的运行时间至少为O(n2)”等价于“算法A的运行时间是Big Omega(n2)”，所以不是没有意义。

# php - 回显 HTTPS 重定向的最终 URL

> ID：15196008
> 
> 赞同：-1
> 
> 时间：2013-03-04T06:46:08.780
> 
> 标签：php, curl

我需要一个使用任何库或函数的 PHP 脚本来抓取和回显（或保存到服务器）HTTPS 重定向的最终 URL。

我在共享服务器上，所以我只是编辑了 php.ini 以打开 OpenSSL，但无法重新启动服务器，但支持团队告诉它已经工作了。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:13:12.417

使用`curl`命令。

`curl -LI <url> | grep Location`可以打印出你需要的东西。

`-L/--location`如果服务器报告请求的页面已移动到不同的位置，则带有选项 curl 将重做请求。

带有`-I/--head`选项 curl 将仅获取可能包含**位置**字段的 HTTP 标头。

如需完整参考，请查看[此处](http://linux.die.net/man/1/curl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:51:01.830

您可以通过以下方式访问 url（更准确地说是页面）

```
basename(__FILE__); 
```

您可以将其存储到全局变量或会话中，然后对它做任何您想做的事情（例如：将其存储到数据库中）。

```
$GLOBALS['currentFile'] = basename(__FILE__); 
```

或者

```
$_SESSION['currentFile'] = basename(__FILE__); 
```

如果你愿意，也很容易在它前面添加一些东西。

我希望我不会错过理解你想要达到的目标。

# javascript - 字符串内的 Javascript 函数，如何将其添加到 javascript 以供以后调用

> ID：15196013
> 
> 赞同：0
> 
> 时间：2013-03-04T06:46:32.160
> 
> 标签：javascript

我一直试图弄清楚这一点，但我无法解决如何做到这一点。我动态创建了一个由不同字符串组成的函数，我希望能够将其转换为可以调用的实际 javascript。

我简化了这个例子，但它仍然应该有助于解决我的问题。

```
var previewStringFunction = "function updateMap() {"
 + "some javascript code" + "}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T06:52:14.757

您可以使用 eval() 函数进行评估。

样本：

```
var strng = "function executeThs(){  alert('hello world'); }";// your string
eval(s);// evaluation of your function
executeThs();// calling function 
```

[http://www.w3schools.com/jsref/jsref_eval.ASP](http://www.w3schools.com/jsref/jsref_eval.ASP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:00:00.880

```
<html>
  <head>
    <script language="javascript">
<!--
function foo ()
{
  var script = document.createElement ('script');
  script.innerHTML = "function bar () {alert ('bar');}";
  body.appendChild (script);
}
// -->
    </script>
  </head>
  <body id="body">
    <input type="button" onclick="foo(); return false;" value="foo" />
    <input type="button" onclick="bar(); return false;" value="bar" />
  </body>
</html> 
```

按钮`foo`定义功能，按钮`bar`调用它。

# javascript - 在 iframe url 中传递变量

> ID：15196015
> 
> 赞同：1
> 
> 时间：2013-03-04T06:46:43.920
> 
> 标签：javascript

我正在尝试在 javascript 的帮助下在 iframe 中打开的每个 url 的末尾传递两个变量。

详细说明：
我有一个 html 文件`home.html`，其中可能包含正在搜索的 javascript 和一个 iframe，它打开需要以我们在 javascript 中定义的两个变量结尾`mysite.com.all`的 url， 例如： 我无权访问. 任何帮助将不胜感激`mysite.com`
`mysite.com/index.php?var1=a&var2=b`
`mysite.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:08:45.340

```
<!DOCTYPE html>
<html>
<body>

Home body

<iframe id="myIframe">
  <p>Your browser does not support iframes.</p>
</iframe>

<script type="text/javascript">
    var par = '4720';
    document.getElementById('myIframe').src="http://php.net/cal.php?id="+par;
</script>

</body>
</html> 
```

# django - django celery - 在一个工作人员中运行两个队列

> ID：15196019
> 
> 赞同：3
> 
> 时间：2013-03-04T06:46:51.380
> 
> 标签：django, celery

我正在使用芹菜来满足我的项目要求。目前我已经创建了一个队列'HighPriorityQueue'以及默认队列，即会有一个工作人员和两个队列。

将有不同的任务排队到这两个队列中。每当任务在其中排队时，我都需要处理“HighPriorityQueue”。

我的疑问是芹菜将如何处理这个队列？芹菜会并行处理队列吗？或者我是否可以这样做，如果某些任务在“HighPriorityQueue”中排队，则应该立即处理它，而不管默认任务中已经排队的作业如何？

请提前咨询和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-11T14:43:57.743

*哇，老问题...*

Celery 无法为一组队列设置优先级。您最好的选择是拥有一个仅使用 的高优先级工作程序池和一个使用+或仅使用 `default`HighPriortyQueue`的默认工作程序池。`default``HighPriorityQueue`

一些消息代理（[当然是 RabbitMQ](https://www.rabbitmq.com/priority.html)）允许您在队列中设置优先级，基本上将重要消息推送到顶部的队列中以首先使用，然后您的一个 Celery 工作人员可以愚蠢地使用这些消息并基本上完成您想要的。但是，在队列级别执行此操作会带来自己的挑战/陷阱。

# jenkins - Jenkins 与 cucumber-html-reports 后期构建

> ID：15196023
> 
> 赞同：1
> 
> 时间：2013-03-04T06:47:16.837
> 
> 标签：jenkins, cucumber-jvm

我正在尝试使用[cucumber-html-reports （配置）](https://github.com/masterthought/jenkins-cucumber-jvm-reports-plugin-java/wiki/Detailed-Configuration)插件发布 Cucumber json 报告。我安装了 0.0.19 版本。

由于我的 Jenkins 的上下文是**/jenkins-ci/**，我需要按照页面说明中的说明添加参数**Plugin Url Path 。**我尝试输入**/jenkins-ci/**或完整 URL：**host:port/jenkins-ci/plugin**但两个选项都失败了。

注意 - 构建通过。创建报告。控制台输出很好，但点击报告链接，我得到一个 404...

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:26:56.820

正如我所怀疑的，问题是我生成的 json 文件中的问题（空目标）和插件问题的组合。

在与**Kingsley Hendrickse**（插件的作者）合作后，发布了新版本的插件（0.0.20），解决了所有这些问题！

插件页面在[这里](http://www.masterthought.net/section/cucumber-reporting)。

我要公开感谢**金斯利**的帮助和支持！

我希望有人觉得这篇文章有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:05:01.930

试着把`http://host:port/jenkins-ci/`. 不要忘记尾部的斜线。

# android - 在 Android CalendarView 上突出显示某些日期

> ID：15196027
> 
> 赞同：1
> 
> 时间：2013-03-04T06:47:33.920
> 
> 标签：android, calendar, calendarview

我正在使用 Android `CalendarView`，我需要突出显示一些日期。我找不到任何方法来做到这一点。有什么可用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:48:25.767

如果要突出显示特定日期，则可以调用 setDate()。

如果您想突出显示多个日期，没有简单的方法可以做到这一点。您应该编写自己的日历视图。

# jquery - jQuery/MySQL WHERE 东西 = 函数

> ID：15196040
> 
> 赞同：0
> 
> 时间：2013-03-04T06:48:18.257
> 
> 标签：jquery, mysql

我需要您的帮助来编辑我的脚本以使其输出结果 WHERE title = function(search) 如果我输入：test，它将打印出以 test 作为标题的结果。

**搜索.js：**

```
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});

(function() {

window.App = {
    Models: {},
    Collections: {},
    Views: {},
    Router: {}
};

App.Router = Backbone.Router.extend({
    routes: {
        '': 'index',
        'search/:search': 'search',
        '*other': 'default'
    },

    index: function() {
        $(document.body).append("");
    },

    search: function(search) {
        $('#result').load('search.php');
    }
});

new App.Router();
Backbone.history.start();

})(); 
```

**搜索.php**

```
$query  = "SELECT title FROM media WHERE title=";
$result = mysql_query($query);
$row    = mysql_fetch_assoc($result);
echo $row['title']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:04:59.213

阅读`.load()` [此处](http://api.jquery.com/load/)的文档。请注意，您可以将数据传递给函数以发送到服务器。

[通过阅读$_GET](http://www.php.net/manual/en/reserved.variables.get.php)和[$_POST](http://www.php.net/manual/en/reserved.variables.post.php)请求变量来了解如何访问服务器上的这些数据。

不要使用 MySql 函数。它们已被弃用。您应该改用[Mysqli](http://www.php.net/manual/en/book.mysqli.php)。

出于安全原因，请阅读[Mysqli 准备好的语句](http://www.php.net/manual/en/mysqli.prepare.php)。

# iphone - 如何从以下方法获取新位置

> ID：15196042
> 
> 赞同：2
> 
> 时间：2013-03-04T06:48:30.083
> 
> 标签：iphone, ios, mapkit, mkannotation

```
-(void)mapView:(MKMapView *)mapView 
    annotationView:(MKAnnotationView *)view                  
    didChangeDragState:(MKAnnotationViewDragState)newState 
    fromOldState:(MKAnnotationViewDragState)oldState 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T06:53:43.150

你使用这个：

```
- (void)mapView:(MKMapView *)mapView 
        annotationView:(MKAnnotationView *)annotationView 
        didChangeDragState:(MKAnnotationViewDragState)newState 
        fromOldState:(MKAnnotationViewDragState)oldState 
{
    if (newState == MKAnnotationViewDragStateEnding)
    {
        CLLocationCoordinate2D droppedAt = annotationView.annotation.coordinate;
        NSLog(@"dropped at %f,%f", droppedAt.latitude, droppedAt.longitude);
    }
} 
```

这将为您提供`MKAnnotationView`掉落时最终位置的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:54:55.780

您可以检查拖动状态，然后使用`annotationView.annotation.coordinate.latitude`，`annotationView.annotation.coordinate.latitude`您将获得新位置的坐标。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)annotationView didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:(MKAnnotationViewDragState)oldState
{

    //if dragging ended
    if (newState == MKAnnotationViewDragStateNone && oldState == MKAnnotationViewDragStateEnding) {

        MKCoordinateRegion region;
        MKCoordinateSpan span;

        span.latitudeDelta = 0.00212872;
        span.longitudeDelta = 0.00212872;

        CLLocationCoordinate2D location;
        location.latitude = annotationView.annotation.coordinate.latitude;
        location.longitude = annotationView.annotation.coordinate.longitude; 
        [self getAddress:location.latitude withLong:location.longitude];

        region.span = span;
        region.center = location;

        if (addAnnotation != nil) {
            [myMap removeAnnotation:addAnnotation];
            [addAnnotation release];
            addAnnotation = nil;
        }

        addAnnotation = [[Annotation alloc] init];
        addAnnotation.coordinate = location;
        [myMap addAnnotation:addAnnotation];
        [myMap setRegion:region animated:YES];
        [myMap regionThatFits:region];
    }

} 
```

addAnnotation 是 的对象`Annotation`。

# sql - 此查询需要锁定吗？

> ID：15196045
> 
> 赞同：1
> 
> 时间：2013-03-04T06:48:31.497
> 
> 标签：sql, sql-server, tsql, locking, sql-server-2012

这是我的标量函数：

```
ALTER FUNCTION [dbo].[GetInstrumentID]
(
    @ParentDocumentID   int
)
RETURNS varchar(14)
AS
BEGIN

    Declare @InstrumentID   varchar(14) = ''
    Declare @FilingNumber   int = 0
    Select @InstrumentID = InstrumentID
        From Documents
            Where DocumentID = @ParentDocumentID

    Select Top 1 @FilingNumber = FilingNumber
        From Documents Where ParentDocumentID = @ParentDocumentID
            Order By FilingNumber desc

    Set @InstrumentID = Left(@InstrumentID,9) + Right(
        '000' + Cast((IsNull(@FilingNumber,1) + 1) as varchar(3))

    , 3) + '00'

    Return @InstrumentID
END 
```

我担心如果有 100 多个用户调用这个函数，他们中的许多人是否有可能收到相同的返回值？如果是，那么我如何确保一次只有 1 个用户可以执行此功能，而其余用户则等待？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T06:56:01.970

您的函数中绝对没有任何内容可以使它为两个相同的并发调用返回不同的值。如果需要防止并发，可以使用[应用锁](http://www.sqlteam.com/article/application-locks-or-mutexes-in-sql-server-2005)。这是针对 SQL Server 2005 的，SQL Server 2012 中可能有更新的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:49:07.867

您可以使用 UPDLOCK 提示。UPDLOCK 提示告诉 SQL Server 引擎“如果此行获取 UPDATE(lock"U")，则不允许任何其他读取，因为我会。UPDLOCK 保持锁定直到语句或事务结束。

函数体中的 select 语句：

```
Select Top 1 @FilingNumber = FilingNumber
From Documents WITH(UPDLOCK)
Where ParentDocumentID = @ParentDocumentID
Order By FilingNumber desc 
```

# javascript - “硒未定义”？

> ID：15196050
> 
> 赞同：0
> 
> 时间：2013-03-04T06:48:47.270
> 
> 标签：javascript, jquery, selenium

我试图让它每次访问 FootLocker/FootAction 等../ 运动鞋页面时，它会自动选择我的鞋码，将其添加到购物车，然后为我结账。每次我尝试运行脚本时，我都会收到此错误

> 错误：脚本“My Fancy New Userscript”的执行失败！硒未定义

这是我的脚本

```
// ==UserScript==
// @name       FOOTLOCKER.ACTION
// @namespace  http://*/*
// @version    0.1
// @description  enter something useful
// @match      http://*/*
// @copyright  2012+, You
// ==/UserScript==

selenium.select("class=selectBox-label", "10"); // this selects size 10 
selenium.click("class=cmConversionEventSizeSelection");
selenium.waitForElement("class=addToCartButton"); 
selenium.click("class=addToCartButton");
selenium.waitForElement("class=checkout");
selenium.click("class=checkout") 
```

这是[目标页面](http://pastebin.com/f8szYz1K)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T10:04:02.700

您的问题是 Selenium 将其代码直接注入页面，但您的脚本在沙箱/不同范围内运行。

这个问题也是[为什么我的 Tampermonkey 脚本会抛出“Selenium is not defined”的副本？](https://stackoverflow.com/questions/15041365)并且应该这样关闭。

# android - 在 android 中创建自己的颜色库以与 renderscript 一起使用

> ID：15196052
> 
> 赞同：0
> 
> 时间：2013-03-04T06:48:51.453
> 
> 标签：android, renderscript

我想创建自己的颜色库，以便使用我自己的颜色而不是默认颜色应用一些像素处理。

例如，当使用`rsUnpackColor8888`我想在某处定义我自己的黑色值时。我知道我可以定义如下颜色：

```
const float4 kBlack = {
    0.0f, 0.0f, 0.0f, 1.0f
}; 
```

但问题是我必须遍历所有像素并将颜色与我得到的值进行比较`rsUnpackColor8888`。我将不胜感激任何建议。

# javascript - Eclipse 显示 javascript 错误

> ID：15196054
> 
> 赞同：0
> 
> 时间：2013-03-04T06:48:58.667
> 
> 标签：javascript, jquery, eclipse

我正在使用 Spring-Security openId 示例应用程序中的一些 javascript 文件，但 eclipse 显示了一些红色错误。尽管有这些错误，javascript文件似乎工作正常，但我很困惑为什么eclipse会在我的文件副本中显示错误，而不是我导入到eclipse中的原始项目！

错误在文件“jquery.query-2.1.3.js”中

第一个错误是：

```
Syntax error on token "new", ArrayLiteralHeader expected after this token 
```

在文件的第一行：

```
new function(settings) { 
```

第二个错误是：

```
Syntax error, insert "]" to complete NewExpression 
```

在文件的最后一行：

```
}(jQuery.query || {}); // Pass in jQuery.query as settings object 
```

我应该想办法让 eclipse 忽略这些错误，还是我需要在这里修复一些东西？抱歉，我对 javascript 不是很了解。

谢谢！

# c++ - C ++将两个变量中的较大者设置为新值

> ID：15196058
> 
> 赞同：4
> 
> 时间：2013-03-04T06:49:36.467
> 
> 标签：c++, algorithm, max

如果我有两个变量`a`和`b`，`std::max(a,b)`则返回较高的值。

是否有可能让这个函数*修改*结果更大的变量，即如果`x`是第三个变量，

```
max(a,b) = x; 
```

这样，如果大于，则在此调用之后`a==x`成立，否则？`a``b``b==x`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T06:59:02.553

也许你想要这个：

```
int &max(int &a, int &b)
{
    return a > b ? a : b;
} 
```

然后：

```
int main()
{
    int x = 10, y = 20;
    max(x, y) = 100;
} 
```

`max`将返回对最大数的引用，然后您可以将`max`函数放在赋值的左侧并更改其值。

基于模板的版本：

```
template<typename T>
T &max(T &a, T &b)
{
  return a > b ? a : b;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:00:04.443

您可以创建这样的功能：

```
template< typename T >
T& AssignableMax( T& a, T& b )
{
  return ( a > b ) ? a : b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T07:00:41.157

如何使用参考：

```
int& maxref(int& a, int& b)
{
    if (a > b) {
        return a;
    }
    return b;
} 
```

然后你可以使用：

```
maxref(a, b) = x; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T06:56:50.293

如果您可以接受，您可以定义一个宏（只是避免给它一个标准算法的名称，例如`max`）：

```
#define mmax(x, y) ((x > y) ? (x) : (y))

int main()
{
    int x = 0;
    int y = 1;
    mmax(x, y) = 2;
} 
```

如果您不想使用宏，这是一个通用的解决方案：

```
#include <iostream>
#include <type_traits>

template<typename T>
T& mmax(T& t, T& u)
{ return (t < u) ? u : t; }

int main()
{
    int x = 0;
    int y = 1;
    mmax(x, y) = 2;

    std::cout << x << y;
} 
```

# java - java 和 jboss7 j_security_check 登录成功但有问题

> ID：15196059
> 
> 赞同：0
> 
> 时间：2013-03-04T06:49:37.357
> 
> 标签：java, security, jsf, jboss7.x, jaas

我创建了自定义数据库服务器登录模块，并使用 j_security_check 创建了一个表单，它可以成功运行，但问题是：

1.  有时 jboss 返回错误代码 408：**登录成功时，它不会重定向到****web.xml中 ** ***form-login-page标记中定义的页面。****（*408：请求超时：客户端在服务器准备等待的时间内没有产生请求。客户端可以在以后的任何时间重复请求而无需修改。*）*
**   有时 jboss 返回错误代码 400（*错误请求：由于语法错误，服务器无法理解请求。客户端不应该在不修改的情况下重复请求。*）。*   被定义为授权给角色 x 的页面。我运行它，我可以在不登录的情况下成功查看它。*   不幸的是，对于上述问题，我没有特定的场景。*

 *这是 web.xml 中的 security-cosntraint 标记

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>InstitutionRole</web-resource-name>
        <url-pattern>/jsfs/services/ManageData.jsf</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>Institution_delegate</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/index.jsf</form-login-page>
        <form-error-page>/jsfs/errors/loginError.jsf</form-error-page>
    </form-login-config>

</login-config>
<security-role>
    <description>Institution Delegate Role</description>
    <role-name>Institution_delegate</role-name>
</security-role>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

请帮助....任何想法????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:45:27.813

我有这个问题的答案，它在部署描述符文件 web.xml 中......

> 在安全约束中，“form-login-page”标签**中的页面 url 是登录页面 url** ，而不是**“成功登录后的页面”**，因此当您调用 page1.jsf 并且您在登录之前尚未登录时。 jsf 很好地自动午餐。

所以

如果您对 Page : /page1.jsf 的角色有限制：x

```
 <security-constraint>
<web-resource-collection>
    <web-resource-name>x</web-resource-name>
    <url-pattern>/page1.jsf</url-pattern>
</web-resource-collection>
<auth-constraint>
    <role-name>x</role-name>
</auth-constraint> 
```

```
<security-role>
    <description>x Role</description>
    <role-name>x</role-name>
</security-role> 
```

你必须把

```
<login-config>
<auth-method>FORM</auth-method>
<form-login-config>
    <form-login-page>/login.jsf</form-login-page>
    <form-error-page>/jsfs/errors/loginError.jsf</form-error-page>
</form-login-config> 
```

我希望这个解决方案能很好地帮助你....*

# php - 如何检查当前用户是否已经喜欢或不喜欢评论

> ID：15196065
> 
> 赞同：0
> 
> 时间：2013-03-04T06:50:12.900
> 
> 标签：php, mysql, sql, algorithm, tsql

我在mysql数据库中有两个表

1.  tbl_comments
2.  tbl_user_votes

tbl_user_votes 中有三个字段

```
1\. comment_id, 2\. user_id, 3.vote_type ('L' OR 'D') (L for Like, D For Dislike) 
```

我有一个分页方案，据此我的每个网页都有 20 条评论。每条评论都有一个喜欢和不喜欢的按钮。当一个登录的用户点击喜欢或不喜欢时，三个值被插入`tbl_users_votes, 1\. comment_id, 2\. user_id, 3\. vote_type (L OR D).`

我希望当页面重新加载时，他点击“喜欢”或“不喜欢”的所有评论必须在评论下方显示“你喜欢”或“你不喜欢”。

我的问题是，我不会为这个问题制定一个有效的算法。我想过这样的解决方案。

我必须为每个这样的评论运行 SQL 查询`"SELECT * From tbl_user_votes where comment_id = xyz and user_id = xyz"`，然后检查是否存在针对该 user_id 和 comment_id 的某些值。如果存在，那么我检查每个评论的值和 Put 和 If else 条件，如下所示

```
If(vote_found)
  If(vote_type=='L')
   echo "You Like"
  else if(vote_type=='D')
   echo "You Dislike' 
```

但我认为这不是一种有效的方法。它看起来非常内存和耗时的过程，好像页面上有 20 条评论，并且每条评论对数据库的 sql 查询非常昂贵。

任何人都可以有一些更好，更有效的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:17:13.620

我建议您使用一个查询，该查询也可以在一个记录集中给您投票。

```
SELECT
  tbl_comments.*,
  tbl_users.*
FROM
  tbl_comments LEFT JOIN tbl_users
  ON tbl_comments.user_id = tbl_users.user_id2
WHERE
  (tbl_users.user_id="xxx")
  OR (tbl_users.user_id IS NULL); 
```

我不知道您的索引是什么，`tbl_users`所以我假设`user_id2`，如果需要，请更改它。

Using`LEFT JOIN`将为您提供该用户的所有评论，如果存在，则为用户投票。如果`tbl_comments.user_id`是`NULL`，则没有评论。

# php - 配置 Apache2 + PHP 扩展（Centos6 + httpd）

> ID：15196069
> 
> 赞同：0
> 
> 时间：2013-03-04T06:50:37.613
> 
> 标签：php, apache2, centos

我正在尝试在我的 httpd (Centos) 中启动并运行 PHP，到目前为止，我能够使用 php 代码运行 php 页面`<?php phpinfo(); ?>`，但是它没有显示 php 详细信息，而是简单地显示了纯 PHP 文本。

在我做了一些研究之后，我发现即使我安装了 php，它也可能无法正确加载 php 模块，所以我做了以下更改

```
#/etc/httpd/conf/httpd.conf

LoadModule php5_module  modules/libphp5.so
AddHandler php5-script  .php 

DirectoryIndex index.html index.php

AddType text/html   .php

AddType application/x-httpd-php-source phps 
```

但结果仍然相同:(，当我重新启动服务器时，它说

```
[sameera@sameera ~]$ sudo /etc/init.d/httpd restart
Stopping httpd:                                            [  OK  ]
Starting httpd: [Mon Mar 04 12:09:07 2013] [warn] module php5_module is already loaded, skipping
                                                           [  OK  ] 
```

我在`centos6`，，，`httpd`。`php-5.3.3-14.el6_3.x86_64`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:04:48.400

您是否使用系统包管理器（yum）安装了 php？如果是，那么在您的 apache 配置目录的 conf.d 文件夹中，可能有一个单独的 php 配置文件，其中已经有`LoadModule php5_module modules/libphp5.so`一行。错误消息说的是您正在尝试加载已加载的模块。

您可能应该删除所有添加的配置行，如果您的配置有问题，您应该在提到的 dedicated-for-php 配置文件中修复它。之后重新启动并查看 apache 日志是否已成功加载模块并尝试查看是否`<?php phpinfo(); ?>`开始工作

# iphone - iPhone中的Google云端硬盘集成错误

> ID：15196071
> 
> 赞同：0
> 
> 时间：2013-03-04T06:50:44.467
> 
> 标签：iphone, ios5, google-drive-api

我创建了一个 iPhone 应用程序并将谷歌驱动库集成到项目中，并且还在构建设置中进行了所需的设置。我在编译时遇到错误。请任何人都可以帮助我

```
#import "ViewController.h"
#import "GTMOAuth2ViewControllerTouch.h"
#import "GTLService.h"
#import "GTLQueryDrive.h"
#import "GTLDrive.h"
#import "GDUTILITY.h"

@implementation ViewController

@synthesize authButton; @synthesize addMoreButton; @synthesize
btnRefresh;

@synthesize isAuthorized; @synthesize driveService; @synthesize
driveFiles;

#define kKeychainItemName111 @"GDDEMOTESTERNONARC: Google Drive"

#define kClientId111 @"16458548056-efdl07vmtam1pa159ln9024gc239oted.apps.googleusercontent.com"

#define kClientSecret111 @"yJU-avQu3Y0dlu3tL9ooLDRo"

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use. }

#pragma mark - View lifecycle

- (void)viewDidLoad {
    [super viewDidLoad];  // Do any additional setup after loading the view, typically from a nib.

    GTMOAuth2Authentication *auth =[GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:kKeychainItemName111  
clientID:kClientId111  clientSecret:kClientSecret111];

    if ([auth canAuthorize])
    {
        [self isAuthorizedWithAuthentication:auth];
    }

     }

- (GTLServiceDrive *)driveService {
    static GTLServiceDrive *service = nil;

    if (!service)
    {
        service = [[GTLServiceDrive alloc] init];

        // Have the service object set tickets to fetch consecutive pages
        // of the feed so we do not need to manually fetch them.
        service.shouldFetchNextPages = YES;

        // Have the service object set tickets to retry temporary error conditions
        // automatically.
        service.retryEnabled = YES;
    }
    return service; }

- (IBAction)authButtonMethos:(id)sender {
    if (!self.isAuthorized) 
    {
        // Sign in.

        SEL finishedSelector = @selector(viewController:finishedWithAuth:error:);

        GTMOAuth2ViewControllerTouch *authViewController =[[GTMOAuth2ViewControllerTouch alloc] initWithScope:kGTLAuthScopeDriveFile clientID:kClientId111
clientSecret:kClientSecret111 keychainItemName:kKeychainItemName111
delegate:self finishedSelector:finishedSelector];      

        [self presentModalViewController:authViewController     animated:YES];
    } 
    else
    {
        // Sign out
        [GTMOAuth2ViewControllerTouch removeAuthFromKeychainForName:kKeychainItemName111];
        [[self driveService] setAuthorizer:nil];
        //        self.authButton.title = @"Sign in";
        self.isAuthorized = NO;
        //        [self toggleActionButtons:NO];
        [self.driveFiles removeAllObjects];
    }

     }

- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController finishedWithAuth:(GTMOAuth2Authentication *)auth     error:(NSError *)error  {
    [self dismissModalViewControllerAnimated:YES];
    if (error == nil) 
    {
        [self isAuthorizedWithAuthentication:auth];
    } }

- (void)isAuthorizedWithAuthentication:(GTMOAuth2Authentication *)auth  {
    [[self driveService] setAuthorizer:auth];
    //    self.authButton.title = @"Sign out";
    self.isAuthorized = YES;
    //    [self toggleActionButtons:YES];
    [self loadDriveFiles]; }

- (void)loadDriveFiles  {

    GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
    query.q = @"mimeType = 'text/plain'";

    UIAlertView *alert = [GDUTILITY showLoadingMessageWithTitle:@"Loading files"
                                                       delegate:self];
    [self.driveService executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                              GTLDriveFileList *files,
                                                              NSError *error) 
     {
         [alert dismissWithClickedButtonIndex:0 animated:YES];

         if (error == nil) {
             if (self.driveFiles == nil)
             {
                 self.driveFiles = [[NSMutableArray alloc] init];
             }
             [self.driveFiles removeAllObjects];
             [self.driveFiles addObjectsFromArray:files.items];
             //            [self.tableView reloadData];
         } 
         else
         {
             NSLog(@"An error occurred: %@", error);
             [GDUTILITY showErrorMessageWithTitle:@"Unable to load files"
                                          message:[error description]
                                         delegate:self];
         }
     }];

    NSLog(@"Click on the login button");
} 
```

我在模拟器上运行这段代码。所以我遇到了错误

```
 ld: duplicate symbol _OBJC_METACLASS_$_GTLDriveAbout in
   /Users/bcod/Library/Developer/Xcode/DerivedData/GoogleDDemo-frrwjztsgtylsxbmkifnctrxzjfh/Build/Intermediates/GoogleDDemo.build/Debug-iphonesimulator/GoogleDDemo.build/Objects-normal/i386/GTLDriveAbout.o
   and
   /Users/bcod/Library/Developer/Xcode/DerivedData/GoogleDDemo-frrwjztsgtylsxbmkifnctrxzjfh/Build/Intermediates/GoogleDDemo.build/Debug-iphonesimulator/GoogleDDemo.build/Objects-normal/i386/GTLDrive_Sources.o
   for architecture i386 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:26:43.913

在您的代码中创建了多个参考类。请删除 google api 所有文件并重新添加。

请参考此链接，它将对您有所帮助。

[架构 i386 的重复符号](https://stackoverflow.com/questions/13639411/duplicate-symbols-for-architecture-i386)

# c# - 下拉列表在编辑模式下自动选择gridview中的第一个值

> ID：15196074
> 
> 赞同：0
> 
> 时间：2013-03-04T06:51:07.933
> 
> 标签：c#, gridview, drop-down-menu, ispostback

实际上我已经在编辑模式下在gridview中限定了一个下拉列表，但问题是每当我尝试从下拉列表中选择另一个值时，它会自动选择第一个值。

我还在 page_load 事件上使用了 !IsPostBack 属性，但它仍然没有选择其他项目。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {

            DropDownList ddlCost_Code = DropDownList)e.Row.FindControl("ddlCost_Code");

            BAL bl = new BAL();
            DataTable dt_for_CostCode = null;

            dt_for_CostCode = bl.Select_Cost_Code();
            if (dt_for_CostCode.Rows.Count > 0)
            {
                ddlCost_Code.DataSource = dt_for_CostCode;
                ddlCost_Code.DataTextField = "Cost_Code";
                ddlCost_Code.DataValueField = "Proposalno";
                ddlCost_Code.DataBind();
            }

}

  if (!IsPostBack)
    {

        try
        {

            Log_Booked_Info_Through_Booking_Table();

        }
        catch (Exception ex)
        {
            WebMsgBox.Show(ex.Message);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:37:08.777

> 首先，这将更有效。

```
if (e.Row.RowState == DataControlRowState.Edit)
{
     // your code here
} 
```

> 其次，`AutoPostBack`在你的gridview 中检查DropDown 的属性。它设置为什么。在您的情况下它应该是错误的，除非您在`onselectedindexchanged`下拉事件中设置了一些逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:13:09.023

尝试这个：

```
ddlCost_Code.SelectedIndex = 0; 
```

# php - 勾选一个复选框后如何禁用另一个复选框？（更新）

> ID：15196077
> 
> 赞同：0
> 
> 时间：2013-03-04T06:51:15.113
> 
> 标签：php, javascript, checkbox

清楚地提出我的问题

使用 sql server 2008 Enterprise 作为数据库服务器检查我的代码

**表视图**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<form method="post" name="form" id="checkForm" action="update.php">

<?php
$aksi="aksi_view.php";
switch($_GET[act]){
  // Tampil User
  default:

    echo "
    <table>
    <tr><th>Ap</th><th>Ccl</th><th>No</th><th>Budg</th><th>Dept</th><th>ItemID</th><th>Item Name</th><th>Qnty</th><th>UOM</th><th>Curr.</th><th>Rate</th><th>Unit Price</th>
    <th>Total</th><th>Total-IDR</th></tr>";

    $p      = new Paging;
    $batas  = 20;
    $posisi = $p->cariPosisi($batas);

    $counter = 1;

    $sql = "SELECT TOP 20 BudgetCategoryID,DeptAbbr, BudgetCategoryAbbr, ItemID, Status,
                            QntyDept, Qnty, CurrencyID, UnitPrice, ExchangeRateIDR, Remark,Proposal,
                            DeptApprovalRemark, M2ApprovalBy, M2ApprovalRemark, ItemName, PurchaseUOMName,
                            DecimalInQnty,(Qnty*UnitPrice) as Total, TotalIDR, CompanyDeptStock, CompanyDeptID, OutstandingNPBB
                            FROM vwBudgetApproval
                            WHERE (M2ApprovalBy IS NOT NULL OR (M2ApprovalBy IS NULL AND  Status =1)) AND 
                            CompletedInd = 1 AND DeptApprovalBy IS NOT NULL 
                            ORDER BY BudgetCategoryID, ItemID";
    $tampil = mssql_query($sql) ;

$no = $posisi+1;

while($r=mssql_fetch_array($tampil)){
  // echo"$no=2 '-'"; 
   //echo"$r[ItemID]";
      $ExchangeRateIDR = number_format($r['ExchangeRateIDR'],2,',','.');
    $unitprice = number_format($r['UnitPrice'],2,',','.'); 
    $total = number_format($r['Total'],2,',','.');
    $totalidr = number_format($r['TotalIDR'],2,',','.');

    $warnaGenap = "#66CCFF";   // warna abu-abu
    $warnaGanjil = "#FFFFFF";  // warna putih

if ($counter % 2 == 0) $warna = $warnaGenap;
else $warna = $warnaGanjil;

echo "<tr bgcolor='".$warna."'>            

 <td><input type= 'checkbox' name='approve".$no."' id='approve'   value='".$r['ItemID']."' onclick='onClickFn()'></td>
                    <td><input type= 'checkbox' name='cancel".$no."' id='cancel'   value='".$r['ItemID']."' onclick='onClickFn()'></td> 
                    <td>$no</td>
                    <td>$r[BudgetCategoryAbbr]</td>
                    <td>$r[DeptAbbr]</td>
                    <td>$r[ItemID]</td>
                    <td>$r[ItemName]</td>
                    <td>$r[Qnty]</td>
                    <td>$r[PurchaseUOMName]</td>
                    <td>$r[CurrencyID]</td>
                    <td>$r[ExchangeRateIDR]</td>
                    <td>$unitprice </td>
                    <td>$total</td>
                    <td>Rp $totalidr</td>";             
          $no++;
          $counter++;

        }
    echo "</table>";
?> 
```

页面的显示

![图片](../Images/2c15699c225f3626fc69c47972c103e7.png)

现在我希望用户在选中一个复选框时另一个复选框禁用我使用 java 脚本的功能。这是我的代码

```
<script type="text/javascript">
function onClickFn(){
$("approve").click(function(){
    if ($(this).prop("checked"))
    {
        $("cancel").prop("checked",false);
    }
});

$("cancel").click(function(){
    if ($(this).prop("checked"))
    {
        $("approve").prop("checked",false);
    }
})
};
</script> 
```

但该功能不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T06:56:17.713

```
1\. First of all you have given same id to all <TD>.
2\. You haven't used proper id reference in your javascript.
3\. Use radio button instead. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:03:41.730

jQuery：

```
$('table').on('click', 'input:checkbox', function() {
    $(this)
    .parents('tr')
    .find('input:checkbox:not(:checked)')
    .attr('disabled', $(this).is(':checked'));
}); 
```

[http://jsfiddle.net/samliew/ERZge/](http://jsfiddle.net/samliew/ERZge/)

但是，您确实应该使用单选按钮，**除非**您当然希望用户能够*取消*选中复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T06:56:05.953

你为什么不只使用单选按钮？这似乎是一个更好的选择。此外，如果您希望禁用单选按钮，这就是 jQuery 的样子： `jQuery("input:radio").attr('disabled',true);`

# jquery - 使用 ajax 日期打开 HTML 页面

> ID：15196078
> 
> 赞同：0
> 
> 时间：2013-03-04T06:51:21.500
> 
> 标签：jquery, html, ajax

我有一个 ajax 代码，我正在从服务器端获取数据。现在我需要将数据作为弹出窗口或单独的 HTML 打开。我正在尝试以下代码，但没有帮助。

```
 <script type="text/javascript" language="javascript">
          $('#reschedule').click(function(){
              $.ajax({
                  type:'get',
                  url: "/schedule/"+id,
                  cache:false,
                  async:true,
                  data:id,
                  success: function(data) {
                      alert(data)
                      $("html").html($(data).find("html").html());

                  }

              })
          });

    </script> 
```

所以我需要将响应打开为单独的 HTML 弹出窗口或同一选项卡上的单独页面。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:54:41.427

您还可以使用`window.open`核心 javascript 方法。

**例子**

```
success: function(data) {
   window.open();
} 
```

**更多的**

```
success: function (data) {
    var win=window.open('about:blank');
    with(win.document)
    {
      open();
      write(data);
      close();
    }
} 
```

还

```
var w = window.open();
$(w.document.body).html(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:54:43.900

改变

`$("html").html($(data).find("html").html());`至

`newWin = window.open("",'pageTitle','height=500,width=500');`

`newWin.document.write(data);`

# ms-word - MS Word OLE - 用图像替换文本。第一个代码块有效，第二个无效

> ID：15196081
> 
> 赞同：0
> 
> 时间：2013-03-04T06:51:30.920
> 
> 标签：ms-word, lotus-notes, ole

我在 lotusscript 中编辑一些代码以使用 OLE 从模板创建一个 word 文档，并且正在执行查找和替换以添加图像。这适用于第一张图像，但不适用于第二张图像。

```
objWord.Selection.Find.Execute "{{image1}}",False, True,,,,, 1,,,,,,,
objWord.Selection.Extend
If (objWord.Selection.Characters.Count > 1) Then
    If (signaturefilename = "") Then
        objWord.Selection.Find.Execute "{{image1}}", False, True,,,,, 1,, " ", 2,,,,        
    Else
        Call objWord.Selection.InlineShapes.AddPicture(tempdir + "\" + imagefilename, False, True,)     
    End If
End If

objWord.Selection.Find.Execute "{{image2}}",False, True,,,,, 1,,,,,,,
objWord.Selection.Extend
If (objWord.Selection.Characters.Count > 1) Then
    If (signaturefilename = "") Then
        objWord.Selection.Find.Execute "{{image2}}", False, True,,,,, 1,, " ", 2,,,,        
    Else
        Call objWord.Selection.InlineShapes.AddPicture(tempdir + "\" + imagefilename, False, True,)     
    End If
End If 
```

第一段代码完美运行，但第二段并没有像我预期的那样用图像替换第二段文本。

我原以为第二个 Find.Execute 会找到第二个文本块，但它最终会替换文档中的所有文本。

有什么明显的我忽略了吗？

谢谢，

一种

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:48:13.133

好的 - 解决了。它是：

```
objWord.Selection.Extend 
```

需要删除。尽管第一次没有选择整个文档，但第二次却选择了。这现在完美无缺。感谢理查德的指针。

此外，我使用了：

```
objWord.Visible = True 
```

协助调试。

# cmake - CMake生成的文件导致编译失败

> ID：15196082
> 
> 赞同：0
> 
> 时间：2013-03-04T06:51:35.520
> 
> 标签：cmake

我正在使用 CMake 版本 2.8.10.2。在其中一个 build.make 文件中，它通过回显文件的内容来生成 version.h 文件。这是命令：

```
echo \#define QGSVERSION \"1c2b025\" >C:/dev/cpp/Quantum-build/qgsversion.h 
```

它最终在 .h 文件中为

```
\#define  QGSVERSION \"1c2b025\" 
```

编译时，我收到有关`stray '\' in program`.

这是`\#`定义之前的问题。看起来 CMake 想`#`用`\`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:11:59.950

提供的 CMakeLIst.txt 文件中存在问题。在 CMakeList.txt 文件中说明了

```
\\\#define QGSVERSION \\\"${REVISION}\\\" >${CMAKE_CURRENT_BINARY_DIR}/qgsversion.h 
```

它应该在哪里

```
\#define QGSVERSION \"${REVISION}\" >${CMAKE_CURRENT_BINARY_DIR}/qgsversion.h 
```

转义序列不正确。

# android - Android：从服务器下载文件后，如何在保存到 SDCARD 之前加密文件？

> ID：15196083
> 
> 赞同：1
> 
> 时间：2013-03-04T06:51:47.790
> 
> 标签：android

我已成功将文件从服务器下载并保存到我的 SDCARD，但我需要先**加密**文件，然后再保存到**SDCARD**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T06:53:27.583

使用 a `CipherOutputStream`or`CipherInputStream`与 Cipher 和您的 FileOutputStream / FileInputStream。我建议像`Cipher.getInstance("AES/CBC/PKCS5Padding");`构造函数调用一样。如果您想使用密码，请确保您确实使用了良好的密钥派生机制（查找基于密码的加密）。对于多个文件，对 IV 使用 NONCE（参见维基百科）。

编码/解码字符串时始终指定字符编码，否则当平台编码与前一种不同时，您将遇到麻烦。换句话说，不要使用`String.getBytes()`但使用`String.getBytes(Charset.forName("UTF-8"))`.

为了使其更安全，请添加安全校验和（MAC 或 HMAC），并且不要忘记在计算开始时添加 NONCE。

# objective-c - 如何为可加载捆绑包设置主体类？

> ID：15196093
> 
> 赞同：1
> 
> 时间：2013-03-04T06:52:57.063
> 
> 标签：objective-c, macos, cocoa, nsbundle

好的，我研究了一些资源和示例代码（像[这样](http://juliuspaintings.co.uk/cgi-bin/paint_css/more_cocoa_examples/082-PlugIns.pl)），它应该很简单，但我仍然找不到答案。

除了一个小细节之外，我已经设法让整个事情*（让外部包加载和集成）工作。*

我从包中得到“主”类，使用：

```
NSString* bundlePath = [[NSBundle mainBundle] pathForResource:@"MyBundle" 
                                                       ofType:@"plugin"];
NSBundle* myBundle = [NSBundle bundleWithPath:bundlePath];
Class someClass = [myBundle principalClass]; 
```

问题是：**我如何**（以及在​​哪里）在包中设置“principalClass”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:53:37.240

该问题的解决方案相当简单（如果我们排除我自己与 Xcode 错误相关的问题，而实际上并未更新对初始项目所做的更改）。

正如@AnoopVaidya 还指出的那样，只需打开您的`info.plist`，即使`NSPrincipalClass`密钥不存在，也将其值设置为您的实际“主体类”的名称。

一旦你*清理*和重建*，*你的包的主体类应该被正确识别。

**文档：**

> NSBundle 以两种方式之一找到主体类。首先，它在包的信息属性列表中查找 NSPrincipalClass 键。如果键存在，它将使用键的值命名的类作为包的主体类。如果键不存在或者键指定了一个不存在的类，NSBundle 使用第一个加载的类作为主体类。如果包是用 Xcode 构建的，那么在项目中查看的类的顺序决定了它们的加载顺序。

**来源 ：**

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/Concepts/CocoaBundles.html#//apple_ref/doc/uid/20001269-BAJCIAHA](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/Concepts/CocoaBundles.html#//apple_ref/doc/uid/20001269-BAJCIAHA)

# ios - 将十进制转换为十六进制，添加到字节数组

> ID：15196095
> 
> 赞同：1
> 
> 时间：2013-03-04T06:53:01.277
> 
> 标签：ios, objective-c, c, hex, decimal

我正在针对 iOS 的 Objective C 中进行一些图像转换，并且在将总图像大小保存在字节数组中时遇到了一些困难。

我做了一些搜索，stackoverflow 有很多关于从十进制转换为十六进制的问题，但它们都解释了如何使用`%x`printf（或 NSLog）打印十六进制值，这不是我想要的。

我有一个大小为 2500 的图像

```
int totalSize  = 2500; 
```

我想将此大小添加到图像标题中的特定索引

```
UInt8 headerData[HEADER_SIZE];
memset(headerData, 0, HEADER_SIZE);

//2500 dec  = 9C4 hex
headerData[2]   = 0xC4;
headerData[3]   = 0x09;
headerData[4]   = 0x00;
headerData[5]   = 0x00;    //image size total 4 bytes 
```

我找到[了这个](https://stackoverflow.com/questions/4085612/converting-an-int-to-a-2-byte-hex-value-in-c)线程并尝试了它

```
char hexval[5];
memset(hexval, 0, 5);
if (totalSize <= 0xFFFF){
    sprintf(&hexval[0], "%0x", totalSize);
}

printf("%x %x %x %x", hexval[0], hexval[1], hexval[2], hexval[3]); 
```

它打印了

```
36 36 33 32 
```

这不是正确的值，还是我在这里遗漏了一些明显的东西？

**编辑：**对不起，忘了放字节序部分。我想以小字节序格式保存。

注意：我还添加了一个 C 标记，因为 C 解决方案也适用于此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:00:32.737

**修订**：所以这不是字节顺序问题，但这里的代码以小端顺序正确获取字节值，逐字节：

```
int totalSize = 2500;

headerData[2] = totalSize >> 0 & 0xFF; // 0xC4
headerData[3] = totalSize >> 8 & 0xFF; // 0x09
headerData[4] = totalSize >> 16 & 0xFF; // 0x00
headerData[5] = totalSize >> 24 & 0xFF; // 0x00 
```

* * *

尽管在很多方面，第二段代码都是错误的。它的目的是什么？

你也许只是想要这个（没有循环或任何东西）：

```
printf("%04x", totalSize); 
```

或者将其转换为 hexval C 字符串并打印：

```
char hexval[5]; // actually, since totalSize can be > 0xFFFF, 9 would be better size
snprintf(hexval, sizeof hexval, "%04x", totalSize); // note: sizeof hexval only works if hexval is char array with static size
printf("%s", hexval); 
```

或者当值被打印为十六进制字符串时，你*真的想要单个字符的 ASCII 码吗？*

* * *

嗯，还有，当您说“从十进制转换为十六进制”时，您是什么意思？将数值存储到二进制文件（我认为您的图像文件是二进制文件而不是 XML 或其他文件）与十进制/十六进制转换*无关。*它将内存中的数字存储到文件中的字节中，十进制/十六进制根本没有真正进入它（除了打印值供人类阅读以进行调试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:16:52.047

如果您在 iOS 下执行此操作，这是 little endian，并且您想要 little endian 顺序，那么它很简单：

```
*(uint32_t *)(header + 2) = totalSize; 
```

如果你想要一个跨平台的解决方案，那么@hyde 提供的逐字节解决方案就是你要走的路。

# javascript - 如何使用 dojo 创建可滚动的移动列表视图？

> ID：15196099
> 
> 赞同：1
> 
> 时间：2013-03-04T06:53:22.683
> 
> 标签：javascript, list, dojo

我想使用 dojo 为移动应用程序创建一个列表，该列表也必须是可滚动的。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:35:43.330

如果您的视图是 dojox/mobile/ScrollableView，那么其中的任何列表都是可滚动的。例如：

```
<div id="bookmarks" data-dojo-type="dojox/mobile/ScrollableView">
    <h1 data-dojo-type="dojox/mobile/Heading">Some Heading</h1>
    <ul data-dojo-type="dojox/mobile/RoundRectList">
        <li data-dojo-type="dojox/mobile/ListItem">Some item</li>
        <li data-dojo-type="dojox/mobile/ListItem">Another item</li>
        <-- etc... -->
    </ul>
</div> 
```

请参阅[http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ScrollableView.html](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ScrollableView.html)

# object - 报表中的业务对象计算百分比

> ID：15196102
> 
> 赞同：-1
> 
> 时间：2013-03-04T06:53:29.213
> 
> 标签：object, reporting, sap

例如，我在报告窗口中有这样的数据集：~ 2013-02-01 2013-02-02 2013-02-03 A 10 1 5 B 20 2 45 C 70 2 0

但我想在我的报告中显示这一点，例如 ~ 2013-02-01 2013-02-02 2013-02-03 A 10% 20% 10% B 20% 40% 90% C 70% 40% 0%

我应该使用哪个公式（或 smth）？谢谢你

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-21T08:11:43.757

更改该列的格式......将数字格式更改为百分比......然后你会得到它......

# ios - 成员访问不完整类型“CALayer”

> ID：15196105
> 
> 赞同：3
> 
> 时间：2013-03-04T06:53:41.880
> 
> 标签：ios, mapkit, calayer

对于下面的代码：

```
CGRect frame = CGRectMake(0, 0, cellWidth, 240);
MKMapView *mapView = [[MKMapView alloc] initWithFrame:frame];

mapView.layer.masksToBounds = YES;     
mapView.layer.cornerRadius = 10.0; 
```

我还加入了 MapKit、QuartzCore 和 CoreLocation 框架。对于最后 2 行，我收到错误消息：“成员访问不完整类型 'CALayer'”

请告诉我为什么会出现此错误以及如何解决此错误

编辑：我收到此错误，因为我没有导入 Quartz.h，但我仍然不明白为什么它说 CALayer 类型不完整。任何人都可以深入了解这一点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T06:55:42.317

你有没有：`#import <QuartzCore/QuartzCore.h>`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:02:44.883

您应该在您的特定类或文件中导入 QuartzCore/QuartzCore.h 框架。我认为您没有在特定文件中导入此框架。

# c# - 从远程机器上运行的服务开始登录

> ID：15196110
> 
> 赞同：1
> 
> 时间：2013-03-04T06:54:03.607
> 
> 标签：c#, windows-services, wmi

嗨，我想使用 C# 在远程机器（在网络中，使用计算机名或 IP）上获取所有服务及其“登录 AS”的列表。

我认为它可以使用 WMI 来实现，但不知道如何（我以前没有使用过 wmi）？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:01:53.933

您可以使用[Win32_Service](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418%28v=vs.85%29.aspx)类的`StartName`属性。

试试这个样本

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Win32_Service");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","Name",WmiObject["Name"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","StartName",WmiObject["StartName"]);// String

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T11:37:46.483

我认为有更简单的方法，您可以在注册表中的服务详细信息（SYSTEM\CurrentControlSet\services\service name）中找到它并且您有对象名称

# javascript - 如何在 nopcommerce 中使用 java 脚本在图像上插入文本

> ID：15196111
> 
> 赞同：-3
> 
> 时间：2013-03-04T06:54:04.063
> 
> 标签：javascript, nopcommerce

嗨，我使用 nopcommerce 2.60（MVC 结构），如何使用 javascript 在图像上插入文本

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:56:10.487

如果要将文本嵌入到图像中。[除非您使用 html5 的SVG](http://www.ibm.com/developerworks/library/wa-scalable/index.html)，否则您无法使用 javascript 来做到这一点。

# javascript - 在 Google Chrome 中获取窗口焦点

> ID：15196113
> 
> 赞同：0
> 
> 时间：2013-03-04T06:54:23.073
> 
> 标签：javascript, google-chrome, focus

我需要确定 google chrome 浏览器何时获得焦点。特别是加载我的页面的浏览器选项卡。

场景：我在 Google Chrome 浏览器中打开了一个页面。每当窗口（相应的浏览器选项卡）获得焦点（鼠标单击/键盘导航）时，我需要在 javascript 中调用一个事件。

[我尝试过 addEventListener 并附加 'focus' 事件，但在聚焦窗口时它会触发不止一次。单击浏览器地址栏时不会触发。]

请帮忙。任何提示都会很明显。

谢谢，阿尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:53:54.743

我认为没有办法在地址栏聚焦时获得通知，您只能根据文档本身来做到这一点。这意味着您确实应该绑定窗口的焦点事件。

由于多火对您来说是个问题，因此您需要考虑限制您的通话。请参阅这篇文章以供参考：[http ://drupalmotion.com/article/debounce-and-throttle-visual-explanation](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)

顺便说一句，underscore.js 是一个非常漂亮的库，并且具有诸如“去抖动”、“节流”、“延迟”之类的方法，可以帮助您解决多火问题：[http ://underscorejs.org/](http://underscorejs.org/)

# javascript - JavaScript 和函数重载说明

> ID：15196123
> 
> 赞同：5
> 
> 时间：2013-03-04T06:55:06.907
> 
> 标签：javascript

我正在阅读[JavaScript Ninja 的秘密，](http://www.manning.com/resig/)我看到这段代码会产生函数重载：

```
function addMethod(object, name, fn)
{
        var old = object[name];
        object[name] = function ()
        {
                if(fn.length == arguments.length) return fn.apply(this, arguments)
                else if(typeof old == 'function') return old.apply(this, arguments);
        };
}

function Ninjas()
{
        var ninjas = ["Dean Edwards", "Sam Stephenson", "Alex Russell"];
        // addMethod is defined in Listing 2-28
        addMethod(this, "find", function ()
        {
                return ninjas;
        });
        addMethod(this, "find", function (name)
        {
                var ret = [];
                for(var i = 0; i < ninjas.length; i++)
                if(ninjas[i].indexOf(name) == 0) ret.push(ninjas[i]);
                return ret;
        });
        addMethod(this, "find", function (first, last)
        {
                var ret = [];
                for(var i = 0; i < ninjas.length; i++)
                if(ninjas[i] == (first + " " + last)) ret.push(ninjas[i]);
                return ret;
        });
}

var ninjas = new Ninjas();

assert(ninjas.find().length == 3, "Finds all ninjas");
assert(ninjas.find("Sam").length == 1, "Finds ninjas by first name");
assert(ninjas.find("Dean", "Edwards").length == 1, "Finds ninjas by first and last name");
assert(ninjas.find("Alex", "X", "Russell") == null, "Does nothing");

function assert(a,b)
{
  if (a==true) console.log(b) ; else console("----");
} 
```

据我了解，`addMethod`始终保持`old`函数的值（通过闭包）。

所以最后，有 *一个*函数可以检查一个条件，如果它失败了，它会调用这个`old`函数，而这个函数*又会做同样的事情*。

但是我不明白（我知道和`arguments.length`之间的区别）的评估。`function().length``argument.length`

`arguments`指的是哪个矩形？

![在此处输入图像描述](../Images/612d4cb5ea1d9342af007f69429fa67c.png)

我在调试器中跟踪它，我很困惑，因为起初，函数寄存器（`arguments.length`也是 3 `[(object, name, fn)]`，但后来它被调用，所以现在还有另一个参数。

那是如何工作的？

[**JSBin**](http://jsbin.com/ecebel/3/edit)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:08:26.550

> 但是参数是否指的是：（哪个矩形？）

第二个——`object[name] = function ()`

`arguments`将始终引用最里面的`function`声明/表达式的对象。`arguments`任何*外部* s的`function`，例如`addMethod(object, name, fn)`，都将被遮蔽并呈现为不可访问，因为它们都使用相同的标识符。

* * *

它使用第一个匹配项将命名为 ( `fn.length`) 的参数数量与传入 ( ) 的参数数量进行比较。`arguments.length`以便：

```
ninjas.find()                       // (0 == 0), uses `function ()`
ninjas.find("Sam")                  // (1 == 1), uses `function (name)`
ninjas.find("Dean", "Edwards")      // (2 == 2), uses `function (first, last)`
ninjas.find("Alex", "X", "Russell") // (? == 3), no match, returns `undefined` 
```

# class - Mootools 注入新元素

> ID：15196126
> 
> 赞同：1
> 
> 时间：2013-03-04T06:55:27.160
> 
> 标签：class, function, mootools, using, inject

我正在尝试在具有父类的 div 中注入一个元素。当我使用 ID 选择器注入时没有问题，但是一旦我尝试使用类选择器，它就不起作用了..

```
window.addEvent('domready',function(){
    var FirstElement = new Element('div', {id: 'FirstElement',text:'test'});
    $('submit').addEvent('click',function(){                
        FirstElement.inject('parent');//working using ID selector               
        FirstElement.inject('div.parent');//not working using Class selector
    });
}); 
```

这是html代码

```
<div class="parent" id="parent"></div>
<input id='submit' value="submit" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:08:08.913

用。。。来代替：

`FirstElement.inject(document.getElement('div.parent'));`

请记住，这将返回第一个匹配项`div.parent`，因此如果您有多个匹配项，则需要锚定到表单中，例如表单元素`this.getElement('div.parent')`在哪里`this`

# shared-libraries - 使用或不使用 -c 编译共享库

> ID：15196128
> 
> 赞同：3
> 
> 时间：2013-03-04T06:55:36.120
> 
> 标签：shared-libraries, cc

我正在将 ac 程序编译为要导入`Ctypes`到 python 中的共享库。这些是我遵循的步骤：

```
cc -c -fPIC simplepbc.c -lcrypto -lpbc -lgmp -o ibc.o
cc -shared ibc.o -lcrypto -lpbc -lgmp -Wl,-soname,libibc.so.1 -o libibc.so.1.0.1 
```

制作共享库时建议不要使用`-c`，因为编译后不会链接（我在这里的一些帖子上看到过，我得到链接后会发布链接）。但我注意到，当我删除时`-c`，会弹出这些错误：

```
ibc.o: In function `_fini':(.fini+0x0): multiple definition of `_fini'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.fini+0x0): first defined here
ibc.o: In function `__data_start':
(.data+0x8): multiple definition of `__dso_handle'
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtbeginS.o:(.data.rel+0x0): first defined here
ibc.o: In function `_init':
(.init+0x0): multiple definition of `_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.init+0x0): first defined here
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtendS.o:(.dtors+0x0): multiple definition of `__DTOR_END__'
ibc.o:(.dtors+0x8): first defined here
/usr/bin/ld: error in ibc.o(.eh_frame); no .eh_frame_hdr table will be created.
collect2: ld returned 1 exit status 
```

所以我添加`-c`了，错误消失了。另外，我也可以从 ctypes 导入库，没有任何问题。以后会不会惹麻烦？

使用或不使用 -c 进行编译时会出现哪些问题？

# c# - 如何将按钮列表转换为数组？

> ID：15196132
> 
> 赞同：1
> 
> 时间：2013-03-04T06:55:45.473
> 
> 标签：c#, arrays, list, button

我正在寻找制作一个二维按钮数组。我已经命名了 b1、b2、b3、b4（b5 将在下一行等）。我可以将按钮添加到一维列表中，如下所示：

```
List<Button> buttonList;

buttonList = new List<Button> {b1,b2,b3,b4,b5 (etc.)}; 
```

现在，我需要将这些按钮放入一个类似这样的数组中：

```
{{0, 1, 2 , 3}, {4, 5, 6, 7}, {8, 9, 10, 11}, {12, 13, 14, 15}}; 
```

其中`b1`将是 0，`b2`将是 1，依此类推。

我对此很陌生，找不到任何类似的东西，我对 for/foreach 循环不太好，也许需要其中一个循环来执行此操作，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:03:00.727

```
var myArray = new Button[,] { { b1, b2, b3, b4 },
                              { b5, b6, b7, b8 },
                              { b9, b10, b11, b12 },
                              { b13, b14, b15, b16 } }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:10:53.470

如果要将列表转换为数组（连续 4 个），这是一种 LINQ 方法：

```
var buttonsArray = buttonsList
                   .Select((b, i) => new {Index = i, Button = b})
                   .GroupBy(x => x.Index/4)
                   .Select(x=>x.Select(y=>y.Button).ToArray())
                   .ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:04:14.087

您可以使用此代码

```
 var x = new List<List<Button>>
                    {
                        new List<Button>
                            {

                             b4,b5,b6

                            }
                    }; 
```

或使用

```
 var x=  new Button[] { { b1, b2, b3, b4 } }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:05:56.707

我建议使用列表列表而不是数组。

```
var groupedList = new List<List<Button>>();

for(i = 0; i < buttonList.length / 4 + 1; i++) //plus one will ensure we don't loose buttons if their number doesn't divide on four
{
   groupedList.Add(buttonList.Skip(i * 4).Take(4));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T07:06:04.647

如果你需要更新你的，试试`List<Button>`这个`int [][]`

```
var nums = new[] { new[] { 0, 1, 2, 3 }, new[] { 4, 5, 6, 7 }, new[] { 8, 9, 10, 11 }, new[] { 12, 13, 14, 15 } };
int counter = 0;
foreach (int[] ints in nums)
{
    foreach (int i in ints)
    {
        buttonList[counter].Text = i.ToString();
        counter++;
    }
} 
```

解决此问题的更好方法是：

```
private List<Button> buttonList = new List<Button>();
private void addButtonsDynamically(object sender, EventArgs e)
{
    int top = 10, left = 10;
    for (int i = 1; i <= 16; i++)
    {
        Button btn = new Button();
        btn.Parent = this;
        btn.Size = new Size(25, 25);
        btn.Text = (i - 1).ToString();
        btn.Location = new Point(left, top);

        left += 35;
        if (i > 0 && i % 4 == 0)
        {
            top += 35;
            left = 10;
        }
    }
} 
```

它将创建如下输出：

![样本输出](../Images/307194dcf3c86be6f51cbab5544c3871.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T07:01:32.167

尝试这样的事情：

```
var lst = new List<List<Button>>();
lst.Add(new List<Button>{b1,b2,b3});
lst.Add(new List<Button>{b4,b5,b6});

foreach(var buttonList in lst)
{
  foreach(var button in buttonList )
  {
    //do stuff with button
  }
} 
```

或者，如果您需要将集合设置为数组（无论出于何种原因）

```
var ary = List<Button>[2]; //two elements in ary.
ary[0] = new List<Button>{b1,b2,b3};
ary[1] = new List<Button>{b4,b5,b6}; 
```

循环保持不变。

# php - jquery：使用 $.post 更新可变数量的值

> ID：15196138
> 
> 赞同：0
> 
> 时间：2013-03-04T06:56:11.273
> 
> 标签：php, jquery

我想更新 ajax 中可变数量的项目。我所拥有的是

```
<input name="cart[qty][25]" id="25" value="10" size="4" title="Qty" class="input-text qty"> 
```

假设我的表单中有 10 个类似的字段，还有很多其他字段不需要更新。

我想更新购物车中 id 等于文本字段 id 的商品数量。我知道它可以很容易地在 php 中使用

```
if(isset($_POST['update'])){
  foreach($_POST['cart']['qty'] as $k=>$v)
{
  // Do stuff
} 
```

但我想在 $.post 这样的东西

```
jQuery(".update-cart").on('click',function(){
  jQuery(".cart-item").each(function(){
  var  id = jQuery(this).attr('id');
  var qty = jQuery(this).val();
    //What should i do here and on my php file ?
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:04:11.107

您可以尝试 Jquery 序列化方法。

[http://docs.jquery.com/Ajax/serialize](http://docs.jquery.com/Ajax/serialize)

更新：

```
jQuery(".update-cart").on('click',function(){
jQuery(".cart-item").each(function(){
 if(jQuery(this).hasClass('qty'))
 {
   var  id = jQuery(this).attr('id');
   var qty = jQuery(this).val();
 }
 //What should i do here and on my php file ?
 });
}); 
```

或者

```
jQuery(".update-cart").on('click',function(){
   alert($('.qty').serialize());
}); 
```

# php - APN php 代码给出警告：stream_socket_client() [function.stream-socket-client]：无法连接到 ssl://gateway.sandbox.push.apple.com:2195

> ID：15196145
> 
> 赞同：2
> 
> 时间：2013-03-04T06:56:31.223
> 
> 标签：php, iphone, api, sockets, apple-push-notifications

我正在尝试使用 php 代码实现 Apple 推送通知。这是我的代码

```
$deviceToken = 'My device token';
$passphrase = '';
$message = 'My first push notification!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'apns-dev-cert.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

$fp = stream_socket_client(
    'ssl://gateway.sandbox.push.apple.com:2195', $err,
    $errstr, 120, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );
$payload = json_encode($body);
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

fclose($fp); 
```

证书 .pem 文件与文件位于同一目录中。这段代码在我的本地机器上运行良好。我正在使用 MAMP。我在我的设备上收到通知。

但是当我在服务器上尝试它时，它不起作用并给出错误。

> 警告：stream_socket_client() [function.stream-socket-client]：无法连接到 /home/nextgen/public_html/ApplicationGenerator/appointmentportal/ 中的 ssl://gateway.sandbox.push.apple.com:2195（连接被拒绝）第 14 行的 iosapp/SimplePush/simplepush.php 连接失败：111 连接被拒绝

如果证书文件错误，它将如何在我的本地服务器上工作？

我没有办法摆脱这种情况。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:02:51.437

假设您的服务器打开了正确的端口，“连接被拒绝”通常暗示无效的 .PEM 文件或不正确的密码短语。确保当您打开 .PEM 文件时，标题看起来像这样：

```
Bag Attributes
friendlyName: Apple Development IOS Push Services: com.yourapp.app
localKeyID: A8 77 BC 0C 2E 81 10 6E 78 9F XX XX XX XX XX XX 
```

subject=/UID=com.yourapp.app/CN=Apple Development IOS Push Services: com.yourapp.app/C=FR issuer=/C=US/O=Apple Inc./OU=Apple Worldwide Developer Relations/CN= Apple 全球开发者关系认证机构

后跟一个密钥，然后应该跟一个看起来像这样的标题为您的私钥：

```
Bag Attributes
friendlyName: Joe Black
localKeyID: A8 77 BC 0C 2E 81 10 6E 78 9F XX XX XX XX XX XX XX XX
Key Attributes: <No Attributes> 
```

我建议您也删除密码以减少潜在的错误来源。

# java - 使用 Java/JavaScript 以编程方式更改 Chrome 对 Adob e Reader 的偏好

> ID：15196146
> 
> 赞同：-1
> 
> 时间：2013-03-04T06:56:36.093
> 
> 标签：java, javascript, adobe-reader

我可以使用 Java/JavaScript 编辑 Adob​​e Reader 的首选项吗？我有时想禁用在浏览器中读取 PDF 文件的选项，有时我应该能够通过编程方式启用该选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:09:27.697

您应该无法逃脱浏览器，那将是一个安全漏洞。请参阅各种最近的 Java 漏洞。

您可以做的是在 HTTP 响应中发送不同的 Content-Type 标头：

*   application/pdf 告诉浏览器这是一个 PDF，浏览器可以对其进行操作以直接显示它
*   octet/binary-stream 告诉浏览器它没什么特别的，在这种情况下它不应该显示它，而只提供用户将它保存在磁盘上

# magento - 我想在 magento 中管理类别

> ID：15196149
> 
> 赞同：0
> 
> 时间：2013-03-04T06:56:51.703
> 
> 标签：magento

我想在 magento 中管理类别，但我在添加类别时遇到了一个错误，当时让我们看看我的错误并给我正确的答案我显示我的错误致命错误：调用 C:\wamp 中非对象上的成员函数 getId() \www\magento\lib\Varien\Data\Tree\Dbp.php 在第 332 行我给出了我的代码

```
 public function loadEnsuredNodes($category, $rootNode)
{

    $pathIds = $category->getPathIds();
    $rootNodeId = $rootNode->getId();
    $rootNodePath = $rootNode->getData($this->_pathField);

    $select = clone $this->_select;
    $select->order($this->_table.'.'.$this->_orderField . ' ASC');

    if ($pathIds) {
        $condition = $this->_conn->quoteInto("$this->_table.$this->_idField in (?)", $pathIds);
        $select->where($condition);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:59:25.813

get/set 函数是各种对象的特性。你的错误说；rootNode 不是一个变量对象。

# java - SOAP Webservice 给出以下错误

> ID：15196150
> 
> 赞同：0
> 
> 时间：2013-03-04T06:57:04.193
> 
> 标签：java, soap

> javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径。

尝试使用[http://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/](http://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/)生成证书，但仍然出现异常

# c - 在 PostgreSQL 中准备、存储、检索加密数据

> ID：15196151
> 
> 赞同：0
> 
> 时间：2013-03-04T06:57:14.963
> 
> 标签：c, mcrypt, postgresql-9.2, libpq, bytea

有谁知道如何正确准备将 BYTEA 数据类型插入到 postgresql 中？我有一个从 libmcrypt 生成的加密字符串。我希望将加密存储在定义为“cdata bytea not null”的表列中

我的核心与命令行完美配合，但现在我希望将加密存储在 RDBMS 中，作为对文件的操作。代码片段如下：

```
int rs;
char buffer[1];
char dbuffer[1024];
datafile = "This is my house";  // assume this to be a file
crypt_key[] = "12345678901234567890123456789012";  //  32 bytes
crypt_iv[] =  "11111111111111111111111111111111";  // 32 bytes
mfd = mcrypt_module_open(MCRYPT_RIJNDAEL_256, NULL, "cfb", NULL);  // assume success
mcrypt_generic_init(mfd, crypt_Key, 32,crypt_iv);  // assume success

while(readInputFile(datafile,buffer,sizeof(buffer),&bytes) == cgiFormSuccess) {
        mcrypt_generic(mfd,buffer,sizeof(buffer));  // buffer size s/b 1
        dbuffer[i++] = *buffer;
        dbuffer[i] = '\0';  // Time spent on string sanity
}  // processed each byte is now encrypted

// Now I wish to prepare dbuffer for table insertion
sb = PQescapeByteaConn(dbconn,dbuffer,(size_t)strlen(dbuffer),&rs);

// Perform Insertion --> cdata::BYTEA
sprintf(query,"INSERT INTO crypto (uid,crypt_key,crypt_iv,cdata,cfile)"
                  "VALUES('%s','%s','%s','%s','%s')",
         ebs->uid,ebs->crkey,ebs->crivs,sb,credf);  // cfile == original filename
ebs->r=db_func_query(ebs->r,query,0,proc);  // Please assume DB command success

// Expected output sb == \x...some hex, dbuffer == encrypted bytes.  sb is now in bytea table column.
######################################
// Prepare to decrypt the cdata::bytea column

sprintf(query,"DECLARE %s CURSOR FOR SELECT crypt_iv,cdata,cfile "  // not sure if cursor s/b regular or binary for this
                  "FROM crypto WHERE uid='%s' AND crypt_iv='%s' AND action=true",
         VCURSOR,ebs->uid,ebs->crkey);

db_func_txn_begin(ebs->r,proc);
ebs->r = db_func_query(ebs->r,query,1,proc);  // process the query and assume it delivers the row
if(totalrow) {
     nFields = PQnfields(ebs->r);
     char* results[nFields];
     for(i = 0;i < totalrow;i++) {
          for(j = 0;j < nFields;j++)
               results[j] = PQgetvalue(ebs->r,i,j);
          strcpy(crypt_iv,results[0]);
          strcpy(dbuffer,results[1]);
          strcpy(cfile,results[2]);
}
mcrypt_generic_init(mfd, crypt_Key, 32,crypt_iv);  // assume success
sb = PQunescapeBytea(dataBuf,&rs);

for(i = 0;i < rs+1;i++) {
     mdecrypt_generic(mfd,sb[i],1);  // buffer size s/b 1
     dbuffer[i] = sb[i];
     dbuffer[i+1] = '\0';  // Time spent on string sanity
}

// Expected output sb == reverse of PQescapeByteaConn, dbuffer == unencrypted bytes. 
```

必须有一种方法可以成功插入和查询加密字符串以进行解密。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:14:32.770

问题解决了。只要您转义 mcrypted 字符串的输出，您就可以只使用一个文本列。Bytea 更干净，但代码行更多，而且 PGunescapeBytea 显然是解密所必需的。

# php - php 在刷新表单时停留在用户选择单选按钮（由于错误检查或其他原因）

> ID：15196155
> 
> 赞同：4
> 
> 时间：2013-03-04T06:57:36.220
> 
> 标签：php

这是我的代码

```
<input type="radio" name="rdNumber" value="100"<?=(isset($_POST['rdNumber']) == 100 ? "checked" : "")?>/>100 
<input type="radio" name="rdNumber" value="1000" checked="checked"/>1000 
```

它不能按要求工作.. 当表单提交时（并且在任何错误情况下），它会返回到默认选中的单选按钮，即 value = 1000 用户必须再次点击 value = 100，而目标是，如果用户选择了 100 单选按钮，他将保留 100，而不是移动到默认选中（即值 = 1000）

我哪里错了？另外，如果其他版本相同，那将是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:01:28.890

`isset`从这里删除：

改变 ：

```
<input type="radio" name="rdNumber" value="100" <?=(isset($_POST['rdNumber']) == 100 ? "checked" : "")?>/>100 
<input type="radio" name="rdNumber" value="1000" checked="checked"/>1000 
```

到 ：

```
<input type="radio" name="rdNumber" value="100" <?php echo (isset($_POST['rdNumber']) && $_POST['rdNumber'] == 100) ? "checked" : "";?>/>100 
<input type="radio" name="rdNumber" value="1000" <?php echo (isset($_POST['rdNumber']))? (($_POST['rdNumber'] == 1000)? "checked":"" ): "checked"; ?>/>1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:00:54.710

您的代码中有一些问题：

这是正确的代码：

```
<input type="radio" name="rdNumber" value="100" <?php echo ((isset($_POST['rdNumber']) && $_POST['rdNumber'] == 100) ? "checked" : "")?>/>100 
    <input type="radio" name="rdNumber" value="1000" <?php echo  ((isset($_POST['rdNumber']) && $_POST['rdNumber'] == 1000) ? "checked" : "")?>//>1000 
```

我已经修改了，现在试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:01:55.220

我认为应该是：

```
<input type="radio" name="rdNumber" value="100"<?=(isset($_POST['rdNumber']) && $_POST['rdNumber'] == 100 ? "checked=\"checked\"" : "")?>/>100 
```

您正在将 isset 调用的结果与 100 进行比较，这可能不会产生所需的结果。

# javascript - 检查页面是否有'sameorigin'

> ID：15196158
> 
> 赞同：0
> 
> 时间：2013-03-04T06:57:54.653
> 
> 标签：javascript

我有一个脚本，它从一个 txt 文件中获取 url 并将它们放入一个框架中，计算每个框架加载所花费的时间。一切正常，直到我输入一个具有 iframe 保护（'sameorigin'）的 url，然后我的脚本崩溃并且没有给出其他 url 的结果。

这是我当前的脚本：

```
<script type="text/javascript">
    $.get("imones.txt", function (data) {
        var array = data.split(/\r\n|\r|\n/);
        var beforeLoad = (new Date()).getTime();
        var loadTimes = [];
        var beforeTimes = [];
        $('#frame_id').on('load', function () {
            beforeTimes.push(beforeLoad);
            loadTimes.push((new Date()).getTime());
            $('#frame_id').attr('src', array.pop());
            $.each(loadTimes, function (index, value) {
                var result = (value - beforeTimes[index]) / 1000;
                if (result < 0) {
                    result = result * (-1);
                }
                $("#loadingtime" + index).html(result);
                beforeLoad = value;
            });
        }).attr('src', array.pop());
    });
</script> 
```

**我不想绕过 'sameorigin' 保护，*我只想跳过任何受保护的 url*。**

为了解决这个问题，我在 stackoverflow 上找到了这个 - [http://jsfiddle.net/LHjwZ/11/](http://jsfiddle.net/LHjwZ/11/)

我根本不理解该代码，但如果我输入一个受保护的 url（例如 google.com），它会返回 a `truefalse`，如果我输入没有保护的 url 它会返回一个`falsefalse`. 所以我假设它以某种方式检测 url 是否有'sameorigin'，`true`如果有则返回。我想将那段 jsfiddle 代码放入我的代码中，但就像我说的那样，我不明白该代码是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:06:53.600

该代码使用**try...catch**语句：

```
try {
    // Put your regular code here
}
catch(e){
    // put here the code to execute in case of error
    // you can leave the catch section empty
} 
```

有关更多信息，请查看[MDN 站点](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch)。

# angularjs - AngularJS - 如何使用 ng-repeat 构造自定义过滤器以有条件地返回项目

> ID：15196161
> 
> 赞同：59
> 
> 时间：2013-03-04T06:58:03.443
> 
> 标签：angularjs, ng-repeat, angular-filters

我有一个打印列表项的 ng-repeat。我想编写一个自定义过滤器，以便仅在条件为真时打印列表项。

我似乎结构错误，因为变量似乎没有传递到过滤器。

**索引.php**

```
<div ng-show="userDetails.username" class="nav">
    <p>Menu</p>
    <li ng-repeat="menuItem in menu | matchAccessLevel:$rootScope.userDetails.accessLevel:menuItem.minAccess | orderBy:'position' ">
        <a ng-href="/angular-app/app/{{menuItem.id}}">{{menuItem.name}}</a>
    </li>
</div> 
```

**应用程序.js**

```
userApp.filter('matchAccessLevel', function() {
    return function( item, userAccessLevel, minAccessLevel ) {
        if( userAccessLevel >= minAccessLevel ) {
            return item;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-04T08:18:27.673

过滤器不适用于数组中的单个项目，它们会将整个数组转换为另一个数组。

```
userApp.filter('matchAccessLevel', function() {
  return function( items, userAccessLevel) {
    var filtered = [];
    angular.forEach(items, function(item) {
      if(userAccessLevel >= item.minAccess) {
        filtered.push(item);
      }
    });
    return filtered;
  };
}); 
```

看到这个[plnkr](http://plnkr.co/edit/nuSlCRB6Y7QbuLC67uzW?p=preview)

**总是检查函数的参数。值是什么并不总是很明显。 *

见过[滤器指南](http://docs.angularjs.org/guide/filter)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-15T21:27:14.083

您可以使用 Array.filter 获得更简洁的解决方案：

```
app.filter('matchAccessLevel', function() {
    return function( items, userAccessLevel ) {
      return items.filter(function(element){
        return userAccessLevel >= element.minAccess;
      });
    }
}); 
```

[检查 Plunker](http://plnkr.co/edit/8sjtMvXvv3i5wy07oG7s?p=preview)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-01T13:11:12.733

对于 CoffeeScript 爱好者：

```
userApp.filter 'matchAccessLevel', ->
  (items, userAccessLevel) ->
    item for item in items when userAccessLevel >= item.minAccess 
```

# java - Scrollview的直接Host添加

> ID：15196167
> 
> 赞同：0
> 
> 时间：2013-03-04T06:58:45.730
> 
> 标签：java, android

当出现“滚动视图只能托管一个直接子”错误时，我添加了一个主机线性布局，因此所有子 LL 都消失了，那么如何添加滚动视图并且它是直接主机，这样我的数据就不会消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:01:30.503

以 ScrollView->LinearLayout->其他视图。应该是你的层次结构。这里确保 Scrollview 和 LinearLayout 的高度和宽度是 fill_parent/match_parent。我想这是使您的其他层消失的唯一原因。

# ruby-on-rails-3 - r11 绑定错误，尽管 exec 命令中有 $port

> ID：15196169
> 
> 赞同：0
> 
> 时间：2013-03-04T06:58:56.983
> 
> 标签：ruby-on-rails-3, heroku

```
2013-03-04T06:47:21+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-04T06:47:21+00:00 heroku[web.1]: State changed from crashed to starting
**2013-03-04T06:47:22+00:00 heroku[web.1]: Starting process with command `exec unicorn -p 6662 -c ./config/unicorn.rb`**
2013-03-04T06:47:23+00:00 app[web.1]: I, [2013-03-04T06:47:23.679109 #2]  INFO -- : Refreshing Gem list
2013-03-04T06:47:24+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-04T06:47:24+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-04T06:47:25+00:00 app[web.1]:         This poses a security threat. It is strongly recommended that you
2013-03-04T06:47:25+00:00 app[web.1]:         cookies. This will not be supported in future versions of Rack, and
2013-03-04T06:47:25+00:00 app[web.1]:         Called from: /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.
2013-03-04T06:47:25+00:00 app[web.1]: 
2013-03-04T06:47:25+00:00 app[web.1]: 
2013-03-04T06:47:25+00:00 app[web.1]:         provide a secret to prevent exploits that may be possible from crafted
2013-03-04T06:47:25+00:00 app[web.1]:         SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
2013-03-04T06:47:25+00:00 app[web.1]:         future versions will even invalidate your existing user cookies.
2013-03-04T06:47:27+00:00 app[web.1]: I, [2013-03-04T06:47:27.469450 #2]  INFO -- : listening on addr=0.0.0.0:6662 fd=8
2013-03-04T06:47:27+00:00 app[web.1]: Disconnected from ActiveRecord
2013-03-04T06:47:27+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 55101, should be 6662 (see environment variable PORT)
2013-03-04T06:47:27+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-03-04T06:47:28+00:00 heroku[web.1]: Process exited with status 137
2013-03-04T06:47:28+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-04T06:47:31+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ivms/13? host=murmuring-plains-5992.herokuapp.com fwd="202.157.93.2" dyno= queue= wait= connect= service= status=503 bytes= 
```

所以 exec 以正确的端口 6662 开始，但以错误的端口结束。每次 heroku ps:restart 或 heroku restart 都会发生这种情况。

我错过了什么。

环境：rails3 ruby​​ 193 heroku cedar stack

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:09:06.143

你能显示你的Procfile吗？Heroku 将为每个测功机动态分配一个 PORT 变量。这个值可能会改变。过度重启。所以你的 web 进程类型应该读取 PORT 变量值，并使用它。

请参阅[本文中有关 unicorn](https://devcenter.heroku.com/articles/rails-unicorn#procfile)的示例，它是这样的：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

# html - IE 在站点首次加载时将模式更改为 Quirks

> ID：15196170
> 
> 赞同：0
> 
> 时间：2013-03-04T06:58:59.070
> 
> 标签：html, joomla2.5, doctype

我正在使用 joomla 2.5，当我在 Internet Explorer 中加载我的网站时，IE 的文档模式更改为 Quirks。网站首先加载更改为 Quirks 模式，当我再次更改模式时，它工作正常。

我在文件中检查了我的文档类型`template.xml`。

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xml:lang="en"> 
```

这是文件中的文档类型，`xml`据说这种类型可以解决[这里的问题](http://www.ehow.com/how_10019982_turn-off-quirks-mode-disable-internet-explorer-html.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:01:00.513

将此添加到您的头部标签中

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:05:42.400

标记前的额外空间是字节顺序标记 (BOM)。这将所有页面都置于 IE 中的“Quirks”模式。尝试使用其他编辑器，如 notepad++ 和 Convert to UTF-8 without BOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:40:28.460

我自己解决了这个问题。

刚刚检查了在其他地方添加的脚本标签。我发现它在系统插件中，我刚刚删除了它，现在它工作正常。:)

# file - ssh 在文件中搜索 js 注入文本

> ID：15196172
> 
> 赞同：0
> 
> 时间：2013-03-04T06:59:03.237
> 
> 标签：file, search, ssh

我的网站被黑了，现在很多文件都有 js 注入，这就是我需要你帮助的原因。由于我是初学者，我不知道如何在 ssh 中编写命令，有人可以帮助我使用 ssh 命令在服务器上的所有文件中查找文本。

我的 html 文件有这个代码 -

```
<!--68c8c7--><script type="text/javascript" language="javascript" > 
```

BLA BLA 代码在这里

我的 php 文件有这个：

```
<? 
```

# 68c8c7

# /68c8c7

?>

.htaccess 的代码类似于 html 文件。简而言之，它们都有一个共同点——“68c8c7”。有没有办法运行一个命令来查看我的所有文件中的“68c8c7”并将它们保存到文件中？而且搜索和替换也很棒，对此有什么想法吗？

谢谢你，丹！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:00:43.987

```
grep -lrIi 68c8c7 $SEARCH_DIR > outputfile.txt 
```

这应该列出`$SEARCH_DIR`包含字符串的所有文件名`68c8c7`并将结果存储到`outputfile.txt`

**注意：** grep 命令排除所有二进制文件，因为根据您的问题，我了解到您只对源文件感兴趣。

现在，如果您想`68c8c7`在所有这些文件中将字符串替换为空白，您可以在 bash 中运行以下命令：

```
for file in $(cat outputfile.txt); do
    sed -i 's#68c8c7##gI' $file
done 
```

**警告：**`sed`为确保安全，请在运行命令执行搜索和替换之前备份文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:14:32.293

替换`68c8c7`不会成功。无论如何，这些字符串都是 html 注释。我的一个网站今天也以同样的方式被黑了。我通过一个简单的字符串搜索 >> 搜索了所有受感染的文件`68c8c7`。事实证明，我的所有`.js`文件都包含新函数，该函数在页面加载时为新 iframe 编写 html。删除坏行没有用，我不得不从网络服务器上完全删除所有源代码，并用我笔记本电脑上的备份文件替换它。

谷歌搜索（“ `68c8c7`hack javascript”）这种现象会返回大量明显受感染的网站。欢迎任何关于如何保护我的网站的提示！（将 js 文件的访问权限设置为只读有什么好处吗？）

干杯，亚瑟

# matlab - 使用“lsqcurvefit”在matlab中拟合复杂函数

> ID：15196178
> 
> 赞同：0
> 
> 时间：2013-03-04T06:59:33.833
> 
> 标签：matlab

我有一个复杂的函数，我想拟合一些真实数据。该函数的形式为：

`Y = -2*imag((A-B)/(A+2*B))` ...................(1)

在哪里

"imag" 表示方程的虚部
`A = a - (b/X)*1i` ...................................(2)
`B = c - (d/X)*1i` .... ....(3)

Y 有虚部和实部。但这是与我的问题相关的虚构部分。如何通过将方程（1）拟合到实际实验数据来推导 a、b、c 和 d 的值？我曾尝试使用“lsqcurvefit”，但它一直返回我输入的相同起始值！我确信我一定错过了一些重要的事情。

请尽可能简化您的答案，因为我还是 MATLAB 的新手。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:39:20.577

要在您的函数上运行 lsqcurvefit，您可以首先创建一个名为 fm 的文件，其中包含：

```
function Y = f(params,X)

a = params(1);
b = params(2);
c = params(3);
d = params(4);

A = a - ((b ./ X) .* 1i);
B = c - ((d ./ X) .* 1i);

Y = 2 .* imag((A - B)./(A + 2*B)); 
```

然后为此函数调用 lsqcurvefit 并绘制结果：

```
startParams = [1, 2, 3, 4];
x = 1:100;
y = f(startParams, x);
fitParams = lsqcurvefit(@f, startParams+1, x, y)

yFit = f(fitParams, x);
plot(x, y, 'b*')
hold on
plot(X, yFit, 'r')
legend('data','fit') 
```

# openoffice.org - LibreOffice swriter 命令行转换 PDF 但需要横向选项

> ID：15196180
> 
> 赞同：3
> 
> 时间：2013-03-04T06:59:45.123
> 
> 标签：openoffice.org, libreoffice, cups

我在 CentOS 上使用 libreOffice 将 rtf 和 html 转换为 PDF，使用：

> swriter -convert-to pdf:writer_pdf_Export doc_file.doc

一切都很好，但我找不到任何命令行选项来将 pdf 从纵向更改为横向。

这甚至是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-01T00:48:56.807

您可以将 unoconv 与页面样式设置为横向的模板 (.ott) 一起使用。

[有关unoconv](http://linuxsleuthing.blogspot.com.co/2012/01/unoconv-is-number-one.html)的更多信息。

# java - 在外键中休眠一对一的空值

> ID：15196186
> 
> 赞同：0
> 
> 时间：2013-03-04T07:00:09.583
> 
> 标签：java, mysql, hibernate, mapping, one-to-one

我正在尝试与休眠实体进行“一对一”映射。学生表有contact_info 作为外键引用。当我保存学生对象时，外键设置为 NULL。

在这里我附上了来源。请让我知道问题所在...

表：

```
DROP TABLE IF EXISTS cont_info;
CREATE TABLE cont_info(
ID INT PRIMARY KEY AUTO_INCREMENT,
MOBILE_NO VARCHAR(40),
EMAIL_ID VARCHAR(40)
);

DROP TABLE IF EXISTS student;
CREATE TABLE student(
ID INT PRIMARY KEY AUTO_INCREMENT,
NAME VARCHAR(40),
CONTACT_INFO INT,
KEY `CONTACT_INFO` (`CONTACT_INFO`),
CONSTRAINT `fk_student_contact_info` FOREIGN KEY (`CONTACT_INFO`) REFERENCES `cont_info` (`ID`) 
); 
```

实体：

联系信息.java

```
import java.io.Serializable;

public class ContactInfo implements Serializable {

    private int id;
    private String mobileNo;
    private String emailId;
    private Student student;

    public Student getStudent() {
        return student;
    }
    public void setStudent(Student student) {
        this.student = student;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getMobileNo() {
        return mobileNo;
    }
    public void setMobileNo(String mobileNo) {
        this.mobileNo = mobileNo;
    }
    public String getEmailId() {
        return emailId;
    }
    public void setEmailId(String emailId) {
        this.emailId = emailId;
    }

} 
```

学生.java：

```
import java.io.Serializable;

public class Student implements Serializable {
    private int id;
    private String name;
    private ContactInfo contactInfo;

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public ContactInfo getContactInfo() {
        return contactInfo;
    }
    public void setContactInfo(ContactInfo contactInfo) {
        this.contactInfo = contactInfo;
    }
} 
```

HBM :

```
<class name="com.tutorial.hibernate.ContactInfo" table="cont_info">
    <id column="id" name="id">
        <generator class="identity" />          
    </id>
    <one-to-one name="student" class="com.tutorial.hibernate.Student" cascade="save-update"></one-to-one>
    <property name="mobileNo" column="MOBILE_NO" />
    <property name="emailId" column="EMAIL_ID" />   
</class>

<class name="com.tutorial.hibernate.Student" table="student">
    <id name="id" column="id">          
        <generator class="foreign">
            <param name="property">contactInfo</param>
        </generator>
    </id>
    <one-to-one name="contactInfo" class="com.tutorial.hibernate.ContactInfo" constrained="true"></one-to-one>
    <property name="name" column="NAME" />      
</class> 
```

保存实体的 Java 代码：

```
Session session = HibernateUtil.getSession();
Transaction txn = session.beginTransaction();

ContactInfo contactInfo = new ContactInfo();
contactInfo.setMobileNo("9876543212");
contactInfo.setEmailId("test@gmail.com");

Student student = new Student();
student.setName("Student1");
contactInfo.setStudent(student);

student.setContactInfo(contactInfo);
session.save(student);

txn.commit();
session.close(); 
```

执行上述行时，我可以看到类似的 sql。

```
Hibernate: insert into cont_info (MOBILE_NO, EMAIL_ID) values (?, ?)
Hibernate: insert into student (NAME, id) values (?, ?) 
```

但实际上表格显示。

![联系方式](../Images/52e8f9914b7dadae4a9efaa9140b74f1.png) ![在此处输入图像描述](../Images/0218a7f0581ba8f96c52969cc509bfe3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:11:43.663

这导致代码的映射文件出现问题

```
generator class="foreign" 
```

尝试将此映射文件与映射`student`文件一样使用`contact_info`

```
<id column="id" name="id">
        <generator class="identity" />          
    </id> 
```

在学生映射文件中编辑需要提及列名

```
<one-to-one name="contactInfo" class="com.tutorial.hibernate.ContactInfo" constrained="true" column="CONTACT_INFO"></one-to-one> 
```

# mysql - 错误：未封闭的报价@ 37

> ID：15196187
> 
> 赞同：2
> 
> 时间：2013-03-04T07:00:10.623
> 
> 标签：mysql

询问`SELECT * FROM user WHERE username = 'Omnion' AND disable_flag = '0'`

此查询在 localhost 中运行良好，

上传到服务器后，它给出了问题

```
Error
There seems to be an error in your SQL query. The MySQL server error output below, if there is any, may also help you in diagnosing the problem

    ERROR: Unclosed quote @ 37
    STR: '
    SQL: SELECT * FROM user WHERE username = \'Omnion\' AND disable_flag = \'0\'
     LIMIT 0, 30 

    SQL query: 

    SELECT * FROM user WHERE username = \'Omnion\' AND disable_flag = \'0\' LIMIT 0, 30

    MySQL said: 

    #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\'Omnion\' AND disable_flag = \'0\'
    LIMIT 0, 30' at line 1 
```

![第1步](../Images/9aabdf9157b02f99a5a34c2356c4ad49.png) ![第2步](../Images/93217a8606fb90beff0086dfbc303cc6.png)

请帮我，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:20:41.010

尝试更新 phpMyAdmin 的版本，请参阅此链接：[phpMyAdmin Bug](https://bugzilla.redhat.com/show_bug.cgi?id=725123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T21:48:54.723

我遇到了同样的问题。每当我发出一个包含引号的 SQL 命令时，它都会给我“错误：未闭合的引号”。我的 phpMyAdmin 版本是 2.11.9.6，MySQL 版本是 5.1.55。经过多次挫折和研究，​​我解决了如下问题：

仅当我使用 Yahoo MySQL 数据库面板上提供的链接使用 phpMyAdmin 时才会发生错误。我发现我可以直接访问 phpMyAdmin 管理工具，而无需通过 Yahoo Web Hosting MySQL 数据库面板上提供的链接。要直接访问 phpMyAdmin，请访问 www.yourdomain.com/phpmyadmin

它将打开管理面板，看起来类似于从 Yahoo MySQL 数据库面板打开的管理面板。您使用相同的 MySQL 数据库用户 ID 和密码登录。SQL 命令在此面板中运行良好。

注意：如果您没有 www.yourdomain.com/phpmyadmin 子目录，您可能需要通过访问虚拟主机控制面板/其他站点构建工具等来安装 phpMyAdmin 工具...

# android - 原因：java.io.IOException：未找到身份验证挑战

> ID：15196188
> 
> 赞同：1
> 
> 时间：2013-03-04T07:00:11.627
> 
> 标签：android, scribe, android-twitter

我正在使用下面的代码将图像发布到 Twitter，但在这一行出现错误：

```
Token accesstoken=oAuth.getAccessToken(requestToken, verifier); 
```

我搜索了错误，但没有找到任何解决方案。我想知道为什么会发生这个错误，以及我做错了什么。

```
OAuthService oAuth = new ServiceBuilder()
        .provider(TwitterApi.class)
        .apiKey("6JyIkj71ZqG4wk3YF0Y4hw") // REPLACE WITH YOUR OWN!!!
        .apiSecret("sJl9aRVqlEt7nxlKvpMVK6tLULz5FSQ2KUOW0yie4") // REPLACE WITH YOUR OWN!!!
        .callback(TwitterApp.CALLBACK_URL) // REPLACE WITH YOUR OWN!!!
        .build();

Log.e("hi", "hi");
Token requestToken = oAuth.getRequestToken();
if (requestToken != null) {
    Log.e("has requestToken", "has");
}

String authUrl = oAuth.getAuthorizationUrl(requestToken);

Verifier verifier = new Verifier(getVerifier(authUrl));

if (verifier != null) {
    Log.e("verifier created", "created");
}
Token accesstoken = oAuth.getAccessToken(requestToken, verifier);
Log.e("raw resp", accesstoken.getRawResponse());

if (accesstoken != null) {

    Log.e("hello", "hhello");
    Log.e("access token", "hi" + accesstoken.toString());
    OAuthRequest request = new OAuthRequest(Verb.POST, "https://upload.twitter.com/1/statuses/update_with_media.json");
    oAuth.signRequest(accesstoken, request); // ENTER USER'S ACCESS TOKEN

    // ADD MULTIPART FORM

    try
    {
        MultipartEntity entity = new MultipartEntity();

        entity.addPart("status", new StringBody("insert vacuous statement here")); // THIS IS THE TWITTER MESSAGE
        entity.addPart("media", new FileBody(new File("/storage/sdcard0/HelloAlbum/1361964305003.jpg"))); // THIS IS THE PHOTO TO UPLOAD

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        entity.writeTo(out);

        request.addPayload(out.toByteArray());
        request.addHeader(entity.getContentType().getName(), entity.getContentType().getValue());
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    // SEND REQUEST

    try {
        JSONObject response = new JSONObject(request.send().getBody());
    } catch (JSONException e) {
        Log.e("TOUR_APP_TAG", "JSONException Thrown: " + e.getMessage());
    }
} 
```

日志输出：

```
03-04 12:24:11.645: D/dalvikvm(2287): WAIT_FOR_CONCURRENT_GC blocked 15ms
03-04 12:24:12.315: E/AndroidRuntime(2287): FATAL EXCEPTION: main
03-04 12:24:12.315: E/AndroidRuntime(2287): org.scribe.exceptions.OAuthException: Problems while creating connection.
03-04 12:24:12.315: E/AndroidRuntime(2287):     at org.scribe.model.Request.send(Request.java:70)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at org.scribe.model.OAuthRequest.send(OAuthRequest.java:12)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at org.scribe.oauth.OAuth10aServiceImpl.getAccessToken(OAuth10aServiceImpl.java:81)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at com.android.twitter.TwitterActivity$1.onComplete(TwitterActivity.java:298)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at com.twitter.android.TwitterApp$1.handleMessage(TwitterApp.java:244)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at android.os.Looper.loop(Looper.java:137)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at java.lang.reflect.Method.invokeNative(Native Method)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at java.lang.reflect.Method.invoke(Method.java:511)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at dalvik.system.NativeStart.main(Native Method)
03-04 12:24:12.315: E/AndroidRuntime(2287): Caused by: java.io.IOException: No authentication challenges found
03-04 12:24:12.315: E/AndroidRuntime(2287):     at libcore.net.http.HttpURLConnectionImpl.getAuthorizationCredentials(HttpURLConnectionImpl.java:436)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at libcore.net.http.HttpURLConnectionImpl.processAuthHeader(HttpURLConnectionImpl.java:416)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at libcore.net.http.HttpURLConnectionImpl.processResponseHeaders(HttpURLConnectionImpl.java:365)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:301)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at org.scribe.model.Response.<init>(Response.java:28)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at org.scribe.model.Request.doSend(Request.java:110)
03-04 12:24:12.315: E/AndroidRuntime(2287):     at org.scribe.model.Request.send(Request.java:62)
03-04 12:24:12.315: E/AndroidRuntime(2287):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:54:40.137

请尝试这个来找出问题的原因：

*   确保在请求中传递正确的参数。您可以在浏览器中使用其他工具，例如在线客户端并拦截发送和接收的请求和响应标头。这样，您将拥有一组工作参数。
*   您需要记录您的 Android 应用程序发送/接收的请求和响应标头。如果您使用的是 HttpsURLConnection，请使用[此处](https://stackoverflow.com/questions/15536252/how-to-enable-or-implement-logging-for-httpsurlconnection-traffic-on-android)提供的解决方案（“复杂工作解决方案”部分中的演示项目）。通过这种方式，您可以看到您实际发送和接收的内容。
*   您遇到的异常通常是服务器发送 401 代码的结果。要找到原因，您必须执行上述项目。

# android - 从小部件启动的活动中获取结果。

> ID：15196194
> 
> 赞同：0
> 
> 时间：2013-03-04T07:00:38.490
> 
> 标签：android, android-widget

我需要`onActivityResult`在启动活动的小部件中使用

```
public class MainActivity extends AppWidgetProvider implements
    OnActivityResultListener {
Context context;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    this.context = context;
    for (int i = 0; i < appWidgetIds.length; i++) {
        int appWidgetId = appWidgetIds[i];
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
        PendingIntent pending = PendingIntent.getActivity(context, 0, intent, 1);
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.activity_main);

        views.setOnClickPendingIntent(R.id.imageButton1, pending);
        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

}

@Override
public boolean onActivityResult(int requestCode, int resultCode, Intent data) {

} 
```

我需要当我选择联系人时可以在小部件上获得结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T20:57:36.460

在您的清单中，在您的应用小部件的广播中添加一个新的意图过滤器，并向其中添加一个个人操作，例如“GET_RESULT_FROM_ACTIVITY”，然后启动您想要结果的活动。完成代码后，在此活动中调用 sendBroadcast(your_intent) 方法，并在其中放置额外内容并设置操作“GET_RESULT_FROM_ACTIVITY”。在 appwidget 的 onReceive() 方法中，检查 if intent.getAction().equals("GET_RESULT_FROM_ACTIVITY") 并在 if 语句中执行您想要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:10:08.360

假设您通过从第二个活动传回数据，您可以通过调用您的方法`Intent.putExtra()`来访问您传递的任何内容。`data.getExtras()``onActivityResult`

请参阅此处的教程[。](http://www.mybringback.com/tutorial-series/12204/onactivityresult-android-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:38:03.680

这是错误的，因为 AppWidgetProvider 没有 onActivityResult 方法。

```
 @Override
    public boolean onActivityResult(int requestCode, int resultCode, Intent data) {

    } 
```

如果您想从活动中获取结果，您可以使用发送广播来更新 appwidget 视图

# mercurial - 如何在 Mercurial 中获取最近的变更集

> ID：15196196
> 
> 赞同：0
> 
> 时间：2013-03-04T07:00:42.173
> 
> 标签：mercurial

我记得在一次提交中看到了一些有趣的代码，但我不记得是哪一个。有没有办法让最后说 100 个变更集，这样我就可以通过它们 grep。也许我的术语不好，所以我会用文字来解释。我正在寻找差异阿拉

+cout << "你好";
-cout << "你好";

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:09:05.317

如果您只想在历史记录中搜索一段代码，`hg grep`将会有所帮助。

如果您想知道哪个提交引入了此更改，请`hg annotate`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:22:26.820

你真正要求的就像`hg log --patch --limit 100`得到所有修订一样简单，但我赞成使用@sherlock 的答案，`hg grep`因为这就是我要做的。

# c# - 根据大小的变化使组件填充最大的空白

> ID：15196204
> 
> 赞同：2
> 
> 时间：2013-03-04T07:00:58.677
> 
> 标签：c#, winforms, user-interface, layout

我正在使用 Windows 窗体在 Visual Studio 2012 中使用 C# 开发 UI，并且我正在尝试使其表单中的组件填充所有可能的空白。问题是，用户应该能够随意调整这些组件的大小。FlowLayoutPanel 不起作用，因为如果一个组件太小或太大，它的行中就会有太多的空白。TableLayoutPanel 虽然允许组件跨越列和行，但据我所知根本不可行。所以我被困在一个解决方案上。

要了解我在寻找什么，请查看此网站：[http](http://wearethelittleones.tumblr.com/) ://wearethelittleones.tumblr.com/ 或 [http://ville-noire.com/](http://ville-noire.com/)

当然，在这两种情况下，图像都已调整大小以使布局看起来更好——布局实际上只是一个垂直 FlowLayout。但我希望我能明白我的意思；它实际上应该像一个可以垂直和水平工作的 FlowLayout。这有点像如果你在排列不同尺寸的瓷砖，从左上角开始，尽量减少与左上角的距离，尽量减少浪费的空间。

无论如何，我认为这已经足够描述了。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:35:20.070

我认为您正在寻找 splitContainer 和 flowlayoutpanel 的组合。您可以摆弄边距以更改“空白”。

# qt - 如何在 QTreeView 中查找项目？

> ID：15196207
> 
> 赞同：0
> 
> 时间：2013-03-04T07:01:15.100
> 
> 标签：qt, model-view-controller, qfilesystemmodel

我知道`QTreeWidget`有查找项目的方法，但是由于我想使用 a `QFileSystemModel`，所以我仅限于`QTreeView`. 但是，我仍然希望能够从 a 返回所有项目`QTreeView`并将它们放入列表中。

我曾以为我可以通过并从 中获取所有索引`QTreeView`，但我不知道该怎么做。

也许是这样的：

```
QList<QModelIndex &> treeList;
foreach(QModelIndex &index, ui->tv_list)
{
     treeList.append(index);
} 
```

但我知道这是不正确的。将项目或项目地址从 a 中获取到列表中的好方法是`QTreeView`什么？

# sql - 如何在 SQL 中获得显示摘要的结果？

> ID：15196215
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:01:55.360
> 
> 标签：sql, sql-server, tsql, pivot

我在下面有一个示例表：

```
FACE   SHAP
----   ----
new1   oblq
new2   oblq
new3   rond
new5   sqre
new2   rond
new1   oblq
new2   oblq
new3   rond
new2   rond
new3   oblq 
```

我希望它像这样显示：

```
FACE   oblq   rond   sqre
----   ----   ----   ----
new1      2      0      0
new2      2      2      0
new3      2      2      0
new5      0      0      1 
```

如何使用 SQL 查询获得结果？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:05:08.220

使用以下代码：

```
select FACE,
       SUM(Case When SHAP = 'oblq' then 1 Else 0 End )AS oblq,
       SUM(Case When SHAP = 'rond' then 1 Else 0 End )AS rond,
       SUM(Case When SHAP = 'sqre' then 1 Else 0 End )AS sqre
From yourTable
Group by FACE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:07:41.880

使用[**`PIVOT`**](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)表运算符：

```
SELECT *
FROM
(
  SELECT *, ROW_NUMBER()OVER(PARTITION BY Face
                             ORDER BY Shap) RN
  FROM tablename
) AS p
PIVOT
(
  COUNT(RN)
  FOR SHAP IN(oblq,   rond,   sqre)
) AS p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/3fee1/4)

这会给你：

```
| FACE | OBLQ | ROND | SQRE |
-----------------------------
| new1 |    2 |    0 |    0 |
| new2 |    2 |    2 |    0 |
| new3 |    1 |    2 |    0 |
| new5 |    0 |    0 |    1 | 
```

* * *

对于多个值`SHAP`并且您不需要手动编写它们，您必须使用动态 SQL 动态地执行此操作。像这样：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' +
                        QUOTENAME(SHAP)
                      FROM tablename                      
                      FOR XML PATH(''), TYPE
                     ).value('.', 'NVARCHAR(MAX)') 
                        , 1, 1, '');
SET @query = 
' SELECT *
FROM
(
   SELECT *, ROW_NUMBER() OVER(PARTITION BY Face
                               ORDER BY Shap) RN
   FROM tablename
) AS p
PIVOT
(
   COUNT(RN)
   FOR SHAP IN( ' + @cols + ')
) AS p;';

EXECUTE(@query); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/3fee1/5)

# java - Xuggler，xuggler 5.4 中的转发和倒带视频不起作用

> ID：15196224
> 
> 赞同：3
> 
> 时间：2013-03-04T07:02:48.360
> 
> 标签：java, audio, video, forwarding, xuggle

我在我的应用程序中使用了 xuggle-xuggler5.4 来添加视频和音频播放功能，我已经深入谷歌并找到了以下代码段：

```
long duration = container.getDuration();
long target = new Double(duration * .50).longValue();
container.seekKeyFrame(0, target, 0, 0, IContainer.SEEK_FLAG_BYTE); 
```

我不知道这个片段是否不正确，或者我的 xuggle 是错误的，或者我病了（开玩笑），但一切看起来都很好。当我播放视频时，它总是从第一个开始（不是我想要的位置）。

如果有人可以帮助我，我会很高兴谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:09:01.503

好的，我明白了；）

我得到的视频时长和帧速率如下：

```
IStream stream = iContainerObj.getStream(i);
IStreamCoder coder = stream.getStreamCoder();

if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO
    && videoStreamId == -1) {
videoDuration = container.getDuration() == Global.NO_PTS ? 0
        : container.getDuration() / 1000;
frameRate = coder.getFrameRate().getDouble();
    // other ....
 } 
```

然后跳转到特定位置，我将以毫秒为单位的持续时间转换为秒，然后乘以 frameRate 和我想要的秒。最后调用 seekKeyFrame 跳转到位置。

### 注意：我还使用了 =>> IContainer.SEEK_FLAG_FRAME，这表明我正在为该方法提供帧号。

```
int jumpToThisSecond = 65;
long jumbTo = (long) (((videoDuration / 1000) * frameRate) * jumpToThisSecond);
container.seekKeyFrame(0, 0, jumbTo, container.getDuration(),
            IContainer.SEEK_FLAG_FRAME); 
```

# php - 第二级 CSS 下拉菜单无法正常工作

> ID：15196227
> 
> 赞同：1
> 
> 时间：2013-03-04T07:02:57.313
> 
> 标签：php, html, css

我不知道如何正确解释这一点，但我的网站上有一个 CSS 菜单，它的第一层工作正常，当您将鼠标悬停在菜单项上时，列表显示为下拉菜单。但是子列表也会出现，而不是等待悬停。如果你去这里：

[http://www.negativeworld.org/test.php](http://www.negativeworld.org/test.php)

并将鼠标悬停在“main”上你会明白我的意思，“test 1”和“test 2”应该只在“test”悬停时出现，但当“main”悬停时它们会立即出现。

这是我的CSS：

```
/* Fix IE. Hide from IE Mac \*/
* html ul li { float: left; height: 1%; }
* html ul li a { height: 1%; }
/* End */

ul {
    background-image: url(design/banner_menu_fd_excel.png);
    margin: 0;
    padding: 0;
    list-style: none;
    width: 140px;
}

ul li {
    position: relative;
    z-index:100;
}

li ul {
    position: absolute;
    left: 0px;
    width: 140;
    display: none;
}

ul ul  ul { position: absolute; left: 100%; top: -1; z-index:100; }

li:hover {
    visibility: visible; 
}

li:hover ul, li.over ul { 
    display: block;
}

ul li a {
    display: block;
    text-decoration: none;
    color: #000000;
    padding: 5px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
}

ul a:hover {
    color: #FFFFFF;
    background:#8A8987;
}

.user_box_name a {
    color: #000000;
    text-decoration: none;
}
.user_box_name a:hover {
    color: #000000;
    text-decoration: underline;
} 
```

这是我的菜单：

```
<ul id="nav">
    <li>
        <a href="content.php" id="mainmenulink2" onMouseOver="bt_main.src=menu_main_on.src" onMouseOut="bt_main.src=menu_main_off.src" onFocus="this.blur()"><img src='design/menu/menu_main.png' name="bt_main" width="130" height="32" border='0' id="bt_main"></a>

        <ul>
            <li>
                <a href="test.php">test</a>

                    <ul>
                        <li><a href="test.php">test 1</a></li>
                        <li><a href="test.php">test 2</a></li>
                    </ul>

                    <li><a href="content.php?tp=recenthot" class="menulink">Hottest (Recent)</a></li>
                    <li><a href="content.php?tp=alltimehot" class="menulink">Hottest (All-Time)</a></li>
                    <li><a href="content.php?tp=news" class="menulink">News</a></li>
                    <li><a href="content.php?tp=review" class="menulink">Reviews</a></li>
                    <li><a href="content.php?tp=editorial" class="menulink">Editorials</a></li>
                    <li><a href="content.php?tp=podcast" class="menulink">Podcasts</a></li>
                    <li><a href="content.php?tp=roundtable" class="menulink">Roundtables</a></li>
                    <li><a href="content.php?tp=top ten" class="menulink">Top Ten Lists</a></li>
                    <li><a href="content.php?tp=comic" class="menulink">Webcomics</a></li>
                    <li><a href="content.php?tp=game" class="menulink2">Game Discussions</a></li>
                    <li><a href="content.php?tp=poll" class="menulink">Public Polls</a></li>
                    <li><a href="content.php?tp=etc" class="menulink">Etcetera</a></li>

                    <!--<li><a href="comicchoose.php">Comics</a></li>-->
                </ul>
            </li>
        </ul> 
```

我正在修改最后一个程序员工作的代码，所以我不完全确定我在做什么。我尝试查找此问题的解决方案，但我一直碰壁。有谁知道修复是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:05:26.597

`>`后添加`li:hover`

`>`选择元素的唯一第一个子元素（直接子元素）。`ul`您当前的代码是在鼠标悬停时阻止（显示）所有内容。

[检查此](http://userinterfacehome.blogspot.in/2012/11/css-selectors.html)以获取更多信息。

```
li:hover > ul, li.over > ul { 
    display: block;
} 
```

**[演示](http://jsfiddle.net/hYZjp/)**

# javascript - 如何防止tinymce中的事件

> ID：15196231
> 
> 赞同：4
> 
> 时间：2013-03-04T07:03:16.997
> 
> 标签：javascript, jquery, events, event-handling, tinymce

我在使用 tinyMCE 时遇到了问题（感谢这份出色的文档！！*讽刺*）

我正在寻找的是与 jQuerys event.preventDefault() 类似的方法，但我想停止编辑器触发的事件。

我尝试`execcommand_callback: function(editorID,elem,event)`在初始化时使用该属性，但我得到的只是一个字符串（editorID）、一个 html 节点（elem）和另一个包含当前执行事件名称的字符串，没有事件对象。我可以操纵将执行命令的节点，但这不会帮助我阻止事件。

禁用所有按钮或整个编辑器不是一个选项，有什么想法吗？这甚至可能吗？

我用谷歌搜索了整个周末，每个人都想禁用按钮：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:29:47.307

这些回调不是“真正的”浏览器事件。

尝试`return true`停止调用链中的下一个回调。

# c++ - C++ 最大的数字存储

> ID：15196232
> 
> 赞同：0
> 
> 时间：2013-03-04T07:03:18.430
> 
> 标签：c++, c++11, int, unsigned, unsigned-long-long-int

在 C++ 中是否有与 Java 的 Bigint 等效的可以存储以下数字：

`567014094304930933548155069494723691156768423655208899778686163624192868328194365094673392756508907687565332345345678900976543567890976543565789054335678097654680986564323567890876532456890775646780976543556789054367890765435689876545898876587907876535976565578907654538790878656543687656543467898786565457897675645657689756456578656456768654657898865567689656890795587907654678798765787897865654657897654678965465786867278762795432151914451557727529104757415030674806148138138281214236089749601911974949125689884222023119844272122501649909415937`

我看过 unsigned long long int 但这还不足以存储它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T07:06:15.463

检查这些：

*   [C++ 大整数库](https://mattmccutchen.net/bigint/)
*   [GMP](http://gmplib.org/)
*   [TT数学](http://www.ttmath.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T07:04:45.583

没有。BigInt C++ 有很多库。例如[boost::multiprecision](http://www.boost.org/libs/multiprecision/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T07:05:35.887

如此大的数字没有标准的 C++ 类型。您可能需要使用其中一个库来处理大数字：[GMP](http://gmplib.org/)、[MAPM](http://www.tc.umn.edu/~ringx004/mapm-main.html)或[bigint](https://mattmccutchen.net/bigint/)

# php - 将数组转换为简单的 xml

> ID：15196234
> 
> 赞同：0
> 
> 时间：2013-03-04T07:03:30.363
> 
> 标签：php, xml, arrays, simplexml

这是我的数组：

```
Array
(
    [0] => Array
        (
            [product_id] => 1
        )

    [1] => Array
        (
            [tab_id] => 351
        )

    [2] => Array
        (
            [tab_name] => test1
        )

    [3] => Array
        (
            [region_timezone] => Array
                (
                    [0] => 1
                )

            [registrationstatus] => Array
                (
                    [0] => 2
                )

            [eventstatus] => Array
                (
                    [0] => 2
                )

            [dist_activity] => Array
                (
                    [0] => 5
                    [1] => 10068
                    [2] => 10070
                )

            [dist_region] => Array
                (
                    [0] => 5069
                    [1] => 5069
                    [2] => 5069
                )

            [dist_value] => Array
                (
                    [0] => 55
                    [1] => 342
                    [2] => 86
                )

            [dist_unit] => Array
                (
                    [0] => 1
                    [1] => 1
                    [2] => 1
                )

            [dist_map] => Array
                (
                    [0] => 5
                )

            [entryfee_currency] => Array
                (
                    [0] => USD
                )

            [reg_str_dt] => Array
                (
                    [0] => 2013-01-14 20:35:00
                )

            [reg_end_dt] => Array
                (
                    [0] => 2013-01-14 20:35:00
                )

            [individual_label] => Array
                (
                    [0] => 19+++
                )

            [individual_born_from] => Array
                (
                    [0] => 1980-08-21
                )

            [individual_born_to] => Array
                (
                    [0] => 2010-08-18
                )

            [individual_sex] => Array
                (
                    [0] => 3
                )

            [individual_strdt] => Array
                (
                    [0] => 2013-01-14 20:35:00
                )

            [individual_start] => Array
                (
                    [0] => 2013-01-14 20:35:00
                )

            [elite_sex] => Array
                (
                    [0] => 1
                )

        )

)

Array
(
    [0] => Array
        (
            [product_id] => 2
        )

    [1] => Array
        (
            [tab_id] => 352
        )

    [2] => Array
        (
            [tab_name] => test2
        )

    [3] => Array
        (
            [region_timezone] => Array
                (
                    [0] => 1
                )

            [registrationstatus] => Array
                (
                    [0] => 2
                )

            [eventstatus] => Array
                (
                    [0] => 2
                )

            [dist_activity] => Array
                (
                    [0] => 5
                    [1] => 10069
                    [2] => 10070
                )

            [dist_region] => Array
                (
                    [0] => 4457
                    [1] => 7140
                    [2] => 5069
                )

            [dist_value] => Array
                (
                    [0] => 55
                    [1] => 213
                    [2] => 86
                )

            [dist_unit] => Array
                (
                    [0] => 1
                    [1] => 1
                    [2] => 1
                )

            [dist_map] => Array
                (
                    [0] => 5
                )

            [entryfee_currency] => Array
                (
                    [0] => USD
                )

            [reg_str_dt] => Array
                (
                    [0] => 2013-02-14 20:39:00
                )

            [reg_end_dt] => Array
                (
                    [0] => 2013-02-14 20:39:00
                )

            [individual_label] => Array
                (
                    [0] => 19+++
                )

            [individual_born_from] => Array
                (
                    [0] => 1980-08-21
                )

            [individual_born_to] => Array
                (
                    [0] => 2010-08-18
                )

            [individual_sex] => Array
                (
                    [0] => 3
                )

            [individual_strdt] => Array
                (
                    [0] => 2013-02-14 20:39:00
                )

            [individual_start] => Array
                (
                    [0] => 2013-02-14 20:39:00
                )

            [elite_sex] => Array
                (
                    [0] => 1
                )

        )

) 
```

如何在 PHP 中将数组转换为 SimpleXML 对象？
我想将此数组显示为 xml（转换为 xml）
请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:10:40.373

```
class array2xml
{
    $output = "";
    function array2xml($array, $root = 'root', $element = 'element')
    {
        $this->output .= $this->make($array, $root, $element);
    }

    function make($array, $root, $element)
    {
        $xml = "<{$root}>\n";
        foreach ($array as $key => $value) {
            if (is_array($value)) {
                $xml .= $this->make($value, $element, $key);
            } else {
                if (is_numeric($key)) {
                    $xml .= "<{$root}>{$value}</{$root}>\n";
                } else {
                    $xml .= "<{$key}>{$value}</{$key}>\n";
                }
            }
        }
        $xml .= "</{$root}>\n";
        return $xml;
    }
}

echo "After convertion from array to xml format <br />";
echo array2xml($output_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:08:54.983

```
class ArrayToXML
{
    /**
     * The main function for converting to an XML document.
     * Pass in a multi dimensional array and this recrusively loops through and builds up an XML document.
     *
     * @param array $data
     * @param string $rootNodeName - what you want the root node to be - defaultsto data.
     * @param SimpleXMLElement $xml - should only be used recursively
     * @return string XML
     */
    public static function toXml($data, $rootNodeName = 'data', $xml=null)
    {
        // turn off compatibility mode as simple xml throws a wobbly if you don't.
        if (ini_get('zend.ze1_compatibility_mode') == 1)
        {
            ini_set ('zend.ze1_compatibility_mode', 0);
        }

        if ($xml == null)
        {
            $xml = simplexml_load_string("<?xml version='1.0' encoding='utf-8'?><$rootNodeName />");
        }

        // loop through the data passed in.
        foreach($data as $key => $value)
        {
            // no numeric keys in our xml please!
            if (is_numeric($key))
            {
                // make string key...
                $key = "unknownNode_". (string) $key;
            }

            // replace anything not alpha numeric
            $key = preg_replace('/[^a-z]/i', '', $key);

            // if there is another array found recrusively call this function
            if (is_array($value))
            {
                $node = $xml->addChild($key);
                // recrusive call.
                ArrayToXML::toXml($value, $rootNodeName, $node);
            }
            else 
            {
                // add single node.
                                $value = htmlentities($value);
                $xml->addChild($key,$value);
            }

        }
        // pass back as string. or simple xml object if you want!
        return $xml->asXML();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:07:43.613

说你的数组是`$data`

尝试这个

```
$xml = new SimpleXMLElement('<root/>');
array_walk_recursive($data, array ($xml, 'addChild'));
print $xml->asXML(); 
```

# jquery - jQuery 属性检查

> ID：15196236
> 
> 赞同：1
> 
> 时间：2013-03-04T07:03:37.920
> 
> 标签：jquery, if-statement, attributes

我想在 jQuery 中使用 if...else 语句，但我不确定如何设置它以满足我的需求。
这是我所拥有的：

```
$(document).ready(function(){
  $("#quotes").hide();
  $("button").click(function(){
    if($("#quotes").hide()==true){
      $("#summary").hide();
      $("#quotes").fadeIn("slow");
    } else {
      $("#quotes").hide();
      $("#summary").fadeIn("slow");
    }
  });
}); 
```

我想要它，以便如果#quotes 被隐藏，然后单击按钮，隐藏#summary 和fadeIn #quotes。否则，（如果显示#quotes）隐藏#quotes 和fadeIn #summary。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:06:45.660

您可以将[:visible](http://api.jquery.com/visible-selector/)选择器传递给[is()](http://api.jquery.com/is/)方法：

```
$("button").click(function() {
    if(!$("#quotes").is(":visible")) {
        $("#summary").hide();
        $("#quotes").fadeIn("slow");
    } else {
        $("#quotes").hide();
        $("#summary").fadeIn("slow");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:08:13.990

您应该像这样更改 if 检查，

```
 if($("#quotes").is(':hidden')==true){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:08:30.553

考虑以下代码

```
 $("#quotes").hide();
 $("button").click(function(){
    $("#summary").slideToggle();
    $("#quotes").slideToggle();
 }); 
```

# java - 如何使用 Sikuli Java Standalone jar 键入文本？

> ID：15196238
> 
> 赞同：0
> 
> 时间：2013-03-04T07:03:47.993
> 
> 标签：java, sikuli

我正在使用 Sikuli 的 Java Standalone API 来自动化我的应用程序。

我不知道如何使用它向任何文本字段提供/提供一些文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:30:05.657

假设光标当前在文本字段中处于活动状态：

```
Keyboard kb = new DesktopKeyboard();
kb.type("Hello world"); 
```

或者，假设该字段接受粘贴并且您不需要模拟单个按键

```
kb.paste("Hello world"); 
```

如果您有一组字段并且标签在它们之间移动，您可以这样做

```
kb.paste("Hello");
kb.type(Key.TAB);
kb.paste("World"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:17:02.323

由于这个问题的回答范围很广，我给你一些有用的链接。[您可以在Sikuli 文档](http://doc.sikuli.org/faq/030-java-dev.html)中找到 Java 开发设置基础。

这是一个更[深入的教程](http://www.8bitavenue.com/2012/03/gui-testing-using-sikuli-and-java/)，它还涵盖了您的确切问题以及所有可用的[Javadocs](http://doc.sikuli.org/javadoc/index.html)。

只需`type()`在所需定位器上使用该方法即可。

用 Sikuli-api 试试

```
Keyboard keyboard = new DesktopKeyboard();
keyboard.type("abc"); 
```

[https://answers.launchpad.net/sikuli/+question/218670](https://answers.launchpad.net/sikuli/+question/218670)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-29T10:16:23.300

您还可以在 java 程序中使用 sikuli 方法 type()。

例子：

```
 Screen screen=new Screen(); 
```

第一次为屏幕创建对象。然后使用该引用调用方法 type()。

```
screen.type("your text"); 
```

# java - 在 Java 中将第一个单词移动到最后一个位置

> ID：15196239
> 
> 赞同：-3
> 
> 时间：2013-03-04T07:03:49.373
> 
> 标签：java

我正在尝试将第一个单词移到 Java 中的最后一个位置。但是我的程序没有打印出这句话。我会错过什么？

这是我的程序：

```
import java.util.Scanner;

public class FirstLast {

    public static void main(String[] args) {
        System.out.println("Enter line of text.");
        Scanner kb = new Scanner(System.in);
        String s = kb.next();
        int last = s.indexOf("");
        System.out.println(s);
        s = s.sub string(0, last) ";
        System.out.println("I have rephrased that line to read:");
        System.out.println(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:23:20.163

你可以尝试这样的事情：

```
public static void main(String[] args) {
    System.out.println("Enter line of text.");
    Scanner kb = new Scanner(System.in);
    String s = kb.nextLine(); // Read the whole line instead of word by word
    String[] words = s.split("\\s+"); // Split on any whitespace
    if (words.length > 1) { 
        //             v   remove the first word and following whitespaces 
        s = s.substring(s.indexOf(words[1], words[0].length())) + " " + words[0].toLowerCase();
        //                                                              ^   Add the first word to the end
        s = s.substring(0, 1).toUpperCase() + s.substring(1);

    }

    System.out.println("I have rephrased that line to read:");
    System.out.println(s);
} 
```

如果您不关心保留空格，则可以更简单地进行吐痰

输出：

```
Enter line of text.
A aa  aaa    aaaa
I have rephrased that line to read:
Aa  aaa    aaaa a 
```

有关更多信息，请阅读[http://docs.oracle.com/javase/tutorial/java/data/strings.html](http://docs.oracle.com/javase/tutorial/java/data/strings.html)和[http://docs.oracle.com/javase/7/docs/api/java/lang/String。 html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:09:55.073

```
 int last = s.indexOf(""); // Empty string, found at 0 
```

应该

```
 int last = s.lastIndexOf(' '); // Char possible too 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:11:18.003

假设您的输入是空格分隔的字符串，那么您可以像这样交换第一个和最后一个位置。

```
String[] words = s.split(" ");
String tmp = words[0];  // grab the first
words[0] = words[words.length];  //replace the first with the last
words[words.length] = tmp;  // replace the last with the first 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:14:18.377

请阅读扫描仪 API 文档：

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

也就是说，使用 kb.next() 只能得到第一个单词。要修复它，您应该在 while 循环中获取所有单词或使用行尾作为分隔符。

[扫描仪 API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

# sql - SQL 隐式连接到显式连接

> ID：15196250
> 
> 赞同：3
> 
> 时间：2013-03-04T07:04:24.660
> 
> 标签：sql, database, oracle, join

我有一个简单的查询：

```
SELECT THDR.filename, 
       THDR.txn_header_id, 
       THDR.txn_header_ext_id, 
       THDR.txn_header_dttm, 
       THDR.upload_dttm, 
       Nvl(Sum(TDTL.txn_vol), 0) TOTAL_VOLUME, 
FROM   ci_txn_header THDR, 
       ci_txn_detail TDTL, 
WHERE  THDR.txn_header_id = TDTL.txn_header_id 
```

现在我面临的问题是，如果 ci_txn_header 中存在一条记录，使得 TDTL 中不存在相应的记录，则该查询不会返回该记录。

有没有办法可以将其包含在我的结果中？我不想使用联合，因为我认为通过在查询中使用显式连接可以获得更好的效果。

请帮助我确定解决此问题所需的确切连接。

我正在使用 Oracle 数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:08:26.410

使用**左连接**

```
SELECT THDR.filename, 
       THDR.txn_header_id, 
       THDR.txn_header_ext_id, 
       THDR.txn_header_dttm, 
       THDR.upload_dttm, 
       Nvl(Sum(TDTL.txn_vol), 0) TOTAL_VOLUME, 
FROM   ci_txn_header THDR 
LEFT JOIN ci_txn_detail TDTL 
ON THDR.txn_header_id = TDTL.txn_header_id 
```

# events - 我们可以使用移动网站触发手机通话事件吗？

> ID：15196252
> 
> 赞同：0
> 
> 时间：2013-03-04T07:04:43.097
> 
> 标签：events, mobile, web, phone-call

我们可以使用使用 java 和 spring MVC 创建的移动网站触发手机通话事件吗？

基本上我们需要在手机接到电话时触发一些事件。

有可能还是我们需要使用一些本机应用程序来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T07:03:14.280

您需要一个应用程序来执行此操作，因为网站无法访问设备 API。

你可以做的是创建一个基于 Web 技术的应用程序，并使用像 Phonegap 这样的框架来订阅事件，比如你的应用程序何时关闭或进入后台。

# jquery - 在 ASP.NET 控件上使用 ajax/jQuery 表单验证

> ID：15196255
> 
> 赞同：2
> 
> 时间：2013-03-04T07:04:49.293
> 
> 标签：jquery, asp.net, asp.net-ajax, jquery-validate

再会

我正在使用带有母版页的 ASP.NET 页面。我想对输入字段（）进行实时表单验证。现在我看到的所有 tuts 和演示/插件都使用普通的 html 标签。我试图在我的表单上实现其中的一些，但它们不起作用。（我正在使用一个母版页面和一个普通的 aspx 网页表单......）

更新：问题用密码字段的 asp 控件替换输入标签...

原始输入元素

```
 <fieldset>
        <legend>Validating a complete form</legend>
        <p>
            <label for="firstname">Firstname</label>
            <input id="firstname" name="firstname" type="text" />
        </p>
        <p>
            <label for="lastname">Lastname</label>
            <input id="lastname" name="lastname" type="text" />
        </p>
        <p>
            <label for="username">Username</label>
            <input id="username" name="username" type="text" />
        </p>
        <p>
            <label for="password">Password</label>
            <input id="password" name="password" type="password" />
        </p>
        <p>
            <label for="confirm_password">Confirm password</label>
            <input id="confirm_password" name="confirm_password" type="password" />
        </p>
        <p>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" />
        </p>
        <p>
            <label for="agree">Please agree to our policy</label>
            <input type="checkbox" class="checkbox" id="agree" name="agree" />
        </p>
        <p>
            <label for="newsletter">I'd like to receive the newsletter</label>
            <input type="checkbox" class="checkbox" id="newsletter" name="newsletter" />
        </p>

        <tr>
            <td class="tdRight"><asp:Label ID="LabelEmail" runat="server" Text="Email Address (to be used as username):"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox name="email" type="email" ID="TextBoxEmail" runat="server" ClientIDMode="Static" TextMode="SingleLine" MaxLength="50"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="tdRight"><asp:Label ID="Label1" runat="server" Text="Postal Address:"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox ID="TextBoxPostal" runat="server" ClientIDMode="Static" TextMode="MultiLine" Rows="4" MaxLength="250"></asp:TextBox></td>
        </tr>

        <tr>
            <td class="tdRight"><asp:Label ID="LabelPassword" runat="server" Text="Password:"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox name="password" type="password" ID="TextBoxPassword" runat="server" ClientIDMode="Static" TextMode="Password" MaxLength="50"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="tdRight"><asp:Label ID="LabelConfirmPassword" runat="server" Text="Confirm Password:"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox name="confirm_password" type="password" ID="TextBoxConfirmPassword" runat="server" ClientIDMode="Static" TextMode="Password" MaxLength="50"></asp:TextBox></td>
        </tr>

</fieldset> 
```

我想用以下 ASP 控件替换上面的内容

```
 <tr>
            <td class="tdRight"><asp:Label ID="LabelEmail" runat="server" Text="Email Address (to be used as username):"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox name="email" type="email" ID="TextBoxEmail" runat="server" ClientIDMode="Static" TextMode="SingleLine" MaxLength="50"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="tdRight"><asp:Label ID="Label1" runat="server" Text="Postal Address:"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox ID="TextBoxPostal" runat="server" ClientIDMode="Static" TextMode="MultiLine" Rows="4" MaxLength="250"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="tdRight"><asp:Label ID="LabelPassword" runat="server" Text="Password:"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox name="password" type="password" ID="TextBoxPassword" runat="server" ClientIDMode="Static" TextMode="Password" MaxLength="50"></asp:TextBox></td>
        </tr>
        <tr>
            <td class="tdRight"><asp:Label ID="LabelConfirmPassword" runat="server" Text="Confirm Password:"></asp:Label></td>
            <td class="tdLeft"><asp:TextBox name="confirm_password" type="password" ID="TextBoxConfirmPassword" runat="server" ClientIDMode="Static" TextMode="Password" MaxLength="50"></asp:TextBox></td>
        </tr> 
```

**现在一切正常，除了密码字段？为什么？此外，ID 并不重要，因为验证器在名称和类型字段上工作......**

jQuery：

```
 <script type="text/javascript">
        $.validator.setDefaults({
            submitHandler: function () { alert("submitted!"); }
        });

        $().ready(function () {

            // validate signup form on keyup and submit
            $("form").validate({
                rules: {
                    firstname: "required",
                    lastname: "required",
                    username: {
                        required: true,
                        minlength: 2
                    },
                    password: {
                        required: true,
                        minlength: 5
                    },
                    confirm_password: {
                        required: true,
                        minlength: 5,
                        equalTo: "#password"
                    },
                    email: {
                        required: true,
                        email: true
                    },
                    topic: {
                        required: "#newsletter:checked",
                        minlength: 2
                    },
                    agree: "required"
                },
                messages: {
                    firstname: "Please enter your firstname",
                    lastname: "Please enter your lastname",
                    username: {
                        required: "Please enter a username",
                        minlength: "Your username must consist of at least 2 characters"
                    },
                    password: {
                        required: "Please provide a password",
                        minlength: "Your password must be at least 5 characters long"
                    },
                    confirm_password: {
                        required: "Please provide a password",
                        minlength: "Your password must be at least 5 characters long",
                        equalTo: "Please enter the same password as above"
                    },
                    email: "Please enter a valid email address",
                    agree: "Please accept our policy"
                }
            });

            // propose username by combining first- and lastname
            $("#username").focus(function () {
                var firstname = $("#firstname").val();
                var lastname = $("#lastname").val();
                if (firstname && lastname && !this.value) {
                    this.value = firstname + "." + lastname;
                }
            });

            //code to hide topic selection, disable for demo
            var newsletter = $("#newsletter");
            // newsletter topics are optional, hide at first
            var inital = newsletter.is(":checked");
            var topics = $("#newsletter_topics")[inital ? "removeClass" : "addClass"]("gray");
            var topicInputs = topics.find("input").attr("disabled", !inital);
            // show when newsletter is checked
            newsletter.click(function () {
                topics[this.checked ? "removeClass" : "addClass"]("gray");
                topicInputs.attr("disabled", !this.checked);
            });
        });
    </script> 
```

**真实呈现的 HTML（与表单有关）**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"
type="text/javascript"></script>
<script src="Scripts/jquery.validate.js" type="text/javascript"></script>
<script type="text/javascript">
    $.validator.setDefaults({
        submitHandler: function() {
            alert("submitted!");
        }
    });

    $().ready(function() {

        // validate signup form on keyup and submit
        $("form").validate({
            rules: {
                firstname: "required",
                lastname: "required",
                username: {
                    required: true,
                    minlength: 2
                },
                password: {
                    required: true,
                    minlength: 5
                },
                confirm_password: {
                    required: true,
                    minlength: 5,
                    equalTo: "#password"
                },
                email: {
                    required: true,
                    email: true
                },
                topic: {
                    required: "#newsletter:checked",
                    minlength: 2
                },
                agree: "required"
            },
            messages: {
                firstname: "Please enter your firstname",
                lastname: "Please enter your lastname",
                username: {
                    required: "Please enter a username",
                    minlength: "Your username must consist of at least 2 characters"
                },
                password: {
                    required: "Please provide a password",
                    minlength: "Your password must be at least 5 characters long"
                },
                confirm_password: {
                    required: "Please provide a password",
                    minlength: "Your password must be at least 5 characters long",
                    equalTo: "Please enter the same password as above"
                },
                email: "Please enter a valid email address",
                agree: "Please accept our policy"
            }
        });

        // propose username by combining first- and lastname
        $("#username").focus(function() {
            var firstname = $("#firstname").val();
            var lastname = $("#lastname").val();
            if (firstname && lastname && !this.value) {
                this.value = firstname + "." + lastname;
            }
        });

        //code to hide topic selection, disable for demo
        var newsletter = $("#newsletter");
        // newsletter topics are optional, hide at first
        var inital = newsletter.is(":checked");
        var topics = $("#newsletter_topics")[inital ? "removeClass" : "addClass"]("gray");
        var topicInputs = topics.find("input").attr("disabled", !inital);
        // show when newsletter is checked
        newsletter.click(function() {
            topics[this.checked ? "removeClass" : "addClass"]("gray");
            topicInputs.attr("disabled", !this.checked);
        });
    });
</script>
<form method="get" action="SignupPersonal.aspx" id="aspnetForm"
class="cmxform">
    <div class="aspNetHidden">
        <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMjk5MTc4MzEPZBYCZg9kFgICBQ9kFgICAQ9kFgICMA8QDxYGHg1EYXRhVGV4dEZpZWxkBQ9FbnVtRGVzY3JpcHRpb24eDkRhdGFWYWx1ZUZpZWxkBQlFbnVtVmFsdWUeC18hRGF0YUJvdW5kZ2QQFQMFRW1haWwlTm90aWZpY2F0aW9uIHZpYSBNb2JpbGUgVGV4dCBNZXNzYWdlcwRCb3RoFQMBMAExATIUKwMDZ2dnZGRksmDjLifKF4+hMs8AhfX/bwcgvt2QqQRuZWngXcH7AGM="
        />
    </div>
    <div class="aspNetHidden">
        <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdABBfr2cGXQNKgk5u/suiS/eBMBPtPHD3IbRvk+yxeYb2457gKW6aCQ3yNBTG9LyKZ4cubOXF5tOYlsiIBcyrDbyQ4wKHhHIVKN2DCQeFUhf9fWAUCuZOob8WzLZCHNXad+6lH/vCaPfCLoThuEr+9Jzl6wAt6cuJ+L+27/Nrmm6upAz//swWW9Bijj8L66VLU8Xqa57A90pLu4vVlIQKRMNCPMnVTRV7QuT7xghzXApY9g0EIzfFocd5Qmeb8RCzKLnYNu/sHr3w5Hv9l1IOx6mNGOqE5LWQWcaFAwIxNHVtD2pkSrWzz9gkUQepnHOZG7M83cV/FFqhRADq7X7PITxLg4JwtYX8Yw9N8ZivtSz9f1K3117QXOtSn4MTHtKkNBE="
        />
    </div>
    <div id="signupPersonal">
        <table>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelName">Name:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxName" type="text" maxlength="50"
                    id="TextBoxName" name="firstname" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelSurname">Surname:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxSurname" type="text" maxlength="50"
                    id="TextBoxSurname" class="required" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelPin">Preferred Pin:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxPin" type="password" maxlength="10"
                    id="TextBoxPin" class="required" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelConfirmPin">Confirm Pin:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxConfirmPin" type="password"
                    maxlength="10" id="TextBoxConfirmPin" class="required" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelPhoneNo">Home Number:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxPhoneNo" type="text" maxlength="20"
                    id="TextBoxPhoneNo" class="required digits" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelMobileNo">Cell Number:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxMobileNo" type="text" maxlength="20"
                    id="TextBoxMobileNo" class="required digits" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelIDNumber">ID Number:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxIDNumber" type="text" maxlength="20"
                    id="TextBoxIDNumber" class="required digits" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelEmail">Email Address (to be used as username):</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxEmail" maxlength="50" id="TextBoxEmail"
                    name="email" type="email" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_Label1">Postal Address:</span>

                </td>
                <td class="tdLeft">
                    <textarea name="ctl00$ContentPlaceHolder1$TextBoxPostal" rows="4" cols="20"
                    id="TextBoxPostal"></textarea>
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelPassword">Password:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxPassword" maxlength="50"
                    id="TextBoxPassword" name="password" type="password" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelConfirmPassword">Confirm Password:</span>

                </td>
                <td class="tdLeft">
                    <input name="ctl00$ContentPlaceHolder1$TextBoxConfirmPassword" maxlength="50"
                    id="TextBoxConfirmPassword" name="confirm_password" type="password" />
                </td>
            </tr>
            <tr>
                <td class="tdRight"><span id="ctl00_ContentPlaceHolder1_LabelContactMethod">Preferred method of contact:</span>

                </td>
                <td class="tdLeft">
                    <select name="ctl00$ContentPlaceHolder1$DropDownListContactMethod" id="DropDownListContactMethod">
                        <option value="0">Email</option>
                        <option value="1">Notification via Mobile Text Messages</option>
                        <option value="2">Both</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" name="ctl00$ContentPlaceHolder1$ButtonRegister" value="Register"
                    id="ctl00_ContentPlaceHolder1_ButtonRegister" class="register" class="submit"
                    type="submit" />
                </td>
            </tr>
        </table>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:31:42.750

除非`id`您`<form>`的不是您的想法（查看您呈现的代码以验证这一点），否则您的表单验证代码应该可以工作。

**您的代码的工作演示：http: [//jsfiddle.net/b3QNY/](http://jsfiddle.net/b3QNY/)**

**jQuery** :

```
$(document).ready(function () {

    $('#form1').validate();

}); 
```

**HTML**：

```
<form id="form1">
    <fieldset>
        <legend>A simple comment form with submit validation and default messages</legend>
        <p>
            <label for="cname">Name</label>
<em>*</em>
            <input id="cname" name="name" size="25" class="required"
            minlength="2" />
        </p>
        <p>
            <label for="cemail">E-Mail</label>
<em>*</em>
            <input id="cemail" name="email" size="25" class="required email"
            />
        </p>
        <p>
            <label for="curl">URL</label>
<em> </em>
            <input id="curl" name="url" size="25" class="url"
            value="" />
        </p>
        <p>
            <label for="comment">Your comment</label>
<em>*</em>
            <textarea id="ccomment" name="comment" cols="22"
            class="required"></textarea>
        </p>
        <p>
            <input class="submit" type="submit" value="Submit" />
        </p>
    </fieldset>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:33:46.987

我想我解决了 - 你必须为密码文本框创建自定义规则......由于某种原因，asp密码文本框的呈现效果不太好：

```
 <%= TextBoxPassword.UniqueID %>: {
                     required: true,
                     minlength: 5

                 },

                <%= TextBoxConfirmPassword.UniqueID %>: {
                    required: true,
                    minlength: 5,
                    equalTo: "#TextBoxPassword"
                }, 
```

表单验证现在可以工作了，除了 Visual Studio 呻吟 - 它以红色突出显示**:并说：**

“预期的标识符、字符串或数字”

那会是个问题吗？

# c# - 如何以编程方式更改堆栈面板内所有（n 个）texblocks 的字体大小？

> ID：15196269
> 
> 赞同：6
> 
> 时间：2013-03-04T07:06:11.127
> 
> 标签：c#, wpf, windows-phone-7, textblock

我正在以编程方式在堆栈面板中创建“n”个文本块。我需要更改“n”个文本块的字体大小（字体大小的增加和减少）。是否可以在单个语句中更改所有子堆栈面板的字体大小？如果不可能，如何有效解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T09:15:19.190

您可以在标记中应用样式：

```
<StackPanel.Resources>
<Style TargetType="TextBlock">
  <Setter Property="FontSize" Value="20"/>
</Style>
</StackPanel.Resources> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T07:14:54.960

是的，您可以参考下面的代码片段，其中“foobar”指的是您的 Stackpanel 的名称。

```
 foreach (var children in foobar.Children)
        {
            (children as TextBlock).FontSize = 20;
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-23T05:34:32.637

如果您想要所有子元素另一种样式，为什么不使用“ContentControl”？

例如像这样：

```
 <GroupBox Header="Some Header" FontSize="18" FontWeight="Bold">
        <ContentControl FontSize="14" FontWeight="Normal">
        ....
        </ContentControl
    <GroupBox>

All elements inside the ContentControl Block will be st with normal weight and a size of 14. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T07:24:51.080

您可以使用样式将值应用于 . 中所有`TextBlock`s的属性`StackPanel`。

抱歉之前的错误答案。

# c++ - 尝试通过引用传递对象时出现编译错误

> ID：15196273
> 
> 赞同：2
> 
> 时间：2013-03-04T07:06:39.030
> 
> 标签：c++, parameters, reference

每次我尝试编译此程序时，都会出现以下错误：

```
 Undefined symbols for architecture x86_64:
  "Character::setTime(int)", referenced from:
      awesome(Character)    in ccmsAc4F.o
  "Character::getMoney()", referenced from:
      _main in ccmsAc4F.o
  "Character::setMoney(double)", referenced from:
      awesome(Character)    in ccmsAc4F.o
  "Character::Character()", referenced from:
      _main in ccmsAc4F.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

字符编译正确并且没有错误。问题似乎是试图将对象作为参考传递。以下是我的程序：

```
#include <cstdlib>
#include "Character.h"
#include <iostream>

using namespace std;

void awesome(Character& character);

int main() {
    Character userCharacter;
    awesome(userCharacter);
    cout << userCharacter.getMoney();
    return 0;
}

void awesome(Character& character)
{
    character.setTime(0);
    character.setMoney(0.00);
} 
```

有人对我做错了什么有任何见解吗？最终在一个更大的程序中，我想使用引用来编辑一个已经实例化的对象。我假设引用是正确的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:09:16.757

它们是链接器错误。您忘记实现`Character`Character.o 的方法或将其链接到您的项目。

```
Character::setTime(int) { /* body ?! */ }
Character::getMoney() { /* body ?! */ }
Character::setMoney(double) { /* body ?! */ }
Character::Character() { /* body ?! */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:55:26.937

您需要编译 Character.cpp 生成 Character.o 最终将与您的项目链接，使链接器知道类 Character。然后此链接错误将消失。

# google-chrome-extension - 如何在 linux 无头服务器上预安装 chrome 扩展

> ID：15196274
> 
> 赞同：4
> 
> 时间：2013-03-04T07:06:45.143
> 
> 标签：google-chrome-extension, chromium, headless

我需要在无头服务器上安装 chrome 扩展。一种方法是使用组策略。我正在寻找其他方法来做到这一点。

对于 Firefox，我只需将我的 XPI（扩展名）放在配置文件目录/扩展名文件夹中，Firefox 就会选择扩展名。我想知道对于 chrome 我是否可以做类似的事情。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T10:12:57.610

这正是我一直在寻找的。在这里找到了答案。

[http://developer.chrome.com/extensions/external_extensions.html](http://developer.chrome.com/extensions/external_extensions.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T07:15:16.647

*   如果您从文件安装，请将 .crx 扩展文件提供给要安装扩展的机器。
*   在下列文件夹之一中创建具有以下名称的文件：aaaaaaaaabbbbbbbbbbcccccccccc.json 其中文件名（不带扩展名）对应于您的扩展名的 ID。该位置取决于操作系统。

**`Linux:`**

> /opt/google/chrome/extensions/ /usr/share/google-chrome/extensions/

**`Note:`**如有必要，使用 chmod 确保 aaaaaaaaaabbbbbbbbbbcccccccccc.json 文件是世界可读的。

*   保存 JSON 文件。
*   启动谷歌浏览器并转到 chrome://extensions; 您应该会看到列出的扩展名。

# 参考

*   [托管](https://developer.chrome.com/extensions/hosting.html)

# capybara - 使用 capybara 阅读 toptip 文本

> ID：15196276
> 
> 赞同：0
> 
> 时间：2013-03-04T07:06:47.453
> 
> 标签：capybara

我正在使用 Tipsy gem 作为工具提示。如何使用水豚阅读工具提示文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:35:38.783

从我在[此页面上](http://onehackoranother.com/projects/jquery/tipsy/)看到的提示呈现`original-title`属性。

要在 Capybara 中获取此属性，您可以使用[[] 方法](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element#%5B%5D-instance_method)：

```
find('.class')[:original-title] 
```

# android - StackOverFlowError : addTextChangedListener 为无限循环运行

> ID：15196277
> 
> 赞同：0
> 
> 时间：2013-03-04T07:06:50.573
> 
> 标签：android, stack-overflow, android-edittext

我正在尝试使用条形码扫描仪从条形码中读取值。处理完值后，我需要重置 UI。

```
if(flag){
            System.out.println("coming inside if");
            scanned_barCode.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    // TODO Auto-generated method stub
                     AddRecord(scanned_barCode.getText().toString());
                    SetDataOnUI();
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {

                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub

                }

            });
        }else{
            scanned_barCode.setText("");
        } 
```

我想它给了 StackOverError，因为它正在进入无限循环。我该如何克服这个问题。每次`AddRecord(String str)`调用我都需要将editText设置为null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:16:35.573

在`afterTextChanged`应用此检查时：

```
if(!scanned_barCode.getText().toString().equals(""))
{
    AddRecord(scanned_barCode.getText().toString());
    SetDataOnUI();
} 
```

# c# - 如何在gridview的标题中使用两个单选按钮来选择具有相同单选按钮的同一列中的所有相应记录？

> ID：15196279
> 
> 赞同：0
> 
> 时间：2013-03-04T07:06:52.400
> 
> 标签：c#, asp.net, gridview, radio-button

如何在网格视图的标题中使用两个单选按钮来选择具有相同单选按钮的同一列中的所有相应记录？

这是我的代码：

```
 <asp:TemplateField HeaderText="Page">
     <HeaderTemplate>
         <asp:RadioButton ID="RadioButton1" runat="server" Text="Select All Colour" />
         <asp:RadioButton ID="RadioButton2" runat="server" Text="Select All B/W" />                                
     </HeaderTemplate>
     <ItemTemplate>                                
         <asp:RadioButton ID="RadioButton3" runat="server" Text="Colour" />
         <asp:RadioButton ID="RadioButton4" runat="server" Text="B/W" />
     </ItemTemplate>
 </asp:TemplateField> 
```

# delphi - 声明一个 Component[x] 类型

> ID：15196288
> 
> 赞同：2
> 
> 时间：2013-03-04T07:07:27.093
> 
> 标签：delphi, delphi-xe2

我在表单上有组件并寻找任何`TMachine`类型然后一旦我找到一个我想从组件中获取一些信息。我的问题是：我声明`m` 为`TMachine` 然后尝试分配`m := Components[i]` 但不会让我因为`m`是 TMachine 类型和组件是组件类型。有关如何解决此问题的任何帮助，以便我可以将找到的组件用作 TMachine？

```
procedure TfDeptLayout.bSaveClick(Sender: TObject);
var
  i: Integer;
  m : TMachine;
  Number,Zone,Dept,Name,Asset,IsPanel,BasicName,FinalLocation,Left,Top : String;
begin
bSave.Visible := false;
for i := ComponentCount -1 downto 0 do
  begin
    if(Components[I] is TMachine) then
      begin
        M := Components[I];
        Number := m.mnNumber;
        Name := m.mnName;
        Asset := m.mnAsset;
        IsPanel := m.mnIsPanel;
        BasicName := m.mnBasicName;
        if checkbox1.Checked then
          FinalLocation := 'shop'
        else
          FinalLocation := 'w';
        Left := inttostr(m.Left);
        top := inttostr(m.Top);
        Zone := myZone;
        Dept := myDept;
        Showmessage('Zone: '+Zone+' Dept: '+Dept
            +'Name : '+Name+' Number: '+Number+' Asset: '+Asset
            +'IsPanel: '+Ispanel+' BasicName: '+BasicName+
            ' FinalLocation : '+FinalLocation+' Left: '+Left+
            +' Top: '+Top);
      end;
  end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:12:47.400

您需要使用类型转换来解决类型不匹配问题：

```
if(Components[I] is TMachine) then
  begin
    M := TMachine(Components[I]); 
```

# python - 就地修改 scipy 稀疏矩阵

> ID：15196289
> 
> 赞同：2
> 
> 时间：2013-03-04T07:07:31.663
> 
> 标签：python, numpy, scipy

基本上，我只是想做一个简单的矩阵乘法，具体来说，提取它的每一列并通过将它除以它的长度来标准化它。

```
 #csc sparse matrix
    self.__WeightMatrix__ = self.__WeightMatrix__.tocsc()
    #iterate through columns
    for Col in xrange(self.__WeightMatrix__.shape[1]):
       Column = self.__WeightMatrix__[:,Col].data
       List = [x**2 for x in Column]
       #get the column length
       Len = math.sqrt(sum(List))
       #here I assumed dot(number,Column) would do a basic scalar product
       dot((1/Len),Column)
       #now what? how do I update the original column of the matrix, everything that have been returned are copies, which drove me nuts and missed pointers so much 
```

我搜索了 scipy 稀疏矩阵文档，没有得到任何有用的信息。我希望一个函数返回一个指向矩阵的指针/引用，以便我可以直接修改它的值。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:21:55.847

在 CSC 格式中，您有两个可写属性`data`和`indices`，它们保存矩阵的非零条目和相应的行索引。您可以利用这些优势，如下所示：

```
def sparse_row_normalize(sps_mat) :
    if sps_mat.format != 'csc' :
        msg = 'Can only row-normalize in place with csc format, not {0}.'
        msg = msg.format(sps_mat.format)
        raise ValueError(msg)
    row_norm = np.sqrt(np.bincount(sps_mat.indices, weights=mat.data * mat_data))
    sps_mat.data /= np.take(row_norm, sps_mat.indices) 
```

要查看它是否确实有效：

```
>>> mat = scipy.sparse.rand(4, 4, density=0.5, format='csc')
>>> mat.toarray()
array([[ 0\.        ,  0\.        ,  0.58931687,  0.31070526],
       [ 0.24024639,  0.02767106,  0.22635696,  0.85971295],
       [ 0\.        ,  0\.        ,  0.13613897,  0\.        ],
       [ 0\.        ,  0.13766507,  0\.        ,  0\.        ]])
>>> mat.toarray() / np.sqrt(np.sum(mat.toarray()**2, axis=1))[:, None]
array([[ 0\.        ,  0\.        ,  0.88458487,  0.46637926],
       [ 0.26076366,  0.03003419,  0.24568806,  0.93313324],
       [ 0\.        ,  0\.        ,  1\.        ,  0\.        ],
       [ 0\.        ,  1\.        ,  0\.        ,  0\.        ]])
>>> sparse_row_normalize(mat)
>>> mat.toarray()
array([[ 0\.        ,  0\.        ,  0.88458487,  0.46637926],
       [ 0.26076366,  0.03003419,  0.24568806,  0.93313324],
       [ 0\.        ,  0\.        ,  1\.        ,  0\.        ],
       [ 0\.        ,  1\.        ,  0\.        ,  0\.        ]]) 
```

而且它也非常快，没有 Python 循环破坏乐趣：

```
In [2]: mat = scipy.sparse.rand(10000, 10000, density=0.005, format='csc')

In [3]: mat
Out[3]: 
<10000x10000 sparse matrix of type '<type 'numpy.float64'>'
    with 500000 stored elements in Compressed Sparse Column format>

In [4]: %timeit sparse_row_normalize(mat)
100 loops, best of 3: 14.1 ms per loop 
```

# objective-c - 在您的视图中放大图片

> ID：15196294
> 
> 赞同：0
> 
> 时间：2013-03-04T07:08:09.637
> 
> 标签：objective-c, uitableview

我有一个表格视图，当我选择任何行时，它会显示该特定项目的详细信息。详细信息包含该项目的图片。现在我想在你点击后放大图片。请帮助，因为我是这个 iOS 领域的新手。

```
contentview = [[UIImageView alloc]init];
    [contentview setFrame:CGRectMake(10, 10, 300, 150)];
    [contentview setImage:[UIImage imageNamed:@"chicken tikka.png"]];
    [self.view addSubview: contentview];
    [contentview release];

    UIWebView *ingradients= [[UIWebView alloc]init];
    [ingradients setFrame:CGRectMake(10, 170, 300, 300)];
[ingradients loadHTMLString:@"<html><body><p style:color:red><strong>INGREDIENTS</strong></p><ul><li>One kg Chicken</li><li>Half kg Onion</li><li>200gm Tomato</li></ul></body></html>" baseURL:nil];

    ingradients.delegate=self;
    [self.view addSubview:ingradients]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:36:50.187

我认为这段代码对你有帮助

```
 imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, screenRect.size.width, screenRect.size.height)];
        imageScrollView.maximumZoomScale = 2.50;
        imageScrollView.minimumZoomScale = 1.00;
        imageScrollView.clipsToBounds = YES;
        imageScrollView.delegate = self;
        [self.view addSubview:imageScrollView];

        imageView_temp = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, screenRect.size.width, screenRect.size.height)];
        imageView_temp.contentMode = UIViewContentModeScaleToFill;
        imageView_temp.backgroundColor = [UIColor clearColor];
        [imageView_temp setUserInteractionEnabled:YES];
        originalImagePos = imageView_temp.center;
        [imageScrollView addSubview:imageView_temp];

        // scrollview content size
        imageScrollView.contentSize = CGSizeMake(imageView_temp.frame.size.width, imageView_temp.frame.size.height);

// call this method for to zoom in
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {

    return imageView_temp;
}

// call this method for to zoom out
-(void)resetImageZoom {

    NSLog(@"Resetting any image zoom");

    CGAffineTransform transform = CGAffineTransformMakeScale(1.0, 1.0);

    imageView_temp.transform = transform;

    [imageScrollView setContentSize:CGSizeZero];

    imageView_temp.center = originalImagePos;
} 
```

# c - 在 strcat 之后恢复为 null

> ID：15196302
> 
> 赞同：1
> 
> 时间：2013-03-04T07:08:28.373
> 
> 标签：c, strcat

我正在尝试 strcat 一个路径名以传递给 fopen 以在 while 循环中创建多个文件名。

```
char path[30]="";
while(!feof(stdin))
{
    strncat(path,folder,8);
    strcat(path,filename);
    strncat(path,ext,4);
    printf("file path:%s\n",path);
    File[n] = fopen(path,"a");
    path=0;
} 
```

如何将路径返回到空字符数组，以便再次连接？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:22:23.673

由于它是空终止的，只需执行

```
path[0] = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:18:11.167

试试[memset()](http://www.cplusplus.com/reference/cstring/memset/)函数。它将允许您清理阵列。

写：

```
memset((void*)path, 0, 30*sizeof(char)); 
```

代替

```
path = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:21:19.897

更改`path=0;`为`path[0] = 0;`。这将使字符串为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:22:35.330

设置路径[0] = 0；这样的例程以 0 为结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T07:24:57.057

用于`snprintf`创建路径的内容

```
#define MAX_PATH_SIZE 30
char path[MAX_PATH_SIZE] = "";
while (!feof(stdin))
{
  snprintf(path, MAX_PATH_SIZE, "%s%s%s", folder, filename, ext);
  printf("file path:%s\n",path);
  File[n] = fopen(path,"a");
} 
```

# git - 让 Github 在收到更新时推送到远程服务器

> ID：15196304
> 
> 赞同：11
> 
> 时间：2013-03-04T07:08:33.353
> 
> 标签：git, deployment, amazon-ec2, githooks, git-post-receive

让 Github 自动将任何更新推送到远程服务器的设置是什么？

这对于在 Github 上维护代码库以及让网站运行该代码库非常有用。

1.  我在自己的电脑上有我的仓库，这是我工作的地方。

2.  我在本地存储库中提交更改，并将它们推送到我的 Github 存储库。

3.  我希望我的 Github 存储库将这些更改推送到我的远程服务器。

我整天都在研究，使用“钩子”听起来很合理。也许在 Github 上使用“接收后”挂钩，然后将推送命令运行到我的远程服务器。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T07:21:23.017

据我了解，github 不允许您定义“真正的”钩子。就像收到后一样。相反，他们为开发人员提供了一种称为[webhook](https://help.github.com/articles/post-receive-hooks)的东西。你可以做的是，只要有推送到你的存储库，就会向你指定的任何 URL 发出 Web 请求。

所以你可以做的是：在你的远程 git 服务器上设置一个网络服务器，并配置 github 在接收后对其进行 http 调用。每当 github 通知您的远程服务器时，请从 github 拉取它。

请参阅此处了解如何使用 webhook：[https ://help.github.com/articles/post-receive-hooks](https://help.github.com/articles/post-receive-hooks)

PS 一个真正的钩子机制可能是 github 的一个安全漏洞，因为它允许您在他们的服务器上执行自定义代码。所以他们做了一些不允许你执行任何事情但仍然允许你做任何你想做的事情的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T08:01:33.970

为了说明[Yervand](https://stackoverflow.com/users/521535/yervand-aghababyan)的[答案](https://stackoverflow.com/a/15196484/6309)（赞成），请将此**[peligangit](https://github.com/theon/pelicangit)**视为简单 HTTP 服务器的示例（您可以将其安装在您的 amazon-ec2 实例上），它将：

*   启动一个简单的 HTTP 服务器。
*   监听来自[GitHub 网络钩子的 POST](https://help.github.com/articles/post-receive-hooks)
*   它将拉下新的提交

![工作流程](../Images/6df5ba07b3027ea2d17f55cd4db5964b.png)

该库将获取，然后重置 origin/master 上的主分支。
这是一种方法。（见[`githook.py`](https://github.com/theon/pelicangit/blob/master/pelicangit/githook.py#L26-L60)）

```
def hard_reset_repos(self):
    self.server.source_repo.fetch([self.server.source_repo.origin])
    self.server.source_repo.reset(['--hard', self.server.source_repo.originMaster]) 
```

# javascript - 如何使用 Google Chrome Inspector 查看 cookie？

> ID：15196305
> 
> 赞同：4
> 
> 时间：2013-03-04T07:08:47.160
> 
> 标签：javascript, cookies, google-chrome-devtools, web-inspector

我正在使用 Google Chrome Web Inspector 调试网页。

在选项卡网络中，我能够看到对服务器 API 的调用并检测该 URL 的请求 Cookie 和响应 Cookie，操作系统我认为 cookie 已保存在浏览器中，但如果我访问 Cookie 下的资源部分，我可以看到任何...这个网站没有cookies

你能给我提供更多信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:32:31.580

我解决了更换

```
http://localhost:8888/ 
```

和

```
http://127.0.0.1:8888/ 
```

现在我可以在本地开发环境中为我的网页设置 cookie。

这个问题帮助我解决了 [Chrome localhost cookie not being set的问题](https://stackoverflow.com/questions/7346919/chrome-localhost-cookie-not-being-set)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:43:48.987

为什么 cookie 显示在 127.0.0.1 而不是 localhost 的根本问题与 cookie 的域有关。设置 cookie 时，会设置 cookie 的域，我怀疑服务器将域设置为 127.0.0.1 而不是 localhost

# android - 为本地图像创建适用于 Android 的照片库应用程序

> ID：15196306
> 
> 赞同：3
> 
> 时间：2013-03-04T07:08:51.437
> 
> 标签：android, gallery, photo, live-wallpaper, android-gallery

我想为具有以下功能的 android 创建一个照片库应用程序，

*   “设置为壁纸”选项
*   导航按钮（左 - 右）

它更像是动态壁纸。我需要知道是否有任何源代码可以帮助我快速创建它。

我有关于 HTML5 CSS3 和 PHP 的知识（如果有帮助的话）:)

有用的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:15:29.377

查看下面的动态壁纸链接：

1) [PhotoGalleryLive 壁纸](http://code.google.com/p/photogallerylivewallpaper/source/checkout)
2) [Gallery 壁纸](http://code.google.com/p/gallery-wallpaper/source/checkout)
3) [Android-wallpaper-slideshow](http://code.google.com/p/android-wallpaper-slideshow/source/checkout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:16:40.993

这就是我为我的应用程序进行图像查看的方式......

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;

public class CertDisplay extends Activity {
    Integer[] pics = {
            R.drawable.cert1,
            R.drawable.cert2,
            R.drawable.cert3,
            R.drawable.cert4,
            R.drawable.cert5
    };
    ImageView imageView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.certificate);            
        Gallery ga = (Gallery)findViewById(R.id.Gallery01);
        ga.setAdapter(new ImageAdapter(this));
    }

    public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int imageBackground;

        public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
            imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
            ta.recycle();
        }

        @Override
        public int getCount() {

            return pics.length;
        }

        @Override
        public Object getItem(int arg0) {

            return arg0;
        }

        @Override
        public long getItemId(int arg0) {

            return arg0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {
            ImageView iv = new ImageView(ctx);
            iv.setImageResource(pics[arg0]);
            iv.setScaleType(ImageView.ScaleType.FIT_XY);
            //iv.setLayoutParams(new Gallery.LayoutParams(750,1020));
            iv.setBackgroundResource(imageBackground);
            return iv;
        }

    }
} 
```

# jsp - 如何将一个jsp页面调用到另一个jsp页面

> ID：15196308
> 
> 赞同：1
> 
> 时间：2013-03-04T07:08:54.333
> 
> 标签：jsp, jsp-tags, jspinclude

嗨，我有一个 Jsp 页面，我想在我的另一个 jsp 页面中调用该 jsp 页面。例如我有 includefile.jsp 页面

```
 <html>
<body>
    <b><font color='red'> Hello World</font></b><br>
    <b><font color='red'> HTML file is included in JSP page<font></b>
</body>
</html> 
```

我有 include.jsp 页面，我想在其中调用第一个 jsp

```
<html>
<body>
<%@ include file='includedFile.jsp' %>
</body>
</html> 
```

但这段代码不起作用。如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-21T20:47:54.797

在您的 include.jsp 页面中

```
<html>
<body>
<form action = "includeFile.jsp">
<input type="submit" value="open other jsp">
</form>
</body>
</html> 
```

**确保将两个 JSP 文件放在同一个文件夹中。

# java - 将 JTabbedPane 添加到 JTabbedPane 错误

> ID：15196309
> 
> 赞同：0
> 
> 时间：2013-03-04T07:08:54.350
> 
> 标签：java, swing, nullpointerexception, jtabbedpane, absolutelayout

收到此错误：

> Project.reportpane.addComponent(reportpane.java:69) 的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常

我无法将 rptinvestment tabbedPane 添加到面板 tabinvestment

公共类报告窗格扩展 JPanel {

```
JTabbedPane rpt;
JPanel tabcashflow;
JPanel tabinvestment;
JPanel tabexchangerates;
JTabbedPane rptinvestment;
JPanel tabofficial;
JPanel tabdem;
JPanel tabcommodities;

public reportpane() {

    rpt = new JTabbedPane();
    tabcashflow = new JPanel();
    tabinvestment = new JPanel();
    tabexchangerates = new JPanel();

    tabofficial = new JPanel();
    tabdem = new JPanel();
    tabcommodities = new JPanel();

    rpt.add("Cashflow", tabcashflow);
    rpt.add("Investement", tabinvestment);
    rpt.add("Exchange rates", tabexchangerates);
    rpt.setBackground(new Color(255, 255, 255));
    rpt.setFont(new Font("sansserif", Font.PLAIN, 14));
    rpt.setTabPlacement(javax.swing.JTabbedPane.TOP);
    rpt.setBorder(BorderFactory.createEmptyBorder());
    rpt.setSize(750, 500);

    rptinvestment = new JTabbedPane();
    rptinvestment.add("Official", tabofficial);
    rptinvestment.add("DEM", tabdem);
    rptinvestment.add("Commodities", tabcommodities);
    rptinvestment.setBackground(new Color(255, 255, 255));
    rptinvestment.setFont(new Font("sansserif", Font.PLAIN, 14));
    rptinvestment.setTabPlacement(JTabbedPane.TOP);
    rptinvestment.setBorder(BorderFactory.createEmptyBorder());
    rptinvestment.setSize(750, 500);

    addComponent(tabinvestment, rptinvestment, 0, 0, 675, 570);
    addComponent(this, rpt, 10, 10, 675, 570);

    this.setLayout(new BorderLayout());
    this.setBackground(Color.WHITE);
    this.setBorder(null);
    this.revalidate();
    this.repaint();

}

public void addComponent(Container container, Component c, int x, int y, int width, int height) {
    c.setBounds(x, y, width, height);
    container.add(c);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:16:27.880

您永远不会初始化 tabinvestment。您将其声明为实例变量，但您从未在构造函数中对其进行初始化。在某些时候，您需要调用`JTabbedPane tabinvestment = new JTabbedPane()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:30:36.437

您尝试使用被布局管理器覆盖的绝对定位添加组件

JTabbedPane 使用自己的布局逻辑，除非您真的创建过自己的 UI 类，否则无法更改。

同样，您已将框架布局管理器设置为 BorderLayout，这将覆盖可能已设置的任何定位值（之前为其他）

# mysql - IS NULL 未在 MYSQL 列中找到所有空值

> ID：15196311
> 
> 赞同：0
> 
> 时间：2013-03-04T07:08:57.740
> 
> 标签：mysql, null

```
UPDATE student as s
LEFT JOIN takes as t ON s.ID = t.ID
LEFT JOIN course as c ON t.course_id = c.course_id
SET s.tot_cred = s.tot_cred - COALESCE(c.credits, 0)
WHERE t.grade = 'F'
OR
t.grade IS NULL 
```

我试图通过减去学生失败的任何课程的学分值来更新学生中的 tot_cred，成绩关系 = 'F'，或当前正在学习，成绩关系为空。

上述查询适用于“接受”关系中的单个“F”等级。但是，它仅适用于成绩列中“接受”关系中的 4 个 NULL 值之一。

对 SQL 来说很新，我觉得查询中的某些内容只是在寻找第一个 NULL 值，而不是全部。

表：

```
mysql> select ID, tot_cred
    -> from student;
+-------+----------+
| ID    | tot_cred |
+-------+----------+
| 00128 |      102 |
| 12345 |       32 |
| 19991 |       80 |
| 23121 |      110 |
| 44553 |       56 |
| 45678 |       38 |
| 54321 |       54 |
| 55739 |       38 |
| 70557 |        0 |
| 76543 |       58 |
| 76653 |       60 |
| 98765 |       98 |
| 98988 |      112 |
+-------+----------+ 
```

如果对应的等级是F或NULL我想在这里更改tot_cred

```
mysql> select ID, course_id, grade
    -> from takes
    -> order by grade;
+-------+-----------+-------+
| ID    | course_id | grade |
+-------+-----------+-------+
| 76543 | CS-001    | NULL  |
| 54321 | CS-001    | NULL  |
| 12345 | CS-001    | NULL  |
| 98988 | BIO-301   | NULL  |
| 98988 | BIO-101   | A     |
| 76543 | CS-319    | A     |
| 76543 | CS-101    | A     |
| 00128 | CS-101    | A     |
| 12345 | CS-190    | A     |
| 12345 | CS-315    | A     |
| 54321 | CS-101    | A-    |
| 55739 | MU-199    | A-    |
| 45678 | CS-319    | B     |
| 19991 | HIS-351   | B     |
| 98765 | CS-315    | B     |
| 45678 | CS-101    | B+    |
| 54321 | CS-190    | B+    |
| 44553 | PHY-101   | B-    |
| 12345 | CS-101    | C     |
| 76653 | EE-181    | C     |
| 23121 | FIN-201   | C+    |
| 98765 | CS-101    | C-    |
| 45678 | CS-101    | F     |
+-------+-----------+-------+ 
```

这里是等级所在。有 4 个 NULL 值和 1 个 F。

```
mysql> select course_id, credits
    -> from course;
+-----------+---------+
| course_id | credits |
+-----------+---------+
| BIO-101   |       4 |
| BIO-301   |       4 |
| CS-101    |       4 |
| CS-190    |       4 |
| CS-315    |       3 |
| CS-319    |       3 |
| CS-347    |       3 |
| EE-181    |       3 |
| FIN-201   |       3 |
| HIS-351   |       3 |
| MU-199    |       3 |
| PHY-101   |       4 |
+-----------+---------+ 
```

这是我从中获得学分的地方。

刚刚意识到其中 3 个 NULL 值来自实验室中的上一个问题。这些条目不会出现在课程关系中。我的问题解决了。对于所有浪费的时间，我感到非常抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:16:29.143

尝试将其更改为：

```
UPDATE student as s
INNER JOIN takes as t ON s.ID = t.ID 
INNER JOIN course as c ON t.course_id = c.course_id
SET s.tot_cred = s.tot_cred - COALESCE(c.credits, 0)
WHERE t.grade = 'F'
OR
t.grade IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:22:16.063

检查是否要替换为 INNER JOIN 而不是 LEFT JOIN，因为您可能只想更新那些作为匹配记录的记录。

```
UPDATE student s
LEFT JOIN takes as t ON s.ID = t.ID and t.grade = 'F' OR t.grade is NULL
LEFT JOIN course as c ON t.course_id = c.course_id
SET tot_cred = tot_cred - COALESCE(c.credits, 0); 
```

[在这里](http://www.sqlfiddle.com/#!2/6d1bd)检查小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:42:58.033

我没有意识到课程关系中没有表示 3 个 NULL 值。这个查询工作得很好，很抱歉浪费了所有时间。

# django - Django 管理员：覆盖删除方法

> ID：15196313
> 
> 赞同：28
> 
> 时间：2013-03-04T07:09:05.863
> 
> 标签：django, django-admin

我有 admin.py 如下：

```
 class profilesAdmin(admin.ModelAdmin):
     list_display = ["type","username","domain_name"] 
```

现在我想在删除对象之前执行一些操作：

```
 class profilesAdmin(admin.ModelAdmin):
     list_display = ["type","username","domain_name"]

     @receiver(pre_delete, sender=profile)
     def _profile_delete(sender, instance, **kwargs):
        filename=object.profile_name+".xml"
        os.remove(os.path.join(object.type,filename)) 
```

如果我使用这样的删除信号方法，我会收到一个错误，说`self`应该是第一个参数。

如何修改上述功能？
我想检索被删除对象的 profile_name。如何才能做到这一点？

我还尝试了覆盖 delete_model 方法：

```
def delete_model(self, request, object):
    filename=object.profile_name+".xml"
    os.remove(os.path.join(object.type,filename))
    object.delete() 
```

但是，如果必须一次删除多个对象，则此方法不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2019-05-16T09:44:44.380

您可以使用来自[Django 2.1的](https://docs.djangoproject.com/en/2.1/)[delete_queryset](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_queryset)用于批量删除对象，使用[delete_model](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_model)用于单次删除。这两种方法都会在删除对象之前处理一些事情。

# ModelAdmin.delete_queryset（请求，查询集）

* * *

这是[Django 2.1](https://docs.djangoproject.com/en/2.1/)[发行](https://docs.djangoproject.com/en/2.1/releases/2.1/#django-contrib-admin)说明中关于[delete_queryset](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_queryset)的解释。

> 为 delete_queryset() 方法提供了 HttpRequest 和要删除的对象的 QuerySet。重写此方法，自定义“删除选定对象”的删除过程</p>

我们来看看[delete_queryset](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_queryset)是做什么的，可以覆盖admin。[ModelAdmin](https://docs.djangoproject.com/en/2.2/ref/contrib/admin/#django.contrib.admin.ModelAdmin)类以这种方式通过包含[delete_queryset](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_queryset)函数。在这里，您将获得对象列表，`queryset.delete()`意味着一次删除所有对象，或者您可以添加一个循环来逐个删除。

```
def delete_queryset(self, request, queryset):
    print('==========================delete_queryset==========================')
    print(queryset)

    """
    you can do anything here BEFORE deleting the object(s)
    """

    queryset.delete()

    """
    you can do anything here AFTER deleting the object(s)
    """

    print('==========================delete_queryset==========================') 
```

所以我要从“选择窗口”中删除 5 个对象，这就是这 5 个对象。

[![删除 5 个对象](../Images/ce69dd320fcebd66f7186d66f318adf1.png)](https://i.stack.imgur.com/ZMmSI.png)

然后你会像这样重定向到确认页面，

[![将删除这 5 个对象](../Images/facb707322a781694791aa6f26697b4f.png)](https://i.stack.imgur.com/uBzRP.png)

请记住“是的，我确定”按钮，稍后我会解释它。当您单击该按钮时，您将在删除这 5 个对象后看到下图。

[![成功删除 5 个对象](../Images/d483e486653b3d9c6dc5f8e27f98c26e.png)](https://i.stack.imgur.com/BM5ly.png)

这是终端输出，

[![这 5 个对象的终端输出](../Images/4db29f86588b2bba7c44eee5d722552e.png)](https://i.stack.imgur.com/FjvQ7.png)

因此，您将获得这 5 个对象作为 QuerySet 列表，在删除之前，您可以在评论区做任何您想做的事情。

# ModelAdmin.delete_model(request, obj)

* * *

这是关于[delete_model](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_model)的解释。

> delete_model 方法被赋予了 HttpRequest 和一个模型实例。覆盖此方法允许执行删除前或删除后操作。调用 super().delete_model() 以使用 Model.delete() 删除对象。

我们看看[delete_model](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_model)做了什么，可以覆盖admin。[ModelAdmin](https://docs.djangoproject.com/en/2.2/ref/contrib/admin/#django.contrib.admin.ModelAdmin)类以这种方式通过包含[delete_model](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_model)函数。

```
actions = ['delete_model']

def delete_model(self, request, obj):
    print('============================delete_model============================')
    print(obj)

    """
    you can do anything here BEFORE deleting the object
    """

    obj.delete()

    """
    you can do anything here AFTER deleting the object
    """

    print('============================delete_model============================') 
```

我只需单击我的第 6 个对象即可从“更改窗口”中删除。

[![从中删除 1 个对象](../Images/774e02130a3bf38aa48711b2d0cca5d7.png)](https://i.stack.imgur.com/mruW4.png)

还有另一个删除按钮，当您单击它时，您会看到我们之前看到的窗口。

[![将删除那 1 个对象](../Images/865e9ee45b1cd3caa2dba38445b60fa9.png)](https://i.stack.imgur.com/ZvBRd.png)

单击“是，我确定”按钮删除单个对象。您将看到以下窗口，其中包含有关已删除对象的通知。

[![成功删除 1 个对象](../Images/84b0e29cc95d3bd517962580c4199b6c.png)](https://i.stack.imgur.com/IfuRJ.png)

这是终端输出，

[![那些 1 个对象的终端输出](../Images/261d70ab5784f302ce87b25eb164d7e6.png)](https://i.stack.imgur.com/0uoBy.png)

因此，您将获得选定的对象作为单个 QuerySet 并且在删除之前，您可以在评论区域中做任何您想做的事情。

* * *

最后的**结论是，您可以使用**[delete_queryset](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_queryset)和[delete_model](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_model)在 Django 管理站点中单击“选择窗口”或“更改窗口”中的“是的，我确定”按钮来处理删除事件。这样我们就不需要处理像[django.db.models.signals.pre_delete](https://docs.djangoproject.com/en/2.1/ref/signals/#django.db.models.signals.pre_delete)或[django.db.models.signals.post_delete](https://docs.djangoproject.com/en/2.1/ref/signals/#django.db.models.signals.post_delete)这样的信号了。

这是完整的代码，

```
from django.contrib import admin

from . import models

class AdminInfo(admin.ModelAdmin):
    model = models.AdminInfo
    actions = ['delete_model']

    def delete_queryset(self, request, queryset):
        print('========================delete_queryset========================')
        print(queryset)

        """
        you can do anything here BEFORE deleting the object(s)
        """

        queryset.delete()

        """
        you can do anything here AFTER deleting the object(s)
        """

        print('========================delete_queryset========================')

    def delete_model(self, request, obj):
        print('==========================delete_model==========================')
        print(obj)

        """
        you can do anything here BEFORE deleting the object
        """

        obj.delete()

        """
        you can do anything here AFTER deleting the object
        """

        print('==========================delete_model==========================')

admin.site.register(models.AdminInfo, AdminInfo) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-04T07:27:40.687

你用你的`delete_model`方法走在正确的轨道上。当 django 管理员一次对多个对象执行操作时，它使用[更新功能](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)。但是，正如您在文档中看到的，这些操作仅使用 SQL 在数据库级别执行。

您需要将您的`delete_model`方法添加为 django 管理员中的[自定义操作](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/)。

```
def delete_model(modeladmin, request, queryset):
    for obj in queryset:
        filename=obj.profile_name+".xml"
        os.remove(os.path.join(obj.type,filename))
        obj.delete() 
```

然后将您的功能添加到您的模型管理员 -

```
class profilesAdmin(admin.ModelAdmin):
    list_display = ["type","username","domain_name"]
    actions = [delete_model] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-03T15:35:50.057

主要问题是 Django 管理员的批量删除使用 SQL，而不是 instance.delete()，如其他地方所述。对于仅限管理员的解决方案，以下解决方案保留了 Django 管理员的“你真的要删除这些”插页式广告。

最通用的解决方案是覆盖模型管理器返回的查询集以拦截删除。

```
from django.contrib.admin.actions import delete_selected

class BulkDeleteMixin(object):
    class SafeDeleteQuerysetWrapper(object):
        def __init__(self, wrapped_queryset):
            self.wrapped_queryset = wrapped_queryset

        def _safe_delete(self):
            for obj in self.wrapped_queryset:
                obj.delete()

        def __getattr__(self, attr):
            if attr == 'delete':
                return self._safe_delete
            else:
                return getattr(self.wrapped_queryset, attr)

        def __iter__(self):
            for obj in self.wrapped_queryset:
                yield obj

        def __getitem__(self, index):
            return self.wrapped_queryset[index]

        def __len__(self):
            return len(self.wrapped_queryset)

    def get_actions(self, request):
        actions = super(BulkDeleteMixin, self).get_actions(request)
        actions['delete_selected'] = (BulkDeleteMixin.action_safe_bulk_delete, 'delete_selected', ugettext_lazy("Delete selected %(verbose_name_plural)s"))
        return actions

    def action_safe_bulk_delete(self, request, queryset):
        wrapped_queryset = BulkDeleteMixin.SafeDeleteQuerysetWrapper(queryset)
        return delete_selected(self, request, wrapped_queryset)

class SomeAdmin(BulkDeleteMixin, admin.ModelAdmin):
    ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T07:34:24.850

你的方法应该是

```
class profilesAdmin(admin.ModelAdmin):
    #...

    def _profile_delete(self, sender, instance, **kwargs):
        # do something

    def delete_model(self, request, object):
        # do something 
```

您应该在每个方法签名（通常称为`self`）中添加对当前对象的引用作为第一个参数。此外，delete_model 应该作为一种方法来实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-19T15:34:14.770

您尝试覆盖 delete_model 方法失败，因为当您删除 django 使用的多个对象时`QuerySet.delete()`，出于效率原因，您的模型`delete()`方法将不会被调用。

你可以在那里看到它[https://docs.djangoproject.com/en/1.9/ref/contrib/admin/actions/](https://docs.djangoproject.com/en/1.9/ref/contrib/admin/actions/)
观看开头的警告

管理员`delete_model()`与模型的`delete()` [https://github.com/django/django/blob/master/django/contrib/admin/options.py#L1005相同](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L1005)

所以当你删除多个对象时，你自定义的 delete 方法永远不会被调用。

你有两种方法。

1.自定义删除动作。
为每个选定项目调用 Model.delete() 的操作。

2.使用信号。
您可以单独使用信号，而不是在课堂内。

你也可以看这个问题[Django model: delete() not trigger](https://stackoverflow.com/questions/1471909/django-model-delete-not-triggered)

# python - 如何将阿拉伯语文本输入到我的 python 代码中？

> ID：15196321
> 
> 赞同：5
> 
> 时间：2013-03-04T07:09:46.163
> 
> 标签：python, unicode, encoding, utf-8

我的项目是用阿拉伯语识别正面或负面的情绪（情绪分析），为了完成这项任务，我使用了 NLTK 和 python，当我以阿拉伯语输入推文时发生错误

```
>>> pos_tweets = [(' أساند كل عون أمن شريف', 'positive'),
              ('ما أحلى الثورة التونسية', 'positive'),
              ('أجمل طفل في العالم', 'positive'),
              ('الشعب يحرس', 'positive'),
              ('ثورة شعبنا هي ثورة الكـــرامة وثـــورة الأحــــرار', 'positive')]
Unsupported characters in input 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:20:46.263

您的问题来自 IDLE shell。AFAIK IDLE 在交互模式下不接受 UTF-8 输入。

我建议您使用其他（和更好的）shell，例如[DreamPie](http://www.dreampie.org/)或[PythonWin](http://sourceforge.net/projects/pywin32/files/pywin32/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T03:08:14.407

我通常会做一个简单的 hack 来输入`UTF-8`我的 python 代码。我不知道它为什么起作用，但它接受 unicode 字符串并在我添加这些行后顺利运行脚本：

```
#! /usr/local/bin/python  -*- coding: UTF-8 -*-

pos_tweets = [(u' أساند كل عون أمن شريف', 'positive'), 
(u'ما أحلى الثورة التونسية', 'positive'), 
(u'أجمل طفل في العالم', 'positive'), 
(u'الشعب يحرس', 'positive'), 
(u'ثورة شعبنا هي ثورة الكـــرامة وثـــورة الأحــــرار', 'positive')] 

for i in pos_tweets:
  print i[0], i[1] 
```

# hibernate - 在条件中获取 UniqueResult

> ID：15196322
> 
> 赞同：0
> 
> 时间：2013-03-04T07:09:51.373
> 
> 标签：hibernate, criteria

我正在使用标准查询。但是我的以下标准不起作用……</p>

```
Criteria criteria = session.createCriteria(AgencyDetail.class,”AgencyDetail”)
.add(Restrictions.eq(“AgencyDetail.agencyId”, agencyId)).add(Restrictions.eq(“AgencyDetail.active”, ‘Y’));
agencyDetail = (AgencyDetail)criteria.uniqueResult();
agencyId = agencyDetail.getAgencyId(); 
```

我可以得到标准对象。但错误似乎在`criteria.uniqueResult();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:56:31.980

您正在走一条复杂的路，除了实体类的关联之外，无需为您找到的实体类定义别名。你试试这个，它会工作：

```
Criteria criteria = session.createCriteria(AgencyDetail.class)
  .add(Restrictions.eq("agencyId", agencyId))
  .add(Restrictions.eq("active", 'Y'));
agencyDetail = (AgencyDetail)criteria.uniqueResult();
agencyId = agencyDetail.getAgencyId(); 
```

# android - 我们如何在较低版本的android中实现AAR

> ID：15196327
> 
> 赞同：0
> 
> 时间：2013-03-04T07:10:12.467
> 
> 标签：android, nfc, ndef, android-applicationrecord

我正在通过[AAR](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#aar)了解如果未安装应用程序，我们如何重定向到 Play 商店。它工作正常。根据该文件，它说 AAR 是在 Android 4.0（API 级别 14）中引入的。我什至将我的 android 目标版本更改为 2.3 并且**`createApplicationRecord`**方法不受支持。我如何在较低版本中实现 AAR 类似的功能。非常感谢任何类型的参考或示例代码或链接或建议。

# html - 大规模查看网页时 Google Chrome 中出现奇怪的视觉伪影

> ID：15196328
> 
> 赞同：0
> 
> 时间：2013-03-04T07:10:29.240
> 
> 标签：html, google-chrome, css

有人能建议我为什么用 Google Chrome 浏览器得到这个奇怪的视觉工件吗？

我有以下 HTML 元素：

```
<div class="subMenuSection">
<div class="subMenuGenTabs">
    <a class="subMenuButtonActv" href="123.htm">
    <span id="MainContent_LabelDownloads">Downloads</span></a>
</div>
</div> 
```

这个CSS：

```
.subMenuGenTabs
{
    border: none;
    padding: 0 10px 0 0;
    margin: 0;
    float: left;
    display: inline-block;
}
.subMenuSection
{
    border: none;
    padding: 0;
    margin: 24px 0 20px 0;
}

a.subMenuButtonActv
{
    background: transparent url('http://i150.photobucket.com/albums/s99/dc2000_bucket/btnsmgrn-rgt-on_zpsd38b307d.png') no-repeat scroll bottom right;
    color: #FFFFFF;
    display: block;
    float: left;
    font-family: Trebuchet MS,Sans-Serif;
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    height: 30px;
    margin-right: 2px;
    margin-bottom: 2px;
    padding-right: 18px;
    text-decoration: none;
    white-space: nowrap;
}
a.subMenuButtonActv span {
    background: transparent url('http://i150.photobucket.com/albums/s99/dc2000_bucket/btnsmgrn-lft-on_zps2896d5d5.png') no-repeat scroll bottom left;
    display: block;
    line-height: 20px;
    padding: 5px 0 5px 18px;
}
a.subMenuButtonActv:hover
{
    background-position: top right;
    outline: none; /* hide dotted outline in Firefox */
}
a.subMenuButtonActv:hover span {
    background-position: top left;
}
a.subMenuButtonActv:active
{
    background-position: top right;
    color: #000000;
    outline: none; /* hide dotted outline in Firefox */
}
a.subMenuButtonActv span:active {
    color: #000000;
    background-position: top left;
} 
```

在 100% 缩放时看起来像这样：

这就是它在 Chrome 中放大 110% 时的样子：

PS1。请注意，这条“垂直线”不会出现在 IE 或 Firefox 中。

PS2。在实际的 CSS 中，图像的 URL 定义如下：

```
background: transparent url('../Graphics/btnsmgrn-rgt-on_zpsd38b307d.png') no-repeat scroll bottom right; 
```

PS3。上面的示例在 JS Fiddle 中似乎可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:46:58.400

缩放是网络浏览器中一个相对较新的功能。您的网站设计不应该依赖它。另一方面，当然也不应该被它破坏。

一个（非常）快速的解决方法可能是：

```
a.submenubuttonactv span {
  ...
  position: relative;
  right: -1;
} 
```

但是，为了使其更稳定，可能会更改您的按钮设计。您可以查看网络上的其他按钮以获取灵感，例如[此处](http://inspirationfeed.com/inspiration/50-examples-of-pixel-perfect-button-design/)。

# android - android 覆盖创建失败。覆盖已在使用错误导致空白相机预览

> ID：15196329
> 
> 赞同：0
> 
> 时间：2013-03-04T07:10:33.277
> 
> 标签：android, android-camera, surfaceview, android-overlay

我正在使用 android SurfaceView 在我的活动中显示相机预览。

在移动到正在播放任何视频的任何其他应用程序并返回时，预览是空白的。我正在使用安卓 2.3.3。当我打开 logcat 时，它显示以下内容

```
E/SEC_Overlay(  107): Error - overlays already in use
W/CameraService(   76): Overlay create failed - retrying
E/SEC_Overlay(  107): Error - overlays already in use
W/CameraService(   76): Overlay create failed - retrying
E/SEC_Overlay(  107): Error - overlays already in use
W/CameraService(   76): Overlay create failed - retrying
E/SEC_Overlay(  107): Error - overlays already in use
W/CameraService(   76): Overlay create failed - retrying
E/SEC_Overlay(  107): Error - overlays already in use
...
E/SEC_Overlay(  107): Error - overlays already in use
W/CameraService(   76): Overlay create failed - retrying
E/SEC_Overlay(  107): Error - overlays already in use
W/CameraService(   76): Overlay create failed - retrying
E/CameraService(   76): Overlay Creation Failed!
D/AndroidRuntime( 1618): Shutting down VM
W/dalvikvm( 1618): threadid=1: thread exiting with uncaught exception (group=0x40015560)

E/AndroidRuntime( 1618): FATAL EXCEPTION: main
E/AndroidRuntime( 1618): java.lang.RuntimeException: startPreview failed
E/AndroidRuntime( 1618):    at android.hardware.Camera.startPreview(Native Method)
E/AndroidRuntime( 1618):    at com.android.myapp.MyActivity.startCapturing(MyActivity.java:216)
E/AndroidRuntime( 1618):    at com.android.myapp.MyActivity.surfaceChanged(MyActivity.java:328)
E/AndroidRuntime( 1618):    at android.view.SurfaceView.updateWindow(SurfaceView.java:549)
E/AndroidRuntime( 1618):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
E/AndroidRuntime( 1618):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
E/AndroidRuntime( 1618):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
E/AndroidRuntime( 1618):    at android.view.View.draw(View.java:6883)
E/AndroidRuntime( 1618):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
...
E/AndroidRuntime( 1618):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
E/AndroidRuntime( 1618):    at android.view.View.draw(View.java:6883)
E/AndroidRuntime( 1618):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
E/AndroidRuntime( 1618):    at     com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
E/AndroidRuntime( 1618):    at android.view.ViewRoot.draw(ViewRoot.java:1522)
E/AndroidRuntime( 1618):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
E/AndroidRuntime( 1618):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
E/AndroidRuntime( 1618):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1618):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 1618):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime( 1618):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1618):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 1618):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 1618):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 1618):    at dalvik.system.NativeStart.main(Native Method) 
```

我使用的代码如下：

```
 Camera mCamera;
    SurfaceView mPreview;

    @Override
protected void onResume() {
    // TODO Auto-generated method stub      
    try{
        if(mCamera!=null){
            mCamera.lock();
            mCamera.release();
            mCamera=null;
    }

    mPreview=((SurfaceView) findViewById(R.id.camera_preview));         
        mPreview.getHolder().addCallback(this);
        mPreview.getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);          
    }catch(Exception e){
       e.printStackTrace();
    }

    try{
        mCamera = Camera.open();
    }catch(Exception e){
      e.printStackTrace();          
    }

    super.onResume();
}

    @Override
protected void onPause() {
    // TODO Auto-generated method stub      
    super.onPause();
    try{
        if(mCamera == null){
        return;
    }
    mCamera.lock();
    mCamera.release();
    mCamera = null;
    }catch(Exception e){
            e.printStackTrace();
    }       

}

    @Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    try{
        if(mCamera!=null){              
            Camera.Parameters params = mCamera.getParameters();         
            List<Camera.Size> sizes = params.getSupportedPreviewSizes();
            Camera.Size selected = sizes.get(0);
            params.setPreviewSize(selected.width,selected.height);
            mCamera.setParameters(params);          
            mCamera.setDisplayOrientation(90);              
            mCamera.startPreview(); 
            Log.v("SURF CHANGED","changed");                
        }
    }catch (Exception e) {
        e.printStackTrace();            
    }
}

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            mCamera.setPreviewDisplay(mPreview.getHolder());
            Log.v("SURF CREATED","created");                
        } catch (Exception e) {
            e.printStackTrace();               
        }
    }

@Override
public void surfaceDestroyed(SurfaceHolder holder) {        
    Log.i("PREVIEW","surfaceDestroyed");
} 
```

[( https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ylIgXIKKGo8](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ylIgXIKKGo8) )报告了同样的问题。但没有提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:15:26.300

```
 mCamera.lock();
 mCamera.release(); 
```

这两个功能不能像这样使用你必须像这样使用它们

```
 mCamera.lock();
 ... your camera setting code etc or any operation goes here

 mCamera.release(); 
```

这是使用[相机表面视图的示例](https://stackoverflow.com/questions/12273976/camera-tutoial-for-android-using-surfaceview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:58:52.737

您没有在 surfaceChanged 函数中调用 setPreviewDisplay() ；这意味着您在返回应用程序时可能没有正确设置显示。

在调用 startPreview 之前，尝试将 setPreviewDisplay() 调用移动到 surfaceChanged；你可以忽略surfaceCreated。

您也不需要在 release() 之前在相机实例上调用 lock()，尽管它也没有有害影响。

# .net - 为什么我的场景大纲没有在 SpecFlow 中被调用？

> ID：15196330
> 
> 赞同：4
> 
> 时间：2013-03-04T07:10:38.940
> 
> 标签：.net, specflow

我有一个场景大纲如下：

```
Scenario Outline: Create Request Custom Export With XML, Comma Delimited, Tab Delimited 
    Given a user has entered the following data
    | Custom Export     | File Format       | Vendor                 |
    |  Custom Export 1  | <File  Format>    | 001_TestsVendor_Rp     |    
    When I save
    Examples: 
    | File Format     |
    | XML             |
    | Comma Delimited |
    | Tab Delimited   | 
```

但是当我运行场景时，没有调用场景大纲。但是正常情况下运行良好。代码中是否需要进行任何修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:59:18.370

不是因为您的场景大纲列`<Format>`与您的示例列不匹配`File Format`吗？

我还会质疑您是否真的需要在大纲中使用表格，如果您使用它可能会更好读

```
Given we are using a custom export of type Custom Export 1
And a <Format> file format
And vendor 001_TestsVendor_Rp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:02:37.573

你在使用 Specflow Visual Studio 插件吗？
您是否使用正则表达式属性作为方法绑定？
您可以发布您的方法绑定 Given/When 语法吗？

你能看到 Specflow 已经选择了你的功能文件中的步骤，它们应该是黑色的。如果它们是紫色的，则找不到相关的步骤。

如果您一直在重构，请关闭并再次打开项目。我遇到了 Specflow 插件的问题，它在重构后无法获取新方法。

我还没有深入了解原因，但这是一个快速解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:22:03.093

感谢您的宝贵回复。我通过安装**Resharper**软件解决了我的问题。我不知道它如何帮助运行场景大纲。但这让我呼吸更轻松。如果有人遇到此类问题，请尝试使用**Resharper**。

谢谢。

# c# - 记录网络访问

> ID：15196334
> 
> 赞同：0
> 
> 时间：2013-03-04T07:11:04.047
> 
> 标签：c#, .net, windows, service

我请求为我的程序创建某种网络日志记录，但我不知道该怎么做。我在网上搜索，但没有找到任何有用的东西，而且我不熟悉网络，所以我需要问一下。

接下来我真正需要的是：我创建了托管在 Windows Server 2008 R2 上的 silverlight 应用程序。我正在开发 Windows 服务（将安装在该服务器上，服务是使用 .net Framework 4.5 在 C# 中创建的），它的任务是控制从网络到一个 .xml 配置文件的访问。该文件使用 Silverlight 应用程序。所以我需要的是下一个信息： 访问（谁打开我的 silverlight 页面，从哪个地址） 请求（谁想要文件，从哪个地址） 响应（文件正在发送到客户端或类似的东西，从哪个地址） 确认（文件是成功发送给客户）

欢迎任何建议或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:16:24.350

只需在 IIS 上托管文件（或使用 ASP.Net 服务）。默认 IIS 日志记录似乎几乎完全符合您的要求。

# wpf - 如何从另一个页面更改页面标签？

> ID：15196335
> 
> 赞同：1
> 
> 时间：2013-03-04T07:11:08.413
> 
> 标签：wpf, vb.net, label

更新：我有 MainWindow、UC1 和 UC2。主窗口包含 frame1 和 UCbutton，而不是将 UC1 显示到框架。

主窗口：

```
<Frame Height="200" HorizontalAlignment="Left" Margin="10,10,0,0" Name="Frame1" VerticalAlignment="Top" Width="400" />
<Button Content="Show Usercontrol" Height="23" HorizontalAlignment="Left" Margin="12,216,0,0" Name="SUbutton" VerticalAlignment="Top" Width="120" /> 
```

VB：

```
Private Sub SUbutton_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles SUbutton.Click
    Dim uc1 As New UC1
    Frame1.Navigate(uc1)
End Sub 
```

然后在打开 UC1 时，由文本框和按钮组成

UC1：

```
<TextBlock Height="26" HorizontalAlignment="Left" Margin="12,45,0,0" Text="Page1" VerticalAlignment="Top" Width="40" />
<TextBox Height="23" HorizontalAlignment="Left" Margin="12,77,0,0" Name="TextBox1" VerticalAlignment="Top" Width="120" />
<Button Content="Show Usercontrol2" Height="23" HorizontalAlignment="Left" Margin="12,106,0,0" Name="SU2button" VerticalAlignment="Top" Width="120" /> 
```

VB：

```
Private Sub SU2button_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles SU2button.Click
    Dim mainWindow = GetParentWindow(Me)
    If mainWindow IsNot Nothing Then
        mainWindow.Frame1.Navigate(New UC2())
    End If
End Sub
Private Shared Function GetParentWindow(ByVal obj As DependencyObject) As MainWindow
    While obj IsNot Nothing
        Dim mainWindow = TryCast(obj, MainWindow)
        If mainWindow IsNot Nothing Then
            Return mainWindow
        End If
        obj = VisualTreeHelper.GetParent(obj)
    End While
    Return Nothing
End Function 
```

我需要的是文本框中的文本将显示在 UC2 的标签中

UC2：

```
<TextBlock Height="31" HorizontalAlignment="Left" Margin="37,92,0,0" Name="hello" VerticalAlignment="Top" Width="220" /> 
```

我已经在导航到两页时获得了帮助，但我很难学习 Trycast 或 Directcast。:(希望你们能帮助我。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:28:55.680

尝试这个..

private void Button2_Click(object sender, RoutedEventArgs e) { var wnd = Window.GetWindow(this); ((StackOverflow.MainWindow)(wnd)).Label1.Content = "sadasd"; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:50:44.883

使用事件。

在您的子窗口 (Page1) 代码中创建一个如下所示的事件。

```
Public Event Textchanged(sender as object, text as String) 
```

在您的按钮上单击 page1 使用以下代码。

```
Private Sub Button2_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button2.Click
RaiseEvent Textchanged(Me, Textbox2.Text)
End Sub 
```

在您创建 Page1 时的主页面中，在 textchanged 事件上添加一个事件处理程序

```
Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
    Dim page1 As New Page1
    Addhandler page1.Textchanged, AddressOf Changetext
    Frame1.Navigate(page1)
End Sub

Private Sub ChangeText(sender as object, txt as String)
Label1.Content = txt
End Sub 
```

# mysql - codeigniter - 如果模型 mysql 查询失败，将 flashdata 发送回用户

> ID：15196338
> 
> 赞同：2
> 
> 时间：2013-03-04T07:11:14.520
> 
> 标签：mysql, codeigniter, model, mysql-error-1062

我的控制器正在调用模型更新函数：

```
function update_customer_records( $id, $data )
{
    $this->db->where( 'id', $id );
    $this->db->update( 'customers', $data );
} 
```

我只是在更新我的桌子。如果更新失败，例如重复客户名称 [唯一字段] 我想将 flashdata 发送回用户`$this->session->set_flashdata('dbaction', 'Update Failed, possible duplicate Customer Name. Please try again or contact the administrator');`

所以是这样的：

```
function update_customer_records( $id, $data )
{
    $this->db->where( 'id', $id );
    $this->db->update( 'customers', $data );

    if(update fails){
    $this->session->set_flashdata('dbaction', 'Update Failed, possible duplicate Customer. Please try again or contact the administrator');
    redirect('masterdata/create_customer', 'refresh');
    } else
    {
    $this->session->set_flashdata('dbaction', 'Update Successful');
    redirect('masterdata/create_customer', 'refresh');  
    }
} 
```

这是可以接受的还是有更好的方法来处理这个问题？

预先感谢，一如既往。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:32:17.840

你可以用这个。如果受更新影响的行大于 1，则返回 true，否则返回 false

```
function update_customer_records( $id, $data)
{
    $this->db->where( 'id', $id );
    $this->db->update( 'customers', $data );

     //if affected rows > 0 reutrn true else false
    return $this->db->affected_rows() > 0 ? TRUE : FALSE;
} 
```

然后在您的控制器上，您可以将其用作

```
if($this->model->update_customer_records() == FALSE)
{
   // set the flashdata here

}else{

  // do what you want if update is successful
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:31:01.493

您可以在模型中使用它：

```
function update_customer_records( $id, $data ) {    
            $this->db->where( 'id', $id );
            if($this->db->update( 'customers', $data ))
              return true;
            else
              return false;
        }

function is_exist($customer_name)
    {
        $query = $this->db->get_where($customers, array('customer_name' => $customer_name), 1);
        if ($query->num_rows() > 0)
            return false;
        else
           return true; 
    } 
```

并在控制器中使用：

```
if($this->model->is_exist($customer_name)
    {
        $this->db->update_customer_records( $id, $data ); 
        $this->session->set_flashdata('dbaction', 'Update Successful');
    }
else
   {
       $this->session->set_flashdata('dbaction', 'Update Failed, possible duplicate  
       Customer. Please try again or contact the administrator');     
    }
    redirect('masterdata/create_customer', 'refresh'); 
```

# javascript - 不要这样折叠我

> ID：15196342
> 
> 赞同：1
> 
> 时间：2013-03-04T07:11:28.803
> 
> 标签：javascript, vim, folding

**折叠 3** below 折叠在函数末尾*下方*的行中。如何以预期的方式进行折叠（*以保留函数末尾下方的行*）：

代码 ：

```
(function() {
        var w = window; // <-- FOLD 1 pressed HERE
        function pqdoitall () {
                // insertScript
                // fr2window 
                // pqinsert2windowDoc
                // pqinsert2window
                // runit
                //runit(); // <-- FOLD 2 pressed HERE
        } // pqdoitall
        w.addEventListener("load",pqtdoitall);
        pqtdoitall(); // <-- FOLD 3 pressed HERE
})(); 
```

折叠 1 结果：

```
(function() {---------------------------------------------------------------------------- 
```

折叠 2 结果：

```
(function() {
        var w = window;
  function pqdoitall () {---------------------------------------------------------------- 
```

折叠 3 结果：

```
(function() {
        var w = window;
  function pqdoitall () {---------------------------------------------------------------- 
```

这很烦人，因为我想在折叠它时看到函数终止大括号下方的两行。

~/.vimrc 中的 Foldmethod 行（根据[此答案](https://stackoverflow.com/a/4789615/907415)）：

```
set foldmethod=syntax
set foldlevelstart=1

let javaScript_fold=1         " JavaScript
let perl_fold=1               " Perl
let php_folding=1             " PHP
let r_syntax_folding=1        " R
let ruby_fold=1               " Ruby
let sh_fold_enabled=1         " sh
let vimsyn_folding='af'       " Vim script
let xml_syntax_folding=1      " XML 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:44:55.063

好的。虽然这不是您问题的*真正*答案，但我发现`syntax`折叠方法比“笨蛋”`indent`方法更令人失望，后者在不同语言中产生更连贯的结果。

`set foldmethod=indent`就是我用的。

# jquery - jquery 事件仅在第二次单击时触发 - 为什么？

> ID：15196344
> 
> 赞同：0
> 
> 时间：2013-03-04T07:11:34.380
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一个用户页面，用户在其中列出了他的关注者和他关注的用户。如果他点击一个按钮，它会显示关注者。如果他点击另一个按钮，它会显示他关注的用户。

我不明白 jquery 事件第二次而不是第一次触发。我在 show.html.erb 中设置了用户“关注”列表。这是匹配的 show.js.erb：

```
$(function(){
    $("#trusts_list_button").click(function(){
        $("#relationship_list").html("<%= escape_javascript(render 'follows') %>");
    });
    $("#trusted_list_button").click(function(){
        $("#relationship_list").html("<%= escape_javascript(render 'followers') %>");
    });
}); 
```

这是展示视图：

```
<%= @user.name %>
<%= link_to "Add friends", facebook_friends_user_path %>

<table><tr><td>
<%= link_to "Trusts", "#follows", :id => "trusts_list_button", :remote => true%></td>
<td><%= link_to "Trusted by", "#followers" , :id => "trusted_list_button", :remote => true %></td></tr></table>
<div id = "relationship_list"><%= render 'follows' %></div> 
```

第一次单击后，两个按钮都可以正常工作。但是第一次初步点击真的让我失望。如果有任何帮助，我将不胜感激；这不是我第一次遇到 JQuery 问题，而且对于解决这种简单的问题我真的很茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:35:29.713

作为一个快速修复试试这个：

```
$(function(){
    $("#trusts_list_button").click(function(){
        $("#relationship_list").html("<%= escape_javascript(render 'follows') %>");
    }).click();
    $("#trusted_list_button").click(function(){
        $("#relationship_list").html("<%= escape_javascript(render 'followers') %>");
    }).click();
}); 
```

发生时`doc ready`，它第一次点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:21:52.910

第一件事.. ID 应该始终是唯一的.. 你有两个具有相同 id 的元素.. 所以 chnage

```
...
<%= link_to "Trusts", "#follows", :id => "trusts_list_follows_button", :remote => true%></td>
<td><%= link_to "Trusted by", "#followers" , :id => "trusted_list_followers_button", :remote => true %>
.... 
```

然后为每个按钮调用你的点击事件

```
$(function(){
  $("#trusts_list_follows_button").click(function(){
    $("#relationship_list").html("<%= escape_javascript(render 'follows') %>");
  });
  $("#trusted_list_followers_button").click(function(){
    $("#relationship_list").html("<%= escape_javascript(render 'followers') %>");
  });
}); 
```

您在代码中遇到的问题是，单击事件是针对相同的按钮 .. 因为您的选择器是`$("#trusted_list_button")`. 这将选择`id=trusted_list_button`在您的情况下是两个按钮的按钮..因此单击事件仅针对第二个按钮触发...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T16:55:24.937

我最近遇到了这个问题，我确定克隆元素上存在一个事件 - 但我找不到或删除该事件（虽然我知道它在那里）...单击 1 - 无，单击 2 - 触发通常，单击 3 - 触发两次（有点）

我的解决方案是再次克隆特定的违规元素并使用克隆（这次没有克隆事件）来替换原始元素。

$(el).replaceWith($(el).clone());

# php - 如何在 CodeIgniter 中将 textarea 数据更改为文本文件并通过邮件发送

> ID：15196347
> 
> 赞同：2
> 
> 时间：2013-03-04T07:11:41.700
> 
> 标签：php, codeigniter

在我目前的项目中，对于职业部分，如果有人申请这份工作，我需要将申请人的数据（姓名、电子邮件、联系方式、简历、求职信）发送到管理邮件。我想将求职信文本区域数据更改为文本文件，然后仅作为邮件发送。我应该如何在 CodeIgniter 中或仅使用 php 中执行此操作？搜索相关但未找到。

感谢您的任何帮助/建议。

通过@Iraklis 答案后我当前的代码。

控制器

```
function form_submit(){
  $resume = $_FILES['field_name']['tmp_name'];
  $name = $this->input->post('name');
  $coverletter = $this->input->post('cover');
  $file_name = 'resume.txt';
  $data = file_put_contents($file_name, $coverletter);
 $this->load->library('email');
 $config['mailtype'] = 'html';
 $config['validate'] = TRUE;
 $this->email->initialize($config);
$this->email->from('some@example.com', 'xxx Technologies');
 $this->email->to($form->admin_email); 
                                $this->email->subject('Carrere');

$message = 'Name '.$name;
$message .='resume '.$data;
$this->email->message($message);

                                $this->email->send();
} 
```

现在形成我收到的邮件，我收到的简历为 29。我做错了什么？

当我使用 $this->email->attach() 作为文件附件时。我没有收到任何消息。邮件将是空白的。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T05:16:40.493

**要将您的文本区域“数据”保存到文件中，您可以使用以下方法。**

```
 //Your File name for Storage of the required Field Data
 $file = 'FILE_NAME.txt';

 //Open file in Overwrite Mode
 $fh = fopen($file,'w+');

 //Write the content of required field in to the file
 fwrite($fh,$this->input->post('YOUR_CUSTOM_FIELD'));
 fclose($fh); 
```

**最后，您可以使用 CI 电子邮件类附加文件**

```
 $this->email->attach($file); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T11:41:41.503

至于 $this->email->attach() 的解决方案，我发现不仅仅是

$this->email->attach()

实际上应该是

$this->email->attach($_SERVER['DOCUMENT_ROOT'] . 'path_to_file'.$file)

即文件的路径也应该给出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:34:08.100

对于发送电子邮件（包括附件），CI 有一个可以使用的电子邮件类：http: [//ellislab.com/codeigniter/user-guide/libraries/email.html](http://ellislab.com/codeigniter/user-guide/libraries/email.html)

要将文本区域“数据”保存到文本文件，您有多种选择。一种是以下：

```
$cvdata = $this->input->post('cvdata');

// do what you want with $cvdata

$file_name = 'coverletter.txt';
file_put_contents($file, $cvdata); 
```

# cordova - 如何为 Android 和 Iphone 使用相同日期选择器？

> ID：15196349
> 
> 赞同：0
> 
> 时间：2013-03-04T07:11:49.377
> 
> 标签：cordova, datepicker, phonegap-plugins

我正在使用 Phonegap Api 在 Android 和 Iphone 中开发应用程序。我的应用程序包含日期字段。所以我搜索了适用于 android 和 iphone 的日期选择器插件。我在此链接中找到了适用于 Android 的日期选择器插件。

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)

和 iPhone

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/DatePicker)

这里我的疑问是如何使用这两个来支持 Android 和 iPhone 中的日期选择器。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:24:44.467

在 Android 和 IOS 上使用 Mobi Scroll

# jquery - 如何同时切换 div 可见性和图像源？

> ID：15196350
> 
> 赞同：0
> 
> 时间：2013-03-04T07:11:50.347
> 
> 标签：jquery

我是 jquery 的新手，我在这个页面上苦苦挣扎：[http ://www.revolutionlasvegas.com/instructors2.php](http://www.revolutionlasvegas.com/instructors2.php)

我的 div 和 bios 切换得很好，但同时我希望点击的图像发生变化。当点击另一张图片时，该图片会发生变化，而当前图片将变回原来的样子。这似乎不应该是一件不寻常的事情，但我似乎无法找到或找出答案。

任何帮助将不胜感激！谢谢！

```
 <script>
        function showonlyone(thechosenone) {
             $('.bio').each(function(index) {
                  if ($(this).attr("id") == thechosenone) {
                       $(this).show(200);
                  }
                  else {
                       $(this).hide(600);
                  }
             });
         }
         </script>
        <div id="light_blue">
        <div class="randomordercontent group1"><a id="pic1" href="javascript:showonlyone('bio1');"><img src="images/instructors/thumb_damian.jpg" width="198" height="300" alt="" class="inst_thumbs"></a></div>
        <div class="randomordercontent group1"><a id="pic2" href="javascript:showonlyone('bio2');"><img src="images/instructors/thumb_martie.jpg" width="198" height="300" alt="" class="inst_thumbs"></a></div>
        <div class="randomordercontent group1"><a id="pic3" href="javascript:showonlyone('bio3');"><img src="images/instructors/thumb_ray.jpg" width="198" height="300" alt="" class="inst_thumbs"></a></div>
        <div class="randomordercontent group1"><a id="pic4" href="javascript:showonlyone('bio4');"><img src="images/instructors/thumb_debi.jpg" width="198" height="300" alt="" class="inst_thumbs"></a></div>
        <div class="randomordercontent group1"><a id="pic5" href="javascript:showonlyone('bio5');"><img src="images/instructors/thumb_stetson.jpg" width="198" height="300" alt="" class="inst_thumbs"></a></div>
        </div>

        <div class="bio" id="bio1" style="display: none"><h1 style="font-weight:bold">Damian Hill</h1></br></br></div>
        <div class="bio" id="bio2" style="display: none"><h1 style="font-weight:bold">Martie</h1></br></br></div>
        <div class="bio" id="bio3" style="display: none"><h1 style="font-weight:bold">Ray Chargualaf Jr</h1></br></br></div>
        <div class="bio" id="bio4" style="display: none"><h1 style="font-weight:bold">Debi Scaletta</h1></br></br></div>
        <div class="bio" id="bio5" style="display: none"><h1 style="font-weight:bold">Stetson</h1></br></br></div>

        <script type="text/javascript">
        randomordercontentdisplay.init()
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:25:06.633

```
you can save src of the image in temp variable and then restore on clicking any other image.. and do replace the image on anchor click....

    function showonlyone(thechosenone, ClickedAnchorID) {
    var temp;
    $('.bio').each(function(index) {
    if ($(this).attr("id") == thechosenone) {
    $(this).show(200);
    temp = $("#ClickedAnchorID").next('img').attr('href')}
    else {
    $(this).hide(600);
    $("#ClickedAnchorID").next('img').attr('href',temp)
    }
    });
    } 
```

# javascript - 如果单击提交按钮，则阻止执行 onblur 代码

> ID：15196352
> 
> 赞同：11
> 
> 时间：2013-03-04T07:12:10.713
> 
> 标签：javascript, jquery, onclick, onblur

通过下面的代码，我希望只有在 onblur 事件不是由于提交按钮上的“ONCLICK”引起的情况下才在元素 id="eg1" 的“ONBLUR”上“做某事”。

```
 $(document).ready(function() {  
     $('#eg1').blur(function() {
      if(!($("#SubmitBut").click())) {
             //do something
      }
     });
    }); 
```

例如：如果用户更改“eg1”文本字段的值并单击下一个文本字段，则必须运行 DO SOMETHING 代码，但如果用户更改“eg1”字段的值然后单击提交按钮，则 DO SOMETHING 代码不得运行。

这是正确的方法吗？请指导。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-04T07:37:35.460

`blur`一个元素的事件在另一个元素的事件之前触发`click`。所以一种方法是使用`mousedown`和`mouseup`事件来切换标志，因为一个元素的事件在另一个`mousedown`元素的事件之前触发`blur`。

```
$("#eg1").on("blur", function(e){
  if($("#submit").data("mouseDown") != true){
      alert("DO SOMETHING");
  }
});

$("#submit").on("mousedown", function(e){
    $("#submit").data("mouseDown", true);
  });

$("#submit").on("mouseup", function(e){
    $("#submit").data("mouseDown", false);
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:22:42.273

**更新：**

`$('input[type="submit"]').mousedown(test);`

看看这个小提琴[JSFiddle 来解决你的问题](http://jsfiddle.net/xYujL/2/)。使用控制台查看执行特定操作后触发和抑制的事件。

`click`您应该在执行或执行时禁止绑定到文本的事件处理程序`submit`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:33:51.893

```
A trick -

 $(document).ready(function() {  
var flag = false;
     $('#eg1').blur(function() {
flag = true;
      if(!($("#SubmitBut").click())) {
if(flag) 
   return false;            
 //do something
      }
     });
    }); 
```

# java - 引用分配是原子的，所以为什么要使用 AtomicReference

> ID：15196355
> 
> 赞同：28
> 
> 时间：2013-03-04T07:12:30.747
> 
> 标签：java, multithreading, concurrency

我对 AtomicReference 有一个简单的一般性问题。

如果引用分配在 java 中是原子的，为什么要使用 AtomicReference？

另外我想问一下在 64 位 VM 中引用分配是否是原子的？

我们是否需要 volatile 才能拥有原子的参考分配？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T12:14:48.203

> 如果引用分配在 java 中是原子的，为什么要使用 AtomicReference？

当创建新值的决策依赖于引用的先前值时，您需要它。例如，在实现一些类似 LinkedList 的数据结构时，您不想将头部设置为引用前一个节点的新节点。在读取前一个节点和将 head 设置为新节点之间的时间里，其他一些线程可能同时更新了 head 引用的值。如果我们的线程不知道这个变化，它就会丢失。

> 我们是否需要 volatile 才能拥有原子的参考分配？

操作本身将在执行它的 CPU 内核上以原子方式执行，但不能保证其他内核上的线程在下一次读取时会知道它。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-04T07:16:37.640

我之前的回答是不正确的，正如 juancn 的评论中所解释的那样：

> `Atomic*`这就是类和易失性访问之间的区别。仅在不会发生单词撕裂的意义上，引用分配是原子的，但没有可见性或重新排序保证。Java 保证所有原始类型和引用在这种受限意义上的原子写入，但不保证 long/double（尽管在 64 位 VM 中我认为它们总是原子的）。

**上一个答案**

它是必要的，主要用于`compareAndSet`和`getAndSet`方法。否则，您不能以原子方式执行此操作（需要 2 次操作）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-07T17:54:09.837

原因是即使引用是原子的，但它在非常狭义的意义上是原子的。

如果一个线程写入一个非易失性引用，则可以保证其他线程**将看到整个写入或根本看不到它**（没有字撕裂/垃圾）。

但在任何时候都不能保证**任何其他线程都会看到它，**也不能保证它们会以相同的顺序被看到。

An`AtomicReference`提供了更强大的保证（除了 CAS 操作），本质上它们的行为类似于 volatile：

*   Any writes that happened in thread A before a volatile write are visible in thread B after a subsequent volatile read of that variable
*   volatile operations cannot be reordered

# php - 优化条件语句（PHP 和 JavaScript）

> ID：15196356
> 
> 赞同：0
> 
> 时间：2013-03-04T07:12:33.057
> 
> 标签：php, javascript, stylesheet, conditional-statements

我一直在我的网站上使用我自己创建的两种类型的条件语句。我使用这些语句来检测浏览器并输出不同的样式表。（我知道有更好和更复杂的方法可以做到这一点，但这是无关紧要的。）如您所见，MSIE 8、9、10 等使用相同的样式表，但我不太确定如何对语句进行分组：

```
<?php
if (strStr(getEnv('HTTP_USER_AGENT'), 'Opera')) 
{ 
  echo '<link rel="stylesheet" href="http://www.example.com/nn_styles.css" type="text/css" media="screen">' . "\n" . '<style type="text/css">@import url("http://www.example.com/op11_styles.css");</style>' . "\n"; 
} 
else if (strStr(getEnv('HTTP_USER_AGENT'), 'Gecko')) 
{ 
  echo '<link rel="stylesheet" href="http://www.example.com/nn_styles.css" type="text/css" media="screen">' . "\n" . '<style type="text/css">@import url("http://www.example.com/ch_styles.css");</style>' . "\n"; 
}
else if (strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 6.0')) 
{ 
  echo '<link rel="stylesheet" href="http://www.example.com/ie_styles.css" type="text/css" media="screen">' . "\n" . '<style type="text/css">@import url("http://www.example.com/ie6_styles.css");</style>' . "\n"; 
}
else if (strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 7.0')) 
{ 
  echo '<link rel="stylesheet" href="http://www.example.com/ie7_styles.css" type="text/css" media="screen">' . "\n" . '<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>' . "\n"; 
}
else if (strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 8.0')) 
{ 
  echo '<style type="text/css">@import url("http://www.example.com/ie7_styles.css");</style>' . "\n" . '<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>' . "\n"; 
}
else if (strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 9.0')) 
{ 
  echo '<style type="text/css">@import url("http://www.example.com/ie7_styles.css");</style>' . "\n" . '<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>' . "\n"; 
}
else if (strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 10.0')) 
{ 
  echo '<style type="text/css">@import url("http://www.example.com/ie7_styles.css");</style>' . "\n" . '<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>' . "\n"; 
}
?> 
```

这是同一脚本的 JS 版本：

```
var MSIE10=navigator.userAgent.indexOf("MSIE 10.0");
var MSIE9=navigator.userAgent.indexOf("MSIE 9.0");
var MSIE8=navigator.userAgent.indexOf("MSIE 8.0");
var MSIE7=navigator.userAgent.indexOf("MSIE 7.0");
var MSIE6=navigator.userAgent.indexOf("MSIE 6.0");
var NETS=navigator.userAgent.indexOf("Gecko");
var OPER=navigator.userAgent.indexOf("Opera");
if(OPER>-1) {
document.write('<link rel="stylesheet" href="http://www.example.com/op_styles.css" type="text/css">');
document.write('<style type="text/css">@import url("http://www.example.com/op11_styles.css");</style>');
}
else if(MSIE6>-1){
document.write('<link rel="stylesheet" href="http://www.example.com/ie_styles.css" type="text/css">');
document.write('<style type="text/css">@import url("http://www.example.com/ie6_styles.css");</style>');
}
else if(MSIE7>-1){
document.write('<link rel="stylesheet" href="http://www.example.com/ie7_styles.css" type="text/css">');
document.write('<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>');
}
else if(MSIE8>-1){
document.write('<style type="text/css">@import url("http://www.example.com/ie7_styles.css");</style>');
document.write('<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>');
}
else if(MSIE9>-1){
document.write('<style type="text/css">@import url("http://www.example.com/ie7_styles.css");</style>');
document.write('<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>');
}
else if(MSIE10>-1){
document.write('<style type="text/css">@import url("http://www.example.com/ie7_styles.css");</style>');
document.write('<style type="text/css">@import url("http://www.example.com/ie7_9_styles.css");</style>');
}
else {
document.write('<link rel="stylesheet" href="http://www.example.com/nn_styles.css" type="text/css">');
document.write('<style type="text/css">@import url("http://www.example.com/ch_styles.css");</style>');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:18:35.143

回避代码组织问题，考虑在服务器上使用内置的浏览器检测功能。 [解析用户代理字符串的代码？](https://stackoverflow.com/questions/2122786/code-to-parse-user-agent-string)

至于客户端，通常最好避免在 JS 中做任何特定于浏览器的事情，而是使用一个框架（如 jQuery）来隐藏这些差异。在这种情况下，您似乎可以根据服务器的浏览器检测有条件地链接到正确的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:16:35.630

试试这个

```
if (strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 7.0') || strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 8.0') || strStr(getEnv('HTTP_USER_AGENT'), 'MSIE 9.0')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:18:31.163

更好地使用 html 条件语句：

```
<!--[if IE 6]>
<link rel="stylesheet" href="http://www.example.com/ie_styles.css" type="text/css">
<style type="text/css">@import url("http://www.example.com/ie6_styles.css");</style>
<![endif]--> 
```

将ifs替换为`switch`

```
switch (strtolower(getEnv('HTTP_USER_AGENT'))) {
   case 'opera':
   ...
   break;
} 
```

对于 JS 部分，您可以使用`switch (true)`和检查各种条件作为案例语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:58:30.530

如果您确实需要每个浏览器的样式表，您可能需要检查您的 HTML 标记。但要回答你的问题，我会这样做。可能有一些错误，我没有测试它。

**PHP**

```
$user_agents = array(
    'Opera' => 'nn',
    'Gecko' => 'nn',
    'MSIE 6.0' => 'ie'
);

$style_sheet = 'ie7'; // default
foreach ($user_agents as $agent => $sheet) {
    if (strStr(getEnv('HTTP_USER_AGENT'), $agent)) {
        $style_sheet = $sheet;
        break;
    }
}

echo '<link rel="stylesheet" href="http://www.example.com/'.$style_sheet.'_style.css" type="text/css" media="screen">'; 
```

**Javascript**

您应该为样式表使用一致的命名约定，以使其更容易。

```
var user_agents = ['MSIE 9.0', 'MSIE 6.0', 'MSIE', 'Gecko', 'Opera'],
    style_sheets = ['ie7_9', 'ie', 'ie7', 'nn', 'op'], // indexs correspond with user_agents array
    inserted = false;

user_agents.forEach(function(item, index) {
    if (!inserted && navigator.userAgent.indexOf(item) > -1) {
        document.write('<link rel="stylesheet" href="http://www.example.com/'+style_sheets[index]+'_styles.css" type="text/css">');
        document.write('<style type="text/css">@import url("http://www.example.com/'+style_sheets[index]+'_styles.css");</style>');
        inserted = true;
    }
}); 
```

# python - python - 一次重载多个运算符

> ID：15196360
> 
> 赞同：2
> 
> 时间：2013-03-04T07:12:45.557
> 
> 标签：python, operator-overloading

我有一个自定义类，我想重载几个算术运算符，想知道是否有一种方法可以避免为每个运算符单独编写代码。我无法找到任何不明确地逐个重载每个运算符的示例。

```
class Foo(object):
    a=0 

    def __init__(self, a):
        self.a=a            

    def __add__(self, other):
        #common logic here
        return Foo(self.a+other.a)

    def __sub__(self, other):
        #common logic here  
        return Foo(self.a-other.a)

    def __mul__(self, other):
        #common logic here
        return Foo(self.a*other.a)

#etc... 
```

逻辑比这稍微复杂一些，但常见的模式是每个运算符重载方法都包含一些相同的代码来检查该操作是否被允许，然后使用类成员构造一个操作。我想减少冗余代码。这有效：

```
class Foo(object):
    a=0 

    def __init__(self, a):
        self.a=a            

    def operate(self, other, operator):
        #common logic here
        a = constructOperation(self.a, other.a, operator)
        return Foo(a)

    def __add__(self, other):
        return self.operate(other, "+")

    def __sub__(self, other):       
        return self.operate(other, "-")     

def constructOperation(operand0, operand1, operator):
    if operator=="+": 
        return operand0 + operand1
    if operator=="-": 
        return operand0 - operand1 
```

但是像这样手动构建操作似乎有点愚蠢。这种方法是否有意义，或者这里有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T07:26:03.293

您可以通过反射和高阶函数来做到这一点，尽管这可能无法很好地与继承配合使用。

```
import operator

def apply_a(func):
    def inner(self, other):
        return Foo(func(self.a, other.a))
    return inner

class Foo(object):
    def __init__(self, a=0):
        self.a = a

for name in ['__add__','__mul__','__sub__']:
    setattr(Foo, name, apply_a(getattr(operator, name))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T07:28:29.447

我只会使用该[`operator`](http://docs.python.org/2/library/operator.html)模块：

```
import operator

class Foo(object):

    a=0 

    def __init__(self, a):
        self.a=a            

    def operate(self, other, op):
        #common logic here
        return Foo(op(self.a, other.a))

    def __add__(self, other):
        return self.operate(other, operator.add)

    def __sub__(self, other):       
        return self.operate(other, operator.sub) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T07:29:33.553

我不知道是否有办法避免定义所有（或至少大多数）运算符。没有一个是有道理的。毕竟，没有一种单一的方法来定义`__sub__`给定的`__add__`（和`__mul__`）。但是，一种改进是将可调用对象传递给constructOperation() 而不是符号运算符。

例如

```
class Foo(object):
    a=0 

    def __init__(self, a):
        self.a=a            

    def operate(self, other, operator):
        #common logic here
        a = constructOperation(self.a, other.a, operator)
        return Foo(a)

    def __add__(self, other):
        return self.operate(other, sum)

    def __sub__(self, other):       
        return self.operate(other, lambda x, y: x - y)     

def constructOperation(operand0, operand1, operator):
    return operator(operand0, operand1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T07:32:33.883

您**必须**定义方法。这是因为 python 在调用特殊方法时会进行特殊查找，因此是这样的：

```
import operator

class Foo(object):

    def __init__(self, a):
        self.a = a
    def __getattr__(self, attr):
        try:
            func = getattr(operator, attr)
            return lambda x: Foo(func(self.a, x.a))
        except AttributeError:
            raise AttributeError(attr) 
```

不起作用：

```
>>> f = Foo(1)
>>> g = Foo(3)
>>> f * g     #no __mul__?
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for *: 'Foo' and 'Foo'
>>> getattr(f, '__mul__')
<function <lambda> at 0x2975140>
>>> f.__mul__(g)
<__main__.Foo object at 0x2922ed0>
>>> f.__mul__(g).a
3 
```

您可以做的“最好”是使用锑的解决方案，这是最干燥的。

# java - 如何在给定范围内创建一个随机打乱数字的 int 数组

> ID：15196363
> 
> 赞同：5
> 
> 时间：2013-03-04T07:12:59.130
> 
> 标签：java, arrays, math, random, integer

基本上，假设我有一个可以容纳 10 个数字的 int 数组。这意味着我可以在每个索引中存储 0-9（每个数字只能存储一次）。

如果我运行下面的代码：

```
int[] num = new int[10];
for(int i=0;i<10;i++){
    num[i]=i;
} 
```

我的数组看起来像这样：

```
[0],[1],.....,[8],[9] 
```

但是每次运行代码时如何随机分配数字？例如，我希望数组看起来像：

```
[8],[1],[0].....[6],[3] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T07:18:15.670

将其设为 a`List<Integer>`而不是数组，并使用 Collections.shuffle() 对其进行随机播放。您可以在改组后从列表中构建 int[]。

如果您真的想直接进行随机播放，请搜索“Fisher-Yates Shuffle”。

下面是一个使用 List 技术的例子：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Test {
  public static void main(String args[]) {
    List<Integer> dataList = new ArrayList<Integer>();
    for (int i = 0; i < 10; i++) {
      dataList.add(i);
    }
    Collections.shuffle(dataList);
    int[] num = new int[dataList.size()];
    for (int i = 0; i < dataList.size(); i++) {
      num[i] = dataList.get(i);
    }

    for (int i = 0; i < num.length; i++) {
      System.out.println(num[i]);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T10:39:10.277

Collections 类有一个有效的洗牌方法：

```
private static Random random;

/**
 * Code from method java.util.Collections.shuffle();
 */
public static void shuffle(int[] array) {
    if (random == null) random = new Random();
    int count = array.length;
    for (int i = count; i > 1; i--) {
        swap(array, i - 1, random.nextInt(i));
    }
}

private static void swap(int[] array, int i, int j) {
    int temp = array[i];
    array[i] = array[j];
    array[j] = temp;
} 
```

# java - 当 tomecat 服务器运行时，我的 java 类运行

> ID：15196364
> 
> 赞同：-6
> 
> 时间：2013-03-04T07:13:06.523
> 
> 标签：java, tomcat

我使用 jsf-2.x 和 tomcat-7.x。现在我希望我的服务器和项目同时运行运行一个 java 类或首先运行一个 java 类。但我不知道该怎么做？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:17:16.690

您需要将您的类注册为侦听器，使您的类实现 ServletContextListener 并将其注册到 web.xml 并重新启动您的 tomcat

你可以在网上找到很多教程，向你展示这方面的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:18:22.773

[tomcat的启动说明在这里](http://tomcat.apache.org/tomcat-5.5-doc/architecture/startup.html)。

> 可以通过多种方式自定义启动过程，包括修改 Tomcat 代码和实现您自己的 LifecycleListener，然后在 server.xml 配置文件中注册。

# unix - 如何在unix中转置文件？

> ID：15196365
> 
> 赞同：-3
> 
> 时间：2013-03-04T07:13:07.947
> 
> 标签：unix, transpose

我有一个文件

```
ColA   ColB   ColC
2.34   2.83   8.45
4.34   2.26   7.46
3.34   2.25   4.45 
```

我怎样才能转置这个文件？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:16:49.857

你可以这样做`awk`：

```
awk '{print $1, $3, $2}' file 
```

# java - -HeapDumpOnOutOfMemoryError 和 +HeapDumpOnOutOfMemoryError 选项有什么区别？

> ID：15196373
> 
> 赞同：9
> 
> 时间：2013-03-04T07:13:37.103
> 
> 标签：java, jvm, jvm-arguments

在 Oracle 的[官方文档](http://docs.oracle.com/cd/E15289_01/doc.40/e15062/optionxx.htm#BABJIDID) `HeapDumpOnOutOfMemoryError`选项中用加号和减号指定。我只是好奇它们代表什么，因为官方用户指南中没有解释

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T07:16:58.457

从您引用的[页面：](http://docs.oracle.com/cd/E15289_01/doc.40/e15062/optionxx.htm)

> 一些命令行选项使用 HotSpot 实现格式；也就是说，您必须在 -XX 和选项名称之间放置冒号 (:)，后跟必要的运算符以指示启用 (+) 或禁用 (-) 新哈希函数。

# asp.net-mvc-4 - 如何使用 MVC4 中的 UserProfile 表使用一对多关系 - EF 中的外键映射

> ID：15196374
> 
> 赞同：0
> 
> 时间：2013-03-04T07:13:43.743
> 
> 标签：asp.net-mvc-4, model, code-first, foreign-key-relationship, one-to-one

我正在尝试将“UserProfile”与另一个模型“Data”相关联。

用户档案模型：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FullName { get; set; }
} 
```

数据模型：

```
[Table("Data")]
public class Data
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int DataID { get; set; }

    [Required]
    [Display(Name = "DataName")]
    public string DataName { get; set; }

    [Required]
    [Display(Name = "Created Date")]
    public DateTime CreatedDate { get; set; }

    public int? ManagedByUserId { get; set; }
    [Required]
    [ForeignKey("ManagedByUserId")]
    [Display(Name = "Managed By")]
    public UserProfile ManagedByUser { get; set; }
} 
```

这里 ManagedByUserId 是 Data 表中的外键。

命名约定有什么问题吗？但是我收到一个属性错误`"ManagedByUser" is required`。因此， my`ModelState`无效（`ModelState.IsValid`is `false`），因此不保存数据。

# extjs4 - 如何在单个 JS 文件中配置 Extjs 4.1.x MVC 应用程序

> ID：15196376
> 
> 赞同：1
> 
> 时间：2013-03-04T07:14:03.570
> 
> 标签：extjs4, extjs4.1

`Extjs 4.1.x`被我使用。我想将整个合并`MVC application`到一个 js 文件中。由于这些原因`requires`，我像往常一样删除了所有字段，就像我从 , 中删除`views`, `controllers`, `stores`,`models`字段/属性`Application`一样`Controllers`。在这种情况下，没有`store`. 但是当我使用`store`它时无法解决`store`。这就是无法运行应用程序的原因。`Extjs 4.1.x MVC`集成在单个`js`文件中的任何应用程序示例。因为我想动态跳过依赖加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:47:12.817

你不应该删除`requires`或`uses`属性！命令工具使用这些来检测需要哪个类以及何时需要。在哪里

```
requires 
```

是强制加载器（和构建工具）在需要的类之前严格加载类的严格类，而

```
uses 
```

属性有点松散，仅确保在`onReady`执行块获取时类已准备好。

您不需要严格要求的是您扩展的类，因为构建器/加载器会自动将它们设置为必需。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T03:46:03.133

你可以试试 sencha cmd 工具。

[http://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T23:01:41.627

我对类似问题“如何打包（缩小）extjs 4 应用程序”的回答：[https ://stackoverflow.com/a/24331758/1983903](https://stackoverflow.com/a/24331758/1983903)

大约两年来，我一直没有找到合适的工具来简化 ExtJS 应用程序的构建。然后我决定自己为 ExtJS 应用程序编写轻量级构建工具。这里是：

Extapp：[https ://github.com/liberborn/extapp](https://github.com/liberborn/extapp)

它是 Sencha.cmd 中 JS Compiler 模块的某种替代方案。您无需在部署服务器上安装庞大的 Sencha.cmd 软件即可完成简单的构建工作。只需在命令行中运行一个 jar 文件，您将获得编译好的应用程序。

# facebook - Facebook 使用相同的访问令牌（ID/字符串）延长访问令牌的寿命/有效性

> ID：15196377
> 
> 赞同：-2
> 
> 时间：2013-03-04T07:14:08.943
> 
> 标签：facebook, facebook-graph-api, access-token, facebook-access-token

我正在使用以下 API 将我的访问令牌的寿命（有效期）延长至 60 天。

```
https://graph.facebook.com/oauth/access_token?  
    grant_type=fb_exchange_token&           
    client_id=APP_ID&
    client_secret=APP_SECRET&
    fb_exchange_token=SHORT_LIVED_ACCESS_TOKEN 
```

如果我得到一个有效期为 60 天的访问令牌，例如： - AAACUUypbpertyyZB3dbIevYgzryzbl4ZCUKprtyuilSac7HbGNVR8cHkqDZCS8dfghjklfEmi3HkZA8qgZCVTasdfyz07ZATRsRn5XNH8PAAZDZD

如果 50 天后，如果我再次调用与上述扩展 API 相同的方法。我的问题是我可以将上面提到的同一个访问令牌的有效期延长到接下来的 60 天，或者这个 API 将生成新的访问令牌吗？

最终，我想使用相同的访问令牌。只是我想在每 50 天后将其有效期延长 60 天。请帮助我，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:23:17.087

不，这是不可能的。来自 Facebook[文档](https://developers.facebook.com/roadmap/offline-access-removal/)：

`The returned access_token will have a fresh long-lived expiration time, however, the access_token itself may or may not be the same as the previously granted long-lived access_token.`

# php - mysql GROUP BY vs 多个表

> ID：15196378
> 
> 赞同：0
> 
> 时间：2013-03-04T07:14:14.287
> 
> 标签：php, mysql

我不知道如何问这个，但哪个更好......使用 GROUP BY 或多个表。

目前，我有一个生成列表的表。它有几列，一列是列表ID。

现在这是我的查询

```
SELECT `listID`, `` 
FROM `acmSongLists` 
WHERE `churchID`='".$thisID."' AND `timeSent` >= DATE_SUB( CURDATE( ) ,INTERVAL 0 MONTH ) 
GROUP BY `listID` ASC 
```

当然，重点是获取与同一个 listID 关联的所有项目。然后我将该 ID 传递给另一个查询以显示我的列表标题。又名...

```
SELECT * FROM `acmSongLists` WHERE `listID`='$listID'" 
```

我很好奇，有没有更好的方法呢？我的另一个想法是创建两个表，一个包含一般信息以及一个唯一 id (listID)，然后是另一个包含列表中每个项目的表。然后分别查询。我想我想知道什么是最有效的。谢谢你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:52:49.373

你可以试试这个查询：

```
SELECT asl1.`listID`, asl2.*
FROM `acmSongLists` asl1 INNER JOIN `acmSongLists` asl2 ON asl1.listID = asl2.listID
WHERE `churchID`='".$thisID."' AND `timeSent` >= DATE_SUB( CURDATE( ) ,INTERVAL 0 MONTH ) 
GROUP BY asl1.`listID` ASC 
```

# javascript - 如何在 ASP.NET 中显示消息框？

> ID：15196381
> 
> 赞同：16
> 
> 时间：2013-03-04T07:14:19.390
> 
> 标签：javascript, c#, asp.net

我想在成功保存任何项目时显示一个消息框。我用谷歌搜索并尝试了不同的解决方案，但都没有奏效。这是我正在使用的代码：

```
try
{
    con.Open();
    string pass="abc";
    cmd = new SqlCommand("insert into register values('" + 
                                       txtName.Text + "','" + 
                                       txtEmail.Text + "','" + 
                                       txtPhoneNumber.Text + "','" + 
                                       ddlUserType.SelectedText + "','" + 
                                       pass + "')", con);

    cmd.ExecuteNonQuery();
    con.Close();
    Response.Write("<script LANGUAGE='JavaScript' >alert('Login Successful')</script>");
}
catch (Exception ex)
{

}
finally
{
    con.Close();
} 
```

（我正在使用 Firefox，如果这很重要的话）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-04T09:25:02.507

@freelancer 如果您使用的是 ScriptManager，请尝试使用此代码获取消息。

```
string script = "alert(\"Hello!\");";
ScriptManager.RegisterStartupScript(this, GetType(), 
                      "ServerControlScript", script, true); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-20T06:57:41.953

**在您的页面中创建一个 MsgBox 方法。**

* * *

```
public void MsgBox(String ex, Page pg,Object obj) 
{
    string s = "<SCRIPT language='javascript'>alert('" + ex.Replace("\r\n", "\\n").Replace("'", "") + "'); </SCRIPT>";
    Type cstype = obj.GetType();
    ClientScriptManager cs = pg.ClientScript;
    cs.RegisterClientScriptBlock(cstype, s, s.ToString());
} 
```

**当你想使用 msgbox 时，只需输入这一行**

```
MsgBox("! your message !", this.Page, this); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-04T07:37:34.627

试试这个，它在我的浏览器中运行良好：

您的响应编写代码应该是

```
Response.Write("<script>alert('login successful');</script>"); 
```

希望这有效

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T07:23:37.713

你可以使用客户端脚本。[MSDN：客户端脚本](http://msdn.microsoft.com/en-us/library/ms178207%28v=vs.80%29.aspx)

```
String scriptText = 
        "alert('sdsd');";
    ClientScript.RegisterOnSubmitStatement(this.GetType(), 
        "ConfirmSubmit", scriptText); 
```

试试这个

```
ClientScript.RegisterStartupScript(this.GetType(), "JSScript", scriptText); 

ClientScript.RegisterClientScriptBlock(this.GetType(), "alert", scriptText); //use this 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-26T15:02:36.967

此代码将帮助您在 asp.net 文件中添加 MsgBox。您可以将函数定义更改为您的要求。希望这可以帮助！

```
protected void Addstaff_Click(object sender, EventArgs e)    
    {   
 if (intClassCapcity < intCurrentstaffNumber)     
                {                  
            MsgBox("Record cannot be added because max seats available for the " + (string)Session["course_name"] + " training has been reached");    
        }    
else    
    {   
            sqlClassList.Insert();    
    }    
}

private void MsgBox(string sMessage)    
    {    
        string msg = "<script language=\"javascript\">";    
        msg += "alert('" + sMessage + "');";    
        msg += "</script>";    
        Response.Write(msg);    
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-02T19:18:59.543

我使用它并且它有效

```
public void Messagebox(string xMessage)
{
    Response.Write("<script>alert('" + xMessage + "')</script>");
} 
```

我这样打电话

```
 Messagebox("je suis la!"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-10T13:45:41.067

使用 AJAX Modal Popup 并创建消息框类：

消息框类：

```
public class MessageBox
{
    ModalPopupExtender _modalPop;
    Page _page;
    object _sender;
    Panel _pnl;

    public enum Buttons
    {
        AbortRetryIgnore,
        OK,
        OKCancel,
        RetryCancel,
        YesNo,
        YesNoCancel
    }
    public enum DefaultButton
    {
        Button1,
        Button2,
        Button3
    }
    public enum MessageBoxIcon
    {
        Asterisk,
        Exclamation,
        Hand,
        Information,
        None,
        Question,
        Warning

    }

    public MessageBox(Page page, object sender, Panel pnl)
    {
        _page = page;
        _sender = sender;
        _pnl = pnl;
        _modalPop = new ModalPopupExtender();

        _modalPop.ID = "popUp";
        _modalPop.PopupControlID = "ModalPanel";

    }

    public void Show(String strTitle, string strMessage, Buttons buttons, DefaultButton defaultbutton, MessageBoxIcon msbi)
    {
        MasterPage mPage = _page.Master;
        Label lblTitle = null;
        Label lblError = null;
        Button btn1 = null;
        Button btn2 = null;
        Button btn3 = null;
        Image imgIcon = null;

        lblTitle = ((Default)_page.Master).messageBoxTitle;
        lblError = ((Default)_page.Master).messageBoxMsg;
        btn1 = ((Default)_page.Master).button1;
        btn2 = ((Default)_page.Master).button2;
        btn3 = ((Default)_page.Master).button3;
        imgIcon = ((Default)_page.Master).messageBoxIcon;

        lblTitle.Text = strTitle;
        lblError.Text = strMessage;

        btn1.CssClass = "btn btn-default";
        btn2.CssClass = "btn btn-default";
        btn3.CssClass = "btn btn-default";

        switch (msbi)
        {
            case MessageBoxIcon.Asterisk:
                //imgIcon.ImageUrl = "~/img/asterisk.jpg";
                break;
            case MessageBoxIcon.Exclamation:
                //imgIcon.ImageUrl = "~/img/exclamation.jpg";
                break;
            case MessageBoxIcon.Hand:
                break;
            case MessageBoxIcon.Information:
                break;
            case MessageBoxIcon.None:
                break;
            case MessageBoxIcon.Question:
                break;
            case MessageBoxIcon.Warning:
                break;
        }
        switch (buttons)
        {
            case Buttons.AbortRetryIgnore:
                btn1.Text = "Abort";
                btn2.Text = "Retry";
                btn3.Text = "Ignore";
                btn1.Visible = true;
                btn2.Visible = true;
                btn3.Visible = true;

                break;

            case Buttons.OK:
                btn1.Text = "OK";
                btn1.Visible = true;
                btn2.Visible = false;
                btn3.Visible = false;
                break;

            case Buttons.OKCancel:
                btn1.Text = "OK";
                btn2.Text = "Cancel";
                btn1.Visible = true;
                btn2.Visible = true;
                btn3.Visible = false;
                break;

            case Buttons.RetryCancel:
                btn1.Text = "Retry";
                btn2.Text = "Cancel";
                btn1.Visible = true;
                btn2.Visible = true;
                btn3.Visible = false;
                break;

            case Buttons.YesNo:
                btn1.Text = "No";
                btn2.Text = "Yes";
                btn1.Visible = true;
                btn2.Visible = true;
                btn3.Visible = false;
                break;

            case Buttons.YesNoCancel:
                btn1.Text = "Yes";
                btn2.Text = "No";
                btn3.Text = "Cancel";
                btn1.Visible = true;
                btn2.Visible = true;
                btn3.Visible = true;
                break;
        }

        if (defaultbutton == DefaultButton.Button1)
        {
            btn1.CssClass = "btn btn-primary";
            btn2.CssClass = "btn btn-default";
            btn3.CssClass = "btn btn-default";
        }

        else if (defaultbutton == DefaultButton.Button2)
        {
            btn1.CssClass = "btn btn-default";
            btn2.CssClass = "btn btn-primary";
            btn3.CssClass = "btn btn-default";
        }

        else if (defaultbutton == DefaultButton.Button3)
        {
            btn1.CssClass = "btn btn-default";
            btn2.CssClass = "btn btn-default";
            btn3.CssClass = "btn btn-primary";
        }

        FirePopUp();
    }

    private void FirePopUp()
    {
        _modalPop.TargetControlID = ((Button)_sender).ID;
        _modalPop.DropShadow = true;
        _modalPop.OkControlID = //btn 1 / 2 / 3;
        _modalPop.CancelControlID = //btn 1 / 2 / 3;
        _modalPop.BackgroundCssClass = "modalBackground";
        _pnl.Controls.Add(_modalPop);
        _modalPop.Show();

    } 
```

在我的 MasterPage 代码中：

```
 #region AlertBox
    public Button button1
    {
        get
        { return this.btn1; }
    }
    public Button button2
    {
        get
        { return this.btn2; }
    }
    public Button button3
    {
        get
        { return this.btn1; }
    }

    public Label messageBoxTitle
    {
        get
        { return this.lblMessageBoxTitle; }
    }

    public Label messageBoxMsg
    {
        get
        { return this.lblMessage; }
    }

    public Image messageBoxIcon
    {
        get
        { return this.img; }
    }

    public DialogResult res
    {
        get { return res; }
        set { res = value; }
    }

    #endregion 
```

在我的 MasterPage aspx 中：

在标题上添加参考（仅适用于某些样式）

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet"> 
```

关于内容：

```
<asp:Panel ID="ModalPanel" runat="server" style="display: none; position: absolute; top:0;">
        <asp:Panel ID="pnlAlertBox" runat="server" >
        <div class="modal-dialog" >
            <div ID="modalContent" runat="server" class="modal-content">
                <div class="modal-header">  
                    <h4 class="modal-title" id="myModalLabel">
                         <asp:Label ID="lblMessageBoxTitle" runat="server" Text="This is the MessageBox Caption"></asp:Label>
                    </h4>
                </div>
                <div ID="modalbody" class="modal-body" style="width:800px; height:600px">
                    <asp:Image ID="img" runat="server" Height="20px" Width="20px"/>
                    <asp:Label ID="lblMessage" runat="server" Text="Here Goes My Message"></asp:Label>
                </div>
                <div class="modal-footer">
                    <asp:Button ID="btn1" runat="server" OnClick="btn_Click" CssClass="btn btn-default" Text="Another Button" />
                    <asp:Button ID="btn2" runat="server" OnClick="btn_Click" CssClass="btn btn-default" Text="Cancel" />
                    <asp:Button ID="btn3" runat="server" OnClick="btn_Click" CssClass="btn btn-primary" Text="Ok" />
                </div>
            </div>
        </div>
    </asp:Panel>
   </asp:Panel> 
```

并从按钮调用它，按钮代码：

```
protected void btnTest_Click(object sender, EventArgs e)
        {
            MessageBox msgBox = new MessageBox(this, sender, aPanel);
            msgBox.Show("This is my Caption", "this is my message", MessageBox.Buttons.AbortRetryIgnore, MessageBox.DefaultButton.Button1, MessageBox.MessageBoxIcon.Asterisk);

        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-11T04:08:20.663

这种方法对我来说很好：

```
private void alert(string message)
{
    Response.Write("<script>alert('" + message + "')</script>");
} 
```

例子：

```
protected void Page_Load(object sender, EventArgs e)
{
    alert("Hello world!");
} 
```

当您的页面加载时，您会看到如下内容：

[![在此处输入图像描述](../Images/f78aee91306f9cc334d8fd83a343033f.png)](https://i.stack.imgur.com/yCDWA.jpg)

我在 Firefox 中使用 .NET Framework 4.5。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-04T07:27:35.843

`Response.Write`用于显示不用于执行 JavaScript 的文本，如果您想从代码中执行 JavaScript，请尝试如下：

```
try
{
    con.Open();
    string pass="abc";
    cmd = new SqlCommand("insert into register values('" + txtName.Text + "','" + txtEmail.Text + "','" + txtPhoneNumber.Text + "','" + ddlUserType.SelectedText + "','" + pass + "')", con);
    cmd.ExecuteNonQuery();
    con.Close();
    Page.ClientScript.RegisterStartupScript(this.GetType(), "click","alert('Login Successful');");
}
catch (Exception ex)
{
}
finally
{
    con.Close();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-20T10:51:27.457

创建一个简单的 JavaScript 函数，其中包含一行代码-“alert("Hello this is an Alert")”，而不是在 OnClick() 上，使用 OnClientClick() 方法。

```
`<html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
 <title></title>
 <script type="text/javascript" language="javascript">
    function showAlert() {
        alert("Hello this is an Alert")
    }
 </script>
 </head>
 <body>
 <form id="form1" runat="server">
 <div>
 <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="showAlert()" />
 </div>
 </form>
 </body>
 </html>` 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-02T07:27:48.673

试试这个代码：成功

写在点击按钮上。

```
ScriptManager.RegisterStartupScript(this, GetType(),"alertMessage", "alert('Record Inserted Successfully');", true); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-08T18:29:36.323

**最好的解决方案是直接在visualstudio GUI中最少使用java**

这里是：在一个按钮上转到“OnClientClick”属性（它不是事件*）在那边输入：

```
return confirm('are you sure?') 
```

如果按下取消，它将在当前页面上放置一个带有取消确定按钮透明的对话框，不会发生回发。但是，如果您只需要确定按钮类型：

```
alert ('i told you so') 
```

onclick 等事件在服务器端运行，它们执行您的代码，而 OnClientClick 在浏览器端运行。最接近基本对话

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-09-17T07:30:34.817

**带有重定向的警报消息**

`Response.Write("<script language='javascript'>window.alert('Popup message ');window.location='webform.aspx';</script>");`

**只有警报消息**

`Response.Write("<script language='javascript'>window.alert('Popup message ')</script>");`

# ios - 关于集成 OpenCV 框架的架构 armv7 的未定义符号

> ID：15196382
> 
> 赞同：5
> 
> 时间：2013-03-04T07:14:19.980
> 
> 标签：ios, opencv, linker-errors

我正面临这个错误，在集成时`opencv2.framework`，任何人都可以帮助解决这个问题。我的 Xcode 版本是 4.5。

```
Undefined symbols for architecture armv7:
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      cv::Exception::Exception(int, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) in opencv2(system.o)
      cv::Exception::Exception(cv::Exception const&) in opencv2(system.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::~basic_string()", referenced from:
      cv::Mat::create(int, int const*, int) in opencv2(matrix.o)
      __ZN2cvL7setSizeERNS_3MatEiPKiPKmb in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&) in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const*) in opencv2(matrix.o)
      cv::Mat::diag(int) const in opencv2(matrix.o)
      cv::Mat::Mat(_IplImage const*, bool) in opencv2(matrix.o)
      cv::Mat::reserve(unsigned long) in opencv2(matrix.o)
      ...
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init(char const*, unsigned long)", referenced from:
      cv::Mat::create(int, int const*, int) in opencv2(matrix.o)
      __ZN2cvL7setSizeERNS_3MatEiPKiPKmb in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&) in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const*) in opencv2(matrix.o)
      cv::Mat::diag(int) const in opencv2(matrix.o)
      cv::Mat::Mat(_IplImage const*, bool) in opencv2(matrix.o)
      cv::Mat::reserve(unsigned long) in opencv2(matrix.o)
      ...
  "std::__1::__vector_base_common<true>::__throw_length_error() const", referenced from:
      std::__1::vector<cv::Vec<int, 128>, std::__1::allocator<cv::Vec<int, 128> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 64>, std::__1::allocator<cv::Vec<int, 64> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 32>, std::__1::allocator<cv::Vec<int, 32> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 16>, std::__1::allocator<cv::Vec<int, 16> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 12>, std::__1::allocator<cv::Vec<int, 12> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 9>, std::__1::allocator<cv::Vec<int, 9> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 8>, std::__1::allocator<cv::Vec<int, 8> > >::__append(unsigned long) in opencv2(matrix.o)
      ...
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::operator=(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      cv::Exception::formatMessage() in opencv2(system.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-27T12:35:57.373

您只需将**“libc++.dylib”**添加到“链接框架和库”中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:22:55.590

看来该框架未编译为支持`arm7`. 它需要使用当前的 Xcode 进行编译，以便它可以针对必要的架构。

您是从源代码编译还是依赖现有的二进制文件？

尝试使用此 Git 存储库获取源代码：[https ://github.com/jonmarimba/OpenCV-iOS](https://github.com/jonmarimba/OpenCV-iOS)

# asp.net - ASP.NET / C# 页面标题

> ID：15196384
> 
> 赞同：1
> 
> 时间：2013-03-04T07:14:24.007
> 
> 标签：asp.net, c#-4.0, webforms, page-title

好的，我知道这是一个愚蠢的问题，我真的不知道什么或如何搜索这个问题。问题是我将页面标题值存储到数据库中，然后从数据库中检索值并使用这段代码将该标题分配给页面`this.Title = pageTitle;`，它呈现如下

```
 <head><title>
          page title here
    </title> 
```

但我的经理希望我让它呈现如下

```
 <head><title>page title here</title> 
```

我不知道要搜索什么或怎么做

**编辑：**我试过

```
 <head><title><asp:Literal ID="ltrlMasterTitle" runat="server" Text=""</asp:Literal></title> 
```

并使用以下代码将其设置为我想要的值

```
 Literal lblMasterTitle = (Literal)this.Page.Master.FindControl("lblMasterTitle");
    if (!string.IsNullOrWhiteSpace(pageTitle))
        lblMasterTitle.Text = pageTitle; 
```

但它也以相同的方式呈现。PS：我尝试使用 Jonathan Hanson 建议的解决方案，但我无法弄清楚母版页和子页之间的数据传输：/

**另一个编辑：**我尝试了乔纳森汉森链接中建议的方法，但也呈现相同的 oO

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:23:42.867

一种选择是使用这样的嵌入式代码块：

```
<head><title><%=PageTitle%></title> 
```

然后在你的代码后面：

```
public String PageTitle
{
  get;
  set;
} 
```

然后...

```
PageTitle = pageTitle; 
```

那应该可以解决问题-尽管有点难看。再说一次，这就是经理们对像这样的愚蠢废话进行微观管理所得到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T09:00:06.667

你可以在 page_load 中写

```
this.Page.Title = YourTitle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T07:53:57.457

这是我的答案，以便任何有这种愚蠢情况的人都可以从我的经验中获得一些智慧，在我把头撞到墙上一周后，我认为这是无法实现的。

**正如我所说，这在当时可用的最新版本中无法实现，现在我不明白为什么对我的答案投了反对票，我不能接受其他人的答案，因为他们没有达到我想要和提出的要求，如果您要投反对票，请至少发表评论，说明原因**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T21:30:24.093

如果您使用的是母版页，请尝试以下操作：

在母版页中，转到头部并输入：

```
<head runat="server" id="yourHead">
       <asp:ContentPlaceHolder runat="server" id="holderHead"></asp:ContentPlaceHolder>
       <title>Your Title</title>
</head> 
```

现在，在其他页面的 html 代码中输入：

```
<asp:Content ID="content" ContentPlaceHolderID="holderHead" runat="Server">
   <title>Your Title - Contact</title>
</asp:Content> 
```

它对我有用。

附言：。对不起，我的英语不好！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-25T12:00:52.487

为什么不只使用文字控件？

```
 Literal ltPageTitle = (Literal)Master.FindControl("ltPageTitle"); // If the literal is on a master page 
    // Literal ltPageTitle = (Literal)Page.FindControl("ltPageTitle"); 
    ltPageTitle.Text = "Title"; // Where Title is the title you want for the page 
```

这甚至为您提供了额外的功能，例如使用数据库记录来命名您的页面或您能想到的任何其他内容。

# mysql - 如何为 AWS RDS 实例设置数据库时区

> ID：15196385
> 
> 赞同：16
> 
> 时间：2013-03-04T07:14:34.397
> 
> 标签：mysql, amazon-ec2, amazon-rds

我们在 AWS RDS 实例上使用最新的 MySQL 服务器，并且我们已配置为在美国东部数据中心运行它。我们假设任何新的 Date() 或 Time.now() 调用都会将日期存储在数据库服务器运行的时区中。

有没有办法将我在美国东部运行的 AWS RDS 实例指向 PST 时区，以便任何持久性日期都将值存储在 PST 而不是 EST 中。（即如果在美国东部标准时间上午 10 点左右存储一个对象，则 db 列应该反映美国东部标准时间上午 7 点）。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-04T09:33:28.733

在我回答其余部分之前，我现在只想建议您，如果您可以选择更改您的应用程序以使用 UTC，它将在现在和将来为您省去很多麻烦。

但是，鉴于您的问题的上下文，我假设这不是一个选项，并且您正在调整一个旨在在传统服务器环境中使用 MySQL 的系统，您可以在其中更改时区，并且有代码逻辑预计这个时区，不能轻易适应使用 UTC。

但是，如果您真的需要将其存储为 PST，请继续阅读。

* * *

您是正确的，默认情况下 mySql 将使用服务器的时区进行时间戳存储，但是**您假设 RDS 实例根据它们启动的 AWS 区域设置其时区是不正确的**- 所有 RDS 实例的时区设置为UTC，[并且此配置无法更改：](https://forums.aws.amazon.com/thread.jspa?messageID=161339)

> 时区当前不可修改。确实有一个`rds-describe-db-parameters`名为“default_time_zone”的参数值，但它被标记为不可修改。

因此，您唯一的选择是将应用程序与数据库实例建立的每个连接上的时区设置为 PST。您可以按照[此处找到](http://blog.ncode.ca/?p=164)`SET SESSION time_zone = 'PST'`的两个步骤使用查询在应用程序进行的每个连接中执行：

1.  创建以下存储过程（UTC-8 是 PST）：

    > ```
    > DELIMITER |  
    > CREATE PROCEDURE mysql.store_time_zone ()  
    >    IF NOT (POSITION('rdsadmin@' IN CURRENT_USER()) = 1) THEN     
    >        SET SESSION time_zone = '-8:00';  
    >    END IF 
    > |
    > DELIMITER ; 
    > ```

2.  连接到您的实例，然后运行以下命令：

    > ```
    > $ rds-modify-db-parameter-group PARAMGROUP --parameters "name=init_connect, value='CALL mysql.store_time_zone', method=immediate" 
    > ```

3.  您可能需要向`EXECUTE`将连接到数据库的用户授予权限，否则您可能会收到连接错误：

    > ```
    > GRANT EXECUTE ON PROCEDURE mysql.store_time_zone TO 'user'@'host'; 
    > ```

现在，任何客户端对您的 RDS 实例执行的每个查询都应该使用 PST，而无需修改任何应用程序逻辑，也无需更新数据库中任何先前存储的时间戳。

# iphone - 是否可以在 IOS 应用程序中处理 GSM 呼叫？

> ID：15196386
> 
> 赞同：0
> 
> 时间：2013-03-04T07:14:37.783
> 
> 标签：iphone, ios, ios5

我正在制作 iOS 应用程序。是否可以在应用程序处于活动状态时自动禁用 GSM 通话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:32:59.353

IOS SDK中一直没有官方的SDK来处理调用或者阻塞调用。Apple 不鼓励您这样做。

# hibernate - 使用休眠注释删除父子关系的问题

> ID：15196389
> 
> 赞同：0
> 
> 时间：2013-03-04T07:14:52.027
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations

要求是当删除父级时，必须删除所有相关的子级。当使用休眠注释删除父级时，我面临删除子级的问题，我的父表是`Employee`，子表是`EmployeeProject`子表在数据库中有一个外键约束`Employee_Number` ，问题是什么时候我删除了父级以下错误来请告诉我映射的问题在哪里谢谢

```
 Hibernate: select employee_.EMPLOYEE_NUMBER, employee_.ADDRESS_1 as ADDRESS2_0_, employee_.ADDRESS_2 as ADDRESS3_0_, employee_.CITY as CITY0_, employee_.DATE_OF_ANNIVERSARY as DATE5_0_, employee_.DATE_OF_BIRTH as DATE6_0_, employee_.DATE_OF_JOINING as DATE7_0_, employee_.DATE_OF_LEAVING as DATE8_0_, employee_.DEPARTMENT_ID as DEPARTMENT9_0_, employee_.FIRST_NAME as FIRST10_0_, employee_.LAST_NAME as LAST11_0_, employee_.MOBILE_NUMBER as MOBILE12_0_, employee_.pincode as pincode0_, employee_.REASON_FOR_LEAVING as REASON14_0_, employee_.state as state0_, employee_.TELEPHONE_NUMBER as TELEPHONE16_0_, employee_.TITLE as TITLE0_ from Employees employee_ where employee_.EMPLOYEE_NUMBER=?
Hibernate: delete from Employees where EMPLOYEE_NUMBER=?
4 Mar, 2013 12:33:32 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 1451, SQLState: 23000
4 Mar, 2013 12:33:32 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Cannot delete or update a parent row: a foreign key constraint fails (`employee/employee_project`, CONSTRAINT `FKC1804A88229473A9` FOREIGN KEY (`EMPLOYEE_NUMBER`) REFERENCES `employees` (`EMPLOYEE_NUMBER`)) 
```

这是我的父映射

```
 @OneToMany(mappedBy = "employee", cascade = CascadeType.ALL)
    Collection<EmployeeProject> employeeProjects = new ArrayList<EmployeeProject>(); 
```

这是子表映射

```
 @ManyToOne
    @JoinColumn(name = "EMPLOYEE_NUMBER", insertable = false, updatable = false)
    Employee employee; 
```

这是删除父母（员工）的方法

```
@Override
public boolean deleteEmployee(Employee employee) {

    Transaction transaction = null;
    boolean flag;
    try {
        transaction = session.beginTransaction();
        session.delete(employee);
        transaction.commit();
        flag = true;

    } catch (HibernateException exception) {
        if (transaction != null)
            transaction.rollback();
        flag = false;
    }
    return flag;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:17:54.940

试试这个 ，

```
 t = session.beginTransaction();
      ExperimentImpl persistentExperiment = session.load(Employee.class, 
             employee.getId());
    session.delete(persistentExperiment);
    t.commit(); 
```

会尝试使用要删除的 Experiment 的主键，并在实际删除之前加载：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:22:57.870

确保您`CASCADE`在数据库模式中也标记了外键关系，假设这是您想要的。Hibernate 的级联将负责删除 Hibernate 对象，但它本身不会将`DELETE`尚未转换为对象的 kill 子记录放入您的应用程序中。

# .net - 上下滚动时如何自动隐藏窗口窗体宿主包含的控件

> ID：15196398
> 
> 赞同：0
> 
> 时间：2013-03-04T07:15:48.597
> 
> 标签：.net, wpf

我对 WPF 中托管的 Windows 窗体控件有很大的问题。例如，当用户滚动窗口时，托管控件位于窗口顶部，尽管它应该被隐藏。

我知道这是已知问题，也是托管控件的默认行为，但我认为如果控件的可见性以某种方式与以下内容绑定可以解决：其他控件是否与它重叠。如果其他控件重叠，则应为 Collapsed 或 Hidden，否则应为 Visible。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:17:47.380

我刚刚通过使用条件隐藏了将要在窗口上溢出的部分，如果滚动条的垂直偏移量超过了一定量的值，则只是隐藏了控制部分。

# google-visualization - 使用谷歌图表分组堆栈条形图

> ID：15196400
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:15:56.663
> 
> 标签：google-visualization, bar-chart

我想这样创建图表：

[演示](http://bl.ocks.org/gencay/4629518)！

有人知道我们是否可以使用 Google Chart 绘制这种图表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:35:32.667

查看谷歌的代码[游乐场](https://code.google.com/apis/ajax/playground/?type=visualization#bar_chart)：

如果您将“isStacked: true”添加到选项中，您将拥有堆叠的条形图。

只需将选项更改为：

```
// Create and draw the visualization.
new google.visualization.BarChart(document.getElementById('visualization')).
  draw(data,
       {title:"Yearly Coffee Consumption by Country",
        width:600, height:400,
        vAxis: {title: "Year"},
        hAxis: {title: "Cups"},
        isStacked: true}
); 
```

# asp.net - 我想从 javascript 将下拉的值发布到 My Actionresult 方法中，但它不起作用..？

> ID：15196401
> 
> 赞同：0
> 
> 时间：2013-03-04T07:16:02.197
> 
> 标签：asp.net, asp.net-mvc, web-applications, web, webgrid

当我调用 javascript 并获取值并发布到某个 URL 时，我使用 Webgrid 上方的一个下拉框来动态更改每页的行数..但它不会发布到我的控制器 Actionresult 方法....所以请帮忙它;紧急..！我尝试了很多方法..但这一切都不适用于我的项目，请任何人对我的错误有想法......我的可用声明..

```
$.ajax(
{
    type: 'POST',
    url: '/Admin/UserActive/' + strvalue,
    data: strvalue,
    datatype: "String",
    success: function (result) 
    {
    }
});

$.post('@Url.Action("UserActive","Admin", new{})' + '?Id=' + strvalue);
$.post('@Url.Action("UserActive","Admin")', { Id: strvalue });

$.post('@Url.Action("/Admin/Pagesize")', { rowsPerPage: value });
$.post('/Admin/UserActive',
{
    id: strvalue.toString(),

}); 
```

所有语句都在我的 javascript 函数中用于将控件发布到我的 actionresult 方法以执行一些逻辑..但是当 post 语句不起作用或不正确时，请..给出提示..

当我在我的新项目中使用它时，所有这些语句都是有效的，它在我当前的应用程序中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:56:37.703

在您的操作中添加一个与您的下拉列表同名的参数，然后发布或调用操作并根据下拉值中给出的页面大小返回结果。

例如。

```
public ActionResult UserAgent(string yourDropDownName)
{
} 
```

# extjs - 更改图表图例样式

> ID：15196403
> 
> 赞同：0
> 
> 时间：2013-03-04T07:16:18.937
> 
> 标签：extjs, charts, extjs4.1

我正在使用 ExtJs 饼图，现在我需要更改图表的样式。我已经更改了 **标签**样式，但现在我想更改图例样式。

我怎样才能做到这一点？我没有找到任何关于此的文件/问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:25:20.397

抱歉这个愚蠢的问题，我终于自己找到了解决方案。我应该将`legend`对象添加到图表中：

```
legend: {
    position: 'right',
    labelFont: 'tahoma'
} 
```

简单的。

# django - Django：同一张表的多对多关系

> ID：15196407
> 
> 赞同：2
> 
> 时间：2013-03-04T07:16:27.820
> 
> 标签：django, many-to-many

我有一个场景。

我的应用程序中有很多用户，每个人都有自己的`(Trusted Circle)`.Trusted Circle 有点类似于密友。

我在这里感到困惑。

实现每个用户的受信任圈子的最佳方法是什么。受信任圈子用户也像我的应用程序中的用户。

我听说过`ManyToMany` 带有`self`属性的字段。值得在我的应用程序中使用它来维护每个用户的信任圈。

如果可能的话，请给我一些其他的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:40:25.047

**经典方法**将是：

```
1 user circle can contains n users
1 user may be in n user circles. 
```

这是一个 N:M 关系。

但是，因为这是给 django 的，所以我的**django 设计建议**是：

```
1:1 relationship to circle:
      1 user has 1 circle   

N:M relationship to users circle:
      1 circle can contains n users
      1 user may be in n circles. 
```

**一对一和 m2m 的**圈子关系：****

 **```
class Circle(models.Model):
    owner = models.OneToOneField(User, primary_key=True)
    users = models.ManyToManyField(User) 
```

在**创建用户时创建用户圈子**：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

def create_circle(sender, **kw):
    user = kw["instance"]
    if kw["created"]:
        c = Circle(user=user)
        c.save()

post_save.connect(create_circle, sender=User) 
```

享受并让我加入您信任的圈子；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-05T08:49:28.187

要将多对多关系添加到单个表，请`related_name`为与单个表具有多对多关系的字段添加不同的字段。

例如：

```
class A(models.Model):
    field1 = models.ManyToManyField('B', related_name='field1')
    field2 = models.ManyToManyField('B', related_name='field2')
    field3 = models.ManyToManyField('B', related_name='field3')

class B(models.Model):
    name = models.CharField(max_length=30, unique=True) 
```**

# java - 删除android中的html标签

> ID：15196414
> 
> 赞同：4
> 
> 时间：2013-03-04T07:16:38.940
> 
> 标签：java, android, html, xml-parsing, stringbuffer

我遵循以下 XML 提要：

```
<Description>
  <p>Touch, tap, flip, slide! You don&#39;t just read Books, you experience it.</p>
</Description> 
```

在这里我必须显示如下描述

**触摸，点击，翻转，滑动！你不 39.just read the Books，你体验它。**

在这里，我处理了解析器，如下所示：

```
 public static String removeHTML(String htmlString)
  {
  // Remove HTML tag from java String    
String noHTMLString = htmlString.replaceAll("\\<.*?\\>", "");

// Remove Carriage return from java String
noHTMLString = noHTMLString.replaceAll("\r", "<br/>");
noHTMLString = noHTMLString.replaceAll("<([bip])>.*?</\1>", "");
// Remove New line from java string and replace html break
noHTMLString = noHTMLString.replaceAll("\n", " ");
noHTMLString = noHTMLString.replaceAll("\"", "&quot;");
noHTMLString = noHTMLString.replaceAll("<(.*?)\\>"," ");//Removes all items in brackets
noHTMLString = noHTMLString.replaceAll("<(.*?)\\\n"," ");//Must be undeneath
noHTMLString = noHTMLString.replaceFirst("(.*?)\\>", " ");
noHTMLString = noHTMLString.replaceAll("&nbsp;"," ");
noHTMLString = noHTMLString.replaceAll("&amp;"," ");
return noHTMLString;

    } 
```

在 endElement ：

```
 public void endElement(String uri, String localName, String qName)throws SAXException {
  currentElement = false;
   if (localName.equalsIgnoreCase("Description")){
   sitesList.setDescription(currentValue);
   String Sub_arry=n+currentValue;
   Appscontent.Sub_arraylistdes.add(Sub_arry);
   String stringWithoutHTML=removeHTML(currentValue);
   System.out.println("description value----->"+n+att_ID+"------>>"+stringWithoutHTML);} 
```

现在我必须运行该应用程序，这意味着 html 标记与我的描述一起显示...我怎样才能删除 HTML 标记？请为我提供解决方案？？？

我希望显示没有 Html 标签的描述...请为这些提供解决方案。

**编辑：**

```
 if (localName.equalsIgnoreCase("Description")){
    sitesList.setDescription(currentValue);
    String Sub_arry=n+currentValue;
    StringBuffer sb = new StringBuffer();
    sb.append(Sub_arry);
     String newString = sb.toString();
      Appscontent.Sub_arraylistdes.add(newString);
       System.out.println("description value----->"+n+att_ID+"------>>"+newString);} 
```

**编辑：**

```
 public static String html2text(String html) {
  return Jsoup.parse(html).text();
    } 
```

在 endElement 中：

```
 if (localName.equalsIgnoreCase("Description")){
    sitesList.setDescription(currentValue);
    String Sub_arry=n+currentValue;
    Appscontent.Sub_arraylistdes.add(Sub_arry);
      String stringWithoutHTML=html2text(currentValue);
       System.out.println("description value----->"+n+att_ID+"------>>"+stringWithoutHTML);} 
```

但我没有得到o/p ..请为我提供这些解决方案？？？我怎样才能删除这些描述中的html标签...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-03T02:36:42.607

您可以使用 Android 中的内置 HTML 类轻松删除 Android 中的任何 HTML 标记。导入`android.text.Html;`. 现在，考虑到“数据”是您的具有 HTML 标记的字符串变量，您可以使用它`Html.fromHtml(data).toString()`来取回没有任何 HTML 标记的字符串。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-16T06:20:25.527

删除html的简单方法。这将返回非 html 格式的文本

```
 private String removeHtml(String html) {
    html = html.replaceAll("<(.*?)\\>"," ");
    html = html.replaceAll("<(.*?)\\\n"," ");
    html = html.replaceFirst("(.*?)\\>", " ");
    html = html.replaceAll("&nbsp;"," ");
    html = html.replaceAll("&amp;"," ");
    return html;
} 
```

根据html标签格式化并删除标签。

```
Html.fromHtml(data).toString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-17T04:04:38.013

```
String plain = Html.fromHtml("your_html_string").toString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T07:20:06.410

一种选择是添加[JSoup](http://jsoup.org/)库，导入并使用它，如下所示：

```
public static String html2text(String html) {
return Jsoup.parse(html).text();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-03T08:31:33.633

```
 private int iMobileVersion = Build.VERSION.SDK_INT;
    String strResonseTemplate = data.getStringExtra("template"); //getting HTML data in string

    if (iMobileVersion >= 24) {
                                mEtReply.setText(Html.fromHtml(strResonseTemplate, Html.FROM_HTML_MODE_COMPACT));// this code only works on and above API 24, and removes all HTML tag, but gives same view as HTML in Edittext.
                            } else {
                                mEtReply.setText(Html.fromHtml(strResonseTemplate).toString()); // bellow API level 24 we are removing only HTML tags, it will show as normal text.

                            } 
```

希望这会有所帮助:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T07:58:22.860

据我所知，您可以通过可跨接口获取数据。

尝试使用这个：

> Spanned spannable = Html.fromHtml(arrayList.get(position).getBusinessDescription());
> System.out.println("描述值----->"+n+att_ID+"------>>"+spannable);

查看以下链接了解更多详情：

> [http://developer.android.com/reference/android/text/Spanned.html](http://developer.android.com/reference/android/text/Spanned.html) [http://developer.android.com/reference/android/text/Spannable.html](http://developer.android.com/reference/android/text/Spannable.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-20T09:38:54.417

只需添加这几行代码即可完成。

```
String html=(jsonObject1.getString("originaltext"));
            html = html.replaceAll("<(.*?)\\>"," ");
            html = html.replaceAll("<(.*?)\\\n"," ");
            html = html.replaceFirst("(.*?)\\>", " ");
            html = html.replaceAll("&nbsp;"," ");
            html = html.replaceAll("&amp;"," ");
            newsModel.setNews(html);
            Log.d("originaltext: ",html); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-27T15:49:58.983

```
//Patter to detect elements contained into "<>"
private static final Pattern REMOVE_TAGS = Pattern.compile("<.+?>");

//Method to remove the html tags contained in a String variable
public static String removeTags(String string) 
{
  //validate that at least one value contains the string
  if (string == null || string.length() == 0) 
  {
     return string;
  }
  //Function to find the matches within the chain and the pattern       
  Matcher m = REMOVE_TAGS.matcher(string);
  //replace <> element with ""
  return m.replaceAll("");
}

//Implementation of the method to eliminate html tags and place inside a Text control
this.itemView.setText(
 Html.fromHtml(
  new String(removeTags("<h1>My Title here</h1>").getBytes("ISO-8859-1"),"UTF-8")
 )
); 
```

# sql-server-2008 - SQL Server 2008 管理工作室速成版

> ID：15196422
> 
> 赞同：0
> 
> 时间：2013-03-04T07:17:12.693
> 
> 标签：sql-server-2008, visual-studio-2008, database-connection

**SQL Server Management Studio Express 专家？**

我的笔记本电脑上有 SQL Server Management Studio 2008 Express，但它没有表面区域管理器（类似的东西）......

当我右键单击数据库时，我也没有“方面”....

我相信当我安装 Microsoft Visual Studio 2010 时它已经以某种方式升级了

这是我的添加/删除程序

[http://tinypic.com/view.php?pic=34xlxxl&s=6](http://tinypic.com/view.php?pic=34xlxxl&s=6)

我错过了什么吗？我很确定我安装了所有东西......

PS我需要建立一个局域网连接....所以我队友笔记本电脑上的visual studio可以连接到我的数据库....

# matlab - Matlab - 向量化双循环以在单元格数组中找到唯一的单词标记

> ID：15196426
> 
> 赞同：1
> 
> 时间：2013-03-04T07:17:31.740
> 
> 标签：matlab, for-loop, vectorization

我有一个包含句子字符串的元胞数组 x 的元胞数组，我想在 x 中找到所有唯一单词标记的列表，然后使用它为数组结构 y 创建字段名（如果该字段名尚不存在）对于 y。现在我正在使用双 for 循环遍历 x 中的每个句子字符串，然后遍历每个单独的唯一单词以完成任务，但是当元胞数组包含太多字符串时，它可能会很慢。

```
for i=1:length(x)
    unique = unique(x{i});
    for j=1:length(unique)
            y.(unique{j}) = {};
    end
end 
```

样本输入：

```
x = {{'hello', 'world'}, {'foo', 'bar'}, {'eat', 'foo', 'ice', 'cream'}, {'hello', 'dad'}};
y = {}; 
```

那么 unique 应该是这样的

```
unique = {'hello', 'world', 'foo', 'bar', 'eat', 'ice', 'cream', 'dad'} 
```

和结构数组 y 应该具有唯一的所有单词标记作为字段名称。所以应该有一个 y.hello、y.world、y.foo、y.bar、y.eat、y.ice、y.cream 和 y.dad。只要根据需要输出 y，单词标记的唯一列表就不是必需的。有什么方法可以通过矢量化或其他方式来简化这些操作以使程序运行得更快？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:44:54.753

你为什么要`unique`为文字做事？如果您只是为每个单词构建一个空单元格，那么您为什么要关心是否多次创建它呢？最后只剩下一个。

```
>> x = unique( [x{:}] );
>> y = cell2struct( cell(1, numel(x)), x, 2 )

y = 

      bar: []
    cream: []
      dad: []
      eat: []
      foo: []
    hello: []
      ice: []
    world: [] 
```

# android - Android + 动态添加布局

> ID：15196429
> 
> 赞同：0
> 
> 时间：2013-03-04T07:17:39.463
> 
> 标签：android, android-layout, dynamic

我需要在屏幕上显示 5 张图片和指定图片的 onClick，我会播放音乐 3 秒钟，然后随机进入下一个活动（或另外 5 张图片的集合）。

像那样，我必须随机显示多达 16 个不同的视图（16 * 5 图像）.....

到目前为止，我已经完成并工作得相当体面。

**为此，我创建了 16 个活动和相应的 16 个 Xml 文件。

我的问题是我可以将这 16 个 XML 文件添加到单个活动而不是 16 个活动。我刚刚听说动态向 Activity 添加布局。但是在我的项目中，我必须更改正确图像的 onClick 图像集并加载新图像，以进行单击...**

简而言之，我想在 The **SINGLE Activity**上展示各种资源中的内容......

```
 (or) 
```

参加许多可能的活动会更好吗？

N0te：这可能是一个简单的问题，但过去 8 天我在这个网站上搜索和搜索，仍然没有结果。所以请帮个忙……

Andd, ** 如果你想给 DOWN VOTE，请说明 Kind 原因....**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:19:48.890

你可以用这个

```
setContentView(R.layout.myxmlfile.xml) 
```

在同一个活动中加载另一个布局

要随机加载它们，

获取您的第一个和最后一个布局的 id

```
final int first = R.layout.myfirstLayout.xml;
final int last = R.layout.myLastLayout.xml; 
```

现在在这两个整数之间生成一个随机值。

```
final int random = (int)(first + (Math.Random()%last)); 
```

使用这个随机加载你的布局

```
setContentView(random); 
```

为此，您必须通过按字母顺序命名来确保布局正确排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:21:30.057

使用`LayoutInflater`类

```
LayoutInflater layoutInflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = layoutInflater.inflate(R.layout.dblayout, null);
setContentView(view); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:05:49.867

```
int layouts[] = { R.layout.layout1, R.layout.layout2, .... }
setRandomLayout() {
   int layout = layouts[random of layouts.length];
   setContentView(layout);
} 
```

此外，如果所有布局都看起来相同，我建议使用一个布局，但每个图像使用不同的数据/图像。

# postgresql - 在 PostgreSQL 中存储 IPv6 范围

> ID：15196432
> 
> 赞同：1
> 
> 时间：2013-03-04T07:17:50.547
> 
> 标签：postgresql, ipv6, postgresql-9.2

在 9.2 中，添加了新的范围功能。如何创建包含 IPv6 范围字段的表？
我需要创建新类型吗？
一个例子/链接将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:49:17.480

PostgreSQL 已经支持[类型 CIDR](http://www.postgresql.org/docs/current/static/datatype-net-types.html#DATATYPE-CIDR)，它可以存储 IPv4 和 IPv6 的范围。唯一需要注意的是，这些范围不能像`1.2.3.1-1.2.3.10`IPv4 or那样`::5:1-::5-10`，而只能像`1.2.3/28`or `2001:0:0:5::0/64`- 典型的无类子网声明。

如果您想要比 更多的灵活性`CIDR`，并且想要拥有真正的任意`INET`范围，那么可以使用[`ip4r`扩展](https://github.com/RhodiumToad/ip4r-historical)来提供这些即用型。它默认包含在[某些 Ubuntu 版本](https://launchpad.net/ubuntu/+source/ip4r)中（例如，它包含在 Ubuntu 12.10 中）。

不要被名称所迷惑：它同时`ip4r`支持2.0 版本。它还支持您期望的典型范围操作，例如检查IP 是否属于范围和其他一些。在这里阅读更多：。`IPv4``IPv6``BETWEEN``<<=`[`README.ip4r`](https://github.com/RhodiumToad/ip4r/blob/master/README.ip4r)

# python - 使用 Python 将文本字符串添加到图像文件

> ID：15196441
> 
> 赞同：0
> 
> 时间：2013-03-04T07:18:25.640
> 
> 标签：python, gif

我有一组 GIF 文件，我需要在二进制文件中的任何位置插入一个特定的字符串，但它不应该在视觉上有所不同。我可能可以在十六进制编辑器中执行此操作，但不确定在哪里，因为它可能会损坏文件。

这是我的源代码控制系统的要求，在每个文件中检查“$Header $”字符串，然后再签入。

我有很多文件，所以需要使用 python 来做到这一点。

# android - 如何在屏幕大小上调整 Listview 项目

> ID：15196442
> 
> 赞同：1
> 
> 时间：2013-03-04T07:18:27.107
> 
> 标签：android, android-layout, android-listview

我制作了使用 Listview 的 App

main_acivity.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/common_bg_common"
    tools:context=".MainActivity" >
    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:divider="#000000"
        android:dividerHeight="3sp" >
    </ListView>

</RelativeLayout> 
```

和 costomItem 在下面

costomo_cell.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF" >

    <LinearLayout
        android:id="@+id/linear1"
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:layout_alignParentTop="true"
        android:background="#cc9933"
        android:orientation="vertical" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center_vertical|center_horizontal"
            android:text="dummyCanvas"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linear2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/linear1"
        android:background="#cc3333"
        android:orientation="vertical" >

        <TextView 
            android:id="@+id/_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000"/>
    </LinearLayout>

</RelativeLayout> 
```

现在，我想按一项填充屏幕。我想在 custom_cell.xml 中写 match_parent，但不能。

我不想写xxdp。Linear1 是屏幕尺寸的 2/3。其他内容（linear2）是 1/3 大小...

如何配置自定义单元格布局？

--------已编辑---我上传了截图。黑线是一项单独的项目。我想调整屏幕尺寸 ![捕获](../Images/248bff1d275e649f1ac14fc3cffc6bd0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:17:53.530

```
class MyListItemView extends LinearLayout {

public MyListItemView(Context context) {
    super(context);
    inflate(getContext(), R.layout.costomo_cell, this);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int height = getResources().getDisplayMetrics().heightPixels;
    super.onMeasure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(height, MeasureSpec.AT_MOST));
} 
```

现在在适配器的 getView 中实例化 MyListItemView 实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T11:00:50.957

我使用**setLayoutParams**在 BaseAdapter 中执行此操作。

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = getLayoutInflater().inflate(R.list_item, null);
        convertView.setLayoutParams(new AbsListView.LayoutParams(
            getListView().getWidth(), AbsListView.LayoutParams.WRAP_CONTENT));
    }
    other code...
} 
```

getListView() 是一个 wrap 方法，它返回一个 ListView，我用它的宽度作为项目的宽度，希望对你有帮助。

# java - 如何从默认构造函数调用 set 方法？

> ID：15196448
> 
> 赞同：0
> 
> 时间：2013-03-04T07:18:48.700
> 
> 标签：java

我正在处理一个要求我创建“一个默认构造函数和一个第二个构造函数，期望所有三个值都作为参数传递的赋值。从两个构造函数调用“set”方法”我已经完成了第二个构造函数，如下所示；

```
public Cat(String newName, int newYearOfBirth, int newWieghtInKilos )
{
    setName(newName);
    setYearOfBirth(newYearOfBirth);
    setWeightInKilos(newWieghtInKilos); 
} 
```

如何创建调用 set 方法的默认构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:20:37.573

空构造函数可以使用具有默认值的设置器。

```
public Cat()
{
    setName(defaultName);
    setYearOfBirth(defaultYearOfBirth);
    setWeightInKilos(defaultWieghtInKilos); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:36:31.097

您可能会告诉受让人从两个构造函数中调用 set 方法是错误的做法。您的默认构造函数可能会愉快地使用具有默认值的参数构造函数。

```
public Cat(){
    this("",0,0);
} 
```

这将有助于代码重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:21:19.350

您可以简单地在默认构造函数中设置默认值。

```
public Cat() {
    setName("MyName");
    setYearOfBirth(1987);
    setWeightInKilos(55);
} 
```

或者，您也可以设置空值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:34:35.580

您可以使用与在重载构造函数中相同的方式从默认构造函数调用 setter。

这里唯一的区别是，在默认构造函数中，你没有被赋予任何值来传递给 setter。

但是，如果您希望使用默认值初始化这些字段，则可以使用这些默认值调用设置器。

# python - 通过接受json对象在python中通过递归构建一棵树

> ID：15196449
> 
> 赞同：5
> 
> 时间：2013-03-04T07:18:50.793
> 
> 标签：python, json

我是 python 新手，在从文本文件中获取输入后，我必须在 python 中构建一棵树，我在文本文件
中有以下数据。我必须使用 Json 使用以下数据在 python 中构建一棵树

```
 {
                "component": "A",
                "status": 0,
                "children": [
                    {
                        "component": "AA",
                        "status": 0,
                        "children": [
                            {
                                "component": "AAA",
                                "status": 0,
                                "children": []
                            },
                            {
                                "component": "AAB",
                                "status": 0,
                                "children": []
                            }
                        ]
                    },
                    {
                        "component": "AB",
                        "status": 0,
                        "children": [
                            {
                                "component": "ABA",
                                "status": 0,
                                "children": []
                            },
                            {
                                "component": "ABB",
                                "status": 0,
                                "children": []
                            }
                        ]
                    }
            } 
```

我写了下面的代码，但它有语法错误，如果有人能找到它们，我无法纠正

```
 class node:
                #Construction of Node with component,status and children
                def _init_(self,component=None,status=None,children=None):
                    self.component = component
                    self.status = status
                    if children is None:
                        self.children = [] 
                    else:
                        self.children = children

            #Building Json object from text file            
            class start:
                import json

                f=open("json_file.txt")
                data=json.load(f)
                buildnode(data)

            #Construction of tree through recursion            
            class implementation:
                def buildnode(self,ob):
                    node1= node()
                    node1.component=ob.component
                    node1.status=ob.status
                    node1.children=[]
                    print 'component',component,'','status',status
                    for children in ob:
                        node1.children.add(buildnode(children[i])) 

                    return node1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:06:38.030

```
import json

class Node(object):
    def __init__(self, component=None, status=None, level=0):
        self.component = component
        self.status    = status
        self.level     = level
        self.children  = []

    def __repr__(self):        
        return '\n{indent}Node({component},{status},{children})'.format(
                                         indent = self.level*'\t', 
                                         component = self.component,
                                         status = self.status,
                                         children = repr(self.children))
    def add_child(self, child):
        self.children.append(child)    

def tree_builder(obj, level=0):
    node = Node(component=obj['component'], status=obj['status'], level=level)
    for child in obj.get('children',[]):
        node.add_child(tree_builder(child, level=level+1))
    return node

def load_json(filename):
    with open(filename) as f:
        return json.load(f)

obj = load_json('test.json')
tree = tree_builder(obj)
print tree 
```

输出：

```
Node(A,0,[
    Node(AA,0,[
        Node(AAA,0,[]), 
        Node(AAB,0,[])]), 
    Node(AB,0,[
        Node(ABA,0,[]), 
        Node(ABB,0,[])])]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:37:17.323

好的，我能够修复您代码中的错误，现在它看起来像这样：

```
class node:
    #Construction of Node with component,status and children
    def _init_(self,component=None,status=None,children=None):
        self.component = component
        self.status = status
        if children is None:
            self.children = [] 
        else:
            self.children = children

#Construction of tree through recursion            
class implementation:
    def buildnode(self,ob):
        node1= node()
        node1.component=ob['component']
        node1.status=ob['status']
        node1.children=[]
        print 'component',node1.component,'','status',node1.status
        for children in ob['children']:
            node1.children.append(self.buildnode(children)) 

        return node1

#Building Json object from text file            
class start:
    import json

    f=open("json_file.txt")
    data=json.load(f)
    builder = implementation()
    builder.buildnode(data) 
```

这会产生以下输出：

```
component A  status 0
component AA  status 0
component AAA  status 0
component AAB  status 0
component AB  status 0
component ABA  status 0
component ABB  status 0 
```

以下是对所需内容的一些解释：

首先，您在定义它之前调用 buildnode()，它是一个类函数，因此在调用它之前您需要一个类的实例。接下来，当您调用字典中的值时，您需要通过`dictionary['key']`. 唯一的另一件事是追加到数组的方法是调用`.append()`而不是调用`.add()`。

# javascript - 验证日期时间格式的正则表达式 (MM/DD/YYYY)

> ID：15196451
> 
> 赞同：32
> 
> 时间：2013-03-04T07:18:59.653
> 
> 标签：javascript, jquery, regex

我正在尝试验证日期时间格式 MM/DD/YYYY。这是我正在尝试的代码，请帮忙。

```
 function ValidateDate(testdate) {
        var Status
        var reg = /^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g;
        if (!reg.test(testdate)) {
            Status = false;
        }
        return Status;
    } 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-04T07:31:59.827

[使用http://jsregex.com/](http://jsregex.com/)（有很多）或更好的单元测试之类的工具尝试您的正则表达式。

对于简单的验证：

```
function validateDate(testdate) {
    var date_regex = /^\d{2}\/\d{2}\/\d{4}$/ ;
    return date_regex.test(testdate);
} 
```

在您的情况下，为了验证 (MM/DD/YYYY)，年份介于 1900 和 2099 之间，我会这样写：

```
function validateDate(testdate) {
    var date_regex = /^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/ ;
    return date_regex.test(testdate);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-23T14:26:03.847

标记的答案是完美的，但在一种情况下，dd 和 mm 实际上是个位数。在这种情况下，以下正则表达式是完美的：

```
 function validateDate(testdate) {
        var date_regex = /^(0?[1-9]|1[0-2])\/(0?[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/ ;
        return date_regex.test(testdate);
    }
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-21T01:48:37.863

基于此

[dd-mm-yy](https://stackoverflow.com/questions/15491894/regex-to-validate-date-format-dd-mm-yyyy)

我把原来的修改成这样：

```
^(?:(?:(?:0?[13578]|1[02]|(?:Jan|Mar|May|Jul|Aug|Oct|Dec))(\/|-|\.)31)\1|(?:(?:0?[1,3-9]|1[0-2]|(?:Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))(\/|-|\.)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:(?:0?2|(?:Feb))(\/|-|\.)(?:29)\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9]|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep))|(?:1[0-2]|(?:Oct|Nov|Dec)))(\/|-|\.)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$ 
```

[在这里测试正则表达式](https://regex101.com/r/vL5mV7/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:25:49.357

```
var pattern = new RegExp((0|1)[0-9]\/[0-3][0-9]\/(19|20)[0-9]{2});
if(!testdate.match(pattern))
   return false;
else return true; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-30T11:25:45.900

您可以查看[此](http://www.regular-expressions.info/dates.html)链接，我希望这可能对我有很大帮助。

如果您在 Java 代码中使用上述链接中给出的正则表达式，请使用以下正则表达式

`"^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\\d\\d$"`

正如我在您的示例中注意到的那样，您正在使用 js 函数，然后使用正则表达式

`"^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$"`

这将匹配 1900-01-01 和 2099-12-31 之间的 mm/dd/yyyy 格式的日期，可选择四个分隔符。不要忘记

`return regex.test(testdate);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-01T03:26:05.357

* * *

在这种情况下，验证日期 (DD-MM-YYYY) 或 (DD/MM/YYYY)，年份介于 1900 和 2099 之间，例如使用月份和日期验证

```
if (!Regex.Match(txtDob.Text, @"^(0[1-9]|1[0-9]|2[0-9]|3[0,1])([/+-])(0[1-9]|1[0-2])([/+-])(19|20)[0-9]{2}$").Success)                  
{
   MessageBox.Show("InValid Date of Birth");
   txtDob.Focus();
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-07-06T18:10:11.170

它很长，但很棒：

```
new RegExp(/(?=\d)^(?:(?!(?:10\D(?:0?[5-9]|1[0-4])\D(?:1582))|(?:0?9\D(?:0?[3-9]|1[0-3])\D(?:1752)))((?:0?[13578]|1[02])|(?:0?[469]|11)(?!\/31)(?!-31)(?!\.31)|(?:0?2(?=.?(?:(?:29.(?!000[04]|(?:(?:1[^0-6]|[2468][^048]|[3579][^26])00))(?:(?:(?:\d\d)(?:[02468][048]|[13579][26])(?!\x20BC))|(?:00(?:42|3[0369]|2[147]|1[258]|09)\x20BC))))))|(?:0?2(?=.(?:(?:\d\D)|(?:[01]\d)|(?:2[0-8])))))([-.\/])(0?[1-9]|[12]\d|3[01])\2(?!0000)((?=(?:00(?:4[0-5]|[0-3]?\d)\x20BC)|(?:\d{4}(?!\x20BC)))\d{4}(?:\x20BC)?)(?:$|(?=\x20\d)\x20))?((?:(?:0?[1-9]|1[012])(?::[0-5]\d){0,2}(?:\x20[aApP][mM]))|(?:[01]\d|2[0-3])(?::[0-5]\d){1,2})?$/); 
```

# playframework-1.x - 播放框架变得无响应？（可能是内存问题）

> ID：15196452
> 
> 赞同：1
> 
> 时间：2013-03-04T07:19:00.650
> 
> 标签：playframework-1.x

我们有一个 Play 1.2.5 应用程序，但我们遇到了一些问题，即应用程序变得无响应。

在为应用程序设置正确的内存设置后，问题没有再次发生（几天 ATM），但我想了解实际原因以及是否有某种方法可以在日志中查看它。

在我们的设置中，我们得到了

*   播放在 AWS 上运行的 1.2.5 应用程序 (Ubuntu 12.04)
*   MySQL RDS 数据库
*   Apache 服务器充当代理（处理 SSL 等）。

各种调用都发生了这种情况，但我有一个使用简单的*renderText*实现（仅 200 和“OK”）监控运行状况检查的示例。我们“时不时地”有这些。应用程序在未启动的情况下返回响应。

Apache 访问日志有：

```
 (IP addr) - - [01/Mar/2013:09:31:16 +0200] "GET /monitor/healthcheck HTTP/1.1" 502 4305 "-" "NING/1.0" 
```

Apache 错误日志有：

```
 [Fri Mar 01 09:36:16 2013] [error] [client (IP addr)] (70007)The timeout specified has expired: proxy: error reading status line from remote server localhost:8080
  [Fri Mar 01 09:36:16 2013] [error] [client (IP addr)] proxy: Error reading from remote server returned by /monitor/healthcheck 
```

（Apache 有 300s=5m 代理超时长度）

播放日志那里没有任何内容（我们在控制器上获得了请求 URL 日志记录，因此至少请求还没有找到它的方式或者日志记录有问题）

第一个想法是线程用完了。这对我来说似乎不太可能，因为：

*   我们正在开发中 -> 流量非常低
    *   这也发生在日志在几个小时内没有以前的流量的情况下
*   我们有 10 个线程 ( `play.pool=10`)
*   我们没有使用异步 WS 调用（Play 1.2.X 似乎有些错误）
*   长时间无通话阻塞
*   在各种使用后进行随机测试，似乎没有线程挂起（用 jstack 检查一切似乎都很好）

（也许相关，也许不相关）：有一次我们检查了 jstack，所以它没有响应 cacll：

```
$ jstack 7842
7842: Unable to open socket file: target process not responding or HotSpot VM not loaded
The -F option can be used when the target process is not responding 
```

但是，在尝试 -F 之前，我们再次尝试并得到了正确的响应，因此如果 JVM 处于某种无响应状态，它很快就会恢复正常。

在一些帮助下，我们设置了正确的内存设置，从那以后（上周五 2013-03-01）我们没有遇到这个问题。

```
jvm.memory=-Xms64m -Xmx512m -XX:PermSize=64m -XX:MaxPermSize=256m 
```

但是，我们没有在日志中打印任何内存问题。我仍然有点担心，因为我不知道实际原因，所以：

*   可能是什么原因
    *   一些内存问题，为什么在日志中找不到？
    *   一些（不确定的）事情会使线程长时间阻塞
*   如果再次发生这种情况，是否有某种方法可以在日志中查看原因？
    *   需要一些设置来获取日志中的内存问题？

更新：似乎可能是 MySQL 连接测试挂起的问题。创建[了另一个更集中的问题](https://stackoverflow.com/questions/15249411/problems-with-mysql-amazon-rds-play-framework-1-2-5-c3p0-default-settings)，并会在问题解决后尝试记住更新此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T10:31:44.227

原因是与 RDS MySQL 的 TCP 连接时不时地过时 -> c3p0 连接池管理线程都卡在进行连接测试 -> 播放请求线程最终在 JPAPlugin.beforeInvocation 处等待以获取数据库连接。

[有关更多详细信息，请参阅Amazon RDS MySQL & Play Framework 1.2.5（c3p0 默认设置）偶尔挂起](https://stackoverflow.com/questions/15249411/connection-hanging-occasionally-with-amazon-rds-mysql-play-framework-1-2-5-c3)的更集中的问题。

# xml - 后代或自我返回的顺序是什么，它如何与子轴一起使用？

> ID：15196455
> 
> 赞同：3
> 
> 时间：2013-03-04T07:19:11.993
> 
> 标签：xml, xpath, standards

我正在阅读 XPath 的标准并试图了解它的一部分是如何工作的。

[http://www.w3.org/TR/xpath/](http://www.w3.org/TR/xpath/)

xpath 标准似乎没有指出评估后代或自我的顺序（首先是上下文节点，或者首先是后代）。在 RFC 的一个阶段，它说它返回所有后代和上下文（如果存在）。在另一个阶段它说相反 - 它返回上下文节点和所有后代。

我的问题是：这个 XPath 的行为是什么：

```
/a//c 
```

从逻辑的角度来看，这应该是进行深度优先搜索。因此，对于以下 XML：

```
<a>
  <b>
    <c v="1"/>
  </b>
  <c v="2"/>
</a> 
```

这里的逻辑（以及似乎是实际的）行为似乎是结果将是：

```
c (v="1")
c (v="2") 
```

但是，根据 RFC，//c 等效于：

```
/descendant-or-self::node()/child::c 
```

这意味着，如果我做对了，那么行为可能会有所不同，具体取决于后代或自我的评估方式。

如果首先返回上下文节点，那么结果看起来应该是：

```
c(v="2")
c(v="1") 
```

由于第一个节点在应用到时返回“//”`a`是 self（即`a`）。然后`child::c`被评估，我认为它会返回，因为那是`c(v="2")`它的第一个孩子......`a``c`

有人可以指出解释为什么`c(v="1")`应该首先返回的 RFC 部分吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:02:12.233

从 XPath 1.0 规范：

> 轴是正向轴或反向轴。仅包含上下文节点或按文档顺序位于上下文节点之后的节点的轴是正向轴。仅包含上下文节点或按文档顺序位于上下文节点之前的节点的轴是反向轴。**因此，祖先轴、祖先或自我轴、前轴和前兄弟轴是反向轴；所有其他轴都是正向轴。**由于 self 轴始终最多包含一个节点，因此它是正向轴还是反向轴都没有区别。节点集的成员相对于轴的接近位置定义为节点集中的节点位置，如果轴是正向轴，则按文档顺序排序；如果轴是正向轴，则按反向文档顺序排序是反向轴。第一个位置是 1。

正如您在此处看到的，`descendant-or-self`是一个正向轴，因此相对于该轴的位置按文档顺序排列。

但是，我认为这几乎是您问题症结的一个有争议的问题。`xsl:apply-templates`使用,等时，节点集的内容始终按文档顺序处理`xsl:for-each`（见下文），因此 的内容`/a//c`将按文档顺序排列。

开启`apply-templates`（来自 XSLT 1.0 规范）

> 除非存在排序规范（参见 [10 Sorting]），否则将按文档顺序处理选定的节点集。

开启`for-each`（来自 XSLT 1.0 规范）

> 节点按文档顺序处理，除非存在排序规范（参见 [10 Sorting]）。

更多关于轴的处理，来自（XPath 1.0 规范）：

> **注意：**谓词的含义主要取决于应用哪个轴。例如，previous::foo[1] 以相反的文档顺序返回第一个 foo 元素，因为应用于 [1] 谓词的轴是前面的轴；相比之下， (preceding::foo)[1] 返回文档顺序中的第一个 foo 元素，因为应用于 [1] 谓词的轴是子轴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:10:21.690

就 XPath 1.0 规范而言，XPath 表达式的结果是一个节点集，而不是一个序列，这意味着节点的顺序是未定义的。但是，XSLT 总是按文档顺序处理结果，因此，大多数其他 XPath API 也按文档顺序提供结果，尽管这不是正式要求。

一个完全独立的主语是谓词中“position()”的含义。松散地， position() 是指节点到上下文节点的距离，它与表达式结果返回的顺序无关。

# intellij-idea - 如何禁用 IntelliJs 方法名称替换

> ID：15196456
> 
> 赞同：1
> 
> 时间：2013-03-04T07:19:13.710
> 
> 标签：intellij-idea

在 IntelliJ 12.0.4 中，我发现非常烦人的是，当我键入类似于确实存在的方法名称的方法名称（对于不存在的新方法）时，当我键入“()”时，IntelliJ 会替换手动键入的name 与现有方法的名称。这在我进行 TDD 时最令人沮丧，因为我将我的“想法”写到测试中，然后我使用自动生成来创建缺失的方法。

例如

```
public class SomeTest() {
    public void myTest() {
        /*
         * Upon typing ( IntelliJ replaces the method call with givenAFooBar()
         */
        givenAFoo();
    }

    private FooBar givenAFooBar() { return new FooBar(); }
} 
```

如何禁用此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:42:57.417

这是一个已经修复的错误，您可以[下载 IDEA 12.1 EAP](http://confluence.jetbrains.com/display/IDEADEV/IDEA+12.1+EAP)构建并尝试一下。

# .htaccess - 使用 htaccess 301 重定向修复域名在 url 中出现两次

> ID：15196458
> 
> 赞同：0
> 
> 时间：2013-03-04T07:19:36.797
> 
> 标签：.htaccess, url-rewriting

我想重定向网址，例如：

```
http://www.test.com/http://www.test.com:80/forum/viewtopic.php?f=11&t=867 
```

至：

```
http://www.test.com/forum/viewtopic.php?f=11&t=867 
```

使用`.htaccess 301`重定向。

有许多带有附加查询字符串等的动态页面`?f=12&t=862`。所以我需要的是重定向：

```
http://www.test.com/http://www.test.com:80/forum/DYNAMIC_STRING 
```

至：

```
http://www.test.com/forum/DYNAMIC_STRING 
```

我使用的代码是：

```
Redirect 301 /http://www.test.com:80/forum/viewtopic.php?f=11&t=867
http://www.test.com/forum/viewtopic.php?f=11&t=867 
```

但它不起作用，因为重定向 URL 包含出现两次的域名 [在 google web master 工具中，我发现由于某些重定向不起作用和域名出现两次而丢失了许多链接。在这种情况下，域名出现了两次，我需要修复]。任何人请帮忙。

# iphone - stringByReplacingOccurrencesOfString 不起作用

> ID：15196460
> 
> 赞同：1
> 
> 时间：2013-03-04T07:19:49.447
> 
> 标签：iphone, ios, ipad, nsstring

我想用其他一些组件替换 myurl 中的一些组件，但它不起作用..

**这是我的代码片段：**

```
NSString *Url =@"http://www.myData.com/pageId=aaa&pageSize=bbb&page=2" 
```

在上面的网址中，我想`aaa`用`str1`和`bbb`替换`str2`..

```
 [Url stringByReplacingOccurrencesOfString:@"aaa" withString:str1];
    [Url stringByReplacingOccurrencesOfString:@"bbb" withString:str2];

    NSLog(@"Final Url = %@",Url); 
```

最后，当我看到我的日志时，`Final Url`不会`aaa`用..`str1``bbb``str2`

***谢谢阅读...***

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T07:21:38.310

一些字符串函数采用就地替换，但其他字符串函数返回一个替换的。

完整代码如下：

```
NSString *Url = @"http://www.myData.com/pageId=aaa&pageSize=bbb&page=2";
Url = [Url stringByReplacingOccurrencesOfString:@"aaa" withString:str1];
Url = [Url stringByReplacingOccurrencesOfString:@"bbb" withString:str2];

NSLog(@"Final Url = %@",Url); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-04T07:23:38.767

该方法`stringByReplacingOccurrencesOfString:withString:`返回`NSString`，您需要存储该方法。

您只是转储返回的值并期望更改调用者。

您需要使用：

```
Url=[Url stringByReplacingOccurrencesOfString:@"aaa" 
                                   withString:str1];
Url=[Url stringByReplacingOccurrencesOfString:@"bbb" 
                                   withString:str2]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T07:30:04.113

使用下面的代码，它在我的最后工作得很好。我已经测试过了。

```
NSString *Url =@"http://www.myData.com/pageId=aaa&pageSize=bbb&page=2";
    NSString *str1 = @"str1";
    NSString *str2 = @"str2";

    Url = [Url stringByReplacingOccurrencesOfString:@"aaa" withString:str1];
    Url = [Url stringByReplacingOccurrencesOfString:@"bbb" withString:str2];

    NSLog(@"Final Url = %@",Url); 
```

输出将是：最终网址 = [http://www.myData.com/pageId=str1&pageSize=str2&page=2](http://www.myData.com/pageId=str1&pageSize=str2&page=2)

祝一切顺利 ！！！

# php - Magento：以编程方式为购物车上的商品创建订单

> ID：15196461
> 
> 赞同：1
> 
> 时间：2013-03-04T07:19:51.070
> 
> 标签：php, magento, magento-1.7

我正在尝试为购物车项目手动创建订单，付款将在现场手动完成，客户也将以编程方式创建。有点像pos

我搜索了很多，发现了这些

[http://incho.net/ecommerce/magento/programmatically-create-order-in-magento/](http://inchoo.net/ecommerce/magento/programmatically-create-order-in-magento/)

[http://pastebin.com/8cft4d8v](http://pastebin.com/8cft4d8v)

[在 Magento 中以编程方式创建订单](https://stackoverflow.com/questions/6877767/create-order-programmatically-in-magento)

[http://www.magentocommerce.com/boards/viewthread/294640/](http://www.magentocommerce.com/boards/viewthread/294640/)

但没有一个对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T05:22:09.990

```
public function createorder(array $orderdata)
{
   $quoteId = $orderdata['quoteId'];
   $paymentMethod = $orderdata['paymentMethod'];
   $paymentData = $orderdata['paymentData'];       
   $quoteObj = Mage::getModel('sales/quote')->load($quoteId); 
   $items = $quoteObj->getAllItems();        
   $quoteObj->reserveOrderId();       
   $quotePaymentObj = $quoteObj->getPayment(); 
   $quotePaymentObj->setMethod($paymentMethod);
   $quoteObj->setPayment($quotePaymentObj);        
   $convertQuoteObj = Mage::getSingleton('sales/convert_quote');
   $orderObj = $convertQuoteObj->addressToOrder($quoteObj->getShippingAddress());
   $orderPaymentObj = $convertQuoteObj->paymentToOrderPayment($quotePaymentObj);       
   $orderObj->setBillingAddress($convertQuoteObj->addressToOrderAddress($quoteObj->getBillingAddress()));
   $orderObj->setShippingAddress($convertQuoteObj->addressToOrderAddress($quoteObj->getShippingAddress()));
   $orderObj->setPayment($convertQuoteObj->paymentToOrderPayment($quoteObj->getPayment()));  

   foreach ($items as $item) 
    {
       $orderItem = $convertQuoteObj->itemToOrderItem($item);        
       $options = array();
       if ($productOptions = $item->getProduct()->getTypeInstance(true)->getOrderOptions($item->getProduct())) 
       {
         $options = $productOptions;
       }
       if ($addOptions = $item->getOptionByCode('additional_options')) 
       {
        $options['additional_options'] = unserialize($addOptions->getValue());
       }
       if ($options) 
       {
          $orderItem->setProductOptions($options);
       }
       if ($item->getParentItem())
       {
            $orderItem->setParentItem($orderObj->getItemByQuoteItemId($item->getParentItem()->getId()));
       }
       $orderObj->addItem($orderItem);
    }

     $quoteObj->collectTotals();
     $service = Mage::getModel('sales/service_quote', $quoteObj);
     $service->submitAll();
     $orderObj->setCanShipPartiallyItem(false); 

     try 
     {
         $last_order_increment_id = Mage::getModel("sales/order")->getCollection()->getLastItem()->getIncrementId();
         return $last_order_increment_id;

     } 
     catch (Exception $e)
     {     
        Mage::log($e->getMessage());
        Mage::log($e->getTraceAsString());
        return "Exception:".$e;
     } 
```

}

# c# - 将值分配给字典数组会覆盖现有值

> ID：15196462
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:20:00.117
> 
> 标签：c#, .net

我有以下代码：

```
Dictionary<string, string>[] Records = new Dictionary<string, string>[2];         
Dictionary<string, string> newFields = new Dictionary<string, string>();

newFields["Item"] = "M1";
newFields["Value"] = "V1";

Records[0] = newFields;

newFields["Item"] = "M2"; // This also changes values in Records[0]
newFields["Value"] = "V2";

Records[1] = newFields; 
```

但是，一旦我再次分配 newFields，它也会更改 Records[0] 中的值??????????????

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:22:13.593

这是因为您引用了`newFields`to `Records[0]`！

试试这个：

```
/* .... */

Records[0] = new Dictionary<string, string>(newFields);

/* .... */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T07:22:30.100

`Records[0] = newFields;`传递参考，而不是该字典的副本。这就是为什么两者都`Records[0]`指向`newFields`同一个对象。

要复制现有`Dictionary`实例，请使用：

```
Records[0] = new Dictionary<string, string>(newFields); 
```

# android - SQLite 数据库中的外键

> ID：15196472
> 
> 赞同：1
> 
> 时间：2013-03-04T07:20:36.160
> 
> 标签：android, sql, sqlite

我的数据库中有两个表，其中 Tbl_Cart 中的主键是 Tbl_Goods 中的外键，我只是创建了 Tbl_Cart 表，但是当我想创建 Tbl_Goods 时，我执行以下查询并且 SQLite 浏览器停止，我必须立即关闭它！

我无法识别原因！

PS 我想在 Android 应用程序中使用这个数据库

这是查询：

```
CREATE TABLE IF NOT EXISTS Tbl_Goods (
Good_ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  DEFAULT 1,
FOREIGN KEY(Cart_ID) REFERENCES Tbl_Cart(Cart_ID), 
Good_Name VARCHAR(50),
Good_UnitPrice TEXT,
Quantity INTEGER); 
```

如果你能帮助我，我会很高兴的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:23:49.930

**首先创建 Cart_ID，最后设置外键。**

```
CREATE TABLE IF NOT EXISTS Tbl_Goods (
Good_ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  DEFAULT 1,
Cart_ID INTEGER,
Good_Name VARCHAR(50),
Good_UnitPrice TEXT,
Quantity INTEGER,
FOREIGN KEY(Cart_ID) REFERENCES Tbl_Cart(Cart_ID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:26:24.977

或者如果你想要一个列约束

```
CREATE TABLE IF NOT EXISTS Tbl_Goods (
Good_ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  DEFAULT 1,
Cart_ID INTEGER REFERENCES Tbl_Cart(Cart_ID),
Good_Name VARCHAR(50),
Good_UnitPrice TEXT,
Quantity INTEGER ); 
```

# google-chrome-extension - 使用注入调用 chrome.devtools.inspectedWindow.reload 会导致 Aw Snap

> ID：15196480
> 
> 赞同：1
> 
> 时间：2013-03-04T07:21:14.877
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在尝试创建一个工具来监视网页中某些 JavaScript API 的使用情况。我的计划是覆盖 JavaScript API，将调用信息存储到全局变量中，然后通过 postMessage 将其发送到内容脚本。但是，将类似下面的代码注入网页会导致“Aw Snap”错误。

```
chrome.devtools.panels.create("Test Dev Panel",
  "icon.png",
  "panel.html",
  function (panel) {
    var code = [ 
        "window.counter = 0;",
        "Array.prototype.push = function () {",
          "window.counter++;",
        "}",
        "window.addEventListener('message', function(event) {",
          "window.postMessage('Array.push() has been called ' + window.counter + ' times.', '*');",
        "}, false);"
      ];

    chrome.devtools.inspectedWindow.reload({
      injectedScript: code.join('')
    });
...
  }); 
```

这可能是一个安全限制。但是有什么方法可以实现我的目标吗？

--- 更新 --- 如果我删除 postMessage() 调用，则不会发生错误。此外，如果我删除 Array.prototype 覆盖代码，它也不会。在我看来，同时调用 postMessage() 并覆盖 Array 的原型会导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T16:49:58.653

这是 Array.prototype.push 之后的语法错误。

您需要以分号结束该行。

```
...
var code = [ 
        "window.counter = 0;",
        "Array.prototype.push = function () {",
          "window.counter++;",
        "};", //<-- Here
        "window.addEventListener('message', function(event) {",
          "window.postMessage('Array.push() has been called ' + window.counter + ' times.', '*');",
        "}, false);"
      ];
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:41:01.880

问题在于

```
"window.counter = 0;",
"Array.prototype.push = function () {",
"window.counter++;",
"}",
"window.addEventListener('message', function(event) {",
"window.postMessage('Array.push() has been called ' + window.counter + ' times.', '*');",
"}, false);" 
```

代码，我不确定你想要实现什么！

我希望您知道除非关闭窗口，否则 Counter 在帧中始终为零！

# javascript - Javascript解析int

> ID：15196491
> 
> 赞同：0
> 
> 时间：2013-03-04T07:21:35.453
> 
> 标签：javascript

当我这样做时：

```
parseInt(39,16) 
```

我明白了：

```
 57 
```

第二个论点是什么意思？

我读到这个：

```
radix   Optional. A number (from 2 to 36) that represents the numeral system to be used 
```

但是我用 16 号得到了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:23:39.053

第二个参数是您使用的数字系统 - 在您的情况下，“39”是十六进制，因为您将“16”作为第二个参数传递。

请[参阅文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)。

因此，如果您想获得十进制数，请使用：

```
parseInt(39, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:23:36.203

> 例如，基数 10 表示从十进制数、8 位八进制数、16 位十六进制数等转换。对于大于 10 的基数，字母表中的字母表示大于 9 的数字。例如，对于十六进制数（以 16 为基数），使用 A 到 F。

[ParseInt 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

# php - 套接字库退出 web 但不是 cli

> ID：15196501
> 
> 赞同：0
> 
> 时间：2013-03-04T07:22:19.570
> 
> 标签：php, sockets, wamp, command-line-interface

我最近遇到了一个奇怪的问题....我在 Windows 7 中运行 wamp...我想使用套接字，所以我启用了套接字扩展并在浏览器中检查它们是否已启用。

```
 if (!function_exists('socket_create')) {
        echo 'Unable to load the socket library. Please enable it under your php.ini file.';
        exit();
    }
    else{
        echo 'exist';
    } 
```

如果在浏览器中执行，这将进入 else ......但如果通过命令行提示符执行，则同样进入。我只是不明白这怎么可能。如果其他人遇到同样的问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:38:29.097

没关系，我明白了……因为 wamp 正在使用不同的文件来执行 apache 和 CLI

# c# - 通过 javascript 在 GridView 中设置 HiddenField 值

> ID：15196502
> 
> 赞同：0
> 
> 时间：2013-03-04T07:22:22.050
> 
> 标签：c#, javascript, asp.net

我有以下代码：

```
<asp:GridView ID="grid" runat="server" GridLines="Horizontal" Width="100%"
                AutoGenerateColumns="False" OnRowDataBound="grid_RowDataBound">
    <RowStyle CssClass="gridview" />
    <AlternatingRowStyle CssClass="gridviewalt"/>
    <Columns>
        <asp:BoundField ReadOnly="True" HeaderText="" DataField="fld1">
            <ItemStyle HorizontalAlign="Left" Width="20%"></ItemStyle>
        </asp:BoundField>

        <asp:BoundField ReadOnly="True" HeaderText="" DataField="fld2">
            <ItemStyle HorizontalAlign="Left" ></ItemStyle>
        </asp:BoundField>

        <ItemTemplate>
            <asp:Label ID="lblData"  runat="server" Width="250px" Font-Bold="false" Text='<%# Eval("val1") %>'></asp:Label>
        </ItemTemplate>

        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        <ItemStyle HorizontalAlign="Left" VerticalAlign="Middle" Width="35%" />

        </asp:TemplateField>

        <asp:TemplateField HeaderStyle-VerticalAlign="Middle" HeaderStyle-HorizontalAlign="Right" Visible="false">
           <ItemTemplate>
                <asp:HiddenField runat="server" ID="lblHdnData" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

现在在 javascript 中，我想在名为**lblHdnData**的隐藏字段中为特定行设置数据。

我知道`document.getElementById`，并设置了值，但只有当 HiddenField 不在 GridView 中时才会这样做。因为每一行都会有不同的隐藏字段和不同的对应数据。

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:43:40.743

`$('input[name$="lblHdnData"]').val('your data')`如果您喜欢使用 jquery，请尝试使用。

# perl - perl - 从输入到列的数组

> ID：15196504
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:22:25.250
> 
> 标签：perl

我一直在尝试这样做，并且我知道我做错了，但是如果有人可以提供指针帮助，我将不胜感激。我正在尝试做的是从文本文件管道中获取文件名列表，通过 for 循环将它们传递给 stat，然后让 perl 将这些行解析为如下所示的列：

列表包含：

```
/home/hack/public_html/.htaccess
/home/hack/public_html/index.php
/home/hack/public_html/list 
```

我知道这可以完全在 perl 中完成，但我明确需要将输出通过管道传输到 perl，如下所示：

```
for i in $(cat list); do stat $i | perl -wnl -e '@file=split /File:/ print @file;';done 
```

理想情况下，我想像这样从 stat 中获取输出：

```
File: `.htaccess'
Size: 177           Blocks: 8          IO Block: 4096   regular file
Device: 5dh/93d Inode: 159909615   Links: 1
Access: (0644/-rw-r--r--)  Uid: (  503/    hack)   Gid: (  503/    hack)
Access: 2013-02-24 15:09:41.000000000 -0600
Modify: 2013-02-10 14:24:04.000000000 -0600
Change: 2013-02-24 15:09:42.000000000 -0600 
```

但我只需要按列顺序排列的以下内容：

```
File: (the filename) Modify:(dates) Change:(dates) IO Block: (number) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:42:19.993

这里`@file`包含来自给定文件的数据。现在，您可以通过或来处理`@file`和搜索所需的数据`grep`，将 grepped 数据存储在一些变量中，并以您想要的任何顺序打印这些变量。`split``pattern matching`

# jqplot - 每个系列的 jqplot 图例控制。系列 showLabel 不适用于 EnhancedLegendRenderer

> ID：15196507
> 
> 赞同：5
> 
> 时间：2013-03-04T07:22:36.250
> 
> 标签：jqplot, legend, series

我希望在情节中选择性地隐藏某些系列的传说。这个[http://www.jqplot.com/docs/files/jqplot-core-js.html#Series.showLabel](http://www.jqplot.com/docs/files/jqplot-core-js.html#Series.showLabel)看起来是正确的选择。

但是使用`series:{showLabel:false}`with 似乎不起作用。

在这方面的公开（旧）票：[https ://bitbucket.org/cleonello/jqplot/issue/100/feature-request-individual-legend-control](https://bitbucket.org/cleonello/jqplot/issue/100/feature-request-individual-legend-control)

我用对了吗？也赞赏任何其他解决方法来实现这一点。

**更新：**

`showLabel`与普通的 legendRenderer 一起工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T16:50:11.260

在你的 jqplot 下面添加这一行：

```
$($("#chartXXX .jqplot-table-legend").get(0)).hide(); 
```

玩弄 get() 中的数字，因为我不确定数字是如何映射到图例元素的。此解决方案比更改增强的LegendRenderer 代码要优雅得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:34:17.480

在`draw`文件中的函数中，`jqplot.enhancedLegendRenderer.js`我们在第 132 行看到了这一点：

```
if (idx < series.length && (series[idx].show || series[idx].showLabel)){ 
```

对于上下文，这段代码是创建图例表的功能的一部分。如果将系列设置为显示（默认为`true`）或要显示系列标签，则会创建一行。这意味着要防止为系列创建图例项目，您需要隐藏整个系列本身，以及设置`showLabel`为`false`，这并不理想。

相反，请尝试将其设置`||`为`&&`- 这在我的情况下有效。首先尝试在未缩小的版本上进行更改。

**编辑：**

首先要做的是进行我在原始答案中建议的更改。

接下来，我们需要防止`tr`创建图例中的元素 if `showLabel`is `false`。就在上面提到的 if 语句之前，您将看到以下代码：

```
tr = $(document.createElement('tr'));
tr.addClass('jqplot-table-legend');
if (reverse){
    tr.prependTo(this._elem);
}
else{
    tr.appendTo(this._elem);
} 
```

将其更改为这个（我们在这里所做的只是将它包装在我们之前使用的相同 if 语句中）：

```
if (idx < series.length && (series[idx].show && series[idx].showLabel)){
    tr = $(document.createElement('tr'));
    tr.addClass('jqplot-table-legend');
    if (reverse){
        tr.prependTo(this._elem);
    }
    else{
        tr.appendTo(this._elem);
    }
} 
```

向下滚动一些（大约第 212 行），您将看到以下代码：

```
if (this.showLabels)  {
    console.log(this._elem.find('tr').length - 1);
    td2.bind('click', {series:s, speed:speed, plot: plot, replot:this.seriesToggleReplot }, handleToggle);
    td2.addClass('jqplot-seriesToggle');
} 
```

这是在图例中单击系列之一时绑定事件处理程序。我们需要做的是向对象字面量添加一个附加属性，该属性封装了传递给`click`方法的数据：

```
td2.bind('click', {series:s, speed:speed, plot: plot,
    replot:this.seriesToggleReplot,
    trIndex: this._elem.find('tr').length - 1 }, handleToggle); 
```

`trIndex`表示 HTML 表中行的实际索引。正是这一点确保了图例将删除正确的元素。

在`doLegendToggle`声明中，您将看到如下代码：

```
if (s.canvas._elem.is(':hidden') || !s.show) {
    // Not sure if there is a better way to check for showSwatches and showLabels === true.
    // Test for "undefined" since default values for both showSwatches and showLables is true.
    if (typeof plot.options.legend.showSwatches === 'undefined' || plot.options.legend.showSwatches === true) {
        plot.legend._elem.find('td').eq(sidx * 2).addClass('jqplot-series-hidden');
    }
    if (typeof plot.options.legend.showLabels === 'undefined' || plot.options.legend.showLabels === true) {
        plot.legend._elem.find('td').eq((sidx * 2) + 1).addClass('jqplot-series-hidden');
    }
}
else {
    if (typeof plot.options.legend.showSwatches === 'undefined' || plot.options.legend.showSwatches === true) {
        plot.legend._elem.find('td').eq(sidx * 2).removeClass('jqplot-series-hidden');
    }
    if (typeof plot.options.legend.showLabels === 'undefined' || plot.options.legend.showLabels === true) {
        plot.legend._elem.find('td').eq((sidx * 2) + 1).removeClass('jqplot-series-hidden');
    }
} 
```

查看对变量的这四个引用`sidx`，更改它们以使代码改为使用`trIndex`变量。为此，请将四个`sidx`引用替换为`d.trIndex`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T08:22:37.720

好吧，我结合了 jbass 和 DaFrenk 的答案，结果是：

```
$($("#chartXXX tr.jqplot-table-legend").get(0)).hide(); 
```

中的数字`get`是基于零的索引，它定义了图例表中的行。这正是我想要的。

# python - 将字符串中的 ' 替换为 \'

> ID：15196509
> 
> 赞同：4
> 
> 时间：2013-03-04T07:22:49.750
> 
> 标签：python, replace

我有一个字符串：

```
s = r"This is a 'test' string" 
```

我正在尝试替换`'`为，`\'`因此字符串如下所示：

```
s = r"This is a \'test\' string" 
```

我试过`s.replace("'","\'")`了，但结果没有变化。它保持不变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T07:24:41.783

`"\'"`仍然是一样的`"'"`- 你必须逃避反斜杠。

```
mystr = mystr.replace("'", "\\'") 
```

将其设为原始字符串`r"\'"`也可以。

```
mystr = mystr.replace("'", r"\'") 
```

另请注意，您永远不应使用`str`（或任何其他内置名称）作为变量名，因为它会覆盖内置，并且可能会在您稍后尝试使用内置时引起混淆。

```
>>> mystr = "This is a 'test' string"
>>> print mystr.replace("'", "\\'")
This is a \'test\' string
>>> print mystr.replace("'", r"\'")
This is a \'test\' string 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T07:24:28.243

您必须转义“\”：

```
str.replace("'","\\'") 
```

"\" 是一个转义序列指示符，要用作普通字符，必须自行转义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T07:25:19.510

```
>>> str = r"This is a 'test' string"
>>> print str
This is a 'test' string
>>> str.replace("'","\\'")
"This is a \\'test\\' string" 
```

您需要转义特殊字符`\`

# ember.js - 干燥 Ember 视图的最佳实践？

> ID：15196510
> 
> 赞同：1
> 
> 时间：2013-03-04T07:22:55.150
> 
> 标签：ember.js, handlebars.js

我是 Ember.js 的新手，有一个关于清理代码的问题。我正在使用 Ember(v1.0.0-rc.1)、Handlebars("1.0.0-rc.3") 和 Bootstrap(v2.3.1)。

以我的以下模板之一：

```
<form class="form-horizontal">

  <div class="control-group">
    <label class="control-label" for="inputEmail">Name</label>
    <div class="controls">
      {{view Ember.TextField valueBinding="name" id="inputEmail"}}
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="inputNumber">ID Number</label>
    <div class="controls">
      {{view Ember.TextField valueBinding="number" id="inputNumber"}}
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="inputContactName">Contact Name</label>
    <div class="controls">
      {{view Ember.TextField valueBinding="invoiceContactName" id="inputContactName"}}
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="inputContactEmail">Contact Email</label>
    <div class="controls">
      {{view Ember.TextField valueBinding="invoiceContactEmail" id="inputContactEmail"}}
    </div>
  </div>
</form> 
```

现在我有了这个丰富的视图框架，所有的重复都感觉很肮脏！问题是模板的性质......我也需要传入我正在绑定的对象，并更改模板将呈现的值。我的第一次尝试是“嵌套”Handlebars 模板……这很混乱，我什么也没有。我的第二次尝试是创建一个“预处理器”来在 Handlebars 编译模板字符串之前对其进行修改……这看起来更简洁，但根本不起作用……结果是当我们在视图上调用“模板”时是脱离上下文的方式。下面的例子：

```
App.BootstrapTextField = Ember.View.extend({
  displayLabel: null, 
  valueToBind: null,
  classNames: ['control-group'],

  templateString: '<div class="control-group">' +
                    '<label class="control-label" for="input##valueToBind##">##displayLabel##</label>' +
                    '<div class="controls">' +
                      '{{view Ember.TextField valueBinding="##valueToBind##" id="input##valueToBind##"}}' +
                    '</div>' +
                  '</div>',

  preprocessTemplate: function () {
   var template =  this.templateString.replace(/##valueToBind##/g, this.get('valueToBind'));
   return template.replace(/##displayLabel##/, this.get('displayLabel'));
  },

  template: Ember.Handlebars.compile(this.preprocessTemplate())
}) 
```

错误：

```
Uncaught TypeError: Object [object global] has no method 'preprocessTemplate' 
```

我的问题是：清理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:21:11.757

在我的脑海中，我认为使用带有 layout 属性的 Ember Mixin 可以帮助你实现你想要的。

```
App.BootstrapMixin = Em.Mixin.extend({
  layout: Em.Handlebars.compile(
              '<div class="control-group">' +
                '<label class="control-label" for="input##valueToBind##">##displayLabel##</label>' +
                '<div class="controls">' +
                  '{{yield}}' +
                '</div>' +
              '</div>')

}) 
```

然后你可以像这样定义你的自定义引导视图：

```
 App.BootstrapTextField = Em.TextField.extend(App.BootstrapMixin, {
    // your custom logic
 }) 
```

并将其包含在模板中，如下所示：

```
<form class="form-horizontal">
   {{view App.BootstrapTextField valueBinding="name" id="inputEmail"}}
   .. 
   ..
</form> 
```

我还没有完全检查以确保这一切正常（可能犯了一些愚蠢的错误或其他东西），但我认为一般的想法应该足以让你离开地面。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:07:49.853

在另一篇文章中找到了答案。问题是模板的处理使标签的“for”属性与输入元素的 id 元素匹配。这是帖子：

[为 <label> 标签使用 Ember.js 文本字段 ID](https://stackoverflow.com/questions/10468164/using-ember-js-text-field-ids-for-a-label-tag)

我的解决方案：

```
App.BootstrapTextField = Ember.View.extend({
  displayLabel: null, 
  classNames: ['control-group'],

  template: Ember.Handlebars.compile('' +
              '<label class="control-label" {{bindAttr for="view.textField.elementId"}}>' +
              '{{view.displayLabel}} </label>' +
              '<div class="controls">{{view Ember.TextField valueBinding=view.value viewName="textField"}}</div>'
                                    ),
}) 
```

使用以下模板调用：

```
{{view App.BootstrapTextField valueBinding='somefield' displayLabel='FieldName'}} 
```

# c++ - c++, windows - 处理后重置命令行参数

> ID：15196522
> 
> 赞同：1
> 
> 时间：2013-03-04T07:23:37.197
> 
> 标签：c++, windows, mfc, command-line-arguments

我有一个 Win32 应用程序，它有一个对话框，只有在进程是重新启动的进程时才会执行某些操作。大纲如下：

```
#define CMDLINE_RESTART_PROCESS "--Restart"

BOOL CheckForProcessRestart()
{
    LPTSTR szCmdLine = ::GetCommandLine()
    return ::StrStr(szCmdLine, CMDLINE_RESTART_PROCESS) != NULL;
}

BOOL CMyDialog::InitInstance()
{
    if(CheckForProcessRestart())
    {
        // Do something (like initialize certain variables, controls, etc)
    }
    // Rest of application
} 
```

在我检测到该进程是一个重新启动的进程并初始化这些控件和变量后，我的对话框将执行它​​的操作并关闭。

此对话框可通过主窗口中的菜单访问。单击该菜单按钮时，当此对话框弹出时，它将再次检测到它是重新启动的进程，因为`GetCommandLine()`将获取原始命令行参数。

我的问题是，有什么方法可以在处理完命令行参数后重置它们？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:30:13.287

据我所知，没有办法做到这一点。您最好的选择是制作一份副本并始终检查该副本。然后，您可以根据需要修改该副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:29:00.063

只需使用一个标志，`true`在第一次重新启动时设置它，然后在它是`true`.

# asp.net-mvc - 如何从 MVC 控制器返回 Json 对象以查看

> ID：15196528
> 
> 赞同：36
> 
> 时间：2013-03-04T07:23:48.570
> 
> 标签：asp.net-mvc, json

我正在做一个 MVC 应用程序，我需要将 json 对象从控制器传递到视图。

```
var dictionary = listLocation.ToDictionary(x => x.label, x => x.value);
return Json(new { values = listLocation}, JsonRequestBehavior.AllowGet); 
```

我在控制器中使用的上述代码，现在当我部署视图页面时，它会在我的浏览器中打开一个下载对话框，当打开文件时，它会根据我需要的格式为我提供 json 对象。

现在我想返回我的视图页面也想访问视图页面中的 json 对象。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-04T08:50:48.010

当你这样做时，`return Json(...)`你明确告诉 MVC*不要使用视图*，并提供序列化的 JSON 数据。您的浏览器会打开一个下载对话框，因为它不知道如何处理这些数据。

如果你想返回一个视图，`return View(...)`就像你通常做的那样：

```
var dictionary = listLocation.ToDictionary(x => x.label, x => x.value);
return View(new { Values = listLocation }); 
```

然后在您的视图中，只需将您的数据编码为 JSON 并将其分配给 JavaScript 变量：

```
<script>
    var values = @Html.Raw(Json.Encode(Model.Values));
</script> 
```

* * *

**编辑**

这是一个更完整的示例。因为我没有从你那里得到足够的上下文，所以这个示例将假定一个控制器`Foo`、一个动作`Bar`和一个视图模型`FooBarModel`。此外，位置列表是硬编码的：

**控制器/FooController.cs**

```
public class FooController : Controller
{
    public ActionResult Bar()
    {
        var locations = new[]
        {
            new SelectListItem { Value = "US", Text = "United States" },
            new SelectListItem { Value = "CA", Text = "Canada" },
            new SelectListItem { Value = "MX", Text = "Mexico" },
        };

        var model = new FooBarModel
        {
            Locations = locations,
        };

        return View(model);
    }
} 
```

**模型/FooBarModel.cs**

```
public class FooBarModel
{
    public IEnumerable<SelectListItem> Locations { get; set; }
} 
```

**视图/Foo/Bar.cshtml**

```
@model MyApp.Models.FooBarModel

<script>
    var locations = @Html.Raw(Json.Encode(Model.Locations));
</script> 
```

从您的错误消息的外观来看，您似乎在混合不兼容的类型（即`Ported_LI.Models.Locatio‌​n`和`MyApp.Models.Location`），因此，回顾一下，确保从控制器操作端发送的类型与从视图接收到的类型相匹配。特别是对于这个示例，`new FooBarModel`在控制器中匹配`@model MyApp.Models.FooBarModel`视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T07:29:16.563

您可以使用 AJAX 调用此控制器操作。例如，如果您使用 jQuery，您可能会使用以下[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)方法：

```
<script type="text/javascript">
    $.ajax({
        url: '@Url.Action("NameOfYourAction")',
        type: 'GET',
        cache: false,
        success: function(result) {
            // you could use the result.values dictionary here
        }
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T02:36:55.087

```
<script type="text/javascript">
jQuery(function () {
    var container = jQuery("\#content");
    jQuery(container)
     .kendoGrid({
         selectable: "single row",
         dataSource: new kendo.data.DataSource({
             transport: {
                 read: {
                     url: "@Url.Action("GetMsgDetails", "OutMessage")" + "?msgId=" + msgId,
                     dataType: "json",
                 },
             },
             batch: true,
         }),
         editable: "popup",
         columns: [
            { field: "Id", title: "Id", width: 250, hidden: true },
            { field: "Data", title: "Message Body", width: 100 },
           { field: "mobile", title: "Mobile Number", width: 100 },
         ]
     });
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-28T06:50:03.680

```
$.ajax({
    dataType: "json",
    type: "POST",
    url: "/Home/AutocompleteID",
    data: data,
    success: function (data) {
        $('#search').html('');
        $('#search').append(data[0].Scheme_Code);
        $('#search').append(data[0].Scheme_Name);
    }
}); 
```

# php - 如何处理 PHP Script 突然终止的情况？

> ID：15196532
> 
> 赞同：0
> 
> 时间：2013-03-04T07:24:04.670
> 
> 标签：php, mysql, phpmyadmin

我编写了一个 php 脚本来为 MYSQL 中的另一个表创建随机数据条目。我使用 while 循环进行插入操作。循环计数接近 1600，但脚本在 250 或 333 循环计数后自动终止，没有任何错误。这些问题的原因是什么。可能是什么解决方案。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:30:44.050

尝试将此添加到脚本的开头：

```
<?php
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

如果您从控制台运行脚本，例如您通过 ssh 进入服务器并运行：

```
php my_script.php 
```

那么它应该立即告诉您问题，现在可能是您通过获取网页（例如[http://www.myserver.com/my_script.php](http://www.myserver.com/my_script.php)）来运行脚本，在这种情况下您需要牢记大多数网络服务器都会在脚本上设置一个超时时间（比如 60 或 90 秒），在超时之后，它只会杀死脚本，因为它认为脚本有问题，所以它主要取决于您的服务器配置

* * *

所以问题是超时，可以尝试在脚本开头添加：

```
set_time_limit(0) 
```

但如果 php 配置为在安全模式下运行，则无法更新脚本的最大执行时间，不幸的是，您无能为力....

# c# - 有没有办法将vba宏代码添加到excel？

> ID：15196534
> 
> 赞同：4
> 
> 时间：2013-03-04T07:24:12.460
> 
> 标签：c#, excel, vba

我对现有的宏函数有问题，所以我要做的是将宏传递给 excel 我的意思是将函数（例如：a（））添加到 excel，然后运行添加的函数（“a（）”） .

注意：我有excel的路径，我必须在其中添加宏。请清楚答案。

这该怎么做？？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T12:21:20.303

*   为您的 office 版本安装 Primary Interop Assemblies Redistributable
*   添加对程序集的引用 -> 扩展 ->Microsoft.Office.Interop.Excel 和 Microsoft.VBE.Interop

    ```
    using System;
    using System.Diagnostics;
    using System.Windows.Forms;
    using Microsoft.Vbe.Interop;
    using ExcelInterop = Microsoft.Office.Interop.Excel;

    namespace WindowsFormsApplication1
    {
        public partial class AddExcelMacro : Form
        {
            public AddExcelMacro()
            {
                InitializeComponent();
                AddMacro();
            }

            public void AddMacro()
            {
                try
                {
                    // open excel file 
                    const string excelFile = @"c:\temp\VBA\test.xlsm";
                    var excelApplication = new ExcelInterop.Application { Visible = true };
                    var targetExcelFile = excelApplication.Workbooks.Open(excelFile);

                    // add standart module to file
                    var newStandardModule = targetExcelFile.VBProject.VBComponents.Add(vbext_ComponentType.vbext_ct_StdModule);
                    var codeModule = newStandardModule.CodeModule;

                    // add vba code to module
                    var lineNum = codeModule.CountOfLines + 1;
                    var macroName = "Button1_Click";
                    var codeText = "Public Sub " + macroName +"()" + "\r\n";
                    codeText += "  MsgBox \"Hi from Excel\"" + "\r\n";
                    codeText += "End Sub";

                    codeModule.InsertLines(lineNum, codeText);
                    targetExcelFile.Save();

                    // run the macro
                    var macro = string.Format("{0}!{1}.{2}", targetExcelFile.Name, newStandardModule.Name, macroName);
                    excelApplication.Run(macro);

                    excelApplication.Quit();

                }
                catch (Exception ex)
                {
                    Debug.WriteLine(ex.Message);
                    throw;
                }
            }
        }
    } 
    ```

# java - 如何获取当前正在运行的线程

> ID：15196535
> 
> 赞同：1
> 
> 时间：2013-03-04T07:24:17.353
> 
> 标签：java, multithreading, scheduled-tasks, threadpoolexecutor

我正在使用 ThreadPoolExecutor 来启动处理来自阻塞队列的请求的线程。如果队列为空，则所有这些工作线程都在等待。这使得该池中的每个线程都处于等待状态。

```
public ThreadPoolExecutor executor = new ThreadPoolExecutor(
                EngineConfiguration.numberOfSearchTask,
                EngineConfiguration.numberOfSearchTask + 10, 1000,
                TimeUnit.SECONDS, worksQueue, executionHandler); 
```

我还在预定的执行程序下启动，它试图在上述池中获取当前活动线程，当它为 0 时，它会关闭池：

```
final ScheduledFuture<?> scheduleFuture = scheduler
.scheduleAtFixedRate(new Runnable() {

    @Override
    public void run() {
        int activeThreadCount =   executor.getActiveThreads();
        if (activeThreadCount == 0) { 

SearchTaskRunner.keepRunning.set(false);
                log.warn("shutdown task runner");

            executor.shutdown();

            log.warn("shutdown scheduler");
            scheduler.shutdownNow();

        }
    }
}, 10, 10000, TimeUnit.SECONDS); 
```

问题是 10 秒后，调度程序线程获取 activeThreadCount=0 并因此关闭池。

我们知道：

> getActiveCount()：返回正在主动执行任务的线程的大概数量。

这可能无法给出处于活动状态的线程的准确数量。

无论如何我是否知道我来自第一个池的所有线程是否都处于等待状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:26:12.407

用这个

```
Set<Thread> threadSet = Thread.getAllStackTraces().keySet(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-27T11:27:09.420

使用此代码获取所有正在运行的线程并将集合转换为数组

```
Set<Thread> tSet = Thread.getAllStackTraces().keySet();
Thread[] tArray = tSet.toArray(new Thread[tSet.size()]); 
```

# silverlight - Silverlight 插件崩溃而没有错误

> ID：15196538
> 
> 赞同：0
> 
> 时间：2013-03-04T07:24:43.710
> 
> 标签：silverlight, entity-framework, mvvm

完成我的项目让我很头疼。我在 Silverlight5 中使用实体框架完成了我的项目。如果我在 localhost 中运行我的项目意味着它工作正常.. 但是在服务器中发布我的项目后意味着初始页面将运行但如果我选择下一页 Silverlight 插件会崩溃.. 这里有什么问题..？任何人都可以帮助我......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:42:11.180

几个建议：

*   你在哪里发布？检查目标并确保它具有运行您的网站的任何先决条件

*   以调试模式发布，并在 app.xaml.cs 中显示（或至少记录）任何非托管错误

*   使用您的浏览器调试工具（F12 和 ie）尤其是控制台输出来查看任何奇怪的消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:55:52.047

我放了消息框来检查执行是否正确并修复错误....

# awk - 使用 awk 以重复出现的模式打印列

> ID：15196546
> 
> 赞同：1
> 
> 时间：2013-03-04T07:25:17.770
> 
> 标签：awk

我有很宽的文件，其中包含制表符分隔的列：

```
Donna   25.07.83   Type1   A   B   C   D  E   F   G   H  ....
Adam    17.05.78   Type2   A   B   C   D  E   F   G   H  .... 
```

我想打印出所有内容，但是在第三列之后每两列打印一个标签..

```
Donna   25.07.83   Type1   AB   CD  EF   GH  ....
Adam    17.05.78   Type2   AB   CD  EF   GH  .... 
```

我认为可能有比这更聪明的方法

```
awk '{OFS="\t"} {print $1, $2, $3, $4$5, $6$7, $8$9}' 
```

等等，特别是因为我的文件中有超过 1000 列。awk 可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:10:50.133

```
awk '{for(i=1;i<=NF;i++){if(i>=4){$i=$i$(i+1);$(i+1)="";i+=1}}print}' your_file 
```

测试：

```
> cat temp
Donna   25.07.83   Type1   A   B   C   D  E   F   G   H
Adam    17.05.78   Type2   A   B   C   D  E   F   G   H
> awk '{for(i=1;i<=NF;i++){if(i>=4){$i=$i$(i+1);$(i+1)="";i+=1}}print}' temp
Donna 25.07.83 Type1 AB  CD  EF  GH 
Adam 17.05.78 Type2 AB  CD  EF  GH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:02:54.197

很恶心，但有效：

```
awk '{printf "%s\t%s\t%s",$1,$2,$3; for(i=4;i<=NF;i+=2) printf "\t%s%s",$i,$(i+1); print ""}' wide.txt 
```

`NF`是一个`awk`变量，它的值是一个数字，告诉您当前行有多少列。你会在手册中找到它。

让我们把它拆开：

```
#!/usr/bin/awk -f

{ 
  printf "%s\t%s\t\%", $1, $2, $3;  # print the first 3 columns, explicitly 
                                    # separated by TAB. No NEWLINE will be printed.

  # We want to print the remaining columns in pairs of $4$5, $6$7

  for( i = 4; i <= NF ; i+=2 )       # i is 4, then 6, then 8 ... till NF (the num. of the final column)
     printf "\t%s%s", $i, $(i+1);   # print \t$4$5, then \t$6$7, then \t$8$9 

  print ""                          # We haven't print the end-of-line NEWLINE
                                    # yet, so this empty print should do it.
} 
```

# php - 会话名称和会话 ID 更改时未设置会话

> ID：15196552
> 
> 赞同：2
> 
> 时间：2013-03-04T07:25:51.873
> 
> 标签：php, session, cookies

我想在我的管理员登录面板中更改会话名称和会话 ID。在我的管理面板中，cookie 仅设置为 http

我的问题是会话没有设置。我的代码有什么问题吗请帮忙

代码是 index.php

```
<?php
session_name("websitename");//session name changed
if (session_start()) {
    session_regenerate_id(true);//session id changed
    //$sess_name=session_name();
    setcookie("websitename", session_id(), null, '/', null, null, true);//set cookie httponly  
}

$_SESSION['admin']="login";
header("Location: home.php");
?> 
```

..................................................... .........................................................

主页.php

```
<?php
session_start();
if(!isset($_SESSION['admin']))
echo "you are logout";
else
echo "you are in home";
?> 
```

打印“您正在注销”的网站

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-03T12:17:45.527

简短的回答是插入以下行： session_name("websitename"); 作为 home.php 的第一行

为什么？对于那些发现自己在这里试图理解 PHP 中 session_name 和 session_id 之间的区别的人，我提供以下解释：

您的会话数据位于 PHP 服务器上的“数据存储区”中。通常它是一个磁盘文件，但它也可以是一个数据库，具体取决于 PHP 和应用程序在您的特定服务器上的实现方式（PHP 允许应用程序覆盖本机提供的会话存储。

您的会话数据采用“参差不齐的数组”的形式。

不规则数组使用每个会话唯一的键存储在数据存储中。

要将会话数据从数据存储区获取到您的 php 脚本，您必须拥有所需会话的正确密钥。

上面示例代码中 index.php 中发生的情况是：

1.  你做一个 session_name(); 这告诉 PHP 不要使用默认会话名称 (PHPSESSID) 来访问 cookie 数据，而是使用网站名称
2.  你做一个 session_start(); PHP 查找从浏览器发送的具有关键“网站”名称的 cookie。它没有找到，所以它通过生成一个随机会话 id 来创建一个新会话（让我们称之为“A1”；它将新的会话 id 存储在一个 cookie 中，键为“websitename”；它将会话数据初始化为一个空数组。（就像你已经完成了 $_SESSION=array();)
3.  您有一个 if 语句，您可以在其中检查会话是否已启动。你使用它的方式很奇怪。如果会话确实开始了，您重做会话开始为您所做的大部分工作（除了初始化数组之外）。此时让我们假设新的、重新生成的会话 id 为“B2”。但是，如果会话没有开始，你就会失败并执行另外两个没有任何意义的语句。如果会话没有开始设置 $_SESSION 中的管理密钥，那么重定向到 home.php 也是没有意义的，这取决于会话是否被 index.php 成功初始化。对我来说更有意义的是，如果会话启动失败，您会向系统管理员或您自己记录一条消息，表明该站点未正确配置。如果站点配置为会话，会话开始将始终返回 true。
4.  现在，您可以通过将具有键“admin”的会话变量设置为“login”的值，使其成为超级全局数组 $_SESSION 的元素。
5.  当您跌破 index.php 的底部（退出它）时，PHP 使用 cookie 中的键（即其他脚本可以找到它的“B2”）将 $_SESSION 数组的当前内容写入数据存储区。存储到数据存储区的会话数据使用键“B2”是 $_SESSION 数组，其中包含单个元素，键为“admin”，值为“login”

当您检查时，您在 home.php 中的代码我相信这是正在发生的事情：

1.  你做一个 session_start()。因为您之前没有执行 session_name()，所以 PHP 使用 PHPSESSID 的默认名称。PHP 使用会话名称 (PHPSESSID) 的键查找从浏览器发送的 cookie，但没有找到。因此它创建了一个新会话。它为会话生成一个新的随机会话 id，我们称之为“C3”；它将会话数据 ($_SESSION) 初始化为一个空数组，并使用 PHPSESSID 的键和为您的会话（“C3”）创建的随机会话 ID 的值创建一个 cookie。
2.  您在 if/else 中检查会话数据是否具有键为“admin”的元素。session 数组为空，因此 if else 选择了 false 分支并打印出用户未登录。

由于 index.php 中的“if”，您的代码比这更复杂，但为了简化问题：

您使用键“B2”将管理值存储在会话数据存储中，然后使用键“C3”在 home.php 中查找它，但找不到它。这是因为您在 index.php 中使用了“websitename”的会话名称，但在 home.php 中使用了“PHPSESSIONID”的会话名称。如果您使用 chrome 开发人员工具的资源选项卡查看 cookie，您将看到“网站名称”和“PHPSESSIONID”的 cookie。在开发人员工具中，cookie 将显示真实的、随机的会话 id（26 个字符），而不是我为本次讨论编造的两个字符会话 id。

# asp.net - 不同线程中的 HttpContext.Current.Items

> ID：15196556
> 
> 赞同：2
> 
> 时间：2013-03-04T07:26:17.413
> 
> 标签：asp.net

使用 HttpContext.Current.Items 我们可以从当前请求中访问变量

我的问题是，如果请求移动到不同的线程，我们还能访问它吗？

如果是，我们如何访问它？

我假设它会抛出空引用异常？

我正在尝试使用下面的代码，但它会引发 Null Ref Exception

```
 public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void BtnClick(object sender, EventArgs e)
    {
        HttpContext.Current.Items["txtbox1"] = txtbox1.Value;
        var t = new Thread(new Threadclas().Datamethod());
        t.Start();
                }
}

public class Threadclas
{
    public void Datamethod()
    {
        var dat = HttpContext.Current.Items["txtbox1"];
        **//how can i access HttpContext here** ?
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:27:50.933

无论 ASP.Net 决定在哪个线程上运行请求，您*始终*可以从当前请求访问。`HttpContext.Current.Items`

如果您特别询问异步操作的行为，ASP.Net 运行时将为您透明地处理所有线程问题。有关该主题的更多信息，我建议

[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

# php - 检查是否使用 css 样式启用了 cookie

> ID：15196557
> 
> 赞同：-2
> 
> 时间：2013-03-04T07:26:19.753
> 
> 标签：php, cookies

嗨，我想检查用户访问某个页面时是否启用了 cookie。我找到了下面的脚本，但想要设置警报消息的样式并且不需要重定向用户。我怎么做？请提供样品。谢谢。

```
<?php
setcookie('test', 1, time()+3600);
if(!isset($_GET['cookies'])){
header('Location:/contact.php?cookies=true');
}
if(count($_COOKIE) > 0){
} else {
echo "Please enable your cookies to use this website";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:33:08.357

您的脚本没有做什么：检查客户端的浏览器是否启用了 cookie。它的作用：检查是否设置了 $_GET-parameter 'cookies'，如果没有，则重定向到设置此参数的页面。

查看有关此主题的答案：

[检测是否在 PHP 中启用了 cookie](https://stackoverflow.com/questions/9448424/detect-if-cookies-are-enabled-in-php)

# ios - 如何在 ios 中使用 Mediaplayer 框架播放视频？

> ID：15196559
> 
> 赞同：3
> 
> 时间：2013-03-04T07:26:36.773
> 
> 标签：ios, video, media-player

在这里，我想使用 mediaplayer 框架播放 youtube 视频。为此，我遵循这个过程，1）我正在添加 mediaplayer 框架。2）我正在导入#import 头文件 3）我使用google 实现了代码

但它显示线程，

谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:47:33.970

请检查一下：

[http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-playing-video-with-the-mediaplayer-framework/](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-playing-video-with-the-mediaplayer-framework/) 以及检查这个线程： [如何使用 mpplayer 从 url 播放视频？](https://stackoverflow.com/questions/9938621/how-to-play-video-from-url-using-mpplayer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:48:58.710

请尝试一下.. 我认为这个可能对您有所帮助。

```
- (IBAction)playVideo:(id)sender
{    
    NSURL *videosURL = [NSURL URLWithString:@"YourVideoURL"];
    MPMoviePlayerController *moviePlayController = [[MPMoviePlayerController alloc]initWithContentURL:videosURL];
    [self.view addSubview:moviePlayController.view];

    [moviePlayController prepareToPlay];
    moviePlayController.controlStyle = MPMovieControlStyleDefault;
    moviePlayController.shouldAutoplay = YES;
    [moviePlayController setFullscreen:YES animated:YES];
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification
{

    MPMoviePlayerController *player = [notification object];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification object:player];

    if ([player respondsToSelector:@selector(setFullscreen:animated:)])
    {
        [player.view removeFromSuperview];
    }
} 
```

# java - 发布表单时来自tomcat的意外结果

> ID：15196560
> 
> 赞同：0
> 
> 时间：2013-03-04T07:26:42.733
> 
> 标签：java, tomcat, servlets

我在 Tomcat 7 上部署了我的简单 Java Web 应用程序，但出现了问题。

当我使用 method 将表单提交给 servlet 时`POST`，tomcat 实际上调用的`doGet()`不是`doPost()`预期的。这是我的代码：

索引.html：

```
<html>
    <body>
        <form action="http://localhost:8084/authentication" method="post">
            <input type="text" name="username">
            <input type="password" name="password">
            <input type="submit">
        </form>
    </body>
</html> 
```

AuthenticationServlet.java：

```
public class AuthenticationServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request,
                          HttpServletResponse response)
            throws ServletException, IOException {
        response.sendError(405, "Method GET is not allowed");
    }

    @Override
    protected void doPost(HttpServletRequest request,
                          HttpServletResponse response)
            throws ServletException, IOException {
        // unreachable
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        if (username == null || password == null) {
            response.sendError(400, "username and password are required");
            return;
        }

        ...
    }
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
 version="3.0">
    <filter>
        <filter-name>encoding</filter-name>
        <filter-class>foo.bar.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
    </filter>
    <servlet>
        <servlet-name>authentication</servlet-name>
        <servlet-class>foo.bar.AuthenticationServlet</servlet-class>
    </servlet>
    <filter-mapping>
        <filter-name>encoding</filter-name>
        <servlet-name>authentication</servlet-name>
    </filter-mapping>
    <servlet-mapping>
        <servlet-name>authentication</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

后来我`doGet()`改成

```
protected void doGet(HttpServletRequest request,
                     HttpServletResponse response)
       throws ServletException, IOException {
   doPost(request, response);
} 
```

虽然我在表单中输入了用户名和密码，但用户名和密码是`null`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:51:40.673

问题已经解决了：）。并感谢您的评论。

我使用 Netbeans 部署我的 Web 应用程序，它会自动部署我过去为我开发的其他不相关的应用程序。在我将 Maven 命令`mvn clean`应用于所有这些不相关的 Web 项目后，它按预期工作。

# iphone - 如何调整 UISwitch 按钮的大小？

> ID：15196564
> 
> 赞同：3
> 
> 时间：2013-03-04T07:26:55.820
> 
> 标签：iphone, ios, xcode, uitableview, uiswitch

我想调整`UISwitch`附加在`UITableView`. 我在谷歌上找到了一些帮助，并成功使用`CGAffineTransformMakeScale`了这个，但是当我改变这个开关按钮的位置时，我遇到了一个问题，它变成了它自己的原始大小可能是因为它在表格视图上，但我在`ViewDidLoad`委托中调整它的大小。这就是我正在做的事情。

```
- (void)viewDidLoad{
 switchFB = [[UISwitch alloc] initWithFrame:CGRectMake(227, 8, 79, 27)];
switchFB.transform= CGAffineTransformMakeScale(0.7, 0.7);} 
```

并在单元格中用于索引路径处的行

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{`static NSString *CellIdentifier = @"SettingsCell";`

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.backgroundColor = [UIColor clearColor];
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    } 
```

请检查我做错的地方，如果我的程序不正确，请您建议我一些更好的方法来做到这一点。这对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:33:30.840

尝试这个

```
 UISwitch *mySwitch = [UISwitch new];
mySwitch.transform = CGAffineTransformMakeScale(0.75, 0.75); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T16:59:05.370

在 iOS 8 中，我使用自定义容器视图成功调整了 UISwitches 的大小。代码看起来像这样：

```
@interface MyContainerView : UIView 

@end

@implementation MyContainerView

- (void)layoutSubviews
{
    [super layoutSubviews];

    // Center my subviews so the transform views properly
    CGPoint c = CGPointCenterOfRect(self.bounds);
    for (UIView * v in self.subviews)
    {
        v.center = c;
    }

}
@end

UISwitch  * switchFB = [[UISwitch alloc] initWithFrame:CGRectZero];
switchFB.transform= CGAffineTransformMakeScale(0.7, 0.7);

CGSize s = switchFB.intrinsicContentSize;
CGRect r = CGRectMake(0,0,s.width, s.height);
MyContainerView * v = [[MyContainerView alloc] initWithFrame:r];

[v addSubview:switchFB]; 
```

容器视图的目的有两个： - 您可以处理可以正确自动布局的东西 - 您可以将 layoutSubviews 子类化并在内置自动布局尝试后自动重新定位您的转换控件。

请注意，UISwitch 在转换时确实会调整其内在内容大小，我使用它来设置容器视图的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T02:55:18.980

我建议尝试我编写的这个库。我有一个自述文件，可以很容易地弄清楚如何使用。[SwiftySwitch](https://github.com/Sethmr/SwiftySwitch)它允许您将开关设置为您想要的任何大小。即使您不想使用该库，您也可以看到我是如何制作自定义开关的。

# php - 尝试使用 codeigniter 验证表单

> ID：15196565
> 
> 赞同：0
> 
> 时间：2013-03-04T07:27:10.213
> 
> 标签：php, forms, codeigniter

嗨，我正在尝试制作一个简单的验证表单，但由于某种原因它无法正常工作帮帮我 tnx 为你提供帮助。我得到的只是找不到错误消息页面，并且表单本身没有验证。当我单击提交按钮时，它会转到此 url`HTTP://localhost/Surva/index.php/info/validation`

**控制器**

```
<?php

class Info extends CI_Controller{

 public function index(){
 $this->load->view('info_view');

 $data ['name'] =        $this->input->post('name');
 $data ['second_name'] = $this->input->post('second_name');
 $data ['phone'] =       $this->input->post('phone');   
 $data ['email'] =       $this->input->post('email');

 if($this->input->post('submit')){

     $this->form_validation->set_rules('name', 'Name', 'required|alpha|xss_clean');
     $this->form_validation->set_rules('second_name', 'Second Name', 'required|alpha|xss_clean');
     $this->form_validation->set_rules('email', 'Email', 'required|valid_email');

     if ($this->form_validation->run()){

         $this->info_model->add_record($data);

     }
 }
     $this->load->view('survay_view');
 }

 }

?> 
```

**看法**

```
<html>
    <head>
    </head> 
 <body>

   <?php 
   echo validation_errors();
   echo form_open('info/validation'); ?>
     <ul id="info">  

       <li><label for='name'>Name:</lable><?php echo form_input('name')?></li>

       <li><label for='second_name'>Second Name:</lable> <?php echo form_input('second_name');?> </li>

       <li><label fro='phpne'>Phone:</lable> <?php echo form_input('phone');?></li>

       <li><label for='email'>Email:</lable><?php echo form_input('email');?></li>

       <li><?php echo form_submit('submit', 'Start survay!!' );?></li>
     </ul>  

 <?php echo form_close();?>
  </body>
</html> 
```

**模型**

```
<?php

class Info_model extends CI_Model {

    function get_records()
          {
          $query = $this->db->get('credentials');

          return $query->result();   
          }

    function add_record($data)
          {
          $this->db->insert('credentials', $data);
          return;
       }

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:47:49.823

```
echo form_open('info/validation'); 
```

您的表单要求进入名为“Info”的控制器和一个名为“validation”的函数。

您的控制器没有该功能。

尝试将其更改为：

```
echo form_open('info'); 
```

因为您正在索引函数中进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:30:30.240

在控制器中加载 form_validation 库，您忘记加载它。

```
public function index(){
 $this->load->view('info_view');
 $this->load->library('form_validation');  // load library.
 ...............

} 
```

改变

```
 echo form_open('info/validation'); 
```

至

```
 echo form_open('info/'); 
```

# javascript - 具有克隆行的单选按钮数组

> ID：15196569
> 
> 赞同：0
> 
> 时间：2013-03-04T07:27:48.690
> 
> 标签：javascript

我有一个表格，如果用户单击“添加行”，则该行会被丑化。我的问题是单选按钮，单选按钮组的名称保持不变，我需要让它们对每个克隆的行都是唯一的。这就是我现在的样子。

```
 <input type="radio" name="chronic_l_duration[]" value="Chronic" />
 <input type="radio" name="chronic_l_duration[]" value="Limited duration" /> 
```

我想要的是这样的：

```
<input type="radio" name="chronic_l_duration[1]" value="Chronic" />
<input type="radio" name="chronic_l_duration[1]" value="Limited duration" /> 
```

当添加另一行时结束，它将转到：

```
 <input type="radio" name="chronic_l_duration[2]" value="Chronic" />
 <input type="radio" name="chronic_l_duration[2]" value="Limited duration" /> 
```

我用来克隆一行的Javascript：

```
 $(document).ready(function(){
    var clonedRow = $('.row').clone().html();
    var appendRow = '<tr class = "row">' + clonedRow + '</tr>';  

    $('#btnAddMore').click(function(){

    $('.employmentHistoryForm tr:last').after(appendRow);
    });

    $('.deleteThisRow').live('click',function(){
    var rowLength = $('.row').length;

    if(rowLength > 1){
    deleteRow(this);
    }else{
    $('.employmentHistoryForm tr:last').after(appendRow);
    deleteRow(this);
    }
    });

    function deleteRow(currentNode){
    $(currentNode).parent().parent().remove();
    }
    }); 
```

因此，每次克隆行获取时，单选按钮都有一个唯一值。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:36:16.057

您可以使用 访问附加的行，`$('.employmentHistoryForm tr:last')`然后修改输入的名称：

```
$('#btnAddMore').click(function(){
   $('.employmentHistoryForm tr:last').after(appendRow);
   $('.employmentHistoryForm tr:last input[type="radio"]').attr('name', 'desired value');
}); 
```

# jqgrid - 如何从头开始重新创建导航网格？

> ID：15196571
> 
> 赞同：0
> 
> 时间：2013-03-04T07:27:52.007
> 
> 标签：jqgrid

可以说我有

```
var user.colModel = {"name":'agentNo',"index":'agentNo', "width":100, "align":"center","editable":true};

jQuery("#navgrid").jqGrid(
        "navGrid",
        "#pagernav", 
        {   edit:true,add:true,del:true,refresh:true,search:false,
            afterRefresh: function(){
                $("#navgrid").setGridParam({'datatype':'json'}).trigger('reloadGrid');
            }
        }, //options 
        {   
            "height":450,
            "width":350,
            onInitializeForm:function()
            {
                // agent
                $('#agentNo').prop('disabled',true);
            },
            afterSubmit : function(response, postdata)
            {},
            closeAfterEdit : true,
            reloadAfterSubmit: true
        }, // edit options 
        {
            "height":450,
            "width":350,
            onInitializeForm:function()
            {},
            afterSubmit : function(response, postdata)
            {},
            closeAfterAdd : true,
            reloadAfterSubmit: true
        }, // add options 
        {
            afterSubmit : function(response, postdata)
            {},
            reloadAfterSubmit: true
        }, // del options 
        {} // search options 
); 
```

我在数据中有一个 col (agentNo)，只允许在添加数据时填写，但在编辑数据时限制填写。但是现在我在编辑某些项目后插入新数据时遇到问题，我禁用了编辑属性中的文本输入以防止用户编辑数字代理，

如何重新创建 navGrid 以允许填充文本输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:19:30.950

如果我理解正确您的问题，您应该使用[recreateForm: true](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)表单编辑选项。您应该为添加和编辑对话框设置选项。

# grails - 如何使用 Grails Activiti 插件构建我们自己的工作流系统

> ID：15196572
> 
> 赞同：4
> 
> 时间：2013-03-04T07:27:59.890
> 
> 标签：grails, workflow, grails-plugin, activiti

我想使用 Grails Activiti 插件构建自己的工作流系统。执行此操作的程序是什么？谁能帮我吗？

我已经参考了这个[文档](https://code.google.com/p/grails-activiti-plugin/)并给出了一个[例子](https://code.google.com/p/grails-activiti-plugin/wiki/VacationRequestSampleApplication)。

我已经在我的项目中安装了 Grails Activiti 插件。我还在我的项目中下载并安装了假期请求示例应用程序，并查看了它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-17T20:52:18.327

现在，我认为没有分步说明可以指导您完成 Grails Activiti 插件的实现。我在一条类似的船上（一个使用 Grails 的开发商店，想要实现一个工作流引擎），到目前为止，Activiti 插件并没有真正有用。那些使用它的[人实际上似乎并没有利用它在 GORM 和 Activiti 之间提供的集成](https://groups.google.com/d/msg/grails-activiti-plugin/aXJRxaom9ac/wmc57WjKqWcJ)。

概括地说，这里是我推荐的在 Grails 中使用 Activiti 的步骤；您可能会接受或离开 Activiti 插件。

1.  [在您的数据库中创建 Activiti 引擎](http://www.activiti.org/userguide/#creatingDatabaseTable)。如果您使用内存中的 H2 数据库并让 Grails 执行创建/删除语句，则可能需要将 h2 脚本添加到应用程序的启动过程中。
2.  以 BPMN 2.0 XML 格式在 Grails 应用程序中映射您想要的流程。您可以使用[Activiti Eclipse Designer](http://www.activiti.org/userguide/#activitiDesigner)，它可以很好地插入 GGTS，在某个地方启动 Activiti Explorer 并使用基于 Web 的设计器，或者您自己编写原始 XML。
3.  将 Activiti 作为依赖项包含在 Grails 应用程序中。您可以通过在 BuildConfig.groovy 中包含 Activiti Grails 插件来实现这一点，或者仅将 Activiti 引擎 jar 作为依赖项包含在内（见下文）。
4.  使用对[Activiti 引擎 API 的调用](http://www.activiti.org/userguide/#chapterApi)（最好来自 Grails 服务）来部署您的流程模型，启动流程的各个实例，并在工作流程中移动各个步骤。
    *   您可能需要将有关 Grails 域对象的信息作为流程变量传递，然后稍后再将它们提取出来。弄清楚让 Grails 将数据保存在域对象中的哪个位置，以及让 Activiti 将其作为流程变量保存在何处，这只是开发人员需要考虑的问题。

一般来说，我的经验法则是让 Activiti 处理*流程*，而 Grails 处理其他所有事情（UI、数据持久性和操作、验证等）。

我推荐这种方法，这样您仍然可以使用 Grails 通过控制器和 GSP 管理所有用户界面，并通过域对象和服务管理大部分对象模型。Activiti 团队正在构建的 UI 没有任何问题，但它基于[Vaadin](https://vaadin.com/home)，这是它自己的 Java/UI 框架，具有自己的特点和理念。我确信超级开发人员可以将它们无缝地结合起来，而且可能已经有了，但除非他/她下山教我，否则我将不得不限制我将尝试的工具的数量立即掌握。:)

# 如何将 Activiti 作为依赖项包含在内

在您的 BuildConfig.groovy 文件中，在您的依赖项和存储库闭包中包含以下内容：

```
repositories {
    inherits true // Whether to inherit repository definitions from plugins

    mavenRepo "https://maven.alfresco.com/nexus/content/groups/public/"
    //any other repositories you need go here, including grailsCentral(), etc.
}
dependencies {
    compile("org.activiti:activiti-engine:5.13"){
        excludes "spring-beans"
    }
} 
```

您不必排除 spring-context 依赖项，但 Grails 2.3.1 确实使用了比 Activiti 5.13 更高版本的 Spring。在我试过的 2/3 机器上，没问题，Grails 只是使用 Spring 的较新版本，忽略了 Activiti 所需的旧版本。然而，[在一台机器上，这种差异导致了一个难以追踪的棘手异常](https://stackoverflow.com/questions/19845734/grails-2-3-1-on-mac-classnotfound-nouniquebeandefinitionexception)。

# c# - 在 C# 的变量声明中使用逗号和类名？

> ID：15196574
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:28:02.933
> 
> 标签：c#

我可以理解后者的使用。你能解释一下以下逗号的用法吗？

```
private WaveGestureTracker[,] 
    _PlayerWaveTracker = new WaveGestureTracker[6, 2]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:29:21.197

`WaveGestureTracker[,]`表示 的二维数组`WaveGestureTracker`，`[6,2]`最后将数组的大小设置为*6x2*。

查看 MSDN 文章：[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)

# android - Android 分段单选按钮

> ID：15196578
> 
> 赞同：1
> 
> 时间：2013-03-04T07:28:42.603
> 
> 标签：android, radio-button, uisegmentedcontrol, radio-group

![在此处输入图像描述](../Images/2b97699d5f7525f847f655f259ed59ff.png)

我已经从[https://github.com/makeramen/android-segmentedradiobutton](https://github.com/makeramen/android-segmentedradiobutton)导入了这个方法。单击每个按钮时如何显示视图（可能是 Listview、Imageview 或其他）。

这是代码..

```
 @Override
public void onCheckedChanged(RadioGroup group, int checkedId) {
    // TODO Auto-generated method stub
    if (group == segmentText) {
        if (checkedId == R.id.button_one) {

            Toast.makeText(getApplicationContext(), "Featured",
                    Toast.LENGTH_SHORT).show();
        } else if (checkedId == R.id.button_two) {

            Toast.makeText(getApplicationContext(), "NearBy",
                    Toast.LENGTH_SHORT).show();
        } else if (checkedId == R.id.button_three) {
            Toast.makeText(getApplicationContext(), "Whatsup",
                    Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T12:47:21.633

如上所述，您可以实施一些方法：

**解决方案 1：**在单击相关按钮时设置特定布局的可见性。

**解决方案 2：**您可以`ViewFlipper`采用 3 种不同的布局，您只需设置编号。子项一次显示在 ViewFlipper 中。

# php - 在 PHP 中获取上周日的日期

> ID：15196587
> 
> 赞同：11
> 
> 时间：2013-03-04T07:29:30.513
> 
> 标签：php, mysql, datetime, cron

我正在使用**cron 作业**在我的数据库上生成每周报告。基本上，报告生成脚本是用 PHP 编写的。我安排了一个每日 cron 作业。

我的报告周从周日开始。

我只希望报告生成脚本生成报告，从上周日到上周一的前一周。

举个例子。

> 今天是 2013 年 3 月 4 日。当脚本运行时，它应该生成 2013 年 2 月 24 日到 2013 年 3 月 3 日的报告。明天，当脚本运行时，它也应该只运行 2013 年 2 月 24 日到 2013 年 3 月 3 日的报告。

如何在我的脚本中自动获取上**周日的日期？**

目前，我使用以下代码进行硬编码：

```
$startDate = strtotime("13 January 2013");

$strStartDate = date ("Y-m-d 00:00:00", $startDate);
$strEndDate = date ("Y-m-d 23:59:00", $startDate + (6*24*60*60)); 
```

任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-04T07:37:39.047

**上周日**

```
echo date('Y-m-d',strtotime('last sunday')); 
```

*编辑答案：*

**最后上周日**

```
echo date('Y-m-d',strtotime('last sunday -7 days')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-13T05:53:51.147

```
<?php
$date=date("Y-m-d");
echo "Current Date : ".$date."<br>";
echo "last Sunday : ".date('Y-m-d', strtotime($date.'last sunday'));
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T15:00:53.667

## 介绍

老实说，我不确定你的意思，`is it possible using function?`但我想你想要一个通用函数，但我认为一个简单的类也可以解决问题。

**观察**

> 它也应该只运行 2013 年 2 月 24 日至 2013 年 3 月 3 日的报告。

请注意，如果您正在绘制图形或将其用于分析，则 from `Sunday 24 Feb 2013`to `Sunday 3 March 2013`is `8 days`and more than `1 weeks`which 可能会导致数据。`overlapping`我建议您将其限制 `1 weeks`为`Sunday, 24 Feb 2013``Saturday, 2 March 2013`

这就是我的意思

```
// imagine today is Today is 4 March 2013
$today = DateTime::createFromFormat("d F Y", "4 March 2013");

$date = new PeroidDate();
vprintf("%s to %s", $date->getPeroid($today)); 
```

输出

```
 Sunday, 24 February 2013 to Saturday, 02 March 2013 
```

## 其他例子

**示例 1**

```
// Example
$date = new PeroidDate();
print_r($date->getPeroid()); 
```

输出

```
stdClass Object
(
    [start] => Sunday, 31 March 2013
    [end] => Saturday, 06 April 2013
)

//or
Sunday, 31 March 2013 
```

**示例 2**

让我们想象一下，您想获得`before valentine period`“2 月 14 日之前”的报告

```
print_r($date->getPeroid(new DateTime("2013-02-14"))); 
```

输出

```
stdClass Object
(
    [start] => Sunday, 03 February 2013
    [end] => Saturday, 09 February 2013
) 
```

**示例 3**

让我们想象一下，您想要一个日期范围而不是单个范围，例如。你想要`January 1`^(st)和 the之间的日期`Current Time`（*可能你想将它用于选择框*）然后你使用`PeroidDate::getBetween`

```
print_r($date->getBetween(new DateTime("2013-1-1"), new DateTime())); 
```

输出

```
Array
(
    [0] => stdClass Object
        (
            [start] => Sunday, 06 January 2013
            [end] => Saturday, 12 January 2013
        )

    [1] => stdClass Object
        (
            [start] => Sunday, 13 January 2013
            [end] => Saturday, 19 January 2013
        )

    [2] => stdClass Object
        (
            [start] => Sunday, 20 January 2013
            [end] => Saturday, 26 January 2013
        )

    [3] => stdClass Object
        (
            [start] => Sunday, 27 January 2013
            [end] => Saturday, 02 February 2013
        )

    [4] => stdClass Object
        (
            [start] => Sunday, 03 February 2013
            [end] => Saturday, 09 February 2013
        )

    [5] => stdClass Object
        (
            [start] => Sunday, 10 February 2013
            [end] => Saturday, 16 February 2013
        )

    [6] => stdClass Object
        (
            [start] => Sunday, 17 February 2013
            [end] => Saturday, 23 February 2013
        )

    [7] => stdClass Object
        (
            [start] => Sunday, 24 February 2013
            [end] => Saturday, 02 March 2013
        )

    [8] => stdClass Object
        (
            [start] => Sunday, 03 March 2013
            [end] => Saturday, 09 March 2013
        )

    [9] => stdClass Object
        (
            [start] => Sunday, 10 March 2013
            [end] => Saturday, 16 March 2013
        )

    [10] => stdClass Object
        (
            [start] => Sunday, 17 March 2013
            [end] => Saturday, 23 March 2013
        )

    [11] => stdClass Object
        (
            [start] => Sunday, 24 March 2013
            [end] => Saturday, 30 March 2013
        )

    [12] => stdClass Object
        (
            [start] => Sunday, 31 March 2013
            [end] => Saturday, 06 April 2013
        )

    [13] => stdClass Object
        (
            [start] => Sunday, 07 April 2013
            [end] => Saturday, 13 April 2013
        )

) 
```

## 使用的类

```
class PeroidDate {
    private $format;
    private $interval;

    function __construct() {
        $this->format = "l, d F Y";
        $this->interval = new DateInterval('P7D');
    }

    function setFormat($format) {
        $this->format = (string) $format;
    }

    function setInterval(DateInterval $format) {
        $this->format = $format;
    }

    function getPeroid(\Datetime $date = null) {
        $end = $date ?  : new DateTime();
        $end->modify("Last Sunday");

        print_r($end->format($this->format));

        $start = clone $end;
        $start->sub($this->interval);

        $end->modify("-1 day"); //

        return (object) array(
                "start" => $start->format($this->format),
                "end" => $end->format($this->format)
        );
    }

    function getBetween(Datetime $start = null, Datetime $end = null) {
        if ($start > $end)
            throw new InvalidArgumentException("`Start date` Must be greater than `End date`");

        if ($start === null) {
            $start = new DateTime();
            $start->modify("First Sunday of January");
        } else {
            $start->modify("First Sunday");
        }

        if ($end === null) {
            $end = new DateTime();
            $end->modify("Last Sunday of December");
        }

        $range = array();
        while ( $start < $end ) {
            $r = new stdClass();
            $r->start = $start->format($this->format);
            $start->add($this->interval);

            $tmp = clone $start;
            $tmp->modify("-1 day");

            $r->end = $tmp->format($this->format);
            $range[] = $r;
        }
        return $range;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T07:37:17.373

使用此代码。

```
echo date('m/d/Y', strtotime('last Sunday')); 
```

你可以根据今天得到上周日。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T07:51:42.600

试试这个

```
$sun =  date('Y-m-d',strtotime('last sunday'));
echo date('Y-m-d', strtotime('last Sunday', strtotime($sun))); 
```

它会回来`2013-02-24`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-13T07:59:27.770

由于这个问题也被标记为 MySql，如果您需要计算查询中的间隔，您可以使用以下内容：

```
SELECT
  '2013-03-04' - INTERVAL (WEEKDAY('2013-03-04')+1) % 7 DAY - INTERVAL 1 WEEK start_date,
  '2013-03-04' - INTERVAL (WEEKDAY('2013-03-04')+1) % 7 DAY end_date 
```

然后要生成报告，您可以使用 CURDATE()：

```
SELECT *
FROM   your_tables
WHERE  ... AND
       report_date BETWEEN
         CURDATE() - INTERVAL (WEEKDAY(CURDATE())+1) % 7 DAY - INTERVAL 1 WEEK
         AND CURDATE() - INTERVAL (WEEKDAY(CURDATE())+1) % 7 DAY 
```

# javascript - SockJS 对 WebSockets 使用无效的 URL

> ID：15196589
> 
> 赞同：2
> 
> 时间：2013-03-04T07:29:34.827
> 
> 标签：javascript, node.js, websocket, sockjs

使用 SockJS 的 0.3 和开发版本，我尝试运行 echo 服务器/客户端演示，在客户端它回退到 XHR 流，控制台中出现以下错误：

```
Wrong url scheme for WebSocket http://localhost:9999/ws/014/ti0jz5iw/websocket 
```

它可能应该在哪里使用 ws:// 模式。

在客户端，我正在连接：

```
var sock = new SockJS('echo'); 
```

服务器是[sockjs-node echo server](https://github.com/sockjs/sockjs-node/blob/master/examples/echo/server.js) demo。

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:31:55.977

解决了。由于某种原因，现在使用 URL`http://localhost:9999/echo`可以正常工作。

# php - 将php变量传递给javascript

> ID：15196590
> 
> 赞同：0
> 
> 时间：2013-03-04T07:29:35.330
> 
> 标签：php, javascript

我有一个存储文件路径的变量。我正在使用弹出窗口来显示该图像。我正在使用以下脚本

```
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes') 
```

使用它作为

```
echo '<td width="150"><a href="JavaScript:newPopup(\'ajax-loader.gif\');">ScreenShot</a></td>'; 
```

当我给出未存储在如上所述变量中的名称时，脚本可以正常工作。但是当我尝试给变量 $end_file 时，它​​不起作用。我试过以下组合

```
 echo '<td width="150"><a href="JavaScript:newPopup(\''.'$end_file'.'\');">ScreenShot</a></td>';
 echo '<td width="150"><a href="JavaScript:newPopup(\'{$end_file}\');">ScreenShot</a></td>'; 
```

但似乎没有一个工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:31:04.863

`'$end_file'`删除第一个示例中的引号，它应该可以工作。

```
echo '<td width="150"><a href="JavaScript:newPopup(\''.$end_file.'\');">ScreenShot</a></td>'; 
```

对于第二个示例，我相信您必须使用双引号才能使字符串迭代起作用。

```
echo "<td width='150'><a href='JavaScript:newPopup(\"$end_file\");'>ScreenShot</a></td>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:32:22.933

```
echo '<td width="150"><a href="JavaScript:newPopup(\"'.$end_file.'\");">ScreenShot</a></td>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:33:29.170

您可以简单地执行以下操作：

```
<?php
$x="PHP";
?>    
<script>alert("Hello from <?php echo $x;?>");</script> 
```

# android - 在片段中使用 FragmentPagerAdapter

> ID：15196596
> 
> 赞同：7
> 
> 时间：2013-03-04T07:29:56.643
> 
> 标签：android, android-fragments, android-viewpager, android-support-library

我在一些 Android 代码中做了一些重构，我在直接连接到 Activity 的视图中使用 FragmentPagerAdapter 和 ViewPager。作为重构的一部分，FragmentPageAdapter 然后从 Activity 移动到一个单独的 Fragment（现在是该 Activity 的子项）。

这种变化并不顺利。例如，在方向更改后，缓存的选项卡会消失。NullPointerExceptions 在我的 Fragment 子类中随处可见，因为 findViewById 无法找到它的视图组件（看起来片段的视图层次结构在旋转更改后以某种方式被破坏）。

我正在使用最新版本的 Android 支持库。

关于出了什么问题的任何想法？

编辑：

我目前的实现：

```
public class TabsPageAdapter extends FragmentPagerAdapter {

    ...

    @Override
    public Fragment getItem(int index) {
        // tabs = list of Fragment instances created in contructor of pager adapter - bad habbit?
        return tabs.get(index).getTabFragment();
    }

    ...

}

public class StatsFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.stats_view, container, false);

        TabsPageAdapter adapter = new TabsPageAdapter(getActivity().getSupportFragmentManager(), getActivity());
        ViewPager viewPager = (ViewPager) root.findViewById(R.id.tabPager);
        viewPager.setAdapter(adapter);
        viewPager.setOffscreenPageLimit(3);
        TabPageIndicator pageIndicator = (TabPageIndicator) root.findViewById(R.id.tabIndicator);
        pageIndicator.setViewPager(viewPager);  
        return root;
    }
}

public class MedalsTab extends Fragment {

    private MedalAdapter adapter;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.medals, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);
        this.adapter = new MedalAdapter();
        GridView gridView = (GridView) getActivity().findViewById(R.id.grdMedals);
        // Nullpointerexception is thrown here
        gridView.setAdapter(adapter);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        //first saving my state, so the bundle wont be empty.
        //http://code.google.com/p/android/issues/detail?id=19917
        outState.putString("WORKAROUND_FOR_BUG_19917_KEY", "WORKAROUND_FOR_BUG_19917_VALUE");
        super.onSaveInstanceState(outState);
    }

    ...

} 
```

在浏览寻呼机适配器中的选项卡时，我也遇到了这个异常。

```
E/AndroidRuntime(28706): java.lang.NullPointerException
E/AndroidRuntime(28706):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T00:06:45.373

这是我解决问题的方法：

我更改了 getItem 方法来构造并返回一个新实例（感谢 Luksprog）：

```
 @Override
    public Fragment getItem(int index) {
        return tabs.get(index).constructFragment();
    } 
```

我们需要使用返回的 FragmentManager`getChildFragmentManger()`而不是`getActivity().getFragmentManager()`创建片段，因为 ViewPager 驻留在片段中：

```
TabsPageAdapter adapter = new TabsPageAdapter(getChildFragmentManager(), getActivity()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T08:55:13.190

> // tabs = 在寻呼机适配器的构造器中创建的 Fragment 实例列表 - 坏习惯？

是的，这很糟糕，可能是轮换后问题的根源。当需要在页面中显示片段时，`ViewPager`将使用该方法获取片段。`getItem`轮换后，`ViewPager`将检查其状态并查看之前有多少片段，并在没有该`getItem`方法的情况下手动恢复它们。如果您在此机制之外保存片段，您要么需要更改适配器，使其仅使用列表中的片段（`getItem()`还不够），要么更新片段列表以仅引用由`ViewPager`. 您很可能不这样做，并且在轮换之后您尝试访问列表片段，假设它们是来自`ViewPager`, 的动作，它将抛出`NullPointerException`.

> GridView gridView = (GridView) getActivity().findViewById(R.id.grdMedals);

如果那`GridView`在`Fragment`的布局中，请通过 访问它`getView().findViewById...`。

# html - 最小高度主要区域后到页面底部的页脚

> ID：15196598
> 
> 赞同：0
> 
> 时间：2013-03-04T07:30:05.303
> 
> 标签：html, css, webpage, footer

我目前正在使用网页，但遇到了问题。我希望我的页脚留在页面底部，在主要区域之后。问题是我希望主要区域位于`min-height:900px;`并且它会稍微超过页脚。

如果我向主区域添加更多文本，它可以很好地缩放，但页脚现在设置为保留在添加更多文本时`margin-top:1190px;`如何让它跟随主区域？

页面原型在这里：http: [//goo.gl/tu6s9](http://goo.gl/tu6s9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:55:03.550

@user2130814 像这样更改您的网页 CSS

```
#logomenu {
    display: block;
    height: 98px;
    left: 0;
    margin-left: auto;
    margin-right: auto;
    margin-top: 20px;
    position: relative;
    right: 0;
    width: 960px;
    z-index: 3;
}
#intro {
    display: block;
    height: 198px;
    left: 0;
    margin: 0 auto;
    position: relative;
    width: 960px;
    z-index: 3;
}
#sisalto {
       background-color: #E8E8E8;
display: block;
margin: 0 auto;
min-height: 900px;
opacity: 0.9;
overflow: hidden;
padding-left: 30px;
padding-right: 30px;
padding-top: 30px;
position: relative;
right: 0;
width: 900px;

 }

 #footer {
    background-image: url("images/bottom.jpg");
    clear: both;
    height: 215px;
    min-width: 1100px;
    position: relative;
    text-align: center;
    width: 100%;
    z-index: 0;
}

#footersisennys {
    display: block;
    height: 145px;
    left: 0;
    margin-left: auto;
    margin-right: auto;
    padding-left: 30px;
    padding-right: 30px;
    padding-top: 30px;
    position: relative;
    right: 0;
    width: 900px;
    z-index: 5;
} 
```

# jquery - 在 jQuery 的其他指令中使用 ng-repeat

> ID：15196599
> 
> 赞同：3
> 
> 时间：2013-03-04T07:30:10.613
> 
> 标签：jquery, angularjs, angularjs-directive

首先，如果以下问题听起来很愚蠢，我真的很抱歉。我知道有文档，但没有足够的例子，我对它很陌生。

我试图创建一个可能使用的指令`ng-repeat`
但是似乎当指令被链接时，`ng-repeat`根本没有被评估。因此，每当我尝试在函数内部调用 jQuery 函数`postlink`时，jQuery 就无法工作。

```
<div my-directive>
  <div ng-repeat="image in images">
    <img ng-src="image">
  </div>
</div> 
```

范围包含如下内容：

```
scope.images = ['http://placehold.it/100x100', 'http://placehold.it/100x100']; 
```

在指令中，我大致如下：

```
angular.module('mymodule', []).directive('myDirective', function factory() {
  return {
    restrict: 'A',
    compile: function (tElement, tAttrs, transclude) {
      // #1
      return {
        pre: function preLink(scope, iElement, iAttrs, transclude) {
          // #2
        },
        post: function postLink (scope, iElement, iAttrs, controller) {
          // #3
        }
      };
    },
    link: function postLink(scope, iElement, iAttrs) {
      // jQuery code to convert the element
      // #4
    }
  };
}); 
```

另外，把代码放在上面的#1、#2、#3、#4有什么区别？这里的经验法则是什么？
在哪里放置可能像 jQueryUI 的代码`$( "#datepicker" ).datepicker();`？因为据我了解，该函数将操纵（转换）元素及其子元素。
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:46:17.787

位置之间的主要区别（[在此处](http://docs.angularjs.org/guide/directive)解释，在**编译函数**和**链接函数**章节）`#1`是**`compile function`**. 在这里，您应该练习任何 DOM 转换，在克隆的情况下，应该克隆到所有元素。这不适用于 Datepicker，因为它不仅修改了 DOM，还需要监听其中的事件。如果添加具有指令的子元素，或者将指令添加到子元素，则在此处执行此操作仍会被编译。

`#2`是and将**`preLinking function`**在编译之后调用，但在子链接函数之前。这意味着您无法更改 DOM，因为下一次链接器迭代将尝试通过编译函数查找先前索引的元素并且会失败。`#3`是**`postLinking function`**and 在所有孩子都被链接之后被调用，它是应用单数修改、监听事件和做任何整洁的事情的最安全的地方。

您也可以返回 a`function`而不是`{pre: , post: }`对象。在这种情况下，它的行为与`#3`( `postLinking function`) 相同。最后，`#4`与 相同`#3`。当你有`#3`.

如果有多个指令，在元素本身或其子元素中， all**`compile function`**将运行，而不是 all **`preLinking functions`**，然后是 all**`postLinking functions`**

现在，**主要问题**：`#3`，如果你需要一个编译功能。如果没有，只需放弃该`compile`属性并选择`#4`.

做了一个[小提琴来说明](http://jsfiddle.net/CaioToOn/zEuCu/)这些行为。

**关于 image not loading**，您应该更改`<img ng-src="image">`为`<img ng-src="{{image}}">`您需要 Angular 来插入`src`属性。

# ssl - 不受 SSL 保护的网站

> ID：15196600
> 
> 赞同：0
> 
> 时间：2013-03-04T07:30:11.867
> 
> 标签：ssl, security

有没有办法配置浏览器或计算机，所以它会给用户一个警告或不允许打开任何不受 SSL 保护的网站？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:05:58.610

您可以阻止不会流向 443/TCP 的流量，或者如果您在主机/网络出口有“更好”的技术，请确定流量未加密并将其丢弃。就浏览器而言，也许插件可以提供帮助，但您可能希望在浏览器之外的一层执行此操作，以确保遵循此策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:47:13.707

安全套接字层 (SSL) 警告在 Web 浏览器中用于指示网页证书存在问题或可能存在中间人 (MITM) 攻击，但这种警告是无效的。

我的建议是配置网站，以防您正在开发它，当有人试图在没有 SSL 的情况下访问网站时强制使用 SSL。

例如，如果有人正在访问[http://www.mywebsite.com](http://www.mywebsite.com)，则强制将该人重定向到

看看下面的视频：

[http://www.youtube.com/watch?v=zEV3HOuM_Vw](http://www.youtube.com/watch?v=zEV3HOuM_Vw)

法比奥@fcerullo

# django - 在 django middlware 中更改响应对象

> ID：15196602
> 
> 赞同：1
> 
> 时间：2013-03-04T07:30:13.350
> 
> 标签：django, websocket, middleware

我需要修改中间件中的响应对象，所以我添加了“myproject.common.middlware.ResponseMiddleware”

```
MIDDLEWARE_CLASSES = (
'django.contrib.sessions.middleware.SessionMiddleware',  # order matters don't move
'django.middleware.gzip.GZipMiddleware',  # order matters don't move
'django.middleware.locale.LocaleMiddleware',  # order matters don't move
'django.middleware.common.CommonMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'myproject.common.middleware.ResponseMiddleware', 
```

)

但是在我的 ResponseMiddleware 中，我有以下代码：

```
class ResponseMiddleware(object):
    def process_response(self, request, response):
        if 'status_code' not in response:
            response['status_code'] = 200
        return response 
```

但是在django的CommonMiddleware等其他中间件中找不到response.status_code。我使用 Django 1.4 并且从文档中，到 process_response 的顺序与 MIDDLEWARE_CLASSES 中定义的顺序相反。所以我把我的放在最底层。

我明白了

AttributeError：“dict”对象没有来自其他中间件的属性“status_code”。

（***这与 [WebSocket在django common middleware中产生错误](https://stackoverflow.com/questions/14364441/websocket-generates-error-in-django-common-middleware)有关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:55:16.010

问题是您的中间件是第一个使用`process_response`.

`process_request`和`process_view`方法从列表的顶部到底部`process_response`执行，但从底部到顶部执行。检查 Django 文档中的以下图表：

[https://docs.djangoproject.com/en/dev/topics/http/middleware/#hooks-and-application-order](https://docs.djangoproject.com/en/dev/topics/http/middleware/#hooks-and-application-order)

因此，如果您将中间件放在列表的第一个位置，它应该可以工作。

# javascript - 使用 ContainsPoint 选择组中的对象

> ID：15196603
> 
> 赞同：1
> 
> 时间：2013-03-04T07:30:14.880
> 
> 标签：javascript, fabricjs

通过阅读有关包含点 ( [http://fabricjs.com/docs/symbols/fabric.Canvas.html#containsPoint](http://fabricjs.com/docs/symbols/fabric.Canvas.html#containsPoint) ) 的 Fabric 文档，它指出：

```
Applies one implementation of 'point inside polygon' algorithm
Parameters:
e
{ Event } event object
target
{ fabric.Object } object to test against
Returns:
{Boolean} true if point contains within area of given object 
```

因此，基于此，我尝试遍历组内的所有对象，如果 containsPoint 返回 true，则选择该对象。

但它总是返回 false；

```
canvas.on('object:selected',function(o,i) {

    console.log(o)

    if ( o.target.isType('group') ) {
        o.target.forEachObject(function(child) {
            child.setCoords();
            //always false
            console.log(canvas.containsPoint(o.e, child) );
        });
    }
}) 
```

这是 jsFiddle - 有什么想法吗？ [http://jsfiddle.net/LNt2g/1/](http://jsfiddle.net/LNt2g/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:50:45.840

解决了！有点令人费解，但它有效。我必须根据组和子对象的尺寸/位置专门计算开始和结束 x/y。

```
canvas.on('mouse:down', function(options) {

    if (options.target) {

        var thisTarget = options.target; 
        var mousePos = canvas.getPointer(options.e);

        if (thisTarget.isType('group')) {

            var groupPos = {
                x: thisTarget.left,
                y: thisTarget.top
            }

            thisTarget.forEachObject(function(object,i) {

                var objectPos = {
                    xStart: (groupPos.x - (object.left*-1) )  - (object.width / 2),
                    xEnd: (groupPos.x - (object.left*-1)) + (object.width / 2),
                    yStart: (groupPos.y - (object.top*-1)) - (object.height / 2),
                    yEnd: (groupPos.y - (object.top*-1)) + (object.height / 2)
                }

                if (mousePos.x >= objectPos.xStart && mousePos.x <= (objectPos.xEnd)) {

                    if (mousePos.y >= objectPos.yStart && mousePos.y <= objectPos.yEnd) {
                        console.log(objectPos);
                        console.log('Hit!',object);
                    }
                }

            });   
        }    

    }

}); 
```

这里更新的小提琴：http: [//jsfiddle.net/LNt2g/4/](http://jsfiddle.net/LNt2g/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-12T10:41:59.163

这里的工作示例：

```
fabric.util.object.extend(fabric.Object.prototype, {
getAbsoluteCenterPoint: function() {
  var point = this.getCenterPoint();
  if (!this.group)
    return point;
  var groupPoint = this.group.getAbsoluteCenterPoint();
  return {
    x: point.x + groupPoint.x,
    y: point.y + groupPoint.y
  };
},
containsInGroupPoint: function(point) {
  if (!this.group)
    return this.containsPoint(point);

  var center = this.getAbsoluteCenterPoint();
  var thisPos = {
      xStart: center.x - this.width/2,
      xEnd: center.x + this.width/2,
      yStart: center.y - this.height/2,
      yEnd: center.y + this.height/2
  }

  if (point.x >= thisPos.xStart && point.x <= (thisPos.xEnd)) {
      if (point.y >= thisPos.yStart && point.y <= thisPos.yEnd) {
          return true;
      }
  }
  return false;
}}); 
```

[http://plnkr.co/edit/4rlRPxwIqFIOvjrVYx8z?p=preview](http://plnkr.co/edit/4rlRPxwIqFIOvjrVYx8z?p=preview)

感谢@mindwire22 的[回答](https://stackoverflow.com/a/15210884/6053486)和[https://groups.google.com/d/msg/fabricjs/XfFMgo1Da7U/Hv7LsYa9hMEJ](https://groups.google.com/d/msg/fabricjs/XfFMgo1Da7U/Hv7LsYa9hMEJ)

# xcode - Xcode+SVN：另一个目录中的文件（项目文件夹外）

> ID：15196605
> 
> 赞同：1
> 
> 时间：2013-03-04T07:30:25.160
> 
> 标签：xcode, svn

我在这样的文件夹布局中有两个相关项目和一些通用/共享代码：

/path/to/ProjectA/ （里面是 ProjectA.xcodeproj + 它的所有源文件）

/path/to/ProjectB/（里面是 ProjectB.xcodeproj + 它的所有源文件）

/path/to/Common/（里面是 ProjectA 和 ProjectB 共享的 5 个标头）

一切都很好，只是 Xcode 没有在任一项目的 Groups & Files 窗格中显示对共享文件所做的更改。

这两个项目已分别导入到 SVN。并且共享文件夹是单独导入到SVN的。

我如何 - 在不更改文件夹布局的情况下 - 设置它，以便如果我在两个项目中的任何一个中并且我对共享文件进行了更改，Xcode 将识别出对该文件进行了更改并允许我检查更改？

# c# - 在电影 XNA 结束时停止视频播放

> ID：15196606
> 
> 赞同：0
> 
> 时间：2013-03-04T07:30:25.357
> 
> 标签：c#, xna, movie, video-player

我正在 XNA 中播放 .wmv 电影。我播放它没有问题，但我似乎无法检测到电影是否结束并停止播放电影。

这是我的做法：

```
Video video;
VideoPlayer player; 
```

关于更新方法：

```
//Playing the movie
        #region
        if (playIntroMovie == true)
        {
            player.Play(video);
            player.Volume = 1;
            if (player.State == MediaState.Stopped)
            {
                player.Stop();
                videoTexture = null;
                playIntroMovie = false;
            }
        }
        #endregion 
```

关于绘制方法：

```
if (player.State != MediaState.Stopped)
            videoTexture = player.GetTexture();
        if (videoTexture != null)
        {
            spriteBatch.Draw(videoTexture, fullScreenRec, Color.White);
        } 
```

我知道如果电影已经结束，它的状态将返回到 MediaState.Stopped 所以我试图停止它并将它的纹理设置为空。但是电影循环播放并再次播放。我包括了 player.isLooped = false; 但电影仍然循环播放。关于导致问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:24:02.113

我认为这是因为在您的 Update() 循环中，您不断调用 player.Play() （在 MediaState 第一次点击 Stopped 之前，playIntroMovie 将始终为真）。

处理 Update() 循环逻辑的更好方法是这样的：

```
if (playIntroMovie == true)
{
    player.Play(video);
    playIntroMovie = false;
    player.Volume = 1;
}

if (player.State == MediaState.Stopped)
{
   player.Stop();
   videoTexture = null;
} 
```

# python - 带有复合键的 sqlobject sqlmeta

> ID：15196608
> 
> 赞同：1
> 
> 时间：2013-03-04T07:30:35.457
> 
> 标签：python, primary-key, sqlobject

我已经像这样创建了我的 sqlobject 类并将主键设置为**prm_id**

```
import sqlobject
from connection import conn
class tbl_episodes(sqlobject.SQLObject):
        class sqlmeta:
              idName = "prm_id"
        _connection = conn
        prm_id = sqlobject.IntCol(length=30)
        showid = sqlobject.IntCol(length=30, default=None)
        show_index = sqlobject.IntCol(length=30)
        videoid = sqlobject.IntCol(length=30) 
```

但是我已经删除了主键并决定将**showid**和**show_index**作为复合主键

我应该如何调整我的班级以反映数据库的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-09T09:13:06.403

SQLObject 不支持复合主键。SQLObject 要求每个表都有一个主键，并且该键必须是单列。

通用 SQL 理论建议使用简单的唯一自增 int 作为主键。

# jquery - Kenburner 滑块在 IE 中不起作用

> ID：15196620
> 
> 赞同：5
> 
> 时间：2013-03-04T07:31:25.293
> 
> 标签：jquery, cross-browser

目前我在一个[网站](http://tourdigger.com/tourdigger)上工作，我在主页上使用了 Kenburner Slider。

Slider 在 Firefox 和 Chrome 上运行良好，但在 IE7 和更低版本中无法运行。有人可以建议我应该采取哪些步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:44:51.353

也许你应该发布你的代码。根据他们的站点[link](http://codecanyon.net/item/kenburner-slider-jquery-plugin/1249801)，它确实在 IE7 中工作（通过访问 IE7 中的示例站点，我可以确认）。

也许您应该检查示例站点以将您的代码与应有的方式相匹配。最后你的代码应该是这样的：

```
jQuery('#banner-example-1').kenburn(
{
    width:800,
    height:320,
    thumbWidth:120,
    thumbHeight:70,
    thumbAmount:6,
    thumbSpaces:0,
    thumbPadding:9,
    thumbStyle:"both",
    bulletXOffset:0,
    bulletYOffset:-80,
    repairChromeBug:"on",
    shadow:'true',
    timerShow:"on",
    touchenabled:'on',
    pauseOnRollOverThumbs:'off',
    pauseOnRollOverMain:'on',
    preloadedSlides:10,
    timer:10
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:02:58.507

根据他们的常见问题解答，您应该在任何 html 代码之前将其放在页面顶部`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

检查链接[滑块常见问题](http://wowslider.com/faq.html)

**编辑，附加信息：**

如果我在使用开发人员工具 F12 时访问链接[thepunch kenburner](http://www.themepunch.com/codecanyon/kenburner/)并将我的浏览器模式模拟为 IE7 或 IE8，则滑块可以工作。您是否查看了源代码并检查了元标记，例如 "" ？我还看到该站点使用的是 jquery 1.7，如果您使用的是更高版本，它可能不兼容。

# python - (Ubuntu) 错误：IPython Qtconsole 未启动

> ID：15196621
> 
> 赞同：0
> 
> 时间：2013-03-04T07:31:26.847
> 
> 标签：python, qt4, ubuntu-12.04, ipython

当我尝试从终端启动 Ipython qtconsole 时，出现以下错误：

```
python: /build/buildd/sip4-4.13.2/siplib/siplib.c:7915: sip_api_can_convert_to_type: Assertion `(((td)->td_flags & 0x0007) == 0x0000) || (((td)->td_flags & 0x0007) == 0x0002)' failed.
Aborted (core dumped) 
```

这可能是由于 qt 损坏的包，但我不知道是哪些！我真的可以用你的意见来解决这个问题:)。谢谢！

我使用 python 2.7.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:44:04.673

我有这个问题。当我安装 python v.3 启动 ipython：我输入控制台 ipython3。
尝试重新安装 ipython :-)
sudo apt-get remove ipython
sudo apt-get purge ipython
sudo apt-get install ipython

# d3.js - IE10 d3.v3.js 错误：无法获取未定义或空引用的属性“原型”

> ID：15196622
> 
> 赞同：20
> 
> 时间：2013-03-04T07:31:50.340
> 
> 标签：d3.js, internet-explorer-10

我的页面在 IE9、Safari、Chrome 和 Firefox 中完美加载。

但是当它到 IE10 时，它会抛出错误： 无法 在[d3.v3.js](http://d3js.org/d3.v3.js)*中获取属性“原型”的未定义或空引用* ：d3_window.CSSStyleDeclaration.prototype。

```
 try {
    d3_document.createElement("div").style.setProperty("opacity", 0, "");
  } catch (error) {
    var d3_style_prototype = d3_window.CSSStyleDeclaration.prototype, d3_style_setProperty = d3_style_prototype.setProperty;
    d3_style_prototype.setProperty = function(name, value, priority) {
      d3_style_setProperty.call(this, name, value + "", priority);
    };
  } 
```

我没有得到这里到底在做什么。

在尝试块中，即使 setProperty 方法我们可以在调试器中看到`d3_document.createElement("div").style` 它抛出*错误*： *对象不支持属性或方法'setProperty'*

在 catch 块中，它尝试访问 window 的原型`CSSStyleDeclaration`，但这是未定义的。

使用[d3.v3.js时有人遇到同样的问题](http://d3js.org/d3.v3.js)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-08-09T16:00:26.250

这可以通过以下方式解决`DOCTYPE`：

```
<!DOCTYPE html> 
```

还有一个`meta`标签：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

没有这些，IE 将进入怪癖模式并且不知道是什么`CSSStyleDeclaration`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:10:56.670

曾经随机发生过同样的问题，经过一些研究后我得出结论，在我的情况下，它设置了无效的 css 属性（从 IE 的角度来看）导致它： `someSvg.append('svg:text') .text(function (d) { return d.label; }) .attr('text-anchor', 'left')`

它应该在哪里

```
.attr('text-anchor', 'start') 
```

所以我的建议是审查所有来自脚本的样式，甚至更好 - 将它们完全移动到 css。经过这样的修复后，它应该在 IE9+ 中像魅力一样工作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T10:09:30.020

看起来这是一个已知问题，不太可能得到解决。

[https://groups.google.com/forum/?fromgroups=#!topic/d3-js/8lQ2BCR45BM](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/8lQ2BCR45BM)

解决方法是有选择地加载 d3 - 这对我有用 -

```
// load d3.js selectively
try { 
            // if this doesnt throw an error then we can load d3.js 
            // this is known to fail in IE < 8
            document.createElement("div").style.setProperty("opacity", 0, "")

            var d3Script = document.createElement( "script" )

            d3Script.src = "@Href("~/JavaScript/d3.js")"

            d3Script.onload = function (){
                // do stuff
            }

            document.getElementsByTagName("head")[0].appendChild( d3Script )
} catch( error ) {
            // upgrade your browser
} 
```

# java - 一个元素出现在链表Java中的计数次数

> ID：15196624
> 
> 赞同：1
> 
> 时间：2013-03-04T07:32:06.650
> 
> 标签：java, loops

我正在编写一种方法，该方法允许我计算 String 类型的元素在 Strings 类型的 LinkedList 中出现的次数。我下面显示的代码不起作用。我在下面评论的那一行中不断出现索引超出范围。好像找不到bug

```
public int findDuplicate (LinkedList<String> e) {
    int j = 1;
    LinkedList<String> test = e;
    while (!test.isEmpty()){
        test = e;
        String value = test.pop();
        //Screws up here when i = 6 
        for(int i =0; i<=test.size() && test.get(i)!=null; i++){ 
            String value3 = test.get(i);
            if(e.get(i).equals(value) && i<=test.size()){
                String value2 = test.get(i); 
                j++;
                String Duplicate = e.get(i);
                e.remove(i);
            }
        }
        System.out.println(value + " is listed " + j + " times");

    }
    return j;
} 
```

使用 hashmaps .. 仍然不起作用 public void findDuplicate (LinkedList e) {

```
 Map<String,Integer> counts = new HashMap<String,Integer>();

        while(!e.isEmpty()){
            String value = e.pop();
            for(int i =0; i<e.size(); i++){
                counts.put(value, i);
            }
        }
        System.out.println(counts.toString());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:34:27.507

从您的使用方式可以清楚地看出`test`，`e`您希望它们是两个独立的对象。事实上，他们不是。当您执行以下任务时：

```
 test = e; 
```

两者都`test`指向`e`同一个列表。当你改变一个时，它们都会改变。

至于解决问题的好方法，您可能希望使用 a`Map<String,Integer>`来计算每个唯一字符串在列表中出现的次数。然后，您可以只遍历列表一次，填充地图。最后，地图将给出最终计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:34:37.170

索引从 0 到`test.size()-1`. 尝试使用：

```
for(int i =0; i<test.size() && test.get(i)!=null; i++){ 
... 
```

而且，正如@NPE 指出的那样，这段代码不会正常工作，因为`e`和`test`共享同一个对象。

# java - 需要帮助修改 java 代码以满足我的要求

> ID：15196625
> 
> 赞同：0
> 
> 时间：2013-03-04T07:32:09.157
> 
> 标签：java, swing

我想在 Swing 中制作条形图，我在（Java Swing 中的演示条形图）找到了一些代码 - [http://www.java2s.com/Code/Java/2D-Graphics-GUI/Demobarchartandpiechart.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Demobarchartandpiechart.htm)

它产生三种类型的图表。但是，我只想要没有阴影的条形图。我对摇摆知之甚少，所以我无法弄清楚整个代码。

请帮我删除部分，这样只有我得到一个没有阴影的条形图。

***更新***

最后，我编辑了代码。请告诉我其中是否有任何不必要的代码 -

这是编辑后的代码。请告诉我其中是否有任何不必要的代码。我消除了几个变量，还编辑了导入语句以使该死的东西紧凑。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import javax.swing.*;

public class Charts2D extends JFrame {

public Charts2D() {
super("2D Charts");
setSize(280, 280);
getContentPane().setLayout(new GridLayout(1, 1, 10, 0));
getContentPane().setBackground(Color.white);

int[] xData = new int[8];
int[] yData = new int[8];
for (int i = 0; i < xData.length; i++) {
  xData[i] = i;
  yData[i] = (int) (Math.random() * 100);
  if (i > 0)
    yData[i] = (yData[i - 1] + yData[i]) / 2;
}

JChart2D chart = new JChart2D(xData.length, xData, yData,"Column Chart");
GradientPaint gp = new GradientPaint(0, 100, Color.white, 0, 300, Color.blue, true);
chart.setGradient(gp);
chart.setEffectIndex(JChart2D.Gradientffect);
getContentPane().add(chart);

WindowListener wndCloser = new WindowAdapter() {
  public void windowClosing(WindowEvent e) {
    System.exit(0);
  }
};
addWindowListener(wndCloser);

setVisible(true);
}

public static void main(String argv[]) {
new Charts2D();
}

}

class JChart2D extends JPanel {

public static final int PLainEffect = 0;

public static final int Gradientffect = 1;

public static final int ImageEffect = 2;

protected JLabel titleLabel;

protected ChartPanel chartPanel;

protected int dataLength;

protected int[] xData;

protected int[] yData;

protected int xMin;

protected int xMax;

protected int yMin;

protected int yMax;

protected double[] pieData;

protected int m_effectIndex = PLainEffect;

protected Stroke stroke;

protected GradientPaint gradient;

protected Image foregroundImage;

protected Color lineColor = Color.black;

protected Color columnColor = Color.blue;

protected int columnWidth = 12;

public JChart2D(int nData, int[] yData, String text) {
this(nData, null, yData, text);
}

public JChart2D(int nData, int[] xD, int[] yD, String text) {
super(new BorderLayout());
setBackground(Color.white);
titleLabel = new JLabel(text, JLabel.CENTER);
add(titleLabel, BorderLayout.NORTH);

if (xData == null) {
  xData = new int[nData];
  for (int k = 0; k < nData; k++)
    xData[k] = k;
}
if (yD == null)
  throw new IllegalArgumentException("yData can't be null");
if (nData > yD.length)
  throw new IllegalArgumentException("Insufficient yData length");
if (nData > xD.length)
  throw new IllegalArgumentException("Insufficient xData length");
dataLength = nData;
xData = xD;
yData = yD;

xMin = xMax = 0; // To include 0 into the interval
yMin = yMax = 0;
for (int k = 0; k < dataLength; k++) {
  xMin = Math.min(xMin, xData[k]);
  xMax = Math.max(xMax, xData[k]);
  yMin = Math.min(yMin, yData[k]);
  yMax = Math.max(yMax, yData[k]);
}
if (xMin == xMax)
  xMax++;
if (yMin == yMax)
  yMax++;

chartPanel = new ChartPanel();
add(chartPanel, BorderLayout.CENTER);
}

public void setEffectIndex(int effectIndex) {
m_effectIndex = effectIndex;
repaint();
}

public int getEffectIndex() {
return m_effectIndex;
}

public void setStroke(Stroke s) {
stroke = s;
chartPanel.repaint();
}

public void setForegroundImage(Image img) {
foregroundImage = img;
repaint();
}

public Image getForegroundImage() {
return foregroundImage;
}

public Stroke getStroke() {
return stroke;
}

public void setGradient(GradientPaint g) {
gradient = g;
repaint();
}

public GradientPaint getGradient() {
return gradient;
}

public void setColumnWidth(int c) {
columnWidth = c;
chartPanel.calcDimensions();
chartPanel.repaint();
}

public int setColumnWidth() {
return columnWidth;
}

public void setColumnColor(Color c) {
columnColor = c;
chartPanel.repaint();
}

public Color getColumnColor() {
return columnColor;
}

public void setLineColor(Color c) {
lineColor = c;
chartPanel.repaint();
}

public Color getLineColor() {
return lineColor;
}

class ChartPanel extends JComponent {
int xMargin = 5;

int yMargin = 5;

int pieGap = 10;

int m_x;

int m_y;

int m_w;

int m_h;

ChartPanel() {
  enableEvents(ComponentEvent.COMPONENT_RESIZED);
}

protected void processComponentEvent(ComponentEvent e) {
  calcDimensions();
}

public void calcDimensions() {
  Dimension d = getSize();
  m_x = xMargin;
  m_y = yMargin;
  m_w = d.width - 2 * xMargin;
  m_h = d.height - 2 * yMargin;
  m_x += columnWidth / 2;
  m_w -= columnWidth;

}

public int xChartToScreen(int x) {
  return m_x + (x - xMin) * m_w / (xMax - xMin);
}

public int yChartToScreen(int y) {
  return m_y + (yMax - y) * m_h / (yMax - yMin);
}

public void paintComponent(Graphics g) {
  int x0 = 0;
  int y0 = 0;

    g.setColor(Color.black);
    x0 = xChartToScreen(0);
    g.drawLine(x0, m_y, x0, m_y + m_h);
    y0 = yChartToScreen(0);
    g.drawLine(m_x, y0, m_x + m_w, y0);

  Graphics2D g2 = (Graphics2D) g;
  g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
      RenderingHints.VALUE_ANTIALIAS_ON);
  g2.setRenderingHint(RenderingHints.KEY_RENDERING,
      RenderingHints.VALUE_RENDER_QUALITY);

  if (stroke != null)
    g2.setStroke(stroke);

  GeneralPath path = new GeneralPath();

    for (int k = 0; k < dataLength; k++) {
      xMax++;
      int x = xChartToScreen(xData[k]);
      int w = columnWidth;
      int y1 = yChartToScreen(yData[k]);
      int y = Math.min(y0, y1);
      int h = Math.abs(y1 - y0);
      Shape rc = new Rectangle2D.Double(x, y, w, h);
      path.append(rc, false);
      xMax--;
    }

    if (m_effectIndex == Gradientffect && gradient != null) {
      g2.setPaint(gradient);
      g2.fill(path);
    } else if (m_effectIndex == ImageEffect
        && foregroundImage != null)
      fillByImage(g2, path, 0);
    else {
      g2.setColor(columnColor);
      g2.fill(path);
    }
    g2.setColor(lineColor);
    g2.draw(path);

}

protected void fillByImage(Graphics2D g2, Shape shape, int xOffset) {
  if (foregroundImage == null)
    return;
  int wImg = foregroundImage.getWidth(this);
  int hImg = foregroundImage.getHeight(this);
  if (wImg <= 0 || hImg <= 0)
    return;
  g2.setClip(shape);
  Rectangle bounds = shape.getBounds();
  for (int i = bounds.x + xOffset; i < bounds.x + bounds.width; i += wImg)
    for (int j = bounds.y; j < bounds.y + bounds.height; j += hImg)
      g2.drawImage(foregroundImage, i, j, this);
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:34:30.993

开始从开关中移除这两个案例，显然移除开关，因为你只有一张图表

```
case LineChart:
    g2.setColor(lineColor);
    path.moveTo(xChartToScreen(xData[0]),
        yChartToScreen(yData[0]));
    for (int k = 1; k < dataLength; k++)
      path.lineTo(xChartToScreen(xData[k]),
          yChartToScreen(yData[k]));
    g2.draw(path);
    break;

  case ColumnChart:
    for (int k = 0; k < dataLength; k++) {
      xMax++;
      int x = xChartToScreen(xData[k]);
      int w = columnWidth;
      int y1 = yChartToScreen(yData[k]);
      int y = Math.min(y0, y1);
      int h = Math.abs(y1 - y0);
      Shape rc = new Rectangle2D.Double(x, y, w, h);
      path.append(rc, false);
      xMax--;
    }

    if (drawShadow) {
      AffineTransform s0 = new AffineTransform(1.0, 0.0, 0.0,
          -1.0, x0, y0);
      s0.concatenate(AffineTransform.getScaleInstance(1.0, 0.5));
      s0.concatenate(AffineTransform.getShearInstance(0.5, 0.0));
      s0.concatenate(new AffineTransform(1.0, 0.0, 0.0, -1.0,
          -x0, y0));
      g2.setColor(Color.gray);
      Shape shadow = s0.createTransformedShape(path);
      g2.fill(shadow);
    }

    if (m_effectIndex == Gradientffect && gradient != null) {
      g2.setPaint(gradient);
      g2.fill(path);
    } else if (m_effectIndex == ImageEffect
        && foregroundImage != null)
      fillByImage(g2, path, 0);
    else {
      g2.setColor(columnColor);
      g2.fill(path);
    }
    g2.setColor(lineColor);
    g2.draw(path);
    break; 
```

在此之后，您可以删除所有未使用的方法/变量（如果您使用的是 eclipse，请遵循警告。）

我想你也可以修改这段代码：

```
if (m_chartType == PieChart) {
  double sum = 0;
  for (int k = 0; k < dataLength; k++) {
    yData[k] = Math.max(yData[k], 0);
    sum += yData[k];
  }
  pieData = new double[dataLength];
  for (int k = 0; k < dataLength; k++)
    pieData[k] = yData[k] * 360.0 / sum;
}

chartPanel = new ChartPanel();
add(chartPanel, BorderLayout.CENTER); 
```

进入：

```
if (m_chartType == PieChart) {
  double sum = 0;
  for (int k = 0; k < dataLength; k++) {
    yData[k] = Math.max(yData[k], 0);
    sum += yData[k];
  }
  pieData = new double[dataLength];
  for (int k = 0; k < dataLength; k++)
    pieData[k] = yData[k] * 360.0 / sum;
  chartPanel = new ChartPanel();
  add(chartPanel, BorderLayout.CENTER);
} 
```

# actionscript-3 - 鼠标悬停时的 Flex Hslider 工具提示时间

> ID：15196626
> 
> 赞同：0
> 
> 时间：2013-03-04T07:32:10.153
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5, flash

嗨，目前我正在使用 flex 设计播放器。我想在鼠标悬停在擦洗器（即 HSlider）上时显示时间。我已经尝试过**Datatip**。但这只有在我拖动该滑块并尝试过时才有效该滑块中的**更改**事件也仅通过单击即可工作。

这是我的代码：

```
<mx:HSlider id="slider" x="160" y="376" width="387" height="42"
         enabled="true"
         change="movieSeek(event)"
         mouseDown="isScrubbing=true" 
         mouseUp="isScrubbing=false" 
         showTrackHighlight="true"
showDataTip="true"                                       styleName="customHSlider"
    useHandCursor="{fpsText.text}"
    trackHighlightSkin="@Embed(source='assets/images/track.png')" />

function movieSeek(event:Event):void
    {
      if (nsPlay == null) return;
      if (doPlay.styleName=="customButton")
      { 
        nsPlay.resume();
      }     
      slider.toolTip = "time ="+slider.value;
      nsPlay.seek(slider.value);            
    } 
```

在一些博客中，我有关于***mx_internal***的内容。可以在鼠标悬停时获取当前位置的值。请建议我。

我希望它是这样的

![在此处输入图像描述](../Images/9da44b74c4b1417d30aa6273b2f4c506.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:36:52.963

您可以创建自定义 HSlider 并监听 mouseMove 事件，我创建了简单的示例，您可以自己重构和优化它，请参见代码：

```
package classes
{
    import flash.events.MouseEvent;
    import flash.geom.Point;

    import mx.controls.HSlider;
    import mx.controls.sliderClasses.SliderDataTip;
    import mx.core.mx_internal;
    import mx.formatters.NumberFormatter;

    use namespace mx_internal;

    public class HSliderCustom extends HSlider
    {

        private var _rollOver:Boolean = false;
        private var _thumbActivity:Boolean = false;

        public function HSliderCustom()
        {
            super();
        }

        //
        //  Handlers
        //

        protected function onRollOutHandler(event:MouseEvent):void
        {
            _rollOver = false;

            destroyMovieHandler();

            if (!_thumbActivity)
            {
                if (mx_internal::dataTip)
                {
                    systemManager.toolTipChildren.removeChild(mx_internal::dataTip);
                    mx_internal::dataTip = null;
                }
            }
        }

        protected function onRollOverHandler(event:MouseEvent):void
        {
            _rollOver = true;

            addMovieHandler();
        }

        protected function onMouseMoveHandler(event:MouseEvent):void
        {
            var p:Point = new Point(event.localX, event.localY);
            var p_global:Point = event.target.localToGlobal(p);
            var p_content:Point = globalToContent(p_global);

            onRollOverTooltip(p_content.x, p_content.y);
        }

        mx_internal function addMovieHandler():void
        {
            if (!hasEventListener(MouseEvent.MOUSE_MOVE))
                addEventListener(MouseEvent.MOUSE_MOVE, onMouseMoveHandler, false, 0, true);
        }

        mx_internal function destroyMovieHandler():void
        {
            if (hasEventListener(MouseEvent.MOUSE_MOVE))
            {
                removeEventListener(MouseEvent.MOUSE_MOVE, onMouseMoveHandler);
            }
        }

        //
        //  Overriden methods
        //

        override protected function childrenCreated():void
        {
            super.childrenCreated();

            addEventListener(MouseEvent.ROLL_OVER, onRollOverHandler, false, 0, true);
            addEventListener(MouseEvent.ROLL_OUT, onRollOutHandler, false, 0, true);

        }

        override mx_internal function onThumbMove(thumb:Object):void
        {
            destroyMovieHandler();

            _thumbActivity = true;

            super.mx_internal::onThumbMove( thumb );
        }

        override mx_internal function onThumbRelease(thumb:Object):void
        {
            super.mx_internal::onThumbRelease( thumb );

            if (_rollOver)
            {
                addMovieHandler();
            }

            _thumbActivity = false;
        }

        //
        //  New methods
        //

        protected function onRollOverTooltip(localX:Number, localY:Number):void
        {
            if (showDataTip)
            {

                // Setup number formatter
                var dataFormatter:NumberFormatter = new NumberFormatter();
                dataFormatter.precision = getStyle("dataTipPrecision");

                if (!mx_internal::dataTip)
                {
                    mx_internal::dataTip = SliderDataTip(new sliderDataTipClass());
                    systemManager.toolTipChildren.addChild(mx_internal::dataTip);

                    var dataTipStyleName:String = getStyle("dataTipStyleName");
                    if (dataTipStyleName)
                    {
                        mx_internal::dataTip.styleName = dataTipStyleName;
                    }
                }

                var formattedVal:String;
                if (dataTipFormatFunction != null)
                {
                    formattedVal = this.dataTipFormatFunction(
                        mx_internal::getValueFromX(localX));
                }
                else
                {
                    formattedVal = dataFormatter.format(mx_internal::getValueFromX(localX));
                }

                mx_internal::dataTip.text = formattedVal;

                mx_internal::dataTip.validateNow();
                mx_internal::dataTip.setActualSize(mx_internal::dataTip.getExplicitOrMeasuredWidth(),mx_internal::dataTip.getExplicitOrMeasuredHeight());
                //mx_internal::positionDataTip(thumb);
            }
            mx_internal::keyInteraction = false;

            /*
            var event:SliderEvent = new SliderEvent(SliderEvent.THUMB_PRESS);
            event.value = getValueFromX(thumb.xPosition);;
            event.thumbIndex = thumb.thumbIndex;
            dispatchEvent(event);
            */

            var o:Point = new Point(localX, localY);
            var r:Point = localToGlobal(o);
            r = mx_internal::dataTip.parent.globalToLocal(r);

            mx_internal::dataTip.x = r.x < 0 ? 0 : r.x - mx_internal::dataTip.width/2;
            mx_internal::dataTip.y = y - mx_internal::dataTip.height;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T10:11:01.140

检查[dataTipFormatFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/sliderClasses/Slider.html#dataTipFormatFunction)

```
mySlider.dataTipFormatFunction = function(value:Number):String { 
    return formatTime(value); 
}

private function formatTime(value:Number) {
    return "00:00";
}
```

[这是一个很好的例子](http://www.codebelt.com/actionscript-3/as3-convert-seconds-to-hours-minutes-seconds/)，说明如何将秒转换为小时、分钟和秒。

*我知道这个问题发布已经一年多了，但这对我有所帮助，我认为这可能对面临同样挑战的其他人有所帮助*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:32:40.217

检查滑块上的 mouseOver 事件。

# css - 隐藏元素中的文本节点，但不隐藏子节点

> ID：15196630
> 
> 赞同：73
> 
> 时间：2013-03-04T07:32:30.540
> 
> 标签：css, textnode

我在使用 CSS 时遇到了一点问题，似乎找不到解决方案。我有这个 HTML

```
<div id="closelink">
  <a href="">Close</a>
  Click to close
</div> 
```

现在我只想隐藏文本«Click to close»，既不隐藏 div，也不隐藏其中的链接。

这可以做到吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-03-04T07:58:45.450

可以在子元素上覆盖该`visibility`属性，因此您可以这样做：

```
#closelink {
  visibility: collapse;
}

#closelink a {
  visibility: visible;
}
```

```
<div id="closelink">
  <a href="">Close</a> Click to close
</div>
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-07-24T09:27:25.837

```
.closelink {
  font-size: 0px;
}

.close-link a {
  font-size: 12px;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T07:42:18.393

尝试

```
#closelink {
  position: relative;
  left: -9999px;
}

#closelink a {
  position: relative;
  left: 9999px;
}
```

```
<div id="closelink">
  <a href="">Close</a> Click to close
</div>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-09T14:46:00.110

它有效，但您可以使用`visibility:hidden`而不是`visibility:collapse`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-19T19:51:40.310

为了避免子元素换行（就像使用`visibility: hidden/collapse`and发生的那样`visibility: visible`），并避免在浏览器中绘制 9999px 块（通常不赞成，因为它是不必要的开销），试试这个：

```
#closelink {
  position: relative;
  visibility: hidden;
}

#closelink a {
  position: absolute;
  left: 0;
  top: 0;
  visibility: visible;
}
```

```
<div id="closelink">
  <a href="">Close</a> Click to close
</div>
```

您可以调整您的`left: 0`值以提供一些填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-05T22:15:18.187

我能想到的方法有以下三种：

一

```
#parent {
  opacity: 1;
}

.child {
  opacity: 0;
}
```

```
<div id="parent">
  dkjfdkf
  <span class="child">Annoying text</span>
</div>
```

二

```
.child {
  visibility: hidden;
}
```

```
<div id="parent">
  dkjfdkf
  <span class="child">Annoying text</span>
</div>
```

三

```
.child {
  display: none;
}
```

```
<div id="parent">
  dkjfdkf
  <span class="child">Annoying text</span>
</div>
```

如果您希望图像始终在页面上以保持结构，但不希望它可见，则不透明度是最好的。希望这会有所帮助。

# android - 当 Facebook 应用程序存在时，会话登录没有反应。与 SSO 一起使用

> ID：15196634
> 
> 赞同：2
> 
> 时间：2013-03-04T07:32:51.477
> 
> 标签：android, facebook, single-sign-on

我已经按照本指南为我的 android 应用程序实现了 Facebook：

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

我的目标是获取 access_token 以便我可以将它与我的后端服务器连接

现在的情况：

*   未安装 Facebook 应用程序时应用程序功能齐全。Facebook SSO 被调用，一切将照常进行

*   安装 Facebook 应用程序后，会出现请求权限的本机 Facebook 对话框，随后不再执行任何操作。

![在此处输入图像描述](../Images/15ef65a802d70ce2062c129411cdfb56.png)

有任何 Facebook 专家愿意就此事开导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:49:32.670

好的，我解决了！

正如肖希在评论中提到的那样。

[安装 FB 应用后，Android Facebook 示例应用无法登录](https://stackoverflow.com/questions/15036956/android-facebook-sample-app-doesnt-login-when-fb-app-installed/15037770#15037770)

应在 Facebook 应用程序控制台中添加签署 android 应用程序的密钥库的密钥哈希。

简而言之：

1.  导出签名的应用程序
2.  从密钥库中获取密钥哈希。请参阅[Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#124053233)。
3.  将哈希值添加到 Facebook 应用程序

FB 注册哈希值可能需要一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T11:33:15.463

问题可能是您上传的哈希键和我从下面的代码中得到的不同。试试这个代码这个代码，在控制台中获取哈希码，在 facebook 控制台上更新它，它会完美登录。我发布这个是为了让我的开发人员节省一些我在解决这个问题上花费的时间。

```
try {
PackageInfo info = getPackageManager().getPackageInfo(
      "com.facebook.samples.loginhowto", PackageManager.GET_SIGNATURES);
for (Signature signature : info.signatures){
       MessageDigest md = MessageDigest.getInstance("SHA");
       md.update(signature.toByteArray());
       Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
}
} catch (NameNotFoundException e) {
} catch (NoSuchAlgorithmException e) {
} 
```

# android - 发出 REST 请求

> ID：15196638
> 
> 赞同：1
> 
> 时间：2013-03-04T07:33:10.070
> 
> 标签：android, rest, http-authentication

我是使用 REST 的新手，感觉不自信。那么，您能否帮忙说一下创建 REST 客户端以使用 SSL 和授权连接到服务器的最佳方法是什么？我不是在问完整的例子，只是要使用什么库或者一些本机库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:54:54.910

在 Java 中，我最喜欢的 HTTP 客户端库是`java.net.HttpURLConnection`. 它已经在 J​​ava API 中；它处理缓存、SSL、身份验证。

这是一个例子： [https ://github.com/Hypertopic/Porphyry/blob/master/src/org/hypertopic/RESTDatabase.java#L181](https://github.com/Hypertopic/Porphyry/blob/master/src/org/hypertopic/RESTDatabase.java#L181)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:47:16.227

您可以使用内置`HttpURLConnection`类与一个安静的服务对话。该类还支持`https`url，它为您提供 SSL 加密。对于身份验证，您可以使用内置机制。

对于 Username+Password 或 Digest auth，您可以只使用`java.net.Authenticator`, 您可能需要像这样扩展：

```
public class AS7Authenticator extends Authenticator {

    private String user;
    private String pass;

    public AS7Authenticator(String user, String pass) {
        this.user = user;
        this.pass = pass;
        if (this.pass==null)
            this.pass=""; // prevent NPE later
    }

    @Override
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(user,pass.toCharArray());
    }
} 
```

（取自 RHQ 的 JBossAS7 插件）

对于 Android 版本 > 2.3，`HttpUrlConnection`无论如何，它似乎是 Android 开发人员的首选客户端。

# c# - “receive top X”不返回 X 消息

> ID：15196644
> 
> 赞同：0
> 
> 时间：2013-03-04T07:33:36.877
> 
> 标签：c#, ado.net, service-broker

我得到了一个有很多消息的队列。

我要求每次读取/交易 200 条消息：

```
using (var connection = _configuration.ConnectionFactory.OpenConnection())
{
    using (var transaction = connection.BeginTransaction())
    {
        using (var command = connection.CreateCommand())
        {
            command.Transaction = transaction;
            command.CommandText = string.Format(ReadCommand, maxNumberOfMessagesPerRead, _queueName); 
```

生成的 SQL：

```
RECEIVE TOP(200) message_body, conversation_handle FROM [BenchQueue] 
```

但我每次阅读只会收到 100 条消息。SQL Server 有限制还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:18:20.053

语句将`RECEIVE`仅返回属于单个会话组的消息。这样做是为了简化多线程环境中相关消息的处理（max_queue_readers > 1）。有关详细信息，请参阅[对话组锁定](http://msdn.microsoft.com/en-us/library/ms171615.aspx)。

除非您进行任何明确的对话组管理，否则每个单独的对话都是一个单独的对话组。因此，您的队列中每个对话可能只有 100 条消息。

# java - 在java中将普通sql转换为参数sql

> ID：15196645
> 
> 赞同：1
> 
> 时间：2013-03-04T07:33:36.920
> 
> 标签：java

我想要泛化方法将普通 sql 查询转换为 java 中的参数化 sql

我有以下已在项目中使用的方法。这有很多参考。

```
 public Object executeQuery(String aQuery) {
    Connection con = null;
    Statement stmt = null;
    ResultSet r = null;
    try {

        con = getConnection() ;
        stmt = con.createStatement();
        r = stmt.executeQuery(aQuery);

        if (r.next()) {
            //return extracted result;
        }

        return null;
    } catch (SQLException e) {
        throw new RuntimeException(
            "Cannot execute query " + aQuery + " : " + e.getMessage());
    } finally {
        cleanup(r,stmt,con);
    }
    }

    //=========
    //calling above method
    executeQuery("Update USER set user_id = 15 where user_name='test'); 
```

我正在考虑使用 java 准备语句将其转换为参数化 sql。然后方法调用不会改变，但查询像

```
 Update USER set user_id = 15 where user_name='test' 
```

将使用 java PreparedStatement 和适当的参数

```
 Update USER set user_id = ? where user_name=? 
```

有没有办法像使用 Spring 或其他框架一样做到这一点。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:43:41.393

> 然后方法调用不会改变

您*绝对*应该更改调用方法。我*强烈*建议您不要尝试手动执行此操作。如果调用者未能正确地转义它们的值，那么您已经损坏了 SQL - 尝试修复它以使用参数更正 SQL 将是一件痛苦的事情。

我建议您重载该方法，并逐渐将调用者从损坏的方法转移到工作方法。（当然，立即弃用损坏的。）

我意识到可能有很多来电者，因此需要做很多工作——但这​​只是让它坏了这么久的结果。现在就解决根本问题，而不是仅仅在上面贴膏药。

# shell - 多个字符串多行的shell脚本

> ID：15196647
> 
> 赞同：0
> 
> 时间：2013-03-04T07:33:57.080
> 
> 标签：shell

嗨，我有一个 xml 文件，如果存在，我需要在其中搜索一行中的字符串，将其替换为某些内容并搜索下一个字符串并将其替换为所需的。我试过这个

```
while read line
    do
    user=`echo $LINE |grep  "<?xml"`
    if [ $user == "<?xml" ]; then
      replace=utf-8
      user=`echo $LINE|sed "s/UTF-8/${replace}/"` >> $input_file
    fi
done 
```

它只检查一个字符串并检查剩余的操作方法。

如何检查剩余的也喜欢，并做一些检查和更换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:31:20.693

我认为您的问题是命令`g`末尾缺少标志。`sed`我也不确定`if`情况。下面是我的例子。

```
while read line
  do
  user=`echo $line |grep  "<?xml"`
  if [ -n "$user" ]; then
    replace="utf-8"
    user=`echo $line|sed "s/UTF-8/${replace}/g"`
    echo $user >> $input_file
  fi
done 
```

# c - C获取差异字符串和整数

> ID：15196650
> 
> 赞同：0
> 
> 时间：2013-03-04T07:34:13.570
> 
> 标签：c

嗨，我是 C 编程的新手，目前我开始获取用户输入的简单应用程序，现在如何从用户获取输入并区分用户输入是否包含字符串、整数或两者的组合。

我尝试了以下方法：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
int main(int argc, char * argv[])
{
    char * s = "CPROGRAMMING";
    int i;
    boolean flag = true;
    for(i = 0;, i < strlen(s) && flag == true; i++)
    {
        if(isalpha(s[i]) && isupper(s[i])) flag = true;
        else flag = false;
    }
    if(flag) printf("A string contains only uppercase and alphabet letters\n");
    return 0;
} 
```

但似乎无法找到正确的输入。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:47:35.357

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <stdbool.h>

int main (int argc, char* argv[])
{
    (void) argc;
    (void) argv;

    const char* s = "CPROGRAMMING";
    bool upper_case = true;
    for (int i = 0; i<strlen(s) && upper_case ; i++)
    {
        if (!isalpha(s[i]) || !isupper(s[i]))
        {
            upper_case = false;
        }
    }

    if (upper_case)
    {
        printf("A string contains only uppercase and alphabet letters\n");
    }

    return 0;
} 
```

修复：

*   包括正确的标题。
*   使用正确的布尔类型。
*   清除布尔逻辑。
*   固定代码格式。
*   正确声明指向字符串文字的指针。
*   明确表示不使用 main 的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:38:33.963

一些问题：

*   要获取用户输入，请使用`scanf`.
*   C 没有`boolean`，你的意思是`int`？
*   您的循环是多余的，无论如何您只检查最后一个字母 - 好吧，您检查所有，但是当您最后一次设置标志时只考虑最后一个。您可以在需要时使用`break`.
*   循环中的条件有一个杂散`,`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T07:38:45.937

您的代码有一些语法问题。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <stdbool.h>

int main(int argc, char* argv[])
{
    char* s = "CPROGRAMMING";
    int i;
    bool flag = true;
    for (i = 0; i < strlen(s) && flag; i++)
    {
        if (isalpha(s[i]) && isupper(s[i]))
            flag = true;
        else
            flag = false;
    }
    if (flag)
        printf("A string contains only uppercase and alphabet letters\n");
    return 0;
} 
```

# java - 使用 PrimeFaces 执行 ajax 后无法刷新到 DataTable

> ID：15196653
> 
> 赞同：0
> 
> 时间：2013-03-04T07:34:26.127
> 
> 标签：java, jsf, primefaces

我想在添加操作后刷新 DataTable 但它不起作用。下面是我的代码。

此代码是使用数据库中的 netbeans jsf 实体类生成的。我确定下面的所有代码都成功执行，没有任何错误。

javascript代码

```
 function update(){
       updateComment();
    } 
```

视图.xhtml

```
<h:form id="commentArea">
              <!--for Comment Area-->
             rendered="#{issueCommentController.items.rowCount == 0}" style="padding-bottom: 10px;"/><br/>
              <h:panelGroup>
                <h:dataTable id="commentTable" value="#{issueCommentController.getCommentModel(issueController.selected.id)}" var="comment" class="table table-striped table-bordered table-condensed table-hover" rules="all">
                  <h:column>
                    <f:facet name="header">
                      <h:outputText value="Comment"/>
                    </f:facet>
                    <h:outputText value="#{comment.comment}"/>
                  </h:column>
                  <h:column>
                    <f:facet name="header">
                      <h:outputText value="Comment Date"/>
                    </f:facet>
                    <h:outputText value="#{comment.commentedDate}">
                      <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:outputText>
                  </h:column>
                </h:dataTable>
              </h:panelGroup>
              <h:inputTextarea id="reply-thread-txt" value="#{issueCommentController.selected.comment}"></h:inputTextarea>
              <div style="clear:both"></div>
              <div class="padding-top-10" style="width:284px !Important; margin-top: 10px;">
<p:remoteCommand name="updateComment" action="#{issueCommentController.retrieveComment(issueController.selected.id)}" update="commentArea"/>
                <p:commandButton styleClass="btn btn-primary" oncomplete="update();" value="Reply" action="#{issueCommentController.create}">
                  <f:param name="issue.id" value="#{issueController.selected.id}"/>
                  <f:param name="commented.by" value="#{sessionScope.LOGIN_USER}"/>
                </p:commandButton>
              </div>
            </h:form> 
```

问题评论控制器.java

```
public DataModel getCommentModel(int id){
    if(commentModel == null){
      commentModel = getCommentPagination(id).createPageDataModel();
    }
    return commentModel;
  }

//comment pagination.
public PaginationHelper getCommentPagination(final int id) {
    if (commentPagination == null) {
      commentPagination = new PaginationHelper(10) {
        @Override
        public int getItemsCount() {
          return getFacade().count();
        }

        @Override
        public DataModel createPageDataModel() {
          return new ListDataModel(getFacade().getComment(id));
        }
      };
    }
    return commentPagination;
  }
//execuate query
 public List<IssueComment> getComment(int id){
    TypedQuery<IssueComment> tq = getEntityManager().createQuery("SELECT c FROM IssueComment AS c WHERE c.issueId=:id",IssueComment.class);
    Issue issue = new Issue(id);
    tq.setParameter("id", issue);
    return tq.getResultList();
  }
//execute after the add operation using ajax.
 public void retrieveComment(int id) {
    items = getCommentPagination(id).createPageDataModel();
  } 
```

在添加操作之后，这将被执行。

```
<p:remoteCommand name="updateComment" action="#{issueCommentController.retrieveComment(issueController.selected.id)}" update="commentArea"/> 
```

但它不会刷新数据表。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:11:33.740

我找到了解决问题的方法，但我会发布我的答案，以防它对其他人有所帮助。我从这里替换了 remoteCommand 代码。

```
<p:remoteCommand name="updateComment" action="#{issueCommentController.retrieveComment(issueController.selected.id)}" update="commentArea"/> 
```

对此。

```
 <p:remoteCommand name="updateComment" action="#{issueCommentController.getCommentModel(issueController.selected.id)}" update="commentArea"/> 
```

# xml - 发现以元素“角色”开头的无效内容

> ID：15196659
> 
> 赞同：1
> 
> 时间：2013-03-04T07:34:37.480
> 
> 标签：xml, xsd, xml-validation, xsd-validation

**我的架构：**

```
<xsd:element name="GetTasksForRolesResponse">
                        <xsd:complexType>
                          <xsd:sequence>
                            <xsd:element name="tuple" maxOccurs="unbounded">
                              <xsd:complexType>
                                <xsd:sequence>
                                  <xsd:element name="old">
                                    <xsd:complexType>
                                      <xsd:sequence>
                                        <xsd:element name="Role">
                                          <xsd:complexType mixed="true">
                                            <xsd:sequence>
                                              <xsd:element minOccurs="0" maxOccurs="unbounded" ref="ns:Task" xmlns:ns="http://schemas.cordys.com/task/1.0/"/>
                                            </xsd:sequence>
                                            <xsd:attribute type="xsd:string" name="dn" use="optional"/>                                         
                                            <xsd:attribute type="xsd:string" name="configTaskId" use="optional"/>
                                          </xsd:complexType>
                                        </xsd:element>
                                      </xsd:sequence>
                                    </xsd:complexType>
                                  </xsd:element>
                                </xsd:sequence>
                              </xsd:complexType>
                            </xsd:element>
                          </xsd:sequence>
                        </xsd:complexType>
                      </xsd:element> 
```

**我的内容：**

```
<GetTasksForRolesResponse
            xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/"
            xmlns="http://schemas.cordys.com/task/1.0/runtime/">
            <tuple>
                <old>
                    <Role
                        xmlns="http://schemas.cordys.com/task/1.0/"
                        dn="cn=Analyst,cn=Cordys@Work,cn=cordys,cn=defaultInst,o=vanenburg.com"></Role>
                </old>
            </tuple>
        </GetTasksForRolesResponse> 
```

* * *

请帮我解决上述错误。

* * *

**错误** 原因：org.xml.sax.SAXException：cvc-complex-type.2.4.a：发现以元素“角色”开头的无效内容。'{" [http://schemas.cordys.com/task/1.0/runtime/](http://schemas.cordys.com/task/1.0/runtime/) ":Role}' 之一是预期的。org.xml.sax.SAXParseException；行号：9；列号：77；cvc-complex-type.2.4.a：发现以元素“角色”开头的无效内容。'{" [http://schemas.cordys.com/task/1.0/runtime/](http://schemas.cordys.com/task/1.0/runtime/) ":Role}' 之一是预期的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:09:08.630

XML 中的`Role`元素具有显式命名空间

```
http://schemas.cordys.com/task/1.0/ 
```

而验证器似乎期望它在命名空间中

```
http://schemas.cordys.com/task/1.0/runtime/ 
```

# java - 如何在 Flyway 中为 Insert 语句传递占位符？

> ID：15196664
> 
> 赞同：0
> 
> 时间：2013-03-04T07:34:59.710
> 
> 标签：java, flyway

我试图在执行 Flyway 时传递一个占位符值。

在调用之前`flyway.migrate`，我添加了占位符，如下所示：

```
String location="C:\resource";
flyway.getPlaceholders().put("resource_location",
            location); 
```

该脚本包含插入语句，如：

```
INSERT [dbo].[resource] ([settings_id], 
[prop_key], [prop_value]) 
VALUES (1, N'resource.path', $(resource_location)/test); 
```

但这不起作用。请让我知道如何将占位符的值传递给上述插入脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:59:44.333

如[文档](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/Flyway.html#setPlaceholderPrefix%28java.lang.String%29)中所述，默认的前缀和后缀是 ${ 和 }。

您可以将占位符更改为 ${resource_location} 或重新配置默认值。

# javascript - 在浏览器中运行 3rd 方应用程序

> ID：15196669
> 
> 赞同：1
> 
> 时间：2013-03-04T07:35:31.973
> 
> 标签：javascript, cross-domain, sandbox, browser-security

我目前正在为一个大型应用程序设计前端。该计划是拥有一个管理子应用程序的主应用程序，用户可以从应用程序商店将更多应用程序添加到他们的仪表板，所有这些都在浏览器中的 JavaScript 中。问题是沙盒，基本上，我不想`appX`能够窃取`appY`的数据（通过 DOM 或其他方式）。我知道 Google Caja，尽管目前我倾向于在不同的域上运行 iframe（具有非常精美的 nginx 配置以允许应用程序共享 API）。这行得通吗？是否有任何替代方案（在浏览器上下文中运行 3rd 方应用程序）？

# php - 在 PHP 中创建受密码保护的 ZIP 文件

> ID：15196680
> 
> 赞同：0
> 
> 时间：2013-03-04T07:37:01.363
> 
> 标签：php

嗨，我正在使用以下代码创建受密码保护的 zip 文件

```
$password = 'pass';
$outfile = 'download.zip';    
$infile = 'xml.php';    
header("Content-type: application/octet-stream");   
header("Content-disposition: attachment; filename=$outfile");    
@system("zip -P $password $outfile $infile");    
readfile($outfile);    
@unlink($outfile); 
```

但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:22:11.603

相同的代码对我有用。当我第一次运行它时，出现权限错误，当我授予文件夹权限时，它起作用了。您还可以检查文件夹权限。它也可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:37:34.163

假设您的示例被简化并且密码来自其他地方（可能是用户输入？），系统调用不安全！如果它包含对 shell 有意义的字符，您将得到不希望的结果。[确保使用 escapeshellarg 转义参数： http](http://php.net/manual/en/function.escapeshellarg.php) ://php.net/manual/en/function.escapeshellarg.php

# c# - 用 Ninject 注入“this”

> ID：15196682
> 
> 赞同：1
> 
> 时间：2013-03-04T07:37:13.450
> 
> 标签：c#, ninject

我刚开始使用 Ninject，我有一个问题。假设我有一个 TaxCalculator 类，该类具有带有 Sale 参数的构造函数。然后我有 ITaxCalculator 成员的销售类。Normaly 我会在 Sale 构造器中创建 TaxCalculator 实例，将“this”作为参数。

```
public class Sale
{
    private ITaxCalculator taxCalculator;

    public Sale()
    {
        this.taxCalculator = new TaxCalculator(this);
    }
}

public class TaxCalculator : ITaxCalculator
{
    private Sale sale;
    public TaxCalculator(Sale sale)
    {
        this.sale = sale;
    }
} 
```

是否可以使用 Ninject 完成此操作？下面的代码显然不起作用。

```
public class Sale
{
    private ITaxCalculator taxCalculator;

    [Inject]
    public void SetTaxCalculator(ITaxCalculator taxCalculator)
    {
        this.taxCalculator = taxCalculator;
    }
}

....
using (IKernel kernel = new StandardKernel())
        {
            Sale sale = null;

            kernel.Bind<ITaxCalculator>()
                  .To<TaxCalculator>()
                  .WithConstructorArgument("sale", sale);

            sale = kernel.Get<Sale>();
        } 
```

我希望 Ninject 做的是在调用 Sale 构造函数之后调用 SetTaxCalculator 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:48:02.867

您可以使用属性注入来做到这一点。

但是有这样的循环依赖意味着你的设计有一些缺陷。我强烈建议修复该结构问题，以便只有一个类需要引用另一个类。

例如，为什么税收计算器需要参考销售？让销售呼叫计算器并传递所有必需的信息。例如`CalculateTax(products)`

# android - 单击按钮后布局不会加载

> ID：15196683
> 
> 赞同：0
> 
> 时间：2013-03-04T07:37:16.837
> 
> 标签：android, eclipse, button

我试图在单击按钮后加载第二个布局，但由于某种原因，应用程序不断崩溃......我很确定我做的一切都是正确的 - 但每次点击后它仍然由于某种原因失败屏幕底部的保存按钮。

附言

如果需要更多信息，请告诉我。我很乐意提供。

* * *

## JAVA

```
package com.example.linkingmanager;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.content.Intent;

public class App2Activity extends Activity {

Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
}
public void saveButtonClicked(View v) {
    // do stuff
    super.onCreate(savedInstanceState);
    Intent intent = new Intent(App2Activity.this, AppActivity.class);
    App2Activity.this.startActivity(intent);

   }

    } 
```

* * *

## XML

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout android:orientation="vertical" android:id="@+id/linearLayout1" android:layout_width="fill_parent" android:layout_height="fill_parent"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView android:textAppearance="?android:textAppearanceLarge" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="User Settings:" />
    <TextView android:textAppearance="?android:textAppearanceMedium" android:id="@+id/textView3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Data Limit" />
    <SeekBar android:id="@+id/seekBar1" android:layout_width="fill_parent" android:layout_height="wrap_content" />
    <LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TextView android:gravity="left" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="10MB" android:layout_weight="1.0" />
        <TextView android:gravity="right" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Unlimited Data" android:layout_weight="1.0" />
    </LinearLayout>
    <TextView android:textAppearance="?android:textAppearanceMedium" android:id="@+id/textView3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Bandwidth Limit" />
    <SeekBar android:id="@+id/seekBar1" android:layout_width="fill_parent" android:layout_height="wrap_content" />
    <LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TextView android:gravity="left" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="10kbs" android:layout_weight="1.0" />
        <TextView android:gravity="right" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Unlimited Bandwidth" android:layout_weight="1.0" />
    </LinearLayout>
    <TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" />
    <TextView android:textAppearance="?android:textAppearanceMedium" android:id="@+id/TextView02" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="WiFi Time Limit" />
    <TimePicker android:id="@+id/timePicker1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="50.0dip" android:layout_weight="1.0" />
    <EditText android:id="@+id/editText1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:hint="Blocked Sites - [ex: www.xxx.com]" android:ems="10" />
    <Button android:id="@+id/saveButton" android:onClick="saveButtonClicked" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Save"     />
    </LinearLayout> 
```

* * *

## LOGCAT

```
03-04 07:35:41.939: D/dalvikvm(944): GC_FOR_ALLOC freed 40K, 7% free 2456K/2640K, paused 46ms, total 49ms
03-04 07:35:41.989: I/dalvikvm-heap(944): Grow heap (frag case) to 5.831MB for 3456016-byte allocation
03-04 07:35:42.049: D/dalvikvm(944): GC_FOR_ALLOC freed 2K, 4% free 5828K/6016K, paused 58ms, total 59ms
03-04 07:35:42.139: D/dalvikvm(944): GC_CONCURRENT freed <1K, 4% free 5828K/6016K, paused 8ms+16ms, total 90ms
03-04 07:35:42.799: D/libEGL(944): loaded /system/lib/egl/libEGL_emulation.so
03-04 07:35:42.878: D/(944): HostConnection::get() New Host Connection established 0x2a155228, tid 944
03-04 07:35:42.959: D/libEGL(944): loaded /system/lib/egl/libGLESv1_CM_emulation.so
03-04 07:35:42.979: D/libEGL(944): loaded /system/lib/egl/libGLESv2_emulation.so
03-04 07:35:43.099: W/EGL_emulation(944): eglSurfaceAttrib not implemented
03-04 07:35:43.119: D/OpenGLRenderer(944): Enabling debug mode 0
03-04 07:35:47.248: W/EGL_emulation(944): eglSurfaceAttrib not implemented
03-04 07:35:55.629: D/AndroidRuntime(944): Shutting down VM
03-04 07:35:55.671: W/dalvikvm(944): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-04 07:35:55.709: E/AndroidRuntime(944): FATAL EXCEPTION: main
03-04 07:35:55.709: E/AndroidRuntime(944): java.lang.IllegalStateException: Could not find a method saveButtonClicked(View) in the activity class com.example.linkingmanager.App2Activity for onClick handler on view class android.widget.Button with id 'saveButton'
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.view.View$1.onClick(View.java:3586)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.view.View.performClick(View.java:4204)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.view.View$PerformClick.run(View.java:17355)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.os.Handler.handleCallback(Handler.java:725)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.os.Looper.loop(Looper.java:137)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-04 07:35:55.709: E/AndroidRuntime(944):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 07:35:55.709: E/AndroidRuntime(944):  at java.lang.reflect.Method.invoke(Method.java:511)
03-04 07:35:55.709: E/AndroidRuntime(944):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-04 07:35:55.709: E/AndroidRuntime(944):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-04 07:35:55.709: E/AndroidRuntime(944):  at dalvik.system.NativeStart.main(Native Method)
03-04 07:35:55.709: E/AndroidRuntime(944): Caused by: java.lang.NoSuchMethodException: saveButtonClicked [class android.view.View]
03-04 07:35:55.709: E/AndroidRuntime(944):  at java.lang.Class.getConstructorOrMethod(Class.java:460)
03-04 07:35:55.709: E/AndroidRuntime(944):  at java.lang.Class.getMethod(Class.java:915)
03-04 07:35:55.709: E/AndroidRuntime(944):  at android.view.View$1.onClick(View.java:3579)
03-04 07:35:55.709: E/AndroidRuntime(944):  ... 11 more
03-04 07:35:58.489: I/Process(944): Sending signal. PID: 944 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:32:40.597

尝试这个

```
 public class App2Activity extends Activity {

Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);

    button = (Button) findViewById(R.id.saveButton)
    button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(App2Activity.this, AppActivity.class);
                startActivity(intent);
            }
        });
}
    } 
```

* * *

这样做会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:46:30.650

您似乎只显示了 xml 的一部分。带有单击侦听器声明的按钮在哪里？我的猜测 - xml 和代码中的方法名称不同。

顺便说一句，不要在除 onCreate() 之外的任何地方调用 super.onCreate(Bundle)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:47:48.590

另一种方法是在您的活动中声明您的按钮，然后对其调用 onClickListner。

```
 button = (Button)findViewById(R.id.saveButton);
    button.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(App2Activity.this,AppActivity.class);
                    App2Activity.this.startActivity(intent);
                }
    }); 
```

并`android:onClick="saveButtonClicked"`从 xml中删除

否则请使用 Prateek Sharma 给出的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:43:22.453

删除此行：

```
super.onCreate(savedInstanceState); 
```

从你的方法：

```
public void saveButtonClicked(View v) 
```

谢谢

# java - Hibernate 事件监听器：保存一个新实体

> ID：15196686
> 
> 赞同：1
> 
> 时间：2013-03-04T07:37:30.447
> 
> 标签：java, hibernate, orm

我正在尝试在 Hibernate 3 中实现一些事件侦听器，它将在插入后事件上创建新实体。

这是我最初尝试的代码：

```
@Override
public void onPostInsert(PostInsertEvent event) {

    if (event.getEntity() instanceof MyEntity) {

        final MyEntity myEntity = (MyEntity) event.getEntity();

        final OriginalCopy originalCopy = new OriginalCopy(myEntity);

        event.getSession().persist(originalCopy);

    }

} 
```

但是，通过检查日志，当我坚持一个新的 MyEntity 时，我希望看到类似的内容：

```
insert into original_entity values (...) 
```

但实际上所做的是更新：

```
update original_entity set ... where original_entity_id = ... 
```

所以我用这段代码试试运气，现在它似乎可以正常工作：

```
@Override
public void onPostInsert(PostInsertEvent event) {

    if (event.getEntity() instanceof MyEntity) {

        final MyEntity myEntity = (MyEntity) event.getEntity();

        final OriginalCopy originalCopy = new OriginalCopy(myEntity);

        final SessionFactory sessionFactory = event.getSession().getSessionFactory();
        final Session session = sessionFactory.openSession(event.getSession().connection());

        final Transaction tx = session.beginTransaction();
        session.persist(originalCopy);
        tx.commit();

    }

} 
```

谁能解释我为什么必须在现有连接上创建一个新会话才能看到它工作？

# xcode - 如何在 XCode 4.6 中添加路径变量以使用 /usr/local/bin

> ID：15196690
> 
> 赞同：2
> 
> 时间：2013-03-04T07:37:38.550
> 
> 标签：xcode, path, scons

在 XCode 中使用外部构建环境 (scons) 编译项目时，我遇到了 XCode 在 /usr/local/bin 目录中找不到 protoc 的问题。

sh：protoc：找不到命令

如何将此路径变量添加到 sh / xcode

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:16:59.983

我似乎会定期遇到这种情况，所以大约 6 个月前我开始记录错误日志，这样我就不会从头开始试图找出问题所在。

所以为此我写下了两个答案：

将库的安装目录更改为 $(BUILT_PRODUCTS_DIR) 并将目标的库搜索路径和用户标题搜索路径更改为 $(BUILT_PRODUCTS_DIR (recursive)

我希望这对你有用，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:56:13.853

我实现了一个 shell 脚本，它在本地添加路径并运行它而不是外部构建工具。该脚本首先设置路径和标志，然后简单地调用外部构建环境 scons。不漂亮，但工作...

# doctrine-orm - Doctrine 连接查询以获取大于 1 的所有记录满足计数

> ID：15196694
> 
> 赞同：1
> 
> 时间：2013-03-04T07:37:52.100
> 
> 标签：doctrine-orm, createquery

我尝试使用普通的 sql 查询

```
SELECT activity_shares.id FROM `activity_shares` 
INNER JOIN (SELECT `activity_id` FROM `activity_shares`
GROUP BY `activity_id`
HAVING  COUNT(`activity_id`) > 1 ) dup ON activity_shares.activity_id = dup.activity_id 
```

这给了我记录 id 说**10**和**11**

但是我尝试在 中进行的相同查询`Doctrine query builder`，

```
 $qb3=$this->getEntityManager()->createQueryBuilder('c')
           ->add('select','c.id')
           ->add('from','MyBundleDataBundle:ActivityShare c')
           ->innerJoin('c.activity', 'ca')
         //  ->andWhere('ca.id = c.activity')
           ->groupBy('ca.id')
          ->having('count(ca.id)>1'); 
```

**编辑：**

```
 $query3=$qb3->getQuery();
        $query3->getResult(); 
```

生成的 SQL 为：

```
SELECT a0_.id AS id0 FROM activity_shares a0_ 
INNER JOIN activities a1_ ON a0_.activity_id = a1_.id 
GROUP BY a1_.id HAVING count(a1_.id) > 1 
```

只给出 1 条记录，即**10**条。我想同时获得。我不知道我哪里出错了。知道吗？

我的表结构是：

```
ActivityShare
    +-----+---------+-----+---
    | Id  |activity |Share| etc...
    +-----+---------+-----+----
    | 1   | 1       |1    |
    +-----+---------+-----+---
    | 2   | 1       | 2   |
    +-----+---------+-----+--- 
```

`Activity`是表的外键`Activity`。我想得到 ID 的 1 和 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:56:05.070

感谢您的回答。我终于设法得到答案

我的教义查询是：

```
$subquery=$this->getEntityManager()->createQueryBuilder('as')
      ->add('select','a.id')
      ->add('from','MyBundleDataBundle:ActivityShare as')
      ->innerJoin('as.activity', 'a')
      ->groupBy('a.id')
      ->having('count(a.id)>1');

 $query=$this->getEntityManager()->createQueryBuilder('c')
      ->add('select','c.id')
      ->add('from','ChowzterDataBundle:ActivityShare c')
      ->innerJoin('c.activity', 'ca');

    $query->andWhere($query->expr()->in('ca.id', $subquery->getDql()))
      ;

    $result = $query->getQuery();
    print_r($result->getResult()); 
```

SQL 看起来像：

```
SELECT a0_.id AS id0 FROM activity_shares a0_ INNER JOIN activities a1_ ON a0_.activity_id = a1_.id WHERE a1_.id IN (SELECT a2_.id FROM activity_shares a3_ INNER JOIN activities a2_ ON a3_.activity_id = a2_.id GROUP BY a2_.id HAVING count(a2_.id) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:01:13.553

# 简化的 SQL

首先让我简化该查询，使其给出相同的结果：

```
SELECT id FROM `activity_shares` 
GROUP BY `id`
HAVING  COUNT(`activity_id`) > 1 
```

# 教义查询生成器

## 如果您像 sql 建议的那样将 activty 的 id 存储在表中：

您可以使用简化的 SQL 来构建查询：

```
$results =$this->getEntityManager()->createQueryBuilder('c')
           ->add('select','c.id')
           ->add('from','MyBundleDataBundle:ActivityShare c')
           ->groupBy('c.id')
           ->having('count(c.activity)>1');
           ->getResult(); 
```

## 如果您使用关联表（Doctrine 逻辑）

在这里你将不得不使用 join 但计数可能很棘手

**解决方案 1**

像实体一样使用关联表（我认为你只需要id）假设表名是activityshare_activity

它将有两个字段 activity_id 和 activityshare_id，如果您找到一种向该表添加新列 id 并使其成为 Autoincrement + Primary 的方法，其余的很容易：

名为**ActivityShareActivity的新实体**

```
$results =$this->getEntityManager()->createQueryBuilder('c')
           ->add('select','c.activityshare_id')
           ->add('from','MyBundleDataBundle:ActivityShareActivity c')
           ->groupBy('c.activityshare_id')
           ->having('count(c.activity_id)>1');
           ->getResult(); 
```

添加新标识列以使其与学说兼容的步骤（您需要这样做一次）：

1.  添加列 (INT , NOT NULL)**不要放自动增量**

    ALTER TABLE tableName ADD id INT NOT NULL

2.  使用类似 for 的 php 循环填充列

3.  将列修改为自增

    ALTER TABLE tableName MODIFY id INT NOT NULL AUTO_INCREMENT

**解决方案2**

更正您的查询

```
$result=$this->getEntityManager()->createQueryBuilder()
           ->select('c.id')
           ->from('MyBundleDataBundle:ActivityShare', 'c')
           ->innerJoin('c.activity', 'ca')
           ->groupBy('c.id') //note: it's c.id not ca.id
           ->having('count(ca.id)>1')
           ->getResult(); 
```

我最后发布了这个，因为我不能 100% 确定 have+ count 的输出，但它应该说得很好:)

# actionscript-3 - 如何使用 actionscript 3 使对象相对于鼠标指针移动？

> ID：15196696
> 
> 赞同：0
> 
> 时间：2013-03-04T07:37:56.693
> 
> 标签：actionscript-3

我正在制作一个游戏，我希望我的角色在向前按下时向鼠标指针移动，并用相应的箭头键向左和向右扫射。

这是我当前的代码：

```
import flash.events.MouseEvent;
//Event Listners
stage.addChild(crosshair_mc);
crosshair_mc.mouseEnabled = false;
crosshair_mc.addEventListener(Event.ENTER_FRAME, fl_CustomMouseCursor);

function fl_CustomMouseCursor(event:Event)
{
    crosshair_mc.x = stage.mouseX;
    crosshair_mc.y = stage.mouseY;
}
Mouse.hide();

stage.addEventListener(MouseEvent.MOUSE_MOVE,facecursor);
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_KeyboardDownHandler);
//Functions
function facecursor(event):void
{
    character_mc.rotation = (180 * Math.atan2(mouseY - character_mc.y,mouseX - character_mc.x))/Math.PI + 90;

}

function fl_KeyboardDownHandler(event:KeyboardEvent):void
{
    trace("Key Code Pressed: " + event.keyCode);
    if (event.keyCode == 38)
    {
        character_mc.y = character_mc.y - 5;
    }
    if (event.keyCode == 40)
    {
        character_mc.y = character_mc.y + 5;
    }
        if (event.keyCode == 39)
    {
        character_mc.x = character_mc.x + 5;
    }
        if (event.keyCode == 37)
    {
        character_mc.x = character_mc.x - 5;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:44:57.020

你有正确的旋转部分，现在你需要的只是将它分别与和轴`cos`结合起来。例子：`sin``x``y`

```
var speed:Number = 8;
var angle:Number = Math.atan2(mouseY - character_mc.y, mouseX - character_mc.x);

character_mc.rotation = angle * 180 / Math.PI;
character_mc.x += Math.cos( angle ) * speed;
character_mc.y += Math.sin( angle ) * speed; 
```

为避免混淆，我将停止`90`在旋转上添加度数，而是将图形旋转到向右/向东。

扫射的东西使用相同的逻辑，你只想在你想要扫射的任何方向上添加四分之一圆。仅供参考，四分之一圆的弧度是 PI / 2。一个圆中有 2 个 PI 弧度：

```
// Augment angle for strafing.
angle += Math.PI / 2; 
```

# rest - rest - RESTEasy 将尾部斜线从@Path 中剪掉

> ID：15196698
> 
> 赞同：4
> 
> 时间：2013-03-04T07:37:59.057
> 
> 标签：rest, jax-rs, resteasy

RESTEasy 看起来忽略了斜杠，所以我不能编写两个不同的 Web 服务，有和没有斜杠，这个例子显示：

```
@Path("foo")
public class TestClass {

    @GET
    @Path("/bar")
    public Response bar1() {
        ...
    }

    @GET
    @Path("/bar/")
    public Response bar2() {
        ...
    }
} 
```

使用 RESTEasy，对 /foo/bar 和 /foo/bar/ 的 GET 请求由 bar2() 处理。考虑到 RFC3986 和 JAX-RS 规范，我不明白为什么要这样处理。这可能是 RESTEasy 的问题，还是我监督了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:17:36.873

这是[JAX-RS 规范](http://download.oracle.com/otn-pub/jcp/jaxrs-1.0-fr-eval-oth-JSpec/jaxrs-1.0-final-spec.pdf)所说的

**3.7 将请求与资源方法匹配**

**3.7.3 将 URI 模板转换为正则表达式**

> 1.  URI 编码模板，忽略 URI 模板变量规范。
> 2.  转义 URI 模板中的任何正则表达式字符，再次忽略 URI 模板变量规范。
> 3.  如果没有指定正则表达式，则将每个 URI 模板变量替换为包含指定正则表达式或“([^/]+?)”的捕获组。
> 4.  **如果结果字符串以 '/' 结尾，则删除最后一个字符**。
> 5.  附加“（/。*）？” 到结果。

当我读到它时，RESTEasy 正确地实现了规范。

# canvas - 滚动画布的一部分

> ID：15196701
> 
> 赞同：0
> 
> 时间：2013-03-04T07:38:06.633
> 
> 标签：canvas, scroll, swt, scrollbar

我编写了以下代码来解决[滚动画布内容](https://stackoverflow.com/questions/15133999/scrolling-canvas-content)中提到的问题。

```
package com.cavium.test.views;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.ScrollBar;
import org.eclipse.swt.widgets.Shell;

public class Test2 {
    private static final int CYCLE_OFFSET = 120;
    protected static final int Y_STEP = 20;
    static int shellStyle = SWT.NO_REDRAW_RESIZE | SWT.NO_BACKGROUND | SWT.CLOSE | SWT.RESIZE;
    static int canvasStyle = SWT.NO_REDRAW_RESIZE | SWT.H_SCROLL | SWT.V_SCROLL;

    public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display, shellStyle);
        shell.setLayout(new FillLayout());
        shell.setBackground(display.getSystemColor((SWT.COLOR_CYAN)));
        shell.setText("Canvas Test");
        shell.setSize(400, 300);

        Composite composite = new Composite(shell, SWT.NONE);
        composite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        composite.setLayout(new GridLayout(1, false));

        final Canvas canvas = new Canvas(composite, canvasStyle);
        canvas.setBackground(display.getSystemColor(SWT.COLOR_WHITE));
        canvas.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        final Point origin = new Point(0, 0);
        final ScrollBar hBar = canvas.getHorizontalBar();
        hBar.setMaximum(2120);
        hBar.setMinimum(0);
        hBar.addListener(SWT.Selection, new Listener() {

            @Override
            public void handleEvent(Event event) {
                switch (event.detail) {
                case SWT.DRAG:
                    System.out.println("drag");
                    break;
                case SWT.ARROW_DOWN:
                    System.out.println(" arrow down");
                    break;
                case SWT.ARROW_UP:
                    System.out.println("arrow up");
                    break;
                case SWT.ARROW_LEFT:
                    System.out.println("arrow left");
                    break;
                case SWT.ARROW_RIGHT:
                    System.out.println("arrow right");
                    break;
                }
                System.out.println("In hori");
                int hSelection = hBar.getSelection();
                int destX = -hSelection - origin.x;
                System.out.println("origin.x " + origin.x + "hSelection " + hSelection + " destX " + destX);
                canvas.scroll(140 + destX, 0, 140, 0, 2120, 2000, false);
                origin.x = -hSelection;
                System.out.println("origin.x " + origin.x);
            }

        });
        final ScrollBar vBar = canvas.getVerticalBar();
        vBar.setMaximum(2000);
        vBar.setMinimum(0);
        vBar.addListener(SWT.Selection, new Listener() {

            @Override
            public void handleEvent(Event event) {
                System.out.println("In ver");
                int vSelection = vBar.getSelection();
                int destY = -vSelection - origin.y;
                canvas.scroll(0, destY, 0, 0, 2120, 2000, false);
                origin.y = -vSelection;
            }

        });
        canvas.addListener(SWT.Resize, new Listener() {
            @Override
            public void handleEvent(Event e) {
                System.out.println("In resize");
                Rectangle client = canvas.getClientArea();
                hBar.setMaximum(2120);
                vBar.setMaximum(2000);
                hBar.setThumb(Math.min(2120, client.width));
                hBar.setPageIncrement(Math.min(2120, client.width));
                vBar.setThumb(Math.min(2000, client.height));
                vBar.setPageIncrement(Math.min(2000, client.height));
                hBar.setIncrement(20);
                vBar.setIncrement(20);
                int hPage = 2120 - client.width;
                int vPage = 2000 - client.height;
                int hSelection = hBar.getSelection();
                int vSelection = vBar.getSelection();
                if (hSelection >= hPage) {
                    if (hPage <= 0)
                        hSelection = 0;
                    origin.x = -hSelection;
                }
                if (vSelection >= vPage) {
                    if (vPage <= 0)
                        vSelection = 0;
                    origin.y = -vSelection;
                }
                System.out.println("hPage " + hPage + " hSelection " + hSelection + " origin.x " + origin.x + " origin.y "
                        + origin.y);
                canvas.redraw();
            }
        });
        // Create a paint handler for the canvas
        canvas.addPaintListener(new PaintListener() {
            @Override
            public void paintControl(PaintEvent e) {
                System.out.println("In paint");
                System.out.println(origin.x);
                for (int i = 0; i < 100; i++) {
                    e.gc.drawString("Row Header" + i, origin.x, origin.y + i * Y_STEP);
                    for (int j = 0; j < 100; j++) {
                        e.gc.drawRectangle(origin.x + CYCLE_OFFSET + j * 20, origin.y + i * Y_STEP, 20, 20);
                        e.gc.drawString(new Integer(j).toString(), origin.x + CYCLE_OFFSET + 2 + j * 20, origin.y + i * Y_STEP
                                + 1);
                    }
                }

            }

        });
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();

    }
} 
```

但面临以下问题：

1.  在水平滚动条侦听器中，无法检测到滚动条上的事件。这里什么都没有打印。
2.  当我拖动滚动条拇指或单击拇指和左箭头按钮或右箭头按钮或左箭头按钮之间的区域时，代码不起作用。

谁能指出这段代码中的错误？我不明白滚动是如何发生的。有人可以向我提供有关 SWT、Canvas 和滚动的链接、教程/屏幕投射。

# android - android中避免黑屏的进度条

> ID：15196703
> 
> 赞同：2
> 
> 时间：2013-03-04T07:38:19.267
> 
> 标签：android, progress-bar

我是 Android 和 Stackoverflow 的新手，我需要一些关于在我的 android 应用程序中开发进度条的帮助。我有两个活动，同时将意图从第一个活动传递到第二个我试图在两个活动之间显示进度条。现在怀疑：是可以在第二个活动的 SetContentlayout 之前放置进度条。因为我在第二个活动中有更多的表格布局并且需要时间来加载。我尝试了许多 Stackoverflow 示例，但没有摆脱这个问题。请帮助这。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_sub_products);      
         Intent subprointent=getIntent(); 
```

任何帮助都是可建议的。谢谢。

**编辑**：这是我的第一个活动代码：

```
public class FrontPage extends Activity {
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_front_page);
    grid.setAdapter(new ImageAdapter(this));
     grid.setColumnWidth( 170 );
     grid.setVerticalSpacing(20 );
     grid.setStretchMode( GridView.STRETCH_COLUMN_WIDTH );
     grid.setNumColumns( GridView.AUTO_FIT );

     grid.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
             Intent subprointent=new Intent(FrontPage.this,SubProducts.class);
                startActivity(subprointent);

                  // your loading code goes here

        } 

     });

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_front_page, menu);
    return true;
}
} 
```

这是第二个活动代码：

```
public class SubProducts extends Activity {
private ProgressDialog pdlg;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_sub_products);      

         Intent subprointent=getIntent();

        /* if (progDailog.isShowing()) {
                progDailog.dismiss();
            }*/

        Button b1=(Button)findViewById(R.id.subbutton);

        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Dialog settingsDialog = new Dialog(SubProducts.this);
                settingsDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
                settingsDialog.setContentView(getLayoutInflater().inflate(R.layout.cust_toast_layout , null));
                settingsDialog.show();
            }

         });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_sub_products, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:46:28.430

这是一个关于 asynctask 和进度条的很棒的教程：[link](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

你应该在 doInBackground 时显示进度条并在 onPostExecute 中释放它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:49:00.497

那么你应该考虑拆分你的布局。将您的主要布局作为一个占位符。完成 onCreate 执行，然后在 onStart() 中启动进度条并加载表格布局主活动视图的子视图。

你的 activity_sub_products 布局应该像

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
    android:id="@+id/placeholderView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout> 
```

然后创建一个名为 myTableViews.xml 的布局

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent"
>     android:orientation="vertical" >
>  //put all your table views here
> </LinearLayout> 
> ```

然后在您的活动中覆盖 onStart() 并执行

```
@Override
protected void onStart()
{
 super.onStart();
 showProgressBar("Loading...");
 LinearLayout rlView =  (LinearLayout) findViewById(R.id.placeholderView);
  rlView.addView(getLayoutInflater().inflate(R.layout.myTableViews, null));
}
    public synchronized void  showProgressBar(final String message){
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                try{
                    if(pdlg == null){
                        pdlg = new ProgressDialog(MyAcitivity.this); 
                        pdlg.setCancelable(false); 
                        pdlg.setProgressStyle(ProgressDialog.STYLE_SPINNER); 
                    }
                }catch (Exception e) {}

                try{
                    if(!pdlg.isShowing()) pdlg.show();
                    pdlg.setMessage(message); 
                }catch (Exception e) {}
            }
        });

    } 
```

你需要搬家

```
Button b1=(Button)findViewById(R.id.subbutton);

        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Dialog settingsDialog = new Dialog(SubProducts.this);
                settingsDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
                settingsDialog.setContentView(getLayoutInflater().inflate(R.layout.cust_toast_layout , null));
                settingsDialog.show();
            }

         }); 
```

到 onStart() 结束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T11:41:54.427

有一种简单的方法对我有用，我希望这对你有用......在你的第一个活动中使用 AsyncTask 并在`protected Void doInBackground(Void... params)`方法中执行你的第二个活动操作，然后调用你的意图，即 startActivity();

```
class hello extends AsyncTask<Void,Void,Void>
{
       ProgressDialog dialog=null;
       Intent i;

   @Override
   protected void onPreExecute() 
   {

           dialog=ProgressDialog.show(MainActivity.this,"PLEASE WAIT","LOADING CONTENTS  ..",true);
   }

    @Override
    protected void onPostExecute(Void result) 
    {
            if(dialog.isShowing())
                    {
                       dialog.dismiss();

                    }           
    }

    @Override
    protected Void doInBackground(Void... params) 
    {

        // Perform your task Here and then call intent
        i = new Intent(MainActivity.this , Countries.class);
        startActivity(i);
        return null;
    }
} 
```

快乐编码；）

# jquery - 如何在 JQuery 中获取字符串的前三个字母？

> ID：15196706
> 
> 赞同：28
> 
> 时间：2013-03-04T07:38:26.040
> 
> 标签：jquery

如何在 JQuery 中获取字符串的前三个字母？

例如：把cat1234转成cat

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-04T07:40:01.253

不需要 jQuery！只需使用 substring 方法：

```
var name = "cat1234"

var variable2 = name.substring(0, 3); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-04T07:43:01.247

`.slice(start, end)`与开始值和结束值一起使用：

```
var str = 'cat1234';
document.body.innerHTML = str.slice(0, 3);
```

使用 javascript，您可以使用带有`.match()`方法的正则表达式来排除数字并获取字符串值。

```
var str ='cat1234',
    rg = /[a-zA-Z]+/g,
    ns = str.match(rg);

document.body.innerHTML = ns[0];
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-04T07:40:58.407

你也可以这样做：

```
var str = "cat1234";
console.log( str.substr(0, 3)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T07:40:37.487

使用[substring()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)：

```
"cat1234".substring(0,3); 
```

这意味着“获取从位置 0 到位置 3 的所有字符”。

请注意，这不是 JQuery 函数，它是纯 Java 脚本。

# javascript - 在 jquery ui 1.8 中扩展小部件后销毁不起作用

> ID：15196709
> 
> 赞同：1
> 
> 时间：2013-03-04T07:38:37.747
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory, jquery-ui-widget

尝试扩展小部件后，销毁和重新创建小部件似乎不起作用。

```
$.widget("ui.specialDialog", $.ui.dialog, {
    _create: function () {
        $.ui.dialog.prototype._create.call(this);
     }
});

$('#warningDialog').specialDialog();
$('#warningDialog').specialDialog('destroy');
$('#warningDialog').specialDialog();
// the dialog does not show up here

$('#warningDialog').dialog();
$('#warningDialog').dialog('destroy');
$('#warningDialog').dialog();
// this works 
```

扩展小部件时我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:01:32.400

这是 1.8 版本的 jquery ui 中的一个错误。ui.dialog 的 'destroy' 函数不会调用其父级的 'destroy'。

将此添加到“销毁”可以解决问题：

```
$.Widget.prototype.destroy.apply(this, arguments); 
```

# c# - 从文件大小超过 4TB 的 .csv 文件中搜索文本

> ID：15196713
> 
> 赞同：0
> 
> 时间：2013-03-04T07:38:49.757
> 
> 标签：c#, .net, csv

我有一个文件大小超过 4TB 的 .csv 文件，文件中的所有记录都按 FirstName 列排序。现在我想搜索任何名称说“测试”。什么是搜索的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:47:02.307

如果您需要一个简单但缓慢的搜索，System.Io.File 和一些 LinQ 可能就足够了：

```
System.IO.File.ReadLines("yourfile.csv").Where( s => s.StartsWith("test") ); 
```

您可以通过自己执行 foreach 循环来改进这一点，以便在第一次出现后中断。对于更复杂的东西，我建议您使用数据库。4TB 不应该存储在具有可变数据长度的文件中。如果您想在代码中有效地执行此操作，您将自己编写半个数据库。

# java - java：文件读取，在外面修改，然后再读取，修改不见

> ID：15196715
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:38:59.203
> 
> 标签：java

我有一组文件，它们将由基于参数的 servlet 提供。servlet 打开流到所需文件，读取、写入 http 响应并关闭流。现在可以手动修改并保存此文件。然后下次有对该文件的请求时，servlet 会打开一个指向该文件的流，将其写入响应，但我看到内容不是修改后的，而是旧的。

如果我重新启动 tomcat，servlet 会以修改后的内容进行响应。可以不用重启就可以读取修改后的内容吗？

它不是tomcat缓存，从文件阅读器本身读取的字符串是不变的。

谢谢！

这是servlet的内容-

```
InputStream fhandle=this.getClass().getClassLoader().getResourceAsStream("responses/"+file);

        if(fhandle!=null){
            Reader fr=new InputStreamReader(fhandle);
            PrintWriter out=resp.getWriter();
            int a=-1;
            FileWriter fos=new FileWriter("copyFile.xml"); //to compare what's read with actual file
            while((a=fr.read())>=0){
                fos.write(a);
                out.write(a);
            }
            out.flush();
            fos.close();
            fr.close();
            fr=null;
            fhandle.close();
            fhandle=null;
            System.gc();
        }
        else
            System.out.println(file+" not found"); 
```

第一次点击 servlet 后，我​​将编辑文件并保存它。现在我将再次为同一个文件点击同一个 servlet，并且我不会得到编辑后的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:03:19.240

相关文件更改时不会动态重新加载资源。资源是源代码树的一部分，随应用程序一起分发。他们预计不会改变。如果您需要这种行为，则您的设计存在严重问题。

# php - PHP 给出 8.8817841970013E-016 而不是 0

> ID：15196717
> 
> 赞同：0
> 
> 时间：2013-03-04T07:39:10.290
> 
> 标签：php, floating-point

我正在用 PHP 做一个简单的计算。

`(2.70 + 2.30 + 29.70 + -2.30 + -29.70 + -2.70)`- 从数据库中获取这些数据

PHP 给出`8.8817841970013E-016`的答案不是零。

我已经尝试过类似 round、number_format 的函数，但仍然得到相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:47:02.830

表达式的十进制表示为“0.00000000000000088817841970013”。这是一个非常接近 0 的值，因为在计算机上使用浮点数进行计算时存在标准问题。

如果您想深入了解为什么会这样，可以在[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)找到一篇很棒的文章（但要注意，它很深 :) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:44:46.750

浮点运算可能会导致某些数字不准确。

如果你想做这样没有这些错误的算术（它是货币吗？），试着把它们作为整数，最后除以 100：

```
php > echo (270 + 230 + 2970 + -230 + -2970 + -270)/100;
0 
```

如果它实际上是货币，则将它们存储`DECIMAL`在数据库中并让数据库进行数学运算。

此外，`round`应该可以正常工作：

```
php > echo 2.70 + 2.30 + 29.70 + -2.30 + -29.70 + -2.70;
6.2172489379009E-15
php > echo round(2.70 + 2.30 + 29.70 + -2.30 + -29.70 + -2.70);
0 
```

我还从 PHP 文档站点找到[了一个包含更多信息的页面。](http://floating-point-gui.de/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:53:42.963

从问题中数字的外观来看，这可能是精确处理小数点后两位数的小数很重要的情况。如果是这样，请考虑以百分之几为单位工作。例如，美国货币可以被视为整数的美分，而不是小数点后两位的美元数量。

您仍然可以使用正常的数字解析，但是一旦您得到数字乘以 100 并四舍五入到最接近的整数。同样，输出除以 100 并格式化为两位小数。对整数值进行中间计算。

我建议阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:43:50.327

尝试这个

```
round(2.70 + 2.30 + 29.70 - 2.30 - 29.70 - 2.70) 
```

# apache-flex - Flex：验证有效后如何更改登录表单中的状态？

> ID：15196718
> 
> 赞同：0
> 
> 时间：2013-03-04T07:39:18.390
> 
> 标签：apache-flex, flex4, states

我有一个简单的登录表单，用户在其中输入 userSAP no（必须是数字）和密码（最少 8 个字符）。我已经对每个字段进行了验证。我想在将状态从 LoginMode_Default 更改为 PerviewMode 状态之前检查验证是否首先通过。用户登录后，它会向用户显示欢迎消息。

在我的代码中，当用户单击登录按钮时，我调用 validateLogin() 函数来检查字段是否有效。如果有效，则将 currentState 设置为 PerviewMode 状态。

在 PerviewMode 中，用户可以单击注销，这会调用 logoff() 函数返回到 LoginMode_Default 状态。

但是，当我单击注销链接时，它会返回登录表单，但 userId 和 password 字段是红色的。我怎样才能回到登录表单而不使字段被勾勒为红色？我做得对吗？有没有更好或更正确的方法来做到这一点？请问有人可以帮我吗？谢谢：）

我的验证码

```
 <fx:Declarations>       
    <s:NumberValidator id="userSAPValidator" 
                       property="text" 
                       required="true"
                       domain="int"
                       notAnIntegerError="Should not conatin any decimal"
                       allowNegative="false"
                       negativeError="Should not contain negative values"
                       parseError="Enter only numbers without space"
                       source="{userSAP_field}"/>   

    <mx:StringValidator id="userPasswordValidator"                          
                        property="text"                                                     
                        required="true"                         
                        minLength="8"                           
                        tooShortError="password must at least be 8 characters"
                        source="{userPassword_field}"/>         
</fx:Declarations> 
```

我在 MXML 中的状态：

```
<s:states> 
    <s:State name="LoginMode_Default"/> 
    <s:State name="PerviewMode"/>   
</s:states> 
```

我的登录表单 MXML ：

```
 <s:BorderContainer id="login_BC" x="1" y="1" width="223" height="134"
                           x.LoginMode_Default="2" y.LoginMode_Default="9"
                           height.LoginMode_Default="152" height.PerviewMode="40">

               <s:Form id="loginForm" x="5" y="7" width="212" height="133"
                    x.LoginMode_Default="4" y.LoginMode_Default="5" excludeFrom="PerviewMode">  
                   <s:layout>
                       <s:BasicLayout/>
                   </s:layout>                 
                   <s:Label x="0" y="14" width="52" height="18" text="SAP no :" paddingTop="5"/>                           
                   <s:TextInput id="userSAP_field" x="74" y="10" width="108"/>
                   <s:Label x="0" y="52" text="Password :" paddingTop="5"/> 
                   <s:TextInput id="userPassword_field" x="73" y="48" width="109" height="21" displayAsPassword="true"/>                       
                <s:Button id="loginButton" x="6" y="82" label="Login" click="validateLogin()" />                          
            </s:Form>

            <s:HGroup includeIn="PerviewMode" width="245" height="41">
                <s:Label id="welcome_text" text="Welome your name" paddingTop="12"  paddingLeft="10"/>
                <mx:LinkButton label="logout" click="logOff()" paddingTop="6"/>                 
            </s:HGroup> 

        </s:BorderContainer> 
```

我的验证登录功能：

```
private function validateLogin():void {

var vResult1:ValidationResultEvent;
var vResult2:ValidationResultEvent;

vResult1 = userPasswordValidator.validate();
vResult2 = userSAPValidator.validate();

if (vResult1.type==ValidationResultEvent.VALID && vResult2.type == ValidationResultEvent.VALID ) {      
    this.currentState = "PerviewMode";

}
else{       
    this.currentState = "LoginMode_Default";        
} 
```

}

我的注销功能：

```
private function logOff():void {
this.currentState = "LoginMode_Default";
userPassword_field.text ="";
userSAP_field.text =""; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:49:48.587

当您更改 textinput 文本时，验证器会检查值。尝试关闭所需的选项，然后清除文本输入：

```
private function logOff():void {
        this.currentState = "LoginMode_Default";

        userSAPValidator.required = false;
        userPasswordValidator.required = false;

        userSAP_field.text =""; 
        userPassword_field.text ="";

        userSAPValidator.required = true;
        userPasswordValidator.required = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:16:04.897

尝试添加

```
userSAP_field.errorString = '';
userPassword_field.errorString = ''; 
```

到你的`logOff()`功能。

# backbone.js - Backbone.js | 筛选集合数据

> ID：15196726
> 
> 赞同：0
> 
> 时间：2013-03-04T07:39:34.263
> 
> 标签：backbone.js, underscore.js

我正在尝试从我的收藏中过滤一些数据。我正在为作业使用 where 方法，但它返回一个空数组。这是代码。

*模型：*

```
return Backbone.Model.extend({
            urlRoot: server_url + "tasks",
            defaults: {
                'id': null,
                'title': '',
                'description': '',
                'deadline': null,
                'priority': 1,
                'status': 1,
                'key': '',
                'priority_name': '',
                'status_name': ''
            }
    }); 
```

*收藏：*

```
return Backbone.Collection.extend({
        url: server_url + "tasks",
        model: TaskModel
    }); 
```

并像这样使用它：

```
var taskList = new TaskList();
taskList.fetch({
          data: $.param({key: $.cookie('SID')}),
          success: function(collection, response){
            if(response.error){
              window.location.replace('#logout');
            }
          }
        });
taskList.where({status: 1}); 
```

taskList 包含所有数据。它不是空的。我尝试了很多组合，但每次都运气不好。

我也从以下帖子中进行了咨询，但结果相同。

[带有 OR 条件的骨干集合 where 子句](https://stackoverflow.com/questions/14208044/backbone-collection-where-clause-with-or-condition)

[按属性值过滤骨干集合](https://stackoverflow.com/questions/11762105/filter-backbone-collection-by-attribute-value)

[ToJSON on Backbone.Collection#where?](https://stackoverflow.com/questions/10548685/tojson-on-backbone-collectionwhere)

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:39:45.687

您发布的代码似乎没有任何问题，但是您没有向我们展示您的`Collection`. 请记住，`Backbone.Collection.where`它只需要一个`literal`并返回一个匹配的数组`Backbone.Model`。我采用了您的代码并对其进行了简化以演示一个工作示例：http: [//jsfiddle.net/CK3Hz/](http://jsfiddle.net/CK3Hz/)

**根据下面的评论编辑**

`Backbone.Collection.fetch`的`success`回调接收`(collection, response, options)`参数。如果您要执行`where`on `collection`，这应该可以。

我提供了[另一个 jsfiddle](http://jsfiddle.net/3qGKt/)来演示使用事件传播，我认为这是您的最终目标。

# java - 旧版 Spring 应用程序 - 切入点值是什么意思？

> ID：15196727
> 
> 赞同：0
> 
> 时间：2013-03-04T07:39:43.870
> 
> 标签：java, spring, spring-transactions, pointcut

我“继承”了一个旧的 Spring 应用程序。目前它使用的是 Spring 2.5（只升级了一次），并希望进一步升级到 Spring 3。

我了解大部分应用程序配置。只有一个部分我“不是 100%”。我可以大致猜测它可能意味着什么，但我需要绝对确定，因此发布这个问题：

这是配置片段（取决于此处未显示的注释驱动事务管理器）：

```
<aop:config>
    <aop:advisor pointcut="execution(* *..ProductManager.*(..))"
        advice-ref="txAdvice" />
</aop:config>

<tx:advice id="txAdvice">
    <tx:attributes>
        <tx:method name="save*" />
        <tx:method name="*" read-only="false" />
    </tx:attributes>
</tx:advice> 
```

我的具体两个问题是：

*   “执行（* *..ProductManager.*（..））”是什么意思（我理解切入点的说法）
*   在建议的属性部分，我们说将事务应用于所有与保存*相关的方法，并且对于所有内容，只读都是错误的。谁能解释为什么该设置有意义？对于所有具有事务支持的方法（即仅保存 * 方法），它是否是附加且有效的说法，我也希望这些方法不是只读事务。或者它是否对包容性事务过滤器（在切入点中定义）的每种方法应用了不同的东西（即某种形式的事务支持）。

感谢您的任何澄清。拜托，没有一般的答案-我需要对此进行具体解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:16:59.237

由于具有默认值为 false 的`tx:method`属性，表示事务是读/写的。`read-only`

所以在我看来，

`<tx:method name="save*" read-only="false" /> <tx:method name="*" />`

相当于

`<tx:method name="*" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:59:26.153

`execution(* *..ProductManager.*(..))`意味着，“对于 ProductManager 类中的所有方法”

tx:advice 设置不是附加的。它表示所有以**save**开头的方法都使用默认事务设置。对于其他人，此设置意味着它们不是只读事务。

对于常识，人们会期望

```
<tx:method name="save*" read-only="false" />
<tx:method name="*" /> 
```

# api - 设计 Doorkeeper oauth2 API 分页

> ID：15196730
> 
> 赞同：0
> 
> 时间：2013-03-04T07:40:21.983
> 
> 标签：api, devise, oauth-2.0, doorkeeper

抱歉，如果这是关于 oauth 的菜鸟问题

我已经根据此处的示例使用 devise+doorkeeper 实现了 oauth2 API： https://doorkeeper-provider.herokuapp.com/和此处：[https :](https://doorkeeper-provider.herokuapp.com/) [//github.com/applicake/doorkeeper-devise-client](https://github.com/applicake/doorkeeper-devise-client)

我希望能够提供一个 API 端点，它返回一个可分页的交易列表，代码如下：

```
module Api::V1
  class DealsController < ApiController
    doorkeeper_for :index
    doorkeeper_for :create, :scopes => [:write]

    respond_to :json

    def index
      if params[:page].nil?
        page = 1
      else
        page = params[:page].to_i
      end
      respond_with Deal.page(page).order("published DESC")
    end

    def create
      respond_with 'api_v1', Deal.create!(params[:deal])
    end
  end
end 
```

但是，在客户端，我不能通过类似这样的页面参数：/explore/deals.json?page=3

由于某种原因，在提供程序中看不到页面参数。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:21:08.190

我意识到问题出在 doorkeeper-devise-client 的 api_controller

页面参数未正确传递。进行以下更改可解决此问题：

```
class ApiController < ApplicationController
  respond_to :json

  def explore
    api_call = params[:api]
    if !params[:page].nil?
      api_call << "/?page=#{params[:page]}"  
    end

    @json = doorkeeper_access_token.get("api/v1/#{api_call}").parsed
    respond_with @json
  end
end 
```

# c# - wpf 图像未显示在某些 ListBoxItems 中

> ID：15196732
> 
> 赞同：0
> 
> 时间：2013-03-04T07:40:32.103
> 
> 标签：c#, wpf

我有`ListBox`一个`ItemTemplate`定义如下。我的问题是图像仅显示在每种类型的一个项目中。IE：

![在此处输入图像描述](../Images/76d05e1d2f121792109a20dc39fa045f.png)

如何使所有项目显示其相关状态？

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <ContentControl x:Name="status">
                <ContentControl.Style>
                    <Style TargetType="ContentControl">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="NotDownloaded">
                                <Setter Property="Content">
                                    <Setter.Value>
                                        <Image Source="/Images/help-file24.png"/>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Downloaded">
                                <Setter Property="Content">
                                    <Setter.Value>
                                        <Image Source="/Images/file-complete24.png""/>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Error">
                                <Setter Property="Content">
                                    <Setter.Value>
                                        <Image Source="/Images/file-warning24.png"/>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ContentControl.Style>
            </ContentControl>
            <TextBlock Text="{Binding Url}" Margin="5,0" />
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:55:01.987

我在stackoverflow上找到[了这个](https://stackoverflow.com/questions/347614/wpf-image-resources)

> 如果您将在多个地方使用图像，那么值得将图像数据仅加载一次到内存中，然后在所有图像元素之间共享它。
> 
> 为此，请在某处创建一个 BitmapSource 作为资源：

```
<BitmapImage x:Key="MyImageSource" UriSource="../Media/Image.png" /> 
```

> 然后，在您的代码中，使用类似：

```
<Image Source="{StaticResource MyImageSource}" /> 
```

> 就我而言，我发现我必须将 Image.png 文件设置为具有资源的构建操作，而不仅仅是内容。这会导致图像在您编译的程序集中携带。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:07:00.733

`Image`是一个`UIElement`，意味着它是控件层次结构的一部分，并且在任何给定时间只能有一个父级。

您的模板所做的是将相同的`Image`控件实例设置为许多`ContentControl`. 所以它只适用于第一个`ContentControl`，然后像`Image`已经是父母一样失败。

您可以尝试在您`ContentControl`的s.`Image``Image``DataTrigger`

# .net - 无法从远程连接浏览托管在 IIS 7.5 上的 MVC 站点

> ID：15196734
> 
> 赞同：0
> 
> 时间：2013-03-04T07:40:45.233
> 
> 标签：.net, asp.net-mvc, iis, deployment, web-config

我刚刚在 IIS 7.5 上使用 web-deploy 部署了我的 MVC 应用程序。我能够从部署它的同一台 PC 进行浏览（例如，`http://localhost/mysite/index`）

但是，当我尝试从另一台 PC（在同一网络内）和其他几台 PC 访问它时，在键入 URL 后尝试加载页面很长时间后，我会收到超时错误。

我需要做哪些可能的检查？

这就是我的 web.config 的样子

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
    <add key="webpages:Enabled" value="false"/>
    <add key="PreserveLoginUrl" value="true"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>
  <system.web>

    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>

      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Login" timeout="2880"/>
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
        <add namespace="MvcSiteMapProvider.Web.Html"/>
      </namespaces>
    </pages>
    <siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
      <providers>
        <clear/>
        <add name="MvcSiteMapProvider" type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider" siteMapFile="~/Mvc.Sitemap" securityTrimmingEnabled="true" cacheDuration="5" enableLocalization="true" scanAssembliesForSiteMapNodes="true" includeAssembliesForScan="" excludeAssembliesForScan="" attributesToIgnore="visibility" nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider" siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider"/>
      </providers>
    </siteMap>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:45:00.347

是 TCP 超时还是 HTTP 超时？

如果是 TCP 超时，则可能是防火墙阻止了端口 80。然而，TCP 超时应该在 10 秒内发生。

如果是 HTTP 超时，那么您的网络服务器可能配置错误，并将请求定向到另一个 IIS 网站，该网站正在触发一个脚本，该脚本运行并且从不向客户端返回任何内容，并且浏览器对此有更长的超时时间。检查您的 IIS 网站绑定以解决此问题。

# iphone - 用颜色部分填充 TableView 单元格

> ID：15196738
> 
> 赞同：-3
> 
> 时间：2013-03-04T07:40:59.377
> 
> 标签：iphone, ios, colors, tableview, cell

在我的应用程序中，我有 tableview，我想根据核心数据的数据用颜色填充 tableView 单元格。例如，如果一个单元格包含一个值 50，我用颜色填充半个单元格。如果单元格包含值 25，我用颜色等填充四分之一单元格。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:51:55.773

这可能会为您的问题提供解决方案。

将自定义视图添加到表格 vie 单元格

如果你的值 50 意味着，

```
int wd = 50/100*width of tableviewcell;
CGRect rv= CGRectMake(0, 0, wd, height of tableviewcell);
UIView *v=[[UIView alloc] initWithFrame:rv];
v.backgroundColor = [UIColor yourneededcolor];
[[cell contentView] addSubview:v]; 
```

并且不要忘记将背景颜色设置`uitableviewcell`为`clearcolor`。

# java - 如何在java中保持连接活动

> ID：15196739
> 
> 赞同：1
> 
> 时间：2013-03-04T07:41:08.610
> 
> 标签：java, mysql, database, oop

我正在使用 MySQL 开发我的第一个 Java 项目。每次从数据源取回数据时，我都会调用一个函数。这个函数应该在我的 MySQL 数据库中保存一个新行。请参阅此处的代码：

```
import java.sql.*;
import java.util.Properties;

/**
 *
 * @author jeffery
 */
public class SaveToMysql {
    // The JDBC Connector Class.
    private static final String dbClassName = "com.mysql.jdbc.Driver";

    private static final String CONNECTION = "jdbc:mysql://localhost/test";

    static public String test(int reqId, String date, double open, double high, double low,
                                        double close, int volume, int count, double WAP, boolean hasGaps){

        if (date.contains("finished")){
            return "finished";
        }

        // Class.forName(xxx) loads the jdbc classes and
        // creates a drivermanager class factory
        try{
            Class.forName(dbClassName);
        }catch ( ClassNotFoundException e ) {
            System.out.println(e);
        }

        // Properties for user and password. Here the user and password are both 'paulr'
        Properties p = new Properties();
        p.put("user","XXXXXXXX");
        p.put("password","XXXXXXXXXXXx");

        // Now try to connect
        Connection conn;
        try{
            conn = DriverManager.getConnection(CONNECTION,p);
        }catch(SQLException e){
            return e.toString();
        }

        PreparedStatement stmt;
        try{
            stmt = conn.prepareStatement("insert into dj_minute_data set symbol = (select ticker from dow_jones_constituents where id = ?), "
                    + "date = str_to_date(?,'%Y%m%d %H:%i:%s')" +
            ", open = ?" +
            ", high = ?" +
            ", low = ?" +
            ", close = ?" +
            ", volume = ?" +
            ", adj_close = ?");
            stmt.setInt(1, reqId);
            stmt.setString(2, date);
            stmt.setDouble(3, open);
            stmt.setDouble(4, high);
            stmt.setDouble(5, low);
            stmt.setDouble(6, close);
            stmt.setDouble(7, volume);
            stmt.setDouble(8, WAP);
        }catch (SQLException e){
            return e.toString();
        }

        try{
            stmt.executeUpdate();
        }catch (SQLException e){
            return e.toString();
        }

        return stmt.toString();
    }

} 
```

大家可以看到这个函数`test`在它自己的类中，叫做`SaveToMysql`. 为了调用这个函数，我将该类导入到另一个类中，并使用以下语法：

```
msg = SaveToMysql.test(reqId, date, open, high, low, close, volume, count, WAP, hasGaps); 
```

然后味精会输出到屏幕上。显示错误消息或成功。

该函数可以在短时间内快速调用多次。我知道每次调用该函数时我都不必重新打开与 MySQL 服务器的连接。我将如何更改这一点，以便 1 MySQL 连接在每次调用该函数时保持打开状态。

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-17T20:55:39.973

JDBC URL：jdbc:mysql://:/? connectTimeout=0&socketTimeout=0& **autoReconnect=true**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:50:58.747

> 我知道每次调用该函数时我都不必重新打开与 MySQL 服务器的连接。

不，这样做很好 - 只要您在后台有一个连接池来管理*真正的*连接。周围有各种连接池项目，例如[c3p0](http://sourceforge.net/projects/c3p0/)和[DBCP](http://commons.apache.org/proper/commons-dbcp/)。这样，您可以使每个呼叫与其他呼叫隔离：

*   从池中获取连接
*   用它
*   将其释放回池中

有关详细信息，请参阅您选择的任何池的文档。通常，连接池允许您像往常一样从 JDBC 请求连接，然后照常关闭它，从而有效地使整个事情变得透明。

另请注意，您*绝对*应该开始使用带参数的准备好的语句，而不是直接在 SQL 语句中包含您的值。您当前的代码是等待发生的[SQL 注入攻击。](http://bobby-tables.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T07:53:47.593

您需要管理一个静态类或方法。

喜欢

```
public class ConnectionClass
{
    public static Connection connection = null;

    public Connection getCurrentConnection()
    {
        if(connection != null)
        {
            return connection;
        }
        else
        {
            create new connection...
                    and return that new connection after giving it to global connection..
        }
    }
} 
```

每次你都会得到当前的连接。如果有一些问题并且连接不可用，那么您可以创建新连接。当您需要连接对象时，您只需要调用 getCurrentConnection 方法。

所以你只需要在你的代码中遵循一些事情。

```
Connection conn;
try{
    //conn = DriverManager.getConnection(CONNECTION,p);
      conn = getCurrentConnection();
}catch(SQLException e){
    return e.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:57:18.213

如果您想在多次调用 SaveToMysql.test 方法时使用 1 个连接，您可以在方法参数中添加您的连接，或者在 SaveToMysql.test 方法之外创建一个全局连接变量。但是，如果您使用 1 个连接，请注意交易。我希望它会帮助你。

# java - 在 JComponent 上绘制

> ID：15196745
> 
> 赞同：0
> 
> 时间：2013-03-04T07:41:38.737
> 
> 标签：java, swing, user-interface, jpanel, paintcomponent

我有一个 JPanel，其中添加了几个 JComponent。我已经覆盖了 JPanel 的 paintComponent 方法，我在 JPanel 上绘制了一些形状。

```
public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.fillOval(20, 6, 12, 12);
    g.setColor(Color.BLUE);
    g.setFont(FontStore.FRIENDS_BLOCK_OPTION_FONT);
    g.drawString("12", 26, 12);
    g.setColor(Color.BLACK);
} 
```

但是，我通过paintComponent 绘制的形状是在JComponent 后面呈现的。如何绘制 z-index 高于添加到 JPanel 的组件的形状？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:09:31.720

如果可能，请使用[Glass Pane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)或[JLayer](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)在其他组件上进行绘制

# django - 使用 django 模板生成 django 模板

> ID：15196746
> 
> 赞同：0
> 
> 时间：2013-03-04T07:41:42.980
> 
> 标签：django, templates

如何使用 django 模板生成 django 模板？有没有办法逃避模板标记？就像 pythons 字符串中的 %% 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:18:38.190

使用新的[Verbatim 模板标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#verbatim)(Django 1.5)

# ruby-on-rails-3 - 在 Rails 中渲染 HTML 文件

> ID：15196747
> 
> 赞同：1
> 
> 时间：2013-03-04T07:41:53.057
> 
> 标签：ruby-on-rails-3

我正在使用 CarrierWave 将静态 HTML 模板上传到我网页上的某些用户配置文件。

我正在尝试在用户登录后在用户的主页上呈现 HTML 文件。上传后 HTML 文件的路径是：

/uploads/profile/curation/8/User_Content.html

我是 Rails 新手，我以为我能做到

```
<%= render /uploads/profile/curation/8/User_Content.html %> 
```

让 html 呈现，但我想这仅适用于部分，但事实并非如此。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:00:37.693

您可以使用`render_to_string`. 请看这里。[http://russbrooks.com/2009/11/18/embed-a-static-hmtl-page-in-a-rails-view](http://russbrooks.com/2009/11/18/embed-a-static-hmtl-page-in-a-rails-view)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T07:44:15.790

在您的控制器中，您可以重定向到您想要的页面：

```
redirect_to "/uploads/profile/curation/8/User_Content.html" 
```

# linux - sed 在两个模式之间提取文本，其中第二个模式可能是其中之一

> ID：15196750
> 
> 赞同：1
> 
> 时间：2013-03-04T07:42:08.237
> 
> 标签：linux, unix, sed

我正在尝试在 pattern1（固定）和 pattern2（这可以是 p2-1/p2-2）之间提取文本。你能告诉我如何在一个命令中实现这一点吗？

文件以or开头`start`和结尾`end``close`

```
File1:
======
junktest
data
start
stackoverflow
sed
close

File2:
======
data2
start
stackoverflow
end 
```

我可以从 File1 中提取文本

```
sed -n "/start/,/close/p" 
```

并从 File2 与

```
sed -n "/start/,/end/p" 
```

我需要一个 sed 命令来实现这两者.. 像：

```
sed -n "/start/, /close or end /p" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T20:51:34.670

GNU`sed`和 BSD `sed`：

```
sed -nE '/start/,/close|end/p' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:13:42.973

这个 awk 看起来更好

```
awk '/start/,/end|close/' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:28:31.033

```
sed -n -E "/Word1/,/Word2-1/p" | sed -n -E "/Word1/,/Word2-2/p" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:45:32.320

容易`awk`：

```
$ awk '/start/{p=1}p{print}/end|close/{p=0}' file 
```

# android - 哪种 json 样式最适合 Android + iOS 应用程序

> ID：15196758
> 
> 赞同：0
> 
> 时间：2013-03-04T07:42:33.453
> 
> 标签：android, ios, json, web-services

我正在为要使用 Web 服务的两个应用程序中开发适用于 iOS 和 Android 的应用程序。我从我的开发人员那里得到了两种类型的服务。一个返回 WCF 数据，另一个返回 HTTP 标头。

1- WCF 风格

```
{"d":[
{"Key":"Data Key 1", "Value":"Value 1"},
{"Key":"Data Key 2", "Value":"Value 2"},
{"Key":"Data Key 3", "Value":"Value 3"},
{"Key":"Data Key 4", "Value":"Value 4"},
{"Key":"Data Key 5", "Value":"Value 5"}]} 
```

2- Http 标头样式：

```
{"Data Key 1":"Value 1","Data Key2 ":"Value 2","Data Key2 ":"Value 2","Data Key3 ":"Value 3","Data Key4":"Value 4"} 
```

我的问题是我必须为我的应用程序使用哪个？？？？哪个是标准json格式？

我已经没有消费了。我的 Android 应用程序中有 2 种类型的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:04:05.357

在我们的应用程序（Android 或 iOS）中，我们检查[链接上](http://jsonlint.com/)的 JSON 格式。

所以，我认为你的两个样本都是有效和正确的。

在实际项目中，我们使用`WCF Style`JSON，因为我们认为它有更好的组织。

# c - C 识别的符号的完整列表

> ID：15196759
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:42:33.490
> 
> 标签：c, symbols

我正在编写一个 C 分词器，我想要一个 C 识别的所有符号的完整列表，例如'+'、'-'、'*'、'/'、'!'、'!=' , '==', '++' 等。请注意，我不是指关键字（我已经找到了这些关键字的列表）。我环顾四周，但没有找到一个完整的列表，而且我不太相信自己会列举所有这些。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:59:43.533

可在此处找到 ANSI C 2011 令牌的 Lex 扫描仪列表：[http ://www.quut.com/c/ANSI-C-grammar-l-2011.html](http://www.quut.com/c/ANSI-C-grammar-l-2011.html)

**编辑：**

正如 Jens 所指出的：该列表既不显示二合字母也不显示三合字母标记：

![在此处输入图像描述](../Images/c44b24d6f8591ca1fc1a5543efbf4bef.png) ![在此处输入图像描述](../Images/8afeca962b571518ceba81c39c16942b.png)

[“ C in a Nutshell](http://books.google.de/books?id=4Mfe4sAMFUYC&pg=PT29&lpg=PT29&dq=c%20tokens%20##%20digraph&source=bl&ots=tPQKYtM3pg&sig=QAf7XVlcfHVWPJ1bwvpVYPKNTtA&hl=de&sa=X&ei=SV40Ufa6C8WA4gTyooDwBw&ved=0CIMBEOgBMAc#v=onepage&q&f=false) ”中的表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:49:06.417

如果你有 K&R（圣经，无论哪个版本（fe ANSI）），你有一个完整的列表，在书的末尾有优先级（在我的德文版中是附录 A）。

您还可以查看 gnu-c-compiler 源代码，其中包含您可以查看的扫描仪/语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:22:06.933

维基[百科文章](http://en.wikipedia.org/wiki/C_programming_language#Character_set)包含以下列表

> 标点：~！@ # % ^ & * ( ) - + = : ; " ' < > , . ? | / \ { } [ ]

尽管最终的权威来源是 C 标准 ISO IEC 9899。作为 ISO 标准，获得它需要花钱，尽管互联网上有一些免费的草稿版本。

草案与最终标准几乎相同，但不完全一致。通常，由于没有可比较的标准，您无法确切知道差异是什么，因此您应该限制对草稿的信任，并至少寻求其他信息来源。虽然对于像语法这样基本的东西应该没问题。

获得 C 标准的另一种方法（在我看来可能是最好的）是获得[《新 C 标准：经济和文化评论](http://www.knosof.co.uk/cbook/cbook.html)》一书，该书可免费获得，包含整个（最终）标准以及大量关于标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:32:41.863

由于它很短，让我在这里提供一个完整的列表。来自 C11 标准：

> (6.4.6) 标点符号：其中之一

```
[ ] ( ) { } . ->
++ -- & * + - ~ !
/ % << >> < > <= >=
 ==
 !=
 ^
 |
 &&
 ||
? : ; ...
= *= /= %= += -= <<=
 >>=
 &=
 ^=
 |=
, # ##
<: :> <% %> %: %:%: 
```

特别注意其他答案错过的`#`和`##`标记，以及最后的有向图标记。

# ios - iOS，减少图标徽章数量

> ID：15196761
> 
> 赞同：5
> 
> 时间：2013-03-04T07:42:43.350
> 
> 标签：ios, icons, badge

我用

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:[UIApplication sharedApplication].applicationIconBadgeNumber -1]; 
```

减少图标徽章计数，但实际上它被清除了。当我按下主页按钮时，徽章计数不存在。

但是，如果我尝试这样的固定值

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:4]; 
```

，徽章数量与预期一样。

所以，问题是：为什么

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:[UIApplication sharedApplication].applicationIconBadgeNumber -1]; 
```

不工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:52:34.473

为什么你不只是：

```
NSInteger numberOfBadges = [UIApplication sharedApplication].applicationIconBadgeNumber
numberOfBadges -=1;

[[UIApplication sharedApplication] setApplicationIconBadgeNumber:numberOfBadges]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:01:03.467

`[[UIApplication sharedApplication] setApplicationIconBadgeNumber:[UIApplication sharedApplication].applicationIconBadgeNumber -1];`是你的错

```
[UIApplication sharedApplication].applicationIconBadgeNumber -1 
```

在那里没有有效的操作。

如果您对此感到困惑，请使用临时变量来更改徽章计数。

编辑：像这样使用它。

```
int value = [UIApplication sharedApplication].applicationIconBadgeNumber;
value--;
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:value]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-02T03:30:57.993

快速尝试以减少

```
 let currentCountStr = UIApplication.sharedApplication().applicationIconBadgeNumber.description
    let currentCount = Int(currentCountStr)
    if(currentCount > 0) {
        UIApplication.sharedApplication().applicationIconBadgeNumber = currentCount! - 1
    } else {
        UIApplication.sharedApplication().applicationIconBadgeNumber = 0
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-29T00:13:30.107

这不起作用的原因：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:[UIApplication sharedApplication].applicationIconBadgeNumber -1]; 
```

是它没有减少徽章编号，而是将其设置为-1。文档说将徽章编号设置为 0 会隐藏它，但负数也会隐藏它。

要减少徽章编号，至少在它达到 0 之前，请执行以下操作：

```
[UIApplication sharedApplication].applicationIconBadgeNumber--; 
```

applicationIconBadgeNumber 可以用作普通变量，例如：

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 100;
[UIApplication sharedApplication].applicationIconBadgeNumber++;
[UIApplication sharedApplication].applicationIconBadgeNumber += 2; 
```

如果您希望它可见，请确保它保持积极状态。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-06-09T16:34:01.270

[[UIApplication sharedApplication] setApplicationIconBadgeNumber:[dict[@"badge"] integerValue]]+=[UIApplication sharedApplication].applicationIconBadgeNumber;

# c# - 我在解析具有空格值的特定字段的日志时遇到困难？

> ID：15196764
> 
> 赞同：0
> 
> 时间：2013-03-04T07:42:57.407
> 
> 标签：c#

我想在“GSA 搜索”中计算总“经过时间”，但我面临着差异。在某些情况下，格式为“Elapsed Time: 97ms”，在某些情况下为“Elapsed Time:97ms”。我如何涵盖这两种情况？

以下是我的日志文件格式：

```
WX 搜索 = 服务器：nomos-scanner.corp.com 用户：vibsharm appGUID：wx 已用时间：975 毫秒 SaveSearchID：361
WX 搜索 = 服务器：nomos-scanner.corp.com 用户：vibsharm appGUID：wx 已用时间：875 毫秒 SaveSearchID：361
GSA 搜索 = 服务器：nomos-scanner.corp.com 用户：gulanand appGUID：wx 已用时间：890 毫秒 SaveSearchID：361
GSA 搜索 = 服务器：nomos-scanner.corp.com 用户：vibsharm appGUID：wx 已用时间：887 毫秒 SaveSearchID：361
GSA 搜索 = 服务器：nomos-scanner.corp.com 用户：gulanand appGUID：wx 经过时间：875.5 毫秒 SaveSearchID：361
GSA 搜索 = 服务器：nomos-scanner.corp.com 用户：vibsharm appGUID：wx 已用时间：877.6 毫秒 SaveSearchID：361

```

我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.IO;
using System.Linq.Expressions;

namespace ConsoleApplication5
{
    class Program
    {
        public static void Main(string[] args)
        {
            string searchKeyword = "WX GSA Search";
            string fileName = @"C:\Users\karan\Desktop\Sample log file.txt";
            string[] textLines = File.ReadAllLines(fileName);

            List<string> results = new List<string>();

            foreach (string line in textLines)
            {
                if (line.Contains(searchKeyword))
                {
                    results.Add(line);
                }
            }
            var elapsedTime = results.SelectMany(line => line.ToLower().Split(' '))
            .Where(line => line.StartsWith("time"))
            .Select(timeLine => decimal.Parse(timeLine.Split(':')[1].Replace("ms", String.Empty)))
            .Average(time => time);
            Console.WriteLine(elapsedTime);
            // keep screen from going away
            // when run from VS.NET
            Console.ReadLine();
            }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:45:08.857

```
 string x = @"Elapsed Time: 97ms";
        int startIndex = x.LastIndexOf("Elapsed Time");
        int endIndex = x.LastIndexOf("ms");
        //Here there might be a problem, you might need to change to endIndex - startIndex +1
        string valueSubString = x.Substring(startIndex, endIndex - startIndex);
        decimal value = decimal.Parse(valueSubString.Replace(':').Trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:49:42.243

如果减少字符串分配，您可以加快速度，如下所示：

（理想情况下，我会完全使用有限状态机解析器，但逐行读取也是可以接受的）：

```
Decimal totalMs = 0;
Int32 totalRecords = 0;

using(StringReader rdr = new StreamReader(fileName, Encoding.UTF8)) {

    String line;
    while( (line = rdr.ReadLine()) != null ) {

        if( line.IndexOf("GSA Search", StringComparison.OrdinalIgnoreCase ) != 0 ) continue;

        Int32 idxStart = line.IndexOf("Elapsed time:", StringComparison.OrdinalIgnoreCase ) + "Elapsed time:".Length;
        Int32 idxEnd   = line.IndexOf("ms", idxStart, StringComparison.OrdinalIgnoreCase );

        Decimal lineMs = Decimal.Parse( line.Substring( idxStart, idxEnd - idxStart ) );
        totalMs += lineMs;
        totalRecords++;
    }
}
Decimal average = totalMs / totalRecords; 
```

调用`.Trim`是不必要的，因为允许空格，但如果您希望它更健壮`Decimal.Parse`，您可能需要考虑使用它。`Decimal.TryParse`

# javascript - 我想获取推文，但像 Def ered 对象这样的对象返回

> ID：15196767
> 
> 赞同：0
> 
> 时间：2013-03-04T07:42:59.973
> 
> 标签：javascript, coffeescript

我正在编写 CoffeeScript 以从 Twitter 获取推文，但似乎有问题......

```
class TwitterAPI
  getTweets: ->
    tweets_array = []
    $.getJSON('http://search.twitter.com/search.json?callback=?&rpp=100&q=%40weed_7777')
    .done((data, status) ->
      $.each data.results, (i, item) ->
        tweets_array.push item.text

      return tweets_array
    )

twitter_api = new TwitterAPI
tweets = twitter_api.getTweets()
console.log tweets # returns object looks like Differed object 
```

的内容`console.log tweets`如下：

![](../Images/dbd1b36b6bf7099499801b91c6851314.png)

我想要做的是将推文作为数组获取。

谢谢你的好心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:44:54.447

这应该可以完成工作：

```
getTweets = (callback) ->
  $.getJSON('http://search.twitter.com/search.json?callback=?&rpp=100&q=%40weed_7777')
  .done (data) ->
    callback (i.text for i in data.results) 

getTweets (tweets) ->
  console.log tweets 
```

正如@elclanrs 所说，http 请求是异步的，因此您应该在这里传递回调或使用延迟。而且 IMO 不需要在类定义中，因为你不在那里存储任何状态。

顺便说一句，您可以阅读一些帖子以更深入地了解异步内容的工作原理：

*   [http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101](http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101)
*   [http://bjouhier.wordpress.com/2011/01/09/asynchronous-javascript-the-tale-of-harry/](http://bjouhier.wordpress.com/2011/01/09/asynchronous-javascript-the-tale-of-harry/)
*   [http://recurial.com/programming/understanding-callback-functions-in-javascript/](http://recurial.com/programming/understanding-callback-functions-in-javascript/)

# android - 从自定义列表视图中获取图标

> ID：15196770
> 
> 赞同：0
> 
> 时间：2013-03-04T07:43:26.793
> 
> 标签：android, android-listview

我为已安装的应用程序创建了一个自定义列表视图。列表视图包含图标和文本。现在我的问题是如何`BitmapDrawable`从自定义列表视图中获取/检索图标`onListItemClick`？

自定义列表视图中的图标来自：

`static ArrayList<BitmapDrawable> Iconlist= new ArrayList<BitmapDrawable>();`.

在里面`onListItemClick`我用过：

`SelectedIcon=(BitmapDrawable) Iconlist.get(position);`

获取图标，但它不起作用。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:26:32.013

在`onItemClick`侦听器中，`ListView`您将被单击“ `view`”作为参数，您应该使用它`view.findViewById(id_of_your_icon)`来获取图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:53:15.733

正如@Rakesh Bhalani 所说，您应该使用返回的视图`onListItemClick`作为参数，将视图转换为 ImageView：

`ImageView imageView = (ImageView)view.findViewById(id_of_your_icon);`

然后从 ImageView 中提取 drawable，转换为 BitmapDrawable：

`BitmapDrawable drawable = (BitmapDrawable)imageView.getDrawable();`

# ruby-on-rails - 使用 devise 登录后重定向到当前页面

> ID：15196771
> 
> 赞同：1
> 
> 时间：2013-03-04T07:43:32.357
> 
> 标签：ruby-on-rails, ruby, devise, rubygems, ruby-on-rails-3.2

我正在使用用户登录/注册的设计。我想从登录前的页面重定向用户。但是设计没有正确重定向。登录时，它会登录用户，但在 /user/sign_in 页面上抛出错误：

“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。”

当我返回并重新加载显示用户已登录的页面时。

我的应用程序控制器看起来像：

```
class ApplicationController < ActionController::Base
 protect_from_forgery
  def after_sign_in_path_for(resource)
   stored_location_for(resource) || request.referer || root_path
  end
  def after_sign_out_path_for(resource_or_scope)
   request.referrer
  end
end 
```

我在产品购买页面上使用了引导模式脚本。它非常适用于页面上模式脚本中使用的登录按钮。但是对于标题中的登录按钮以及因此对于应用程序的每个页面都给出了不正确的重定向错误。

原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:37:28.407

对于将在被重定向到登录页面之前存储用户位置的方法，您将需要这样的东西。

```
 before_filter :store_location

  def store_location
    session[:user_return_to] = request.fullpath
  end

  def after_sign_in_path_for(resource)
   session[:user_return_to] || request.referrer || root_path
  end 
```

这将在用户进入您的网站时将位置存储在会话变量中，然后在用户登录后将其重定向到该会话变量。

# android - 无法将库项目添加到我的应用项目？

> ID：15196772
> 
> 赞同：1
> 
> 时间：2013-03-04T07:43:33.587
> 
> 标签：android, cordova

我正在创建一个新应用程序，我想使用一些这样的库：[https ://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

我已经下载了这个库，使用 New Android Project -> Create from existing source 将它添加到我的工作区。转到属性> android，并检查是库。然后我在我的应用程序项目中转到属性> android，然后单击库部分上的添加，然后选择库，它向我显示了附近带有绿色 V 的库。我点击了确定，但无法使用库，所以我再次打开属性> android，库附近有一个红十字，“？” 在“项目”列下。

我不明白为什么会这样！当我尝试将 facebook API 添加到我的应用程序时，这真的很烦人，我只是放弃并将源代码复制到我的项目中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T17:43:38.963

我的解决方案是从 Eclipse 中删除库项目（当然不是从磁盘中），然后再次导入（将现有的 Android 代码导入 Eclipse）。然后问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T17:39:20.037

在导入之前，您必须在 Eclipse Workspace 中手动复制每个库，因为如果库位于其他地方，Eclipse 似乎很愚蠢。符号链接库也不起作用。

# android-webview - 在 Android 4.2 (API 17) 中加载自定义字体的问题

> ID：15196773
> 
> 赞同：11
> 
> 时间：2013-03-04T07:43:39.140
> 
> 标签：android-webview

我有一个静态 html 文件“myhtml.html”存储在我的 assets/html/ 目录中，这个 html 加载自定义字体（存储在 assets/fonts/ 下），如下所示：

```
<style type="text/css">
    @font-face {
        font-family: 'MyFont';
        src: url('file:///android_asset/fonts/myfont.ttf');
    }
</style> 
```

我正在使用以下代码加载此 html：

```
String html = getHtml(); // This method loads the myhtml.html from asset. This loads properly.
WebView webView = (WebView) findViewById(R.id.webbox);
WebSettings webSettings = webView.getSettings(); 
webSettings.setDefaultTextEncodingName("utf-8");
webSettings.setFixedFontFamily("fonts/myfont.ttf");
webView.loadDataWithBaseURL("file:///android_asset/", html, "text/html", "UTF-8", null); 
```

此代码适用于除 Android 4.2 (API 17) 之外的所有 android 版本。

在 Android 4.2 中，会加载 HTML，但不会加载自定义字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:17:30.383

我认为这是一个错误。我提交了[https://code.google.com/p/android/issues/detail?id=54516](https://code.google.com/p/android/issues/detail?id=54516)

如果有人知道不同，请纠正我。此外，如果此错误困扰您，请加注星标以获得更多关注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T12:06:15.233

请使用（svg 字体）。这个对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T15:03:58.503

我也有同样的问题。改变

```
webView.loadDataWithBaseURL("file:///android_asset/", html, "text/html", "UTF-8", null); 
```

至

```
webView.loadDataWithBaseURL("http://example.com", html, "text/html", "UTF-8", null); 
```

解决了这个问题。

# photoshop - Photoshop 文本工具在文本开头添加标点符号

> ID：15196780
> 
> 赞同：22
> 
> 时间：2013-03-04T07:44:05.010
> 
> 标签：photoshop

我在使用 Photoshop 时遇到了一个奇怪的问题——当我使用文字工具时，我可以正常输入字母，但是当我输入任何标点符号时，它会被添加到文本的开头。

据我记得，我没有更改任何设置。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-10T16:18:33.593

您可以尝试：转到编辑>首选项>类型..选择类型>选择文本引擎选项选择东亚。重新启动 Photoshop。创建新项目。再次尝试文本工具。

（如果您想使用使用其他文本引擎类型创建的项目）将所有图层复制/粘贴到新项目。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-10-23T15:45:30.560

这是一个段落选项。转到窗口>段落，然后会弹出一个小窗口。您将在底部有两个按钮。一个在 P 的左边有一个箭头，一个在右边。选择正确的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-11-11T20:35:33.087

选择受此问题影响的所有文本：

Window -> Character，点击旁边的图标隐藏Character Window，Middle Western Features，选择Left-to-right character direction。

# c - 如何等到数据写入管道的另一端

> ID：15196784
> 
> 赞同：7
> 
> 时间：2013-03-04T07:44:32.567
> 
> 标签：c, ipc, pipe

我正在用 C 语言开发一个应用程序。父进程和子进程通过管道进行通信。在写入管道之前，父进程执行另一个语句。在示例代码中，我使用了 sleep(10) 来进行延迟。在子进程中，它应该从管道中读取数据。但是在子进程的管道读取端没有读取数据。

```
int main()
{
    int pid;
    FILE *fp;
    fp = fopen("test.txt","w");
    char *buff;
    int fd[2];
    int count = 0 ;
    pipe(fd);
    pid = fork();
    if(pid == 0)
    {
        close(fd[1]);
        ioctl(fd[0], FIONREAD, &count);
        fprintf(fp,"Value of count: %d ",count);
        buff = malloc(count);
        fprintf(fp,"\n TIME before read: %s",__TIME__);
        read(fd[0], buff, count);
        fprintf(fp,"\nbuffer: %s\n TIME after read %s", buff, __TIME__);
    }
    else{
        close(fd[0]);
        sleep(10);    //delay caused by application specific code replaced with sleep
        write(fd[1],"THIS is it",10);
    }
    fclose(fp);
    return 0;
} 
```

如何让子进程等到另一端写入数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T08:27:26.900

您的管道以阻塞模式打开，您没有做任何更改，这可能是您想要的。

但是，由于您要做的第一件事是请求管道上等待的数据大小，然后盲目地跳入读取那么多字节（由于父级尚未写入任何内容，因此代码执行时该字节很可能为零) 你没有阻止，而是离开，因为你什么都没要求。

有很多方法可以做到这一点，包括选择循环。如果您希望在数据可用之前*阻止*读取，则在单个字节上执行此操作，然后填写剩余数据。

这绝不是如何*正确*执行此操作的示例，但它是一个简短示例，说明如何等待单个字节，请求管道的读取大小以获取其余数据，读取它，以及继续此操作，直到管道没有剩余数据并且父级关闭其末端：

我希望你觉得这对你有帮助。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/ioctl.h>

int main()
{
    int pid = 0;

    // create pipe pair
    int fd[2];
    pipe(fd);

    pid = fork();
    if (pid == 0)
    {
        // child side
        char *buff = NULL;
        char byte = 0;
        int count = 0;

        // close write side. don't need it.
        close(fd[1]);

        // read at least one byte from the pipe.
        while (read(fd[0], &byte, 1) == 1)
        {
            if (ioctl(fd[0], FIONREAD, &count) != -1)
            {
                fprintf(stdout,"Child: count = %d\n",count);

                // allocate space for the byte we just read + the rest
                //  of whatever is on the pipe.
                buff = malloc(count+1);
                buff[0] = byte;
                if (read(fd[0], buff+1, count) == count)
                    fprintf(stdout,"Child: received \"%s\"\n", buff);
                free(buff);
            }
            else
            {   // could not read in-size
                perror("Failed to read input size.");
            }
        }

        // close our side
        close(fd[0]);
        fprintf(stdout,"Child: Shutting down.\n");
    }
    else
    {   // close read size. don't need it.
        const char msg1[] = "Message From Parent";
        const char msg2[] = "Another Message From Parent";
        close(fd[0]);
        sleep(5); // simulate process wait
        fprintf(stdout, "Parent: sending \"%s\"\n", msg1);
        write(fd[1], msg1, sizeof(msg1));
        sleep(5); // simulate process wait
        fprintf(stdout, "Parent: sending \"%s\"\n", msg2);
        write(fd[1], msg2, sizeof(msg2));
        close(fd[1]);
        fprintf(stdout,"Parent: Shutting down.\n");
    }
    return 0;
} 
```

* * *

**输出**

```
Parent: sending "Message From Parent"
Child: count = 19
Child: received "Message From Parent"
Parent: sending "Another Message From Parent"
Parent: Shutting down.
Child: count = 27
Child: received "Another Message From Parent"
Child: Shutting down. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:06:34.073

问题在于获取写入管道的字节数。你在 fork() 之后就得到了它。如果读取过程首先执行，它将不包含任何数据（并且计数为零）。如果写入过程先执行，它将包含一些数据。

> 如何让子进程等到另一端写入数据？

由于您以阻塞模式打开管道，因此您应该尽可能多地读取数据，而不是尝试获取写入数据的大小。

* * *

这是等待完整消息的修改示例：

```
#include <stdio.h>
#include <sys/ioctl.h>
int main()
{
int pid;
FILE *fp;
fp = fopen("test.txt","w");
char *buff = malloc(1024);
int fd[2];
int count = 0 ;
pipe(fd);
pid = fork();
        if(pid == 0)
        {
                close(fd[1]);

                int i = 0;

                while ( i < 10 )
                {
                    fprintf(fp,"\n TIME before read: %s \n",__TIME__);
                    read(fd[0], buff+i, 1);
                    ++ i;
                }

                fprintf(fp,"Full message received!\nbuffer: %s\n TIME after read %s\n", buff, __TIME__);
        }
        else{
                close(fd[0]);
                sleep(10);    //delay caused by application specific code replaced with sleep
                write(fd[1],"THIS is it",10);
        }
fclose(fp);
return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:07:58.000

我想之后

```
ioctl(fd[0], FIONREAD, &count);  
the count is 0\.  

read(fd[0], buff, count) will get no data.  

try   
read(fd[0], buff, 10) 
```

# javascript - Javascript 秒表性能

> ID：15196787
> 
> 赞同：2
> 
> 时间：2013-03-04T07:44:44.613
> 
> 标签：javascript, jquery, performance, stopwatch

我正在尝试在表格中显示多个运行时间。该表有 3 列（编号、名称、时间）。时间以“hh:mm:ss.f”格式显示，这意味着我每 100 毫秒更新一次时间。

```
function updateTimes() {
    setTimeout(updateTimes, 100);
   // requestAnimationFrame(updateTimes);
    $("#livedata tbody tr").each(function (index, value) {
        var live = $(value).data("base");
        $("#" + live.Entry.Id + "_time").text(formatTimeF(moment().subtract(live.Data)));
    });
}

 //Create Table Row
function UpdateLive(live) {
    var e = $("#" + live.Entry.Id);

    if (e.length == 0) {
        e = $("<tr id='" + live.Entry.Id + "' class='live'/>");
    $("<td id='" + live.Entry.Id + "_name" + "'></td>").appendTo(e);
        $("<td id='" + live.Entry.Id + "_nr" + "'></td>").appendTo(e);
        $("<td id='" + live.Entry.Id + "_time" + "'></td>").appendTo(e);
        e.appendTo($("#livedata"));
    }
    e.data("base", live);
} 
```

该代码有效并且时间在“普通”PC上按预期显示，我的问题是移动设备（手机）。对于大多数这些设备来说，更新间隔（100ms）似乎太快了，所以时间开始“跳跃”。如果我只更新现有表格元素的时间，“跳跃”并不难，但如果我添加表格行，它会变得最糟糕，直到添加行。我使用 JQuery 来操作表格。

有谁知道我可以如何提高我的表现？

亲切的问候马努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:39:00.857

一些想法：

1.  使用对元素的直接引用而不是一直通过选择器访问它们肯定会有所帮助`$`。例如，使用`$(live.childNodes[2])`代替`$("#" + live.Entry.Id + "_time")`，或存储对单个单元格的引用。然后您可以删除`id`单元格的所有属性。
2.  假设瓶颈是元素创建，您可以提前创建隐藏的表格行，并在使用它们时显示它们，使用后再次隐藏它们。不过，这将需要对这些函数进行重大重写。
3.  我不确定`$('<td>')`增加了多少开销。也许`document.createElement('td')`明显更快。
4.  （这实际上应该在每个与性能相关的更改开始时出现） 配置您的代码，例如使用 Chrome 开发人员工具中的配置文件选项卡。它将显示确切花费了多少时间，以便您知道最昂贵的函数调用是什么。我会假设即使它在桌面上更快，在移动设备上最慢的东西在桌面上仍然是最慢的。

# php - 在 php javascript window.location.href 中不能在提交按钮上工作？

> ID：15196789
> 
> 赞同：-2
> 
> 时间：2013-03-04T07:44:46.470
> 
> 标签：php, javascript, jquery

在 PHP 中，JavaScript`window.location.href`不适用于`submit`按钮。问题是该功能`order()`没有在提交按钮上进行。我也试过`alert('');`消息。

我想要提交订单按钮，然后提交表单并将用户重定向到 login.php

```
<script type="text/javascript">
  function order() {
    var sStr1 = "login.php";
    window.location.href = sStr1;
    return false;
  }
</script>

<input type="submit" class="button4" name="order" id="order" value="Place Order" onclick="order()" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:54:59.877

更改`window.location`不会提交表单。我宁愿键入`<form action="login.php" method="...">`，然后不需要 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:38:05.120

您必须在服务器端代码中添加重定向脚本。表单必须有一个动作 url，以便在默认提交点击时将其提交到该 url（即，没有您的*order()*函数）。在该操作 url 中检查表单数据是否由

```
if(isset($_POST['order'])) 
```

并根据需要在该条件内重定向用户。

# mysql - Mysql CAST 返回无效数据

> ID：15196791
> 
> 赞同：2
> 
> 时间：2013-03-04T07:44:46.873
> 
> 标签：mysql, cas, unsigned

我有一个查询

```
SELECT MAX(CAST(user_name as SIGNED)) as max_id FROM (`users`) 
```

它返回

```
 2.01303045556E+12 
```

但实际上最大值是`2013030455555`

有谁知道怎么回事？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:52:40.133

那是对的。

`2.01303045556E+12`实际上是`2013030455555`。

`x E+12`方法`x*10 ^ 12`

`2*10^12=2000000000000`（2 后跟 12 个零）。

这是指数（通常是浮点）数字表示。请参阅[wikipedia 上的科学记数法](http://en.wikipedia.org/wiki/Scientific_notation)（向下滚动到“E 记数法”）。

**要摆脱它，**您可以将该数据转换为十进制或整数，而不是浮点数。也许有更好的方法，但我不知道。

例子：

```
-- example for 16 digits
SELECT MAX(CAST(user_name as DECIMAL(16,0)) as max_id FROM (`users`) 
```

另一种解决方案：在 SQL 或 PHP 中更改数字格式（如果您正在使用它）。

# mysql - 导入数据跳过第一个 id 列

> ID：15196792
> 
> 赞同：0
> 
> 时间：2013-03-04T07:44:50.570
> 
> 标签：mysql, import, mysql-workbench, workbench

我正在使用工作台创建我的第一个数据库，但是在将数据导入关系表时遇到问题。它由`name_id`、`name`、组成`surname`。

我已将 AI 标记为`name_id`自动设置值，但是当我想导入 .csv 数据时，它会插入到前两列中 -`name_id`而`name`不是插入到`name`and`surname`中。

如何将数据直接导入列`name`并`surname`跳过表的第一列 ( `name_id`)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:48:18.710

您可以使用 mysql shell 控制台，然后在那里使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)。

为了使用它并自动增加您的 ID 列，您需要将 NULL 作为第一列值。

所以首先准备你的文件：

```
$ perl -pe 's/.*?;/\\N;/' data.csv > data_processed.csv 
```

上面的命令将文件中的所有 ID 替换为 '\N'，它是 null 的符号。

然后只需将此文件导入您的数据库。

```
LOAD DATA INFILE "data_processed.csv" INTO TABLE name; 
```

# php - 在php中将音频文件复制到服务器

> ID：15196793
> 
> 赞同：0
> 
> 时间：2013-03-04T07:44:50.590
> 
> 标签：php, copy

我正在将一个 mp3 文件从远程服务器上传到 url 并插入与数据库相关的文件。数据插入正确，但复制功能不起作用。我正在使用下面的代码。

该文件没有从源文件夹复制到目标文件夹。

```
if(isset($_POST["save"]))
{  
    $rand=rand(0,2000);
    $title=$_POST["title"];
    $category=$_POST["category"];
    $desc=$_POST["obj_desc"];

    //front
    $size320=$_FILES["size320"]["name"];
    $size320_dest="ringtone/music/".$rand.$size320;
    //$size320_action=copy($_FILES["size320"]["tmp_name"],$size320_dest);
    move_uploaded_file($_FILES["size320"]["tmp_name"],$size320_dest);

    //select data for checking

    $query_image="insert into ringtone (title,  category, detail, ring) values
        ('$title', '$category', '$desc', '$size320_dest')";              
    mysql_query("$query_image") or die ("$query_image");

} 
```

# android - 片段中的 AsyncTask 存在问题

> ID：15196795
> 
> 赞同：0
> 
> 时间：2013-03-04T07:44:54.933
> 
> 标签：android, android-fragments, android-activity, actionbarsherlock

我正在尝试将我的代码转换为使用片段。我对 Android 还是很陌生，我最初是通过制作很多类开始的，只是使用意图从一个 Activity 更改为另一个 Activity。我正在学习我的一个类，该类从服务器读取 JSON 数组并将表显示为列表并尝试将其转换为片段。为此，我遵循了此处提供的教程：

[https://www.youtube.com/watch?v=TGXenxtDEGQ](https://www.youtube.com/watch?v=TGXenxtDEGQ)

它说我应该将我的 onCreate 更改为 onStart 并包含我已经完成的 onCreateView。我还将“ClassName.this”更改为它出现的“getActivity()”。该代码在尝试将其转换为片段之前运行良好，但现在我正在尝试使用片段时遇到问题。我认为这与 AsyncTask 有关。

在下面的代码块中，jParser 是我创建的 JSONParser 类的一个实例，它处理解析 JSON 数据。我还检查以确保我传递给该方法的 URL 返回有效的 JSON 以进行解析。这个类和我上面调用的方法作为一项活动工作得很好；当我在片段中操作时，我不能简单地做同样的事情吗？

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View view = inflater.inflate(R.layout.read_options, container, false);
    return view;
}
@Override
public void onStart() {
    super.onStart();
    // TODO Auto-generated method stub
    optionsList = new ArrayList<HashMap<String, String>>();
    new LoadOptions().execute();
    ListView lv = getListView();
    ...
    (Code to launch new activity when an item in list is pressed)
    ...
}

class LoadOptions extends AsyncTask<String, String, String>{
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(getActivity());
        pDialog.setMessage("Loading options.  Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected String doInBackground(String... args){
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        JSONObject json = jParser.makeHttpRequest(url_options, "GET", params);
        Log.d("All Options: ", json.toString());

        try{
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1){
                // Options Found, Iterate Through
                options = json.getJSONArray(TAG_OPTIONS);
                for(int i = 0; i < options.length(); i++){
                    JSONObject c = options.getJSONObject(i);
                    String id = c.getString(TAG_OPTIONID);
                    String duration = c.getString(TAG_DURATION);
                    String reward = c.getString(TAG_REWARD);

                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put(TAG_OPTIONID,  id);
                    map.put(TAG_DURATION, duration);
                    map.put(TAG_REWARD, reward);

                    optionsList.add(map);
                }
            } else {
                // Options are not available or server is down.
                // Dismiss the loading dialog and display an alert onPostExecute
                pDialog.dismiss();
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(String file_url){
        pDialog.dismiss();
        getActivity().runOnUiThread(new Runnable() {
            public void run() {
                ListAdapter adapter = new SimpleAdapter(
                        getActivity(), optionsList, R.layout.list_options, new String[] 
                                {TAG_OPTIONID, TAG_DURATION, TAG_REWARD},
                                new int[] {R.id.tvOption, R.id.tvDuration, R.id.tvReward});
                setListAdapter(adapter);

                // Check for whether or not there are options available and display alert
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                JSONObject json = jParser.makeHttpRequest(url_options, "GET", params);
                int success = 0;
                try {
                    success = json.getInt(TAG_SUCCESS);
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                if (success == 0){
                AlertDialog.Builder alertDialog = new AlertDialog.Builder(getActivity());
                alertDialog.setTitle("No Options Available!");
                alertDialog.setMessage("No options currently available.  You will receive a " + 
                "notification when there are options available.  Click 'Okay' to return to main screen");
                alertDialog.setCancelable(false);
                alertDialog.setPositiveButton("Okay", new DialogInterface.OnClickListener(){
                    public void onClick(DialogInterface dialog, int id){
                        Intent i = new Intent(getActivity().getApplicationContext(), MainActivity.class);
                        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(i);
                    }
                });
                alertDialog.show(); 
                }

            }
        });
    } 
```

错误日志如下：

```
03-03 23:30:50.812: W/System.err(28019): java.net.SocketException: Permission denied
03-03 23:30:50.863: W/System.err(28019):    at org.apache.harmony.luni.platform.OSNetworkSystem.socket(Native Method)
03-03 23:30:50.863: W/System.err(28019):    at dalvik.system.BlockGuard$WrappedNetworkSystem.socket(BlockGuard.java:335)
03-03 23:30:50.863: W/System.err(28019):    at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:216)
03-03 23:30:50.863: W/System.err(28019):    at java.net.Socket.checkOpenAndCreate(Socket.java:821)
03-03 23:30:50.863: W/System.err(28019):    at java.net.Socket.connect(Socket.java:967)
03-03 23:30:50.863: W/System.err(28019):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-03 23:30:50.863: W/System.err(28019):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:156)
03-03 23:30:50.863: W/System.err(28019):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-03 23:30:50.867: W/System.err(28019):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-03 23:30:50.867: W/System.err(28019):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
03-03 23:30:50.867: W/System.err(28019):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-03 23:30:50.867: W/System.err(28019):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-03 23:30:50.867: W/System.err(28019):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-03 23:30:50.867: W/System.err(28019):    at com.example.abtest.JSONParser.makeHttpRequest(JSONParser.java:62)
03-03 23:30:50.867: W/System.err(28019):    at com.example.abtest.ReadOptionsFragment$LoadOptions.doInBackground(ReadOptionsFragment.java:111)
03-03 23:30:50.867: W/System.err(28019):    at com.example.abtest.ReadOptionsFragment$LoadOptions.doInBackground(ReadOptionsFragment.java:1)
03-03 23:30:50.867: W/System.err(28019):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-03 23:30:50.867: W/System.err(28019):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-03 23:30:50.867: W/System.err(28019):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-03 23:30:50.871: W/System.err(28019):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-03 23:30:50.871: W/System.err(28019):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-03 23:30:50.871: W/System.err(28019):    at java.lang.Thread.run(Thread.java:1019)
03-03 23:30:50.871: E/Buffer Error(28019): Error converting result java.lang.NullPointerException
03-03 23:30:50.871: E/JSON Parser(28019): Error parsing data org.json.JSONException: End of input at character 0 of 
03-03 23:30:50.882: W/dalvikvm(28019): threadid=10: thread exiting with uncaught exception (group=0x4001e578)
03-03 23:30:50.882: E/AndroidRuntime(28019): FATAL EXCEPTION: AsyncTask #1
03-03 23:30:50.882: E/AndroidRuntime(28019): java.lang.RuntimeException: An error occured while executing doInBackground()
03-03 23:30:50.882: E/AndroidRuntime(28019):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.lang.Thread.run(Thread.java:1019)
03-03 23:30:50.882: E/AndroidRuntime(28019): Caused by: java.lang.NullPointerException
03-03 23:30:50.882: E/AndroidRuntime(28019):    at com.example.abtest.ReadOptionsFragment$LoadOptions.doInBackground(ReadOptionsFragment.java:112)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at com.example.abtest.ReadOptionsFragment$LoadOptions.doInBackground(ReadOptionsFragment.java:1)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-03 23:30:50.882: E/AndroidRuntime(28019):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-03 23:30:50.882: E/AndroidRuntime(28019):    ... 4 more
03-03 23:30:56.742: E/WindowManager(28019): Activity com.example.abtest.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4055c690 that was originally added here
03-03 23:30:56.742: E/WindowManager(28019): android.view.WindowLeaked: Activity com.example.abtest.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4055c690 that was originally added here
03-03 23:30:56.742: E/WindowManager(28019):     at android.view.ViewRoot.<init>(ViewRoot.java:263)
03-03 23:30:56.742: E/WindowManager(28019):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:171)
03-03 23:30:56.742: E/WindowManager(28019):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:114)
03-03 23:30:56.742: E/WindowManager(28019):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
03-03 23:30:56.742: E/WindowManager(28019):     at android.app.Dialog.show(Dialog.java:242)
03-03 23:30:56.742: E/WindowManager(28019):     at com.example.abtest.ReadOptionsFragment$LoadOptions.onPreExecute(ReadOptionsFragment.java:104)
03-03 23:30:56.742: E/WindowManager(28019):     at android.os.AsyncTask.execute(AsyncTask.java:391)
03-03 23:30:56.742: E/WindowManager(28019):     at com.example.abtest.ReadOptionsFragment.onStart(ReadOptionsFragment.java:62)
03-03 23:30:56.742: E/WindowManager(28019):     at android.support.v4.app.Fragment.performStart(Fragment.java:1332)
03-03 23:30:56.742: E/WindowManager(28019):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:906)
03-03 23:30:56.742: E/WindowManager(28019):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
03-03 23:30:56.742: E/WindowManager(28019):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
03-03 23:30:56.742: E/WindowManager(28019):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
03-03 23:30:56.742: E/WindowManager(28019):     at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
03-03 23:30:56.742: E/WindowManager(28019):     at android.os.Handler.handleCallback(Handler.java:587)
03-03 23:30:56.742: E/WindowManager(28019):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-03 23:30:56.742: E/WindowManager(28019):     at android.os.Looper.loop(Looper.java:130)
03-03 23:30:56.742: E/WindowManager(28019):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-03 23:30:56.742: E/WindowManager(28019):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 23:30:56.742: E/WindowManager(28019):     at java.lang.reflect.Method.invoke(Method.java:507)
03-03 23:30:56.742: E/WindowManager(28019):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
03-03 23:30:56.742: E/WindowManager(28019):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
03-03 23:30:56.742: E/WindowManager(28019):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢 - 非常感谢任何朝着正确方向的帮助或轻推！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:54:51.330

添加此权限 `<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>` 并

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

在你的清单中

# asp.net - 控制事件的顺序

> ID：15196802
> 
> 赞同：0
> 
> 时间：2013-03-04T07:45:27.130
> 
> 标签：asp.net, vb.net

控件包含事件。例如，GridView 包含：RowCreated、RowDataBound 等。

以下网页建议在 Page.Load 和 Page.LoadComplete 事件之间执行控制事件：http: [//msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)（参见第二个表在网页上）。请确认这对于回发和无回发都是正确的。

有没有一种方法可以建立控制事件的顺序，例如 RowCreated 在 RowUpdating 之前执行吗？我意识到常识有时可以告诉您哪些事件将首先执行（通过查看事件的名称），但是我发现一些控件不是。我也意识到参考资料有时允许您将其拼凑在一起，例如 RowCancellingEdit 说事件执行：“在 GridView 控件退出编辑模式之前”。我还意识到我可以使用 Reflector 单步执行代码并找出首先运行的事件。

问题是：有没有办法从参考资料中分辨出哪个先运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:21:20.083

这是正确的。[这个备忘单](http://files.meetup.com/1060099/asp.net_life_cycle_cheatsheet.pdf)可能会有所帮助。

# c# - VSTO 格式 word-footer 为左边界

> ID：15196804
> 
> 赞同：0
> 
> 时间：2013-03-04T07:45:35.510
> 
> 标签：c#, ms-word, vsto, ms-office

我需要实现一种方法来一键将页脚添加到由一行组成的 word 文档中。第一部分必须是文档的绝对路径，并且必须是左边界。除此之外，还必须有与右侧对齐的实际页码。

这在 Excel 上不是问题。在那里我可以使用 LeftFooter、CenterFooter、RightFooter。然而，在 Word 上没有可以访问的此类属性。

**编辑：**我发现了一个半工作的解决方案，其中有一些错误并且设计不正确，因为我还找不到合适的方法。

```
Word.Document doc = Globals.ThisAddIn.Application.ActiveDocument;
        foreach (Word.Section wordSection in doc.Sections)
        {
            Word.Range PageNumberRange = wordSection.Range;
            PageNumberRange.Fields.Add(PageNumberRange, Word.WdFieldType.wdFieldEmpty ,"PAGE  Arabic ", true);

            Word.Range footer = wordSection.Footers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range;
            footer.ParagraphFormat.Alignment = Word.WdParagraphAlignment.wdAlignParagraphCenter;
            footer.Tables.Add(footer, 1, 3);

            Word.Table tbl = footer.Tables[1];

            tbl.Cell(1, 1).Range.Text = doc.FullName;
            tbl.Cell(1, 3).Range.Text = PageNumberRange.Text;
            /**/

            footer.Font.ColorIndex = Word.WdColorIndex.wdBlack;
            footer.Font.Size = 6;

            PageNumberRange.Text = ""; 
```

这个问题是：它永远不会覆盖现有的页脚。如果它写“document1 ... 1”并且您再次单击它，因为您保存了文档，它不会更改页脚。此外：如果您有多个页面，则除第 1 页之外的所有页面都会被删除。

我从来没有想过要完成这么简单的任务会这么难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:39:38.417

使用样式的另一种方法

```
Document doc = this.application.ActiveDocument;
Section wordSection = doc.Sections[1];    
Range footer = wordSection.Footers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range;                              
footer.Fields.Add(footer, WdFieldType.wdFieldEmpty, @"PAGE \* ARABIC", true);                               
footer.Collapse(WdCollapseDirection.wdCollapseStart);
footer.InsertBefore("\t \t");
footer.InsertBefore(doc.FullName);                                                          
footer.Font.Name = "Arial"; 
```

# c++ - 错误 LNK2019：我的模板类中未解析的外部符号

> ID：15196807
> 
> 赞同：1
> 
> 时间：2013-03-04T07:45:55.033
> 
> 标签：c++, class, linker-errors

我创建了一个列表，它运行良好，但我必须使用模板重写它，我已经做到了。但是当我尝试编译我的代码时，我得到了链接器错误！你能帮忙看看这段代码吗？任何帮助将非常感激！这是**List.h**

```
#pragma once
#include <cstdlib>

template <class T>
class List
{
public:
struct Node
{
    T data;
    Node  *next, *prev;
    Node();
    Node(T &smth);
    ~Node();
};

Node *head;
Node *tail;
public:
  List();
  ~List();
  void add(T &d);
  void del(Node *); 
```

};

**列表.cpp**

```
#include "List.h"

template <class T>
List<T>::List()
{

}
template <class T>
List<T>::~List()
{
 Node*n;
 while (head != nullptr)
 {
    n = head->prev;
    delete head;
    head = n;
 }
}
template <class T>
void List<T>::add(T &d)
{
 Node *n = new Node(d);
 n->prev = head;
 n->next = nullptr;
 if (head!=nullptr)
    head->next = n;
 if(head == nullptr){
    head = n;
    tail = head;
 } else 
    head = n;
}
template <class T>
void List<T>::del(Node *node)
{   
 if (head == node)
    head = node->prev;
 if (tail == node)
    tail = node->next;
 if (node->next != nullptr)
    node->next->prev = node->prev;
 if (node->prev != nullptr)
    node->prev->next = node->next;
 delete node;
}

template <class T>
List<T>::Node::Node():data(),next(nullptr),prev(nullptr){}

template <class T>
List<T>::Node::Node(T &smth):data(smth),next(nullptr),prev(nullptr){}

template <class T>
List<T>::Node::~Node(){
 data.~Word();
 next = nullptr;
 prev = nullptr;
} 
```

和**main.cpp**

```
#include <List.h>
#include <iostream>
using namespace std;
int main()
{
 int a;
 List<int> my;
 cin >> a;
 my.add(a);
 cin >> a;
 my.add(a);
 cin >> a;
 my.add(a);
} 
```

我得到这些错误：

> 错误 1 ​​错误 LNK2019：函数 _main >c:\Users\lapchenko\documents\ 中引用的未解析外部符号“public: __thiscall >List::List(void)”(??0?$List@H@@QAE@XZ)视觉工作室>2012\Projects\ConsoleApplication1\ConsoleApplication1\Source.obj
> 
> 错误 2 错误 LNK2019：函数 _main >c:\Users\lapchenko\documents 中引用的未解析外部符号“public: __thiscall >List::~List(void)”(??1?$List@H@@QAE@XZ) \visual studio >2012\Projects\ConsoleApplication1\ConsoleApplication1\Source.obj
> 
> 错误 3 错误 LNK2019：函数 _main >c:\Users\lapchenko\ 中引用的未解析外部符号“public: void __thiscall >List::add(int &)” (?add@?$List@H@@QAEXAAH@Z)文档\visual studio >2012\Projects\ConsoleApplication1\ConsoleApplication1\Source.obj
> 
> 错误 4 error LNK1120: 3 unresolved externals c:\users\lapchenko\documents\visual >studio 2012\Projects\ConsoleApplication1\Debug\ConsoleApplication1.exe 1

# android - 源附件不包含文件 SQLiteOpenHelper.class 的源

> ID：15196808
> 
> 赞同：0
> 
> 时间：2013-03-04T07:46:06.107
> 
> 标签：android, sqlite, sqliteopenhelper

我在 android 版本 4.2 中有一个示例应用程序。我为每一行设置了断点。在调试的时候，突然调试停止说“源附件不包含文件SQLiteOpenHelper.class的源”。

我附上了jar文件，它仍然报告错误。当前安装了所有东西。但不知道这个错误的原因。

这是我的 MainActivity.java

```
package com.example.newwaterreadingapp;

import java.util.Calendar;
import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.view.View;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

protected static final android.content.Context Context = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.activity_main);

    final RelativeLayout mainLayout=(RelativeLayout)findViewById(R.id.mainLayout);
    mainLayout.startAnimation(AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right));
    final LinearLayout readingLayout=(LinearLayout)findViewById(R.id.waterReading);
    readingLayout.startAnimation(AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right));
    final LinearLayout pastDatePickerLayout=(LinearLayout)findViewById(R.id.PastDatePickerLayout);
    pastDatePickerLayout.startAnimation(AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right));
    readingLayout.setVisibility(View.GONE);
    pastDatePickerLayout.setVisibility(View.GONE);

    Button AddWaterReading=(Button)findViewById(R.id.AddWaterReading);    //click on + button.
    AddWaterReading.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            readingLayout.setVisibility(View.VISIBLE);
            mainLayout.setVisibility(View.GONE);
            TextView txtgetCurrentDate=(TextView)findViewById(R.id.currentDate);
            final Calendar c=Calendar.getInstance();
            txtgetCurrentDate.setText((c.get(Calendar.MONTH)+1)+"/"+c.get(Calendar.DATE)+"/"+c.get(Calendar.YEAR));  

        }
    });

    TextView getPastDate=(TextView)findViewById(R.id.getDate);
    getPastDate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            readingLayout.setVisibility(View.GONE);
            pastDatePickerLayout.setVisibility(View.VISIBLE);                           
        }
    });

    Button savePastDate=(Button)findViewById(R.id.savePastDate);
    savePastDate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            pastDatePickerLayout.setVisibility(View.GONE);
            readingLayout.setVisibility(View.VISIBLE);

            DatePicker getPastDatepicker=(DatePicker)findViewById(R.id.getPastDate);
                int YY=getPastDatepicker.getYear();
                int MM=getPastDatepicker.getMonth();
                int DD=getPastDatepicker.getDayOfMonth();
                TextView getPastDate=(TextView)findViewById(R.id.getDate);  
                getPastDate.setText((MM+1)+"/"+DD+"/"+YY);
        }
    });

    Button saveWaterReadingToDB=(Button)findViewById(R.id.saveWaterReading);
    saveWaterReadingToDB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            readingLayout.setVisibility(View.GONE);
             mainLayout.setVisibility(View.VISIBLE);    

             TextView getPastDate=(TextView)findViewById(R.id.getDate);
             TextView txtgetCurrentDate=(TextView)findViewById(R.id.currentDate);
             TextView txtgetWaterReading=(TextView)findViewById(R.id.water_Reading);

             CreateDB helper =new CreateDB(Context, "WaterElectricityReading.db", null, 1);              

             SQLiteDatabase DB;

             DB=helper.getWritableDatabase();

             String pastDate=getPastDate.getText().toString().trim();
             String currentDate=txtgetCurrentDate.getText().toString().trim();
             String waterReading=txtgetWaterReading.getText().toString().trim();

             ContentValues values=new ContentValues();
             values.put(CreateDB.COLUMN_NAME_READING_MODE,"Water");
             values.put(CreateDB.COLUMN_NAME_PASTDATETIME, pastDate);
             values.put(CreateDB.COLUMN_NAME_CURRENTDATETIME, currentDate);
             values.put(CreateDB.COLUMN_NAME_READINGVALUE, waterReading);

             DB.insert(CreateDB.TABLE_NAME, null, values);
             Toast.makeText(getApplicationContext(), "Added", Toast.LENGTH_LONG).show();
             DB.close();
             helper.close();                 
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

和 CreateDB.java

```
package com.example.newwaterreadingapp;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class CreateDB extends SQLiteOpenHelper{

    private static final String DATABASE_NAME="WaterElectricityReading.db";
    public static final String TABLE_NAME="Reading";
    public static final String COLUMN_NAME_READING_ID="_Id";
    public static final String COLUMN_NAME_READING_MODE="ReadingMode";
    public static final String COLUMN_NAME_PASTDATETIME="PastDateTime";
    public static final String COLUMN_NAME_CURRENTDATETIME="CurrentDateTime";
    public static final String COLUMN_NAME_READINGVALUE="ReadingValue";
    public static final int DATABASE_VERSION = 1;
     public static String DB_PATH = "";

    public CreateDB(Context context,String name, CursorFactory factory,
            int version) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);                                  
    }

    public void onCreate(SQLiteDatabase DB){

        final String CREATE_TABLE="create table if not exists "+ TABLE_NAME + "("+ COLUMN_NAME_READING_ID +" integer primary key autoincrement,"
                +COLUMN_NAME_READING_MODE+" text not null,"+COLUMN_NAME_PASTDATETIME+" date not null,"+COLUMN_NAME_CURRENTDATETIME
                +" date not null,"+COLUMN_NAME_READINGVALUE+" integer not null"+");";
        DB.execSQL(CREATE_TABLE);                                                       

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }           

} 
```

谁能建议我哪里出错了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:50:17.260

.jar 本身不会公开其源代码。您必须自己添加源代码才能浏览它。

你可以很确定错误是在你自己的一方，所以你可以质疑调试 Android 代码的使用:)

您可以手动添加它（不记得如何，Google）或使用过去对我做得很好的 Eclipse 插件；[https://code.google.com/p/adt-addons/](https://code.google.com/p/adt-addons/) 可能有点过时了。

# objective-c - 将 NSString 剪切为回车

> ID：15196814
> 
> 赞同：0
> 
> 时间：2013-03-04T07:46:27.520
> 
> 标签：objective-c, nsstring, cut

我有 NSString 示例：

```
@"Hello, Hello

How are you?" 
```

我需要保持他们的话才能转移马车。那是@“你好，你好”

我有来自 UIWebView 的文本。我得到的文字

```
NSString *myText = [self.webview stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerText"];
    NSLog(@"my text -> %@",myText); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:48:27.607

您必须插入`\n`才能换行

```
@"Hello, Hello\n\nHow are you?" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:05:44.737

亚历山大，如果我没看错的话，你想在换行符到来之前剪断字符串。

例如。
**之前：** “Hello
World”
**之后：** “Hello”

如果是这样，您可以使用此 NSString 类别：

**NSString+CutToNewLine.h**

```
#import <Foundation/Foundation.h>

@interface NSString (CutToNewLine)
- (NSString *)cutToNewLine;
@end 
```

**NSString+CutToNewLine.m**

```
#import "NSString+CutToNewLine.h"

@implementation NSString (CutToNewLine)
- (NSString *)cutToNewLine
{
    NSRange newLineRange = [self rangeOfString: @"\n"];
    NSRange stringBeforeNewLineRange = NSMakeRange(0, newLineRange.location);

    NSString *resultString = [self substringWithRange: stringBeforeNewLineRange];

    return resultString;
}

@end 
```

**结果**

```
 NSString *s = @"Hello\nWorld!";
 NSLog(@"%@", s);
 NSLog(@"%@", [s cutToNewLine]); 
```

***输出***

```
2013-03-04 20:02:17.075 NSStringCut[734:f07] Hello
World!
2013-03-04 20:02:17.076 NSStringCut[734:f07] Hello

Process finished with exit code 0 
```

您可以在[此处找到代码示例](https://dl.dropbox.com/u/930742/so/NSStringCut.zip)

BR
尤金。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:55:49.997

你也可以使用它
`@"Hello, Hello\n\n\rHow are you?"`

# android - Android ListView 无法根据条件更改图像

> ID：15196822
> 
> 赞同：0
> 
> 时间：2013-03-04T07:46:55.517
> 
> 标签：android, android-listview

我想根据不起作用的条件更改与每个项目关联的图像。项目没有重复，但图像正在重复

```
 public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            convertView = inflater.inflate(R.layout.search_shopping_items,
                    null);
            holder = new ViewHolder();
            holder.txt = (TextView) convertView
                    .findViewById(R.id.TextView01);
            holder.imgFavHis=(ImageView) convertView.findViewById(R.id.imgFavHis);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        if(LocalDb.isLoggedIn()){           

            holder.txt.setText( arr.get(position)); 
            if(hisList.contains(arr.get(position))){
                holder.imgFavHis.setImageResource(R.drawable.icnhistory);
            }
            else if (favList.contains(arr.get(position)) ){
                holder.imgFavHis.setImageResource(R.drawable.icnfavorite);
            }

        }
        else{
                    holder.txt.setText(arr.get(position));
        }

        return convertView;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:55:27.637

如果条件 (LocalDb.isLoggedIn()) 为假，则图像会重复。convertView 已经与图像一起出现在 getView() 中。因此，此图像保留在这种情况下。您可以在 else 语句中将 null 设置为 imgFavHis。

顺便说一句，使用以下

```
public Object getItem(int position) {
    return arr[position];
}

public long getItemId(int position) {
    return position;
} 
```

# c - C编程,删除函数

> ID：15196824
> 
> 赞同：-4
> 
> 时间：2013-03-04T07:47:02.137
> 
> 标签：c, fseek

尝试使用 fseek 修改名称，但它无法返回我想要的结果，即名称无法修改并保持不变

```
struct phonebook { char name[20]; };
struct phonebook a;

char temp[20];
cpPtr=fopen("name.txt","rb");//open the file
while(fread(&a,sizeof(a),1,cpPtr)==1){
    printf("Please enter name :\n");//require user to enter name
    scanf("%s",&temp);//temporary variable
    fflush(stdin);
    if(stricmp(a.name,temp)==0){
        printf("NAME :%s\n",a.name);
        else
            printf("The name is not exist");
        getch();
    }

    printf("Please enter new NAME :");
    scanf("&s",a.name);
    fflush(stdin);
    fseek(cpPtr,-sizeof(a),SEEK_CUR);//is there any wrong with seek?
    fwrite(&a,sizeof(a),1,cpPtr);
    fclose(cpPtr);
    printf("Name is modified");
    getch();
    system("cls");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:09:53.253

您打开文件只是为了阅读。如果要读写，则必须以读写模式打开文件。

```
fopen("name.txt","r+b"); // open read+write 
```

# audio - 使用音频单元将效果添加到麦克风输入并播放到扬声器输出

> ID：15196832
> 
> 赞同：2
> 
> 时间：2013-03-04T07:47:16.873
> 
> 标签：audio, audiounit

我正在练习 Audio Unit API。

我已将 kAudioUnitType_Effect 添加到离线声音缓冲区并成功播放带有混响的声音，如官方演示代码中的演示：“AVCaptureToAudioUnit” AUGraph 是 AUconverter->AUeffect->RIO 输出。

但是当我尝试添加效果以使用 AUGraph 播放实时输入声音时：RIO 输入->AUeffect->RIO 输出。它根本没有声音。我犯了什么错误吗？

最好的

文森特

```
// describe unit   AudioComponent
AudioComponentDescription audioCompDesc;
audioCompDesc.componentType = kAudioUnitType_Output;
audioCompDesc.componentSubType = kAudioUnitSubType_RemoteIO;
audioCompDesc.componentManufacturer = kAudioUnitManufacturer_Apple;
audioCompDesc.componentFlags = 0;
audioCompDesc.componentFlagsMask = 0;

// get rio unit from audio component manager
AudioComponent rioComponent = AudioComponentFindNext(NULL, &audioCompDesc);
//create Instance
CheckError(AudioComponentInstanceNew(rioComponent, &_effectState.rioUnit),
           "Couldn't get RIO unit instance");

// describe unit   AudioComponent
AudioComponentDescription audioCompDesc2;
audioCompDesc2.componentType = kAudioUnitType_FormatConverter;
audioCompDesc2.componentSubType = kAudioUnitSubType_AUConverter;
audioCompDesc2.componentManufacturer = kAudioUnitManufacturer_Apple;
audioCompDesc2.componentFlags = 0;
audioCompDesc2.componentFlagsMask = 0;

// get rio unit from audio component manager
AudioComponent converterComponent = AudioComponentFindNext(NULL, &audioCompDesc2);
//create Instance
CheckError(AudioComponentInstanceNew(converterComponent, &_effectState.converterUnit),
           "Couldn't get RIO unit instance");

// describe unit   AudioComponent
AudioComponentDescription audioCompDesc3;
audioCompDesc3.componentType = kAudioUnitType_Effect;
audioCompDesc3.componentSubType = kAudioUnitSubType_Reverb2;
audioCompDesc3.componentManufacturer = kAudioUnitManufacturer_Apple;
audioCompDesc3.componentFlags = 0;
audioCompDesc3.componentFlagsMask = 0;

// get rio unit from audio component manager
AudioComponent reverbComponent = AudioComponentFindNext(NULL, &audioCompDesc3);
//create Instance
CheckError(AudioComponentInstanceNew(reverbComponent, &_effectState.reverbUnit),
           "Couldn't get RIO unit instance");

AudioUnitElement ioUnitInputElement  = 1;
AudioUnitElement converterUnitOutputBus = 0;
AudioUnitElement reverbUnitOutputBus = 0;
AudioUnitElement ioUnitOutputElement = 0;

AudioUnitConnection ioUnitOutToIoconverterUnitIn;
ioUnitOutToIoconverterUnitIn.sourceAudioUnit    = _effectState.rioUnit;
ioUnitOutToIoconverterUnitIn.sourceOutputNumber = ioUnitInputElement;
ioUnitOutToIoconverterUnitIn.destInputNumber    = converterUnitOutputBus;

AudioUnitSetProperty (
                      _effectState.converterUnit,                     // connection destination
                      kAudioUnitProperty_MakeConnection,  // property key
                      kAudioUnitScope_Input,              // destination scope
                      converterUnitOutputBus,                // destination element
                      &ioUnitOutToIoconverterUnitIn,                // connection definition
                      sizeof (ioUnitOutToIoconverterUnitIn)
                      );

AudioUnitConnection converterOutToreverbIn;
converterOutToreverbIn.sourceAudioUnit    = _effectState.converterUnit;
converterOutToreverbIn.sourceOutputNumber = converterUnitOutputBus;
converterOutToreverbIn.destInputNumber    = reverbUnitOutputBus;

AudioUnitSetProperty (
                      _effectState.reverbUnit,                     // connection destination
                      kAudioUnitProperty_MakeConnection,  // property key
                      kAudioUnitScope_Input,              // destination scope
                      reverbUnitOutputBus,                // destination element
                      &converterOutToreverbIn,                // connection definition
                      sizeof (converterOutToreverbIn)
                      );

// AudioUnitElement reverbUnitOutputBus  = 0;
 //AudioUnitElement ioUnitOutputElement = 0;

 AudioUnitConnection reverbOutToIoUnitIn;
 reverbOutToIoUnitIn.sourceAudioUnit    = _effectState.reverbUnit;
 reverbOutToIoUnitIn.sourceOutputNumber = reverbUnitOutputBus;
 reverbOutToIoUnitIn.destInputNumber    = ioUnitOutputElement;

 AudioUnitSetProperty (
 _effectState.rioUnit,                     // connection destination
 kAudioUnitProperty_MakeConnection,  // property key
 kAudioUnitScope_Input,              // destination scope
 ioUnitOutputElement,                // destination element
 &reverbOutToIoUnitIn,                // connection definition
 sizeof (reverbOutToIoUnitIn)
                       );

CheckError(AudioUnitInitialize(_effectState.rioUnit),"Couldn't initialize RIO unit");

CheckError(AudioUnitInitialize(_effectState.converterUnit),"Couldn't initialize RIO unit");

CheckError(AudioUnitInitialize(_effectState.reverbUnit),"Couldn't initialize RIO unit");

CheckError (AudioOutputUnitStart (_effectState.rioUnit),"Couldn't start RIO unit"); 
```

# ruby-on-rails - 免费在 Heroku 上运行延迟作业

> ID：15196833
> 
> 赞同：19
> 
> 时间：2013-03-04T07:47:20.553
> 
> 标签：ruby-on-rails, heroku, delayed-job

**是否可以免费在 Heroku 上运行延迟作业？**

我正在尝试`delayed_job_active_record`在 Heroku 上使用。但是，它需要一个`worker dyno`，如果我全职打开这个测功机，它会花钱。

我认为使用 Unicorn 并让其工作人员运行延迟的工作而不是 Heroku 工作人员，在成功运行所有工作的同时不会花费任何成本。然而，独角兽工人似乎不会自动开始“工作”。

我的**Procfile**中有以下内容。

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
worker: bundle exec rake jobs:work 
```

以及我的**unicorn.rb中的以下内容**

```
worker_processes 3
timeout 30
preload_app true

before_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
  end

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis.quit
    Rails.logger.info('Disconnected from Redis')
  end

  sleep 1
end

after_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis = ENV['REDIS_URI']
    Rails.logger.info('Connected to Redis')
  end
end 
```

只有当我将 Heroku 工作人员从 0 缩放到 1 时，延迟的工作似乎才起作用。同样，不能使用 Unicorn 工作人员而不是 Heroku 工作人员来完成延迟工作吗？

我是否必须使用 gem`workless`来免费在 Heroku 上运行延迟作业？（[参考](https://stackoverflow.com/questions/11625662/running-delayed-job-worker-on-heroku)）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T08:39:45.353

像这样拆分流程可能会导致问题 - 你最好的选择是不要尝试让它“免费”，而是使用[http://hirefireapp.com/](http://hirefireapp.com/)之类的东西，当有工作要执行时，它会启动一个工人，从而显着降低成本而不是 24x7 运行工人。

另请注意，Heroku 只会为您自动启动“网络”进程，启动其他命名进程是一项手动任务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-25T14:56:57.663

您可以使用[Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler)使用以下命令运行作业

```
rake jobs:workoff 
```

这样作业可以在您的网络测功机中运行。根据[Delayed_Job docs](https://github.com/collectiveidea/delayed_job)，此命令将运行所有可用的作业并退出。

例如，您可以将调度程序配置为每 10 分钟运行一次此命令，当没有作业排队时，它不会对应用程序的性能产生明显影响。另一个好主意是安排它在访问率较低的时间每天运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T08:14:09.357

理想情况下，没有直接的方法可以免费获得此功能，但您会发现许多解决方法可以让您享受免费的后台工作。其中之一是[http://nofail.de/2011/07/heroku-cedar-background-jobs-for-free/](http://nofail.de/2011/07/heroku-cedar-background-jobs-for-free/)

此外，如果您打算使用 resque，它是后台作业的绝佳选择，您将需要 redis，它随 nano 版本免费提供 => [https://addons.heroku.com/redistogo](https://addons.heroku.com/redistogo)。[https://devcenter.heroku.com/articles/queuing-ruby-resque](https://devcenter.heroku.com/articles/queuing-ruby-resque)

简单的解决方案是为工人购买一个测功机，而您的网络测功机将是免费的。

如果您需要更多帮助，请告诉我。

谢谢

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-12T03:49:18.263

考虑使用 Workless gem：[https ://github.com/lostboy/workless](https://github.com/lostboy/workless)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-15T21:00:13.027

如果你只有一个 web worker，Heroku 会在它处于非活动状态一小时后将其休眠。

此外，Heroku 每天至少会重启一次所有测功机。

这使得很难在 ruby​​ 内进行调度程序。它至少必须使用持久存储（例如数据库）。

# javascript - Backbone.js Collection 的 fetch 调用出错

> ID：15196834
> 
> 赞同：0
> 
> 时间：2013-03-04T07:47:24.203
> 
> 标签：javascript, backbone.js, backbone-events, javascriptmvc, backbone.js-collections

仍然在 Backbone 周围徘徊，并遇到一个问题，当我从文件中传递 JSON 时，我的 Collection 不会填充。fetch() 调用出错，但我不确定如何准确调试它，因为我的 console.log() 没有告诉我任何有用的信息（据我所知如何挖掘它们）。

这是代码：

```
ItemGroup = Backbone.Collection.extend({

    model: Item, // left out definition since it's very simple

    url: 'js/items.json',

    initialize: function(models, options) {
        this._meta = {};
    },

    parse: function(response) { // parse is not being called, not sure why?
        this.set(response.name, 'name');
        return response.items;
    },

    set: function(val, prop) {
        this._meta[prop] = val;
    },

    get: function(prop) {
        return this._meta[prop];
    }

});

ItemGroupView = Backbone.View.extend({

    el: '#item-container',

    initialize: function(options) {

        this.collection.bind('reset', this.render, this);
        this.collection.fetch({
            success : function() {
                alert('successful');
            },
            error : function(collection, xhr, options) { // This is being triggered, not sure why?
                console.log(collection);
                console.log(xhr);
                console.log(options);
            }
        });

    },

    processItem: function(item) {
        var itemView = new ItemView({ model: item });
        this.$el.append(itemView.render().el);
    },

    render: function() {

        console.log(this.collection); // this shows an empty collection

        var itemGroupHtml = this.template({ name: this.collection.get('name') });
        $(this.main).html(itemGroupHtml);

        _.each(this.collection.models, this.processItem, this);

        return this;
    }

});

var toiletryItems = new ItemGroup();
var toiletryGroupView = new ItemGroupView({ collection: toiletryItems }); 
```

这是我的 json（我可以看到它成功地找到了文件，因为我在使用 Chome 检查器的网络请求中将其视为 200）：

```
[
 {
    'name' : 'toiletries',
    'items' : [
        { 'name': 'toothbrush' },
        { 'name': 'deodorant' },
        { 'name': 'toothpaste' },
    ]
 }
] 
```

提前致谢！

**更新：**

修复了无效的 json，但仍然看到一个空的 ToiletryItems 集合。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:39:52.740

发现问题出在我的解析函数上。响应参数是一个数组，因此该函数应该是：

```
parse: function(response) { // parse is not being called, not sure why?
    this.set(response[0].name, 'name');
    return response[0].items;
}, 
```

# php - 使用 PHP 读取 XML 属性

> ID：15196839
> 
> 赞同：1
> 
> 时间：2013-03-04T07:47:35.693
> 
> 标签：php, xml, soap, simplexml

我正在使用 API 来显示搜索查询的结果。

输出将以 XML 的形式出现，我需要解析 XML 并在浏览器中显示结果。

该文件包含许多属性，我不确定如何从中提取结果。

这是我的代码：

```
<?xml version="1.0" ?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns3:tourDetailsFullResponse xmlns:ns2="http://example.com/" xmlns:ns3="http://example.com/" xmlns:ns4="http://www.example.com/">

<ns4:MarketLocalisedTourData SellingCompanyCode="CODE1" OperatingProductCode="CODE2" MarketVariationCode="CODE3" Duration="8" Currency="USD" CatalogueCode="CODE4" TropicsBrochureCode="CODE5" BrandCode="CODE6" BookableOnline="true">

<ns4:TourInfo>
<ns4:TourName>London to Rome Highlights 2013</ns4:TourName>
<ns4:Metadata>
    <ns4:TourCategories>
        <ns4:TourCategory Name="TourStyles">
            <ns4:CategoryValue Name="European Discoveries"/>
        </ns4:TourCategory>
    </ns4:TourCategories>
    <ns4:Brochures>
        <ns4:Brochure Name="CostSaver 2013" Code="CODE1"/>
    </ns4:Brochures>
</ns4:Metadata>
<ns4:ContinentsVisited>
    <ns4:Continent Name="Europe" Code="EURO"/>
</ns4:ContinentsVisited>
<ns4:CountriesVisited>
    <ns4:Country Name="France" Continent="EURO" Code="FR"/>
    <ns4:Country Name="United Kingdom" Continent="EURO" Code="GB"/>
    <ns4:Country Name="Italy" Continent="EURO" Code="IT"/>
    <ns4:Country Name="Switzerland" Continent="EURO" Code="CH"/>
</ns4:CountriesVisited>
<ns4:LocationsVisited>
    <ns4:Location Name="Paris" Country="FR"/>
    <ns4:Location Name="Dover" Country="GB"/>
    <ns4:Location Name="London" Country="GB"/>
    <ns4:Location Name="Rome" Country="IT"/>
    <ns4:Location Name="Calais" Country="FR"/>
    <ns4:Location Name="Venice" Country="IT"/>
    <ns4:Location Name="Lucerne" Country="CH"/>
    <ns4:Location Name="Florence" Country="IT"/>
</ns4:LocationsVisited>
<ns4:Description>A lively journey through elegant Paris, gorgeous Lake Lucerne, charming Venice and cultural Florence, bookended by stays in London and legendary Rome. Spend a day at leisure in London and get the best views of Rome from high up in St. Peterâ€™s Basilica before throwing a lucky coin in Trevi Fountain.</ns4:Description>
<ns4:Assets>
    <ns4:Image Width="297" Url="http://www.example.com/imageurl" Type="map" Name="route_map" Height="297" Caption="route_map"/>
    <ns4:Image Width="600" Url="http://www.example.com/imageurl" Type="map" Name="route_map" Height="600" Caption="route_map"/>
    <ns4:Image Width="531" Url="http://www.example.com/imageurl" Type="photo" Name="primary_image" Height="531" Caption="primary_image"/>
    <ns4:Image Width="125" Url="http://www.example.com/imageurl" Type="photo" Name="primary_image" Height="125" Caption="primary_image"/>
</ns4:Assets>
  ....continues 
```

现在我想提取访问的大陆，访问的国家，访问的位置，行程，资产等......

我尝试使用如下的简单 xml

```
$feed = "response1_full.xml";

$xml = simplexml_load_file($feed);

print_r($xml);

foreach($xml->LocationsVisited[0]->attributes() as $a => $b) {
    echo $a,'="',$b,"\"\n";
}
also tried 
foreach($xml->TourInfo->LocationsVisited[0]->attributes() as $a => $b) {
    echo $a,'="',$b,"\"\n";
} 
```

还尝试了导致相同错误的所有其他可能性

> 致命错误：第 10 行 C:\xampp\htdocs\test\xmlread2.php 中的非对象调用成员函数 attributes()

我正在为此寻找解决方案超过几天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:36:41.890

如果你想遍历他们自己命名空间中的孩子，你必须告诉 SimpleXMLElement 哪个命名空间：

```
$ns4 = $xml->children('S', true)->Body
        ->children('ns3', true)->tourDetailsFullResponse
            ->children('ns4', true);

$locations = $ns4->MarketLocalisedTourData->TourInfo->LocationsVisited->Location;

foreach ($locations as $location) {
    $attributes = $location->attributes();
    echo $attributes['Name'];
    echo $attributes['Country'];
} 
```

[但是，您可以通过将xpath 与您感兴趣的名称空间一起](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)使用来让您的生活更轻松，方法是注册它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:36:59.397

$xml 有什么？你能打印结果吗？如果它**不包含任何东西**

那么问题在于命名空间，请查看以下问题： [使用 PHP 从 XML 中删除命名空间](https://stackoverflow.com/questions/1245902/remove-namespace-from-xml-using-php)

```
$feed = "response1_full.xml";
echo "<pre>";
$sxe = simplexml_load_file($feed);
if ($sxe === false) {
echo "Failed loading XML\n";
foreach(libxml_get_errors() as $error) {
    echo "\t", $error->message;
}
}
if (file_exists('response1_full.xml')) {
$xml = simplexml_load_file('response1_full.xml');
 //print_r($xml);
 } else {
exit('Failed to open test.xml.');
}
print_r($sxe->Body->tourDetailsFullResponse->MarketLocalisedTourData->TourInfo->LocationsVisited->Location[0]);
print_r($sxe->Body->tourDetailsFullResponse->MarketLocalisedTourData->TourInfo->LocationsVisited->Location[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T03:58:02.640

最后我设法通过DOM找到了答案。

@Deepak Srinivasan：我尝试了您在执行之前注册命名空间的建议，但我没有克服它，可能不确定如何继续。

@m4t1t0：感谢您的回复。

我已经粘贴了完整文件的 pastebin url，你们都可以从答案下方指定的 URL 中看到该文件。

我使用 getAttribute 方法得到了解决方案

```
$doc = new DOMDocument();
$doc->load( 'response1_full.xml' );

//tourname
$tname = $doc->getElementsByTagName( "TourName" );
$tourname = $tname->item(0)->nodeValue;
echo $tourname;
//locations visited
$locations = $doc->getElementsByTagName( "Location" );
foreach( $locations as $location )
{

    $locationname = $location->getAttribute('Name');
    $locationcountry = $location->getAttribute('Country');

    echo $locationname.'-'.$locationcountry.'<br>';
} 
```

它准确地打印出所需的详细信息。

但是现在我对同一个文件有一个小疑问，我有一些嵌套格式的信息，无论如何我可以轻松地提取它。！？

这是我的文件 [http://pastebin.com/iWQf6j4K](http://pastebin.com/iWQf6j4K)

在文件中，您可以看到一个部分

```
<ns4:WhatsIncluded> 
```

其中有标题和文本（ul - li 格式）

有什么办法可以在这个部分中提取数据。**如果我从Section**下的**Text**中提取数据，我将*li*项目完全作为一个段落，

 *****但是当我在Text**中使用 foreach 时，我只得到第一个*li*项目，

**我也为Text** *ul*尝试了 foreach ，但仍然只有一个结果。

有什么建议么..

非常感谢。***

# c++ - 初学者 C++：将索引语法转换为迭代器语法

> ID：15196853
> 
> 赞同：5
> 
> 时间：2013-03-04T07:48:34.160
> 
> 标签：c++, list, iterator, intersection

我正在尝试使用一点 Java 背景来学习 C++，并且我正在尝试编写返回两个列表交集的代码。我相信我在概念上有正确的想法，但是在语法上遇到了问题，因为没有任何东西在编译。

这是我想出的代码：

```
#include <iostream>
using namespace std;
#include <list>

template <typename Object>
list<Object> intersection( const list<Object> & L1, const list<Object> & L2){

  std::list<Object> result;                 
  int pos1 = 0;
  int pos2 = 0;

  while (pos1 < L1.size() && pos2 < L2.size()) {
    if (L1[pos1] > L1[pos2]) {
      pos1++;
    } else if (L2[pos2] > L1[pos1]) {
      pos2++;
    } else {
      result.push_back(L2[pos2]);
      pos1++;
      pos2++;
    }
  }
  return result;

} 
```

我认为我需要的东西：一个迭代器（我确定我访问列表的方式不正确）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:55:05.877

将 pos1 和 pos2 更改为迭代器：

```
list<Object> intersection( const list<Object> & L1, const list<Object> & L2){
  std::list<Object> result;                 
  std::list<Object>::iterator pos1 = L1.begin(), pos2 = L2.begin();
  while (pos1 != L1.end() && pos2 != L2.end()) {
     if (*pos1 > *pos2) { //works only if pos1 != L1.end() and pos2 != L2.end()
       pos1++;
       ... 
```

`pos1 = L1.begin()`指向`pos1`的第一个元素`L1`。

`++pos1`将迭代器向前移动到下一个元素

`*pos1`从中获取元素`pos1`

`pos1 != L1.end()`检查是否`pos1`到达列表的末尾。你不能从`pos1`when中获取元素`pos1 == L1.end()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:15:44.140

你需要一个`const_iterator`not `iterator`。

所有的 c++ 容器类[都有`typedef`](http://en.cppreference.com/w/cpp/container/list#Member_types)定义它们所包含的类型和迭代器类型等内容的[s 。](http://en.cppreference.com/w/cpp/container/list#Member_types)

在你的情况下`list<Object>::value_type`是 type `Object`。所以你可以说：

```
list<Object>::value_type object = Object(); 
```

同样`list<Object>::iterator`是用于遍历容器的迭代器的类型。您可以使用`begin()`and获取表示容器开始和结束的迭代器`end()`。

如果您的容器`const`与您的问题一样，`begin`并且 end 不要 return`iterator`他们 return `const_iterator`。您不能将其分配给`iterator`类型。它们是不同的，因为一个允许您修改值，另一个不允许。

您可以使用`const_iterator`. 但是，还有许多其他方法可以解决此问题。

*   `auto`意味着您不必明确说明类型。它为您做正确的事。
*   模板可以使用泛型参数，因此，您不必明确说明。
*   标准库有各种可能已经做你想做的算法（例如[`set_intersection`](http://en.cppreference.com/w/cpp/algorithm/set_intersection)）。

# javascript - How to enable the tab while clicking radio button

> ID：15196863
> 
> 赞同：1
> 
> 时间：2013-03-04T07:49:31.903
> 
> 标签：javascript, jquery, html, jquery-ui

I have got a task to do Jquery tab. On load the all tabs are disabled only the first tab is enabled also its radio button must be selected. If change the radio button then tab also have to change. My page is

```
<script>
  $(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,2,3]
});
    $( "input[type=submit], a, button" )
      .button()
      .click(function( event ) {
        event.preventDefault();
      });
      $('#enable1').click( function(){
      alert("a");
        $( "#tabs-2" ).tabs({ enabled: true });
      });
  });
  </script>

    <li><a href="#tabs-1">klj</a> </li>
    <li><a href="#tabs-2">jljl</a></li>
    <li><a href="#tabs-3">Sachin</a></li>
    <li><a href="#tabs-4">Ganguly</a></li>
  </ul>
  <div id="tabs-1">
    <p>jkljl</p>
  </div>
  <div id="tabs-2">
    <p>jkljl</p>
  </div>
   <div id="tabs-3">
    <p>Sachin</p>
  </div>
   <div id="tabs-4">
    <p>Ganguly</p>
  </div>
</div>

<input type="radio" name="tabs-1" value="tabs-1">tabs-1
<input type="radio" name="tabs-2" value="tabs-2">tabs-2
<input type="radio" name="tabs-3" value="tabs-3">tabs-3
<input type="radio" name="tabs-4" value="tabs-4">tabs-4<br>
</body>
</html> 
```

How to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:56:19.150

Give your radio inputs id "enable";

```
<input type="radio" id="enable1" name="tabs-1" value="tabs-1">tabs-1
<input type="radio" name="tabs-2" id="enable2" value="tabs-2">tabs-2
<input type="radio" name="tabs-3" id="enable3" value="tabs-3">tabs-3
<input type="radio" name="tabs-4" id="enable4" value="tabs-4">tabs-4<br> 
```

Also you should change enable and extend `$('#enable2').click( function(){ alert("a"); $( "#tabs" ).tabs('enable', 2); });` to others. It is better to handle it via one function and send the tabid to the function

Here's the live demo: [Live Demo](http://jsfiddle.net/Vnk8N/24/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:12:12.863

Live ID here :-> [http://jsfiddle.net/2aQ2g/](http://jsfiddle.net/2aQ2g/)

Change you code to this

Radio buttons

```
<input type="radio" name="tabs" value="1">tabs-1
<input type="radio" name="tabs" value="2">tabs-2
<input type="radio" name="tabs" value="3">tabs-3
<input type="radio" name="tabs" value="4">tabs-4<br> 
```

EDIT Have simplified the code further

```
 $(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,2,3]
  });
  $( "input[type=submit], a, button" )
      .button()
      .click(function( event ) {
        event.preventDefault();
      });  
 $( "input[type=radio]" ).click(function(){
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
});

}

 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:14:52.720

```
$("input[type='radio']").click(function(){

    var val = $(this).val();
   $("[href='#"+val+"']").parent().attr('class','ui-state-default ui-corner-top');
}); 
```

# jquery - 未捕获的 SyntaxError：ajax-jquery 中的意外标识符

> ID：15196864
> 
> 赞同：0
> 
> 时间：2013-03-04T07:49:36.287
> 
> 标签：jquery

我确信这里的某个地方缺少一个括号或一个额外的，或；。我收到意外的令牌或意外的标识符错误！

```
<script type="text/javascript">
    $(document).ready(function() {
      setInterval("ajaxd()",10000);
    });
      varJackpot =0;
      varPrevious=0;
    function ajaxd(){
      $.ajax({
       type: "GET",
       url: "getJackpot.asp?dx=<%=skinid%>",
       data: "",
       success: function(data){
         varJackpot =data[0];
         varPrevious =data[0];   
       }
    }) 

    $("#counter").flipCounter(
        "startAnimation", // scroll counter from the current number to the specified number
        {
        number: 5, // the number we want to scroll from
        end_number: 1024, // the number we want the counter to scroll to
        easing: jQuery.easing.easeOutCubic, // this easing function to apply to the scroll.
        duration: 5000, // number of ms animation should take to complete
        onAnimationStarted: myStartFunction // the function to call when animation starts
        //onAnimationStopped: myStopFunction, // the function to call when animation stops
        //onAnimationPaused: myPauseFunction, // the function to call when animation pauses
        //onAnimationResumed: myResumeFunction // the function to call when animation resumes from pause
    })
    function myStopFunction() {
    varPrevious = varJackpot;
    });
    }
</script> 
```

getJackpot.asp 调用返回一个数字。例子：

```
url: "getJackpot.asp?dx=7", 
```

将返回类似 12345.95

意外标记：第 39 行

整个事情都基于此链接中的[FlipCounter](http://bloggingsquared.com/jquery/flipcounter/)。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:55:51.853

你还没有关闭 ajax 调用:)

```
$.ajax({
                   type: "GET",
                   url: "getJackpot.asp?dx=<%=skinid%>",
                   data: "",
                   success: function(data){
                     varJackpot =data[0];
                     varPrevious =data[0];   
                   }
                } **)** 
```

:)

# php - 用于检查 POST 安全性和存储变量的 PHP 函数

> ID：15196868
> 
> 赞同：0
> 
> 时间：2013-03-04T07:50:05.433
> 
> 标签：php, html, function, post, http-post

我正在寻找有关如何制作功能以使其更容易的信息。我知道有一种更简单的方法，然后将我想要的发布变量写入 PHP。

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  $name =   isset($_POST['name']) ? htmlentities($_POST['name']) : '';
  $email =  isset($_POST['email']) ? htmlentities($_POST['email']) : '';
  $interest = isset($_POST['interest']) ? htmlentities($_POST['interest']) : '';
  $checkbox = isset($_POST['checkbox']) ? htmlentities($_POST['checkbox']) : ''; 
```

到目前为止，我想出了这样的功能：

```
function req_post($n){
  '$'$n = isset($_POST["$n"]) ? htmlentities($_POST["$n"]) : '';
} 
```

我知道我做错了，对 PHP 来说有点新。任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:28:30.073

制作这样的函数似乎很诱人，似乎删除了重复的代码等，但它最终总是会咬你。

您的代码显示您转义所有 POST 数据，为下一个环境做好准备，该环境将是一个 html 页面。

因此，如果您仅将 $email 输出到 html 页面，这似乎是值得的。

但是，如果您同时输出到网页“谢谢 $email”并将其存储到数据库，那么您还没有为数据库转义它，因此您面临 sql 注入攻击的风险。

在您了解得更清楚之前，您最好保留 $_POST['email'] 原样并在输出时转义它。

```
echo htmlentities($_POST['email']); 
```

或者

```
$query = 'update names set email = "'.mysql_real_escape_string($_POST['email']).'" where ID =1'; 
```

或者最好使用 PDO/Mysqli 和准备好的语句，它们会为您转义。

**htmlentities**是一种为 html 输出转义 的方法**mysql_real_escape_string**是一种为 mysql 数据库转义的方法（尽管已经过时，正如我和其他人所说的那样）。

事实是，如果你遇到像 $email 这样的变量，你会想，现在等一下，这是否已经为下一个环境准备好了？它从哪里来的？

当您看到 $_POST['email'] 时，您知道您正在处理可能非常肮脏和危险的数据，并且您会小心处理它。

您最好花时间进行一些过滤，并可能决定如果 $_POST['email'] （或名称或其他）确实为空，下一步该做什么 - 重新定位用户，向用户显示警告等等。

助记符 FIEO 提供了基本规则、过滤输入、转义输出，您可以通过花几个小时研究它来为自己省去很多未来的痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:11:00.567

```
//If you intend to put into database and you need to use a function

function clean($value){
$array = array("name", "email", "interest", "checkbox"); //For added security
   if(isset($_POST[$value]) && in_array($value, $array)){ //Since you are only concerned with post;
    return mysqli_real_escape_string($db_connection, $_POST[$value]); //and YES, use mysqli - forget what is deprecated in future projects
 }
}

$clean_name = clean("name");
$clean_email = clean("email");
$clean_interest = clean("interest");
$clean_checkbox = clean("checkbox");

echo $clean_email; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-04T07:59:25.103

```
function htmlentities_and_checkISset($string){

    $result = isset($string) ? htmlentities($string) : '';

    return $result
} 
```

或者这样做

```
function htmlentities_and_checkISset(){

        // get number of arguments in this function
         $numargs = func_num_args();

         // get arguments comming to the function
         $arg_list = func_get_args();

         // for each arg do the thing you want and then store it in an array
         for ($i = 0; $i < $numargs; $i++) {

         $data[] = isset($arg_list[$i]) ? htmlentities($arg_list[$i]) : '';

        }

     return $data;
    } 
```

你可以这样称呼它。

```
$data = htmlentities_and_checkISset($name,$email,$interest,$checkbox); 
```

或者

```
 $data = htmlentities_and_checkISset($_POST['name'],$_POST['email'],$_POST['interest'],$_POST['checkbox']); 
```

# excel - 需要与 ADODB VBA 宏 SQL SERVER 相关的帮助

> ID：15196873
> 
> 赞同：0
> 
> 时间：2013-03-04T07:50:34.107
> 
> 标签：excel, vba, sql-server-2008, adodb

我正在尝试使用 Excel 表中的 VB 宏将数据加载到我的 SQL Server 2008 R2 数据库中。我已经编写了一个对一个表工作正常的宏，但是当我修改它以将数据插入另一个表时，我得到了错误

`Runtime Error'2147217900(80040e14)' [microsoft][ODBC SQL Server Driver][SQL SERVER]Incorrect syntax near '9'`

当我按下调试时，这条线被突出显示

`oCm.Execute iRecAffected`

我要更新的表有 6 个字段 a、b、c、d、e、f 类型为 int、int、int、datetime、datetime 和 int

我相信错误是因为我没有为这一行中的日期时间字段做一些事情

`oCm.CommandText = "Insert Into Table (a, b, c, d, e, f) Values (" & a & " ," & b & " ," & c & "," & d & "," & e & "," & f & ")"`

有人可以告诉我可能是什么问题。

`

```
Dim DestinationWorkBook       As Workbook
Dim SourceWorkBook    As Workbook
Dim DestinationWorkBook1       As Workbook
Dim SourceWorkBook1    As Workbook
Dim oCm As ADODB.Command
Dim a As Integer
Dim b As Integer
Dim c As Integer
Dim d As Date
Dim e As Date
Dim f As Integer
Dim iRecAffected As Integer
Dim CurrentRow           As Integer
Set DestinationWorkBook = ThisWorkbook
Set SourceWorkBook = ThisWorkbook
Set DestinationWorkBook1 = ThisWorkbook
Set SourceWorkBook1 = ThisWorkbook
Dim b                    As String
Dim rngRange             As Range
Dim a                    As String

     LoopContinue = True

     CurrentRow3 = 2
    loop1 = True

     CurrentRow = 2
     DestinationWorkBook.Activate
     Worksheets("errors").Select
     Rows("1:1500").Select
     Selection.Delete Shift:=xlUp
     SourceWorkBook.Activate
     Worksheets("Final_output").Select
Dim oCon As ADODB.Connection
 Dim oRs As ADODB.Recordset
 Set oCon = New ADODB.Connection
 oCon.ConnectionString = "deleted"
 oCon.Open
 Set oCm = New ADODB.Command
 oCm.ActiveConnection = oCon
 While loop1 = True
 a = (Range("A" & CStr(CurrentRow)).Value)
 b = (Range("B" & CStr(CurrentRow)).Value)
 c = (Range("C" & CStr(CurrentRow)).Value)
 d = (Range("D" & CStr(CurrentRow)).Value)
 e = (Range("E" & CStr(CurrentRow)).Value)
 f = (Range("F" & CStr(CurrentRow)).Value)
 If Len(Range("A" & CStr(CurrentRow)).Value) = 0 Then
 loop1 = False
 End If
  If (loop1 <> False) Then

 oCm.CommandText = "Insert Into Table (a, b, c, d, e, f) Values (" & a & " ," & b & " ," & c & "," & d & "," & e & "," & f & ")"
oCm.Execute iRecAffected
CurrentRow = CurrentRow + 1
End If
Wend
oCon.Close
End Sub 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:55:34.303

我想你会发现 Table 是 ADO 中的保留字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:10:32.480

尝试在 CommandText 中的日期时间值周围加上单引号 - 例如`",'" & d & "','" & e & "',"`

ADO 的日期文字格式通常是`#mm/dd/yy#`，我认为只有在您使用的特定驱动程序支持的情况下，您才能使用任何其他文字格式。将值括在引号中应该可以解决这个问题。

# mysql - 选择随机表

> ID：15196874
> 
> 赞同：-4
> 
> 时间：2013-03-04T07:50:53.320
> 
> 标签：mysql

我想从我的数据库中的随机表中选择随机行。我在网上搜索，但一切都是关于从表中选择随机行。我知道这听起来很奇怪，但我需要它，因为我需要跨表轮询随机数据，如果有人能帮助我，我将不胜感激。

谢谢

**编辑** 因为我在几秒钟内得到了四张反对票:)，我想我只是说明一下我的原因：

我需要为随机股票选择 100 天（随机 100 天）的股票价格。每个表格代表特定股票的每日价格。现在我需要一种随机选择股票的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:54:33.420

```
SELECT table_name, engine
FROM information_schema.tables    
WHERE table_type = 'BASE TABLE' AND table_schema='database_name'  
order by rand()
limit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:58:01.200

```
SELECT * FROM information_schema.tables ORDER BY RAND() 
```

现在只需将其限制为数据库或其他首选项。

# android - 使用另一个布局创建进度对话框

> ID：15196879
> 
> 赞同：4
> 
> 时间：2013-03-04T07:51:21.117
> 
> 标签：android, android-layout, progressdialog

我想创建一个扩展另一个 XML 文件的进度对话框。

所以我尝试了以下代码

```
public class MyProgressDialog extends AlertDialog {

        public MyProgressDialog(Context context) {
            super(context,R.layout.customprog);

            // TODO Auto-generated constructor stub
        }

    }
MyProgressDialog pdia=new MyProgressDialog(this); 
```

并在 asynctask 中显示这用于`pdia.show();`onPreExecute()

**orgspin.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:drawable="@drawable/progress1"
android:pivotX="50%"
android:pivotY="50%" /> 
```

**自定义程序.xml**

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:padding="10dp" >

        <ProgressBar
            android:id="@+id/imageView1"
            android:indeterminateDrawable="@drawable/porgspin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/progress" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="41dp"
            android:layout_toRightOf="@+id/imageView1"
            android:text="Loading..."
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

    </RelativeLayout> 
```

当我运行程序时，我无法查看进度条。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T09:12:42.517

的第二个参数`super(context,R.layout.customprog)`接受`theme`资源而不是`layout`. 你为什么不膨胀布局呢？

```
public class MyProgressDialog extends AlertDialog 
{

       @Override
       public void show() {

        super.show();
        setContentView(R.layout.activity_main);
       }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:11:14.400

不要在构造函数中传递您的自定义布局，而是覆盖对话框的 onCreate() 方法并使用 setContentView() 方法来传递您的自定义布局..

# ruby-on-rails - rails 3.2中每页的页脚都不起作用（Prawn PDF）

> ID：15196881
> 
> 赞同：2
> 
> 时间：2013-03-04T07:51:41.650
> 
> 标签：ruby-on-rails, pdf, pdf-generation, prawn, prawnto

我在我的 rails 3 应用程序中安装了对虾 gem。

我想知道为什么我的页脚在每一页中都不起作用。

它仅在最后一页的末尾起作用。

这是我的代码：

（我对虾很陌生）

所以请多多包涵。

任何解决方法将不胜感激

```
require 'prawn'
require 'rubygems'
require 'date'

pdf = Prawn::Document.new(:page_layout => :landscape,:skip_page_creation => true,:margin => [5,5,5,5]) do
    start_new_page
    pdf.font "Helvetica"    
end

pdf.text "Project Procurement Management Plan (PPMP)", :size=> 12, :spacing => 4, :align=> :center

pdf.move_down 400

pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"
pdf.text "Text"

# This is the footer code

pdf.bounding_box([pdf.bounds.right - 59, pdf.bounds.bottom - -20], :width => 60, :height => 20) do

  pagecount = pdf.page_count
  pdf.text "Page #{pagecount}"
end 
```

**解决了！**

看看我在下面发现了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:24:27.397

嗨，我已经找到了答案。

对于那些遇到这样麻烦的人：

```
pdf.repeat :all do

  pdf.bounding_box [pdf.bounds.left, pdf.bounds.bottom + 25], :width  => pdf.bounds.width do
  pdf.stroke_horizontal_rule
  pdf.move_down(5)
  pdf.text "#{current_user.first_name}", :size => 10
end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-28T05:54:06.257

我试图在每个页面的底部边缘之外生成**左/中/右 - 内容。**
`number_pages`只生成一个块。
几种做法：

一个。使用`repeat`和`text_box`。这里重要的是，`text_box`需要在边界之外显示一个显式高度：

```
repeat :all do
  text_box "title: some text", at: [bounds.left, -20], height: 20
  text_box "printet at #{Time.now}", height: 20, width: 200, align: :right, at: [bounds.right-200,-20]
end 
```

湾。您可以在 PDF 生成结束时调用`number_pages`多次。您不必提供页码模板。`number_pages`可以在边界之外生成文本（它在内部设置高度）：

```
number_pages "title: some text", at: [bounds.left, -20]
number_pages "page <page> of <total>", at: [300,-20]
number_pages "printed at #{Time.now}", at: [bounds.right-200,-20], width: 200, align: :right 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:28:09.407

如果您不需要显示水平线分隔符，那么这是最小的解决方案，因为`pdf.number_pages`即使没有`pdf.repeat(:all)`：

```
options = {
        :at => [pdf.bounds.right - 150, 0],
        :width => 150,
        :align => :right,
        :start_count_at => 1
}
pdf.number_pages "Page <page> of <total>", options 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-30T07:35:51.787

尝试这个

```
pdf.page_count.times do |i|
  pdf.go_to_page(i+1)
  pdf.bounding_box([0, pdf.bounds.bottom + 25], :width => pdf.bounds.width) {
    pdf.line_width(3)
    pdf.stroke_horizontal_rule
    pdf.move_down(5)
    pdf.draw_text "Page #{i+1}" ,:at => [240, pdf.bounds.height - 20]
    pdf.draw_text "#{Time.now.strftime("%B %d, %Y")}" ,:at => [455, pdf.bounds.height - 20]
  }
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T08:27:58.183

尝试这个：

```
pdf.repeat(:all) do
  pdf.stroke do
    pdf.horizontal_line 0, 540, :at => 10
  end

  pdf.number_pages "(<page>/<total>)", :size => 9, :at => [500, 0]
end 
```

所以我的理解是，我需要使用它`number_pages`来创建它，基本上我所做的并不干净和正确，因为对于创建页眉和页脚，我使用了所有`number_pages`但我使用它，因为使用它我们可以自由分配它的位置，并且这很简单。

# c# - 通过 RSS 进行的 Facebook 通知轮询在第二次运行时失败，有人知道为什么吗？

> ID：15196883
> 
> 赞同：0
> 
> 时间：2013-03-04T07:51:51.930
> 
> 标签：c#, xml, facebook, rss, polling

所以我有一段代码可以在第一次通话时工作，并且可以通过 RSS 告诉我我最近在 Facebook 上的通知。但是，当我第二次去轮询它时，它在创建 rssReader 对象之前就冻结了。

```
private string getLatest()
    {
        var req = (HttpWebRequest)WebRequest.Create(rssFeedURL);
        req.Method = "GET";
        req.UserAgent = "Fiddler";

        var rep = req.GetResponse();
        var rssReader = XmlTextReader.Create(rep.GetResponseStream());

        if(rssReader.ReadToFollowing("item"))
        {                
            rssReader.ReadToFollowing("title");
            return rssReader.ReadElementContentAsString();   
        }
        return latest;
    } 
```

谁能告诉我这是为什么？（此代码几乎与其他有效的代码相同）

在这个函数中调用它：

```
public string alertFeed()
{
    string re = getLatest();
    if (re.Equals(latest))
            return null;
            latest = re;
            return "Facebook Notification, " + re;
    }
} 
```

**编辑：**

这是固定代码，任何有兴趣的人：

```
 private string getLatest()
    {

        var req = (HttpWebRequest)WebRequest.Create(rssFeedURL);
        req.KeepAlive = false;
        req.Method = "GET";
        req.UserAgent = "Fiddler";
  --->  using (WebResponse rep = req.GetResponse())
        {
            var rssReader = XmlTextReader.Create(rep.GetResponseStream());

            if (rssReader.ReadToFollowing("item"))
            {
                rssReader.ReadToFollowing("title");
                return rssReader.ReadElementContentAsString();
            }
  --->  }
        return latest;
    } 
```

指出的部分是我必须添加的，正如 Gratz 所指出的，我也可以使用 rep.Close();。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:44:17.847

可能是因为您没有关闭 WebResponse "rep"

```
rep.Close(); 
```

# ajax - Sencha Touch Parse json 响应并使父项为 header

> ID：15196884
> 
> 赞同：0
> 
> 时间：2013-03-04T07:51:52.773
> 
> 标签：ajax, json, list, sencha-touch

我是 sencha touch 和我们应用程序的新手。我有一个场景，比如我得到了 json 响应，如下面的示例 json 响应所示。现在我想将菜单项显示为列表的标题，将子菜单项显示为列表内容。

这是我的json回复：

```
{
   "menuname": "menu",
   "menugroup": 0,
   "submenuitems":
   [
       {
           "menuname": "Time",
           "menugroup": 0,
           "submenuitems":
           [
               {
                   "menuname": "Time1",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               },
               {
                   "menuname": "Time2",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               },
               {
                   "menuname": "Time3",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               }
           ]
       },
       {
           "menuname": "Date",
           "menugroup": 0,
           "submenuitems":
           [
               {
                   "menuname": "Date1",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               }
           ]
       },
       {
           "menuname": "Month",
           "menugroup": 0,
           "submenuitems":
           [
               {
                   "menuname": "Month1",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               },
               {
                   "menuname": "Month2",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               },

               {
                   "menuname": "Month3",
                   "menugroup": 1,
                   "submenuitems":
                   [
                   ]
               }
           ]
       },
       {
           "menuname": "Year",
           "menugroup": 0,
           "submenuitems":
           [
           ]
       }
   ]
} 
```

列表应该是这样的：

*   时间标头
    *   时间1
    *   时间2
    *   时间3
*   日期 - 标题
    *   日期1
*   月头
    *   第 1 个月
    *   第 2 个月
    *   第 3 个月
*   年份 - 标题

拜托，谁能帮我学习如何在煎茶触摸中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:55:11.930

如果您想将此显示为交互式列表，您应该查看[嵌套列表](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList)

如果您只想将其显示为无序列表，您可以`record.raw`在加载此数据后访问并遍历它以生成您想要的任何 html。在循环之后，您可以`panel.setHtml(yourHtml)`在任何您想要的面板中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:04:25.077

只有当您控制了 json 应用程序正在接收时，才有一种简单的方法可以做到这一点。如果您可以将 json 更改为以下形式，那么无需太多努力即可将其放入所需的显示中会容易得多。

json 可以是 -

```
 menuItems : [
            {
                 menuname: "Time",
                 subitem: "some time 1"
            },
            {
                 menuname: "Time",
                 subitem: "some time 2"
            },
            {
                 menuname: "Date", 
                 subitem: "some date 1"
            },
            {
                 menuname: "Date", 
                 subitem: "some date 2"
            }
        ] 
```

使用上面的 json，您可以使用以下内容创建模型 -

```
 var model = Ext.define('SomeModel',{
        extend: 'Ext.data.Model',
        fields: ['menuname','subitem']
    }); 
```

接下来，您可以定义一个将读取 json 的存储。您需要`grouper`向该商店申请将`menuitems`匹配某些值的组合在一起。

```
 var store = Ext.create("Ext.data.Store", {
        model: model,
        data : [
            {menuname: "Time", subitem: "some time 1"},
            {menuname: "Time", subitem: "some time 2"},
            {menuname: "Date", subitem: "some date 1"},
            {menuname: "Date", subitem: "some date 2"}
        ],
        groupField:'menuname',
        grouper: {
            groupFn: function(record) {
                return  record.get('menuname');
            }
        }
    }); 
```

这将让您自动生成标记，以将列表标题显示为父菜单项。所有子项都将作为列表项。在此之后，您只需将商店应用到列表。

```
 var list = Ext.create("Ext.List", {
        styleHtmlContent:true,
        fullscreen: true,
        store: store,
        grouped: true,
        itemTpl: "{subitem}"
    }); 
```

您也可以考虑使用[NestedList](http://docs.sencha.com/touch/2-1/#!/guide/nested_list)。这将为您提供菜单项的独特分类功能。但是，如果您没有更改 json 的权利，则需要一些疯狂的逻辑。您想要实现的目标非常简单，但是使用您提供的 json 很难做到这一点。如果可能，请考虑更改 json。

PS。您提到的 json`groupno`对于所有项目都是相同的。这个对吗 ？

# .net - 如何彻底清理我的 VS 2012 解决方案？

> ID：15196887
> 
> 赞同：3
> 
> 时间：2013-03-04T07:52:00.550
> 
> 标签：.net, visual-studio, svn

有什么方法可以完全清理 VS 解决方案吗？完全是指不只是删除由 Active 配置构建的项目的当前输出。我的意思是清除*所有*构建配置的所有输出和中间文件。

即使在更改构建输出路径之后，我也想从以前的输出路径中删除输出。

示例场景：我检查了一个源代码树并进行了发布构建，然后进行了调试构建。现在我有\bin\Debug 目录和bin\Release 目录，以及\obj 目录。然后我想清理这两种配置的输出。

也许 Subversion 是一个更好的工具，例如删除不受源代码控制的所有内容？否则，我认为递归清除 obj、bin 和 TestResults 目录的批处理文件可以做到这一点，并且我可以将 VS 菜单项绑定到此工具。

我正在使用 SVN 1.7 和 VS 2012。

是否有人已经使用 VS、SVN、PowerShell 或 Windows 批处理文件创建了这样的工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:32:36.830

每当我向 SVN 添加全新的解决方案时，我都会确保在提交之前将每个项目的`bin\`和文件夹标记为已忽略。`obj\`我对`.suo file`（个人喜好）做同样的事情。这样，当我需要清理任何中间和构建输出时，我只需`TortoiseSVN -> SVN Clean up ...`检查`Delete ignored files and folders`：

![TortoiseSVN 1.7 的清理对话框](../Images/2bcb5ae167ed1a90723239007a961f5d.png)

[Jeff Atwood 的这篇文章](http://www.codinghorror.com/blog/2007/10/the-f5-key-is-not-a-build-process.html "F5 键不是构建过程")影响了我。相关部分：

> 您需要多长时间才能让新的团队成员高效地完成您的项目？如果答案超过一天，*你就有问题了*。

我希望能够检查一个解决方案并在第一次构建它。我还希望能够轻松地让我的结帐“像新的一样”，这就是我使用`SVN Cleanup`这么多的原因。

需要注意的是，在执行 an 之前，您可能必须关闭 Visual Studio，`SVN Cleanup`这样您的`bin\`和`obj\`文件夹中的所有文件都不会被它锁定。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:10:19.717

我们可以假设您的解决方案文件位于名为“MySolutionFolder”的文件夹中，并且它在 Subversion (SVN) 下进行了代码版本控制，并且您在本地计算机上安装了 TortoiseSVN 客户端来管理代码版本控制。

然后，右键单击您检查代码文件夹“MySolutionFolder”的文件夹。然后去选择`TortoiseSVN --> Properties`。在打开的新窗口中，单击“新建”按钮，在弹出列表中选择“高级”选项。并在出现的新窗口中输入以下内容并保存。

![SVN 忽略窗口](../Images/65542d1c70f1089c185158c0646ed56d.png)

之后，再次右击“MySolutionFolder”并选择该选项，`TortoiseSVN --> Revert`然后在打开的新窗口中单击“删除未受版本控制的项目”。单击该按钮后，它将列出整个解决方案的所有未版本控制文件，包括“bin”和“obj”文件夹，因为它也包含在`svn:ignore`列表和其他未版本控制文件中。选择要从中删除的项目，然后按“确定”。您的代码输出将被清除。

这个 svn:ignore 属性你甚至可以和你的代码一起提交，这样其他用户也可以从中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T13:00:10.680

如果您需要一些细粒度的方法来仅清理选定的解决方案或配置，您可以使用如下脚本：

```
$devenvPath = "`"C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\devenv`""
$configuration = (
    "Release",
    "Debug"
)
$platform = (
    "x86",
    "x64"
)
$sln = (
    "Sln1Path.sln",
    "Sln2Path.sln"
)
foreach ($c in $configuration)
{
    foreach($p in $platform)
    {
        foreach($s in $sln)
        {
            $pc = $c + "|" + $p
            $arg = "`"$s`" /clean `"$pc`""
            $cmd = "Start-Process -FilePath $devenvPath -ArgumentList `'$arg`' -Wait -NoNewWindow"
            echo $cmd
            $proc = invoke-expression $cmd
            echo "`n`n`n`n`n"
        }
    }
} 
```

# ajax - Ajax 在新标签页中打开

> ID：15196888
> 
> 赞同：-1
> 
> 时间：2013-03-04T07:52:02.350
> 
> 标签：ajax, codeigniter, codeigniter-2, codeigniter-url

我有 ajax 网站，当我单击链接以在新选项卡中打开时，它会将我带回家，是否有任何用于在新选项卡中打开的 ajax 库或助手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-26T11:37:11.427

您可以在标签中添加 target="_blank"。它将指向新标签中的所需页面

# c# - 如何在 WPF 中使用派生面板对列表进行数据绑定？

> ID：15196889
> 
> 赞同：0
> 
> 时间：2013-03-04T07:52:06.543
> 
> 标签：c#, wpf

我有一个以列表为成员的派生面板。如何从 xaml 绑定到列表？

```
class mypanel : Panel
{
    IList<int> mylist;
    ...
} 
```

编辑：

```
public static DependencyProperty myListProperty;
myListProperty= DependencyProperty.RegisterAttached("ListSource", typeof(IList<int>), typeof(mypanel));

            var b = new Binding("ListSource") { Source = myList, Mode = BindingMode.TwoWay };
            SetBinding(LayerSourceProperty, b); 
```

解决方案：以下事情有效..

```
public static DependencyProperty myListProperty=
            DependencyProperty.Register("ListSource", typeof(IList<int>), typeof(mypanel), new FrameworkPropertyMetadata(mylistchanged));

private static void LayerSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var obj = (mypanel) d;
    .......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:18:04.447

`mylist`您通常不会在派生 Panel中声明属性，而是将派生 Panel 放入 an[`ItemsPanelTemplate`](http://msdn.microsoft.com/en-us/library/aa347175.aspx)中[`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)：

```
<ItemsControl ItemsSource="{Binding DataItems}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <local:MyPanel/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:59:10.583

正如 Nicolas 所说，只有依赖属性允许完整的数据绑定功能。

# git - 无需推送即可从重置提交中恢复

> ID：15196890
> 
> 赞同：1
> 
> 时间：2013-03-04T07:52:09.423
> 
> 标签：git, commit, reset, recover

我昨天有两次提交，因为我没有互联网连接而无法推送。在那之后，我写了一些代码，发现它很乱，想把它恢复为 HEAD 提交。我做到`git reset --hard HEAD`了，我的一些文件（我很确定我提交了）丢失了。现在我正在查看一个一周前的版本，我的 git status 说`Your branch is ahead of 'origin/master' by 2 commits`. 一些“丢失”的文件在我的 git status 中列为已修改，即使它们是我系统上的空文件（只是包含头文件）。

我的代码可以恢复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:00:20.380

如果您真的提交了，您可以使用`git reflog`. 它列出了在您的克隆上完成的所有操作，独立于分支和标签。

但是，如果您`git reset --hard HEAD`在回购中进行了本地更改（分阶段或不分阶段），它们就会丢失 - 这似乎是您的情况。运行`git log`时，您是否仍然在日志中看到您昨天所做的 2 次提交？这由消息*Your branch is ahead of 'origin/master' by 2 commits*表示。

# sql-server - 选择声明以获得较晚的日期

> ID：15196891
> 
> 赞同：1
> 
> 时间：2013-03-04T07:52:09.673
> 
> 标签：sql-server, select

![在此处输入图像描述](../Images/2c7ba9a593717ae0e3273505b4203609.png)

所以这是我的主表，其中 Eff_to 上有几个日期

获取较晚日期的选择语句是什么。通过较晚的方式，如果用户插入另一个日期较晚的日期，则将显示较晚日期的笔记本电脑ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:56:25.647

我认为您对“较晚日期”的意思是最高日期。试试这个：

```
SELECT LaptopID, Eff_to
FROM tbl
WHERE Eff_to = (SELECT MAX(Eff_to) FROM tbl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:56:13.227

如果存储在表中的日期是 SQL 日期，则可以使用[Max()](http://www.w3schools.com/sql/sql_func_max.asp)函数。这将返回表中的最新日期。

# android - 发送照片但过滤一些应用

> ID：15196892
> 
> 赞同：0
> 
> 时间：2013-03-04T07:52:13.073
> 
> 标签：android, android-intent, intentfilter

我使用下面的代码将照片发送到其他应用程序。

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
sharingIntent.setType("image/jpeg");
sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(FilePath));
startActivity(Intent.createChooser(sharingIntent, "Share via")); 
```

但我想过滤一些应用程序。例如，我不想分享到 Facebook。我知道它的包名是`com.facebook.katana`. 如何在显示我可以分享照片的所有应用程序时进行过滤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:02:40.257

与此非常相似，您可以创建 Intent 并改用 queryIntentActivities()。它将为您提供一个应用程序列表，您必须从中手动过滤掉一些您不想要的应用程序。

不过，您可能必须在此之后创建自己的对话框。

# sencha-touch-2 - 使用需要复杂类型作为参数的ajax调用加载存储数据？

> ID：15196893
> 
> 赞同：1
> 
> 时间：2013-03-04T07:52:17.673
> 
> 标签：sencha-touch-2

我知道 .net 和 javascript，但我是 sencha 的菜鸟。我正在使用客户端上的 sencha touch 2.0 和服务器上的 asp.net web api 开发应用程序。我需要向用户显示项目（账单）列表。

目前，服务器端 api 的形式为：

```
GetList(int userId, string[] locationsIds, ...) { ... } 
```

在客户端，商店有“autoLoad：false”。我在商店的代理上调用 setExtraParams 如下：

```
billStore.getProxy().setExtraParams({
    userId: getUserId(),                        //someFunction
    locationIds: getUserSelectedLocations(),    //someOtherFunction
}); 
```

但这会将参数添加到查询字符串中（ps：我还没有让它工作）。我认为在请求正文中包含这个更有意义（类似于使用 http post 提交表单）。

我有以下问题：

1.  我如何做到这一点？
2.  当我在服务器端 api 中有复杂类型时会发生什么？（注意：这将很快需要，因为 asp.net web api 仅支持单一复杂类型，所以无论如何我都必须重构“类参数”）？
3.  这是推荐的方法吗？

完整代码如下：

店铺：

```
Ext.define('noobapp.store.Bills',{
extend: 'Ext.data.Store',
config: {
    storeId: 'billStore',
    model: 'noobapp.model.Bill',
    sorter: 'BillFrom',     
    proxy: {
        type: 'ajax',
        url : 'http://localhost/noobapis/api/bill/outstanding',
        reader: 'json'
    }
}
}); 
```

控制器：

```
_fetchOutstandingBills : function(data){
    console.log(data);

    var me = faomobile.app.getController('noobapis.controller.Main');
    var billStore = Ext.getStore('billStore');
    if(!billStore) billStore = Ext.create('noobapis.store.Bills');

    billStore.getProxy().setExtraParams({
        userId: getUserId(), 
        locationIds: getUserSelectedLocations(),
    });

    billStore.load();
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:48:27.510

你必须给

```
method: 'POST' 
```

在代理配置中，因为默认情况下它使用 GET 并因此在 URL 中发送所有内容。

您还可以像以下示例一样在 POST 请求中发送复杂的 JSON 对象：

```
 var obj = new Object();
    obj.loginEntry  = new Object();
    obj.loginEntry.userid = username;
    obj.loginEntry.password = password;
    var data = Ext.JSON.encode(obj);
    Ext.Ajax.request({
        url : 'http://myservice/endpoint',
        method : "POST",
        headers: {
            'Content-Type': 'application/json'
        },
        params : data,
        useDefaultXhrHeader : false,
        withCredentials: true,
        success : function(response) {
            console.log(response.responseText);
        }
    }); 
```

在所有这些 gyan 之后，我仍然建议不要`POST`用于读取，因为按照惯例它应该写入而不是读取。根据 REST 约定，您的只读服务应该是 GET 并且它应该遵循如下结构：

```
http://localhost/noobapis/api/bill/{userid}/outstanding/{locations_csv}/.... 
```

或者

```
http://localhost/noobapis/api/bill/outstanding?userid={userid}&location={locations_separed_by_delimeter} 
```

# json - 这是一个 JSON 字符串吗？

> ID：15196899
> 
> 赞同：1
> 
> 时间：2013-03-04T07:52:51.657
> 
> 标签：json

我想知道这里的代码。我不知道它是 JSON 还是其他语言。

```
anyType {
      centerCode=001; 
      centerName=General Organization; 
      enableMap=0;
      resultCode=0;
      resultMessage=ok ;
      validateToken=04184ee4f02862f3227e5b5563ce5e93;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:17:49.213

不，它不是 JSON。

不过，它看起来类似于 Candle Object Notation。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Candle_(programming_language)](http://en.wikipedia.org/wiki/Candle_(programming_language))。

# perl - 使用“File::Copy”重新排序输出

> ID：15196903
> 
> 赞同：2
> 
> 时间：2013-03-04T07:53:18.730
> 
> 标签：perl

考虑以下代码，其中`test2.txt`包含文本`Text2`（和尾随换行符）。

```
use File::Copy;

open (my $fh, "|-", "cat");
print $fh "Test1\n";

copy("test2.txt", $fh);

close $fh; 
```

我希望这可以打印：

```
Test1
Test2 
```

但是，正在打印以下内容：

```
Test2
Test1 
```

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:16:28.147

您正在混合缓冲和非缓冲 IO，这绝不是一个好主意。（File::Copy 在两者之间使用 sysread/syswrite 和它自己的缓冲区。）

你最好这样做：

```
use File::Slurp 'read_file';

print $fh read_file('test2.txt'); 
```

尽管我确实想知道您为什么要对 cat 进行管道传输，以及您是否真的希望对其进行缓冲。

# jsf-2 - JSF2 在标签（richfaces）内渲染 xhtml 页面不起作用

> ID：15196904
> 
> 赞同：0
> 
> 时间：2013-03-04T07:53:19.623
> 
> 标签：jsf-2, richfaces

我们正在开发 JSF 2。我们希望在内部显示一个 xhtml 表单。使用 ，它显示 XHTML 文件的内容。但是命令按钮上的操作不起作用。

我们创建了 tabs.xhtml 页面，该页面首先通过 index.xhtml 页面进行定向。代码如下：

```
<h:form>
    <rich:tabPanel>
       <rich:tab name="Second">
           <ui:include  src="/Second.xhtml" />
       </rich:tab>
       <rich:tab name="Third">
        Here is tab #3
       </rich:tab>
     </rich:tabPanel>
</h:form> 
```

在 Second.xhtml 中，我们有 ADD NEW、EDIT、DELETE 按钮，它们的操作在包含在选项卡中后不起作用。

请帮忙。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:43:09.333

您的*Second.xhtml*是否包含`<h:form>`？

因为如果您有*嵌套表单*（表单内的表单），那就是*baaaad* ...**重新组织**您的页面，这样您就不会拥有嵌套表单

例如从*Second.xhtml中删除表单*

[这里有更多关于嵌套表单的信息](https://stackoverflow.com/a/7372315/617373)

# ios - 使用 UIImageJPEGRepresentation 加载和保存大图像会使我的应用程序崩溃

> ID：15196908
> 
> 赞同：1
> 
> 时间：2013-03-04T07:53:34.210
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, uiimagepickercontroller

我的应用程序可以拍照或从相机胶卷中选择它们，使用`UIImagePicker`我将图片发送到`ViewController`用户可以裁剪图像的位置。

最终结果是`UITableView`带有名称和缩略图，每一行都指向全尺寸图片。缩略图是不同比例的原始图片。

这是我在裁剪后保存图片的方式：

```
[UIImageJPEGRepresentation(_justNowImage.image, 0.1) writeToFile:jpgPath atomically:NO]; 
```

这就是我将其打开为缩略图或全尺寸的方式。

```
_imageInPocket.image = [UIImage imageWithContentsOfFile:jpgPath]; 
```

如果我裁剪小图片一切正常，但我尝试裁剪大图片（超过 2 MB）应用程序会崩溃，可能是由于内存不足。

我的项目正在使用 ARC。我还需要以某种方式从内存中释放图像吗？我应该创建图像的小版本并将它们用作缩略图而不是加载所有原始图片`UITableView`并更改它们的比例以适应`Cell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:08:46.260

也许您应该加载数据并将其转换为图像使用

```
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
NSURL *url = [NSURL URLWithString:@"Your URL"];
NSURLRequest *theRequest = [NSURLRequest
    requestWithURL: url
    cachePolicy: NSURLRequestUseProtocolCachePolicy
    timeoutInterval: 60.0
]; 
```

当您使用此方法时，您将获得数据包中的图像。在此之后，您应该调用并收集所有数据包

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
 [imageData appendData:data];
} 
```

在此之后，您需要将数据转换为图像并关闭连接

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
  UIImage *image = [UIImage imageWithData:imageData];
  imageView.image = image;
  [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
} 
```

# ruby-on-rails-3 - 在 Ruby on rails 中将音频文件转换为字节数组

> ID：15196915
> 
> 赞同：0
> 
> 时间：2013-03-04T07:54:24.327
> 
> 标签：ruby-on-rails-3, audio, paperclip, bytearray, audio-streaming

我一直在为我们的 Ruby on rails 应用程序使用 Grape 来处理 Restful api 请求。我需要为我的博客制作音频附件。

向我的 API 请求发送附件的最佳方式是什么。

如何将音频附件转换为字节数组。

# asp.net - 如何将自定义声明添加到 ACS 服务标识

> ID：15196917
> 
> 赞同：1
> 
> 时间：2013-03-04T07:54:30.013
> 
> 标签：asp.net, azure

我正在为我的应用程序使用 Window Azure 平台，我试图从他们在 google/yahoo 中的帐户中获取用户的信息。

但是我通过 Azure 的输入/输出声明获得的信息只是他们的姓名、电子邮件地址和身份提供者......当他们在 google/yahoo 中注册时，有人可以帮我获取他们的国家或手机号码吗

这是我获取声明的示例代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        {
            ClaimsPrincipal icp = Thread.CurrentPrincipal as ClaimsPrincipal;
            ClaimsIdentity claimsidentity = icp.Identity as ClaimsIdentity;
            string  email = "", name = "", idprovider = "" ;
            foreach (Claim c in claimsidentity.Claims)
            {

                if (c.ClaimType == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress")
                {
                    email = c.Value;
                }
                if (c.ClaimType == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name")
                {
                    name = c.Value;
                }
                if (c.ClaimType == "http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider")
                {
                    idprovider = c.Value;
                }

            }

            Label1.Text = (name + email + idprovider); 
```

当我编辑我的规则时，ClaimsPrincipal 没有将国家/移动号码值计入其帐户....PLZ HELP !!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:58:43.697

据我所知 - 不是直接的，应该是这样的！

当用户同意向您的应用程序提供他或她的身份时，他们不一定，当然也不会明确同意与您共享个人资料信息，因此身份提供者真的不应该这样做。

以我的拙见，一些提供商已经提供了太多东西——我没想到他们会像微软那样共享 GUID 以外的任何东西。例如，谷歌共享姓名和电子邮件地址，我不一定希望允许这样做。很多时候，我宁愿将我的 gmail 电子邮件地址保密，并为我正在登录的应用程序提供一个不同的电子邮件地址，或者根本不提供。

简而言之 - 观点是，如果您想要有关用户的任何信息 - 您应该向他们索取，而不是从其他地方获取。

更多关于这个观点，如果有兴趣，在这里 - [http://yossidahan.wordpress.com/2012/02/19/end-to-end-authentication-and-authorisation-scenario-for-mvcacs/](http://yossidahan.wordpress.com/2012/02/19/end-to-end-authentication-and-authorisation-scenario-for-mvcacs/)

# iphone - 用新数据重新加载uitableview导致闪烁

> ID：15196927
> 
> 赞同：24
> 
> 时间：2013-03-04T07:55:04.690
> 
> 标签：iphone, ios, ios5, uitableview

我添加了一个无限滚动功能，并意识到每当我重新加载 uitableview 时，视图都会闪烁......我现在不知道如何修复闪烁。请帮忙，谢谢！

我确实看到了一个非常相似的问题，但没有解决方案。我尝试了作者发布的那个，但它不起作用：“从父视图中删除表格视图，重新加载数据，将表格视图放回父视图”（[UITableView reloadData - 如何停止闪烁](https://stackoverflow.com/questions/11631104/uitableview-reloaddata-how-to-stop-flicker)）

代码：

```
[self.tableView reloadData]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-06-07T12:55:42.403

下面的代码对我来说就像一个魅力！

**Objective-C**

```
[UIView performWithoutAnimation:^{
   [self.tableview reloadData];
   [self.tableview beginUpdates];
   [self.tableview endUpdates];
}]; 
```

**斯威夫特 4**

```
UIView.performWithoutAnimation {
    self.tableView.reloadData()
    self.tableView.beginUpdates()
    self.tableView.endUpdates()
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-07T12:27:35.150

如您所料，闪烁是由调用 [self.tableView reloadData]; 引起的。快速且重复，尤其是在 iOS 5.x 设备上。但是您可能不想重新加载整个表格，您只想更新表格可见单元格中的视图。

假设您要更新表格的每个单元格以反映文件正在下载时的最新下载百分比。在我的示例中调用了一个方法 [downloading:totalRead:totalExpected:]，当字节下载时速度非常快。

这是**不**应该做的......在每次小的更新时重新加载表（在这个例子中，开发人员可能依赖“cellForRowAtIndexPath”或“willDisplayCell”方法执行所有可见单元格的更新）：

```
 - (void)downloading:(PPFile *)file totalRead:(long long)read totalExpected:(long long)expected {
        // Bad! Causes flickering when rapidly executed:
        [self.tableView reloadData];
    } 
```

以下是更好的解决方案。当需要更新单元格的视图时，通过仅从表格中抓取可见单元格来找到该单元格，然后直接更新该单元格的视图而不重新加载表格：

```
 - (void)downloading:(PPFile *)file totalRead:(long long)read totalExpected:(long long)expected {
        NSArray *cells = [self.tableView visibleCells];

        for(MYCellView *cell in cells) {
            if(cell.fileReference == file) {
                // Update your cell's view here.
            }
        }
    } 
```

**编辑：**文档[建议](https://developer.apple.com/documentation/uikit/uitableview/1614954-reloadsections)相同：

> 调用此方法会使表视图向其数据源询问指定部分的新单元格。表格视图动画插入新单元格，因为它动画旧单元格。如果您想提醒用户指定部分的值正在更改，请调用此方法。**但是，如果您只想更改指定部分的单元格中的值而不提醒用户，您可以获取这些单元格并直接设置它们的新值。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T08:04:29.750

```
 [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:index] withRowAnimation:UITableViewRowAnimationNone]; 
```

每当您在更新中删除或添加表格行时......表格视图会重新加载并根据动画定位的单元格向数据源询问行数。

您正在从表中删除行，但不是从数据源中删除。所以行被删除，但您的数据源仍然指出没有删除任何行。20 个对象仍然存在。您的数据源将类似于

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return MyDataModel.count; // 
} 
```

所以你还需要在数据源中删除或添加新数据......像这样的东西

```
 NSIndexPath *index = [NSIndexPath indexPathForRow:i inSection:0];
   [MyDataModel removeObjectAtIndex:index.row];
   [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:index] withRowAnimation:UITableViewRowAnimationNone]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-06T15:27:35.120

为什么不简单地调用 reloadSections 方法而不是 [self.tableView reloadData];

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationNone]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-16T11:49:24.413

以防万一所有其他答案都不能解决您的问题，我会发布我的解决方案。

如果您使用**估计高度** `estimatedSectionHeaderHeight`或`estimatedRowHeight`或`-(CGFloat)tableView:(UITableView *)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath *)indexPath`，并且每个部分具有**动态行数**（例如可扩展的两级 tableView）

您应该停止使用它并实施`-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`以返回正确的高度。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-24T05:52:54.760

试试这个：

```
UIView.performWithoutAnimation {
    self.tableView.reloadRows(at: [indexPath], with: .none)
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-19T10:31:45.193

请参考您的`cellForRowAtIndexPath`委托方法。您可能正在执行一些可能导致轻弹的操作。就我而言，我正在设置带有动画的图像视图的图像。所以每当我重新加载表格时，它都会因为那个动画而闪烁。

我删除它并为我工作..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-20T14:34:46.043

我的项目中的工作是：

```
UIView.PerformWithoutAnimation(() =>
{
tableView.ReloadData();
tableView.LayoutIfNeeded();
}); 
```

（它在 c# xamarin 中......但与目标 c 的 swift 相同）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-04T08:07:14.903

你正在使用 deleteRowsAtIndex 吗？如果重新加载表，所有表委托方法都会被调用。我认为删除所有行然后重新加载需要时间。只需使用重新加载方法并尝试。

# c++ - 如何清除所有已在链中排队的已发布任务？

> ID：15196929
> 
> 赞同：5
> 
> 时间：2013-03-04T07:55:13.630
> 
> 标签：c++, boost, boost-asio

如何清除所有已在 a 中排队的已发布任务`io_service::strand`？我从 boost 文档中看不到类似的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:54:15.877

我还没有找到对它的需求，因为它可以通过正确设计异步调用链来正确解决。通常，Boost.Asio API 是经过精心设计的，它可以防止复杂的应用程序在异步流程中变得复杂。

如果您已经检查了调用链，并且绝对确定重新设计它们的努力比引入清除链的复杂性在当前和未来的风险更大，那么有一种方法可以实现它。`strand`但是，它确实具有删除 中所有未调用的处理程序及其相关联的主要副作用`io_service`。

当 a`strand`被销毁时，它的[析构函数](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__strand/_strand.html)调度未调用的处理程序以延迟调用以`io_service`保持非并发性的保证。`io_service` [析构函数](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/_io_service.html)声明计划用于延迟调用的未调用处理程序对象被销毁。因此，通过控制 and 的生命周期`strand`，`io_service`可以清除链中的处理程序。

这是一个带有辅助类的过度简化的示例`clearable_strand`。

```
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/optional.hpp>
#include <boost/utility/in_place_factory.hpp>

class clearable_strand
{
public:
  clearable_strand(boost::asio::io_service& main_io_service)
    : main_io_service_(main_io_service)
  {
    clear();
  }

public:
  template <typename Handler>
  void post(const Handler& handler)
  {
    // Post handler into the local strand.
    local_strand_->post(handler);

    // Local service now has work, so post its run handler to the
    // main service.
    main_io_service_.post(boost::bind(
      &boost::asio::io_service::run_one, boost::ref(local_io_service_)));
  }

  void clear()
  {
    // Destroy previous (if any).
    local_strand_     = boost::none;
    local_io_service_ = boost::none;
    // Reconstruct.
    local_io_service_ = boost::in_place();
    local_strand_     = boost::in_place(boost::ref(local_io_service_.get()));
  }

private:
  boost::asio::io_service&                 main_io_service_;
  boost::optional<boost::asio::io_service> local_io_service_;
  boost::optional<boost::asio::strand>     local_strand_;
}; 
```

为了尽量减少影响，以便只`strand`销毁 的处理程序，该类使用内部`io_service`而不是附加`strand`到 main `io_service`。当工作被发布到 时`strand`，处理程序随后被发布到`io_service`将菊花链和服务于本地的主`io_service`。

及其用法：

```
void print(unsigned int x)
{
  std::cout << x << std::endl;
}

int main()
{
  boost::asio::io_service io_service;
  io_service.post(boost::bind(&print, 1));

  clearable_strand strand(io_service);
  strand.post(boost::bind(&print, 2));
  strand.post(boost::bind(&print, 3));
  strand.clear(); // Handler 2 and 3 deleted.

  strand.post(boost::bind(&print, 4));
  io_service.run();
} 
```

运行程序会输出`1`和`4`。我想强调的是，这是一个过于简化的示例，并且以不复杂的方式提供线程安全以匹配其`boost::asio::strand`可能是一个挑战。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T21:51:39.743

这是不可能的，您需要根据您的目标重新构建您的设计。如果您希望某些高优先级处理程序在低优先级处理程序之前运行，一种可能性是利用[优先处理程序示例。](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/invocation/prioritised_handlers.cpp)

# c++ - 相当于gnu中windows stdint.h中的u_int16_t？

> ID：15196930
> 
> 赞同：2
> 
> 时间：2013-03-04T07:55:17.597
> 
> 标签：c++, windows, mingw, gnu, stdint

到目前为止，我假设这`u_int16_t`是一个名为 stdint.h 的 MSVS 头文件中某处的 Windows 类型。我正在将 GNU g++ 用于编译器（实际上是带有 mingw 的代码块），我想知道`typedef unsigned short uint_least16_t;`（在 mingw 的 stdint.h 内部）是否是等价的，或者我能做些什么来包含这种类型？

这个问题实际上与编译用于 MSVS 的[google sparsehash](http://code.google.com/p/sparsehash/)项目文件有关，但我使用的是代码块。这是它给我的错误（顺便说一句，错误重复了很多次）。

`c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|40|error: 'u_int16_t' does not name a type|`

继承人的完整日志最多 50 个错误。

```
||=== simple_test, Debug Win32 ===|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|40|error: 'u_int16_t' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|563|error: 'u_int16_t' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|582|error: 'u_int16_t' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|637|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|638|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|639|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|640|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|641|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|643|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|665|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|698|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|708|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|717|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|742|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|798|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|799|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|802|error: 'size_type' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|807|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|817|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|823|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|831|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|835|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|847|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|857|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|871|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|895|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|910|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|924|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|939|error: 'size_type' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|1093|error: 'u_int16_t' has not been declared|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|1098|error: 'u_int16_t' does not name a type|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'google::table_iterator<google::sparsegroup<T, GROUP_SIZE, Alloc> > google::sparsegroup<T, GROUP_SIZE, Alloc>::end()':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|597|error: there are no arguments to 'size' that depend on a template parameter, so a declaration of 'size' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|597|note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'google::const_table_iterator<google::sparsegroup<T, GROUP_SIZE, Alloc> > google::sparsegroup<T, GROUP_SIZE, Alloc>::end() const':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|598|error: there are no arguments to 'size' that depend on a template parameter, so a declaration of 'size' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'int google::sparsegroup<T, GROUP_SIZE, Alloc>::bmtest(int) const':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|639|error: there are no arguments to 'charbit' that depend on a template parameter, so a declaration of 'charbit' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|639|error: there are no arguments to 'modbit' that depend on a template parameter, so a declaration of 'modbit' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'void google::sparsegroup<T, GROUP_SIZE, Alloc>::bmset(int)':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|640|error: there are no arguments to 'charbit' that depend on a template parameter, so a declaration of 'charbit' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|640|error: there are no arguments to 'modbit' that depend on a template parameter, so a declaration of 'modbit' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'void google::sparsegroup<T, GROUP_SIZE, Alloc>::bmclear(int)':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|641|error: there are no arguments to 'charbit' that depend on a template parameter, so a declaration of 'charbit' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|641|error: there are no arguments to 'modbit' that depend on a template parameter, so a declaration of 'modbit' must be available|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'void google::sparsegroup<T, GROUP_SIZE, Alloc>::set_aux(int, google::true_type)':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|851|error: 'size_type' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|851|error: expected ';' before 'i'|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|851|error: 'i' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'typename Alloc::rebind<T>::other::reference google::sparsegroup<T, GROUP_SIZE, Alloc>::set(int, typename Alloc::rebind<T>::other::const_reference)':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|872|error: 'size_type' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|872|error: expected ';' before 'offset'|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|875|error: 'offset' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|884|error: 'offset' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|890|error: 'offset' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable||In member function 'void google::sparsegroup<T, GROUP_SIZE, Alloc>::erase_aux(int, google::true_type)':|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|917|error: 'size_type' was not declared in this scope|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|917|error: expected ';' before 'i'|
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\sparsehash\sparsetable|917|error: 'i' was not declared in this scope|
||More errors follow but not being shown.|
||Edit the max errors limit in compiler options...|
||=== Build finished: 50 errors, 0 warnings ===| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:58:58.057

如果您没有任何定义`u_int16_t`. 自己做 ：

```
#include <stdint.h>
#include <stddef.h>

typedef uint16_t u_int16_t;
typedef size_t size_type; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:47:54.140

我不确定如何`u_int16_t`指定；正如您所注意到的，它是非标准的。你应该使用什么取决于你想要什么：

```
uint16_t        //  Exactly 16 bits, only present if the hardware
                //  has such a type.
uint_least16_t  //  The smallest type which has at least 16 bits.
uint_fast16_t   //  The fastest type which has at least 16 bits. 
```

在大多数现代机器上，这三个通常都是相同类型的 typedef `unsigned short`，我经常`uint16_t` 在“可移植”代码中使用，因为它最容易编写，而且我遇到未定义机器的机会是非常非常苗条。（唯一不会定义它的现代机器是 Unisys 大型机和一些嵌入式处理器，具有 32 位字节。）

至于`size_type`，这*大概* `size_t`就是。在 `<stddef.h>`或`<cstddef>`（在哪里`std::size_t`），而不是在`<stdint.h>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:47:57.727

您应该运行该`./configure`脚本。不幸的是，这在 Windows 上可能是一个真正的痛苦，因此该项目`./configure`的目录中包含为 VC++ 生成的标头`src/windows`。这就是为什么`u_int16_t`适用于 VC++ - 它不在任何 VC++ 头文件中，但`config.h`and`sparseconfig.h`文件会处理它。

不幸的是，VC++ 配置不适用于 MinGW。理想情况下，您可以运行`./configure`MinGW，但正如我提到的，这在 Windows 上可能很困难。这是一个`config.h`使我能够编译项目`simple_test.cc`程序的文件。需要对`spareseconfig.h`. 此外，对于项目的更大用途或者如果您使用不同版本的 MinGW（例如，MinGW 4.7+ 可能应该使用`<unordered_map>`而不是`<ext/hash_map>`），可能需要进行不同的调整：

```
#ifndef GOOGLE_SPARSEHASH_WINDOWS_CONFIG_H_
#define GOOGLE_SPARSEHASH_WINDOWS_CONFIG_H_

/* src/config.h.in.  Generated from configure.ac by autoheader.  */

/* Namespace for Google classes */
#define GOOGLE_NAMESPACE  ::google

/* the location of the header defining hash functions */
#define HASH_FUN_H  <ext/hash_map>

/* the location of <unordered_map> or <hash_map> */
#define HASH_MAP_H  <ext/hash_map>

/* the namespace of the hash<> function */
#define HASH_NAMESPACE  __gnu_cxx

/* the location of <unordered_set> or <hash_set> */
#define HASH_SET_H  <hash_set>

/* Define to 1 if you have the <google/malloc_extension.h> header file. */
#undef HAVE_GOOGLE_MALLOC_EXTENSION_H

/* define if the compiler has hash_map */
#define HAVE_HASH_MAP  1

/* define if the compiler has hash_set */
#define HAVE_HASH_SET  1

/* Define to 1 if you have the <inttypes.h> header file. */
#undef HAVE_INTTYPES_H

/* Define to 1 if the system has the type `long long'. */
#define HAVE_LONG_LONG  1

/* Define to 1 if you have the `memcpy' function. */
#define HAVE_MEMCPY  1

/* Define to 1 if you have the `memmove' function. */
#define HAVE_MEMMOVE  1

/* Define to 1 if you have the <memory.h> header file. */
#undef HAVE_MEMORY_H

/* define if the compiler implements namespaces */
#define HAVE_NAMESPACES  1

/* Define if you have POSIX threads libraries and header files. */
#undef HAVE_PTHREAD

/* Define to 1 if you have the <stdint.h> header file. */
#undef HAVE_STDINT_H

/* Define to 1 if you have the <stdlib.h> header file. */
#define HAVE_STDLIB_H  1

/* Define to 1 if you have the <strings.h> header file. */
#undef HAVE_STRINGS_H

/* Define to 1 if you have the <string.h> header file. */
#define HAVE_STRING_H  1

/* Define to 1 if you have the <sys/resource.h> header file. */
#undef HAVE_SYS_RESOURCE_H

/* Define to 1 if you have the <sys/stat.h> header file. */
#define HAVE_SYS_STAT_H  1

/* Define to 1 if you have the <sys/time.h> header file. */
#undef HAVE_SYS_TIME_H

/* Define to 1 if you have the <sys/types.h> header file. */
#define HAVE_SYS_TYPES_H  1

/* Define to 1 if you have the <sys/utsname.h> header file. */
#undef HAVE_SYS_UTSNAME_H

/* Define to 1 if the system has the type `uint16_t'. */
#undef HAVE_UINT16_T

/* Define to 1 if you have the <unistd.h> header file. */
#undef HAVE_UNISTD_H

/* define if the compiler supports unordered_{map,set} */
#undef HAVE_UNORDERED_MAP

/* Define to 1 if the system has the type `u_int16_t'. */
#undef HAVE_U_INT16_T

/* Define to 1 if the system has the type `__uint16'. */
#define HAVE___UINT16  1

/* Name of package */
#undef PACKAGE

/* Define to the address where bug reports for this package should be sent. */
#undef PACKAGE_BUGREPORT

/* Define to the full name of this package. */
#undef PACKAGE_NAME

/* Define to the full name and version of this package. */
#undef PACKAGE_STRING

/* Define to the one symbol short name of this package. */
#undef PACKAGE_TARNAME

/* Define to the home page for this package. */
#undef PACKAGE_URL

/* Define to the version of this package. */
#undef PACKAGE_VERSION

/* Define to necessary symbol if this constant uses a non-standard name on
   your system. */
#undef PTHREAD_CREATE_JOINABLE

/* The system-provided hash function including the namespace. */
#define SPARSEHASH_HASH  HASH_NAMESPACE::hash

/* The system-provided hash function, in namespace HASH_NAMESPACE. */
#define SPARSEHASH_HASH_NO_NAMESPACE  hash

/* Define to 1 if you have the ANSI C header files. */
#define STDC_HEADERS  1

/* Version number of package */
#undef VERSION

/* Stops putting the code inside the Google namespace */
#define _END_GOOGLE_NAMESPACE_  }

/* Puts following code inside the Google namespace */
#define _START_GOOGLE_NAMESPACE_   namespace google {

// ---------------------------------------------------------------------
// Extra stuff not found in config.h.in

#define HAVE_WINDOWS_H  1   // used in time_hash_map

// This makes sure the definitions in config.h and sparseconfig.h match
// up.  If they don't, the compiler will complain about redefinition.
#include <sparsehash/internal/sparseconfig.h>

// TODO(csilvers): include windows/port.h in every relevant source file instead?
//#include "windows/port.h"

#endif  /* GOOGLE_SPARSEHASH_WINDOWS_CONFIG_H_ */ 
```

# android - 无法获取最后联系人的电话号码

> ID：15196931
> 
> 赞同：0
> 
> 时间：2013-03-04T07:55:19.590
> 
> 标签：android, android-contacts, phone-number

我一直在按照[这个](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/)网站的教程来获取 Android 中联系人的电话号码。

我面临的问题是，我似乎无法获得最后一个联系号码。例如，如果我保存了 3 个联系人，它会显示前 2 个联系人的号码。

如果它对任何人有帮助，我也会发布我的代码。

```
if(cur.getCount()>0){
        while(cur.moveToNext()){
            String id=cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name=cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if(Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)))>0){
                pCur=getContentResolver().
                        query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, 
                                ContactsContract.CommonDataKinds.Phone._ID+"=?", 
                                new String[]{id}, null);
                while(pCur.moveToNext()){
                    number.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
                }                   
            }
            pCur.close();
        }
    } 
```

任何帮助，将不胜感激。谢谢！

==============================

**编辑：**对于那些感兴趣的人，下面是对我有用的代码：

```
Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
    while (phones.moveToNext())
    {
      String name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
      String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
      Log.i("Details", "Name: "+name+"  Number: "+phoneNumber);

    }
    phones.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:53:42.883

您好尝试以下代码获取所有联系人

```
 Cursor c=dbHelper.getAllContact();
        startManagingCursor(c);
        ArrayList<String> columnArray1 = new ArrayList<String>(); 
        if (c.moveToFirst())
        {
            do {          
                columnArray1.add(c.getString(0));
            } while (c.moveToNext());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:02:29.163

```
String[] projection = new String[]{ContactsContract.CommonDataKinds.Phone._ID,
                                    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                                    ContactsContract.CommonDataKinds.Phone.NUMBER};
    String selection = ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER;
                        + 
    String[] selectionArgs = new String[] { "1" };                            
    Cursor c =  getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                                        projection, 
                                        selection, 
                                        selectionArgs, null}
if (c.moveToFirst())
{
     do
     {
        Log.d("Test", "Contact: id = " + c.getLong(0) + " name = " + c.getString(1) + " phone = " + c.getString(2));
     }
} 
```

# java - 为什么西里尔文的 Apache POI XWPFRun.setFontFamily() 工作错误？

> ID：15196938
> 
> 赞同：2
> 
> 时间：2013-03-04T07:55:36.770
> 
> 标签：java, apache-poi

我尝试使用- 西里尔文和英文`setFontFamily("Arial")`来 XWPFRun 对象。`setText("Привет Hello")`调用此方法后英文文本将变为 Arial，但俄文文本仍将属于 Colibri 字体系列。如何为西里尔文字创建正确的字体系列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-21T09:22:35.680

评论`setFontFamily()`说：

> 指定用于显示本次运行的文本内容的字体。指定一种字体，用于格式化父运行中 ASCII 范围 (0 - 127) 内的所有字符

对于其他 char 尝试使用`CTFonts.setHAnsi`，例如`myXWPFRun.getCTR().getRPr().getRFonts().setHAnsi("Arial");`

请参阅错误[https://issues.apache.org/bugzilla/show_bug.cgi?id=47148](https://issues.apache.org/bugzilla/show_bug.cgi?id=47148)

# java - 根据 web 上下文使用多个 log4j appender

> ID：15196939
> 
> 赞同：0
> 
> 时间：2013-03-04T07:55:44.803
> 
> 标签：java, logging, jboss, log4j, jboss6.x

我正在使用 JBoss 6 并在此 JBoss 上部署了 2 个项目，它们具有不同的 Web 上下文。他们都在后台使用休眠和相同的核心包，但我想根据 Web 上下文区分日志文件。因为 core 包是两个项目的同一个 java 包。

我也在互联网上搜索了 log4j 手册，但找不到任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:52:34.790

[您可以使用 log4j MDC](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html)和一些编码来实现这一点，即编写自定义附加程序。
否则，您可以将日志框架切换到[logback](http://logback.qos.ch)，它是 log4j 的正确继承者。Logback 定义了一种特定类型的**appender**，即[Sift](http://logback.qos.ch/xref/chapters/appenders/sift/SiftExample.html)，它完全可以实现您想要实现的目标。

# android - 如何在Android中为两侧硬币制作动画

> ID：15196940
> 
> 赞同：0
> 
> 时间：2013-03-04T07:55:46.313
> 
> 标签：android

我要为硬币（两面）制作动画，所以我有两张图像，我想知道如何为这两张图像制作动画以获得硬币翻转效果。

将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:10:03.027

另请参阅[显示卡片翻转动画 Android 培训](http://developer.android.com/training/animation/cardflip.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:57:16.410

也许这将是一个好的开始:) [https://code.google.com/p/android-3d-flip-view-transition/](https://code.google.com/p/android-3d-flip-view-transition/)

# javascript - 将多个参数s作为对象传递给函数

> ID：15196951
> 
> 赞同：0
> 
> 时间：2013-03-04T07:56:29.967
> 
> 标签：javascript, node.js

我有一个函数，它的输入参数如下：

```
function a(s,d,f,r,g,h,u) 
```

我想将所有输入参数组合成一个对象并将其传递给函数。我必须编写一个集合函数而不是使用选项。任何关于此的想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:58:31.693

使用数组：`[s,d,f,r,g,h,u]`或创建对象：`{s: s,d: d,f: f,r: r,g: g,h: h,u: u}`

```
function a(obj)
{
...
} 
```

在您的函数中，您可以通过这种方式访问​​数组的成员：

`obj[number]`例如`obj[0]`将是`s`，`obj[3]`将是`r`

如果您需要创建一个对象，您可以访问刚刚编写的元素，`obj.name`
例如`obj.d`将是`d`并且`obj.h`将是`h`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:04:57.743

如果您想将一个参数传递给函数，请使用

```
function fn(arr) { }
var arr = [s,d,f,r,g,h,u];

fn(arr); 
```

或者，如果您想传递相同数量的参数但仍使用一个变量，请使用

```
function fn (s,d,f,r,g,h,u) { }

var arr = [s,d,f,r,g,h,u];
fn.call(null, arr); 
```

`fn.call`它将数组的元素作为函数的参数传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:07:08.353

您可以创建一个输入参数数组并可以传递给函数

```
var array = new Array()
array[0] = parameter1
array[1] = parameter2 
```

函数（数组）{

//在这里使用参数，如array[0]

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:13:16.287

...而不是传递您将创建的对象，您可以使用`arguments`所有函数可用的默认参数并从那里开始。

```
function a(){alert(arguments.length)}

a(1,2); // alerts 2
a(1,2,3); // alerts 3
a(1); // alerts 1 
```

希望这可以帮助。

# c++ - C++ 提升大量存储

> ID：15196953
> 
> 赞同：6
> 
> 时间：2013-03-04T07:56:39.027
> 
> 标签：c++, boost, c++11, int, gmp

因此，根据[我之前提出的问题](https://stackoverflow.com/questions/15196232/c-largest-numerical-storage)，我下载并设置了 boost。我有这个代码：

```
#include <stdlib.h>
#include <boost\multiprecision\gmp.hpp>
using namespace std;
using namespace boost::multiprecision;

void main() {
    mpz_int N(567014094304930933548155069494723691156768423655208899778686163624192868328194365094673392756508907687565332345345678900976543567890976543565789054335678097654680986564323567890876532456890775646780976543556789054367890765435689876545898876587907876535976565578907654538790878656543687656543467898786565457897675645657689756456578656456768654657898865567689656890795587907654678798765787897865654657897654678965465786867278762795432151914451557727529104757415030674806148138138281214236089749601911974949125689884222023119844272122501649909415937);

} 
```

但是当我编译它说

```
IntelliSense: integer constant is too large 
```

如果 mpz_int 不是我应该使用的，那么我应该使用什么来处理来自 boost 的大整数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T08:12:13.470

从字符串构造它。您可以使用`mpz_int`或`cpp_int`。

[http://liveworkspace.org/code/1KKxfm](http://liveworkspace.org/code/1KKxfm) $6

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T12:18:13.183

您正在尝试从整数文字构造：这正是“int”类型的文字，并且只能保存“int”大小的值。您可以：

1）将大整数常量放在引号中，以便从字符串构造值，或 2）仅使用 cpp_int，使用用户定义的文字支持从扩展精度文字构造，请参阅[http://www.boost .org/doc/libs/1_55_0/libs/multiprecision/doc/html/boost_multiprecision/tut/lits.html](http://www.boost.org/doc/libs/1_55_0/libs/multiprecision/doc/html/boost_multiprecision/tut/lits.html) 请注意，这需要 C++11 编译器 - 您使用的 VC++ 尚不具备必要的语言功能支持这个。请注意，这是真正的 constexpr 初始化，而不是 gmpxx 使用的运行时隐藏的从字符串构造（必须考虑到需要分配内存）。

# c++ - 如何基于单个用户定义的文字自动添加文字定义？

> ID：15196955
> 
> 赞同：11
> 
> 时间：2013-03-04T07:56:41.167
> 
> 标签：c++, c++11, operator-overloading, user-defined-literals

`C++11`提供[用户定义的文字](http://en.wikipedia.org/wiki/C%2B%2B11#User-defined_literals)。我刚刚开始玩弄它们，这让我想知道是否可以将所有[SI 乘数](http://en.wikipedia.org/wiki/Metric_prefix)自动添加到我定义的单个文字中？

例如，如果我定义

```
Length operator "" _m(long double m) {
    return Length(m); // Length in meters
} 
```

where`Length`是某个`Units`基类的子类，我希望有一种机制可以为所有返回 a 的文字*自动*添加（本着与[boost 运算符](http://www.boost.org/doc/libs/1_53_0/libs/utility/operators.htm)`Length`相同的精神）SI 乘数：

```
// these are added automatically when defining the literal "_m": 
                                         // Length in:
Length operator "" _Ym(long double Ym);  // Yottameters
Length operator "" _Zm(long double Zm);  // Zetameters
...                                      // ...
...                                      // ...
Length operator "" _km(long double km);  // kilometers
Length operator "" _mm(long double mm);  // millimeters
...                                      // ...       
...                                      // ...
Length operator "" _zm(long double zm);  // zeptometers
Length operator "" _ym(long double ym);  // yoctometers 
```

据我所知，除了一些宏魔法之外，没有办法自动执行此操作，因为所有用户定义的文字都需要*显式*定义。

..还是我忽略了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:38:57.070

我认为没有“奇怪的宏”就没有办法完全按照您的要求进行操作。这是我所能得到的：

```
template<typename T, T (*op)(long double)>
struct SI
{
    // ...
    constexpr static T micro = op (.000001);
    constexpr static T milli = op (.001);
    constexpr static T kilo = op (1000);
    constexpr static T mega = op (1000000);
    // ...
};

struct Length
{
    constexpr Length(long double d) : _d(d) { }
    constexpr operator long double() { return _d; }
    long double _d;
};

constexpr Length operator "" _m(long double m) {
    return Length(m);
}

typedef SI<Length, ::operator "" _m> SI_Length;

int main()
{
    constexpr Length l = 3 * SI_Length::kilo;
    static_assert(l == 3000, "error");
} 
```

如果允许使用奇怪的宏，那么类似下面的内容应该可以完成这项工作：

```
#define DEFINE_SI_MULTIPLIERS(T, unit) \
    constexpr T operator "" _u ## unit(long double m) \
    { return ::operator "" _ ## unit(0.000001 * m); } \
    constexpr T operator "" _m ## unit(long double m) \
    { return ::operator "" _ ## unit(0.001 * m); } \
    constexpr T operator "" _k ## unit(long double m) \
    { return ::operator "" _ ## unit(1000 * m); } \
    // ...

DEFINE_SI_MULTIPLIERS(Length, m)

int main()
{
    constexpr Length l = 3.0_km;
    static_assert(l == 3000, "error");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T08:05:37.473

`operator "" _m(const char *)`只要您愿意自己解析浮点数，就不能使用风味吗？这使得`1234k_m`通过调用一个通用的 SI 感知解析器来编写浮点值成为可能。

# ruby-on-rails - 为什么我在 Users#index 错误中收到 NoMethodError（Ruby on Rails）

> ID：15196960
> 
> 赞同：1
> 
> 时间：2013-03-04T07:56:57.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我查看了许多其他线程并花了过去几个小时查看它，但我仍然无法弄清楚。

我正在使用来自另一个视图页面的同一行代码

这是错误：

`app/views/users/_user.html.erb`其中第 4 行提出：

```
undefined method `microposts' for nil:NilClass 
```

如果您熟悉的话，这是来自 Rubytutorial 演示应用程序。使用了此代码`views\users\show.html.erb`，我尝试查看它是否可以正常工作，`views\users\ _user.html.erb`但出现错误。

我重用的代码是：

```
<%= @user.microposts.count %> 
```

这是调用部分的完整视图（_user.html.erb）

```
<li>
  <%= gravatar_for user, size: 52 %>
  <%= link_to user.name, user %>
<%- if @user %>
  <%= @user.microposts.count %>
<%- else %>
  THIS IS THE ERROR, THERE IS NO USER ON @user
<%- end %>
 <% if current_user.admin? && !current_user?(user) %>
    | <%= link_to "delete", user, method: :delete, confirm: "You sure?" %>
  <% end %>
</li> 
```

这导致这是错误，\@user 上没有用户。这意味着根据 rorra 的评论，在部分情况下，\@user 不存在，那么我在哪里解决这个问题？

```
class UsersController < ApplicationController
  before_filter :signed_in_user,
                only: [:index, :edit, :update, :destroy, :following, :followers]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

  def index

    @users = User.paginate(page: params[:page])
  end

  def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to Sample App!"
      redirect_to root_url
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      sign_in @user
      flash[:success] = "Profile updated"
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed"
    redirect_to users_path
  end

  private

    def correct_user
      @user = User.find(params[:id])
      redirect_to root_path unless current_user?(@user)
    end

    def admin_user
      redirect_to root_path unless current_user.admin?
    end
end 
```

这是views\users\index.html.erb

```
<% provide(:title, 'Users') %>
<h1>Users</h1>

<%= will_paginate %>

<ul class="users">
  <%= render @users %>

</ul>

<%= will_paginate %> 
```

这是views\users\show.html.erb

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
    <section>
      <%= render 'shared/stats' %>

    </section>
  <br>
  </aside>

  <div class="span10">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.empty? %>
<h3>Microposts (<%= @user.microposts.count %>)</h3>
<% end %>
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>

      <%= will_paginate @microposts %>
    <% end %>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:07:08.903

使用以下代码更新您的部分 (\views\users\_user.html.erb)：

```
<%- if @user %>
  <%= @user.microposts.count %>
<%- else %>
  THIS IS THE ERROR, THERE IS NO USER ON @user
<%- end %> 
```

你会得到最后一句话：P

问题是部分的 @user 是一个 nil 对象，而不是一个 User 对象

如果您从**show**操作中调用部分，那么您不应该有一个 nil 对象，因为如果 @user 为 nil，它将在您的操作的第二行抛出异常（并且它不会到达部分）。

现在，让新开发人员感到困惑的是，在分部上，您通常传递一个对象，其名称是分部的名称，因此如果您的分部（如本例中）被命名为**_user**，并且您传递一个默认值对象到这个部分，那么您将能够通过使用变量**user**而不是实例变量**@user来引用该对象**

在您的视图中尝试此代码：

```
<%= user.microposts.count %> 
```

为了完成这项工作，您通常会像这样发送对象

```
<%= render partial: '/views/users/user', object: @my_user %> 
```

甚至

```
<%= render @user %> 
```

它将寻找视图 _user.html.erb

您通常使用这些部分来呈现集合，例如

```
<%= render partial: '/views/users/user', collection: @users %> 
```

有关更多信息，请阅读[Rails 指南中关于 partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

* * *

部分应如下所示：

```
 <li>
      <%= gravatar_for user, size: 52 %>
      <%= link_to user.name, user %>
      <%= user.microposts.count %>
      <% if current_user.admin? && !current_user?(user) %>
        | <%= link_to "delete", user, method: :delete, confirm: "You sure?" %>
      <% end %>
    </li> 
```

从 index.html.erb 调用部分的方式

```
<%= render @users %> 
```

完全没问题

您使用什么宝石进行分页？我认为问题在于**paginate**返回一个 ActiveRecord 关系，而不是每个用户的数组。

将您的控制器**索引**操作更新为：

```
@users = User.paginate(page: params[:page]).all 
```

# android - 在 PNG 图像中搜索绿色像素

> ID：15196967
> 
> 赞同：1
> 
> 时间：2013-03-04T07:57:21.513
> 
> 标签：android, image, bitmap, png

我有一个小型 Andriod 应用程序，它有一个搜索 PNG 文件中的绿色像素的子功能。

程序首先处理文件：

```
private Bitmap buildSource(Context context) {
    Paint paint = new Paint();

    Logger.info("buildSource");
    Bitmap form = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.form);
    // float d = context.getResources().getDisplayMetrics().density;
    Bitmap source = Bitmap.createBitmap(form.getWidth(), form.getHeight(),
            Config.ARGB_8888);
    Canvas canvas = new Canvas(source);
    canvas.drawBitmap(form, 0, 0, paint);       
    form.recycle();
    Logger.info("buildSource done " + source);
} 
```

然后它搜索绿色像素：

```
for (int y = 0; y < mSource.getHeight(); y++) {
    for (int x = source.getWidth() - 1; x > 0; x--) {
        int pixel = source.getPixel(x, y);    
        int green = Color.green(pixel);
        int red = Color.red(pixel);
        if (0 == red && green > 210 && green < 220) {
            // Save pixel position
        } 
```

由于某种原因，在我正在运行的特定机器上，此代码不起作用，当我一个一个打印出像素时，没有像素与`red`=`0`和绿色为`~215`. 到目前为止，这工作得很好。

附上图片本身：

![带有绿色像素的图像](../Images/ff847140797a155b844af33f509e4df7.png)

我对 Android 编程很陌生，所以我有点卡住了。将不胜感激任何帮助。

更新：我已将源位图和表单位图保存到图库（Android 编程很有趣）。当我打开图像时，我清楚地看到绿色像素被替换为灰色像素。我应该调整某种背景过滤器吗？谢谢 附上表格图片： ![在此处输入图像描述](../Images/b5469b9c0ad82a5136b8f57f96230f82.png)

# android - 在 andengine 示例中添加部分系统作为背景时性能下降

> ID：15196968
> 
> 赞同：2
> 
> 时间：2013-03-04T07:57:35.077
> 
> 标签：android, andengine

我是android游戏开发的新手。我遵循一个示例并想在我的游戏中添加部分系统作为背景，但我遇到了性能问题。谁能告诉我如何提高性能`andengine`？

```
public class NewFile extends SimpleBaseGameActivity implements
    IAccelerationListener {

private static int CAMERA_WIDTH = 800;
private static int CAMERA_HEIGHT = 480;
private static int MODE = 0;

CountDownTimer spriteScaleTimer;

private int mNumPart = 10;
private float mSpdInitial = 150.0f;
private float mSpdParticle = mSpdInitial;
private float mSpdIncr = 125.0f / mNumPart;

boolean hide = false;

float previousY, previousX;;

boolean isMoving;

Entity backgroundLayer;

Scene scene;

private Sprite mBall;

AnimatedSprite physicsSprite;

private PhysicsWorld physicsWorld;

private TextureRegion mPartReg;

// ///exlposion in sprite///

private BitmapTextureAtlas texExplode, mBallTexture;
private TiledTextureRegion regExplode, mBallTextureRegion;
private AnimatedSprite sprExplode;

private static int SPR_COLUMN = 4;
private static int SPR_ROWS = 4;

private static int SPR_COLUMN1 = 1;
private static int SPR_ROWS1 = 1;

private BitmapFont bitmapfont;
private Text textChances;
private Text textTimer;

// Camera mCamera;
private int width, height;

SmoothCamera mCamera;

@Override
public EngineOptions onCreateEngineOptions() {
    // TODO Auto-generated method stub

    ObjectClass.count = 0;

    final DisplayMetrics displayMetrics = new DisplayMetrics();
    WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    wm.getDefaultDisplay().getMetrics(displayMetrics);
    width = displayMetrics.widthPixels;
    height = displayMetrics.heightPixels;

    if (width > height) {
        CAMERA_WIDTH = 800;
        CAMERA_HEIGHT = 480;
        // Mode =1 = landscape mode
        MODE = 1;
        this.mCamera = new SmoothCamera(0f, 0f, (float) CAMERA_WIDTH,
                (float) CAMERA_HEIGHT, 10, 10, 1.0f);
        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT),
                mCamera);
    } else {
        CAMERA_WIDTH = 480;
        CAMERA_HEIGHT = 800;
        // Mode =0 = portrait mode
        MODE = 0;
        this.mCamera = new SmoothCamera(0f, 0f, (float) CAMERA_WIDTH,
                (float) CAMERA_HEIGHT, 10, 10, 1.0f);
        return new EngineOptions(true, ScreenOrientation.PORTRAIT_SENSOR,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT),
                mCamera);
    }

}

@Override
protected void onCreateResources() {
    // TODO Auto-generated method stub
    try {

        this.bitmapfont = new BitmapFont(this.getTextureManager(),
                this.getAssets(), "afnt/BitmapFont.fnt");
        this.bitmapfont.load();

        BitmapTextureAtlas mPart = new BitmapTextureAtlas(
                this.getTextureManager(), 21, 21,
                TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.mPartReg = BitmapTextureAtlasTextureRegionFactory
                .createFromAsset(mPart, this, "afx/particle.png", 0, 0);

        mEngine.getTextureManager().loadTexture(mPart);

        // menu items end//

        mBallTexture = new BitmapTextureAtlas(this.getTextureManager(), 78,
                79, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        mBallTextureRegion = BitmapTextureAtlasTextureRegionFactory
                .createTiledFromAsset(mBallTexture, this.getAssets(),
                        "afx/ball.png", 0, 0, SPR_COLUMN1, SPR_ROWS1);
        mBallTexture.load();

        texExplode = new BitmapTextureAtlas(this.getTextureManager(), 204,
                204, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        regExplode = BitmapTextureAtlasTextureRegionFactory
                .createTiledFromAsset(texExplode, this.getAssets(),
                        "afx/explosion_transparent.png", 0, 0, SPR_COLUMN,
                        SPR_ROWS);
        texExplode.load();

    } catch (Exception e) {
        Debug.e(e);
    }

}

public Scene gameScene() {

    this.mEngine.registerUpdateHandler(new FPSLogger(1f));

    scene = new Scene();

    Entity forgroundLayer = new Entity();

    textTimer = new Text(CAMERA_WIDTH - 210, 10, this.bitmapfont,
            "Time-00", new TextOptions(HorizontalAlign.CENTER),
            this.getVertexBufferObjectManager());
    forgroundLayer.attachChild(textTimer);

    Log.e("Deepak", "COUNT-" + ObjectClass.count);

    textChances = new Text(CAMERA_WIDTH - 370, 10, this.bitmapfont,
            "Score-" + ObjectClass.count, new TextOptions(
                    HorizontalAlign.CENTER),
            this.getVertexBufferObjectManager());
    forgroundLayer.attachChild(textChances);

    // Create our physics world
    this.physicsWorld = new FixedStepPhysicsWorld(60, new Vector2(0, 0),
            false);

    // Register our physics world to update our scene
    scene.registerUpdateHandler(this.physicsWorld);

    // Enable the accelerometer and bind our own onAccelerometerChanged()
    // method as listener for events
    this.mEngine.enableAccelerationSensor(this, this);

    mBall = new Sprite(CAMERA_WIDTH / 2, CAMERA_HEIGHT / 2,
            this.mBallTextureRegion, getVertexBufferObjectManager());

    scene.attachChild(mBall);

    try {
        // Create walls around our scene
        createWalls();
        // Create the moving body
        createPhysicsBody();

    } catch (Exception e) {
        // TODO: handle exception
    }

    /* The actual collision-checking. */
    scene.registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void reset() {
        }

        @Override
        public void onUpdate(final float pSecondsElapsed) {

            if (physicsSprite.hasParent()) {

                if (physicsSprite.collidesWith(mBall)) {
                    try {
                        removeBall(physicsSprite, mBall);
                    } catch (Exception e) {
                        // TODO: handle exception
                    }
                }
            }
        }
    });

    scene.attachChild(forgroundLayer);

    Timer();

    return scene;

}

@Override
protected Scene onCreateScene() {

    return gameScene();

}

// Removes a ball (sprite) and associated body
private void removeBall(final Sprite ball, final Sprite ball2) {
    final PhysicsConnector ballPhysicsConnector = this.physicsWorld
            .getPhysicsConnectorManager().findPhysicsConnectorByShape(ball);
    this.mEngine.runOnUpdateThread(new Runnable() {
        @Override
        public void run() {
            if (ballPhysicsConnector != null) {

                float px = ball.getX();
                float py = ball.getY();

                float sx = ball2.getX();
                float sy = ball2.getY();

                float mx = (px + sx) / 2;
                float my = (py + sy) / 2;

                physicsWorld
                        .unregisterPhysicsConnector(ballPhysicsConnector);
                ballPhysicsConnector.getBody().setActive(false);
                physicsWorld.destroyBody(ballPhysicsConnector.getBody());
                scene.unregisterTouchArea(ball);
                scene.detachChild(ball);
                System.gc();
                hide = true;

                sprExplode = new AnimatedSprite(mx, my, regExplode,
                        getVertexBufferObjectManager());
                scene.attachChild(sprExplode);

                sprExplode.animate(70, false, new IAnimationListener() {

                    @Override
                    public void onAnimationStarted(
                            AnimatedSprite pAnimatedSprite,
                            int pInitialLoopCount) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationFrameChanged(
                            AnimatedSprite pAnimatedSprite,
                            int pOldFrameIndex, int pNewFrameIndex) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationLoopFinished(
                            AnimatedSprite pAnimatedSprite,
                            int pRemainingLoopCount, int pInitialLoopCount) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationFinished(
                            AnimatedSprite pAnimatedSprite) {
                        // TODO Auto-generated method stub
                        scene.detachChild(sprExplode);

                        spriteScaleTimer.cancel();

                        gameToast("Play again!!");
                        scene.reset();
                        try {
                            ObjectClass.count++;

                            textChances.setText("Score-"
                                    + ObjectClass.count);
                        } catch (Exception e) {
                            // TODO: handle exception
                            e.printStackTrace();
                        }

                        System.gc();
                        createPhysicsBody();
                        Timer();
                    }

                });

            }
            System.gc();
        }
    });
}

public void RemoveOnTimeUp(final Sprite ball) {
    final PhysicsConnector ballPhysicsConnector = this.physicsWorld
            .getPhysicsConnectorManager().findPhysicsConnectorByShape(ball);
    this.mEngine.runOnUpdateThread(new Runnable() {
        @Override
        public void run() {
            if (ballPhysicsConnector != null) {

                physicsWorld
                        .unregisterPhysicsConnector(ballPhysicsConnector);
                ballPhysicsConnector.getBody().setActive(false);
                physicsWorld.destroyBody(ballPhysicsConnector.getBody());
                scene.unregisterTouchArea(ball);
                scene.detachChild(ball);

                hide = true;

                gameToast("Time up Play again!!");
                scene.reset();

                // ++count;
                System.gc();
                createPhysicsBody();
                Timer();

                System.gc();
            }
        }
    });
}

public void Timer() {

    this.runOnUiThread(new Runnable() {
        public void run() {

            spriteScaleTimer = new CountDownTimer(20000, 1000) {

                public void onTick(long millisUntilFinished) {
                    textTimer.setText("Time-" + millisUntilFinished / 1000);
                    // spriteScaleTimer.
                    // put scaling here
                }

                public void onFinish() {
                    RemoveOnTimeUp(physicsSprite);
                    System.gc();
                    // Max scale size.
                }
            }.start();

        }
    });

}

public void gameToast(final String msg) {
    this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            Toast.makeText(NewFile.this, msg, Toast.LENGTH_SHORT).show();
        }
    });
}

private void createWalls() {
    final IAreaShape ground = new Rectangle(0, CAMERA_HEIGHT - 2,
            CAMERA_WIDTH, 2, getVertexBufferObjectManager());
    final IAreaShape roof = new Rectangle(0, 0, CAMERA_WIDTH, 2,
            getVertexBufferObjectManager());
    final IAreaShape left = new Rectangle(0, 0, 2, CAMERA_HEIGHT,
            getVertexBufferObjectManager());
    final IAreaShape right = new Rectangle(CAMERA_WIDTH - 2, 0, 2,
            CAMERA_HEIGHT, getVertexBufferObjectManager());

    final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(0,
            0.5f, 1f);
    PhysicsFactory.createBoxBody(this.physicsWorld, ground,
            BodyType.StaticBody, wallFixtureDef);
    PhysicsFactory.createBoxBody(this.physicsWorld, roof,
            BodyType.StaticBody, wallFixtureDef);
    PhysicsFactory.createBoxBody(this.physicsWorld, left,
            BodyType.StaticBody, wallFixtureDef);
    PhysicsFactory.createBoxBody(this.physicsWorld, right,
            BodyType.StaticBody, wallFixtureDef);

    this.scene.attachChild(ground);
    this.scene.attachChild(roof);
    this.scene.attachChild(left);
    this.scene.attachChild(right);
}

private void createPhysicsBody() {
    // Create the sprite
    physicsSprite = new AnimatedSprite(0f, 0f, mBallTextureRegion,
            getVertexBufferObjectManager());

    // Create the physics body

    final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(1,
            0.5f, 0.5f);

    final Body body = PhysicsFactory.createCircleBody(this.physicsWorld,
            physicsSprite, BodyType.DynamicBody, wallFixtureDef);

    // Add the sprite to the scene
    this.scene.attachChild(physicsSprite);

    // Link the sprite and the body
    this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(
            physicsSprite, body, true, true));
}

@Override
public void onAccelerationAccuracyChanged(AccelerationData pAccelerationData) {
    // TODO Auto-generated method stub
}

final int con = 10;
private float mGravityX;
private float mGravityY;
private final Vector2 mTempVector = new Vector2();

@Override
public void onAccelerationChanged(AccelerationData pAccelerationData) {
    // TODO Auto-generated method stub

    this.mGravityX = pAccelerationData.getY() * 2;
    this.mGravityY = pAccelerationData.getX() * 2;

    if (this.mGravityX > con)
        this.mGravityX = con;
    if (this.mGravityY > con)
        this.mGravityY = con;

    if (this.mGravityX < con * (-1))
        this.mGravityX = con * (-1);
    if (this.mGravityY < con * (-1))
        this.mGravityY = con * (-1);

    this.mTempVector.set(this.mGravityX, this.mGravityY);
    this.physicsWorld.setGravity(this.mTempVector);

}

private void initPartical1() {

    // Init the particle system

    final SpriteParticleSystem particleSystem = new SpriteParticleSystem(
            new PointParticleEmitter(NewFile.CAMERA_WIDTH / 2,
                    NewFile.CAMERA_HEIGHT / 2), 10 * mNumPart,
            10 * mNumPart, mNumPart, this.mPartReg,
            this.getVertexBufferObjectManager());

    // Dirt color
    particleSystem
            .addParticleInitializer(new ColorParticleInitializer<Sprite>(
                    0.2450f, 0.0705f, 0.5745f));
    // They will shrink
    particleSystem.addParticleModifier(new ScaleParticleModifier<Sprite>(0,
            2, 0, 1));

    particleSystem.addParticleModifier(new ColorParticleModifier<Sprite>(0,
            1, 0, 1, 0, 1, 0, 1));

    final Random generator = new Random();

    // Init the particles with random in the angle
    particleSystem
            .addParticleInitializer(new IParticleInitializer<Sprite>() {

                @Override
                public void onInitializeParticle(Particle<Sprite> pParticle) {
                    // Create particles between 225º - 315º
                    int ang = generator.nextInt(361);// + 10;
                    mSpdParticle -= mSpdIncr;
                    float fVelocityX = (float) (Math.cos(Math
                            .toRadians(ang)) * mSpdParticle);
                    float fVelocityY = (float) (Math.sin(Math
                            .toRadians(ang)) * mSpdParticle);

                    pParticle.getPhysicsHandler().setVelocity(
                            fVelocityX * 2, fVelocityY * 2);

                    pParticle.getPhysicsHandler().setAcceleration(
                            (fVelocityX * (50 / 100.0f)),
                            (fVelocityY * (75 / 100.0f)));
                }
            });

    mSpdParticle = mSpdInitial;

    backgroundLayer.attachChild(particleSystem);

    // Remove the particles from the scene
    mEngine.registerUpdateHandler(new TimerHandler(2, new ITimerCallback() {
        @Override
        public void onTimePassed(final TimerHandler pTimerHandler) {
            backgroundLayer.detachChild(particleSystem);
            // backgroundLayer.reset();
            System.gc();
        }
    }));
}

@Override
public void onBackPressed() {
    System.gc();
    System.exit(0);
}

@Override
public void onConfigurationChanged(Configuration newConfig) {

    if (MODE == 0) {

        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
            scene.setScale(1);
            scene.setPosition(0, 0);
        } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            scene.setScaleY(1.6f);
            scene.setScaleX(0.6f);

            scene.setPosition(120, -240);
        }

    } else if (MODE == 1) {

        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
            scene.setScaleY(0.6f);
            scene.setScaleX(1.6f);

            scene.setPosition(-240, 120);
        } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            scene.setScale(1);
            scene.setPosition(0, 0);
        }

    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:10:17.770

通过使用动画精灵作为背景解决了这个问题。

# php - 会话 + php + mysql + 错误

> ID：15196969
> 
> 赞同：0
> 
> 时间：2013-03-04T07:57:40.920
> 
> 标签：php, mysql, session, login, dreamweaver

我正在使用会话创建一个简单的登录表单，但问题是当我按下登录时它会将我重定向到**index.php** 但我需要转到**home.php**。在**logout.php**中，我破坏了会话并重定向到**index.php**，但不知何故，登录按钮将我重定向到**index.php** ， 就像在登录过程中没有成功一样，我非常需要如何修复这个错误。

# 索引.php

```
<?php
require_once('global.php');

if(@$logged == 1)
{

    header("Location: home.php");
    exit();
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>index page</title>
</head>

<body>
<h1> this is the index page</h1>
<a href="login.php">Login</a>
</body>
</html> 
```

# 全局.php

```
<?php
session_start();
 require_once('connect.php'); 

// cheking if the sessions are set

if(isset($_SESSION['username']))
{
    $session_username = $_SESSION['username'];
    $session_pass = $_SESSION['password'];
    $session_id = $_SESSION['id'];

    //cheking if the member exist

    $query = mysql_query("SELECT * FROM members WHERE id = '".$session_id."' AND password = '".$session_pass."' LIMIT 1") or die("could not select memeber");
    $count_count = mysql_num_rows($query);
    if($count_count > 0)
    {
      $logged = 1;
      while($row = mysql_fetch_array($query))
      {
          $session_username = $row['username'];
      }
      $_SESSION['username'] = $session_username;
      $_SESSION['pass'] = $session_pass;
      $_SESSION['id'] = $session_id;        

    }
    else
    {
        header("Location: logout.php");
        exit();
    }
}
else
{
    // if the user not loged in
    $logged = 0;

}

?> 
```

# 登录.php

```
<?php
require_once('global.php');

$message = "";
if(isset($_POST['email']))
{
    $email = $_POST['email'];
    $pass = $_POST['password'];

    // error handling
    if((!$email) ||(!$pass))
    {
        $message = 'please insert both fields';

    }
    else
    {
        //secure data
        $email = mysql_real_escape_string($email);
        $pass = sha1($pass);
        $query = mysql_query("SELECT * FROM members WHERE email = '".$email."' AND password = '".$pass."'LIMIT 1") or die("could not select data");
        $count_query = mysql_num_rows($query);
        if($count_query == 0)
        {
            $message = 'your info was inccorrect';
        }
        else
        {
            //start SESSIONS
            $_SESSION['pass'] = $pass;
            while($row = mysql_fetch_array($query))
            {

                $username = $row['username'];
                $id = $row['id'];
            }
            $_SESSION['username'] = $username;
            $_SESSION['id'] = $id;

        }
        header("Location: home.php");
    }

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>login to membership website </title>
</head>

<body>
<h1> login to my website</h1>
<p><?php print("$message"); ?></p>
<form action="login.php" method="post">
<input type="text" name="email" placeholder="email adress" /><br />
<input type="password" name="password" placeholder="password" /><br />

<input type="submit" value="Login" />
</form>

</body>
</html> 
```

# 主页.php

```
<?php
 require_once('global.php');
if($logged == 0)
{

    header("Location: index.php");
    exit();
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<h1>this the home page</h1>
</body>
</html> 
```

# 注销.php

```
<?php 
session_start();

session_destroy();
/*
if(session_is_registered('username'))
{

    echo "you are loged in we can not log you out"; 
    exit();

}
*/
//else
//{

    header("Location: index.php");
//}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:24:48.100

当您使用 $_SESSION['username'] 检查会话时，您不需要记录的变量。您可以允许用户在 $_SESSION['username'] 存在时访问该页面，并且如果它没有将他重定向到登录页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T22:02:30.097

老实说，这是相当意大利面编码的，有点乱，但问题是 login.php 没有设置 $logged = true 所以 login.php 重定向到 home.php 然后 home.php 重定向到 index.php

所以试试这个

# 登录.php

```
<?php
require_once('global.php');

$message = "";
if(isset($_POST['email'])) {
    $email = $_POST['email'];
    $pass = $_POST['password'];

    // error handling
    if((!$email) ||(!$pass)) {
        $message = 'please insert both fields';
    }
    else
    {
        //secure data
        $email = mysql_real_escape_string($email);
        $pass = sha1($pass);
        $query = mysql_query("SELECT * FROM members WHERE email = '".$email."' AND password = '".$pass."'LIMIT 1") or die("could not select data");
        $count_query = mysql_num_rows($query);
        if($count_query == 0) {
            $message = 'your info was inccorrect';
        } else {
            //start SESSIONS
            $_SESSION['pass'] = $pass;
            while($row = mysql_fetch_array($query)) {
                $username = $row['username'];
                $id = $row['id'];
            }
            $_SESSION['username'] = $username;
            $_SESSION['id'] = $id;
            // NEW LINE
            $logged = 1;
        }
        header("Location: home.php");
    }
}
?> 
```

# c# - Response.Flush with Ajax 不工作？

> ID：15196970
> 
> 赞同：1
> 
> 时间：2013-03-04T07:57:41.113
> 
> 标签：c#, asp.net, ajax, comet, asp.net-4.5

我正在按照以下示例在 ASP.NET 4.5 中创建一个非常简单的 Comet。[显示 Ajax 调用进度的最佳方式是什么？](https://stackoverflow.com/questions/3901495/what-is-the-best-way-of-showing-progress-on-an-ajax-call)

我还从[http://www.aaronlerch.com/blog/2007/07/08/creating-comet-applications-with-aspnet/](http://www.aaronlerch.com/blog/2007/07/08/creating-comet-applications-with-aspnet/)下载了示例。我没有得到服务器的任何响应。

Response.Flush 在 ASp.NEt 4.5 中是否发生了变化？

**更新：**只需删除 Thread.Sleep，现在一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:00:57.627

我认为没有根本的改变只是[添加](http://www.asp.net/vnext/overview/aspnet/whats-new#_Toc318097375)异步刷新响应

异步刷新响应

> 当客户端距离较远或连接带宽较低时，向 HTTP 客户端发送响应可能需要相当长的时间。通常，ASP.NET 会在应用程序创建响应字节时对其进行缓冲。然后，ASP.NET 在请求处理的最后执行累积缓冲区的单个发送操作。
> 
> > 如果缓冲响应很大（例如，将大文件流式传输到客户端），则必须定期调用 HttpResponse.Flush 将缓冲输出发送到客户端并控制内存使用。但是，由于 Flush 是同步调用，因此在可能长时间运行的请求期间，迭代调用 Flush 仍会消耗一个线程。
> > 
> > ASP.NET 4.5 添加了对使用 HttpResponse 类的 BeginFlush 和 EndFlush 方法异步执行刷新的支持。使用这些方法，您可以创建异步模块和异步处理程序，以增量方式将数据发送到客户端，而不会占用操作系统线程。在 BeginFlush 和 EndFlush 调用之间，ASP.NET 释放当前线程。这大大减少了支持长时间运行的 HTTP 下载所需的活动线程总数。

# javascript - 为什么 javascript 中的迭代方法需要（项目、索引和数组）？

> ID：15196971
> 
> 赞同：2
> 
> 时间：2013-03-04T07:57:45.047
> 
> 标签：javascript

目前正在阅读[面向 web 开发人员的专业 javascript](https://rads.stackoverflow.com/amzn/click/com/0764579088)，并且正在讨论数组的迭代方法（即`every()`,`filter()`等）

它有点茫然地指出，您需要向它传递接受三个参数的函数，即数组项值、项在数组中的位置以及数组对象，以便所有函数看起来像这样：

```
function(item, index, array){

[do something with item]

} 
```

为什么，在那种情况下，你需要传递`index`and`array`参数；为什么还`item`不够呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:00:41.317

JavaScript 不会计算您传递给函数的参数数量，因此如果您不需要对索引或参数做任何事情，那么您可以只传递一个接受该项目的函数。

# sql - Doctrine2：带参数的 DQL

> ID：15196973
> 
> 赞同：1
> 
> 时间：2013-03-04T07:57:52.330
> 
> 标签：sql, doctrine-orm, sql-order-by, dql

我想将排序类型作为参数。所以我写了函数

```
public function findInterval($pageNumber, $limit, $sortType) {
    $query = $this->_em->createQuery('Select c from Entities\Comment c where c.isremoved=0 ORDER BY c.creationdate ?1');
    $query->setParameter(1, $sortType);  //sortType is either ASC or DESC

    return $users = $query->getResult();
} 
```

但它不适用于致命错误 Uncaught exception 'Doctrine\ORM\Query\QueryException' with message '[Syntax Error] line 0, col 77: Error: Expected end of string, got '?'' in C:\Users \user\Desktop\projects\interview\application\libraries\Doctrine\ORM\Query\QueryException.php:42 堆栈跟踪：#0 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\ Query\Parser.php(380): Doctrine\ORM\Query\QueryException::syntaxError('line 0, col 77:...') #1 C:\Users\user\Desktop\projects\interview\application\libraries \Doctrine\ORM\Query\Parser.php(745): Doctrine\ORM\Query\Parser->syntaxError('end of string') #2 C:\Users\user\Desktop\projects\interview\application\libraries\ Doctrine\ORM\Query\Parser.php(213): Doctrine\ORM\Query\Parser->QueryLanguage() #3 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\Query\Parser.php(288): Doctrine\ORM\Query\Parser->getAST() #4 C:\Users\user\Desktop \projects\interview\application\libraries\Doctrine\ORM\Query.php(230): Doctrine\ORM\Query\Parser->parse() #5 C:\Users\user\Deskt 在 C:\Users\user\ Desktop\projects\interview\application\libraries\Doctrine\ORM\Query\QueryException.php 在第 42 行

还有其他方法如何按参数设置排序类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:24:31.723

首先，您将值直接放入您的 DQL (c.isremoved = 0)，正如 Bram 正确指出的那样，这不应该发生。您应该只将参数“绑定”到您的查询中，这些参数将被正确转义并减轻任何潜在的 SQL 注入攻击。

其次，您使用的 $sortType 参数应该包含 ASC 或 DESC。不确定您希望传递给此函数的值。但正如 Bram 所演示的，应该对此进行测试，以确保您只使用这两个值之一。

```
public function findInterval($pageNumber, $limit, $sortType) 
{
    $sortType = ($sortType == 'ASC') ? $sortType : 'DESC';    // <-- this example defaults to descending
    $query = $this->_em->createQuery('SELECT c FROM Entities\Comment c WHERE c.isremoved = :isremoved ORDER BY c.creationdate ' . $sortType);
    $query->setParameter('isremoved', 0);

    return $users = $query->getResult();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T08:08:37.350

您只能`where`在准备好的语句中绑定参数（在 中使用）。无论如何都不需要使用它，`orderBy`因为那部分不可能进行 SQL 注入。

只需使用普通 PHP 连接：

```
$sortType = ($sortType == 1) ? 'ASC' : 'DESC';
$query = $this->_em->createQuery('Select c from Entities\Comment c where c.isremoved=0 ORDER BY c.creationdate ' . $sortType); 
```

# php - php将字符串参数解析为数组

> ID：15196982
> 
> 赞同：0
> 
> 时间：2013-03-04T07:58:37.917
> 
> 标签：php

我需要将字符串参数解析为数组

例子：

```
p10s2z1234 
```

输出

```
Array(
'p' => 10,
's' => 2,
'z' => 1234
) 
```

感谢任何提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:04:34.840

使用正则表达式获取所需的值，然后组合数组以获得关联数组。例如：

```
$str = 'p10s2z1234';

preg_match_all('/([a-z]+)(\d+)/', $str, $matches); //handles only lower case chars. feel free to extend regex

print_r(array_combine($matches[1], $matches[2])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:05:07.827

我会说你应该把它分开 p,10,s,2,z,1234 和 explode()

$test = "p,10,s,2,z,1234"; $pieces = explode(",", $test);

然后将它们放入一个数组中。

# three.js - 三.js画布渲染

> ID：15196993
> 
> 赞同：0
> 
> 时间：2013-03-04T07:59:10.223
> 
> 标签：three.js

我有一个关于使用 Canvas 渲染的 Three.js 的问题：我使用 Canvas 渲染是为了完全兼容，速度对我来说并不重要，但我有两个视口，每个都有相同的场景，一个纹理对象只在一个视图中渲染，取决于渲染顺序：（我从一周开始就被阻止了，所以，它是正常的“功能”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T18:31:38.390

您需要设置两个单独的渲染器，将它们附加到单独的 HTML 元素，并使用 CSS`z-index`将它们叠加在一起。正如 Doob 先生所说，它不会为您节省任何计算内存。

这很酷，因为您可以使用相同的场景（网格、材质、灯光），但可以使用不同的相机。

# ios - 重复符号错误：RadioTunes 框架和 Opentok.Framework

> ID：15196999
> 
> 赞同：1
> 
> 时间：2013-03-04T07:59:21.957
> 
> 标签：ios, ios6, video-streaming, radio

我已经`RadioTunes`在我的 ios 项目中成功实现了用于直播广播流的 API。为此，我让用户`RadioTunes.Framewrok,libavcodec.a,libavformat.a,libavutil.a,libswresample.a.`

它在我的项目中运行良好。

现在我想`OpenTok.framework`为 Live Video Chat api 集成（来自 TokBox.com）。但是当我试图在我的项目中包含这个 openTok.framework 时，我得到以下重复的语法错误：

```
duplicate symbol _avcodec_register_all in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(allcodecs.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavcodec.a(allcodecs.o)
duplicate symbol _ff_prefetch_arm in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(dsputil_arm.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavcodec.a(dsputil_arm.o)
duplicate symbol _ff_put_pixels16_arm in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(dsputil_arm.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavcodec.a(dsputil_arm.o)
duplicate symbol _ff_put_pixels8_arm in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(dsputil_arm.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavcodec.a(dsputil_arm.o)

........
duplicate symbol _ff_get_cpu_flags_arm in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(cpu.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavutil.a(cpu.o)
duplicate symbol _av_get_channel_layout_nb_channels in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(audioconvert.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavutil.a(audioconvert.o)
duplicate symbol _av_get_channel_layout_string in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(audioconvert.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavutil.a(audioconvert.o)
duplicate symbol _av_strcasecmp in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(avstring.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavutil.a(avstring.o)

duplicate symbol _av_register_all in:
    ......
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavformat.a(utils.o)
duplicate symbol _ff_read_packet in:
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/Opentok.framework/Opentok(utils.o)
    /Volumes/Drive A/Chirag/iOS project/Dolphin7-iOS-Src-v.1.6/External/ffmpeg/lib/libavformat.a(utils.o)
........
ld: 787 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

此处，“External/ffmpeg/lib/”是 RadioTunes.Framework 所需的目录。

现在，我无法删除`RadioTunes`realted 框架，也想添加`OpenTok.framwork`.

怎么做？

谁能帮助我，如何删除这个重复的语法错误，但需要 RadioTune.framework 和 OpenTok.framework。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:26:30.720

如果我清楚地理解问题，请转到“构建阶段”中的“编译源”部分，然后简单地删除 ffmpeg 文件的重复条目。