# StackOverflow 问答 16151000-16151999

# spring - 无法在托管 bean 中注入接口

> ID：16151002
> 
> 赞同：0
> 
> 时间：2013-04-22T15:34:42.813
> 
> 标签：spring, jsf, dependency-injection, primefaces, autowired

我正在使用 Spring 和 PrimeFaces 编写一个 Web 应用程序。我试图在我的 managedBean 中注入接口，但是当我尝试使用它时，它为空并且我得到一个异常。

这是`datasource-config.xml`：

```
<context:component-scan base-package="com.myTest"/>

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:comp/env/jdbc/testDS</value>
    </property>
</bean>

<bean id="myTestService" class="com.myTest.service.MyTestService">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

我的 managedBean 类是这样的：

```
@ManagedBean(name="myList")
@SessionScoped

public class MyListBean {

private LazyDataModel<Merchant> lazyModel;
@Autowired  
@ManagedProperty(value = "#{myTestService}")
private MyTestServiceInterface myTestService;

public MyListBean (){
    int a = myTestService.getRecordsCount() ;

}

public LazyDataModel<Merchant> getLazyModel() {
    return lazyModel;
}

public void setLazyModel(LazyDataModel<Merchant> lazyModel) {
    this.lazyModel= lazyModel;
}

public MyTestServiceInterface getMyTestService() {
    return myTestService;
}

public void MyTestServiceInterface (MyTestServiceInterface myTestService) {
    this.myTestService= myTestService;
} 
```

}

`myTestService`仍然`null`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:25:57.113

我不得不添加这一行

> 面孔-config.xml

```
<el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver> 
```

# code-signing - CA Cert 代码签名“值”选项？

> ID：16151003
> 
> 赞同：1
> 
> 时间：2013-04-22T15:34:51.390
> 
> 标签：code-signing

我有一个 Windows 应用程序，我想使用官方 CA 证书进行签名，以便用户可以更加自信地使用该软件。我在这方面几乎没有经验，看着威瑞信，我看到他们以每年 500 美元的价格提供这个：

[http://www.symantec.com/verisign/code-signing/microsoft-authenticode](http://www.symantec.com/verisign/code-signing/microsoft-authenticode)

这对我的软件来说可能太贵了，想知道是否有更便宜的替代品？

基本上，我只是希望我的 exe 安装程序可以通过 Windows vista/7/8 计算机从我的网站下载，而不会让 Windows 感到非常不安并将其标记为“危险”

# java - 无法理解需要使 Process.java 抽象

> ID：16151004
> 
> 赞同：13
> 
> 时间：2013-04-22T15:34:51.780
> 
> 标签：java, design-patterns

我正在随便浏览 Java 核心类的源代码。我发现该`Process.java`文件是一个`public abstract`类。当我浏览代码时，没有函数有定义。这是否意味着它应该被宣布为`Interface`. 这背后有什么故意的原因吗。有人可以帮助我理解这种设计的需要吗？

链接到[代码](https://github.com/frohoff/jdk8u-jdk/blob/master/src/share/classes/java/lang/Process.java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:04:40.177

`Process`是抽象的，因为它可能在每个操作系统上都有不同的实现。应用程序开发人员不实现这个抽象类；它是作为 Java 运行时的一部分实现的。

由于所有方法都是抽象的，因此可以将其声明为接口，但这会使该类在未来无法发展。例如，一旦在公共 API 中声明了新方法，就不应将其添加到接口中，因为这样任何现有的实现都将不兼容。相反，一个新的（具体的）方法可以很容易地添加到抽象类中。

的实例`Process`由运行时创建，通过`Runtime`类方法或从`ProcessBuilder`实例创建。应用程序通常不会使用`new`运算符直接创建（具体子类的）实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:03:48.050

我怀疑关键的区别在于您可以随心所欲`implement`地使用多个`interface`s 但您只能使用`extend` **一个** `class`s ，无论是抽象的还是其他的。

因此，抽象`Process`化可以确保如果您实际上决定从头开始创建一个（即不是从系统提供的工厂，这是正常的路线），您将无法将功能放在它的父类中。我不确定这有什么帮助。

也许这是一个安全问题，因为进程应该由操作系统创建和拥有。最好是阻止您自己制作它们。

**添加**

在内心深处，我认为它不是界面的原因是历史性的。请记住，自 dot`Process`年以来一直存在，`java.lang`那时接口是您实现的东西，而不是对象个性方面的定义。这个概念是在很久以后才发展起来的。

请注意，`Process`自 JDK 1.0 以来就已经存在，而许多更有用的接口在很久以后`CharSequence`才出现，例如，该接口直到 JDK 1.4 才出现。我认为有一个范式转变，从对象是主要的，接口是真正有用的，接口是全部，而对象只是实现。

`Process`因此将是在 a是*真实*对象并且可能驾驶奥迪 Quattro时创建的**旧**类之一，而不是一些模糊的概念 namby-pamby miasmic 东西，其中包含一些方法并且看起来有点像这样。`Process`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:31:51.863

该类`Process` 显然确实具有我们看不到的内部功能，并且出于显而易见的原因，这必须依赖于操作系统。

我的猜测是，他们不希望您实现自己的符合 API 的类，这些类不继承 Java 库定义的 Process 类的隐藏功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:50:11.657

根据 的文档[`java.lang.Process`](http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/Process.html)，该类提供了一个可以不带参数调用的构造函数。接口无法做到这一点。*

# class - 如何在 CK Editor 中将多个元素应用于单个样式

> ID：16151005
> 
> 赞同：2
> 
> 时间：2013-04-22T15:35:01.093
> 
> 标签：class, styles, ckeditor, multiple-instances

我到处搜索，似乎找不到我的问题的答案。要将单个元素应用于 ckconfig.jsp 文件中的单个样式，您只需使用：

> {名称：'Header 1'，元素：'h1'，属性：{'class'：'template_header_1'}}，

这将类**template_header_1**应用于元素**h1**

我正在尝试将单一样式应用于 li 和 ul 元素。我想要这样的东西：

> {name：'特殊列表'，{元素：'ul'，属性：{'class'：'ul_class'}}，{元素'li'，属性：{'class'：'li_class'}}}，

在这个假设的语法 中， **ul**具有类**ul_class**，而 **li**具有类**li_class**

这将允许我应用一个类，并让 2 个单独的类适用于具有一个声明而不是 2 个单独的元素的单独元素。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T11:55:04.453

我以为我测试并尝试了我原来的建议，但我显然没有。我无法重现这实际上产生了有用的结果。

我们发现的唯一解决方法是使用模板插件来按需插入多个代码标签。显然，它的缺点是您无法在已经编写的文本中添加标签；只插入新的空模板，然后将文本移动/复制粘贴到模板中。

我没有快速的交钥匙解决方案。使其工作的最接近的想法是增强样式插件以接受“子”参数，以便您可以嵌套样式定义，接近[Angular JS](http://angularjs.org/)在指令中嵌入的想法。

* * *

**原答案：**

我能找到的最接近启用此功能的方法是[在他们的论坛中提到的](http://ckeditor.com/comment/46642#comment-46642)。他们建议添加一个“初始”属性，如：

```
'my nested style': { 
    Element : 'div',
    Attributes : { 
        'class' : 'infobox',
        'Initial' : '<h4>header</h4><p>text</p>'
    } 
} 
```

# xpath - XPATH 的不同值

> ID：16151009
> 
> 赞同：0
> 
> 时间：2013-04-22T15:35:12.657
> 
> 标签：xpath, distinct-values

我有一个这样的 xml，我想获得使用 xpath 的不同值。我尝试使用不同的值，但它不起作用。你能帮助我吗？谢谢你。

```
<schema>
    <animal href="http://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Emperor_penguin.jpg/410px-Emperor_penguin.jpg">
        <id>1</id>
        <type>Bird</type>
    </animal>
    <animal href="https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/White_shark.jpg/800px-White_shark.jpg">
        <id>2</id>
        <type>Fish</type>
    </animal>
    <animal href="http://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Pig-Nosed_Turtle_Carettochelys_insculpta_Underside_2000px.jpg/595px-Pig-Nosed_Turtle_Carettochelys_insculpta_Underside_2000px.jpg">
        <id>3</id>
        <type>Reptile</type>
    </animal>
    <animal href="http://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Mobula_breaching.jpg/800px-Mobula_breaching.jpg">
        <id>4</id>
        <type>Fish</type>
    </animal>
</schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:50:22.363

假设您正在寻找`distinct type`元素使用`/schema/animal/type[not(. = ../preceding-sibling::animal/type)]`.

# url - 在 Struts2 中从动作重定向到外部 url

> ID：16151016
> 
> 赞同：2
> 
> 时间：2013-04-22T15:35:30.020
> 
> 标签：url, redirect, struts2, action

我正在尝试与此问题类似的事情

[在浏览器中重定向外部 url](https://stackoverflow.com/questions/13854429/redirect-external-url-in-browser)

但它根本不适合我。

动作代码：

```
 public String getMail(){
        try {  //some code

            url = accessToken.getCallbackUrl();
            if(url != null){

                return "redirect";
            }

            return "input";

        } catch (UnsupportedOperationException e) {
            return "input";
        }
    }

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    } 
```

Struts.xml

```
 <action name="getMail" method="getMail"
                  class="test.MailAction">
                <result name="input">/index.jsp</result>
                <result name="redirect" type="redirect">${url}</result>
    </action> 
```

我也为 url 编写了 setter-getter。

当我尝试在浏览器中手动编写此 url 时，它工作得很好。但是，它不会自动重定向

# node.js - 如何在没有 sudo 的情况下修复 npm 抛出错误

> ID：16151018
> 
> 赞同：1416
> 
> 时间：2013-04-22T15:35:37.163
> 
> 标签：node.js, unix, permissions, npm, sudo

我刚刚通过 nodejs.org 上的包安装了 node 和 npm，每当我尝试使用 npm 搜索或安装某些东西时，它都会抛出以下错误，除非我 sudo 命令。我感觉这是权限问题？我已经是管理员了。

```
npm ERR! Error: EACCES, open '/Users/chietala/.npm/-/all/.cache.json'
npm ERR!  { [Error: EACCES, open '/Users/chietala/.npm/-/all/.cache.json']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/Users/chietala/.npm/-/all/.cache.json' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.2.0
npm ERR! command "node" "/usr/local/bin/npm" "search" "bower"
npm ERR! cwd /Users/chietala
npm ERR! node -v v0.10.4
npm ERR! npm -v 1.2.18
npm ERR! path /Users/chietala/.npm/-/all/.cache.json
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, open '/Users/chietala/.npm/-/all/.cache.json'
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/chietala/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：2396
> 
> 时间：2013-04-22T16:11:27.590

这看起来像是您的主目录中的权限问题。要收回**.npm**目录的所有权，请执行：

```
sudo chown -R $(whoami) ~/.npm 
```

* * *

## 回答 #2

> 赞同：690
> 
> 时间：2014-06-25T09:05:11.163

在执行诸如写入*npm 目录*（`npm link`、`npm install -g`等）之类的操作时，将需要您在安装 Node 时使用的权限。

您可能以 root 权限运行 Node.js 安装，这就是全局包安装要求您成为 root 的原因。

* * *

# 解决方案 1：NVM

> 不要破解权限，以正确的方式安装 Node.js。

在开发机器上，您不应该使用 root 权限安装和运行 Node.js，否则像`npm link`,之类的东西`npm install -g`将需要相同的权限。

[NVM](https://github.com/creationix/nvm)（节点版本管理器）允许您在没有 root 权限的情况下安装 Node.js，还允许您安装多个版本的 Node 以轻松使用它们。非常适合开发。

1.  卸载节点（可能需要 root 权限）。[这](https://stackoverflow.com/q/9283472/1480391)可能会帮助你。
2.  然后按照[此页面上的](https://github.com/creationix/nvm)说明安装[NVM](https://github.com/creationix/nvm)。
3.  通过 NVM 安装节点：`nvm install node`

现在`npm link`，`npm install -g`将不再要求您是 root。

编辑：另见[https://docs.npmjs.com/getting-started/fixing-npm-permissions](https://docs.npmjs.com/getting-started/fixing-npm-permissions)

* * *

# 解决方案 2：为给定用户全局安装软件包

> 不要破解权限，以正确的方式全局安装 npm 包。

如果您在 OSX 或 Linux 上，您可以为您的全局包和设置**创建一个用户专用目录，**`npm`并`node`了解如何查找全局安装的包。

查看[**这篇精彩的文章**](https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md)，了解有关在不使用 sudo 的情况下全局安装 npm 模块的分步说明。

另请参阅：npm 关于[修复 npm 权限](https://docs.npmjs.com/getting-started/fixing-npm-permissions)的文档。

* * *

## 回答 #3

> 赞同：400
> 
> 时间：2013-08-24T03:23:29.273

您还需要`node_modules`目录中的写权限：

```
sudo chown -R $USER /usr/local/lib/node_modules 
```

* * *

## 回答 #4

> 赞同：102
> 
> 时间：2014-05-27T12:36:15.987

更改“系统全局”文件夹的所有者是一种黑客行为。在全新安装时，我会将NPM 配置为对“用户全局”程序[使用已经可写的位置：](https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally)

```
npm config set prefix "${HOME}/npm" 
```

然后确保将该文件夹添加到路径中：

```
export PATH="${PATH}:${HOME}/npm/bin" 
```

请参阅[@ErikAndreas](https://stackoverflow.com/a/21712034)对[NPM modules won't`sudo`](https://stackoverflow.com/questions/19352976/npm-modules-wont-install-globally-without-sudo) global install without 的回答，以及@sindresorhus 提供[的更长的分步指南](https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md)，还设置了`$MANPATH`。

* * *

## 回答 #5

> 赞同：73
> 
> 时间：2016-12-30T11:18:25.623

**小心！！！** **小心！！！** **小心！！！**

chown 或 chmod**不是**解决方案，因为存在安全风险。

**而是这样做，做：**

首先检查 npm 指向的位置，如果您调用：

```
npm config get prefix 
```

如果返回 /usr，您可以执行以下操作：

```
mkdir ~/.npm-global
export NPM_CONFIG_PREFIX=~/.npm-global
export PATH=$PATH:~/.npm-global/bin 
```

这会在您的主目录中创建一个 npm-Directory 并指向`npm`它。

要使此更改永久生效，您必须将导出命令添加到您的 .bashrc：

```
echo -e "export NPM_CONFIG_PREFIX=~/.npm-global\nexport PATH=\$PATH:~/.npm-global/bin" >> ~/.bashrc 
```

* * *

## 回答 #6

> 赞同：60
> 
> 时间：2013-10-03T23:16:57.053

[我在安装 Recess ( https://github.com/twitter/recess](https://github.com/twitter/recess) ) 为 Bootstrap 3 编译我的 CSS时遇到了这个问题。

安装凹槽时：

```
-npm install recess -g 
```

1.  你需要在你的`home`目录中解锁权限，就像[Noah](https://stackoverflow.com/users/1095114/noah) 说的：

    ```
    sudo chown -R `whoami` ~/.npm 
    ```

2.  您还需要对`node_modules`目录的写权限，就像[Xilo](https://stackoverflow.com/users/2712832/xilo) 说的那样，所以如果它仍然无法正常工作，请尝试：

    ```
    sudo chown -R `whoami` /usr/local/lib/node_modules 
    ```

3.  如果您仍然看到错误，您可能还需要[更正`/usr/local`权限](https://apple.stackexchange.com/questions/1393/are-my-permissions-for-usr-local-correct)：

    ```
    sudo chown -R `whoami` /usr/local 
    ```

请注意，如果您在 Mac 上，如[本文](https://apple.stackexchange.com/questions/1393/are-my-permissions-for-usr-local-correct) `/usr/local/`所述，它实际上并不是系统目录，因此，对于 Mac 用户来说，这个答案实际上是完全“安全的”。但是，如果您使用的是 Linux，请参阅下面[Christopher Will](https://stackoverflow.com/users/842302/christopher-will)的回答，了解多用户友好、系统目录安全（但更复杂）的解决方案。

* * *

## 回答 #7

> 赞同：40
> 
> 时间：2014-01-09T11:58:26.220

其他答案建议将系统目录的所有权或权限更改为特定用户。我强烈反对这样做，这可能会变得非常尴尬，并且可能会弄乱整个系统！

这是一种更通用、更安全的方法，它也支持多用户。

为 node-users 创建一个新组并将所需的用户添加到该组。然后将依赖于节点的文件/目录的所有权设置为该组。

```
# Create new group
sudo groupadd nodegrp 

# Add user to group (logname is a variable and gets replaced by the currently logged in user)
sudo usermod -a -G nodegrp `logname`

# Instant access to group without re-login
newgrp nodegrp

# Check group - nodegrp should be listed as well now
groups

# Change group of node_modules, node, npm to new group 
sudo chgrp -R nodegrp /usr/lib/node_modules/
sudo chgrp nodegrp /usr/bin/node
sudo chgrp nodegrp /usr/bin/npm

# (You may want to change a couple of more files (like grunt etc) in your /usr/bin/ directory.) 
```

现在您可以轻松地以用户身份安装模块

```
npm install -g generator-angular 
```

某些模块（grunt、bower、yo 等）仍需要以 root 身份安装。这是因为他们在 /user/bin/ 中创建符号链接。

**编辑**

3 年后，我建议使用[Node Version Manager](https://github.com/creationix/nvm)。它可以为您节省大量时间和麻烦。

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2016-01-23T19:46:07.387

有关如何修复错误权限的**官方文档**位于[https://docs.npmjs.com/getting-started/fixing-npm-permissions](https://docs.npmjs.com/getting-started/fixing-npm-permissions)。`npm install``EACCES`

`.pkg`在使用OSX 上的安装程序全新安装节点后，我遇到了这个问题。这里有一些很好的答案，但我还没有看到 npmjs.com 的链接。

**选项 1：将权限更改为 npm 的默认目录**

1.  找到 npm 目录的路径：

    ```
    npm config get prefix 
    ```

对于许多系统，这将是**/usr/local**。

**警告**：如果显示的路径只是**/usr**，请切换到*选项 2*。

2.  将 npm 目录的所有者更改为当前用户的名称（您的用户名！）：

    ```
    sudo chown -R $(whoami) $(npm config get prefix)/{lib/node_modules,bin,share} 
    ```

    **这会更改 npm 和其他一些工具（ lib/node_modules**、**bin**和**share**）使用的子文件夹的权限。

**选项 2：将 npm 的默认目录更改为另一个目录**

有时您不想更改 npm 使用的默认目录（即**/usr**）的所有权，因为这可能会导致一些问题，例如，如果您与其他用户共享系统。

相反，您可以将 npm 配置为完全使用不同的目录。在我们的例子中，这将是我们主文件夹中的一个隐藏目录。

1.  为全局安装创建一个目录：

    ```
    mkdir ~/.npm-global 
    ```

2.  配置 npm 以使用新的目录路径：

    ```
    npm config set prefix '~/.npm-global' 
    ```

3.  打开或创建一个 ~/.profile 文件并添加以下行：

    ```
    export PATH=~/.npm-global/bin:$PATH 
    ```

4.  返回命令行，更新系统变量：

    ```
    source ~/.profile 
    ```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2020-12-02T14:54:34.950

我遇到了这个问题，虽然确实`~/.npm`应该由您的用户拥有，`npm`但没有在那里安装模块。

真正解决我的问题的是这些命令：

```
npm config set prefix ~/.npm
export PATH="$PATH:$HOME/.npm/bin" 
```

它将确保您的所有全局安装都将使用此前缀。重要的是您的用户拥有该目录。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2015-01-20T09:35:48.843

好像我们在这里需要更多答案，但无论如何..

Sindre Sorus 有一个指南[Install npm packages global without sudo on OS X and Linux](https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md)概述了如何干净地安装而不弄乱权限：

> 这是一种为给定用户全局安装软件包的方法。
> 
> 1.  为您的全局包创建一个目录
>     
>     
>     
>     ```
>     mkdir "${HOME}/.npm-packages" 
>     ```
>     
>     
> 2.  参考此目录以供将来在 .bashrc/.zshrc 中使用：
>     
>     
>     
>     ```
>     NPM_PACKAGES="${HOME}/.npm-packages" 
>     ```
>     
>     
> 3.  向 npm 指示存储全局安装包的位置。在您的`$HOME/.npmrc`文件中添加：
>     
>     
>     
>     ```
>     prefix=${HOME}/.npm-packages 
>     ```
>     
>     
> 4.  确保节点会找到它们。将以下内容添加到您的 .bashrc/.zshrc：
>     
>     
>     
>     ```
>     NODE_PATH="$NPM_PACKAGES/lib/node_modules:$NODE_PATH" 
>     ```
>     
>     
> 5.  确保您会找到已安装的二进制文件和手册页。将以下内容添加到您的`.bashrc`/ `.zshrc`：
>     
>     
>     
>     ```
>     PATH="$NPM_PACKAGES/bin:$PATH"
>     # Unset manpath so we can inherit from /etc/manpath via the `manpath`
>     # command
>     unset MANPATH # delete if you already modified MANPATH elsewhere in your config
>     MANPATH="$NPM_PACKAGES/share/man:$(manpath)" 
>     ```
>     
>     
> 
> 查看[npm-g_nosudo](https://github.com/glenpike/npm-g_nosudo)自动执行上述步骤

*查看[本指南的来源以](https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md)获取最新更新。*

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2016-05-12T06:13:01.910

TL;博士

> 始终使用`sudo -i`or`sudo -H`在运行`npm install`时安装全局包。

* * *

当您使用`npm`时，它会将包下载到您的用户主目录。当您以 sudo 运行时，`npm`会将文件安装到同一目录，但现在它们归 root 所有。

所以这绝对是每个曾经使用过的人都会发生的事情`npm`：

*   使用安装一些本地软件包没有问题`npm install foo`
*   `sudo install -g foo-cli`使用没有问题安装全局包
*   尝试安装本地软件包`npm install bar`
*   对设计师感到沮丧，`npm`因为您必须`chmod`再次访问目录

当您将`-i`or`-H`选项与 sudo 一起使用时，您的主目录将是`root`的主目录。任何全局安装都会将包`/root/.npm`缓存`root`到`/home/me/.npm`.

只要始终使用`sudo -i`or`sudo -H`在运行`npm install`时安装全局软件包，您的`npm`权限问题就会消失。

为了好。

- *qv*修复已经搞砸的公认答案`npm`。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2013-10-20T07:22:10.040

当您运行 npm install -g somepackage 时，您可能会收到 EACCES 错误，要求您以 root/管理员身份再次运行该命令。这是权限问题。

很**容易修复**，打开你的终端（应用程序>实用程序>终端）

```
sudo chown -R $USER /usr/local/lib/node_modules 
```

** 我强烈建议你不要使用 sudo 进行包管理（sudo npm -g install something），因为以后可能会遇到一些问题**

参考： http: [//foohack.com/2010/08/intro-to-npm/](http://foohack.com/2010/08/intro-to-npm/)

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2013-10-14T06:28:16.837

我在[NPM modules won't global install without sudo](https://stackoverflow.com/questions/19352976/npm-modules-wont-install-globally-without-sudo/19354387)遇到了类似的问题，问题是**当我安装节点时，我通过 chris/lea ppa repo 使用 sudo 完成了它**。

我的解决方案是卸载节点，然后以这种方式安装：

从 nodejs.org #in my case node-v0.10.20.tar.gz 下载最新的稳定节点源

> tar -zxf node-v0.10.20.tar.gz #解压缩源
> 
> cd node-v0.10.20 #进入解压文件夹
> 
> sudo chown $USER -R /usr/local
> 
> ./configure --prefix=/usr/local && make && make install

PD：如果您不想更改 /usr/local 文件夹的所有权，您可以将它安装在您已经拥有的地方。这种方法的问题是您必须将安装文件夹与 bash 命令行绑定，以便我们稍后可以使用 node 命令

> mkdir ~/opt
> 
> ./configure --prefix=~/opt && make && make install
> 
> echo 'export PATH=~/opt/bin:${PATH}' >> ~/.bashrc #or ~/.profile or ~/.bash_profile or ~/.zshenv 取决于当前的操作系统

使用其中任何一种方法，您都可以在不使用 sudo 的情况下执行以下操作

> npm install -g module_to_install

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2014-09-10T05:16:39.747

对于 Mac（取自 Christoper Will 的回答）

Mac OS X 10.9.4

1.  系统偏好>用户和组>（解锁）>按+：

    新帐户>“组”
    帐户名称：nodegrp

    创建组后，勾选要加入该组的用户

2.  > sudo chgrp -R nodegrp /usr/local/lib/node_modules/
    > sudo chgrp nodegrp /usr/bin/node
    > sudo chgrp nodegrp /usr/bin/npm
    > sudo chown -R $(whoami):nodegrp ~/.npm

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-01-15T01:16:35.343

对我来说，只执行

```
sudo chown -R $(whoami) ~/.npm 
```

不起作用。然后，我也执行

```
sudo chown -R $(whoami) /usr/lib/node_modules/
sudo chown -R $(whoami) /usr/bin/node
sudo chown -R $(whoami) /usr/bin/npm 
```

一切正常！

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2017-12-26T11:09:23.540

**问题**：您（用户）没有正确的目录权限集。

即时的出路是使用 sudo 运行 npm install，但这可能会给您同样的错误，或者安装不正确。

并且更改目录所有权不是一个好的选择，一个临时补丁。

* * *

**解决方案**/**建议**：更改 npm 的默认目录（来自官方[文档](https://docs.npmjs.com/getting-started/fixing-npm-permissions#option-two-change-npms-default-directory)）

在继续之前备份您的计算机。

（可选）如果您有错误安装，请先将其卸载：

```
npm uninstall <package-name>  # use sudo if you used it while installation
npm cache verify  # or, npm cache clean for npm version below 5.x.x 
```

1.  为全局安装创建一个目录：

    **`mkdir ~/.npm-global`**

2.  配置 npm 以使用新的目录路径：

    **`npm config set prefix '~/.npm-global'`**

3.  打开或创建一个`~/.profile`or`~/.bash_profile`文件并添加以下行：

    **`export PATH=~/.npm-global/bin:$PATH`**

4.  返回命令行，更新系统变量，或重新启动终端：

    **`source ~/.profile`**

5.  （可选）测试：在不使用 sudo 的情况下全局下载包。

    **`npm install -g jshint`**

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2014-03-27T22:52:47.003

就我而言，这是因为 ~/tmp 的许可。所以我这样做：

```
sudo chown -R $USER ~/tmp 
```

没关系！

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-10-06T19:11:11.433

问题：您无权写入 npm 用于存储全局包和命令的目录。

解决方案：允许 npm 的权限。

打开一个终端：

> 命令 + 空格键然后输入“终端”

输入此命令：

```
sudo chown -R $(whoami) $(npm config get prefix)/{lib/node_modules,bin,share} 
```

*   注意：这将需要您的密码。

此解决方案仅允许对所需目录的权限，使其他目录保持良好和安全。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2018-02-07T05:22:39.380

如果`sudo chown -R $(whoami) ~/.npm`对您不起作用，或者您需要非终端命令解决方案。

问题是您的用户帐户没有对 node_modules 文件夹的写入权限，因此您可以执行以下操作

1.  打开查找器并按`cmd`+ `shift`+`g`这将打开带有 url 的文件夹

2.  写下以下路径`/usr/local/lib/node_modules`，然后按 go

3.  右键单击`node_modules`文件夹并选择`Get Info`

4.  向下滚动到`sharing & permissions`部分

5.  解锁以进行更改。

6.  按`+`并添加您的用户帐户

7.  确保您`Read & Write`在权限下拉列表中选择

现在您应该能够在没有安装包的情况下安装包，`sudo`并且应该解决权限问题

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-01-25T12:50:56.357

正确配置 NPM 的另一个很好的修复方法是运行以下命令：

```
npm config set prefix '~/.npm_packages'
PATH=$PATH:$HOME/.npm_packages/bin; export PATH 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-06-30T07:29:02.410

最好的解决方案[是](https://docs.npmjs.com/getting-started/fixing-npm-permissions)npm 文档提供的。

* * *

对于 Ubuntu，建议的解决方案是[Option#2](https://docs.npmjs.com/getting-started/fixing-npm-permissions#option-2-change-npms-default-directory-to-another-directory)

简要步骤：
为全局安装创建一个目录：
**`mkdir ~/.npm-global`**

配置 npm 以使用新的目录路径：可以帮助您验证前缀是否已更新。结果将是 <Your Home Directory>/.npm-global
**`npm config set prefix '~/.npm-global'`**
`npm config get prefix`

打开或创建一个 ~/.profile 文件并添加以下行：
**`export PATH=~/.npm-global/bin:$PATH`**

返回命令行，更新系统变量：
**`source ~/.profile`**

除了步骤 2-4，您还可以使用相应的 ENV 变量（例如，如果您不想修改 ~/.profile）：

`NPM_CONFIG_PREFIX=~/.npm-global`

* * *

对于 Mac 建议的解决方案是[Option#3](https://docs.npmjs.com/getting-started/fixing-npm-permissions#option-3-use-a-package-manager-that-takes-care-of-this-for-you)

在 Mac OS 上，您可以使用 Homebrew 包管理器完全避免这个问题

**`brew install node`**

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2018-07-27T08:03:18.107

你可以试试这个，适用于 ubuntu 和 mac

```
sudo chown -R $(whoami) /usr/local/lib/node_modules 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2021-05-05T12:28:48.313

没有人提到这一点，但实际上不需要弄乱权限或单独安装 npm，只需为命令指定不同的缓存文件夹即可解决问题

```
npm install --cache .npm
npm run build --cache .npm 
```

这将创建一个本地`.npm`文件夹

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2021-12-10T01:15:38.410

简单地尝试

```
npm rebuild 
```

然后在完成后运行你常用的命令

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-03-19T14:39:37.213

在我看来，最好的选择是[npm 文档](https://docs.npmjs.com/getting-started/fixing-npm-permissions#option-2-change-npms-default-directory-to-another-directory)中建议的选项，即首先通过运行检查默认情况下全局 node_modules 的安装位置`npm config get prefix`。如果你得到了，就像我在 Trusty 上所做的那样`/usr`，你可能想要将它更改为一个你可以安全拥有的文件夹，而不会像我那样搞砸事情。

为此，请在系统中选择或创建一个新文件夹。您可能希望将它放在您的主目录中，或者像我一样，`/usr/local`为了保持一致性，因为我也是 Mac 用户（我不希望根据我碰巧在前面的机器查看不同的位置）。这样做的另一个很好的理由是该`/usr/local`文件夹可能已经在您的 PATH 中（除非您想弄乱您的 PATH），但是您新创建的文件夹很可能不在，您需要将其添加到在你的*.bash-profile*或*.bashrc*文件中自行设置路径。

长话短说，我用 更改了全局模块的默认位置`npm config set prefix '/usr/local'`，创建了文件夹`/usr/local/lib/node_modules`（它将被 npm 使用）并使用以下命令更改了 npm 使用的文件夹的权限：

```
sudo chown -R $(whoami) $(npm config get prefix)/{lib/node_modules,bin,share} 
```

现在您可以安全地全局安装任何模块。希望这可以帮助！

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-04-03T14:26:36.577

这就是我在 Windows 8.1 上解决问题的方法：

*   转到你的 nodejs 安装（通常是 C:\Program Files\nodejs）
*   右键单击 node_modules 文件夹并转到属性
*   单击安全选项卡和高级
*   在顶部您将看到“所有者：SYSTEM”，单击更改
*   输入您想要权限的用户，然后单击确定
*   选中高级设置底部的框“将所有子对象权限条目替换为此对象的可继承权限条目”，然后单击确定
*   做任何你需要的 npm 安装/更新

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2019-01-03T17:30:49.663

我通过将所有者从 root 更改为我的用户名来解决它

`sudo chown -R me:me /home/me/.config/configstore/`

用你的用户名和组改变我。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-02-03T22:12:42.210

我喜欢使用 ubuntu 组来实现这一点，而不是更改所有者。它很简单。

1.  首先使用 apt-get 安装 nodejs 和 npm

    `sudo apt-get update && sudo apt-get install nodejs npm`

2.  找出谁登录，即用户名，运行以下命令在终端中查看

    `whoami`

3.  您可以使用一个非常简单的命令查看您分配的组列表，通常第一个组是您的用户名本身

    `groups`

4.  运行以下以允许访问已登录的用户

    `sudo chmod 777 -R /usr/local && sudo chgrp $(whoami) -R /usr/local`

5.  更新 npm 和 nodejs

    `npm install -g npm`

你准备好了，你的用户可以在没有 sudo 的情况下运行 npm 命令

你也可以参考这个链接[https://askubuntu.com/a/1115373/687804](https://askubuntu.com/a/1115373/687804)

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2020-09-01T12:47:57.467

安装软件包时使用以下命令

```
 sudo npm install --unsafe-perm=true --allow-root 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2013-11-13T12:42:44.287

实际上，我也遇到了同样的问题。我正在运行 Ubuntu。我的问题出现是因为我丢失了 Ubuntu 的公钥。甚至没有更新我的系统。它给出了 GPG 错误。在这种情况下，您可以使用以下命令重新获得您的密钥：

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys <key in GPG error> 
```

之后 npm 工作正常！

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2015-03-11T00:34:43.100

John Papa 指出了这个问题背后的历史和推理，并给出[了一个可靠的解决方案](http://www.johnpapa.net/how-to-use-npm-global-without-sudo-on-osx/)：

约翰爸爸的步骤是：

1.  在没有 npm 的情况下使用 brew 安装节点
2.  更新你的 .bash_profile/.bashrc 让 npm 和 node 知道在哪里安装和查找包
3.  使用 brew 更新节点和 npm 更新自身

希望这对好奇的人有所帮助！

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-03-14T04:02:18.580

@Yves M. 的回答与我的解决方案非常相似。这是我使用的命令，与他的略有不同。

```
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | bash 
```

然后查询最新版本：

```
nvm ls-remote 
```

然后安装最新版本：

```
nvm install YOUR_VERSION_HERE 
```

例子

```
nvm install v5.8.0 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-10-25T20:03:49.950

我在评论中尝试了所有内容，但没有任何成功，但以下命令为我带来了魔力：

```
hash -r 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2015-08-12T14:59:43.437

这是我使用和工作的解决方案。我尝试利用`whoami`从未奏效。

`sudo chown -R $USER /usr/local/lib/node_modules`

然后

`sudo chown -R $USER /usr/local/bin/npm`

然后

`sudo chown -R $USER /usr/local/bin/node`

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2015-02-24T18:47:34.383

我发现如果你只是`sudo -s`“它只是启动一个具有 root 权限的 shell 作为一个步骤”，它真的对我有用。我不知道这是否是一个好习惯。

我希望它有所帮助。

参考：[https ://apple.stackexchange.com/posts/14423/revisions](https://apple.stackexchange.com/posts/14423/revisions)

* * *

## 回答 #36

> 赞同：-3
> 
> 时间：2014-09-23T18:42:38.523

我将我的用户帐户设置为 /usr/local 目录的所有者，这样就可以在那里发出正常的命令。

`sudo chown -R $USER /usr/local`

参考：[http ://howtonode.org/introduction-to-npm](http://howtonode.org/introduction-to-npm)

* * *

## 回答 #37

> 赞同：-4
> 
> 时间：2014-10-17T11:26:21.203

以上都不是必须的。

我遇到的问题是我在运行 NPM 时使用了 -g。我无法弄清楚我是如何没有在我的项目中创建一个“npm_module”文件夹的。

解决方案是运行 'NPM init' 这将创建一个 'package.json' 和 'npm_module' 文件夹，所有后续模块都将加载到该文件夹​​中。运行 npm 时不要使用 -g 使用 -s 来更新您的“package.json”文件。

[这是一个很好的视频解释](https://egghead.io/lessons/nodejs-npm-init)

* * *

## 回答 #38

> 赞同：-7
> 
> 时间：2013-07-15T16:58:34.950

```
sudo chown -R `whoami` /usr/local/lib 
```

# database - 给定关系代数计算块读取的数量

> ID：16151022
> 
> 赞同：1
> 
> 时间：2013-04-22T15:35:41.163
> 
> 标签：database, database-design, relational-algebra

所以我刚刚开始学习数据库中的查询处理等，我遇到了一些麻烦。我真的不明白如何计算给定关系和查询的最小块读取数，我猜你可以说。如果有人可以帮助我，将不胜感激。这是我正在处理的一个示例：

*   R1(A,B,C) A 是主键，C 是 R2.C 的外键
*   R2(C,D,E) C是主键
*   R1 有 20,000 条记录，每个块有 200 条记录。A 上有一个主 B+-tree 索引，高度 h = 3
*   R2 有 45,000 条记录，每个块有 4,500 条记录。在 C 上有一个高度 hC = 3 的主 B+-tree 索引，在 D 上有一个高度 hD = 2 的二级 B+-tree 索引。

找到每个语句的最小块读取数。我一次只能为每个关系保留一块内存。

*   其中 B=1(R1)
*   其中 C=1(R2)

我不是在寻找答案。我正在寻找有关如何实际执行此操作的解释并一路指导我。又名方程式等。在网上很难找到任何有益的东西。

谢谢你。

# java - 如何使用 AS400 (JT400) 客户端访问软件显示活动作业？

> ID：16151026
> 
> 赞同：2
> 
> 时间：2013-04-22T15:35:57.733
> 
> 标签：java, ibm-midrange, jt400

我想开发as400客户端访问软件。我想监控磁盘空间、cpu 使用率等。还有作业列表。我得到了工作清单。但我只想获得积极的工作。请帮我。

这是我的工作清单代码：

```
try {
    AS400 system = new AS400 ("SERVER","USER", "PASS");
    JobList jobList = new JobList(system);
    Enumeration list = jobList.getJobs();
    while (list.hasMoreElements())  {
         Job  j= (Job) list.nextElement();
         String GCPU = Integer.toString(j.getCPUUsed());
         System.out.println("Name " + j.getName() + " | Job NO : " + j.getNumber() + " | User : " + j.getUser() + " | CPU USED : " + j.getCPUUsed());
      // System.out.println("Date Entered : " + j.getDate() + " | Status : " + j.getStatus() + " | Type : " + j.getType());

    }
} catch (Exception e) {
         System.out.println(e);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:47:04.433

```
 JobList jobList = new JobList(system);
 jobList.addJobSelectionCriteria(JobList.SELECTION_PRIMARY_JOB_STATUS_ACTIVE, Boolean.TRUE);
 jobList.addJobSelectionCriteria(JobList.SELECTION_PRIMARY_JOB_STATUS_JOBQ, Boolean.FALSE);
 jobList.addJobSelectionCriteria(JobList.SELECTION_PRIMARY_JOB_STATUS_OUTQ, Boolean.FALSE);
 Enumeration jobs = jobList.getJobs(); 
```

即使此 JobList 已关闭并重新使用，作业选择标准列表也会在内部维护。要使用一组新的工作选择标准重新开始，请调用 clearJobSelectionCriteria()。

有关更多详细信息，请参阅[Javadoc](http://javadoc.midrange.com/jtopen/com/ibm/as400/access/JobList.html)。

# c - 如何将 execle 与像 execvpe 这样的 va_list 一起使用？

> ID：16151027
> 
> 赞同：0
> 
> 时间：2013-04-22T15:36:01.633
> 
> 标签：c, exec

我使用的glibc版本没有这个`execvpe`功能。但是，我需要那个确切的功能来完成我想要做的事情。用户将传入一个参数列表，该列表是他们的 linux 命令供我运行（及其参数列表）。这是它的样子：

**foo.c**

```
int main(int argc, char *argv[], char *envp[])
{
    char * newenvp[] = ...;
    execvpe(argv[1], &argv[1], newenvp);
} 
```

**示例用法**

```
foo echo -e "Hello World.\n" 
```

有没有替代的解决`execvpe`方法`execle`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:50:56.813

我相信我已经解决了我自己的问题。使用的解决方法`execvpe`是使用`setenv`后跟`execvp`. 我相信功能是一样的：

```
int main(int argc, char *argv[], char *envp[])
{
    setenv("MYVAR", "MYVALUE", 1);
    /* More calls to setenv can be used if needed. */
    execvp(argv[1], &argv[1]);
} 
```

# sharepoint - ServerException 未处理

> ID：16151028
> 
> 赞同：0
> 
> 时间：2013-04-22T15:36:01.407
> 
> 标签：sharepoint, caml

收到此错误：ServerException 未处理，当我修复查询时，我在 SharePoint 上对其进行筛选时没有得到确切的结果。

```
<View>
<Query>
<Where>
<And>
<And>
<Or>
<Or>
<Or>
<Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Completed</Value></Eq>
<Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Not yet submitted</Value></Eq>
</Or>
<Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Completed</Value></Eq>
</Or>
<Eq><FieldRef Name='Approval_x0020_Month' /><Value Type='Text'>" + approvalmonth + "</Value></Eq>
</Or>
</And>
<Eq><FieldRef Name='PG_x0020_ID_x003a_Service_x0020_' /><Value Type='Lookup'>RPCS</Value></Eq>
<Eq><FieldRef Name='PG_x0020_ID_x003a_Service_x0020_' /><Value Type='Lookup'>PLM</Value></Eq>
</And>
</Where>
<OrderBy><FieldRef Name='BM_x0020_Status' Ascending='True' /></OrderBy>
</Query>
</View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:54:53.657

你错过了一个 And 标签。

应该是这样的：

```
<View>
<Query>
<Where>
    <And>
        <And>
            <And>
                <Or>
                    <Or>
                        <Or>
                        <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Completed</Value></Eq>
                        <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Not yet submitted</Value></Eq>
                        </Or>
                        <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Completed</Value></Eq>
                    </Or>
                    <Eq><FieldRef Name='Approval_x0020_Month' /><Value Type='Text'>" + approvalmonth + "</Value></Eq>
                </Or>
            </And>
            <Eq><FieldRef Name='PG_x0020_ID_x003a_Service_x0020_' /><Value Type='Lookup'>RPCS</Value></Eq>
        </And>
        <Eq><FieldRef Name='PG_x0020_ID_x003a_Service_x0020_' /><Value Type='Lookup'>PLM</Value></Eq>
    </And>
</Where>
<OrderBy><FieldRef Name='BM_x0020_Status' Ascending='True' /></OrderBy>
</Query>
</View> 
```

# mysql - mysql循环查询只返回一条记录

> ID：16151030
> 
> 赞同：4
> 
> 时间：2013-04-22T15:36:01.990
> 
> 标签：mysql

我正在使用 mysql 循环概念并使我的查询执行多次，期望多行的结果..

我的查询是：

```
DELIMITER $$    

CREATE FUNCTION getActiveLife(endTime INT) RETURNS INT
BEGIN
    DECLARE x INT;
    DECLARE y INT;
    DECLARE c1 INT;
    SET x = endTime;
    SET y = 4;
    sloop:LOOP
       SELECT count(*) INTO c1 FROM `accounts` where (`life` != 'EXPIRED') and (`lifeEnd` <= x );
       IF y > 0 THEN
          SET x = x-3600;
          SET y = y - 1;
       ELSE
           LEAVE sloop;
       END IF;  
    END LOOP;
    RETURN c1;
END  $$
DELIMITER ; 
```

我实际上正在尝试从现在到最后 4 小时获得结果....它已成功执行但是当我如下调用它时

```
SELECT getActiveLife(1368193391)... 
```

它给了我一个值为 1 的记录...不知道那是什么意思....

因为当我执行

```
SELECT count(*) INTO c1 FROM `accounts` where (`life` != 'EXPIRED') and (`lifeEnd` <= 1368193391 ); 
```

它让我数为 4...

所以我期待像 4 for loop1 ，2 for loop2 等等的表格格式。

如果我出错或遗漏了什么，请纠正我....

我期待类似的东西：

```
 Result:
    4  - row1
    2  - row2
    1  - row3 
```

以任何形式

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:44:07.583

您的函数只返回一个值 ( `return c1`)。它正在返回循环中的最后一个值。

在 MySQL 中，函数不返回表。如果你想要四行，那么你需要执行一个查询。或者，您可以将所有值连接成一个字符串，然后返回。你想让这个功能做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:54:51.580

我相信这个查询会做你正在寻找的东西：

```
SELECT
  SUM(1) AS `endtime_count`,
  SUM(IF(`lifeEnd` <= (? - (1 * 3600)), 1, 0)) AS `endtime_minus_1hour_count`,
  SUM(IF(`lifeEnd` <= (? - (2 * 3600)), 1, 0)) AS `endtime_minus_2hour_count`,
  SUM(IF(`lifeEnd` <= (? - (3 * 3600)), 1, 0)) AS `endtime_minus_3hour_count`,
  SUM(IF(`lifeEnd` <= (? - (4 * 3600)), 1, 0)) AS `endtime_minus_4hour_count`
FROM `accounts`
WHERE
  `life` <> 'EXPIRED'
  AND `lifeEnd` <= ? 
```

在这里，我们只是使用`IF`语句来总结您要查找的计数。请注意，它`?`代表您要查询的结束时间值。

这将返回包含所有值的单行。

# rss - cakephp 2.0 中的 Rss 解析

> ID：16151031
> 
> 赞同：0
> 
> 时间：2013-04-22T15:36:02.303
> 
> 标签：rss, cakephp-2.0

我已经按照文档[http://book.cakephp.org/2.0/fr/core-libraries/helpers/rss.html](http://book.cakephp.org/2.0/fr/core-libraries/helpers/rss.html)但我无法让它工作我有以下错误

```
Missing Method in PostsController
Error: The action index.rss is not defined in controller PostsController
Error: Create PostsController::index.rss() in file: app\Controller\PostsController.php. 
```

# xml - xQuery 中的 If 或 Where 子句

> ID：16151036
> 
> 赞同：1
> 
> 时间：2013-04-22T15:36:13.197
> 
> 标签：xml, xquery

我对 xQuery 很陌生，我必须编写查询来执行以下操作；

> 查找在同一年至少撰写过一本书和一篇文章的所有作者

我写了以下 using`IF-Then-Else`子句；

```
for $a in doc("myDB.xml")/myDB
return if ($a/book//last_name/text() = $a/article//last_name/text() 
and $a/book/year = $a/article/year)
then $a//author
else() 
```

并带有`Where`条款。

```
for $a in doc("myDB.xml")/myDB
where $a/book//last_name/text() = $a/article//last_name/text() 
and $a/book/year = $a/article/year
return $a//author 
```

两种方法都返回所有作者。

XML 是；

```
<myDB>
    <book>
        <title>ebXML : Concepts and Application</title>
        <author>
            <last_name>Gibb</last_name>
            <first_name>Brian</first_name>
        </author>
        <year>2003</year>
        <publisher>Wiley</publisher>
    </book>

    <article>
        <title>test title</title>
        <author>
            <last_name>Gibb</last_name>
            <first_name>Brian</first_name>
        </author>
        <year>2003</year>
        <publisher>test Wiley</publisher>
    </article>

    <book>
        <title>XML: Visual QuickStart Guide</title>
        <author>
            <last_name>Goldberg</last_name>
            <first_name>Kevin</first_name>
        </author>
        <author>
            <last_name>Doe</last_name>
            <first_name>John</first_name>
        </author>

        <year>2008</year>
        <publisher>Peachpit Press</publisher>
    </book>
    <book>
        <title>Beginning XML</title>
        <author>
            <last_name>Hunter</last_name>
            <first_name>David</first_name>
        </author>
        <year>2007</year>
        <publisher>Wrox</publisher>
    </book>
    <book>
        <title>Learning XML </title>
        <author>
            <last_name>Ray</last_name>
            <first_name>Erik</first_name>
        </author>
        <author>
            <last_name>Smith</last_name>
            <first_name>David</first_name>
        </author>
        <year>2003</year>
        <publisher>O'Reilly</publisher>
    </book>
    <book>
        <title>Professional XML</title>
        <author>
            <last_name>Evjen</last_name>
            <first_name>Bill</first_name>
        </author>
        <year>2007</year>
        <publisher>Wrox</publisher>
    </book>
    <article>
        <title>FileNet Integrates a New XML Editor for Non-Techies</title>
        <author>
            <last_name>Roe</last_name>
            <first_name>David</first_name>
        </author>
        <journal>CMS Wire</journal>
        <year>2009</year>
    </article>
    <article>
        <title>The Groundbreaking Potential of Codeless Ajax</title>
        <author>
            <last_name>Dusoe</last_name>
            <first_name>Jim</first_name>
        </author>
        <journal>Tech News World</journal>
        <year>2009</year>
        <pages>4</pages>
    </article>
    <article>
        <title>Windows and .NET Watch: Recognizing DSL opportunities</title>
        <author>
            <last_name>O'Brien</last_name>
            <first_name>Larry</first_name>
        </author>
        <journal>Software Development Times</journal>
        <year>2009</year>
    </article>
    <article>
        <title>An embedded XML Database: Oracle Berkeley DB XML</title>
        <author>
            <last_name>Gibb</last_name>
            <first_name>Brian</first_name>
        </author>
        <journal>The Register</journal>
        <year>2003</year>
        <pages>8</pages>
    </article>
    <article>
        <title>Open Source PostgreSQL 8.3 Better Suited For Web Applications </title>
        <author>
            <last_name>Babcock</last_name>
            <first_name>Charles</first_name>
        </author>
        <journal>Information Week</journal>
        <year>2008</year>
        <pages>1</pages>
    </article>
</myDB> 
```

我没有得到在同一年至少写了一本书和一篇文章的作者，而是得到所有作者的名单。我知道查询中存在逻辑错误，因为我不是 xQuery 专家。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:54:28.087

问题在于 XPath 语句的行为方式与您在查询中所期望的方式不同。它们只是选择 XML 序列 - 所以当您比较它们时，如果左侧的任何值与右侧的任何值匹配，它将返回 true。因为每次比较都返回 true，所以它总是在文档中返回`$a//author`, every 。`author`

我想你想要：

```
for $b in doc("myDB.xml")/myDB/book
let $articles:= doc("myDB.xml")/myDB/article[year=$b/year]
where ($b/author = $articles/author)
return $b/author 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:53:11.560

`for`必须在迭代项上使用，但 myDB 只出现一次。

以下查询的作用是获取所有作者的姓名，并检查他们是否有一篇与他们创作的书同年的文章。

```
let $doc := doc("myDB.xml")/myDB
for $author in distinct-values($doc/*/author)
where $doc/article[author = $author][year = $doc/book[author = $author]/year]
return $author 
```

# ios - 从 iOS 设备分段上传时 AWS IOS 开发工具包的内存问题

> ID：16151037
> 
> 赞同：0
> 
> 时间：2013-04-22T15:36:15.120
> 
> 标签：ios, objective-c, amazon-web-services, amazon-s3

我正在使用`S3UploadPartRequest`从 iOS 设备将视频上传到 S3。我将使用异步多部分请求上传大小为 3-70 MB 的视频。

我正在设置`S3UploadPartRequest`上传的数据。但它确实有很多内存影响。

1.  我面临的主要问题是我设置的 5MB 数据对象`S3UploadPartRequest`没有正确释放。（响应完成后很久才发布）。

2.  是否以正确的方式设置数据，因为如果我要并行上传 3 个部分，则 15 MB 将驻留在内存中。

目前我正在使用 SDK 1.4.6。同样的问题似乎也发生在 1.5.0 上。

**这就是我上传的方式：**

我有一个 NSOperation 子类，我将从 start 方法启动以下代码

```
// Uploading process will be initiated from the Mainthread
S3UploadPartRequest* upReq = [[S3UploadPartRequest alloc] initWithMultipartUpload:self.s3MultipartUpload];
upReq.partNumber = self.partNumber;

NSData *the_dataToUpload1; // This data will be read from file using a file handle

_partData  = [[NSData alloc] initWithData:the_dataToUpload1];
NSInputStream *stream = [NSInputStream inputStreamWithData:self.partData ];

[self.fileHandle closeFile];

upReq.contentLength = self.partData.length;
//upReq.data = the_dataToUpload;
upReq.stream  =stream;

upReq.contentType = self.client.contentType;
upReq.delegate = self;

self.partUploadReq = upReq;
[[[S3UploadManager sharedS3Uploader] s3Client] uploadPart:self.partUploadReq];
connection = upReq.urlConnection;
[upReq release]; 
```

请指教。

这是我的 dealloc 的样子。

```
self.partData = nil;
self.fileHandle = nil;
self.partUploadReq.stream = nil;
self.partUploadReq = nil; 
```

# django - 如果他们没有权限，则在 django 管理员中隐藏操作

> ID：16151041
> 
> 赞同：3
> 
> 时间：2013-04-22T15:36:22.247
> 
> 标签：django, django-admin

我在我的管理页面中添加了一个操作，允许用户将选定的记录导出到 Excel 工作表。现在我需要能够只允许一些用户能够导出数据。我有一个`UserProfile`具有`can_export`布尔字段的模型。

仅当`can_export`字段设置为 True 时，如何仅在 django admin 中显示“导出到 Excel”操作？

我试图在 admin.py 中找到一种方法来获取请求对象并在设置操作之前执行 IF 语句，但没有运气。我当然得到一个 name'request' is not defined 错误。

```
if request.user.get_profile().can_export:
    actions = [export_data()] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T18:01:29.317

来自 FineManual ( [https://docs.djangoproject.com/en/1.5/ref/contrib/admin/actions/](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/actions/) )：

```
 class MyModelAdmin(admin.ModelAdmin):
        ...

        def get_actions(self, request):
            actions = super(MyModelAdmin, self).get_actions(request)
            if request.user.username[0].upper() != 'J':
                if 'delete_selected' in actions:
                    del actions['delete_selected']
            return actions 
```

# c# - 当涉及锁时，代码合同会警告“确保未经证实”

> ID：16151048
> 
> 赞同：7
> 
> 时间：2013-04-22T15:36:39.977
> 
> 标签：c#, .net, code-contracts

我正在尝试`lock`使用以下示例来确定 .NET 代码合同如何与关键字交互：

```
public class TestClass
{
  private object o1 = new object();
  private object o2 = new object();

  private void Test()
  {
    Contract.Requires(this.o1 != null);
    Contract.Requires(this.o2 != null);
    Contract.Ensures(this.o1 != null);

    lock (this.o2) {
      this.o1 = new object();
    }
  }
} 
```

当我运行 Code Contract 静态分析工具时，它会打印一条警告：`Ensures unproven: this.o1 != null`

如果我这样做：

*   更改为, `o2`_`lock``o1`
*   将块`o1`内部更改为,`lock``o2`
*   `lock`在块内添加第二行，将 a 分配`new` `object`给`o2`
*   更改`lock (this.o2)`为`if (this.o2 != null)`,
*   完全删除该`lock`语句。

警告消失。

但是，将`lock`块内的行更改为`var temp = new object();`（从而`o1`从方法中删除所有引用）仍然会导致警告：

```
private void Test()
  {
    Contract.Requires(this.o1 != null);
    Contract.Requires(this.o2 != null);
    Contract.Ensures(this.o1 != null);

    lock (this.o2) {
      var temp = new object();
    }
  } 
```

* * *

所以有两个问题：

1.  为什么会出现此警告？
2.  可以做些什么来防止它（记住这是一个玩具示例，`lock`实际代码中实际上发生了一些事情）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:31:57.170

下面是静态检查器如何处理锁和不变量：

如果您使用 lock(x.foo) { ... } 形式锁定某些内容，静态检查器会将 x.foo 视为 x 的保护锁。在锁定范围的末尾，它假定其他线程可能访问 x 并对其进行修改。结果，静态检查器假定 x 的所有字段只满足锁定范围后的对象不变量，仅此而已。

请注意，这并没有考虑所有线程交错，只是在锁定范围末尾的交错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:06:55.323

将以下代码添加到您的类中：

```
 [ContractInvariantMethod]
    private void ObjectInvariants()
    {
        Contract.Invariant(o1 != null);
    } 
```

我无法告诉你为什么，但在这种情况下，静态验证器似乎确实考虑了私有字段分配并且缺少修改它的方法作为该字段不会被修改的充分证据。这可能是验证程序中的错误？可能值得在[Code Contracts 论坛](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/threads)上报告。

# javascript - 使用 JQuery 处理表单上传成功到 Django 应用程序

> ID：16151050
> 
> 赞同：0
> 
> 时间：2013-04-22T15:36:47.960
> 
> 标签：javascript, jquery, python, django, post

如何使用 JQuery 向 Django 应用程序提交表单、上传文件，以便捕获“成功”处理程序？

我可以使用常规表单提交上传我的 Django 应用程序的文件，但是在 POST 完成后（自然）我被重定向到一个新文件。

用于生成页面的 Django`views.py`片段是：

```
def adminImportView(request):
    """
    """
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid():
            handle_file(request.FILES['file'])
            return HttpResponseRedirect(reverse('lobbyVisitorLog.view.adminView'))
    else:
        form = UploadFileForm()

    return render(request, 'utils/importDatabase.html', {'form': form}); 
```

其中，当没有提交表单时，会生成一个表单块：

```
<form id="dbImportForm" action="/visitorLog/admin/import/" enctype="multipart/form-data" method="post">
  {% csrf_token %}
  <div class="row">
    <div class="span7">
      <span class="btn btn-success fileinput-button">
        <i class="icon-plus"></i>
        <span>Browse...</span>
        {{ form.file }}
      </span>

      <button type="submit" class="btn btn-primary start" id="buttonImport">
        <i class="icon-upload"></i>
        <span>Start Import</span>
      </button>
    </div>
  </div>
</form> 
```

但是，我会避免在该过程完成后加载新页面。如果我将其更改`button`为一个简单的链接并使用 JQuery 将其连接起来，我的表单验证将失败。我对 Javascript 块的最新尝试是：

```
$('#buttonImport').click(function()
{
  if ($('#id_file').val() == '')
  {
    alert("empty file, can't submit!");
    return false;
  }

  $.post(
    '/visitorLog/admin/import/',
    $('#dbImportForm').serialize(),
    function(data)
    {
      alert("all done!");
    },
    "json"
  );
}) 
```

如何调整我的 JQuery POST 调用以正确验证服务器端的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:53:20.183

使用[jQuery 表单插件](http://malsup.com/jquery/form/#ajaxSubmit)。

它支持 AJAX 文件上传。

没有表单插件的另一个解决方案是[如何在 jQuery 中发送带有 Ajax 请求的 FormData 对象？](https://stackoverflow.com/questions/6974684/how-to-send-formdata-objects-with-ajax-requests-in-jquery)但在浏览器中的支持有限。

# extjs4.1 - 如何在 beforecheckchange 事件中获取当前行数据

> ID：16151058
> 
> 赞同：0
> 
> 时间：2013-04-22T15:36:59.713
> 
> 标签：extjs4.1

我有一个包含几列、ajax 存储等的网格......还有一个自定义复选框列：

```
{
        xtype: 'checkcolumn',
        dataIndex:'checkData',
        header: 'Column with checkbox',                                
        listeners:{
            beforecheckchange:function(mthis,rowIndex,checked,eOpts){
                //here I'd like to check something like this:
                //if(currentRowData.OtherColumn == 1){
                //    return true;
                //}else{
                //    return false;
                //}                     
            }
        },
        editor: {                    
            xtype: 'checkbox',
            cls: 'x-grid-checkheader-editor'
        }
    } 
```

如何在此事件中获取当前行数据？我试过： grid.getSelectionModel().getSelection() 但它是未定义的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:54:08.627

我认为您可能会将其与 CheckBoxModel 选择器混淆： [http ://docs.sencha.com/extjs/4.1.3/#!/api/Ext.selection.CheckboxModel](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.selection.CheckboxModel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:40:53.963

我不得不使用这种结构：

```
rowData = gridStore.getAt(rowIndex).getData(); 
```

或者

```
rowData = gridStore.getAt(rowIndex).data; 
```

（最好的变种是什么？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T16:23:20.823

尝试：

```
beforecheckchange : function(mthis,rowIndex,checked,eOpts){
var rec = your_grid.getStore().getAt(rowIndex);
if(rec.get('OtherColumn') == 1){
    return true;
}else{
    return false;
}                     
} 
```

# c# - XAML 属性如何绑定到 INotifyPropertyChanged 对象

> ID：16151059
> 
> 赞同：1
> 
> 时间：2013-04-22T15:37:01.257
> 
> 标签：c#, silverlight, xaml

有一个实现 INotifyPropertyChanged 接口的类，如下所示：

```
public class ColorNotify : INotifyPropertyChanged
{   
    public event PropertyChangedEventHandler PropertyChanged;

    private SolidColorBrush bindableColor;
    public SolidColorBrush BindableColor
    {
        get { return bindableColor; }
        set
        {
            bindableColor = value;
            OnPropertyChanged("BindableColor");
        }
    }  

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));   
        } 
    } 
} 
```

我的 MainPage.xaml.cs 中的字段之一是：

```
private ColorNotify DisabledColor; 
```

但我也尝试将上述字段作为属性，而不是像这样：

```
private ColorNotify disabledColor;
public ColorNotify DisabledColor
{
    get
    { return disabledColor; }
    set
    { disabledColor = value; }
} 
```

MainPage.xaml.cs 中还有这个方法：

```
private void Legend_Refreshed(object sender, Legend.RefreshedEventArgs Lgd_Refreshed_EvArgs)
{
    LayerItemViewModel layerItmViewMdl;
    ObservableCollection<LayerItemViewModel> layerItms;

    layerItmViewMdl = Lgd_Refreshed_EvArgs.LayerItem;
    Layer legendItemLyr = layerItmViewMdl.Layer; 

    if (!legendItemLyr.IsInitialized)
    { 
        DisabledColor = new ColorNotify();
        DisabledColor.BindableColor = new SolidColorBrush(Colors.Red);
    }
    ...
    ...
} 
```

在 MainPage.xaml 我有这个：

```
<esri:Legend 
        Map="{Binding ElementName=theMap}"
        LayerIDs="..." 
        Refreshed="Legend_Refreshed">
               <esri:Legend.MapLayerTemplate>
                       <DataTemplate>
                              <StackPanel Orientation="Horizontal" Width="Auto">
                                        <CheckBox Content="{Binding Label}" 
                                            Width="Auto" 
                                            IsChecked="{Binding IsEnabled, Mode=TwoWay}"
                                IsEnabled="{Binding IsInScaleRange}" 
                                            Foreground="{Binding Source=DisabledColor, Path=BindableColor}">
                                        </CheckBox>
                                        <Slider Maximum="1"  
                                            Value="{Binding Layer.Opacity, Mode=TwoWay}" 
                                            Width="80" />
                              </StackPanel>
                       </DataTemplate>
...
...
...
</esri:Legend> 
```

注意上面的 XAML 代码：

```
Foreground="{Binding Source=DisabledColor, Path=BindableColor}"> 
```

那没有用。

然后我在 XAML 中尝试了这个：

```
Foreground="{Binding BindableColor}" 
```

但这也不起作用如何将 Foreground 绑定到 ColorNotify 类的 BindableColor 属性？绑定到 INotifyPropertyChanged 对象时，XAML 绑定应该是什么样子？（不通过 MVVM）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:55:51.417

**编辑**：基于下面的评论讨论，我认为你应该[`IValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)用这样的`Convert`方法创建一个：

```
return new SolidColorBrush((bool)value ? Colors.Black : Colors.Red); 
```

假设您的`IValueConverter`类名为`InitializedColorConverter`，在您添加为 xmlns 的命名空间中`local`。在 XAML 中像这样使用它：

```
<UserControl.Resources>
    <local:InitializedColorConverter x:Key="InitializedColorConverter" />
</UserControl.Resources>
...
Foreground="{Binding IsInitialized, Converter = {StaticResource InitializedColorConverter}}" 
```

**结束编辑。**我将把剩下的留在这里，因为它可能对有类似问题的人有用：

您需要将字段更改`MainPage`为公共属性：

```
public ColorNotify DisabledColor { get; private set; } 
```

如果您希望绑定在`DisabledColor`自身发生更改时更新，请同时实现`INotifyPropertyChanged`on `MainPage`（和此属性）。

获得正确值绑定的一种更简单的方法是以编程方式进行。为此，请`Loaded`在您的对象上放置一个处理程序：

```
<CheckBox Content="{Binding Label}" 
          Width="Auto" 
          IsChecked="{Binding IsEnabled, Mode=TwoWay}"
          IsEnabled="{Binding IsInScaleRange}" 
          Loaded="MyCheckBoxLoaded"> 
```

并让您的处理程序执行以下操作：

```
private void MyCheckBoxLoaded(object sender, System.Windows.RoutedEventArgs e)
{
    var cb = (CheckBox)sender;
    cb.SetBinding(Control.ForegroundProperty,
new System.Windows.Data.Binding("DisabledColor.Bindablecolor") { Source = this });
} 
```

它可能看起来令人费解的原因是`Source`需要成为您的`MainPage`，不幸的是，在 Silverlight 中，这并不像看起来那么容易。

如果您`DisabledColor`在页面的生命周期内永远不会更改，您可以将其保留为私有字段（标记它`readonly`以确保这是真的）并在处理程序中执行此操作：

```
cb.SetBinding(Control.ForegroundProperty,
new System.Windows.Data.Binding("Bindablecolor") { Source = this.DisabledColor }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:47:17.920

如果你改变/初始化

```
private ColorNotify DisabledColor; 
```

在 View/ViewModel 加载之后，您需要将此属性更改为 public 并在其上实现 INotifyPropertyChange，就像您在 ColorNotify 上所做的一样。

# php - UTF-8 给了我问号

> ID：16151061
> 
> 赞同：3
> 
> 时间：2013-04-22T15:37:15.990
> 
> 标签：php, mysql, utf-8, character-encoding, iso-8859-1

我有这个简单的 PHP 脚本，它搜索 mySQL 数据库并将结果输出给用户。我曾经`ISO-8859-1`用作我的字符集，但被建议使用`UTF-8`. 但是我很难从以前的字符集转到新的字符集。

为了澄清一些事情，我有：

*   创建了一个`UTF-8`用 collat​​ion编码的数据库和表`utf8_unicode_ci`。
*   将我的 PHP 文件编码为`UTF-8`.
*   将元字符集设置为`UTF-8`.
*   在 Lighty (Lighttpd) 中将所有文本设置`mime-types`为`UTF-8`直通。`create-mime.assign.pl`

`ö`现在，当我从数据库中检索带有等字符的数据时，问题就出现了`ü`。如果我只是不`echo "ö";`从数据库中检索它，它就可以正常工作。那我猜数据库肯定有问题？

我尝试了以下方法，他们解决了我的问题：

*   将元字符集设置为`ISO-8859-1`（由于某种奇怪的原因有效，但会破坏回显的“ö”）。
*   `utf8_decode()`围绕输出设置一个函数。
*   后`mysql_select_db()`声明如下`mysql_set_charset('utf8');`。

我知道我找到了多种解决方案，但我只是不知道为什么没有它们就行不通？`utf8_decode()`在输出或`mysql_set_charset()`函数上使用是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:43:35.097

MySQL 使用 UTF8 很有趣。您需要确保服务器以 UTF 运行并且连接也是如此

如果您可以修改服务器上的 my.cnf 文件，则可以将它们添加到 [mysqld] 部分并重新启动它

```
character-set-server = utf8
skip-character-set-client-handshake 
```

您可以选择（或也）使用

```
query("SET NAMES utf8"); 
```

在发送/检索数据以确保数据库期望传递 UTF8 数据之前

# xml - DocBook/XSL：docbook-xsl-ns 和 docbook-xsl 样式表的 Subversion/SVN URL 是什么？

> ID：16151067
> 
> 赞同：0
> 
> 时间：2013-04-22T15:37:44.403
> 
> 标签：xml, svn, xslt, docbook

请让我知道可以在此处找到的 docbook-xsl-ns 和 docbook-xsl 样式表的 Subversion/SVN URL 是什么：http: [//docbook.sourceforge.net/snapshot/](http://docbook.sourceforge.net/snapshot/)。我想做一个“svn checkout”/“svn co”命令并使用“svn update”/“svn up”更新它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:05:31.253

[http://snapshots.docbook.org/](http://snapshots.docbook.org/)托管从 DocBook Subversion 存储库中的源构建的快照版本（[http://docbook.sourceforge.net/snapshot/](http://docbook.sourceforge.net/snapshot/)位置已过时）。

存储库的根位于[https://docbook.svn.sourceforge.net/svnroot/docbook](https://docbook.svn.sourceforge.net/svnroot/docbook)。你可以从那里检查任何你想要的东西。样式表开发的核心源模块是“xsl”。要检查它（主干分支），请执行

```
svn co https://docbook.svn.sourceforge.net/svnroot/docbook/trunk/xsl 
```

您可以自己构建 docbook-xsl/docbook-xsl-ns。这需要一些准备。有关更多信息，请参阅：

*   [http://wiki.docbook.org/DocBookXslBuild](http://wiki.docbook.org/DocBookXslBuild)
*   [https://docbook.svn.sourceforge.net/svnroot/docbook/trunk/xsl/README.BUILD](https://docbook.svn.sourceforge.net/svnroot/docbook/trunk/xsl/README.BUILD)。

# git - 我不能使用 git 推送我的源代码，它说“Permission denied (publickey)”。

> ID：16151068
> 
> 赞同：0
> 
> 时间：2013-04-22T15:37:45.287
> 
> 标签：git, ssh, public-key

我已经创建了一个存储库。我在本地计算机上运行这些命令：

```
$ git init
$ touch README
$ git add README
$ git commit -m "first commit"
$ git remote add origin git@github.com/xxxxx/DataStore.git 
```

一切都在按应有的方式工作。但是，当我尝试推送我的来源时，它引起了一些问题。$ git push origin master 这里弹出密码输入对话框。它说：“输入密码以解锁私钥。应用程序想要访问私钥'XXX@gmail.com'，但它被锁定了。”。而且我尝试了每个密码，它无法工作。如果我关闭这个烦人的对话框，它会说：“权限被拒绝（公钥）。”

我关注这个网站：[https](https://help.github.com/articles/error-permission-denied-publickey) ://help.github.com/articles/error-permission-denied-publickey $ ssh-add -l 代理没有身份。

我的错误是什么？我搜索了很多信息，但很少有人谈论这个。请帮帮我，我现在快疯了~~！ [让我输入密码的对话框](http://i.stack.imgur.com/GBYHx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:07:59.027

您必须先生成[一个 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)，然后才能使用它。

# c++ - win32 api更新进度条为方法

> ID：16151069
> 
> 赞同：1
> 
> 时间：2013-04-22T15:37:53.050
> 
> 标签：c++, api, winapi, progress-bar

我有一个方法负责将 immes 从内存保存到硬盘驱动器，最后将返回一个布尔值。现在我创建了一个进度条。但我真的不知道如何将进度条连接到此方法，只要该方法保存进度并显示蓝条。这是我的代码：

```
switch(_formatIndex){                   
        case 0:

            save.saveImages(_MatVector,0, path);

            int pb_pos;pb_pos= SendMessage(_progressBar, PBM_GETPOS, 0, 0); 
            while(pb_pos<100){
                SendMessage(_progressBar, PBM_SETPOS, pb_pos, 0);
                pb_pos++;
            }
            break;
        case 1:
            save.saveImages(_MatVector,1, path);                                                
            break;
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T22:11:33.863

您需要知道保存了多少文件，然后在保存每个文件后递增进度条，而不是一次全部保存。例如：

```
SendMessage(_progressBar, PBM_SETRANGE32, 0, NumberOfFiles); 
SendMessage(_progressBar, PBM_SETSTEP, 1, 0); 
SendMessage(_progressBar, PBM_SETPOS, 0, 0); 

for (int i = 0; i < NumberOfFiles; ++i)
{
    ...
    save.saveImages(_MatVector, _formatIndex, path);
    SendMessage(_progressBar, PBM_STEPIT, 0, 0); 
    ...
} 
```

或者：

```
SendMessage(_progressBar, PBM_SETRANGE, 0, 100); 
SendMessage(_progressBar, PBM_SETPOS, 0, 0); 

for (int i = 0; i < NumberOfFiles; ++i)
{
    ...
    save.saveImages(_MatVector, _formatIndex, path);
    SendMessage(_progressBar, PBM_SETPOS, (i * 100) / NumberOfFiles, 0); 
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-31T06:51:52.840

```
SendMessage(GetDlgItem(hAutoParent,IDC_PROGRESS1),PBM_SETRANGE,0, MAKELPARAM(0,10 ));
    SendMessage(GetDlgItem(hAutoParent,IDC_PROGRESS1),PBM_SETBARCOLOR,0,(LPARAM)colorResult3);
    SendMessage(GetDlgItem(hAutoParent,IDC_PROGRESS1),PBM_SETBKCOLOR,0,(LPARAM)colorResult2);
    SendMessage(GetDlgItem(hAutoParent,IDC_PROGRESS1),PBM_SETPOS,0,0);

int iProgressPosition=0;//Intially global variable

SendMessage(GetDlgItem(hAutoParent,IDC_PROGRESS1),PBM_SETPOS, iProgessPosition,0);
//incremented global varibale in loop is equal to 10(setrange 10)
iProgressPosition++; 
```

# javascript - 从 select 中获取变量值并将其传递给另一个 JS 文件

> ID：16151070
> 
> 赞同：2
> 
> 时间：2013-04-22T15:37:54.550
> 
> 标签：javascript, jquery

我遇到了从 select 中获取值并将其放在 var 上的问题。

HTML

```
<select id="customer_select"" name="customer_select" class="select" onchange="findcustid(this.value)" >'; 
```

JS

```
function findcustid() {
    var cus = document.getElementById('customer_select');
    var customer_select = cus.options[cus.selectedIndex].value;
}
var customer_id = customer_select; 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:41:54.990

您的 customer_select 变量在其范围内是本地的，在函数之外将不可用。

```
var customer_id;
function findcustid() {
    var cus = document.getElementById('customer_select');
    customer_id = document.getElementById('customer_select').value;
} 
```

如果不使用全局 cutomer_id 变量，另一种方法是在当前`window`实例中设置它：-

```
function findcustid() {
    var cus = document.getElementById('customer_select');
    window.customer_id = document.getElementById('customer_select').value;
} 
```

现在您可以访问`window.customer_id`在当前窗口范围内定义的任何函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:39:20.183

您选择 HTML has to many"，首先更改为：

```
<select id="customer_select" name="customer_select" class="select" onchange="findcustid(this.value)" > 
```

此外，您在设置 customer_id 之前关闭了该功能，更改为

```
function findcustid() {
    var cus = document.getElementById('customer_select');
    var customer_select = cus.options[cus.selectedIndex].value;
    var customer_id = customer_select;
    alert(customer_id);
} 
```

功能关闭后无法设置该项目。因为该函数尚未调用，但代码已执行。所以最后用你的代码，`customer_id`将是`undefined`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:10:39.770

首先 Niels 是正确的，您在对变量执行任何操作之前关闭了函数。两种可能的解决方案。

另外，我对“传递给另一个 JS 文件”的意思有点困惑……如果不将其设置为 url 或表单变量并转到该页面，就无法将其传递给另一个页面。

或 .. 如果 js 包含在同一页面上，只需在从任何其他包含的函数调用它之前声明此函数：

```
<script src="../customerFuncs.js"></script> 
<script src="../useCustomerFuncs.js"></script> 
```

1.  如果您在其他地方需要 customer_id，请将其设置为函数的返回值并从另一个函数调用该函数，ala：

    ```
    function  findcustid(){
        var cus = document.getElementById('customer_select');
        var customer_select = cus.options[cus.selectedIndex].value;
        var customer_id = customer_select;
        return customer_id;
    }

    function getId(){
        customer_id = findcustid();
    } 
    ```

2.  您可以使其成为任何函数都可以访问的全局变量。你可以通过在任何函数范围之外声明它来做到这一点。这种方法真的很不受欢迎，因为它通常不是必需的。

    ```
    gCustomer_Id = '';

    function  findcustid(){ 
        ... 
        gCustomer_Id = customer_select;
    } 
    ```

# jquery - 从移动设备查看具有响应式设计的页面时如何更改 jQuery 参数？

> ID：16151072
> 
> 赞同：0
> 
> 时间：2013-04-22T15:38:05.797
> 
> 标签：jquery, responsive-design, galleriffic

我正在使用 Galleriffic Galley 插件 ( [http://www.twospy.com/galleriffic/](http://www.twospy.com/galleriffic/) ) 在我的网站中显示幻灯片。

很多参数都在 JQuery 中定义。由于我的网站是响应式的，我想更改其中一些参数，以便页面在移动设备上显示不同。

在我的页面底部，我有以下代码，我想将“numThumbs”从 18 更改为 6。

我将通过什么方式实现这一目标？

泰！

```
<script type="text/javascript">
    jQuery(document).ready(function($) {
        // We only want these styles applied when javascript is enabled
        $('div.navigation').css({'width' : '100%', 'float' : 'left'});
        $('div.content').css('display' , 'block');

        // Initially set opacity on thumbs and add
        // additional styling for hover effect on thumbs
        var onMouseOutOpacity = 0.67;
        $('#thumbs ul.thumbs li').opacityrollover({
            mouseOutOpacity:   onMouseOutOpacity,
            mouseOverOpacity:  1.0,
            fadeSpeed:         'fast',
            exemptionSelector: '.selected'
        });

        // Initialize Advanced Galleriffic Gallery
        var gallery = $('#thumbs').galleriffic({
            delay:                     2500,
            numThumbs:                 18,
            preloadAhead:              10,
            enableTopPager:            true,
            enableBottomPager:         true,
            maxPagesToShow:            7,
            imageContainerSel:         '#slideshow',
            controlsContainerSel:      '#controls',
            captionContainerSel:       '#caption',
            loadingContainerSel:       '#loading',
            renderSSControls:          true,
            renderNavControls:         true,
            playLinkText:              'Play Slideshow',
            pauseLinkText:             'Pause Slideshow',
            prevLinkText:              '&lsaquo; Prev',
            nextLinkText:              'Next &rsaquo;',
            nextPageLinkText:          'Next &rsaquo;',
            prevPageLinkText:          '&lsaquo; Prev',
            enableHistory:             false,
            autoStart:                 false,
            syncTransitions:           true,
            defaultTransitionDuration: 900,
            onSlideChange:             function(prevIndex, nextIndex) {
                // 'this' refers to the gallery, which is an extension of $('#thumbs')
                this.find('ul.thumbs').children()
                    .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                    .eq(nextIndex).fadeTo('fast', 1.0);
            },
            onPageTransitionOut:       function(callback) {
                this.fadeTo('fast', 0.0, callback);
            },
            onPageTransitionIn:        function() {
                this.fadeTo('fast', 1.0);
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:14:39.160

From [— 在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/what-is-the-best-way-to-detect-a-handheld-device-in-jquery)

你可以尝试这样的事情：

```
 var isMobile = false;

  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
    isMobile = true;
  }

  var gallery = $('#thumbs').galleriffic({
        delay:                     2500,
        numThumbs:                 isMobile ? 18 : 6,
        preloadAhead:              10..... 
```

# html - 如何返回原始 HTML（使用 Flask）

> ID：16151078
> 
> 赞同：6
> 
> 时间：2013-04-22T15:38:29.150
> 
> 标签：html, flask, jinja2, mailchimp

如何让 Flask 视图仅发布应用程序生成的原始 HTML（未渲染）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T15:41:29.843

尝试将响应的 mime 类型设置为`text/plain`using [`make_response`](http://flask.pocoo.org/docs/api/#flask.make_response)：

```
from flask import app, make_response, render_template

app = Flask(__name__)

@app.route('/')
def index():
    resp = make_response(render_template('template.html'))
    resp.mimetype = 'text/plain'
    return resp 
```

# sql-server-2008 - 首次运行时自动刷新 Excel 中的数据透视表数据

> ID：16151084
> 
> 赞同：3
> 
> 时间：2013-04-22T15:39:02.237
> 
> 标签：sql-server-2008, excel, pivot-table, vba

**背景：**我有 2 张 excel 表：

1.  包含数据透视表和宏“刷新”
2.  来自 SQL 服务器的数据

宏包含用于自动刷新数据和更新数据透视表的**VBA 代码**。数据每晚更新。以下是**VBA 代码：**

```
 Sub Refresh()
 ActiveWorkBook.RefreshAll 
 End Sub 
```

**问题：**

1.  当我第一次运行我的宏时，执行需要 5 分钟，并且我的数据透视表没有用新数据更新。

2.  当我第二次运行它时，它完美地执行。

我希望我的宏在第一次运行时完美执行。

任何帮助是极大的赞赏。

注意：这是我的第一篇文章，所以请容忍我的编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:31:28.893

**我已经解决了我的问题：**

1.  我删除了宏并使用了**Active-x-Control**按钮。所以，在`button_click()`刷新`ExternalData`以及`pivotTables`

2.  所以，这里是代码：我删除了下面的代码

    `ActiveWorkBook.RefreshAll`

并更新为

```
Private Sub CommandButton1_Click()
Dim Data_query As Worksheet
Set Data_query = Sheets("Data")
Data_query.Select
Selection.ListObject.QueryTable.Refresh BackgroundQuery:=False
Application.ScreenUpdating = False
Sheets("sheet1").Select
Sheets("sheet1").PivotTables("PivotTable1").PivotCache.Refresh
Sheets("sheet1").PivotTables("PivotTable1").RefreshTable
End Sub 
```

所以现在两者都`ExternalData`同时`pivotTables`得到刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:44:47.270

有可能当您打开工作簿时，您同时打开了其他工作簿？仅使用宏工作簿进行尝试。此外，使用数据透视表指定工作表也可以。sheet1.refreshall

另一种方法是使用 api 设置计时器并指定何时刷新。

最后一种方法是在打开工作簿时设置刷新，转到此工作簿并在打开时输入代码。

# jquery - 使用 jQuery 在跨度之间更改文本

> ID：16151085
> 
> 赞同：1
> 
> 时间：2013-04-22T15:39:07.323
> 
> 标签：jquery, html

我有这个 HTML 块：

```
<div class='translate' id='community_participation'>
Supported by
<span class='notranslate'>
52
</span>
customers like
you, as well as
<a href="/gsfnmichelle/people">the <span class='notranslate'>GSFNMICHELLE</span> team</a>.
</div> 
```

我知道我可以改变整个事情`$('#community_participation.translate').html('Something here.');`

但我不知道如何更改跨度之间的文本，即“Supported by”、“customers like you, as well as”、“the”和“team”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:56:16.767

我建议您使用 jQuery [contents()](http://api.jquery.com/contents/)来获取文本节点并将其[包装](http://api.jquery.com/wrap/)在新元素中以便于管理：

```
var el = $('.translate').contents().filter(function() {
             return this.nodeType == Node.TEXT_NODE;
         }).eq(0).wrap('<span class="newDiv"></span>'); 
```

然后您可以使用[text()](http://api.jquery.com/text/)更改文本：

```
$('span.newDiv').text('New Text'); 
```

**[小提琴](http://jsfiddle.net/FpuX9/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:11:08.463

这个怎么样？

```
num_customers = jQuery('#community_participation').text().split('\n')[3];

jQuery('#community_participation').html('Supported by ' + num_customers + ' community members, as well as <a href=/teded/people>the GSFNMICHELLE team</a>'); 
```

欢呼！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:02:35.870

例如，要更改文本“Supported by”，您可以查看标记中的第一个 textNode（使用索引 0）

```
$(function() {
    $('#community_participation').contents().filter(function() {
        return this.nodeType == 3;
    })[0].textContent = "Support comes from";
}); 
```

输出：
支持来自和你一样的 52 个人，以及 GSFNMICHELLE 团队。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:48:24.480

如果您不能将要更改的部分包装在跨度中，那么您可能只使用替换。例子：

```
$('a.question-hyperlink').html($('a.question-hyperlink').html().replace('Changing','Something else')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T15:40:42.667

You can use

```
$('.notranslate').html('your text'); 
```

# highcharts - 是否有可能让轴线与高图相交

> ID：16151092
> 
> 赞同：0
> 
> 时间：2013-04-22T15:39:23.037
> 
> 标签：highcharts

我有一个使用 highcharts 构建的折线图，出于纯粹的审美原因，我希望网格线在 0 处交叉并继续轻微进入负值，如下图所示。我怎样才能做到这一点？

![显示轴交点的小图像](https://leonpidgeon.com/axis.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:02:39.383

您可以使用属性组合来完成此操作

请参见此处的示例：

[http://jsfiddle.net/AzFME/3/](http://jsfiddle.net/AzFME/3/)

使用部分或全部这些属性来启用：

```
 xAxis: {
        offset: -15,
        min:-1,
        showFirstLabel:false,
        startOnTick:false, 
```

*   将轴偏移属性设置为负值
*   将轴最小值设置为负（或低）值
*   将 showFirstLabel 和 startOnTick 设置为 false

根据需要调整值。

# php - CORS 预检请求返回“403 Forbidden”；随后的请求，然后仅在 Chrome 中发送

> ID：16151096
> 
> 赞同：8
> 
> 时间：2013-04-22T15:39:30.313
> 
> 标签：php, jquery, iis, http-headers, cors

在[这个问题](https://stackoverflow.com/questions/16144879/plupload-runtimes-returning-403-forbidden-error-when-trying-to-access-upload-php)中使用 pluploader 失败后，我现在正在尝试[FineUploader](http://fineuploader.com/)。

在阅读了 CORS 之后，我在我的 IIS6 服务器上实现了各种标头。

似乎发生的情况是我的脚本触发了第一个 ( `preflight`) 授权请求，但失败了，但 Chrome 允许第二个 ( `standard`) 请求发送 - Firefox 不允许。我认为这实际上是代表 Chrome 的一个错误，但至少它让我可以确定我的脚本*可能*工作正常。

这是在 Chrome 和 FF 中看到的第一个（预检）请求：

```
OPTIONS /frog/LOTS/upload/php.php HTTP/1.1
Host: staff.curriculum.local
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Origin: http://frogserver.curriculum.local
Access-Control-Request-Method: POST
Access-Control-Request-Headers: cache-control,x-requested-with
Pragma: no-cache
Cache-Control: no-cache 
```

`Access-Control...`标头是我添加到 IIS 中的标头。

这是我的响应标题：

```
HTTP/1.1 403 Forbidden
Content-Length: 1758
Content-Type: text/html
Server: Microsoft-IIS/6.0
x-powered-by: ASP.NET
Access-Control-Allow-Origin: http://frogserver.curriculum.local
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Cache-Control
Access-Control-Allow-Methods: OPTIONS, GET, POST
Access-Control-Expose-Headers: Origin, X-Requested-With
Date: Mon, 22 Apr 2013 15:19:20 GMT 
```

我试图并排比较这两者，但找不到任何会导致`preflight`请求返回`403 Forbidden`错误的丢失标头。

![403 禁止](https://i.stack.imgur.com/eNfvt.png)

我没有包含我的 PHP 源代码，因为它有很多代码。可以说它确实在 Chrome 中工作并且文件已正确上传，因此脚本*应该*是正确的。唯一值得一提的是，我`header("Content-Type: text/plain");`的脚本开头有一个。将其更改为`text/html`对 Chrome 和 FireFox 没有任何影响。

JavaScript 非常简单：

```
$('#jquery-wrapped-fine-uploader').fineUploader({
    request: {
        endpoint: 'http://staff.curriculum.local/frog/LOTS/upload/php.php'
    },
    cors: {
        expected: true, //all requests are expected to be cross-domain requests
        sendCredentials: true //if you want cookies to be sent along with the request
    }
}); 
```

任何人都可以帮忙吗？我今天在这个问题上花了 8 个小时，我 >< 几乎要撕掉我自己的脸了....！！

提前致谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T16:42:33.783

正如我在评论中提到的，这似乎是您的服务器的问题。出于某种原因，它拒绝了最初的 OPTIONS 请求。您将需要查看您的服务器日志，以了解您的服务器为何使用 403 响应此请求。

用户代理发送此初始 OPTIONS（飞行前）请求。Fine Uploader 不直接发送此请求，用户代理发送它是为了符合[CORS 规范](http://www.w3.org/TR/cors/)。如果你有关于 CORS 的具体问题，你可以查看[我的博客文章](http://blog.fineuploader.com/2013/01/cors-support-in-33.html)Fine Uploader 如何处理 CORS，或者/并且你可以阅读[这篇关于 CORS 的优秀 MDN 文章](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-01T13:46:50.177

我花了一个星期，但我终于找到了问题所在。

默认情况下，**IIS6 不支持 .php 文件**（或 .asp(x) ）上的 OPTIONS 动词。

因此，它根本无法识别`OPTIONS`飞行前呼叫。

要在 IIS6 中更改此值，请执行以下步骤：

1.  在 IIS 管理器中，转到您的根网站目录。右键单击它并选择“属性”
2.  转到主目录选项卡，然后选择底部的“配置”按钮
3.  找到您尝试与之通信的脚本的相关文件扩展名，例如 .php 或 .asp，然后单击“编辑”
4.  添加`OPTIONS`到可用动词列表（现在应该显示类似的内容`REQUEST, GET, POST, OPTIONS`）
5.  将以下代码添加到您的 PHP 脚本以确定来自 IE 的响应

如果我的 PHP 脚本中没有以下代码，我无法让 Internet Explorer 正常工作：

```
/* Is the request from Internet Explorer? */
if( !isset( $_SERVER['HTTP_X_REQUESTED_WITH'] )
    || ( isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] != "XMLHttpRequest" ) ) {

    /* If so, we need to send a UUID and iframe XSS response script... */
    header("Content-Type: text/html");

    /* This needs some extra security, for sure */
    if( $result["success"] == "true" )
        $result["uuid"] = $_POST["qquuid"];

    echo htmlspecialchars(json_encode($result), ENT_NOQUOTES);
    echo "<script src='iframe.xss.response-3.4.1.js'></script>";
} else {
    /* Otherwise, we can just echo the json'd result */
    echo htmlspecialchars(json_encode($result), ENT_NOQUOTES);
} 
```

我给了 Ray Nicholus 50 分的赏金，虽然我没有发现他的举止特别有帮助，但他一直都是对的。但是，出于其他人查看此帖子的类似问题的目的，我会将我的答案标记为正确。

# java - Java：字符串 a = Integer.toString(1); 创建多少个对象？

> ID：16151100
> 
> 赞同：2
> 
> 时间：2013-04-22T15:39:38.750
> 
> 标签：java, string

我看到声明说：

```
String a = new String("1"); 
```

创建 2 个对象，都在堆上，一个被 a 引用，一个从字符串字面量池中引用

**但是，怎么样：**

```
String a = Integer.toString(1); 
```

它会创建 2 个对象还是 1 个？我认为它会创建 2，我正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:44:04.467

检查的来源[`Integer#toString(int)`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.toString%28int%29)。它返回一个新的 String 对象。

```
public static String toString(int i) {
    if (i == Integer.MIN_VALUE)
        return "-2147483648";
    int size = (i < 0) ? stringSize(-i) + 1 : stringSize(i);
    char[] buf = new char[size];
    getChars(i, size, buf);
    return new String(0, size, buf);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T15:44:00.967

它将创建零个对象，因为 JVM 会将其优化掉；-)

换句话说：我相信这个问题的答案更多地与底层虚拟机有关，而不是与 Java 相关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T15:43:20.030

它将创建两个：一个`char[]`在 的实现中`Integer.toString`，然后将`String`其转换为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T15:43:46.267

方法的内部实现可以创建任意多个，只要它满足方法的公共契约即可。

也就是说，看看当前的实现，唯一的附加对象（除了返回引用的字符串）是：

```
 char[] buf = new char[size]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T15:46:26.917

[在 OpenJdk 实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java#Integer.toString%28int%29)中，创建一个`char`数组，然后从中创建一个字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T15:46:03.270

第**一次**：

```
String a = new String("1"); 
```

执行它会创建至少两个如果不是更多的对象。显然它将创建一个`String`，其中可能包含一个`private` `char[]`. 地图中还会有一个新条目，`intern`其中可能包含多个对象。所以 - 总之 - 至少两个，也许四个甚至更多。

从那时起 - 但是，它应该只创建**一个**对象，即`String`. `char[]`将从实习生地图共享。

每次执行

```
String a = Integer.toString(1); 
```

您将创建至少一个对象。显然`String`，可能是一个新的`char[]`，可能没有别的。`char[]`如果它使用`intern`上面创建的“1”的 ed 版本，您甚至可能不会创建。

一般来说-它取决于JVM。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T15:48:01.100

案例一创建了*三个*对象（char[]、String constant 和 new String），而不是两个。案例二创建*两个*对象（char[] 和 new String）。检查了 JRE 1.7.0_21 源，其他 JRE 可能会以不同的方式实现它。

# python - 从列表中删除字母

> ID：16151105
> 
> 赞同：1
> 
> 时间：2013-04-22T15:39:53.823
> 
> 标签：python, list

我有一个清单

```
['PFRMAT,RR', 'TARGET,', 'AUTHOR,5014-2892-3830', 'MODEL,1', 'TGAHPAFKYLAQTSGKEPTWNFWKYLVAPDGKVVGAWDPTVSVEEVRPQI', 'TALVR', '3,9', '3,16', '3,17', '3,18', '3,21', '3,25', '3,26', '3,27', '3,28', '3,29', '3,30'] 
```

如何删除字符串字母，因此列表变为`['3,9','3,16','3,17','3,18']` 我不想使用删除前 6 个元素的函数，例如`del`开头的字母字符串数量不是固定数量

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:40:44.553

```
[elem for elem in my_list if not any(c.isalpha() for c in elem)] 
```

takes `my_list` and returns a new list with all elements that have no letters in it. It is a list comprehension (thanks @Lattyware) returning a new list, so you probably want to return it back to `my_list`:

```
my_list = [elem for elem in my_list if not any(c.isalpha() for c in elem)] 
```

# javascript - 无法在 onclick 事件（JS）上向元素插入函数

> ID：16151107
> 
> 赞同：1
> 
> 时间：2013-04-22T15:39:58.660
> 
> 标签：javascript, html

我对这段代码有疑问：

```
 var xButton = document.createElement("a");
    xButton.className = "cXButton";
    xButton.href = "#";
    xButton.onclick = "closePanel()";
    xButton.innerHTML = "X"; 
```

虽然“closePanel()”是我已经写过的一个函数。我使用了 Firebug，发现“onclick”属性没有出现在标签中。我看到一些线程，而不是函数的名称，而是它的实现（函数closePanel（）{...}）。这不是我要找的。

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T15:40:51.920

您的原始代码有两个问题：

*   `"closePanel()"`是一个字符串。
*   `closePanel()`尝试（或者如果它不是字符串）调用函数并将其输出分配给`xButton.onclick`

应该是这样的：

```
xButton.onClick = closePanel; 
```

这将为函数分配一个引用，`closePanel()`在事件触发时`xButton.onClick`调用。`closePanel()``xButton.onClick`

请记住，您可以`this`在声明中使用`closePanel()`来引用单击的元素。

# javascript - Display a warning after 3 mins of inactivity on a page

> ID：16151112
> 
> 赞同：0
> 
> 时间：2013-04-22T15:40:15.890
> 
> 标签：javascript, jquery, ajax

I am working on a php page with tests. The max time for a test is 1 hour, but the session times out after 10 mins of inactivity. At timeout, the tests page doesn't refresh or redirect... It stays the same, but when the user hits the "see the results" button at the end of the test, he is logged out and his results are not registred.

I just need - [after 3 mins of inactivity on the page] - to diplay a warning message. if after displaying the message the user makes a mouse movement - or click - anywhere on the page, the timer resets without refreshing the page.

If even after displaying the warning message the user didn't moved his mouse or clicked for 7 mins, the message shows "you have been logged out".

I am a beginner in progrmming, but I guess it's pretty simple stuff, displaying 2 messages after 3 and 10 mins of inactivity, both timer reset at mouse movement or click.

Could somebody help me with a nice solution to this? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:50:47.617

```
var timeout;

document.onmousemove = resetTimer;
document.onclick = resetTimer;

function resetTimer = function() {
  clearTimeout(timeout);
  timeout = setTimeout(function(){alert("3 minute warning");}, 3*60*1000);
} 
```

正如@Elzo Valugi 指出的那样，您的服务器将无法验证您在客户端所做的任何事情，因此如果这很重要，您还需要添加服务器端代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:48:02.770

```
var timeoutWarn;
var timeoutLogout;

// Set the timer
resetTimer();

// Reset the timer
document.onmousemove = resetTimer();
document.onclick = resetTimer();

function resetTimer = function() {
    timeoutWarn = window.setTimeout(function() { 
        // create warning element.
    }, 180000);

    timeoutLogout = window.setTimeout(function() { 
        // ajax to process logout
        alert('You have been logged out');
    }, 420000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:49:09.337

如果您真的想正确，请假设任何客户端都是可伪造的，而忘记 JS 解决方案。唯一正确的方法是服务器端。但是，不幸的是，HTTP 请求是无状态的，这意味着您不确切知道客户端在做什么以及他是否仍然处于活动状态。您可以做的是在每个请求上更新会话信息服务器端，并且每分钟一次，您有一个 cron 作业作为过期会话的垃圾收集器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:00:49.600

这应该允许您在不修改核心计时器逻辑的情况下调整区域和实际毫秒/操作

```
var $area = $(document),
    idleActions = [
        {
            milliseconds: 3000, // 3 seconds
            action: function () { alert('Warning'); }
        },
        {
            milliseconds: 3000, // 3 + 3 = 6 seconds
            action: function () { alert('Logout'); }
        }
    ];

function Eureka (event, times, undefined) {
    var idleTimer = $area.data('idleTimer');
    if (times === undefined) times = 0;
    if (idleTimer) {
        clearTimeout($area.data('idleTimer'));
    }
    if (times < idleActions.length) {
        $area.data('idleTimer', setTimeout(function () {
            idleActions[times].action(); // run the first action
            Eureka(null, ++times); // setup the next action
        }, idleActions[times].milliseconds));
    } else {
        // final action reached, prevent further resetting
        $area.off('mousemove click', Eureka);
    }
};

$area
    .data('idle', null)
    .on('mousemove click', Eureka);

Eureka(); // start the first time 
```

jsFiddle：http: [//jsfiddle.net/terryyounghk/wMZJA/](http://jsfiddle.net/terryyounghk/wMZJA/)

# gdb - gdb 中似乎缺少一些便利功能

> ID：16151113
> 
> 赞同：2
> 
> 时间：2013-04-22T15:40:17.790
> 
> 标签：gdb

我在 linux 上使用 gdb 7.5.1 版，并试图使用方便的功能，比如`$_memeq`发现它显然不存在：

`Undefined command: "$_memeq". Try "help".`

当我输入时，`help function`我得到这个输出：

```
(gdb) help function
Placeholder command for showing help on convenience functions.

List of function subcommands:

Type "help function" followed by function subcommand name for full documentation.
Type "apropos word" to search for commands related to "word".
Command name abbreviations are allowed if unambiguous. 
```

甚至`apropos memeq`什么都不返回。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:00:33.887

来自 GDB 7.6 发布[公告](http://sourceware.org/ml/gdb-announce/2013/msg00000.html)：

> ** 新的基于 Python 的便利函数（$_memeq、$_streq、$_strlen 和 $_regex）

我猜7.5.1还不够新鲜。

# sql-server - Order of columns in index - insert performance

> ID：16151117
> 
> 赞同：0
> 
> 时间：2013-04-22T15:40:24.593
> 
> 标签：sql-server, indexing

I've done a bit of research on the order of index columns but am not 100% sure so please bear with me on this! I have the following table:

```
CREATE TABLE [Valuation]
    (  
      [ValuationID] [int] IDENTITY(1, 1)
                          NOT NULL
                          CONSTRAINT [PK_Valuation] PRIMARY KEY ,  
      VersionID INT NOT NULL ,  
      AlphanumericIdentifier VARCHAR(255) NOT NULL,  
      ...  
      other columns  
      ...  
    ) 
```

I do many joins on this table to others on VersionID and AlphanumericIdentifier, so I put an index on it:

```
CREATE NONCLUSTERED INDEX [IX_Valuation] ON [dbo].[Valuation]   
(
[VersionID] ASC,
[AlphanumericIdentifier] ASC
) 
```

Two questions:

1.  These joins are usually done for a specific VersionID, so this is the most selective column and should be the first in the index - correct?
2.  Inserts are always done for a single version, which is 1 more than the last version. This should mitigate the performance hit on inserts as the inserted rows are a 'chunk' that can be added to the end of the index. Is this right?

I'm pretty sure that I'm right on 1, but is 2 correct?

Thanks Joe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:54:29.020

对于您的问题：

“这些连接通常针对特定的 VersionID 完成，因此这是最具选择性的列，应该是索引中的第一个。”

连接与它无关，除非连接被用作过滤器。过滤器（Where 子句谓词）和排序（Order By 子句）使用索引。是否使用索引取决于有多少记录（行）满足过滤器。如果查询将返回表中的每一行（没有 where 子句），那么很可能不会使用索引，因为查询优化器会（正确地）决定它可能只读取整个表而不是尝试使用一个索引。索引是分层的树结构，具有多个级别。对于查询将返回的每一行，使用索引需要每个索引级别一个磁盘 I/O。因此，如果查询将返回表中的所有 1000 行，并且索引中有五个级别，那么这将需要 5000 次 IO。直接从表中读取数据，而不是索引，

接下来，您关于“这应该减轻对插入的性能影响的陈述，因为插入的行是一个可以添加到索引末尾的'块'”

仅当索引是聚集索引时，此语句才成立。在您的架构中，聚集索引是主键（因为虽然您可以覆盖它，但这是默认行为），它是 on `ValuationID`，而不是 on `VersionId`。***因此，任何***记录的“块”插入，无论它们是否都具有相同的 versionId，都将添加到索引的末尾，因为它们都将具有 new `valuationId`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:42:50.607

是的，你在这两个方面都是对的。

这些列应根据您查询较多的列进行排序，前导列是您经常或最常查询的列。

添加具有递增值的行`VersionID`意味着不需要拆分中间页面。

# c# - 代码优先自动生成代理类导航和集合属性为空

> ID：16151119
> 
> 赞同：10
> 
> 时间：2013-04-22T15:40:33.703
> 
> 标签：c#, entity-framework, c#-4.0, ef-code-first, entity-framework-4.3

对于我所有的 POCO，导航和集合属性都为空。

让我提供一些背景。我有一个使用 EF 4.3.1 的复杂代码优先项目。代理生成已禁用。收集和导航属性是手动管理的。

我现在启用代理创建和延迟加载。调试时，我可以看到我的实体（转换为我已知的 POCO 类型）现在实际上是一个自动生成的代理类。到现在为止还挺好。

现在，当我查看导航属性时，它们为空。同样，我的集合属性为空。

使用反射，我可以看到代理类已经覆盖了我的导航和集合属性。

所有导航和集合属性都是虚拟的。例如：

```
public virtual NavigationType NavigationName { get; set; }
public virtual ICollection<CollectionType> CollectionName { get; set; } 
```

此外，所有表都这样初始化：

```
modelBuilder.Entity<TEntity>()
.Map(m =>
{
    m.MapInheritedProperties();
    m.ToTable("TableName");
}); 
```

我还可以确认数据库按预期生成。外键都存在并与预期字段相关联。

为什么它们是空的？我该如何进一步诊断？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:06:12.500

> 我该如何进一步诊断？

例如，您可以通过查看更改跟踪器的`context.ChangeTracker.Entries()`集合来检查您正在检查的实体是否附加到上下文。

您很可能拥有一个所有导航属性都为 的动态代理`null`，例如：

```
Entity entity = context.Entities.Create(); 
```

`entity`将是一个代理，但`NavigationName`并且`CollectionName`将是，即使您访问这些属性（导致s）`null`，它们也会保留。这只会在您附加实体时发生变化：`null``NullReferenceException`

```
context.Entities.Attach(entity); 
```

如果您现在访问属性，则应该运行延迟加载。如果数据库中没有相关实体，`NavigationName` *可以*保留，但集合不应该在附加和访问它之后。如果数据库中没有相关实体，则结果应该是一个空集合，但不是.`null``CollectionName``null``null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:26:58.787

您需要使用模型构建器定义实体之间的关系：http: [//blogs.msdn.com/b/aspnetue/archive/2011/05/04/entity-framework-code-first-tutorial-supplement-what-is-going -on-in-a-fluent-api-call.aspx](http://blogs.msdn.com/b/aspnetue/archive/2011/05/04/entity-framework-code-first-tutorial-supplement-what-is-going-on-in-a-fluent-api-call.aspx)

# c++ - Call static function in C++

> ID：16151120
> 
> 赞同：1
> 
> 时间：2013-04-22T15:40:33.430
> 
> 标签：c++, class, static-methods

I am writing a code to work with vectors in C++. I've got 3 files: main.cpp, Vektor.cpp and Vektor.h Now I want to call a static funktion in main, which is implemented in Vektor.cpp and declarated in Vektor.h. "test" and "test2" are two instances of the class Vektor. Eclipse throws an Error out, but i do not know why; it says

> Multiple markers at this line - Function 'addieren' could not be resolved - 'addieren' was not declared in this scope - Invalid overload of 'endl' - Line breakpoint: main.cpp [line: 28]

Where is the mistake? The "Vektor.h" is included. Here are the necessary cuttings:

main.cpp:

```
// ...
cout << "Summe: " << addieren(test,test2) << endl; 
```

Vektor.cpp:

```
Vektor Vektor::addieren(Vektor vektor1, Vektor vektor2)
{
Vektor vektorSumme;
vektorSumme.set_x(vektor1.get_x() + vektor2.get_x());
vektorSumme.set_y(vektor1.get_y() + vektor2.get_y());
vektorSumme.set_z(vektor1.get_z() + vektor2.get_z());
return vektorSumme;
} 
```

Vektor.h:

```
class Vektor

{
//...
public:
  //...
static Vektor addieren(Vektor vektor1, Vektor vektor2); 
```

Thanks for helping!!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:41:55.350

You need to call it as:

```
Vektor::addieren(test,test2); 
```

static member functions can be called with fully qualified name of the class. They can also be called on a class instance, but since you don't have any instance it doesn't apply here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:42:27.573

The syntax for calling static functions is: `Vektor::addieren(...)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:44:41.397

You should call it

```
Vektor::addieren(test, test2) 
```

But I would suggest you, to improve addieren function to pass both vectors by reference or pointer.

`addieren(Vektor & vektor1, Vektor & vektor2)`

or

`addieren(Vektor * vektor1, Vektor * vektor2)`

but then you must call it with

```
Vektor::addierent(&test, &test2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T16:08:54.317

You need to call this with fully qualified name of the class, as:

```
Vektor v_res=Vektor::addieren(test, test2); 
```

or on an object (instance of class):

```
Vektor v;
Vektor v_res=v.addieren(test, test2); 
```

# wpf - DataGridTemplateColumn 在 HeaderStyle 中使用 ContentPresenter

> ID：16151128
> 
> 赞同：0
> 
> 时间：2013-04-22T15:41:14.533
> 
> 标签：wpf, xaml, datagrid, datagridtemplatecolumn, contentpresenter

我`DataGridTemplateColumn`在我的 XAML 中使用了几个 s `DataGrid`，每个都是一组文本框，因为我想要列的分组标题布局（例如，合并列作为 excel 中的标题）。

所有这一切都很好，因为我正在使用`HeaderStyle`列的属性来加载一个定义布局并实现分组标题的`StaticResource`for 。`Style``Grid`

问题是，需要将`Header`属性`DataGridTemplateColumn`绑定到模型成员（或 StaticResource ？），因为它将包含将在 a 中使用的字符串值`ContentPresenter`，它是`HeaderStyle`. `ContentPresenter`资源中的`Style`定义如下：

```
<ContentPresenter Grid.Row="2" Content="{TemplateBinding Content}"
VerticalAlignment="Center" HorizontalAlignment="Center"
Grid.ColumnSpan="11"> 
```

但这不起作用。它仅适用`Header="SomeString`于 ，但只要我将其更改为 `Header="{Binding Something}"`或`Header="{StaticResource SomeResource}"`它只显示一个空白标题。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:20:47.837

删除 Content="{TemplateBinding Content}" 因为这是不正确的。ContentPresenter 将隐式使用提供给它的内容作为模板的一部分

# ios - 如何限制触摸持续时间？

> ID：16151130
> 
> 赞同：1
> 
> 时间：2013-04-22T15:41:21.753
> 
> 标签：ios, objective-c, cocos2d-iphone, uigesturerecognizer

有什么方法可以限制用户手势的持续时间吗？例如，用户可以拖动一个精灵，但从 cctouch 开始，它只能持续 3 秒。持续时间过后，应用程序将自动触发 cctouch end 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:38:38.330

我建议使用块来安排计时器。避免在 Cocos2D 中使用 NSTimer，因为它不允许内置的暂停/恢复功能。

安排如下：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event 
{
    [[self scheduler] scheduleBlockForKey:@"menu" target:self interval:3.0f repeat:0 delay:0 paused:NO block:^(ccTime dt)
             {
                 // perform end of touch actions here
             }];
} 
```

如果用户在调用计时器之前执行您想要的任何操作（很可能是 ccTouchEnded/ccTouchCancelled），请务必取消调度该块：

```
- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event 
{
    [[self scheduler] unscheduleBlockForKey:@"menu" target:self];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:23:12.117

是的，这是实现这一目标的简单策略。您可以在用户开始意识到手势时启动计时器，并在计时器到达时停止它。

```
-(void) timerDidTick:(NSTimer *)theTimer{
    cpMouseRelease(mouse);
}

- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    NSTimer *aTimer = [NSTimer timerWithTimeInterval:3.0 target:self selector:@selector(timerDidTick:) userInfo:nil repeats:NO] ;
    [[NSRunLoop mainRunLoop] addTimer:aTimer forMode:NSRunLoopCommonModes];
    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];
    cpMouseGrab(mouse, touchLocation, false);
...
} 
```

# javascript - 使用单选按钮的 URL 导航

> ID：16151132
> 
> 赞同：0
> 
> 时间：2013-04-22T15:41:25.887
> 
> 标签：javascript, jquery, html, radio-button, url-routing

我是 JS 和 Jquery 的新手，我正在尝试找出一种使用单选按钮使用条件导航到 URL 的方法。

我的表单中有两个选项，一个用于选择标准，另一个用于选择匹配的是/否。

根据所做的单选按钮选择，我必须提供这些报告的 URL，例如 Param2 + No = Report 1 URL 等。

有没有办法用下面的代码来实现：

```
<!DOCTYPE html>
<html>
<body>
  <form name="formone" id="optionsform">
    <fieldset>
      <p><b>Selection Criteria</b></p>
<label><input type="radio" name="group1" id="ac-yes" value="1">Param1</label>
<label><input type="radio" name="group1" id="ac-no" value="0">Param2</label>
  <p><b>Auto Matching</b></p>
<label><input type="radio" name="group2" id="bt-yes" value="2">Yes</label>
<label><input type="radio" name="group2" id="bt-no" value="0">No</label>
  <p></p>
<a href="varible-address">Go</a>
</fieldset>
</form>
<script>
    $(function(){
      var urls = new Array();
      urls[0]="Report 1 URL";// no + no
      urls[1]="Report 2 URL";// yes + no
      urls[2]="Report 3 URL";// no + yes
      urls[3]="Report 4 URL";// yes + yes

      $('input[type=radio]').click(function(){
        var score = 0;
        $('input[type=radio]:checked').each(function(){score+=parseInt($(this).val())});) before the the curly bracket
        $('a').attr('href',urls[score]);
      });) and ;
   });
</script>
</body>
</html> 
```

如果有人能告诉我如何使用 Go 按钮而不是这个 Link href，我也会很合适。

如果这不可能，我们可以改用 Javascript 吗？

这是 JSbin：http: [//jsbin.com/emaxev/1/edit](http://jsbin.com/emaxev/1/edit)

请指教。

提前致谢。

-V

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:27:54.213

您的脚本似乎有一些错误的关闭`)`和未注释掉的文本。

修复它并且该功能工作正常

```
$(function () {
    var urls = new Array();
    urls[0] = "Report 1 URL"; // no + no
    urls[1] = "Report 2 URL"; // yes + no
    urls[2] = "Report 3 URL"; // no + yes
    urls[3] = "Report 4 URL"; // yes + yes

    $('input[type=radio]').click(function () {
        var score = 0;
        $('input[type=radio]:checked').each(function () {
            score += parseInt($(this).val());
        });
        $('a').attr('href', urls[score]);
    });
}); 
```

小提琴：http : [//jsfiddle.net/Spokey/RyQuj/1/](http://jsfiddle.net/Spokey/RyQuj/1/)

如果你想制作一个按钮，请使用`<button>`.

```
<button>Go</button> 
```

# rest - 调用 REST 服务方法的正确方法（带有多个参数）

> ID：16151150
> 
> 赞同：0
> 
> 时间：2013-04-22T15:42:16.163
> 
> 标签：rest, language-agnostic

所以我在后端有一个方法，我想从客户端调用（Android 和 Web，虽然不是很重要）。该方法接受两个“复杂”参数——两个对象。

是否可以简单地声明`domain/method`客户端发布对象的 URL（例如），并在后端映射到该 URL 并调用该方法的控制器？如果是，我应该如何发送带有两个对象的 POST 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:50:31.817

当您谈论域/方法时，它听起来更像是 RPC 服务而不是 REST 服务。RPC（远程过程调用）用于基于方法的服务，而 REST 用于基于资源的服务。

在任何情况下，当您创建 REST API 时，您应该使用如下 URL：

example.com/resource/example.com/resource

当您需要创建新资源时，请使用 example.com/resource 上的 POST 方法。您可以将对象包含在 POST 请求的有效负载中。服务器应验证并处理这些对象，最终生成新资源。根据您的 REST 架构，服务器可以在对您的帖子的响应中返回资源或资源的 URI。

您验证和处理对象以及生成资源的方式取决于您的应用程序。通常，您使用 URI 和 HTTP 方法（GET、POST、PUT 或 DELETE 是标准的）来路由到处理请求的代码。

# ios - Facebook SDK 3.5 - iOS 5 上的共享对话框

> ID：16151155
> 
> 赞同：4
> 
> 时间：2013-04-22T15:42:34.900
> 
> 标签：ios, facebook, facebook-ios-sdk

有谁知道是否可以在 iOS 5 上使用新的共享对话框功能？在 facebook 官方文档中，它是这样写的：

> 注意：您只能在装有 Facebook for iOS 6.0 或更高版本的设备上测试共享对话框。您也可能无法在此功能处于测试阶段时对其进行测试。**

此功能将在测试阶段停留多少时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T13:31:55.730

适用于 iOS 的 Facebook SDK 3.5 在 iOS 5.0 及更高版本上运行。本机共享对话框功能适用于 SDK 支持的操作系统版本。文档实际上是指 Facebook 应用程序的版本，并且公认很容易误认为是指操作系统版本。我们将澄清文档以避免在这一点上进一步混淆。感谢您的提问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:32:34.440

对于 ios5，您可以使用较旧的 Web 对话框。您可以使用以下方式调用它：

```
NSMutableDictionary *params =
                [NSMutableDictionary dictionaryWithObjectsAndKeys:
                 @"name/title of post", @"name",
                 @"some description", @"description",
                 @"url to link to", @"link",
                 nil];
// Invoke the dialog
[FBWebDialogs presentFeedDialogModallyWithSession:nil parameters:params handler:
                 ^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                     if (error) {
                         // Error launching the dialog or publishing a story.
                         NSLog(@"Error publishing story.");
                     } else {

                     }
                 }]; 
```

您可以通过在 FBNativeDialogs 中捕获返回值 presentShareDialogModallyFrom: 来测试本机对话框是否可用。

# mysql - 在 join 语句上使用 like 的最有效方法是什么？

> ID：16151166
> 
> 赞同：2
> 
> 时间：2013-04-22T15:43:04.477
> 
> 标签：mysql

使用 join 语句时，我想使用类似条件连接表。最有效的方法是什么？

使用`fielda like CONCAT ('%', fieldb, '%')`似乎不是很有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:41:03.613

使用 2 个 wild char 会使索引无用，您可以做的是删除前面的那个，而不是 mysql 仍会使用索引来查找您搜索的任何内容。如果您没有索引，请使用以下代码创建索引：

```
CREATE INDEX indexname ON tablename(columnname); 
```

然后将查询更改为

```
fielda like CONCAT (fieldb, '%') 
```

要使用索引，其他要考虑的事情是列是一个文本字段或简单的只是一个 varchar 字段，因为如果它包含更长的文本，您应该考虑全文搜索。

这是关于该主题的更深入的文章，其中包含示例和良好的解释等。

[http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:12:38.580

如果你想做实际的搜索，你会想学习如何做全文索引和查询。我相信你可以通过搜索谷歌找到一些关于这个主题的入门书，但这里是关于它的 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

# asp.net - asp.net 嵌入视频播放器不起作用

> ID：16151170
> 
> 赞同：1
> 
> 时间：2013-04-22T15:43:13.697
> 
> 标签：asp.net, embed, video-player

我正在尝试在我的 aspnet 项目上显示一个视频，但我无法成功。这是我渲染的 html 代码。

```
<object width="300" height="200"><embed src="uploaded_files/dde35c21-5261-e211-a320-0025d3b48279_609441313.wmv" type="application/x-shockwave-flash" width="425" height="344"></object> 
```

我检查了链接并且链接有效。但是在网页上，我右键单击视频播放器应该在的位置，我看到了 Flash 播放器菜单。在该菜单上，它会在底部显示 Flash 播放器的版本，并在同一菜单的顶部显示“视频未加载”。

你认为是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-10T06:00:53.187

视频播放器代码

```
 <object height="320px" width="240px" type ="video/x-ms-wmv">
        <param name="src" value="http://localhost/MyMovie.wmv" />
    </object> 
```

[请参阅此链接以获取更多详细信息](http://www.beansoftware.com/ASP.NET-Tutorials/Media-Player.aspx)

# ruby-on-rails - Ruby on rails 控制台

> ID：16151173
> 
> 赞同：0
> 
> 时间：2013-04-22T15:43:19.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序中的嵌套模型存在问题。我无法显示值。我知道我必须这样做：@modelname.attribute (view)，但它似乎不起作用。这就是为什么我开始查看控制台是否我在控制器中所做的一切都是正确的。一切似乎都很好。但是当您执行此操作时，我在控制台中有一个问题（示例）：

```
@modelname = Modelname.find(an id) 
```

它为您提供了相应的对象，如下所示：

```
=>#< Modelname, id: x, other attributes > 
```

当我试图在控制台中找到我的另一个对象时，我得到了这个：

```
=>[#< Modelname, id: x, other attributes >] 
```

为什么？有什么区别，这可能是我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:01:36.510

第二次——在控制台中——你得到一个数组。这就是区别。至于为什么，我们不知道您为找到模型而写了什么，但您必须调用`ModelName.where`ActiveRecord 查询 API 中返回数组的其他方法（准确地说是 ActiveRecord::Relation）

# html - 如何修复 iframe 中 mailto 链接的错误

> ID：16151174
> 
> 赞同：1
> 
> 时间：2013-04-22T15:43:20.170
> 
> 标签：html, iframe, mailto

我正在 iframe 内创建一个带有 mailto 链接的网页。单击此链接时出现错误。当我将 mailto 链接放在 iframe 之外时，不会发生错误。它可能与 gmail 作为我的默认邮件处理程序有关，但我希望该链接适用于 gmail 用户，当然也适用于其他电子邮件客户端的用户。我怎样才能解决这个问题？

这是进入 iframe 的 .html 文件中的相关内容：

```
<a target="_parent" href="mailto:xxx@xxx.xxx">Contact XXX</a> 
```

这是错误消息。

> X-Frame-Options 拒绝加载： [https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=https://mail.google.com/mail/?extsrc%3Dmailto%26url%3Dmailto： xxx@xxx.xxx&scc=1<mpl=default<mplcache=2](https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=https://mail.google.com/mail/?extsrc%3Dmailto%26url%3Dmailto:xxx@xxx.xxx&scc=1&ltmpl=default&ltmplcache=2) 不允许成帧。

如果它是相关的，我正在 Firefox 上进行测试，但我当然想要一个跨浏览器的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-03T06:12:54.540

1.  更改为 target="_blank" 以打开新标签；

```
 <a target="_blank" href="mailto:xxx@xxx.xxx">Contact XXX</a> 
```

2.  允许 gmail 处理“mailto”：
    *   使用 chrome 访问 gmail.com；
    *   查看地址栏右侧的协议处理程序图标；
    *   点击上方图标，选择“允许”选项；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:41:30.017

做了一个快速测试页面：

```
<html>
<body>
<iframe src="test2.html"></iframe>
</body>
</html> 
```

这是 test2.html 的内容：

```
<a href="mailto:test@test.com" target="_parent">test email</a> 
```

并且将 Gmail 设置为默认处理程序时效果很好。不知道你的问题是什么...

编辑：您是否可能使用扩展程序在 Gmail 中打开 mailto 链接，而不是将其设置为默认处理程序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-16T07:29:37.927

我在 iframe 也有同样的问题。您只需添加以下代码 onclick 元素的 onclick 事件即可打开 mailto 窗口

```
window.top.location='mailto:xxx@xxx.xxx'; 
```

这将在 iframe 中打开您的 mailto 窗口

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T08:54:46.863

尝试设置`target="_top"`

# python - 删除除元素最后一部分之外的所有内容

> ID：16151177
> 
> 赞同：1
> 
> 时间：2013-04-22T15:43:32.870
> 
> 标签：python, list

如果我有一个清单：

```
['12 13 0 21 0.3','2 3 0 1 0.1','12 19 0 2 0.9','22 33 0 3 0.5'] 
```

如何删除除每个元素的最后一部分之外的所有内容，以便列表变为：

```
['0.3','0.1','0.9','0.5'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T15:44:53.093

你可以这样使用[`list comprehensions`](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)and [`rsplit`](http://docs.python.org/3.3/library/stdtypes.html#str.rsplit)：

```
l = ['12 13 0 21 0.3','2 3 0 1 0.1','12 19 0 2 0.9','22 33 0 3 0.5']

print([s.rsplit(' ', 1)[1] for s in l]) 
```

输出：

```
['0.3', '0.1', '0.9', '0.5'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:45:47.040

使用 Python 列表推导，如下所示：

```
l = ['12 13 0 21 0.3','2 3 0 1 0.1','12 19 0 2 0.9','22 33 0 3 0.5']
print [x.rsplit(' ', 1)[1] for x in l]

> ['0.3', '0.1', '0.9', '0.5'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:49:24.430

这会起作用，它使用列表综合方法：

```
list = [i[-3:len(i)] for i in ['12 13 0 2.1', '2.3 43 4.4']] 
```

# java - 我可以用 Java 中 String 数组中的变量命名节点吗？

> ID：16151179
> 
> 赞同：0
> 
> 时间：2013-04-22T15:43:37.900
> 
> 标签：java, arrays, string

我正在尝试创建一个节点并用我存储在字符串数组中的字符串命名它，但它不会接受它。有没有办法做到这一点？

```
String strLine;
while ((strLine = br2.readLine()) != null)   {
    String[] arr=strLine.split(",");

    for (int i = 0; i <arr.length; i++) {
        String v = arr[i];
        Node arr[i] =  new Node(v);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:48:48.590

您不能将变量（或数组元素）的值用作 Java 中的变量名。您可以做的最好的事情是创建一个`Map<String, Node>`作为符号表：

```
String strLine;
Map<String, Node> nodeMap = new HashMap<String, Node>();
while ((strLine = br2.readLine()) != null)   {
    String[] arr=strLine.split(",");

    for (int i = 0; i <arr.length; i++) {
        String v = arr[i];
        nodeMap.put(v, new Node(v));
    }
} 
```

然后稍后您可以`Node`按名称检索。

```
Node n = nodeMap.get("some name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:23:31.327

谢谢大家的帮助，它帮助我修复了我的程序并使它工作我所做的是创建一个顶点构造函数，然后如果没有添加新节点，则只需检查是否有同名的节点。

```
 String strLine;
          while ((strLine = br2.readLine()) != null)   {
          String[] arr=strLine.split(",");

          for (int i = 0; i <arr.length; i++) {
                String v = arr[i];
                String w = arr[++i];
                double weight =Double.parseDouble(arr[++i]);
                if(S.findVertexByName(v) == false)
                {

                    S.addVertex(new Vertex(v));
                    count ++;
                }
                 if(S.findVertexByName(w) == false)
                {

                    S.addVertex(new Vertex(w));
                    count ++;
                }

                S.addEdge(S.getVertexByName(v), S.getVertexByName(w), weight);
               }             
            } 
```

# c# - 返回带有 XML 数据的 HttpResponseMessage

> ID：16151191
> 
> 赞同：6
> 
> 时间：2013-04-22T15:44:45.847
> 
> 标签：c#, xml, asp.net-mvc, linq

我已经使用 .NET 创建了一个 WebAPI。API 从 xml 文件读取/写入数据。我有以下代码，它返回没有根元素的匹配元素。如何让它以root身份返回？

API 控制器：

```
 [HttpGet]
 public HttpResponseMessage GetPerson(int personId)
 {
    var doc = XDocument.Load(path);
    var result = doc.Element("Persons")
           .Elements("Person")
           .Single(x => (int)x.Element("PersonID") == personId);

    return new HttpResponseMessage() { Content = new StringContent(string.Concat(result), Encoding.UTF8, "application/xml") };
 } 
```

结果：

```
<Person>
  <PersonID>1</PersonID>
  <UserName>b</UserName>
  <Thumbnail />
</Person><Person>
  <PersonID>2</PersonID>
  <UserName>b</UserName>
  <Thumbnail />
</Person><Person>
  <PersonID>4</PersonID>
  <UserName>a</UserName>
  <Thumbnail>a</Thumbnail>
</Person> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T16:00:58.760

您可以将结果包装在根元素中：

```
[HttpGet]
public HttpResponseMessage GetPerson(int personId)
{
    var doc = XDocument.Load(path);
    var result = doc
        .Element("Persons")
        .Elements("Person")
        .Single(x => (int)x.Element("PersonID") == personId);

    var xml = new XElement("TheRootNode", result).ToString();
    return new HttpResponseMessage 
    { 
        Content = new StringContent(xml, Encoding.UTF8, "application/xml") 
    };
} 
```

# gwt - CellTable 中的 GWT 填充行

> ID：16151195
> 
> 赞同：1
> 
> 时间：2013-04-22T15:45:02.410
> 
> 标签：gwt, celltable

我目前有一个`CellTable`我用过滤器/分页/排序扩展的。我也在努力添加更多功能。

但是让我感到困扰的一件事是，当您将页面的限制设置为例如 10 时。如果一个对象没有 10 行而只有 5 行并且您在它们之间切换，那么如果定位，表格将上下跳跃在中心。

有没有一种优雅的方法，当pageSize设置为10时，如果表中的行少于10行，就会添加空行？

到目前为止我尝试过的方式会影响我的过滤/排序/分页，这是我不想要的。

编辑1：

```
final AsyncDataProvider<Row> provider = new AsyncDataProvider<Row>() {

      @Override
      protected void onRangeChanged(HasData<Row> display) {

        int start = display.getVisibleRange().getStart();
        int end = start + display.getVisibleRange().getLength();
        end = end >= rows.getFilterList().size() ? rows.getFilterList().size() : end;
        List<Row> sub = rows.getFilterList().subList(start, end);
        System.out.println("Checking if extra rows needed: " +
                                           table.getVisibleItems().size());

               for(int i = table.getVisibleItems().size(); i<10; i++){
                     System.out.println("ADDED EMPTY ROW");
                     sub.add(new Row());
               }

         updateRowData(start, sub);
     }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:47:36.787

我有同样的问题。我通过添加`null`行来解决它。基本上，您需要覆盖`onRangeChange(HasData<T> display)`您的`DataProvider`以添加`null`到代表所要求范围的列表中。您添加足够的`null`内容以填充您想要的范围。

```
@Override
protected void onRangeChanged(HasData<T> display){

    Range range = display.getVisibleRange();

    List<T> listOfObjects = getRange(range);

    for(int i=listOfObject.size(); i<range.getLength(); i++){
        listOfObjects.add(null);
    }

    updateRowData(range.getStart(), listofObjects);

} 
```

在上面的代码`getRange()`中返回一个包含被请求对象的列表（在范围内）

您还必须添加一些 CSS 来为行指定高度。如果您不指定高度，那么行将非常小，因此它们不会填充整个表格。

令人失望的是 GWT 不支持这种类型的填充。这种方式是我发现的最好的方式，但不幸的是，当表格中的行高不同时，这会使一切变得更加困难。

**寻呼**

`Pager`使用上面的解决方案，如果您想要分页，则需要自定义。您可以像这样扩展您的`AsyncDataProvider`with 方法`getVisibleRowCount()`将返回当前子列表中有多少对象实际上是真实数据（不是`null`）。然后，您可以提供对 the 的引用`AsyncDataProvider`并`Pager`覆盖该`createText()`方法：

```
@Override
protected String createText(){

    return getPageStart() + " - " + dataProvider.getVisibileRowCount() + " of "
                 + dataProvider.getTotalRowCount(); 

} 
```

# jquery - jQuery隐藏其他不包含的td

> ID：16151197
> 
> 赞同：0
> 
> 时间：2013-04-22T15:45:15.800
> 
> 标签：jquery, html-table

我的问题是我只想在表格中显示一个 id。我将向您展示一个示例：

```
|--ID1--|--text--|--text--|
|--   --|--text--|--text--|    //Still belongs to ID1
|--   --|--text--|--text--|    //Still belongs to ID1
|--ID2--|--text--|--text--|
|--   --|--text--|--text--|    //Still belongs to ID2
|--   --|--text--|--text--|    //Still belongs to ID2 
```

所以我只想显示 ID1 和以下属于这个 ID 的 td。

你有一个想法准备好了吗？

**编辑：** 你必须想象我从服务器得到一个现成的 html 文件。看起来像这样：http: [//jsfiddle.net/Qmr9K/](http://jsfiddle.net/Qmr9K/)

现在我想显示一个选择，只有红色字段。另一个应该通过 jquery 隐藏。你明白我的意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:59:09.893

```
 <html>
 <table>
   <tr>
     <td rowspan="3">ID1</td>
     <td> text1</td>
     <td> text2</td> 
   </tr>
   <tr>
     <td> text3</td>
     <td> text4</td> 
   </tr>
   <tr>
     <td> text5</td>
     <td> text6</td> 
   </tr>
   <tr>
     <td rowspan="2">ID2</td>
     <td> text7</td>
     <td> text8</td> 
   </tr>
   <tr>
     <td> text9</td>
     <td> text10</td> 
   </tr>
</table>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:57:12.323

你可以使用`rowspan`财产。

```
<table border="1px"> 
<tr>
    <td rowspan="2" valign="top">text</td>
    <td>text</td>
    <td>text</td>
    <td>text</td>
</tr>
 <tr>
    <td>text</td>
    <td>text</td>
    <td>text</td>
</tr>
<tr>
    <td rowspan="2" valign="top">text</td>
    <td>text</td>
    <td>text</td>
    <td>text</td>
</tr>
 <tr>
    <td>text</td>
    <td>text</td>
    <td>text</td>
</tr> 
```

**[现场演示](http://jsfiddle.net/3KgEz/)**

# android - 在 sharedPreferences 中存储 listView 可见性

> ID：16151198
> 
> 赞同：0
> 
> 时间：2013-04-22T15:45:15.970
> 
> 标签：android

```
SharedPreferences preferences = PreferenceManager.
getDefaultSharedPreferences(ClassName.this);
SharedPreferences.Editor editor = preferences.edit();
editor.putString("Info", String.valueOf(List1.getVisibility()));
editor.putString("Office", String.valueOf(List2.getVisibility()));
editor.putString("Education", String.valueOf(List3.getVisibility())); 
```

1.  为什么在可见时`List1.getVisibility()`返回我并且`0``8`隐藏
2.  我是否存储了正确的方式，SharedPreferences 中的可见性。我将如何检索`onCreate()`我的活动的值。我应该 `if /else`为每一个进行检查`ListView`还是我可以做一些更好的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:49:20.633

它返回给你一个常量`View.VISIBLE`, `View.INVISIBLE`, 或`View.GONE`

8 是[View.GONE](https://developer.android.com/reference/android/view/View.html#GONE)常量的值，这就是为什么当你的视图设置为消失时你得到 8 的原因。

要应用共享首选项中的值，您应该能够执行以下操作：

```
List1.setVisibility(preferences.getInt("Info", View.VISIBLE)); 
```

getInt() 的第二个参数是在首选项尚不存在的情况下要使用的默认值。

# floating-point - 常量截断为整数

> ID：16151199
> 
> 赞同：11
> 
> 时间：2013-04-22T15:45:27.877
> 
> 标签：floating-point, go, syntax-error

以下 GO 程序给出了错误：

```
./fft.go:13: constant -6.28319 truncated to integer
./fft.go:13: cannot use -7 * k / N (type int) as type float64 in assignment 
```

程序：

```
package main

import (
    "math"
    "fmt"
)

func main() {
    fmt.Println("Hello world ",math.E)

    var k, N int = 1, 10
    var ans float64 = 0
    var c float64 = (-2.0 * math.Pi * k) / N
    x := make([]float64,N)
    for i := 0; i < len(x); i++ {
        x[i] = 1
    }
    ans = 0
    for i := 0; i < N; i++ {
        ans += x[i] * math.E
    }
    fmt.Println(ans)
} 
```

为什么我不能`int`在一个类型中使用一个`float64`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T15:54:37.037

代替

```
var c float64 = (-2.0 * math.Pi * k) / N 
```

经过

```
var c float64 = (-2.0 * math.Pi * float64(k)) / float64(N) 
```

引用[规范](http://golang.org/ref/spec#Conversions)：

> 当表达式或赋值中混合了不同的数值类型时，需要进行转换。例如，int32 和 int 不是同一类型，即使它们在特定架构上可能具有相同的大小。

Go 使用静态类型并且不会在数字类型之间自动转换。原因可能是为了避免一些错误。例如，应该`float64(2.5) * int(2)`产生什么值和什么类型？结果应该是`int(5)`？ `int(4)`? `float64(5.0)`? 在 Go 中，这不是问题。Go 常见问题解答对此有[更多要说](http://golang.org/doc/faq#conversions)的。

* * *

@jnml 指出，在这种情况下，以下内容就足够了：

```
var c float64 = -2 * math.Pi / float64(N) 
```

# spring - Spring上传到服务器并将文件路径保存到数据库

> ID：16151200
> 
> 赞同：0
> 
> 时间：2013-04-22T15:45:28.447
> 
> 标签：spring, file, download

我正在为我的项目使用 spring framework 3.2，并且我有一个包含许多表单元素和上传功能的表单。我想将表单保存到数据库，同时将文件上传到我的本地驱动器，然后将文件的路径保存到数据库。

文件路径将用于稍后检索文件。

我可以将表单作为对象单独保存到数据库中，但我不确定如何将上传保存集成到服务器并将路径添加到数据库。我将不胜感激有关如何去做的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:52:31.103

```
<html>
    <head>
        <title>Upload a file please</title>
    </head>
    <body>
        <h1>Please upload a file</h1>
        <form method="post" action="/form" enctype="multipart/form-data">
            <input type="text" name="name"/>
            <input type="file" name="file"/>
            <input type="submit"/>
        </form>
    </body>
</html> 

@Controller
public class FileUploadController {

@RequestMapping(value = "/form", method = RequestMethod.POST)
public String handleFormUpload(@RequestParam("name") String name,
    @RequestParam("file") MultipartFile file) {

    if (!file.isEmpty()) {
        byte[] bytes = file.getBytes();
        // store the bytes somewhere
       return "redirect:uploadSuccess";
   } else {
       return "redirect:uploadFailure";
   }
}

} 
```

[参考1](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-multipart-forms)

[一步步](http://www.codejava.net/frameworks/spring/upload-files-with-spring-mvc-eclipse-based-tutorial?showall=1&limitstart=)

# direct3d - DXGI：试图从输出（监视器）中获取正确的显示模式

> ID：16151201
> 
> 赞同：2
> 
> 时间：2013-04-22T15:45:30.053
> 
> 标签：direct3d, dxgi

我目前遇到了一个讨厌的小问题。我开发了一个将 DXGI 模式描述归零的应用程序。结构并调用 FindClosestMatchingMode() 来像宣传的那样“倾向于桌面分辨率”。

如果笔记本电脑完全在自己的显示器上运行，这很好用——只要我插入另一台显示器，它就会发疯。在我扩展我的桌面的情况下，它仍然可以正确获得笔记本电脑显示器的分辨率，但附加的显示器（运行 1080p）会产生 800*480 的偏好 :) （当然，穷人的 16:10，但是......）

对克隆/组合的监视器执行相同的操作（导致 1 个输出设备），即使它们的分辨率相同，也会产生相同的 800*480 废话。

是什么赋予了？有没有人可能找到一种方法来通过 DXGI 正确获取显示器的当前模式，或者找到一个完全不同但功能性的方法来解决这个问题的指针？

在 D3D9 的日子里生活更轻松 =)

- 更新

事实证明，与内部显示器相比，在属于外部显示器的 IDXGIOutput 实例上进行的任何 FindClosestMatchingMode() 调用的行为都不同（并且在大多数情况下是完全错误的），即使它们的原始分辨率相同。最重要的是，其他系统没有这个问题，但我无法绕过支持这台特定的笔记本电脑，包括它的驱动程序。

是时候进行一个好的旧设置对话框了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:25:42.607

不是最好的解决方案，但由于我被限制在这些确切的机器上，我决定通过 GetSystemMetrics() (SM_CXSCREEN/SM_CYSCREEN) 获取显示器的当前分辨率，这无疑只适用于主显示器，但还有其他方法，并将此分辨率提供给提供给 FindClosestMatchingMode() 的 ModeToMatch 结构。

然后它会选择正确的（桌面）分辨率。

当然，更好的答案是非常受欢迎的；）

# sql-server - 插入速度临时表与普通表

> ID：16151202
> 
> 赞同：1
> 
> 时间：2013-04-22T15:45:31.997
> 
> 标签：sql-server, temp-tables, sql-insert

关于临时表与表变量有很多线程。

但是，我的问题是，是什么让临时表比 Microsoft SQL Server 中的普通表快得多？

如果我插入到临时表中，我的存储过程的运行速度会快 5 倍，然后将数据从中移出到普通表中。

最明显的答案是键/索引，但普通表根本没有任何键。

还有什么能让它跑得更快？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:47:49.267

几种可能：

1.  TempDB 的 I/O 速度可能更快
2.  查询可以是并行的，并且可以利用多个 tempdb 数据文件（如果您已将其配置为这样做）
3.  TempDB 可能有空间用于插入，而用户数据库必须等待自动增长
4.  由于类似的原因，用户数据库也可能对日志记录有限制
5.  用户数据库可能必须“唤醒”——例如，如果它的 AutoClose 设置为 ON

# javascript - Backbone：使用自定义同步方法调用成功

> ID：16151206
> 
> 赞同：4
> 
> 时间：2013-04-22T15:45:40.683
> 
> 标签：javascript, backbone.js, callback

我的应用程序中有一个自定义`sync`方法`backbone.js`。我的所有模型都调用此方法，但由于我`success`在此方法中进行了覆盖，因此不再调用来自各个模型的成功方法。这就是我的意思 - 以下是我的自定义同步方法：

```
app.customSync = function(method, model, options) {
    var success = options.success,
        error = options.error,
        customSuccess = function(resp, status, xhr) {
            //call original, trigger custom event
            if(con)console.log('in custom success');
            success(resp, status, xhr);
        },
        customError = function(resp, status, xhr) {
            if(con)console.log('in custom error');
            error(resp, status, xhr);
        };
    options.success = customSuccess;
    options.error = customError;
    Backbone.sync(method, model, options);
};
Backbone.Model.prototype.sync = app.customSync; 
```

这是我尝试从模型保存中调用成功的示例：

```
this.model.save({
    success:function(model, response){
         if(con)console.log('this is never called');
    }
}); 
```

有谁知道我如何仍然可以与自定义成功方法进行自定义同步，并从我的个人保存中调用成功？

作为旁注，我尝试调用`success` `msuccess`，`model.save`但`msuccess`在自定义同步中未定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:58:28.890

[Model.save](http://backbonejs.org/#Model-save)的第一个参数是您希望修改的属性的散列，选项排在第二位，并保存成功/错误回调。

尝试

```
this.model.save({}, {
    success: function() {
        console.log('save success');
    }
}); 
```

还有一个小提琴可以在工作中看到这个[http://jsfiddle.net/nikoshr/XwfTB/](http://jsfiddle.net/nikoshr/XwfTB/)

# xcode - Xcode - AudioToolbox/AudioToolbox.h 文件未找到

> ID：16151217
> 
> 赞同：0
> 
> 时间：2013-04-22T15:46:21.983
> 
> 标签：xcode, audiotoolbox

我开始使用 Xcode，并且正在研究播放声音的方式。我已经实现了一个使用 AudioToolbox 框架播放声音的小项目。一切都很好：我可以正常构建和运行，应用程序也正常运行，但是今天当我重新打开项目时，我有这个错误“找不到文件”。很奇怪，我的项目中没有修改任何东西，框架也链接到我的项目中。有没有人和我一样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:56:18.623

首先尝试通过转到“产品”下的菜单栏（最顶部）并单击“清理”来清理您的项目。如果它仍然不起作用：进入构建阶段，删除框架，然后重新添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T11:04:15.260

如果在您使用旧项目并尝试使用新的 Xcode 版本构建时发生这种情况，则可能是由于在项目中本地保存了“.framework”文件。请检查项目文件夹中的此类文件并将其删除，然后使用“构建阶段”选项卡链接新框架。

# .net - silverlight 5可以通过.net库访问USB端口吗

> ID：16151230
> 
> 赞同：0
> 
> 时间：2013-04-22T15:46:57.737
> 
> 标签：.net, silverlight, dll, usb

我有一个指纹读取器，它带有一个 .NET 库 dll 可以与之交互。是否可以使用 silverlight 访问该指纹读取器（通过 dll）？

如果silverlight不能做到这一点，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:40:47.067

如果 dll 在 COM 中注册应该可以工作

# sql - 是否可以在 PostgreSQL 中创建一个包含经络指标的时间戳列？

> ID：16151233
> 
> 赞同：0
> 
> 时间：2013-04-22T15:47:04.967
> 
> 标签：sql, database, postgresql

我正在尝试创建一个类型的列，`TIMESTAMP`以便以以下格式存储时间戳（即包括“AM”/“PM”指示器）：

```
20-04-2013 06:56:37 AM 
```

我想我可以使用该`to_char(..)`函数并将时间戳存储为值，但是用香草列是否`TEXT`可以达到相同的效果？`TIMESTAMP`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T03:34:44.217

如果要格式化时间戳，请在使用`to_char`时使用`SELECT`它，或在客户端中格式化日期。

时间戳没有格式。它们在数据库中存储为自 1970-01-01 UTC 以来的小数秒数，并且它们被格式化为 ISO 时间戳以用于输入和输出。在数据库中，它们只是一个数字。

没有办法覆盖默认的时间戳输出格式，因为这会导致设置可能会混淆期望单一一致格式的应用程序。

如果应用程序需要不同的日期输出格式，它必须通过适当的`to_char`调用来请求它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:11:22.343

这大致是您要寻找的吗？

```
select to_char(now(), 'DD-MM-YYYY HH12:MI:SS AM') 
```

# xml - JSF 2 异常：com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException：3 字节 UTF-8 序列的字节 2 无效

> ID：16151234
> 
> 赞同：0
> 
> 时间：2013-04-22T15:47:06.930
> 
> 标签：xml, jsf-2, character-encoding

我正在使用 JSF 2 和 Tomcat 6 开发 Web 应用程序。我遇到以下异常：`com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence`当我尝试加载有问题的页面时。我在显示文本中强调了西班牙字符，我发现它们导致了异常。例如，`<p>ñ</p>`导致错误，但`<p>n</p>`工作正常。请注意，此示例文本是硬编码的并包含在`<ui:define>`标签中。

我还会注意到在客户端 .xhtml 文件（有问题的页面）中使用了一个模板。模板文件有`<?xml version="1.0" encoding="UTF-8"?>`声明。关于可能是什么问题的任何建议？我搜索了互联网和 SO，有很多关于这个特定异常的问题，但大多数不涉及 JSF，而是涉及影响可能是问题原因的其他细节。感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:28:29.023

经过进一步调查（反复试验），我通过更改 Eclipse 中的设置使其工作。我没有在问题中提到我正在使用 Eclipse，因为我不知道这个问题……事后诸葛亮。无论如何，这就是我所做的让我的页面显示带有西班牙重音字符的文本：在 Eclipse 中，在 下`Preferences/General/Workspace`，有一个“文本文件编码”选项设置为默认值“Cp1252”。我将其更改为使用 UTF-8，并且它起作用了。我还更改了“编码”设置以在以下每个下使用 UTF-8：`Preferences/Web/CSS Files`、`Preferences/Web/HTML Files`和`Preferences/XML/XML Files`. 在最终找到“常规/工作区”设置之前，我已经更改了这些（没有成功显示重音字符），所以我不确定它们是否有影响。

# jquery - 如何让一个jquery弹出，弹出有文字

> ID：16151242
> 
> 赞同：0
> 
> 时间：2013-04-22T15:47:41.423
> 
> 标签：jquery, html, css

[http://madaxedesign.co.uk/](http://madaxedesign.co.uk/)

在我的主页上，我在页面底部创建了一个名为“get in touch”的锚点，它有一个 Contact-pop-up 类，并且在 Jquery 中添加了 a.contact-pop-up 到 Jquery所以 onClick 它将执行脚本，但是当我按下 get in touch 锚点进行测试时，它似乎不起作用。

我想知道是否有人知道为什么会这样？

jQuery

```
 $('a.contact , a.contact_footer , a.contact-pop-up').click(function() {
    $("#popup").load("contact.php");
    // Getting the variable's value from a link
    var 
    show = $('#popup').css('display', 'block'),
    popup = $(this).attr('href');

    //Fade in the Popup and add close button
    $(popup).fadeIn(300);

    //Set the center alignment padding + border
    var popMargTop = ($(popup).height() + 24) / 2; 
    var popMargLeft = ($(popup).width() + 24) / 2; 

    $(popup).css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $('body').append('<div id="mask"></div>');
    $('#mask').fadeIn(300);

    return false;
});

// When clicking on the button close or the mask layer the popup closed
$('a.cross, #mask').live('click', function() { 
  $('#mask , #popup').fadeOut(300 , function() {
    $('#mask').remove();  
}); 
return false;
}); 
```

HTML：

```
 <p>Please take the time to look through my portfolio and if anything interests you or   have any questions, please 
```

保持联系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:57:45.243

可能你想要这样的东西......

HTML：

```
<div class="popup" id="someId">
    <p class="arch-pop-msg">Please take the time to look through my portfolio and if anything interests you or   have any questions, please</p>
</div> 
```

JS：

```
$(".popup").dialog({ modal: true, 
                     position : 'center', 
                     width: 380, 
                     height: 90, 
                     autoOpen: false, 
                     closeOnEscape: true, 
                     resizable: false,  
                     showTitlebar: false  
                   }); 
```

CSS：根据需要添加 css

# css - 在 Firefox 中删除动画会反转，但在 webkit 中它会重新开始

> ID：16151246
> 
> 赞同：1
> 
> 时间：2013-04-22T15:47:57.017
> 
> 标签：css, animation, webkit, mozilla

**如果删除动画，为什么 Firefox 会将动画反转回开始位置，而 webkit 会将其捕捉回开始位置？他们处理这个问题的方式有区别吗？**

我有一个动画，可以将唱片套的图像向下翻转到观看者（3D）。这个想法是模拟翻阅记录。

当第一张图像向下翻转时，您可以看到后面的图像出现并显示其后面的下一张图像。

它使用填充模式转发在最后停止动画，并设置了一个回调侦听器，我用它来更新“正面”图像，因为由于背面可见性，此时它被隐藏了。它实际上已更新为显示在后面的图像，因此一旦它返回起点，它将是下一个翻转的图像。完成后，我使用`document.getElementById('flip_rec').className='';`删除动画。这会将动画返回到起点，并准备好下次重新启动它。然后我更新现在隐藏的反向和后面的图像并设置一个标志以允许动画再次运行。

所有这一切都很重要，因为当我在 webkit 中删除图像时，它会立即将动画重新开始 - 这很好，因为你没有注意到图像已被替换的事实 - 但在 Firefox 中它会反转动画。因此，您会看到图像向后翻转，逐渐显示新的正面图像，并让您看到后面的图像更新。效果毁了。

这是我用来设置动画的 CSS。

```
.flip1
{
-webkit-animation-name: mymove1;
   -moz-animation-name: mymove1;
        animation-name: mymove1;
-webkit-animation-duration: 1s;
   -moz-animation-duration: 1s;
        animation-duration: 1s;
-webkit-animation-timing-function: linear;
   -moz-animation-timing-function: linear;
       -animation-timing-function: linear;
     /*don't go back to that start! Yet.*/  
-webkit-animation-fill-mode: forwards; 
   -moz-animation-fill-mode: forwards;
        animation-fill-mode: forwards;
} 
```

# r - 如何求解 R 中 b=0 的线性方程组

> ID：16151251
> 
> 赞同：1
> 
> 时间：2013-04-22T15:48:07.883
> 
> 标签：r, system, linear-equation

我`R`需要求解一个线性方程组 (Ax=b)，其中 b=0。通过使用`solve()`它只返回一个零向量作为答案，但我想要系统的非零解决方案。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:08:49.660

我认为您正在寻找矩阵的零空间`A`。尝试 ：

```
library(MASS)
Null(t(A))

R > (A <- matrix(c(1,2,3,2,4,7), ncol = 3, byrow = T))
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    4    7
R > Null(t(A))
              [,1]
[1,] -8.944272e-01
[2,]  4.472136e-01
[3,]  7.771561e-16
R > (A <- matrix(c(1,2,3,2,4,6), ncol = 3, byrow = T))
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    4    6
R > Null(t(A))
           [,1]       [,2]
[1,] -0.5345225 -0.8017837
[2,]  0.7745419 -0.3381871
[3,] -0.3381871  0.4927193 
```

当心。有一些舍入误差。

此外，表示`r`为矩阵 的秩`A`，并表示为`q`的列数`A`。如果 r = q，那么零向量是唯一的答案。如果 r > q，则无解。如果 r < q，我们可以使用上面的`Null`函数来获得 的零空间`A`，但请记住它们不是唯一的，无论是大小还是方向。

参考：[http ://stat.ethz.ch/R-manual/R-patched/library/MASS/html/Null.html](http://stat.ethz.ch/R-manual/R-patched/library/MASS/html/Null.html)

# javascript - 如何添加标签/标签以显示在多个对象的顶部，以便在用户单击对象时标签始终面向相机？

> ID：16151255
> 
> 赞同：2
> 
> 时间：2013-04-22T15:48:32.637
> 
> 标签：javascript, three.js, webgl

本质上，我要说的是我想创建一个标签或标签，它出现在对象的顶部/表面上，以便当用户单击对象时标签始终面向相机，即使对象旋转也是如此。

我该怎么做呢？

我被告知要使用正交相机（但我不确定如何使用？）和 CSS 作为标签（参见上一篇文章：[如何让我的文本标签始终面对相机？也许使用精灵？](https://stackoverflow.com/questions/16001208/how-can-i-make-my-text-labels-face-the-camera-at-all-times-perhaps-using-sprite)）

CSS和html中的标签如下。但是，我也想对几个对象执行此操作，所以我想在这种情况下，我可以为每个多维数据集列出我想要的所有标签。

CSS：

```
label {
    vertical-align: middle;
    display: table-cell;
    background-color : #99FFCC;
border: 1px solid #008000;
width: 150px;
} 
```

HTML：

```
<div id="Cube1">
    <label>Cube 1</label>
</div> 
```

以前的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
        <title>three.js canvas - interactive - cubes</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
                body {
                        font-family: Monospace;
                        background-color: #f0f0f0;
                        margin: 0px;
                        overflow: hidden;
                }
        </style>
</head>
<body>

        <script src="js/three.min.js"></script>

        <script src="js/stats.min.js"></script>

        <script>

                var container, stats;
                var camera, scene, projector, renderer;
                var projector, mouse = { x: 0, y: 0 }, INTERSECTED;
                var particleMaterial;
                var currentLabel = null;

                var objects = [];

                init();
                animate();

                function init() {

                        container = document.createElement( 'div' );
                        document.body.appendChild( container );

                        var info = document.createElement( 'div' );
                        info.style.position = 'absolute';
                        info.style.top = '10px';
                        info.style.width = '100%';
                        info.style.textAlign = 'center';
                        info.innerHTML = '<a href="http://threejs.org" target="_blank">three.js</a> - clickable objects';
                        container.appendChild( info );

                        camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
                        camera.position.set( 0, 300, 500 );

                        scene = new THREE.Scene();

                        var geometry = new THREE.CubeGeometry( 100, 100, 100 );

                        for ( var i = 0; i < 10; i ++ ) {

                                var object = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 } ) );
                                object.position.x = Math.random() * 800 - 400;
                                object.position.y = Math.random() * 800 - 400;
                                object.position.z = Math.random() * 800 - 400;

                                object.scale.x = Math.random() * 2 + 1;
                                object.scale.y = Math.random() * 2 + 1;
                                object.scale.z = Math.random() * 2 + 1;

                                object.rotation.x = Math.random() * 2 * Math.PI;
                                object.rotation.y = Math.random() * 2 * Math.PI;
                                object.rotation.z = Math.random() * 2 * Math.PI;

                                object.label = "Object " + i;

                                scene.add( object );

                                objects.push( object );

                        }

                        var PI2 = Math.PI * 2;
                        particleMaterial = new THREE.ParticleCanvasMaterial( {

                                color: 0x000000,
                                program: function ( context ) {

                                        context.beginPath();
                                        context.arc( 0, 0, 1, 0, PI2, true );
                                        context.closePath();
                                        context.fill();

                                }

                        } );

                        projector = new THREE.Projector();

                        renderer = new THREE.CanvasRenderer();
                        renderer.setSize( window.innerWidth, window.innerHeight );

                        container.appendChild( renderer.domElement );

                        stats = new Stats();
                        stats.domElement.style.position = 'absolute';
                        stats.domElement.style.top = '0px';
                        container.appendChild( stats.domElement );

                        document.addEventListener( 'mousedown', onDocumentMouseDown, false );

                        //

                        window.addEventListener( 'resize', onWindowResize, false );

                }

                function onWindowResize() {

                        camera.aspect = window.innerWidth / window.innerHeight;
                        camera.updateProjectionMatrix();

                        renderer.setSize( window.innerWidth, window.innerHeight );

                }

                function onDocumentMouseDown( event ) {

                        event.preventDefault();

                        var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );
                        projector.unprojectVector( vector, camera );

                        var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );

                        var intersects = raycaster.intersectObjects( objects );

                        if ( intersects.length > 0 ) {

                        if ( intersects[ 0 ].object != INTERSECTED ) 
                                        {

                                         // restore previous intersection object (if it exists) to its original color
                                        if ( INTERSECTED ) {

                                        INTERSECTED.material.color.setHex( INTERSECTED.currentHex ); } 

                                        // store reference to closest object as current intersection object
                                        INTERSECTED = intersects[ 0 ].object;
                                        // store color of closest object (for later restoration)
                                        INTERSECTED.currentHex = INTERSECTED.material.color.getHex();
                                        // set a new color for closest object
                                        INTERSECTED.material.color.setHex( 0xffff00 );

                                        var canvas1 = document.createElement('canvas');
                                        var context1 = canvas1.getContext('2d');
                                        context1.font = "Bold 40px Arial";
                                        context1.fillStyle = "rgba(255,0,0,0.95)";
                                        context1.fillText(INTERSECTED.label, 0, 50);

                                        // canvas contents will be used for a texture
                                        var texture1 = new THREE.Texture(canvas1) 
                                        texture1.needsUpdate = true;

                                        var material1 = new THREE.MeshBasicMaterial( {map: texture1, side:THREE.DoubleSide } );
                                        material1.transparent = true;

                                        var mesh1 = new THREE.Mesh(
                                        new THREE.PlaneGeometry(canvas1.width, canvas1.height),
                                        material1

                                );
                                        mesh1.position = intersects[0].point;
                                        if (currentLabel)
                                                scene.remove(currentLabel);
                                        scene.add( mesh1 );                             
                                        currentLabel = mesh1;
                        } 

                        else // there are no intersections
                                        {
                                // restore previous intersection object (if it exists) to its original color
                                if ( INTERSECTED ) {
                                        console.log("hello");
                                        INTERSECTED.material.color.setHex( INTERSECTED.currentHex );
                                        }
                                        // remove previous intersection object reference
                                        //     by setting current intersection object to "nothing"
                                        INTERSECTED = null;
                                        mesh1 = null; 
                                        mesh1.position = intersects[0].point; 
                                        scene.add( mesh1 );

                                        }

                                //var particle = new THREE.Particle( particleMaterial );
                                //particle.position = intersects[ 0 ].point;
                                //particle.scale.x = particle.scale.y = 8;
                                //scene.add( particle );

                        }

                        /*
                        // Parse all the faces
                        for ( var i in intersects ) {

                                intersects[ i ].face.material[ 0 ].color.setHex( Math.random() * 0xffffff | 0x80000000 );

                        }
                        */

                }

                //

                function animate() {

                        requestAnimationFrame( animate );

                        render();
                        stats.update();

                }

                var radius = 600;
                var theta = 0;

                function render() {

                        theta += 0.1;

                        camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );
                        camera.position.y = radius * Math.sin( THREE.Math.degToRad( theta ) );
                        camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );
                        camera.lookAt( scene.position );

                        renderer.render( scene, camera );

                }

        </script>

</body> 
```

如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T01:21:28.720

我对 Three.js 不是特别熟悉，但通常的步骤如下：

*   在对象表面上选择要对齐标签的点。
*   用于`projector.projectVector`从世界中的点获取屏幕上的点。
*   （您可能需要将结果从 NDC（-1 到 1）缩放到画布（0 到 canvas.width）坐标；我不确定。）
*   使用 X 和 Y 为标签设置 CSS 绝对定位。

这是我在[Cubes](https://github.com/kpreid/cubes)项目中编写的用于执行相同操作的代码（不使用 Three.js，但原理相同）。它稍微复杂一些，因为它所做的是定位元素，使其*靠近*由一组点表示的对象（提供给传递给的回调`pointGenerator`）。当物体不在相机的视野范围内时，它还会尝试做一些明智的事情。

随意重用此代码并根据自己的喜好对其进行调整。

```
// Position an overlay HTML element adjacent to the provided set of points.
function positionByWorld(element, keepInBounds, pointGenerator) {
  var canvasStyle = window.getComputedStyle(theCanvas,null);
  var canvasWidth = parseInt(canvasStyle.width, 10);
  var canvasHeight = parseInt(canvasStyle.height, 10);

  var elemStyle = window.getComputedStyle(element, null);
  var elemWidth = parseInt(elemStyle.width, 10);
  var elemHeight = parseInt(elemStyle.height, 10);

  var slx = Infinity;
  var sly = Infinity;
  var shx = -Infinity;
  var shy = -Infinity;
  var toScreenPoint = vec4.create();

  pointGenerator(function (x, y, z, w) {
    toScreenPoint[0] = x;
    toScreenPoint[1] = y;
    toScreenPoint[2] = z;
    toScreenPoint[3] = w;
    renderer.transformPoint(toScreenPoint);
    toScreenPoint[0] /= toScreenPoint[3];
    toScreenPoint[1] /= toScreenPoint[3];
    toScreenPoint[2] /= toScreenPoint[3];
    if (toScreenPoint[3] > 0) {
      slx = Math.min(slx, toScreenPoint[0]);
      shx = Math.max(shx, toScreenPoint[0]);
      sly = Math.min(sly, toScreenPoint[1]);
      shy = Math.max(shy, toScreenPoint[1]);
    }
  });

  if (shx > -1 && shy > -1 && slx < 1 && sly < 1 /* visible */) {
    // convert to screen
    slx = (slx + 1) / 2 * canvasWidth;
    //shx = (shx + 1) / 2 * canvasWidth;
    //sly = (sly + 1) / 2 * canvasHeight;
    shy = (shy + 1) / 2 * canvasHeight;
    if (keepInBounds) {
      slx = Math.max(0, Math.min(canvasWidth - elemWidth, slx));
      shy = Math.max(0, Math.min(canvasHeight - elemHeight, shy));
    }
    element.style.left   = slx + "px";
    element.style.bottom = shy + "px";
  } else {
    element.style.left   = canvasWidth + "px";
  }
} 
```

—<a href="https://github.com/kpreid/cubes/blob/5a26a35769734a50140a39638ff7e008544b943b/main.js#L107">永久链接在 GitHub

# javascript - 如何在 chrome 控制台中完全打印大数组？

> ID：16151256
> 
> 赞同：47
> 
> 时间：2013-04-22T15:48:37.117
> 
> 标签：javascript, google-chrome, console, formatting, google-chrome-devtools

我想在 Chrome 控制台中打印一个数组（uniqueNames）：

```
> console.log(uniqueNames) 
```

但我遇到的问题是之后

```
> ["Theodor", "Albertus", /* 95 other elements */ "Andreas", "Bernd", "Roland"…] <--- dots here 
```

![截屏](https://i.stack.imgur.com/OuyAM.png)

如何像前 100 个元素一样打印整个数组？我想复制它并在另一个应用程序中使用。或者也许可以将这个数组从 Chrome 控制台写入文件（也在一行中，而不是整个日志）？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2015-01-24T15:16:57.620

要在控制台中打印完整数组，您可以执行以下操作： `console.log(JSON.stringify(uniqueNames))`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-22T16:44:47.680

只需加入所有元素，用 "," 分隔在字符串中：

```
uniqueNames.join("\",\"") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-19T22:23:53.847

我正在寻找[console.table](https://developer.mozilla.org/en-US/docs/Web/API/Console/table)（数组）：

[![在此处输入图像描述](https://i.stack.imgur.com/Flfie.png)](https://i.stack.imgur.com/Flfie.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-23T16:33:34.843

如果主要目的是复制输出，请将其存储在变量中并使用该`copy`函数。

```
copy(myLargeContentVariable) 
```

# c++ - Boost Timer 24 小时格式

> ID：16151257
> 
> 赞同：2
> 
> 时间：2013-04-22T15:48:40.043
> 
> 标签：c++, boost, timer, formatting, duration

我`boost::timer::cpu_timer`用来计算算法的“用户处理时间”，如下所示：

```
boost::timer::cpu_timer timer;

boost::timer::nanosecond_type userTime = timer.elapsed().user; 
```

`userTime`我的问题是如何格式化`HH::MM::SS.mmm`格式？我知道我可以自己编写代码，但我期待 Boost 提供一些方法来做到这一点。

我遇到了[这个例子](http://www.boost.org/doc/libs/1_47_0/doc/html/chrono/users_guide.html#chrono.users_guide.examples.time_point.24_hours_display)，但它使用了`boost::chrono::duration<Rep, Period>`，我不知道如何从`boost::timer::nanosecond_type`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:43:07.843

您需要转换`nanosecond_type`为.`duration``time_point`

```
#include <iostream>
#include <boost/timer/timer.hpp>
#include <boost/chrono.hpp>
#include <boost/format.hpp>

namespace chrono = boost::chrono;

int main()
{
    // get now time & start timer
    chrono::system_clock::time_point start_time = chrono::system_clock::now();
    boost::timer::cpu_timer timer;

    for (int i = 0; i < 100000; ++i) {}

    // elapsed time conversion to time_point
    chrono::system_clock::time_point end_time
        = chrono::time_point_cast<chrono::system_clock::duration>(
                start_time + chrono::nanoseconds(timer.elapsed().user));

    // time_point conversion to time_t&tm
    std::time_t time = chrono::system_clock::to_time_t(end_time);
    std::tm* t = std::localtime(&time);

    // formatting
    std::size_t fractional_seconds = chrono::duration_cast<chrono::milliseconds>(
                                        end_time.time_since_epoch()
                                     ).count() % 1000;
    std::string s = (boost::format("%d:%d:%d.%d")
                        % t->tm_hour
                        % t->tm_min
                        % t->tm_sec
                        % fractional_seconds
                    ).str();
    std::cout << s << std::endl;
} 
```

可能的输出：

```
10:42:55.445 
```

# model-view-controller - 使用 joomla 组件刷新页面

> ID：16151259
> 
> 赞同：0
> 
> 时间：2013-04-22T15:49:04.320
> 
> 标签：model-view-controller, joomla, joomla2.5

我的 tmpl/default.php 中有一个简单的表单：

```
<form id='AddForm' action="<?php echo JRoute::_('index.php?option=com_mycomponent&task=addcam'); ?>" >
            <p>
            <label for="CamName">Name:
            </label>
            <input type="text" id="CamName" name="cam_name" />
            </p>
            <button type='submit' class='submit_cam' name='addcam' value='Add'>Add</button>
            <button type='reset' class='cancel_changes' name='cancel_changes' value='Cancel'>Cancel</button>
        </form> 
```

在我的 controller.php 文件中，我正在尝试处理这些值：

```
function addcam()
{
    $add_name=JRequest::getString('cam_name');
    $model = &$this->getModel();
    $model->AddWebcam($add_name); //send to model to add to DB
} 
```

在我的模型中，我只返回查询结果。通过这个实现，我只是被路由到一个空页面。我想让它刷新当前页面。通常你会这样做，`action=""`但在我的情况下，我需要它路由到`addcam`控制器中调用的函数。还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:42:03.737

在 Joomla 中定向任务时的一种常见技术是让该函数在最后执行完全重定向到视图。这可以防止页面刷新尝试重新提交数据，并为客户端提供更清晰的 url。为此，请尝试以下操作：

```
function addcam()
{
    $add_name=JRequest::getString('cam_name');
    $model = &$this->getModel();
    $model->AddWebcam($add_name); //send to model to add to DB
    JFactory::getApplication()->redirect(JRoute::_(index.php?option=com_mycomponent&view=whatever));
} 
```

显然，将 JRoute 位更新为您实际需要的 url。如果您愿意，还可以包含一条消息（例如“已保存！”）：[http ://docs.joomla.org/JApplication::redirect/1.6](http://docs.joomla.org/JApplication::redirect/1.6)

# php - 无法使用函数将 $_POST 数组保存到数据库

> ID：16151265
> 
> 赞同：0
> 
> 时间：2013-04-22T15:49:22.250
> 
> 标签：php, arrays, function, post, for-loop

我有一个具有多个同名输入的表单，从而生成一个数组。我想将此`$_POST`数组传递给一个函数，该函数将处理该数组并将其保存到数据库中。

我之前在不使用函数的情况下没有任何问题，但现在我想将它全部包含在一个漂亮的整洁函数调用中，它不会这样做，我不知道为什么？

有问题的输入/后变量被命名`option[]`并作为`$_POST['option']`. 这是功能：

```
function newVariant($name, $option) {
global $db;
global $table_prefix;
$table = $table_prefix . "variants";

$query = $db->prepare("INSERT INTO $table(name) VALUES(:name)");
$query->bindParam(":name", $name);

if (!$query->execute()) {
    die(showMessage("Error!","There has been a problem saving your variant. Please try again or contact technical support if the problem persists.",""));
    }

$variant_id = $db->lastInsertId('id');

for($i = 0; $i < count($option); $i++) {
   if($option[$i] != "") {

      $table2 = $table_prefix . "variant_items";
      $query2 = $db->prepare("INSERT INTO $table2(variant, option) VALUES(:variant, :option)");
      $query2->bindParam(":variant", $variant_id);
      $query2->bindParam(":option", $option[$i]);

      if (!$query2->execute()) {
         die(showMessage("Error!","There has been a problem saving your variant. Please try again or contact technical support if the problem persists.",""));
      }
   }
}

$redirect = renderLink("/beyond/?act=admin&sub=variants", "true");
showMessage("Saving variant...<META HTTP-EQUIV=\"Refresh\" Content=\"1; URL=$redirect\">","","");
} 
```

这是我在日志中遇到的错误：

```
PHP Fatal error:  Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'option) VALUES(?, ?)' at line 1' in /Users/adampcollings/Sites/Hot Mint Development/beyond/php/functions/product.php:131
Stack trace:
#0 /Users/adampcollings/Sites/Hot Mint Development/beyond/php/functions/product.php(131): PDO->prepare('INSERT INTO bb_...')
#1 /Users/adampcollings/Sites/Hot Mint Development/beyond/html/admin/new-variant.php(5): newVariant('Test', Array)
#2 /Users/adampcollings/Sites/Hot Mint Development/beyond/php/html.php(19): include('/Users/adampcol...')
#3 /Users/adampcollings/Sites/Hot Mint Development/beyond/html/admin.php(10): subElement('admin', 'new-variant')
#4 /Users/adampcollings/Sites/Hot Mint Development/beyond/php/html.php(8): include('/Users/adampcol...')
#5 /Users/adampcollings/Sites/Hot Mint Development/beyond/index.php(14): siteElement('a in /Users/adampcollings/Sites/Hot Mint Development/beyond/php/functions/product.php on line 131 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:59:48.127

根据上面的评论线程，您应该尝试几件事。

首先，在调试应用程序时始终启用错误报告。要在您的脚本中执行此操作，请添加：

```
error_reporting(E_ALL); 
```

到脚本的顶部。

其次，确保`$options`包含您期望的数据。在代码的某处，添加以下行：

```
var_dump($options); 
```

这将向您显示`$options`. 如果它不包含您期望的值，请检查您的提交过程。

最后，如果`$options`包含预期的数据，请检查您的表结构以确保您的查询匹配并插入正确的值。

编辑：在您发布 MySQL 错误后，我交叉检查了[MySQL Reserved Words list](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)。“选项”一词在列表中。因此，查询失败，因为该词未被识别为列名。尝试用反引号包围列名：

```
$query2 = $db->prepare("INSERT INTO $table2(`variant`, `option`)... 
```

# java - 添加 Web 界面以访问应用程序日志

> ID：16151268
> 
> 赞同：1
> 
> 时间：2013-04-22T15:49:26.730
> 
> 标签：java, logging, logback

我在我的应用程序中使用 Logback，我希望可以通过基于 Web 的控制台访问一些日志。

我想在我的应用程序中启动一个嵌入式 Jetty 并拥有一个日志浏览器 webapp。

是否有针对类似任务的开箱即用解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:07:18.490

您可以使用[splunk](http://www.splunk.com/download)通过 web 查看日志

# sql-server-2008 - 在 SQL Server 查询中转换

> ID：16151269
> 
> 赞同：0
> 
> 时间：2013-04-22T15:49:34.410
> 
> 标签：sql-server-2008, stored-procedures, casting

我在执行一个 SQL 查询时遇到问题，下面是我的存储过程

**询问**

```
ALTER PROCEDURE ProcName
(
     @iID VARCHAR(50),
     @AccountID INT
)
AS
SET NOCOUNT ON

DECLARE @Sql VARCHAR(MAX)

SET @Sql = 'DELETE FROM ReferringPhysician WHERE iID IN(' + @iID + ') AND AccountID = '+ @AccountID + ''
EXEC (@Sql) 
```

我正在尝试执行此查询，但它给了我错误，因为我正在使用`exec()`，在我的 where 条件下我正在处理`string`，而在另一个条件下我正在处理`int`，所以在第二个条件下我遇到了**转换错误！**我怎样才能度过难关？

任何帮助是极大的赞赏！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:54:11.823

您的查询容易受到 SQL 注入的影响。

避免您遇到的数据类型问题的一种方法是在您可以使用和不使用的地方传递正确的数据类型`EXEC()`（[更多详细信息here](https://sqlblog.org/2011/09/17/bad-habits-to-kick-using-exec-instead-of-sp_executesql)）：

```
DECLARE @sql NVARCHAR(MAX) = N'DELETE dbo.referringPhysician
    WHERE iID IN (' + @iID + ') AND AccountID = @AccountID;';

EXEC sp_executesql @sql, N'@AccountID INT', @AccountID; 
```

您可以通过使用表值参数并传入具有适当类型而不是逗号分隔字符串的 DataTable 或其他集合来完全防止 SQL 注入。例如：

```
CREATE TYPE dbo.iIDs TABLE(iID INT PRIMARY KEY); 
```

现在您的存储过程可以完全避免动态 SQL：

```
ALTER PROCEDURE dbo.ProcName -- always use schema prefix!
  @iIDs dbo.iIDs READONLY,
  @AccountID INT
AS
BEGIN
  SET NOCOUNT ON;

  DELETE r
    FROM dbo.ReferringPhysician AS r
    INNER JOIN @iIDs AS i
    ON r.iID = i.iID
    WHERE r.AccountID = @AccountID;
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:54:04.477

试试这个：

```
ALTER PROCEDURE ProcName
(
     @iID VARCHAR(50),
     @AccountID INT
)
AS
SET NOCOUNT ON

DECLARE @Sql VARCHAR(MAX)

SET @Sql = 'DELETE FROM ReferringPhysician WHERE iID IN(' + CAST(@iID AS VARCHAR) + ') AND AccountID = '+ CAST(@AccountID AS VARCHAR) + ''
EXEC (@Sql) 
```

# mysql - 创建外键约束时的MYSQL错误

> ID：16151274
> 
> 赞同：1
> 
> 时间：2013-04-22T15:49:43.920
> 
> 标签：mysql, foreign-keys, primary-key

我正在使用 MySQL 创建一个小型数据库。并面临外键和主键的一些问题。我真的不明白，因为这似乎是一个简单的问题。

```
CREATE  TABLE IF NOT EXISTS `db_trimms`.`urban_area` (
  `area_id` INT(10)  NOT NULL ,
  `city` VARCHAR(60) NOT NULL ,
  `state` VARCHAR(60) NOT NULL ,
  `urban_area` VARCHAR(60) NOT NULL ,
  `census_region` VARCHAR(60) NOT NULL ,
  `area_no` VARCHAR(60) NOT NULL ,
  `freeway_speed` VARCHAR(60) NOT NULL ,
  `arterial_speed` VARCHAR(60) NOT NULL ,
  PRIMARY KEY (`area_id`) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1; 
```

它运行成功。但是在创建另一个表并创建引用上表的外键时`area_id`......它的创建问题......

```
#1005 - Can't create table 'db_trimms.emiss_others_offpeak' (errno: 150) (Details...) 
```

这是查询

```
CREATE  TABLE IF NOT EXISTS `db_trimms`.`emiss_others_offpeak` (
  `area_id` INT(10) UNSIGNED NOT NULL ,
  `ammonia` VARCHAR(60) NOT NULL ,
  `atm_carbon_dio` VARCHAR(60) NOT NULL ,
  `carbon_dio_equiv` VARCHAR(60) NOT NULL ,
  `carbon_mono` VARCHAR(60) NOT NULL ,
  `methane` VARCHAR(60) NOT NULL ,
  `nitrogen_dio` VARCHAR(60) NOT NULL ,
  `nitrogen_oxide` VARCHAR(60) NOT NULL ,
  `nitrous_oxide` VARCHAR(60) NOT NULL ,
  `non_meth_hydrocarbs` VARCHAR(60) NOT NULL ,
  `oxides_of_nitrogen` VARCHAR(60) NOT NULL ,
  `particulate_matter_pm10` VARCHAR(60) NOT NULL ,
  `particulate_matter_pm2_5` VARCHAR(60) NOT NULL ,
  `sulfate` VARCHAR(60) NOT NULL ,
  ` sulfur_dioxide` VARCHAR(60) NOT NULL ,
  `total_hydrocarbon` VARCHAR(60) NOT NULL ,
  `vol_org_comp` VARCHAR(60) NOT NULL ,
  PRIMARY KEY (`area_id`) ,
  CONSTRAINT `fk_others_offpeak_urban`
    FOREIGN KEY (`area_id` )
    REFERENCES `db_trimms`.`urban_area` (`area_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:52:49.017

数据类型彼此不兼容。也`area_id`从表中制作列。`urban_area``UNSIGNED`

```
`area_id` INT(10) UNSIGNED NOT NULL , 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f428/7)

# c# - 重写 Contains() 方法 C#

> ID：16151277
> 
> 赞同：-2
> 
> 时间：2013-04-22T15:49:59.670
> 
> 标签：c#, string

我有这个分句

```
if ((line.Contains('%')) || (line.Contains('@')) || (line.Contains("") && (!line.Contains(',')))) 
```

我想将它重写为一种方法，因为这太慢了。有任何想法吗？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T15:54:11.167

```
if(line.Intersect("%@,").Any()) 
```

或者

```
if("%@,".Intersect(line).Any()) 
```

（反转参数可能会提高性能，具体取决于数据类型`line`和匹配字符的百分比。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:08:01.677

其他两个答案似乎都忽略了原始代码在`line`包含`%`或**不**包含`@`时返回 true 的事实。（空字符串完全不相关）。**`,`**

 **正确的写法是：

```
if(line.Intersect("%@").Any() || !line.Contains(",")) 
```

或者可能：

```
char[] includes = { '%', '@' };
char[] excludes = { ',' };
if(line.Intersect(includes).Any() || !line.Intersect(excludes).Any()) 
```

或这个：

```
char[] includes = { '%', '@' };
char[] excludes = { ',' };
if(line.IndexOfAny(includes) != -1 || line.IndexOfAny(excludes) == -1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:08:18.797

首先，让我们简化整个语句。你使用了很多钩子：

```
if (line.Contains('%') || line.Contains('@') || line.Contains("") && !line.Contains(',')) 
```

其次，如前所述，line.Contains("") 将始终返回 true。也许你错过了一个空间或其他东西。

最后，在一个字符串（或一个字符数组）中搜索一个字符的 orrucance 非常快！整个搜索操作只是汇编级别的一项简单操作（REP SCASW）。在这种情况下，您必须搜索不止一次的字符，这将产生一个或多个简单的汇编指令。C# 中的其他语句可能更短，但可能不会更快。

在字符串中搜索字符串稍微慢一些，因此请尝试删除 Contains("")。

其他操作（使用 LINQ 或 REGEX）可能会导致更多：内存操作（用于数组、委托、结果类型）、更多分析（字符数组中的多个字符）等。**

# php - 将 ORM 安装到自定义 PHP5 框架中

> ID：16151279
> 
> 赞同：0
> 
> 时间：2013-04-22T15:50:06.167
> 
> 标签：php, model-view-controller, orm, doctrine

将诸如 Doctrine 之类的 ORM 组件安装到现有的自定义 PHP5 MVC 框架中的过程是什么？在框架架构和功能方面的最低要求是什么？可能面临哪些问题？由 ORM 生成的并排表和“老式” SQL 请求生成的并排表会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:58:03.177

ORM 只是数据库交互的抽象。Doctrine ORM 包装了 PHPs PDO 库并添加了一些有用的抽象。要将 Doctrine 实现到您现有的框架中，您需要下载代码并将其放入项目的目录中。如果您已经在使用第三方库，请将其放在那里。如果没有，请创建一个`vendors`目录并将教义放入其中。您可以按照 Doctrine 文档了解安装和配置详细信息。

一旦您实施了原则，您的任务就是更新现有的数据库交互。如果所有数据库交互都已通过模型处理，您应该能够为模型编写抽象或接口基类。从那里，可以更新模型以实​​现交互的 Doctrine 方法。

如果您的 SQL 分散在应用程序周围，您可能应该解耦数据库交互并将它们隔离到模型中，然后按照上述过程进行操作。

使用 ORM 并不会阻止现有的数据库交互操作，但这非常混乱，应尽可能避免。

# apache - 在浏览器中下载 .dmg 期间，Apache 不显示文件大小/持续时间？

> ID：16151283
> 
> 赞同：1
> 
> 时间：2013-04-22T15:50:17.093
> 
> 标签：apache, filesize

我的网站上有一个 Mac 软件的 .dmg，但是当我尝试下载它时（即使在不同的浏览器中），它不会显示持续时间或文件大小。这可能是我需要在 Apache 中配置的东西吗？

我检查了http标头：

```
HTTP/1.1 200 OK =>
Date => Mon, 22 Apr 2013 15:36:08 GMT
Server => Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/0.9.8e-fips-rhel5 DAV/2 PHP/5.3.22
Last-Modified => Thu, 11 Apr 2013 13:30:19 GMT
ETag => "2087eb-4151ab7-4da15c9a450c0"
Accept-Ranges => bytes
Content-Length => 68491959
Cache-Control => max-age=1209600
Expires => Mon, 06 May 2013 15:36:08 GMT
Vary => Accept-Encoding,User-Agent
Connection => close
Content-Type => application/x-apple-diskimage 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-26T08:10:03.693

尝试将此添加到您的 .htaccess ：

> SetEnv no-gzip 不变化

# ruby - rails算法访问者计数

> ID：16151287
> 
> 赞同：0
> 
> 时间：2013-04-22T15:50:29.153
> 
> 标签：ruby, ruby-on-rails-3, visitor-statistic

哪个是实现访问者逻辑的最佳方法？

1.  创建访问者表 |ip|resource_type|resource_id|
2.  在记录中创建序列化字段（帖子、宠物、事件、广告等...）
3.  使用nosql解决方案
4.  任何其他想法

    *   在第一种情况下，我们为每次访问扩展了表格大小。
    *   第二，我们有一个很长的领域。
    *   第三，我在生产（centOS）中遇到了 mongoid 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:35:46.227

不确定我是否在回答，但我不会自己实现，而是看看现有的解决方案。对于基本计数：

*   [虚荣](https://github.com/assaf/vanity)
*   谷歌分析

关于每个用户所做的更详细的指标，我会去[群组](https://github.com/n8/cohort_me)。

一个完全其他的选择可能是只使用日志和类似[lograge](https://github.com/roidrage/lograge)的东西来记录每个请求。添加字段（例如IP）非常容易。然后，您可以从日志中提取所有信息。

# javascript - “删除”是 Google Chrome 中的保留关键字吗？

> ID：16151295
> 
> 赞同：11
> 
> 时间：2013-04-22T15:50:54.873
> 
> 标签：javascript, google-chrome, reserved-words

我有一个有趣的问题，我想我找到了它的根源，但我想确定一下。我有一个链接，它调用一个名为 remove() 的函数。除 Chrome 之外的所有浏览器都没有该功能的问题。然而，点击的链接在 Chrome 中消失了，即使我在下面的示例中简化了功能。我见过这个问题：[Can't use "download" as a function name in javascript](https://stackoverflow.com/questions/7852237/cant-use-download-as-a-function-name-in-javascript)。但是，在链接中，我没有看到任何关于“删除”作为保留关键字的信息。我的问题是这个，我对这是一个关键字是正确的吗？如果是这样，我可以在任何地方找到 Google 关键字列表吗？我已经搜索并没有发现这是其他任何地方的问题。

```
<a href="javascript:void(0)" onclick="remove()">Remove</a> 
```

Javascript：

```
function remove(){
 alert("Hi");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T15:57:28.173

Chrome 中的元素有一种`.remove()`方法，允许自行删除元素，而不必从父元素中删除。

问题在于，当使用属性处理程序时，您会得到不同的作用域链。该范围链包括元素本身，以及`document`. 这意味着元素的所有属性都`document`显示为变量。

因为您命名了您的函数，并且因为它是一个全局函数/变量，所以它被元素本身的属性*（现在是变量）*`remove()`所遮蔽。这可以通过警报看到。如果您将处理程序更改为：`.remove`

 *```
onclick="alert(remove)" 
```

...你会得到类似的东西：

```
function remove() { [native code] } 
```

所以不是它被保留，而是它被用作最终影响全局的属性。

* * *

要修复它，请直接使用全局：

```
onclick="window.remove()" 
```

或更改函数名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:57:17.083

我在使用铬时没有任何问题，不是以这种方式

```
<a href="#" id="remove">Remove</a>

function remove() {
    alert("Hi");
}

document.getElementById("remove").addEventListener("click", remove, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/FA8M4/)

内联 javascript 被认为是不好的做法。

如果您有更多元素使用相同的功能，只需添加更多行，就像这样

```
document.getElementById("remove1").addEventListener("click", remove, false);
document.getElementById("remove2").addEventListener("click", remove, false);
document.getElementById("remove3").addEventListener("click", remove, false);
document.getElementById("remove4").addEventListener("click", remove, false); 
```

或者你可以得到一个节点列表并循环遍历它

```
var nodelist = document.querySelectorAll("[id^=remove]");

Array.prototype.forEach.call(nodelist, function (element) {
    element.addEventListener("click", remove, false);
} 
```

您可以[在 SO 上查看另一个答案，](https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick)以了解有关事件绑定方法之间差异的更多信息，也可以在该主题上进行一些 G 搜索将为您提供更多信息。当然，您可以通过这种方式避免遇到的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:57:41.970

我找不到任何文档，但 Chrome 中的 DOM 元素有一个本机方法`remove`，显然可以删除它们。在`onclick`,`this`实际上是指元素本身，因此它最终会调用`this.remove()`删除元素。为了解决这个问题，你可以打电话`window.remove()`。

[http://jsfiddle.net/3YkZH/1/](http://jsfiddle.net/3YkZH/1/)

最好使用标准事件绑定，通过`addEventListener`它在简单调用时不会出现此问题`remove`：

[http://jsfiddle.net/3YkZH/2/](http://jsfiddle.net/3YkZH/2/)*

# c - C 如何处理 if 语句中的非布尔值？

> ID：16151300
> 
> 赞同：2
> 
> 时间：2013-04-22T15:51:18.007
> 
> 标签：c, if-statement, types, pic, c18

我有时会在 C 程序中看到这一点（我使用的是 C18 编译器）：

```
unsigned char someValue = getSomeDataFromSomewhere();
if (someValue) {
    doStuff();
} else {
    doOtherStuff();
} 
```

我知道当你给一个`if`循环一个布尔值（`unsigned`在 C18 编译器中）时会发生什么，但是当你把一个非布尔值放进去时会发生什么？

我的猜测：`doStuff()`当值不为零并且值为零时，它会发生`doOtherStuff()`。但是我不知道这个，所以我想得到一些参考。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:52:25.027

简单地说——如果它不为零，那就是真的。如果为零，则为假。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:57:41.293

你的猜测是正确的：

来自 WG14/N1256 的§6.8.4.1

> 如果表达式比较不等于 0，则执行第一个子语句

# lua - 每 500 点做点什么

> ID：16151303
> 
> 赞同：-3
> 
> 时间：2013-04-22T15:51:27.667
> 
> 标签：lua, coronasdk

我正在开发一款游戏，我希望每 500 点就发生一些事情，并使其无限可扩展。

有没有有效的方法来做到这一点？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:55:32.853

```
if math.floor(points/500) ~= math.floor(last_points/500) then
  -- do something
end
last_points = points 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:09:11.887

假设我正确解释了这个问题，这应该是非常安全的：

```
if math.floor(points/500) >= math.floor(maximum_points/500) then
  maximum_points = points
  -- do something
end 
```

# php - PHP回显图像 带有 php 变量

> ID：16151307
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:51:35.303
> 
> 标签：php, image, variables, html

我正在尝试在标签中回显图像以及图像的 ID 和 EXT，但它似乎不起作用。

这是产生错误的代码行：

```
echo '<div><img src="gallery/',$gimage['id'],'.',$gimage['ext']', height="auto" width="auto" border="2"></div>'; 
```

我尝试使用不带变量的精确查询，结果没问题 D：

THIS ONE 完美运行 /

```
 echo '<div><img src="gallery/13.png" height="auto" width="auto" border="2"></div>'; 
```

编辑： **错误消息'（！）解析错误：语法错误，意外的T_CONSTANT_ENCAPSED_STRING，期望'，'或';' 在第 22 行的 C:\wamp\www\Final Project\view_gallery.php 中**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:54:43.393

您曾经用 a 更改了`,`a `'`：

```
echo '<div><img src="gallery/',$gimage['id'],'.',$gimage['ext'],' height="auto" width="auto" border="2"></div>';
---------------------------------------------------------------^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:14:42.193

考虑将**printf()**或 sprintf() 用于复杂语句，因为您可以更容易地发现错误：

```
printf(
    '<div><img src="gallery/%s.%s" height="auto" width="auto" border="2"></div>',
    $gimage['id'],
    $gimage['ext']
); 
```

Sprintf() 将返回一个字符串，以防您需要它进行进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:53:16.960

PHP 中的连接运算符`.`与`,`您所做的不同。

编辑 ：

似乎我在anwser上错了。您的错误是您忘记了代码中的单引号。

但是我必须补充一点，多参数回显速度非常慢，比串联回显慢大约 30%，甚至不考虑 PHP ZendEngine 的字符串缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:55:54.363

你这里有一个错字：

```
echo '<div><img src="gallery/',$gimage['id'],'.',$gimage['ext']', height="auto" width="auto" border="2"></div>';
                                                               ^ 
```

它应该是：

```
echo '<div><img src="gallery/',$gimage['id'],'.',$gimage['ext'],' height="auto" width="auto" border="2"></div>'; 
```

您也可以考虑使用`printf()`：

```
printf('<div><img src="gallery/%s.%s" height="auto" width="auto" border="2"></div>',
    $gimage['id'],
    $gimage['ext']
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T15:57:03.507

Mathieu 'OtaK' Amiot 是对的...... PHP 中的连接运算符是`.`而不是`,`- 但是，您可以将其全部留在字符串中......就像这样：

```
echo "<div><img src='gallery/$gimage['id'].$gimage['ext']' height='auto' width='auto' border='2'></div>"; 
```

PHP 会为您将变量放入字符串中，但我相信拆分和连接更合适。

# django - 如何访问 django 类中的其他方法？

> ID：16151308
> 
> 赞同：0
> 
> 时间：2013-04-22T15:51:42.957
> 
> 标签：django, csv

我只是在学习 Python 和 Django。

我想做的是这样的

```
csvobject = CSVViewer(file)
rows = csvobject.get_row_count() 
```

这就是我到目前为止所拥有的。请记住，这对我来说是全新的，所以我正在寻找一个解释。谢谢。

```
class CSVViewer:

    def __init__(self, file=None):
        self.file = file

    def read_file(self):
        data = []
        file_read = csv.reader(self.file)
        for row in file_read:
            data.append(row)
        return data

    def get_row_count(self):
        return len(read_file(self)) 
```

我有问题`read_file(self)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:04:46.500

好吧，首先，您似乎缺少`import csv`为了`csv.reader(self.file)`在该`def read_line(self)`方法中工作。其次，必须在方法中像这样调用实例`read_file`方法。这应该有效： `self.read_file()``get_row_count`

 `````
import csv

class CSVViewer:

    def __init__(self, file=None):
        self.file = file

    def read_file(self):
        data = []
        file_read = csv.reader([self.file])
        for row in file_read:
            data.append(row)
        return data

    def get_row_count(self):
        return len(self.read_file()) 
`````

# internet-explorer-10 - IE10 WebResource.axd 无法下载。导致错误“'WebForm_DoPostBackWithOptions'未定义”

> ID：16151320
> 
> 赞同：1
> 
> 时间：2013-04-22T15:52:25.853
> 
> 标签：internet-explorer-10

在我们的例子中，链接按钮似乎仅在 IE 10 中出现此错误。在我所做的几个小时的研究中，这似乎是一个 IE 10 错误。

[错误和修复：ASP.NET 无法检测到 IE10 导致 _doPostBack is undefined JavaScript 错误或保持 FF5 滚动条位置](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

我尝试下载 KB 修补程序但无法下载，我收到一个找不到页面的消息。我还尝试在博客文章中下载浏览器文件，修复无效。

这个问题只发生在我们的 win server 2008 IIS 7 服务器上 iis 6 win server 2003 工作正常。

还有其他人遇到这个并有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:14:23.977

所以你已经完成了 Hanselman 在这里列出的步骤？ [http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

我们遇到了同样的问题，得到了修补程序文件，将它们应用到服务器上，一切对我们来说都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:58:34.240

Hanselman 博客中的热修复修复了我的问题。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-03T15:22:42.353

我尝试了我在互联网上看到的所有补丁，包括参考博客中列出的补丁。唯一真正可行的是在服务器上安装 .NET 4.5 Framework。

在这里获取：http: [//www.microsoft.com/en-us/download/details.aspx?id=30653](http://www.microsoft.com/en-us/download/details.aspx?id=30653)

希望这可以节省我在这个问题上浪费的几个小时。

# android - Android 浏览器在分辨率上因 CSS 媒体查询而中断

> ID：16151325
> 
> 赞同：2
> 
> 时间：2013-04-22T15:52:53.917
> 
> 标签：android, css, media-queries, android-browser

似乎 Android 浏览器不支持（并且在使用时中断）`min-resolution`媒体查询。我已经阅读了一堆建议在 Android 上使用它的网站，所以我有点困惑为什么它会破坏我的网站。

这有效（但也适用于对我的网站不利的 Android Chrome）：

`@media (-webkit-min-device-pixel-ratio:1.5) and (-webkit-max-device-pixel-ratio:1.5) { ... }`

这不包括 Chrome，但也破坏了默认浏览器：

`@media (-webkit-min-device-pixel-ratio:1.5) and (-webkit-max-device-pixel-ratio:1.5) and (min-resolution: 144dpi) { ... }`

即使将其设置为`1dpi`具有相同的效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:33:39.097

各种浏览器都有供应商前缀。我已经在许多网站上使用了以下示例，没有问题。并不是说我也包含了`min-width`条件，以防您需要组合多个查询：

```
@media (min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.5),
   (min-width: 480px) and (-moz-min-device-pixel-ratio: 1.5),
   (min-width: 480px) and (min-device-pixel-ratio : 1.5) {
 /* ... Styles ... */
} 
```

# mysql - MySQL WHERE IN 通配符

> ID：16151336
> 
> 赞同：0
> 
> 时间：2013-04-22T15:53:27.157
> 
> 标签：mysql, where

首先，我知道该`downloads`表没有标准化。

我有这两张桌子：

```
downloads

map | author
1 | Nikola
2 | Nikola George 
```

和

```
mappers

mapper_id | mapper_name
1 | Nikola
2 | George 
```

我想通过他的 ID 找到给定用户的所有可能下载行。

我所做的是：

```
SELECT * FROM downloads WHERE author IN (SELECT mapper_name FROM mappers WHERE mapper_id = '1') 
```

但这只会返回仅由 userid: 1 完成的地图（在这种情况下为 Nikola），并且不会显示联合地图。

我的目标是：搜索 ID: 1 地图 #1 和地图 #2 都返回，搜索映射器 ID #2 - 返回地图 #2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:59:28.613

你可以试试这个：

```
select 
from downloads d join
     mappers m
     on concat(' ', d.author, ' ') like concat('% ', m.mapper_name, ' %')
where m.id = 1 
```

这效率不高，但确实满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:02:46.733

根据我的评论，如果您无法标准化数据，则可以使用类似的方法

```
SELECT * 
FROM downloads 
INNER JOIN mappers
ON FIND_IN_SET(mappers.mapper_name, REPLACE(downloads.author, " ", ",")) > 0 
```

# java - Java - Tic Tac Toe Swing 游戏 - 错误

> ID：16151337
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:53:29.657
> 
> 标签：java, tic-tac-toe

我正在用 Java 制作井字游戏并制作了 gui，并想运行它来测试它，但遇到了一些错误。我不知道为什么，希望有人能解释为什么会出现这些错误以及我应该做些什么来修复它们。我得到的错误如下：**TicTacToeSwing.(TicTacToeSwing.java:84) 在 TicTacToeSwing.main(TicTacToeSwing.java:180) 的线程“主”java.lang.NullPointerException 中的异常**

这是我的代码：（请注意：我还没有完成计算，因为我想先让 gui 运行）如果你知道我应该考虑做的更好的做法，一定要告诉我。

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Container;
    import java.awt.GridLayout;
    import java.awt.event.ActionListener;

    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.JTextField;

    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*; 
```

//井字游戏

```
 public class TicTacToeSwing extends JFrame
    implements ActionListener { 

//JButtons

//private JButton button1 = new JButton("");    
private JButton jbtnTicTacToe1;
private JButton jbtnTicTacToe2;
private JButton jbtnTicTacToe3;
private JButton jbtnTicTacToe4;
private JButton jbtnTicTacToe5;
private JButton jbtnTicTacToe6;
private JButton jbtnTicTacToe7;
private JButton jbtnTicTacToe8;
private JButton jbtnTicTacToe9;

private JButton jbtnExit;
private JButton jbtnReset;

//JFrame window = new JFrame("Tic-Tac-Toe Swing ");
private JFrame window = new JFrame("Tic-Tac-Toe");

//labels
private JLabel jlblPlayerX = new JLabel ("X");
private JLabel jlblPlayerO = new JLabel ("O");

//text fields
JTextField jtfName = new JTextField(20);
private JTextField jtfPlayerX = new JTextField("X");
private JTextField jtfPlayerO = new JTextField("O");

//Panels
JPanel jpnlMain = new JPanel ();
    JPanel jpnlFamily = new JPanel();
    JPanel jpnlNorth = new JPanel();
    JPanel jpnlSouth = new JPanel();
    JPanel jpnlCenter = new JPanel();
    JPanel jpnlTop = new JPanel();
    JPanel jpnlBottom = new JPanel();

//Class Constructor
public TicTacToeSwing () {

    //Prepare JFrame/Window
    super ("Tic Tac Toe");
    setSize(400,400);
    setTitle("Tic Tac Toe Swing");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set the layouts for 3 rows and 3 columns
    jpnlMain.setLayout(new BorderLayout(3,3));
    jpnlCenter.setLayout(new GridLayout());
    jpnlSouth.setLayout(new GridLayout());
    jpnlTop.setLayout(new BorderLayout());
    jpnlBottom.setLayout(new BorderLayout());

    //Center Panel
    jpnlCenter.add(jlblPlayerX);
    jpnlCenter.add(jlblPlayerO);

    //identify each JButton
    jbtnReset.setActionCommand("Reset");
    jbtnExit.setActionCommand("Exit");

    //register JButton for event handling by using the THIS keyword - THIS class will handle the events
    jbtnReset.addActionListener(this);
    jbtnExit.addActionListener(this);

    /*Add Buttons To The Window*/
    window.add(jbtnTicTacToe1);
    window.add(jbtnTicTacToe2);
    window.add(jbtnTicTacToe3);
    window.add(jbtnTicTacToe4);
    window.add(jbtnTicTacToe5);
    window.add(jbtnTicTacToe6);
    window.add(jbtnTicTacToe7);
    window.add(jbtnTicTacToe8);
    window.add(jbtnTicTacToe9);

    /*Add The Action Listener To The Buttons
    button1.addActionListener(this);
    button2.addActionListener(this);
    button3.addActionListener(this);
    button4.addActionListener(this);
    button5.addActionListener(this);
    button6.addActionListener(this);
    button7.addActionListener(this);
    button8.addActionListener(this);
    button9.addActionListener(this);
    */

    jbtnTicTacToe1.addActionListener(this);
    jbtnTicTacToe2.addActionListener(this);
    jbtnTicTacToe3.addActionListener(this);
    jbtnTicTacToe4.addActionListener(this);
    jbtnTicTacToe5.addActionListener(this);
    jbtnTicTacToe6.addActionListener(this);
    jbtnTicTacToe7.addActionListener(this);
    jbtnTicTacToe8.addActionListener(this);
    jbtnTicTacToe9.addActionListener(this);

    //South Button Panel
    jpnlSouth.add(jbtnReset);
    jpnlSouth.add(jbtnExit);

    /* Instantiate JButtons, put into a method for efficiency
    jbtn1 = instantiateJButton("1", Color.PINK);
    jbtn2 = instantiateJButton("2", Color.PINK);
    jbtn3 = instantiateJButton("3", Color.PINK);
    jbtn4 = instantiateJButton("4", Color.PINK);
    jbtn5 = instantiateJButton("5", Color.PINK);
    jbtn6 = instantiateJButton("6", Color.PINK);
    jbtn7 = instantiateJButton("7", Color.PINK);
    jbtn8 = instantiateJButton("8", Color.PINK);
    jbtn9 = instantiateJButton("9", Color.PINK);
    */

    //Finalize screen layout and publish to the display
    jpnlMain.add(jpnlCenter, BorderLayout.NORTH);
    jpnlMain.add(jpnlSouth, BorderLayout.CENTER);

    //Prepare the container
    Container ca = getContentPane();
    ca.setBackground (Color.LIGHT_GRAY);
    ca.add(jpnlMain);
    setContentPane (ca);

    setVisible(true);
    //end constructor       
}

//CLASS EVENT HANDLER
public void actionPerformed(java.awt.event.ActionEvent e)
{
    //find out which JButton was pressed by using the Action Command
    String sActionCommand = e.getActionCommand();

    //EXIT JButton
    if (sActionCommand == "Exit")
    {
        System.exit(0);
    }

    //RESET JButton
    else if (sActionCommand == "Reset")
    {
        jtfPlayerX.setText("");
        jtfPlayerO.setText("");
    }
}   //end ACTIONPERFORMED (java.awt.event.ActionEvent e)

/**
 * @param args
 */
public static void main(String[] args) {
    //EXECUTION STARTING POINT

    TicTacToeSwing TicTacToeSwing = new TicTacToeSwing();

    //TicTacToeSwing TicTacToeObject = new TicTacToeSwing();

}//end main(String[] args)

   }//end TicTacToeSwing class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:55:21.623

`NPE`堆栈跟踪包含有关导致（`jbtnReset`出现在第 84 行）的原因的有用信息。因此，您需要初始化`jbtnReset`：

```
JButton jbtnReset = new JButton("Reset"); 
```

事实上，这同样适用于所有`jbtnTicTacToeX`按钮以及`jbtnExit`.

* * *

附带问题：`String#equals`用于比较`String`内容。`==`操作员比较内容`String`。

```
if (sActionCommand == "Exit") { 
```

应该

```
if (sActionCommand.equals("Exit")) { 
```

这将检查*任何*组件的操作命令，`String`因此您想要检查特定的源对象：

```
if (e.getSource() == jbtnExit) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:57:00.477

你在哪里：

```
private JButton jbtnExit;
private JButton jbtnReset; 
```

尝试：

```
private JButton jbtnExit = new JButton("Exit"); 
private JButton jbtnReset = new JButton("Reset"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:58:03.263

如果您查看堆栈跟踪，`TicTacToeSwing.java:84`则会显示错误发生的位置。`TicTacToeSwing.java`是文件，`:84`表示第 84 行。

# java - 使用 Java API 在 Elasticsearch 中创建 MongoDB River

> ID：16151338
> 
> 赞同：0
> 
> 时间：2013-04-22T15:53:30.430
> 
> 标签：java, mongodb, elasticsearch

我正在尝试使用 Java API 在 MongoDB 和 ElasticSearch 之间创建一条新河流。使用 REST API 很容易使用以下 JSON 发出 PUT 请求

```
{
  "type": "mongodb",
  "mongodb": {
    "servers": [
      { "host": "127.0.0.1", "port": 27017 }
    ],
    "options": { "secondary_read_preference": true },
    "db": "test",
    "collection": "collectionTest"
  },
  "index": {
    "name": "testIndex",
    "type": "default"
  }
} 
```

但是我在使用 Java API 时遇到了几个问题。我正在尝试使用`CreateIndexRequestBuilder`该类，但我不知道如何指定参数。

它们是自定义参数吗？源头呢？我很迷茫...

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:05:37.407

您需要将具有 id 的文档添加`_meta`到`_river`索引中。类型是您要赋予索引的名称。要发送的文档是一个 json，其中包含您的河流所需的配置。除了依赖于河流的自定义配置之外，json 文档还需要包含属性`type`，其中包含在河流本身中用于注册`RiverModule`. 对于 mongodb 河，它是`mongodb`. 您发布的 json 正是您必须发送的来源。

这是您需要的代码：

```
client.index(Requests.indexRequest("_river").type("my_river").id("_meta").source(source)).actionGet(); 
```

# php - 使用 jQuery for Ajax 时防止默认操作

> ID：16151345
> 
> 赞同：0
> 
> 时间：2013-04-22T15:53:54.937
> 
> 标签：php, javascript, jquery, ajax

我试图在使用 ajax 提交表单时阻止默认操作，但我相信我的代码错误，因为页面似乎在执行“刷新”并且表单被清除但没有任何内容发送到数据库。我尝试在表单的“操作”部分添加指向 php 处理脚本的链接，它确实可以很好地提交到数据库，所以问题似乎出在我的 jQuery 代码上。

```
 <script type="text/javascript">
$(document).ready(function(e){
        e.preventDefault();
    $("#rpack_add_form").validate({
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('<?php echo BASE_URL?>/core/addrpack.php.php', $("#rpack_add_form").serialize(), function(data) {
                $('#ajaxResult').html(data);
            });
        }
    });
});
</script> 
```

我的表单代码：

```
<div id="rpacks_admin" style="display: none;">
<h5>Add A New Recovery Pack</h5>
    <form id="rpack_add_form" class='small_form' name='rpack_add_form' action='' method='post'>
        Contract:
        <select id="contract_select" name="contract" onchange="showContract(this)">
            <option value='0'>Select Contract</option>
                <?php 
                $sth = $conn->query("SELECT * FROM `contracts`");
                while($row = $sth->fetch(PDO::FETCH_ASSOC))
                {
                    echo '<option value='.$row['contracts_id'].'>'.$row['contracts_name'].'</option>';
                }
                ?>
        </select>
            <div id="contract1" class="admin_box">
                Prefix: <input name='prefix' type='text' id='prefix'><br />
                Number: <input name='number' type='text' id='number'><br />
                Suffix: <input name='suffix' type='text' id='suffix'><br />
            </div>
            <div id="contract2" class="admin_box">
                <p>Sapce for content</p>
            </div>
            <div id="contract3" class="admin_box">
                <p>Sapce for contentrm</p>
            </div>
        Received:
            <select id="select_receive" name="received" onchange="showLocation(this)">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select><br />
        <div id="location_box" style="display: none; padding-top: 5px;">Location: <input name='location' type='text' id='location'></div>
        <input class='button' type=submit value='Add' name='add_rpack'>            
    </form>
<a class='hide_div' href='javascript:void(0);' onclick='hideRdiscDiv()'>Close</a> 
```

如果需要，还有我的 PHP

```
 <?php
            session_start();
            include_once 'config.php';
            include_once 'connect.php';
            include_once 'bcrypt.php';
            $prefix = $_POST['prefix'];
            $number = $_POST['number'];
            $suffix = $_POST['suffix'];
            $contract = $_POST['contract'];
            $received = $_POST['received'];
            $location = $_POST['location'];

            //Check if password and username has been submitted then add to DB
            if (empty ($number))
            {
                echo "You need to enter a recovery pack number";
            }else
            {
                $sth = "INSERT INTO `rpacks` (rpacks_prefix, rpacks_number, rpacks_suffix, rpacks_contract, rpacks_receive, rpacks_location) VALUES (:prefix, :number, :suffix, :contract, :received, :location)";
                $q = $conn->prepare($sth);
                $q->execute(array(':prefix'=>$prefix,':number'=>$number,':suffix'=>$suffix,':contract'=>$contract, ':received'=>$received, ':location'=>$location));
                echo "Added";
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:59:00.870

该`.validate()`对象有一个`sendForm`参数。默认设置为`true`，但您需要将其设置为`false`，如下面的代码所示，以防止表单被提交：

```
$(document).ready(function () {
    $('#rpack_add_form').validate({
        submitHandler: function (form) {
            // do other stuff for a valid form
            $.post('<?php echo BASE_URL?>/core/addrpack.php.php', $('#rpack_add_form').serialize(), function (data) {
                $('#ajaxResult').html(data);
            });
        },
        sendForm: false
    });
}); 
```

您可以[参考文档](https://github.com/DiegoLopesLima/Validate#readme)以获取更多信息。

# android - Phonegap Android - 类似 FB 的按钮 - 我不能

> ID：16151346
> 
> 赞同：1
> 
> 时间：2013-04-22T15:54:00.663
> 
> 标签：android, facebook, cordova, button

我需要帮助伙计们！

在这一刻，我开发了一个应用程序，在我的 Facebook 墙上显示我发布的图像，并且需要在我的应用程序中为每个图像添加一个“喜欢”按钮......

我在我的项目中使用带有 Phonegap 和 c&p 的 Eclipse，遵循由“developers.facebook .../plugins/like/”生成的代码

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.facebook.com/QueBajeDios" 
data-send="false" 
data-layout="button_count" 
data-width="450" 
data-show-faces="false">
</div> 
```

我为 HTML 和 IFRAME 选择插件代码，但没有任何效果......

我尝试了所有版本的 Phonegap 1.9、2.4、2.6 ......但不起作用......

谁能帮我？我在其他相关帖子上在谷歌上寻找一些帮助，但对我没有解决方案......而且建立的问题或回复很多旧......

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T19:49:58.533

我使用了 iframe 方法，并对插件提供的 url 做了一些改动。

当您询问 iframe 代码时，最初 facebook 会返回此站点

```
<iframe src="//www.facebook.com/plugins/...></iframe> 
```

但就我而言，因为我正在使用本地资源而不是服务器来开发应用程序，所以当调用该 url 时，它将作为页面标题发送到您的 localhost 地址。就像是

```
file://path/to/your/app/facebook.com/plugin 
```

我刚刚修改了网址，所以它直接调用 facebook

```
<iframe src="http://www.facebook.com/plugins/...></iframe> 
```

并且像 twitter 关注按钮一样，它会直接打开设备浏览器到 facebook/twitter 页面

# java - 我应该使用 Jain SIP (java) 中的哪些类来创建 SIP 客户端？

> ID：16151352
> 
> 赞同：6
> 
> 时间：2013-04-22T15:54:22.327
> 
> 标签：java, sip, voip, jain-sip

我要求创建一个 SIP 客户端，但我完全迷失了……经过一些研究，我在 java 中找到了 Jain SIP API，我想我会使用它。但是我真的不知道我应该使用哪些类以及我应该实现哪些接口。

我读过这篇文章：[http ://www.oracle.com/technetwork/articles/entarch/introduction-jain-sip-090386.html](http://www.oracle.com/technetwork/articles/entarch/introduction-jain-sip-090386.html)

这：[http ://hudson.jboss.org/hudson/job/jain-sip/lastSuccessfulBuild/artifact/javadoc/javax/sip/package-summary.html#package_description](http://hudson.jboss.org/hudson/job/jain-sip/lastSuccessfulBuild/artifact/javadoc/javax/sip/package-summary.html#package_description)

但我不明白我应该为 SIP 客户端实现哪个部分？SipListener 还是 SipStack 和 SipProvider ？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:56:18.430

您需要实现这两个类。

SipProvider 类将连接到您的端点（例如，Aterisk）。请注意，此类必须在静态上下文中，因为每个客户端只允许一个连接。

您不能在 上创建调用 SipStack 类的 SipProvider 实例`sipStack.createSipProvider(listeningPoint)`。在此之后，您可以创建事务并向您的端点发送请求。

SipListener 是处理来自服务器的所有响应的类。这意味着您发送到服务器（通过 SipProvider）的每个请求都将在 SipListener 上收到响应。因此，您必须拥有此侦听器来处理端点返回的所有数据。

尝试实现您引用的 oracle 文章中描述的代码。我根据这篇文章开始开发，效果很好！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T09:19:12.573

查看参考实现中的示例[https://java.net/projects/jsip/sources/svn/show/trunk/src/examples?rev=2279](https://java.net/projects/jsip/sources/svn/show/trunk/src/examples?rev=2279)以帮助您更快地前进

# image-processing - 具有镜像边界条件的图像卷积

> ID：16151357
> 
> 赞同：0
> 
> 时间：2013-04-22T15:54:35.370
> 
> 标签：image-processing, filtering, convolution

只是一个与图像卷积边界条件相关的简单问题。众所周知，图像卷积边界有多种类型，其中对称条件被广泛接受。我的问题是：我们在执行卷积时将“镜子”放在哪里？更具体地说，我给出以下示例：

图像矩阵为[1 2 3]，核为[1 1 1 1 1]。那么这个内核的镜像应该是[ **3 2** 1 2 3 **2 3** ]还是[ **2 1** 1 2 3 **3 2** ]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:26:04.500

每个边缘都需要独立镜像。你的第二个例子是正确的。

# linux - 将 BlueZ Stack 用作外设（广告商）

> ID：16151360
> 
> 赞同：54
> 
> 时间：2013-04-22T15:54:40.600
> 
> 标签：linux, bluetooth, core-bluetooth, bluetooth-lowenergy, bluez

*   **目标**：使用 BlueZ 和蓝牙 4LE 加密狗创建一个外设，宣传蓝牙等效的“Hello World”。

*   **我在哪里**：我目前已经安装并下载了 BlueZ 堆栈，我可以使用 hci 工具来识别和查看蓝牙加密狗。我已经修改了 hciconfig Leadv，但我只是不太明白/理解发生了什么。

*   **我认为我需要什么帮助**：我需要让它进入下一步。如果有人可以将我指向一个好的资源，请引导我完成此操作或其他任何内容，将不胜感激。如果我需要做额外的腿部（搜索）工作，我可以，但我已经用我能想到的这个问题的许多不同衍生品搜索了谷歌和 SO。

*我也将其标记为 CoreBluetooth，希望 iOS 开发人员在某个时候对此进行了修补。

编辑：回应评论，陈述我的最终目标似乎是谨慎的。我最终想通过加密狗发布最简单的简单消息/信号，并在 iOS 设备（CoreBluetooth）上获取。我已经能够让 iOS 方面运行良好（与 Linux 方面相比，有大量文档），但对我来说，最困难的部分是将这个适配器设置为外围设备。BlueZ 堆栈对我来说是一个可怕的谜。

编辑：经过更多挖掘，我最终偶然发现了这篇文章：[Raspberry Pi Bluetooth 4.0 Connection](https://stackoverflow.com/questions/16052882/raspberry-pi-bluetooth-4-0-connection)。这将我引向了 GATT 服务器的话题，我将继续研究这个话题。

编辑：好的，所以我对学习的追求还在继续。在过去的几天里，我深入研究了 hci*、sdptool 和 gatttool 工具。我已经能够将适配器设置为广告“hciconfig hci0 Leadv”。在这一点上，我可以成功地“看到”适配器，但实际上我无法从中读取任何内容。我什至没有看到友好的名字。我会继续努力，但一如既往，任何帮助/建议都非常受欢迎。

编辑：相关链接，与 iOS 相关的蓝牙 LE 的可靠概述。 [https://developer.apple.com/library/content/documentation/NetworkingInternetWeb/Conceptual/CoreBluetooth_concepts/AboutCoreBluetooth/Introduction.html#//apple_ref/doc/uid/TP40013257-CH1-SW1](https://developer.apple.com/library/content/documentation/NetworkingInternetWeb/Conceptual/CoreBluetooth_concepts/AboutCoreBluetooth/Introduction.html#//apple_ref/doc/uid/TP40013257-CH1-SW1)

最后编辑：大家好，此链接介绍了如何使用 Raspberry Pi + BlueZ 创建 iBeacon ... [http://www.wadewegner.com/2014/05/create-an-ibeacon-transmitter-with-the-raspberry -pi/](http://www.wadewegner.com/2014/05/create-an-ibeacon-transmitter-with-the-raspberry-pi/)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-09-26T22:48:06.670

插入蓝牙加密狗后，运行以下命令将告诉您设备名称并提供其状态：

`$ hciconfig`

输出应如下所示：

```
hci0:    Type: BR/EDR  Bus: USB
     BD Address: 00:01:02:aa:bb:cc  ACL MTU: 1021:8  SCO MTU: 64:1
     DOWN
     RX bytes:1000 acl:0 sco:0 events:47 errors:0
     TX bytes:1072 acl:0 sco:0 commands:47 errors:0 
```

这表明设备被称为 hci0 处于关闭状态。发出以下命令来启动它：

`$ sudo hciconfig hci0 up`

现在它应该看起来像：

```
$ hciconfig
hci0:   Type: BR/EDR  Bus: USB
     BD Address: 00:01:02:aa:bb:cc  ACL MTU: 1021:8  SCO MTU: 64:1
     UP RUNNING
     RX bytes:1000 acl:0 sco:0 events:47 errors:0
     TX bytes:1072 acl:0 sco:0 commands:47 errors:0 
```

接下来，执行以下示例命令来配置要发送的广告数据。

```
$ sudo hcitool -i hci0 cmd 0x08 0x0008 1e 02 01 1a 1a ff 4c 00 02 15 e2 c5 6d b5 df fb 48 d2 b0 60 d0 f5 a7 10 96 e0 00 00 00 00 c5 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

您可以更改十六进制字节（从 1e 开始）为您的广告发送不同的字节序列。一个字面上发送“HELLO WORLD”的 ASCII 代码的人将使用：（`48 45 4c 4c 4f 57 4f 52 4c 44` 编辑**：**但您还必须在此消息前加上一个有效的标题，请参见[此处。](https://stackoverflow.com/a/28263243/1461050)）

现在，使用以下命令激活加密狗上的广告，这将开始发送“Helo World”数据包。

`$ sudo hciconfig hci0 leadv 0`

**编辑：** 上述命令使广告服务可连接。如果您不想允许连接，请将其更改为`$ sudo hciconfig hci0 leadv 3`

您还可以使用以下命令禁用广告：

`$ sudo hciconfig hci0 noleadv`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-30T14:51:04.523

在此处添加更多信息（参考 BlueZ5.x）：

*   bluez 没有公开用于 gatt 服务器注册的 DBUS api；您有一些可用的配置文件实现，但您需要使用 --enable-experimental 选项配置和编译它或在插件文件夹下启用 gatt-example 以注册一些 gatt 服务器作为示例

*   当您做 hciconfig hci0 Leadv 做广告时，请注意广告数据。在下面的 iBeacon 示例中

    `sudo hcitool -i hci0 cmd 0x08 0x0008 1e **02 01 1a** ff 4c 00 02 15 e2 c5 6d b5 df fb 48 d2 b0 60 d0 f5 a7 10 96 e0 00 00 00 00 c5 00 00 00 00 00 00 00 00 00 00 00 00 00`

    粗体部分用于与标志字段相关的 AD 结构（在蓝牙规范下检查 advertisgin 数据格式）。使用此标志设置，设备将自己宣传为同时的 LE 和 BR-EDR。

    根据我的经验，当以这种方式进行广告时，扫描充当 BLE 外围设备的 bluez 设备的 android 设备将触发经典蓝牙（由于标志设置）而不是 BLE 的连接（请注意，LE 和经典的连接程序不同）。不确定 Apple 中央设备在这种情况下的行为方式。无论如何，为了避免这种情况，您可以设置 06 而不是 1A，这样就不会宣传 BR-EDR 支持。通过这种方式，您将看到通过 BLE 的连接。

如果您想使用中央 Android 设备对其进行测试，可以使用免费的 Nordic 应用程序。

# c# - WCF 重试代理

> ID：16151361
> 
> 赞同：17
> 
> 时间：2013-04-22T15:54:40.817
> 
> 标签：c#, wcf, oop

我正在努力寻找实现 WCF 重试的最佳方法。我希望使客户体验尽可能干净。我知道有两种方法（见下文）。我的问题是：“我**是否缺少第三种方法？也许这是普遍接受的方法？** ”

**方法#1**：创建一个实现服务接口的代理。对于对代理的每次调用，实施重试。

```
public class Proxy : ISomeWcfServiceInterface
{
    public int Foo(int snurl)
    {
        return MakeWcfCall<int>(() => _channel.Foo(snurl));
    }

    public string Bar(string snuh)
    {
        return MakeWcfCall<string>(() => _channel.Bar(snuh));
    }

    private static T MakeWcfCall<T>(Func<T> func)
    {
        // Invoke the func and implement retries.
    }
} 
```

**方法 #2**：将 MakeWcfCall()（上）更改为 public，并让消费代码直接发送 func。

我不喜欢方法#1 的地方是每次接口更改时都必须更新代理类。

我不喜欢方法 #2 的地方是客户端必须将他们的调用包装在一个 func 中。

我错过了更好的方法吗？

**编辑**

我在此处发布了一个答案（见下文），基于已接受的答案，该答案为我指明了正确的方向。我想我会在答案中分享我的代码，以帮助某人完成我必须完成的工作。希望能帮助到你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T16:58:50.420

我已经完成了这种类型的事情，并使用.net 的[RealProxy](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.proxies.realproxy.aspx)类解决了这个问题。

使用`RealProxy`，您可以使用您提供的接口在运行时创建一个实际的代理。从调用代码来看，他们好像在使用一个`IFoo`通道，但实际上它是一个`IFoo`代理，然后你有机会拦截对任何方法、属性、构造函数等的调用……</p>

派生自`RealProxy`，然后可以重写 Invoke 方法以拦截对 WCF 方法的调用并处理 CommunicationException 等。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-22T20:12:35.837

注意：这不应该是公认的答案，但我想发布解决方案以防它帮助其他人。吉姆的回答为我指明了这个方向。

**首先，消费代码，展示它是如何工作的：**

```
static void Main(string[] args)
{
    var channelFactory = new WcfChannelFactory<IPrestoService>(new NetTcpBinding());
    var endpointAddress = ConfigurationManager.AppSettings["endpointAddress"];

    // The call to CreateChannel() actually returns a proxy that can intercept calls to the
    // service. This is done so that the proxy can retry on communication failures.            
    IPrestoService prestoService = channelFactory.CreateChannel(new EndpointAddress(endpointAddress));

    Console.WriteLine("Enter some information to echo to the Presto service:");
    string message = Console.ReadLine();

    string returnMessage = prestoService.Echo(message);

    Console.WriteLine("Presto responds: {0}", returnMessage);

    Console.WriteLine("Press any key to stop the program.");
    Console.ReadKey();
} 
```

**WcfChannelFactory：**

```
public class WcfChannelFactory<T> : ChannelFactory<T> where T : class
{
    public WcfChannelFactory(Binding binding) : base(binding) {}

    public T CreateBaseChannel()
    {
        return base.CreateChannel(this.Endpoint.Address, null);
    }

    public override T CreateChannel(EndpointAddress address, Uri via)
    {
        // This is where the magic happens. We don't really return a channel here;
        // we return WcfClientProxy.GetTransparentProxy(). That class will now
        // have the chance to intercept calls to the service.
        this.Endpoint.Address = address;            
        var proxy = new WcfClientProxy<T>(this);
        return proxy.GetTransparentProxy() as T;
    }
} 
```

**WcfClientProxy：（**这是我们拦截和重试的地方。）

```
 public class WcfClientProxy<T> : RealProxy where T : class
    {
        private WcfChannelFactory<T> _channelFactory;

        public WcfClientProxy(WcfChannelFactory<T> channelFactory) : base(typeof(T))
        {
            this._channelFactory = channelFactory;
        }

        public override IMessage Invoke(IMessage msg)
        {
            // When a service method gets called, we intercept it here and call it below with methodBase.Invoke().

            var methodCall = msg as IMethodCallMessage;
            var methodBase = methodCall.MethodBase;

            // We can't call CreateChannel() because that creates an instance of this class,
            // and we'd end up with a stack overflow. So, call CreateBaseChannel() to get the
            // actual service.
            T wcfService = this._channelFactory.CreateBaseChannel();

            try
            {
                var result = methodBase.Invoke(wcfService, methodCall.Args);

                return new ReturnMessage(
                      result, // Operation result
                      null, // Out arguments
                      0, // Out arguments count
                      methodCall.LogicalCallContext, // Call context
                      methodCall); // Original message
            }
            catch (FaultException)
            {
                // Need to specifically catch and rethrow FaultExceptions to bypass the CommunicationException catch.
                // This is needed to distinguish between Faults and underlying communication exceptions.
                throw;
            }
            catch (CommunicationException ex)
            {
                // Handle CommunicationException and implement retries here.
                throw new NotImplementedException();
            }            
        }
    } 
```

被代理拦截的调用时序图：

![在此处输入图像描述](https://i.stack.imgur.com/wK1v0.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T16:21:14.333

例如，您可以使用 Castle 实现通用代理。这里有一篇很好的文章[http://www.planetgeek.ch/2010/10/13/dynamic-proxy-for-wcf-with-castle-dynamicproxy/](http://www.planetgeek.ch/2010/10/13/dynamic-proxy-for-wcf-with-castle-dynamicproxy/)。这种方法将提供实现接口的用户对象，您将拥有一个负责通信的类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:24:11.737

只需将所有服务调用包装在一个函数中，获取一个委托，该委托将在必要的时间内执行传递的委托

```
internal R ExecuteServiceMethod<I, R>(Func<I, R> serviceCall, string userName, string password) {

    //Note all clients have the name Manager, but this isn't a problem as they get resolved        
    //by type
    ChannelFactory<I> factory = new ChannelFactory<I>("Manager");
    factory.Credentials.UserName.UserName = userName;
    factory.Credentials.UserName.Password = password;

    I manager = factory.CreateChannel();
    //Wrap below in a retry loop
    return serviceCall.Invoke(manager);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T16:12:30.083

不要弄乱生成的代码，因为正如您所提到的，它将再次生成，因此任何自定义都将被覆盖。

我看到两种方法：

1.  为每个包含重试变体的代理编写/生成部分类。这很混乱，因为当代理更改时您仍然需要对其进行调整

2.  制作一个自定义版本的 svcutil，它允许您生成从不同基类派生的代理，并将重试代码放在该基类中。这是一项相当多的工作，但可以完成并以稳健的方式解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T16:21:40.190

通过方法 1，然后将所有上下文事件（打开、打开、故障……）包装到要由您的类代理公开的事件中，一旦通信发生故障，然后重新创建代理或调用代理类中的某些递归方法. 我可以和你分享一些我刚刚测试过的炒锅。

```
 public class DuplexCallBackNotificationIntegrationExtension : IExtension, INotificationPusherCallback {
    #region - Field(s) -
    private static Timer _Timer = null;
    private static readonly object m_SyncRoot = new Object();
    private static readonly Guid CMESchedulerApplicationID = Guid.NewGuid();
    private static CancellationTokenSource cTokenSource = new CancellationTokenSource();
    private static CancellationToken cToken = cTokenSource.Token;
    #endregion

    #region - Event(s) -
    /// <summary>
    /// Event fired during Duplex callback.
    /// </summary>
    public static event EventHandler<CallBackEventArgs> CallBackEvent;

    public static event EventHandler<System.EventArgs> InstanceContextOpeningEvent;
    public static event EventHandler<System.EventArgs> InstanceContextOpenedEvent;
    public static event EventHandler<System.EventArgs> InstanceContextClosingEvent;
    public static event EventHandler<System.EventArgs> InstanceContextClosedEvent;
    public static event EventHandler<System.EventArgs> InstanceContextFaultedEvent;
    #endregion

    #region - Property(ies) -
    /// <summary>
    /// Interface extension designation.
    /// </summary>
    public string Name {
        get {
            return "Duplex Call Back Notification Integration Extension.";
        }
    }

    /// <summary>
    /// GUI Interface extension.
    /// </summary>
    public IUIExtension UIExtension {
        get {
            return null;
        }
    }
    #endregion

    #region - Constructor(s) / Finalizer(s) -
    /// <summary>
    /// Initializes a new instance of the DuplexCallBackNotificationIntegrationExtension class.
    /// </summary>
    public DuplexCallBackNotificationIntegrationExtension() {
        CallDuplexNotificationPusher();
    }
    #endregion

    #region - Delegate Invoker(s) -

    void ICommunicationObject_Opening(object sender, System.EventArgs e) {
        DefaultLogger.DUPLEXLogger.Info("context_Opening");
        this.OnInstanceContextOpening(e);
    }

    void ICommunicationObject_Opened(object sender, System.EventArgs e) {
        DefaultLogger.DUPLEXLogger.Debug("context_Opened");
        this.OnInstanceContextOpened(e);
    }

    void ICommunicationObject_Closing(object sender, System.EventArgs e) {
        DefaultLogger.DUPLEXLogger.Debug("context_Closing");
        this.OnInstanceContextClosing(e);
    }

    void ICommunicationObject_Closed(object sender, System.EventArgs e) {
        DefaultLogger.DUPLEXLogger.Debug("context_Closed");
        this.OnInstanceContextClosed(e);
    }

    void ICommunicationObject_Faulted(object sender, System.EventArgs e) {
        DefaultLogger.DUPLEXLogger.Error("context_Faulted");
        this.OnInstanceContextFaulted(e);

        if (_Timer != null) {
            _Timer.Dispose();
        }

        IChannel channel = sender as IChannel;
        if (channel != null) {
            channel.Abort();
            channel.Close();
        }

        DoWorkRoutine(cToken);
    }

    protected virtual void OnCallBackEvent(Notification objNotification) {
        if (CallBackEvent != null) {
            CallBackEvent(this, new CallBackEventArgs(objNotification));
        }
    }

    protected virtual void OnInstanceContextOpening(System.EventArgs e) {
        if (InstanceContextOpeningEvent != null) {
            InstanceContextOpeningEvent(this, e);
        }
    }

    protected virtual void OnInstanceContextOpened(System.EventArgs e) {
        if (InstanceContextOpenedEvent != null) {
            InstanceContextOpenedEvent(this, e);
        }
    }

    protected virtual void OnInstanceContextClosing(System.EventArgs e) {
        if (InstanceContextClosingEvent != null) {
            InstanceContextClosingEvent(this, e);
        }
    }

    protected virtual void OnInstanceContextClosed(System.EventArgs e) {
        if (InstanceContextClosedEvent != null) {
            InstanceContextClosedEvent(this, e);
        }
    }

    protected virtual void OnInstanceContextFaulted(System.EventArgs e) {
        if (InstanceContextFaultedEvent != null) {
            InstanceContextFaultedEvent(this, e);
        }
    }
    #endregion

    #region - IDisposable Member(s) -

    #endregion

    #region - Private Method(s) -

    /// <summary>
    /// 
    /// </summary>
    void CallDuplexNotificationPusher() {
        var routine = Task.Factory.StartNew(() => DoWorkRoutine(cToken), cToken);
        cToken.Register(() => cancelNotification());
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="ct"></param>
    void DoWorkRoutine(CancellationToken ct) {
        lock (m_SyncRoot) {
            var context = new InstanceContext(this);
            var proxy = new NotificationPusherClient(context);
            ICommunicationObject communicationObject = proxy as ICommunicationObject;
            communicationObject.Opening += new System.EventHandler(ICommunicationObject_Opening);
            communicationObject.Opened += new System.EventHandler(ICommunicationObject_Opened);
            communicationObject.Faulted += new System.EventHandler(ICommunicationObject_Faulted);
            communicationObject.Closed += new System.EventHandler(ICommunicationObject_Closed);
            communicationObject.Closing += new System.EventHandler(ICommunicationObject_Closing);

            try {
                proxy.Subscribe(CMESchedulerApplicationID.ToString());
            }
            catch (Exception ex) {
                Logger.HELogger.DefaultLogger.DUPLEXLogger.Error(ex);                    

                switch (communicationObject.State) {
                    case CommunicationState.Faulted:
                        proxy.Close();
                        break;

                    default:
                        break;
                }

                cTokenSource.Cancel();
                cTokenSource.Dispose();                    
                cTokenSource = new CancellationTokenSource();
                cToken = cTokenSource.Token;
                CallDuplexNotificationPusher();  
            }

            bool KeepAliveCallBackEnabled = Properties.Settings.Default.KeepAliveCallBackEnabled;
            if (KeepAliveCallBackEnabled) {
                _Timer = new Timer(new TimerCallback(delegate(object item) {
                    DefaultLogger.DUPLEXLogger.Debug(string.Format("._._._._._. New Iteration {0: yyyy MM dd hh mm ss ffff} ._._._._._.", DateTime.Now.ToUniversalTime().ToString()));
                    DBNotificationPusherService.Acknowledgment reply = DBNotificationPusherService.Acknowledgment.NAK;
                    try {
                        reply = proxy.KeepAlive();
                    }
                    catch (Exception ex) {
                        DefaultLogger.DUPLEXLogger.Error(ex);

                        switch (communicationObject.State) {
                            case CommunicationState.Faulted:
                            case CommunicationState.Closed:
                                proxy.Abort();
                                ICommunicationObject_Faulted(null, null);
                                break;

                            default:
                                break;
                        }
                    }

                    DefaultLogger.DUPLEXLogger.Debug(string.Format("Acknowledgment = {0}.", reply.ToString()));
                    _Timer.Change(Properties.Settings.Default.KeepAliveCallBackTimerInterval, Timeout.Infinite);
                }), null, Properties.Settings.Default.KeepAliveCallBackTimerInterval, Timeout.Infinite);
            }
        }
    }

    /// <summary>
    /// 
    /// </summary>
    void cancelNotification() {
       DefaultLogger.DUPLEXLogger.Warn("Cancellation request made!!");
    }
    #endregion 

    #region - Public Method(s) -
    /// <summary>
    /// Fire OnCallBackEvent event and fill automatic-recording collection with newest 
    /// </summary>
    /// <param name="action"></param>
    public void SendNotification(Notification objNotification) {

        // Fire event callback.
        OnCallBackEvent(objNotification);
    }
    #endregion

    #region - Callback(s) -
    private void OnAsyncExecutionComplete(IAsyncResult result) {

    }
    #endregion
} 
```

# entity-framework - 使用 TPT 继承和多对多关系时，EF 5.0 中出现错误 3034

> ID：16151365
> 
> 赞同：0
> 
> 时间：2013-04-22T15:54:48.163
> 
> 标签：entity-framework, inheritance, many-to-many, entity-framework-5

我有 3 步继承抽象实体抽象 ApplicationEntity:Entity abstract SystemEntity:ApplicationEntity

系统实体包含多对多导航属性，当我尝试加载时，我得到 (202,10)：错误 3034：从第 202、208 行开始映射片段时出现问题：具有不同键的两个实体映射到同一行。确保这两个映射片段不会将具有不同键的两组实体映射到同一组行。

(208,10)：错误 3034：从第 208、578 行开始映射片段时出现问题：具有不同键的两个实体映射到同一行。确保这两个映射片段不会将具有不同键的两组实体映射到同一组行。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T21:48:34.687

我将在这里发布一个解决方案，但这可能不适合您的问题，因为这是代码优先方法。

解决方案其实很简单。只需给基类和派生类加上一个唯一的表名，EF 就会将每个类表示为一个单独的表。

在实践中（使用 VB，但如果使用 C#，你就明白了）：

基类

```
Imports System.ComponentModel.DataAnnotations.Schema

Namespace Models
    <Table("Notification")>
    Public MustInherit Class NotificationBase
        Public Property ID As Integer
        ...
    End Class
End Namespace 
```

派生类

```
Imports System.ComponentModel.DataAnnotations.Schema

Namespace Models
    <Table("EmergencyNotification")>
    Public NotInheritable Class EmergencyNotifications
        Inherits NotificationBase
        ...
    End Class
End Namespace 
```

# c++ - 具有 pthread 实现的并发队列

> ID：16151369
> 
> 赞同：1
> 
> 时间：2013-04-22T15:54:51.757
> 
> 标签：c++, multithreading

我正在编写一个用 pthread 实现的多线程队列。由于我根据互联网上的几个教程提出了代码，因此我想确保我的代码中没有逻辑错误：

```
template <typename T>
class ThreadQueue {
public:
    ThreadQueue() {
        pthread_mutex_init(&m_qmtx, NULL);
        pthread_cond_init(&m_condv, NULL);
    }

    ~ThreadQueue() {
        pthread_mutex_lock(&m_qmtx);
        m_queue.clear();
        pthread_mutex_unlock(&m_qmtx);
    }

    void push(T t_data) {
        pthread_mutex_lock(&m_qmtx);
        m_queue.push_back(t_data);
        pthread_mutex_unlock(&m_qmtx);

        pthread_cond_signal(&m_condv);
    }

    T front() {
        T ret;
        pthread_mutex_lock(&m_qmtx);
        while (m_queue.empty()) {
            pthread_cond_wait(&m_condv, &m_qmtx);
        }
        ret = m_queue.front();
        pthread_mutex_unlock(&m_qmtx);
        return ret;
    }

    void pop() {
        pthread_mutex_lock(&m_qmtx);
        if (!m_queue.empty())
            m_queue.pop_front();
        pthread_mutex_unlock(&m_qmtx);
    }

private:
    std::deque<T> m_queue;
    pthread_mutex_t m_qmtx;
    pthread_cond_t m_condv;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:29:06.573

我可以从您的代码中看到的一个大问题是它不是异常安全的。只要您的`deque`操作不抛出它就不是问题，但是如果（或者更确切地说，何时，这只是时间问题）它们会抛出，那么您的互斥锁将保持锁定状态，然后您将被卡住。

例子：

```
void push(T t_data) {
    pthread_mutex_lock(&m_qmtx);
    m_queue.push_back(t_data);
    pthread_mutex_unlock(&m_qmtx);

    pthread_cond_signal(&m_condv);
} 
```

在这里，`push_back`可能由于各种原因抛出（内存不足，T 的复制构造函数抛出，...），如果是，则`pthread_mutex_unlock`永远不会被调用。

使您的代码异常安全的最佳解决方案是为`pthread_mutex_(un)lock`. 就像是：

```
class MutexLock {
public:
    MutexLock(pthread_mutex_t& mutex)
        : m_mutex(mutex)
    {
        if (pthread_mutex_lock(m_mutex))
            throw std::runtime_error("Could not lock the mutex.");
    }
    ~MutexLock() { pthread_mutex_unlock(m_mutex); }
private:
    pthread_mutex_t& m_mutex;
} 
```

然后你可以`push`像这样重写你的函数（和其他函数）：

```
void push(T t_data) {
    {
        MutexLock lock(m_qmtx);
        m_queue.push_back(t_data);
    } // note: braces to enforce *lock* scope, for identical results to your code
    pthread_cond_signal(&m_condv);
} 
```

**注意：**如您所见，我还在`pthread_mutex_lock`包装器的构造函数中添加了错误处理（您当前代码中的另一个问题：当函数返回错误代码时，您**需要**处理它！）。但是在析构函数中这并不重要，因为（a）如果析构函数运行，则意味着包装器已成功构建，因此您的锁持有互斥锁（您将能够安全地解锁它），以及（b）析构函数不应该抛出，所以即使解锁失败，你也无能为力。

**更多阅读：**有关异常安全（这是 C++ 中的一个基本概念）的更多信息，请参阅优秀的 Herb Sutter 的系列[Guru Of The Week](http://www.gotw.ca/gotw/index.htm)，他有许多关于异常安全的文章（特别是问题 #8、21、56、 59、60、61、65，也许还有其他我错过的）。您可能还想了解 RAII。

## 或者：C++11

`pthreads`正如@qdii 所提到的，如果您可以使用 C++11，那么您可能会对用新的标准等价物 ( `std::thread`, `std::mutex`, , ...)替换所有东西感兴趣，`std::condition_variable`它们至少有两个优点：(a) 不像`pthreads`它们是可移植的，并且 (b) 您不必为正确实现异常安全而费心，因为 STL 负责大部分工作（但您仍然必须使用正确的习惯用法，例如`std::unique_lock`持有互斥锁 - 相当于我的蹩脚`MutexLock`的 RAII 包装器，除了标准的包装器实际上是经过深思熟虑的）。

# c++ - 错误 C2995：已定义函数 tmeplate

> ID：16151370
> 
> 赞同：0
> 
> 时间：2013-04-22T15:54:57.517
> 
> 标签：c++, compiler-errors, boost-serialization

我引用[了错误 C2995：已定义函数模板，](https://stackoverflow.com/questions/11094310/error-c2995-function-template-has-already-been-defined)但我不清楚如何解决编译时错误。我没有发现任何`circular references`错误，因此我想了解编译器生成这些错误的原因。

产生错误的相关代码部分

```
#ifndef TREE_H_
#define TREE_H_

#include<functional>
#include<vector>

#include<boost/shared_ptr.hpp>

#include <boost/serialization/nvp.hpp>
#include <boost/serialization/split_free.hpp>

#include<boost/serialization/shared_ptr.hpp>

namespace boost { 

     namespace serialization {

         template <class Archive, class T>
         inline void save(
            Archive &archive, 
            const boost::shared_ptr<T> &subtree,  
            const unsigned int file_version
         ){

            // only the raw pointer has to be saved
            const T *subtree_x = subtree.get();

            archive << boost::serialization::make_nvp("raw_pointer", subtree_x);
        }

        template <class Archive, class T>
        inline void load(
            Archive &archive, 
            boost::shared_ptr<T> &subtree, 
            const unsigned int /*file_version*/
        ){

            T *p_subtree;

            // recover the underlying raw pointer
            archive >> boost::serialization::make_nvp("raw_pointer", p_subtree);

            #if BOOST_WORKAROUND(BOOST_DINKUMWARE_STDLIB, == 1)
                subtree.release();
                subtree = boost::shared_ptr< T >(p_subtree);
            #else
                subtree.reset(p_subtree);
            #endif

        }

        template <class Archive, class T>
        inline void serialize(
            Archive &archive, 
            boost::shared_ptr<T> &subtree,  // no const or else get compile-time error
            const unsigned int file_version
        ){

            boost::serialization::split_free(archive, subtree, file_version);
        }

    } // namespace serialization
} // namespace boost

template <class T = int>

class Tree{

    class TreeNode{

        };

 };

 #endif 
```

编译器产生的错误

```
error C2995: 'void boost::serialization::load(Archive &,boost::shared_ptr<U> &,const unsigned int)' : function template has already been define
error C2995: 'void boost::serialization::load(Archive &,boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined    
error C2995: 'void boost::serialization::load(Archive &,boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined    
error C2995: 'void boost::serialization::save(Archive &,const boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined  
error C2995: 'void boost::serialization::save(Archive &,const boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined  
error C2995: 'void boost::serialization::save(Archive &,const boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined  
error C2995: 'void boost::serialization::serialize(Archive &,boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined   
error C2995: 'void boost::serialization::serialize(Archive &,boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined   
error C2995: 'void boost::serialization::serialize(Archive &,boost::shared_ptr<U> &,const unsigned int)' : function template has already been defined 
```

# mysql - 从 MS SQL 中的值更新 MySQL 数据库

> ID：16151376
> 
> 赞同：2
> 
> 时间：2013-04-22T15:55:13.950
> 
> 标签：mysql, sql, sql-server, sql-server-2008

基本上我在一个位置（位置 A）有一个 MS SQL 数据库，我需要将特定 SQL 查询的结果更新到位于 VPN 后面的另一个位置（位置 B）的 MySQL 服务器。MySql 服务器只有在连接到 VPN 时才能访问。

我尝试连接到具有 MS SQL 数据库的机器上的 VPN（在位置 A），下载了 MySql 连接软件以使其能够连接到 MySql 数据库以尝试创建链接服务器，但是唉，那台机器在连接到 VPN 时看不到 MySql 数据库，或者至少无法连接。（我知道我使用的是正确的安全凭证）。

我可能应该提到这台 MS SQL 机器是一个文件服务器，具有固定的 IP 地址，因此具有固定的 DNS 等。我认为这可能与它失败的原因有关。我尝试通过 tcp/IP 配置将 DNS 服务器 IP 地址（连接到 VPN 时给出）添加到可用 DNS 服务器列表中，但仍然没有运气。

令人讨厌的是，如果我在另一台计算机上连接到 VPN - 比如说我的台式机，我可以同时连接到 SQL 服务器（通过 SSMS）和 MySql 服务器（通过 Toad for MySQL）。

所以我想问题是，没有编写控制台应用程序来查询 SQL 数据库，然后将该查询的结果添加到 MySql 数据库中，或者让 SQL 吐出插入查询（以文本形式）然后运行到MySql 数据库（有 350000 行），是否有另一种更整洁、更干净的方法来实现这一目标？这真的是一次性的练习。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:04:36.857

以 CSV 文件（或 SQL 脚本）从 MS SQL 服务器导出数据，并将其导入 MySQL 服务器。

如果仅要更新特定列，则仅将它们加上主键（如果有）导出到 CSV 文件，然后进行一些文本替换，以便从数据中构建更新查询。

# java - Selenium 保存属性值并重用它

> ID：16151378
> 
> 赞同：0
> 
> 时间：2013-04-22T15:55:20.910
> 
> 标签：java, selenium-webdriver

我想知道是否有人知道如何保存对象的属性并在对象更改位置后重用它？

我首先要做的是在网格视图顶部定位对象，单击它并按提交。这是通过以下方式完成的：

```
driver.findElement(By.cssSelector(xxxxxxxxxx)).click(); 
```

selenium 会自动选择位于顶部的对象，展开对象并使我可以按下提交按钮。我还想出了如何获取该对象的唯一标识符，方法是键入：

```
driver.findElement(By.cssSelector(xxxxxxxxx)).getAttribute("title"); 
```

因为在这种情况下唯一标识符是一个标题。

所以我的问题是如何编写一个代码来保存标题并单击它/它已被重新定位的特定对象。由于网格视图中的对象将具有不同的标题，因此此代码可重用非常重要。

我拥有的唯一唯一标识符是标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:15:59.280

我通过使用 css 选择器 + 变量 + css 选择器的结尾创建一个字符串来解决这个问题。这意味着我为标题声明了一个字符串并通过使用

```
String title = driver.findElement(By.cssSelector(xxxxxxxx)).getAttribute("title");
title = mydeclaredstring; 
```

在测试 cas Nr 2 我创建了一个字符串

```
String titleString = "css[selector='" +mydeclaredstring + "']" 
```

# javascript - “yyyy-mm-ddT00:00:00.000Z”的“.000Z”是什么意思？

> ID：16151383
> 
> 赞同：80
> 
> 时间：2013-04-22T15:55:32.030
> 
> 标签：javascript, datetime, formatting, timezone

我收到了一份申请的回复，其日期和时间格式如下：

> yyyy-mm-ddT00:00:00.000Z

我需要提交报告的日期和时间。.000Z 是什么意思？我需要做什么才能根据使用 javascript 的区域获取时间？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-22T15:57:13.867

.000 是秒的分数，Z 表示 UTC 时区。

如何转换为本地时间取决于您喜欢哪种编程语言，但例如 Perl 具有用于解析和格式化时间的标准模块。

# sql-server-2008 - SSRS 连接错误

> ID：16151391
> 
> 赞同：0
> 
> 时间：2013-04-22T15:56:01.640
> 
> 标签：sql-server-2008, ssrs-2008, connection-pooling

我在 SQL Server 2008 R2 Reporting Services 中偶尔会遇到以下错误。我有大约 25 个订阅，每晚接近午夜时分，有几次他们都因这个错误而失败。我不确定这是否是一条红鲱鱼，但我在昨晚 10:00 左右杀死了大部分连接（到该服务器的 90% 的连接来自 SSRS，其中大部分来自 ReportServer db）并且没有发生错误几个小时。这是一个相对较新的安装，但是当我从旧服务器迁移时我没有进行任何调整，所以我不知道为什么会这样。我也许可以通过增加最大池大小并终止未使用的连接来解决它，但我宁愿不这样做。

> 错误：引发 Microsoft.ReportingServices.Diagnostics.Utilities.DataSourceOpenException：、Microsoft.ReportingServices.Diagnostics.Utilities.DataSourceOpenException：无法创建与数据源“MyDB”的连接。---> System.InvalidOperationException：超时已过期。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。

似乎问题在于连接没有被重用，而只是被 SSRS 重用，而不是被其他应用程序访问服务器。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:17:32.213

有几件事需要考虑，特别是因为您拥有数据驱动的订阅。

1.  尝试错开它们计划运行的时间，这样它们就不会同时竞争资源。

2.  调整数据驱动订阅的查询超时（这可能是您的主要问题）。报告和订阅都有各自的超时设置。

# c++ - 未处理的异常错误 Visual Studio 2010 C++ (open gl)

> ID：16151396
> 
> 赞同：1
> 
> 时间：2013-04-22T15:56:17.237
> 
> 标签：c++, opengl, unhandled-exception

我正在尝试编写一个 3D 模型，我正在从 .obj 中读取它。这一切都在使用标准茶壶模型，所以我决定为实际任务创建一艘宇宙飞船。然后我用茶壶文件对其进行了更改，然后将数组更改为足够大，以便在尝试运行我遇到未处理错误访问冲突错误的程序之前适合顶点和顶点法线等。下面是程序使用我必须使用的 glut 库的所有代码。

作为一个旁注，我正在努力让我的相机在宇宙飞船周围移动作为它的原点。

```
#include <windows.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include "glut.h"
#include <istream>
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>

using namespace std;

struct point3D
{
    float x;
    float y;
    float z;
};

struct camera
{
    point3D pos;
    point3D lookAt;
    point3D up;

};

camera cam = {0, 0, 5, 0, 0, 0, 0, 1, 0};

point3D v[162] = {};
point3D vn[74] = {};
point3D vt[150] = {};
point3D f[110][3] = {};

void init()
{
    glClearColor(0.5, 0.7, 0.0, 1.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(-1.0, 1.0, -1.0, 1.0, 1.0, 500);

}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT );
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity(); // reset the matrix
    gluLookAt(cam.pos.x, cam.pos.y, cam.pos.z,
              cam.lookAt.x, cam.lookAt.y, cam.lookAt.z,
              cam.up.x, cam.up.y, cam.up.z);
    glColor3f(1.0, 0.0, 0.0);
    glTranslatef(0.0f, 0.0f, -15.0f);

    for(int i = 0; i < 110; i++)
    {
        glBegin(GL_TRIANGLES);
        int one = f[i][0].x;
        int two = f[i][1].x;
        int three = f[i][2].x;

        glVertex3fv(&(v[one].x));
        glVertex3fv(&(v[two].x));
        glVertex3fv(&(v[three].x));
        glEnd();
    }

    glFlush();
}

void specialKeyboard(int key, int x, int y)
{
    switch (key)
    {
        case GLUT_KEY_RIGHT:
            cam.pos.x+=0.2;
            break;
        case GLUT_KEY_LEFT:
            cam.pos.x-=0.2;
            break;
        case GLUT_KEY_UP:
            cam.pos.y+=0.2;
            break;
        case GLUT_KEY_DOWN:
            cam.pos.y-=0.2;
            break;
        case GLUT_KEY_PAGE_UP:
            cam.pos.z+=0.2;
            break;
        case GLUT_KEY_PAGE_DOWN:
            cam.pos.z-=0.2;
            break;
    }

    glutPostRedisplay();

}

void normalKeyboard(unsigned char key, int x, int y) {
    switch (key)
    {

        case 'w' :
            cam.lookAt.y+=0.5;
            break;
        case 'a' :
            cam.lookAt.y-=0.5;
            break;
        case 's' :
            cam.lookAt.x-=0.5;
            break;
        case 'd' :
            cam.lookAt.x+=0.5;
            break;
    }

    glutPostRedisplay();

}

int main(int argc, char* argv[])
{
    int numVert = 0;
    int numNormals= 0;
    int numcoords = 0;
    int numFaces = 0;
    string test;
    ifstream inputFile;
    inputFile.open("spaceship.obj");

    if (!inputFile.good())
        cout << "Problem with Input File";
    else
    {
        while(inputFile >> test) // FIXED
        {
            inputFile >> test; // SHOULD NOT BE HERE

            if (test == "v")
            {
                inputFile >> v[numVert].x;
                inputFile >> v[numVert].y;
                inputFile >> v[numVert].z;
                numVert++;
            }
            else if(test == "vn")
            {
                inputFile >> vn[numNormals].x;
                inputFile >> vn[numNormals].y;
                inputFile >> vn[numNormals].z;
                numNormals++;
            }
            else if(test == "vt")
            {
                inputFile >> vt[numcoords].x;
                inputFile >> vt[numcoords].y;
                inputFile >> vt[numcoords].z;
                numcoords++;
            }
            else if(test == "f")
            {
                string temp;

                for(int count = 0; count < 3; count++)
                {
                    inputFile >> temp;
                    stringstream stream(temp);

                    getline(stream, temp, '/');
                    f[numFaces][count].x = atof(temp.c_str());
                    getline(stream, temp, '/');
                    f[numFaces][count].y = atof(temp.c_str());
                    getline(stream, temp, '/');
                    f[numFaces][count].z = atof(temp.c_str());
                }

                numFaces++;
            }
        }

        glutInit(&argc, argv);
        glutCreateWindow("rendering a spaceship");
        glutDisplayFunc(display);
        glutSpecialFunc(specialKeyboard);
        glutKeyboardFunc(normalKeyboard);

        init();

        glutMainLoop();
    }
} 
```

确切的错误如下“3dsassignments.exe 中 0x779815de 处的未处理异常：0xC0000005：访问冲突读取位置 0x40000010。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:04:50.030

在 Visual Studio 中捕获访问冲突的最简单方法是让其调试器的内置异常陷阱为您中断冲突。您可以通过 Debug/Exceptions/Win32 检查“访问冲突”，然后简单地运行您的程序。请注意，这不会分析您的代码。*如果它发生*，它将捕获异常，而不是如果它*可能*发生。

关于实际*导致*您的异常的原因，我会冒险猜测`!inputFile.eof()`用于您的 while 循环控制的逻辑在您认为应该终止时不会终止（并且作为旁注，`.eof()`用作循环控制条件几乎永远不正确） . 尝试`while(inputFile >> test)`删除 inputFile >> test; 在循环体中。当您到达 EOF 并尝试读取它时，这将在流上设置失败位，这似乎是您正在寻找的。

**编辑**在 OP 更改源代码后，`inputFile >> test;`正在被双重读取并因此跳过初始值。需要删除第二次提取（循环*体中的提取，而不是循环条件表达式）。*

# python - Python：如何检查对象是否为 datetime.date 类型？

> ID：16151402
> 
> 赞同：89
> 
> 时间：2013-04-22T15:56:22.490
> 
> 标签：python, datetime

我尝试了一些明显的选择，但没有一个有效：

```
In [150]: x
Out[150]: datetime.date(2012, 9, 1)

In [151]: type(x)
Out[151]: datetime.date

In [152]: isinstance(x, datetime.date)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-152-9a298ea6fce5> in <module>()
----> 1 isinstance(x, datetime.date)

TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types

In [153]: x is datetime.date
Out[153]: False

In [154]: type(x) is datetime.date
Out[154]: False 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-22T16:06:15.213

我相信它在您的示例中不起作用的原因是您已经`datetime`像这样导入了：

```
from datetime import datetime 
```

这会导致您看到的错误

```
In [30]: isinstance(x, datetime.date)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/<ipython-input-30-9a298ea6fce5> in <module>()
----> 1 isinstance(x, datetime.date)

TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types 
```

如果您只是像这样导入：

```
import datetime 
```

代码将如所有其他答案所示运行

```
In [31]: import datetime

In [32]: isinstance(x, datetime.date)
Out[32]: True

In [33]: 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-22T15:58:48.623

正确的方法是

```
import datetime
isinstance(x, datetime.date) 
```

当我在我的机器上尝试这个时，它工作正常。你需要看看为什么`datetime.date`不是一个类。你可能用别的东西掩盖它吗？还是没有正确引用它来进行导入？

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-22T15:59:34.373

```
import datetime
d = datetime.date(2012, 9, 1)
print type(d) is datetime.date

> True 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-11-27T08:38:55.443

根据[文档](https://docs.python.org/3.7/library/datetime.html)class`date`是 class 的父级`datetime`。在所有情况下，`isinstance()`方法都会给你。`True`如果你需要区分`datetime`你`date`应该检查类的名称

```
import datetime

datetime.datetime.now().__class__.__name__ == 'date' #False
datetime.datetime.now().__class__.__name__ == 'datetime' #True
datetime.date.today().__class__.__name__ == 'date' #True
datetime.date.today().__class__.__name__ == 'datetime' #False 
```

当我对日期和日期与时间有不同的格式规则时，我遇到了这个问题

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2021-08-11T14:10:07.287

在 Python 3.8.4 中，可以检查 with 方法在检查 a是 a还是 a`isinstance`时会失败，因为两个检查都会给出.`datetime``date``datetime``True`

```
 >>> from datetime import datetime, date
    >>> mydatetime = datetime.now()
    >>> mydate = mydatetime.date()
    >>> isinstance(mydatetime, datetime)
    True
    >>> isinstance(mydatetime, date)
    True 
```

这是因为它[`datetime`是的子类，`date`](https://github.com/python/cpython/blob/main/Lib/datetime.py#L1563)正如[在其他答案中所解释的那样：](https://stackoverflow.com/a/1549854/13180090)

> 派生类的实例也是基类的实例

因此，在区分`datetime`和时`date`，`type`应改为：

```
 >>> type(mydatetime) == date
    False
    >>> type(mydate) == date
    True
    >>> type(mydate) == datetime
    False
    >>> type(mydatetime) == datetime
    True 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-01T19:21:32.290

如果您现有的代码已经依赖`from datetime import datetime`，您也可以简单地导入`date`

```
from datetime import datetime, timedelta, date
print isinstance(datetime.today().date(), date) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-05T06:43:20.067

在 Python 3.5 中，`isinstance(x, date)`对我有用：

```
>>> from datetime import date
>>> x = date(2012, 9, 1)
>>> type(x)
<class 'datetime.date'>
>>> isinstance(x, date)
True
>>> type(x) is date
True 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-29T15:46:14.743

如果您在**测试中使用****freezegun**包，您可能需要进行更**智能的 isinstance 检查**，这与**FakeDate**和原始**日期/日期时间**在freeze_time**上下文中**运行良好：

 ******```
def isinstance_date(value):
    """Safe replacement for isinstance date which works smoothly also with Mocked freezetime"""
    import datetime
    if isinstance(value, datetime.date) and not isinstance(value, datetime.datetime):
        return True
    elif type(datetime.datetime.today().date()) == type(value):
        return True
    else:
        return False

def isinstance_datetime(value):
    """Safe replacement for isinstance datetime which works smoothly also with Mocked freezetime """
    import datetime
    if isinstance(value, datetime.datetime):
        return True
    elif type(datetime.datetime.now()) == type(value):
        return True
    else:
        return False 
```

和**测试以验证实现**

```
class TestDateUtils(TestCase):

    def setUp(self):
        self.date_orig = datetime.date(2000, 10, 10)
        self.datetime_orig = datetime.datetime(2000, 10, 10)

        with freeze_time('2001-01-01'):
            self.date_freezed = datetime.date(2002, 10, 10)
            self.datetime_freezed = datetime.datetime(2002, 10, 10)

    def test_isinstance_date(self):
        def check():
            self.assertTrue(isinstance_date(self.date_orig))
            self.assertTrue(isinstance_date(self.date_freezed))
            self.assertFalse(isinstance_date(self.datetime_orig))
            self.assertFalse(isinstance_date(self.datetime_freezed))
            self.assertFalse(isinstance_date(None))

        check()
        with freeze_time('2005-01-01'):
            check()

    def test_isinstance_datetime(self):
        def check():
            self.assertFalse(isinstance_datetime(self.date_orig))
            self.assertFalse(isinstance_datetime(self.date_freezed))
            self.assertTrue(isinstance_datetime(self.datetime_orig))
            self.assertTrue(isinstance_datetime(self.datetime_freezed))
            self.assertFalse(isinstance_datetime(None))

        check()
        with freeze_time('2005-01-01'):
            check() 
```******

# gdb - 当我在 gdb 中使用 dprintf 时，为什么劣质退出“正常”？

> ID：16151406
> 
> 赞同：1
> 
> 时间：2013-04-22T15:56:36.700
> 
> 标签：gdb

我正在运行一个非常简单的程序（只是一个带有一些随机 int 分配的主程序）来测试`dprintf`gdb。一个看起来像这样的主要：

```
int main(void)
{
    int h = 17;
    int k = 42;
    std::cout << "stop here" << std::endl;
} 
```

（`h`部分是第 5 行）。我设置了`dprintf 6,"h is %d\n",h`，如果我说`start`我`5`按预期排队..如果我说`advance 7`程序退出，即使`7`是`std::cout`- 为什么会这样？（如果我不使用 dprintf 并且我说`advance 7`我确实这样做了，那就断线了`std::cout`..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:29:18.440

> 为什么是这样？

这是 GDB 中的一个错误。您可以在 GDB [bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=gdb)中报告它。

# matlab - 两个数字之间的异或（十六进制到二进制转换后）

> ID：16151408
> 
> 赞同：1
> 
> 时间：2013-04-22T15:56:41.153
> 
> 标签：matlab

我不知道为什么这个编码有错误：

```
hex_str1 = '5'
bin_str1 = dec2bin(hex2dec(hex_str1))
hex_str2 = '4'
bin_str2 = dec2bin(hex2dec(hex_str2))
c=xor(bin_str1,bin_str2) 
```

当我使用 xor 函数将十六进制转换为二进制时，c 的值不正确。但是当我使用数组时，c 的值是正确的。编码是

```
e=[1 1 1 0];
f=[1 0 1 0];
g=xor(e,f) 
```

我第一次将 hec 异或到二进制值的错误是什么？任何人都可以帮我找到解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:02:46.747

您的错误是应用于[`xor`](http://www.mathworks.com/help/matlab/ref/xor.html)两个字符串而不是实际的数字数组。

对于[`xor`](http://www.mathworks.com/help/matlab/ref/xor.html)命令，逻辑“0”由实际的零元素表示。任何非零元素都被解释为逻辑“1”。

当你应用于`xor`两个字符串时，每个字符（元素）的数值就是它的 ASCII 值。从`xor`的角度来看，字符串中的零并不是真正的零，而只是非零值（等于字符 '0' 的 ASCII 值），它们被解释为逻辑“1”。底线是，在您的示例中，您对 111 [b]和 111 [b]进行异或运算，因此结果为 0。

解决方案是将字符串转换为逻辑数组：

```
num1 = (bin_str1 == '1');
num2 = (bin_str2 == '1');
c = xor(num1, num2); 
```

要将结果转换回字符串（二进制数），请使用以下命令：

```
bin_str3 = sprintf('%d', c); 
```

...并在十六进制字符串中添加：

```
hex_str3 = dec2hex(bin2dec(bin_str3)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T07:10:10.377

这真的很有帮助，并且在 matlab 中形成 HMAC 值时给了我正确的转换......但是在 matlab 中，您不能使用 bin2dec() 函数转换长度超过 52 个字符的字符串，同样 hex2dec() 不能采用十六进制字符串长度超过 13。

# activemq - 严重困惑：ActiveMQ 是否放弃了对连接池的支持？

> ID：16151409
> 
> 赞同：2
> 
> 时间：2013-04-22T15:56:41.623
> 
> 标签：activemq, apollo

我是 ActiveMQ 的新手（我们使用 Apollo 作为代理）。我读到的所有内容都说使用 org.apache.activemq.pool.PooledConnectionFactory 作为连接池，除了 activemq-all-5.5.0.jar 中不存在该类。根据 jarfinder.com，该类仅存在于旧版本的 ActiveMQ 中。

我必须包括 Spring 或其他东西吗？一池连接如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:52:14.683

在标准的 ActiveMQ 发行版中，您有 lib/optional/activemq-pool-5.8.0.jar 包含此类。

不确定阿波罗，但我猜你还是使用 ActiveMQ JMS 库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T15:19:42.030

对于 Maven 用户，这有助于：

```
 <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-client</artifactId>
        <version>${activemq.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-pool</artifactId>
        <version>${activemq.version}</version>
    </dependency> 
```

# php - domDocument 编码与数据库不匹配

> ID：16151410
> 
> 赞同：0
> 
> 时间：2013-04-22T15:56:53.280
> 
> 标签：php, character-encoding

我正在使用 domDocument 来查找 html 标签。

```
 $mensaje = "Te informamos que la parada <b>Plaza de la Estación</b> está
   próxima a vaciarse, el día <b>2013-04-22</b> a las <b>17:34:50</b>.";

$dom = new domDocument('1.0', 'utf8_general_ci');
          // load the html into the object ***/
          $dom->loadHTML($mensaje);

          //discard white space
          $dom->preserveWhiteSpace = false;
          $nodeList= $dom->getElementsByTagName('b'); // here u use your desired tag

          $items = array();
          for($i=0; $i < $nodeList->length; $i++) {
                    $node = $nodeList->item($i);
                    $items[] = trim($node->nodeValue);
          }
          var_dump($items); 
```

$mensaje 是从我的数据库中提取的，这个字段是 utf8_general_ci，但是它失败了：

```
array(3) { 
 [0]=> string(21) "Plaza de la EstaciÃ³n" 
  [1]=> string(10) "2013-04-22" 
  [2]=> string(8) "17:34:50" } 
```

第一个元素的编码错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:05:28.880

创建`DOMDocument`对象时指定的编码对 XML 文档无效。`utf8_general_ci`是一个 MySQL 编码。将其替换为`UTF-8`。
还要确保您的 php 文件的编码设置为 UTF-8。

# python - 识别错误 - OpenErp Python

> ID：16151415
> 
> 赞同：0
> 
> 时间：2013-04-22T15:57:03.617
> 
> 标签：python, module, openerp, indentation, erp

在我的模块中添加函数字段后出现此错误

```
OpenERP Server Error
Client Traceback (most recent call last):
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\http.py", line 203, in dispatch
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\controllers\main.py", line 1133, in call_button
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\controllers\main.py", line 1121, in _call_kw
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 43, in proxy
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 31, in proxy_method
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 104, in send

Server Traceback (most recent call last):
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 90, in send
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\netsvc.py", line 293, in dispatch_rpc
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\service\web_services.py", line 622, in dispatch
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\service\security.py", line 40, in check
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\pooler.py", line 49, in get_pool
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\pooler.py", line 33, in get_db_and_pool
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\registry.py", line 192, in get
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\registry.py", line 218, in new
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 344, in load_modules
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 259, in load_marked_modules
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 162, in load_module_graph
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\module.py", line 405, in load_openerp_module
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\module.py", line 133, in load_module
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\certificados\__init__.py", line 1, in <module>
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\certificados\certificados.py", line 30
def multi_a_b(self, cr, uid, ids, name, arg, context=None):
^
IndentationError: unexpected indent 
```

这是我的 module.py 中的代码（给我错误的代码部分）

```
class certificados_line(osv.osv):

    _name = 'certificados.line'
    _description="Certificados No Produccion"

    def multi_a_b(self, cr, uid, ids, name, arg, context=None):
        res = {}
        for record in self.browse(cr, uid, ids,context):
            res[record.id] = record.Cantidad * record.Precio_Unitario_Declarado
        return res

    _columns = {
        'Codigo_Arancelario' : fields.integer('Codigo Arancelario'),
        'product_id' : fields.many2one('product.product', 'Material'),
        'Descripcion_Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
        'Especificaciones_Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
        'Cantidad' : fields.float('Cantidad'), 'Unidad_de_Medida': fields.many2one('product.uom', 'Unidad de Medida'),
        'Precio_Unitario_Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
        'Valor_En_Divisas' : fields.function(multi_a_b, type='integer', string='Valor En Divisas'),
        'requisicion_id' : fields.many2one('certificados.certificados', 'Certificados de No Produccion', ondelete='cascade'),
        'Cantidad_Consumida' : fields.float('Cantidad Consumida'),    'Cantidad_Disponible' : fields.float('Cantidad Disponible'),
         } 
```

正如我在其他模块中看到的那样，可以在我声明它的地方声明函数，所以我不知道，我的意思是，我尝试更改缩进，但其他一切似乎变得混乱，列，​​_name等...我应该怎么做才能摆脱这个错误？

# github - 自动将谷歌代码重定向到 github

> ID：16151418
> 
> 赞同：3
> 
> 时间：2013-04-22T15:57:10.000
> 
> 标签：github, google-code

[我们](http://www.openworm.org/)已将[代码库和 wiki](https://github.com/openworm/OpenWorm)移至 github。然而[，谷歌代码版本在谷歌](https://code.google.com/p/openworm/)上仍然显示得非常高。当人们登陆谷歌代码版本时，有什么方法可以自动重定向到 github？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-15T21:54:29.500

我不确定此选项可用多长时间（可能与[Google 宣布他们正在关闭 Google Code](http://google-opensource.blogspot.com/2015/03/farewell-to-google-code.html)有关），但您现在可以[设置“项目已移动”标志](https://code.google.com/p/support-tools/wiki/GitHubExporterFAQ#Setting_the_%22Project_Moved%22_Flag)，该标志将为您的 Google Code 项目的所有访问者提供带有指向任何其他网站的链接，包括 GitHub。

**注意：**您似乎无法完全恢复此设置，至少在我撰写本文时无法完全恢复，因此请确保在设置之前您真的不想访问 Google Code 项目中的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T05:22:02.967

您可以在管理页面上将您[的项目标记为已移动](https://code.google.com/p/support-tools/wiki/GitHubExporterFAQ#Setting_the_%22Project_Moved%22_Flag)。如果您改变主意，可以单击发布按钮清除设置。

> ## 设置“项目已移动”标志
> 
> 项目成功导出到 GitHub 后，您需要在 Google Code 上更新项目的主页以避免混淆。
> 
> 一些项目所有者只需更新其项目主页的文本，以表明它已移至 GitHub。例如潜文本或 bwapi。
> 
> 另一种选择是设置 Google 代码“项目已移动”标志。设置后，访问项目的尝试会将用户带到指示新项目位置的插页式页面。以后页面会自动重定向到github.com等知名项目托管服务。
> 
> 要设置“项目已移动”标志，请导航到项目的高级管理页面，网址为[https://code.google.com/p/](https://code.google.com/p/) /adminAdvanced。
> 
> 在那里，在“项目已移动”下输入新项目主页 URL。例如：[https](https://github.com/google/kythe) ://github.com/google/kythe 。最后单击“项目已移动”按钮。
> 
> 如果您需要“取消移动”项目，您可以稍后返回 /adminAdvanced 页面并单击“发布”。这会将您的项目恢复到移动之前的原始状态。

# javascript - Google Analytics（分析）中未显示页面级自定义变量

> ID：16151423
> 
> 赞同：2
> 
> 时间：2013-04-22T15:57:19.747
> 
> 标签：javascript, google-analytics

我在 Google Analytics（异步代码段）中设置了一些自定义变量，按照他们的说明进行配置，如下所示：

```
_gaq.push('_setCustomVar', 2, 'price','5800', 3);
_gaq.push('_setCustomVar', 2, 'city','New York', 3);
_gaq.push('_setCustomVar', 2, 'neighborhood','West Village', 3);
_gaq.push(['_trackPageview']); 
```

但是当我查看报告时，这些变量并没有出现。你如何访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:20:32.870

您有 5 个插槽，需要为每个插槽分配一个变量。当前代码将仅发送最后一个，因为它会覆盖前一个并占用插槽#2。您可以为每个插槽使用一个插槽，它应该从那里开始工作。

```
_gaq.push('_setCustomVar', 1, 'price','5800', 3);
_gaq.push('_setCustomVar', 2, 'city','New York', 3);
_gaq.push('_setCustomVar', 3, 'neighborhood','West Village', 3);
_gaq.push(['_trackPageview']); 
```

要查看此数据，只需创建如下所示的自定义报告。

![在此处输入图像描述](https://i.stack.imgur.com/T42bE.png)

这是[此自定义报告的链接](https://www.google.com/analytics/web/template?uid=S10h60t4TOOUqAIaKFg9Gg)。您还可以使用从一个 CV 向下钻取到另一个 CV 的顺序。

# ruby-on-rails - Rails：命名空间、STI 继承的类的未定义方法错误

> ID：16151424
> 
> 赞同：1
> 
> 时间：2013-04-22T15:57:20.047
> 
> 标签：ruby-on-rails, methods, namespaces, sti

我的模型中有一个`after_create`回调`Tag`：

```
def auto_vote
  params = parametrize_media_tag(media_tag)
  Tag::Vote.cast_vote(params)
end 
```

这给了我这个错误：

```
undefined method `cast_vote' for #<Class:0x7ae7a90> 
```

我的`Tag::Vote`模型很简单：

```
class Tag::Vote < Vote

  def self.cast_vote(params)
    Vote.cast_vote_of_type(params, self.class.name)
  end

end 
```

为什么 Rails 不检测该`cast_vote`方法？

# c++ - 如何使用 SWIG 为 Numpy 的 Matrix 类创建一个包装器？

> ID：16151425
> 
> 赞同：2
> 
> 时间：2013-04-22T15:57:21.647
> 
> 标签：c++, numpy, swig

我有一个古老而成熟的 C++ 库，其中包含一个 Matrix 类和大量使用它的代码。基本上是

```
class Matrix {
  double* p;      // the actual data
  int nd;         // number of dimensions
  int d0, d1, d2; // the actual dimensionality

  // ... (a whole lot of functions computing various things, like SVDs, dotproduct etc.
} 
```

现在我们使用 SWIG 编写一个 python 包装器。我们想在 python 端使用 NumPy 数组来保持与世界其他地方的兼容性。所以我们实际上不需要我们的 C++ 矩阵类的功能，但是我们想使用我们库的一些其他部分，它需要这个 C++ 矩阵。所以完美的情况是，如果我们可以将一个类型映射从一个 NumPy 数组写入我们的 Matrix 类，它会在每次调用时透明地转换一个 NumPy 数组并保持内存同步。假设我们的库中有一些函数，它是 swigged：

```
int some_function(Matrix& in) { /* do some stuff */ } 
```

现在，如果在 python 中我们可以执行以下操作，那就太好了：

```
a = numpy.array[1,2,3,4]
b = some_function(a) 
```

我知道有 numpy.i，但这似乎更多的是关于函数映射和普通的旧 C 数组。我也明白 typemap 应该完成我想要的，但我真的不明白我如何才能真正访问 numpy 数据。有没有（相对）简单的方法可以做到这一点？

我也很感激一个指向一些教程的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T19:14:46.217

根据您提供的信息，类型映射将起作用。但是我作为一个间歇性的 SWIG 用户（通常是几周内我经常使用它，然后中断到下一个项目/阶段）的经验是，很少有人有时间去了解这个功能。

在您的情况下，我认为 SWIG 类型图比要求更方便，因此我将使用以下两种方法之一：

1.  创建一个 Python 函数，将 numpy.array 转换为 Matrix（Matrix 是 SWIG 从 C++ 导出到 Python 的函数）
2.  使用内置的 numpy.i 类型映射来调用在该类型映射中接受 C++ 类型的 C++ 函数，并定义要调用的函数`int some_function(Matrix& in)`

选项 1 的优点是您可以通过重新绑定 Python 函数来自动化转换：

```
old_some_func = some_function
def some_function(numpy_array):
    tempMat = Matrix()
    # convert numpy_array to SWIG'd Matrix class
    old_some_func(tempMat) 
```

这样做对性能的影响可能可以忽略不计，但您应该进行测试。如果没有 SWIG（即如果您使用 C API），此技术将具有额外的优势，即不需要您更改 C++ 库（请参阅 SWIG 的扩展指令）。

选项 2 的优点是转换处于 C/C++ 级别，因此根据所涉及的内容，您可能会获得改进的性能。假设 numpy.i 类型映射之一将 numpy.array 映射到 float[numValues] 数组，并且您的 C++ 矩阵包含单精度浮点值。在这种情况下，您在项目的 .i 文件中定义 C++ some_function(float*, numValues)，该函数调用 some_function(Matrix)。检查您的 C++ Matrix 类是否可以存储指向数组数据的指针，这样您将避免跨一层甚至两层复制数据（Python -> SWIG some_function(array) -> some_function(Matrix)）。

但请记住：您在 C++ some_function 中的计算可能会使这两个选项之间的任何性能差异微不足道。你必须测试。然后选择最简单和最可维护的那个（可能是选项 1）。

# sql - Rails 中带有 OR 的 Where 子句

> ID：16151429
> 
> 赞同：0
> 
> 时间：2013-04-22T15:57:38.180
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

我如何编写一个 where 子句，其中我有一个可以采用多个选项的 where 参数。例如，

```
User.where(name: "Jason" OR name: "Bob") 
```

虽然我知道这不是正确的语法，但什么是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:00:14.690

虽然我没有要检查的控制台，但我很确定它是：

```
User.where(name: ["Jason", "Bob"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T10:07:41.553

我参加聚会总是迟到...

```
friends = User.where(:name => ["Jason", "Bob"]) 
```

（导轨 4.0.0）

# php - wordpress PHP 主题功能切换导致整个网站瘫痪

> ID：16151434
> 
> 赞同：0
> 
> 时间：2013-04-22T15:57:42.607
> 
> 标签：php, wordpress, wordpress-theming

2 行代码切换了我的整个网站。我想做的就是切换博客的摘录长度。所以我在一个函数之间切换了两行代码，但后来意外丢失了这些代码行！这是一场彻头彻尾的灾难。我可以登录 wp-admin 并且网站上的某些链接不起作用。

这是我切换的代码行：

```
function avada_excerpt_length( $length ) {

(this used to be two lines of short code, i remember the code $length was   somewhere in it)

} 
```

这就是我用它替换的

```
function avada_excerpt_length( $length ) {

return: 55;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:59:19.853

你有一个语法错误：

```
return: 55; 
```

应该：

```
return 55; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:25:22.477

缺少的两行（如果您专门搜索两行）可能是：

```
$length = 55;
return $length; 
```

这与@Chris Hanson 在他的回答中所写的完全一样。

您还需要激活过滤器，这也可以是您的*“第二条缺失线”* ，这是[CODEX](http://codex.wordpress.org/Function_Reference/the_excerpt#Control_Excerpt_Length_using_Filters)的标准功能；

```
function custom_excerpt_length( $length ) {
    return 20;
}
add_filter( 'excerpt_length', 'custom_excerpt_length', 999 ); 
```

或者在你的情况下：

```
add_filter( 'excerpt_length', 'avada_excerpt_length', 999 ); 
```

主题作者所做的只是更改函数名称并添加自己的前缀。

您可能注释掉了功能行，（或用您的术语*“切换”*），但仍然激活过滤器。如果你想关闭它，你应该禁用（评论）`FILTER` 而不是`FUNCTION`。

无论如何，您应该仍然能够登录到管理端并切换到任何其他主题..

# maven - 使用 Maven / Tycho 从远程存储库中的功能组装 Eclipse 产品

> ID：16151436
> 
> 赞同：4
> 
> 时间：2013-04-22T15:57:45.993
> 
> 标签：maven, tycho

我负责基于 Eclipse 项目的基于 Maven/Tycho 的构建。该项目实际上由两个子项目Pa和Pb组成，每个子项目都是单独构建的。Pa 包含许多组合到 p2 存储库中的功能和插件。Pb 包含另一组功能以及一个产品，所有这些都取决于 Pa 的功能。

当我尝试从 Pb 中的功能以及 Pa 中的功能构建 Pb 产品时，问题就出现了。因此，我的产品文件包含以下功能：

```
<features>
  <feature id="de.cau.cs.kieler.synccharts.feature" version="0.0.0"/>
  <feature id="de.cau.cs.kieler.kaom.feature" version="0.0.0"/>
</features> 
```

第一个特性来自项目 Pb，第二个特性来自 Pa，需要 Maven/Tycho 从 p2 存储库下载。通过我的父 pom.xml 中的以下定义，构建系统可以知道存储库：

```
<profiles>
  <profile>
    <id>juno42</id>
    <properties>
      <tycho-version>0.17.0</tycho-version>
      <targetJdk>1.5</targetJdk>
    </properties>

    <repositories>
      <repository>
        <id>p2.pa</id>
        <layout>p2</layout>
        <url>repository_url_of_project_pa</url>
      </repository>
    </repositories>
  </profile>
</profiles> 
```

当我尝试构建 Pb 时（在之前构建了 Pa 并在上面定义的 URL 下发布了更新站点之后），我收到类似以下错误消息：

```
[ERROR]   Software being installed: de.cau.cs.kieler.product 0.8.0.qualifier
[ERROR]   Missing requirement: de.cau.cs.kieler.kaom.feature.feature.group 0.6.0.201304190326 requires 'de.cau.cs.kieler.core.model.gmf [0.2.2.201304190326]' but it could not be found
[ERROR]   Cannot satisfy dependency: de.cau.cs.kieler.product 0.8.0.qualifier depends on: de.cau.cs.kieler.kaom.feature.feature.group 0.0.0 
```

Maven/Tycho 显然已经从 Pa 中找到了要包含在最终产品中的功能，但未能找到该功能所包含的插件。我仔细检查了插件实际上是在 Pa 的 p2 存储库中发布的，并且所需的版本是否匹配。

有什么我看不到的吗？如果 Tycho 已经找到该功能，它不应该能够找到该功能所包含的插件吗？感谢您对解决此问题的任何帮助。:)

附带说明一下，在我们的项目中，Tycho 基于插件的 MANIFEST.MF 文件计算依赖关系，而不是基于 pom.xml 文件中定义的依赖关系。当我遇到第谷无法将两者混合在一个反应​​堆构建中的问题时，我检查了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T12:39:07.640

您的目标平台配置中似乎存在错误，例如未激活包含该配置的配置文件。

您应该在调试模式 ( `-X`) 下启动构建并检查 Tycho 打印的目标平台配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:56:18.043

我注意到的一件事是，当您引用版本 0.8.0.qualifier

在您的产品中，构建抱怨另一个版本 0.6.0.qualifier

[错误] 缺少要求：de.cau.cs.kieler.kaom.feature.feature.group 0.6.0.201304190326 需要 'de.cau.cs.kieler.core.model.gmf [0.2.2.201304190326]' 但它不可能成立

此外，不要在版本引用中使用“.qualifier”，除非它们构建在同一个反应器中，因为 .qualifier 被替换为当前构建时间戳。尝试改用“0.0.0”。

这看起来像已知的第谷错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=373817](https://bugs.eclipse.org/bugs/show_bug.cgi?id=373817)

# android - 安卓版本的问题

> ID：16151437
> 
> 赞同：0
> 
> 时间：2013-04-22T15:57:48.607
> 
> 标签：android, version

我正在开发一个应该在不同的 android 版本上运行的应用程序。我正在使用 SQLite 并按如下方式设置我的应用程序：

```
Android: 4.2.2
Platform: 4.2.2
API Level: 17 
```

清单文件

```
Android:minSdkVersion: "8"
Android:targetSdkVersion="17" 
```

在我的 Galaxy S3 上一切正常。但在 Galaxy 2 Plus 上，安装运行正常，应用程序启动崩溃。

我可以简单地更改一个参数并重建它吗？如果没有，我还能做什么？

# javascript - 可以在文档以外的其他东西上调用 getElementById 吗？

> ID：16151440
> 
> 赞同：1
> 
> 时间：2013-04-22T15:58:00.080
> 
> 标签：javascript, document, getelementbyid

我想知道并没有找到任何东西。

我正在运行一些封装的 javascript，所以我不能/不想访问`document`.

所以而不是：

```
document.getElementById("foo"); 
```

我想调用`getElementById`我的顶级封装文档，例如：

```
someNode.getElementById("foo"); 
```

这似乎不起作用。

**问题：**
这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:59:59.913

否 :) 如果您想这样做，请使用 querySelector

```
var nodes = div.querySelectorAll('[move_id]'); 
```

但是你要知道那`getElementById`是更优化的！

# vba - 在 powerpoint 演示文稿中查找文本链接的位置

> ID：16151444
> 
> 赞同：1
> 
> 时间：2013-04-22T15:58:05.447
> 
> 标签：vba, hyperlink, powerpoint

我想知道是否有办法获取设置超链接的位置。在形状的情况下，它们具有顶部和左侧值，我可以使用 Slides(i).Hyperlinks 选择超链接，但我无法找到在演示文稿中找到的超链接位置的方法，因为我可以使用形状。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:30:50.487

您需要查看每个超链接的类型以确定它是超链接形状还是应用于文本的超链接。您已经知道如何处理形状，但如果是文本，您必须沿着父链向上查找超链接应用到的文本范围。textrange 的 BoundLeft、BoundTop、BoundWidth 和 BoundHeight 属性将告诉您文本的位置。

注意：如果您在没有服务包的 PPT 2007 中执行此操作，PPT 将消失。噗。走了。

```
Dim oHl As Hyperlink
Dim oSl As Slide
Dim oRng As TextRange
Set oSl = ActivePresentation.Slides(1)

For Each oHl In oSl.Hyperlinks
    With oHl
        If .Type = msoHyperlinkRange Then
            Debug.Print TypeName(.Parent)
            Debug.Print TypeName(.Parent.Parent)
            Debug.Print TypeName(.Parent.Parent.Parent)
            Debug.Print TypeName(.Parent.Parent.Parent.Parent)
            Set oRng = .Parent.Parent
            Debug.Print oRng.Text
            Debug.Print oRng.BoundLeft
            Debug.Print oRng.BoundTop
        Else
            ' it's a hyperlinked shape

        End If
    End With
Next 
```

# java - Hsql 从现有数据库创建测试数据

> ID：16151445
> 
> 赞同：0
> 
> 时间：2013-04-22T15:58:06.847
> 
> 标签：java, junit, hsqldb, in-memory-database, test-data

有人知道使用现有数据库为内存 hsqldb 生成复杂测试数据的方法吗？所以我的junit测试将能够使用一部分正确的数据。

具体问题如下：

我们必须为现有项目编写 junit 测试，以验证在我们更改代码时集成是否有效（正常测试过程）但是我们已经有一个现有的数据库。因为我们只是为其他组件提供服务，所以我们“只是”拥有从数据库提供数据的服务。

但是在 hsqldb 中加载整个数据库会占用大量内存......所以我只想拥有一部分我可以测试的数据。表之间有很多引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:21:54.307

我从来没有使用过这个特性，但是 dbunit 有它。[http://www.dbunit.org/faq.html#extract](http://www.dbunit.org/faq.html#extract)

我用过 dbunit，我喜欢它。我们只是自己创建我们的 xml 数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T06:59:23.130

我的问题的解决方案是：

1.  运行现有的集成测试并捕获 sql 语句
2.  执行记录的sql语句
3.  从执行的 sql 创建插入语句
4.  将插入语句读入内存 hsqldb

感谢@CAB 的提示！

# kendo-ui - Kendo UI DatePicker - 获取以前的值

> ID：16151446
> 
> 赞同：3
> 
> 时间：2013-04-22T15:58:11.420
> 
> 标签：kendo-ui

当用户使用日期选择器更改日期时，我正在尝试进行确认。是否可以从对象模型中获取先前的值，或者我需要自己滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:35:07.203

没有（afaik），但你可以很容易地实现它：

```
var datePicker = $("#date").kendoDatePicker({
    change: function (e) {
        var prev = $(this).data("previous");
        var ok = confirm("Previous value:" + prev + ". Do you want to change?");
        if (ok) {
            $(this).data("previous", this.value());
        } else {
            datePicker.value(prev);
        }
    }
}).data("kendoDatePicker");
$(datePicker).data("previous", ""); 
```

我在哪里保存以前的值，然后要求确认。

看到它在[这里](http://jsfiddle.net/OnaBai/6FDDR/)运行。

相同的方法但不同的实现：

```
var datePicker = $("#date").kendoDatePicker({
    previous: "",
    change  : function (e) {
        var prev = this.options.previous;
        var ok = confirm("Previous value:" + prev + ". Do you want to change?");
        if (ok) {
            datePicker.options.previous = datePicker.value();
        } else {
            datePicker.value(prev);
        }
    }
}).data("kendoDatePicker"); 
```

我用一个字段扩展`kendoDatePicker.options`对象，`previous`然后在它更改时更新它。

# linux - 带有黑白条纹的linux zoneminder视频

> ID：16151451
> 
> 赞同：0
> 
> 时间：2013-04-22T15:58:22.917
> 
> 标签：linux, linux-device-driver

我对 zoneminder 和 linux it self 完全陌生（所以我完全不知道从我的问题开始什么）。不知何故，我设法安装了 zoneminder 并添加了一个摄像头（监视器），但是当我尝试查看它时，它显示条纹黑白屏幕或有时完全黑屏：

![在此处输入图像描述](https://i.stack.imgur.com/nIkMq.jpg)

我有 Ubuntu 12.10；ZoneMinder：v1.25.0；
视频采集卡作为 4 个独立的视频通道工作：/dev/video[0 to 3]

在终端运行`lspci`时，显示卡是：`Philips Semiconductors SAA7134/SAA7135HL Video Broadcast Decoder`. 从 dealextreme 购买卡：[goo.gl/ddSx4](http://goo.gl/ddSx4)

zoneminder 监视器的设置：
**常规**
源类型：本地
功能：监视器
启用：[true]
最大 FPS：25.00
参考图像混合 %ge：7

**源**
设备路径：/dev/video3，-也尝试使用 video0、video1、video2
捕获方法： linux 版本 2 的视频
设备通道：0
设备格式：PAL（也尝试使用 NTSC）
捕获调色板：YUYV
捕获宽度（像素）：320
捕获高度（像素）：240

我没有更改任何其他内容。

是否插入相机也没有区别，相同的条纹屏幕或有时完全黑屏出现。

有人可以帮我解决这个问题吗？这可能是什么？是卡坏了还是驱动程序坏了，还是`zoneminder`配置有问题？我不知道从什么开始解决这个问题，有人可以帮忙吗？如果可能的话，以某种“zoneminder/linux for dummies”的方式。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:58:21.167

令人难以置信的是我解决了这个问题。
这是解决方案：

我所做的是：
1）打开编辑文件（以root用户身份）：`/etc/modprobe.d/saa7134.conf`
2）在文件末尾添加这一行：
`options saa7134 card=33,33,33,33`
3）保存并重新启动计算机。

就是这样，它现在可以工作了。

# jquery - 返回 IEnumerable 来自 WebAPI，客户端出错

> ID：16151453
> 
> 赞同：0
> 
> 时间：2013-04-22T15:58:27.727
> 
> 标签：jquery, xml, asp.net-web-api

我有这个 WebAPI，我正在尝试将 xml 数据返回给客户端。

```
 [HttpGet]
        public IEnumerable<XElement> GetPersons(string name)
        {
            var doc = XDocument.Load(path);
            var result = doc.Element("Persons")
                   .Elements("Person")
                   .Where(x => (string)x.Element("name") == name);

            return result();
        } 
```

直接调用数据（`http://localhost:63068/api/GetPersons/b`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<ArrayOfXElement xmlns="http://schemas.datacontract.org/2004/07/System.Xml.Linq" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
   <XElement>
      <Person xmlns="">
         <PersonID>1</PersonID>
         <Name>b</UserName>         
      </Person>
   </XElement>
   <XElement>
      <Person xmlns="">
         <PersonID>2</PersonID>        
         <Name>b</UserName>
      </Person>
   </XElement>
</ArrayOfXElement> 
```

从客户端调用服务时出错：

```
$.ajax({
            url: baseURL + 'GetPersons/' + $('#txtUserName2').val(),
            type: "GET",
            success: function (result) {
                divResults.html(result);
            },
            error: function (xhr, status, p3, p4) {
                var err = "Error " + " " + status + " " + p3;
                if (xhr.responseText && xhr.responseText[0] == "{")
                    err = JSON.parse(xhr.responseText).message;
                divResults.html(err);
            }
        });

{"Message":"An error has occurred.","ExceptionMessage":"The 'ObjectContent`1' type failed to serialize the response body for content type 'application/json; charset=utf-8'.","ExceptionType":"System.InvalidOperationException","StackTrace":null,"InnerException":{"Message":"An error has occurred.","ExceptionMessage":"An item with the same key has already been added.","ExceptionType":"System.ArgumentException","StackTrace":"   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)\r\n 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:28:48.913

您的场景似乎是让您的 Web API 返回`path`服务器上文件中的数据，而您的客户端使用这些数据。

您在这里面临的问题`IEnumerable<XElement>`是无法序列化为 JSON：

```
 The 'ObjectContent`1' type failed to serialize 
 the response body for content type 'application/json; charset=utf-8'. 
```

原因是这`XElement`是一种非常特定于 XML 的类型......

以下是您的方案的 2 个实现：

1.  修改您的 Web API 以返回 JSON，您的客户端 ajax 代码将起作用
2.  修改您的客户端 ajax 代码以从 XML 中读取

我更喜欢#1，因为它更容易在客户端读取 JSON。这里的想法是在服务器端将您的数据反序列化为 CLR 类型，以便我们可以利用内容协商将响应序列化为 JSON。以下是我将采取的实施#1的步骤：

*   创建一个`Persons`类。一种简单的方法是将 XML 文件的内容复制到剪贴板并使用 Visual Studio 中的“将 XML 粘贴为类”功能（在“编辑”>“选择性粘贴”下）
*   用于`XmlSerializer`将定义的数据反序列化为上一步创建`path`的类型：`Persons`

    ```
     using (var streamReader = new FileStream(path, FileMode.Open))
        {
            var xmlS = new XmlSerializer(typeof(Persons));
            results = xmlS.Deserialize(streamReader) as Persons;
        } 
    ```

*   执行您拥有的任何其他业务逻辑（即按名称过滤）
*   有你`GetPersons`返回的类型`Persons`。

# asp.net - 重命名标记文件时VS2012错误地重命名代码隐藏

> ID：16151457
> 
> 赞同：2
> 
> 时间：2013-04-22T15:58:34.043
> 
> 标签：asp.net, visual-studio-2012, web-site-project, web-essentials

在 Visual Studio 2012 中，当我重命名 aspx 文件时，VS 会自动重命名代码隐藏文件，但会`.aspx`从文件名中删除。因为它仍然作为代码隐藏嵌套，所以我无法重命名它。当前的解决方法是关闭 VS 并重新打开它，此时文件 - 因为它以`.cs`而不是结束`.aspx.cs`- 不再被识别为代码隐藏文件。

*创建文件（或从另一个文件复制）：*
![示例 1](https://i.stack.imgur.com/DrEQY.png)

*重命名为 .aspx 时丢失`Default1.aspx`：*
![示例 2](https://i.stack.imgur.com/Fp2Vg.png)

*关闭并重新打开 Visual Stuio 以找到以下内容：*
![示例 3](https://i.stack.imgur.com/qaHMD.png)

*重命名以添加缺少的`.aspx`：*
![示例 4](https://i.stack.imgur.com/fvFyg.png)

*终于有一个正确命名的代码隐藏：*
![示例 5](https://i.stack.imgur.com/21pVQ.png)

这已经发生在一位同事身上一段时间了，直到最近才开始发生在我身上（我想不出催化剂）。任何人都知道如何更正代码隐藏文件的自动命名？

注意：此问题仅发生在网站上。在 WebApp 中按预期重命名函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T14:44:52.063

我有同样的问题。当我禁用 Web Essentials 2012（不是真正的解决方案 - 但它似乎是原因）时，问题就消失了。

# navigation - Moodle 2：用户在导航树中没有得到刻度和分数。

> ID：16151458
> 
> 赞同：0
> 
> 时间：2013-04-22T15:58:36.173
> 
> 标签：navigation, dashboard, moodle

Moodle 2：我们正在调查一些用户在完成活动后没有在导航树中看到刻度和分数的问题。由于我们无法通过记录受影响的用户帐户来复制问题，因此我们得出结论，这源于最终用户系统。

这是正确的测试方法吗？谁能建议为什么会发生这个问题？谢谢-G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:27:53.360

如果问题出现在用户的系统上，但在您以他们的身份登录进行检查时没有出现，则可能是由于某些完成事件需要运行 cron 脚本。您可以尝试更频繁地运行此操作。

# c# - 画布中的鼠标单击对象

> ID：16151459
> 
> 赞同：2
> 
> 时间：2013-04-22T15:58:38.567
> 
> 标签：c#, wpf

我有一个简单的应用程序来绘制椭圆、线条和矩形。

代码：

```
 private void Canvas_MouseDown(object sender, MouseButtonEventArgs e)
    {
        startPoint = e.GetPosition(canvas);

        if(figura == "linia")
        {
            linia = new Line
            {
                Stroke = Brushes.LightBlue,
                StrokeThickness = 2
            };

            canvas.Children.Add(linia);
        }

        if (figura == "kwadrat")
        {
            rect = new Rectangle
            {
                Stroke = Brushes.LightBlue,
                StrokeThickness = 2
            };

            Canvas.SetLeft(rect, startPoint.X);
            Canvas.SetTop(rect, startPoint.X);

            canvas.Children.Add(rect);
        }

        else if (figura == "kolko")
        {
            circ = new Ellipse
            {
                Stroke = Brushes.LightBlue,
                StrokeThickness = 2
            };

            Canvas.SetLeft(circ, startPoint.X);
            Canvas.SetTop(circ, startPoint.X);

            canvas.Children.Add(circ);
        }
    }

    private void Canvas_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Released || rect == null && circ == null && linia == null)
            return;

        var pos = e.GetPosition(canvas);

        var x = Math.Min(pos.X, startPoint.X);
        var y = Math.Min(pos.Y, startPoint.Y);

        var w = Math.Max(pos.X, startPoint.X) - x;
        var h = Math.Max(pos.Y, startPoint.Y) - y;

        if(figura == "linia")
        {
            linia.X1 = startPoint.X;
            linia.Y1 = startPoint.Y;
            linia.X2 = pos.X;
            linia.Y2 = pos.Y;
        }

        if (figura == "kwadrat")
        {
            rect.Width = w;
            rect.Height = h;

            Canvas.SetLeft(rect, x);
            Canvas.SetTop(rect, y);
        }

        if (figura == "kolko")
        {
            circ.Width = w;
            circ.Height = h;

            Canvas.SetLeft(circ, x);
            Canvas.SetTop(circ, y);
        }
    }
    private void Canvas_MouseUp(object sender, MouseButtonEventArgs e)
    {
        rect = null;
        circ = null;
    } 
```

现在我想对对象做一些事情，比如调整大小、移动等。当它们被鼠标点击时。我不知道如何找到被鼠标单击的对象。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:06:29.463

[`e.OriginalSource`](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx)将为您提供实际单击的控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:06:30.113

使用 RoutedEvent.Source 属性。

```
if (e.Source is Rectangle)
{
}
else if (e.Source is Ellipse)
{
}
else if (e.Source is Line)
{
} 
```

# jquery - jquery 随机检查复选框

> ID：16151466
> 
> 赞同：4
> 
> 时间：2013-04-22T15:59:02.730
> 
> 标签：jquery, html, checkbox

这个复选框控制器有什么问题？
Jquery 更改 html 中的属性，但不更改图形复选框...

html

```
<input type="checkbox" checked="checked"/>
<input type="checkbox"/>
<a href="#" class="no">off</a>
<a href="#" class="yes">on</a> 
```

js

```
$(document).ready(function(){
$('.yes').click(function(){
    $('input:checkbox').attr('checked','checked');
});
 $('.no').click(function(){
     $('input:checkbox').removeAttr('checked');
});
}) 
```

考试

[http://jsfiddle.net/ehijon/Jmn3r/](http://jsfiddle.net/ehijon/Jmn3r/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:00:17.973

更改为使用道具：

```
$("input[type='checkbox']").prop('checked',true); // --Change to false to uncheck 
```

见小提琴更新：http: [//jsfiddle.net/Jmn3r/1/](http://jsfiddle.net/Jmn3r/1/)

# windows-runtime - WinJS 绑定到 C# Windows 运行时组件类

> ID：16151469
> 
> 赞同：2
> 
> 时间：2013-04-22T15:59:17.623
> 
> 标签：windows-runtime, windows-store-apps, winjs, windows-store

我似乎无法让数据绑定在我的 WinJS 视图代码和我的 Windows 运行时组件 ViewModel 代码之间工作。有什么建议或指向讨论这个问题的网站吗？

我来自 Xaml/C# 背景，但需要制作我的 UI（又名视图）HTML/WinJS。因此，我将 HTML/WinJS 视为类似于 Xaml + C#-Codebehind 的视图。但我希望其他所有内容都使用 C# 代码编写。因此，我从一个 Windows 运行时组件项目中创建我的 ViewModel，并在 WinJS 中设置一个局部变量来表示 ViewModel 的一个实例。但是，当我尝试绑定到 ViewModel 上的简单字符串属性时，我得到以下 javascript 异常：

异常即将被 JavaScript 库代码在 ms-appx://microsoft.winjs.1.0/js/base.js 0x800a13d5 中的第 8652 行第 17 列捕获 - JavaScript 运行时错误：无法定义属性“_getObservable”：对象不是可扩展文件：base.js，行：8652，列：17

这是我的 home.js 文件中获取 ViewModel 实例并处理绑定的代码：

```
(function () {
    "use strict";

    var _viewModel;

    WinJS.UI.Pages.define("/pages/home/home.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            // TODO: Initialize the page here.
            _viewModel = ViewModels.ViewModelLocator.viewModelTest;

            WinJS.Namespace.define("Application.Pages.Home", { "ViewModel": _viewModel });
            WinJS.Binding.processAll(null, Application.Pages.Home.ViewModel);
        }
    });
})(); 
```

这是带有 data-win-bind 属性的简单 home.html 代码：

```
<section aria-label="Main content" role="main" data-win-bindsource="Application.Pages.Home">
        <h2 data-win-bind="innerText: ViewModel.testString"></h2>
        <h3>Test String Property: <span data-win-bind="innerText: testString"></span></h3>
        <button id="changeTestStringButton">Change testString value</button>
</section> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:25:21.353

在 WinJS 中，唯一可绑定的对象/属性是那些使用 WinJS API 标记为可观察的对象/属性。这类似于数据绑定在 XAML/C# 中的工作方式，因为您需要实现 INotifyPropertyChanged。

由于您创建的 WinRT 对象是密封的，因此就我的理解而言，您无法扩展它以使其在您想要的上下文中可观察到。

我过去完成此操作的方法是创建 JavaScript 包装类，以根据需要处理与 WinRT 类型之间的转换（对我们来说，从托管代码进行数据服务调用）。

# linux - 使用带有附件和主题行的 unix 命令发送邮件

> ID：16151470
> 
> 赞同：2
> 
> 时间：2013-04-22T15:59:17.440
> 
> 标签：linux, unix

我正在尝试使用 unix 的邮件命令发送带有附件和主题行的邮件，但如果两者都有，则会收到错误消息。如果我只有一个主题行，它可以工作，如果我只有一个附件，它可以工作，但不能两者兼而有之。有人知道怎么做吗？

```
data.out | mail -s "DATA" abc@company.com < text.out 
```

所以这会导致“不明确的输入重定向”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:13:26.750

您要求将命令的输入发送`data.out`到`mail`命令中，并要求它从文件中读取`text.out`；也就是说，至少可以说是因为 shell 不能两者兼得。

如果您想将文本和数据都放入邮件消息中，那么完成此操作的最简单方法是执行以下操作：

```
(cat text.out; data.out) | mail -s "DATA" abc@company.com 
```

现在如果`data.out`是一个文件而不是一个命令，那么你可以这样做：

```
cat text.out data.out | mail -s "DATA" abc@company.com 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T16:22:14.863

根据[这篇文章](http://www.shelldorado.com/articles/mailattachments.html)，你可以做你想做的事：

```
(cat text.out; uuencode data.out data.out) | mail -s "DATA" abc@company.com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:41:50.907

如果它可用，它可以`mutt`很好地用于此，并且它直接支持附件。我发现`mail`某些系统上的程序无法正确执行 MIME 编码，即使附件在通过`uuencode`.

一个使用的例子`mutt`是：

```
echo "body text" | mutt -a attachment.txt -s "subject text" -- recipient@domain.com 
```

# node.js - docpad：预览节点服务器从哪里提供文件？

> ID：16151475
> 
> 赞同：0
> 
> 时间：2013-04-22T15:59:30.473
> 
> 标签：node.js, caching, docpad

当我运行`docpad run`docpad 时，将在端口 9778 上运行默认的预览节点服务器。如果我导航到 localhost:9778，我会看到该站点是从 out 目录提供的。

但是如果我现在从 out 目录中删除一个文件，比如“out/index.html”，然后刷新页面，它不会给我一个 404 错误（即使我清除了浏览器缓存）。如果我在服务器运行时在 out 文件夹中创建一个“out/hello.html”，我可以导航到该页面。如果我删除 'out/hello.html' 并尝试再次导航到它，它会给我一个 404 正如预期的那样。

因此，我对预览服务器的工作方式感到困惑。它是否有任何缓存机制以某种方式缓存任何 docpad 生成的文件（因为 'hello.html' 不是 docpad 生成的，因此在删除后会产生 404）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:30:27.027

DocPad 将 url 映射到文档以加快查找时间，但是在这种情况下，它似乎已经过时了索引文件。这将是一个错误，应该在 DocPad 缓存算法中解决 - 将其发布在 docpad github 问题跟踪器上会很棒:)

# javascript - 使用表单的 javascript 函数

> ID：16151478
> 
> 赞同：0
> 
> 时间：2013-04-22T15:59:38.160
> 
> 标签：javascript, html

我正在为学校做一项作业，该作业使用 javascript 来使用表单创建函数。我已经创建了这个函数并做了我需要它做的事情，但在某种程度上。我正在创建的函数是检查文本框是否遵循我使用 javascript 函数为其设置的约束。如果用户输入的数字超出范围，则会出现一个警告框，提示您输入指定范围之间的数字。我知道很多人会使用 if 语句，但我想尝试不同的方法。我正在尝试使用 while 和 do...while 语句。我已经创建了函数，但是每次出现警报框并且我按确定时，警报仍然会不断出现。有没有办法从我的编码中获得它，以便每次单击确定后都不会出现警报框？我的代码：

```
function checkPrice(formData)
{

 while(!(formData.stickerPrice.value > 0) || (formData.stickerPrice.value < 100000))
 {
    alert("Enter a value between 0 andd 100000");
    setTimeout (function()
    {
        formData.stickerPrice.focus();
    })
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:01:22.000

只需将其从 更改`while`为`if`。这样它就不会连续循环。循环的`while`条件将继续存在，`true`直到您脱离 Javascript 并让用户输入某些内容。`true`一旦输入，条件将始终存在，因为在下一次迭代之前条件中没有任何变化。

# jquery - 如何在AngularJs的每个页面中运行一个函数

> ID：16151479
> 
> 赞同：12
> 
> 时间：2013-04-22T15:59:39.330
> 
> 标签：jquery, cookies, module, angularjs

我创建了一个验证 Cookie 是否存在的函数，并且我想使用 angularjs 在每个页面中运行此函数。我似乎无法使该功能运行。我应该把它的模块放在一个新的控制器上吗？

这是我达到的程度：

```
 angular.module('myApp', ['ngCookies']).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/products', {templateUrl: '/tmpl/products.html', controller: Ctrl}).
        otherwise({redirectTo: '/index'})
  }]).run( function($rootScope, $location) {

 //should I call it here?
 //validateCookie();

});

function validateCookie($scope, $cookieStore, $http){

} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-22T16:43:05.410

我认为有几种方法可以解决这个问题。如果您希望每次更改路由时都进行此验证（这意味着它将在应用程序首次启动时以及您在应用程序中访问的每个页面上运行），您可以执行以下操作：

```
angular.module('myApp', ['ngCookies']).
config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/index', {templateUrl: '/tmpl/index.html', controller: IndexCtrl}).
        when('/products', {templateUrl: '/tmpl/products.html', controller: Ctrl}).
        otherwise({redirectTo: '/index'})
}])
.run(function($rootScope, validateCookie) {
    $rootScope.$on('$routeChangeSuccess', function () {
        validateCookie($rootScope);
    })
})
.factory('validateCookie', function($cookieStore, $http){
    return function(scope) {
        // Validate the cookie here...
    }
}) 
```

如果您不需要在每次更改路线时都运行，则可以更改“运行”功能：

```
.run(function($rootScope, validateCookie) {
    validateCookie($rootScope);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:04:10.327

我将研究结合**routeProvider 解析**属性并使用**Services**。

**概述视频**

[http://www.youtube.com/watch?v=Kr1qZ8Ik9G8](http://www.youtube.com/watch?v=Kr1qZ8Ik9G8)

**API 详细信息**

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$routeProvider

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:28:05.643

也许您可以在路由更改之前绑定路由事件 (routeChangeStart) 来测试它？如果测试失败，重定向。

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$route

关于取消路线变更的讨论： [https ://groups.google.com/forum/?fromgroups=#!topic/angular/-yPBLMJQO_Q](https://groups.google.com/forum/?fromgroups=#!topic/angular/-yPBLMJQO_Q)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T16:30:37.917

我将创建一个您想要注入控制器的服务。角度站点有一个很好的例子来说明如何做到这一点：[创建服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)。通常，如果您想在许多地方使用某些逻辑，则创建服务就是这样做的方法。

# c++ - 关于 boost bimap 中 unordered_multiset_of 的问题

> ID：16151481
> 
> 赞同：1
> 
> 时间：2013-04-22T15:59:40.743
> 
> 标签：c++, boost, unordered-set, bimap, boost-unordered

我正在实现一个`boost::bimap`并且我正在考虑使用`unordered_multiset_of` 但`unordered_multiset_of`需要将一个哈希函数和相等运算符传递给它。而且我做错了。

```
class MyClass
{
  std::string s1;
  std::string s2;
  bool operator == (MyClass const& myClass)
  {
    return (s1 == myClass.s1 && s2 == myClass.s2);
  }
};

namespace std
{
  template<>
  struct hash<MyClass>
  {
    std::size_t operator()(const MyClass& myClass) const
    {
      std::size_t Seed = 0;
      boost::hash_combine(Seed, myClass.s1);
      boost::hash_combine(Seed, myClass.s2);
      return Seed;
    }
  }
}

int main()
{
  typedef boost::bimaps::bimap<boost::bimaps::unordered_multiset_of<client,std::hash<MyClass>, std::equal_to>, .......................................> MyBiMap;

  MyBiMap MAP;
} 
```

似乎我的哈希函数和 equal_to 函数给出了错误。我如何解决它？我相信`std::equal_to()`会自动调用我定义的 == 运算符`MyClass`，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:17:16.113

`bool operator == (MyClass const& myClass)`

必须是`const` `bool operator == (MyClass const& myClass)const` Othervise`std::equal_to`将无法使用它，因为它接受 const 引用

```
template <class T> struct equal_to : binary_function <T,T,bool> {
  bool operator() (const T& x, const T& y) const {return x==y;}
}; 
```

# objective-c - Objective-C 中的 %d 格式说明符

> ID：16151485
> 
> 赞同：2
> 
> 时间：2013-04-22T15:59:46.063
> 
> 标签：objective-c, string-formatting

好吧，我有以下代码：

```
{
    int alfa = CC_RADIANS_TO_DEGREES(atan2(normalized.y, -normalized.x)) + 180;
    NSString * counting = [NSString stringWithFormat:@"fdfg%d.png", alfa];
} 
```

`int alfa``0`在和之间带来一个数字`360`。

我想要实现的是`counting`字符串值等于一个图像文件，我有 360 个图像文件，都采用这种格式`"fdfg0000.png" "fdfg0024.png" "fdfg0360.png`“，从 0 增加到 360，等等......

操作员`%d`没有读取值，因为文件名前面的所有零都已由创建它们的程序输出，没有机会修改它们，我已手动将 360 文件重命名为这种格式 : `"fdfg1.png"` `"fdfg24.png"` `"fdfg340.png"`，这就是 % d 正确读取。

所以我的问题是，无论如何都要读取原始文件在运算符函数中包含的所有四个零？

或者有人知道自动重命名 360 文件的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:02:44.000

是的，您可以这样做：替换`%d`为`%04d`插入前导零并使总位数等于 4：

```
NSString * counting =[NSString stringWithFormat:@"fdfg%04d.png", alfa];
//                                                     ^^
//                                                     ||
//                                  Pad with zeros-----+|
//                          Total number of digits------+ 
```

有关格式说明符的更多信息，请阅读[`printf`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html): 格式说明符的文档`stringWithFormat:`大部分与它兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:04:23.997

> 所以我的问题是，无论如何都要读取原始文件包含在运算符函数中的所有四个零？

用作格式说明符以将`%04d`数字填充到 4 位前导零：

```
NSString * counting =[NSString stringWithFormat:@"fdfg%04d.png", alfa]; 
```

`printf()`NSString（和 NSLog 等）使用的格式说明符与 C 中使用的具有and之类的函数的说明符集几乎相同`scanf()`，因此网上有很多关于如何使用它们来实现所需结果的建议。主要区别在于Objective-C`%@`用作Objective-C 对象的格式说明符。

# php - 比较页面何时被修改和当前日期

> ID：16151486
> 
> 赞同：1
> 
> 时间：2013-04-22T15:59:47.380
> 
> 标签：php

我已将 getlastmod 函数添加到我的标题中，并且所有页面都在上次修改时显示。现在，如果页面在过去 7 天内已被修改，我想在标题导航容器上的每个页面链接中添加文本或新的小图标，否则不显示任何内容。我的逻辑是这样的：（顺便说一句，我不是程序员）

```
<?PHP
$date_modified = filemdate;
$current_date = date(Y,m,d);
$new = '/images/new.gif';

if {(current_date > date_modified + 7days);

echo "";

else {
echo $new;
}}
?> 
```

// 将 $new 添加到 header.php 导航容器上的每个导航项，例如 home(index.php)、news(news.php)、links(links.php)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:01:02.743

filemdate 是错误的函数

你应该使用

```
filemtime($filename) 
```

然后用它来比较文件时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:05:11.947

这个小片段应该做到这一点：

```
// get timestamp of last modification
$last_modified = filemtime($filename);
// get timestamp of seven days ago
$seven_days_ago = strtotime('-7 days');

// perform the comparison
if ($last_modified >= $seven_days_ago) {
    echo '/images/new.gif';
} 
```

# javascript - 加载多个 html5 视频时阻止状态 = chrome 失败

> ID：16151491
> 
> 赞同：0
> 
> 时间：2013-04-22T16:00:04.410
> 
> 标签：javascript, html, google-chrome, html5-video, popcornjs

我正在将多个 html5 视频元素加载到 webm 格式的页面上。我间歇性地收到播放停止的视频的状态失败错误。有没有人遇到过这个问题？并知道如何预防？

我尝试以 1 秒的间隔为视频标签附加 html，但这并没有阻止问题的发生。

我还在使用 popcorn.js 在每个视频中设置提示，我想知道这是否与错误有关。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:50:25.997

事实证明，我正在达到浏览器对单个 url 的同时请求限制。解决方案是设置子域 www1。www2 等指向根 url。这种技术称为分片。

# asp.net - IIS 上的 Web 服务请求失败

> ID：16151492
> 
> 赞同：0
> 
> 时间：2013-04-22T16:00:05.643
> 
> 标签：asp.net, iis-7

我正在开发一个使用 Web 服务的 ASP.NET 页面。我的 Web 应用程序托管在 iis 上，我正在将我的项目附加到它。问题是，当我在本地调试我的 Web 服务调用（使用 VS 服务器）时，一切正常，但是当我在 iis 上调试我的 Web 服务调用时，它会失败并显示一条消息`"unable to connect to the remote server"`。

IIS 上是否有任何配置阻止 Web 服务调用？

# sql-server - 批量删除/插入后更新外键表引用？

> ID：16151493
> 
> 赞同：0
> 
> 时间：2013-04-22T16:00:08.043
> 
> 标签：sql-server, tsql

我有包含父/子记录的表 A。我有引用表 A 的表 B。未强制执行外键。我正在执行批量删除/插入以更新子记录以指向正确的父项。这将为子记录分配新的主键，我还需要在表 B 中更新这些主键。

有没有办法在不使用游标或逐行处理的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:22:26.653

您能否发布一些示例数据以及应如何更正？在没有看到实际的表模式的情况下，我只能做出一些假设，因此这可能无法完美运行：

```
select PrimaryKeyField AS RowID, ChildKeyField AS OldChildID, newid() AS NewChildID
into #UpdateTable
from TableA
where SomeConditionToSelectTheChildRecords

update TableA
set TableA.ChildKeyField = #UpdateTable.NewChildID
from TableA
    inner join #UpdateTable on TableA.PrimaryKeyField = #UpdateTable.RowID

update TableB
set TableB.ChildKeyField = #UpdateTable.NewChildID
from TableB
    inner join #UpdateTable on TableB.ChildKeyField = #UpdateTable.OldChildID 
```

# ios - 如何从 NSobject 类 iOS 在任何视图控制器类上弹出 MFMessageComposeViewController 对象

> ID：16151494
> 
> 赞同：0
> 
> 时间：2013-04-22T16:00:09.987
> 
> 标签：ios, iphone, objective-c, appdelegate, mfmessagecomposeview

1.  如何从后台的类方法执行中打开`MFmessageComposeviewcontroller`任何视图控制器（topviewcontroller） 。`NSObject`

    这是我的代码，弹出按摩控制器没有错误

    ```
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];

    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Check out FundooSpace for mobile. Download it now from www.lsaknlansc.cas.kasjla/FundooSpace/d";
        controller.recipients=(NSArray *)passa;
        passa=nil;
        AppDelegate *appDelegateObject1 = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    controller.messageComposeDelegate=self;
        [appDelegateObject1.navigationCntr.topViewController performSelectorOnMainThread:@selector(presentModalViewController:animated:) withObject:controller waitUntilDone:NO];
    } 
    ```

但是 1 在单击发送或取消按钮后，它会崩溃。
2.`delegate`方法没有被调用（如何设置delegate到消息控制器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:25:00.023

我认为在后台运行的 NSObject 已被释放。它也是 Compose View Controller 的委托，所以致命错误：EXC BAD ACCESS。属性 messageComposeDelegate 不保留对象。您正在使用ARC，不是吗？

尝试保留将其分配给任何强 var 的对象，直到撰写视图控制器结束。

# java - 使用捕获的 RuntimeException 回滚

> ID：16151499
> 
> 赞同：0
> 
> 时间：2013-04-22T16:00:24.413
> 
> 标签：java, hibernate, rollback, transactional, runtimeexception

我显然需要一些关于事务回滚的帮助。我正在开发一个 Spring/JPA/Hibernate 应用程序。

对我来说，`RuntimeException` **即使**他们被抓住了，也在回滚交易。我通过一些测试（不幸的是我不能把它们放在这里，因为我不再拥有它们）和读数来推断这一点。

但是我遇到了以下代码的另一种行为：

```
public class Service implements IService {

  @Transactional
  public void test()
  {
    // ...
    try {
      throw new RuntimeException();
    } catch (RuntimeException re) {
    }
    foo.setBar(barValue);
    this.fooDao.save(foo);
  }
} 
```

从控制器执行此操作后`bar`，我的数据库中存在参数更改，这意味着事务尚未回滚。

**现在的问题**

捕获的 runtimeException 会导致回滚还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:02:55.763

如果您捕获到未经检查的异常，例如`RuntimeException`，事务将不会回滚。

默认情况下，如果您的方法由于未经检查的异常而退出，则事务将回滚。默认情况下，检查的异常不会触发回滚。

# ios - 如何转换 RestKit 映射中的值？

> ID：16151502
> 
> 赞同：2
> 
> 时间：2013-04-22T16:00:28.533
> 
> 标签：ios, objective-c, restkit, key-value-coding

假设我从 API 端点收到此响应：

```
{ "tags": [1, 5, 9] } 
```

现在，我想`"tags"`在我的对象上存储为位掩码，而不是数组（无论出于何种原因......这是一个人为的例子）。我想做这样的事情：

```
[whateverMapping addAttributeMapping:@"tags"
             withTransformationBlock:^NSNumber *(NSArray *tags) { ... }]; 
```

但是我浏览了文档，找不到执行此操作的规范方法。

我当前的（糟糕的）解决方法是有一个名为的类别`RestKitTransformers`，它实现了类似的方法`setTagsRK:`（以及用于序列化的相应 getter），这样 RestKit 就不会更明智地意识到这种转换正在发生。

这样做的正确方法是什么？

# objective-c - 防止 CABasicAnimation 中图层消失的正确方法？

> ID：16151504
> 
> 赞同：5
> 
> 时间：2013-04-22T16:00:30.533
> 
> 标签：objective-c, cabasicanimation

我正在使用 CABasicAnimation 为 CALayer 设置动画，并希望在动画完成时图层保持在原位。几乎所有解决方案都显示以下内容，效果很好

```
animation.removedOnCompletion = NO;
animation.fillMode = kCAFillModeForwards; 
```

然而，2010 年 WWDC 演讲者在 Core Animation in Practice Part 1 (~38-41mins) 中说，大多数关于消失层的解决方案都是“伪造的”，而为层设置动画的正确方法大致如下

```
animation.fromValue = [NSNumber numberWithFloat:layer.position.y];
layer.position = CGPointMake(layer.position.y, endPoint); 
animation.toValue = [NSNumber numberWithFloat:endPoint]; 
```

给出的原因是removedOnCompletion/fillMode解决方案只冻结了表示层，而实际层仍然有它原来的位置设置。

如果我误解了演讲者，请纠正我。

如果我对他的理解正确，什么时候有关系？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:18:07.193

这取决于你想做什么......你自己的解释似乎很清楚。

如果您只为属性设置动画而不更改实际值，那么“您所看到的”实际上与“是什么”不同。大多数时候，你不希望这样。（而且当你使用`UIView`动画，或者`CALayer`隐式动画的时候，“what is”和“what you see”是同步的，这和直接setter语法是一致的）。

但在某些情况下，保留实际值并在屏幕上临时显示不同的内容会很有用……只要您知道自己在做什么！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:09:54.277

你理解的没错。

这意味着当您在图层上制作动画时，会创建一个称为“表示层”的“特殊”图层，并且动画实际上发生在其上，但实际图层并未更改。实际上，您必须在动画结束时将属性设置为图层，以使图层与最终动画状态“同步”。

# javascript - Magento中view.phtml在哪里添加额外的js和css文件

> ID：16151506
> 
> 赞同：0
> 
> 时间：2013-04-22T16:00:42.650
> 
> 标签：javascript, css, magento

我想添加一个额外的 .css 文件 (my.css) 和 .js 文件 (my.js) 以包含在 view.phtml 的头部。我知道我需要修改我的主题的 local.xml 并在 Product View 部分中添加以下内容：

```
<reference name="head">
   <action method="addItem"><type>skin_js</type><name>js/my.js</name></action>
   <action method="addItem"><type>skin_css</type><name>css/my.css</name><params/>  
       </action>
</reference> 
```

我的 .js 函数根据用户输入选择特定的 .css（不确定 href 路径是否应该是这样的）：

```
 <link rel="stylesheet" href="http://mysite/skin/frontend/[mytheme]/css/my.css"     
 media="print" /> 
```

我将 my.js 直接放在 Magento 安装根目录的 js 文件夹中，将 my.css 放在 skin/frontend/[my-theme]/css 中。不幸的是，这不起作用。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:13:57.720

您可以在浏览器的检查器工具中查看哪些文件加载​​失败，然后确定哪些是错误的和正确的。我可以从您的帖子中说的是，该文件包含`skin_js`在当前主题的皮肤文件夹下。如果你想从根 js 文件夹中包含脚本，你最好使用

```
<action method="addJs"><script>some_folder_under_root_js/some_script.js</script></action> 
```

# javascript - 如何使用 Parse 密码重置

> ID：16151515
> 
> 赞同：4
> 
> 时间：2013-04-22T16:01:13.980
> 
> 标签：javascript, jquery, html, css, parse-platform

我是 Parse 的新手，我正在尝试做一个登录页面。我拥有的是用户名（不是电子邮件）和密码，这是可行的。我还为注册有一个用户名、密码和电子邮件字段。这也有效。我想要做的是添加一种方式，当用户输入他们的电子邮件地址时，解析将向他们发送电子邮件。我正在使用 JavaScript SDK。

```
<!DOCTYPE html>
<html>   
<meta charset="utf-8">
<title>Parse JavaScript Todo App</title>
<link href="css/todos.css" media="all" rel="stylesheet" type="text/css"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/underscore-1.1.6.js"></script>
<script src="//www.parsecdn.com/js/parse-1.1.15.min.js"></script>
<script src="js/todos.js"></script>
<body>

<!-- Todo App Interface -->

<div id="todoapp">
  <div class="title">
    <h1>Parse Todos</h1>
  </div>

  <div class="content">
  </div>
</div>

<div id="credits">
  Powered by <a href="https://www.parse.com">Parse</a> using the <a href="https://www.parse.com/docs/js_guide">JavaScript SDK</a>
</div>

<!-- Templates -->

<script type="text/template" id="login-template">
  <header id="header"></header>
  <div class="login">
    <form class="login-form">
      <h2>Log In</h2>
      <div class="error" style="display:none"></div>
      <input type="text" id="login-username" placeholder="Username" />
      <input type="password" id="login-password" placeholder="Password" />
      <button>Log In</button>
    </form>

    <form class="signup-form">
      <h2>Sign Up</h2>
      <div class="error" style="display:none"></div>
      <input type="text" id="signup-username" placeholder="Username" />
      <input type="password" id="signup-password" placeholder="Create a Password" />
      <input type="email" id="signup-email" placeholder="Enter your Email" />
      <button>Sign Up</button>
      <a href="passReset.htm">Forgot Password?</a>
  </div>
</script>

<script type="text/template" id="manage-todos-template">
  <div id="user-info">
    Signed in as <%= Parse.User.current().get("username") %> (<a href="#" class="log-out">Log out</a>)
  </div>

  <div class="section">

    <header id="header">
      <input id="new-todo" placeholder="What needs to be done?" type="text" />
    </header>

    <div id="main">
      <input id="toggle-all" type="checkbox">
      <label for="toggle-all">Mark all as complete</label>

      <ul id="todo-list">
        <img src='images/spinner.gif' class='spinner' />
      </ul>
    </div>

    <div id="todo-stats"></div>
  </div>
</script>

<script type="text/template" id="item-template">
  <li class="<%= done ? 'completed' : '' %>">
<div class="view">
  <input class="toggle" type="checkbox" <%= done ? 'checked="checked"' : '' %>>
  <label class="todo-content"><%= content %></label>
  <button class="todo-destroy"></button>
</div>
<input class="edit" value="<%= content %>">
  </li>
</script>

<script type="text/template" id="stats-template">
  <footer id="footer">
<span id="todo-count"><strong><%= remaining %></strong> <%= remaining == 1 ? 'item' : 'items' %> left</span>
<ul id="filters">
  <li>
    <a href="javascript:void(0)" id="all" class="selected">All</a>
  </li>
  <li>
    <a href="javascript:void(0)" id="active">Active</a>
  </li>
  <li>
    <a href="javascript:void(0)" id="completed">Completed</a>
  </li>
</ul>
<button id="clear-completed">Clear completed (<%= done %>)</button>
  </footer>
</script> 
```

接下来是实现上述工作的 JavaScript。

```
$(function() {

Parse.$ = jQuery;

// Initialize Parse with your Parse application javascript keys
Parse.initialize("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
               "XXXXXXXXXXXXXXXXXXXXXXX");

// Todo Model
// ----------

// Our basic Todo model has `content`, `order`, and `done` attributes.
 var Todo = Parse.Object.extend("Todo", {
// Default attributes for the todo.
defaults: {
  content: "empty todo...",
  done: false
},

// Ensure that each todo created has `content`.
initialize: function() {
  if (!this.get("content")) {
    this.set({"content": this.defaults.content});
  }
},

// Toggle the `done` state of this todo item.
toggle: function() {
  this.save({done: !this.get("done")});
}
});

// This is the transient application state, not persisted on Parse
var AppState = Parse.Object.extend("AppState", {
defaults: {
  filter: "all"
}
});

// Todo Collection
// ---------------

var TodoList = Parse.Collection.extend({

// Reference to this collection's model.
model: Todo,

// Filter down the list of all todo items that are finished.
done: function() {
  return this.filter(function(todo){ return todo.get('done'); });
},

// Filter down the list to only todo items that are still not finished.
remaining: function() {
  return this.without.apply(this, this.done());
},

// We keep the Todos in sequential order, despite being saved by unordered
// GUID in the database. This generates the next order number for new items.
nextOrder: function() {
  if (!this.length) return 1;
  return this.last().get('order') + 1;
},

// Todos are sorted by their original insertion order.
comparator: function(todo) {
  return todo.get('order');
}

});

// Todo Item View
// --------------

// The DOM element for a todo item...
var TodoView = Parse.View.extend({

//... is a list tag.
tagName:  "li",

// Cache the template function for a single item.
template: _.template($('#item-template').html()),

// The DOM events specific to an item.
events: {
  "click .toggle"              : "toggleDone",
  "dblclick label.todo-content" : "edit",
  "click .todo-destroy"   : "clear",
  "keypress .edit"      : "updateOnEnter",
  "blur .edit"          : "close"
},

// The TodoView listens for changes to its model, re-rendering. Since there's
// a one-to-one correspondence between a Todo and a TodoView in this
// app, we set a direct reference on the model for convenience.
initialize: function() {
  _.bindAll(this, 'render', 'close', 'remove');
  this.model.bind('change', this.render);
  this.model.bind('destroy', this.remove);
},

// Re-render the contents of the todo item.
render: function() {
  $(this.el).html(this.template(this.model.toJSON()));
  this.input = this.$('.edit');
  return this;
},

// Toggle the `"done"` state of the model.
toggleDone: function() {
  this.model.toggle();
},

// Switch this view into `"editing"` mode, displaying the input field.
edit: function() {
  $(this.el).addClass("editing");
  this.input.focus();
},

// Close the `"editing"` mode, saving changes to the todo.
close: function() {
  this.model.save({content: this.input.val()});
  $(this.el).removeClass("editing");
},

// If you hit `enter`, we're through editing the item.
updateOnEnter: function(e) {
  if (e.keyCode == 13) this.close();
},

// Remove the item, destroy the model.
clear: function() {
  this.model.destroy();
}

});

// The Application
// ---------------

// The main view that lets a user manage their todo items
var ManageTodosView = Parse.View.extend({

// Our template for the line of statistics at the bottom of the app.
statsTemplate: _.template($('#stats-template').html()),

// Delegated events for creating new items, and clearing completed ones.
events: {
  "keypress #new-todo":  "createOnEnter",
  "click #clear-completed": "clearCompleted",
  "click #toggle-all": "toggleAllComplete",
  "click .log-out": "logOut",
  "click ul#filters a": "selectFilter"
},

el: ".content",

// At initialization we bind to the relevant events on the `Todos`
// collection, when items are added or changed. Kick things off by
// loading any preexisting todos that might be saved to Parse.
initialize: function() {
  var self = this;

  _.bindAll(this, 'addOne', 'addAll', 'addSome', 'render', 'toggleAllComplete',    'logOut', 'createOnEnter');

  // Main todo management template
  this.$el.html(_.template($("#manage-todos-template").html()));

  this.input = this.$("#new-todo");
  this.allCheckbox = this.$("#toggle-all")[0];

  // Create our collection of Todos
  this.todos = new TodoList;

  // Setup the query for the collection to look for todos from the current user
  this.todos.query = new Parse.Query(Todo);
  this.todos.query.equalTo("user", Parse.User.current());

  this.todos.bind('add',     this.addOne);
  this.todos.bind('reset',   this.addAll);
  this.todos.bind('all',     this.render);

  // Fetch all the todo items for this user
  this.todos.fetch();

  state.on("change", this.filter, this);
},

// Logs out the user and shows the login view
logOut: function(e) {
  Parse.User.logOut();
  new LogInView();
  this.undelegateEvents();
  delete this;
},

// Re-rendering the App just means refreshing the statistics -- the rest
// of the app doesn't change.
render: function() {
  var done = this.todos.done().length;
  var remaining = this.todos.remaining().length;

  this.$('#todo-stats').html(this.statsTemplate({
    total:      this.todos.length,
    done:       done,
    remaining:  remaining
  }));

  this.delegateEvents();

  this.allCheckbox.checked = !remaining;
},

// Filters the list based on which type of filter is selected
selectFilter: function(e) {
  var el = $(e.target);
  var filterValue = el.attr("id");
  state.set({filter: filterValue});
  Parse.history.navigate(filterValue);
},

filter: function() {
  var filterValue = state.get("filter");
  this.$("ul#filters a").removeClass("selected");
  this.$("ul#filters a#" + filterValue).addClass("selected");
  if (filterValue === "all") {
    this.addAll();
  } else if (filterValue === "completed") {
    this.addSome(function(item) { return item.get('done') });
  } else {
    this.addSome(function(item) { return !item.get('done') });
  }
},

// Resets the filters to display all todos
resetFilters: function() {
  this.$("ul#filters a").removeClass("selected");
  this.$("ul#filters a#all").addClass("selected");
  this.addAll();
},

// Add a single todo item to the list by creating a view for it, and
// appending its element to the `<ul>`.
addOne: function(todo) {
  var view = new TodoView({model: todo});
  this.$("#todo-list").append(view.render().el);
},

// Add all items in the Todos collection at once.
addAll: function(collection, filter) {
  this.$("#todo-list").html("");
  this.todos.each(this.addOne);
},

// Only adds some todos, based on a filtering function that is passed in
addSome: function(filter) {
  var self = this;
  this.$("#todo-list").html("");
  this.todos.chain().filter(filter).each(function(item) { self.addOne(item) });
},

// If you hit return in the main input field, create new Todo model
createOnEnter: function(e) {
  var self = this;
  if (e.keyCode != 13) return;

  this.todos.create({
    content: this.input.val(),
    order:   this.todos.nextOrder(),
    done:    false,
    user:    Parse.User.current(),
    ACL:     new Parse.ACL(Parse.User.current())
  });

  this.input.val('');
  this.resetFilters();
},

// Clear all done todo items, destroying their models.
clearCompleted: function() {
  _.each(this.todos.done(), function(todo){ todo.destroy(); });
  return false;
},

toggleAllComplete: function () {
  var done = this.allCheckbox.checked;
  this.todos.each(function (todo) { todo.save({'done': done}); });
}
});

var LogInView = Parse.View.extend({
events: {
  "submit form.login-form": "logIn",
  "submit form.signup-form": "signUp",
  "submit form.reset-form": "reset"
},

el: ".content",

initialize: function() {
  _.bindAll(this, "logIn", "signUp","reset");
  this.render();
},

logIn: function(e) {
  var self = this;
  var username = this.$("#login-username").val();
  var password = this.$("#login-password").val();

  Parse.User.logIn(username, password, {
    success: function(user) {
      new ManageTodosView();
      self.undelegateEvents();
      delete self;
    },

    error: function(user, error) {
      self.$(".login-form .error").html("Invalid username or password. Please try again.").show();
      this.$(".login-form button").removeAttr("disabled");
    }
  });

  this.$(".login-form button").attr("disabled", "disabled");

  return false;
},

signUp: function(e) {
  var self = this;
  var username = this.$("#signup-username").val();
  var password = this.$("#signup-password").val();
  var email = this.$("#signup-email").val();

  Parse.User.signUp(username, password,{email:email, ACL: new Parse.ACL() }, {
    success: function(user) {
      new ManageTodosView();
      self.undelegateEvents();
      delete self;
    },

    error: function(user, error) {
      self.$(".signup-form .error").html(error.message).show();
      this.$(".signup-form button").removeAttr("disabled");
    }
  });

  this.$(".signup-form button").attr("disabled", "disabled");

  return false;
},

render: function() {
  this.$el.html(_.template($("#login-template").html()));
  this.delegateEvents();
}
});

// The main view for the app
var AppView = Parse.View.extend({
// Instead of generating a new element, bind to the existing skeleton of
// the App already present in the HTML.
el: $("#todoapp"),

initialize: function() {
  this.render();
},

render: function() {
  if (Parse.User.current()) {
    new ManageTodosView();
  } else {
    new LogInView();
  }
}
});

var AppRouter = Parse.Router.extend({
routes: {
  "all": "all",
  "active": "active",
  "completed": "completed"
},

initialize: function(options) {
},

all: function() {
  state.set({ filter: "all" });
},

active: function() {
  state.set({ filter: "active" });
},

completed: function() {
  state.set({ filter: "completed" });
}
});

var state = new AppState;

new AppRouter;
new AppView;
Parse.history.start();
}); 
```

我知道

```
Parse.User.requestPasswordReset("email@example.com", {
success: function() {
// Password reset request was sent successfully
},
error: function(error) {
// Show the error message somewhere
alert("Error: " + error.code + " " + error.message);
}
}); 
```

但无法弄清楚如何让它工作。

提前致谢。

托马斯。

编辑：基本上我要问的是如何在 Parse 中设置重置/忘记密码链接/按钮。

我现在拥有的是一个电子邮件地址和一个按钮的输入。单击按钮时，我希望 Parse 向用户发送一封电子邮件，允许用户更改其密码。

我已经更改了上面的代码，并且有了更多的知识，我将问题缩小到我认为以下

```
reset: function (e) {
        var self = this;
        var email = this.$("reset-email").val();

        Parse.User.requestPasswordReset({email:email}, {
            success: function () {
                new LogInView();
                self.undelegateEvents();
                delete self;
            },
            error: function(error) {
                // Show the error message somewhere
                self.$(".reset-form .error").html(error.message).show();
                this.$(".reset-form button").removeAttr("disabled");
            }

        });

        this.$(".reset-form button").attr("disabled", "disabled");

        return false;
    }, 
```

我得到的错误是：无效的电子邮件{}

对不起，这么草率的帖子我完全迷路了。

最终编辑：

我得到了上述工作问题在 Parse 论坛上得到了回答 [https://www.parse.com/questions/parseuserrequestpasswordreset](https://www.parse.com/questions/parseuserrequestpasswordreset)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T22:54:12.487

首先，您可以使用帮助程序 java 脚本函数检查给定的电子邮件是否有效，然后使用 Parse.User.requestPasswordReset 发出请求

```
function checkEmail(email)
{
    var atpos = email.indexOf("@");
    var dotpos = email.lastIndexOf(".");

    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length) 
    {
        return false;
    }
    return true;
}

function resetPassword()
{           
    var email = document.forms["resetpassword"]["email"].value;
    var emailIsValid = checkEmail(email);

    if (!emailIsValid)
    {
        window.alert("Not a valid e-mail address");
        return false;
    }

    Parse.User.requestPasswordReset(email, {
                success:function() {
                    window.alert("Password reset link has been sent to "+ email);
                    return true;
                },
                error:function(error) {
                    window.alert(error.message);
                    return false;
                }
            });
} 
```

# reporting-services - 如何在 Report Builder 3.0 中使用一个值制作 100% 堆叠的柱形图？

> ID：16151516
> 
> 赞同：1
> 
> 时间：2013-04-22T16:01:20.040
> 
> 标签：reporting-services, charts, mdx, olap, reportbuilder3.0

我将 Report Builder 3.0 用于具有 100% 堆叠柱形图的报表。我有不同日期的值，现在我想制作一个柱形图，其中最大值将在 Y 轴上表示 100%，并且每天累积值将填充每列的下部。

有没有可以计算最大值的表达式？或者我应该从 MDX 查询中获取这个值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:19:22.130

将您的图表更改为百分比堆积柱形图，[http](http://technet.microsoft.com/en-us/library/dd239318.aspx) ://technet.microsoft.com/en-us/library/dd239318.aspx 。

此外，如果 y 轴未显示百分比，您需要使用此格式将 y 轴标签格式化为自定义`0\%`。

# javascript - 在标识符后面加粗文本字符串

> ID：16151518
> 
> 赞同：-4
> 
> 时间：2013-04-22T16:01:28.383
> 
> 标签：javascript, jquery

```
<ul>
<li>Name: Billy</li>
<li>Phone: 0000000000</li>
<li>Email: info@email.com</li>
</ul> 
```

我正在尝试使所有值（在分号之后`:`）变为粗体，例如`Billy`等。我如何使用 jQuery 完成此操作？

它应该如下所示：

*   姓名：**比利**
*   电话：**0000000000**
*   邮箱：**info@email.com**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:08:33.413

尝试这样的事情：

```
$('li').each(function(){
 var c = $(this).text().split(":");
 $(this).html( c[0] + ':<b>' + c[1] + '</b>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:08:00.907

这应该工作

```
$('li').each(function(){
    var contents = $(this).text().split(":");
    contents[1] = "<b>" + contents[1] + "</b>";
    $(this).html(contents[0] + ": " + contents[1]);
}); 
```

它拆分“：”上的当前文本，然后将标签添加到后半部分。

小提琴：http: [//jsfiddle.net/u6vHD/](http://jsfiddle.net/u6vHD/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:10:33.653

这会起作用

```
$(function () {
    $('li').each(function(){
        $(this).html($(this).html().replace(/:\s*(.+)$/gi, ": <b>$1</b>"));
    })
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T16:12:10.167

```
<ul>
    <li>Name: <span>Billy</span></li>
    <li>Phone: <span>0000000000</span></li>
    <li>Email: <span>info@email.com</span></li>
</ul> 
```

并使用下面的代码

```
$('li > span').each(function(){
 $(this).contents().wrapAll("<b/>");
}); 
```

[演示](http://jsfiddle.net/zFsxZ/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T16:03:02.930

```
$('li').each(function(){
   var text = "<b>"+ $(this).text().split(':')[1]+"</b>";
   $(this).html($(this).text().split(':')[0] +": "+ text);
}); 
```

[jsFiddle 演示](http://jsfiddle.net/mohammadAdil/zFsxZ/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T16:06:05.237

您可以添加一个额外的元素，并使用 CSS 完成所有操作：

**CSS**

```
ul li span{
font-weight:bold;
} 
```

**HTML**

```
<ul>
<li>Name: <span>Billy</span></li>
<li>Phone: <span>0000000000</span></li>
<li>Email: <span>info@email.com</span></li>
</ul> 
```

我看到这种情况发生的唯一方法是将要突出显示的文本包装在包装器（span、div 等）中。我还没有看到一种在没有包装元素的情况下选择性地将文本包装为粗体的方法。您可以使用 jquery 来修改给定文本的样式（如果已包装）...

```
$("ul#somename li span").style("font-weight", "bold"); 
```

或者

```
$("ul#somename li span").addClass('someBoldClass'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T16:07:52.217

```
<ul>
 <li>Name: Billy</li>
 <li>Phone: 0000000000</li>
 <li>Email: info@email.com</li>
</ul>

$('ul li').each(function(i){
  var litext = $(this).text(); 
  var arrayli = litext.split(' ');
  var bold = "<b>" + arrayli[1] + "</b>";
  $(this).text(arrayli[0] + ' ' + bold);
}); 
```

# graph - 绘制流网络的软件

> ID：16151520
> 
> 赞同：2
> 
> 时间：2013-04-22T16:01:38.410
> 
> 标签：graph, graph-drawing, network-flow

我需要绘制一些流网络，如下所示：
![在此处输入图像描述](https://i.stack.imgur.com/n5HEd.jpg)

有谁知道可以做到这一点的程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:25:25.493

GraphViz is the tool you need.

[http://www.graphviz.org/](http://www.graphviz.org/)

This in the gallery looks close to what you want: [http://www.graphviz.org/content/fsm](http://www.graphviz.org/content/fsm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T16:51:08.030

事实证明，您可以在 Ubuntu 中使用 LibreOffice Draw 创建如下图。
![在此处输入图像描述](https://i.stack.imgur.com/qRekj.png)

# .htaccess - .htaccess MAMP 与实际环境的区别

> ID：16151524
> 
> 赞同：0
> 
> 时间：2013-04-22T16:01:44.357
> 
> 标签：.htaccess, mod-rewrite, mamp

我正在 MAMP 上构建我的网站，几天后我终于得到了一个 .htaccess 文件，可以按照我的意愿工作。但是现在当我上传到实时环境时，它的行为就不一样了！有不同的版本吗？是因为我的文件中的错误导致 MAMP 自动处理吗？

如果不是这些特殊文件，则使用默认的 RewriteRule。scripts/images/mediacontent/services/robot.txt 有效但**无效（login.php、hybridauth、blog）**

```
#start
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

# main site
RewriteCond %{REQUEST_URI} !^/scripts/(.*\.js)$
RewriteCond %{REQUEST_URI} !^/styles/(.*\.css)$
RewriteCond %{REQUEST_URI} !^/images/(.*\.jpg|.*\.png|.*\.gif)$
RewriteCond %{REQUEST_URI} !^/mediacontent/(.*\.jpg|.*\.png)$ [NC]
RewriteCond %{REQUEST_URI} !^/services/(.*\.php)$
RewriteCond %{REQUEST_URI} !^/login\.php$
RewriteCond %{REQUEST_URI} !^/hybridauth/$ 
RewriteCond %{REQUEST_URI} !^/blog/$ [NC]
RewriteCond %{REQUEST_URI} !^/robot.txt$ 

RewriteRule (\w+) index.php?page=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:04:02.940

删除所有 .htaccess 文件后，我注意到问题不在重写中。

我删除了服务器上的所有文件并再次上传，现在它可以工作了。

自我注意：使用好的 FTP 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:24:49.410

使用`\w+`，您不会捕获完整的请求，而只会捕获其中的一部分。

从[转义序列](http://www.php.net/manual/en/regexp.reference.escape.php)

> \w
> 任何“单词”字符
> 
> “单词”字符是任何字母或数字或下划线字符

这意味着不包括点`.`、斜线`/`、连字符`-`或下划线以外的任何其他特殊字符`_`。

从看起来的条件来看，您希望从规则中排除所有现有文件和目录。你可以达到同样的效果

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php?page=$0 [L] 
```

此规则捕获完整路径，包括任何特殊字符，并将其传递给`index.php`. 但它也排除了所有真实文件，如 Javascript 源代码、CSS 文件、图像等。

# java - JUnit：Eclipse 中没有可运行的测试。但适用于 Maven

> ID：16151525
> 
> 赞同：0
> 
> 时间：2013-04-22T16:01:46.383
> 
> 标签：java, junit, eclipse-plugin, osgi, eclipse-pde

在 Eclipse 下运行时，JUnit 给了我“无法运行的测试”，但在 Maven 构建中运行良好。

我有一个工作测试片段，然后让主机插件扩展一个扩展点。这意味着我需要使用“运行插件测试”，否则接线将不起作用。突然，测试将不再执行。但是，使用 Maven/Tycho 可以按预期工作。

请注意，我确实将 junit 作为必需的捆绑包，并且在我添加扩展之前，测试类曾经可以工作。

有遇到类似问题的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:31:04.607

切换到 pax-exam 可能更容易，它是一个与 junit 一起使用的 osgi 测试框架，可与 eclipse 和 maven 一起使用

# android - 如何在 webview 中获取 admob？

> ID：16151526
> 
> 赞同：0
> 
> 时间：2013-04-22T16:01:48.823
> 
> 标签：android, webview, admob

我有一个通过 webView 加载的网页。页面有一个 div 块来显示广告，我的任务是获取这个 div 块并为 adMob 插入代码。不幸的是，我没有找到任何描述这种方法的文档，甚至没有说它是可能的。

如果你知道一些可以帮助我的东西，我会很高兴听到它。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T16:21:20.097

第一个建议：除非迫不得已，否则不要使用 webview。

要在应用程序中显示 as，请不要使用 Web，而是使用 AdView ( [https://developers.google.com/mobile-ads-sdk/download#downloadandroid](https://developers.google.com/mobile-ads-sdk/download#downloadandroid) )

```
 <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="MY_AD_UNIT_ID"
                         ads:adSize="BANNER"
                         ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                         ads:loadAdOnCreate="true"/> 
```

将您的 AdView 放在您的 Webview 下方，瞧！

# grails - 避免 Grails 应用程序上的 Heroku 启动超时

> ID：16151527
> 
> 赞同：2
> 
> 时间：2013-04-22T16:01:52.420
> 
> 标签：grails, heroku, timeout

我们在 heroku cedar 中部署了一个 grails 应用程序，我们的应用程序需要 60 多秒才能启动，根据[heroku](https://devcenter.heroku.com/articles/error-codes#r10-boot-timeout)的说法：

> 一个 Web 进程需要超过 60 秒才能绑定到其分配的 $PORT。发生这种情况时，测功机的进程被杀死，测功机被认为是崩溃的

我们尽可能减少了依赖，但在某些情况下启动需要超过 60 秒，所以我们的应用程序被 heroku 停止。

你知道一些避免这种情况的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T06:04:02.263

对于这个问题，我有一个很好的解决方案：我分叉了 Grails buildpack 并添加了一些代码，强制 Jetty 绑定到`$PORT`早期，这样 Grails 就可以一直占用它想要启动的时间；在 Grails 启动期间，请求会因为 404 错误而失败，但至少应用程序可以可靠地启动。

[https://github.com/funfork/heroku-buildpack-grails-earlybind](https://github.com/funfork/heroku-buildpack-grails-earlybind)

要使用它：

```
heroku config:set BUILDPACK_URL=https://github.com/funfork/heroku-buildpack-grails-earlybind 
```

如果您需要强制重新编译（确保您没有提交待处理）：

```
git commit --allow-empty -m "empty commit"
git push heroku master 
```

给你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:50:42.777

你可以做两件事。第一个是尝试显式设置您的依赖项，以便依赖项解析不会花费那么长时间。请参阅[Pete 关于慢速 Grails 启动的回答](https://stackoverflow.com/questions/7975762/grails-very-slow-to-resolve-certain-dependencies/7990573#7990573)。

您可以尝试的特定于 Heroku 的方法是使用新的[2X Dyno Size](https://devcenter.heroku.com/articles/dyno-size)，它为您提供 1024MB 的 RAM 而不是 512MB（但请注意，它们是每小时 0.10 美元而不是 0.05 美元，并且不再属于免费套餐）。

最后，由于 Heroku 正在寻找与 的绑定`$PORT`，因此您可以监听`$PORT`任何请求并将其排队，直到应用程序完全启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T04:52:59.287

我对 Grail 的应用程序也有同样的体验。我的一个应用程序正确启动，但随后我部署了另一个应用程序并遇到了这个问题，尽管它们的依赖项配置非常相似。

我**通过删除 BuildConfig.groovy**（jquery、jquery-ui、twitter-bootstrap 和 lesscss-resources）中的一些 js 插件并手动添加这些资源来解决它。

在本地，这或多或少地将启动时间从 20 秒减少到 13 秒（总是在谈论第一次启动，在交互模式下连续启动非常快）。考虑到我还创建了删除表并引导了一些数据，尽管在删除提到的插件之前避免这样做并不能解决我的问题。

有趣的是，我的其他应用程序如何在 heroku 中及时启动，拥有所有插件。

# centos - gitolite 设置变得致命：'/tmp/Q3pnE4WVbu' 的指纹识别失败

> ID：16151528
> 
> 赞同：7
> 
> 时间：2013-04-22T16:01:57.840
> 
> 标签：centos, gitolite, centos5

我在 CentOS 5.9 服务器上安装 gitolite。我已经创建了 git 用户，然后在`su - git`我设法将我的公钥放入 ~/.ssh/ 目录之后，我已经成功地从 github 克隆了 gitolite repo 并运行了`gitolite/install -ln`. 下一步是运行 gitolite 设置。

```
git@hostname [~]# gitolite setup -pk $HOME/.ssh/micha.pub
Initialized empty Git repository in /home/git/repositories/gitolite-admin.git/
Initialized empty Git repository in /home/git/repositories/testing.git/
FATAL: fingerprinting failed for '/tmp/Q3pnE4WVbu' 
```

谷歌搜索和在 SO 上的搜索并没有帮助我解决这个`FATAL`错误，我现在受到了阻碍。

我应该在运行设置之前自定义 gitolite.conf 文件吗？我一直按照[http://gitolite.com/gitolite/progit.html](http://gitolite.com/gitolite/progit.html)的说明进行操作，因为对于像我这样的新手来说，它们比普通的 gitolite 文档更容易理解。但是，这些说明没有提及自定义 .conf 文件。

* * *

**更新：** 我尝试生成一个新密钥，但仍然失败：

```
git@hostname [~]# ssh-keygen -t rsa -C "Gitolite Admin Access (not interactive)" -P "" 
Generating public/private rsa key pair.
Enter file in which to save the key (/home/git/.ssh/id_rsa): /home/git/.ssh/micha
/home/git/.ssh/micha already exists.
Overwrite (y/n)? y
Your identification has been saved in /home/git/.ssh/micha.
Your public key has been saved in /home/git/.ssh/micha.pub.
The key fingerprint is:
33:b6:62:8b:b9:58:07:7a:71:6a:02:a5:ff:7e:c3:3a Gitolite Admin Access (not interactive)
git@hostname [~]# gitolite setup -pk $HOME/.ssh/micha.pub
Initialized empty Git repository in /home/git/repositories/gitolite-admin.git/
Initialized empty Git repository in /home/git/repositories/testing.git/
FATAL: fingerprinting failed for '/tmp/pUKqewb66w' 
```

我也尝试用`$HOME`完整路径替换，以防万一`su - git`混淆了。我的 ssh 安装有问题吗？不确定我使用 ssh 连接到该服务器时会怎样。

* * *

**更新：** 事实证明 gitolite 保留了我之前尝试设置但失败的公钥。然后我删除了所有的 repos、gitolite 源目录、~/bin 中的符号链接和 .gitolite 目录，并再次开始安装过程。我从 github 克隆了 gitolite repo，在删除了我之前尝试使用的所有其他密钥后生成了一个新密钥。然后我跑了`gitolite install -ln`，最后

```
git@hostname [~]# gitolite setup -pk $HOME/admin.pub
Initialized empty Git repository in /home/git/repositories/gitolite-admin.git/
Initialized empty Git repository in /home/git/repositories/testing.git/
FATAL: fingerprinting failed for '/tmp/tsIx4cKWHj' 
```

仍然失败。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-05T09:31:57.347

如果您从 puttykeygen 等获取 pub 密钥。它将与标题等多行

```
---- BEGIN SSH2 PUBLIC KEY ----
Comment: "test@example.com"
startofkeylines
....
endofkey==
---- END SSH2 PUBLIC KEY ---- 
```

删除 --- begin 和 end 行，以及 Comment: 行。将所有关键线放在一行中。并以 ssh-rsa 为前缀，如下所示：

```
ssh-rsa startofkeylines....endofkey== 
```

这对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T04:09:57.980

gitolite 正在对 .ssh 目录中的所有密钥进行指纹识别 - 包括 authorized_keys 文件。从 .ssh 目录和 authorized_keys 文件中删除任何不需要或损坏的密钥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T13:28:24.380

我遇到了同样的问题。原来，在复制粘贴期间，我在我的一个键中包含了一个换行符。我花了一些时间才发现它...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-09T21:58:48.730

你写道：“事实证明 gitolite 保留了我之前尝试设置但失败的公钥。”

我有同样的问题。我收到了错误：

*致命：“keydir/jsmith.pub”的指纹识别失败*

我在客户端删除了失败的密钥，并做了一个 git push，但仍然是同样的问题。因此我必须登录到 gitolite 服务器并运行以下命令：

```
rm ~/.gitolite/keydir/jsmith.pub
gitolite setup 
```

这解决了问题。这是有效的，因为根据 gitolite 文档，“来自此推送的 pubkey 文件已检出到 ~/.gitolite/keydir”。好吧，如果发生了一些致命错误，那么 pub 键将不会放在正确的位置。因此，您甚至可以正确格式化您的 ssh 密钥，但它仍然不会被写入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T18:34:45.293

正如我[之前提到](https://stackoverflow.com/a/10744027/6309)的，这意味着 ssh 密钥尚未正确生成。

尝试：

```
ssh-keygen -t rsa -f "${H}/.ssh/micha" -C "Gitolite Admin access (not interactive)" -q -P "" 
```

* * *

[OP mwotton](https://stackoverflow.com/users/283991/mwotton) [报告](https://stackoverflow.com/a/16183207/6309)从任何先前的 ssh 密钥中清除 ~/.ssh 是解决方案。
这是因为该[`ssh-authkeys.fp_file()`](https://github.com/sitaramc/gitolite/blob/master/src/triggers/post-compile/ssh-authkeys#L112-L120)函数是[使用 find](https://github.com/sitaramc/gitolite/blob/master/src/triggers/post-compile/ssh-authkeys#L49-L60)调用的：

```
chomp( my @pubkeys = `find keydir/ -type f -name "*.pub" | sort` ); 
```

因此，它可以获取已经存在于`~/.ssh`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-14T15:24:03.107

我已经尝试了所有的密钥再生、gitolite 重新安装、清除所有密钥文件等，但都没有成功，直到我开始查看 gitolite 的 Git 历史记录。

问题是 github & google.code repos 上的 master 分支被破坏了。我在指纹问题消失时检查了最后一个稳定版本 v3.6.4。我想我可以发现最近的一个提交会影响这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-23T23:00:08.100

我遇到的问题是，在版本 v6.8 中或附近的 openssh 更改了指纹的默认密码（ssh-keygen -lf path-to-key），因此现在必须显式传递密码类型（-E md5）才能获得遗留行为。查看 CHANGES 文件显示 gitolite v3.6.5 将“正确处理新样式的 ssh 指纹识别（感谢 Robin Johnson）”。gitolite 的升级为我解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-02T05:40:24.027

对我来说，我通过**不**以用户身份运行`gitolite`命令来使其工作`root`。我创建了一个`git`用户帐户（发现它需要是一个可以登录的帐户......即没有`/bin/false`in `/etc/passwd`）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-21T07:54:54.613

我将 gitolite 从 v2 升级到 v3，运行安装并设置管理员密钥

然后强制推送配置存储库，现在所有问题都已修复。

# python - Tkinter 奇怪的帧大小

> ID：16151531
> 
> 赞同：1
> 
> 时间：2013-04-22T16:02:24.657
> 
> 标签：python, size, tkinter, frame

我得到了第二帧的这种奇怪行为。如何将“Clone Repo”和“Pull”按钮调整为完整的列大小？输出图片：

[![例子](https://i.stack.imgur.com/hDdUp.png)](https://i.stack.imgur.com/hDdUp.png)

资源：

```
from Tkinter import *

root = Frame()
root.grid(sticky=N+S+E+W)

local=LabelFrame(root, text="local")
local.grid(row=0, sticky=E+W)
external=LabelFrame(root, text="external")
external.grid(row=1, sticky=E+W)

StatusButton=Button(local, text="status")
StatusButton.grid(row=0, columnspan=2, sticky=W+E)

AddFileEntry=Entry(local)
AddFileEntry.grid(row=1, column=0)

AddFileButton=Button(local, text="add changed/new file(s)")
AddFileButton.grid(row=1, column=1, sticky=W+E)

CommitEntry=Entry(local)
CommitEntry.grid(row=2, column=0)

CommitButton=Button(local, text="Comment on changes")
CommitButton.grid(row=2, column=1, sticky=W+E)

CloneRepoEntry=Entry(external)
CloneRepoEntry.grid(row=0, column=0)

CommitRepoButton=Button(external, text="Clone repo")
CommitRepoButton.grid(row=0, column=1, sticky=W+E)

PushButton=Button(external, text="Push")
PushButton.grid(row=1, column=0, sticky=W+E)

PullButton=Button(external, text="Pull")
PullButton.grid(row=1, column=1, sticky=W+E)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:18:04.403

底部框架中小部件的自然尺寸小于框架。Tkinter 需要知道如何/在哪里分配额外的空间。您可以通过给列和/或行“权重”来告诉它这些信息。

在您的情况下，将第 1 列`external`的权重设为 1 将导致它扩展以填充框架中的空白空间。

```
external.grid_columnconfigure(1, weight=1) 
```

# android - android 电话号码作为 data1 返回

> ID：16151533
> 
> 赞同：0
> 
> 时间：2013-04-22T16:02:33.130
> 
> 标签：android, android-contacts, android-cursor

我正在尝试使用以下代码来读取电话号码。但它曾经将数字返回为`data1`. 如何解决此问题以获得实际数字？

```
minorCursor = contentResolver.query(Phone.CONTENT_URI, new String[] { Phone.NUMBER, Phone.TYPE },
                    " DISPLAY_NAME = '" + name + "'", null, null);
                while (minorCursor.moveToNext()) {

                    switch (minorCursor.getInt(minorCursor.getColumnIndex(Phone.TYPE))) {
                    case Phone.TYPE_MOBILE:
                        phoneNumber = Phone.NUMBER;
                        break;
                    case Phone.TYPE_HOME:
                        phoneNumber = Phone.NUMBER;
                        break;
                    case Phone.TYPE_WORK:
                        phoneNumber = Phone.NUMBER;
                        break;
                    case Phone.TYPE_OTHER:
                        phoneNumber = Phone.NUMBER;
                        break;
                    }
} 
```

我从对[如何在 Android 中检索联系人姓名和电话号码](https://stackoverflow.com/questions/4613104/how-to-retrieve-contact-name-and-phone-number-in-android)的第三个响应中获得代码，因为我假设他说其他回复使用的方法已被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:07:28.167

尝试这个

像这样获取您的电话号码。

```
String phoneNumber = minorCursor.getString(minorCursor.getColumnIndex(Phone.NUMBER)); 
```

您需要从`cursor`上面返回的电话号码`query`。

你想要做的只是在课堂上获得`constant`价值`Phone`

ie`Phone.NUMBER`是`Phone`类中的常量字段，它不会给你电话号码

# jsf - 当我在我的 java Bean 中使用 FacebookClient 类时，xhtml 不运行

> ID：16151535
> 
> 赞同：0
> 
> 时间：2013-04-22T16:02:40.140
> 
> 标签：jsf, jakarta-ee

我尝试了这些简单的 java 和 xhtml 代码，但它不起作用。

```
@ManagedBean(name = "connecter")
@RequestScoped
@SessionScoped
public class Connecter 
{

    int nombre;

    public Connecter()
    { 
```

//在这里我将输入我从 Graph API Explorer 获得的访问令牌//

```
 FacebookClient facebookClient = new DefaultFacebookClient("");
        Connection<User> myFriends = facebookClient.fetchConnection("me/friends", User.class, Parameter.with("fields", "id, name,picture"));

        nombre = myFriends.getData().size();

    }

    public int getNombre()
    {

        return nombre;
    }

    public void setNombre(int nombre)
    {
        this.nombre = nombre;
    }

} 
```

//这是我的 web.xml 文件，包括 servlet 映射。那么如何检查 url 是否在 Faces Servlet URL 中？

```
 <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping>

  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <context-param>
    <description>..</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
   <context-param>
<param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
<param-value>true</param-value>
</context-param>
  <context-param>
    <description>
    ..</description>
    <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <description>
    ..'</description>
    <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
    <param-value>false</param-value>
  </context-param>
  <context-param>
    <description>
    ..
</description>
    <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
    <param-value>true</param-value>
  </context-param>
  <listener>
    <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
  </listener>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:05:19.673

一个托管 bean 不能同时具有多个作用域。从托管 bean 中删除`@RequestScoped`或`@SessionScoped`注释。

您的托管 bean 逻辑不应该在您的 bean 构造函数中，而是使用`@PostConstruct`方法：

```
public class Connecter {
    int nombre;
    public Connecter() {
    }
    @PostConstruct
    public void init() {
        //be sure to have this myFriend object declared and initialized here as well
        //also, manage the Exceptions here...
        //this is a plain basic example
        try {
            FacebookClient facebookClient = new DefaultFacebookClient("");
            Connection<User> myFriends = facebookClient.fetchConnection(
                "me/friends", User.class,
                 Parameter.with("fields", "id, name,picture"));
            //here I will ...
            nombre = myFriends.getData().size();
         } catch (Exception e) {
            e.printStackTrace();
            nombre = 0;
         }
    }
    //getters, setters, other methods...
} 
```

# javascript - JS/jQuery 将数组合并到另一个数组的对象中

> ID：16151539
> 
> 赞同：0
> 
> 时间：2013-04-22T16:02:46.873
> 
> 标签：javascript, jquery, arrays, merge

如何将数组添加到另一个数组的对象中？

我有以下数组：

`projectSave = ({ id: 1, name: 'Foo', desc: 'Bar', boards: {}, hotspots {} });`

我想用来自单独数组的数据 填充**板**和**热点对象。**

`allBoards = {id: 'b1, name: 'Board 1'; id: 'b2, name: 'Board 2'}`
`allHotspots = {id: 'h1, type: 'link'; id: 'h2, type: 'link'}`

如何将数据填充到数组的对象中？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:16:31.767

首先， allBoards 应该是：

```
allBoards = [{id: 'b1, name: 'Board 1'}, {id: 'b2, name: 'Board 2'}]; 
```

之间的一切都`{}`被认为是对象。在里面`[]`是什么使它成为这些对象的数组。这使它成为对象 {} 的数组 []。`allHotSpots`应该以同样的方式完成。

您必须遍历数组并重新创建对象`projectSave`并将它们添加到`boards`and`hotspots`数组中。

```
for (var i = 0; i<allBoards.length; i++){
  projectSave.boards.push({id: allBoards[i].id,
                name: allBoards[i].name});

}
for (var i = 0; i<allHotspots .length; i++){
  projectSave.hotspots .push({id: allHotspots [i].id,
                type: allHotspots [i].type});
} 
```

如果您只是尝试设置`projectSave.boards = allBoards`，那么您只是在存储引用，而不是数组的副本。如果这是你经常做的事情，你可能会更好地创建一个克隆方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:18:45.613

我不禁注意到您在代码中存在语法错误，字符串未正确关闭，分号用作数组分隔符而不是逗号，并且某些属性应该是数组而不是对象（我假设这是您的意图)，所以我也更正了它们。

而且由于您也将其标记为 jQuery，并且如果您的对象逐渐变得更加复杂，这里有一个 jQuery 方法来做到这一点。

```
var projectSave = { id: 1, name: 'Foo', desc: 'Bar', boards: [], hotspots: [] };

var allBoards = [{id: 'b1', name: 'Board 1'}, {id: 'b2', name: 'Board 2'}];

var allHotspots = [{id: 'h1', type: 'link'}, {id: 'h2', type: 'link'}];

$.extend(true, projectSave, {
    boards: allBoards,
    hotspots: allHotspots
});

// Test
console.info(projectSave); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T16:07:59.200

你有没有尝试过

```
projectSave.boards= allBoards;
projectSave.hotspots=allHotspots; 
```

# row - 从 Vaadin 的树表中删除行

> ID：16151540
> 
> 赞同：0
> 
> 时间：2013-04-22T16:02:49.803
> 
> 标签：row, vaadin, treetable

我正在 Vaadin 7 中做一个项目。我需要从 Treetable 中删除一行。

我什至找不到任何方法从 Treetable 中删除任何行。我使用了 removeItem()，但是，无法完成。

谁能帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:13:00.223

下次，如果您向我们展示您的源代码会很好。然后我们可以告诉你错误是什么以及如何解决它。

如果您有 TreeTable，则可以使用*removeAllItems()删除所有项目或使用**removeItem(Object)*删除单个项目

 *现在，如果您在 TreeTable 上添加一个项目，则必须为该项目提供一个 itemID，以便以后再次找到它并删除该项目。

```
final TreeTable     treeTable   = new TreeTable();
//...
treeTable.addItem(new Object[]{"value", "value", "value"}, 0);
treeTable.addItem(new Object[]{"value", "value", "value"}, 1);
treeTable.addItem(new Object[]{"value", "value", "value"}, 2);
//...
treeTable.removeItem(1); 
```

这个非常小的示例将在您的 treeTable 中创建 ID 为*0*、*1*和*2*的 3 个项目。在此之后，它会删除 ID 为*1*的项目。

您可以在[此处](https://vaadin.com/api/com/vaadin/ui/Table.html#removeItem%28java.lang.Object%29)找到有关 TreeTable 和方法*removeItem()*的文档。*

# saml - SAML 服务提供商安全

> ID：16151544
> 
> 赞同：1
> 
> 时间：2013-04-22T16:02:58.173
> 
> 标签：saml, ws-security

我需要测试的系统中的识别提供者是专有软件，但服务提供者是内部软件。

我已经实现了一些基本攻击（删除签名元素，更改 XML 中的值），但我想在不实现所有攻击的情况下实现更高的攻击覆盖率（这肯定是一个常见问题？）。

是否有任何用于自动化 SAML 攻击的框架或软件？以下链接中提到了一个自动化框架，但我一直未能找到代码（不确定它是否已发布）： [https ://www.usenix.org/conference/usenixsecurity12/break-saml-be-whoever-你想成为](https://www.usenix.org/conference/usenixsecurity12/breaking-saml-be-whoever-you-want-be)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:55:39.630

文章中使用的工具的代码在[sourceforge上](http://sourceforge.net/projects/ws-attacker/)

# vba - 循环 VBA 可能吗？

> ID：16151547
> 
> 赞同：0
> 
> 时间：2013-04-22T16:03:02.517
> 
> 标签：vba, loops, excel, hyperlink, autofill

我最初试图运行这个公式，但发现我无法自动填充过滤的选择。继承人的代码：

```
Range("I1").Select    
ActiveCell.FormulaR1C1 = _
"=IF(RC[-2]=""dpd"",HYPERLINK(""http://www.dpd.co.uk/tracking/quicktrack.do?search.consignmentNumber=""&RC[-1]&""&search.searchType=16&search.javascriptValidated=0&appmode=guest""))"
Range("I1").Select
Selection.AutoFill Destination:=Range("i1:i" & Range("A" & Rows.Count).End(xlUp).Row), Type:=xlFillCopy
Range("I2").Select
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove

Range("A1:I1").Select
ActiveSheet.Range("A1:i1").AutoFilter Field:=9, Criteria1:="FALSE"
Range("I2").Select
ActiveCell.FormulaR1C1 = _
"=IF(R[-1]C[-2]=""City Link"",HYPERLINK(""http://www.packagetrackr.com/track/citylink/""&R[-1]C[-1]&""""))"
  Range("I2").Select
Selection.AutoFill Destination:=Range("i2:i" & Range("A" & Rows.Count).End(xlUp).Row), Type:=xlFillCopy

Range("A1:I1").Select
ActiveSheet.Range("A1:i1").AutoFilter Field:=9, Criteria1:="FALSE"
Range("i2").Select
ActiveCell.FormulaR1C1 = _
    "=IF(R[-1]C[-2]=""hermes"",HYPERLINK(""http://www.hermes-europe.co.uk/tracker.html?trackingNumber=""&R[-1]C[-1]&""&Postcode=""&R[-1]C[-4]&R[-1]C[-3]&""""))"
  Range("I2").Select
Selection.AutoFill Destination:=Range("i2:i" & Range("A" & Rows.Count).End(xlUp).Row), Type:=xlFillCopy 
```

也许循环会更好？

我似乎无法仅自动填充过滤后的选择。

我在 G 列中有大约 20 个值，在 H 列中有不同的数据。根据 G 列的不同，必须将不同的超链接 URL 应用于 I 列。

例如。

单元格 G2：城市链接

单元格 H2：12345

如果单元格 G2 = City Link，则列 I2 = HYPERLINK(" [http://www.packagetrackr.com/track/citylink/](http://www.packagetrackr.com/track/citylink/) "& **H2** &")

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:06:00.280

您可以使用 for 循环来完成此操作。

* * *

```
   选项显式

   将 oCell 调暗为范围

   对于范围内的每个 ocell(***)

    如果 ocell = "dpd" 那么 ocell.offset(0,1) = "hyperlink"
    如果 ocell = "城市链接" 然后 ocell.offset(0,1) = "超链接"
    如果 ocell = "hermes" 那么 ocell.offset(0,1) = "hyperlink"

   下一个

```

* * *

偏移量是远离 Ocell 原始位置的列数。

我希望这有帮助

# c++ - C++11 清除shared_ptr时，我应该使用reset还是设置为nullptr？

> ID：16151550
> 
> 赞同：79
> 
> 时间：2013-04-22T16:03:08.623
> 
> 标签：c++, c++11, shared-ptr, reset, nullptr

我有一个关于 C++11 最佳实践的问题。清除 shared_ptr 时，我应该使用`reset()`不带参数的函数，还是应该将其设置`shared_ptr`为`nullptr`？例如：

```
std::shared_ptr<std::string> foo(new std::string("foo"));
foo.reset();
foo = nullptr; 
```

**有什么真正的区别，或者这两种方法都有优点/缺点吗？**

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-22T16:13:42.083

> 有什么真正的区别，或者这两种方法都有优点/缺点吗？

这两种选择是绝对等价的，因为第二种形式 ( `foo = nullptr`) 是根据第一种形式定义的。根据 C++11 标准的第 20.7.1.2.3/8-10 段：

> ```
>  unique_ptr& operator=(nullptr_t) noexcept; 
> ```
> 
> 8***效果*：`reset()`**。
> 
> 9*后置条件*：`get() == nullptr`
> 
> 10*返回*：`*this`。

因此，**只需选择其意图对您来说最清晰的那个**。就个人而言，我更喜欢：

```
foo = nullptr; 
```

因为它使我们希望指针为空变得更加明显。但是，作为一般建议，请尽量减少需要*显式*重置智能指针的情况。

* * *

此外，而不是使用`new`：

```
std::shared_ptr<std::string> foo(new std::string("foo")); 
```

尽可能考虑使用`std::make_shared()`：

```
auto foo = std::make_shared<std::string>("foo"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-22T16:16:08.920

我更喜欢`reset()`它，因为它表明了意图。但是，尝试编写您的代码，以便您不需要*显式*清除 a `shared_ptr<>`，即确保 a`shared_ptr<>`超出范围，否则您将清除它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-05T03:29:24.213

[如果您使用https://godbolt.org/](https://godbolt.org/)进行检查，它们会有所不同
，使用 gcc(7.2)
`foo.reset();` 生成汇编代码

```
 lea rax, [rbp-32]
  mov rdi, rax
  call std::__shared_ptr<int, (__gnu_cxx::_Lock_policy)2>::reset() 
```

然而， `foo = nullptr;` 产生

```
 lea rax, [rbp-16]
  mov esi, 0
  mov rdi, rax
  call std::shared_ptr<int>::shared_ptr(decltype(nullptr))
  lea rdx, [rbp-16]
  lea rax, [rbp-32]
  mov rsi, rdx
  mov rdi, rax
  call std::shared_ptr<int>::operator=(std::shared_ptr<int>&&)
  lea rax, [rbp-16]
  mov rdi, rax
  call std::shared_ptr<int>::~shared_ptr() 
```

它使用 nullptr 创建一个共享指针，将新创建的对象分配给变量并调用析构函数来销毁字符串。

因为我不知道如何检查函数 reset() 中发生了什么。看不出哪个更快。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T16:07:06.200

通常，智能指针可以自行处理。但如果你需要一个解决方案，`reset()`在我看来，这是你最好的选择。

# c# - C# Webservice Client：如何避免导致服务抛出 SystemException（似乎是 xml 命名空间问题）

> ID：16151551
> 
> 赞同：0
> 
> 时间：2013-04-22T16:03:11.677
> 
> 标签：c#, web-services, soap-client

我试图从 C#（通过服务引用）的基于 JBoss 的专有应用程序中使用基于 SOAP 的 Web 服务，但服务器不断返回 SystemException。

我使用提琴手从供应商的闪存前端和 C# 捕获 Web 服务调用，并在soapUI 中比较/调整它们，直到我将差异追踪到名称间距问题。

基本上是为了接收一条无效的消息并使其工作，我修改`<addPackageItems xmlns="...">`为`<tns:addPackageItems xmlns:tns="...">``</addPackageItems>``</tns:addPackageItems>`

我的问题基本上是如何通过在客户端（我的 C# 代码）中进行修改来完成这项工作？我讨厌这么通用，但老实说，我不知道为什么需要命名空间来避免服务器上的错误，所以我不想问如何修改我的 C# 代码来为 xmlns 生成命名空间关于`addPackageItems`是否有其他更好的解决方案。

## 杂项。信息

C#代码是使用Visual Studio 2012下添加服务引用生成的代码。我可以提供调用代码；如果没有可用的 WSDL，我不相信它真的有用，而且我不确定我是否可以根据我们的协议提供它们（我从未见过）。

## 非工作 SOAP 消息

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<s:Body>
  <addPackageItems xmlns="http://www.docfinity.com/webservices/BpmClientWebServices/">
    <processInstanceId>87499</processInstanceId>
    <packageItemDto>
      <packageItemName>document</packageItemName>
        <properties>
         <name>documentId</name>
         <stringValue>0c7eb1cb3a94986f013ae5c4d8777fde</stringValue>
        </properties>
        <type>DocFinityDocument</type>
      </packageItemDto>
    </addPackageItems>
  </s:Body>
</s:Envelope> 
```

## 工作肥皂消息

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<s:Body>
  <tns:addPackageItems xmlns:tns="http://www.docfinity.com/webservices/BpmClientWebServices/">
    <processInstanceId>87499</processInstanceId>
    <packageItemDto>
      <packageItemName>document</packageItemName>
        <properties>
         <name>documentId</name>
         <stringValue>0c7eb1cb3a94986f013ae5c4d8777fde</stringValue>
        </properties>
        <type>DocFinityDocument</type>
      </packageItemDto>
    </tns:addPackageItems>
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:18:25.870

2 XML 文档几乎完全不同——因为另一个作品的结果没有。

*   `<addPackageItems xmlns="http://www...`意思是“这个和所有没有前缀的子节点都将有这个命名空间”
*   `<tns:addPackageItems xmlns:tns="http://www...`意思是“这个和节点所有带`tns`前缀的子节点都有这个命名空间，没有前缀的节点有以前的默认命名空间。

因此，在 2 个文档`<processInstanceId>`节点（和兄弟/子节点）中有不同的命名空间 - 第一个是“ [http://www.docfinity.com/webs](http://www.docfinity.com/webs) ...”，第二个是空的。

您需要小心在正确的命名空间中创建节点。指定名称空间的方式取决于您创建 XML 的方式。

# prototypal-inheritance - 这个 Animal = function Animal 有什么作用？

> ID：16151553
> 
> 赞同：0
> 
> 时间：2013-04-22T16:03:16.517
> 
> 标签：prototypal-inheritance, prototype-programming, javascript

我试图理解 CoffeeScript 生成的这段 JavaScript 代码。

我习惯于看到函数定义为：

*   `function Animal(name) {...}`
*   `var Animal = function(name){...};`

但是 CoffeeScript 会产生以下结果：

```
var Animal = (function() {
  function Animal(name) {
    this.name = name;
  }

  return Animal;

})(); 
```

**问题：**

*   在匿名函数中创建“命名”函数有什么作用？
*   像这样定义 Animal 函数与两种项目符号方式之一有什么优势？

**奖金问题** 这些是等价的吗？

```
//Methodology #1
function Animal(name) {...}
//Methodology #2
var Animal = function Animal(name) {...}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:19:24.560

1.  在匿名函数中创建“命名”函数有什么作用？

    **更新**

    由于 JScript 错误，这仅[适用于 IE8](http://kangax.github.io/nfe/)，在现代（和健全的）浏览器中，使用命名函数表达式时，Animal 未在上下文命名空间中注册。

    它防止函数声明在上下文（可能是全局命名空间）中注册函数名。这意味着如果你这样做：

    ```
    var Tiger = function Animal() {}; 
    ```

    两者都在全局命名空间`Tiger`中`Animal`注册，而这个：

    ```
    var Tiger = function() { function Animal() {}; return Animal; }; 
    ```

    仅`Animal`在全局命名空间中注册。

2.  像这样定义 Animal 函数与两种项目符号方式之一有什么优势？

    **更新**

    同样，如果适用于比 IE8 更现代的浏览器，这也是无效的。在这些情况下，您可以使用命名函数表达式而无需担心您的上下文。

    优点是在保持上下文（同样，可能是全局）命名空间干净的同时，您仍然可以为您的对象拥有一个命名构造函数。这意味着：

    ```
    var Tiger = function() {};
    var t = new Tiger();
    t.constructor // is an anonymous function() {} 
    ```

    声明性低于

    ```
    var Tiger = function() { function Animal() {}; return Animal };
    var t = new Tiger();
    t.constructor // is a function Animal()
    Animal //=> is not defined 
    ```

    这会污染全局名称空间或上下文名称空间，并可能不需要注册`Animal`

    ```
    var Tiger = function Animal() {};
    var t = new Tiger();
    t.constructor // is a function Animal()
    Animal //=> returns function Animal(); 
    ```

3.  这些是等价的吗？

    **更新**

    这适用于所有浏览器。

    不。在第一个中，您以 的名称声明一个函数`Animal`，而在第二个中，您将一个以 的名称声明的函数分配给一个名为 的`Animal`变量`Animal`，这称为*命名函数表达式*。首先，查找通过函数名进行，其次，查找通过变量名进行。这是因为[函数*声明*不能​​覆盖函数*表达式*](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)：函数声明在脚本加载的上下文中加载，而表达式赋值是在脚本执行时执行的：

    ```
    function a() { 
      var b = function() { return 3; }; 
      return b(); 
      function b() { return 9; } 
    }

    a() //=> returns 3; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:10:00.893

> 像这样定义 Animal 函数与两种项目符号方式之一有什么优势？

1.  该函数仍将有一个显示在调试控制台中的名称
2.  尽管有名称，但该函数不会污染全局命名空间，因为它的作用域对于匿名包含函数是本地的，并且它可以作为闭包使用。

关于你的奖金问题：

[http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:25:46.830

您熟悉[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)（面向对象编程）吗？

因为在这里您看到的是尝试在 JavaScript 中定义对象，即使 JavaScript 中没有`class`关键字。

如果您对 Java 有一点了解（它与 JavaScript 几乎没有任何关系），那么这应该看起来很熟悉：

```
public class Animal { // creating a class
    private String name; // declaring its attributes

    public Animal(String name) { // declaring constructor
        this.name = name; // assigning value to the attribute
    }
} 
```

您提供的 JavaScript 代码基本上做同样的事情，例如创建一个类（某种增强类型），它具有*属性*（分配给它的变量）和*方法*（分配给它的函数）。

所以这段代码

```
function Animal(name) {
    this.name = name;
} 
```

创建`Animal`类。

问题是在 JavaScript 中，实际上并没有任何*类*的概念，而只有**对象**的概念。因此，您在这里创建一个变量，然后分配以下函数的**结果：**

```
var Animal = (function() {
    // some code here
})
(); // note the parenthesis here that means the function is called 
```

然后，定义一个[构造](http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29)函数，并返回包含该函数的对象。

所以在执行结束时，`var Animal`包含一个构造函数，因此任何对象都可以像这样初始化：`̀var myAnimal = new Animal('Panther');`.

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:08:11.000

> *“在匿名函数中创建“命名”函数有什么作用？”*

它只是创建一个新函数，该函数在它所嵌套的函数内的变量范围内是本地的。

> *“像这样定义 Animal 函数与两种项目符号方式中的一种相比有什么优势？”*

鉴于显示的代码，没有特别的优势，但如果该外部函数内部还有其他变量，则该内部函数可以引用它们以提供对它们的受控访问*（因为这些变量将无法从该外部函数外部访问）*。

这是可能的，因为 JavaScript 函数形成了所谓的闭包，这意味着即使从该变量范围中删除，它们也会携带其原始变量范围。

> *“**奖金问题**这些是等价的吗？”*

到原始代码？是的，它们基本上是等价的。

主要是对彼此。主要区别在于函数声明*（方法 1）*是“提升的”，这意味着它们在其范围的顶部可用，因此您可以在定义它们之前实际使用它们。

函数表达式仅在对表达式求值后可用。

* * *

请注意，所有函数都有名称，因此它们都会显示在调试控制台中。此外，所有函数*最终都*在同一个变量范围内。

# android - 目录中的Android Spinner - 仅显示文件路径的一部分并且仅显示具有特定扩展名的文件？

> ID：16151557
> 
> 赞同：0
> 
> 时间：2013-04-22T16:03:20.783
> 
> 标签：android, spinner, filepath

我目前有一个使用以下内容填充的微调器；

```
 File sd = new File("sdcard/");
    File[] sdDirList = sd.listFiles();
    // String[] filenames = getApplicationContext().fileList();
    List<File> list = new ArrayList<File>();
    for (int i = 0; i < sdDirList.length; i++) {
        // Log.d("Filename", filenames[i]);
        list.add(sdDirList[i]);
    }
    ArrayAdapter<File> filenameAdapter = new ArrayAdapter<File>(this,
            android.R.layout.simple_dropdown_item_1line, list);
    spinSelected.setOnItemSelectedListener(this);
    spinSelected.setAdapter(filenameAdapter);
    // filename = spinSelected.toString();

}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    filename = spinSelected.getSelectedItem().toString();
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

但是我有两件事想用这个微调器做，但也做不出来。第一个是只显示扩展名为 .txt 的文件。因为它显示了 sdcard 上的所有内容，但我只对 .txt 感兴趣。

此外，微调器当前显示 sdcard/filename.extension 的完整路径，而理想情况下我希望它只显示文件名 - 这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:11:24.413

您将不得不通过添加以下内容来进一步处理您的 sdDirList 数组：

```
for(int x = 0; x < sdDirList.length; x++)
{
    if(sdDirList[n].getName().endsWith(".txt"))
    {
        // add it to your array adapter
    }
} 
```

您可能希望在此处查看 Java 文件对象文档：http: [//docs.oracle.com/javase/6/docs/api/java/io/File.html](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)

# php - Ajax删除功能不起作用

> ID：16151558
> 
> 赞同：0
> 
> 时间：2013-04-22T16:03:21.627
> 
> 标签：php, jquery, mysql, ajax

我正在尝试使用 jQuery Ajax 函数删除 MySQL 数据库中的一行。当我单击帖子“删除帖子”链接时，我希望它触发一个`onClick`事件，该事件将运行删除行功能。

到目前为止，这是我的代码：

首先显示带有链接的帖子以删除每个帖子。

```
foreach($postarray AS $value){
echo '<div class="item">'.$value['post_title'].'  , <a href="#" class="delete_link" value="'. $value['post_id'] .'">Delete Post</a></div>';

} 
```

然后是Jquery：

```
$(document).ready(function(){
$(".delete_post").click(function(){
        var id = $(this).attr("value");

        function deletePost(id){
            $.ajax({
                type: "POST",
                url: "delete_post.php",
                data: {id: id},
                success: function(data){
                    alert("Post deleted");
                }
            })
        }
    });

}); 
```

和`delete.php`代码：

```
//Start the session
session_start();
require_once('func/auth.class.php');
require_once('func/functions.php');
require_once('func/db.class.php');

// Check if user is logged in
if(!$_SESSION['is_admin'] || empty($_POST['id'])){
    header("Location: index.php");
}

$post_id = $_POST['id'];
delete_post($post_id); 
```

和`delete_post()`功能：

```
function delete_post($post_id){
        global $dbh;

        $stmt = $dbh->prepare("DELETE FROM mjbox_posts WHERE post_id = ?");
        $stmt->bindValue(1, $post_id, PDO::PARAM_INT);
        $stmt->execute();

        if($stmt->rowCount() != 0){
            return TRUE;
        }else{
            return FALSE;
        }
    } 
```

目前这种方法没有从数据库中删除帖子，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:10:21.260

正如 jcho360 在评论中提到的那样，当绑定到 click 事件时，css 类中存在错误。

一旦你修复它仍然无法工作。当点击事件被触发时，你声明了一个删除帖子的函数，但你没有调用它。一种解决方法可能是将其更改为以下内容：

```
$(document).ready(function(){
    $(".delete_link").click(function(){
        var id = $(this).attr("value");

        $.ajax({
            type: "POST",
            url: "delete_post.php",
            data: {id: id},
            success: function(data){
                alert("Post deleted");
            }
        });
    });
}); 
```

这样，您实际上是在触发 click 事件时发出请求。

此外，我刚刚注意到在 ajax 调用中您正在请求“delete_post.php”，但您提到您的 php 文件称为 delete.php。这也需要修复。

您可以使用浏览器中的检查器查看单击链接时会发生什么。它是否提出请求？id 参数设置是否正确？等等。

# excel - Excel 2007 - 1004 运行时错误刷新查询表

> ID：16151560
> 
> 赞同：2
> 
> 时间：2013-04-22T16:03:23.733
> 
> 标签：excel, vba, odbc, runtime

看起来这个错误是如此普遍，以至于许多现有的解决方案都解决了不同的问题。

在我的例子中，我创建了一个在 Excel 2010 中有效但在 Excel 2007 中无效的宏。

以下是代码摘要：

```
cn = "ODBC;Driver={SQL Server Native Client 10.0};Server=serverName;Database=dbName;Trusted_Connection=yes;"
sql = "select top 10 * from tableName"

Dim S As Worksheet
Set S = ActiveWorkbook.Sheets("Medical")

With S.QueryTables.Add(Connection:=cn, Destination:=S.Range("B1"))

        .CommandText = sql
        .Refresh BackgroundQuery:=False

     End With 
```

此代码在 Excel 2010 中完美执行，但在 Excel 2007 中出错。

我需要更改 2007 年的连接字符串结构，还是有其他问题在起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:44:38.897

解决方案：

我在 Excel 2010 中使用的所有机器都有“SQL Server Native Client 10.0”作为 ODBC 数据源的可能驱动程序。装有 Excel 2007 的机器只有“SQL Server”。

我将连接字符串更改为：

```
cn = "ODBC;Driver=SQL Server;Server=serverName;Database=dbName;Trusted_Connection=yes;" 
```

它就像一个魅力。

感谢那些做出回应的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:17:30.160

将您的属性更改`.Refresh BackgroundQuery:=False`为`.Refresh`. 在这方面，从 2007 年到 2010 年没有任何变化，因此如果更改属性不能解决问题，则会发生其他事情，例如工作簿的一部分已损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T13:09:07.897

从宏调用存储过程时我遇到了同样的问题。在互联网上浪费了一整天的时间寻找解决方案后，我终于找到了解决方案。

我使用了 SET NOCOUNT ON;

有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-26T14:24:45.547

无法添加评论，因此这是为了解决上面提出的问题。

这个答案为我节省了很多时间。

有关此的 MSFT 文档： [https ://docs.microsoft.com/en-us/sql/t-sql/statements/set-nocount-transact-sql](https://docs.microsoft.com/en-us/sql/t-sql/statements/set-nocount-transact-sql)

下面是一个实现。

```
create proc yourSproc

as

set nocount on;

begin

    --Contents of sproc

end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-17T19:03:44.210

我有这个确切的错误。调试也会带我到 .refresh 行。我用我能想到的所有方法来修复那条线。没有任何效果。

“常规 ODBC 错误”措辞让我想到...我去运行 >> Microsoft ODBC 管理员 >> 选择我的数据源 >> 单击配置按钮 >> 单击测试连接

这返回了一个错误，即我的密码已过期并且数据库设置为只读。我的 Windows 用户密码尚未过期，但它在我“应该”更改密码的时间范围内......我使用的是工作机器，并且每隔 60-90 天左右强制用户帐户密码更改一次，大约 30 岁左右天宽限期。甚至不知道。

并不是说这是对你的修复，但我遇到了完全相同的错误，并且尝试了每一个小技巧并编辑了这个网站，互联网，不得不提供没有运气。我注销了，重置了我的 Windows 用户帐户密码，重新登录，打开了 excel 文件，点击了 Refresh Button 宏……它工作了。

无论如何，也许这会对某人有所帮助......

# scheme - 输入特定字符时如何停止读取输入？

> ID：16151562
> 
> 赞同：1
> 
> 时间：2013-04-22T16:03:31.057
> 
> 标签：scheme

我正在尝试在 Scheme 中实现我自己的减法函数。我必须使用 apply 方法将减法应用于用户的输入。问题是，用户输入必须介于 ()、[] 或 {} 之间（我正在为一种小语言编写一个小型解释器）。我的代码已经很好地管理了左括号，但我的问题是其余部分使用 apply 方法。我只需要读取右括号之前输入的数据。有没有办法读取输入并在分隔符“)”、“]”或“{}”处停止。即使您可以仅用一个分隔符引导我朝着正确的方向前进，我也可以让其余的工作正常进行。

这是我正在尝试做的事情：

```
(define subt (lambda (x)
             (apply - (read-line)))) 
```

但我希望它在右括号处停止阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:56:00.030

The `read` procedure reads Scheme forms between `#\(` and `#\)`. Assuming parens are a suitable delimiter the following works:

```
(define subt
  (lambda (x)
    (apply - (read)))) 
```

Of course, `-` expects numbers and `read` will return any Scheme form.

```
> (subt 'ignore)
(10 5 3 1)
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:18:26.703

每当您找到一个左括号时，将其添加到堆栈并开始将您在此过程中读取的字符添加到数据结构中，例如新列表或语法树（注意：您必须逐个字符读取，而不是逐行读取正如您的代码中所暗示的那样！）。每当你找到栈顶元素对应的右括号时，从栈顶弹出栈顶括号，停止向字符列表添加元素——此时你知道在使用的数据结构中已经读取了一个完整的表达式并可以继续进行评估。

此外，您应该将用于解析输入的代码与用于评估它的代码分开，以便评估器接收列表、语法树或解析器返回的任何中间表示，而不必担心读取字符，查找匹配的括号等。

**编辑**

如果您不需要从头开始实现解析器，则可以使用包含内置过程的简单解决方案，正如@GoZoner 所建议的那样：使用`read`过程确保在输入之间输入数字`()`并以返回结束输入，例如这个：

```
(define (subt)
  (apply - (read)))

(subt)
 input: (10 2 1)
output: 7 
```

# tfs - 如何将 TRX 文件添加到 TFS 构建报告

> ID：16151563
> 
> 赞同：2
> 
> 时间：2013-04-22T16:03:32.727
> 
> 标签：tfs, msbuild, trx

在 msbuild 过程中，我得到了 TRX 文件，我想将此文件添加到 TFS 单元测试报告中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T20:44:19.627

# [MSDN][将命令行测试结果发布到团队项目集合的数据库](http://msdn.microsoft.com/en-us/library/ms182488.aspx)

例如：

```
MSTest /publishresultsfile:testResult.trx /publish:http://ourtfsmachine:8080 /teamproject:ProjectName /publishbuild:BuildNumber01 /platform:AnyCpu /flavor:Release 
```

# ajax - Angular Xhr 向 Asp.Net Web API 发布请求导致参数为空

> ID：16151566
> 
> 赞同：4
> 
> 时间：2013-04-22T16:03:34.710
> 
> 标签：ajax, angularjs, asp.net-web-api, http-post

我创建了一个 ASP.Net API 控制器，我正在尝试使用 Angular 向其发出 POST 请求。请求到达我的控制器方法，但参数值为空。

我的角度代码：

```
$http({ method: 'POST', url: '/api/Contents', data: "value=foobar", headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }).
    success(function(data) {
                }).
    error(function(data, status, headers, config) {

    }); 
```

我也尝试过使用 json （Json 是我最终想要的）：

```
$http({ method: 'POST', url: '/api/Contents', data: { "foo": "bar", "foo2": "bar2" }, headers: { 'Content-Type': 'application/json'} }).
    success(function(data) {
                }).
    error(function(data, status, headers, config) {

    }); 
```

我的（非常简单的）控制器方法如下所示：

```
public void Post([FromBody]string value)
{
    //But Value is NULL!!!!!!
} 
```

以下是我从 Chrome 中截取的请求标头中的一些值（我认为可能很有趣的值：

*   请求方法：POST
*   状态码：204 无内容
*   接受：应用程序/json，文本/纯文本，*/*
*   内容类型：application/x-www-form-urlencoded
*   X-Requested-With: XMLHttpRequest
*   表单 Dataview sourceview URL 编码
*   值：foobar
*   服务器：Microsoft-IIS/8.0
*   X-AspNet-版本：4.0.30319

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:08:39.220

像这样：

```
$http({ 
    method: 'POST', 
    url: '/api/Contents', 
    data: "=foobar", 
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
}).success(function(data) {

}).error(function(data, status, headers, config) {

}); 
```

注意`=foobar`数据参数。在这种情况下，您不应指定参数名称。是的，我知道，不要问。

您可以阅读更多关于[`how model binding in the Web API works`](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx). 如果你像我一样发现这绝对是疯了，你可以考虑[`ServiceStack`](http://www.servicestack.net/)改用。

或者，您可以使用视图模型：

```
public class ContentsModel
{
    public string Value { get; set; }
} 
```

然后让您的控制器操作将视图模型作为参数：

```
public void Post(ContentsModel model)
{
} 
```

现在你可以发送一个普通的 JSON 请求了：

```
$http({ 
    method: 'POST', 
    url: '/api/Contents', 
    data: JSON.stringify({ "value": "the value" }), 
    headers: { 'Content-Type': 'application/json' } 
}).success(function(data) {

}).error(function(data, status, headers, config) {

}); 
```

另请注意，如果要发送 JSON，则需要使用该`JSON.stringify`方法将 javascript 对象转换为 JSON 字符串。

# iphone - 删除 armv7s xCode 4.6 有效架构项目属性如何影响我的 iOS 应用程序的 App Store 分发？

> ID：16151578
> 
> 赞同：4
> 
> 时间：2013-04-22T16:04:34.037
> 
> 标签：iphone, ipad, ios6, xcode4.6, armv7

我有一个在 iPhone 5 发布之前创建的项目，我正在 xCode 4.6 中开发这个项目。默认情况下，xCode 会更改新项目的构建架构以包含最新的 iPhone 5 指令集。

我面临的一个问题是**我用于该项目的静态库不是为 armv7s**（新 iPhone 5 和可能的新 iPad）编译的。解决方法是在我调试项目期间更改有效架构属性以排除 armv7s：

![在此处输入图像描述](https://i.stack.imgur.com/VX2eE.png)

**我对从 xCode 项目>构建设置中排除 armv7s 作为有效架构的影响感兴趣。**我的应用程序会在新的 armv7s 设备上崩溃吗？不会从应用商店卖到armv7s设备吗？

感谢您的澄清！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:45:16.763

我最近在使用静态库时遇到了同样的问题。我们只为 armv7 构建，直到发布了为 armv7s 构建的库更新。

唯一没有 armv7s 会影响的是应用程序不会针对 armv7s 为 armv7 带来的任何新逻辑进行优化。新的 arm 处理器应该向后兼容 armv7，因此未来的设备应该可以在 armv7 的构建中正常工作。

# javascript - 如何使用 jQuery Mobile 正确地预先增强 Mustache 模板？

> ID：16151579
> 
> 赞同：2
> 
> 时间：2013-04-22T16:04:34.537
> 
> 标签：javascript, html, jquery-mobile, backbone.js, mustache

我正在尝试加快基于 jQuery Mobile 和backbone.js 的应用程序的速度，尤其是在增强表单元素（其中有很多）时。我在想我可以让 jQM “预增强”表单模板，然后用增强的标记编译模板函数，而不必在每个页面渲染上增强所有表单元素。在我实现选中/未选中复选框之前，这一直很好。该模板基本上看起来像：

```
<form>
    <fieldset data-role="controlgroup">
        <legend>{{legend}}</legend>
        {{#items}}
        <label for="{{id}}">{{#name}}{{name}}{{/name}}{{^name}}No name given{{/name}}</label>
        <input type="checkbox" id="{{id}}" {{#checked}}checked{{/checked}}>
        {{/items}}
    </fieldset>
</form> 
```

当我在 Backbone-View 中定义我的模板函数时，我正在尝试执行以下操作：

```
var preEnhance = $('<div>').hide().html($('#tmpl').html()).appendTo($('body')).trigger('create');
return Mustache.compile(preEnhance.html()); 
```

我想用它来对付这样的数据：

```
{legend: 'Pre Enhanced Forms, How?', items:[{id:'a',name:'A', checked: true},{id:'b',name:'B'},{id:'c'}]} 
```

然而，jQuery Mobile对这`{{#checked}}checked{{/checked}}`部分做了一些奇怪的事情：它变成了`{{#checked}}checked{{="" checked}}=""`我猜是因为`/`jQM 将解释为结束标记的开头（如果我错了，请纠正我）。像这样，我不能再渲染模板了。

我可以对此做些什么吗？难道我做错了什么？有没有更好的方法来使用预先增强的模板？我不想在我的模板中使用增强的硬编码标记。

对于那些感兴趣的人，还有一个（失败的）[演示小提琴。](http://jsfiddle.net/PxfGt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:19:32.827

尝试这个。只需添加选中的属性并传递选中的值。

```
<input type="checkbox" id="{{id}}" checked="{{#checked}}{{checked}}{{/checked}}" > 
```

我更新了 jsFiddle [http://jsfiddle.net/PxfGt/4/](http://jsfiddle.net/PxfGt/4/)

# msmq - MSMQ：有没有办法知道当其他进程更新消息时队列被删除并再次创建？

> ID：16151586
> 
> 赞同：0
> 
> 时间：2013-04-22T16:04:58.483
> 
> 标签：msmq

我有一个将消息写入队列的过程，而另一个程序读取消息并处理它们。当用户手动删除队列，然后在写入过程运行时再次重新创建它。在流程结束时，我们没有收到任何新消息，在写入结束时，我们也没有看到任何错误。问题是是否有办法处理这种情况？

# asp.net-mvc - 使用 ViewModel 值初始化模型

> ID：16151589
> 
> 赞同：2
> 
> 时间：2013-04-22T16:05:10.600
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想用 ViewModel 中的示例模型的值初始化一个新的示例模型。

```
var example = new Example { ExampleViewModel.Example}; 
```

以上返回错误：

> 无法使用集合初始化程序初始化类型“ManagementOfChange.Models.ChangeRequest”，因为它没有实现“System.Collections.IEnumerable”

这是否意味着我必须单独初始化每个值？例如：

```
var example = new Example 
    { 
        value1 = ExampleViewModel.value1, 
        value2 = ExampleViewModel.value2 
    }; 
```

或者这只是我的语法问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:13:08.543

我认为在你的情况下这样做是一样的：

```
var example = ExampleViewModel.Example; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:26:16.430

不需要创建对象来再次初始化属性。使用自动映射器。例子

创建地址类

```
 public class Address
    {
        public string Address1 { get; set; }

        public string Address2 { get; set; }

        public string City { get; set; }

        public string PostalCode { get; set; }

        public string Country { get; set; }
    } 
```

创建客户类

```
 public class Customer
    {
        public string FirstName { get; set; }

        public string LastName { get; set; }

        public string Email { get; set; }

        public Address HomeAddress { get; set; }

        public string GetFullName()
        {
            return string.Format("{0} {1}", FirstName, LastName);
        }
    } 
```

在Controller中，创建一个动作方法

## **方法 - 1（未创建映射时）**

```
 public class AutoMapperController : Controller
    {
        public ActionResult Index()
        {
            List<Customer> customers = new List<Customer>();
            customers.Add(
                    new Customer 
                    { 
                        Email = "a@s.com", 
                        FirstName = "F1", 
                        LastName = "L1", 
                        HomeAddress = new Address 
                                            { 
                                                Address1 = "A1", 
                                                Address2 = "A2", 
                                                City = "C1", 
                                                Country = "Co1", 
                                                PostalCode = "P1" 
                                            } 
                    });

            AutoMapper.Mapper.CreateMap<Customer, CustomerListViewModel>();

            IList<CustomerListViewModel> viewModelList =
               AutoMapper.Mapper.Map<IList<Customer>, 
               IList<CustomerListViewModel>>(customers);
            return View(viewModelList);
        }
    } 
```

现在，如果您看到下面的结果......我们在 Customer 类中有数据，并且在完成 AutoMapping CustomerListViewModel 类之后填充......

![在此处输入图像描述](https://i.stack.imgur.com/q5rO8.png)

## **方法 - 2 创建映射时**

创建一个名为 MyMappings 的类并使用以下代码定义映射。

```
public class MyMappings : Profile
{
    public const string NameOfProfile = "ContactDataProfile";

    public override string ProfileName
    {
        get
        {
            return NameOfProfile;
        }
    }

    protected override void Configure()
    {
        CreateMaps();
    }

    private static void CreateMaps()
    {
        Mapper.CreateMap<Customer, CustomerListViewModel>()
              .ForMember(dest => dest.Email, opt => opt.MapFrom(src => src.Email))
              .ForMember(dest => dest.FullName, opt => opt.MapFrom(src => src.FirstName + "." + src.LastName))
              .ForMember(dest => dest.HomeAddressCountry, opt => opt.MapFrom(src => src.HomeAddress))
              .IgnoreAllNonExisting();

        Mapper.AssertConfigurationIsValid();
    }
} 
```

以下是您想要在某些类属性之间发送映射时所需的类

```
public static class AutoMapperExtensions
    {
        public static IMappingExpression<TSource, TDestination>
        IgnoreAllNonExisting<TSource, TDestination>(this IMappingExpression<TSource, TDestination> expression)
        {
            var sourceType = typeof(TSource);
            var destinationType = typeof(TDestination);
            var existingMaps = Mapper.GetAllTypeMaps().First(x => x.SourceType == sourceType && x.DestinationType == destinationType);
            foreach (var property in existingMaps.GetUnmappedPropertyNames())
            {
                expression.ForMember(property, opt => opt.Ignore());
            }
            return expression;
        }
    } 
```

最后在 Application Start Handler 下的 Global.asax 类中

```
AutoMapperConfigurator.Configure(); 
```

**[参考](http://bengtbe.com/blog/2009/04/14/using-automapper-to-map-view-models-in-asp-net-mvc/)**

您可以从包管理器控制台下载它

![在此处输入图像描述](https://i.stack.imgur.com/0s9GM.png)

# scala - 创建类型参数取决于组合对象类型的 Scala 类的好方法

> ID：16151591
> 
> 赞同：3
> 
> 时间：2013-04-22T16:05:13.080
> 
> 标签：scala

我正在磨练我的 scala 技能，并且正在编写一些图形算法。我有一个类似这样的图形 API 表示

```
trait GraphLike[T]
{
  val vertices: Map[ T, VertexLike[T] ] 
  def addVertex( t: T ): GraphLike[T]
  def addEdge( a:T, b:T ): GraphLike[T]
  def getAdjacencyList( a: T ): List[T]
  def getVertex( a: T ): VertexLike[T]
  ...
} 
```

然后我有另一堂课：

```
class DepthFirstSearch[ T ]( val graph: GraphLike[T], val sourceVertex: T )
{
  ...
} 
```

目前我发现我必须这样做才能创建 DepthFirstSearch 类的实例

```
val dfs = new DepthFirstSearch[Integer]( new UnDirGraph[Integer](/*some params*/), 1 ) 
```

`UnDirGraph`子`GraphLike`类在哪里

我必须在`new DepthFirstSearch[Integer]`. 有没有一种方法可以让类型检查器从提供的图形参数中推断出来。我发现我不能做这样的事情

```
val dfs = new DepthFirstSearch( new UnDirGraph[Integer](/*some params*/), 1 ) 
```

目前上述失败......有没有办法像上面那样做？

编辑：所以我得到的错误信息是类型不匹配；found : com.KGraph.GraphLike[Integer]
required: com.KGraph.GraphLike[Any] 注意：Integer <: Any，但 GraphLike trait 在类型 T 中是不变的。您可能希望将 T 定义为 +T。(SLS 4.5)

这就是我尝试创建的方式

```
val graph = Graphing.createUndiGraphFromFile( 
            new File("/Volumes/Data/Users/kartik/ScalaSpace/Graph/tinyG.txt" ) )
val dfs = new DepthFirstSearch( graph, 0 ) 
```

其中`crateUndiGraphFromFile`返回 GraphLike[Integer]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:57:51.853

Credits to @Régis Jean-Gilles and @Mark Peters

Common super-type of `Integer` and `1` (of type `Int`) is `Any`. So when writing this:

```
val dfs = new DepthFirstSearch( new UnDirGraph[Integer](/*some params*/), 1 ) 
```

The type inference gives you

```
val dfs = new DepthFirstSearch[Any]( new UnDirGraph[Integer](/*some params*/), 1 ) 
```

But now, we need

```
new UnDirGraph[Integer](/*some params*/) <: UniDirGraph[Any] 
```

which is not the case as `UnDirGraph` is invariant.

If you write:

```
val dfs = new DepthFirstSearch[Integer]( new UnDirGraph[Integer](/*some params*/), 1 ) 
```

Scala will implicitly convert the `1` to an `Integer` and then everything is fine.

As @Régis Jean-Gilles points out, the following will work:

```
val dfs = new DepthFirstSearch( new UnDirGraph[Int](/*some params*/), 1 ) 
```

# events - 从 angularjs 指令触发点击事件

> ID：16151595
> 
> 赞同：26
> 
> 时间：2013-04-22T16:05:28.617
> 
> 标签：events, angularjs, click, angularjs-directive

我如何触发从 angularjs 指令指定索引的 li 元素的点击事件？我尝试使用 $first 触发第一个元素的点击，但它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-22T19:14:20.483

这可能是您实现这一目标的另一种方式。将索引和项目都传递给指令，并让指令在模板中设置 html：

演示： [http ://plnkr.co/edit/ybcNosdPA76J1IqXjcGG?p=preview](http://plnkr.co/edit/ybcNosdPA76J1IqXjcGG?p=preview)

html:

```
<ul id="thumbnails">
    <li class="thumbnail" ng-repeat="item in items" options='#my-container' itemdata='item' index="$index">

    </li>
  </ul> 
```

js指令：

```
app.directive('thumbnail', [function() {
  return {
    restrict: 'CA',
    replace: false,
    transclude: false,
    scope: {
        index: '=index',
        item: '=itemdata'
    },
    template: '<a href="#"><img src="{{item.src}}" alt="{{item.alt}}" /></a>',
    link: function(scope, elem, attrs) {
        if (parseInt(scope.index) == 0) {
            angular.element(attrs.options).css({'background-image':'url('+ scope.item.src +')'});
        }

        elem.bind('click', function() {
            var src = elem.find('img').attr('src');

            // call your SmoothZoom here
            angular.element(attrs.options).css({'background-image':'url('+ scope.item.src +')'});
        });
    }
}
}]); 
```

正如另一个答案中指出的那样，您可能会更好地向图像添加 ng-click。

**更新**

演示链接不正确。它已更新为：[http ://plnkr.co/edit/ybcNosdPA76J1IqXjcGG?p=preview](http://plnkr.co/edit/ybcNosdPA76J1IqXjcGG?p=preview)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T19:13:14.377

这更像是 Angular 的做法：[http ://plnkr.co/edit/xYNX47EsYvl4aRuGZmvo?p=preview](http://plnkr.co/edit/xYNX47EsYvl4aRuGZmvo?p=preview)

1.  我添加了 $scope.selectedItem 可以让您解决第一个问题（默认图像）
2.  我添加了 $scope.setSelectedItem 并在`ng-click`. 您的最终要求可能不同，但使用指令绑定`click`和更改`src`是多余的，因为大部分都可以使用模板处理
3.  注意使用[ngSrc](http://docs.angularjs.org/api/ng.directive%3angSrc)来避免初始加载时错误的服务器调用
4.  您需要调整一些样式以使图像在 div 中正确定位。如果你真的需要使用`background-image`，那么你需要一个像 ngSrc 这样的指令来推迟设置`background-image`样式，直到实际数据加载之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:50:35.403

这是对兰登的回答的扩展，对问题采取了直接的方法。如果您要在页面上拥有多个画廊，这可能是一种无需大惊小怪的方式。

用法：

```
<gallery images="items"></gallery>
<gallery images="cats"></gallery> 
```

[看到它在这里工作](http://plnkr.co/edit/0Te0EmRxxAXUpIv4197r?p=preview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T15:59:52.147

这就是我能够在页面加载时触发按钮单击的方式。

```
<li ng-repeat="a in array">
  <a class="button" id="btn" ng-click="function(a)" index="$index" on-load-clicker>
    {{a.name}}
  </a>
</li> 
```

一个简单的指令，它从 ng-repeat 获取索引并使用条件调用索引中的第一个按钮并在页面加载时单击它。

```
angular
    .module("myApp")
        .directive('onLoadClicker', function ($timeout) {
            return {
                restrict: 'A',
                scope: {
                    index: '=index'
                },
                link: function($scope, iElm) {
                    if ($scope.index == 0) {
                        $timeout(function() {

                            iElm.triggerHandler('click');

                        }, 0);
                    }
                }
            };
        }); 
```

这是我首先能够以编程方式触发自动点击的唯一方法。 `angular.element(document.querySelector('#btn')).click();` 无法从控制器工作，因此如果您尝试在页面加载时运行单击，则使这个简单的指令看起来最有效，并且您可以通过传入索引来指定要单击的按钮。我从另一个帖子参考中通过这个堆栈溢出答案获得了帮助：[https:](https://stackoverflow.com/a/26495541/4684183) //stackoverflow.com/a/26495541/4684183 onLoadClicker Directive。

# javascript - JQuery - 单击并悬停在相同的功能上

> ID：16151598
> 
> 赞同：0
> 
> 时间：2013-04-22T16:05:42.037
> 
> 标签：javascript, jquery, function, jquery-hover

我有这个 jQuery 脚本：

```
$('img[data-hover]').hover(function() {
    $(this)
        .attr('tmp', $(this).attr('src'))
        .attr('src', $(this).attr('data-hover'))
        .attr('data-hover', $(this).attr('tmp'))
        .removeAttr('tmp');
}).each(function() {
    $('<img />').attr('src', $(this).attr('data-hover'));

}); 
```

它工作正常，当我将图像悬停时，悬停工作正常。

但是现在我需要再次开始悬停，当我点击某些框时，在那些：

```
$('#first, #second, #third').click(function(){  ..... 
```

是否有可能在“点击”时启动悬停并保持实际的悬停功能？甚至将其修改为“功能”？

我已经尝试过了，但我失败了。
谢谢。

编辑：
这是带有图像的 HTML 代码：

```
<div class="auswahlbox">
        <div class="auswahl" id="first" data-id="1">
            <div class="bild">
                <img src="https://image.jpg" data-hover="https://images_hover.jpg" />
            </div>
            <div class="box">
                <p>Text</p>
            </div>
        </div>
        <div class="auswahl" id="second" data-id="2">
            <div class="bild">
                <img src="https://image.jpg" data-hover="https://images_hover.jpg" />
            </div>
            <div class="box">
                <p>Text</p>
            </div>
        </div>
        <div class="auswahl" id="third" data-id="3">
            <div class="bild">
                <img src="https://image.jpg" data-hover="https://images_hover.jpg" />
            </div>
            <div class="box">
                <p>Text</p>
            </div>
        </div>
    </div> 
```

**现在的情况：**
当我将图像放入 .bild 时，它工作正常。

**我需要什么：**
当我单击`"<div class="auswahl" id="first" data-id="1">"`（第二个，第三个）div 时，图像的悬停应该“开始”一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:09:50.037

你的意思是这样的：

```
$('#first, #second, #third').click(function(){
    $('img[data-hover]').trigger('mouseover');
}); 
```

当`#first, #second #third`被点击它触发悬停事件`img[data-hover]`。

要在同`div`一次尝试中触发图像：

```
$('#first, #second, #third').click(function(){
    $(this).find('img[data-hover]').trigger('mouseover');
}); 
```

# c# - 如何在 c# 代码中导出 xmla 中的 SSAS 数据库结构？

> ID：16151599
> 
> 赞同：1
> 
> 时间：2013-04-22T16:05:42.163
> 
> 标签：c#, ssas

SSAS：我需要用 c# 编写一个工具来在 xmla 文件中导出/导入数据库结构。用户指定用于导出的现有数据库和用于导入的新数据库的名称。我考虑使用分析管理对象（AMO），我找到了一种创建数据库的方法，但发现无法在 AMO 对象模型中导出其结构，对`Database`对象没有任何帮助。在 MsSQL Management Studio 中，我可以单击数据库并在弹出菜单中选择“*脚本数据库为 -> 创建到”。*如何在 C# 代码中做同样的事情，然后如何运行 xmla 来创建新的 Db 结构？如果 AMO 没有简单的方法来做到这一点，那么非常欢迎替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:45:35.280

最后我在这里找到了答案：http: [//social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/d11d614f-2b49-4cca-a842-c6eed16a7cec/](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/d11d614f-2b49-4cca-a842-c6eed16a7cec/)

我必须为此使用`Scripter`对象。

# spring - Spring Hibernate 将父级和子级一起插入

> ID：16151602
> 
> 赞同：0
> 
> 时间：2013-04-22T16:05:58.823
> 
> 标签：spring, hibernate

我的程序要求是在数据库中添加一个新的父级和子级。到目前为止，我在父类中有这个方法：

```
 @Transient
public void addLecturer(Lecturer lecturer) {
    if(lecturers == null) {
        lecturers = new ArrayList<Lecturer>();
        }
    lecturer.setChecker(this);

    this.lecturers.add(lecturer);
 } 
```

然后在我的父级中保存父级：

```
 @Override
public void addChecker(Lecturer checker) {
      Session session = sessionFactory.getCurrentSession();

      session.save(checker);

     } 
```

我的控制器：

```
 @RequestMapping(value="/matching_page", method = RequestMethod.GET)
public ModelAndView get(@ModelAttribute("checker") Lecturer checker, BindingResult 

  result) { 
ArrayList<String> lecturers = new ArrayList<String>();   
    lecturers.add("Somma");
    lecturers.add("Trina");
    lecturers.add("Adam");
    lecturers.add("Eve");

    HashMap<String, ArrayList<String>> model = new HashMap<String 

  ArrayList<String>>(); 
     model.put("lecturerList", lecturers); 
   return new ModelAndView("matching_page", "model", model);

}

  @RequestMapping(value="/matching_page", method = RequestMethod.POST)
public ModelAndView hello(@ModelAttribute("checker") Lecturer checker, 

   BindingResult result) { 
    lecturerService.addChecker(checker);

    return new ModelAndView ("redirect:/admin");
} 
```

jsp形式：

```
 <c:url var="saveUrl" value="/matching_page" />
<form:form modelAttribute="checker" method="POST" action="${saveUrl}">

<td>Checker </td>
<tr>
<td><form:hidden path="lecturerId" value="" /></td>
</tr>

  <tr>
   <td><form:label path="name">Checker Name:</form:label></td>
   <td><form:input path="name"/></td>

  </tr>

  <tr>
   <td><form:label path="email">Email</form:label></td>
   <td><form:input path="email"/></td>

  </tr>
   <td>Lecturers</td>
   <td>
      <form:select path="name" multiple="true">
        <form:option value="0" >Select </form:option>
            <form:options items="${model.lecturerList}" />

      </form:select>
  </td>

  <div id="lower">
<input  type="submit" value="Save Selection" class="button"/>
</div>
   </form:form> 
```

我的数据库：

```
 CREATE TABLE `lecturers` (
 `lecturer_id` BIGINT(10) NOT NULL AUTO_INCREMENT,
 `name` VARCHAR(255) NULL DEFAULT NULL,
 `email` VARCHAR(255) NULL DEFAULT NULL,
 `checker_id` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`lecturer_id`),
  FOREIGN KEY (`checker_id`) REFERENCES `lecturers` (`lecturer_id`)
 ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
```

我的模型

```
 @Entity
   @Table(name = "lecturers")
   @Component
   public class Lecturer implements Serializable{

   @ManyToOne(cascade = CascadeType.ALL)
   @JoinColumn(name="checker_id")
   private Lecturer checker;

   @OneToMany(mappedBy="checker", orphanRemoval=true)
   private List<Lecturer> lecturers = new ArrayList<Lecturer>();
   } 
```

表单绑定了一个父对象（检查器），我想添加一个或多个从选择列表中选择并保存的子对象。

保存有效，但它将所有新对象保存为子对象，并且不会使用检查器 ID 单独保存检查器父对象。我不确定问题是什么并且想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:37:57.867

发布您的模型定义。我的猜测是，您的问题源于您将“父母”与其“孩子”联系起来的奇怪尝试。

使用hibernate，你只需*要做*一侧，hibernate会处理另一侧。举个例子：

```
public class MyObject {
    @Id
    private UUID id;

    @ManyToOne
    @JoinColumn(name = "myColumnName")
    private MyObject parent;

    @OneToMany(mappedBy = "parent")
    private Set<MyObject> children;

    public void addChild(MyObject child) {
        children.add(child);
    }

    public void removeChild(MyObject child) {
        children.remove(child);
    }

    // Other Accessors
} 
```

使用它...

```
public MyObject create(MyObject parent) {
    // Obtain a collection of MyObject that you would like to associate as "parent's" children
    for (MyObject curObject : myListOfObjects)
        parent.addChild(curObject);
    sessionFactory.getCurrentSession().persist(parent);
} 
```

我实际上*不必*设置每个孩子的`parent`，因为 Hibernate 会为我处理这些。我需要做的就是将每个孩子放入父母的孩子集合中。如果在非瞬态*和*附加的实体上进行，则仅此行为就足以导致插入发生。

```
@Transactional
public void update(parentId,child) {
    myDaoClass.readById(parentId).addChild(child);
    // When the current transaction ends, hibernate will issue a commit to persist the
    // child that we added (created) here.  No need to call session.persist(...) on it.
    // Assuming no exceptions are thrown, of course.
} 
```

# java - 需要简单解释“锁条带化”如何与 ConcurrentHashMap 一起工作

> ID：16151606
> 
> 赞同：27
> 
> 时间：2013-04-22T16:06:10.053
> 
> 标签：java, concurrency, java.util.concurrent, concurrenthashmap

根据 Java Concurrency in Practice，第 11.4.3 章说：

> 锁拆分有时可以扩展到对可变大小的独立对象集进行分区锁定，在这种情况下，它称为锁条带化。例如，ConcurrentHashMap 的实现使用了一个 16 个锁的数组，每个锁守卫 1/16 的哈希桶；桶 N 由锁 N mod 16 保护。

我在理解和可视化锁条带化和存储桶机制方面仍然存在问题。有人可以用很好理解的话来解释这个:)

提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-22T16:12:37.500

哈希映射建立在一个数组上，其中哈希函数将一个对象映射到底层数组中的一个元素。假设底层数组有 1024 个元素 - ConcurrentHashMap 实际上把它变成了 16 个不同的 64 个元素的子数组，例如 {0, 63}, {64, 127} 等。每个子数组都有自己的锁，所以修改{0, 63} 子数组不影响 {64, 127} 子数组 - 一个线程可以写入第一个子数组，而另一个线程写入第二个子数组。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-22T16:22:58.387

`Collections.synchronizedMap()`锁在a和a的区别`ConcurrentHashMap`如下：

如果多个线程将`Collections.synchronizedMap()`频繁访问 a ，则会出现很多争用，因为每个方法都使用共享锁进行同步（即，如果线程 X 调用 a 上的方法`Collections.synchronizedMap()`，则所有其他线程将被阻止调用 a 上的任何方法，`Collections.synchronizedMap()`直到线程 X从它调用的方法返回）。

A`ConcurrentHashMap`具有可变数量的锁（默认为 16 个），每个锁保护`ConcurrentHashMap`. 所以对于一个`ConcurrentHashMap`有 160 把钥匙的钥匙，每把锁将保护 10 个元素。因此，对键（`get`、`put`、`set`等...）进行操作的方法仅锁定对键在同一段中的键操作的其他方法的访问。例如，如果线程 X 调用`put(0, someObject)`，然后线程 Y 调用`put(10, someOtherObject)`这些调用可以并发执行，并且线程 Y 不必等待线程 X 从返回`put(0, someObject)`。下面提供了一个示例。

此外，某些方法（例如`size()`和`isEmpty()`）根本不受保护。虽然这允许更大的并发性，但这意味着它们不是强一致的（它们不会反映同时发生变化的状态）。

```
public static void main(String[] args) {
  ConcurrentHashMap<Integer, Object> map = new ConcurrentHashMap<>(160);

  new Thread(new Runnable() {
    @Override
    public void run() {
      map.put(0, "guarded by one lock");
    }
  }.start();

  new Thread(new Runnable() {
    @Override
    public void run() {
      map.put(10, "guarded by another lock");
    }
  }.start();

  new Thread(new Runnable() {
    @Override
    public void run() {
      // could print 0, 1, or 2
      System.out.println(map.count());
    }
  }.start();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-17T18:22:56.603

这里的关键概念是“桶”。而是为整个哈希表使用全局锁，它为每个存储桶使用一个小锁。这也是一个很好的类比桶排序，可以提高排序的复杂性。

# java - Java Pattern.quote("\\dc pb sddsf \n"); 为什么

> ID：16151607
> 
> 赞同：2
> 
> 时间：2013-04-22T16:06:12.073
> 
> 标签：java, regex, pattern-matching

为什么`\n`打印不出来？

```
System.out.println(Pattern.quote("\\d c pb sddsf \n")); 
```

基本上所有的东西都会分开打印出来`\n`。有什么线索吗？它应该“文字化”整个字符串，不是吗？

[正如这里](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)所说：

> 输入序列中的元字符或转义序列将没有特殊含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:08:39.903

`\n`是一个有效的 java 转义字符，用反斜杠将其转义以将其视为普通字符。：

```
 System.out.println(Pattern.quote("\\d c pb sddsf \\n")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:16:43.847

这完全按照它应该做的那样工作。您可能会因为正在查看的输出而感到困惑。让我们考虑以下示例以获取更多详细信息

```
 System.out.println(Pattern.quote("First part \t Second part \n Third part")); 
```

**以下的输出将是**

```
 \QFirst part        Second part   
  Third part\E 
```

在字符串的开头和结尾，它`\Q`表示“文字文本的开头”（即正则表达式“打开引号”） `\E`表示“文字文本的结尾”（即正则表达式“关闭引号”），这意味着它将字符串转换为正则表达式文字。

`First part \t Second part`在这部分中，这两个文本部分被制表符分隔，这意味着它应该在字符串表示中。

`\n Third part`这通过使用换行符转义序列打印在下一行。

如果您想查看这些转义序列，则必须使用`\`，但在这种情况下，它们将被简单地视为字符串而不是转义字符。

```
System.out.println(Pattern.quote("First part \\t Second part \\n Third part")); 
```

**上面的输出会出来**

```
\QFirst part \t Second part \n Third part\E 
```

如需更多说明，请找出以下输出

```
String esc = "\t";
String pat = Pattern.quote(esc);
String [] str = "First part      Second part \t Third Part".split(pat);
for(String n : str){
   System.out.println(n + " :: " + pat);
    }

esc = "\\t";
pat = Pattern.quote(esc);
str = "First part   Second part \t Third Part".split(pat);
for(String n : str){
   System.out.println(n + " :: " + pat);
} 
```

现在`esc = "\t";`它将拆分字符串，而`esc = "\\t";`它不会作为拆分方法无法找到任何`\t`字符串（我们认为它应该工作，但不是因为 quote() 方法）。

**见输出。**

```
First part  :: \Q   \E
 Second part  :: \Q \E
 Third Part :: \Q   \E
First part  Second part      Third Part :: \Q\t\E 
```

# highcharts - Highcharts 标志工具提示与标志重叠。

> ID：16151608
> 
> 赞同：0
> 
> 时间：2013-04-22T16:06:14.257
> 
> 标签：highcharts, highstock

当标志标题和标志文本都超过一定长度时，工具提示开始与标志本身重叠。因此鼠标很容易越过工具提示。因此，鼠标无法与图表交互，因为它位于工具提示上方，而不是直接位于图表上方。只有当鼠标移出工具提示区域时，鼠标才会再次开始与图表交互。

当有很多标志时，与图表交互变得非常困难。

尝试将鼠标悬停在带有长标题的旗帜上：http: [//jsfiddle.net/msjaiswal/angnU/](http://jsfiddle.net/msjaiswal/angnU/)

![工具提示与标志重叠 - highcharts](https://i.stack.imgur.com/Sgk4C.png)

这是代码：

```
$(function() {
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=usdeur.json&callback=?', function(data) {

    // Create the chart
    $('#container').highcharts('StockChart', {

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'USD to EUR exchange rate'
        },

        yAxis : {
            title : {
                text : 'Exchange rate'
            }
        },

        series : [{
            name : 'USD to EUR',
            data : data,
            id : 'dataseries',
            tooltip : {
                valueDecimals: 4
            }
        }, {
            type : 'flags',
            data : [{
                x : Date.UTC(2011, 1, 14),
                title : 'A',
                text : 'Shape: "squarepin"'
            }, {
                x : Date.UTC(2011, 3, 28),
                title : 'Long tooltip title',

                text : 'This is a really really really long tooltip text.'
            }],
            onSeries : 'dataseries',
            shape : 'squarepin',
        }, {
            type : 'flags',
            data : [{
                x : Date.UTC(2011, 2, 1),
                title : 'B',
                text : 'Shape: "circlepin"'
            }, {
                x : Date.UTC(2011, 3, 1),
                title : 'B',
                text : 'Shape: "circlepin"'
            }],
            shape : 'circlepin',
            width : 16
        }, {
            type : 'flags',
            data : [{
                x : Date.UTC(2011, 2, 10),
                title : 'C',
                text : 'Shape: "flag"'
            }, {
                x : Date.UTC(2011, 3, 11),
                title : 'C',
                text : 'Shape: "flag"'
            }],
            color : '#5F86B3',
            fillColor : '#5F86B3',
            onSeries : 'dataseries',
            width : 16,
            style : {// text style
                color : 'white'
            },
            states : {
                hover : {
                    fillColor : '#395C84' // darker
                }
            }
        }]
    });
}); 
```

});

有什么优雅的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:28:44.977

实际上，我自己找到了解决方法。通过使工具提示跟随鼠标，鼠标将永远不会超过工具提示。这不是一个完美的解决方案，而是一个不错的解决方法。使用选项：

```
tooltip: {
       followPointer : true
} 
```

演示：http: [//jsfiddle.net/msjaiswal/duxam/1/](http://jsfiddle.net/msjaiswal/duxam/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:27:05.400

您还可以使用工具提示定位器[http://api.highcharts.com/highstock#tooltip.positioner](http://api.highcharts.com/highstock#tooltip.positioner)

# c# - 为什么接口不能包含类型？

> ID：16151614
> 
> 赞同：9
> 
> 时间：2013-04-22T16:06:23.143
> 
> 标签：c#

这让我在 C# 中遇到了一两次。我可以写这样的代码

```
class Node
{
    class Connection
    {
        public Connection(Node node, string label)
        {
            this.Node = node;
            this.Label = label;
        }
        public Node Node { get; private set;  }
        public string Label { get; private set; }            
    };

    IEnumerable<Connection> IncomingConnections() // ...
    IEnumerable<Connection> OutgoingConnections() // ...
} 
```

但如果我写

```
interface INode
{
    class Connection
    {
        public Connection(INode node, string label)
        {
            this.Node = node;
            this.Label = label;
        }
        public INode Node { get; private set; }
        public string Label { get; private set; }
    };

    IEnumerable<Connection> IncomingConnections();
    IEnumerable<Connection> OutgoingConnections();
} 
```

我得到编译错误

> 错误 CS0524：“连接”：接口无法声明类型

我理解限制，但我感兴趣的是***为什么***. 我当然可以在 C++“接口”中嵌套类型（这只是一个具有抽象成员的类，所以不足为奇），显然它在 Java 中也是可能的，请参阅[Interfaces Cannot Declare Type Issue C#](https://stackoverflow.com/questions/8051324/interfaces-cannot-declare-type-issue-c-sharp)。那么鉴于 C# 从 Java 中学到了一些东西，为什么它在这方面缺乏（如果确实缺乏的话）？

（抱歉，如果这已经在其他地方得到解决。我还发现[接口不能声明类型](https://stackoverflow.com/questions/15009073/interfaces-cannot-declare-types)，[为什么我不能在接口中放置一个委托？](https://stackoverflow.com/questions/612957/why-cant-i-put-a-delegate-in-an-interface)但他们似乎没有直接解决我的问题。）

*编辑*

我想我只是添加一个注释，说在 Java 世界中，乍一看似乎是一个悬而未决的问题，即是否可以在接口中嵌套一个类。请参阅[https://stackoverflow.com/a/9098321/834521](https://stackoverflow.com/a/9098321/834521)。我不认为我在问为什么同样不能适用于 C# 是愚蠢的。

*编辑*

[框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321545613)，第 2 版，第 4.9 节 pp115-117的简要总结/引述。

*   **当嵌套类型需要访问封闭类型的私有成员时，请**使用嵌套类型。****
***   **不要使用**公共嵌套类型进行分组；为此使用名称空间。*   **除非您真的知道自己在做什么，否则请**避免公开嵌套类型。**（主要动机：显式创建嵌套类型会使技术水平较低的开发人员感到困惑。但是隐式创建，例如通过集合枚举器，是可以的。）*****   **如果嵌套类型将在包含类型之外使用或实例化，则不要使用**嵌套类型（这两者都主张嵌套类型与包含类型的独立性）。*   **不要**用作接口的成员。****

 ***** * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-22T19:17:17.450

> 为什么接口不能包含类型？

在深入探讨这个问题之前，让我先澄清几件事。

首先，CLR 类型系统*确实允许在接口内嵌套类型*。完全有可能创建一个 C# 或 VB 或任何支持在接口内声明的接口、委托、类、结构和枚举的版本，并且它将在现有的 CLR 上运行。

其次，我将就“为什么 C# 语言不实现功能 X？”形式的问题向您提供我通常的回击。对于 X 的所有值，答案都是相同的。为了实现一个特性，必须：考虑、设计、指定、实施、测试并交付给客户。如果这六件事中的任何一件都没有发生，那么就没有特征。**未实施功能 X 是因为其中一项或多项未发生。**

第三，C# 编译器团队（我不再参与）不必为*不*实现某个功能提供任何解释。功能需要花钱，预算是有限的，因此请求该功能的人有责任证明其收益与成本的合理性。

第四，“为什么”的问题很难回答，“为什么不”的问题更难回答。

所以，话虽如此，我会拒绝你的问题，并用我可以回答的问题代替它：

> 假设此功能请求已提交给 C# 设计团队。你会提出什么反对意见？

*   该功能虽然在 CLR 中是合法的，但在 CLS 中是不合法的。C# 中有很多特性在 CLS 中是不合法的，但是由于 CLS 指南明确指出**不要在接口中嵌套类型，因为大多数语言不支持它**，所以在 C# 中实现该特性本质上是在鼓励人们编写不能可用于其他语言。**建议的特性会鼓励不良的编程习惯**。

*   嵌套类型为您提供三个主要优势。首先，它们可以访问其封闭类型的私有成员。这对没有私有成员的接口没有好处。其次，它们提供了一种方便的方法来包含外部类型的特定私有实现细节。这对接口没有好处，接口可能没有私有嵌套类型，并且根据定义没有实现细节。第三，它们提供了一种将一种类型与另一种类型关联起来的便捷方式；但是，这最好通过命名空间来完成。

*   据我所知，没有其他人要求该功能。当客户确实需要很多功能时，我们不要将钱花在几乎没有人想要的功能上。

*   实现该功能并不会使语言本身以任何方式更强大或更具表现力。

*   实现该功能并不是我所知道的一些更棒的功能的垫脚石。该功能与任何其他“主题”无关。这是一个“完成主义者”功能，它消除了一个小的非正交性，而不是一个有用的功能。

*   对于缺少该功能，有一个简单的解决方法；只需将嵌套类型设为顶级类型即可。

*反对*的情况就是这样。*如果没有人为该*功能提出一个案例，它在设计委员会会议上的持续时间可能不会超过五分钟。您是否愿意为该功能提出案例？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-01T02:52:59.177

想补充一点，从 C# 8.0 开始，接口允许使用嵌套类型。

[默认接口方法——C# 8.0 规范建议 | Microsoft Docs](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/default-interface-methods) （强调）

> 接口的语法**扩展为 permit**：
> 
> *   声明常量、运算符、静态构造函数和**嵌套类型**的成员声明；

所以像下面这样的东西现在是*合法*的。

```
interface ISpectrum {
    [Flags]
    enum Palette { Red = 1, Green = 2, Blue = 4 }
    Palette Color { get; }
} 
```

这是否是一种好的做法已在其他答案中讨论过，但我个人发现特定于接口的枚举有其用途。

有趣的是，尽管此更改被列为默认接口实现的一部分，但其中大部分都需要新的运行时，即 .NET Core 3.0/.NET Standard 2.1 及更高版本，具有嵌套类型但没有任何实现的接口确实可以编译并可用于.NET Framework 4.8，只要使用支持 C# 8.0 中编译的 Roslyn CSC。

我认为这是因为 CLR 一直支持接口中的嵌套类型，正​​如 Eric Lippert 在此处的答案中所说的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:17:37.230

嵌套类型有意义的原因只有几个。主要原因是将它们定义为私有的，以便只有容器类可以访问它们。容器类将在其自己的实现中使用这些私有类型。

由于接口不是实现，因此没有充分的理由在其中嵌套类型。这将是无用的。这就像一个农民试图用一只小猫帮他犁地。从理论上讲，这至少可以尝试，但它没有任何实际用途。

查看提供的代码，我建议将该`Connection`类提升为顶级类型。如果您想根据功能组织您的类型，这就是命名空间的用途。在您的项目中创建一个文件夹结构来说明类型的组织方式，并更改命名空间以反映这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T16:19:01.873

从 C# 规范，第 13.2 节：

> 接口不能包含常量、字段、运算符、实例构造函数、析构函数或类型，接口也不能包含任何类型的静态成员。

嵌套类型是一种静态成员，因此不允许嵌套类型比让它们成为特例更一致。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-22T19:29:02.087

虽然在这篇文章的评论中提到了它，但我想在此重申，您可以使用 VB.Net 创建具有嵌套类型的接口，然后在 C# 中不受限制地使用该接口及其所有嵌套类型。此外，您可以使用 ILDasm 或 ILSpy 等工具将该代码导出到 IL，然后使用 Visual Studio ILSupport 扩展将其编织回您的库中（前提是您实际上并不直接在库中需要它）。

至于有人可能想要这样做的原因，这里有两个。第一个是为一组耦合接口提供蓝图/模式定义，这些接口具有支持通用概念（例如实体管理）所需的共享泛型类型参数。例如：

```
public  interface   IEntity
                    <
                        TIEntity, 
                        TDataObject, 
                        TDataObjectList, 
                        TIBusiness, 
                        TIDataAccess, 
                        TPrimaryKeyDataType
                    >
        where       TIEntity            : IEntity<TIEntity, TDataObject, TDataObjectList, TIBusiness, TIDataAccess, TPrimaryKeyDataType>
        where       TDataObject         : IEntity<TIEntity, TDataObject, TDataObjectList, TIBusiness, TIDataAccess, TPrimaryKeyDataType>.BaseDataObject
        where       TDataObjectList     : IEntity<TIEntity, TDataObject, TDataObjectList, TIBusiness, TIDataAccess, TPrimaryKeyDataType>.IDataObjectList
        where       TIBusiness          : IEntity<TIEntity, TDataObject, TDataObjectList, TIBusiness, TIDataAccess, TPrimaryKeyDataType>.IBaseBusiness
        where       TIDataAccess        : IEntity<TIEntity, TDataObject, TDataObjectList, TIBusiness, TIDataAccess, TPrimaryKeyDataType>.IBaseDataAccess
        where       TPrimaryKeyDataType : IComparable<TPrimaryKeyDataType>, IEquatable<TPrimaryKeyDataType>
{

    public  class       BaseDataObject
    {

        public  TPrimaryKeyDataType Id  { get; set; }

    }

    public  interface   IDataObjectList : IList<TDataObject>
    {

        TDataObjectList ShallowClone();

    }

    public  interface   IBaseBusiness
    {
        void            Delete(TPrimaryKeyDataType id);
        TDataObjectList Load(TPrimaryKeyDataType id);
        TDataObjectList Save(TDataObjectList items);
        bool            Validate(TDataObject item);
    }

    public  interface   IBaseDataAccess
    {
        void            Delete(TPrimaryKeyDataType id);
        TDataObjectList Load(TPrimaryKeyDataType id);
        TDataObjectList Save(TDataObjectList items);
    }

} 
```

上述问题也可以通过在容器接口之外的每个嵌套接口/类上重复泛型类型参数和约束来解决，但这很快就会变得混乱。如果 .Net 支持命名空间上的泛型类型参数，另一个很好的选择，但遗憾的是目前不支持。

在接口中嵌套类型的第二个原因是提供一个组合/混合接口来定义组合接口和一个嵌套的支持作曲家类，提供接受混合实例的功能以构造一个新的动态类，该类实现组合接口并将调用转发到混合。如下所示：

```
public  interface   IComposite<TIComposite, TIMixin1, TIMixin2>
        where       TIComposite : class,    IComposite<TIComposite, TIMixin1, TIMixin2>, TIMixin1, TIMixin2
        where       TIMixin1    : class
        where       TIMixin2    : class
{

    public  class   Composer
    {

        public  static  TIComposite     Create(TIMixin1 mixin1, TIMixin2 mixin2)
        {
            ...
        }

    }

} 
```

然后，您可以创建扩展上述 IComposite 接口的接口，该接口已经包含扩展接口的适当编写器。请注意，您还可能拥有 IComposite 接口的其他变体来支持更多数量的 mixin（类似于 Func 和 Action，因为 .Net 目前不支持可变泛型类型参数）。

您可以像在以下示例中一样使用它：

```
public  interface   IPerson
{
    string  FirstName;
    string  LastName;
}

public  interface   ILock
{
    object  GetLock();
}

public  interface   ILockablePerson : IComposite<ILockablePerson, IPerson, ILockable>, IPerson, ILockable {}

public  class       Person : IPerson
{
    public  string  FirstName   { get; set; }
    public  string  LastName    { get; set; }
}

public  class       Lock : ILock
{
    private
    readonly    object  lock        = new object();
    public      object  GetLock()   { return this.lock; }
}

public  class       UseLockablePerson
{

    public  void    Main()
    {
        var     lockablePerson  = ILockablePerson.Composer.Create(new Person(), new Lock());

        lock(lockablePerson.GetLock())
        {
            lockablePerson.FirstName    = "Bob";
        }
    }

} 
```

虽然可以在 IComposite 接口之外创建 Composer 类，但发现其组合支持或意图并不像在 IntelliSense 中看到 Composer 那样容易。在这种情况下，嵌套的 Composer 类实际上用于为接口提供静态方法 (Create)（这是另一个不受支持的选项）。****

# javascript - ReferenceError：找不到变量：_e_0uWl - 浏览器“中断”

> ID：16151620
> 
> 赞同：2
> 
> 时间：2013-04-22T16:06:46.590
> 
> 标签：javascript, safari, referenceerror

我们在 Safari 6.0.4 上有一个非常奇怪的问题：

用户可以愉快地在我们的页面上冲浪，突然他们在我们所有的页面上都得到了这个：

> ReferenceError：找不到变量：_e_0uWl

其他网站仍然可以正常工作。唯一的解决方法是重新启动 Safari。
该网站使用 jquery 等建立在 asp.net 上。我们搜索了所有代码，但找不到任何可以引用的内容：`_e_0uWl`

所有扩展都被禁用。
让我感到困惑的是，这不仅仅发生在页面上，如果你移开它，它会再次起作用，不，一旦它被破坏，它就会一直被破坏。什么可以让浏览器做到这一点？

**更新**：这又发生了几次，但变量名不同：

```
ReferenceError: Can't find variable: _e_028Y 
```

我们甚至在 Windows 机器上使用 Firefox。所以这不仅仅是 Safari 的问题。

**规格**：IIS7 上的 ASP.NET 4.5，带有用于捆绑和缩小的 MS 优化框架。jQuery 1.9.2，Micosoft Ajax 控制工具包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:53:32.910

@ 我的观点 ：

首先，如果可能，在启用或不启用调试的情况下在 @localhost 上运行此代码；否则在不同的网络服务器或不同的网络场上运行

第二：如果问题依然存在，请检查是哪个页面或哪些页面出现问题需要高质量调试，检查该页面是否有用户控件或该页面是否有ajax（非阻塞）请求，请一一禁用，最后检查是否有，因为这不能解决，请仔细检查 javascripts，如果有任何缩小或混淆并尝试删除它。

注意：请在相同的运行环境中构建和运行，请删除 deploy/lib 目录中的所有文件并进行干净的构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:22:07.117

作为一个非常快速的分析：

*   它发生在几个浏览器上，所以它不是浏览器错误，而是代码中的错误。

*   该变量在您的代码中没有硬引用，因此a）它是在您的代码被缩小/混淆时生成的（代码是否被缩小？）或b）该变量是在运行时请求的，但它确实不存在于您的代码中的任何地方，因此错误或 c）它在某个外部库中。你用那些吗？

*   问题发生在某个时刻，然后持续存在。因此，要么a）服务器突然发送以前未发送的特定脚本标签，要么b）服务器突然在所有页面中发送一些数据，导致客户端功能跳闸，或者c）你在本地存储中存储了一些东西，它坏了现在，它将在所有未来的页面重新加载中被破坏。

现在将所有情况一一排除，您可能会找到答案。使用调试器！

# opengl - 使用颜色拾取纹理 (OpenGL) 的边缘检测着色器

> ID：16151621
> 
> 赞同：1
> 
> 时间：2013-04-22T16:06:50.027
> 
> 标签：opengl, glsl, shader, textures

我正在编写一个小型 3D 应用程序，我想用彩色边缘突出显示选定的对象。我使用 FBO 将正常场景渲染成两种颜色的附件。第一个仅包含正常颜色输出，第二个存储场景中所有可见对象的拾取 ID（颜色拾取）。
现在我想将这两个纹理传递到我的片段着色器中，如果这个片段位于当前对象的边缘，则输出第一个纹理的正常颜色值或黄色。这就是我的着色器相关部分的样子：

```
uniform sampler2D picking_texture;
uniform sampler2D color_texture;
uniform float pickingID;
uniform float width;
uniform float height;

...

// texture coordinate delta
float dxtex = 1.0 / width;  // texture width
float dytex = 1.0 / height; // texture height

// compare neighboring texels in the picking texture (edge detection)
float nLeft   = texture2D(picking_texture, gl_TexCoord[1].st + vec2(-dxtex, 0.0)).r;
float nRight  = texture2D(picking_texture, gl_TexCoord[1].st + vec2( dxtex, 0.0)).r;
float nTop    = texture2D(picking_texture, gl_TexCoord[1].st + vec2( 0.0, dytex)).r;
float nBottom = texture2D(picking_texture, gl_TexCoord[1].st + vec2( 0.0,-dytex)).r;
float sum = nLeft+nRight+nTop+nBottom;

if(sum != 4.0 * pickingID)
{
    finalColor = vec4(1.0, 1.0, 0.0, 0.0);
} 
```

在我看来，这应该可行，但有两个问题：

*   ID 为 0 的对象照常着色
*   其他所有东西都是完全黄色的

到目前为止，我认为 sum 始终为 0，这样所有 pickID 高于 0 的对象都被染成黄色。但这意味着pickup_texture 中的查找总是返回0。所以我的纹理（绑定、texCoords 等）可能有问题，但我不知道是什么。color_texture 按预期工作。

这就是我在程序的 CPU 部分所做的：

链接和绑定着色器后：

```
// set locations of the textures
texture_location0 = glGetUniformLocation(shaderProgram->programId(), "color_texture");
glUniform1i(texture_location0, 0);
texture_location1 = glGetUniformLocation(shaderProgram->programId(), "picking_texture");
glUniform1i(texture_location1, 1); 
```

绘制场景之前：

```
// set textures
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, colorTex);
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, pickingTex); 
```

任何想法？

# javascript - 与 dhtmlxGrid 的链接不起作用

> ID：16151625
> 
> 赞同：0
> 
> 时间：2013-04-22T16:07:04.397
> 
> 标签：javascript, json, dhtmlx

我一直在努力获得与 dhtmlxGrid 一起出现的链接。我可以使示例正常工作，但是当我尝试显示链接时却没有。根据我阅读的内容，您可以使用 JSON 并显示链接。

我制作了一个显示代码的贴图，假设您引入了 Javascript 库，这应该可以工作。

[http://pastie.org/private/35znvuxwkvxzm4xvgpvva](http://pastie.org/private/35znvuxwkvxzm4xvgpvva)

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:29:30.207

呸！

确保将 ColType 设置为链接：

mygrid.setColTypes("ro,link");

*双面掌*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-21T12:23:41.687

您可以在 json 中手动创建链接并在链接上调用 javascript 函数...

```
data = {total_count:1,rows: [{"id":"30","data":["30","0","parent-P0004","<a href=javascript
:showDetailMeetAssReport('P0004');>14</a>","14"]}]} 
```

然后创建javascript函数对链接进行操作：

```
 showDetailMeetAssReport(usercode){} 
```

不需要给 setcoltype 链接，你可以设置它 ro。

# asp.net-mvc-4 - 如何更改简单成员表的默认数据库

> ID：16151630
> 
> 赞同：3
> 
> 时间：2013-04-22T16:07:17.913
> 
> 标签：asp.net-mvc-4, entity-framework-4, connection-string, simplemembership, localdb

我想问一个关于asp.net mvc 4.5 Internet应用程序附带的默认简单会员数据库的快速问题，我的问题是当我第一次创建新用户时它在哪里创建它的表它是否在默认连接中创建它的表字符串（本地数据库）？如果我将默认连接字符串更改为使用自定义 MS SQL Express 数据库会得到反映，并且这些表将在我的新数据库中创建？

我在默认帐户模型和其 DbContext 类中注意到此代码，它指的是默认连接，这是那里的代码：

```
public class UsersContext : DbContext
{
    public UsersContext() : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:21:37.243

SimpleMembership 在`InitializeSimpleMemberhsipAttribute.cs`类中初始化。

在默认的 MVC 4 Internet 项目模板中，导航到 Filters 目录，在上面的类中，您将找到初始化方法：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile",
 "UserId", "UserName", autoCreateTables: true); 
```

这是默认设置，如果您想将其指向不同的数据库，请执行以下操作：

```
WebSecurity.InitializeDatabaseConnection("MyContext", "TableToPointTo", 
"UserIdColumn", "UserNameColumn", autoCreateTables: false); 
```

在您的上下文类中：

```
public class MyContext : DbContext {...} 
```

`<configuration>`并更改根`web.config`文件部分内的连接字符串部分的名称：

```
<connectionStrings>
    <add name="MyContext" connectionString="..." />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T09:01:54.277

自从我遇到同样的问题以来，我一直在研究这个线程。我已经尝试了所有步骤，例如-

*   授予 SQLServer 权限
*   删除帐户控制器的 [InitializeSimpleMembership] 属性，同时在 Global.asax 中添加 WebSecurity.InitializeDatabaseConnection 连接。

但没有任何效果。

所以尝试了别的东西 -

*   将默认连接字符串中的数据源更改为 localhost。
*   在名为 MVCApp 的本地主机中创建了一个空数据库
*   将连接字符串中的初始目录设置为 MVCApp
*   从连接字符串中删除了 AttachDBFilename

所以现在我的连接字符串指向一个本地数据库。它奏效了。

我仍然不确定为什么几天前 MS 的默认实现现在不起作用。但在这个时候，我对周围的工作感到满意。

# php - 发送邮件适用于命令 linux 但不适用于 PHP

> ID：16151632
> 
> 赞同：2
> 
> 时间：2013-04-22T16:07:18.550
> 
> 标签：php, linux, email

我有很多电子邮件、gmail 和其他电子邮件，我尝试向每个电子邮件发送一封电子邮件。实际上，只有 1 封电子邮件收到该消息，而另一封电子邮件，例如 gmail，则没有。

使用 linux ：该命令`echo "Hi" | mail -s "test" xxxxxxxx@gmail.com`工作正常。

但是使用 PHP，邮件不会发送....

我的 mail.log 中没有错误。你有什么想法吗？

谢谢 ！

编辑：我在 linux 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:14:30.673

尝试这样的事情：

```
$mail = new PHPMailer(); // defaults to using php "mail()"
$body = $mailBody;
$mail->SetFrom('xxxxxxxx@example.com'); 
$mail->AddAddress('yyyyy@example.com', 'Your Name');

$mail->Subject = 'The subject';
$mail->MsgHTML('The body');
$mail->Send(); 
```

# c# - 在 Visual Studio 上使用 DirectX 和 c#

> ID：16151638
> 
> 赞同：1
> 
> 时间：2013-04-22T16:07:50.890
> 
> 标签：c#, directx

我是 C# 新手，并试图按照我拥有的初学者 C# 书中的教程进行操作，它已经有几年历史了，并且在作者使用的其中一个教程中：

```
using  Microsoft.DirectX;

using Microsoft.DirectX.Direct3D; 
```

我已在 2010 年 6 月安装了 DirectX sdk，我正在使用虚拟工作室 2012 并尝试添加对我在引用管理器中的任何 DirectX 的引用，但无济于事。教程是否太过时或者我做错了什么，如果是这样，还有什么替代方法？

此外，我在其他有关 directx 和 c# 的帖子中看到了对 SharpDX 的引用，但我不明白这种关系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:12:12.857

[Microsoft XNA](http://en.wikipedia.org/wiki/Microsoft_XNA)是一组由 Microsoft 提供的具有托管运行时环境的工具。检查[Microsoft 独立开发者网站](http://xbox.create.msdn.com/en-US)。有一些关于 XNA 第一步的教程：[链接](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started)。

而且我认为您不需要 DirectX SDK：

> 如果您使用的是 Windows 7 或 Windows Vista，则只需执行一个步骤：只需安装 Windows Phone 开发人员工具。这就是您开始所需的一切！XNA Game Studio 包含在工具中，适用于 Windows、Xbox 360 和 Windows Phone 7。

我希望包括 Windows 8 =)

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:10:22.150

C# 没有“官方”的 DirectX。您可以自己加载，使用 C++ DirectX 库并从 C# 调用它们。但更好的方法是尝试一些图书馆。大约两年前，我在使用 SlimDX（不确定，是否还在更新）

# elasticsearch - 如何自动将位置映射到 geo_point ？弹性搜索

> ID：16151646
> 
> 赞同：1
> 
> 时间：2013-04-22T16:08:01.613
> 
> 标签：elasticsearch

我想知道如何将每个调用的字段设置`"location"`为 type `"geo_point"`。

我可以为此使用默认映射吗？如果是，我找不到任何例子。

还是我应该使用动态模板？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:15:38.610

您可以使用动态模板。以下是创建索引时如何执行此操作的示例：

```
 curl -XPOST localhost:9200/test -d '{
"settings": {
    "number_of_shards": 1
},
"mappings": {
    "_default_:": {
        "_ttl": true,
        "dynamic_templates": [
            {
                "geo_location": {
                    "mapping": {
                        "type": "geo_point"
                    },
                    "match": "location"
                }
            }
        ]
    }
}
}' 
```

# ember.js - Handlebars 出口包含视图数据，但模板和部分不包含

> ID：16151653
> 
> 赞同：1
> 
> 时间：2013-04-22T16:08:13.183
> 
> 标签：ember.js, requirejs, handlebars.js

如何制作`template`或`partial`包含视图数据？我正在使用 Ember、车把和 requireJS。目前，我发现只`outlets`包含视图数据。我正在尝试在模板中显示模型的属性。具体来说，我试图`numberFive`在`GraphData`. `graphHolderTemplate`使用 at outlet 并不理想，因为我想在同一页面上显示来自不同视图的模板，而不管页面的 URL 是什么。

应用视图：

```
define(['ember', 'text!templates/applicationTemplate.html'],
       function(Em, applicationTemplate) {
  var ApplicationView = Em.View.extend({

    // warning: template doesn't work here, even though defaultTemplate does.
    defaultTemplate: Em.Handlebars.compile(applicationTemplate),
  });
  return ApplicationView;
}); 
```

应用模板：

```
<h1>{{#linkTo 'graph'}}Graph{{/linkTo}}</h1>
<h2>{{#linkTo 'graphHolder'}}Graph Holder{{/linkTo}}</h2>
<h4>outlet</h4>
{{outlet}}
<h4>template graphHolder</h4>
{{template graphHolder}}
<h4>partial graphHolder</h4>
{{partial 'graphHolder'}} 
```

图持有人模板：

```
<h3>This is the graphHolder</h3>
<p>view.graphData.numberFive is: {{view.graphData.numberFive}}</p> 
```

GraphHolderView：

```
define([ 'text!templates/graphHolderTemplate.html',
         'controllers/GraphController',
         'models/GraphData',
         'ember',
        ], function(graphHolderTemplate, GraphController, GraphData, Em) {
  // This is all that sets the template. hmmm
  Em.TEMPLATES['graphHolder'] = Em.Handlebars.compile(graphHolderTemplate);
  var graphData = GraphData.create();
  console.log("graphData.numberFive is ": graphData.numberFive);

  var GraphHolderView = Em.View.extend({
    controller: GraphController,
    classNames: ['hero-unit'],
    graphData: GraphData.create(),
  });
  return GraphHolderView;
}); 
```

![地点](https://i.stack.imgur.com/QUmtd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:05:11.307

很确定这是因为一个错字：

`var garphData = GraphData.create();`应该`var graphData = GraphData.create();`

编辑：好的，这不是因为错字。下一个猜测是，这`view`不是您所期望的 - 我认为它将引用`ApplicationView`。可以肯定的是，请尝试将以下内容添加到模板中：

```
<h3>This is the graphHolder</h3>
<p>view.graphData.numberFive is: {{view.graphData.numberFive}}</p>
<p>view is: {{view}}</p>
 {{log view}} 
```

这应该打印`view.toString()`到页面和控制台。如果您想进一步检查元素，请尝试添加`{{debugger}}`到模板中，然后使用 js 控制台查看发生了什么。

无论如何，当你使用`{{outlet}}`helper 时，ember-router 会根据你当前的路由和上下文填写适当的模板。如果找到一个匹配的类，它会将模板包装在一个匹配的`View`类中。

与`{{outlet}}`and不同`{{render}}`，the`{{partial}}`和`{{template}}`handlebars helper 都直接使用当前上下文渲染模板。这意味着他们不会尝试将模板包装在匹配的`view`类中。

您可能想在这里使用的是`{{render}}`助手。它将使用同名控制器的单例实例在当前上下文中呈现命名模板。如果存在同名的视图类，则使用该视图类。

# sql-server - 从包含加密对象的数据库中导出带有数据的数据层应用程序 (bacpac)

> ID：16151656
> 
> 赞同：2
> 
> 时间：2013-04-22T16:08:17.910
> 
> 标签：sql-server, dac

我有一个 SQL Server 2012 数据库项目，我一直在致力于部署我们的数据库。dacpac 部署运行良好，但在部署数据和架构时遇到了障碍。

我的计划是拥有一个包含所有默认数据的数据库的本地副本，以便我可以将 dacpac 部署到该数据库，然后导出一个包含最新模式的 bacpac 以及用于部署到远程站点的默认数据集。

但是，我们在数据库中有少数对象是加密的，并且 bacpac 导出在这些对象上失败。有没有办法从包含加密对象的数据库中导出 bacpac，或者您建议如何解决这个问题？

编辑：如果您对此有任何建议，我也会遇到引用系统数据库（如 Master 和 MSDB）的对象的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T18:03:18.860

我认为目前无法将加密对象导出为数据层应用程序。

至于系统数据库参考，您需要转到**解决方案->项目->参考->添加数据库参考**（见下面的截图）

![在此处输入图像描述](https://i.stack.imgur.com/TUYSO.png)

并添加对系统数据库 msdb（或 master）的引用。

![在此处输入图像描述](https://i.stack.imgur.com/jJegt.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-21T13:24:01.637

谢谢这个问题。我有同样的问题，虽然三天前，我在本地导出加密对象没有问题，现在我遇到了这个错误。

我的解决方法是创建数据库副本，删除数据库副本的加密对象，然后导出（我需要数据）。但是，我不知道提取所有对象（包括加密对象）的解决方法。

# c# - 如何读取设备和驱动程序版本

> ID：16151658
> 
> 赞同：11
> 
> 时间：2013-04-22T16:08:20.910
> 
> 标签：c#, .net, windows

我很难弄清楚如何做到这一点。基本上，我要做的就是读取连接到机器的所有设备，并读取驱动程序制造商和设备驱动程序的版本。这是您可以在设备管理器中获得的信息，但我想以编程方式进行。

我做了很多搜索和阅读，但找不到任何可以帮助我做到这一点的东西。有这个 WMI 东西应该可以工作，但我找不到任何有效的例子。我已经阅读并阅读了有关 WMI 的信息，但仍然无法弄清楚。

是否有任何教程可以比 Microsoft 网站更好地解释 WMI？我需要把它降到绘儿乐的水平。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T17:00:58.970

请看下面的文章

[使用 C# 获取硬件信息](http://www.c-sharpcorner.com/UploadFile/8af3e0/get-your-hardware-information-using-C-Sharp/)

[从 Windows Management Instrumentation 检索信息](http://www.codeproject.com/Articles/93260/Retrieving-Information-From-Windows-Management-Ins)

**编辑：**

我相信您正在寻找以下[Win32_PnPSignedDriver](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394354%28v=vs.85%29.aspx)类

```
public class Program
{
    public static void Main()
    {
        ManagementObjectSearcher objSearcher = new ManagementObjectSearcher("Select * from Win32_PnPSignedDriver");

        ManagementObjectCollection objCollection = objSearcher.Get();

        foreach (ManagementObject obj in objCollection)
        {
            string info = String.Format("Device='{0}',Manufacturer='{1}',DriverVersion='{2}' ", obj["DeviceName"], obj["Manufacturer"], obj["DriverVersion"]);
            Console.Out.WriteLine(info);
        }

        Console.Write("\n\nAny key...");
        Console.ReadKey();
    }
} 
```

此外，如果您打算在 WMI 上工作很多，您不妨使用此工具，以避免创建测试应用程序。

*   [WMI 代码创建者 v1.0](http://www.microsoft.com/en-us/download/details.aspx?id=8572)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T10:38:40.343

如果您正在从您的机器上查找特定类型的设备信息（假设只有蓝牙） - 那么 c# 中的“ManagementObjectSearcher”就足够了。您只需要包含
`using System.Management;`
一个条件搜索，如下所示

```
 ManagementObjectSearcher mos =
                   new ManagementObjectSearcher(@"\root\cimv2", @"Select * From Win32_PnPEntity WHERE ClassGuid = '"+deviceGuid+"'"); 
```

这里的“deviceGuid”是设备类类型（一个 guid 值 [所有 PC 都相同]）。

# actionscript-3 - 将自定义事件发送到动态加载的 SWF

> ID：16151659
> 
> 赞同：0
> 
> 时间：2013-04-22T16:08:31.470
> 
> 标签：actionscript-3, events, loader, dispatchevent

在我的 Main 类中，我调度了一个应该由 .swf 文件接收的事件，我之前确实加载了（通过 loaderMax）。不幸的是，eventListener 没有接收到调度的事件，因此没有做任何事情。我在下面发布了我想要做的事情的简短版本。如果有人能告诉我我做错了什么，我会很高兴。

```
public class Main {
        DisplayObject(loader.content).dispatchEvent("doSomething");
    }       

public class loadedSWF {
    this.addEventListener("doSomething", handler);

    function handler (event:Event):void {
        trace("recived dispatched Event");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:14:03.923

你派错了事件。见[`EventDispatcher.dispatchEvent()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html#dispatchEvent%28%29)。

您的调度必须只包含一个参数：一个事件。所以：

```
DisplayObject(loader.content).dispatchEvent( new Event( "doSomething" ) ); 
```

这将调度您的 eventListener 将侦听的“doSomething”类型的事件。

# python - 在python中复制结构

> ID：16151660
> 
> 赞同：2
> 
> 时间：2013-04-22T16:08:32.440
> 
> 标签：python, struct

无论如何支持python中的结构并且它不支持普通关键字*struct*吗？

例如：

```
struct node
{
  unsigned dist[20];
  unsigned from[20];
}rt[10]; 
```

我怎样才能将其转换为 python 结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:09:50.767

我认为 Python 相当于 C-structs 是[`classes`](http://docs.python.org/2/tutorial/classes.html)：

```
class Node:
    def __init__(self):
        self.dist_ = []
        self.from_ = []

rt = [] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:21:23.577

由于属性的顺序（除非一个`OrderedDict`或某物用于`__prepare__`或以其他方式构建类）不一定按照定义顺序，如果您想与实际的 C 兼容`struct`或依赖于按某种顺序排列的数据，那么以下是一个你应该能够使用的基础（使用`ctypes`）。

```
from ctypes import Structure, c_uint

class MyStruct(Structure):
    _fields_ = [
        ('dist', c_uint * 20),
        ('from', c_uint * 20)
    ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:18:11.650

即使是空班也可以：

```
In [1]: class Node: pass
In [2]: n = Node()
In [3]: n.foo = [1,2,4]
In [4]: n.bar = "go"
In [8]: print n.__dict__
{'foo': [1, 2, 4], 'bar': 'go'}
In [9]: print n.bar
go 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-28T06:59:16.597

@Abhishek-Herle

如果我遇到你的情况，我可能会依赖 python 中的 Struct 模块。

就像，在您的情况下，C 结构是：

```
struct node
{
  unsigned dist[20];
  unsigned from[20];
}rt[10]; 
```

所以这里的基本思想是将C-Structure转换为python，反之亦然。我可以在下面的python代码中大致定义上面的c结构。

```
s = struct.Sturct('I:20 I:20') 
```

现在，如果我想将任何值打包到这个结构中，我可以这样做，如下所示。

```
dist = [1, 2, 3....20]
from = [1, 2, 3....20]
s.pack(*dist, *from)
print s #this would be binary representation of your C structure 
```

显然，您可以使用 s.unpack 方法将其解包。

# php - Doctrine：如何编写一个只需要一个关系来匹配一个条件，但仍然查询其他关系的“and where”？

> ID：16151662
> 
> 赞同：1
> 
> 时间：2013-04-22T16:08:35.550
> 
> 标签：php, doctrine

好的，所以我确定这是一个非常令人困惑的问题。让我尝试更清楚地解释...

问题：

![在此处输入图像描述](https://i.stack.imgur.com/xbKH8.png)

Schema 很简单，本质上是：

![在此处输入图像描述](https://i.stack.imgur.com/YZtx2.png)

我正在处理一个非常大的数据集，需要将所有内容编译成 1 个有效的查询。有几个一对多的关系，我正在尝试“过滤”数据集。

我想要至少有 1 个与给定 ID 匹配的 preceptor 的事件的所有 preceptor 关联。

例如，我有一个“事件”实体，它可以有零个或多个与之关联的“指导者”。我的用户的过滤器需要允许他们选择一个“preceptor”并返回具有给定 preceptor ID 的所有事件。好吧，这很容易。但是我仍然需要列出其他导师 - 我需要仍然查询其他关系，但需要至少 1 个关联来匹配给定的标准。

我希望这更有意义。一旦查询到数据，我总是可以“过滤”数据，但我想避免获得不相关的数据，因为它是一个如此庞大的数据集。

这是我的代码片段：

```
 $qb->select($selectPartials)
       ->from('EventLegacy', 'e')
       ->leftJoin('e.site', 's')
       ->leftJoin('s.program_site_associations', 'psa')
       ->leftJoin('e.base', 'b')
       ->leftJoin('b.program_base_associations', 'pba')
       ->leftJoin('e.preceptor_associations', 'pa')
       ->leftJoin('pa.preceptor', 'pre')
       ->andWhere('e.program = ?3')
       ->andWhere('e.start_datetime >= ?1')
       ->andWhere('e.start_datetime <= ?2')
       ->andWhere('psa.active = true')
       ->andWhere('psa.program = ?3')
       ->andWhere('pba.active = true')
       ->andWhere('pba.program = ?3')
       ->andWhere('pre.id = ?4')
       ->orderBy('e.start_datetime')
       ->setParameter(1, $startDate)
       ->setParameter(2, $endDate)
       ->setParameter(3, $program)
       ->setParameter(4, $preceptorId);

        return $qb->getQuery()->getArrayResult(); 
```

等效的 SQL 查询：

```
SELECT *
FROM EventData e0_
LEFT JOIN AmbulanceServices a1_ ON e0_.site_id = a1_.AmbServ_id
LEFT JOIN ProgramSiteData p2_ ON a1_.AmbServ_id = p2_.AmbServ_id
LEFT JOIN AmbServ_Bases a3_ ON e0_.StartBase_id = a3_.Base_id
LEFT JOIN ProgramBaseData p4_ ON a3_.Base_id = p4_.Base_id
LEFT JOIN EventPreceptorData e5_ ON e0_.Event_id = e5_.Event_id
LEFT JOIN PreceptorData p6_ ON e5_.Preceptor_id = p6_.Preceptor_id
WHERE (e0_.Program_id = 287)
  AND (e0_.start_datetime >= ?)
  AND (e0_.start_datetime <= ?)
  AND (p2_.Active = 1)
  AND (p2_.Program_id = 287)
  AND (p4_.Active = 1)
  AND (p4_.Program_id = 287)
  AND (p6_.Preceptor_id = 179293)
ORDER BY e0_.start_datetime ASC 
```

这里有一些可能有用的假数据。

假设我总共有 3 个事件。(id, name)
1, eventA
2, eventB
3, eventC

eventA 有 2 个 preceptor，eventB 没有，eventC 有 1 个。所以，我们的 EventPreceptorData 表应该是这样的：
(id, event_id, preceptor_id)
1,1,1
2,1,2
3, 3,1

我们的 prceptor (PreceptorData) 可能看起来像这样 (id, name)
1, Bob
2, Chris

因此，如果我正在搜索 Bob，我希望看到事件 A 和 C，并且我希望我的输出是：

eventA 导师
：鲍勃，克里斯

eventB 导师
：鲍勃

我的问题是“克里斯”没有被列出（考虑到我的查询，这非常有意义）。

# python - 如何让这个机器人工作？

> ID：16151665
> 
> 赞同：0
> 
> 时间：2013-04-22T16:08:44.813
> 
> 标签：python, flash, bots

我用 Python 制作了一个机器人，用来模拟玩 Flash 网页游戏的玩家。问题是，我使用了一种需要特定屏幕坐标才能工作的方法，并且有一个弹出窗口我需要单击以前进到下一个状态，该状态似乎每次出现时都会出现在随机位置。

你知道如何“检测”弹出窗口的位置吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:33:40.443

我会尝试将您必须单击的按钮保存为图片，然后扫描整个屏幕并使用 PIL 将您保存的图片与您必须按下的按钮相匹配；从那里你应该能够检索坐标。

# opengl-es - +1 按钮和自定义按钮

> ID：16151668
> 
> 赞同：1
> 
> 时间：2013-04-22T16:08:58.103
> 
> 标签：opengl-es, google-plus

我有一个运行 OpenGL ES 的游戏，所以我根本没有使用 Android 的 UI 组件（除了表面视图）。我想做的是在我的游戏中有一个指向 Google Plus 的链接，玩家可以按下它并将我的游戏推荐给他们在 Google Plus 中的朋友。

我在 Android Developer guides how to do this in Java 中找到了一个示例。只需添加一个 PlusOneButton 即可。问题是，将 Android UI 与我的基于 OpenGL ES 的 UI 框架结合起来真的很困难。这就是为什么我想自己做。我已经有一个按钮，上面有 +1 位图。问题是在 PlusOneButton 中没有明显的公共方法可以调用。我尝试使用以下代码

```
Runnable r = new Runnable() {
    public void run() {
        mPlusOneButton.performClick();
    }
};
m_parent.runOnUiThread(r); 
```

但它似乎没有做任何事情。简而言之，我如何在不让用户实际单击 +1 按钮的情况下启动“+1”过程，换句话说，如何以编程方式启动它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:16:42.543

Google+ API 不允许开发者应用代表用户行事——所有活动（例如 +1 和分享）都必须由用户发起。目的是防止以编程方式创建的可能被视为垃圾邮件的操作，而是鼓励有意义的共享。

# delphi - Delphi - 即使尚未创建对象，布尔属性也可用

> ID：16151670
> 
> 赞同：4
> 
> 时间：2013-04-22T16:09:04.077
> 
> 标签：delphi, delphi-xe

我今天正在测试一些东西，我注意到即使没有创建实例，您也可以访问对象的布尔类型属性。这怎么可能？当尝试修改布尔属性时，会引发 AV。

```
unit Unit4;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TTest = class(TObject)
    public
     bBool : Boolean;
  end;
  TForm4 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

procedure TForm4.FormCreate(Sender: TObject);
var t : TTest;
begin
 if t.bBool then
  ShowMessage('what????');//this message is showed
 t.bbool := false; //AV...
end;

end. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T16:15:35.560

对象引用类型的局部变量（例如您的`t`变量）未初始化。它们包含进入函数时发生在堆栈或相关寄存器中的任何值。您的`t`变量未初始化。

显然，在您的测试中， in 的值`t`恰好引用了程序地址空间中的某个位置，但内存区域是只读的。你可以读它，但不能写它。在其他情况下，该地址可能不在您进程的地址空间中，在这种情况下，即使读取该值也会导致访问冲突。

在其他情况下，该地址可能既可读又可写，*然后*您将被允许将您想要的任何值写入该位置。由于您写入该位置的数据，您的程序稍后可能会发生奇怪的事情；该位置可能归您程序的其他部分所有。

# ios - 是否有 UIImagePickerController 替代品，我可以从已经在弹出窗口中的控制器使用？

> ID：16151673
> 
> 赞同：0
> 
> 时间：2013-04-22T16:09:11.283
> 
> 标签：ios, ipad, uiimagepickercontroller, uipopovercontroller

我正在编写一个应用程序，用于`UIImagePickerController`让用户从他们的库中选择图像。在 iPad 上，它会在弹出框中显示它（因为您必须这样做），但显示它的控制器已经在弹出框中，并且不允许您从另一个弹出框中显示弹出框。我无法重新设计整个应用程序以避免文件控制器处于弹出窗口中，所以我想做的是将图像选择器推送到文件控制器的导航堆栈上。

显然，这不适用于股票图像选择器，但有[很多替代方案](http://cocoapods.org/?q=uiimagepicker)。有没有人使用它们中的任何一个，可以让我将它们推送到导航堆栈上，还是我需要自己编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:27:51.363

正确的解决方案是将图像选择器作为模式视图控制器呈现给您现有的视图控制器。将图像选择器设置`modalPresentationStyle`为`UIModalPresentationCurrentContext`.

这将在同一个弹出窗口中显示图像选择器，但作为调用视图控制器的模态视图控制器。

# printing - 我们可以在哪些事务中维护要在事务 QM02 中打印的打印程序、例程和表格？

> ID：16151681
> 
> 赞同：1
> 
> 时间：2013-04-22T16:09:57.003
> 
> 标签：printing, transactions, settings, abap, sap-erp

我需要修改标准表单，为此，我将其复制到 Z* 表单，并且我想知道我的打印程序和 SapScript 表单分配给工作流的位置。

无论如何，由于很多事务似乎都是这样工作的：T1 - 打印，T2 - 设置打印选项，有什么模式可以用来查找 T2 类型的事务吗？

当然，就我而言，如果我得到指定了 QM02 设置的事务就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T09:43:31.510

如果您在自定义中找不到相关的打印程序，而不是跟踪或调试在您的情况下如何调用函数“OPEN_FORM”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T03:24:44.607

输出控制（打印程序）通常在 IMG 中配置。

运行事务 SPRO

搜索输出控件或打印控件。（在这种情况下，输出控件没有产生任何有用的结果，但打印控件给了我以下内容：）

![在此处输入图像描述](https://i.stack.imgur.com/4sLDx.png)

![在此处输入图像描述](https://i.stack.imgur.com/qFGUE.png)

将 Shop Papers 分配给 Notification Type 告诉您您关心哪种 Shop Paper（4CHAR 代码），Define Shop Papers 有 ABAP Form and print Program

![在此处输入图像描述](https://i.stack.imgur.com/69KgT.png)

我曾经能够使用表 TNAPR 来查找打印程序/打印表单组合的另一半，但随着 Sapscript 的使用越来越少，该表似乎没那么有用了。

# javascript - 在 JavaScript 中交换两个对象

> ID：16151682
> 
> 赞同：7
> 
> 时间：2013-04-22T16:09:57.663
> 
> 标签：javascript, swap

我有以下代码：

```
MyObject.prototype.doIt = function()
{
     var a = this.obj1;
     var b = this.obj2; 
} 
```

如何交换**this.obj1**和**this.obj2**的值，使 obj1 变为 obj2 而 obj2 变为 obj1。

**！注意：请记住，我不使用原始类型。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-15T23:58:15.813

您可以使用如下简单的标识函数交换任意数量的对象或文字，甚至是不同类型的对象或文字：

```
var swap = function (x){return x};
b = swap(a, a=b);
c = swap(a, a=b, b=c); 
```

这在 JavaScript 中有效，因为它接受额外的参数，即使它们没有被声明或使用。赋值`a=b`等发生在`a`传递给函数之后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T16:15:22.137

在交换时使用临时变量来保存其中一个对象的内容：

```
var tmp = this.obj1;
this.obj1 = this.obj2;
this.obj2 = tmp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:13:09.783

您可以轻松地交换属性：

```
MyObject.prototype.doIt = function()
{
     var a = this.obj1;
     var b = this.obj2;
     this.obj1 = b;
     this.obj2 = a;
} 
```

那`obj1`和`obj2`不是原始类型无关紧要。您实际上不需要两个变量：

```
MyObject.prototype.doIt = function()
{
     var a = this.obj1;
     this.obj1 = this.obj2;
     this.obj2 = a;
} 
```

但是，如果此代码之外的任何引用`this.obj1`或`this.obj2`已经存在，它们将不会被交换。

在交换`this.obj1`和`this.obj2`无处不在（包括现有参考）方面，我认为这不能完全做到。您可以删除所有属性，例如`this.obj1`（将它们保存在某处），添加来自 的属性`this.obj2`，然后对`this.obj2`. 但是，您将无法交换原型，因此对象无法从根本上交换身份。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-20T02:54:25.710

我们可以使用关于破坏对象的信息，如下面的代码：

```
let a = 2;
let b = 4;
[a, b] = [b, a]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T19:32:24.763

这是一个带有具体对象的示例，假设您的原始对象是 2 个 div，div1 和 div2。

为了交换它们，

var temp1 = div1;
var temp2 = div2;

div1 = 温度 2；
div2 = temp1；

# python - pytest.main('-s') 应该运行两次测试吗？

> ID：16151685
> 
> 赞同：3
> 
> 时间：2013-04-22T16:10:07.637
> 
> 标签：python, python-3.x, pytest

我才刚刚开始学习测试，所以我刚开始尝试使用 py.test 组合并运行一些非常简单的单元测试。

示例`test_script.py`：

```
import pytest

def test_func():
    assert True

pytest.main('-v') 
```

运行这个给出：

```
============================= test session starts ==============================
platform win32 -- Python 3.3.1 -- pytest-2.3.4 -- C:\Program Files (x86)\Python33\python.exe
collecting ... collected 1 items

test_script.py:3: test_func PASSED
=========================== 1 passed in 0.12 seconds =========================== 
```

如果我替换`-v`为`-s`查看标准输出（并禁用标准输出的 pytest 捕获），则测试运行两次：

```
============================= test session starts ==============================
platform win32 -- Python 3.3.1 -- pytest-2.3.4
============================= test session starts ==============================
platform win32 -- Python 3.3.1 -- pytest-2.3.4
collected 1 items

test_script.py .

=========================== 1 passed in 0.04 seconds ===========================
collected 1 items

test_script.py .

=========================== 1 passed in 0.12 seconds =========================== 
```

测试应该在这里运行两次吗？我进行了搜索，但在文档中找不到任何明显的内容（尽管可能一直在寻找错误的地方）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T17:18:46.910

这是一个有趣的:)

这是发生的事情：python 执行 test_script.py 并因此执行`pytest.main("-s")`返回文件系统并收集`test_script.py`作为测试模块的文件。当 pytest 导入`test_script`时，`pytest.main(...)`在收集期间再次调用。第二次调用不会`test_script`再次导入，因为它`sys.modules`现在就在其中，但它执行了测试函数。当集合完成时（并且内部 pytest.main run 已经执行了一次测试），测试函数也由外部 pytest.main 调用执行。一切都清楚了吗？:)

如果你想避免这种情况，你需要像这样包装 pytest.main 调用：

```
if __name__ == "__main__":
    pytest.main("-s") 
```

此调用不会在正常导入时执行，但会在您发出时执行，因为 python 通过设置为但在正常导入时`python test_script.py`执行指定的命令行脚本。`__name__``__main__``test_script``import test_script`

# c - c char ** 导致分配错误

> ID：16151687
> 
> 赞同：1
> 
> 时间：2013-04-22T16:10:15.147
> 
> 标签：c, multidimensional-array, access-violation

我将多维字符数组传递给 c 中的函数。main() 或任何函数确定输入数组的大小（维度）。我试图在我的函数中动态确定数组的长度和宽度。到目前为止，我已经能够动态确定第一行的宽度。但是，如果我尝试使用相同的逻辑来确定长度，则会出现访问冲突错误。这是我到目前为止的代码：

```
char * myfunc( char* in[] )
{
    int index=0, cols=0;
    while( in[0][index++] != '\0' );
    cols = index - 1;
    :
    :
}

int main()
{
     char *in[3] = {"abcd","efgh","ijkl"};
     char *out   = myfunc( in );
     :
     :
} 
```

对我来说幸运的是，**in 的所有“行”中的“cols”都是相等的。我知道一种更强大的方法是首先确定行数，然后测试每行的列数。每次尝试对行执行类似操作时，都会导致访问冲突错误。

我应该提一下，我无法重新定义函数来传递数组的维度。我还要提一下，这不是作业或工作作业，我在刷 c 编码技能时遇到了这个问题。有没有办法确定上述情况下的行数而不会导致访问冲突错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:15:28.627

有了你拥有的数据，它就无法完成。但是你可以像这样添加一个哨兵：

```
char *in[4] = {"abcd", "efgh", "ijkl", NULL}; 
```

然后查找哨兵（这实际上是您通过`'\0'`在第一个字符串中查找哨兵来计算列数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:16:02.313

```
char * myfunc( char* in[] )
{
    int rows;
    for(rows = 0; in[rows]; ++rows)
        ;
    printf("%d\n", rows);

    .....
    .....
}

int main()
{
     char *in[] = {"abcd",, "efgh","ijkl", NULL};
     char *out   = myfunc( in );
} 
```

仅当所有字符串的长度相同时才值得检测列。

# ios - iOS - iPhone应用程序文档“没有这样的目录”？

> ID：16151696
> 
> 赞同：1
> 
> 时间：2013-04-22T16:10:48.460
> 
> 标签：ios, nsstring, nsurl, nsfilemanager

我正在尝试使用[此处解决方案中看到的](https://stackoverflow.com/questions/4793278/deleting-all-the-files-in-the-iphone-sandbox-documents-folder)方法来删除我正在编写的应用程序的 iPhone 文档目录中的所有文件。为了传递文档目录的字符串位置，我对解决方案中的代码进行了一些小的更改。我的代码版本如下：

```
NSString *directory = [[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] absoluteString];
NSLog(@"%@", directory);
NSError *error = nil;
NSArray *directoryContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:directory error:&error];
if (error == nil) {
    for (NSString *path in directoryContents) {
        NSString *fullPath = [directory stringByAppendingPathComponent:path];
        BOOL removeSuccess = [[NSFileManager defaultManager] removeItemAtPath:fullPath error:&error];
        if (!removeSuccess) {
            // Error handling
        }
    }
} else {
    // Error handling
    NSLog(@"%@", error);
} 
```

但是，当我尝试运行它时，由于传递的内容被解释为不存在的目录，因此 directoryContents 的设置失败。具体来说，我在代码中放入的两个 NSLog() 语句返回以下内容：

```
2013-04-22 11:48:22.628 iphone-ipcamera[389:907] file://localhost/var/mobile/Applications/AB039CDA-412B-435A-90C2-8FBAADFE6B1E/Documents/

2013-04-22 11:48:22.650 iphone-ipcamera[389:907] Error Domain=NSCocoaErrorDomain Code=260 "The operation couldn’t be completed. (Cocoa error 260.)" UserInfo=0x1d5232c0 {NSUnderlyingError=0x1d54c420 "The operation couldn’t be completed. No such file or directory", NSFilePath=file://localhost/var/mobile/Applications/AB039CDA-412B-435A-90C2-8FBAADFE6B1E/Documents/, NSUserStringVariant=(

    Folder

)} 
```

据我所见，打印到 NSLog 的路径看起来是正确的，所以我不确定我做错了什么。谁能指出我的错误在哪里？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:23:22.437

您获取值的代码`directory`不太正确。你要：

```
NSURL *directoryURL = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
NSString *directory = [directoryURL path]; 
```

调用`absoluteString`会`NSURL`为您提供文件 URL。您不需要文件 URL，而是希望将文件 URL 转换为文件路径。这就是该`path`方法的作用。

另一种方法是：

```
NSString *directory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; 
```

# java - Java 监视器日志记录文件

> ID：16151698
> 
> 赞同：1
> 
> 时间：2013-04-22T16:10:57.703
> 
> 标签：java, performance, logging, log4j, monitoring

我正在开发一个工具来监视多个应用程序的日志文件，这些应用程序使用 java.logging 或 Log4j。

appender 始终是一个滚动文件 appender，文件的大小作为滚动的触发器。当两者（ java.logging 和 log4j ）发生滚动时，所有日志文件都被重命名以允许当前日志文件具有相同的名称。

我的问题是，如果我当前正在读取日志文件，我会阻止它被重命名，因此它将被擦除，因为记录器不会附加到它应该刚刚创建的文件上。

我尝试使用 socketAppender 来避免读取文件并直接收集数据，但是日志记录的操作至少需要 0.1 毫秒（使用 fileAppender 时为 0.02），因为我的一个应用程序的粒度为 1 毫秒我不能用这个。

我通过更改记录器的配置并使用此代码获得了这些结果

```
long start=System.currentTimeMillis();    
long numberOfLog=0;
long total=1000000;
while(numberOfLog<total){
    log.info(" "+numberOfLog);
    numberOfLog++;
}
long duree=System.currentTimeMillis()-start;

System.out.println("la durée est de "+duree+"ms pour "+total+" logs"); 
```

现在我想知道是否有任何解决方案可以在不干扰重命名的情况下读取这些日志文件？或者是否有解决方案来配置这些工具（log4j、java.logging）以在大小触发器上滚动而不重命名文件（使用名称或其他解决方案的日期）？

感谢您的反馈意见

# sql - Oracle 执行计划成本与速度

> ID：16151702
> 
> 赞同：0
> 
> 时间：2013-04-22T16:11:12.303
> 
> 标签：sql, performance, oracle, query-optimization, sql-execution-plan

在 Oracle 中构建和调整查询时，速度通常是开发人员主要关心的问题。但是，在调整特定查询时，我最近尝试了 FIRST_ROWS 和 NO_CPU_COSTING 提示，生成的执行计划在执行时间上比之前的计划快 80%，但成本高出 300%。执行计划中的 I/O 非常少，而且所有额外开销似乎都来自两个视图之间的嵌套循环外连接。

这个查询是分页的，所以我只需要前几百行。缺乏重要的 I/O 使我认为这个查询不会依赖于缓存，乍一看似乎是要走的路。但是，由于我从未见过查询同时提高速度*和*成本，因此我不确定使用此查询的缺点可能是什么。有吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:37:29.787

这是一个非常典型的查询，当需要完整的数据集时，使用 equijoin 优化以使用哈希连接，当只需要前几行时使用嵌套循环，或者排序用于 order by索引可以更有效地用于子集的完整日期集。

当然，如果优化器不知道您将只使用行的子集，那么它不会给出您将实际执行的查询的成本，因为它包括所有嵌套循环操作的成本，这些操作永远不会要去执行。

但是，估计成本并没有错，它就是这样。如果您想要一个更有意义的数字以供您自己理解，请使用 rownum 限制。

顺便说一句，FIRST_ROWS 已被弃用，取而代之的是 first_rows(1)、first_rows(10)、first_rows(100) 或 first_rows(1000)。

# php - SQL, PHP, 准备好的语句

> ID：16151703
> 
> 赞同：0
> 
> 时间：2013-04-22T16:11:13.873
> 
> 标签：php, sql, prepared-statement

我正在尝试使用准备好的语句从 PHP 填充我的表。

然而，没有错误被抛出，数据没有进入表格。这是我的代码：

```
$stmt = $mysqli->prepare("INSERT INTO Parks VALUES (null,?,?,?,?,?,?,?,?,?,?,?,?,?,Now(),?,?,?, 0, 0, 0)");
    if ($stmt === FALSE) {
    die ("Mysql Error: " . $mysqli->error);
    }
    $stmt->bind_param('ssssssssssssssss', $name, $theme, $size, $mountains, $hills, $river, $lake, $island, $setofislands, $ocean, $waterfalls, $file, $image, $description, $author,$cs);

    $stmt->execute();
    $stmt->close();
    $mysqli->close(); 
```

提前致谢。

**数据类型：**

*   ID（整数（自动增量））
*   名称 (varchar(255))
*   主题 (varchar(255))
*   大小 (varchar(255))
*   山脉 (varchar(255))
*   丘陵 (varchar(255))
*   河流 (varchar(255))
*   湖 (varchar(255))
*   岛 (varchar(255))
*   Setofislands (varchar(255))
*   海洋 (varchar(255))
*   瀑布 (varchar(255))
*   文件（varchar（255））
*   图像（varchar（255））
*   上传日期（日期）
*   说明（varchar（255））
*   作者 (varchar(255))
*   CS(varchar(2000))
*   下载(int(255))
*   评分（双）
*   文件大小（大整数（20）

（共 21 个）

注意：我已经在一个测试数据库上尝试了准备好的语句，它只有一列并且有效......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:51:58.580

经过一系列的试验和错误，我能够解决这个问题。

似乎：

```
$stmt->bind_param('ssssssssssssssssi', etc
$stmt->exceute(); 
```

需要并列出列名：

```
Insert into Parks (name, description) Values (?, ?) 
```

是使其工作所需的更改。确认一下，现在一切正常，感谢大家对此的支持！:)

# javascript - 除非选中单选按钮，否则如何禁用 jQuery 滑块控件

> ID：16151706
> 
> 赞同：0
> 
> 时间：2013-04-22T16:11:27.447
> 
> 标签：javascript, jquery, jquery-ui, radio-button

我希望禁用 jQuery UI 滑块的功能，直到选中单选按钮。非常直截了当，但我尝试过的事情没有任何运气，所以我希望得到一些帮助。为方便起见：http: [//jsfiddle.net/nlem33/L5cY6/11/](http://jsfiddle.net/nlem33/L5cY6/11/)

```
 $('#slider1').slider({

    min: min_value,
    max: max_value,
    step: 1,

    slide: sliderHandler,
    stop: function (event, ui) {

    }
});

var min_value = 0;
var max_value = 630;

$('#slider2').slider({

    min: min_value,
    max: max_value,
    step: 5,

    slide: sliderHandler,
    stop: function (event, ui) {

    } 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:26:11.377

您可以将它们初始化为禁用，然后在单击单选按钮时启用它们：

```
$('#slider1').slider({

        min: min_value,
        max: max_value,
        step: 1,
        disabled: true, // <= disabled on init
        slide: sliderHandler,
        stop: function (event, ui) {

    }
});

// Enable function :

$(':radio').click(function() {
    $('#slider1, #slider2').slider('enable');
}); 
```

[http://jsfiddle.net/L5cY6/23/](http://jsfiddle.net/L5cY6/23/)

# c++ - FILE* 作为公众

> ID：16151709
> 
> 赞同：0
> 
> 时间：2013-04-22T16:11:29.653
> 
> 标签：c++, c

我再次在这里寻求支持。

例如，我有一个名为 fp 的 fopen 东西

```
FILE * fp;

fp=fopen("Entity.dat","wb"); 
```

而且我有 x 个函数，并且需要在所有函数中使用这个东西，所以问题是我怎样才能使它成为公共/全局范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T16:19:37.057

理想情况下，您应该简单地将它作为参数传递给需要使用它的任何函数：

```
void func( FILE *f, ... )
{
  // do something with f
}

int main( void )
{
  FILE *fp = fopen( "Entity.dat", "wb" );
  ...
  func( fp, ... );
  ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T16:13:36.947

你应该使用`extern`：

the_file.h

```
#ifndef FILE_H
#define FILE_H

...

extern FILE *file;

#endif 
```

the_file.cpp

```
#include "file.h"

FILE *file; 
```

然后打开文件并将句柄存储在`file`. 接下来，您可以`file`在需要的地方使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T16:18:33.503

如果你有选择，请把它作为参数传递，如果你真的没有选择，那么你可以考虑单例。

c++11

```
template<typename T>
class meyersSingleton
{
public:
  static T& instance()
  {
    static T theSingleton;
    return theSingleton;
  }

  meyersSingleton() = delete;
  ~meyersSingleton() = delete;
  meyersSingleton(meyersSingleton const&) = delete;
  meyersSingleton& operator=(meyersSingleton const&) = delete;

}; 
```

C++98

```
template<typename T>
class meyersSingleton
{
public:
  static T& instance()
  {
    static T theSingleton;
    return theSingleton;
  }

private :
  meyersSingleton();
  ~meyersSingleton();
  meyersSingleton(meyersSingleton const&);
  meyersSingleton& operator=(meyersSingleton const&);

}; 
```

你可以这样使用它

```
#include <cstdio>

template<typename T>
class meyersSingleton
{
public:
  static T& instance()
  {
    static T theSingleton;
    return theSingleton;
  }

  meyersSingleton() = delete;
  ~meyersSingleton() = delete;
  meyersSingleton(meyersSingleton const&) = delete;
  meyersSingleton& operator=(meyersSingleton const&) = delete;

};

void read_file()
{
    char buffer [100];
    fgets (buffer , 100 , meyersSingleton<FILE*>::instance());
    printf("%s", buffer);    
}

int main()
{             
    FILE **a = &meyersSingleton<FILE*>::instance();
    *a = fopen("coeff", "rb");

    read_file();   

    return 0;
} 
```

这不是一个非常直观的解决方案，但它可以保证您只有一个全局和单个 FILE。

如果您需要更多单个文件，您可以再添加一个模板参数

```
template<typename T, size_t N = 0>
class meyersSingleton
{
public:
  static T& instance()
  {
    static T theSingleton;
    return theSingleton;
  }

  meyersSingleton() = delete;
  ~meyersSingleton() = delete;
  meyersSingleton(meyersSingleton const&) = delete;
  meyersSingleton& operator=(meyersSingleton const&) = delete;

}; 
```

如果您使用的是 c，则只需省略此解决方案。

编辑：在大多数情况下，单例被认为是一个糟糕的解决方案，一种不应该使用的反模式，不要管它。这里有一些讨论单例优缺点的好文章。

[为什么单身人士如此糟糕](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons) [单身人士我爱你，但你让我失望](http://www.codingwithoutcomments.com/)

不要误会我的意思，单例确实解决了一个问题——它保证你一次只会有一个对象（变量、资源等），有时这非常有用（尽管很少见）。日志就是一个例子，我们到处都需要日志，而日志不会在我们的程序中写入任何内容。

# emacs - 如何为 Emacs X windows 指定 X11 SouthEast 重力？

> ID：16151712
> 
> 赞同：1
> 
> 时间：2013-04-22T16:11:39.510
> 
> 标签：emacs, x11, gravity

这是目前特定于 Emacs 的，但如果一般来说 X 应用程序有一个通用的答案，我会喜欢它。

是否有我可以为 Emacs 设置的 X 资源，它将其主窗口的重力设置为东南？也就是说，当我启动一个新的 Emacs 会话时，我希望它的窗口尽可能靠近屏幕的右下角（以窗口管理器的放置算法为模）。

有问题的窗口管理器是 Enlightenment E17，但窗口重力是 X 概念，不是吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:50:06.587

Have you tried to use a `-g -0-0` command-line argument?

If you want to specify it via Elisp, you can add frame parameters as in:

```
(add-to-list 'initial-frame-alist '(top . -))
(add-to-list 'initial-frame-alist '(left . -)) 
```

# c# - wpf 绑定不同的源和目标

> ID：16151713
> 
> 赞同：1
> 
> 时间：2013-04-22T16:11:43.263
> 
> 标签：c#, wpf, binding, .net-4.0

可以在 WPF 中进行绑定，而源和目标是不同的属性。

类似的东西

> 绑定="{绑定源=MySourceProperty，目标=MyTargetProperty}"

**根据要求解释我需要做什么：** 除其他外，该程序允许编辑作为数据库中主键一部分的属性。如果属性刚刚被更改，那么这将不会更新 DB 值或创建副本，具体取决于我处理保存对象的方式。一个不同的目标将允许它工作（通过使用“旧”值明确指定要更新的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:14:53.453

XAML 中定义的A`Binding`始终以定义它的对象和属性为目标。

如果您`Binding` [*在代码*](http://msdn.microsoft.com/en-us/library/ms742863.aspx)中定义，您可以/必须明确指定源和目标。本质上，这就是`Binding` 该类的工作方式：

```
Binding binding = new Binding("SourceProperty"); // Sets up the source property
myBinding.Source = mySourceObject; // sets up the source object
targetProperty.SetBinding(TargetType.TargetDepProperty, binding); // This sets the target object/binding 
```

绑定的 XAML 标记扩展负责自动设置等式的目标端，因此它始终是您定义绑定的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:33:19.357

在您可以访问旧值的公共属性集中，
键是旧值
，值是来自绑定的建议值，
您可以拒绝来自绑定的值

```
private string key;

public string Key 
{
   get { return key; }
   set 
   {
       if (key == value) return;
       // try data update 
       bool success = updateDB();
       if (success) key = value;  // only update if success
   }
} 
```

如果值无效，我会将上述内容与验证结合起来通知用户。
[验证类](http://msdn.microsoft.com/en-us/library/system.windows.controls.validation%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:37:34.150

我会尽量回答你需要什么，而不是问不正确的 HOW

> “如果属性刚刚被更改，那么这将不会更新数据库值或创建重复”

在您的属性`set`ter 中，您应该检查`set { if (this.someMember != value)`输入的值是否已更改：

```
public event PropertyChangedEventHandler PropertyChanged;

private string someMember;
public int SomeProperty 
{
    get 
    { return this.someMember; }
    set 
    {
       if (this.someMember != value)
       {
           someMember = value;
           if (PropertyChanged != null)
           {
               PropertyChanged(this, new PropertyChangedEventArgs("SomeProperty"));
           }
     }
} 
```

**作为旁注（或题外话），**
您可能会发现[WPF](http://www.codeproject.com/Articles/321899/DataContext-in-WPF)文章中的代码项目 DataContext 在其最后[下载源代码](https://skydrive.live.com/?cid=38ecce05b21b8b44&id=38ECCE05B21B8B44!403)中有一个示例，当反映一个 VisualModel 属性的更新时（与另一个 VM 属性中的更新同步）

启动后立即：

![在此处输入图像描述](https://i.stack.imgur.com/nfhsl.jpg)

在第一个文本框中键入的文本反映在第二个文本框中，反之亦然，在第二个文本框中键入的文本反映在第一个文本框中。

![在此处输入图像描述](https://i.stack.imgur.com/fjxMA.jpg)

在 3d 文本框中键入的文本反映在第 4 个文本框（以及底部的文本块内容中），反之亦然，在第 4 个文本框中键入的文本反映在 3d 中（以及底部的文本块内容中）。

![在此处输入图像描述](https://i.stack.imgur.com/DbvIl.jpg)

请注意，下载是`DataCotext Inner Objects.zip`解压缩到目录和解决方案的名称`Bindingtoclassesstate`

# php - MySQL + PHP：一次拉下 1000 个条目，递增到下一个 1000，重复

> ID：16151714
> 
> 赞同：0
> 
> 时间：2013-04-22T16:11:44.107
> 
> 标签：php, mysql, limit

早上好！

我正在尝试做一些应该相当简单的事情，但我一直无法找到有效的答案。我正在尝试从表中拉下条目 0-999，然后是 1000-1999、2000-2999 等。这是我到目前为止所得到的，但随着它的增加，它仍在拉下 0-999+

```
for($k = 0; $k < 10000; $k += 1000)
{
    $query = "select * from TABLENAME LIMIT 1000 OFFSET " . $k;
        .....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:13:36.613

尝试这个：

```
for($k = 0; $k < 10000; $k += 1000)
{
    $query = "select * from TABLENAME LIMIT {$k},1000";
        .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:17:53.400

```
$start = 0;
$end = 0;
for($k = 0; $k < 10000; $k += 1000)
{

   $flag = $start+999;
   $end = 1000;
    $query = "select * from TABLENAME LIMIT $start,$end";

    .....
   $start =  $flag+1;
} 
```

# jquery - 使用 jquery 计算加载图像列表的宽度

> ID：16151718
> 
> 赞同：0
> 
> 时间：2013-04-22T16:11:55.307
> 
> 标签：jquery

**我正在使用jQuery**创建幻灯片，图像使用**AJAX**加载，并使用 append 放入列表中。加载所有图像后，我想获取列表宽度。

我在下面使用此代码，但问题是`logos_counter`应该包含所有图像宽度始终等于 0。

```
var logos_counter = 0;
var img = new Image();
$.each(data.images, function (index, photo) {
   url = 'img/logos/' + photo;
   $('.logos ul').append($('<li>').append($('<img/>').attr('src',url).addClass('slide')));
   img.src = url;
   logos_counter = logos_counter + img.width;
});
$('.logos ul').css({width: logos_counter + 'px'}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:14:12.253

尝试这个 -

```
$.each(data.images, function (index, photo) {
   url = 'img/logos/' + photo;
   $('.logos ul').append($('<li>').append($('<img/>').attr('src',url).addClass('slide')));
   img.src = url;
   $(img).load(function(){
      logos_counter = logos_counter + $(this).width;
      $('.logos ul').css({width: logos_counter + 'px'});
   });

}); 
```

# ipad - Drawing Image with Alternating Colors

> ID：16151719
> 
> 赞同：0
> 
> 时间：2013-04-22T16:12:03.707
> 
> 标签：ipad, ios6, uiimageview, uiimage

How can we draw a background pattern (to be set to **UIImageView**) programmatically like the following?

![enter image description here](https://i.stack.imgur.com/3Z14z.jpg)

It has alternating colored squares like 20 x 20 pixels. I can do it with REAL Stupid and MS Visual Basic. I have never done it with iOS. If I run a search, one clue that I get is **colorWithPatternImage**. I used the following REAL Stupid code a few years ago. It works regardless of the dimensions of the canvas (equivalent to UIImageView).

```
Dim i,j As Integer
For j=0 To Ceil(CanvasX.Height/20)
For i=0 To Ceil(CanvasX.Width/20)
  If i Mod 2=0 And j Mod 2=0 Then
    If CField1.text="1" Then
      g.ForeColor=&cCC9900
    Elseif CField1.text="2" Then
      g.ForeColor=&c000000
    Else
      g.ForeColor=&cCCCCCC
    End if
  Elseif i Mod 2>0 And j Mod 2>0 Then
    If CField1.text="1" Then
      g.ForeColor=&cCC9900
    Else
      g.ForeColor=&cCCCCCC
    End if
  Else
    If CField1.text="1" Then
      g.ForeColor=&cE6E6E6
    Else
      g.ForeColor=&cFFFFFF
    End if
  End if
  g.FillRect i*20,j*20,20,20
Next i
Next j 
```

Thank you for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:45:21.880

方法#1：拍摄这张图片：

![在此处输入图像描述](https://i.stack.imgur.com/cPl2l.png)

然后通过指定图案图像设置背景颜色：

```
UIImage *bgImage = [UIImage imageNamed:@"squares"];
UIColor *bgColor = [UIColor colorWithPatternImage:bgImage];
someView.backgroundColor = bgColor; 
```

方法#2：使用石英。子类`UIView`，然后实现以下方法：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    NSLog(@"%@", ctx);

    CGFloat ws = self.frame.size.width;
    CGFloat hs = self.frame.size.height;

    const int side = 10;

    int nx = ws / side;
    int ny = hs / side;

    CGRect rects[nx / 2];

    for (int i = 0; i < ny; i++) {
        for (int j = 0; j < nx; j += 2) {
            rects[j / 2] = CGRectMake(j * side, i * side, side, side);
        }

        const static CGFloat w[4] = { 1.0, 1.0, 1.0, 1.0 };
        const static CGFloat g[4] = { .75, .75, .75, .75 };

        if (i % 2) {
            CGContextSetFillColor(ctx, g);
        } else {
            CGContextSetFillColor(ctx, w);
        }
        CGContextFillRects(ctx, rects, nx / 2);

        for (int j = 1; j < nx; j += 2) {
            rects[j / 2] = CGRectMake(j * side, i * side, side, side);
        }

        if (i % 2) {
            CGContextSetFillColor(ctx, w);
        } else {
            CGContextSetFillColor(ctx, g);
        }
        CGContextFillRects(ctx, rects, nx / 2);
    }
} 
```

# perl - How to track down what Apache process is doing

> ID：16151720
> 
> 赞同：2
> 
> 时间：2013-04-22T16:12:06.110
> 
> 标签：perl, apache, flush, mod-perl, strace

I occasionally have Apache processes that go to 100% of CPU usage and never quit. When this happens 8 times (8 CPUs), the server becomes unusable. According to server-status, the "hung" process is a fairly complex custom Perl program, but when I print out warnings to the error log within the Perl, it shows that the process always goes to completion and returns, but apparently after returning, it goes into a loop or something. When I run strace on the process, it just shows tons of mmap2/munmap lines, e.g.:

```
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4329472, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d7000
mremap(0xb3d7c000, 4329472, 4333568, MREMAP_MAYMOVE) = 0xb3d7c000
munmap(0xb42d7000, 4329472)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000
munmap(0xb42d6000, 4333568)             = 0
mmap2(NULL, 4333568, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb42d6000 
```

I have no idea what that means. It does this indefinitely. Is there any way to get a higher-level view of what it's doing? Has anyone seen anything similar to this?

Also, while it is usually a fairly random happenstance, if I issue an rflush() before exiting the Perl program, this almost always happens.

I'm using mod_perl/2.0.7, perl/5.12.4, apache/2.2.24\. This was happening in a few minor versions down as well; I upgraded and it didn't improve anything. I'm also using DBI, DBD:ODBC.

My best guess is some kind of contention/race condition, but tracing the code with "warn" output indicates no such problem within the Perl itself. The Perl code also uses evals with timeout alarm signals that never get tripped, so it doesn't seem possible to be an issue with the Perl code.

Any ideas would be much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:41:57.687

I think I've solved it. Still don’t know why rflush() would have made it worse, nor did I find any higher level view of the strace results, but this is why it was doing it:

At some point, I added the following piece of code to the “error” subroutine, which is called any time the program detects an error internal to itself:

```
my $caller = "";
my $x = 1;
while (caller($x) && $x < 10)
{
        my $subroutine = (caller($x))[3];
        $subroutine =~ s/^.*::([^:]+?)$/$1/gis;
        my $line = (caller($x))[2];
        $caller = qq~->$subroutine(line $line)~.$caller if $subroutine;
}
$caller = "main".$caller; 
```

All this does is print out which subroutine the error occurred in. So, for instance if in the main body of the program, the subroutine “sub1” is called from line 1234, and from there “sub2” is called from line 2345, and an error occurs in “sub2” on line 3456, then the “error” subroutine will note that the error occurred in “main(line 1234)->sub1(line 2345)->sub2(line 3456)”. This is important for debugging, obviously. Unfortunately, it doesn’t help debugging the “error” subroutine itself!

In the “while” loop, it checks to make sure that $x < 10 (there shouldn’t be 10 levels of subroutine calls). This is meant to prevent run-away iteration. Unfortunately, the line to actually increment the variable $x is missing. What this means is that it’s going to keep checking for $x < 10 indefinitely because $x always = 1\. The tricky part about this is that the “error” subroutine is called from a signal trap handler, which apparently forks from the main program itself, so the “error” subroutine can run in this infinite loop while the body of the program appears to finish. That made it impossible to “print” or “warn” a linear view of what was happening, leading to great confusion. That also made it so that this infinite loop ran outside of my main “eval” which has a timeout on it, so the timeout never stopped the loop like it was expected to. The program completed to the very last line and output, but the process which was serving it just kept going, eating up 100% of the CPU due to this infinite loop in the signal handler.

The solution is just four characters: “$x++”. Adding that inside the while loop prevents the infinite iteration and actually allows the debugging info from the signal handler to print out.

# asp.net - ASP.NET Web API on .net 4.0

> ID：16151725
> 
> 赞同：3
> 
> 时间：2013-04-22T16:12:13.167
> 
> 标签：asp.net, .net-4.0, asp.net-web-api, .net-4.5

I have ASP.NET web api project created on .NET v 4.5 I later i was decided to change framework to 4.0 After changing i got an error. VS can not regognize types and namespaces althougt all required librariesare referenced. It does not happen to newly creted test API project.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:51:33.303

尝试检查您引用的 dll 是否适用于 4.0 版而不是 4.5，可能您仍在引用不适用于 .net 4 的 4.5 库。

# r - 在R中将向量乘以矩阵应该返回向量

> ID：16151726
> 
> 赞同：2
> 
> 时间：2013-04-22T16:12:13.287
> 
> 标签：r, vector, matrix

在 R 中，我想将 1x3 向量乘以 3x3 矩阵以生成 1x3 向量。然而 R 返回一个矩阵：

```
> v = c(1,1,0)
> m = matrix(c(1,2,1,3,1,1,2,2,1),nrow=3,ncol=3,byrow=T)
> v*m
     [,1] [,2] [,3]
[1,]    1    2    1
[2,]    3    1    1
[3,]    0    0    0 
```

正确的输出应该是向量，而不是矩阵

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:16:26.690

如果有疑问，请尝试帮助系统，例如`help("*")`或`help("Arithmetic")`。您只是使用了错误的运算符。

```
R> v <- c(1,1,0)
R> m <- matrix(c(1,2,1,3,1,1,2,2,1),nrow=3,ncol=3,byrow=T)
R> dim(m)
[1] 3 3
R> dim(v)
NULL
R> dim(as.vector(v))
NULL
R> dim(as.matrix(v, ncol=1))
[1] 3 1
R> 
R> m %*% as.matrix(v, ncol=1)
     [,1]
[1,]    3
[2,]    4
[3,]    4
R> 
```

请注意，我们必须先`v`变成一个适当的向量。你没有说是 1x3 还是 3x1。但幸运的是 R 很慷慨：

```
R> v %*% m
     [,1] [,2] [,3]
[1,]    4    3    2
R> m %*% v
     [,1]
[1,]    3
[2,]    4
[3,]    4
R> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:22:16.463

在这种情况下有用的功能是`crossprod`和`tcrossprod`

```
> tcrossprod(v, m)
     [,1] [,2] [,3]
[1,]    3    4    4 
```

有关详细信息，请参见`?crossprod`和`?tcrossprod`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:15:16.290

你在寻找

```
as.vector(v %*% m) 
```

?

这里的文档`matmult`：

```
 Multiplies two matrices, if they are conformable.  If one argument
 is a vector, it will be promoted to either a row or column matrix
 to make the two arguments conformable.  If both are vectors it
 will return the inner product (as a matrix). 
```

# python - Real time command prompt export in text field using pyqt4

> ID：16151727
> 
> 赞同：1
> 
> 时间：2013-04-22T16:12:14.490
> 
> 标签：python, python-3.x, pyqt, pyqt4, python-3.3

What I am trying to achieve seems like it should be simple, but I can not find anything online to help.

I would like to take my pyqt program and, instead of using the command prompt, export all my print() commands to a qtextbrowser.

There are 2 parts to my question.

1.  How do I disable the command prompt from showing up when the app is run.
2.  How to output the print() commands to the text browser in real time.

I am using Python 3.3 and qt designer with pyqt4.

Thank you in advance! Some of the code is confidential so if it is needed to help I can remove the sensitive info and post it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:41:15.447

我找到了解决方案。我试图在我的 GUI 线程中做所有事情。我是 python 新手，但我确信通过一些研究我可以自学线程。

# node.js - 如何将块数据写入文件

> ID：16151728
> 
> 赞同：1
> 
> 时间：2013-04-22T16:12:22.973
> 
> 标签：node.js, filestream

当客户端发布块数据（文件的一部分）时，服务器端应将块插入文件。但是 fs.open 会截断文件。所以我不能用空fd来写。现在这就是我正在使用的它读取所有缓冲区并更改缓冲区中的块范围值。

```
 //badly code
fs.open(getFilePath(fileId),"r+",function(err,fd){
    var bytes = new Buffer(metadata.fileSize);
    fs.read(fd,bytes,0,bytes.length,0,function(){
        for(var i=0;i<bytes.length;i++){
            if(i>=start && i <= end){
                bytes[i] = buffer[i-start];
            }
        }
        //console.log(bytes);
        fs.write(fd,bytes,0,bytes.length,0,function(err){
            if(err) throw err;

            fs.close(fd,function(){
                metadata.addChunk(start,end);
                metadata.save(callback);
            });
        });
    });
}); 
```

有没有更好的方法来做到这一点？请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-01T10:31:55.010

我知道这个问题可能有点过时了，但是我在尝试将源代码写入文件时遇到了同样的问题为了解决这个问题，我没有使用写入文件而是追加，例如：

```
 res.on('data', function (chunk) {
      fs.appendFile('body.txt', chunk, function (err) {
          if(err) throw err;
      }); 
```

这对我来说很好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T17:58:26.600

听起来您想将 http 请求附加到文件中。

打开附加的写入流。

```
var writeStream = fs.createWriteStream(path, {flags: 'a'}); 
```

然后在你的 http 处理程序中

```
function (req, res) {
  req.pipe(writeStream, {end: false});
  req.on('end', function () {
    res.end('chunk received');
  });
}; 
```

# python - AttributeError: 'int' object has no attribute '_sa_instance_state'

> ID：16151729
> 
> 赞同：64
> 
> 时间：2013-04-22T16:12:27.507
> 
> 标签：python, sqlalchemy, flask, one-to-many, flask-sqlalchemy

I'm working on forum template using Flask. When I attempt creating a new thread in the browser using forms, SQLAlchemy throws an AttributeError. The problem showed up when I tried implementing a one-to-many relationship with Forum-to-Thread and a one-to-many relationship with Thread-to-User.

models.py

```
class User(db.Model):
  id = db.Column(db.Integer, primary_key=True)
  username = db.Column(db.String(32), index=True, unique=True)
  password = db.Column(db.String(32), index=True)
  email = db.Column(db.String(120), index=True, unique=True)
  role = db.Column(db.SmallInteger, default=ROLE_USER)

  posts = db.relationship('Post', backref='author', lazy='dynamic')

class Forum(db.Model):
  id = db.Column(db.Integer, primary_key=True)
  title = db.Column(db.String(128))
  description = db.Column(db.Text)

  threads = db.relationship('Thread', backref='forum', lazy='dynamic')

class Thread(db.Model):

  id = db.Column(db.Integer, primary_key=True)
  title = db.Column(db.String(128))
  author= db.Column(db.String(32))
  timestamp = db.Column(db.DateTime)
  forum_id = db.Column(db.Integer, db.ForeignKey('forum.id'))

  posts = db.relationship('Post', backref='thread', lazy='dynamic')

class Post(db.Model):

  id = db.Column(db.Integer, primary_key=True)
  body = db.Column(db.Text)
  timestamp = db.Column(db.DateTime)
  thread_id = db.Column(db.Integer, db.ForeignKey('thread.id'))
  user_id = db.Column(db.Integer, db.ForeignKey('user.id')) 
```

All the new posts/threads and handled within views.py

views.py

```
@app.route('/forum/id=<id>/submit', methods=['GET','POST'])
@login_required
def new_thread(id):
  form = ThreadForm()
  forum = Forum.query.filter_by(id=id).first()
  if form.validate_on_submit():
    thread = Thread(title=form.title.data,
                    author=g.user.username,
                    timestamp=datetime.utcnow())
    db.session.add(thread)
    db.session.flush()
    post = Post(body=form.body.data,
                timestamp=datetime.utcnow(),
                thread=thread.id,
                author=g.user.id)
    db.session.add(post)
    db.session.commit()
    flash('Post successful.')
    return redirect(url_for('forum_index', id=id))
  return render_template('forum/thread_submit.html', title=forum.title, form=form) 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-22T17:19:36.133

问题是这样的：

```
post = Post(body=form.body.data,
            timestamp=datetime.utcnow(),
            thread=thread.id,
            author=g.user.id) 
```

您想使用 ORM 对象，而不是主键列：

```
post = Post(body=form.body.data,
            timestamp=datetime.utcnow(),
            thread=thread,
            author=g.user) 
```

该错误意味着整数被解释为 ORM 对象。

# security - Elastic Beanstalk 安全补丁

> ID：16151731
> 
> 赞同：14
> 
> 时间：2013-04-22T16:12:31.033
> 
> 标签：security, amazon, patch, amazon-elastic-beanstalk

**我目前在我的所有**ec2 实例上使用带有无人值守升级的 Ubuntu ，以保持关闭任何令人讨厌的漏洞，但是当通过 Elastic beanstalk 运行应用程序时，我看不到任何关于如何处理它们的补丁的选项。唯一的选择是手动登录它们并运行 yum。

有没有人想过如何处理 Elastic Beanstalk 实例上的安全补丁？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-02T20:34:26.333

我们在 .ebextensions/01run.config 文件中添加了以下内容以解决此问题：

```
commands:
  security_updates: 
    command: "yum update -y --security" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T19:13:52.330

您可以使用每晚或每小时的 cron 作业运行以下命令。

`bash sudo yum update --sec-severity=critical,important`

想想如果补丁导致您的应用程序失败，您将如何进行回滚和通知。

# c# - 使用 iTextsharp 创建的 pdf 模糊或模糊

> ID：16151733
> 
> 赞同：1
> 
> 时间：2013-04-22T16:12:41.443
> 
> 标签：c#, asp.net, itextsharp

我正在从 silverlight 网格创建图像。转换为 png 并使用 iTextsharp 将其插入到 pdf 中。最终结果有一个非常模糊/模糊的pdf。如果我保存与 png 相同的图像，那就很清楚了。如何使用具有更清晰图像的 pdf 来改进结果？

以下是代码片段（在 Silverlight 端）：

私人无效生成PDF（）{

```
SaveFileDialog fsd = new SaveFileDialog();
fsd.DefaultFileName = "Report.pdf";
fsd.Filter = "PDF (*.pdf)|*.pdf|*PNG (*.png)|*.png";
bool? dialogResult = fsd.ShowDialog(); //fsd.ShowDialog();
if (dialogResult == true)
{
    BusyWindow.IsBusy = true;
    WriteableBitmap wBitmap = new WriteableBitmap(PreviewWindow.LayoutRoot, null);

    int hgt = wBitmap.PixelHeight;
    int wdth = wBitmap.PixelWidth;

    EditableImage ei = new EditableImage(wdth, hgt);

    for (int y = 0; y < hgt; y++)
    {
        for (int x = 0; x < wdth; x++)
        {
            int pixel = wBitmap.Pixels[((y * wdth) + x)];
            ei.SetPixel(x, y, (byte)((pixel >> 16) & 0xff), (byte)((pixel >> 8) & 0xff), (byte)(pixel & 0xff), (byte)((pixel >> 24) & 0xff));
        }
    }

    System.IO.Stream pngStream = ei.GetStream();

    printBuffer = new Byte[pngStream.Length];
    pngStream.Read(printBuffer, 0, printBuffer.Length);

    switch (fsd.FilterIndex)
    {
        case 1:
            HttpWebRequest hwr = (HttpWebRequest)HttpWebRequest.Create(new Uri(Application.Current.Host.Source.ToString().Substring(0, Application.Current.Host.Source.ToString().LastIndexOf("/")) + "/Png2Pdf.ashx"));
            hwr.Method = "POST";

            printStream = fsd.OpenFile();
            printSyncContext = System.Threading.SynchronizationContext.Current;
            hwr.BeginGetRequestStream(new AsyncCallback(PrintStart), hwr);

            break;
        case 2:
            //Save the PNG to local disk
            lc.Show();
            System.IO.Stream fs = fsd.OpenFile();
            fs.Write(printBuffer, 0, printBuffer.Length);
            fs.Close();
            BusyWindow.IsBusy = false;
            lc.Close();
            break;
    }

} 
```

}

在处理程序：

```
 public void ProcessRequest(HttpContext context)
    {
        int PDFPageHeight = 1056;
        int PDFPageWidth = 814;

        if (context.Request.ContentLength > 0)
        {
            System.IO.Stream incomingStream = context.Request.InputStream;  //Get the incoming stream
            System.Drawing.Image img = System.Drawing.Image.FromStream(incomingStream); //Create and image from the stream

            int pageHeight = img.Height + (_Margin * 2);
            int pageWidth = img.Width + (_Margin * 2);

            iTextSharp.text.Image pdfImage = iTextSharp.text.Image.GetInstance(img, System.Drawing.Imaging.ImageFormat.Png);
            System.IO.MemoryStream pdfStream = new System.IO.MemoryStream();
            iTextSharp.text.Document pdfDoc = new iTextSharp.text.Document(new iTextSharp.text.Rectangle(PDFPageWidth, PDFPageHeight), 0, 0, 0, 0);

            iTextSharp.text.pdf.PdfWriter pdfWriter = iTextSharp.text.pdf.PdfWriter.GetInstance(pdfDoc, pdfStream);

            pdfWriter.CloseStream = false;

            pdfDoc.Open();

            Bitmap bmp = new Bitmap(incomingStream);
            int pages = (int)Math.Floor((decimal)(bmp.Height / PDFPageHeight));

            for (int i = 0; i < pages; i++)
            {
                pdfDoc.NewPage();

                Rectangle PageRect = new Rectangle(0, (PDFPageHeight * i), img.Width, PDFPageHeight);

                Bitmap pageBMP = bmp.Clone(PageRect, System.Drawing.Imaging.PixelFormat.DontCare);
                Image pageImage = (Image)pageBMP;
                pdfDoc.Add(iTextSharp.text.Image.GetInstance(pageImage, System.Drawing.Imaging.ImageFormat.Png));
            }

            pdfDoc.Close();

            context.Response.Clear();
            context.Response.ContentType = "application/pdf";
            context.Response.AppendHeader("Content-Disposition", "attachment; filename=Export.pdf");
            context.Response.AppendHeader("Content-Length", pdfStream.Length.ToString());
            context.Response.Buffer = false;

            if (pdfStream.Position > 0) { pdfStream.Position = 0; };

            Byte[] bytesRead = new Byte[_BufferSize];

            long toRead = pdfStream.Length;

            while (toRead > 0 && context.Response.IsClientConnected)
            {
                if (_BufferSize > toRead)
                {
                    _BufferSize = (int)toRead;
                    bytesRead = new Byte[_BufferSize];
                };

                pdfStream.Read(bytesRead, 0, _BufferSize);

                context.Response.OutputStream.Write(bytesRead, 0, _BufferSize);

                context.Response.Flush();

                bytesRead = new Byte[_BufferSize];

                toRead -= _BufferSize;
            }

            context.Response.OutputStream.Flush();
            context.Response.End();

            if (pdfStream != null)
            {
                pdfStream.Close();
                pdfStream.Dispose();
            }
        }
    } 
```

# php - PHP Warning while passing $_POST to array_key_exists()

> ID：16151734
> 
> 赞同：1
> 
> 时间：2013-04-22T16:12:45.383
> 
> 标签：php, arrays, post, warnings

So I am using the following style of code `if(array_key_exists('some_value', $_POST)){echo 'hi';}`

For PHP 5.2.17 I am getting a warning from this style of code. This is the warning: `WARNING: argument 2 for array_key_exists() is not either an array or an object on line: 123`

This seems strange to me because I believe that the $_POST array should always be defined. Is that not the case? I'm not sure what would cause the $_POST array to not be considered an array. I am not resetting $_POST to anything so it should exist as an array at all times. Does anyone have any idea what is wrong. Please let me know if more information is needed and thank you for the help.

Edit: I should note that this only happens on the production server. My local environment does not have this problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:16:16.077

改为使用`if(isset($_POST['some_value'])) { echo 'hi'; }`。从来没有遇到过问题。

还要检查您是否没有**覆盖或取消**设置$_POST （或者您正在使用的某些框架正在为您执行此操作）。我避免使用超全局变量这样做，因为我认为这是一种不好的做法，并且可能会像这样让人头疼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:20:32.557

和仅在脚本被编入或传出时才被填充。在您的示例中，您收到该错误的原因是脚本没有发布操作。在检查某个帖子值之前，您应该检查以确保有帖子：[`Superglobals`](http://php.net/manual/en/language.variables.superglobals.php) `$_POST``$_GET``POST``GET`

```
if(isset($_POST)) {
    //The form was posted
} 
```

以那种方式。从那里，您可以使用 来检查某些值`array_key_exist`，或者您可以进一步检查`isset($_POST['myKey'])`。

# php - 我应该使用 JQuery 而不是 PHP 来加载外部 JSON 吗？

> ID：16151739
> 
> 赞同：0
> 
> 时间：2013-04-22T16:12:50.617
> 
> 标签：php, jquery, ajax

我有一个网页可以多次调用外部站点 API。现在，我通过 PHP 执行此操作，并尽可能将响应缓存到磁盘（使用 cachelite）。即便如此，[页面](http://www.controlcommandescape.com/games/)似乎加载得很慢，我正在努力寻找可能的原因（Chrome 中的页面速度选项卡没有提供任何有用的线索）。

所以我想知道让客户端通过 JQuery 处理 API 调用是否有一些好处，这样至少用户的初始页面加载速度更快。我这样做是否值得，还是我最好尝试进一步优化 PHP 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:16:07.807

这取决于，如果你想让 JSON 的结果被谷歌索引，你需要通过 PHP 来解析它。

如果您想要最快的方式和更少的服务器负载，请使用 Javascript 加载 JSON，JSON 将从外部源加载并由用户浏览器缓存。

JSON的加载时间是多少？也许其他服务器很慢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:18:21.660

PHP 是服务器端脚本。如果您没有在服务器上做任何事情，而只是从外部站点 API 加载内容，我认为您最好使用 jQuery 或 javascript 来完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:23:53.027

我一直在考虑上面的两个答案，并认为我可以做的是将这两种方法结合起来，也就是说，让服务器端 php 脚本获取和缓存 json，但让面向用户的 PHP 文件使用jquery 从文件中加载数据。

# servicestack - ServiceStack: Get email from auth session when authenticating with Google

> ID：16151740
> 
> 赞同：4
> 
> 时间：2013-04-22T16:13:01.427
> 
> 标签：servicestack

I am authenticating users via GoogleOpenIdOAuthProvider. I need to access the email address of the user that logged in. I have attempted to implement the [Using Typed Sessions in ServiceStack](https://github.com/ServiceStack/ServiceStack/wiki/Sessions) code as-is.

So, I created a base class that my service inherits from:

```
public abstract class AppServiceBase : Service
{
    //private CustomUserSession userSession;
    protected CustomUserSession UserSession
    {
        get
        {
            return base.SessionAs<CustomUserSession>();
        }
    }
}

public class CustomUserSession : AuthUserSession
{
    public string CustomId { get; set; }
} 
```

The service has the `[Authenticate]` attribute on it. In my AppHost setup, I have configured auth like this:

```
 Plugins.Add(new AuthFeature(() => new CustomUserSession(),
            new IAuthProvider[] {
            new GoogleOpenIdOAuthProvider(appSettings)    //Sign-in with Google OpenId
        })); 
```

Once the user has authenticated, the service tries to access the auth session from the base class like this:

```
var x = base.UserSession.Email; 
```

However, Email is always `null`. How can I access this value?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:45:20.130

您需要从 AuthProvider 中提取数据并在 CustomUserSession 中设置值。SocialBootstrapApi 示例中显示了一个示例

[https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Models/CustomUserSession.cs#L50](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Models/CustomUserSession.cs#L50)

覆盖 OnAuthenticated，找到 GoogleOpenIdOAuthProvider 以获取电子邮件地址。

另一个示例显示在[ServiceStack OAuth - 注册而不是登录](https://stackoverflow.com/questions/12432426)

# c# - Don't add to a list the same value

> ID：16151741
> 
> 赞同：0
> 
> 时间：2013-04-22T16:13:02.987
> 
> 标签：c#

I have a list of tickets. Each ticket belongs to a single event. I want create a list of all events from tickets. I can get this list, but the same event (value) is repeated in the list. How can I ensure that an event is only added the list once?

```
 List<int> tickets = new List<int>();

 List<Event> events = new List<Event>();

 foreach (var s in tickets)
 {
     events.Add(_context.Event.Find(s));
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:15:23.550

如果事件的顺序不重要，您可以使用`HashSet<Event>`List 来代替。如果事件已经存在于哈希集中，则不会再次添加事件。还要确保 Event 已经覆盖了比较事件实际属性的 Equals 和 GetHashCode 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:18:01.837

完整的 Linq 解决方案[`Distinct()`](http://msdn.microsoft.com/library/vstudio/bb338049.aspx)：

```
var events = tickets.Select(ticket => _context.Event.Find(ticket)).Distinct(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:15:30.887

您是否尝试过使用该[`List<T>.Contains()`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)方法？

```
foreach (var s in tickets)
{
    var event = _context.Event.Find(s);
    if (!events.Contains(event))
    {
        events.Add(event);
    }
} 
```

# javascript - 这是 JavascriptClosure 用例吗？

> ID：16151742
> 
> 赞同：0
> 
> 时间：2013-04-22T16:13:03.787
> 
> 标签：javascript, arrays, closures

我可能有初学者 Javascript 问题：

```
var countries = [
    "Bangladesh", "Germany", "Pakistan"];

function testexistence(arr, input) {

    for (var i = 0; i < arr.length; i++) {
        if (arr[i] != input) {
            alert("not exist");
            arr.push(input);
            break;
        } else {
            alert("already exist ");
        }
    }

}

testexistence(countries, "UK");
testexistence(countries, "Pakistan");
testexistence(countries, "UK"); 
```

我期望的是：当我再次为“UK”调用该函数时，它显示我“已经存在”；但这并没有发生。我不想玩“原型”或定义我自己的。我只需要一个解决方案。

我的代码中有一个用例，我必须在数组中插入一个新值，并且在接下来的循环中我必须检查该值；但我最终插入了一个现有值......

为什么我最终要插入现有值以及为什么此检查`(arr[i] != input)`失败？

***还请解释一下，为什么上面的代码不能按预期工作***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:17:17.693

您需要先搜索整个数组，然后才能确定它不存在。

```
function testexistence(arr, input) {
    for (var i = 0; i < arr.length; i++) {
        if (arr[i] === input) {
            alert("already exists");
            return; // halt the search by returning
        }
    }

    // If we're here, we never returned inside the loop, so it wasn't found.
    arr.push(input);
    alert("did not exist, now it does");
} 
```

* * *

而不是`testexistence`，我可能会命名您的函数`addUnique`或其他名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:17:07.630

尝试：

```
function testexistence(arr, input) {
    if (!~arr.indexOf(input)) {
        arr.push(input);
    }
} 
```

**演示：http:** [//jsfiddle.net/L9NhU/](http://jsfiddle.net/L9NhU/)

请注意，这`Array.indexOf`在旧浏览器中不可用，因此您可以使用 polyfill（或保持当前循环）。这是它的 MDN 文档，其中包括一个 polyfill：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:31:57.700

一方面，它**绝不是一个闭包**。

无论如何，这是[你想要的单线，对](http://jsfiddle.net/L9NhU/1/)[伊恩的回答](https://stackoverflow.com/a/16151825/575527)的修改

```
function testexistence(arr, input) {
  (!~arr.indexOf(input)) && arr.push(input);
} 
```

我们使用了一些东西：

*   `Array.indexOf`在数组中搜索您传递的第一个匹配项，如果存在则返回从零开始的值，`-1`如果不存在则返回。
*   `!~`这里是一个特例，我们测试`-1`. 值`~x`等于`-(x+1)`，这使得`-1`a `0`（假）和所有其他非零（真）。添加`!`到混合中会`-1`产生真实的价值，而其他价值则是虚假的。
*   `&&`评估它的双方。如果左边是“真实的”，则评估右边，否则不评估。它也被称为“守卫操作员”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:24:54.273

您可以使用它来代替您的：

```
function testexistence(arr, input) {

    for (var i = 0; i < arr.length; i++) {
        if (arr[i] == input) {
            alert("already exist ");
            return;
        }
    }

    //if the if part would not work, you pass to here
    alert("not exist");
    arr.push(item);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T16:22:14.320

你需要尝试这样的事情

```
var countries = ["london", "germany", "france"];

function testexistence(arr, input) {
   var isExists = false;

    for (var i = 0; i < arr.length; i++) {
        if (arr[i] == input) {
            isExists = true;
        }         
    }

    if(!isExists)
    {
        alert("Not Exists");
        arr.push(input);
    }
    else
    {
        alert("Exists");
    }
}

testexistence(countries, "UK");
testexistence(countries, "london");
testexistence(countries, "UK"); 
```

# lua - Converting table to ... and return it

> ID：16151743
> 
> 赞同：1
> 
> 时间：2013-04-22T16:13:05.283
> 
> 标签：lua, lua-table

Good day, I would like to know how to convert table to ... and return it.

```
function GetArgsNormal(...)
    return ...;
end
local a,b,c=GetArgsNormal(1,2,3); --this works
print("a b c:",a,b,c);
function GetArgsTable(t,...)
    for i,v in pairs(t)do
        ({...})[i]=v;
    end
    return ...;
end
local d,e,f=GetArgsTable({1,2,3},nil); --result: d=nil, e=nil, f=nil
print("def:",d,e,f); 
```

I tried all possible ways, which I had in my mind, but without success:(

Could anyone help me in this, please?

And yes, could you please answer instead of down-voting?!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:37:44.420

```
local d,e,f = unpack({1,2,3}); --result: d=1, e=2, f=3

function f()
   local t = {}
   -- fill table t
   return unpack(t)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T07:02:12.090

您需要小心 args 中的“漏洞”

```
function GetArgsTable(t,...)
  local argc, argv = select("#", ...), {...}
  -- #argv ~= argc
  -- unpack(argv) ~= ...

  -- assume t is array
  for i,v in ipairs(t) do
    argc = argc + 1
    argv[argc] = v;
  end

  return unpack(argv, 1, argc); -- use explicit array size
end

print(GetArgsTable({1,2}, nil,'hello', nil)) -- nil hello nil 1 2 
```

或者您可以查看 lua-vararg 库。

# prolog - 如何仅使用 get0 谓词删除 Prolog 中的多个连续空格

> ID：16151748
> 
> 赞同：0
> 
> 时间：2013-04-22T16:13:22.317
> 
> 标签：prolog

**我有一个程序，它从输入中读取一个字符串，并使用get0**和**get**谓词删除单词之间的多个空格，将它们更改为单个空格：

```
squeeze :- get0(C),    
           put(C),     
           dorest(C).  

dorest(46).   

dorest(32) :- !,       
              get(C),  
              put(C),  
              dorest(C).  

dorest(Letter) :- squeeze. 
```

这很简单，现在我有一个练习，要求 mw 创建一个**仅使用内置谓词 get0的先前程序的新版本**

我发现这个版本有些困难。

这是我个人对问题的解决方案（效果不佳）：

```
squeeze2 :- NumBlank is 0,  % At the beginning of a word the number of blank character is 0
            get0(Char),     % Read a character that could be a blank
            %put(Char),
            dorest2(Char, NumBlank).

dorest2(46, _) :- !.        % If the read character is a full stop character the program end

% Read a white space but the number of white space is 1
dorest2(32, NumBlank) :- !,
                         NumBlankUpdated is NumBlank + 1,   % Update the number of blanks
                         NumBlankUpdated < 2,               % The number of blank have to be at most 1
                         put(32),                           % Print a white space
                         get0(Char),                        % Read a character
                         dorest2(Char, NumBlankUpdated).    % Call dorest2

% Read a white space but the number of white space is > 1:
dorest2(32, NumBlank) :- !,
                         NumBlankUpdated is NumBlank + 1,   % Update the number of blanks
                         NumBlankUpdated >= 2,          % The number of blanks is >1
                         get0(Char),                % Read a character and don't print anything
                         dorest2(Char, NumBlankUpdated).    % Call dorest2

% Id the read character it is a letter (not a blank) print it
dorest2(Letter2, NumBlank) :- !,
                              put(Letter2),
                              squeeze2\. % Read an other character that could be a blank 
```

**我只使用get0**谓词来解决它的想法涉及计算空格的数量，并根据该值做不同的事情

当**一个新单词开始时，** **squeeze2**谓词被调用，因此发现它的连续空格数为 0。它从输入中读取一个字符并调用**dorest2/2**谓词。

 ******现在我将dorest2/2**谓词分为 4 种不同的情况，并使用 cut 运算符，这些情况是互斥的（如程序 if）：

1）第一种**情况**，它与**读取程序末尾对应的句号**字符（“。”字符）相关。

2）**第二种情况**，它与**读取两个单词之间的第一个空白字符**有关，因此必须通过 put 谓词打印这个单个空格。在这种情况下，会更新计数连续白色字符数的计数器。然后，读取另一个字符。

3）第三种情况：它与程序**读取第二个连续的白色字符的情况有关，在这种情况下，这个****withe**字符不被打印，另一个字符被读取，并且白色字符计数器用新的数量更新找到连续的白色字符。

 **4）第四种**情况**它与程序**读取一个不是空格或句号字符的字符的**情况有关，所以这个字符必须是一个**字母**，这意味着一个新单词正在开始。所以只需打印这个字母（通过put）并调用将连续白色字符计数器重置为0的**squeeze2**谓词并读取一个新字符

问题是在多个连续的空白字符中不起作用。

如果我执行这样的查询效果很好：

**没有非空白字符的字符串：**

```
[debug] [2]  ?- squeeze2.
|: ciao.
ciao
true. 
```

这工作得很好。

**单词之间仅包含单个白色字符的字符串：**

```
[debug] [2]  ?- squeeze2.
|: ciao.
ciao
true. 
```

这也很好用

但在这种情况下，我有一个错误：

**单词之间包含多个字符的字符串：**

```
[debug] [2]  ?- squeeze2.
|    multiple         blanks characters.
multiple 
false.

ERROR: Syntax error: Operator expected
ERROR: blanks 
ERROR: ** here **
ERROR: characters . 
```

似乎问题出在**第三种情况**下，但我不明白错误在哪里，因为这种情况在我看来很简单：如果连续白色字符的计数器> 1，则不打印任何内容并继续写入直到 a新词开始。

哪里有问题？有人可以帮助我吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:01:32.897

这里有一些代码工作，它显示了*表示*字符常量的替代方法，而不是数字代码：

```
squeeze2 :-
    get0(C),
    squeeze2(C, 0).

squeeze2(C, N) :-
    (   [C] == "."
    ->  true
    ;   (   [C] == " "
        ->  (   N == 0
            ->  put(C)
            ;   true
            ),
            get0(D),
            squeeze2(D, 1)
        ;   put(C),
            get0(D),
            squeeze2(D, 0)
        )
    ). 
```

它归结为单个字符的前瞻。

关于您的代码：问题是第一个空格匹配后的剪切

```
dorest2(32, NumBlank) :- !,  % remove this
   ... 
```

剪切删除后它起作用：

```
?- squeeze2.
|: a    b     c  .
a b c 
true . 
```******

# java - Switching between full-screen and windowed mode fail

> ID：16151752
> 
> 赞同：1
> 
> 时间：2013-04-22T16:13:37.323
> 
> 标签：java, swing, drawing, jframe, fullscreen

I'm working on a game framework inspired by XNA. Almost every day I find a new problem with this or that. Today, it's going from window mode to full-screen and back. The gist of it is:

If I start the game in windowed mode it works fine. When I go full-screen in works fine too. After switching back from full-screen something goes wrong and nothing is drawn on the screen. Going to full-screen again works fine. I just get this problem in windowed mode unless the game started in it.

I set the window this way:

```
public void setW(){
    jFrame.setVisible(false);
    if(graphicDevice.getFullScreenWindow() != null && jFrame.isDisplayable())graphicDevice.getFullScreenWindow().dispose();
    graphicDevice.setFullScreenWindow(null);
    jFrame.setResizable(false);
    jFrame.setUndecorated(false);               
    jFrame.getContentPane().setPreferredSize(new Dimension(width, height)); 
    jFrame.setVisible(true);        
    jFrame.pack();          
    graphics = (Graphics2D)jFrame.getContentPane().getGraphics();       
    fullScreen = false;
} 
```

Full-screen is set like this

```
public void setFS(){
    jFrame.setVisible(false);
    if(jFrame.isDisplayable())jFrame.dispose();     
    jFrame.setResizable(false);
    jFrame.setUndecorated(true);
    graphicDevice.setFullScreenWindow(jFrame);      
    graphicDevice.setDisplayMode(new DisplayMode(width, height, 32, 60));
    graphics = (Graphics2D)jFrame.getContentPane().getGraphics(); // graphicDevice.getFullScreenWindow().getGraphics(); does the same thing
    fullScreen = true;          
} 
```

Then I use this method to draw... deviceManager.getGraphics().draw...(actually i use an intermediary bufferImage) I use a game loop so this happens continuously.

```
public Graphics2D getGraphics(){
return graphics;
} 
```

Now if I use this method:

```
public Graphics2D getGraphics(){
if(fullScreen)
return (Graphics2D)graphics;
else
return (Graphics2D)jFrame.getContentPane().getGraphics();
} 
```

I'm sure I'm doing something wrong. Thew windowed mode works, this I know. Why does it go pear-shaped when I return from full-screen. The window just stays gray with nothing being painted on it.

However if I create a method like this:

```
public void assignGraphics(){
graphics = (Graphics2D)jFrame.getContentPane().getGraphics()
} 
```

And call it later(one game cycle passed) it fixes the problem. That's why the second mode-switching method works, since it gets Graphics from the JFrame every cycle.

Worked on the problem quite a bit since starting this question and I thing here is the real crux of it: Why can't I get the Graphics for a Window in the same cycle I leave full-screen?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T01:26:53.450

美东时间。为什么问题总是在我不看的地方。是的，问题是我的游戏循环是基于 swing.timer 的。这是一个菜鸟的错误，事实上，我花了将近一周的时间才弄明白，这让我的自尊心沉重。

显然，许多摇摆操作都在 EDT 上进行，使用它进行更新和绘图不仅堵塞了吸盘，而且导致了这个问题的问题。

现在我将在主线程中使用 while() 进行可变时间步长循环。（即使使用只有 update() 和 draw() 的基本 while 循环，问题也消失了）

在开始我的程序之前，应该至少阅读一篇关于游戏循环的文章。生活和学习（浪费一周的时间）。

# c# - C# - show error window instead of interruption by exception

> ID：16151753
> 
> 赞同：-4
> 
> 时间：2013-04-22T16:13:38.877
> 
> 标签：c#, .net, sql

So I am trying to enclose these 2 queries into `try - catch` so if the username/password don't exist then the exception is caught and only an error message window is shown, instead of breaking the whole application:

```
try
{
   command.CommandText = "SELECT username FROM users WHERE username='" + username + "'";
   reader = command.ExecuteReader();
   reader.Read();
   string myUsername = reader.GetString(0);
   values[0] = myUsername;

   command.CommandText = "SELECT password FROM users WHERE username='" + username + "'";
   reader = command.ExecuteReader();
   reader.Read();
   string myPassword = reader.GetString(0);
   values[1] = myPassword;
}
catch (Exception)
{
   MessageBox.Show("Wrong username or password!");
} 
```

I know the logic of checking for the correct username and it's particular password is not correct but I am gonna fix that later. I now want just to know how to show the message instead of breaking the whole process.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:20:10.743

首先，不要将文本直接嵌入到您的 SQL 命令中，否则您将面临 SQL 注入攻击。
其次，您可能不需要两个查询；第一个实际上只是检查用户名的存在。使用类似的东西

```
select password from users where username = @username 
```

（并使用参数提供用户名）

然后，与其依靠异常来捕获错误登录，不如检查`Read()`调用的结果；false 应该表示没有行（因此没有匹配的用户名/密码组合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:16:24.610

如果我理解正确，您可以通过将 catch 更改为以下内容来显示异常消息：

```
catch (Exception ex)
{
   MessageBox.Show("The Exception Message: " + ex.Message);
} 
```

但是，您可能不想显示原始消息。我建议显示一条您可以控制的消息：

```
catch (Exception ex)
{
   // log the exception
   // Logger.Log(ex);

   MessageBox.Show("Couldn't find username: " + username);
} 
```

旁注：[使用参数化查询！](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:47:16.107

要回答您的实际问题，将代码放入`try catch`块中会按照您的意愿进行，也就是说它将捕获错误并执行`catch`.

我希望您的困惑在于，在 Visual Studio 的调试模式下运行代码时，调试器无论如何都会停止错误以向您突出显示错误。当您从可执行文件运行代码时，这不会发生。

让您的程序在不因错误而停止的情况下运行您的代码（顺便说一句，我并不是说这是一个好主意）

*   单击 Visual Studio 顶部的“调试”菜单
*   选择“例外”
*   取消选中“用户处理的”“公共语言运行时异常”复选框。

这应该抑制错误以模拟从可执行文件运行，并且您应该看到您的消息框。

# html - Aligning 2 items in the same line within a div

> ID：16151755
> 
> 赞同：0
> 
> 时间：2013-04-22T16:13:41.800
> 
> 标签：html, css

I have the following HTML and CSS. I am trying to have the IMG and then the BUTTON in the same line one next to the other. But they keep coming out one on top of the other.

```
<div class="cartAddingButton">
    <img class="cartIcon" src="../BG/cartIcon1.png">
    <form name="cartAdding" action="../cart/cartAdding.php" method="post">
    <input type="button" value="<?php echo $lang['ADDTOCART']; ?>" class="addToCart" onclick="addtocart(<?php echo $itemId; ?>)" />
    </form>
</div> 
```

CSS:

```
.cartAddingButton {
text-align: right;
vertical-align: middle;
display: inline-block;

}
.cartIcon {
float: right; }
.addToCart {
float: right; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:16:47.410

那是因为按钮在一个`<form>`简单的[块级元素](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)内..您可以尝试更改表单的显示值，`display: inline-block;`尽管记住它的宽度只会与其内容一样宽，就像[内联格式中的元素一样上下文](http://www.w3.org/TR/CSS2/visuren.html#inline-formatting)。

```
form {
display: inline-block;
} 
```

[**jsFiddle**](http://jsfiddle.net/zPdSC/1/)

# sql-server - SSIS 批量插入不起作用

> ID：16151760
> 
> 赞同：2
> 
> 时间：2013-04-22T16:13:52.613
> 
> 标签：sql-server, sql-server-2008, ssis, bulkinsert

我正在尝试在 SQL Server 的 SSIS 包中执行批量插入任务，但在尝试打开文件或尝试查找文件时显示错误。在网上搜索错误可能是：

**路径不正确：**不是这个，我尝试过使用普通路径和 UNC 路径，如果我在资源管理器中复制路径，它会打开文件。

**BD 用户没有权限：**执行任务的用户是我的具有管理员权限的用户，DB 用户是 BulkAdmin 和 SysAdmin。

UNC 路径的错误是：

```
SSIS package "BulkInsert.dtsx" starting.
Error: 0xC002F304 at Bulk Insert Task, Bulk Insert Task: An error occurred with the following error message: "Could not bulk insert because file '\\MyMachine\D$\Pro\Pro Mig\Mig\Filess\XXXXXXX130309.TXT' could not be opened. Operating system error code 53(The network path was not found.).".
Task failed: Bulk Insert Task
SSIS package "BulkInsert.dtsx" finished: Success. 
```

正常路径的错误是：

```
SSIS package "BulkInsert.dtsx" starting.
Error: 0xC002F304 at Bulk Insert Task, Bulk Insert Task: An error occurred with the following error message: "Could not bulk insert because file 'D:\Pro\Pro Mig\Mig\Filess\XXXXXXX130309.TXT' could not be opened. Operating system error code 3(The system cannot find the path specified.).".
Task failed: Bulk Insert Task
SSIS package "BulkInsert.dtsx" finished: Success. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T21:29:48.467

要使用 SSIS 2008 批量插入任务，源文件必须与目标数据库位于同一服务器上。如果您在源文件位于远程服务器上时尝试使用任务，您将收到这些错误。

# php - PHP：从抽象类构造函数中调用“设置”抽象方法；好还是坏的设计？

> ID：16151761
> 
> 赞同：2
> 
> 时间：2013-04-22T16:13:53.087
> 
> 标签：php, design-patterns, constructor, abstract-class

我正在尝试确定我正在使用的类结构的设计模式，但我对实现类设置的最佳方式感到困惑。

一种方法是在抽象类的构造函数中调用抽象设置函数，另一种是在扩展抽象类的类中重写构造函数。

几个（人为的和简化的）例子来概述我的想法：

***调用抽象方法***

```
<?php

abstract class VehicleAbstract implements VehicleInterface
{
    protected $_wheels;

    private $_engine;

    public function __construct(EngineInterface $engine)
    {
        $this->setupWheels();

        $this->_engine = $engine;
        $this->_engine->setWheelsToDrive($this->_wheels);
    }

    public abstract function setupWheels();
}

class Car extends VehicleAbstract
{
    public function setupWheels()
    {
        $this->_wheels = array(
            "frontL",
            "frontR",
            "backL",
            "backR"
        );
    }
} 
```

**优点：**

*   在实现具体类时，很明显需要创建方法“setupWheels”。
*   只有设置代码需要写在“setupWheels”方法中。

**缺点：**

*   在实现时，如果不查看父类，“setupWheels”需要做什么可能不会立即显而易见。
*   新查看扩展类的人可能没有意识到在创建类时调用了该方法。

* * *

***重写构造函数***

```
<?php

abstract class VehicleAbstract implements VehicleInterface
{
    protected $_wheels;

    private $_engine;

    public function __construct(EngineInterface $engine)
    {
        $this->_engine = $engine;
        $this->_engine->setWheelsToDrive($this->_wheels);
    }
}

class Car extends VehicleAbstract
{
    public function __construct(EngineInterface $engine)
    {
        $this->_wheels = array(
            "frontL",
            "frontR",
            "backL",
            "backR"
        );

        parent::__construct($engine);
    }
} 
```

**优点：**

*   在设置车轮数据时，当查看具体类时立即显而易见。

**缺点：**

*   在扩展抽象类时，可能会忽略需要设置车轮数据。
*   在实现新的构造函数时需要记住调用父构造函数。
*   需要在新构造函数中的正确位置调用父构造函数。

# c - C initializing array C2059

> ID：16151767
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:14:18.520
> 
> 标签：c, arrays, initialization

What is wrong with this code:

```
Vertex *transformIntoVertex(float *v, int size){
    int i;
    float x_axis = x_0 + (x_Max/size);
    Vertex *axisVertices2[9];

    for(i = 0; i < size; ++i){
        axisVertices2[i] = {{ 0.0f, 0.0f, 0.0f, 1.0f }, { 1.0f, 1.0f, 1.0f, 1.0f }};
    }       
    return axisVertices2;    }

typedef struct
{
    float XYZW[4];
    float RGBA[4];
} Vertex; 
```

I am getting this error:

```
 error C2059: syntax error : '{' 
```

The error is on this line:

```
axisVertices2[i] = {{ 0.0f, 0.0f, 0.0f, 1.0f }, { 1.0f, 1.0f, 1.0f, 1.0f }}; 
```

Can you suggest me a macro to fill in with my custom values, i must use constants cannot use variables

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:16:09.283

这条线是错误的

```
axisVertices2[i] = {{ 0.0f, 0.0f, 0.0f, 1.0f }, { 1.0f, 1.0f, 1.0f, 1.0f }}; 
```

赋值`{}`只能在变量的声明阶段完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:26:17.057

你会想做这样的事情。请注意，我正在使用`malloc`为数组创建空间。这将允许我们从这个函数返回值。我还使用了一种有效的方法来分配给`axisVertices2`.

但是，如果您使用它，`transformIntoVertex`则负责调用`free`此函数返回的指针的调用者。

```
Vertex *transformIntoVertex(float *v, int size){
    int i;
    float x_axis = x_0 + (x_Max/size);
    Vertex *axisVertices2 = malloc(sizeof(Vertex) * size);

    for(i = 0; i < size; ++i){
        axisVertices2[i].XYZW[0] = 0.0;
        axisVertices2[i].XYZW[1] = 0.0;
        axisVertices2[i].XYZW[2] = 0.0;
        axisVertices2[i].XYZW[3] = 1.0;

        axisVertices2[i].RGBA[0] = 1.0;
        axisVertices2[i].RGBA[1] = 1.0;
        axisVertices2[i].RGBA[2] = 1.0;
        axisVertices2[i].RGBA[3] = 1.0;
    }

    return axisVertices2;
} 
```

从技术上讲，你也可以做这样的事情，但我怀疑你会看到很多性能提升。我认为第一个版本更明显，至少在这一点上。

```
Vertex *transformIntoVertex(float *v, int size){
    int i;
    float x_axis = x_0 + (x_Max/size);
    Vertex *axisVertices2 = malloc(sizeof(Vertex) * 9);

    static const Vertex default_value = {{0.0, 0.0, 0.0, 1.0}, {1.0, 1.0, 1.0, 1.0}};

    for(i = 0; i < size; ++i){
        memcpy(&axisVertices2[i], &default_value, sizeof(Vertex));
    }

    return axisVertices2;
} 
```

# jquery - 用 jQuery 慢慢地 removeAtt

> ID：16151769
> 
> 赞同：2
> 
> 时间：2013-04-22T16:14:29.587
> 
> 标签：jquery, css

我正在使用 jQuery 来选择和操作 DOM 中的 SVG 元素。这很棘手，因为我可以添加或删除将它们视为属性的类。

是否可以使用 jQuery 的动画效果删除属性？

```
$('rect').mouseover(function(){    
    $(this).attr('class','selected');
});

$('rect').mouseout(function(){
    $(this).removeAttr('class');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:16:11.840

使用***[slideUp()](http://api.jquery.com/slideUp/)***或***[slideDown()](http://api.jquery.com/slideDown/)***

```
$(this).slideUp().removeAttr('class'); 
```

## 更新：

```
$(this).slideUp().removeAttr('class').slideDown(); 
```

为此，您将看到更多效果

参考**[现场演示](http://jsfiddle.net/SivaCharan/UDWJE/)**

你仍然可以做更多的效果，现在我有了这个想法

## 更新 2：

您也可以使用***[fadeIn()](http://api.jquery.com/fadeIn/)***和***[fadeOut()](http://api.jquery.com/fadeOut/)***。

```
$(this).fadeOut('slow').removeAttr('class').fadeIn('slow'); 
```

参考**[现场演示 - 2](http://jsfiddle.net/SivaCharan/UDWJE/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:26:20.323

奇怪的是，.addClass、.removeClass .toogleClass 在这种情况下不起作用。如果那是因为我使用的是 SVG 还是什么，我还需要阅读。

不过，我通过 CSS 接近了我想要的东西：

```
.selected {
    fill: orange;
    -moz-transition: fill easeout .5s;
} 
```

谢谢您的帮助。

更新：

这个链接也很有帮助：[jQuery SVG，Why can't I addClass?](https://stackoverflow.com/questions/8638621/jquery-svg-why-cant-i-addclass)

# sql-server-2008 - 我可以将 SQL Server 登录权限限制为只有一个 sql server 用户吗

> ID：16151773
> 
> 赞同：-2
> 
> 时间：2013-04-22T16:14:31.957
> 
> 标签：sql-server-2008, security

我有数据库，我会将其发送给许多客户。

我设置了 SQL Server 用户，但我可以限制其他 SQL Server 登录（Windows 身份验证），例如

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:17:19.740

通过限制，我认为它的意思是“不允许”。看看登录触发器。更多信息可以在这里找到：

[http://msdn.microsoft.com/en-us/library/bb326598.aspx](http://msdn.microsoft.com/en-us/library/bb326598.aspx)

有些事情你可以用它们做，也不能做，但这是一个相当开放的问题，所以你会得到一个开放的答案。几乎所有与限制登录有关的事情都必须通过那里发生。

但是请记住，系统管理员登录最终将能够做它想做的事情 - 例如关闭触发器。

# php - Allow creation of folder on apache2 in Ubuntu Server

> ID：16151775
> 
> 赞同：0
> 
> 时间：2013-04-22T16:14:42.213
> 
> 标签：php, apache, ubuntu, file-io

I'm creating a site which I'm going to host on an Ubuntu Server. I have a user registration form on my site, which creates a user and a folder for that user (if filled out correctly). The form in handled by PHP and I'm running Apache 2 on the server. When I run the code on my laptop the folder is created, but when I run the same code on the server the folder is not there. I guess that it has something to do with permisssion. How can I tell apache that the code should have write permission in a specific folder called "users" located in /var/www/mysite/public/users/ ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:20:03.423

尝试使用提供文件夹权限的 chmod 命令。就像是

```
chmod 777 -R foldername 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T17:04:18.807

如果安全不是问题，我建议：

```
chmod 775 -R /var/www/
chown -R [your_user]:www-data /var/www/ 
```

所以apache2（www-data）和你都可以编辑/var/www（或者/var/www/html，如果这是你的文件夹）里面的文件夹和文件。

请注意，这可能与 git 和其他捕获文件夹权限的工具有问题（例如，使用 git，您可能会使用 775 提交文件）。

# view - Drupal7 视图：按范围内的日期分组

> ID：16151776
> 
> 赞同：0
> 
> 时间：2013-04-22T16:14:46.173
> 
> 标签：view, drupal-7

随着时间的推移创建事件视图。有些事件是一天的事件 - 有些会持续数天。有些是重复事件。我想做的是创建一个视图，显示第 1 天的所有事件，然后显示第 2 天的所有事件，依此类推。

例如：

```
Event 1 - happens every Monday in May
Event 2 - happens the first full week of May - 5/5-5/11
Event 3 - happens Tuesday May 7th 
```

所以视图会显示：

```
Monday, May 6th
 - Event 1
 - Event 2

Tuesday May 7th
 - Event 2
 - Event 3

Wednesday May 8th
  - Event 2 
```

等等。关于如何分组创建这个的任何建议？还是我需要更改文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:37:27.400

使用 Drupal 日历：[http ://drupal.org/project/calendar](http://drupal.org/project/calendar)

它会在几天、几周、几个月等时间内自动创建视图。

# php - When and how to insert data into DB on a Joomla page

> ID：16151779
> 
> 赞同：0
> 
> 时间：2013-04-22T16:15:04.710
> 
> 标签：php, model-view-controller, joomla

I'm altering an existing Joomla 2.5 component and I wish to add data to a specific table (already existent upon install) to a couple custom columns. So, I have this view (_quizInfo.php on the quiz view folder) code which consists of a form that displays some information (retrieved from the DB) and to proceed upon a checkbox being checked to another view (the quiz view). (Basically, it's a couple JS lines enabling the "proceed" button). Heres the (simplified) code:

```
<?php defined( '_JEXEC' ) or die( 'Restricted access' ); ?>

<script type="text/javascript" language="javascript">

function proceed()
{
    check = document.getElementById('checkToProceed') ;
    proceedButton = document.getElementById('proceedButton') ;

    if (check.checked) {
        proceedButton.disabled = false ;
    } else {
        proceedButton.disabled = true ;
    }
}

</script>

<form name="quiz_info" method="post">

<?php 
echo '<div class="items-row"><div class="item">';

    echo '<h2>' . JText::sprintf('YOU_HAVE_CHOSEN_TO_TAKE_QUIZ', '"'.$this->quiz- >title.'"') . '</h2>' ;

echo '<ul>' ;

...

echo '</ul>' ;
$option = JRequest::getCmd('option');

$link =  JRoute::_('index.php?option='. $option . '&controller=quiz&layout=default') ;

echo '<p><input type="checkbox" id="checkToProceed" name="checkToProceed" onclick="proceed();" /><label for="checkToProceed">' . JText::_('I_HAVE_READ_AND_UNDERSTOOD') . '</label></p>' ;
echo '<input id="proceedButton" name="proceedButton" disabled="true" value="' . JText::_('PROCEED_TO_QUIZ') . '" type="submit" />' ;

    echo '</div></div>';
?>

<input type="hidden" name="option" value="com_jquarks" />
<input type="hidden" name="id" value="<?php echo $this->quiz->id ; ?>"/>
<input type="hidden" name="task" value="showQuiz" />
<input type="hidden" name="view" value="quiz" />
<input type="hidden" name="layout" value="default" />
<?php echo JHTML::_( 'form.token' );  ?> 
```

Now, I've added a form to this page so a user can fill out his/her data and then proceed (I need this data at this step to be stored), so now besides the code already showed I've added the following lines on the form tag:

```
//Added
echo '<li><p>' . JText::sprintf('Before proceeding you must fill the form bellow:') . '</p></li>' ;

echo '<div style="width: 50%; border: 1px solid; padding: 15px;"><form><div style="width: 100px">Full Name: </div><input type="text" name="fullname" style="width: 100%;"><br/><div style="width:100px"><br>ID document: </div><input type="text" name="iddoc" style="width: 100%;"></form></div>';
//END Added 
```

I've noticed that the form is of POST type but there is no action defined. The quiz view then stores all the necessary data before displaying the quiz (on the intended table) but I don't know how to proceed to store the _quizInfo view form data in the DB since it apparently isn't supposed to store anything. The "session" is only stored (on the corresponding table) after clicking proceed and the quiz view is called.

Can anyone point me in the right direction? Not really comfortable with the way Joomla handles DB calls.

-Should I capture the POST data on the default.php file of the quiz view?

-Should I store the form data immediately?

Any help would be greatly appreciated.

Best Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:18:13.427

好吧，我最终找到了我的问题的答案，我将把它留给任何需要它的人：

任何作为 POST 或 GET 传递的数据，即使没有明确的目标/动作定义（因为我们正在使用 MVC），也可以使用 JRequest::getVar() 或 JRequest::get() 来访问，如此处的文档：http: //docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest:: [getVar](http://docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest::getVar)

# asp.net-web-api - Advice on implementing odata for non-EF entities in asp webapi

> ID：16151789
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:15:31.623
> 
> 标签：asp.net-web-api, odata

We are planning to use oData as a entity standard for rest api layer. The data provided by web api are taken from various subsystems and layers of cache(memcache) involved. My fear is how the basic entity model without EF can support the oData implementation of pagination and filtering. I want the ability to restrict the retrieval record limit at the underlying susbsytem level not at the api controller level. Any pointers would be useful. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:42:33.547

我写了一篇关于对非 IQueryable 后端进行 OData 查询的博文。我选择了 HQL 作为目标查询语言。[http://blogs.msdn.com/b/webdev/archive/2013/02/25/translating-odata-queries-to-hql.aspx](http://blogs.msdn.com/b/webdev/archive/2013/02/25/translating-odata-queries-to-hql.aspx)

这应该可以帮助您了解使用 Web API 支持 OData 查询是多么容易。

# jquery - jQuery Mobile Cannot read 'options' of undefined on trigger('pagecreate')

> ID：16151790
> 
> 赞同：1
> 
> 时间：2013-04-22T16:15:32.137
> 
> 标签：jquery, mobile, jquery-mobile

I am loading an external page into a div on my jqm page and in order to enhance it with the jQuery mobile styles I call trigge('pagecreate') on the div, this works from the console.

```
 $('#search-results-page').load('searchResults.php',{options:$.encodeJSON(data.options),search:$.encodeJSON(data.search)},function () {
        $(this).trigger('pagecreate',{options:{}});
        $.mobile.changePage('#search-results-page');
    }); 
```

It works if I put my code in a try catch block but if I don't then I get this error:

Uncaught TypeError: Cannot read property 'options' of undefined jquery.mobile-1.3.1.js:7535

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-10T10:42:01.127

我收到了这个错误，这是因为我使用的是 jQuery 2.0.0

尝试使用 jQuery 1.9.1

# emacs - 使用 Emacs 访问远程标签文件

> ID：16151794
> 
> 赞同：2
> 
> 时间：2013-04-22T16:15:36.147
> 
> 标签：emacs, ctags, tramp

我使用 Emacs（在 OSX 中本地运行）在 Ubuntu VM 上编辑文件（主要是 python 代码）。我在本地运行 VM，但也访问 EC2 上的代码。我最近了解了 exuberant-ctags，并能够在我的本地 VM 上成功创建标签文件。标签文件相当大（30 MB）。我正在通过 ssh 使用 tramp 访问 Emacs 中的标签文件。我的第一个问题是我应该期望访问需要很长时间吗？加载标签文件需要 Emacs 几分钟，即使它从运行在同一台机器上的 VM 中提取文件。

我遇到的第二个问题是，在加载标签文件后，Emacs（同样，在 OSX 中本机运行）认为代码库在我的本地驱动器上，而不是在 VM 的驱动器上，因此给了我一个文件未找到错误. 因此，如果函数 X 在文件 Y 中定义，我如何让 Emacs 确定文件 Y 在远程机器上，而不是在我的本地路径中？

谢谢！

# php - AWS PHP SDK 2 (aws.phar) 在 xampp 中不起作用

> ID：16151796
> 
> 赞同：0
> 
> 时间：2013-04-22T16:15:38.300
> 
> 标签：php, amazon-web-services, xampp, phar

我似乎无法让 aws.phar 在我的本地 xampp 上工作（在 Ubuntu 下）。我的例子很简单：

```
<?php 

error_reporting(-1);
ini_set('display_errors', 'on');

require_once 'aws.phar';

use Aws\Common\Enum\Region;

$config = array(
    'key'    => 'xxxxxxx',
    'secret' => 'xxxxxxx',
    'region' => Region::US_EAST_1
);

?> 
```

我得到以下输出：

```
?9??
Fatal error: Class 'Aws\Common\Enum\Region' not found in /var/www/Test/test.php on line 14 
```

请注意第一行仅输出`?9??`. 这是`require_once 'aws.phar';`线路造成的。因此，处理 aws.phar 文件似乎有问题

aws.phar 文件是从 amazon 下载的最新 SDK 版本。这个相同的 aws.phar 文件在服务器上没有问题，但由于某种原因不在我的 xampp 中。

我的 xampp 版本是 1.7.7，它在 Ubuntu 11.10 下运行。PHP 版本是 5.3.8。我没有注意到我的 xampp 安装有任何其他问题。其他一切工作正常。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:13:43.667

好吧，我不明白我的 xampp 安装出了什么问题。我刚刚安装了最新的 xampp 1.8.1，它解决了这个问题。我试图了解我的 xampp 配置有什么不同，但没有发现任何区别......确实很奇怪.. aws.phar 现在可以正常工作。

# c#-3.0 - C#中私有无参数构造函数的目的是什么

> ID：16151799
> 
> 赞同：4
> 
> 时间：2013-04-22T16:15:47.840
> 
> 标签：c#-3.0

我刚刚收到Jon Skeet 在邮件中的*C# in Depth*并且没有关注第 7-8 页的讨论。

> 为了新的基于属性的初始化，我们现在有一个私有的无参数构造函数。（第 8 页）

我不清楚基于属性的初始化如何需要无参数的构造函数，如果这就是“为了”所暗示的。

```
class Product
{
   public string Name { get; private set;}
   public decimal Price { get; private set;}
   public Product (string name, decimal price)
   {
     Name = name;
     Price = price;
   }
   Product(){}
   .
   .
   .
} 
```

目的是`Product(){}` 什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T16:17:56.610

这段代码：

```
Product p = new Product { Name = "Fred", Price = 10m }; 
```

相当于：

```
Product tmp = new Product();
tmp.Name = "Fred";
tmp.Price = 10m;
Product p = tmp; 
```

所以仍然需要无参数构造函数——它只是在示例代码中的类中调用，所以它可以是私有的。

这并不是说*所有*的对象初始化器都需要一个无参数的构造器。例如，我们可以：

```
// Only code within the class is allowed to set this
public string Name { get; private set; }
// Anyone can change the price
public decimal Price { get; set; }

public Product(string name)
{
    this.Name = name;
} 
```

然后像这样在任何地方使用它：

```
Product p = new Product("Fred") { Price = 10m }; 
```

当然，本书后面会有更多细节（第 8 章 IIRC）。

# jquery - jQuery 可使用多个 tbody 进行排序

> ID：16151800
> 
> 赞同：4
> 
> 时间：2013-04-22T16:15:49.093
> 
> 标签：jquery, jquery-ui, html-table, jquery-ui-sortable, tablerow

我有一张有多个`tbody`. 如何为每个制作标题`tbody`？这是怎么做的？我使用 jquery ui 可排序。我如何确定每个的标题`tbody`不可排序？现在我正在触发 sortable with `$("#sortable > tbody").sortable({});`。

```
<table>
    <thead>
        <tr>
            <th>Col1</th>
            <th>Quantity</th>
        <tr>
    </thead>
    <tbody>
        <tr>
            <th scope="rowgroup">Col1</th>
            <th>100</th>
        <tr>
        <tr>
            <td>Col1</td>
            <td>20</td>
        <tr>
        <tr>
            <td>Col1</td>
            <td>30</td>
        <tr>
        <tr>
            <td>Col1</td>
            <td>50</td>
        <tr>
    </tbody>
    <tbody>
        <tr>
            <th scope="rowgroup">Col1</th>
            <th>100</th>
        <tr>
        <tr>
            <td>Col1</td>
            <td>20</td>
        <tr>
        <tr>
            <td>Col1</td>
            <td>30</td>
        <tr>
        <tr>
            <td>Col1</td>
            <td>50</td>
        <tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T17:37:22.260

你有有趣的结构。

我假设您希望行只能在它们自己的内部进行排序`<tbody>`，**不包括包含`<th>`元素**的行。

幸运的是，jQuery 有`:has()`

```
$("#sortable > tbody").sortable({
    items: 'tr:has(td)'
}); 
```

或`tr:not(:has(th))`，但似乎效率较低（只是猜测）

演示：http: [//jsfiddle.net/terryyounghk/Bs2jV/](http://jsfiddle.net/terryyounghk/Bs2jV/)

参考：[http ://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)

此外，您可以添加`connectWith: 'tbody'`，以防万一您希望将行添加`droppable`到表中的任何行`<tbody>`。

如：

```
$("#sortable > tbody").sortable({
    items: 'tr:has(td)',
    connectWith: 'tbody'
}); 
```

请评论您所追求的结果。谢谢。

# javascript - 是否有用于查询评论节点的 DOM API？

> ID：16151813
> 
> 赞同：9
> 
> 时间：2013-04-22T16:16:40.913
> 
> 标签：javascript, html, dom

我有一个包含调试注释的文档，如下所示：

```
<!--SERVER_TRACE {...}--> 
```

有没有办法查询 DOM 来访问这个节点？我正在寻找一个普通的 JavaScript 解决方案，没有任何库的帮助。

我的第一个想法是首先深入搜索 DOM，并将找到的节点与评论的节点类型值进行比较，`Node.COMMENT_NODE`. 有没有更简单的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T16:42:45.260

有`TreeWalker`API：

```
var tw = document.createTreeWalker(document, NodeFilter.SHOW_COMMENT, null, null),
    comment;
while (comment = tw.nextNode()) {
    // ...
} 
```

IE8 及更低版本不支持此功能。

评论中的 TJ 提供了[规范的链接](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html)。我总是只使用 TreeWalkers，但在你的情况下 a`NodeIterator`也很好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T16:21:11.287

`nodeType`核心属性允许您区分节点类型。在这种特殊情况下，8 代表评论。因为他们没有选择器，你需要遍历他们的父母才能得到他们（这很糟糕，我知道）。以下代码为您过滤掉它们：

```
$("*").contents().filter(function(){
    return this.nodeType == Node.COMMENT_NODE;
}) 
```

还有我自己的 jQuery-less 版本，因为有些人没有它：

```
function getAllComments() {
    var t = [],
        recurse = function (elem) {
            if (elem.nodeType == Node.COMMENT_NODE) {
                t.push(elem);
            };
            if (elem.childNodes && elem.childNodes.length) {
                for (var i = 0; i < elem.childNodes.length; i++) {
                    recurse(elem.childNodes[i]);
                };
            };
        };
    recurse(document.getElementsByTagName("html")[0]);
    return t;
}; 
```

如果您想在特定节点上搜索，请将`document.getElementsByTagName`调用重新绑定到您选择的变量。

**编辑**：[小提琴](http://jsfiddle.net/JCDnh/)演示使用，由[Jason Sperske](https://stackoverflow.com/users/16959/jason-sperske)完成！

# python - Qt: Lists of user defined objects

> ID：16151818
> 
> 赞同：0
> 
> 时间：2013-04-22T16:16:49.477
> 
> 标签：python, qt

I want to use Qt to provide a graphical interface to a collection of user defined objects. For example I may have the following python class

```
class Person(object):
    def __init__(self, name, age):
        self.name = name
        self.age = age 
```

and a linked list of instances

```
people = [Person('John', 60), Person('Laura', 33)] 
```

I now want to use Qt to present a browsable list of the elements in `people`. Perhaps I want to allow certain information to be displayed in various text boxes when the user clicks on the names of people in this list.

The Qt documentation contains the example of an [address book](http://doc.qt.digia.com/4.7/tutorials-addressbook.html) which is pretty good match to my own case, but there are two crucial things missing from this tutorial

1.  In the address book tutorial the actual data (which in this case are the addresses of various persons) is stored in a QMap. Each name and address is represented as a QString. The QMap maps names to addresses. This is fine for that simple example, but I want to wrap a Qt interface around my *own* data. How is this done?
2.  The address book does not show how to display a list of existing address book entries.

I think the notion of the model/view architecture is relevant to this so I have read the [model/view](http://qt-project.org/doc/qt-4.8/model-view-programming.html) documentation. This documentation seems to strongly emphasize the use of Qt built-in container classes. This is fine but in the end I want to wrap this around my own data structures and I have not found a an explanation of how to do this.

QUESTIONS:

1.  How do I write code to expose my own pre-existing data through a Qt list or other graphical interface?
2.  The documentation on the model/view system is really confusing. How does Qt expect the data and associated viewable classes to be organized?

I am dedicated to understanding this and improving the documentation for others. If this thread attracts attention and useful information I will attempt to have it properly archived on the Qt webpage.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:28:12.507

我从未使用过 Python，但我认为该端口保留了 Qt 执行 MVC 的基本方式。在这种情况下，我不确定 Qt 的文档有什么需要改进的地方，尤其是[这里](http://qt-project.org/doc/qt-5.0/qtcore/qabstractlistmodel.html#details)和`QListView` [文档](http://qt-project.org/doc/qt-5.0/qtwidgets/qlistview.html)中。在 Qt 的 MVC 中，您可以随意使用*任何您想要*的作为保存数据的底层数据结构。您提供的——这是关键——是基本功能（纯虚拟 in `QAbstractListModel`），它告诉 QListView 如何访问以及在需要时修改您的数据。您还需要实现一个基本功能`rowCount`，这是不言自明的。

当您在`QAbstractListModel`子类中实现这些时，只需使用`QListView::setModel`为 设置模型`QListView`，一切都应该正常工作。同样，我给您的是 C++，但我希望您可以相当直接地将其转换为 Python-Qt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T19:33:07.600

下面的代码做我想要的。我使用 Qt Designer 制作了一个包含以下元素的 ui

*   firstNameLineEdit - QLineEdit：在这里输入一个人的名字。
*   lastNameLineEdit - QLineEdit：在此处输入一个人的姓氏。
*   addPersonButton - QPushButton：按下此按钮可添加新的 Person 对象。从行编辑中检索名字和姓氏。
*   displayButton - QPushButton：将所有现有 Person 实例的列表打印到控制台以进行调试
*   listView - QListView：显示 Person 对象名称的视图

现在代码...

```
import PyQt4.QtCore as QtCore
import PyQt4.QtGui as QtGui
import PyQt4.uic as uic
import sys

class Person(object):
    def __init__(self, firstName, lastName):
        self.firstName = firstName
        self.lastName = lastName

class MyWidget(QtGui.QMainWindow):
    def __init__(self, people):
        QtGui.QMainWindow.__init__(self)
        uic.loadUi('MyWidget.ui', self)
        self.people=people
        self.addPersonButton.clicked.connect(self.addPerson)
        self.displayButton.clicked.connect(self.display)

        self.model = simpleModel(self.people)
        self.listView.setModel(self.model)

        self.show()

    def display(self):
        for i,p in enumerate(self.people):
            print "Person %i: %s %s"%(i, p.firstName, p.lastName)

    def addPerson(self):
        firstName = str(self.firstNameLineEdit.text())
        lastName = str(self.lastNameLineEdit.text())
        p = Person(firstName, lastName)
        self.model.insertRow(p)

class simpleModel(QtCore.QAbstractListModel):
    def __init__(self, dataList, parent=None):
        super(simpleModel, self).__init__(parent)
        self.list = dataList

    def rowCount(self, parent=QtCore.QModelIndex()):
        return len(self.list)

    def insertRow(self, data, parent=QtCore.QModelIndex()):
        self.beginInsertRows(parent, self.rowCount(), self.rowCount())
        self.list.append(data)
        self.endInsertRows()

    def data(self, index, role):
        if role == QtCore.Qt.DisplayRole:
            person = self.list[index.row()]
            return QtCore.QVariant("%s %s"%(person.firstName,person.lastName))
        elif role == QtCore.Qt.UserRole:
            person = self.list[index.row()]
            return person
        return QtCore.QVariant()    

def main():
    people=[Person('John','Doe')]
    app = QtGui.QApplication(sys.argv)
    ex = MyWidget(people)
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

# c# - 使用 C# 连接数据库的好方法

> ID：16151821
> 
> 赞同：2
> 
> 时间：2013-04-22T16:16:55.710
> 
> 标签：c#, mysql, database, database-connection, connection-string

祝大家好日子，

我是编程新手，我正在构建一个简单的程序。只需按钮并显示结果。这就是我连接数据库的方式。我使用 MySQL.data.dll 并将其添加为参考。

```
string connString = "Server=localhost;database=super;uid=root;password=root";
MySqlConnection conn = new MySqlConnection(connString);
MySqlCommand command = conn.CreateCommand();
command.CommandText = "SELECT * FROM people WHERE idPeople=1";
conn.Open();
// get data
conn.Close() 
```

还有什么其他方法可以连接到数据库，也许是一种好的做法，一种更好的方法。如果您能帮助我提高我的编程水平，那就太好了。对不起，如果你觉得这个问题很愚蠢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:32:11.487

这是在正确的轨道上，但你错过了几个重要的点：

1.  您没有正确关闭连接。如果您的 sql 语句引发异常，您将永远无法到达 .Close() 调用。根据您的数据库类型及其配置方式，这可能会导致您的数据库服务器的可用连接最大化，并有效地将您自己锁定在您自己的数据库之外。
2.  “idPeople=1”中的“1”从何而来？构建包含像“1”这样的参数数据的查询有正确的方法和错误的方法。确保您以正确的方式进行操作。
3.  “SELECT *”被认为是错误的形式......更好地指定列列表。

这是一个解决所有这些问题的示例：

```
//often this will loaded from a config file
string connString = "Server=localhost;database=super;uid=root;password=root";

string sql = "SELECT <column list> FROM people WHERE idPeople= @idPeople";
using (var cn = new MySqlConnection(connString))
uinsg (var cmd = new MySqlCommand(sql, cn))
{
    cmd.Parameters.Add("@idPeople", MySqlDbType.Int32).Value = 1;

    conn.Open();
    //get data
} 
```

你会看到有人告诉你使用 ORM，比如 NHibernate、linq-to-sql、Entity Framework 等。我倾向于认为手动编码和调优 sql 仍有一席之地，而且我不花太多钱注意他们。[不过，像Dapper](https://code.google.com/p/dapper-dot-net/)这样的轻量级数据访问框架可能会有所帮助。这些不仅可以从我刚刚编写的内容中提取出大部分样板代码，还可以从业务和传输对象层中提取出大部分样板代码，并且仍然可以让您编写所需的任何 sql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:22:46.943

一般来说，您将使用像[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)或[nhibernate](http://nhforge.org/)这样的 ORM 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:35:56.133

基本上，如果您考虑使用 c# 连接到数据库，则有三种类型。

1.  connected- 是一种通过打开和关闭连接来访问数据库的方式。也就是说，您正在通过 SQL 命令直接访问数据库。
2.  disconnected- 例如，使用存储过程而不是使用 SQL 命令直接访问数据库。
3.  实体框架 - 是一个代表您连接数据库的框架。您只需要配置一次，并且通过类对象可访问性非常灵活。这个框架也最适合使用 LINQ。

我建议您阅读 Andrew Troelsen 的《Pro C# 2010 和 .NET 4 平台》第 5 版一书。[Pro C# 2010 和 .NET 4 平台](http://www.apress.com/9781430225492)。您可以获得最新版本。

还有一个叫做 NHibernate 的框架，它几乎类似于 Java 中的 Hibernate

# annotations - 将 NSMutable 数组导入地图注解

> ID：16151826
> 
> 赞同：0
> 
> 时间：2013-04-22T16:17:07.900
> 
> 标签：annotations, nsmutablearray, mapkit

大家好，我有一个由 7 列组成的 mysql 数据库，我有一个脚本可以读取它并将数据提取为 JSON，我已将其提取到 NSMutableArray 中，我希望能够使用此数组在我的地图上设置注释但是我不知道在这里做什么，正如你所看到的，我在这里定义了一个注释，它显示没有问题，但老实说我不确定如何显示 NSMutableArray 项目？NSMutable 数组将包含比注释所需的更多信息，我只需要坐标、标题和副标题，那么我该怎么做呢？到目前为止，这是我的代码：

危害.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface Hazards : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@property (nonatomic, strong) NSString * ID;
@property (nonatomic, strong) NSString * ROUTE;
@property (nonatomic, strong) NSString * ADDRESS;
@property (nonatomic, strong) NSString * LATITUDE;
@property (nonatomic, strong) NSString * LONGITUDE;
@property (nonatomic, strong) NSString * HAZARD;
@property (nonatomic, strong) NSString * RISK;

// Methods
- (id) initWithID: (NSString *) hazardsID andROUTE: (NSString *) hazardsROUTE andADDRESS: (NSString *) hazardsADDRESS andLATITUDE: (NSString *) hazardsLATITUDE andLONGITUDE: (NSString *) hazardsLONGITUDE andHAZARD: (NSString *) hazardsHAZARD andRISK: (NSString *) hazardsRISK;

@end 
```

危害.m

```
#import "Hazards.h"

@implementation Hazards
@synthesize coordinate, title, subtitle, ID, ROUTE, ADDRESS, LATITUDE, LONGITUDE, HAZARD, RISK;

- (id) initWithID: (NSString *) hazardsID andROUTE: (NSString *) hazardsROUTE andADDRESS: (NSString *) hazardsADDRESS andLATITUDE: (NSString *) hazardsLATITUDE andLONGITUDE: (NSString *) hazardsLONGITUDE andHAZARD: (NSString *) hazardsHAZARD andRISK: (NSString *) hazardsRISK {

    self = [super init];
    if (self)
    {
        ID = hazardsID;
        ROUTE = hazardsROUTE;
        ADDRESS = hazardsADDRESS;
        LATITUDE = hazardsLATITUDE;
        LONGITUDE = hazardsLONGITUDE;
        HAZARD = hazardsHAZARD;
        RISK = hazardsRISK;
    }
return self;
}

@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "Hazards.h"

@interface ViewController : UIViewController

@property (nonatomic, strong) NSMutableArray *json;
@property (nonatomic, strong) NSMutableArray *hazardsArray;

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

#pragma mark - Methods
-(void) retrieveData;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "Hazards.h"

@interface ViewController ()

@end

// Railway Street Ballymena Coordinates
#define BALLYMENA_LATITUDE 54.857719;
#define BALLYMENA_LONGITUDE -6.280654;

// Span
#define THE_SPAN 0.01f;

#define getDataURL @"localhost:8888/rmb/json.php"

@implementation ViewController
@synthesize json, hazardsArray, mapView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Create the region
    MKCoordinateRegion myRegion;

    // Center
    CLLocationCoordinate2D center;
    center.latitude = BALLYMENA_LATITUDE;
    center.longitude = BALLYMENA_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = center;
    myRegion.span = span;

    // Set our mapview
    [mapView setRegion:myRegion animated: YES];

    // Annotation
    NSMutableArray *locations = [[NSMutableArray alloc] init];
    CLLocationCoordinate2D location;
    Hazards *myAnn;

    // Pin to show Royal Mail Ballymena delivery office
    myAnn = [[Hazards alloc] init];
    location.latitude = BALLYMENA_LATITUDE;
    location.longitude = BALLYMENA_LONGITUDE;
    myAnn.coordinate = location;
    myAnn.title = @"Royal Mail Ballymena";
    myAnn.subtitle = @"111, Railway Street";
    [locations addObject:myAnn];

    [self.mapView addAnnotations:locations];

    }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Methods
-(void) retrieveData {
    NSURL *url = [NSURL URLWithString:getDataURL];
    NSData *data = [NSData dataWithContentsOfURL:url];

    json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];

    // Setup our hazards array
    hazardsArray = [[NSMutableArray alloc] init];

    for (int i =0; i < json.count; i++) {

        // Create hazard object
        NSString *hazardsID = [[json objectAtIndex:i] objectForKey:@"ID"];
        NSString *hazardsROUTE = [[json objectAtIndex:i] objectForKey:@"ROUTE"];
        NSString *hazardsADDRESS = [[json objectAtIndex:i] objectForKey:@"ADDRESS"];
        NSString *hazardsLATITUDE = [[json objectAtIndex:i] objectForKey:@"LATITUDE"];
        NSString *hazardsLONGITUDE = [[json objectAtIndex:i] objectForKey:@"LONGITUDE"];
        NSString *hazardsHAZARD = [[json objectAtIndex:i] objectForKey:@"HAZARD"];
        NSString *hazardsRISK = [[json objectAtIndex:i] objectForKey:@"RISK"];

        Hazards *myHazards = [[Hazards alloc] initWithID:hazardsID andROUTE:hazardsROUTE andADDRESS:hazardsADDRESS andLATITUDE:hazardsLATITUDE andLONGITUDE:hazardsLONGITUDE andHAZARD:hazardsHAZARD andRISK:hazardsRISK];

        // Add our hazards object to our hazards array
        [hazardsArray addObject:myHazards];
    }
    // [self.mapView addAnnotation:hazardsArray];
}

@end 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:53:43.593

假设您`retrieveData`正确构建了 Hazard 对象并在正确的时间被调用，您可以使用循环内的这一行一次添加一个

```
[self.mapView addAnnotation:myHazards]; 
```

或在循环完成后一次全部

```
[self.mapView addAnnotations:hazardsArray]; 
```

# vmware - 具有多个 VM 的 USB 设备的竞争条件

> ID：16151833
> 
> 赞同：0
> 
> 时间：2013-04-22T16:17:24.143
> 
> 标签：vmware, virtual-machine

我有 4 个 USB 设备（相同型号）连接到 Windows 7 主机。在我的 Windows 7 上，我有两个虚拟机（VMware - Ubuntu）。我可以手动将两个连接到每个 VM，但如果我重新启动任何 USB 设备，其中一个 VM 将控制所有这些设备（或大多数）。有没有办法告诉我的虚拟机在可用时始终连接到相同的资源，并告诉另一个虚拟机忽略某些设备？

基本上我希望 VM 1) 始终连接到 A 和 B 并且 VM2 ) 始终连接到 C 和 D

他们永远不应该控制彼此的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:24:22.143

在 Virtualbox 中您可以创建过滤器，在 KVM 上您可以专门设置要使用的 USB 驱动器。

我不太确定 VM ware

# html - CSS 菜单悬停效果

> ID：16151834
> 
> 赞同：4
> 
> 时间：2013-04-22T16:17:25.997
> 
> 标签：html, css

我正在尝试在下拉菜单中创建悬停效果，但我不知道该怎么做。

我想做的是：

![在此处输入图像描述](https://i.stack.imgur.com/PmNRY.jpg)

而不是这个：

![在此处输入图像描述](https://i.stack.imgur.com/5RCHh.jpg)

**我的代码**- 你也可以[在这里](http://jsfiddle.net/eZbyF/1/)看到，[（更新版本）](http://jsfiddle.net/6z8GS/)

**HTML：**

```
<nav>
    <ul>
        <li><a href="#">One</a>
            <ul>
                <li><a href="1.html">1.1</a></li>
                <li><a href="2.html">1.2</a>
            </ul>
        </li>
        <li><a href="#">Two</a>
            <ul>
                <li><a href="3.html">2.1</a></li>
                <li><a href="4.html">2.2</a></li>
                <li><a href="5.html">2.3</a></li>
            </ul>
        </li>
        <li><a href="#">Three</a>
            <ul>
                <li><a href="6.html">3.1</a></li>
                <li><a href="7.html">3.2</a></li>
            </ul>
        </li>
        <li><a href="8.html">Four</a></li>
    </ul>
</nav> 
```

**CSS：**

```
nav {
    float: left;
}
nav ul ul {
    display: none;
}
nav ul li:hover > ul {
    display: block;
}
nav ul {
    list-style: none;
    position: relative;
    display: inline-table;
}
nav ul:after {
    content:"";
    clear: both;
    display: block;
}
nav ul li {
    float: left;
}
nav ul li:hover {
}
nav ul li:hover {
    background-color: #000;
}
nav ul li a:hover {
    color: #fff;
}
nav ul li a {
    display: block;
    padding: 25px 15px;
    color: #6F0;
    text-decoration: none;
}
nav ul ul {
    border-radius: 0px;
    padding: 0;
    position: absolute;
}
nav ul ul li {
    float: none;
    position: relative;
}
nav ul ul li a {
    padding: 15px 40px;
    color: #000;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:20:33.290

# [工作小提琴：](http://jsfiddle.net/eZbyF/6/)

更改以下两个的样式：

```
nav ul li:hover {
border-bottom: 1px solid #000;
color: #000;
}

nav ul li a:hover {
color: #000;
} 
```

并添加：

```
nav ul li:hover li:hover{
        background: #000;
} 
```

为了设置子菜单的样式。

`li:hover`您要设置底部边框的第一个 ( ) - 您可以将此边框的宽度从更改`1px`为更粗的，例如`3px`

# selenium - Selenium、FluentAutomation 和 NUnit - 如何为每个 TestCase 切换浏览器？

> ID：16151838
> 
> 赞同：2
> 
> 时间：2013-04-22T16:17:37.803
> 
> 标签：selenium, nunit, testcase, fluentautomation

目前，openGoogle() 确实会为每个具有正确参数的测试用例调用。问题是 setBrowser 似乎无法正常工作。它确实设置了第一次并成功完成了测试。但是，当第二次调用 openGoogle() 时，它会继续使用第一个浏览器，而不是使用指定的新浏览器。

> 使用 NFramework = NUnit.Framework; ...
> 
> ```
>  [NFramework.TestFixture]
>     public class SampleTest : FluentAutomation.FluentTest
>     {
>         string path;
>         private Action<TinyIoCContainer> currentRegistration;
>         public TestContext TestContext { get; set; }
> 
>         [NFramework.SetUp]
>         public void Init()
>         {
>             FluentAutomation.Settings.ScreenshotOnFailedExpect = true;
>             FluentAutomation.Settings.ScreenshotOnFailedAction = true;
>             FluentAutomation.Settings.DefaultWaitTimeout = TimeSpan.FromSeconds(1);
>             FluentAutomation.Settings.DefaultWaitUntilTimeout = TimeSpan.FromSeconds(30);
>             FluentAutomation.Settings.MinimizeAllWindowsOnTestStart = false;
>             FluentAutomation.Settings.ScreenshotPath = path = "C:\\ScreenShots";
>         }
> 
>         [NFramework.Test]
>         [NFramework.TestCase(SeleniumWebDriver.Browser.Firefox)]
>         [NFramework.TestCase(SeleniumWebDriver.Browser.InternetExplorer)]
>         public void openGoogle(SeleniumWebDriver.Browser browser)
>         {
>             setBrowser(browser);
> 
>             I.Open("http://www.google.com/");
>             I.WaitUntil(() => I.Expect.Exists("body"));
>             I.Enter("Unit Testing").In("input[name=q]");
>             I.TakeScreenshot(browser + "EnterText");
> 
>             I.Click("button[name=btnG]");
>             I.WaitUntil(() => I.Expect.Exists(".mw"));
>             I.TakeScreenshot(browser + "ClickSearch");
>         }
> 
>         public SampleTest()
>         {
>             currentRegistration = FluentAutomation.Settings.Registration;
>         }
> 
>         private void setBrowser(SeleniumWebDriver.Browser browser)
>         {
>             switch (browser)
>             {
>                 case SeleniumWebDriver.Browser.InternetExplorer:
>                 case SeleniumWebDriver.Browser.Firefox:
>                     FluentAutomation.SeleniumWebDriver.Bootstrap(browser);
>                     break;
>             }
>         }
>     } 
> ```

注意：在下面这样做可以正常工作 - 为每个测试打开一个单独的浏览器。

> 公共类 SampleTest : FluentAutomation.FluentTest { 字符串路径；私人动作当前注册；公共 TestContext TestContext { 获取；放; }
> 
> ```
> private void ie()
> {
>     FluentAutomation.SeleniumWebDriver.Bootstrap(FluentAutomation.SeleniumWebDriver.Browser.InternetExplorer);
> }
> private void ff()
> {
>     >FluentAutomation.SeleniumWebDriver.Bootstrap(FluentAutomation.SeleniumWebDriver.Browser.Firefox);
> }
> 
> public SampleTest()
> {
>     //ff
>     FluentAutomation.SeleniumWebDriver.Bootstrap();
>     currentRegistration = FluentAutomation.Settings.Registration;
> }
> 
> [TestInitialize]
> public void Initialize()
> {
>     FluentAutomation.Settings.ScreenshotOnFailedExpect = true;
>     FluentAutomation.Settings.ScreenshotOnFailedAction = true;
>     FluentAutomation.Settings.DefaultWaitTimeout = TimeSpan.FromSeconds(1);
>     FluentAutomation.Settings.DefaultWaitUntilTimeout = TimeSpan.FromSeconds(30);
>     FluentAutomation.Settings.MinimizeAllWindowsOnTestStart = false;
>     path = TestContext.TestResultsDirectory;
>     FluentAutomation.Settings.ScreenshotPath = path;
> }
> 
> [TestMethod]
> public void OpenGoogleIE()
> {
>     ie();
>     openGoogle("IE");
> }
> [TestMethod]
> public void OpenGoogleFF()
> {
>     ff();
>     openGoogle("FF");
> }
> private void openGoogle(string browser)
> {
>     I.Open("http://www.google.com/");
>     I.WaitUntil(() => I.Expect.Exists("body"));
>     I.Enter("Unit Testing").In("input[name=q]");
>     I.TakeScreenshot(browser + "EnterText");
> 
>     I.Click("button[name=btnG]");
>     I.WaitUntil(() => I.Expect.Exists(".mw"));
>     I.TakeScreenshot(browser + "ClickSearch");
> 
> } } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T14:35:13.633

Dev 分支：根据我的经验，Dev 分支中的最新部分与 NUnit 的参数化测试用例很好地配合。

只需将 Bootstrap 调用移动到测试用例本身，并确保在最后手动调用 I.Dispose()。这允许在此上下文中运行时正确创建浏览器。

这是一个示例，如果您从 GitHub 的 dev 分支上提取最新版本，您应该能够复制/粘贴并运行该示例。

```
 [TestCase(FluentAutomation.SeleniumWebDriver.Browser.InternetExplorer)]
    [TestCase(FluentAutomation.SeleniumWebDriver.Browser.Chrome)]
    public void CartTest(FluentAutomation.SeleniumWebDriver.Browser browser)
    {
        FluentAutomation.SeleniumWebDriver.Bootstrap(browser);
        I.Open("http://automation.apphb.com/forms");
        I.Select("Motorcycles").From(".liveExample tr select:eq(0)"); // Select by value/text
        I.Select(2).From(".liveExample tr select:eq(1)"); // Select by index
        I.Enter(6).In(".liveExample td.quantity input:eq(0)");
        I.Expect.Text("$197.70").In(".liveExample tr span:eq(1)");

        // add second product
        I.Click(".liveExample button:eq(0)");
        I.Select(1).From(".liveExample tr select:eq(2)");
        I.Select(4).From(".liveExample tr select:eq(3)");
        I.Enter(8).In(".liveExample td.quantity input:eq(1)");
        I.Expect.Text("$788.64").In(".liveExample tr span:eq(3)");

        // validate totals
        I.Expect.Text("$986.34").In("p.grandTotal span");

        // remove first product
        I.Click(".liveExample a:eq(0)");

        // validate new total
        I.WaitUntil(() => I.Expect.Text("$788.64").In("p.grandTotal span"));
        I.Dispose();
    } 
```

它应该在我希望本周发生的下一个版本中找到 NuGet 的方式。

NuGet v2.0：目前每个测试只支持一次对 Bootstrap 的调用。在 v1 中，我们内置支持针对提供商支持的所有浏览器运行相同的测试，但发现用户更喜欢将其拆分为多个测试。

我使用 v2 管理它的方式是拥有一个包含 TestMethods 的“基础”测试类。然后，我为每个我想要定位的浏览器扩展一次，并覆盖构造函数以调用适当的 Bootstrap 方法。

有点冗长但很容易管理。

# php - 字符串的数组键总是计算为第一个字符（真）

> ID：16151841
> 
> 赞同：1
> 
> 时间：2013-04-22T16:17:56.253
> 
> 标签：php

什么时候：

```
$person = array('name' => 'bill'); 
```

`isset($person['jibberish'])`评估为 FALSE。

但：

```
$person = 'bill'; 
```

`isset($person['jibberish'])`计算结果为 TRUE，`$person['jibberish']`返回字符串 $person 的第一个字符。

这是预期的吗？今天这让我感到震惊，因为我一直在使用`empty($array['key'])`，但从未`is_array()`在我的 if 语句中包含。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:26:24.967

因为`$person`是一个字符串，所以类数组索引被转换为一个`int`.

```
(int)'any non-numeric string in the world' == 0 
```

因此，如果您使用随机的非数字字符串作为索引，您“自然地”会得到任何字符串的第一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:27:23.333

因为您正在打印字符串的未定义索引，而不是数组。如果您尝试在 PHP 中打印字符串的索引，您将拥有字符串的每个字符：

```
$person = 'bill';
$person[0] //b
$person[1] //i
$person[2] //l
$person[3] //l 
```

# magento - 在 Magento Checkout Onepage 中出现原型错误

> ID：16151846
> 
> 赞同：0
> 
> 时间：2013-04-22T16:18:08.137
> 
> 标签：magento, prototypejs

我已经阅读并在网站上搜索了我在我们网站上结帐时遇到的原型错误。

发生的情况是，当 onepage 转到运输方式部分时，显示器没有显示。通读其他问题后，原型错误通常来自 jquery.no 冲突问题。我已经用尽了该选项，并且不认为这是问题所在。我希望还有其他东西可以尝试。

我们的问题在这里[https://rmi-online.com/checkout/onepage/](https://rmi-online.com/checkout/onepage/)

一切正常，直到您单击继续结算信息并转到运输方式。然后它只是空白。这很痛苦，因为没有人可以在该网站下订单。令人沮丧的问题是它工作正常，但现在由于某种原因不能正常工作。我无法弄清楚发生了什么变化。

# php - CakePHP 2.0 应用程序：间歇性无法写入 Memcache 缓存错误消息

> ID：16151850
> 
> 赞同：4
> 
> 时间：2013-04-22T16:18:21.103
> 
> 标签：php, cakephp, memcached, cakephp-2.0, lamp

我有一个带有 CakePHP 应用程序的健康、低流量的登台服务器。我在 localhost 上运行 Memcached，所有 Cake 缓存都使用 Memcache 作为缓存引擎。

每隔一两个小时（比如每 1-2 周），我会看到如下错误：

```
Warning (512): _cake_model_ cache was unable to write 'default_read_users' to Memcache cache [CORE/Cake/Cache/Cache.php, line 309]
Warning (512): _cake_core_ cache was unable to write 'file_map' to Memcache cache [CORE/Cake/Cache/Cache.php, line 309]
Warning (512): _cake_core_ cache was unable to write 'method_cache' to Memcache cache [CORE/Cake/Cache/Cache.php, line 309] 
```

这表明即使是核心 Cake 缓存也无法写入 Memcache 存储。

我将重新启动服务器上的 Memcache 守护程序，等待几分钟，然后重新加载页面，但错误消息仍然存在。

服务器上的生命体征看起来不错。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T15:01:46.187

是否是从具有高于正常 php 执行（www-data）权限的用户（即 root）访问 CakeShell，因此以后无法从正常进程访问或更改这些缓存文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T07:28:19.903

检查`Memcached`配置。可能已达到最大 ItemSize。您可以在交互模式下启动 Memcached：

```
memcached -u root --v 
```

并查看是否出现一些 SERVER ERROR 日志。

您可以尝试增加项目大小：

```
memcached -u root --vv -I 5m 
```

# plunker - 为 Angular 设置 Plunker

> ID：16151853
> 
> 赞同：0
> 
> 时间：2013-04-22T16:18:25.030
> 
> 标签：plunker

有人可以告诉我为什么我的 Plunker 不喜欢我吗？

[http://plnkr.co/edit/Ft1YgUsXCnFxfyr5ob8r](http://plnkr.co/edit/Ft1YgUsXCnFxfyr5ob8r)

谢谢，

J.P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T11:39:25.477

您的数据存在一些问题。

这应该工作：
[http ://plnkr.co/edit/buQHJL2QAn6iQcjrKjdX?p=preview](http://plnkr.co/edit/buQHJL2QAn6iQcjrKjdX?p=preview)

# html - 如何使直线浮动元素溢出：隐藏

> ID：16151858
> 
> 赞同：0
> 
> 时间：2013-04-22T16:18:45.907
> 
> 标签：html, css, overflow

我目前有一条“直线”线漂浮着不同位置的物品：左 - 从占据所有空间的左外侧到身体的右外侧。

我现在的问题是，我添加的物品超出了 100% 身体“容器”的容量，因此浮动物品自然会分解成一条线。

我想要实现的是，我只希望我的项目继续进入一些溢出：隐藏状态（而不是分解） - 这样我基本上可以继续添加项目而不会破坏线路。

我的 HTML 基本上如下 -[这个问题也可以在这里看到](http://devsgs.com/preview/mm/)：

```
#lights {
    position: absolute;
    z-index: 999;
overflow: hidden;
}

.lightItem {
    float: left;
}

// ** I basically repeat this pattern in the straight line  // *
.lightItem.c1Light_1 {
    padding: 38px 0 0 42px;
}

.lightItem.c1Light_2 {
    padding: 37px 0 0 82px;
}

.lightItem.c1Light_3 {
    padding: 46px 0 0 59px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:39:09.993

一个技巧是将它包装到一个具有不同（更宽）宽度的 div 中，并让 line 元素隐藏溢出，您可以根据需要调整它，这是一个非常简单的示例 ofc，因为我很懒，所以我没有在所有浏览器上试用。

```
<html>
<head>
    <style>
        #main_wrapper
        {
            width: 960px;
            height: 200px;
            overflow: hidden;
            margin: auto;
        }

        #main_wrapper .overflow_line
        {
            width: 300%;
            height: 200px;
            clear: both;
            border: 1px solid #d3d3d3;
        }

        #main_wrapper .overflow_line > div
        {
            float: left;
            width: 100px;
            height: 120px;
        }

    </style>

</head>
<body>
    <div id="main_wrapper">
        <div class="overflow_line">
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
            <div>a</div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:42:28.167

只需添加`overflow:hidden` 一个高度即可`#lights`。所以你的CSS`#lights`将是：

```
#lights {
position: absolute;
z-index: 999;
overflow: hidden;
height: 78px; //set this to whatever you need
} 
```

# c# - 如何使用 Exchange Server 2007 和 ASP.NET、C# 设置约会

> ID：16151861
> 
> 赞同：0
> 
> 时间：2013-04-22T16:18:52.420
> 
> 标签：c#, asp.net, calendar, exchange-server-2007

嗨，提前感谢您在这方面的帮助。

我需要通过 ASP.Net C# 应用程序在 Exchange Server 2007 中的某人的日历上设置约会。我对此进行了一些研究，但我看到的唯一参考资料是针对 Exchange Server 2010 的，这在这里不起作用。

谁能指出我正确的方向？！

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:22:29.057

试试这个： [从 ASP.NET 2.0 网站向 Outlook 2007 日历发送约会](http://msdn.microsoft.com/en-us/library/office/bb655909%28v=office.12%29.aspx)

# awk - 比较和计算 awk 中 2 个文件的每个和绝对差异

> ID：16151862
> 
> 赞同：1
> 
> 时间：2013-04-22T16:19:01.597
> 
> 标签：awk, compare, set-difference

我想问一下如何用**awk比较和计算2个文件之间的差异**

文件1.txt

```
orange 30  
banana 25  
apple 30  
pear 35 
```

文件2.txt

```
orange 25  
apple 32  
jackfruit 15  
pear 40  
pineapple 20 
```

输出应该是两者之间的差异（和绝对值）并存储在

文件 3.txt：

```
orange 5  
banana 25  
apple 2  
pear 5  
jackfruit 15  
pineapple 20 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:33:26.393

一种方法：

```
$ awk '{x=a[$1]-$2;a[$1]=(x<0.0)?-x:x}END{for(k in a)print k,a[k]}' file1 file2
orange 5
jackfruit 15
apple 2
pineapple 20
pear 5
banana 25 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:29:56.873

这个单线应该工作：

```
 awk '$1 in a{a[$1]=sqrt((a[$1]-$2)^2);next}{a[$1]=$2}END{for(x in a)print x, a[x]}' file1 file2 
```

用你的例子：

```
kent$  head file1 file2
==> file1 <==
orange 30  
banana 25  
apple 30  
pear 35

==> file2 <==
orange 25  
apple 32  
jackfruit 15  
pear 40  
pineapple 20 

kent$  awk '$1 in a{a[$1]=sqrt((a[$1]-$2)^2);next}{a[$1]=$2}END{for(x in a)print x, a[x]}' file1 file2
orange 5
jackfruit 15
apple 2
pineapple 20
pear 5
banana 25 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:34:35.670

```
awk '{ if (a[$1] == "")
         a[$1] = $2;
       else
       {
         if ((a[$1] - $2) < 0)
        a[$1] = $2 - a[$1];
         else
        a[$1] = a[$1] - $2;
       }
    } END { for (e in a) { print e, a[e] }}' file1.txt file2.txt 
```

# python - Python : Map function with none type list as parameter

> ID：16151865
> 
> 赞同：0
> 
> 时间：2013-04-22T16:19:09.077
> 
> 标签：python, list, nonetype, map-function

I want to pass a list of None in a map function but it doesn't work.

```
a = ['azerty','uiop']
b = ['qsdfg','hjklm']
c = ['wxc','vbn']
d = None

def func1(*y):
    print 'y:',y

map((lambda *x: func1(*x)), a,b,c,d) 
```

I have this message error:

```
TypeError: argument 5 to map() must support iteration. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:23:31.257

替换`None`为空列表：

```
map(func1, a or [], b or [], c or [], d or []) 
```

或过滤列表：

```
map(func1, *filter(None, (a, b, c, d))) 
```

该`filter()`调用完全从列表中删除`d`，而第一个选项为您`None`的函数调用提供值。

我删除了 lambda，这里是多余的。

使用该`or []`选项，第四个参数是`None`：

```
>>> map(func1, a or [], b or [], c or [], d or [])
y: ('azerty', 'qsdfg', 'wxc', None)
y: ('uiop', 'hjklm', 'vbn', None)
[None, None] 
```

过滤结果为 3 个参数`func1`：

```
>>> map(func1, *filter(None, (a, b, c, d)))
y: ('azerty', 'qsdfg', 'wxc')
y: ('uiop', 'hjklm', 'vbn')
[None, None] 
```

您也可以使用`itertools.starmap()`，但这有点冗长：

```
>>> list(starmap(func1, zip(*filter(None, (a, b, c, d)))))
y: ('azerty', 'qsdfg', 'wxc')
y: ('uiop', 'hjklm', 'vbn')
[None, None] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:52:16.923

第二个参数 d 应该是 SEQUENCE ，将其作为列表或元组..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:22:59.950

错误消息几乎说明了一切：`None`不可迭代。参数 to`map`应该是可迭代的：

```
map(func, *iterables) --> map object

Make an iterator that computes the function using arguments from
each of the iterables.  Stops when the shortest iterable is exhausted. 
```

根据您想要实现的目标，您可以：

*   更改`None`为空列表；
*   `map`您的功能在列表中`[a, b, c, d]`

另请注意，您可以`func1`直接映射，无需 lambda：

```
map(func1, *iterables) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:22:26.010

制作第二个参数来映射列表或元组：

```
map((lambda *x): func1(*x)), (a,b,c,d)) 
```

# svn - 在 SVN 中合并时阻止对属性/外部的更改

> ID：16151868
> 
> 赞同：1
> 
> 时间：2013-04-22T16:19:26.883
> 
> 标签：svn, properties, svn-externals, svn-merge

我设置了一个环境，其中我的外部指向每个分支中的不同位置。当我将代码从一个分支合并到另一个分支时，我总是会在项目属性中遇到必须手动解决的合并冲突。

这很容易在 gui 中完成，因为我需要做的就是保留我的本地版本，但我需要它：

1.  忽略外部存在差异的事实，或
2.  自动接受我的本地修订并继续合并。

我尝试过使用 --record-only 开关，但这似乎会阻止对代码和属性的更改。有什么东西只能在属性上运行，特别是我的外部设置？

# java - 在没有集合的基于数组的未排序列表中删除重复项

> ID：16151871
> 
> 赞同：0
> 
> 时间：2013-04-22T16:19:36.420
> 
> 标签：java

考虑操作`removeAll`，它从列表中删除所有出现的元素。该方法返回删除的元素数。

```
public int removeAll(E element) 
```

实现此操作： 1\. 基于数组的未排序列表

我们不能使用集合。

我现在开始的：

```
 public int removeAll(T element) {

int duplicatesRemoved = 0;

for (int i = 0; i <= array.length - 1; i++) {
  for (int j = i + 1; j <= array.length - 1; j++) {
    if (array[i] == array[j]) {

    }
  } 
```

我无法完成其余的工作，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:50:35.010

## 简短的回答

使用地图。

## 更多答案

这是一个算法，它是功能性的，但可以改进：

创建一个地图<T, Boolean>。第二个参数类型是任何你想要的，我选择了布尔值。
创建一个名为 newArray 的新数组；这将包含唯一值。
遍历数组。对于每个项目执行以下操作：

1.  以当前的arrayValue为key，从map中获取storedValue。
2.  如果storedValue 为null（即Map.get() 返回null），那么这是一个唯一项。将arrayValue、Boolean.TRUE 插入地图并将arrayValue 添加到newArray。
3.  如果storedValue 不为null，则增加重复计数。

遍历列表后，newArray 包含所有非重复项，重复计数包含重复项的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:53:58.270

1.

```
 /**
 * This method removes all duplicates from an array named "array"
 * using a temporary List. So it converts the array into 
 * something like a Java set
 * 
 * @return int number of duplicates removed
 */
public static int removeAll() {
    int duplicates = 0;
    List<Object> list = new ArrayList<>();
    for(int i=0;i<array.length;i++){
        Object element = array[i];
        if(list.contains(element)) {
            duplicates++;
        }
        else {
            list.add(element);
        }
    }
    array = list.toArray();
    return duplicates;
} 
```

2.

```
/**
 * This method removes duplicates from an array named "array" using a
 * temporary List.
 * @param elementToBeRemoved
 * @return int number of duplicates removed
 */
public static int removeAll(Object elementToBeRemoved) {
    int duplicates = 0;
    List<Object> list = new ArrayList<>();
    for (int i = 0; i < array.length; i++) {
        Object element = array[i];
        if (list.contains(elementToBeRemoved)) {
            duplicates++;
        } else {
            list.add(element);
        }
    }
    array = list.toArray();
    return duplicates;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:20:55.620

将内容转储到 a 中`collection of some sort since you're not allowed to use Set`，然后取出集合中的内容。

数组（类，而不是原始数组）支持 contains 方法，但您每次都将迭代新集合，使其效率低下。

或者，如果您也不能使用 Array，您可以在原始数组中执行此操作，只需一遍又一遍地寻找重复项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:22:11.377

我建议您将重复的元素设置为类似`null`. 删除所有重复项后，通过将末尾的非空元素与中间的空元素交换来压缩数组。

或者，创建一个空数组，并将非重复元素移动到新数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T16:29:46.243

由于这似乎是作业，没有解释，但这个难题：

```
int lengthWithValues = array.length;
for (int i = 0; i < lengthWithValues; i++) {
    // Loop invariant: for all at < i array is sorted, unique and complete.
    int valueToBeChecked = array[i];
    for (int k = i + 1, int j = i + 1; k < lengthWithValues; j++) {
        if (array[j] == valueToBeChecked) {
            --lengthWithValues; // Remove duplicate
        } else {
            array[k] = array[j]; // Maintain differing from all at <= i.
            ++k;
        }
    }
}
duplicatesRemoved = array.length - lengthWithValues;
// array[0 .. length - duplicatesRemoved] is the unique array.
int[] uniqueArray = new int[lengthWithValues];
System.arrayCopy(array, 0, uniqueArray, 0, lengthWithValues); 
```

# javascript - 如何通过单击将变量（数字ID）从页面传递到另一个页面

> ID：16151875
> 
> 赞同：0
> 
> 时间：2013-04-22T16:19:48.933
> 
> 标签：javascript

我有自动生成的内容和自动生成的按钮。按钮具有相同的链接，只有变量不同。如何将按钮单击上的变量传递到另一个页面（从按钮 onclick 链接）。

生成按钮后，我给它一个功能，例如：

```
$('.Button').click(function() { window.location ='page.html'; }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:23:19.453

您可以简单地使用查询字符串。

```
http://mysite.com/page2.html?myid=1234 
```

根据您的评论，您可以这样做：

```
$('.Button').click(function() { 
     var myid = 1234;
     window.location ='page.html?myid=' + myid; 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:25:13.757

如果您想使用纯 html/js 执行此操作 - 尝试像上面的代码一样向页面添加哈希：

```
onClick {
 document.location = "/yourPage.html#id";
}

onLoad {
var id = window.location.hash;
} 
```

此外，您可以将 id 保存在 SessionStorage、LocalStorage 或 Cookies 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:22:29.583

如果您不关心变量是否公开，您可以将其作为查询字符串添加到 url `http://domain/pagename.html?varname=2&othervar=2`。

如果它在同一个域中，您可以将其添加到 sessionStorage

```
sessionStorage["varname"] = x; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:25:18.100

您可以将其设置为 URL 查询字符串中的变量，然后读取查询字符串的值。

就像是：

```
index.html?variable=value 
```

另一种选择是使用变量键/值设置 cookie，然后在页面加载时读取 cookie。

```
document.cookie=variable + "=" + value; 
```

# vbscript - invoke .vbs from batch script

> ID：16151876
> 
> 赞同：0
> 
> 时间：2013-04-22T16:19:49.247
> 
> 标签：vbscript, batch-file, jscript

In continuation to the script provided by rojo at [escape double quotes in param file to batch script](https://stackoverflow.com/questions/15970104/escape-double-quotes-in-param-file-to-batch-script), after I have parsed the initial data file, I need to invoke a .vbs script from the batch. The .vbs script needs to be supplied with 2 of the tokens generated by parsing the initial data file. One of the token is a URL to a file on a server and another is the path on local disk. The .vbs script downloads the specified file specified by token one to local path specified by token two. What I want to do is to invoke the .vbs script in the script above and pass the tokens as parameters to it. myvbscript.vbs /FileURL:"[https://abc.com/a.pdf](https://abc.com/a.pdf)" /HDLocation:"C:\a.pdf"

Here is the .bat file i have.

```
 @if(@a==@b) @end
/* :: batch portion
@ECHO OFF
setlocal if exist "%~1"
 ( cscript /nologo /e:jscript "%~f0" < "%~1" )
 else ( cscript /nologo /e:jscript "%~f0" )
 exit /b 
:: JScript portion */ 
while (!WSH.StdIn.AtEndOfLine) {
 var line=WSH.StdIn.ReadLine();
 var st_token = line.split('\t');
 var FileUR="abc.com/a.pdf";
 var HDLocation="C:\a.pdf"; 
WSH.Echo(req_id); 
WSH.Echo(att_tokens[i]);
 <<INVOKE VBSCRIPT WITH PARAMETERS>> 
```

I need to invoke vbscript in place of `<<INVOKE VBSCRIPT WITH PARAMETERS>>` Please help}

Please help me to invoke the .vbs script in the script above with passing tokens as parameters.

The .vbs script is as follows:

```
'Set your settings

Set colNamedArguments = WScript.Arguments.Named

strFileURL = colNamedArguments.Item("FileURL")
strHDLocation = colNamedArguments.Item("HDLocation")

' Fetch the file

Set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")

objXMLHTTP.open "GET", strFileURL, false
objXMLHTTP.send()

If objXMLHTTP.Status = 200 Then
  Set objADOStream = CreateObject("ADODB.Stream")
  objADOStream.Open
  objADOStream.Type = 1 'adTypeBinary

  objADOStream.Write objXMLHTTP.ResponseBody
  objADOStream.Position = 0    'Set the stream position to the start

  Set objFSO = Createobject("Scripting.FileSystemObject")
    If objFSO.Fileexists(strHDLocation) Then objFSO.DeleteFile strHDLocation
  Set objFSO = Nothing

  objADOStream.SaveToFile strHDLocation
  objADOStream.Close
  Set objADOStream = Nothing
End if

Set objXMLHTTP = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:32:20.443

在您的文件中使用：

对于 .BAT 调用 .VBS

```
cscript //nologo [FILE.vbs] argsX argsY 
```

对于 .JS 调用 .VBS

```
 wsShell = WScript.CreateObject("WScript.Shell");
 wsShell.run ("[FILE.VBS] argsX argsY"); 
```

您需要将这两个参数读入您的 .vbs 中，为此您可以使用：

```
Set args = WScript.Arguments
argsX = args.Item(0)
argsY = args.Item(1) 
```

*你的代码有这个，但我想我会记下这是如何为其他寻找类似解决方案的人完成的。*

现在您可以像在代码中使用变量一样使用参数/参数。

.BAT 示例使用 testB.bat 进行了测试，其中包含以下代码行。

```
@ECHO OFF
cscript //nologo testv.vbs Hey There 
```

.JS 示例使用 test.js 进行了测试，其中包含以下代码行。

```
wsShell = WScript.CreateObject("WScript.Shell");
wsShell.run ("testV.VBS Hey There"); 
```

testV.vbs 中的代码行如下。

```
Set args = WScript.Arguments
firstArg = args.Item(0)
secondArg = args.Item(1)
MsgBox(firstArg)
MsgBox(secondArg) 
```

所有文件都存储在同一目录中。双击 test.js 或 testB.bat 文件会创建两个消息框。第一个说“嘿”，第二个说“那里”。

# php - Inserting information into database using the new pdo method giving me an error

> ID：16151877
> 
> 赞同：2
> 
> 时间：2013-04-22T16:19:50.390
> 
> 标签：php, mysql, pdo

I am trying to migrate from the old SQL method to the new PDO methods for dealing with database.

Here is what I have so far:

```
try{
$conn = new PDO(.......)//this code is working fine
$conn->exec("SET CHARACTER SET utf8");

$query = "INSERT INTO TABLE(name,username,password)VALUES(:name,:username,:password)";

$prepare_query = $conn->prepare($query);

$prepare_query->bindValue(':name',$name,PDO::PARAM_STR);
$prepare_query->bindValue(':username',$user,PDO::PARAM_STR);
$prepare_query->bindValue(':password',$pass,PDO::PARAM_STR);

$count = $conn->exec($prepare_query);//error is somewhere here
}catch(PDOException $e){
echo $e->getMessage();
}

if($count > 0) echo "done"; 
```

Now the error I am receiving is Warning: PDO::exec() expects parameter 1 to be string, object given in C:\xampp\htdocs\drug_center\includes\NewAccount.php on line 42.

I am a NEWBEE when it comes to the PDO methods. I have read [this](http://coursesweb.net/php-mysql/pdo-exec-insert-update-delete)! but here it is not showing me how to prepare the statement. I want to protect my data base as much as possible. Can someone please explain where I have gone wrong and how to fix this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:22:27.970

连接对象的[`->exec()`](http://www.php.net/manual/en/pdo.exec.php)方法需要一个字符串作为它的第一个参数，其中包含要运行的查询，但是准备好的语句可以满足您的期望[`->execute()`](http://www.php.net/manual/en/pdostatement.execute.php)：

```
$success = $prepare_query->execute();
// $success is true if execution was okay
$count = $prepare_query->rowCount();
// $count is the rows affected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:28:52.437

尝试在 exec 方法中绑定。

```
$sql = "INSERT INTO TABLE(name,username,password)VALUES(:name,:username,:password)";
$q = $conn->prepare($sql);
$q->execute(array(':name'=>$name,
                  ':username'=>$username,
                      ':password'=>$password)); 
```

# c - 从jpeglib中提取解压部分

> ID：16151878
> 
> 赞同：1
> 
> 时间：2013-04-22T16:19:52.087
> 
> 标签：c, jpeg, decode, libjpeg

我正在尝试提取 libjpeg 中的解压部分以将其添加到嵌入式项目中，因此我应该采用最小的代码大小，但我认为代码非常复杂，您知道如何从库中排除这部分? 还有另一种方法吗，我想将 jpeg 照片解压缩返回表单相机以对其进行模式识别。有任何想法吗 ？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:11:28.623

[libjpeg](http://libjpeg.sourceforge.net/)是一个非常优化的库，它被移植到许多架构中。

如果这个库占用太多资源，我建议你看看其他类似的库：

[https://code.google.com/p/picojpeg/](https://code.google.com/p/picojpeg/)

> picojpeg 是一个公共领域的 JPEG 解压缩器，用纯 C 语言编写在单个源文件 picojpeg.c 和单个标头 picojpeg.h 中。它有几个相当独特的属性，使其在小型 8/16 位嵌入式设备或内存非常有限的环境中非常有用：

[http://sourceforge.net/projects/libjpeg-turbo/](http://sourceforge.net/projects/libjpeg-turbo/)

> libjpeg-turbo 是 libjpeg 的衍生产品，它使用 MMX、SSE、SSE2 和 NEON SIMD 指令在 x86、x86-64 和 ARM 平台上将基线 JPEG 压缩/解压缩速度提高约 2-4 倍。它基于 libjpeg/SIMD，但具有许多增强功能。

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:22:40.547

拆开像这样的库来修剪它是一项崇高的努力，这种项目分支可以使……比如说……最小化的 jpeg 库。minjpeglib。或者更小。让我们去[纳米](http://keyj.emphy.de/nanojpeg/)。是的，问题是这已经完成了。[非常多。](http://code.google.com/p/jpgd/)您可能对它们有一些问题，因为它们可能不包含 jpeg 格式能够提供的所有功能。因此，有些图像可能无法加载，有些图像可能无法正确加载。

如果您想要完全支持，那么 jpeglib 如此庞大和复杂是有原因的。

如果你真的想进入 jpeglib，我真的不知道从哪里开始，但我可以给出一些广泛的建议。梳理它以获得您想要的某些特定功能。跟踪它的依赖关系。它使用了哪些结构、哪些辅助函数以及哪些标头。将这些部分复制到一个新文件夹中，添加一些位，直到您有一个可以编译和运行的程序。不幸的是，我不能保证它不会包含大部分或全部原始 jpeglib。

确认！被威扎德先生打败！

# javascript - 为什么我在 Mustache 中获取模板文件名而不是模板内容

> ID：16151879
> 
> 赞同：3
> 
> 时间：2013-04-22T16:19:53.360
> 
> 标签：javascript, node.js, templates, mustache, hogan.js

我经历了 Mustache[教程](http://mustache.github.io/mustache.5.html)

这个问题与[Embed mustache template into another template略有关系](https://stackoverflow.com/questions/14519987/embed-mustache-template-into-another-template)

我得到了所有其他的东西，除了**部分**

我试着做

```
base.mustache:
{{testVar}}
<h2>Names</h2>
{{#names}}
  {{> user}}
{{/names}}

user.mustache:
<strong>{{name}}</strong> 
```

但不是呈现用户模板或其内容，即名称的值，而是呈现`Names c:\blahFolder\user.mustache`

我使用 hogan-template-compiler 来预编译我的模板。

您能从上面的信息中弄清楚为什么会发生这种情况，或者您需要更多信息吗？我假设，我的编译器代码很好，因为我得到`testVar`了正确呈现的值。

如果你真的需要看，这里是我的**hoganCompiler.js**

```
var partialsDir = __dirname + '/views/partials'
        , jsDir = __dirname + '/public/js/compiled';

var hogan = require('hogan.js')
        , path = require('path')
        , join = path.join

        , fs = require('fs')
        , onModify
        , relations = {}
        , watch;

onModify = function (filename)
{
    console.log('Changed', filename);
    if (relations[filename])
    {
        filename = relations[filename];
    }
    console.log('Which relate on', filename);

    var path, contents;

    path = join(partialsDir, filename);
    try
    {
        if (!filename.match(/\.mustache/) || !fs.statSync(path).isFile())
        {
            return;
        }
    }
    catch( err )
    {
        console.log( "Failed to stat file " + path + " - skipping");
        return;
    }

    contents = fs.readFileSync(path).toString();
    var templateName = filename.replace(/.mustache$/, '');
    // TODO: catch compiler exception..
    var compiledTemplate =
            templateName + " = new Hogan.Template("
                    + hogan.compile(contents, {asString: true}) + ");";

    var jsFilename = filename.replace(/mustache$/, 'js');
    fs.writeFileSync(join(jsDir, jsFilename), compiledTemplate );
}

watch = function (filename)
{
    if (relations[filename])
    {
        return;
    }

    var path;
    if (filename.charAt(0) == '/')
    {
        path = filename;
    }
    else
    {
        path = join(partialsDir, filename);
    }

//    fs.watch(path, function (event, f)
    fs.watchFile(path, function (event, f)
    {
        console.log('event is: ' + event);
        if( !f ) // fs.watch doesn't work on all platforms..
        {
            // fall back to just reprocessing all in dir
            fs.readdirSync(path).forEach(onModify);
        }
        else
        {
            onModify(f);
        }
    });
}

fs.readdirSync(partialsDir).forEach(onModify);
watch(partialsDir);

function getPartials(partials, dir)
{
    var baseDir = __dirname + '/views/';
    var files = fs.readdirSync(dir);
    for (var i in files)
    {
        if (files[i].match(/\.mustache/) && fs.statSync(join(dir, files[i])).isFile())
        {
            partials[files[i].replace(/.mustache$/, '')] =
                join(dir, files[i]).replace(baseDir, '');
        }
    }
    return partials;
}
var partials = {};
partials = getPartials(partials, partialsDir);
exports.partials = getPartials(partials, join(partialsDir, '..')); 
```

# java - UML 图中的一对一关系

> ID：16151883
> 
> 赞同：1
> 
> 时间：2013-04-22T16:20:05.270
> 
> 标签：java, uml

我是 UML 图的新手，并且正在阅读有关它的书。那里有一个类图，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/RMhpi.jpg)

它说，

```
The implication of a one to one association is that whenever you create an 
instance of one of the classes, you must simultaneously create an instance 
of the other, and when you delete one you must delete the other. 
```

我的问题是，我们真的必须这样做吗？我们不能将“null”作为其中之一的值吗？例如，我想这个图的java代码如下，当我想创建一个公司项目时，我可以给null作为参数。我错了吗？或者这是一段糟糕或错误的代码？

```
public class Company{
       . . .
    private BoardOfDirectors director;
    public Company(BoardOfDirectors director){
          this.director=director;

    }
       . . .
}

public class BoardOfDirectors{
       . . .
   private Company company;
   public BoardOfDirectors(Company company){
          this.company=company;

   }
       . . .
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:33:58.580

这一切都取决于 UML 背后的业务规则。您可能想要创建解释此时没有董事会的对象，而不是 NULL。如果公司对象稍后决定要创建董事会，这将是明智的。然后，您可以将它们存储在彼此的数组中。通过这种方式，您将对象存储在另一个对象中。

我创建了程序，我们将对象存储在对象内部的对象中，等等。这允许使用持久代码并可以序列化状态。然后，您可以让数组遍历并保持 UML 图的基数。

确实，您必须考虑项目的业务规则，应用实体背后的基数和建模，并尝试模仿这一现实。从我在学校学到的知识来看，我们的工作是模仿现实并将其视为现实生活，以便我们的代码更有意义。从长远来看，它会更容易理解和维护。虽然为了速度我会不时打破这条规则，但这就是糟糕代码开始形成的原因。

如果您还没有，请查看[http://uml.org 。](http://uml.org)

干杯!

# objective-c - 属性值的类型不可接受，但类型正常

> ID：16151886
> 
> 赞同：0
> 
> 时间：2013-04-22T16:20:25.073
> 
> 标签：objective-c, xcode, core-data

我正在使用 Core Data 编写一个应用程序，该属性在一个实体中：
**@property (nonatomic, retain) NSString * mesa;**

我从 JSON 处理的字典中传递值时遇到问题：
**local.mesa =[locales [0] valueForKey:@"mesa"];**

我收到此错误：
**'NSInvalidArgumentException'，原因：'不可接受的属性值类型：property = "mesa"; 所需类型 = NSNumber; 给定类型 = __NSCFString; 价值 = 沙龙 2。**

这向我表明所需的类型是 NSNumber，但该属性在 xcdatamodel 和类中声明为 NSString。

可能属性的第一个声明是 NSNumber，并且看起来好像他没有改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:52:41.230

如果架构之前在模拟器中有一个 nsnumber，请从模拟器中删除您的应用程序，以便使用该变量中的 nsstring 创建一个新的核心数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T12:58:23.443

忘记关了，不好意思。就像我之前说的：

我解决了它，从模拟器中卸载了应用程序，然后按照这个线程：从设备中删除应用程序重新创建正确的数据模型层次结构后，[无法创建具有 nil 模型的 NSPersistentStoreCoordinator 。](https://stackoverflow.com/questions/12617585/cannot-create-an-nspersistentstorecoordinator-with-a-nil-model-after-deleting-ap)再次感谢

# c# - ASP.NET 如何获取服务器上特定文件夹中的文件名

> ID：16151889
> 
> 赞同：1
> 
> 时间：2013-04-22T16:20:31.880
> 
> 标签：c#, asp.net

我有这个网站，我正在用 ASP.NET - C# 进行编码。

我的问题是我有图片框，但用户可以上传任何名称的图片。现在每个图像框都有自己的文件夹，并且在任何时候，该文件夹中只能有一个文件，即 .JPG 文件。

路径如下所示：

```
Server.MapPath("img/home/1/here can be any jpg file with any name eg. whateverPic.jpg") 
```

所以，上传文件的时候，名字可以随时更改……那么当我想在图片框中显示图片时，问题就来了。

我要做的就是在文件夹 img/home/1/.... 中获取文件名，然后我可以将图片框的源设置为该名称。

如何在该特定文件夹中获取该文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:22:48.080

您可以使用它来获取目录中的文件列表

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\"); 
```

然后只需使用 filePaths[0] 索引中的文件名

# odbc - Accessing Filemaker value lists through ODBC

> ID：16151892
> 
> 赞同：0
> 
> 时间：2013-04-22T16:20:39.123
> 
> 标签：odbc, filemaker

I'm building a .Net Web application and my data needs to be in Filemaker. Using ODBC I'm working just fine with data stored in tables. But I need also to obtain value lists data. ¿Is this possible in any way? Thanxs in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T03:40:16.413

它看起来肯定不像。

FileMaker 有两种类型的值列表：动态生成的值列表，您应该能够在 ODBC 中使用一些等效查询重新创建这些值列表。

但是，要获得静态值列表，您需要能够更改 FileMaker。根据您的需要，您可以考虑：

1.  创建一个新表，并让每条记录成为一个值列表项。然后值列表可以动态显示该表中的记录，您可以使用 ODBC 查询表的内容，或者
2.  您可以使用以下代码创建一个新的计算字段，该字段仅列出值列表的项目：

    值列表项（获取（文件名）；**值列表名称**）

# c# - Can another thread see partially created collection when using collection initializer?

> ID：16151894
> 
> 赞同：6
> 
> 时间：2013-04-22T16:20:44.037
> 
> 标签：c#, thread-safety, local-variables, collection-initializer

Imagine this C# code in some method:

```
SomeClass.SomeGlobalStaticDictionary = new Dictionary<int, string>()
{
    {0, "value"},
}; 
```

Let's say no one is using any explicit memory barriers or locking to access the dictionary.

If no optimization takes place, then the global dictionary should be either null (initial value) or a properly constructed dictionary with one entry.

The question is: Can the effect of the Add call and assigning to SomeGlobalStaticDictionary be reordered such that some other thread would see an empty non-null SomeGlobalStaticDictionary (or any other invalid partially constructed dictionary?)

Does the answer change if SomeGlobalStaticDictionary is volatile?

After reading [http://msdn.microsoft.com/en-us/magazine/jj863136.aspx](http://msdn.microsoft.com/en-us/magazine/jj863136.aspx) (and also its second part) I learned that in theory just because one variable is assigned in source code other threads might see it differently due to many reasons. I looked at the IL code but the question is whether the JIT compiler and/or CPU are allowed to not "flush" the effect of the Add call to other threads before the assignment of the SomGlobalStaticDictionary.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:26:04.703

在局部变量中，启用优化后，编译器*将*（至少有时）编译为首先分配给变量的代码，然后调用`Add`（或为对象初始化器设置属性）。

如果您使用静态或实例变量，您会看到不同的行为：

```
class Test
{
    static List<int> StaticList = new List<int> { 1 };
    List<int> InstanceList = new List<int> { 2 };
} 
```

给出以下类型初始化器 IL：

```
.method private hidebysig specialname rtspecialname static 
        void  .cctor() cil managed
{
  // Code size       21 (0x15)
  .maxstack  2
  .locals init (class [mscorlib]System.Collections.Generic.List`1<int32> V_0)
  IL_0000:  newobj     instance void class [mscorlib]System.Collections.Generic.List`1<int32>::.ctor()
  IL_0005:  stloc.0
  IL_0006:  ldloc.0
  IL_0007:  ldc.i4.1
  IL_0008:  callvirt   instance void class [mscorlib]System.Collections.Generic.List`1<int32>::Add(!0)
  IL_000d:  nop
  IL_000e:  ldloc.0
  IL_000f:  stsfld     class [mscorlib]System.Collections.Generic.List`1<int32> Test::StaticList
  IL_0014:  ret
} // end of method Test::.cctor 
```

以及以下构造函数 IL：

```
.method public hidebysig specialname rtspecialname 
        instance void  .ctor() cil managed
{
  // Code size       29 (0x1d)
  .maxstack  3
  .locals init (class [mscorlib]System.Collections.Generic.List`1<int32> V_0)
  IL_0000:  ldarg.0
  IL_0001:  newobj     instance void class [mscorlib]System.Collections.Generic.List`1<int32>::.ctor()
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  ldc.i4.2
  IL_0009:  callvirt   instance void class [mscorlib]System.Collections.Generic.List`1<int32>::Add(!0)
  IL_000e:  nop
  IL_000f:  ldloc.0
  IL_0010:  stfld      class [mscorlib]System.Collections.Generic.List`1<int32> Test::InstanceList
  IL_0015:  ldarg.0
  IL_0016:  call       instance void [mscorlib]System.Object::.ctor()
  IL_001b:  nop
  IL_001c:  ret
} // end of method Test::.ctor 
```

在这两种情况下，集合都是在设置字段*之前填充的。**现在这并不是说可能仍然没有*内存模型问题，但这与将字段设置为引用空集合然后进行`Add`调用不同。从分配线程的角度来看，分配发生在`Add`.

通常，对象初始化器和集合初始化器表达式都等效于使用临时变量构造对象 - 因此，在您在赋值中使用它的情况下，属性设置器都会在赋值发生*之前被调用。*

但是，我不相信针对对象/集合初始化程序的其他线程的可见性提供*任何特殊保证。*我建议您想象一下如果根据规范“长期”写出代码会是什么样子，然后从那里推理。

*对静态初始化器和构造器有*保证——但主要是在 Microsoft 的 .NET 实现中，而不是“一般”保证（例如，在 C# 规范或 ECMA 规范中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T17:18:18.963

首先让我说我不知道​​您的问题的答案，但我可以帮助您将其简化为本质：

```
unsafe class C
{
    static int x;  // Assumed to be initialized to zero
    static int *p; // Assumed to be initialized to null
    static void M()
    {
        int* t = &C.x;
        *t = 1;
        C.p = t;
    }
    ... 
```

这里`int`代表字典，`p`代表引用字典的字段，`t`是临时创建的，向字典中添加元素被建模为改变 field 的值`x`。所以这里的事件顺序是：获取字典的存储并将其保存在一个临时文件中，然后改变所引用的事物，然后发布结果。

问题是在 C# 内存模型下，是否允许另一个线程上的观察者看到`C.p`指向`x`并且`x`仍然为零的对象。

就像我说的，我不确定答案；我很想知道。

不过，我的脑海中浮现：为什么*不可能*呢？`p`并且`x`可以在完全不同的内存页面上。假设在某个处理器上， 的值`x`已经被预取但`p`还没有。该处理器是否可以观察到`p`它不为空但`x`仍为零？是什么阻止了它？

# javascript - Load function after onload is executed

> ID：16151895
> 
> 赞同：0
> 
> 时间：2013-04-22T16:20:47.060
> 
> 标签：javascript, jquery

In order to execute all commands once the page has been loaded, I am maintaing an array which pushes all the commands. This is being done via:

```
<img src='holder.js/200x280/text:name' 
     alt='name' width='200px' 
     onload='getPoster(this, name)'> 
```

This is an iterative process and is run in a loop approximately 20 times.

I want that once this has been completed (page is completely loaded) and all the `onload()` events have been stacked into the array, *execute each one by one*.

I thought that `$(document).ready()` would let me achieve this, but it isn't helping either. However, using a `setTimeout()` function lets be see the ultimate result. But that obviously is not a good thing to do.

***getPoster function:***

```
function getPoster(img, title) {
    commands.push(new titles(img, title));
} 
```

How do you think I should go about to load the images once all the onload events are stacked?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:23:54.190

只需跟踪调用了多少次`getPoster()`，一旦调用计数达到执行每个命令的图像总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:24:56.123

JavaScript 是一种单线程同步语言。所以基本上指令是按照你写的顺序处理的。Ajax 请求是异步的，但加载图像等内容却不是。

所以假设你必须调用 4 个函数`onload`，然后你想加载你的图像。这很容易，特别是如果你有 jQuery。如果您没有发出 Ajax 请求或任何其他异步操作，则这些函数将同步执行，或者一个接一个地执行。

```
$(function() {//is equivalent to $(document).ready(function(){
    functionOne();
    functionTwo();
    functionThree();
    //etc
    loadImages();

}); 
```

为了实现你想要的，我能想到的最有效的方法是自定义`event`. 使用类似的东西：

```
$('#foo').on('completedEveryThingElse', function(event) {
  // So bind the event to whatever wrapper and then trigger it when you are done
  // loading all other stuff.
  // Now start loading images.
});

// Whenever you are done loading everything else.
$('#foo').trigger('completedEveryThingElse'); 
```

看看[这里](http://api.jquery.com/trigger/)，jQuery API`trigger()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:23:02.077

您可以通过使用 ImagesLoaded 插件来实现：

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:28:58.350

你可以使用这个：

```
<img class="posterImg" src='holder.js/200x280/text:name' alt='name' width='200px'>

$(document).ready(function () {    
    $(".posterImg").one('load', function () {
        getPoster(this,$(this).attr('alt'));
    }).each(function () {
        if (this.complete) $(this).load();
    });

}); 
```

# c++ - 为检测到的人脸制作ID并统计一分钟的人数

> ID：16151897
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:20:55.817
> 
> 标签：c++, opencv, image-processing, artificial-intelligence, computer-vision

我在 opencv 中使用“Violo-Jones”人脸检测器检测到网络摄像头中的人脸，现在我需要执行以下操作：

1）我需要为每个检测到的人脸制作一个 ID，比如 A、B、C 的 1、2、3。

2）如果人“A”离开框架并在一段时间内（比如1分钟）回来，那么人“A”的ID应该与我的情况下的“1”相同。如果人“A”在一分钟后出现，他将被视为不同的 ID (3)。

我怎样才能在opencv中做到以上几点？任何想法或建议或链接都​​会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:32:36.950

viola-jones 人脸*检测器*只能检测人头（是否人脸）。

如果你需要*识别*人脸，你（另外）需要 FaceRecognizer 类之一（eigen/fisher/lbp）

# jquery - AngularJS、JQuery 和 Onload 事件

> ID：16151898
> 
> 赞同：3
> 
> 时间：2013-04-22T16:20:56.303
> 
> 标签：jquery, angularjs, callback, onload, digest

我正在 Ruby on Rails 上编写一个应用程序，使用 AngularJS 进行资源管理（动态加载等）和 JQuery 用于手风琴、淡入淡出等效果。

当我想在页面上显示我的数据时，我使用 Angular JS 控制器从资源中查询数据，然后使用 ng-repeat 和 ng-show 相应地显示它们。完成后，我需要设置 JQuery onclick 事件以添加效果（具体为手风琴）。不幸的是，我找不到在加载所有 DOM 组件以及完成所有 Angular 消化时将调用的事件。这意味着 JQuery 的 onload 事件不起作用，并且还尝试使用诸如[ng-repeat 完成事件之](https://stackoverflow.com/questions/13471129/angularjs-ng-repeat-finish-event)类的指令，该指令 会产生一个错误，该错误已在进行中。

AngularJS 很新，我很难找到好的文档。

有没有人有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:06:51.143

在使用 jQuery 初始化 Accordion 之前，您必须等到 ng-repeat 完成。

这是执行此操作的指令（[http://jsfiddle.net/tQw6w/](http://jsfiddle.net/tQw6w/)）；它在 true 时调用指定的函数：

```
.directive('repeatDone', function() {
    return function(scope, element, attrs) {
        if (scope.$last) { // all are rendered
            scope.$eval(attrs.repeatDone);
        }
    }
}) 
```

和html：

```
<ul>
    <li ng-repeat="feed in feedList" repeat-done="layoutDone()" ng-cloak>
        <a href="{{feed}}" title="view at {{feed | hostName}}" data-toggle="tooltip">{{feed | strip_http}}</a>
    </li>
</ul> 
```

和控制器中的功能：

```
$scope.layoutDone = function() {
    $timeout(function() { $('a[data-toggle="tooltip"]').tooltip(); }, 0); // wait...
} 
```

我发现在进行 DOM 操作之前需要使用间隔 = 0 的 $timeout，例如在小提琴或手风琴中初始化工具提示。

以前在这里回答过：[https ://stackoverflow.com/a/16142327/2275421](https://stackoverflow.com/a/16142327/2275421)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:38:21.480

You can put your jQuery code inside $apply, like this:

```
$scope.$apply(function() {
    // jQuery stuff here
}); 
```

if it fires error like "digest in progress", you can use `setTimeout`:

```
setTimeout(function(){
    $scope.$apply(function() {
        // jQuery stuff here
    });
 }); 
```

Directive way:

```
//Directive - STRART
.directive("yourNameHere", function() {
    return function(scope, element, attrs) {
        $(element).jQueryStuffHere();
    };
})//Directive -END 
```

Hope it helps, Cheers

# .net - Log4Appender 与 RemoteSyslogAppender

> ID：16151900
> 
> 赞同：2
> 
> 时间：2013-04-22T16:21:09.223
> 
> 标签：.net, log4net-appender

我已经使用下面的代码创建了我的自定义 RemoteSyslogAppender

```
公共类 RemoteLogAppender : RemoteSyslogAppender
{
     受保护的覆盖无效附加（LoggingEvent loggingEvent）
     {
         this.RemoteAddress = IPAddress.Parse("我的 IP 地址(10.10.10.10");
         this.RemotePort = 514;
         this.Facility = SyslogFacility.Audit;

         var bytearray = Encoding.UTF8.GetBytes("记录远程错误")
         this.Client.Send(bytearray, bytearray.Length
     }
}

```

这是调用 Append 方法的测试代码

```
私有静态只读 ILog Log = LogManager.GetLogger(typeof(Logger));

记录事件记录事件；
Log.Logger.Log(loggingEvent);

```

在这里，我期待，应该调用 Append 方法并将消息发送到远程服务器。但 Append 从未调用过

请让我知道我在这里做错了什么并帮助我如何使用 RemoteSyslogAppender

谢谢-

# database - Intellij 错误：找不到适合 jdbc:mysql://127.0.0.1:3306/person 的驱动程序

> ID：16151903
> 
> 赞同：2
> 
> 时间：2013-04-22T16:21:12.460
> 
> 标签：database, hibernate, intellij-idea, hibernate-mapping

首先，我在这个论坛中找不到相关问题的答案。我是 Hibernate 技术的新手，我正在尝试从此页面运行一个基本示例：[http](http://www.roseindia.net/hibernate/hibernate4/firstHibernateApplication.shtml) ://www.roseindia.net/hibernate/hibernate4/firstHibernateApplication.shtml 虽然，在 eclipse 中它运行良好，但我遇到了问题与 Intellij IDEA。具体来说，我在 hibernate.cfg.xml 文件中有一个错误，它说：

“‘com.mysql.jdbc.Driver’不可分配给‘java.sql.Driver’”。

当我运行程序时，会出现一条消息：“错误：找不到适合 jdbc 的驱动程序：mysql://127.0.0.1:3306/person 插入记录无法打开连接”

（“人”是我的数据库）我已经添加了必要的 jar 文件（或者至少我认为是这样），并且通常我已经按照我粘贴在此消息第二行的网页中的所有步骤进行操作。如果可以的话，请看一下并帮助我。我创建的所有文件和代码都可以从我粘贴的网站上看到。我几乎复制粘贴了这个例子。谢谢你。

***更新***

休眠.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
 <!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://127.0.0.1:3306/person
    </property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password"/>
    <property name="hibernate.connection.pool_size">10</property>
    <property name="show_sql">true</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.current_session_context_class">thread</property>

</session-factory>
</hibernate-configuration> 
```

我已将连接器 jar 文件放在目录 IdeaProjects\coreHibernateExample\lib 中。不，我没有运行 Tomcat，我想我正在通过 Intellij 运行。Mysql 数据库的导入是通过 Wampservers 的 phpmyadmin 完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T17:18:23.853

您必须使 JDBC 库 jar 可用于您的项目。只是将 jar 添加到您的项目目录并不能实现这一点。

在项目中选择jar，右键添加为库。

![在此处输入图像描述](https://i.stack.imgur.com/dxqxA.png)

# regex - searching and replace without consuming what you are searching for

> ID：16151907
> 
> 赞同：5
> 
> 时间：2013-04-22T16:21:22.610
> 
> 标签：regex, vim

Say I have lines like this:

```
'alpha' 123 
'beta' 678
'alpha' 998
'gamma' 212 
```

And using the search & replace regex in VIM, turn it into this:

```
'alpha' 123 : alpha
'beta' 678 : beta
'alpha' 998 : alpha
'gamma' 212 : gamma 
```

Basically, the search won't be replacing what it's searching for, but instead just using it for something else. In my head, this should work:

```
:g/'\(.*\)'/s/$/: \1/g 
```

But that didn't do it. How do I not consume what I'm searching for but retain it for use?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:26:48.950

匹配的首字母`g`不捕获替换；它仅用于分组搜索。而是使用它，这也更简单一些：

```
%s/'\(.*\)'.*/& : \1/ 
```

`&`替换所有匹配的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:31:12.617

您可以直接在替换命令中执行此操作，使用`\zs` 对于构建诸如零宽度匹配（不“消耗”）之类的东西非常有用。

```
:%s/'\(.*\)'.*\zs/ : \1 
```

`\zs` 标志着比赛的开始。这就像“在这里开始比赛”。因此，首先捕获括号的内容，然后 extra `.*`匹配所有内容直到行尾，并且 `\zs`now 将匹配重置到该点，这意味着根本不是匹配的一部分，而是括号的内容被抓获。

`:`替换部分用匹配的组替换行位置的末尾。

[`:h \zs`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/%5Czs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:25:59.587

该命令应该可以工作：

```
:%s/\v'(\w*)'.*/\0 : \1 
```

（好吧，它在这里与您的示例文本一起使用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:39:05.160

宏也适用于您的示例：（未在 vim 中测试，但应该可以。）

光标在第一行的开头：

```
qqyi'A : <esc>pjq 
```

那么`x@q`（x是你想做多少次）

# r - Use R to calculate cohen's Kappa for a categorical rating but within a range of tolerance?

> ID：16151911
> 
> 赞同：4
> 
> 时间：2013-04-22T16:21:34.180
> 
> 标签：r, statistics

I have a series of ratings (categorical with at least 12 levels) from 2 independent raters. I would like to calculate inter-rater reliability, but allowing for a difference of one level. I.e. Level 1 and level 2 would be considered agreement, but level 1 and level 3 would not. I don't want to use a measure like a correlation coefficient, because it's important to know if the ratings are within 1 level of difference or not. Can this be done?

*edit to include sample data: each cell represents the number of raters (max=2) assigning a rating of A-E*

`structure(list(A = c(2, 2, 0, 0, 0,0,0,0,0), B = c(0,0,0,0,1,0,1,0,2), C = c(0,0,0,0,1,0,0,2,0), D=c(0,0,2,0,0,2,1,0,0), E=c(0,0,0,2,0,0,0,0,0)),row.names = c(NA,9L), class = "data.frame")`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:57:10.573

好的，我不确定这是否适合你，但我认为它会达到目标。基本上，您需要在不同的协议标准下找到评估者之间的协议。这真的没什么大不了的。基本上，就 Cohen 的 kappa 而言，评估者要么同意，要么不同意。

从制作样本数据开始：

```
testdata <- structure(list(A=c(2,2,0,0,0,0,0,0,0),
                           B=c(0,0,0,0,1,0,1,0,2),
                           C=c(0,0,0,0,1,0,0,2,0),
                           D=c(0,0,2,0,0,2,1,0,0),
                           E=c(0,0,0,2,0,0,0,0,0)),
            row.names = c(NA,9L),
            class = "data.frame") 
```

对于 kappa 的计算，我们将使用`irr`包：

```
library(irr) 
```

中的`kappa2`函数`irr`采用 2*n 数据框或矩阵并返回计算结果。您的数据格式不同，因此我们需要将其转换为`kappa2`可以处理的格式。如果你已经有了这种格式，它会容易得多。

首先，我首先创建一个新的数据框来接收重组后的结果。

```
new_testdata <- data.frame(R1="",R2="",stringsAsFactors=FALSE) 
```

现在，一个简单的循环转到每一行并返回一个向量，其中包含每个评分者的评分。显然，这不是分配的实际评级。此处的代码只是假设第一个评分者的评分总是高于第二个评分者。在这种特殊情况下无关紧要，因为我们只关心协议，但我希望您拥有完整的数据。

```
for(x in 1:dim(testdata)[1]) {
    new_testdata <- rbind(new_testdata,rep(names(testdata),testdata[x,]))
}
rm(x)
new_testdata <- new_testdata[-1,] # Drop first, empty column 
```

现在，我们可以获得正则 kappa。

```
kappa2(ratings=new_testdata)

  Cohen's Kappa for 2 Raters (Weights: unweighted)

  Subjects = 9
  Raters = 2
  Kappa = 0.723

  z = 4.56
  p-value = 5.23e-06 
```

现在，您想要一个不同的 kappa，其中一个级别的分歧不会被计入问题。那没问题; 基本上，您需要做的是将其中的内容转换`new_testdata`为同意或不同意的二进制表示。在这种情况下，它不应该影响 kappa。（但是，如果您的评估者只有两个级别可供选择，则会影响 kappa；这将人为地限制该值）。

首先，让我们创建一个将字母转换为数字的表格。这将使我们的生活更轻松。

```
convtable <- data.frame(old=c("A","B","C","D","E"),
                        new=c(1,2,3,4,5),
                        stringsAsFactors=FALSE) 
```

现在，我们可以使用它将 new_testdata 中的值转换为数字表示。

```
new_testdata$R1 <- convtable$new[match(new_testdata$R1,convtable$old)]
new_testdata$R2 <- convtable$new[match(new_testdata$R2,convtable$old)] 
```

我们可以通过仅取两列之间的差异来轻松检查是否一致。

```
new_testdata$diff <- abs(new_testdata$R1-new_testdata$R2) 
```

然后，只需将 R1 和 R2 重新编码为 1 和 1 用于满足您的协议标准（小于或等于两个评级之间的差异级别）的地方，否则为 1 和 0（或 0 和 1）。

```
new_testdata[new_testdata$diff<=1,c("R1","R2")] <- c(1,1)
new_testdata[new_testdata$diff>1,c("R1","R2")] <- c(1,0)
new_testdata <- new_testdata[1:2]              # Drop the difference variable 
```

现在，再次运行您的 kappa。

```
kappa2(ratings=new_testdata)

  Cohen's Kappa for 2 Raters (Weights: unweighted)

  Subjects = 9
  Raters = 2
  Kappa = 0

  z = NaN
  p-value = NaN 
```

哇，怎么了？嗯，你给我的数据在使用 +/- 1 水平时基本上是完全一致的。对二元响应变量执行 kappa 时可能会出现一些[方法问题](https://stats.stackexchange.com/questions/7208/can-one-use-cohens-kappa-for-two-judgements-only)，如我链接的 CrossValidated 帖子所示。如果您的数据不如样本数据“均匀”，那么您应该得到一个真正的 kappa 值，而不是像那个那样的异常零。但是，这更像是一个方法问题，您可能需要在 CrossValidated 上进行后续跟进。

# ruby-on-rails - Configuring multiple Rails projects with nginx, rvm, and passenger?

> ID：16151914
> 
> 赞同：1
> 
> 时间：2013-04-22T16:21:40.423
> 
> 标签：ruby-on-rails, ruby, nginx, rvm, passenger

I'm using nginx, rvm and passenger to run a web server for a Rails project (i.e., project1). This project has a specific gemset defined for it. I now need to run a second project (i.e., project2) which uses a different set of gems (and has a different gemset defined). How can I accomplish that?

This is what my configuration file for nginx looks like:

```
http {
  passenger_root /var/www/project1/vendor/cache/ruby/1.9.1/gems/passenger-3.0.
19;
  passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.2-p320@global/ruby;

  # ...

  server {                                                    
    listen        80;                                                     
    server_name   project1.example.com;           

    root              /var/www/project1/public;             
    passenger_enabled on;
    rails_env         production;      

    # ...                       

  }      

    server {                                                    
    listen        80;                                                     
    server_name   project2.example.com;           

    root              /var/www/project2/public;             
    passenger_enabled on;
    rails_env         production;      

    # ...                       

  }              

  # ...
} 
```

project1 works as expected. However, project2 gives me missing gem errors.

```
Could not find i18n-0.6.4 in any of the sources (Bundler::GemNotFound) 
```

Note how passenger_root points to the passenger gem within project1.

Any pointers on how I can run both projects, would be greatly appreciated. Thank you.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-22T17:19:20.310

在[rvm 文档](https://rvm.io/integration/passenger/)中有一个关于与 Passenger/nginx 集成的部分。解决方案就在那里，需要您添加一个新文件`config/setup_load_paths.rb`。可以在文档中找到有关该文件的详细信息。

顺便说一句，如果您使用的是 Rails3，那么对于管理特定于应用程序的 gems，bundler 是比 gemsets 更好的选择。

# c# - 构建目录路径 / 和双引号

> ID：16151915
> 
> 赞同：-2
> 
> 时间：2013-04-22T16:21:46.873
> 
> 标签：c#, asp.net, format, quote

我正在尝试构建将文件放在那里的路径，但我正在使用`string.Format`并且`/`参数之间没有出现。这是我的例子：

```
 string pdfFile = string.Format("{0}{1}{2}{3}", "MyPDF", "/", this.IdPDF, "/"); 
```

有人能告诉我为什么and`/`之间没有出现吗？`JPG``Id`

这是答案，谢谢达米特和其他人！

```
string pdfFile = string.Format("{0}/{1}", "MyPDF", this.idPDF); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T16:22:46.887

使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)：

```
string folder = System.IO.Path.Combine(@"\MyPDF", Id, "sales.pdf"); 
```

这将生成类似`\MyPDF\2\sales.pdf`. 通常，`Path.Combine`将连接所有参数以构建路径。从 MSDN 示例：

```
string[] paths = {@"d:\archives", "2001", "media", "images"};
string fullPath = Path.Combine(paths); 
```

`fullPath`将是`d:\archives\2001\media\images`。

# events - JqGrid custom search toolbar event handlers

> ID：16151916
> 
> 赞同：3
> 
> 时间：2013-04-22T16:21:48.603
> 
> 标签：events, search, jqgrid

I have created a jqGrid grid with a drop down list, this list (due to dev restraints) needs to be loaded once, so that all data returned can be filtered, all this is cool so far,

The problem arrives when the drop down list is changed, though the majority of the filtering/searching is done client-side, I need the drop down list to trigger a call that will refresh the page using the newly added parameter from the drop down list.

I have enclosed the section of code that builds the toolbar search, but I have no idea how to add the functionality to catch the event handler when changing the select value, in this only instance I need a non-standard code to be executed - e.g function callNewData()

```
colNames:["Rent Due Date ","Tenant","Description","Address","Payment Ref.","Rent     Amount","Outstanding","Amount     Received","Confirm?","tenancyID","tenantID","rentID","existingRent"],
    colModel :[{
        name:"rentDueDate", 
        index:"rentDueDate", 
        align:"center", 
        width:"130", 
        search:true, 
        stype:"select",
        searchoptions: {
            value: "all:All;due:Due;overdue:Overdue;future:+1 Week;" ,
            defaultValue:"due"
        }
    }, 
```

Where in the search options (or in the colModel) would I put the onChange event Handler?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:35:10.483

抱歉，但不清楚您的确切问题是什么。如果用户从下拉列表中选择一个选项，那么 jqGrid 会**自动**使用用户选择的过滤器重新加载网格。如果您使用本地`datatype`，则过滤将由 jqGrid 在内部完成。如果您使用`datatype: "json"`或`datatype: "xml"`不使用`loadonce: true`，则 jqGrid 向服务器发送请求，将有关过滤器的信息附加到标准参数列表中。

如果你真的需要处理`onChange`事件，`<select>`那么你需要在里面定义`change`事件处理程序`dataEvents`：

```
searchoptions: {
    value: "all:All;due:Due;overdue:Overdue;future:+1 Week;",
    defaultValue: "due",
    dataEvents: [ 
        {
            type: "change",
            fn: function (e) {
                // some code which will be executed onChange
            }
        }
    ]
} 
```

# visual-studio-2012 - Unable to see Windows Phone 7.8 Emulators in Visual Studio 2012

> ID：16151920
> 
> 赞同：0
> 
> 时间：2013-04-22T16:21:58.923
> 
> 标签：visual-studio-2012, windows-phone-8, windows-phone-8-emulator, windows-phone-7-emulator, windows-phone-7.8

I've recently installed the Windows Phone 8.0 SDK and when developing a new Windows Phone HTML App, I can see a few emulators listed which when run, open up the emulator fine:

Emulator WVGA 512 MB Emulator WVGA Emulator XVGA Emulator 720P

To test for functionality on a different handset (Nokia Lumia 710), it looked like I needed to install the Windows Phone SDK update for Windows phone 7.8 which "Adds the ability to start a Windows Phone 7.8 emulator in Visual Studio 2010 and Visual Studio 2012.". I was expecting to see the new 7.8 emulators added to the list, but they are not being displayed.

Has anyone else encountered this issue? Am I missing a further step?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:26:13.253

如果您的项目适用于 Windows Phone 7.5，您只能看到 Windows Phone 7.8 模拟器

如果您的项目已针对 8 进行了更新或创建，您将看不到它们。

# ruby-on-rails - Rails 嵌套路由匹配

> ID：16151924
> 
> 赞同：1
> 
> 时间：2013-04-22T16:22:12.297
> 
> 标签：ruby-on-rails, collections, routes, controllers, nested-routes

我是 Rails 新手，有一个棘手的路由问题。我有一个嵌套集合的资源，它映射到嵌套集合类型的控制器。但是，集合的名称不会映射到我要将请求路由到的控制器。

基本上用户模型有很多追随者和追随者。这 2 个集合映射到 Follow 模型，该模型具有使用标准 crud 方法的跟随控制器。

用户.rb：

```
class User < ActiveRecord::Base
  has_many :followers, class_name: Follow, foreign_key: :user_id, dependent: :destroy
  has_many :followings, class_name: Follow, foreign_key: :follower_id, dependent: :destroy
end 
```

跟随.rb：

```
class Follow < ActiveRecord::Base

  belongs_to :user, counter_cache: :followers_count
  belongs_to :follower, class_name: 'User', counter_cache: :followings_count

  attr_accessible :user, :user_id, :follower, :follower_id

  validates_presence_of :user_id, :follower_id
  validates_uniqueness_of :user_id, scope: :follower_id

end 
```

follow_controller.rb：

```
def index
  respond_with @follows
end 
```

路线.rb：

```
resources :users do
    resources :followers, :controller => "follows"
    resources :following, :controller => "follows"
end 
```

耙路线：

```
api_v1_user_followers GET    /api/v1/users/:user_id/followers(.:format)              api/v1/follows#index
                                POST   /api/v1/users/:user_id/followers(.:format)              api/v1/follows#create
       new_api_v1_user_follower GET    /api/v1/users/:user_id/followers/new(.:format)          api/v1/follows#new
      edit_api_v1_user_follower GET    /api/v1/users/:user_id/followers/:id/edit(.:format)     api/v1/follows#edit
           api_v1_user_follower GET    /api/v1/users/:user_id/followers/:id(.:format)          api/v1/follows#show
                                PUT    /api/v1/users/:user_id/followers/:id(.:format)          api/v1/follows#update
                                DELETE /api/v1/users/:user_id/followers/:id(.:format)          api/v1/follows#destroy
    api_v1_user_following_index GET    /api/v1/users/:user_id/following(.:format)              api/v1/follows#index
                                POST   /api/v1/users/:user_id/following(.:format)              api/v1/follows#create
      new_api_v1_user_following GET    /api/v1/users/:user_id/following/new(.:format)          api/v1/follows#new
     edit_api_v1_user_following GET    /api/v1/users/:user_id/following/:id/edit(.:format)     api/v1/follows#edit
          api_v1_user_following GET    /api/v1/users/:user_id/following/:id(.:format)          api/v1/follows#show
                                PUT    /api/v1/users/:user_id/following/:id(.:format)          api/v1/follows#update
                                DELETE /api/v1/users/:user_id/following/:id(.:format)          api/v1/follows#destroy 
```

我尝试添加 :controller => 'follows' 并且确实将两个嵌套的集合路由正确映射到 follow_controller。但是我收到此错误：

```
Started GET "/api/v1/users/2/following?auth_token=qhcT6CSHi3S7KrEnJtq6" for 10.0.1.72 at 2013-04-22 09:52:43 -0600

ActionController::RoutingError (uninitialized constant Api::V1::FollowingController): 
```

任何有关如何正确解决此问题的想法将不胜感激。

谢谢，

# python - 创建和填充巨大的 numpy 二维数组的最快方法？

> ID：16151932
> 
> 赞同：6
> 
> 时间：2013-04-22T16:22:26.677
> 
> 标签：python, matrix, numpy, multiprocessing, multidimensional-array

在每种情况下，我都必须使用来自数学公式的浮点数创建并填充巨大的数组（*例如96 Go，72000 行 * 72000 列）。*数组将在之后计算。

```
import itertools, operator, time, copy, os, sys
import numpy 
from multiprocessing import Pool

def f2(x):  # more complex mathematical formulas that change according to values in *i* and *x*
    temp=[]
    for i in combine:
        temp.append(0.2*x[1]*i[1]/64.23)
    return temp

def combinations_with_replacement_counts(n, r):  #provide all combinations of r balls in n boxes
   size = n + r - 1
   for indices in itertools.combinations(range(size), n-1):
       starts = [0] + [index+1 for index in indices]
       stops = indices + (size,)
       yield tuple(map(operator.sub, stops, starts))

global combine
combine = list(combinations_with_replacement_counts(3, 60))  #here putted 60 but need 350 instead
print len(combine)
if __name__ == '__main__':
    t1=time.time()
    pool = Pool()              # start worker processes
    results = [pool.apply_async(f2, (x,)) for x in combine]
    roots = [r.get() for r in results]
    print roots [0:3]
    pool.close()
    pool.join()
    print time.time()-t1 
```

*   创建和填充如此巨大的 numpy 数组的最快方法是什么？填充列表然后聚合然后转换为numpy数组？
*   我们可以并行计算，知道二维数组的案例/列/行是独立的以加速数组的填充吗？使用多处理优化此类计算的线索/线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:44:30.893

我知道您可以创建可以从不同线程更改的共享 numpy 数组（假设更改的区域不重叠）。这是您可以用来执行此操作的代码草图（我在stackoverflow的某个地方看到了原始想法，编辑：这里是[https://stackoverflow.com/a/5550156/1269140](https://stackoverflow.com/a/5550156/1269140)）

```
import multiprocessing as mp ,numpy as np, ctypes

def shared_zeros(n1, n2):
    # create a 2D numpy array which can be then changed in different threads
    shared_array_base = mp.Array(ctypes.c_double, n1 * n2)
    shared_array = np.ctypeslib.as_array(shared_array_base.get_obj())
    shared_array = shared_array.reshape(n1, n2)
    return shared_array

class singleton:
    arr = None

def dosomething(i):
    # do something with singleton.arr
    singleton.arr[i,:] = i
    return i

def main():
    singleton.arr=shared_zeros(1000,1000)
    pool = mp.Pool(16)
    pool.map(dosomething, range(1000))

if __name__=='__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:32:14.103

您可以创建一个具有所需形状的空[`numpy.memmap`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)数组，然后用于`multiprocessing.Pool`填充其值。正确执行此操作还将使池中每个进程的内存占用相对较小。

# java - Eclipse 中这些不同的执行环境是什么意思？

> ID：16151934
> 
> 赞同：6
> 
> 时间：2013-04-22T16:22:28.537
> 
> 标签：java, eclipse

我在 Eclipse 中看到的这些不同的执行环境之间有什么区别？似乎它们都在同一个JDK版本下。我特别感兴趣：

*   它们究竟代表什么？
*   我什么时候会选择其中之一？J2SE 很简单，但是那些 CDC 和 OSGi 是干什么用的？

![在此处输入图像描述](https://i.stack.imgur.com/25Vws.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:31:03.913

[此链接](http://wiki.eclipse.org/Execution_Environments#What_are_Execution_Environments.3F)应回答您的问题：

> 执行环境 (EE) 是 JRE 的符号表示。例如，与其谈论在磁盘上特定位置具有特定名称的特定 JRE，不如谈论 J2SE-1.4 执行环境。然后可以将系统配置为使用特定的 JRE 来实现该执行环境。执行环境与开发（编译）时间和运行时相关。

# ruby-on-rails-3 - Eager Loading First 关联

> ID：16151939
> 
> 赞同：0
> 
> 时间：2013-04-22T16:22:34.433
> 
> 标签：ruby-on-rails-3

我有一个`Story`模型和一个`Post`模型。每个故事都有很多帖子，每个帖子都属于一个故事。

当我将特定故事从数据库加载到内存中时，我想急切地加载该故事的最新帖子。这是我现在的做法：

```
@story = Story.includes(:posts).find(params[:story_id])
@latest_post = @story.posts.first  #Note, story.posts :order => "created_at DESC" 
```

这可行，但是当我只需要最近的帖子时，将所有故事的帖子加载到内存中似乎不是很有效。有没有办法限制`includes`只急切地加载第一篇文章？我应该担心这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:16:49.940

使用SQL`order by`和`join`. `limit`查询将`ActiveRecord`如下所示：

```
@latest_post = @story.include(:posts).order("created_at DESC").limit(1) 
```

这将创建一个包含帖子的连接，按最新帖子排序并获取一个。

# javascript - Application area of toString() and valueOf() method

> ID：16151944
> 
> 赞同：1
> 
> 时间：2013-04-22T16:22:50.723
> 
> 标签：javascript

Can i know In what condition toString() and valueOf() methods gets invoked by js engine or when are these methods called?Also which method gets called fist?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:25:58.210

`toString`将值转换为字符串，`valueOf`将其转换为数字。确切地调用哪一个取决于您询问的上下文。

如果 javascript 需要一个字符串或试图将对象强制转换为字符串，它将使用 toString。如果它期望一个数字，它将使用 valueOf。

此规则的例外是，当一个值同时具有 toString 和 valueOf 时，它总是调用 valueOf。

```
var x = {
    toString: function(){
        return "x";
    },

    valueOf: function(){
        return 2;
    }

}

alert("String :"+x); //2

alert("Number :"+(0+x)); //2 
```

小提琴：http: [//jsfiddle.net/DsGKf/](http://jsfiddle.net/DsGKf/)

因此，在您希望充当字符串的事物上定义 valueOf 时要小心。

# ios - CoreData - Adding # of months to a NSDate within a NSPredicate

> ID：16151951
> 
> 赞同：0
> 
> 时间：2013-04-22T16:23:08.660
> 
> 标签：ios, objective-c, core-data, nsdate, nspredicate

I have an entity in my CoreData model that contains these 2 attributes:

```
startDate (NSDate)
terms (int) 
```

I need to grab all the objects where the start plus the terms (which is months) is within the next 30 days.

Here is what I need to do in some pseudo code:

```
[NSPredicate predicateWithFormat:@"(startDate.months + terms) <= %@", date30DaysFromNow]; 
```

This may not be possible (or I am just being dumb).

I know the alternate solution would be to create a new attribute that creates this date when I import the objects.. but if I can I would rather not have to add another attribute if I don't have to.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:31:59.723

向模型对象添加一个属性，即 NSDate。每当更新日期或术语属性时（或根据您将其用于广告的频率按需）更新此新日期`startDate.months + terms`（最有可能使用`NSDateComponents`or `- (id)dateByAddingTimeInterval:(NSTimeInterval)seconds`。然后在谓词中使用此属性。

# python - How to round by a total digits(including integer part) instead of a fixed digit in python?

> ID：16151955
> 
> 赞同：1
> 
> 时间：2013-04-22T16:23:17.747
> 
> 标签：python, rounding, digits

I wonder if there is any easy way to round a double number to a total digits in python? For example, I want 3 digits in total, so I want to 1.523 to be 1.52 , and 23.45 to be 23.5, and 108,9 to be 109

thanks a lot

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:33:51.597

```
sround = lambda x,d: round(x,d - int(math.ceil(math.log10(abs(x)))))

sround(1.2345, 3) # 1.23
sround(12345.67, 3) # 12300.0
sround(-.01234, 1) # -0.01
sround(199, 1) # 200.0 
```

# php - Background image won't display 100% if it is generated at random

> ID：16151959
> 
> 赞同：1
> 
> 时间：2013-04-22T16:23:27.297
> 
> 标签：php, html, css, zurb-foundation

I am making a website that has two background images, one of them is always the same i.e.:

```
background-image: url("../images/centre-image.jpg"); 
```

and the other is generated via php to show a background image at random:

```
 <?php
      $bg = array('large-top1.jpg', 'large-top2.jpg', 'large-top3.jpg', 'large-top4.jpg', 'large-top5.jpg', ); // array of filenames

      $i = rand(0, count($bg)-1); // generate random number size of the array
      $selectedBg = "$bg[$i]"; // set variable equal to which random filename was chosen
    ?>

<img src="images/background-images/<?php echo $selectedBg; ?>" class="bg"> 
```

Making the first background the full size of the DIV no matter what size of the screen was easy enough:

```
div.centre-options {
    background-size: 100% auto;
} 
```

however if I try to add similar CSS to the random generated image it doesn't work (just shows it at its full jpg size and then repeats) and not sure show to solve the problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:30:41.843

据我所知，生成的图像没有设置为背景，而是设置为要显示的图像，因此您不能对其应用背景样式。

您可以做两件事，或者将样式直接应用于图像标签，即

```
img.bg{
width:100%;
height:100%;
} 
```

或者创建一个元素并将生成的图像添加到它的样式中，看起来像这样：

```
 <?php
      $bg = array('large-top1.jpg', 'large-top2.jpg', 'large-top3.jpg', 'large-top4.jpg', 'large-top5.jpg', ); // array of filenames

      $i = rand(0, count($bg)-1); // generate random number size of the array
      $selectedBg = "$bg[$i]"; // set variable equal to which random filename was chosen
    ?>
<style>
div.bg{
background-image: url("images/background-images/<?php echo $selectedBg; ?>");
background-size: 100% auto;
}
</style>
<div class="bg"></div> 
```

最好将样式放在头部标签之间

# java - JAR 对 Windows 资源管理器超链接无响应？

> ID：16151960
> 
> 赞同：0
> 
> 时间：2013-04-22T16:23:27.380
> 
> 标签：java, jar, hyperlink, actionlistener, windows-explorer

我有一个 GUI 应用程序成功打包在一个 JAR 文件中，当我通过 Windows 资源管理器（这是 Windows 7）导航到它并实际双击该文件时，该文件运行良好。但是，当我尝试通过超链接 (G:\...\file.jar) 访问 JAR 时，应用程序仍然打开，但没有响应。也许动作监听器有问题，或者这会是 Windows 问题吗？我不明白为什么会发生这种情况或如何解决它，因为它在所有其他条件下都可以正常工作......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T16:27:27.250

这更像是一个超级用户的问题，但您可以尝试将链接的工作目录设置为与 jar 所在的目录相同。它可能需要检索一些资源，并且可能通过使用相对路径来实现。

# python - 一些关键字符串（如“%something”）使 PyYAML 解析器崩溃

> ID：16151967
> 
> 赞同：0
> 
> 时间：2013-04-22T16:23:39.943
> 
> 标签：python, pyyaml

我正在尝试使用 PyYAML 解析 YAML 翻译文件，但某些键使其崩溃：

```
import yaml
t = yaml.load("%users users have connected: %users users have connected") 
```

错误是`"expected alphabetic or numeric character, but found ' '"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:56:47.117

Search for '%u' on the [Python built-in types documentation.](http://docs.python.org/2/library/stdtypes.html)

%u is an obsolete string interpolation code that's the same as %d. Python thinks you're trying to interpolate a string. It should parse properly if you were to change it to:

```
t = yaml.load("%users users have connected: %users users have connected" % users) 
```

It still wouldn't give you what you're probably expecting, though, as the resulting string would be:

```
10sers users have connected: 10sers users have connected 
```

You can escape the '%' character, or wrap the translation key in curly brackets and use string formatting, like this:

```
d = {"users": 10}
t = yaml.load("\{users\} users have connected: \{users\} users have connected")

print t.replace('\\','').format(**d)
>>> '10 users' 
```

As mentioned in the comments, you can get it into a string without complaint by escaping the '%'s using:

```
t = yaml.load(s.replace('%', '\%')).replace('\%', '%') 
```

Where 's' is the string from the translation file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T18:36:13.960

我没有得到同样的错误，PyYAML 3.11 和 Python2.7.10 给出：

```
yaml.parser.ParserError: expected '<document start>', but found '<stream end>'
  in "<string>", line 1, column 57:
     ... ted: %users users have connected 
```

但是您在这里以 a 开头，`%`并且后面应该跟一个指令。目前只定义了两个指令`YAML`，`TAG`并且所有其他字符串都[保留以供将来使用](http://www.yaml.org/spec/1.2/spec.html#id2781147)。

YAML 规范还[指出](http://www.yaml.org/spec/1.2/spec.html#id2800967)：

> 裸文档不以任何指令或标记行开头。此类文档非常“干净”，因为它们只包含内容。在这种情况下，第一个非注释行可能不以“%”第一个字符开头。

这实际上意味着该字符串`%users users have connected: %users users have connected`是不正确的 YAML，如果这是一个标量，则必须将其放在引号中。但是我希望以下是正确的 YAML：

```
- %users users have connected: %users users have connected 
```

但 PyYAML 不接受它，您也必须在此处使用引号。

# django - Django form "Enter a valid date."

> ID：16151971
> 
> 赞同：4
> 
> 时间：2013-04-22T16:23:56.273
> 
> 标签：django, forms, date, date-format

I'm having problem writing a simple form. This is my model for that form.

```
class UserStock(models.Model):
    amount = models.FloatField(default=0)
    date = models.DateTimeField('buy date')
    stockPrice = models.FloatField(default=0)
    user = models.ForeignKey(User)
    stock = models.ForeignKey(Stock) 
```

This is my forms.py file

```
from django import forms
from datetime import date

class AddStockForm(forms.Form):
    stock = forms.CharField(max_length=10)
    amount = forms.FloatField(initial=0)
    #, initial=date.today, input_formats=settings.DATE_INPUT_FORMATS
    date = forms.DateField('buy date', initial=date.today)
    stockPrice = forms.FloatField(initial=0) 
```

This is my first version for submitting form data.

```
@login_required(login_url='/login/')
def new_stock(request):
    if request.method == 'POST':
        form = AddStockForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data

            #dateForm = datetime.datetime.strptime(cd['date'],"%Y-%m-%d")
            userStock = UserStock(amount = cd['amount'], date=cd['date'], stockPrice = cd['StockPrice'])
            userStock.user = request.user
            stockForm = Stock.objects.filter(symbol=cd['stock'])
            userStock.stock = stockForm
            userStock.save()
    else:
        form = AddStockForm()

    template = loader.get_template("userStocks/new.html")
    context = RequestContext(request, {
        'form':form.as_p(),
    })
    return HttpResponse(template.render(context)) 
```

This is what my error looks like. ![enter image description here](https://i.stack.imgur.com/wi9bl.png) Error while submitting: Enter a valid date. I guess that it's Django's auto-check format. I googled a lot but didn't help. I have tried input_formats variations, but no luck. Thanks in advance for help.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T16:38:15.483

I think this line will do.

```
date = forms.DateField(label='buy date', input_formats=['%Y-%m-%d'], initial=date.today) 
```

I think the form was accepting 'buy date' as your input format, that's why when you try to set it manually it sends the duplicated error.

Hope this works

PS: Maybe after specifying that "buy date" is your label, you may be able to remove the input_formats attribute.

# c - MPI - 发送和接收列

> ID：16151973
> 
> 赞同：2
> 
> 时间：2013-04-22T16:24:06.107
> 
> 标签：c, matrix, mpi

我需要从一个进程发送一个矩阵列并从另一个进程接收它。我尝试运行以下程序，但得到了一个奇怪的结果（至少我是这么认为的）；仅复制了矩阵的第一个元素，并且某些矩阵元素发生了意外变化。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include "mpi.h"

void swap(int* a,int* b){
    int temp;
    temp=*a;
    *a=*b;
    *b=temp;
}
void print_matrix(double** A,int n){
    int i,j;
    for(i=0;i<n;i++){
        for(j=0;j<n;j++){
            printf("%f ",A[i][j]);
        }
        printf("\n");
    }
}

int main(int argc, char *argv[]){
    int i,j,k,l,n,myid,p,maxp;
    double **A;
    MPI_Datatype col_type;
    MPI_Status status;

    n=3;
    A=malloc(n*sizeof(double*)); /*allocating memory */
    for(i=0;i<n;i++)
        A[i]=malloc(n*sizeof(double));

    A[0][0]=-1;
    A[0][1]=2;
    A[0][2]=-1;
    A[1][0]=2;
    A[1][1]=-1;
    A[1][2]=0;
    A[2][0]=1;
    A[2][1]=7;
    A[2][2]=-3;

    MPI_Init(&argc,&argv);

    MPI_Type_vector(n, 1, n, MPI_DOUBLE,&col_type);
    MPI_Type_commit(&col_type);
    MPI_Comm_size(MPI_COMM_WORLD,&p);
    MPI_Comm_rank(MPI_COMM_WORLD,&myid);

    if(myid==0){
        printf("Starting Method with p=%d\n",p);
        print_matrix(A,n);
    }
    if(myid==0){
            maxp=2;
            A[0][0]=-43;
            A[1][0]=-33;
            A[2][0]=-23;
            printf("BEFORE SENDING\n");
            print_matrix(A,n);
            for(l=0;l<p;l++)
                if(l!=myid){ 
                    MPI_Send(&A[0][0], 1, col_type,l,0,MPI_COMM_WORLD);
                    MPI_Send(&maxp,1,MPI_INT,l,1,MPI_COMM_WORLD);
                }
            printf("AFTER SENDING\n");
            print_matrix(A,n);
    }
    else{
            //receive(k)
            printf("BEFORE RECIEVING\n");
            print_matrix(A,n);
            MPI_Recv(&A[0][1],1,col_type,0,0,MPI_COMM_WORLD,&status);
            MPI_Recv(&maxp,1,MPI_INT,0,1,MPI_COMM_WORLD,&status);
            printf("Just Recieved\n");
            print_matrix(A,n);
    }

    MPI_Finalize();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T17:19:14.620

问题在于您的分配：

```
A=malloc(n*sizeof(double*)); /*allocating memory */
for(i=0;i<n;i++)
    A[i]=malloc(n*sizeof(double)); 
```

这很好，但它不一定分配一个连续的 n*n 双精度数组；它分配了 n 个包含 n 个 double 的数组，这些数组可以相对于彼此分散在整个内存中。哪个（除了潜在的缓存问题）也很好，除了当您以这种方式定义列时：

```
MPI_Type_vector(n, 1, n, MPI_DOUBLE,&col_type); 
```

例如，n 个双打，每一个都与前一个双打相差 n，您假设所有数据都布置在一个大块中。

最容易改变的是你的分配，以确保它是连续且有序的（这几乎总是你想要的科学计算）：

```
A=malloc(n*sizeof(double*));        /*allocating pointers */
A[0] = malloc(n*n*sizeof(double));  /* allocating data */
for(i=1;i<n;i++)
    A[i]=&(A[0][i*n]);

/* ... */

free(A[0]);
free(A); 
```

# wpf - 在数据网格列中显示 ObservableCollection 的元素

> ID：16151976
> 
> 赞同：0
> 
> 时间：2013-04-22T16:24:08.690
> 
> 标签：wpf, data-binding, mvvm, datagrid, observablecollection

我有一个程序，我正在读取一个包含 2 列的 .csv 文件，并且我的模型有 2 个属性。我在读取文件时获取此模型的实例，然后将它们添加到我的 ObvervableCollection。

这是它的样子：

```
// My data field
private ObservableCollection<Model> _internalFile = new ObservableCollection<Model>(); 

// My data accessor/setter
public ObservableCollection<Model> InternalFile { get { return _internalFile; } set { _internalFile = value; } }

Model x = new Model();

while (fileReader.Peek() != -1)
  {
    // words = read the line, split the line, make a list of columns
    var words = fileReader.ReadLine().Split(',').ToList();
    if (words[0] != "Name")
    {
     x.asWord = words[0];
     x.asNumber = int.Parse(words[1]);
     InternalFile.Add(x); 
     // InternalFile is a collection of 'Model' objects. 
     // So created 'Model' placeholder , x, and pile each instance of x 
     // in the collection to be displayed. 
    }
  } 
```

我的 XAML 看起来像这样

```
<Window x:Class="WpfMVVP.WindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfMVVP"
    Title="Window View" Height="350" Width="525" Background="White">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <DataGrid Grid.Row="0" AutoGenerateColumns="False" CanUserReorderColumns="False" ItemsSource="{Binding Path=InternalFile}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="As Word" IsReadOnly="True" Width="Auto" Binding="{Binding asWord}" />
            <DataGridTextColumn Header="As Number" IsReadOnly="True" Width="Auto" Binding="{Binding asNumber}" />
         </DataGrid.Columns>
    </DataGrid>

    <Label Grid.Row="1" Content="{Binding Status}" />
</Grid> 
```

在显示的窗口中，我看到列已填充，但所有行都是在文件结束之前读取的最后一行。就好像 ObservableCollection 正在用新值覆盖其先前的元素。我不知道它为什么会这样。

![应用程序窗口](https://i.stack.imgur.com/2B8hO.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:58:17.963

您只创建`Model`一次，并在每次读取最后一次数据时覆盖它。您要做的是`Model`为读取的每一行创建一个新的。您可以简单地将您的`Model`实例化移动到您的 while 循环中。（见下文）

```
// My data field
private ObservableCollection<Model> _internalFile = new ObservableCollection<Model>(); 

// My data accessor/setter
public ObservableCollection<Model> InternalFile { get { return _internalFile; } set { _internalFile = value; } }

while (fileReader.Peek() != -1)
  {
    Model x = new Model();
    // words = read the line, split the line, make a list of columns
    var words = fileReader.ReadLine().Split(',').ToList();

      if ((words[0] != "Name") && (!String.IsNullOrEmpty(words[0]))
      {
        x.asWord = words[0];
        x.asNumber = int.Parse(words[1]);
        InternalFile.Add(x); 
        // InternalFile is a collection of 'Model' objects. 
        // So created 'Model' placeholder , x, and pile each instance of x 
        // in the collection to be displayed. 
      }
  } 
```

# hibernate - 休眠限制。或

> ID：16151979
> 
> 赞同：0
> 
> 时间：2013-04-22T16:24:25.550
> 
> 标签：hibernate, restriction

我想知道为什么 Restrictions.or 只能接受 2 个参数。

我需要做类似下面的事情。

```
(A and B) or (C and D) or ( E and F ) or (G and H) or ... 
```

任何想法都可以实现这一目标？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:13:54.763

根据[API Documentation](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/criterion/Restrictions.html#or%28org.hibernate.criterion.Criterion...%29)，该`.or(...)`方法已重载。您引用的一个和另一个采用数组 o

> 公共静态析取或（标准...谓词）

# javascript - jQuery AJAX 请求被视为 application/xml 而不是 text/xml

> ID：16151981
> 
> 赞同：0
> 
> 时间：2013-04-22T16:24:29.823
> 
> 标签：javascript, jquery, xml, ajax

我对 XML 文件进行了简单的**AJAX**请求，但它不是 text/xml，而是将其作为 application/xml 返回，这显然给了我一些问题。

代码：

```
method.getXmlData = function () {
  return jQuery.ajax({
    type: "GET",
    url: "testxml.xml?id=" + theQuizId,
    async: false,
    dataType: "xml"
  });
};
theQuizData = method.getXmlData(); 
```

有人有类似的问题吗？

*注意：由于 CORS，不能包含 js-fiddle。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:53:45.227

我通过将代码更改为以下内容来使其工作：

```
method.getXmlData = function () {
var outerData;
jQuery.ajax({
  type: "GET",
  url: "testxml.xml?id=" + theQuizId,
  async: false,
  cache: false,
  dataType: "xml",
  success : function(data) {
    outerData = data;
  }
});
return outerData;
};
theQuizData = method.getXmlData(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T16:32:57.417

您在哪个浏览器上尝试上述代码？尝试使用`dataType : "text/xml"`而不是 xml 。IE 以不同的方式处理 XML 数据类型（作为 ActiveXObject，其他浏览器（如 chrome）将它们作为简单 XML 处理）。例如。

```
$.ajax({ 
    url : "myUrl", 
    type : 'post', 
    dataType: ($.browser.msie) ? "text" : "xml",
    success: function(data) {
        var xml;
          if (typeof data == 'string') {
            /*This is for IE*/
            xml = new ActiveXObject("Microsoft.XMLDOM");
            xml.async = false;
            xml.loadXML(data);
          } else {
            xml = data;
          }
    }
} 
```

# crystal-reports - 组汇总的水晶报表总和

> ID：16151982
> 
> 赞同：4
> 
> 时间：2013-04-22T16:24:29.703
> 
> 标签：crystal-reports

我有一份报告，我试图将一个组的摘要汇总到另一组。前任：

```
 group 1: 75         <- sum of the maximums 
       group 2: 50     <- max of the group
           line 1: 50
           line 2: 40
           line 3: 10
       group 2: 25     <- max of the group
           line 1: 10
           line 2: 2
           line 3: 25 
```

我尝试过使用运行总计，但似乎无法做到这一点。我也尝试将最大部分放入公式中，但水晶仍然不会总结它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:38:14.723

If you absolutely have to have the value in the Group1 Header then I think your only option will be a SQL Expression.

The Group1 Footer would be much easier. The gist is that you can simply keep track of the sum of the maxes with a variable.

```
//Place this formula in the Group1 Header
whileprintingrecords;
numbervar g1sum := 0;

//Place this formula in the Group2 Footer
whileprintingrecords;
numbervar g1sum;
g1sum := g1sum + maximum({table.value},{table.group2_field})

//Place this formula in the Group1 Footer
whileprintingrecords;
numbervar g1sum; 
```

# javascript - 使用 jQuery 确定是否存在不包含选项的 SelectBox

> ID：16151986
> 
> 赞同：0
> 
> 时间：2013-04-22T16:24:49.473
> 
> 标签：javascript, jquery

所以这个问题在网上被问了很多，我看到答案是检查 .length 是否 > 0。

因此，在我的情况下，选择框可能存在也可能不存在。如果存在，它可能没有选项。

我必须编写以下代码：

如果选择框存在...如果没有选择框选项...禁用文本区域

因此，我写了以下内容：

```
$(document).ready(function () {
    "use strict";

    alert('running globals');
    // Only process this block if the contactEmailAddress select box exists
    if ($('contactEmailAddress').length > 0) {
        alert('on the comm page');

        // If there are no contacts ...
        if ($('#contactEmailAddress option').size() === 0) {
            alert('disabling the message box');
            $('#message').attr("disabled", "disabled");
        }
    }
}); 
```

问题是，因为选择框没有选项，所以决定 selectbox.length 为 0。所以这个块永远不会触发。

我需要另一种方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T16:27:01.653

您缺少第一个中的“ID 选择器” `$`，而是搜索*名为* `contactEmailAddress`的元素，而不是*ID*为 的元素`contactEmailAddress`。

```
if ($('#contactEmailAddress').length > 0) { 
```

请注意，您可以直接执行此操作`$('#contactEmailAddress option').size()`，而不必担心选择是否存在；不会抛出异常或错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:33:34.590

您可以使用纯 JavaScript 确定元素是否存在。

```
if( document.getElementById("contactEmailAdress") ) 
```

或者

```
if( document.getElementsByClassName("option")[0] ) 
```

# php - WriteHTML 不呈现 FPDF 插件

> ID：16151994
> 
> 赞同：0
> 
> 时间：2013-04-22T16:25:13.013
> 
> 标签：php, wordpress, fpdf

我有最新版本的 FPDF，我正在尝试将其扩展为使用 FPDF。在我尝试实际使用 WriteHTML 类之前，一切正常。

```
 /**
  * FPDF functionality to load page as a PDF
  **/

//retrieve variables from singlerecipe.php using $post
$title = $_REQUEST["title"];
$description = $_REQUEST["description"];

//loads FPDF class
//require '/fpdf/fpdf.php';
require 'WriteHTML.php'; 

//starts new FPDF
$pdf=new FPDF();

// tells FPDF to add a new page to the PDF file
$pdf->AddPage();
$pdf->SetDisplayMode(real,'default');
// set font
$pdf->SetFont('Arial','B',16);
//$html='<hr>';
//sets width and height
$pdf->SetXY(0,10);
$pdf->Cell(20,10,$title);
$pdf->SetXY(150,10);
$pdf->Cell(40,10,'logo');
$pdf->SetXY(0,30);
$pdf->Cell(30,10,'Description');
$pdf->WriteHTML($description);

//outputs a PDF
$pdf->Output();
exit; 
```

?>

这是来自 post 的 $description 输出的示例。

```
<p>2.5 Meat/Meat Alternative</p> 
```

最后是我想要包含的名为 WriteHTML 的类。

```
<?php
require('/fpdf/fpdf.php');

//function hex2dec
//returns an associative array (keys: R,G,B) from
//a hex html code (e.g. #3FE5AA)
function hex2dec($couleur = "#000000"){
    $R = substr($couleur, 1, 2);
    $rouge = hexdec($R);
    $V = substr($couleur, 3, 2);
    $vert = hexdec($V);
    $B = substr($couleur, 5, 2);
    $bleu = hexdec($B);
    $tbl_couleur = array();
    $tbl_couleur['R']=$rouge;
    $tbl_couleur['V']=$vert;
    $tbl_couleur['B']=$bleu;
    return $tbl_couleur;
}

//conversion pixel -> millimeter at 72 dpi
function px2mm($px){
    return $px*25.4/72;
}

function txtentities($html){
    $trans = get_html_translation_table(HTML_ENTITIES);
    $trans = array_flip($trans);
    return strtr($html, $trans);
}
////////////////////////////////////

class PDF_HTML extends FPDF
{
//variables of html parser
var $B;
var $I;
var $U;
var $HREF;
var $fontList;
var $issetfont;
var $issetcolor;

function PDF_HTML($orientation='P', $unit='mm', $format='A4')
{
    //Call parent constructor
    $this->FPDF($orientation,$unit,$format);
    //Initialization
    $this->B=0;
    $this->I=0;
    $this->U=0;
    $this->HREF='';
    $this->fontlist=array('arial', 'times', 'courier', 'helvetica', 'symbol');
    $this->issetfont=false;
    $this->issetcolor=false;
}

function WriteHTML($html)
{
    //HTML parser
    $html=strip_tags($html,"<b><u><i><a><img><p><br><strong><em><font><tr><blockquote>"); //supprime tous les tags sauf ceux reconnus
    $html=str_replace("\n",' ',$html); //remplace retour à la ligne par un espace
    $a=preg_split('/<(.*)>/U',$html,-1,PREG_SPLIT_DELIM_CAPTURE); //éclate la chaîne avec les balises
    foreach($a as $i=>$e)
    {
        if($i%2==0)
        {
            //Text
            if($this->HREF)
                $this->PutLink($this->HREF,$e);
            else
                $this->Write(5,stripslashes(txtentities($e)));
        }
        else
        {
            //Tag
            if($e[0]=='/')
                $this->CloseTag(strtoupper(substr($e,1)));
            else
            {
                //Extract attributes
                $a2=explode(' ',$e);
                $tag=strtoupper(array_shift($a2));
                $attr=array();
                foreach($a2 as $v)
                {
                    if(preg_match('/([^=]*)=["\']?([^"\']*)/',$v,$a3))
                        $attr[strtoupper($a3[1])]=$a3[2];
                }
                $this->OpenTag($tag,$attr);
            }
        }
    }
}

function OpenTag($tag, $attr)
{
    //Opening tag
    switch($tag){
        case 'STRONG':
            $this->SetStyle('B',true);
            break;
        case 'EM':
            $this->SetStyle('I',true);
            break;
        case 'B':
        case 'I':
        case 'U':
            $this->SetStyle($tag,true);
            break;
        case 'A':
            $this->HREF=$attr['HREF'];
            break;
        case 'IMG':
            if(isset($attr['SRC']) && (isset($attr['WIDTH']) || isset($attr['HEIGHT']))) {
                if(!isset($attr['WIDTH']))
                    $attr['WIDTH'] = 0;
                if(!isset($attr['HEIGHT']))
                    $attr['HEIGHT'] = 0;
                $this->Image($attr['SRC'], $this->GetX(), $this->GetY(), px2mm($attr['WIDTH']), px2mm($attr['HEIGHT']));
            }
            break;
        case 'TR':
        case 'BLOCKQUOTE':
        case 'BR':
            $this->Ln(5);
            break;
        case 'P':
            $this->Ln(10);
            break;
        case 'FONT':
            if (isset($attr['COLOR']) && $attr['COLOR']!='') {
                $coul=hex2dec($attr['COLOR']);
                $this->SetTextColor($coul['R'],$coul['V'],$coul['B']);
                $this->issetcolor=true;
            }
            if (isset($attr['FACE']) && in_array(strtolower($attr['FACE']), $this->fontlist)) {
                $this->SetFont(strtolower($attr['FACE']));
                $this->issetfont=true;
            }
            break;
    }
}

function CloseTag($tag)
{
    //Closing tag
    if($tag=='STRONG')
        $tag='B';
    if($tag=='EM')
        $tag='I';
    if($tag=='B' || $tag=='I' || $tag=='U')
        $this->SetStyle($tag,false);
    if($tag=='A')
        $this->HREF='';
    if($tag=='FONT'){
        if ($this->issetcolor==true) {
            $this->SetTextColor(0);
        }
        if ($this->issetfont) {
            $this->SetFont('arial');
            $this->issetfont=false;
        }
    }
}

function SetStyle($tag, $enable)
{
    //Modify style and select corresponding font
    $this->$tag+=($enable ? 1 : -1);
    $style='';
    foreach(array('B','I','U') as $s)
    {
        if($this->$s>0)
            $style.=$s;
    }
    $this->SetFont('',$style);
}

function PutLink($URL, $txt)
{
    //Put a hyperlink
    $this->SetTextColor(0,0,255);
    $this->SetStyle('U',true);
    $this->Write(5,$txt,$URL);
    $this->SetStyle('U',false);
    $this->SetTextColor(0);
}

}//end of class
?> 
```

我也在尝试将此功能合并到 wordpress 页面中，所以我认为这可能会给我带来一些麻烦……但是，它仍然适用于原始 FPDF 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:23:16.633

我通过绕过整个 WriteHTML 类并仅使用 strip_tags、utf8_decode 和 Write 方法进行格式化，半解决了这个问题。它不是 html，但它会在此期间完成。

```
$description = strip_tags(utf8_decode($_REQUEST["description"]));

$pdf->Write(5, $description); 
```

希望这已经足够了！