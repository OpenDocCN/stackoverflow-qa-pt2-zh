# StackOverflow 问答 12600000-12600999

# jquery - jQuery contains() - 只选择底部的 div

> ID：12600011
> 
> 赞同：1
> 
> 时间：2012-09-26T10:48:13.037
> 
> 标签：jquery, contains

好的，所以我正在尝试使用 contains() 选择器来修改 div 的 css。请看小提琴：http: [//jsfiddle.net/6mdqf/](http://jsfiddle.net/6mdqf/)

如您所见，该函数选择了父 div，即使它不直接包含文本“John”；文本保存在子 div 中。如果您删除父 div，则一切正常。

如何确保仅选择包含文本“John”的子 div，而父 div 和其他子级不被选中？

希望我的问题有意义...

代码：

```
<div>
    <div>John Resig</div>
    <div>George Martin</div>
    <div>Malcom John Sinclair</div>
    <div>J. Ohn</div>
</div> 
```

和 js

```
$("div:contains('John')").css("text-decoration", "underline"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T10:52:55.283

由于父 div 具有包含该特定文本的子元素，因此您的选择器会选择父 div 及其子元素，请尝试以下操作。

```
$("div:not(:has(*)):contains('John')").css("text-decoration", "underline"); 
```

[http://jsfiddle.net/rwQ3u/](http://jsfiddle.net/rwQ3u/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T10:54:44.187

另一种方法是在 div 中调用子元素，并在子元素中使用`contains()`选择器。

```
$("div").children(":contains('John')").css("text-decoration", "underline");​ 
```

[JSFiddle](http://jsfiddle.net/6mdqf/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:51:28.083

因为您首先有一个 div 并且它在其中搜索并在 div 中找到 John 并全选，所以试试这个：

```
<div>
    <div class="search">John Resig</div>

    <div class="search">George Martin</div>
    <div class="search">Malcom John Sinclair</div>
    <div class="search">J. Ohn</div>
</div>
​$(document).ready(function(){
    $("div .search:contains('John')").css("text-decoration", "underline");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T10:52:28.257

```
$("div>:contains('John')").css("text-decoration", "underline"); 
```

编辑jsFiddle：http: [//jsfiddle.net/6mdqf/1/](http://jsfiddle.net/6mdqf/1/)

# oauth - 使用自定义登录页面使用 Google ID 登录 liferay

> ID：12600014
> 
> 赞同：0
> 
> 时间：2012-09-26T10:48:18.347
> 
> 标签：oauth, liferay, google-openid

我们正在 liferay 上开发一个门户，用户应该能够使用他们的 Google ID 登录到 liferay。

在这里，我们必须为用户提供一个自定义登录页面，该页面使用 Google ID 对用户进行身份验证。但是我找不到关于如何使用谷歌 ID 登录 Liferay 的解决方案。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:57:37.917

谷歌做 OpenID，对吧？您可以在 Liferay 中启用 OpenID - 当您输入您的 google-openID 身份时，您将被转发到 google 进行身份验证。

ControlPanel/Portal Settings/Authentication/OpenID 有复选框。

为了让它更舒服一些（例如，直接重定向到 google 或使用标准 OpenId 提供程序提供按钮，例如在 stackoverflow.com 上），您可能想要自定义登录 Portlet，但正如您特别询问如何启用此功能 - 这是它。

# unix - cp 命令不应该失败

> ID：12600015
> 
> 赞同：0
> 
> 时间：2012-09-26T10:48:28.420
> 
> 标签：unix, ksh, aix

我正在尝试写一篇文章，我正在尝试在 ${File} 和 ${File}.new 之间进行文件交换

原始代码是这样的 -

```
generate ${File}.new
mv ${File} ${File}.backup
mv ${File}.new ${File} 
```

在某些情况下它失败了，当第一个 mv 完成但第二个 mv 尚未完成时，可能会请求 ${File}。并且该请求被拒绝，因为该文件不可用该名称。很少发生，但仍然发生（昨天发生，这是 6 周内的第一次）

为避免这种情况，我考虑替换`mv`为`cp`，因此，我正在尝试构建这样的东西 -

```
generate ${File}.new
cp ${File} ${File}.backup
cp ${File}.new ${File}

rm ${File}.new 
```

现在，我的挑战是，在我写入 ${File} 的那一刻，如果有一个进程在那个时候读取它，复制可能会失败，说它无法获得对象上的锁。

我对失败的恐惧真的有根据吗？

我想告诉程序等待几秒钟/几分钟，然后再试一次，而不是失败。

我在带有 korn shell 的 AIX 6.1 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:49:12.233

您可以使用硬链接来执行备份部分：

```
generate ${File}.new
ln -f ${File} ${File}.backup
mv ${File}.new ${File} 
```

之后`ln`，旧文件将有两个文件名。之后`mv`，只有`.backup`文件名会引用旧文件，`${File}`才会引用新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T16:54:19.847

看看你能不能让它为你工作。使“file”成为指向另外两个文件 file1 和 file2 的符号链接。使用命令“ln -fs file1 file”来创建这个链接。当有人打开“文件”时，操作系统会将您重定向到“文件 1”。当您希望创建备份时，运行命令“ln -fs 文件 2 文件”，现在文件将指向文件 2。然后，您可以在 file1 上做任何您想做的事情。反转该过程以返回到 file1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:54:11.750

我不知道你的系统，但我说`cp -f`如果它不能立即覆盖它，它将删除文件。（也有自动备份文件的选项，但请查看系统手册。）

# android - 不先调用MainActivity，在android中调用另一个activity

> ID：12600016
> 
> 赞同：0
> 
> 时间：2012-09-26T10:48:28.340
> 
> 标签：android, multithreading

我正在制作一个应用程序，我必须在其中显示一个欢迎页面仅 5 秒钟，然后重定向到另一个活动。但是，我没有得到我想要的，因为我先得到另一个活动，然后单击模拟器的后退按钮后得到 MainActivity，这是不正确的。那么有人可以帮助我吗？

我正在放置一些代码供您参考，特别是欢迎活动和清单代码：

```
 public class Welcome extends Activity   
 {  
    private Runnable runnable;  
    private static final String TAG="Welcome";  

    /** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState)   
    {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  

        runnable=new Runnable() {  

            public void run() {  
                try  
                {  
                    Log.v(TAG,"Going to sleep...");  
                    Thread.sleep(3000);  
                    Log.v(TAG,"Going to wake up...");  

                }  
                catch(Exception e)  
                {  
                    e.printStackTrace();  
                }  
            }  
        };  
        try  
        {  
            Thread t=new Thread(null,runnable);  
            t.start();  
            Intent i=new Intent(this,TabSample.class);  
                startActivity(i);  
        }  
        catch(Exception e)  
        {  

        }  

    }  
  } 
```

AndroidManifest.xml

```
<activity
        android:name=".Welcome"
        android:label="Restaurant Application" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".TabSample"></ 
```

主要的.xml

```
 <ImageView
       android:id="@+id/imageView1"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:layout_alignParentRight="true"
       android:src="@drawable/home" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:56:28.777

像这样使用意图

```
Intent i=new Intent(Welcome.this,TabSample.class);  
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:57:30.633

你应该试试这个。

```
 public class Welcome extends Activity   
     {  
        private Runnable runnable;  
        private static final String TAG="Welcome";  

        /** Called when the activity is first created. */  
        @Override  
        public void onCreate(Bundle savedInstanceState)   
        {  
            super.onCreate(savedInstanceState);  
            setContentView(R.layout.main);  

            runnable=new Runnable() {  

                public void run() {  
                    try  
                    {  
                        Log.v(TAG,"Going to sleep...");  
                        Thread.sleep(3000);  
                        Log.v(TAG,"Going to wake up...");  

                       runOnUiThread(new Runnable() .
                         {

                         @Override
                         public void run() 
                         {
                            Intent i=new Intent(this,TabSample.class);  
                                           startActivity(i);  

                          }
            });

                    }  
                    catch(Exception e)  
                    {  
                        e.printStackTrace();  
                    }  
                }  
            };  
            try  
            {  
                Thread t=new Thread(null,runnable);  
                t.start();  

            }  
            catch(Exception e)  
            {  

            }  

        }  
      } 
```

因为如果您以与威胁并行的方式启动 Activity，那么它将毫无延迟地继续前进，并且线程将在后台运行。所以把你的startactivity代码放在runonuithread中。像上面一样。

它可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:58:33.987

# 尝试这个

```
 Thread thread = new Thread() {
                public void run() {
                    try {

                        Thread.sleep(5000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    Intent intent = new Intent(Welcome.this, TabSample.class);
                    startActivity(intent);

                    finish();
                }
            };
            thread.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T10:58:36.050

您可以使用 timertask 来显示一段时间的欢迎屏幕所以这就是你如何去做的。

```
import java.util.Timer;
import java.util.TimerTask;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Window;
public class Welcome extends Activity {
private long splashDelay = 5000; //5 seconds

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TimerTask task = new TimerTask()
    {

        @Override
        public void run() {
            finish();
            Intent mainIntent = new Intent().setClass(Welcome.this, TabSample.class);
            startActivity(mainIntent);
        }

    };

    Timer timer = new Timer();
    timer.schedule(task, splashDelay);
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:00:06.860

如果您只需要显示**欢迎**活动 5 秒钟，请修改您的主题。移除并插入

```
Intent i=new Intent(this,TabSample.class);  
startActivity(i); 
```

里面可运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T11:08:03.240

您只能使用处理程序来做到这一点。代码将是这样的

```
Runnable GotoMenu;
Handler CallMenu = new Handler();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);       
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.splash);

    GotoMenu = new Runnable(){
        public void run(){
            CallMenu.removeCallbacks(GotoMenu);
            Intent i = new Intent(getApplicationContext(), TabSample.class);
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(i);
            finish();
        }
    };
    CallMenu.postDelayed(GotoMenu, 2000);

} 
```

# php - Salesforce REST Api 缺少 PHP 字段

> ID：12600020
> 
> 赞同：1
> 
> 时间：2012-09-26T10:48:33.607
> 
> 标签：php, api, salesforce

我正在使用**Salesforce REST API**，发现很难找到像样的文档。我可以使用 OAuth 成功登录，并且可以将新帐户推送到 Salesforce。我使用实例 url 进行 API 调用，并发送以下字段来创建帐户对象：

```
Name
Rating
Description 
```

问题是我创建了一个免费试用版（位于 na9.salesforce.com）并且一切正常。

我创建了第二个免费试用版以检查其他帐户是否一切正常，但评级字段不可用...我从 Salesforce 收到以下消息：

```
"[{"message":"No such column 'rating' on sobject of Account"}]" 
```

这是为什么？

另外，是否可以使用 POST 向创建的帐户添加注释？是否可以使用 API 创建线索而不是帐户？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:51:05.303

称为字段级别安全性 (FLS) 的功能可能意味着即使标准字段也无法访问，请检查您的第二个组织中帐户的 FLS 设置。

REST API 的文档位于[开发人员力量网站上](http://www.salesforce.com/us/developer/docs/api_rest250/index.htm)

# opengl-es - 如何从 OpenGL ES 中的渲染纹理中读取像素

> ID：12600023
> 
> 赞同：1
> 
> 时间：2012-09-26T10:48:47.490
> 
> 标签：opengl-es

我正在尝试从动态生成的纹理（RTT，渲染到纹理）中读取像素。我通过实施[此处](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)列出的 Apple 建议方法来拍摄此快照。

这适用于呈现到屏幕上的“默认”颜色缓冲区，但我无法让它适用于写入纹理的像素。

我对这些行有问题：

```
// Bind the color renderbuffer used to render the OpenGL ES view
// If your application only creates a single color renderbuffer which is already bound at this point,
// this call is redundant, but it is needed if you're dealing with multiple renderbuffers.
// Note, replace "_colorRenderbuffer" with the actual name of the renderbuffer object defined in your class.
glBindRenderbufferOES(GL_RENDERBUFFER_OES, _colorRenderbuffer);

// Get the size of the backing CAEAGLLayer
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight); 
```

问题是我没有颜色缓冲区，因为我正在渲染到纹理中。

这是我创建纹理的方法：

```
void Texture::generate()
{
    // Create texture to render into
    glActiveTexture(unit);
    glGenTextures(1, &handle);
    glBindTexture(GL_TEXTURE_2D, handle);

    // Configure texture
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, minFilter);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, magFilter);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
} 
```

以下是我如何将其链接到用于渲染的 FBO：

```
void Texture::attachToFrameBuffer(GLuint framebuffer)
{
    this->framebuffer = framebuffer;

    // Attach texture to the color attachment of the provided framebuffer
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, handle, 0);
} 
```

如您所见，我并没有真正可以首先绑定到的 _colorRenderbuffer。我首先认为绑定到帧缓冲区然后执行 Apple 的代码可以解决问题，但是 backingWidth 和 backingHeight 并没有给我纹理的分辨率（2048x2048），而是我的场景的分辨率（320x320）。所以我想我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:06:23.977

在你可以渲染成纹理之前，它需要有一些内部存储，所以你需要`glTexImage2D`在渲染到它之前的某个时间点调用（可能`NULL`作为图像数据传递，因此只是分配纹理图像）。

> 但是 backingWidth 和 backingHeight 没有给我纹理的分辨率

你为什么要检索这些值（当然这些检索函数不起作用，因为它们在渲染缓冲区上工作，正如它们的名字所暗示的那样）。你已经知道了，因为是**你**创造了纹理（见上文）。

一旦渲染到纹理中，您就可以`glReadPixels`像捕获普通屏幕一样调用，因为您的纹理现在是帧缓冲区，因此从帧缓冲区读取像素会从纹理中读取像素（当然 FBO 仍然必须绑定打电话时`glReadPixels`）。

这实际上是在 ES 中读回任何纹理数据的唯一方法，它没有`glGetTexImage`，但是因为你只是渲染到它里面，所以这绝对没有问题。

# javascript - 如何从 url 中获取参数？

> ID：12600024
> 
> 赞同：-1
> 
> 时间：2012-09-26T10:48:48.193
> 
> 标签：javascript

> **可能重复：**
> [如何从 URL 参数中获取值？](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)

我有这个网址：`http://example.com/photos/5062d95d-13e8-ceb8-bb35-5891b62a3418/?id=872364876`

我有这个javascript代码：

```
if (sssssssssss) {
    window.location = "http://example.com/s/1525";
} else {
    location.replace('http://example.com/id=');
} 
```

我需要`id`从该`else`部分的 GET 参数中填充值。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:54:10.827

这是一个如何使用 javascript 从 url 获取变量的示例

```
function getUrlVars() {
     var vars = {};
     var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
          vars[key] = value;
     });
     return vars;
} 
```

来源： http: [//papermashup.com/read-url-get-variables-withjavascript/](http://papermashup.com/read-url-get-variables-withjavascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:01:35.027

检查此代码

```
var start= location.href.indexOf('id=');
var id= location.href.substring(start+ 3, location.length- 1); 
```

# java - 有没有更好的方法来用 Java 编写这段代码（用于 web 表处理）？

> ID：12600029
> 
> 赞同：1
> 
> 时间：2012-09-26T10:48:55.527
> 
> 标签：java, selenium, automation, selenium-webdriver

我有两种相同的方法。不幸的是，选项二有时有效（10 次中有 5 次）...选项一很少有效（10 次中有 2 次）...有没有更好的方法来编写此代码...

一：

```
public static void clickOnLinkinWebTable(WebElement webTable, String lookUpValue) throws MyException {
    for (WebElement row : webTable.findElements(By.xpath("tr"))) {
        for (WebElement col : row.findElements(By.xpath("td")))
            if (col.getText().equals(lookUpValue)) {
                col.findElement(By.partialLinkText(lookUpValue)).click();
                return;
            }

    }
} 
```

二：

```
public static void clickOnLinkinWebTable(String tableXpathRow, String lookUpValue) throws MyException {
    int row_cnt = driver.findElements(By.xpath(tableXpathRow)).size();
        for (int row_num = 1; row_num <= row_cnt; row_num++) {
                int col_cnt = driver.findElements(By.xpath(tableXpathRow+"["+row_num+"]"+"/td")).size();
                for (int col_num = 1; col_num <= col_cnt; col_num++) {
                String cellValue = driver.findElement(By.xpath(tableXpathRow+"["+row_num+"]/td["+col_num+"]")).getText();
                if(lookUpValue.equalsIgnoreCase(cellValue)){
                    WebElement elementLink = driver.findElement(By.xpath(tableXpathRow+"["+row_num+"]/td["+col_num+ "]/a"));
                elementLink.click();
                return;
            }
        }
    }
} 
```

有时/很少工作：我在测试套件中运行测试。此方法在测试套件中至少被调用 15 次（在同一页面中）。有时有效，但在调用此方法时有时无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:09:29.573

可以使用查找的 xpath 来单击 webtable 链接。

```
driver.findElement(By.xpath(path)).click(); 
```

在哪里

```
path="//td[contains(text(),lookupvalue)]" 
```

（这可以通过字符串 concat 来完成，如下所示）

```
String s="//td[contains(text(), ";
String qt=")]";
String path=(s.concat(lookupvalue)).concat(qt); 
```

希望这可以帮助。

# ruby-on-rails - Rails 新手。只是试图添加一个类并使用它时会发疯

> ID：12600033
> 
> 赞同：0
> 
> 时间：2012-09-26T10:49:12.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, netbeans-7

嗨，我知道我是 Rails 新手。我来自 ASP.Net mvc

但是尽管 Rails 中的大多数东西都很容易做，但有时 .net 中容易做的小事情会让你在 Rails 中发疯。

我有一个 Rails 应用程序，我只是想添加一个类。并在我的控制器中使用它。此类仅用于保存数据。不是来自数据库。只是一个简单的类供我使用

所以我首先在“/libs/assets”文件夹中添加了类文件。然后我读到我需要在 application.rb 文件中添加一行，说要从那里加载文件，所以我这样做了..

```
config.autoload_paths += Dir["#{config.root}/lib", "#{config.root}/lib/**/"] 
```

这仍然不起作用..所以我将我的类文件放在常规模型文件夹中。但它似乎仍然无法正常工作这是我的课程代码：

```
 class Person
    attr_accessor :name, :role

      def initialize(name, role)
         @name = name
         @role = role
      end

     end 
```

在我的一个控制器中尝试这样做：

```
Person.new("name", "worker"); 
```

但我收到此错误：未初始化的常量 MainController::Person

有什么大不了的？..为什么将公共类添加到项目中如此复杂？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:03:29.200

您必须要求指定类的 .rb 文件，您可以使用“require”或“require_relative”来做到这一点：

[http://rubylearning.com/satishtalim/including_other_files_in_ruby.html](http://rubylearning.com/satishtalim/including_other_files_in_ruby.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:08:53.617

在 Rails.root 中启动控制台：

```
rails c 
```

只需引用类名：

```
Person 
```

你看到了什么？

如果不知道更多，看起来您的加载路径可能不正确。看看里面有什么：

```
puts $:.join("\n") 
```

最后，暴力破解它可能会为您提供有关该问题的更多信息：

```
require Rails.root.join("app","models", "person") 
```

这会手动加载文件并跳过 rails 自动加载魔法。

# javascript - 获取主干集合时出错：必须指定“url”属性或函数

> ID：12600034
> 
> 赞同：1
> 
> 时间：2012-09-26T10:49:19.130
> 
> 标签：javascript, backbone.js

我尝试获取一个简单的主干集合，但出现以下错误。

> 必须指定“url”属性或函数

```
var Collection = Backbone.Collection.extend({url: '/path/toCollection'});
var collection = new Collection([]);
app.vent.bindTo('applicationDidBecomeActive', collection.fetch);
app.vent.trigger('applicationDidBecomeActive');
//Error: A "url" property or function must be specified 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:25:37.807

您是否需要绑定“this”参数？

```
app.vent.bindTo('applicationDidBecomeActive', collection.fetch, collection); 
```

# xcode - NSOutlineView 的 IBOutlet 未指向有效实例

> ID：12600040
> 
> 赞同：1
> 
> 时间：2012-09-26T10:49:41.823
> 
> 标签：xcode, cocoa

我在 Xcode 中创建了一个新的 Cocoa 应用程序项目，然后将一个 NSOutlineView 和一个 NSTextView 对象添加到窗口中。这两个对象被归类为 MyOutlineView 和 MyTextView。之后，我为他们做了两个出口并编写了如下代码。

我发现问题是应用程序在运行时有两个不同的 MyOutlineView 实例。工作（有效）大纲视图实例不等于 myOutlineView 插座实例。我错过了什么？

```
//
//  AppDelegate.h

#import <Cocoa/Cocoa.h>
#import "MyOutlineView.h"
#import "MyTextView.h"

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet MyOutlineView *myOutlineView;
@property (unsafe_unretained) IBOutlet MyTextView *myTextView;

@end

//
//  AppDelegate.m

#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)n
{
    NSLog(@"AppDelegate.myOutlineView(INVALID)::%@", _myOutlineView);
    NSLog(@"AppDelegate.myTextView::%@", _myTextView);
}

@end

//
//  MyOutlineView.h

#import <Cocoa/Cocoa.h>

@interface MyOutlineView : NSOutlineView <NSOutlineViewDataSource>;

@end

//
//  MyOutlineView.m

#import "MyOutlineView.h"

@implementation MyOutlineView

- (id)initWithCoder:(NSCoder *)aDecoder
{
    // This method is called first.
    self = [super initWithCoder:aDecoder];
    NSLog(@"MyOutlineView initWithCoder(INVALID)::%@", self);
    return self;
}

- (id)initWithFrame:(NSRect)frame
{
    // This method is also called but through a different instance with first one.
    self = [super initWithFrame:frame];
    NSLog(@"MyOutlineView initWithFrame(valid)::%@", self);
    return self;
}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item
{
    NSLog(@"MyOutlineView data source delegate(valid)::%@", self);
    return 0;
}

- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item
{
    return nil;
}

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item
{
    return NO;
}

@end

//
//  MyTextView.h

#import <Cocoa/Cocoa.h>

@interface MyTextView : NSTextView

@end

//
//  MyTextView.m

#import "MyTextView.h"

@implementation MyTextView

- (id)initWithCoder:(NSCoder *)aDecoder
{
    // This method is called.
    self = [super initWithCoder:aDecoder];
    NSLog(@"MyTextView initWithCoder::%@", self);
    return self;
}

- (id)initWithFrame:(NSRect)frame
{
    // But this method is NOT called at all.
    self = [super initWithFrame:frame];
    NSLog(@"MyTextView initWithFrame::%@", self);
    return self;
}

@end 
```

输出：

```
MyTextView initWithCoder::                 [MyTextView: 0x10013be80]
MyOutlineView initWithCoder(INVALID)::     [MyOutlineView: 0x10014bc90]
MyOutlineView initWithFrame(valid)::       [MyOutlineView: 0x1001604a0]
MyOutlineView data source delegate(valid)::[MyOutlineView: 0x1001604a0]
AppDelegate.myOutlineView(INVALID)::       [MyOutlineView: 0x10014bc90]
AppDelegate.myTextView::                   [MyTextView: 0x10013be80] 
```

正因为如此，我不得不把“AppDelegate.myOutlineView = self;” 进入 MyOutletView 的实现，无论它调用 AppDelegate 的相关方法。这似乎不自然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:23:55.030

Xcode 似乎不允许您将大纲视图的委托或数据源设置为自身。

所以我猜你正在做这样的事情：

![在此处输入图像描述](../Images/0cbf69670e4cfbb89ecc1db6604f7022.png)

也就是说：实例化自定义大纲视图类的第二个副本。

这是此设置的输出：

```
2012-09-26 14:11:34.511 testproj[30255:403] -[MyOutlineView initWithCoder:]
2012-09-26 14:11:34.531 testproj[30255:403] -[MyOutlineView initWithFrame:] 
```

通过删除我的大纲视图的额外（突出显示）实例，该`initWithFrame:`行消失了。

要使大纲视图成为自己的委托，请改为执行以下操作：

```
- (void) awakeFromNib {
    self.delegate = self;
} 
```

也就是说，委托模式的重点是避免子类化的需要。如果您*确实*需要大纲视图子类，请尝试直接覆盖 NSOutlineView / NSTableView 方法，而不是使用委托协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:05:51.443

我无法重现您的问题。我删除了您发布到测试应用程序中的所有代码，并且我只获得了每个对象的一个​​实例化。当我尝试时，两个 initWithFrame 方法都没有被调用。我的输出是：

```
2012-09-26 09:00:38.945 TextViewDoubleInstantiationProblem[451:303] MyTextView initWithCoder::<MyTextView: 0x100123990>
    Frame = {{0.00, 0.00}, {381.00, 182.00}}, Bounds = {{0.00, 0.00}, {381.00, 182.00}}
    Horizontally resizable: NO, Vertically resizable: YES
    MinSize = {381.00, 182.00}, MaxSize = {463.00, 10000000.00}
2012-09-26 09:00:38.953 TextViewDoubleInstantiationProblem[451:303] MyOutlineView initWithCoder(INVALID)::<MyOutlineView: 0x101a1cb90>
2012-09-26 09:00:39.005 TextViewDoubleInstantiationProblem[451:303] AppDelegate.myOutlineView(INVALID)::<MyOutlineView: 0x101a1cb90>
2012-09-26 09:00:39.005 TextViewDoubleInstantiationProblem[451:303] AppDelegate.myTextView::<MyTextView: 0x100123990>
    Frame = {{0.00, 0.00}, {381.00, 182.00}}, Bounds = {{0.00, 0.00}, {381.00, 182.00}}
    Horizontally resizable: NO, Vertically resizable: YES
    MinSize = {381.00, 182.00}, MaxSize = {463.00, 10000000.00} 
```

您的应用中是否还有其他未显示的代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:59:23.187

`initWithCoder:`来自加载在 nib 文件中定义的对象的调用。自从您提到创建网点以来，我认为这就是您想要发生的事情。在这种情况下，他们打电话给`initWithFrame:`我的印象比编码员更有可能是“无效的”。

我会设置一个断点`initWithFrame:`并跟踪该调用的来源，以识别额外的分配。

# sql-server - 从存储过程中获取返回值

> ID：12600046
> 
> 赞同：0
> 
> 时间：2012-09-26T10:50:19.310
> 
> 标签：sql-server, stored-procedures

我有一个项目，我需要在其中保存存储过程的返回值。

```
declare @query_bereich nvarchar(500)

SET @query_bereich = 'select bereich' + convert(varchar(2), @bereich) +
                     ' from ImpArtGruppe where Artikelnummer = ' + @artnum 

set @artgrp = (EXEC sp_executesql @query_bereich)
select @artgrp = ISNULL(@artgrp, '')
select @artgrp 
```

现在我遇到的问题是，返回值始终为 0。我想这是默认情况下，因为在另一种情况下，这将是一个可以有多个值的 restulset。但就我而言，我确保查询始终只返回一个。

我也尝试过在谷歌上找到的代码：

```
EXEC @artgrp = sp_executesql @query_bereich 
```

但这也不起作用。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:00:38.210

您的示例代码中没有存储过程。看起来您正在构建一个动态 T-SQL 查询，并希望从中存储结果。

这是一种方法，使用`sp_executesql`，并假设类型`@artgrp`为`varchar(50)`：

```
declare @query_bereich nvarchar(max)
set @query_bereich = 'select @artgrp = bereich' + convert(varchar(2),@bereich) +
    ' from ImpArtGruppe where Artikelnummer = ''' + @artnum + ''''
declare @artgrp varchar(50)
exec sp_executesql @query_bereich, '@artgrp varchar(50) output', @artgrp output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:57:05.723

如果您只需要返回标量值（即：没有什么复杂的），您应该使用 sql 函数来代替。

见这里：[MSDN](http://msdn.microsoft.com/de-de/library/ms186755.aspx)

存储过程仅返回受其调用影响的数据库行数。这就是为什么在您的情况下该过程返回 0。

# hadoop - 蜂巢：SELECT AS 和 GROUP BY

> ID：12600049
> 
> 赞同：9
> 
> 时间：2012-09-26T10:50:31.277
> 
> 标签：hadoop, hive

我有一个 Hive 查询

```
SELECT Year, Month, Day, Hours, Minutes,
           cast((cast(Seconds as int)/15) as int)*15
AS secondMod, Count(*) AS PerCount FROM LoggerTable 
 GROUP BY Year, Month, Day, Hours, Minutes, secondMod 
ORDER BY PerCount; 
```

上述查询因错误而失败

> 失败：语义分析错误：第 1:175 行无效的表别名或列引用 secondMod

'LoggerTable' 是一个 Hive 表，其中包含所有字符串类型的列。

这个问题的任何解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T11:25:21.420

试试这个：

```
SELECT Year, Month, Day, Hours, Minutes, 
cast((cast(Seconds as int)/15) as int)*15 
AS secondMod, Count(*) AS PerCount FROM LoggerTable 
 GROUP BY Year, Month, Day, Hours, Minutes, 
   cast((cast(Seconds as int)/15) as int)*15
ORDER BY PerCount; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-28T10:12:02.340

`hive.groupby.orderby.position.alias`在 Hive 0.11.0 及更高版本中，如果设置为，则可以按位置指定列`true`。请确认以下查询是否适合您。

```
SET hive.groupby.orderby.position.alias=true;
SELECT Year
       ,Month
       ,Day
       ,Hours
       ,Minutes
       ,cast((cast(Seconds as int)/15) as int)*15 AS secondMod
       ,count(*) AS PerCount 
FROM LoggerTable 
GROUP BY 1, 2, 3, 4, 5, 6
ORDER BY 7; 
```

# c# - C# & 运算符说明

> ID：12600062
> 
> 赞同：15
> 
> 时间：2012-09-26T10:51:31.250
> 
> 标签：c#, .net, logic

我在这里看到了几个关于 C# 中 && 和 & 运算符之间的区别的问题，但我仍然很困惑它是如何使用的，以及在不同情况下会产生什么结果。例如我刚刚在一个项目中瞥见了以下代码

```
bMyBoolean = Convert.ToBoolean(nMyInt & 1);
bMyBoolean = Convert.ToBoolean(nMyInt & 2); 
```

什么时候结果为0，什么时候>0？这个运算符背后的逻辑是什么？运算符“|”之间有什么区别？

```
bMyBoolean = Convert.ToBoolean(nMyInt | 1);
bMyBoolean = Convert.ToBoolean(nMyInt | 2); 
```

我们可以使用 &&, || 运算符并获得相同的结果（可能使用不同的代码）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T10:57:25.943

The`&&`是一个条件语句，用于`if`语句和`while`

```
if(x>1 && y<3) 
```

这意味着 x 应该大于 1 并且 y 小于 3，同时满足这两个条件

```
if(x>1 || y<3) 
```

满足其中之一

但是，& 和 | 分别是按位与和或。前任：

```
 1 | 0  => 1
 1 & 0  => 0
 1 & 1  => 1 
```

如果这适用于直整数，则将计算并应用它们对应的二进制值

```
2&1
=>   10  // the binary value of 2
     &
     01  // the binary value of 1
     --
     00  // the result is zero 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T10:58:33.027

& 符号对其二进制表示中的整数进行按位与。管道执行按位或。

在这里查看这些按位运算的含义：[http ://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T10:56:03.650

& 和 | 是位操作。您必须在位掩码上使用它。&& 和 || 是逻辑运算，因此您只能将其用于布尔值。

位操作示例：

```
var a = 1;
var b = 2;
var c = a|b; 
```

在二进制格式中，这意味着 a = 00000001, b = 00000010 c = 00000011

因此，如果您使用位掩码 c，它将传递值 1、2 或 3。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T10:58:29.187

另一个区别是 & 运算符计算其操作数的逻辑按位与，如果操作数不是 bool （在您的情况下为整数）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T11:00:58.163

`& operator is BItwise AND`运算符，它对位进行操作。例如 5 和 3

```
 0101    //5
        0011   //3
    ----------
5&3=    0001   //1 
```

`| operator is BItwise OR`运算符，它对位进行操作。5|3

```
 0101    //5
        0011   //3
    ----------
  5|3=  0111   //7 
```

`&&`运算符是`logical AND operator`-`returns true if all conditions are true`
例如

```
 if((3>5)&&(3>4))   //returns true
       if((6>5)&&(3>4))   //returns false 
```

`||`运算符是`logical OR operator`-`returns true if one of the conditions is true`
例如

```
 if((3>5)||(3>4))   //returns true
   if((6>5)||(3>4))   //returns true
   if((6>5)||(5>4))   //returns false 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T11:21:59.597

其他答案为您解释了 && 和 & 之间的区别，因此假设您理解这一点。在这里，我只是尝试解释您指定的情况。

第一个案例

```
bMyBoolean = Convert.ToBoolean(nMyInt & 1); 
```

`bMyBoolean` `false`什么时候`nMyInt = 0`因为：

```
 00 
& 01 
= 00; 
```

第二种情况：

```
bMyBoolean = Convert.ToBoolean(nMyInt & 2); 
```

`bMyBoolean` `false`何时`nMyInt = 0`或`1`因为

```
 00 
& 10 
= 00; 
```

或者：

```
 01 
& 10 
= 00; 
```

第三种和第四种情况按位 | 是微不足道的，因为 bMyBoolean 对于任何 nMyInt 始终为真

```
bMyBoolean = Convert.ToBoolean(nMyInt | 1);
bMyBoolean = Convert.ToBoolean(nMyInt | 2); 
```

你不能申请 && 或 || 在这种情况下，因为它们仅适用于`bool`，您将编译错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-29T16:39:26.590

这里有一些有趣的**&**。按位 as & be，它可以用于 bool，如下例所示。

```
bool result = true;
result &= false;
Console.WriteLine("result = true & false => {0}", result );
//result = true & false => False

result = false;
result &= false;
Console.WriteLine("result = false & false => {0}", result );
//result = false & false => False

result = true;
result &= true;
Console.WriteLine("result = true & true => {0}", result );
//result = true & true => True 
```

# html - 输入 Onkeyup 未在 chrome 和 Mozilla 中触发

> ID：12600064
> 
> 赞同：0
> 
> 时间：2012-09-26T10:51:43.350
> 
> 标签：html, asp.net-ajax

我`OnKeyUp`为 HTML 输入编写了一个处理程序。这在 IE8 中可以正常工作，但在 Chrome 和 Mozilla 中不行。

```
<input id="txtPatientSrch" runat="server" maxlength="100" onkeypress='return showPLPopup("txtPatientSrch","tblMasterPatientList");'/> 
<Script> function showPLPopup(txtCtrlName,tblName) { } </Script> 
```

# java - 从 JWS 签名的 jar 中获取用户主文件夹

> ID：12600076
> 
> 赞同：0
> 
> 时间：2012-09-26T10:52:21.230
> 
> 标签：java, java-web-start, securityexception, home-directory, getproperty

我正在尝试从通过 JWS 启动的 jar 中获取用户主文件夹。jar 已签名，我的 JNLP 有这样一行

```
<property name="homeFolder" value="@user.home" /> 
```

但我在尝试时：

```
System.getProperty("homeFolder"); 
```

我得到一个安全异常：

```
java.security.AccessControlException: access denied (java.util.PropertyPermission homeFolder read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)
    at java.lang.System.getProperty(System.java:667)
    at com.mimecast.searcher.jws.Main.main(Main.java:62)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.javaws.Launcher.executeApplication(Launcher.java:1919)
    at com.sun.javaws.Launcher.executeMainClass(Launcher.java:1852)
    at com.sun.javaws.Launcher.doLaunchApp(Launcher.java:1614)
    at com.sun.javaws.Launcher.run(Launcher.java:139)
    at java.lang.Thread.run(Thread.java:680) 
```

有没有办法从 JWS/JNLP 启动的 JAR 中获取主文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:04:05.270

尝试将以下内容添加到您的 JNLP 文件中

```
<security>
    <all-permissions/>
</security> 
```

# iphone - 在 xcode 4.5 GM IOS 6 中将方向设置为横向模式

> ID：12600082
> 
> 赞同：2
> 
> 时间：2012-09-26T10:52:40.813
> 
> 标签：iphone, ios5, ios6

我使用游戏中心开发了 IOS 5 应用程序。现在我希望我的代码在 IOS 6 上运行。所以我让我的应用程序同时支持方向，即横向和纵向，这样当游戏中心登录屏幕弹出时它不会崩溃。但在那之后，我的主视图控制器不会以横向视图启动。相反，当我进入更远的视图时，它以横向打开，然后当我回来时，主视图以横向打开。但是主页视图第一次没有打开横向模式。

这是代码：

```
- (BOOL)shouldAutorotate
{
  return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
  return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationLandscapeLeft;
} 
```

这些是我在 IOS 6 的主页视图中使用的代表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T05:26:08.413

在您的应用程序委托中添加此方法以支持 IOS 6 的所需方向。

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window

{
   if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        return UIInterfaceOrientationMaskAll;
    else  /* iphone */
        return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

并在 IOS 6 的其余课程中使用这些 delegates 进行定向。

```
- (BOOL)shouldAutorotate
{

return YES;
}

-(NSUInteger)supportedInterfaceOrientations

{
return UIInterfaceOrientationMaskLandscape;

}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationLandscapeLeft;
} 
```

# android - MOTODEV studio 可以用来为任何手机开发应用程序吗？

> ID：12600086
> 
> 赞同：0
> 
> 时间：2012-09-26T10:52:52.903
> 
> 标签：android, motodev-studio

我从 android 应用程序开发开始，我有一部摩托罗拉 atrix 手机，最近我读到了 MOTODEV 工作室的存在。我没有非常有用的功能，我想使用它但我不知道，这个名字让我担心在 MOTODV studio 中开发的应用程序针对摩托罗拉手机进行了优化，我不知道这些应用程序是否可以运行无需担心任何电话。

那么，我可以使用 MOTODEV studio 为任何手机开发应用程序而无需担心吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:54:09.913

Motodev 是“只是”Eclipse + ADT + 一些摩托罗拉的东西。如果您发现 Motodev 更好，您可以使用它为任何 android 设备编写代码。即使您只针对摩托罗拉设备，您也不能使用它。它只是IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:58:31.170

是的，它只是一组 Eclipse 插件。然而，它是一个死胡同，据我了解，大多数（如果不是全部）从事它的团队都被解雇了。

# c++ - 为什么我不能将非 const 指针传递给一个函数，该函数以指向 const 的指针的引用作为其参数

> ID：12600094
> 
> 赞同：4
> 
> 时间：2012-09-26T10:53:21.853
> 
> 标签：c++, pointers, reference, constants

这是一个代码片段，希望能传达我正在尝试做的事情：

```
void updatePointer(const int*& i)
{
  i++;
}

int main() {

  int array[5];
  int* arrayPtr = array;

  updatePointer(arrayPtr );
  return 0;
} 
```

这会产生编译器错误：

```
prog.cpp: In function ‘int main()’:
prog.cpp:16: error: invalid initialization of reference of type ‘const int*&’ from
expression of type ‘int*’
prog.cpp:5: error: in passing argument 1 of ‘void updatePointer(const int*&)’ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:32:37.957

假设您可以做到，您可以编写以下内容：

```
const int c = 0;

void updatePointer(const int* &i) {
    i = &c;
}

int main() {
    int *ptr;
    updatePointer(ptr);
    *ptr = 1; // attempt to modify the const object c, undefined behavior
} 
```

的目的`const`是确保用户代码不能尝试修改 const 对象，除非它包含 const-cast（或等效项）。所以编译器不得不拒绝这段代码。禁止 a`const int*&`绑定到 an`int*`是上面代码中编译器合理拒绝的唯一地方：每隔一行都可以。

这与您不能隐式转换`int**`为`const int **`.

除了 const-safety 方面的动机之外，您可以认为如果它`int*`是与 不同的类型`const int*`，那么它恰好可以转换为它。同样，您可以转换`int`为`double`，但 a`double&`不能绑定到`int`左值。这不是全部原因，因为实际上`int*`和`const int*`具有相同的大小和表示，而`int`和`double`不具有相同的大小和表示。因此，如果不是因为它会破坏 const 系统，那么可能会有一个特殊情况允许它。

C++ 有 const 和 non-const 重载的`strchr`原因与这个问题有关：你的函数`updatePointer`修改了它的输入而不是返回更新的值，但原理是相似的。C 风格的单曲`strchr`允许您将指向 const 的指针“洗白”成指向非 const 的指针而无需强制转换，这是 const 系统中的一个漏洞。C++ (a) 具有重载，并且 (b) 具有比 C 更严格的类型系统，因此它填补了这个漏洞。

如果您希望您的真实函数`updatePointer`像`strchr`- 检查指向的数据并为指针计算一个新值，那么您处于相同的情况`strchr`。这与它对新值的作用无关（在 的情况下返回它，在 的情况下`strchr`将其写回`updatePointer`），因为问题是您希望新指针具有与输入相同的 const 限定。您需要提供 const 和非常量重载或函数模板。

如果您只需要真正的函数`updatePointer`将指针移动一定距离，无论指向的数据如何，您都可以使用`std::advance`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T11:00:05.850

你写的是一个函数，它引用一个指向 const int 的指针。你要求的是

```
updatePointer(int* const & i); 
```

然而，这没有多大意义。传递对指针的引用似乎意味着您打算修改指针，但您不能这样做，因为它被声明为 const。实际上，您只需传递指针即可获得相同的效果

```
updatePointer(int* i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:02:08.227

[发现这个](http://forums.codeguru.com/showthread.php?470209-Initialization-of-constant-pointer-reference-member-variable) 复制在这里，以防将来链接中断：

这个推理有点尴尬。主要问题是：既然“const int&”可以绑定到“int”，为什么“const int*&”不能绑定到“int*”？

基本上，一旦添加了间接级别（指针），规则就会改变。仅使用一个间接级别（如在单个 * 中），该规则可以表述为：

对指向 cv 限定类型的指针的引用可以绑定到 cv 限定小于或等于指针（即引用）的任何相同类型。（多读几遍。）

所以“const int*&”不能绑定到“int*”的原因是因为“const int*”和“int*”是两种不同的类型（规则的下划线部分被破坏）。

# java - Patching Jersey to use asm-4

> ID：12600095
> 
> 赞同：3
> 
> 时间：2012-09-26T10:53:24.800
> 
> 标签：java, google-app-engine, rest, google-cloud-datastore, jersey

this is a follow-up post to the twitter discussion i had on Google App Engine ([Twitter Conversation](https://twitter.com/app_engine/statuses/250863665442594816))

The Problem is that Jersey and GAE won't work together with datanuceleus 2.0, since GAE needs ASM 4.0 but Jersey needs 3.1\. A detailed description and easy solution on that is available here: [GAE and Jersey Problem description](http://cloudvane.com/2012/09/23/problem-with-google-appengine-and-jersey-with-java/)

There are several posts on questions here on Stackoverflow, so I opened this thread to collaborate with Google's Teams to solve this issue.

I simply switched from Datanuceleus 2.0 to 1.0 and Jersey was working again. Do you have any other suggestions? Especially since 2.0 would be great to use.

Greetings,

Mario

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-17T10:09:58.010

另一种解决方案是使用 Jersey 的 1.18.1 版本，它不再依赖于 asm 3.0，并且包含重新打包的 asm 版本，您可以在这里查看：http: [//mvnrepository.com/artifact/com.sun.jersey/ jersey-bundle/1.18.1](http://mvnrepository.com/artifact/com.sun.jersey/jersey-bundle/1.18.1) 这将在 GAE 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T21:55:49.470

您应该尝试[jarjar](http://code.google.com/p/jarjar/)，它将一个 jar 嵌入另一个 jar 并修复字节码级别的代码引用。

请参阅这篇出色的博文：http: [//blog.harrywye.com/post/30160964741/running-java-jersey-with-jdo-3-0-on-google-app-engine](http://blog.harrywye.com/post/30160964741/running-java-jersey-with-jdo-3-0-on-google-app-engine)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T15:15:32.407

正如@peter-knego 所说，使用[jarjar](http://code.google.com/p/jarjar/)非常简单，您仍然可以使用 JDO/JPA > 1.0

1.  下载[jarjar](http://code.google.com/p/jarjar/)
2.  创建一个文本文件：`testrules.txt`具有以下内容：

> 规则 org.objectweb.asm.** org.objectweb.asm3.@1

1.  使用 asm-3.1.jar 和 jersey-server-1.1.5-ea-SNAPSHOT.jar （或任何你有的）执行以下命令：

> java -jar jarjar-1.4.jar 进程 testrules.txt asm-3.1.jar asm-3.1r.jar
> 
> java -jar jarjar-1.4.jar 进程 testrules.txt jersey-server-1.1.5-ea-SNAPSHOT.jar jjersey-server-1.1.5r-ea-SNAPSHOT.jar

最后，只需将 asm-3.1.jar 和 jersey-server-1.1.5-ea-SNAPSHOT.jar 替换为重新打包的库即可。

我将它与 1.8.3 SDK 一起使用，它对我有用。

参考[这里](http://blog.harrywye.com/post/30160964741/running-java-jersey-with-jdo-3-0-on-google-app-engine)

# tropo - Unable to change say voice in Tropo MVC

> ID：12600097
> 
> 赞同：1
> 
> 时间：2012-09-26T10:53:37.100
> 
> 标签：tropo

I'm using the Tropo MVC classes and have a problem with changing the voice in the say. Setting the voice property of the say object does not seem to change the voice for example:

```
 Say say1 = new Say("This is first voice");
                say1.Voice = "susan";
                Say say2 = new Say("This is the male voice");
                say2.Voice = "dave";
                List<Say> sayList = new List<Say>();
                sayList.Add(say1);
                sayList.Add(say2);
                Script.Ask(null, null, new Choices("[1 DIGIT]", "dtmf", "#"), null, strArgs, true, sayList, Convert.ToSingle(action.Timeout)); 
```

The voice does not change. In fact it appears that the only way to change the voice is to set Script.Voice = "voice" which doesn't work for me as I have to handle language select in the first Ask which requires English voice followed by French voice.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:13:24.797

Tropo 还支持[SSML](http://www.w3.org/TR/speech-synthesis/)，这是一种超级强大的标记语言，用于混合语音和调整语音节奏/节奏。

您可以通过执行以下操作在单个 Say 命令中混合声音：

```
new Say("<?xml version='1.0'?><speak>For English please press 1.<voice name='Carlos' xml:lang='es'>para el español por favor pulse 2</voice></speak>") 
```

内联 XML 有点 yukkie，但它可以完成工作，学习 SSML 将允许您创建一些听起来非常专业的应用程序。

# c# - How can I logout from facebook from my app in MonoTouch

> ID：12600099
> 
> 赞同：0
> 
> 时间：2012-09-26T10:53:37.593
> 
> 标签：c#, facebook, xamarin.ios, logout

I am using Facebook integration in my application. I am logging with Facebook and now I want logout from my application. Many members are asked this question but I am not getting proper solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:15:41.563

只需将这 4 行代码添加到注销按钮，即可清除所有 cookie，这样您就可以成功从 facebook 注销。

```
 NSHttpCookieStorage storage = NSHttpCookieStorage.SharedStorage;

    foreach (NSHttpCookie cookie in storage.Cookies) 
    {
      if(cookie.Domain == ".facebook.com")
      {
        storage.DeleteCookie(cookie);
      }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:47:03.203

Apple iOS 6 提供的 Social.framework 不需要您登录或注销。

用户凭据（用于 Facebook）保存在 iOS 设置中（应用程序无法访问），因此操作系统能够*按需*登录，并在您完成后将您注销。这可能发生在您发布最后一个实例之后`SLRequest`或之后的某个时间（例如缓存）。

# django - 现有模型的 django-mptt 错误

> ID：12600103
> 
> 赞同：3
> 
> 时间：2012-09-26T10:53:45.820
> 
> 标签：django, django-admin, django-mptt

当我尝试使用 MPTTMODEL 插入常规模型时，我已经有了模型主题并在其中包含数据

```
class Topic(MPTTModel):
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    .... 
```

所以我运行以下命令来迁移主题表中的父列

```
./manage.py evolve --hint --execute 
```

但我得到这个错误

```
Error: Cannot use hinted evolution: AddField or ChangeField mutation for 'Topic.rght' in 'core' requires user-specified initial value. 
```

它适用于新模型，但是对于具有数据的现有模型会引发此错误

# javascript - 在 jQuery 中追加问题

> ID：12600104
> 
> 赞同：0
> 
> 时间：2012-09-26T10:53:49.153
> 
> 标签：javascript, jquery, append, each

我在 jQuery 中有一个问题，就是我有一个要附加到对象（id）的数组。这个函数也在打算之后。

当我现在在 jQuery 中使用“每个”函数时，我会这样做。

```
$.each(childrenObj, function(index, value) 
{
    $( document.createElement('ol') )
    .append(
        $( document.createElement('li') )
        .attr('id', 'list_'+ listItem )
        .append(
            $( document.createElement('div') )
            .addClass('listContentItem')
            .html( value.contentTitle )
            )
        )
    .appendTo('#list_'+ ( listItem - 1 ) );

    listItem++;
}); 
```

正如你想象的那样，它会`<ol><li>test</li></ol>`在一遍又一遍地做同样的事情之后，取决于有多少人跑过。

我想要的是我希望它`<ol>`在一个对象中创建一个对象，然后我在我的每个循环中添加`<li>`它并最终在我的愿望之后创建一个 appendTo ('# id') 但无法完全解决它并导致纯设计前端的一些问题。

希望有一些人有解决方案，可以在路上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:56:40.680

创建`ol`你的循环外部（下面的代码未经测试，但应该可以工作）

```
var ol = $( document.createElement('ol') );
$.each(childrenObj, function(index, value) 
{

    ol.append(
        $( document.createElement('li') )
        .append(
            $( document.createElement('div') )
            .addClass('listContentItem')
            .html( value.contentTitle )
            )
        );
});

ol.appendTo('#some_id'); 
```

# php - 排序复杂的php数组

> ID：12600109
> 
> 赞同：2
> 
> 时间：2012-09-26T10:54:02.820
> 
> 标签：php, arrays, sorting, cron

我的服务器上有一组 cronjobs，我需要按它们触发的日期对其进行排序，起始数组是：

```
Array ( 
[0] => 00 08 24 10 * 2012 curl --user user:pass command 
[1] => 00 09 24 10 * 2012 curl --user user:pass command
[2] => 00 08 18 10 * 2012 curl --user user:pass command
[3] => 00 11 18 10 * 2012 curl --user user:pass command
) 
```

我希望这个列表出现在我网站上的表格中，但按月、月中的某天、小时、分钟排序。

所需的输出是：

```
Array(
[0] => 00 08 18 10 * 2012 curl --user user:pass command
[1] => 00 11 18 10 * 2012 curl --user user:pass command
[2] => 00 08 24 10 * 2012 curl --user user:pass command
[3] => 00 09 24 10 * 2012 curl --user user:pass command 
```

谁能指出我为实现这一目标而需要走的方向？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:03:57.590

这个怎么样？

```
$a = array(
  '00 08 24 10 * 2012 curl --user user:pass command',
  '00 09 24 10 * 2012 curl --user user:pass command',
  '00 08 18 10 * 2012 curl --user user:pass command',
  '00 11 18 10 * 2012 curl --user user:pass command',
);

usort($a, function($f, $s) {
   $fx = implode('', array_reverse(preg_split('/\D+/', $f)));
   $sx = implode('', array_reverse(preg_split('/\D+/', $s)));
   return strcmp($fx, $sx);
});

var_dump($a);
/*
0 => string '00 08 18 10 * 2012 curl --user user:pass command' (length=48)
1 => string '00 11 18 10 * 2012 curl --user user:pass command' (length=48)
2 => string '00 08 24 10 * 2012 curl --user user:pass command' (length=48)
3 => string '00 09 24 10 * 2012 curl --user user:pass command' (length=48)
 */ 
```

我在这里所做的基本上是从所有有问题的字符串中提取所有数字部分，然后将它们反转为数字字符串，然后比较这些字符串。

这可以通过两种方式进行修改：首先，强化正则表达式，使其与命令本身的数字不匹配：

```
 $fx = implode('', array_reverse(
     preg_split('/(?<=\d{4}).+$|\D+/', $f))); 
```

...其次，使用记忆功能：

```
function getSortCriteria($line) {
  static $criterias = array();
  if (! isset($criterias[$line])) {
    $numbers = preg_split('/\D+/', substr($line, 0, 18));
    $criterias[$line] = implode('', array_reverse($numbers));
  }
  return $criterias[$line];
}

usort($a, function($f, $s) { 
  return strcmp(getSortCriteria($f), getSortCriteria($s)); 
});

var_dump($a); 
```

`substring`在这里，我用;删除了字符串的其余部分。我认为它更有效。尽管如此，展示如何使用正则表达式完成此操作也可能很有用。))

# windows-phone - Windows Phone 中的 Json 解析（C#）

> ID：12600110
> 
> 赞同：0
> 
> 时间：2012-09-26T10:54:03.433
> 
> 标签：windows-phone

我是 Windows Phone 开发的新手。我想使用 json 解析来解析一些数据。之后

谷歌搜索我找到了一些例子，但我无法正确理解。我有一个链接

[http://dotnetbyexample.blogspot.in/2012/01/json-deserialization-with-jsonnet.html](http://dotnetbyexample.blogspot.in/2012/01/json-deserialization-with-jsonnet.html)

做 json 解析但我无法在我的列表中显示存储、内存、屏幕大小，我的代码是

```
 private void Load_Click(object sender, RoutedEventArgs e)
    {
        var w = new WebClient();
        Observable
          .FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted")
          .Subscribe(r =>
          {
              var deserialized =
                JsonConvert.DeserializeObject<List<RootObject>>(r.EventArgs.Result);
              PhoneList.ItemsSource = deserialized;
          });
        w.DownloadStringAsync(
          new Uri("http://www.schaikweb.net/dotnetbyexample/JSONPhones1.txt"));
    }

}

public class Specs
{
    public string Storage { get; set; }
    public string Memory { get; set; }
    public string Screensize { get; set; }
}

public class RootObject
{
    public string Brand { get; set; }
    public string Type { get; set; }
    public Specs Specs { get; set; }
} 
```

}

请帮我解决这个问题或任何其他相同的样本也很感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:36:08.583

代码看起来没问题，所以如果您没有遇到任何错误，则您的 UI 代码或 UI 与数据耦合可能存在问题。

我怀疑您需要发布 UI 代码以获得一些帮助。

# c - 传递结构地址时，我无法更改 C 中实际参数的值

> ID：12600117
> 
> 赞同：0
> 
> 时间：2012-09-26T10:54:28.623
> 
> 标签：c, malloc

```
#include <stdio.h>
#include <stdlib.h>

typedef struct s{
    int n;
}F;

F* make();
void create(F *s);
void add(F *f);
void show(F *f);

int main()
{
    F *f=NULL;

    //1.) the following doesn't work
    create(f);
    show(f);

    //2.) The Following is work
    f=make();
    show(f);

    printf("Hello world!\n");
    return 0;
}

void add(F *f){
    (f->n)++;
}
void show(F *f){
    printf("\n======\n %d \n======\n",f->n);
}
F* make(){
    F * temp=(F*)malloc(sizeof(F));
    temp->n=19;
    return temp;
}
void create(F *s){
    F * temp=(F*)malloc(sizeof(F));
    temp=make();
    s=temp;
    show(s);
    } 
```

请解释为什么代码片段（1）说碎片错误（我知道这是关于访问无效的内存空间，但是通过查看我自己的代码，我不知道错误在哪里。），但是（2）没关系，它工作正常。先感谢您 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:59:34.923

你得到一个段错误的原因是因为变量`f`in`main`是剩余的`NULL`。

那是因为在`create()`您分配`temp`给局部变量时，这与函数外部`s`无关。`f`如果您希望函数修改指针指向的位置，则需要将指针传递给指针，即。`F **s`.

你的`create()`函数可能看起来像：

```
void create(F **s){
    F * temp=(F*)malloc(sizeof(F));
    temp=make();
    *s=temp;
    show(*s);
} 
```

你会将地址传递`f`给`create()`：

```
create(&f); 
```

`s`包含 的地址`f`，因此修改 的值`*s`与修改 的值相同`f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:57:42.230

您需要更改`create()`以接受指向这样的指针的指针`F`：

```
void create(F** s)
{
    F* temp = malloc(sizeof(F));
    *s = temp;
    show(*s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:57:48.850

```
 F *f=NULL;      //1.) the following doesn't work     
 create(f); 
```

将指针***按值***传递给函数。原始指针`f`永远不会分配任何内存。该函数将内存分配给指针的副本`f`。虽然，`f`仍指向`NULL`。最终，您最终取消引用`NULL`导致***未定义行为***的指针，该行为以分段错误的形式表现出来。

您需要***通过引用***函数来传递指针来为其分配内存：

```
 create(&f); 
```

在哪里：

```
void create(F **s);

void create(F **s)
{
    *s = malloc(sizeof(F));     
    show(*s); 
} 
```

# android - Android：如何在 Viewpager 中访问 Fragment 中的项目

> ID：12600127
> 
> 赞同：1
> 
> 时间：2012-09-26T10:54:55.883
> 
> 标签：android, android-viewpager, fragment

在我的活动中，我在 Viewpager 中使用了片段。我的片段包括一些像 ImageView 和 ImageButton 的项目。是否可以访问我的片段中的指定项目？我想控制这个。在我的项目中，当我按下键盘上的指定按钮时，我想将焦点设置为 Fragment 中的第一个 ImageButton ？谢谢你的帮助！

主.xml ....

```
 <android.support.v4.view.ViewPager
                android:id="@+id/viewPagerDetail"
                android:layout_width="1170dp"
                android:layout_height="140dp" >
            </android.support.v4.view.ViewPager>

            <LinearLayout
                android:id="@+id/motionCotrol"
                android:layout_marginTop="10dp"
                android:layout_width="84dp"
                android:layout_height="120dp"
                android:paddingBottom="15dp">

                <ImageView
                    android:id="@+id/img"
                    android:layout_width="84dp"
                    android:layout_height="105dp"
                    android:scaleType="fitXY"
                    android:src="@drawable/selection_thick" 
                    />

            </LinearLayout> 
        </RelativeLayout> 
```

…………

片段.xml

```
<LinearLayout
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    >

    <!--
         <ImageView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical"
        android:layout_weight="0.1"
         />
    -->

    <include

        android:layout_width="100dp"
        android:layout_height="wrap_content"
        layout="@layout/items" />

    <include
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        layout="@layout/items" />

    <include
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        layout="@layout/items" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:18:03.147

1\. 在您的片段类中创建一个自定义 KeyDown 事件。

```
 public void keyDownInFragment(int keyCode){
      // Your Implementation for focusing a widget goes here
    } 
```

2\. 在您的 Activity（FragmentActivity 或 MainActivity）中，使用以下代码捕获 KeyDown 事件，

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    // Replace the key you have pressed in Keyboard for KeyEvent.KEYCODE_HOME in the following line
        if (keyCode == KeyEvent.KEYCODE_HOME) {
           // Call your fragment's keydown event method
                  ((FragmentName)fragments.get(0)).myOnKeyDown(keyCode);
           // get(0) instead of zero user the index number at which you have inserted your fragment in the Page Adapter
        }
    } 
```

# javascript - 占位符在 IE9 中不起作用

> ID：12600128
> 
> 赞同：5
> 
> 时间：2012-09-26T10:55:01.047
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [ie9 中的占位符](https://stackoverflow.com/questions/6366021/placeholder-in-ie9)

我正在为我的文本框使用占位符。问题是在 Firefox 和 chrome 中它们会显示，但在 IE9 中它不起作用。我在互联网上搜索，但没有一个解决方案对我有用。有任何想法吗？

```
<input class="text" type="text" name="name" value="" placeholder="Name" required /><br /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T10:56:54.060

如果你指的是 placeholder 属性，IE9 不支持它：http: [//caniuse.com/#search=placeholder](http://caniuse.com/#search=placeholder)。您将需要使用另一种解决方案来模仿该行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T10:57:37.950

IE9 不支持 HTML5 的占位符。

你需要用javascript来做。

检查[这个插件](http://kamikazemusic.com/quick-tips/jquery-html5-placeholder-fix/)。

# android - 使用 PHONEGAP 的 android 应用程序教程

> ID：12600129
> 
> 赞同：15
> 
> 时间：2012-09-26T10:55:04.707
> 
> 标签：android, cordova

我从这个论坛尝试了几个问题，但找不到“好的”教程，谁能给我一些好的教程链接，以便开始使用 phonegap

我可以获取一些 android 示例 phonegap 项目来开始学习 phonegap

请在此处提供链接

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T10:59:12.993

试试下面的两个教程

1.  [http://docs.phonegap.com](http://docs.phonegap.com)
2.  [http://hiediutley.com/?s=PhoneGap%20Tutorial%20Series](http://hiediutley.com/?s=PhoneGap%20Tutorial%20Series)
3.  [如何在 Ubuntu 上安装/运行 PhoneGap，分步指南](http://dasunhegoda.com/installrun-phonegap-ubuntu/797/)

# asp.net-web-api - 自托管 Web API - Post Param null

> ID：12600131
> 
> 赞同：0
> 
> 时间：2012-09-26T10:55:12.747
> 
> 标签：asp.net-web-api, .net-4.5

我正在尝试设置一个简单的测试来向我的自托管 Web-API 服务器发出 POST 请求。

```
var config = new HttpSelfHostConfiguration(new Uri(baseAddress));

// add a route
config.Routes.MapHttpRoute(name: "DefaultApi",
                            routeTemplate: "api/{controller}/{id}",
                            defaults: new { id = RouteParameter.Optional }
);

server = new HttpSelfHostServer(config);
server.OpenAsync().Wait(); 
```

我添加了一个控制器：

```
public class PayloadController : ApiController
{    
    public string Get()
    {
        return "Hello from GET";
    }

    public HttpResponseMessage PostItem(Payload payload)
    {
        // payload 
        //...
    }
} 
```

而且我确实有相应的模型（确保它包含属性）：

```
public class Payload
    {
        public string Date { get; set; }
        public string Command { get; set; }
    } 
```

我在 Chrome 上使用 Rest Console 来测试服务器，在我的控制器中获得正确的 GET 结果。

以 POST 的形式发出以下请求：

```
Request Url: http://localhost:8080/api/payload
Request Method: POST

Params: {
    "Date": "2012.09.26",
    "Command": "Hello"
} 
```

编辑： Content-Type 设置为*application/json*和编码为*UTF-8*

在控制器处设置断点表明 POST 参数未正确反序列化为`Paylod`对象，参数为`null`.

我可能错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:08:09.583

您需要将请求 Content-Type 指定为`application/json`

**编辑**

使用以下评论中的信息完成回复：

如果您使用 REST 控制台的“请求参数”而不是“请求有效负载原始正文”，即使您指定`application/json`.

您需要将原始 JSON 粘贴到原始正文字段中，如下所示：[http ://screencast.com/t/iRWZqv91](http://screencast.com/t/iRWZqv91)

```
{
    "Date": "2012.09.26",
    "Command": "Hello"
} 
```

# java - 通过 java 从 Mercury Quality center 9 读取测试数据

> ID：12600134
> 
> 赞同：0
> 
> 时间：2012-09-26T10:55:28.513
> 
> 标签：java, hp-quality-center

我们使用**Mercury Quality Center 9**进行存储测试和测试结果。
我需要从**测试计划**中读取测试数据并通过**java**将测试结果写入**测试实验室**。 我试图在谷歌中找到这个，但我没有找到任何东西。

 ****更新：**

我尝试使用 qctools4j 与 MQC 9 一起使用以下代码：

```
public void connect() {
try{
    IQcConnection conn = QcConnectionFactory.createConnection("http://qc/qcbin");                           
    conn.connect("login", "password", "DEFAULT","project");                         
    TestClient tc = conn.getTestClient();
    System.out.println("Connection success!!!");
}
catch (QcException e) {
    System.out.println(e.getMessage());
    e.printStackTrace();
}
} 
```

我收到以下异常消息：

```
*org.qctools4j.exception.QcException: Can't co-create object
    at org.qctools4j.clients.QcConnectionImpl.initConnection(Unknown Source)
    at org.qctools4j.clients.QcConnectionImpl.<init>(Unknown Source)
    at org.qctools4j.QcConnectionFactory.createConnection(Unknown Source)
    at automation_framework1.automation_framework1.QCWorker.connect1(QCWorker.java:38)
    at automation_framework1.automation_framework1.Main.main(Main.java:12)
Caused by: com.jacob.com.ComFailException: Can't co-create object
    at com.jacob.com.Dispatch.createInstanceNative(Native Method)
    at com.jacob.com.Dispatch.<init>(Dispatch.java:99)
    at com.jacob.activeX.ActiveXComponent.<init>(ActiveXComponent.java:58)
    at org.qctools4j.clients.QcConnectionImpl.initConnection(Unknown Source)* 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:12:43.410

我参与了 QC 9 的开发，但我不确定是否有 Java API。但是，有一个 COM 接口或[OTA API](http://jawedm.blogspot.co.il/2010/12/download-qc-ota-api-reference-handbook.html)。您可以使用一些有助于从 Java 调用 COM API 的库。

例如：

1.  [Jacob](http://sourceforge.net/projects/jacob-project/)它是开源的，[这里](http://jacob-project.wiki.sourceforge.net/Event+Callbacks)有一些例子。
2.  [Nevaobject](http://www.nevaobject.com/_docs/_java2com/java2com.htm) - 它是商业的，但更稳定。

祝你好运！

编辑：

刚刚看到 qctools4j（它基于 Jacob）——从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:35:51.963

我找到了解决问题的方法。我将 groovy scriptom 与以下代码一起使用（可能会对某人有所帮助）：

```
def tdc;
public QualityCenterController(){
static{
System.load("C:\\WINDOWS\\system32\\OTAClient.dll");
System.load("D:\\Work\\automation_framework\\libs\\lib\\jacob-1.16-M2-x86.dll");
}

public void connect(){
    tdc = new ActiveXObject ("TDApiOle80.TDConnection");
    tdc.InitConnectionEx("http://qc/qcbin");
    tdc.Login("username", "password");
    tdc.Connect("DEFAULT","PROJECT");
    System.out.println("login is success");
}

//ReqFactory Object
public void getRequirements(){
    def requironmetns = tdc.ReqFactory();
    def listReq = requironmetns.NewList("");
    for (def iterReq : listReq) {
        getRequirement(iterReq);
    }
    println listReq.count();
}

//Req Object
public void getRequirement(def itemReq){
    println 'ID: '+itemReq.ID();
    println 'Name:' + itemReq.Name();
    println 'Path:' + itemReq.Path();
    println 'Reviewed:' + itemReq.Reviewed();

    println 'Author:' + itemReq.Author();
    println 'Priority: ' + itemReq.Priority();
    println 'Comment: '+removeHtmlTag(itemReq.Comment());
    println 'Type: ' + itemReq.Type();

}
public Test getTestsFromTestLab(String path){

    Test resultTest = new Test();
    def labFolder = tdc.TestSetTreeManager.NodeByPath(path);
    def tsList = labFolder.FindTestInstances("");

    for (def iterable_element : tsList){

        Test test = getTestData(iterable_element);
        def steps =  iterable_element.Test().DesignStepFactory();
        TestStep  testStep = getTest(steps);
    }
    return resultTest;
}

public TestStep getTest(def testData){
    TestStep testStep = new TestStep();
    def listSteps = testData.NewList("");
    for(def item1 : listSteps){
        testStep = getTestStepData(item1);
        showTestStep(testStep);
    }
    return testStep;
}

private TestStep getTestStepData(def stepData){
    TestStep testStep =  new TestStep();
    testStep.setId(stepData.ID());
    testStep.setName(stepData.StepName());
    testStep.setDescription(removeHtmlTag(stepData.StepDescription()));
    testStep.setExpected(removeHtmlTag(stepData.StepExpectedResult()));
    testStep.setStepOrder(stepData.Order());
    return testStep;
}

public Test getTestData(def testData){
    Test test = new Test();
    test.setId(Integer.parseInt(testData.Id()));
    test.setName(testData.Name());
    test.setExecStatus(testData.Status());
    showTest(test);
    return test;
}

private String removeHtmlTag(String html){
    String result = "";
    result = Jsoup.parse(html).text();
    return result;
}

public void showTestStep(TestStep testStep){
    println testStep.getId();
    println testStep.getName();
    println testStep.getDescription();
    println testStep.getExpected();
    println testStep.getStepOrder();
}
public void showTest(Test test){
    println test.getId();
    println test.getName();
    println test.getExecStatus();
} 
```**

# c - 在C中的结构中设置字节数组指针

> ID：12600136
> 
> 赞同：-1
> 
> 时间：2012-09-26T10:55:35.300
> 
> 标签：c, struct, malloc, bytearray

我有一个包含指向字节数组的指针的结构。

要设置指针，我尝试了以下两种方法：

1 使用 malloc 然后 memcpy 字节数组数据（在下面的代码中注释掉）。

2 简单地复制指针。

```
#include "stdlib.h"
#include "string.h"
#include "stdio.h"

typedef struct _element
{
    unsigned char *pValue;
    int nLength;
} Element;

Element* ElementCreate(void)
{
    Element *pElement = (Element*)malloc(sizeof(*pElement));

    pElement->pValue = NULL;
    pElement->nLength = 0;

    return pElement;
}

void ElementDestroy(Element **ppElement)
{
    Element *pElement = NULL;

    if (!ppElement)
        return;

    pElement = *ppElement;

    //free(pElement->pValue);
    //pElement->pValue = NULL;

    free(pElement);
    *ppElement = NULL;
}

void ElementSetValue(Element *pElement, unsigned char *pValue, int nLength)
{
    //pElement->pValue = (unsigned char*)malloc(nLength * sizeof(*(pElement->pValue)));
    //if (!(pElement->pValue))
    //    return;

    //memcpy(pElement->pValue, pValue, nLength);

    pElement->pValue = pValue;
    pElement->nLength = nLength;
}

void ElementWriteValue(const Element *pElement)
{
    int nIndex = 0;
    for (; nIndex < pElement->nLength; nIndex++)
        printf("%02X ", pElement->pValue[nIndex]);
}

int main(void)
{
    //unsigned char myValue[] = { 0x01, 0x02, 0x03 };
    //int nLength = sizeof(myValue) / sizeof(myValue[0]);

    Element *pElement = ElementCreate();

    {
        unsigned char myValue[] = { 0x01, 0x02, 0x03 };
        int nLength = sizeof(myValue) / sizeof(myValue[0]);

        ElementSetValue(pElement, myValue, nLength);
    }

    // How come this writes out correct value?
    ElementWriteValue(pElement);

    ElementDestroy(&pElement);

    return 0;
} 
```

（为简洁起见，省略了错误检查）

哪种方式是正确的？

我希望 2 失败，因为 myValue 将在“}”之后被销毁，所以

```
printf("%02X ", pElement->pValue[nIndex]); 
```

会写出垃圾数据，但它似乎工作正常。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:07:10.757

这是未定义的行为，其中一个子集是“正常工作”。

数组`myValue`在 next 超出范围`}`。此时，存储的内存位置`myValue`可以重新使用，但它可能不会保持不变，因此代码似乎可以工作。

正确的做法是`malloc()`,`memcpy()`和`free()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:11:40.890

当我们进入

```
{
    unsigned char myValue[] = { 0x01, 0x02, 0x03 };
    int nLength = sizeof(myValue) / sizeof(myValue[0]);

    ElementSetValue(pElement, myValue, nLength);
} 
```

这意味着将为 myValue 保留一段内存。当我们离开它时（在 之后`}`），这意味着与 myValue 相关的内存不再保留，它是免费的，但内容没有改变。这就是为什么您可以访问内存并且其内容不会更改的原因。如果您的应用程序是多线程应用程序，那么与 myValue meory 相关的数据被另一个线程更改的风险很大，在这种情况下，您始终可以访问相同的内存空间，但您会发现内存内容发生了变化

# twisted.internet - ... twisted/internet/epollreactor.py”，第 238 行，在 _add

> ID：12600137
> 
> 赞同：5
> 
> 时间：2012-09-26T10:55:35.277
> 
> 标签：twisted.internet

遇到麻烦，服务端程序运行一段时间后，会出现大量的错误（error），服务端只能接受客户端连接不接受数据，最后暂停动画。以下错误：</p>

```
//report error:
//report error:
Unhandled Error
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
        return context.call({ILogContext: newCtx}, func, *args, **kw)
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/python/context.py", line 118, in callWithContext
        return self.currentContext().callWithContext(ctx, func, *args, **kw)
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/python/context.py", line 81, in callWithContext
        return func(*args,**kw)
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/internet/posixbase.py", line 614, in _doReadOrWrite
        why = selectable.doRead()
//        --- <exception caught here> ---
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 1016, in doRead
        transport = self.transport(skt, protocol, addr, self, s, self.reactor)
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 773, in __init__
        self.startReading()
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 416, in startReading
        self.reactor.addReader(self)
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 254, in addReader
        _epoll.EPOLLIN, _epoll.EPOLLOUT)
      File "/usr/lib64/python2.7/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 238, in _add
        self._poller.modify(fd, flags)
    exceptions.IOError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:15:01.290

对我来说看起来像是一个 Twisted 错误：我们刚刚在将一台在 10.0.0 上运行了一年多的稳定服务器升级到 12.3.0 后遇到了这种情况：升级后仅两天就发生了这种情况。

# uitableview - 粘UITableView，不必要的水平条可见，无法滚动到表格底部

> ID：12600138
> 
> 赞同：0
> 
> 时间：2012-09-26T10:55:39.800
> 
> 标签：uitableview, ios4, scrollbar, table-footer

我创建了一个 UITableVIew，它是一个 UIView 的子视图。我遇到了三个问题，并且仅在 iOS 4 设备上发生：

1）当视图在滚动时碰到表格的顶部或底部时，表格不会反弹。竖条也没有缩小，感觉很粘，非常像 Android 表格视图。我试过启用反弹属性，但这没有任何区别。

2) 当视图向下滚动到表格底部时，会出现水平滚动条。这不应该出现，因为表格视图的 contentSize 已正确设置。当 contentSize 设置为比应有的值少 20 像素时，它最终会消失。

3) 我无法滚动到页脚视图的底部，并且只有一半的页脚视图可见。

我在整个项目中添加了一个 UITableView 作为其他视图的子视图，这从未发生过，所以我复制了创建其他 UITableView 的方式，但仍然没有运气。

任何建议将不胜感激。

谢谢， 安库尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:30:13.010

我解决了这个问题。这个问题有点奇怪，虽然我觉得我编码的方式有点乱。

我正在子类化一个View，父视图有一个layoutSubview方法，它只是计算和设置表格视图子视图的框架。在子类中，我不得不重写 layoutSubview 的原因与表格视图框架的值需要不同。这意味着表格视图的框架被布置了两次，一次由父类布置，另一次由子类布置。似乎 iOS 4 不喜欢这样，我应该只为每个 layoutSubview 调用的每个子视图设置一次框架。

现在我创建了一个 layoutTableView 方法，该方法是从父 layoutSubview 调用的，并且我在子类中覆盖了 layoutTableView。因此表格视图的框架只被设置一次。

# matlab - fvtool 生成的数字打破了父子关系？

> ID：12600140
> 
> 赞同：2
> 
> 时间：2012-09-26T10:55:43.693
> 
> 标签：matlab, matlab-figure

为了重现我面临的问题，我将使用以下文档中示例之一的略微修改版本`fvtool`：

```
b1 = firpm(20,[0 0.4 0.5 1],[1 1 0 0]); 
fvtool(b1, 1, 'Analysis', 'freq'); 
```

上面的代码应该生成下图：

![fvtool生成的图](../Images/01efdeed846f9148ca87fb2af957b353.png)

我正在尝试独立操纵您在该图中可以看到的两条线的属性（相位和幅度线）。我可以轻松修改幅度线的属性：

```
h = findobj(gcf, 'Tag', 'magnitude_line');
set(h, 'Color', 'Red'); 
```

但是，我不能对相线做同样的事情。以下任何命令都只返回空数组：

```
h = findobj(gcf, 'Tag', 'phasez_line')
h = findobj('Tag', 'phasez_line')
h = findobj(0, 'Tag', 'phasez_line') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:41:41.177

我刚刚找到了我的问题的答案，这实际上是相当明显的。似乎将轴`fvtool`的`HandleVisibility`属性`fvtool_axes_2`（它是相线的父级）设置为`callback`，因此，在使用时找不到这样的对象`findobj`。使用`findall`问题解决，即：

```
h = findall(0, 'Tag', 'phasez_line'); 
```

同样，您可以使用`allchild`查找此类隐藏句柄，即：

```
parentAxes = findall(0, 'Tag', 'fvtool_axes_2');
% This returns empty
intersect(parentAxes, get(get(parentAxes, 'Parent'), 'Children'))
% But this returns a handle to the fvtool_axes_2 axes
intersect(parentAxes, allchild(get(parentAxes, 'Parent'))) 
```

# opengl - 如何确保我的 Windows OpenGL 应用程序的向后兼容性？

> ID：12600144
> 
> 赞同：3
> 
> 时间：2012-09-26T10:56:07.333
> 
> 标签：opengl, compatibility, backwards-compatibility

我开发了一个程序，它利用了 OpenGL 的许多方面——从相当新的功能到已弃用的功能，并希望确保它在绝大多数机器上都能正常工作——尤其是在显卡过时的机器上。

*   最大化 OpenGL 应用程序（向后）兼容性的最佳方法是什么？
*   如何测试我的程序与旧硬件的兼容性，而无需实际使用旧硬件的测试机器？
*   有哪些方法可以找到兼容性测试过程中可能遇到的问题的根本原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:22:00.790

> 最大化 OpenGL 应用程序（向后）兼容性的最佳方法是什么？

定义“兼容性”？如果您希望应用程序在尽可能多的硬件上运行，那么您基本上必须完全放弃着色器并坚持使用 GL 1.4。这里主要的混淆问题是英特尔驱动程序错误；许多较旧的英特尔硬件都*声称*支持 GL 2.0 或 2.1，但它们在这种支持方面存在无数失败。

> 如何测试我的程序与旧硬件的兼容性，而无需实际使用旧硬件的测试机器？

你没有。与旧硬件的兼容性不仅仅是坚持一个标准。这是为了确保您的程序不会遇到驱动程序错误。而做到这一点的唯一方法是在感兴趣的硬件上进行实际测试。

> 有哪些方法可以找到兼容性测试过程中可能遇到的问题的根本原因？

在最近的硬件上测试相同的代码。如果它有相同的故障，那么问题很可能出在您的代码中。如果它在最近的硬件上运行良好但在旧的硬件上失败，那么问题几乎可以肯定是旧硬件驱动程序的驱动程序错误。

制定解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:12:15.220

好吧，最大化向后兼容性并获得跟踪目标机器功能（恕我直言）的强大工具的最佳方法是使用[GLEW: The OpenGL Extension Wrangler Library 之](http://glew.sourceforge.net)类的东西。它将为您加载特定于 OpenGL 版本的功能，您可以测试它们是否受用户系统支持（或者更准确地说，受视频驱动程序支持）。这个库使用起来非常简单，它有很好的文档，你可以在谷歌上搜索很多例子。因此，如果目标机器没有一些新的 opengl 功能，则加载名为“opengl_old.cpp”的模块（例如），或者如果它没有某些已弃用的功能（如*glBegin()*，*glEnd()*） ，你最好继续使用“opengl_new.cpp”。

基本上，大多数更改是在 OpenGL 3.0（以及 3.3）中完成的，着色器作为唯一不推荐使用的图形管道引入，因此您可以在程序中创建两个 opengl 模块：一个用于 OpenGL 1&2，一个用于 OpenGL 3&4。至少我在自己的代码中以这种方式解决了这个问题。

要测试某些功能，您可以在创建上下文时指定要加载的 OpenGL API 的具体版本。

# android - 一个应用有多个 apk

> ID：12600146
> 
> 赞同：3
> 
> 时间：2012-09-26T10:56:13.550
> 
> 标签：android, apk

我创建了一个针对手机和平板电脑具有不同布局的应用程序。我可以将我的应用添加到 Google Play 上的两个 apk 中，一个用于手机，一个用于平板电脑吗？我在文档中找到了supports-screens，但不确定。我必须这样做，因为我的应用程序正在处理图像，如果我合并两者（手机和平板电脑）的图像，那么应用程序的大小非常大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:59:21.933

是的，您可以将 apk 定位到特定的设备配置。这是它的文档：http: [//developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:01:25.723

是的，您可以拥有一个包含多个 APK 的应用程序。请参阅[Multiple APK support](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)，但除非您真的看到那里的差异，例如完全不同的资产会导致整个应用程序膨胀，否则坚持使用单个二进制应用程序有助于进一步维护它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:59:15.500

是的，这是可能的。我建议将名称设置为：“...”手机“... HD”平板电脑

我还会在两个描述中包含一个链接，指代彼此（因此手机应用程序指的是高清版本，反之亦然）。

另外，我建议您阅读：http: [//developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

# ios - 在 iOS 4 和 iOS 5 上实现 APNS 有什么不同吗？

> ID：12600149
> 
> 赞同：0
> 
> 时间：2012-09-26T10:56:24.810
> 
> 标签：ios, apple-push-notifications

ios 4、ios 5等不同ios版本的推送通知实现有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:38:09.673

我不能在[iOS 4.3 to iOS 4.0 API Diffs](http://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html)中看到。

想扩展您的问题？

# c - c - 多个 select()s 来监控多个 FD_SET

> ID：12600155
> 
> 赞同：0
> 
> 时间：2012-09-26T10:56:55.680
> 
> 标签：c, sockets, select

我不是网络编程方面的专家。我基本上有两种客户，他们有不同的超时时间。我应该使用带有连接套接字的 UDP 进行客户端-服务器通信。

问题是双重的：

a) 我需要将任何客户端（或者套接字）在 t1 秒内没有响应的情况标记为已死亡。如果 read_fd_set 中的任何套接字都没有在超时值内读取任何内容，则使用 select 将超时。那么，如何让任何一个在相当长一段时间内没有数据读取的套接字超时？

*   目前，每当 select 返回时，我自己都会跟踪哪些套接字正在响应，哪些没有。我将 t1.tu_sec 添加到每个客户端（套接字）的单独经过时间。然后，我手动关闭并从 FD_SET 中排除在 (n) * (t1.tu_sec) 时间内没有响应的套接字。这是一个足够好的方法吗？

b) 主要问题是有两种客户端有不同的超时时间，t1 和 t2。我该如何处理？

*   我可以在同一个循环中为两种客户端设置两个 select() 吗？没有线程会导致饥饿吗？在这种情况下是否建议（甚至需要）使用线程？

我已经在网上漫游了很多年了！

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:06:37.123

我想到的一个快速解决方案是将集合中的套接字按剩余时间排序，直到最近的超时。

使用`select`将超时设置为剩余的最小时间，从集合中删除/关闭/删除超时套接字，然后重复。

因此，在伪代码中它可能如下所示：

```
C = collection of structs ( socket, timeout, time_remaining := timeout )

while (true) {
    sort_the_collection_by_time_remaining
    next_timeout = min(time_remaining in C)
    select ( sockets in C, next_timeout )
    update_all_time_remaining_values
    remove_from_C_if_required  //if timeout occured
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:37:26.243

这只是一种非常常见的模式的特例，其中选择/轮询循环与计时器集合相关联。

您可以使用任务的优先级队列，按下一个（绝对）触发时间排序；选择超时总是然后只是队列前面的绝对时间。

*   当 select 超时（就在下一次迭代之前，如果您的任务可能需要很长时间才能完成），获取当前时间，将每个应该已经执行的任务拉出队列，然后执行它
*   （某些）任务需要重新安排，因此请确保它们可以在您执行此操作时改变优先级队列

那么你的逻辑很简单：

*   在读取时，将套接字标记为忙
*   在计时器执行时，将套接字标记为空闲
    *   如果它*已经*空闲，这意味着自上次计时器到期后没有收到任何内容：它已经死了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:05:27.267

只需一个`select`电话即可轻松解决。对于每个套接字都有两个与超时相关的值：实际超时；以及超时前的时间。然后每 0.1 秒（或类似时间）倒计时一次“超时前的时间”，当它达到零时关闭套接字。如果套接字在超时之前接收到流量，只需将“超时前的时间”重置为超时值并再次开始向下计数。

# mysql - 在同一查询中检索总积分和每周总积分

> ID：12600156
> 
> 赞同：2
> 
> 时间：2012-09-26T10:56:59.657
> 
> 标签：mysql

我正在尝试查询我的奖励数据库，以了解员工*本周**总共*分配了多少积分。

 *我用来计算老师分配的总分的查询*如下*：

```
SELECT  `Giver_ID` , SUM(  `Points` ) AS TotalPoints
FROM  `transactions` 
GROUP BY  `Giver_ID` 
ORDER BY  `Giver_ID` ASC 
```

我用来计算*每周*分配的查询非常相似：

```
SELECT  `Giver_ID` , SUM(  `Points` ) AS WeeklyPoints
FROM  `transactions`
WHERE ( `Datetime` >= '2012-09-24' AND `Datetime` <= '2012-09-30' )
GROUP BY  `Giver_ID` 
ORDER BY  `Giver_ID` ASC 
```

我的问题是：**是否可以将查询组合起来生成`Giver_ID`，`TotalPoints`并`WeeklyPoints`从单个查询？**

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:14:45.317

尝试这个：

```
SELECT  a.`Giver_ID` , 
            MAX(b.`TotalPoints`) as `TotalPoints`, 
            MAX(c.`WeeklyPoints`) as `WeeklyPoints`
    FROM  `transactions` as a 
        LEFT JOIN (SELECT `Giver_ID`, SUM(`Points`) AS TotalPoints FROM `transactions` GROUP BY `Giver_ID`) as b ON a.`Giver_ID`=b.`Giver_ID`
        LEFT JOIN (SELECT `Giver_ID`, SUM(`Points`) AS WeeklyPoints FROM `transactions` WHERE ( `Datetime` >= '2012-09-24 00:00:00' AND `Datetime` <= '2012-09-30' ) GROUP BY `Giver_ID`) as c ON a.`Giver_ID`=c.`Giver_ID`
    GROUP BY  a.`Giver_ID` 
    ORDER BY  a.`Giver_ID` ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:19:50.557

对的，这是可能的 -

```
SELECT
  Giver_ID,
  SUM(Points) AS TotalPoints,
  SUM(IF(Datetime >= '2012-09-24' AND Datetime <= '2012-09-30', Points, NULL)) AS WeeklyPoints
FROM transactions
GROUP BY Giver_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:59:59.383

```
SELECT  `Giver_ID` , SUM( `Points`) AS WeeklyPoints,(SELECT SUM(`Points`)
FROM  `transactions` where `Giver_ID`=t.`Giver_ID` GROUP BY  `Giver_ID`)  AS TotalPoints
FROM  `transactions` t
WHERE ( `Datetime` >= '2012-09-24' AND `Datetime` <= '2012-09-30' )
GROUP BY  `Giver_ID` 
ORDER BY  `Giver_ID` ASC 
```*

# java - 在 web.xml 中具有安全约束的 Java 示例 Web 应用程序

> ID：12600157
> 
> 赞同：0
> 
> 时间：2012-09-26T10:57:01.623
> 
> 标签：java, authentication, web-applications, authorization, security

我正在寻找 JAVA 中的示例 Web 应用程序，该应用程序在其 web.xml 文件中具有安全约束来处理身份验证和授权。基本上我想看看如何通过安全约束来实现网络安全。

我仔细研究了一下，大部分都可以找到 web.xml 文件的示例，该文件显示了如何提供具有安全约束的 Web 安全性。但我希望在 java 中拥有一个小而完整的 Web 应用程序，它展示了这个概念。

有人可以为此建议一些来源吗？我对 Web 应用程序开发和 Web 安全都是新手。

请注意，我不想为现有的 Web 应用程序提供任何安全性，我需要一些 java 中的示例应用程序，它具有一些身份验证授权机制。作为我研究的一部分，我需要它来做一些实验。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:48:31.347

[Java EE 6 教程，第七部分：安全性](http://docs.oracle.com/javaee/6/tutorial/doc/gijrp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:04:17.733

您是否考虑过阅读[Java EE 5 教程](http://docs.oracle.com/javaee/5/tutorial/doc/index.html)中的[保护 Web 应用程序](http://docs.oracle.com/javaee/5/tutorial/doc/bncas.html)？教程包包含大量示例。

[您可以在此处](http://java.net/projects/javaeetutorial/downloads)下载示例的 ZIP 文件。

# c# - MVC 3 url 参数渲染

> ID：12600158
> 
> 赞同：0
> 
> 时间：2012-09-26T10:57:02.547
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

我有这个路由图：

```
routes.MapRoute(
            "ViewNews",
            "{controller}/{action}/{id}/{title}",
            new { controller = "Home", action = "NewsDetail", id = "", title = "" }
        ); 
```

在我看来这个 ActionLink ：

```
@Html.ActionLink(Model.Title, "NewsDetail", new { id = Model.Id, title = Url.ToFriendlyUrl(Model.Title) }) 
```

我希望它呈现如下内容：

```
http://localhost:49327/Home/NewsDetail/1/news-title 
```

相反，它呈现：

```
http://localhost:49327/Home/NewsDetail/1?title=news-title 
```

我想念什么？

**更新**

我以这种方式在默认之前移动了 MapRoute：

```
routes.MapRoute(
        "ViewNews",
        "{controller}/{action}/{id}/{title}",
        new { controller = "Home", action = "NewsDetail", id = "", title = "" }
        );

routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}", // URL with parameters
            new { controller = "Home", action = "Index" } // Parameter defaults

        ); 
```

但现在当我请求初始 URL 时：

```
http://localhost:49327/Home 
```

我立即被重定向到：

```
http://localhost:49327/Home/NewsDetail/1/news-title 
```

“NewsDetail”已成为默认操作！

![在此处输入图像描述](../Images/aa6ffc13af74366d2f70bc92d6d7af24.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:01:05.623

确保`Model.Id`参数不为空或不为空，并且默认路由不在您在 Global.asax 中显示的路由之前。您需要将其删除或放置在此自定义路线之后。

# android - 在android的edittext中使用spannable

> ID：12600166
> 
> 赞同：3
> 
> 时间：2012-09-26T10:57:32.650
> 
> 标签：android, hashmap, android-edittext, textwatcher, spannable

我把这段代码放在了答案[Displaying emoticons in Android](https://stackoverflow.com/questions/3341702/displaying-emoticons-in-android?rq=1) for show emoticons in Edittext 中，但是当我输入大量文本时出现问题，它变得越来越慢，几乎无法输入。这是代码：我怎样才能让它更快？

```
 textS.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {
                addSmiledText(Main.this, s);
               // Log.e("",s.toString());

            }
        });}

     private static final HashMap<String, Integer> emoticons = new HashMap<String, Integer>();
     static {
         emoticons.put(":)", R.drawable.face_smile);
         emoticons.put(":-)", R.drawable.face_smile);
         emoticons.put(":(", R.drawable.face_sad);
         emoticons.put(":-(", R.drawable.face_sad);
         emoticons.put(":-D", R.drawable.face_smile_big);
         emoticons.put(":D", R.drawable.face_smile_big);
         emoticons.put(":lol:", R.drawable.face_laughing);
            emoticons.put("8)", R.drawable.face_cool);
            emoticons.put(";)", R.drawable.face_wink);
           emoticons.put(";-)", R.drawable.face_wink);
            emoticons.put(";(", R.drawable.face_crying);
           ...

     }
     public static Spannable addSmiledText(Context ch, Editable s) {

            int index;
            for (index = 0; index < s.length(); index++) {
                for (Entry<String, Integer> entry : emoticons.entrySet()) {
                    int length = entry.getKey().length();
                    if (index + length > s.length())
                        continue;
                    if (s.subSequence(index, index + length).toString().equals(entry.getKey())) {
                        s.setSpan(new ImageSpan(ch, entry.getValue()), index, index + length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                        index += length - 1;
                        break;
                    }
                }
            }
            return s;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:13:18.390

> 如何让它只扫描最后两个字符？

你有：

```
for (index = 0; index < s.length(); index++) 
```

如果您不想每次都扫描整个字符串，请**为 选择更好的起始值`index`**。

例如，由于您的最小长度表情符号有两个字符，而您的最大长度表情符号有五个字符，因此完全跳过`Editable`长度为 0 或 1 的对象的循环，然后`index`从`s.length()-5`.

但是请注意，这`afterTextChanged()`不仅需要在最后进行更改。用户可能已将光标重新定位到中间的某个位置。因此，您确实应该扫描`onTextChanged()`并查看更改点周围的文本窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:00:18.530

为了扫描最后 2 个字符而不是

```
for (index = 0; index < s.length(); index++) 
```

利用

```
int start = s.length() - 1;
int end = start - 2;
for (index = start; index > end; index--) 
```

这样，您开始从最后一个元素向后循环，直到您循环 2 个位置。

# matlab - Matlab：精明的边缘检测器

> ID：12600167
> 
> 赞同：4
> 
> 时间：2012-09-26T10:57:36.820
> 
> 标签：matlab, edge-detection

**Matlab 版本：7.8.0(R2009a)**

我通过使用标准*“边缘”*功能的 Canny 边缘检测器从图像中获取边缘。但对于我的项目，我需要获得中间梯度幅度矩阵。即每个像素的梯度幅度值。

我知道我们可以使用*imgradientxy()*来做到这一点，但我需要 Canny 给出的确切结果，而且我不知道 Matlab 用于 Canny 的实现。有没有办法做到这一点，还是我必须从头开始实施精明？

**背景**：我基本上是在改变 canny 检测到的边缘上某些像素的强度值。我需要知道，更改后，当使用新值计算梯度时，它们是否仍会低于阈值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:33:38.537

要在 Matlab 中找到 Canny 边缘检测器的实现，您只需打开文件 ( `edit edge`)，因为该函数不是内置的。这样，您可以检查在您的 Matlab 版本中使用的过滤和梯度方案。

# javascript - 是否有一个 Eclipse 插件可以为“javascript 显示模块模式”创建大纲视图？

> ID：12600168
> 
> 赞同：13
> 
> 时间：2012-09-26T10:57:37.137
> 
> 标签：javascript, eclipse, design-patterns, ide

我喜欢 eclipse，经过一些调整，它可以用于 javascript 编程。有语法补全、linting、格式化，还有“大纲”，尽管只适用于简单的 javascript 文件。

令我烦恼的是，遵循“显示模块”设计模式的文件没有“大纲视图”。这恰好是我最喜欢的编码风格。

是否有某个插件可以向 Eclipse 添加一个“扩展”大纲视图，该视图能够“查看”以“显示模块样式”编写的 .js 文件的嵌套结构，显示封装的私有函数和成员？（对于这种样式，正常的“eclipse 大纲视图通常是空的）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T10:01:56.753

再次回答我自己的问题：

IIFE 中的 javascript 函数必须以 JSDoc 样式注释，然后它们将出现在大纲视图中。

这里描述了整个过程，并附有截图：

[http://www.kajabity.com/2012/02/how-i-introduced-jsdoc-into-a-javascript-project-and-found-my-eclipse-outline/](http://www.kajabity.com/2012/02/how-i-introduced-jsdoc-into-a-javascript-project-and-found-my-eclipse-outline/)

# jsf-2 - 如何在命令按钮单击时隐藏和显示 p:panel

> ID：12600170
> 
> 赞同：4
> 
> 时间：2012-09-26T10:57:37.163
> 
> 标签：jsf-2, primefaces

我有以下问题：

我是 JSF2 和 primefaces 的新手。

在用户输入字符串并单击命令按钮后，我在页面中有一个表格，该表格将填充信息。单击按钮后，我希望将其禁用，直到处理结束。

要禁用命令按钮，我正在执行以下操作；

```
<p:commandButton update=":outPanel" widgetVar="btnSend" id="btnsend"
     value="Calcular" actionListener="#{calcBean.getTrfs}" 
     onclick="btnSend.disable()" oncomplete="btnSend.enable()" /> 
```

然后我有一个面板，我想在其中显示其内容：

```
<p:panel id="outPanel" widgetVar="outpanel">
         #{calcBean.result}
</p:panel> 
```

第一次加载页面时如何隐藏此面板？

当我单击命令按钮时如何隐藏它，并且只有在我的 bean 中的处理成功时才再次显示它？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T13:48:07.247

解决了，

我必须把

```
 closable="true" toggleable="true" 
```

p：面板中的属性...谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-29T07:23:09.627

我在 JSF 中使用 p:commandButton 检查了以下面板隐藏和显示，

请在 JSF 中尝试以下方法，

```
<p:panel id="button_panel" widgetVar="testPanel" closable="true" toggleable="true">
<h1>Testing</h1>
</p:panel>

<p:commandButton onclick="PF('testPanel').show()" value="Show Panel" type="button"/>

<p:commandButton onclick="PF('testPanel').hide();" value="Hide Panel" type="button"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:01:41.167

在 ajax 请求完成后显示面板试试这个：

```
 <p:commandButton update=":outPanel" widgetVar="btnSend" id="btnsend"
 value="Calcular" actionListener="#{calcBean.getTrfs}" 
 onclick="btnSend.disable()" oncomplete="btnSend.enable();outPanel.show();" /> 
```

# c++ - 如何使用 Qt 4.8 在 Windows 中单击按钮时使主窗口和小部件不透明？

> ID：12600175
> 
> 赞同：1
> 
> 时间：2012-09-26T10:57:54.353
> 
> 标签：c++, qt4, widget, opacity

我对 Qt 框架有点陌生，所以在其中一项要求中有点挣扎。

我们必须在按钮单击时淡化主窗口，然后弹出确认消息。这样，只有弹出消息应该是可见的，而背景应该是不透明的。

目前在单击按钮时显示消息，背景变得不透明。但是窗口中的其他小部件仍然很突出。

下面是 Ok Button 的 Click 事件的代码片段

```
void MainWindow::OkClicked()
{
  QGraphicsOpacityEffect*   effect01  = new QGraphicsOpacityEffect();
  effect01->setOpacity(0.2);
  this->setGraphicsEffect(effect01);
  MessageDialog->updateStyles(); //Pop-up message Box
  MessageDialog->show();
} 
```

如果我们单独为所有小部件设置不透明度，则一种方法可以是。但这不是一个好的设计。任何指导都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:49:19.083

可以创建一个包含小部件并添加一个带有背景颜色属性和 alpha 属性的 QSS 样式。然后将布局添加到包含小部件以组织嵌套小部件的布局。我使用这种技术来实现透明效果，同时保持嵌套控件的不透明度。这是一些示例代码：

```
setAttribute(Qt::WA_NoSystemBackground, true);
// set the parent widget's background to translucent
setAttribute(Qt::WA_TranslucentBackground, true);

setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
// create a display widget for displaying child widgets
QWidget* displayWidget = new QWidget;
displayWidget->setGeometry(0, 0, this->width(), this->height());
displayWidget->setStyleSheet(".QWidget { background-color: rgba(0, 0, 0, 75%); border-width: 1px; border-style: solid; border-radius: 5px; border-color: #555555; } .QWidget:hover { background-color: rgba(68, 68, 68, 75%); border-width: 2px; border-style: solid; border-radius: 10px; border-color: #ffffff; }");

QLabel* icon = new QLabel;
icon->setPixmap(pixmapIcon);
icon->setMaximumSize(32, 32);
QLabel* header = new QLabel;
header->setMaximumSize(225, 50);
header->setWordWrap(true);
header->setText(headerText);
header->setStyleSheet("QLabel { color: #ffffff; font-weight: bold; font-size: 12px; }");
QLabel* message = new QLabel;
message->setMaximumSize(225, 100);
message->setWordWrap(true);
message->setText(messageText);
message->setStyleSheet("QLabel { color: #ffffff; font-size: 10px; }");
QHBoxLayout* displayMainLayout = new QHBoxLayout;
displayMainLayout->addWidget(icon);
QVBoxLayout* vl = new QVBoxLayout;
vl->addWidget(header);
vl->addWidget(message);
displayMainLayout->addLayout(vl);
displayWidget->setLayout(displayMainLayout);

QHBoxLayout* containerLayout = new QHBoxLayout;
containerLayout->addWidget(displayWidget);
setLayout(containerLayout);

show(); 
```

此代码直接取自我的 Qt Tray Notification Manager 项目。您可以在此处查看完整代码以获取一些上下文：[https ://github.com/pcmantinker/Tray-Notification-System](https://github.com/pcmantinker/Tray-Notification-System)

请注意，如果您熟悉 CSS，则 QSS 非常相似。如果您想以某种方式设置所有 QWidget 的样式，您将使用 QWidget 选择器。但是，如果您只想设置特定 QWidget 的样式，请使用 .QWidget 选择器。为所有 QWidget 设置样式将使每个可见的 QWidget 继承相同的属性，因为每个 UI 元素都派生自 QWidget。在构建样式时请记住这一点。这是对 QSS 的参考：http: [//qt-project.org/doc/qt-4.8/stylesheet.html](http://qt-project.org/doc/qt-4.8/stylesheet.html)

以下是它外观的一些示例图像：
Windows 7
![Windows 7的](../Images/ccfbcc1f989c81cd690172bc2eae5e6e.png)
Mac OS X Lion
![Mac OS X 狮子](../Images/1d6711d11c33aef4dd1dbca26db41f6f.png)
Ubuntu
![Ubuntu](../Images/bdb86f1f08b7796475b3c75ea8646bae.png)
我希望这会有所帮助。如果您有任何问题，请告诉我。

# linux - 最短线的长度？

> ID：12600177
> 
> 赞同：8
> 
> 时间：2012-09-26T10:58:06.723
> 
> 标签：linux, shell

在 Linux 命令中使用`wc -L`它可以获得文本文件最长行的长度。

如何找到文本文件*最短*行的长度？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T11:09:57.393

试试这个：

```
awk '{print length}' <your_file> | sort -n | head -n1 
```

此命令获取所有文件的长度，对它们进行排序（正确地，作为数字），最后将最小的数字打印到控制台。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T11:17:40.807

纯awk解决方案：

```
awk '(NR==1||length<shortest){shortest=length} END {print shortest}' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T13:45:14.787

我将 awk 命令变成了一个函数（用于 bash）：

`function shortest() { awk '(NR==1||length<shortest){shortest=length} END {print shortest}' $1 ;} ## report the length of the shortest line in a file`

将此添加到我的 .bashrc （然后是 "source .bashrc" ）

然后运行它：最短的“yourFileNameHere”

```
[~]$ 最短的 .history
2
```

可以将它分配给一个变量（注意需要反引号）：

```
[~]$ var1=`最短的.history`
[~]$ 回声 $var1
2

```

对于 csh：

`alias shortest "awk '(NR==1||length<shortest){shortest=length} END {print shortest}' \!:1 "`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-15T00:41:01.517

上面的两种`awk`解决方案都不能像处理 '\r' 那样`wc -L`处理。对于单行输入文件，它们生成的值不应大于`wc -L`.

这是一个基于新`sed`的解决方案（我无法在保持正确的同时缩短）：

```
echo $((`sed 'y/\r/\n/' file|sed 's/./#/g'|sort|head -1|wc --bytes`-1)) 
```

以下是一些示例，显示 '\r' 声明并演示`sed`解决方案：

```
$ echo -ne "\rABC\r\n" > file
$ wc -L file
3 file
$ awk '{print length}' file|sort -n|head -n1
5
$ awk '(NR==1||length<shortest){shortest=length} END {print shortest}' file
5
$ echo $((`sed 'y/\r/\n/' file|sed 's/./#/g'|sort|head -1|wc --bytes`-1))
0
$ 
$ echo -ne "\r\r\n" > file
$ wc -L file
0 file
$ echo $((`sed 'y/\r/\n/' file|sed 's/./#/g'|sort|head -1|wc --bytes`-1))
0
$ 
$ echo -ne "ABC\nD\nEF\n" > file
$ echo $((`sed 'y/\r/\n/' file|sed 's/./#/g'|sort|head -1|wc --bytes`-1))
1
$ 
```

# linux - 循环遍历目录和 rsync 内容

> ID：12600180
> 
> 赞同：0
> 
> 时间：2012-09-26T10:58:12.393
> 
> 标签：linux, bash, backup, rsync

我希望仅将特定文件和目录从 cpanel 备份同步到远程服务器。

基本结构是：

```
/backup/cpbackup/daily/USERNAME 
```

从我要备份的 USERNAME 目录中

```
../USERNAME/mysql/USERNAME.sql 
```

还有一个文件夹（包含文件和子文件夹）

```
../USERNAME/homedir/siteassets 
```

所以我最终在我的远程服务器上：

```
/USERNAME/mysql/USERNAME.sql
/USERNAME/homedir/siteassets 
```

我可以使用通配符

```
rsync /backup/cpbackup/daily/*/mysql/*.sql  user@remote.ip.address:servername/ 
```

但这不会远程给我 USERNAME 文件夹，这意味着所有文件最终都会被合并。我认为这可以通过使用 bash 或类似的东西遍历文件夹来实现，但这不是我的强项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:24:29.883

rsync 有 '--include-from' 和 '--exclude-from' 参数。这使您可以在单独的文件中定义白名单和黑名单。也许这可以使解决方案更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:21:50.440

自己回答：

```
#!/bin/bash

src="/backup/cpbackup/daily"

for dir in `ls "$src/"`
do
  if [ -d "$src/$dir" ]; then

        # look for mysql directory      
        mypath="$src/$dir/mysql"
        if [ -d $mypath ]; then
                mysqlfile=$mypath/$dir".sql"
                rsync -vau --progress --stats --rsh=ssh $mysqlfile user@remote.ip.address.net:servername/$dir
        fi

        # look for images directory      
        impath="$src/$dir/homedir/siteassets"
        if [ -d $impath ]; then
                rsync -vau --progress --stats --rsh=ssh $impath user@remote.ip.address.net:servername/$dir
        fi

  fi
done 
```

# ios - 构建项目时声明接口错误

> ID：12600181
> 
> 赞同：0
> 
> 时间：2012-09-26T10:58:14.567
> 
> 标签：ios, xcode, ios5, selector, declaration

我对 ios 开发相当陌生，按照“开始 ios5 开发”一书第 4 章的教程练习，我的代码遇到了一些编译错误。

这是我的头代码 .h 文件的样子

```
 #import <UIKit/UIKit.h>

   @interface BIDViewController : UIViewController

   @property (strong, nonatomic) IBOutlet UITextField *namefIELD;

   @property (strong, nonatomic) IBOutlet UITextField *numberField;
   @property (strong, nonatomic) IBOutlet UILabel *sliderLabel;
   @property (strong, nonatomic) IBOutlet UISegmentedControl *leftSwitch;
   @property (strong, nonatomic) IBOutlet UISegmentedControl *rightSwitch;
   @property (strong, nonatomic) IBOutlet UIButton *doSomethingButton;

   -(IBAction)textFieldDoneEditing:(id)sender;
   //to initialize the 'done' button when editing to confirm you have finished editing/

   -(IBAction) backgroundTap:(id)sender;
  - (IBAction)sliderChanged:(id)sender;
  - (IBAction)switchChanged:(id)sender;
  - (IBAction)toggleControls:(id)sender;
  - (IBAction)buttonPressed:(id)sender;
  @end 
```

这是我的.m代码，我面临错误“'UISegmentedControl'没有可见的@interface声明选择器'setOn：animated;'

```
 @synthesize leftSwitch;
  @synthesize rightSwitch;

 - (IBAction)switchChanged:(id)sender {
 UISwitch *whichSwitch = (UISwitch *)sender;
 BOOL setting = whichSwitch.isOn;
 [leftSwitch setOn: setting animated: YES];  //the error lies here/
 [rightSwitch setO: setting animated: YES];  //the error lies here/
 }

 - (IBAction)toggleControls:(id)sender {
 }

 - (IBAction)buttonPressed:(id)sender {
 }
 @end 
```

错误语句是“'UISegmentedControl' 没有可见的@interface 声明选择器'setOn：animated;'

请帮助，将不胜感激并投票赞成:)

@PhilipMills ...这就是我要说的，只要我单击分段控制对象的左侧或右侧，就会在此处的委托标头代码上自动创建一个断点

```
 #import <UIKit/UIKit.h>

 #import "BIDAppDelegate.h"

 int main(int argc, char *argv[])
 {
       @autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([BIDAppDelegate         class])); //the breakpoint appears here.
       }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:51:38.757

A`UISwitch`有`setOn:animated:`方法，但 a`UISegmentedControl`没有。我猜你分配的对象`leftSwitch`不是`rightSwitch`你想要的（或教程想要的）。

# mysql - 自引用外键 - mysql 未设置为 null

> ID：12600182
> 
> 赞同：9
> 
> 时间：2012-09-26T10:58:26.230
> 
> 标签：mysql

索引：

```
Keyname    Type   Unique  Packed  Column     Cardinality Collation  Null        
parent_id  BTREE  No      No      parent_id  1           A          YES 
```

表：（评论）

```
Column      Type        Null    Default Extra
id          int(11)     No      None    AUTO_INCREMENT      
parent_id   int(11)     Yes     NULL 
```

关系视图：

```
Column     Foreign key constraint (INNODB)
parent_id  'test_site'.'comments'.'id'  ON DELETE CASCADE   ON UPDATE  NO ACTION 
```

是否可以将 parent_id 设置为 NULL。我尝试将默认值设置为“0”并插入值“0”，但出现以下错误。

错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update 
a child row: a foreign key constraint fails (`test_site`.`comments`, 
CONSTRAINT `comments_ibfk_2` FOREIGN KEY (`parent_id`) REFERENCES `comments` 
(`id`) ON DELETE CASCADE ON UPDATE NO ACTION) 
```

对此的任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-31T09:33:50.477

是的，这是可能的，尽管您只需绕过外键约束一次即可插入默认值的虚拟记录。这是我的工作流程：

这是表的创建：

```
root@localhost:playground > create table comments(id int auto_increment primary key, parent_id int not null default 0, constraint fk_parent_id foreign key (parent_id) references comments(id) on delete cascade on update cascade)engine=innodb;
Query OK, 0 rows affected (0.01 sec)

root@localhost:playground > show create table comments\G
*************************** 1\. row ***************************
       Table: comments
Create Table: CREATE TABLE `comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `fk_parent_id` (`parent_id`),
  CONSTRAINT `fk_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `comments` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec) 
```

现在绕过外键并插入虚拟记录。

```
root@localhost:playground > set session foreign_key_checks=0;
Query OK, 0 rows affected (0.00 sec)

root@localhost:playground > insert into comments (id) values (null);                                                                                              Query OK, 1 row affected (0.00 sec)

root@localhost:playground > set session foreign_key_checks=1;
Query OK, 0 rows affected (0.00 sec)

root@localhost:playground > select * from comments;
+----+-----------+
| id | parent_id |
+----+-----------+
|  1 |         0 |
+----+-----------+
1 row in set (0.00 sec)

root@localhost:playground > update comments set id = 0 where id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

root@localhost:playground > select * from comments;
+----+-----------+
| id | parent_id |
+----+-----------+
|  0 |         0 |
+----+-----------+
1 row in set (0.00 sec) 
```

为了使事情整洁，我重置了 auto_increment （这不是必需的）：

```
root@localhost:playground > alter table comments auto_increment=0;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0 
```

从现在开始，您的外键约束正常工作，您的列不再可以为空并且具有默认值：

```
root@localhost:playground > insert into comments (id) values (null);
Query OK, 1 row affected (0.00 sec)

root@localhost:playground > select * from comments;
+----+-----------+
| id | parent_id |
+----+-----------+
|  0 |         0 |
|  1 |         0 |
+----+-----------+
2 rows in set (0.00 sec) 
```

# ios - 在 iOS 上，为什么在当前视图控制器之后立即关闭视图控制器不起作用？

> ID：12600189
> 
> 赞同：3
> 
> 时间：2012-09-26T10:58:38.557
> 
> 标签：ios, uiviewcontroller, uikit

曾经有效的代码是

```
[self presentViewController:aNewViewController animated:YES completion:nil]; 
```

和`self`是同一个类`aNewViewController`，所以它是一个通过水平翻转不断呈现新页面（具有不同数据）的页面。

但由于`presentViewController`这种方式会导致内存使用量越来越多（有点像网络浏览器，只有越来越多的 Back 和 Forward 历史记录），所以我将代码更改为：

```
[self.presentingViewController dismissViewControllerAnimated:NO 
          completion:^{
              [self.presentingViewController 
                        presentViewController:aNewViewController
                        animated:YES completion:nil];
}]; 
```

但由于某种原因，它只是“返回”到前一个视图控制器的视图，而没有进入新的视图（`aNewViewController`）。最初，我将上面的代码一个接一个地放在 2 行平行的行中，然后将第二行放在第一次调用的完成块中。这两种方法都不会按预期工作。是否有一些棘手的问题使它无法进入新的视图控制器？

还有，以前翻到新内容的效果不错，但是现在，如果有效的话，大概会翻回第一页（起始页），然后再翻到结果页，下一次，再次翻到起始页。因为起始页面看起来与结果页面完全不同，我宁愿它只是继续翻转显示结果页面（从一个结果页面，翻转到另一个结果页面）。如果我将“关闭”设置为没有动画，它不会有翻转动画，但它仍然会先显示起始页面，然后再翻转到结果页面。有没有办法解决这个问题？

**更新：**`self`解雇后不复存在 是不是真的？（对象已解除分配）。上面的代码实际上是在一个类方法中完成的（该类是同一个类`aNewViewController`，即结果页的视图控制器）。为了解决这个`self`问题，我尝试先设置一个局部变量

```
UIViewController *presentingViewController = foo.presentingController;
[presentingViewController dismissViewControllerAnimated:NO 
          completion:^{
              [presentingViewController 
                        presentViewController:aNewViewController
                        animated:YES completion:nil];
}]; 
```

(`foo`被传入，并且具有`self`) 的值。然后它真的有效！但是，如果它不是类方法而是实例方法……将`self`不再存在怎么办？（如果是在实例方法中，完成块会让对象保持活动状态吗？但是在完成块之后，谁让对象保持活动状态呢？）我在类方法中做到了，因为这样起始页面就可以调用它呈现此页面的类方法（带有 URL 数据获取逻辑）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:05:11.117

您需要在这两个转换之间添加一些延迟。尝试添加 0.40 的交易量。喜欢`[self performSelector:@selector(anySelector:) withObject:nil afterDelay:0.40];`

# css - CSS3具有多个位置的多个背景图像

> ID：12600190
> 
> 赞同：1
> 
> 时间：2012-09-26T10:58:42.287
> 
> 标签：css, position, background-image

我正在尝试使用选项卡按钮的背景图像构建选项卡菜单系统。

标签按钮图像高 200 像素，宽 40 像素。由于我希望这些选项卡的高度可变，我想知道正在使用的图像是否可以在选项卡按钮内有 3 个不同的位置，以使其顶部和底部的圆形外观与中心的高度灵活。

这是我的尝试。它没有产生我想要的结果。这应该如何工作：

```
background-image:url(tabs-large.png); 
background-position:0 0, 0 20px, 0 180px; 
background-size:100% 20px, 100% 100%, 100% 20px; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:05:51.853

目前，您只有一个`background-image`. 这[只会创建一个 layer](http://www.w3.org/TR/css3-background/#layering)，所以只有你的`0 0`位置和`100% 20px`大小被使用，其余的被忽略。

如果`tabs-large.png`代表您的整个标签图像，您需要将其分成三部分：例如顶部边缘、底部边缘和中间部分，然后在其自己的图像中指定每个部分。您还需要确保顶部和底部边缘不会重复，而中间部分会重复。

下面是代码的样子：

```
background-image: url(tabs-large-top.png), url(tabs-large-middle.png), url(tabs-large-bottom.png);
background-position: 0 0, 0 20px, 0 180px;
background-repeat: no-repeat, repeat-y, no-repeat;
background-size: 100% 20px, 100% 100%, 100% 20px; 
```

这样，每张图像对应一个位置和一个尺寸，顺序相同。

# html - BlackBerry HTML5 流媒体的编码设置是什么？

> ID：12600191
> 
> 赞同：0
> 
> 时间：2012-09-26T10:58:48.507
> 
> 标签：html, blackberry, ffmpeg, video-codecs

几天来，我一直在拼命尝试在黑莓以及主要的桌面和移动浏览器上播放我的视频。视频以这种方式嵌入：

```
<video preload="auto" controls="controls">
<source src="url.mp4" type=video/mp4 />
<source src="url.ogv" type=video/ogv />
//flash fallback
</video> 
```

在 BB 浏览器中打开页面时，会出现带有控件的黑色视频框架，但是当我尝试播放视频时，框架保持黑色并显示错误消息：“视频部分的格式不受支持”。然而，声音确实播放。

到目前为止，我已经尝试了带有 AAC 音频的 H.264 和 mpeg4，但它们都不能在我的 BB（操作系统版本 6.0）上正常播放。我一直在使用 ffmpeg 对文件进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:17:30.183

最终工作的视频具有以下参数（来自 ffprobe 的输出）

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'file.mp4':
Metadata:
  major_brand     : isom
  minor_version   : 512
  compatible_brands: isomiso2mp41
  encoder         : Lavf54.6.100
Duration: 00:02:03.74, start: 0.000000, bitrate: 917 kb/s
Stream #0:0(und): Video: mpeg4 (Simple Profile) (mp4v / 0x7634706D), yuv420p , 480x360 [SAR 1:1 DAR 4:3], 786 kb/s, 23.98 fps, 23.98 tbr, 24k tbn, 24k tbc
Metadata:
  handler_name    : VideoHandler
Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 22050 Hz, stereo, s16, 128 kb/s
Metadata:
  handler_name    : SoundHandler
0.00 A-V:-134874618Frame changed from size:0x0 to size:480x360
2.74 A-V:  0.070 fd=   9 aq=    7KB vq=   38KB sq=    0B f=0/0   f=0/0 
```

要对此类文件进行编码，请为 ffmpeg 使用以下参数：

```
ffmpeg.exe -i "input_file.mov" -strict -2 -vcodec mpeg4 -vb 786k -acodec aac -ab 128k "output_file.mp4" 
```

# java - Lucene：如何索引文件名

> ID：12600196
> 
> 赞同：4
> 
> 时间：2012-09-26T10:59:00.867
> 
> 标签：java, lucene

我是新手 lucene 用户，现在正在尝试获得一些基础知识。

我有三个文件：

*   `apache_empty.txt`（空的文件），
*   `apache.txt`（包含许多`'apache'`令牌），
*   `other.txt`（仅包含一个标记 - `'apache'`）

当我尝试搜索`'apache'`时，**我只得到** `apache.txt`结果`other.txt`，但我什至想得到`apache_empty.txt`名称中包含搜索词的文件......

这就是我将文档添加到索引的方式：

```
protected Document getDocument(File f) throws Exception 
{
  Document doc   = new Document();
  Field contents = new Field("contents", new FileReader(f));
  Field parent   = new Field("parent",   f.getParent(), Field.Store.YES, Field.Index.NOT_ANALYZED);
  Field filename = new Field("filename", f.getName(), Field.Store.YES, Field.Index.ANALYZED);
  Field fullpath = new Field("fullpath", f.getCanonicalPath(), Field.Store.YES, Field.Index.NOT_ANALYZED);
  filename.setBoost(2.0F);
  doc.add(contents);
  doc.add(parent);
  doc.add(filename);
  doc.add(fullpath);
  return doc;
} 
```

如何让lucene索引也有文件名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:16:08.557

要启用通配符，您应该搜索`apache*`与您的文件名匹配`apache_empty`的完整语法，另请参见[Apache Lucene 查询解析器](https://lucene.apache.org/core/3_6_0/queryparsersyntax.html)。

另一种方法是在使用的分析器中包含下划线作为单词分隔符。

# delphi - Delphi中的字符串比较

> ID：12600197
> 
> 赞同：3
> 
> 时间：2012-09-26T10:59:02.987
> 
> 标签：delphi, delphi-2009

我有两个字符串，我需要比较它们是否相等。

字符串 1 是这样创建的：

```
var
    inBuf: array[0..IN_BUF_SIZE] of WideChar;
    stringBuilder : TStringBuilder;
    mystring1:string;
    ...
begin

stringBuilder := TStringBuilder.Create;

for i := startOfInterestingPart to endOfInterestingPart do
begin
  stringBuilder.Append(inBuf[i]);
end;

mystring1 := stringBuilder.ToString();
stringBuilder.Free; 
```

字符串 2 是一个常量字符串`'ABC'`。

当字符串 1 显示在调试控制台中时，它等于 'ABC'。但是对比

1.  `AnsiCompareText(mystring1, 'ABC')`
2.  `mystring1 = 'ABC'`
3.  `CompareStr(mystring1, 'ABC')`

所有报告不平等。

我想我需要将字符串 2 ( `'ABC'`) 转换为与字符串 1 相同的类型。

我怎样才能做到这一点？

**2012 年 9 月 26 日更新：**

`aMessage`在日志输出中显示为 {FDI-MSG-START-Init-FDI-MSG-END}

这是打印字符串长度的代码：

```
StringToWideChar('{FDI-MSG-START-Init-FDI-MSG-END}', convString, iNewSize);

...

OutputDebugString(PChar('Len (aMessage): ' + IntToStr(Length(aMessage))));
OutputDebugString(PChar('Len (original constant): ' + IntToStr(Length('{FDI-MSG-START-Init-FDI-MSG-END}'))));
OutputDebugString(PChar('Len (convString): ' + IntToStr(Length(convString)))); 
```

这是日志输出：

```
[3580] Len (aMessage): 40
[3580] Len (original constant): 32
[3580] Len (convString): 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:09:23.273

看起来您在有意义的部分之后将垃圾数据保留在宽字符串中，在您的更新中`Length(aMessage)`返回 40，而您的源字符串的长度为 32。

在 Delphi 中，宽字符串与 COM BSTR 兼容，这意味着它可以保存空字符，空字符不会终止它，它会将其长度保持在字符数据的负偏移量处。其中可能的空字符有助于将其转换为其他字符串类型，但不会改变其自身的终止。

考虑以下，

```
const
  Source = '{FDI-MSG-START-Init-FDI-MSG-END}';
var
  ws: WideString;
  size: Integer;
begin
  size := 40;
  SetLength(ws, size);
  StringToWideChar(Source, PWideChar(ws), size);

  // the below assertion fails when uncommented
//  Assert(CompareStr(Source, ws) = 0);

  ws := PWideChar(ws);  // or SetLength(ws, Length(Source));
  // this assertion does not fail
  Assert(CompareStr(Source, ws) = 0);
end; 
```

# c# - 如何检测 Http 请求的结束？

> ID：12600199
> 
> 赞同：3
> 
> 时间：2012-09-26T10:59:08.497
> 
> 标签：c#, html, parsing, request

我正在创建一个 Http 请求解析器。我以块（字节数组）的形式获取数据并同时解析它。我想知道检测到http请求结束的情况。请求可能包含也可能不包含消息正文。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:04:13.050

三种不同的方式：

*   内容长度标头（标头后面的字节数）

*   分块编码（请求开始时内容长度未知，分块编码将指示何时到达结束）

*   服务器关闭的连接（http“0.9”）

# c - 分段错误：arr[(i * 16) % arrLen] vs arr[i % arrLen]

> ID：12600204
> 
> 赞同：1
> 
> 时间：2012-09-26T10:59:20.403
> 
> 标签：c

处理我的任务，[另一个问题](https://stackoverflow.com/questions/12594208/c-program-to-determine-levels-size-type-of-cache)的更多细节。如果我使用

```
arr[(i * 16) % arrLen] *= 2; // seg fault 
```

对比

```
arr[i % arrLen] *= 2; // OK! 
```

为什么？**[完整来源](https://gist.github.com/3787223)**见第 31 行。为什么？我对数组长度取模，所以应该没问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:07:08.433

`i * 16`可以溢出到有符号整数的负范围内。当您对负整数取模时，您可以获得负余数，这将使您的数组下标为负数，并导致访问数组分配的内存之外，有时还会导致崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:55:04.657

查看您的完整来源：

1.  您应该检查 malloc 的返回以确保您能够获得该内存
2.  你应该释放内存，你有泄漏
3.  您的 arr 数组中的内存未初始化，您分配它但不将其设置为任何内容，因此您（很可能）得到一个很大的负数。这可以通过`memset(arr,0,arrLen);`
4.  但是，您`malloc(arrLen * sizeof(int))`arrLen 是使用 a 创建的`/sizeof(int)`，因此您正在取消那里的工作...

关于您的段错误，正如其他人所说的那样，您的数组溢出了。您已经创建了一个整数数组。然后你从 0 循环到 reps (268,435,456)，这是 int 的最大大小。当您尝试将其乘以 16 时，您会溢出并创建负偏移。

尝试将 16 乘以代表的初始化：

```
int reps = 256 * 1024 * 1024 * 16; 
```

你的编译器应该抛出一个警告，让你知道这个确切的事情：

```
warning: integer overflow in expression [-Woverflow] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:10:42.693

假设`int`您的系统上的 a 大小是 32 位，那么您很可能会导致溢出并且结果`i * 16`变为负数。在二进制补码系统中，负值用较高的二进制值表示。

```
int reps = 256 * 1024 * 1024; 
```

所以`reps = 268,435,456`，这是你循环到的值。因此的最大值`i`是`268,435,455`和`268,435,455 * 16 = 4,294,967,280`。

`int`32 位可以表示的最大正值是`2,147,483,647`（`4,294,967,295`对于 an `unsigned int`，所以你还没有环绕负数），这意味着结果被解释为负值。

访问负偏移量`arr`超出了分配内存的范围，这会导致未定义的行为，幸运的是会出现段错误。

# php - jQuery 从 php 获取上个月

> ID：12600210
> 
> 赞同：0
> 
> 时间：2012-09-26T10:59:42.050
> 
> 标签：php, jquery

我已经制作了这个脚本，它从 calendar.php 获取月份和年份，我希望当我单击上个月的链接以获取上个月时，以及当月份数达到 1 时使年份 - 1。我该怎么做像那样？

```
<html>
<head></head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"    type="text/javascript"></script>
<script>
$(function() {
get_data();
});

function get_data(a, b) {

$.get('calendar.php', { 
    month: a, year: b
    }, 

    function(response) {
    $el = $('<div></div>').attr('class', 'data').html(response);
    $('#datas').prepend($el);
    height = $el.height()+'px';
    $el.css({'opacity': 0, 'display': 'block', 'height': '0px'}).animate({height: height }, 500, function() {
            $(this).animate({opacity: 1}, 500);
    })
});
}
   </script>
<style>
#datas {
overflow: hidden;
}
.data {
display: none;
}
</style>
<body>
 <a href="#" OnClick="get_data(9, 2012);" > Previous month</a>
<div id="datas">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:07:05.187

我认为你应该使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    url: 'calendar.php',
    success: function(data) {
        // Parse your data and do all neccessery refreshing
    }
}); 
```

为了得到昨天，你可以使用

```
var d = new Date(/* data that you get from calendar.php*/);
d.setDate(d.getDate() - 1); 
```

# ios - contentView 在 iOS 6 UITableViewCell 原型单元格中没有缩进

> ID：12600214
> 
> 赞同：40
> 
> 时间：2012-09-26T11:00:00.747
> 
> 标签：ios, uitableview, ios6

我正在`UITableViewCell`使用情节提要中的原型单元配置自定义。但是，所有`UILabel`s （和其他 UI 元素）似乎都没有添加到单元格中`contentView`，而是直接添加到`UITableViewCell`视图中。当单元格进入编辑模式时，这会产生问题，因为内容不会自动移动/缩进（如果它们在`contentView`.

有没有办法在`contentView`使用 Interface Builder/Storyboard/prototype 单元格布局单元格时添加 UI 元素？我发现的唯一方法是在代码中创建所有内容并使用`[cell.contentView addSubView:labelOne]`这不是很好，因为以图形方式布局单元格要容易得多。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-30T01:16:25.650

在进一步调查（查看单元格的子视图层次结构）中，Interface Builder 确实将子视图放置在单元格中`contentView`，但它看起来并不像它。

问题的根本原因是 iOS 6 自动布局。当单元格被置于编辑模式（并缩进）时，`contentView`它也被缩进，因此可以推断，`contentView`由于在`contentView`. 但是，Interface Builder 应用的所有自动布局约束似乎都与`UITableViewCell`自身相关，而不是`contentView`. 这意味着即使`contentView`缩进，其中包含的子视图也不 - 约束负责。

例如，当我将 a`UILabel`放入单元格中（并将其放置在距离单元格左侧 10 个点的位置）时，IB 自动应用了约束“水平空间 (10)”。然而，这个约束是相对于`UITableViewCell`NOT 的`contentView`。这意味着当单元格缩进并`contentView`移动时，标签会保持原样，因为它符合从 . 左侧保持 10 个点的约束`UITableViewCell`。

不幸的是（据我所知）没有办法从 IB 本身中删除这些 IB 创建的约束，所以这就是我解决问题的方法。

在单元格的子类中，我为该约束`UITableViewCell`创建了一个名为. 您还需要一个标签本身，我称之为. 然后我按照以下方式实现了该方法：`IBOutlet``cellLabelHSpaceConstraint``IBOutlet``cellLabel``-awakeFromNib`

```
- (void)awakeFromNib {

    // -------------------------------------------------------------------
    // We need to create our own constraint which is effective against the
    // contentView, so the UI elements indent when the cell is put into
    // editing mode
    // -------------------------------------------------------------------

    // Remove the IB added horizontal constraint, as that's effective
    // against the cell not the contentView
    [self removeConstraint:self.cellLabelHSpaceConstraint];

    // Create a dictionary to represent the view being positioned
    NSDictionary *labelViewDictionary = NSDictionaryOfVariableBindings(_cellLabel);   

    // Create the new constraint
    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-10-[_cellLabel]" options:0 metrics:nil views:labelViewDictionary];

    // Add the constraint against the contentView
    [self.contentView addConstraints:constraints];

} 
```

总之，以上将删除 IB 自动添加的水平间距约束（对`UITableViewCell`而不是有效`contentView`），然后我们定义并将自己的约束添加到`contentView`.

在我的例子中，`UILabels`单元格中的所有其他元素都是根据的位置定位的，`cellLabel`所以当我修复这个元素的约束/定位时，所有其他元素都遵循并正确定位。但是，如果您有更复杂的布局，那么您可能还需要对其他子视图执行此操作。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-15T14:41:27.967

如前所述，XCode 的 Interface Builder 隐藏了 UITableViewCell 的 contentView。实际上，所有添加到 UITableViewCell 的 UI 元素实际上都是 contentView 的子视图。

目前，IB 并没有为布局约束做同样的魔法，这意味着它们都在 UITableViewCell 级别表示。

一种解决方法是在子类的 awakeFromNib 中将所有 NSAutoLayoutConstrains 从 UITableViewCell 移动到它的 contentView 并用 contentView 表达它们：

```
-(void)awakeFromNib{
  [super awakeFromNib];
  for(NSLayoutConstraint *cellConstraint in self.constraints){
    [self removeConstraint:cellConstraint];
    id firstItem = cellConstraint.firstItem == self ? self.contentView : cellConstraint.firstItem;
    id seccondItem = cellConstraint.secondItem == self ? self.contentView : cellConstraint.secondItem;
    NSLayoutConstraint* contentViewConstraint =
    [NSLayoutConstraint constraintWithItem:firstItem
                                 attribute:cellConstraint.firstAttribute
                                 relatedBy:cellConstraint.relation
                                    toItem:seccondItem
                                 attribute:cellConstraint.secondAttribute
                                multiplier:cellConstraint.multiplier
                                  constant:cellConstraint.constant];
    [self.contentView addConstraint:contentViewConstraint];
  }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-23T11:51:23.077

这是一个子类，基于其他答案的想法，我将基于我的自定义单元格：

```
@interface FixedTableViewCell ()

- (void)initFixedTableViewCell;

@end

@interface FixedTableViewCell : UITableViewCell

@end

@implementation FixedTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if (nil != (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])) {
        [self initFixedTableViewCell];
    }
    return self;
}

- (void)awakeFromNib {
    [super awakeFromNib];

    [self initFixedTableViewCell];
}

- (void)initFixedTableViewCell {
    for (NSInteger i = self.constraints.count - 1; i >= 0; i--) {
        NSLayoutConstraint *constraint = [self.constraints objectAtIndex:i];

        id firstItem = constraint.firstItem;
        id secondItem = constraint.secondItem;

        BOOL shouldMoveToContentView = YES;

        if ([firstItem isDescendantOfView:self.contentView]) {
            if (NO == [secondItem isDescendantOfView:self.contentView]) {
                secondItem = self.contentView;
            }
        }
        else if ([secondItem isDescendantOfView:self.contentView]) {
            if (NO == [firstItem isDescendantOfView:self.contentView]) {
                firstItem = self.contentView;
            }
        }
        else {
            shouldMoveToContentView = NO;
        }

        if (shouldMoveToContentView) {
            [self removeConstraint:constraint];
            NSLayoutConstraint *contentViewConstraint = [NSLayoutConstraint constraintWithItem:firstItem
                                                                                     attribute:constraint.firstAttribute
                                                                                     relatedBy:constraint.relation
                                                                                        toItem:secondItem
                                                                                     attribute:constraint.secondAttribute
                                                                                    multiplier:constraint.multiplier
                                                                                      constant:constraint.constant];
            [self.contentView addConstraint:contentViewConstraint];
        }
    }
}

@end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-23T02:33:13.670

子类化的替代方法是修改 cellForRowAtIndexPath 中的约束。

将单元格的所有内容嵌入到容器视图中。然后将前导和尾随约束指向 cell.contentView 而不是表格视图单元格。

```
 UIView *containerView = [cell viewWithTag:999];
  UIView *contentView = [cell contentView];

  //remove existing leading and trailing constraints
  for(NSLayoutConstraint *c in [cell constraints]){
    if(c.firstItem==containerView && (c.firstAttribute==NSLayoutAttributeLeading || c.firstAttribute==NSLayoutAttributeTrailing)){
      [cell removeConstraint:c];
    }
  }

  NSLayoutConstraint *trailing = [NSLayoutConstraint
                                 constraintWithItem:containerView
                                 attribute:NSLayoutAttributeTrailing
                                 relatedBy:NSLayoutRelationEqual
                                 toItem:contentView
                                 attribute:NSLayoutAttributeTrailing
                                 multiplier:1
                                 constant:0];

  NSLayoutConstraint *leading = [NSLayoutConstraint
                                 constraintWithItem:containerView
                                 attribute:NSLayoutAttributeLeading
                                 relatedBy:NSLayoutRelationEqual
                                 toItem:contentView
                                 attribute:NSLayoutAttributeLeading
                                 multiplier:1
                                 constant:0];

  [cell addConstraint:trailing];
  [cell addConstraint:leading]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-08T22:13:11.037

我认为这在 iOS 7 beta 3 中已修复，因此从那时起就不需要变通方法（但可能是无害的，因为在大多数情况下它们将变成空操作）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-11T08:16:47.093

根据 Skoota 的代码（我是初学者，不太了解你做了什么，但工作非常出色），我的建议是将你所有的东西放在一个边缘到边缘的容器视图中并添加以下内容：

在单元格的头文件中，我有以下 IBOutlets：

```
@property (weak, nonatomic) IBOutlet UIView *container;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *leftConstrain;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *rightConstrain; 
```

在实现文件中，我在 awakeFromNib 中有以下内容：

```
// Remove the IB added horizontal constraint, as that's effective gainst the cell not the contentView
[self removeConstraint:self.leftConstrain];
[self removeConstraint:self.rightConstrain];

// Create a dictionary to represent the view being positioned
NSDictionary *containerViewDictionary = NSDictionaryOfVariableBindings(_container);

// Create the new left constraint (0 spacing because of the edge-to-edge view 'container')
NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-0-[_container]" options:0 metrics:nil views:containerViewDictionary];
// Add the left constraint against the contentView
[self.contentView addConstraints:constraints];

// Create the new constraint right (will fix the 'Delete' button as well)
constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"[_container]-0-|" options:0 metrics:nil views:containerViewDictionary];
// Add the right constraint against the contentView
[self.contentView addConstraints:constraints]; 
```

再次，Skoota 使上述工作成为可能。谢谢！！！Al 学分归他所有。

# eclipse - 将 svn 与颠覆性同步

> ID：12600217
> 
> 赞同：1
> 
> 时间：2012-09-26T11:00:06.910
> 
> 标签：eclipse, svn, subversive

我从 svn 下载了一个 java 项目，然后添加到 Eclipse，现在我已经安装了 surversive 插件，我想将此项目与来自 SVN 的同步，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:54:05.497

右键单击项目 -> 团队 -> 共享项目
，然后在向导中选择 SVN。

# html - 使用过渡在悬停时显示不同的图像

> ID：12600221
> 
> 赞同：1
> 
> 时间：2012-09-26T11:00:23.727
> 
> 标签：html, css

在图像`hover`上，我想在其上显示一个不同的小图像，`background`以便`opacity`原始图像仍然可见。我想用`transition`来减慢悬停效果。所以这就是我正在尝试但没有工作的内容：

**HTML：**

```
<img src="http://i50.tinypic.com/2poy3kl.jpg" class="test" /> 
```

**CSS：**

```
.test {
   background: red url("http://i50.tinypic.com/10mue4k.png");
   transition: background .25s ease-in-out;
   -moz-transition: background .25s ease-in-out;
   -webkit-transition: background .25s ease-in-out;
}

.test:hover {
    opacity: 0.5;   
} 
```

**JS 小提琴：http:** [//jsfiddle.net/AXQW4/2/](http://jsfiddle.net/AXQW4/2/)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:03:02.177

为此，您需要一个额外的包装器。正是图像的大小，并给出背景。然后，当您将鼠标悬停在图像上时，将其隐藏并显示底层背景。

**[活生生的例子](http://dabblet.com/gist/3787392)**

## HTML

```
<div class="background">
    <img src="http://i50.tinypic.com/2poy3kl.jpg">
</div> 
```

## CSS

```
* {
    padding: 0;
    margin: 0;
    -webkit-box-sizing: border-box;
}
.background {
    background: url("http://i50.tinypic.com/10mue4k.png");
    display: inline-block;
    font-size: 0;
}
.background img {
    -webkit-transition: all .5s;
}
.background img:hover {
    opacity: 0.5;
} 
```

无需知道图像的确切尺寸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:05:02.117

这是你要找的东西吗：http: [//jsfiddle.net/AXQW4/3/](http://jsfiddle.net/AXQW4/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T11:17:44.423

还有一个演示:)

[http://jsfiddle.net/AXQW4/7/](http://jsfiddle.net/AXQW4/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T11:05:45.733

这是你想要的 **[演示](http://jsbin.com/ohuhos/3/edit)** 还是这个**[链接](http://css3.bradshawenterprises.com/cfimg/)**

```
.test {
   background: red url("http://i50.tinypic.com/10mue4k.png");

 -webkit-transition: opacity 1s ease-in-out;
  -moz-transition: opacity 1s ease-in-out;
  -o-transition: opacity 1s ease-in-out;
  transition: opacity 1s ease-in-out;
}

.test:hover {
  opacity:.5;
} 
```

# iphone - 页面响应错误

> ID：12600222
> 
> 赞同：0
> 
> 时间：2012-09-26T11:00:23.930
> 
> 标签：iphone

我从事 iphone 应用程序开发。我创建了一个 sampleTest 按钮，每当我单击它时，都会调用以下函数。但无法返回任何回应。它显示空警报消息。（hostName 和 portNo 是动态输入）

```
sampleTestBtn.addEventListener('click', function()
{   
    var regDetails = '{"user_login": {"email": "sample@sample.com", "password": "password"}}';
    var client = Titanium.Network.createHTTPClient({timeout: 10000});
    client.cache = false;
    client.open("POST", "http://"+hostName+":"+portNo+"/AccountCreate");
    client.setRequestHeader("Content-Type", "application/json");
    client.send(regDetails);    

    alert(JSON.parse(this.responseText));

});

can any one please. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:03:23.477

我得到了解决方案。

我们需要使用onload函数。这将从指定的 url 获取结果：

我的代码如下：

```
var regDetails = '{"user_login": {"email": "sample@sample.com", "password": "password"}}';
var client = Titanium.Network.createHTTPClient({timeout: 10000});
client.cache = false;
client.open("POST", "http://"+hostName+":"+portNo+"/AccountCreate");
client.setRequestHeader("Content-Type", "application/json");
client.send(regDetails); 

client.onload = function(e)
{
   alert(JSON.parse(this.responseText));
} 
```

# c# - 在 Metro Style App 的 FlipView 中使用 RichTextBlock

> ID：12600224
> 
> 赞同：5
> 
> 时间：2012-09-26T11:00:29.167
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在使用标准的 Visual Studio 模板，并且我有一个 ItemsDetailPage，其中包含一个 FlipView，其 DataTemplate 中有一个 RichTextBlock。

我想将 RichTextBlock 块设置为我在文本中生成的自定义段落。我认为没有办法在 XAML 中绑定 RichTextBlocks Block，所以我在后面使用代码。在 RichTextBlock 的 Loaded 事件中，我设置了它的 Block，效果很好。但问题是，Loaded 事件仅在页面显示时被调用一次。当我“翻转”到另一个项目时，FlipView 的选定项目会发生变化，但不会再次调用 Loaded 事件（我认为这没关系）。

我尝试在 FlipViews SelectionChanged 项中设置 RichTextBlock 但这不起作用。

```
var ind = this.flipView.SelectedIndex;

        var flipViewItem = this.flipView.ItemContainerGenerator.ContainerFromIndex(flipView.SelectedIndex);

        if (flipViewItem != null)
        {               
            var scroller = FindFirstElementInVisualTree<ScrollViewer>(flipViewItem);
            var tb = scroller.FindDescendantByName("richTextColumns").FindDescendantByName("richTextBlock") as RichTextBlock;
            SetRichContent(tb, (flipView.SelectedItem as ArticleViewModel).HtmlContent);               
        } 
```

SetRichContent 被调用，设置了 RichTextBlocks 块，但在视觉上它们并没有改变，在几次翻转之后，整个应用程序在没有任何额外信息的情况下崩溃。

所以我的问题是，如何在每次翻转（选定项目更改）时在 RichTextBlock 上调用我自己的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:51:30.950

您可以绑定富文本框。确保您的数据上下文设置正确。我们需要查看更多代码才能做出适当的答案。

```
<RichTextColumns>
     <RichTextColumns.ColumnTemplate>
         <DataTemplate>
             <RichTextBlockOverflow Width="400" Margin="50,0,0,0"/>
         </DataTemplate>
    </RichTextColumns.ColumnTemplate>

     <RichTextBlock Width="400">
         <Paragraph>
             <Run Text="{Binding Content}"/>
         </Paragraph>
     </RichTextBlock>
</RichTextColumns> 
```

# java - Java 中的 Facebook 注册 API

> ID：12600238
> 
> 赞同：0
> 
> 时间：2012-09-26T11:01:16.400
> 
> 标签：java, php, facebook

[facebook 开发人员文档](https://developers.facebook.com/docs/plugins/registration/)中的示例是 PHP 中的。

```
<?php
define('FACEBOOK_APP_ID', 'your_app_id');
define('FACEBOOK_SECRET', 'your_app_secret');

function parse_signed_request($signed_request, $secret) {
list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

// decode the data
$sig = base64_url_decode($encoded_sig);
$data = json_decode(base64_url_decode($payload), true);

if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
    error_log('Unknown algorithm. Expected HMAC-SHA256');
    return null;
}

// check sig
$expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
if ($sig !== $expected_sig) {
    error_log('Bad Signed JSON signature!');
    return null;
}

return $data;
}

function base64_url_decode($input) {
    return base64_decode(strtr($input, '-_', '+/'));
}

if ($_REQUEST) {
echo '<p>signed_request contents:</p>';
$response = parse_signed_request($_REQUEST['signed_request'], 
                                   FACEBOOK_SECRET);
echo '<pre>';
print_r($response);
echo '</pre>';
} else {
echo '$_REQUEST is empty';
}
?> 
```

我开始用java做。但我坚持检查`signature`.:

```
 String data[] = signed_request.split("\\.");

    Base64 decoder = new Base64(true);
    byte[] decodedBytes = decoder.decode( data[1] );
    String result = new String(decodedBytes);

    byte[] dc = decoder.decode(data[0]);
    String signature = new String (dc);
    System.out.println("signature: " + signature);

    JdomParser parser = new JdomParser();
    JsonRootNode rootNode;
    try {
        rootNode = parser.parse(result);

        String algorithm = rootNode.getStringValue("algorithm");
        if ( ! algorithm.equals("HMAC-SHA256")){
            return INPUT;
        }

        String FBSECRET = "my_app_secret";

        //what would be next?

    } catch (InvalidSyntaxException e) {
        e.printStackTrace();

    } 
```

什么函数相当于`hash_hmac`java中的？`result`现在是`JSON`格式。但是`signature`打印时的值会显示奇怪的字符，如`���y�'�Κ�D`]���D�|~�Σ��7�`。

谢谢。

# javascript - 如何使用javascript获取运行应用程序的主机IP和端口号

> ID：12600244
> 
> 赞同：8
> 
> 时间：2012-09-26T11:01:26.003
> 
> 标签：javascript, ip, port

谁能告诉我如何使用 javascript 获取运行 Web 应用程序的主机 IP 和端口号（例如 127.0.0.1:8080）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T11:05:11.397

恐怕无法通过Javascript直接获取IP地址。它没有暴露在`window.location`对象中。

部分原因是后续访问`address:port`在语义上与访问`hostname:port`不同——它们在技术上是不同的 URL。

如果您真正追求的是下载当前 webapp 的 URL 的主机部分，您需要：

```
window.location.hostname
window.location.port 
```

如果正在使用“默认”端口，则后者可能为空白，因此您还需要阅读：

```
window.location.protocol 
```

并检查它是`http:`（即端口80）还是`https:`（端口443）。

您还可以使用：

```
window.location.host 
```

它将包含 the`hostname`和`port`as 冒号分隔的字符串，与上面相同的警告是，`:port`如果内容是通过协议的“默认”端口访问的，则该部分将被省略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T11:05:19.777

```
document.location.host      // localhost:1234
document.location.hostname  // localhost
document.location.port      // 1234 
```

# jdbc - 在 glassfish 上创建 JDBC 领域 - 错误通过？

> ID：12600246
> 
> 赞同：1
> 
> 时间：2012-09-26T11:01:35.520
> 
> 标签：jdbc, glassfish-3

我已经按照本教程[http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)

**问题是我一次又一次地得到登录对话框，就像 pass 是错误的**（而且从来没有页面），但我清楚地看到了 DB 中的值。Pass 是单词“admin”的 MD5。

那么如何调试呢？

以下是设置和打印屏幕：http: [//codepad.org/jHNRpAta](http://codepad.org/jHNRpAta)

这是 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <security-constraint>
        <display-name>Constraint1</display-name>
        <web-resource-collection>
            <web-resource-name>test</web-resource-name>
            <description/>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>USER</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>security</realm-name>
    </login-config>
    <security-role>
        <description/>
        <role-name>USER</role-name>
    </security-role>
    <security-role>
        <description/>
        <role-name>ADMIN</role-name>
    </security-role>
</web-app> 
```

这是 glassfish-web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <security-role-mapping>
    <role-name>USER</role-name>
    <group-name>USER</group-name>
  </security-role-mapping>
  <security-role-mapping>
    <role-name>ADMIN</role-name>
    <group-name>ADMIN</group-name>
  </security-role-mapping>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

# php - python到php代码转换

> ID：12600250
> 
> 赞同：1
> 
> 时间：2012-09-26T11:01:44.163
> 
> 标签：php, python, converter

我必须将两个 Python 函数翻译成 PHP。第一个是：

```
def listspaces(string):
        return [i -1 for i in range(len(string)) if string.startswith(' ', i-1)] 
```

我假设这将检查提供的字符串中的空间并在找到第一次出现空间时返回 True，这是正确的吗？

这是什么`i-1`？是`-1`吗？

在 PHP 中，我们使用`[]`数组。这里我们`[]`使用返回，这个函数会返回 true 还是 false 或空格位置数组？

第二个功能是

```
def trimcopy(copy, spaces, length=350):

    try:
        if len(copy) < length:
            return copy
        else:
            loc = 0
            for space in spaces:
                if space < length:
                    loc = space
                else:
                    return copy[:loc]
    except :
        return None 
```

空间中的空间是什么：这里和这是什么 `return copy[:loc]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:35:40.107

我认为这些类型的转换的一个很好的过程是：

*   弄清楚代码在做什么

*   在 Python 中将其重构为 PHP 样式（这使您能够检查逻辑是否仍然有效，例如使用断言测试）。例如将列表推导转换为 for 循环

*   转换为 PHP

例如，`listspaces(string)`返回 中空格的位置`string`，虽然使用列表推导是 Pythonic，但它不是很“PHP-onic”。

```
def listspaces2(string): #PHP-onic listspaces
    space_positions = []
    for i in range(len(string))]:
        if string[i] == ' ':
            space_positions.append(i)
    return space_positions 
```

第二个例子`trimcopy`相当棘手（因为尝试，除了可能故意捕获一些预期的 - 对作者（！） - 异常 - 两个可能的`string`没有 a`len`并且`spaces`包含的​​值长于`len(copy)`），但很难说它是在 Python 中重构和测试的好主意。

您可以在 PHP 中进行数组切片，例如`copy[:loc]`使用[`array_slice($copy, 0, $loc);`](http://php.net/manual/en/function.array-slice.php).

注意：*通常在 Python 中，我们会明确说明我们要防御的异常（与[Pokemon 异常处理](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)相反）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:10:01.023

为什么不直接测试这些功能，看看它们在做什么？

`listspaces(string)`返回一个数组，其中包含字符串中所有空格的位置：

```
$ ipython
IPython 0.10.2 -- An enhanced Interactive Python.

In [1]: def listspaces(string):
   ...:     return [i -1 for i in range(len(string)) if string.startswith(' ', i-1)]
   ...:

In [2]: listspaces('Hallo du schöne neue Welt!')
Out[2]: [5, 8, 16, 21] 
```

（`i -1`是从零开始计数时空格的位置）

我对 Python 了解不多，也无法粘贴第二个函数，因为有很多“IndentationError”。

我认为这`trimcopy()`将返回一个字符串（来自 input `copy`），其中数组中给定的最后一个空格位置后面的所有内容`spaces`（显然是 from 的返回值`listspaces()`）都会被修剪，除非输入不超过`length`. 换句话说：输入在小于 的最高空间位置被截断`length`。

如上例所示，该部分`' Welt!'`将被切断：

```
s = 'Hallo du schöne neue Welt!'
trimcopy( s, listspaces( s ) )
/* should return: 'Hallo du schöne neue' */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:53:53.120

你可能注意到第一个函数也可以写成

```
def listspaces(str):
    return [i for i, c in enumerate(str) if c==' '] 
```

该版本具有以下对 PHP 的直接转换：

```
function listspaces($str) {
    $spaces = array();

    foreach (str_split($str) as $i => $chr)
        if ($chr == ' ') $spaces[] = $i;

    return $spaces;
} 
```

至于其他功能，这似乎以几乎相同的习语做同样的事情：

```
function trimcopy($copy, $spaces, $length=350) {
    if (strlen($copy) < $length) {
        return $copy;
    } else {
        foreach ($spaces as $space) {
            if ($space < $length) {
                $loc = $space;
            } else {
                return substr($copy, 0, $loc);
            }
        }
    }
} 
```

正如其他人所指出的，这两个函数的意图可能可以通过使用更好地表达`wordwrap`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:14:05.143

第一个函数返回给定字符串中所有空格的索引。

*   `range(len(string))` [结果](http://docs.python.org/release/1.5.1p1/tut/range.html)列表中的数字从 0 到输入字符串的长度
*   `if string.startswith(' ', i-1)]`为每个索引评估条件`i`，当字符串（这里不是关键字）在索引给定的位置以 ' ' 开头时返回 true`i-1`

结果就像feela发布的那样。

对于第二个函数，我不知道空格参数是什么。

希望这将帮助您创建一个 PHP 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:52:51.243

这相当于 Python 中的两个函数

```
list($short) = explode("\n",wordwrap($string,350)); 
```

# forms - 提交后操作表单输入值导致多个实例

> ID：12600253
> 
> 赞同：2
> 
> 时间：2012-09-26T11:01:59.963
> 
> 标签：forms, model, yii, save

我正在用 Yii 构建一个表单，它可以一次更新两个模型。
该表单将每个模型的输入作为 $modelA 和 $modelB ，然后按照此处所述分别处理它们[http://www.yiiframework.com/wiki/19/how-to-use-a-single-form-to-为两个或更多模型收集数据/](http://www.yiiframework.com/wiki/19/how-to-use-a-single-form-to-collect-data-for-two-or-more-models/)

这一切都很好。我对示例的不同之处在于，必须保存 $modelA（文档）并检索其 ID，然后必须保存 $modelB，包括来自 $model A 的 ID，因为它们是相关的。

$modelB 有一个需要保存的文件还有一个额外的转折。

我的操作代码如下：

```
if(isset($_POST['Documents'], $_POST['DocumentVersions']))
    {
        $modelA->attributes=$_POST['Documents'];
        $modelB->attributes=$_POST['DocumentVersions'];

        $valid=$modelA->validate();
        $valid=$modelB->validate() && $valid;

        if($valid)
        {

            $modelA->save(false); // don't validate as we validated above.
            $newdoc = $modelA->primaryKey; // get the ID of the document just created

            $modelB->document_id = $newdoc;         // set the Document_id of the DocumentVersions to be $newdoc
            // todo: set the filename to some long hash

            $modelB->file=CUploadedFile::getInstance($modelB,'file');       
            // finish set filename
            $modelB->save(false);

            if($modelB->save()) {
                $modelB->file->saveAs(Yii::getPathOfAlias('webroot').'/uploads/'.$modelB->file);
                }

            $this->redirect(array('projects/myprojects','id'=>$_POST['project_id']));
        }
    }
    ELSE {

    $this->render('create',array(
        'modelA'=>$modelA,
        'modelB'=>$modelB,
        'parent'=>$id,
        'userid'=>$userid,
        'categories'=>$categoriesList
    ));
    } 
```

您可以看到我将 'file' 和 'document_id' 的新值推送到 $modelB 中。这一切都没有问题，但是......每次我将这些值之一推入 $modelB 时，我似乎都得到了一个新的 $modelA 实例。所以最终结果是，我得到了 3 个新文档和 1 个新版本。新版本都正确链接，但其他两个文件只是直接重复。
我已经测试了删除 $modelB 更新步骤，果然，每删除一个 $modelA 的副本就会被删除（或者至少是生成的数据库条目）。
我不知道如何防止这种情况。

更新....

正如我在下面的评论中所说，进一步的测试表明 $modelA 的实例数量取决于表单提交的次数。即使同时访问其他页面/视图，如果在短时间内重新提交表单，每次我都会在数据库中获得额外的条目。如果这是由于某种形式的持久性，那么我希望获得 PREVIOUS 模型的额外副本，而不是当前模型的倍数。所以我怀疑它的保存方式有什么问题，比如有一些计数器在增加，但我不知道在哪里寻找这个，或者每次如何将它归零。

一些帮助将不胜感激。谢谢

捷豹路虎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:16:55.023

好的，我将 Ajax 验证设置为 true。这是调用创建操作并插入条目。我没有完全明白这一点，或者如果我真的想要没有这种效果，我怎么能使用 ajax 验证，但是......至少两个具有关系的模型插入是有效的。

感谢您的评论。欢呼 JMB

# webgl - THREE.JS 阴影在光的另一侧

> ID：12600256
> 
> 赞同：9
> 
> 时间：2012-09-26T11:02:07.530
> 
> 标签：webgl, three.js

我使用 THREE.js r49 创建了 2 个带有定向光的立方体几何体，在它们上投射阴影，得到的结果如下图所示。

我注意到不应该出现绿色圆圈中的阴影，因为定向光在两个立方体的后面。我想这是材质的问题，我尝试过更改各种材质参数以及更改材质类型本身，但结果仍然相同。我还用 r50 和 r51 测试了相同的代码，得到了相同的结果。

谁能给我一些提示如何摆脱那个阴影。

两个立方体都是使用*CubeGeometry*和*MeshLambertMaterial*创建的，如下代码。

![结果图像](../Images/a77fff1c1281023ca2a9485b875759e7.png)

编码：

```
// ambient
var light = new THREE.AmbientLight( 0xcccccc );
scene.add( light );

// the large cube
var p_geometry = new THREE.CubeGeometry(10, 10, 10);
var p_material  = new THREE.MeshLambertMaterial({ambient: 0x808080, color: 0xcccccc});
var p_mesh  = new THREE.Mesh( p_geometry, p_material );
p_mesh.position.set(0, -5, 0);
p_mesh.castShadow = true;
p_mesh.receiveShadow = true;
scene.add(p_mesh);

// the small cube
var geometry = new THREE.CubeGeometry( 2, 2, 2 );
var material = new THREE.MeshLambertMaterial({ambient: 0x808080, color: Math.random() * 0xffffff});
var mesh = new THREE.Mesh( geometry, material );
mesh.position.set(0, 6, 3);
mesh.castShadow = true;
mesh.receiveShadow = true;

// add small cube as the child of large cube
p_mesh.add(mesh);
p_mesh.quaternion.setFromAxisAngle(new THREE.Vector3(0, 1, 0), 0.25 * Math.PI );

// the light source
var light  = new THREE.DirectionalLight( 0xffffff );
light.castShadow = true;
light.position.set(0, 10, -8);  // set it light source to top-behind the cubes
light.target = p_mesh           // target the light to the large cube
light.shadowCameraNear = 5;
light.shadowCameraFar = 25;
light.shadowCameraRight   =  10;
light.shadowCameraLeft    = -10;
light.shadowCameraTop     =  10;
light.shadowCameraBottom  = -10;
light.shadowCameraVisible = true;
scene.add( light ); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T12:51:03.103

是的，这是一个已知且长期存在的 WebGLRenderer 问题。

问题是在阴影计算中没有考虑面部法线和光线方向的点积。结果，“阴影从后面显露出来”。

作为一种解决方法，您可以为每个面使用不同的材质，只有某些材质接收阴影。

三.js r.71

# android - 更新 CursorAdapter 时 UI 线程变慢

> ID：12600264
> 
> 赞同：0
> 
> 时间：2012-09-26T11:02:49.230
> 
> 标签：android, android-listview, android-ui, android-cursoradapter

我在我的应用程序中使用自定义 ContentProvider 自定义 CursorAdapter。我也有单独线程的服务，用于更新我的 ContentProvider 中的数据。我的问题是，当服务更新 ContentProvider 中的数据并且 CursorAdapter 更新自身时，我的 UI 会变慢。我有圆形进度指示器，在这些操作期间，它的动画是不稳定的。

你有什么想法，我怎样才能让它更顺畅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:45:50.983

我怀疑您应该使用批处理操作更新您的提供程序。

看看这个答案是否适用于你的情况：[Android when to use ContentResolver applyBatch or BulkInsert](https://stackoverflow.com/questions/9363452/android-when-to-use-contentresolver-applybatch-or-bulkinsert/9534346#9534346)

# sql-server-2008 - 在 SQL Server 存储过程中使用游标的替代方法

> ID：12600265
> 
> 赞同：5
> 
> 时间：2012-09-26T11:02:59.950
> 
> 标签：sql-server-2008, database-cursor

这并不是说我在执行包含在存储过程中的游标时遇到问题。但我想找到更有效的方法来实现同样的目标。

就这样吧。

存储过程：（`RawFeed.sql`每 5 分钟运行一次）

```
Set @GetATM = Cursor For
        Select DeviceCode,ReceivedOn
        From RawStatusFeed
        Where CRWR=2 AND Processed=0
        Order By ReceivedOn Desc
    Open @GetATM
    Fetch Next
    From @GetATM Into @ATM,@ReceivedOn
    While @@FETCH_STATUS = 0
        Begin
            Set @RawFeed=@ATM+' '+Convert(VarChar,@ReceivedOn,121)+' '+'002307'+' '+@ATM+' : Card Reader/Writer - FAULTY '
            Exec usp_pushRawDataAndProcess 1,@RawFeed
            Fetch Next
            From @GetATM Into @ATM,@ReceivedOn
        End
Set @GetATM = Cursor For
        Select DeviceCode,ReceivedOn
        From RawStatusFeed
        Where CRWR=0 AND Processed=0
        Order By ReceivedOn Desc
    Open @GetATM
    Fetch Next
    From @GetATM Into @ATM,@ReceivedOn
    While @@FETCH_STATUS = 0
        Begin
            Set @RawFeed=@ATM+' '+Convert(Varchar,@ReceivedOn,121)+' '+'002222'+' '+@ATM+' : Card Reader/Writer - OK '
            Exec usp_pushRawDataAndProcess 1,@RawFeed
            Fetch Next
            From @GetATM Into @ATM,@ReceivedOn
        End 
```

同样，我还有 10 条`SET`语句在条件参数和包含在变量中`WHERE`的字符串上有所不同。`@RawFeed`

对于我得到的每一行，我在该特定行上执行另一个存储过程。

我的问题是

> *有没有更好的方法可以在不使用游标的情况下实现相同的目标？*

变量@`RawFeed`包含以下`string`是`usp_pushRawDataAndProcess`存储过程的输入。现在这将分割整个字符串并`INSERT,UPDATE,DELETE`在某些表上执行一些操作。

我们不能处理超过 1 个字符串`usp_pushRawDataAndProcess`

```
NMAAO226 2012-09-22 16:10:06.123 002073 NMAAO226 : Journal Printer - OK 
WMUAO485 2012-09-22 16:10:06.123 002222 WMUAO485 : Card Reader/Writer - OK 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:38:26.763

SQL Server 与其他关系数据库一样，旨在并且非常擅长处理数据集。

数据库不擅长程序代码，因为查询处理引擎掩盖了所有优化机会。

使用`RawStatusFeed`存储一些专有请求字符串，然后一一处理这些列表，对于数据库代码将是低效的。这可能会使客户端的插入速度非常快，这可能非常重要，但这是有代价的。

如果您在插入时分解请求字符串，或者更好的是，在插入之前通过专门的 SP 调用，那么您可以将所需的更改存储在一些中间关系模型中，而不是字符串列表中。然后，每隔一段时间，您就可以通过一次调用存储过程来一次处理所有更改。诚然，该存储过程包含多个查询语句可能是有意义的。但是，使用正确的索引和统计信息，查询处理引擎将能够为这个新的存储过程制定有效的执行计划。

如何实现这一点的具体细节取决于`RawStatusFeed`表格的具体细节和`usp_pushRawDataAndProcess`. 虽然这看起来像是重写，但我不认为`DeviceCode`专栏有那么复杂。

* * *

所以，简短的回答肯定是肯定的，但是，我需要知道具体是做什么`usp_pushRawDataAndProcess`的。

SP的签名`usp_pushRawDataAndProcess`就像一个瓶颈。

* * *

如果您无法改变`usp_pushRawDataAndProcess`并且不会创建基于集合的替代方案，那么您将陷入瓶颈。

因此，您可以采取另一种策略，而不是消除瓶颈。为什么不创建更多并发瓶颈实例来提供数据。

如果您使用的是 SQL Server 2005 或更高版本，您可以使用一些 CLR 来`usp_pushRawDataAndProcess`并行执行多个实例。

[这是](http://www.codeproject.com/Articles/29356/Asynchronous-T-SQL-Execution-Without-Service-Broke)我以前用来做类似事情的项目的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T14:34:09.933

我一直不喜欢游标，因为它们的性能很慢。但是，我发现我并不完全了解不同类型的游标，并且在某些情况下，游标是一种可行的解决方案。

当您有一个只能通过一次处理一行来解决的业务问题时，游标是合适的。

因此，要提高游标的性能，请更改您正在使用的游标类型。我不知道的是，如果您不指定要声明的游标类型，则默认情况下会获得 Dynamic Optimistic 类型，这是性能最慢的类型，因为它在后台做了很多工作. 但是，通过将游标声明为不同的类型，比如静态游标，它具有非常好的性能。

请参阅这些文章以获得更全面的解释：

[关于光标的真相：第一部分](http://bradsruminations.blogspot.com/2010/05/truth-about-cursors-part-1.html)

[关于光标的真相：第二部分](http://bradsruminations.blogspot.com/2010/05/truth-about-cursors-part-2.html)

[关于光标的真相：第三部分](http://bradsruminations.blogspot.com/2010/05/truth-about-cursors-part-3.html)

我认为对游标的最大缺点是性能，但是，如果不在基于集合的方法中布置任务可能会排在第二位。第三是任务的可读性和布局，因为它们通常没有很多有用的评论。

我发现的光标的最佳替代方法是重新设计逻辑以采用基于集合的方法。

SQL Server 已针对运行基于集合的方法进行了优化。您编写查询以返回数据的结果集，例如表连接，但 SQL Server 执行引擎确定要使用的连接：合并连接、嵌套循环连接或散列连接。SQL Server 根据参与列、数据量、索引结构和参与列中的值集确定可能的最佳连接算法。因此，它通常是程序游标方法的最佳性能方法。

这是一篇关于[游标以及如何避免它们的文章。](http://wiki.lessthandot.com/index.php/Cursors_and_How_to_Avoid_Them) 它还讨论了游标的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:11:48.123

SQL Server 中 CURSOR 的警报

```
1.While loop
2.Recursive CTE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T12:21:08.737

SQL 服务器中 CURSOR 的警报
**1.**使用临时表。创建任何列 ID 作为标识列。
**2.**使用while循环来执行操作。

# php - 在其他数组元素中查找一个数组元素数据

> ID：12600267
> 
> 赞同：0
> 
> 时间：2012-09-26T11:03:01.103
> 
> 标签：php, arrays

我的问题与 PHP 有关

我有 2 个数组：

```
Array1 
(
    [0] => "Pecan, Blackberry, Peach, Apple, Orange, Banana"
    [1] => "Potato, Tomato, Broccoli, Spinach"
    [2] => "Cake, Ice-cream, Candy, Jelly, Chocolate"
}

Array2 
(
    [0] => "Banana"
    [1] => "Apple"
    [2] => "Peach"
} 
```

我只想匹配`Array2[0]`元素`Array1[0]`以检查`Array2[0]`（在这种情况下，它是）的值是否`Banana`存在于元素中`Array1[0]`

虽然，我可以通过某种方式解决这个问题，但我想知道是否有快速、内存消耗更少的内置函数或其他方式，因为我需要在页面加载时执行 10 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:07:00.667

如果我正确理解你的问题，这应该是你所追求的：

```
foreach ($array2 as $key => val) {
    if (stripos($array1[$key], $val) !== false) {
        // match
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:15:33.907

这将找到确切的值（Bananaaaaa 与 Banana 不同）。

**代码**

```
foreach ($array2 as $key => $val) {
    if (in_array($val, explode(', ', $array1[$key]))) {
        var_dump("$val is found in \$array1[$key]");
    } else {
        var_dump("$val is not found in \$array1[$key]");
    }
} 
```

**输出**

```
string(29) "Banana is found in $array1[0]"
string(32) "Apple is not found in $array1[1]"
string(32) "Peach is not found in $array1[2]" 
```

# jquery - 表格被发送到错误的页面？

> ID：12600270
> 
> 赞同：0
> 
> 时间：2012-09-26T11:03:15.283
> 
> 标签：jquery, forms, mobile

我对似乎发送到 JQuery mobile 中的错误页面的表单有一个小问题。

我有一个位于此目录中的表单：

```
etc/res/form.html 
```

当我从我的索引页面调用它时，一切正常且花花公子：

```
$.mobile.changePage('etc/res/form.html', {transition: 'slidedown', role: 'dialog'}); 
```

我还有一个页面：

```
etc/rus/settings.html 
```

从那里我调用上面的表单页面：

```
$.mobile.changePage('../../etc/res/form.html', {transition: 'slidedown', role: 'dialog'}); 
```

表单就像它应该的那样显示在一个对话窗口中。但是，一旦我尝试提交表单，表单就会再次加载......这次没有发送任何信息，也没有“对话框样式”。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:33:13.490

为了能够解决这个问题，我们将需要更多用于加载表单的代码，可能还需要表单本身的外部部分。问题可能出在您加载表单的某个时间点。我愿意猜测您在表单本身中使用了相对 url，并且它可能是这里的罪魁祸首，但是如果没有更多代码，很难说清楚。请在此处使用更多代码扩展问题或使用[jsfiddle.net](http://jsfiddle.net)。谢谢你。

# android - 在新版本的 Android 中使用支持类

> ID：12600273
> 
> 赞同：1
> 
> 时间：2012-09-26T11:03:32.303
> 
> 标签：android, versioning, actionbarsherlock, android-support-library

如果我想让我的应用程序在旧设备上运行，我会使用支持库和 ActionBarSherlock。

当然，它们也适用于较新的设备。但是我应该在新的操作系统版本上使用它们，还是更改代码和资源文件，以便例如 4.0 设备都使用库存类而不是支持类。

例如（伪代码）：

```
 if (running 4.0+){
ActionBar= getActionBar();
}else{
ActionBar= getSupportActionBar();
} 
```

或者只在所有版本上使用这个：

```
ActionBar= getSupportActionBar(); 
```

什么是最佳实践，这会影响稳定性和性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:05:48.930

据我所知，ActionSherlockBar 本身会根据操作系统版本自动切换所有内容。所以你不需要打扰。

我在我的应用程序中使用了它，它在 2.3.7 和 4.0 上的工作原理几乎相同。

这是来自它的网站：

`The library will automatically use the native action bar when appropriate or will automatically wrap a custom implementation around your layouts. This allows you to easily develop an application with an action bar for every version of Android from 2.x and up.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:08:08.413

您已经回答了自己：“*当然，它们也适用于较新的设备*”。如果它有效，那么它就有效。兼容性库只是从 Honeycomb+ 代码中分离出来的 Android 框架的一部分，并以 .jar 的形式提供以在旧设备上使用。如果您的目标是旧设备，同时使用 3.x 之前的 Android 和 HC+ 设备，那么如果您仍然想使用片段和其他东西，那么无论如何您别无选择。而且您还需要 ActionBarSherlock 的兼容性库，因为它也需要它。

# php - Null 和 true 对新的 SimpleXMLElement 有什么作用？

> ID：12600275
> 
> 赞同：0
> 
> 时间：2012-09-26T11:03:42.700
> 
> 标签：php, xml

我见过这样的 PHP 代码，但我没有找到任何解释它的东西：

```
$xml = new SimpleXMLElement($url, null, true); 
```

null 和 true 有什么作用？有没有办法检查请求的 $url 是否失败？请提供所使用的最后两个选项的 PHP 示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:06:58.543

的签名`SimpleXMLElement::_construct`是

> 最终公共 SimpleXMLElement::__construct() (字符串 $data [, int $options = 0 [, bool $data_is_url = false [, string $ns = "" [, bool $is_prefix = false ]]]])

第三个参数的默认值为`false`，因此如果要设置为`true`，还需要提供第二个参数。

例子：

```
//  Create a SimpleXMLElement object from a URL
$sxe = new SimpleXMLElement('http://example.org/document.xml', null, true);
echo $sxe->asXML(); 
```

# php - 获取记事本的内容并在 html 上发布并进行编辑

> ID：12600276
> 
> 赞同：0
> 
> 时间：2012-09-26T11:03:43.630
> 
> 标签：php, javascript, notepad

有没有办法获取 html 页面或记事本的内容，然后显示在我的 html 页面上进行编辑和保存，编辑将是永久性的，还允许我像查看单个页面或在我的桌面中一样查看内容。使用 php 或 javascript？

或者简单地把它嵌入我的页面上的记事本，我可以在任何地方编辑它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:06:00.167

您可以使用php`fopen`函数并读取文件的内容并将其加载`texteditor`并使用`fwrite`函数保存内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:08:28.240

您可以使用以下内容在浏览器中打开和编辑文本文档：

*   [王牌编辑器](http://ace.ajax.org/)；
*   [微小的 MCE](http://www.tinymce.com/)。

这个想法是您通过 php [ [`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)] 打开所需的文件，将其原始数据放入 a`<textarea>`并使用上述插件对其进行增强。

然后，一旦您提交您的编辑，您将新的原始数据存储到文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:40:15.383

你听起来像是想要一个[个人维基](http://www.lifehack.org/articles/technology/the-quick-dirty-guide-to-personal-wikis.html)；wiki 引擎被构建为用户可在线编辑（并在您编辑后永久保存）。个人 wiki 只是一个只有一个用户使用或有权访问的 wiki。

如果您有服务器并且不介意必须在线编辑笔记，则可以使用任何 wiki 软件（如[MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)）。如果您希望您的笔记随身携带，甚至离线，请尝试[TiddlyWiki](http://tiddlywiki.com/)，这是一个用 javascript 构建的单页 wiki，因此它是一个 HTML 文件。

# google-maps-api-3 - Google Maps API 海上航线

> ID：12600279
> 
> 赞同：0
> 
> 时间：2012-09-26T11:03:55.237
> 
> 标签：google-maps-api-3

我进行了足够多的搜索，但没有找到任何方法可以将海上航线从一个港口移到另一个港口，我应该在地图选项上使用什么功能类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:29:24.620

这似乎取消了轮渡线路；这些是你关心的吗？

```
[
  {
    "featureType": "transit.line",
    "elementType": "geometry",
    "stylers": [
      { "visibility": "off" }
    ]
  }
] 
```

它还移除了地面上的其他“公交线路”。这可能是不可取的。

# android - 无法打开堆栈跟踪文件 /data/anr/traces.txt 权限被拒绝

> ID：12600284
> 
> 赞同：1
> 
> 时间：2012-09-26T11:04:10.557
> 
> 标签：android, sqlite

我认为这是一个非常常见的问题，但在查看所有回复后我无法解决。我正在创建一个 android 应用程序，我们可以在其中保存主题（壁纸、铃声、通知声音）。当我尝试在单击按钮时将三件事保存在数据库中时，它会强制关闭并且出现许多错误，包括“无法打开堆栈跟踪”

```
Code:
public class HelloGallery extends Activity 
{
    private ThemeAdapter ta;
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ta=new ThemeAdapter(this);
    final Button save=(Button)findViewById(R.id.save);
    save.setText(R.string.save);

    // some amount of code

    save.setOnClickListener(new OnClickListener(){
       public void onClick(View v)
       {

           themename=tv.toString(); //tv is EditText 
           ta.createTheme(themename, resID, uri,uri2); 
           Toast.makeText(HelloGallery.this,"Theme Saved", Toast.LENGTH_SHORT).show();
       }
       });

    }
}

public class ThemeAdapter {

private SQLiteDatabase db;
private myThemeHelper mth;
String[] columns={myThemeHelper.KEY_ID,myThemeHelper.NAME,myThemeHelper.RING,myThemeHelper.SYS};
public ThemeAdapter(Context _con)
{
    mth=new myThemeHelper(_con);
}
public ThemeAdapter open()
{
    try
    {
    db=mth.getWritableDatabase();
    }
    catch(SQLiteException e)
    {
        db=mth.getReadableDatabase();
    }
    return this;
}
public void close()
{
    db.close();
}

public void createTheme(String name,int wallId,Uri ring,Uri sys)
{
    ContentValues val=new ContentValues();
    val.put(myThemeHelper.NAME,name);
    val.put(myThemeHelper.WALL,wallId);
    val.put(myThemeHelper.RING,ring.toString());
    val.put(myThemeHelper.SYS,sys.toString());
    long id=db.insert(myThemeHelper.DB_TABLE, null, val);
    Cursor cursor=db.query(myThemeHelper.DB_TABLE,columns,myThemeHelper.KEY_ID+ "= " 

                 + id, null,null, null, null);
    cursor.moveToFirst();

}
}
public class myThemeHelper extends SQLiteOpenHelper
{
      //initializing all db names, colum names
        public myThemeHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
  }
@Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DB_CREATE);
  }
@Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(myThemeHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE);
    onCreate(db);
}
 } 
```

堆栈跟踪给出了 NullPointerException，无法打开堆栈跟踪等。我也给予了 WRITE_EXTERNAL_STORAGE 权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T08:29:49.000

我没有看到在 ThemeAdapter 的任何地方调用 open()。所以你的数据库在 createTheme() 中是空的，因此是 NPE

# java - 覆盖所有方法并自动传递第一个参数的装饰器

> ID：12600285
> 
> 赞同：0
> 
> 时间：2012-09-26T11:04:10.917
> 
> 标签：java, decorator

我的课程`BaseClass`包含一些方法，例如

```
public Result mothodA(Token token, String arg1, String arg2);

public Result mothodB(Token token, String arg1);

public OtherResult mothodC(Token token, String arg1, String arg2);

... 
```

是否可以以某种方式装饰此类以自动传递`Token`参数（将存储在装饰器中）？

预期输出：

```
DecoratedBaseClass decorated = new DecoratedBaseClass();
Result result = decorated.methodA("arg1", "arg2");
OtherResult otherResult = decorated.methodC("arg1", "arg2"); 
```

我敢打赌这是不可能的，但也许我不知道装饰器的一些技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:08:06.443

您更改了接口，`BaseClass`因此这与装饰器无关，它更像是一个适配器。

> **装饰器**
> 将额外的职责附加到一个对象上，动态地**保持相同的接口。**

构建一个`BaseClassAdapter`并将调用委托给`BaseClass`.

```
public class BaseClassAdapter {

    private final BaseClass baseClass;
    private final Token token;

    public BaseClassAdapter(BaseClass baseClass){ 
       this.baseClass = baseClass;
       this.token = ...;
    }

    public Result mothodA(String arg1, String arg2) {
       baseClass.mothodA(token, arg1, arg2);
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:08:39.697

```
DecoratedBaseClass decorated = new DecoratedBaseClass(token); 
```

DecoratedBaseClass 中的构造函数

```
//constructor in baseclass
public DecoratedBaseClass(Token token) {
    this.token = token;
} 
```

# android - android服务中的多个任务

> ID：12600289
> 
> 赞同：0
> 
> 时间：2012-09-26T11:04:33.957
> 
> 标签：android, android-activity

是否可以在每次成功绑定时从绑定服务启动活动。我的活动（对于收到的每个绑定请求都保持相同）应该在不同的任务中启动。我想保留所有任务，直到对所有收到的请求调用 unbind。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:58:00.003

在`onBind()`服务的方法中，您可以`startService()`使用设置`Intent`了`ACTIVITY_NEW_TASK`标志的活动。

但是，如果您想非常确定绑定是否成功，那么我想您只能从 within`ServiceConnection`的`onServiceConnected()`方法中做到这一点。我不知道服务可以知道成功绑定的方式。

# jsp - 如何突出显示 DisplayTag 表的特定行？

> ID：12600292
> 
> 赞同：1
> 
> 时间：2012-09-26T11:04:38.043
> 
> 标签：jsp, displaytag

我想突出显示具有`'Total'`此价值的 DisplayTag 行，我正在尝试通过 javascript，但我可以这样做。下面是我正在使用的代码段。请指导。

参考：[如何使用 displaytag 装饰表格中的一行](https://stackoverflow.com/questions/1614283/how-to-decorate-a-row-in-table-using-displaytag)

当第二列中有总计但未突出显示时，我会收到警报。

如何突出显示`Total`在第二列中具有值的特定行？

```
<script type="text/javascript">
        function onLoad(){
            var table = document.getElementById("data");    
            var tbody = table.getElementsByTagName("tbody")[0];
            var rows = tbody.getElementsByTagName("tr");

            for (i=0; i < rows.length; i++) {
                var value = rows[i].getElementsByTagName("td")[1].firstChild.nodeValue;

                if (value == 'Total') {
                    alert('true');
                    rows[i].style.backgroundColor = "red";

                            }
            }
        }

        </script>
    <body onload="onLoad();">
    <%AppUtil oAppUtil=new AppUtil();%>
    <jsp:useBean id="realTimeIssuance" scope="session" class="com.mindcraft.mis.tpd.actionform.afRealTimeIssuance"></jsp:useBean>

    <display:table name="realtimereportcol" export="true" pagesize="30" sort="list" id="data" requestURI="" class="tablelist" decorator="org.displaytag.decorator.TotalTableDecorator">

            <display:column title="SUB_CHANNEL" sortable="true" property="sub_channel"></display:column>
            <display:column title="AGENT_NAMES" sortable="true" property="agent_names"></display:column>
            <display:column title="FTD" sortable="true" property="ftd"  ></display:column>
            <display:column title="MTD" sortable="true" property="mtd"  ></display:column>
            <display:column title="QTD" sortable="true" property="qtd"  ></display:column>

    </display:table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:28:20.050

使用 TableDecorator 并实现 addRowClass() 方法，如下所示...

```
return ((ListObject)getCurrentRowObject()).getTotal() > 400 ? "highlight" : null; 
```

然后，您可以在 CSS 文件中为突出显示定义 css。

请参阅他们的演示以获取更多信息[http://demo.displaytag.org/displaytag-examples-1.1/example-rowclass.jsp](http://demo.displaytag.org/displaytag-examples-1.1/example-rowclass.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-21T17:18:12.503

您必须使用 DisplayTag 装饰器来操作呈现表的数据和 html 结构。

在您的项目包中创建一个简单的 Java 类，它扩展**TableDecorator**并覆盖**addRowClass**方法。

在类对象的集合上，为集合中的每个对象调用装饰器类方法**addRowClass 。**

```
public class TestTableDecorator extends TableDecorator {

    @Override
    public String addRowClass() {
        return ((AnObject) getCurrentRowObject()).getTotal() > your_threshold ? "css-class-1" : "css-class-2";
    }   

} 
```

现在，在您的 .jsp 文件中，使用以下属性在 display:table 中声明您的装饰器：

```
decorator="path.to.decorator.TestTableDecorator" 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:18:56.000

AFAIK，您不能在`<tr>`. 相反，您必须将其设置在每个封闭的`<td>`.

我会定义一个 CSS 类

```
tr.highlighted td {
    background-color: red;
} 
```

并将类添加`highlighted`到适当的`<tr>`.

# java - 动态编译语言与静态编译语言

> ID：12600296
> 
> 赞同：21
> 
> 时间：2012-09-26T11:05:02.317
> 
> 标签：java, c, compiler-construction, compilation, programming-languages

[Brian Goetz](http://www.ibm.com/developerworks/java/library/j-jtp12214/.)的这篇文章的第一行让我在 SO 中发布了这个问题。这又是一行：

> 为动态编译语言（如 Java）编写和解释性能基准远比为静态编译语言（如 C 或 C++）困难得多。

我知道[静态类型与动态类型语言的答案](https://stackoverflow.com/questions/1517582/what-is-the-difference-between-statically-typed-and-dynamically-typed-languages)。但是动态编译语言和静态编译语言有什么区别呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-26T11:18:30.010

动态*编译*和动态*类型*之间没有太大关系。类型是语言语法的一部分，而编译策略是语言实现的一部分。

动态类型意味着您不必在声明变量时声明类型，并且类型之间的转换在大多数情况下会自动发生。

动态编译意味着在程序执行时将语言编译为机器代码，而不是之前。例如，这允许即时优化 - 代码在应用程序运行时进行优化。JIT 优化器的优点是它拥有关于哪些代码分支最常使用以及它们通常如何使用的更可靠的信息，因为它可以在应用优化之前观察正在运行的应用程序。

动态编译是自动基准测试的一个问题，因为同一程序代码部分的多次测量可以比较完全不同的机器代码解释，因为优化器已决定在两次运行之间更改实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T11:17:24.217

C 和 C++ 源代码通常由编译器编译为本机机器代码。

Java 由 Java 编译器编译为字节码。当您运行 Java 程序时，[即时 (JIT) 编译器](http://en.wikipedia.org/wiki/Just-in-time_compilation)可能会将 Java 字节码编译为运行该程序的 CPU 的本机机器代码。

在程序运行时将程序编译为本机代码也称为[动态编译](http://en.wikipedia.org/wiki/Dynamic_compilation)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-26T11:22:06.263

动态与静态编译是指如何以及是否可以在执行期间更改编译器生成的代码以更改性能或程序。

静态编译不允许这样的操作，因为所有地址和跳转都是固定的（除非您自己编写代码以在执行期间更改指令顺序）。

动态编译允许在程序执行期间进行检查，收集的信息可用于使事情运行得更快。维基[百科的文章](http://en.wikipedia.org/wiki/Dynamic_compilation)很容易阅读并且信息量很大。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T11:57:04.120

从基准测试的角度来看，不同之处在于动态编译程序的执行时间在执行过程中会发生巨大变化。通常是先解释 java 代码，然后当解释器发现某个方法被多次调用时，它会调用 JIT 编译器将其转换为原生代码。编译后的代码仍然受到监控，并且当确定频繁执行的代码部分（“热点”）时，它们会被进一步优化。

作为最低限度，动态编译语言的基准测试必须将“升温阶段”（当代码优化时）与执行的其余部分分开处理。

# javascript - 如何在 jQuery 中查找服务器上可用的文件？

> ID：12600300
> 
> 赞同：1
> 
> 时间：2012-09-26T11:05:13.927
> 
> 标签：javascript, jquery, html

`document.write`我正在尝试使用 java 脚本代码方法将 java 脚本文件从另一台服务器加载到我的网页。像，

```
document.write("<script type='text/javascript' src='http://www.mydomain.com/js/myscript.js'></script>"); 
```

但是相应的路径没有 myscript.js 所以它`404 File not found error`会在浏览器错误控制台中抛出。

我怎样才能预测和避免这种错误？

如果可以预测错误，我将显示替代消息而不是调用错过的 js 文件函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:10:05.640

使用 JavaScript 加载脚本：

```
function onReadyState() {
    console.error("Unable to load file: "+ this.src + ". Please check the file name and parh.");
    return false;
}  

function addJS(path){
    var e = document.createElement("script");
    e.onerror  = onReadyState;
    e.src = path;
    e.type = "text/javascript";
    document.getElementsByTagName('head')[0].appendChild(e);
}

addJS('http://www.mydomain.com/js/myscript.js'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:09:09.950

尝试[**`jQuery.getScript( url [, success(script, textStatus, jqXHR)] )`**](http://api.jquery.com/jQuery.getScript/)- 您可以在其中设置成功和错误处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:12:43.767

如果请求的文件在您的域中（从问题看来），只需`HEAD`对该资源进行先前的 ajax 调用（使用方法）并检查响应状态是`200`（正常）还是`304`（未修改）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:14:17.933

试试这个方法

```
 var js="ajax/test.js";

    $.getScript(js) .done(function(script, textStatus) {
          var script = document.createElement( 'script' );
          script.type = 'text/javascript';
          script.src = js;
          document.body.appendChild(script);;
    }) 
```

更多细节：[jQuery.getScript](http://api.jquery.com/jQuery.getScript/)

请注意：***`Use javascript (not jQuery) to manipulate HTML DOM`***

# mysql - MySQL：如何使用 2 个连接和 1 个子查询来提高选择查询的速度

> ID：12600301
> 
> 赞同：2
> 
> 时间：2012-09-26T11:05:17.557
> 
> 标签：mysql, performance

在表'ttraces'中，我有许多不同任务的记录（其值保存在'taskid'列中，并且是表'ttasks'中列'id'的外键）。每个任务每 8-10 秒插入一条记录到“ttraces”，因此缓存数据以提高性能并不是一个好主意。我需要的是从'ttraces'中只为每个任务选择最新的记录，这意味着'time'列的最大值的记录。目前，我的表中有超过 500000 条记录。这两个表的非常简化的结构如下所示：

```
-----------------------
|       ttasks        |
-----------------------
| id | name | blocked |
-----------------------

---------------------
|      ttraces       |
---------------------
| id | taskid | time |
--------------------- 
```

我的查询如下所示：

```
SELECT t.name,tr.time
FROM 
    ttraces tr 
    JOIN 
    ttasks t ON tr.itask = t.id 
    JOIN (
        SELECT taskid, MAX(time) AS max_time
        FROM ttraces 
        GROUP BY itask
    ) x ON tr.taskid = x.taskid AND tr.time = x.max_time
WHERE t.blocked 
```

WHERE 和 JOIN 子句中使用的所有列都有索引。至于现在查询运行〜1,5秒。提高它的速度是非常关键的。感谢所有建议。顺便说一句：数据库在托管的共享服务器上运行，目前我无法将其移动到其他任何地方。

[编辑] EXPLAIN SELECT... 结果是：

```
--------------------------------------------------------------------------------------------------------------
id   select_type   table        type     possible_keys   key       key_len   ref          rows     Extra
--------------------------------------------------------------------------------------------------------------
1   PRIMARY        <derived2>   ALL      NULL            NULL      NULL      NULL         74   
1   PRIMARY        t            eq_ref   PRIMARY         PRIMARY   4         x.taskid     1        Using where
1   PRIMARY        tr           ref      taskid,time     time      9         x.max_time   1        Using where
2   DERIVED        ttraces      index    NULL            itask     5         NULL         570853   
-------------------------------------------------------------------------------------------------------------- 
```

引擎是 InnoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:32:22.623

我可能有一点时间，但是这个查询在逻辑上是否不一样，并且（几乎可以肯定）更快？

```
SELECT t.id, t.name,max(tr.time)
FROM 
ttraces tr 
JOIN 
ttasks t ON tr.itask = t.id 
where BLOCKED
group by t.id, t.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:31:35.660

Here's my idea... You need one composite index on `ttraces` having `taskid` and `time` columns (in that order). Than, use this query:

```
SELECT t.name,
       trm.mtime
FROM   ttasks AS t
       JOIN (SELECT taskid,
                    Max(time) AS mtime
             FROM   ttraces
             GROUP  BY taskid) AS trm
         ON t.id = trm.taskid
WHERE  t.blocked 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:24:08.733

如果每个任务有很多跟踪，那么您可以保留一个仅包含最新跟踪的表。每当你插入到 ttraces 中时，你也插入到 ttraces_newest 中：

```
insert into ttraces_newest (id, taskid, time) values
(3, 1, '2012-01-01 08:02:01')
on duplicate key update
`time` = current_timestamp 
```

ttraces_newest 的主键是 (id, taskid)。查询 ttraces_newest 会更便宜。便宜多少取决于每个任务有多少跟踪。现在查询是：

```
SELECT t.name,tr.time
FROM 
    ttraces_newest tr 
    JOIN 
    ttasks t ON tr.itask = t.id 
WHERE t.blocked 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:33:05.553

此代码是否返回正确的结果？如果是这样，它的速度时间如何？

```
SELECT t.name, max_time 
FROM ttasks t JOIN ( 
    SELECT taskid, MAX(time) AS max_time 
    FROM ttraces  
    GROUP BY taskid
) x ON t.id = x.taskid 
```

# asp.net-mvc - 如何在 Windows azure 中设置 asp.net mvc 路由以进行部署？

> ID：12600320
> 
> 赞同：1
> 
> 时间：2012-09-26T11:06:18.670
> 
> 标签：asp.net-mvc, c#-4.0, azure-connect

我正在使用 Asp.net mvc 4。我正在尝试将我的项目部署在 windows azure 上作为 webrole。我在 global.asax（即 RouteConfig.cs）文件中创建了自定义路由，例如，

```
routes.MapRoute(
                name: "DefaultConn",
                url: "{id1}/{id2}",
                defaults: new { controller = "mycontrollername", action = "actionname", id = UrlParameter.Optional }
            ); 
```

它实际上在本地环境中工作。但是当我将我的网站发布到 Windows azure 环境中时，它会显示**404 Page Not Found Page**。

我已经使用以下网址访问了该页面，

```
http://xxx.cloudapp.net/mmdg/kli 
```

它给出了 404 page not found 异常。所以请指导我。

# eclipse - 从 Eclipse 启动 Tomcat 7 时，Web 应用程序版本被覆盖

> ID：12600322
> 
> 赞同：1
> 
> 时间：2012-09-26T11:06:26.077
> 
> 标签：eclipse, tomcat, web-applications, version, overriding

我正在开发一个使用 web-fragment.xml 文件的 Web 应用程序。

AFAIK，WEB-INF/lib 中 JAR 的 web-framgent.xml 文件应该合并并解析为有效的 web.xml。因此，我激活了 Tomcat 7 服务器的 logEffectiveWebXml 选项以查看生成的文件。

特此开始有效的 web.xml 文件：

案例 1：当应用程序部署在独立的 Tomcat 7 上时：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0"
         metadata-complete="true"> 
```

案例 2：当应用程序部署在 Eclipse IDE 中的 Tomcat 7 上时：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="2.5"
         metadata-complete="true"> 
```

您注意到版本属性已替换为“2.5”。

此外，在独立的Tomcat上部署应用程序时有效的web.xml是正确的（web-fragments.xml文件的内容被合并），而从Eclipse启动Tomcat时这些内容是不存在的。我认为这是由于版本覆盖。

**你知道为什么在 Eclipse 中启动时版本属性会被覆盖吗？**

我检查了 Eclipse 配置、项目配置（它们都使用动态 Web 模块 3.0）和工作区目录“.metadata.plugins\org.eclipse.wst.server.core”，但我没能找到错误...

注意：我还注意到，即使我没有部署我的应用程序（= 全新的 Tomcat 安装），该版本也会被覆盖。

谢谢你的帮助。

# wordpress - 在 Wordpress 中，子页面能否获得与父页面相同的页面模板？

> ID：12600323
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:06:29.060
> 
> 标签：wordpress

如何将父页面模板动态分配给其子页面？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:29:47.810

当您为父页面选择模板时，同样也为子页面选择模板...

# c++ - 强制 GLUtesselator 只生成 GL_TRIANGLES？

> ID：12600325
> 
> 赞同：4
> 
> 时间：2012-09-26T11:06:35.797
> 
> 标签：c++, opengl, glu, tesselation

如果我只想使用一种顶点数组格式，那么渲染我生成的数据非常困难。

我试图提供 GLU_TESS_EDGE_FLAG_DATA 回调，但它使我的程序崩溃。（最后也尝试不使用“_DATA”，效果相同）。

我怎样才能让它只生成 GL_TRIANGLES？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:57:54.170

[`gluTessCallback()`](http://www.opengl.org/sdk/docs/man2/xhtml/gluTessCallback.xml), `GLU_TESS_EDGE_FLAG`:

> ...如果提供了非 NULL 边缘标志回调 ... 扇形和条形将转换为独立三角形。

这是我一直在使用的：

```
struct TessContext
{
    ~TessContext()
    {
        for( size_t i = 0; i < combined.size(); ++i )
        {
            delete[] combined[i];
        }
    }

    typedef std::pair< double, double > Point;
    std::vector< Point > pts;
    std::vector< GLdouble* > combined;
};

#ifndef CALLBACK
#define CALLBACK __stdcall
#endif

void CALLBACK tess_begin( GLenum ) {}
void CALLBACK tess_edgeFlag( GLboolean ) {}
void CALLBACK tess_end() {}

void CALLBACK tess_vertex
    ( 
    void*           data, 
    TessContext*    ctx 
    )
{
    GLdouble* coord = (GLdouble*)data;
    ctx->pts.push_back( TessContext::Point( coord[0], coord[1] ) );
}

void CALLBACK tess_combine
    ( 
    GLdouble        coords[3], 
    void*           vertex_data[4], 
    GLfloat         weight[4], 
    void**          outData, 
    TessContext*    ctx 
    )
{
    GLdouble* newVert = new GLdouble[3];
    ctx->combined.push_back( newVert );

    newVert[0] = coords[0];
    newVert[1] = coords[1];
    newVert[2] = coords[2];
    *outData = newVert;
}

template< typename Vec >
std::vector< Vec > Triangulate
    ( 
    const vector< Vec >& aSimplePolygon
    )
{
    std::vector< GLdouble > coords;
    for( size_t i = 0; i < aSimplePolygon.size(); ++i )
    {
        coords.push_back( aSimplePolygon[i].x() );
        coords.push_back( aSimplePolygon[i].y() );
        coords.push_back( 0 );
    }

    GLUtesselator* tess = gluNewTess();
    gluTessCallback( tess, GLU_TESS_BEGIN,          (void (CALLBACK *)())   tess_begin      );
    gluTessCallback( tess, GLU_TESS_EDGE_FLAG,      (void (CALLBACK *)())   tess_edgeFlag   );
    gluTessCallback( tess, GLU_TESS_VERTEX_DATA,    (void (CALLBACK *)())   tess_vertex     );
    gluTessCallback( tess, GLU_TESS_END,            (void (CALLBACK *)())   tess_end        );
    gluTessCallback( tess, GLU_TESS_COMBINE_DATA,   (void (CALLBACK *)())   tess_combine    );
    gluTessNormal( tess, 0.0, 0.0, 1.0 );

    TessContext ctx;

    gluTessBeginPolygon( tess, &ctx );
    gluTessBeginContour( tess );

    for( size_t i = 0; i < aSimplePolygon.size(); ++i )
    {
        gluTessVertex( tess, &coords[i*3], &coords[i*3] );
    }

    gluTessEndContour( tess );
    gluTessEndPolygon( tess );

    gluDeleteTess(tess);

    std::vector< Vec > ret( ctx.pts.size() );
    for( size_t i = 0; i < ret.size(); ++i )
    {
        ret[i].x() = static_cast< Vec::Scalar >( ctx.pts[i].first );
        ret[i].y() = static_cast< Vec::Scalar >( ctx.pts[i].second );
    }

    return ret;
} 
```

我倾向于[`Eigen::Vector2f`](http://eigen.tuxfamily.org/index.php?title=Main_Page)使用`Vec`.

# c# - TCP 套接字侦听器 - 请求从 POST 更改为 GET？

> ID：12600327
> 
> 赞同：0
> 
> 时间：2012-09-26T11:06:41.350
> 
> 标签：c#, .net, sockets, tcp, html-post

我创建了 TCP 代理，它在端口 80（端口 80 未被任何其他服务使用）上侦听传入连接。当我使用“Localhost”或“127.0.0.1”作为侦听器套接字的 IpAddress 时，代理能够接收 POST 请求。

```
Socket listner = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IPEndPoint localEndpoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 80);
listner.Bind(localEndpoint);
listner.Listen(); 
```

但是，当我将“localhost”替换为我机器的 IP（191.151.43.22）时。代理将客户端请求作为“GET 请求”接收

```
Socket listner = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IPEndPoint localEndpoint = new IPEndPoint(IPAddress.Parse("191.151.43.22"), 80);
listner.Bind(localEndpoint);
listner.Listen(); 
```

使用 localhost / 127.0.0.1 侦听连接时的客户端请求

```
 POST /?toke=abc455/../Control.html?s=783&i=0&t=134 HTTP/1.1

    Host: localhost:58888
    Connection: keep-alive
    Content-Length: 0
    Origin: http://localhost:58888
    User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) C
    hrome/21.0.1180.89 Safari/537.1
    Content-Type: text/plain;charset=UTF-8
    Accept: */*
    Referer: http://localhost:58888/?toke=abc455/../Stream.html?s=0&d=%22
    localhost%22&p=0&t=1348652703126
    Accept-Encoding: gzip,deflate,sdch
    Accept-Language: en-US,en;q=0.8
    Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
    Cookie: style=null 
```

使用我的机器的 IP (191.151.43.22) 侦听连接时的客户端请求

```
GET /?token=abc344/../Stream.html?s=0&d=%22localhost%22&p=0&t=13486531
37269 HTTP/1.1
Host: 192.168.53.50
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) C
hrome/21.0.1180.89 Safari/537.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

为什么 POST 不使用系统的 IP 地址，但在使用 'localhost' 代替 IP 时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:29:46.587

很可能，您的 HTTP 请求被代理服务器更改（我猜是您的路由器）。

话虽如此，代理服务器（假设是罪魁祸首）可能不会与它正在做的事情不正确。我在您的请求中没有看到任何 POST 数据**，因此所做的更改应该对接收端没有功能影响。

[** 有 GET 数据（位于 URL 中），但没有 POST 数据（位于标头之后）。]

# c++ - pop_back() 返回值？

> ID：12600330
> 
> 赞同：62
> 
> 时间：2012-09-26T11:06:47.140
> 
> 标签：c++, vector

为什么没有`pop_back()`返回值？我对此进行了谷歌搜索，发现它可以提高效率。这是在标准中这样做的唯一原因吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-26T11:16:15.250

效率与它几乎没有关系（或者根本没有关系）。

这个设计是[汤姆嘉吉在 90 年代发表的一篇重要论文](http://ptgmedia.pearsoncmg.com/images/020163371x/supplements/Exception_Handling_Article.html)的成果，当时引起了很多人的注意。IIRC，在其中嘉吉表明不可能设计一个异常安全的堆栈弹出功能。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-09-26T11:12:23.197

我认为与复制最后一个对象的实例可能会引发异常这一事实有关。这样做时，您将丢失对象，因为 pop_back() 确实将其从容器中删除。用几行代码更好：

```
std::vector<AnyClass> holds = {...} ;
try {
  const AnyClass result = holds.pop_back(); // The copy Ctor throw here!
} catch (...)
{ 
 // Last value lost here. 
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-26T11:13:32.487

这是因为[命令-查询分离原则](http://en.wikipedia.org/wiki/Command-query_separation)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-26T11:14:37.373

效率是一回事。`pop_back()`不返回元素的另一个原因是异常安全。
如果`pop()`函数返回值，并且复制构造函数抛出异常，则您可能无法保证容器与调用之前的状态相同`pop()`。

您可以在 Herb Sutters 书籍中找到有关异常的更多信息。我认为这个话题已经涵盖[在这里](http://www.gotw.ca/publications/xc++.htm)。但我不确定。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-26T11:17:43.610

原因与其说是效率不如说是异常安全。容器类可用于存储任何类型的对象。如果函数在从容器中删除对象后返回对象，则不可能以异常安全的方式实现 pop_back()，因为返回对象的值涉及复制构造。

这是 GNU C++ 标准库中 vector::pop_back() 的实际实现：

```
 void
  pop_back()
  {
    --this->_M_impl._M_finish;
    this->_M_impl.destroy(this->_M_impl._M_finish);
  } 
```

如果它最后返回最后一个元素，这就是它的样子：

```
 value_type
  pop_back()
  {
    value_type save = back();
    --this->_M_impl._M_finish;
    this->_M_impl.destroy(this->_M_impl._M_finish);
    return save;
  } 
```

这涉及两个副本构造，在`save = back()`语句处和在返回对象副本时。无法保证在元素从容器中销毁后返回表达式不会引发异常。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-26T11:11:05.810

那么，有多少理由呢？

当您只想将其从容器中删除时，这可以避免潜在的昂贵的对象复制。C++ 的理念是不为不需要的东西付费。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-25T13:04:31.863

> 在计算机编程中，正交性意味着操作只改变一件事而不影响其他事情。

`pop_back()`只做一件事，它不复制，因此它是正交的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-26T11:11:41.617

为什么它会返回值？您始终可以在弹出它之前随时访问该值 - 无需`pop_back`提供此功能。

# android - android将参数传递给onclick事件

> ID：12600331
> 
> 赞同：2
> 
> 时间：2012-09-26T11:06:48.903
> 
> 标签：android, android-intent

在以下代码中如何将 pwd 传递给 onclick 事件

```
String pwd ="/root";   

final ListView lv = (ListView) findViewById(R.id.list);
lv.setOnItemClickListener(new OnItemClickListener() {   
  public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng)
        Toast.makeText(MainActivity.this,pwd , Toast.LENGTH_SHORT).show();
    } 
```

编辑1：

```
final String pwd = null;

string pwd ="root"; //Error remove final keyword
final ListView lv = (ListView) findViewById(R.id.list);
lv.setOnItemClickListener(new OnItemClickListener() {   
   public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng)
        Toast.makeText(MainActivity.this,pwd , Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:07:57.743

根据 MA​​C 建议将 pwd 声明为 Globle 解决了问题@MAC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:12:36.613

在 onCreate 方法上方声明您的 String pwd。

```
class demo extends Activity
{String pwd;
onCreate()
{pwd="/root";
final ListView lv = (ListView) findViewById(R.id.list);

lv.setOnItemClickListener(new OnItemClickListener() {   
public void onClick(View arg0) {
Toast.makeText(MainActivity.this,pwd , Toast.LENGTH_SHORT).show();

    }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:16:58.510

这就是我曾经做过的事情

```
public class NatigationOnClick implements OnClickListener {

    String title;
    String html;
    private QuickActionWeb webQuickAction;
    private Context context;
    private View row;

    public NatigationOnClick(String title, String html, Context context,
            View row) {
        this.title = title;
        this.html = html;
        this.context = context;
        this.row = row;
    }

    public void onClick(View v) {

        webQuickAction = new QuickActionWeb(context, QuickActionWeb.VERTICAL,
                title + "<br/>" + html);
        webQuickAction.show(row);

    }

} 
```

现在...

```
view.setOnClickListener(new NatigationOnClick(title, html, context, row)); 
```

希望有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:42:54.017

也许这可以帮助你：

```
final ListView lv = (ListView) findViewById(R.id.list);
lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Toast.makeText(MainActivity.this, getPwd(), Toast.LENGTH_SHORT).show();
        }
});

String pwd = "root";

private String getPwd()
{
    return pwd;
} 
```

# iphone - 如何在 iOS 应用程序中实现 Bayeux 协议

> ID：12600340
> 
> 赞同：0
> 
> 时间：2012-09-26T11:07:15.700
> 
> 标签：iphone, objective-c, ios, ipad

我正在做一个交互式 iPad 应用程序，在这种情况下，我的应用程序将同时在多个 iPad 设备上打开，他们可以加入集体照片共享，其中一个用户选择他选择的照片，该选择将加入同一组的其他用户也可以在其设备中看到现场直播。

我刚刚知道这种行为可以通过使用 Javascript 的 Bayeux 协议实现，Dojo 用于 Web 应用程序。那么，是否有任何框架可以在 iOS 平台中实现此功能，或者是否有人知道如何在 xcode 中集成 Bayeux 协议。我对此一无所知，因此将不胜感激任何帮助和建议，以便我至少可以开始使用此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:23:28.277

Forget about Bayeux Protocol and implementation details.

For stuff like that, such as connecting people that use the same app on similar device, and share their actions and so on, I think that considering [GameKit](http://developer.apple.com/library/ios/#DOCUMENTATION/GameKit/Reference/GameKit_Collection/_index.html#//apple_ref/doc/uid/TP40008303) (even if you application is not a game, as you still connect people that will use the application on different devices at the same time, and actions of one user will be refered on other user's devices) might be a good option.

See for example the `GKPeerPickerViewController` to connect users to each others, the [GKTank](http://developer.apple.com/library/ios/#samplecode/GKTank/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008918) example and so on.

# c# - asp.net 中的 Cookie 过期问题

> ID：12600341
> 
> 赞同：0
> 
> 时间：2012-09-26T11:07:16.483
> 
> 标签：c#, asp.net, cookies

我正在创建一个 cookie 并在其中获取一个文本框值。我需要使其过期，然后必须通过检查它是否已过期来打印一条消息。我正在执行以下操作

```
 HttpCookie usercookie = new HttpCookie("userinfo");
        Response.Cookies["gettingusername"].Value = textbox_username.Text;
        Response.Cookies["gettingusername"].Expires = DateTime.Now;
        Response.Cookies.Add(usercookie);
        if (Request.Cookies["gettingusername"]!=null)
        {
            Response.Write("Cookie is Not Expired");
        }
        else
        {
           Response.Write("Cookie Expired");
        } 
```

但它总是说：-

```
Cookie is Not Expired 
```

我是新手。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:23:08.873

你可以这样做：

```
myCookie.Expires = DateTime.Now.AddDays(-1);

if(myCookie.Expires > DateTime.Now)
  Response.Write("Cookie not Expired");
else
  Response.Write("Cookie Expired"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-26T14:51:04.903

浏览器负责删除过期的 cookie。您只需要设置将来到期的时间。例如 ：

```
if (Request.Cookies["gettingusername"] != null)
{
    Response.Write("Cookie is not expired")
    Response.Write("Value exists : " + Request.Cookies["gettingusername"]);
}
else
{
   Response.Write("Cookie is expired, creating a new cookie.");
   Response.Cookies.Add(new HttpCookie("gettingusername")
   {
       Value = textbox_username.Text,
       Expires = DateTime.Now.AddDays(1)
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:13:18.887

尝试以下...

```
if (Request.Cookies["gettingusername"] != null)
{
    HttpCookie myCookie = new HttpCookie("userinfo");
    myCookie.Expires = DateTime.Now.AddDays(-1);//add -1 days
    Response.Cookies.Add(myCookie);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:14:24.267

无法确切了解您要达到的目标。您应该设置它们并检查它们是否以不同的方法过期。

例如，您可以在按下“设置 cookie”按钮时设置 cookie，并在“过期 Cookie”操作中使它们过期

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-06T01:30:02.167

这就是您现在可以删除 cookie 的方法..！

```
Response.Cookies["MyCookie"].Expires = DateTime.Now.AddDays(-1); 
```

# vba - VBA 编辑器将文件夹转换为文件夹并在我使用变量时引发数据类型不匹配

> ID：12600342
> 
> 赞同：1
> 
> 时间：2012-09-26T11:07:22.360
> 
> 标签：vba

我有以下代码

```
Dim fileSystemObject As New fileSystemObject
Dim sourceFolder As folder
Set sourceFolder = fileSystemObject.GetFolder(sourceFolderPath)
processFolder (sourceFolder) 
```

并且 processFolder 过程被声明为

```
Sub processFolder(folderToProcess As folder)
'Code here
End Sub 
```

我觉得奇怪的是，每当我输入带有大写“F”的文件夹时，VBA 编辑器都会将其转换为带有小“f”的文件夹。当我调用该过程时，我收到一条编译错误消息，指出类型不匹配。有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:15:25.467

这里的括号；

```
processFolder (sourceFolder) 
```

转换`sourceFolder`为不能传递给期望`Folder`so 的字符串；

```
processFolder sourceFolder 
```

# java - linux中的字体大小比较windows

> ID：12600344
> 
> 赞同：3
> 
> 时间：2012-09-26T11:07:28.200
> 
> 标签：java, swing

我在 Java swing 中创建了一个简单的应用程序。我在 Windows 操作系统中开发了这个应用程序。但是当我将此应用程序移至 Linux 时，与 Windows 相比，字体大小变大了。如何在整个平台上制作标准字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:51:51.620

通过调用`pack()`封闭的`Window`. 因为`pack()`“`Window`使它的大小适合其子组件的首选大小和布局”，所以您不必担心不同的大小。有很多很好的[例子](http://docs.oracle.com/javase/tutorial/uiswing/index.html)；这是一个[反例](https://stackoverflow.com/a/12532237/230513)。

![图片](../Images/eabae85b149332919e0ac1d68adaea77.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-28T20:43:49.100

您可以在 Linux 系统上安装 Microsoft 字体。这是一篇关于此的博客文章：[如何在 Linux 上用 Java 安装 Windows 字体](http://www.perfectabstractions.com/blog/how-to-install-windows-fonts-in-java-on-linux)。

# html - 使用选择的不同图像时 css 和 html 中的翻转图像问题

> ID：12600345
> 
> 赞同：0
> 
> 时间：2012-09-26T11:07:30.847
> 
> 标签：html, css

我在我的一个网页上创建了一个图像列表，当将鼠标悬停在它上面时，它会失去一点不透明度并在图像顶部显示文本。但是，我只能通过 CSS 来实现这一点，这意味着我只能将一个图像链接到该类，这意味着我必须拥有相同的图像，请参见下图以获得更好的说明：

![在此处输入图像描述](../Images/37be51461e04b732c7c2f0795864654e.png)

我尝试的是从 CSS 中取出图像链接并将其放入每个列表项中，每个列表项都有不同的图像（这是我想要的）。但随后图像在边框内显示不佳，悬停效果不起作用，请参见下图以获得更好的说明：

![在此处输入图像描述](../Images/f90248760a95716847c36bde67f85815.png)

下面是我的列表的 HTML 和 CSS（在 CSS 中而不是在 HTML 中带有图像链接）：

HTML

```
<ul class="imagelist">
<li class="rollover_img" ><a title="" href="">
<span>Bla Bla Bla </span>
</a></li>

<li class="rollover_img"><a title="" href="">
<span>Bla Bla Bla </span>
</a></li>

<li class="rollover_img"><a title="" href="">
<span>Bla Bla Bla </span>
</a></li>
</ul> 
```

CSS

```
.rollover_img {
width: 297px;
height: 150px;
background-position: top;
background-image: url(../images/homegallery/image2.png);
-moz-border-radius:10px;
-webkit-border-radius:10px;
border: 3px solid #7E9ED2;
font:13px normal Arial, Helvetica, sans-serif;
line-height:18px;
float:left;
margin:0 10px 18px 0;
}

.rollover_img a {
color: #fff;
width: 297px;
height: 150px;
display: block;
text-decoration: none;
}

.rollover_img a:hover {
background:#000;
opacity:.60;
filter:alpha(opacity=60);
}

.rollover_img a span {
display: none;
width: 280px;
padding:5px;
}

.rollover_img a:hover span {
display: block;
}

ul.imagelist {
width: 939px;
margin: 0 auto;
padding-top: 49px;
} 
```

任何有任何想法的人将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:21:55.667

在这种情况下，给`border-radius`css 中的图像。我已在您的 css 中包含以下类并从`.rollover_img a span`

```
.rollover_img a span img{
 border-radius:9px;
} 
```

在这里查看演示

[http://jsfiddle.net/2zDKP/](http://jsfiddle.net/2zDKP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:13:51.897

您可以`id`为 的每个实例设置一个`.rollover_img`，这样您就可以在每个列表项中拥有不同的背景图像。

示例 HTML：

```
<li class="rollover_img" id="img01"><a title="" href="">
<span>Bla Bla Bla </span>
</a></li>

<li class="rollover_img" id="img02"><a title="" href="">
<span>Bla Bla Bla </span>
</a></li>

<li class="rollover_img" id="img03"><a title="" href="">
<span>Bla Bla Bla </span>
</a></li> 
```

示例 CSS：

```
#img01 { background-image: url('path/to/img01.jpg') }
#img02 { background-image: url('path/to/img02.jpg') }
#img03 { background-image: url('path/to/img03.jpg') } 
```

一些技巧：

*   尝试为每个图像设置相同的宽度
*   用于`overflow:hidden`隐藏那些对您的容器来说太高的图像

# java - 是否有任何自动化工具可以为 java 批处理应用程序执行功能测试？

> ID：12600347
> 
> 赞同：1
> 
> 时间：2012-09-26T11:07:46.173
> 
> 标签：java, testing, batch-file, dbfit

我有将数据写入数据库的 Java 批处理应用程序。我想要一个自动化测试，它将预期输出与数据库中的数据进行比较。我使用 DBfit 完成了这个过程并且工作得很好，除了我必须在 excel 电子表格中输入我的预期数据，然后复制并粘贴到 dbfit 并格式化它，所以这是一个我想避免的手动步骤。

是否有任何自动化工具可以为 java 批处理应用程序执行功能测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:01:44.143

我使用 DOS 批处理脚本编写了一个数据库比较测试工具。此脚本将数据库模式与其先前的基线进行比较以发现差异。可能能够被修改以比较实际的表数据内容。这是我的代码，您可能需要稍作修改才能使其正常工作。显然，要回答您的问题，一个简单的 JUnit 或 NUnit 脚本可以启动它。

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
ECHO.&ECHO.
ECHO This script will get schema snapshots of all your local MSSQL databases
ECHO and saves them to a directory where this script is ran.
PAUSE
CLS
:: first get timestamp of this script
SETLOCAL
FOR /F "skip=1 tokens=2-4 delims=(-)" %%a IN ('"echo.|date"') DO (
    FOR /F "tokens=1-3 delims=/.- " %%A IN ("%DATE:* =%") DO (
        SET %%a=%%A&SET %%b=%%B&SET %%c=%%C))
SET /A "yy=10000%yy% %%10000,mm=100%mm% %% 100,dd=100%dd% %% 100"
FOR /F "tokens=1-4 delims=:. " %%A IN ("%time: =0%") DO @SET UNIQUE=%yy%%mm%%dd%-%%A%%B

SET TITLE=atabase schema snapshot
TITLE=D%TITLE%
:: script also supports DBNAME as argument
IF NOT "%1"=="" (
  SET DBNAME=%1
  %JAVA_HOME%\bin\java.exe -classpath jtds-1.2.4.jar;schemacrawler-8.8.jar;schemacrawler-sqlserver-8.8.jar schemacrawler.tools.sqlserver.Main^
 -user=sa -password=password -database=!DBNAME! -schemas=!DBNAME!.dbo.* -port=1433 -host=localhost -table_types=TABLE -command=schema -sortcolumns=true^
 -procedures= -infolevel=lint -loglevel=OFF >!DBNAME!_schema_!UNIQUE!.txt
  GOTO :ENDSINGLE
)

:: enable this section to run minimized
::IF NOT DEFINED PIL (
::    SET PIL=1
 ::   START /MIN "" %~0 %1
 ::   EXIT /B
::)

:BEGIN
ECHO D%TITLE% is running...
ECHO.
MKDIR %UNIQUE%
ECHO Directory %CD%\%UNIQUE% has now
ECHO been created to hold the results of this snapshot.
ECHO.
sqlcmd.exe -E -Slocalhost -h-1 -Q"SET NOCOUNT ON;SELECT name FROM sysdatabases WHERE name NOT IN ('master','tempdb','model','msdb');" >dblist.tmp
FOR /F %%A IN (dblist.tmp) DO (
  SET str=%%A
  SET str=!str: =!
  ECHO !str!>>.\!UNIQUE!\dblist_trimmed.tmp
)
ECHO.&ECHO.&ECHO.
FOR /F %%I IN (.\!UNIQUE!\dblist_trimmed.tmp) DO (
  SET DBNAME=%%I
  IF NOT "!DBNAME!"=="" (
    ECHO. Snapshot: !DBNAME!
    %JAVA_HOME%\bin\java.exe -classpath jtds-1.2.4.jar;schemacrawler-8.8.jar;schemacrawler-sqlserver-8.8.jar schemacrawler.tools.sqlserver.Main^
 -user=sa -password=password -database=!DBNAME! -schemas=!DBNAME!.dbo.* -port=1433 -host=localhost -table_types=TABLE -command=schema -sortcolumns=true^
 -procedures= -infolevel=lint -loglevel=OFF >.\!UNIQUE!\!DBNAME!_schema.txt
  )
)
DEL /Q dblist.tmp
GOTO :ENDMULTI

:ENDSINGLE
ECHO Finished processing %1 .  Closing in 20 seconds...
GOTO :END
:ENDMULTI
ECHO Finished processing list .  Closing in 20 seconds...
:END
ECHO.
FOR /l %%a in (20,-1,1) do (TITLE D%TITLE% -- closing in %%as&ping -n 2 -w 1 127.0.0.1>NUL) 
```

# iphone - UIlabel 在滚动 UiTableView 时缩小

> ID：12600348
> 
> 赞同：5
> 
> 时间：2012-09-26T11:07:54.363
> 
> 标签：iphone, uitableview, ios5, uilabel

我在里面有两个`UILabel`，`UICell`其中包含动态文本，所以我需要根据内容调整其框架的大小，为此我使用`[string sizeWithFont]`方法来计算标签视图框架内部`TableView` `heightForRowAtIndexPath`的高度，以根据标签高度设置单元格的高度。现在问题是当我滚动表格时，如果我删除`[label sizeToFit]`方法它不会缩小，单元格内的标签会开始缩小，但我的标签会重叠，看起来很乱。我哪里错了请指导我..

这是我的`cellRowAtIndexPath`方法代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"cell");
BOOL ente = FALSE;

static NSString *CellIdentifier = @"CustomCell";

CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil];

    for (id currentObject in topLevelObjects){
        if ([currentObject isKindOfClass:[UITableViewCell class]]){
            cell =  (CustomCell *) currentObject;
            ente = TRUE;
            break;
        }
    }
}
/*
[cell.title sizeToFit];
[cell.dataTime sizeToFit];

CGSize size1 = [[mainEventArray objectAtIndex:[indexPath row]] sizeWithFont:[UIFont systemFontOfSize:13.0f] constrainedToSize:CGSizeMake(275, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

cell.title.frame = CGRectMake(50, 6, size1.width, size1.height);

CGSize size2 = [[mainEventTimeArray objectAtIndex:[indexPath row]] sizeWithFont:[UIFont systemFontOfSize:11.0f] constrainedToSize:CGSizeMake(275, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

cell.dataTime.frame = CGRectMake(50, 24, size2.width, size2.height);

*/
cell.title.text = [mainEventArray objectAtIndex:[indexPath row]];
cell.dataTime.text = [mainEventTimeArray objectAtIndex:[indexPath row]];

//if (ente) {
  //  NSLog(@"helllloo");

    [cell.title sizeToFit];
    [cell.dataTime sizeToFit];
//}

return cell;
} 
```

和`heightForRowAtIndexPath`方法

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"CustomCell";

CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

{

    if (cell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil];

        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (CustomCell *) currentObject;
                break;
            }
        }
    }
}

    CGSize size1 = [[mainEventArray objectAtIndex:[indexPath row]] sizeWithFont:[UIFont systemFontOfSize:13.0f] constrainedToSize:CGSizeMake(230, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

    cell.title.frame = CGRectMake(0, 0, size1.width, size1.height);

CGSize size2 = [[mainEventTimeArray objectAtIndex:[indexPath row]] sizeWithFont:[UIFont systemFontOfSize:11.0f] constrainedToSize:CGSizeMake(230, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

cell.dataTime.frame = CGRectMake(0, 0, size2.width, size2.height);

//NSLog(@"%f", size1.height + size2.height + 20);

    return size1.height + size2.height + 20;

//NSString *str = [heights_ objectAtIndex:[indexPath row]];

  // return [str floatValue] ;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:22:00.953

而不是进行自己的定制。尝试使用动态 uitableviewcell 高度。你会发现真的比你所做的更有用且相对容易。

您可以在此处查看：[http](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/) ://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/ 并附有详细说明。享受编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T07:37:11.723

在您的情况下，您需要根据标签设置单元格的高度。

检查链接：

**[http://dcraziee.wordpress.com/2013/05/22/calculate-size-of-uillabel-base-on-text-in/](http://dcraziee.wordpress.com/2013/05/22/calculate-size-of-uillabel-base-on-text-in/)**

有一个函数名为

```
-(CGFloat)getHeightForLabel:(NSString *)_str font:(UIFont *)fontOfObject 
```

使用该函数计算高度为：

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat _height  = [self getHeightForLabel:self.label.text font:[self.label font]];
    return _height;
} 
```

并在单元格中创建和添加标签时执行相同的操作。我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T08:32:21.230

```
NSString *reuseIdentifier = @"EventTitleCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
cell=nil;
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier] ;

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T11:18:26.343

试试这个代码。

```
 label.numberOfLines = 0; // allows label to have as many lines as needed
    label.text = @"some long text";
    [label sizeToFit];
    NSLog(@"Label's frame is: %@", NSStringFromCGRect(label.frame)); 
```

供参考：[点击这里](https://stackoverflow.com/questions/7174007/how-to-calculate-uilabel-height-%20dynamically)

# java - 从字符串数组中查找和提取字符串

> ID：12600354
> 
> 赞同：1
> 
> 时间：2012-09-26T11:08:13.660
> 
> 标签：java, xml, string, find

我有一个保存在 String 中的 xml 文档。字符串是这样的：

```
<?xml version=\"1.0\" encoding=\"http://schemas.xmlsoap.org/soap/envelope/\" standalone=\"no\"?><soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"><soapenv:Header xmlns:wsa=\"http://www.w3.org/2005/08/addressing\"><axis2:ServiceGroupId xmlns:axis2=\"http://ws.apache.org/namespaces/axis2\" wsa:IsReferenceParameter=\"true\">urn:uuid:2BC5F552AF3179755C1348038695049</axis2:ServiceGroupId><wsa:To>http://localhost:8081/axis2/services/TCAQSRBase</wsa:To><wsa:MessageID>urn:uuid:599362E68F35A38AFA1348038695733</wsa:MessageID><wsa:Action>http://www.transcat-plm.com/TCAQSRBase/TCAQSR_BAS_ServerGetOsVariable</wsa:Action></soapenv:Header><soapenv:Body><ns1:TCAQSR_BAS_ServerGetOsVariableInput xmlns:ns1=\"http://www.transcat-plm.com/TCAQSRBase/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"ns1:TCAQSR_BAS_ServerGetOsVariableInputType\"><ns1:TCAQSR_BAS_BaseServerGetInputKey>USERNAME</ns1:TCAQSR_BAS_BaseServerGetInputKey></ns1:TCAQSR_BAS_ServerGetOsVariableInput></soapenv:Body></soapenv:Envelope> 
```

我不知道它将如何在字符串中表示。

但我想提取和之间的术语`<axis2:ServiceGroupId xmlns:axis2="http://ws.apache.org/namespaces/axis2">`，`</axis2:ServiceGroupId>` 它是一个 urn:uuid: 并想将结果保存在一个字符串中。我知道 xpath，但就我而言，我不能使用 xpath。

并且非常感谢任何帮助。

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:18:44.893

```
int startPos = xmlString.indexOf("<axis2...>") + "<axis2...>".length();
int endPos = xmlString.indexOf("</value2...>");
String term = xmlString.substring(startPos,endPos); 
```

我希望我能正确回答你的问题。您也可以在一行中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:13:42.567

使用正则表达式。使用奇怪的正则表达式解析整个 XML 字符串 **`<axis2:ServiceGroupId xmlns:axis2="http://ws.apache.org/namespaces/axis2">(.+?) </axis2:ServiceGroupId>`**可以解决您的特定问题。

我为您的特定问题编写的一个有用的片段：

```
 String yourInput = "<wsa:ReferenceParameters><axis2:ServiceGroupId xmlns:axis2=\"http://ws.apache.org/namespaces/axis2\">urn:uuid:2BC5F552AF3179755C1348038695049</axis2:ServiceGroupId></wsa:ReferenceParameters>";
    Pattern pattern = Pattern
            .compile("<axis2:ServiceGroupId xmlns:axis2=\"http://ws.apache.org/namespaces/axis2\">(.+?)</axis2:ServiceGroupId>");
    Matcher matcher = pattern
            .matcher(yourInput);
    matcher.find();
    System.out.println(matcher.group(1)); 
```

**matcher.group(1)**返回所需的字符串，您可以将其分配给另一个变量并使用该变量等。

# android - 从非活动类动态注册和注销广播

> ID：12600356
> 
> 赞同：0
> 
> 时间：2012-09-26T11:08:18.810
> 
> 标签：android

我有一个具有以下定义的类：

```
public final class BluetoothDevicePreference extends Preference implements
    CachedBluetoothDevice.Callback, OnClickListener 
```

我需要注册和注销这个类的广播。

由于这是一个偏好类而不是活动/PreferenceActivity，我应该在哪里注册和注销我的广播？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:15:21.863

`context.registerReceiver(receiver);`和`context.unregisterReceiver(receiver)`

# mysql - charset utf8 在 perl 代码中不起作用

> ID：12600358
> 
> 赞同：0
> 
> 时间：2012-09-26T11:08:28.153
> 
> 标签：mysql, perl

我是 Perl 的新手，正在开发一个遗留应用程序。我的数据库中缺少一些特殊字符，例如 ä,å,ö。以前，Mysql 数据库是 latin1 排序规则，现在改为 UTF-8 默认值。当我查看数据库值时，这些字符没有改变（仍然为 å、ö、ä 获得一些其他字符）。我查看了 perl 代码，发现这种编码和字符集似乎不起作用。任何帮助表示赞赏。谢谢。

```
 use Encode qw/is_utf8 decode/;
     my($q) = CGI->new();
    $q->charset('utf-8');
    $q->header(-charset => 'utf-8', -expires => '-1d') 
```

连接到数据库

```
my($dbh) = DBI->connect($config{'dbDriver'},$config{'dbUser'},$config{'dbPass'}) or die "Kunde inte ansluta till $config{'dataSource'}: " . $DBI::errstr;

$dbh->{'mysql_enable_utf8'} = 1;
$dbh->do('SET NAMES utf8'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:10:33.237

尝试使用`SET NAMES 'UTF-8';`on 连接到数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:33:13.120

您应该`mysql_enable_utf8`在连接时启用。

```
my($dbh) = DBI->connect($config{'dbDriver'},$config{'dbUser'},$config{'dbPass'}, {mysql_enable_utf8 => 1} ) 
    or die "Kunde inte ansluta till $config{'dataSource'}: " . $DBI::errstr; 
```

你应该正确设置你的 IO，我更喜欢使用[`utf8::all`](http://search.cpan.org/perldoc?utf8%3A%3Aall)它：

```
use utf8::all; 
```

# iphone - 如何访问添加到 UIScrollView 的 UIView 上的控件

> ID：12600359
> 
> 赞同：1
> 
> 时间：2012-09-26T11:08:27.840
> 
> 标签：iphone, objective-c, ios, xcode

我在情节提要中有一个 UIViewController，其中包含一个滚动视图。

我想在上面放两个 UIImageViews 和一些 UILabels。

我的想法是：创建一个 .xib 文件。在上面放一个 UIView，然后在这个 UIView 上设置我的 UIImageview 和标签。

最后将作为 .xib 文件的 UIView 添加到我的 UIScrollView 中，如下所示：

```
 NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"OfferView" owner:self options:nil];
UIView *newPageView = [views lastObject];
self.newPageView.contentMode = UIViewContentModeScaleAspectFill;
newPageView.frame = frame;
[self.scrollView addSubview:newPageView];
[self.pageViews replaceObjectAtIndex:page withObject:newPageView]; 
```

现在我想在我的 UIViewController 中以编程方式为 UIView 上的控件设置文本和图像。我试试这个，但没有奏效：

```
OfferUIView *offer2 = [[OfferUIView alloc] init];;
offer2.labelCompany.text = @"some text"; 
```

我也在`OfferUIView`ViewController 的接口中定义然后同步，但它也没有帮助：

```
@property (nonatomic, assign) OfferUIView *offerView; 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:24:41.470

`OfferView`当您将笔尖加载到您的`offerView`财产时，为您设置指针

```
NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"OfferView" owner:self options:nil];
self.offerView = [views lastObject];
self.offerView.contentMode = UIViewContentModeScaleAspectFill;
self.offerView.frame = frame;
[self.scrollView addSubview:self.offerView];
[self.pageViews replaceObjectAtIndex:page withObject:self.offerView]; 
```

当你想改变它时：

```
self.offerView.labelCompany.text = @"some text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:25:22.960

OfferUiView 必须“ **initWithFrame** ”，因为它是任何“UIView”类视图的必需方法或为此视图设置一个框架。因为你有子类 UIView 包括 initWithFrame 作为它的构造函数此外，因为你已经以编程方式分配了 OfferUIView，你必须添加此视图到您的当前视图，即 [self.view addSubView:offer2]；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:14:49.420

您可以为 设置唯一标签，`tag`并且可以像这样在 parentView 中搜索标签：

```
UILabel *theLabel = (UILabel *)[parentView viewWithTag: 10321]; 
```

# android - 如何在android中制作警报对话框？

> ID：12600360
> 
> 赞同：1
> 
> 时间：2012-09-26T11:08:33.097
> 
> 标签：android

我曾经读过一个教程，但从那以后我的手机被 XBOX 刷掉了，所以我把它弄丢了。我希望在 MainActivity 上有一个按钮来打开一个 AlertDialog 框，说明应用程序信息，例如版本号、关于当前版本、这个是哪个 android 版本等。

```
 package com.apw.games.rpg.medieval;

import android.app.*;
import android.os.*;
import android.view.*;
import android.widget.*;
import android.content.*;
import android.util.*;
import android.graphics.*;

public class MainActivity extends Activity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override public void onNothingSelected(AdapterView<?> parent) {

     }
    @Override 
    public boolean onCreateOptionsMenu(Menu menu) { 
    MenuInflater inflater = getMenuInflater(); 
    inflater.inflate(R.menu.menu, menu); return true; }

    @Override 
    public boolean onOptionsItemSelected(MenuItem item) { 
    // Handle item selection 
    switch (item.getItemId()) { 

        case R.id.quit: 
        Intent intent =  new Intent(this, Exit.class); 
        startActivity(intent); 
        return true; 
        case R.id.new_game: 
            Intent i = new Intent(this, New_Game.class); 
            startActivity(i); 
            return true; 
        case R.id.visit_site: 
            Intent inte = new Intent(this, Site.class); 
            startActivity(inte); 
            return true; 
        default: return super.onOptionsItemSelected(item);

        }} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:13:35.530

首先声明 AlertDialog 类型的对象：

`AlertDialog alertDialog = new AlertDialog.Builder(Main.this).create();`

Main.this 是我活动的上下文。您可以像这样设置对话框的标题：

`alertDialog.setTitle("Title");`

还有一条信息：

`alertDialog.setMessage("Your text");`

接下来，设置您的按钮功能：

```
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int which) {

   //here you can add functions

} }); 
```

您可以使用以下行更改 AlertDialog 的图标： `alertDialog.setIcon(R.drawable.icon);`

最后一件事，不要忘记显示你的对话框：

`alertDialog.show();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:12:18.077

```
 AlertDialog.Builder builder = new AlertDialog.Builder(Activity.this)
        .setTitle("alert dialog")
        .setMessage("message")

        .setPositiveButton("ok", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {                            
               Activity.this.finish();  

            }
        })

        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                Activity.this.finish();
            }
        })
        .show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T08:10:23.067

```
 // here is a snippet code work for me   
    new AlertDialog.Builder(this)
    .setTitle("Mobile Raksha")
    .setMessage(
            "Your Message")
    .setCancelable(true)
    .setPositiveButton("OK", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface arg0, int arg1) {
            arg0.dismiss();
            finish();
        }
    }).show(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T01:18:49.410

上面的解释很好。基于类类型的android对话框有四种类型，分别为AlertDialog、Progress Dialog、DatePickerDialog、TimePickerDialog。我们可以根据需要进行选择。如果它的普通对话框显示消息，只需使用 AlertDialog。如果您想逐步阅读创建对话框的过程，请通过这个简单的示例了解[如何在 android 中创建警报对话框](http://techbreaths.com/2013/01/dialogs-android/)。

# c++ - 无法编译此代码

> ID：12600363
> 
> 赞同：-20
> 
> 时间：2012-09-26T11:08:50.697
> 
> 标签：c++, libjpeg

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我在编译此代码[http://pastebin.com/a7AMbYPv](http://pastebin.com/a7AMbYPv)时遇到了麻烦。

这是我得到的错误：

```
C:\Dev-Cpp\include\main.cpp In function 'int write_jpeg_file(char*)': 
109 25 C:\Dev-Cpp\include\main.cpp [Error] invalid conversion from 'int' to 'J_COLOR_SPACE' [-fpermissive] 
C:\Dev-Cpp\include\main.cpp In function 'int main()': 
130 21 C:\Dev-Cpp\include\main.cpp [Warning] deprecated conversion from string constant to 'char*' [-Wwrite-strings] 
130 48 C:\Dev-Cpp\include\main.cpp [Warning] deprecated conversion from string constant to 'char*' [-Wwrite-strings] 
C:\Users\NIVER\Desktop\Makefile.win [Error] [../../../Dev-Cpp/include/main.o] Error 1 (if this is the only error: please check your library includes) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:19:36.230

在您的代码中，您引用了未实现它们的函数（jpeg_std_error，...），因此您必须将它们的实现提供给链接器。这通常是通过在链接器的输入列表中添加`.lib`或`.a`或类似的东西来完成的。请查看您从哪里获取示例并获取这些函数的实现（源 C/C++）文件或获取其编译库（以形式`.lib`或形式`.a`）并将它们添加到链接器，并带有为您的链接器指定的标志，每件事都会按预期工作

# windows - 使用 WinSCard 库：“__in”未在此范围内声明

> ID：12600365
> 
> 赞同：0
> 
> 时间：2012-09-26T11:08:57.960
> 
> 标签：windows, compiler-errors, mingw, winscard

我正在尝试使用 WinSCard 库从 Myfare 卡中读取数据。为此，我链接到 WinSCard.lib 并包含标题“WinSCard.h”。

从我的 .pro 文件中：

```
win32: PRE_TARGETDEPS += $$PWD/Lib/WinSCard.lib
win32: LIBS += -L$$PWD/Lib/ -lWinSCard 
```

从我的 .cpp 文件中：

```
#include "WinSCard.h" 
```

但是现在我得到了几十个错误（准确地说是 337 个）未定义的符号，如 '_ *in'、'* _ out'、'__reserved' 等等。我使用 QtCreator/mingw++ 作为环境。我的猜测是，这些是特定于库或特定于 Windows 的 typedef。

这些错误是通过包含头文件发生的，我还没有使用任何 API 函数。

谁能给我一个提示，我需要包含/链接什么来满足编译器？

谢谢

# java - 使用java读取（解码）chm文件内容

> ID：12600368
> 
> 赞同：1
> 
> 时间：2012-09-26T11:09:08.010
> 
> 标签：java, android, java-native-interface, chm

我想阅读并显示 chm 文件的内容。chm文件的编码是什么？我不想使用像 jchm 这样的库。我想要最简单的方法来解码 chm 文件并在那里显示内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:14:51.477

根据[维基百科](http://en.wikipedia.org/wiki/Microsoft_Compiled_HTML_Help)，文件格式已经过逆向工程，文档可以免费获得。

[http://www.nongnu.org/chmspec/latest/index.html](http://www.nongnu.org/chmspec/latest/index.html)

[http://metacpan.org/pod/Archive::Chm](http://metacpan.org/pod/Archive%3a%3aChm)

我这个链接——@Xav 提供的——在格式上特别具体：

[http://www.russotto.net/chm/chmformat.html](http://www.russotto.net/chm/chmformat.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:16:15.783

这里有更多关于 CHM 格式的文档：[http](http://www.russotto.net/chm/chmformat.html) ://www.russotto.net/chm/chmformat.html如果您不愿意使用库来编写自己的解码代码，它可能会帮助您。

或者，有很多可免费下载的解码器可以将 CHM 转换回 HTML - 您是否考虑过离线解码并简单地将解码后的文件包含在您的应用程序中？

# ajax - Jquery BlockUI - 在 ajax 加载解除阻塞之前等待图像

> ID：12600375
> 
> 赞同：1
> 
> 时间：2012-09-26T11:09:25.343
> 
> 标签：ajax, jquery, blockui, jquery-blockui

我正在使用 BlockUI jquery 插件在 div 中显示加载消息，直到使用 JQuery 的加载方法加载内容。

问题是，我提取的内容包含图像。加载回调在图像完全加载之前触发，并且 div 过早地解除阻塞。

有没有办法在 BlockUI 解除对 div 的阻止之前等待所有图像加载？

或者，如果我可以覆盖解除阻塞，我可以使用[waitForImages 插件执行以下操作](https://github.com/alexanderdickson/waitForImages)

```
$('#mydiv').block({ message: 'Loading' }); 

$('#mydiv').load('ajax.php', function() {
   $('#mydiv').waitForImages(function() {
      $('#mydiv').unblock();
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:42:16.573

我认为您应该将 DIV 包装`#mydiv`在另一个 DIV 中。

```
$.getJSON("http://api.flickr.com/services/feeds/photoset.gne?set=72157623591220769&nsid=21696934@N05&format=json&jsoncallback=?", function(data) {
    $.each(data.items, function(i, item) {
        $("<option>").attr("value", item.media.m).html('image ' + i).appendTo("#imagesLink");
    });

});

$("#imagesLink").on('change', function() {

    $('#mydivContainer').block({
        message: 'Loading'
    });

    setTimeout(LoadImage, 10, this.value);

});

function LoadImage(imagePath)
{
    $('#mydiv').html($('<img>').attr('src', imagePath));

    $('#mydiv img').waitForImages(function() {
        $('#mydivContainer').unblock();
        // alert("Finished!");
    });

}
```

```
#mydivContainer
{
    width: 400px;
    height: 400px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://malsup.github.io/jquery.blockUI.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.waitforimages/2.4.0/jquery.waitforimages.js"></script>

choose an image <select id="imagesLink"></select>
<div id="mydivContainer">
    <div id="mydiv"></div>
</div>
```

或者一个可以测试它的小提琴[jsFiddle 。](http://jsfiddle.net/vandalo/rXr6w/)

# android - CustomAdapter 中的空指针异常

> ID：12600376
> 
> 赞同：0
> 
> 时间：2012-09-26T11:09:28.840
> 
> 标签：android, android-layout, android-adapter

嗨，我在运行我的应用程序时遇到空指针异常。这是我的代码：

ProductAdapter.java

```
public class ProductAdapter extends BaseAdapter {

    Context context;
    List<Product> products = new ArrayList<Product>();
    private boolean showCheckbox;

    public ProductAdapter(Context context, List<Product> products,
            boolean showCheckbox) {
        super();
        this.context = context;
        this.products = products;
        this.showCheckbox = showCheckbox;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return products.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return products.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            inflater.inflate(R.layout.new_item, null);
        }

        Product myProduct = products.get(position);

        TextView title = (TextView) convertView.findViewById(R.id.txt_title);
        title.setText(myProduct.getTitle());

        TextView cost = (TextView) convertView.findViewById(R.id.txt_cost);
        cost.setText(myProduct.getCost());

        ImageView image = (ImageView) convertView.findViewById(R.id.imageView1);
        CheckBox selectBox = (CheckBox) convertView.findViewById(R.id.CheckBoxSelect1);

        if(!showCheckbox){
            selectBox.setVisibility(View.GONE);
        }
        else{
            if(myProduct.selected == true)
                selectBox.setChecked(true);
            else
                selectBox.setChecked(false);
        }

        return convertView;
    }
} 
```

这是我的布局 xml 文件
new_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/txt_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/txt_cost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <CheckBox
        android:id="@+id/CheckBoxSelect1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

在这里我得到一个空指针异常，请帮帮我。这是我的日志猫。

```
09-26 16:37:23.894: D/AndroidRuntime(2611): Shutting down VM
09-26 16:37:23.894: W/dalvikvm(2611): threadid=1: thread exiting with uncaught exception (group=0x409951f8)
09-26 16:37:23.904: E/AndroidRuntime(2611): FATAL EXCEPTION: main
09-26 16:37:23.904: E/AndroidRuntime(2611): java.lang.NullPointerException
09-26 16:37:23.904: E/AndroidRuntime(2611):     at com.shoppingcart.ProductAdapter.getView(ProductAdapter.java:59)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.ListView.makeAndAddView(ListView.java:1772)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.ListView.fillDown(ListView.java:672)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.ListView.fillFromTop(ListView.java:732)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.ListView.layoutChildren(ListView.java:1625)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.AbsListView.onLayout(AbsListView.java:1863)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.View.layout(View.java:11158)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.View.layout(View.java:11158)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.View.layout(View.java:11158)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.View.layout(View.java:11158)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.View.layout(View.java:11158)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1462)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2382)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.os.Looper.loop(Looper.java:137)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at android.app.ActivityThread.main(ActivityThread.java:4340)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at java.lang.reflect.Method.invoke(Method.java:511)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-26 16:37:23.904: E/AndroidRuntime(2611):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你。这是我的Logcat。

```
09-26 16:58:35.205: D/AndroidRuntime(2749): Shutting down VM
09-26 16:58:35.205: W/dalvikvm(2749): threadid=1: thread exiting with uncaught exception (group=0x409951f8)
09-26 16:58:35.225: E/AndroidRuntime(2749): FATAL EXCEPTION: main
09-26 16:58:35.225: E/AndroidRuntime(2749): java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.ImageView
09-26 16:58:35.225: E/AndroidRuntime(2749):     at com.shoppingcart.ProductAdapter.getView(ProductAdapter.java:66)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.ListView.makeAndAddView(ListView.java:1772)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.ListView.fillDown(ListView.java:672)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.ListView.fillFromTop(ListView.java:732)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.ListView.layoutChildren(ListView.java:1625)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.AbsListView.onLayout(AbsListView.java:1863)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.View.layout(View.java:11158)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.View.layout(View.java:11158)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.View.layout(View.java:11158)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.View.layout(View.java:11158)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.View.layout(View.java:11158)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewGroup.layout(ViewGroup.java:4197)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1462)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2382)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.os.Looper.loop(Looper.java:137)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at android.app.ActivityThread.main(ActivityThread.java:4340)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at java.lang.reflect.Method.invoke(Method.java:511)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-26 16:58:35.225: E/AndroidRuntime(2749):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:25:45.243

第一次将膨胀的 xml 文件分配给`convertView`它`null`。

```
if(convertView == null){
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.new_item, null);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:28:54.643

```
 public View getView(int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            inflater.inflate(R.layout.new_item, null);
        } 
```

> 将上面的代码更改为如下

```
 public View getView(int position, View convertView, ViewGroup parent) {
            LinearLayout rowLayout = null;
            if (rowLayout == null) {
                    rowLayout = (LinearLayout) LayoutInflater.from(context)
                            .inflate(R.layout.new_item, parent, false);
                } 
 Product myProduct = products.get(position);

        TextView title = (TextView) rowLayout.findViewById(R.id.txt_title);
        title.setText(myProduct.getTitle());

        TextView cost = (TextView) rowLayout.findViewById(R.id.txt_cost);
        cost.setText(myProduct.getCost());

        ImageView image = (ImageView) rowLayout.findViewById(R.id.imageView1);
        CheckBox selectBox = (CheckBox) rowLayout.findViewById(R.id.CheckBoxSelect1);

        if(!showCheckbox){
            selectBox.setVisibility(View.GONE);
        }
        else{
            if(myProduct.selected == true)
                selectBox.setChecked(true);
            else
                selectBox.setChecked(false);
        }

        return rowLayout;
    }
} 
```

# android - 如何调试原生 Android 应用程序？

> ID：12600378
> 
> 赞同：7
> 
> 时间：2012-09-26T11:09:34.503
> 
> 标签：android, android-ndk

我已经安装了[Sequoyah Android Native Support](http://www.tag-games.com/2012/06/05/native-android-debugging-in-eclipse/)，现在我可以执行调试模式了。我在调用本机方法的同一行中有一个断点，所以当我执行调试 Java 模式时，eclipse 在这一行停止，我执行“ndk-gdb”，我午餐 C/C++ 调试模式，我看到控制台做点什么。但是，如何放置 C 断点？因为我的 C 代码是一个 .so 库，所以我不能在这个文件中放置断点。我有一个 JNI floder，其中有 .c 和 .h 文件，但是当我放置断点时不要停止。Eclipse 日志识别断点，但打印错误。

break-insert com_example_pruebaffmpeg_MainActivity.c:4323 错误，msg="未加载符号表。使用 \"file\" 命令。"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:55:23.060

您是否尝试过卸载 Sequoyah 并仅使用 ADT？从版本 20 开始，[Eclipse ADT 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)可以比旧的 Sequoyah 做事方式更轻松、更可靠地调试 NDK 项目。

# android - Android List Activity-每一行布局不同

> ID：12600379
> 
> 赞同：0
> 
> 时间：2012-09-26T11:09:37.530
> 
> 标签：android, android-layout, listactivity, listadapter

我想在 Android 中创建列表活动，其中每一行将包含不同的布局。例如，第一行包含一个编辑文本和一个文本视图。第二行包含一个按钮。第三行只包含一个图像。因此，每个行元素都是不同的布局。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:28:11.140

您可以创建自定义适配器，并使用一组布局 ID。在适配器 getView 方法中：

```
 public View getView(final int position, View convertView, ViewGroup parent) 
```

您可以为不同的位置值膨胀不同的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:45:58.197

实现一个自定义`ListView`. 在该`getView()`方法中，根据正在处理的数据，根据需要膨胀不同的布局。

如果您使用的是`convertView`，我想您可能还想为返回的视图设置一个标签，`getView()`以标记它使用的是哪种类型的布局。重复使用时，您可以检查标签，如果它不是所需的类型，则充气一个新的，等等。

# android - 哪个性能更好： setOnClickListener VS android:onclick="onClick"

> ID：12600394
> 
> 赞同：13
> 
> 时间：2012-09-26T11:10:49.823
> 
> 标签：android, performance, onclicklistener

在 Android 中，我们有两种方法可以为按钮（或我认为的任何其他视图）设置 onClick 事件：

**场景一（以编程方式）：**

```
Button b = (Button) findViewById(R.id.mybutton);
b.setOnClickListener(this); 
```

**场景二（在 XML 文件中）：**

```
<Button android:onClick="handler" /> 
```

在 XML 中或以编程方式执行此操作是否有任何性能损失，或者是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:23:20.950

两者在性能上是一样的。Xml 在编译时被预先解析为二进制代码。所以在 Xml 中没有开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:15:12.710

唯一知道的方法是通过单元测试..这完全取决于它是如何在下面处理的...如果我没有猜对，在 xml 中声明它可能会慢一些，因为需要解析 xml 然后方法应该被称为.. 仍然不能确定，它是一个纯粹的 android OS 设计师选择

# ruby-on-rails - 图像标记架构

> ID：12600395
> 
> 赞同：1
> 
> 时间：2012-09-26T11:10:59.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, tagging

自从为我的目的选择最好的结构以来，我没有走得更远。我有：

```
class Image < ActiveRecord::Base
  attr_accessible :date, :description, :name, :image, :tag_ids

  has_many :taggings, :dependent => :destroy
  has_many :tags, :through => :taggings
  mount_uploader :image, ImageUploader
end 
```

然后：

```
class Tag < ActiveRecord::Base
  attr_accessible :name
  has_many :taggings, :dependent => :destroy
  has_many :images, :through => :taggings
end 
```

和：

```
class Tagging < ActiveRecord::Base
  belongs_to :image
  belongs_to :tag
  attr_accessible :image_id, :tag_id
end 
```

我现在有三个主要类别，所有图像都属于“太阳系”、“银河系”或“宇宙”。假设我有一张土星的图像，所以我将其标记为“土星”和“太阳系”。土星卫星的图像将进一步标记为“月亮”。仙女座星系的图像将被标记为“宇宙”和“星系”。

如果我想显示所有图像，例如带有 url 的太阳系图像：www.website.com/solarsystem

应该有到例如木星或土星的链接。如果我单击土星，则 url 应为：www.website.com/solarsystem/saturn ...它会显示所有带有“土星”标签的图像。

在这种情况下，作为链接的类别结构（也将显示）应为：

主页 > 太阳系 > 土星

所有类别都是可点击的，并引导您进入该类别的图像。使用 Image、Tag 和 Tagging 模型，我发现很难实现所有这些。例如，在 /image/show.html 中，我无法显示类别结构的正确链接，因为它们取决于图像的标签。例如，我需要说如果 tag.name = 'Saturn' 那么第一个链接应该是“太阳系”。如果 tag.name = 'Galaxy'，则第一个链接应为“Universe”。但是对于许多标签和组合，它会变得相当混乱。正确的网址（www.website.com/solarsystem/saturn）对我来说也不容易实现。

有没有一个好的解决方案，也许有另一个模型结构，也许有一个自己的模型来处理所有标签，比如“土星”或“木星”？

# php - 从 php-mysql 填充 javascript 2D 数组

> ID：12600399
> 
> 赞同：0
> 
> 时间：2012-09-26T11:11:06.140
> 
> 标签：php, javascript, mysql

我是 Javascript/PHP 新手，所以有几个基本问​​题。我正在尝试从 php 创建一个 javascript 数组。一切正常，直到我从我的 sql 表中引用列“0”或“pid”，但是一旦我尝试访问下一个列“函数”，javascript 就会停止工作。我创建了一个带有警报的测试用例（同样被数组替换）非常感谢您的帮助。

```
<?php
 $baseName . "jobs";
 $tableName     =   $baseName . "dbTable";
 # datbase info .done. 
 $con = mysql_connect("localhost",$userName,$password);
 if (!$con){
     echo('Could not connect: ' . mysql_error());
 }
 mysql_select_db($dbName, $con);
 $result = mysql_query("SELECT * FROM " . $tableName);
 $count = 0;
 echo "<table border='1'>
 <tr>
 <th>ID</th>
 <th>Function</th>
 <th>Position</th>
 <th>Location</th>
 <th>Experience</th>
 </tr>";
 while($row = mysql_fetch_array($result))
 {  
 echo "<tr>";
 echo "<td>" . $row['pid'] . "</td>";
 echo "<td>" . $row['Function'] . "</td>";
 echo "<td>" . $row['Position'] . "</td>";
 echo "<td>" . $row['City'] . ', ' . $row['State'] . "</td>";
 echo "<td>" . $row['Experience'] . "</td>";
 echo "</tr>";
?>
<script type="text/javascript">
 alert(<?php echo $row['pid']?>); <!-- this works -->
 **alert(<?php echo $row['Function']?>); <!-- this does not works -->**
</script>
<?php           
 $count++;
}
echo "</table>";
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:18:56.403

您应该在警报后添加双引号或单引号。喜欢

```
alert("<?php echo $row['Function']?>"); 
```

您获得 first 的价值，因为它只是数字 现在，如果它是文本，您将无法获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:16:04.190

你的 SQL 表结构是什么？执行 $row['name'] 将尝试获取“name”列下的数据。它必须完全匹配才能返回数据。

此外，mysql 命令已被弃用，因此请查看 mysqli 或 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:18:57.260

为了获得更好的格式，您可能需要在 PHP 中使用 heredoc（多行字符串）语法。

```
echo <<<START
    <tr>
    <td> {$row['pid']} </td>
    <td> {$row['Function']} </td>
    <td> {$row['Position']} </td>
    <td> {$row['City']}, {$row['State']} </td>
    <td> {$row['Experience']}</td>
START; 
```

# javascript - 值属性为空，尽管输入字段不是

> ID：12600400
> 
> 赞同：0
> 
> 时间：2012-09-26T11:11:15.680
> 
> 标签：javascript, jquery, html, forms

我正在通过 jquery 将一个输入字段插入到 dom 中，不幸的是这种情况无法重现。

但是，当我在输入字段中写入时，它的值不会改变。

你以前见过这种行为吗？如果是这样，你是如何处理的？

**只是为了澄清**

这个问题中没有代码示例，因为错误不能通过简单的几行代码重现。我必须包含我不允许披露的应用程序部分。因此，我在问人们是否看到过类似的行为，以及在哪里期待它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:22:02.187

如果您的意思是事件处理程序不会为动态添加的元素执行，这可能是一个典型的错误，例如

**HTML：**

```
<div id="container">
    <div class="box">Box</div>
</div> 
```

**JavaScript：**

```
$('.box').on('click', function() {
    alert('box clicked');
});
var newBox$ = $('<div>').addClass('box').html('Box');
$('#container').append(newBox$); // clicks on this box will not be handled. 
```

但是，如果您稍微更改一下 JavaScript，那么动态添加的元素上的事件将按照您的意愿处理：

**如何改变它：**

```
$('#container').on('click', '.box', function() {
    alert('box clicked');
});
var newBox$ = $('<div>').addClass('box').html('Box');
$('#container').append(newBox$); // clicks on this box will be handled. 
```

通过这种方式，您将事件处理程序绑定到容器，并且当事件冒泡时将调用适当的事件处理程序。

# wix - 使用 UIRef wixUI_InstallDir 在卸载期间显示对话框

> ID：12600401
> 
> 赞同：0
> 
> 时间：2012-09-26T11:11:16.327
> 
> 标签：wix, windows-installer, wix3.6

我在 wix 库中添加了对话框，并在 installuisequence 中将其调用为

```
<Show dialog="mycheck" after="cutomaction">REMOVE="ALL"</Show> 
```

卸载时不显示。虽然卸载 UI 很小（仅显示进度条）。

我们如何在卸载时添加新对话框？

# php - 原则 2：从数据库生成的实体没有命名空间

> ID：12600414
> 
> 赞同：5
> 
> 时间：2012-09-26T11:12:17.497
> 
> 标签：php, doctrine, doctrine-orm

我正在通过`\Doctrine\ORM\Tools\DisconnectedClassMetadataFactory()`类从数据库创建实体。这完美！除了命名空间生成。没有生成命名空间。我将我的实体存储在`App/Model/Entities`.

## 有谁知道如何让生成器向实体添加命名空间？

这是我用来生成实体的代码：

```
<?php
$em->getConfiguration()->setMetadataDriverImpl(
    new \Doctrine\ORM\Mapping\Driver\DatabaseDriver(
        $em->getConnection()->getSchemaManager()
    )
);

$cmf = new \Doctrine\ORM\Tools\DisconnectedClassMetadataFactory();
$cmf->setEntityManager($em);
$metadata = $cmf->getAllMetadata();

// GENERATE PHP ENTITIES!
$entityGenerator = new \Doctrine\ORM\Tools\EntityGenerator(); 
$entityGenerator->setGenerateAnnotations(true); 
$entityGenerator->setGenerateStubMethods(true); 
$entityGenerator->setRegenerateEntityIfExists(false); 
$entityGenerator->setUpdateEntityIfExists(true); 
$entityGenerator->generate($metadata, __dir__. '/Model/Entities"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T13:22:25.987

我认为，更好的方法是将命名空间直接设置为驱动程序

```
<?php
$driver = new \Doctrine\ORM\Mapping\Driver\DatabaseDriver($em->getConnection()->getSchemaManager());
$driver->setNamespace('App\\Model\\Entities\\');

$em->getConfiguration()->setMetadataDriverImpl($driver);

.... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T13:36:29.703

我认为从数据库导入时不能设置命名空间，因为 EntityGenerator 从元数据中获取命名空间信息。数据库没有或不需要命名空间，因此信息不会自动来自那里。

您可以尝试遍历 $metadata 对象并将命名空间自己添加到类名中。EntityGenerator 中检索命名空间的代码非常简单：

```
private function _getNamespace(ClassMetadataInfo $metadata)
{
    return substr($metadata->name, 0, strrpos($metadata->name, '\\'));
} 
```

如果所有其他方法都失败了，您始终可以实现自己的 EntityGenerator，您可以将其提供给命名空间以供使用。我们在我们的大型项目中做到了这一点，在生成过程中还有一些其他自定义任务要完成。但是，EntityGenerator 不容易被覆盖，有很多私有方法和属性，因此您可能必须复制和粘贴整个内容。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-04-08T11:49:27.587

您可以使用这个 PHP 脚本从数据库表中生成实体。此脚本将示例命名空间添加到生成的文件中，因此您可以设置命名空间。 [https://gist.github.com/SamvelG/3b39622844f23cac7e76#file-doctrine-entity-generator-php](https://gist.github.com/SamvelG/3b39622844f23cac7e76#file-doctrine-entity-generator-php)

# java - Maven插件开发：目标依赖

> ID：12600416
> 
> 赞同：3
> 
> 时间：2012-09-26T11:12:25.047
> 
> 标签：java, maven-plugin

很难为我的问题找到合适的搜索查询，所以我希望它不是重复的。

我正在开发目标很少的 Maven 插件。我想将其中两个组合在链中（生命周期？）。在执行目标之前`clean-checkout`，我想先执行`checkout`目标。我正在使用注释方法并尝试使用`@Execute`注释来指出应该执行的目标。该插件编译但没有按照我假设的方式执行，因为执行时没有前面的`checkout`目标`clean-checkout`。

```
@Mojo(name = "checkout", defaultPhase = LifecyclePhase.GENERATE_SOURCES)
public class Checkout extends AbstractMojo {

@Mojo(name = "clean-checkout", defaultPhase = LifecyclePhase.GENERATE_SOURCES)
@Execute(goal = "checkout", phase = LifecyclePhase.GENERATE_SOURCES)
public class CleanCheckout extends AbstractMojo { 
```

没有`defaultPhase`和`phase`属性，构建失败。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:01:06.767

定义自定义生命周期可能会对您有所帮助。两年前，我更详细地分析了 maven-release-plugin 并注意到它们使用自己的生命周期。

在这里你可以找到他们的生命周期定义： http: [//svn.apache.org/viewvc/maven/release/tags/maven-release-2.3.2/maven-release-manager/src/main/components-fragment.xml?视图=标记](http://svn.apache.org/viewvc/maven/release/tags/maven-release-2.3.2/maven-release-manager/src/main/components-fragment.xml?view=markup)

此外，我在 Sonatype 的 Mavenbook 中找到了详细信息：http: [//www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-plugins-lifecycle.html](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-plugins-lifecycle.html)

这个有趣的博客也可能对您有所帮助：http: [//www.sonatype.com/people/2009/08/create-a-customized-build-process-in-maven/](http://www.sonatype.com/people/2009/08/create-a-customized-build-process-in-maven/)

# objective-c - 不播放声音

> ID：12600424
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:12:58.620
> 
> 标签：objective-c, ios, xcode, audio

我将我的项目转换为 ARC。Xcode 从示例中更改了代码中的这一行

```
soundFileURLRef = (CFURLRef) [tapSound retain]; 
```

至

```
soundFileURLRef = (__bridge CFURLRef) tapSound; 
```

但没有声音播放。怎么了？

```
- (IBAction)buttonTapped:(UIButton *)sender {
        // Create the URL for the source audio file. The URLForResource:withExtension: method is new in iOS 4.0
        NSURL *tapSound = [[NSBundle mainBundle] URLForResource: @"abide" withExtension: @"aif"];

        CFURLRef        soundFileURLRef;
        SystemSoundID   soundFileObject;

        // Store the URL as a CFURLRef instance
        soundFileURLRef = (__bridge CFURLRef) tapSound; // I think this line is wrong

        // Create a system sound object representing the sound file.
        AudioServicesCreateSystemSoundID (

                                          soundFileURLRef,
                                          &soundFileObject
                                          );

        AudioServicesPlaySystemSound (soundFileObject);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:17:39.433

从逻辑上讲，您的代码看起来完全没问题。我怀疑您实际上并没有`abide.aif`与您的应用程序捆绑在一起，或者您不小心输入了错误的名称（扩展名可能是`aiff`？）。您可以通过在调用后放置断点`[NSBundle URLForResource:withExtension:]`并检查`tapSound`.

确保您已将其实际包含在“复制捆绑资源”中：

[![](../Images/60349325e4937e631030d0dc66cbe272.png "由 imgur.com 主办")](https://imgur.com/Ilxv8)

此外，您应该知道调用 to`AudioServicesCreateSystemSoundID`应该与`AudioServicesDisposeSystemSoundID`调用平衡。您在这里不必要地分配内存，ARC 不会为您处理这个问题。

理想的方法是完成所有工作以`SystemSoundID`在您的`awakeFromNib`or`viewDidLoad`方法中创建 a ，将其存储为 ivar，并且仅调用`AudioServicesPlaySystemSound`您的按钮点击方法。在您的 dealloc 方法中，您应该调用`AudioServicesDisposeSystemSoundID`.

让我知道事情的后续。

# spring - 使用 Spring Security 以根据用户是否经过身份验证显示同一 URL 的不同内容

> ID：12600425
> 
> 赞同：2
> 
> 时间：2012-09-26T11:13:07.730
> 
> 标签：spring, spring-mvc, spring-security

我使用 Spring MVC、Spring Security 和 Apache Tiles，但遇到以下问题：

我希望**未经**身份验证的用户登陆**我网站的主页 URL**（即`www.mywebsite.com/`），登录表单将显示给他们，以便他们可以从那里进行身份验证。

然后，一旦用户通过身份验证，我希望在网站的主页 URL 上**向他们显示完全不同的页面内容**`www.mywebsite.com/`（仍然）可能使用另一个模板/jsp。

我想要实现的基本上**是能够根据用户是否经过身份验证为同一个 URL 显示不同的内容**——所有这些都使用 Spring 安全性和 Spring MVC。

我研究了 Spring Security，但无法找到上述问题的解决方案。其他人也遇到过类似的问题（请参阅：[Spring security-same page to deliver different content based on user role](https://stackoverflow.com/q/2895856/536299)）

任何人都可以就如何实现这一点提供指示或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:41:39.027

我能想到的一种解决方案是在您的 MVC 控制器中检查请求中的用户主体，如果经过身份验证/具有返回一个 ModelAndView 的角色，否则返回另一个：

```
@Controller
public class MyController{

    public ModelAndView doSomething(HttpServletRequest request, HttpServletResponse response){
        if(request.getUserPrincipal() != null && request.isUserInRole("someRole"){
            return new ModelAndView("view1");
        } 
        else {
            return new ModelAndView("view2");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:08:13.193

Spring 论坛的成员为我提供了一个不错的优雅解决方案。这里是：

```
@RequestMapping("/")
@PreAuthorize("isAuthenticated()")
public String authenticatedHomePage() {
    return "authenticatedHomePage";
}

@RequestMapping("/")
public String homePage() {
    return "homePage";
} 
```

它非常好，因为它依赖于 Spring Security。见这里（[博客文章](http://blog.mohchi.com/post/32207832404/tighter-spring-mvc-integration-with-spring-securitys)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T17:10:10.860

我可以想出几种方法来实现你想要的。

首先，您可以使用 Spring Security taglib 有条件地在您的视图模板中呈现内容，具体取决于用户是否经过正确的身份验证。有关 Spring Security taglib 的更多信息在[这里](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html)。粗略地说，这会使您的视图模板看起来像：

```
if(user is authenticated)
     render content for authenticated user
else
     render log-in form 
```

然而，这感觉有点生硬，因为无论您的用户是否经过正确身份验证，您的控制器都会始终创建模型。每当您想显示登录表单时，您还需要在视图模板中使用此逻辑。

另一种方法是创建一个[HandlerInterceptor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/HandlerInterceptor.html)实现，它将所有请求转发到负责呈现登录页面的控制器，直到用户完全通过身份验证。您可以使用 HandlerInterceptor 的 preHandle() 方法来执行此操作：

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.security.core.context.SecurityContext;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

public class MyHandlerInterceptor implements HandlerInterceptor
{

@Override
public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception
{
    SecurityContext sc = SecurityContextHolder.getContext();
    boolean userAuthenticated = true;
    /* Some logic in here to determine if the user is correctly authenticated */

    if(!userAuthenticated)
    {
        request.getRequestDispatcher("/login").forward(request, response);
        return false;
    }

    return true;
}

@Override
public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception
{

}

@Override
public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception
{

}} 
```

然后，您可以配置 Spring MVC 以将您的 HandlerInterceptor 实现映射到您需要此功能的 URL。这避免了您必须在所有控制器之间复制逻辑并且易于测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:55:44.977

你可以尝试使用

```
<security:authorize access=”isAnonymous()”&gt;
not authenticated page
</security:authorize>
<security:authorize access=”isAuthenticated()”&gt;
authenticated page
</security:authorize> 
```

或者您可以在控制器中返回“redirect: page_for_not_auth”作为视图名称，以将响应重定向到另一个控制器/方法，该控制器/方法处理未经过身份验证的请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-25T13:13:36.373

你应该这样做：

```
@RequestMapping("/")
public String generalHomePage() {
    ...
}

@RequestMapping("/")
@PreAuthorize("isAuthenticated()")
public String secureHomePage() {
    ...
} 
```

# android - 不清除 edittext 值

> ID：12600426
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:13:10.493
> 
> 标签：android

在我的第一个活动中，我有三个 edittext 和两个按钮。我给出了前两个edittext的值，然后单击第一个按钮并移动到第二个活动。并再次从该活动将值传递给第一个活动并将其保存在第三个编辑文本中。但不应清除在第一个和第二个编辑文本中输入的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:28:36.067

一种方法是在您导航到其他活动之前将值存储在您的第一个活动中。阅读以下文章，[保留值](https://sites.google.com/site/rajibkanungo/blog/openinganewscreenfromanexistingscreenandretainingvaluesinpreviousscreenwhenwegoback)

# php - 带有可选参数的php mysql函数

> ID：12600427
> 
> 赞同：3
> 
> 时间：2012-09-26T11:13:12.540
> 
> 标签：php, mysql

我需要帮助为 php 函数提供可选参数，该函数将在 MySQL 数据库中搜索匹配条件。

场景：前端 = 会有 6 个 html 输入表单字段，命名为 authorName、authorCountry、authorState 等

当用户填写此字段时，字段值将作为 mysql 参数传递以用于搜索数据库。这里的问题是，如果用户想知道美国的作者列表，他将在国家字段中输入美国并离开其他字段。但这会破坏 mysql 查询，因为其他字段留空。

我试着做，但它对我有用。

```
function getAuth(authName=NULL, authCoun=NULL, authSate=NULL) {
$query = mysql_query("SELECT * FROM authTable WHERE authName='authName'
AND authCoun='authCoun' AND authSate='authSate'");
return $query; } 
```

请帮我传递可选参数。

谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T11:18:52.880

```
function getAuth($authName=NULL, $authCoun=NULL, $authSate=NULL) {
    $sql = "SELECT * FROM authTable WHERE 1 = 1";
    if ($authName) {
        $sql .= " AND authName='$authName'";
    }
     if ($authCoun) {
        $sql .= " AND authCoun='$authCoun'";
    }
     if ($authSate) {
        $sql .= " AND authSate='$authSate'";
    }
    return mysql_query($sql);
 } 
```

并确保在传递给函数之前已经对这些变量进行了转义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T11:15:09.443

这样做：

```
SELECT * 
FROM authTable 
WHERE 1 = 1
  AND (@authName IS NULL OR authName = @authNameParam)
  AND (@authCoun IS NULL OR authCoun = @authCounParam)
  AND (@authSate IS NULL OR authSate = @authSateParam)
 ... 
```

即使没有任何参数传递给这个查询，这个查询也不会中断，即`NULL`在这种情况下，整个`WHERE`子句将变成`WHERE 1 = 1`就像`SELECT * FROM authtable`没有`WHERE`子句一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:16:08.450

功能应该是这样的

```
function getAuth(authName=NULL, authCoun="Default value", authSate="Default value") {} 
```

当您不将值传递给函数时，默认值即将到来。

# apache-flex - Flex 验证弹出窗口不再出现在弹出对话框中？

> ID：12600430
> 
> 赞同：0
> 
> 时间：2012-09-26T11:13:18.230
> 
> 标签：apache-flex, popup, validation

我正在开发一个包含大量字段验证的应用程序。验证效果很好，我 1000000% 确定验证消息弹出窗口出现得更早。现在我做了很多工作和重构。我改变的一件事是我打开弹出窗口/对话框的方式。为了使这些以整个应用程序而不是打开组件为中心，我重构了打开对话框的方式。我使用警报的来源作为此基础，但由于我遇到其他问题（焦点管理器等）而对其进行了相当多的扩展（我只是提到这一点，因为我假设我丢失的弹出窗口与此有关）。

这是负责在我的应用程序中打开弹出窗口的代码：

```
 public function show(realParent:Sprite,
                     displayParent:Sprite = null,
                     closeHandler:Function = null,
                     moduleFactory:IFlexModuleFactory = null):Dialog {

    // Get the parent ...
    // If none is set, use the top-level-application.
    if (!displayParent) {
        var sm:ISystemManager = ISystemManager(FlexGlobals.topLevelApplication.systemManager);
        // no types so no dependencies
        var mp:Object = sm.getImplementation("mx.managers.IMarshallPlanSystemManager");
        if (mp && mp.useSWFBridge())
            displayParent = Sprite(sm.getSandboxRoot());
        else
            displayParent = Sprite(FlexGlobals.topLevelApplication);
    }

    // Register for close-events, making sure the pop-up is closed.
    if (closeHandler != null) {
        this.addEventListener(CloseEvent.CLOSE, closeHandler);
    }

    // Setting a module factory allows the correct embedded font to be found.
    if (moduleFactory) {
        this.moduleFactory = moduleFactory;
    } else if (realParent is IFlexModule) {
        this.moduleFactory = IFlexModule(realParent).moduleFactory;
    } else {
        if (realParent is IFlexModuleFactory) {
            this.moduleFactory = IFlexModuleFactory(realParent);
        } else {
            this.moduleFactory = FlexGlobals.topLevelApplication.moduleFactory;
        }

        // also set document if parent isn't a UIComponent
        if (!parent is UIComponent) {
            this.document = FlexGlobals.topLevelApplication.document;
        }
    }

    // Make the dialog center itself relative to the parent.
    PopUpManager.addPopUp(this, displayParent, true);
    PopUpManager.centerPopUp(this);

    return this;
} 
```

什么可能导致验证弹出窗口不再出现？我应该去哪里看？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:08:32.820

好的……所以我又自己想通了。不过，我可能会因为花了这么长时间才找到它而把头撞在墙上。

如果我使用 Spart 表单，FormItems 和表单本身可以定义错误文本区域以输出错误消息。因此，一旦 FormItem 拥有一个 ID 为“errorTextDisplay”的皮肤部件，错误消息就会出现在那里。我现在期待如果没有这样的部分，将使用旧的通知......不。

在对 FormItem 的代码和它的皮肤进行了大约 2-3 小时的处理之后，我注意到“contentGroup”通过将 showErrorTip 设置为 false 明确定义了一个属性来抑制错误工具提示。只需从皮肤中删除“errorTextDisplay”并将 showErrorTip 更改为 true 即可使我的弹出窗口看起来很好:-)

希望这篇文章可以帮助有同样问题的人。

# jsf - 现代浏览器中的 ajax4jsf 双打和标签

> ID：12600432
> 
> 赞同：1
> 
> 时间：2012-09-26T11:13:20.990
> 
> 标签：jsf, myfaces, ajax4jsf

我正在尝试修复使用 JSF (myfaces 1.1)、facelets、tomahawk 和 ajax4jsf 的 Web 应用程序的错误。在现代浏览器中，例如 Firefox 12+ 或 Chrome，有重复的 <body> 和 <head> 标签（可以在 FireBug 中看到）。很明显，它是由javascript生成的，因为页面的来源没有它。

该问题不会出现在较旧的 Firefox (3.6) 和 Internet Explorer 中。

我已经发现 ajax4jsf 标签会导致问题。根据 Manifest 文件，它是 1.1.1 版本。升级到 RichFaces 会解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:11:50.867

对于面临同样问题的任何人：升级到 RichFaces 3.1.2.GA 并不能解决问题。解决此问题的版本是 3.3.3.Final（或这两个版本之间的某个版本）。

# java - maven 存储库上的quartz-1.6.5 在哪里？

> ID：12600434
> 
> 赞同：2
> 
> 时间：2012-09-26T11:13:27.280
> 
> 标签：java, maven, repository, quartz-scheduler

我可以找到从`1.0`到`1.5.2`下的版本`quartz:quartz`，也可以找到`1.6.1`下的`org.opensymphony.quartz:quartz`版本和从`1.7.2`到`2.1.6`下的版本`org.quartz-scheduler:quartz`。

在哪里`1.6.5`？有没有版本查询的搜索引擎？

为什么他们总是重命名组？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:35:47.133

我发现quartz-1.6.5 在JBoss 第三方存储库中：[https ://repository.jboss.org/nexus/content/repositories/thirdparty-releases/org/opensymphony/quartz/quartz/1.6.5/](https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/org/opensymphony/quartz/quartz/1.6.5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:53:52.440

石英很老（2009），你可以使用[石英调度器](http://quartz-scheduler.org/)

# magento - Magento 主题中 /persistent/ 目录的含义是什么？

> ID：12600446
> 
> 赞同：11
> 
> 时间：2012-09-26T11:14:29.293
> 
> 标签：magento, themes, persistent

我知道这与 CE 1.6 中引入的 Magento 的持久特性有关

但深入的意义是什么？为什么 Magento 将模板翻倍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:23:03.173

这些用于持久的购物车功能，是的，它翻了很多

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2014-06-25T14:51:04.667

事实上，它对以下任何内容都没有响应：刷新缓存、清除 ( `rm -rf var/cache/*`)、重新索引、刷新服务提供者缓存 (memcache)、删除会话文件。`guest login`当我清楚地将其重置为**NO** Mage 时，我一直在不断地让我用错误的信息流式传输这个 JS。原因？另一个（100 种所有选项）解决方案不起作用并且对用户隐藏信息。

我使用 ArchLinux ffs，我在 Clojure 中编写代码……为什么上帝会惩罚我做这个神奇的、超乎想象的黑洞 OOP 汤：（

# model-view-controller - xtype: sencha touch 2 中的时间选择器。与 xtype: datepicker 相同

> ID：12600447
> 
> 赞同：0
> 
> 时间：2012-09-26T11:14:30.103
> 
> 标签：model-view-controller, sencha-touch-2, timepicker

在 Sencha touch 2 MVC 中如何插入 24 小时格式的时间选择器？. 我想要它的形式，但无法实施。`var entryForm = Ext.define("TimeSheet.view.Newentry", { extend: "Ext.TabPanel", 需要: ["Ext.XTemplate", "Ext.field.DatePicker", "Ext.field.Select", "Ext.TitleBar", "Ext.DateExtras"], xtype:'newentryview',

```
config: {
    //id: 'newEntry',
    autodestroy: true,
    fullscreen: true,
    scrollable: true,
    cardSwitchAnimation: 'cube',
    tabBar: {
        docked: 'top',
        layout: {
            pack: 'center'
        }
    },
    defaults: {
        styleHtmlContent: true
    },
    items: [{
        xtype: 'formpanel',
        name: 'entryForm',
        //id: 'entry',          
        style: 'border: none; font: 22px Arial black',
        title: 'Add Entry',
        fullscreen: true,
        iconMask: true,
        iconCls: 'info',
        items: [{
            xtype: 'fieldset',
            name: 'fieldSet',
            autoComplete: true,
            scrollable: false,
            cls: 'add',
            items: [{
                xtype: 'textfield',
                name: 'client',
                placeHolder: 'Client name'
            },{
                xtype: 'selectfield',
                name: 'project',
                    placeHolder: 'Project',
                    options: [
                        {text: 'First Option',  value: 'first'},
                        {text: 'Second Option', value: 'second'},
                        {text: 'Third Option',  value: 'third'}
                    ]
            },{
                xtype: 'textfield',
                name: 'task',
                placeHolder: 'Task'
            },{
                xtype: 'datepickerfield',
                name: 'date',
                value: new Date()
            },{
                xtype: 'datepickerfield',
                name: 'time',
                value: new Date(),
                //HERE I WANT THE TIME PICKER FIELD IN 24 HR FORMAT..
            },{
                xtype: 'textareafield',
                name: 'notes',
                ui: 'textarea',
                maxRows: 5,
                maxWidth: '100%',
                placeHolder: 'Add notes here...'
            },{
                xtype: 'panel',
                name: 'btnpanel',
                height: '51px',
                width: '100%',
                layout: {
                    type: 'hbox'
                },
                items: [{
                    xtype: 'button',
                    cls: 'btnreset',
                    text: 'Reset',
                    style: 'font-size: 14px',
                    //ui: 'confirm',
                    height: "35px",
                    width: '40%',
                    event: 'tap',
                    handler: function() {
                        console.log("reset");

                    }
                },{
                    xtype: 'spacer'
                },{
                    xtype: 'button',
                    //id: 'submit',
                    cls: 'btnsubmit',
                    text: 'Submit',
                    style: 'font-size: 14px',
                    //ui: 'confirm',
                    height: "35px",
                    width: '40%',
                    //go3: 'submitview' 
                    event: 'tap',
                    handler: function() {
                        console.log("Submitted");
                    }
                }]
            }]
        }]

    },{
        xtype: 'panel',
        style: 'border: none; font: 22px Arial black',
        title: 'Panel 2',
        fullscreen: true,
        html: 'Page 2',
    }]
} 
```

});`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:01:22.293

可能这可以帮助你。

**G --- 没有前导零的小时的 24 小时格式 --- 0 到 23**

参考[Ext.Date](http://docs.sencha.com/touch/2-0/#!/api/Ext.Date)

# css - 上升和下降按钮是如何制作的？

> ID：12600452
> 
> 赞同：0
> 
> 时间：2012-09-26T11:14:47.387
> 
> 标签：css, layout, button, navigation, navigationcontroller

在导航下面的网站布局中，当鼠标悬停在按钮上时它会上升，当鼠标移开时它会下沉，如何用css或其他方式做到这一点？

www.bigfishgames.com/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:18:05.547

你可以用纯 CSS 来做到这一点：

```
<!DOCTYPE html>
<html>
<head>
<style>
div { border-radius: 4px; width: 100px; height: 20px; background: green; position: absolute; top: 50px; left: 50px; text-align: center; padding: 10px 0px; }
div:hover { top: 40px; padding-bottom: 20px; }
</style>
</head>
<body>
<div>Howdy</div>
</body>
</html> 
```

请注意两者`padding-bottom`和`height`是如何改变的，以给人`div`一种“向上”扩展的错觉。

# php - 如何将数组转换为字符串，适用于 JSON.stringify

> ID：12600456
> 
> 赞同：0
> 
> 时间：2012-09-26T11:14:51.477
> 
> 标签：php, symfony, twig

我在数据库中有一个数组，它看起来像这样：`{"hello":"world", "Test":["hello"]}`，非常适合`JSON.stringify`，但是当我从数据库中选择它时，如下所示：

```
$metadata = $this->repository->getMetadata($id);

$data = json_encode($metadata);

return $this->render('AcmeQuotesBundle:Home:metadata.html.twig', array('data' => $data)); 
```

并将其放入模板中：

```
{% block body %}
    <script>
        var obj = {{ data|raw }}

        document.body.innerHTML = "";
        document.body.appendChild(document.createTextNode(JSON.stringify(obj, null, 4)));
    </script>
{% endblock %} 
```

我得到这个输出：

```
[
    {
        "quoteMetadata": "{\"hello\":\"world\", \"Test\":[\"hello\"]}"
    }
] 
```

这不是我想要的。我想要的只是`obj`作为本机字符串的值 -`{"hello":"world", "Test":["hello"]}`没有`"quoteMetadata":`, 没有引号并且没有`"\"`周围的单词。我尝试使用`implode()`，但我注意到：

```
Notice: Array to string conversion in C:\xampp\htdocs... 
```

我正在使用 Symfony2、Twig 和 Doctrine2，我正在做这一切，因为我希望数据库中的字符串以一种易于阅读的方式显示，比如这里 - [http://jsfiddle.net/AndyE/HZPVL/](http://jsfiddle.net/AndyE/HZPVL/)如果你有任何想法如何解决这个问题或如何以另一种方式制作它，请分享！

* * *

**编辑**

当我放`var_dump($matadata)`之后`$metadata = $this->repository->getMetadata($id);`，我得到了这个：

```
array(1) { [0]=> array(1) { ["quoteMetadata"]=> string(35) "{"hello":"world", "Test":["hello"]}" } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:22:14.450

您的数据不适合`JSON.stringigy`，它非常适合`JSON.parse`，它将字符串转换为对象。`JSON.stringify`如果您想输出原始字符串，或者`JSON.parse`如果您想将数据用作对象，只需删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:25:49.030

问题是您的元数据数组不干净；您想要的位被埋在单行数组内的关联数组中。所以试试：

```
$metadata = $this->repository->getMetadata($id);
return $this->render('AcmeQuotesBundle:Home:metadata.html.twig', array('data' => $metadata[0]['quoteMetadata'])); 
```

# php - 用于持久登录的数据库方案

> ID：12600457
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:15:02.907
> 
> 标签：php

我想将 cookie 的密钥与在数据库中找到的密钥进行比较，以便让回访者自动登录网站，这意味着 db 中的密钥和 cookie 将与特定用户相关联。

我的问题是什么更好，将密钥存储到存储用户名及其密码的表中，或者创建一个单独的表，当然会有用户名和相关的密钥和时间戳。

复杂性是这里的一个问题——此外，我试图找到一个 innodb 或 Isam 是否更适合上述情况。

更复杂的是，从现在开始很难预测应用程序将有多大，以及这将如何影响数据库的设计。我越早找到合理的解决方案越好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:28:41.810

我将用一些关于如何解决这个问题的想法和想法来回答这个问题。

现在，您在执行此操作时首先应该考虑的是其他站点如何执行此操作：

*   亚马逊允许您在持久性 cookie 下浏览网站，但它们不允许在不强制重新登录的情况下下订单或更改详细信息。然而，话虽如此，这仍然存在严重的安全漏洞。如果您允许单击订购，然后其他人使用您的计算机并单击来自亚马逊的活动电子邮件中的链接（例如广告），则仍然有可能将订单放置在其他人的帐户上而无需实际上已登录（是的，我偶然发现了这一点，谢天谢地）。
*   Facebook 对亚马逊采取了类似的方法。从个人经验来看，我认为他们要求每两天重新登录一次以编辑帐户详细信息等。
*   我可以收集到的 Stackoverflow 没有这样的安全措施。登录后，您将登录指定的持续时间。
*   谷歌有一个 2 年以上的 cookie，每周一次左右要求您重新登录以验证自己。

因此，正如您所看到的，许多站点不仅允许持久登录来控制其用户交互，而且实际上返回的持久登录很少甚至完全登录一个人。相反，大多数网站实施的是 2 层登录系统，您可以在其中以 cookie 用户的身份查看该网站，但是您无法编辑任何内容而无需再次登录。

你会立即注意到这里的事情。这些网站中的许多网站只关心浏览器会话到期时的 cookie 到期。持久性 cookie 很少有短期到期，所以这一点是无用的。正如@pyruva 所说，窃取某人的 cookie 并以他们的身份查看网站很容易，这种情况一直在 Facebook 上发生（您甚至可以找到有关如何操作的视频教程）。

所以首先要记住的是，持久登录本质上是不安全的。通过实现诸如 2 层身份验证系统之类的东西，使其安全的方法通常在您的应用程序逻辑中。

您永远不应该做的一件事是将有关用户的一些个人身份信息存储在该 cookie 中，例如用户名或密码，即使是散列形式。一个更好的方法是使用随机生成的令牌（这里考虑 OAuth2）最初与服务器握手。

当然，您需要考虑的另一件事是总体上保护您的 cookie。你可以在谷歌上找到很多关于这个的资源，但是这里有一个链接应该很有帮助：http: [//www.codinghorror.com/blog/2008/08/protecting-your-cookies-httponly.html](http://www.codinghorror.com/blog/2008/08/protecting-your-cookies-httponly.html)

所以希望这能给你一些关于如何解决这个问题的方向和提示。

### 编辑

当涉及到 cookie 时，访问您网站的每个用户实际上都有两个会话。他们有一个浏览器会话，当浏览器关闭时，将从他们的浏览器中删除 cookie（通常在 HTTP 标头中表示为 0 过期时间）。

然后是持久会话。您现在要实施的一个，cookie 可以在它们实际过期之前持续数年。

这就是我所说的浏览器过期。因此，大多数网站都包含临时 cookie，一旦您关闭浏览器，这些 cookie 就会被删除。这些 cookie 通常用于保持您的会话。

如果网站关心 cookie 过期，那么他们不会在您的计算机上保存有效期为 2 年的 cookie。如果有人要使用过期的 cookie 来滥用您的帐户，让我们面对现实吧，他们有点不走运，因为 cookie 仍然完全有效。这是一个更大的安全威胁，但它确实证明了我的观点。

# propel - 将供应商特定模块添加到 Zend Framework 2.0

> ID：12600464
> 
> 赞同：0
> 
> 时间：2012-09-26T11:15:24.830
> 
> 标签：propel, zend-framework2

我已经查看了一些关于如何在 ZF2 中加载供应商库的以前的 Stack 帖子，但我认为它们有点过时了。我试图弄清楚如何正确添加我的供应商库“Propel”。

我从 Zend Framework 收到一条错误消息，提示“无法加载 'Propel' 模块”

这是我的设置。

在我的 application.config.php

```
return array(
'modules' => array(
    'Application',
    'Propel' // Module I am trying to add
),
'module_listener_options' => array(
    'config_glob_paths'    => array(    
        'config/autoload/{,*.}{global,local}.php',
    ),
    'module_paths' => array(
        './module',
        './vendor',
    ),
), 
```

);

这是我的供应商目录的设置

```
-Vendor
    -Propel
       -runtime
       -config
       -autoload_classmap.php
       -Module.php 
```

这是我的 Module.php

```
namespace ORM;

class Module
{
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        )
    );
}

public function getConfig()
{
    return include __DIR__ . '/config/module.config.php';
}
 } 
```

这是我的 autoload_classmap.php

```
// Generated by ZF2's ./bin/classmap_generator.php
return array(
    'Propel'                      => __DIR__ . '/runtime/lib/Propel.php'
); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:07:44.777

命名空间名称必须是“Propel”。application.config.php 中的文件夹名称、模块命名空间名称和模块名称必须完全相同。

# jquery - jQuery 不能在 IE 中运行，但适用于 Chrome 和 Firefox

> ID：12600469
> 
> 赞同：0
> 
> 时间：2012-09-26T11:15:45.030
> 
> 标签：jquery

我在这里有一个示例 html 代码和 javascript，当被 Google Chrome 和 Mozilla Firefox 浏览时，它可以正常工作，但是当从 Internet Explorer 9 中查看时，它现在变得一团糟。

我的html代码是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <script type="text/javascript" src="dummy.js"></script>
        <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
    </head>
    <body>
        <div id="dummy" style="display:none;"><option value="dummy">dummy</option></div>
        <table>
            <tr>
                <td>
                    <tbody id="MultCompanyIdPane">  </tbody>
                </td>
            </tr>
        </table>
    <script>modifyMultCompIdFunc();</script>
    </body>
</html> 
```

我的示例 javascript 是：

```
function modifyMultCompIdFunc() {
    $("#MultCompanyIdPane").show();

        var html =
                '<tr>' +
                    '<td align="left">Company:</td>' +
                    '<td align="right">' + 
                        '<select id="var" class="UserMgmtInputText">' +
                            $("div#dummy").html() +
                        '</select>' +
                    '</td>' +
                '</tr>';
        $("#MultCompanyIdPane").append(html);
} 
```

我已经尝试重置我的 IE 配置，但它并没有解决问题。关于如何解决这个问题的任何想法？还是我做错了？

它在显示方面搞砸了，在google chrome/mozilla中查看时，下拉列表框正在工作（选择框上有一个值），但是当使用IE9查看时，下拉列表中没有值盒子。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:06:50.423

您的示例中有多个问题。

1.  MultCompanyIdPane id 被使​​用了 2 次。
2.  IE 不允许`<option>`在标签之外使用`<select>`标签。这就是为什么`$("div#dummy").html()`只返回 text`dummy`而不是`<option value="dummy">dummy</option>`.

[工作示例](http://jsfiddle.net/eGEBJ/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:54:31.270

您有两个`<tbody>`具有相同 id (MultCompanyIdPane) 的元素。此外，您的`<option>`标签应该是`<option>dummy</option>`或`<option value="dummy">dummy</option>`。

# jquery - 在单击和切换时使用 jquery 滑动到一边

> ID：12600473
> 
> 赞同：0
> 
> 时间：2012-09-26T11:16:03.843
> 
> 标签：jquery, hide, toggle, slide

所以我有一个网站，我需要通过单击按钮从侧面滑入 div（从左侧滑入并在右侧滑出） - 并且在重新单击时它应该再次滑出......所以它需要从页面加载中隐藏，并且仅在单击按钮后才可见。

我试着做这个，但我是 jquery 的新手，所以如果有人可以帮助我继续，我会很感激。

这是我现在有多远的小提琴。

链接：http: [//jsfiddle.net/iBertel/zes8a/21/](http://jsfiddle.net/iBertel/zes8a/21/)

**查询**：

```
$('#btn').click(function() {   
$('#div1').slideToggle('slow', function() {  
});
}); 
```

**HTML**：

```
<div id="div1">Div 1</div>
<div><a href="#" id="btn">Click</a></div> 
```

**CSS**：

```
#div1 {
width:100px; height:100px; background-color:#F30; color:#FFF; text-align:center; font-size:30px; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:35:58.883

```
$('#btn').click(function() {   
    $('#div1').animate({width:'toggle'},350);
}); 
```

[http://jsfiddle.net/zes8a/39/](http://jsfiddle.net/zes8a/39/)

# c# - 错误告诉并非所有代码路径都返回一个值

> ID：12600479
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:16:21.863
> 
> 标签：c#, return

我写了 ac# 代码，这对我来说似乎是正确的

```
public static BCSMappedTable GetMappedTable(string p_ListName)
    {
        List<BCSDataBase> ConnexionList = BCSManagement.GetAllDataBases();
        bool found = false;
        foreach (BCSDataBase connexion in ConnexionList)
        {
            foreach (BCSMappedTable tabList in connexion.GetMappedTables())
            {
                if (tabList.getListeName().Equals(p_ListName))
                {
                    found = true;
                    return tabList;
                }
            }
        }
        if (found)
            return new BCSMappedTable();
    } 
```

但是这个错误一直出现

```
error : not all code paths return a value 
```

我不知道为什么！我精益我总是返回所需的值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T11:17:53.877

在函数结束时，如果`found`为 false，则您没有返回路径...

由于您`return`的循环中有一条语句，因此一旦找到该项目，该函数就会退出，因此您不需要该`found`变量。您可以使用以下内容：

```
public static BCSMappedTable GetMappedTable(string p_ListName)
{
    List<BCSDataBase> ConnexionList = BCSManagement.GetAllDataBases();
    foreach (BCSDataBase connexion in ConnexionList)
    {
        foreach (BCSMappedTable tabList in connexion.GetMappedTables())
        {
            if (tabList.getListeName().Equals(p_ListName))
            {
                // return as soon as the item is found
                return tabList;
            }
        }
    }

    // this code won't be executed if the item was found before...
    return new BCSMappedTable();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:18:10.910

因为最后你有

```
if (found) 
            return new BCSMappedTable(); 
```

如果找不到怎么办？

问题是，它不会到达那里，因为当 found 设置为 true 时，你从函数返回 - 所以，同样，这一切需要说的是

```
return new BCSMappedTable(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:21:08.713

```
public static BCSMappedTable GetMappedTable(string p_ListName)
    {
        List<BCSDataBase> ConnexionList = BCSManagement.GetAllDataBases();
        bool found = false;
        foreach (BCSDataBase connexion in ConnexionList)
        {
            foreach (BCSMappedTable tabList in connexion.GetMappedTables())
            {
                if (tabList.getListeName().Equals(p_ListName))
                {
                    found = true;
                    return tabList;
                }
            }
        }
        if (!found)
            return new BCSMappedTable();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:19:50.603

实现其他部分

```
if (found)
            return new BCSMappedTable();
else 
return tablist1;//or something else 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:20:56.180

在您的代码中，您有：

```
found = true;
return tabList; 
```

给局部变量设置一个值然后直接返回是没有意义的，因为这个变量不会被使用。`return`基本上以您返回的值退出方法（它应该与您的方法的类型匹配）。

正如错误所述，并非所有路径都返回一个值。如果`found==false`没有返回值。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-26T11:20:42.093

试试这个

```
public static BCSMappedTable GetMappedTable(string p_ListName)
{
    List<BCSDataBase> ConnexionList = BCSManagement.GetAllDataBases();
    bool found = false;
    foreach (BCSDataBase connexion in ConnexionList)
    {
        foreach (BCSMappedTable tabList in connexion.GetMappedTables())
        {
            if (tabList.getListeName().Equals(p_ListName))
            {
                found = true;
                return tabList;
            }
        }
    }
    if (found)
      {
        return new BCSMappedTable();
       }
     return found;
} 
```

# javascript - 修改 SELECT 命令返回的数据网格中的文本值

> ID：12600480
> 
> 赞同：0
> 
> 时间：2012-09-26T11:16:30.523
> 
> 标签：javascript, asp.net, datagrid, replace, selectcommand

我想在从数据库返回数据后修改文本值，我需要修改 MBS1270 和 MBS1263 使其在数据网格中显示时看起来像其他的一样。

```
SelectCommand="SELECT PartNumber as 'Part Number', OnhandStockLevel as 'In Stock', DueIn as 'In Production' FROM vw_Rb_FreeStock WHERE PartNumber = 'UFP-0390B' OR PartNumber = 'UFP-0690B' OR PartNumber = 'MBS1270' OR PartNumber = 'MBS1263'"> 
```

现在，我已经使用 javascript 替换了 body load 中的值，但是，这会打乱数据网格的排序并使新替换的值仍然出现在顶部，因为“M”在“U”之前，它仍然排序基于旧值。

Javascript：

```
 <script type="text/javascript">
    function modText(original, replace) {
        alert("Hello");
        var find = original;
        var repl = replace;
        var page = document.body.innerHTML;
        while (page.indexOf(find) >= 0) {
            var i = page.indexOf(find);
            var j = find.length;
            page = page.substr(0, i) + repl + page.substr(i + j);
            document.body.innerHTML = page;
        }
</script> 
```

我想用值“UFP-1690B”和“UFP-1290B”替换 MBS 值。

有没有办法根据替换的值进行排序？还是我可以采取另一种方法？我试图做一些类似于你如何使用'AS' sql 函数替换列标题的事情，但是失败了，这样的事情会很完美。

不，我无法更改原始数据库值。

网格视图代码：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                BackColor="White" BorderColor="#999999" BorderStyle="None" BorderWidth="1px" 
                CellPadding="3" CssClass="style1" DataKeyNames="Part Number" 
                DataSourceID="SqlDataSource1" GridLines="Vertical">
                <RowStyle BackColor="#EEEEEE" ForeColor="Black" />
                <Columns>
                    <asp:BoundField DataField="Part Number" HeaderText="Part Number" 
                        ReadOnly="True" SortExpression="Part Number" />
                    <asp:BoundField DataField="In Stock" DataFormatString="{0:0}" 
                        HeaderText="In Stock" SortExpression="In Stock" />
                    <asp:BoundField DataField="In Production" DataFormatString="{0:0}" 
                        HeaderText="In Production" ReadOnly="True" SortExpression="In Production" />
                </Columns>
                <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
                <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
                <AlternatingRowStyle BackColor="#DCDCDC" />
            </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:30:11.687

从那以后已经一个月了，但我想我会为其他有类似问题的人添加一个最终答案。

我使用了 SQL REPLACE 函数，参见：http: [//msdn.microsoft.com/en-us/library/ms186862.aspx](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

之后，我使用 UNION 将原始数据与替换数据结合起来。

最终代码：

```
SELECT REPLACE(REPLACE(PartNumber, 'MBS1269', 'UFP-1290S'), 'MBS1262', 'UFP-1690S') AS PartNumber... (and so on) 
```

输出绝对完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:02:56.490

您可以尝试使用`RowDataBound`事件

```
void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Cells[1].Text = e.Row.Cells[1].Text.Replace("MBS","UFP");
    }
} 
```

您可以将其添加到您的网格

```
<asp:gridview onrowdatabound="GridView_RowDataBound" /> 
```

# android - 创建应用程序以连接计算机

> ID：12600483
> 
> 赞同：0
> 
> 时间：2012-09-26T11:16:37.013
> 
> 标签：android

我想创建我想用来关闭我的电脑的应用程序。我想在WIFI中连接手机和电脑。但是我不知道如何将推荐发送到计算机以及计算机如何翻译此推荐并关闭计算机。你能告诉我如何开始以及创建这样的应用程序我应该知道什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:23:21.640

您可以使用客户端/服务器范例来实现这一点。您需要开发一个作为客户端工作的安卓应用程序和一个作为服务器工作的电脑应用程序。

在服务器端，您需要等待两个命令：

1.  Discover：用于让客户端知道哪些服务器可用
2.  行动：用于让服务器知道它必须自行关闭

# css - 网页水平滚动【页面宽度问题】

> ID：12600484
> 
> 赞同：0
> 
> 时间：2012-09-26T11:16:37.277
> 
> 标签：css

我为其中一个客户端构建了一个测试 html 页面，我遇到了页面宽度问题，我只是无法弄清楚是什么 div 导致整个页面的宽度水平滚动。任何人都可以指出或提供任何帮助。我想停止滚动。测试页面的[链接在这里输入链接描述](http://www.amaechiperformance.com/test-one.html) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:22:07.710

这个元素：

```
<a title="Show next" id="next" href="#" style="display: block;" class="">
</a> 
```

宽度为 50%，来自`layout.css`第 63 行

```
#prev, #next {
 background-color: rgba(255, 255, 255, 0.698);
 display: block;
 height: 509px;
 position: absolute;
 top: 130px;
 width: 50%;  <--- here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:23:48.490

您的下一个按钮的宽度为 50%。这是从它的直接父级计算出来的，它恰好是身体标签。所以它最终占据了浏览器窗口的 50%。

快捷的解决方案是`overflow-x: hidden`在`body`标签上设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:27:20.640

只需删除：

```
right :-479px; from  #next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T11:31:08.157

你给`width:50%;`你的 id`#next`和`#prev`组合。`width:auto;`分别给`#next`。它会解决你的问题。:)

# javascript - 在 Internet Explorer 中未定义 files.length

> ID：12600486
> 
> 赞同：1
> 
> 时间：2012-09-26T11:16:47.607
> 
> 标签：javascript, jquery

我正在使用

```
$(upload_button).bind('change', function(event) 
{
    var files = this.files;
    alert(typeof(files));
    if(typeof(files)!='undefined')
    {

    }
}); 
```

在我的 jQuery 代码中，它在 Firefox 和 Chrome 中运行良好，但在 IE8 中运行良好（即，IE 返回未定义的**files.length**，而其他返回值）。那么有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:21:13.127

来自[jQuery API](http://api.jquery.com/change/)。 `change`事件不适用于按钮，因为我假设 upload_button 是按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:28:46.700

这是因为 Internet Explorer，甚至 IE9[都不支持 HTML5 File API](http://caniuse.com/fileapi)，因此它返回属性`undefined`值。`files`

# vb.net - 使用 Streamreader 读取 CSV 文件获取（ouf 范围异常的索引）关于空或错误格式的规则如何避免

> ID：12600487
> 
> 赞同：1
> 
> 时间：2012-09-26T11:16:48.197
> 
> 标签：vb.net, csv, streamreader

好的，所以我用 streamreader 读取了一个 CSV 文件，当它读取一个空行或该行的格式不正确时，异常索引超出了范围。

是否有解决方案，当您收到此错误时，您转到 csv 文件的下一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:26:02.160

最好的方法是完全避免手动解析 CSV，而是使用可用的 CSV 阅读器之一。例如[这个快速的 CSV-reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。

* * *

我不会对异常做出反应，而是首先跳过空行。

`StreamReader`你也可以[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)用 Linq代替 a ：

```
Dim lines = From line In File.ReadLines(path)
            Where line.Length <> 0
' now you can enumerate all not-empty lines '
For Each line In lines
    ' ... '
Next 
```

如果你坚持一个`Streamreader`：

```
Using sr = New StreamReader(path)
    While Not sr.EndOfStream
        Dim line = sr.ReadLine()
        If Not String.IsNullOrEmpty(line) Then
            ' ... '
        End If
    End While
End Using 
```

# sql-server - tsqlt 错误处理胜过存储过程（单元）错误处理程序

> ID：12600488
> 
> 赞同：5
> 
> 时间：2012-09-26T11:16:50.100
> 
> 标签：sql-server, unit-testing, tsqlt

当尝试在存储过程中验证用户提供的 GUID 时，使用了一种简单的方法；将用户输入作为 CHAR(36)，然后在 TRY CATCH 中将其显式转换为 UNIQUEIDENTIFIER。CATCH 然后使用 RAISERROR 使用自定义错误描述冒泡错误。

手动运行存储过程，一切都按预期执行，并引发错误。

创建一个 tSQLt 测试以调用该单元（具有 GUID 验证的过程）并处理输出的错误并与预期的错误进行比较，不断失败并出现事务错误；tSQLt 检测到错误并在 tSQLt 框架内处理。

这向我表明，tSQLt 正在处理 CAST 到不同数据类型的失败的严重性，并且它阻止了存储过程中的 TRY/CATCH 来处理它。就像嵌套过程有时会忽略子过程中的 TRY/CATCH 并冒泡到父过程；例如，如果子进程。引用了一个不存在的表。

有没有人有类似的问题？只是为了验证我目前的思路。

我已经删除了测试并且它正在其他地方进行测试，但这给我的数据库单元测试造成了一个“漏洞”。

最后，我想我应该提一下，我知道我可以对提供的 CHAR 参数执行不同的验证，而不是 CAST，并以这种方式引发错误，但这是 tSQLt 查询而不是 tSQL 查询。

编辑

代码示例：

@sGUID 是一个 CHAR(36) 并且是传递给过程的参数。

```
BEGIN TRY
    SELECT CAST(@sGUID AS UNIQUEIDENTIFIER)
END TRY 
BEGIN CATCH
    RAISERROR('Invalid GUID format',16,1)
END CATCH 
```

SELECT 行从不触发 CATCH tSQLt 似乎事先干预并引发 ROLLBACK 事务错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T18:09:28.893

当您调用 RAISEERROR() 时，您正在终止 tSQLt 正在运行的事务 --> 因此您看到的事务错误。

为了单元测试的目的而改进这一点，您可能考虑的一个选项是将 RAISEERROR() 语句替换为对*仅*包含 RAISERROR() 的自定义存储过程的调用。这样，您可以单独对该存储过程进行单元测试。

```
BEGIN TRY
    SELECT CAST(@sGUID AS UNIQUEIDENTIFIER)
END TRY 
BEGIN CATCH
    EXEC dbo.customprocedure
    --RAISERROR('Invalid GUID format',16,1)
END CATCH 
```

# php - 服务器端分页：昂贵查询的总行数？

> ID：12600490
> 
> 赞同：0
> 
> 时间：2012-09-26T11:17:04.187
> 
> 标签：php, oracle10g, pagination, rowcount

我有一个使用服务器端分页的简单查询。问题是 WHERE 子句调用昂贵的函数，而函数参数是用户输入，例如。用户正在搜索的内容。

```
SELECT 
  * 
FROM 
  ( SELECT /*+ FIRST_ROWS(numberOfRows) */ 
      query.*, 
      ROWNUM rn FROM 
        (SELECT            
            myColumns 
          FROM 
            myTable 
            WHERE expensiveFunction(:userInput)=1  
          ORDER BY id ASC
        ) query
    )
WHERE rn >= :startIndex 
AND ROWNUM <= :numberOfRows 
```

假设 numberOfRows 很小，这很有效并且很快。但是我也想知道查询的总行数。根据用户输入和数据库大小，查询可能需要几分钟。我目前的方法是缓存这个值，但这仍然意味着用户需要等待几分钟才能看到第一个结果。

结果应该显示在 Jquery 数据表插件中，这对服务器端分页之类的事情有很大帮助。但是，它需要服务器返回总记录的值才能正确显示分页控件。

最好的方法是什么？（注：PHP）

我想如果立即用假的（估计会更好）行数返回第一页。加载页面后，对确定查询总行数的方法进行 ajax 调用（如果在此期间用户页面会发生什么情况？），然后更新伪造/估计的总行数。

但是我不知道如何进行估算。我用 SAMPLE (0.1) 尝试了 count(*) * 1000，但无论出于何种原因，它实际上比完整计数查询花费的时间更长。也只是返回一个假/随机值似乎也有点 hacky。它需要大于 1 个页面大小，以便启用“下一步”按钮。

其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:57:12.080

正如我在评论中所说，一种方法是使用“无数”方法。修改客户端脚本，使`Next`按钮始终处于启用状态并获取行，直到没有行，然后禁用该`Next`按钮。您始终可以添加一条通知消息，说明没有更多行，这样会更加用户友好。

考虑到您期望有大量记录，我怀疑用户是否会对所有结果进行分页。

另一种方法是安排一个 cron 作业，该作业将在后台对记录进行计数并将结果存储在一个名为`totals`. 作业的运行间隔应根据插入/删除的频率设置。

然后在前端，只需使用之前存储在`totals`. 它应该对数量进行适当的近似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:40:46.747

取决于您的数据库引擎。在 mysql 中，解决方案如下所示：

```
 mysql> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name
        -> WHERE id > 100 LIMIT 10;
    mysql> SELECT FOUND_ROWS(); 
```

基本上，您在您的选择（SQL_CALC_FOUND_ROWS）上添加另一个属性，它告诉 mysql 在执行查询时对行进行计数，就好像限制子句不存在一样，而 FOUND_ROWS 实际上检索该数字。

对于 oracle，请参阅这篇文章： [如何在 oracle 中执行此查询](https://stackoverflow.com/questions/3389754/how-can-i-perform-this-query-in-oracle)

其他 DBMS 可能有类似的东西，但我不知道。

# sql - 如何制作一个以用户定义的表类型为参数并在sql中返回相同的函数？

> ID：12600496
> 
> 赞同：5
> 
> 时间：2012-09-26T11:17:23.517
> 
> 标签：sql, sql-server, sql-server-2008, function, user-defined-types

实际上我在 sql server 2008 中创建了一个用户定义的表类型。结构如下所示。

我将它作为函数中的参数传递，并且该函数也返回该类型的表类型。我正面临这个问题，而我在函数中声明了该类型的变量，在其中插入了一些数据并返回了该参数。

表类型结构为：

```
Create Type OfferWithSubscription  as  Table                                        
   (                                        
     OfferID int, 
     OfferUserID  int,                                    
     OfferImage  varchar(200),                          
     OfferExactPrice Decimal(18,2),                                
     OfferContent varchar(max),
     OfferTitle varchar(100),                                    
     StartDate datetime,                                    
     EndDate datetime,                                    
     StartTime datetime,                                    
     StopTime datetime,                            
     ShowToUser bit,    
     SubID  int,                    
     SubLevel varchar(100)
   ) 
```

我想要创建的功能是：

```
CREATE FUNCTION FN_ShowOffer
(   
    @Gold int,
    @Silver int,
    @Bronze int,
    @table dbo.OfferWithSubscription Readonly )
RETURNS dbo.OfferWithSubscription 
AS
BEGIN

DECLARE @ReturnTable AS dbo.OfferWithSubscription;
Declare @Case as varchar(20)
         if(@Gold=0 and @Silver=1 and @Bronze=0 )
            begin
            set @Case='1S'
            end
           if(@Case='1S')
           Begin
                   insert into @ReturnTable                                    
                   select OfferID, OfferUserID, OfferImage, 
                     OfferExactPrice, OfferContent,
                     OfferTitle, StartDate, EndDate, 
                     StartTime, StopTime, ShowToUser,
                     SubID, SubLevel
                   from @table
                   where SubID=4 
           End

RETURN (

@ReturnTable
)
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:21:48.177

您只需要像下面这样扩展类型。
仅供参考 - [T-SQL 函数可以返回用户定义的表类型吗？](https://stackoverflow.com/questions/2501324/can-t-sql-function-return-user-defined-table-type)

```
CREATE FUNCTION FN_ShowOffer
(   
    @Gold int,
    @Silver int,
    @Bronze int,
    @table dbo.OfferWithSubscription Readonly )
RETURNS @ReturnTable Table                                        
   (                                        
     OfferID int, 
     OfferUserID  int,                                    
     OfferImage  varchar(200),                          
     OfferExactPrice Decimal(18,2),                                
     OfferContent varchar(max),
     OfferTitle varchar(100),                                    
     StartDate datetime,                                    
     EndDate datetime,                                    
     StartTime datetime,                                    
     StopTime datetime,                            
     ShowToUser bit,    
     SubID  int,                    
     SubLevel varchar(100)
   )
AS
BEGIN
Declare @Case as varchar(20)
         if(@Gold=0 and @Silver=1 and @Bronze=0 )
            begin
            set @Case='1S'
            end
           if(@Case='1S')
           Begin
           insert into @ReturnTable                                    
             select OfferID,OfferUserID,OfferImage,OfferExactPrice,OfferContent,OfferTitle,
             StartDate,EndDate,StartTime,StopTime,ShowToUser,SubID,SubLevel from @table where SubID=4 
           End

RETURN
END 
```

为了进一步澄清，这完全兼容并可分配给该表类型的变量，例如[SQL Fiddle](http://sqlfiddle.com/#!3/de117/2/0)

```
declare @t OfferWithSubscription
insert @t
select * from fn_showoffer(1,2,3,@t) 
```

# active-directory - ldap 搜索结果参考消息

> ID：12600497
> 
> 赞同：1
> 
> 时间：2012-09-26T11:17:26.183
> 
> 标签：active-directory, ldap, nested

我正在尝试进行嵌套组过滤器（即尝试检索用户所属的多个组）。我能够获得该嵌套用户所属的多个条目。但是，最后我也看到了一条 ldapsearchresref 消息。

我的疑问是：假设作为多条目搜索的一部分，您可以假设 ldapsearchresref 消息作为搜索查询结束的指示符，这是一个有效的假设吗（即，您可以安全地假设对于每个返回多个搜索条目的搜索，您将始终收到 ldapsearchresref 指示您的搜索查询结果结束）？

我用来检索多个条目的过滤器是：

```
(&(objectclass=*)(member:1.2.840.113556.1.4.1941:=cn=sam,dc=aaaldap,dc=com)) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:50:49.967

您可以收到对几乎任何 LDAP 请求的引用。

如果只有一个 LDAP 服务器和一个分区，那么您不应该收到推荐。

您不能假设每次搜索请求都会有推荐人。

对于每个搜索请求，您可以期待以下内容：http: [//ldapwiki.willeke.com/wiki/Search%20Responses](http://ldapwiki.willeke.com/wiki/Search%20Responses)

# google-maps - 如何在我的网站上的谷歌地图中显示数据库数据？

> ID：12600499
> 
> 赞同：0
> 
> 时间：2012-09-26T11:17:34.423
> 
> 标签：google-maps, google-maps-api-3

我有一些动态数据。我想在谷歌地图位置位置动态调用这些数据。当用户单击位置时，用户应该能够看到特定位置的详细信息和照片。用户应该能够根据他的要求过滤数据并查看过滤后的位置。

请让我知道我应该使用哪种类型的 API。我进行了很多搜索，发现了 Google maps api、google geo、google places api、fusiontables、电子表格、xml、kml、javascript、webservice 以及更多技术和服务。

我正在研究 asp.net 站点和 sql 数据库，有什么方法可以在同一个平台上工作。否则，请给我适当且简单的动态方式来使用该服务。

我想要以下站点中使用的确切地图功能：http: [//inspire.makemytrip.com/inspire/](http://inspire.makemytrip.com/inspire/)

谢谢你

**PS：为这篇文章投反对票的人应该首先注意，谷歌地图 API 3 官方小组已经给我发邮件在这里添加问题，所以如果你不想回答至少不要反对。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:39:58.403

我建议使用带有 PHP/MySQL 的 Google Maps API V3，因为有很多可用的教程。

如果你坚持使用 ASP[这里](http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET)是一个开始。

# facebook - 我们可以从基本 url 中加载的 iframe 将 url 从 https 更改为 http 吗？

> ID：12600501
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:17:41.457
> 
> 标签：facebook, mod-rewrite, iframe, ssl, https

当Facebook 应用程序页面从安全超文本协议 ( **https** )) Facebook 帐户转到非安全( **http ) Facebook 应用程序页面时，会出现****SSL 错误**，这是由于 Facebook 应用程序托管服务器中缺少 SSL 证书而发生的。我正在尝试将基本 url 从更改为以避免 SSL 错误。****`https``http`****

 ****是否可以将基本网址从 iframe 更改`https`为`http`iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:53:33.710

> 是否可以将基本网址从 https 更改为 iframe 的 http？

即使是这样，这也不能解决您的问题——因为如果用户通过 HTTPS 浏览 Facebook，iframe 内容将首先通过 HTTPS 提取——并且由于您的应用程序不支持 HTTPS，因此这已经失败了。因此，在这种情况下，您甚至*不会*加载应用程序中的代码，更不用说执行了。

您必须为您的应用程序域获取 SSL 证书。****

# java - 在方法中保存数组的值

> ID：12600516
> 
> 赞同：2
> 
> 时间：2012-09-26T11:18:33.020
> 
> 标签：java, arrays, methods

我只是发布伪代码，希望您能理解：

> > 导入 java.util*.;
> 
> 主要方法{
> 
> > 子方法1（）；

```
submethod1() {

 Screen input = new Scanner(System.in);
 int buy = input.nextInt();

  if( buy != 0) {
     submethod2();
    }

 submethod2() {
 Screen input = new Scanner(System.in);
 int[][]grid = new int [5][6]
 int row = input.nextInt();
 int col = input.nextint();
 grid[row][col] = 1; 
```

假设我为 row 输入了 1，这次为 col 输入了 1。然后`grid[1][1] = 1`。我想保存 的值，`grid[1][1]`以便下次输入第 2 行第 2 列时，我将拥有：

```
 grid[1][1] = 1;
 grid[2][2] = 1; and so on for whatever row-col combination I type. 
```

最后我想回到 submethod1，我想让 submethod1 理解 grid[1][1] = 1 并且 grid[2][2] 也有值 1；等等....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:31:37.947

Below I am assuming that you are asking about saving value of grid in an instance of program and not between various instances of program calls. if you want to save value of grid between varrious program calls than you will have to store value of grid in some file etc.

instead of creating the array grid inside submethod2(), create it as a class variable and submethod1(), submethod2() as member functions.

create an object in main method and call submethod1() on the object

something like

```
class ABC
{
int[][] grid = new int[5][6];

 submethod1()
{
...
}

 submethod2()
{
 ...
 }

public static void main(String args[])
{
  ABC abc = new ABC();
  abc.submethod1();
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:45:57.237

处理此类问题的最佳方法是使用面向对象的方法。请记住，这就是我们使用 Java 的原因。

创建一个`GridItem`具有三个属性`row`, `column`,的类`value`。当您存储一些值时，创建对象`GridItem`并将其存储在全局列表中。然后，您可以在任何函数中对其进行迭代并访问存储了哪些值。

```
 class GridItem
    {
        int row;
        int column;
        int value;

        public GridItem(int row, int column, int value)
        {
            this.row = row;
            this.column = column;
            this.value = value;
        }
        //Provide getters only
    }
    ArrayList<GridItem>items = new ArrayList<GridItem>();
    items.add(new GridItem(1, 1, 1));// 1 row 1 col 1 value
    items.add(new GridItem(2, 2, 2));// 2 row 2 col 2 value

    items.get(0).getRow()// get first 
```

还有其他几种解决方案。例如，维护一个全局数组，然后扩展它。创建网格列表等，但它们都很复杂并且做得比必要的多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:25:42.027

这是一个范围界定问题。本质上，您每次调用时都会创建一个新`int[][]`变量。要么将其存储为类变量，要么将其传入然后从中返回并自己手动更新（我不推荐这种方法）`grid``submethod2()``submethod2()`

如果没有更多上下文，很难推荐如何将问题分解为[objects](http://en.wikipedia.org/wiki/Object-oriented_programming)，但一种解决方案可能如下所示：

```
import java.util*.;

public class MainClass {
    private int[][] grid;

    public static void main(String[] args) {
        submethod1();
    }

    private void submethod1() {
        grid = new int[5][6];
        Screen input = new Scanner(System.in);
        int buy = input.nextInt();

        if( buy != 0) {
            submethod2();
        }
    }

    private void submethod2() {
        Screen input = new Scanner(System.in);
        int row = input.nextInt();
        int col = input.nextint();
        grid[row][col] = 1;
    }
} 
```

# mysql - phpUnit：mysql 日志不显示，使用 Symfony 1

> ID：12600522
> 
> 赞同：1
> 
> 时间：2012-09-26T11:18:54.060
> 
> 标签：mysql, logging, symfony1, yaml

我正在使用带有以下 settings.yml 的 Symfony 1.1：

```
test:
  .settings:
    error_reporting:        <?php echo (E_ALL | E_STRICT)."\n" ?>
    web_debug:              true
    cache:                  true
    no_script_name:         false
    etag:                   false
    logging_enabled:        true 
```

但是当我执行 phpunit 来运行我的测试时，没有任何内容记录到 log/backend_test.log 中，只有一行是：

> 9 月 26 日 11:27:47 symfony [info] {sfPatternRouting} 匹配路由 "homepage" (/) for / with parameters array ('module' => 'default', 'action' => 'index',)

我确实执行了一个 sql，但它现在出现了。

我的 logging.yml 看起来像这样：

```
test:
  enabled:  on
  level:    debug
  rotate:   off
  period:   7
  history:  10
  purge:    on 
```

# mysql - 访问mysql中最后插入的行

> ID：12600527
> 
> 赞同：12
> 
> 时间：2012-09-26T11:18:58.137
> 
> 标签：mysql, sql, insert

在我的数据库服务器上，我将数据插入到具有自动增量字段的表中，例如“id”。现在我想在后续步骤中使用最后插入的“id”的值。我可以使用这个：-

```
 select * from table_name order by id desc limit 1; 
```

但是这里的问题是，它是一个服务器，并且可能会发生更多的插入，并且可能会出现我尝试使用我提到的查询检索数据并获得不同的 id 的情况，即。在我的插入和选择之间可能有一些其他插入，我不会得到我插入的值。有什么办法可以解决这个问题。？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T11:23:53.307

用这个

```
mysql_insert_id(&mysql); 
```

因为它的基本结构是

```
mysql_insert_id ([ resource $link_identifier = NULL ] ) 
```

检索上一个查询（通常是 INSERT）为 AUTO_INCREMENT 列生成的 ID。

或者在mysql中使用

```
 SELECT LAST_INSERT_ID(); 
```

**这是参考链接**

[http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T11:28:53.287

`LAST_INSERT_ID()`插入后立即调用函数并将 id 保存在某处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T11:32:38.500

使用这个**mysql_insert_id()**

它返回从先前的 INSERT 操作生成的 AUTO_INCREMENT ID。

如果上一个操作没有生成 AUTO_INCREMENT ID，则此函数返回 0，或者在 MySQL 连接失败时返回 FALSE。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T11:25:48.550

尝试这个

```
SELECT LAST_INSERT_ID(colid) From tablename; 
```

这是[链接](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T05:51:31.440

如果在插入后立即调用 LAST_INSERT_ID() 函数，则可以获取 id，然后可以使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-12T06:00:16.347

对于任何最后插入的记录，都将通过**mysql_insert_id()** 如果您的表包含任何 AUTO_INCREMENT 列，它将返回该值。

```
mysql_query("INSERT INTO test(emsg,etime) values ('inserted',now())");
printf("Last inserted record has id %d\n", mysql_insert_id());
$last_id=mysql_insert_id();
echo $last_id;
?> 
```

# bash - 男人grep | grep "color" 没有结果

> ID：12600533
> 
> 赞同：2
> 
> 时间：2012-09-26T11:19:21.503
> 
> 标签：bash, unix, grep, command

当我尝试使用此命令在 grep 手册中搜索颜色选项时，怎么会这样？

```
man grep | grep "color" 
```

我没有得到任何结果，但是当我跑步时

```
man grep 
```

男人输出这个[编辑]

```
 --colour=[when, --color=[when]]
         Mark up the matching text with the expression stored in GREP_COLOR environment variable.  The possible values of when can be `never', `always' or `auto'. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:37:46.287

在 grepping 之前尝试通过管道传递手册页`col -b`以清理任何特殊字符。

例如：

```
man grep | col -b | grep "color" 
```

或者，指定`col -b`为您的手册页：

```
man -P "col -b" grep | grep "color" 
```

您甚至可以在您的 shell 配置文件中设置 MANPAGER 以使其更加永久。

```
export MANPAGER='col -b | less' 
```

但是，这意味着您在查看手册页时将失去漂亮的颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:26:57.967

“man”的输出包含转义序列（尝试*man grep|cat -vT*），产生单词“color”的转义序列中没有 ASCII 序列“color”：

```
 -^H--^H-c^Hco^Hol^Hlo^Hou^Hur^Hr[^H[=^H=_^HW_^HH_^HE_^HN]_^H, -^H--^H-c^Hco^Hol^Hlo^Hor^Hr[^H[=^H=_^HW_^HH_^HE_^HN]
          Surround  the matching string with the marker find in G^HGR^HRE^HEP^HP_^H_C^HCO^HOL^HLO^HOR^HR
          environment variable. WHEN may be 'never', 'always', or 'auto' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:42:03.010

```
man grep | grep -E 'color' 
```

它完美无缺！

# javascript - 在 Metro Style Apps 的 bing 地图中设置文化信息

> ID：12600534
> 
> 赞同：0
> 
> 时间：2012-09-26T11:19:24.450
> 
> 标签：javascript, windows-8, bing-maps

我目前正在使用 Windows 8 Metro Style Apps 中的 Bing 地图。

一切正常，除了该站点始终使用不同的语言这一事实​​。现在我想设置文化信息来修复它，但是当我在谷歌中搜索它时，我没有找到可以工作的东西。

我使用 javascript 作为编程语言。

有人知道我如何设置文化信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:16:13.920

我遇到了和你一样的问题，如果你希望 bing 地图为你提供你想要的文化数据，你必须在 REST 请求中使用参数文化来精确它：culture=culture_code。

看这个例子：

"http://dev.virtualearth.net/REST/V1/Routes?wp.0=" + me.location.latitude + "," + me.location.longitude + "&wp.1=" + latitude + ", " + 经度 + "&routePathOutput=Points&output=json& **culture=fr-FR** &key=" + 凭证

回复结果必须是法语

# audio - 使用 MonoTouch 播放多声道声音

> ID：12600535
> 
> 赞同：1
> 
> 时间：2012-09-26T11:19:31.563
> 
> 标签：audio, xamarin.ios, avaudioplayer

我有一个 MonoTouch AVAudioPLayer，我想在事件发生时播放它。

我的代码如下所示：

```
...
AVAudioPlayer player = AVAudioPlayer.FromUrl(url);
...

public void handleEvent(object sender, eventArgs e)
{
    player.Play();
} 
```

但是如果在播放器播放完声音之前事件再次发生，它不会再次触发，等到声音完成后再接受另一个`.Play()`命令。

不管它是否已经在播放，如何才能让声音响起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:54:14.577

`AVAudioPlayer`不是音效的好选择——它更多的是用于制作音乐播放器。（它还会暂停任何在后台播放的音乐，如 iTunes 或 Pandora）

尝试使用系统声音，请参阅此处：[如何使用 MonoTouch 在 iPhone 上播放声音？](https://stackoverflow.com/questions/1468393/how-can-i-play-a-sound-on-the-iphone-using-monotouch)

# c# - 在哪里可以看到标准库 WPF 控件库？

> ID：12600540
> 
> 赞同：9
> 
> 时间：2012-09-26T11:19:43.470
> 
> 标签：c#, wpf

在哪里可以看到 WPF 控件库？标准库中必须至少有三十个，我想看看它们都是什么样子/做什么。

谷歌自动完成告诉我这是一个非常流行的搜索，但我找不到蹲！

为了比较，这里是GNOME 文档中的[GTK 小部件库。](http://developer.gnome.org/gtk3/stable/ch03.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:24:48.927

这个网站上有很多 wpf 控件的描述/截图：http: [//www.wpftutorial.net/Controls.html](http://www.wpftutorial.net/Controls.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:55:46.703

关键是 WPF 控件可扩展地重新设置样式，因此它们不必看起来与最初设计的相同。例如，从 ListBox 构建 TreeView 或更改 TextBox 非常容易，因此它会自动建议并且看起来更像 Combo Box。

此外，这些控件也并非都具有内在的风格。ItemsControl 提供了 ListBox 的大部分功能，但看起来完全相同。实际上，StackPanel (Orientation=Vertical) 看起来也完全相同（对于少量项目），而 ScrollViewer 对于大量项目看起来也一样。

老实说，我并不想感到尴尬，只是简单地指出，控件通常定义功能，而样式定义外观。

# java - linux命令未在Java应用程序中运行

> ID：12600545
> 
> 赞同：1
> 
> 时间：2012-09-26T11:19:51.380
> 
> 标签：java, linux, unix

> **可能重复：**
> [如何在 Java 中使用管道符号](https://stackoverflow.com/questions/7226538/how-to-use-pipe-symbol-in-java)

嗨，我想通过我的 Java 应用程序运行一些 linux 命令。当我运行以下命令时，它既不会引发异常也不会给出输出。但是当我从 linux 命令提示符运行时，它会正确执行。当我通过 java 应用程序给出“ls -al”命令时，它也可以正常工作。那么如何让它发挥作用呢？

以下是命令。

```
String cmd = "dir | grep gpc | grep -v 25"; 
```

以下是我的java程序

```
public class Test {

    public static void main(String[] args) {

        //String cmd = "ls -al";

        String cmd ="dir | grep gpc | grep -v 25" ;

        String property = System.getProperty("user.dir");
        System.out.println("current directory:::: "+property);
        String cmd =property+File.separator+"test1.sh" ;*/

        //String cmd ="ls -al" ;
        //String cmd = args[0];

        String cmd = dir | grep gpc | grep -v 25;
        System.out.println("executing command is:: "+cmd);
        //String cmd ="dir | grep gpc | grep -v 25" ;
        Runtime run = Runtime.getRuntime();
        Process pr = null;
        try {
            pr = run.exec(cmd);
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            pr.waitFor();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        BufferedReader buf = new BufferedReader(new InputStreamReader(
                pr.getInputStream()));
        String line = "";
        try {
            while ((line = buf.readLine()) != null) {

                System.out.println(line);

            }
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:22:43.657

前置它`sh -c`应该可以解决您的问题。管道是壳特征。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:39:18.073

我得到了答案。需要以下列方式给予。

```
String[] cmd = {
"/bin/sh",
"-c",
"dir | grep gpc | grep -v 25"
};

Process p = Runtime.getRuntime().exec(cmd); 
```

# javascript - 使用 javascript innerHTML 删除以前的文本并显示新文本

> ID：12600548
> 
> 赞同：1
> 
> 时间：2012-09-26T11:19:56.727
> 
> 标签：javascript, innerhtml

我正在接受用户的输入，然后显示匹配的结果。因此，如果用户键入“a”，则会出现以下文本： Football Baseball Fast 如果用户在 a ('as') 后键入 s。显示以下文本 Football Baseball Fast Baseball Fast。但是当用户键入 as 时，我想删除前 3 个结果。

```
// JavaScript Document

s1= new String()
s2= new String()
var myArray = new Array();

myArray[0] = "Football";
myArray[1] = "Baseball";
myArray[2] = "Cricket";
myArray[3] = "Fast";

function test()  // called on onkeyup()
{
 s1 = document.getElementById('filter').value;
 var myRegex = new RegExp((s1),"ig");
 arraysearch(myRegex);
 }

 function arraysearch(myRegex)
{

for(i=0; i<myArray.length; i++)
{ 
if (myArray[i].match(myRegex))
{
    document.getElementById('placeholder').innerHTML += myArray[i] + "<br/>";
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:25:13.993

作为第一行添加`document.getElementById('placeholder').innerHTML="";`到您的函数`arraysearch(myRegex)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:23:41.060

您所做的只是将新列表添加到旧列表中，而不是替换它。尝试用这个替换最后一个 for 循环：

```
var newHtml;
for(i=0; i<myArray.length; i++)
{
 if (myArray[i].match(myRegex))
 {
     newHtml += myArray[i] + "<br/>";
 }
}
document.getElementById('placeholder').innerHTML = newHtml; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:32:27.073

您需要先重置占位符 innerHTML。这是一个工作示例：http: [//jsfiddle.net/HW6fF/](http://jsfiddle.net/HW6fF/)

```
thePlaceholder = document.getElementById('placeholder');
function arraysearch(myRegex) {
   thePlaceholder.innerHTML = "";
   for(i=0; i<myArray.length; i++) { 
      if (myArray[i].match(myRegex)) {
         thePlaceholder.innerHTML += myArray[i] + "<br/>";
      }
   }
}​ 
```

# sharepoint - 如何仅针对特定用户或案例在 sharepoint 中隐藏 webpart

> ID：12600552
> 
> 赞同：0
> 
> 时间：2012-09-26T11:20:11.710
> 
> 标签：sharepoint, sharepoint-2010, web-parts, sharepoint-api

我有 PublishingLayoutPage 并且取决于查询参数，我应该隐藏一些 webpart。

但我现在不知道如何做到这一点。因为如果我正确理解问题，SPLimitedWebPartManager 将为所有用户隐藏 webpart！

```
 using (SPLimitedWebPartManager mgr = file.GetLimitedWebPartManager(PersonalizationScope.Shared))
                        {
                            try
                            {
                                SPLimitedWebPartCollection webparts = mgr.WebParts;
                                foreach (System.Web.UI.WebControls.WebParts.WebPart wp in webparts)
                                {
                                    if (wp is MyWebpart && !isShowWebpart)
                                    {
wp.Hidden=true;
                                        mgr.SaveChanges(wp );
                                    }
                                } 
```

如何隐藏 webpart 并且不允许仅针对页面上的特定情况呈现内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:39:18.757

听起来你可以把它放在你的 Load/PreRender/任何合适的地方：

```
 List<string> webPartTitlesToHide = new List<string>();
    webPartTitlesToHide.Add("Long Title");
    webPartTitlesToHide.Add("Long Content");
    webPartTitlesToHide.Add("Long Footer");

    if (Request["view"] == "short")
    {
        WebPartManager wpm = WebPartManager.GetCurrentWebPartManager(this);
        foreach (WebPart wp in wpm.WebParts)
        {
            if (webPartTitlesToHide.Contains(wp.Title))
            { 
                wpm.CloseWebPart(wp);
            }
        }
    } 
```

显然，您可能有更好的方法来选择要隐藏的 Web 部件，但这只是一个示例。

# ios - 移除 ios 中 KVO 中的 Observer 问题

> ID：12600555
> 
> 赞同：0
> 
> 时间：2012-09-26T11:20:26.323
> 
> 标签：ios, ios5, key-value-observing

我有一个表，里面装满了我正在观察的对象数组，当我删除所有对象时，我删除了观察者，但问题是当我删除数组中的所有对象然后再次开始添加它时到阵列我得到 removeObserver 问题。

**我对我的对象有强烈的参考**

我以这种方式添加观察者

```
[self.object addObserver:self forKeyPath:kTaskCompletedKey options:NSKeyValueObservingOptionNew context:&kTaskObservationContext]; 
```

我正在以这种方式删除它

```
- (void)dealloc;
{
    [self.object removeObserver:self forKeyPath:kTaskCompletedKey context:&kTaskObservationContext];    
} 
```

以及当我使用 delete 方法删除表中的对象时

我尝试使用 NSKVODeallocateBreak 设置断点，我观察到它停止了该行`@sythesize object = m_object;`，我不明白这意味着什么所以，请朋友们帮帮我

问候兰吉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:48:50.957

您必须在删除对象之前删除观察。这样做之后，您可以发送一些调试消息，让您记录当前观察者 - 发送它然后验证没有观察者。然后您可以安全地释放对象。

编辑：如果您正在观察的对象，您可以在其释放的日志中添加日志 - 它最好报告没有观察者。因此，将其添加到您观察到的对象的 dealloc 中：

```
NSLog(@"Dealloc of %@ with observationInfo: %@", self, [self observationInfo]); 
```

在您的控制器中，就在您释放观察到的对象之前（我假设是通过从数组中删除它来完成的），使用此日志：

```
id foo = [myArray objectAtIndex:whatever];
NSLog(@"Release %@ with observationInfo: %@", foo, [foo observationInfo]); 
```

如果你发现你正在释放一个你仍在观察的对象，那就是一个问题。如果一个对象被释放并且它仍然被观察到，那也是一个问题。

编辑：在将对象添加到数组之前，测试它是否已经存在。如果不是，那么观察它。如果是，那么你知道你已经在观察它了。

# dynamics-crm - 如何为联系人和潜在客户创建同时获取 XML

> ID：12600559
> 
> 赞同：0
> 
> 时间：2012-09-26T11:20:44.200
> 
> 标签：dynamics-crm

我正在使用以下 XML 来获取所有联系人。

```
<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'>
  <entity name='contact'>
    <attribute name='fullname' />
    <attribute name='emailaddress1' />
    <order attribute='fullname' descending='false' />
    <link-entity name='listmember' from='entityid' to='contactid' visible='false' intersect='true'>
      <link-entity name='list' from='listid' to='listid' alias='aa'>
      <filter type='and'>
        <condition attribute='listname' operator='eq' value='myList' />
      </filter>
      </link-entity>
    </link-entity>
  </entity>
</fetch> 
```

但是，我希望 CRM 也能产生潜在客户（最好在同一个列表中）。是否可行，如果可行，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:38:02.310

据我所知，这是不可能的。

Mscrm 将为单个实体返回零个或多个记录，并从与单个调用中的实体链接的实体返回零个或多个记录。

例如，您上面的 fetch 获取联系人并列出链接到联系人的成员。

您可以在一个呼叫中检索与您的联系人链接的潜在客户，但如果您想要所有潜在客户，则必须执行单独的呼叫。

* * *

**编辑：**

“（a）同一部分中的两个不同`<entity>`部分`<fetch>`” - 这不起作用，因为它的架构无效。

[FetchXML 架构](http://msdn.microsoft.com/en-us/library/bb930489.aspx)

> 实体元素 - 用于指定提取的根元素，在给定的提取中只允许一个根实体，所有其他根实体都依赖于该实体并标记为链接实体

“（b）在联系人和潜在客户都继承自的超类上” - 这不起作用，因为据我所知它不存在。尽管存在可用于表示代码中所有记录的单个对象`Entity`，但我认为这不允许同时查询多个实体。

# sql - 调用返回带有日期的表的函数

> ID：12600561
> 
> 赞同：2
> 
> 时间：2012-09-26T11:20:50.253
> 
> 标签：sql, oracle, function, date

我的功能有问题。我需要一张包含月份日期、日期名称和该月份工作日数量的表格。我已经在这里找到了一些帮助并对其进行了调整以适应我的需要，但是我无法运行/编译该函数这是我目前所拥有的：

```
create or replace TYPE DATE_ROW AS OBJECT
(
  MyDate DATE,
  Dayname VARCHAR2(12),
  Amount Integer
 )

create or replace TYPE DATE_TABLE as table of DATE_ROW

create or replace FUNCTION myfinaldays (mydate date)
       RETURN DATE_TABLE
       PIPELINED
    IS
       V_MYDATE          DATE;
       V_DAYNAME   VARCHAR2(12);
       V_AMOUNT           NUMBER;
BEGIN
    with this_month as (
        select trunc(to_date('mydate'), 'mm')+level-1 dy
          from dual 
       connect by level < (trunc(add_months(to_date('mydate'),1), 'mm')- trunc(to_date('mydate'), 'mm'))+1
    )
    FOR i IN 0 .. (select count(*) from this_month) LOOP
        select (dy) Daydate,
               to_char(dy, 'day'), Dayname,
              ( select count(*)
                  from this_month 
                 where  to_char(dy, 'dy') not in ('sat', 'sun')
               ) Amount
          from this_month
         where to_char(dy, 'dy') not in ('sat', 'sun')
           and EXTRACT(day from to_date(dy)) = i;

       pipe row (date_row(v_mydate,v_dayname, v_amount));
   END LOOP;
   RETURN;
   END; 
```

函数调用将类似于：

```
select * from date_table(cast(myfinaldays('01.02.12'))); 
```

我只能给出一个日期作为参数。

我希望有人可以在这里帮助我，因为这让我慢慢发疯。任何想法、例子或想法将不胜感激。

**更新：**

好的，这是 mybe 的更新，对我的问题有一些更有用的信息：

这是有效的，我的目标是将它放在一个函数中，以便我可以使用 1 个参数调用它：

```
 with this_month as (  
    select trunc(to_date('01.02.12'), 'mm')+level-1 dy
    from   dual 
    connect by level < (trunc(add_months(to_date('01.02.12'),1), 'mm')- trunc(to_date('01.02.12'), 'mm'))+1
    )
    select (dy) mydate, (select count(*) from this_month) Days_in_month
    ,      to_char(dy, 'day') Dayname
    ,     ( select count(*) from this_month where  to_char(dy, 'dy') not in ('sat', 'sun') ) Amount
    from   this_month
    where  to_char(dy, 'dy') not in ('sat', 'sun') ; 
```

对于我添加的循环：'and EXTRACT(day from to_date(dy))=i' 最后。

我添加了一个日期，这样你就可以看到我最后需要什么。如果我改写 mydate 并在开发人员中运行它后输入 01.02.12 作为参数，它仍然可以工作。

编译时出现的错误：-错误（10,1）：PL/SQL：SQL 语句被忽略

```
- Error(15,5): PL/SQL: ORA-00928: Keyword SELECT missing

- Error(22,8): PLS-00113: END-Definer 'LOOP' must complete 'myfinaldays' in row 1, comlumn 10 

- Error(23,4): PLS-00103: Found the symbol "RETURN" 
```

由于我的 Oracle 没有运行英文，因此错误已被翻译，所以我希望猜对了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:57:45.373

你在这里有很多问题。

*   您不能`select`直接使用 a `for i in 1..x`（它应该是 1，而不是 0），您必须选择一个局部变量并将其用作最终值。
*   您不能用作循环`with`的输入；`for`但你可以在那里使用光标，如下所示。
*   循环内的选择 get no-data-found when`i`表示星期六或星期日（在本例中为第四个，假设您在 2 月运行它）。
*   获取每一行的所有非周末行的计数是低效的，尽管对于如此少量的数据并不重要。
*   你指的是`to_date('mydate')`；mydate 已经是一个日期，而 'mydate' 是一个与它无关的字符串。

也许还有其他一些事情，比如假设日期格式和语言环境，因为`to_char(x, 'dy')`不会返回`sat`或`sun`无处不在，但我会假设这将以受限的方式使用，所以你不会太在意。

从试图找出您期望的输出，我认为这将起作用（使用修改后的类型将`days_in_month`您添加到原始问题中）：

```
create or replace type date_row as object
(
    mydate DATE,
    dayname VARCHAR2(12),
    days_in_month NUMBER,
    amount NUMBER
)
/

create or replace type date_table as table of date_row
/

create or replace function myfinaldays (mydate date)
return date_table pipelined deterministic is
begin
    for r in (
        select *
        from (
            select dy as daydate,
                to_char(dy, 'day') as dayname,
                count(*) over () as days_in_month,
                sum(case when to_char(dy, 'dy') in ('sat', 'sun')
                    then 0 else 1 end) over () as amount
            from (
                select trunc(mydate, 'mm')+level-1 dy
                from dual 
                connect by level < (trunc(add_months(mydate, 1), 'mm')
                    - trunc(mydate, 'mm')) + 1
            )
        )
        where to_char(daydate, 'dy') not in ('sat', 'sun')
    ) loop
       pipe row (date_row(r.daydate, r.dayname, r.days_in_month, r.amount));
    end loop;
end myfinaldays;
/ 
```

（如果你不想要`days_in_month`，那么你可以移动`sat`/`sun`检查并使用`count`for`amount`而不是`sum(case)`. 外部`select`当前正在过滤星期几，因此你可以计算所有天数，但如果你不这样做，这不是问题'不想要那个值）。

然后调用为：

```
alter session set nls_date_format = 'DD.MM.RR';
select * from table(myfinaldays(to_date('01.02.12', 'DD.MM.RR')));

MYDATE   DAYNAME      DAYS_IN_MONTH     AMOUNT
-------- ------------ ------------- ----------
01.02.12 wednesday               29         21
02.02.12 thursday                29         21
03.02.12 friday                  29         21
06.02.12 monday                  29         21
...
29.02.12 wednesday               29         21

21 rows selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:31:47.520

Since your function is a table valued function (returns a table), you cannot call it as regular function. you have join with it:

something like this in Oracle:

```
select * from date_table t
cross join table( myfinaldays(<t.date colum>)) 
```

# java - 从 Android HTTP Post 获取数据

> ID：12600564
> 
> 赞同：3
> 
> 时间：2012-09-26T11:20:56.523
> 
> 标签：java, android, servlets, google-cloud-messaging

*我的申请有两个方面；1> gcmserver & 2> AppDevice，我在我的应用程序中使用谷歌的 GCM（gcmserver 和 AppDevice）+ 使用两个不同的系统（一个用于 gcmserver，另一个用于 AppDevice）。*

现在的**问题**是：

*在我的服务器端有 java 页面（http://192.168.1.111:8080/gcmserver/HomeServlet.java）。[192.168.1.111（即 gcmserver）是我的本地主机] 我使用的是 Tomcat 6.0.35*

我正在使用这段代码从 AppDevice 端分配该页面中的值：

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("employeeid", getempid));
            nameValuePairs.add(new BasicNameValuePair("password", getpsssword));
//          String URL_STRING="http://192.168.0.151:8080/map/jsp/passwordget.jsp";
            String URL_STRING="http://192.168.1.111:8080/gcmserver/HomeServlet.java";

            HttpClient hc = new DefaultHttpClient();
            HttpPost post = new HttpPost(URL_STRING);
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
            HttpResponse rp = hc.execute(post); 
```

*现在我真的想从这个页面中检索分配给它的值（这里：“employeeid”，“password”）。*

他们有什么方法可以从此页面实现这些值，还是我必须使用*`Jsoup`*它......//

# iphone - 如何在屏幕中间显示 UIimagepickerController

> ID：12600569
> 
> 赞同：0
> 
> 时间：2012-09-26T11:21:19.030
> 
> 标签：iphone

我正在开发一个应用程序。我正在使用. 那`UIImagePickerController`一个将在整个屏幕上打开。但我需要在 . 中间打开那个选择器`screen(50,50,220,380)`。所以请告诉 mw 我该怎么做这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:31:51.777

I ended up with a lovely miniature camera imagePicker floating in the middle of my screen using the following

```
 UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

imagePickerController.delegate = self;
//  imagePickerController.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];
imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
// imagePickerController.cameraCaptureMode = UIImagePickerControllerSourceTypePhotoLibrary;

UIView *controllerView = imagePickerController.view;

controllerView.alpha = 0.0;
controllerView.transform = CGAffineTransformMakeScale(0.5, 0.5);

[[[[UIApplication sharedApplication] delegate] window] addSubview:controllerView];

[UIView animateWithDuration:0.3
                      delay:0.0
                    options:UIViewAnimationOptionCurveLinear
                 animations:^{
                     controllerView.alpha = 1.0;
                 }
                 completion:nil
 ]; 
```

# salesforce - 在与 Salesforce 中的电子邮件模板相关的新自定义对象中添加新查找字段

> ID：12600570
> 
> 赞同：2
> 
> 时间：2012-09-26T11:21:20.877
> 
> 标签：salesforce

如何在我的自定义对象中添加新的查找字段，该字段应与 salesforce 中的电子邮件模板对象相关。

谢谢

# multithreading - 托管实例的同步

> ID：12600573
> 
> 赞同：0
> 
> 时间：2012-09-26T11:21:30.510
> 
> 标签：multithreading, design-patterns, asynchronous, synchronization

我想实现一种[multiton](http://bit.ly/SlkhNl)类（可能也称为[Manager Design Pattern](http://bit.ly/Slr1uy)），它根据用户配置加载（和管理）对象（multiton 中每个对象的键是配置记录的主键）。如果检测到配置更改，这些对象将被释放并重新创建（即重新加载）。

其他对象（托管对象外部）与这些“托管”对象交互/通信。

> 例如
> ，ManagerA 管理已配置的 ClassA 实例的实例。ObjectB 通过 ManagerA 检索 ClassA 的实例并开始与该实例交互。

问题是 ObjectB 和 ClassA 的托管实例之间的交互可能在另一个线程上，而不是 ManagerA 处理 ClassA 的实例并创建 ClassA 的新实例（用于新更改的配置）。即，托管实例可以在与托管对象交互时（或之前）进行处理。

我的问题是如何通过外部对象同步实例管理和与这些托管实例的交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:55:22.427

如果没有代码、伪代码或提供此类代码，这非常困难，但是......

如果客户端通过排队操作与托管协议对象进行交互，并且该操作队列与托管协议对象相比寿命更长，那么最好将该队列与托管协议分开并仅传递对队列的引用 -就像对客户的反对。

当某些东西入队时，让您的类似队列的对象检查一个正确配置的协议对象并使用它。我假设它在使用中（意味着字节在网络上飞过）它不能被更改/配置。完成该一项操作后，让类似队列的对象然后将协议对象签回给您的管理器。签入时，如果管理器检测到配置发生变化，它可以处理并重新创建协议对象，如果没有，那么它仍然坐在那里准备下一次使用。如果在检测到配置更改时，对象当前没有被签出，则该重新创建步骤可以立即发生。

客户端不受这些细节的影响，因为它从不直接访问协议对象。（尽管如果这是一个要求，那么您仍然可以将签入和签出概念应用于协议对象以确保它们是最新的，但是由于客户端可能忘记签入，因此执行起来更加困难并重新结帐）。

# c# - F# struct 构造函数中的参数验证

> ID：12600574
> 
> 赞同：12
> 
> 时间：2012-09-26T11:21:36.347
> 
> 标签：c#, f#, struct, c#-to-f#

这是一个简单的 C# 结构，它对 ctor 参数进行了一些验证：

```
public struct Foo
{
    public string Name { get; private set; }

    public Foo(string name)
        : this()
    {
        Contract.Requires<ArgumentException>(name.StartsWith("A"));
        Name = name;
    }
} 
```

我设法将其翻译成 F# 类：

```
type Foo(name : string) = 
    do 
        Contract.Requires<ArgumentException> (name.StartsWith "A")
    member x.Name = name 
```

但是，我无法将其转换为 F# 中的结构：

```
[<Struct>]
type Foo = 
    val Name : string
    new(name : string) = { do Contract.Requires<ArgumentException> (name.StartsWith "A"); Name = name } 
```

这会产生编译错误：

> 无效的记录、序列或计算表达式。序列表达式应采用“seq { ... }”形式
> 
> 这不是一个有效的对象构造表达式。显式对象构造函数必须调用备用构造函数或初始化对象的所有字段并指定对超类构造函数的调用。

我已经看过[这个](http://msdn.microsoft.com/en-us/library/dd233192.aspx)和[这个](http://msdn.microsoft.com/en-us/library/dd233233.aspx)，但它们不包括参数验证。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T11:49:17.180

您可以`then`在初始化结构后使用块。*在Executing Side Effects in Constructors*部分的第一个[链接](http://msdn.microsoft.com/en-us/library/dd233192.aspx)中对类进行了描述，但它也适用于结构。

 *```
[<Struct>]
type Foo = 
    val Name : string
    new(name : string) = { Name = name } 
                         then if name.StartsWith("A") then failwith "Haiz" 
```

**更新：**

更接近您的示例的另一种方法是使用`;`(sequential composition) 和括号来组合表达式：

```
[<Struct>]
type Foo = 
    val Name : string
    new(name : string) = 
        { Name = ((if name.StartsWith("A") then failwith "Haiz"); name) } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T14:18:01.983

如果您想避免显式字段 ( `val`) 和`then`，这两个相对深奥的功能，您可以使用静态`Create`方法并坚持更常见的类型定义语法：

```
[<Struct>]
type Foo private (name: string) = 
  member x.Name = name
  static member Create(name: string) =
    Contract.Requires<ArgumentException> (name.StartsWith "A")
    Foo(name) 
```*

# ruby-on-rails - Carrierwave 正确实施 default_url？

> ID：12600577
> 
> 赞同：1
> 
> 时间：2012-09-26T11:21:41.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

我已经尝试了几个小时以使我的载波设置正常工作，但无法解决此问题。

正确加载图像版本 + 在没有图像时显示 default_url 版本。此刻使用下面的代码，因为 default_url 不起作用。我从任何视图调用以下方法，如 show_avatar(@profile.id) 以显示用户图片。

```
profile_helper.rb:
  def show_avatar(id)
    @profile = User.find(id).profile rescue nil
    image_tag @profile.photos.first.file_url(:img_112x135)
  rescue
    image_tag ("/assets/avatars/img_122x145.png")    <---- This is my default image 
  end 
```

我知道这不是正确的方法吗？实现此功能的正确干净方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:42:21.550

尝试这个

```
image_tag("/assets/img_122x145.png")  # if image in assets/avatars folder
or
image_tag("/assets/avatars/img_122x145.png") # if image in assets/images/avatars folder 
```

# spring - 如何为 Spring Beans 选择不同的初始化策略？

> ID：12600581
> 
> 赞同：0
> 
> 时间：2012-09-26T11:21:52.437
> 
> 标签：spring, javabeans, lifecycle

在此日志中捕获了默认的 bean 初始化策略：

```
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.Instance> setBeanName() asda
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsa, message: create()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsa, message: start()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: create()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: start()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: stop()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: destroy()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsa, message: stop()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsa, message: destroy() 
```

在调用它的 start() 方法之后，Bean 被认为是完全初始化的。现在我想做的是同步初始化所有的bean。在所有其他 bean 完成其步骤之前，没有 bean 会继续下一个初始化步骤。生成的日志看起来像这样：

```
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.Instance> setBeanName() asda
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsa, message: create()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: create()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsa, message: start()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread main, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: start()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsa, message: stop()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: stop()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsa, message: destroy()
[Wed Sep 26 13:10:35 CEST 2012]: <Thread Thread-1, Class is.test.spring.ExecutableImpl> ID: fdsaa, message: destroy() 
```

关于如何实现这一目标的任何想法？

此外，是否可以在后台线程中处理所有初始化（每个 bean 的每个生命周期步骤）？我预计初始化将非常耗时......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:53:35.440

*关于如何实现这一目标的任何想法？*

`<bean depends-on="..."/>`您可以使用表示法或使用注解 org.springframework.context.annotation.DependsOn来管理 Spring 生命周期。

*此外，是否可以在后台线程中处理所有初始化（每个 bean 的每个生命周期步骤）？*

在 bean 的 init() 或 destroy() 方法中（通过 InitializingBean/DisposableBean 或通过 PostConstruct/PreDestroy），您可以创建不同的线程来初始化/销毁它。

# java - MyLocationOverlay 更改更新时间

> ID：12600591
> 
> 赞同：1
> 
> 时间：2012-09-26T11:22:19.223
> 
> 标签：java, android, gps, location

如你所知。调用`enableMyLocation`函数`GPS`非常频繁地调用服务并且非常快地浪费`battery`生命，我如何编辑获取更新的时间？所以它会`GPS`每10秒左右调用一次。

# jquery - 单击另一个 url 时保持类活动，jquery

> ID：12600593
> 
> 赞同：0
> 
> 时间：2012-09-26T11:22:35.687
> 
> 标签：jquery

我用 jquery 做了一些试验，遇到了一个大问题，过去一天我一直在用谷歌解决这个问题，但不知道如何解决。

我使用带有简单 php 脚本的 index.php 页面从数据库中检索我的内容，我使用如下链接：`index.php?title=abou`t（示例）。我发现了一个小的 jquery 脚本，它为`<li>`您单击添加了一个活动的类，如果 url 是 ( `#about`)，这将非常有效，它会保持该类处于活动状态，直到单击其他链接。但如果它是一个像“”这样的 url，`index.php?title=about`它会删除活动类。

这是我的 css / html 和 jquery，我的问题是如何在单击按钮时保持按钮处于活动状态。

```
 <style type="text/css"> 
    .nav li { list-style: none; cursor:pointer; }
    .nav li a { display: block; width: 279px; height: 30px;}
    .nav-home { background: url(img/home.png); width: 279px; height: 27px; }
    .nav-home.active, .nav-home:hover { background: url(img/home_1.png); width: 279px;          height: 27px;}
    .nav-video { background: url(img/video.png); width: 279px; height: 27px; }
    .nav-video.active, .nav-video:hover { background: url(img/video_1.png); width: 279px; height: 27px;}
    .nav-contact { background: url(img/contact.png); width: 279px; height: 27px; }
    .nav-contact.active, .nav-contact:hover { background: url(img/contact_1.png); width: 279px; height: 27px;}
    </style> 
```

html和jquery：

```
 <ul class="nav">
    <li class="nav-home"><a href="index.php?title=home"></a></li>
    <li class="nav-video"><a href="index.php?title=video"></a></li>
    <li class="nav-contact"><a href="index.php?title=contact"></a></li>
    </ul>
    <script type="text/javascript">
    $('.nav li').click( function() {
    $(this).addClass('active').siblings().removeClass('active');
    });
    </script> 
```

任何帮助将不胜感激，亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:27:05.970

如果您加载新页面，您将无法跟踪以前的客户端交互。

您必须`active`在 php 中给出类，或者解析 current `window.location`，获取`title`值并`<li>`根据此选择元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:34:29.950

Moonwave99 是正确的。如果你想这样做，有2种可能性，1）你需要把3个页面的内容放在一个页面中，只需要使用show（）并隐藏jquery函数或显示（块，无）属性. 2）当您向服务器发送请求时，您正在发送查询字符串中的标题。通过这个查询字符串，您需要检查并在任何您想要的地方提供类名“活动”。

```
eg:  

request URL: -url-?title=a

<a href='url?title=a' <?php if($_GET['title'] == 'a') echo 'active';?>>a</a>
<b href='url?title=b'>b</b>
<c href='url?title=c'>c</c> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:36:26.100

尝试在之前添加此 php 代码`$(".nav li").click(`

```
<?php
    if(!empty($_GET["title"]) ) {
    ?>
    $(".nav-"+$_GET["title"])
    .addClass('active')
    .siblings()
    .removeClass('active');
<?}?> 
```

# objective-c - 对象 NSNotification/Delegates 或类似对象之间的简单通信？

> ID：12600595
> 
> 赞同：0
> 
> 时间：2012-09-26T11:22:40.760
> 
> 标签：objective-c, opencv, delegates, nsnotifications

我刚开始使用Objective C，并且有一个关于两个对象之间通信的问题。

假设我有一个对象，让我们称它为从 main() 实例化的来自“时间码”类的**aTimcode** ，这是一个存储时间码（例如 01:30:20:10）的类，并具有减少/增加此时间码的方法和一些更多使用时间码进行数学运算的方法。

我有第二个对象，我们将其**称为**“视频”类中的视频，它在视频上执行一些（openCV）内容，也是在 main() 中创建的。

所以我的 main() 看起来像：

```
Timecode *aTimecode = [[Timecode alloc] init];
Video    *aVideo    = [[Video alloc] init];
[aVideo doFancyOpenCVSTUFF: someparameter]; 
```

我现在希望**aVideo**调用**aTimecode**上的方法。就像是

```
[aTimecode increaseFramesBy: 5]; 
```

我知道建立通信的简单方法是从 aVideo 中实例化 aTimecode ：

```
// somewhere within aVideo

Timecode * aTimceode = [[Timecode alloc] init];
[aTimecode increaseFramesBy: 5];
[aTimecode release]; 
```

但这当然会在 aTimecode 发布时破坏存储在 aTimecode 中的信息。

但是当程序更进一步时，我希望有很多 Video 对象（**bVideo**、**cVideo**等...）为**aTimecode**中的值做出贡献，并使用先前存储的数字进行数学运算。即使 aVideo 被释放并且 bVideo 开始做一些事情，aTimecode 也应该存储它们**。**

正确的沟通方式是什么？代表？NS通知？

可能存在例如**aVideo向****aTimecode**发送大量消息的情况- 每秒 10 次或更频繁。在短时间内发送这么多消息的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:34:03.563

根据您的描述，`initWithTimecode:`在类中创建一个方法似乎最简单`Video`。

这假设`Video`使用`Timecode`方法而不是可能是其他事物的一部分`Timecode`或可能是其他事物的一部分的方法。如果这是错误的并且您需要传入各种对象类型，那么您将使用协议和委托。

`Video`如果只是声明某些事件已经发生并且不关心是否有任何其他对象（或许多对象）注意到它们，则通知会更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:37:30.307

如果 Timecode 对象是某个 Video 对象的参数，则不一定要释放。您可能希望创建一个单例类，将 Timecode 对象保存在其中，并将弱引用传递给所有创建的 Video 对象，之后您可以使用 KVO、NSNotifications 或委托，无论您最喜欢哪个。不过，授权似乎是这里最明确的解决方案。

# c# - 如何在不使用 IF 条件的情况下执行此操作

> ID：12600605
> 
> 赞同：2
> 
> 时间：2012-09-26T11:23:09.710
> 
> 标签：c#, oop, object-oriented-analysis

我有一个定义一种方法的接口。该接口有多个以不同方式实现该接口的类。

例如：

```
interface IJob {
  void DoSomething();
}

class SomeJob : IJob{
  public void DoSomething() {
    // Do something ...
  }
}

class AnotherJob : IJob {
  public void DoSomething() {
    // Do something ...
  }
}

... 
```

我的工厂班会有一堆这样的 IF 语句

```
if (some condition)
{
   IJob job = new SomeJob (); 
else
{
   IJob job = new AnotherJob (); 
} 
```

有没有办法避免每次出现新情况时修改工厂类。这不能仅仅通过添加一个实现 IJob 的新类来完成吗？

**编辑：** [我想弄清楚[Antiifcampaign](http://www.antiifcampaign.com/)的这些人在做什么]

谢谢你的时间...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:40:27.233

您必须以某种方式将条件和决定联系起来。

```
Dictionary<int, Action<IJob>> _methods = new ... 
```

填写字典：

```
_methods.Add(0, () => {return new SomeJob();});
_methods.Add(1, () => {return new AnotherJob();}); 
```

然后使用它：

```
public IJob FactoryMethod(int condition)
{
   if(_methods.ContainsKey(condition))
   {
      return _methods[int]();
   }
   return DefaultJob; //or null
} 
```

您需要在应用程序启动时填写字典。从配置文件或其他代码。因此，当您有新的条件时，您无需更改工厂。你喜欢这个变种吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:48:10.033

必须在某个地方决定创建什么，并且可能总是涉及某种条件语句。

但是，如果您可以安排事情以遵循合理的命名约定和/或添加反射支持（例如属性），则可以通过使用反射来减少修改工厂类的需要。

有关如何在 .Net 中执行此操作的一些想法，请参阅[本文](http://msdn.microsoft.com/en-us/magazine/cc164170.aspx)

您还可以根据字符串到类名的映射做出决定，或者甚至像在应用程序启动时加载的另一个很好的方法答案一样，并在运行时通过反射创建类。有些东西必须提供地图，但您可以将大部分决策转移到配置上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:41:24.477

这取决于您的域的动态。如果您需要经常评估条件，您可以为每个实现设置某种工厂`IJob`，例如`SomeJobFactory`, `AnotherJobFactory`...

`MeetsCondition`如果满足条件，每个方法都将评估为 true，然后返回新实例。

```
public class SomeJobFactory : Factory<IJob>
{
   public bool MeetsCondition() { ... }

   public IJob CreateInstance() { return new SomeJob(); }
} 
```

在你的代码中

```
foreach(var jobFactory in allJobFactories)
{
   if(jobFactory.MeetsCondition())
   {
      return jobFactory.CreateInstance();
   }
} 
```

您还使用 IoC 来获取所有工作工厂：

```
allJobFactories = IoC.ResolveAll<Factory<IJob>>(); 
```

当您添加新的作业工厂时，您不必在此示例中修改一行代码。

如果您的代码更静态，您可以使用 DI 和 IoC，在启动时创建一次对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T11:40:53.137

我不喜欢你，但你总是可以使用泛型：

```
public IJob GetJob<T>() where : IJob ,new()
{
    IJob job = new T(); 
    return job;

} 
```

# jquery - IE9 加载 JQuery 极慢，所有其他浏览器都运行得非常快

> ID：12600606
> 
> 赞同：1
> 
> 时间：2012-09-26T11:23:20.663
> 
> 标签：jquery, validation, css, internet-explorer-9

以下站点在来自 IE9 的大多数浏览器中运行良好。脚本加载大约需要一分钟？

[http://www.charterhouse-aquatics.co.uk/revamp/](http://www.charterhouse-aquatics.co.uk/revamp/)

我完全糊涂了。任何帮助都会很棒。

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:31:12.400

It is general bad idea (from performance perspective) to put javascript code/css at the bottom of the page, and your page load a lot of it there...

Here is the sample code and tips from Google Chrome Audits of your page:

```
 A width and height should be specified for all images in order to speed up page display. The following image(s) are missing a width and/or height:
    Logo.gif
    tp-logo.jpg
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    image.php
    cards.png
    Web Page Performance
    Optimize the order of styles and scripts (10)
    The following external CSS files were included after an external 
JavaScript file in the document head. To ensure CSS files are downloaded in parallel, 
always include external CSS before external JavaScript.
    css
    normalize.css
    main.css
    tipped.css
    style.css
    buttons.css
    jquery.tweet.css
    inav.css
    /revamp/../layerslider/css/layerslider.css
    /revamp/../layerslider/skins/noskin/skin.css
    Put CSS in the document head (1)
    CSS in the document body adversely impacts rendering performance.
    1 style block(s) in the /revamp/ body should be moved to the document head. 
```

In other words, move all your javascript (*.js) include files in the document head section and put before all of them the links to the stylesheet (*.css) files. Also consider using minimized versions of the jquery/plugins/css files, if you cannot obtain such versions, you can use a web service to convert the files for you, [check here, the YUI compressor](http://www.refresh-sf.com/yui/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:16:15.187

查看 IE9 开发人员工具提供的网络信息，您有很多返回 404 的 PIE.htc 请求。我猜 IE 会尝试为每个使用的样式规则再次获取文件，`behavior: url(PIE.htc);`并且`revamp/css/W.inav.css.pagespeed.cf.o5re9TDSo5.css`您有 9 次出现（IE似乎也重试了几次获取文件）。

因此，要么将 PIE.htc 文件放在 css 文件夹中，要么在每个样式规则处更改为正确的 URL。

这似乎是我所看到的问题。如果您解决了这个问题并且问题仍然存在，我很乐意再看看这个问题。

# sql - Postgres 使用跨 2 个表的内部连接进行更新？

> ID：12600608
> 
> 赞同：9
> 
> 时间：2012-09-26T11:23:22.170
> 
> 标签：sql, postgresql, sql-update, inner-join, rdbms

我的本地 Postgres 数据库中有 3 个表：

```
[myschema].[animals]
--------------------
animal_id
animal_attrib_type_id (foreign key to [myschema].[animal_attrib_types])
animal_attrib_value_id (foreign key to [myschema].[animal_attrib_values])

[myschema].[animal_attrib_types]
--------------------------------
animal_attrib_type_id
animal_attrib_type_name

[myschema].[animal_attrib_values]
--------------------------------
animal_attrib_value_id
animal_attrib_value_name 
```

在运行时我会知道`animal_id`. 我需要运行 SQL 来更新`animal_attribute_value_name`与此项目关联的内容，例如：

```
UPDATE
    animal_attribute_values aav
SET
    aav.animal_attribute_value_name = 'Some new value'
WHERE
    # Somehow join from the provided animal_id??? 
```

我可能必须做某种嵌套`SELECT`或`INNER JOIN`在`WHERE`子句内，但不知道如何做到这一点。提前致谢！

**编辑**：

假设我有`animal`以下值的记录：

```
[myschema].[animals]
--------------------
animal_id = 458
animal_attrib_type_id = 38
animal_attrib_value_id = 23 
```

并且对应的`animal_attrib_value`（id = 23）具有以下值：

```
[myschema].[animal_attrib_values]
--------------------------------
animal_attrib_value_id = 23
animal_attrib_value_name = 'I am some value that needs to be changed.' 
```

在运行时，我只有`animal_id`(458)。我需要在单个 UPDATE 语句中查找相应的`animal_attrib_value`(23) 并将其更改`animal_attrib_value_name`为。`'Some new value'`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-26T11:58:59.173

```
UPDATE
    animal_attribute_values aav
SET
    animal_attribute_value_name = 'Some new value'
FROM animals aa
WHERE aa.animal_id = 458
AND aa.animal_attrib_value_id = aav.animal_attrib_value_id
  ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T11:51:59.923

你问这样的权利..？

```
update  animal_attribute_values aav
set  aav.animal_attribute_value_name = 'Some new value'
where aav.animal_attrib_value_id in (
select a.animal_attrib_value_id where a.animal_id=458) 
```

试试这个..

# osgi - 如何使用 OSGi 容器启用 Apache Tuscany SDO？[类加载器问题]

> ID：12600612
> 
> 赞同：2
> 
> 时间：2012-09-26T11:23:37.227
> 
> 标签：osgi, classloader, apache-servicemix, sdo, apache-tuscany

我尝试在带有 SDO 的 Apache ServiceMix 中使用 Apache CXF。SDO 随 Apache Tuscany SDO 实现一起提供。

这是依赖关系图：

我的 osgi-bundle 公开了一个 web 服务，bundle 依赖于 SDO。

CXF 系统包也依赖于 SDO。

我安装了 Apache Tuscany SDO 捆绑堆栈，如下所示：

```
osgi:install -s mvn:org.apache.tuscany.sdo/tuscany-sdo-api-r2.1/1.1.1
osgi:install -s mvn:org.apache.tuscany.sdo/tuscany-sdo-impl/1.1.1
osgi:install -s mvn:org.apache.tuscany.sdo/tuscany-sdo-lib/1.1.1
osgi:install -s mvn:org.apache.tuscany.sdo/tuscany-sdo-tools/1.1.1 
```

起始级别是：

```
...
tuscany-sdo-api-r2.1              28
tuscany-sdo-impl                  28
tuscany-sdo-lib                   28
tuscany-sdo-tools                 28

Apache CXF Bundle Jar (2.4.6)     30
camel-cxf (2.8.5)                 50
camel-cxf-transport (2.8.5)       50
...
MyApplication                     60 
```

当我重新启动服务器时，我打印了以下异常：

```
karaf@root> Exception in thread "SpringOsgiExtenderThread-4" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'iws': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$1600(AbstractDelegatedExecutionApplicationContext.java:69)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355)
        at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ExceptionInInitializerError
        at org.apache.cxf.sdo.SDODataBinding.initialize(SDODataBinding.java:128)
        at org.apache.cxf.service.factory.AbstractServiceFactoryBean.initializeDataBindings(AbstractServiceFactoryBean.java:86)
        at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass(ReflectionServiceFactoryBean.java:444)
        at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.buildServiceFromClass(JaxWsServiceFactoryBean.java:685)
        at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:507)
        at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:241)
        at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:205)
        at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:101)
        at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:157)
        at org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:203)
        at org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:433)
        at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:322)
        at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:239)
        at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:509)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1544)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
        ... 14 more
Caused by: java.lang.NullPointerException
        at org.apache.tuscany.sdo.api.SDOUtil.<clinit>(SDOUtil.java:48)
        ... 35 more 
```

正如我在 org.apache.tuscany.sdo.api.SDOUtil.java 的源代码中看到的（[链接](http://www.docjar.com/html/api/org/apache/tuscany/sdo/api/SDOUtil.java.html)）：

```
46   public final class SDOUtil
47   {
48     protected static SDOHelper defaultSDOHelper = ((HelperProviderBase)HelperProvider.INSTANCE).sdoHelper();
49   ... 
```

tuscany *-sdo-api-r2.1*中的 SDOUtil类依赖于辅助类 commonj.sdo.impl.HelperProvider.java。

HelperProvider.java 的源代码（[链接](http://www.docjar.com/html/api/commonj/sdo/impl/HelperProvider.java.html)）

```
64       static {
65           // initialize the default instance using this class's classloader
66           // set to null if none could be located (implies no default implementation)
67           HelperProvider provider;
68           try {
69               provider = getInstance(HelperProvider.class.getClassLoader());
70           } catch (NoHelperProviderException e) {
71               provider = null;
72           }
73           INSTANCE = provider;
74       } 
```

这意味着 getInstance() 方法无法正常工作。

**如何使 SDOHelper 在包含的 OSGi 中正确初始化？**

**更新**

pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <!-- Generated by Apache ServiceMix Archetype -->

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.bssys</groupId>
    <artifactId>eg-smx-osgi-bundle</artifactId>
    <packaging>bundle</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>Apache ServiceMix :: Camel OSGi Bundle</name>

    <properties>
       <camel.version>2.8.3</camel.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-core</artifactId>
            <version>${camel.version}</version>
        </dependency>

        <!-- CXF SDO -->
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-databinding-sdo</artifactId>
            <version>2.4.6</version>
        </dependency>

        <!-- Apache tuscany SDO -->
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-api-r2.1</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-impl</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-lib</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-tools</artifactId>
            <version>1.1.1</version>
        </dependency>

    </dependencies>

    <build>
        <defaultGoal>install</defaultGoal>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.4.3</version>
                <configuration>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.6</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
                        <Import-Package>*,org.apache.camel.osgi</Import-Package>
                        <Private-Package>com.bssys</Private-Package>
                    </instructions>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

骆驼上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Generated by Apache ServiceMix Archetype -->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:osgi="http://camel.apache.org/schema/osgi"
       xmlns:osgix="http://www.springframework.org/schema/osgi-compendium"
       xmlns:ctx="http://www.springframework.org/schema/context"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
       http://camel.apache.org/schema/osgi http://camel.apache.org/schema/osgi/camel-osgi.xsd
       http://www.springframework.org/schema/osgi-compendium http://www.springframework.org/schema/osgi-compendium/spring-osgi-compendium.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
       http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
">

  <osgi:camelContext xmlns="http://camel.apache.org/schema/spring">
    <route>
      <from uri="timer://myTimer?fixedRate=true&amp;period=10000"/>
      <bean ref="myTransform" method="transform"/>
      <to uri="log:ExampleRouter"/>
    </route>
  </osgi:camelContext>

  <bean id="myTransform" class="com.bssys.MyTransform">
    <property name="prefix" value="${prefix}"/>
  </bean>

  <osgix:cm-properties id="preProps" persistent-id="com.bssys">
      <prop key="prefix">MyTransform</prop>
  </osgix:cm-properties>

  <ctx:property-placeholder properties-ref="preProps" />

    <!-- HTTP Endpoint -->
    <jaxws:endpoint xmlns:iws="http://www.bssys.com/SMEV/IWS/1"
        id="iws" address="/iws1"
        serviceName="iws:IWSExport_BaseImportIWSHttpService"
        endpointName="iws:IWSExport_BaseImportIWSHttpPort"
        implementor="com.bssys.smev.iws._1.BaseImportIWSImpl">
        <!-- 
        <jaxws:features>
            <bean class="org.apache.cxf.feature.LoggingFeature" />
        </jaxws:features>
         -->
    </jaxws:endpoint>

<!-- 
<camelContext xmlns="http://camel.apache.org/schema/spring">
    <route/>
</camelContext>
 -->

 </beans> 
```

# c# - 在我更改 javascript 中的 div 属性之前如何在 c#.net 中获取 div 显示属性

> ID：12600615
> 
> 赞同：0
> 
> 时间：2012-09-26T11:23:39.317
> 
> 标签：c#, javascript, asp.net, html

我的默认网页中有一个 div。div 样式显示无，在页面加载事件中我必须获得无状态状态，但是基于下拉选择的 javascript 函数中的 div 状态发生了变化，我没有得到无状态总是显示“”状态，我的代码是

页面

```
 <div id="Div1" runat="server" clientidmode="Static" style="display: none;"> 
```

页面加载事件

```
 string Display1 = "";
    Display1 = Div1.Style["display"]; (working fine)( get the display1 value=none) 
```

当我单击按钮时，在 c# 代码中显示 div

```
 Div1.Style.Add("display", "");(now show the div it is correct) 
```

下拉更改了fire javascript函数代码

```
 document.getElementById('Div1').style.display = 'none'; (after change dropdown Hide the div after pageload i got Display1 value="") 
```

更改 javascript 函数后，我在页面加载中没有得到无状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:43:51.223

DIV 是 ASP.Net 中的 HTMLGenericControl，您在客户端对其样式或属性进行的任何更改，我认为它不会被发布回服务器，而是您可以跟踪具有 runat 服务器属性的隐藏控件上的更改真实并捕获更改。

让我知道是否有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:58:38.810

你可以像这样使用它在下面

```
<script type="text/javascript">
        $(function () {
            $("#lnkCompany").click(function () {
                if ($("#dvClientReg").css('display') == 'block') {
                    $("#dvClientReg").css('display', 'none');
                }
                if ($("#dvCompanyReg").css('display') == 'none') {
                    $("#dvCompanyReg").css('display', 'block');

                }
            });

  });
</script> 
```

我想这会对你有所帮助

# sharepoint - 如何将值传递给 SharePoint 列表事件接收器？

> ID：12600619
> 
> 赞同：1
> 
> 时间：2012-09-26T11:23:51.763
> 
> 标签：sharepoint, session, parameter-passing, event-receiver

我有一个带有文档库 Web 部件的 SharePoint 网站页面，一旦将文档上传到此库，一些库字段需要根据页面 url 的参数进行更新。

我尝试通过`Event Receiver`绑定库来执行此操作，却发现我无法在事件接收器中获取页面 url，或者更确切地说是参数。然后`Session`我想到了，但是在四处询问和搜索之后，我只能进入`HttpContext`但`itemAdding`没有`itemAdded`，更糟糕的是，`HttpContext.Current.Session`总是给我`nulll`，我确信我已经在其他地方早些时候为会议投入了一些价值。

有人可以对此有所了解，非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:53:09.730

SharePoint 允许同步和异步事件接收器。您可以在同步接收器中访问 HttpContext 和 SPContext，因为它在工作线程中运行。阅读更多有关[访问 HttpContext](http://www.sharepointkings.com/2008/05/httpcontext-in-eventhandler.html)以及[如何以编程方式绑定同步接收器](http://wineya.blogspot.com/2010/03/binding-asynchronous-event-handlers-as.html)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T15:33:37.433

有点晚了，但作为参考，我刚刚在[此页面](http://www.thedotnotcorner.com/2013/01/24/workaround-for-passing-url-params-doclib-eventreceiver-uploading-mult-files/)上看到了解决方案。

它利用母版页中的自定义控件并将信息存储到`HttpRuntime.Cache`. 然后从同步事件中访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:27:28.310

在页面上下文中不调用事件接收器。因此您无法访问页面信息。我能看到的唯一方法是编写自定义代码，在保存项目之前预填充页面的值。

# javascript - 循环字符测试中的 Javascript 循环

> ID：12600621
> 
> 赞同：2
> 
> 时间：2012-09-26T11:24:07.183
> 
> 标签：javascript, jquery, loops

我有一个遍历一大串字符的循环。检查每个数字与另一个字符串中的单个数字并突出显示匹配...

```
var decypher = "782137829431783498892347847823784728934782389";

var systemPass = "789544";

for (var x = 0; x < decypher.length; x++) { //loop through the array
    var switcher = 0; //not run this row yet
    for (var p = 0; p < systemPass.length; p++) { //loop through each digit in the password
        if(eval(decypher[x]) === eval(systemPass[p])) { //if the password digit matches the array digit
            if (switcher === 0) { //not run yet...
                $('body').append("<p style='color: green; float: left;'>"+decypher[x]+"</p>");
                switcher = 1; //finished running
            }
        } else { //no match
            if (switcher === 0) { //not run yet...
                $('body').append("<p style='color: silver; float: left;'>"+decypher[x]+"</p>");
                switcher = 1; //finished running
            }
        } 
    }   
} 
```

JSFiddle 示例：http: [//jsfiddle.net/neuroflux/J4wbk/12/](http://jsfiddle.net/neuroflux/J4wbk/12/)

我的问题是，**为什么它只突出显示`7's`？**多年来我一直在为此挠头！

**[编辑]**
感谢“@Yograj Gupta” - 我已经删除了`switcher`变量，但现在我得到了每个字符的多个实例：http: [//jsfiddle.net/neuroflux/J4wbk/22/](http://jsfiddle.net/neuroflux/J4wbk/22/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:35:28.830

好吧，你肯定是在艰难地做这件事。改用`indexOf`（或者，正如约翰指出的那样，`jQuery.inArray`）：

[http://jsfiddle.net/CrossEye/euGLn/1/](http://jsfiddle.net/CrossEye/euGLn/1/)

```
var decypher = "782137829431783498892347847823784728934782389";
var systemPass = "789544";

for (var x = 0; x < decypher.length; x++) {
    // if(systemPass.indexOf(decypher[x]) > -1) { // Thanks, Johan
    if ($.inArray(decypher[x], systemPass) > -1) {
        $('body').append("<p style='color: green; float: left;'>"+decypher[x]+"</p>");
    } else { //no match
        $('body').append("<p style='color: silver; float: left;'>"+decypher[x]+"</p>");
    } 
} 
```

虽然这里有很多其他的清理建议，但至少循环更容易。

——斯科特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:33:18.423

它只显示 7，因为您在第一次迭代中使 switcher = 1 处于内部循环中。

因此，当它出现 7 时，7 出现在 systemPass var 中的 0 索引上，因此第一次迭代检查它是否存在并将其显示为绿色。但无论如何，它会以银色显示，切换器在那里变成 1。

因此，您应该根据 indexOf 函数检查您的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:36:44.233

像这样？还是我错过了什么？

```
var decypher = "782137829431783498892347847823784728934782389".split('');

var systemPass = "789544".split('');

$.each(decypher, function(i, v){

    if(systemPass.indexOf(v) !== -1)
        $('body').append("<p style='color: green; float: left;'>"+ v +"</p>");
    else
        $('body').append("<p style='color: silver; float: left;'>"+ v +"</p>");

}); 
```

[http://jsfiddle.net/J4wbk/22/](http://jsfiddle.net/J4wbk/22/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T11:45:10.397

看看这个... [http://jsfiddle.net/J4wbk/26/](http://jsfiddle.net/J4wbk/26/)

我认为这会有所帮助

说明：您在内部循环中分配 switcher = 1。因此，在第一次匹配后，切换器为 1，并且始终执行 else 部分。而且您会收到多个字母，因为您将每个字母都附加到内部循环内的解密器中，并且它被添加了 systemPass.length 次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:29:44.407

我在您的[jsfiddle](http://jsfiddle.net/J4wbk/23/)中进行了更改 我现在更新了我的代码它应该可以解决您的问题

```
var decypher = "782137829431783498892347847823784728934782389";

    var pass = 789544;
    pass = "" + pass; var temp = '';
    for(var k =0; k < pass.length; k++){
      temp += pass[k] + '|';
    }
    temp = temp.substring(0, temp.length-1) ;

    console.log(new RegExp(temp,'g'));

    document.body.innerHTML =decypher.replace(new RegExp(temp,'g'), function(a){

        return '<span>'+a + '</span>';

    });

​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T11:36:34.773

检查这个小提琴：http: [//jsfiddle.net/2HvwT/2/](http://jsfiddle.net/2HvwT/2/)

注意：按照 Scott Sauyet 的建议，用 indexOf() 更新了小提琴

代码：

```
for (var x = 0; x < decypher.length; x++) { //loop through the array
    var found = systemPass.indexOf(decypher[x]);
    $('body').append("<p style='color: "+(found !== -1?'green':'silver')+"; float: left;'>"+decypher[x]+"</p>");
} 
```

# cakephp - 通过表单 cakePHP 2.2 传递参数

> ID：12600623
> 
> 赞同：1
> 
> 时间：2012-09-26T11:24:10.263
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我在一个视图 (view/1) 中，我想将一个参数传递给我在其控制器上的一个函数。

我试过这个：

```
echo $this->Form->create('Post', array('action' => 'move')); 
```

但是，它不会传递 URL 上的参数 $id 。

我已经看到它在编辑视图上运行良好，只需这样做：

```
 echo $this->Form->create('Post'); 
```

为什么它不适用于我的视图/控制器功能？

另外，如果我尝试用这样的方法传递它们：

```
echo $this->Form->create('Post', array('action' => 'move', 1)); 
```

它打印如下内容：

```
<form action="/posts/move" 1="1" 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:09:13.143

要传递参数，您可以简单地将参数传递为：-

> echo $this->Form->create('Post', array('action' => 'move/1'));

在控制器中，

> 调试($this->request->params['pass'][0]);

由于编辑视图已经包含正在编辑的帖子的 id，我们不需要在表单创建中显式传递 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:26:37.870

以蛋糕风格传递它:)

```
echo $this->Form->create('Post', array('action' => array( 'action' => 'move', 1 ) )); 
```

-或者-

```
echo $this->Form->create('Post', array('url' => Router::url( array( 'action' => 'move', 1 ) ) )); 
```

这将在考虑路由的同时完成它。

# java - 当我尝试向 aspectJ 添加新建议时出现“adviceDidNotMatch”警告

> ID：12600625
> 
> 赞同：2
> 
> 时间：2012-09-26T11:24:22.093
> 
> 标签：java, aspectj, aspect

我正在尝试向我的 aspectJ 添加一个新建议。

```
public aspect Aspect11 {

    pointcut namePC(String s, int i) : call (public String Simple.getName(String, int))&&args(s,i);

    pointcut getData(int j) : get(public int Simple.trial)&&args(j);

    after(String s, int i) : namePC(s, i) {
        // this is the advice
        System.out.println("Printing..." + s + "   " + i);
        System.out.println(thisJoinPoint.getSignature());
    }

    before(int j):getData(j)
    {
        System.out.println(j);
    }
} 
```

在上面的代码中，已经添加了切入点 namePC() 及其建议。这按预期工作。

以下是我的 Simple.java

```
public class Simple {
private String name = "Aman";
String home;
int trial;
public String getName(String s, int i) {

    System.out.println("Hi in getName()" + s + "   " + i);
    return name;
}

public static void main(String args[]) {
    Simple simple = new Simple();
    simple.trial=8;
    System.out.println("AA" + simple.getName("In Simple", 1));
} 
```

}

当我尝试添加新的切入点及其建议时：getData()，我收到一个警告：“Aspect11 中定义的建议尚未应用 [Xlint:adviceDidNotMatch]”我是 aspectJ 的新手，没有办法解决这个问题！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T08:49:10.103

您编辑的版本仍然无法正常工作，原因有两个：

*   `Simple.trial`不是`public`您的切入点状态。
*   `get()`如果您从不读取成员的信息，为什么要匹配切入点？在您的代码中只有一个分配，即`set()`切入点将匹配。

试试这个：

```
public class Simple {
    private String name = "Aman";
    private int trial;

    public static void main(String args[]) {
        Simple simple = new Simple();
        simple.trial = 8;
        System.out.println(simple.getName("foo", 1));
    }

    public String getName(String s, int i) {
        System.out.println("getName(" + s + ", " + i + ")");
        return name;
    }
}

public aspect Aspect11 {
    pointcut namePC(String s, int i) :
        call (public String Simple.getName(String, int)) && args(s,i);

    pointcut setData(int j) :
        set(int Simple.trial) && args(j);

    after(String s, int i) : namePC(s, i) {
        System.out.println("namePC: " + thisJoinPoint.getSignature());
    }

    before(int j) : setData(j) {
        System.out.println("setData: " + j);
    }
} 
```

# c# - 内存损坏错误

> ID：12600626
> 
> 赞同：8
> 
> 时间：2012-09-26T11:24:24.947
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-2008

我已经为地产代理管理做了一个 c# 应用程序。

在那个应用程序中，我有一个 mdi 表单，其中包含所有菜单。

在该菜单中，当我选择 agent master 时，一个表单带有 Add agent 按钮。

单击“添加代理”按钮时，将打开另一个窗口，其中包含要填写的代理详细信息。

我的问题是>>当我关闭此表单时>>

```
"Attempt to read or write protected memory.This often an indication that other memory is corrupt" 
```

错误来了。当我在此应用程序的消息框上单击确定时，整个应用程序将关闭。

当我通常通过 Visual Studio 运行应用程序时，不会出现此错误。

但是当我运行代码的exe时，就会出现这个错误。

这个错误有什么解决办法吗？

我在发布或调试项目时犯了错误吗？

我的堆栈跟踪：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
   at System.Windows.Forms.Control.DefWndProc(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.TextBoxBase.WndProc(Message& m)
   at System.Windows.Forms.TextBox.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
Anamol Estate
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///E:/Anamol%20Estate/Anamol%20Estate/Anamol%20Estate/bin/x86/Release/Anamol%20Estate.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Data
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_32/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Transactions
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4927 (NetFXspW7.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_32/System.Transactions/2.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.EnterpriseServices
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_32/System.EnterpriseServices/2.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration> 
```

启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:43:12.143

.NET Framework 也有类似的问题。试试这个[修复](http://support.microsoft.com/kb/923028)。

当您运行 Microsoft .NET Framework 2.0 Remoting 应用程序时，您可能会收到以下错误消息： Unhandled Exception: System.AccessViolationException: Attempted to read or write protected memory。这通常表明其他内存已损坏。此外，在运行某些类型的驱动程序软件或防病毒程序的计算机上的 .NET Framework 2.0 Remoting 应用程序中可能会出现此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:50:59.503

首先，您可以尝试[memtest](http://www.memtest.org/)，因为您的内存中可能有一个特定的扇区在分配时会导致此错误。最新的当前版本是 4.2 下载部分是一个相当向下滚动。

或者

这发生在我身上一次，之前是由于病毒更改了我的 exe 文件中的标头。我已经格式化了我的电脑并重新安装了所有东西，在我的情况下它运行良好。我建议你试试这个选项。

# sql-server - 如何创建在属性值验证方面不同的 XSD？

> ID：12600635
> 
> 赞同：1
> 
> 时间：2012-09-26T11:24:56.093
> 
> 标签：sql-server, xml, xsd

我已经搜索了一段时间，得出的结论是，可能无法更改每个属性值的验证。

例如，我有两个“动作”节点，都有一个“类型”属性和两个元素（“名称”和“描述”）

只有当“type”属性的值为“1”时，它才有一个带有“abc”子元素的“a”元素，当“type”属性为“2”时，它有一个带有“yet”子元素的“bla”元素元素。

类型 1 的示例

```
<action type="1">
  <name>yup</name>
  <description>yyy</description>
  <a>
    <abc>false</abc>
  </a>
</action> 
```

类型 2 的示例

```
<action type="2">
  <name>yup2</name>
  <description>RRR</description>
  <bla>
    <yet />
  </bla>
</action> 
```

我想创建一个 XSD* 来检查这两种类型，这可能吗？如果是这样，怎么办？

*   它必须是一个 XSD，因为我想将 XSD 放在 MSSQL 数据库表的 XML 列上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:30:33.200

你是对的，XSD 1.0 是不可能的，它是 MSSQL 支持的唯一 XSD 版本。`a`你能得到的最好的方法是在和之间创建一个选择，也许对属性值等`bla`施加一些限制。下面是一个例子。`type`

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="action">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="name" type="xs:string" />
        <xs:element name="description" type="xs:string" />
        <xs:choice>     
            <xs:element name="a">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="abc" type="xs:boolean" />
                </xs:sequence>
              </xs:complexType>
            </xs:element>
            <xs:element name="bla">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="yet" type="xs:anyType" />
                </xs:sequence>
              </xs:complexType>
            </xs:element>
        </xs:choice>
      </xs:sequence>
      <xs:attribute name="type" type="xs:unsignedByte" use="required" />
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

如果您控制 XML 结构，并且仍想使用某些属性来控制内容模型，那么 xsi:type 是 XSD 1.0 中唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:32:53.787

您可以使用 XML Stylus Studio 工具来创建任何类型的复杂 XSD。

查看详情： http: [//www.stylusstudio.com/](http://www.stylusstudio.com/)

# css - 删除 chrome 声称的填充

> ID：12600642
> 
> 赞同：1
> 
> 时间：2012-09-26T11:25:21.810
> 
> 标签：css, html

[http://jsfiddle.net/k8s4j/6/](http://jsfiddle.net/k8s4j/6/)

鉴于上面的小提琴，我被卡住了......在 Chrome 中，它声称底部元素以某种方式分配了填充，但我似乎无法确定它的来源。

无论如何，我需要将“HIGH”放在盒子里。

请在 Chrome btw 中查看此内容，因为它适用于 Chrome 插件，因此其他浏览器将无法使用 atm。

在 CSS 中适当地有一些多余的填充和边距声明......我基本上只是尝试添加显式边距和填充，看看我是否找不到罪人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:29:01.303

由于`.priorityheader_priority`has `display: table-cell;`，您还需要`vertical-align: top;`为所需的对齐方式提供它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:44:37.993

听到的是工作[演示](http://jsbin.com/ogijud/3/edit)

只需更改以下**CSS：**

```
 .priorityheader_priority {
            border-left: 1px solid black;
            display: table-cell;
            vertical-align:top;
            width: 112px;
            padding: 0; margin: 0;
        }
        .priority {
            text-align: center;
            vertical-align: middle;
            line-height: 25px;
            font-weight: bold;
            display: block;
            text-transform: uppercase;
            font-size: 120%;
            padding: 0; margin: 0;
        } 
```

# c# - 运行 asp.net 时出现 SSL 错误错误 107

> ID：12600646
> 
> 赞同：2
> 
> 时间：2012-09-26T11:25:30.953
> 
> 标签：c#, asp.net, ssl

我正在尝试从我的笔记本电脑运行一个 HTTPS 项目。在使用HTTPS之前，我使用的是HTTP，当时我遇到了一个错误

> 您无权查看此页面。您需要登录。

现在，当我使用 HTTPS 时，它说我

> SQL 连接错误 - 错误 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL 协议错误

我已经从 IIS 更改了绑定和 SSL 设置，但它仍然给我同样的错误。请大侠们帮忙，如果你能找到解决办法。我在这里很困惑。先感谢您。

# php - 我的数据库中有 88 行我正在从数据库中检索，我希望它们在 php mysql 的三列中显示它们

> ID：12600652
> 
> 赞同：-4
> 
> 时间：2012-09-26T11:25:52.763
> 
> 标签：php, database

我的数据库中有 88 行我正在从数据库中检索，我希望它们**像这样在 32、30、26 等三列**中显示它们，你能帮我怎么做吗？32,30,30 是每列应该有的行数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:30:15.060

If you want even columns, it will be easier to do (I cannot really understand hoe you came to 32,30,26) But you could do something like this:

```
$counter=1;
echo "<table><tr>"
while($row=someFetchFromDatabase($result))
{
    echo "<td>$row['col1']</td>";
    $counter++;
    if($counter%3==0)
    {
        echo "</tr><tr>";
    }
}
echo "</tr></table>"; 
```

This will increment a counter and display three rows until the end of the dataset - though you should add to the solution here to clean up the details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:31:04.110

Count the number of results `mysql_num_rows()`, divide by 3\. In your php loop, add a counter. When it hits the result of the division, move onto the next column. Something like this:

```
$third = mysql_num_rows($sqlresult)/3;
$counter=1;
echo "<div>";
while($r = mysql_fetch_array($sqlresult)){
    if($counter++ > $third){
        $counter = 1;
        echo "</div><div>";
    }
    echo $r[0]."<br />";
}
echo "</div>"; 
```

You could also change the divs to tds and trs if you are using tables or remove the markup and use commas as you have done in your question

# java - 到 Sql Server 2008 的 JDBC 连接

> ID：12600653
> 
> 赞同：0
> 
> 时间：2012-09-26T11:25:53.557
> 
> 标签：java, sql-server-2008, jdbc

我一直在使用 Eclipse 编写**Java**小程序，现在我想尝试一些高级元素，例如**JDBC Connection** to **Microsoft SQL Server Management Studio 2008**。我应该安装什么驱动程序，在哪里可以找到它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:28:05.787

你必须安装 Microsoft SQL Server2008 。你可以从微软的网站上得到它
访问这个链接-[访问这里](http://www.microsoft.com/sqlserver/en/us/get-sql-server/try-it.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:32:59.920

您可以使用[Microsoft JDBC Driver for SQL Server](http://msdn2.microsoft.com/en-us/data/aa937724.aspx)和[jTDS JDBC Driver](http://jtds.sourceforge.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T11:36:49.803

您可以从[这里下载驱动程序](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)

# c# - 对数据库执行“原子”操作“IncreaseIf”

> ID：12600654
> 
> 赞同：5
> 
> 时间：2012-09-26T11:25:59.197
> 
> 标签：c#, visual-studio, entity-framework, transactions, atomic

我需要对某些实体框架模型的某些字段进行*原子*操作检查值，如果其值为0，则将其增加。

我想到了交易，比如：

```
bool controlPassed = false;
using (TransactionScope scope = new TransactionScope())
{
    var model = ...ModelEntities.first_or_default(...)
    if (model.field == 0){
        ++model.field;
        ...saveChanges();
        controlPassed = true;
    }
    scope.Complete();
}
if (controlPassed)
{
    ...
    using (TransactionScope scope = new TransactionScope())
    {
        --model.field;
        ...saveChanges();
        scope.Complete();
    }
} 
```

当然，一切都在try catch等等。

我的问题是：它将如何工作？

真的很难检查。我有多线程应用程序。

是否有可能，两个或更多线程会通过控制（检查`field == 0`并增加它）？

谁会在数据库（数据库、表、行、字段）中被阻止？

我不能让两个或多个线程`controlPassed`同时在一个部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T12:31:32.933

> 是否有可能，两个或更多线程将通过控制（检查该字段 == 0 并增加它）？

You have `Serializable` transaction (that is default for `TransactionScope`). It means that there can be two threads with field == 0 but immediately after that deadlock happens because transaction for the first thread holds a shared lock on the filed and transaction for the second thread holds another shared lock for the same field. Neither of these transaction can upgrade the lock to exclusive to save changes because they are blocked by shared lock in other transaction. I think same would happen for `RepeatableRead` isolation level.

If you change isolation level to `ReadCommitted` (the default for `SaveChanges`without `TransactionScope` when using MS SQL Server) the answer will be again yes but this time without deadlock because EF uses normal selects without any table hints - that means that no lock on record is held when select completes. Only save changes (modification) locks records until transaction commits or rolls back.

To lock record in `ReadCommitted` transaction with select you must use native SQL query and `UPDLOCK` (to lock record for update during select and held it until transaction ends) table hint. EF queries do not support table hints.

**Edit:** I wrote [a long article about pessimistic concurrency](http://www.ladislavmrnka.com/2012/09/entity-framework-and-pessimistic-concurrency) which describes why your solution doesn't work and what must be changed to make it work correctly.

# java - JXTable java.lang.IndexOutOfBoundsException：无效范围

> ID：12600659
> 
> 赞同：0
> 
> 时间：2012-09-26T11:26:20.843
> 
> 标签：java, swing, jtable, indexoutofboundsexception, jxtable

我在为我的 jxtable 向我的 tablemodel 添加行时遇到问题。

将抛出以下异常：

```
Exception in thread "Thread-9" java.lang.IndexOutOfBoundsException: Invalid range
at javax.swing.DefaultRowSorter.checkAgainstModel(DefaultRowSorter.java:904)
at javax.swing.DefaultRowSorter.rowsInserted(DefaultRowSorter.java:844)
at javax.swing.JTable.notifySorter(JTable.java:4258)
at javax.swing.JTable.sortedTableChanged(JTable.java:4106)
at javax.swing.JTable.tableChanged(JTable.java:4383)
at org.jdesktop.swingx.JXTable.tableChanged(JXTable.java:1524)
at javax.swing.table.AbstractTableModel.fireTableChanged(AbstractTableModel.java:280)
at javax.swing.table.AbstractTableModel.fireTableRowsInserted(AbstractTableModel.java:215)
at javax.swing.table.DefaultTableModel.insertRow(DefaultTableModel.java:359)
at javax.swing.table.DefaultTableModel.addRow(DefaultTableModel.java:333)
at javax.swing.table.DefaultTableModel.addRow(DefaultTableModel.java:344)
at de.mudisar.MainWindow.addRow(MainWindow.java:2358)
at de.mudisar.dataloader.SelectionDataLoader.run(SelectionDataLoader.java:46) 
```

我调用从线程填充模型的方法，因为这可能超过 10000 个条目，否则我的程序将被冻结。

很抱歉我无法粘贴代码，但这对我的公司来说非常重要。

如果我这样做，则异常出现在该行：

```
infomodel.addRow(new Object[{1,2,3,4,5,6,7,8}); 
```

有人知道为什么会发生此异常吗？

用最好的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:50:10.000

```
Exception in thread "Thread-9" java.lang.IndexOutOfBoundsException: Invalid range
at javax.swing.DefaultRowSorter.checkAgainstModel(DefaultRowSorter.java:904)
at javax.swing.DefaultRowSorter.rowsInserted(DefaultRowSorter.java:844)
at javax.swing.JTable.notifySorter(JTable.java:4258) 
```

`Thread-9`听起来不像 EDT。您不应该修改已经放置在另一个线程上的表上的模型，然后是 EDT。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。

您可以使用 eg`SwingUtilities.invokeLater`来安排 EDT 的更新。或者，如果您必须重新填充整个模型，`TableModel`在工作线程上创建一个新模型并在 EDT 上一次性替换模型可能会更容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:31:07.853

也许您在一行中添加了太多列 - 比模型中的要多。

# entity-framework - 使用服务层或 IValidatableObject

> ID：12600660
> 
> 赞同：4
> 
> 时间：2012-09-26T11:26:25.487
> 
> 标签：entity-framework

我想知道在保存模型之前验证模型的最佳方法是什么以及利弊。我在服务层和 IValidatableObject 之间存在疑问。

服务层：

```
public class PersonService
{
    public void Insert(Person person)
    {
        if (!IsValid(person))
        {
            //something
        }
    }
} 
```

IValidatableObject：

```
public class Person:IValidatableObject
{
    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (!IsValid(this))
        {
            //something
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T11:38:19.757

`IValidatableObject`通常用于对实体进行自我验证，即验证仅限于检查`Person`.

自我验证（例如`IValidatableObject`和[DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)）对于“初始”检查很有用，例如在用户界面上，以确保用户已填写所有必填字段，并广泛满足正则表达式匹配、字符串长度、日期范围等验证规则。

为了使您的`Person`实体与系统的其余部分分离，您将无法在自我验证中执行更高级的业务规则，这些规则需要往返于您的数据库，或使用对外部系统的服务调用。

相反，在服务/业务/经理层上完成的验证通常用作事务的一部分，例如插入/更新/状态转换，这可以做更多涉及的验证，例如

*   它可以检查额外的业务规则，这些规则确实需要实体中不立即可用的信息`Person`（即在做出验证决策时从数据库中获取相关数据、使用其他 Web 服务等）。这里的一个例子是确定一个银行账户是否有可用资金，或者一天内是否进行了 10 次以上的提款。
*   验证特定于状态的规则，例如，当插入或更新一个人时，可以应用不同的规则，或者如果这个人活着或死了，则可以应用不同的规则。自我验证可能无法使用此附加上下文。
*   但是，服务/业务层检查仍然可以利用自我验证（例如`person.Validate()`）（包括使用`IValidatableObject`）来防止重复规则。

# linux - 如何将安装在 linux 中的 Qt 从一个版本升级到更高版本

> ID：12600661
> 
> 赞同：7
> 
> 时间：2012-09-26T11:26:35.183
> 
> 标签：linux, qt, ubuntu, qt4, upgrade

在将 Qt 项目从 windows 移植到 linux(ubuntu) 时，我遇到了以下问题：

在**Windows Qt 版本 4.8.1**上安装在**linux 4.6.3**上，其中一些在更高版本 4.8.1 中可用的功能**尚未实现**（例如**QUdpSocket::joinMultiCastGroup**）。

我只看到一个解决这个问题的方法：将 linux 上的 Qt 版本升级到 4.8.1。 **我怎样才能做到这一点？**

*在 linux 上，我安装了 libqt4-dev、qmake。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:32:19.253

已解决：我**将存储库**从挤压（稳定）更改为**wheezy（测试）**，在 wheezy 中，最新的 Qt 版本是 4.8.1，非常适合我的需要。

使用**包管理器**我找到**包 libqt4-dev**并选择它进行**更新**。就是这样，整个过程花了5分钟。

*缺点：* - 当我在更改存储库后在 Virtual Box 上运行 Debian 时，我不得不重新安装来宾添加 - wheezy 不如挤压稳定（我还没有遇到稳定性问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:37:43.123

1.  我猜你可以在 Qt Creator 中使用升级选项。
2.  [或者您可以从跨平台应用程序框架 Download Qt](http://qt-project.org/downloads)下载最新版本
3.  或者您可以尝试`apt-get install(upgrade) libqt4-dev`使用基于 Debian 的系统进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:35:24.187

这取决于您使用的发行版。如果您的发行版有二进制包，您可以通过包管理器进行更新。否则，您必须下载您喜欢的 Qt 版本的源代码并自己构建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-04T19:10:11.953

我不确定这是否对您的情况有所帮助，但您可以通过以下链接下载 Qt Online Installer：

[https://www.qt.io/download-qt-installer](https://www.qt.io/download-qt-installer)

# ruby-on-rails - Carrierwave: How to pass several image sizes from helper to carrierwave?

> ID：12600665
> 
> 赞同：0
> 
> 时间：2012-09-26T11:26:49.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, carrierwave

Im trying to get image based on a condition, for example a moderated image or the "main" profile image and pass a size param to carrierwave so I can have 1 method to load several image sizes in, how would one do this correctly?

My Photo model has,

*   :moderated,
*   :main attribute

to set an image moderated or set image to be the main profile picture, to display in search results. Unable to figure out how to get image based on condition.

```
 # Get avatar in correct size
  # Display or return default image
  # my problem: how to pass size to the carrierwave method

  def get_avatar(id, size)

      @photo_main = Photo.where(:attachable_id => id, :moderated => true, :approved => true, :main => true).first
      @photo = Photo.where(:attachable_id => id, :moderated => true, :approved => true).first

    if @photo_main
      image_tag @photo_main.file.url(:img_122x145) rescue nil
    else
      image_tag @photo.file.url(:img_122x145)
    end
  rescue
    image_tag ("/assets/avatars/img_#{size}.png")
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:36:14.327

In your model

```
has_attached_file :file,
 :style => {:small => "100x100#"}, # 100x100 any size
 ... 
```

In Helper

```
image_tag(@photo.file.url(:small,false), :alt => "any text" ) 
```

# iphone - 添加 SQLcipher sqlite3_exec 后返回 SQLITE_NOTADB

> ID：12600668
> 
> 赞同：3
> 
> 时间：2012-09-26T11:27:04.250
> 
> 标签：iphone, objective-c, ios, ipad, sqlcipher

我在他们的站点中将 SQLCipher 配置为教程...我可以编译并运行该项目。但是 sqlite3_exec 在尝试执行语句时返回 SQLITE_NOTADB。

请在下面找到代码片段：

==================

```
NSString *dbPath = [self getDBPath];
BOOL success = [fileManager fileExistsAtPath:dbPath];           
if(success) {
    int sql_results = sqlite3_open([dbPath UTF8String], &SQLDB);            
    const char* key = [@"BIGSecret" UTF8String];
    sqlite3_key(SQLDB, key, strlen(key));
    if (sql_results == SQLITE_OK) {
        NSString *sql;
        const char *update_sql; 
        sql = [NSString stringWithFormat:@"DROP table %@",tablename];
        update_sql = [sql cStringUsingEncoding:NSUTF8StringEncoding];
        if(sqlite3_exec(SQLDB, update_sql, nil, nil, nil) == SQLITE_OK) { 
            NSLog(@"Good to go %@ dropped",tablename);
        }
        else {      
            NSLog(@"Bad Delete Cat SQL: %s -- %d", update_sql,sql_results); 
            NSLog(@"error code %i", sql_results);
        } 
```

我无法解决问题，我哪里出错了......

谢谢，

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:04:37.833

从邮件列表交叉发布：

> 我在您的代码中注意到，如果数据库文件存在，您只会将块输入到 sqlite3_open。您是否偶然尝试使用此代码使用 SQLCipher 加密现有的标准 SQLite 数据库？如果是这样，调用 sqlite3_key 将无法正常工作。相反，您希望打开标准 SQLite 数据库，附加一个新的加密数据库，然后在两者之间导出数据。这里有关于这个过程的更多细节：
> 
> [http://sqlcipher.net/sqlcipher-api/#sqlcipher_export](http://sqlcipher.net/sqlcipher-api/#sqlcipher_export)
> 
> 处理加密数据库后，您可以在使用它之前调用 sqlite3_key 作为第一个操作。

# android - Android - 如何启动选择模式

> ID：12600671
> 
> 赞同：1
> 
> 时间：2012-09-26T11:27:12.113
> 
> 标签：android, action-menu

在我的 Android 应用程序中，我需要在用户选择一些文本后在上下文操作菜单上提供一些自定义操作。为此，我捕获长点击并启动操作模式，提供自定义（如[Android Docs](http://developer.android.com/guide/topics/ui/menus.html#CAB)`ActionMode.Callback`中所指出的）。问题是这样选择文本光标不会出现。那么，有没有办法以编程方式激活选择文本模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T10:38:07.520

使用[`startActionMode()`](http://developer.android.com/reference/android/app/Activity.html#startActionMode%28android.view.ActionMode.Callback%29).

请参阅[如何调用 ActionBar 的类似 ContextMenu 的行为？](https://stackoverflow.com/a/6162684/2603965)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:48:59.293

```
public void SelectText(){
  try{
    KeyEvent shiftPressEvent = 
       new KeyEvent(0, 0, KeyEvent.ACTION_DOWN, 
       KeyEvent.KEYCODE_SHIFT_LEFT, 0, 0);
   shiftPressEvent.dispatch(mWebView);
  }catch(Exception e){
   throw new AssertionError(e);
  }
 } 
```

在这种情况下，我们在 mWebView 上激活文本选择

# java - 打开office api文本大小

> ID：12600678
> 
> 赞同：0
> 
> 时间：2012-09-26T11:27:30.573
> 
> 标签：java, api, openoffice.org, openoffice-writer, uno

我正在`open office API`使用`Java UNO`. 我需要获取文档内容中*选定文本的**大小*（例如，嵌入的图片有自己的大小，但通过方法插入的文本没有任何**大小**）。 换句话说：我想获得包围*部分**文本*的框的大小（最好是 in ） （它可以是*整个段落*或通过某种类型的*cursor**选择的文本*）。有没有可能实现这一目标？*`mm``XText.insertString(...)` **`mm`***

 ****** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:13:00.127

经过搜索，我认为目前没有办法实现这一点。出于我的目的，我编写了一个小方法来获取段落高度为 1/100 毫米。

以下是此方法的工作原理：

1.  获取控制器`XTextViewCursor`以`XTextDocumment`向左/向右移动。
2.  转到段落进行测量。
3.  遍历段落获取每个字符。对于每个 char 做：检查它的高度（`CharHeight`段落的属性）；获取`XLineCursor`并`XTextViewCursor`检查是否有行尾 - 如果是则添加（到结果）行中字符的最大高度。

这是临时解决方案（仍在等待更好的解决方案）并且有许多错误（示例行距与单个行距不同；段落应该只包含文本）但也许它会对某人有所帮助。*****

# c - 使用 XSD 文件仅验证 XML 文件的一部分

> ID：12600680
> 
> 赞同：0
> 
> 时间：2012-09-26T11:27:32.120
> 
> 标签：c, xml, xsd

有没有办法使用 XSD 文件仅验证 XML 文件的一部分而忽略 XML 文件的其他内容。我只想使用 XSD 文件验证 XML 文件中的几个标签。我的 XML 文件包含许多标签，但 xsd 仅包含少数标签的元素。

有可能以某种方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:43:49.140

原则上，有两种方法（至少）可以实现这一点。

首先，您原则上可以告诉验证器您要验证文档中的哪些元素；XSD 规范不需要验证从文档根目录开始。在实践中，命令行验证器几乎从不提供运行时选项来启动除根以外的任何地方的验证。我认为验证库更有可能提供该功能。它们经常（或至少有时）提供允许您传入验证应该开始的元素以及必要的模式信息的函数。

如果您的验证器不允许您有选择地验证，您可以编写一个模式，其中包含您要验证的那些元素和属性的声明，并在“宽松验证模式”下在文档根目录上调用一个验证器——这意味着，本质上是“如果您在架构中找到文档中某个元素的声明，则根据其声明验证该元素，否则接受它（假装它匹配其父声明中的宽松通配符）并继续前进。” 因此，验证器将忽略您未提供声明的元素并验证您提供声明的元素。（请注意，符合 XSD 的处理器不需要提供 lax-validation 模式，并且规范中对 lax 验证的定义有点未指定，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:59:05.893

一个**丑陋的技巧**是通过省略您不想验证的内容，从主文档构建一个“可验证”文档，然后验证那个文档。我不赞同这种方法，但至少这是一个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:57:31.450

在实践中实现这一点的最简单方法可能是使用 XQuery 中的 validate 表达式进行验证（或在 XSLT 中使用验证的副本）。这使您可以一次选择要验证的元素并执行验证。

不利的一面可能是，如果文档无效，XQuery 中的 validate 被定义为致命错误，因此实现可能只是在第一个错误上停止，而不是专注于尽可能多地为您提供有关无效性的信息。在这个阶段，您需要了解它是如何在特定处理器中实现的和/或如何配置该处理器。

# configuration - 在 sf_guard success_signin_url 之后找不到页面

> ID：12600681
> 
> 赞同：0
> 
> 时间：2012-09-26T11:27:34.603
> 
> 标签：configuration, symfony1, sfguard, symfony-1.3

使用 sfGuard 成功注册后，我登陆“sf/sf_admin/css/main.css”并显示 404 消息。

有没有办法设置`app_sf_guard_plugin_success_signin_url`去主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:49:11.473

如插件[文档](http://www.symfony-project.org/plugins/sfGuardPlugin/4_0_2?tab=plugin_readme)中所述（在底部），您可以在您的`app.yml`：

```
all:
  sf_guard_plugin:
    success_signin_url:      @my_route?param=value # the plugin use the referer as default
    success_signout_url:     module/action         # the plugin use the referer as default 
```

# c# - VS2010 MSI Installer 纯粹安装驱动

> ID：12600688
> 
> 赞同：2
> 
> 时间：2012-09-26T11:27:54.023
> 
> 标签：c#

对...有一个小项目，我知道如何开始处理...但不知道如何执行...

我只需要安装一个设备驱动程序（我已经准备好 x86 和 x64 inf、cat 和 sys 文件）。

所以我认为！）

1.  我需要先检查架构
2.  我需要暂存驱动程序（目的是确保在连接 USB 设备之前计算机已准备就绪！）
3.  完整的产品将是一个静默运行的 MSI（目的是通过组策略部署 MSI）

我还在学习 C# 和 VS2010，所以放轻松！

我有个主意：

1.  我可以将驱动程序文件（inf、cat 和 sys）放入 Installer 项目中
2.  让安装程序将文件解压缩到目标计算机上的临时位置
3.  CD 到临时位置并运行“PNPUtil -a *.inf”
4.  验证驱动程序是否由“PNPUtil -e”添加并检查输出（当然，所有这些都在 MSI 运行时完成）
5.  结束

组策略开关将设置为安静，无需重新启动...

我已经很好地阅读了有关 DIFx、DEVCON 和 SetupAPI 的内容，但不知道从哪里开始！

该项目适用于一所大学，我们在那里有学生出勤的条形码扫描仪。我们已经编写了一个可以在 BizTalk 服务器上运行的应用程序，因此它会自动更新，但是要安装扫描仪驱动程序，用户必须具有管理员权限（我们不会提供！）......很遗憾没有拥有临时的“用户空间”驱动程序的方法......

我已经阅读了另一篇论坛帖子，当谈到 MSDN 和此类任务的基础知识时，一个人非常正确地一针见血...... MS 似乎不想放简单的演示来说明如何添加能力使用项目安装程序安装驱动程序...

有没有人有这方面的经验？？？请帮忙！

谢谢！

# php - 包含的页面接收变量？

> ID：12600694
> 
> 赞同：0
> 
> 时间：2012-09-26T11:28:15.927
> 
> 标签：php, variables, include, scope

在我的脚本中，我根据变量选择要包含的页面。

包含的页面是否接收在主页中定义的变量？或者我必须重新定义它们？

如果是这样，将变量传递到包含页面的最佳方法是什么？

我试过 include("page.php?var=".$var)

但似乎实际上试图包含一个具有该字符串名称的文件。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:29:31.107

已经在第一页范围内的变量已经在第二页中定义了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:30:48.673

您最好在主页中设置变量本身。`include`尝试包含*本地文件*，而不是 HTTP GET 请求，但无论如何设置变量，您就可以使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:31:03.830

如果您定义`$var = 1`并且之后`include("page.php");`该变量**将**可以在该文件中访问，因为它只不过是您已经获得的扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:33:11.043

这... "include("page.php?var=".$var)" 不起作用

而是尝试以下操作：

page1.php

```
<?php

$dog_name = "scruff";

include("otherpage.php");

?> 
```

其他页面.php

```
<?php

echo $dog_name;

?> 
```

这将在 page1.php 上输出：

```
scruff 
```

正如[midnightlightning](https://stackoverflow.com/users/144756/midnightlightning)所说：“已经在第一页范围内的变量已经在第二页中定义了。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:33:53.400

如果在包含页面之前定义变量，则不需要任何查询字符串。您的变量将在包含的页面中以名称访问。例如

```
$name = "Awais"
include("page.php"); 
```

然后在`page.php`

```
 echo $name; //will print Awais 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T11:46:32.517

> 包含的页面是否接收在主页中定义的变量？

是的，您包含的代码在同一范围内。这也是记录在案的行为，请参阅[`include`](http://php.net/include)。

```
$var = 'value';
include('page.php'); # has $var defined now.
unset($var);
include('page.php'); # has $var undefined now. 
```

如您所见，无需重新定义它们。

但是您可能想将其分开，因为它有副作用，请参阅：

*   [具有“副作用”的 include()/require() 是一种不好的做法吗？](https://stackoverflow.com/questions/7697389/is-include-require-with-side-effects-a-bad-practice)

# javascript - 如果它们被标记为全局，jslint 是否不会查看文件中的函数？

> ID：12600696
> 
> 赞同：3
> 
> 时间：2012-09-26T11:28:21.477
> 
> 标签：javascript, jquery, jslint

与以前相同的代码，但不同的问题：

我有这样的代码：

```
/*jslint browser: true*/
/*jslint vars: true */
/*global $, jQuery, adminModalDone, ajaxOnFailure, createModal, defineModal*/
/*global doAddSubmit, doResetTabs, mvcOnFailure*/
/*global onDialogDone, onDialogFail, submitHandler*/

function dialog($link) {
    "use strict";

    function doDialogAjax() {
        $.ajax({
            cache: false,
            url: url,
            dataType: 'html'
        })
            .done(onDialogDone)
            .fail(onDialogFail);
    }

    function onDialogDone(data) {
        content = data;
        if (content.match(/^[eE]rror/)) {
            mvcOnFailure(content);
        } else {
            defineModal();
            createModal();
            doAddSubmit();
            doResetTabs();
            adminModalDone();
        }
    }
} 
```

现在jslint抱怨我在OnDialogDone中的大部分功能都没有使用。因为我将 onDialogDone 定义为全局变量，它是否由 jslint 评估？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T06:58:28.140

`onDialogDone()`这两种解决方法中的任何一种都应该删除警告，而不是声明为全局的：

1.  交换`onDialogDone()`and的顺序`doDialogAjax()`（如@James Allardice 建议的那样）。JSLint 期望对函数（或 var 名称）的所有引用在文件中出现的位置*低于*声明它的位置。
2.  如果有循环引用使得无法按该顺序放置事物（或者从组织上讲，您不想以这种方式重新排序事物），您可以使用这个技巧：

    ```
    var onDialogDone;
    function doDialogAjax() {
        // call to onDialogDone() is in here - ok since below the var declaration
    }
    onDialogDone = function (data) {
        // ...
    } 
    ```

还有第三个选项，通过该`undef: true`选项完全禁用此警告，但我不推荐它。这个特殊的警告是捕捉代码中的拼写错误和其他保证崩溃的最佳警告之一。（此外，看起来[JSLint 刚刚删除了 'undef' 选项](https://github.com/douglascrockford/JSLint/commit/68e56579115f443be4cae4990b4ce7e8c0112f28)）。

# sql - 将来自同一个表的两个 SELECT 语句与 diff 结合起来。在哪里条件

> ID：12600699
> 
> 赞同：4
> 
> 时间：2012-09-26T11:28:46.287
> 
> 标签：sql

假设我们有一个`Emp`包含`EmpId, Manager, Subb`三列的表。

`Manager`为 1 时`EmpId`为经理，同样为`subb`.

需要表中的经理和 subb 的数量。

我们可以将这两个查询组合成一个`SELECT`查询吗？（只想扫描一次表）

```
select count(*) as ManagerNumber from Emp where Manager=1
select count(*) as Subordinate  from Emp where Subb=1. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T11:29:27.893

你可以这样做：

```
SELECT 
  SUM(CASE WHEN Manager = 1 THEN 1 ELSE 0 END) AS ManagerNumber, 
  SUM(CASE WHEN subb = 1 THEN 1 ELSE 0 END) AS Subordinate 
FROM Emp 
```

它是 SQL ANSI 标准，适用于所有 RDBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:30:45.520

是的你可以。

```
select
    (select count(*) as ManagerNumber from Emp where Manager=1),
    (select count(*) as Subordinate  from Emp where Subb=1) 
```

或者每一个连续，

```
select count(*) as ManagerNumber from Emp where Manager=1
UNION
    select count(*) as Subordinate  from Emp where Subb=1 
```

# android - 如何创建 AsyncTask 以消除 NetworkOnMainThreadException？

> ID：12600704
> 
> 赞同：0
> 
> 时间：2012-09-26T11:29:09.527
> 
> 标签：android

> **可能重复：**
> [android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

我的 android 应用程序在模拟器上运行，但在手机中显示`android.os.NetworkOnMainThreadException`。从搜索中我知道可以使用`AsyncTask`. 任何机构都可以帮助我创建一个`AsyncTask`在按钮单击时调用 httppost 并返回响应`onCreate`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:45:27.503

我做到了，这是代码

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
@Override
protected String doInBackground(String... urls) {
  String response = "";
  for (String url : urls) {
    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);
    try {
      HttpResponse execute = client.execute(httpGet);
      InputStream content = execute.getEntity().getContent();

      BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
      String s = "";
      while ((s = buffer.readLine()) != null) {
        response += s;
      }

    } catch (Exception e) {
      e.printStackTrace();
    }
  }
  return response;
}

@Override
protected void onPostExecute(String result) {
  textView.setText(result);
} 
```

}

# linq - 实体框架 - System.IndexOutOfRangeException

> ID：12600710
> 
> 赞同：1
> 
> 时间：2012-09-26T11:29:42.040
> 
> 标签：linq, entity-framework, c#-4.0, caching, enterprise-library

我正在使用查询 SQL Server 2008 数据库的实体框架 4.1。不幸的是，我们经常遇到以下异常：

```
<ExceptionType>System.IndexOutOfRangeException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
  <Message>Index was outside the bounds of the array.</Message>

at System.Data.SqlClient.SqlDataReader.ReadColumnHeader(Int32 i)
   at System.Data.SqlClient.SqlDataReader.IsDBNull(Int32 i)
   at System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
   at System.Data.Common.Internal.Materialization.Shaper.GetPropertyValueWithErrorHandling[TProperty](Int32 ordinal, String propertyName, String typeName)
   at lambda_method(Closure , Shaper )
   at System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly[TEntity](Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet)
   at lambda_method(Closure , Shaper )
   at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
   at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at System.Linq.Queryable.First[TSource](IQueryable`1 source)
   at OnlineSelfService.Business.ContentServiceBusiness.GetPageContent(Int32 pageId)</StackTrace> 
```

实际示例代码：

```
//Caller
  public EmployeeEntity GetEmployeeDetail(int employeeID)
    {
         IQueryable<Employee> result=null;
         if (myCaching.Contains("Employee"))
            {
                result = (IQueryable<Employee>)myCaching["Employee"];
            }
            else
            {
                result = dataAccess.GetEmployeeDetail();
                myCaching.AddToCache("Employee", result); //Expire in 2min
            }

            IQueryable<Employee> entityResult = from entity in result
                                                         where entity.employeeId == employeeID
                                                         select entity;
       if (entityResult.Count<Employee>() > 0)
                return entityResult.First<Employee>();
            return new EmployeeEntity();
   } 
```

}

```
//DAL
public IQueryable<Employee> GetEmployeeDetail()
{
    DatabaseEntities ent = new DatabaseEntities(this._connectionString);
    IQueryable<Employee> result = from employee in ent.EmployeeEntity
                                           select employee;

    return result;
} 
```

**更新**** 用缓存更新了我的代码。

我用谷歌搜索找到并回答，但找不到根本原因的明确答案。一些遇到这个问题的人能否分享一个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:09:40.573

Calling .Count() executes the query. I wouldn't think the .First() would execute it again but maybe it is, and something has changed in between these calls. You could try rewriting the query as:

```
(from entity in result
where entity.employeeId == employeeID
select entity).FirstOrDefault() ?? new EmployeeEntity(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:10:57.350

在 IEnumerable 或 IQueryable 上调用的任何函数都将重新执行查询......这就是为什么将这样的事情放在循环中是不好的。您最终会对数据库进行大量查询。至于为什么会出现异常，我会使用 .Any() 而不是 count 来确定结果的长度

```
return (entityResult.Any<Employee>() > 0) ? entityResult.First<Employee>() : new EmployeeEntity(); 
```

尽管逻辑有点混乱，因为您想返回一个 EmployeeEntity 并且查询表明您只期望返回一个。所以你可以使用

```
entityResult.Single<Employee>() 
```

如果返回多个，除非您无法在调用者中处理异常，否则将引发异常。然后 SingleOrDefault 可能是最好的，然后只检查 null 而根本没有计数或任何检查。

只是一些建议，总有不止一种方法可以做某事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:08:19.050

Try to return like this:

```
return entityResult.First(e => e.employeeId == employeeID); 
```

# c# - 用c#保存unicode网页

> ID：12600715
> 
> 赞同：1
> 
> 时间：2012-09-26T11:29:52.777
> 
> 标签：c#, webrequest

我使用下面的代码来保存一个 utf-8 网页：

```
 HttpWebRequest myWebRequest = (HttpWebRequest) WebRequest.Create(txtUrl.Text);
    myWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1);Accept-Language:fa";
    WebResponse myWebResponse = myWebRequest.GetResponse();
    Stream ReceiveStream = myWebResponse.GetResponseStream();
    Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
    StreamReader readStream = new StreamReader(ReceiveStream, encode);
    string strResponse = readStream.ReadToEnd();
    StreamWriter oSw = new StreamWriter(@"c:\ehsan.html");
    oSw.WriteLine(strResponse);
    oSw.Close();
    readStream.Close();
    myWebResponse.Close();  
    txtUrl.Text = strResponse; 
```

但在 ehsan.html 文件和 txtUrl 中，所有 unicode 字符都是符号。我的解决方案是否正确？有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:42:41.583

```
Use "Arabic" instead of UTF-8 for your Encoding 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:45:58.873

您正在加载的页面包含：

`<meta http-equiv="Content-Type" content="text/html; charset=windows-1256">`

因此，如果您将代码更改为：

`Encoding encode = System.Text.Encoding.GetEncoding("windows-1256");`

有用。（我已经测试过）:-)

是否要对编码进行硬编码取决于您，并且取决于您是仅从同一页面加载还是从具有不同编码的页面加载。

# c# - 使用 .net WebBrowser 打印 PDF？

> ID：12600717
> 
> 赞同：0
> 
> 时间：2012-09-26T11:29:55.967
> 
> 标签：c#, vb.net, webbrowser-control

我想使用 .net WebBrowser 加载和打印 PDF 文件。

但是，如果我“导航”到 PDF 文件，调用 webbrowser.print 不会触发。如果我将导航更改为例如。www.google.com，它打印得很好。

这是我的代码：

```
Public Class Form1

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim web As New WebBrowser
        AddHandler web.DocumentCompleted, AddressOf web_DocumentCompleted
        web.Navigate("C:\my.pdf")
    End Sub

    Private Sub web_DocumentCompleted(sender As Object, e As WebBrowserDocumentCompletedEventArgs)
       Dim web As WebBrowser = DirectCast(sender, WebBrowser)
       web.ShowPrintDialog()
    End Sub             

End Class 
```

上面的代码没有显示打印对话框，但如果我改为......

```
web.Navigate("www.google.com") 
```

然后打印对话框触发。

为什么加载 PDF 文件时无法显示打印对话框？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:02:34.950

这似乎是 WebBrowser 控件的一个已知问题。如果您可以根据 [http://alexrazon.blogspot.com.au/2008/04/printing-pdf-using-webbrowser-control.html](http://alexrazon.blogspot.com.au/2008/04/printing-pdf-using-webbrowser-control.html)访问底层 COM 对象，则可以这样做。

# c# - 将文本框中的值保存到 xml 文档

> ID：12600721
> 
> 赞同：1
> 
> 时间：2012-09-26T11:30:06.747
> 
> 标签：c#, asp.net, xml, textbox, xmldocument

我想以 XML 格式保存我的网页。我想过使用 XmlDocument 来保存值。我尝试搜索它，但找不到将文本框中输入的数据保存到 xml 文档的正确方法。

有什么办法吗？虽然不正确，但这是我到目前为止所做的。

```
 XmlDocument XDoc = new XmlDocument();

        // Create root node.
        XmlElement XElemRoot = XDoc.CreateElement("Generate_License");

        //Add the node to the document.
        XDoc.AppendChild(XElemRoot);

        XmlElement Xsource = XDoc.CreateElement("General_Info", txtGInfo.ToString());
        XElemRoot.AppendChild(Xsource); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:41:42.270

您可以尝试使用 - 基于`InnerText`属性

```
// Create the xml document containe
XmlDocument doc = new XmlDocument();// Create the XML Declaration, and append it to XML document
XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", null, null);
doc.AppendChild(dec);// Create the root element

XmlElement root = doc.CreateElement("Generate_License");

XmlElement elem= doc.CreateElement("General_Info");
elem.InnerText =txtGInfo.Text;

root.AppendChild(elem);
doc.AppendChild(root); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:50:27.013

试试这个，这很简单。只是你需要 4.0 .net 框架

```
XDocument doc =
  new XDocument(
    new XElement("Generate_License",
      new XElement("General_Info", txtGInfo.ToString())

      )
    )
  ); 
```

# c# - 无法在 c#/XAML Metro 应用程序中获取带有字节到字符串转换器的字符串文件大小

> ID：12600722
> 
> 赞同：0
> 
> 时间：2012-09-26T11:30:12.923
> 
> 标签：c#, xaml, properties, microsoft-metro, ivalueconverter

我只想将文件大小转换为字符串格式，如“1 MB”或“2.5 GB”，我认为我从[Q.42 库](http://github.com/Q42/Q42.WinRT)中引用了转换器，我的 XAML 代码可能有错误，请帮我弄清楚这一点。

主页.XAML

```
<Page.Resources>
    <local:ByteToStringConverter x:Key="BytesToString" />
</Page.Resources>
<Grid>
    <TextBlock Text="{Binding Path=Size, Converter={StaticResource BytesToString}}"/>
</Grid> 
```

MainPage.XAML.cs

```
public sealed partial class MainPage : Page
{

    public MainPage()
    {
        this.InitializeComponent();
    }

    protected async override void OnNavigatedTo(NavigationEventArgs e)
    {
        StorageFile f = await KnownFolders.MusicLibrary.GetFileAsync("video.mp4");
        BasicProperties bs = await f.GetBasicPropertiesAsync();
        MyClass obj = new MyClass();
        obj.Size = bs.Size;
    }
}

public class MyClass : INotifyPropertyChanged
{
    private ulong _Size;

    public ulong Size
    {
        get { return _Size; }
        set { _Size = value; OnPropertyChanged("Size");}
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

ByteToStringConverter.cs

```
public class ByteToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        string size = "0 KB";

        if (value != null)
        {

            double byteCount = 0;

            byteCount = System.Convert.ToDouble(value);

            if (byteCount >= 1073741824)
                size = String.Format("{0:##.##}", byteCount / 1073741824) + " GB";
            else if (byteCount >= 1048576)
                size = String.Format("{0:##.##}", byteCount / 1048576) + " MB";
            else if (byteCount >= 1024)
                size = String.Format("{0:##.##}", byteCount / 1024) + " KB";
            else if (byteCount > 0 && byteCount < 1024)
                size = "1 KB";    //Bytes are unimportant ;)            
        }

        return size;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:45:43.920

[编辑：更新以反映新代码]

首先，实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口，`MyClass`并在发生更改时触发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件`Size`。这将确保更新绑定。

二、将页面的数据绑定设置为 的实例`MyClass`，如

```
<Page.DataContext> 
    <local:MyClass/> 
</Page.DataContext> 
```

你已经表明你已经做到了。

第三，不要创建 in 的新实例，而是`MyClass`在已绑定到`OnNavigatedTo`的实例上设置属性。`MainPage`例如：

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
    StorageFile f = await KnownFolders.MusicLibrary.GetFileAsync("video.mp4");
    BasicProperties bs = await f.GetBasicPropertiesAsync();

    // Do not create a new instance       
    ((MyClass) DataContext).Size = bs.Size;
} 
```

**为什么？**WPF 中的绑定是针对特定对象实例完成的。例如，如果控件 A 绑定到对象 X 并且对象 X 的属性发生更改，则控件 A 将被更新。如果控件 A 绑定到对象 X，但另一个对象 Y 的值发生变化，则控件 A 将不会收到通知。

在创建对象 Y 中创建新对象。`OnNavigatedTo`相反，您想`Size`在对象 X 上设置属性。

要调试这个：

*   首先在不使用转换器的情况下尝试以确保值已更新，然后添加转换器。这会将任何转换器问题与绑定问题分开。
*   在设置器中为`Size`. 如果它被击中，则问题出在绑定上。如果没有，问题是`Size`没有设置。

非常次要的一点：使用 a`ulong`而不是`double`in `Convert`。`ulong`s 提供 64 位精度，而`doubles`仅提供 53 位精度。你可能永远看不到这么大的字节数，但它也与`MainPage`.

# ios - iOS: Do iPhone 3GS or younger devices require armv7?

> ID：12600724
> 
> 赞同：1
> 
> 时间：2012-09-26T11:30:23.893
> 
> 标签：ios, xcode, architecture, armv7, armv6

I have a third party library (ZBar) which complains about the armv7 arch when I build the project (in Terminal, using xcodebuild), and I have to set the valid architecture in the build settings to armv6 (only).

**The question: Will an app set to armv6 even run on post iPhone 3GS devices?**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T11:35:09.990

是的，ARMv6 代码将在 ARMv7 设备上运行，但反之则不行。您可以通过将长时间未更新的应用程序下载到全新的 iPhone 5 上来测试这一点，它应该运行得非常好（虽然没有经过视网膜优化）。

这是因为这两个指令集向后兼容，但不向前兼容。然而，ARMv6 现在已经不是什么大问题了，因为 Xcode 4.5 的限制是无法编译 ARMv6 代码。

请注意，iPhone 3GS实际上是iOS设备列表中第一个使用ARMv7的设备，这可以看出它是最早可以运行iOS 6的设备（需要ARMv7，唯一的例外是第一代iPad），所以只要你的目标是 iOS 4.3+，你根本不需要支持 ARMv6。

看到只有 4 个 ARMv6 设备是（iPhone 2G、iPhone 3G、iPod、iPod 2G）。所有这些设备现在都应该被更换，如果没有，这不是我们的错。

# java - Guide how to create own "Media Container Format" ( File Extension) ? Encoding/Decoding

> ID：12600726
> 
> 赞同：0
> 
> 时间：2012-09-26T11:30:32.567
> 
> 标签：java, php, c++, encoding, media

I am trying to build my own **Media Container Format**.

Which should for example contain **.mp3 and .png´s**.

Till now I was working around with PHP and Java and managed to create .wav files from raw byte arrays. Still I am lacking deeper knowledge about this field.

**Questions:**

*   How do I approach this best?

*   What encoding algorithmns should I use ?

*   Is it necessary to convert existing files like .mp3 to raw data
    format in order to create the media container and its´ offsets?

I would be very thankful if someone could tell me more about this.

Thank you very much

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:32:36.613

如果你想保存多个文件，我会使用像[ZIP](http://en.wikipedia.org/wiki/Zip)这样的标准存档。

# ember.js - Ember Handlebars helper view not updated

> ID：12600728
> 
> 赞同：2
> 
> 时间：2012-09-26T11:30:35.733
> 
> 标签：ember.js, handlebars.js

I'm trying to use Handlebars helper, but the helper view does not get updated.

The view,

```
<script type="text/x-handlebars">
  {{#view App.NumberView}}
    <button {{action changeNumber}}>Change number</button><br>
    {{formatNumber view.number}} <br>
    {{view.number}}
  {{/view}}
</script>​ 
```

The code,

```
App = Ember.Application.create({});

App.NumberView = Ember.View.extend({
  number: 5,
  changeNumber: function(e) {
    this.set('number', this.get('number') + 1);
  }    
});

Em.Handlebars.registerHelper('formatNumber', function(timePath, options) {
  var number = Em.Handlebars.getPath(this, timePath, options);
  return new Handlebars.SafeString("Formated number: " + number);
}); 
```

​ The live example in jsfiddle [http://jsfiddle.net/LP7Hz/1/](http://jsfiddle.net/LP7Hz/1/)

So what's wrong ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:40:26.260

因为 Ember 中的 Handlebars 助手不是绑定助手。所以你可以实例化一个辅助视图来做到这一点，就像这个小提琴：

[http://jsfiddle.net/secretlm/qfNJw/2/](http://jsfiddle.net/secretlm/qfNJw/2/)

HTML：

```
<script type="text/x-handlebars">
    {{#view App.NumberView}}
        <button {{action changeNumber}}>Change number</button><br>
        {{formatNumber view.number}} <br>
        {{view.number}}
    {{/view}}
</script>​ 
```

Javascript：

```
App = Ember.Application.create({});

App.NumberView = Ember.View.extend({
    number: 5,
    changeNumber: function(e) {
        this.set('number', this.get('number') + 1);
    }    
});

App.registerViewHelper = function(name, view) {
  Ember.Handlebars.registerHelper(name, function(property, options) {
    options.hash.contentBinding = property;
    return Ember.Handlebars.helpers.view.call(this, view, options);
  });
};

inlineFormatter = function(fn) {
  return Ember.View.extend({
    tagName: 'span',

    template: Ember.Handlebars.compile('{{view.formattedContent}}'),

    formattedContent: (function() {
      if (this.get('content') != null) {
        return fn(this.get('content'));
      }
    }).property('content')
  });
};

App.registerViewHelper('formatNumber', inlineFormatter(function(content) {

    return new Handlebars.SafeString("Formated number: " + content);
})); 
```

这个链接很有用：[http](http://techblog.fundinggates.com/blog/2012/08/ember-handlebars-helpers-bound-and-unbound/) : //techblog.fundinggates.com/blog/2012/08/ember-handlebars-helpers-bound-and-unbound/ 来自@Jo Liss ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:21:20.803

You're looking for a bound helper, which doesn't exist just yet. There is a [Pull Request](https://github.com/emberjs/ember.js/pull/1274) and associated discussion.

# c#-4.0 - Just Difference in C#

> ID：12600732
> 
> 赞同：-4
> 
> 时间：2012-09-26T11:30:58.190
> 
> 标签：c#-4.0

What is the differ between string.Join & string.Concat similarly what is the diff between string.Equals & string.Compare

Show me with some example for each. I already searched but didn't understand.

Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:53:49.043

这两种方法非常相关。虽然尚未完成，但可以使用 compareTo 实现 equals：

```
public boolean equals(Object o)   
{   
    if (this == anObject)   
    {   
        return true;   
    }   
    if (o instanceof String)   
    {   
        String s = (String)o;   
        return compareTo(s) == 0;   
    }   
    return false;   
} 
```

此外， s1.equals(s2) == true 意味着 s1.compareTo(s2) == 0 （反之亦然），而 s1.equals(s2) == false 意味着 s1.compareTo(s2) != 0 （反之亦然）反之亦然）。

但是，这很重要，并非所有课程都必须如此。它适用于字符串，但没有规则禁止其他类使用不同的自然顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:46:42.920

连接字符串的程序 [C#]

使用系统；

```
class Program
{
    static void Main()
    {
    string[] arr = { "one", "two", "three" };

    // "string" can be lowercase, or...
    Console.WriteLine(string.Join(",", arr));

    // ... "String" can be uppercase:
    Console.WriteLine(String.Join(",", arr));
    }
} 
```

输出 - 一、二、三 一、二、三

连接：

```
using System;
class Program
{
    static void Main()
    {
    // 1.
    // New string called s1.
    string s1 = "string2";

    // 2.
    // Add another string to the start.
    string s2 = "string1" + s1;

    // 3.
    // Write to console.
    Console.WriteLine(s2);
    }
} 
```

输出 - string1string2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:43:03.050

在 .NET 4.0 中，String.Join() 在内部使用 StringBuilder 类，因此效率更高。而 String.Concat() 使用“+”使用 String 的基本连接，这当然不是一种有效的方法，因为 String 是不可变的。

我比较了 .NET 2.0 框架中的 String.Join() ，它的实现不同（它没有在 .NET 2.0 中使用 StringBuilder）。但是在 .NET 4.0 中，String.Join() 在内部使用 StringBuilder()，因此它就像 StringBuilder() 之上的简单包装器，用于字符串连接。

Microsoft 甚至建议对任何字符串连接使用 StringBuilder 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:37:28.670

[`Join`](http://msdn.microsoft.com/en-us/library/dd783876.aspx)将多个字符串与中间的分隔符组合在一起；如果您有一个列表并希望以每个元素之间有分隔符（例如逗号）的方式对其进行格式化，这最常使用。[`Concat`](http://msdn.microsoft.com/en-us/library/dd784338.aspx)只是一个接一个地附加它们。在某种程度上，`Join`带空分隔符相当于`Concat`.

[`Equals`](http://msdn.microsoft.com/en-us/library/858x0yyx.aspx)确定两个字符串是否相等，[`Compare`](http://msdn.microsoft.com/en-us/library/84787k22.aspx)用于确定两个字符串之间的排序顺序。

不过，老实说，这一切都在文档中得到了很好的解释。

# c++ - dbus std::vector<> data transfer with callback method

> ID：12600739
> 
> 赞同：1
> 
> 时间：2012-09-26T11:31:11.177
> 
> 标签：c++, stdvector, dbus

## **I like to transfer C++ std::vector<...> data to a glib client**

***Problem***: If I send vector data I did not get a callback into my glib client callback handler.

Vector data are sure on the bus because I checked this with a C++ client app.

Discrete data transfers (int,int,..) callbacks works fine. So I am sure the setup and marshal process is correct for simple types.

**XML vector definition :**

```
 arg name="vectorData" type="a(uuuuuuu)" 
```

**bus-binding-tool generates:**

```
gboolean com_xxx_yyy_method (DBusGProxy *proxy, const GPtrArray* IN_vectorData, GError **error)
{
   return dbus_g_proxy_call (proxy, "Method", error, dbus_g_type_get_collection ("GPtrArray", dbus_g_type_get_struct ("GValueArray", G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_INVALID)), IN_vectorData, G_TYPE_INVALID, G_TYPE_INVALID);
} 
```

**Setup marshal and callback:**

```
void setupVectorCallback(DBusGProxy *proxy)
{
   dbus_g_object_register_marshaller(marshal_VOID__BOXED, // parameter
                                     G_TYPE_NONE,         // return type
                                     G_TYPE_BOXED,        // or G_TYPE_POINTER ?
                                     G_TYPE_INVALID);     // end parameter list

   dbus_g_proxy_add_signal(proxy, "myVector", dbus_g_type_get_struct ("GValueArray", G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_UINT, G_TYPE_INVALID), G_TYPE_INVALID);

   dbus_g_proxy_connect_signal(proxy, "myVector", G_CALLBACK(_VectorEvent_handler), NULL, NULL);
} 
```

**Marshal:**

```
Marshal:void marshal_VOID__BOXED (GClosure *closure, GValue *return_value G_GNUC_UNUSED, guint n_param_values, const GValue *param_values, gpointer invocation_hint G_GNUC_UNUSED, gpointer marshal_data)
{
  typedef void (*GMarshalFunc_VOID__BOXED) (gpointer data1,
                                            gpointer arg_1,
                                            gpointer data2);
  register GMarshalFunc_VOID__BOXED callback;
  register GCClosure *cc = (GCClosure*) closure;
  register gpointer data1, data2;

  //g_return_if_fail (n_param_values == 1+1);

  if (G_CCLOSURE_SWAP_DATA (closure))
  {
      data1 = closure->data;
      data2 = g_value_peek_pointer (param_values + 0);
  }
  else
  {
      data1 = g_value_peek_pointer (param_values + 0);
      data2 = closure->data;
  }
  callback = (GMarshalFunc_VOID__BOXED) (marshal_data ? marshal_data : cc->callback);

  callback (data1,
            g_marshal_value_peek_boxed (param_values + 1),
            data2);
} 
```

**Callback handler:**

```
void _VectorEvent_handler(void *proxy, gpointer *data)
{
} 
```

Anyone knows what is wrong in my code and why DBus did not accept my format and processes my callback?

My C++ vector implementation works (in the C++ client) but can not be used in my lib. So please hints only for glib implementation.

# java - Get Image file from HTTP Response Body

> ID：12600742
> 
> 赞同：5
> 
> 时间：2012-09-26T11:31:20.707
> 
> 标签：java, android, httpresponse, multipart

Android Client send a request to the server.

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://test.com/test");
HttpResponse response = httpclient.execute(httppost); 
```

and then received response from server like below

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Date: Wed, 26 Sep 2012 10:59:35 GMT
Content-Type: multipart/form-data; type="image/jpeg"; boundary="simple_boundary"; start="<image>"; start-info="image/jpeg"
Transfer-Encoding: chunked

2000

--simple_boundary

Content-Type: image/jpeg
Content-Transfer-Encoding: binary
Content-ID: <image>

......JPEG Binary Code Here.....

--simple_boundary 
```

How can I get the Image(binary) from the response.

```
InputStream is = response.getEntity().getContent(); 
```

(InputStream)is contains boundary and content information also.

```
--simple_boundary

Content-Type: image/jpeg
Content-Transfer-Encoding: binary
Content-ID: <image>

......JPEG Binary Code Here.....

--simple_boundary 
```

How can I get pure Image binary data. And it's possible??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:45:02.243

```
Bitmap bitmap = BitmapFactory.decodeStream((InputStream) response.getEntity().getContent()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:15:53.353

您需要一个 http 解析器来读取消息正文。

[http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/impl/io/HttpResponseParser.html](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/impl/io/HttpResponseParser.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:34:32.207

请求内容被拆分和编码，因此处理起来并不容易。

几年前我使用[Apache Commons FileUpload](http://commons.apache.org/fileupload/index.html)来处理这种请求（ei multipart），这个库大大简化了这个过程。

在[入门](http://commons.apache.org/fileupload/using.html)部分，您可以找到几个示例。

# css - 使 div 自动向左而不是向右扩展宽度

> ID：12600743
> 
> 赞同：10
> 
> 时间：2012-09-26T11:31:30.047
> 
> 标签：css, html

我的网站上有一个 div，其中包含一个用作菜单的项目列表。我已经设置了 CSS `width:auto`，如果菜单项太长，它会重新调整大小。但目前，这将向右扩展，并将我的其余内容也“推”到右侧。

这很难解释，例如，如果您访问[http://redsquirrelsoftware.co.uk/](http://redsquirrelsoftware.co.uk/)并单击“支持”菜单项，您可以看到正在推送的内容。我想要发生的是让 div 扩展到菜单左侧的空白区域。

我目前的 div 的 CSS 是：

```
.sidebar1 {
    float: left;
    width: auto;
    min-width: 25%;
    max-width: 29%;
    margin-top: 65px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    border-radius: 12px;
} 
```

有没有办法让它以另一种方式扩展？提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-06-23T21:37:23.767

我发现不使用浮点数或绝对定位的另一种方法是`direction: rtl`在父级上使用，然后在子级上重置它：

```
.parent { direction: rtl; }
.parent > * { direction: ltr; }
.child { width: 200px; }
.child:hover { width: 400px; } 
```

代码笔：[http ://codepen.io/heisters/pen/gMgboJ](http://codepen.io/heisters/pen/gMgboJ)

（抱歉，我无法将示例建立在 OP 的网站上，因为链接似乎已失效）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:38:14.670

这个想法需要测试，但它至少在 Chrome 中有效：

*   将`.content`和更改`.sidebar1`为。`float: right``float: left`
*   在 HTML 中，`.sidebar1`移到`.content`.

# java - jVisualVM 的内存检查器中的“保留大小”是什么意思？

> ID：12600744
> 
> 赞同：15
> 
> 时间：2012-09-26T11:31:31.753
> 
> 标签：java, profiling, heap-memory, jvisualvm

摘要选项卡上的 Jvisualvm 堆转储具有按保留大小检查最大对象的功能。

保留的真正含义是什么？对象树的大小如何计算并在此处显示？
如果我可以在这里看到对象（10M）和它的成员对象（5M），我应该如何计算堆影响。他们都占用了 10M 还是 15M 的堆？
为什么我看不到我们的外观巨大的应用程序对象？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T11:39:25.423

> 保留的真正含义是什么？

一个完整的 gc 后会有多大。例如，具有大量条目的 WeakHashMap 在 GC 之后可能为空。

> 对象树的大小如何计算并在此处显示？

JVM 使用内部 API 确定这一点。

> 如果我可以在这里看到对象（10M）和它的成员对象（5M），我应该如何计算堆影响。他们都占用了 10M 还是 15M 的堆？

总大小为 10 MB。如果这是您最大的问题，除非您的机器只有 100 MB，否则不要担心。（在这种情况下我会升级它）

> 为什么我看不到我们的外观巨大的应用程序对象？

也许它们的内存没有你想象的那么大？？例如，它们的加载可能很昂贵，但这并不会使它们变得庞大。

顺便说一句：VisualVM 是一个不错的免费内存分析器，但它只对发现明显的问题有用。我会尝试使用像 YourKit 这样的商业分析器（您可以获得免费的评估许可证）进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-28T06:30:30.450

我认为 VisualVM 中“保留”的最佳定义是垃圾回收后剩余的内存量。

在某些情况下，它可能大于“大小”，因为它直接或间接引用其他对象（或集合）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-08T07:37:47.207

> 如果我可以在这里看到对象（10M）和它的成员对象（5M），我应该如何计算堆影响。他们都占用了 10M 还是 15M 的堆？

我认为它实际上占用了 15M 的堆，对象保留大小 10M 意味着，当这个对象（10M）被扫描时，10M 将是空闲的。成员 object(5M) 仍被其他对象引用，并且仍在堆中。成员对象的保留大小可以大于对象本身。

# zend-framework - How to decrypt password value in Zend Framework?

> ID：12600745
> 
> 赞同：0
> 
> 时间：2012-09-26T11:31:31.753
> 
> 标签：zend-framework, zend-form-element

My problem is when i enter password in zend password element it show in bullet sign(encrypted formate) and when i inspect that in chrome or Mozilla it show password in plain text.how can i encrypt password at zend element like gmail password text box i mean when i type password and inspect that password it does not show my password in plain text format.

my password element in zend form is:

```
$password = new Zend_Form_Element_Password('Password');

$password->setRequired(true)
        ->setAttrib('size', 30)
        ->setRenderPassword(true)
        ->addFilter('StripTags')
        ->addFilter('StringTrim')
    ->addValidator('StringLength',false,array('min' => 6,'max' => 50,                          

'messages' => array(
    Zend_Validate_StringLength::INVALID =>'Please Enter correct Password',
    Zend_Validate_StringLength::TOO_LONG =>'Password is too long',
    Zend_Validate_StringLength::TOO_SHORT =>'Password is too short')));;
    $password->class="textbox";
    $password->setDecorators($decorators);
    $password->setAttrib('Maxlength', 50); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:57:21.843

我认为你有这个问题是因为`setRenderPassword(true)`语法。如果您删除它，它将不会有纯文本形式的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:54:25.520

看起来您的密码元素比它真正需要的要忙一些。

*   您永远不想看到或显示密码，您不在乎值是什么，您只关心输入的密码值散列到数据库中的值。

*   删除`'max'`验证器中的值，只要密码具有最小长度，您就不关心密码有多长（无论如何您都要将密码散列到特定长度）。

*   删除`INVALID`消息，这不是您验证密码的地方（发生在您的 auth() 函数中），这个验证器所做的只是验证格式。

*   再次删除该`MaxLength`属性 - 你不在乎密码有多长，如果它让用户感觉更好，让他们使用 Moby Dick 的第一章。

*   请注意您在密码元素中使用的过滤器，因为如果您更改或删除它们，您可能会破坏数据库中的大部分密码哈希。此外，如果这些过滤器的实现发生变化，那也可能会破坏您的哈希值。

```
 $password = new Zend_Form_Element_Password('Password');   
    $password->setRequired(true)
             ->setAttrib('size', 30)
             ->addFilter('HtmlEntities')
             ->addValidator('StringLength',false,array('min' => 6,                           
                'messages' => array(       
                    Zend_Validate_StringLength::TOO_SHORT =>'Password is too short'
              )));;
    $password->class="textbox";
    $password->setDecorators($decorators); 
```

现在您将“密码”的值转储到您的散列函数中，然后保存或比较它。

祝你好运！

# c# - 在 C# 中按下按钮时进行表单验证的最简单方法？

> ID：12600748
> 
> 赞同：2
> 
> 时间：2012-09-26T11:31:40.327
> 
> 标签：c#, winforms, validation

我有一个基于 C# 的 WinForms 应用程序，其中有很多菜单，每个菜单都有多个用于用户输入的控件。所有表单都有 OK 按钮，可以处理用户给出的输入。

例如，当用户按下“确定”按钮时，我必须对所有这些控件进行验证.. 检查输入的字符串是否为数字、是否具有特定长度、是否存在等...

是否有任何可用的 C# 功能来执行此操作，而不是我必须为每个确定按钮编写完整的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:33:02.057

您可以使用正则表达式进行验证，这是一个链接[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:38:28.097

如果您不想在表单设计中输入此类代码，那么您始终可以制作自己的自定义控件，这些控件旨在以某种方式工作。

因此，例如，您可以创建一个从 TextBox 类继承的类，并且您可以覆盖此控件的事件以完全按照您的意愿执行操作。

制作您自己的控件，这些控件的设计也完全符合您的要求。这样做，您不需要在表单设计中验证输入，因为您设置了控件的行为，然后将控件放到表单上。

您将始终对用户输入进行一些验证，但您可以在表单事件中对其进行限制，这完全取决于您需要这些控件的自定义程度。

如果您希望控件限制某些键，例如 RichTextBox 中的“回车键”，或者您希望在粘贴剪贴板内容时处理剪贴板内容，则这种做法很好。您可以在课堂上而不是在您的表单中完成所有这些代码。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:55:06.557

一种方法是调用`Validate`或`ValidateChildren`从 OK 按钮单击事件处理程序。然后，您将为`Validating`每个要验证的控件提供一个事件处理程序。

请参阅[有关用户输入验证的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms229603.aspx)。

# php - 在视图 php mvc 中从模型分页数组

> ID：12600752
> 
> 赞同：0
> 
> 时间：2012-09-26T11:31:51.110
> 
> 标签：php, arrays, model-view-controller, pagination

我正在制作一个搜索表单，从模型中提取多维数组中的用户数据，我似乎无法弄清楚如何在 MVC 样式设置中对其进行分页。模型将未知长度的数组发送到视图，因为有几个搜索字段都是可选的。它是`$_POST`数据，所以当我刷新页面时我会丢失数据。

这是数组的简化版本...

```
Array
(
[0] => Array
    (
        [id] => 1

        [username] => Rebequa

        [city] => arlington

        [state] => va

    )

[1] => Array
    (
        [id] => 2

        [username] => steve

        [city] => 

        [state] => 

    )

[2] => Array
    (
        [id] => 6

        [username] => Rebequa2

        [city] => arlington

        [state] => va

    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:44:10.787

很难真正理解您，但 array_chunk 可能会将数组拆分为“块”或“页面”：http://php.net/manual/en/function.array-chunk.php

例如，要为您的数组获取一个页面大小为 1 的数组：

```
array_chunk($my_model_array, 1); 
```

这将输出类似于：

```
Array
(
[0] => Array(
    [0] => Array
    (
        [id] => 1

        [username] => Rebequa

        [city] => arlington

        [state] => va

    )
), 
[1] => Array(
    [0] => Array
    (
        [id] => 2

        [username] => steve

        [city] => 

        [state] => 

    )
) 
```

所以根数组中的每个元素现在都等于一个页面，然后您可以滚动这些“页面”。然后，您可以将每个根元素放入一个 div 中，并使用 JS 在页面之间切换。

### 编辑

当然，这里最好的方法是使用 AJAX 来获取您的结果并从搜索表单中执行 AJAX 用户列表或使用`$_GET`，因为此数据不设置数据库模型等，它仅用于从模型中获取用户，如搜索询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:44:59.027

首先，您不应该直接从`$_POST`. 相反，您应该将条件存储在`$_SESSION`或缓存搜索结果，并将用户重定向到`"results"`.

如果您`F5`在 Firefox 或 Internet Explorer 中使用表单和键，您就会明白它会导致什么样的问题。

我建议在执行重定向之前存储条件`$_SESSION`并检索结果总数（也存储在 中）。`$_SESSION`

然后对于每个页面，您只需修改条件，并生成结果列表。

* * *

顺便说一句，如果你真的想实现 MVC 设计模式，你应该知道模型层不能有*Page*的概念。这将是表示逻辑的一部分。视图在从模型层检索信息时，应该请求`give me 1..10 entry`，`give me 31..40 entry`等等。

然后，View 将从模型层获取此信息，并根据需要使用尽可能多的模板来呈现响应。

您必须了解的另一件事是`$_SESSION`缓存和缓存形式都是存储介质。你不应该只从模型层直接访问。

我建议避免缓存搜索结果，因为它仅在您拥有少量数据且需要很长时间才能检索的情况下才有用。缓存包含数千个元素的数组会适得其反。

# python - 使用Python yield的表达式和语句有什么区别

> ID：12600754
> 
> 赞同：4
> 
> 时间：2012-09-26T11:31:57.113
> 
> 标签：python

> **可能重复：**
> [表达式与语句](https://stackoverflow.com/questions/19132/expression-versus-statement)

Python中的**表达式**和**语句**有什么区别？

我从来没有想过这个问题，直到我学习 Python 生成器，它说“**使用 yield 作为表达式**”

另外，您能否在“使用 yield 作为表达式”的 Python 生成器的上下文中解释这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T11:39:48.497

可以计算表达式以返回值。任何表达式也可以用作语句。

换句话说，如果你可以写`a = ...`，那么`...`就是一个表达式。所以`2*3`和`zip(x,y)`是表达式。

类似的东西`raise Exception`是一个语句而不是一个表达式：你不能写`a = (raise Exception)`.

yield 是一个表达式意味着它`b = (yield a)`是生成器中的有效代码。如果您使用生成器的`send()`方法，`b`则设置为您传入的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:36:32.060

**表达式**只包含标识符、文字和操作符，其中操作符包括算术和布尔操作符、函数调用操作符 ()、订阅操作符 [] 等，并且可以简化为某种“值”，可以是任何 Python 对象。

**另一方面，**语句是可以组成一行（或几行）Python 代码的所有内容。**请注意，表达式也是语句。**

 **希望它会帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:51:36.073

我将其提炼为：

*   表达式*是*某种东西——正如已经说过的，它有一个值——并且
*   声明*做某事*。

当然，所有这种减少的问题是有一个警告；作为其评估的一部分，表达式仍然可以做一些事情。但它最终还是有价值的。**

# javascript - How to pass the ajax result to google maps

> ID：12600755
> 
> 赞同：1
> 
> 时间：2012-09-26T11:32:07.020
> 
> 标签：javascript, ajax, google-maps

I am using this code to get the latitude and longitude of current location.

```
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;    
  }
</script> 
```

i need to pass the longitude and latitude from this ajax code to google map's LatLng variable how to this.

This is the google maps api code that i am using

```
 function initialize() {
  var latlng = new google.maps.LatLng(52.000,17.1100);
    var myOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }; 
```

Can anyone help me..thanks in advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:46:12.373

```
function showPosition(position)
{
    x.innerHTML="Latitude: " + position.coords.latitude + "<br />Longitude: " + position.coords.longitude;
    initialize(position);
}

function initialize(position) {
    var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
    var myOptions = {
    zoom: 12,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:42:03.107

如果您已经初始化了地图，您可以在获取位置后将其居中：

```
map.setCenter(new google.maps.LatLng(position.coords.latitude,position.coords.longitude)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:37:54.900

以与您当前相同的方式，但传入`position.coords.latitude`and`position.coords.longitude`而不是`52.000`and `17.1100`。

```
var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:38:16.250

这应该只是传递您已经检索到的经纬度的情况：

```
function showPosition(position)
{
 var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
 var myOptions = {
  zoom: 12,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
 };

} 
```

# cakephp - Using Custom Helper in a Custom Helper

> ID：12600757
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:32:09.413
> 
> 标签：cakephp, cakephp-1.3

I have a custom helper (`MessageHelper`) in which I need access to another custom helper (`IncentiveHelper`). I've followed the format described in the docs, but I'm getting this error:

```
Undefined property: MessageHelper::$Incentive [APP/views/helpers/message.php, line 21] 
```

Here's the relevant chunk of code. To my eye, it looks virtually identical to that in the [1.3 docs](http://book.cakephp.org/1.3/en/view/1098/Including-other-Helpers):

```
class MessageHelper extends AppHelper {
  public $helpers = array( 'Incentive' );

  public function rebates( $rebates ) {
    debug( $this->Incentive ); exit;
  }
} 
```

The files are named and stored according to convention as `app/views/helpers/message.php` and `app/views/helpers/incentive.php`. On a whim, I did try including a core helper (`HtmlHelper`) instead, but that failed the same way.

What am I missing here? Is there something obvious that I'm just not seeing? Seems like there must be, but my eyes are starting to cross. Any nudge in the right direction would be much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:45:24.263

我不是 cakephp 方面的专家，但我认为您可能正在寻找类似[http://php.net/manual/en/language.namespaces.importing.php的东西](http://php.net/manual/en/language.namespaces.importing.php)

# audio - Remove excess samples/sound in a mp3 file

> ID：12600759
> 
> 赞同：0
> 
> 时间：2012-09-26T11:32:22.510
> 
> 标签：audio, sox

Ive been using SoX to trim files to be exactly 2 seconds long, but ive noticed that audio files always have an extra 32 milliseconds or so on the end, apparently its extra data to tell a different decoder its information, but does it have to add on to the length of the file?

I've created a program that joins together lots of files, 4 times (using "--combine") (Because there are 4 lines of music) then i join those four lines together using --combine mix the length of the song is around 2:35 minutes long, but ive noticed, that the lines that got mixed start to go out of sync, like a time difference, im guessing that its the 37 milliseconds on the end of the file.

Can i fix this or remove the excess time? or maybe im just doing something wrong in my mixing, and that extra length doesn't get joint

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:47:17.147

问题很可能出在 MP3 格式上，它是分块的，不允许这种时间分辨率。至少在您编辑时切换到另一种格式应该可以解决问题。

# ios - Disabling some files in Xcode project from compilation

> ID：12600762
> 
> 赞同：13
> 
> 时间：2012-09-26T11:32:26.870
> 
> 标签：ios, xcode

I have started a new project in Xcode by duplicating an existing folder, because my new app will have a lot of common features with the old one.

The problem is that the new app won't be using a framework I used in the old app. When I deleted the framework, of course all files including that framework raised errors.

Basically I want to disable all syntax checks, dependency checks, etc. on many files. I want Xcode to ignore these files, although they are in the project tree. Later when I revise them I will manually enable them again. This way I can compile and test my small changes for errors without fixing all errors it causes in the "not revised" files, which I will be fixing in the future anyway.

I could delete them from the project tree and then add them again one by one when my job's done, but I don't want to do this because my project tree might get messed up and there should really be another way to accomplish this.

I tried removing those files from all target memberships, but it didn't help.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-06-03T08:34:37.743

如果你需要删除很多文件，你可以创建用户定义的构建设置，它应该被称为 EXCLUDED_SOURCE_FILE_NAMES。并添加文件名或模式。

在我的情况下，我选择了我想省略一些文件的目标，Editor -> Add Build Setting -> Add User-Defined Setting（起初它以某种方式变灰。我选择了项目文件（就在 TARGETS 上方）然后重新选择了目标文件并且能够创建用户定义的设置）-> 将其命名为 EXCLUDED_SOURCE_FILE_NAMES -> 值类似于 PREFIX*

当然，您可以为整个项目创建用户定义的设置，这样所有目标都将拥有它。

示例它的外观： ![在此处输入图像描述](../Images/7fb593e0386abb08403673fe974f9257.png)

原始答案： http: [//lists.apple.com/archives/xcode-users/2009/Jun/msg00153.html](http://lists.apple.com/archives/xcode-users/2009/Jun/msg00153.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-27T20:15:59.737

在 Xcode 9 中，我不确定旧版本，请访问：

> 构建设置 -> 构建选项 -> 排除的源文件名

添加要排除的所有文件名。您甚至可以进行通配符匹配。

Bellow 是一个示例，说明我如何排除所有方案的开头`dev-`和结尾的所有文件，`.cc`但为模拟器构建的调试方案除外。所有 Debug Simulator 构建都排除以 开头`release-`和结尾的文件`.cc`

[![在此处输入图像描述](../Images/1b5253a79945efbf0c85f643197fb7be.png)](https://i.stack.imgur.com/aTgQT.png)

希望这可以帮助！！

**更新**

我在框架方面遇到了类似的问题，您也可以使用它排除框架嵌入到您的应用程序中！

我的问题是我有 2 个框架，一个是为模拟器构建的，另一个是为 ARM 构建的。iTunes Connect 抱怨我在应用程序中包含模拟器之一。

如果您有许多框架，这也有助于减小应用程序的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:46:46.327

作为肮脏的黑客，您可以尝试不排除文件，而是通过使用`#ifdef NotCompile + #endif`它在 C\C++ 中使用 .h 完成的代码，并`#define NotCompile`在 YOURPROJECT-prefix.pch 中添加\删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:46:00.973

在这里查看答案

[Xcode：是否有位置/标志来防止类编译？](https://stackoverflow.com/questions/2561715/xcode-is-there-a-location-flag-to-prevent-a-class-from-compiling)

简而言之，从项目目标中删除文件。

# java - TreeViewer 刷新/更新特定的 TreeColumn

> ID：12600764
> 
> 赞同：2
> 
> 时间：2012-09-26T11:32:35.333
> 
> 标签：java, eclipse, swt, jface, treeviewer

有没有办法刷新/更新一个特定`TreeColumn`的`TreeViewer`？我目前在我的`TreeViewer`那个可以隐藏/显示一个`TreeColumn`. 隐藏列时，该列的值可能与我的模型不同步。这就是为什么当我再次启用它时需要刷新到 Column 并且获取列的单元格值的操作非常昂贵。

我有一个解决方案，但我希望有一个更好的解决方案（也许是开箱即用的东西）。我设法将 my 定义`LabelProvider`为包含`TreeViewer`( `CustomTreeView extends ViewPart`) 的类中的内部类。`CustomTreeView`将具有以下方法`update(TreeColumn)`：

1.  存储`TreeColumn`在内联`LabelProvider`类的私有字段中。
2.  称呼`TreeViewer.refresh()`
3.  将内部的`TreeColumn`字段设置`LabelProvider`为空。

的`update(ViewerCell cell)`方法`LabelProvider`将检查 是否`ViewerCell`属于`TreeColumn`存储在 中`LabelProvider`并在需要时刷新它。

你怎么看？提前致谢。

# django - 如何获取Queryset中所有对象的所有ForeignKeys的django QuerySet

> ID：12600765
> 
> 赞同：9
> 
> 时间：2012-09-26T11:32:34.383
> 
> 标签：django, django-queryset

我有一个模型（或者实际上是 2 个模型，但另一个不相关）

```
class Foo(models.Model):
    ...
    bar = models.ForeignKey(Bar,
        ...
    ) 
```

当我有一个`Foo`:s 的 QuerySet 时，如何获取`Bar`该 QuerySet 引用的所有实例？

由于我使用的是 MySQL，我不能这样做`.distinct(['bar'])`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-26T11:42:28.887

```
foo_queryset = Foo.objects.filter(attr=value)
referenced_bars = Bar.objects.filter(id__in=foo_queryset.values('bar_id')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:57:55.977

```
bars = Bar.objects.filter(foo_set__attr=value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-18T02:17:06.847

你可以`foo_queryset.bar_set.all()`用来获取你的所有实例`Bar`

```
foo_queryset = Foo.objects.filter(attr=value)
referenced_bars = foo_queryset.bar_set.all() 
```

[Django 文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)有更多详细信息。

# playorm - testOuterJoinWithNullClause() 在一种情况下失败

> ID：12600775
> 
> 赞同：1
> 
> 时间：2012-09-26T11:33:04.390
> 
> 标签：playorm

方法 getAllViewsCursor() 没有返回带有测试数据的正确结果。由于 Account 和 Activity 现在具有多对多关系，因此以下带有 null 子句的查询没有给出实际结果

select * FROM Activity as e INNER JOIN e.account as a WHERE e.numTimes < 15 and (e.account = null or a.isActive = false)

act5 的 account 应该有 null 值，而 act7 应该有 acc1。当它被逆转并且测试失败时。您可以尝试在方法末尾的 TestJoins.java 的 testOuterJoinWithNullClause() 方法中添加以下行。

```
 rows.next();
    List<TypedRow> joinedRow1 = rows.getCurrent();
    TypedRow typedRow1 = joinedRow1.get(0);
    TypedRow theJoinedRow1 = joinedRow1.get(1);
    log.info("joinedRow1= "+joinedRow1);
    Assert.assertEquals("e", typedRow1.getView().getAlias());
    Assert.assertEquals("act5", typedRow1.getRowKeyString());
    Assert.assertEquals(null, theJoinedRow1.getRowKey());

    rows.next();
    List<TypedRow> joinedRow2 = rows.getCurrent();
    TypedRow typedRow2 = joinedRow2.get(0);
    TypedRow theJoinedRow2 = joinedRow2.get(1);
    log.info("joinedRow1= "+joinedRow2);
    Assert.assertEquals("e", typedRow2.getView().getAlias());
    Assert.assertEquals("act7", typedRow2.getRowKeyString());
    Assert.assertEquals("acc1", theJoinedRow2.getRowKey()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:41:00.807

更新：此错误现已在主分支中修复。请享用。

嗯，您在 ad-hoc 接口中发现了一个很好的错误（这在 NoSqlNamedQueries 中工作得很好，只是不是 ad-hoc）。修复此问题后，我将更新答案。

# iphone - 如何在 UINavigationControllers 中锁定方向

> ID：12600778
> 
> 赞同：1
> 
> 时间：2012-09-26T11:33:09.317
> 
> 标签：iphone, uinavigationcontroller, orientation, ios6

由于在**iOS 6**`ShouldAutorotateToInterfaceOrientation`中已弃用，我无法在我的应用程序中锁定方向。在我的应用程序中，我有多个视图，一些视图需要同时支持纵向和横向，而其他视图只需要支持纵向。我该如何解决这个问题，请给我一些想法。**`UINavigationControllers`**

 **谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:02:58.377

使用此功能仅适用于**iOS 6**

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation

{

    return UIInterfaceOrientationMaskPortrait;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T20:35:54.807

您可以通过继承 UINavigationController 来锁定方向。

[这是有关如何执行此操作的出色链接。](https://gist.github.com/lessthanyouthink/3842178)

然后在子类 UIViewController 中重写以下方法以实现锁定（在本例中为纵向锁定）。

```
-(BOOL)shouldAutorotate
{
    return NO;
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:00:43.077

在 viewDidLoad 中添加以下代码

```
UIViewController *viewController = [[UIViewController alloc] init];
[self presentModalViewController:viewController animated:NO];
[self dismissModalViewControllerAnimated:NO]; 
```

用于锁定纵向

*   选择属性检查器选项卡。
*   将方向设置为纵向。

添加功能

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ( UIInterfaceOrientationIsPortrait(interfaceOrientation)); 
} 
```

用于锁定横向

*   选择属性检查器选项卡。
*   将方向设置为横向。

添加功能

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ( UIInterfaceOrientationIsLandscape(interfaceOrientation) ); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T06:17:48.130

我找到了 ShouldAutorotateToInterfaceOrientation 的替代品。我建议您浏览这些链接 -

[http://www.roostersoftstudios.com/2012/09/21/ios6-autorotation-changes](http://www.roostersoftstudios.com/2012/09/21/ios6-autorotation-changes)

谢谢**

# actionscript-3 - as3，用参数在舞台上实例化对象

> ID：12600782
> 
> 赞同：0
> 
> 时间：2012-09-26T11:33:17.050
> 
> 标签：actionscript-3, flash-cs6

例如，如果我有一个扩展 MovieClip 的对象，假设它是某种自定义构建的文本字段类 (InputField)。

InputField 构造函数有 2 个参数（placeholderText:String = null, displayAsPassword:Boolean = false）。

如果我将影片剪辑拖到舞台上，它将被构建，但不会设置参数。有没有办法在构建时设置它们？

需要明确的是，我希望能够只将此影片剪辑拖到舞台上，而不是创建它并从后面的代码中执行 addChild()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:42:14.687

**您可以在符号本身内部**初始化变量，然后将它们放在舞台上后立即设置。您仍然可以从 .as 文件中访问这些变量。

编辑：要扩展注释，当您在已设置的类中声明两个变量时，只需将它们设置为默认情况下您想要的任何值，例如：

```
class MyInputField
{
  // Will always set following variables to default values, 
  // whether using addChild or dragging symbol onto stage.
  var placeholderText:String = "Enter text here..";
  var displayAsPassword:Boolean = false;

  // If needed, store text field via constructor
  var tf:TextField;

  // Constructor
  function MyInputField()
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T22:07:38.987

我不知道这是否是个好主意，但您可以创建一个扩展您的`InputField`. 您可以更改超级函数内的构造函数参数。

```
 public function CustomInputField() {
   super("hello", true); 
 } 
```

但是，我会选择一个公共函数`init()`，其参数与您现在在构造函数中使用的参数相同。

顺便说一句，你在重新发明轮子吗？输入字段被创建一千次。看看[Temple 库](http://code.google.com/p/templelibrary/)，它有很好的可扩展组件和表单类。

# cakephp - 在 CakePHP 中控制台/shell 生成的视图中使用 Helper

> ID：12600783
> 
> 赞同：0
> 
> 时间：2012-09-26T11:33:17.360
> 
> 标签：cakephp, console, helper, cakephp-2.1

我想在通过 CakePHP 控制台生成的电子邮件视图中使用自定义和核心 Html-Helper CakePHP 2.x。我以正常方式使用 CakeEmail，但无法掌握如何包含助手。

如何在通过 CakePHP 控制台生成的视图中使用/添加/包含助手？

添加`public $helpers = array('Html');`到外壳不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:09:26.310

对于 CakePHP 1.3，我以一种有点肮脏的方式做到了，但它确实有效

```
App::import("Core", "Controller");
App::import("Controller", "App");

class SomeShell extends Shell { 

  function startup() { 
    $this->Controller =& new AppController();

    ...
  }
} 
```

AppController 在我的电子邮件模板中使用了我需要的帮助程序。你怎么看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:01:07.307

这应该在 shell 中工作（但只在低于 2.x 的 cakePHP 中）：

```
App::import('Core', 'Helper');

$html = new HtmlHelper(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:09:34.130

它记录在这里： [http ://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-templated-emails](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-templated-emails)

```
$email->helpers(array('Html', 'Custom', 'Text')); 
```

# linux - pthread 锁定/解锁解决方案

> ID：12600787
> 
> 赞同：0
> 
> 时间：2012-09-26T11:33:35.593
> 
> 标签：linux, pthreads, vxworks

我想重新实现 vxWorks 函数 taskLock() 和 taskUnlock()。

这是vxWorks功能的原始描述。

```
* taskUnlock - enable task rescheduling
*
* This routine decrements the preemption lock count.  Typically this call is
* paired with taskLock() and concludes a critical section of code.
* Preemption will not be unlocked until taskUnlock() has been called as many
* times as taskLock().  When the lock count is decremented to zero, any tasks
* that were eligible to preempt the current task will execute.
*
* The taskUnlock() routine is not callable from interrupt service routines. 
```

我使用 pthreads 重新实现 vxWorks 任务。那么有没有可能做到这一点？

如果我理解正确。如果一个函数调用了taskLock，那么在调用taskunlock之前，下面的代码不会中断。

我在网上没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:47:28.887

来自[sourceforge.net/taskLock 上的 v2lin 项目](http://sourceforge.net/projects/v2lin/files/v2lin/0.1/v2lin-0.1.tgz/download?use_mirror=heanet&download=)评论：

```
 taskLock - 'locks the scheduler' to prevent preemption of the current task
           by other task-level code.  Because we cannot actually lock the
           scheduler in a pthreads environment, we temporarily set the
           dynamic priority of the calling thread above that of any other
           thread, thus guaranteeing that no other tasks preempt it. 
```

**因为我们实际上无法在 pthreads 环境中锁定调度程序**

# css - CSS3 过渡（如何暂停？）

> ID：12600788
> 
> 赞同：0
> 
> 时间：2012-09-26T11:33:36.393
> 
> 标签：css, css-transitions

我想在这个[CSS3PageTransitions](http://tympanus.net/Tutorials/CSS3PageTransitions/index.html#contact)教程中添加以下功能

如何在页面转换之间添加带有进度条的**暂停**时间 1 分钟。

这样页面就消失了，主页在进度条指示的 1 分钟内可见，然后出现下一个转换页面。

这可以在不使用 Javascript 的情况下完成吗？

# android - 在android中将一个项目包导入另一个项目包

> ID：12600796
> 
> 赞同：0
> 
> 时间：2012-09-26T11:34:08.017
> 
> 标签：android, android-layout, android-intent

几个月前，我正在创建一个名为产品的项目，其中我使用微调器、图像切换器、购物车和其他一些活动来创建电子商务网站。最近，我创建了一个名为扫描仪的新项目，在这个我使用 zxing libaray 集成了一个扫描仪来扫描二维码。问题是我想在这个扫描仪项目中添加我所有的产品活动。当我复制产品项目的所有包并将其粘贴到扫描仪项目中时，logcat 没有显示错误，但控制台显示缺少某些功能。我不明白问题所在，我检查了所有活动。这是否可以将一个项目导入另一个项目。我该怎么做？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:38:18.200

您应该将产品项目设置为库项目：右键单击 Eclipse 中的项目 -> 属性 -> Android -> 检查 isLibrary。

在您的扫描仪项目中执行以下操作：右键单击 Eclipse 中的项目 -> 属性 -> Android -> 添加 -> 选择产品。

现在您可以使用扫描仪项目的产品中定义的任何内容。

# java - 子报告从新页面开始，并使用碧玉报告在 PDF 的末尾添加额外页面

> ID：12600799
> 
> 赞同：1
> 
> 时间：2012-09-26T11:34:15.233
> 
> 标签：java, pdf, jasper-reports

我有一个包含三个报告组的主要报告。每个报告组标题都有一个子报告。当我使用 jasper 报告生成 PDF 文件时

1.  它在子报告之间添加一些空白，即，如果第一个子报告自动占据第一页的 60% 以上，则第二个子报告将从新页面开始。
    我不能使用 ispageignoration，因为我们将为多条记录生成 pdf，其中每条记录都应该从新页面开始。
2.  它在最后生成一个空白页，只有页眉

第二个报告中的文本字段（value1，value2...value6）最多可以有 2000 个字符。

谁能帮帮我吗..

主报告 report1.jrxml 文件

```
 ```
 <?xml version="1.0" encoding="UTF-8"?>
    <jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20">
        <parameter name="logoStream" class="java.awt.Image" isForPrompting="false"/>
        <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
            <defaultValueExpression><![CDATA["D:\\Other  Drive\\eHRM\\17365\\"]]></defaultValueExpression>
        </parameter>
        <field name="id" class="java.lang.String"/>
        <field name="dataSource1" class="net.sf.jasperreports.engine.JRDataSource"/>
        <field name="dataSource2" class="net.sf.jasperreports.engine.JRDataSource"/>
        <field name="dataSource3" class="net.sf.jasperreports.engine.JRDataSource"/>
        <group name="Group1" isStartNewPage="true">
            <groupExpression><![CDATA[$F{id}]]></groupExpression>
            <groupHeader>
                <band height="20">
                    <subreport>
                        <reportElement x="-30" y="0" width="535" height="20" isRemoveLineWhenBlank="true"/>
                        <dataSourceExpression><![CDATA[$F{dataSource1}]]></dataSourceExpression>
                        <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "/report1_subreport1.jasper"]]></subreportExpression>
                    </subreport>
                </band>
            </groupHeader>
        </group>
        <group name="Group2">
            <groupExpression><![CDATA[$F{id}]]></groupExpression>
            <groupHeader>
                <band height="20">
                    <subreport>
                        <reportElement x="-30" y="0" width="535" height="20" isRemoveLineWhenBlank="true"/>
                        <dataSourceExpression><![CDATA[$F{dataSource2}]]></dataSourceExpression>
                        <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "/report1_subreport2.jasper"]]></subreportExpression>
                    </subreport>
                </band>
            </groupHeader>
        </group>
        <group name="group3">
            <groupExpression><![CDATA[$F{id}]]></groupExpression>
            <groupHeader>
                <band height="20">
                    <subreport>
                        <reportElement x="-30" y="0" width="535" height="20" isRemoveLineWhenBlank="true"/>
                        <dataSourceExpression><![CDATA[$F{dataSource3}]]></dataSourceExpression>
                        <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "/report1_subreport3.jasper"]]></subreportExpression>
                    </subreport>
                </band>
            </groupHeader>
        </group>
        <background>
            <band splitType="Stretch"/>
        </background>
        <pageHeader>
            <band height="50">
                <image>
                    <reportElement x="0" y="0" width="100" height="50"/>
                    <imageExpression><![CDATA[(java.awt.Image)$P{logoStream}]]></imageExpression>
                </image>
                <textField>
                    <reportElement x="510" y="0" width="20" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$V{PAGE_NUMBER}.toString()]]></textFieldExpression>
                </textField>
            </band>
        </pageHeader>
    </jasperReport> 
``` 
```

`三个子报告的格式与下面的 jrxml 文件相同`

 ````
 ```
 <?xml version="1.0" encoding="UTF-8"?>
    <jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1_subreport1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="0" bottomMargin="0">
        <field name="title1" class="java.lang.String"/>
        <field name="value1" class="java.lang.String"/>
        <field name="title2" class="java.lang.String"/>
        <field name="value2" class="java.lang.String"/>
        <field name="title3" class="java.lang.String"/>
        <field name="value3" class="java.lang.String"/>
        <field name="title4" class="java.lang.String"/>
        <field name="value4" class="java.lang.String"/>
        <field name="title5" class="java.lang.String"/>
        <field name="value5" class="java.lang.String"/>
        <field name="title6" class="java.lang.String"/>
        <field name="value6" class="java.lang.String"/>
        <background>
            <band splitType="Stretch"/>
        </background>
        <detail>
            <band height="161" splitType="Stretch">
                <elementGroup>
                    <line>
                        <reportElement x="0" y="27" width="535" height="5" forecolor="#FFFFFF">
                            <printWhenExpression><![CDATA[($F{value2} == null || $F{value2}.equals( "" )) ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
                        </reportElement>
                    </line>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="0" y="33" width="120" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{title2}]]></textFieldExpression>
                    </textField>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="120" y="33" width="415" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{value2}]]></textFieldExpression>
                    </textField>
                </elementGroup>
                <elementGroup>
                    <line>
                        <reportElement x="0" y="54" width="535" height="5" forecolor="#FFFFFF">
                            <printWhenExpression><![CDATA[($F{value3} == null || $F{value3}.equals( "" )) ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
                        </reportElement>
                    </line>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="0" y="60" width="120" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{title3}]]></textFieldExpression>
                    </textField>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="120" y="60" width="415" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{value3}]]></textFieldExpression>
                    </textField>
                </elementGroup>
                <elementGroup>
                    <line>
                        <reportElement x="0" y="81" width="535" height="5" forecolor="#FFFFFF">
                            <printWhenExpression><![CDATA[($F{value4} == null || $F{value4}.equals( "" )) ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
                        </reportElement>
                    </line>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="0" y="87" width="120" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{title4}]]></textFieldExpression>
                    </textField>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="120" y="87" width="415" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{value4}]]></textFieldExpression>
                    </textField>
                </elementGroup>
                <elementGroup>
                    <line>
                        <reportElement x="0" y="108" width="535" height="5" forecolor="#FFFFFF">
                            <printWhenExpression><![CDATA[($F{value5} == null || $F{value5}.equals( "" )) ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
                        </reportElement>
                    </line>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="0" y="114" width="120" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{title5}]]></textFieldExpression>
                    </textField>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="120" y="114" width="415" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{value5}]]></textFieldExpression>
                    </textField>
                </elementGroup>
                <elementGroup>
                    <line>
                        <reportElement x="0" y="135" width="535" height="5" forecolor="#FFFFFF">
                            <printWhenExpression><![CDATA[($F{value6} == null || $F{value6}.equals( "" )) ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
                        </reportElement>
                    </line>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="0" y="141" width="120" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{title6}]]></textFieldExpression>
                    </textField>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="120" y="141" width="415" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{value6}]]></textFieldExpression>
                    </textField>
                </elementGroup>
                <elementGroup>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="0" y="6" width="120" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{title1}]]></textFieldExpression>
                    </textField>
                    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                        <reportElement x="120" y="6" width="415" height="20" isRemoveLineWhenBlank="true"/>
                        <textElement/>
                        <textFieldExpression><![CDATA[$F{value1}]]></textFieldExpression>
                    </textField>
                    <line>
                        <reportElement x="0" y="0" width="535" height="5" forecolor="#FFFFFF">
                            <printWhenExpression><![CDATA[($F{value1} == null || $F{value1}.equals( "" )) ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
                        </reportElement>
                    </line>
                </elementGroup>
            </band>
        </detail>
    </jasperReport> 
``` 
```

`一个人可能有 n 家公司，所以我将公司名称、工作简介、项目描述放在子报告中。`

 ````
---------------------------------------------------------------
Name: XXX
DOB: XX-XX-XXXX
Personal Profile: (** this field may have 2000 characters****)
Skill Sets : (** this also will have 2000 characters**)

Professional Experience:

Company name: XXXX
Job Profile: (** this also will have 2000 characters**)
Project Description :(** this also will have 2000 characters**)

Company name: YYYYY
Job Profile: (** this also will have 2000 characters**)
Project Description :(** this also will have 2000 characters**)
----------------------------------------------------------------- 
```

我的要求是生成与其类似的 PDf。``

# primefaces - PrimeFaces - 如何添加 在 ?

> ID：12600801
> 
> 赞同：4
> 
> 时间：2012-09-26T11:34:19.173
> 
> 标签：primefaces

我正在使用 PrimeFaces 3.3.1。我需要`<p:submenu>`在`<p:toolbarGroup>`. 有什么办法吗？

我不使用`<p:menubar>`，因为菜单栏存在一些问题。如，

*   当我想悬停一个子菜单项时，它的菜单项会在我单击它们之前消失
*   我正在使用“开始”主题和工具栏看起来比菜单栏好得多
*   没有“对齐”选项。（我知道我可以通过“样式”选项来做到这一点，但工具栏组中对齐选项的使用更简单：）

ETC..

所以我想用`<p:toolbar>`但我不能用`<p:submenu>`in `<p:toolbarGroup>`。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:00:40.540

您应该像这样使用 p:menubutton 和 p:menuitem：

```
<p:toolbarGroup align="right">
    <'p:menuButton value="Options">  
        <p:menuitem value="Home" url="http://www.primefaces.org" />  
        <p:menuitem value="ShowCase" url="http://www.primefaces.org/showcase" />  
        <p:menuitem value="TouchFaces" url="http://www.primefaces.org/showcase/touch" />  
    </p:menuButton>  
</p:toolbarGroup> 
```

# php - 点内三角形解释

> ID：12600804
> 
> 赞同：1
> 
> 时间：2012-09-26T11:34:38.217
> 
> 标签：php, algorithm, math, geometry

我只发现三角形中“命中测试”的算法和实现，如下所示：[http ://www.emanueleferonato.com/2012/06/18/algorithm-to-determine-if-a-point-is-inside-a -triangle-with-mathematics-no-hit-test-involved/](http://www.emanueleferonato.com/2012/06/18/algorithm-to-determine-if-a-point-is-inside-a-triangle-with-mathematics-no-hit-test-involved/)，这个： http: [//www.blackpawn.com/texts/pointinpoly/default.html](http://www.blackpawn.com/texts/pointinpoly/default.html)

但在我工作的项目中，我发现了这段代码：

```
public static function pointInTriangle($x, $y, $x1, $y1, $x2, $y2, $x3, $y3)
{   
    return self::side($x, $y, $x1, $y1, $x2, $y2, $x3, $y3) &&
           self::side($x, $y, $x1, $y1, $x3, $y3, $x2, $y2) &&
           self::side($x, $y, $x3, $y3, $x2, $y2, $x1, $y1);
}

private static function side($x, $y, $x1, $y1, $x2, $y2, $x3, $y3)
{
    if ($x1 - $x2 != 0) {
        $k    = ($y1 - $y2) / ($x1 - $x2);
        $s1   = $y3 - $y1 - $k * ($x3 - $x1);
        $s2   = $y - $y1 - $k * ($x - $x1);
    }
    else {
        $s1   = $x3 - $x1;
        $s2   = $x - $x1;
    }
    return ($s1 * $s2) >= 0;
} 
```

你能向我解释一下这是如何工作的吗？为什么我们需要计算 $k（这是 x1, y1 和 x2, y2 点之间的斜率，不是吗？）？

我在理解第一个子句时遇到问题。为什么我们需要从 y3 和多个 k 中减去例如 y1 来得到 x3 和 x1 的减法结果？这个操作会做什么？$k * ($x3 - $x1) 是什么？$k 是点 $x1,$y1 和 $x2,$y2 之间的斜率，而不是 $x1,$y1 和 $x3,$y3 之间的斜率。

我有一些代数几何的知识。换句话说，如果主公式（直线方程）是 y = kx + b，对于点 (x1, y1) 和 (x2, y2)，然后 f(x3, y3) = y3 - y1 - (y2 - y1) / (x2 - x1) * (x3 - x1)？

我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:20:33.450

该函数`side`回答了“点**x**和**x [3]****是否位于由点x [1]**和**x [2]**形成的直线的同一侧”的问题。**如果x [3]**的所有三个选项的答案都是“是” ，那么点**x**在三角形内。

的实现`side`有点笨拙。看第一条：

```
if ($x1 - $x2 != 0) {
    $k    = ($y1 - $y2) / ($x1 - $x2);
    $s1   = $y3 - $y1 - $k * ($x3 - $x1);
    $s2   = $y - $y1 - $k * ($x - $x1);
} 
```

是的，是从**x** **[1]**到**x** **[2]**`$k`的线的斜率；和分别是这条线上方点**x** **[3]**和**x的高度。**`$s1``$s2`

 **看第二条：

```
else {
    $s1   = $x3 - $x1;
    $s2   = $x - $x1;
} 
```

在这里，`$s1`又`$s2`有着不同的含义。它们是两点在垂直线右侧的距离。

无论哪种方式，这：

```
return ($s1 * $s2) >= 0; 
```

给出正确答案。（如果你对矢量代数感到满意，你会遇到一条几乎垂直的线 - 有一种更清洁，更安全的方式）。

**编辑：**

让我们从第一个子句改写一行：

$s1 = $y3 - $y1 - $k * ($x3 - $x1);
$s1 = $y3 - $k * ($x3 - $x1) - $y1;
$s1 = $y3 - **($k * ($x3 - $x1) + $y1)** ;

**粗体部分是点x [3]**正下方（或上方）线上的点的 y 坐标。**x** **[3]**在该点上方（或下方）`$s1`的高度也是如此。**

# google-chrome - 我怎样才能同时进行多个（多个）黄瓜测试？

> ID：12600808
> 
> 赞同：0
> 
> 时间：2012-09-26T11:34:54.823
> 
> 标签：google-chrome, testing, cucumber, watir-webdriver

我想在 watir-webdriver 的帮助下同时进行多个黄瓜测试。我怎样才能得到（开始）它？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:01:13.010

您可以使用[parallel_tests](https://github.com/grosser/parallel_tests) gem。我在[watir-parallel](https://github.com/zeljkofilipin/watir-parallel)有一些示例代码。

默认情况下，parallel_tests gem 使用可用 CPU 的数量来确定并行运行的进程数：

```
-n [PROCESSES] How many processes to use, default: available CPUs 
```

如果出于某种原因，数字为 1，则可以将该选项显式设置为另一个数字，例如：

```
parallel_cucumber features/ -n 2 
```

# iphone - 从另一个类的函数调用在一个类的函数中声明的对象

> ID：12600809
> 
> 赞同：0
> 
> 时间：2012-09-26T11:34:55.690
> 
> 标签：iphone, objective-c, oop

我在 A 类（tableview 控制器）的一个函数中，我有一个 B 类（UserDetails 类）的对象。类似于：

```
-(void) connectionFinishedLoading:(NSURLConnection*) connection :(UserDetails *) user{

//some code
user=A;
} 
```

我想在 C 类（表视图控制器）的函数（不同于 A 类函数）中使用“用户”对象的值。类似于：

```
 -(void)newfunction :(NSURLConnection*) connection{
 //I want to use the value of "user" here.
  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:41:15.343

将需要在不同类中使用的对象存储在共享占位符类（如 Singleton）中。然后只需获取它的共享实例并检索您需要的对象。谷歌一下得到一个模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:45:12.483

存储值并在各种类中使用它的最佳方法是使用 appDelegate 类的属性。

在你的 appDelegate 类中创建一个属性，比如 NSString *user; 合成它

在 connectionDidFinishLoading 中创建 AppDelegate 的实例，如

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication]delegate];
appDelegate.user = A; 
```

进一步在

```
-(void)newfunction :(NSURLConnection*) connection{
 //I want to use the value of "user" here.
    YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication]delegate];
NSLog(@"%@",appDelegate.user);
  } 
```

# c# - 如何防止在 Button_Click 上将重复项从一个 CheckBoxList 复制到另一个 CheckBoxList？

> ID：12600811
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:35:11.043
> 
> 标签：c#, asp.net, .net

我有两个复选框列表。第一个已经有很少的项目，第二个是未绑定的。我想在单击按钮时将第一个复选框列表的选中项添加到第二个复选框列表中。我为此使用for循环。但问题是当再次单击该按钮时。它复制重复的值。如何防止复制重复值？button_click 事件的代码如下：

```
for (int i = 0; i < CheckBoxList1.Items.Count; i++)
        {
            if (CheckBoxList1.Items[i].Selected)
                CheckBoxList2.Items.Add(CheckBoxList1.Items[i]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:42:27.337

您可以使用以下[`ListItemCollection.Contains`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.contains.aspx)方法：

```
var toAdd = CheckBoxList1.Items.Cast<ListItem>()
                         .Where(li => li.Selected 
                                   && !CheckBoxList2.Items.Contains(li));
foreach(ListItem li in toAdd)
{
    CheckBoxList2.Items.Add(li);
} 
```

请注意，您需要为`using System.Linq`上面的这个小查询添加或使用循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:42:00.837

在[Collection.Contains()](http://msdn.microsoft.com/en-us/library/ms132407.aspx)方法中获取战利品。我认为这将解决您的问题。在将其添加到第二个列表之前执行此操作。

这里有一些伪代码

```
if(!List.Contains(selectedItem)
{
    Add(selectedItem);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:42:57.647

您可以使用 except(System.Linq)

```
 double[] numbers1 = { 2.0, 2.1, 2.2, 2.3, 2.4, 2.5 };
        double[] numbers2 = { 2.2 };

        IEnumerable<double> onlyInFirstSet = numbers1.Except(numbers2);

        foreach (double number in onlyInFirstSet)
            Console.WriteLine(number); 
```

# html - jQuery facebook like popbox 顶部导航

> ID：12600812
> 
> 赞同：-2
> 
> 时间：2012-09-26T11:34:29.027
> 
> 标签：html, css, facebook, jquery

我只想让 facebook 像 popbox 顶部导航如下：

[http://i.stack.imgur.com/kQqJi.png](http://i.stack.imgur.com/kQqJi.png)

问题是，如何用 btn2 切换另一个名为 POPBOX2 的弹出框，用 btn3 切换 POPBOX3 等等。**popBox2**和popBox3的**LAYOUT**与**popBox1**相同，但 popBox 的**箭头****在**btn 下方。这该怎么做？我已经在这个小提琴[http://jsfiddle.net/FArIZzX77/dNVUj/上复制了我的问题](http://jsfiddle.net/FArIZzX77/dNVUj/)

 ******感谢你的回答 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:32:27.193

基本上是这样的。包裹在 jQuery document.ready 中。

**打开弹出框的按钮**

```
$(document).ready(function(){
    $('#linkid').click(function(){
        $('.popupboxclass').hide();
        $('#popupbox1').show();
    });
    $('#link2id').click(function(){
        $('.popupboxclass').hide();
        $('#popupbox2').show();
    });
    $('#link3id').click(function(){
        $('.popupboxclass').hide();
        $('#popupbox3').show();
    });
});​ 
```

**CSS：**

```
.yourcontainer{
position:relative;
}

.popupboxclass{
display:none;
position:absolute;
top:50px;
left;50px;
width:200px;
height:200px;
border:1px solid #000;
} 
```

**HTML**

```
<div class="yourcontainer">
    <a href="#" id="linkid">Open popup 1</a>
    <a href="#" id="link2id">Open popup 2</a>
    <a href="#" id="link3id">Open popup 3</a>
    <div class="popupboxclass" id="popupbox1">Box 1</div>
    <div class="popupboxclass" id="popupbox2">Box 2</div>
    <div class="popupboxclass" id="popupbox3">Box 3</div>
</div>​ 
```

还有一个小提琴：http: [//jsfiddle.net/Sqa2D/1/](http://jsfiddle.net/Sqa2D/1/)

**但是，请在询问之前尝试一下。不要只是坐着等待，认为社区会为你做这件事。这是你可以用 jQuery 做的最简单的事情。**

**编辑** 我误解了一部分，我编辑了我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:11:46.987

看到这个**[EDIT FIDDLE](http://jsfiddle.net/c9fyY/)**把每一个`popbox`分开。******

# android - 无法统计“freetype-2.4.6/{src,include}”：

> ID：12600817
> 
> 赞同：2
> 
> 时间：2012-09-26T11:35:39.023
> 
> 标签：android, linux, android-ndk, apvpdf

在执行 APV Pdf Reader 时，我执行了 sh build-native.sh 。出现以下错误... cp: cannot stat `freetype-2.4.6/{src,include}': No such file or directory build-native.sh: 36: ndk-build: not found

请建议方法....

# sql - 将 have 子句与聚合函数一起使用时出错

> ID：12600819
> 
> 赞同：0
> 
> 时间：2012-09-26T11:35:40.613
> 
> 标签：sql

我在使用 have 子句时遇到问题。由于我不明白的原因，以下 2 个查询会产生一些错误。

以下查询生成此错误：*“有子句”中的未知列“编号”*

```
select avg(number),name from test
group by name
having avg(number) < number 
```

然后以下查询生成此错误：*“有子句”中的未知列“编号”*

```
select name from test 
group by name
having number=min(number) 
```

`number`当我在表中有列时，为什么会出现这些错误`test`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:36:36.237

`HAVING``GROUP BY`仅对子句中列出的聚合列进行操作。在这种情况下使用相关查询来`WHERE`代替，`HAVING`以获得`MIN(number)`类似的结果：

```
SELECT name 
FROM test 
WHERE number = (SELECT MIN(number) FROM test)
GROUP BY name 
```

**编辑：**与您的第一个查询不起作用的原因相同，因为您不能与子句`HAVING`中未列出的任何列一起使用。`GROUP BY`如果你想获得与第一个查询相同的结果，你可以这样写：

```
SELECT AVG(t1.number), t1.name 
FROM test t1
INNER JOIN 
(
   SELECT name, AVG(number) Avg
   FROM test 
   GROUP BY name
) t2 ON t1.name = t2.name AND t1.number < t2.Avg
GROUP BY name 
```

# android - Android文件上传进度对话框错误

> ID：12600821
> 
> 赞同：0
> 
> 时间：2012-09-26T11:35:49.917
> 
> 标签：android, ftp

我得到了这个 AsyncTask 文件上传：

```
// ASync Task Begin to perform Billing information
class performBackgroundTask extends AsyncTask<Void, Void, Void> {
    Context context;
    private ProgressDialog Dialog;

    protected void onPreExecute() {
        // here you have place code which you want to show in UI thread like
        // progressbar or dialog or any layout . here i am displaying a
        // progressDialog with test please wait while loading......

        Dialog.setMessage(" please wait while loading............");
        Dialog.show();

    }

    private Context getApplicationContext() {
        // TODO Auto-generated method stub
        return null;
    }

    protected Void doInBackground(Void... params) {
        // write here the code to download or any background task.
        goforIt(); // example call method which will download vedio .
        return null;
    }

    protected void onPostExecute(Void unused) {
        Dialog.dismiss();
        // the background task is completed .You can do the code here for next
        // things

    }

    public void goforIt() {

        FTPClient con = null;

        try {
            con = new FTPClient();
            con.connect(globalconstant.host);

            if (con.login(globalconstant.nev, globalconstant.jelszo)) {

                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String substr = globalconstant.path.substring(4,
                        globalconstant.path.length());
                String filename = substr + "/Festivale.db";
                Log.e("TravellerLog :: ", substr + "/Festivale.db");
                String data = filename;

                FileInputStream in = new FileInputStream(new File(data));
                boolean result = con.storeFile("/Festivale.db", in);
                in.close();
                if (result)
//                  Toast.makeText(getApplicationContext(),
//                          "A fájl feltöltve!", Toast.LENGTH_SHORT).show();

                Log.v("upload result", "succeeded");
                con.logout();
                con.disconnect();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

但总是得到错误信息，这个：

```
09-26 11:30:30.538: E/AndroidRuntime(456): java.lang.NullPointerException
09-26 11:30:30.538: E/AndroidRuntime(456):  at com.eyecom.festivale.performBackgroundTask.onPreExecute(performBackgroundTask.java:25)
... 
```

第 25 行：`Dialog.setMessage(" please wait while loading............");`

请帮助我如何制作一个适用于此的进度对话框。原文是这样的：

> 私有 ProgressDialog Dialog = new ProgressDialog(this);

但也有这个错误，

> 构造函数 ProgressDialog(performBackgroundTask) 未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:39:01.617

```
public class async extends AsyncTask<void, void, void>{

  private Context context;
  ProgressDialog prog;

  public async(Context context) {
    this.context = context;
  }

  @Override
  protected void onPreExecute() {
    super.onPreExecute();
    prog=new ProgressDialog(context); 
    prog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    prog.setMax(100);
    prog.show();
  }

  // ...
} 
```

然后实例化并运行这个**AsyncTask：**

```
async mTask = new async(context);
mTask.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:47:47.200

您做错了事情，因为 Dialog 从未启动它只是声明未定义。另一件事 Dialog 关键字已经是一个类名，只要您定义任何对象/变量名称开始字符，如果字母必须是小写。开始字符的所有大写字母都用于类名。

**已编辑**

```
private ProgressDialog dialog;

protected void onPreExecute() {
    dialog = ProgressDialog.show(YourActivity.this, "Processing", "please wait while loading............");
} 
```

并且在`onPostExecution(Void unused)`

```
onPostExecution(Void unused){
     if(dialog!=null)
         dialog.dismiss();
} 
```

# c# - 使用开箱即用的 mvc4 从 OpenId 提供程序获取更多数据？

> ID：12600822
> 
> 赞同：1
> 
> 时间：2012-09-26T11:35:54.910
> 
> 标签：c#, openid, asp.net-mvc-4

我正在使用开箱即用的 MVC4 OpenId 实现。

我得到了`AuthenticationResult`使用：

```
var result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl })); 
```

在结果上，您可以使用数组访问提供者特定的数据：

```
result.ExtraData 
```

现在的问题：

我知道作为 OpenId 解决方案的一部分，您可以向提供商索取更多信息。

我如何从默认情况下不提供名字和姓氏的提供商（如 Google 等）请求具体名字和姓氏？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:08:27.240

BrockAllen 有一个有趣的项目，它[集成了 Claims 和 OAuthWebSecurity](http://brockallen.com/2012/09/05/integrating-claims-and-oauthwebsecurity/)。这在从所有不同的提供者获取额外数据、调用它们相同的东西然后将它们附加到 ClaimsPrincipal.Current.Claims 集合中完成了繁重的工作。

在从 google OpenID 获取正确数据方面，旧版本的 DotNetOpenAuth 存在错误。也许通过 nuget 的更新会为您修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T00:21:23.460

我还从头开始创建了一个不同的/新的库来向 OAuth2 提供者进行身份验证，然后使用生成的配置文件数据来填充用户的声明。所以换句话说，它不使用 MVC 4 OAuthWebSecurity（以及因此的 DotNetOpenAuth）实现。

[http://brockallen.com/2012/10/26/integrating-claims-and-oauth2/](http://brockallen.com/2012/10/26/integrating-claims-and-oauth2/)

# java - 增加tomcat 7中的并发连接数

> ID：12600826
> 
> 赞同：5
> 
> 时间：2012-09-26T11:36:00.000
> 
> 标签：java, tomcat, tomcat7

想知道如何增加tomcat 7中的并发连接数。我做了一些研究，从apache文档中发现将值设置为acceptCount，maxConnections并增加maxThreads会做到这一点，但是尝试时，我只能提交500个请求1000。下面是我从 server.xml 文件中提取的片段 -

```
 <Connector port="443" protocol="HTTP/1.1" SSLEnabled="true"
       maxThreads="2000" acceptCount="1000" maxConnections="1000"
       scheme="https" secure="true"
       keystoreFile="certs/tomcat.keystore" keystorePass="xxxxxxxx"
       clientAuth="false" sslProtocol="TLS" server="Apache" /> 
```

你能帮我找出摆脱这个的最好和最简单的方法吗？

谢谢，西里什。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T14:02:29.350

创建大量线程¹并接受大量请求并不意味着你的服务器就能处理这些请求

如果您有 N 个线程并且只有 M 个物理处理器/内核，那么每个线程将获得 1 个处理器 if`M >= N`和一个平均`M / N`处理器 if `M < N`。假设您有 N 个请求，每个请求都在 1 个线程上运行，每个请求需要`R`几秒钟的 CPU 时间。运行一个请求所花费的平均时间`T`是`T = Min(R, R * N / M) seconds`. 很明显，随着您增加`N`（活动线程和活动请求的数量）`T`，每个单独请求的平均经过时间按比例增加。

除此之外，如果您有很多线程，它们都将使用内存，并且都将竞争访问共享数据结构......或数据库。所有这些额外的资源使用和争用都以各种方式增加了整个系统的开销。

所以，我怀疑正在发生的事情是，由于每个线程都试图同时处理请求，时间`T`开始接近客户端或服务器端请求超时。（请注意，调度程序的变幻莫测等意味着任何给定请求的实际时间可能小于或大大超过平均值。）当请求超时时，这反过来会降低获得请求的吞吐量完成，因为对每个超时请求执行的工作（通常）被浪费了。

* * *

除非请求需要与速度较慢的外部服务通信，否则我建议您将线程数减少到不超过 200 ...Tomcat 默认²。我希望这将增加系统吞吐量。它不一定会让您处理在该期间启动的所有 1000 个请求，但我预测它会增加成功处理的请求数量。

^(1 - 事实上，将线程数增加到 1000 并不意味着您将能够接受 1000 个请求。如果您有数百个线程处于 RUNNABLE 状态，则 Tomcat 的侦听器线程（调用 的线程`ServerSocket.accept()`）很可能 CPU 不足，无法跟上请求到达率。)

^(2 - 你需要对你的系统进行一些性能调整，但如果减少它甚至进一步改进事情，我不会感到惊讶。这将取决于您的硬件、您的应用程序和（我希望）您的后端数据库。)

# jquery - Jquery：Ajax 调用 servlet 并以 json 格式获取数据

> ID：12600827
> 
> 赞同：6
> 
> 时间：2012-09-26T11:36:04.510
> 
> 标签：jquery, json, servlets

我是 servlet 的新手，我需要从数据库中获取数据以显示图表

```
 $.ajax({
     url : "NameServlet",
     dataType : 'json',
     error : function(){
        alert("Error Occured");
     },
     success : function(data) {
        var receivedData = [];
    //how to put data in var (i.e. receivedData) which is received from servlet
     }
    }); 
```

什么是我的**servlet**来获取数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:43:21.437

所以这是答案

你 jquery 将数据推送到你的变量

```
$.ajax({

            url : "NameServlet",
            dataType : 'json',
            error : function() {

                alert("Error Occured");
            },
            success : function(data) {
                var receivedData = [];

                $.each(data.jsonArray, function(index) {
                    $.each(data.jsonArray[index], function(key, value) {
                        var point = [];

                            point.push(key);
                            point.push(value);
                            receivedData.push(point);

                        }); 
                });

            }
        }); 
```

在此之后，您需要 servlet 来获取 JSON 对象

Servlet 就像

```
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class NameServlet extends HttpServlet {

        int []sampleData=null;
        //sampleData= here you can get data from database

        //writing data to json
        response.setContentType("application/json;charset=utf-8");

        JSONObject json = new JSONObject();
        JSONArray array = new JSONArray();
        JSONObject member =  new JSONObject();

        member.put("arrayData", sampleData);
        array.add(member);

        json.put("jsonArray", array);

        PrintWriter pw = response.getWriter(); 
        pw.print(json.toString());
        pw.close();

} 
```

希望这可以帮助

# inheritance - 如何强制 EclipseLink 在 InheritanceType.JOINED 策略中为子类创建列？

> ID：12600829
> 
> 赞同：0
> 
> 时间：2012-09-26T11:36:23.080
> 
> 标签：inheritance, jpa, eclipselink

我有两节课：

```
@Entity
@Table(name="a_table")
@Inheritance(strategy= InheritanceType.JOINED)
@DiscriminatorColumn(name="jdoclass", length=255)
public abstract class A {
  @Id
  @Column(name="id")
  private int id;

  @Column(name="other_id")
  private int otherID;

  public A(){
  }
  ...
}

@Entity
@Table(name="b_table", uniqueConstraints = @UniqueConstraint(columnNames = {"other_id", "different_id"}))
public class B extends A {
  @Column(name="other_id")
  private int otherID;

  @Column(name="different_id")
  private int differentID;

  public B() {
  }
  ...
} 
```

当 EclipseLink 创建 SQL 时，它会省略 B 类中的 otherID 字段，并且不会在 DB 中为该字段创建列。即使我更改了 B 类中的列名，仍然没有创建列。

这很容易理解——父类中存在相同的字段。
但由于某些原因，我确实需要创建此列（其中之一是我需要将其放入 UniqueConstraint 表中）。

我找到了一种解决方案：更改 B 类中的“otherID”字段名称。然后正确创建列。但我想避免更改此字段的名称，并威胁将此解决方案作为最终解决方案。

是否有其他解决方案可以强制创建此列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:54:56.333

如果您使用`InheritanceType.JOINED`确保`PrimaryKeyJoinColumn`与数据库。确保 with 的表和`entity`列`database`。尝试如下；

人.java

```
 @Entity
    @Table(name="PERSON")
    @Inheritance(strategy = InheritanceType.JOINED)
    @DiscriminatorColumn(name = "Person_Type")
    public abstract class Person {
        @Id
        @Column(name = "ID")
        private int id;
        @Column(name = "NAME")
        private String name;

        public Person() {
        }

        //getter and setter
    } 
```

学生.java

```
 @Entity
    @Table(name = "STUDENT")
    @PrimaryKeyJoinColumn(name = "ID", referencedColumnName = "ID")
    public class Student extends Person {
        @Column(name = "ROLE_NO")
        private String rollNo;
        @Column(name = "COURSE")
        private String course;

        public Student() {
        }

        public Student(String name, String rollNo, String course) {
            super(name);
            this.rollNo = rollNo;
            this.course = course;

        }
        // getter and setter
    } 
```

# c - 在 -DVARIABLE linux 中添加 Makefile.in

> ID：12600831
> 
> 赞同：0
> 
> 时间：2012-09-26T11:36:27.270
> 
> 标签：c, autoconf, automake, libtool, gnu-make

我正在尝试制作我拥有的 configure.ac + Makefile.in 文件。一切都很好，直到制作：

在这里我有：

```
usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 9 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 10 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 11 has invalid symbol index 12
4-linux-gnu/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status 
```

为什么？

在我的 Makefile.am 中，我确实包括：`AM_CFLAGS = -DMAIN=1`

我究竟做错了什么？

谢谢

**问题已解决，我已将 AM_CFLAGS 替换为 FILE_NAME_CFLAGS！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:30:20.703

问题解决了。
我已经替换`AM_CFLAGS`为`FILE_NAME_CFLAGS`.

# iphone - iPhone导航栏插入png文件

> ID：12600832
> 
> 赞同：0
> 
> 时间：2012-09-26T11:36:27.587
> 
> 标签：iphone, ios5, uitabbar

我有一个 iphone 应用程序，并且我插入了 png 图像而不是文本。我的问题是，这甚至不是问题，但无论如何，图像中有一些像素。它看起来有点划痕。我猜有一些透明度问题。

现在我的问题是，我可以做些什么来提高代码中图像的分辨率吗？图片大小为 120px x 25px；看起来它使图像变大了一点，我需要一些东西来保持它的实际大小。谢谢。

这是我使用的代码：

```
 UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo_bar.png"]];
    self.navigationItem.titleView = imageView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:42:02.240

在这里，也许这段代码可以解决您所有的导航问题

```
self.navigation = [[UINavigationController alloc]initWithRootViewController:self.viewController];
self.navigation.navigationBar.tintColor = [UIColor blackColor];
UINavigationBar *navBar = [[self navigation] navigationBar];
UIImage *backgroundImage = [UIImage imageNamed:@"Navigation1.png"];  
[navBar setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];
self.navigation.navigationBar.translucent = YES;
[self.window setRootViewController:self.navigation];
self.navigation.navigationBar.topItem.title = @"Name"; 
```

# mysql - 删除记录时如何删除文件？

> ID：12600834
> 
> 赞同：6
> 
> 时间：2012-09-26T11:36:32.680
> 
> 标签：mysql

我有一张桌子：

```
CREATE TABLE photo (
    photo_id BIGINT NOT NULL AUTO_INCREMENT,
    property_id BIGINT NOT NULL,
    filename VARCHAR (50) NOT NULL;
    ...
    PRIMARY KEY (photo_id),
    CONSTRAINT photo_fk_property FOREIGN KEY (property_id)
        REFERENCES property (property_id)
        ON DELETE CASCADE
); 
```

当该表中的一行被删除时，它所引用的文件也应该被删除。从该表中删除记录有两种情况：

1.  用户删除一张特定照片。
2.  用户删除一个特定的属性对象（如“房地产”），所有引用该属性的照片都会被自动删除`ON DELETE CASCADE`。

我知道我可以在删除属性之前选择数据库中所有引用的照片并将它们连同文件一起删除，但我正在寻找替代解决方案。`photo`是否有可能捕捉到删除表中的记录并自动删除文件的时刻，而不用退出`CASCADE`子句，也许在触发器中以某种方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T11:43:04.983

您正在寻找[DELETE TRIGGER](http://dev.mysql.com/doc/refman/5.1/en/triggers.html)。有关类似的问题和解决方案，请参见[此处。](https://stackoverflow.com/questions/668666/when-a-new-row-in-database-is-added-an-external-command-line-program-must-be-in)外部操作可以通过安装[sys_exec](https://github.com/mysqludf/lib_mysqludf_sys)来实现。

```
CREATE TRIGGER foobar
AFTER DELETE ON photo
FOR EACH ROW
BEGIN
   CALL sys_exec(concat('/bin/rm -f ',filename));
END 
```

# iis - 分析故障转储，错误符号

> ID：12600837
> 
> 赞同：3
> 
> 时间：2012-09-26T11:36:41.183
> 
> 标签：iis, windbg, crash-dumps

我无法使用 windbg 分析故障转储。我跑：

```
.sympath SRV*c:\symbols*http://msdl.microsoft.com/download/symbols
.reload /f /i 
```

获取符号。所有符号似乎都已下载到 c:\symbols 然后我运行：

```
analyze -v 
```

进行分析。但我在结果中得到“WRONG_SYMBOLS”（见下文）。我在转储文件所在的同一台计算机上运行 windbg（Windows Server 2008 64 位）。为什么我的符号不能正确加载？

```
FAULTING_IP: 
+0
000007ff`00be314a 4c8be0          mov     r12,rax

EXCEPTION_RECORD:  ffffffffffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 00000000777530e5 (ntdll!RtlLookupFunctionTable+0x0000000000000035)
   ExceptionCode: c00000fd (Stack overflow)
  ExceptionFlags: 00000000
NumberParameters: 2
   Parameter[0]: 0000000000000001
   Parameter[1]: 000000001d535fa8

DEFAULT_BUCKET_ID:  WRONG_SYMBOLS

PROCESS_NAME:  w3wp.exe

USER_LCID_STR:  ENU

OS_SKU:  7

ERROR_CODE: (NTSTATUS) 0xc00000fd - A new guard page for the stack cannot be created.

EXCEPTION_CODE: (NTSTATUS) 0xc00000fd - A new guard page for the stack cannot be created.

EXCEPTION_PARAMETER1:  0000000000000001

EXCEPTION_PARAMETER2:  000000001d535fa8

RECURRING_STACK: From frames 0x34 to 0x34

NTGLOBALFLAG:  0

APPLICATION_VERIFIER_FLAGS:  0

APP:  w3wp.exe

MANAGED_STACK: !dumpstack -EE
No export dumpstack found

PRIMARY_PROBLEM_CLASS:  WRONG_SYMBOLS

BUGCHECK_STR:  APPLICATION_FAULT_WRONG_SYMBOLS_STACK_OVERFLOW

LAST_CONTROL_TRANSFER:  from 0000000000000000 to 0000000000000000

ADDITIONAL_DEBUG_TEXT:  Followup set based on attribute [Is_ChosenCrashFollowupThread] from Frame:[0] on thread:[PSEUDO_THREAD]

STACK_TEXT:  
00000000`1d535fb0 00000000`777531d1 : 00000000`1d536148 00000000`1d5360c8 00000000`1d536080 00000000`00000000 : ntdll!RtlLookupFunctionTable+0x35
00000000`1d536040 000007fe`eb806d6b : 00000000`1d536748 00000000`1d538160 00000000`00000000 00000000`00000000 : ntdll!RtlLookupFunctionEntry+0x31
00000000`1d536070 000007fe`eb806bd9 : 00000000`1d536df0 00000000`1d538810 00000000`1d5380b8 000007fe`eb806e5d : clr!LazyMachState::unwindLazyState+0x12b
00000000`1d536700 000007fe`eb805d45 : 00000000`1d536a30 000007fe`00000000 00000000`1d5368f8 000007fe`eb986c5c : clr!HelperMethodFrame::GetFunction+0xd4
00000000`1d5367e0 000007fe`eb80609c : ffffffff`fffffffe 000007fe`eb750000 000007fe`eb750000 000007fe`e3966de8 : clr!StackFrameIterator::ProcessCurrentFrame+0x8ae
00000000`1d5368f0 000007fe`eb80638b : 00000000`1d537fa8 00000000`1d5abee0 00000000`1d5abff0 00000000`1d536a30 : clr!StackFrameIterator::NextRaw+0x35c
00000000`1d536980 000007fe`eb8064a1 : 00000000`000000dc 000007fe`eb8054e9 00000000`00000000 00000000`1d536a30 : clr!StackFrameIterator::Filter+0x1a4
00000000`1d5369c0 000007fe`eb805c96 : 00000000`1d5372a0 00000000`00000000 00000000`00000002 000007fe`eb986c5c : clr!StackFrameIterator::Init+0xe6
00000000`1d536a00 000007fe`eb80534e : 00000000`1bada2f0 00000000`1bada2f0 00000000`000000d7 000007fe`e3966de8 : clr!Thread::StackWalkFramesEx+0x76
00000000`1d536da0 000007fe`eb8221b7 : 000007fe`ebdcefc0 00000000`00000000 00000000`00000000 00000000`02758050 : clr!Thread::StackWalkFrames+0xb1
00000000`1d537eb0 000007fe`e38a10f6 : 00000000`02876970 00000000`12733d80 00000000`1d5382a0 000007fe`00000001 : clr!SecurityStackWalk::CheckNReturnSO+0x2b7
00000000`1d538240 000007fe`e38a109e : 00000000`03412510 00000000`1bada2f0 00000000`00000000 00000000`02b31358 : mscorlib_ni+0x3810f6
00000000`1d538280 000007fe`e391d327 : 00000000`02b31358 00000000`00000000 00000000`00000000 00000000`01a2bb60 : mscorlib_ni+0x38109e
00000000`1d5382c0 000007fe`e391d219 : ffffffff`fffffffe 00000000`0000001c 00000000`00000000 00000000`0275dfd8 : mscorlib_ni+0x3fd327
00000000`1d538340 000007fe`e3efa480 : 00000000`00000000 000007fe`e38b058f 00000000`02b314e8 00000000`032dcd50 : mscorlib_ni+0x3fd219
00000000`1d538380 000007fe`e3f11e1f : 00000000`00000000 000007fe`e3f11f5b 00000000`00000000 00000000`00000000 : mscorlib_ni+0x9da480
00000000`1d5383c0 000007fe`eb8090b4 : 00000000`00000004 00000000`0275dfd8 00000000`03411588 00000000`00000000 : mscorlib_ni+0x9f1e1f
00000000`1d538410 000007fe`eb8091c9 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : clr!CallDescrWorker+0x84
00000000`1d538470 000007fe`eb809245 : 00000000`1d538588 00000000`00000003 00000000`1d5385a0 00000000`1d538908 : clr!CallDescrWorkerWithHandler+0xa9
00000000`1d5384f0 000007fe`eb809718 : 00000000`1d5388f0 000007fe`e3f11f30 00000000`1d538800 00000000`00000001 : clr!MethodDesc::CallDescr+0x2a1
00000000`1d538730 000007fe`ebc6928a : 00000000`1b9313e0 00000000`1d538870 00000000`00000004 00000000`00000000 : clr!MethodDesc::CallTargetWorker+0x44
00000000`1d538770 000007fe`ebcd62e0 : 000007ff`00f256a8 000007fe`ebddd180 000007ff`00f256a8 00000000`1d538e60 : clr!SecurityStackWalk::ReflectionTargetDemand+0xca
00000000`1d538930 000007fe`eb7b7972 : 00000000`1d538e60 000007ff`00f256a8 000007ff`00d7cd10 000007fe`00000000 : clr!AccessCheckOptions::DemandMemberAccess+0xa1
00000000`1d538a00 000007fe`eb7b7a91 : 00000000`1d538e60 000007ff`0062ab28 000007ff`0062ab28 00000000`1d539040 : clr!ClassLoader::CheckAccess+0x132
00000000`1d538ac0 000007fe`eb7c4193 : 000007ff`0062ab28 000007ff`0062ab28 00000000`1b95ce60 000007ff`00d7cd10 : clr!ClassLoader::CanAccess+0x111
00000000`1d538bb0 000007fe`eb7b7b1a : 00000000`1d538e60 000007ff`0062ab28 00000000`1d538e10 00000000`00000001 : clr!ClassLoader::CanAccessClass+0x226
00000000`1d538c60 000007fe`eb7b7a91 : 00000000`00000000 00000000`00000000 000007fe`ebfc0010 00000000`000000be : clr!ClassLoader::CheckAccess+0x3b
00000000`1d538d20 000007fe`eb7bf438 : 00000000`1b95ce60 00000000`00000000 00000000`1b95ce60 000007ff`00ee9278 : clr!ClassLoader::CanAccess+0x111
00000000`1d538e10 000007fe`eb7bf1bf : 000007ff`00f265b8 00000000`00000000 00000000`00000002 000007ff`00f256a8 : clr!CEEInfo::GetFieldInfoHelper+0x238
00000000`1d538ed0 000007fe`f1c87e44 : 00000000`1d5397f0 00000000`04000005 00000000`013303b8 000007ff`00f265b9 : clr!CEEInfo::getFieldInfo+0xcf
00000000`1d538f80 000007fe`f1be8937 : 00000000`00000074 00000000`0000000d 00000000`04000005 00000000`00000074 : clrjit!ReaderBase::VerifyFieldAccess+0x110
00000000`1d539110 000007fe`f1be8cc7 : 00000000`00000000 000007fe`f1c875dc 00000000`00000001 00000000`1d5398e4 : clrjit!ReaderBase::readBytesForFlowGraphNode_Helper+0x1157
00000000`1d539640 000007fe`f1bd22c7 : 00000000`1d5397f0 00000000`01340190 00000000`00000001 00000000`01308cb8 : clrjit!ReaderBase::readBytesForFlowGraphNode+0x197
00000000`1d5396f0 000007fe`f1bd15c6 : 00000000`00000001 00000000`00000001 000007fe`00000009 00000000`013303a8 : clrjit!ReaderBase::MSILToIR+0x1d7
00000000`1d539780 000007fe`f1bd2cae : 00000000`01a79780 00000000`1d879c20 000007fe`ebe47890 00000000`1bada2f0 : clrjit!THX_dop2+0x2c9
00000000`1d5399c0 000007fe`eb7c9853 : 00000000`1bada2f0 00000000`00000000 00000000`00000000 000007fe`eb75d0ed : clrjit!PreJit::compileMethod+0xba
00000000`1d539a40 000007fe`eb7c9783 : 00000000`01aa18a0 00000000`1d539cf0 00000000`1d539e30 00000000`00800000 : clr!invokeCompileMethodHelper+0xa7
00000000`1d539ad0 000007fe`eb7c96ba : 00000000`00800000 00000000`1d539cc0 00000000`1d539cf0 000007fe`eb757f75 : clr!invokeCompileMethod+0x63
00000000`1d539b30 000007fe`eb7c94b4 : 00000000`1b95ce60 00000000`1d539cf0 00000000`1b95ce60 000007ff`00800000 : clr!CallCompileMethodWithSEHWrapper+0x46
00000000`1d539bc0 000007fe`eb829944 : 00000000`00000001 00000000`00000000 00000000`00000000 00000000`00000000 : clr!UnsafeJitFunction+0x270
00000000`1d53a190 000007fe`eb7b70a6 : 00000000`00000000 00000000`00000000 00000000`1d53a4a8 000007ff`00f256a8 : clr!MethodDesc::IsVerifiable+0xe4
00000000`1d53a220 000007fe`eb829c1c : 00000000`00000010 00000000`1d53a3d0 00000000`00000000 00000000`00000000 : clr! ?? ::FNODOBFM::`string'+0xb4ef3
00000000`1d53a320 000007fe`eb7c9455 : 00000000`1b95ce60 00000000`1d53a460 00000000`1b95ce60 000007ff`0062ab28 : clr!GetCompileFlagsIfGenericInstantiation+0x83
00000000`1d53a360 000007fe`eb7f0741 : 00000000`00000000 00000000`00000000 000007ff`00f256a8 00000000`00000000 : clr!UnsafeJitFunction+0x211
00000000`1d53a930 000007fe`eb7f04b8 : 000007ff`00f256a8 00000000`00000001 000007ff`0062ab28 00000000`1baf0f00 : clr!MethodDesc::MakeJitWorker+0x1dd
00000000`1d53aaa0 000007fe`ebced34c : 000007ff`00f256a8 00000000`00000000 00000000`03410dd0 00000000`00000000 : clr!MethodDesc::DoPrestub+0x522
00000000`1d53abb0 000007fe`e417d9b9 : 00000000`03411568 00000000`027f9db0 00000000`03410c88 00000000`0340d350 : clr!MethodDesc::CompileMethod+0xfc
00000000`1d53ad50 000007fe`e2dcd0ba : 00000000`03410678 00000000`03410a50 00000000`02abddc0 000007fe`eb7890f2 : mscorlib_ni+0xc5d9b9
00000000`1d53ada0 000007ff`009576f2 : 00000000`03410228 00000000`034101d8 00000000`0340daa8 00000000`0340e420 : System_Core_ni+0x2ad0ba
00000000`1d53adf0 000007ff`0095759c : 000007ff`00d043b0 00000000`02a8a240 00000000`0340e420 000007fe`e2dc3b7a : 0x000007ff`009576f2
00000000`1d53ae40 000007ff`00be315f : 00000000`0340d098 00000000`03410040 00000000`03410040 00000000`03410040 : 0x000007ff`0095759c
00000000`1d53ae80 000007ff`00be314a : 00000000`0340d098 00000000`03410040 00000000`03410040 00000000`03410040 : 0x000007ff`00be315f
00000000`1d53aef0 000007ff`00be314a : 00000000`0340d098 00000000`03410040 00000000`0340e058 00000000`03410040 : 0x000007ff`00be314a
00000000`1d53af60 000007ff`00be2fa3 : 00000000`02efe748 000007ff`00c572f8 00000000`0340e058 00000000`0340de40 : 0x000007ff`00be314a
00000000`1d53afd0 000007ff`00be2e7b : 000007fe`e2e4c578 000007fe`eb7890d0 000007ff`009a7620 000007ff`009a63b0 : 0x000007ff`00be2fa3
00000000`1d53b040 000007ff`0095739e : 00000000`0340e420 00000000`03410138 00000000`02e85f80 00000000`03410040 : 0x000007ff`00be2e7b
00000000`1d53b080 000007ff`00957127 : 00000000`03410138 000007ff`009aaad0 00000000`0340e480 000007fe`e2dcdccf : 0x000007ff`0095739e
00000000`1d53b0d0 000007ff`00956db6 : 00000000`02e85f80 000007ff`009a9708 00000000`0340e5d8 00000000`0340e480 : 0x000007ff`00957127
00000000`1d53b130 000007ff`0095739e : 00000000`0340e5d8 00000000`034100d8 00000000`02e85f80 00000000`03410040 : 0x000007ff`00956db6
00000000`1d53b180 000007ff`00957127 : 00000000`034100d8 000007ff`009aaad0 00000000`0340ef90 000007fe`e2dcdccf : 0x000007ff`0095739e
00000000`1d53b1d0 000007ff`00956db6 : 00000000`02e85f80 000007ff`009a9708 00000000`0340f100 00000000`0340ef90 : 0x000007ff`00957127
00000000`1d53b230 000007ff`0095739e : 00000000`0340f100 00000000`03410078 00000000`02e85f80 00000000`03410040 : 0x000007ff`00956db6
00000000`1d53b280 000007ff`00957127 : 00000000`03410078 000007ff`009aaad0 00000000`0340f5b0 000007fe`e2dcdccf : 0x000007ff`0095739e
00000000`1d53b2d0 000007ff`00956db6 : 00000000`02e85f80 000007ff`009a9708 00000000`0340f708 00000000`0340f5b0 : 0x000007ff`00957127
00000000`1d53b330 000007ff`0095626a : 00000000`00000000 00000000`0340f100 00000000`00000000 000007fe`e2dc0eb4 : 0x000007ff`00956db6
00000000`1d53b380 000007ff`0095614a : 00000000`0340e5f8 00000000`00000000 00000000`0303b008 00000000`00000000 : 0x000007ff`0095626a
00000000`1d53b3f0 000007ff`009560aa : 000007ff`009a4cd8 000007fe`e2e35c18 00000000`00000001 000007ff`00ee8908 : 0x000007ff`0095614a
00000000`1d53b450 000007fe`e2fcc15f : 00000000`0340f708 000007ff`00ee8908 00000000`0340f120 00000000`0303b008 : 0x000007ff`009560aa
00000000`1d53b480 000007ff`00d411c9 : 000007ff`00e89758 00000000`0340e8b8 00000000`0340e618 00000000`0340d4d8 : System_Core_ni+0x4ac15f
00000000`1d53b4e0 000007ff`00d411eb : 000007ff`00e89758 00000000`033f3398 00000000`033f30f8 00000000`033f1fb8 : 0x000007ff`00d411c9
00000000`1d53b560 000007ff`00d411eb : 000007ff`00e89758 00000000`033d7ea0 00000000`033d7c00 00000000`033d6ac0 : 0x000007ff`00d411eb
00000000`1d53b5e0 000007ff`00d411eb : 000007ff`00e89758 00000000`033bc980 00000000`033bc6e0 00000000`033bb5a0 : 0x000007ff`00d411eb
00000000`1d53b660 000007ff`00d411eb : 000007ff`00e89758 00000000`033a1488 00000000`033a11e8 00000000`033a00a8 : 0x000007ff`00d411eb
00000000`1d53b6e0 000007ff`00d411eb : 000007ff`00e89758 00000000`03385f68 00000000`03385cc8 00000000`03384b88 : 0x000007ff`00d411eb
00000000`1d53b760 000007ff`00d411eb : 000007ff`00e89758 00000000`0336aa70 00000000`0336a7d0 00000000`03369690 : 0x000007ff`00d411eb
00000000`1d53b7e0 000007ff`00d411eb : 000007ff`00e89758 00000000`0334f550 00000000`0334f2b0 00000000`0334e170 : 0x000007ff`00d411eb
00000000`1d53b860 000007ff`00d411eb : 000007ff`00e89758 00000000`03333f40 00000000`03333ca0 00000000`03332b60 : 0x000007ff`00d411eb
00000000`1d53b8e0 000007ff`00d411eb : 000007ff`00e89758 00000000`03318a20 00000000`03318780 00000000`03317640 : 0x000007ff`00d411eb
00000000`1d53b960 000007ff`00d411eb : 000007ff`00e89758 00000000`032fd528 00000000`032fd288 00000000`032fc148 : 0x000007ff`00d411eb
00000000`1d53b9e0 000007ff`00d411eb : 000007ff`00e89758 00000000`032d7108 00000000`032d6e68 00000000`032d58f0 : 0x000007ff`00d411eb
00000000`1d53ba60 000007ff`00d411eb : 000007ff`00e89758 00000000`03617568 00000000`036172c8 00000000`03616188 : 0x000007ff`00d411eb
00000000`1d53bae0 000007ff`00d411eb : 000007ff`00e89758 00000000`035fc048 00000000`035fbda8 00000000`035fac68 : 0x000007ff`00d411eb
00000000`1d53bb60 000007ff`00d411eb : 000007ff`00e89758 00000000`035e0b50 00000000`035e08b0 00000000`035df770 : 0x000007ff`00d411eb
00000000`1d53bbe0 000007ff`00d411eb : 000007ff`00e89758 00000000`035c5630 00000000`035c5390 00000000`035c4250 : 0x000007ff`00d411eb
00000000`1d53bc60 000007ff`00d411eb : 000007ff`00e89758 00000000`035aa138 00000000`035a9e98 00000000`035a8d58 : 0x000007ff`00d411eb
00000000`1d53bce0 000007ff`00d411eb : 000007ff`00e89758 00000000`0358ec18 00000000`0358e978 00000000`0358b2f0 : 0x000007ff`00d411eb
00000000`1d53bd60 000007ff`00d411eb : 000007ff`00e89758 00000000`03573720 00000000`03573480 00000000`0356fdf8 : 0x000007ff`00d411eb

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  w3wp.exe!unknown_error_in_process

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: w3wp

IMAGE_NAME:  w3wp.exe

DEBUG_FLR_IMAGE_TIMESTAMP:  49e03238

STACK_COMMAND:  ~16s; .ecxr ; kb

FAILURE_BUCKET_ID:  WRONG_SYMBOLS_c00000fd_w3wp.exe!unknown_error_in_process

BUCKET_ID:  X64_APPLICATION_FAULT_WRONG_SYMBOLS_STACK_OVERFLOW_w3wp.exe!unknown_error_in_process

WATSON_STAGEONE_URL:  http://watson.microsoft.com/StageOne/w3wp_exe/7_0_6002_18005/49e03238/ntdll_dll/6_0_6002_18541/4ec3e855/c00000fd/000330e5.htm?Retriage=1

Followup: MachineOwner 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:07:52.120

你的司机是`clr`？该驱动程序的符号是正确的。某些操作系统符号似乎丢失了，但您可能不需要它们。似乎您遇到了堆栈溢出（查看调试输出的开头） - 听起来很合理，堆栈很长。

# c++ - 在地图内迭代地图

> ID：12600840
> 
> 赞同：0
> 
> 时间：2012-09-26T11:36:52.400
> 
> 标签：c++, map, loops

我在遍历地图中的第二张地图时遇到问题。

```
#include <map>

using namespace std;

map<string, map<string, string> > mymap;
map<string, map<string, string> >::iterator itm;
pair<map<string, map<string, string> >::iterator,bool> retm;

for( itm=mymap.begin(); itm!=mymap.end(); ++itm)
{
cout << "first:\t" << it->first << endl;
} 
```

如何遍历第二个映射并获取第一个和第二个键/值？

第二个问题是，如何使用地图附带的“插入”功能“插入”到第一张和第二张地图中？

我希望有人有完整的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:41:45.830

`it->second`会给你“第二张地图”。只是迭代它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:41:06.047

```
#include <map>
#include <iostream>
using namespace std;

map<string, map<string, string> > mymap;
map<string, map<string, string> >::iterator itm;
pair<map<string, map<string, string> >::iterator,bool> retm;

int main() {

  /* populate: */
  mymap.insert(make_pair ("something", map<string, string>()));
  mymap["something"].insert(make_pair ("2", "two"));

  /* traverse: */
  for( itm=mymap.begin(); itm!=mymap.end(); ++itm)
  {
    cout << "first:\t" << itm->first << endl;

    for (map<string, string>::iterator inner_it = (*itm).second.begin();
        inner_it != (*itm).second.end(); 
        inner_it++) {
      cout << (*inner_it).first << " => " << (*inner_it).second << endl;
    }   

  }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T11:42:03.200

您将需要在额外的嵌套 for 循环中使用第二个迭代器来迭代 it->second，就像您迭代 mymap 一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T11:42:03.870

像这样：

```
typedef std::map<std::string, std::map<std::string, std::string>>::iterator outer_it;
typedef std::map<std::string, std::string>::iterator                        inner_it;

for (outer_it it1 = mymap.begin(); it1 != mymap.end(); ++it1)
{
    for (inner_it it2 = it1->second.begin(); it2 != it1->second.end(); ++it2)
    {
        std::cout << "first: " << it1->first << ", second: " << it2->first
                  << ", value: " << it2->second << std::endl;
    }
} 
```

插入：

```
mymap["hello"]["world"] = "foo"; 
```

或者，使用`insert`：

```
mymap["hello"].insert(std::make_pair("world", "foo")); 
```

如果要插入多个值，只需执行一次外部查找：

```
std::map<std::string, std::string> & m = mymap["hello"];
m.insert(std::make_pair("world", "foo"));
m.insert(std::make_pair("word",  "boo"));
m.insert(std::make_pair("lord",  "coo")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T12:23:52.837

在 C++11 中，您可以这样做：

```
for (const auto& outerElem: mymap) {
    cout << "First: " << outerElem.first << endl;
    for (const auto& innerElem: outerElem.second) {
        cout << "  First: " << innerElem.first << endl;
        cout << "  Second: " << innerElem.second << endl;
    }
} 
```

在 C++03 中，您也可以使用[BOOST_FOREACH](http://www.boost.org/doc/libs/1_48_0/doc/html/foreach.html)来执行此操作。但是你不能使用`auto`，所以最好像这样 typedef 每种类型。无论如何，使用这样的 typedef 是个好主意。

```
typedef map<string, string> innerMap;
typedef map<string, innerMap> outerMap; 
```

# javascript - 使用 SpiderMonkey 公共 API 复制 for...in 循环

> ID：12600842
> 
> 赞同：1
> 
> 时间：2012-09-26T11:36:57.167
> 
> 标签：javascript, for-loop, spidermonkey

我正在尝试使用公共 C JSAPI 在 SpiderMonkey（最新版本）中探测一些 JavaScript。

如何`for...in`使用公共 JSAPI 调用（例如 JS_GetPropertyById、JS_LookupProperty、JS_Enumerate 等）复制循环的行为？[JS_Enumerate](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_Enumerate)的文档说它只返回目标对象的可枚举属性；它不会在对象的原型链中搜索属性。我想复制`for...in`循环的确切行为，但避免将代码注入 JS 环境。看起来 JS_NewPropertyIterator 可能已被弃用，或者是弃用的有力候选者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:19:19.040

我的第一印象是，这可能不是一件好事。这不是我永远不会做的事情，因为它的行为`for...in`有点奇怪和特殊，我只是不认为这是正确的事情。但如果这真的是你想要的，请继续阅读。

在内部，一个实际的`for...in`循环使用`js::ValueToIterator`，并且该函数似乎没有通过 JSAPI 公开（至少 jsapi.cpp 不会在任何地方调用它）。所以你有两个选择：

1.  说服 Mozilla JS 团队通过 JSAPI 公开`for...in`机器（如果您愿意帮助这项工作，这是可行的）；或者

2.  实际编译一些有`for...in`循环的 JS 代码。

选项 2 对您来说会更快。您可以使用此功能，例如：

```
function ForInResults(obj) {
    return [v for (v in obj)];
} 
```

或者，如果您更喜欢迭代器：

```
function ForInIterator(obj) {
    for (var v in obj)
        yield v;
} 
```

您可以使用 编译这些函数中的任何一个`JS_CompileFunction`，然后使用 调用它`JS_CallFunctionValue`。要从数组中取出单个元素，请使用`JS_GetArrayLength`and `JS_GetElement`。从迭代器中获取值有点棘手，但在循环时添加或删除属性的不寻常情况下，它更像是一个真正`for...in`的循环。

# android - 观察应用程序的活跃活动

> ID：12600843
> 
> 赞同：0
> 
> 时间：2012-09-26T11:37:00.640
> 
> 标签：android

是否可以以任何方式观察应用程序上下文中的活动活动？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:06:11.007

一个应用程序一次只能有一个活动活动，该活动是屏幕上显示的活动。通过 android 活动生命周期了解更多信息。![在此处输入图像描述](../Images/72cd40e1796c69f179d83b58ee4c73e8.png)

如您所见，活动可以处于多种状态。活动/可见的状态是处于运行状态的状态。

如果你已经开始在 Eclipse 之类的 IDE 中开发 android 应用程序，你可以通过观察 logcat 来了解幕后发生的事情。这是我的一个应用程序的屏幕截图，您可以观察向用户显示的活动![在此处输入图像描述](../Images/cfd954c580f9f587fcfc29d5cf4852a2.png)

要了解设备上的当前活动，我认为您可能应该查看由应用程序生成的日志文件，例如

[NE-调试器](https://play.google.com/store/apps/details?id=de.softxperience.android.nedebug&hl=en)

[日志猫](https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=search_result#?t=W251bGwsMSwxLDEsIm9yZy5qdGIuYWxvZ2NhdCJd)

[目录日志](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5ub2xhbmxhd3Nvbi5sb2djYXQiXQ..)

# macos - 在 Cocoa 中删除文件的正确方法

> ID：12600844
> 
> 赞同：3
> 
> 时间：2012-09-26T11:37:01.763
> 
> 标签：macos, cocoa, foundation

在 Cocoa 中删除文件（可能存在也可能不存在）的正确方法是什么？

如果我尝试删除不存在的文件，则会收到错误消息。[然而，似乎不鼓励](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/fileExistsAtPath%3a)询问文件是否存在：

> 不建议尝试基于文件系统的当前状态或文件系统上的特定文件来预测行为。这样做可能会导致奇怪的行为或竞争条件。尝试操作（例如加载文件或创建目录）、检查错误并优雅地处理这些错误比尝试提前确定操作是否成功要好得多。

我目前正在执行以下操作：

```
[[NSFileManager defaultManager] removeItemAtPath:filePath error:&error];
if (error.code != NSFileNoSuchFileError) {
    NSLog(@"%@", error);
} 
```

还有其他我应该注意的边境案件吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T17:44:42.317

> 在 Cocoa 中删除文件（可能存在也可能不存在）的正确方法是什么？
> 
> 如果我尝试删除不存在的文件，则会收到错误消息。然而，似乎不鼓励询问文件是否存在：
> 
> > 不建议尝试基于文件系统的当前状态或文件系统上的特定文件来预测行为。这样做可能会导致奇怪的行为或竞争条件。尝试操作（例如加载文件或创建目录）、检查错误并优雅地处理这些错误比尝试提前确定操作是否成功要好得多。

正确的方法是那里所说的：尝试一下，看看是否有错误。

有些错误，尤其是 no-such-file，您可以忽略。其他人，您可能想尝试从中恢复——例如，如果错误与权限有关，您可能会尝试请求管理员权限。任何致命的东西，你都应该呈现给用户。

> 我目前正在执行以下操作：
> 
> ```
> [[NSFileManager defaultManager] removeItemAtPath:filePath error:&error];
> if (error.code != NSFileNoSuchFileError) {
>     NSLog(@"%@", error);
> } 
> ```
> 
> 还有其他我应该注意的边境案件吗？

是的：

*   `error``nil`当方法成功时，不保证设置为（或根本不设置）。您应该首先检查该方法是否失败，并且仅`error`在该方法确实返回失败时才尝试使用。
*   NSError 既有域也有代码。您只检查其中之一。代码的含义由域决定；例如，4 在 Cocoa 错误域中表示“没有这样的文件”，但在 POSIX 错误域中表示“系统调用中断”，在错误域中表示“被零除” `OSStatus`。这就是为什么您需要针对要测试的错误比较*域*和代码的原因。
*   如果此代码在除主线程之外的任何线程上运行，`defaultManager`则使用错误。创建您自己的 NSFileManager 对象并使用该对象。
*   登录到控制台足以在开发期间进行调试，但您应该将其更改为`presentError:`消息（在主线程上，如果您还没有的话）以在警报框中将其报告给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:45:46.287

认为你在标记上。我唯一要做的就是使用[NSFileManagerDelegate](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSFileManagerDelegate_Protocol/Reference/Reference.html)来决定在删除文件之前/之后做什么（出错）。

# windows - 带有 flex 2.5.4 的无法识别的 %option bison-bridge

> ID：12600846
> 
> 赞同：3
> 
> 时间：2012-09-26T11:37:12.387
> 
> 标签：windows, mingw, bison, flex-lexer

我刚刚安装了 flex，我正在用它的 2.5.4 版本在 windows 7 64 位上尝试一些简单的测试。我想将它与野牛生成的解析器集成。因此，[弹性手册](http://www.lrde.epita.fr/~akim/ccmp/doc/flex-2.5.22.html#Scanner%20Options)说必须声明 %option bison-bridge。

在输入 .l 文件上运行 flex 时，出现错误：

```
Unrecognized %option bison-bridge 
```

我尝试在命令行中而不是在输入中设置此选项，但是在键入时：

```
flex.exe --help 
```

没有可用的选项设置“野牛桥”......

有人可以帮我吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:38:49.973

好吧，使用更新版本的 flex 是最好的答案，但如果你真的必须使用旧版本的 flex，过去可以通过`YY_DECL`在 .l 文件顶部定义宏来访问这种功能：

```
%{
#define YY_DECL    int yylex(YYSTYPE *yylval)
%} 
```

会做相当于`%option bison-bridge`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T14:32:55.440

为什么要使用这么古老的[Flex](https://github.com/westes/flex)版本？2.5.31 版本于 2003 年发布；当前版本是 2012 年 8 月的 2.5.37。

我不确定 Flex 2.5.4 何时发布（源代码仍可在上面的 URL 中找到），但它可能根本不包括您所追求的功能。

升级！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T20:06:44.100

you can use latest versions of flex&bison for windows from [http://sourceforge.net/projects/winflexbison/](http://sourceforge.net/projects/winflexbison/)

# windows - 是否有用于转义 HTML 的 WinAPI 本机函数？

> ID：12600849
> 
> 赞同：0
> 
> 时间：2012-09-26T11:37:25.743
> 
> 标签：windows, winapi, escaping, html-escape-characters

是否有本机 WinAPI 可以调用以将 HTML/XML 的字符串转义到`&lt;` `&gt;`等中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:19:59.700

据我所知，Windows API 不提供任何这样简单的功能。这种功能通常由库提供。

通常，您将使用 HTML 或 XML 库来生成 HTML 或 XML。这几乎总是比尝试自己组装更好的策略。这些库将为您进行必要的转义。

例如，在 Windows 上使用 XML 的常用库是[MSXML](http://msdn.microsoft.com/en-us/library/windows/desktop/ms763742.aspx)。您可以使用该库来解析和发出 XML，它会为您处理转义。

# javascript - iframe嵌入页面

> ID：12600852
> 
> 赞同：0
> 
> 时间：2012-09-26T11:37:31.750
> 
> 标签：javascript, css, iframe, css-float

[我在http://kuroato.com/apo/adplay.html](http://kuroato.com/apo/adplay.html)有一个 iframe 页面，我想将此 iframe 嵌入到[http://kuroato.com/apo/iframe.html](http://kuroato.com/apo/iframe.html)是同一目录但每当我尝试添加它使用

```
<iframe src="adplay.html" height="700" width="800" allowtransparency="true" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" alt="" title=" "/></iframe> 
```

它只是在那个 div 框中右对齐......只有左半部分仍然可见。

我的 adplay.html 正在使用 style.css，而 iframe.html 正在使用 iframe.css 文件。

帮帮我...我希望它根据 div 窗口大小动态添加自己。

请帮我解决这个问题。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:47:20.190

如果要在 platform.html 中设置 iframe 的对齐方式，则需要将 iframe 包装在 div 或占位符中并设置对齐方式，例如

```
<html>
<body>
<div style="width:100%;text-align:right"><iframe src="eclipse.html"></div>
</body>
</html> 
```

让我知道是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:49:11.913

我无法完全看到您要描述的内容，但这似乎是一个 CSS 问题。首先，`height="700" width="800"`您的 iframe 中有一个。不建议这样做，可能与您的 CSS 有冲突。尝试在 CSS 文件中设置高度和宽度值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:49:37.257

您有一个#gameBox css 规则，其中包含“margin-right:100px”（这就是它左对齐的原因）。如果您删除“margin-right:100px”，iframe 将居中

对于动态宽度，您使用 100% 而不是 800px 来获取 div 大小。

希望这有帮助。:-)

# git - 在将一些 git 子模块添加到项目（在 qooxdoo 中）后，我得到 [Errno 13] Permission denied

> ID：12600853
> 
> 赞同：0
> 
> 时间：2012-09-26T11:37:34.950
> 
> 标签：git, permissions, qooxdoo

当我尝试编译我的 qooxdoo 应用程序时发生错误：

```
 generate.py source

 ----------------------------------------------------------------------------
     Executing: source::source-script
 ----------------------------------------------------------------------------
 >>> Scanning libraries  [Errno 13] Permission denied:      
 u'C:\\web\\production01_server\\node_modules\\production\\client\\Qooxdoo' 
```

我最近添加了 qooxdoo 作为子模块，以使用该 qooxdoo 文件夹来生成。由于此错误，它不起作用。现在我已经放回了最后一个 qooxdoo 路径，错误是一样的。

以前工作过：

```
 {
           "manifest" : "../../../../../about_projects/third_party/qooxdoo/qooxdoo-1.6-sdk"
          ,"uri": "/qooxdoo"
        } 
```

现在它不工作了。我已经更改了 config.json 中的路径。

现在我什至不知道问题是什么：

*   我已经为我的用户添加了所有文件的权限/所有权
*   我已删除所有只读文件

而且问题依然存在。

我正在使用win-vista。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:30:07.303

我应该改变：

```
 "QOOXDOO_PATH" : "../Qooxdoo", 
```

而不是图书馆。

即便如此，我仍然有一个似乎[更容易解决](https://stackoverflow.com/questions/12605206/qooxdoo-as-git-submodule-expecting-property-name-in-component-testrunner-testru)的错误：

```
>>> Processing configuration
Expecting property name: line 626 column 3 (char 13185)
File:
C:\web\production01_server\node_modules\production\client\Qooxdoo\component\testrunner\testrunner.json 
```

再次发生，似乎如果我像这样将 qooxdoo 留在库中：

```
 {
           "manifest" : "../Qooxdoo"
          ,"uri": "/qooxdoo"
        } 
```

在这个问题中抛出错误。

# batch-file - cmd控制台输出到变量

> ID：12600856
> 
> 赞同：1
> 
> 时间：2012-09-26T11:37:45.377
> 
> 标签：batch-file, cmd, windows-console

我有一些工具可以将一些数据直接输出到控制台输出。

我想将此输出保存到某个变量，然后将其传递到其他地方...

有可能吗？

例子：

```
rem this outputs String1 values from myfile.txt
GetString myfile.txt String1
rem I want this value for example in %p% variable, and then:
call MyApp %p% 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:50:51.087

你可以试试这个

```
for /f %%a in ('GetString myfile.txt') do call MyApp %%a 
```

虽然我不太确定你的意思是什么`String1`，但如果这不正确，你能澄清一下吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:45:03.217

一般来说，我建议遵循@Balic C 的答案，因为它无需临时文件即可工作。然而，`for`当命令或参数或两者都包含空格并且您需要处理正确的引用时，该命令存在问题（或者至少很难正确处理）。

在这种情况下，您还可以将工具的输出存储在临时文件中，然后使用以下命令将其读入变量`set /P`：

```
set temp_file=%TEMP%\%~n0.tmp
GetString myfile.txt > "%temp_file%"
set /P p=<"%temp_file%"

call MyApp %p%

del /F "%temp_file%" 
```

# php - PHP IntlDateFormatter->format() 返回 false

> ID：12600859
> 
> 赞同：3
> 
> 时间：2012-09-26T11:37:55.357
> 
> 标签：php, date, datetime, internationalization, intl

这段代码在我的开发服务器上运行良好，但是当我在另一台服务器上运行它时，它失败了：

```
$formatter = new IntlDateFormatter('en-GB', IntlDateFormatter::LONG, IntlDateFormatter::NONE, 'Europe/London');
var_dump($formatter->format(new DateTime('2012-06-01')));
var_dump($formatter->getErrorMessage() . ' ' . $formatter->getErrorCode()); 
```

给我：

```
bool(false) 
string(14) "U_ZERO_ERROR 0" 
```

有谁知道为什么？特别奇怪的是它甚至不报告错误（U_ZERO_ERROR 是默认值）。谢谢。

**编辑：**

为了比较，我在本地得到：

```
string(11) "1 June 2012" 
string(14) "U_ZERO_ERROR 0" 
```

我在其他语言环境中也看到了同样的问题，包括`en-US`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:01:23.560

好的，想通了。只有 PHP 5.3.4+ 允许将 DateTime 对象传递给格式。在旧版本上，您需要执行以下操作：

```
$date = new DateTime('2012-06-01');
$formatter->format($date->getTimestamp()); 
```

# java - 主线程名称

> ID：12600861
> 
> 赞同：5
> 
> 时间：2012-09-26T11:38:01.447
> 
> 标签：java, multithreading

我们可以更改主线程的名称吗？并在主要方法中

```
Thread t = Thread.currentThread();  
System.out.println(t); 
```

它打印：

```
Thread[main,5,main] 
```

- 这里第一个线程名，第二个优先级，第三个是当前线程所属的线程组。

这样对吗？

线程组的第三个参数是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T11:43:26.020

[来自Thread](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)的 Javadoc

> public final void setName（字符串名称）
> 
> 将此线程的名称更改为等于参数名称。

和

> 公共字符串 toString()
> 
> 返回此线程的字符串表示形式，包括线程的名称、优先级和线程组。

* * *

```
Thread t = Thread.currentThread();
System.out.println(t);
t.setName("new thread name");
System.out.println(t); 
```

印刷

```
Thread[main,5,main]
Thread[new thread name,5,main] 
```

要更改 ThreadGroup 的名称，您可以使用反射，但这不太可能是一个好主意。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-04-03T06:16:12.790

获取当前线程名称的正确方法是

```
System.out.println("Name of Thread is " + Thread.currentThread().getName()); 
```

其中currentThread()是Thread类的一个静态方法，指的是当前正在执行的线程；getName() 是给出该线程名称的函数。

# scala - Scala - 将列表列表转换为单个列表：List[List[A]] 到 List[A]

> ID：12600863
> 
> 赞同：41
> 
> 时间：2012-09-26T11:38:08.153
> 
> 标签：scala, list, recursion, flatten

在 scala (2.9) 中转换列表的最佳方法是什么？

我有一个清单：

```
List[List[A]] 
```

我想转换成

```
List[A] 
```

如何递归实现？或者有没有其他更好的方法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-26T12:05:54.100

List 有 flatten 方法。为什么不使用它？

```
List(List(1,2), List(3,4)).flatten
> List(1,2,3,4) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T13:36:57.563

.flatten 显然是最简单的方法，但为了完整起见，您还应该了解 flatMap

```
 val l = List(List(1, 2), List(3, 4))
 println(l.flatMap(identity)) 
```

和理解等价物

```
 println(for (list <- l; x <- list) yield x) 
```

flatten 显然是 flatMap 的一个特例，它可以做的更多。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-26T11:40:47.890

鉴于上面的例子，我不确定你需要递归。看起来你想要`List.flatten`的。

例如

```
scala> List(1,2,3)
res0: List[Int] = List(1, 2, 3)

scala> List(4,5,6)
res1: List[Int] = List(4, 5, 6)

scala> List(res0,res1)
res2: List[List[Int]] = List(List(1, 2, 3), List(4, 5, 6)) 

scala> res2.flatten
res3: List[Int] = List(1, 2, 3, 4, 5, 6) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-16T17:54:38.827

如果您的结构可以进一步嵌套，例如：

```
List(List(1, 2, 3, 4, List(5, 6, List(7, 8)))) 
```

这个函数应该给你想要的结果：

```
def f[U](l: List[U]): List[U] = l match {
  case Nil => Nil
  case (x: List[U]) :: tail => f(x) ::: f(tail)
  case x :: tail => x :: f(tail)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-22T11:03:43.640

您不需要递归，但您可以根据需要使用它：

```
def flatten[A](list: List[List[A]]):List[A] = 
  if (list.length==0) List[A]() 
  else list.head ++ flatten(list.tail) 
```

这就像 flatten 方法构建到 List 中一样。例子：

```
scala> flatten(List(List(1,2), List(3,4)))
res0: List[Int] = List(1, 2, 3, 4) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-05T21:59:55.457

如果你想使用平面地图，这里是方式

假设你有一个名为 ll 的 List[Int] 列表，你想将它展平到 List，很多人已经给你答案了，比如展平，这很简单。我假设您要求使用 flatmap 方法。如果是这样，这就是方法

```
ll.flatMap(_.map(o=>o)) 
```

# objective-c - 为不同的UIViewControllers设置不同的supportedInterfaceOrientations

> ID：12600867
> 
> 赞同：2
> 
> 时间：2012-09-26T11:38:16.427
> 
> 标签：objective-c, ios6, uiinterfaceorientation

因此，正如问题一样，我使用以下代码为 viewcontroller 设置 userinterfaceOrientation。

```
- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

我尝试设置`UIInterfaceOrientationMaskAll`另一个 viewController。

之前，我检查`Supported interface orientations`了 info-plist 中的所有项目。对于所有方向，两个视图控制器都返回`true`（如 info-plist 中的设置）并且不遵守上述代码。即使没有上述代码，它也能正常工作。反正有没有限制某些`Supported interface orientations`特定的类？[我通过这个链接](https://stackoverflow.com/a/7264053/1424174)使它适用于 iOS6 之前的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:56:26.810

我可以通过将我支持的方向逻辑放在自定义 UINavigationController 中来实现这一点。然后我转到相关的视图控制器。

```
@implementation PortraitNavigationController

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T11:40:42.630

我会说`shouldAutorotateToInterfaceOrientation:`在每个视图控制器上实现你的，让它只返回`YES`你希望支持的方向。

# html - 如何防止链接标签在图像下方添加额外的填充？

> ID：12600868
> 
> 赞同：1
> 
> 时间：2012-09-26T11:38:17.157
> 
> 标签：html, css

我的图片包含在链接中。该链接在底部添加了额外的填充（请参见附图中的红色区域）。我怎样才能删除它？我尝试设置`padding: 0;`and`margin:0`我也尝试过`display:inline-block`，但它并没有解决它。

![在此处输入图像描述](../Images/a3727d5ec0dcb032e92240e6e756144b.png)

**HTML：**

```
<a href="#"><img src="http://i50.tinypic.com/2poy3kl.jpg" /></a>​ 
```

**CSS：**

```
 a{
    background: red;
    padding: 0;
} 
```

JS 小提琴：http: [//jsfiddle.net/D6Ak8/](http://jsfiddle.net/D6Ak8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:40:19.697

用于标签`display: block;`：`img`

```
a img {
    display: block;
} 
```

### 更新小提琴：http: [//jsfiddle.net/D6Ak8/1/](http://jsfiddle.net/D6Ak8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:46:35.160

[http://jsfiddle.net/D6Ak8/4/](http://jsfiddle.net/D6Ak8/4/)

添加`vertical-align:bottom`到您的图像。这样，您将保持内联显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:42:21.837

Display Block 是你的解决方案 **[js fiddle](http://jsfiddle.net/D6Ak8/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:41:47.683

尝试

`img{border:none;}`

…………………………………………………………………………

# android - 自定义对话框中的 SetOnClickListener 错误

> ID：12600877
> 
> 赞同：0
> 
> 时间：2012-09-26T11:38:39.720
> 
> 标签：android, customdialog

我用于创建自定义对话框的这部分代码..

```
final Dialog dialog = new Dialog(preferences.this);
dialog.setContentView(R.layout.customdialog);
dialog.setTitle("Title...");

TextView text = (TextView) dialog.findViewById(R.id.text);
text.setText("Bonboniziraj se i ti :)");

Button button = (Button) dialog.findViewById(R.id.dialogButtonOK);
button.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
   finish();
   }
 });

dialog.show();
}
}); 
```

我收到 SetOnClickListener 错误！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:57:14.217

## 1.试试这个

```
 final Dialog dialog = new Dialog(preferences.this);
              LayoutInflater inflater = getLayoutInflater();
           View layout = inflater.inflate(R.layout.customdialog, null);
        dialog.setContentView(layout);

        dialog.setTitle("Title...");

  TextView text = (TextView) dialog.findViewById(R.id.text);
  text.setText("Bonboniziraj se i ti :)");

  Button button = (Button) dialog.findViewById(R.id.dialogButtonOK);
button.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
   finish();
   }
 });

  dialog.show();
  }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:44:27.450

是空指针异常吗？您确定在 customdialog 布局中有带有 id=dialogBu​​ttonOK 的按钮吗？核实。

# excel - 使用 POI jar 获取 Excel SheetNames

> ID：12600883
> 
> 赞同：6
> 
> 时间：2012-09-26T11:39:09.900
> 
> 标签：excel, apache-poi, jxl

我需要使用 POI jar 的所有 Excel 工作表名称（全部包含数据）。像 jxl jar - getSheetNames()

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T13:14:56.127

你没有说你想要它们，所以我会猜测一个列表。您只需要遍历工作表索引，获取每个索引的名称。您的代码将类似于：

```
File myFile = new File("/path/to/excel.xls");
Workbook wb = WorkbookFactory.create(myFile);

List<String> sheetNames = new ArrayList<String>();
for (int i=0; i<wb.getNumberOfSheets(); i++) {
    sheetNames.add( wb.getSheetName(i) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-10T13:00:57.953

FileInputStream fis = new FileInputStream("C:\Users\Usr\Desktop\TestData.xlsx"); XSSFWorkbook wb = new XSSFWorkbook(fis);

```
 int sheetcount = wb.getNumberOfSheets();
    System.out.println("sheetcount: "+sheetcount);
    for(int i=0; i<sheetcount;i++)
    {
        System.out.print(wb.getSheetName(i)+ " ");
    } 
```

# graph - 寻路的遗传算法 - 交叉和变异

> ID：12600886
> 
> 赞同：0
> 
> 时间：2012-09-26T11:39:25.617
> 
> 标签：graph, genetic-algorithm, path-finding, mutation

我想使用遗传算法在无向图中找到最短路径。关于交叉和突变，我有两个问题。我一直在研究如何在与此类似的情况下执行交叉，并且最流行的算法似乎是 PMX，我对此的理解是在 2 个父染色体之间交换部分路径以产生后代。我遇到的问题是，几乎所有后代都有很大的无效空间，不是吗？我想知道您是否可以为我确认这一点，如果我错了，请纠正我并解释一下。

在单独但相关的说明上；我确实知道如何做到这一点，但我不知道这是否是个好主意，只需选择 2 个父母，他们在他们的路径中共享相同的节点并在那时交叉，因此所有后代都保持有效。

我的第二个问题是突变；我对如何做到这一点有一个大致的想法；选择一个节点并将其删除并通过另一种方式重新链接路径是否明智？

谢谢 ：）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:16:12.790

首先你研究了交叉和变异，因为你说你可能会失去一些有效的父母，但它是遗传算法中的“精英主义”概念。你应该通过你提出的交叉方法来克服。因为在交叉本身我们有n个方法要做，我建议你做第二个变体交叉顺序。这不是墨菲定律，所以努力你会实现的。

# android - Android：向服务器发送数据的建议

> ID：12600888
> 
> 赞同：1
> 
> 时间：2012-09-26T11:39:27.457
> 
> 标签：android, post

我有一个应用程序通过发布请求将数据发送到服务器。这个请求可能会失败，如果确实如此，我希望它重试直到它最终发送，类似于 WhatsApp：如果你在离线时发送消息，它会保持挂件状态，当你再次上线时，消息会被发送。

由于我不知道 WhatsApp 内部是如何工作的，我对如何实现它有一些疑问。我想了两个办法：

1- 将 AbstractThreadedSyncAdapter 设置为每 X 次（如 30 秒）执行一次，检查是否有数据要发送，如果有，则将其发送到服务器。

2-当用户单击以发送一些数据时，我创建一个尝试发送它的线程，如果失败，它会休眠几秒钟并重试。

我真的不喜欢这些选项中的任何一个。第一个将增加电池使用量，因为即使不需要，应用程序也会每 X 秒执行一次操作。如果请求失败很多次，第二个将使用大量电池。

有没有更好的方法呢？如果有一种简单的方法可以检测手机是否连接到互联网，那就太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:43:49.167

在您的场景 2 中，您可以在初始帖子未能在一段时间后触发重新发送时设置警报。如果发送成功，您将取消警报（或不安排另一个警报）。

为了在设备上线时引起注意，您可以查看以下答案：[https ://stackoverflow.com/a/11084311/100957](https://stackoverflow.com/a/11084311/100957)

# python - 如何使用子进程和 Popen 从我的 .exe 获取所有输出？

> ID：12600892
> 
> 赞同：1
> 
> 时间：2012-09-26T11:39:48.253
> 
> 标签：python, windows, subprocess, popen

我正在尝试运行一个可执行文件并使用`subprocess.Popen`;捕获它的输出。但是，我似乎没有得到所有的输出。

```
import subprocess as s
from subprocess import Popen 
import os

ps = Popen(r'C:\Tools\Dvb_pid_3_0.exe', stdin = s.PIPE,stdout = s.PIPE)
print 'pOpen done..'

while:

line = ps.stdout.readline()
print line 
```

手动打开时，它比原始 exe 文件少打印两行。

我尝试了另一种方法，结果相同：

```
f = open('myprogram_output.txt','w')
proc = Popen('C:\Tools\Dvb_pid_3_0.exe ', stdout =f)

line = proc.stdout.readline()
print line
f.close() 
```

谁能帮我获取exe的完整数据？

## 正如塞巴斯蒂安所问：

原始exe文件最后几行o / p：

-Gdd : 通用计数 (1 - 1000)

-Cdd : 剪切开始于 (0 - 99) -Edd : 剪切结束于 (1 - 100)

请选择下面的流文件号：

1 - .\pdsx100-bcm7230-squashfs-sdk0.0.0.38-0.2.6.0-prod.sao.ts

运行后得到的 o/p：

```
-P0xYYYY      : Pid been interested 
```

-S0xYYYY : 服务 ID 感兴趣
-T0xYYYY : 传输 ID 感兴趣
-N0xYYYY : 网络 ID 感兴趣
-R0xYYYY : 旧的 Pid 被这个 PID 替换
-Gdd : 通用计数 (1 - 1000)

所以我们可以看到缺少一些行。请选择下面出现的完整数字后，我必须写1并选择值。

我尝试使用 ps.stdin.write('1\n')。它没有打印exe文件中的值

新代码：

```
#!/usr/bin/env python
from subprocess import Popen, PIPE

cmd = r'C:\Tools\Dvb_pid_3_0.exe'
p = Popen(cmd, stdin=PIPE, stdout=None, stderr=None, universal_newlines=True)
stdout_text, stderr_text = p.communicate(input="1\n\n")

print("stdout: %r\nstderr: %r" % (stdout_text, stderr_text))
if p.returncode != 0:
    raise RuntimeError("%r failed, status code %d" % (cmd, p.returncode)) 
```

谢谢塞巴斯蒂安。我能够看到整个输出，但无法使用当前代码输入任何输入。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T16:31:40.230

要将所有标准输出作为字符串获取：

```
from subprocess import check_output as qx

cmd = r'C:\Tools\Dvb_pid_3_0.exe'
output = qx(cmd) 
```

要将 stdout 和 stderr 作为单个字符串获取：

```
from subprocess import STDOUT

output = qx(cmd, stderr=STDOUT) 
```

将所有行作为列表获取：

```
lines = output.splitlines() 
```

要获取子流程正在打印的行：

```
from subprocess import Popen, PIPE

p = Popen(cmd, stdout=PIPE, bufsize=1)
for line in iter(p.stdout.readline, ''):
    print line,
p.stdout.close()
if p.wait() != 0:
   raise RuntimeError("%r failed, exit status: %d" % (cmd, p.returncode)) 
```

添加到合并标准输出/标准错误`stderr=STDOUT`的调用。`Popen()`

注意：如果`cmd`在非交互模式下使用块缓冲，则在缓冲区刷新之前不会出现行。[`winpexpect`](https://bitbucket.org/geertj/winpexpect/wiki/Home)模块可能能够更快地获得输出。

要将输出保存到文件：

```
import subprocess

with open('output.txt', 'wb') as f:
    subprocess.check_call(cmd, stdout=f)

# to read line by line
with open('output.txt') as f:
    for line in f:
        print line, 
```

如果`cmd`总是需要输入，即使是空的；设置`stdin`：

```
import os

with open(os.devnull, 'rb') as DEVNULL:
    output = qx(cmd, stdin=DEVNULL) # use subprocess.DEVNULL on Python 3.3+ 
```

您可以组合这些解决方案，例如合并 stdout/stderr，并将输出保存到文件，并提供空输入：

```
import os
from subprocess import STDOUT, check_call as x

with open(os.devnull, 'rb') as DEVNULL, open('output.txt', 'wb') as f:
    x(cmd, stdin=DEVNULL, stdout=f, stderr=STDOUT) 
```

要将所有输入作为单个字符串提供，您可以使用`.communicate()`方法：

```
#!/usr/bin/env python
from subprocess import Popen, PIPE

cmd = ["python", "test.py"]
p = Popen(cmd, stdin=PIPE, stdout=PIPE, stderr=PIPE, universal_newlines=True)
stdout_text, stderr_text = p.communicate(input="1\n\n")

print("stdout: %r\nstderr: %r" % (stdout_text, stderr_text))
if p.returncode != 0:
    raise RuntimeError("%r failed, status code %d" % (cmd, p.returncode)) 
```

其中`test.py`：

```
print raw_input('abc')[::-1]
raw_input('press enter to exit') 
```

如果您与程序的交互更像是对话而不是您可能需要的[`winpexpect`模块](https://bitbucket.org/geertj/winpexpect/wiki/Home)。这是[来自`pexpect`docs](http://www.noah.org/wiki/Pexpect#Overview)的示例：

```
# This connects to the openbsd ftp site and
# downloads the recursive directory listing.
from winpexpect import winspawn as spawn

child = spawn ('ftp ftp.openbsd.org')
child.expect ('Name .*: ')
child.sendline ('anonymous')
child.expect ('Password:')
child.sendline ('noah@example.com')
child.expect ('ftp> ')
child.sendline ('cd pub')
child.expect('ftp> ')
child.sendline ('get ls-lR.gz')
child.expect('ftp> ')
child.sendline ('bye') 
```

要发送特殊键，例如`F3`，`F10`在 Windows 上，您可能需要[`SendKeys`模块](http://www.rutherfurd.net/python/sendkeys/)或其纯 Python 实现[`SendKeys-ctypes`](http://code.google.com/p/sendkeys-ctypes/)。就像是：

```
from SendKeys import SendKeys

SendKeys(r"""
    {LWIN}
    {PAUSE .25}
    r
    C:\Tools\Dvb_pid_3_0.exe{ENTER}
    {PAUSE 1}
    1{ENTER}
    {PAUSE 1}
    2{ENTER}
    {PAUSE 1}
    {F3}
    {PAUSE 1}
    {F10}
""") 
```

它不捕获输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:05:29.630

你的问题的缩进让我有点失望，因为 Python 对此很特别。你有没有尝试过这样的事情：

```
import subprocess as s
from subprocess import Popen 
import os

ps = Popen(r'C:\Tools\Dvb_pid_3_0.exe', stdin = s.PIPE,stdout = s.PIPE)
print 'pOpen done..'

(stdout, stderr) = ps.communicate()
print stdout 
```

我认为这`stdout`将是您从命令返回的任何内容的一个字符串，因此这可能不是您想要的，因为`readline()`假设您想逐行查看输出。

建议在[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)中寻找一些与您的目标相匹配的用途。

# mysql - 升级后 Joomla 内容不可见

> ID：12600893
> 
> 赞同：2
> 
> 时间：2012-09-26T11:39:52.757
> 
> 标签：mysql, sql, joomla, database-restore

我有一个旧的 joomla 版本正在运行。一些 1.0.x。（我还没有打算升级这个网站，但我会尽快找到一些时间这样做）但是我不得不在该服务器上升级过时的 linux（Suse 10.1）并安装 ubuntu 12.04。

然后我将所有文件复制到服务器，在操作系统升级之前备份。我重新创建了数据库和 Joomla 用来访问数据库的用户。我使用之前用来导出旧数据库的 phpMyAdmin 导入了表格和数据。

我以前用其他（更现代的版本）Joomla 安装做过这个。据我所见，数据库已恢复正常，所有文件均已安装并位于适当的位置。后台/管理站点工作正常。所有链接（扩展/组件）和所有内容项仍然存在并且看起来很好。（鉴于它是一个相当旧的版本:)

但是在前端站点上缺少内容项。首页看起来不错，菜单看起来不错，但内容是空的。

组件的菜单项（旧的缩放库、网络链接组件）工作得恰到好处。样品：

```
http://www.klecker.de/photo/index.php?option=com_weblinks&Itemid=52
http://www.klecker.de/photo/index.php?option=com_zoom&Itemid=26&catid=13 
```

但是指向内容项的“内部”链接——静态的和正常的——根本不起作用。样本：

```
http://www.klecker.de/photo/index.php?option=com_content&task=view&id=121&Itemid=199 
```

有什么问题？我错过或忽略了什么？与文件系统结构有关的东西，这两个 linux 发行版和 plesk 版本之间略有不同？或者不同版本的 php5 或 mysql 可能会导致一些副作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:06:52.570

你能打开你的错误调试或让我们知道错误是什么吗？

如果您使用的是 php 5.3，请尝试以下操作。它在一个存档（锁定）的 1.0.15 站点上为我工作：

*   打开 /includes/Cache/Lite/Function.php
*   转到第 74 行，即 $arguments = func_get_args();
*   用这个替换它：

    $arguments = func_get_args();
    $numargs = func_num_args();
    for($i=1; $i < $numargs; $i++)
    {
    $arguments[$i] = &$arguments[$i];
    }

*   节省

*   测试

直到版本 1.5.15 才正式将 5.3 支持添加到 Joomla。

# python - python memcache 搜索字符串

> ID：12600895
> 
> 赞同：0
> 
> 时间：2012-09-26T11:39:58.310
> 
> 标签：python, linux, memcached

知道如何在 memcache 中搜索字符串，我有一个加载到 memcache 上的域列表

我想做的是在这些域上搜索一个字符串......

```
[root@server python]# cat memtest.py 
#!/usr/bin/env python
import os
import sys
import memcache
domain = "http://www.yahoo.com/images.txt"
s  =   memcache.Client(["127.0.0.1:11211"])
def addData():
    proc = open("domains.txt","r")
    for i in proc.readlines():
        d = i.rstrip("\n");
        s.set(d,1)

def getData():
    name = s.get("yahoo.com")
    print name
    name = s.get("xaa.com")
    print name
    ##dummy code, just an example
    if domain in s.get(domain):
        print found

def main():
    addData()
    getData()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:24:55.713

```
def addData():
    proc = open("domains.txt","r")
    for i in proc.readlines():
        d = i.rstrip("\n");
        s.set(d,d)

def getData():
    name = s.get("yahoo.com")
    print name
    name = s.get("xaa.com")
    print name
    ##dummy code, just an example
    if s.get("yahoo.com"):
        if domain.find(s.get("yahoo.com")) > 0:
            print found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:37:39.467

要从 memcache 中检索值，您必须知道存储该值的确切键。

```
s.get("yahoo.com") 
```

只有当

```
s.set("yahoo.com", <some value>) 
```

之前被处决。

看起来您不知道确切的键，因为它们是从文件中检索的。您可以尝试使用正则表达式从文件中获取基域，并确保使用“yahoo.com”作为键。

# jquery - 根据选择的单选显示表格行

> ID：12600896
> 
> 赞同：0
> 
> 时间：2012-09-26T11:39:58.717
> 
> 标签：jquery, checkbox, html-table, row, show-hide

再次，再次，再次......我的Javascript / jQuery知识问题。这一次，我想在选择单选值时显示一行。我迷失了需要显示行的部分。

这是行：

```
 <tr class="others" id="others" style="display:none;">
            <th colspan="2"><?php _e('Others', 'shop'); ?></th>
            <td><?php echo fee; ?>&nbsp;&euro;</td>
            </tr> 
```

这是jQuery：

```
 $(document).ready(function() {
      $('input').click(function(){
      var isChecked = $('#payment_method_paypal').prop('checked');
      // make the row appear appear if "payment_method_paypal" is checked
      }); 
```

我尝试使用警报并且它可以工作，但是对于行，我尝试了我在 Stack Overflow 和谷歌上找到的每一个解决方案，但无法使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:44:23.313

您可以将布尔值传递给 jquery[切换](http://api.jquery.com/toggle/)方法

> .toggle（显示或隐藏）
> 
> 一个布尔值，指示是显示还是隐藏元素。

这应该工作

```
var isChecked = $('#payment_method_paypal').prop('checked');
$('#others').toggle(isChecked); //show/hide based on the bool 
```

## [小提琴](http://jsfiddle.net/brCr3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:42:59.533

尝试

```
$('#others').hide(); 
```

和

```
$('#others').show(); 
```

隐藏和显示该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:53:13.843

***html***

```
<table>
<tr> <td>-------------------</td></tr>
<tr> <td class="trData">-------SHOW------</td></tr>
<tr> <td>-------------------</td></tr>
</table>

<div id="container">
  <input type="radio" name="colors" id="red" value="show" checked/>Show<br />
  <input type="radio" name="colors" id="blue" value="hide" />Hide<br />
</div> 
```

JS

```
$("#container").find("input[type=radio]:checked").on("click", function() {
    if($(this).attr('value')=='show')
    {
        $(".trData").show()
    }else{
        $(".trData").hide()
    }
});​ 
```

***JS2***更紧凑，但在这种情况下，您需要在单选按钮中设置正确的值

```
$("#container").find("input[type=radio]:checked").on("click", function(event) {
    var op= $(this).attr('value');
    jQuery.globalEval('$(".trData").'+op+'()')
});​ 
```

***[演示](http://jsfiddle.net/9u3F3/3/)***

​</p>

# php - 从两个表更新但失败

> ID：12600904
> 
> 赞同：0
> 
> 时间：2012-09-26T11:40:22.913
> 
> 标签：php, mysql, syntax-error

我有两张桌子，`company_info`并且`comp_orders`

我运行以下查询：

```
$sql = "Update s1 SET s1.Comp_Addr = s2.Comp_Addr 
        Where s1.Comp_Name=s2.Comp_Name AND 
        s1.ID_No='$id' FROM comp_orders s1 , company_info s2"; 
```

但它不起作用。返回的错误是

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'FROM comp_orders s1 ,company_info s2' 附近使用正确的语法”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:42:14.487

你应该`JOIN`像这样的两个表：

```
Update comp_orders s1
INNER JOIN  company_info s2 ON s1.Comp_Name=s2.Comp_Name 
SET s1.Comp_Addr = s2.Comp_Addr 
[Where ...] --optional perediate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:42:57.327

```
UPDATE comp_orders s1
INNER JOIN company_info s2 on s1.Comp_Name=s2.Comp_Name
SET s1.Comp_Addr = s2.Comp_Addr 
WHERE s1.ID_No = '$id' 
```

[简化的 SQL 小提琴示例](http://sqlfiddle.com/#!2/7f64a)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:42:59.813

你不能`FROM`在里面使用`update`

查询应该是

```
$sql = "Update s1 SET s1.Comp_Addr = s2.Comp_Addr Where s1.Comp_Name=s2.Comp_Name AND s1.ID_No='$id'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:46:14.403

尝试

```
UPDATE comp_orders s1
INNER JOIN company_info s2 USING(`Comp_Name`)
SET s1.Comp_Addr = s2.Comp_Addr 
WHERE s1.ID_No = '$id' 
```

或者

```
UPDATE comp_orders s1 company_info s2 
SET s1.Comp_Addr = s2.Comp_Addr 
WHERE s1.ID_No='$id' 
```

[参考](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:43:07.167

`UPDATE … FROM`? 这是哪种 SQL 方言？我以前从未见过它。

`FROM`MySQL子句中没有：http `UPDATE`: [//dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T11:46:05.263

如果您尝试以下操作会怎样：

```
UPDATE comp_orders s1, company_info s2
SET s1.Comp_Addr = s2.Comp_Addr 
WHERE s1.Comp_Name = s2.Comp_Name 
AND s1.ID_No='$id' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T11:42:35.730

您似乎更新查询错误。我认为以下应该有效：

```
$sql = "
    Update comp_orders s1, company_info s2 SET 
        s1.Comp_Addr = s2.Comp_Addr 
        Where s1.Comp_Name=s2.Comp_Name AND s1.ID_No='$id'"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-26T11:42:52.483

```
$sql = "Update s1 SET s1.Comp_Addr = s2.Comp_Addr Where s1.Comp_Name=s2.Comp_Name AND s1.ID_No='$id' FROM comp_orders.s1 , company_info.s2"; 
```

试试这个，你错过了点..

还有其他错误 - 查找[更新](http://dev.mysql.com/doc/refman/5.0/en/update.html)

# android - 将视图与不同分辨率的 ImageView 对齐

> ID：12600907
> 
> 赞同：0
> 
> 时间：2012-09-26T11:40:35.143
> 
> 标签：android, size, imageview, screen-resolution

在 Android 上正确处理多种屏幕尺寸的问题已经被讨论了数千次。但是我找不到解决 m 问题的方法。简而言之，我需要将自定义进度条与 imageView 对齐。我有 3 组用于 imageView 的可绘制对象 - ldpi(240x400)、mdpi(320x480)、hdpi(480x800)。我将我在 Java 中的自定义视图与以下代码对齐：

```
 //get screen density 
       float density = getBaseContext().getResources().getDisplayMetrics().density;

       //set the progress bar position according to screen density
       if ( density == 1.0f)
       {
           ImageView micImage = ((ImageView) findViewById(R.id.imageViewClk));
           Drawable drawing = micImage.getDrawable();
            Bitmap bitmap = ((BitmapDrawable)drawing).getBitmap();

            // Get current dimensions
            int width = bitmap.getWidth();
            int height = bitmap.getHeight();

            LayoutParams params = new LayoutParams((int)(height/13.94), (int)(height/13.94));
            params.setMargins((int)(width/2.30), 0, 0, (int)(height/2.75));

            params.addRule(RelativeLayout.ALIGN_LEFT,R.id.imageViewClk);
            params.addRule(RelativeLayout.ALIGN_BOTTOM,R.id.imageViewClk);
            myCustomTwistedProgressBar.setLayoutParams(params);
       }else if ( density == 1.5f ){
           ImageView micImage = ((ImageView) findViewById(R.id.imageViewClk));
           Drawable drawing = micImage.getDrawable();
            Bitmap bitmap = ((BitmapDrawable)drawing).getBitmap();

            int width = bitmap.getWidth();
            int height = bitmap.getHeight();

            LayoutParams params = new LayoutParams((int)Math.round(height/14.13), (int)Math.round(height/14.13));
            params.setMargins((int)Math.round( width/2.27), 0, 0, (int)Math.round(height/2.91));

            params.addRule(RelativeLayout.ALIGN_LEFT,R.id.imageViewClk);
            params.addRule(RelativeLayout.ALIGN_BOTTOM,R.id.imageViewClk);
            myCustomTwistedProgressBar.setLayoutParams(params);
       }else if ( density == 0.75f ){
           ImageView micImage = ((ImageView) findViewById(R.id.imageViewClk));
           Drawable drawing = micImage.getDrawable();
            Bitmap bitmap = ((BitmapDrawable)drawing).getBitmap();

            // Get current dimensions
            int width = bitmap.getWidth();
            int height = bitmap.getHeight();

            LayoutParams params = new LayoutParams((int)(height/14.88), (int)(height/14.88));
            params.setMargins((int)(width/2.27), 0, 0, (int)(height/2.69));

            params.addRule(RelativeLayout.ALIGN_LEFT,R.id.imageViewClk);
            params.addRule(RelativeLayout.ALIGN_BOTTOM,R.id.imageViewClk);
            myCustomTwistedProgressBar.setLayoutParams(params);
       } 
```

在不同的屏幕尺寸上一切正常，但是当我尝试检查 480x854 分辨率时，自定义视图的垂直对齐不正确。在相同的屏幕尺寸上用 480x800 检查，它又可以工作了。然后我跳了一大步，检查了 GalaxyTab，水平和垂直对齐是错误的。现在我的第一个想法是位图宽度和高度是图像而不是实际调整大小的图像视图。所以我花了很多时间试图获得图像视图的真实大小，甚至选择了 viewTreeObserver 但结果都是一样的——正确的、不变的（未缩放的？）位图大小。所以肯定问题不在这里，我无法进一步解决。有谁知道为什么对齐不能正常工作？

PS：至于布局 xml 文件中的图像视图，我有 2 个配置 long 和 notlong，但此图像在两者中具有相同的描述：

```
<ImageView 
 android:src="@drawable/cloking" 
 android:id="@+id/imageViewClk"
 android:layout_height="wrap_content" 
 android:layout_width="wrap_content"
 android:layout_centerHorizontal="true" 
 android:layout_above="@+id/imageViewProcess"
 android:adjustViewBounds="true"
 android:cropToPadding="false" 
 android:layout_marginTop="60dp" 
 android:scaleType="fitXY">
</ImageView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:43:28.620

Android 会缩放图像，但会保持图像的纵横比。您无法使用布局设置控制纵横比（据我所知）。我会通过选择一些我想要支持的屏幕比例并制作更多资源（具有您支持的宽高比的图像）来解决这个问题。代码如下所示：

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight();

ImageView image = (ImageView) findViewById(R.id.imageViewClk);
if(width/height == aspectRatio1)
{
    image.setImageResource(R.id.imageAspect1);
} else if( width/height == aspectRatio2... 
```

# c# - 将列值设为标题列

> ID：12600908
> 
> 赞同：1
> 
> 时间：2012-09-26T11:40:39.103
> 
> 标签：c#, linq, header, row, var

我的 Table1 有一些标题和值：

```
KundeID KundeName  Produkt   Comment

1       Michael    Jogurt   "nichts"  
2       Raj                 "Ich bin cool"     
3       Gary       Fanta    "yahoo"  
4       Miky       Sprite 
```

我想更改为 Table2，将 Produkt 中的值设为标题列：

```
KundeID KundeName Comment        Jogurt Fanta Sprite    

1       Michael   "nichts"         x
2       Raj       "Ich bin cool"           
3       Gary      "yahoo"                 x     
4       Miky                                     x 
```

我的表 1 代码：

```
DataTable table = new DataTable("Kunde");

        table.Columns.Add("KundeID", typeof(Int32));
        table.Columns.Add("KundeName", typeof(String));
        table.Columns.Add("Produkt", typeof(String));

        DataTable comment = new DataTable("Comment"); 

        comment.Columns.Add("KundeName", typeof(String));
        comment.Columns.Add("Comment", typeof(String));

        DataSet ds = new DataSet("DataSet");

        ds.Tables.Add(table);
        ds.Tables.Add(comment);

        object[] o1 = { 1, "Michael", "Jogurt" };
        object[] o2 = { 2, "Raj" };
        object[] o3 = { 3, "Gary", "Fanta" };
        object[] o4 = { 4, "Miky", "Sprite" };

        object[] c1 = { "Raj", "Ich bin cool" };
        object[] c2 = { "Gary", "yahoo" };
        object[] c3 = { "Michael", "nichts" };

        table.Rows.Add(o1);
        table.Rows.Add(o2);
        table.Rows.Add(o3);
        table.Rows.Add(o4);

        comment.Rows.Add(c1);
        comment.Rows.Add(c2);
        comment.Rows.Add(c3);

        var results = from table1 in table.AsEnumerable()
                      join table2 in comment.AsEnumerable()
                      on table1.Field<string>("KundeName") equals table2.Field<string>("KundeName") into prodGroup
                      from table4 in prodGroup.DefaultIfEmpty()

                      select new
                          {
                              KundeID = table1.Field<Int32?>("KundeID"),
                              KundeName = table1.Field<String>("KundeName"),
                              Produkt = table1.Field<String>("Produkt"),
                              Comment = table4 != null ? table4.Field<String>("Comment") : null,
                          };
dataGridView1.DataSource = results.ToList(); 
```

如何从“Produkt”中获取价值并使其成为标题？谢谢你们的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:25:06.337

无论出现多少不同的产品，这都应该可以解决问题。它非常简短。

```
// build the new data table
var result = new DataTable();
result.Columns.Add("KundeID", typeof(Int32));
result.Columns.Add("KundeName", typeof(String));
result.Columns.Add("Comment", typeof(String));
result.Columns.AddRange(
    (from c in 
         (from r in table.AsEnumerable() 
          where !r.IsNull("Produkt") && !string.IsNullOrEmpty(r.Field<string>("Produkt")) 
          select r.Field<string>("Produkt")).Distinct()    // added DISTINCT
     select new DataColumn(c, typeof(bool))).ToArray()
);

foreach (var r in results)
{
    var productIndex = result.Columns.IndexOf(r.Produkt);
    var vals = new List<object>() { r.KundeID, r.KundeName, r.Comment };
    for (int i = 3; i < result.Columns.Count; i++)
    {
        if (i == productIndex)
        {
            vals.Add(true);
        }
        else
        {
            vals.Add(false);
        }
    }

    result.LoadDataRow(vals.ToArray(), true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:27:00.690

```
var products = table.AsEnumerable()
        .GroupBy(c => c["Produkt"])
        .Where(g => !(g.Key is DBNull))
        .Select(g => (string)g.Key)
        .ToList();

var newtable = table.Copy();
products.ForEach(p=>newtable.Columns.Add(p,typeof(bool)));

foreach (var row in newtable.AsEnumerable())
{
    if (!(row["Produkt"] is DBNull)) row[(string)row["Produkt"]] = true;
}

newtable.Columns.Remove("Produkt"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:06:32.600

尝试关注...这可能会对您有所帮助....

```
 DataTable table = new DataTable("Kunde"); 
    table.Columns.Add("KundeID", typeof(Int32)); 
    table.Columns.Add("KundeName", typeof(String)); 
    table.Columns.Add("Produkt", typeof(String));
    table.Columns.Add("Comment", typeof(String));

    object[] o1 = { 1, "Michael", "Jogurt", "nichts" }; 
    object[] o2 = { 2, "Raj","","Ich bin cool" };
    object[] o3 = { 3, "Gary", "Fanta","yahoo" }; 
    object[] o4 = { 4, "Miky", "Sprite","" };

    table.Rows.Add(o1); 
    table.Rows.Add(o2); 
    table.Rows.Add(o3); 
    table.Rows.Add(o4); 
    Dictionary<int,string> dictObj=new Dictionary<int, string>();
    for (int i = 0; i < table.Rows.Count; i++)
    {
        dictObj.Add(Convert.ToInt32(table.Rows[i][0].ToString()), table.Rows[i][2].ToString());
    }
    foreach (var obj in dictObj)
    {
        if (string.IsNullOrEmpty(obj.Value))
        {
            table.Columns.Add(obj.Value, typeof(String));
            DataRow row = table.Rows[obj.Key];
            row[obj.Value] = "X";
        }
    } 
```

# sql-server - Smo EnumAvailableSqlServers 不返回带有 .net4 的 SQl 服务器 2012 的任何数据

> ID：12600909
> 
> 赞同：0
> 
> 时间：2012-09-26T11:40:40.103
> 
> 标签：sql-server, smo

Smo 调用 EnumAvailableSqlServers 正在使用 .net3。但是在 sql server 2012 上使用 .net 4 它不会获取任何数据。

我将参数传递为 false，如果我需要使用另一个 APi，请告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:14:26.753

问题出在我使用的 .dll 版本上。解决它 ！

# r - 结合格子 xyplot 和直方图

> ID：12600910
> 
> 赞同：1
> 
> 时间：2012-09-26T11:40:41.890
> 
> 标签：r, lattice

有人可以帮我升级我的情节吗？a) 在图中，每行应该只打印一个 y 刻度。b) 要打印更舒适的图例，这意味着 1) 更改符号和描述的顺序，2) 在相同的 x 位置打印行，如 superpose.symbols，3) 并打印直方图的符号。

```
d1 <- data.frame(x=c(NA, 13:20, NA), y = 25, z = c(rep('march', 5),
rep("april", 5)), color = c(c(rep(c("red", "green"), 2), "red"),
c(rep(c("blue", "yellow"), 2), "blue")), stringsAsFactors = FALSE)
d2 <- data.frame(x=c(NA, 20:27, NA), y = 23, z = c(rep('may', 5),
rep("june", 5)), color = c(c(rep(c("blue", "red"), 2), "red"),
c(rep(c("blue", "yellow"), 2), "blue")), stringsAsFactors = FALSE)
d1<-rbind(d1,d2)
sup.sym <- trellis.par.get("superpose.symbol")
sup.sym$alpha<-c(1, 0, 0, 0, 0, 0, 0)
sup.sym$col<-c(1,2,3,4,5,6,7)

sup.lin <- trellis.par.get("superpose.line")
sup.lin$col<-c(1,2,7,5,5,6,7)
sup.lin$alpha<-c(0, 1, 1, 1, 0, 0, 0)
settings<-list(superpose.symbol = sup.sym,superpose.line = sup.lin)

xyplot(y ~ x | factor(z), data = d1
       ,ylim = list( c(22, 26),c(22, 26), c(0, 1),c(0, 1) )
       ,layout=c(2,2)
       ,scales = list(y = list( relation = "free"  ))
       ,par.settings = settings
       ,auto.key = list(text = c("A","B","C", "D")
                ,space = "right"
                ,lines = TRUE
               )
       ,panel = function(x, y, subscripts) {
                if(panel.number()>2){
                  panel.histogram(x,breaks=3)
                }else{
                  panel.xyplot(x = x, y = y, 
                               subscripts=subscripts,
                               col = d1[subscripts, "color"])

               }
}) 
```

# visual-studio-2010 - 在本地构建中未获得 CA1822

> ID：12600911
> 
> 赞同：0
> 
> 时间：2012-09-26T11:40:42.083
> 
> 标签：visual-studio-2010, msbuild, build-automation, code-analysis

我知道软件工程师通常不会尖叫，嘿，我没有收到错误，你能帮我解决一个吗！但目前我需要在本地显示此错误，因为它在我们的`CI`构建中失败。当我在本地没有收到错误时，要抑制它（**请相信我，我只需要抑制它，因为它是从 WF 工作流生成的代码**）要困难得多，因为成员名称的语法充其量是痛苦的。

构建服务器的 CI 构建使用`Release`配置，我在本地构建`Release`，所以*理想情况下*我会得到相同的错误（通常会）。

`Release`这是我的项目文件中我的部分的快照：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
  <DebugType>pdbonly</DebugType>
  <Optimize>true</Optimize>
  <OutputPath>bin\</OutputPath>
  <DefineConstants>TRACE</DefineConstants>
  <ErrorReport>prompt</ErrorReport>
  <WarningLevel>4</WarningLevel>
  <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
  <RunCodeAnalysis>true</RunCodeAnalysis>
  <CodeAnalysisRuleSet>..\..\SolutionAnalysis.ruleset</CodeAnalysisRuleSet>
  <StyleCopEnabled>true</StyleCopEnabled>
  <StyleCopTreatErrorsAsWarnings>false</StyleCopTreatErrorsAsWarnings>
  <NoWarn>1591</NoWarn>
</PropertyGroup> 
```

在构建服务器上，我收到此错误（为安全起见，删除了类型和路径名）：

> **obj\Release\WorkflowName_BeforeInitializeComponentHelper.cs** (18): ***CA1822*** : Microsoft.Performance :从未使用过**“WorkflowName.BeforeInitializeComponent(ref bool)”**的“this”参数（或 Visual Basic 中的“Me”） 。将成员标记为静态（或在 Visual Basic 中为 Shared）或在方法主体或至少一个属性访问器中使用“this”/“Me”（如果适用）。

我希望你们都可以帮助我弄清楚为什么 Visual Studio 在`Release`本地构建期间没有出现错误......哦，疯狂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:15:34.997

好的，所以我现在通过升级我的本地版本的 StyleCop 来在本地收到此错误。我不确定为什么这对代码分析有任何影响，但老实说，所有这些工具都不能很好地协同工作，因为我们还在整个组织范围内安装了 ReSharper，这会导致很多悲伤。

所以，话虽这么说，我最终解决这个问题的方法是`partial`为每个 WF Activity 构建类，即 XAML 文件**，看起来像这样：

```
// ReSharper disable CheckNamespace
namespace {namespace}
// ReSharper restore CheckNamespace
{
    using System.CodeDom.Compiler;

    /// <summary>
    /// Sets up the [GeneratedCode] attribute for the generated workflow class so that code analysis isn't performed.
    /// </summary>
    [GeneratedCode("", "1.0")]
    public partial class {classname}
    {
    }
} 
```

您可以从构成 WF Activity 的 XAML 中的属性中收集`{namespace}`和（右键单击 XAML 文件并选择“查看代码”）。`{classname}``x:Class`

** WF 服务（即 XAMLX 文件）不需要它们

# iphone - 在特殊情况下在标签栏项目上设置图像（如果在 viewController 上采用标签栏）

> ID：12600917
> 
> 赞同：0
> 
> 时间：2012-09-26T11:40:59.767
> 
> 标签：iphone, uitabbarcontroller, uitabbar

我在视图控制器上使用标签栏控制器而不是委托，并使用下面提到的代码。

```
tabController = [[UITabBarController alloc]init];
tabController.delegate = self;

scanView = [[ScanTicketView alloc] init];
searchView = [[SearchView alloc] init];
historyView = [[HistoryView alloc]init];

tabController.viewControllers=[NSArray arrayWithObjects:scanView,searchView,historyView, nil];

[self.navigationController pushViewController:tabController animated:YES]; 
```

它有效，但现在如何将图像应用于这些视图。有人能帮我一下吗。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:50:41.753

Tabbar 控制器有自己的 Image 和 Title 属性。

仔细阅读此[UITabbar 教程](http://www.roseindia.net/tutorial/iphone/examples/iPhone-TabBar-Application-Tutorial-UITabBar.html)以正确理解。您可以通过属性窗口甚至通过编码设置图像。

好运 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:50:42.747

您可以使用：

```
 viewController.tabBarItem.image = [UIImage imageNamed:@"imageName.png"]; 
```

如果您只想将图像应用于选项卡栏中的选定视图控制器，则 UITabBarController 有一个 selectedViewController 和一个 selectedIndex 属性，如果这可能有帮助，请参见 tabBarController.tabBar.selectedItem.tag。

# permissions - 如何隐藏网站 public_html 文件夹中的文件夹？

> ID：12600920
> 
> 赞同：4
> 
> 时间：2012-09-26T11:41:09.570
> 
> 标签：permissions, webserver

我不喜欢如果您转到我网站上某些不包含 .html 文件的文件夹，它会列出其中的所有文件。我不想提供访问权限。如：[http ://christianselig.com/css](http://christianselig.com/css)

我该如何隐藏这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:50:43.363

您需要告诉您的网络服务器停止目录列表。对于 apache，将其添加到您的 httpd.conf 或任何其他相关配置文件

```
<Directory /path/to/directory>
   Options -Indexes
</Directory> 
```

如果放置在 .htaccess 文件中，`AllowOverride Options`则必须为所需目录启用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:50:06.967

如果您使用的是 Apache 网络服务器并且可以访问 httpd.conf，您可以为要隐藏内容的目录设置“Options -Indexes”。如果您无权访问 httpd.conf，您可以在要使用“IndexIgnore *”隐藏内容的目录中创建 .htaccess 文件

# powershell - 在 Invoke-Command Cmdlet 中处理 ScriptBlock 中的错误

> ID：12600921
> 
> 赞同：19
> 
> 时间：2012-09-26T11:41:13.973
> 
> 标签：powershell, error-handling, invoke-command

我正在尝试使用 powershell 在远程计算机上安装服务。

到目前为止，我有以下内容：

```
Invoke-Command -ComputerName  $remoteComputerName -ScriptBlock {
         param($password=$password,$username=$username) 
         $secpasswd = ConvertTo-SecureString $password -AsPlainText -Force
         $credentials = New-Object System.Management.Automation.PSCredential ($username, $secpasswd)
         New-Service -Name "XXX" -BinaryPathName "c:\XXX.exe" -DisplayName "XXX XXX XXX" -Description "XXXXXX." -Credential $credentials -ErrorVariable errortext 
         Write-Host("Error in: " + $errortext)
        } -ArgumentList $password,$username -ErrorVariable errortext 

Write-Host("Error out: " + $errortext) 
```

当执行 New-Service 时出现错误时，$errortext ErrorVariable 会在 ScriptBlock 内正确设置，因为文本：“Error in: 向我显示错误。

Invoke-Command 的 ErrorVariable 未设置（这是我的预期）。

我的问题是：

**是否可以将 Invoke-Command 的 ErrorVariable 设置为我在 ScriptBlock 中遇到的错误？**

我知道我也可以使用 InstalUtil、WMI 和 SC 来安装服务，但目前这不相关。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T20:01:01.143

不，您无法`Errorvariable`将`Invoke-Command`调用中的设置与脚本块中的设置相同。

但是，如果您的目标是“检测和处理脚本块中的错误，并将错误返回到`Invoke-Command`调用者的上下文”，那么只需手动执行：

```
$results = Invoke-Command -ComputerName server.contoso.com -ScriptBlock {
   try
   {
       New-Service -ErrorAction 1
   }
   catch
   {
       <log to file, do cleanup, etc>
       return $_
   }
   <do stuff that should only execute when there are no failures>
} 
```

`$results`现在包含错误信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-26T13:44:09.150

Invoke-Command 参数列表是一种单向处理。您可以在脚本中输出错误变量，例如在脚本块的最后一行放置：

```
$errortext 
```

或者更好的是，根本不要通过 -ErrorVariable 捕获错误。即使通过远程连接，脚本块输出（包括错误）也会流回调用者。

```
C:\> Invoke-Command -cn localhost { Get-Process xyzzy } -ErrorVariable errmsg 2>$null
C:\> $errmsg
Cannot find a process with the name "xyzzy". Verify the process name and call the cmdlet again.
    + CategoryInfo          : ObjectNotFound: (xyzzy:String) [Get-Process], ProcessCommandException
    + FullyQualifiedErrorId : NoProcessFoundForGivenName,Microsoft.PowerShell.Commands.GetProcessCommand
    + PSComputerName        : localhost 
```

一般来说，我认为最好将错误保留在错误流中，与正常输出分开。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-17T19:57:35.393

这几乎肯定不是“正确”的答案，但是当我希望 Invoke-Command 在脚本中抛出错误时，我会使用它。

```
$error.Clear()
Invoke-Command -ComputerName localhost -ScriptBlock {Command-ThatFails}
$if ($error.Count -gt 0) { throw $error[0] } 
```

如果您想将错误保留在变量中，可以执行以下操作：

```
$error.Clear()
Invoke-Command -ComputerName localhost -ScriptBlock {Command-ThatFails}
$if ($error.Count -gt 0) { $myErrorVariable = $error[0] } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T15:15:09.990

在最严格的意义上，我相信答案是否定的，你不能将 Invoke-Command 的 ErrorVariable 设置为脚本块内 ErrorVariable 的内容。ErrorVariable 仅适用于它所附加的命令。

但是，您可以将脚本块中的变量传递给 Invoke-Command 的范围。在您的代码中，您使用`-ErrorVariable errortext`. 相反，在“脚本”范围内创建变量，方法是在变量名称前加上“脚本：”，如下所示：`-ErrorVariable script:errortext`。这使得变量在脚本块之外和内部都可用。

现在您的最后一行`Write-Host("Error out: " + $errortext)`将输出在脚本块内生成的错误。

更多信息[在这里](https://ss64.com/ps/syntax-scopes.html)和[这里](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_scopes)。

# iphone - 如何在iphone中的多行UILabel中减少两行之间的空格

> ID：12600923
> 
> 赞同：2
> 
> 时间：2012-09-26T11:41:18.133
> 
> 标签：iphone, uilabel

> **可能重复：**
> [如何控制 UILabel 中的行距](https://stackoverflow.com/questions/5494498/how-to-control-the-line-spacing-in-uilabel)

我想`UILabel`在 iPhone 的多行中减少两行之间的空间，我该如何实现这一点，我想要解决这个问题是非常关键的事情，请给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:59:42.763

**你不能**。

要更改文本行之间的间距，您必须子类化`UILabel`

查看 [第三方代码](https://github.com/Tuszy/MTLabel)以了解更多细节，它几乎支持`UILabel`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:55:57.587

你不能，因为 UILabel 中没有间距参数。相反，您应该出于您的目的查看这些第三方库。

[MS标签](https://github.com/LemonCake/MSLabel)

[MTL标签](https://github.com/Tuszy/MTLabel)

# c++ - 在 C++ 的 Linux 中使用 gprof -f 选项

> ID：12600924
> 
> 赞同：1
> 
> 时间：2012-09-26T11:41:23.467
> 
> 标签：c++, linux, gprof

嗨，我已经开始使用 gprof 进行分析工作，它工作正常，除了 -f 选项允许我指定要在调用图中查看的特定函数。

例如

```
 Call graph (explanation follows)

granularity: each sample hit covers 4 byte(s) no time propagated

index % time    self  children    called     name
                0.00    0.00       1/1           __do_global_ctors_aux [13]
[5]      0.0    0.00    0.00       1         global constructors keyed to main [5]
                0.00    0.00       1/1           __static_initialization_and_destruction_0(int, int) [6]
-----------------------------------------------
                0.00    0.00       1/1           global constructors keyed to main [5]
[6]      0.0    0.00    0.00       1         __static_initialization_and_destruction_0(int, int) [6]
-----------------------------------------------
                0.00    0.00       1/1           main [4]
[7]      0.0    0.00    0.00       1         car::DisplayPrice() [7]
-----------------------------------------------
                0.00    0.00       1/1           main [4]
[8]      0.0    0.00    0.00       1         car::showc() [8]
-----------------------------------------------
                0.00    0.00       1/1           main [4]
[9]      0.0    0.00    0.00       1         car::car(std::string, int) [9]
                0.00    0.00       1/1           vehical::vehical(int, int) [12]
-----------------------------------------------
                0.00    0.00       1/1           main [4]
[10]     0.0    0.00    0.00       1         car::~car() [10]
-----------------------------------------------
                0.00    0.00       1/1           main [4]
[11]     0.0    0.00    0.00       1         vehical::show() [11]
-----------------------------------------------
                0.00    0.00       1/1           car::car(std::string, int) [9]
[12]     0.0    0.00    0.00       1         vehical::vehical(int, int) [12]
----------------------------------------------- 
```

现在如果我指定

```
gprof -f car::car(std::string, int) a.out gmon.out 
```

我得到错误

> 意外标记“（”附近的语法错误

现在如果我这样做

gprof -f car::car(std::string, int) a.out gmon.out

我收到一个错误

> 没有这样的文件或目录

如果我尝试将函数放在双引号中，我会得到如上所示的输出，没有任何变化..

有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:46:24.137

() 被您的外壳占用。试试这样：

```
gprof -f 'car::car(std::string, int)' a.out gmon.out 
```

# c# - 以编程方式获取 Microsoft Office PIA 的位置

> ID：12600926
> 
> 赞同：0
> 
> 时间：2012-09-26T11:41:29.100
> 
> 标签：c#

我已经安装了 Microsoft Office 2010，位置是
“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14”
我需要从这个位置动态加载程序集。
是否可以通过编程方式获取位置“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:19:01.020

这是检索安装路径的 WMI 查询。您必须在 WMI 查询中的 like 子句之后传递程序名称。由于我不知道程序名称，所以我使用了 like 子句。如果您知道确切的程序名称与**“=”**运算符一起使用。

添加对 DLL (System.Management) 的引用。

```
Using System.Management

    ManagementObjectSearcher WMIQuery = new ManagementObjectSearcher("SELECT * FROM Win32_Product WHERE CAPTION LIKE \"%office%\" ");
    ManagementObjectCollection WMIQueryCollection = WMIQuery.Get();

    foreach (ManagementObject MO in WMIQueryCollection)
    {
        Console.WriteLine("Caption : " + MO["Caption"].ToString());
        Console.WriteLine("InstallLocation : " + (MO["InstallLocation"] == null ? " " : MO["InstallLocation"].ToString()));
    } 
```

这是 MSDN 链接，可帮助您开始编写 WMI 查询 (WQL)。
[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394606(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394606(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:50:34.897

据我了解，您需要找到 Office 的安装位置。如果是，那么 Windows Management Instrumentation 将为您提供帮助。它是一个 API，可让您查询系统以获取已安装软件、可用资源等数据。

在此处查看更多信息： [在系统中获取已安装的应用程序](https://stackoverflow.com/questions/908850/get-installed-applications-in-a-system)

# macros - Erlang 中的一流模式？

> ID：12600928
> 
> 赞同：4
> 
> 时间：2012-09-26T11:41:35.267
> 
> 标签：macros, erlang, language-features, first-class

Erlang 中是否支持*[一流的模式？](http://lambda-the-ultimate.org/classic/message5169.html)*

```
f(SomeMagicPattern) ->
  receive
    SomeMagicPattern -> ok
  end. 
```

如果答案是否定的（支持），您知道实现此目的的任何其他方法吗？例如，使用宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:03:38.027

不，Erlang 没有开箱即用的一流模式。有两种实现方式：

1.  宏。广泛使用，例如在 EUnit 和 PropEr 等测试工具中。比如说，EUnit 有一个 ?assertMatch 宏，它实际上是一流模式的一个示例：

    ?assertMatch({ok, _}, 结果)

2.  解析变换。更难编写，但可能更强大，因为使用它们你可以访问 Erlang 抽象代码并以任何你想要的方式完全重写它。这里有一个很好的链接到一系列关于解析转换的教程：[是否有一个关于 Erlang 解析转换的好、完整的教程可用？](https://stackoverflow.com/questions/2416192/is-there-a-good-complete-tutorial-on-erlang-parse-transforms-available)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:41:00.937

正如 demeshchuk 指出的那样，情况并非如此。

然而，有人提议添加类似于该语言的内容：

[http://www.erlang.org/eeps/eep-0029.html](http://www.erlang.org/eeps/eep-0029.html)

这是否是一个好主意是一个完全不同的问题......

# javascript - D3js 在鼠标悬停时应用投影

> ID：12600942
> 
> 赞同：2
> 
> 时间：2012-09-26T11:42:05.653
> 
> 标签：javascript, svg, d3.js

关于应用过滤器的潜在方式，我有一个[要点（请参阅](https://gist.github.com/3787476)[此处](http://bl.ocks.org/3787476)的预览）。我不确定如何在触发鼠标悬停的矩形上有条件地应用它。到目前为止，我看到的示例是应用过滤器 id，但是如果我像上面的示例一样更改过滤器属性，它会影响所有元素。

我实际上正在寻找框阴影来指示选择（如此[处](http://xn--dahlstrm-t4a.net/svg/filters/arrow-with-dropshadow.svg)）如果您可以将模糊更改为阴影，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:07:27.050

一种方法是使用 CSS :hover 规则来应用过滤器属性，请参阅[此示例](http://xn--dahlstrm-t4a.net/svg/interactivity/transparent-images-pointer-events.svg)。

定义类似于您已经完成的模糊过滤器，然后使用这样的 CSS：

```
rect:hover { filter: url(#blur); } 
```

您可能也应该指定一个稍大的过滤器区域，否则您的模糊会被剪裁。

# installation - Visual Studio 2010 Service Pack 1 设置总是回滚

> ID：12600946
> 
> 赞同：0
> 
> 时间：2012-09-26T11:42:21.210
> 
> 标签：installation, visual-studio-2010

我的 Windows 7 机器上安装了 Visual Studio 2010 Professional 版本。

我正在尝试安装 Visual Studio 2010 Service Pack 1。

每次安装开始后一段时间**回滚**开始并且安装失败。

我试过使用[http://www.microsoft.com/en-us/download/details.aspx?id=23691](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

*   Web Installer - 这下载了大约 615mb 的数据，后来出现了上述错误。
*   完整 ISO - 下载完整的 ISO 以进行离线设置，大约为 1.5 GB，但给出了相同的错误。

在过去的两天里，我一直在为此烦恼。我也尝试过重新安装 Visual Studio 2010。

**错误详情**

安装过程中的致命错误

**错误截图**

![在此处输入图像描述](../Images/61e8b86dcae7fbee29c2fe83ea137a8f.png)

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:17:13.320

SP1 我也有类似的回滚问题。您是否尝试按照以下方式验证 ISO 校验和：http: [//blogs.msdn.com/b/heaths/archive/2011/03/25/verify-the-iso-checksum-for-visual-studio-2010-service- pack-1-安装前.aspx](http://blogs.msdn.com/b/heaths/archive/2011/03/25/verify-the-iso-checksum-for-visual-studio-2010-service-pack-1-before-installing.aspx)

最初我有一个错误的校验和，所以重新下载了 ISO。

您是否尝试过将 ISO 刻录到 DVD、将 ISO 挂载为虚拟驱动器或使用 7zip 之类的东西提取 ISO 内容？
当我将 ISO 内容提取到子文件夹时，我终于设法让安装正常工作；在运行安装程序之前，我还扫描了我的硬盘驱动器是否存在错误

*   我之前也运行过磁盘清理 - 以释放磁盘空间（参考下面的磁盘空间评论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:21:01.210

我终于设法让这个工作，

以下是我在重新安装成功之前所做的事情。

*   删除了所有 Visual Stusio 插件，如 Resharper、Akhn SVN 等
*   禁用了我的防病毒软件
*   重启
*   以管理员身份运行安装程序。

# c# - 使用 protobuf-net 序列化 IConvertible 字段

> ID：12600952
> 
> 赞同：1
> 
> 时间：2012-09-26T11:42:30.273
> 
> 标签：c#, protobuf-net

我有一堂课：

```
internal class Value
{
    internal IConvertible Min { get; set; }
} 
```

和一个测试用例：

```
[TestMethod]
public void Custom_IConvertible()
{
    RuntimeTypeModel.Default.
        Add(typeof(Value), false).
        Add(1, "Min");

    RuntimeTypeModel.Default.
        Add(typeof(IConvertible), false);

    var val = new Value {Min = true};
    var result = Serializer.DeepClone(val);
    Assert.AreEqual(true, result.Min);
} 
```

抛出：

```
System.InvalidOperationException: Unexpected sub-type: System.Boolean 
```

但我不能将布尔值添加为 IConvertible 的子类型，因为我会得到：

```
System.ArgumentException: Data of this type has inbuilt behaviour, and 
cannot be added to a model in this way: System.Boolean 
```

正如我所看到的，IConvertible 仅由 BCL 基本类型实现，这种情况应该可以正常工作。我在这里想念什么？

* * *

受以下 Marc 回复的启发，我重写了我的示例。

上课：

```
internal abstract class Value
{
    internal IConvertible Min { get; set; }

    internal static Value Create<T>(T min) where T :IConvertible
    {
        return new ValueT<T> {Min = min};
    }

    internal sealed class ValueT<T> : Value where T : IConvertible
    {
        internal new T Min
        {
            get { return (T) base.Min; }
            set { base.Min = value; }
        }
    }
} 
```

和一个测试用例：

```
[TestMethod]
public void Custom_IConvertible()
{
    RuntimeTypeModel.Default.
        Add(typeof(Value), false).
        AddSubType(10, typeof(Value.ValueT<bool>));

    RuntimeTypeModel.Default.
        Add(typeof(Value.ValueT<bool>), false).
        Add(1, "Min");

    var val = Value.Create(true);
    var result = Serializer.DeepClone(val);
    Assert.AreEqual(true, result.Min);
} 
```

调用 Add(1, "Min") 时出现异常：

```
System.ArgumentException: Unable to determine member: Min
Parameter name: memberName 
```

但是，如果我将一个类定义为（相同的代码，但具有属性），它将工作得很好：

```
[ProtoContract]
[ProtoInclude(1, typeof(ValueT<int>))]
internal abstract class Value
{
    internal IConvertible Min { get; set; }

    internal static Value Create<T>(T min) where T :IConvertible
    {
        return new ValueT<T> {Min = min};
    }

    [ProtoContract]
    internal sealed class ValueT<T> : Value where T : IConvertible
    {
        [ProtoMember(1)]
        internal new T Min
        {
            get { return (T) base.Min; }
            set { base.Min = value; }
        }
    }
}

[TestMethod]
public void Custom_IConvertible()
{
    var val = Value.Create(true);
    var result = Serializer.DeepClone(val);
    Assert.AreEqual(true, result.Min);
} 
```

但我不能使用属性。

这是一个错误还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:10:37.430

那是行不通的。protobuf-net （本质上）针对数据合约工作，并且`IConvertible`不是合约 - 运行*时*的实际价值可以是任何东西。protobuf-net 想*提前*知道它是什么。

protobuf-net中支持接口，但这是针对不同场景的*。*

它们是 BCL 原语这一事实是无关紧要的；并且出于完全相同的原因，`internal object Min {get;set;}`会失败。

tl; dr：这不是受支持的方案。

* * *

*这是一个可以*工作的重新工作（请注意，为方便起见，我使用属性进行配置，但它也可以通过运行时配置工作）：

```
using ProtoBuf;
using System;
[ProtoContract]
[ProtoInclude(1, typeof(ValueImpl<int>))]
[ProtoInclude(2, typeof(ValueImpl<float>))]
[ProtoInclude(3, typeof(ValueImpl<double>))]
// other types you want to support
internal abstract class Value
{
    public static Value Create<T>(T value) where T : IConvertible
    {
        return new ValueImpl<T> { Min = value };
    }
    public IConvertible Min { get { return MinImpl;} set { MinImpl = value;}}
    protected abstract IConvertible MinImpl {get;set;}
    [ProtoContract]
    public sealed class ValueImpl<T> : Value where T : IConvertible
    {
        [ProtoMember(1)]
        public new T Min { get; set; }
        protected override IConvertible MinImpl
        {
            get { return Min; }
            set { Min = (T)value; }
        }
    }
}

static class Program
{
    static void Main()
    {       
        var val = Value.Create(true);
        var result = Serializer.DeepClone(val);

        bool x = (bool)val.Min; // true
    }
} 
```

# sql - 搜索不同的表但返回所有列

> ID：12600953
> 
> 赞同：0
> 
> 时间：2012-09-26T11:42:30.257
> 
> 标签：sql, database, oracle

我需要查询一个包含 3 行的表：id、ip 和 user_id

我只想返回具有唯一值 ip 和 user_id 的行（本身不是唯一的，而是作为一对唯一的），例如：

```
id         ip          user_id
--------------------------------
1          1           2
2          1           2
3          1           2
4          2           5
5          2           5
6          2           8
7          2           8
8          3           10
9          3           11 
```

结果必须是：

```
id        ip
------------
1         1
4         2
2         8
6         2
8         3
9         3 
```

我正在使用 Oracle 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:52:11.163

```
select min(id),ip from table
group by ip,user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:47:58.927

```
select id, ip
from the_table
  join (
     select min(id) as min_id
     from the_table
     group by ip, user_id
  ) t on t.min_id = the_table.id
order by id; 
```

或者：

```
select id, ip
from (
   select id, 
          ip,
          row_number() over (partition by ip_user_id order by id) as rn
   from the_table
) t 
where rn = 1
order by id; 
```

# php - 在 PHP 中使用序列化以将数据存储到数据库中是一种好习惯吗？

> ID：12600956
> 
> 赞同：13
> 
> 时间：2012-09-26T11:42:43.383
> 
> 标签：php, serialization, standards, conventions

[我在php.net](http://php.net/manual/en/function.serialize.php)中遇到了一条关于序列化数据以便将其保存到数据库中的有趣评论。

它说：

> 请！请！请！不要序列化数据并将其放入数据库中。可以以这种方式使用序列化，但这缺少关系数据库的要点和数据库引擎中固有的数据类型。这样做会使数据库中的数据不可移植、难以阅读，并且会使查询复杂化。如果您希望您的应用程序可移植到其他语言，例如假设您发现您想在应用程序的某些部分使用 Java，而在其中使用 Java 是有意义的，那么序列化将成为一件令人头疼的事情。您应该始终能够查询和修改数据库中的数据，而无需使用第三方中介工具来操作要插入的数据。
> 
> 我在职业生涯中遇到过太多次了，这导致代码难以维护，代码存在可移植性问题，数据更难迁移到其他 RDMS 系统、新模式等。它还有一个额外的缺点使根据您已序列化的字段之一搜索数据库变得混乱。
> 
> 这并不是说 serialize() 没用。这不是... 一个使用它的好地方可能是一个缓存文件，其中包含数据密集型操作的结果，例如。还有很多其他的......只是不要滥用序列化，因为下一个出现的人将面临维护或迁移的噩梦。

我想知道这是否是关于将数据序列化用于数据库目的的标准视图。这意味着有时使用它是否是一种好习惯，或者是否应该避免使用它。

例如，最近有人指示我自己使用序列化。

在这种情况下，我们必须保存到 MySQL 表中的数据如下：

*   汽车品牌。
*   汽车模型。
*   车版。
*   汽车信息。

Car info 是一个数组，表示一个版本的所有属性，因此它是大量可变的属性（少于 100 个属性）。该数组是要序列化的数组。

为了使用序列化，我得到的主要原因如下：

> 作为大量字段，最好将数据序列化以提高性能，而不是为每个属性或多个表创建一个字段。

就我个人而言，我更同意 php.net 中的评论而不是最后的断言，但我想在这里发表比我更多的合格意见。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T12:30:12.560

> 作为大量字段，最好将数据序列化以提高性能，而不是为每个属性或多个表创建一个字段。

我认为这高度依赖于用例。如果有一个班级`Customer`想要了解所有运行 Diesel 的汽车的信息或汽车的任何其他特定数据（使用燃料似乎最简单）。您需要从数据库中获取所有汽车，对其进行反序列化，检查属性并保留与客户相关的所有汽车的列表。

示例：我们必须将一些与个人相关的数据从旧客户 CMS 移动到新的。不是将每个属性都很好地映射到数据库上，而是整个信息是旧数据库中的单个字符串。因此，我们不得不使用大量的 regex-foo 来将数据再次转换为正确的结构，而不是使用正确的数据库结构。当然，这是一项昂贵的（金钱和工作量）任务。在这种情况下，问题并不大，因为数据量是可控的。但是想象一下同样的场景，有数百万行，而不仅仅是一个字符串......

您发布的评论仅在谈论 IMO 数据结构。我同意，存储这些不是很好也不是很有效。在某处出现拼写错误或添加语言其他部分不知道的新属性会容易得多。这迟早会导致问题。

另一方面，存储一些更容易移植的配置可能是序列化数据的好案例。您可能会争辩说，对于这种情况，外部设置文件更理想，但这将高度依赖于案例/理念/客户/...

TL;DR In most cases, using a proper schema will sooner or later benefit the whole development, speed wise and complexity wise (since I preferr reading many table descriptions instead of a huge, cryptic string). There might be some use-cases where serializing data is acceptable so giving a finite answer if this is good or bad practice is not that easy and highly dependent.

# c# - VS 安装项目，从注册表填充“文本框”字段

> ID：12600967
> 
> 赞同：1
> 
> 时间：2012-09-26T11:43:00.147
> 
> 标签：c#, visual-studio-2010, windows-installer

例如，我希望能够`Textboxes (A)`使用注册表中的数据填充对话字段，而不是我可以在安装程序项目中设置的默认值。

我仔细看了看，据我所知，解决方案的前景很严峻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:51:05.087

标准方法是创建一个注册表搜索，其名称与用于文本框的属性名称相同。为此，您需要在[AppSearch](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367579%28v=vs.85%29.aspx)和[RegLocator](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371171%28v=vs.85%29.aspx)表中定义一个条目。不幸的是，我认为您不能从 VS 编辑这些表，或者是否有预定义的支持将搜索添加到您的项目。

# c# - 从 Windows 窗体中查找输入类型控件

> ID：12600968
> 
> 赞同：0
> 
> 时间：2012-09-26T11:43:00.257
> 
> 标签：c#, winforms

我有窗口应用程序，并有一个弹出对话框（窗体），其中包含一些输入控件（`TextBox`、`ComboBox`）和其他控件，如 PictureBox、Label。我的表单有两种模式 1）添加或编辑模式 2）查看模式。在查看模式下，用户只能查看详细信息，也可以复制输入值（例如，用户可以复制`TextBox`值）。

如果表单模式是查看，那么我想将表单的所有输入控件的只读属性设置为 true，并使用我的 Forma（使用`for each`）的逐个迭代控件。但我不知道如何知道特定控件是输入类型控件。`System.Windows.Forms.Control`没有 ReadOnly 属性。`TextBox`我发现我可以为我的解决方案使用 Enable 属性，但问题是如果`Enable`设置为 false ，用户无法复制文本值。

任何人都可以帮助我我怎么知道特定控件是输入类型控件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:50:40.513

System.Windows.forms.clipboard.clear(); 尝试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:58:40.200

我认为`TextBoxBase`可能是`input type Control`：

```
foreach (TextBoxBase txt in this.Controls.OfType<TextBoxBase>())
{
    txt.ReadOnly = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:08:27.623

我通常循环浏览表单上的所有控件，然后按类型评估每个控件。开始做一些工作，但一旦到位，您就可以添加更多控件，而不必担心单独设置它们。

```
foreach (Control c in formMain.Controls)
 {
    if(c.GetType()==typeof(ComboBox))
    {
        ComboBox cb = (ComboBox) c;
        //do something
    }
    else if(c.GetType()==typeof(TextBox))
    {
        TextBox t = (TextBox) c;
        t.ReadOnly = true;
    }
 } 
```

我还使用相同的过程来设置通用事件处理程序，例如将控件值保存到文本更改的设置中。因此，如果您创建与控件同名的设置，则可以在事件处理程序中放置类似的内容...

```
private void TextBoxTextchanged(object sender, EventArgs e)
{
    TextBox t = (TextBox) sender;
    Settings.Default[t.Name] = t.Text;
    Settings.Default.Save();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:54:43.377

此代码可以帮助您：

```
foreach(Control ctl in form.Controls)
{
  if (ctl is TextBox)
  {    }
  if (ctl is CheckBox)
  {    }
  if (ctl is ComboBox)
  {    }
  /* etc */
} 
```

# android - ApplicationInfo LoadLabel 增加我的服务的内存消耗（android）

> ID：12600974
> 
> 赞同：2
> 
> 时间：2012-09-26T11:43:18.227
> 
> 标签：android, memory-management

我编写了一个 android 服务，它计算手机上安装的应用程序列表并获取应用程序名称。

代码大致如下所示：

```
List<PackageInfo> appListInfo = pm.getInstalledPackages(0);
                for (PackageInfo p : appListInfo) { p.applicationInfo.loadLabel(pm).toString());                                           } 
```

我观察到的是，`loadLabel`在所有对象上调用该函数会`packageInfo`大大增加内存消耗。我的服务通常需要 3-5 mb，执行此代码时会达到 16mb。

虽然，这个内存最终被释放（当 GC 运行时）并且服务回到 3-5mb，我想知道这个峰值是否可以避免并且仍然实现我的目标

我想要这个的原因是，我计划将此应用程序作为轻量级的应用程序进行营销，如果这种情况继续发生，这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:59:25.123

我也有同样的问题。我的应用程序通常使用 32mb 到 50mb 的峰值。loadLabel 在一个可运行文件中被调用，该可运行文件每 x 秒/分钟从服务中调用一次。我见过内存高达90mb。我信任 GC，但我的应用程序记录数据并且需要一直运行，因此它非常有资格从操作系统终止。

我的解决方案是清空 ApplicationInfo 然后调用 System.gc() 来释放内存。这样我的应用程序就保持在 32mb。

如果有人有更好的方法，请告知我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T02:06:59.013

回复永远不会太晚

幕后发生的是android加载每个应用程序apk，因此它是资源，以便从资源中获取文本。

尽管在 GC 发生之前资源不会关闭，但它周围有一些成本，只有当你担心增加大小时。

您可以使用隐藏的 API 并自己加载资源并在完成后将其删除。

```
...
Resources res;
AssetManager assetMgr;  
DisplayMetrics metrics = getDisplayMetricsLocked(null, false);
Configuration config = new Configuration();
List<PackageInfo> packages = pm.getInstalledPackages(0);
int tmpResId;
for (PackageInfo p: packages){
     tmpResId = p.applicationInfo.labelRes;
     if(tmpResId == 0){
         p.applicationInfo.setAppName(p.applicationInfo.nonLocalizedLabel);
     }else {
        //hidden API's here
        assetMgr = new AssetManager();
        if(assetMgr.addAssetPath(p.applicationInfo.sourceDir) == 0){
        if(assetMgr.addAssetPath(p.applicationInfo.publicSourceDir) == 0){
           continue;
        }
        }
        res = new Resources(assetMgr, metrics, config);
        //Get your label here
        ...res.getText(tmpResId);
        res.getAssets().close();
    }

}
assetMgr = null;
res = null;
...

static DisplayMetrics getDisplayMetricsLocked(CompatibilityInfo ci, boolean  forceUpdate) {
    DisplayMetrics dm = new DisplayMetrics();
    Display d = WindowManagerImpl.getDefault(ci).getDefaultDisplay();
    d.getMetrics(dm);
    return dm;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:07:27.533

内存消耗在这里不应该让您担心，因为大峰值并不自动意味着当时无法回收内存。这可能只是意味着没有必要进行垃圾收集，因为有足够的可用内存。使用更多内存甚至可以使事情变得更快，并且使用空闲内存没有负面影响。

但是您可以尝试以下操作以确保对象可以更早地获得 GC：

```
List<PackageInfo> packages = pm.getInstalledPackages(0);
for (int i = 0; i < packages.size(); i++) {
    PackageInfo p = packages.set(i, null);
    p.applicationInfo.loadLabel(pm).toString();
}
packages = null; 
```

如果您调用该方法`PackageInfo`后对象保留额外的内存，这可能会有所帮助。`loadLabel`使用上述方法，在加载信息后会清除对它们的引用，而在您的方法中，它们都仍然被列表引用，并且只有在整个循环完成后才能被 GC 处理并且`packages`可以被 GC 处理。

> 我计划将此应用程序推销为轻量级，如果这种情况继续发生，这是不可能的。

我怀疑用户会监控内存使用量是否出现峰值。此外，典型的记忆感知是错误的。空闲内存 = 浪费资源，如果你有手机，不会加速你的手机。营销！=技术细节:)

# javascript - flowplayer不播放mp3

> ID：12600975
> 
> 赞同：0
> 
> 时间：2012-09-26T11:43:21.117
> 
> 标签：javascript, flowplayer

我使用 flowplayer 播放 mp3。但我有一个错误；

**202 此剪辑中指定的提供程序未加载，提供程序 audio.clip: [clip]**

我没有它，错误是以前使用过的。

```
<script src='<%= ResolveUrl("~/Components/flowplayer/flowplayer-3.1.1.min.js") %>' type="text/javascript"></script>
<script>
var playerpath = '<%= ResolveUrl("~/Components/flowplayer/flowplayer-3.2.7.swf") %>';
var playerid = '<%= this.lnkPlayer.ClientID %>';
var _autoplay = '<%= this.AutoPlay %>' == "True";
var _autobuffering = '<%= this.AutoBuffering %>' == "True";
flowplayer(playerid, playerpath, {
    clip: {
        autoPlay: _autoplay,
        autoBuffering: _autobuffering  
        ,provider: '<%= provider %>'
    },
    plugins: {
        rtmp: {
            url: '<%= ResolveUrl("~/Components/flowplayer/flowplayer.rtmp-3.2.3.swf")%>'
        }
    }
}); 
```

你知道吗？感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:43:34.157

对于其他人，如有必要，解决方案是；

```
 <script src='<%= ResolveUrl("~/Components/flowplayer/flowplayer-3.1.1.min.js") %>' type="text/javascript"></script>
   <asp:HyperLink runat="server"  ID="lnkPlayer"></asp:HyperLink>

<script>
   var playerid = '<%= this.lnkPlayer.ClientID %>';
   var _autoplay = '<%= this.AutoPlay %>' == "True";
   var _autobuffering = '<%= this.AutoBuffering %>' == "True";
 flowplayer(playerid, {
   src: "http://releases.flowplayer.org/swf/*flowplayer-3.2.15.swf",
   version: [10, 1],
    clip: {
      autoPlay: _autoplay,
      autoBuffering: _autobuffering  // <- do not place a comma here   
      , provider: 'rtmp'
          },
    plugins: {
         rtmp: {
             url: '<%= ResolveUrl("~/Components/flowplayer/flowplayer.rtmp-3.2.11.swf") %>'
                }
             }
    });
  </script> 
```

对于 flowplayer-3.1.1.min.js -> [http://releases.flowplayer.org/flowplayer/flowplayer-3.2.15.zip](http://releases.flowplayer.org/flowplayer/flowplayer-3.2.15.zip) 对于 flowplayer.rtmp-3.2.11.swf -> [http://releases.flowplayer .org/flowplayer.rtmp/flowplayer.rtmp-3.2.11.zip](http://releases.flowplayer.org/flowplayer.rtmp/flowplayer.rtmp-3.2.11.zip)

（它适用于 mp3、mp4 和 flv）

# python-2.7 - Python - 写入文件添加空字符

> ID：12600982
> 
> 赞同：3
> 
> 时间：2012-09-26T11:43:46.590
> 
> 标签：python-2.7

当我使用 python写入文件时，除了新文本之外`open(filename, 'w+')`，我还会将多行写入文件。`NULL`Python 2.7.3

```
from sys import argv

script, filename, random = argv

my_file = open(filename, 'w+')
added_line = raw_input("Type what you want to add: ")

my_file.write(added_line)

print my_file.read()

my_file.close() 
```

我正在自学并练习打开和写入文件（显然，我猜）。我可以让程序运行并提示我输入新文本。我也试过了 `open(filename, 'a')`。

我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-25T08:12:57.493

我尝试使用`w`选项打开文件，据我所知，如果使用`w`选项打开文件，则只能写入文件，因此无法运行该`read()`方法。确实，`w+`使您能够读写。（请注意，'w+' 会截断文件）。`r+`打开文件进行读写。

`my_file.seek(0)`在读取之前返回文件的顶部，否则你只会读取一个空字符串。

为我工作。

# php - mysql拒绝网络连接

> ID：12600985
> 
> 赞同：0
> 
> 时间：2012-09-26T11:43:51.723
> 
> 标签：php, mysql, database

我正在尝试将我们的 ems 作为前端来管理我的数据库。但是，我作为主机尝试过：IP、DOMAIN、TUNNELING、SSH TUNNELING、HTTP TUNNELING，但我得到的只是'网络拒绝你的连接（10061）。我想我可能已经找到了原因，但没有足够的经验来做出改变。

我在下面的 php 信息文件中包含了 mysql 的值：

```
mysql.default_host  no value    no value
mysql.default_password  no value    no value
mysql.default_port  no value    no value
mysql.default_socket    /var/lib/mysql/mysql.sock   /var/lib/mysql/mysql.sock
mysql.default_user  no value    no value
mysql.max_links Unlimited   Unlimited 
```

如果有人能看一下这段代码并告诉我这是否是没有连接的原因，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:46:45.637

查看此文档：向下滚动到您的错误号。

[http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html](http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html)

确保 MySQL 守护程序正在运行。如果不是，请启动它。如果是，请确保您可以 ping 服务器，然后使用 mysqladmin 工具等客户端登录。如果它无法连接，您也将无法连接。

# python - 获取 scipy 创建的插值函数的公式

> ID：12600989
> 
> 赞同：11
> 
> 时间：2012-09-26T11:44:14.823
> 
> 标签：python, scipy, interpolation, pythonxy

我在 Python 中做过一些工作，但我是`scipy`. 我正在尝试使用`interpolate`库中的方法来提出一个近似一组数据的函数。

我已经查找了一些示例以开始使用，并且可以让下面的示例代码在[Python(x,y)](http://www.pythonxy.com/)中工作：

```
import numpy as np
from scipy.interpolate import interp1d, Rbf
import pylab as P

# show the plot (empty for now)
P.clf()
P.show()

# generate random input data
original_data = np.linspace(0, 1, 10)

# random noise to be added to the data
noise = (np.random.random(10)*2 - 1) * 1e-1

# calculate f(x)=sin(2*PI*x)+noise
f_original_data = np.sin(2 * np.pi * original_data) + noise

# create interpolator
rbf_interp = Rbf(original_data, f_original_data, function='gaussian')

# Create new sample data (for input), calculate f(x) 
#using different interpolation methods
new_sample_data = np.linspace(0, 1, 50)
rbf_new_sample_data    = rbf_interp(new_sample_data)

# draw all results to compare
P.plot(original_data, f_original_data, 'o', ms=6, label='f_original_data')
P.plot(new_sample_data, rbf_new_sample_data, label='Rbf interp')
P.legend() 
```

绘图显示如下：

![插值图](../Images/5412e8e0c1fcb4a37a5d91e7875573ff.png)

现在，有没有办法得到一个多项式表达式来表示由`Rbf`（即创建为的方法`rbf_interp`）创建的插值函数？

或者，如果这不可能`Rbf`，也欢迎任何使用不同插值方法、另一个库甚至不同工具的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:33:06.117

答案是否定的，写下公式没有“好”的方法，或者至少不是很短的方法。某些类型的插值，如 RBF 和 Loess，不直接搜索参数数学函数来拟合数据，而是将每个新数据点的值分别计算为其他点的函数。

保证这些插值始终能够很好地拟合您的数据（例如在您的情况下），原因是要描述它们，您需要大量参数（基本上是所有数据点）。可以这样想：您可以通过将连续数据点与直线连接来进行线性插值。您可以通过这种方式拟合任何数据，然后以数学形式描述函数，但这需要大量参数（至少与点数一样多）。实际上，您现在正在做的几乎是一个平滑的版本。

如果你想让公式简短，这意味着你想用一个没有很多参数的数学函数来描述数据（具体来说，参数的数量应该远低于数据点的数量）。此类示例包括逻辑函数、多项式函数，甚至是正弦函数（用于生成数据）。显然，如果您知道哪个函数生成的数据将是您想要拟合的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T14:39:41.720

RBF 使用您要求的任何函数，它当然是一个全局模型，所以是的，有一个函数结果，但当然，您可能不喜欢它，因为它是许多高斯的总和。你得到了：

```
 rbf.nodes   # the factors for each of the RBF (probably gaussians)
 rbf.xi      # the centers.
 rbf.epsilon # the width of the gaussian, but remember that the Norm plays a role too 
```

因此，使用这些东西，您可以计算距离（`rbf.xi`然后将距离与高斯中的因子插入`rbf.nodes`并`rbf.epsilon`插入高斯（或您要求它使用的任何函数）。（您可以检查和的python`__call__`代码`_call_norm`）

所以你会得到一些类似`sum(rbf.nodes[i] * gaussian(rbf.epsilon, sqrt((rbf.xi - center)**2)) for i, center in enumerate(rbf.nodes))`给出一些有趣的半代码/公式的东西，RBFs 函数写在文档中，但你也可以检查 python 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:48:38.727

RBF 可能代表[`Radial Basis Function`](http://en.wikipedia.org/wiki/Radial_basis_function). [`scipy.interpolate.Rbf`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Rbf.html)如果是您正在寻找的功能，我不会感到惊讶。

但是，我怀疑您能否找到一个多项式表达式来表示您的结果。

如果您想尝试不同的插值方法，请查看相应的[Scipy 文档](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)，该文档提供了 RBF、样条线的链接...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-01T18:17:07.123

我不认为 SciPy 的 RBF 会给你实际的功能。但是您可以做的一件事是对 SciPy 的 RBF 给您的函数进行采样（即 100 分）。然后对这些点使用拉格朗日解释。这将为您生成一个多项式函数。这是一个外观示例。如果不想使用拉格朗日插值，也可以使用“牛顿除数差分法”生成多项式函数。![在此处输入图像描述](../Images/03aa16058a69fb684ca391c93185dffa.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T02:20:32.010

我的回答仅基于 numpy：

```
import matplotlib.pyplot as plt
import numpy as np
x_data = [324, 531, 806, 1152, 1576, 2081, 2672, 3285, 3979, 4736]
y_data = [20, 25, 30, 35, 40, 45, 50, 55, 60, 65]
x =  np.array(x_data)
y = np.array(y_data)
model = np.poly1d(np.polyfit(x, y, 2))
ynew = model(x)
plt.plot(x, y, 'o', x, ynew, '-' , )
plt.ylabel( str(model).strip())
plt.show() 
```

# ruby-on-rails - 如何对垂死的 resque 进程进行故障排除

> ID：12600997
> 
> 赞同：0
> 
> 时间：2012-09-26T11:44:31.837
> 
> 标签：ruby-on-rails

我有一个带有 Resque 的 Rails 3.x 应用程序。我使用以下命令运行 resque 命令：

```
nohup rake RAILS_ENV=production environment resque:work QUEUE='*' & >>/tmp/resque.log 2>> /tmp/resque.err.log 
```

每隔一天，该进程就会终止，但两个输出文件始终为空。还有其他方法可以找出 Resque 进程失败的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:59:23.870

试试超级棒的[Pry 控制台](https://github.com/pry/pry)。这类似于`irb`只有更高级的。

你可以`binding.pry`在你的`perform`方法中使用，或者最好在一个[钩子](https://github.com/defunkt/resque/blob/master/docs/HOOKS.md)中使用，这将启动一个你可以调试的 pry 控制台。在类似的情况下帮助了我很多。

# json - 获取json格式的表单数据值

> ID：12600999
> 
> 赞同：0
> 
> 时间：2012-09-26T11:44:37.743
> 
> 标签：json, jquery

如何获取 ajax 调用的 html 元素 attr 的值？

我的代码：

```
$('#manager_pass').submit(function(evt){ 

    evt.preventDefault();

        $.ajax({

            url: App.managerpassURL,
            data: {
                ????????????
            },
            dataType: 'json',
            type: 'POST',
            success: function(r){
                box_2.animate({'top':'-250px'},500,function(){
                overlay.fadeOut('fast');
                    $('.action_wrapper').fadeOut(1000, function(){
                            $('.form').fadeIn(1000);
                    });
                });
            }

        });

}); 
```

我需要从这里获取价值

```
<input type="text" name="managerPassword" value="" class="man_code"> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:51:00.253

如果你想发送 JSON，这样的事情：

```
JSON.stringify({ "pass" : $('input[name="managerPassword"]').val() }) 
```

当然，如果您想发送密码，请确保其安全！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:48:38.960

如果你`id`在你的输入元素上指定一个属性，你可以执行以下操作来获取 js 中的值：

```
document.getElementById('exampleid').value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:51:38.850

$('#manager_pass').submit(function(evt){

```
evt.preventDefault();
var passtxt=$('input:text[name=managerPassword]').val();
    $.ajax({

        url: App.managerpassURL,
        data: {
            passtxt:passtxt
        },
        dataType: 'json',
        type: 'POST',
        success: function(r){
            box_2.animate({'top':'-250px'},500,function(){
            overlay.fadeOut('fast');
                $('.action_wrapper').fadeOut(1000, function(){
                        $('.form').fadeIn(1000);
                });
            });
        }

    }); 
```

});