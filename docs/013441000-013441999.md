# StackOverflow 问答 13441000-13441999

# wcf - 在 IIS 托管的 C# 中创建一个 RESTful 服务

> ID：13441001
> 
> 赞同：-1
> 
> 时间：2012-11-18T14:20:03.030
> 
> 标签：wcf, web-services

我想创建一个可以接受 json 并在用 C# 编写的 Windows 服务器上返回 json 响应的宁静 Web 服务。

这个特定的服务实际上将有一个长时间运行的后台线程，因此托管在 IIS 中的 WCF 服务将无法工作（据我所知，IIS 将在每​​次请求时/之后停止并重新启动服务）。

一般来说，我什至不喜欢 WCF，因为我不喜欢处理生成代理类和更新服务引用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:33:25.247

好吧，关于 WCF，是一种已经证明可以帮助您构建健壮服务的技术，在您的软件设计过程中，您可以设计服务以保持状态、托管单例实例等，因此您对 WCF 服务的印象在某种程度上是不完整的。

现在，关于restful方法，现在使用的技术称为Web API，您可以在以下网站中看到一些示例：[http](http://www.asp.net/web-api) ://www.asp.net/web-api ，这将帮助您避免典型的WSDL和生成您正在谈论的代理，并且您可以进行诸如“（http://myapp/orders/?id=1）之类的裸机RESTful查询，该查询可以返回带有orderid = 1的json对象

在这里，您可以了解 WCF 服务中的实例化模式：http: [//msdn.microsoft.com/en-us/magazine/cc163590.aspx](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)

希望能帮助到你，

# asp.net-mvc - 将 ActionLink 插入现有标签

> ID：13441005
> 
> 赞同：0
> 
> 时间：2012-11-18T14:20:43.840
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个来自 MVC4 的默认 Internet 应用程序模板，我想`<nav>`根据登录的用户向标签添加一些链接。

即所有用户都有一个默认导航面板，但如果是管理员登录，他应该有管理产品库存的额外链接。

现在看起来像这样（来自 _Layout.cshtml）：

```
 <nav>
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Browse", "Product")</li>
                    ...
                </ul>
            </nav> 
```

我需要以某种方式插入新的 ActionLink。我试图`if`在默认布局内发表声明，但它不起作用。我怎么能`<li>`在这个里面添加一个额外的标签`<nav>`？我不熟悉 JavaScript 或 JQuery，但可以使用 MVC 功能完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:29:54.530

是的，这可以使用剃刀语法来实现

```
 <nav>
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Browse", "Product")</li>
                    @if( User.IsInRole("Admin") ){
                     <li>@Html.ActionLink("Admin", "...", "...")</li>
                    }
                </ul>
            </nav> 
```

# loops - 迭代map和reduce操作

> ID：13441008
> 
> 赞同：2
> 
> 时间：2012-11-18T14:20:58.113
> 
> 标签：loops, dictionary, hadoop, mapreduce, reduce

我正在编写一个 Hadoop 应用程序以特定分辨率计算地图数据。我的输入文件是地图的瓦片，根据[QuadTile](http://wiki.openstreetmap.org/wiki/QuadTiles)原则命名。我需要对它们进行二次采样，并将它们拼接在一起，直到我有一个覆盖更大区域但分辨率更低的某个更高级别的图块。就像缩小谷歌地图一样。

目前，我的 Mapper 对瓦片进行子采样，而我的化简器将瓦片组合到某个级别并形成上一层的瓦片。所以太好了。但是根据我需要的图块，我需要重复这些地图并减少步骤 ax 次，这是迄今为止我无法做到的。

最好的方法是什么？是否可以不明确地将切片保存在某个临时目录中并在这些临时目录上启动一个新的 mapreduce 作业，直到我得到我想要的？我认为完美的解决方案大致类似于'while(context.hasMoreThanOneKey()){iterate mapreduce}'。

在回答之后，我现在编写了一个扩展 Job 的类 TileJob。但是，mapreduce 仍然没有被链接。你能告诉我我做错了什么吗？

```
public boolean waitForCompletion(boolean verbose) throws IOException, InterruptedException, ClassNotFoundException{

    if(desiredkeylength != currentinputkeylength-1){            
        System.out.println("In loop, setting input at " + tempout);
        String tempin = tempout;
        FileInputFormat.setInputPaths(this, tempin);            
        tempout = (output + currentinputkeylength + "/");
        FileOutputFormat.setOutputPath(this, new Path(tempout));
        System.out.println("Setting output at " + tempout);
        currentinputkeylength--;
        Configuration conf = new Configuration();
        TileJob job = new TileJob(conf);
        job.setJobName(getJobName());
        job.setUpJob(tempin, tempout, tiletogenerate, currentinputkeylength);       
         return job.waitForCompletion(verbose);

    }else{
        //desiredkeylength == currentkeylength-1
        System.out.println("In else, setting input at " + tempout);

        String tempin = tempout;
        FileInputFormat.setInputPaths(this, tempin);            
        tempout = output;
        FileOutputFormat.setOutputPath(this, new Path(tempout));
        System.out.println("Setting output at " + tempout);
        currentinputkeylength--;
        Configuration conf = new Configuration();
        TileJob job = new TileJob(conf);
        job.setJobName(getJobName());
        job.setUpJob(tempin, tempout, tiletogenerate, currentinputkeylength);
        currentinputkeylength--;

        return super.waitForCompletion(verbose);
    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:37:46.387

通常，您通过一个驱动程序类的主要方法来配置作业、配置和格式类型（输入和输出）来启动 mapreduce 步骤。一旦一切准备就绪，主方法调用 Job::waitForCompletion() 提交作业并等待作业完成后再继续。

您可以将其中一些逻辑包装在一个循环中，该循环重复调用 Job::waitForCompletion() 直到满足您的条件。您可以使用计数器来实施您的标准。将逻辑放入您的 reduce() 方法中，以使用键的数量设置或增加计数器。驱动程序类中的循环可以从 Job 实例中获取该（分布式）计数器的值，然后使用该值编写 while 表达式。

您使用的文件位置取决于您。在此驱动程序循环中，您可以更改输入和输出的文件位置，或保持相同。

我可能应该补充一点，您应该继续在循环内创建一个新的 Job 和 Configuration 实例。我不知道这些对象在这种情况下是否可重用。

```
public static void main(String[] args) {
    int keys = 2;
    boolean completed = true;
    while (completed & (keys > 1)) {

        Job job = new Job();

            // Do all your job configuration here

        completed = job.waitForCompletion();
        if (completed) {
            keys = job.getCounter().findCounter("Total","Keys").getValue();
        }
    }

} 
```

# ruby-on-rails-3 - 验证器：on 不工作（ruby-on-rails）

> ID：13441011
> 
> 赞同：1
> 
> 时间：2012-11-18T14:21:06.350
> 
> 标签：ruby-on-rails-3, validation

在我的用户模型中，我有以下验证：

```
 validates :password, :presence => true, :length => { minimum: 8 }, :on => :update_settings 
```

如果我不使用`:on`验证器，它可以全面工作。但是，使用 :on 执行指定操作时，我没有得到任何验证。

该表格将：`action="/users/1/update_settings"`

路线设置：`user_update_settings PUT /users/:user_id/update_settings(.:format) users#update_settings`

我已经检查了[这里](http://guides.rubyonrails.org/active_record_validations_callbacks.html#on)的指南。相同的验证适用于 :create 等标准操作，但不适用于我自己的操作。

你能看到我还缺少什么来使这个验证有效吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:32:53.107

我认为您对`:on`选项的用途感到困惑。它不是用于指定*控制器*上的操作，而是用于指定*记录*上的操作。以您在此处尝试执行的方式将控制器操作与模型验证联系起来将完全违反 MVC 原则。

检查[文档](http://guides.rubyonrails.org/active_record_validations_callbacks.html#on)：

> :on 选项可让您指定何时进行验证。所有内置验证助手的默认行为是在保存时运行（无论是在创建新记录时还是在更新记录时）。如果要更改它，可以使用 :on => :create 仅在创建新记录时运行验证，或使用 :on => :update 仅在更新记录时运行验证。

因此，该`on`选项仅采用三个可能值之一：（`:save`默认值）`:update`或`:create`.

给定您的`update_settings`操作名称`update_attributes`（请注意，这意味着它还将在更新记录的任何其他控制器操作中应用验证，因为条件不特定于任何特定的控制器操作。`update_attribute``:on => :update`

# javascript - 添加填充到 ui-block-b

> ID：13441018
> 
> 赞同：2
> 
> 时间：2012-11-18T14:22:42.040
> 
> 标签：javascript, jquery

当我将一个添加`padding-left`到类`ui-block-b`时，它的副作用是我的固定`navbar`也得到了这个填充，这是我不想要的。我只想将填充应用于`ui-block-b`我的`ui-gid-a`. 所以我尝试添加一个新类`ui-block-b-own`，但我没有得到填充`ui-block-b`：

CSS：

```
.ui-block-b-own {
   padding-left: 10px !important
} 
```

这是代码：

```
function showDetails(index){

var suchresultat = search(); // gets either rezepte or result

$("#rezept h1").html(suchresultat[index].name);

    var inhalt = "";

var p = suchresultat[index].portionen; 
var m = suchresultat[index].menge;
var z = suchresultat[index].zubereitung;

 var textM = "";
 var textZ = "";

 for( var i = 0; i < m.length; i++ )
 {
       textM += "<br />" + m[i];
 }  

for( var i = 0; i < z.length; i++ )
 {
       textZ += "<br />" + z[i];
 }  

var por;
if (p == 1){  
por = "Portion:";
}
else {
por = "Portionen:";
}

inhalt += '<section class="ui-grid-a">';
inhalt += '<!-- Row1 -->';
inhalt += '<div class="ui-block-a"><strong>Zutaten für<br>'+ p + ' '+ por +'</strong></div>';
inhalt += '<div class="ui-block-b"><strong>Zubereitung:</strong></div>';
inhalt += '<!-- Row2 -->';
inhalt += '<div class="ui-block-a">' + textM + '</div>';
inhalt += '<div class="ui-block-b ui-block-b-own"' + textZ + '</div>';
inhalt += '</section>'; 

$("#rezeptInhalt").html(inhalt); // füllt page id rezept content

$.mobile.changePage($("#rezept")); 
```

}

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:42:26.503

这看起来像是在生成无效的 HTML。`>`在您通过 插入内容之前，有问题的元素缺少关闭`textZ`。因此无法正确应用 CSS，因为浏览器可能会猜测节点的正确文本内容应该是什么。

```
inhalt += '<div class="ui-block-b ui-block-b-own">' + textZ + '</div>';
//----------------------------------------------^^^^ 
```

# java - 显示客户端的屏幕

> ID：13441019
> 
> 赞同：0
> 
> 时间：2012-11-18T14:22:51.067
> 
> 标签：java, image, sockets, screenshot

我的服务器运行，客户端可以连接到它，但我不认为客户端正在发送视频。这是客户端的代码。它只打印一次“发送视频”。

我正在尝试通过客户端屏幕的许多屏幕截图发送视频，因为我不知道有更好的方法来做到这一点。

```
import java.net.Socket;
import java.awt.AWTException;
import java.awt.HeadlessException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.image.RenderedImage;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;

import javax.imageio.ImageIO;
import javax.swing.JOptionPane;

public class Main extends Thread{
    private static Socket socket;
    private static PrintWriter printWriter;
    private static String inputLine;
    private static Thread thread;
    private static BufferedReader bufferedReader;
    private static boolean Connected = true;

    public static void main(String[] args) {
        // System.out.println("What is the computer's IP address?");
        String Ip_addr = JOptionPane
                .showInputDialog("Enter the IP number of the server to connect: ");
        String IP = Ip_addr;
        while (Connected) {
            Connected = true;
            try {
                System.out.println("Client running...");
                socket = new Socket(IP, 8080);
                Connected = false;
                bufferedReader = new BufferedReader(
                        new InputStreamReader(socket.getInputStream()));

            } catch (Exception e) {

            }
        }
        System.out.println("thread running");
        thread = new Thread(new Main());
        thread.start();

    }

    public void run() {
        while(true) {
            RenderedImage screenShot;
            try {
                if((inputLine = bufferedReader.readLine()) != null){
                    System.out.println(inputLine);
                    JOptionPane.showMessageDialog(null, inputLine);
                }
                screenShot = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
                ImageIO.write(screenShot, "PNG", socket.getOutputStream());
                System.out.println("Sending video");
                Thread.sleep(10);
            } catch (HeadlessException | AWTException e) {
                e.printStackTrace();

            } catch (IOException e) {
                e.printStackTrace();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }
} 
```

这可能是由于我缺乏线程知识。然后这里是服务器中处理为视频制作线程的命令的部分，

```
Thread viewing = new Thread(new View(Main.sockets[Selected]));
            viewing.start(); 
```

这条线至少第一次工作，我不知道它是否适用于其他任何人，因为它在线程中得到一个空指针：

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.Socket;

import javax.imageio.ImageIO;

public class View extends Applet implements Runnable {
    private Socket Client;
    public boolean Running = true;
    public Graphics Buffer;
    public Image offscreen;
    public BufferedImage image;

    public View(Socket client) {
        Client = client;    
    }

    public void init() {
        setSize(500,500);
        offscreen = createImage(500, 500);
        Buffer = offscreen.getGraphics();
    }

    public void paint(Graphics g) {
        Buffer.clearRect(0, 0, 500, 500);
        Buffer.drawImage(image, 500, 500, null);
        g.drawImage(offscreen,  0,  0,  this);
    }

    public void update(Graphics g) {
        paint(g);
    }

    public void run() {
        while(Running) {
            try {

                try {
                    image = ImageIO.read(Client.getInputStream());
                    System.out.println("painting");
                    Graphics g = image.getGraphics(); //NullPointerException
                    g.drawImage(image, 500, 500, null);

                } catch (IOException e) {
                    e.printStackTrace();
                }

                repaint();
                Thread.sleep(10);

            } catch (InterruptedException e) {

                e.printStackTrace();
            }

        }

    }
} 
```

# mysql - 如何使用两个内连接提高查询的性能？

> ID：13441028
> 
> 赞同：3
> 
> 时间：2012-11-18T14:25:13.227
> 
> 标签：mysql, query-optimization

我有 3 张桌子：

```
CREATE TABLE `t_event` (
  `id` int(10) NOT NULL auto_increment,
  `title` varchar(100) NOT NULL,
  `kind` int(10) NOT NULL,
  `type` int(10) NOT NULL,
  `short_desc` varchar(500) default NULL,
  `long_desc` varchar(1500) default NULL,
  `location` int(10) NOT NULL,
  `price` decimal(11,0) NOT NULL,
  `currency` int(11) NOT NULL default '1',
  `remark_price` varchar(250) default NULL,
  `remark_prerequisite` varchar(250) default NULL,
  `date_start` date NOT NULL,
  `date_end` date default NULL,
  `date_remark` varchar(300) default NULL,
  `time_start` time default NULL,
  `time_end` time default NULL,
  `remark_time` varchar(50) default NULL,
  `leader` int(50) NOT NULL,
  `leader2` int(100) NOT NULL,
  `eve_contact_name` varchar(50) default NULL,
  `eve_contact_phone` varchar(50) default NULL,
  `eve_contact_email` varchar(50) default NULL,
  `eve_contact_url` varchar(150) default NULL,
  `eve_image_path` varchar(250) default NULL,
  `provider` int(10) default NULL,
  `timestamp` datetime NOT NULL,
  `last_change` datetime NOT NULL default '0000-00-00 00:00:00',
  `quality` int(10) default NULL,
  `min_number` int(10) NOT NULL,
  `max_number` int(10) NOT NULL,
  `active_for_reservation` tinyint(1) NOT NULL,
  `cancellation_day1` int(10) NOT NULL,
  `cancellation_day2` int(10) NOT NULL,
  `cancellation_fee1` varchar(255) NOT NULL,
  `cancellation_fee2` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `FK_t_event_t_event_kind` (`kind`),
  KEY `FK_t_event_t_event_type` (`type`),
  KEY `FK_t_event_t_location` (`location`),
  KEY `FK_t_event_t_currency` (`currency`),
  KEY `FK_t_event_t_leader` (`leader`),
  KEY `FK_t_event_t_provider` (`provider`),
  KEY `FK_t_event_t_quality` (`quality`),
  CONSTRAINT `FK_t_event_t_currency` FOREIGN KEY (`currency`) REFERENCES `t_currency` (`id`),
  CONSTRAINT `FK_t_event_t_event_kind` FOREIGN KEY (`kind`) REFERENCES `t_event_kind` (`id`),
  CONSTRAINT `FK_t_event_t_event_type` FOREIGN KEY (`type`) REFERENCES `t_event_type` (`id`),
  CONSTRAINT `FK_t_event_t_leader` FOREIGN KEY (`leader`) REFERENCES `t_leader` (`id`),
  CONSTRAINT `FK_t_event_t_location` FOREIGN KEY (`location`) REFERENCES `t_location` (`id`),
  CONSTRAINT `FK_t_event_t_provider` FOREIGN KEY (`provider`) REFERENCES `t_provider` (`id`),
  CONSTRAINT `FK_t_event_t_quality` FOREIGN KEY (`quality`) REFERENCES `t_quality` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8432 DEFAULT CHARSET=latin1

CREATE TABLE `t_location` (
  `id` int(10) NOT NULL auto_increment,
  `loc_name` varchar(50) NOT NULL,
  `loc_detail` varchar(50) default NULL,
  `loc_adress1` varchar(50) NOT NULL,
  `loc_adress2` varchar(50) default NULL,
  `loc_country` int(50) NOT NULL default '1',
  `loc_zip` varchar(50) NOT NULL,
  `loc_loc` varchar(50) NOT NULL,
  `loc_shortdesc` varchar(250) default NULL,
  `loc_contact_name` varchar(250) default NULL,
  `loc_contact_gender` int(10) default NULL,
  `loc_contact_phone` varchar(250) default NULL,
  `loc_contact_email` varchar(250) default NULL,
  `loc_contact_url` varchar(250) default NULL,
  `loc_image_path` varchar(250) default NULL,
  `latitude` varchar(100) default NULL,
  `longitude` varchar(100) default NULL,
  `created` datetime NOT NULL,
  `last_change` datetime NOT NULL default '0000-00-00 00:00:00',
  `provider` int(10) NOT NULL default '1',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `id` USING BTREE (`id`),
  KEY `FK_t_location_t_country` (`loc_country`),
  KEY `FK_t_location_t_gender` (`loc_contact_gender`),
  KEY `FK_t_location_t_provider` (`provider`),
  CONSTRAINT `FK_t_location_t_country` FOREIGN KEY (`loc_country`) REFERENCES `t_country`(`id`),
  CONSTRAINT `FK_t_location_t_provider` FOREIGN KEY (`provider`) REFERENCES `t_provider` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1287 DEFAULT CHARSET=latin1

CREATE TABLE `t_dates` (
  `id` int(10) NOT NULL auto_increment,
  `events_id` int(10) NOT NULL,
  `events_start_date` date NOT NULL,
  `events_end_date` date NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `IND_id` (`id`),
  KEY `IND_events_id` (`events_id`),
  CONSTRAINT `t_dates_ibfk_1` FOREIGN KEY (`events_id`) REFERENCES `t_event` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=32048 DEFAULT CHARSET=latin1 
```

* * *

我的查询是：

```
SELECT e.*,I.* ,d.*
FROM t_event AS e
INNER JOIN t_location AS I ON   I.id = e.location
INNER JOIN t_dates  AS d ON  d.events_id  = e.id
; 
```

此查询需要 90 秒才能执行并返回 = 27727

PROFILE 命令显示“发送数据”部分几乎占用了执行时间。EXPLAIN 命令如下：

```
+----+------------+------+------+----------------------------+--------------------+---------+-----------+-------+-------+
| id | select_type | table | type | possible_keys               | key                | key_len | ref       | rows | Extra |
+----+------------+------+------+----------------------------+--------------------+---------+-----------+-------+-------+
|  1 | SIMPLE     | I    | ALL | PRIMARY,id                 | NULL               | NULL    | NULL      |  1143 |       |
|  1 | SIMPLE     | e    | ref  | PRIMARY,FK_t_event_t_location | FK_t_event_t_location | 4       | wu_db.I.id |     4 |       |
|  1 | SIMPLE     | d    | ref  | IND_events_id               | IND_events_id       | 4       | wu_db.e.id |     3 |       |
+----+------------+------+------+----------------------------+--------------------+---------+-----------+-------+-------+ 
```

我的观点是，大量的列是造成这种减速的原因，但即使我写“SELECT e.id, I.events_id, d.id”，它仍然需要 16 秒。

我认为我必须用 LIMIT 和 OFFSET 子句重写查询，你怎么看？

每个表的记录数：

*   t_event = 7991
*   t_location = 1086
*   t_dates = 27727

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:36:33.867

从广义上讲，MySQL 只能使用查询中每个表中的*一个*索引来过滤记录。

也就是说，虽然您的表在和`t_event`上都定义了索引，但只能使用其中一个索引来满足您的查询。您可以在输出中看到这一点，这表明和键都被确定为可能有用（后者实际选择使用）。`id``location``EXPLAIN``PRIMARY``FK_t_event_t_location`

因此，您的与 连接`t_dates`（涉及对`id`列的测试）是通过表扫描而不是索引查找来完成的。`EXPLAIN`同样，您可以从显示`type = ALL`（表扫描）和`key = NULL`（未使用索引）的输出的第一行中看到这一点。

`(id, location)`您应该为您的`t_event`表创建一个复合索引：

```
ALTER TABLE t_event ADD INDEX (id, location); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T23:59:30.667

> 我的观点是，大量列是造成这种减速的原因，但即使 > 当我写“SELECT e.id, I.events_id, d.id”时，它仍然需要 16 秒。
> 
> 我认为我必须用 LIMIT 和 OFFSET 子句重写查询，你怎么看？

我想你是正确的。

如果您可以将速度提高**无限**`JOIN`倍，那么您将“选择”阶段减少到零，并且“发送数据”部分保持不变 - 这是另外 74 秒。

 **换句话说，查询优化的*无限努力*将使您在 90 秒中获得 16 秒的优势 - 总体上约为 18%。

如果这是批量查询，那么时间就不那么重要了；如果不是，我相信，那么我认为有人真的不太可能想要大约 27000 件物品的展示，甚至是概要。

除了“分页”方法，或者如果分页方法被证明不实用，甚至*除了*分页方法之外，您还可以查看您的应用程序是否可以使用某种“过滤”查询（日期范围、位置范围）。

所以我会研究什么`WHERE`条件可以用来使选择更精简。

如果它是一个 Web 应用程序，您可以`SELECT`只使用 ID（您已经尝试过的查询，这个查询只需要 16 秒；如果使用 WHERE，可能会更少），或者尽可能少的列。让我们想象一下，现在您正在显示一个非常长的页面，其中包含许多包含所有信息的“表单”，例如

```
...
+----------------------------------------+
| Date: ....  Place: ...... Notes: ....  |
| Leader: .... Cost: ....                |
  ... and so on and so forth ...
+----------------------------------------+
| Date: ....  Place: ...... Notes: ....  |
  ... and so on and so forth ...
+----------------------------------------+
... 
```

相反，您可以只显示一组非常基本的、最少的信息，对应于您获取的列：

```
...
+----------------------------------------+
| Date: ....  Place: ......        <OPEN>|
+----------------------------------------+
| Date: ....  Place: ......        <OPEN>|
+----------------------------------------+
| Date: ....  Place: ......        <OPEN>|
+----------------------------------------+
| Date: ....  Place: ......        <OPEN>|
... 
```

此时，用户将能够快速浏览列表，但几乎可以肯定不会打开*所有*这些表单，而只会打开两三个。当用户点击 时`OPEN`，jQuery 函数可以向服务器发出非常快速的 AJAX 调用，提供带有 ID 的数据；然后三个单独的查询将以毫秒为单位检索所有相关数据。

数据将被`json_encode()`d 发送回 jQuery，表单将“打开”以“手风琴”方式显示所有信息：

```
+----------------------------------------+
| Date: ....  Place: ......        <OPEN>|
+----------------------------------------+
| Date: ....  Place: ......       <CLOSE>|
| large form with all the information
| ...
| ...
+----------------------------------------+
| Date: ....  Place: ......        <OPEN>| 
```

这样您就不需要*立即*检索所有列，尤其是那些较大的列，例如`short_desc`和`long_desc`，它们之间可以达到两个完整的 Kb，但用户会体验到非常快速的响应。**

# django - 成功创建资源后如何做出 JSON 响应？

> ID：13441029
> 
> 赞同：0
> 
> 时间：2012-11-18T14:25:27.407
> 
> 标签：django, tastypie

我正在构建一个 Django-Tastypie 服务器。创建资源成功后，服务器会回复“201 created”，但是Content-Type是`text/html`. 我希望资源始终返回 JSON 响应，该怎么做？

这是我的资源代码

```
class UserResource(ModelResource):

    class Meta:
        resource_name = "user"
        queryset = User.objects.all()
        authentication = Authentication()
        authorization = Authorization()

        allowed_methods=["post"]
        fields= ["username","email","id"]

    def determine_format(self, request):
        return "application/json" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:43:50.253

尝试添加

```
always_return_data = True 
```

到你的元。

当您执行您的 时`POST`，请确保您发布到的网址`?format=json`末尾有。例如

```
http://127.0.0.1:8000/api/v1/user/?format=json 
```

`POST`通过 curl的完整示例：-

```
curl -v -H "Content-Type: application/json" -X POST --data '{"username":"calvin", "email":"myemail@myemail.com", "id": "1"}' http://127.0.0.1:8000/api/v1/user/?format=json 
```

# javascript - 我应该在单个或单独调用中在 $(document) 上设置多个元素绑定吗？

> ID：13441030
> 
> 赞同：2
> 
> 时间：2012-11-18T14:25:28.010
> 
> 标签：javascript, jquery-mobile, jquery

我正在尝试清理和改进一些代码。有一个相当大的片段附加了多个事件，`$(document)`如下所示：

```
$(document).on('eventA.nameA', '#pageA', function(){
    // do sth
});

$(document).on('eventB.nameB', '#pageB', function(){
    // do sth
});

$(document).on('eventC.nameC', '#pageC', function(){
    // do sth
}); 
```

所以基本上所有的事件绑定都直接在文档上。

**问题：**

是否有限制（我发现大约 50 个单独的文档绑定）以及在单个选择器上设置它的优点/缺点是什么，如下所示：

```
$(document)
    .on('eventA.nameA', '#pageA', function(){
        // do sth
    })
    .on('eventB.nameB', '#pageB', function(){
        // do sth
    })
    .on('eventC.nameC', '#pageC', function(){
        // do sth
    }); 
```

大多数绑定都是特定于页面的（它是一个 Jquery Mobile 应用程序，因此一旦将页面拉入 DOM，它的绑定就会像这样设置）。所以真的没有其他地方可以放置这些绑定，因为会在`$(document)`持续存在时被拉入和拉出。

感谢您的输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:31:50.343

将它们放在单个选择器上的好处是您可以避免`$(document)`每次调用（开销较小，因为`$(document)`会被缓存）。缺点是它们都必须一个接一个，并且你将它们缩进一层。这并不重要。

重要的*是*，如果它们接近真正的选择器，则`document`对 ID 选择器使用委托可能真的很浪费。只需等到文档准备好，或者在元素更新时更新事件处理程序 - 特别是如果所有这些元素实际上不会同时存在于同一页面上。如果选择器实际上比这更复杂，请忽略本段:-)

# zend-framework - Zend 工具项目提供者创建错误

> ID：13441033
> 
> 赞同：-1
> 
> 时间：2012-11-18T14:25:46.673
> 
> 标签：zend-framework

尝试使用以下代码使用 ProjectProvider 创建提供程序：

```
zf create project-provider testng actionName 
```

我收到以下错误：

```
No node was found to append to. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:25:46.673

发现`zfproject.xml`不`<projectProvidersDirectory enabled="false">` 只是将它添加到`projectDirectory`节点

# django - 寻找具有良好文档管理的开源 CMS - 首选 Django

> ID：13441035
> 
> 赞同：3
> 
> 时间：2012-11-18T14:26:01.240
> 
> 标签：django, content-management-system, django-cms, dms

我正在寻找一些对文档管理有良好支持的开源内容管理系统。我希望匿名用户能够以一种简单的方式将文档（pdf、doc 等）添加到某些主题中。

我在 Django 方面有一些经验，我可以自己对其进行一些调整，但我也可以看看其他框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:03:15.273

您可以使用[Django CMS](https://www.django-cms.org/)，但您必须自己制作模板。它不像[WP](http://wordpress.org/)或[Joomla](http://www.joomla.org/)带有现成的主题和模板；）

还有[夹层](http://mezzanine.jupo.org/)，它带有现成的模板和几个主题，还有提供购物车的墨盒。mezzanine 的问题在于，它不是一个可插入的应用程序，无法与您自己的项目一起使用，Mezzanine 本身就是一个完整的项目，您必须以某种方式从它开始您的项目，这不是 django 人喜欢的东西。

最后我没有经验的[FeinCMS ;)](http://www.feincms.org/)

我的建议是使用很棒的 cms 应用程序 Django CMS，你明白了吗？**应用程序**。意味着就像您正在使用的其他 django 应用程序一样使用它。

我还为它发布了几个插件。

django-cms 非常方便且可定制。还有另一个名为[django-shop](https://www.django-shop.org/)的项目可以完美地满足您的购物车需求，来自 django-cms 的大部分开发人员，这意味着它完全可以与 django-cms 一起使用。

django-cms 的好处是，它试图遵循 django 的概念。它是完全模块化的，可以与其他 django 应用程序完美配合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:39:01.150

您可以查看[Mezzanine](http://mezzanine.jupo.org/)或[Django CMS](https://www.django-cms.org/)。

或者查看 Django Packages 进行比较： http: [//www.djangopackages.com/grids/g/cms/](http://www.djangopackages.com/grids/g/cms/)

# c - C - 代码兼容性

> ID：13441040
> 
> 赞同：2
> 
> 时间：2012-11-18T14:26:48.550
> 
> 标签：c, compatibility, ansi

如何确保我的代码与每个设置为最严格级别的 gcc 编译器兼容？是否有任何测试工具或者我需要以某种方式手动测试它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:56:55.317

每个 gcc 编译器都很简单，只需使用旧的编译器，它肯定会与新的编译器一起编译。

如果您希望它与任何编译器一起编译，那就更难了。正如建议的那样，您可以使用 -ansi 开关来禁用 gcc 扩展。

# javascript - 从选定的 li 中删除超链接

> ID：13441041
> 
> 赞同：2
> 
> 时间：2012-11-18T14:26:50.557
> 
> 标签：javascript, jquery, html

我正在尝试使用 jquery 从选定的 li 中删除所有超链接，但似乎无法正常工作。单击时，我的所有超链接都将被删除。我的代码[http://jsfiddle.net/78kAu/1/](http://jsfiddle.net/78kAu/1/)的详细视图。触发代码的事件如下所示

```
 $('a').click(function(){
        var selected = $(this).attr('class');
        var row = $('.elements li').length;
        alert(selected);
        $("a").remove();

        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:30:52.323

代替

```
$("a").remove(); 
```

你要：

```
$(this).remove(); 
```

你得到的内容是“找到`<a>`页面上的所有元素，并删除它们中的每一个”。

如果您想`<a>`从单击元素上方的某个容器中删除所有元素，例如`<li>`，您可以这样做：

```
$(this).closest('li').find('a').remove(); 
```

# java - EntityManager.flush() 在 Java Web 服务中提交事务

> ID：13441043
> 
> 赞同：8
> 
> 时间：2012-11-18T14:27:14.610
> 
> 标签：java, oracle, jpa, jax-ws, ejb-3.0

**编辑**：*感谢大家的回答，但问题出在我的数据源配置上，它实际上处于自动提交模式。有关详细信息，请参阅[下面的答案](https://stackoverflow.com/a/13442550/89435)。*

[EntityManager.flush()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#flush%28%29)方法的 Javadoc和在 Google 中搜索它似乎都表明该`flush`方法只将待处理的语句发送到数据库并且不提交事务。但是我创建的一个简单的测试 Web 服务（在 Java 7、Oracle 11gR2、JBoss 7.1 中并且 Web 服务被打包为一个 jar 文件）似乎另有说明：

这是表创建脚本：

```
CREATE TABLE test(
    id INTEGER NOT NULL,
    name VARCHAR2(20), 
    CONSTRAINT test_pk PRIMARY KEY ("ID")
);
CREATE SEQUENCE test_seq; 
```

这是对应的实体：

```
@Entity @Table(name = "TEST")
public class Test implements Serializable {

    private static final long serialVersionUID = 9192814682033048425L;

    @Id @Column(name = "ID")
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "TEST_SEQ")
    @SequenceGenerator(name="TEST_SEQ",sequenceName="TEST_SEQ", allocationSize = 1)
    private Integer id;

    @Column(name = "NAME")
    private String name;

    // Getters and setters...
} 
```

和测试网络服务：

```
@Stateless @WebService(serviceName = "TestService")
@TransactionManagement(TransactionManagementType.CONTAINER)
public class TestServiceBean implements TestService {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    public void createTest(String name) {
        Test test = new Test();
        test.setName(name);
        entityManager.persist(test);
        entityManager.flush();

        throw new RuntimeException();
    }
} 
```

我的理解是：

*   调用该`createTest`方法时，应用程序启动一个新事务
*   该`persist()`方法生成要发送到数据库的 INSERT 语句
*   该`flush()`方法将 INSERT 语句发送到数据库**但不提交事务！**
*   RuntimeException 导致事务回滚。

但显然我的理解是错误的：每次我运行 web 服务方法时，我都会在表中得到一个新行。此外，使用调试器单步执行此方法会显示在调用该方法时插入了该行`flush()`（我可以使用 SQL Developer 从另一个数据库会话“看到”该行）。

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T17:22:44.537

似乎`flush()`终究没有什么不妥。问题是我没有在 JBoss 中正确设置数据源。这里的教训是，如果你想在 EBJ 中使用容器管理的事务，那么你需要：

*   在 JBoss 中，选中**Use JTA?** 数据源配置中的复选框。
*   在 Weblogic 中，选中数据源配置的 Transactions 选项卡中的**Supports Global Transactions**复选框。

此外，为了消除任何混淆，我的代码中的事务管理是正确的。抛出 a`RuntimeException` **会**回滚异常。这是为什么？好吧，[从 Java EE 6](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html)教程中，我们有：

> 如果抛出系统异常，容器会自动回滚事务。

但是什么是系统异常？本教程似乎没有进一步涉及该主题，因此让我们搜索[EJB 规范](http://jcp.org/aboutJava/communityprocess/final/jsr318/)。在第 382 页中，我们有：

> 系统异常是 java.rmi.RemoteException（或其子类之一）的异常或不是应用程序异常的 RuntimeException。

好的，那么也许 RuntimeException 是一个应用程序异常？不，不是，因为在第 380 页我们有这个：

> 作为检查异常的应用程序异常可以通过在 bean 的业务接口、无接口视图、主接口、组件接口和 Web 服务端点的方法的 throws 子句中列出来定义。作为未经检查的异常的应用程序异常被定义为应用程序异常，方法是使用 ApplicationException 元数据注释对其进行注释，或者在部署描述符中使用 application-exception 元素对其进行表示。

**所以，因为我没有做上面列出的任何事情，所以我在代码中抛出的异常确实是系统异常，如果您已将数据源设置为使用 JTA** ，则确实会回滚事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:12:54.330

要在 EJB 方法中回滚事务，您应该调用该`setRollbackOnly()`方法，否则即使抛出异常退出方法也会导致事务被提交。有关更详细的说明，您可以参考[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html#bnciv)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T05:48:16.140

引用 JPA 规范第 23 页的 JSR-317：

> 属性访问器方法抛出的运行时异常会导致当前事务被标记为回滚。当持久性运行时用于加载或存储持久性状态时，此类方法引发的异常会导致持久性运行时将当前事务标记为回滚，并引发包装应用程序异常的 PersistenceException。

因此，您抛出的 RuntimeException 应该从实体 bean 设置器中抛出，而不是从 EJB 中抛出。

我敢肯定你没有得到包装 PersistenceException - 这表示回滚的标记 - 相反你得到了你抛出的 RuntimeException。

尝试从 EJB 中抛出 RollbackException 而不是 RuntimeException ！！！

或者如规范所述，从实体 bean 设置器中抛出 RuntimeException。

# ruby-on-rails - “未定义”不是对象（评估“action.handler”）

> ID：13441045
> 
> 赞同：3
> 
> 时间：2012-11-18T14:27:19.457
> 
> 标签：ruby-on-rails, ember.js, poltergeist

我正在使用带有 rails 和 poltergeist 的 ember 进行测试！

在我升级到 ember-pre2 后，它在开发中工作得很好，但是在一次测试中关闭 ember 视图时会引发以下错误！

```
失败/错误：click_on "X"
     Capybara::Poltergeist::JavascriptError:
       页面上的 Javascript 代码中出现了一个或多个错误：

       TypeError：“未定义”不是对象（评估“action.handler”）

```

这就是ember.js 中的[https://github.com/emberjs/ember.js/blob/v1.0.0-pre.2/lib/ember.js#L12330](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.2/lib/ember.js#L12330)行，我不知道为什么会发生这种情况.. 当点击“X”只有一个简单的transitionTo！

# c# - 如何在 XNA 中实现对话框

> ID：13441046
> 
> 赞同：0
> 
> 时间：2012-11-18T14:27:21.347
> 
> 标签：c#, windows, windows-phone-7, xna, messagebox

如何在 XNA 游戏中实现类似对话框的功能？我想要做的是当对话框的图像仍然处于活动状态时，它下面的任何内容都将停止接收用户输入，直到该框消失。使用矩形的 Contains() 方法似乎不起作用，因为它是基于坐标的。

例如：点击一个项目会弹出一个小的“使用”框。即使该框的图像与另一个项目的图像位于同一位置（或更准确地说，在顶部），单击该位置只会触发第一个项目的使用，而不会为第二个项目显示另一个“使用”框，有效地禁用碰撞矩形中第二项的输入区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:18:54.267

最简单的方法是使用 UIElementRenderer，如本例所示：http: [//blogs.microsoft.co.il/blogs/pavely/archive/2011/10/26/windows-phone-combining-silverlight-amp-xna-in -a-single-page.aspx](http://blogs.microsoft.co.il/blogs/pavely/archive/2011/10/26/windows-phone-combining-silverlight-amp-xna-in-a-single-page.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:52:38.567

只需使用一些标志来获取输入

例如，

```
bool accessFlag = true; 
```

然后在 Update() 方法中

```
if (accessFlag)
{
  // Take input from user
} 
```

然后，当您的对话框或您想要的任何其他内容出现时，将 accessFlag 设置为 false。并在弹出窗口消失时使其成为现实。

# forms - 如何从 grails 域类更改渲染表单的必需指标

> ID：13441055
> 
> 赞同：1
> 
> 时间：2012-11-18T14:28:27.087
> 
> 标签：forms, grails

我正在经历一些奇怪的事情。拥有一个域[1](https://i.stack.imgur.com/sbk6G.png)类，其中一个属性可以为 null：true，另一个属性可以为 null：false 我希望第一个在生成的视图中呈现，标签 * 中带有 *，而另一个没有它。但两者都没有表现出来。我还有其他显示指示器的域属性。这是一个错误还是我如何改变行为？

我不为此使用任何插件。

非常感谢塞巴斯蒂安

```
class Item {
    String req = "abc"
    String notreq
    int ammount = 1
    static constraints = {
      req nullable:false
      notreq nullable:true
    }
} 
```

![表格截图](../Images/d6cd18f690ca2d93638ef22cfabb8789.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:52:17.107

查看[默认的脚手架模板](https://github.com/grails/grails-core/blob/651454b5a1ed0d8bf8be5e0c59980f7ae296b106/grails-resources/src/grails/templates/scaffolding/renderEditor.template#L267)，如果 String 属性`blank:false`与`nullable:false`.

# objective-c - 如何阻止我的随机图像生成器重复？

> ID：13441062
> 
> 赞同：0
> 
> 时间：2012-11-18T14:29:10.007
> 
> 标签：objective-c

我正在尝试创建一个简单的应用程序，允许您从牌组中挑选一张牌。我需要它做的是不要重复同一张卡片。我已经查看了整个互联网，但我不太清楚如何做到这一点。

这是我现在拥有的代码：

```
-(IBAction) randomize: (id)sender {

    int randomcards = rand() % 53 + 1;
    switch (randomcards) {
        case 0:
            imageview.image = [UIImage imageNamed:@"1.png"];
            break;
        case 1:
            imageview.image = [UIImage imageNamed:@"2.png"];
            break;
        case 2:
            imageview.image = [UIImage imageNamed:@"3.png"];
            break;
        case 3:
            imageview.image = [UIImage imageNamed:@"4.png"];
            break;
        case 4:
            imageview.image = [UIImage imageNamed:@"5.png"];
            break;
        case 5:
            imageview.image = [UIImage imageNamed:@"6.png"];
            break;
        case 6:
            imageview.image = [UIImage imageNamed:@"7.png"];
            break;
        case 7:
            imageview.image = [UIImage imageNamed:@"8.png"];
            break;
        case 8:
            imageview.image = [UIImage imageNamed:@"9.png"];
            break;
        case 9:
            imageview.image = [UIImage imageNamed:@"10.png"];
            break;
        case 10:
            imageview.image = [UIImage imageNamed:@"11.png"];
            break;
        case 11:
            imageview.image = [UIImage imageNamed:@"12.png"];
            break;
        case 12:
            imageview.image = [UIImage imageNamed:@"13.png"];
            break;
        case 13:
            imageview.image = [UIImage imageNamed:@"14.png"];
            break;
        case 14:
            imageview.image = [UIImage imageNamed:@"15.png"];
            break;
        case 15:
            imageview.image = [UIImage imageNamed:@"16.png"];
            break;
        case 16:
            imageview.image = [UIImage imageNamed:@"17.png"];
            break;
        case 17:
            imageview.image = [UIImage imageNamed:@"18.png"];
            break;
        case 18:
            imageview.image = [UIImage imageNamed:@"19.png"];
            break;
        case 19:
            imageview.image = [UIImage imageNamed:@"20.png"];
            break;
        case 20:
            imageview.image = [UIImage imageNamed:@"21.png"];
            break;
        case 21:
            imageview.image = [UIImage imageNamed:@"22.png"];
            break;
        case 22:
            imageview.image = [UIImage imageNamed:@"23.png"];
            break;
        case 23:
            imageview.image = [UIImage imageNamed:@"24.png"];
            break;
        case 24:
            imageview.image = [UIImage imageNamed:@"25.png"];
            break;
        case 25:
            imageview.image = [UIImage imageNamed:@"26.png"];
            break;
        case 26:
            imageview.image = [UIImage imageNamed:@"27.png"];
            break;
        case 27:
            imageview.image = [UIImage imageNamed:@"28.png"];
            break;
        case 28:
            imageview.image = [UIImage imageNamed:@"29.png"];
            break;
        case 29:
            imageview.image = [UIImage imageNamed:@"30.png"];
            break;
        case 30:
            imageview.image = [UIImage imageNamed:@"31.png"];
            break;
        case 31:
            imageview.image = [UIImage imageNamed:@"32.png"];
            break;
        case 32:
            imageview.image = [UIImage imageNamed:@"33.png"];
            break;
        case 33:
            imageview.image = [UIImage imageNamed:@"34.png"];
            break;
        case 34:
            imageview.image = [UIImage imageNamed:@"35.png"];
            break;
        case 35:
            imageview.image = [UIImage imageNamed:@"36.png"];
            break;
        case 36:
            imageview.image = [UIImage imageNamed:@"37.png"];
            break;
        case 37:
            imageview.image = [UIImage imageNamed:@"38.png"];
            break;
        case 38:
            imageview.image = [UIImage imageNamed:@"39.png"];
            break;
        case 39:
            imageview.image = [UIImage imageNamed:@"40.png"];
            break;
        case 40:
            imageview.image = [UIImage imageNamed:@"41.png"];
            break;
        case 41:
            imageview.image = [UIImage imageNamed:@"42.png"];
            break;
        case 42:
            imageview.image = [UIImage imageNamed:@"43.png"];
            break;
        case 43:
            imageview.image = [UIImage imageNamed:@"44.png"];
            break;
        case 44:
            imageview.image = [UIImage imageNamed:@"45.png"];
            break;
        case 45:
            imageview.image = [UIImage imageNamed:@"46.png"];
            break;
        case 46:
            imageview.image = [UIImage imageNamed:@"47.png"];
            break;
        case 47:
            imageview.image = [UIImage imageNamed:@"48.png"];
            break;
        case 48:
            imageview.image = [UIImage imageNamed:@"49.png"];
            break;
        case 49:
            imageview.image = [UIImage imageNamed:@"50.png"];
            break;
        case 50:
            imageview.image = [UIImage imageNamed:@"51.png"];
            break;
        case 51:
            imageview.image = [UIImage imageNamed:@"52.png"];
            break;
        case 52:
            imageview.image = [UIImage imageNamed:@"53.png"];
            break;
        case 53:
            imageview.image = [UIImage imageNamed:@"54.png"];
            break;
    } 
```

谁能给我一些明确的指示，告诉我如何在牌组用完之前阻止同一张牌出现两次？我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T14:36:29.513

与其随机选择卡片，不如将所有卡片分配到一个数组中，然后将数组洗牌。之后，您可以遍历数组，从而随机选择卡片。

请参阅此 SO 问题[whats-the-best-way-to-shuffle-an-nsmutablearray](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

查看使用 arc4random_uniform() 的 Gregory Goltsov 的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:34:26.150

预加载包含所有图像名称的数组（或用于指示**唯一**卡的任何名称）。

对于每张卡片：根据数组中剩余的卡片数量计算随机数，选择卡片，从数组中删除其引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:21:33.923

正如其他人指出的那样，最简单的方法是创建一个图像名称数组并删除您已经使用的名称。这是一个例子。在标题中声明这样的属性。

```
@property (strong, nonatomic) NSMutableArray *availableCards; 
```

在您的实现顶部合成它。

```
@synthesize availableCards = _availableCards; 
```

做一个方便的方法让你初始化它/重置它。

```
- (void) resetAvailableCards {
    NSMutableArray *resetArray = [[NSMutableArray alloc] init];
    //the temporary array to store what we'll set our property to at the end

    for (int i = 1; i < 55; ++i){//for every card in the deck
        NSString* imageName = [NSString stringWithFormat:@"%d.png",i];//make the image name
        [resetArray addObject:imageName];//store it in the array
    }

    self.availableCards = resetArray;//set our property to the array
} 
```

在你的控制器中调用它`viewDidLoad`来初始化状态。

```
[self resetAvailableCards]; 
```

您也可以在需要使所有卡再次可用时调用它。现在，对于您的原始方法。

```
- (IBAction) randomize: (id) sender {
    int cardIndex = arc4random() % [self.availableCards count];//random number within the bounds of the array; no need to add 1 as count is 1 higher than highest available index
    NSString* cardImageName = [self.availableCards objectAtIndex: cardIndex];//get the name of the card we chose
    imageview.image = [UIImage imageNamed: cardImageName];//set the image
    [self.availableCards removeObjectAtIndex:cardIndex];//remove the card name so we can't get it again
    return;
} 
```

请注意，我使用`arc4random`而不是`rand`. 它的有效范围是其两倍，而且它往往会提供更好的分布，并且不需要播种。如果你想`rand`有效地使用，你需要使用时间或其他东西来播种它`srand`。我还建议您从操作中删除 sender 参数，因为它没有被使用，尽管您也必须在其他地方更改它，所以您可能想要保留它。

只是想知道，但什么是`imageview`？既然你不使用`self.imageview`，它是一个ivar吗？它是一个属性，您忘记使用点表示法并直接访问支持它的 ivar 吗？无论哪种方式，您都应该将其声明为某种属性/出口并通过访问器访问它。

# java - 如何将 apache avro GenericRecord 用于动态数据？

> ID：13441065
> 
> 赞同：5
> 
> 时间：2012-11-18T14:29:16.470
> 
> 标签：java, c++, avro

我想使用 Apache Avro 来序列化我的数据，我的客户端是用 C++ 编写的，而我的服务器是用 Java 编写的。

1.  我的服务器 java 代码如下所示：

    ```
    Schema scm = new Schema.Parser().parse("....shcema String.....");
    ByteArrayInputStream inputStream = new ByteArrayInputStream(record.array());
    Decoder coder = new DecoderFactory().directBinaryDecoder(inputStream, null);
    GenericDatumReader<GenericRecord> reDatumReader = new GenericDatumReader<GenericRecord>(scm);
    try {
        GenericRecord result = (GenericRecord)reDatumReader.read(null, coder);
                //here! the result "name", "num_groups" is empty!
        System.out.println(result.get("name")+"   "+result.get("num_groups"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    ```

2.  我的客户代码：

    ```
    std::string schemaDescript ="....shcema String.....";

    std::stringstream rsStream(schemaDescript);
    avro::ValidSchema rSchema;
    avro::compileJsonSchema(rsStream, rSchema);
    avro::EncoderPtr encoder = avro::binaryEncoder();
    std::auto_ptr<avro::OutputStream> oStream = avro::memoryOutputStream();
    encoder->init(*oStream);   
    avro::GenericDatum rData(rSchema);
    avro::GenericRecord sReord = rData.value<avro::GenericRecord>();
    sReord.setFieldAt(0, avro::GenericDatum("i am nice"));
    sReord.setFieldAt(1, avro::GenericDatum(1));
    sReord.setFieldAt(2, avro::GenericDatum(12));
    sReord.setFieldAt(3, avro::GenericDatum(13));

    avro::GenericWriter gwriter(rSchema, encoder);
    gwriter.write(rData);
    oStream->flush();

    std::auto_ptr<avro::InputStream> inSt = avro::memoryInputStream(*oStream);
    avro::StreamReader instReader(*inSt);

    size_t outputLen = oStream->byteCount();
    uint8_t* theByteData = new uint8_t[outputLen];
    instReader.hasMore();
    instReader.readBytes(theByteData, outputLen); 
    ```

我将它发送`theByteData`到服务器，代码有效（没有例外），但结果是空的，谁能告诉我出了什么问题？

以及为什么在 Java 中我们通过 key: 获得价值`result.get("name")`：但在 C++ 中，我们通过 index: 获得价值`record.fieldAt(0).value<string>()`。如果我无法使用字符串键获取值，如何将索引与字符串键匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T15:13:40.257

今天早上我遇到了同样的问题，我在 Avro Test Cpp 文件（“DataFileTests.cc”）中找到了一个带有“testWriteGeneric”函数的解决方案。

例如：

我的架构文件（cpx.json）：

```
{
  "type": "record",
  "name": "cpx",
  "fields" : [
  {"name": "re", "type": "double"},
  {"name": "im", "type" : "int"}
  ]
 } 
```

我的 Cpp 文件：

```
typedef std::pair<avro::ValidSchema, avro::GenericDatum> Pair;

int main(int ac, char **av)
{

    // encode
    std::ifstream ifs(cpx.json);
    avro::ValidSchema schema;
    avro::compileJsonSchema(ifs, schema);

    // I create a pair of validSchema and GenericDatum
    Pair p(schema, avro::GenericDatum());

    avro::GenericDatum &Data = p.second;
    Data = avro::GenericDatum(schema);
    avro::GenericRecord &sReord = Data.value<avro::GenericRecord>();

    // I set my values
    sReord.setFieldAt(sReord.fieldIndex("re"), avro::GenericDatum(42.5));
    sReord.setFieldAt(sReord.fieldIndex("im"), avro::GenericDatum(24));

    // I create a DataFileWriter and i write my pair of ValidSchema and GenericValue
    avro::DataFileWriter<Pair> dataFileWriter("test.bin", schema);
    dataFileWriter.write(p);
    dataFileWriter.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T14:15:26.963

以下语句中的客户端代码存在 2 个问题

```
avro::GenericRecord sReord = rData.value<avro::GenericRecord>();
sReord.setFieldAt(0, avro::GenericDatum("i am nice")); 
```

第二个语句将导致调用`avro::GenericDatum(bool)`而不是`GenericDatum(const std::string&)`预期的。因此，字符串字段保持为空，因此当您尝试读取它时，将返回空字符串。所以，用下面的语句替换上面的语句应该有效

```
std::string s("i am nice");
sReord.setFieldAt(0, avro::GenericDatum(s)); 
```

在第一个语句中，应该将 sRecord 声明为引用，因为这就是 rData.value() 返回的内容。不作为参考只是将其替换为新副本，因此写入其中的任何值实际上都不会写入基础流中。所以，应该是

```
avro::GenericRecord& sReord = rData.value<avro::GenericRecord>(); 
```

此外，您不需要 GenericWriter 并且可以使用 Encoder 对象本身作为

```
avro::encode(*encoder, rData); 
```

# c - 如何将带有转义序列的字符串转换为C中的一个字符

> ID：13441067
> 
> 赞同：1
> 
> 时间：2012-11-18T14:29:30.800
> 
> 标签：c, lexical-analysis

只是为了给你背景。我们有一个学校项目，我们需要用 C 编写自己的编译器。我的任务是编写词法分析。到目前为止一切顺利，但我在转义序列方面遇到了一些困难。

当我找到一个转义序列并且转义序列是正确的时，我将它保存在一个看起来像**\xAF**的字符串中，否则它是词法错误。

**我的问题是如何将只包含转义序列的字符串转换为一个字符？**所以我可以将它添加到包含字符串其余部分的“缓冲区”中。

我对一个只包含转义序列的大表有一个想法，然后将它一一进行比较，但它似乎并不优雅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:44:43.417

此解决方案可用于所有长度和类型的数字转义序列，包括八进制、十六进制等。

当你看到 a 时，你要做的`'\'`是检查下一个字符。如果是`'x'`（或`'X'`），则读取一个字符，如果是十六进制数字（`isxdigit`），则读取另一个字符。如果最后一个*不是*十六进制数字，则将其放回流中（“unget”操作），并仅使用您读取的第一个数字。

您读取的每个数字都放入一个字符串中，然后您可以使用例如[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)将该字符串转换为一个数字。将该数字直接放入令牌值中。

对于八进制序列，最多只能使用三个字符。

* * *

有关类似方法的示例，请参见我多年前制作的[这个旧词法分析器。](https://github.com/pileon/shadow-99/blob/master/src/lexer.cc)搜索 `lex_getescape`功能。尽管此方法使用直接算术而不是`strtoul`将转义码转换为数字，也不是标准`isxdigit`等函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T14:45:47.140

您可以使用以下代码，使用您的字符串调用 xString2char。

```
char x2char(const char c)
{
    if (c >= '0' && c <= '9')
        return c - '0';
    if (c >= 'a' && c <= 'f')
        return c - 'a';
    if (c >= 'A' && c <= 'F')
        return c - 'A';
    //if we got here it's an error - handle it as you like...
}

char xString2char(const char* buf)
{
    char ans;
    ans = x2char(buf[2]);
    ans <<= 4;
    ans += x2char(buf[3]);
    return ans;
} 
```

这应该可以，只需添加错误检查和处理（如果您尚未在代码中验证它们）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T14:44:14.157

flex 有一个`start`条件。这使上下文分析成为可能。例如，在 flex 手册中有一个 C 注释分析（介于`/*`和之间）的示例：`*/`

```
<INITIAL>"/*"   BEGIN(IN_COMMENT);
<IN_COMMENT>{
"*/"            BEGIN(INITIAL);
[^*\n]+         /* eat comment in chunks */
"*"             /* eat the lone star */
\n              yylineno++;
} 
```

开始条件还启用字符串文字分析。在开始条件项中有一个如何使用开始条件匹配 C 样式引用字符串的示例，`"How do I expand backslash-escape sequences in C-style quoted strings?"`在 flex 手册中也有标题为 FAQ 的项。可能这会回答你的问题。

# jquery - 在 json POST 数据的 jquery Ajax 请求中设置参数名称

> ID：13441069
> 
> 赞同：0
> 
> 时间：2012-11-18T14:29:48.313
> 
> 标签：jquery, ajax, spring, spring-mvc

我正在发送一个带有 json 的 POST 请求，如下所示：

```
$.ajax({
     type: "POST",
     url: "myurl.htm",
     contentType: "application/json",
     data: '{"val1":"something","stuff":[{"val1":"value1","data":"Someone"}]}',
     dataType: "json"
}); 
```

`Network`当我通过传递以下有效负载查看此请求时

`{"val1":"something","stuff":[{"val1":"value1","data":"Someone"}]}`

但是，我希望请求负载为：

`mydata: {"val1":"something","stuff":[{"val1":"value1","data":"Someone"}]}`

因为我的控制器接受以下内容：

```
 @RequestMapping(headers ={"Accept=application/json"},value="/myurl.htm", method= RequestMethod.POST)
 public ModelAndView mymethod(
      @RequestParam(value="mydata", required=false) String mydata {
  logger.info(mydata);
} 
```

所以我需要一种方法来简单地为我作为 POST 请求发送到服务器的 json 数据提供一个参数名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:34:27.047

那这个呢？由于 json 只是一个字符串，并且您正在发布数据，这应该可以工作。

```
 $.ajax({
     type: "POST",
     url: "myurl.htm",
     contentType: "application/json",
     data: 'mydata={"val1":"something","stuff":[{"val1":"value1","data":"Someone"}]}',
     dataType: "text"
}); 
```

# visual-studio - Visual Studio - 对“X”个复选框执行事件操作？

> ID：13441073
> 
> 赞同：1
> 
> 时间：2012-11-18T14:30:19.410
> 
> 标签：visual-studio, events, visual-studio-2012, checkbox

我有 20 个复选框。

这是复选框 nº1 的事件：

```
Public Sub C1CheckBox1_CheckedChanged(sender As Object, e As EventArgs) Handles C1CheckBox1.CheckedChanged
    If C1CheckBox1.Checked = True Then My.Settings.box1_selected = "Y" Else My.Settings.box1_selected = "N"
    Dim checkedpath1 = C1CheckBox1.Text
End Sub 
```

我知道我可以在“句柄”中添加所有复选框，但是我的复选框数量未确定，这就是我想要做的：

（伪代码）

```
Public Sub ALL_THE_CHECKBOXES_CheckedChanged(sender As Object, e As EventArgs) Handles ALL_THE_CHECKBOXES.CheckedChanged
    If ANY_CHECKBOX.Checked = True
        My.Settings.boxNUMBER_OF_THIS_SELECTED_CHECKBOX_selected = "Y"
    Else 
        My.Settings.boxNUMBER_OF_THIS_SELECTED_CHECKBOX_selected = "N"
    End If
    Dim checkedpathNUMBER_OF_THIS_SELECTED_CHECKBOX = C1CheckBoxNUMBER_OF_THIS_SELECTED_CHECKBOX.Text
End Sub 
```

我需要生成一个处理**不确定**数量的复选框的事件，如果选择了任何复选框，我需要执行相同的操作，但仅在该选定的复选框中。

基本上我想在设置中记住哪些复选框被选中，哪些没有......

**更新**：

在表单加载时，我使用以下代码创建所有表单复选框：

```
Public Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim List As Integer = 0
    Dim posy As Integer = 10

    filesystem = CreateObject("Scripting.FileSystemObject")
    ThisDir = filesystem.GetFolder(My.Settings.folderpath)

    For Each folder In ThisDir.Subfolders
        List = List + 1
        posy = posy + 20

        Dim newCheckBox As New CheckBox()
        Panel1.Controls.Add(newCheckBox)
        newCheckBox.Name = "checkbox" & List.ToString()
        newCheckBox.Text = folder.name
        newCheckBox.Location = New Point(10, posy)
    Next
End Sub 
```

这会创建一个名为“checkbox1”、“checkbox2”、“checkbox3”等的复选框...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:41:00.110

所有复选框都在另一个控件内。可能是表格，面板什么的。因此，您可以循环浏览这些复选框并为您找到的每个复选框手动分配事件处理程序

修改后的示例代码：

您需要一个名为*MyCBs*的 StringCollection 类型的设置- 或者您可以使用您喜欢的任何名称，只需对代码进行必要的更改。

```
Private Sub Form1_FormClosing(sender As Object, e As FormClosingEventArgs) Handles Me.FormClosing
    My.Settings.Save()
End Sub

Private Sub AnyCB_CheckedChanged(sender As Object, e As EventArgs)

    Dim cb = DirectCast(sender, CheckBox)
    If cb.Checked AndAlso Not My.Settings.MyCBs.Contains(cb.Name) Then
        My.Settings.MyCBs.Add(cb.Name)
    ElseIf Not cb.Checked AndAlso My.Settings.MyCBs.Contains(cb.Name) Then
        My.Settings.MyCBs.Remove(cb.Name)
    End If

End Sub

Private Sub Form1_Shown(sender As Object, e As EventArgs) Handles Me.Shown

    If My.Settings.MyCBs Is Nothing Then My.Settings.MyCBs = New Collections.Specialized.StringCollection

    For Each s In My.Settings.MyCBs
        DirectCast(Me.Controls(s), CheckBox).Checked = True
    Next

    For Each cb In Me.Controls.OfType(Of CheckBox)()
        AddHandler cb.CheckedChanged, AddressOf AnyCB_CheckedChanged
    Next

End Sub 
```

此示例将 my.settings 中复选框的选中状态保存在 StringCollection 中。如果一个 CB 被选中，它的名字被添加到集合中，如果它未被选中，它的名字被删除。这意味着在启动时您可以简单地检查集合中的哪个 CB 名称并将其检查的统计信息设置为 true。最后，您使用 AddHandler 为您的表单中包含的任何 CB 执行代码。请注意，代码内部没有错误处理，这意味着这是你的一部分......

# javascript - jquery javascript停止在嵌套数组迭代中评估未定义的对象

> ID：13441075
> 
> 赞同：1
> 
> 时间：2012-11-18T14:30:42.283
> 
> 标签：javascript, jquery, undefined, loops, multidimensional-array

我有一个数组数组，一些内部数组还有另一个嵌套数组。有些没有。我循环遍历顶级数组元素，如果有一个内部数组，我循环遍历它们。如果没有，我没有。或者我认为。

由于某种原因，当我的迭代发现一个没有嵌套数组的数组时，我的控制台显示“类型错误”未定义......这在技术上是正确的，因为没有定义嵌套数组。但是我认为我的嵌套 if 语句不允许对此进行评估。有什么想法吗？

例如动画[0][3] 是一个数组，但动画[1][3] 是未定义的。所以在我的 if 循环中我有一个嵌套

```
var a = animations.shift();

if ( a[3] )
{
  console.log( 'a[3] is: ' + a[3] )
}
else
{
  return;
} 
```

我读到，如果 a[3] 存在，则将其记录到控制台，如果不逃逸而不打印到控制台...但是我的控制台继续产生未定义的评估。那是因为简单地测试它的存在会返回一个未定义的错误吗？每次遇到没有嵌套数组的数组时，如何阻止弹出此错误？

谢谢。

```
var animations = [
    ['.pcba','fadeIn', [1000], [
        ['.pcb_cad', 'fadeIn', [1000] ]
        ]
     ],
    ['.pcba', 'delay', [2000] ],
    ['.pcba','fadeOut', [1000], [
        ['.heatGenComps', 'fadeIn', [1000] ],
        ['.arrows', 'fadeIn', [1000] ]
        ]
    ],
    ['.heatGenComps', 'delay', [2000] ],
    ['.heatGenComps', 'fadeOut', [1000], [
        ['.arrows', 'fadeOut', [1000] ],
        ['.pcb_cad_cfd', 'fadeIn', [1000] ],
        ['.wePredOpTemps', 'fadeIn', [1000] ]
        ]
    ],

 ]; 
```

我像这样遍历它们：

```
iter();
function iter(){

if (!animating) return;

 var a = animations.shift();

if (a) {
     var el = a[0];
     var fn = a[1];
     var args = a[2];

     $.fn[ a[1] ].apply( $( a[0] ), a[2] ).promise().done(iter);
     if ( a[3] )
     {
        var secondary = a[3];
        console.log( 'a[3] is: ' + a[3] );
        secondaryAnime();
        function secondaryAnime(){
            b = secondary.shift();
            console.log('secondary is: ' + b );
            $.fn[ b[1] ].apply( $( b[0] ), b[2] );
            secondaryAnime();
         };

     }
     else
     {
        return;
     }

}
else
{

}

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:31:55.833

实际上，您有很多用于简单动画链的代码。您要做的就是在每个步骤中同时拥有一些动画。

你听说过[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)吗？它允许连接几乎没有代码的任何异步内容。我将给出与您的动画链完全相同的**整个代码，具有相同的时间，以 jquery-timing 样式编写：**

```
$('.pcb_cad').fadeIn(1000)
    .$('.pcba').fadeIn(1000,$).wait(2000).fadeOut(1000)
    .$('.heatGenComps, .arrows').fadeIn(1000,$).wait(2000).fadeOut(1000)
    .$('.pcb_cad_cfd, .wePredOpTemps').fadeIn(1000); 
```

如您所见，它只是一个长的 jQuery 链。

这里只需要该插件中的两种计时方法。首先，只要您想在方法链中使用以下 jQuery 命令等待完成淡入淡出动画，您就可以编写 .fadeIn(...,$) 。方法 .wait(timeout) 将在给定超时后继续方法链中的所有以下方法。

该插件有很多更直观的方式来推迟和连接您的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:11:41.620

异常的原因是您如何迭代嵌套数组 b。当您停止获取 secondary.shift(); 时，您没有结束条件；

在分配secondary.shift（）之后进行测试“if（b）{...}”就可以了。

顺便说一句：您不需要编写所有空的“else”块。

# java - 如何绘制递归树

> ID：13441078
> 
> 赞同：0
> 
> 时间：2012-11-18T14:31:01.810
> 
> 标签：java, algorithm, recursion

我试图了解如何绘制递归树，例如：取自[这里](http://www.animatedrecursion.com/simple/collector.html)

![在此处输入图像描述](../Images/c88afbc7bfe9f54a175b8266993e1685.png)

在右侧，您可以看到特定问题的递归树。

任何如何开始构建递归树的想法，例如对于这个函数，它给出了一个目标数量和一些权重（例如 1、2、3），如果可以使用带有权重的旧式测量来计算目标，它会返回。

对于这个问题，您需要做的基本观察是向量中的每个重量都可以是： 1\. 放在天平与样品相反的一侧 2\. 放在天平与样品相同的一侧 3\. 左完全失去平衡

我不是在寻找如何以编程方式完成它，只是用铅笔和纸来更好地理解递归是如何工作的。

```
static Boolean IsMeasurable3(int left, int right, ArrayList<Integer> weights,int weightIndex) {

    //Debug
    //System.out.println("Left is " + left + " Right is " + right);

    if (Math.abs(left - right) == 0){
    System.out.println("Found it! Left is " + left + " Right is " + right);
        return true;
    }

    if (weightIndex >= weights.size())
        return false;

        return IsMeasurable3(left + weights.get(weightIndex), right, weights,weightIndex + 1)
                || IsMeasurable3(left, right + weights.get(weightIndex), weights,weightIndex + 1)
                || IsMeasurable3(left, right, weights,weightIndex + 1);

} 
```

对于这个问题和输入权重 1,2,3 和目标 5，输出是：

```
Left is 5 Right is 0
Left is 6 Right is 0
Left is 8 Right is 0
Left is 11 Right is 0
Left is 8 Right is 3
Left is 8 Right is 0
Left is 6 Right is 2
Left is 9 Right is 2
Left is 6 Right is 5
Left is 6 Right is 2
Left is 6 Right is 0
Left is 9 Right is 0
Left is 6 Right is 3
Left is 6 Right is 0
Left is 5 Right is 1
Left is 7 Right is 1
Left is 10 Right is 1
Left is 7 Right is 4
Left is 7 Right is 1
Left is 5 Right is 3
Left is 8 Right is 3
Left is 5 Right is 6
Left is 5 Right is 3
Left is 5 Right is 1
Left is 8 Right is 1
Left is 5 Right is 4
Left is 5 Right is 1
Left is 5 Right is 0
Left is 7 Right is 0
Left is 10 Right is 0
Left is 7 Right is 3
Left is 7 Right is 0
Left is 5 Right is 2
Left is 8 Right is 2
Left is 5 Right is 5
Found it! Left is 5 Right is 5 
```

您如何开始考虑构建树？你什么时候增加宽度，什么时候增加高度..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:45:55.417

对于每个递归调用，树的高度都会增加。在您的示例中，每次调用都会`IsMeasurable3`增加高度。

当从递归函数的同一调用中进行多次调用时，树的宽度会增加。在您的示例中，`IsMeasurable3`被调用 3 次，因此树上最多有三个分支到递归级别。

# android - android上的视频处理，如何将MPEG4数据写入MP4文件？

> ID：13441080
> 
> 赞同：5
> 
> 时间：2012-11-18T14:31:09.000
> 
> 标签：android, containers, video-processing, mpeg-4

如何将 MPEG4 数据写入（包装）到 android 中的 MP4 文件中？

我正在android平台上进行某种视频处理，但我不知道如何将处理后的数据（以某种标准编码，如MPEG4）写回mp4等视频文件中。我认为最好使用 API 来执行此操作，但我找不到所需的 API。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T10:50:58.363

mp4parser 只能使用完全创建的帧流，你不能用它逐帧写入。如我错了请纠正我

```
H264TrackImpl h264Track = new H264TrackImpl(new BufferedInputStream(some input stream here));
Movie m = new Movie();
IsoFile out = new DefaultMp4Builder().build(m);
File file = new File("/sdcard/encoded.mp4");
FileOutputStream fos = new FileOutputStream(file);
out.getBox(fos.getChannel());
fos.close(); 
```

现在我们需要知道如何在那里逐帧写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:13:21.433

[OpenCV](http://code.opencv.org/projects/opencv/wiki)对于这份工作来说可能有点太多了，但我想不出更容易的事情了。OpenCV 是一个为 C、C++ 和 Python 提供 API 的计算机视觉库。

由于您使用的是 Android，因此您必须为 OpenCV 下载名为[JavaCV](http://code.google.com/p/javacv/)的 Java 包装器，它是第 3 方 API。我写了一篇小文章，其中[包含在 Windows 上安装 OpenCV/JavaCV](https://stackoverflow.com/a/13139808/176769)并将其与 Netbeans 一起使用的说明，但最后您必须搜索说明如何为 Android 平台安装 OpenCV/JavaCV 的教程。

[这是一个 C++ 示例](https://stackoverflow.com/a/13391062/176769)，展示了如何打开输入视频并将帧复制到输出文件。但由于您使用的是 Android，因此使用 JavaCV 的示例更好，因此以下代码从输入视频复制帧并将其写入名为的输出文件`out.mp4`：

```
package opencv_videowriter;

import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;

public class OpenCV_videowriter 
{
    public static void main(String[] args) 
    {
        CvCapture capture = cvCreateFileCapture("cleanfish47.mp4");
        if (capture == null)
        {
            System.out.println("!!! Failed cvCreateFileCapture");
            return;
        }

        int fourcc_code = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FOURCC);
        double fps = cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
        int w = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH);
        int h = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT);

        CvVideoWriter writer = cvCreateVideoWriter("out.mp4",       // filename
                                                    fourcc_code,    // video codec
                                                    fps,            // fps
                                                    cvSize(w, h),   // video dimensions
                                                    1);             // is colored
        if (writer == null) 
        {
            System.out.println("!!! Failed cvCreateVideoWriter");

            return;
        }

        IplImage captured_frame = null;        
        while (true)
        {
            // Retrieve frame from the input file
            captured_frame = cvQueryFrame(capture);
            if (captured_frame == null)
            {
                System.out.println("!!! Failed cvQueryFrame");
                break;
            }

            // TODO: write code to process the captured frame (if needed)

            // Store frame in output file
            if (cvWriteFrame(writer, captured_frame) == 0) 
            {
                System.out.println("!!! Failed cvWriteFrame");
                break;
            }

        }

        cvReleaseCapture(capture);
        cvReleaseVideoWriter(writer);        
    }
} 
```

**注意**：OpenCV 中的帧以**BGR**顺序存储像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T02:15:31.943

你的问题没有 100% 的意义。MPEG-4 是一系列规范（所有 ISO/IEC 14496-*），MP4 是 ISO/IEC 14496-14 中指定的文件格式。

如果您想从原始 AAC 和/或 H264 流创建 MP4 文件，我建议使用[mp4parser](http://code.google.com/p/mp4parser/)库。有一个[示例](https://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/muxformats/)展示了如何将 AAC 和 H264 复用到 MP4 文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-10T13:18:01.877

```
// Full working solution:
// 1\. Add to app/build.gradle -> implementation 'com.googlecode.mp4parser:isoparser:1.1.22'
// 2\. Add to your code:
try {
    File mpegFile = new File(); // ... your mpeg file ;
    File mp4file = new File(); // ... you mp4 file;
    DataSource channel = new FileDataSourceImpl(mpegFile);
    IsoFile isoFile = new IsoFile(channel);
    List<TrackBox> trackBoxes = isoFile.getMovieBox().getBoxes(TrackBox.class);
    Movie movie = new Movie();
    for (TrackBox trackBox : trackBoxes) {
        movie.addTrack(new Mp4TrackImpl(channel.toString()
                + "[" + trackBox.getTrackHeaderBox().getTrackId() + "]", trackBox));
    }
    movie.setMatrix(isoFile.getMovieBox().getMovieHeaderBox().getMatrix());
    Container out = new DefaultMp4Builder().build(movie);

    FileChannel fc = new FileOutputStream(mp4file).getChannel();

    out.writeContainer(fc);
    fc.close();
    isoFile.close();
    channel.close();

    Log.d("TEST", "file mpeg " + mpegFile.getPath() + " was changed to " + mp4file.getPath());

    // mpegFile.delete(); // if you wish!

} catch (Exception e) {
    e.printStackTrace();
}

// It's all! Happy coding =) 
```

# android - 切换活动时Android应用程序崩溃

> ID：13441081
> 
> 赞同：1
> 
> 时间：2012-11-18T14:31:18.057
> 
> 标签：android, android-activity

我对 Android 应用程序有疑问。当我尝试通过 buttun 从主要活动 (PretvornikValut) 切换到另一个 (Pretvornik) 时，我收到“不幸的是应用程序停止工作”错误。任何人都可以帮忙吗？

PretvornikValut.java

```
package pretvornik.valut;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

public class PretvornikValut extends Activity implements OnClickListener
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        View gumbPretvori = findViewById(R.id.gumb_pretvornik);
        gumbPretvori.setOnClickListener(this);

        View gumbTecaji = findViewById(R.id.gumb_tecaji);
        gumbTecaji.setOnClickListener(this);

    }
    public void sendMessage(View view) {
        Intent intent = new Intent(this, Pretvornik.class);
        startActivity(intent);

}
    public void onClick(View v) {

        switch (v.getId()) {
            case R.id.gumb_pretvornik:
                Intent i = new Intent(this, Pretvornik.class);
                //i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);                
                startActivity(i);           
                break;

                        case R.id.gumb_tecaji:
                Intent tecaj = new Intent(this, Tecaji.class);
                tecaj.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);              
                startActivity(tecaj);           
                break;

        }
}
} 
```

普雷特沃尼克 java

```
package pretvornik.valut;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

/**
 *
 * @author FAKS
 */
public class Pretvornik extends Activity {

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.pretvornik);
    }
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#99CCCC"
        >
    <Button
        android:id="@+id/gumb_pretvornik"
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:text="Pretvornik"
        />
    <Button
        android:id="@+id/gumb_tecaji"
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:layout_toRightOf="@+id/OK"
        android:layout_alignParentBottom="true"
        android:text="Izpis tecajev"
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Izberi zeljeno opcijo"
        />
    </LinearLayout> 
```

pretvornik.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#99CCCC"
    >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="glavni program"
    />
</LinearLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="pretvornik.valut"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="PretvornikValut"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

                    <activity
            android:name="Pretvornik"
            android:label="@string/Pretvornik_valut" > 
            <meta-data
            android:name="PretvornikValut"
            />           
  </activity>

  <activity
            android:name="Tecaji"
            android:label="@string/Izpis_tecajev" > 
            <meta-data
            android:name="PretvornikValut"
            />           
  </activity>

        </activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:56:35.317

更改清单 xml，

为您的活动添加操作

动作 android:name="android.intent.action.ACTIVITY"

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="pretvornik.valut"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >

           <activity
                android:name="PretvornikValut"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity
                android:name="Pretvornik"
                android:label="@string/hello_world" >
                <action android:name="android.intent.action.ACTIVITY" />
            </activity>
            <activity
                android:name="Tecaji"
                android:label="@string/hello_world" >
                <action android:name="android.intent.action.ACTIVITY" />            
            </activity>

        </application>

    </manifest> 
```

# http - 通过表进行 HTTP 缓存最新修改时间

> ID：13441082
> 
> 赞同：1
> 
> 时间：2012-11-18T14:31:31.710
> 
> 标签：http, postgresql, caching

我有一个想要缓存的页面，该页面显示**最近评论列表和最近帖子列表（均从数据库中获取）**

我计划`Last-Modified`在我的数据库中使用最新的时间戳字段`HTTP Headers`来实现缓存`Last-Modified``updatedat`

要获取最新的修改时间，可以使用查询，例如

```
SELECT updatedat from comments, articles ORDER BY updateat DESC LIMIT 1 
```

有效率吗？

然后，我会将请求`If-Modified-Since`与最新的时间戳进行比较，`DB's (updatedat field)`以确定天气以重新加载数据或将标头类型设置为`Not Modified (304)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:36:26.370

在有问题的列上放置一个索引（updatedat），然后使用 MAX 函数。

```
SELECT MAX(joint.updatedat) FROM (
    SELECT MAX(a.updatedat) updatedat FROM articles a
    UNION
    SELECT MAX(c.updatedat) updatedat FROM comments c
    ) joint; 
```

确保查询的列在*两个*表中都有索引。

# asp.net - 在 asp.net 中注册后向用户添加多个角色

> ID：13441083
> 
> 赞同：1
> 
> 时间：2012-11-18T14:31:36.323
> 
> 标签：asp.net, asp.net-mvc, roleprovider

在我的网站中，我有三个角色（编辑、审稿人和作者）在某些情况下，我需要通过编码添加我的用户所有三个角色。我怎样才能做到这一点？还有我如何更新我的用户角色？非常感谢请指导我。

```
 MembershipUser user = Membership.CreateUser(email, "123456",email);
 Roles.AddUserToRole(email, "Editor"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:03:56.690

要将用户添加到多个角色，请像这样使用[Roles.AddUserToRoles](http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertoroles.aspx)

```
Roles.AddUserToRoles(email, new string[] {"Editor", "Reviewer", "Author" }); 
```

我不知道更新现有角色的方法。但是您始终可以[删除一个角色](http://msdn.microsoft.com/en-us/library/system.web.security.roles.deleterole.aspx)并[添加一个新角色](http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertorole.aspx)。

# php - 如何在所有视图中包含实体

> ID：13441085
> 
> 赞同：0
> 
> 时间：2012-11-18T14:31:44.397
> 
> 标签：php, symfony, twig

在我的新 SF2 项目中，我必须在所有视图中包含一个实体列表，因为此列表用于我的布局。

如果不在我的所有控制器中编写查询选择并将其提供给我的视图，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:35:17.507

不知道，这是否是最好的解决方案，但您可以为此创建一个动作并在您的布局中

```
{% render "AcmeBundle:AcmeController:list" %} 
```

[http://symfony.com/doc/master/book/templating.html#embedding-controllers](http://symfony.com/doc/master/book/templating.html#embedding-controllers)

# javascript - 动态创建的动画完成时的回调

> ID：13441089
> 
> 赞同：4
> 
> 时间：2012-11-18T14:32:04.793
> 
> 标签：javascript, jquery, animation, queue

我有以下代码，我从队列中的两个循环添加效果：

```
tablaActual = ({
    1111: {
        titulo: "Nuevo Video 1",
        usuario: "RadioBot",
        alta: "1353182478"
    },
    2243: {
        titulo: "Old Boy Fashion",
        usuario: "RadioBot",
        alta: "1353182479"
    },
    3432: {
        titulo: "Britney spears",
        usuario: "RadioBot",
        alta: "1353182825"
    }
});

tablaNueva = ({
    1111: {
        titulo: "Nuevo Video 1",
        usuario: "RadioBot",
        alta: "1353182478"
    },
    1112: {
        titulo: "Nuevo video 2",
        usuario: "RadioBot",
        alta: "1353182477"
    },
    1113: {
        titulo: "Nuevo video 3",
        usuario: "RadioBot",
        alta: "1353182476"
    }
});

$("button").bind("click", function() {

    var body = $('body');

    retardation = 500;
    i = 1;

    // we delete the old ones that doesnt match in the new table
    $.each(tablaActual, function(index) {
        if (!tablaNueva[index]) {
            delay = i * retardation;

            $('#lista #id' + index).delay(delay).slideUp("normal", function() {
                $(this).remove();
            }).queue("cola1");

            delete tablaActual[index];
            i++;
        }
    });

    // we add the new ones that doesnt match in the old table
    $.each(tablaNueva, function(index, vars) {
        if (!tablaActual[index]) {

            delay = i * retardation;
            $('<tr id="id' + index + '"><td class="cancion"><h3>' + vars.titulo + '</h3></td><td class="autor">' + vars.usuario + '<span>' + vars.alta + '</span></td></tr>').appendTo('#lista').hide().delay(delay).show('slow').queue("cola2");

            tablaActual[index] = vars;
            i++;

        }
    });

    $("tr:animated").promise().done(function() {

        alert("done");
    });

}); 
```

[jsFiddle](http://jsfiddle.net/dSGWx/7/)

当所有的 TR 动画完成后，它应该会触发警报，但我认为我做错了，因为我一点击运行按钮就会弹出警报。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:44:43.503

我会使用 jQuery.Deferred() 使其工作。通过这样做，您可以将多个延迟对象排队，这些延迟对象会在相应的项目动画完成后解析。

简而言之，创建一个延迟对象数组并使用有点奇怪的构造等待它们`jQuery.when.apply(...).done(function() { ... })`。

看看[这个 JSFiddle](http://jsfiddle.net/dSGWx/9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:49:16.913

您可以在`show`函数的回调中移动警报（完成回调）并测试所有动画是否已完成：http: [//jsfiddle.net/dSGWx/12/](http://jsfiddle.net/dSGWx/12/)

```
var totalmacth=0;
var loop=0;
// los que se tienen que añadir
$.each(tablaNueva, function(index, vars) {
    if (!tablaActual[index]) {
    totalmacth++;

    delay = i * retardation;
    $('<tr id="id' + index + '"><td class="cancion"><h3>' + vars.titulo + '</h3></td><td class="autor">' + vars.usuario + '<span>' + vars.alta + '</span></td></tr>').appendTo('#lista').hide().delay(delay)
         .show('slow',function(){
              loop++; 
              console.log(loop + ' ' + totalmacth)                
              if(loop === totalmacth)
                  alert("done");

          });
    tablaActual[index] = vars;
    i++;
    }      
}); 
```

# excel - 在 Excel 数据透视表中使用 QUARTILE 按子群体汇总数据

> ID：13441090
> 
> 赞同：20
> 
> 时间：2012-11-18T14:32:05.303
> 
> 标签：excel, statistics, excel-2007, pivot-table, data-analysis

我在 Excel 电子表格中有一张大数据表，本质上，它可以被认为是被识别为属于各种亚群的个人的值的集合：

```
 IndivID   SubPopID  Value
     1          A       33.56
     2          E       42.31
     3          D       16.35
     4          A       50.59
     5          F       80.63
     ... 
```

该表中有 10,000 多个个体，以及 50 多个亚群。

我想计算每个亚群的 5 位数汇总（最小值、Q1、中值、Q3、最大值）。

最小值和最大值在数据透视表中很容易。但是 Q1、Q2（中位数）和 Q3 似乎是不可能的。

**问题**

**有什么方法可以计算 Excel 数据透视表中每个子群体的四分位数？**

答案应该是这样的：

```
SubPopID      Min     Q1     Q2        Q3      Max
   A         3.23    12.06   20.35   28.29     50.59
   B 
   C
   ... 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-18T16:51:58.483

我的经验是你不能在数据透视表中做百分位数。我只是做了一个网络搜索，并没有看到任何与此相矛盾的东西。我认为您能做的最好的事情就是将源数据放在一个表中，这样您就可以动态地引用它，然后在另一个表中使用百分位数函数。

我看过[一篇](http://msbicentral.com/Blogs/JavierGuillen/tabid/134/articleType/ArticleView/articleId/163/Quartile-Percentile-and-Median-in-PowerPivot.aspx)关于使用 PowerPivot 的文章，但这仅在 Excel 2010 中可用，而且看起来很难。我有 2010 年，当遇到类似问题时，我仍然选择走我在这里建议的路线。

**编辑**：我提出的替代方案的解释：

为了回答您在评论中提出的问题，以下是我从数据表中计算百分位数的方法：

![百分位数表](../Images/bca38f21ca3ef772c7321bb5dfff8cb2.png)

它依赖于一个公式，对于从 F2 到 H6 的每个单元格都是相同的。这是一个[数组公式](http://www.cpearson.com/excel/ArrayFormulas.aspx)，意味着它是用 输入的`Ctrl-Shift-Enter`。它使用 IF 语句来过滤各种可能的 SubPopID。这是F2的公式：

```
=PERCENTILE(IF(Table1[SubPopID]=F$1,Table1[Value],""),$E2/100) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-11T17:43:44.967

如果您需要检查多个列的条件（a=1 AND b=2），您可以使用 * 字符扩展数组

```
=PERCENTILE((IF((Table1[SubPopID]=[condition1]) * (Table1[SubPopID2]=[condition2]),Table1[Value]),""),$E2/100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-05T16:50:03.603

我在描述解决方案的地方找到了这个[答案](http://answers.microsoft.com/en-us/office/forum/office_2007-excel/can-i-use-the-quartile-function-in-a-pivot-table/e5c89cfd-43ec-4fed-852a-e80d1c529f23?auth=1)。

它使用与 Doug Glancy 描述的相同方法，但将其与数据透视表中的计算字段相关联。答案给出了一个示例 excel 文件。

# php - MySQL/PHP 计数

> ID：13441092
> 
> 赞同：0
> 
> 时间：2012-11-18T14:32:32.553
> 
> 标签：php, mysql

我有 2 个 MySQL 表，一个用于存储专辑，另一个用于存储歌曲。我在表格中显示专辑列表，我希望能够添加一个名为`songs`显示此专辑中歌曲数量的列。我现在拥有它的方式只是把我的桌子弄乱了：

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:51:37.960

假设“播放列表”是您认为的专辑，并且第一个`while`循环在播放列表上进行迭代，我将像这样重写您的代码：

```
while($row = mysql_fetch_array($rs)) {
    echo "<tr>\n";
    echo "<td>".$row['playlist_id']."</td>";

    // Assuming playlist_id is an integer value in your database
    $query = "
        SELECT Playlist_id, COUNT(Playlist_id) AS songCount
        FROM ws_music 
        WHERE Playlist_id = ". intval ($row['playlist_id']) ."
        GROUP BY Playlist_id 
    ";
    $result = mysql_query($query) or die(mysql_error());
    // No need for the second while loop
    $row2 = mysql_fetch_array($result);
    echo "<td>There are ". $row2['songCount'] ." ". $row2['Playlist_id'] ." song.</td>";
    echo "</tr>";
} 
```

# algorithm - 构建堆如何工作

> ID：13441097
> 
> 赞同：-3
> 
> 时间：2012-11-18T14:33:48.150
> 
> 标签：algorithm, heap, heapsort

如果我有这个 A = [4 2 8 6 5 3] 并且我调用 BuildHeap(A)

```
BuildHeap(A){
 heap_length[A] ← length[A]
 for i ← floor(length[A]/2) downto 1 do
 Heapify(A, i)
} 
```

它会像这样构建它

```
 4
  2     8
 6 5   3 
```

或者像这样：

```
 8
  6     4
 2 5   3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T19:11:44.043

如果你创建一个最小堆，

```
 2
  4   3
 6 5 8 
```

如果你创建一个最大堆，

```
 8
  6   4
 2 5 3 
```

请记住，最小堆总是在顶部有“最小”元素，而最大堆总是有“最大”。

创建堆的自下而上的过程是这样的：

![在此处输入图像描述](../Images/09ed9fbe456ee9f483712349d9e50f61.png)

要查看示例，请访问此处：[http ://www.brpreiss.com/books/opus5/html/page502.html](http://www.brpreiss.com/books/opus5/html/page502.html)

# php - PHP如何将所有数组的值作为不同的参数传递给函数？

> ID：13441098
> 
> 赞同：0
> 
> 时间：2012-11-18T14:33:52.677
> 
> 标签：php, arrays

假设我有一个这样的数组

```
$update = array(
  'field1' => 'one',
  'field2' => 'two',
  'field3' => 'three'
); 
```

然后我有一个函数，假设`write()`它接受无限数量的这样的参数`write($thing_one,$thing_two,$thing_three,$thing_four)`

所以我知道我可以传递参数，`write($update[0],$update[1],$update[2])`但在实际示例中，我有很多键和值，`$update`我想做的是找到一种方法将参数从这个数组传递给函数，这样它就与手动输入相同`update($update[0],$update[1],$update[2])`

我希望有人能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:36:48.503

[`call_user_func_array()`](http://us1.php.net/manual/en/function.call-user-func-array.php)应该做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:36:32.897

为什么不直接将数组本身传递给 write 函数：

```
$update = array(
  'field1' => 'one',
  'field2' => 'two',
  'field3' => 'three'
);

write($update); 
```

# mysql - MySQL 推荐一个项目。

> ID：13441113
> 
> 赞同：0
> 
> 时间：2012-11-18T14:35:47.147
> 
> 标签：mysql

我正在尝试为选定的人运行一个查询，它将根据他们的购买历史以及其他人购买的物品推荐物品。

例子：

```
Customer 1 purchases item A, and B.
Customer 2 purchases item B. 
Customer 2 is recommended, item A. 
```

我有 4 个用于此的表，我将用相关的行名列出它们。

```
Customer
PK: Cust_ID

Session
PK: Ses_ID
FK: Cust_ID

Order
PK: Order_ID
FK: ItemRef_ID
FK: Session_ID

Item
PK: Item_ID 
```

我对 SQL 很陌生，但这是我到目前为止所得到的，之后我真的不知道如何去做。

目前它只提供所选客户购买了“Lani Morgan”的商品，但我希望它显示其他客户购买的商品，他们购买了“Lani Morgan”购买的商品。

```
SELECT Item_Desc, Item_ID 
FROM  rbickers.Item

LEFT JOIN rbickers.Order 
ON Item.Item_id = Order.itemref_id 

LEFT join rbickers.Session 
ON Order.Session_id = Session.Ses_id 

left join rbickers.customer
On customer.cust_ID = session.Cust_ID

Where Cust_First = "Lani" and Cust_Last = "Morgan"

GROUP BY Item_Type

LIMIT 10 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:56:28.517

因此，通过您的基本版本和提供的模式，我看到它实现的方式是检查每件商品，如果不是由 customer1 购买，而是由购买 customer1 购买的任何其他客户购买的商品。由于此架构要求您通过所有给定的表加入，我会要求您创建您提供的加入的视图：

```
create view CustomerItems as 
SELECT *
FROM  rbickers.Item

LEFT JOIN rbickers.Order 
ON Item.Item_id = Order.itemref_id 

LEFT join rbickers.Session 
ON Order.Session_id = Session.Ses_id 

left join rbickers.customer
On customer.cust_ID = session.Cust_ID

#Where Cust_First = "Lani" and Cust_Last = "Morgan" 
```

进而：

```
select distinct item.* from item, CustomerItems cust1 where 
cust1.Cust_First="Lani" and cust1.Cust_Last="Morgan" and 
item.Item_ID not in(
select Item_ID from CustomerItems cust2 where cust1.Cust_ID=cust2.Cust_ID) 
and exists(select * from CustomerItems cust3 where 
cust3.Cust_ID<>cust1.cust_ID and item.Item_ID=cust3.Item_ID); 
```

# iphone - 一个文件中的两个接口声明

> ID：13441114
> 
> 赞同：1
> 
> 时间：2012-11-18T14:35:50.000
> 
> 标签：iphone, xcode, cocoa-touch, linker-errors

这是我的 .h 文件：

```
#import <Foundation/Foundation.h>

@interface ShareOfflineItem : NSObject
@property (strong, nonatomic) id shareService;
@property (strong, nonatomic) NSString *title, *url;
@end

@interface ShareOfflineQueue : NSObject
+(ShareOfflineQueue *)sharedQueue;
-(void)addItemToQueue:(ShareOfflineItem *) item;
-(void)flushQueue;
-(void)saveQueueToDisk;

@end 
```

如您所见，没有什么特别的了。但是当我导入我的 .h 文件并尝试实例化 ShareOfflineItem 时，我得到一个链接错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ShareOfflineItem", referenced from: 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T14:57:24.200

利用

```
@class ShareOfflineItem;
@class ShareOfflineQueue; 
```

导入后。这可能会有所帮助。

# c++ - g++ 未定义对 ZMQ 的引用

> ID：13441122
> 
> 赞同：4
> 
> 时间：2012-11-18T14:36:37.803
> 
> 标签：c++, g++, zeromq

我在我的工作电脑上开发了我的项目（一切顺利），但是当我尝试在我的家用电脑上编译（都是 ubuntu 12.04）时，我收到以下消息：

```
undefined reference to `zmq_sendmsg' 
```

我不明白我错过了什么，因为我看到了这个

```
/usr/local/lib/libzmq.so
/usr/local/lib/libzmq.so.3
/usr/local/lib/libzmq.so.3.0.0 
```

所以我的 ZeroMQ 安装似乎没问题。有人可以建议我可以检查什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T05:47:42.790

当您链接时，您必须添加 -lzmq 以便链接器从 libzmq 中提取函数。

下面是我如何编译一个 hello world 程序：

```
gcc -o hello hello.c -lzmq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:42:18.220

我们需要您使用的链接器命令才能知道。

你能构建一些 ZeroMQ 示例程序吗？你能用 Ubuntu 中的 v2 版本构建东西吗，例如

```
edd@max:~$ COLUMNS=40 dpkg -l|grep libzmq
ii  libzmq-dev     2.1.11-1ubuntu ZeroMQ lightweight messaging kernel (develop
ii  libzmq1        2.1.11-1ubuntu ZeroMQ lightweight messaging kernel (shared 
edd@max:~$ 
```

就构建工具而言，ZeroMQ 是一个非常标准的库，因此您一定缺少我们应该找到的一些简单的东西。

# windows - 您如何使用 EC2 在多个服务器上分发您的应用程序？

> ID：13441123
> 
> 赞同：5
> 
> 时间：2012-11-18T14:36:46.593
> 
> 标签：windows, amazon-ec2, load-balancing, scaling, autoscaling

这是我第一次开发需要大量扩展的应用程序，我以前从未有过需要在多个实例上运行的应用程序。

这通常是如何实现的？我是否集群 SQL 服务器，然后在所有服务器上镜像编程并使用负载平衡？

或者我是否分离出在一台服务器上运行一些在另一台服务器上运行的功能？

另外，我如何将代码推送到我的所有 EC2 Windows 实例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T04:46:11.450

这将取决于您的要求。但作为一般准则（我假设是一个网站），我会将数据库、网络服务器、缓存服务器等分离到不同的实例，并将[s3](http://aws.amazon.com/s3/) (+ [cloudfont](http://aws.amazon.com/cloudfront/) ) 用于静态资产。我还要确保适当的速率限制到位，以便基础设施上只有合法负载。

对于 RDBMS 服务器，我可能会设置一个主从数据库设置（[RDS](http://aws.amazon.com/rds/)使这更容易），使用数据库分片等。数据库集群解决方案也存在，它的设置将更复杂，但简化了应用程序程序员的数据库访问。我还将检查所有数据库查询并相应地调整 db/sql 查询。在某些情况下，纯 NoSQL 类型的数据库可能比 RDBMS 或两者的混合更好，应用程序根据所需的数据在它们之间切换。

对于网络服务器，我将设置一个负载平衡器，然后在负载平衡器后面的网络服务器实例上使用自动缩放。如果有的话，类似的东西将适用于应用服务器。我还将调整 Web 服务器设置。

缓存服务器也将被分离到其实例集群中。[ElastiCache](http://aws.amazon.com/elasticache/)似乎是一项不错的服务。Redis 具有与 memcache 相当的性能，但具有更多功能（如列表、集合等），这些功能在扩展时可能会派上用场。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T12:03:07.743

免责声明 - 我不会提及任何 Windows 细节，因为我一直在 Unix 机器上工作。这些指南相当通用。

这是一个主观问题，每个人都会以独特的风格定制自己的系统。以下是我遵循的一些指导方针。

如果是 Web 应用程序，请将表示层（前端）、中间件 (API) 和数据库层分开。与单体应用程序相比，切片架构的扩展性最好。

1.  **数据库**- Amazon 为 SQL 和 NoSQL 数据存储提供出色且高度可用的服务（除非您位于 us-east 可用区）。您可能想查看用于关系数据库的[RDS](http://aws.amazon.com/rds/)和用于 NoSQL 的[DynamoDb 。](http://aws.amazon.com/dynamodb/)两者都可以很好地扩展，一旦启动它们，您就不必担心管理和加载数据存储的分片/集群。
2.  **中间件 API** - 这是一个关键部分。拥有一组将后端功能公开为服务的 API（最好是 REST，但您几乎可以在这里使用任何东西）非常重要。面向服务的架构可以很容易地扩展以满足多个前端客户端的需求，例如 Web、移动、桌面、第三方小部件等。**中间件 API 通常不应该是处理您的业务逻辑的地方**，大部分（或全部）其中）应转换为数据库查找/查询以获得更高的性能。可以对这些服务进行负载平衡以实现高可用性。Amazon 的[弹性负载均衡器](http://aws.amazon.com/elasticloadbalancing/)(ELB) 非常适合初学者。如果您想进行更多自定义，例如阻止某些 IP 地址集的流量，请执行[蓝/绿部署](http://martinfowler.com/bliki/BlueGreenDeployment.html)，那么也许您应该考虑将 HAProxy 负载平衡器部署到单独的实例。
3.  **前端**- 这是您的表示层应该驻留的地方。它应该避免任何直接的数据库查询，除了那些仅限于前端范围的查询，例如：一个简单的 Redis 调用来获取前端片段的最新缓存键。在这里，您几乎可以执行大量缓存，从服务调用到前端片段。您可以将[AWS CloudFront](http://aws.amazon.com/cloudfront/)用于静态资产交付，并将[AWS ElastiCache](http://aws.amazon.com/elasticache/)用于您的缓存存储。ElastiCache 只不过是一个托管的 memcached 集群。您甚至应该考虑对 ELB 后面的前端节点进行负载平衡。

所有这些都可以使用[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)与 AutoScaling 捆绑和部署。它目前支持 ASP .NET、PHP、Python、Java 和 Ruby 容器。AWS Elastic Beanstalk 仍然有其自身的局限性，但它是一种非常酷的方式来管理您的基础设施，同时监控、扩展和负载平衡的麻烦最少。

**提示**：识别应用程序的读取和写入密集区域很有帮助。然后，您可以继续对您的基础架构进行相应的切片，并一次执行所需的优化，并以读取或写入为重点。

总而言之，亚马逊 AWS 拥有几乎所有您可以用来制作服务器拓扑的东西。选择组件由您决定。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T05:01:45.250

我会这样做的方式是，将 1 台服务器作为数据库服务器，并在其上运行 mysql。我在 memcached 上的所有数据，它可以跨越多个服务器和我的客户端，只需一个简单的“如果不在 memcached 上，则从 db 读取，将其放在 memcached 上并返回”。

与数据库相比，Memcached 非常容易扩展。数据库扩展需要大量的管理工作。让它正确和工作是一件痛苦的事。所以我选择memcached。事实上，我有额外的 memcached 服务器，只是为了管理停机时间（如果我的 memcached 有任何服务器）。

我的数据主要是读取，很少写入。当写入发生时，我也将数据推送到 memcached。总而言之，这对我来说效果更好，代码、管理、回退、故障转移、负载平衡方式。都赢了。您只需要更好地编写“一点”代码。

集群 mysql 更具诱惑力，因为它似乎更容易编码、部署、维护以及跟上和执行。请记住 mysql 是基于硬盘的，而 memcached 是基于内存的，因此本质上它更快（至少 10 倍）。而且由于它接管了数据库的所有读取负载，因此您的数据库配置非常简单。

我真的希望有人在这里指出相反的论点，我很想听听。

# php - 除了数字和货币分母之外，从字符串中删除所有内容

> ID：13441125
> 
> 赞同：3
> 
> 时间：2012-11-18T14:36:56.523
> 
> 标签：php, regex, explode

我有以下示例字符串：

```
The price is $54.00 including delivery
On sale for £12.99 until December
European pricing €54.76 excluding UK 
```

从他们每个人中，我只想返回价格和货币分母

```
$54.00
£12.99
€54.76 
```

我的过程是拥有一组货币符号并搜索每个字符串的字符串，然后仅捕获空格之前的字符 - 但是，$ 67.00 然后会失败

那么，我可以遍历一组预设货币符号，然后分解字符串并在下一个不是 . 或 , - 或者可能使用正则表达式

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T14:46:26.073

In regex, `\p{Currency_Symbol}` or `\p{Sc}` represent any currency symbol.

However, [PHP supports](http://www.php.net/manual/en/regexp.reference.unicode.php) only the shorthand form `\p{Sc}` and `/u` modifier is required.

* * *

Using regex pattern

```
/\p{Sc}\s*\d[.,\d]*(?<=\d)/u 
```

you will be able to match for example:

*   $1,234
*   £12.3
*   € 5,345.01

* * *

If you want to use `.` as a decimal separator and `,` as a thousands delimiter, then go with

```
/\p{Sc}\s*\d{1,3}(?:,\d{3})*(?:\.\d+)?/u 
```

* * *

Check **[this demo](http://ideone.com/oFJhc2)**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:43:27.043

你可以这样做：

```
preg_match('/(?:\$|€|£)\s*[\d,.-]+/', $input, $match); 
```

然后在里面找到你的币种和价格`$match`。

当然，您可以从一组货币符号中生成第一部分。只是不要忘记逃避一切：

```
$escapedCurrency = array_map("preg_quote", $currencyArray);
$pattern = '/(?:' . implode("|", $escapedCurrency) . ')\s*[\d,.-]+/';
preg_match($pattern, $input, $match); 
```

对模式末尾的一些可能的改进（实际数字）：

```
(?:\$|€|£)\s*\d+(?:[.,](?:-|\d+))? 
```

这将确保只有一个`.`or`,`后跟一个`-`或只有一个数字（如果您的意图是允许使用国际小数分隔符）。

如果您只想让逗号分隔数千，您可以这样做：

```
(?:\$|€|£)\s*\d{1,3}(?:,\d{3})*(?:\.(?:-|\d+))? 
```

这将匹配最长的“正确”格式的数字（即`$ 1,234.4567,123.456`->`$ 1,234.4567`或`€ 123,456789.12`-> `€ 123,456`）。这实际上取决于您想要达到的准确度。

# node.js - 得到一个结果 express node.js mongodb

> ID：13441126
> 
> 赞同：0
> 
> 时间：2012-11-18T14:37:00.323
> 
> 标签：node.js, mongodb, express, mongoose

我无法从 mongoDb 获得结果，请参阅我的代码

```
//connect user
getUser = function(login, password, callback){
    models.user.find({
        password: global.helper.encode(password),
        $or : [ {
            username : login
        } , {
            mail : login
        } ] 
    },function(err, result){
        console.log(result)
        console.log(result.username)
        callback(result);
    })
} 
```

console.log(result) 返回：

```
[ { username: 'ant',
mail: 'aa@aa.aa',
password: '7e240de74fb1ed08fa08d38063f6a6a91462a815',
date_register: Sun, 18 Nov 2012 11:58:45 GMT,
date_login: Sun, 18 Nov 2012 11:58:45 GMT,
_id: 50a8cd75494a6db815000001,
__v: 0 } ] 
```

和 console.log(result.username) 返回 undefined

我也尝试了 result['username'] 但我也有未定义

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:35:41.787

结果以 JSON 对象的形式返回，该对象是数组中的对象。你几乎拥有它，但你应该做`console.log(result[0].username)`这将返回你需要的东西。

# c - 指针创建常量字符串文字，为什么？

> ID：13441127
> 
> 赞同：2
> 
> 时间：2012-11-18T14:37:12.163
> 
> 标签：c, pointers, constants

我正在浏览一些文件，其中指出

**第一个案例**

```
char * p_var="Sack"; 
```

将创建一个常量字符串文字。

因此像这样的代码

```
 p_var[1]="u"; 
```

将因为该属性而失败。

~~**第二种情况**~~

还提到的是，这仅适用于字符文字，而不适用于通过指针的其他数据类型。所以像这样的代码

```
float *p="3.14"; 
```

将失败，导致编译器错误。

但是当我尝试它时，我没有得到编译器错误，尽管访问它给了我`0.000000f`（在 Ubuntu 上使用 gcc）。

 ~~因此，关于上述内容，我有三个疑问：

1.  **为什么在First Case**中创建的字符串文字是只读的？

2.  为什么只允许创建字符串文字而不允许创建其他常量，例如通过指针浮动？

~~3\. 为什么**Second Case**没有给我编译器错误？~~

**更新**

请放弃第三个问题和第二个案例。我通过添加引号对其进行了测试。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T14:47:40.370

前提是错误的：指针不会创建任何字符串文字，既不是只读的也不是可写的。

创建只读字符串文字的是文字本身：是*只读*`"foo"`字符串文字。如果将它分配给一个指针，那么该指针指向一个只读内存位置。

有了这个，让我们转向你的问题：

> 为什么在 First Case 中创建的字符串文字是只读的？

The real question is: why not? In most cases, you won’t want to change the value of a string literal later on so the default assumption makes sense. Furthermore, you *can* create writeable strings in C via other means.

> Why are only string literals allowed to be created and not other constants like float?

Again, wrong assumption. You *can* create other constants:

```
float f = 1.23f; 
```

Here, the `1.23f` literal is read-only. You can also assign it to a constant variable:

```
const float f = 1.23f; 
```

> Why is Second Case not giving me compiler errors?

Because the compiler cannot check in general whether your pointer points to read-only memory or to writeable memory. Consider this:

```
char* p = "Hello";
char str[] = "world"; // `str` is a writeable string!

p = &str[0];

p[1] = 'x'; 
```

Here, `p[1] = 'x'` is entirely legal – if we hadn’t re-assigned `p` beforehand, it would have been illegal. Checking this cannot be generally done at compile-time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:05:04.813

Regarding your question:

*   Why are string literals created in **First Case** read-only?

`char *p_var="Sack";`

Well, the `p_var` is assigned with the starting address of the memory allocated to the string `"Sack"`. `p_var` content is not read-only, since you haven't put the `const` keyword anywhere in C constructs. Although manipulating the `p_var` contents like strcpy or strcat may cause undefined behavior.

Quote C ISO 9899:

The declaration
`char s[] = "abc", t[3] = "abc";`
defines *plain* char array objects `s` and `t` whose elements are initialized with character string literals.
This declaration is identical to:
`char s[] = { 'a', 'b', 'c', '\0' }, t[] = { 'a', 'b', 'c' };`
The contents of the arrays are modifiable. On the other hand, the declaration:
`char *p = "abc";`
defines `p` with type *pointer to char* and initializes it to point to an object with type *array of char* with length 4 whose elements are initialized with a character string literal. If an attempt is made to use `p` to modify the contents of the array, the behavior is undefined.

An explanation of why it could be read-only per your platform and compiler:

Commonly string literals will be put in "read-only-data" section which gets mapped into the process space as read-only (which is why you seem to not being allowed to change it).

But some platforms do allow, the data segment to be writable.

*   Why are only string literals allowed to be created and not other constants like float? and the third question.

To create a float constant you **should** use: `const float f=1.5f;`

Now, when you are doing: `float *p="3.14";` you are basically assigning the string literal's address to a float pointer.

Try compiling with `-Wall -Werror -Wextra`. You will find out what is happening. It *works* because, in practice, there's no difference between a `char *` and a `float *` under the hood.

Its as if you are writing this:
`float *p=(float*) "3.14";`

This is a well-defined behaviour, unless the memory alignment requirements of float and char differ, in which case it results in undefined behaviour (Reference: C99, 6.3.2.3 p7).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T14:47:32.593

1.  效率
2.  他们是
3.  这是一个字符串介意引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T14:49:19.267

```
float *p="3.14"; 
```

This is also a **string literal** !

```
 Why are string literals created in First Case read-only? 
```

No, both `"sack"` and `"3.14"` are string literals and both are read-only.

* * *

Why are only string literals allowed to be created and not other constants like float?

If you want to create a float const then do:

```
const float p=3.14; 
```

* * *

```
Why is Second Case not giving me compiler errors? 
```

You are making the pointer `p` point to a string literal. When you dereference `p`, it expects to read a float value. So there's nothing wrong as far as the compiler can see.~~

# objective-c - 为什么我在基于文档的应用程序中收到无效上下文 0x0 错误？

> ID：13441130
> 
> 赞同：2
> 
> 时间：2012-11-18T14:37:26.997
> 
> 标签：objective-c, cgcontext, cgcontextref

我使用此代码在视图中绘制一些矩形。这是代码：

```
CGContextRef myContext =  [[NSGraphicsContext currentContext] graphicsPort];
CGContextSetRGBFillColor (myContext, 1, 0, 0, 1);
CGContextFillRect (myContext, CGRectMake (0, 0, 200, 100 ));
CGContextSetRGBFillColor (myContext, 0, 0, 1, .5);
CGContextFillRect (myContext, CGRectMake (0, 0, 100, 200)); 
```

当我使用简单的代码时`AppDelegate`，一切都很好。但是，当我在任何基于文档的应用程序（in `Document.m`）中使用它时，我会收到以下错误：

```
<Error>: CGContextSetRGBFillColor: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextSetRGBFillColor: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:29:27.537

我想我是个白痴！当前上下文始终设置为主窗口。我可以通过子类化视图并使用以下代码来管理它：

```
- (void)drawRect:(NSRect)dirtyRect {
    [super drawRect:dirtyRect];
} 
```

# android - 活动未正确关闭

> ID：13441131
> 
> 赞同：0
> 
> 时间：2012-11-18T14:37:32.113
> 
> 标签：android, android-intent, onpause, activity-finish

我在单击具有“完成”按钮的状态栏通知时调用一项活动。点击 btn。我有以下代码 -

```
public void completeTask(){
        taskDBAdapter.deleteReminder(rowId);
        taskDBAdapter.close();
        Intent intent = new Intent(this, TaskManagerActivity.class);
        startActivity(intent);
        finish();

    } 
```

当我单击完成 btn 时，新活动（TaskManagerActivity）会正确打开。但是如果我重新打开我的应用程序，它仍然会尝试打开此活动，而不是我的默认登陆活动。对此有什么帮助吗？？

编辑 -

我尝试重新定位我的 finish() 语句。仍然无法正常工作。

**编辑 1.1 -** 好的，我将在这里提供一些细节。假设我的应用有两个活动

1.  主要活动
2.  通知活动

我的应用程序创建了一些通知以显示在状态栏上。所以只要我点击状态栏通知 actvty 就会打开。现在有一个名为 Complete on click 的按钮，给定的代码将触发该按钮并且主要活动（在代码 TaskManagerActivity.class 中）将打开。但是当我在我的应用程序中按下后退按钮并再次重新打开它后，它会在它应该触发主要活动时打开通知活动（因为它正在启动活动）。

谢谢，雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:43:52.387

这是android运行的默认方式。如果您按下主页按钮然后再次打开您的应用程序，它将恢复应用程序以前的状态（除非它由于内存限制而终止了应用程序进程和活动）。所以你实际上并没有重新启动你的应用程序，而只是恢复它。

如果您想退出应用程序，请按返回按钮。现在，当您重新打开应用程序时，将启动原始活动。

不要修改此行为。这是默认的系统行为，用户希望它以这种方式工作。你的应用很好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:57:46.920

**-**首先你遇到的行为是Android的运行方式，此外，当用户在这个应用程序打开时接到电话时，在完成应用程序后他肯定会想回到他离开的状态应用。

**不过，如果你想要那样的话，这里就是......**

**-**使用**或**`android:launchMode="singleTask"`_ **`android:launchMode="singleInstance"`**

 ****-**然后`finish()`你的活动在`onPause()`。

```
@Override
void onPause()
    {
    super.onPause();
    finish();
    } 
```**

# asp.net - 需要通过 SSIS 脚本任务自动化 RDLC 报告？

> ID：13441132
> 
> 赞同：0
> 
> 时间：2012-11-18T14:37:35.420
> 
> 标签：asp.net, ssis

目前我在 asp.net 应用程序中调用 RDLC 报告，其中 .rdlc 正在调用，我们传递数据源和生成为 PDF 的报告，整个过程在按钮单击时启动并生成报告。

现在这个过程需要自动化并且报告应该在星期一早上生成。

有人建议我们可以使用 SSIS Script Task，我们可以调用外部 DLL，也可以调用 .rdlc 文件来生成报告，然后我们可以安排 SSIS 包？

我从来没有在 SSIS 方面的经验，需要您的建议以及如何做到这一点，如果有可能？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:19:36.810

使用 SSRS 安排报告运行。无需 ASP.net 或 SSIS，SSRS 已内置调度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:20:34.937

您可以使用 SSRS 订阅来发送报告。如果您真的希望 SSIS 发送报告。您可以执行以下操作。

1.  在 SSRS 中创建报告
2.  将报表部署到报表服务器
3.  创建 SSIS 包
4.  将您的脚本任务拖到包中。

您可以使用以下代码片段通过 SSIS 发送 SSRS 报告。

您应该创建一些 SSIS 变量来存储报表和呈现信息。

1.  渲染扩展 ==> pdf
2.  RenderFileName ==> 您要写入的文件的名称
3.  渲染格式 ==> PDF
4.  RenderOutputPath==> 写入文件的位置
5.  SSRSConnection ==> `http://localhost/ReportServer/reportexecution2005.asmx`[您的报告服务的位置]
6.  SSRSFolderName ==> 您部署的报告的文件夹名称
7.  SSRSReportName ==> 报告的名称

在以下代码段中。

```
public void Main()
        {
            var rExtension = Dts.Variables["RenderExtension"].Value.ToString();
            var rFileName = Dts.Variables["RenderFileName"].Value.ToString();
            var rFormat = Dts.Variables["RenderFormat"].Value.ToString();
            var rOutputPath = Dts.Variables["RenderOutputPath"].Value.ToString();
            var ssrsConnection = Dts.Variables["SSRSConnection"].Value.ToString();
            var ssrsFolderName = Dts.Variables["SSRSFolderName"].Value.ToString();
            var ssrsReportName = Dts.Variables["SSRSReportName"].Value.ToString();

            ReportExecutionService rs=new ReportExecutionService();

            Byte[] results;

            string encoding = string.Empty;
            string mimetype = string.Empty;
            string extension = string.Empty;
            Warning[] warnings = null;
            string[] streamId = null;
            string deviceInfo = null;

            rs.Credentials = System.Net.CredentialCache.DefaultCredentials;
            rs.Url = ssrsConnection;

            try
            {
                var reportpath = string.Format("/{0}/{1}", ssrsFolderName, ssrsReportName);
                rs.LoadReport(reportpath, null);

                //Adding Parameters
                //Commenting the following line Till we test the functionality
                ParameterValue[] paramValues = new ParameterValue[4];

                ParameterValue paramValue = new ParameterValue();

                paramValue.Name = "ReportParamName";
                paramValue.Value = "X,Y,Z";

                paramValues[0] = paramValue;

                rs.SetExecutionParameters(paramValues, "en-US");

                results = rs.Render(rFormat, deviceInfo, out extension, out mimetype, out encoding, out warnings, out streamId);

                var filewithdatetime = string.Format("{0}_{1}",rFileName,DateTime.Now.ToString("yyyy_MM_dd_hhmmss"));

                string path = string.Format(@"{0}\{1}.{2}", rOutputPath, filewithdatetime, rExtension);

                MessageBox.Show(path);

                using (FileStream stream = File.OpenWrite(path))
                {
                    stream.Write(results, 0, results.Length);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.StackTrace);
            }

            Dts.TaskResult = (int)ScriptResults.Success;
        } 
```

# c# - 两个不同用户之间的广播消息

> ID：13441147
> 
> 赞同：0
> 
> 时间：2012-11-18T14:39:41.053
> 
> 标签：c#, inno-setup, broadcast, sendmessage

我正在尝试将自定义消息从提升的设置（在 Windows 7 上）发送到用 C# 编写的正在运行的应用程序。
不幸的是，在 C# 应用程序中从未收到此消息。
这是因为安装程序和应用程序在不同的用户下运行吗？我该如何解决这个问题？

为方便起见：

```
// --- C# code ---

    private const int WM_CUSTOM_CLOSE = 0x400 + 0x500;
    private const int CUSTOM_CLOSE_WPARAM = 0x1;
    private const int CUSTOM_CLOSE_LPARAM = 0x2;

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_CUSTOM_CLOSE)
        {
            int wp = m.WParam.ToInt32();
            int lp = m.LParam.ToInt32();
            if (wp == CUSTOM_CLOSE_WPARAM && lp == CUSTOM_CLOSE_LPARAM)
            {
                Debug.WriteLine("Close application");
                Close();
            }
        }
        base.WndProc(ref m);
    }

// --- INNO SETUP code ---

    const 
      WM_USER = $400;
      WM_CUSTOM_CLOSE = WM_USER + $500;
      WM_CUSTOM_WPARAM = $1;
      WM_CUSTOM_LPARAM = $2;
    function InitializeSetup(): Boolean;
    begin
      SendNotifyMessage(HWND_BROADCAST, WM_CUSTOM_CLOSE, 
                        WM_CUSTOM_WPARAM, WM_CUSTOM_LPARAM);
    end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:58:45.073

没有真正的“解决方案”，而是一种解决方法......

在正在运行的程序中实现对特殊启动参数的处理

如果使用该参数启动，程序应该跳过所有正常启动并连接到正在运行的实例中等待的命名管道/手动重置事件，并通知该实例关闭

从您的设置中，您需要做的就是使用该特殊参数启动程序

# java - 通过 SMTP 发送邮件时，自签名 Java 小程序引发错误“权限被拒绝”

> ID：13441148
> 
> 赞同：3
> 
> 时间：2012-11-18T14:39:41.697
> 
> 标签：java, email, applet, smtp, socketexception

我有自签名的 Java 小程序。当引发未处理的异常时，此小程序应每次发送电子邮件。在那一刻，当我尝试发送邮件时，我的小程序异常崩溃。为了发送电子邮件，我使用了 Java Mail API (javax.mail)。

Java 控制台显示以下文本：

```
javax.mail.MessagingException: Could not connect to SMTP host: host.ru, port: 25;
 nested exception is:
java.net.SocketException: Permission denied: connect
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1972)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)
at javax.mail.Service.connect(Service.java:295)
at javax.mail.Service.connect(Service.java:176)
at javax.mail.Service.connect(Service.java:196)
at ru.gns.JBugMail.sendmail(JBugMail.java:52)
...
Caused by: java.net.SocketException: Permission denied: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:319)
at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:233)
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)
... 42 more 
```

请解释一下，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T14:49:46.593

您可能正在使用 java 1.6 版本从 eclipse 执行代码，而当您将此代码用作 applet 时，java 插件正在 java 1.7 上执行？

如果是这种情况，您可以将此参数添加到您的小程序调用中：

```
<PARAM name="java_arguments" value="-Djava.net.preferIPv4Stack=true"> 
```

如果您使用的是 deployJava.js：

```
<script src="https://www.java.com/js/deployJava.js"></script>
<script>
   var attributes = {...} ;
   var version = '1.7';
   var parameters = { java_arguments : '-Djava.net.preferIPv4Stack=true'...} ;
   deployJava.runApplet(attributes, parameters, version);
 </script> 
```

请记住，如果您使用 java 邮件 api，则 SMTP 服务器必须与 Web 服务器位于同一台机器上 ( [http://www.oracle.com/technetwork/java/faq-135477.html#applets](http://www.oracle.com/technetwork/java/faq-135477.html#applets) )

希望这可以帮助，

# java - 从 servlet 返回 JSONObject 抛出异常

> ID：13441150
> 
> 赞同：0
> 
> 时间：2012-11-18T14:40:10.883
> 
> 标签：java, javascript, json, jquery, servlets

我有一个 servlet，我从 ajax(jquery) 调用中发布数据。

```
$('form').submit(function() {
var URL = "ProjectHandler"; 
var dataString=$(this).serialize();
$.ajax({
       type: "POST",
       url: URL,
       data: dataString, 
      // dataType: json,
       success: function(data)
       {
           alert(data.error);

       }
     });
    return false; 
}); 
```

我注释了 dataType 因为当我取消注释时，它不会进行 ajax 调用，而是以默认模式提交表单，即加载 servlet

我已添加到项目中的 JAR 1\. json-lib-2.2.2-jdk15.jar 2\. apache-commons-lang.jar 3\. ezmorph-1.0.jar

首先它抛出异常filenotfound，它是apache-commons包的一部分，因此包括apache commons，之后我得到了ezmorph-1.0.jar一部分的filenotfound异常，所以我也添加了它。现在我得到

```
java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory 
```

servlet doPost 中的代码：

```
response.setContentType("application/json");
PrintWriter out = response.getWriter();

JSONObject json  = new JSONObject();
json.put("error", true);
json.put("errorDesc", "wrong title");
out.print(json); 
```

我希望我已经清除了这个场景，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:42:40.307

看起来您缺少 commons-logging.jar。将其添加到您的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:20:54.140

你能放弃 json-lib 吗？如果是的话就去做吧！老实说，没有理由使用这个库......它需要您添加大量依赖项的事实证明了这一点。

我建议你试试 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。它的优点是易于使用但功能强大、可扩展、多合一且速度快。它将允许您直接反序列化/序列化到 pojos，无需使用所有那些 JsonObject/Arrays ...如果您在性能方面需要接近手动 json 的东西，您也可以直接使用它的流 API。

# php - 如何使用 PHP 显示表的列名？

> ID：13441153
> 
> 赞同：1
> 
> 时间：2012-11-18T14:40:48.730
> 
> 标签：php, mysql

我已经研究了好几天了。我总是得到这样的东西（这是我认为最好的答案）：

```
SELECT `COLUMN_NAME` 
FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_SCHEMA`='yourdatabasename' 
AND `TABLE_NAME`='yourtablename'; 
```

是的，这个在 SQL 中完美运行，但我仍然不知道如何创建一个 PHP 脚本来以与在 SQL 中相同的方式显示它。谁能给我一个代码？

我现在真的很困惑。请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:53:09.473

没有 PDO：

```
$sql = "SHOW FIELDS FROM users;";
$result_sql = mysql_query($sql) or die ("Error!\n");

    while ($row = mysql_fetch_array($result_sql)) {
        echo $row['Field']."<br>\n";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:45:14.257

你可以在mysql中做到这一点[`mysql_field_name()`](http://php.net/manual/en/function.mysql-field-name.php)

**不鼓励使用 ，`mysql_*`因此请使用`pdo`或`mysqli`**

和他们一起你可以做到这一点

```
mysqli_fetch_field_direct()   //for mysqli
PDOStatement::getColumnMeta() //for pdo 
```

例如在[OP评论之后](https://stackoverflow.com/questions/13441153/how-can-i-display-the-column-names-of-a-table-using-php/13441180#comment18376361_13441180)

```
$sql = "SELECT * from Person";
$result = mysql_query($sql,$con);

$name = mysql_field_name($result, 0); 
```

* * *

说明如何使用[`mysql_field_name()`](http://php.net/manual/en/function.mysql-field-name.php)

**合成纤维**

```
mysql_field_name(data,fieldOffset) 

+------------+------------------------------------------------------------------+
| data       | Required. Specifies which data pointer to use. The data          |
|            | pointer is the result from the mysql_query() function            |
+------------+------------------------------------------------------------------+
|fieldOffset |Required. Specifies which field to start returning. 0 indicates   |
|            |the first field                                                   |
+------------+------------------------------------------------------------------+ 
```

* * *

**好读**

[MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T14:51:51.153

显然，您需要从 mysql 表中检索数据，然后在 php.ini 中对其进行处理。有几种方法可以做到这一点，这是我最喜欢的：

```
<?php
    $query="SELECT `COLUMN_NAME` 
            FROM `INFORMATION_SCHEMA`.`COLUMNS` 
            WHERE `TABLE_SCHEMA`='yourdatabasename' 
            AND `TABLE_NAME`='yourtablename'";
    $result=mysql_query($query); //This will store the whole result table in $result
    $rows=array(); //Initialize array
    while($row=mysql_fetch_object($result)) $rows[]=(object) $row; //Store each row of the result table in the array $rows

    //Now you can access, for example, the third row and second column by saying:
    echo $rows[2]->name_of_second_column
?> 
```

另请参阅[本教程。](http://php.about.com/od/phpwithmysql/ss/mysql_php_2.htm)关于如何从数据库中检索数据并在之后对其进行操作。

# javascript - 为什么浏览器会跳过空白标题？

> ID：13441154
> 
> 赞同：0
> 
> 时间：2012-11-18T14:41:23.803
> 
> 标签：javascript, html

如果我有一个 HTML 文件`file.html`，其中包含：

```
<html>
<body>
<script>
document.title="";
</script>
</body>
</html> 
```

标题设置为`file.html`（因为标题无效）。但如果我有类似的东西：

```
<html>
<body>
<script>
document.title="title";
document.title="";
</script>
</body>
</html> 
```

标题现在设置为`title`. 为什么不`file.html`呢？

# orm - 为什么需要在 ORM 中分离和合并实体？

> ID：13441156
> 
> 赞同：19
> 
> 时间：2012-11-18T14:41:36.287
> 
> 标签：orm, doctrine, doctrine-orm

问题是关于 Doctrine 的，但我认为这可以扩展到许多 ORM。

分离：

> 实体与 EntityManager 分离，因此不再通过对其调用`EntityManager#detach($entity)`方法或将分离操作级联到它来进行管理。对分离实体所做的更改（如果有）（包括删除实体）在分离实体后不会同步到数据库。

合并：

> 合并实体是指将（通常是分离的）实体合并到 EntityManager 的上下文中，以便它们再次被管理。要将实体的状态合并到 EntityManager 中，请使用该 `EntityManager#merge($entity)`方法。传递的实体的状态将被合并到该实体的托管副本中，该副本随后将被返回。

我（几乎）理解这是如何工作的，但问题是：为什么需要分离/合并实体？当这两个操作可以使用/需要时，你能给我一个例子/场景吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-18T17:03:57.120

**我应该何时分离实体？**
当您处理多个 EM 并避免并发冲突时，广泛使用从 EM 中分离实体 (EntityManager)，例如：

```
$user= $em->find('models\User', 1);
$user->setName('Foo');

// You can not remove this user, 
// because it still attached to the first Entity Manager
$em2->remove($user);
$em2->flush(); 
```

您无法控制`$user`对象，`$em2`因为它的会话属于最初从数据库`$em`加载的对象。`$user`他们如何解决上面的问题？您需要`$em`先将对象与原始对象分离：

```
$user= $em->find('models\User', 1);
$user->setName('Foo');

$em->detach($user);
$em2->remove($user);
$em2->flush(); 
```

**什么时候应该使用合并功能？**
基本上当您想要更新实体时：

```
$user= $em->find('models\User', 1);
$user->setName('Foo');

$em->merge($user);
$em->flush(); 
```

EM 将比较数据库中的 $user 和内存中的 $user。一旦 EM 识别出更改的字段，它只会更新它们并保留旧的。

~~该`flush`方法触发提交，用户名将在数据库中更新~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T13:49:01.377

在处理并发问题时，您需要分离实体。

假设您正在使用对您的项目进行回调的异步 API。当您与回调指令一起发出 API 调用时，您可能仍在管理受回调影响的实体，因此会覆盖回调所做的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T17:10:04.697

当您的数据库中有永久数据时，您也可以分离实体，但在您的代码中，您可以根据用户帐户修改这些实体。

例如，有一些角色和一些攻击要对抗的浏览器游戏。**“ UserFoo** ”（lvl 90）使用的 AttackOne 将被比“UserBarr”（lvl 20）使用的更好的奖励修改，但在我们的数据库中，**AttackOne**始终是相同的攻击

# c++ - 多文件 C++ 项目中未定义的引用链接器错误

> ID：13441159
> 
> 赞同：1
> 
> 时间：2012-11-18T14:41:49.317
> 
> 标签：c++, linker, mingw

我正在使用 C++ 开发一个多文件项目，这给了我链接器错误，我不明白为什么。是的，我一直在搜索，但其他人似乎都遇到了第三方库和`-l`链接标志的问题，这里不是这种情况。一小段摘录应该包括所有相关的代码：

**主文件**

```
#include "common.h"
//...
void sort_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE], const unsigned int beg = 0, const unsigned int end = TABLE_LENGTH)
{
    //..
}
void precompute_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE])
{
    //..
    #ifdef METHOD_HELLMAN
    precompute_hellman_table(table);
    #endif
    //..
}
int main()
{
    //..
    byte table [TABLE_LENGTH][2][CIPHER_SIZE];
    precompute_table(table);
    //..
} 
```

**常见的.h**

```
#ifndef COMMON_H
#define COMMON_H
//..
typedef unsigned char byte;
//..
#define METHOD_HELLMAN
#define TABLE_LENGTH 40000
#define CIPHER_SIZE 2
//..
void sort_table(byte[TABLE_LENGTH][2][CIPHER_SIZE]);
//..
#endif 
```

**地狱人.h**

```
#ifndef HELLMAN_H
#define HELLMAN_H

#include "common.h"

extern void precompute_hellman_table(byte[TABLE_LENGTH][2][CIPHER_SIZE]);

#endif 
```

**地狱人.cpp**

```
#include "hellman.h"
//..
void precompute_hellman_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE])
{
    //..
    sort_table(table);
} 
```

所以**hellman.cpp在****main.cpp**中使用了一个通用函数，它在**common.h**中前向声明。使用 MinGW 编译/链接时会产生以下错误：

```
File                                Message
obj\Release\hellman.o:hellman.cpp   undefined reference to `sort_table(unsigned char (*) [2][2])' 
```

为什么我的代码不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:55:12.200

这是你的声明

```
// common.h
void sort_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE]); 
```

这是你的定义

```
// main.cpp
void sort_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE], 
    const unsigned int beg = 0, const unsigned int end = TABLE_LENGTH)
{
    ... 
```

看到不同？

声明和定义应该相同，除了默认值应该只在声明中。

像这样

```
// common.h
void sort_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE], 
    const unsigned int beg = 0, const unsigned int end = TABLE_LENGTH); 
```

还有这个

```
// main.cpp
void sort_table(byte table[TABLE_LENGTH][2][CIPHER_SIZE], 
    const unsigned int beg, const unsigned int end)
{
    ... 
```

# javascript - 获取 a 的高度 - 返回“未定义”

> ID：13441160
> 
> 赞同：7
> 
> 时间：2012-11-18T14:42:06.447
> 
> 标签：javascript, html

我在获取 a 的高度时遇到问题（下面代码中的那个，class="post_div"）。而且我想在 HTML 正文中返回一个 document.write ——也许稍后将它用作其他元素的高度，我希望它是平等的。我已经尝试了所有可能的代码来获取这样一个元素的高度，但每次它都返回“未定义”。我还尝试为 DIV 设置 height=auto。我几乎可以肯定我的问题与我获得高度的方式无关，但不知道还有什么可能！因此，我选择用我的编码的完整结构来打扰你。JavaScript 被放置在一个单独的文档中，其中仅包含以下语句：

```
var result=document.getElementById('postHeight').offsetHeight; 
```

我的 HTML 文档看起来像这样

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<head>
<title>...</title>
<link rel="stylesheet" type="text/css" media="all" href="C:\Users\Lasse\Desktop\hg2\hg2.css" />
<script src="C:\Users\Lasse\Desktop\hg2\hg2.js"></script>
</head>
<body>

<script>document.write(result)</script>

<div id="postHeight" class="post_div">
...             
</div>

</body>
</html> 
```

希望你能帮忙！谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T14:45:04.533

没有 ID 的元素`postHeight`。也许你的意思是

```
var result=document.getElementById('content').offsetHeight; 
```

此外，此计算必须在加载您正在计算的元素***之后***`<script>`完成（因此可以通过将元素放在元素之后，或者延迟执行`onload`或类似）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:02:59.267

由于您的脚本标记出现在元素存在于 DOM 之前，因此您无法获得高度。您可以在获取高度之前放置一个等待文档加载的事件处理程序，或者将该脚本移动到页面底部，但您`document.write`仍然会在元素存在之前被调用。你需要重新考虑你的设计。

示例代码：

```
<div id=getme>
    some text to give it height.
</div>
<script>
    document.write(document.getElementById("getme").clientHeight);
</script> 
```

# qt - QT5混合QML和opengl绘图

> ID：13441162
> 
> 赞同：2
> 
> 时间：2012-11-18T14:42:23.927
> 
> 标签：qt, opengl

我想混合 opengl 和 QML 的东西。我使用了 qt 5 beta 2。我制作了一个极简程序来向您展示问题：

主文件

```
#include <QGuiApplication>
#include "back.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Back b;
    b.setSource(QUrl("ui.qml"));
    b.show();

    return a.exec();
} 
```

返回.h

```
#ifndef BACK_H
#define BACK_H
#include <QtQuick>
#include <QtOpenGL>
#include <QTimer>

class Back :  public QQuickView
{
Q_OBJECT
public:
    ~Back();
    Back();
public slots :
    void paint();
};

#endif // BACK_H 
```

返回.ccp

```
#include "back.h"

Back::Back()
{
    setClearBeforeRendering(false);
    connect(this, SIGNAL(beforeRendering()), this, SLOT(paint()), Qt::DirectConnection);
    QTimer *timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(update()), Qt::DirectConnection);
    timer->start(3000);
}

Back::~Back()
{
}

void Back::paint()
{
    glViewport(0, 0, 150, 150);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, 150, 150,0,0,10);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    glColor3ub(255, 0, 0);
    glBegin(GL_QUADS);
        glVertex2i(0, 0);
        glVertex2i(100, 0);
        glVertex2i(100, 100);
        glVertex2i(0, 100);
    glEnd();
} 
```

ui.qml

```
import QtQuick 2.0

Item {
    width : 150
    height : 150

    Rectangle {
         x : 50
         y : 50
         width: 100
         height: 100
         color: "green"
    }
} 
```

第一张图片是正确的：我有一个带有偏移的绿色正方形和黑色背景的红色正方形。 [图片1](http://imageshack.us/photo/my-images/854/14898400.png/)

3秒后，第二个不正确：我只有带背景 [图片的绿色方块2](http://imageshack.us/photo/my-images/690/56801100.png/)

有人知道我做错了什么吗？

# generics - 通用记录的定义

> ID：13441165
> 
> 赞同：1
> 
> 时间：2012-11-18T14:42:49.230
> 
> 标签：generics, types, record, ada

我对通用记录的定义有些麻烦：

```
-- ADS File
package Stack is

    -- (generic) Entry
    generic type StackEntry is private;

    -- An array of Entries (limited to 5 for testing)
    type StackEntryHolder is array (0..5) of StackEntry;

    -- Stack type containing the entries, it's max. size and the current position
    type StatStack is
    record                                  -- 1 --
        maxSize : Integer := 5;             -- max size (see above)
        pos : Integer := 0;                 -- current position
        content : StackEntryHolder;         -- content entries
    end record;

    -- functions / procedures

end Stack; 
```

如果我编译它，我会收到以下错误（at `-- 1 --`）：

> 泛型类型定义中不允许记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T14:55:02.220

我认为您想制作一个提供私有类型 StatStack 及其操作的通用*包。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:23:10.127

我认为您正在寻找更像这样的东西：

```
generic 
   type StackEntry is private;
package Stack_G is

   type ReturnCode is (Ok,Stack_Full,Stack_Empty);

   -- functions / procedures
   procedure Push (E  : in     StackEntry;
               RC :    out ReturnCode);
   procedure Pop (E  : out StackEntry;
              RC : out ReturnCode);
private
   -- An array of Entries (limited to 5 for testing)
   type StackIndex is new Integer range 1 .. 5;
   type StackEntryHolder is array (StackIndex) of StackEntry;

   -- Stack type containing the entries, it's max. size and the current position
   type StatStack is record 
      IsEmpty : Boolean := True;
      Pos : StackIndex := StackIndex'First;-- current position
      Content : StackEntryHolder;          -- content entries
   end record;

end Stack_G; 
```

1.  您不需要 maxSize，您可以从数组属性“长度或堆栈索引类型”最后获取。
2.  我已将堆栈重命名为 stack_g（我的命名约定表明它是一个通用包）
3.  StackEntry 是泛型的参数，在实例化堆栈包时需要使用它。
4.  我添加了一个堆栈索引类型，在实践中养成在 Ada 中使用新类型和子类型的习惯，它可以为您节省数小时后的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:17:51.597

That's because the code you wrote doesn't follow the proper syntax for a generic declaration. You can view this in its glorious BNF form in [the LRM](http://www.ada-auth.org/standards/12rm/html/RM-12-1.html#I4660).

Basically, you have to decide if you want to declare a *generic package* or a *generic routine*. Guessing you want more that just a single subroutine generic, I'll assume you want a package. Given that it should look something like:

`generic` {generic formal stuff} {package declaration}

...where "{package declaration}" is just a normal package delcaration (but one that may use stuff declared in the generic formal part), and "{generic formal stuff}" is a series of delcarations of generic "formal" parameters that the client will pass into the generic.

What happened in your code is that the compiler sees the magic word `generic` and is now expecting everything up until the next subprogram or package delcaration will be generic formal parameters. The first one it finds, the private type delcaration on the same line, is just fine. However, the next line contains a full record declaration, which doesn't look like a generic formal parameter at all. So the compiler got confused and spit out an error.

# video - 读取视频文件每一帧的一部分

> ID：13441166
> 
> 赞同：0
> 
> 时间：2012-11-18T14:43:06.080
> 
> 标签：video, ffmpeg

我正在对视频文件进行一些跟踪。首先，我使用 ffmpeg 分离帧，并为每个帧应用掩码，然后执行跟踪算法。

为了使这个过程更快，我正在考虑只阅读我需要的部分。喜欢阅读我应用蒙版的部分，或者比阅读对象先前位置周围的框更好。所以我正在寻找一种方法来解码和读取视频文件中特定帧的特定部分。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:47:17.313

No. Unless you know how every part of decoder (for the encoding that's used) works.

I would suggest you that you rather use some streaming algorithm - so that you don't have to store whole pictures from ffmpeg.

# php - 检查是否确实需要包含的 javascript 文件

> ID：13441169
> 
> 赞同：1
> 
> 时间：2012-11-18T14:43:28.587
> 
> 标签：php, javascript

我或多或少在某些软件中构建了新设计，并保留了某些页面功能的功能，我需要保留系统使用的一些 javascript 文件；但是，该软件似乎使用全局标头来包含所有`.js`文件并减少 http 请求，我只想在页面实际需要它们时才包含它们。

但是，如果没有实际检查每个页面的代码，是否有更快的方法可以用来测试页面是否真的*需要*包含某个`.js`文件！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:49:09.677

没有可靠的方法来测试它。更好的解决方案是将所有 javascript 文件打包在一个文件中，因此它只需要一个请求。

在打包过程中，您也可以将它们最小化（删除注释和不需要的空格）。您可以缓存打包的文件，因此不必在每次请求时都生成它。如果您传递了正确的标题，浏览器也会缓存它，从而节省带宽并加快页面速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:51:28.967

# TL/DR

不会。由于 JavaScript 的动态特性，在实际运行之前无法判断是否使用了库。

# 长答案

如果运行应用程序是一个选项（即，它有一定数量的东西要测试以验证所有功能），那么可以为您正在考虑删除的库编写一个代理，以记录它们的实际使用情况。这是一个有点矫枉过正的解决方案，只尝试一个一个删除库并测试页面以查看它们是否工作可能会更容易。这是繁重的工作，但直接方法可能是最快的。

# 有关的

[您可能可以通过组合和缩小](https://github.com/mishoo/UglifyJS)包含来加快速度。如果他们都在一个地方，那可能很容易。

# c++ - 带有字符串和 int 参数的 fputc？"01234"[(int)tmp_seq[j][i]]

> ID：13441179
> 
> 赞同：1
> 
> 时间：2012-11-18T14:45:11.413
> 
> 标签：c++, c

我看到了这行代码：

```
fputc("01234"[(int)tmp_seq[j][i]], opt->fp_bfast); 
```

直到现在我还想`fputc`得到一个字符并将其放入输出流中。这行代码是做什么的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T14:47:34.433

`"01234"`该代码通过将字符串视为字符数组来索引字符串以选择字符。指数为`(int)tmp_seq[j][i]`。

大概`(int)tmp_seq[j][i]`持有一个介于`0`和`4`包含之间的值，否则会出现数组索引越界错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:05:56.977

`"01234"[(int)tmp_seq[j][i]]`是一种相当可怕，低效的写作方式`'0'+tmp_seq[i][j]`......

# html - 将 Div 与页面底部对齐，绝对定位不起作用

> ID：13441182
> 
> 赞同：0
> 
> 时间：2012-11-18T14:45:21.497
> 
> 标签：html, css

我想`DIV`在两种不同的情况下在页面底部放置一个，如果页面内容有足够的高度来填充屏幕底部`DIV`应该贴在底部`content` `DIV`，当它没有足够的高度或者它是空的时，在这种情况下底部`DIV`应该贴在到页尾。

这是我的 HTML 和 CSS ( [http://jsfiddle.net/maysamsh/eWhvs/embedded/result/](http://jsfiddle.net/maysamsh/eWhvs/embedded/result/) )

CSS：

```
@charset "UTF-8";
*{
    padding:0;
    margin:0;
    color:#FFF;
}
body {
    background-image: url(http://ashraafi.com/img/bgpattern.png);
    background-repeat: repeat;
}
#wrapper{
    min-width:900px;
    width: 100%;
    background-color:#CCC;
    position:relative;
}
#top{
    width:inherit;
    height:40px;
    background-color:#000;
    position:relative;
}
#content{
    width:inherit;
    background-color:#36C;
    position:relative;
}
#bottom{
   position:absolute;
   bottom:0;   
   left:0;
   background-color:#42210b;
   width: inherit;
   height: 35px;
}​ 
```

HTML：

```
<div id="wrapper">
    <div id="top">
        top
    </div>
    <div id="content">
        content
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
        <p>foo</p>
    </div>
    <div id="bottom">
        bottom
    </div>
<div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:58:58.487

第一个问题是您`position:relative`在`#wrapper`. 如果删除它，则定位将相对于页面。

但是要获得一个粘性页脚比这要复杂一些。我会推荐：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# image - 调用动作时无法在 cakephp 中加载图像文件

> ID：13441188
> 
> 赞同：1
> 
> 时间：2012-11-18T14:46:04.627
> 
> 标签：image, cakephp, cakephp-2.1

首先，我加载主页并加载所有图像，没关系。但是当单击链接并调用另一个操作（查看操作）时，它的图像不会加载。

这是我的图像路径和 view.ctp 文件：

![webroot中的图像路径](../Images/44dae313c65b771a0218d08cd9163c4e.png)

它是视图动作：

```
public function view($id = NULL) 
{  
    $this->layout= false;  
    $post = $this->Post->read(NULL, $id);  
    if(isset($this->params['requested'])){  
        return $post;  
    }  
    $this->set('post',$post);  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:14:47.220

不要对 PATHS 感到疯狂 :) 使用 CakePHP 方法并忘记它。

我以前也有同样的问题。

简单的方法是将所有图像存储在

> /app/webroot/img

或任何子文件夹。

然后，使用 HTML 助手打印它们：

```
echo $this->Html->image("name_of_image.jpg", array("alt" => "alternative_text")); 
```

有关如何使用**图像**助手的更多信息，请查看： [http ://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::image](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::image)

您可以应用相同的规则来加载 CSS、JS 文件、创建链接...以正确的方式使用 CakePHP 函数而忘记路径问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T18:18:32.903

您对 URL 或一般文件系统中使用的相对路径和绝对路径缺乏了解。让我从别的地方开始：

1.  不要将图像放在 CSS 文件夹中。默认 cakephp 烘焙应用程序中已经以小写形式存在的 css 文件夹用于存储 CSS 文件。不多也不少。图像属于 webroot 目录中的“img”文件夹。
2.  您应该始终对 url 以及 webroot 中的目录和文件使用完整的小写字母，无论它是不是蛋糕。这是因为大多数优秀的虚拟主机操作系统（如 Debian）都是基于 linux 的，这在大小写书写方面有所不同。唯一不这样做的操作系统是 Windows（据我所知）。我知道你在 Windows 上编码，这就是为什么你现在所有的乱码都能正常工作，但如果你把它放在某个地方，它通常是你正在处理的基于 Linux 的服务器，你可以重写一半的应用程序视图。
3.  罗斯解决方案是正确的，但它与该列表的第一点冲突，它说将图像放在“img”目录中。对于路径，您应该始终使用 CakePHPs 内置解决方案。通过这种方式，您可以确保应用程序在任何时候都不会崩溃，即使您可以将其放在子目录中，或者将其托管在一些愚蠢的系统上，比如一些德国主机商的系统……这里没有名字。

给你的问题：关于路径，你需要了解一些事情。有绝对路径。它们提供了从文件系统根目录到您想要的位置的信息：例如：**/var/www/somefolder/someapp/webroot/index.php** (Linux) **C:\www\somefolder\someapp\webroot\index。 php** (视窗)

当您深入文件系统或在您可能甚至不知道您的绝对路径相对路径是“发明”的环境中时，为了使这更容易处理。假设您在上面指定的目录中，并且想要访问或包含应用程序的“Config/core.php”：../Config/core.php (Linux) ..\Config\core.php (Windows -这里没有什么特别的，除了斜杠是反斜杠）

这基本上是：回到“webroot”的父目录，在这种情况下是“/var/www/somefolder/someapp/”（Linux）和Windows“C:\www\somefolder\someapp\”。从那里我们将再次前进到“Config”文件夹，然后访问 core.php。

此架构也适用于 url。例如**www.example.com/pages/imprint/**。通常，服务器会在您的主机的 webroot 中搜索文件夹“页面”。在那里它会搜索一个文件夹“印记”。之后，根据您的服务器配置，它会在该文件夹中搜索“index.html”或“index.php”或您建议服务器用作索引文件的其他文件。或者它可以只输出文件夹的内容。

使用“[application]/webroot/”文件夹中的 .htaccess 文件，此行为将被重定向到 CakePHP 的 index.php 文件。Cake 正在分析 url 并检查是否有任何有效的控制器操作或路由，然后为它运行适当的代码。但！此规则不适用于 webroot 目录中的实际文件或文件夹。（查看 webroot 文件夹中的 htaccess 文件并在 google 中查找其中使用的命令）。这就是为什么如果您使用正确的语法，可以毫无问题地交付 css 文件。由于 CakePHP 对其 url 使用文件夹 url 语法，因此给出相对 url 是一个问题，因为它们大多数时候只适用于一个特定页面。例如**/pages/imprint** **../img/blabla.gif**将返回 webroot 并显示特定图片，因为要使用的 url 将是“webroot/img/blabla.gif”。但是在同一个应用程序**/products/view/1**中，路径**../img/blabla.gif**最终会出现在不是实际文件的“webroot/products/img/blabla.gif”中，cakephp 会尝试处理它并它会失败，因为 url 无效。

我希望这会有所帮助。

多检查一下这些路径。了解这些对于编程至关重要，当时它对我帮助很大；）

问候 func0der

# css - css 过渡 - 为什么这不起作用？

> ID：13441189
> 
> 赞同：0
> 
> 时间：2012-11-18T14:46:04.813
> 
> 标签：css

我有这个 css3 转换代码：http: [//jsfiddle.net/uRxKg/](http://jsfiddle.net/uRxKg/)

CSS：

```
body, html {
    height: 100%;
    margin: 0;
}

.container {
    position:relative;
    height: 100%;
    width: 100%;
    background-color: black;
}

.shrink {
    height: 0px;
    width: 0px;
    position: absolute;
    right: 0;
    -webkit-transition: opacity 4s ease-in-out;
    -moz-transition: opacity 4s ease-in-out;
    -o-transition: opacity 4s ease-in-out;
    transition: opacity 4s ease-in-out;
}

.shrink.active {
    height: 100%;
    width: 100%;
} 
```

HTML：

```
<!doctype html>
<html>
    <head>
        <title></title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" media="screen" href="css/style.css"/>
        <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
    </head>
    <body>
        <div class="container">
          <img class="shrink active" src="http://dummyimage.com/1050x750/ffffff/0011ff.jpg&text=image1" />
          <img class="shrink" src="http://dummyimage.com/1050x750/ffffff/0011ff.jpg&text=image2" />
          <img class="shrink" src="http://dummyimage.com/1050x750/ffffff/0011ff.jpg&text=image3" />
        </div>
        <button id="prev">prev</button>
        <button id="next">next</button>
    </body>
</html> 
```

JS：

```
$(function() {
    $("#next").click(function() {
        var active = $(".active");
        var next = active.next();
        if (next.length > 0) {
            active.removeClass("active");
            next.addClass("active");
        }
    });
    $("#prev").click(function() {
        var active = $(".active");
        var prev = active.prev();
        if (prev.length > 0) {
            active.removeClass("active");
            prev.addClass("active");
        }
    });
}); 
```

当我单击下一个或上一个时，活动图像应该显示过渡，但事实并非如此。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T14:53:51.300

过渡设置为不透明度？

```
transition: opacity 4s ease-in-out; 
```

如果您打算进行不透明度转换，则应在活动和收缩状态中定义不透明度更改：

见这里：http: [//jsfiddle.net/jc6212/uRxKg/2/](http://jsfiddle.net/jc6212/uRxKg/2/)

# asp.net - Creating weekly table

> ID：13441196
> 
> 赞同：0
> 
> 时间：2012-11-18T14:47:11.667
> 
> 标签：asp.net, sql-server, sql-server-2008, visual-web-developer

I have an application where I set a weekly target for my employees. I also need to update target achieved by each daily. So that I can compare with set target. I need something like this:

```
sr|emp |weekly_tgt |19.11.11 |20.11.11|21.11.11|22.11.11|23.11.11|24.11.11| 
```

I googled the problem and found some scheduler and event manager. But do I need to use those or there is some easier way to achieve it? If I am to use those which one should I ? I am using SQL Server for database.

Any help is highly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:51:48.783

我会使用两个表：1 记录每周目标，1 记录每日目标。

```
create table weekly_target (
  id smallint PRIMARY KEY,
  emp smallint,
  startweek date,
  target decimal(3,2))

create table daily_target (
  id smallint PRIMARY KEY,
  emp smallint,
  [date] date,
  target_value decimal(3,2)) 
```

## [看到它在行动](http://sqlfiddle.com/#!3/838ba/4)

# java - java：多线程和文件读取

> ID：13441198
> 
> 赞同：2
> 
> 时间：2012-11-18T14:47:30.637
> 
> 标签：java, multithreading

我想创建有两个线程的应用程序一个线程读取字符数据另一个线程将其打印到控制台我有以下代码到 interThreadCommunication（假设文件具有类似 stackoverflow 的数据）我正在生成如下输出：

```
From echo int  115 char value s
From echo int  116 char value t
From echo int  97 char value a
From echo int  99 char value c
From echo int  107 char value k
From echo int  111 char value o
From echo int  118 char value v
From echo int  101 char value e
From echo int  114 char value r
From echo int  102 char value f
From echo int  108 char value l
From echo int  111 char value o
From echo int  119 char value w
From echo int  10 char value 
```

代码 ：

```
import java.io.*;
class store
{
    int  i;
    public int get()
    {
        return i;
    }
    public void set(int i)
    {
        this.i=i;
    }
}
public class Main
{
    public static void main(String a[])
    {
        store s=new store();
        Thread th=new Thread(new read(s));
        Thread pr=new Thread(new echo(s));
        th.start();
        pr.start();             
    }   
}
class echo implements Runnable
{
    store st;
    public echo(store s)
    {
        st=s;
    }
    public void run()
    {       
        while(true)
        {
            int t=st.get();         
            if(t==-1)
                break;              
            if(t!=32)
            {
System.out.println("From echo int  "+t+" char value "+(char)st.get());  
            }
            st.set(0);
            try
            {
                //Thread.sleep(200);
                while(true)
                {
                    this.wait();
                    if(st.get()!=0)
                        break;

                }
            }
            catch(Exception r)
            {
            }
        }
    }   
}
class read implements Runnable
{
    FileReader fr=null;
    int r;
    store st;
    public read(store s)
    {
        st=s;
    }
    public void run()
    {
        try
        {
            fr=new FileReader("data.txt");
            while(true)
            {
                int r=fr.read();
                st.set(r);
                while(st.get()==0)
                {                   
                    this.wait();
                }   
                if(r==-1)
                    break;              
                try
                {
                    Thread.sleep(200);
                }
                catch(Exception re)
                {
                }
            }   
            st.set(-1);         
        }   
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            try
            {   
                fr.close();
            }
            catch(Exception e)
            {
                e.printStackTrace();    
            }
        }               
    }
} 
```

如果我`sleep()`从两个类中删除方法，`read & echo`那么我会得到

```
From echo int  0 char value 
From echo int  0 char value 
From echo int  0 char value 
.
.
. 
```

我正在使用`wait()`另一个线程可以处理的方法。我正在以正确的方式进行操作，或者还有其他用于**interThreadCommunication的方法**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T14:54:40.070

您应该考虑使用生产者-消费者模式：
线程 A 将从文件中读取条目，并将它们放入队列中。
线程 B 将从队列中读取条目并打印它们。
您可以使用[阻塞队列实现](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)来保证队列的线程安全。我也会考虑不要将一个字符放入队列，而可能是一组字符（一个单词或一行），
以减少入队和出队的数量（因为这些方法是线程安全的，它们具有更高的性能损失比非同步方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:52:45.030

**-**您可以在**读取线程**`join()`上使用方法（即。），以便**第一个读取线程在写入线程开始将文件写入控制台之前完全读取文件**。**`readThread.join()`**

 ******例如：**

```
readThread.start();
try{
readThread.join()
}catch(Excpection ex){}

writeThread.start(); 
```

**-**你也可以`java.util.concurrent.CountDownLatch`用来处理这个。

**-**我认为`SingleThreadExecutor`从并发包中也可以为你完成工作。

**///////////////////////编辑部分///////////////**

**-**如果您希望它们同时工作，请使用`wait/notify`组合或`await/signal`组合`concurrent`包中的组合。

**-** `ArrayBlockingQueue`还将帮助您从`concurrent`图书馆实现这一目标。****

# iphone - 使用 NSUInteger

> ID：13441202
> 
> 赞同：2
> 
> 时间：2012-11-18T14:47:39.757
> 
> 标签：iphone, objective-c, ios, xcode

我编辑了一些代码以使用变量而不是数字。

```
NSUInteger *hoeveelChars = [eersteDertigTek length] - 30; 
```

我变了

```
substringFromIndex: [eersteDertigTek    length] - 30] 
```

到

```
 substringFromIndex: [eersteDertigTek    length] - hoeveelChars] 
```

给我二进制表达式的错误无效操作数（'nstuinteger"（aka"nisgned int"）和（'nstuinteger"（aka"nisgned int"））。

不知道如何解决这个问题，因为我确实需要将 - 数字作为变量有没有人知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T14:53:36.057

只需使用

```
NSUInteger hoeveelChars = [eersteDertigTek length] - 30; 
```

`NSUInteger`不是一个类。请参阅[基础数据类型参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/uid/20000018-SW71)。

# r - Using lapply and read.csv on multiple files (in R)

> ID：13441204
> 
> 赞同：4
> 
> 时间：2012-11-18T14:48:06.157
> 
> 标签：r, csv, lapply

I guess this is a bit of a beginner's question but I haven't quite found an answer or figured out what I'm doing wrong.

I'm trying to read 20 CSV files that are stored in a separate directory using:

```
setwd("./Data")
filenames <- list.files()  
All <- lapply(filenames,function(i){
  i <- paste(".\\",i,sep="")
  read.csv(i, header=TRUE, skip=4)
}) 
```

And I get the following error:

```
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") :
  cannot open file '.\filename.csv': No such file or directory 
```

Where filename stand for the name of the first file in my folder.

Thanks in advance!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T07:47:31.207

尝试仅删除：`i <- paste(".\\",i,sep="")`

read.csv 应该可以很好地处理`list.files(full.names=TRUE)`输出

```
setwd("./Data")
filenames <- list.files(full.names=TRUE)  
All <- lapply(filenames,function(i){
  read.csv(i, header=TRUE, skip=4)
}) 
```

# ruby-on-rails - 我应该如何在视图的不同部分使用实例变量？

> ID：13441206
> 
> 赞同：2
> 
> 时间：2012-11-18T14:48:28.980
> 
> 标签：ruby-on-rails, mongodb, ruby-on-rails-3, mongoid, nosql

这可能是一个菜鸟问题。但我自己无法弄清楚。

在我的应用程序中，我使用带有 Mongoid 和 MongoDB 的 Rails 3.2.8。

我有一个这样的实例变量：

程序控制器 < 应用控制器

```
@program = Program.find(params[:id]) 
```

在我的视图文件中，我需要多次使用它。例如;

```
@program.title
@program.content
@program.schedules (associated with Schedule model)
@program.articles (associated with Article model) 
```

等等

问题是，我需要在视图的不同部分使用该实例变量。所以这不像做一个`@program.each do |t| ....`

但是，当我在视图的不同部分使用@program 时，这意味着每次都有一个新查询......

目前，我的观点有 31 个查询。是不是太多了？

那么最佳实践是什么？我应该如何有效地使用实例变量？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:32:38.097

一旦项目存储在 中`@program`，它确实保存在那里，后续请求将不会生成查询。如果你只引用`@program.title`and `@program.content`，你可能会没事。您的问题来自关联，例如`@program.schedules`和`@program.articles`。问题是没有从您的`@program = Program.find(params[:id])`. 这被称为 n+1 问题。[官方文档](http://mongoid.org/en/mongoid/docs/querying.html)在*Eager Loading*下声明了`Eager loaded is supported on all relations with the exception of polymorphic belongs_to associations.`和`In order for eager loading to work, the Identity Map must be enabled.`. 如果这两个条件为真，您应该会看到查询减少。如果你不能满足这些要求，一个好的解决方案可能是在控制器中做这样的事情，提前抓住它们，在一个查询中：`@schedules = Schedule.find_by(program_id: @program.id)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:43:37.230

如果可能的话，我宁愿使用 ActiveRecord。

[Rails 官方文档](http://guides.rubyonrails.org/association_basics.html#belongs_to-association-reference)说： *您可以使用 :include 选项指定在使用此关联时应该预先加载**的二阶关联。***

这里**schedule**和**article**是**一阶关联**。因此，如果您使用 ActiveRecord，则不需要它。

官方文档还说：

*无需使用* **:include** *进行即时关联——也就是说，如果您有* **Order belongs_to :customer** *，那么* **客户会在需要时自动加载。**

因此，如果您使用 ActiveRecord，您可能不会打扰这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:04:03.627

我对 Ruby/Railys 不是特别熟悉，但通常在 MVC 框架中，数据的获取由控制器处理，因此只会发生一次。随后在视图中使用它会为请求使用缓存在内存中的单个副本。在您的视图的一个部分引用标题并在另一部分引用内容不应该是性能问题。它们只是缓存对象的属性访问器。

为了验证这一点，您可以对请求进行计时或模拟，以查看它是否实际上被执行了多次（我对此表示怀疑）。

# c# - 读取 ffmpeg 输出并将其发送到表单

> ID：13441209
> 
> 赞同：0
> 
> 时间：2012-11-18T14:48:48.130
> 
> 标签：c#, ffmpeg, stderr

我可以很好地通过 ffmpeg 运行参数，但我需要能够在流式传输时实时读取它的输出（您可能知道，ffmpeg 可能需要一段时间，并且它会使用当前帧每秒更新其 stderr 两次，等等）。

我有一个名为`prog`全局声明的表单，`ProgressForm prog = new ProgressForm();` 用户输入一个视频文件文件夹，收集一些数据，然后按下一个按钮以使用 ffmpeg 启动编码过程。button_click 事件创建一个新线程，如下所示：

```
 runFFMpeg = new Thread(run_ffmpeg);
 runFFMpeg.start(); 
```

runFFMpeg 早先已用`private Thread runFFMpeg;`.

现在我有了 run_ffmpeg 方法：

```
private void run_ffmpeg()
{
    string program = "C:\\ffmpeg64.exe";
    string args = //some arguments that I know work;

    ProcessStartInfo run = new ProcessStartInfo(program,args);
    run.UseShellExecute = false;
    run.CreateNoWindow = true;
    run.RedirectStandardOutput = true;
    run.RedirectStandardError = true;
    Process runP = new Process();
    runP = Process.Start(run);
    runP.WaitForExit();

    //NOW WHAT?

 } 
```

我不知道现在该怎么做才能获得实时数据，但如果可以的话，我会更新`prog`，它有许多控件，包括进度条等。典型的输出（我感兴趣的）看起来像“帧= 240 fps= 12.8 q=0.0 大小= 1273802kB 时间=00:00:08.008 比特率=4415.2kbits/s dup=46 drop=0”。我知道如何解析它以获得我需要的东西，我只需要那一行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T04:57:28.720

```
run.Start();
StreamReader sr = run.StandardError;
while (!sr.EndOfStream)
{
    string output = sr.ReadLine();
}
run.WaitForExit(); 
```

字符串*输出*将是您的行。

# html - 具有相同类名的jQuery多按钮仅采用最后一个值

> ID：13441210
> 
> 赞同：0
> 
> 时间：2012-11-18T14:48:48.817
> 
> 标签：html, jquery, jquery-selectors

在下面`markup`，您可以看到`class name is same for every button`. 我有更多具有相同类名按钮的按钮。现在，当我单击任何按钮时，它只取`last button value`. 在这里你可以看到`last div`值为`30`。所以点击每个按钮它只取最后一个值。我的 html 标记是这样的

```
<div class="cart">
  <div>Qty:
    <input type="text" value="10" size="2" name="quantity">
    <input type="hidden" value="42" size="2" name="product_id">
    &nbsp;<input type="button" class="button-cart" value="Add to Cart">
  </div>
  <div>Qty:
    <input type="text" value="20" size="2" name="quantity">
    <input type="hidden" value="42" size="2" name="product_id">
    &nbsp;<input type="button" class="button-cart" value="Add to Cart">
  </div>
  <div>Qty:
    <input type="text" value="30" size="2" name="quantity">
    <input type="hidden" value="42" size="2" name="product_id">
    &nbsp;<input type="button" class="button-cart" value="Add to Cart">
  </div>
</div> 
```

现在我的 jQuery 脚本是这样的

```
$('.button-cart').click(function() {
    $.ajax({
        url: 'index.php?route=checkout/cart/add',
        type: 'post',
        data: $('.product-info input[type=\'text\'], .product-info input[type=\'hidden\'], .product-info input[type=\'radio\']:checked, .product-info input[type=\'checkbox\']:checked, .product-info select, .product-info textarea'),
        dataType: 'json',
        success: function(json) {
            $('.success, .warning, .attention, information, .error').remove();

            if (json['error']) {
                if (json['error']['option']) {
                    for (i in json['error']['option']) {
                        $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                    }
                }
            } 

            if (json['success']) {
                $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                //$('.success').fadeIn('slow');

                $('#cart-total').html(json['total']);

                $('html, body').animate({ scrollTop: 0 }, 'slow'); 
                setTimeout(opencartpage(),1000);
            }   
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:09:57.403

尝试这个

```
$(".button-cart").click(
        function()
        {
            var parent_node = $(this).parent("div");
            var quantity = parent_node.find('input[name="quantity"]').val();
            alert(quantity);
        } ); 
```

这**将**确定您确切点击的类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:57:09.860

在您的代码中，您将 jQuery 选择器作为 AJAX 方法的数据。这可能没有意义，因为您想要的是名称/值对（或表单字段的其他表示形式）。

对于我认为您想要做的事情（将所有表单字段放入 AJAX 请求中），最简单的解决方案是使用该[`.serialize()`](http://api.jquery.com/serialize/)函数。

如果您的所有字段都与 id 格式相同`#foobar`，则将`$('#foobar').serialize()`它们全部作为查询字符串返回。

# jquery - jquery 仅在 div 上淡入

> ID：13441212
> 
> 赞同：0
> 
> 时间：2012-11-18T14:48:48.583
> 
> 标签：jquery, html, fadein, fade, fadeout

这是我的插件： [http ://www.clouderize.it/michele/261/](http://www.clouderize.it/michele/261/)

请参阅帖子下的画廊。

当我单击另一个图像时，会出现一个弹出窗口。我只会在画廊上进行淡入淡出，就像这里：

[http://www.fanpage.it/foto/14n-guerriglia-urbana-a-roma/](http://www.fanpage.it/foto/14n-guerriglia-urbana-a-roma/)

代码：[http ://clouderize.it/cookie-localstorage/a.php](http://clouderize.it/cookie-localstorage/a.php)

我使用的插件：[http](http://dimsemenov.com/plugins/royal-slider/documentation/) ://dimsemenov.com/plugins/royal-slider/documentation/ 我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:10:56.810

您必须将 div #overlay 放在容器 div #gallery-1 中。您可能必须更改一些 css，但如果不查看所有代码，这很难说。

# java - 如何使 Swing jTable 单元格在视图和内联编辑状态下都以“YY-MM-DD”格式显示日期对象？

> ID：13441214
> 
> 赞同：1
> 
> 时间：2012-11-18T14:48:51.603
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我可以在我的自定义日期格式（我的单元格渲染器）中显示日期，但是当在单元格中开始内联编辑时，日期格式会更改为例如“Tue Feb 14 00:00:00 CET 2012”。如果涉及到演示但输入日期，这很好。

如何在每个州的所有日期单元格中以“YY-MM-DD”格式显示和编辑日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:38:57.720

`TableCellRenderer`用于查看，尝试覆盖`TableCellEditor`

这里有几个关于 CellEditor[概念的示例：编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# android - Sencha Touch：如何确定何时加载了一个类

> ID：13441216
> 
> 赞同：0
> 
> 时间：2012-11-18T14:49:14.743
> 
> 标签：android, sencha-touch

我有一个使用[shepsii 的 sqlite proxy](http://www.sencha.com/forum/showthread.php?195991)的 Sencha Touch 2 应用程序。当应用程序加载时，我在 Chrome 控制台中看到几个类似于此的错误：

```
Uncaught TypeError: Cannot call method 'getConnection' of undefined at file:///android_asset/www/app/store/OptionsOfflineStore.js:14 
```

我的每个商店都会出现此错误。每个商店上的代理定义如下：

```
proxy: {
    type: 'sqlitestorage',
    dbConfig: {
        tablename: 'user',
        dbConn: Utils.InitSQLite.getConnection()
    }
} 
```

并且以“dbConn”开头的行是违规行。尽管在 Chrome 中以及在 Android 设备上从 Eclipse 进行调试时出现这些错误，但该应用程序运行良好。但是，当我导出已签名的应用程序包并将其安装在设备上时，它会挂在加载屏幕上。我看不到任何其他错误，所以我假设是这些与商店相关的错误阻止了应用程序的加载。

我猜发生错误的原因是在应用程序继续运行并尝试运行商店代码之前，在 utils/InitSQLite 中定义的类没有完全加载，因此 InitSQLite 类是“未定义的”。

当一个类完全加载/一个对象被实例化时，我有什么方法可以在 Sencha Touch 中检测到，这样我就可以延迟加载存储代码，直到 InitSQLite 准备好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:26:14.403

在存储配置中定义`autoLoad:false`并且不要在代理中设置 dbConn，然后：

```
Ext.myInterval = setInterval(function(){
  try{
    if(Utils && Utils.InitSQLite && Utils.InitSQLite.getConnection){
      Ext.apply(store.getProxy(),{
        dbConn: Utils.InitSQLite.getConnection()
      });
      store.reload();
      clearInterval(Ext.myInterval);
    }
  catch(ex){}
},300); 
```

# xcode - 如何自定义 xcode 绑定？

> ID：13441218
> 
> 赞同：1
> 
> 时间：2012-11-18T14:49:18.033
> 
> 标签：xcode, xcode4.5

我想自定义保存所有命令快捷键为shift+cmd+s，但是改不了，不知道为什么？！![在此处输入图像描述](../Images/50531a03cc0c3b984aa1adcf2d322567.png)

# math - 在加权无向图中，如何找到两个节点之间的固定长度路径？

> ID：13441220
> 
> 赞同：1
> 
> 时间：2012-11-18T14:49:22.777
> 
> 标签：math, graph, path, nodes, shortest-path

我想要一个算法或指针来进一步研究如何在加权无向图中找到两个节点之间的固定长度路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:17:53.783

找到从给定节点到给定长度的给定节点的简单路径是 NP 完全的：[哈密顿循环问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)是此类问题，它是 NP 完全的。

如果边是加权的，那么[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)是这个问题的一个特例，所以我们仍然是 NP 完全的

在这两种情况下，您都可以枚举路径，修剪不简单的路径或`theta(b^len)`预期时间过长的路径，其中`b`分支因子（平均出度）。

* * *

找到一条允许重复边的路径（有时称为步行）可以在 [length] 矩阵乘法中完成，总`O(v^3 * len)`时间复杂度[或更好](http://en.wikipedia.org/wiki/Matrix_multiplication)。

让我们`A`表示图的邻接矩阵。然后`A^len`保存每对顶点之间长度为 len 的路径数。您可以`1+1 = 1`在乘法期间使用（布尔加法 - 不确定它如何与高级矩阵乘法算法一起使用），那么您只会得到这样的路径，但同时避免整数溢出。

准备`A^1..A^len`（`O(n^3 len)`）。然后，对于 中的每个距离`d`，`1..len`找到一个顶点`v[d]`，它是 的子节点，`v[d-1]`并且具有`len-d`到目标 ( ) 的 -long 路径`O(n len)`。

如果您只需要知道是否存在这样的路径，那么您不需要`A..A^len`，只需`A^len`. `O(n^3 log(len))`您可以通过[平方和乘法](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)算法及时计算它，甚至可以`O(n^2.37 log(len))`与[Coppersmith-Winograd 矩阵乘法算法](http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd_algorithm)结合使用。

* * *

或者，您可以只搜索`[node x distance]`状态空间并在`O(n*b*len)`.

# r - 在 R 中生成大量组合

> ID：13441221
> 
> 赞同：3
> 
> 时间：2012-11-18T14:49:24.727
> 
> 标签：r, algorithm, graph, combinatorics, large-data

我有大约 700 个元素，想要创建 20 个的组合。可能的组合总数是 [700 C 20] ~ 2.5e+38 个组合。这个大数据集属于图的规范。这是一个图优化问题，因此，我什至想将约束应用于这组组合。

我正在使用R！出于此目的，因为它具有丰富的软件包范围和大型数据集处理能力。我正在使用“组合”包。但问题是，当我尝试计算这个时，我收到以下错误：

```
combn(theDataSet,20,myFunction)
Error in matrix(r, nrow = len.r, ncol = count) : 
  invalid 'ncol' value (too large or NA)
In addition: Warning message:
In combn(theDataSet, 20, myFunction) : NAs introduced by coercion 
```

对此问题的任何解决方案、替代包或算法表示赞赏。也许有任何处理结果的方法？

由于这是图优化问题，因此也非常感谢任何与此相关的包或算法。

或者，如果有任何其他可用于解决此类问题的工具，请告诉我。

我是电子专业的，所以我不太了解图形优化的高级算法，我不得不采用组合方法。如果有更智能的方法来解决这个问题，我很想知道。

请帮忙。

**编辑：**

由于你们中的一些人一直在询问实际问题，因此我将对其进行摘要，因为将我的实际作业问题发布在互联网上以逐行回答是不光彩的。

抽象的：

大约有 700 个节点，每个节点每天都必须由机器人充电。机器人（放置在圆顶内）携带一个具有大约 5000 单位能量的源，每个节点需要不同的能量水平（所有节点的平均需求约为 250，但对于某些机器人，它的范围从 120 到 500 单位的节点）。给出了节点到圆顶的距离和节点之间的距离（以维度 701x701 的矩阵形式）。每个机器人一天可以行进多少是有限制的。设计一个算法并编写一个程序（在任何商业可用的规格或包中），以有效地计算所需的机器人数量和所有机器人行进的总距离。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T15:24:43.870

您无法生成所有这些组合。这并不一定意味着您的整体问题无法解决。有几种方法：

1.  用理论分析代替编程。也许您根本不需要运行该作业。
2.  看看你想对组合的结果做什么，你能利用它的特性来限制你需要的组合集合，只生成有用的组合吗？
3.  如果您可以在找到某些东西时停止下一阶段的处理，请尝试编写一种可以处理数据流的算法，并在遇到命中时停止。在生成组合时为其提供组合。

任何更具体的事情都取决于了解您打算如何处理组合过程的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:17:17.537

也许你不需要这么多组合。我将使用该卷的代表性样本和/或将其划分并为每组执行的分析结果定义一个数字或索引。这会给我点来绘制，每个点基本上代表一组 N 个组合。我需要更多地了解这些组合代表什么才能提出其他替代方案。

# java - 鄂尔多斯数UVa在线判断运行时错误

> ID：13441222
> 
> 赞同：0
> 
> 时间：2012-11-18T14:49:28.240
> 
> 标签：java

我正在从 JAVA 的编程挑战中解决鄂尔多斯数问题。代码在我的机器上完美运行。但是在线判断会导致运行时错误。谁能指出我犯的错误？

[http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=985](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=985)

这是代码

```
import java.util.*;
import java.io.*;

class Main
{
private String inputLines[];
private String namesToBeFound[];
private String namesInEachBook[][];
private String searchItem;
private boolean solnfound=false;
private static final BufferedReader br =new BufferedReader(new InputStreamReader(System.in));
static String read() throws IOException
{
    String line;
    while(true)
    {
        line=br.readLine();
        if(line==null) break; //eof
        else if(line.length()==0) continue; //blank line
        else
        {
            line=line.trim().replaceAll("\\s+"," ");
            return line;
        }
    }
    return null;
}

public static void main(String args[]) throws IOException
{
    Main ob=new Main();
    int totalPapers,calcAuthors,totalScenarios;
    //First input number of scenarios
    totalScenarios=Integer.parseInt(read());
    //Now start a loop for reading total number of scenarios
    for(int scenario=1;scenario<=totalScenarios;scenario++)
    {
        //Now read the line containing the number of papers and authors
        StringTokenizer line=new StringTokenizer(read()," ");
        totalPapers=Integer.parseInt(line.nextToken());
        calcAuthors=Integer.parseInt(line.nextToken());

        //Read a line containing author names along with book names
        ob.inputLines=new String[totalPapers];
        for(int i=0;i<totalPapers;i++)
            ob.inputLines[i]=read();

        //Read a line containing the names to be searched
        ob.namesToBeFound=new String[calcAuthors];
        for(int i=0;i<calcAuthors;i++)
            ob.namesToBeFound[i]=read();

        //Now generate the array
        ob.buildArray();
        //Now search
        System.out.println("Scenario "+scenario);
        for(int i=0;i<calcAuthors;i++)
        {
            ob.searchItem=ob.namesToBeFound[i];
            if(ob.searchItem.equals("Erdos, P."))
            {
                System.out.println("Erdos, P. 0");
                continue;
            }
            ob.search(ob.namesToBeFound[i],1,new ArrayList());
            if(ob.solnfound==false) System.out.println(ob.searchItem+" infinity");
            ob.solnfound=false;
        }
    }

}

private void buildArray()
{
    String str;
    namesInEachBook=new String[inputLines.length][];
    for(int i=0;i<inputLines.length;i++)
    {

        str=inputLines[i];
        str=str.substring(0,str.indexOf(':'));
        str+=",";
        namesInEachBook[i]=new String[(countCommas(str)+1)>>1];
        for(int j=0;j<namesInEachBook[i].length;j++)
        {
            str=str.trim();
            namesInEachBook[i][j]="";
            namesInEachBook[i][j]+=str.substring(0,str.indexOf(','))+",";
            str=str.substring(str.indexOf(',')+1);
            namesInEachBook[i][j]+=str.substring(0,str.indexOf(','));
            str=str.substring(str.indexOf(',')+1);
        }
    }
}

private int countCommas(String s)
{
    int num=0;
    for(int i=0;i<s.length();i++)
        if(s.charAt(i)==',') num++;
    return num;
}

private void search(String searchElem,int ernosDepth,ArrayList searchedElem)
{
    ArrayList searchSpace=new ArrayList();
    searchedElem.add(searchElem);
    for(int i=0;i<namesInEachBook.length;i++)

        for(int j=0;j<namesInEachBook[i].length;j++)
        {
            if(namesInEachBook[i][j].equals(searchElem))    //Add all authors name in this group
            {
                for(int k=0;k<namesInEachBook[i].length;k++)
                {
                    if(namesInEachBook[i][k].equals("Erdos, P.")) //Found
                    {
                        solnfound=true;
                        System.out.println(searchItem+" "+ernosDepth);
                        return;
                    }
                    else if(searchedElem.contains(namesInEachBook[i][k]) || searchSpace.contains(namesInEachBook[i][k])) continue;
                    searchSpace.add(namesInEachBook[i][k]);
                }
                break;
            }
        }
    Iterator i=searchSpace.iterator();
    while(i.hasNext())
    {
        String cSearchElem=(String)i.next();
        search(cSearchElem,ernosDepth+1,searchedElem);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:52:00.473

一个问题可能是：

```
totalScenarios=Integer.parseInt(read()), 
```

`NumberFormatException`如果输入的值不是，这可能会抛出`int`。您需要使用 try/catch 来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:02:24.753

除此之外，`NumberFormatException`如果输入不包含`int`，则可能会生成，程序也不能很好地处理输入的终止。

您也没有使用任何记忆技术并且每次都构建相同的搜索树，这将导致`Time Limit Exceeded`UVa Judge 出错。

您还应该使用输入和输出的缓冲来进一步减少编译时间。减少对函数的调用，并尽可能内联它们，即在同一范围内编写。

希望这可以帮助

# django - Django 抽象父模型保存覆盖

> ID：13441223
> 
> 赞同：11
> 
> 时间：2012-11-18T14:49:30.140
> 
> 标签：django, django-models, slug

我正在尝试在 Django 中编写一个抽象父模型，这将帮助我从*名称*字段中为许多其他子模型制作一些*slug字段。*它使用*反式*编码，非常适合将西里尔字母转写为拉丁字母。然后它使用 django 的 slugify 函数来清除垃圾。

 **```
class SlugModel(models.Model):
    class Meta:
        abstract = True

    name = models.CharField(max_length=128, default=u'')
    slug = models.CharField(max_length=128,blank=True)

    def save(self, *args, **kwargs):
        if not self.slug:
            slug = slugify(unicode(self.name).encode('trans'))
        else:
            slug = self.slug
        count = self.__class__.objects.filter(slug = slug).count()
        if count > 1:
            if slug[-2]=='_':
                count = int(slug[-1])
                slug = slug[:-2]
            self.slug = '{0}_{1}'.format(slug,count+1)
        else:
            self.slug = slug
        super(self.__class__, self).save(*args, **kwargs)

    def __unicode__(self):
        return self.name

class Foo(SlugModel):
    pass 
```

当我尝试保存一些 Foo 对象时会出现问题：它会导致 RuntimeError （超出最大递归深度）。我究竟做错了什么？如何`super(self.__class__, self).save(*args, **kwargs)`正确书写？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T22:16:32.337

好，我知道了。而不是使用 `super(self.__class__, self).save(*args, **kwargs)`.

我需要 `super(SlugModel, self).save(*args, **kwargs)`。

感谢胡椒种植者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-11T17:00:31.527

只需使用`super().save(*args, **kwargs)`.**

# c# - C#中的乘法表

> ID：13441226
> 
> 赞同：0
> 
> 时间：2012-11-18T14:49:59.053
> 
> 标签：c#, android-activity

我正在用 C# 做一个简单的练习，这就是问题所在：编写一个名为 TimeTable 的程序来生成 1 到 9 的乘法表，如图所示，使用两个嵌套的 for 循环：

```
Sample output:
 1  2  3  4  5  6  7  8  9
 2  4  6  8 10 12 14 16 18
 3  6  9 12 15 18 21 24 27
 4  8 12 16 20 24 28 32 36
 5 10 15 20 25 30 35 40 45
 6 12 18 24 30 36 42 48 54
 7 14 21 28 35 42 49 56 63
 8 16 24 32 40 48 56 64 72
 9 18 27 36 45 54 63 72 81 
```

这是我的代码

```
int n = 9;

for (int row = 1; row <= n; row++) 
{
    for (int col = 1; col <= n * n ;col++)
    {
        Console.Write(col);

    }
    Console.WriteLine();
} 
```

我的代码不起作用任何人都可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T14:55:01.333

尝试：

```
int n = 9;

for (int row = 1; row <= n; row++) 
{
    for (int col = 1; col <= n; col++)
    {
        Console.Write(row * col);

    }
    Console.WriteLine();
} 
```

问题在于，对于每一`n`行，您都在遍历`n*n`列，然后每一行都有示例表中的所有数字，除了一行。在这里，我们遍历每一行，每次遍历所有列并打印`row*col`所需的乘法结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:43:24.037

尝试这个，

```
int n = 9;

Enumerable.Range(1, n).ToList().ForEach(row => 
{
    Enumerable.Range(1, n).ToList().ForEach(col => 
    { 
        Console.Write(string.Format("{0, 3}", row * col)); 
    });
    Console.WriteLine();
}); 
```

# php - token_get_all() 函数无法正常工作

> ID：13441227
> 
> 赞同：2
> 
> 时间：2012-11-18T14:50:06.197
> 
> 标签：php, tokenize

我想计算 PHP 源代码中的大括号，所以我最终可以在给定的源代码中找到方法/函数的结尾。

有人建议我使用该`token_get_all()`功能来完成这项工作。但由于某种原因，它没有将给定的源拆分为令牌。

我正在使用以下代码对其进行测试：

```
<?php
$str = 'class someClass{
    public $var1;
    private $var2 = null;

    public function func1 ( $someVar )
    {
        echo $someVar;
    }

    public function func2 ( )
    {
        return false;
    }
}';

$bla = token_get_all ( $str );

echo '<pre>';
print_r ( $bla );
echo '</pre>';
?> 
```

但这会导致：

```
Array
(
    [0] => 311
    [1] => class someClass{
    public $var1;
    private $var2 = null;

    public function func1 ( $someVar )
    {
        echo $someVar;
    }

    public function func2 ( )
    {
        return false;
    }
}
    [2] => 1
) 
```

所以现在我有点坚持这个。为什么不`token_get_all()`标记给定的源代码..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:54:19.897

因为解析器在 HTML 上下文中启动（就像 PHP 本身一样），所以您传递给的整个字符串`token_get_all`实际上是一个 HTML 标记。您需要`<?php`在`$str`.

# c# - 将 uint 转换为颜色

> ID：13441230
> 
> 赞同：3
> 
> 时间：2012-11-18T14:50:35.003
> 
> 标签：c#, winforms, colors

如何将`uint`值转换为 ARGB `System.Drawing.Color`？我还没有在网上找到这个...

我刚刚找到了 ARGB 到`uint`.

我的`uint`价值来自：

```
uint aeroColor;
Dwmapi.DwmGetColorizationColor( out aeroColor, out opaque ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T14:53:31.247

代表什么`uint`？一般来说，你可以使用这个：

```
Color c = Color.FromArgb(intvalue); 
```

使用[适当的重载](http://msdn.microsoft.com/en-us/library/2zys7833.aspx)。但是，这需要一个`int`，而不是`uint`。如果您具有`uint`相同的内存布局（如您的情况），那么以下应该可以工作：

```
uint aeroColor;
Dwmapi.DwmGetColorizationColor(out aeroColor, out opaque);
Color c = Color.FromArgb((int) aeroColor); 
```

# activex - 一旦 firebreath 测试页面 activex 关闭，Leakdetector 就会报告泄漏

> ID：13441233
> 
> 赞同：0
> 
> 时间：2012-11-18T14:50:49.880
> 
> 标签：activex, firebreath, jsapi, memory-leak-detector

我在启用泄漏检测器选项的情况下编译了 Firebreath。该场景正在加载测试页面，单击页面上的链接并关闭选项卡和浏览器。然后泄漏检测器收集所有泄漏，输出在[这里](http://pastebin.ca/2252685)。

我不能从这个日志中做出正面或反面。是真的泄漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:11:29.930

LeakFinder that is in the FBTestPlugin example of firebreath comes from [http://www.codeproject.com/Articles/3134/Memory-Leak-and-Exception-Trace-CRT-and-COM-Leaks](http://www.codeproject.com/Articles/3134/Memory-Leak-and-Exception-Trace-CRT-and-COM-Leaks)

There is a tool you can get from there that will help with analyzing the results. Last I ran it through there were no real leaks, but it has been awhile since I've had time to do any in-depth analysis, so it is possible that some things have changed. That should give you what you need to start tinkering with it, though, and if you find any leaks feel free to fix them and submit a pull request or a jira ticket at [http://jira.firebreath.org](http://jira.firebreath.org)

# c# - 在 localhost 上测试网络应用程序

> ID：13441235
> 
> 赞同：1
> 
> 时间：2012-11-18T14:51:19.743
> 
> 标签：c#, sockets, networking, network-programming, localhost

好吧，我制作了一个聊天客户端，每个用户都可以使用 IP 地址连接到其他用户。但是，我必须使用 localhost 演示该应用程序。

现在假设我打开应用程序的 2 个实例并告诉其中一个实例的 IP 地址（在本例中为 localhost），它将很容易与另一个实例连接并且可以正常工作。但是现在，如果我打开应用程序的第三个实例并将其放在 localhost 的 IP 中，在它将连接的前 2 个实例中，通过网络这不会成为问题，因为所有 IP 地址都是唯一的但是我必须通过 localhost 进行演示，我想不出某种方法可以将第三个应用程序与我选择的任何其他应用程序链接起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:22:12.907

我不确定我是否完全理解您的问题，但环回别名可能会有所帮助。您可以创建多个“逻辑”环回接口并为每个接口配置唯一的 IP 地址。

在 Solaris 中，我可以执行以下操作：

```
ifconfig lo0:1 plumb
ifconfig lo0:1 11.11.11.11 netmask 255.255.255.0 up

...
ifconfig lo0:99 plumb
ifconfig lo0:99 99.99.99.99 netmask 255.255.255.0 up 
```

# spring - 从 Tiles 调用控制器的更好方法？

> ID：13441239
> 
> 赞同：1
> 
> 时间：2012-11-18T14:51:37.940
> 
> 标签：spring, controller, tiles

我在新的 Spring MVC 3 应用程序中使用 Tiles 2。这是我的模板

```
 <definition name="baseLayout" template="/WEB-INF/jsp/layout/layout.jsp"  >
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/WEB-INF/jsp/layout/header.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="userInfo" value="" />
        <put-attribute name="footer" value="/WEB-INF/jsp/layout/footer.jsp" />
    </definition> 
```

和我的页面

```
<definition name="engageStep1View" extends="baseLayout"  >
        <put-attribute name="title" value="" />
        <put-attribute name="body" value="/WEB-INF/jsp/private/engageStep1.jsp" />
        <put-attribute name="userInfo" value="/layout/userInfo" />
</definition> 
```

我在下一行添加到 tiles.xml 定义

```
<definition name="userInfoView" template="/WEB-INF/jsp/layout/userInfo.jsp"   /> 
```

enagageStep1 调用控制器有一个更好的主意：

```
 @RequestMapping(value = "/layout/userInfo")
    public ModelAndView handleRequest(ModelMap model) {

        ......
        MemberPrincipal memberPrincipal = (MemberPrincipal)authentication.getPrincipal();

        model.put("userName", memberPrincipal.getUserName());

        return new ModelAndView("userInfoView", "model", model);
    } 
```

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:42:56.040

看起来您的 userInfo 控制器方法正在提供可能适用于您的整个应用程序/站点的信息。对于这种信息，您可以使用 spring 拦截器将所需的信息填充到当前属性上下文中。然后 userInfoView 可以根据需要使用此信息，而无需引用 userInfo 控制器方法。

另一种类似的方法是使用瓦片视图准备器。

# css - 在浮动 div 周围调整 div（宽度）

> ID：13441244
> 
> 赞同：5
> 
> 时间：2012-11-18T14:52:43.767
> 
> 标签：css, html, word-wrap

我现在已经搜索了几个小时，找不到解决我的问题的可行解决方案，所以我有你可以给我一些建议。

我想要的是一个包含一些浮动 div 的 div。包裹高度对我来说没问题，但是如果将浏览器调整为浮动元素跳下的宽度，宽度不会正确包裹。

这里有一些示例代码：

HTML：

```
<div class="wrapper">

    <div class="block1">
    </div>

    <div class="block2">
    </div>
</div> 
```

CSS：

```
body {
    border: solid 1px green;
}

.wrapper {
    border: solid 1px red;
    display: table;
}

div {
    display: block; 
}

.block1 {
    float: left;
    width: 390px;
    height: 390px;
    background-color: blue;
}

.block2 {
    float: left;
     width: 390px;
    height: 390px;
    background-color: yellow;
} 
```

所以基本上我希望包装 div 始终具有内部 div 所需的宽度。通过调整窗口大小并让右侧 div 跳到左侧下方，对于本示例，包装 div 现在应该具有 390px 的宽度。

对于我正在尝试制作的响应式网站，我需要这个解决方案，并且我需要它尽快。

最好使用纯 CSS 解决方案，但 JS 或 jquery 也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:27:55.607

您可以在包装器 div 上使用 CSS 媒体查询。像这样：

```
@media (max-width: 783px) {
 .wrapper {
    max-width: 390px;
  }
} 
```

有关示例，请参[见此代码笔](http://codepen.io/anon/pen/mgxBz)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:22:32.710

谢谢大家的帮助，

我最终通过读取窗口大小并手动设置包装器宽度来使用一些 JavaScript 来完成它。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:25:32.977

添加

```
 white-space: nowrap; 
```

到 .wrapper

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T15:29:00.580

修改这个类怎么样

```
.wrapper {
border: solid 1px red;
display:table;
**white-space:nowrap;**
} 
```

或者如果你想修复左边的 div，所以如果窗口大小改变，只有右边的 div 会调整大小

为正确的 div 做这个：

```
display: block;
position: absolute;
top:0; 
right:0;
margin-left: *your_fixed_left* px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T15:11:14.277

您不能使用 width 或 min-width 将 div 780px 保持在“桌面”上，然后在会导致块换行的较低屏幕宽度上，将父级的宽度设置为 390px。将这些包装在适当的媒体查询中，然后鲍勃你的叔叔.....

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T15:11:17.960

Javascript很可能是唯一的方法......

使用`$(window).resize`

和：[Javascript 浏览器宽度](http://www.javascripter.net/faq/browserw.htm)

一旦你知道浏览器的宽度，你就可以划分可用空间并指定包装 div 的宽度，从而包装你的浮动 div。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T07:11:09.430

```
<div class="wrapper">

    <div style="display:table-row">

        <div class="block1">
        </div>

        <div class="block2">
        </div>

    </div>

</div>

.wrapper {

    border: solid 1px red;
    display: table;

}

.block1 {

    display:table-cell;
    width: 390px;
    height: 390px;
    background-color: blue;

}

.block2 {

    display:table-cell;
    width: 390px;
    height: 390px;
    background-color: yellow;

} 
```

# javascript - javascript window.onerror 消息仅包含“脚本错误”。我怎样才能得到行号？

> ID：13441261
> 
> 赞同：1
> 
> 时间：2012-11-18T14:54:44.687
> 
> 标签：javascript, error-handling

您可能通过 window.onerror 保护您的 js 脚本以捕获全局异常，问题是，我的生产文件被压缩并且行号将始终为 1 ，所以我真的不知道错误发生在哪里？你有什么建议在这种情况下我能做什么？

```
window.onerror = function (errorMsg, fileName, lineNumber) { logger.sendError(errorMsg + " file name " + fileName, "window.onerror") }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:29:39.623

正如 Ianzz 在他的评论中所说，一般来说，您的浏览器不可能为缩小代码确定有意义的行号。毕竟：如果所有代码都在一行上，那么正确（但非常无用）的行号总是`1`.

然而，有一种运动允许使用源映射，它们是单独的文件，它们准确地指定（缩小的）JavaScript 如何映射回更有意义的输入。

[http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)

该规范相对较新，还没有传播太远。但是根据您的缩小框架，可能已经有一个工具可用于生成源映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T09:11:46.053

如果它显示“脚本错误”，则由于违反 CSP（内容安全策略），浏览器已阻止您的错误处理代码访问堆栈。

如果您的代码来自不同的域，或者如果它使用 eval 或 JSONP，通常会发生这种情况。

大多数打包工具（例如 browserify/webpack）默认使用 eval 或 JSONP。对于 webpack，您可以设置`config.devtool`更改此设置。

# c# - 在 ASP.NET MVC 验证中操作对象

> ID：13441266
> 
> 赞同：0
> 
> 时间：2012-11-18T14:55:07.250
> 
> 标签：c#, asp.net-mvc-3, validation

我正在尝试验证电话号码。所以我声明了一些这样的数据注释：

```
 [IsCellAcceptable(ErrorMessageResourceName = "IsCellAcceptable", ErrorMessageResourceType = typeof(Resources.PageResources))]
    [DataType(DataType.PhoneNumber)]
    [Display(Name = "UserCell", ResourceType = typeof(Resources.PageResources))]
    public String Cell { get; set; } 
```

如果 Cell 等于 0 999 999 99 99，我想将其返回为有效并且我想像这样保存它：09999999999。但 IsValid 函数只能验证它，不能操作它。

```
public class IsCellAcceptableAttribute : ValidationAttribute
{
    public IsCellAcceptableAttribute()
        : base()
    {

    }

    public override bool IsValid(object value)
    {
        if (value == null)
            return true;
        if (value == "")
            return true;

        string phoneOutput = string.Empty;
        string phoneInput = Convert.ToString(value);
        phoneInput = phoneInput.Replace(" ", "");

        foreach (char ch in phoneInput)
        {
            if (Char.IsNumber(ch))
            {
                phoneOutput += ch;
            }
            else
            {
                return false;
            }
        }

        if (phoneOutput.Length <= 14 && phoneOutput.Length >= 10)
        {
            return true;
        }

        return false;
    } 
```

**所以我的问题是在验证对象时如何操作对象？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:15:05.157

你为什么不事后操纵价值？

```
if (IsValid(value)) 
{
        // Manipulate here
        phoneNumber = phoneNumber.Replace(" ", "");
}

else
{
        // Not valid
} 
```

# c++ - 0xC0000005：访问冲突读取位置 0x00000004 与 QStack > 附加

> ID：13441268
> 
> 赞同：0
> 
> 时间：2012-11-18T14:55:13.807
> 
> 标签：c++, visual-studio, exception, qt4

我有 QStack > 一直被我用 QMutexLocker 保护它的应用程序填充，它从 QStack 是静态的不同线程填充。现在经过几次插入我得到：

```
0xC0000005: Access violation reading location 0x00000004 
```

这是出现异常的功能

```
bool MyClass::AppendToLinks(QVector<std::map<std::string,std::string > >& linksvec)
{
    try
    {

        static QMutex mutex;
        QMutexLocker locker(&mutex);

        //used to: be m_OuterLinksToProcessOutStack+= linksvec;

        QStack<std::map<std::string,std::string > > stackTemp;
        stackTemp = m_OuterLinksToProcessOutStack;
        stackTemp  << linksvec;
            // here is where the exception appear :
        m_OuterLinksToProcessOutStack = stackTemp;
        locker.unlock();
        if(m_OuterLinksToProcessOutStack.size()>0)
        {

            return true;
        }

        return false;
    }
    catch (std::exception const & e)
    {
        std::cout << "Standard exception: " << e.what() << std::endl;

    }
    catch (...)
    {
        std::cout << "Unknown exception." << std::endl;

    }
} 
```

这是堆栈：

```
myapp.exe!std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > >,0> >::_Copy(const std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > >,0> > & _Right={...})  Line 1063 + 0x11 bytes    C++
    myapp.exe!std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > >,0> >::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > >,0> >(const std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > >,0> > & _Right={...})  Line 536  C++
    myapp.exe!QVector<std::map<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > > >::realloc(int asize=12, int aalloc=12)  Line 532 + 0x1e bytes    C++
    myapp.exe!QVector<std::map<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > > >::operator+=(const QVector<std::map<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > > > & l={...})  Line 684    C++
    myapp.exe!MyClass::AppendToLinks(QVector<std::map<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > > > & linksvec={...})  Line 93   C++ 
```

QVector 和 Stacks 看起来都不是空的或 null 它还能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:22:57.213

如果`mutex`是保护访问`m_OuterLinksToProcessOutStack`，你应该保持对调用的锁`if(m_OuterLinksToProcessOutStack.size()>0)`。所以在`try`块内你想要这样的东西：

```
static QMutex mutex;
QMutexLocker locker(&mutex);
m_OuterLinksToProcessOutStack += linksvec;
return !m_OuterLinksToProcessOutStack.isEmpty(); 
```

不过，这看起来还是有点可疑。如果这是您的程序中*唯一*可以访问的地方`m_OuterLinksToProcessOutStack`，那么您可以将互斥锁作为本地静态对象。但如果它在其他任何地方访问，`mutex`将无法保护`m_OuterLinksToProcessOutStack`.

如果`m_OuterLinksToProcessOutStack` *在*其他地方访问，您也需要在这些地方拥有相同的互斥锁（例如，使其成为类成员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:13:59.333

在我看来，`m_OuterLinksToProcessOutStack`正在另一个函数中访问（通过从 QStack 中提取链接的阅读器？）并且该位置不受互斥锁的保护。因此，当您尝试`m_OuterLinksToProcessOutStack`在另一个线程正在使用它时重新定义时，您会收到错误。

当你重新定义你的容器时，它必须首先销毁它以前的内容，然后再接受新的内容。如果当前正在使用容器，您可以看到为什么这可能是一个问题。为什么要创建一个临时堆栈而不是`m_OuterLinksToProcessOutStack`直接附加到？

此外，您在该函数中混合了 QVector 和 QStack。应该不是问题，但这可能取决于您以后如何访问它。

# c# - 当前上下文中不存在文本框

> ID：13441270
> 
> 赞同：2
> 
> 时间：2012-11-18T14:55:40.820
> 
> 标签：c#, asp.net, umbraco

我的代码有问题。下面是一个简单的例子，没有很多不必要的 html 标签。只有重要的事情，才能显示问题。

当我进入页面时，我得到这个错误：

> 创建用户控件时出错 (usercontrols/own/profilEdit.ascx)
> c:\inetpub\wwwroot\umbraco\usercontrols\own\profilEdit.ascx(705)：错误 CS0103：当前上下文中不存在名称“satbCountry”

此错误与`<script>`代码有关（无论如何此 js 代码是正确的，在另一个子页面上可以完美运行，但是当此代码在页面上时，它会崩溃）。为什么我会收到此消息？

这里代码：

```
 <asp:View ID="vSpecialist" runat="server">

                    <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                        <ContentTemplate>

                         (..)    

        <asp:ListView runat="server" ID="lvAddressess" ItemPlaceholderID="phAddress" OnItemDataBound="lvAddressess_ItemDataBound">
   <LayoutTemplate> 
<asp:PlaceHolder ID="phAddress" runat="server"></asp:PlaceHolder>

  </LayoutTemplate>
                <ItemTemplate>
              <script>
              var input = document.getElementById('<%=satbCountry.ClientID %>');
              var options = {
                  types: ['(regions)']
              };
              var autocomplete = new google.maps.places.Autocomplete(input, options);

              </script>
              <asp:TextBox CssClass="textbox"  type="text" runat="server" ID="satbCountry"></asp:TextBox>

                            </ItemTemplate>
                        </asp:ListView>

                    </ContentTemplate>
        </asp:UpdatePanel>

            </asp:View> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:59:29.153

我认为这是因为`satbCountry`在模板中定义（即可以重复多次）。要获得`clientID`此控件，您需要使用服务器端代码定位每个实例（例如，使用`FindControl("satbCountry")`然后获取客户端 ID。

简而言之，您需要删除`document.getElementById('<%=satbCountry.ClientID %>');`以加载页面，然后替换为

```
document.getElementById('<%# Container.FindControl("satbCountry").ClientID %>'); 
```

# c# - AvalonEdit：确定您是否在评论中

> ID：13441271
> 
> 赞同：3
> 
> 时间：2012-11-18T14:55:56.840
> 
> 标签：c#, .net, wpf, avalonedit

对于 AvalonEdit，我在 xshd 文件中定义了“注释”。现在，在我的程序中，我想确定给定的偏移量是位于注释内部还是外部。

我确实在网上找到了一些代码，即：http:
[//community.sharpdevelop.net/forums/t/12793.aspx](http://community.sharpdevelop.net/forums/t/12793.aspx)

但是，我不知道如何从我的 AvalonEdit-Object 接收必要的对象（如 CurrentContext）。

我希望有人以前创建过这样的功能。您能否发布一些代码或指出我正确的方向？（文件等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:35:38.250

我不确定该示例中的“当前上下文”是什么，但它仅用于访问带有`IHighlighter`. 您可以直接从 TextEditor 获取：

```
bool IsInComment(int line, int column)
{
    IHighlighter highlighter = textEditor.TextArea.GetService(typeof(IHighlighter)) as IHighlighter;
    if (highlighter == null)
        return false;
    int off = textEditor.Document.GetOffset(line, column);
    HighlightedLine result = highlighter.HighlightLine(document.GetLineByNumber(line));
    return result.Sections.Any(s => s.Offset <= off && s.Offset+s.Length >= off && s.Color.Name == "Comment");
} 
```

# php - 如何使用 .htaccess 用一个变量重写 url

> ID：13441272
> 
> 赞同：0
> 
> 时间：2012-11-18T14:56:00.723
> 
> 标签：php, .htaccess, mod-rewrite

> **可能重复：**
> [mod_rewrite 用户 ID 错误](https://stackoverflow.com/questions/7968919/mod-rewrite-user-id-error)

我想要这个：

example.com/profile.php?ID=用户名

重写为：

example.com/username

我试过这个，这似乎什么也没做：

```
RewriteEngine on
RewriteRule ^([a-z]{2,2})/([a-zA-Z0-9_-]+)$ profile.php?ID=$1 [QSA] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:00:46.043

试试这个

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ profile.php?ID=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ profile.php?ID=$1 
```

# smalltalk - VisualWorks Smalltalk - 在运行时设置滑块值

> ID：13441274
> 
> 赞同：1
> 
> 时间：2012-11-18T14:56:21.993
> 
> 标签：smalltalk, visualworks

我有一个滑块，想在某些功能中更改它的值。我尝试过这样的事情：

```
(builder componentAt: #SliderR) widget model setValue: 124. 
```

但它不起作用。（值已更改，但标记保持在相同位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:42:38.087

尝试值：而不是 setValue：

访问这个 ValueHolder 的咒语似乎很长而且很脆弱。请务必将此类代码包装在明确的消息选择器下。或者也许考虑在应用程序的实例变量中共享此状态...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T05:55:45.917

通常，您会在 UIPainter 中将滑块添加到画布，然后在 GUI Painter 工具窗口中为其输入外观名称。该窗口工具栏中的第二个按钮称为“定义”。单击此处以创建一个返回带有滑块值的 ValueHolder 的方法。然后，您可以使用 #value: 在运行时更改 ValueHolder 的值，它将更新滑块的值并重绘它。

对于某些背景：ValueHolders 持有一个值，其他对象可以注册为它的依赖项，以便在值更改时得到通知。这就是 UI 所做的，因此您可以更新 ValueHolder，并且 UI 将自动更新自身。

# visual-c++ - 字节操作反编译

> ID：13441285
> 
> 赞同：0
> 
> 时间：2012-11-18T14:58:04.320
> 
> 标签：visual-c++, assembly, reverse, decompiler

所以我很讨厌那些“标志”和字节操作，所以这里是汇编代码：

```
loc_4097F5:
   .text:004097F5     cmp     [esi+1Bh], dl
   .text:004097F8     jnz     short loc_409812
   .text:004097FA     cmp     [esi+6], dl
   .text:004097FD     jnz     short loc_409812
   .text:004097FF     mov     ecx, [ebp+490h]
   .text:00409805     test    cl, 2 ; How to represent this????
   .text:00409808     jz      short loc_40980F
   .text:0040980A     test    ch, 1 ; How to represent this????
   .text:0040980D     jz      short loc_409812
   .text:0040980F loc_40980F:                        
   .text:0040980F     mov     [esi+25h], dl
   .text:00409812 loc_409812:                      
   .text:00409812     mov     ecx, [esp+18h+arg_0]
   .text:00409816     cmp     [ecx+8Ch], eax 
```

这是反编译器生成的伪代码：

```
v13 = a3->field_454.TextureCaps;
  if ( !(v13 & 2) || BYTE1(v13) & 1 )
    *(_BYTE *)(v5 + 37) = v3; 
```

任何想法如何为 VC++ 6.0 编译器表示这一点（编译此代码）？

编辑：实际上 a3->field_454 是一个 D3DCAPS9 结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:46:20.673

除了反编译版本中已经存在的内容之外，不确定您还需要什么。您当然可以在 d3d 标头中查找`TextureCaps`标志位，以更了解这一点。我相信这是正确的：

```
if (!(TextureCaps & D3DPTEXTURECAPS_POW2) || (TextureCaps & D3DPTEXTURECAPS_NONPOW2CONDITIONAL)) 
```

因此，它正在测试是否无条件支持非二次幂纹理（条件评估为`true`是否**不**支持）。另请参阅相关的[msdn 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172513%28v=vs.85%29.aspx)。

# wordpress - 在单个帖子页面中覆盖 get_posts 方法的位置

> ID：13441287
> 
> 赞同：-1
> 
> 时间：2012-11-18T14:58:11.313
> 
> 标签：wordpress, fgetpos

我们遇到了性能问题我们需要`$get_posts`在主帖子单页中自定义方法方法的调用但是我们找不到它的代码在哪里我们想要覆盖`$q['fields']`这部分中的数组

```
switch ( $q['fields'] ) {
    case 'ids':
    $fields = "$wpdb->posts.ID";
    break;
    case 'id=>parent':
    $fields = "$wpdb->posts.ID, $wpdb->posts.post_parent";
    break;
    default:
    $fields = "$wpdb->posts.ID,$wpdb->posts.post_date,$wpdb->posts.post_title,$wpdb->posts.post_status,$wpdb->posts.post_name,$wpdb->posts.post_parent,$wpdb->posts.guid,$wpdb->posts.menu_order,$wpdb->posts.post_type,$wpdb->posts.post_mime_type";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:54:02.397

老实说，我没有看到帖子的内容部分在该数组中被调用的位置，我扫描了 Wordpress Codex 也没有看到它。对不起，如果我遇到这个，我自己会得到一个新主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:42:13.447

你为什么要改变它？我真的不明白为什么这会解决您的性能问题。它可能在其他地方，我很好奇你为什么认为字段会解决它。

但是，您可以使用过滤器“posts_fields”来控制 $fields。

# android - Arduino 和安卓 ADB

> ID：13441291
> 
> 赞同：0
> 
> 时间：2012-11-18T14:59:01.420
> 
> 标签：android, connection, arduino, adb

我正在尝试从 Arduino 向 Android 发送消息，并且正在尝试以下代码：

```
byte msg[2];
msg[0] = 2;
msg[1] = 1;
connection->write(2, (uint8_t*)&msg);
ADB::poll(); 
```

如果我运行它**一次**，什么都不会发生，但是如果我在一个循环中运行它 5000 次，它就可以工作。那个怎么样？

* * *

如果我将它与按钮一起使用，就像下面的那样，但我如何在没有按钮的情况下使用？

```
byte b;
byte msg[2];

b = digitalRead(BUTTON_UP);
if (b != b1) {
    msg[0] = BUTTON_UP;
    msg[1] = b ? 0 : 1;
    Serial.println(msg[0],DEC);
    connection->write(2, (uint8_t*)&msg);
    b1 = b;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:34:13.563

好的，这就是应该怎么做

```
void sendToandroid(int pin, int OnOff){
long lastTime= millis();
byte msg[2];
int x=0;
while(x == 0){
if ((millis() - lastTime) > 500)
  {
      msg[0] = pin;
      msg[1] = OnOff;
      Serial.print(msg[0]);
      Serial.println(msg[1]);
    connection->write(2, (uint8_t*)&msg);
    x=1;
  }
  ADB::poll();
}

} 
```

# maven-jetty-plugin - Jetty Maven 插件无缘无故地忽略了我的 jetty.xml

> ID：13441292
> 
> 赞同：1
> 
> 时间：2012-11-18T14:59:04.413
> 
> 标签：maven-jetty-plugin

我对这个 Jetty Maven 插件感到有点沮丧。

我正在尝试使用我的 jetty.xml 文件配置 jetty-maven-plugin。（ 见下文 ）。

我希望 Jetty 在端口 8081 上启动。

但是，当我运行时，我在控制台中不断收到 8080

```
mvn jetty:run 
```

我也希望看到日志打印

```
Configuring Jetty from xml configuration file 
```

我在 jetty-maven-plugin 资源中找到的。但我在任何地方都看不到它。

我验证了所有文件都在正确的位置，并且到目前为止我尝试了许多配置变体。

我的 Maven 配置是：

```
...
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>${jettyVersion}</version>
    <configuration>                       
           <jettyConfig>${project.basedir}/src/main/resources/jetty.xml</jettyConfig>
    </configuration>
</plugin>
.....
<properties>
    <jettyVersion>7.2.0.v20101020</jettyVersion>
</properties> 
```

我的 jetty.xml 文件是：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">

<Configure id="Server" class="org.eclipse.jetty.server.Server">
        <Call name="addConnector">
  <Arg>
      <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
        <Set name="host"><SystemProperty name="jetty.host" /></Set>
        <Set name="port"><SystemProperty name="jetty.port" default="8081"/></Set>
        <Set name="maxIdleTime">300000</Set>
        <Set name="Acceptors">4</Set>
        <Set name="statsOn">false</Set>
        <Set name="confidentialPort">8443</Set>
    <Set name="lowResourcesConnections">20000</Set>
    <Set name="lowResourcesMaxIdleTime">5000</Set>
      </New>
  </Arg>
</Call>
</Configure> 
```

我阅读了几乎所有可能的资源，包括 stackoverflow 的所有问答。我肯定错过了什么。

尽管 Eclipse 在 POM 中将 jetty.xml 的配置参数记录为“jettyXml”——我还是下载了他们的源代码。它绝对是“jettyConfig”。

查看他们的代码，我看到以下内容

```
public void applyJettyXml() throws Exception
    {
        if (getJettyXmlFile() == null)
            return;

        getLog().info( "Configuring Jetty from xml configuration file = " + getJettyXmlFile() );        
        XmlConfiguration xmlConfiguration = new XmlConfiguration(getJettyXmlFile().toURL());
        xmlConfiguration.configure(this.server);   
    } 
```

我正在添加 getter 的实现

```
public File getJettyXmlFile ()
{
    return this.jettyConfig;
} 
```

所以我希望至少能看到印刷品`Configuring Jetty from xml...`——但它也没有出现......

我设法从命令行覆盖了端口，但我对 XML 配置感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-14T21:45:36.660

重命名`jettyConfig`为`webAppXml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T18:22:34.357

您应该尝试将 artifactid 从

`<artifactId>maven-jetty-plugin</artifactId>`

至

`<artifactId>jetty-maven-plugin</artifactId>`

因为您在 jetty.xml 中使用的类以 org.eclipse.jetty 为前缀，由 jetty 7 引入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:41:45.210

如果您仍在追求这一点，可以从[http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)尝试两件事。

1）“您必须通过添加对 jetty-servlet 的依赖来显式启用 Jetty 扩展”

```
<plugin>
...
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-server</artifactId>
        <version>7.2.0.v20101020</version>
    </dependency>
</plugin> 
```

2）如果您执行第 1 步，请通过将其（org.mortbay.jetty，而不是 org.eclipse.jetty）放入 settings.xml 来指示 maven 正确的 groupId

```
<profile>
      ...
    <pluginGroups>
        <pluginGroup>org.mortbay.jetty</pluginGroup>
    </pluginGroups>
</profile> 
```

# objective-c - 使用 Xcode 生成带有 UML 的代码

> ID：13441293
> 
> 赞同：3
> 
> 时间：2012-11-18T14:59:06.440
> 
> 标签：objective-c, xcode, cocoa, uml, automatic-ref-counting

是否有任何 Xcode 插件或类似的插件可以让您使用 UML 为您的应用程序建模并为您生成代码？我正在用 Objective-C 编程。

我发现仅从代码生成 UML 图的帖子，如下所示：

[Objective C 的类建模替代方案](https://stackoverflow.com/questions/6061583/class-modeling-alternatives-for-objective-c)

[如何从 Xcode4 生成 UML 图](https://stackoverflow.com/questions/6079312/how-can-i-generate-uml-diagrams-from-xcode4)

这不是我要找的。我想先对我的应用程序建模，然后生成代码，最好是在带有 ARC 的 Objective-C 3.0 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:22:05.883

Xcode 4.x 插件没有官方 API。您可能会考虑构建一个工具。根据您的 UML 的格式，生成文本可能更容易。这可以使用 XSLT 或任何类型的解析工具来完成。Ruby、Perl 和 Python 可能是快速的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-11T15:27:17.260

您尝试过**Enterprise Architect**吗？请参阅下面提到的链接，了解如何在图表中表示结构/联合等，并从 UML 类图中生成代码。 [C 中面向对象编程的 UML 类表示](http://www.sparxsystems.com/enterprise_architect_user_guide/9.0/software_engineering/ooprogrammingusingc.html)

# java - 带有GMT的java日期解析

> ID：13441294
> 
> 赞同：2
> 
> 时间：2012-11-18T14:59:09.633
> 
> 标签：java, parsing, gmt

发布的日期字符串返回为：Sun，2012 年 11 月 18 日 06:50:02 GMT，我的 convertDate 方法返回 java.text.ParseException: Unparseable date: "Sun, 18 Nov 2012 06:50:02 GMT"（在偏移量 8）。我检查了资源，但找不到像这样有用的资源...[使用 SimpleDateFormat 将带有 GMT 时区的字符串解析为 Date](https://stackoverflow.com/questions/6705213/parsing-a-string-with-a-gmt-timezone-to-date-using-simpledateformat)

如果您能对此有所了解，将不胜感激。这是我的方法 .. pubDate 这里是星期日，2012 年 11 月 18 日 06:50:02 GMT

```
public Date convertDate(String pubDate){

    SimpleDateFormat sdf =  new SimpleDateFormat("EEE, dd MM yyyy hh:mm:ss Z",Locale.US);
    Date newsDate = new GregorianCalendar(0, 0, 0).getTime();
        try{
            newsDate  = sdf.parse(pubDate);
        }catch(ParseException e){
            Log.d(Tag, "Exception Parsing date" + pubDate);
        }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T15:03:55.817

用于`MMM`月份字段：

```
new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss Z",Locale.US); 
```

解决此问题后，请不要忘记以`newsDate`您当前正在返回的方式返回`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:13:51.843

这是我做的一个小测试：

```
@Test
public void testDate() throws ParseException {

    String pubDate = "Sun, 18 Nov 2012 06:50:02 GMT";

    SimpleDateFormat sdf = new SimpleDateFormat(
            "EEE, dd MMM yyyy hh:mm:ss z", Locale.US);
    Date newsDate = new GregorianCalendar(0, 0, 0).getTime();

    newsDate = sdf.parse(pubDate);

} 
```

您需要设置月份，`MMM`因为您使用的是月份的前三个字母（四个 M 表示[完整的月份名称](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#text)）。此外，时区必须`z`代替，`Z`因为您有[ISO 8601 时区](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#timezone)(GMT)。

# android - 用于 strace 的 Android 应用

> ID：13441295
> 
> 赞同：0
> 
> 时间：2012-11-18T14:59:14.727
> 
> 标签：android, debugging, strace

我正在使用 Android 平板电脑，并希望调试导致随机重启的应用程序。

有没有可以安装的应用程序来执行等效的背景`strace`或等效操作？这个一般是怎么处理的。

我正在查看是否有一个应用程序不断运行，记录系统事件。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:02:29.133

我能找到的最接近的东西是[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat&hl=en)，它只为您提供 LogCat 输出，其中包含系统日志等。

# java - 线程安全断路器

> ID：13441300
> 
> 赞同：0
> 
> 时间：2012-11-18T15:00:33.000
> 
> 标签：java, multithreading, thread-safety, locking

我正在尝试将断路器模式作为一种学习体验来实现（我知道这种模式已经在多个框架中实现了）。

我的天真、简化且非线程安全的实现看起来像

```
CircuitBreaker circuitBreaker = null;
    try {
        //get the current circuit breaker
        if (circuitBreaker.isOpen()) {
             throw new CircuitBreakerOpenException();
        } else {
             //proceed normally
             //or retry if half open
        }
    } catch (CircuitBreakerCallbackExecutionException e) {
        //update or replace the circuit breaker
    } 
```

如何在不同步受保护的调用（断路器对象）的情况下实现线程安全？理想情况下，如果失败阈值设置为 10，我不想在远程系统出现故障时允许超过 10 个多线程调用通过警卫。

到目前为止，我还没有找到任何看起来 100% 线程安全的开源框架。但也许试图实现这一目标是没有意义的。

这个问题更多的是关于线程安全而不是断路器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:07:54.260

如果我理解正确，该`isOpen`方法会访问一个共享变量，大概是一个`boolean`. 您所需要的只是使该 boolean `volatile`。这将确保健康检查线程对它的任何写入对所有资源获取线程都是立即可见的。

# .net - 罗斯林 API 文档

> ID：13441302
> 
> 赞同：15
> 
> 时间：2012-11-18T15:00:43.060
> 
> 标签：.net, roslyn

我正在使用 Roslyn CTP 进行开发，并且正在使用 MSDN 上的演练以及人们发布的其他代码示例来学习。

但是，我找不到任何解释作为 API 一部分的各种类和方法的文档。

我了解 API 仍在开发中，但是否有从高层次解释 API 的来源？我正在寻找您通常会在 MSDN 中找到的 .NET 类文档。

除了代码示例之外，我还在猜测某些类和方法的设计目的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T15:24:38.433

我认为您正在寻找的是[MSDN 论坛上发布的 API 文档草案](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/645ac1ef-d21b-40bf-8324-fefe0bd8c6f8)。

**编辑：**现在 Roslyn 托管在 CodePlex 上，其文档位于[https://roslyn.codeplex.com/documentation](https://roslyn.codeplex.com/documentation)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-11T23:39:46.490

[您可以在http://www.coderesx.com/roslyn/](http://www.coderesx.com/roslyn/)找到 Roslyn 参考文档。它是从最新的 Roslyn 源代码自动生成的，格式类似于 MSDN。这当然是初步文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T22:55:00.450

这是来自微软的官方[链接。](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)

该链接提供了完整 Roslyn 编译器堆栈的文档，包括但不限于：

1.  [KeyConcepts](http://msdn.microsoft.com/en-us/vstudio/hh500769#Toc306015672) -[语法](http://msdn.microsoft.com/en-us/vstudio/hh500769#Toc306015671),[语义](http://msdn.microsoft.com/en-us/vstudio/hh500769#Toc306015686)和服务
2.  [代码示例](http://www.microsoft.com/en-us/download/details.aspx?id=27745)

# javascript - Javascript 中的“this”关键字如何在对象文字中起作用？

> ID：13441307
> 
> 赞同：59
> 
> 时间：2012-11-18T15:01:41.707
> 
> 标签：javascript

我已经看到[“this”关键字在函数中是如何工作的？](https://stackoverflow.com/questions/133973/how-does-this-keyword-work-within-a-javascript-object-literal)，但我没有看到它回答了以下问题。

鉴于此代码：

```
var MyDate = function(date) {
    this.date = date;
};

var obj1 = {
    foo: new Date(),
    bar: new MyDate(this.foo)  //  this.foo is undefined
};

var obj2 = {};
obj2.foo = new Date();
obj2.bar = new MyDate(this.foo);  //  this.foo is undefined

var obj3 = {
    foo: new Date(),
    bar: new MyDate(obj3.foo)
};

var obj4 = {};
obj4.foo = new Date();
obj4.bar = new MyDate(obj4.foo); 
```

为什么前两次尝试失败，但后两次成功？如果`this`未绑定到当前对象字面量，*它*绑定到什么？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-11-18T15:40:11.093

Javascript 是一种后期绑定语言。事实上，它是很晚的绑定。不仅`this`在编译时不绑定，甚至在运行时也不绑定（就像大多数其他后期绑定语言一样）。在 javascript 中，`this`在调用期间绑定。

绑定规则与大多数其他 OO 语言完全不同，这就是为什么它似乎让很多不熟悉 javascript 的人感到困惑。

基本上，您`this`在代码中使用的方式和位置不会影响`this`行为方式（无论它是独立函数、对象文字等），决定值的`this`是您调用函数的方式。

规则是：

**1** - 当函数作为构造函数调用时，会创建一个新对象并`this`绑定到该对象。例如：

```
function Foo () {
    this.bar = 1; // when called with the new keyword
                  // this refers to the object just created
}
new Foo().bar; 
```

**2** - 当作为对象调用时，方法`this`是指该方法所属的对象。基本上是最后一个点之前的名称。例如：

```
foo.bar = 1;
foo.baz = function () {
    alert(this.bar); // this refers to foo when called as foo.baz()
}
foo.baz(); 
```

**3** - 如果在任何函数之外使用，或者如果函数没有作为方法调用，则`this`指的是全局对象。javascript 规范没有给全局对象命名，只是说存在一个，但对于浏览器，它传统上称为`window`. 例如：

```
bar = 1;
alert(this.bar); // this refers to the global object
foo = {
    bar: this.bar // also global object
}
function foofoo () {
    alert(this.bar); // also refers to the global object
}
foofoo(); 
```

**4** - 在事件处理程序（如 onclick 等）`this`中指的是触发事件的 DOM 元素。or 对于与 DOM 不相关的事件，例如`setTimeout`or `XMLHTTPRequest`，`this`指的是全局对象。例如：

```
foo.bar = 1;
foo.baz = function () {
    alert(this.bar); // this would normally be foo but if this
                     // function is assigned to an event it would
                     // point to the element that triggered the event
}
somediv.bar = 2;
somediv.onclick = foo.baz; // clicking on somedive alerts 2 instead of 1 
```

**5** - 最后，当使用`call()`or`apply()`方法调用函数时，`this`可以将其重新分配给任何东西（谷歌“mdn function.prototype.call”）。这样，javascript中的任何对象都可以借用/窃取另一个对象的方法。例如：

```
cat = {
    type: "cat",
    explain: function () {
        return "I am a " + this.type;
    }
}
dog = {
    type: "dog"
}
cat.explain.call(dog); // returns "I am a dog" 
```

在`Function.bind()`现代 javascript 实现中，我们现在有另一个规则：

**6** - 函数也可以使用该方法显式绑定`this`到对象。`bind()`该`bind`方法返回`this`绑定到传递给的参数的函数的新实例`bind`。例如：

```
function explain () {
    return "I am a " + this.type;
}
dog = {
    type: "dog"
}
var dog_explain = explain.bind(dog);
dog_explain(); // returns "I am a dog" 
```

ECMAscript 5 引入了严格模式，它改变了函数中 this 的含义，这些函数不是作为方法调用或通过 call 或 apply 调用的，因此我们必须添加一个新规则：

**7** - 在严格模式下，`this`不允许引用全局对象（浏览器中的窗口）。因此，当一个函数没有作为方法调用或没有通过or`this`手动绑定到任何东西时，然后变为：`call``apply``bind``this``undefined`

```
"use strict";
function foo () {
    return this;
}
foo(); // returns undefined instead of the global object 
```

ECMAscript 6 引入了箭头函数。箭头函数通过提前绑定来改变 this 的行为方式。

**8** - 在箭头函数中，`this`在函数声明时绑定。所以`this`在下面的代码中：

```
var x = () => {return this}; 
```

就好像函数被声明为如下代码：

```
var x = function () {return this}.bind(this); 
```

Note that since the `this` in arrow functions are bound at the time the function is declared **you can't use arrow functions if you want to use inheritance**. That's because the `this` in the function will **always** point to the parent object and will never point to the child object. That means that the only way to make inheritance work with arrow function is to override all arrow functions from the parent object.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-18T15:05:49.927

我认为您可能遗漏了函数和对象字面量之间的关键区别：

在调用函数之前，不会评估函数的主体。

这意味着 的值`this`取决于函数的调用方式*。*如果它作为对象上的方法调用（例如`someObj.someFunc()`），`this`则将指向函数体内的该对象。如果它被称为独立函数 ( `someFunc()`)。他们身体中的代码将继承`this`调用者环境中的任何内容。但无论哪种方式，*定义*`this`函数时的值都无关紧要。

 *而对象字面量只是一个表达式；如果`this`出现，并且它不在文字中包含的函数体内，它只是`this`代码中出现该表达式的点的值。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-18T15:05:29.613

在 Javascript 中，只有函数调用才能建立新的`this`上下文。当你`foo.bar()`在`bar`函数内调用时，`this`会绑定到`foo`; 当你打电话时`foo()`，里面`this`会绑定`window`。对象字面量构造函数不是方法调用，因此不会产生`this`任何影响；它仍然会引用它在对象文字之外引用的任何内容。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-18T15:05:56.060

`this.foo`未定义，因为在您的所有示例中，`this`都指的是全局`window`对象。此外，即使您尝试`obj1.foo`了 ，它*仍然*会返回 undefined ，因为在评估整个表达式之前尚未创建该属性。试试这个：

```
var obj1 = {
    foo: new Date(),
    bar: function() {
        return new MyDate( this.foo ); // will work
    }
}; 
```

它之所以有效，是因为在您调用`obj1.bar()`时，对象将在那时创建；并且因为您在一个函数中，所以该`this`对象将引用当前对象。*

# android - 我自己的自定义文本视图可以垂直显示文本，但是有问题！谁能帮我

> ID：13441309
> 
> 赞同：1
> 
> 时间：2012-11-18T15:01:44.427
> 
> 标签：android, textview, overriding, ondraw, vertical-text

我想扩展一个 VerticalTextView 类，它可以使内容显示垂直文本。示例： `android:text="Hello"` 它显示如下：

```
H
e
l
l
o 
```

我尝试覆盖 onDraw 函数。下面的代码：

```
public class VerText extends TextView {
public VerText(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public VerText(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public VerText(Context context) {
    super(context);
}

@Override
protected void onDraw(Canvas canvas) {
    TextPaint textPaint = getPaint();
    textPaint.drawableState = getDrawableState();
    textPaint.setColor(Color.BLACK);
    String textString = (String) getText();
            //textString = "Hello";
    for (int i = 0; i < textString.length(); i++) {
        canvas.drawText(textString.charAt(i) + "", getMeasuredWidth() / 2
                - getTextSize() / 2, (i + 1) * getTextSize(), textPaint);
    }
    getLayout().draw(canvas);
} 
```

} 这很简单，对吧？我在这里遇到问题，当我使用时

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".TestActivity" >

    <com.example.testmycustom.VerText
        android:id="@+id/verText1"
        android:layout_width="60dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="119dp" />

</RelativeLayout> 
```

并且`//textString = "Hello";`有用，效果很好，但是当我使用

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".TestActivity" >

    <com.example.testmycustom.VerText
        android:id="@+id/verText1"
        android:layout_width="60dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Hello"//!!!!only added this one!!!! and canceled comment textString="Hello"
        android:layout_marginLeft="119dp" />

</RelativeLayout> 
```

有显示两个你好！一个是垂直的，另一个是水平的。有人能告诉我为什么吗？谢谢！一些实现这一目标的新方法受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:03:09.143

检查[此实现](https://stackoverflow.com/a/12433475/961759)。它使用路径而不是循环来绘制文本。

```
public class VerticalTextView extends TextView {

    public VerticalTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public VerticalTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public VerticalTextView(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        final ColorStateList csl = getTextColors();
        final int color = csl.getDefaultColor();
        final int paddingBottom = getPaddingBottom();
        final int paddingTop = getPaddingTop();
        final int viewWidth = getWidth();
        final int viewHeight = getHeight();
        final TextPaint paint = getPaint();
        paint.setColor(color);
        final float bottom = viewWidth * 9.0f / 11.0f;
        Path p = new Path();
        p.moveTo(bottom, viewHeight - paddingBottom - paddingTop);
        p.lineTo(bottom, paddingTop);
        canvas.drawTextOnPath(getText().toString(), p, 0, 0, paint);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T15:17:29.823

尝试一下

```
package artefatoscs.util;
public class VerticalTextView extends TextView{

    public VerticalTextView(Context context, AttributeSet attrs){
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(heightMeasureSpec, widthMeasureSpec);
        setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
    }

    @Override
    protected boolean setFrame(int l, int t, int r, int b){
        return super.setFrame(l, t, l+(b-t), t+(r-l));
    }

    @Override
    public void draw(Canvas canvas){

        canvas.translate(0, getWidth());
        canvas.rotate(-90);

        canvas.clipRect(0, 0, getWidth(), getHeight(), android.graphics.Region.Op.REPLACE);
        super.draw(canvas);
    }
} 
```

res\values\attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <declare-styleable name="VerticalLabelView">
        <attr name="text" format="string" />
        <attr name="textColor" format="color" />
        <attr name="textSize" format="dimension" />
    </declare-styleable>
</resources> 
```

你的.xml

```
<artefatoscs.util.VerticalTextView
            android:id="@+id/txtDM"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"            
            android:background="@color/white"
            android:padding="2sp" /> 
```

# java - 域类是否应该知道如何将自己序列化为 JSON 表示？

> ID：13441311
> 
> 赞同：1
> 
> 时间：2012-11-18T15:01:54.377
> 
> 标签：java, jakarta-ee, gson

我有一个名为Dinner 的类，这个域类是否应该知道如何将itaelf 序列化为带有Gson 的JsonObject？通过添加一个方法就可以了。或者另一个类应该通过它的属性并从另一个类中生成 JsonObject 吗？

我想做一个自定义表示，所以我不能使用 toJson 方法。但无论如何，这个问题仍然适用，这属于哪个类？如果出现新的表示怎么办？Xml 等。我会说它适合域类，但我不确定它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:12:57.447

我将使用[访客](http://en.wikipedia.org/wiki/Visitor_pattern)模式并将 JSON/GSON 打印机建模为访客，并将晚餐类建模为可访问。这将允许您在不更改 Dinner 类的规范的情况下添加尽可能多的新打印机。

我有类似的用例，其中上下文无关解析器中的域类都是可访问的，并且具有不同的打印机来为不同的 UI 以 text/html 格式打印解析树中的解析条目。

# android - 清单文件中的 2 个活动有什么区别？

> ID：13441319
> 
> 赞同：1
> 
> 时间：2012-11-18T15:03:14.340
> 
> 标签：android, android-activity, android-manifest

通常在`Android Manifest`文件中我看到两种声明`activity`名称的方法：

```
<activity android:name=".MyActivity" android:label="@string/app_name">... 
```

和

```
<activity android:name="MyActivity" android:label="@string/app_name">... 
```

两种方法效果很好。但是，我不知道这些方式有什么区别！谁能解释一下？`activity`在android中声明的最佳实践是什么？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:06:27.320

> 但是，我不知道这些方式有什么区别！

今天没有什么不同。两者都意味着它`MyActivity`应该存在于`package`根`<manifest>`元素属性中的任何 Java 包中。

> 在android中声明活动的最佳做法是什么？

这两个都很好。

# node.js - 线程评论和backboneJS

> ID：13441320
> 
> 赞同：0
> 
> 时间：2012-11-18T15:03:23.533
> 
> 标签：node.js, backbone.js, mongoose, express

目前，我正在使用 nodejs/expressjs 和 mongoDB (+mongoose) 作为数据库来实现一个博客应用程序。到目前为止它工作正常，但现在我正在尝试实现嵌套/线程注释。

当我了解如何在 mongoDB 中存储此类评论的不同方式时，我会将每条评论存储在单独的文档中以保持灵活性。

与存储嵌入在线程中的所有评论相反，我将从数据库中以无序形式检索我的评论，并引用每个父级...物化路径将是一种替代方案，但是由于它们的长度，索引可能会出现问题。

我打算在呈现评论时到实际的排序客户端 - 好主意吗？

我阅读了关于backboneJS（关系）的内容，并问自己这是否是一个可以帮助实现它的合适工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:10:29.620

是的，将评论作为单独的文档存储在 Mongo 中就可以了。在 Mongo 中，键控查找通常很快，因此维护线程和注释的单独规范化结构应该可以工作。

```
# Create thread:
db.threads.insert({ id: 123, name: "My thread title..." })

# Add comment:
db.comments.insert({ id: 1, threadId: 123, text: "My comment text..." })

# Find comments in thread by order of insertion (assuming ids are sequential):
db.comments.find({ threadId: 123 }).sort({ id: 1 }) 
```

如果您正在构建单页应用程序，Backbone 是一个很好的框架。此外，我建议查看[Backbone Marionette](https://github.com/marionettejs/backbone.marionette)。它是一个扩展，使许多很酷的事情成为可能（也有很好的文档）。

# python - 如何在python中将字符串转换为不同的格式？

> ID：13441323
> 
> 赞同：1
> 
> 时间：2012-11-18T15:03:30.920
> 
> 标签：python, string, format

例如，我如何将 45 转为转（45）？或者通常在python中将AnyValue反转为reverse(AnyValue)？

用户输入可以是：

```
reverse 45 
```

然后输出可能是：

```
reverse(45) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:06:59.377

您可以使用正则表达式在数字周围添加括号：

```
import re

s = "reverse 45"
output = re.sub(r'reverse (\d+)', r'reverse(\1)', s) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T15:07:36.717

```
 python 3.2
    a = reverse 45
    a.replace(" ","(") + ")" 
```

# c++ - C++ 中的 IPv6 连接测试

> ID：13441324
> 
> 赞同：3
> 
> 时间：2012-11-18T15:03:41.793
> 
> 标签：c++, testing, ipv6, connectivity

是否有任何 C++ 函数来测试运行我的程序的计算机是否支持 IPv6 连接？

我需要知道这个页面[http://test-ipv6.com/](http://test-ipv6.com/)的结果，但是在 C++ 中。

*编辑：*我试图使用`getifaddrs()`. 但是返回值可以是`AF_INET6 found`，因为我确实设置了 IPv6 地址，但是 IPv6 连接不起作用（可能是因为 ISP 的原因）。那么有什么方法可以检查 IPv6 连接是否确实有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-06T04:25:05.710

所有现代操作系统都支持 IPv6，因此您不必担心该协议是否可用。（如果不是，你的程序无论如何都不会编译。）

但确定计算机是否真正具有有效的 IPv6 连接的唯一方法是尝试 IPv6 连接。

这实际上[是微软在 Windows 中使用他们的网络状态指示器所做的](https://technet.microsoft.com/en-us/library/ee126135(v=ws.10).aspx)。他们尝试[从仅 IPv6 的 Web 服务器加载 URL](http://ipv6.msftncsi.com/ncsi.txt)和从仅[IPv4 的 Web 服务器](http://www.msftncsi.com/ncsi.txt)加载 URL 。如果这两个都失败，您会在系统托盘中的网络图标上看到带有感叹号的黄色三角形。

因为我需要一个类似的功能，但我也需要实际的 IPv6 地址，[所以我创建了自己的公共服务](http://myip.addr.space/help)，其中包括这个功能（以及其他一些东西）。所以我有一个返回公共 IPv6 地址[的纯 IPv6 URL](http://ipv6.myip.addr.space/ip)，以及一个返回公共 IPv4 地址[的纯 IPv4 URL](http://ipv4.myip.addr.space/ip)。

由于其中一个 URL*只能*通过 IPv6 访问，而另一个*只能*通过 IPv4 访问，因此您可以独立验证每个协议的连接性。

无论哪种方式，如果您尝试获取 URL 失败，您可以检查返回的错误以确定问题可能是什么。

# php - PHPDoc 可选参数

> ID：13441333
> 
> 赞同：33
> 
> 时间：2012-11-18T15:04:43.330
> 
> 标签：php, phpdoc, param, optional

SO上已经有2个类似的问题，但似乎没有一个答案有效。

PHPDoc 似乎没有将我的函数中的可选参数识别为可选参数，例如：

```
/**
 * Opens the connection and sets encoding
 * 
 * @param string $encoding Encoding.
 */
public function __construct($encoding='UTF-8') 
{
    $this->connect_mysqli();
    $this->set_encoding_mysqli($encoding);
} 
```

它不应该将 $encoding 识别为可选的还是我在这里遗漏了什么？我真的很想用谷歌搜索并阅读文档，但我发现的只是：

> 如果您没有在实际代码中指示参数是可选的（通过“$paramname = 'a default value'”），那么您应该在参数的描述中提及该参数是可选的。

所以我认为我的代码没有问题，但我在文档中得到的只是：“__construct（string $encoding）”，没有任何标志，该参数是可选的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-18T15:12:43.453

严格来说，PHP 不知道“可选参数”，而是有默认值的参数，在调用函数或方法时可以省略。好的，最后是一个可选参数，但是你的

```
@param string $encoding Encoding. 
```

这里是完全正确的，因为默认值是一个字符串。文档试图告诉您的是您应该自己提及它

```
@param string $encoding (optional) Encoding. 
```

我同意你的看法，像这样的符号

```
__construct([$encoding]) 
```

或者

```
__construct($encoding = 'UTF-8') 
```

会好的。您可以发布错误报告

[https://github.com/phpDocumentor/phpDocumentor2/issues?state=open](https://github.com/phpDocumentor/phpDocumentor2/issues?state=open)

更新：意识到这已经提到了[https://github.com/phpDocumentor/phpDocumentor2/search?q=optional&type=Issues](https://github.com/phpDocumentor/phpDocumentor2/search?q=optional&type=Issues)

# mysql - 何时在 SQL 表字段 (MySQL) 上添加索引？

> ID：13441334
> 
> 赞同：18
> 
> 时间：2012-11-18T15:04:50.410
> 
> 标签：mysql, sql, database, indexing

有人告诉我，如果你知道你会经常使用一个字段进行连接，那么在它上面创建一个索引可能会很好。

我通常理解索引表的概念（就像纸质书中的索引允许您查找特定术语而无需逐页搜索）。但我不太清楚何时使用它们。

假设我有 3 个表：一个 USERS、COMMENTS 和一个 VOTES 表。我想创建一个类似于 Stackoverflow 的评论线程，其中查询返回评论以及对这些评论的赞成/反对票数。

```
USERS table
user_id user_name   
 1         tim
 2         sue
 3         bill 
 4         karen
 5         ed

COMMENTS table
comment_id topic_id    comment   commenter_id
 1            1       good job!         1
 2            2       nice work         2
 3            1       bad job :)        3

VOTES table
 vote_id    vote  comment_id  voter_id
  1          -1       1          5
  2           1       1          4
  3           1       3          1
  4          -1       2          5
  5           1       2          4 
```

[这是返回 topic_id=1 投票的查询和 SQLFiddle](http://www.sqlfiddle.com/#!2/b562a/13)：

```
select u.user_id, u.user_name,
   c.comment_id, c.topic_id, c.comment,
   count(v.vote) as totals, sum(v.vote > 0) as yes, sum(v.vote < 0) as no,
   my_votes.vote as did_i_vote
from comments c
join users u on u.user_id = c.commenter_id
left join votes v on v.comment_id = c.comment_id
left join votes my_votes on my_votes.comment_id = c.comment_id
and my_votes.voter_id = 1
where c.topic_id = 1
group by c.comment_id, u.user_name, c.comment_id, c.topic_id, did_i_vote; 
```

让我们假设评论和投票的数量达到数百万。为了加快查询速度，我的问题是我应该在`comments.commenter_id`,`votes.voter_id`和上放置一个索引`votes.comment_id`吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-18T15:27:28.200

在 SQL 表中的何处使用索引并不总是很明确。但是在大多数情况下，有一些一般的经验法则可能会帮助您做出决定。

1.  在 where 子句中使用的列上放置索引
2.  将索引放在用于连接的列上。
3.  尽量不要在同一个表中的列上使用超过 4-5 个索引。

您应该记住的一般概念是：

1.  您使用的任何索引都会更快地搜索这些列。
2.  您添加的任何索引都会导致插入此表的速度稍慢一些。
3.  从前两个。您有责任决定对表执行多少次插入和查询，以决定是否使用索引以及在哪些列上。

**编辑**

@AndrewLazarus 评论非常重要，我决定将其添加到答案中：

1.  不要在只有几个不同值的列上使用索引。例如，当只有少数状态时，保存状态的列或布尔值。不这样做的原因是索引并不能真正帮助您，因为它只会除以值的数量，并且由于您只有其中的几个，因此不会有任何真正的好处。该表会占用更多的索引空间，并且在插入时预制件会变慢，但在查询时不会获得明显更好的性能

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T15:24:47.660

这是一些使用的键的更新[http://www.sqlfiddle.com/#!2/94daa/1](http://www.sqlfiddle.com/#!2/94daa/1)

引擎必须将使用索引的成本与不这样做的成本进行比较。您会注意到我必须添加更多行才能使用索引。

使用索引，引擎必须使用索引来获取匹配值，这很快。然后它必须使用匹配项来查找表中的实际行。如果索引没有缩小行数，那么只查找表中的所有行会更快。

我不确定 mysql 是否有类似于 SQL Server 聚集索引的东西。在这种情况下，索引和表数据是相同的结构，所以你没有索引查找的第二步。

我以两种不同的方式引入索引，首先是通过定义主键在用户表上。这将在 user_id 列上隐式创建唯一索引。唯一索引意味着您不能两次插入同一组值。对于单列索引，这仅意味着您不能两次拥有相同的值。

如果您想象一张表的用户书，每页有一个用户，那么创建的索引会为您提供一个排序的 user_id 列表，每个列表都有用户的页码。该列表通常以某种树形形式存储，以便快速查找特定数字。想想你在电话簿中查找名字的方式，你不只是扫描所有页面直到找到它，你猜测它会在哪里，然后向后或向前跳过大块页面直到你接近. [您通常可以在 O(log 2] n) 时间内在索引中查找值，其中 n 是行数，并且您需要读取相似数量的索引页。

现在如果给数据库引擎查询`select * from users Where user_id = 3`，它有两个选择。它可以读取每个数据页，并寻找正确的值（它可能会利用有一个主键在第一个停止的事实）。另一种方法是读取索引以获取正确的数据页，然后查找数据页。

为具体和简单起见，假设该表有 1024 个条目。假设每个条目占用一个数据页。假设索引树中的每个条目占用一个索引页。假设索引是平衡的，那么它有10个级别，总共2047页。（所有这些假设都是值得怀疑的，但它们得到了重点，特别是索引页几乎总是小于数据页，因为您不倾向于一次索引所有列）。

要执行表扫描方法，需要读取 1024 个数据页。要使用索引，需要阅读 10 个索引页和 1 个数据页。几乎所有的数据库性能都与最小化页面读取量有关。

多列索引允许快速查找数据集。如果您有一个带有 (col1, col2) 的索引，即使只是在 col1 上进行匹配也会得到改进。

该`create index`语句只是说明索引了哪些列，以及是否允许重复值。

再次使用本书的类比，`Create Index ix_comment_id on votes (comment_id, voter_id)`将创建一个comment_id 和voter_id 的有序列表，并引用相应的数据行。

```
+------------+--------------+---------+
| comment_id | reference_id | row_ref |
+------------+--------------+---------+
|          1 |            4 |    ref1 |
|          1 |            5 |    ref2 |
|          2 |            4 |    ref3 |
|          2 |            5 |    ref4 |
|          3 |            1 |    ref5 |
+------------+--------------+---------+ 
```

# python - 在 PyGObject 中找不到 gdk_property_change

> ID：13441337
> 
> 赞同：4
> 
> 时间：2012-11-18T15:05:13.580
> 
> 标签：python, gtk, pygobject

PyGobject 中的 gdk_property_change 绑定是什么？我试过 Gdk.property_changed、Gdk.Property.change 等。功能 Gdk.property_get 存在，其他一切都很好。我的系统是：Ubuntu 12.10、Python 3.2.3、PyGObject 3.4.0 和 Gtk 3.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:52:01.123

该方法用 注释`(skip)`，这意味着它不包含在语言绑定中。（参见[gdk_property_change](http://git.gnome.org/browse/gtk+/tree/gdk/gdkwindow.c#n11326)源代码）。

[这是将不可自省的构造标记为 (skip)](http://git.gnome.org/browse/gtk+/commit/gdk/gdkwindow.c?id=374e76a19dac87676995356f6daacb10f4bb6e36)的提交。唯一的解释是它是一个“不可自省”的功能。可能是因为`data`参数可以是 , 或 , 中的任何一个`unsigned short *`，`unsigned char *`而`unsigned long *`这`unsigned char *`在语言绑定中太难处理了。

# html - 如何开发数据库存储 > 5MB 以分布在几乎所有平台上的 PhoneGap 应用程序

> ID：13441339
> 
> 赞同：1
> 
> 时间：2012-11-18T15:05:18.213
> 
> 标签：html, sqlite, cordova, phonegap-plugins

我正在使用 PhoneGap 构建企业业务应用程序，以便能够在几乎所有移动平台上分发应用程序。

我的应用程序可能需要超过 5MB 的离线数据库存储空间，PhoneGap SQLite DB 限制为 5M。

经过一番搜索，我发现了一个很酷的[插件](https://github.com/chbrody/Cordova-SQLitePlugin)，它使 PhoneGap 能够以无限的 DB 大小连接 SQLite DB，但不幸的是，这个解决方案仅适用于 Android 和 iOS。

是否有任何解决方法或解决方案让我使用 PhoneGap 开发我的移动应用程序并在几乎所有数据库存储超过 5MB 的平台上分发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:00:54.343

您可以编写自己的插件。如果您知道目标平台的语言，在 phonegap 中创建插件并不是那么困难。

如果你曾经接触过java。也许您可以创建自己的插件，这里几乎没有[可用](https://github.com/phonegap/phonegap-plugins/tree/master/BlackBerry)的黑莓插件.. 可能您可以将您为 android 找到的插件移植到黑莓。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:01:25.023

一旦您需要浏览器或核心 phonegap 框架之外的内容，您将需要本机代码。如果幸运的话，这意味着使用其他人的插件，但由于大多数开发人员只关心 iOS 和 Android，因此您不太可能找到通用的东西。

假设平台内置了良好的 sqllite 支持，将 SQLitePlugin 移植到另一个平台应该非常简单——插件的本机部分只有 2 个函数（open 和 executeSql）并且代码不到 300 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T15:12:34.560

希望这会有所帮助。我之前已经回答过同样的问题，所以我将在这里链接到答案。. . . .

[Phonegap 离线数据库](https://stackoverflow.com/questions/12005042/phonegap-offline-database/15811728)

您可以使用以下内容::

1.  SQLite
2.  本地存储
3.  适用于任何操作系统的本机数据库。通过将 Phonegap 插件调用到您的 Native DB 模型类，并将参数作为要输入到 DB 中的参数传递。
4.  索引数据库

# mysql - 如何在 Play Framework 中运行依赖于 mysql 数据库的测试？

> ID：13441343
> 
> 赞同：1
> 
> 时间：2012-11-18T15:05:43.877
> 
> 标签：mysql, database, playframework-2.0

我正在使用严重依赖数据库的 Java Play Framework 2.0 开发 Web 应用程序。我想开始为它编写功能测试，它需要访问一个已经包含数据的数据库，但我不希望它接触实际应用程序的数据库，我希望在测试之间重置测试数据库. 我如何设置它并为 Play 应用程序访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:14:41.873

我从未使用过 Java Play，但数据库测试的概念在各种语言中都很常见。从我的角度来看，可以使用三种解决方案

1.  创建一个单独的数据库，该数据库不在生产环境中，并让您的测试针对该数据库运行。专业人士肯定是，您正在根据真实数据测试您的代码。缺点是偶尔导入新数据并跟踪架构更改

2.  您可以导入一个只有结构和一些预定义数字的干净数据库，这些数据库将在每个测试套件/案例之前重置

3.  最可取的方法是使用 Mockup 对象。这仅在您使用 ORM 框架的假设下有效，以便您可以封装。

**一些进一步研究的链接**

[http://mockrunner.sourceforge.net](http://mockrunner.sourceforge.net)（jdbc 支持模拟）

[http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)（用于一般模拟）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:15:13.183

如果数据库不必是 MySQL，那么我建议使用像[H2](http://www.h2database.com/html/main.html)这样的内存数据库。它非常适合测试目的，并且启动速度非常快。此外，使用内存数据库，您不必担心清理测试副作用（每个测试的新数据库）。这还有一个优点，即测试是自包含的，其他人测试您的代码（甚至是构建/自动化服务器）也不需要安装 MySQL。

如果您*必须*使用 MySQL 作为数据库，那么可以编写 @Before/@After 钩子脚本来设置您的架构并初始化您需要的任何数据，但如果可以避免，我建议使用内存路由。

# php - 如何仅允许特定用户查看 Drupal 中内容类型的特定字段？

> ID：13441345
> 
> 赞同：3
> 
> 时间：2012-11-18T15:05:53.813
> 
> 标签：php, drupal, drupal-7, drupal-modules, entityreference

我正在建立一个 Drupal 7 站点，要求具有“学生”角色的成员提交有关具有“教师”角色的成员的评论。我需要每个学生能够一次对所有老师进行评论，然后我需要构建一个视图，让每个老师只能看到与他们相关的评论。评论是较大申请表的一部分，因此内容类型中的某些字段需要对所有教师都可见。

我知道如何设置实体参考视图，以便学生可以从下拉列表中选择教师。我的问题是 -**我可以将文本字段与特定实体相关联吗？**如果我能做到这一点，我可以将教师的视图配置为仅显示被当前用户“标记”的学生反馈字段。

澄清一下：我不能制作一个学生会多次填写的内容类型 - 每个老师一次 - 因为学生只需要创建**一个帖子**。内容类型应如下所示：

**选择你的首选老师：（** *这是我一直在使用实体引用下拉菜单的地方）*
**解释你的首选：（** *这应该是一个文本字段，只有学生、管理员和老师在第一个下拉菜单中选择字段有权限查看）*

**选择您的第二选择教师：（** *这是另一个实体引用下拉菜单）*
**解释您的第二选择：（** *另一个文本字段，仅显示在第二个下拉字段中选择的学生、管理员和教师）*

我可以用规则模块来完成这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:22:47.437

尝试[字段权限](http://drupal.org/project/field_permissions)；它就是为此而建的。

> 字段权限模块允许站点管理员设置字段级权限以编辑、查看和创建任何实体上的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:50:06.370

创建内容类型“教师评估”，其中每个评估都与教师相关。“教师评估”内容类型的作者将是创建此评估的学生。

您可以使用[实体引用](http://drupal.org/project/entityreference)模块，它具有对视图模块的集成支持。

# java - java.io.StreamCorruptedException：无效类型代码：加载要读取的文件时抛出 00

> ID：13441350
> 
> 赞同：1
> 
> 时间：2012-11-18T15:06:19.427
> 
> 标签：java, file-io, minecraft

你好，stackoverflow，今天我为我的 minecraft 服务器编写了一个文件阅读器。我们通过文件使用了一种银行金融存储。由于我们已更改为 mysql，因此我需要读取一个和一个文件以获取我的用户拥有的数量。这是读者代码：

主文件：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.ObjectInputStream;

public class BankReader {

    /**
     * @param args
     */
    public static void main(String[] args) {
        if(args.length == 0){
            System.out.println("\n" +
                    "\n" +
                    "   Mangler parameters.\n" +
                    "   Usage: buildnorgebankreader [username]" +
                    "\n" +
                    "");
        } else {
            // Find file
            File f = new File("C:"+File.separator+"users"+File.separator
                    +"Hultberg"+File.separator+"Documents"+File.separator
                    +"E fra laptop"+File.separator+"bukkit"+File.separator
                    +"testserver"+File.separator+"bank", args[0]);
            if(!f.exists()){
                System.out.println("\n" +
                        "\n" +
                        "   fant ikke brukeren '"+args[0]+"' sin bank fil\n" +
                        "\n" +
                        "");
            } else {
                // Try read
                try {
                    BankData bank = (BankData)load(f);
                    System.out.println("På konto: "+bank.getBankAmount());
                } catch (Exception e) {
                    System.out.println("\n" +
                            "\n" +
                            "   kunne ikke lese brukeren '"+args[0]+"' sin bank fil\n" +
                            "\n" +
                            "");
                    e.printStackTrace();
                }
            }
        }
    }

    public static Object load(File binFile) throws Exception {
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(binFile));
        Object result = ois.readObject();
        ois.close();
        return result;
    }

} 
```

银行数据.java：

```
import java.io.Serializable;

public class BankData implements Serializable {

    private static final long serialVersionUID = -8106402506199069298L;
    private int bankamount = 0;

    public int getBankAmount() {
        return bankamount;
    }

    public void setBankAmount(int value) {
        bankamount = value;
    }

} 
```

这些文件的保存方式：

```
save(this.bankhandler.get(player.getName()), new File (this.plugin.getDataFolder() + "/bank/", player.getName());

public static void save(Object obj, File binFile) throws Exception {
    ObjectOutputStream oops = new ObjectOutputStream(new FileOutputStream(binFile));
    oops.writeObject(obj);
    oops.flush();
    oops.close();
} 
```

这一行：

```
this.bankhandler.get(player.getName()) 
```

返回播放器的 BankData 实例。

是的，保存的文件使用与此 BankData 具有相同的 serialversionUID，并且是抛出的异常：

```
java.io.StreamCorruptedException: invalid type code: 00
        at java.io.ObjectInputStream$BlockDataInputStream.readBlockHeader(Unknow
n Source)
        at java.io.ObjectInputStream$BlockDataInputStream.refill(Unknown Source)

        at java.io.ObjectInputStream$BlockDataInputStream.skipBlockData(Unknown
Source)
        at java.io.ObjectInputStream.skipCustomData(Unknown Source)
        at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
        at java.io.ObjectInputStream.readClassDesc(Unknown Source)
        at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
        at java.io.ObjectInputStream.readObject0(Unknown Source)
        at java.io.ObjectInputStream.readObject(Unknown Source)
        at no.buildnorge.hultberg96.BankReader.BankReader.load(BankReader.java:5
1)
        at no.buildnorge.hultberg96.BankReader.BankReader.main(BankReader.java:3
5) 
```

阿特，埃德文。

# vb.net - 如何使程序删除多行文本框文本中的行 - Visual Basic？

> ID：13441353
> 
> 赞同：0
> 
> 时间：2012-11-18T15:06:42.703
> 
> 标签：vb.net, textbox, multiline

我想制作一个程序，如果该行包含“0,00”，它将删除文本行。我在打印功能中用“vbCrLf”分隔行。

这是我想出的功能，有人可以纠正吗？

```
Public Sub IzVrstic1()
    Dim arrLines() As String = TextOut.Text.Split(CChar(vbLf))
    TextOut.Clear()
    For Each ln As String In arrLines           
        If Not ln.Contains("0,00") Then
            TextOut.Text &= ln & vbCrLf
        End If
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:11:48.370

只需使用[`Lines`数组](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx?cs-lang=vb "TextBoxBase.Lines 属性 (System.Windows.Forms)")和[`Array.FindAll`](http://msdn.microsoft.com/en-us/library/1kkxfxdd.aspx "Array.FindAll(T) 方法（系统）")：

```
TextOut.Lines = Array.FindAll(TextOut.Lines, Function(line) Not line.Contains("0,00")) 
```

# xml - 最简单的 SVG 线抽屉

> ID：13441362
> 
> 赞同：0
> 
> 时间：2012-11-18T15:08:44.553
> 
> 标签：xml, svg, line

我正在尝试找到最简单的 SVG 线抽屉。我正在解析线条的 svg 文件（或者两个 x 和 y 坐标），并使用它们在我正在创建的游戏中创建墙壁。我所需要的只是能够绘制直线并将其保存到 svg 文件中。输出应包括定义线的两个 x 和 Y 坐标。如果我能够将文档的大小设置为我选择的大小（通常地图为 5k * 5k 像素），那也是最好的。

我希望找到的是一个非常简单的程序，我只需在编辑器中放置线条并保存为 SVG（或任何可以将两个 x 和 y 坐标真正定义为线条的格式）。我开始研究 inkscape 和其他一些工具，但它通常是我没有时间学习的非常高级的工具，而且我没有使用这些工具中 99.99% 的功能。

有人对适合我需要的程序有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:56:13.860

试试[SVG-edit](http://svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html)，它是一个基于浏览器的简单编辑器，链接是我认为符合您目的的演示站点。

选择线条工具，绘制线条，单击 SVG 按钮，获取 XML。

[谷歌代码的官方网站](https://code.google.com/p/svg-edit/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:26:00.700

SVG 只是一个具有精确词汇的 XML 文件。它需要一个带有根**svg**标签的文本文件：

```
<?xml version="1.0" ?>
<svg:svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 500 500">
        .... Lines here
</svg:svg> 
```

要制作一条简单的线，您可以使用起点 (x1,y1) 和终点 (x2,y2) 以及样式来定义它。满足您的需求的最简单方法是指定“stroke”

```
<svg:line x1="0" y1="0" x2="500" y2="500" style="stroke:black"/> 
```

您可以使用“多边形”或“矩形”进行更复杂的绘制

创建解析器以将具有行规范的文件或文本框中的数据转换为 svg 很简单

致敬，

# java - 自动换行在 JTextArea 中不起作用

> ID：13441363
> 
> 赞同：1
> 
> 时间：2012-11-18T15:08:45.077
> 
> 标签：java, swing, jtextarea, word-wrap

为 JTextArea 提供的自动换行方法在我的程序中不起作用。为什么它不起作用？我该如何解决？这是代码：

```
 text= new JTextArea(15,65);

    text.setWrapStyleWord(true); // word wrapping enabled

    text.setPreferredSize(new Dimension(getPreferredSize())); 
```

这是屏幕截图。最后一个词超出框架。 ![在此处输入图像描述](../Images/c604b097790f0c2ddc758ca0345c3f38.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T15:31:59.897

以下 SSCCE 可让您试验这两种设置。在这里你可以看到`setWrapStyleWord`如果你不`setLineWrap`先调用 using 是没有效果的。这也记录在`setWrapStyleWord`.

可读形式的最佳结果是将它们都设置为 true。

![在此处输入图像描述](../Images/0f7727a593fd31f7ce73da418d9b3799.png)

```
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.WindowConstants;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

public class TextAreaDemo {

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame testFrame = new JFrame( "TestFrame" );

        final JTextArea textArea = new JTextArea( 15, 65 );
        testFrame.add( new JScrollPane( textArea ) );

        final JCheckBox wordWrap = new JCheckBox( "word wrap" );
        wordWrap.setSelected( textArea.getWrapStyleWord() );
        wordWrap.addItemListener( new ItemListener() {
          @Override
          public void itemStateChanged( ItemEvent e ) {
            textArea.setWrapStyleWord( wordWrap.isSelected() );
          }
        } );
        testFrame.add( wordWrap, BorderLayout.NORTH );
        final JCheckBox lineWrap = new JCheckBox( "line wrap" );
        lineWrap.setSelected( textArea.getLineWrap() );
        lineWrap.addItemListener( new ItemListener() {
          @Override
          public void itemStateChanged( ItemEvent e ) {
            textArea.setLineWrap( lineWrap.isSelected() );
          }
        } );
        testFrame.add( lineWrap, BorderLayout.SOUTH );

        testFrame.pack();
        testFrame.setDefaultCloseOperation( WindowConstants.DISPOSE_ON_CLOSE );
        testFrame.setVisible( true );
      }
    } );

  }
} 
```

# objective-c - 在没有分配的情况下访问另一个类中的方法

> ID：13441364
> 
> 赞同：0
> 
> 时间：2012-11-18T15:09:02.137
> 
> 标签：objective-c, cocos2d-iphone

我已经在 HelloWorldLayer 类中初始化了一个方法播放器方法（从 NSObject 继承）。我想以不需要分配它们的方式声明同一类的其他方法。例如：

播放器.mm

```
-(id)spritePlayer:(CCLayer *)parentLayer 
                     inWorld:(b2World *)world
{
    creation of sprite body and other stuff
} 
```

我想在联系人监听器类中使用此方法，但我已将其声明为播放器类：

```
-(void) touchingFix:(b2Fixture *)touchedFix
{
    bodyTouched=TRUE;
    bodyFix=touchedFix;
} 
```

在 Contact Listener 类中，我只能通过以下方式访问它：

```
[[Player alloc] touchingFix:fixtureA]; 
```

我不能以某种方式访问​​它而不用另一种方法分配它吗？如果是，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:13:47.243

改成类方法：去掉方法前面的'-'，改成'+'

```
+(void) touchingFix:(b2Fixture *)touchedFix
{
    bodyTouched=TRUE;
    bodyFix=touchedFix;
} 
```

您可以使用类名而不是指向类实例的指针来访问类方法：

```
[Player touchingFix:fixtureA]; 
```

# asp.net - MVC DropDownListFor - 用户代码未处理 NullReferenceException

> ID：13441368
> 
> 赞同：4
> 
> 时间：2012-11-18T15:09:31.667
> 
> 标签：asp.net, asp.net-mvc

我是 asp.net，MVC 的新手。我正在尝试填充我的下拉列表。我为此找到了以下解决方案。 [如何编写一个简单的 Html.DropDownListFor()？](https://stackoverflow.com/questions/3057873/how-to-write-a-simple-html-dropdownlistfor)我正在尝试 BARAT 的解决方案，但面临 NullReferenceException 错误。以下是我的代码。

```
<%: Html.DropDownListFor(model => model.CreditCardType,
        new SelectList(
            new List<Object>{
            new { value = 0, text="VISA"},
            new { value = 1, text="Master"},
            new { value = 2, text="Debit"}},
            "value",
            "text",
            Model.CreditCardType)
            )%> 
```

ErrorDetail：对象引用未设置为对象的实例。

谁能帮帮我吗？我可能会犯一些小错误，但无法修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:35:17.390

感谢 LostDreamer 的评论。我对我的代码进行了以下更改，它现在可以工作了。我不知道为什么 Mode.CreditCardType 不起作用。在参考资料中，他们使用了相同的东西，但在我的情况下不起作用。无论如何，以下是解决方案。

```
  模型.CreditCardType,
        新的选择列表（
            新列表{
            新的 { 值 = 0, text="VISA"},
            新的 { 值 = 1, text="Master"},
            新的 { value = 2, text="Debit"}},
            “价值”，
            “文本”，
            “签证”）
            )%>

```

# sql-server - 为 SQL Server 中的全文索引选择合适的语言

> ID：13441370
> 
> 赞同：0
> 
> 时间：2012-11-18T15:10:09.903
> 
> 标签：sql-server, full-text-indexing

我想在我的表中添加一个匈牙利语列，并且我想对其进行全文索引。

问题是 SQL Server 没有注册匈牙利语，我找不到微软关于什么是最好的语言可供选择的任何好的提示。

以下是[支持的语言](http://technet.microsoft.com/en-us/library/ms176076.aspx)

这是[我发现的最好的提示](http://technet.microsoft.com/en-us/library/ms142507.aspx#breaking)。

该文本特定于西方语言，但匈牙利语不是西方语言。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:14:17.577

显然，最接近匈牙利语的广为人知的语言是芬兰语[（见这里）](http://wiki.answers.com/Q/What_is_the_closest_language_to_Hungarian)。不幸的是，SQL Server FTS 似乎也不支持芬兰语[（见这里）](http://technet.microsoft.com/en-us/library/ms176076.aspx)。

您始终可以选择创建自己的分词器和词干分析器并将其加载到 SQL Server FTS。有关如何为匈牙利语执行此操作的更多信息，请参阅此[SO 帖子](https://stackoverflow.com/questions/7123546/is-there-such-a-thing-as-third-party-sql-server-word-breaker-for-hungarian-langu)。当然，做这样的事情将是一项重大的任务，但我认为可能没有更好的选择。

# jquery - jQuery.timeago.js cdn 回退到本地 js

> ID：13441374
> 
> 赞同：0
> 
> 时间：2012-11-18T15:10:37.500
> 
> 标签：jquery, html

正如标题所说，有人知道怎么做吗？目前我正在使用

```
http://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/0.11.4/jquery.timeago.js 
```

但我正在寻找一种回退到本地 js 的解决方案，但我不知道如何去做。

**额外的**

已经有 jquery 的解决方案

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>-->
<script>!window.jQuery && document.write(unescape('%3Cscript src="javascripts/jquery-1.8.2.min.js"%3E%3C/script%3E'))</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:15:08.173

像这样做：

```
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-timeago/0.11.4/jquery.timeago.js"></script>
<script>!$.fn.timeago && document.write(unescape('%3Cscript src="javascripts/jquery.timeago.js"%3E%3C/script%3E'))</script> 
```

策略其实是一样的，检查 jQuery 模块的方式是使用`$.fn.pluginName`.

# java - 在 Java Serlvet 中处理 URL

> ID：13441382
> 
> 赞同：1
> 
> 时间：2012-11-18T15:11:22.910
> 
> 标签：java, http, url, servlets

我对 servlet 相当陌生，如果 uri 与某个路径匹配，我处理来自客户端的响应的方式是：

```
public class EntryServlet extends HttpServlet
{
  public void doGet (HttpServletRequest request, HttpServletResponse response) 
    throws IOException
  {
    String uri = request.getRequestURI ();

    if (uri.matches ("/1")) {
      do something....
    } else if (uri.matches ("/2")) {
      do something else.....    
    } else {
      throw error message...
    }
  }
} 
```

这仅在我的 Web 服务有几个页面时才有效。但是假设我有 50 个 xml 文档，我想将 exmaple.com/1 映射到一个 xml ...到 example.com/50 到另一个 xml。现在如果有 50 个 if else 语句来处理每个资源，那将是一个糟糕的设计。有什么更好的方法来实现这一点？我试图在没有第三方应用程序/插件/框架的情况下纯粹在 java 中做到这一点

更新：我只使用一个带有后台线程的 servlet。本质上是处理文件的客户端请求，后台线程处理处理并将 xml 文档存储在数据库中。我希望每个 xml 文档都成为 Web 服务上的资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:19:32.857

您给出了“我想映射”的答案，所以让我们使用 Map

你有 2 个选项（我现在看到的）

1：您将“/ 1”作为键并将字符串作为映射到您的 xyz.xml 的值

2：您将“/ 1”作为键并放置一个实现“Executor”接口的对象...

在这两种情况下，您都会查找键的值，然后使用值对象返回有用的东西。

把它放在你的 Servlet 的 init 中并用你的对象填充它：

```
Map<String,String> myActions = new HashMap<String,String>();
myActions.put("/1","one.xml");
..... 
```

现在你可以这样做：

```
String uri = request.getRequestURI ();

if (myActions.containsKey(uri)) {
   String value = myActions.get(uri);
   do something with value
} else {
   throw error message...
} 
```

您可以使用实现此功能的对象轻松地将其更改为选项 2：

```
public interface Action {
    String execute(HttpServletRequest req, HttpServletResponse res) throws ServletException,
            IOException;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:32:37.387

答案可能取决于您要如何处理 URI 中的信息。在编写 REST 风格的应用程序时，URI 是将信息传递给应用程序的主要方式之一。因此，如果您可能想重新考虑您对其他软件包的厌恶，因为 REST API 非常受欢迎是有充分理由的。

坚持使用普通的 Servlet，假设我们有 50 个 xml 文档，我们希望根据通过 URL 传递的 id 号来提供这些文档。我们可以在数据库中存储一个表，该表指示 id 号和文档之间的对应关系。或者我们可以将这些数据存储到 CSV 文件中。无论哪种方式，对于这样一个相对较小的表，我都会在 Servlet 启动时将整个表加载到内存中。您可以将代码放在 init() 方法中以将数据加载到您的应用程序中。

然后我们有这样的事情：

```
static HashMap<Integer, String> fileMap;
public void init() {
    fileMap = new HashMap<> ();
    fileMap.put(1,"thing1.xml");
    fileMap.put(2,"thing2.xml");
    fileMap.put(3,"Otherthingy.xml");
} 
```

现在您可以在 doGet 方法中编写更简洁的代码。

```
public void doGet (HttpServletRequest request, HttpServletResponse response) 
                               throws IOException  {
        String uri = request.getRequestURI();
        int slash = uri.indexOf("/");
        if(slash+1 == uri.length())
            //throw an error

        String idString = request.getRequestURI().substring(slash+1);
        int id = Integer.parseInt(idString);
        //should put this in a try catch block and throw an error if it is not a number.
        String requestedFile = fileMap.get(id);
        if(requestedFile == null)
            //throw some error.
        // Do whatever you need to do with the file.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T15:17:09.513

你应该

1.  将每个 URI 特定逻辑移动到不同的 servlet。
2.  使用 Java Servlet Specification 中的 servlet 映射概念并在 web.xml 中定义以下内容

    ```
    <!- Define the servlets here, ofcourse you should use meaningful names -->
    <servlet>
        <servlet-name>servlet-1</servlet-name>
        <servlet-class>com.vikdor.webapps.ServletForURI1</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>servlet-2</servlet-name>
        <servlet-class>com.vikdor.webapps.ServletForURI2</servlet-class>
    </servlet>
    ....

    <!- Map the servlet to the URL pattern -->
    <servlet-mapping>
        <servlet-name>servlet-1</servlet-name>
        <url-pattern>/1/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>servlet-2</servlet-name>
        <url-pattern>/2/</url-pattern>
    </servlet-mapping>
    .... 
    ```

这会将路由逻辑推送到 web.xml 并且每个 servlet 执行特定的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T15:20:18.267

您可以在您的 web.xml uri 模式中指定路由到特定的 servlet 类。原谅我糟糕的 servlet 名称。

```
<servlet>
    <servlet-name>processUserXml</servlet-name>
    <servlet-class>com.example.server.ProcessUserXml</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>processUserXml</servlet-name>
    <url-pattern>/processuser</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>processItemXml</servlet-name>
    <servlet-class>com.example.server.ProcessItemXml</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>processItemXml</servlet-name>
    <url-pattern>/processitem</url-pattern>
</servlet-mapping> 
```

因此，当用户调用特定的 uri 时，它不会接受来自单个网关的 uri 请求并通过`if`语句路由它们（就像您现在所做的那样），它会被路由到适合您的 servlet 类。因此，调用 uri`/processuser`会将调用路由到`ProcessUserXml`servlet 类`doGet`方法（或者`doPost`，如果它已定义并且这就是用户进行 HTTP 调用的方式）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T15:24:46.420

使用框架。这就是他们的目的。我偏爱[Spring MVC](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html)，但对于像这样的基本用例，任何现代的东西都应该没问题。第一次设置它可能会感觉很痛苦，但是一旦配置好，开发就会*更快*，*更*易于维护。

*编辑：*我刚刚注意到原始问题说不要使用任何框架/库。我仍然坚持这个答案，尽管大多数时候这是一个坏主意。如果你真的需要，那么你可以按照其他一些人的建议创建地图，但从长远来看，它是不可维护的，所以尽可能避免它。

# eclipse - 如何使用 Eclipse MAT 进一步挖掘内存泄漏

> ID：13441391
> 
> 赞同：1
> 
> 时间：2012-11-18T15:12:44.253
> 
> 标签：eclipse, eclipse-mat, mat

我有一个问题，ScheduledThreadPoolExecutor 最终会处理 300 万个未来任务。我正在尝试查看什么类型的任务，以便我可以前往安排该任务的位置，但我不确定如何从该屏幕获取任何信息（我尝试右键单击这些未来的任务并在菜单中选择各种选项） . gui中似乎缺少一些东西，比如指向实际可运行文件的链接或其他东西......

关于如何进一步深入研究的任何想法？

![在此处输入图像描述](../Images/a1a2cfa8077af014d12872ec4ff8e7a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:42:49.400

## 一些一般的东西

您需要知道，如果您有一个可移植堆转储（phd，[请参阅此处的类型](http://memoryanalyzer.blogspot.co.at/2010/01/heap-dump-analysis-with-memory-analyzer.html)），那么它不包含实际数据（原语），因此您可以仅根据参考映射（哪些类型持有参考其他类型）。

您可以尝试[OQL](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.mat.ui.help/reference/oqlsyntax.html)。这是一种类似 SQL 的语言，您可以使用它来查询您的对象。

一个例子：

```
select * from java.lang.String s where s.@retainedHeapSize>10000 
```

这会返回所有大于 ~10k 的字符串。您还可以制作一些功能（例如这里的[聚合](https://stackoverflow.com/a/9469829/337621)）。

你可以试一试。

## 至于现在的问题

如果您检查 FutureTask 源（这里是下面的 JDK6）：

```
public class FutureTask<V> implements RunnableFuture<V> {
    /** Synchronization control for FutureTask */
    private final Sync sync;

...
    public FutureTask(Callable<V> callable) {
        if (callable == null)
            throw new NullPointerException();
        sync = new Sync(callable);
    }
...

    public FutureTask(Runnable runnable, V result) {
        sync = new Sync(Executors.callable(runnable, result));
    } 
```

实际的 Runnable 由 Sync 对象引用：

```
 private final class Sync extends AbstractQueuedSynchronizer {
        private static final long serialVersionUID = -7828117401763700385L;

        /** State value representing that task is running */
        private static final int RUNNING   = 1;
        /** State value representing that task ran */
        private static final int RAN       = 2;
        /** State value representing that task was cancelled */
        private static final int CANCELLED = 4;

        /** The underlying callable */
        private final Callable<V> callable;
        /** The result to return from get() */
        private V result;
        /** The exception to throw from get() */
        private Throwable exception;

        /**
         * The thread running task. When nulled after set/cancel, this
         * indicates that the results are accessible.  Must be
         * volatile, to ensure visibility upon completion.
         */
        private volatile Thread runner;

        Sync(Callable<V> callable) {
            this.callable = callable;
        } 
```

所以在 GUI 中打开 Sync 对象（在你的图片中没有打开），然后你可以检查 Runnables。

我不知道您是否可以更改代码，但通常最好总是限制执行程序使用的队列大小，因为这样可以避免泄漏。或者您可以使用一些持久队列。如果您应用限制，您可以定义拒绝策略，例如拒绝、在调用者中运行等。有关详细信息，请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。

# python - Python：如何在 for 循环中创建新变量？

> ID：13441394
> 
> 赞同：5
> 
> 时间：2012-11-18T15:12:57.957
> 
> 标签：python

我正在尝试在一个循环中创建几个数组并可以进一步访问它们。我不明白为什么我可以在循环内修改和打印它们，但在循环之外却说变量不存在。

```
for i in range (0,3):
    a_i=[i]
    a_i.append(i+1)
    print a_i
print a_1 
```

有没有人可以给我一个关于如何解决这个问题的建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T15:16:50.027

变量名称是按原样使用的标记，即变量不在其他变量名称中扩展。

你不能指望`a_i`等于`a_1`if `i == 1`。

为此，请使用数组或字典。

```
a = {}
for i in range (0,3):
    a[i] = [i]
    a[i].append(i+1)
    print a[i]
print a
print a[1] 
```

# cakephp - 如何使用 belongsTo 关联向数据库添加索引

> ID：13441396
> 
> 赞同：0
> 
> 时间：2012-11-18T15:13:22.547
> 
> 标签：cakephp

我正在寻找将 id 添加到数据库表的最佳实践。作为一个例子，我有一个有许多食谱的成员（模型）。Recipe 模型声明它属于成员：

```
public $belongsTo = array(
    'Member' => array(
        'className' => 'Member',
        'foreignKey' => 'member_id',
    )
); 
```

我希望这在将新食谱保存到数据库时就足够了，但我发现 cake 无法自行确定关系，因为我收到错误消息（“一般错误：1364 字段'member_id'没有默认值值”）使用添加时：

```
public function add() {
    if ($this->request->is('post')) {
        $this->Recipe->create();
        if ($this->Recipe->save($this->request->data)) {
            $this->Session->setFlash(__('The recipe has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The recipe could not be saved. Please, try again.'));
        }
    }
} 
```

现在，在这种情况下，我可以通过添加轻松解决问题

```
$this->request->data['Recipe']['member_id'] = $this->Auth->user('id'); 
```

但一般来说，我要添加的 id 不会与 Auth 数据一起存储。所以我想知道在保存属于其他东西的东西时如何访问 id。

编辑：我认为我的问题可能措辞不够好。我将重申我正在寻找的内容：

假设用户有很多 A，其中有很多 B，其中有很多 C。C 属于 B、A 和用户（C 的表包含 user_id、a_id 和 b_id）。用户登录，然后选择某个 A，然后选择某个 B。用户现在想要添加一个新 C。获取新 C 条目的所有 id 值的最佳方法是什么？我只是设置了一堆会话变量吗？它们都应该在 URL 中传递吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:49:35.217

您需要提供要保存在数据库中的任何信息。这意味着您要么使用已经声明的身份验证信息，要么通过可以从所有可用成员中进行选择的表单获取信息。无论哪种方式，信息都必须来自某个地方。它不能无中生有地创造自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:08:15.490

如果用户正在选择或选择 A、B 或 C，那么您可以通过某种方式存储他们的数据并进行处理。

通常，常用的方法是使用表单。如果您使用 Javascript，您可以设置隐藏输入，或者如果您使用 AJAX，只需在其中使用它们来调用最终的 Cake 函数。

您必须查看用户如何选择它们，然后将该 ID 存储在某个变量中以使用它。发布、获取、会话、Cookie...

# tree - 如何检查最小生成树

> ID：13441397
> 
> 赞同：2
> 
> 时间：2012-11-18T15:13:25.310
> 
> 标签：tree, minimum, minimum-spanning-tree, spanning-tree

如果给定的树是 MST，我如何检查线性时间 O(n)？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T18:43:58.553

您熟悉 Union-Find 流程吗？如果你只是得到一**棵树**，你只需要检查它是否**连通图**。我的意思是只查询它是否只有一个组件。否则维护一个 map[ `pair<int,int>`, int] 或类似的散列库来存储两个节点之间的最小权重，并比较给定树的每条边是否具有最小权重。如果没有，那么您确定它不是 MST，否则您必须查找它是否已连接。如果是，那么它的 MST。

在联合查找中使用树短路。并且要查询树是否连接，您可以在联合之前轻松检查每条边，如果它已经联合原因，那么您确定有一个循环并且它根本不是树，所以不是 MST。

# php - PHP将本地数组视为全局

> ID：13441398
> 
> 赞同：1
> 
> 时间：2012-11-18T15:13:28.307
> 
> 标签：php, variables, global, local

我有一个像这样的foreach：

```
foreach ($posts as $post) {

    $postArray[] = array(
    "title" => $post->title,
    "date" => date("d.m.Y", $post->created),
    // ... etc
  );

  var_dump($postArray);
} 
```

`$postArray`在这个循环之外的任何地方都没有被删除，但是每个循环迭代都是添加到现有数组中，就好像这个变量是全局的，而不是创建一个新的！

这是 PHP 设置吗？请记住，我并没有真正改变任何默认 WAMP 给我的设置。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:15:53.383

它不是全局变量，而是您的语法编写方式，它在第一次迭代后变为全局变量。这是因为您使用的`array_push`是`[]`. 通常我们用它作为同义词`array_push()`

你想做的是这个——

```
$postArray = array(
  ...
); 
```

这样，在每次迭代中，您都会获得一个全新的`$postArray`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:19:00.210

PHP 具有函数级范围，而不是块级范围。如果此代码不在函数/类方法中，或者它是函数的局部变量，而不是循环，则该变量确实是全局变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T15:17:13.160

`$myArray[] = $newVariable;`将追加到数组。

如果您想要一个新数组，只需在每个循环开始时重新声明或清空数组。

```
$myArray = array();
$myArray[] = $data; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-18T15:18:55.730

foreach 仅适用于数组和对象，当您尝试在具有不同数据类型的变量或未初始化的变量上使用它时会发出错误。

这里我们使用本身支持数组的 foreach 。

# asp.net - 在 asp.net 中从 mysql 中提取时的日期问题

> ID：13441399
> 
> 赞同：0
> 
> 时间：2012-11-18T15:13:38.587
> 
> 标签：asp.net, .net

我的 mysql 数据库中有一个日期列，用于存储

```
1999-03-30 
```

作为日期。

当我通过以下代码提取值时使用网络服务

```
DOB = Convert.ToDateTime(reader["DOB"]), 
```

屏幕上的输出是

```
/Date(922732200000)/ 
```

如何获得 1999-03-30 以及这个值是多少 /Date(922732200000)/...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:07:07.063

在 mysql 中处理日期的最简单方法是使用 UNIX TIMESTAMP 来存储和检索日期。例如：

插入日期的查询应该是：

```
string query="insert into myTable(name,date) values ("StackOverflow",unix_timestamp('yyyy-mm-dd HH:mm:ss')"; 
```

例如。如果你想输入当前的日期时间，这个查询可以重写为：

```
string query="insert into myTable(name,date) values ("StackOverflow",unix_timestamp(current_timestamp)"; 
```

当您从表中检索数据时，查询应该是：

```
string queryToretrivedata="select name, from_unixtime(date) as DOB from myTable"; 
```

当 MySqlreader 读取数据时，函数中的语句应该是：

```
DateTime DOB= Convert.ToDateTime(reader["DOB"].ToString()); 
```

此外，如果您想将此 dateTime 转换为字符串，您可以使用

```
string DateInString==DOB.ToString("yyyy-MM-dd HH:mm:ss"); //For 24 hour Format

string DateInString==DOB.ToString("yyyy-MM-dd hh:mm:ss tt"); //For 12 Hour format 
```

# ruby-on-rails - Cloudinary URL 与 Mongoid 3 中断？

> ID：13441402
> 
> 赞同：0
> 
> 时间：2012-11-18T15:13:51.347
> 
> 标签：ruby-on-rails, file-upload, mongoid, carrierwave, cloudinary

我使用了 Cloudinary gem，到目前为止，它作为`Photo`Mongoid 中的嵌入式模型运行良好：

```
class PhotoUploader < CarrierWave::Uploader::Base
  include Cloudinary::CarrierWave
  def public_id
    return model.id
  end
end

class Photo
  include Mongoid::Document
  include Mongoid::Timestamps  
  embedded_in :place#, :inverse_of => :photos, :autosave => true
  mount_uploader :image, PhotoUploader
  #...
end 
```

但是，升级到 Mongoid 3 后，获取图像 URL 不再有效。考虑这个照片模型：

```
1.9.3p194 :019 > p
 => #<Photo _id: 507bc3c82a450b14bd00e00a, _type: nil, created_at: 2012-10-15 08:05:28 UTC, updated_at: 2012-10-15 08:05:28 UTC, image_filename: nil, caption: nil, original_url: "http://www.reactionny.com//images/assets/101755_316529.JPG", image: "v1350288333/507bc3c82a450b14bd00e00a.jpg"> 
1.9.3p194 :020 > p.image
 => /assets/fallback/default.png 
1.9.3p194 :021 > p.image_url
 => "/assets/fallback/default.png" 
1.9.3p194 :022 > p['image']
 => "v1350288333/507bc3c82a450b14bd00e00a.jpg" 
```

为什么它不再以 形式返回完全限定的 Cloudinary URL `http://res.cloudinary.com/XXXXXX/image/upload/v1350288842/507bc5ca2a450b14bd00e896.jpg`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:44:12.737

似乎将`carrierwave-mongoid`保存图像的字段的名称从`yyy`更改为`yyy_filename`。`image_filename`在您的模型检查打印中，您可以看到`nil`.

与 Cloudinary GEM 和 CarrierWave 的集成似乎运行良好，但您需要迁移模型。相关字段过去称为“图像”，现在称为“图像文件名”。您可能应该更新您的模型以使用新的字段名称并复制所有值。

另一种可能的解决方案是使用以下方法专门设置属性名称`mount_on`：

```
mount_uploader :image, PhotoUploader, mount_on: :image 
```

# c# - 增加字符串数组值+1？

> ID：13441404
> 
> 赞同：0
> 
> 时间：2012-11-18T15:14:00.097
> 
> 标签：c#, windows, arrays, forms

**我将如何增加这个数组 +1 的值？**

我有一些代码，但它没有得到 +1 该数组的值。

+1 我的意思是数组值 1 高于那个值，所以如果我的数组包含以下单词：嗨，嗨，你好，而不是显示嗨，我想要它，所以显示嗨。

**这是我拥有的代码，但它没有向上移动它+1：**

```
string[] u = getBetweenAll(vid, "</id><published>", "</published><updated>");
                for (int i = 0; i < listView1.Items.Count; i++)
                {

                    string input = u[i] + 1;
                    int index = input.IndexOf("T");
                    if (index > 0)
                        input = input.Substring(0, index);
                    listView1.Items[i].SubItems.Add(input);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:16:27.080

你的意思：

```
string input = u[i + 1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:20:47.613

```
 string input = u[i + 1]; 
```

你需要增加索引器

# android - Android如何在两个textview之间分割屏幕的全宽正好百分之五十？

> ID：13441405
> 
> 赞同：10
> 
> 时间：2012-11-18T15:14:00.737
> 
> 标签：android, textview, screen

我在一个相对布局中有两个 TextView。如果我想要那些总是（不同的屏幕分辨率，例如 540x960）每个 TextView 的宽度是整个 UI 宽度的 50%，如何设置 TextViews？我会将两个 TextView 的大小都设置为 UI 全宽的 50%。需要在不同的屏幕分辨率上拉伸 TextViews。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-06T07:42:47.720

**每当在水平**/**垂直**中平均分割一些视图，如（按钮，文本视图）

 ****android:weight Sum** / **android:layout_weight**技术使用...

必须记住这些技术必须仅**在线性布局**中支持的一件事，但是在这里您想使用**相对布局**，以便简单地将**线性布局**放在**相对布局**中。

必须遵守这些规则：

1> 将 **android:weight Sum**设置 为**线性布局**

2> 设置**android:layout_width**每个子视图在**“0dp”内**

3> 设置**android:layout_weight**每个子视图取决于多少子视图 & **android:weight Sum** (eg: android:weight Sum = "2" & two child view then layout_weight="1" , layout_weight="1")

前任：

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:weightSum="2" >

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="child View 1" />

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="child View 2"/>
        </LinearLayout>
    </RelativeLayout> 
```

如果 Layout Orientation 为**Vertical**则只设置**android:layout_height**为**"0dp"**而不是**android:layout_width**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T15:23:29.427

您可以尝试使用权重在相对布局中创建线性布局，然后设置`android:layout_width="fill_parent"`和`android:weightSum = 2`和`android:orientation="horizontal"`，然后将 textview 放在线性布局内并设置每个 textview 的权重 1。

```
<RelativeLayout
android:layout_width = "fill_parent" 
android:layout_height = "wrap_content">
<LinearLayout 
android:layout_width = "fill_parent" 
android:layout_height = "wrap_content" 
android:orientation="horizontal"
android:weightSum = "2">
            <TextView
                android:layout_width = "fill_parent"
                android:layout_height = "wrap_content"
                android:text = "YOUR FIRST TEXT"
                android:weight = "1"
            />
            <TextView
                android:layout_width = "fill_parent"
                android:layout_height = "wrap_content"
                 android:text = "YOUR SECOND TEXT"
                android:weight = "1"
            />
        </LinearLayout>
</RelativeLayout> 
```

权重总和将用于测量 textview 的部分，例如如果您给出权重总和 3 并给出 1 textview weight = 2 和另一个 textview weight = 1 布局将是 2/3 (66.666%) 和 1/3 ( 33.3333%) 所以如果你设置它 2 并给每个 textview weight = 1 它应该是 50% 和 50%

它对我有用，如果您有任何问题，请随时在评论中提问：)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T15:31:14.330

为两个s设置`layout_width`to并给他们相同的like并且应该这样做（或者不给任何一个 a ）。`fill_parent``TextView``layout_weight``1.0``layout_weight`

这样的事情应该可以解决问题：

```
<LinearLayout 
 android:layout_width = "fill_parent"
android:layout_height = "wrap_content"
 orientation = "horizontal">
        <TextView
            android:layout_width = "fill_parent"
            android:layout_height = "wrap_content"
            android:text = "Text 1"
        />
        <TextView
            android:layout_width = "fill_parent"
            android:layout_height = "wrap_content"
            android:text = "Text 2"
        />
    </LinearLayout> 
```**

# asp.net - 使用 ASP.NET 比较 SQL Server 表和 Excel 文件中的西里尔文数据

> ID：13441408
> 
> 赞同：1
> 
> 时间：2012-11-18T15:14:27.070
> 
> 标签：asp.net, sql-server, arraylist

使用 ASP.NET，我需要将从 Excel 文件加载的数据与 SQL Server 表中的数据进行比较。它是用西里尔文写的数据。

基本上，在脚本创建一个填充了数据库表中数据的数组列表后，它会打开 Excel 文件，并列出其中一列的数据。对于存储在 Excel 单元格中的每个数据，我必须在提到的数组列表中找到位置。

我在两个源中都有相同的数据，但脚本返回根本没有相同的数据。我想这与西里尔字母有关。

用于读取 Excel 单元格并与数组列表进行比较的部分代码如下所示：

```
 OleDbConnection con = new OleDbConnection(connectionString);
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Connection = con;
        OleDbDataAdapter dAdapter = new OleDbDataAdapter(cmd);
        DataTable dtExcelRecords = new DataTable();
        con.Open();
        DataTable dtExcelSheetName = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        string getExcelSheetName = dtExcelSheetName.Rows[0]["Table_Name"].ToString();
        cmd.CommandText = "SELECT * FROM [" + getExcelSheetName + "]";

        Page.Trace.Write(getExcelSheetName);

        dAdapter.SelectCommand = cmd;
        dAdapter.Fill(dtExcelRecords);
        con.Close();

        foreach (DataRow row in dtExcelRecords.Rows)
        {
            Response.Write(row[0]);
            Response.Write(" ");
            Response.Write(MyClass.areasList.IndexOf(row[0])); // always returns -1

            Response.Write(Environment.NewLine);
            Response.Write("<br />");
        } 
```

你能帮我解决这个问题吗？先感谢您！

# jquery - 使用同位素过滤和 InfiniteScroll 重复页面/内容加载

> ID：13441417
> 
> 赞同：3
> 
> 时间：2012-11-18T15:15:09.313
> 
> 标签：jquery, wordpress, jquery-isotope, infinite-scroll

首先，我是一名 PHP 和 Javascript 新手，并且有人帮助我创建此代码以使用 Wordpress。我遇到的问题是它在到达底部时会加载一组重复的帖子。我已经在 hi 和 low 中搜索了代码可能有什么问题的迹象。

加载帖子类型的 PHP。

```
<?php
$paged = isset($_REQUEST['page'])?$_REQUEST['page']: 1;
$args = array('post_type' => 'wpsc-product', 'posts_per_page' => 24, 'post_status' =>      'publish', 'paged' => $paged, 'orderby' => 'title','order' => 'ASC' );  
if($search) {
$productIds = $wpdb->get_col("select DISTINCT ID from {$wpdb->posts} where post_type =      'wpsc-product' AND post_title  LIKE '%".$search."%' ");
 $args{'post__in'} = ($productIds)?$productIds:'no-data';
}
?>
<div id="container">
<?php       
$loop = query_posts( $args ); 
if( have_posts()) {
 while ( have_posts() ) : the_post();  
//wpsc_the_product_permalink().
$wpsc_product_category = get_the_product_category($post->ID);
$temporary = '';
$classname = '';
if($wpsc_product_category):
foreach($wpsc_product_category  as $value) {
$ParentCategory = $tempParentStorage["{$value->parent}"];
$temporary .= "{$value->slug} ";
$classname .= ($ParentCategory)? " $ParentCategory {$value->slug} ":" {$value->slug}";
}
endif;
?>

<div style='display:none' class="products<?php echo $classname; ?>" data-symbol="<?php     the_title(); ?>" data-category="<?php echo $temporary; ?>" ><a href="<?php echo          wpsc_the_product_permalink(); ?>" > 
<p><?php echo get_the_post_thumbnail($post->ID, 'medium'); ?></p>
<p class='product_title' ><?php the_title(); ?></p>
 </a>    
 </div>

 <?php 
 endwhile;
?>  
 </div><!--//container-->   

<?php if(!$search) { ?>
<div id='page_nav' >
<a href='?page=2'></a>
 </div>
 <?php } ?>
 <?php }
 else {
echo '<div class="products>No Product found</div>';
 }
$totalPages = $wp_query->max_num_pages;
wp_reset_query();   
?> 
```

这是到目前为止的javascript代码：

```
 <script language='javascript' >
    jQuery(function($){
   //IMPLEMENTING THE ISOTOPE PLUGIN
// modify Isotope's absolute position method
 var $container = $('#container');

var $optionSets = $('#options .option-set'),
$optionLinks = $optionSets.find('a');

 $optionLinks.click(function(){
    var $this = $(this);

    if ( !$this.hasClass('iam_child_category') ) {
        if(!$this.hasClass('iam_child_of_child_category')) {
              $('.child_filters li').removeClass('child_active_class').addClass('child_inactive_class');
              $('.iam_child_category').removeClass('selected');
        }
    }

    if ( !$this.hasClass('iam_child_of_child_category') ) {
      $('.child_filters_child li').removeClass('child_active_class').addClass('child_inactive_class');
      $('.iam_child_of_child_category').removeClass('selected');
    }

    // don't proceed if already selected
    /*if ( $this.hasClass('selected') ) {
      return false;
    }*/

    var $optionSet = $this.parents('.option-set');
    $optionSet.find('.selected').removeClass('selected');
    $this.addClass('selected');

    // filter items when filter link is clicked
    var selector = $(this).attr('data-filter');

    $(selector + '_child_li').removeClass('child_inactive_class').addClass('child_active_class');

    if(selector == '*') {
        $('.products').css('visibility','visible').hide().delay(200).fadeIn('slow');
    }
    else {
        $('.products').hide();
        $(selector).css('visibility','visible').hide().delay(200).fadeIn('slow');
    }
    return false;

 });

var currentPage = 1;
var lastPage = (<?php echo $totalPages; ?> == 0)?1:<?php echo $totalPages; ?>;   

//call the Infinite Scroll plugin via jQuery

$container.infinitescroll({
    navSelector  : '#page_nav',    // selector for the paged navigation 
    nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
    itemSelector : '.products',     // selector for all items you'll retrieve
    loading: {
        finishedMsg: 'No more products to load.',
        img: '<?php bloginfo('template_directory') ?>/images/ajax-loader.gif',
        msgText : 'Loading...'

      }
    },

    function( newElements ) {
      currentPage++;            
      if(currentPage == lastPage) { 
        jQuery(window).unbind('.infscr');   
        return false;
      }

      // hide new items while they are loading
      var $newElems = $( newElements ).css({ opacity: 0 });
      // ensure that images load before adding to Isotope layout
      $newElems.imagesLoaded(function() {
        // show elems now they're ready
        $newElems.animate({ opacity: 1 });
        $container('.insert', $newElems );
      });
    }
);

 });

//IMPLEMENTING THE INVIEW PLUGIN

jQuery(document).on("inview", ".products", function(e) {

  $("#container .products").each(function(e) {
    var $this = $(this);
    if(!$this.hasClass('loaded')) {
        $this.addClass('loaded');
        $this.css('visibility','visible').hide().delay(1*e).fadeIn('medium');

    }
   });

});
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:06:38.807

没关系。我想到了。我需要在阅读设置中指定我的“帖子页面”。

# dns - 自动子域注册

> ID：13441418
> 
> 赞同：2
> 
> 时间：2012-11-18T15:15:10.623
> 
> 标签：dns

我是 DNS 世界的新手，在 Internet 上做了一些阅读，想知道我是否得出了正确的结论。我想建立一个系统，用户可以自动创建现有注册域的新子域：

我的系统为不同的公司提供服务，这些服务托管在我的系统或某个云提供商中。让我们称我的系统为“服务”和一些公司“company1”。我想为“company1”提供我的服务，并让其用户通过“company1”新子域访问这些服务，而“company1”已经注册了域名 company1.com。我希望“company1”管理员用户在我的系统中注册他的公司时能够通过我的系统控制和选择子域，并使整个过程自动化。如果我理解正确：

1.  如果管理员想要使用像 services.company1.com 这样的子域，这将是一个问题，因为我需要更新我不知道他们是谁的 company1.com 的权威名称服务器，即使我有办法了解它们（通过阅读我发现我确实有办法），我不知道是否每个这样的名称服务器都允许来自某些外部来源的此类更新、连接问题等
2.  如果管理员想使用像 company1.services.com 这样的子域，那么我可以通过拥有自己的 dns 服务器来实现这一点，我将为其注册 services.com 域并实际管理我自己的所有这些公司子域dns服务器。这意味着尽管所有公司都必须在我的域 services.com 下拥有一个子域

如果我对 DNS 的工作原理有错误的看法，请纠正我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:45:45.683

## services.company1.com

要向您的客户提供此类域名，您将需要他们的合作。[许多公司通过要求您将别名（ CNAME 记录](http://en.wikipedia.org/wiki/CNAME_record)）指向特定服务器来提供这种功能。

### 具体用法示例

```
blog.company1.com.      3600    IN  CNAME   domains.tumblr.com.
shop.company1.com.      3600    IN  CNAME   myapp.herokuapp.com.
git.company1.com.       3600    IN  CNAME   bitbucket.org. 
```

以下是提供此功能的公司文档的一些链接：

*   [比特桶](https://confluence.atlassian.com/display/BITBUCKET/Associate+an+Existing+Domain+with+Your+Account)
*   [Heroku](https://devcenter.heroku.com/articles/custom-domains)
*   [棒棒哒](http://www.tumblr.com/docs/en/custom_domains)

### 示例客户端区域文件

因此，在您的情况下，您的客户 DNS 区域将包含以下内容：

```
services.company1.com.      3600    IN  CNAME   domains.services.com. 
```

`domains.services.com.`处理子域身份验证的服务器在哪里

## company1.services.com

要向您的客户提供*company1.services.com*，您不必管理自己的 DNS 服务器，您只需能够添加[通配符记录](http://en.wikipedia.org/wiki/Wildcard_DNS_record)以将所有子域指向您的应用程序。您的应用程序将负责按子域过滤您的服务。

### 示例服务区文件

例如（其中 0.0.0.0 是您的服务 IP 地址）：

```
*.services.com.     3600    IN  A   0.0.0.0 
```

# c - 双数组只存储整数

> ID：13441423
> 
> 赞同：2
> 
> 时间：2012-11-18T15:15:53.757
> 
> 标签：c, casting, int, double

我在这里有这段代码，我认为它应该可以工作，而且确实可以！除了虽然我声明了一个指向 double 类型数组的指针，但它总是存储 int，我不知道为什么。

首先，我有这个结构，它的定义如下：

```
struct thing {
    int part1;
    double *part2;
}; 
```

然后我用`struct thing *abc = malloc (sizeof(struct thing))`and`part1 = 0`和初始化这个东西`part2 = malloc(sizeof(double))`。

然后，我尝试在 double 数组的特定位置设置特定值。这适用于整数，但是当我尝试 0.5 时，它将值设置为 0。当我尝试 2.9 时，它将值设置为 2。我真的不知道为什么会这样。setValue 的代码如下所示：

```
struct thing *setValue (struct thing *t, int pos, double set){
    if (t->part1 < pos){ // check to see if array is large enough
        t->part2 = realloc (t->part2, (pos+1) * sizeof(double));
        for (int a = t->part1 + 1; a < pos + 1; a++)
            t->part2[a] = 0;
    t->part1 = pos;
    }
    t->part2[pos] = set; // ALWAYS stores an integer, don't know why
    return t;
} 
```

-- 编辑：所以这部分没有什么真正的恶意；但这是我的其余代码以防万一：

对我的 struct 事物进行操作的相关函数

```
#include "thing.h"
#include <math.h>
#include <stdio.h>
#include <stdlib.h>

struct thing *makeThing(){ // GOOD
    struct thing *t = (struct thing *) malloc (sizeof(struct thing));
    t->part1 = 0;
    t->part2 = malloc (sizeof(double));
    t->part2[0] = 0;
    return t;
}

struct thing *setValue (struct thing *t, int pos, double set){
    if (t->part1 < pos){ // check to see if array is large enough
        t->part2 = realloc (t->part2, (pos+1) * sizeof(double));
        for (int a = t->part1 + 1; a < pos + 1; a++)
            t->part2[a] = 0;
    t->part1 = pos;
    }
    t->part2[pos] = set; // ALWAYS stores an integer, don't know why
    return t;
}

double getValue (struct thing *t, int pos){
    if (pos <= t->part1){
        return t->part2[pos];
    }
    return 0;
} 
```

头文件：

```
#ifndef THING_H
#define THING_H

struct thing {
    int part1;
    double *part2;
};

struct thing *makeThing();
struct thing *setValue (struct thing *t, int pos, double set);
double getValue (struct thing *t, int pos);

#endif 
```

主文件：

```
#include <stdio.h>
#include "thing.h"

int main (void)
{
    struct thing *t = makeThing();
    setValue (t, 1, -1);
    setValue (t, 1, -2);
    setValue (t, 10, 1);
    setValue (t, 3, 1.5);

    printf ("%g\n", getValue (t, 0));
    printf ("%g\n", getValue (t, 1));
    printf ("%g\n", getValue (t, 2));
    printf ("%g\n", getValue (t, 3));
    printf ("%g\n", getValue (t, 4));
    printf ("%g\n", getValue (t, 5));
    printf ("%g\n", getValue (t, 6));
    printf ("%g\n", getValue (t, 7));
    printf ("%g\n", getValue (t, 8));
    printf ("%g\n", getValue (t, 9));
    printf ("%g\n", getValue (t, 10));

    return 0;
} 
```

在我的电脑上，打印出来的是：0 -2 0 1 0 0 0 0 0 0 1

编辑：事实证明，当我通过代码块编译它时，它可以工作......

最终，我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:38:19.910

> 在C中双转换为int？

不，它没有。当您将`double`值分配给对象 ot 类型`double`时，没有任何转换。

您的问题不在您显示的代码中；它在别的地方（你打印的方式，一些愚蠢`#define`的，一些其他的东西）。

哦！你真的应该确保`realloc()`s 工作。否则，用户可能会得到一个稍微错误的值，而不是一个错误......

*正如我在评论中所说，[您的代码在 ideone 上按预期工作](http://ideone.com/VPDK2i)。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T16:38:34.013

我认为您可能在打印时弄乱了格式说明符。确保具有正确数据类型的正确说明符。

我知道当我在我的 Objective-C 代码中更改数据类型时，有时会发生这种情况。:)

# d - 无法编译 GtkD SourceView 代码

> ID：13441424
> 
> 赞同：4
> 
> 时间：2012-11-18T15:15:53.790
> 
> 标签：d, archlinux, gtkd

我是 gtk 编程和 d 和学习使用 gtkd 源代码的演示的新手。当我尝试编译下面的代码时[我在archlinux上使用dmd-2.060和gtkd-2.0]。

```
/*
    Modified sourceview demo for learning gtk programming in d
*/

pragma(lib, "gtkd");
pragma(lib, "gtkdsv");
pragma(lib, "dl");

import gtk.MainWindow;
import gtk.Main;
import gtk.Widget;
//import gtk.TextView;

import gsv.SourceView;

import std.stdio;
import std.file;

/**
 * Demos for SourceView.
 * TODO on gsv: override methods from TextView, TextBuffer, etc
 */

class HelloWorld : MainWindow
{

    SourceView sourceView;
    //TextView textView;

    this()
    {
        super("GtkD SourceView");
        setBorderWidth(10);
        add(getSourceView());
        setDefaultSize(640,400);
        showAll();
    }

    private Widget getSourceView()
    {
        sourceView = new SourceView();
        return sourceView;

        //textView = new TextView();
        //return textView;
    }

}

void main(string[] args)
{
    Main.init(args);
    new HelloWorld();
    Main.run();

} 
```

我收到这样的错误

```
/usr/lib/libgtkdsv.a(SourceCompletionInfo.o):(.data+0x140): undefined reference to `_D3gtk8TextView12__ModuleInfoZ'
/usr/lib/libgtkdsv.a(SourceGutterRenderer.o):(.data+0xe8): undefined reference to `_D3gtk8TextView12__ModuleInfoZ'
/usr/lib/libgtkdsv.a(SourceGutterRenderer.o): In function `_D3gsv20SourceGutterRenderer20SourceGutterRenderer7getViewMFZC3gtk8TextView8TextView':
(.text._D3gsv20SourceGutterRenderer20SourceGutterRenderer7getViewMFZC3gtk8TextView8TextView+0x7e): undefined reference to `_D3gtk8TextView8TextView7__ClassZ'
/usr/lib/libgtkdsv.a(SourceGutterRenderer.o): In function `_D3gsv20SourceGutterRenderer20SourceGutterRenderer7getViewMFZC3gtk8TextView8TextView':
(.text._D3gsv20SourceGutterRenderer20SourceGutterRenderer7getViewMFZC3gtk8TextView8TextView+0x94): undefined reference to `_D3gtk8TextView8TextView6__ctorMFPS4gtkc8gtktypes11GtkTextViewZC3gtk8TextView8TextView'
collect2: error: ld returned 1 exit status
--- errorlevel 1 
```

但是，当我注释*SourceView*相关代码并取消注释*TextView*相关代码时，它编译并运行良好。

注意：此代码来自 sourceView gtkd 演示目录上的 SVTest.d 文件。

**编辑**：我正在做*dmd SVTest.d*进行编译，这给了我这个错误，现在我做了 *dmd -L-ldl -L-lgtkd -L-lgtkdsv SVTest.d*并且它编译得很好。现在，如果我删除 pragma 语句并尝试使用编译器标志进行编译，它会失败。我在这里有点困惑，D doc 说 pragma 是用于将信息传递给编译器！我需要编译指示和编译器标志来编译源代码吗？还是我做错了什么？

**更新**：确实 pragma 顺序很重要，我将 pragma 更改为此

```
pragma(lib, "gtkdsv");
pragma(lib, "gtkd");
pragma(lib, "dl"); 
```

现在我可以做

```
dmd main.d 
```

我原本想做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:27:33.227

我相信链接器标志的顺序很重要。gtkd 加载共享对象，并且需要 libdl，所以 -l-Ldl 需要在列表的第一位。（你在终端上做的）

尝试移动 pragma(lib, "dl"); 到第一个位置，看看是否有区别。

# java - Netty 上的 FileInputStream 是什么

> ID：13441426
> 
> 赞同：0
> 
> 时间：2012-11-18T15:16:03.273
> 
> 标签：java, netty

我想知道 Netty 上的 FileInputStream 是什么，因为我需要在文件上使用它！在这方面需要帮助！谢谢，米格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:17:38.700

如果要传输文件，请使用 DefaultFileRegion。

```
Channel channel =...
channel.write(new DefaultFileRegion(new FileInputStream(file).getChannel(), 0L, file.length()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:21:00.000

**-** 当`FileInputStream`您想要**读取****字节**`File`形式或读取**字节数组**等时使用......

# php - MySQL SELECT 语句只搜索了表中的 3 个字段

> ID：13441427
> 
> 赞同：1
> 
> 时间：2012-11-18T15:16:04.023
> 
> 标签：php, mysql, sql, select

我在使用表单中的用户输入搜索 MySQL 数据库表中的多个列时遇到问题。

数据库中的表称为车辆，有 4 个字段/列：年份、品牌、型号和选项

用户从我放入 $input 变量的表单中输入他们的搜索条件。

下面是我的代码，它不起作用。它返回一个布尔错误：

```
(Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given)

$query = ("SELECT * FROM vehicles WHERE year LIKE '%$input%' OR make LIKE '%$input%' OR model LIKE '%$input%' OR option LIKE '%$input%'");

$result = mysql_query($query); 
```

然而，当我从查询中删除最终的 OR 时，它工作正常，但只搜索年份、品牌和型号字段：

```
$query = ("SELECT * FROM vehicles WHERE year LIKE '%$input%' OR make LIKE '%$input%' OR model LIKE '%$input%'");

$result = mysql_query($query); 
```

如何获取查询以搜索所有 4 个字段/列？我错过了什么？

是否有更简单的方法可以搜索整个表格（表格中的所有列）以查找用户的输入？

非常感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:21:13.433

“选项”是 mysql 中的保留字，[请参见此处](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。因此，您的查询实际上失败并返回布尔值 false 而不是资源。重命名列或像这样在它周围使用``

```
$query = ("SELECT * FROM vehicles WHERE year LIKE '%$input%' OR make LIKE '%$input%' OR model LIKE '%$input%' OR `option` LIKE '%$input%'"); 
```

还要确保使用适当的转义来防止[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)。

# database - 路由匹配的数据库解决方案

> ID：13441428
> 
> 赞同：2
> 
> 时间：2012-11-18T15:16:12.710
> 
> 标签：database, gis, geospatial

我正在开发一个应用程序，让用户搜索从 A 点到 B 点的行程。它需要解决以下用例：

1.  查找从 A 点到 B 点的行程
2.  查找从其他点开始但经过 A 点到 B 点的旅行

我现在正在寻找最适合支持此类用例的数据库解决方案。

现在我们使用的是 MongoDB。但是我必须为第一个用例找出一个解决方法，我有一种感觉，用它来解决第二个用例是不可能的。

在我看来，所有支持空间特征的可用 noSql dbs 只允许在文档、节点等上使用一个地理空间索引。这对于向我展示从这一点起 5 公里半径内的所有商店等查询很好。

所以我正在寻找一种可以解决这两个用例的解决方案。有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:27:26.667

Also, if you choose to avoid the Database route (no pun intended), you could use `GeoTools` graphing Java library.

[http://docs.geotools.org/latest/userguide/extension/graph/index.html](http://docs.geotools.org/latest/userguide/extension/graph/index.html)

Here is some example code and data I produced myself to demonstrate how it can be used.

[http://usefulpracticalgeoblog.blogspot.ch/2012/09/geotools-routing.html](http://usefulpracticalgeoblog.blogspot.ch/2012/09/geotools-routing.html)

It is pretty flexible in terms of the spatial data formats that can be used to build the street network graph, and how the results can be outputted.

Then to find if the starting point of trip B is close to the pre-calculated route for Trip A, you could use `JTS (Java Topology Suite)`, which is part of the GeoTools library. Here is an example of the analysis you might use.

[https://gis.stackexchange.com/questions/7699/for-a-given-feature-find-the-closest-point-along-a-given-path](https://gis.stackexchange.com/questions/7699/for-a-given-feature-find-the-closest-point-along-a-given-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:17:42.160

确实可以使用 pgRouting。想到的第一个解决方案：当第一个用户进入纽约和哥伦布作为他旅行的起点和目的地时，执行路由查询并将路径存储为 PostGIS 线串几何。

当第二个用户在搜索表单中输入 From: Pittsburgh To: Columbus 时，将城市名称地理编码到位置并进行 PostGIS 查询，这些点（或城市边界）距离第一个用户的路线路径有多远。如果他们足够近并且第一个用户沿着合适的方向行驶，他们可以共享汽车。

第二个想法：在第一个用户输入行程详情后，执行路线查询并将所有通过路线传递的地名存储到数据库中。

这两种解决方案都可以通过 Postgres+PostGIS+pgRouting 轻松实现。pgRouting 的最大缺点是速度低（可以通过减少路由图中的数据来提高性能；路由速度不是那么重要等）。也可以将道路数据导出到外部文件；使用一些高速路由引擎（如 OSRM、MoNav 等）；如有必要，将结果写回 PostGIS。但这肯定需要更多的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:21:56.220

带有 postgis 和 pgrouting 的 Postgresql。你不需要别的。

# php - 使用 jQuery 或 php 获取 Pinterest 关注者数量

> ID：13441429
> 
> 赞同：-1
> 
> 时间：2012-11-18T15:16:17.487
> 
> 标签：php, javascript, jquery, counter, pinterest

我正在寻找一种在某个 Pinterest 帐户的 Pinterest 关注者的 div (#pinterest_count) 中显示文本编号的方法。您知道用 jquery 或 php 编写的有效解决方案（代码示例）吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:22:01.200

Pinterest 尚未发布公共 API，因此目前您无法做到这一点。

在此处查看相关问题：[pinterest api 文档](https://stackoverflow.com/questions/9951045/pinterest-api-documentation)

# perl - 在后台运行一个子程序，直到一个条件

> ID：13441432
> 
> 赞同：0
> 
> 时间：2012-11-18T15:16:46.110
> 
> 标签：perl, background, nonblocking

我怎么能重写它，以便`info`在后台运行直到 a`$aw`相等`result`？

```
#!/usr/bin/env perl
use 5.12.0;
use warnings;
use Term::ReadLine;

my $term = Term::ReadLine->new( 'something' );
$term->ornaments( 0 );

sub info { 
    # in the real script this runs some computations instead of the sleep
    # and returns some information.
    my ( $time ) = @_;
    sleep $time;
    return $time * 2;
}

my $value_returned_by_info = info( 10 ); # run this in the background
my $aw;

$aw = $term->readline( 'User input: ' );
if ( $aw eq 'result' ) {
    # if info() is still running in the background:
    # wait until info() returns because "$value_returned_by_info" is needed.
    say $value_returned_by_info;
}
else {
    # if info() is still running in the background:
    # let info() in the background because "$value_returned_by_info" is not needed here.
    say $aw;
}

$aw = $term->readline( 'User input: ' );
if ( $aw eq 'result' ) {
    # if info() is still running in the background:
    # wait until info() returns because "$value_returned_by_info" is needed.
    say $value_returned_by_info;
}
else {
    # if info() is still running in the background:
    # let info() in the background because "$value_returned_by_info" is not needed here.
    say $aw;
}

$aw = $term->readline( 'User input: ' );
if ( $aw eq 'result' ) {
    # if info() is still running in the background:
    # wait until info() returns because "$value_returned_by_info" is needed.
    say $value_returned_by_info;
}
else {
    # if info() is still running in the background:
    # let info() in the background because "$value_returned_by_info" is not needed here.
    say $aw;
}

say "End"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:52:39.377

我同意user5402。提到在后台运行和睡眠信息功能引发了很多问题。

我想知道当给定的输入不正确时，您是否正在寻找一种更整洁的方式来重新提示输入。如果是这种情况，那么 IO::Prompter 模块可能适合您。

```
#!/usr/bin/env perl

use 5.10.0;
use strict;
use warnings;
use IO::Prompter;

sub info {
    my ($time) = @_;
    sleep $time;
    return $time * 2;
}

my $expect = info(10);
my $aw;

PROMPT:
{
    $aw = IO::Prompter::prompt( 'Enter number', -i );

    if ( $aw eq $expect ) {

        say "$aw :)";
    }
    else {

        say "$aw :(";

        redo PROMPT;
    }
}

say "End"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:21:17.820

如果`info`可以在单独的进程中运行，那么您可以使用`fork`. 否则，您将不得不使用 perl 的线程版本。

使用示例`fork`：

```
sub start_info {
  my @params = @_;
  my $pipe;
  my $pid = open($pipe, "-|");

  if (!$pid) {
     # this code will run in a sub-process
     # compute $result from @params
     # and print result to STDOUT
     sleep(10);
     my $result = "p = $params[0] - pid $$";
     print $result;
     exit(0);
  };

  my $r;
  return sub {
    return $r if defined($r);
    $r = <$pipe>;  # read a single line
    waitpid $pid, 0;
    $r;
  };
}

sub prompt {
  print "Hit return: ";
  <STDIN>;
}

my $info1 = start_info(4);
prompt();
print "result = ", $info1->(), "\n";

my $info2 = start_info(30);
prompt();
print "result = ", $info2->(), "\n"; 
```

# php - MySQL递归WHERE？

> ID：13441436
> 
> 赞同：1
> 
> 时间：2012-11-18T15:16:59.107
> 
> 标签：php, mysql

我有一个如下所示的数据库：

```
Token (PRIMARY)     School        Skip
--------------------------------------
f2342f              School 1      0
434fbc              School 1      0
33332c              School 1      0 
```

如果 School 与临时数据库匹配，我的 PHP 代码会向每个令牌发送推送通知。然后它将skip设置为1，这样它就不会尝试在一天内发送另一个通知。

问题是我不能让脚本一次设置多个跳过值。当我这样做时，它似乎对第一个令牌工作正常，但不会为其他令牌设置跳过值，然后死掉。

这是我的PHP：

```
// Run comparison SQL query
        $compare = mysql_resultTo2DAssocArray(mysql_query("SELECT Temp.School, Temp.Status, Snow.Skip, GROUP_CONCAT(Snow.Token SEPARATOR '\', \'') Tokens FROM Temp JOIN Snow USING (School) WHERE Skip = 0 GROUP BY Temp.School"), $con);
        $amount = count($compare);

        // Send Push Notifications
        for ($i = 0; $i < $amount; $i++) {
            $message = $compare[$i][School] . " - " . $compare[$i][Status];
            $tokens = $compare[$i][Tokens];
            pwCall( 'createMessage', array(
                'application' => PW_APPLICATION,
                'username' => PW_LOGIN,
                'password' => PW_PASSWORD,
                'notifications' => array(
                    array(
                        'send_date' => 'now',
                        'content' => $message,
                        'ios_badges' => 1,
                        'ios_sound' => 'bells.caf',
                        'data' => 'daily',
                        'devices' => array($tokens),
                        )
                    )
                )
            );
            if (!mysql_query("UPDATE Snow SET Skip='1' WHERE Token='$tokens[$i]'", $con)) {

                echo "<pre>";
                print_r(str_replace("'", '', $tokens));
                echo "</pre>";

                die('Error: ' . mysql_error());
            }
        } 
```

输出为：

> f2342f, 434fbc, 33332c 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''f2342f'、'434' 附近使用正确的语法

所以对我来说，似乎我需要让它递归地设置跳过，除非我在我的代码中遗漏了一些重要的东西。

`$compare`：

```
Array
(
    [0] => Array
        (
            [School] => School 1
            [Status] => Closed 
            [Skip] => 0
            [Tokens] => f2342f', '434fbc', '33332c
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:27:24.277

执行此操作后：

```
$tokens = $compare[$i]['Tokens']; 
```

`$tokens`应该是这样的：

```
f2342f', '434fbc', '33332c 
```

这意味着您的查询应更改为

```
"UPDATE Snow SET Skip='1' WHERE Token IN('$tokens')" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:24:34.973

问题似乎在于您`$tokens`在 UPDATE 查询中的处理方式。

您正在尝试访问其中的令牌，就好像它是数组一样，但错误消息清楚地告诉您这`$tokens`是一个字符串 - 否则`print_r`会告诉您它是一个数组。

在对每个令牌进行更新查询之前，您需要`explode`该字符串。`$tokens`

```
$tokensArray = explode (', ', $tokens); 
```

编辑：

@minitech 对您的问题给出了很好的评论；如果要在`IN`语句 ( `WHERE token IN ($tokens)`) 中使用标记，则无需将它们分解为数组。

# vb.net - 确定 TabControl 中 TabRow 的高度 (VB.NET)

> ID：13441439
> 
> 赞同：2
> 
> 时间：2012-11-18T15:17:10.010
> 
> 标签：vb.net, winforms, tabcontrol, tabpage, multirow

我有一个 WinForms [TabControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol%28v=vs.100%29.aspx)设置为

```
Multiline = True 
```

我制作了自己的自定义 RowsChanged 事件

```
''' <summary>
''' Event that is raised if the rowCount of the control changed.
''' </summary>
Public Event RowsChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)

Private Sub Me_SizeChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.SizeChanged, Me.SelectedIndexChanged, Me.ControlAdded, Me.ControlRemoved
    If rows <> Me.RowCount Then
        rows = Me.RowCount
        RaiseEvent RowsChanged(sender, e)
    End If
End Sub 
```

现在我可以注册那个活动了。我想知道一排的高度，所以我可以做一些尺寸计算。有什么办法可以确定吗？到目前为止，我只计算了像素，这不是很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T21:08:49.727

如评论中所述，您可以使用 TabControl.GetTabRect() 方法在运行时检索选项卡的边界。请注意，当用户导航选项卡和行交换位置时，​​它可能会在多行选项卡控件上发生变化。

# javascript - 将两个功能结合在一起，使两者都能工作

> ID：13441444
> 
> 赞同：0
> 
> 时间：2012-11-18T15:18:00.680
> 
> 标签：javascript, html, javascript-events

我正在尝试将两个功能组合在一起，以便它们同时进行。我怎样才能做到这一点？

这是JavaScript：

```
function showTicks()
{
    if (chooseShield.value == ("ely"))
    {
        document.getElementById("cb1").disabled=false;
        document.getElementById("cb2").disabled=false;
        document.getElementById("cb3").disabled=false;
        document.getElementById("cb4").disabled=false;
        document.getElementById("cb5").disabled=true;
        document.getElementById("cb6").disabled=true;
        document.getElementById("cb7").disabled=true;
        document.getElementById("cb8").disabled=true;
        document.getElementById("cb9").disabled=true;   
    }
}

function checkchecks() 
{
    if(likeShield.value == ("noShield") && chooseShield.value == ("ely") && (cb3.checked   == true || cb4.checked == true))
    {
        document.getElementById("cb2").checked=true;
    }

    likeShield.onchange=checkchecks
    chooseShield.onchange=checkchecks
    cb3.onchange=checkchecks
    cb4.onchange=checkchecks
}

  function doBoth() {
  checkAll();
  checkchecks();
}
likeShield.onchange=doBoth;
chooseShie;d.onchange=doBoth;
cb3.onchange=doBoth;
cb4.onchange=doBoth; 
```

第一个函数禁用除 1、2、3 和 4 之外的所有复选框。第二个函数应该允许用户单击 3 或 4，这将自动选中复选框 2。但只有第二个函数有效，第一个函数被忽略。html 中的 onchange = "showTicks()"。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:20:55.240

你可以这样做 ：

```
var doBoth = function(){
      showTicks();
      checkchecks();
};
likeShield.onchange=doBoth;
chooseShield.onchange=doBoth;
cb3.onchange=doBoth;
cb4.onchange=doBoth; 
```

另一种选择是使用 addEventListener ：

```
likeShield.addEventListener('change', showTicks);
likeShield.addEventListener('change', checkchecks); 
```

但在你的情况下会更冗长。

当然，如果您的两个函数没有其他用途，最简单的方法是将 showTicks 函数的代码放入 checkchecks 函数中。

另外，不要忘记确保`chooseShield`定义了类似的变量。以下是定义变量的方法：

```
var chooseShield = document.getElementById('chooseShield');
var likeShield = document.getElementById('likeShield');
for (var i=1; i<10; i++) window['cb'+i]=document.getElementById('cb'+i); 
```

[示范](http://jsfiddle.net/ey3e9/)

# facebook - 如何让 facebook 评论分类器出现？

> ID：13441446
> 
> 赞同：0
> 
> 时间：2012-11-18T15:18:12.673
> 
> 标签：facebook

多年来，我一直在用头撞墙，但我就是无法让 facebook 评论分类器出现在我的评论上方。它通常会显示类似“21 条评论”之类的内容，并且有一个下拉菜单可让您更改评论的排序顺序。

我可以在其他人的 facebook 页面上看到它，它不会出现在我的 :(

我从我读过的所有文档中都有这段代码：

```
<div class="fb-comments"
data-href="http://www.facebook.com/app_xxxxxxxxxxxxxxxx"
data-colorscheme="dark" data-num-posts="3" data-width="440"
data-order-by="reverse_time"></div> 
```

但我仍然没有分类器，只有评论框和最后 3 条评论。你能告诉我我做错了什么吗？

# wcf - 可以在本地访问 9988 端口上的主机，但不能远程访问

> ID：13441456
> 
> 赞同：0
> 
> 时间：2012-11-18T15:19:37.260
> 
> 标签：wcf, web-services, .net-4.0, web-config

我已经为所有传入的 IP 设置了一个页面并使用端口 80 和 9988 上的绑定来托管它。在*localhost:port*上进行本地测试时，它适用于这两个值，但在远程访问它时，只有端口 80 会给出所需的结果。另一个带出连接超时。

首先，我认为这与无法识别的 HTTP 请求有关，所以我在 IP 号之前添加了*http://*，但这并没有任何区别。

我猜我需要更改*web.config*但我不清楚为什么（以及如何）。我对原版状态所做的唯一更改是允许多个站点绑定 ( `multipleSiteBindingsEnabled`)，我相信这已经足够了。显然不是。:)

最终，我将把站点托管在几个不同的端口上（不过，这些端口都不是默认的 80）。

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:23:24.410

**防火墙...**

而且由于 SO 需要最少数量的字符：检查防火墙的设置。

我的经验是，当连接不工作但它应该工作时，你需要去“你试过再打开它然后关闭它”，但网络风格：“你检查过你的-防火墙设置”。

# tfs - 在 Team Foundation 服务构建控制器上构建 Orchard 时遇到问题

> ID：13441458
> 
> 赞同：1
> 
> 时间：2012-11-18T15:19:57.413
> 
> 标签：tfs, tfsbuild

我正在尝试设置 Orchard 的 Team Foundation Service Build 并自动部署到 Azure。Orchard 的结构默认情况下将源目录和 lib 目录作为兄弟目录。解决方案文件不直接引用 lib 文件。

.\lib（模块）（文件） .\src\solution.sln .\src（项目）（文件）

在 Team Foundation Service 的 Elastic Build 上执行构建时，构建错误报告找不到任何库文件。即使工作区映射位于 lib 和 src 的父目录中，在 Get Source 操作期间似乎也没有下载它们。如果没有构建服务器的可见性，我无法验证这一点。

有人对原因有任何想法吗？有什么方法可以强制验证为构建下载了 lib 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:24:09.883

我的一个明显错误是，一些 dll 被排除在源代码管理之外，因此从未下载过。:-( 一个温和的提醒，以验证所有假设。

# php - JS 和 PHP 的本地化文件

> ID：13441464
> 
> 赞同：3
> 
> 时间：2012-11-18T15:20:40.077
> 
> 标签：php, javascript, localization

我对本地化文件进行了一些搜索，看到我们可以使用 .po 文件或 gettext，但是，是否有任何教程或示例可以在 javascript 和 php 中工作的独特解决方案。

我只想为每种语言维护一个本地化文件，该文件适用于 JS 和 PHP 语言。

如果有人可以指出一些链接或示例，将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:26:49.533

是的，有。前段时间我成功使用了[gettext.js](http://jsgettext.berlios.de/doc/html/Gettext.html)，它在 .json 或 .po 文件上运行。这样，您只需维护一个翻译源。我使用它的网页[位于此处](http://show.solarshow.net)，因此您可以查看我是如何做到的。祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T15:27:27.833

我发现当可翻译文本在 JS 函数中编码时，这通常表明设计存在问题。JS 旨在实现逻辑，而不是内容。内容应该由 PHP 提供（通常使用模板引擎）并且应该由 JS 使用。这样，您只需要一个 PHP 本地化解决方案。

如果（总是发生异常）你真的需要在 JS 例程中翻译一个短语，你可以使用 ajax 调用来获取翻译。这也简化了对保存翻译标记的字典的访问，因为它再次由 PHP 完成。字典可以保存在一个地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T10:30:05.057

首先，尽可能避免使用 gettext。它流行且稳定，但它给翻译维护带来了一些负担：您**需要**更改源字符串，当这种情况发生时，gettext 需要更新所有消息键，这可能会弄乱现有的翻译。从长远来看，具有恒定消息密钥的方法更容易维护 - 您需要记住删除不再使用的密钥，但这是一个非常小的负担。

您可以为 PHP 和 JavaScript 使用相同的翻译存储格式。如果您按照我的建议使用基于密钥的方法，它可能是一些基于 JSON 的格式。JSON 在 PHP 和 JavaScript 中都很容易访问。

有几个现成的 JavaScript 库用于基于 JSON 的国际化。我碰巧是这样一个库的开发人员：[https](https://github.com/wikimedia/jquery.i18n) ://github.com/wikimedia/jquery.i18n 。使其适应 PHP 应该相当容易。

# javascript - jQuery 仅在执行前一个函数的 ajax 时调用函数

> ID：13441469
> 
> 赞同：0
> 
> 时间：2012-11-18T15:21:00.950
> 
> 标签：javascript, jquery, callback

我有以下问题：

```
$('#id').on('click', '.class', function(){
 // it is doing something and
 // executing AJAX request
 // with the data from request it is doing something
} // this is onclick handler 
```

稍后在代码中我也需要执行它，执行后我需要运行另一个函数，这取决于 this 的 ajax 执行`onclick handler`，所以我正在做这样的事情

```
$('#id .class').click();
anotherFunction(); 
```

它不工作。这个问题是可以理解的，因为ajax请求还没有完成。

我尝试使用[Deferred object](http://api.jquery.com/category/deferred-object/)的想法来实现正确的执行。

```
$.when( $('#id .class').click() ).then( anotherFunction() ); 
```

并使用带有回调的自动执行函数的想法：

```
(function(o, callback){
    $('#id .class').click()
})(null, anotherFunction() ); 
```

两种想法都失败了。

有什么方法可以在不修改`anotherFunction()`and的情况下实现预期的功能`onclick function`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:35:59.357

不确定我是否完全理解您的问题，但是是什么让您无法在相应的 $.ajax 响应方法中执行 onsuccess / onerror 代码？

```
$.ajax({
  type: 'POST',
  url: "your url",
  data: "your data",
  error: function(jqXHR, textStatus, errorThrown) { ... },
  success: function (data, textStatus, jqXHR) { ... }
}); 
```

另外，为什么不将 ajax 执行部分放到一个自己的函数中，然后从事件处理程序和其他所有地方调用它，就像这样？

```
function ajaxMe(onerror, onsuccess)
{
    $.ajax({
      type: 'POST',
      url: "your url",
      data: "your data",
      error: function(jqXHR, textStatus, errorThrown) { onerror(...) },
      success: function (data, textStatus, jqXHR) { onsuccess(...) }
    });
} 
```

# c# - htmlagilitypack - 删除脚本和样式？

> ID：13441470
> 
> 赞同：16
> 
> 时间：2012-11-18T15:21:05.243
> 
> 标签：c#, html-agility-pack

我使用以下方法提取文本表单 html：

```
 public string getAllText(string _html)
    {
        string _allText = "";
        try
        {
            HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
            document.LoadHtml(_html);

            var root = document.DocumentNode;
            var sb = new StringBuilder();
            foreach (var node in root.DescendantNodesAndSelf())
            {
                if (!node.HasChildNodes)
                {
                    string text = node.InnerText;
                    if (!string.IsNullOrEmpty(text))
                        sb.AppendLine(text.Trim());
                }
            }

            _allText = sb.ToString();

        }
        catch (Exception)
        {
        }

        _allText = System.Web.HttpUtility.HtmlDecode(_allText);

        return _allText;
    } 
```

问题是我也得到了脚本和样式标签。

我怎么能排除他们？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-18T15:31:58.170

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

doc.DocumentNode.Descendants()
                .Where(n => n.Name == "script" || n.Name == "style")
                .ToList()
                .ForEach(n => n.Remove()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-15T16:02:04.847

`HtmlDocument`您可以使用类来做到这一点：

```
HtmlDocument doc = new HtmlDocument();

doc.LoadHtml(input);

doc.DocumentNode.SelectNodes("//style|//script").ToList().ForEach(n => n.Remove()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-29T21:04:48.790

一些很好的答案，System.Linq 很方便！

对于非基于 Linq 的方法：

```
private HtmlAgilityPack.HtmlDocument RemoveScripts(HtmlAgilityPack.HtmlDocument webDocument)
{

// Get all Nodes: script
HtmlAgilityPack.HtmlNodeCollection Nodes = webDocument.DocumentNode.SelectNodes("//script");

// Make sure not Null:
if (Nodes == null)
    return webDocument;

// Remove all Nodes:
foreach (HtmlNode node in Nodes)
    node.Remove();

return webDocument;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-29T00:23:20.020

```
public static string StripStyles(this string html)
{
    var document = new HtmlDocument();

    document.LoadHtml(html);

    foreach (var node in document.DocumentNode.DescendantsAndSelf())
    {
        var toRemove = node.Attributes.Where(x => x.Name == "style" || x.Name == "script")
            .ToList();
        foreach (var attribute in toRemove)
        {
            attribute.Remove();
        }
    }

    return document.DocumentNode.OuterHtml;
} 
```

# zend-framework2 - ZF2：控制器的转发插件不起作用。如何让它发挥作用？

> ID：13441471
> 
> 赞同：2
> 
> 时间：2012-11-18T15:21:07.860
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-modules, zend-framework-routing

我需要将 ajax 请求转发到当前控制器的其他 Action 方法。我使用 Forward 插件，但它不起作用。手册中有一个关于如何使用 Forward Plugin 的示例：

```
$foo = $this->forward()->dispatch('foo', array('action' => 'process')); 
return array(
    'somekey' => $somevalue,
    'foo'     => $foo, 
); 
```

我的代码：

```
// From Ajax on the page. I apply to the indexAction of FooController,
// I use RegEx route
xhr.open('get', '/fooindex', true);

// My Controller
namespace Foo\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

// I extend the AbstractActionController, the manual says it's important for the Forward Plugin to work
class FooController extends AbstractActionController {

    // This is the action I send my request from Ajax
    public function indexAction() {

        // if the request if Ajax request I forward the run to the nextAction method
        if ($this->getRequest()->isXmlHttpRequest()) {

            // I do as manual says
            $rs = $this->forward()->dispatch('FooController', array('action' => 'next'));
        }
    }

    public function nextAction() {

        // And I just want to stop here to see that the Forward Plugin works
        // But control doesn't reach here 
        exit('nextAction');
    }
} 
```

我在控制台中得到的错误是：

```
GET http://test.localhost/fooindex 500 (Internal Server Error) 
```

如果我不使用 Forward 一切正常，请求就可以了`indexAction`。只有 Forward 会抛出错误。

[从手册中，关于 The Forward Plugin](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.plugins.html#the-forward-plugin)：

> 为使 Forward 插件工作，调用它的控制器必须是 ServiceLocatorAware；否则，插件将无法检索所请求控制器的配置和注入实例。

[从手册中，关于可用控制器](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.controllers.html#the-abstractactioncontroller)：

> 实现上述每个接口都是冗余的教训；你不会经常想要这样做。因此，我们开发了两个抽象的基本控制器，您可以扩展以开始使用。
> 
> AbstractActionController 实现了以下每个接口：
> 
> Zend\Stdlib\DispatchableInterface Zend\Mvc\InjectApplicationEventInterface Zend\ServiceManager\ServiceLocatorAwareInterface Zend\EventManager\EventManagerAwareInterface

所以我的`FooController`extends `AbstractActionController`，它实现`ServiceLocatorAwareInterface`了，所以 Forward 必须工作，但它没有。我错过了什么？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:55:42.293

您应该记住，调度插件通过名称从服务管理器获取要调度的控制器。因此，您应该使用正确的名称而不仅仅是类名。

在您的配置中查找 controllers.invokables 数组。这应该包含服务的哪个名称映射到哪个 FQCN。

*可能是你叫 IS FooController，然后忘了我刚才说的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T08:27:09.007

尝试这个：

```
class FooController extends AbstractActionController {
    public function indexAction() {
        return $this->forward()->dispatch('Foo',
            array(
                'action' => 'process',
                'somekey' => $somevalue,
            ));
    }
} 
```

你的 module.config.php 文件是这样的：

```
'controllers' => array(
    'invokables' => array(
        'Foo' => 'Foo\Controller\FooController',   // <----- Module Controller
    ),
),

   'router' => array(
        'routes' => array(
            'foo' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/foo[/:action][/:id]',  // <---- url format module/action/id
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'Foo',  // <--- Defined as the module controller
                        'action'     => 'index',                   // <---- Default action
                    ),
                ),
            ),
        ),
    ), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:00:00.693

调用控制器时应该使用完全限定的名称，因此 'FooController' 也应该是命名空间。此外，您应该在模块配置文件的可调用列表中添加控制器，例如：

```
return array(
    'controllers' => array(
        'invokables' => array(
             'FooController' => 'Namespace/Controller/FooController'
              ...
         ),
    )
 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:11:48.653

尝试这个：

```
class FooController extends AbstractActionController {
    public function indexAction() {
        return $this->forward()->dispatch('Bar\Controller\Bar',
            array(
                'action' => 'process',
                'somekey' => $somevalue,
            ));
    }
} 
```

这里可调用的是：`'Bar\Controller\Bar' => 'Bar\Controller\Bar'`

# windows - 检测注册表项的程序

> ID：13441473
> 
> 赞同：0
> 
> 时间：2012-11-18T15:21:21.487
> 
> 标签：windows, registry, detection

我正在尝试找到一个可以检测第二个应用程序正在访问哪些 Windows 注册表项的应用程序。

让我试着解释一下：我正在寻找一个可以指向程序 B 的程序 A，当我运行程序 B 时，程序 A 会告诉我程序 B 访问的所有注册表项。这样的程序是否存在?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:23:51.803

[来自 SysInternals 的Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)正是这样做的，以及文件系统访问等等。

# css - 根据不同的li不同的边框颜色

> ID：13441477
> 
> 赞同：0
> 
> 时间：2012-11-18T15:21:57.410
> 
> 标签：css

我正在尝试制作一个帖子系统，我希望`right border color`每个帖子都不同。但我想使用最多 4 种颜色。前四个帖子将有四种不同的颜色，然后接下来的四个帖子将再次具有前四个帖子的颜色（每四个帖子再次不同）。我知道如何通过css中的奇偶n个元素来做到这一点。例如我试过：

```
li:nth-child(odd) {
  border-left:1px solid #ff0000;
}
li:nth-child(even) {
  border-left:1px solid #0000ff;
} 
```

如何按照我想要的方式进行操作：前四个颜色不同，然后再下四个颜色相同，再下四个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:43:23.143

使用这些：

```
li:nth-child(4n+1) { /* Every first */
  border-left:1px solid #ff0000;
}
li:nth-child(4n+2) { /* Every second */
  border-left:1px solid #0000ff;
}
li:nth-child(4n+3) { /* Every third */
  ...
}
li:nth-child(4n+4) {/* Every fourth */
  ...
} 
```

# asp.net-mvc - AntiXss 保护 Html 模型属性

> ID：13441482
> 
> 赞同：10
> 
> 时间：2012-11-18T15:23:14.297
> 
> 标签：asp.net-mvc

我的一些模型属性由 AllowHtml 属性标记。有没有办法自动将 AntiXss 保护（即仅过滤允许的标签）应用于这些字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T08:59:47.583

首先，afaik，没有内置任何东西。但是 MVC 允许通过自定义 ModelBinders 轻松地做这些事情，你可以定义你的

```
public class CustomAntiXssAttribute : Attribute { } 
```

`AllowHtmlAttribute`并用它装饰你的属性（如果你愿意，甚至可以继承）。然后使用模型绑定器，您可以添加特定的反 xss 保护：

```
 public class CutstomModelBinder : DefaultModelBinder
    {
        protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
        {
            if (propertyDescriptor.Attributes.OfType<CustomAntiXssAttribute>().Any())
            {
                var valueResult = bindingContext.ValueProvider.GetValue(propertyDescriptor.Name);
                var filteredValue = SOME_CUSTOM_FILTER_FUNCTION_HERE(valueResult.AttemptedValue);
                propertyDescriptor.SetValue(bindingContext.Model, filteredValue);
            }
            else // revert to the default behavior.
            {
                base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
            }
        }
    } 
```

然后在里面`SOME_CUSTOM_FILTER_FUNCTION_HERE`你可以使用@Yogiraj 建议的内容，或者使用正则表达式，甚至应用基于 HtmlAgilityPack 的过滤。

PS不要忘记添加`ModelBinders.Binders.DefaultBinder = new CutstomModelBinder();`到Application_Start（我忘了:)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T16:49:26.043

没有自动的方法。您可以做的最接近的是获取 AntiXss Nuget 包。然后你可以在你的控制器中使用它，如下所示：

```
 Microsoft.Security.Application.Sanitizer.GetSafeHtml("YourHtml"); 
```

或者

```
 Microsoft.Security.Application.Encoder.HtmlEncode("YourHtml"); 
```

如果你使用，你可以使用解码它

```
 Server.HtmlDecode("HtmlEncodedString"); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T12:16:11.887

我会用数据注释验证替换这些`AllowHtml`属性。`RegularExpression`通过这种方式，您可以捕获错误并向用户显示出了什么问题，而前者在全局级别触发错误。

例如。

```
public class MyViewModel
{
    [DataType(DataType.MultilineText)]
    [RegularExpression(@"^[^\<\>]*$", ErrorMessage = "May not contain <,>")]
    public string Text { get; set; }
} 
```

参考：[正则表达式验证器将正则表达式 < & > 符号编码为 < >，导致 jQuery 验证失败](https://stackoverflow.com/questions/10749978/regularexpression-validator-encoding-regex-symbols-as-lt-gt-causing-j)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:56:53.953

未经测试的代码，

```
public class ADefaultModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (bindingContext.ModelMetadata.RequestValidationEnabled)
        {
            var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue;
            value = value.Replace("&", "");// replace existing & from the value
            var encodedValue = Microsoft.Security.Application.Encoder.HtmlEncode(value);
            bindingContext.ModelMetadata.RequestValidationEnabled = encodedValue.Contains("&"); // Whether AntiXss encoded a char to &..
        }
        return base.BindModel(controllerContext, bindingContext);
    }
}
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        ModelBinders.Binders.DefaultBinder = new ADefaultModelBinder(); 
```

# java - 带有正则表达式的Android拆分字符串不起作用

> ID：13441490
> 
> 赞同：1
> 
> 时间：2012-11-18T15:23:52.927
> 
> 标签：java, android, regex

我试图在每个“。”处拆分一个字符串。或者 ”？” 我使用这个正则表达式：

```
(?<=(?!.[0-9])[?.]) 
```

从理论上讲，如果该点后跟一个数字，则代码还可以防止拆分，因此不会拆分诸如 3.000 之类的内容，并且它还包括新字符串中的点。

例如，如果我有这样的文字：“你好。你最喜欢的号码是什么？它是 3.560。” 我想得到这个：“你好。”，“你最喜欢的号码是什么？”，“它是 3.560。”

我在我的电脑上做了一个简单的 java 程序，它的工作方式和我想要的完全一样：

```
String[] x = c.split("(?<=(?!.[0-9])[?.])");
for(String v : x){
    System.out.println(v);
} 
```

但是，当我在我的 Android 应用程序中使用相同的正则表达式时，它不会拆分任何内容......

```
x = txt.split("(?<=(?!.[0-9])[?.])");
//This, in my android app, returns an array with only one entry which is the whole string without splitting. 
```

PS。使用 (?<=[?.]) 有效，因此问题必须出在 (?!.[0-9]) 部分，该部分旨在排除后跟数字的点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:44:20.507

使用正则表达式模式

```
(?:(?<=[.])(?![0-9])|(?<=[?])) 
```

* * *

```
str.split("(?:(?<=[.])(?![0-9])|(?<=[?]))"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:30:42.083

请记住，在方括号字符类之外，`.`在正则表达式中表示*任何*单个字符。您需要`\.`匹配一个文字点，这反过来意味着您需要`\\.`在字符串文字中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T15:51:17.340

试试这个。

```
public class Tester {

    public static void main(String[] args){
        String regex = "[?.][^\\d]";
        String tester = "Testing 3.015 dsd . sd ? sds";
        String[] arr = tester.split(regex);
        for (String s : arr){
            System.out.println(s);
        }
    }

} 
```

输出：

```
Testing 3.015 dsd 
sd 
sds 
```

# ios - iPad 加速度计是否归一化为重力

> ID：13441494
> 
> 赞同：1
> 
> 时间：2012-11-18T15:24:35.363
> 
> 标签：ios, accelerometer, uiaccelerometer

在将我的 Android 应用程序移植到 iOS 时，我对一件事感到困惑，所以我想知道：我是对的还是 mo 代码工作错了。在 Android 设备上，加速度计以物理测量单位返回值：m/s2。在 ipad 上，对于静止设备，我得到的总力大约为 = 1.0（我预计为 9.8）。我的第一个解释是返回值被归一化为 9.8，所以我必须将它乘以 9.8 才能获得真正的力量。我的第二个想法 - 我的代码完全错误，但很难相信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:06:01.983

来自关于 CMAcceleration 的文档：

```
CMAcceleration
The type of a structure containing 3-axis acceleration values.

typedef struct {
      double x;
      double y;
      double z;
} CMAcceleration; 
```

> 以 G 为单位的 X 轴加速度（重力）。
> 以 G 为单位的 Y 轴加速度（重力）。
> G 中的 Z 轴加速度（重力）。

**AG 是一个引力单位，等于地球引力场（9.81 ms-2）所施加的引力。**

# c# - 以 C# 更简单的方式获取/设置？

> ID：13441499
> 
> 赞同：4
> 
> 时间：2012-11-18T15:24:50.260
> 
> 标签：c#, .net, properties

嘿，所以我目前正在为大学编写一个程序，在创建我的课程时，我正在使用 get set 我的问题是，有没有比下面显示的这种方法更简单的方法来设置东西。

显示我当前方式的代码片段

```
 private string customer_first_name;
    private string customer_surname;
    private string customer_address;
    public DateTime arrival_time;

//Using accessors to get the private variables
//Using accessors to set the private variables

    public string Customer_First_Name
    {
        get { return customer_first_name; }
        set { customer_first_name = value; }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T15:26:21.580

改用[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)：

```
public string Customer_First_Name { get; set; } 
```

在这种情况下，编译器将生成用于存储属性值的字段。

*顺便说一句*`prop`，如果您将在 Visual Studio 中使用代码片段，您可以节省更多时间。只需开始输入`prop`并点击`Tab`- 它会粘贴自动生成属性的代码段。所有您需要的 - 提供属性名称和类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:26:43.717

```
public string Customer_First_Name { get; set; } 
```

如果您的 getter/setter 中不需要任何逻辑就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:26:33.637

```
public string Customer_First_Name {get; set;} 
```

这样做也将为您隐式创建一个基础字段。

# jquery - 数据表 - 如何防止排序列改变颜色

> ID：13441501
> 
> 赞同：14
> 
> 时间：2012-11-18T15:25:03.750
> 
> 标签：jquery, sorting, colors, datatables

刚开始使用数据表。默认情况下，当用户单击列行进行排序时，整列都会被着色。有人可以告诉如何关闭此功能吗？我一直在搞乱内置的 CSS 类，我对 asSorting 参数寄予厚望，但我似乎无法做到。如果这在 Datatables 网页上的某个地方很明显，而我没有看到它，对不起，但我找不到它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-03-05T18:26:48.157

## v1.10+

正如[Mathieu所](https://stackoverflow.com/users/1501801/mathieu) [指出](https://stackoverflow.com/questions/13441501/datatables-how-to-prevent-sorted-column-from-changing-color/22206115#comment49216565_22206115)的，现在可以通过设置为来禁用订单[类](http://datatables.net/reference/option/orderClasses)。`orderClasses``false`

```
$('#example').dataTable({
    "orderClasses": false
}); 
```

## v1.9-

如：[DataTables:Features](http://datatables.net/usage/features)所示，可以通过设置为 来禁用此`bSortClasses`功能`false`。

```
$('#example').dataTable({
    "bSortClasses": false
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T15:34:06.460

您可以只删除`td.sorting_1`.

# sql - Days_Between 两个日期

> ID：13441506
> 
> 赞同：1
> 
> 时间：2012-11-18T15:25:53.857
> 
> 标签：sql, oracle

我想问我如何检查两个日期之间的差异。

1.  BillingDate 是一个日期类型，带有条目 'DD-MON-YYYY'

2.  另一个日期是当前日期。

> ```
> sys_date - BillingDate = daysFromBilled 
> ```

我发现很多例子他们实际上说明了第二个日期来计算差异，但我正在寻找的是当前日期之间的差异，所以我可以将它添加到日程安排或工作中。

我正在使用甲骨文顺便说一句。

* * *

还有一点要补充，我会继续搜索，但如果你也可以推荐，我应该如何实现这样的功能：

1.  计算所有 BillingDate 条目的日期差异
2.  如果差异超过 30 天，则触发更改表，将状态设置为延迟。
3.  如果状态超过 60 天，服务属性将被更改并更改为切割

这是我粗略的表格布局

```
Cust             Billing
--------         ----------
CustID(PK)       BillingID(PK)
LateStatus       LateStatus
Service          BillingDate
                 CustID 
```

非常感谢。

更新

REPLACE view DateDifference as select trunc(sysdate)- trunc(BillingDate) from Billing;

seems legit.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:31:35.047

Simply subtract one date from the other:

```
BillingDate - sysdate 
```

To do that in a select statement, just use it like this:

```
select billingdate - sysdate as daysFromBilled
from ... 
```

Inside a trigger you use a regular assignment operator:

```
declare
    daysFromBilled integer;

begin 
    daysFromBilled := :new.billingdate - sysdate;
... 
```

that will return the number of days, including fractional values if the time is different (a `DATE` column in Oracle also contains a time!).

If you only want to get full days, use this:

```
trunc(BillingDate) - trunc(sysdate) 
```

* * *

This statement of yours:

> *date type with an entry 'DD-MON-YYYY'*

Indicates a misunderstanding on how `DATE` values work.

A `DATE` (or `TIMESTAMP`) does ***not*** have any format.

They are stored in binary form in your column. The format is **only** applied when you display the value and thus convert it to a character literal. That is the work of the client application you use to display the values. SQL*Plus uses the NLS settings, other SQL tools might use a different configuration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T15:02:55.250

All customers:

```
SELECT CUSTID
FROM BILLING
WHERE (SYSDATE - Billing_Date) >= 60
; 
```

The following statement should update all the customer records where the difference is 60 days and over. Also, have added a clause to check if the service is already not set to CUT previously, so you don't end up updating the same records everytime.

```
UPDATE CUST_TABLE
SET SERVICE = 'CUT'
WHERE CustID in ( SELECT CustID
                   FROM BILLING_TABLE
                   WHERE (Sysdate - Billing_Date) >= 60
                 )
  AND NVL(SERVICE, 'X') != 'CUT'
; 
```

# php - 获取用户喜欢计数

> ID：13441508
> 
> 赞同：2
> 
> 时间：2012-11-18T15:26:06.603
> 
> 标签：php, sql, facebook-fql

我想获取用户朋友的总页数

当我应用低于它的 fql 句子时，它在[fql explorer](https://developers.facebook.com/tools/explorer)上效果很好。

```
SELECT 
  uid, 
  name, 
  likes_count 
FROM user 
WHERE uid IN (SELECT 
                uid1, 
                uid2 
              FROM friend 
              WHERE uid1=me()) 
```

![不错的结果](../Images/10ef4bf060737a2e3a0fe51c72fb40f1.png)
但是，当我用 php 做同样的事情时，它不会显示 likes_counts。
**php代码：**

```
$fql= 'SELECT uid, name, likes_count FROM user WHERE uid IN (SELECT uid1, uid2 FROM friend WHERE uid1=me())';
$ret_obj = $facebook->api(array(
        'method' => 'fql.query',
        'query' => $fql,
        'access_token'=> ''.$fbme[access_token].''
)); 
print_r($ret_obj); 
```

**php结果：**

![在此处输入图像描述](../Images/25ad51db6c4d7b544fcb48b1eb84c0ac.png)

我怎样才能显示like_counts？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:33:51.947

很可能，您拥有的权限`fql explorer`与您在 PHP 中设置 FB 会话时请求的权限不同。

# c# - 标记为内容的文件 -> 始终复制没有被复制

> ID：13441513
> 
> 赞同：8
> 
> 时间：2012-11-18T15:26:26.243
> 
> 标签：c#, visual-studio

我的 C# VS2010 项目的文件夹中有一个文件标记为`Content`和`Always Copy`.

当我更改此文件并将其保存到 VS 外部，然后运行项目时，修改后的文件不会复制到输出中。如果我重建，那就是。我的猜测是VS不使用文件的修改日期时间戳来确定是否应该复制它。

我错过了什么吗？这让我发疯，因为我每次跑步会损失 5 分钟。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T16:06:30.300

很难解释，所以从获得更好的诊断开始。工具 + 选项、项目和解决方案、构建和运行设置。将“MSBuild 项目构建输出详细程度”设置更改为“正常”。在同一个属性页中，确保“在运行时，项目过期时”设置设置为始终构建。当您按下`F5`或 Build + Build 时查看输出窗口，*_CopyOutOfDateSourceItemsToOutputDirectory*任务是复制文件的任务。

使用 Project + Add Existing Item 时可能出现的一个陷阱：IDE 会复制您选择的文件。您可能正在更改原始文件而不是项目目录中的副本。您可以通过单击对话框中“添加”按钮上的箭头并选择“添加为链接”来解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T22:46:01.697

您可以通过将 Build Action 从“Content”更改为“Embedded Resource”来实现您期望的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T13:22:09.207

当我需要使用`COMFileReference`但也需要将 DLL 复制到输出文件夹时遇到了这个问题。

最后，最终将 DLL 添加到项目中两次，一次`Content`用于复制到输出文件夹，一次用于`COMFileReference`. 我发现最简单的方法是`.csproj`直接修改xml。

# php - mysqli 使用引号和其他字符插入数据

> ID：13441517
> 
> 赞同：0
> 
> 时间：2012-11-18T15:26:56.180
> 
> 标签：php, mysqli

我正在将我的网站从 mysql_* 方法迁移到 mysqli。

当我使用mysql时，数据如下：

```
$variable = <<<eot
    "asdasd" hello 'name name'
    // 
    \\
    "end"   
eot; 
```

插入数据库如下：

```
 "asdasd" hello 'name name'
    // 
   \
    "end" 
```

这很好。

现在它插入相同的数据，如下所示：

```
\"asdasd\" hello \'name name\'\r\n  // \r\n \\\r\n  \"end\" 
```

谁能告诉我如何维护将东西插入数据库的旧方法。我不需要 \ 和 \r 和 \n 以及我猜的这些东西。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:27:45.563

我看不出有什么不同。

表定义：

```
create table test (s text) 
```

PHP测试源码：

```
<?php 
$variable = <<<eot
    "asdasd" hello 'name name'
    // 
    \\
    "end"   
eot;

// mysql version
$conn = mysql_connect('localhost', 'USERNAME', 'PASSWORD');
mysql_select_db('test', $conn);
$sql = "insert into test values ('" . mysql_escape_string($variable) . "')";
$result = mysql_query($sql, $conn);

// mysqli version
$conn = mysqli_connect('localhost', 'USERNAME', 'PASSWORD', 'test');
$sql = "insert into test values ('" . mysql_escape_string($variable) . "')";
$result = mysqli_query($conn, $sql);

// mysqli version (prepared statement)
$conn = new mysqli('localhost', 'USERNAME', 'PASSWORD', 'test');
$sql = 'insert into test values (?)';
$sth = $conn->prepare($sql);
$sth->bind_param('s', $variable);
$result = $sth->execute(); 
```

每个版本都会在表中生成相同的条目。所以，要么这只是你拥有的不同输出，要么你的代码做了不同的事情。

# jquery - 仅在我第一次激活我的功能时才使用对象 HTMLInputElement 而不是字符串？

> ID：13441519
> 
> 赞同：0
> 
> 时间：2012-11-18T15:27:11.827
> 
> 标签：jquery, ajax, object, pdo

添加元素后，我想从表中返回我的最后一个插入 ID。我正在通过 jquery 提交表单。

这是我的代码的主要部分：

addEntry.php

```
[functional data insertion, blabla]
echo $connection->lastInsertId('ID'); 
```

jQuery：

```
 $("#dishAdd").click(function(){                    

                $.post('./requests/addEntry.php',
                    {
                        position:dishPosition,
                        type:dishType
                    },
                    function(data) {
                        dishID = data;
                        alert(dishID);
                });

                $("#myelement").append(dishID);

            }); 
```

问题是，当我第一次单击#dishAdd 时，我的 $("#myelement").append(dishID) 返回：

```
[object HTMLInputElement] 
```

而不是我的最后一个 ID。如果我再次单击，它会返回正确的值，对于所有后续单击都相同。

你知道为什么它在第一次点击时返回 [object HTMLInputElement] 吗？注意 alert(dishID); 始终显示正确的值，即使在第一次单击时也是如此。

我希望你能帮帮我！

编辑：我通过移动来修复它

```
$("#myelement").append(dishID); 
```

进入

```
function(data) { $("#myelement").append(data); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:38:22.673

尝试 alert(dishID * 1) 尝试添加 'debugger;' 到您的代码，然后在 Chrome 中打开页面，在刷新页面之前按 f12，选择源选项卡并打开您的页面。然后检查，value 中包含的内容是 discID

# java - 在 JSP 页面中运行 .jar 文件

> ID：13441525
> 
> 赞同：6
> 
> 时间：2012-11-18T15:28:34.100
> 
> 标签：java, jsp, jar

我正在尝试开发一个接受用户输入并转换为文本文件的网站。然后将文本文件用作文件的输入`.jar`。（例如`java -jar encoder.jar -i text.txt`），然后jar 会输出一个`.bin`文件供用户下载。

这个 jar 旨在从命令行运行，我真的不知道在`.jsp`页面中实现它的最佳方法。我创建了一些 java 测试类，但到目前为止没有任何效果。

有人对可能的方法有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:48:06.370

将其作为外部进程运行的另一种方法是在当前 JVM 中调用其主类：

1.  提取/打开`META-INF/MANIFEST.MF`罐子
2.  识别[`Main-Class:`](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html). 说它叫`EncoderMainClass`
3.  调用它的`main`方法：`EncoderMainClass.main("-i", "text.txt")`

这会更快，因为不需要创建新的操作系统进程，但可能存在安全考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:11:02.087

你有没有尝试过这样的事情，

创建一个java文件

使用 a`ProcessBuilder`并启动一个新的 JVM。

这里有一些让你开始的东西：

```
ProcessBuilder pb = new ProcessBuilder("/path/to/java", "-jar", "your.jar", "thetextfile.txt");
pb.directory(new File("preferred/working/directory"));
Process p = pb.start(); 
```

ps：做句柄来销毁进程，否则它会吃掉所有的内存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:17:07.403

您可以将此 jar 放到*类路径*上的 Web 应用程序中，并使用它的类和方法。如果您没有源代码，则最好有*javadoc 。*但即使不在`classpath`你也可以试试[例子](http://javabender.blogspot.com/2012/07/urlclassloader-and-reloading-class-from.html)或[这个例子](https://stackoverflow.com/questions/13294594/read-a-file-from-inside-of-an-external-jar-file/13294687#13294687)。

# android - 具有不同活动的 TabHost

> ID：13441527
> 
> 赞同：-1
> 
> 时间：2012-11-18T15:28:52.033
> 
> 标签：android, android-activity, android-tabhost

我正在尝试实现一个包含 TabHost 的活动，并且其中的每个选项卡都将运行\代表一个不同的活动，因此如果用户按下选项卡 #1，他将看到活动 A，如果他按下选项卡 #2，他'会看到 Activity B。我不想使用 TabActivity，因为它已被弃用，但新的 API FragmentTabHost 似乎不是正确的答案\实现（我需要支持 OS 2.2 及更高版本）。有没有人有一个好主意\例如如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:32:22.303

不要再使用`TabHost`了。将新的[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html) API 与[ActionBarSherlock](http://actionbarsherlock.com/)一起使用。要支持`Fragment`低至 Android 2.2，您必须使用[Android 支持库](http://developer.android.com/tools/extras/support-library.html)。

# java - 如何使 String 类可迭代？可能的？

> ID：13441530
> 
> 赞同：2
> 
> 时间：2012-11-18T15:29:07.253
> 
> 标签：java

我怎样才能在java中完成这项工作？

```
String p = "Hello";

for(char i: p)
    System.out.print(i); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T15:29:59.157

你可以这样做：

```
for (char i: p.toCharArray())
    System.out.print(i); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T15:30:43.223

字符串*不在* [`Iterable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Iterable.html)Java 中（例如，与 Python 不同），但您可以遍历它们的内部字符数组：

```
for (char i : p.toCharArray())
    System.out.print(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T16:10:03.440

一开始我完全误解了这个问题。如果您只想遍历 String ，请使用其他人回答的 charArray 方法。但是，如果您还想删除字符并追加，则使用 StringBuilder。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T15:37:58.837

**-**使`String`可迭代的意思是，只有将其转换为`char`数组才有可能。

**-**如果你想`String`直接访问字符，你可以使用`chatAt()`方法。

**-**但如果你想成功，`iterable`那就去寻找`toCharArray()`方法

**例如：**

```
char[] arr = p.toCharArray();

for (char i: arr){

       System.out.print(i);

 } 
```

# iphone - 如何使用 NSString 或 const char *name 在 Objective-C 中动态调用方法？

> ID：13441531
> 
> 赞同：2
> 
> 时间：2012-11-18T15:29:17.127
> 
> 标签：iphone, objective-c, ios

我正在使用 Objective-C 中的动态编程进行一些工作，并且我已经从头到尾阅读了 Objective-C 运行时编程指南，并且能够完成我需要的大部分工作，但有一件事我还没有弄清楚是如何动态调用方法，只要我有它的字符串表示。

本质上，我动态地进行属性查找以查看我的对象是否具有使用 class_copyPropertyList 从列表中匹配的属性，然后通过从 plist 文件填充的 NSMutableDictionary 循环并匹配这些属性。当找到匹配项时，我想执行该属性。我无法提前知道可能存在哪些匹配项，因为这是一个将被打包到许多不同应用程序中的库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T15:35:08.580

用于从. `NSSelectorFromString`_ 然后您可以使用其中一种方法执行它。`SEL``NSString``performSelector`

**动态设置属性：**

```
SEL setter = NSSelectorFromString(@"setProperty:");
[myObject performSelector:setter withObject:newValue]; 
```

**动态获取属性：**

```
SEL getter = NSSelectorFromString(@"property");
id myProperty = [myObject performSelector:getter]; 
```

对于更复杂的方法，您可以使用[`NSInvocation`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)and [`NSMethodSignature`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSMethodSignature_Class/Reference/Reference.html)：

```
SEL action = NSSelectorFromString(@"someMethod:withArguments:");
NSMethodSignature *signature = [myObject methodSignatureForSelector:action];
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
[invocation setArgument:arg1 atIndex:2]; // indices 0 and 1 are reserved.
[invocation setArgument:arg2 atIndex:3];
[invocation invokeWithTarget:myObject];
id returnedObject;
[invocation1 getReturnValue:&returnedObject]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:33:45.947

```
SEL s = NSSelectorFromString(selectorName);
[anObject performSelector:s]; 
```

苹果文档：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSelectorFromString](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSelectorFromString)

# android - 使用 BitmapRegionDecoder 加载 jpeg 会导致棋盘失真

> ID：13441532
> 
> 赞同：4
> 
> 时间：2012-11-18T15:29:23.600
> 
> 标签：android, jpeg, tiles

我正在使用来自 URLConnection 的 InputStream 从 url 加载一个大的 jpeg 文件。目标是获取带有图像数据的 int[]，因为这比使用 Bitmap 更有效以供进一步使用。这里有两个选项。

首先是创建一个 Bitmap 对象并将结果复制到 int[] 中。这在我的应用程序中有效，但完整图像在加载时两次在内存中，因为图像数据被复制到 int[] 图像中。

```
Bitmap full = BitmapFactory.decodeStream(conn.getInputStream());
full.getPixels(image, 0, width, 0, 0, width, height); 
```

为了节省内存，我尝试使用 BitmapRegionDecoder 以平铺方式执行此过程。

```
int block = 256;
BitmapRegionDecoder decoder = BitmapRegionDecoder.
    newInstance(conn.getInputStream(), false);
Rect tileBounds = new Rect();
// loop blocks
for (int i=0; i<height; i+=block) {
    // get vertical bounds limited by image height
    tileBounds.top = i;
    int h = i+block<height ? block : height-i;
    tileBounds.bottom = i+h;
    for (int j=0; j<width; j+=block) {
        // get hotizontal bounds limited by image width
        tileBounds.left = j;
        int w = j+block<width ? block : width-j;
        tileBounds.right = j+w;
        // load tile
        tile = decoder.decodeRegion(tileBounds, null);
        // copy tile in image
        int index = i*width + j;
        tile.getPixels(image, index, width, 0, 0, w, h);
    }
} 
```

从技术上讲，这是可行的，我在 int[] 图像中获得了完整图像。瓷砖也无缝地插入图像中。

现在我的问题。第二种方法导致图像具有某种奇怪的棋盘失真。像素似乎在稍暗或稍亮之间交替。BitmapRegionDecoder 应该支持 jpeg，BitmapFactory.decodeStream 没有问题。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:04:03.590

找到了！显然，如果您将 null 输入到 decoder.decodeRegion(tileBounds, null); 它返回一个具有质量 Bitmap.Config.RGB_565 的位图（不确定这是否取决于设备）。只需为其提供一个新选项集即可返回 Bitmap.Config.RGB_ARGB8888 质量的位图。默认情况下，此首选质量已设置。

```
BitmapFactory.Options options = new BitmapFactory.Options();
...
// load tile
tile = decoder.decodeRegion(tileBounds, options); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:58:49.717

感谢您的自查！

虽然我建议避免依赖某些默认值并明确表示：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig=Config.ARGB_8888;   //explicit setting!
result_bitmap=regionDecoder.decodeRegion(cropBounds, options); 
```

谢谢！

# python - 使用 BeautifulSoup 从选择中返回文本

> ID：13441534
> 
> 赞同：3
> 
> 时间：2012-11-18T15:29:37.657
> 
> 标签：python, beautifulsoup

对于以下页面：

[http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113](http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113)

我有以下抓取代码：

```
findit = soup.find_all("td", "Page-Headers", align="left")
print findit 
```

它返回以下内容：

```
[<td align="left" class="Page-Headers" valign="middle">Aerospace Materials Pty Ltd</td>] 
```

目前很好。

如何使用 BeautifulSoup 从该模式返回文本元素（“Aerospace Materials Pty Ltd”）？或者是在这个输出上简单地进行正则表达式的最好方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:48:54.137

采用`getText`

```
for td in soup_result:
    print td.getText() 
```

或者正如@Zero Piraeus 指出的那样，`bs4`您应该使用`.get_text()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:47:39.277

您可以使用该[`.string`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#string)属性：

```
>>> for el in findit:
...   print el.string
... 
Aerospace Materials Pty Ltd
>>> 
```

# c# - Http Post 不工作（C# 代码工作，java 代码不工作）

> ID：13441537
> 
> 赞同：0
> 
> 时间：2012-11-18T15:30:08.967
> 
> 标签：c#, java, http, post, request

好的，所以c#代码的http帖子有效（函数返回`TRUE`，表示响应字符串是“ `OK`”，这里是：

```
public bool Rank(int rank)
    {
                    System.Text.UTF8Encoding encoding=new System.Text.UTF8Encoding();
        string postData = "";
        InvokeOnMainThread(delegate(){
        postData="pass=somePass&request=someRequest&access_key="+((FBTabBarController)TabBarController).AAMAccessKey+"&pid="+place_id+"&rank="+rank.ToString();
        });
byte[]  data = encoding.GetBytes(postData);

                HttpWebRequest myRequest =
            (HttpWebRequest)WebRequest.Create("someURL");
myRequest.Method = "POST";
myRequest.ContentType="application/x-www-form-urlencoded";
myRequest.ContentLength = data.Length;
Stream newStream=myRequest.GetRequestStream();
// Send the data.
newStream.Write(data,0,data.Length);
newStream.Close();
        HttpWebResponse hwr =(HttpWebResponse) myRequest.GetResponse();
        StreamReader reader = new StreamReader(hwr.GetResponseStream());
        string res = reader.ReadToEnd();
        if(res=="OK") 
            return true;}
        else if(res == "FAILED") return false;

        return false;
    } 
```

这是不工作的 JAVA 代码（函数返回`FALSE`与上面代码相​​同的参数，响应字符串是`NULL`：：

```
 public boolean SubmitRank(String URL) 
    {
        HttpClient httpclient = new DefaultHttpClient();   
        HttpPost httppost = new HttpPost(URL); 
            // Add your data   

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5); 
            Log.d("MyTag","id: " + place_id + "rank: " + rank);
            nameValuePairs.add(new BasicNameValuePair("pass","somePass"));
            nameValuePairs.add(new BasicNameValuePair("request","someRequest"));
            nameValuePairs.add(new BasicNameValuePair("accesskey",shareAppPreferences.getAccessKey()));
            nameValuePairs.add(new BasicNameValuePair("pid",place_id));
            nameValuePairs.add(new BasicNameValuePair("rank",rank));

            try {
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));
                    try {
                       HttpResponse response = httpclient.execute(httppost);
                        String resString = EntityUtils.toString(response.getEntity());

                        if(resString.equals("OK")){
                            return true;
                        }
                        else if(resString.equals("FAILED")){
                            return false;
                        }
                        return false;
                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                }
            return false;
    } 
```

为什么 C# 代码工作时 JAVA 代码不工作？我在上述请求中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:32:10.170

返回的 HTTP 状态码是什么？你可以通过`response.getStatusLine().getStatusCode()`方法获得这个。这将帮助您确定可能的问题，例如请求甚至发送到服务器。

否则，您在 Java 代码中创建和发送 HTTP 请求的方式看起来正确且有效。

# python - django过滤器：可以用元组过滤吗？

> ID：13441539
> 
> 赞同：1
> 
> 时间：2012-11-18T15:30:34.350
> 
> 标签：python, django, filter

假设有一个列表

```
strings = ['a','b','c'] 
```

并且有两种型号

```
class theModel:
   theString = models.charField()

Class superModel:
   hasClass = models.ForeignKey(theModel) 
```

有没有办法通过'theString'和列表过滤superModel？

例如，这可能是一种方式（但有更好的方式吗？没有 for 循环）

```
tuple = []
for string in strings
   tuple.append ( theModel.objects.filter(theString = string) )

result = []
for theModel in tuple 
   result.append ( superModel.objects.filter(hasClass = theModel ) )

return result 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:37:03.317

你可以这样做：

```
theModel.objects.filter(theString__in=[1,4,7]) 
```

# php - 在 foreach 循环中为二维数组赋值

> ID：13441543
> 
> 赞同：1
> 
> 时间：2012-11-18T15:30:51.353
> 
> 标签：php, arrays, loops

我有一个二维数组

```
$arr = array (
array('x'=>'x1' , 'y'=>'') ,
array('x'=>'x2' , 'y'=>'') 
); 
```

如您所见， y 列是空的

如果我想给它一些价值，这是行不通的

```
foreach($arr as $a )
{
  if($a['x'] == 'x1')
   $a['y'] = 'y1';

  if($a['x'] == 'x2')
   $a['y'] = 'y2';
} 
```

我知道我可以使用 2 个`for`循环，但我想知道是否有像 foreach 这样更清洁/更简单的方法来做到这一点？我的应用程序已经使用 froeach 循环来检查数组中的某些列，它已经够乱了，我不需要 2 个其他循环！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:36:55.377

问题是您使用的是数组值而不是键。以下代码将执行此操作：

```
<?php
$arr = array (
array('x'=>'x1' , 'y'=>'') ,
array('x'=>'x2' , 'y'=>'') 
);
foreach($arr as $key => $value )
{
  if($arr[$key]['x'] == 'x1')
   $arr[$key]['y'] = 'y1';

  if($arr[$key]['x'] == 'x2')
   $arr[$key]['y'] = 'y2';
}
?> 
```

如您所见，您应该对 foreach 使用 $key => $value 表示法。

# cocos2d-iphone - cocos2d-iphone js绑定的API参考

> ID：13441545
> 
> 赞同：0
> 
> 时间：2012-11-18T15:30:55.830
> 
> 标签：cocos2d-iphone

cocos2d-iphone javascript 绑定是否有任何 API 参考？

我找到了[cocos2d-html5 的 API 参考，](http://www.cocos2d-x.org/reference/html5-js/index.html)但显然存在一些差异......例如，我正在尝试扩展 cc.Sprite 类并且找不到 initWithFile 方法（而它存在于 cocos2d-html5 中）。

是否存在这样的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:18:46.393

似乎目前最好的“文档”是 cocos2d-js-tests： [https ://github.com/cocos2d/cocos2d-js-tests](https://github.com/cocos2d/cocos2d-js-tests)

# php - yii : 过滤后带有日期的过滤器不起作用

> ID：13441549
> 
> 赞同：3
> 
> 时间：2012-11-18T15:31:26.250
> 
> 标签：php, yii

问题：过滤器的日期选择器在过滤后不起作用。

我试图将日期选择器放入 cgridview 的过滤器中。这是成功的。但是当过滤后日期选择器不工作时。所有的 cgridview 都有同样的问题。我怎么解决这个问题？

过滤前：过滤![过滤前](../Images/6a45cb24e4ca5b7098fb96f0d1fffb18.png) 后：![过滤后](../Images/b8173d0689874cde2f2173c99c03ae3f.png)

这个 cgridview

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
            'id'=>'history-grid',
            'dataProvider'=>$model->search($id),
            'filter'=>$model,
            'columns'=>array(
                array(
                    'name'=>'user_id',
                    'value'=>'$data->profiles->firstname',
                ),
                'action',
                array(
                    'name'=>'status',
                    'value'=>'$data->status',
                    'filter' => $status_list,
                ),
                array(
                    'name'=>'created_date',
                    'value'=>'date("d-M-Y h:m a",strtotime($data->created_date))',
                    'filter'=>$this->widget('zii.widgets.jui.CJuiDatePicker', array(
                        'name'=>'History[created_date]',        
                        'model'=>$model,
                        'value' =>date('d-M-Y', strtotime($model->created_date)) ,
                        'i18nScriptFile' => 'jquery.ui.datepicker-eng.js', // (#2)
                        'htmlOptions' => array(
                            'id' => 'History_created_date',
                            'size' => '10',
                        ),
                        'defaultOptions' => array(  // (#3)
                            'showOn' => 'focus', 
                            'dateFormat' => 'dd-M-yy',
                            'showOtherMonths' => true,
                            'selectOtherMonths' => true,
                            'changeMonth' => true,
                            'changeYear' => true,
                            'showButtonPanel' => true,
                            //'yearRange'=>'-1:+1', 
                            'yearRange'=> '2012:+1',
                            'minDate'=>'js:new Date(' . date('2012,m-3,1') . ')', 
                            //'defaultDate'=>'js:new Date(' . date('2012,m-11,1') . ')', 
                        )
                    ),true),    
                ),
            ),
        )); ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:45:38.990

cgridview 更新后，您需要重新初始化 datepicker。阅读：[http ://www.yiiframework.com/wiki/318/using-cjuidatepicker-for-cgridview-filter/](http://www.yiiframework.com/wiki/318/using-cjuidatepicker-for-cgridview-filter/)

在 CGridView 初始化选项中添加添加 afterAjaxUpdate

```
'dataProvider'=>$model->search($id),
'filter'=>$model,
'afterAjaxUpdate' => 'reinstallDatePicker', // (#1) 
```

并定义这个函数：

```
// (#5)
Yii::app()->clientScript->registerScript('re-install-date-picker', "
function reinstallDatePicker(id, data) {
    $('#History_created_date').datepicker();
}
"); 
```

# c# - 如何通过流从 TCP 服务器获取最后一条消息？

> ID：13441556
> 
> 赞同：0
> 
> 时间：2012-11-18T15:32:19.380
> 
> 标签：c#, stream-socket-client

```
TcpClient client = new TcpClient();
client.Connect(IPAddress.Parse(HOST_IP), HOST_PORT);
Stream stream = client.GetStream();
var reader = new StreamReader(stream);
var writer = new StreamWriter(stream);
writer.AutoFlush = true;
while (true) {
  string line;
  while((line = reader.ReadLine())!=null) {
    Console.WriteLine(line);
  }
  writer.WriteLine(Console.ReadLine());
} 
```

我的服务器向客户端发送两个字符串：

```
var stream = new NetworkStream(soc);
var reader = new StreamReader(stream);
var writer = new StreamWriter(stream);
writer.AutoFlush = true
writer.WriteLine("Welcome: ");
writer.WriteLine("Bla...: ");
reader.ReadLine(); 
```

我的客户会显示

```
Welcome
Bla.. 
```

但它不运行命令`writer.WriteLine(Console.ReadLine());`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:28:59.710

您需要决定这一切将如何关闭，但如评论中所示，我建议您使用第二个线程，让双方（客户端上的发送和接收端）能够在没有阻塞的情况下运行：

```
TcpClient client = new TcpClient();
client.Connect(IPAddress.Parse(HOST_IP), HOST_PORT);
Stream stream = client.GetStream();
var reader = new StreamReader(stream);
var writer = new StreamWriter(stream);
writer.AutoFlush = true;
var t = new Thread(() => {
    while(true) {
        writer.WriteLine(Console.ReadLine());
    }
});
t.Start();
while (true) {
  string line;
  while((line = reader.ReadLine())!=null) {
    Console.WriteLine(line);
  }
} 
```

与您的评论不同，您不希望在循环中创建线程 - 总是有可能一侧（例如从服务器接收）可以处理多次而另一侧（发送到服务器）没有任何工作。

对于关机，我通常会在关机时创建一个`ManualResetEvent`设置（通过任何适当的标准）。然后我将测试事件对象作为`while`循环的条件。

唯一的问题是`Console.ReadLine()`阻塞。因此，除非接收到新输入，否则您的读取控制台/发送到服务器线程不会看到已设置关闭事件。如果您的读取/发送线程不负责启动关闭，您可以将其设为后台线程（假设它不会改变任何全局状态），然后只需处理关闭您的接收/写入线程（即主线程）在适当的时候。

# jquery - 使用 jquerytools 可滚动直接跳过可滚动部分

> ID：13441561
> 
> 赞同：2
> 
> 时间：2012-11-18T15:32:43.250
> 
> 标签：jquery, jquery-tools, scrollable

我们正在实现一个垂直滚动 - 类似于

[http://jquerytools.org/demos/scrollable/vertical.html](http://jquerytools.org/demos/scrollable/vertical.html)

使用 jquerytools 可滚动。

有一个业务需求，我们可以直接跳转到可滚动的任意部分（例如，通过锚名称指定目标部分，例如

[http://jquerytools.org/demos/scrollable/vertical.html#section-3](http://jquerytools.org/demos/scrollable/vertical.html#section-3)

jquerytools是否支持滚动？

它适用于 jquerytools 选项卡实现，但似乎对可滚动模块没有影响。

# memory-management - 识别 Windows 进程页面错误原因

> ID：13441562
> 
> 赞同：1
> 
> 时间：2012-11-18T15:32:54.480
> 
> 标签：memory-management, paging, page-fault

我`Windows`使用商业软件来执行某项任务，甚至可以运行 18 小时。

通过检查任务管理器，进程报告了大量的页面错误，比如 65M 页面错误和大约 1GB 的内存使用峰值。

该机器具有 2 GB 内存和 2 GB 虚拟内存，以及 2 到 4 GB 的分页文件。

[为了减少执行时间，我正在考虑通过使用像ramdisk](http://memory.dataram.com/products-and-services/software/ramdisk)这样的工具来存储大多数访问的文件来减少页面错误的影响。但是要了解这些文件是哪些文件，我需要发现哪些内存访问会产生页面错误。有没有办法/工具来完成这项任务？有人看到这种方法的替代方法吗？

# python - 在 Fabric 中运行 OS 本机命令 VS Python

> ID：13441563
> 
> 赞同：4
> 
> 时间：2012-11-18T15:32:59.567
> 
> 标签：python, command, fabric

我正在使用 Fabric 进行项目管理、部署等。我不太了解更方便的运行命令的方式。例如，考虑到我不关心Fabric函数的参数`capture`和参数，以下哪些是优缺点？`shell``local`

```
os.mkdir(path) 
```

VS

```
local("mkdir %s" % path) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:33:49.017

根据您项目的目标，任何一个都可能更合适。这里有一些优点和缺点。

*   python标准库函数的优点
    *   跨平台兼容
    *   通常效率更高，因为没有创建子进程
    *   总体上不太复杂，因为涉及更少的模块、进程、移动部件、shell 解析等（因此也更容易调试）
*   面料的优点`local`
    *   `local`更容易在和之间切换`run`或`sudo`随着项目的变化
    *   更符合`run`和`sudo`

我认为`local`可以使用标准库函数轻松表示的简单命令应该只使用标准库作为默认选择来编写，因为它的复杂性较低。逐个案例，我会问自己哪个更有可能：`fabfile.py`在不同的操作系统上运行这个程序，或者将此命令从本地命令转换为远程命令，然后编码为调用，`local`如果后者更有可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:58:02.097

使用操作系统本机命令意味着您可以将它们作为参数传递给`local`和`run`。这更加一致和灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T18:55:44.993

[已经提到](https://stackoverflow.com/a/13442078/)了一些优点，但我认为使用`local`（和朋友）的另一个优点是非 Python 人员可以更容易地看到发生了什么。

# php - PHP 5.3 自动加载器

> ID：13441564
> 
> 赞同：3
> 
> 时间：2012-11-18T15:33:00.047
> 
> 标签：php, autoload, psr-0

我想使用 PSR-0 标准的方式来自动加载类而不需要添加包含，例如如何用自动加载机制替换下面的代码：

```
namespace Example;
use MyLib\Controller;
include_once './library/MyLib/Controller/AbstractController.php';
class MyController extends Controller\AbstractController {
[...] 
```

所以在上面的例子中，它表明在每个控制器中我都需要包含抽象控制器，这太疯狂了......

我在这里找到了 PSR-0 代码：

[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)

[https://gist.github.com/221634](https://gist.github.com/221634)

但我不知道如何在我的应用程序中实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:49:14.553

您需要在应用程序的第一个脚本中包含（包含/要求语句）带有自动加载器代码的文件

如果您像@Skpd 所说的那样选择使用 Composer 的自动加载器，那么您应该在第一个 PHP 脚本的顶部有这样的代码。

```
include_once __DIR__ . '/composer_autoloader.php'

$loader = new \Composer\Autoload\ClassLoader();
$loader->add('MyLib', __DIR__.'/library/');
$loader->register(); 
```

如果您决定使用 Composer 作为您的供应商经理，那么将您的自定义命名空间添加到您的`composer.json`并包含`vendor/autoload.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:39:05.623

您需要使用自动加载器。有来自 Composer 的示例类加载器：

```
<?php

/*
 * This file is part of Composer.
 *
 * (c) Nils Adermann <naderman@naderman.de>
 *     Jordi Boggiano <j.boggiano@seld.be>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace Composer\Autoload;

/**
 * ClassLoader implements a PSR-0 class loader
 *
 * See https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md
 *
 *     $loader = new \Composer\Autoload\ClassLoader();
 *
 *     // register classes with namespaces
 *     $loader->add('Symfony\Component', __DIR__.'/component');
 *     $loader->add('Symfony',           __DIR__.'/framework');
 *
 *     // activate the autoloader
 *     $loader->register();
 *
 *     // to enable searching the include path (eg. for PEAR packages)
 *     $loader->setUseIncludePath(true);
 *
 * In this example, if you try to use a class in the Symfony\Component
 * namespace or one of its children (Symfony\Component\Console for instance),
 * the autoloader will first look for the class under the component/
 * directory, and it will then fallback to the framework/ directory if not
 * found before giving up.
 *
 * This class is loosely based on the Symfony UniversalClassLoader.
 *
 * @author Fabien Potencier <fabien@symfony.com>
 * @author Jordi Boggiano <j.boggiano@seld.be>
 */
class ClassLoader
{
    private $prefixes = array();
    private $fallbackDirs = array();
    private $useIncludePath = false;
    private $classMap = array();

    public function getPrefixes()
    {
        return $this->prefixes;
    }

    public function getFallbackDirs()
    {
        return $this->fallbackDirs;
    }

    public function getClassMap()
    {
        return $this->classMap;
    }

    /**
     * @param array $classMap Class to filename map
     */
    public function addClassMap(array $classMap)
    {
        if ($this->classMap) {
            $this->classMap = array_merge($this->classMap, $classMap);
        } else {
            $this->classMap = $classMap;
        }
    }

    /**
     * Registers a set of classes
     *
     * @param string       $prefix The classes prefix
     * @param array|string $paths  The location(s) of the classes
     */
    public function add($prefix, $paths)
    {
        if (!$prefix) {
            foreach ((array) $paths as $path) {
                $this->fallbackDirs[] = $path;
            }

            return;
        }
        if (isset($this->prefixes[$prefix])) {
            $this->prefixes[$prefix] = array_merge(
                $this->prefixes[$prefix],
                (array) $paths
            );
        } else {
            $this->prefixes[$prefix] = (array) $paths;
        }
    }

    /**
     * Turns on searching the include path for class files.
     *
     * @param bool $useIncludePath
     */
    public function setUseIncludePath($useIncludePath)
    {
        $this->useIncludePath = $useIncludePath;
    }

    /**
     * Can be used to check if the autoloader uses the include path to check
     * for classes.
     *
     * @return bool
     */
    public function getUseIncludePath()
    {
        return $this->useIncludePath;
    }

    /**
     * Registers this instance as an autoloader.
     *
     * @param bool $prepend Whether to prepend the autoloader or not
     */
    public function register($prepend = false)
    {
        spl_autoload_register(array($this, 'loadClass'), true, $prepend);
    }

    /**
     * Unregisters this instance as an autoloader.
     */
    public function unregister()
    {
        spl_autoload_unregister(array($this, 'loadClass'));
    }

    /**
     * Loads the given class or interface.
     *
     * @param  string    $class The name of the class
     * @return bool|null True, if loaded
     */
    public function loadClass($class)
    {
        if ($file = $this->findFile($class)) {
            include $file;

            return true;
        }
    }

    /**
     * Finds the path to the file where the class is defined.
     *
     * @param string $class The name of the class
     *
     * @return string|null The path, if found
     */
    public function findFile($class)
    {
        if ('\\' == $class[0]) {
            $class = substr($class, 1);
        }

        if (isset($this->classMap[$class])) {
            return $this->classMap[$class];
        }

        if (false !== $pos = strrpos($class, '\\')) {
            // namespaced class name
            $classPath = str_replace('\\', DIRECTORY_SEPARATOR, substr($class, 0, $pos)) . DIRECTORY_SEPARATOR;
            $className = substr($class, $pos + 1);
        } else {
            // PEAR-like class name
            $classPath = null;
            $className = $class;
        }

        $classPath .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

        foreach ($this->prefixes as $prefix => $dirs) {
            if (0 === strpos($class, $prefix)) {
                foreach ($dirs as $dir) {
                    if (file_exists($dir . DIRECTORY_SEPARATOR . $classPath)) {
                        return $dir . DIRECTORY_SEPARATOR . $classPath;
                    }
                }
            }
        }

        foreach ($this->fallbackDirs as $dir) {
            if (file_exists($dir . DIRECTORY_SEPARATOR . $classPath)) {
                return $dir . DIRECTORY_SEPARATOR . $classPath;
            }
        }

        if ($this->useIncludePath && $file = stream_resolve_include_path($classPath)) {
            return $file;
        }

        return $this->classMap[$class] = false;
    }
} 
```

# iphone - 当应用程序在后台时，iOS 仅徽章 LocalNotification 不显示

> ID：13441565
> 
> 赞同：0
> 
> 时间：2012-11-18T15:33:06.540
> 
> 标签：iphone, objective-c, ios

编辑：我正在尝试安排仅更新应用程序徽章的本地通知。通知不应显示警告框等。

当我的应用程序开始使用以下代码时，我正在安排本地通知：

```
NSDate* now = [NSDate date];
NSDate* scheduled = [now dateByAddingTimeInterval:60];
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
    return;
localNotif.fireDate = scheduled;
localNotif.timeZone = [NSTimeZone systemTimeZone];
localNotif.applicationIconBadgeNumber = 1;

NSLog(@"local notif at %@", scheduled);

[application scheduleLocalNotification:localNotif]; 
```

一旦应用程序启动并在 fireDate 之前，我点击了主页按钮。我的应用程序被放在后台。在这种状态下，我的应用程序没有收到通知

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

并且应用程序图标没有装饰徽章。难道我做错了什么 ？

谢谢

编辑：就在发布后，我尝试将 UIApplicationExitsOnSuspend 添加到我的应用 Info.plist 中。当按下主页按钮时，我的应用程序按预期终止，但在预定日期之后仍然没有出现徽章。这可能是因为它是仅限徽章的本地通知吗？

编辑：向通知添加警报实际上会显示警报。诡异的 ...

```
localNotif.hasAction = YES;
localNotif.alertAction = @"Hoho";
localNotif.alertBody = @"Hihi"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:02:26.080

尝试以下代码：

```
UILocalNotification* notification = [[UILocalNotification alloc] init]; 
notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:seconds]; 
notification.timeZone = [NSTimeZone systemTimeZone];
localNotif.hasAction = YES;
localNotif.alertAction = @"Hoho";
localNotif.alertBody = @"Hihi";
notification.applicationIconBadgeNumber= dayTomorrow;

[[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
[notification release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:04:59.497

一个很好的教程是：

[http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

并尝试本教程中的示例应用程序

# glassfish - 在 Glassfish 2 上为 HTTP 和 HTTPS 使用单个端口

> ID：13441566
> 
> 赞同：2
> 
> 时间：2012-11-18T15:33:21.347
> 
> 标签：glassfish

我有一个部署在 Glassfish 上的应用程序，并侦听端口 8181 的 HTTPS 流量（当前）。问题是在部署时，客户很少为服务器创建有效证书。这意味着 HTTPS 无法通过证书检查。

我们的应用程序中有某种类型的内容我们希望通过 HTTP 获取，因为它是静态的，而且获取未加密的事实不是问题。

我们遇到的问题是只有端口 8181 可供用户使用（防火墙等无法更改）。

因此，我们需要一种方法让 Glassfish 监听端口 8181 上的传入连接并识别正在尝试的协议（`[https://myserver:8181](https://myserver:8181)`或`[http://myserver:8181](http://myserver:8181)`）。

我已经看到了 Tomcat 的解决方案： [https ://serverfault.com/questions/47876/handling-http-and-https-requests-using-a-single-port-with-nginx#comment-37501](https://serverfault.com/questions/47876/handling-http-and-https-requests-using-a-single-port-with-nginx#comment-37501)

关于如何用 Glassfish 做到这一点的任何想法？我们可以在那里实现一个钩子并适当地移交给任一处理程序（HTTP 或 HTTPS）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:47:02.710

您正在尝试做的事情称为“*端口统一*”，并且[应该得到 Glassfish](http://antwerkz.com/port-unification-in-glassfish-3-part-1/)的支持，正如[在 Grizzly 中实现的那样](http://jfarcand.wordpress.com/2006/11/07/one-tcp-port-to-rule-them-all/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:16:52.230

我已经查看了那里的所有[答案](https://serverfault.com/questions/47876/handling-http-and-https-requests-using-a-single-port-with-nginx#comment-37501)，它们的说法几乎相同：由于 HTTP 和 HTTPS 之间的差异，这是不可能的。甚至浏览器也使用不同的默认端口来处理 HTTP/HTTPS。

为什么会这样：HTTP 基本上是文本协议，浏览器只是通过 TCP-IP 发送 HTTP（文本）标头。HTTPS 不仅仅是基于 HTTP 的 SSL。首先浏览器执行“握手”，然后它从服务器证书接收，并且从服务器到浏览器的所有信息（反之亦然）都使用握手期间协商的对称密钥进行编码。

由于在非对称加密中使用了 2 个密钥（公钥和私钥），因此没有人（知道私钥的人除外）无法嗅探或更改信息。

*实验*：尝试执行以下操作：将**https**更改为**http**并在末尾显式添加“443”（类似于*[http://google.com:443](http://google.com:443)*）您有“连接已重置”或存储二进制文件的建议（例如证书）。

**注意**：通常服务器设置为拒绝此类请求。

因此，即使您使用相同的连接器来处理 HTTP 和 HHTPS 连接，您也应该使用不同的连接处理程序（我们在实现基于 Netty 的高负载服务器时遇到过这种情况）。

在同一个端口上使用 HTTP 和 HTTPS 的唯一可能性是使用“魔术识别器”，它会检查纯文本是否已经到来或二进制握手。如果我们将该识别器放在容器端（Glassfish 协议处理程序），它将具有相当大的性能开销（检查每个请求是否为 SSL！）。如果我们把它放在代理服务器端（例如 nginx 或其他非阻塞服务器，例如 Netty），性能不会受到太大影响，但无论如何这并不能保证 100% 的成功。

*注意*：代理服务器只识别，然后将请求转发到 2 个不同的端口！

作为结论：总的来说，这是可能的，但从我的角度来看，所需的工作不值得结果。

**编辑**：正如@Bruno 回答的那样，有现成的*魔术识别*器，但 Glassfish 并未*正式*支持它。

# iphone - 如何在 Tap 或 Touch Begin 事件上选择 UIImageVIew

> ID：13441568
> 
> 赞同：0
> 
> 时间：2012-11-18T15:33:36.680
> 
> 标签：iphone, objective-c, ios, xcode

我有两个按钮添加图像和编辑。从添加图像即时添加来自图库的多个图像，并且可以在视图中移动每个图像视图。我制作了一个 Draggable 类来移动每个图像视图。

```
@interface Draggable : UIImageView {
    AppDelegate *objectDelegate;
    CGPoint startLocation;
}

@property (nonatomic,retain) AppDelegate *objectDelegate;
@end

@implementation Draggable
@synthesize objectDelegate;

- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    // Retrieve the touch point
    objectDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
    [[self superview] bringSubviewToFront:self];
}
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
    // Move relative to the original touch point
    CGPoint pt = [[touches anyObject] locationInView:self];
    CGRect frame = [self frame];
    frame.origin.x += pt.x - startLocation.x;
    frame.origin.y += pt.y - startLocation.y;
    [self setFrame:frame];
}
@end 
```

以及我添加图像的方式。

```
UIImage* image = [[UIImage alloc] init];
image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
CGRect cellRectangle;
cellRectangle = CGRectMake(20 ,50,image.size.width/6 ,image.size.height/6 );

//[[self view] addSubview:blockView];
UIImageView *dragger = [[Draggable alloc] initWithFrame:cellRectangle];
[dragger setImage:image];
[dragger setUserInteractionEnabled:YES];

[self.view addSubview:dragger]; 
```

现在在“编辑”按钮上，我想将该特定图像编辑为通过单击选择的 b。就像我有 3 张图片 picOne、picTwo 和 picThree。如果我触摸 picTwo 并单击编辑，我希望 picTwo 进行编辑（打开 aviary 编辑器）。

我所做的就是在 Draggable touches 开始时添加了这一行

```
UITouch *touch = [touches anyObject];

    if ([touch view] == objectDelegate.selectedImageViewFromCanvas)
    {
        // selestecImageViewFromCanvas is UiImageView.
        NSLog(@"dragger");
    } 
```

但这种说法总是错误的。我希望每个人都能得到我想要的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:49:02.387

Thanks Arpit . i have used gesture recognizer [link](http://www.icodeblog.com/2010/10/14/working-with-uigesturerecognizers/) . i have edit this code. on imagepicker i have set tag on UiView (holderview) and UIImageView (imageview) and when i tap on image then i can get tag value of that holder [sender view].tag . and from that tag i am getting that UIImageView tag like [sender view].tag + 1 ( coz if my holderView tag is 101 than my UIImage tag is 102\. )

# php - 如何在mysql中制作这种表？

> ID：13441583
> 
> 赞同：0
> 
> 时间：2012-11-18T15:34:43.790
> 
> 标签：php, mysql, database, database-optimization

在我的系统中，我有两个用户：

*   请求发件人
*   用户收到请求

我想创建我的数据库表 

```
1-requestTable 
__________
requestid 
createdat 

2-usersTable
__________
userid
name
answer(yes/no) 
```

如果我有 100 个用户并且我只发送三个请求只会是这样的 

```
RequestID  || UserID || Answer  ||
________   || _____  || ______  ||
req1       || user1  ||  yes    ||
req1       || user2  ||  No     ||
req1       || user3  ||  No     ||
req1       || user4  ||  Yes    ||
req1       || user5  ||  Yes    || 
```

这将仅为 3 个请求为 100 个用户插入 300 条记录，这不是最佳的。

以最佳方式创建数据库的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:46:05.977

如果请求发送给每个人，那么您可以只存储是的答案，这将减少行数。

# javascript - mongojs实现非阻塞查询

> ID：13441584
> 
> 赞同：0
> 
> 时间：2012-11-18T15:34:52.653
> 
> 标签：javascript, node.js, callback, asynchronous

我知道这一定是一个非常愚蠢的问题，但我不知道如何让它发挥作用。我正在学习 node.js 和 mongojs，这是我的问题：

这是我的 server.js

```
server.get("/", function(request, response) {
  if (user.whatever()) {
    return response.send('true');
  } else {
    return response.send('false');
  }
}); 
```

这是我的 user.js

```
exports.whatever = function(request, response) {
  return db.tableName.findOne({
    fieldName: null
  }, function(error, record) {
    if (record === null) {
      return false;
    } else {
      return true;
    }
  });
}; 
```

该函数返回“未定义”。我想这是一个阻塞代码的问题，但不知道如何转换它。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:04:30.623

你应该这样做：

服务器.js

```
server.get("/",user.whatever, function(request, response) {
  if (request.user)
    response.send('true');
  else
    response.send('false');
}); 
```

用户.js

```
exports.whatever = function(request, response, next) {
  db.tableName.findOne({ fieldName: null }, function(error, record) {
    if (record === null) request.user = false;
    else request.user = true;
    next();
  });
}; 
```

# c - C - DNS 代理随时为每个请求提供服务

> ID：13441586
> 
> 赞同：0
> 
> 时间：2012-11-18T15:35:09.217
> 
> 标签：c, dns, udp, nonblocking

我在 C 中创建了 DNS 代理，如下所示：

```
"socket" - create socket to serve client
"bind" - bind that socket
while (true) {
    "recvfrom" - a package from socket 
    "socket" - create socket for dns server
    (1)
    "sendto" - send package to dns server
    "recvfrom" - respond from dns server
    "sendto" - send respond to client
} 
```

它正在工作。但是，如果我在位置 (1) 时收到另一个请求怎么办？如何添加一些等待请求的队列？即使我正在处理另一个请求，如何改变我为每个请求提供服务的这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:59:15.403

仅当您将服务编写为异步时，使用非阻塞套接字才会有益，即在等待来自下游的另一个数据包之前不要等待对上游 DNS 查询的响应。

你应该考虑`select`两个套接字，当一个数据包进来时，你会弄清楚它来自哪里。如果是来自下游，则向上游的 DNS 发送请求；如果是来自 DNS 的响应，则找出哪个客户端发送了原始请求并在那里响应。在该结构中，代码中没有任何位置对您的某个套接字没有响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:31:27.590

您需要`listen()`在服务器套接字上，并`listen`允许您指定一个积压的连接。您将能够在每个周期处理多达该数量的新客户到达。

然后您在服务器套接字和任何未完成的客户端套接字上循环运行`select()`，维护它们的列表：

```
 select(nfds, readfds, writefds, errorfds, timeout); 
```

退出时`select`（除非超时），您将检查三个返回列表并处理任何准备好读取、写入或处于错误状态的套接字，并适当地分派它们。

[您将在此处](http://www.binarytides.com/server-and-client-example-with-c-sockets-on-linux/)找到详细示例（它适用于 Linux，但易于移植）。

# c# - 如何在flowlayoutpanel中动态添加文本框和标签并将它们存储在数据库中？

> ID：13441587
> 
> 赞同：3
> 
> 时间：2012-11-18T15:35:32.527
> 
> 标签：c#, winforms

我正在制作节奏记录，并且正在使用 Flowlayoutpanel。
我想做的是根据用户的需要动态创建标签和文本框。用户将输入他/她的任务，如图所示，然后它将以数字告诉目标。

例如阅读书页。目标将分为7天。前面的文本框`Actual=Goal/7`。Done 前面的文本框将显示用户输入当天用户做了什么。
我在这里面临的问题是，如何创建另一个具有相同文本框和标签的 FlowLayout 面板，如图所示，以显示多个用户任务。

此外，我有兴趣将它们存储到数据库中。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:02:47.530

将形成整体的标签和文本框组合到一个用户控件中。UserControl 设计器的工作方式与表单设计器类似。您可以在其上放置控件，可以创建事件处理程序并添加属性以使控件的值可公开访问。

我也会将您添加到 flowLayoutPanel1 的控件存储在一个列表中；这使得从代码中访问它们并将相应的值存储在数据库中变得更加容易。

```
private List<TaskUserControl> _tasks = new List<TaskUserControl>();

private void AddTask()
{
    var task = new TaskUserControl();
    _tasks.Add(task);
    flowLayoutPanel1.Controls.Add(task);
} 
```

* * *

[如何：向 DataTable 添加行](http://msdn.microsoft.com/en-us/library/5ycd1034%28v=vs.80%29.aspx)(msdn)如何使用 c# sql server (stackoverflow)
[向现有表添加新行](https://stackoverflow.com/q/1791042/880990)

# git - 解决方法或 git hook 使 git 识别文本文件的存档

> ID：13441588
> 
> 赞同：2
> 
> 时间：2012-11-18T15:35:42.290
> 
> 标签：git, hook, archive, githooks

有没有一种方法可以使用 git 处理档案中的文本文件，而无需持续解压缩它们？

大概是为了让 git 想到像目录一样的档案，使用 git hooks 或其他舒适的方式。

（我正在考虑 Win32 和 Linux 上的挂载点，但我不确定这是否方便，因为我现在看到的每个文件都应该单独映射。）

一个应用程序是 git 可以很好地处理 ODT 文件。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:11:10.930

我建议你阅读[Pro Git 的 Diffing Binary Files](http://git-scm.com/book/ch7-2.html "Pro Git：自定义 Git - Git 属性")小节。他们举了一个关于区分 MS Word 文件的例子，我认为你可以使用它——也许`oodiff`像[VonC 所说](https://stackoverflow.com/a/13443603/641451 "VonC 答案")的那样将它结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:15:38.237

不是真的，因为 Git 的要点之一是要*快*，而那（使用，即在档案中的文本文件进行比较、合并、分支）不是。

特别是对于 ODT 文档，已经提出了[一些建议](http://alecthegeek.wordpress.com/2009/10/01/git-and-openoffice-org/)，但主要的建议是区别于一种专门的操作工具，例如合并（like [`xmerge`](http://www.openoffice.org/xml/xmerge/)or [`oodiff`](http://www-verimag.imag.fr/~moy/opendocument/)）。
（即，或使用[纯文本格式](https://stackoverflow.com/a/8795574/6309)）

# c++ - Boost.Regex 解析

> ID：13441591
> 
> 赞同：0
> 
> 时间：2012-11-18T15:36:11.873
> 
> 标签：c++, regex, boost

假设我想用 boost 正则表达式解析一种简单的编程语言。

```
import a
import b

class c 
```

现在我想要这样的布局：

```
#include <string>
#include <boost/filesystem.hpp>
#include <exception>

using namespace std;
using namespace boost;
using namespace boost::filesystem;

class parser
{
    string _source;
    unsigned int pos;
public:
    parser(const string& source) : _source(source), pos(0) {}

    string expect(const regex& expr)
    {
        string s = next(expr)
        if (s != "")
            return s;
        else
        {           
            --pos;
            throw exception("Expected another expression.");
        }
    }

    string next(const regex& expr)
    {
        // Removing all whitespace before first non-whitespace character
        // Check if characters 0 till x matches regex expr
        // Return matched string of "" if not matched.
    }

    bool peek(const regex& expr);

    parse()
    {
        regex identifier("\a*");
        if (peek("import"))
            string package = expect(identifier);
        else if (peek("class"))
            string classname = expect(identifier);
    }
}; 
```

现在我需要你的帮助来定义函数 parser::next(const regex&)。我不清楚如何通过 std::string 使用 boost 正则表达式进行迭代。

我希望有一个人可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:44:30.410

假设 Boost 正则表达式使用与标准 C++ 库中的正则表达式类似的方法（我意识到标准中的那些是基于来自 Boost 的提议，但其他组件并不完全相同），您将使用获得的信息在`std::match_results<...>`对象中确定与匹配相关的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:33:24.930

对于有兴趣的人。我在当前的实现中以这种方式解决了它：

**请注意，可能缺少关键部分，但这回答了问题**

```
int submatch(const std::string& input, const regex& e)
{
   boost::match_results<std::string::const_iterator> what;
   if(0 == boost::regex_match(input, what, e, boost::match_default | boost::match_partial))
   {
        // the input so far could not possibly be valid so reject it:
        return 0;
   }
   // OK so far so good, but have we finished?
   if(what[0].matched)
   {
      // excellent, we have a result:
      return 2;
   }
   // what we have so far is only a partial match...
   return 1;
}

void skip_ws()
{
    // Skip all whitespaces
    regex ws("\\s");
    while ((pos < (source.length() - 1)) && boost::regex_match(source.substr(pos++, 1), ws))
    {
    }
    pos -= 1;
}

string lex(const token& t)
{
    skip_ws();
    string sub;

    unsigned int subpos = pos;
    bool matched = false;
    while (subpos < (source.length() - 1))
    {
        sub.push_back(source[subpos++]);
        int result = submatch(sub, t.expr);
        if (result == 1) // Partial
        {
            continue;
        }
        else if (result == 2)
        {

            matched = true;
            continue;
        }
        else if (result == 0) // No match
        {
            if (matched)
            {
                sub.erase(sub.end()-1);
                subpos -= 1;
                break;
            }
            else
            {
                return "";
            }
        }
    }

    return sub;
}

string expect(const token& t)
{
    cout << " string expect(\"" << t.expr << "\")";
    string s = lex(t);
    pos += s.length();
    if (s != "")
    {
        cout << endl;
        return s;
    }
    else
    {            
        --pos;
        cout << "-> False" << endl;
        throw string("Expected another expression.");
    }
} 
```

# jquery - 我将如何在 CoffeeScript 中编写它？

> ID：13441592
> 
> 赞同：1
> 
> 时间：2012-11-18T15:36:40.197
> 
> 标签：jquery, ruby-on-rails, coffeescript, waitforimages

我在第一个 Rails 应用程序中遇到了 CoffeeScript 问题。我正在使用[waitForImages](https://github.com/alexanderdickson/waitForImages) jQuery 插件，它保存在一个名为`waitforimages.jquery.js`. Rails 自动创建`home.js.coffee`，我想在其中包含以下 jQuery 片段：

```
$('#fullbleed').waitForImages(function() {
    $(this).fadeIn(3000);
}); 
```

但是我将如何使用 CoffeeScript 符号来编写它呢？

**更新**

现在一切都很好，所以我想我会发布我的最终代码。问题之一是我没有在home.js.coffee*之前*`waitForImages`加载插件。

 *咖啡脚本：

```
$(document).ready -> $('#fullbleed').waitForImages -> $(@).fadeIn 3000 
```

HTML：

```
<!DOCTYPE html>
<html>
<head>
  <title>Title</title>
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery.waitforimages.js?body=1" type="text/javascript"></script>
  <script src="/assets/home.js?body=1" type="text/javascript"></script>
</head>
<body>
...
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T15:38:54.763

使用`-> ...`而不是`function(){ ... }`. 或者，您也可以`this`使用`@`.

```
$('#fullbleed').waitForImages ->
    $(@).fadeIn(3000) 
```

如果你真的很喜欢保存字符，那么你也可以省略最后两个括号，得到：

```
$('#fullbleed').waitForImages -> $(@).fadeIn 3000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T15:39:11.920

根据非常有用的[http://js2coffee.org](http://js2coffee.org)：

```
$("#fullbleed").waitForImages ->
  $(this).fadeIn 3000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T15:39:03.980

```
$('#fullbleed').waitForImages ->
  $(@).fadeIn 3000 
```

甚至：

```
$('#fullbleed').waitForImages ->$(@).fadeIn 3000 
```*

# android - android RelativeLayout 错误“找不到资源标识符....”

> ID：13441594
> 
> 赞同：3
> 
> 时间：2012-11-18T15:36:46.610
> 
> 标签：android, android-relativelayout

我正在尝试在 Android 中编写我的第一个相对布局。

我有一个工作正常的线性布局，所以我的相对布局 xml 文件是基于它的。

我收到以下错误：

```
 error: No resource identifier found for attribute 'layout_bottom' in package 'android' 
```

xml（部分）代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <TextView
    android:id="@+id/text_1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="--"
    android:layout_alignParentTop="true"
    /> 

    <RadioGroup                                <-- the error is given in this line
          android:id="@+id/kk"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:orientation="vertical"
          android:layout_bottom="@id/text_1"
          > 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:38:31.207

它不是`layout_bottom`，是`layout_alignBottom`

[http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:44:06.383

进行如下更改：

```
 <RadioGroup
          android:id="@+id/kk"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:orientation="vertical"
          android:layout_below="@id/text_1"
       /> 
```

# javascript - IE8：使用 Javascript 重新排列节点似乎正在删除事件处理程序

> ID：13441595
> 
> 赞同：1
> 
> 时间：2012-11-18T15:36:52.867
> 
> 标签：javascript, html, dom, internet-explorer-8

我有一个侧面有一个小按钮的表格，它会自动移动到用户鼠标所在的任何行。当鼠标移动时，按钮的包含范围（以及其中的所有元素）使用 insertBefore() 函数移动。然而，按钮有一个注册的 onclick 事件处理程序（使用 attachEvent()），一旦按钮被移动，onclick 事件将不再触发。

这是一个已知的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:15:59.197

Using `insertBefore`, `appendChild` and other DOM manipulation methods keeps event handlers in all browsers, so that's not your problem.

I've tried to reproduce described problem and I see the bug with the click in IE8\. The button simply sticks in pressed state and click handler doesn't fire. Never seen such bug before.

To fix this issue you can use `mouseenter` event instead of `mouseover`. (This event is built in in IE, but not in all modern browsers. To make this crossbrowser you can use jQuery `mouseenter`).

JSFiddle links (look in IE8): [with bug](http://jsfiddle.net/t6spj/) and [fixed version](http://jsfiddle.net/t6spj/1/)

# objective-c - 为什么 appendAttributedString 在新行中显示附加字符串？

> ID：13441597
> 
> 赞同：8
> 
> 时间：2012-11-18T15:36:54.863
> 
> 标签：objective-c, nsattributedstring

比如我有@“很久很久以前。”，@“有一个孩子。”，@“bla bla bla”等3个句子，我在下面做了一个方法

```
- (void)appendText:(NSString*)text
{
    NSMutableAttributedString *originalText = [[NSMutableAttributedString alloc] initWithAttributedString:_textView.attributedText];
    NSAttributedString *appendText = [[NSAttributedString alloc] initWithString:text
                                                                     attributes:@{NSForegroundColorAttributeName:DefaultTextColor}];

    [originalText appendAttributedString:appendText];
    _textView.attributedText = originalText;
} 
```

所以我调用了 appendText 3 次

```
[self appendText:@"Long long ago."];
[self appendText:@"There is a child."];
[self appendText:@"bla bla bla."]; 
```

我期望的结果是

```
Long long ago.There is a child.bla bla bla. 
```

但输出是

```
Long long ago.
There is a child.
bla bla bla 
```

为什么 appendAttributedString 在新行中显示附加字符串？如何将附加文本放在一个段落中？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T20:38:18.003

根据我自己的经验，当您设置 的`attributedText`属性时`UITextView`，文本会添加一个换行符。因此，当您稍后`attributedText`从 中检索 时`UITextView`，此换行符位于文本的末尾。因此，当您附加更多文本时，换行符位于中间（另一个添加到末尾）。

我不知道这是否是一个错误`UITextView`或可能`NSAttributedString`。

一种解决方法是按如下方式更新您的代码：

```
- (void)appendText:(NSString*)text {
    NSMutableAttributedString *originalText = [[NSMutableAttributedString alloc] initWithAttributedString:_textView.attributedText];
    // Remove any trailing newline
    if (originalText.length) {
        NSAttributedString *last = [originalText attributedSubstringFromRange:NSMakeRange(originalText.length - 1, 1)];
        if ([[last string] isEqualToString:@"\n"]) {
            originalText = [originalText attributedSubstringFromRange:NSMakeRange(0, originalText.length - 1)];
        }
    }

    NSAttributedString *appendText = [[NSAttributedString alloc] initWithString:text attributes:@{NSForegroundColorAttributeName:DefaultTextColor}];

    [originalText appendAttributedString:appendText];
    _textView.attributedText = originalText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T10:59:52.700

```
NSMutableAttributedString *titleAttrString    = [[NSMutableAttributedString alloc] initWithString:
                                                 @"Hello" attributes:
                                                 [NSDictionary dictionaryWithObjectsAndKeys:
                                                  [UIFont  systemFontOfSize:15],NSFontAttributeName,
                                                  [UIColor blackColor], NSStrokeColorAttributeName,nil]];

NSAttributedString *descAttrString    = [[NSAttributedString alloc] initWithString:
                                         @"\nWorld" attributes:
                                         [NSDictionary dictionaryWithObjectsAndKeys:
                                          [UIFont  systemFontOfSize:19],NSFontAttributeName,
                                          [UIColor blueColor], NSStrokeColorAttributeName,nil]];
[titleAttrString appendAttributedString:descAttrString];

NSDictionary *stringAttributes = [NSDictionary dictionaryWithObject:
[UIFont systemFontOfSize:20]forKey: NSFontAttributeName];

CGSize tsize = [@"Test" boundingRectWithSize:CGSizeMake(self.view.frame.size.width-20, CGFLOAT_MAX)
                                     options:NSStringDrawingTruncatesLastVisibleLine|NSStringDrawingUsesLineFragmentOrigin
                                  attributes:stringAttributes context:nil].size;

UILabel *menuTitle = [[UILabel alloc] initWithFrame:CGRectMake(1, 1, CGRectGetWidth(self.view.frame)-2, tsize.height+2)];
menuTitle.numberOfLines = 0;
menuTitle.baselineAdjustment = UIBaselineAdjustmentAlignBaselines;
menuTitle.textAlignment = NSTextAlignmentCenter;
menuTitle.adjustsFontSizeToFitWidth = YES;
menuTitle.minimumScaleFactor = 0.5f; // Chnage as your need
[GlobalSettings setCellLableProperities:menuTitle font:[GlobalSettings normalFont]];
menuTitle.font = [GlobalSettings getFontWith:9];
menuTitle.textColor = [UIColor colorWithRed:0.8 green:0.11 blue:0.11 alpha:1.0];

menuTitle.attributedText = titleAttrString;
[self.view addSubview:menuTitle]; 
```

# php - Wordpress 类别描述存储

> ID：13441599
> 
> 赞同：0
> 
> 时间：2012-11-18T15:37:00.103
> 
> 标签：php, mysql, wordpress, wp-list-categories

数据库中的类别描述在哪里，或者如何使用 wp_list_categories( $args ) 按描述对类别进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:29:13.053

类别描述在 wp_term_taxonomy 表中。

# javascript - 如何使用 Jquery 动态克隆选项卡

> ID：13441602
> 
> 赞同：2
> 
> 时间：2012-11-18T15:37:39.337
> 
> 标签：javascript, jquery, dynamic, tabs, clone

您好，我正在开发一个 Web 应用程序，但我遇到了克隆问题。基本上，只要用户选择一个复选框，就会出现一个选项卡。然后，用户可以通过下拉框、搜索框和添加按钮将详细信息添加到此选项卡上的表格中。

当用户选择一个不同的复选框时，一个带有空白表格的新选项卡会出现在上一个选项卡的旁边。我希望用户能够选择从先前选择的选项卡复制或从空白开始。

开始空白似乎很简单我添加了一个显示在选项卡中的链接，一旦单击该链接就会被隐藏，并且选项卡会用空白表提醒。

```
$(document).ready(function(){
    $("#tabs").tabs();

    $(".selectedCodeCheckbox").change(function(){
        if ($(this).is(':checked')) {

            // show tab         
            $("#tabs").find(".tabheader-"+$(this).val()).css('display', 'block');
            $("#tabs").find(".tabpanel-"+$(this).val()).css('display', 'block');
            $("#tabs").tabs( "select" , $("#tabs").find(".tabpanel-"+$(this).val()).attr('id'));
            $(".step2").css('display', 'block');
        } else {
            // remove tab
            $("#tabs").find(".tabheader-"+$(this).val()).css('display', 'none');
            $("#tabs").find(".tabpanel-"+$(this).val()).css('display', 'none');
        }
    }); 
```

这将在选中复选框后显示选项卡。

```
<div style="width: 600px; float: left; margin-left: 30px; margin-top: 10px;">
                    <table id="clubListTable_${instanceEntry.key}" class="reports" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>Unit Type</th>
                                <th>Unit Name</th>
                                <th><spring:message code="generic.male" text="Male" /></th>
                                <th><spring:message code="generic.female" text="Female" /></th>
                                <th>
                                    <spring:message code="generic.remove" text="Remove" />
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="emptyRow">
                                <td colspan="5">No Units Added</td>
                            </tr>
                        </tbody>
                        </table>

                </div> 
```

这是我希望克隆的选项卡中的表。每个选项卡都是从同一个 `<div id="tabs"`.

选项卡的放置顺序是按字母顺序排列的。因为只有 6 个复选框，所以只能有 1-6 个选项卡。

另外，如果可能的话，有人还可以解释如果它是第一个选中的复选框，我将如何不给用户任何选项。此外，用户不能选择多个复选框来生成多个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:04:06.060

我在这里做了示例： http: [//jsbin.com/welcome/50444/](http://jsbin.com/welcome/50444/) 也许一个例子会对你有所帮助

```
<div id="tabs" style="height:300px;">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li id="tab3"><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">content 1</div>
    <div id="tabs-2">content 2</div>
    <div id="tabs-3">content 3</div>
</div>

<script>
  $(function() {
      $("#tabs").tabs();   
  }); 

  function cloneLast(){
    var lastDiv = $('#tabs div:last-child');
    var lastLi = $('#tabs').find('li').last().find('a');   
    $("#tabs").tabs('add','#newTab',lastLi.html());
    $('#newTab').html(lastDiv.html());
  }
</script>  
<a href="#" onclick="if($('#tab3').is(':visible')) $('#tab3').hide(); else $('#tab3').show();">toggle visibility</a>  

<a href="#" onclick="cloneLast()">clone last</a> 
```

# java - 数据库（mysql）连接正常，但 jdeveloper 无法启动我的应用程序

> ID：13441604
> 
> 赞同：2
> 
> 时间：2012-11-18T15:37:46.357
> 
> 标签：java, mysql, jdeveloper

我在 JDeveloper 11.1.2.3.39.62.76.1 上有一个项目）。我已经完成了创建数据库连接向导，一切正常，但是当我尝试启动我的应用程序时，这是我得到的：

```
Caused By: weblogic.common.resourcepool.ResourceSystemException:
Cannot load driver class: com.mysql.jdbc.Driver     
   at weblogic.jdbc.common.internal.JDBCUtil.parseException(JDBCUtil.java:301)
   at weblogic.jdbc.common.internal.ConnectionEnvFactory.loadDriver(ConnectionEnvFactory.java:75)
   at weblogic.jdbc.common.internal.ConnectionEnvFactory.<init>(ConnectionEnvFactory.java:131)
   at weblogic.jdbc.common.internal.ConnectionPool.initPooledResourceFactory(ConnectionPool.java:712)
   at weblogic.common.resourcepool.ResourcePoolImpl.start(ResourcePoolImpl.java:235) 
```

有没有人可以发光？我已经包含了 mysql 连接器 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:50:27.210

您需要将 mySQL 的 jdbc jar 文件添加到嵌入式 WebLogic lib 目录。

# javascript - 使用 javascript 创建类似按钮 facebook 时出错？

> ID：13441605
> 
> 赞同：0
> 
> 时间：2012-11-18T15:37:54.347
> 
> 标签：javascript, facebook

我有一个示例代码：在 Javascript 中：

```
function initFB(appId) {
    this.appId = appId;
    window.fbAsyncInit = function() {
        FB.init({appId: appId, status: true, cookie: true, xfbml: true});

        // Additional initialization code such as adding Event Listeners goes here
        insertLikeButton('https://www.facebook.com/cocacola', 'facebooklike')
    };

    if(document.getElementById('fb-root')) return;
    var fbr = document.createElement('div'); fbr.id = 'fb-root';
    document.getElementsByTagName('body')[0].appendChild(fbr);
    (function(d, s, id, appId) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = '//connect.facebook.net/en_US/all.js#xfbml=1&appId=' + appId;
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk', this.appId));

    function insertLikeButton(url, id) {
        var lb = document.createElement('fb:like');
        lb.id = 'fblike';
        lb.setAttribute('width', '450');
        lb.setAttribute('href', this.url);
        lb.setAttribute('show_faces', 'false');

        lb.style.overflow = 'hidden';
        lb.style.cursor = 'pointer';
        lb.style.width = '50px';
        lb.style.height = '25px';
        lb.style.zIndex = '99999';
        document.getElementById(this.id).appendChild(lb);
    }  
} 
```

和 html

```
<div id="facebooklike"></div>
<script>
var fb = new initFB('zzzzzz');
</script> 
```

当我运行代码时，按钮无法显示，如何解决？

# sql - SQL 时钟数据操作

> ID：13441606
> 
> 赞同：0
> 
> 时间：2012-11-18T15:37:57.550
> 
> 标签：sql

我们有一个 SQL 2008 表，它按以下顺序保存出勤数据。

```
uid 时钟 collectdate 类型

 1 2012-10-30 16:13:07.000 2012-10-30 19:29:58.000 在
 1 2012-10-30 21:18:50.000 2012-10-30 22:29:58.000 在
 2 2012-10-30 16:13:07.000 2012-10-30 19:29:58.000 在
 2 2012-10-30 21:18:50.000 2012-10-30 22:29:58.000 在

```

正确的顺序是将“类型”列设置为 in 和 out。但这正是我面临的问题，因为该系统正在用于管理承包商和兼职人员，他们总是在打卡或打卡之前错过按正确的按钮或根本没有按时钟。

我们目前依靠这个存储过程来将时钟数据按正确的顺序排列

```
    插入到出席TBL（UID，收集日期，打卡，打卡）

选择
用户标识符
,收集日期
,MAX（类型 = 'in' 然后时钟结束的情况）时钟
,MAX（类型 = 'Out' 然后时钟结束的情况）时钟输出
来自 RAWCLOCKTBL
按 UID 分组，收集日期
返回

```

有什么方法可以将“时钟”值以正确的顺序移动到同一行，同时忽略“类型”列。即，将上表移至。

```
uid 时钟            
1 2012-10-30 16:13:07.000 2012-10-30 21:18:50.000
2 2012-10-30 16:13:07.000 2012-10-30 21:18:50.000

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:47:03.857

以下查询对每个日期的 UID 的 IN 和 OUT 时间以及 UID 和 DATE 上的 JOIN 进行分组，以获得所需的输出。LEFT JOIN 将确保在没有 OUT 的情况下返回这些条目（如果需要）。

```
SELECT 
    A.UID, 
    CONVERT(DATE, clock) 'ClockDate', 
    min(clock) 'ClockIn', 
    max(clock) 'ClockOut'
FROM 
    attendanceTBL 
GROUP BY uid, CONVERT(DATE, clock) 
```

# ruby - 机架应用，参数作为关键

> ID：13441609
> 
> 赞同：0
> 
> 时间：2012-11-18T15:37:59.290
> 
> 标签：ruby, post, request, rack

我正在请求机架应用程序

```
curl -X POST -d '{"device":{"username":"123456","name":"some name","location":"Hidden"}}' http://localhost:9292/device 
```

在机架应用程序中，我正在创建请求对象

```
request = Rack::Request.new(env) 
```

而且我希望 POST 数据将在 params 散列中

```
request.params => should be a normal hash 
```

但不知何故，它并不完全正确。我有这种格式的参数

```
{{"device":{"username":"123456","name":"some name","location":"Hidden"}}=>nil} 
```

所以我需要的params数据就变成了hash的key。为什么会这样以及如何使它像这样正常哈希

```
{"device":{"username":"123456","name":"some name","location":"Hidden"}} 
```

? 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:45:54.497

通常`-d`期望数据以`var=val`格式传递，并且由于您没有传递`var`它，因此会将您的数据转换为`var`并为其分配一个空字符串。

当你`curl`像这样使用时，你会得到以下参数：

```
 params = {'{"device":{"username":"123456","name":"some name","location":"Hidden"}}'=>nil} 
```

然后您只需将其解析为 json：

```
require 'json'

JSON.parse params.keys.first    
=> {"device"=>{"username"=>"123456", "name"=>"some name", "location"=>"Hidden"}} 
```

**或者，您可以像这样传递参数：**

```
curl -X POST -d 'json={"device":{"username":"123456","name":"some name","location":"Hidden"}}' :9292 
```

然后你得到以下参数：

```
params = {'json'=>'{"device":{"username":"123456","name":"some name","location":"Hidden"}}'} 
```

并简单地解析为`JSON`：

```
JSON.parse(params['json'])

#=> {"device"=>{"username"=>"123456", "name"=>"some name", "location"=>"Hidden"}} 
```

# html - html5画布中的双线描边

> ID：13441610
> 
> 赞同：5
> 
> 时间：2012-11-18T15:38:02.130
> 
> 标签：html, canvas, path, border, stroke

**我想使用html5 画布路径**绘制一个具有双线边框的形状。默认笔画 (context.stroke()) 具有单线类型的路径。我可以在原始形状内绘制一个类似的形状以生成一个看起来像由两条边界线组成的图形，但我想要某种通用解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T17:22:33.573

有几种方法可以做到这一点。一种简单的方法是画一条粗线并“剪掉”它的中间，留下两个较小的笔划。

您要做的是**在内存中的临时画布上**绘制任何类型的路径，然后在同一画布上绘制厚度较小且`globalCompositeOperation`设置为的相同路径`destination-out`。

这会给你你想要的形状，基本上是两条线，它们之间是透明的。

*然后*将该画布绘制到上面有任何东西（复杂背景等）的真实画布上。

这是一个例子：

[http://jsfiddle.net/uTbsC/](http://jsfiddle.net/uTbsC/)

# asp.net - 将两个角色添加到用户并且认证失败

> ID：13441611
> 
> 赞同：0
> 
> 时间：2012-11-18T15:38:02.207
> 
> 标签：asp.net, asp.net-mvc

在我的网站中，我有三个角色（编辑、审稿人和作者）在某些情况下，我需要通过编码添加我的用户所有三个角色。我使用此代码，它保存了所有用户，但是。我无法使用用户名和密码登录。请指导我谢谢。

```
Membership.CreateUser(TextBox1.Text, "123456", "email");
Roles.AddUserToRole(TextBox1.Text,  "Editor" );
Roles.AddUserToRole(TextBox1.Text, "Author");
Roles.AddUserToRole(TextBox1.Text, "Reviewer"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:27:35.537

调用返回状态的 CreateUser 的扩展版本。确保它返回成功状态。此外，通过调用 Roles.GetRolesForUser("..") 或类似的东西来进行一些健全性检查，以确认您的角色确实被添加了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:20:30.760

检查用户帐户是否标记为已批准且未锁定。您可能已将会员系统配置为在“未批准”状态下创建帐户，或者您可能尝试使用无效密码登录太多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:42:54.270

角色只能是一个。创建一个包含所有这些角色的所有权限的角色并将其分配给用户

# google-app-engine - Play Framework With Google appengine 模型更新

> ID：13441622
> 
> 赞同：0
> 
> 时间：2012-11-18T15:39:32.207
> 
> 标签：google-app-engine, playframework, playframework-1.x, siena

我有一个部署在 Google Appengine 上的 Play 应用程序。我将 Play 1.2.4 与模块一起使用：crudsiena 2.0.1 gae-1.6 secure siena 2.0.5

我的问题如下：我已经部署了具有多个模型的应用程序，并且该应用程序运行良好。过了一段时间，我决定改进需要在模型类中引入新变量的应用程序。如果我这样做，我的本地主机工作得很好，但是当我将新版本上传到 GAE 时，当我尝试访问使用旧版本创建的模型对象时收到错误，因为它无法关联新变量：

```
play.exceptions.JavaExecutionException: siena.SienaException: java.lang.IllegalArgumentException: Can not set boolean field models.Dataset.reportEnabled to java.lang.Integer
at play.mvc.ActionInvoker.invoke(ActionInvoker.java:229)
at play.server.ServletWrapper$ServletInvocation.execute(ServletWrapper.java:540)
at play.Invoker$Invocation.run(Invoker.java:265)
at play.server.ServletWrapper$ServletInvocation.run(ServletWrapper.java:531)
at play.Invoker.invokeInThread(Invoker.java:67)
at play.server.ServletWrapper.service(ServletWrapper.java:130)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

在这种情况下，布尔型 reportEnabled 变量是新引入到 Dataset 类中的。我的问题是如何通过保留旧对象来使应用程序工作（可能只是为新变量提供默认值）。

非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:05:07.123

通过将布尔值更改为布尔值来解决问题。它没有改变以前条目中数据库的结构，但至少我不再收到错误。

# entity-framework - EntityCollection 的延迟加载

> ID：13441623
> 
> 赞同：1
> 
> 时间：2012-11-18T15:39:39.160
> 
> 标签：entity-framework

我正在使用实体框架 5。我正在尝试延迟加载实体集合，我将模型剥离到最简单的框架，以获得一个简单的可运行示例。

这是我的模型：

```
public class A
{

    public int Id { get; set; }

    public EntityCollection<B> Bs
    {
        get { return bs; }
        set { bs = value; }
    }
    private EntityCollection<B> bs;

    public A()
    {
        bs = new EntityCollection<B>();
    }
}

public class B
{
    public int Id { get; set; }
    public A A { get; set; }
}

public class DbModel : DbContext
{
    public DbSet<A> As { get; set; }
    public DbSet<B> Bs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<A>()
                    .HasKey( t => t.Id )
                    .HasMany(a => a.Bs)
                    .WithRequired(b => b.A);
        modelBuilder.Entity<A>()
                    .Property(t => t.Id)
                    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        modelBuilder.Entity<B>()
                    .HasKey(b => b.Id)
                    .HasRequired(b => b.A);
        modelBuilder.Entity<B>()
                    .Property( t => t.Id )
                    .HasDatabaseGeneratedOption( DatabaseGeneratedOption.Identity );
    } 
```

这是证明我的问题的测试：

```
 [TestInitialize]
    public void Initialize()
    {
        model = new DbModel();
        model.Configuration.ProxyCreationEnabled = false;

        if (model.Database.Exists()) model.Database.Delete();

        model.Database.Create();
        A a = model.As.Create();
        model.As.Add(a);
        B b = model.Bs.Create();
        a.Bs.Add(b);

        model.ChangeTracker.DetectChanges();
        model.SaveChanges();
    }

   [TestMethod]
    public void TestMethod1()
    {
        // arrange
        DbModel tModel = new DbModel();
        A a = tModel.As.First();

        // act
        a.Bs.Load();
    } 
```

这是结果：

测试方法 TestProject1.UnitTest1.TestMethod1 抛出异常：

> System.InvalidOperationException：当此 RelatedEnd 的所有者为空时，不允许请求的操作。使用默认构造函数创建的 RelatedEnd 对象只能在序列化期间用作容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:04:34.573

`EntitySet`是 linq-to-sql API 的一部分。这并不能解释这个特殊的例外，但是与 DbContext 的不太顺利的合作也就不足为奇了。当您使用 DbContext API 时，通常将 1:n 导航属性定义为如下接口`ICollection`：

```
public virtual ICollection<B> Bs { get; set; } 
```

（`virtual`为延迟加载启用代理创建）

顺便说一句：您可以`model.Database.Delete()`在不检查数据库是否存在的情况下使用。而`DetectChanges()`就在之前`SaveChanges()`是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:14:05.327

有点复杂，这段代码。你真的想要一个包含对 A 类的引用的类 (B)，而 A 类又具有 B 的集合？也许这只是混淆的名称，但我无法想象这样的对象模型的场景。

无论如何，我的直觉是寻找循环引用或其他阻止对象属性在您的一个类上实例化的条件。

此外，您正在使用 a.Bs.Load() 在测试方法中使用 Eager 加载。当您设置 ProxyCreationEnabled = false 时，延迟加载被禁用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:55:53.100

事实证明，我正在使用来自 ADO 家族不同范例的类。正如 Gert Arnold 指出的那样，EF 不适用于 EntityCollection，它使用普通列表作为关联集合。

```
public class A
{

    public int Id { get; set; }

    public List<B> Bs
    {
        get { return bs; }
        set { bs = value; }
    }
    private List<B> bs = new List<B>();
} 
```

因为我不想要代理，所以对象没有模型的“知识”。因此，模型本身必须用于加载实体的关联。对于这个示例，我在模型中添加了以下方法：

```
public class DbModel : DbContext
{
    public DbSet<A> As { get; set; }
    public DbSet<B> Bs { get; set; }

//…

    public A LoadAWithAssociations(A targetA)
    {
        return As.Include("Bs").First(a => a.Id.Equals(targetA.Id));
    }
} 
```

我调整了测试以使用新方法

```
 [TestMethod]
    public void TestMethod1()
    {
        // arrange
        DbModel tModel = new DbModel();
        A a = tModel.As.First();

        // act
        A result =  tModel.LoadAWithAssociations(a);

        // assert 
        Assert.IsNotNull(result);
        Assert.IsTrue(result.Bs.Count > 0);
    } 
```

现在它给了一个绿色

# python - 用字符串方法理解代码

> ID：13441626
> 
> 赞同：3
> 
> 时间：2012-11-18T15:40:04.387
> 
> 标签：python, string, class, methods

我正在努力理解属于更大问题集的一段代码。代码如下（注意`WordTrigger`是 的子类`Trigger`）：

```
class WordTrigger(Trigger):

    def __init__(self,word):
        self.word=word

    def isWordin(self, text):
        text = [a.strip(string.punctuation).lower() for a in text.split(" ")]
        for word in text:
            if self.word.lower() in word.split("'"):
                return True
            return False 
```

所以第 5 行完成了去除标点符号文本并将其变为小写的工作。这`string.split(" ")`方法创建文本中所有单词的列表，将它们拆分并在其间插入空格。for 语句检查“单词”是否在“文本”中。那么它是否从构造函数中识别出变量“单词”？

是否`self.word.lower()`使构造函数初始化的单词全部小写？'for'循环中的'if'条件是否确保搜索'alert'单词不会排除带有撇号的单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:54:54.087

> 那么它是否从构造函数中识别出变量“单词”？

不。在方法中定义的变量是该方法的本地变量，并且对象属性（如`self.word`不会与局部变量（如 ）混淆`word`）。

> self.word.lower() 是否使构造函数初始化的单词全部小写？

不，字符串在 Python 中是不可变的。它返回一个新字符串——一个小写版本的`self.word`.

> 'for'循环中的'if'条件是否确保搜索'alert'单词不会排除带有撇号的单词？

对我来说似乎是对的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:55:01.820

第一个问题：for 语句检查“单词”是否在“文本”中。那么它是否从构造函数中识别出变量“单词”？

for 语句`word`是一个局部变量，与`self.word`. `item`如果您愿意，您基本上可以用或任何变量名称替换该 for 循环。

第二个问题： self.word.lower() 是否使构造函数初始化的单词全部小写？

不，不是因为它们是两个不同的东西。`word`局部变量是列表中的每一项`text`。并且是您第一次实例化对象时`self.word`传递给对象的变量。`WordTrigger`

# maven - Jenkins 中的 Checker Framework 报告？

> ID：13441627
> 
> 赞同：1
> 
> 时间：2012-11-18T15:40:08.770
> 
> 标签：maven, jenkins, jenkins-plugins, checker-framework

如何配置以便在 Jenkins 中提取和报告 Checker Framework 发出的警告（例如，通过使用[Analysis Collector Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Analysis+Collector+Plugin)）？

作为记录，我使用 maven 和[checkersplugin](http://types.cs.washington.edu/checker-framework/current/checkers-manual.html#maven-plugin)并将`<failOnError>`配置设置为`false`，并且 Checker Framework 警告显示在 Jenkins 的控制台输出中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:20:25.823

您不需要使用特殊的 Jenkins 插件，例如 Analysis Collector。

Checker Framework 发出与 javac 相同的警告和错误（因为 Checker Framework 是 javac 的插件）。因此，您已经使用的任何机制让 Jenkins 报告编译器警告和错误都适用于 Checker 框架。

作为提示，如果您使用 -Awarns 命令行参数将可插入类型检查错误视为警告，那么您还需要按如下方式配置 Jenkins 任务：将“构建后操作”设置为“扫描编译器”警告”，使用解析器“Java 编译器”。

# magento - 更改 Magento 中的“联系表”电子邮件标题？

> ID：13441630
> 
> 赞同：1
> 
> 时间：2012-11-18T15:40:29.317
> 
> 标签：magento

我有许多 Magento 商店由一个管理员运行，并且我使用显示为“联系表”的在线表单接收来自站点用户的电子邮件，我该如何将其更改为“站点 1 表单”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:30:41.867

这可以在没有任何编程或`.phtml`模板自定义的情况下完成：

1.  在 System -> Transactional emails 下创建一个新的电子邮件模板，加载联系表单模板。
2.  将标题更改为`{{config path="general/store_information/name"}} Contact Form`
3.  确保在系统 -> 配置 -> 常规 -> 商店信息 -> 商店名称下为每个商店配置了商店名称

# xcode - 在 mac 上安装 Glew 的问题

> ID：13441632
> 
> 赞同：1
> 
> 时间：2012-11-18T15:40:46.303
> 
> 标签：xcode, opengl, osx-lion, homebrew, glew

我在 Mac 上安装 Glew 时遇到问题。我已经使用 HomeBrew 安装了它，它似乎安装正确。

但是我不能`#include`glew.h*文件*或添加任何 Glew 框架。

我发现的大多数建议的解决方案似乎都已过时。例如[，此链接](http://julovi.net/j/?p=21)- 第 5 步添加 > 现有框架不在较新的 Xcode 中，因此我无法导航到*/usr/*文件夹。

还有其他人有这个问题吗？

更新#1：这个“未定义架构......”的新问题显然源于 Xcode 无法找到框架，我使用 HomeBrew 安装了 Glew，这意味着框架工作在*/usr/local/cellar/glew/ 1.9/lib*这是正确的路径吗？我将框架搜索路径设置为*/usr/local/cellar/* **，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T19:26:51.623

我不知道它现在是否对你有帮助，但我遇到了同样的问题。

用自制软件安装 glew 后，我包含了头文件

```
#include <GL/glew.h> 
```

在我的 main.cpp

之后，在 proyect 配置 -> 构建设置 -> 搜索路径 -> 库搜索路径中，我添加了以下路径：/usr/local/Cellar/glew/1.11.0/lib

在同一页面中，链接->其他链接标志我把标志“-lGLEW”

然后，我用一条线运行我的项目，`glewInit();`一切运行良好。

希望这么久后对您有所帮助。

干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:05:00.010

为了让 GLEW 正常工作，在项目的构建设置中，将 Base SDK 更改为 Current OS X，并将条目“-lGLEW”添加到您的其他链接器标志部分。希望这可以帮助

# c# - 如何在 Windows 8 应用程序中使用 Html Agility Pack？

> ID：13441637
> 
> 赞同：1
> 
> 时间：2012-11-18T15:41:33.230
> 
> 标签：c#, xml, windows-8, html-agility-pack

首先我想说我是 C# 和 Windows 8 应用程序的新手。所以，请不要对我太苛刻。

我有以下代码来提取一些图像 url 并将它们保存在 XML 文件中。我正在使用 Html Agility Pack，但是当我尝试将代码与 Windows 8 应用程序一起使用时，它不起作用。我知道我必须从这里使用 Fizzler Html Agility Pack：http://fizzlerex.codeplex.com/releases/view/89833[但](http://fizzlerex.codeplex.com/releases/view/89833)我不知道出了什么问题。我正在使用 Visual Studio 2012，它无法识别以下元素：

```
***WebClient*** x = new ***WebClient***();  
***XmlDocument*** output = new ***XmlDocument***();  
***XmlElement*** imgElements = output.CreateElement("ImgElements");  
foreach(HtmlNode link in document.***DocumentElement***.SelectNodes("//img[contains(@src, '_412s.jpg')]"));                                             
***out***.Save(@"C:\test.xml"); 
```

代码：

```
using HtmlAgilityPack;
using Fizzler;
using Fizzler.Systems.HtmlAgilityPack;
using System.Xml;

public void Images()
{
    WebClient x = new WebClient();
    string source = x.DownloadString(@"http://www.google.com");
    HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
    document.Load(source);
    XmlDocument output = new XmlDocument();
    XmlElement imgElements = output.CreateElement("ImgElements");
    output.AppendChild(imgElements);
    foreach(HtmlNode link in document.DocumentElement.SelectNodes("//img[contains(@src, '_412s.jpg')]"))
    {
        XmlElement img = output.CreateElement(link.Name);
        foreach(HtmlAttribute a in link.Attributes)
        {
            img.SetAttribute(a.Name, a.Value);
        }
        imgElements.AppendChild(img);
    }
    out.Save(@"C:\test.xml");
} 
```

你能帮我么？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:48:27.277

```
out.Save(@"C:\test.xml"); 
```

应该：

```
output.Save(@"C:\test.xml"); 
```

然后您需要将以下两个命名空间添加到代码文件的顶部：

```
using System.Xml;
using System.Net; 
```

这些错误与 Windows 8 无关。它们将是任何版本的错误。我不确定你为什么需要从一个`WebClient`类切换到另一个`HttpClient`类，因为它们都在 Windows 8 中受支持，但是，如果你想使用这个`HttpClient`类，这样的东西应该可以工作：

```
HttpClient x = new HttpClient();
Task<string> t = x.GetStringAsync(@"http://www.google.com");
t.Wait();
string source = t.Result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:42:20.490

尝试这样的事情：

```
HttpClientHandler handler = new HttpClientHandler();
HttpClient client = new HttpClient(handler as HttpMessageHandler) { BaseAddress = new Uri(@"http://www.google.com") };
var r = await client.GetAsync(client.BaseAddress);
string html;
if (r.IsSuccessStatusCode) html = await r.Content.ReadAsStringAsync(); 
```

# asp.net-mvc-4 - 始终显示在 Kendo 网格中选择的第一行

> ID：13441638
> 
> 赞同：5
> 
> 时间：2012-11-18T15:41:34.633
> 
> 标签：asp.net-mvc-4, kendo-ui

我正在开发一个使用 Kendo Grid 的 mvc4 项目。我希望用户看到默认选择的网格的第一行。我有很多行，所以我使用分页。当用户转到第 2,3、...40 页等时，我还希望看到每个页面的第一行被选中。下面是我创建网格的代码

```
<%: Html.Kendo().Grid(Model)
            .Name("AuthorisationsGrid")
            .Columns(columns =>
             {
                 columns.Bound(p => p.Mis).Title("MIS").Width(80);
                 columns.Bound(p => p.AuthorisationSerialNumber).Title("ΑΑ Προέγκρισης");
             })
             .Pageable()
             .Sortable()
             .Filterable()
             .Selectable(s => s.Mode(GridSelectionMode.Single))
             .Resizable(resize => resize.Columns(true))
             .DataSource(dataSource => dataSource
                .Ajax()
                .ServerOperation(false)
                .Model(model => model.Id(p => p.AuthorisationSerialNumber))
                .Model(model => model.Field(p => p.Mis))
                .Batch(true)
                .Read(read => read.Action("AuthorisationsPartial", "UserFilesDashboard")))%> 
```

我怎样才能实现上述行为？也许 jQuery 可能有用（但我对 jQuery 知之甚少）。任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T19:56:04.583

实际上，您可以使用 Grid 和 jQuery 的[dataBound](http://docs.kendoui.com/api/web/grid#databound)事件将**k-state-selected**类添加到 Grid tbody 中的第一个 tr 元素。

这是一个例子：

```
$('#GridName').data().kendoGrid.bind('dataBound',function(e){
    this.element.find('tbody tr:first').addClass('k-state-selected')
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T18:23:58.970

它也可以用另一种方式做到这一点

# 方法一

通过将网格绑定到`onDataBound`事件

```
<div data-bind="source: mydataSource, events: {
  dataBound: onDataBound
}" > 
```

对于 MVVM 或通过

```
("#gridName").data("kendoGrid").dataBound(..) (not exact) 
```

# 方法二

里面

```
databound: function() {
  var uid = data[0].uid;
  var row = roomGrid.table.find('tr[data-uid="' + uid + '"]');
  roomGrid.select(row);
} 
```

这适用于我的情况。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-28T14:35:26.817

```
$('#gridName').data().kendoGrid.bind('dataBound', function (e) {
            this.select("tr:eq(1)");
            //this.element.find('tbody tr:first').addClass('k-state-selected');
        }) 
```

有关更多详细信息，请参阅以下链接 [http://docs.kendoui.c​​om/api/web/grid#methods-select](http://docs.kendoui.com/api/web/grid#methods-select)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T19:48:26.777

从以下位置更新代码后：

```
$('#GridName').data().kendoGrid.bind('dataBound',function(e){... 
```

至：

```
$('#GridName').data("kendoGrid").bind('dataBound', function (e) {... 
```

**现在它已修复，下面的最终代码正在运行：**

```
$(function () {
    $('#GridMaster').data("kendoGrid").bind('dataBound', function (e) {
        this.element.find('tbody tr:first').addClass('k-state-selected')
    });
}); 
```

**注意：**如果获取网格上的记录有问题，请在网格定义之后而不是在网格定义之前使用此脚本。

# build - NSIS 使用 InstalldirRegKey

> ID：13441640
> 
> 赞同：1
> 
> 时间：2012-11-18T15:42:01.803
> 
> 标签：build, installation, nsis, instructions

从 NSIS 文档中，我们有

> `root_key subkey key_name` 此属性告诉安装程序检查注册表中的字符串，如果该字符串有效，则将其用于安装目录。如果此属性存在，如果注册表项有效，它将覆盖 InstallDir 属性，否则将回退到 InstallDir 默认值。

所以，如果我在`.nsi`文件中有这些行：

```
InstallDir "D:\myFolder\myFile"

InstallDirRegKey HKCU "Software\${PRODUCT_COMPANY}\${PRODUCT_NAME}" "Install_Dir" 
```

我知道我将安装目录设置`D:\myFolder\myFile`为默认目录，但如果`Software\${PRODUCT_COMPANY}\${PRODUCT_NAME}`是有效路径，那么我将使用它。那是对的吗？

从另一篇[文章](https://stackoverflow.com/questions/5896463/nsis-silent-install-started-via-code?rq=1)中，我了解到该`InstallDirRegKey`指令用于覆盖以前在同一位置的安装。它如何更精确地工作？如果我有以下情况，

```
InstallDir "D:\myFolder\myFile"

InstallDirRegKey HKCU "D:\myFolder\myFile" "Install_Dir" 
```

NSIS 脚本生成的新`.exe`文件会覆盖之前的文件吗？或者这是否意味着可执行文件将覆盖前一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T22:10:02.483

InstallDirRegKey 只从注册表中读取，它从不写入。

在你`.onInit`被执行之前，NSIS 会：

1.  如果`InstallDir`设置，则该路径被复制到`$Instdir`
2.  如果`InstallDirRegKey` 已设置且注册表项存在，则将注册表中的路径（删除文件名）复制到`$Instdir`

因此，如果您希望 InstallDirRegKey 在用户下次运行安装程序时生效，您必须将其指向安装程序在您的某个部分中创建的密钥。它可以是卸载键中的 UninstallString 命令，也可以是特定于应用程序的键，例如`HKLM\Software\My Company\My App`.

这样做的全部意义在于，当用户重新安装或安装您的应用程序的新版本时，它将安装在同一文件夹中（覆盖/升级现有安装）。

# ruby-on-rails-3 - Rails 用礼物做另一个选择？

> ID：13441642
> 
> 赞同：0
> 
> 时间：2012-11-18T15:42:16.390
> 
> 标签：ruby-on-rails-3, activerecord

我的操作填充了一个实例变量`@websites`- 它从数据库中获取。

```
@websites = Website.all 
```

我可以浏览一下`@websites`，看到只有一个对数据库的调用。快乐的时光。

```
<% @websites.each do |website| %>
...
<% end %> 
```

这导致：

```
Website Load (0.1ms) SELECT "websites".* FROM "websites" 
```

但如果我用这样的包装它`present?`：

```
<% if @websites.present? %>
   <% @websites.each do |website| %>
   <% end %>
<% else %> 
```

现在我得到两个数据库调用

```
(0.2ms)  SELECT COUNT(*) FROM "websites"
Website Load (0.1ms) SELECT "websites".* FROM "websites" 
```

为什么要进行两次数据库调用？以及如何停止拨打第二个电话。

对我来说，该`@websites`变量将所有网站都保存在内存中。当然，rails 只会计算内存中的项目，而不是在数据库上执行新的 SELECT 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:32:41.710

这个方法调用，

> @websites = 网站.all

不会立即将记录加载到内存中。它只是一个活动的记录关系。对这个关系执行的第一个操作是调用`present?`and 来满足这个请求，Rails 不需要将所有记录加载到内存中。所以 ActiveRelation 只是优化关系并进行计数查询以获得结果。现在只有当您`@websites`使用 each 方法访问时才会加载记录。

如果你想避免那个额外的查询，你可以将 Relation 转换为一个数组，但是这样做，

```
@websites = Website.all.to_a 
```

这会加载记录并呈现一个`Array`而不是`ActiveRelation`. 但问题是活动关系不能用这种关系链接进一步的查询。但我假设在你的情况下这不是必需的。

# server.mappath - Server.MapPath 与 Request.MapPath

> ID：13441645
> 
> 赞同：2
> 
> 时间：2012-11-18T15:42:42.430
> 
> 标签：server.mappath

有人可以解释一下 Server.MapPath 和 Request.MapPath 之间的区别以及两者的使用场景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T17:29:29.180

自 2.0 版以来，ASP.NET 至少提供了三种不同的公共 MapPath 方法：

*   [HttpRequest.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httprequest.mappath.aspx)
*   [HttpServerUtility.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)
*   [HostingEnvironment.MapPath](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.mappath.aspx)

在内部，`HttpServerUtility.MapPath`调用`HttpRequest.MapPath`.

`HostingEnvironment.MapPath`是一个静态方法，`ArgumentNullException`如果参数为 null 或空，则抛出一个，`ArgumentException`如果参数是相对路径，则抛出一个。

`HttpRequest.MapPath`不是静态方法，不会抛出上面提到的异常。

# javascript - jQuery - 简单的图像旋转器

> ID：13441648
> 
> 赞同：0
> 
> 时间：2012-11-18T15:42:48.867
> 
> 标签：javascript, jquery, html, image-rotation

在小提琴上，我找到了一个简单的旋转器，并试图让它在我的死亡简单的 HTML 页面中工作。

页面示例在这里：

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Demo</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <style>
        img { max-height: 100px }
        .rotator img { max-height: 200px; border: dashed 5px pink; }​
    </style>
    <script>
        $(document).ready(function() {
            alert('aaa');
            var $rotator = $(".rotator");
            $rotator.find("img:gt(0)").hide();
            setTimeout(Rotate, 1000);

            function Rotate() {
                var $current = $rotator.find("img:visible");
                var $next = $current.next();
                if ($next.length == 0) $next = $rotator.find("img:eq(0)");
                $current.hide();
                $next.show();
                setTimeout(Rotate, 5000);
            }​

        });
    </script>
  </head>
  <body>

<img src="http://2.bp.blogspot.com/-XI9yzJrwLac/TkLKLZF_kDI/AAAAAAAACFE/PxPDRzwa4tQ/s1600/cute+cats+pictures+3.jpg"/>
<img src="http://2.bp.blogspot.com/-NOD8B0m7MEE/TrvJAVAPYWI/AAAAAAAAAuE/KoffoIdQfNk/s640/cute-kittens-in-cups-pics.jpg"/>
<img src="http://1.bp.blogspot.com/_cWcuJM9QIG4/S7rOVzM1YcI/AAAAAAAAAgQ/RJx5oR55Ekk/s640/Animal+wallpapers%252Bcat+wallpapers%252Bmobile+wallpapers%252Bpc+wallpapers%252Bmobile+themes%252Bpc+themes+15cc.jpg"/>

<div class="rotator">
    <a href="http://google.com">
        <img src="http://2.bp.blogspot.com/-XI9yzJrwLac/TkLKLZF_kDI/AAAAAAAACFE/PxPDRzwa4tQ/s1600/cute+cats+pictures+3.jpg"/>
    </a>
    <a href="http://google.com">
        <img src="http://2.bp.blogspot.com/-NOD8B0m7MEE/TrvJAVAPYWI/AAAAAAAAAuE/KoffoIdQfNk/s640/cute-kittens-in-cups-pics.jpg"/>
    <a>
   <a href="http://google.com">     
       <img src="http://1.bp.blogspot.com/_cWcuJM9QIG4/S7rOVzM1YcI/AAAAAAAAAgQ/RJx5oR55Ekk/s640/Animal+wallpapers%252Bcat+wallpapers%252Bmobile+wallpapers%252Bpc+wallpapers%252Bmobile+themes%252Bpc+themes+15cc.jpg"/></a>
</div>

<label />​

  </body>
</html> 
```

简单的脚本应该定期切换图像，而不是只显示所有 3 个图像。并且不显示警报消息。我尝试调试代码，当我删除该功能时`Rotate()`，页面上会出现一条警告消息。

为什么该功能`Rotate()`不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:23:07.933

您还可以将图像缓存在 jQuery 数组中并像下面那样遍历它们。

```
var imgs = $(".slides"); // images to be rotated
var current = 0;

function rotate( ) {
    // set current to next image
    current = current >= imgs.length ? 0 : current + 1; 
    $(".rotator").prop("src", $(imgs.get(current)).prop("src") );
    setTimeout( rotate, 5000 );
}

rotate(); 
```

[这里的](http://jsfiddle.net/HzSwR/2/)例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:56:26.657

`$.next()`*获取set 中*的直接元素。您的集合仅包含可见图像 - 即只有一个。怎么会有下一个元素？

**工作小提琴**：http: [//jsfiddle.net/gjzd7/](http://jsfiddle.net/gjzd7/)

我所做的只是将`$.next()`调用更改为`$.index()`请求，并通过图像数量对其进行模数（因此您永远不会得到不存在的图像）。让我知道您是否需要对其进行任何其他修改或任何解释！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T10:53:37.940

使用这个简单的脚本使用按钮旋转图像

```
function rotateImage(degree) {
     $('#demo-image').animate({  transform: degree }, {
        step: function(now,fx) {
            $(this).css({
                '-webkit-transform':'rotate('+now+'deg)', 
                '-moz-transform':'rotate('+now+'deg)',
                'transform':'rotate('+now+'deg)'
            });
        }
        });
    }

<style>
#demo-image{padding:35px 15px;}
.btnRotate {padding: 15px 20px;border:1px solid #000; background-color:#999;color: #000;cursor: pointer;}
</style>

<div style="height:600px; width:800px; background-color:#CCC; border:1px solid #000; border-radius:6px; margin-left:auto; margin-right:auto;">
<div style="width:550px; margin-left:auto; margin-right:auto;">
<label>Rotate Image:</label>
<input type="button" class="btnRotate" value="30" onClick="rotateImage(this.value);" />
<input type="button" class="btnRotate" value="60" onClick="rotateImage(this.value);" />
<input type="button" class="btnRotate" value="90"onClick="rotateImage(this.value);" />
<input type="button" class="btnRotate" value="180" onClick="rotateImage(this.value);" />
<input type="button" class="btnRotate" value="-180" onClick="rotateImage(this.value);" />
<input type="button" class="btnRotate" value="360" onClick="rotateImage(this.value);" />
</div>
<div style="width:350px; margin-left:auto; margin-right:auto; margin-top:25px;"><img src="image-rotating-script-using-jquery .jpg" id="demo-image" /></div>
</div> 
```

# django - Django Socketio 101

> ID：13441654
> 
> 赞同：5
> 
> 时间：2012-11-18T15:43:42.717
> 
> 标签：django, sockets, websocket, socket.io

我尝试在我的 django 应用程序中实现与 django-socketio 的聊天。

首先，我要了解 django-socketio，所以我阅读了[https://github.com/stephenmcd/django-socketio的 README](https://github.com/stephenmcd/django-socketio)

我真的很想得到它的基础。所以我尝试创建一个简单的东西，通过 socketio 呈现消息。

我的事件.py：

```
 @events.on_connect
    def first_connect(request, socket, context):
          socket.broadcast_channel("my message") 
```

我的观点：

```
 def chat(request):
     return render_to_response('chat.html', {} ,context_instance=RequestContext(request)) 
```

我的网址：

```
 url(r'^chat/$', 'projet.views.chat'), 
```

我的html：

```
 <head> 
    {% load socketio_tags %}
    {% socketio %}
     <script>
       var socket = new.io.Socket();
       socket.connect();
       socket.on('connect', function(){

    socket.subscribe('my_channel');
   });

     </script>

     </head> 
```

当我去 localhost:8000/chat 时，什么也没有出现。

所以它可能是非常基本的，但是当我连接到它时，我怎么能简单地通过我的套接字发送一条消息并在我的 html 中呈现它呢？

我真的很想了解它，所以如果有人有关于 django-sockieto 的教程，我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:44:25.617

您可以在[此处](http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/)和[此处](http://codysoyland.com/2012/sep/4/django-gevent-djangocon-slides/)查看 Cody Soyland 博客条目。它可能已经过时，但我认为您可以感觉到那里应该发生的事情。这也与 django-socketio 无关。

# regex - 使用 Yahoo Pipes 重写 RSS 提要中的图像 url

> ID：13441661
> 
> 赞同：0
> 
> 时间：2012-11-18T15:44:21.317
> 
> 标签：regex, url-rewriting, pipe, yahoo-pipes

我正在尝试使用此 Yahoo Pipe 在 Pinterest RSS 提要中显示全尺寸图像，而不是缩略图： `http://pipes.yahoo.com/pipes/pipe.info?_id=4cc22a300ac57e4a88f908f0548ff79e`

为了显示大图像，我需要为每个项目重写图像 URL，并将扩展之前的最后一个符号从“b”更改为“c”，例如：

在原始 Pinterest RSS 中：`http://pinterest.com/chalkboardnails/feed.rss`

从 更改 `http://media-cache-ec6.pinterest.com/upload/90916486199089541_BOwL6p5P_b.jpg` 为 `http://media-cache-ec6.pinterest.com/upload/90916486199089541_BOwL6p5P_c.jpg`

我怎么能这样。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:25:30.687

在 Yahoo Pipes 中使用 REGEX 函数：![如下](../Images/b5c70aea6796fb998b5ab23b47feb8e2.png)

李

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:32:43.710

寻找`b`尝试`(?<=http://.*/[A-Za-z\d]*_[A-Za-z\d]*_)(.*?)(?=\.jpg)`

# javascript - 自动更新表

> ID：13441662
> 
> 赞同：0
> 
> 时间：2012-11-18T15:44:26.537
> 
> 标签：javascript, html, post, get

我有一个 PHP 脚本从 MySQL 信息中渲染一系列漂亮的 div 元素，现在我希望它动态更新并在 MySQL 中添加新字段时添加新的 div。

```
window.setInterval(function() {

         $.get('tableup.php', function(balance) {
             $('.containerDiv').html(balance);
         });

    }, 60000*0.1); 
```

第一个问题是如何将 div 添加到具有淡入淡出效果的容器 div 的顶部？第二个问题是我如何知道在 tableup.php 中返回哪些 div？我已经保存了每个字段的日期，是否会将它们传递给表格，解析它们，然后对数据库运行适当的查询？如何保存日期客户端？格式是这样的`2012-11-17 13:26:31`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:23:39.860

**问题一：**

使用类似的东西

```
$('.containerDiv').prepend(balance).fadeIn('slow'); 
```

确保将“传入”的 div 设置为`display: none`在您的 CSS 中，这样您就不会看到闪烁。

**问题2：**

当然，将日期保存为时间戳或以您的格式保存在变量中，然后将其传递给脚本

```
var time = '2012-11-17 13:26:31';

window.setInterval(function() {

         $.get('tableup.php', { lastTime: time }, function(balance) {
             $('.containerDiv').html(balance);
             //update time, either from server script or by using the client side time
         });

    }, 60000*0.1); 
```

# c++ - 按一列对二维数组进行冒泡排序

> ID：13441668
> 
> 赞同：1
> 
> 时间：2012-11-18T15:45:24.260
> 
> 标签：c++, visual-c++

我必须按列对矩阵进行排序；作为输入，我有一个一维数组并将其转换为矩阵：

```
int arr[] = { 6, 7, 3, 1, 3, 2, 4, 4, 7, 5, 1, 1, 5, 6, 6, 4, 5 }; 
```

列中的第一个元素是值，第二个元素是出现次数。我必须按值（按第一列）对它们进行排序。这是我到目前为止所尝试的。

直方图.h

```
#ifndef HISTOGRAM_H
#define HISTOGRAM_H
#include<iostream>
class Histogram
{
private:
    int** matrix;
    int lines;
    void SortMatrix();
public:
    Histogram(){ }
    Histogram(int elements[], int elementsNr);
    Histogram(int** m, int l);
    void Print();
};
#endif 
```

直方图.cpp

```
#include"histogram.h"
using namespace std;
Histogram::Histogram(int** m, int l)
{
    matrix=m;
    lines=l;
    SortMatrix();
}

Histogram::Histogram(int elements[], int elementsNr)
{
    lines=0;
    //initialize matrix : elementrNr lines and 2 columns
    matrix=new int*[elementsNr];
    for(int i=0;i<elementsNr;i++)
    {
        matrix[i]=new int[2];
        matrix[i][0]=INT_MIN;
        matrix[i][1]=INT_MIN;
    }
    //search each element from the array in the matrix
    bool found=false;
    for(int i=0;i<elementsNr;i++)
    {
        found=false;
        for(int j=0;j<elementsNr;j++)
        {
            //the element was found in the matrix ( on the first column )
            if(matrix[j][0] == elements[i])
            {
                matrix[j][1]++;
                found=true;
                break;
            }
        }
        if(!found)
        {
            matrix[lines][0]=elements[i];
            matrix[lines][1]=1;
            lines++;
        }
    }
    SortMatrix();

}
void Histogram::SortMatrix()
{
    bool flag=true;
    int temp1;
    int temp2;
    int i=0;
    for(int i=0;(i<lines-1) && flag;i++)
    {
        flag=false;
        if(matrix[i][0]>matrix[i+1][0])
        {
            temp1=matrix[i][0];temp2=matrix[i][1];
            matrix[i][0]=matrix[i+1][0];
            matrix[i][1]=matrix[i+1][1];
            matrix[i+1][0]=temp1;matrix[i+1][1]=temp2;  
            flag=true;
        }   
    }
}
void Histogram::Print()
{

    for(int i=0;i<lines;i++)
    {
        cout<<matrix[i][0]<<" : " <<matrix[i][1]<<endl;
    }

} 
```

但这段代码的输出是：

```
6:3
7:2
3:2
1:3
2:1
4:3
5:3 
```

反而：

```
1:3
2:1
3:2
4:3
5:3
6:3
7:2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:04:17.700

试试这个：

```
for (int i = 0; (i < lines - 1); i++) {

    for (int o = 0; (o < lines - 1); o++) {

        if ( matrix[ i ][0] < matrix[ o ][0] ) {

            temp1 = matrix[ i ][0];
            temp2 = matrix[ i ][1];

            matrix[ i ][0] = matrix[ o ][0];
            matrix[ i ][1] = matrix[ o ][1];

            matrix[ o ][0] = temp1;
            matrix[ o ][1] = temp2;

        }

    }

} 
```

您需要两个循环进行排序。我相信您没有正确实现这一点，因为下面的演示表明它有效。

**[Ideone 演示](http://ideone.com/3fcKQb#view_edit_box)**

# c++ - 在 xterm 中启用颜色（从 Qt Creator 启动）

> ID：13441671
> 
> 赞同：1
> 
> 时间：2012-11-18T15:45:28.337
> 
> 标签：c++, qt, colors, terminal, xterm

我需要在终端中使用*颜色*，因为我正在运行*Google C++ 测试框架（单元测试）*，并且在使用颜色时输出更具可读性。

似乎有两种可能的解决方案：

*   在 xterm 中启用颜色

根据[this](http://vim.wikia.com/wiki/256_colors_in_vim)和[this](https://discussions.apple.com/thread/829014?start=0&tstart=0)我已经在root下运行了这个没有效果

```
if [ -e /usr/share/terminfo/x/xterm-256color ]; then
        export TERM='xterm-256color'
else
        export TERM='xterm-color'
fi 
```

*   以某种方式将 Qt Creator 配置到另一个使用颜色的终端但是，Qt Creator 中似乎存在一个[错误](https://bugreports.qt-project.org/browse/QTCREATORBUG-1633)，禁止我`Tools->Options->Environment->Terminal`将`/usr/bin/xterm -e`.

我在 GNOME3 上的 Fedora 17 上运行最新的 Qt Creator 2.6.0。

注意：当我从 GNOME3 的默认终端运行测试时，颜色会正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:13:32.730

我在基于 Qt 5.0.0（64 位）的 Qt Creator 2.6.0 上工作，该版本于 2012 年 11 月 11 日在 Fedora 17 上构建。我直接从主页下载了它。这是 beta2，但最终版本应该在年底之前发布。因此解决方案是升级。

# jquery - JQVMap 的不同语言支持

> ID：13441673
> 
> 赞同：2
> 
> 时间：2012-11-18T15:45:32.080
> 
> 标签：jquery

我是 jQuery 新手，我使用的是[http://jqvmap.com/](http://jqvmap.com/)，它是一个非常好的插件，但我想为语言设置一个参数，以便为不同的语言提供相同的地图。

核心脚本是

```
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery('#vmap').vectorMap({
            map: 'world_en',
            backgroundColor: '#333333',
            color: '#ffffff',
            hoverOpacity: 0.7,
            selectedColor: '#666666',
            enableZoom: true,
            showTooltip: true,
            values: sample_data,
            scaleColors: ['#C8EEFF', '#006491'],
            normalizeFunction: 'polynomial'             
        });
    });
    </script> 
```

为了测试，我最后添加了**语言：'Czech'** / **lang:'Czech'**，但它不起作用我也阅读了他们的文档，但它不存在。

是的，我找到了一个文件，现在所有国家/地区都有英文版本我需要制作一些其他语言版本，有人可以帮助我吗？

我需要捷克语、中文（简体）、德国、波兰语和俄罗斯语的所有国家/地区名称。

脚本在**jquery.vmap.world**文件中可用，其中所有带有**en**版本的国家名称都被传递`"name":"Pakistan"}`，如果我将它翻译成其他语言，比如说`Pákistán`或者`巴基斯坦`javascript 不允许保存并且浏览器显示`???`虽然我正在使用

```
<script type="text/javascript" src="[path]/myscript.js" charset="utf-8"></script> 
```

![在此处输入图像描述](../Images/d4cf273394dfe6dddb9187f098cc5a5f.png)

好的，如果我`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`从 html 文件中删除，那么它可以正常工作，但网页的所有内容都会大量出现。

我也尝试过`<iframe>`加载地图源代码，但同样的问题..

任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:52:10.910

如果您需要做的只是显示不同的地图，只需将变量作为值传递给选项

```
var maps={
   'en':'world_en',
   'Czech': 'world_cz',
   'Polish': 'world_po'
}

var lang ='Czech'/* logic to determine language in page*/

jQuery('#vmap').vectorMap({
            map: maps[lang]

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T16:21:53.053

如果有人有这个问题，我已经通过将文件更改为没有 BOM 的 UTF-8 来解决它。然后我改成没有显示回原来的样子。

希望能帮助解决类似问题的人。

# haskell - 如何在 Haskell 中编写 Ctrl-C 处理程序？

> ID：13441676
> 
> 赞同：19
> 
> 时间：2012-11-18T15:45:40.853
> 
> 标签：haskell, signals

我尝试了以下方法：

```
import System.Exit
import System.Posix.Signals
import Control.Concurrent (threadDelay)

main :: IO ()
main = do
  installHandler keyboardSignal (Catch (do exitSuccess)) Nothing
  threadDelay (1000000000) 
```

但它只输出：

```
^CTest.hs: ExitSuccess 
```

on `Ctrl-C`，而不是退出。我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-18T16:15:44.910

来自以下文档`installHandler`：

> 安装了一个处理程序，它将在收到信号时（或不久之后）在新线程中调用操作。

和`exitWith:`

> 注意：在 GHC 中，应该从主程序线程调用 exitWith 以退出进程。当从另一个线程调用时，exitWith 将照常抛出一个 ExitException，但该异常不会导致进程本身退出。

因此，`exitSuccess`处理程序不会结束该过程，这是预期的（尽管是意外的；）行为。

如果您想立即采取行动，

```
import System.Exit
import System.Posix.Signals
import Control.Concurrent

main :: IO ()
main = do
  tid <- myThreadId
  installHandler keyboardSignal (Catch (killThread tid)) Nothing
  threadDelay (1000000000) 
```

收到信号后立即杀死线程。

不那么激烈，如果你想成功退出，那就是

```
import System.Exit
import System.Posix.Signals
import Control.Concurrent
import qualified Control.Exception as E

main :: IO ()
main = do
  tid <- myThreadId
  installHandler keyboardSignal (Catch (E.throwTo tid ExitSuccess)) Nothing
  threadDelay (10000000) 
```

我认为它也可以可靠地工作，但我不完全确定。

# c++ - 使用 getCurrentDirectoryW 不会读取非语言环境字符

> ID：13441677
> 
> 赞同：2
> 
> 时间：2012-11-18T15:45:44.137
> 
> 标签：c++, visual-studio-2010, visual-c++, wchar-t

我在Windows 7中使用以下代码读取当前目录。当前目录为C:\特斯塔敌人。当前语言环境是英语 (EN)。我使用 getCurrentDirectoryW 的想法是它会正确读取目录路径，因为该函数使用的是 unicode：

```
wchar_t w_pcRootLocation[MAX_PATH+100];
GetCurrentDirectoryW(MAX_PATH, w_pcRootLocation);
wcout << w_pcRootLocation << endl; 
```

MAX_PATH 在 WinDef.h 中定义，等于 260。

当我使用 wcout 将输出打印到控制台时，我看到的只有以下内容：

```
C:\ 
```

汉字显然是看不懂的。这里有什么问题，如何正确读取 Unicode 中的路径？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:12:03.330

GetCurrentDirectoryW() 可能工作正常。下一点是有问题的。

std::wcout 将使用“C”语言环境。您将需要`imbue()`适当地调整 ( ) 以显示您的代码页外字形。有关详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/5750884/wcout-not-writing-wide-character-out-to-command-prompt)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:13:28.003

这个问题似乎已经解决了 wcout 的问题......

[wcout 没有将宽字符写入命令提示符](https://stackoverflow.com/questions/5750884/wcout-not-writing-wide-character-out-to-command-prompt)

值得用调试器检查以确保`w_pcRootLocation`确实包含字符。

# java - 在 Android 上使用 jxl 修改 excel 电子表格

> ID：13441680
> 
> 赞同：1
> 
> 时间：2012-11-18T15:46:12.180
> 
> 标签：java, android, excel, jxl

我正在开发一个 Android 应用程序，用于使用 jxl 填充预先格式化的 excel 电子表格。我的问题是当我根据教程使用代码修改单元格时：

```
 WritableCell cell = sheet0.getWritableCell(0,8);
        if (cell.getType() == CellType.LABEL) 
        { 
          Label l = (Label) cell; 
          l.setString("hi"); 
        } 
```

它不会出现在电子表格上。即使文档被格式化为文本格式的单元格，仍然不起作用。我尝试使用以下方法编写一个数字：

```
 WritableCell cell = sheet0.getWritableCell(0,8);
        if (cell.getType() == CellType.NUMBER) 
        { 
          Number l = (Number) cell; 
          l.setValue(1); 
        } 
```

并将文档上的单元格格式化为数字类型，但仍然不起作用。我可以在文档上写的唯一方法是使用 addCell 方法：

`Label label2 = new Label(0, 8, "X"); sheet0.addCell(label2);`

但是这样一来，系统只会添加一个新的单元格，不会修改内容，会丢失原来的格式（对我来说最关键的是边框样式）。

请指教。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:22:13.733

我有完全相同的问题，我最终解决了这个问题：

```
Cell existingCell = worksheet.getCell(columnIndex, rowIndex);
Label label = new Label(columnIndex, rowIndex, "some string");
label.setCellFormat(existingCell.getCellFormat());
worksheet.addCell(label); 
```

# c - 读取fat16 img文件的内存位置值

> ID：13441685
> 
> 赞同：1
> 
> 时间：2012-11-18T15:46:46.197
> 
> 标签：c, unix, hex

我有一个 FAT16 映像，我想复制存储在 C 中此映像中特定内存位置的数据。

如果用 hexedit 打开 myfat16.img 文件给出

```
0000A320   44 54 FC 0C  19 85 13 E9  F6 D5 20 7F  56 24 EB A7  DC 2F 54 7A  20 10 9F 80  54 45 BB AE  E9 C2 6E 08  08 4F 01 11  16 EF 1B A7  1E 00 00 01  05 3B F0 A8  DT........ .V$.../Tz ...TE....n..O...........;.. 
```

我怎样才能访问说 0xA322？

是用 open() 打开它然后计算直到这个地址的字节的唯一方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:50:04.337

使用 C 标准库打开并使用, 然后或任何对您最方便的阅读功能`fopen`直接转到您感兴趣的地址。`fseek``fread`

如果您必须直接使用 POSIX 系统调用，您可以分别使用`open`,`lseek`和`read`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:50:26.567

您可以使用`fopen()`,`[fseek()](http://linux.die.net/man/3/fseek)`当然`fread()`也可以只读取感兴趣的字节。

由于您在 Unix 中，您还可以使用`[mmap()](https://www.google.com/search?client=ubuntu&channel=fs&q=man%20mmap&ie=utf-8&oe=utf-8)`将文件映射到内存中，然后直接在所需的偏移量处读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:51:17.657

您可以使用`open`

然后将带有`read()`函数的文件读入`buffer`

然后从地址复制`0xA322`

```
memcpy(buffer2, buffer+0xA322, len); 
```

# javascript - javascript函数显示在正文中

> ID：13441686
> 
> 赞同：0
> 
> 时间：2012-11-18T15:46:57.693
> 
> 标签：javascript

我有这个位置脚本：

```
<html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>

<body>
 <p id="demo">&nbsp;</p>
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
function showPosition(position)
  {
   x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;    
  }

window.onload = getLocation();

</script>
</body>
</html> 
```

它工作得很好，但我想做的是再一次在我的身体中显示坐标而不复制相同的脚本。例如，我只想要 php code echo $coords 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:04:11.303

只需调用 getLocation 并将元素 ID 传递到您想要坐标的位置。

```
 function getLocation(elem) {
        var x = document.getElementById(elem);

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        }
        else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }

        function showPosition(position) {
            x.innerHTML = "Latitude: " + position.coords.latitude + "<br>Longitude:  " + position.coords.longitude;
        }

    }

    getLocation('demo');
    getLocation('demo1'); 
```

HTML：

```
<p id="demo">&nbsp;</p>
<p id="demo1">&nbsp;</p> 
```

[工作演示](http://jsfiddle.net/FeaZJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:04:13.020

停止`x`用作全局。让它成为 getLocation() 的一个参数（并给它一个更能透露意图的名称）。

`showPosition`只有从 调用`getLocation`，在里面定义它`getLocation`，然后它可以使用相同的变量。

```
function getLocation(target_element) {

    function showPosition(position) {
        target_element.innerHTML = "Latitude: " + position.coords.latitude +
            "<br>Longitude: " + position.coords.longitude;
    }

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        target_element.innerHTML = "Geolocation is not supported by this browser.";
    }
}

getLocation(document.getElementById("demo"));
getLocation(document.getElementById("some_other_element")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T16:14:03.243

```
<body>
<p id="demo">&nbsp;</p>
<script>
window.onload = getLocation();

var x=document.getElementById("demo");
var locationString="";

function getLocation(){ /*the rest of your code */ }
function showPosition(position)
{
  locationString = "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;

  x.innerHTML=locationString;
}

</script>
<!-- the rest of HTML here -->
<p><script>document.write(locationString);</script></p>
</body>
</html> 
```

# html - 有效的 html 5 示例

> ID：13441688
> 
> 赞同：3
> 
> 时间：2012-11-18T15:47:19.487
> 
> 标签：html

我正在寻找这些工具认为有效的 xml 格式的 html 5 文档：

*   eclipse juno html 验证器
*   w3c 验证器[http://validator.w3.org](http://validator.w3.org)
*   [http://html5.validator.nu/](http://html5.validator.nu/)
*   firefox html 验证器[https://addons.mozilla.org/fr/firefox/addon/html-validator/](https://addons.mozilla.org/fr/firefox/addon/html-validator/)

任何人都可以向我提供这样的文件（如果存在）或向我解释哪个验证器不符合标准。我找到的最好的是以下文档：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
    dir="ltr">
<head>
<meta name="description"
    content="application/xhtml+xml; charset=UTF-8" />
<title>Get an object</title>
</head>
<body>
    <section>This is a section</section>
</body> 
```

请注意，该文档包含仅在 html 5 中有效的 section 元素。该文档对 eclipse 和 firefox 无效。

问候， 米凯尔

**回答：**

感谢您提供有用的链接 igo： [http ://docs.webplatform.org/wiki/html/tutorials](http://docs.webplatform.org/wiki/html/tutorials)

我了解到，即使强烈建议使用 xhtml 语法，包括 xml 标题行也可能会导致某些浏览器出现问题。所以我删除了它，下面的代码由上面的所有验证器验证，eclipse 使用 xml 约束将它验证为 html5。

```
<!DOCTYPE html>
<html lang="en"
    dir="ltr">
<head>
<meta name="description"
    content="application/xhtml+xml"/>
<meta charset="UTF-8"/>

<title>Get an object</title>
</head>
<body>
    <section>This is a section</section>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:02:36.230

[在https://www.w3.org/QA/2002/04/valid-dtd-list.html](https://www.w3.org/QA/2002/04/valid-dtd-list.html)查看 W3C 新推出的网站上的文档

# php - 圆形函数php

> ID：13441690
> 
> 赞同：-1
> 
> 时间：2012-11-18T15:47:26.757
> 
> 标签：php, rounding

也许问题很简单，但我找不到答案。我需要做的是在逗号后将数字四舍五入到 2 位。我用这个：

```
round(($data/$count*100), 2) 
```

当我得到这样的数字时：

```
60.36036036036012 and : 37.83783783783808 is OK, because it's: 60.36 and 37.84 
```

但为什么会这样：

```
1.8018018018018036 
```

四舍五入到这个：

```
1.8000000000000003 
```

逗号后如何始终舍入到 2 个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:15:41.047

`1.8`除非您使用带有某种相关错误的旧 PHP 版本之类的东西，否则您应该得到。尽管如此，如果你想看到`1.80`你需要格式化输出字符串，否则默认情况下会去除尾随零。最灵活的方法是使用`sprintf()`格式，如下所示：

```
$val = 1.8000000000000003;
printf("%.02f", round( $val, 2 )); 
```

这会产生

```
1.80 
```

关键是“%.02f”，这意味着您要格式化 (f) 浮点值，点后有两位数字，`0`在需要时填充（如本例）。

[有关可用格式设置的更多信息，请参阅 sprintf()](http://php.net/sprintf)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:06:14.713

使用 PHP NumberFormatter 类[http://es.php.net/manual/es/class.numberformatter.php](http://es.php.net/manual/es/class.numberformatter.php)

# c# - 如何将发布配置文件添加到 vs2012 中的新 sln？

> ID：13441692
> 
> 赞同：22
> 
> 时间：2012-11-18T15:47:53.437
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio-2012, web-deployment

我已阅读发布配置文件已替换 WDP

但我找不到像样的教程

如何向`pubxml`我的项目添加和修改文件

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-16T10:59:05.793

为了创建一个**新的配置文件**，一旦你已经定义了一个，你必须打开“发布”窗口（右键单击项目），单击“配置文件”选项卡并`<New...>`从下拉列表中选择选项；这将创建一个新`pubxml`文件（见截图）。
找到它有点棘手，我想知道为什么他们没有在“管理配置文件”窗口上放置“新建”按钮。

![在此处输入图像描述](../Images/aa2bd3d24a92363976cb060ed4ce59d8.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-19T13:16:51.813

当您右键单击一个项目并选择**Publish**时，您将获得**Publish Web**向导。使用它来创建配置文件（您不必实际发布即可创建配置文件）创建 .pubxml，在向导的第一步，您可以使用“**管理配置文件”**按钮重命名或删除配置文件。配置文件是在 Properties 下的 PublishProfiles 文件夹中创建的。看

[http://msdn.microsoft.com/en-us/library/ff398069.aspx](http://msdn.microsoft.com/en-us/library/ff398069.aspx)

# php - 如何将 JavaScript 内爆到 PHP 的返回函数中？

> ID：13441693
> 
> 赞同：1
> 
> 时间：2012-11-18T15:48:02.603
> 
> 标签：php, javascript

我有一个 PHP 函数：

```
function output_errors($errors) {
    return '<ul><li>' . implode('</li><li>', $errors) . '</li></ul>';
} 
```

但我希望使用 jQuery 来显示错误，而不是`<ul>`and s：`<li>`

```
$(function() {
    $.pnotify({
        title: 'Update Successful!',
        text: '<p>Error text here!</p>',
    });
}); 
```

我尝试了很多组合，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:54:49.280

的对应物`implode`是`join`javascript。

`'<ul><li>' . implode('</li><li>', $errors) . '</li></ul>'`所以相当于

```
var errorstring = '<ul><li>' + errorArray.join('</li><li>') + '</li></ul>'; 
```

也许这可以帮助您相应地更改您的`$.pnotify`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:51:18.933

什么具体不起作用？只需简单地用逗号内爆：

```
 function output_errors($errors) {
                $error = implode(', ', $errors);
                echo <<< xyz
<script>
                $(function() {
                $.pnotify({
                  title: 'Update Successful!',
                  text: '$error',
                 });
                });
</script>
xyz;
            } 
```

# php - 数组只匹配一个结果

> ID：13441694
> 
> 赞同：0
> 
> 时间：2012-11-18T15:48:05.513
> 
> 标签：php, arrays, match

有可能做到这一点吗？

我有一些数组

```
Array
(
    [1] => Model_Like Object
        (
            [_is_new:protected] => 
            [_frozen:protected] => 
            [_data:protected] => Array
                (
                    [id] => 1
                    [user_id] => 5
                    [liked_by] => 1
                )

            [_custom_data:protected] => Array
                (
                )

            [_original:protected] => Array
                (
                    [id] => 1
                    [user_id] => 5
                    [liked_by] => 1
                )

            [_data_relations:protected] => Array
                (
                )

            [_original_relations:protected] => Array
                (
                )

            [_reset_relations:protected] => Array
                (
                )

            [_view:protected] => 
            [_iterable:protected] => Array
                (
                )

        )

    [2] => Model_Like Object
        (
            [_is_new:protected] => 
            [_frozen:protected] => 
            [_data:protected] => Array
                (
                    [id] => 2
                    [user_id] => 5
                    [liked_by] => 2
                )

            [_custom_data:protected] => Array
                (
                )

            [_original:protected] => Array
                (
                    [id] => 2
                    [user_id] => 5
                    [liked_by] => 2
                )

            [_data_relations:protected] => Array
                (
                )

            [_original_relations:protected] => Array
                (
                )

            [_reset_relations:protected] => Array
                (
                )

            [_view:protected] => 
            [_iterable:protected] => Array
                (
                )

        )

    [4] => Model_Like Object
        (
            [_is_new:protected] => 
            [_frozen:protected] => 
            [_data:protected] => Array
                (
                    [id] => 4
                    [user_id] => 5
                    [liked_by] => 6
                )

            [_custom_data:protected] => Array
                (
                )

            [_original:protected] => Array
                (
                    [id] => 4
                    [user_id] => 5
                    [liked_by] => 6
                )

            [_data_relations:protected] => Array
                (
                )

            [_original_relations:protected] => Array
                (
                )

            [_reset_relations:protected] => Array
                (
                )

            [_view:protected] => 
            [_iterable:protected] => Array
                (
                )

        )

) 
```

我只想显示一个匹配的结果。

```
<?php foreach ($user->likes as $likes): ?>
<?php if($likes['liked_by'] == $logged_in_user_id): ?>
     <?php echo "you like it" ?>
<?php else: ?>
    <?php echo "you dont like it" ?>
<?php endif; ?>
<?php endforeach; ?> 
```

这样我得到以下结果

```
you like it  you dont like it    you dont like it 
```

有没有只显示matchig结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:01:48.453

使用`return;`从循环中跳出的

```
<?php 
   $result = "you dont like it";
   foreach ($user->likes as $likes) {
     if($likes['liked_by'] == $logged_in_user_id) {
       $result = "you like it";
     }
   }
   echo $result;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:55:08.343

当你击中比赛时，你可以跳出循环。有多种方法可以实现这一点，从使用标志变量到破坏比赛的控制流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:04:19.180

或者，您可以过滤 likes 数组以仅包含用户的喜欢。之后，您只需获取该数组的第一个条目，即第一个“喜欢”。给你一个印象：

```
$likesOfUser = array_filter($user->likes, function($c) use ($logged_in_user_id)
{
    return $c['liked_by'] == $logged_in_user_id;
});

$like = array_shift($likesOfUser); 
```

但这可能有点过头了，只有在您需要单独的数组中的喜欢时才推荐。

# eclipse - Eclipse - 安装不显示 p2 存储库的新软件

> ID：13441695
> 
> 赞同：1
> 
> 时间：2012-11-18T15:48:13.183
> 
> 标签：eclipse, installation

我在使用 Eclipse 的“安装新软件”和“更新”对话框时遇到了严重问题。

事实上，他们似乎什么都不做。

使用全新的 Eclipse Java EE Juno 4.2，我无法安装新软件。我尝试检索“Juno - [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno) ”的内容，但它一直卡住。通常是在 31% 左右停止做任何事情，但有时会在 20 分钟后达到 38%，但肯定有问题。

我取消了所有选项并停用了防火墙和防病毒软件，并尝试在 eclipse 中更改网络配置但没有任何效果。

我不支持代理。

有人对此有解决方案吗？

问候

错误日志有很多条目，主要是这样的：

无法在[http://download.eclipse.org/releases/juno/201206270900/artifacts.jar](http://download.eclipse.org/releases/juno/201206270900/artifacts.jar)读取存储库。

未知主机：http: [//download.eclipse.org/webtools/patches/drops/R3.4.1/P-3.4.1-20121112163420/repository/content.xml](http://download.eclipse.org/webtools/patches/drops/R3.4.1/P-3.4.1-20121112163420/repository/content.xml)

在连接重置时连接到[http://download.eclipse.org/technology/epp/packages/juno/p2.index](http://download.eclipse.org/technology/epp/packages/juno/p2.index)失败。重试尝试 0 开始

在连接重置时连接到[http://download.eclipse.org/webtools/patches/drops/R3.4.1/P-3.4.1-20121112163420/repository/p2.index](http://download.eclipse.org/webtools/patches/drops/R3.4.1/P-3.4.1-20121112163420/repository/p2.index)失败。重试尝试 0 开始

无法在[http://download.eclipse.org/releases/juno/201206270900/content.jar](http://download.eclipse.org/releases/juno/201206270900/content.jar)读取存储库。

在连接重置时连接到[http://download.eclipse.org/releases/juno/201209280900/p2.index](http://download.eclipse.org/releases/juno/201209280900/p2.index)失败。重试尝试 0 开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T01:21:02.657

您也可以尝试在 STS.ini 文件中使用以下选项，它对我有用：

```
-Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:37:03.843

确保您没有运行防病毒软件（尤其是卡巴斯基）。可能必须暂停您的 AV 程序，因为它可能会阻止该过程。

# php - php mysqli 我应该使用 real_escape_string 吗？

> ID：13441697
> 
> 赞同：0
> 
> 时间：2012-11-18T15:48:35.490
> 
> 标签：php, mysqli

> **可能重复：**
> [在 MySQLi 上使用 bind_param() 时，是否需要转义数据以防止 SQL 注入？](https://stackoverflow.com/questions/7409553/do-i-need-to-escape-data-to-protect-against-sql-injection-when-using-bind-param)

我有一个简化查询的类。这是一个如何插入数据的代码示例：

```
$dbi->prepare("INSERT INTO `temp` (`name`,`content`) VALUES (?,?);")->execute($name,$content); 
```

类中有这样的函数：

```
public function execute(){
        if(is_object($this->connection) && is_object($this->stmt)){
            if(count($args = func_get_args()) > 0){
                $types = array();
                $params = array();

                foreach($args as $arg){
                    $types[] = is_int($arg) ? 'i' : (is_float($arg) ? 'd' : 's');
                    $params[] = $arg;
                                              /*
                                                 or maybe $params[] = $this->connection->real_escape_string($arg);
                                              */
                }

                array_unshift($params, implode($types));

                call_user_func_array(
                    array($this->stmt, 'bind_param'),
                    $this->_pass_by_reference($params)
                );
            }

            if($this->stmt->execute()){
                $this->affected_rows = $this->stmt->affected_rows;
                return $this;
            }
            else {
                throw new Exception;
            }
        }
        else {
            throw new Exception;
        }
    } 
```

当我声明`$params[]`我有这样的`$params[] = $arg;`我应该放`$params[] = $this->connection->real_escape_string($arg);`还是不放？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:50:19.883

不，当您使用参数时，您不需要转义字符串。

事实上，您*不能*对字符串进行转义，因为您最终会将字符串存储在包含文字反斜杠的数据库中。这不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:59:16.463

根据[PHP Manual on`mysqli`](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)和prepared statements：

> **转义和 SQL 注入**
> 
> 绑定变量将被服务器自动转义。服务器在执行之前将它们的转义值插入到语句模板的适当位置。必须向服务器提供绑定变量类型的提示，以创建适当的转换。有关详细信息，请参阅 mysqli_stmt_bind_param() 函数。
> 
> 服务器内的值的自动转义有时被认为是防止 SQL 注入的安全功能。如果输入值正确转义，则可以使用非准备语句实现相同程度的安全性。

所以不，您不必关心转义，服务器会为您处理转义。

*手动转义将导致双重转义值。而在我个人看来`?`，sql语句中占位符的最大好处就是不用担心转义。*

# bash - 为什么即使我已将 STDOUT 和 STDERR 都重定向到 /dev/null，我的命令行上仍会出现文本？

> ID：13441703
> 
> 赞同：1
> 
> 时间：2012-11-18T15:49:31.713
> 
> 标签：bash, redirect, debian, fuse

我正在尝试从脚本中卸载 encfs 文件系统，但无论我如何尝试，我似乎都无法阻止下面的保险丝错误出现在屏幕上/crontab 电子邮件中。

```
# exec 3>&1 1>/dev/null 4>&2 2>/dev/null; setsid fusermount -u /data/encfs; exec 1>&3 2>&4 3>&- 4>&-
# fuse failed.  Common problems:
 - fuse kernel module not installed (modprobe fuse)
 - invalid options -- see usage message 
```

我必须忍受的错误本身。卸载成功并且错误是错误的，并且由于现代版本的保险丝中早已存在的错误。我坚持使用旧版本，因为我在运行半古老版本的 debian 的特殊硬件上。

让我恼火的是，我无法告诉系统将无意义的消息扔到 /dev/null 中。在我尽最大努力防止它同时使用 setid 和重定向之后，该消息是如何出现在我的屏幕上的？

编辑：

```
# exec 3>&1 1>/dev/null 4>&2 2>/dev/null; setsid fusermount -u /data/encfs > /dev/null 2>&1; EXIT=$?; exec 1>&3 2>&4 3>&- 4>&-; echo $EXIT
0
# fuse failed.  Common problems:
 - fuse kernel module not installed (modprobe fuse)
 - invalid options -- see usage message 
```

我什至尝试过这样的事情：

```
perl -e "`fusermount -u /data/encfs`" 
```

但错误保持不变。

我的 /etc/syslog.conf：

```
auth,authpriv.*                     -/var/log/auth.log
*.*;auth,authpriv,cron.none         -/var/log/syslog
cron.*                              -/var/log/cron.log
daemon.*                            -/var/log/daemon.log
kern.*                              -/var/log/kern.log
lpr.*                               -/var/log/lpr.log
mail.*                              -/var/log/mail.log
user.*                              -/var/log/user.log

*.=debug;\
    auth,authpriv.none;\
    mail.none       -/var/log/debug
*.=info;*.=notice;*.=warn;\
    auth,authpriv.none;\
    cron,daemon.none;\
    mail.none       -/var/log/messages 
```

编辑2：

我不认为 fusermount 是实际生成文本的程序。它戳了其他东西：

```
# strace -o ~/trash/strace.txt fusermount -u /data/encfs; EXIT=$?; echo $EXIT; grep write ~/trash/strace.txt                             
fuse failed.  Common problems:
 - fuse kernel module not installed (modprobe fuse)
 - invalid options -- see usage message
0
write(5, "/dev/hdc1 / ext3 rw,noatime 0 0\n", 32) = 32
write(5, "proc /proc proc rw 0 0\n", 23) = 23
write(5, "devpts /dev/pts devpts rw 0 0\n", 30) = 30
write(5, "sysfs /sys sysfs rw 0 0\n", 24) = 24
write(5, "tmpfs /ramfs ramfs rw 0 0\n", 26) = 26
write(5, "tmpfs /USB tmpfs rw,size=16k 0 0"..., 33) = 33
write(5, "/dev/c/c /c ext3 rw,noatime,acl,"..., 65) = 65
write(5, "nfsd /proc/fs/nfsd nfsd rw 0 0\n", 31) = 31
write(5, "usbfs /proc/bus/usb usbfs rw 0 0"..., 33) = 33
write(5, "//localhost/smb /root/folder"..., 55) = 55 
```

如果我让 strace 记录到标准输出，我会在 umount 系统调用中间收到错误消息：

```
# strace fusermount -u /data/encfs
execve("/usr/bin/fusermount", ["fusermount", "-u", "/data/encfs"], [/* 16 vars */]) = 0
[... abbreviating ...]
close(5)                                = 0
munmap(0x20020000, 16384)               = 0
profil(0, 0, 0x2010c168, 0x4)           = 0
umount("/data/encfs", 0fuse failed.  Common problems:
 - fuse kernel module not installed (modprobe fuse)
 - invalid options -- see usage message
)    = 0
profil(0, 0, 0x1177c, 0x20179f98)       = 0
stat64("/etc/mtab", {st_mode=S_IFREG|0644, st_size=407, ...}) = 0
ftime(0x13840)                          = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:44:14.323

`strace`在命令上使用。它将向您显示正在发生的事情的详细信息，包括写入消息的描述符的编号

```
strace fsusermount -u /data/encfs 
```

如果消息来自`fsusermount`您应该看到类似

```
write(0, "- fuse kernel module not installed (modprobe fuse)\n") 
```

输出中的某处。数字（不一定是 0）是写入消息的文件描述符的编号。使用该数字重定向描述符应该可以消除该消息：

```
fsusermount -u /data/encfs 0>/dev/null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:53:10.800

弄清楚了。

错误消息不是来自 fusermount，它来自 fusermount 运行时的 mount 命令。

这样做可以解决问题：

```
# encfs --extpass=echo_key.sh /data/.encfs /data/encfs 2>/dev/null; sleep 3; fusermount -u /data/encfs
# 
```

现在感觉很明显，我知道了......

# ruby-on-rails - Rails 和 Mongo GridFS

> ID：13441705
> 
> 赞同：1
> 
> 时间：2012-11-18T15:49:57.093
> 
> 标签：ruby-on-rails, mongodb, gridfs

我一直使用 Mongoid 作为驱动程序，但现在我应该使用 Mongo 驱动程序将文件保存到 GridFS。我不明白，如何将 Mongo 混合到模型中，以及我应该在哪里放置显式连接代码。你能帮帮我吗？

# cocoa - 从 NSMenu 打开 NSWindowController

> ID：13441718
> 
> 赞同：4
> 
> 时间：2012-11-18T15:51:17.713
> 
> 标签：cocoa, nswindow, nswindowcontroller

我在代理应用程序中使用 NSMenu *（在 Dock 中没有图标）*。当点击此菜单中的按钮时，我想显示一个通用的 NSWindowController。

我的菜单按钮操作：

```
- (IBAction)menuButtonTapped:(id)sender {    
    MyWindowController *myWindow = [[MyWindowController alloc] initWithWindowNibName:@"MyWindowController"];

    [myWindow showWindow:nil];
    [[myWindow window] makeMainWindow];
} 
```

但是窗口只是在屏幕上“闪烁”（它显示和消失得非常快）。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T17:35:56.463

窗口出现一瞬间然后消失的原因与 ARC 以及您如何创建窗口控制器的实例有关：

```
- (IBAction)menuButtonTapped:(id)sender {    
    MyWindowController *myWindow = [[MyWindowController alloc]
                    initWithWindowNibName:@"MyWindowController"];
    [myWindow showWindow:nil];
    [[myWindow window] makeMainWindow];
} 
```

在 ARC 下，`myWindow`实例将在其定义的范围内有效。换句话说，在`[[myWindow window] makeMainWindow];`到达并运行最后一行之后，窗口控制器将被释放和释放，结果，它的窗口将从屏幕上移除。

一般来说，对于您创建的想要“保留”的项目或对象，您应该将它们定义为具有`strong`属性的实例变量。

例如，您的 .h 看起来像这样：

```
@class MyWindowController;

@interface MDAppController : NSObject

@property (nonatomic, strong) MyWindowController *windowController;

@end 
```

修改后的`menuButtonTapped:`方法看起来像这样：

```
- (IBAction)menuButtonTapped:(id)sender {
    if (self.windowController == nil) {
         self.windowController = [[MyWindowController alloc]
            initWithWindowNibName:@"MyWindowController"];
    }
    [self.windowController showWindow:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:59:18.710

用这个：

```
[[myWindow window] makeKeyAndOrderFront:self]; 
```

# java - 使用 Java 从 Github 下载二进制文件

> ID：13441720
> 
> 赞同：6
> 
> 时间：2012-11-18T15:51:25.903
> 
> 标签：java, github, download, binary, urlconnection

我正在尝试使用以下方法下载此文件（[http://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar](http://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar)），但它似乎不起作用。我得到一个空/损坏的文件。

```
String link = "http://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar";
String fileName = "ChampionHelper-4.jar";

URL url = new URL(link);
URLConnection c = url.openConnection();
c.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; .NET CLR 1.2.30703)");

InputStream input;
input = c.getInputStream();
byte[] buffer = new byte[4096];
int n = -1;

OutputStream output = new FileOutputStream(new File(fileName));
while ((n = input.read(buffer)) != -1) {
    if (n > 0) {
        output.write(buffer, 0, n);
    }
}
output.close(); 
```

但是我可以使用相同的方法从我的保管箱（ [http://dl.dropbox.com/u/13226123/ChampionHelper-4.jar](https://dl.dropbox.com/u/13226123/ChampionHelper-4.jar) ）成功下载以下文件。

所以不知何故，Github 知道我不是试图下载文件的普通用户。我已经尝试更改用户代理，但这也无济于事。

那么我应该如何使用 Java 下载托管在我的 Github 帐户上的文件？

编辑：我尝试为此使用 apache commons-io，但我得到了相同的效果，一个空/损坏的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:13:10.877

当您请求此文件时，GitHub 似乎为您提供了多个级别的重定向，而[这篇 StackOverflow 文章](https://stackoverflow.com/questions/1884230/java-doesnt-follow-redirect-in-urlconnection)指出 URLConnection 不会自动遵循更改协议的重定向。这是我在 curl 中看到的内容：

第一个请求：

```
curl -v http://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar
* About to connect() to github.com port 80 (#0)
*   Trying 207.97.227.239... connected
* Connected to github.com (207.97.227.239) port 80 (#0)
> GET /downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: github.com
> Accept: */*
>  
< HTTP/1.1 301 Moved Permanently 
< Server: nginx < Date: Sun, 18 Nov 2012 15:56:36 GMT 
< Content-Type: text/html < Content-Length: 178 
< Connection: close 
< Location: https://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar 
<  <html> <head><title>301 Moved Permanently</title></head> <body bgcolor="white"> <center><h1>301 Moved Permanently</h1></center> <hr><center>nginx</center> </body> </html>
* Closing connection #0 
```

此位置标题的卷曲：

```
curl -v https://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar
* About to connect() to github.com port 443 (#0)
*   Trying 207.97.227.239... connected
* Connected to github.com (207.97.227.239) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*    subject: businessCategory=Private Organization; 1.3.6.1.4.1.311.60.2.1.3=US; 1.3.6.1.4.1.311.60.2.1.2=California; serialNumber=C3268102; C=US; ST=California; L=San Francisco; O=GitHub, Inc.; CN=github.com
*    start date: 2011-05-27 00:00:00 GMT
*    expire date: 2013-07-29 12:00:00 GMT
*    subjectAltName: github.com matched
*    issuer: C=US; O=DigiCert Inc; OU=www.digicert.com; CN=DigiCert High Assurance EV CA-1
*    SSL certificate verify ok.
> GET /downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: github.com
> Accept: */*
> 
< HTTP/1.1 302 Found
< Server: nginx
< Date: Sun, 18 Nov 2012 15:58:56 GMT
< Content-Type: text/html; charset=utf-8
< Connection: keep-alive
< Status: 302 Found
< Strict-Transport-Security: max-age=2592000
< Cache-Control: no-cache
< X-Runtime: 48
< Location: http://cloud.github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar
< X-Frame-Options: deny
< Content-Length: 149
< 
* Connection #0 to host github.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1):
<html><body>You are being <a href="http://cloud.github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar">redirected</a>.</body></html> 
```

此响应中的位置标头正在返回实际文件。您可能想使用 Apache HTTP 客户端来下载它。您可以将其设置为在 GET 期间遵循这些 301 和 302 重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:31:33.750

这个做的工作：

```
public class Download {
   private static boolean isRedirected( Map<String, List<String>> header ) {
      for( String hv : header.get( null )) {
         if(   hv.contains( " 301 " )
            || hv.contains( " 302 " )) return true;
      }
      return false;
   }
   public static void main( String[] args ) throws Throwable
   {
      String link =
         "http://github.com/downloads/TheHolyWaffle/ChampionHelper/" +
         "ChampionHelper-4.jar";
      String            fileName = "ChampionHelper-4.jar";
      URL               url  = new URL( link );
      HttpURLConnection http = (HttpURLConnection)url.openConnection();
      Map< String, List< String >> header = http.getHeaderFields();
      while( isRedirected( header )) {
         link = header.get( "Location" ).get( 0 );
         url    = new URL( link );
         http   = (HttpURLConnection)url.openConnection();
         header = http.getHeaderFields();
      }
      InputStream  input  = http.getInputStream();
      byte[]       buffer = new byte[4096];
      int          n      = -1;
      OutputStream output = new FileOutputStream( new File( fileName ));
      while ((n = input.read(buffer)) != -1) {
         output.write( buffer, 0, n );
      }
      output.close();
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-24T18:01:10.167

获取原始二进制文件的直接下载链接，例如 [https://github.com/xerial/sqlite-jdbc/blob/master/src/main/resources/org/sqlite/native/Windows/x86_64/sqlitejdbc.dll?raw =true](https://github.com/xerial/sqlite-jdbc/blob/master/src/main/resources/org/sqlite/native/Windows/x86_64/sqlitejdbc.dll?raw=true) 通过复制`View Raw`链接：

[![](../Images/07d43c73224fd8dfd740da17194849af.png)](https://i.stack.imgur.com/ddLaU.png)

最后使用以下代码下载文件：

```
public static void download(String downloadURL) throws IOException
{
    URL website = new URL(downloadURL);
    String fileName = getFileName(downloadURL);

    try (InputStream inputStream = website.openStream())
    {
        Files.copy(inputStream, Paths.get(fileName), StandardCopyOption.REPLACE_EXISTING);
    }
}

public static String getFileName(String downloadURL)
{
    String baseName = FilenameUtils.getBaseName(downloadURL);
    String extension = FilenameUtils.getExtension(downloadURL);
    String fileName = baseName + "." + extension;

    int questionMarkIndex = fileName.indexOf("?");
    if (questionMarkIndex != -1)
    {
        fileName = fileName.substring(0, questionMarkIndex);
    }

    fileName = fileName.replaceAll("-", "");
    return URLDecoder.decode(fileName, "UTF-8");
} 
```

您还需要该类的[`Apache Commons IO`](http://commons.apache.org/proper/commons-io/)Maven 依赖[`FilenameUtils`](https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FilenameUtils.html)项：

```
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>LATEST</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T16:15:41.743

我找到了解决方案。

显然`http://github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar`没有直接链接到我的文件。

当使用文本编辑器查看生成的 jar 时，我发现：

```
<html><body>You are being <a href="http://cloud.github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar">redirected</a>.</body></html> 
```

所以这意味着直接链接如下：`http://cloud.github.com/downloads/TheHolyWaffle/ChampionHelper/ChampionHelper-4.jar`

通过这个链接，我可以毫无问题地用我的方法下载文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T08:13:46.227

我可以使它适用于有问题的链接模板

> [http://github.com/downloads/Nodeclipse/eclipse-node-ide/CoffeeScriptSet.p2f](http://github.com/downloads/Nodeclipse/eclipse-node-ide/CoffeeScriptSet.p2f)

这也不是

> [http://cloud.github.com/downloads/Nodeclipse/eclipse-node-ide/CoffeeScriptSet.p2f](http://cloud.github.com/downloads/Nodeclipse/eclipse-node-ide/CoffeeScriptSet.p2f)

但是下面是对我有用的

> [https://raw.github.com/Nodeclipse/eclipse-node-ide/master/EclipseNodeIDE-0.2.p2f](https://raw.github.com/Nodeclipse/eclipse-node-ide/master/EclipseNodeIDE-0.2.p2f)

# android - Android：对齐父底部+底部边距

> ID：13441723
> 
> 赞同：71
> 
> 时间：2012-11-18T15:51:36.917
> 
> 标签：android, android-relativelayout, margins

我使用了相对布局，我想将按钮设置在屏幕底部，但是这会将其全部放在底部，我希望有一些边距，因此屏幕末端之间有一些空间/视图和按钮。但是，无论我做什么，按钮边距都出于某种原因在 2.1+ 上没有任何作用。相对布局包含一个背景，所以我不能只保留边距。

有人知道解决这个问题吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginBottom="0dp"
android:background="@drawable/background" >

    <Button
        android:id="@+id/confirm_mobile_button_next"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="false"
        android:layout_centerHorizontal="false"
        android:layout_centerInParent="false"
        android:layout_margin="15dp"
        android:background="@drawable/button_shape_selector"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:text="@string/confirm_mobile_no_continue"
        android:textColor="@color/white"
        android:textStyle="bold" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-18T15:55:55.580

您可以简单地向 RelativeLayout 添加填充，而不是向 Button 添加边距，例如`android:paddingBottom="15dp"`.

一般来说，我总是使用 API Level 8 设置在 Exclipse 预览中测试我的布局。这为大多数设备提供了相当准确的结果，包括 ICS 和 JB。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-09-19T04:18:32.640

您可以做的另一件事是放置一个`View`与底部对齐的`RelativeLayout`，并将其高度设置为您想要使用的底部边距（或简单地为 指定一个值`layout_marginBottom`），如下所示：

```
 <RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    > 
    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/some_image"
        android:adjustViewBounds="true"

         />
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Some Overlay"
        android:padding="3dip"
        android:gravity="center_vertical|center_horizontal"

        android:layout_above="@+id/empty_view"
        android:layout_marginBottom="35dip"
        />
    <View 
        android:id = "@+id/empty_view"
        android:layout_height = "30dip"
        android:layout_width = "match_parent"
        android:visibility="invisible"
        android:layout_alignParentBottom="true"
        />

    </RelativeLayout> 
```

此示例用 填充`RelativeLayout`，`ImageView`并将 a`TextView`放置在 上`ImageView`。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-07-21T09:07:20.517

可以使用 translateY 属性

```
translateY="-16dp" 
```

最终代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="0dp"
    android:background="@drawable/background">

    <Button
        android:id="@+id/confirm_mobile_button_next"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="false"
        android:layout_centerHorizontal="false"
        android:layout_centerInParent="false"
        android:layout_margin="15dp"
        android:background="@drawable/button_shape_selector"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:text="@string/confirm_mobile_no_continue"
        android:textColor="@color/white"
        android:textStyle="bold"
        android:translateY="-16dp" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-16T11:13:14.613

@franny zhao 建议的唯一工作解决方案如下。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <FrameLayout
        android:id="@+id/fl_layout"
        android:layout_alignParentBottom="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/tv_layout"
            android:text="hello world"
            android:layout_marginBottom="50dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </FrameLayout>
</RelativeLayout> 
```

如果您按照其他人的建议将填充添加到底部对齐的视图中，则视图背景也会扩展。如果你有彩色背景，那么视图看起来就像粘在底部一样。填充和边距完全不同，填充是视图的一部分，但边距在视图之间留下空间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-09T14:20:41.003

我认为最好的方法是在 XML 中设置 android:layout_alignParentBottom 然后在后面的 java 代码中：

```
Button confirm_mobile_button_next = (Button)findViewById(R.id.confirm_mobile_button_next) 
```

和

```
confirm_mobile_button_next.setTransitionY(-THE_VALUE) or setTransitionX(-THE_VALUE) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-09T14:25:21.123

我认为最好的方法是设置：

```
<...
android:layout_alignParentBottom="true" /> 
```

然后在java代码后面：

```
Button confirm_mobile_button_next = (Button)findViewById(R.id.confirm_mobile_button_next)
confirm_mobile_button_next.setTransitionY(-THE_VALUE) or setTransitionX(-THE_VALUE) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-14T08:55:25.393

您可以使用 ViewGroup（例如 FrameLayout 或 LinearLayout）来包装视图。在外部 ViewGroup 中设置 alignParentBottom，则 marginBottom 可以在内部 View 中工作。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <FrameLayout
        android:id="@+id/fl_layout"
        android:layout_alignParentBottom="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/tv_layout"
            android:text="hello world"
            android:layout_marginBottom="50dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </FrameLayout>
</RelativeLayout> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-23T14:21:55.107

由于我偶然发现了这个问题，并且没有看到适合我的情况的答案，我开始思考半秒钟并通过在 RelativeLayout 示例中的视图上设置负边距来解决它：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <ImageView
    android:layout_width="48dp"
    android:layout_height="48dp"
        android:layout_marginTop="-8dp"
        android:layout_marginStart="-8dp">
</RelativeLayout> 
```

这应该证明对某些人有用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-18T16:00:02.293

以这种方式尝试：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
         xmlns:tools="http://schemas.android.com/tools"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="17dp"
    android:text="Button" /> 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-05-21T18:06:27.080

这是另一种选择。如果您想设置子级的边距而不是父级的内边距，您应该将 的值设置`android:layout_marginTop`为所需边距的两倍，然后将 设置`android:layout_centerVertical`为 true。上边距被赋予期望值的两倍以补偿下边距。这样，您将在子视图周围拥有相等的顶部和底部边距。

```
<Button
    android:id="@+id/confirm_mobile_button_next"
    android:layout_width="fill_parent"
    android:layout_height="40dip"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="false"
    android:layout_centerVertical="true"
    android:layout_centerInParent="false"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="30dp"
    android:background="@drawable/button_shape_selector"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:text="@string/confirm_mobile_no_continue"
    android:textColor="@color/white"
    android:textStyle="bold" /> 
```

它会给你同样的结果。

# c# - 如何将图像添加到数据库，然后使用 C# 在 datagridview 中显示它们？

> ID：13441726
> 
> 赞同：0
> 
> 时间：2012-11-18T15:51:52.703
> 
> 标签：c#, database, image

我正在使用 VS 2010，并且在 C# 中有一个数据库，其中有一列名为“Pic”的列接受图像并且为空。现在，当我运行我的项目时，datagridview 会填充所有其他列，但对于我的“Pic”列，简单的是一个红色 X。我的问题是这个；如何对其进行编码，以便在运行时将图片显示在 datagridview 中？我相信我必须将图像转换为字节，然后单独填充每个单元格，但我真的不知道。我只是有几个.jpg，不知道在哪里编码或做什么。我将非常感谢任何人可以照亮我的这个困境！

谢谢，

德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:57:45.030

[在此](http://www.c-sharpcorner.com/Forums/Thread/175339/Controls/NewControls/)链接上查看 Shital 的答案。

我建议您不要将流压缩到数据库中，它可能会阻塞它，当然取决于您的数据库。您应该做的是在上传图片后，将它们托管在您的 IIS 中，并将链接地址保存在您的数据库记录中。

# asp.net - 如何在我的 PC 上正确版本的 VS 上安装 EFPowerTool Beta

> ID：13441728
> 
> 赞同：0
> 
> 时间：2012-11-18T15:52:33.190
> 
> 标签：asp.net, entity-framework-5, visual-studio-power-tools

我的 PC 上安装了多个版本的 MS Visual Studio。VS 2010，VS Express 2012 for Web 和 WebMatrix 2。我遇到的问题是，当我尝试在 VS Express 2012 for Web 上安装 EFPowerTool Beta（Entity Framework Power Tool）（vsix 文件）以在我的 ASP.NET MVC 中使用时项目; MS Visual Studio 版本选择器选择 VS 2010 并将其安装在该 IDE 上。你有关于如何在 VS Express 2012 for Web 上安装 EFPowertool 的解决方案吗？我一无所知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:47:40.243

根据 vsixmanifest 文件，您至少需要专业版的 VS2010 或 VS2012 才能安装 EF Power Tools Beta。您可以尝试破解它（不保证 - 我没有尝试过）：

1) 将 .zip 扩展名添加到 vsix 文件。（vsix 实际上是一个 zip 文件）

2）解压zip文件到一个文件夹

3) 打开 vsixmanifest 文件

4）修改文件，使这个片段：

```
<VisualStudio Version="11.0">
    <Edition>Pro</Edition>
</VisualStudio> 
```

如下所示：

```
<VisualStudio Version="11.0">
  <Edition>Express_All</Edition>   
  <Edition>Pro</Edition>
</VisualStudio> 
```

5) 将文件夹拉回

6) 将 zip 重命名为 vsix

7）双击vsix文件进行安装

同样，这是一个黑客。即使它允许您在 Visua Express for Web 上安装扩展，也并不意味着一切（或任何东西）都可以工作。但仍然 - 只需 10 分钟即可尝试。

# memory-management - 页面错误是否会导致错误进程重新调度？

> ID：13441732
> 
> 赞同：9
> 
> 时间：2012-11-18T15:53:05.087
> 
> 标签：memory-management, linux-kernel, operating-system, segmentation-fault, swap

在 Linux 中，当一个进程试图访问一个没有当前物理映射的页面（缺少页表条目）时，会产生一个页面错误（由 CPU）。这会导致调用 Linux 的页面错误处理程序。如果这个故障是“严重的”，意味着 Linux 必须从交换设备读取页面，在这种情况下，处理程序必须从实际磁盘读取。由于从磁盘读取是异步的（submit_bio），这是否会导致进程重新调度？（并在 I/O 完成时唤醒？）

如果确实发生了重新安排，“schedule()”的调用在哪里？阅读 mm/swap_state.c 中的代码并不能让我知道何时（或是否）会发生这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T16:02:42.570

如果页面不在物理内存中，进程会阻塞，直到页面被读取，我认为你在错误的地方寻找调度应该在页面错误处理程序或它调用的任何函数中。[在第 9.4 节](http://web.archive.org/web/20130330002936/http://www.makelinux.net/books/ulk3/understandlk-CHP-9-SECT-4)中有更多信息。[“理解 Linux 内核”一书中的“Page Fault Exception Handler”](http://web.archive.org/web/20130330002936/http://www.makelinux.net/books/ulk3/understandlk-CHP-9-SECT-4)，我引用：

> 如果**handle_mm_fault( )**函数成功地为进程分配了一个新的页框，则返回VM_FAULT_MINOR 或VM_FAULT_MAJOR。VM_FAULT_MINOR 值表示 Page Fault 已经被处理，没有阻塞当前进程；这种页面错误称为次要错误。**VM_FAULT_MAJOR 值表示 Page Fault 强制当前进程休眠**

# devise - # 未定义的方法“用户名”

> ID：13441737
> 
> 赞同：3
> 
> 时间：2012-11-18T15:53:47.723
> 
> 标签：devise, activeadmin

我首先安装了设计并对其进行了更改，因此我可以使用用户名而不是电子邮件登录。之后，我将 Activeadmin gem 输入到我的 gem 文件中。

之后，我进行了捆绑安装并 rake active_admin:install。但是在尝试登录后端 /admin/login 后，我看到了以下错误消息：

```
undefined method `username' for #<AdminUser:0x00000004bb2e58> 
```

在此代码上：

提取的源代码（第 7 行附近）：

```
4:   <% scope = Devise::Mapping.find_scope!(resource_name) %>
5:   <%= active_admin_form_for(resource, :as => resource_name, :url => send(:"#{scope}_session_path"), :html => { :id => "session_new" }) do |f|
6:     f.inputs do
7:       resource.class.authentication_keys.each { |key| f.input key, :input_html => {:autofocus => true}}
8:       f.input :password
9:       f.input :remember_me, :label => t('active_admin.devise.login.remember_me'), :as => :boolean, :if =>  false  #devise_mapping.rememberable? }
10:     end 
```

有人知道如何解决这个问题吗？如果您需要更多信息，请询问。

罗洛夫

编辑：我想我可以通过这样做来解决这个问题：http: [//blog.blazingcloud.net/2012/07/29/activeadmin-with-existing-devise-authentication/](http://blog.blazingcloud.net/2012/07/29/activeadmin-with-existing-devise-authentication/) 但是现在所有登录都失败了（401）他们在哪里没有activeadmin他们成功了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T21:30:23.500

我遇到了同样的错误，我将其添加到我的 AdminUser 模型中解决了它

```
 def login=(login)
    @login = login
  end

  def login
    @login || self.email
  end

  def self.find_for_database_authentication(warden_conditions)
    conditions = warden_conditions.dup
    login = conditions.delete(:login)
    where(conditions).where(["lower(email) = :value", { :value => login.strip.downcase }]).first
  end 
```

# c# - 通过元数据令牌访问 PropertyInfo 以从 IL 中使用？

> ID：13441742
> 
> 赞同：4
> 
> 时间：2012-11-18T15:54:51.887
> 
> 标签：c#, .net, reflection, reflection.emit, il

我有一个应用程序，其中我有一个采用 PropertyInfo 参数的方法，并且想从 IL 调用此方法。例如，对于采用 MethodInfo 的类似方法，我可以创建一个采用[RuntimeMethodHandle](http://msdn.microsoft.com/en-us/library/system.runtimemethodhandle.aspx)的中间方法并使用[GetMethodFromHandle](http://msdn.microsoft.com/en-us/library/5wk6z0dh.aspx)。然后 IL 可以使用[Ldtoken](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldtoken%28v=vs.95%29.aspx)来传递句柄。

但是，似乎没有属性的等效元数据标记。我可以理解为什么会出现这种情况（因为属性实际上只是一种将方法捆绑在一起的方式，并且从不从 IL 中“调用”），但是肯定有与类型相关联的属性元数据。我可以在 Emit-time 访问这个属性元数据，所以我想要一种能够直接传递它的方法，而不必在运行时通过名称求助于 Reflection（即向 GetProperty 发出 Reflection 调用，获取一个将在运行时。）有没有办法做到这一点？

* * *

根据评论中的要求，这是应用程序：

我正在创建一个适配器类，它通过`bool this[int index]`属性将属性引用作为其组件位公开。我的应用程序将 PLC 代码编译为 .NET 程序集，因此我正在尝试创建诊断访问器，该访问器近似于 PLC 提供的简单按位访问（您在其中写入`MyTag.2`以指示 tag 的第 2 位`MyTag`。）此语法不能用于由 C# 消耗，但这`PLC.GetBits().MyTag[2]`是一个合理的近似值。

我最初的方法是使用 PropertyInfo 实现的（这就是我遇到这个问题的方式），但我当然可以通过将 PropertyInfo 中的适用元数据作为多个参数传递来解决它。我主要只是好奇是否可以直接传递 PropertyInfo，因为我以前从未遇到过这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:16:05.470

不，我不认为你可以。我之所以这么说，部分是因为熟悉该 API，部分是因为`Expression`C# 编译器中的编译器在引用 a 时仍然使用反射`PropertyInfo`，但在引用类型和方法时使用更直接的方法 ( `ldtoken`etc)（例如，getter /二传手）。我怀疑如果它存在的话，C# 编译器团队会使用它。

然而，在最常见的 IL-emit 场景中，*没有必要*传递一个`PropertyInfo`. 选项：

*   用于`MethodBase`获取 getter 或 setter（*可以*通过令牌获取方法），并通过名称推断属性（不是 100% 稳健，但通常应该可以工作）
*   改为传递名称（ldstr）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T23:39:18.420

参考[Ecma-335](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf) , Partition I, 8.10.3**属性和事件继承**

> 从根本上说，属性和事件是元数据的构造，旨在供以 CLI 为目标的工具使用，并且*不受 VES 本身的直接支持*。因此，确定名称隐藏、继承等规则是源语言编译器和反射库（参见第 IV 部分 - 内核包）的工作。源编译器*应生成直接访问*由事件和属性命名的方法的 CIL，而不是事件或属性本身。

Ecma-335，Partition I，8.11.3**属性定义**

> 属性定义始终是接口定义或类定义的一部分。属性定义的名称和值的范围是包含该属性定义的类型。CTS 要求构成该属性的方法契约应与方法实现相匹配，就像任何其他方法契约一样。没有*与 properties 相关的 CIL 指令*，只有元数据。

# android - 三星的多窗口支持 - 屏幕尺寸

> ID：13441758
> 
> 赞同：4
> 
> 时间：2012-11-18T15:56:39.667
> 
> 标签：android, size, samsung-mobile, multi-window

我目前正在开发我的应用程序以与 Galaxy Note 2 和即将推出的 Galaxy s3 引入的三星多窗口功能兼容。如果你不知道我在说什么：（ [来源：][[androidheadlines.com](http://androidheadlines.com/wp-content/uploads/2012/10/multiwindow.jpg)][）] 如果你有兴趣，这里是一个知道如何做的链接：[这里](https://www.modaco.com/news/android/developers-add-support-for-samsung-multi-window-to-your-apps-r823)[![](../Images/deebdd9bf5b66eab244e8ce6c196d20b.png)](https://i.stack.imgur.com/2tr6m.jpg)

我的问题是我需要知道我的应用程序使用的高度/宽度。我正在这样做：

```
displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
heightScreen = displaymetrics.heightPixels;
widthScreen = displaymetrics.widthPixels; 
```

但这会返回整个屏幕的大小，而不仅仅是我的应用程序使用的部分。我的活动仅由占据整个空间的 Panel 组成，但 panel.getHeight() 或 getWidth() 返回 0。

我怎样才能得到真正的高度/宽度？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T17:09:22.893

> 我的活动仅由占据整个空间的 Panel 组成，但 panel.getHeight() 或 getWidth() 返回 0。

稍后尝试检查。您可能正在检查这个`onCreate()`，这太快了 AFAIK。

# jquery - 是否可以使用 jQuery 更改 Microdata itemprop？

> ID：13441761
> 
> 赞同：1
> 
> 时间：2012-11-18T15:57:32.427
> 
> 标签：jquery, schema.org, microdata, google-rich-snippets

这是在控制台日志中显示成功但在使用 Google 结构化数据测试工具或 G+ 共享按钮测试时失败的代码。原始值保持不变。在这种情况下，“jack”永远不会更新为“jill”。

```
var newName= "jill"
$("h1").attr('itemprop','name').html(newName); 
```

这是微数据：

```
<body itemscope itemtype="http://schema.org/Blog">

<div style="display:none;"> 
<h1 itemprop="name">jack</h1>
<img itemprop="image" src="http://somehewhere.com/something.png" />
<p itemprop="description">some text</p>

</div> 
```

如您所见，只是试图将“jack”的值更改为“jill”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T10:27:34.930

The html() method cannot be used on the itemprop attribute. You need to apply it to just the h1 tag instead:

```
$("h1[itemprop=name]").html(newName); 
```

or since newName is simple text:

```
$("h1[itemprop=name]").text(newName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:09:19.147

那是因为 GoogleBot（以及所有其他人，就此而言）不执行（所有）javascript。您不会通过任何客户端脚本成功设置或更改微数据属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T09:08:30.267

更改微数据值是没有意义的，因为正如 dwtm.ts 所说，机器人不执行 javascript，并且只解析在获取页面时直接下载的源代码。您应该使用 GWT 的“fetch as googlebot”测试工具来检查搜索机器人如何“读取”您的页面。

# python - 使用 scipy 数组设置操作

> ID：13441762
> 
> 赞同：0
> 
> 时间：2012-11-18T15:57:43.453
> 
> 标签：python, numpy, scipy, set

Python 有一个非常好的“集合”数据结构，它基本上是一个支持集合操作的无序列表。我很想将这样的数据结构用于以下目的：

我有一组来自调查的数据点（每个点都是一个二元素 Scipy/numpy 数组），可以根据受访者的性别和婚姻状况分为不同的子集。

不幸的是，*Python 集合似乎不允许所谓的可变对象，例如 numpy arays 和 lists*。我可以为我的数据点使用元组，但我想知道是否有更好的方法来做到这一点。

理想情况下，我希望有几个数据点的无序列表（集合），我可以相交、联合等。 - 我可以迭代它们（包括单个数据点，以及用于绘图目的的集合列表）。

所以我的问题是：使用元组集是在这种情况下做我想做的事情的唯一方法吗？在 Python 中真的不可能有一组可变元素（例如 numpy 数组）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:15:10.277

[python-sets](http://docs.python.org/2/library/stdtypes.html#set)在 python 中必须是可[散列](http://docs.python.org/2/glossary.html#term-hashable)的。因此，您可以定义 a`class datapoint`并实现`__hash__(self)`and`__eq__(self)`作为其元素的函数，并将这些元素的实例添加到您的集合中。

或者，也许您想使用[命名元组](http://docs.python.org/2/library/collections.html#collections.namedtuple)。我没有测试过它们，但它们也实现`__hash__`了`__eq__`。它们仍然是元组，但至少可以以更易读的方式访问它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T16:12:01.117

可变对象集是一个复杂的概念。什么应该

```
a = set([]); 
a.add (object1);
a.add (object2);
object3 = object1;
object1 = object2;
object1 = object3;
print (len(a)); 
```

打印？你可以说当object1 和object2 相等时集合应该折叠起来，但这基本上是无法实现的。坚持`print(len(a))`在中间不应该改变 a--len 应该是一个纯函数--但这意味着`set`必须存储多个对象并在对它们进行操作时找出哪些是相同的。当然

```
print (len(a))
object1 = object3
print (len(a)) 
```

打印 1 2 也有点令人惊讶。在可变对象上高效地并以合理的语义实现集合非常困难，这就是 Python 没有尝试的原因。

编辑：然后尝试

```
a = set([])
a.add (mutable_array([1,2]));
a.add (mutable_array([1,3]));
for i in a:
     i[1] = 2
print (len(a)); 
```

重点是：如果你将一个可变对象粘贴到一个集合中，要么该集合最终会出现重复项，要么该集合将不得不跟踪其中的变化。

# xaml - 这个 xmlns 属性有什么作用

> ID：13441765
> 
> 赞同：0
> 
> 时间：2012-11-18T15:57:46.217
> 
> 标签：xaml, xml-namespaces

```
<Window x:Class="Template.MainWindow"
    xmlns:System="clr-namespace:System;assembly=mscorlib">
<Grid>

</Grid> 
```

xmlns:System="clr-namespace:System;assembly=mscorlib 是什么意思？

我的想法：包括来自 mscorlib 的系统？那么 clr 命名空间呢？所以我可以在 Template.MainWindow.xaml 中使用 mscorlib 中的所有功能。

感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:03:53.487

命名空间是否与 Window 标签关联

当两个不同的系统使用相同的标签名称时，命名空间用于避免冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:12:48.363

有关此内容，请参阅 Microsoft 文档：

[http://msdn.microsoft.com/en-us/library/ms747086.aspx](http://msdn.microsoft.com/en-us/library/ms747086.aspx)

请参阅两个主题：

1.  WPF 和 XAML 命名空间声明

2.  映射到自定义类和程序集

你会明白一点。

# perl - 为什么我不在 perl 中更改表中的每个值？

> ID：13441767
> 
> 赞同：-1
> 
> 时间：2012-11-18T15:58:03.750
> 
> 标签：perl, foreach

```
use strict;
use warnings;

my %table = qw/schmoe joe smith john simpson bart/; 
my $da =1;
my($key, $value); # Declare two variables at once 
while ( ($key, $value) = each(%table) ) 
{ 
    $table{$key} = ++$da;
} 

print %table; 
```

输出：

```
schmoe2smith3simpson4 
```

我期待着到达`2345...`

我怎么了`foreach`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:59:32.640

因为您只更改了值，甚至没有更改哈希的键...

如果要更改键和值，可以执行以下操作：

```
while ( ($key, $value) = each(%table) ) 
{ 
    #Remove the previous key
    delete($table{$key});
    #Insert a key and a value (the same)
    $table{++$da} = $da;
} 
```

但是我觉得没多大意义...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:06:04.167

我想你误会了什么。

值已更改，但是当您编写代码时`print %table;`，您会打印键和值。

有了`Data::Dumper`模块，就更清楚了：

```
$ Perl
Perl Console 0.4
Perl> use Data::Dumper
Perl> my %table = qw/schmoe joe smith john simpson bart/; 
6

Perl> my $da =1;
1

Perl> my($key, $value);
2

Perl> while ( ($key, $value) = each(%table) ) { $table{$key} = ++$da; }
0

Perl> print Dumper \%table
$VAR1 = {
          'schmoe' => 2,
          'smith' => 3,
          'simpson' => 4
        };
1

Perl> print %table;
schmoe2smith3simpson41 
```

如果你想遍历哈希，你可以这样做：

```
while(my($key, $value) = each %table) {
    print "$key=$value\n";
} 
```

但是散列名称令人困惑，它不是表而是*散列*。

遍历哈希的另一种解决方案：

```
foreach my $key (keys %table) {
    print "$key=$table{$key}\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:42:54.450

如果您只想更改哈希*值*，而不管键是什么（这是一个毫无意义的练习，因为键是半随机顺序的），您可以简单地执行以下操作：

```
for my $value (values %table) {
    $value = ++$da;
} 
```

或者简而言之：

```
$_ = ++$da for values %table; 
```

然后您可以打印这些值：

```
print values %table; 
```

这将有效地执行与您的循环相同的操作，因为即使两者的哈希元素的顺序`keys`和`values`是半随机的，它们也始终是半随机的，并且彼此以相同的方式。我怀疑这是你想要做的，因为正如我所说，这是一个相当没有意义的练习。

当您分配给哈希时：

```
my %table = qw/schmoe joe smith john simpson bart/; 
```

..然后奇数元素是键，偶数值，就好像你写过：

```
 #  keys         values
my %table = ( "schmoe"  => "joe,
              "smith"   => "john",
              "simpson" => "bart" ); 
```

您无法更改密钥，只能删除它们并制作新密钥。如果你这样做了，你的任务就毫无意义了。

# lightbox - 灯箱关闭按钮翻转效果

> ID：13441771
> 
> 赞同：1
> 
> 时间：2012-11-18T15:58:57.397
> 
> 标签：lightbox

好的，没有真正看到任何以前专门针对此的帮助。我想要做的是对关闭按钮产生“悬停”效果。当您将鼠标悬停在关闭按钮本身上时，我已经将它移到了哪里，当您将鼠标移出时，它会显示并消失。但是，我想要的是当您将鼠标悬停在灯箱中显示的图像上时，我希望显示关闭按钮，而当您将鼠标悬停时，我希望关闭按钮消失。

此外，使用过渡效果或来源的一些指针会很好。我仍然是一名从事作品集工作的学生。我2013年8月毕业。

感谢所有帮助=）我也在自己研究，但并非我正在阅读的所有内容都有效或有意义。我正在进入这样的地方和雅虎！额外帮助的答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T09:53:06.220

我建议你把 Lightview 配置好。

你可以在这里下载： [http ://projects.nickstakenburg.com/lightview](http://projects.nickstakenburg.com/lightview)

# javascript - 如何阻止浏览器在 javascript 中提交表单？

> ID：13441772
> 
> 赞同：-1
> 
> 时间：2012-11-18T15:58:58.573
> 
> 标签：javascript

当运行我的表单的这段代码是提交而不是结束提交时。

当计数为0时如何停止提交？

```
function btnCheck_Click() {
  var count = parseInt(61);
  myCounter = setInterval(function () {
  if (count > 0)
    count--;
    elem.html( count );
  }, 1000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:24:43.643

您可以最轻松地从提交处理程序中取消表单提交，因此使用以下内容：

```
<form onsubmit="return validateClickCount()" /> 
```

现在如果你有一个函数`validateClickCount`，提交动作将在它返回时被取消`false`。

```
function validateClickCount() {
  return false;
} 
```

有了这个，您只需要更改`btnCheck_Click`/interval-callback 以减少全局计数器，然后在`validateClickCount`.

```
var count = 61;
function btnCheck_Click() {
  myCounter = setInterval(function () {
    if (count > 0)
      count--;
      elem.html( count );
  }, 1000);
}

function validateClickCount() {
  return count > 0;
} 
```

如果您正在寻找更多信息，我建议您也查看这个问题和答案：[如何在提交按钮 onclick 事件中取消表单提交？](https://stackoverflow.com/questions/4227043/how-do-i-cancel-form-submission-in-submit-button-onclick-event)

# php - 合并 PHP 数组和 XML 对象

> ID：13441776
> 
> 赞同：-2
> 
> 时间：2012-11-18T15:59:24.713
> 
> 标签：php, xml, arrays

我有一个这样的数组，我通过 SQL 查询得到它

```
Array
(
    [0] => Array
        (
            [iId] => 1
            [sName] => Tom
        )

    [1] => Array
        (
            [iId] => 2
            [sName] => Jhon
        )
) 
```

然后通过这个数组，我正在创建 POST 请求，并返回 XML 对象

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [method] => userstats_xml
            [version] => 2.0
        )

    [userstats] => SimpleXMLElement Object
        (
            [type] => Array
                (
                    [0] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (
                                    [id] => 2
                                )

                            [test] => SimpleXMLElement Object
                                (
                                    [output] => 1280
                                )

                        )

                    [1] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (
                                    [id] => 1
                                )

                            [test] => SimpleXMLElement Object
                                (
                                    [output] => 6112
                                )

                        )
                )
        )
) 
```

现在我正在尝试获取下面列出的数组，因为我可以分别从第一个数组和 xml 对象输出数据，但我需要在一行中完成，例如

```
<a href="sId">sName - volume</a> 
```

数组形式：

```
Array
(
    [0] => Array
        (
            [iId] => 1
            [sName] => Tom
            [volume] => 6112
        )

    [1] => Array
        (
            [iId] => 2
            [sName] => Jhon
            [volume] => 1280
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:10:28.027

您必须遍历 XML 响应并构建一个以 iId 作为键和来自 xml 的卷/输出作为值的单维数组。

```
$xmlOutput = 
Array
( 
  [1] => 6112
  [2] = > 1280
) 
```

然后您可以使用上面的数组向您从 SQL 获取的数组中添加一个新元素。看下面的代码片段

```
 $sqlOutput =  
Array
    (
        [0] => Array
            (
                [iId] => 1
                [sName] => Tom
            )

        [1] => Array
            (
                [iId] => 2
                [sName] => Jhon
            )
    )
    foreach($sqlOutput as $entry)
    {
      $entry['volume'] = $xmlOutput[$entry['iId']];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:17:40.420

遍历数组并使用 ID 通过 XPath 查询 XML 以获得“输出”值

```
foreach ($peopleArray as $i => $person) {
    $xpathQuery = sprintf('//type[@id="%s"]/test/output', $person['iID']);
    $result = $xml->xpath($xpathQuery);
    if (isset($result[0])) {
        $peopleArray[$i]['volume'] = (string) $result[0];
    }
} 
```

该代码将获取数组中的每个 ID 并从中构造一个 XPath 查询。该查询在文档中查找所有输出元素，这些元素是测试元素的子元素，该元素必须是具有 SQL 数组中 ID 属性的 type 元素的子元素。如果找到结果，则将输出元素的值添加到当前迭代位置的 SQL 数组中。

请参阅[http://schlitt.info/opensource/blog/0704_xpath.html](http://schlitt.info/opensource/blog/0704_xpath.html)以获得良好的 XPath 教程。

# haskell - Haskell Leijen 漂亮的打印机，无法处理缩进

> ID：13441781
> 
> 赞同：1
> 
> 时间：2012-11-18T16:00:33.557
> 
> 标签：haskell, pretty-print

我正在为 Lua 开发一个漂亮的打印机，我一直在处理函数语法的缩进。

我想要的是：如果函数定义足够短，所有定义都可以写在一行中，但如果不是那么短，那么所有*主体*都需要在新行中打印并带有缩进。之后，`end`关键字应该放在一个新行中，没有缩进。

我想我并不完全理解 Leijen Pretty-printer 的工作原理，但这是我到目前为止所得到的：

```
import Text.PrettyPrint.Leijen
import System.IO (stdout)

sometext = text "short text" </> text "this is some long text at least long enough for my purposes"
p = parens (align (cat (punctuate (comma <> space) (map text ["first parameter", "second parameter", "third"]))))

doc3 = indent 4 (sep [text "function" </> p, indent 4 sometext, text "end"])

main :: IO ()
main = do
    displayIO stdout (renderPretty 1 133 (doc3 <$> line))
    displayIO stdout (renderPretty 1 134 (doc3 <$> line))
    displayIO stdout (renderPretty 1 40 (doc3 <$> line)) 
```

这实际上工作得很好，除了输出的第二部分：

```
function (first parameter, second parameter, third)
    short text this is some long text at least long enough for my purposes
end

function (first parameter, second parameter, third)     short text this is some long text at least long enough for my purposes end

function (first parameter, 
          second parameter, 
          third)
    short text
    this is some long text at least long enough for my purposes
end 
```

在这里，我不希望在第二个输出中出现 4 个空格缩进。但是我找不到在不破坏其他输出的情况下做到这一点的方法。

任何帮助将不胜感激。

编辑：这是另一个测试用例：

```
doc4 = sep [ text "if" </> text "test" </> text "then"
           , indent 4 then_body
           , text "elseif" </> elseif_conditions </> text "then"
           , indent 4 elseif_body
           , text "end"
           ] 
```

我想要的是，如果输出足够短，则在同一行打印所有内容（但没有缩进空格）。它在拆分多行时效果很好，但在打印到同一行时会留下多余的空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:55:30.800

首先，让我们尝试一种从最大值开始的每个宽度的文档，并且只打印不同的文档。这将有助于检查 Doc 的行为是否如您所愿。

```
import Text.PrettyPrint.Leijen
import System.IO (stdout)
import Data.List
import Data.Function

testFrom :: Int -> Doc -> IO ()
testFrom w d = mapM_ printone . nubBy ((==) `on` snd) .map (`showAt` d). reverse $ [1..w] where
   showAt n doc = (n,displayS (renderPretty 1 n doc) "")
   printone (n,xs) = putStrLn (show n ++ ":") >> putStrLn xs 
```

## 我（现在）认为你想要什么

现在让我们利用您评论中的额外信息。对不起，我第一次误解了你。

我认为您的意思是允许所有人都在一行上，但如果不是，则应该至少有三个，函数头在第一行，函数体缩进，结尾不缩进。您不介意`sometext`在断点处是否跨行拆分，在参数等之后，只要它不是内联的，缩进 4 即可。

该`nest`函数允许我们缩进后续行（如果有的话），而`indent`绝对放置空格，这就是为什么你有丑陋的额外 4 行。

因此，您的功能分为三个部分：

```
functionhead = text "function" </> p
sometext = text "short text" 
           </> text "this is some long text at least long enough for my purposes"
end = text "end" 
```

使用稍微重构的参数制作方式：

```
params = parens.align.cat.punctuate (comma <> space).map text 
p = params ["first parameter", "second parameter", "third"] 
```

## 用指定的休息时间布置它

如果我们需要换行符，让我们指定我们希望它们如何布局：

```
tidyfunction = nest 4 (functionhead <$> sometext) <$> end 
```

这展示了我们希望换行符的方式：

```
*Main> testFrom 140 tidy
140:
function (first parameter, second parameter, third)
    short text this is some long text at least long enough for my purposes
end
73:
function (first parameter, second parameter, third)
    short text
    this is some long text at least long enough for my purposes
end
50:
function (first parameter, 
          second parameter, 
          third)
    short text
    this is some long text at least long enough for my purposes
end
26:
function
    (first parameter, 
     second parameter, 
     third)
    short text
    this is some long text at least long enough for my purposes
end 
```

## 如果合适，将其全部放在一行上

漂亮的打印库有一个组合器，如果它适合一行，则可以消除所有换行符，`group`. 让我们将全部缩进 4 并分组。

```
nicefunction = group $ indent 4 tidyfunction 
```

这使：

```
*Main> testFrom 140 nicefunction
140:
    function (first parameter, second parameter, third) short text this is some long text at least long enough for my purposes end
129:
    function (first parameter, second parameter, third)
        short text this is some long text at least long enough for my purposes
    end
77:
    function (first parameter, second parameter, third)
        short text
        this is some long text at least long enough for my purposes
    end
54:
    function (first parameter, 
              second parameter, 
              third)
        short text
        this is some long text at least long enough for my purposes
    end
30:
    function
        (first parameter, 
         second parameter, 
         third)
        short text
        this is some long text at least long enough for my purposes
    end 
```

# python - 为多个测试用例设置公共上下文的正确方法是什么？

> ID：13441786
> 
> 赞同：0
> 
> 时间：2012-11-18T16:01:31.163
> 
> 标签：python, unit-testing, testcase, test-suite

我`unittest`用来测试我的终端交互实用程序。我有 2 个上下文非常相似的测试用例：一个测试正确输出，另一个测试交互模式下用户命令的正确处理。虽然，这两种情况都模拟`sys.stdout`以抑制实际输出（输出也在交互工作过程中执行）。

考虑以下：

```
class StdoutOutputTestCase(unittest.TestCase):
    """Tests whether the stuff is printed correctly."""

    def setUp(self):
        self.patcher_stdout = mock.patch('sys.stdout', StringIO())
        self.patcher_stdout.start()

    # Do testing

    def tearDown(self):
        self.patcher_stdout.stop()

class UserInteractionTestCase(unittest.TestCase):
    """Tests whether user input is handled correctly."""

    def setUp(self):
        self.patcher_stdout = mock.patch('sys.stdout', StringIO())
        self.patcher_stdout.start()

    # Do testing

    def tearDown(self):
        self.patcher_stdout.stop() 
```

我不喜欢的是上下文设置在这里重复了两次（现在；随着时间的推移可能会更多）。

有没有为这两种情况设置共同上下文的好方法？可以`unittest.TestSuite`帮助我吗？如果是，如何？我找不到任何常见上下文设置的示例。

我也考虑过定义一个 function `setup_common_context`，这两种情况都会被调用`setUp`，但它仍然是重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:22:23.453

我已经在我的项目中解决了这个问题，只需将通用设置代码放在基类中，然后将测试用例放在派生类中。我的派生类 setUp 和 tearDown 方法只是调用超类实现，并且只对那些测试用例进行（反）初始化。另外，请记住，您可以在每个测试用例中放置多个测试，如果所有设置都相同，这可能是有意义的。

```
class MyBaseTestCase(unittest.TestCase):
    def setUp(self):
        self.patcher_stdout = mock.patch('sys.stdout', StringIO())
        self.patcher_stdout.start()

    # Do **nothing**

    def tearDown(self):
        self.patcher_stdout.stop()

class StdoutOutputTestCase(MyBaseTestCase):
    """Tests whether the stuff is printed correctly."""

    def setUp(self):
        super(StdoutOutputTestCase, self).setUp()

        # StdoutOutputTestCase specific set up code

    # Do testing

    def tearDown(self):
        super(StdoutOutputTestCase, self).tearDown()

        # StdoutOutputTestCase specific tear down code

class UserInteractionTestCase(MyBaseTestCase):
     # Same pattern as StdoutOutputTestCase 
```

# c# - 如何从asp.net C#将阿拉伯语插入mysql

> ID：13441787
> 
> 赞同：2
> 
> 时间：2012-11-18T16:01:38.463
> 
> 标签：c#, asp.net, mysql, arabic

我想将阿拉伯语内容从 asp.net 页面插入到 mysql5.5，我正在使用 mysqlconnector5.2.7 与本地 mysqlserver 连接。当我尝试从 asp.net 程序插入阿拉伯语时，空值被插入到数据库中，尽管当我尝试从命令提示符插入时，所有单词都显示为???，我在谷歌上搜索了更多，但我找不到任何解决方案。请参阅下面的代码。我更改了数据库、表格和阿拉伯语列在命令提示符下使用alter查询到utf8，但我仍然找不到任何解决方案，如何在datagridview上显示这个阿拉伯语

```
myconnection.Open();
string insert="insert into home_table(image,content,arabiccontent) values(@image,@content,arabiccontent)";
MySqlCommand cmd = new MySqlCommand(insert,myconnection);
MySqlParameter param = new MySqlParameter("@image", MySqlDbType.VarBinary, image.Length);
param.Value = image;
cmd.Parameters.Add(param);

cmd.Parameters.Add(new MySqlParameter("@content",MySqlDbType.VarChar,Content.Length));

cmd.Parameters["@content"].Value = Content;
cmd.Parameters.Add(new MySqlParameter("@arabiccontent", MySqlDbType.VarChar, contentarabic.Length));
cmd.Parameters["@arabiccontent"].Value = contentarabic.Trim();
cmd.ExecuteNonQuery();
myconnection.Close(); 
```

网络配置

```
 <add name="mysqlconnectionstring" connectionString="Data Source=localhost;Database=mydatabase_;Uid=root;Pwd=root;CharSet=cp1256;"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T16:58:38.940

使用此连接字符串

```
Datasource=localhost; Database=testdb; Uid=root; Pwd=123;CHARSET=utf8 
```

并确保它`CHARSET`不是 CharSet 或 charset！还尝试更改`DEFAULT CHARACTER SET`您的表格和字段：

```
ALTER TABLE `myTbl` DEFAULT CHARACTER SET utf8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T12:49:16.023

我遇到了同样的问题。

我在我的 webconfig 中简单地添加了 CHARSET=utf8 并解决了问题

```
<connectionStrings>
    <add name="ConnectionString" connectionString="Server=192.168.1.4;Database=downtodate;Uid=root;CHARSET=utf8"/>
  </connectionStrings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T16:11:45.687

最好的方法是将文本转换为 base 64 字符，然后将其存储到数据库中。在从数据库中获取它时，使用反之亦然的转换。

```
 byte[] byt = System.Text.Encoding.UTF8.GetBytes(strOriginal);
// convert the byte array to a Base64 string
strModified = Convert.ToBase64String(byt); 
```

并由此恢复正常字符串

```
 byte[] b = Convert.FromBase64String(strModified);
strOriginal = System.Text.Encoding.UTF8.GetString(b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T16:22:48.350

听起来你有编码问题。确保您全面使用 UTF8 编码。对于 MySQL，这意味着确保表是 UTF8，而不是 latin1 或其他编码。还要确保您与 MySQL 的连接是 UTF8。我不知道如何在 ASP/C# 中做到这一点，但通常你可以在连接后运行“查询”SET NAMES UTF8，它会让事情变得直截了当。

您也可以在命令行/提示符上执行该查询，这将停止显示???。请注意，它不会转换数据库中已错误存储的数据，因此现有数据可能会或可能不会正确显示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-29T15:01:41.177

**如何从 vb.net 将阿拉伯语插入 mysql。**

```
  确保集合和字符集具有 utf8 和 utf8_unicode 

```

```
  在 unicode 文本前添加“N”

```

```
 strconn = "server=servername;port=3306;database=database;uid=user;pwd=pass;Character Set=utf8;"
    strsql = "UPDATE table SET ItemNameArabic= N'ArabicName' "

    Dim conn As MySqlConnection = New MySqlConnection(strconn)
    Dim cmd As MySqlCommand = New MySqlCommand()
    cmd.CommandText = strsql
    cmd.Connection = conn
    conn.Open()
    Try
        Dim aff As Integer = cmd.ExecuteNonQuery()
        MessageBox.Show(aff & " rows were affected.")
    Catch
        MessageBox.Show("Error encountered during INSERT operation.")
    Finally
        conn.Close()
    End Try 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-14T19:57:11.443

问题是，是的，您的数据库字符集是 utf8，但您的应用程序不知道它。它认为您的字符集为 cp1256。

```
 <add name="mysqlconnectionstring" connectionString="Data Source=localhost;Database=mydatabase_;Uid=root;Pwd=root;CharSet=cp1256;"/> 
```

你应该声明它。有一些解决方案，但最简单的解决方案是添加您的连接字符串 charset=utf8;

用它来解决问题

```
 <add name="mysqlconnectionstring" connectionString="Data Source=localhost;Database=mydatabase_;Uid=root;Pwd=root;CHARSET=utf8;"/> 
```

# python - 在 Python 中进化的人工智能

> ID：13441788
> 
> 赞同：6
> 
> 时间：2012-11-18T16:01:44.240
> 
> 标签：python, artificial-intelligence, neural-network

所以我一直在考虑在 Python 中创建一个类似的[程序](http://youtu.be/1iamM0SuPto)。问题是我对人工智能几乎一无所知。现在我正在阅读遗传算法和神经网络等，但有很多东西要吸收。

我现在最大的问题是我不知道整个事情是如何组合在一起的。因此，如果有人能告诉我这样的程序的一般框架，我将非常感激。例如，这些生物如何“看到”周围环境中的事物、它们拥有的“染色体”类型以及环境是如何创造的。

此外，任何人都可以为 AI、任何引擎等推荐合适的库吗？我一直在考虑使用神经实验室，这是个好主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-19T10:50:59.033

有趣的是，我已经用 Python 创建了您所描述的内容。

这是一张照片：

![在此处输入图像描述](../Images/7982b6f82d17a5cee45f6c3e961e8f03.png)

绿点是食物，红点是需要进化和学习如何吃食物块的生物。

最好的灵感和指导来源绝对是 Polyworld：[youtube.com/watch](http://www.youtube.com/watch?v=_m97_kL4ox0) ?v=_m97_kL4ox0 。

另一个帮助我了解反向传播的好例子，我建议你也应该学习，在这里：[arctrix.com/nas/python/bpnn.py](http://arctrix.com/nas/python/bpnn.py)。

虽然这个问题太模糊而无法正确回答，但一般提示是，您首先要对 ANN 的功能有一个坚实的基础，然后用这个通用算法构建一个程序：

*   检查用户输入（相机应该移动吗？程序应该退出吗？）
*   对于每个生物体：
    1.  检查它是否还活着等。
    2.  接受来自世界的输入
    3.  评估其神经网络
    4.  将结果应用于身体
    5.  应用正面或负面反馈（如您所见，这一切都归结为这一点）
*   更新世界（你可以使用物理引擎）
*   可选地，绘制世界

例如，您的输入神经元可能与物理或视觉刺激相对应。有什么东西在我面前吗？然后将神经元 X 设置为 1，否则设置为 0。

你的输出神经元可以映射成力。神经元 Y 是否活跃？如果是这样，请在这个世界周期中对这个有机体施加一个冲动。

我还建议您不要将其他人的库用于您的神经网络计算，因为这是实际学习如何自己实现它们的好方法。不过，您可以使用[Pygame](http://www.pygame.org/news.html)进行渲染，[使用 PyBox2D](http://code.google.com/p/pybox2d/)进行物理。

现在，关于“看到”其他生物……这些问题最好在孤立时解决。你需要一个好的软件设计，它能让你把整个问题分成许多子问题，这些子问题更容易解决。

一般来说，可以通过光线投射来完成视觉。创建一个有方向的归一化向量（其中长度为 1 个单位，即`sqrt(x*x + y*y) == 1`），然后对其进行缩放（`x *= factor; y *= factor;`）。这样，你会得到一条向外延伸的线。在你缩放它之前，你可以遍历世界上所有的生物（你必须优化它），并检查向量是否在它们里面。如果是，计算它的长度，你的有机体就会有一些关于它周围环境的信息。

有很多更简单的方法。例如，将每个有机体周围的空间划分为四个象限，其中四个代表眼睛（X - 有机体的上、右、下、左）。然后计算从有机体到其他每个有机体的长度（优化！）。找到最近的生物。找出它在哪个象限。瞧，一只活跃的眼睛！

我希望我对您有所帮助，但是您必须更加精确，并在遇到*实际问题*时回来。阅读[常见问题解答](https://stackoverflow.com/faq)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T16:06:21.677

[http://scikit-learn.org/](http://scikit-learn.org/)是一个很好的资源（和框架），可以让您了解 Python 中的机器学习。

如果你想构建一个神经网络，[http](http://pybrain.org/) ://pybrain.org/是一个很好的框架。

# jquery-ui - jQuery 手风琴错误

> ID：13441790
> 
> 赞同：1
> 
> 时间：2012-11-18T16:02:11.730
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

在页面加载手风琴应该折叠......但是在页面加载时它被扩展了，我不知道如何修复这个错误？

```
$(document).ready(function()
{
    //Add Inactive Class To All Accordion Headers
    $('.accordion-header').toggleClass('inactive-header');

    //Set The Accordion Content Width
    var contentwidth = $('.accordion-header').width();
    $('.accordion-content').css({'width' : contentwidth });

    //Open The First Accordion Section When Page Loads
    $('.accordion-header').first().toggleClass('active-header').toggleClass('inactive-header');
    $('.accordion-content').first().slideDown().toggleClass('open-content');

    // The Accordion Effect
    $('.accordion-header').click(function () {
        if($(this).is('.inactive-header')) {
            $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        }

        else {
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        }
    });

    return false;
});​ 
```

### 这是我的代码的[jsFiddle 示例](http://jsfiddle.net/YsY7n/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:14:41.743

从您的示例中删除以下代码部分，它将按您期望的方式工作：

```
//Open The First Accordion Section When Page Loads
$('.accordion-header').first().toggleClass('active-header').toggleClass('inactive-header');
$('.accordion-content').first().slideDown().toggleClass('open-content'); 
```

### [jsFiddle 工作示例](http://jsfiddle.net/Uf7Nj/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-18T16:08:51.277

对我来说，只是将 display: none 添加到手风琴内容 div 似乎可以解决问题：

```
$('.accordion-content').css({'width' : contentwidth }).css('display':'none'); 
```

这是它的实际演示：http: [//jsfiddle.net/YsY7n/1/](http://jsfiddle.net/YsY7n/1/)

# twitter-bootstrap - 更改按钮的 css 颜色属性

> ID：13441792
> 
> 赞同：0
> 
> 时间：2012-11-18T16:02:12.737
> 
> 标签：twitter-bootstrap

如何更改引导框架中按钮的 css 颜色属性？例如，我的一个按钮...

```
<button type="button" id="button1" class="btn btn-primary btn-large" onclick="checkAnswer(0)">Some text</button> 
```

一些 jQuery...

```
$(document).ready(function(){
  // Wrong answer! The selected button turns red.
  $("#button1").click(function(){
      $("btn-primary").css("background-color", "red");
  });
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:48:54.040

如果评论没有任何意义:)，这里是代码

```
<button type="button" id="button1" class="btn btn-primary btn-large" onclick="checkAnswer(0)">Some text</button>

<script type="text/javascript">
$("#button1").click(function() {
    $(this).css('background-image','none')
    .css('background-color','#FF0000') //red
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T15:34:32.757

如果您不想更改样式表，则可以通过更改类来使用不同的引导选项，红色：

```
class="btn btn-danger btn-large" 
```

或蓝色：

```
class="btn btn-primary btn-large" 
```

[http://getbootstrap.com/css/#buttons-options](http://getbootstrap.com/css/#buttons-options)

# c++ - 动态数组类，程序运行良好但出现错误

> ID：13441796
> 
> 赞同：3
> 
> 时间：2012-11-18T16:02:37.657
> 
> 标签：c++

这是我的代码

```
#ifndef INTLIST_H_INCLUDED
#define INTLIST_H_INCLUDED
#include <iostream>
using namespace std;

class intList
{
    int upper_bound;
    int arr[0];
    public:
        intList(){ arr[0] = 0; upper_bound = 0; }
        void append(int x);
        void sort();
        friend ostream & operator << (ostream &, intList&);
        inline int len(){ return upper_bound; }
        inline int &operator [](int x){ return arr[x]; }
    private:
        void increment(int *a, int &l);
        void swap(int &a, int &b);
};

void intList::swap(int &a, int &b)
{
    int temp = a;
    a = b;
    b = temp;
}

void intList::increment(int *a, int &b)
{
    b++;
    a[b] = 0;
}

void intList::append(int num)
{
    arr[upper_bound] = num;
    increment(arr, upper_bound);
}

void intList::sort()
{
    for(int i = 0; i < upper_bound; i++)
    {
        int minLoc = i;
        for(int j = i+1; j<upper_bound; j++)
        {
            if(arr[j] < arr[minLoc])
                minLoc = j;
        }
        if(minLoc != i)
            swap(arr[i], arr[minLoc]);
    }
}

ostream& operator << (ostream & dout, intList &a)
{
    dout << "[ ";
    for(int i = 0; i<a.upper_bound-1; i++)
        dout << a.arr[i] << ", ";
    dout << a.arr[a.upper_bound-1] << " ]";

    return dout;
}

#endif // INTLIST_H_INCLUDED 
```

《守则》完美地完成了它的工作。但最后程序崩溃了。给出一些错误，如进程返回 -1073741819 (0xC0000005) 执行时间：几秒钟。

只是没有得到我哪里错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:04:14.517

这看起来很糟糕：

```
int arr[0]; 
```

首先，C++ 不允许零大小的固定大小数组。其次，您的代码当然需要的不仅仅是一个零大小的数组。

无论您如何使用此代码，都是未定义行为 (UB)。UB 包含看似“运行良好”的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:50:09.457

您的代码有几个问题。

例如，您有一个大小为 0 的固定数组。如果您想要一个**动态可**增长的数组，您可以使用`std::vector`：您可以使用以下方法在向量的末尾添加新项目（动态调整其大小）`push_back()`：

```
#include <vector>

// Start with an empty vector
std::vector<int> v;

// Add some items to it
v.push_back(10);
v.push_back(20);
.... 
```

另请注意，在头文件中插入`using namespace std;`. 通过这种方式，您会使用 STL 类污染全局命名空间，这很糟糕。只需**在头文件中****使用`std::`**前缀。

此外，如果要将类内容打印到输出流，则可能需要将类作为**const 引用**，因为类的实例是输入参数（您*观察*它们并将它们的内容打印到流中）：

```
std::ostream& operator<<(std::ostream& os, const IntList& a)
{
   ....
} 
```

# c - C 函数定义参数列表中何时何地允许使用句点？

> ID：13441798
> 
> 赞同：2
> 
> 时间：2012-11-18T16:02:42.977
> 
> 标签：c, visual-c++, standards, syntax-error

在[PGP 6.5.8 源代码](https://github.com/ysangkok/pgp-win32-6.5.8/blob/master/libs/pfl/common/pgpMemoryMgrStd.c#L83)中，我看到一个函数定义如下：

```
static void
sUnlockMemory(
void *  mem,
PGPSize numBytes.
PGPBoolean  nonPageable )
{
/* we always call VirtualLock() so always call VirtualUnlock() */
(void)wasLocked;

VirtualUnlock ( mem, numBytes );
} 
```

注意第 4 行末尾的句点。它有什么作用？我可以用逗号代替它吗？该文件标记为 1999 年 8 月最后一次修改。生成说明参考 Visual C++ 6。

我把它原封不动放在 Github 上，但也可以在这里下载：[http ://www.pgpi.org/products/pgp/versions/freeware/win32/6.5.8/](http://www.pgpi.org/products/pgp/versions/freeware/win32/6.5.8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:28:48.093

在 C 语言中，函数原型中唯一可以有句点的情况是函数接受可变数量的参数时，并且始终使用三个点作为最后一个参数声明。括号之间的任何其他使用点都是语法错误。

例如：

无效 fn(int arg1, ...);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:46:54.553

这绝对是语法错误。

该代码仅在`PGP_WIN32`定义时才启用，尽管我怀疑这是否相关；我敢肯定不会发布在 Windows 上无法编译的代码。

PGP 软件现在归赛门铁克所有，这使得源代码[仅供同行评审使用](http://www.symantec.com/connect/downloads/symantec-pgp-desktop-peer-review-source-code)。我想知道他们是否故意引入了琐碎的语法错误，以使源代码难以使用，同时使其易于查看。（但许可协议似乎允许您编译代码。）

# spss - 移动平均线变量列表

> ID：13441811
> 
> 赞同：2
> 
> 时间：2012-11-18T16:04:26.480
> 
> 标签：spss, moving-average

我正在尝试使用 SPSS 20 为大约 1200 个股票代码计算跨越 30 天的移动平均线（之前的移动平均线）。我想使用如下循环：

1.  计算 AAAA 或 0001 等股票代码的 30 天移动平均线，并将其保存为 MA30AAAA 或 MA300001。
2.  取另一个股票代码，比如 AAAB 或 0002，然后按照上面的方法进行操作。
3.  继续，直到所有代码都被捕获并计算 MA，保存到新列。

你认为我可以为此开发一个 SPSS 语法。

如果我尝试以下操作，我会收到错误警告。请你能帮我获得一个结构合理的语法来完成我的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:33:41.403

今天在 LinkedIn 上有一个非常相似的问题（请参阅[此处](http://www.linkedin.com/groupItem?view=&gid=1879554&type=member&item=187115998&qid=ffb5f079-0c0c-4ec5-8516-aafec9ae5feb&trk=group_most_popular-0-b-ttl&goback=.anb_1879554_%2a2_%2a1_%2a1_%2a1_%2a1_%2a1.gmp_1879554)或下面的答案）。

- 假设每个日期在您的数据中只出现一次，下面的语法将计算每个日期 + 前 29 个日期的移动年度总数和平均值。

- 如果在某个日期之前少于 29 天，则不会针对该日期计算这些新变量。（恕我直言，这将是误导性信息。）

- 2 个新变量将分别出现在一个列中，但如果需要，您可以将每个值添加到自己的列中，但还可以添加几行。

亲切的问候，

鲁本

```
*Generate test data. 
set seed 1\. 
input program. 
loop #=1 to 60\. 
if #=1 date=date.dmy(21,11,2012). 
if #>1 date=datesum(lag(date),1,"days"). 
end case. 
end loop. 
end file. 
end inp pro. 
if $casenum=1 price=100\. 
if $casenum ne 1 price=lag(price)+tru(rv.nor(0,5)). 
for date(edate10). 
exe. 

*Compute moving total + average. 
comp moving_total_30=price. 
do rep dif=1 to 29\. 
comp moving_total_30=moving_total_30+lag(price,dif). 
end rep. 
comp moving_average_30=moving_total_30/30\. 
exe. 
```

# ffmpeg - VLC：“avcodec 错误：延迟视频超过 5 秒”

> ID：13441814
> 
> 赞同：4
> 
> 时间：2012-11-18T16:04:38.643
> 
> 标签：ffmpeg, vlc, libavformat, pts

我正在将 mpeg4 视频混合到 avi 容器。视频流约为 4fps，所以我设置`AVCodecContext` `time_base`为 1/4 ( `formatContext->streams[0]->codec->time_base`...) ，然后重新调整每个帧的时间戳，因为原始时间戳以毫秒为单位。我分配给数据包的结果值`pts`和`dts`.

当我用 VLC 播放这个 avi 时，视频不流畅，并且我反复收到以下消息：

> avcodec 错误：超过 5 秒的延迟视频 -> 丢帧（电脑太慢？）

上面的pts/dts计算有问题吗？

下表演示了如何重新缩放时间戳（原始->重新缩放）

```
stream: 0 1329471005111->1
stream: 0 1329471005348->2
stream: 0 1329471005588->3
stream: 0 1329471005828->4
stream: 0 1329471006068->5
stream: 0 1329471006308->6
stream: 0 1329471006551->7
stream: 0 1329471006788->8
stream: 0 1329471007028->9
stream: 0 1329471007268->10
stream: 0 1329471007508->11
stream: 0 1329471007748->12
stream: 0 1329471007988->13
stream: 0 1329471008228->14
stream: 0 1329471008468->15 
```

# eclipse - Windows 8 和 Eclipse ADT 插件

> ID：13441815
> 
> 赞同：1
> 
> 时间：2012-11-18T16:04:41.207
> 
> 标签：eclipse, plugins, windows-8, adt

如果我尝试使用帮助部分的 Eclipse 功能安装新插件（ADT 插件），它不会从“计算需求和依赖项。标题和链接都正确，因为我已经尝试过 7.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:41:56.640

尝试以管理员身份运行 Eclipse。

# php - 为什么我在这个 php 代码中收到一个未初始化的字符串偏移量？

> ID：13441816
> 
> 赞同：0
> 
> 时间：2012-11-18T16:04:46.223
> 
> 标签：php, string, offset, initialization

我为我的课程作业编写了一个函数，它将接收一个字符串、一个起始数字和一个长度。该函数将获取字符串并输出通过获取所有字母（包括和之后）创建的字符串`string{n}`

例如：

```
string = kingsbridge, n = 4, l = 4.
string created = gsbr. 
```

该函数的前两个验证部分工作正常，但是当实际创建要输出的子字符串时，会发生以下情况：

```
Notice: Uninitialized string offset: 11 in G:\xampp\htdocs\say\ws21C.php on line 58
Notice: Uninitialized string offset: 12 in G:\xampp\htdocs\say\ws21C.php on line 58
Notice: Uninitialized string offset: 13 in G:\xampp\htdocs\say\ws21C.php on line 58    
Notice: Uninitialized string offset: 14 in G:\xampp\htdocs\say\ws21C.php on line 58 
```

...等等等等（无限循环）

这是我的代码：

```
function substring($s, $n, $l){
    $substring = "";

    if($n > length($s)){     //If asking for substring that starts with an index of the string that's greater than the actual length
        echo "Out of range";
    }
    else{
        if($l > (length($s) - ($n - 1))) { //If start is in index of string but length would mean substring would trail off string
            $newLength = ((length($s)) - ($n - 1));
            substring($s, $n, $newLength);
        }
        else{ //PROBLEM CODE
            for($letter = ($n - 1); $l; $letter++){
                $substring .= $s{$letter};  //Line 58
            }
            echo "$substring";
        }
    }
} 
```

任何有关为什么会发生这种情况（或为什么会创建无限循环）的帮助将不胜感激！

谢谢 ：）

编辑：我知道在示例中我给出的字符串 {4} 将是 s，但用户输入了数字，所以我将减去 1 以获得他们需要的字母

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:08:42.717

你的`for`循环是一团糟，纯粹而简单。好好看看（先清除死循环问题）：

```
 for($letter = ($n - 1); $l; $letter++){
            $substring .= $s{$letter};  //Line 58
        } 
```

因此，您将 $letter 设置为 $n-1，并且我假设您想要遍历所有字母。然后，您的循环条件是“if $l”。你在 for 循环中根本没有改变 $l 的值*，*那么你怎么能指望程序跳出来呢？

如果你想遍历所有的字母，就目前而言，你最好做`$letter = $n-1; $letter >= 0; $letter--`.

最后，我需要`$s`能够调试其他问题的内容。编辑您的问题！

# python - 当我尝试在命令行中运行 vim 时出现 Python 错误

> ID：13441820
> 
> 赞同：9
> 
> 时间：2012-11-18T16:05:15.980
> 
> 标签：python, vim, terminal

当我尝试在终端中运行 vim 时（以便[在我的另一个问题中遵循@romainl 的建议](https://stackoverflow.com/a/13438459/1622940)），我得到了很多 Python 错误，这些错误都归结为：

```
IOError: invalid Python installation: unable to open /usr/include/python2.7/pyconfig.h (No such file or directory) 
```

为什么是这样？我什至可以使用 Python 或 Sublime Text，没有任何问题。

完整的错误列表如下：

```
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 565, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 547, in main
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 278, in addusersitepackages
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 253, in getusersitepackages
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 243, in getuserbase
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py", line 523, in get_config_var
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py", line 419, in get_config_vars
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py", line 298, in _init_posix
IOError: invalid Python installation: unable to open /usr/include/python2.7/pyconfig.h (No such file or directory) 
```

**额外信息：**
我使用的是 Mac OS X Mountain Lion (OS 10.8)

**编辑：**
我尝试了@BobDunakey 的想法但没有成功，这个想法是使用`sudo`. 我仍然得到同样的错误。

**编辑 2：**
由于 Zirak 的解决方案，我能够解决问题，如下所示：[http ://clearfix.be/2012/08/05/fix-mountain-lion-10-8-python-ioerror-pyconfig- h-错误/](http://clearfix.be/2012/08/05/fix-mountain-lion-10-8-python-ioerror-pyconfig-h-error/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T23:21:07.357

[在我的开发机器上安装spf13-vim](https://github.com/spf13/spf13-vim)时出现了确切的 IOError ......

这解决了问题：

```
$ sudo mkdir -p /usr/include/python2.7
$ sudo ln -s /System/Library/Frameworks/Python.framework/Versions/Current/include/python2.7/pyconfig.h /usr/include/python2.7/pyconfig.h 
```

取自[这里](https://gist.github.com/3186381)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:26:24.330

编辑：

找到安装它的软件包：

```
dpkg -S /usr/include/python2.7/pyconfig.h 
```

然后重新安装软件包：

```
apt-get install --reinstall <package name> 
```

如果这不起作用下载包@：

[http://packages.ubuntu.com/oneiric/amd64/python2.7-minimal/download](http://packages.ubuntu.com/oneiric/amd64/python2.7-minimal/download)

并手动安装它们：

```
$ sudo dpkg -i python2.7-minimal_2.7.2-5ubuntu1_amd64.deb 
```

第二次编辑：

这里的另一个用户也有同样的问题：

[ViM-LaTeX、python 和 Mac OS 10.8.1 和一个奇怪的错误](https://stackoverflow.com/questions/12152113/vim-latex-python-and-mac-os-10-8-1-and-a-weird-error)

似乎修复它购买安装 Xcode 和命令行工具。

值得一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T16:52:10.890

您可能正在使用默认的 Vim ( `/usr/bin/vim`)。您应该改用 MacVim 的 CLI 可执行文件：`$ /path/to/MacVim.app/Contents/MacOS/vim`.

MacVim 带有一个`mvim`脚本。把它放在你的某个地方，`$PATH`然后简单地做`$ mvim -v`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T06:34:42.487

试图运行'kodi'（xbmc）#output：/usr/include/python2.7/pyconfig.h（没有这样的文件或目录）

$ ls `which python`-l # -rwxrwxr-x 1 某人 1 某人 1 2993744 12 月 2 日 11:40 /home/someone1/bin/python

$ mv /home/someone1/bin/python /home/someone1/bin/python1

$ which python #output: /usr/bin/python

# 现在它起作用了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T16:57:21.173

由于 Zirak 的解决方案，我能够解决问题，如下所示：[http ://clearfix.be/2012/08/05/fix-mountain-lion-10-8-python-ioerror-pyconfig-h-error /](http://clearfix.be/2012/08/05/fix-mountain-lion-10-8-python-ioerror-pyconfig-h-error/)

很抱歉大家接受了这个问题，但是由于您的解决方案都没有为我解决这个问题，而且 Zirak 是一个评论，所以我决定自己回答这个问题。:)

# c++ - C++ 头文件 - 包含什么

> ID：13441822
> 
> 赞同：17
> 
> 时间：2012-11-18T16:05:29.887
> 
> 标签：c++, compilation, header-files

我用 C++ 编写了一个非常简单的类，即它是来自[http://www.cplusplus.com/doc/tutorial/classes/](http://www.cplusplus.com/doc/tutorial/classes/)的 Rectangle 类。特别是这里的头文件（Rectangle.h）的内容：

```
#ifndef RECTANGLE_H
#define RECTANGLE_H

class Rectangle {

private:
    double m_x;
    double m_y;

public:
    Rectangle();
    Rectangle(double, double);
    void setXY(double, double);
    double getArea();
};

#endif 
```

这是实现（Rectangle.cpp）：

```
#include "Rectangle.h"

Rectangle::Rectangle() {
    setXY(1, 1);
}

Rectangle::Rectangle(double x, double y) {
    setXY(x, y);
}

void Rectangle::setXY(double x, double y) {
    m_x = x;
    m_y = y;
}

double Rectangle::getArea(void) {
    return m_x * m_y;
} 
```

现在，我应该在我的主类中包含 Rectangle 的 Header，即：

```
#include <stdlib.h>
#include <iostream>
#include "Rectangle.h"

using namespace std;

int main(void) {
    Rectangle a;
    cout << "Area : " << a.getArea() << "\n";
    return EXIT_SUCCESS;
} 
```

但是，然后我得到错误：

```
make all 
g++ -O2 -g -Wall -fmessage-length=0   -c -o Chung1.o Chung1.cpp
g++ -o Chung1 Chung1.o 
Chung1.o: In function `main':
/home/chung/eclipse_ws/Chung1/Chung1.cpp:8: undefined reference to `Rectangle::Rectangle()'
/home/chung/eclipse_ws/Chung1/Chung1.cpp:9: undefined reference to `Rectangle::getArea()'
collect2: ld returned 1 exit status
make: *** [Chung1] Error 1 
```

如果我包含文件 Rectangle.cpp，则错误得到解决。（我在 Eclipse 上运行）

毕竟我应该包含 CPP 文件吗？

这是我的Makefile：

```
CXXFLAGS =  -O2 -g -Wall -fmessage-length=0    
OBJS =      Chung1.o    
LIBS =    
TARGET =    Chung1    
$(TARGET):  $(OBJS)
    $(CXX) -o $(TARGET) $(OBJS) $(LIBS)    
all:    $(TARGET)    
clean:
    rm -f $(OBJS) $(TARGET)    
run:    $(TARGET)   
        ./$(TARGET) 
```

如何修改它以编译 Rectangle 类？

**解决方案：**根据用户v154c1的回答，需要编译单独的cpp文件，然后将它们的头文件包含在主文件或需要此功能的任何其他文件中。这是执行此操作的任何示例 Makefile：

```
CXXFLAGS =      -O2 -g -Wall -fmessage-length=0
#List of dependencies...
OBJS =          Rectangle.o Chung1.o
LIBS =
TARGET =        Chung1
$(TARGET):      $(OBJS)
        $(CXX) -o $(TARGET) $(OBJS) $(LIBS)
all:    $(TARGET)
clean:
        rm -f $(OBJS) $(TARGET)
run:    $(TARGET)
        ./$(TARGET) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T16:10:04.110

您没有编译和链接 Rectangle 类。

您的编译应如下所示：

```
g++ -O2 -g -Wall -fmessage-length=0   -c -o Chung1.o Chung1.cpp
g++ -O2 -g -Wall -fmessage-length=0   -c -o Rectangle.o Rectangle.cpp
g++ -o Chung1 Chung1.o Rectangle.o 
```

如果您使用的是 Makefile，那么只需像使用 Chung1.cpp 一样添加 Rectangle.cpp。您可能正在使用的任何 IDE 也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:08:28.530

不，您不应该包含`.cpp`. 你必须编译它，这应该产生一个`.o`文件，然后链接到主可执行文件。`.o`无论出于何种原因，您的主文件都无法找到并链接到该文件。在不知道您正在执行的确切编译和链接步骤的情况下，很难说更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:08:23.630

通常 .h 文件是类定义，所以你是对的。我认为您没有在编译器选项中包含“Rectangle.h”。

# iphone - 在用户不认为他们的电池会耗尽的情况下使用显着的位置变化

> ID：13441823
> 
> 赞同：4
> 
> 时间：2012-11-18T16:05:32.180
> 
> 标签：iphone, objective-c, ios, location, core-location

我们的用户一直抱怨即使应用程序被杀死，紫色箭头仍然出现，因此他们自动认为它耗尽了他们的电池。

我们通过调用仅使用显着的位置变化

```
 [locationManager startMonitoringSignificantLocationChanges]; 
```

因此，如果我们不停止重要的位置更改，紫色箭头会一直亮着（我们的用户认为他们的电池会耗尽）。

即使我们想在应用程序终止时停止重大的位置更改，我们也不能因为 applicationWillTerminate 很少被调用。

所以有3个选项：

1.  保持原样 - 但用户一直在抱怨，因为苹果没有区分使用常规电池消耗位置的应用程序和使用显着位置变化的应用程序。
2.  使用常规的 [locationManager startUpdatingLocation]，这样当应用程序终止时，监控也会终止。这里的问题是，只要应用程序没有终止，它确实会消耗用户的电池。
3.  称呼

    ```
    (void)applicationDidEnterBackground:(UIApplication *)application
    {
        [locationManager stopMonitoringSignificantLocationChanges];
    } 
    ```

    这里的问题是我们没有从背景中的位置变化中受益……</p>

是否有任何其他建议可以让我们这样做：

1.  只要应用程序是后台就可以监控位置（紫色箭头在这里是可以的）
2.  当应用程序被杀死时停止位置监控（紫色箭头在这里不可以）
3.  使用显着位置更改，以免耗尽用户的电池。

?

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T18:49:55.123

也许你的解决方案都跑题了。

*   您声称您的用户只有一个问题，因为他们*认为*电池耗尽。
*   您还声称您的用户*希望*在不消耗电池的情况下获得位置监控的好处。

您正试图通过围绕它进行工程来解决用户的认知误解。

相反，你为什么不向你的用户**解释一下呢？**

1.  您可以弹出一个漂亮的模态视图控制器，以告知他们在离开位置监控时获得的所有好处。
2.  你可以解释一下对电池的误解。
3.  而且您可以提供一个设置，如果他们愿意，他们可以将其关闭。

# php - 如何智能比较两张表？

> ID：13441824
> 
> 赞同：2
> 
> 时间：2012-11-18T16:05:33.670
> 
> 标签：php, mysql

考虑以下是我的两个 sql 表：

**表 1**                                                                       **表 2**

```
+--------+-------------+ +--------+------ ------------------------------------+
| 美元 | 型号 | | 美元 | 型号 |
+--------+-------------+ +--------+------ ------------------------------------+
| 700 | iPad 2 WiFi 16GB | | 710 | iPad2 WiFi 16GB |
| 400 | iPhone 4S 16GB | | 450 | iPhone4S 16GB |
| 250 | iPod Touch(第 4 代)8GB | | 200 | iPod Touch 第 4 代 8GB |
+--------+-------------+ +--------+------ ------------------------------------+

```

我被困在智能地比较两个不同表中的数据。我在搜索或比较的上下文中挖掘了很多，我发现

*   相似文本（）
*   声音（）
*   变音器（）
*   莱文斯坦（）
*   喜欢
*   全文
*   正则表达式

...在 PHP 和 MySQL 中，但它们都没有效率。因为`similar_text`和`LEVENSHTEIN`真的很好，但最糟糕的缺点是它们对于 1000 行非常慢，`soundex()`并且`metaphones`对于不相似的项目返回相同的声音，比如“iphone”和“ipad”，两者都不相同等等。所有我想要做的是有效地比较与上述示例“iPhone 4S 16GB”和“iPhone4S 16GB”相同或类似的两行，我的解决方案应该可以快速比较这些行。请让我知道我有哪些比较选项，以便我解决我的查询。我真的很感激任何想法，任何提示。

注意：我的一张表包含大约 900 行。

这是以下内容的延续：

[比较两个数组并排序 WRT USD](https://stackoverflow.com/questions/13439509/compare-two-arrays-and-sort-wrt-usd)

[两个表列之间与mysql的模式比较](https://stackoverflow.com/questions/13417194/pattern-comparing-with-mysql-between-two-tables-column)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:15:23.397

如果您不喜欢复杂但更有可能产生良好结果的解决方案，那么也许您只想从文本字符串中删除空格并尝试简单的字符串比较..或者转换为所有 UPPER然后比较没有空格。

这至少可以解决您所说的“相似性”示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:20:51.990

我在做垃圾邮件检测器时涉及到这种事情（大量研究，后来放弃了这个想法，但继续前进......）。

基本上，不要使用like，它在大文本上很慢，并且索引是有限的，例如：

LIKE '%hello' 不能使用索引，但是，LIKE 'hello%' 可以。此外，大字段将导致大索引以按照您的意图进行工作（它们适用于通常较短的电子邮件地址）。

使用 = 这也将不区分大小写，您必须为此使用它。

接下来，将一个新字段添加到包含已解析的 metaphone() 表示的表中（这意味着它只需要计算一次）。

现在您有一个包含 1000 条记录的表，每条记录都有其变音位版本以及原始记录。您必须这样做才能获得所需的效率。当您想查看某些文本是否已经存在时，只需将新文本转换为它的 metephone 版本，然后在 db 表中搜索它（在 metephone 解析字段上搜索）。快得多;)

为了提高准确性，您可能需要删除所有常用词并删除标点符号，例如：

*   和 = 已删除
*   , = 已删除
*   ' = 已删除
*   有 = 已删除
*   it's = its or it is (取决于你喜欢哪个)

然后将所有多个空格（例如 5 个空格）组合成 1 个空格。

您正在做的事情的性质将有数百个小调整，您可以根据需要对其进行完善。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T16:21:34.070

一种方法是创建一个函数/存储过程，它去除一串空格'（'，'）'，用'Gen'替换'Generation'等等。之后，您可以创建两个与当前表相同的临时表，但应用“strip_unnecessary()”函数的“模型”字段除外。现在它应该只是加入的问题：将表放在一起或以任何其他方式比较它们。

使用临时表的技巧可以节省一些执行时间，但如果您要经常执行此查询，请考虑使用视图来提高性能。

该解决方案高度依赖于“strip_unnecessary()”函数的好坏以及您对“模型”字段内容的了解程度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T16:26:39.720

从mysql的角度来看，解决方案是这样的：

```
SELECT *
FROM tb1
WHERE (USD, Model) NOT IN (SELECT USD, Model FROM tb2) 
```

# css - 在浮动 div 和底部 div 之间放置一个空格

> ID：13441825
> 
> 赞同：1
> 
> 时间：2012-11-18T16:05:34.793
> 
> 标签：css, html, margin

我正在尝试在两个浮动 div 的底部创建一个 div，但在底部 div 和其他 div 之间有一个边距。

这是[小提琴](http://jsfiddle.net/QH7q8/10/)

html:

```
<html><head></head>
<body>
    <div class="left">Hello</div>
    <div class="right">Hello</div>
    <div class="bottom">Hello</div>

</body>
</html> 
```

CSS：

```
.left {
    width: 150px;
    height: 100px;
    float: left;
    border: 1px solid #000;
}

.right {
    width: 150px;
    height: 100px;
    float: left;
    border: 1px solid #000;
}

.bottom {
    clear: both;
    margin-top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:15:28.123

使用一个清晰​​的类它对我有用（[小提琴](http://jsfiddle.net/QH7q8/12/)）：

```
<html><head></head>
<body>
    <div class="left">Hello</div>
    <div class="right">Hello</div>
    <div class="clear"></div>
    <div class="bottom">Hello</div>
</body>
</html>​ 
```

```
.left {
    width: 150px;
    height: 100px;
    float: left;
    border: 1px solid #000;
}

.right {
    width: 150px;
    height: 100px;
    float: left;
    border: 1px solid #000;
}

.bottom {
    margin-top: 20px;
}

.clear {
    clear: both;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:14:35.740

即使您正在清除这些浮动（使用 clear: both），最终 div 的边距也不会将其定位在远离它们的位置。事实上，该边距实际上*隐藏*在浮动后面。

通过引入一个额外的元素来解决这个问题是很诱人的——要么是在浮点数之后的一个空的清除元素，要么是一个围绕它们的包装器。

然而，为了保持标记尽可能干净，通常只为浮动添加底部边距是合适的。

因此，您必须将此边距定义为第一个 div。所以它会像这样工作：

CSS：

```
.left {
    width: 150px;
    height: 100px;
    float: left;
    border: 1px solid #000;
    margin-bottom: 20px;
}

.right {
    width: 150px;
    height: 100px;
    float: left;
    border: 1px solid #000;
}

.bottom {
    clear: both;
} 
```

# jpgraph - jpgraph 散点图图例

> ID：13441832
> 
> 赞同：1
> 
> 时间：2012-11-18T16:06:04.120
> 
> 标签：jpgraph

这是我在这里的第一篇文章，但我已经在这里查找了数百次问题的解决方案。感谢这里所有乐于助人的人！！！

现在我的问题是：我很久没有使用 jpgraph 了。到目前为止，我只做过饼图。在饼图中，我可以制作图例来描述每个切片的用途。

现在我尝试用散点图做同样的事情。我想要一个描述每个点代表什么的图例。

我有以下数据可以使用：

```
if ($myrow=mysql_fetch_array($kostenTbl)) {
    do {

            $cost[] = $kostenContainer;
            $price[] = $einnahmen;
            $data_names[] = $kundenName;

    } while ($myrow=mysql_fetch_array($kostenTbl));
}

...

$graph = new Graph(400,250);
$sp1 = new ScatterPlot($price,$cost);

... 
```

现在有了饼图，我可以添加...

```
$p1->SetLegends($data_names); 
```

...我得到了我的传奇。

有没有办法在散点图中做到这一点？

# javascript - Brothers() 不适用于 ul li 下的链接

> ID：13441838
> 
> 赞同：0
> 
> 时间：2012-11-18T16:07:24.663
> 
> 标签：javascript, jquery, css

我有两个子菜单，当它们使用此 jquery 代码处于活动状态时，我会突出显示它们：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#links').click(function(){
        $(this).addClass('selected');
        $(this).siblings().removeClass('selected');
    });
})
 </script> 
```

但现在我有另一个子菜单，我想使用相同的代码，但它不起作用，因为兄弟（）函数不能在其中工作，因为链接在 li 标签下！这是我尝试过的代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $('.tabs_rubriken  a').click(function(){
        $(this).addClass('selected');
        $(this).siblings().removeClass('selected');
    });
})
 </script> 
```

当我单击它们时，它们会被高亮显示，但是当单击该菜单中的其他链接时，它们不会删除“已选择”类。顺便说一下，这个菜单必须用 ul li 订购。

标记：

```
<div id="tab2">
<ul class="tabs_rubriken">
    <li><a class="submenu_produkts_links2" href="#armreifen">Armreifen</a></li>
    <li><a class="submenu_produkts_links2" href="#colliers">Colliers Anhänger</a></li>
    <li><a class="submenu_produkts_links2" href="#ohrschmuck">Ohrschmuck</a></li>
    <li><a class="submenu_produkts_links2" href="#ringe">Ringe</a></li>
</ul>
<div id="armreifen">[tabs slidertype="images" auto="yes" autospeed="4000"]
[imagetab width="800" height="500"] image.png [/imagetab]
[imagetab width="800" height="500"] image.png [/imagetab]
[/tabs]</div>
<div id="colliers">Colliers Anhänger</div>
<div id="ohrschmuck">Ohrschmuck</div>
<div id="ringe">Ringe</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:12:00.973

```
$(document).ready(function(){
    $('.tabs_rubriken a').click(function(){
        $('a.selected', this.parentElement.parentElement).removeClass('selected');
        $(this).addClass('selected');
    });
}) 
```

# python - Web2py - 如何创建弹出窗口？

> ID：13441839
> 
> 赞同：4
> 
> 时间：2012-11-18T16:07:58.100
> 
> 标签：python, web2py

在 web2py 中创建弹出窗口的首选方法是什么？例如，假设您想弹出一个服务条款框，让用户在允许用户继续之前单击他同意这些条款 - 这样做的好方法是什么？有没有办法在没有javascript的情况下实现这一点，例如，通过在“A（）”中设置一个特定的“_target”（类似于“_blank”的目标如何打开一个新窗口/选项卡）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T08:41:47.910

[你可以像这个例子 #6](http://www.web2py.com/init/default/examples)一样使用 flash (javascript)

如果您依赖弹出窗口，则几乎所有浏览器当前都在阻止它们。

如果您希望用户接受服务条款，请在表单中除了指向 ToS 的“_blank”链接之外放置一个复选框，然后进行简单的[回](http://www.web2py.com/book/default/chapter/03#Postbacks)发验证 ToS 已被选中。

# android - 确保当用户离开 GUI 并返回时 Android 应用程序按预期运行

> ID：13441840
> 
> 赞同：1
> 
> 时间：2012-11-18T16:08:03.530
> 
> 标签：android, user-interface, continuations

我编写了一个播放音频文件的 Android 应用程序。在 GUI 上，我有一个`STOP`按钮，按下时会停止播放音频。如果我留在应用程序 GUI 中，我可以根据需要多次停止和启动，并且一切正常。但是，如果我开始播放并离开 GUI 以使用其他一些应用程序，音频将继续播放。如果我点击午餐图标返回我的应用程序，如果我点击`STOP`没有任何反应。即使我退出 GUI 并返回，如何确保应用程序操作完好无损并继续按预期工作？

这是我播放音频的方式：

```
 Thread thrd = new Thread(new Runnable() {
   public void run() 
    {
    AudioTrack track = new AudioTrack(....
    track.play();
    while(true) { 
       if (shallContinue)
         track.write(....
    } 
```

另外，如果我转到另一个应用程序，然后通过按主页按钮并从最近的应用程序列表中选择该应用程序来重新启动该应用程序，则该`STOP`按钮可以工作，但是如果我通过按应用程序午餐图标重新启动，则`STOP`不再工作,

# django - django / 可以通过foreignKey过滤吗？

> ID：13441841
> 
> 赞同：0
> 
> 时间：2012-11-18T16:08:07.133
> 
> 标签：django

有没有办法通过 foreignObject 过滤

查看我的代码，我想修复它。

型号部分：

```
class UserProfile:
    blahblah

class FreeTime : 
    owner = models.ForeignKey(UserProfile)
    fromTime=models.DateField()
    toTime=models.DateField() 
```

现在，编码部分

```
givenTime = date(2012,11,11)

freeTimes = FreeTime.objects.filter(fromTime__lte=givenTime, toTime__gte=givenTime)

users = []
for freeTime in freeTimes:
    users.append(freeTime.owner)

//todo : remove duplicated object of user 
```

这完全是浪费代码。

如您所见，我想要的是找到在给定时间有空的用户。

有什么办法可以减少代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:15:43.823

我认为这应该有效：

```
User.objects.filter(freetime__fromTime__lte=givenTime, freetime__toTime__gte=givenTime) 
```

**编辑：**

正如@calvin Cheng 所说，您应该向用户 FK：

```
from django.contrib.auth.models import User

class FreeTime(models.Model): 
    owner = models.ForeignKey(User)
    fromTime=models.DateField()
    toTime=models.DateField() 
```

# javascript - WebGL：尽管使用相同的代码，但一切都很模糊

> ID：13441843
> 
> 赞同：11
> 
> 时间：2012-11-18T16:08:14.530
> 
> 标签：javascript, webgl

刚开始使用 WebGL，尝试绘制一些基本的线条，甚至不是多边形。我找到了一些示例，将它们复制粘贴到本地并从 Firefox 中运行，它们看起来不错：锐利、清晰的边缘。然后，我创建了自己的项目，重构（糟糕！）示例代码，使用 RequireJS 加载等，示例仍然有效，但现在我的边缘/点/线都是模糊的。就像一些糟糕的抗锯齿设置搞砸了一切。我尝试了一切，起初我的代码看起来有些不同（尽管功能相同，恕我直言），然后我进行了更多重构，使其看起来与示例几乎相同，但我仍然看到模糊的线条。

我究竟做错了什么？

示例代码： http: [//jsfiddle.net/6QCNR/](http://jsfiddle.net/6QCNR/) 示例代码的实时工作版本：http: [//dl.dropbox.com/u/17612367/OpenGL%20to%20WebGL/figure%202.16%20-%20dot%20plot /index.html](http://dl.dropbox.com/u/17612367/OpenGL%20to%20WebGL/figure%202.16%20-%20dot%20plot/index.html)

我的版本： [http ://bernardofanti.azurewebsites.net/](http://bernardofanti.azurewebsites.net/)

我重构的代码：

main.js（通过 index.html 中的 data-main 属性加载）：

```
define(
[
    "libs/domReady",
    "webglengine",
    "libs/text!../shaders/fragmentShader.glsl",
    "libs/text!../shaders/vertexShader.glsl"
],
function(domReady, GLEngine, fragmentShaderCode, vertexShaderCode)
{
    domReady(function()
    {
        GLEngine.init("graphCanvas");
        GLEngine.initShaders(fragmentShaderCode, vertexShaderCode);

        var geometry = (function()
        {
            var res = [];
            var a = document.getElementById("graphCanvas").width / 4.0;
            var b = document.getElementById("graphCanvas").height / 2.0;

            for (var x = 0; x < 4.0; x += 0.005)
            {
                var y = Math.exp(-x) * Math.cos(2 * Math.PI * x);
                res.push(x * a, (y + 1) * b, 0);
            }

            return res;
        })();

        GLEngine.createBuffers(geometry);
        GLEngine.render();
    });
}); 
```

WebGlEngine.js：

```
define(
[
],
function()
{
    "use strict";

    // Singleton Pattern through RequireJS
    var gl = null;
    var shaderProgram = null;

    var pMatrix = mat4.create();

    var initGl = function(canvasId)
    {
        try 
        {
            var canvas = document.getElementById(canvasId);
            //gl = canvas.getContext("experimental-webgl", { antialias: true });
            gl = (function()
            {
                var names = ["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"];
                var context = null;
                for (var ii = 0; ii < names.length; ++ii)
                {
                    try
                    {
                        context = canvas.getContext(names[ii]);
                    }
                    catch (e) { }
                    if (context)
                    {
                        break;
                    }
                }
                return context;
            })();

            gl.clearColor(0.0, 0.0, 0.0, 1.0);

            gl.viewportWidth = canvas.width;
            gl.viewportHeight = canvas.height;

            mat4.ortho(0, gl.viewportWidth, 0, gl.viewportHeight, -1, 1, pMatrix);
        }
        catch (e)
        {
        }
        if (!gl)
        {
            throw("Could not initialise WebGL");
        }
    }

    var createShader = function(shaderCode, shaderType)
    {
        if(shaderType !== "FRAGMENT_SHADER" && shaderType !== "VERTEX_SHADER")
            throw("Invalid shader type");

        var shader = gl.createShader(gl[shaderType]);
        gl.shaderSource(shader, shaderCode);
        gl.compileShader(shader);

        if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS))
            throw("Bad shader: " + gl.getShaderInfoLog(shader));

        return shader;
    };

    var initShaders = function(fragmentShaderCode, vertexShaderCode)
    {
        shaderProgram = gl.createProgram();

        var fragmentShader = createShader(fragmentShaderCode, "FRAGMENT_SHADER");
        var vertexShader = createShader(vertexShaderCode, "VERTEX_SHADER");

        gl.attachShader(shaderProgram, vertexShader);
        gl.attachShader(shaderProgram, fragmentShader);
        gl.linkProgram(shaderProgram);

        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS))
            throw("Could not initialise shaders");

        gl.useProgram(shaderProgram);
        shaderProgram.vertexPositionLoc = gl.getAttribLocation(shaderProgram, "aVertexPosition");
        gl.enableVertexAttribArray(shaderProgram.vertexPositionLoc);
        shaderProgram.pMatrixLoc = gl.getUniformLocation(shaderProgram, "uPMatrix");
    };

    var geometry = [];
    var vertexBuffer = null;

    var createBuffers = function(vertices)
    {
        geometry = vertices;
        vertexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(geometry), gl.STATIC_DRAW);
    };

    var render = function()
    {
        gl.clear(gl.COLOR_BUFFER_BIT);

        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.vertexAttribPointer(shaderProgram.vertexPositionLoc, 3, gl.FLOAT, false, 0, 0);
        gl.uniformMatrix4fv(shaderProgram.pMatrixLoc, 0, pMatrix);

        gl.drawArrays(gl.POINTS, 0, geometry.length / 3);
    };

    return {
        init: initGl,
        initShaders: initShaders,
        createBuffers: createBuffers,
        render: render,
        GL: function()
        {
            return gl;
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-18T19:01:57.410

问题**不**在于您发布的**Javascript**代码，而在于`Canvas`元素。

与通常`html`的元素相反，`Canvas`元素需要它的`width`和`height`属性并将其用作逻辑大小。

您设置的`CSS`宽度和高度只会拉伸结果，这就是您看到模糊的原因。

可以在这个问题上找到更详细的解释：[HTML5 中的画布宽度和高度](https://stackoverflow.com/questions/4938346/canvas-width-and-height-in-html5)

# android - 从 android 键盘中删除一个键

> ID：13441846
> 
> 赞同：0
> 
> 时间：2012-11-18T16:08:27.283
> 
> 标签：android, android-layout, android-xml

我需要从标准键盘中删除一个键并添加一个新键，而不是使用新添加一个键的功能。

基本上将此功能用于edittext。

```
 <EditText android:text="@+id/EditText01" android:id="@+id/EditText01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:inputType="phone" android:digits="1234567890,"></EditText> 
```

请在图片中找到所需的功能。我们可以这样做吗？![在此处输入图像描述](../Images/185c586e7b1528fe2f9cedbc5d0f361b.png)

而不是 X#( 我只需要逗号并且是功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:08:01.570

欢迎您找到默认输入法编辑器的源代码，下载它，创建您自己的具有此替代功能的输入法编辑器，发布您修改后的输入法编辑器（在您的应用程序或其他应用程序中），并要求您的用户切换到您的输入法编辑器。我预计 99% 的用户会忽略你。

否则，您无法控制输入法编辑器上显示的按键。一些输入法编辑器没有*任何*键（例如，使用手势的涂鸦）。您可以使用`android:inputType`和相关属性作为提示，但并非所有输入法编辑器都会支持它们，并且它们不提供每个键的灵活性。

# css - CSS - font-family - webfont-service的后备？

> ID：13441852
> 
> 赞同：2
> 
> 时间：2012-11-18T16:08:51.853
> 
> 标签：css, fonts, webfonts, typography

对于我的一个项目，我使用由 webfont-service 托管的字体。没有任何后备，代码看起来像这样：`font-family:'Amasis MT W01 italic';` 你看，字体样式（斜体）已经包含在内，因为这是客户支付的费用。当我为此添加后备时，它当然可以工作，但是后备字体不是斜体，这会导致页面外观发生巨大变化。有什么解决办法吗？设置`Amasis MT W01 italic'`为斜体会导致“双斜体”字体，所以这不是一个选项。

实际上，我需要类似“如果 Amasis 不可用，则使用斜体的 Helvetica”之类的东西，仅使用 CSS。我想这不可能吧？有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:15:02.733

如果实际字体是斜体，您应该`font-style: italic`在`@font-face`规则中声明它以及使用该字体的普通 CSS 代码，例如

```
font-family: 'Amasis MT W01 italic', Helvetica;
font-style: italic; 
```

（在字体*系列的名称中使用**italic*这个词是不合逻辑的，但它只是一个名称；您也可以在那里使用，只要您始终使用该名称。）*`foobar`*

 *不过，我想知道为什么 Helvetica，众所周知的无衬线字体（在绝大多数计算机中被 Arial 取代）会成为 Amasis 家族中具有强衬线字体的合适替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T22:55:22.743

遇到了同样的问题并在这里找到了解决方案：http: [//spaceninja.com/2010/11/29/font-face-faux-styles/](http://spaceninja.com/2010/11/29/font-face-faux-styles/)它似乎对我有用。只需确保定义所有 @font-face 规则，例如：

```
@font-face {
    font-family: 'Ubuntu'; /* regular */ /* 'Amasis' in your case */
        src: url('Ubuntu-R-webfont.eot');
        /* more sources here */
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Ubuntu'; /* italic */ /* 'Amasis' in your case */
        src: url('Ubuntu-R-webfont.eot');
        /* more sources here */
    font-weight: normal;
    font-style: italic;
} 
```

然后在需要的地方使用它：

```
h2 {
    font-family: 'Ubuntu'; /* 'Amasis' in your case */
    font-style: italic;
} 
```*

# drupal - Drupal 标记用户关注/关注视图

> ID：13441855
> 
> 赞同：2
> 
> 时间：2012-11-18T16:09:19.277
> 
> 标签：drupal, views, flags

我正在尝试设置 2 个与标志模块集成的新视图。我已经设置了一个标志来关注/取消关注用户。我想设置两个视图来显示用户关注的用户列表，一个显示谁关注了我们正在查看的用户。我创建了一个视图来显示用户正在关注的用户，并添加了以下关系和上下文过滤器：

关系：

标志：用户标志 - 任何用户标志：用户

上下文过滤器 User: Uid - 提供来自 URL 的默认值用户 ID。

我的视图路径是 user/%/following 但它没有显示任何结果。有任何想法吗？我该如何设置第二个视图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:56:39.463

这是一个棘手的问题！

您希望您为视图创建的**过滤器**不是将被列出的用户，而是成为**关注**应该列出的用户的用户。

要做到这一点，您还需要**一种关系**！添加标志关系后（我什至会在创建它时检查特定的用户标志，例如“关注标志”），您会看到之前不存在的关系区域中出现了一些其他选项.

继续添加另一个关系，这一次，选择“标记：用户”，您可以看到“标记项目的用户”。我需要这种关系，当然，选择它适用于您在第一个关系中包含的特定标志。这是我的精确设置：

![在此处输入图像描述](../Images/f07573dcbce0dc813377533f46bf00a1.png)

现在，当您设置上下文过滤器时，它确实应该从不存在的 URL 中获取其 id，只需确保要求它不与应该列出的用户相关，而是与执行该操作的用户相关下列的：

![在此处输入图像描述](../Images/fc6999e6c53b8baa9f563d8ed574a98b.png)

那应该为你做！让我们知道它是否有效！

# c++ - 左操作数 cout 是如何在这里传递的？

> ID：13441858
> 
> 赞同：3
> 
> 时间：2012-11-18T16:09:35.533
> 
> 标签：c++

```
#include <iostream>
#include <iomanip>
using namespace std;

ostream & currency(ostream & output)
{
    output << "RS ";
    return output;
}

int main()
{
    cout << currency  << 7864.5;
    return 0;
} 
```

输出 ：

```
 RS 7864.5 
```

我不明白这似乎是如何工作的，即只使用函数的名称`currency` 来调用函数。这不应该是这样`currency(cout)`，但使用它会产生输出。

```
 RS 1054DBCC7864.5 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T16:14:41.013

该函数`currency()`是一个*操纵器*：流类具有特殊的重载输出运算符，将具有特定签名的函数作为参数。它们看起来像这样（省略了模板化）：

```
class std::ostream
    public std::ios {
public:
     // ...
     std::ostream& operator<< (std::ios_base& (*manip)(std::ios_base&));            
     std::ostream& operator<< (std::ios& (*manip)(std::ios&));         
     std::ostream& operator<< (std::ostream& (*manip)(std::ostream&));
}; 
```

也就是说，`currency`作为函数指针传递，该指针以流作为其参数进行调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:15:38.123

这有效（问题中的代码）：

```
std::cout << currency << 7864.5; 
```

这样做也是如此：

```
currency(std::cout) << 7864.5; 
```

您显然尝试并抱怨但没有表现出来的是：

```
std::cout << currency(std::cout) << 7864.5; 
```

这与以下内容相同：

```
ostream& retval = currency(std::cout); // prints "RS " as you expect
std::cout << retval; // oops, this is cout << cout, which is meaningless
std::cout << 7864.5; // prints "7864.5" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:12:20.553

您的函数被视为 ostream 操纵器。

# python - 为什么不同实例的字段在 python 模块中混合在一起？

> ID：13441859
> 
> 赞同：1
> 
> 时间：2012-11-18T16:09:42.307
> 
> 标签：python, python-2.7

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

考虑以下 python test.py 模块：

```
class Container:
    def __init__(self, str_list=[]):
        self.str_list = str_list

    def from_strings(self, st=""):
        self.str_list.append(st)
        return self

o1 = Container().from_strings(st="o1")
o2 = Container().from_strings(st="o2")
o3 = Container().from_strings(st="o3")

def prnt():
    print("o1's list:"+str(o1.str_list))
    print("o2's list:"+str(o2.str_list))
    print("o3's list:"+str(o3.str_list))

if __name__ == '__main__':
    prnt() 
```

为什么输出`python test.py`：

```
 o1's list:['o1', 'o2', 'o3']
  o2's list:['o1', 'o2', 'o3']
  o3's list:['o1', 'o2', 'o3'] 
```

代替：

```
 o1's list:['o1']
  o2's list:['o2']
  o3's list:['o3'] 
```

（似乎我错过了为什么同一模块中不同实例的字段（str_list）可能会混淆。一个指向解释这个概念的python文档的指针将不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:13:54.150

您在构造函数中创建了一个空列表作为默认值：

```
def __init__(self, str_list=[]):
    self.str_list = str_list 
```

此列表仅创建一次，然后由所有实例共享。如果您想为每个实例创建一个单独的列表，您可以执行以下操作：

```
def __init__(self, str_list=None):
    self.str_list = [] if str_list is None else str_list 
```

现在每个实例都创建了自己的列表。

**编辑：**

## 到底是怎么回事？

您可能使用过默认参数，例如`1`, 或者`'foo'`从未遇到过问题。这些是**不可**操纵的**不可**变对象。每当你认为你这样做时，你会得到一个新的实例。不可变对象类型的集合包括`int`、`str`、`tuple`等。

现在`[]`, a `list`, 是一个**可以操作的****可变**对象。因此，每当您更改其上的属性时，它都会更改实际对象，并且对它的每次引用都会反映更改。

# java - 使用小于 (<) 符号时 Java RegEx 不匹配

> ID：13441860
> 
> 赞同：0
> 
> 时间：2012-11-18T16:09:49.997
> 
> 标签：java, regex

我正在尝试在 Java 中使用这个 RegEx：**在以下代码中：**

 **```
public class Intervals {
public static void main( String[] args ) {
    try {
        FileReader fr = new FileReader( new File( "ex11.intervals.txt"));

        BufferedReader br = new BufferedReader( fr );

        while( br.read() != -1 ){
            String currentLine = new String( br.readLine() );

            Pattern p = Pattern.compile( "<hr( +size *= *[0-9]+)? *>" );

            Matcher m = p.matcher( currentLine );

            while( m.find() ){
                System.out.println( currentLine );
            }
        }

    } catch( FileNotFoundException fne ){
        fne.printStackTrace();
    } catch( IOException e ){
        e.printStackTrace();
    }
}
} 
```

但它不起作用，但如果我使用**egrep** UNIX 实用程序执行它，它可以正常工作。

**ex11.intervals.txt**内容：

```
<hr>
<hr >
<hr size=15>
<hr size =    21 > 
```

有人知道这是怎么回事吗？

我努力了

```
Pattern p = Pattern.compile( "<hr>" ) 
```

但两者都不起作用。

有什么建议，有帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T16:20:06.210

更改代码以读取文件，如下所示：

```
String currentLine = null;

while( (currentLine = br.readLine()) != null ){

} 
```

当您这样做时，`read()`您总是阅读第一个字符，从而跳过 HTML 标记中的小于号。**

# xml - asp.net Razor 输出 xml dynamicxml

> ID：13441861
> 
> 赞同：1
> 
> 时间：2012-11-18T16:09:55.157
> 
> 标签：xml

您如何将 xml 从剃刀宏转储/输出到页面？

我有一个变量，它只返回带有@field 的“umbraco.MacroEngines.DynamicXml”

但可以只输出以查看它包含哪些节点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:39:28.223

问题是由于 umbracoSettings.config 文件中的 Razor 脚本设置造成的。在那里列出了几个将作为 DynamicXml 被忽略的 HTML 项目。我已经添加了几个来解决这个问题。

```
<scripting>
    <razor>
        <!-- razor DynamicNode typecasting detects XML and returns DynamicXml - Root elements that won't convert to DynamicXml -->
        <notDynamicXmlDocumentElements>
            <element>p</element>
            <element>div</element>
            <element>ul</element>
            <element>span</element>
            <element>script</element>
            <element>iframe</element>
        </notDynamicXmlDocumentElements>
    </razor>
</scripting> 
```

# record - 如何在android中记录暂停

> ID：13441866
> 
> 赞同：0
> 
> 时间：2012-11-18T16:10:04.227
> 
> 标签：record, recording, mediarecorder

我正在 android 中开发一个应用程序来录制语音会生成一个 mp3 文件，但我的问题是在使用 Android MediaRecorder 类录制时暂停。有谁能够帮我？任何形式的帮助表示感谢提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:57:28.263

不幸的是，Android SDK 并没有提供这种开箱即用的功能。您有以下选择：

1.  使用`AudioRecord`Android SDK 中的类，它比 Android SDK 更底层，`MediaRecord`并将未压缩的 PCM 数据作为字节流输出。原始 PCM 数据可以使用`android.media.AmrInputStream`（不是官方 API 的一部分）进行压缩。这种方法存在一些问题 -`AmrInputStream`仅支持 8 kHz 采样率，因此质量不是最好的，尽管是合理的。

2.  如果您需要在所有设备上获得最佳质量和有保证的支持，请使用`MediaRecord`Android SDK 中的类记录多个文件，并使用 3rd 方本机库（例如`ffmpeg`. 这将很困难（您将不得不使用 NDK 并用 C 编写包装程序）。

# python - Python：可以在内置类型而不是自定义对象上调用 __subclasses__()

> ID：13441867
> 
> 赞同：1
> 
> 时间：2012-11-18T16:10:04.943
> 
> 标签：python

```
class Test: pass
print(Test.__subclasses__()) 
```

返回：

```
AttributeError: class Test has no attribute '__subclasses__' 
```

和

```
print(int.__subclasses__()) 
```

返回：

```
[<type 'bool'>] 
```

为什么我不能在我的自定义对象上调用**子类()？**

这个内置方法不是自定义类型的保留者，是吗？

> 每个类都有一个对其直接子类的弱引用列表。此方法返回所有仍然存在的引用的列表。例子：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:14:22.393

你需要这样做：-

```
class Foo(object):
    pass

# This works perfectly fine now.
print(Foo.__subclasses__()) 
```

上面的类是一个“新式”类，因为它继承自对象类。新式类提供了许多“旧式”类所没有的额外框架。新型类的一个特殊属性是能够使用**subclasses**方法确定该类的子类。

# r - 数据表和分层均值

> ID：13441868
> 
> 赞同：5
> 
> 时间：2012-11-18T16:10:21.693
> 
> 标签：r, data.table

我有一些代码可以生成分层加权均值，我确信这在几个月前有效。但是，但我不确定当前的问题是什么。（我很抱歉 - 这一定是非常基本的东西）：

```
dp=
structure(list(seqn = c(1L, 2L, 3L, 4L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 13L, 3L, 4L, 9L, 10L, 11L, 14L, 8L, 11L, 12L, 10L, 
5L, 13L, 2L, 14L, 3L, 9L, 6L, 7L), sex = c(2L, 1L, 2L, 2L, 1L, 
2L, 2L, 1L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L), bmi = c(22.8935608711259, 
27.0944623781918, 40.4637162938634, 23.7649712675423, 15.3193372705538, 
31.1280302540991, 21.4866354393239, 20.3200254374398, 32.331092513536, 
25.3679771839413, 33.9400508162971, 14.7048592172926, 25.5243757788688, 
23.4331882363495, 27.6428134168995, 29.3923629426172, 24.9547209666314, 
17.0522203606383, 15.51, 22, 30.62, 30.94, 29.1, 25.57, 24.9, 
27.33, 17.63, 18.48, 22.56, 29.39), tc = c(273L, 181L, 150L, 
201L, 142L, 165L, 235L, 219L, 298L, 222L, 143L, 134L, 268L, 160L, 
236L, 225L, 260L, 140L, 162L, 132L, 156L, 140L, 279L, 314L, 215L, 
174L, 129L, 148L, 153L, 245L), swt = c(1645, 3318, 2280, 1574, 
4062, 1627, 14604, 24675, 975, 975, 2697, 1559, 1737.58, 1730.23, 
19521.36, 28080.57, 1248.43, 13745.77, 5251.76464426326, 6497.194885522, 
15915.7023420765, 3740.96809540218, 16574.177622509, 307.32513798849, 
4720.89748295751, 3247.78896499604, 7698.70949077031, 1262.6450411464, 
6609.43340735515, 4254.23723479882)), .Names = c("seqn", "sex", 
"bmi", "tc", "swt"), row.names = c(20560L, 20561L, 20562L, 20563L, 
20565L, 20566L, 20567L, 20568L, 20569L, 20570L, 20571L, 20572L, 
61335L, 61336L, 61338L, 61339L, 61340L, 61341L, 95465L, 96890L, 
104613L, 105988L, 107581L, 112267L, 113403L, 114292L, 119979L, 
120271L, 125939L, 135699L), class = "data.frame")

dt=data.table(dp, key='sex')

sapply(df,function(x)weighted.mean(x,df$swt))  #this works to weighted mean
dt[,lapply(.SD, mean, na.rm=T), .SDcols=c('bmi','tc','swt')]  
     #this also works for overall unweighted mean

dt[,lapply(.SD, function(x)weighted.mean(x,swt, na.rm=TRUE)), by=key(dt), .SDcols=c('bmi','tc','swt')] 
```

但这给出了错误： `Error in weighted.mean.default(x, swt, na.rm = TRUE) : object 'swt' not found`

```
sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] data.table_1.8.6

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T13:20:08.800

## 更新（来自 Arun）：现在已在[v1.8.11](https://r-forge.r-project.org/R/?group_id=240)中修复。来自[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable&pathrev=1009)：

> o `DT[, lapply(.SD, function(), by=]`优化“开启”时没有看到 DT 列。现在已修复，[#2381](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2381&group_id=240&atid=975)。测试添加并成功测试。感谢 David F 报告 SO： [data.table 和分层均值](https://stackoverflow.com/questions/13441868/data-table-and-stratified-means)

* * *

这确实是在 1.8.2 和 1.8.6 之间引入的错误。

```
dt[,lapply(.SD, function(x) weighted.mean(x,swt, na.rm=TRUE)), by=key(dt),
    .SDcols=c('bmi','tc','swt')] 
Error in weighted.mean.default(x, swt, na.rm = TRUE) : 
    object 'swt' not found 
```

要同时解决此问题，请关闭优化：

```
options(datatable.optimize=FALSE)
dt[,lapply(.SD, function(x)weighted.mean(x,swt, na.rm=TRUE)), by=key(dt),    
    .SDcols=c('bmi','tc','swt')]
   sex      bmi       tc      swt
1:   1 25.64376 206.0115 17171.20
2:   2 23.73566 193.8727 11467.47 
```

或者，不要用`function()`：

```
options(datatable.optimize=TRUE)
dt[,lapply(.SD, weighted.mean, swt, na.rm=TRUE), by=key(dt),    
    .SDcols=c('bmi','tc','swt')] 
   sex      bmi       tc      swt
1:   1 25.64376 206.0115 17171.20
2:   2 23.73566 193.8727 11467.47 
```

我们现在更多地使用优化，但这种情况在测试套件中漏掉了：测试 825.1、825.2 和 825.3 没有涵盖作为另一列的函数的参数，在匿名`function()`. 如果尚未给出该功能，那将是一个问题。即，与这种情况不同，因为已经给出并且可以按原样应用，`function()`所以可以省略。`weighted.mean`

`verbose=TRUE`您可以通过设置（每个查询或使用全局选项）查看优化如何修改 j 。在这种情况下，该详细输出不会显示任何错误，而只是将其作为旁白提及。

现在归档为[#2381：lapply(.SD, function() ...) 的优化不再看到 ... 中的列](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2381&group_id=240&atid=975)。将修复并添加测试，这样就不会再倒退了。

谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T16:30:25.577

我建议保持简单：

```
dt[,list(bmi_m=weighted.mean(bmi,swt,na.rm=TRUE),
         tc_m=weighted.mean(tc,swt,na.rm=TRUE),
         swt_m=weighted.mean(swt,swt,na.rm=TRUE)),by=key(dt)] 
```

我认为这也相当快。

# c - system() 的退出代码与预期不符

> ID：13441872
> 
> 赞同：5
> 
> 时间：2012-11-18T16:11:10.740
> 
> 标签：c, linux, freebsd

system() 函数似乎返回了我从它所调用的进程中获得的退出代码的 128 倍。

从手册页：

> 返回值 如果出错（例如，fork(2) 失败）返回的值为 -1，否则返回命令的状态。

这就是我所拥有的。

```
$ ls tinker.c
tinker.c
$ echo $?
0
$ ls notexisting
ls: cannot access notexisting: No such file or directory
$ echo $?
2
$ cat tinker.c
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    printf("%d\n", system("ls tinker.c"));
    printf("%d\n", system("ls notexisting"));
    return 0;
}
$ gcc tinker.c -o tinker
$ ./tinker 
tinker.c
0
ls: cannot access notexisting: No such file or directory
512 
```

第一次调用表明我没有失败，但返回代码看起来与我从手册页中读取的内容完全不同。我在做什么错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:25:36.400

您对系统手册页的引用错过了相关部分：

> ... 后一种返回状态采用 wait(2) 中指定的格式。因此，该命令的退出代码将是 WEXITSTATUS(status)。

您需要将返回值右移 8（至少在 Linux 上），以获取命令退出代码。

可移植的方法是只使用宏本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T16:17:28.677

从 POSIX [`system(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html)：

> 如果 command 不是空指针，system() 应**以 waitpid() 指定的格式**返回命令语言解释器的终止状态。

要获取返回码，您需要使用`WEXITSTATUS`宏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T17:01:33.427

0 和 512 是**命令的终止状态**。

如果命令执行成功，则返回 0 值，否则返回非零值。而且这个非零值在不同的操作系统中是不同的。在我的 mac os 中，第二条`system`命令的返回值为 256。

您也可以从这个问题[`ls` exit status](https://stackoverflow.com/questions/1010939/ls-exit-status)得到答案。

# image - openCV - 在灰度图像上绘制颜色轮廓

> ID：13441873
> 
> 赞同：10
> 
> 时间：2012-11-18T16:11:16.280
> 
> 标签：image, opencv, colors, contour, grayscale

我正在研究医学图像的分割算法，在此过程中，它必须在原始图像上显示不断变化的轮廓。
我正在使用灰度 JPEG。为了显示轮廓，我使用了 drawContours 函数，但我无法绘制颜色轮廓。我想在灰度图像上绘制一个红色轮廓，但它只显示为黑色或白色。
这是代码的一部分：

```
Mat_<uchar> matrix = imread(path,0);
int row = matrix.rows;
int col = matrix.cols;
Mat_<uchar> maskInter(row,col);
for (int i=0; i<row; i++)
    for (int j=0; j<col; j++)
    {
        if ((double)matrix(i,j) <0)
        {maskInter(i,j)=255;}
        else
        {maskInter(i,j)=0;}
    };

vector<vector<Point> > contours; 
vector<Vec4i> hierarchy;
Mat mat_out = maskInter.clone();
findContours( mat_out, contours, hierarchy, CV_RETR_TREE , CHAIN_APPROX_SIMPLE);

drawContours( img, contours, -1, RGB(255,0,0),1.5,8,hierarchy,2,Point());
namedWindow(title);
moveWindow(title, 100, 100);
imshow(title, img);
waitKey(0); 
```

是否可以在灰度图像上显示颜色轮廓？
谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-18T21:25:34.490

您需要一个 3 通道 (RGB) 图像才能绘制和显示颜色。你`Mat_<uchar> matrix`只是一个频道。您可以将灰度图像转换为彩色图像，如下所示：

```
 // read image
  cv::Mat img_gray = imread(path,0);

  // create 8bit color image. IMPORTANT: initialize image otherwise it will result in 32F
  cv::Mat img_rgb(img_gray.size(), CV_8UC3);

  // convert grayscale to color image
  cv::cvtColor(img_gray, img_rgb, CV_GRAY2RGB); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T16:17:03.673

> 是否可以在灰度图像上显示颜色轮廓？

如果它真的是灰度（每像素 1 个字节）而不是，你不能。`cvtColor`要绘制颜色轮廓，您应该在此绘制颜色轮廓之后使用和之后将图像转换为 RGB（每像素 3 个字节） 。

# c# - 你好世界！ - C＃

> ID：13441878
> 
> 赞同：0
> 
> 时间：2012-11-18T16:12:12.327
> 
> 标签：c#

我不确定我在这里做错了什么。我试过了`Console.Read();, Console.ReadLine();`，也没有。我也试过了`Ctrl F5`。我在搜索时没有找到其他建议。如果相关，我正在使用 Visual Studio Express。显然，我想让程序说“Hello world！” 这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Miscellaneous
{
    class Hello_World_
    {
        static void Main()
        {
            Console.WriteLine("Hello world!");
            Console.Read();
        }
    }
} 
```

错误 1 `Program 'c:\Users\MyUserName\Desktop\Visual Studio Workspace\Miscellaneous\Miscellaneous\obj\Debug\Miscellaneous.exe' has more than one entry point defined: 'Miscellaneous.Hello_World_.Main()'. Compile with /main to specify the type that contains the entry point. C:\Users\MyUserName\Desktop\Visual Studio Workspace\Miscellaneous\Miscellaneous\Hello World!.cs 11 21 Miscellaneous`

错误 2 `Program 'c:\Users\MyUserName\Desktop\Visual Studio Workspace\Miscellaneous\Miscellaneous\obj\Debug\Miscellaneous.exe' has more than one entry point defined: 'Miscellaneous.Program.Main()'. Compile with /main to specify the type that contains the entry point. C:\Users\MyUserName\Desktop\Visual Studio Workspace\Miscellaneous\Miscellaneous\Program.cs 15 21 Miscellaneous`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:18:25.463

该方法必须`Main`以大写 M 调用，作为程序的“入口点”。

此外（感谢评论），您的最后一条`using`指令指向一个不存在的命名空间。程序集中存在哪些命名空间`mscorlib`取决于您使用的 .NET 版本。您唯一`using`需要的是`using System;`.

此外，根据您问题的更新，您在同一解决方案中有两个包含`Main()`方法的类，即`class Hello_World_`和`class Program`。要进行编译，您必须设置`Main()`启动方法（入口点）。在 Visual Studio 的右侧，右键单击解决方案中要设置为启动项目的项目（或类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:19:54.193

您可能没有为您的项目使用**控制台应用程序**模板。（[以下是创建新项目时的工作方式](https://www.windowsazure.com/media/devcenter/dotnet/creating-a-console-application.png)）

如果您没有使用上述方法创建项目，请确保程序的输出类型设置为**Console Application**并且启动对象设置为`Miscellaneous.Hello_World_`

您可以在项目属性中设置**输出类型**和**启动对象：**[**方法如下**](http://rbwhitaker.wdfiles.com/local--files/console-windows/console-application.png)

# c# - 实体不能被多个 IEntityChangeTracker 实例引用

> ID：13441879
> 
> 赞同：5
> 
> 时间：2012-11-18T16:12:15.097
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-4

每次我尝试将用户附加到组（或创建组）时都会收到此错误。

这是 GroupController ：

```
public class GroupsController : Controller
{
       private Context db = new Context();

        [HttpPost]
        public ActionResult Create(Group group)
        {
            if (ModelState.IsValid)
            {
                group.owner = db.Users.Attach((User)Session["user"]);
    //current user stored in session
                db.Groups.Add(group);
                db.SaveChanges();

                return RedirectToAction("Index", "Home");
            }
            return View(group);
        }
} 
```

变量 Session["user"] 在登录时设置，这里是 AccountController 代码：

```
public class AccountController : Controller
{
    private Context db = new Context();

    [HttpPost]
    public ActionResult LogOn(LoginTemplate login, string returnUrl)
    {

            User result = db.Users.Where(m => m.email == login.email).Where(m => m.password == login.password).SingleOrDefault();

            if (result != null)
            {
                Session["logged"] = true;
                Session["user"] = result;
                return RedirectToAction("Index", "Home");
            }
     }
 } 
```

这是我的上下文：

```
public class Context : DbContext
{

    public Context() : base("name=myContext")
    {
    }
    private static Context _instance;

    public DbSet<User> Users { get; set; }
    public DbSet<Group> Groups { get; set; }

//I tried to use this method in order to always get the same context but does not work

    public static Context getContext()
    {
        if (_instance == null)
        {
            _instance = new Context();
        }

        return _instance;
    }
} 
```

这是 User.cs

```
 public class User
{
    [Key]
    public int userId { get; set; }

    [Display(Name="Firstname")]
    public string firstname { get; set; }

    [Display(Name = "Lastname")]
    public string lastname { get; set; }

    public virtual ICollection<Group> membership { get; set;}

} 
```

这是 group.cs ：

```
 public class Group
{
    [Key]
    public int idGroup { get; set; }
    public string name { get; set; } 
    public User owner { get; set; }
    public virtual ICollection<User> members { get; set; }

} 
```

我试图在我的上下文中做一个“单例”（总是在每个控制器中重用相同的上下文）但是当我这样做时，我收到“Db closed”错误消息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:03:34.080

## 初步答案

你所描述的对我来说似乎是预期的行为。

怎么了？

1.  当您登录时加载一个用户实体，并保存在会话中。但是由于跟踪用户实体的上下文对用户实体有引用，更重要的是，用户实体对上下文有引用，所以上下文不会被释放，即使你的控制器将被垃圾回收，上下文也是不是。

2.  组控制器是实例化的，它有一个单独的上下文。然后您创建一个组实体，此时该组实体还没有对上下文的引用（或相反）。所以将用户实体连接到组实体就可以了。但是，当您将组实体附加到新上下文时，上下文开始跟踪此实体以及组实体引用的所有其他实体。所以这包括用户实体。由于原始上下文也在跟踪用户实体，因此会导致异常。

我可以看到一个简单的解决方案，即当您要将用户实体连接到组实体时，使用用户实体的 id 而不是对象本身。这样，在组实体和用户实体之间不会创建任何引用，因此应该可以正常工作。

## 更新

在第二次阅读时，我发现您在组实体中没有用户 ID 属性，因此我的解决方案不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:33:48.613

问题是由`virtual`实体导航属性的关键字引起的。EF 将创建一个延迟加载代理，然后它能够​​动态加载导航属性，但要做到这一点，它需要保存对上下文的引用。当您稍后将实体附加到另一个上下文时，您会收到此异常，因为代理仍被它指向的旧上下文跟踪。

您可以通过在加载用户时禁用代理创建和跟踪来修复错误，以确保加载不再引用上下文的纯（非代理）POCO 实体：

```
public class AccountController : Controller
{
    private Context db = new Context();

    public AccountController()
    {
        db.Configuration.ProxyCreationEnabled = false;
    }

    [HttpPost]
    public ActionResult LogOn(LoginTemplate login, string returnUrl)
    {
        User result = db.Users.AsNoTracking()
            .Where(m => m.email == login.email)
            .Where(m => m.password == login.password)
            .SingleOrDefault();

        if (result != null)
        {
            Session["logged"] = true;
            Session["user"] = result;
            return RedirectToAction("Index", "Home");
        }
    }
} 
```

它将禁用整个控制器的代理和延迟加载，但是`Include`当您需要加载导航属性时，您可以将其替换为急切加载 ( )。

即使这样可以解决您的问题，在我看来，将实体存储在会话状态中仍然不是最佳做法。最好使用专门的`UserForSessionModel`类（不是数据库实体）或仅存储`Id`并在需要时从数据库重新加载用户。

**编辑**

您也可以在`Create`操作中使用“存根实体”来避免附加另一个上下文引用的加载用户：

```
var userStub = new User { userId = ((User)Session["user"]).userId };
group.owner = db.Users.Attach(userStub);
db.Groups.Add(group);
db.SaveChanges(); 
```

用户建立关系唯一需要的就是它的主键，所以这样一个只填充键的空用户就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T22:59:05.843

当我有一个缓存查找实体并从缓存中检索它们的缓存层时，我遇到了同样的错误。缓存的实体是代理实体，并且仍然具有对最初检索它们的 DBContext 的引用。

其主要症状是带有查找引用的域实体的第一次保存工作正常，但随后的保存失败。

我希望这对某人有所帮助，因为这个问题使我的生活中断了 2 天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:39:15.563

无需将 db.Users.Attach 与保存在会话状态中的 User 对象一起使用。您要保存的对象是新组，而不是用户。我的猜测是，当您调用 db.Users.Attach((User)Session["user"]) 时会引发异常，这可能表明当前用户的实体已在当前上下文中由 EF 管理。

# javascript - 预编译 js.erb 文件或加载而不预编译它

> ID：13441881
> 
> 赞同：0
> 
> 时间：2012-11-18T16:12:35.497
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我有一个愚蠢的问题：我有一个 javascript 文件，其中包含一些从 rails 中“获取”的 javascript 常量（用于所有 javascript 代码）。

代码很简单：

```
var CrossJavascriptSettings = {
  desktop_columns: <%= Rails.configuration.extjs_desktop[:icon_columns] %>,
  recaptcha_public_key: '<%= Recaptcha.configuration.public_key %>',
  tasks_icon_image: '<%= image_path('icons/Clock.png') %>',
  no_image: '<%= image_path('icons/Delete.png') %>',
  loading_image: '<%= image_path('ext-icons/loading.gif') %>',

  loading_image_preloaded: new Image().src = '<%= image_path('ext-icons/loading.gif') %>',
  no_image_preloaded: new Image().src = '<%= image_path('icons/Delete.png') %>',
  tasks_icon_image_preloaded: new Image().src = '<%= image_path('icons/Clock.png') %>',

  available_roles: <%= Rails.configuration.available_roles.each_with_index.collect { |element, index| [index, element] }.as_json %>,

  organizations_logo_path: '/assets/organizations/logos/'
}; 
```

问题是我的文件没有被预编译，这很奇怪，因为在文件内部，我使用的只是配置选项，没有数据库或类似的东西。

所以我的问题是，我该如何解决这个问题？有没有办法强制使用所需的常量编译该文件，或者有没有办法在不编译的情况下加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:39:01.287

以“另一种方式”解决。你不能这样做，你需要在你的 application.html.erb 中移动这些常量或通过 AJAX 加载它们。

# c# - 分组复选框列表值

> ID：13441882
> 
> 赞同：0
> 
> 时间：2012-11-18T16:12:38.410
> 
> 标签：c#, asp.net, visual-studio-2005

我正在使用 Visual Studio 2005，我有一个新要求，我需要根据其组将复选框列表值拆分为新行。可能吗？如果可能的话，请您提供一些细节。

更多细节：

`Datasource values:
ID value group
1 value1 1
2 value2 1
3 value3 2
4 value4 2
5 value5 1
6 value6 3
7 value7 3
8 value8 3`

在一行中显示第一组，在第二行中显示第二组，就像去一样……这可能吗？

# php - 打印所有 $matches php

> ID：13441889
> 
> 赞同：0
> 
> 时间：2012-11-18T16:14:01.763
> 
> 标签：php, foreach

由于 preg_match_all 我有以下结果

```
Array ( [0] => Array ( [0] => $9.70 [1] => $10 [2] => $11.95 [3] => $0.49 [4] => $2.95 [5] => $2.95 [6] => $2.95 [7] => $2.95 [8] => $0.49 [9] => $9.70 ) ) 
```

我试图在 foreach 循环中打印它们，但只得到第一个字符。

这是我正在尝试的：

```
$i = '0';

foreach ($matches[0] as $val) {
    echo $val[$i].'<br />';
    $i++;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:16:25.797

尝试

```
foreach ($matches[0] as $val) {
    echo $val.'<br />';

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:17:34.123

尝试

```
foreach ($matches[0] as $val) {
    echo $val.'<br />';
} 
```

您不需要`$i`in 这里因为`$val`已经包含您的数组项。如果你这样做`$val[$i]`，你正在访问字符串中的某个字符`$val`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T16:16:43.283

//打印$matches数组的所有值

```
foreach ($matches[0] as $val)
     {
        echo $val.'<br />';

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T16:19:22.983

```
foreach ($matches[0] as $val) {
    echo $val;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T16:20:49.340

在 PHP 中`foreach`的工作方式与您想象的不同。让我用下面的代码解释一下：

```
$matches = array('One', 'Two', 'Three');
foreach ($matches as $value) {
    // The following code is called once for every array item, and $value is set to that array item
    echo $value . '<br />';
} 
```

此代码提供以下输出：

```
One
Two
Three 
```

发生这种情况是因为对每个数组项调用一次 foreach 主体，并且 $value 设置为该数组项的值。使用您的代码只能看到第一个字符，因为 PHP 允许您使用数组语法从字符串中获取单个字符。长话短说，将您的代码更改为以下内容：

```
foreach ($matches[0] as $val) {
    echo $val . '<br />';
} 
```

# php - 从 Android 连接到 PHP 和 MySQL

> ID：13441891
> 
> 赞同：0
> 
> 时间：2012-11-18T16:14:03.980
> 
> 标签：php, android, mysql

我想从我的 android 应用程序连接到数据库，并找到了一个教程（[链接到教程](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)）。

当我在模拟器中使用它时它工作正常，但当我尝试在我的手机上使用它时却不行。我尝试过使用 WAMP 服务器进行端口转发，并且尝试过使用真正的网络主机（000webhost）。模拟器与手机的唯一区别是 URL，我必须提供公共 IP 地址而不是 10.0.2.2。我也尝试过使用托管 WAMP 服务器的计算机的本地 IP。我知道一些网络主机会在代码中添加广告，但我很确定 WAMP 不会这样做。

当我使用手机时，我从 LogCat 收到以下错误：

```
Error parsing data org.json.JSONException: Value <html> of type java.lang.String cannot be converted to JSONObject 
```

*更新1：*

我尝试使用 cURL 检查返回的内容。它返回很多（标题、bgcolor 等），但我认为这很有趣：

```
Access denied for user 'root'@'localhost' (using password: NO) in C:\wamp\www\android_connect\db_connect.php on line <i>28</i></th></tr> 
```

它似乎无法访问数据库，但我可能错了？

当我使用 cURL 访问 localhost 时，它会从数据库中返回正确的项目，而不是像具有公共 IP 的服务器那样返回所有 html 代码。

*更新 2：*

我解决了公共 WAMP 服务器的问题。我是个菜鸟，忘记了我用密码设置了服务器。

但是当我从浏览器使用 webhost (000webhost) 时，我仍然收到此错误：

```
PHP Error Message

Warning: require_once(__DIR__/db_connect.php) [function.require-once]: failed to open stream: No such file or directory in /home/a7471305/public_html/android_connect/get_all_products.php on line 12

Free Web Hosting

PHP Error Message

Fatal error: require_once() [function.require]: Failed opening required '__DIR__/db_connect.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/a7471305/public_html/android_connect/get_all_products.php on line 12

Free Web Hosting 
```

我从 cURL 得到这个错误：

```
<b>Fatal error</b>:  require_once() [<a href='function.require'>function.require
</a>]: Failed opening required '__DIR__/db_connect.php' (include_path='.:/usr/li
b/php:/usr/local/lib/php') in <b>/home/a7471305/public_html/android_connect/get_
all_products.php</b> on line <b>12</b><br /> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:35:51.967

我找到了解决方案。感谢所有帮助过我的人。

网络主机找不到该文件，因为我正在使用

```
require_once( __DIR__ . '/db_connect.php'); 
```

在同一文件夹中查找下一个 php 文件。相反，我应该使用：

```
define('__ROOT__', dirname(dirname(__FILE__))); 
require_once(__ROOT__.'/android_connect/db_connect.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:21:35.300

看起来您正在点击的 URI 正在返回 HTML 文档而不是 JSON。在 Web 浏览器中导航到 URI 或使用 CURL 查看它返回的内容。

正如其他几个人所提到的，PHP 可能会显示错误，或者您可能会收到 Web 服务器错误（à la 404 或 500）。

一些免费的网络主机会在 HTML 响应中注入广告，这可能会导致调试和生产之间的差异。您可能希望将 Response-Type 标头设置为 application/json 这可能会避免任何干预。

前任：

```
// This must go before any output has started, I.E. at the 
// beginning of the first loaded document
header('Content-type: application/json'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:32:21.137

当您在模拟器中有一个工作环境时，请尝试通过 WLAN 对您的手机进行相同操作。那么您之间就没有其他步骤/服务器，这可能会扭曲您的服务器响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T18:40:40.143

检查此链接。它用于登录页面。但是如果用户名和密码在 MySQL 中存在，它使用 php 和 MySql 来登录用户。当您将运行此代码并阅读它时，您可以自己编写代码以使用 php 和 mySQL 进行其他工作。它是经过测试的代码。它也适用于安卓设备。

[如何在 json 的帮助下使用 PHP、MySql 在 android 中验证用户登录凭据](https://stackoverflow.com/questions/13245771/how-to-validate-the-user-login-credentials-in-android-using-php-mysql-with-the/13248082#13248082)

# java - 在 JAVA 上加载属性文件的最佳方法是什么

> ID：13441895
> 
> 赞同：-2
> 
> 时间：2012-11-18T16:14:10.387
> 
> 标签：java, file, properties

> **可能重复：**
> [在java中读取属性文件的最佳方法？](https://stackoverflow.com/questions/5428549/best-way-to-read-properties-file-in-java)

我想知道在 JAVA 上加载 .propertie 文件的最佳方式是什么，我在这里四处张望，但找不到我所看到的。问题是加载它的最佳方式。我用它来开发游戏。

问候，米格

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T16:17:45.700

那个怎么样？

```
Properties properties = new Properties();
BufferedInputStream stream = new BufferedInputStream(new FileInputStream("example.properties"));
properties.load(stream);
stream.close();
String sprache = properties.getProperty("lang"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T16:21:04.143

```
Properties properties = new Properties();
InputStream inputStream = getClass().getResourceAsStream("foo.properties");
properties.load(inputStream);
inputStream.close(); 
```

如果 foo.properties 的文件路径与加载属性文件的类不在同一个包中，则需要更改它。例如，如果 .properties 文件位于`com.example.properties.here`其中，则将以下文件路径用于`InputStream`.

`InputStream inputStream = getClass().getResourceAsStream("/com/example/properties/here/foo.properties");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T16:47:46.950

此解决方案适用于 UTF-8 并自动发现类路径中的属性。

```
public class I18nBean {

private ResourceBundle resourceBundle;

private static I18nBean instance = new I18nBean("app"); //app.properties

public static I18nBean getInstance() {
    return instance;
}

/**
    @param propertyFileName - without extension, i.e 
    if you have app.properties, pass "app"
*/
private I18nBean(String propertyFileName) {
    resourceBundle = ResourceBundle.getBundle(propertyFileName);
}

public String get(String key) {
    try {
        String foundString = resourceBundle.getString(key);
        return convertToUTF8(foundString);
    } catch (MissingResourceException e) {
        return "";
    }
}

private String convertToUTF8(String str)  {
    try {
        return new String(str.getBytes("ISO-8859-1"), Charset.forName("UTF-8"));
    } catch (UnsupportedEncodingException e) {
        return str; //not real case
    }
} 
```

}

用法：

```
I18nBean i18nBean = I18nBean.getInstance();
i18nBean.get("application.name"); 
```

# mysql - MYSQL 和 GPL 推荐？

> ID：13441901
> 
> 赞同：5
> 
> 时间：2012-11-18T16:14:44.687
> 
> 标签：mysql, licensing, gpl, sun

我现在正在用 PHP 开发程序，并且我阅读了 GPL。我在其他地方读到过，如果我的程序甚至从 Oracle 远程连接到免费版的 MySQL 数据库，我的整个 PHP 应用程序都必须完全支持 GPL。

如果我不希望我的应用程序根据 GPL 获得许可，我唯一的选择是从 SUN 购买商业许可吗？

谁能帮助我提供以下信息来支持我的需求：

*   我想通过 GPL 以外的方式在网上分发这个应用程序，这在使用非商业版的 Oracle MySQL 时是否可行？

*   我必须连接到它并将数据保存在数据库中，例如使用 WordPress、Joomla 或 Drupal 等 CMS。

例如，如果我只有以下代码：

```
<?php
$con = mysql_connect("localhost","root","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

mysql_query("INSERT INTO X (A, B, C)
VALUES ('A', 'B','C')");

mysql_close($con);
?> 
```

它必须符合 GPL 或 GPL 吗？如果是，我是否也发布了来源？如果是，是否允许使用 Zend 或 Ioncube 对其进行加密？使用任何加密工具对此类代码（仅当其适用于 GPL 时）进行合法加密？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T06:11:23.020

是的。和不。

即使你的程序，甚至远程接触 MYSQL 数据库，它也必须在 GPL 下。除非您将它与您之前购买的商业 mysql 库一起分发。

GPL 说如果你的程序使用 GPL 库，它必须是 GPL：

[http://www.gnu.org/licenses/gpl-faq.en.html#IfLibraryIsGPL](http://www.gnu.org/licenses/gpl-faq.en.html#IfLibraryIsGPL)

> 如果一个库是在 GPL（而不是 LGPL）下发布的，这是否意味着任何使用它的软件都必须在 GPL 或 GPL 兼容许可证下？(#IfLibraryIsGPL) **是的，因为实际运行的软件包含该库。**

看看“使用它”这个短语。只有使用它就足以完成这个要求。

另外查看 SUN 许可： [http ://www.mysql.com/about/legal/licensing/oem/](http://www.mysql.com/about/legal/licensing/oem/)

**Q3：作为商业 OEM、ISV 或 VAR，我应该何时购买 MySQL 软件的商业许可证？**

> 答：OEM、ISV 和 VAR 想要在其商业应用程序中嵌入 MySQL 软件的商业二进制文件的好处，但不希望受 GPL 约束，也不希望发布其专有应用程序的源代码，应购买商业许可证来自甲骨文。购买商业许可证意味着 GPL 不适用，商业许可证包括分销商通常在商业分销协议中找到的保证。

**Q4：Oracle 对 MySQL 软件的双重许可模式是什么？**

> Oracle 在 GPL 和商业许可下提供其 MySQL 数据库服务器和 MySQL 客户端库。因此，在 GPL 下使用或分发开源应用程序的开发人员可以使用 GPL 许可的 MySQL 软件，以及不想在 GPL 许可下将 MySQL 软件与他们自己的商业软件组合或分发的 OEM、ISV 和 VAR可以购买商业许可证。

以其他方式，该条款的意义是什么？

这与网络托管可以拥有一些许可证无关，不，网络托管不分发使用 mysql 的网络托管环境，因此它不适用。

还有谁知道我想在哪里安装程序，在本地主机上还是在共享网络上？

如果您不想在 GPL 下使用它，您必须从 SUN/Oracle mysql 购买商业许可证，并使用这些单独的库分发您的程序。

**这里是 PHP。** 如果你用 PHP 开发程序，那么答案是：

**不**

它不一定是 GPL。为什么 ？因为 PHP 在 FOSS 列表中 [http://www.mysql.com/about/legal/licensing/foss-exception/](http://www.mysql.com/about/legal/licensing/foss-exception/)

所以你的问题有2个答案：

1.YES - 如果它直接接触 mysql 2.No 如果它使用 PHP 作为层来做它。

所以对你来说，在这个特定的 PHP 案例中，它是 NO，你的 php 软件不必是 GPL。

# java - Windows 用户配置文件和 Java

> ID：13441903
> 
> 赞同：2
> 
> 时间：2012-11-18T16:14:54.083
> 
> 标签：java, windows, maven, environment-variables

我正在使用 Maven，它将本地存储库存储在用户主文件夹下。
我决定将我的用户配置文件从 移动`C:\Users\Dany`到`D:\Users\Dany`以节省我的 SSD 磁盘空间。我还更改了 Windows 注册表中的几个键。
一切正常，但 Maven 仍将工件保存到`C:\Users\Dany\.m2\repository`.

我**知道**如何在`settings.xml`.
但是有人可以解释 Maven 的行为吗？

PS
IntelliJ IDEA 还将其数据保存到`C:\Users\Dany\.IntelliJIdea11`.

**UPD**
`System.getProperty("user.home");`返回`C:\Users\Dany`。

**Windows 命令行中的UPD2**
`set USERPROFILE`表示`USERPROFILE=D:\Users\Dany`。

**UPD3**
问题是关于 Java 如何获取用户主文件夹位置，而不是关于如何设置 Maven 存储库位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T09:54:37.297

在 Windows 上，Java 从注册表中获取 user.home 属性：HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\Desktop 然后它会删除最后一个文件夹。

例如：%userprofile%\Desktop => %userprofile%

这（将）在 Java 8 中修复。

在此之前，解决方案是将其添加到环境变量中：
_JAVA_OPTIONS:-Duser.home=%HOMEDRIVE%%HOMEPATH%

或在命令行中：设置 _JAVA_OPTIONS=-Duser.home=%HOMEDRIVE%%HOMEPATH%

我在此页面的评论中看到了解决方案： [http ://www.timehat.com/javas-user-home-is-wrong-on-windows/](http://www.timehat.com/javas-user-home-is-wrong-on-windows/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:34:26.173

我得到了这个问题。只是遇到完全相同的问题。[我在这里](http://www.timehat.com/javas-user-home-is-wrong-on-windows/)找到了答案，然后我也找到了相关的[错误条目](http://bugs.sun.com/view_bug.do?bug_id=4787931)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:04:47.407

首先，您需要更新主文件夹中*settings.xml中的*[<localRepository> 设置。](http://maven.apache.org/settings.html#Simple_Values)

 *接下来，您需要更新*M2_REPO*环境变量以指向新位置。您可能还需要为单个[Eclipse 项目](http://maven.apache.org/guides/mini/guide-ide-eclipse.html#Maven_2_repository)设置它，方法是使用 maven 本身或从 Eclipse 设置中设置环境变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T16:23:30.467

将 settings.xml 文件放入 D:\Users\Dany.m2\ 并将类似的内容放入您的 settings.xml

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <localRepository>D:/WhatEverLocationYouWant</localRepository

</settings> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T07:48:05.787

如果您在两个分区上都有 NTFS，您可以创建一个从 D:\Users\Dany 到 C:\Users\Dany 的符号链接。软件不会有任何区别。*

# memory-leaks - timer.performWithDelay 导致内存泄漏

> ID：13441905
> 
> 赞同：0
> 
> 时间：2012-11-18T16:15:03.010
> 
> 标签：memory-leaks, coronasdk

我不确定为什么下面的示例代码没有释放所有计时器内存。它从大约 133kb 开始，如果您点击屏幕，它会创建 10,000 个计时器。运行后，应将其清理干净。但是，在删除所有计时器后，它会稳定在大约 389kb。

我错过了什么吗？

```
local timersFired = 0
local timers = {}
local maxTimers = 10000

Runtime:addEventListener("touch", function(e)
    if(e.phase == "began") then
        print("TIMERS CREATED")
        timers = {}
        for i=1,maxTimers do
            table.insert(timers, timer.performWithDelay(3000, function(e)
                timersFired = timersFired + 1
            end, 1))
        end
    end
end)

Runtime:addEventListener("enterFrame", function(e)
    if(timersFired == maxTimers) then
        print("KILLED TIMERS")
        for i=1,maxTimers do
            local aTimer = timers[i]
            timer.cancel(aTimer)
            timers[i] = nil
        end

        timers = nil
        timersFired = 0
    end

    collectgarbage("collect")
    print( "MemUsage: " .. collectgarbage("count") )
end) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:54:15.613

也许不是您唯一的问题，但删除计时器的 for 循环只会删除其中的一半。

循环从`1 to #timers`. 第一次通过，`i`是 1，它删除了第一个计时器。第二次，`i`递增到 2，但同时数组中的元素向下移动，因此代码跳过计时器 #2，并继续删除最初的计时器 #3。等等。

最终结果是您只从计时器数组中的奇数位置删除计时器，而其中一半仍在占用内存。

`while (#timers > 0) do`循环会更好，或者`for i = #timers, 1, -1 do`每次都删除最后一个计时器的循环。

您可以通过只创建 10 个计时器来验证这是否是问题的一部分。打印“created”作为创建的每个，并打印“deleted”作为每个被销毁。您应该看到 10 次创建和 10 次删除。（我想你只会看到 5 次删除。）

# android - 如何处理 BackupHelper 和 SQLites 附加文件

> ID：13441906
> 
> 赞同：2
> 
> 时间：2012-11-18T16:15:04.803
> 
> 标签：android, sqlite, backup

我目前正在为我的 Android 应用程序的数据库开发一个 BackupHelper。该方法`Context.databaseList()`报告了属于我的应用程序的所有数据库的名称。但除了主要的 SQLite 数据库文件（例如）之外，我确实遇到了很多额外的文件：

*   数据库.db
*   database.db-期刊
*   数据库.db-shm
*   数据库.db-wal

所有 Android 文档都讲述了每个数据库有一个数据库文件，但这些信息似乎已经过时了。

使用 BackupHelper 存储所有这些文件是否可以保存？

恢复后 SQLite 是否可以在所有 Android 平台上使用这些文件？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:29:15.487

做了一些谷歌搜索，发现了一些关于其他文件的信息：

> database.db-期刊

默认情况下，SQLite 在事务开始时创建日志文件，这是一件好事。通常它会在提交时删除文件。

您可以通过 PRAGMA sql 命令更改此行为以简单地截断文件（无需创建/删除）或将其归零。您的 SQLite 版本可能不支持所有选项。

```
PRAGMA journal_mode = DELETE | TRUNCATE | PERSIST | MEMORY | OFF 
```

写入操作通常在您提交之前不会完成，这是通过截断、删除或使日志无效来实现的。

如果这种行为是新的，我无法解释为什么它可能会改变，除了可能是 SQLite 的升级改变了默认行为，或者通过不为每个事务重新打开日志而变得更加复杂。

[资源](https://stackoverflow.com/questions/633274/what-causes-a-journal-file-to-be-created-in-sqlite)

> 数据库.db-shm 数据库.db-wal

这些是 SQLite 创建的临时文件。如果您手动删除主数据库，您可能也应该删除这些。据我所知，WAL 是回滚日志的替代品，它使 SQLite 能够在事务失败时回滚更改。SQLite 如何使用它们以及为什么它们存在这么长时间取决于 SQLite 的作者，但总的来说 SQLite 看起来非常坚如磐石，所以我不会太担心它们。有关更多信息，请查看此处：

[http://www.sqlite.org/fileformat2.html#walindexformat](http://www.sqlite.org/fileformat2.html#walindexformat)

这些文件是 SQLite 3.7 的一个新特性。

[资源](https://stackoverflow.com/questions/7778723/what-are-the-db-shm-and-db-wal-extensions-in-sqlite-databases)

希望有帮助...

# java - 一个类可以同时实现观察者设计模式的主题部分和观察者部分吗？

> ID：13441918
> 
> 赞同：1
> 
> 时间：2012-11-18T16:15:59.743
> 
> 标签：java, observer-pattern

我正在为 java 设计一个敌人框架并与观察者一起工作。我想知道这是否可能 | 值得努力让一个类在 Java 中同时实现观察者和主题吗？

我想要一个实现主体和观察者的敌人界面，以便在看到玩家或敌人时，彼此一定距离内的敌人可以互相警告。

这里有更好的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:43:16.337

我认为其中一种模式比观察者模式更适合使用，具体取决于您实际上希望如何实现您的框架：

*   [隐式调用](http://en.wikipedia.org/wiki/Implicit_invocation)
*   [事件驱动](http://en.wikipedia.org/wiki/Event-driven_architecture)
*   [发布-订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)

主题/观察者的问题在于，当您的敌人移入/移出彼此的范围时，它们涉及注册/取消注册。

我建议隐式调用或事件驱动如下：

*   每次敌人看到玩家时，都会生成一个“事件”，并广播给所有其他敌人。
*   这个事件将有一个坐标来指定它是从哪里广播的。
*   对于每个收到事件的敌人（就是所有的），查看坐标，看看它是否在自身的一定范围内
    *   如果没有，请忽略它（并假装它从未听说过）
    *   如果是这样，请按要求做一些事情。

# html - 垂直列表（从水平返回默认值）

> ID：13441924
> 
> 赞同：2
> 
> 时间：2012-11-18T16:16:52.767
> 
> 标签：html, css, list

我的列表是浮动的，我正在使用一些重置 css，所以它是水平的。如何再次使其成为垂直列表？谢谢！

PS我一直在寻找答案半小时，找不到相关文章。

```
<div id="nav_side-container">
 <div id="nav_side">
 <ul class="nav_side-list">
 <li>Home</li>
 <li>Professional</li>
 <li>Enterprise</li>
 <li>Service Providers</li>
 <li>Security</li>
 <li>Pricing</li>
 </ul>
 </div>
</div>

/*Fixed Container*/
#nav_side-container {
     position:fixed;
     width: 100%;
     top: 200px;
}

/*960 wide*/
#nav_side{
     margin:0 auto;
     width:960px;
}

/*Move list right side of 960*/
.nav_side-list {
     float:right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:21:02.150

尝试

```
.nav_side-list{
width:youwant;
}

ul.nav_side-list li{
width:100%;  

} 
```

# jquery - 显示（）隐藏（）复选框：jQuery

> ID：13441933
> 
> 赞同：1
> 
> 时间：2012-11-18T16:17:49.990
> 
> 标签：jquery, hide, show

我想根据 Dropdown(course_english) 列表的值显示和隐藏一个复选框(sem_1_ma_english)。

当我从 DROPDOWN 列表中选择一个值时，应该显示 CHECKBOX，否则不显示。

Html结构：对于复选框

```
<div class="form-row">
<label for="sem_1_ma_english">
   Semester I – Subjects for M. A. English
<span class="helptext"></span>
</label>
<label for="sem_1_ma_english-poetry">
<input id="sem_1_ma_english-poetry" class="" type="checkbox" checked="yes" value="Poetry" name="sem_1_ma_english[]">
 Poetry
</label>
<label for="sem_1_ma_english-drama">
<input id="sem_1_ma_english-drama" class="" type="checkbox" checked="yes" value="Drama"  name="sem_1_ma_english[]">
Drama
</label>
<label for="sem_1_ma_english-fiction">
<input id="sem_1_ma_english-fiction" class="" type="checkbox" checked="yes" value="Fiction" name="sem_1_ma_english[]">
Fiction
</label>
<label for="sem_1_ma_english-prose">
<input id="sem_1_ma_english-prose" class="" type="checkbox" checked="yes" value="Prose"  name="sem_1_ma_english[]">
Prose
</label>
</div> 
```

所以我使用了这段代码来解决问题

```
$("#course_english").change(function() {
    if ($("#course_english").val() == "MA English") {
        $("#sem_1_ma_english").parent().show();
    } else {
        $("#sem_1_ma_english").parent().hide();
        $("#sem_1_ma_english").val('');
    }
}); 
```

但遗憾的是它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:23:34.693

对于您的问题，请检查此 jsbin：http: [//jsbin.com/ujuxiy/1/edit](http://jsbin.com/ujuxiy/1/edit)

如果这是您的 html：

```
<select id="course_english" class="" name="course_english"> 
    <option value="">--Select One--</option> 
    <option value="MA English">MA English</option> 
    <option value="B. A. (Hons.) with Mass Communication">B.A. (Hons.) with Mass Communication</option> 
    <option value="M. A. (English)">M. A. (English)</option> <option value="M. Phil.">M. Phil.</option> 
</select>

  <div class="form-row">
  <label for="sem_1_ma_english">
      Semester I – Subjects for M. A. English
      <span class="helptext"></span>
  </label>
  <label for="sem_1_ma_english-poetry">
      <input id="sem_1_ma_english-poetry" class="sem_1_ma_english" type="checkbox"     checked="yes"      value="Poetry" name="sem_1_ma_english[]">
Poetry
 </label>
 <label for="sem_1_ma_english-drama">
  <input id="sem_1_ma_english-drama" class="sem_1_ma_english" type="checkbox" checked="yes"     value="Drama"  name="sem_1_ma_english[]">
Drama
</label>
 <label for="sem_1_ma_english-fiction">
  <input id="sem_1_ma_english-fiction" class="sem_1_ma_english" 
   type="checkbox" checked="yes" value="Fiction" name="sem_1_ma_english[]">
  Fiction
 </label>
 <label for="sem_1_ma_english-prose">
 <input id="sem_1_ma_english-prose" class="sem_1_ma_english" type="checkbox" checked="yes"      value="Prose" name="sem_1_ma_english[]">
 Prose
</label></div> 
```

那么这应该是你的jQuery：

```
 $(function(){
    $(".form-row").hide();
       $("#course_english").change(function() {
         if ($("#course_english").val() == "MA English") {
             $(".form-row").show();
         } else {
            $(".form-row").hide();
         }
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:34:03.807

试试这个
**HTML**

```
<div class="form-row">
<label for="sem_1_ma_english">
Semester I – Subjects for M. A. English
<span class="helptext"></span>
</label>
<label for="sem_1_ma_english-poetry">
<input id="sem_1_ma_english-poetry" class="sem_1_ma_english" type="checkbox" checked="yes"      value="Poetry" name="sem_1_ma_english[]">
Poetry
</label>
<label for="sem_1_ma_english-drama">
<input id="sem_1_ma_english-drama" class="sem_1_ma_english" type="checkbox" checked="yes"     value="Drama"  name="sem_1_ma_english[]">
Drama
</label>
<label for="sem_1_ma_english-fiction">
<input id="sem_1_ma_english-fiction" class="sem_1_ma_english" 
type="checkbox" checked="yes" value="Fiction" name="sem_1_ma_english[]">
Fiction
</label>
<label for="sem_1_ma_english-prose">
<input id="sem_1_ma_english-prose" class="sem_1_ma_english" type="checkbox" 
 checked="yes"      value="Prose"  
 name="sem_1_ma_english[]">
 Prose
</label> 
```

并且 jQuery 代码应该是这样的

```
$("#course_english").change(function() {
   if ($("#course_english").val() == "MA English") {
       $(".sem_1_ma_english").parent().show();
   } else {
       $(".sem_1_ma_english").parent().hide();
       $(".sem_1_ma_english").val('');
   }
}); 
```

试试这个，这对我有用，对你有用....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T11:29:19.933

您是否尝试过使用“toggle()”方法？我更喜欢交替“显示”和“隐藏”。此方法适用于点击事件，但我没有尝试过选择值。

例如

```
 $(".sem_1_ma_english").parent().show(); //Shows initially
      if ($("#course_english").val() == "MA English") {
        $(".sem_1_ma_english").parent().toggle();
      };    
    }); 
```

# python - 将每个 var 输入写入文本文件的新行

> ID：13441934
> 
> 赞同：2
> 
> 时间：2012-11-18T16:18:06.993
> 
> 标签：python

我想知道如何将这个 irc 'bot' 记录到文本文件中。

我用了：

```
 text_file = open("log.txt", "w")
  text_file.write(ircmsg +"\r\n")
  text_file.close() 
```

问题是这段代码会使新输入覆盖文本文件，而我希望每个新输入在同一个文本文件中都有一个新行。

（我知道互联网上有“制作机器人”，但我更喜欢自己制作。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:20:35.693

您正在以“写入”模式打开文件，每次以“附加”模式打开时都会覆盖文件，即使用此处`'a'`而不是`'w'` 更多详细信息[http://docs.python.org/2/tutorial/inputoutput.html#reading-and-写入文件](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)

# java - 如何使用 Infonode 库将生成的动态视图添加到根窗口？

> ID：13441935
> 
> 赞同：0
> 
> 时间：2012-11-18T16:18:08.227
> 
> 标签：java, jpanel, frame, dockpanel

我在使用 infonode 对接库时遇到问题。我根据提供的示例创建了根窗口、动态视图方法。只是稍微修改了一下，然后尝试使用它。但我已经阅读了 infonode 提供的文档和用户手册。但是 coludnt 找到了一种将动态视图添加到根窗口的方法。

这是一个示例代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.HashMap;

import javax.sound.sampled.ReverbType;
import javax.swing.*;

import net.infonode.docking.*;
import net.infonode.docking.drag.DockingWindowDragSource;
import net.infonode.docking.drag.DockingWindowDragger;
import net.infonode.docking.drag.DockingWindowDraggerProvider;
import net.infonode.docking.util.DockingUtil;
import net.infonode.docking.util.MixedViewHandler;
import net.infonode.docking.util.ViewMap;

public class DockTrial extends JFrame
{

    JMenuBar menuBar;
    JMenu fileMenu;
    JMenuItem fMI;
    int counter=0;
    CustomRootWindow cRootWin;

     private static final int ICON_SIZE = 8;
    /**
       * Contains the dynamic views that has been added to the root window
       */
      private HashMap dynamicViews = new HashMap();

      /**
       * The one and only root window
       */
      private RootWindow rootWindow;

      /**
       * Contains all the static views
       */
      private ViewMap viewMap = new ViewMap();

      /**
       * An array of the static views
       */
      private View[] views = new View[3];

      /**
       * A dynamically created view containing an id.
       */
      private static class DynamicView extends View {
        private int id;

        /**
         * Constructor.
         *
         * @param title     the view title
         * @param icon      the view icon
         * @param component the view component
         * @param id        the view id
         */
        DynamicView(String title, Icon icon, Component component, int id) {
          super(title, icon, component);
          this.id = id;
        }

        /**
         * Returns the view id.
         *
         * @return the view id
         */
        public int getId() {
          return id;
        }
      }

    public DockTrial()
    {
        setSize(500,500);
        setTitle("Docktrial");
        setVisible(true);
        setLayout(new BorderLayout());
        add(menuBarr());
        setJMenuBar(menuBar);
        createComponents();
        assignfunctions();
        add(createToolBar(),BorderLayout.BEFORE_FIRST_LINE);
        getContentPane().add(rootWindow, BorderLayout.CENTER);

    }

    public void createComponents()
    {
         // Create the views
        for (int i = 0; i < views.length; i++) {
          views[i] = new View("View " + i, VIEW_ICON, createViewComponent("View " + i));
          viewMap.addView(i, views[i]);
        }

        // The mixed view map makes it easy to mix static and dynamic views inside the same root window
        MixedViewHandler handler = new MixedViewHandler(viewMap, new ViewSerializer() {
          public void writeView(View view, ObjectOutputStream out) throws IOException {
        out.writeInt(((DynamicView) view).getId());
          }

          public View readView(ObjectInputStream in) throws IOException {
        return getDynamicView(in.readInt());
          }
        });

        rootWindow = DockingUtil.createRootWindow(viewMap, handler, true);
    }

    public void assignfunctions()
    {
    fMI.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
        /*  FloatingWindow fw = rootWindow.createFloatingWindow(new Point(50, 50),
                new Dimension(300, 200),
                getDynamicView(getDynamicViewId()));

                // Show the window
                fw.getTopLevelAncestor().setVisible(true);
                fw.isDockable();*/

                /*getDynamicView(getDynamicViewId()).dock();
                rootWindow.revalidate();*/
        }
    });
    }

     /**
       * Creates the frame tool bar.
       *
       * @return the frame tool bar
       */
      private JToolBar createToolBar() {
        JToolBar toolBar = new JToolBar();
        JLabel label = new JLabel("Drag New View");
        toolBar.add(label);
        new DockingWindowDragSource(label, new DockingWindowDraggerProvider() {
          public DockingWindowDragger getDragger(MouseEvent mouseEvent) {

        return getDynamicView(getDynamicViewId()).startDrag(rootWindow);
          }
        });
        return toolBar;
      }

     /**
       * Returns a dynamic view with specified id, reusing an existing view if possible.
       *
       * @param id the dynamic view id
       * @return the dynamic view
       */
      private View getDynamicView(int id) {
        View view = (View) dynamicViews.get(new Integer(id));

        if (view == null)
          view = new DynamicView("Dynamic View " + id, VIEW_ICON, createViewComponent("Dynamic View " + id), id);

        return view;
      }

    /**
       * Returns the next available dynamic view id.
       *
       * @return the next available dynamic view id
       */
      private int getDynamicViewId() {
        int id = 0;

        while (dynamicViews.containsKey(new Integer(id)))
          id++;

        return id;
      }

    /**
       * Returns a dynamic view with specified id, reusing an existing view if possible.
       *
       * @param id the dynamic view id
       * @return the dynamic view
       */
      private View getDynamicView(int id ,String t) {
        View view = (View) dynamicViews.get(new Integer(id));

        if (view == null)
          view = new DynamicView("Dynamic View " + id + t, VIEW_ICON, createViewComponent("Dynamic View " + id), id);

        return view;
      }

      /**
       * Creates a view component containing the specified text.
       *
       * @param text the text
       * @return the view component
       */
      private static JComponent createViewComponent(String text) {
        StringBuffer sb = new StringBuffer();

        for (int j = 0; j < 100; j++)
          sb.append(text + ". This is line " + j + "\n");

        return new JScrollPane(new JTextArea(sb.toString()));
      }

      /**
       * Custom view icon.
       */
      private static final Icon VIEW_ICON = new Icon() {
        public int getIconHeight() {
          return ICON_SIZE;
        }

        public int getIconWidth() {
          return ICON_SIZE;
        }

        public void paintIcon(Component c, Graphics g, int x, int y) {
          Color oldColor = g.getColor();

          g.setColor(new Color(70, 70, 70));
          g.fillRect(x, y, ICON_SIZE, ICON_SIZE);

          g.setColor(new Color(100, 230, 100));
          g.fillRect(x + 1, y + 1, ICON_SIZE - 2, ICON_SIZE - 2);

          g.setColor(oldColor);
        }
      };

    public JMenuBar menuBarr()
    {
        menuBar = new JMenuBar();
        fileMenu = new JMenu("File");
        fMI = new JMenuItem("New Tab");
        fileMenu.add(fMI);
        menuBar.add(fileMenu);
        return menuBar;
    }

    public static void main(String[] args)
    {
        new DockTrial();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T07:43:57.603

我也在评估这个框架。答案是使用 DockingUtil.addwindow。这是示例。

```
 public TestFrame() {
        super("Test Dock");
        rw = new RootWindow(null);
        JMenu mu = new JMenu("File");
        JMenuItem mi = new JMenuItem("Add Dock");
        mi.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                View vw = new View("Dock", null, new JLabel("test"));
                DockingUtil.addWindow(vw, rw);
            }
        });
        JMenuBar mb = new JMenuBar();
        mu.add(mi);
        mb.add(mu);
        this.setJMenuBar(mb);
        this.setLayout(new BorderLayout());
        this.add(rw);

    } 
```

# python - 在python中转换用户输入

> ID：13441936
> 
> 赞同：2
> 
> 时间：2012-11-18T16:18:10.080
> 
> 标签：python, string, format, coordinates

如何将用户输入转换`go 30,45`为`go(30,45)`？

到目前为止，我有：

```
input = "go 30,45"
output = re.sub(r'go (\d+)', r'go(\1,\1)', input) 
```

但是这似乎不起作用，我知道它可能归结为 (\1,\1) 但我可以改变什么来获得所需的输出？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:21:39.480

尝试这个：

```
inpt = "go 30,45"
output = re.sub(r'go (\d+,\d+)', r'go(\1)', inpt)  # 'go(30,45)' 
```

请注意，您应该避免将`input`其用作变量名，因为它已被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:28:51.583

您可以使用`re`@ARS 演示的方法来执行此操作，但在这种情况下，我可能只使用 str 内置方法...

```
'{0}({1})'.format(*"go 30,45".split()) 
```

# javascript - 具有多个 DOMContentLoaded 事件组织的不显眼的纯 Javascript

> ID：13441937
> 
> 赞同：0
> 
> 时间：2012-11-18T16:18:19.303
> 
> 标签：javascript, unobtrusive, domcontentloaded

也许这是一个愚蠢的问题，但我对 JavaScript 很困惑。我使用尽可能不显眼的 JavaScript 来遵循[这个代码组织。](http://www.dustindiaz.com/namespace-your-javascript/)我在 Ruby on Rails 中建立了一个使用 Google Maps 的网站。

我的场景：假设我有一个非常庞大的网站，在其中的不同页面中，我需要启动 JavaScript 脚本来执行一些操作。

一个问题是，无论用户访问哪个页面，我都必须将我网站的所有 JavaScript 代码添加到用户的浏览器中。例如，假设我有使用大量 JavaScript 代码的页面 A 和使用一些微小 JavaScript 代码的页面 B。据我了解，在页面 B 中，用户必须检索所有 JavaScript 代码（即，对于页面 A 和 B）。这不是有点不切实际吗？

更重要的是，对于这两个页面，JavaScript 都是由`document.addEventListener("DOMContentLoaded", function, false);`函数发起的。但是，A页面的功能假设有一个名为“pageA”的div（作为参考，以便通过js脚本修改或添加元素），同样页面B的功能假设有一个名为“ B 页”。因此，当我在页面 BI 上时收到没有“pageA”元素的 js 错误。我怎样才能避免这种情况？

鉴于这样一个事实，对于每个页面，我必须使用我的整个 JavaScript 代码（即所有页面）加载用户，我该如何启动（即在页面加载时立即启动，而不是在用户事件发生后立即启动）页面没有任何此类错误的特定 JavaScript 代码？我真的很困惑！

Wooho 非常快速的响应**thanx**伙计们！但我从未说过我将整个 js 代码写在 1 个单个文件中。相反，我使用了 RoR 的组织！（顺便说一句，将所有文件组合成一个文件）。为了澄清我的问题，我在不同的文件中启动了页面 A 的事件和页面 B（或 C 等）的事件。一旦 DOMContentLoaded 事件发生，代码就会触发。但是，当用户在页面 B 上时，**我不想触发页面 A 的事件**。或者类似地，我只想为页面 B 加载 js（这样页面 A 就不会触发任何事件）。我怎样才能做到这一点？

PS：如果您觉得有更好的标题，请随时提出建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:33:31.950

如果您将 Javascript 代码保存在单个文件中，则当用户请求您网站的第一页时，它只需加载一次（甚至可能编译一次，请参阅[此内容）。](https://stackoverflow.com/questions/1096907/do-browsers-parse-javascript-on-every-page-load)然后浏览器将使用缓存副本，除非您禁止缓存（网络服务器的错误配置可以做到这一点）。

当您执行（JQuery）之类的操作时：

```
$('#nosuchid').something(); 
```

或者例如

```
$('.nosuchclass').each(function(i, el) { ... }); 
```

如果您的标记中不存在匹配的元素，则不会出现错误且无效。如果你使用，比如说，如果没有元素匹配`document.getElementById()`，它将返回`null`，你将不得不处理这种情况。如果您正确执行此操作，则不会出现任何错误。

正如您可以想象的那样，被跳过的代码并不需要时间来执行，因此也没有理由期待性能问题。

# compression - 如何识别压缩/未压缩位组？

> ID：13441939
> 
> 赞同：2
> 
> 时间：2012-11-18T16:18:49.940
> 
> 标签：compression, byte, bit, delimiter

我正在使用一个静态字典文件，其中包含一些单词和这些单词的值。这些值不是固定大小的，例如`the`is `1`、`love`is `01`、`kill`is`101`等。当我尝试压缩一组单词时，我会遍历每个单词并查找字典是否存在该单词的值。如果存在，我用值更改单词，如果不存在，我将单词编码为字节。压缩后我得到了一大块位，因为这些字典值和未压缩的单词不是固定大小的，我无法对这些位进行分组和解码。

我曾考虑对每组位使用 1 位标志来确定它是压缩的还是未压缩的，但由于代码字或常规字的长度未知，我无法检测到标志位。

如果我使用 1 字节分隔符，它仍然有问题。假设我的分隔符是`00000000`，在分隔符之前我有分隔符`100`，在分隔符之后有`001`，所以我们有`10000000000001`，我怎么知道这些位中的哪一组是我的分隔符？我可以使用其他方法对这些压缩/未压缩位进行分组以对其进行解码吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:20:48.220

首先，您打算部署什么语言和系统？许多语言都提供了自己的压缩库和工具，并且可以满足您的需求，而无需进行主要的低级设计工作。

这里的答案是建立一些更严格的簿记和文件格式，以便能够撤消压缩。大多数压缩系统的文件格式都有一定的开销，这就是为什么当你压缩两次时，你不一定会保存任何东西，实际上会增加文件的大小。

文件通常利用文件开头的标题来提供关键信息。这将是定义特定于压缩文件的任何规则的好地方。

1.  创建固定大小的分隔符，仅在代码字之间使用。这可以在分析文件之后但在实际写出压缩数据之前确定。
2.  如果您生成分隔符而不是固定的已知值，请将其作为标题项之一。
3.  将您的标题保持为简单的 ascii 格式，以便您可以使用 sscanf 和 fscanf 等标准工具轻松提取它。
4.  如果您想要一个可以包含额外信息的标题，您可能需要一种一致的方式来判断标题的结束位置和数据的开始位置。包括一些具有“ENDHEADER”效果的东西就足够了，而且仍然很容易识别。

# ios - 是否有在 iOS 6 UITextField 中从右到左输入文本的内置方法？

> ID：13441940
> 
> 赞同：1
> 
> 时间：2012-11-18T16:18:53.310
> 
> 标签：ios, uitextfield

例如，如果我想输入 12345：
       5
     45
    345
  2345
12345

我可以尝试创建自己的方法来做到这一点，但我想知道是否有内置的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:26:50.880

有几种方法可以做到这一点。`NSTextAlignmentRight`可能会满足您的需求：

```
[myTextField setTextAlignment:NSTextAlignmentRight]; 
```

但也有`setBaseWritingDirection:UITextWritingDirectionRightToLeft`。（没有测试过这个我不在我的电脑上）

```
[myTextField setBaseWritingDirection:UITextWritingDirectionRightToLeft forRange:[myTextField textRangeFromPosition:[myTextField beginningOfDocument] toPosition:[myTextField endOfDocument]]]; 
```

# vb.net - How to remove a default text in textbox on click in VB?

> ID：13441947
> 
> 赞同：0
> 
> 时间：2012-11-18T16:19:39.753
> 
> 标签：vb.net, textbox, click

I have this code so far for one textbox:

```
Private Sub Pop1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Pop1.TextChanged
    If String.IsNullOrEmpty(Pop1.Text) Then Pop1.Text = "0,00"
End Sub 
```

I googled there's a need of GotFocus in Handles, but don't know how to do it. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:12:05.800

Remember that a user might use the tab key to enter or leave the TextBox, so perhaps you want something more like

```
Private Sub Pop1_Leave(sender As Object, e As EventArgs) Handles Pop1.Leave
    If Pop1.Text = "" Then
        Pop1.Text = "0,00"
    End If
End Sub

Private Sub Pop1_Enter(sender As Object, e As EventArgs) Handles Pop1.Enter
    Pop1.Text = ""
End Sub 
```

You can see the events which are available for a control by selecting it in the designer and looking at the properties pane - click the yellow lightning button to see the events.

# java - 正则表达式仅在所需字符串之前未直接包含字符时才匹配

> ID：13441952
> 
> 赞同：10
> 
> 时间：2012-11-18T16:20:27.753
> 
> 标签：java, regex

我正在尝试解决[这个 CodingBat 问题](http://codingbat.com/prob/p136594)：

> 如果给定字符串包含“xyz”的外观，其中 xyz 没有直接以句点 (.) 开头，则返回 true。所以“xxyz”很重要，但“x.xyz”没有。
> 
> xyzThere("abcxyz") → 真
> xyzThere("abc.xyz") → 假
> xyzThere("xyz.abc") → 真

我正在尝试用正则表达式解决这个问题，但我不确定如何处理`where the xyz is not directly preceeded by a period`需求。

我对没有约束的问题的解决方案是：

```
public boolean xyzThere(String str) {
    return str.matches(".*xyz.*");
} 
```

知道如何用正则表达式处理上述约束吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T16:23:26.997

否定字符类应该可以解决问题：`str.matches(".*(?:^|[^.])xyz.*")`

在这里，我们使用非捕获组`(?:^|[^.])`来确保我们在字符串的开头匹配`^`，或者在不是句点的任何位置匹配`[^.]`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T16:32:41.463

我个人使用了这个解决方案，但还有很多其他变体：

```
str.matches("(.*[^.])?xyz.*") 
```

我只是确保如果 前面有任何内容`xyz`，则句点`.`不会紧随其后。

您还可以编写一个后视解决方案：

```
str.matches(".*(?<!\\.)xyz.*"); 
```

`(?<! )`部分是消极的后视，`\\.`（字面意思）是我们要检查的模式。

# menu - Dreamweaver Spry 菜单垂直导航

> ID：13441954
> 
> 赞同：0
> 
> 时间：2012-11-18T16:20:34.380
> 
> 标签：menu, dreamweaver, spry

我无法以这种格式设置菜单：

菜单 1 子菜单 1.1 子菜单 1.1.1

不知何故，我改变了一些设置，它看起来像这样：

```
Menu1 
     SubMenu1.1
               Submenu 1.1.1 
```

我怎样才能让它回到一个完整的水平子菜单？

# asp.net-mvc - 类似于表单的 ASP.NET MVC 控件

> ID：13441958
> 
> 赞同：0
> 
> 时间：2012-11-18T16:20:52.833
> 
> 标签：asp.net-mvc, modularity

首先让我说，我已经启动了我的第一个 ASP.NET MVC (4) 应用程序。在此之前，我是一名表单开发人员。我喜欢 MVC 概念，尽管我还没有完全理解。

在 ASP 表单时代，我们可以创建一个控件来封装并再次使用它。我还不知道 MVC 中哪个元素是相似的。我创建了一个查看用户控件，但没有代码隐藏文件..

能给我举个例子？

最好的问候帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:28:37.593

我不是很肯定，但也许你可能对[Partial Views](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)感兴趣。这是一篇关于[可重用 UI 组件的文章](http://ofps.oreilly.com/titles/9781449320317/ch_ReusableUI.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:42:44.763

尝试使用剃须刀助手而不是用户控件，请参阅此链接以获取详细信息。[http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)

即使在博文中讨论了 MVC3，也无需担心。在 MVC4 中没有改变

# javascript - 重置后退按钮上的表单（野生动物园）

> ID：13441963
> 
> 赞同：0
> 
> 时间：2012-11-18T16:21:14.070
> 
> 标签：javascript, jquery, html, forms, validation

当用户单击后退按钮时，我正在尝试重置表单。这是我使用的代码。

```
<input type="text" name="name">
<input type="text" name="email>
...
$(function() {
   $('input[type=text]').attr('val', '');
}); 
```

此代码不适用于 Safari 6.0.2。我注意到当用户单击后退按钮时甚至没有触发页面加载事件。

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:22:30.870

没有`val`属性。请改用以下[`val`](http://api.jquery.com/val/)方法：

```
$(function() {
   $('input[type=text]').val('');
}); 
```

而且，您错过了`email`现场的报价：

```
<input type="text" name="email>
                              ^ Insert a quote here 
```

# c# - 通过子列表 LINQ C# 中的值区分行

> ID：13441964
> 
> 赞同：0
> 
> 时间：2012-11-18T16:21:14.837
> 
> 标签：c#, linq, sorting, syntax, distinct

我想使用 LINQ 语法从子列表中删除重复行的值。下面我附上了以不同方式执行此操作的代码。

xxxxx xxxxxx xxxxxx xxxxxxxxxxx xxxxxxxxxxxxxx xxxxxxxxxxxx xxxxxxxxx xxxxxxxxxxxxxxxxxx

```
List<ZRowCollection> zListCollection = new List<ZRowCollection>();
        zListCollection = zListCollection.OrderBy(p => p.P).ToList();
        int i1 = 1;
        foreach (var item in zListCollection.ToList())
        {
            var subList1 = item.XRowModified.Select(p => p).ToList();
            foreach (var item2 in zListCollection.Skip(i1).ToList())
            {
                var subList2 = item2.XRowModified.Select(p => p).ToList();
                int i = 0;
                foreach (var item3 in subList1)
                {
                    var t2 = subList2.Select(p => p.Average).ToList();
                    decimal average = t2[i];
                    if (item3.Average == average)
                    {
                        i++;
                    }
                    else break;
                }
                if (i == item2.XRowModified.Count)
                {
                    zListCollection.Remove(item2);
                }
            }
            i1++;
        } 
```

特性

```
class XRowModified
{
    public decimal Id { get; set; }
    public decimal Open { get; set; }
    public decimal High { get; set; }
    public decimal Low { get; set; }
    public decimal Close { get; set; }
    public DateTime Time { get; set; }
    public decimal Average { get; set; }
}
class ZRowCollection
{
    public ZRowCollection()
    {
        this.XRowModified = new HashSet<XRowModified>();
    }
    public int P { get; set; }
    public int High { get; set; }
    public int Low { get; set; }
    public virtual ICollection<XRowModified> XRowModified { get; set; }
} 
```

预期的输入/输出，作为比较列的平均值`List<XRowModified>`

```
List<ZRowCollection> zListInput = new List<ZRowCollection>(){
            new ZRowCollection(){P = 0,High = 4,Low = 0, XRowModified = new List<XRowModified>(){
                    new XRowModified(){ Id = 1550, Open = 1.22M,High = 1.24M,Low = 1.21M,Close = 1.23M,Average = 1.225M,
                        Time = new DateTime(2012, 11, 9, 12, 23, 23, 222)},
                    new XRowModified(){ Id = 1551, Open = 1.20M,High = 1.24M,Low = 1.22M,Close = 1.20M,Average = 1.23M,
                        Time = new DateTime(2012, 11, 9, 12, 23, 25, 122)}}},
            new ZRowCollection(){P = 1,High = 3,Low = 0, XRowModified = new List<XRowModified>(){
                    new XRowModified(){ Id = 1555, Open = 1.22M,High = 1.24M,Low = 1.21M,Close = 1.23M,Average = 1.225M,
                        Time = new DateTime(2012, 11, 9, 12, 23, 40, 422)},
                    new XRowModified(){ Id = 1556, Open = 1.20M,High = 1.25M,Low = 1.20M,Close = 1.20M,Average = 1.23M,
                        Time = new DateTime(2012, 11, 9, 12, 23, 46, 522)}}},
            new ZRowCollection(){P = 2,High = 2,Low = 0, XRowModified = new List<XRowModified>(){
                    new XRowModified(){ Id = 1558, Open = 1.22M,High = 1.24M,Low = 1.21M,Close = 1.23M,Average = 1.225M,
                        Time = new DateTime(2012, 11, 9, 12, 30, 11, 622)},
                    new XRowModified(){ Id = 1559, Open = 1.20M,High = 1.24M,Low = 1.22M,Close = 1.20M,Average = 1.23M,
                        Time = new DateTime(2012, 11, 9, 12, 30, 12, 822)}}}
        };
        List<ZRowCollection> zListOutput = new List<ZRowCollection>(){
            new ZRowCollection(){P = 0,High = 4,Low = 0, XRowModified = new List<XRowModified>(){
                    new XRowModified(){ Id = 1550, Open = 1.22M,High = 1.24M,Low = 1.21M,Close = 1.23M,Average = 1.225M,
                        Time = new DateTime(2012, 11, 9, 12, 23, 23, 222)},
                    new XRowModified(){ Id = 1551, Open = 1.20M,High = 1.24M,Low = 1.22M,Close = 1.20M,Average = 1.23M,
                        Time = new DateTime(2012, 11, 9, 12, 23, 25, 122)}}}
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:17:27.267

在这种情况下，我会考虑编写一个自定义相等比较器，然后可以将其插入到`Distinct`方法中。为此，您需要两个函数`Equals`和`GetHashCode`.

注意：重要的是`GetHashCode`为两个相等的对象返回相同的哈希，因为这是`Distinct`检查的第一件事。

根据我从您的代码中收集的信息，如果两个'具有相同的平均值序列，`ZRow`则它们是相等的，因此我们的相等性就是这样实现的：`XRow``averageSequence1.SequenceEqual(averageSequence2)`

```
public class CustomComparer : IEqualityComparer<ZRowCollection>
{
    public static CustomComparer Instance { get { return new CustomComparer(); } }

    Int32 IEqualityComparer<ZRowCollection>.GetHashCode(ZRowCollection value)
    {
        //One could also use the sum of the averages here, but went for simplicity...
        return value.XRowModified.Count;
    }

    Boolean IEqualityComparer<ZRowCollection>.Equals(ZRowCollection z1, ZRowCollection z2)
    {
        return z1.XRowModified.Select(x => x.Average)
                              .SequenceEqual(z2.XRowModified.Select(x => x.Average));
    }
} 
```

并且会像这样使用：

```
var distinctList = zListCollection.Distinct(CustomComparer.Instance); 
```

# ruby-on-rails - Rails mysql2 迁移破坏了 utf8 字符串

> ID：13441968
> 
> 赞同：0
> 
> 时间：2012-11-18T16:21:37.200
> 
> 标签：ruby-on-rails, utf-8, mysql2

我正在将旧的 mysql 数据库迁移到新的数据库，所以我编写了一个连接到旧数据库的脚本，读取它并在新数据库中创建新实体。这里是：

```
old_db = Mysql2::Client.new(host: options[:db_host],
                            username: options[:db_user],
                            password: options[:db_password],
                            database: options[:db_name],
                            encoding: 'utf8')
old_categories = old_db.query('select id, title from catalog__category order by lvl asc')
old_categories.each do |old_c|
  c = Catalog::Category.new
  c.name = old_c["title"]
  c.save!
end 
```

然而，在迁移之后，类别名称出现了非常糟糕的状态。两个数据库都以 utf8 编码。客户端和服务器设置utf8编码

```
mysql> show variables like "%character%";
+--------------------------+------------------------------------------------------+
| Variable_name            | Value                                                |
+--------------------------+------------------------------------------------------+
| character_set_client     | utf8                                                 |
| character_set_connection | utf8                                                 |
| character_set_database   | utf8                                                 |
| character_set_filesystem | binary                                               |
| character_set_results    | utf8                                                 |
| character_set_server     | utf8                                                 |
| character_set_system     | utf8                                                 |
| character_sets_dir       | /usr/local/Cellar/mysql/5.5.27/share/mysql/charsets/ | 
```

PHP 项目使用旧数据库并正确显示所有字符串，Rails 项目使用新数据库并正确显示所有内容，但导入了类别字符串。

有谁知道问题出在哪里以及如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:52:04.040

数据库本身编码错误的根本问题（前段时间从 latin1 更改为 utf8）。结果字符串在转储中被编码了两次。

```
mysqldump --default-character-set=latin1 --skip-set-charset -u <user> -p > b.sql 
```

此命令有助于生成正确的转储

# ios - 如何将图像添加到 iOS 模拟器

> ID：13441973
> 
> 赞同：39
> 
> 时间：2012-11-18T16:22:01.740
> 
> 标签：ios, iphone, xcode, ipad, ios-simulator

我有 xcode 4.5.1 并想将照片添加到 iphone 6.0 模拟器但找不到它。我有一个名为 iphone 模拟器的文件夹，但它只包含 4.3.1。这可能是因为几个月前我将应用程序支持中的几乎所有内容都拖到了我的外部硬盘驱动器以节省一些内存。现在，当我将它拖回来时，它包含我之前使用的 4.3.1。我必须下载新的东西还是我应该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-18T16:26:45.217

1.  运行模拟器
2.  在模拟器上运行 Safari
3.  将图片拖到模拟器上运行的 Safari 上，这将打开图像。
4.  单击并按住图像，或点击底部工具栏中的共享图标。
5.  您会收到一条提醒，询问您是否要将图像存储到手机中

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-09-11T13:54:45.043

有一种比 Abizern 描述的方法稍快的方法

1.  打开模拟器
2.  将图像直接拖到上面（无需启动 Safari.app）
3.  Safari 将启动
4.  长按图像并将其保存到模拟器相机胶卷

**iOS9 更新**：本地存储的图像可以直接拖到模拟器上，不必显式保存。

![在此处输入图像描述](../Images/4d9ad486b62147ae5a30f33d32b99b68.png)

请注意，您的图像存储在此处（`6.1`与模拟器版本匹配）：

```
~/Library/Application Suppport/iPhone Simulator/6.1/Media/DCIM/100APPLE 
```

不幸的是，您不能只将图像添加到该文件夹​​，因为它们将被忽略，因为它们不在模拟器的图像数据库中。但是，您可以通过 Finder 获取所有存储的图像。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-22T13:24:57.133

使用**Xcode 6**更容易。

1.- 将图像拖放到模拟器中，图像将直接出现在本机**照片**应用程序中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-04T12:57:51.130

您现在也可以使用 smctl addmedia 命令通过命令行执行此操作。

```
$ xcrun simctl addmedia
Usage: simctl addmedia <device> <path> [... <path>]

You can specify multiple files including a mix of photos and videos.

You can also specify multiple live photos by providing the photo and video files. They will automatically be discovered and imported correctly. 
```

注意（根据命令行工具的安装方式，您可能不需要在 simctl 前面添加 xcrun）。

要找到正确的设备 ID，请运行 simctl list devices

```
$ xcrun simctl list devices
== Devices ==
-- iOS 10.2 --
    iPhone 5 (D226CF12-6782-4D7D-9C00-2D662CF4022C) (Shutdown)
    iPhone 5s (34E0E0F8-3429-4D91-B038-ECF4FD0F3311) (Shutdown)
    iPhone 6 (9C772A68-34E3-4F3F-981C-543DE6D5D985) (Shutdown)
    iPhone 6 Plus (7848A50E-BFB5-4F19-BB31-4A56CA78AA2C) (Shutdown)
    iPhone 6s (12CF89BA-C8B2-4837-B4EB-FB24DFF1622C) (Shutdown)
    iPhone 6s Plus (3EE6CA84-8F12-4A5E-A31D-EF4BF3CCBDB2) (Shutdown)
    iPhone 7 (1EB3CE5D-849C-491C-9CAA-5E97B1BD89CE) (Booted)
    iPhone 7 Plus (94FEFD36-6EFF-4762-BD21-79B1F958F6C6) (Shutdown)
    iPhone SE (E8E8ECEB-34C0-44F0-B92E-57DCA91024F1) (Shutdown)
    iPad Retina (0DA5BF39-3DC7-49B3-BE9B-2FA756FCA725) (Shutdown)
    iPad Air (DAB9C2D3-8EBC-41DC-9C2D-0ECEC1D2FAE3) (Shutdown)
    iPad Air 2 (1E2DA170-5C2E-413C-831B-FA65524643D3) (Shutdown)
    iPad Pro (9.7 inch) (99F931A9-0708-4637-9294-6420DC7A149C) (Shutdown)
    iPad Pro (12.9 inch) (08CD02EB-C44A-4183-961A-EED89FF1C225) (Shutdown)
-- tvOS 10.1 --
    Apple TV 1080p (7EE393F2-C83E-467F-9802-3E5BFE7C2CA9) (Shutdown)
-- watchOS 3.1 --
    Apple Watch - 38mm (B8969533-D7CD-462E-9E76-511C08E8CC8E) (Shutdown)
    Apple Watch - 42mm (E16167D9-1007-438B-8812-CD97CE6ABECA) (Shutdown)
    Apple Watch Series 2 - 38mm (F59C0BB1-B4D0-47DD-B927-1BFD78DD78C0) (Shutdown)
    Apple Watch Series 2 - 42mm (7FE3AADD-94AB-46B9-A057-78F20F030999) (Shutdown) 
```

因此，要将视频添加到我的 iPhone 7 模拟器，我会使用：

```
$ xcrun simctl addmedia 1EB3CE5D-849C-491C-9CAA-5E97B1BD89CE <path to video> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-27T18:58:16.487

使用拖放功能，您将丢失照片的所有元数据。

我创建了一个项目，可以很容易地将资产导入模拟器：[MBAssetsImporter](http://github.com/matibot/MBAssetsImporter)。

它使您能够导入视频和照片，同时保留文件的所有原始元数据。

[![](../Images/ef789adb79951144b73dba3ac2924ff7.png)](https://raw.github.com/matibot/MBAssetsImporter/master/Readme/folder.gif)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-23T12:09:13.630

使用 Xcode 6+（iOS 模拟器 8.1 及更高版本）附带的新 iOS 模拟器，这要容易得多。现在您所要做的就是将*一张或多*张照片拖到 iOS 模拟器窗口上，而不是打开 Safari，而是打开照片应用程序打开，并立即将*所有*拖入的照片添加到设备中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-03T09:07:14.967

这很简单。只需在您的 iPhone 模拟器中转到照片并将图像从您的位置（图像 Eg.Desktop 所在的位置）拖到 IphoneSimulator。它将这些图片添加到相册中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-29T02:28:17.053

另一种简单的方法是，在带有 XCode 10 的 High Sierra 中，运行模拟器，在照片中选择您的照片，进入共享菜单并选择“模拟器”。

瞧！

# c - 使用面包返回 bstring

> ID：13441974
> 
> 赞同：3
> 
> 时间：2012-11-18T16:22:06.960
> 
> 标签：c, file-io

*   GCC 4.7.2
*   c89
*   `bstrlib.h`来自[更好的字符串库](http://bstring.sourceforge.net/)

我正在维护某人的代码，如下所示：

```
FILE *db_fp = NULL;
bstring data = NULL;

db_fp = db_open(DB_FILE, "r");
LOG_CHECK(db_fp == NULL, "Failed to open database: %s", DB_FILE);

data = bread((bNread)fread, db_fp);
LOG_CHECK(data == NULL, "Failed to read from db file: %s", DB_FILE);

db_close(db_fp);

return data; 
```

我在理解以下行时遇到了一些麻烦：

```
data = bread((bNread)fread, db_fp); 
```

我可以猜到，它正在从以下文件指针中获取一个 bstream 并返回一个 bstring。然而，我想知道面包和面包。

bread 包含 2 个参数，一个函数指针 (bNread) 和文件指针。但我不确定我是否理解它是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T16:47:15.113

`bread()`更好的字符串库文档中的声明是：

```
typedef size_t (*bNread)(void *buff, size_t elsize, size_t nelem, void *parm);
extern bstring bread(bNread readPtr, void *parm); 
```

因此，`bread()`是一个将指向函数的指针作为参数的函数。`bNread`type 用于指定函数的类型。该`fread()`函数足够接近，可以在强制转换时通过集合——匹配并不精确，因为它`FILE *`的第四个参数需要 a ，而 a 指向的类型的真正函数`bNread`需要 a `void *`。的第二个参数`bread`是作为第四个参数传递给 . 指向的函数的值`bNread`。

因此，在您维护的代码中：

```
data = bread((bNread)fread, db_fp); 
```

Better String Library 函数`fread()`作为 I/O 函数调用，转换为正确的类型以平息编译器对类型不匹配的警告，以及应该用于读取的文件流。

* * *

该`bread()`函数的实现在需要执行 I/O 以读取字符串时使用函数指针和流指针。也就是说，正如 KerrekB 还解释的那样，代码可能会写成这样：

```
char buffer[256];

size_t nbytes = (*readPtr)(buffer, sizeof(char), sizeof(buffer), parm); 
```

或（等效地）：

```
size_t nbytes = readPtr(buffer, sizeof(char), sizeof(buffer), parm); 
```

（如果你很久以前就学过 C，第一种是通过函数指针调用函数的唯一方法；自从产生了 C89 标准后，第二种已经可用，而且现在可能使用得更广泛。）有许多实现必须担心的技巧，但基本的函数调用会有些相似。代码可以使用除 之外的 I/O 函数`fread()`，但函数的接口必须相似。

指向函数的指针很强大，但在你使用它们之前是晦涩难懂的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T16:27:50.070

这是一种可能的实现`bread`：

```
bstring bread(int(*func)(void *, size_t, size_t ,FILE *), FILE * fp)
{
    char buf[10];
    bstring result;

    func(buf, 10, 1, fp);
    return result;
} 
```

这当然不能反映*真正的*功能`bread`在做什么，但它应该让您了解实现如何使用它。

（真正的函数当然会先读取一个长度`fp`，然后为字符串分配足够的内存，然后读取字符串，但细节取决于它是什么`bstring`以及它是如何工作的。真正的实现也会检查`func`! )

# scala - 使用隐式返回语句理解递归函数

> ID：13441979
> 
> 赞同：0
> 
> 时间：2012-11-18T16:22:34.123
> 
> 标签：scala

下面的递归方法对范围之间的整数值求和

```
 def sumInts(a: Int, b: Int): Int = {
    if(a > b) 0
    else {
      println(a +"," + b)
      a + sumInts(a + 1 , b)
    }
   } 
```

所以`sumInts(2 , 5) returns 14`

我对 sumInts 的递归调用如何对整数范围求和感到困惑。可以文字解释这种方法是如何工作的吗？

sumInts 如何返回增量值？也许我在这里遗漏了一些基本的递归

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:27:36.223

它通过首先计算范围 [a+1, b] 的总和（通过递归调用`sumInts(a + 1 , b)`）然后将`a`其相加来计算范围 [a, b] 中的值的总和。

**[更新]**在 Scala 中，该`return`语句是可选的；函数返回最后计算的表达式的值。因此上面的函数体等价于

```
if(a > b) return 0
else {
  println(a +"," + b)
  return a + sumInts(a + 1 , b)
} 
```

**[/更新]**

对于 [2, 5] 范围，它将执行以下操作（`println`为简单起见，我删除了调用，并添加了括号来标记递归调用）：

1.  `if(2 > 5) 0 else 2 + sumInts(2 + 1, 5)`其中，条件为`false`，计算结果为
2.  `2 + sumInts(3, 5)`
3.  `2 + (if(3 > 5) 0 else 3 + sumInts(3 + 1, 5))`评估为
4.  `2 + (3 + sumInts(4, 5))`
5.  `2 + (3 + (if(4 > 5) 0 else 4 + sumInts(4 + 1, 5)))`评估为
6.  `2 + (3 + (4 + sumInts(5, 5)))`
7.  `2 + (3 + (4 + (if(5 > 5) 0 else 5 + sumInts(5 + 1, 5))))`评估为
8.  `2 + (3 + (4 + (5 + sumInts(6, 5))))`
9.  `2 + (3 + (4 + (5 + (if(6 > 5) 0 else 6 + sumInts(6 + 1, 5)))))`其中，条件为`true`，计算结果为
10.  `2 + (3 + (4 + (5 + (0))))`

# c# - SQL Server c# 连接

> ID：13441986
> 
> 赞同：0
> 
> 时间：2012-11-18T16:23:00.753
> 
> 标签：c#, sql, sql-server-2012

所以我在我的计算机上的虚拟机中运行 Sql Server 2012，我希望能够使用 Visual Studio 上的 SqlConnection 连接它，但我不知道在 servername 参数上放什么。

我不知道我是否必须输入 vm ipaddress 或机器地址“WIN-NIJ53etc\SQLEXPRESS”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:45:24.440

**更新：**

**对于 SQL CE 和 SQL SERVER 之间的迁移：请在[此处](http://erikej.blogspot.com/2012/02/migrating-databases-between-sql-server.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20ErikejBlogsAboutSqlCompactnetAndRelatedStuff%20%28Everything%20SQL%20Server%20Compact%29&utm_content=Google%20Reader)查看此说明。**

您应该按照以下步骤操作：

**1-将虚拟机设置为具有物理IP地址。**

在 Microsoft Virtual PC 上配置网络：http: [//support.microsoft.com/kb/833134](http://support.microsoft.com/kb/833134)

**2- 确保您可以看到具有静态 IP 地址的 VM。**（ping 是检查的好主意，但不要忘记关闭目标机器上的防火墙，我的意思是你要 ping 的机器。服务器不需要看到客户端，所以检查你的客户端（在这种情况下，您的 VM）可以 ping 服务器 IP 地址，例如`"ping 192.168.10.1 -t"`）

**3- 使用配置管理器（所有程序\Microsoft SQL Server\配置工具）并设置 SQL 端口和网络可见性。**

参考： http: [//msdn.microsoft.com/en-us/library/ms189083 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms189083(v=sql.105).aspx)

**4- 重新启动 SQL 服务器。**

**5-确保`"SQL Server Browser"`服务已启动。**（如果您想使用实例名称访问 SQL 服务器）

**6- 在主机（具有 SQL 引擎的机器）上配置防火墙，并将您在配置管理器中指定的端口添加到 TCP 入站规则。**

看看这里：[http ://www.tavislovell.com/post/How-to-configure-Windows-Firewall-to-allow-access-to-SQL-Server.aspx](http://www.tavislovell.com/post/How-to-configure-Windows-Firewall-to-allow-access-to-SQL-Server.aspx)

但请注意，您应该设置配置管理器中指定的端口（默认为 1433，但有时它是动态的，您应该重新设置）

**7-设置端口和网络可见性后，应将`"Server"`连接字符串中的值更改为这种格式`"IPAddress, PORT"``"192.168.10.50, 1433"`**（指定端口时，无需像这样设置实例**名称**`"192.168.10.50\SQLEXPRESS"`）

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:37:03.640

啊，SQL Server 安装设置的乐趣。

确保你有：

*   VM 和客户端计算机之间的网络通信（ping 将起作用）
*   SQL Server 服务配置为自动启动或已启动
*   配置为使用 TCP 的服务（如果您不想使用命名管道）
*   启用并启动 SQL Server Browser 或配置了静态端口（1433 或类似端口）
*   防火墙规则配置为允许 1433（或您选择的端口）和 1434（如果您使用浏览器）
*   使用正确格式的连接字符串 Computer Name\Instance（使用浏览器）或 Computer Name,port（如果您使用的是静态端口

MSDN 上有一个很好的[教程](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)，可能会很有帮助。具体到服务器名称/IP 问题，只要客户端计算机能够解决它就没有关系。如果您正在测试，“IP,Port”是最可靠的（例如 10.10.10.100,1433），因为它不依赖于 NetBIOS、DNS 或 SQL Browser 服务。

# python - 请求 https://www.googleapis.com/bigquery/v2/projects/publicdata/queries?alt=json 时出现 HttpError 403 返回“拒绝访问：作业公共数据：

> ID：13441990
> 
> 赞同：2
> 
> 时间：2012-11-18T16:23:28.340
> 
> 标签：python, google-app-engine, google-bigquery

尝试使用 GAE python 在 Bigquery 上运行查询时出现以下错误。

```
HttpError 403 when requesting https://www.googleapis.com/bigquery/v2/projects/publicdata/queries?alt=json returned "Access Denied: Job publicdata:job_c08d8f254c0449c2b3e26202e62ca5fa: RUN_QUERY_JOB"> 
```

这是 main.py 代码

```
import httplib2
import os

from apiclient.discovery import build
from google.appengine.ext import webapp
from google.appengine.ext.webapp import template
from google.appengine.ext.webapp.util import run_wsgi_app
from oauth2client.appengine import AppAssertionCredentials

# BigQuery API Settings
SCOPE = 'https://www.googleapis.com/auth/bigquery'
PROJECT_NUMBER = 'publicdata' # REPLACE WITH YOUR Project ID

# Create a new API service for interacting with BigQuery
credentials = AppAssertionCredentials(scope=SCOPE)
httpss = credentials.authorize(httplib2.Http())
bigquery_service = build('bigquery', 'v2', http=httpss)

class GetTableData(webapp.RequestHandler):
  def get(self):
    queryData = {'query':'SELECT word,count(word) AS count FROM publicdata:samples.shakespeare GROUP BY word;',
             'timeoutMs':10000}

    queryData = bigquery_service.jobs()
    queryReply = queryData.query(projectId=PROJECT_NUMBER,body=queryData).execute()
    self.response.out.write(queryReply)

application = webapp.WSGIApplication(
                                     [('/queryTableData',GetTableData)
                                    ],
                                     debug=True)

def main():
  run_wsgi_app(application)

if __name__ == "__main__":
  main() 
```

这是 App.yaml

```
application: bigquerymashup
version: 1
runtime: python
api_version: 1

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /css
  static_dir: css

- url: /js
  static_dir: js

- url: /img
  static_dir: img

- url: .*
  script: main.py 
```

我正在使用 App Engine 服务帐户进行身份验证

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T06:42:00.370

您似乎正在尝试在“publicdata”项目（BigQuery 内部，因此您无权访问它）下运行查询。必须使用您创建的 Google Developer 项目的项目编号来运行查询。如需了解详情，请参阅[BigQuery REST API 快速入门](https://developers.google.com/bigquery/docs/hello_bigquery_api)页面。

一件事：您在示例中的类名称是“GetTableData” - 不确定您是尝试[列出 Tabledata](https://developers.google.com/bigquery/docs/reference/v2/tabledata/list)还是检索[Table 资源](https://developers.google.com/bigquery/docs/reference/v2/tables/get)？无论如何，这里有一些 Python 代码片段，它们演示了如何使用[Google Python API 客户端](http://code.google.com/p/google-api-python-client/)进行这些 API 调用。

```
 def get_table(service, project_number, dataset_id, table_id):
      """Get Table information.

      Args:
        service: Authorized BigQuery API client.
        project_number: The current Project number.
        dataset_id: The name of the dataset.
        table_id: Id of the relevant table.
      """
      tables = service.tables()

      try:
        table_info = tables.get(projectId=project_number,
                                datasetId=dataset_id,
                                tableId=table_id).execute()
        print 'Table information:\n'
        print 'Table name: %s' % table_info['id']
        print 'Table creation time: %s' % table_info['creationTime']

      except errors.HttpError, error:
        print 'Could not get Table information: %s' % error

def list_table_data(service, project_number, dataset_id, table_id):
  """Returns table data from a specific set of rows.

  Args:
    service: Authorized BigQuery API client.
    project_number: The current Project number.
    dataset_id: The name of the dataset.
    table_id: The name of the table.
  """

  try:
    table = service.tabledata()
    table_data = table.list(projectId=project_number,
                       datasetId=dataset_id,
                       tableId=table_id,
                       maxResults=10).execute(http)

    print 'Total Rows: %s' % table_data['totalRows']
    for row in table_data['rows']:
      data = []
      for values in row['f']:
        value = values['v'] if values['v'] is not None else ''
        data.append(value)
      print '  '.join(data)

  except HttpError, error:
    print 'Could not list Table data. %s' % error 
```

# java - 在 Java 中读取文本文件数据的问题

> ID：13441994
> 
> 赞同：0
> 
> 时间：2012-11-18T16:23:40.053
> 
> 标签：java

我有这个代码：

```
 BufferedReader br =new BufferedReader(new FileReader("userdetails.txt"));
     String str;
     ArrayList<String> stringList = new ArrayList<String>();
     while ((str=br.readLine())!=null){
        String datavalue [] = str.split(",");
        String category = datavalue[0];
        String value = datavalue[1];
        stringList.add(category);
        stringList.add(value);
     }
     br.close(); 
```

当变量类别和值没有逗号（，）时它可以工作，但是变量值中的值确实包含逗号。有没有一种方法可以在不使用逗号的情况下拆分索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:48:52.627

当数据有“，”时，通常称为 CSV 文件。[OpenCSV](http://opencsv.sourceforge.net/)是相当常用的库来处理它。格式看起来很简单，但它有它的怪癖。有关详细信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Comma-separated_values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:49:16.773

如果我理解正确：

```
 String str = "category,vvvv,vvv";
    int i = str.indexOf(',');
    String category = str.substring(0, i);
    String value = str.substring(i + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:57:39.460

split() 使用正则表达式。如果阅读器代码运行良好，请执行

```
str.split("\\,"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:26:26.720

解决方案如下：

```
 BufferedReader br =new BufferedReader(new FileReader("userdetails.txt"));
    String str;
    ArrayList<String> stringList = new ArrayList<String>();
    while ((str=br.readLine())!=null){
        int firstIndexOfComma = str.indexOf(',');
        String category = str.substring(0, firstIndexOfComma);
        String value = str.substring(firstIndexOfComma + 1);
        stringList.add(category);
        stringList.add(value);
        System.out.println(category+" "+value);
    }
    br.close(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-18T16:28:31.127

不是 100% 确定，但你不能做些 `String datavalue [] = str.split("--");` 什么吗？

示例文件：

`x,y,z--123--Hello World`

输出：

`"x,y,z", "123", "Hello World"`

# java - Java“重复的局部变量” - Java或Eclipse中抛出的错误？

> ID：13441995
> 
> 赞同：4
> 
> 时间：2012-11-18T16:23:50.693
> 
> 标签：java, eclipse

在以下代码中：

```
private static void example() {
    String inputString = "test";
    switch (inputString) {
        case "test":
            String outputString = "The string said test";
        case "not test":
            String outputString = "The string did not say test";
    }
    /*Do stuff with ouputString*/        
} 
```

Eclipse 突出显示`Case "not test"`错误之后的行`Duplicate local variable outputString`。但是，由于它们位于`switch`语句的不同分支中，因此它们实际上并不冲突，因为一次只能生效一个。

显然，在这种情况下，我可以通过将`outputString`声明移到语句之外来解决这个问题`switch`。但是，在更复杂的程序中，解决方案可能不会那么简单。

这仅仅是 Eclipse 抛出的一个错误，以防止糟糕的编程技术，还是一个实际的 Java 错误？

我对 Java 很陌生，所以如果这是一个新手问题，我深表歉意 - 我有一个“重复局部变量 Java”的谷歌，但到目前为止，所有出现的都是人们寻求解决问题的帮助（通常解决方案是重命名变量之一），而不是讨论问题本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T16:25:46.493

在java中的switch语句的每种情况下，变量的范围是整个switch语句。

您可以通过添加大括号来创建更多嵌套范围，如下所示：

```
 switch (inputString) {
        case "test": {
            String outputString = "The string said test";
            break;
        }
        case "not test": {
            String outputString = "The string did not say test";
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T16:27:09.767

您假设每个`case`标签创建一个单独的范围 - 他们没有。这里的作用域是 switch 块，所以你确实在一个作用域内声明了 2 个同名的变量。

您可以为每个案例标签引入一个新范围，例如

```
switch (inputString) {
    case "test": {
        String outputString = "The string said test";
        break;
    }
    case "not test": {
        String outputString = "The string did not say test";
        break;
   }
} 
```

或者，如果您的开关已经很大，也许您应该为每种情况制定一个方法，以包装您在那里所做的所有工作

# java - 将元素从一个数组添加到另一个 Java

> ID：13441997
> 
> 赞同：0
> 
> 时间：2012-11-18T16:24:06.550
> 
> 标签：java, arrays

休息几年后才回到Java。我正在尝试从一个数组中选择元素并将它们存储在另一个 Java 中。我创建了一个具有固定数量元素的相同类型的新数组。我要复制的数组不是空的，我已经打印出来了。但是当我尝试显示新数组时，值不存在 - 只是对元素的引用。我可能忽略了一些东西。我一直在寻找最后一天，但没有得到任何地方。我真的很感激一些帮助。下面的代码：

```
PersonDetails user = new PersonDetails(userName,userGender,userAge,userInterests);
PersonDetails [] userArray =  new PersonDetails [numberOfDaters];   
PersonDetails [] dateArray =  new PersonDetails [numberOfDaters];   
userArray = user.getArray("datingdata.txt", numberOfDaters);
dateArray = Arrays.copyOf(userArray, userArray.length);

char [][] interestArray = new char[numberOfDaters][5];  
for (int z =0;z<userArray.length; z++) {                
   interestArray[z] =
      userArray[z].getAllInterests( userArray[z].getInterests());                   
}
String remove = user.getOnes(interestArray);
System.out.print(remove);
StringTokenizer st = new StringTokenizer(remove); 
int num = st.countTokens();
PersonDetails [] userRemoveArray =  new PersonDetails [num]; 
while(st.hasMoreTokens()) {
   int token = Integer.parseInt(st.nextToken()); 
   for(int x =0;x<userRemoveArray.length;x++) {
      userRemoveArray[x] = userArray[token];
   }
   System.out.println(userRemoveArray);  
} 
```

输出如下：

```
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488
[LPersonDetails;@a8c488 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:09:44.390

这是一个让您更轻松的小示例，因为您已经注意到您在一段时间后才回到 Java，我希望这对您有所帮助:)

```
public class PersonDetails {

private String userName;

private String gender;

@Override
public String toString() {
    return "PersonDetails [userName=" + userName + ", gender=" + gender
            + "]";
}

} 
```

现在，当您打印出数组时，在 toString() 方法中创建的字符串将为每个 PersonDetail 对象打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:34:16.380

您可以使用[此处](http://www.javapractices.com/topic/TopicAction.do?Id=3)`.addAll(...)`找到的方法或众多方法之一。

至于打印出数组的元素......您必须实现自己的`.toString()`方法以避免显示对象引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:13:23.273

你应该使用`System.out.println(Arrays.asList(userRemoveArray));`. 或者

```
for(int i = 0; i < userRemoveArray.length;i++) {
  System.out.print(userRemoveArray[i]+", ");
}
System.out.println(); 
```

# objective-c - 在 iPad 原生应用程序中按月订阅的 Paypal 付款

> ID：13441999
> 
> 赞同：1
> 
> 时间：2012-11-18T16:24:16.013
> 
> 标签：objective-c, ios, ipad, paypal

我正在开发一个企业应用程序，该应用程序允许用户对其个人资料下的数据执行 CRUD 操作，将其与后端同步，与其他用户共享并跨多个平台查看。

该应用程序适用于 3 个平台

a) 作为浏览器中的网络应用程序 b) 作为 iPad 上的原生 iOS 应用程序 c) 作为安卓平板电脑上的原生安卓应用程序

现在我们希望免费提供该应用程序 3 个月的试用期，之后如果用户想继续与后端同步数据，我们希望向他们收取每月订阅费。如果没有，他们可以将应用程序用作没有后端的原生应用程序，并且他们将无法跨平台和与其他用户共享数据，但可以将应用程序用作没有后端的原生应用程序后端。

对于每月订阅费，我们希望将 Paypal 支付集成到我们的 ipad 应用程序中。

有两个灰色区域让我们感到困惑

a) Apple 可能会因为 paypal 集成而拒绝该应用程序，因为它有利于应用程序内购买/iTunes。

b) Apple 声明用户只能为“真实世界的服务”付费。我们的服务符合条件吗？

我们更愿意获得一些明确的信息，而不是实施贝宝付款并被苹果拒绝，这将使我们推迟 14 天。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:25:57.517

我认为您不会在这里获得“确定”的信息，因为 stackoverflow 没有有关 Apple 策略的内部信息。你必须尝试找出答案。我知道使用应用内购买的每月订阅的应用程序（如[Trillian](https://itunes.apple.com/us/app/trillian/id327603487)）。

如果您想确保它不会被拒绝，请从应用程序中排除付款流程。您正在使用帐户，并且某些帐户获得了付费“高级”功能。如果他们想从 iPad 购买，只需让用户通过您的网站付款或将他们重定向到您的网站。我的**猜测**是，Apple 会希望您使用应用内购买进行订阅。

关于“现实世界的服务”，那应该没问题。