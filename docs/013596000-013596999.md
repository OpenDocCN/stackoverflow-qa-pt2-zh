# StackOverflow 问答 13596000-13596999

# c# - String.format 没有效果

> ID：13596000
> 
> 赞同：1
> 
> 时间：2012-11-28T00:55:37.160
> 
> 标签：c#, .net, xml, filestream

代码执行时没有任何错误，但 {0} 和 {1} 不会被 String.Format 中声明的值替换

```
FileStream fs = new FileStream(xmlFile.FullName, FileMode.Open, FileAccess.Read);
XmlDocument doc = new XmlDocument();
doc.Load(fs);

 string docStrXml = doc.InnerXml.ToString();
 String.Format(docStrXml, newVersion.ToString(), oldVersion.ToString());

 triggerDocument.LoadXml(docStrXml);
 triggerDocument.Save(directoryPathOfNewXml + "\\" + xmlFile.Name); 
```

保存新文件没有问题。基本上，我正在打开一个 xml 文件，并且我想在文档中插入字符串。这是初始文档（也是最后一个，因为它没有更改）：

```
<?xml version="1.0" encoding="utf-8" ?>
<Package
    source="http://localhost/Service/Master/{0}/{1}/"
    triggerseturl="http://localhost/Service/Master/{0}/{1}/client.xml">
  <File name="client_full.xml"/>
  <File name="client_half.xml"/>
</Package> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T00:56:50.743

您忘记`docStrXml`用新值替换值：

```
docStrXml = String.Format(docStrXml, newVersion.ToString(), oldVersion.ToString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T00:58:29.277

字符串是不可变的，您必须将 string.Format 的返回值分配给另一个变量。

它将具有带有插入值的新字符串。

```
docStrXml = String.Format(docStrXml, newVersion.ToString(), oldVersion.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T01:00:34.757

String.Format 方法根据传递的字符串参数 [docStrXml] 返回一个字符串，但不直接对其进行操作。您需要将返回值分配给一个变量，在这种情况下与您传递给方法的变量相同。将您的代码修改为：

```
docStrXml = String.Format(docStrXml, newVersion.ToString(), oldVersion.ToString()); 
```

你应该很高兴。

# matlab - 如何获取matlab数组中的最大元素索引

> ID：13596006
> 
> 赞同：14
> 
> 时间：2012-11-28T00:56:34.490
> 
> 标签：matlab, max, octave

这是一个简单的双数组：

```
array=[3 1 1] 
```

最大元素索引为 1

或者：

```
array=[3 9 1] 
```

最大元素索引为 2

如何获得最大的元素索引？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-28T00:58:36.970

使用`max`函数的第二个输出参数：

```
[ max_value, max_index ] = max( [ 3 9 1 ] ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T00:59:34.413

我的标准解决方案是

```
index = find(array == max(array), 1); 
```

它返回等于最大值的第一个元素的索引。`find`如果你想要最后一个元素，你可以摆弄选项，等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T11:08:05.617

如果您需要获取每行的最大值，您可以使用：

```
array = [1, 2, 3; 6, 2, 1; 4, 1, 5];
[max_value max_index] = max(array, [], 2)

%3, 3
%6, 1
%5, 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-25T20:22:00.773

```
在八度如果
一个=
   1 3 2
   6 5 4
   7 9 8

1）对于每个列的最大值和它们的相应索引可以通过
>> [max_values,indices] =max(A,[],1)
最大值 =
   7 9 8
指数 =
   3 3 3

2）对于每行最大值和它们的相应索引可以通过
>> [max_values,indices] =max(A,[],2)
最大值 =
   3
   6
   9
指数 =
   2
   1
   2

同样对于最小值

>> [min_values,indices] =min(A,[],1)
min_values =
   1 3 2

指数 =
   1 1 1

>> [min_values,indices] =min(A,[],2)
min_values =
   1
   4
   7

指数 =
   1
   3
   1

```

# javascript - XSS 漏洞当 和 值被注入到 JavaScript 字符串文字中

> ID：13596016
> 
> 赞同：2
> 
> 时间：2012-11-28T00:57:32.243
> 
> 标签：javascript, jsp, jstl, xss, url-encoding

我的静态分析器标记了以下 XSS 错误。我想了解是否可以将恶意代码注入此参数，导致注入的值被解释为 JavaScript（可能通过过早终止 JavaScript 字符串文字），或者导致注入的值重定向到其他地方具有被服务器拒绝的值的预期目的地。

```
<c:url var="myUrl" value="/somepage.jsp">
  <c:param name="myParam" value="${param.userSuppliedParameter}"/>
</c:url>

<script type="text/javascript">
  <!--
    document.location = "${myUrl}";
  //-->
</script> 
```

值得注意的是，如果 url 参数被简单地更改并且其他 URL 参数将被忽略，服务器将正确处理重定向 URL。我主要感兴趣的是确定攻击者是否可以使用 URL 查询参数将可执行 JavaScript 注入**此**页面`userSuppliedParameter`，以及攻击者是否有可能将 document.location 评估为除 /somepage.jsp 之外的任何任意任意值网址参数。例如：`http://foo.com/bar.jsp?userSuppliedParam=SOME_POTENTIALLY_MALICIOUS_PAYLOAD`。我不关心注入到目标页面的值，或者目标页面解释 URL 的方式。

`<c:url>`URL 应该对 URL 参数进行编码，这将阻止某人添加“@”符号，否则会导致前面的字符被解释为基本身份验证参数。否则，这将暴露一个[开放重定向漏洞](https://www.owasp.org/index.php/Open_redirect)。

`<c:url>`还应该对双引号进行编码，这将防止有人终止 JavaScript 字符串文字。

我基于[RFC](http://www.cs.tut.fi/~jkorpela/rfc/2396/)和 JavaDoc for [URLEncoder](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLEncoder.html)对 url 编码的假设。

还有其他可能的滥用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:22:50.543

共识是这是一个误报。如果我发现一个潜在的漏洞，我会更新这个。

# facebook - Ubuntu 中的 OpenSSL 1.0.1 握手解决方法？

> ID：13596019
> 
> 赞同：8
> 
> 时间：2012-11-28T00:57:44.177
> 
> 标签：facebook, ubuntu, timeout, openssl, handshake

我在 Ubuntu 12.04 上的 OpenSSL 1.0.1 中遇到了一个严重的错误：

[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=665452](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=665452)

[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666051](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666051) <- 2012 年 10 月 3 日！

它的要点是我能够连接到一些服务器，但不能连接到其他服务器。连接到谷歌作品：

openssl s_client -connect mail.google.com:443 -debug -state -msg -CAfile /etc/ssl/certs/ca-certificates.crt

```
...
Protocol  : TLSv1.1
Cipher    : ECDHE-RSA-RC4-SHA
Session-ID: 94DB1AC8531115C501434B16A5E9B735722768581778E4FEA4D9B19988551397
Session-ID-ctx:
Master-Key: 8694BF510CD7568CBAB39ECFD32D115C511529871F3030B67A4F7AEAF957D714D3E94E4CE6117F686C975EFF21FB8708
Key-Arg   : None
PSK identity: None
PSK identity hint: None
SRP username: None
TLS session ticket lifetime hint: 100800 (seconds)
TLS session ticket:
0000 - fb 52 d6 d3 3c a8 75 e1-1f 1d f6 23 ab ce 55 44   .R..<.u....#..UD
0010 - 27 bf ad c4 7a 0d 83 c8-48 59 48 4b 39 bb 3c c7   '...z...HYHK9.<.
0020 - 01 1e ad b3 13 de 65 d4-e8 ea e4 35 89 83 55 8e   ......e....5..U.
0030 - e4 d5 9f 60 58 51 33 9b-83 34 b9 35 3d 46 cb a3   ...`XQ3..4.5=F..
0040 - 35 7b 48 5d 7b 86 5c d5-a1 14 9d 8c 3e 93 eb fb   5{H]{.\.....>...
0050 - ac 78 75 72 9b d2 bc 67-f2 fa 5b 75 80 a6 31 d8   .xur...g..[u..1.
0060 - 71 15 85 7f 55 4d dc fb-b0 b5 33 db 6d 36 8c c6   q...UM....3.m6..
0070 - e8 f9 54 7a 29 69 87 2c-dd f3 c5 cf 26 55 6f 6e   ..Tz)i.,....&Uon
0080 - 45 73 7a 1d e4 b3 be b2-92 3f 0b ed c4 1c a5 24   Esz......?.....$
0090 - 3c f0 ca a5                                       <...

Start Time: 1354063165
Timeout   : 300 (sec)
Verify return code: 0 (ok) 
```

但连接到 facebook 不会：

openssl s_client -connect graph.facebook.com:443 -debug -state -msg -CAfile /etc/ssl/certs/ca-certificates.crt -cipher SRP-AES-256-CBC-SHA

```
CONNECTED(00000003)
SSL_connect:before/connect initialization
write to 0xddd2c0 [0xddd340] (64 bytes => 64 (0x40))
0000 - 16 03 01 00 3b 01 00 00-37 03 02 50 b5 5d 75 42   ....;...7..P.]uB
0010 - c2 78 55 49 b5 2e de 4f-00 a6 a8 d5 cf 10 92 44   .xUI...O.......D
0020 - 28 62 34 d6 61 5e 88 c3-68 8b 96 00 00 04 c0 20   (b4.a^..h......
0030 - 00 ff 02 01 00 00 09 00-23 00 00 00 0f 00 01 01   ........#.......
>>> TLS 1.1  [length 003b]
    01 00 00 37 03 02 50 b5 5d 75 42 c2 78 55 49 b5
    2e de 4f 00 a6 a8 d5 cf 10 92 44 28 62 34 d6 61
    5e 88 c3 68 8b 96 00 00 04 c0 20 00 ff 02 01 00
    00 09 00 23 00 00 00 0f 00 01 01
SSL_connect:unknown state
read from 0xddd2c0 [0xde28a0] (7 bytes => 7 (0x7))
0000 - 15 03 02 00 02 02 28                              ......(
SSL3 alert read:fatal:handshake failure
<<< TLS 1.1  [length 0002]
    02 28
SSL_connect:error in unknown state
140581179446944:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:s23_clnt.c:724:
---
no peer certificate available
---
No client certificate CA names sent
---
SSL handshake has read 7 bytes and written 64 bytes
---
New, (NONE), Cipher is (NONE)
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE 
```

facebook 连接要么在客户端发送它的 hello 缓冲区后挂起，并且永远不会收到服务器的 hello 响应，要么如果我传入它识别的密码，则返回错误代码。这发生在 -tls1 和 -ssl3 上。我已经尝试了我能想到的 openssl 的每个参数。

apt-cache showpkg openssl

```
...
Provides:
1.0.1-4ubuntu5.5 -
1.0.1-4ubuntu5.3 -
1.0.1-4ubuntu3 - 
```

我还尝试了所有我能想到的 curl 参数，但没有成功，因为它在后台使用了 openssl。

我担心 Ubuntu 无法建立安全连接（我意识到这是一个令人震惊的声明）。经过两天的努力解决这个问题，我现在基本上是在祈祷有人知道解决方法。我正在考虑降级到 OpenSSL 1.0.0 或将 libcurl4-dev 与 gnutls-dev 一起使用。这两种解决方案都会在我嘴里留下腐烂的味道。提前感谢您提供的任何帮助。

PS 所有这些工作都是为了让我的服务器可以与外部 https REST API 交互。我认为这是当今任何网络服务器的基本要求，没有任何借口。

更新：这是我的输出，没有传递密码。我是否通过 -CAfile 都没关系：

openssl s_client -connect graph.facebook.com:443 -debug -state -msg -CAfile /etc/ssl/certs/ca-certificates.crt

```
CONNECTED(00000003)
SSL_connect:before/connect initialization
write to 0x14ed1a0 [0x1515bf0] (226 bytes => 226 (0xE2))
0000 - 16 03 01 00 dd 01 00 00-d9 03 02 50 b6 39 78 6a   ...........P.9xj
0010 - 24 95 8e dc 62 19 37 4b-ab 77 b8 66 cd 48 ba a2   $...b.7K.w.f.H..
0020 - a1 2a f8 1d f8 c9 5d fb-9d db 84 00 00 66 c0 14   .*....]......f..
0030 - c0 0a c0 22 c0 21 00 39-00 38 00 88 00 87 c0 0f   ...".!.9.8......
0040 - c0 05 00 35 00 84 c0 12-c0 08 c0 1c c0 1b 00 16   ...5............
0050 - 00 13 c0 0d c0 03 00 0a-c0 13 c0 09 c0 1f c0 1e   ................
0060 - 00 33 00 32 00 9a 00 99-00 45 00 44 c0 0e c0 04   .3.2.....E.D....
0070 - 00 2f 00 96 00 41 c0 11-c0 07 c0 0c c0 02 00 05   ./...A..........
0080 - 00 04 00 15 00 12 00 09-00 14 00 11 00 08 00 06   ................
0090 - 00 03 00 ff 02 01 00 00-49 00 0b 00 04 03 00 01   ........I.......
00a0 - 02 00 0a 00 34 00 32 00-0e 00 0d 00 19 00 0b 00   ....4.2.........
00b0 - 0c 00 18 00 09 00 0a 00-16 00 17 00 08 00 06 00   ................
00c0 - 07 00 14 00 15 00 04 00-05 00 12 00 13 00 01 00   ................
00d0 - 02 00 03 00 0f 00 10 00-11 00 23 00 00 00 0f 00   ..........#.....
00e0 - 01 01                                             ..
>>> TLS 1.1  [length 00dd]
    01 00 00 d9 03 02 50 b6 39 78 6a 24 95 8e dc 62
    19 37 4b ab 77 b8 66 cd 48 ba a2 a1 2a f8 1d f8
    c9 5d fb 9d db 84 00 00 66 c0 14 c0 0a c0 22 c0
    21 00 39 00 38 00 88 00 87 c0 0f c0 05 00 35 00
    84 c0 12 c0 08 c0 1c c0 1b 00 16 00 13 c0 0d c0
    03 00 0a c0 13 c0 09 c0 1f c0 1e 00 33 00 32 00
    9a 00 99 00 45 00 44 c0 0e c0 04 00 2f 00 96 00
    41 c0 11 c0 07 c0 0c c0 02 00 05 00 04 00 15 00
    12 00 09 00 14 00 11 00 08 00 06 00 03 00 ff 02
    01 00 00 49 00 0b 00 04 03 00 01 02 00 0a 00 34
    00 32 00 0e 00 0d 00 19 00 0b 00 0c 00 18 00 09
    00 0a 00 16 00 17 00 08 00 06 00 07 00 14 00 15
    00 04 00 05 00 12 00 13 00 01 00 02 00 03 00 0f
    00 10 00 11 00 23 00 00 00 0f 00 01 01
SSL_connect:unknown state 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T01:29:49.967

为什么`-cipher SRP-AES-256-CBC-SHA`连接时会经过`graph.facebook.com`？Facebook 当然不支持 SRP：[http](http://srp.stanford.edu/) ://srp.stanford.edu/ 。

如果你不通过它会起作用吗？

另外，你能给出你得到的IP地址吗？使用 69.171.229.17，我可以重现该确切的 ClientHello（以随机数为模，并且使用 RC4-SHA 是保存 SCSV 的唯一密码）并且我得到了成功的握手。

最后，您是否尝试过通过 SSH 隧道到其他地方？遗憾的是，在 Chrome 中部署 TLS 功能时，我们反复发现网络硬件会中断 TLS 连接。（尽管我想不出 -ssl3 不会修复它的情况，除非硬件正在积极尝试审查连接。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:57:40.397

将我的 Ubuntu 机器上的 MTU 从 1500 设置为 1496（由于我们的一个防火墙设置得太低）允许我接收来自服务器的响应而无需重新启动（请务必先调用 ifconfig 并记下您原来的 MTU应该是 1500）：

```
sudo ifconfig eth0 mtu 1496 
```

我通过 ping 越来越大的缓冲区（为 UDP 标头添加 28 个字节）发现了我的 MTU：

1472 + 28 = 1500 失败：

```
ping -s 1472 facebook.com
PING facebook.com (66.220.158.16) 1472(1500) bytes of data.
... 
```

适用于 1468 + 28 = 1496：

```
ping -s 1468 facebook.com
PING facebook.com (69.171.229.16) 1468(1496) bytes of data.
1476 bytes from www-slb-ecmp-06-prn1.facebook.com (69.171.229.16): icmp_req=1 ttl=242 time=30.0 ms
... 
```

有了 1496，我现在可以卷曲到 facebook.com：

```
curl -v https://facebook.com
* About to connect() to facebook.com port 443 (#0)
*   Trying 66.220.152.16... connected
* successfully set certificate verify locations:
*   CAfile: none
  CApath: /etc/ssl/certs
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*        subject: C=US; ST=California; L=Palo Alto; O=Facebook, Inc.; CN=www.facebook.com
*        start date: 2012-06-21 00:00:00 GMT
*        expire date: 2013-12-31 23:59:59 GMT
*        subjectAltName: facebook.com matched
*        issuer: O=VeriSign Trust Network; OU=VeriSign, Inc.; OU=VeriSign International Server CA - Class 3; OU=www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97 VeriSign
*        SSL certificate verify ok.
> GET / HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: facebook.com
> Accept: */*
>
< HTTP/1.1 301 Moved Permanently
< Location: https://www.facebook.com/
< Content-Type: text/html; charset=utf-8
< X-FB-Debug: 3vAg1O5OG9hB/EWC+gk1Kl3WLJRGmlQDaEodirWb+i0=
< Date: Wed, 28 Nov 2012 19:52:25 GMT
< Connection: keep-alive
< Content-Length: 0
<
* Connection #0 to host facebook.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1): 
```

我个人认为 MTU 应该与用户在 TCP 流级别上看到的内容完全无关，所以我希望 OpenSSL 人员能解决这个问题。我还希望有人会发明一个自动提交错误的程序，用于处理非常普遍且耗时的错误。

# javascript - 试图创建一个运行脚本的按钮，但是 H1 和按钮消失 onClick

> ID：13596021
> 
> 赞同：0
> 
> 时间：2012-11-28T00:58:04.567
> 
> 标签：javascript, xml, xmlhttprequest

我希望你能阅读我的代码，我的本地主机上有一个 XML 文件，我希望它从该文件中提取标题和年份（它目前有标题、年份、艺术家、价格和国家），同时保持 H1 和页面上的按钮。

H1 文本和按钮在单击时消失，我希望它与结果保持在同一页面上。

```
 <h1>Show the Album list</h1>  
   <script>  
   xmlhttp=new XMLHttpRequest();  

   xmlhttp.open("GET","cd_catalog.xml",false);  
   xmlhttp.send();  
   xmlDoc=xmlhttp.responseXML;  
   function CdCatalog()  
    {
       document.write("<table border='1'><th>TITLE</th><th>YEAR</th>");
       var x=xmlDoc.getElementsByTagName("CD");  
       for (i=0;i<x.length;i++)
    {
   document.write("<tr><td>");
   document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
   document.write("</td><td>");
   document.write(x[i].getElementsByTagName("YEAR")[0].childNodes[0].nodeValue);
   document.write("</td></tr>");
    }
       document.write("</table>");
    }
   </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:03:08.737

问题是您正在使用`document.write`按钮的单击事件，这是在文档关闭之后......这意味着它会覆盖所有内容。由于您的页面很简单并且只有一个`<h1>`和按钮，因此看起来只有那些东西被隐藏了，但它会是页面上的所有内容（如果您有更多）。

解决方案是动态使用`.appendChild`和/或`.innerHTML`添加内容。我会在一分钟内提供解决方案:)

**更新**：

由于您使用的是表格，因此您不妨使用本机方法`.insertRow`，`.insertCell`这会使表格的创建更加容易。这是您可以整体使用的示例：

```
function CdCatalog(xmlDoc) {
    var table = document.createElement("table");
    var thead = table.createTHead();    // Where "header" rows go
    // `insertRow` creates a <tr> element and appends it to `thead` automatically, returning the element
    var tr = thead.insertRow(-1);
    var td = document.createElement("th");  // No special method for creating "th" elements
    td.innerHTML = "TITLE";  // Set its inner content
    tr.appendChild(th);  // Add it to the row (which is in the header)
    td = document.createElement("td");
    td.innerHTML = "YEAR";
    tr.appendChild(td);

    var x = xmlDoc.getElementsByTagName("CD");
    // "tbody" is where a table's content goes, whether you do this explicitly or not
    var tbody = table.tBodies[0];
    for (var i = 0; i < x.length; i++) {
        tr = tbody.insertRow(-1);
        // `insertCell` creates a <td> element and appends it to `tr` automatically, returning the element
        td = tr.insertCell(-1);
        td.innerHTML = x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue;
        td = tr.insertCell(-1);
        td.innerHTML = x[i].getElementsByTagName("YEAR")[0].childNodes[0].nodeValue;
    }
    // Actually add the table to the DOM (the <body> element in this case)...you can specify where else to put it
    document.body.appendChild(table);
}

// Make sure DOM is ready for manipulation
window.onload = function () {
    var btn = document.getElementById("button_id");  // Whatever your button is
    // Bind the "click" event for the button
    btn.onclick = function () {
        // Make your AJAX request
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", "cd_catalog.xml", false);
        xmlhttp.send();
        xmlDoc = xmlhttp.responseXML;
        // Pass the result to the function, instead of making everything global and sharing
        CdCatalog(xmlDoc);
    };
}; 
```

除非我弄错了，否则你不能嵌套`<td>`在`<table>`......你必须将它们`<tr>`嵌套在......嵌套在`<table>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:04:54.513

不要使用`document.write`. 自文档关闭以来，它将删除标签内的所有内容。改为这样做：

```
document.body.innerHTML += "<td>blah</td>"

-or-

var td = document.createElement("td");
td.innerHTML = "blah"
document.querySelector("table").appendChild(td); 
```

**演示：http:** [//jsfiddle.net/DerekL/AHZ4C/](http://jsfiddle.net/DerekL/AHZ4C/)

# guice - 如何为可选组件抢占 Guice 的 CreationException

> ID：13596022
> 
> 赞同：0
> 
> 时间：2012-11-28T00:58:08.667
> 
> 标签：guice

我有一个像这样的课程：

```
class Foo {
    Foo(@Named("x") x) { ... }
} 
```

`x`从一个`Properties`对象绑定：

```
Names.bindProperties(binder(), props); 
```

但是如果`x`没有设置，我想跳过 binding `Foo`。实现此目的的一种方法是：

```
if (props.contains("x")) {
    bind(Foo.class);
} 
```

但是有更好的方法吗？

```
if (namedPropsBound(Foo.class)) { // how to implement this method?
    bind(Foo.class);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:25:25.963

是：用 @Nullable 注释 x 应该可以解决问题。当然，这只允许在 Foo 中注入缺失的 X，并不能避免注入 Foo。

[试试这个：您可以使用http://code.google.com/p/google-guice/wiki/CustomInjections](http://code.google.com/p/google-guice/wiki/CustomInjections)中描述的 TypeListener 。每当 Guice 尝试注入 Foo 时，您可以根据属性的状态阻止它。

# php - 如果一个字符串或另一个字符串等于第三个字符串

> ID：13596025
> 
> 赞同：0
> 
> 时间：2012-11-28T00:58:16.110
> 
> 标签：php, string, compare

我一直在绞尽脑汁，却一无所获。我可能错过了一些非常简单的东西，但我实际上需要的是。

如果设置了字符串 1 或 2，则与字符串 3 进行比较，前提是字符串 3 不为空。

```
if($_SESSION['code'] || $_GET['id'] <> $_POST['code'] && isset($_POST['code'])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:02:40.983

我不确定我是否遵循，但您的逻辑似乎表明：

```
if(isset($string3)){
    if(isset($string1)){
         strcmp($string1,$string3);
    }elseif(isset($string2)){
         strcmp($string2,$string3);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:01:44.050

```
if(isset($string3) && ((isset($string1) && $string1 == $string3) || (isset($string2) && $string2 == $string3))) 
```

像这样的东西会起作用。先看看isset $string3\. 然后一个包装的或运算符单独检查 isset $string1 或 2 以及它们是否等于字符串 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:02:05.460

```
if( ($a = $_SESSION['code'] ? $_SESSION['code'] : $_GET['id'])
 && isset($_POST['code']) && $a == $_POST['code']) { 
```

如果您想在两者都设置的情况下`$_GET['id']`覆盖：`$_SESSION['code']`

```
if( ($a = $_GET['id'] ? $_GET['id'] : $_SESSION['code'])
 && isset($_POST['code']) && $a == $_POST['code']) { 
```

更正确：

```
if( (isset($_SESSION['code']) || isset($_GET['id']))
 && ($a = isset($_GET['id']) ? $_GET['id'] : $_SESSION['code'])
 && isset($_POST['code']) && $a == $_POST['code']) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T01:04:21.747

```
if((!empty($_POST['code']) || !empty($_SESSION['code'])) && $_GET['id']<>$_POST['code']){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T01:04:23.933

这可能是

```
if(!empty($_SESSION['code']) && !empty($_GET['id']) && !empty($_POST['code'])
    ($_SESSION['code'] == $_POST['code'] || $_GET['id'] == $_POST['code'])) 
```

这意味着必须设置所有变量并具有值，然后比较 $_SESSION['code'] 或 $_GET['id'] 是否与 $_POST['code'] 相等

# c++ - 将 FFmpeg 与 Direct Show 一起使用

> ID：13596030
> 
> 赞同：0
> 
> 时间：2012-11-28T00:58:37.483
> 
> 标签：c++, ffmpeg, directshow

我在使用 DirectShow 处理来自 IP 摄像机的高清视频流时遇到问题。Direct Show 似乎不支持高清视频。我正在考虑使用 FFmpeg 从摄像机中获取 RTSP 流并将其通过管道传送到直接显示。我想知道这是否会产生高清视频？如果没有，您有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:32:09.650

简短的回答是的。

更长的答案是高清流与标清流没有什么不同。它们只是包含更多数据并且需要带宽。在您的情况下，您需要知道 IP 摄像机正在使用什么类型的编码。在大多数情况下，它应该是 H.264。要使用 directshow 播放高清流，您需要两个过滤器：

1.  用于从套接字接收数据的网络接收器过滤器
2.  用于解码流的编解码器过滤器

如果您使用像 Axis 这样的 IP cam，它将使用 H.264 编解码器，并且流将通过 RTP。

您可以查看 Mainconcept SDK 以获得过滤器的演示版本，以支持 HD over RTP/H.264

# java - 如何从 Object[] 转换为另一种数组类型？

> ID：13596031
> 
> 赞同：0
> 
> 时间：2012-11-28T00:58:38.017
> 
> 标签：java, classcastexception

我有一个通用的（我不太确定这是否是正确的术语..）方法，可以将对象添加到数组中。

```
@SuppressWarnings("unchecked")
public static <T>T[] appendArray(T[] a, T b)
{
    T[] temp = (T[])new Object[a.length + 1];
    System.arraycopy(a, 0, temp, 0, a.length);
    temp[a.length] = b;
    return temp;
} 
```

在 Eclipse 中，这段代码没有给我任何错误，没有警告（除了被抑制的“未检查”警告），而且在我看来，这应该可以工作。但是，当我尝试使用诸如。 .

```
Integer[] a=new Integer[]{1,2,3};
Integer b=4;
a = appendArray(a, b); 
```

在这种情况下，它为我提供了`ClassCastException`我发布的第二段代码的第 3 行。错误说，`[Ljava.lang.Object; cannot be cast to [Ljava.lang.Integer;`我既看不到也不明白为什么会这样做。我的意思是，我使用的是泛型，那么为什么除了我在实例化期间强制`Object[]`键入的那个之外，还有其他的呢？`T`如果它是第 4 行的那个（当然是在第 1 位代码中），为什么不在那里抛出异常，而不是在第 2 位代码的第 3 行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:05:58.600

代替 using `System.arraycopy`， use[`Arrays.copyOf`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf%28U%5B%5D,%20int,%20java.lang.Class%29)将数组实例化为泛型类型。

```
public static <T> T[] appendArray(T[] a, T b) {
    T[] temp = (T[]) Arrays.copyOf(a, a.length + 1, a.getClass());
    temp[a.length] = b;
    return temp;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:01:07.660

您**不能**将数组转换为不同的数组。

数组*确实*有值类型。这`[Ljava.lang.Integer;`就是说：一个整数数组。这是与对象数组不兼容的类型。

您是否注意到所有的 java 集合类都使用了`Object[]`？原因是这是他们确信可以存储数据的数组类型。

还要注意该`toArray`方法的外观。它*需要知道*您想要退出的数组类型。它无法从泛型中猜出类型；本质上你需要一个**原型**对象，然后你需要创建一个正确类型的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T01:14:27.877

其他答案涵盖了如何重写代码以使其工作，但是您问题的后半部分仍然存在，因此：

您似乎从根本上误解了演员表是什么。它不会改变任何东西的真实类型。它告诉编译器“嘿，假装这个 X 类型的引用实际上是一个 Y，相信我，我知道。”

`Integer i = (Integer) new Object();`

这不会导致 a`Object`变成`Integer`! 当 JVM 发现您对编译器撒谎时，它会在运行时引发错误。

错误发生的时间比您在示例中的预期晚的原因是“T”是 java 中的仅编译时概念。出于运行时目的，您可以将每个“T”替换为`Object`.

作为类型擦除过程的一部分，检查您是否声明此方法返回 an 的代码`Integer[]`被放入您的方法返回并尝试进行分配的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T01:03:49.117

泛型和数组不能混用！

有办法解决它。您可以使用特殊[`Array.newInstance()`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int%29)方法创建具有特定组件类型的数组对象：

```
public static <T> T[] appendArray(T[] a, T b) {
    T[] temp = (T[]) Array.newInstance(b.getClass(), a.length + 1);
    System.arraycopy(a, 0, temp, 0, a.length);
    temp[a.length] = b;
    return temp;
} 
```

此代码在调用时不会引发任何错误：

```
public static void main(String[] args) {
    Integer[] a = new Integer[] { 1, 2, 3 };
    Integer b = 4;
    a = appendArray(a, b);
    System.out.println(Arrays.toString(a));
} 
```

输出：

```
[1, 2, 3, 4] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T01:06:34.000

您可以`ArrayList`使用泛型创建一个泛型类型`T`并将其作为数组获取。

```
@SuppressWarnings("unchecked")
public static <T>T[] appendArray(T[] a, T b)
{
    T[] temp = new ArrayList<T>(Arrays.asList(a)).toArray(a);
    System.arraycopy(a, 0, temp, 0, a.length);
    temp[a.length-1] = b;
    return temp;
} 
```

# mysql - 检查列中的值是否存在于另一个表的列中

> ID：13596034
> 
> 赞同：1
> 
> 时间：2012-11-28T00:58:52.820
> 
> 标签：mysql

我有 `TABLE1 with COLUMNS A,B,...`并且想要检查 COLUMN A 的值是否在其他列表中，例如 TABLE2 中的 X 列。结果应为表 1 中的 C 列（布尔值 TRUE，FALSE）

有什么优雅的方法可以做到这一点吗？我现在正在做的是`SELECT +LEFT JOIN`进入一个新表（CREATE TABLE X SELECT ...）。有没有可能这样做`UPDATE TABLE1 SET C =....`所以没有其他表，只有旧的 TABLE1。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:17:11.057

尝试这个：

```
UPDATE    Table1 t1
LEFT JOIN Table2 t2 ON t2.X = t1.A
SET       t1.C = (CASE WHEN t2.X IS NOT NULL THEN TRUE ELSE FALSE END); 
```

# ios6 - 为什么 Game Center Group (grp) 名称不一致？

> ID：13596046
> 
> 赞同：2
> 
> 时间：2012-11-28T01:00:26.323
> 
> 标签：ios6, game-center

我有一个使用 GC 排行榜 my.example 的现有和已发布游戏。

然后我创建了一个使用相同排行榜的新应用程序，因此将它们放在同一个组中。

我使用我的标准代码来调用排行榜：

```
GKLeaderboardViewController *leaderboardViewController 
     = [[GKLeaderboardViewController alloc] init];
leaderboardViewController.leaderboardDelegate = thisDelegate;
leaderboardViewController.category = thisBoard; 
```

我一直在对此进行测试，但结果不一致。

对于新的（未发布的）游戏，我发现通过 grp.my.example 访问棋盘可以正常工作，这是应该的。

但是，对于我未发布的旧游戏版本，我发现如果我通过 grp.my.example 访问板，则会失败，而是获得默认板。但是，如果我恢复到 my.example 一切正常。

为了让事情变得更复杂，我添加了一个新板，grp.my.newexample。对于这个板子和这个板子，只有旧游戏需要 grp.my.newexample。

显然，我可以编写代码让旧游戏放弃现有排行榜的 grp 前缀。但是，我担心这是一个 Apple 错误，只有在我重新发布现有游戏之前才会出现。

当我发布时，任何人都可以确认这个问题是否会自行解决（以便一切都正确使用 grp）？

# .net - 将 .NET 应用程序移植到 Mac OS X

> ID：13596051
> 
> 赞同：0
> 
> 时间：2012-11-28T01:00:43.250
> 
> 标签：.net, macos, browser, c#-2.0, inno-setup

我的软件是使用 .NET 2.0 运行时、webbrowser 控件和其他几个第三方 .net dll/组件构建的，最后使用 dotnetreactor（仅我的 exe，而不是其他 .net dll/组件）进行加密，并使用 inno setup maker 构建。如何将它移植到 Mac OS X？有没有可以自动完成的软件？我的第一个偏好是使用 Visual Stduio IDE 中的任何设置，这些设置可以在 Mac 可执行文件中编译它，然后使用 Mac OSX 的设置制造商。

更新：

似乎没有直接的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:02:06.803

[Mono](http://www.mono-project.com/Main_Page)是一种流行的跨平台 C# 解决方案，尽管您可能需要重写一些东西。

# c++ - 生产者/消费者模型中的 SegFault

> ID：13596052
> 
> 赞同：0
> 
> 时间：2012-11-28T01:00:44.547
> 
> 标签：c++, pthreads, segmentation-fault, producer-consumer

我带着另一个我似乎无法克服的段错误回来了。

我已经弄清楚它到底是什么，它与 char* 字符串线有关。我用它来分解字节以获取此 pdf 文件以用于学校作业。

任何和所有的帮助表示赞赏！

```
void* consumer(void *temp)
{
int* stuff = reinterpret_cast<int*>(temp);
int x = *stuff;
char* string[];
stringstream stream1;
stringstream stream2;
int temp1=0;
int temp2=0;
int sent1=0;
int sent2=0;
ofstream fout;

strcpy(string,request); //SEGFAULT(11) ON THIS LINE, WHEN CALLING "string"
strcat(string,"Byte Range: ");
... 
```

完整的代码可以在这里找到；[https://www.dropbox.com/sh/dt90ot3z4v5nruy/1H9a5Cyb5A](https://www.dropbox.com/sh/dt90ot3z4v5nruy/1H9a5Cyb5A) mgetweb.h 和 mgetweb.cpp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:06:47.460

您还没有`new`字符串指针的内存，访问它是未定义的行为。

```
//  char* string[]; I guess that's not what you intent to do, declaring an array of pointers?

char* string = new char[BIG_ENOUGH_SIZE];
strcpy(string, request); 
```

# php - 从 MySQL Blob 加载图像格式 - PHP？

> ID：13596055
> 
> 赞同：0
> 
> 时间：2012-11-28T01:00:57.800
> 
> 标签：php, mysql, image

我的问题只是询问如何获取图像格式的 MySQL blob（即 png、gif、jpg）并将其保存为临时文件以供客户端加载。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:03:19.670

[`file_put_contents`](http://php.net/file-put-contents)?

或者，为了避免需要临时文件，您可以使用该`data:`方案，但是您需要知道相关图像的确切类型，并且浏览器存在限制。

# git - 除了网页，还有什么工具可以从 git 浏览文件？

> ID：13596058
> 
> 赞同：0
> 
> 时间：2012-11-28T01:01:09.100
> 
> 标签：git

我来自 Perforce。它允许我使用 p4v 浏览存储在服务器中的文件。我想知道 git 是否有类似的 GUI 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:34:01.233

如果您只想*查看*文件而不是签出文件，可以使用`git show ${revision}:path/to/file`，其中 ${revision} 可以是提交 ID、分支名称、标签名称...

[`tig`](http://jonas.nitro.dk/tig/)您也可以安装和使用`git`. 键入`t`您可以浏览提交所引用的树。

最后，您可以从给定的修订中签出文件/目录，但这当然会使您的工作目录与索引不同。您可以通过`git checkout ${revision} -- path/to/file`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:11:15.063

一般来说，您应该只检查您想要查看的修订版，使用`git checkout %revision%`. 如果这太慢了，你可能做错了什么;)。

要查看给定修订版中的特定文件，请使用`git show %revision%:filename`. 这也适用于查看目录，例如`git show head^:./`

如果您想要一个 gui 来执行此操作，请使用包含的`git gui`. `Repository > Browse Branch`文件就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:02:31.250

有了 git，就真的不需要这样的工具了。只需从服务器获取更改并在本地浏览。

# php - 保持从一页到下一页的滚动位置

> ID：13596059
> 
> 赞同：0
> 
> 时间：2012-11-28T01:01:09.827
> 
> 标签：php, javascript

单击链接后，我想保持从一页到下一页的滚动位置。

有人能告诉我怎么做吗？

例如，我想单击一个链接，`index.php`然后在打开下一页后，它应该具有与 中相同的滚动位置`index.php`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:06:39.863

在窗口退出时，使用 ajax 或 localstorage 将滚动位置存储在数据库（或只是一个文件）中。然后在新页面上，使用 ajax 或 localstorage 检索原始滚动位置并滚动到该位置。我不会为你编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:07:00.787

似乎是个坏主意，但你可以这样做（假设 jQuery 和现代浏览器）：

```
$("a").click(function() {
  localStorage["scrollPosition"] = $(window).scrollTop();
});

$(function() {
  $(window).scrollTop(localStorage["scrollPosition"]);
}); 
```

# java - PWC1232：超过嵌套请求调度的最大深度：20

> ID：13596063
> 
> 赞同：-1
> 
> 时间：2012-11-28T01:01:36.880
> 
> 标签：java, jsp, servlets

我收到此错误：

> ### HTTP 状态 500
> 
> **类型**异常报告
> 
> **信息**
> 
> **描述**服务器遇到一个内部错误 () 阻止它完成这个请求。
> 
> **异常**javax.servlet.ServletException: PWC1232: Exceeded maximum depth for nested request dispatchs: 20
> *note*异常的完整堆栈跟踪及其根本原因可在 GlassFish Server Open Source Edition 3.1.2.2 日志中找到。

这是我的 servlet 代码：

```
String url = "/panel.jsp";
RequestDispatcher dispatcher = request.getRequestDispatcher(url);
dispatcher.forward(request, response); 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:23:51.850

转发再次转发回同一个 servlet，导致无限转发循环。

要解决这个问题，*要么*使 servlet 的 URL 模式更加具体，使其不监听转发的 URL `/panel.jsp`，*要么*在请求范围内放置一些属性并在执行业务逻辑和转发之前检查该属性。第一种解决方案更值得推荐。

# ios - PNG 预乘 Alpha，iOS 模拟器与 iPad

> ID：13596065
> 
> 赞同：1
> 
> 时间：2012-11-28T01:01:48.083
> 
> 标签：ios, cocoa-touch, opengl-es, glkit

我`GLKTextureLoader`用来加载 32 位 PNG（在 GIMP 中创建）。`GLKTextureInfo`返回的结果在模拟器和 iPad 上都`GLKTextureInfoAlphaStateNonPremultiplied`显示。`alphaState`试验`glBlendFunc`和 GLKTextureLoader 我可以让它在 iPad 或模拟器上工作，但不能同时在两者上工作！

没有 GLKTextureLoader 的选项，并且具有以下混合函数：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

我上了 iOS 模拟器（注意文字上的光芒很亮）

![在此处输入图像描述](../Images/d060d939a0dfd1cb58cfc38bb4ad9918.png)

在第 4 台 iPad 上（注意文本上的发光是暗的）

![在此处输入图像描述](../Images/2b1e6843a69d0f3c5534f9b0a93f2302.png)

为什么有区别？`alphaState`是一样的。会是什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:44:44.770

[我在Apple Discussion](https://discussions.apple.com/message/8314057#8314057 "苹果讨论")中找到了答案。

> 我有完全一样的问题。XCode 将转换 PNG 图像，以便标头块是 CgBI（而不是 IHDR），这会混淆像 libpng 这样的 3rd 方库，因为 Apple 标头中的字符表示数据是私有格式。此操作仅针对目标设备进行 - 模拟器不受影响。有 4 种方法可以解决这个问题（从最简单到最难）。
> 
> 1) 将您的图像重命名为其他名称（例如 .pppng），XCode 打包工​​具将忽略您的文件。
> 
> 2）根据以下链接（http://www.imgtec.com/powervr/insider/sdk/KhronosOpenGLES1xMBX.asp），您需要为每个目标添加以下构建设置定义。IPHONEOPTIMIZEOPTIONS=-skip-PNGs 我很尴尬地说我还没有弄清楚在 XCode 项目设置中的哪个位置添加它。
> 
> 3) 教您的 PNG 解码器处理 Apple 的 CgBI 格式。
> 
> 4) 使用 Cocoa UIImage 类或 Texture2D.m 类。

**编辑：**在“构建设置”的“打包”中，我找到了一个默认为“是”的“压缩 PNG 文件”选项。

# jquery - JQUERY 随机多引号旋转器需要调整

> ID：13596068
> 
> 赞同：3
> 
> 时间：2012-11-28T01:01:50.827
> 
> 标签：jquery, quotes, rotator

我正在努力使我的多引号旋转器正常工作。

我有一个 JS fiddle 并运行[Jsfiddle - Multiple Quote Rotator](http://jsfiddle.net/2hPJY/8/)

```
jQuery(function(){
var quotes1 = [
[ '75', 'Happy Clients' ],
[ '25', 'Emails Typed a day' ],
];

var quotes2 = [
[ '14', 'Coffes a day' ],
[ '1', 'Squeacky Chair' ],
];
var quotes3 = [
[ '70', 'Phone Calls / Day' ],
[ '5', 'Spiders' ],
];
var quotes4 = [
[ '1000', 'Types on the keyboard' ],
[ '100%', 'Qualified Personel' ],
];
var quotes5 = [
[ '55', 'Planes' ],
[ '500', 'Girls' ],
];
var quotes6 = [
[ '160', 'Seo Campaigns running' ],
[ '1', 'Squeacky Chair' ],
];

$('.circle.one').loadText( quotes1, 200); 
$('.circle.two').loadText( quotes2, 400 ); 
$('.circle.three').loadText( quotes3, 600 ); 
$('.circle.four').loadText( quotes4, 800 ); 
$('.circle.five').loadText( quotes5, 1000 ); 
$('.circle.six').loadText( quotes6, 1200 );
});

$.fn.loadText = function( quotes, interval ) {
return this.each( function() {
    var obj = $(this);
    var quote = random_array( quotes );
    var delaytest = delaytest;
    var quote_text = '<p class="facts_h1">' + quote[[0],[0]] + '</p>' + '<p   class="facts_p">' + quote[[0],[1]] + '</p>';

    obj.parent().fadeOut( 'linear', function() { 
            obj.empty().html(quote_text );  
            obj.parent().fadeIn(500);
    });

    $("#quote-reload").click( function(){ 
            if( !obj.is(':animated') ) { 
                obj.loadText( quotes, interval );
           } 
    });
});
 }
 function random_array( aArray ) {
    var rand = Math.floor( Math.random() * aArray.length + aArray.length );
    var randArray = aArray[ rand - aArray.length ];
    return randArray;
 } 
```

我的问题是我希望我的 6 个引号**一个接一个**地出现，并带有动画。

我所能管理的只是全局淡入淡出......

我说得有道理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:57:40.867

> 我所能管理的只是全局淡入淡出......

那是因为您将`fadeIn`and`fadeOut`应用于所有元素的`parent()`容器。`.circle`将淡入淡出动画应用到对象本身。有关更多详细信息，请参见以下小提琴：

[http://jsfiddle.net/6DFfr/](http://jsfiddle.net/6DFfr/)

此外：

1.  用于`delay()`交错动画。
2.  使用`fadeTo()`而不是`fadeIn/fadeOut`-`fadeTo()`仅对不透明度进行动画处理，同时`fadeIn/fadeOut`也会隐藏元素，从而导致元素位置抖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:33:38.353

与其对它们中的每一个都应用一个函数，不如让一个函数作用于一个元素列表。

查看[此问题](https://stackoverflow.com/questions/12693418/jquery-calling-multiple-animations-in-a-row-on-click)以获取有关如何执行此操作的演示。

# c# - 一个计时器内的多部分动画

> ID：13596069
> 
> 赞同：1
> 
> 时间：2012-11-28T01:01:54.633
> 
> 标签：c#, wpf

我正在尝试创建一个执行以下操作的多部分计时器...

*   向下滑动画布对象。
*   在屏幕外更改对象。
*   向上滑动画布对象（到原始位置）。

这将由 Dispatcher 计时器每**5**秒触发一次，但我不确定如何让对象向上/向下滑动，因为我尝试为此使用循环导致应用程序锁定。

任何关于如何做到这一点的想法都会对我有很大的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:11:01.957

WPF 有一个很好的动画类来处理这样的事情。

这是一个简单的示例（仅代码后面）我在多个应用程序中使用此方法来快速创建动画。

```
 /// <summary>
    /// Creates a double animation.
    /// </summary>
    /// <param name="from">From position</param>
    /// <param name="to">To position</param>
    /// <param name="duration">The duration.</param>
    /// <param name="delay">The delay.</param>
    /// <param name="autoreverse">if set to <c>true</c> [autoreverse].</param>
    /// <param name="repeat">The times to repeat.</param>
    /// <returns>new double animation</returns>
    public static DoubleAnimationUsingKeyFrames GetDoubleAnimation(double from, double to, int duration, int delay, bool autoreverse, int repeat)
        {
            var doubleanimation = new DoubleAnimationUsingKeyFrames();
            doubleanimation.AutoReverse = autoreverse;
            doubleanimation.IsAdditive = false;
            Storyboard.SetDesiredFrameRate(doubleanimation, 30);
            doubleanimation.IsCumulative = false;
            doubleanimation.BeginTime = new TimeSpan(0, 0, 0, 0, delay);
            doubleanimation.Duration = new Duration(TimeSpan.FromMilliseconds(duration));
            doubleanimation.RepeatBehavior = repeat == -1 ? RepeatBehavior.Forever : new RepeatBehavior(repeat);
            EasingDoubleKeyFrame start = new EasingDoubleKeyFrame(from, KeyTime.FromPercent(0));
            EasingDoubleKeyFrame end = new EasingDoubleKeyFrame(to, KeyTime.FromPercent(1.0));
            doubleanimation.KeyFrames.Add(start);
            doubleanimation.KeyFrames.Add(end);
            return doubleanimation;
        } 
```

用法：

```
 myCanvas.BeginAnimation(Canvas.TopProperty, GetDoubleAnimation(100, 400, 2000,0,false,1)); 
```

这将在 2 秒内将画布从 100 垂直设置为 400。

xml:

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Canvas>
        <Canvas Name="myCanvas" Margin="77,102,191,102" Background="Black" Height="73" Width="113" />
    </Canvas>
</Window> 
```

# c - memcpy-ing 到 c 中结构指针的字段

> ID：13596077
> 
> 赞同：0
> 
> 时间：2012-11-28T01:02:36.007
> 
> 标签：c, pointers, struct

我在使用 struct 指针时遇到问题....下面是我的代码中的两个示例，它们基本上做同样的事情，除了 dsp 不是指针并且 InMemory[Idx] 是指针，如何在指针情况下使用 memcpy？

```
my_struct* InMemory[SIZE]

//works prints: tmp3:local_file (file name)

memcpy(dsp.result.list[i].owner_name,req.file_name,256);
char tmp3[256];
memcpy(tmp3,dsp.result.list[i].owner_name,256);
printf("tmp3:%s\n",tmp3);

//doesn't work, prints: tmp:_____<---nothing! ??
//I am trying to copy the result from above into a field of the struct pointer array 
char tmp2[256];
memcpy(InMemory[Idx]->filename,dsp.result.list[i].owner_name,256);
memcpy(tmp2,InMemory[Idx]->filename,256);
printf("tmp:%s\n",tmp2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:19:24.077

从您的代码中，您尚未分配 InMemory 的成员元素

```
for (i=0;i<SIZE;i++)
{ 
  // allocate elements here
  InMemory[i]->filename = malloc(....)
  // other allocations
}

// now use memcpy 
```

# php - 如何在 URI 中检索 http 或 https

> ID：13596079
> 
> 赞同：0
> 
> 时间：2012-11-28T01:02:43.823
> 
> 标签：php

我需要基于 http 或 https 做一些事情。例如：

```
$https = strpos($_SERVER['REQUEST_URI'], 'https') !== false;
if ($https) { ?>
    <script type="text/javascript">
    var a = 'a';
    </script>
<?php } else { ?>
    <script type="text/javascript">
    var b = 'b';
    </script>
<?php } ?> 
```

但这不起作用。无论我访问的页面是 http 还是 https，它总是转到第二个选项。有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:16:30.767

我同意@MichaelBertwoski 的评论，即如果您只是尝试为javascript 执行此操作，请像这样在javascript 中进行检测。

```
if (window.location.protocol == 'https:') {
    var a = 'a';
} else {
    var b = 'b';
} 
```

如果您需要 PHP 中的信息，您可以使用发布的其他答案之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:05:02.390

尝试`if (isset($_SERVER['HTTPS']))`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T01:05:26.190

`$_SERVER['REQUEST_URI']`只返回相对于服务器根目录的路径，而不是域或协议。此外，如果我要访问您的代码将失败`http://example.com/https-is-cool`。

相反，请尝试：

```
$https = !empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== "off"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T01:05:38.180

```
if(!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443){
    echo 'https';
}else{
    echo 'http';
} 
```

或作为变量：

```
$https = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443) ? true : false; 
```

# c# - 将文件从服务器下载到 Windows 手机

> ID：13596096
> 
> 赞同：0
> 
> 时间：2012-11-28T01:05:05.807
> 
> 标签：c#, windows-phone-7

我有一些要放在服务器和 Windows 手机上的 xml，我将下载这些文件，然后程序将进行计算。但我不想将文件放在服务器上，而不是我想要的使用 Dropbox/Skydrive 或任何其他方式下载这些文件。是好走，还是会有太多的开销？

或者请建议我应该将文件存储在哪里，以便稍后我可以下载文件以在我的 Windows Phone 应用程序下使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:22:18.667

Dropbox 官方还没有发布 Windows Phone 的 SDK，你仍然可以通过 SharpBox 项目使用它，点击[这里](http://sharpbox.codeplex.com)。

Skydrive 是更好的选择，特别适用于 windows phone 应用程序，因为两者都在同一平台上运行并提供更好的功能。Windows Phone 上 Skydrive 的响应时间应该比 Dropbox 快。

# list - Lisp S 表达式和列表长度/大小

> ID：13596097
> 
> 赞同：2
> 
> 时间：2012-11-28T01:05:08.853
> 
> 标签：list, lisp, common-lisp, s-expression

我正在尝试使用 Common Lisp 函数编写一个函数，该函数将计算一个 s 表达式中有多少个 s 表达式。例如：

```
((x = y)(z = 1)) ;; returns 2 
```

和

```
((x - y)) ;; returns 1 
```

嵌套表达式是可能的，所以：

```
((if x then (x = y)(z = w))) ;; returns 3 
```

我写了一个函数来查找长度，如果没有嵌套表达式，它就可以工作。这是：

```
(define (length exp)
  (cond
    ((null? exp) 0)
    (#t (+ 1 (length (cdr exp)))))) 
```

现在我修改了它以尝试支持以下嵌套表达式：

```
(define (length exp)
  (cond
    ((null? exp) 0)
    ((list? (car exp)) (+ 1 (length (cdr exp))))
    (#t (length (cdr exp))))) 
```

这适用于没有嵌套的表达式，但总是比嵌套表达式的答案小 1。这是因为以上面的示例为例`((if x then (x = y)(z = w)))`，这将`if`首先查看并满足第三个条件，将 cdr（表达式的其余部分作为列表）返回到`length`. 在达到 (x=y) 之前也是如此，此时`+1`返回 a。这意味着该表达式`(if x then .... )`尚未计算在内。

我可以通过哪些方式来解释它？添加`+2`将过度计算未嵌套的表达式。

我需要它在一个函数中工作，因为嵌套可以在任何地方发生，所以：

```
((x = y) (if y then (z = w))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:54:53.273

乍一看，您的代码只递归到右侧（cdr 侧）而不是左侧（汽车侧），所以这肯定是一个问题。

乍一看，这甚至比这更棘手，因为您并没有准确地计算 conses；您需要区分 cons 开始正确列表的情况与它是列表的 cdr 的情况。如果您要递归到 car 和 cdr，则该信息将丢失。我们需要将 sexp 作为一个适当的列表进行迭代，

```
(defun count-proper-list (sexp)
  (cond ((atom sexp) 0)
        (t (1+ (reduce #'+ (mapcar #'count-proper-list sexp)))))) 
```

但这也将计算顶级列表，因此总是返回比您想要的多一个。所以也许，

```
(defun count-proper-sublist (sexp)
  (1- (count-proper-list sexp))) 
```

# html - CSS 使 div 被压扁

> ID：13596107
> 
> 赞同：1
> 
> 时间：2012-11-28T01:06:21.200
> 
> 标签：html, css

所以这是我的html

```
<div class="container midLevel" id="quizInfo">
    <div class="quizDetailsContainer floatLeft" id="quizDescriptionContainer">
        <text class="quizPresentationHeader" id="quizTitle">Test QuizTitle - replaced by handlebars</text>
        <text class="quizPresentationSubHeader" id="quizDescription">TestDescription- replaced by handlebars</text>
    </div>
    <div class="quizDetailsContainer floatRight" id="quizCreatorContainer">
        <a href="#" class="quizPresentationHeader" id="quizUserName">Test User Name</a>
        <div class="container lowLevel" id="quizUserContentContainer">
            <ol>
                <li>
                    <text class="quizPresentationText">Test User Content</text>
                </li>
                <li>
                    <text class="quizPresentationText">Test User Content</text>
                </li>
                <li>
                    <text class="quizPresentationText">Test User Content</text>
                </li>
            </ol>
        </div>
    </div>

</div> 
```

这是我的CSS-

```
.container{
    background:#F2F2F2;
}

.midLevel{
    background:#BDBDBD;
    border-bottom-style:solid;
    border-width:2px;
}

.floatRight{
    float:right;
}
.floatLeft{
    float:left;
}

.clear{
    clear:both;
} 
```

现在， .container midLevel 正在被“压扁”，因为我看不到背景颜色并且边框底部出现在顶部。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:18:44.477

您需要`<div class='clear'></div>`在 .container 的结束标记之前添加一个。

它显示为“压扁”的原因是因为当您使用浮动时，无论您浮动什么都不会被视为常规渲染流程的一部分。因此 .container 将其中的浮动 div 视为它们不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:11:23.123

您需要添加`float: left`到`.container`.

# apache - 如何让我的 Web 服务器自动重建它所服务的文件？

> ID：13596109
> 
> 赞同：1
> 
> 时间：2012-11-28T01:06:26.083
> 
> 标签：apache, webserver, build-automation

我有时会编写仅限客户端的 Web 应用程序，我喜欢简单快速的开发周期。这导致我的项目布局明确没有构建步骤，因此我可以编辑源文件，然后在 Web 浏览器中重新加载。这并不总是对设计施加健康的约束。因此，我希望在我的*开发*环境中使用以下功能：

**每当服务器接收到`GET /foo/bar`请求并将其转换为文件`/whatever/foo/bar`时，它都会`cd /whatever && make foo/bar`在读取文件之前执行。**

完成此任务的最简单方法是什么**？**

最好的解决方案是 Apache 配置，最好是完全在`.htaccess`文件中；如果做不到这一点，一个轻量级的 Web 服务器已经具有这样的功能；或者可以通过编程来做到这一点。

* * *

由于我吸引了很多“不要那样做”的回应，让我向您保证几点：

*   这是仅限客户端的开发——提供的文件才是最重要的，而且构建可能非常轻量级（例如，将一组文件复制到目标目录布局中，或者将一些 .js 文件打包到单个文件中） . 此外，文件通常会在每个编辑和重新加载周期加载一次 - 因此交互式响应时间不是优先事项。
*   假设构建系统完全了解相关的依赖关系——如果没有任何改变，就不会发生重建。
*   如果尽管如此，它仍然非常缓慢，我肯定会放弃这个想法并寻找其他方法来改进我的工作流程 - 但我至少想试一试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:30:36.687

您可以使用[http://aspen.io/](http://aspen.io/)。

假设makefile有一些魔力，你可以做一个简单的：

```
import subprocess
RESULTFILE = "/whatever/foo/bar"
^L
subprocess.call(['make'])
response.body = ''.join(open(resultfile).readlines())
^L 
```

但如果它不那么神奇，您当然可以将构建过程编码到 simplate 本身（使用类似[https://code.google.com/p/fabricate/](https://code.google.com/p/fabricate/)之类的东西）并完全摆脱 makefile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:26:27.857

由于我是一个懒惰的草皮，我建议这样：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)\/(.*)(/|)$ /make.php?base=$1&make=$2 [L,NC] 
```

像这样的正则表达式模式提供了两个必需的参数 -

然后可以通过 PHP 函数 exec() 将其传递给 shell 脚本：

您可能需要在模式上方添加排除项或将包含项添加到模式中，例如通过单词定义第一个反向引用 - 否则它也会匹配其他请求（不应重写）。

可以像这样在 shell-script 中访问参数：

```
#!/bin/bash
cd /var/www/$1
make $2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T01:15:29.300

这似乎是一个非常糟糕的主意。您将为等待“制作”完成的每个请求添加大量延迟。在开发环境中还可以，但在生产环境中，您会降低性能。

也就是说，您可以编写一个简单的 apache 模块来处理这个问题：http: [//linuxdocs.org/HOWTOs/Apache-Overview-HOWTO-12.html](http://linuxdocs.org/HOWTOs/Apache-Overview-HOWTO-12.html)

我仍然建议考虑这是否是您想要做的。在开发中，您知道是否更改了需要重新制作的文件。在生产中，它是性能杀手。

# android - 从 SherlockActionBar 片段选项卡动态添加菜单项

> ID：13596113
> 
> 赞同：3
> 
> 时间：2012-11-28T01:06:51.330
> 
> 标签：android, actionbarsherlock

所以我一直在开发一个顶部有一个导航栏和几个选项卡的 Android 应用程序，这部分工作正常，但现在我希望能够从不同的片段动态地将菜单项添加到操作栏（因为一些片段可能有不同的可用选项）。到目前为止，无论我尝试了什么，我似乎都无法调用 onCreateOptionsMenu。这是我到目前为止所拥有的

```
//First I have a holder class that is used to navigate between the different Fragment Tabs
 public class ActionHolder extends SherlockFragmentActivity implements ActionBar.TabListener {....
//And then I have this method for switching Fragments based on what Tab is selected
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub
    int selectedTab = tab.getPosition();

    if (selectedTab == 0) {
        SalesMainScreen salesScreen = new SalesMainScreen();
        ft.replace(R.id.content, salesScreen);
    }
    else if (selectedTab == 1) {
        ClientMainScreen clientScreen = new ClientMainScreen();
        ft.replace(R.id.content, clientScreen);
    }..... 
```

现在这是选项卡的片段之一（SalesMainScreen），我希望将一些菜单项添加到操作栏中

```
 @Override
public void onCreate (Bundle savedInstanceState) {
    Log.i("message","the oncreate method was called");
    setHasOptionsMenu(true);
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved) {
    return inflater.inflate(R.layout.salesmainscreen, group, false);
}

@Override
 public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    Log.i("message", "the oncreatemenu method called");
    inflater.inflate(R.menu.menu_refresh, menu);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

我看到 OnCreate Log 消息被调用，但我根本没有看到 onCreateOptionsMenu Log 被调用。另外，我知道有时导入会导致问题，但是当我导入 Sherlock Menu 和 Menu Inflater 时，我会在 OnCreateOptionMenu 方法上收到关于它们不兼容的各种错误消息。在此设置中是否可以将菜单项动态添加到操作栏，或者我应该只添加项目然后不对那些不适用于正在显示的片段的项目执行任何操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T23:42:24.663

我有一个使用`SherlockActionBar`和选项卡的应用程序，每个选项卡都包含一个`SherlockFragment`. 主活动在操作栏中有自己的菜单，其中一个片段在操作栏菜单中添加了一个搜索项。

主要活动有以下几点：

```
class MainActivity extends SherlockFragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...        
        ActionBar bar = getSupportActionBar();
        bar.addTab(createThingOneTab());
        bar.addTab(createThingTwoTab());
        bar.addTab(createThingThreeTab());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    }

} 
```

选项卡中的片段具有以下内容：

```
class ThingOneFragment extends SherlockFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
        setHasOptionsMenu(true);
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        MenuItem search = menu.add("Search");
        search.setIcon(android.R.drawable.ic_menu_search);
        search.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        ...
    }

} 
```

当我启动主要活动时，`ThingOneFragment`默认情况下会显示该选项卡，并且我会在操作栏中看到搜索图标。当我选择其他选项卡时，搜索图标消失。您确实需要确保将 Sherlock 类用于`Menu`、`MenuInflater`等。

我不确定它是否会有所不同，但我的`TabListener`样子是这样的：

```
private TabListener createTabListener(final Class<? extends Fragment> clazz) {
    return new TabListener() {

        private Fragment mFragment;

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // no action
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if (mFragment == null) {
                mFragment = Fragment.instantiate(activity, clazz.getName());
            }
            getSupportFragmentManager().beginTransaction()
                                       .replace(android.R.id.content, mFragment)
                                       .commit();
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // no action
        }
    }; 
```

我不确定这是否会导致您的问题，或者它是否是处理选项卡的正确方法，但为了完整起见，我将其包括在内。

# lisp - LISP 术语

> ID：13596115
> 
> 赞同：4
> 
> 时间：2012-11-28T01:06:52.983
> 
> 标签：lisp, boolean, common-lisp

LISP 中的字母“t”是什么意思？

前任：

```
(defun last2 (lst)
   (cond ((null lst) nil)
       ((null (cdr lst)) (car lst))
        (t (last2 (cdr lst))))) 
```

我的教科书是一个课程包，所以它并不能完全解释所有的含义。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T01:12:38.120

T 是 Common Lisp 中的规范真值。在这里，它被用作 ELSE，确保 COND 的最后一个分支始终为真。（除 NIL 以外的任何值也都算作真。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T09:39:57.603

请参阅[Common Lisp Hyperspec 的词汇表以](http://www.lispworks.com/documentation/HyperSpec/Body/26_a.htm)获取[t](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_t.htm#t)。

> **t** n。1.一个。表示真的布尔值。湾。代表真的规范广义布尔值。（虽然除了 nil 之外的任何对象都被认为是一个广义布尔值，但通常在没有特殊理由更喜欢一个这样的对象而不是另一个时使用 t。） ...

# android - 安卓事件检测

> ID：13596116
> 
> 赞同：0
> 
> 时间：2012-11-28T01:06:56.870
> 
> 标签：android, events, detection

Android 如何检测事件？我不是在询问为事件实现不同的处理程序，而是决定事件类型的逻辑。例如，当用户在屏幕上执行滑动时，Android SDK 在哪里检测到这是滑动事件而不是滚动事件或其他事件？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:17:04.323

触摸事件通常由[`GestureDetector`](http://developer.android.com/reference/android/view/GestureDetector.html). 通常，触摸事件由 a 处理`View`，只需将它们传递给 a `GestureDetector`。它`GestureDetector`通过分析最近的触摸事件历史来检测何时存在某些特定的手势（点击、甩动等）。然后`GestureDetector`通知其中一个已注册的侦听器（通常是 的子类[`SimpleOnGestureListener`](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)）。

由听众决定手势的语义是什么。例如，a`ScrollView`将设置一个`OnGestureListener`通过快速滚动来响应投掷事件的 an。自定义视图可能会通过从视图中删除某些对象来对投掷做出反应。

# video-streaming - 页面上的多个 Flash 嵌入。两种情况。哪个更优化、更高效？

> ID：13596117
> 
> 赞同：1
> 
> 时间：2012-11-28T01:06:59.780
> 
> 标签：video-streaming, flash

我正在处理一个需要在单个页面上显示多个 Flash 电影的项目。该项目的目标是使用两个不同的 Flash 电影创建画中画效果。

我看到的仅有的两个选项是：

1.  创建一个在其中嵌入两个外部 Flash swf 的新 Flash 电影。样式将通过 Flash 完成。

2.  使用 html/css 将每个 Flash 电影嵌入页面和样式。

我的主要问题是关于内存优化。哪个效率更高并且占用更少的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:49:43.833

用任何权威来回答这个问题都可能很困难。

但是，任何涉及在 HTML 页面中在 Flash 之上或之下分层的东西，比如上面的选项 #2，都需要您在页面上[嵌入 SWF](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)，其中 wmode 参数可能是错误的且性能较低（`wmode="transparent"`或`wmode="opaque"`）。

默认的 wmode 设置是“window”，这允许 Flash 对渲染做出假设，这应该是更优化的性能明智。更重要的是，非标准的 wmode 主要阻止 Flash 使用硬件加速（一些浏览器仍然可以像 IE9 或 Mac 上的 Safari 一样，因为它们有操作系统的支持）。

其他 wmode 中出现的错误因浏览器而异，但开发人员通常别无选择，只能使用它们。这些问题往往是微妙的，不是想惊动你。

在内存使用方面，它们很可能是相似的。无论您在页面上（或在其他浏览器选项卡/窗口中）有多少 SWF，它们都由同一个 Flash 进程运行。

如果您正在使用视频或 Stage3D 做任何事情，那么在 Flash 的顶部/下方分层通常不是一个好主意。[Adobe](http://www.adobe.com/devnet/devices/articles/video_content_tv.html)的这篇文章有一个标题为“视频播放器和渲染优化”的部分，它提供了对性能问题的深入了解。它指的是“电视机顶盒”的非常受限的环境……同样的考虑也适用于我们有更多资源可玩的 PC。

并不是说要在 Flash 中完成所有工作。我在一两个网站上工作过，我们没有在 Flash 中完成所有工作（在视频上分层，等等），这并不是世界末日。

# jquery - 如何为jquery datetimepicker实例设置每次“今天”点击的日期？

> ID：13596120
> 
> 赞同：1
> 
> 时间：2012-11-28T01:07:11.440
> 
> 标签：jquery, jquery-ui-datepicker, datetimepicker

我在一个页面上有多个 jquery datetimepickers。尝试在“今天”按钮单击上设置日期，但为页面上的所有日期时间选择器设置以下日期？

如何仅设置具有焦点的那个（使用 Trent Richarsons jquery datetimepicker）？

```
 $.datepicker._gotoToday = function (id) {
    var inst = this._getInst($(id)[0]),
    $dp = inst.dpDiv;
    this._base_gotoToday(id);
    var tp_inst = this._get(inst, 'timepicker');
    now = new Date();
    var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
    this._setTime(inst, now_utc);
    $('.datetime').datepicker('setDate', now_utc);  // <- this woks but sets date for all datetimepickers!  how to I set for current focus datetimepicker
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:10:21.523

使用[`:focus`](http://api.jquery.com/focus-selector/)伪选择器，如下所示：

```
$('.datetime:focus').datepicker('setDate', now_utc); 
```

或者，您也可以为每个日期选择器指定一个特定的**id**，以便您可以通过它进行选择：

```
$('#idpicker').datepicker('setDate', now_utc); 
```

# java - 在 Java GUI 中动态调整 2D 绘制框的大小

> ID：13596122
> 
> 赞同：1
> 
> 时间：2012-11-28T01:08:05.520
> 
> 标签：java, swing, user-interface, awt

我正在通过 Java GUI 编写图形计算器（是的，我知道已经有库），当用户输入函数 IE x^6 时，我希望绘图框根据最小值和最大值动态调整自身大小。

例如，如果用户从 -4 到 4 输入 x^2，我的最小值为 0，最大值为 16，所以我想在框中显示整个图表，并正确调整大小。现在图表非常小，如果我使用 x^6 作为多项式，它看起来非常局促。

这就是我所在的地方。

```
 Graphics2D g2 = (Graphics2D) g;
    double myStart1 = Double.parseDouble(myStart);
    double myEnd1 = Double.parseDouble(myEnd);
    g2.translate(getWidth() / 2, getHeight() / 2);
    g2.scale(5.0, 5.0);
    g2.draw(new Line2D.Double( -myStart1 * 100,0,  -myEnd1 * 100,0));
    if (min < 0) {
        g2.draw(new Line2D.Double(0, -min * 100, 0, -max * 100));
    } else {
        g2.draw(new Line2D.Double(0, min * 100, 0, -max * 100));
    }
    g2.setColor(Color.RED);
    for (int i = 0; i < x.length; i++) {
        if (i + 1 < x.length) {
            g2.draw(new Line2D.Double(x[i], -y[i], x[i + 1], -y[i + 1]));

        } else {
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:58:37.780

至少考虑一下[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)，它会缩放以填充封闭的首选大小，`ChartPanel`并支持通过右键单击或鼠标滚轮进行缩放。

附录：如果外部库被禁止，[这里](https://stackoverflow.com/a/9373195/230513)`SineTest`引用的，可能是一种方法。

![在此处输入图像描述](../Images/900a3094cdff975c6ec9f4fb2e8d1fb9.png)

```
import java.awt.Dimension;
import java.util.Random;
import javax.swing.JFrame;
import org.jfree.chart.*;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/** @see https://stackoverflow.com/a/13597045/230513 */
public class ChartPanelTest {

    private static final Random random = new Random();

    private static XYDataset createDataset() {

        final XYSeries series = new XYSeries("Data");
        for (double x = -4; x < 4.01; x += 0.1) {
            series.add(x, Math.pow(x, 6d));
        }
        return new XYSeriesCollection(series);
    }

    private static JFreeChart createChart(final XYDataset dataset) {
        JFreeChart chart = ChartFactory.createXYLineChart(
            "f(x) = x^6", "x", "y", dataset,
            PlotOrientation.VERTICAL, false, false, false);
        return chart;
    }

    public static void main(String[] args) {

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        XYDataset dataset = createDataset();
        JFreeChart chart = createChart(dataset);
        ChartPanel chartPanel = new ChartPanel(chart) {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(640, 480);
            }
        };
        chartPanel.setMouseWheelEnabled(true);
        f.add(chartPanel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

# html - 在另一个中包含一个 html 文件

> ID：13596123
> 
> 赞同：0
> 
> 时间：2012-11-28T01:08:05.743
> 
> 标签：html, include

我的网页被分成几部分（html 文件）。我正在尝试将所有内容都包含在内

```
<!--#include file="../handlers/test_header.html" -->
<!--#include file="../handlers/test_body.html" -->
<!--#include file="../handlers/test_footer.html" --> 
```

这行不通。有更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:14:14.723

如果您使用 SSI，请尝试此代码，否则您必须在服务器上启用 SSI

```
<!--#include virtual="../handlers/test_header.html" --> 
```

# ruby-on-rails - 表单参数未正确散列

> ID：13596124
> 
> 赞同：2
> 
> 时间：2012-11-28T01:08:29.383
> 
> 标签：ruby-on-rails, ruby, forms

**首先**，这里是代码： http: [//pastie.org/5448967](http://pastie.org/5448967)

现在，这里是**场景**：我有一个项目对象 - 不要担心附件批次，因为我还没有为这些批次实施解决方案 - 它具有相关的分析请求，其中有分析的设置选项。也就是说，有一个用户可以从中选择的分析表，并且为每个选择的分析创建一个分析请求，将分析链接到项目。

这就是**问题**所在：当尝试更新分析请求时，我注意到的第一件事是表单中的参数没有像我期望的那样“散列”。

**这就是我想要的**：

```
params={:projects=>{"#{project_id}"=>{project_attribute, project_attribute, etc..., analysisrequests=>[array,of,analysis,ids]}, "#{project_id}"=>{project_attribute, project_attribute, etc..., analysisrequests=>[array,of,analysis,ids]}, ...} 
```

**这是我得到的**：

```
{"utf8"=>"✓", "_method"=>"put", "authenticity_token"=>"XfIr7zfVNdlg5HS3Letw4sI/MGNFTtqntQYrgjAh9TY=", "project"=>{"1832"=>{"project_number"=>"261", "nof_samples"=>"5", "analysisrequest"=>{"analysis_id"=>["", "8",
 "12"]}}, "status_id"=>"13", "rush_service"=>"0", "customer_id"=>"111", "project_notes"=>"test", "sample_desc"=>"test", "user_id"=>"1", "quoted_price"=>"1", "1834"=>{"project_number"=>"777", "nof_samples"=>"1", "analysisrequest"=>{"analysis_id"=>["", "3", "9", "20", "22"]}}}, "commit"=>"Submit Changes"} 
```

**显而易见**：我不太担心更改`"analysisrequest"=>{"analysis_id"=>["", "8", ...]}`为`"analysisrequest"=>["", "8", ...]`or `"analysisrequests"=>[]`（注意 s）。事实上，我这样做是为了在表单中呈现单个多选，而不是为与项目关联的每个请求（如果添加's'，它会这样做） - “analysis_id”嵌套很好，你可以看到每个请求都可以有`"analysisrequest"=>{"analysis_id"=>[],"project_id"=>[]}`，所以这显然是 Rails 在做它的工作。

**我最担心**的是，在哈希中第一个项目中的分析请求之后看到的附加参数在第二个之后没有出现。那，而且，这些附加参数不在“#{project_id}”键控的散列中，而是在它们自己的小世界中。这使我很难通过执行以下操作进行更新：

```
params[:projects].keys.each do |project_id|
'update entries based on project_id'
end 
```

有没有人可以就这个问题给我一些专家建议？我愿意用我的 IT 或化学服务来换取您的建议（我在实验室工作），因为我需要启动并工作。

**感谢阅读**，-Adam *tl;dr* - Form 并没有以我认为应该的方式“散列”表单中的属性。

--EDITS-- 2012 年 11 月 29 日-我仍然无法理解为什么参数散列会像现在这样倾斜，但是，如果我能弄清楚如何做的话，我已经想出了一个合理的解决方法事情：通过formtastic或我自己的方法配置删除选项。也就是说，已经通过项目的创建表单，我能够根据需要创建尽可能多的分析请求，只是现在我需要一种通过编辑表单添加和删除它们的方法。我可以看到集合中的一个选项设置为“删除”，其中数据库 ID 使用控制器级别的方法；然而，更紧迫的是能够以我还无法通过 Rails 3.2.1 实现的形式添加其他请求。我知道它在 2.3.5 中有效，但到目前为止，它不适用于我的配置。我'

+2 小时（稍后）- 到目前为止，实施了 Ryan Bates 的 ep.197 删除字段的方法；但是，我遇到了某种陷阱，即使我设置了 :allow_destroy => true，formtastic 或我的模型也不知道如何处理 _destroy 字段。也许它与链接的位置有关？这是我最新表单的代码（js 和应用程序助手代码可以在[这里](http://railscasts.com/episodes/197-nested-model-form-part-2)看到）： http: [//pastie.org/5454653](http://pastie.org/5454653)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:53:27.083

看看这个： http: [//guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

也许你应该有这些路线：

```
resources :projects do
  collection do
    get 'edit', action: 'edit_collection'
    put 'update_collection'
  end
end 
```

不要忘记`update_collection`在控制器中定义一个方法。

请注意，您可以在 edit_collection.html.erb 中使用类实例，而不是渲染页面并传入本地。

例如：

```
<% @projects.each do |project| %> 
```

代替

```
<% for project in projects %> 
```

# c++ - 相对于一个点旋转相机

> ID：13596125
> 
> 赞同：0
> 
> 时间：2012-11-28T01:08:33.813
> 
> 标签：c++, graphics, camera, glut

我需要从第三人称视角围绕玩家旋转相机。（没有什么花哨）。

这是我尝试的方法：

```
// Forward, right, and position define the plane - they have x,y,z components.

void rotate ( float angle, Vector interestPoint )
{
    Vector oldForward ( Forward );

    forward = forward * cos(angle) + right * sin(angle);    
    forward.Normalize();

    right = forward.CrossProduct ( up );
    right.Normalize();

    position = ( position + old_forward * position.Distance( interestPoint ) ) - (forward * position.Distance( interestPoint ) );

    this->angle += angle;
} 
```

问题是，如果我们说只是左转很多，物体和相机之间的距离就会增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:42:46.833

对于一个非常简单的`orbit`相机，就像大多数`3rd person`冒险游戏一样，你需要 4 样东西：

*   目标的位置
*   与目标的距离
*   方位角
*   极角

（如果您希望您的相机始终相对于目标的方向，您还需要提供目标的方向，在这种情况下，我将简单地使用世界方向）

有关参考，请参阅[球坐标系](http://en.wikipedia.org/wiki/Spherical_coordinate_system)。

你应该将你的方位角映射到你的水平控制上（并在你到达时让它循环`2 * PI`）并且你的极角应该映射到你的垂直控制上（或者如果玩家选择该选项并将其夹在`-PI`和之间则倒置`PI`- 注意`Up`如果你平行于它（`-PI`或`PI`）基于世界矢量的计算

该距离可以是固定的或由样条驱动，对于这种情况，我们将假设一个固定的距离。

因此，要计算您的位置，您可以从 开始`WorldForward`，这是`unit vector`您通常认为是您的前向的轴上的一个点，例如`(1,0,0)`（在这里，如果我们正在构建一个相对相机，我们将使用目标的前向矢量）然后您反转它 ( `* -1`) 去“从目标”“到你的相机”。

（以下是未经测试的伪代码，但您应该了解要点 - 另外，请注意它可以简化，我只是为了清楚起见）

下一步是`rotate`使用我们的方位角来处理这个向量，方位角是相机的水平方向分量。就像是：

```
Vector toCamera = WorldForward * -1;
Matrix horizontalRotation = Matrix.CreateRotationZ(azimuth); // assuming Z is up
Vector horizontalRotationPosition = horizontalRotation.Transform(toCamera); 
```

此时，您有一个可以围绕目标水平旋转的相机，现在要添加另一个轴，您只需使用极角旋转再次进行变换：

```
Matrix verticalRotation = Matrix.CreateRotationY(polar); // assuming Y is right
Vector finalRotatedVector = verticalRotation.Transform(horizontalRotationPosition); 
```

现在，我们所拥有的是一个`unit vector`指向相机应该在的位置，如果你将它乘以`distance`你想要远离你的目标并加上你的目标的位置，你应该得到你的 final `position`。请记住，如果取反，此单位向量表示`forward`您的相机的向量。

```
Vector cameraPosition = targetPosition + finalRotatedVector * distanceFromTarget; 
```

# php - array_unique 然后重新编号键

> ID：13596128
> 
> 赞同：72
> 
> 时间：2012-11-28T01:08:56.687
> 
> 标签：php, array-unique

> **可能重复：**
> [重新索引数字数组键](https://stackoverflow.com/questions/10524156/re-index-numeric-array-keys)

我有一个数组如下

```
Array
(
    [0] => 15/11/2012 - 18/11/2012
    [1] => 15/11/2012 - 18/11/2012
    [2] => 15/11/2012 - 18/11/2012
    [3] => 15/11/2012 - 18/11/2012
    [4] => 19/12/2012 - 24/12/2012
    [5] => 24/12/2012 - 01/01/2013
    [6] => 24/12/2012 - 01/01/2013
    [7] => 16/01/2013 - 01/02/2013
) 
```

我正在使用 array_unique 删除给我的重复项

```
 Array
(
    [0] => 15/11/2012 - 18/11/2012
    [4] => 19/12/2012 - 24/12/2012
    [5] => 24/12/2012 - 01/01/2013
    [7] => 16/01/2013 - 01/02/2013
) 
```

如何更改键以使它们是连续的-如下

```
 Array
(
    [0] => 15/11/2012 - 18/11/2012
    [1] => 19/12/2012 - 24/12/2012
    [2] => 24/12/2012 - 01/01/2013
    [3] => 16/01/2013 - 01/02/2013
) 
```

提前致谢

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-11-28T01:11:39.413

`array_values`最简单的方法是通过循环或更好的函数将它们放入一个新数组中。

`$new_array = array_values($original_array)`

[更多信息](http://php.net/manual/en/function.array-values.php)

# c++ - boolalpha 大写

> ID：13596129
> 
> 赞同：5
> 
> 时间：2012-11-28T01:09:02.037
> 
> 标签：c++

您如何将布尔值的 cout 生成的输出大写。

我知道如果我这样做了：

`cout << boolalpha << true;`

它会输出

`true`

我如何让它输出

`True`

我觉得它与 do_truename 和 do_falsename 有关，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T01:15:08.677

有那么一瞬间，我认为这可以使用`std::uppercase`，但似乎并非如此：这些仅适用于十六进制数字和指数之类的东西。因此，似乎确实需要一个`std::numpunct<char>`覆盖，但这并不是那么糟糕：

```
#include <iostream>
#include <locale>

struct numpunct
    : std::numpunct<char>
{
    std::string do_truename() const { return "True"; }
    std::string do_falsename() const { return "False"; }
};

int main()
{
    std::locale loc(std::cout.getloc(), new numpunct);
    std::cout.imbue(loc);
    std::cout << std::boolalpha << true << "\n";
} 
```

# c# - 试图做到这一点，当我点击我的 Windows 窗体按钮时，会显示我的文本文件中的下 3 个数字

> ID：13596135
> 
> 赞同：0
> 
> 时间：2012-11-28T01:09:27.720
> 
> 标签：c#, winforms

这是下面的代码。

我正在尝试这样做，以便当我单击 nextButton 按钮时，它会循环到我的文本文件中的下 3 个数字。我不知道哦，我在这里应该可以工作：[

```
namespace GPSProject
{
    class dataPoints
    {
        public int Count { get { return Points.Count; } }
        List<dataPoint> Points;
        //string p;

        public dataPoints(/*string path*/)
        {
            Points = new List<dataPoint>();
           // p = path;
            TextReader tr = new StreamReader(/*p*/"C:/Test.txt");
            string input;
            while ((input = tr.ReadLine()) != null)
            {
                string[] bits = input.Split(',');
                dataPoint a = new dataPoint(bits[0], bits[1], bits[2]);
                Points.Add(a);                
            }

            tr.Close();
        }          

        internal dataPoint getItem(int p)
        {
            if (p < Points.Count)
            {
                return Points[p];
            }
            else

                return null;
        }
    }

} 
```

以上是将文本文件分解为单个数字的类。

```
namespace GPSProject
{
    public partial class Form1 : Form
    {
        private int count;
        internal dataPoints myDataPoints;
        public Form1()
        {
            myDataPoints = new dataPoints();
            InitializeComponent();
        }

        private void buttonNext_Click(object sender, EventArgs e)
        {
            {

                 count++;
                    if (count == (myDataPoints.Count))
                    {
                        count = 0;
                    }

                dataPoint a = myDataPoints.getItem(count);
                textBoxLatitude.Text = a.CurLatitude;
                textBoxLongtitude.Text = a.CurLongtitude;
                textBoxElevation.Text = a.CurElevation;

            }
        }
    }
} 
```

上面是 Windows 窗体命名空间 GPSProject { class dataPoint { private string latitude; 私人字符串经度；私人字符串提升；

```
 public dataPoint()         //Overloaded incase no value available
        {
            latitude = "No Latitude Specified";
            longtitude = "No Longtitude Specified";
            elevation = "No Elevation Specified";

        }

        public dataPoint(string Latitude, string Longtitude, string Elevation)
        {

            // TODO: Complete member initialization
            this.latitude = Latitude;
            this.longtitude = Longtitude;
            this.elevation = Elevation;

        }

        public string CurLongtitude { get { return this.longtitude; } }

        public string CurLatitude { get { return this.latitude; } }

        public string CurElevation { get { return this.elevation; } }
    }
} 
```

最后，这是持有数字的班级。我试图让文本框显示的数字是 CurLongtitude/Latitue/Elevation 的周期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:57:07.360

首先要做的是为您的数据创建一个合适的容器：DataPoint 实体：

```
class DataPoint
{
    // Option 1: Field + read only property
    private string _latitude;
    public string Latitude { get { return _latitude; } }

    // Option 2: Property + compiler generated field
    public string Longitude { get; private set; }
    public string Elevation { get; private set; }

    // Constructor
    public DataPoint(string latitude, string longtitude, string elevation)
    {
        // Internally in this class we use fields
        _latitude = latitude;

        // Unless we use property option 2
        this.Longitude = longitude;
        this.Elevation = elevation; 
    }
} 
```

接下来我们可以向 DataPoint 类添加一个静态方法来从磁盘加载数据点：

```
public static List<DataPoint> LoadFromFile (string filename) 
{
    // The .NET framework has a lot of helper methods
    // be sure to check them out at MSDN

    // Read the contents of the file into a string array
    string[] lines = File.ReadAllLines(filename);

    // Create the result List
    List<DataPoint> result = new List<DataPoint>();

    // Parse the lines
    for (string line in lines)
    {
        string[] bits = line.Split(',');

        // We're using our own constructor here
        // Do watch out for invalid files, resulting in out-of-index Exceptions
        DataPoint dataPoint = new DataPoint(bits[0], bits[1], bits[2]);
        result.Add(dataPoint);
    }

    return result;
} 
```

现在我们已经有了所有的构建块。让我们制作应用程序：

```
public partial class Form1 : Form
{
    private int _index;
    private List<DataPoint> _dataPoints;

    public Form1()
    {
        // Since this is a simple test application we'll do the call here
        _dataPoints = DataPoint.LoadFromFile(@"C:\Test.txt");

        InitializeComponent();
    }

    private void buttonNext_Click(object sender, EventArgs e)
    {
        // Cycle the data points
        _index++;
        if (_index == _dataPoints.Count)
        {
            _index = 0;
        }

        // Get the specific data point
        DataPoint dataPoint = _dataPoints[_index];

        // The empty texts are UI only, so we could check them here
        if (dataPoint.Latitude == null || dataPoint.Latitude == "")
        {
            textBoxLatitude.Text = "No Latitude Specified";
        }
        else
        {
            textBoxLatitude.Text = dataPoint.Latitude;
        }

        // A shorter, inline version
        textBoxLongtitude.Text = String.IsNullOrEmpty(dataPoint.Longitude) ? "No Longitude Specified" : dataPoint.Longitude;

        // Or if we don't care about empty texts
        textBoxElevation.Text = dataPoint.Elevation;
    }
} 
```

当然，有很多方法可以使代码更短，或者使用 LINQ 等现代技术，但我尽量不要离你现有的代码太远。我还没有尝试过代码，我在这里输入了 SO :)

另外请注意如何格式化代码。正确的大小写和遵循标准使您的代码更容易被其他人阅读。

MSDN 有很多关于 .NET Framework 类的优秀示例和大量文档。

# mingw - mingw32-make 会改名为 make 吗？

> ID：13596137
> 
> 赞同：5
> 
> 时间：2012-11-28T01:09:52.103
> 
> 标签：mingw, mingw32

我安装了最新的mingw，发现没有mingw32-make了。有make.exe，所以想知道mingw32-make最近是不是改名为make.exe了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:55:21.260

我不知道您从哪里获得 MinGW，但一些发行版（如 nuwen 的）将其命名为`make.exe`，而另一些则将其命名为`mingw32-make.exe`（或`mingw32-make.exe`）。

我通常将其中一个复制到另一个，因此我在目录中具有相同的`mingw32-make.exe`和。我的理解是该名称用于避免与MSYS 中的冲突（参见[http://www.mingw.org/wiki/FAQ](http://www.mingw.org/wiki/FAQ)）。我不使用 MSYS，因此命名程序对我来说更方便，但有时构建脚本会专门针对.`make.exe``bin``mingw32-make.exe``make.exe``make.exe``mingw32-make`

# java - BufferedReader，检测是否还有文本要读取

> ID：13596138
> 
> 赞同：5
> 
> 时间：2012-11-28T01:09:57.373
> 
> 标签：java, bufferedreader, java-io

我正在运行一个线程，每次它运行时，它应该检查是否有新的行可以读取，`BufferedReader`尽管它在等待一行存在时卡住了，从而停止了整个代码。

```
if((inputLine = bufferedReader.readLine()) != null){
                System.out.println(inputLine);
                JOptionPane.showMessageDialog(null, inputLine);
} 
```

有没有办法更好地检查 a 中是否有`BufferedReader`要阅读的文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T01:15:14.980

不，没有简单的方法可以做到这一点。 `BufferedReader`有`ready`电话，但这仅适用于`read`电话，而不适用于`readLine`电话。如果你真的想要一个`readLine`保证不会阻塞的东西，你必须自己使用`read`和维护一个`char`缓冲区来实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:23:46.220

你为什么不先检查它是否准备好阅读？只需使用[`bufferedReader.ready()`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#ready%28%29).

**编辑：**

`ready`不会告诉你是否准备好了一行，它只会告诉你有东西要读。但是，如果您希望得到一条线，那么这对您有用。这个想法是，首先检查它是否准备好，然后阅读该行，这样当绝对没有什么要阅读的时候，线程就不会挂在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:17:02.170

该`readLine`方法将阻塞，除非它可以读取整行（由行终止字符分隔），或者已经到达输入的结尾：

[http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine) ()

您描述的情况是尚未到达输入的结尾，但缓冲区中没有足够的字符来构成“行”（即以行终止符结尾的一系列字符）。

您将不得不低于该`readLine`级别，可能是 Stream 级别本身。`InputStream`有一个名为 的方法`available()`，可以满足您的需求。

# r - 生成数据框和向量的组合

> ID：13596139
> 
> 赞同：7
> 
> 时间：2012-11-28T01:10:02.327
> 
> 标签：r

我知道`expand.grid`是创建给定向量的所有组合。但是有没有办法通过将数据框中的每一行视为唯一来生成数据框和向量的所有组合。例如，

```
df <- data.frame(a = 1:3, b = 5:7)
c <- 9:10 
```

如何创建一个新的数据框，它是`df`和`c`不扩展的组合`df`：

```
df.c:
a b c
1 5 9
2 6 9
3 7 9
1 5 10
2 6 10
3 7 10 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-01-20T12:57:17.783

至于我最简单的方法是`merge(df, as.data.frame(c))`

```
 a b  c
1 1 5  9
2 2 6  9
3 3 7  9
4 1 5 10
5 2 6 10
6 3 7 10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T01:15:03.243

当您的数据框每行超过两列时，这可能无法扩展，但您可以只`expand.grid`在第一列上使用，然后`merge`在第二列上使用。

```
df <- data.frame(a = 1:3, b = 5:7)
c <- 9:10
combined <- expand.grid(a=df$a, c=c)
combined <- merge(combined, df)
> combined[order(combined$c), ]
  a  c b
1 1  9 5
3 2  9 6
5 3  9 7
2 1 10 5
4 2 10 6
6 3 10 7 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T01:37:10.023

你也可以做这样的事情

```
do.call(rbind,lapply(9:10, function(x,d) data.frame(d, c=x), d=df)))

# or using rbindlist as a fast alternative  to do.call(rbind,list)
library(data.table)
rbindlist(lapply(9:10, function(x,d) data.frame(d, c=x), d=df))) 
```

或者

```
rbindlist(Map(data.frame, c = 9:10, MoreArgs = list(a= 1:3,b=5:7))) 
```

# android - 获取 trigger.io facebook 模块的 android 密钥哈希

> ID：13596140
> 
> 赞同：4
> 
> 时间：2012-11-28T01:10:10.430
> 
> 标签：android, facebook, trigger.io

在他们的 Facebook 模块的 trigger.io 文档中，它有一个“提示”，用于将您的 Android 密钥哈希上传到 Facebook：

> 在 Android 上，Facebook 需要用于签署您的应用程序的密钥的哈希值，以确认您的应用程序应该被允许访问 Facebook API。最简单的配置方法是简单地开始使用 Facebook API，任何 API 方法都会返回一条错误消息，其中包括哈希和要访问的 URL 以进行配置。

是否有任何示例代码应该生成包含哈希的此错误？还是另一种获取哈希的方法？

如果我将 Facebook 应用程序安装到模拟器上，我会遇到身份验证错误，但它不会返回密钥哈希。

我查看了官方的 Android 文档，但看起来应该有一个名为的文件，`~/.android/debug.keystore`但 trigger.io 必须将此文件放在不同的位置（或将其托管在其端以进行远程构建）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:03:41.457

通过 Toolkit 运行应用程序时，您应该在日志输出中看到所需的哈希值，我认为它不会导致错误回调，因为它是由 Facebook SDK 直接注销的（文档肯定会更清楚） .

如果您想直接使用工具包使用的密钥库，您可以`.template/lib/debug.keystore`在您的应用程序文件夹中找到它，您还可以在工具包的本地设置选项卡中指定您自己的密钥库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:51:23.830

直到我尝试在我的 Facebook 应用程序设置中放置一个伪造的哈希键之前，我也没有记录哈希值。

在我这样做之后，我将此错误回调添加到我的登录函数中：

```
function (err) {
  forge.logging.info(err);
} 
```

然后 Facebook 说我的哈希值与我的应用程序提供的哈希值不匹配，并在日志中给了我正确的哈希值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-03T10:56:18.507

Trigger.io 引入了新`forge.facebook.getKeyHash(success, error)`方法，以帮助以编程方式轻松获取 Key Hash。新方法在[Facebook Module v2.11 及更高](https://trigger.io/modules/facebook/current/versions/)版本中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T05:12:18.567

转到您的 Trigger.io 应用程序目录并运行`keytool -exportcert -alias androiddebugkey -keystore .template/lib/debug.keystore | openssl sha1 -binary | openssl base64`

如果系统提示您输入密钥库密码，请不要输入任何内容，只需按 Enter。

# dotnetopenauth - 使用 DotNetOpenAuth 的更小的 Google 登录窗口

> ID：13596142
> 
> 赞同：0
> 
> 时间：2012-11-28T01:10:26.527
> 
> 标签：dotnetopenauth

我在 DotNetOpenAuth 中使用 GoogleOpenIdClient 进行身份验证。但是，如果用户没有登录，我会被发送到一个巨大的窗口，这是次优的，因为我们试图在弹出窗口中进行身份验证。如何修改它以使登录屏幕更小？

# c - 将指向数组的指针传递给函数

> ID：13596144
> 
> 赞同：1
> 
> 时间：2012-11-28T01:11:11.803
> 
> 标签：c

我将我的信息存储在指向结构的指针数组中。换句话说，数组的每个元素都是一个指向链表的指针。

我不知道数组应该有多长，所以不是在我的 main() 函数中初始化数组，而是初始化双指针

```
struct graph** graph_array; 
```

然后，一旦我获得了数组的长度，我尝试使用函数 GraphInitialize 初始化 graph_array 的每个元素：

```
int GraphInitialize(struct graph* *graph_array,int vertices)
{ 
  struct graph* graph_array2[vertices+1];
  graph_array = graph_array2;
  int i;

  for (i=0;i<vertices+1;i++)
  {
    graph_array[i] = NULL;
  }

  return 0;
} 
```

但是由于某种原因，这不会将更新的 graph_array 返回给 main()。基本上，此函数在本地更新 graph_array，并且没有进行任何更改。结果，每当我尝试访问 graph_array 的元素时，它都会出现故障，因为它没有被初始化。我究竟做错了什么？

编辑：在与 Tom Ahh 的会议之后，我应该添加一些其他的东西，让这更加混乱。

我不直接从 main() 调用 GraphIntialize。相反，我从 main 调用 getdata()，并将指向 graph_array 的指针传递给 getdata，如下所示。

```
 getdata(argc, argv, vertpt, edgept, &graph_array)

    int getdata(int argc, char *argv[], int *verts, int *edges, struct graph* **graph_array) 
```

然后 getdata 从我的输入文件中获取顶点数，并使用它来调用 GraphInitialize：

```
 if ((GraphInitialize(&graph_array, *verts)) == -1)
    {
      printf("GraphCreate failed");
      return 0;
    } 
```

这会导致错误：“预期为‘struct graph 3ASTERISKS’，但参数的类型为‘struct graph 4ASTERISKS’。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:15:36.820

当您将某些内容分配给 时`graph_array`，您只需将其分配给其本地副本。调用者将无法看到在函数中对其所做的更改。您需要通过指针值传递它才能更改其值。将您的函数原型更改为`int GraphInitialize(struct graph ***graph_array,int vertices)`，当您调用它时，使用`GraphInitialize(&graph_array, 42)`.

代码中的第二个问题是，当您创建时`graph_array2`，您将其声明为`GraphInitialize()`函数的本地。因此，在退出函数时， graph_array2 会被销毁，即使您将其分配给`*graph_array`. （星号取消引用指针以将其分配给它指向的值）。

将您的分配更改为`*graph_array = malloc(sizeof(*graph_array) * vertices);`，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:22:41.230

内存分为栈和堆两部分。Malloc 会从堆中返回一块内存，它存在于函数之间，但必须被释放。因此，您的程序必须小心跟踪 malloced() 内存并对其调用 free()。

声明一个变量 graph_array2[vertices+1] 在栈上分配一个局部变量。当函数返回时，堆栈指针被弹出“释放”在函数调用中分配的内存。您不必手动管理内存，但是当函数调用结束时，它不再存在。

有关这两种分配方式的一些讨论，请参见此处： [http ://www.ucosoft.com/stack-vs-heap.html](http://www.ucosoft.com/stack-vs-heap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T01:26:28.603

您正在使用 C99 风格的本地数组分配。函数返回时数组消失。相反，您需要用于`malloc()`分配将在函数之后持续存在的内存。您可以使用`typedefs`使您的代码更具可读性：

```
typedef struct graph_node_s {  // linked list nodes
  struct graph_node_s *next;
   ...
} GRAPH_NODE;

typedef GRAPH_NODE *NODE_REF;  // reference to node
typedef NODE_REF *GRAPH;       // var length array of reference to node

GRAPH AllocateGraph(int n_vertices)
{
  int i;
  GRAPH g;

  g = malloc(n_vertices * sizeof(NODE_REF));
  if (!g) 
    return NULL;
  for (i = 0; i < n_vertices; i++)
    g[i] = NULL;
  return g;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T01:44:33.750

你有两个问题。

首先，`graph_array2`有*auto extent*，意味着它只存在于它的封闭范围内，也就是`GraphInitialize`函数的主体；一旦函数退出，该内存就会被释放，并且`graph_array`不再指向任何有意义的地方。

其次，对参数的任何更改`graph_array`都是函数本地的；更改不会反映在调用者中。请记住，所有参数都是*按值*传递的；如果将指针传递给函数，并且希望指针的值被函数修改，则必须将指针传递给指针，如下所示：

```
void foo(int **p)
{
  *p = some_new_pointer_value();
  return;
}

int main(void)
{
  int *ptr = NULL;
  foo(&ptr);
  ...
} 
```

如果您打算为`InitializeGraph`数组分配内存，则需要执行以下操作：

```
int InitializeGraph(struct graph ***graph_array, int vertices)
{
  *graph_array = malloc(sizeof **graph_array * vertices);
  if (*graph_array)
  {
    int i;
    for (i = 0; i < vertices; i++)
    {
      (*graph_array}[i] = NULL; // parentheses matter here!
    }
  }
  else
  {
    return -1;
  }

  return 0;
}

int main(void)
{
  int v;
  struct graph **arr;
  ...
  if (GraphInitialize(&arr, v) == 0)
  {
    // array has been allocated and initialized.
  }
  ...
} 
```

后缀运算符 like`[]`比一元运算符 like 具有更高的优先级`*`，因此表达式`*arr[i]`被解释为`*(arr[i])`; 我们正在取消引用`i`数组的第 ' 个元素。在`GraphInitialize`中，我们需要在下标`graph_array` *之前*`graph_array`取消引用（不是数组，它*指向*一个数组），所以我们需要写`(*graph_array)[i]`.

# c# - 由于 Request.Form 中的字符编码，字符串中的问号

> ID：13596147
> 
> 赞同：3
> 
> 时间：2012-11-28T01:11:30.087
> 
> 标签：c#, asp.net

我有一个文本区域，我在其中键入一些 unicode 字符，这些字符在字符串到达​​服务器时变成问号。在输入中，我输入了以下内容：

> 不要“引用”我的话。

在我签`Request.Form["fieldID"]`入的服务器上`Page_Load()`，我看到：

> “不要在这方面‘引用’我的话。”

我检查了我的 web.config 文件，它说`<globalization requestEncoding="utf-8" responseEncoding="utf-8" />`。还有什么我应该检查以确保启用 UTF-8 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:13:24.933

当传递 UTF-8 空值时，通常会出现这样的问号。

您需要对字符串进行[HTML 编码。](https://stackoverflow.com/questions/2991970/html-encoding-with-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:46:28.177

检查`Page`where`form`和/或`accept-charset`的编码`form`。

我可以复制你所看到的`ISO-8859-1`- 例如

```
<form action="foo" method="post" accept-charset="ISO-8859-1">
   ....
</form> 
```

**在 VS 观察窗口中**：

* * *

检查`Request.Form`（在访问密钥本身之前）：

```
message=Don%ufffdt+%ufffdquote%ufffd+me+on+that. 
```

检查`Request.Form["message"]`- 访问集合键，这意味着 ASP.Net 已经*自动 urldecode*：

```
"Don�t �quote� me on that." 
```

似乎*某些*东西正在覆盖该特定页面上的 web.config 设置（？）

嗯...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:10:56.390

我再次解决了我自己的问题。这很简单。简短的回答是在将任何响应发送回客户端之前添加以下内容：

```
Response.ContentType = "text/html; charset=utf-8"; 
```

长答案是，称为缓存模式的“功能”通过编写实际上只是缓存响应的 UTF-8 编码文件来规避所有其他响应数据。在写入文件之前添加该行解决了我的问题。

```
if (cacheModeEnabled) {
    Response.ContentType = "text/html; charset=utf-8"; // WriteFile doesn't know the file encoding
    Response.WriteFile(Server.MapPath("CacheForm.aspx"), true);
    Response.End();
} else {
  // perform normal response here
} 
```

感谢所有的答案和评论。他们肯定帮助我解决了这个问题。最值得注意的是，[Fiddler2](http://www.fiddler2.com/fiddler2/)让我看到了请求和响应中到底是什么。

# sql-server - 如何使用另一个表中的值更新表中的多行？

> ID：13596149
> 
> 赞同：0
> 
> 时间：2012-11-28T01:11:37.077
> 
> 标签：sql-server, sql-update

```
UPDATE Products 
SET Products.Quantity = Products.Quantity + ShoppingCart.Quantity
FROM Products INNER JOIN ShoppingCart
    ON ShoppingCart.ProductID = Products.ProductID 
WHERE ShoppingCart.DateAdded < GETDATE()- 7
DELETE FROM ShoppingCart
WHERE DateAdded < GETDATE()- 7 
```

这个查询需要做这个工作：

在 ShoppingCart 中添加的超过 7 天的产品将被删除，其数量将退回到该产品的可用数量以进行销售。但这里的问题是只有第一个产品的数量被添加回 Products.Quantity 字段。其余的不计算在内并重新添加到产品表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:35:42.137

我假设以下初始数据： 产品：

```
PRODUCTID   QUANTITY
1             10
2            210
3              0 
```

购物车：

```
CARTID  PRODUCTID   QUANTITY    DATEADDED
21          1           3           2012-11-20
24          1           1           2012-11-19
22          2           2           2012-11-25
23          3           3           2012-11-20 
```

你会得到以下输出：

产品：

```
PRODUCTID   QUANTITY
1             14
2            210
3              3 
```

发生的情况是，对于 Products 中的每一行，Quantity 都被更新了“x”次，其中“x”是 ShoppingCart 中匹配的行数。但是，在每次迭代中，“Products.Quantity”持有的值是初始值，因此最终结果只是将 Products.Quantity 中的初始值加上 ShoppingCart 中最后匹配记录的 Quantity 值。

例如，在上面的数据集中，产品 1 的数据库中会发生以下等效操作：

```
UPDATE Products SET Quantity = 10 + 1 WHERE ProductId = 1;
UPDATE Products SET Quantity = 10 + 3 WHERE ProductId = 1; 
```

所以最终值是 13，而不是您期望的 14。基本上，在 INNER JOIN 中评估的最后一行获胜，其余的最终被有效地忽略。

为了解决这个问题，您需要在执行 set 命令之前聚合数据。我相信以下会解决问题。我在内联视图中汇总每个产品的所有过期数量，然后使用该值进行更新：

```
UPDATE Products 
SET Products.Quantity = Products.Quantity + Expired.Quantity
FROM Products 
INNER JOIN (SELECT S.ProductId, SUM(S.Quantity) AS Quantity 
              FROM ShoppingCart S 
             WHERE S.DateAdded < GETDATE()- 7
          GROUP BY S.ProductId) AS Expired
    ON Expired.ProductID = Products.ProductID 
```

我使用[SQL Fiddle](http://sqlfiddle.com/#!3/40da8/6/8)来测试它。

# windows - Windows 8 Store App Convert 试用购买

> ID：13596154
> 
> 赞同：0
> 
> 时间：2012-11-28T01:12:16.857
> 
> 标签：windows, windows-8

我有一个 30 天后过期的应用程序。之后，您将收到一条过期消息并购买。我必须购买的代码是：

```
LicenseInformation licenseInformation = CurrentApp.LicenseInformation;
         if (licenseInformation.IsTrial)
    {

        try 
        {
            await CurrentApp.RequestAppPurchaseAsync(false); 
```

出于某种原因，有时什么也没发生，有时我会收到一条消息，该应用程序不再可用。

有人知道为什么不要求他们购买吗？

# r - 加入/合并数据框中的两列

> ID：13596155
> 
> 赞同：5
> 
> 时间：2012-11-28T01:12:23.097
> 
> 标签：r, join, merge, data-management

假设我有这些数据，

```
(df <- data.frame( col1 = c('My','Your','His','Thir'), col2 = c('Cat','Dog','Fish','Dog')))

  col1 col2
1   My  Cat
2 Your  Dog
3  His Fish
4 Thir  Dog 
```

我想像这样组合列

```
`some magic`

  col1 col2      col3
1   My  Cat    My Cat
2 Your  Dog  Your Dog
3  His Fish  His Fish
4 Thir  Dog  Thir Dog 
```

我该怎么办？甚至可能像这样使用逗号（，），

```
`some magic`

  col1 col2      col3
1   My  Cat    My, Cat
2 Your  Dog  Your, Dog
3  His Fish  His, Fish
4 Thir  Dog  Thir, Dog 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T01:15:40.160

`df$col3 <- paste(df$col1, df$col2, sep=",")`. 您还可以使用`sprintf`和`paste0`功能。

```
df$col3 <- paste(df$col1, df$col2, sep=",") # comma separator
df$col3 <- paste0(df$col1, df$col2) # for no separator 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:29:16.327

如果您想将它们保留为两者的列表，（而不是连接两者的字符串），那么以下将很好用

```
within(df, col3 <- Map(list, as.character(col1),as.character(col2)))  

  col1 col2      col3
1   My  Cat   My, Cat
2 Your  Dog Your, Dog
3  His Fish His, Fish
4 Thir  Dog Thir, Dog 
```

`Map`是一个简单的包装器`mapply(..., SIMPLIFY = FALSE)`

# gcc - 如何将 Ada 中的库与 Fedora 17 上的 GNAT 链接？

> ID：13596156
> 
> 赞同：1
> 
> 时间：2012-11-28T01:12:22.800
> 
> 标签：gcc, fedora, ada, gnat

我尝试用 ada-zlib 编译单元。安装包 ada-zlib-dev。在我写的代码`with Ada.Text_IO;`中。GNAT 参考手册指出，如果库位于 ADA_INCLUDE_PATH 环境变量的目录中，则不需要额外的编译器参数。但它是空的。我应该如何设置该变量来编译代码？

* * *

**更新：**

代码是来自 zlib-ada的[read.adb 。](http://zlib-ada.cvs.sourceforge.net/viewvc/zlib-ada/zlib-ada/read.adb?revision=1.8&view=markup)它作为示例提供。命令行：

```
gnatmake read.adb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:11:21.067

我终于找到了答案。

不需要设置环境变量。库的 .gpr 文件位于 /usr/lib/gnat。您需要为您的项目编写这样的 .gpr 文件：

```
with "<name of lib's .gpr file related to /usr/lib/gnat";
project SUFO is
        for Source_Dirs use ("src");
        for Object_Dir use "obj";
        for Exec_Dir use "bin";
        for Main use ("src/main.adb");
end SUFO; 
```

`gprbuild`并在您放置 .gpr 文件的项目目录中运行命令。

# gwt - GWT Highchart 比较系列

> ID：13596158
> 
> 赞同：1
> 
> 时间：2012-11-28T01:12:27.293
> 
> 标签：gwt, highcharts, highstock

我正在使用带有 org.moxieapps.gwt.highcharts`GWT`包装器的[Highstock](http://sourceforge.net/projects/gwt-highcharts/)

在 highchart 的官方 API 中，我可以设置一个选项来比较数据系列。

```
plotOptions: {
    series: {
        compare: 'percent'
    }
}, 
```

设置完成后，我可以通过变量访问工具提示中的百分比变化`{point.change}`

我想知道如何`{point.change}`通过`ToolTipFormatter`. （可能在`ToolTipData`对象中？）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T14:52:41.363

找到一种方法是使用 setPointFormat 而不是 ToolTipData

下面的例子：

```
StringBuffer point = new StringBuffer();
point.append("<tr style=\"height : 15px;\"><td style=\"height : 15px;font-weight:bold; font-size: 11px; padding-right:5px; color:{series.color}\">{series.name}:</td>");
point.append("<td style=\"height : 15px; font-size: 11px; color: black; text-align: right\">{point.y:.2f} ({point.change}%)</td></tr>");

chart.setToolTip(
        new ToolTip()
                .setShared(true)
                .setCrosshairs(true)
                .setUseHTML(true)
                .setOption("yDecimals", 2)
                .setOption("xDateFormat", "%d-%b-%Y")
                .setOption(
                        "headerFormat",
                        "<span style=\"font-size: 12px; font-weight:bold;\">{point.key}</span><br/><table cellpadding=\"0\" cellspacing=\"0\">")
                .setPointFormat(point.toString()))
                .setOption("footerFormat", "</table>"); 
```

# sql - 如何在 SQL 中进行数据重组

> ID：13596162
> 
> 赞同：2
> 
> 时间：2012-11-28T01:13:19.350
> 
> 标签：sql, sql-server, tsql, plsql

我有一个如下所示的订单表，其中每个组的每个订单记录都放在一行上。现在我想通过将一组的所有订单放在一个单元格中并用“，”分隔来使这个紧凑并按组聚合数据（结果表在原始表下方）。

你能告诉我如何在 SQL 中实现这一点吗？

非常感谢！

这是原始表格：

```
Group    Order
1        a
1        b
1        c
2        d
2        e
3        f 
```

这是转换后的紧凑表：

```
Group    Orders
1        a,b,c
2        d,e
3        f 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:40:49.793

这将有助于

**T-Sql (Sql Server 2005 +)**

```
Declare @t Table([Group] Int, [Order] Varchar(20))
Insert Into @t Values(1,'a'),(1,'b'),(1,'c'),(2,'d'),(2,'e'),(3,'f')

Select [Group],
    Orders = Stuff((Select ',' + Cast([Order] As Varchar(100))
     From @t t2 Where t2.[Group] = t1.[Group]
     For Xml Path('')),1,1,'')
From @t t1
Group By t1.[Group] 
```

**Pl/Sql Oracle 11g R2 +**

```
SELECT [Group],ListAgg([Order],',') Within Group (Order By [Group]) Orders
FROM ORDER
GROUP BY [Group]; 
```

**PL/Sql Oracle 10g +**

```
SELECT [Group],WM_Concat([Order],',') Orders
FROM ORDER
GROUP BY [Group]; 
```

![在此处输入图像描述](../Images/3e1f9cfb16e27c2b6322c193bccd0030.png)

# javascript - jQueryUI 1.9：如何检查已初始化的小部件（无法在初始化之前调用方法）

> ID：13596163
> 
> 赞同：6
> 
> 时间：2012-11-28T01:13:21.300
> 
> 标签：javascript, jquery-ui

我目前正在将一些代码从 1.8 迁移到 1.9.2，并且我面临着小部件在初始化之前被破坏的情况。例如，现在在 1.9.2 中可能出现以下错误（抛出异常）：有什么方法可以检查调用是否可行：

```
$div.buttonset("destroy") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:57:43.463

您可以使用 $element.data("widget-name") 检查小部件的存在，然后调用您想要的。

小部件的正确名称是命名空间 + 破折号 + 插件名称。例如：ui-tabs、ui-dialog 等。

在我的项目中，我有一个全名为 mediaITPro.player 的小部件。传递给数据调用的正确名称是“mediaITPro-player”。

以下行为我完成了这项工作：

```
if (p.data("mediaITPro-player")) p.player("destroy"); 
```

我希望这有帮助。

PS 关于.data 命名约定的文档调用 [http://jqueryui.com/upgrade-guide/1.9/#changed-naming-convention-for-data-keys](http://jqueryui.com/upgrade-guide/1.9/#changed-naming-convention-for-data-keys)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:49:27.610

至少对于对话框小部件，您可以使用`div.is(":ui-dialog")`. 请注意，旧的 JQuery UI 1.10.1`if (div.data("dialog"))`不起作用（至少对我而言）。

# php - 尝试将输入文本字段传递并捕获到 .php 文件以写入 .txt 文件时，我做错了什么？测试代码如下：

> ID：13596166
> 
> 赞同：0
> 
> 时间：2012-11-28T01:13:36.330
> 
> 标签：php, forms, variables, capture

我的测试代码如下：两个文件都是 .php 以避免冲突，我已经编程了 30 年，但是对 .js 和 .php 还是陌生的，我不知道应该是什么语法很容易. 我已阅读并尝试了所有适用的示例，但它们对我没有用。请告诉我我在哪里搞砸了！！

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

    <title>TestofTopicText</title>
    <script language="Javascript">
    <!--
    function OnButton1()
    {
    var newtopic = document.getElementById('topic');
    document.Form1.target = "_self";    
    document.Form1.action = "1-open-close.php?var=$newtopic";
    document.Form1.submit();             // Submit the page
    }
    -->
    </script>
    </head>

    <body>
    <h3><span style="color: #00ff00;">If NOT found to right ENTER Your Topic Here!        </span></h3>
    // Using get method as I read was appropriate for getElementById
    <form id="Form1" method="get" name="Form1">
  <input type="text" name="q" id="topic" size="55" />
      <input type="submit" name="sa" value="Search" onclick="OnButton1()"/>
    </form>
    </body>

    </html>

    // I am passing to this .php file known as 1-open-close.php
    // The file opens and writes test text but I can't get topic text from other file?
<?php
    $topic = $_GET['var'];
    $myFile = "Topics.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData = "Test to Make Sure Open \n";
    fwrite($fh, $topic);
    fwrite($fh, $stringData);
    fclose($fh);
    // return true;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:20:50.577

不确定您是否真的希望在其中涉及 javascript，但您可以通过仅使用 html 原生的表单行为并引用传入的输入来简化。即您已经将表单指定为方法 GET，因此输入类型表单标签中包含的文本将无需任何额外努力即可发布。在 php 方面，您可以通过使用 html 输入中指定的“名称”作为数组的索引来引用该值。希望这可以帮助！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

    <title>TestofTopicText</title>
    </head>

    <body>
    <h3><span style="color: #00ff00;">If NOT found to right ENTER Your Topic Here!        </span></h3>
    // Using get method as I read was appropriate for getElementById
    <form id="Form1" method="get" name="Form1" action="1-open-close.php">
  <input type="text" name="q" id="topic" size="55" />
      <input type="submit" name="sa" value="Search"/>
    </form>
    </body>

    </html>

    // I am passing to this .php file known as 1-open-close.php
    // The file opens and writes test text but I can't get topic text from other file?
<?php
    $topic = $_GET['q'];
    $myFile = "Topics.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData = "Test to Make Sure Open \n";
    fwrite($fh, $topic);
    fwrite($fh, $stringData);
    fclose($fh);
    // return true;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:21:08.980

JavaScript 不像 PHP 那样插入变量，所以它实际上是发送字符串`$newtopic`而不是你想要的。无论如何，整个事情都是多余的。尝试这个：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>TestofTopicText</title>
</head>
<body>
  <h3 style="color:#0f0;">If NOT found to right ENTER your topic here!</h3>
  <form method="post" action="1-open-close.php">
    <input type="text" name="q" size="55" />
    <input type="submit" value="Search" />
  </form>
</body>
</html> 
```

那么你的 PHP 文件应该是：

```
<?php
$topic = $_POST['q'];
$myFile = "Topics.txt";
$fh = fopen($myFile,"a") or die("can't open file");
$stringData = "Test to make sure open\n";
fwrite($fh,$topic);
fwrite($fh,$stringData);
fclose($fh);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:19:07.137

编辑：我看到您将表单操作放入您的 javascript 中。这很奇怪。反正：

我建议你使用大量的 echo 语句来找出变量的值是什么。

有用的东西：

```
print_r($_POST); // find out what values have been received by POST method
print_r($_SESSION); // find out what values are stored in SESSION 
```

`print_r`用标签包围它们，`<pre></pre>`使它们易于阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T01:27:38.330

这里：

```
var newtopic = document.getElementById('topic');
document.Form1.target = "_self";    
document.Form1.action = "1-open-close.php?var=$newtopic"; 
```

您正在尝试使用 $newtopic 传递 JavaScript 变量 newtopic（这是 PHP 变量的语法，不适用于此处）。而且您还试图发送元素本身，这没有意义。输入框有一个 name="q"，这就是您应该在 PHP 中访问的内容。

尽管如此，代码的格式仍然很糟糕。在发送之前尝试访问“q”会出错。

我已经在表单中添加了一个操作，并删除了您不必要的脚本。我也`$topic = $_GET['var']`改成`$topic = $_GET['q'];`

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

    <title>TestofTopicText</title>

    </head>

    <body>
    <h3><span style="color: #00ff00;">If NOT found to right ENTER Your Topic Here!        </span></h3>
    // Using get method as I read was appropriate for getElementById
    <form id="Form1" method="get" name="Form1" action="1-open-close.php">
  <input type="text" name="q" id="topic" size="55" />
      <input type="submit" name="sa" value="Search" />
    </form>
    </body>

    </html>

    // I am passing to this .php file known as 1-open-close.php
    // The file opens and writes test text but I can't get topic text from other file?
<?php
    $topic = $_GET['q'];
    $myFile = "Topics.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData = "Test to Make Sure Open \n";
    fwrite($fh, $topic);
    fwrite($fh, $stringData);
    fclose($fh);
    // return true;
?> 
```

# c# - 使用 .show() 加载 Win Form 后消失

> ID：13596167
> 
> 赞同：3
> 
> 时间：2012-11-28T01:13:50.317
> 
> 标签：c#, winforms, grid, devexpress

我有一个要在新窗口中弹出的网格。我正在使用的代码如下。该表一直填充正确的数据。唯一的问题是，当新的winform弹出时，它立即消失了。此外，它不会在网格中显示数据。我无法弄清楚我做错了什么。有任何想法吗？

```
private void gridView1_ShowGridMenu(object sender, DevExpress.XtraGrid.Views.Grid.GridMenuEventArgs e)
    {
        GridView view = sender as GridView;
        GridHitInfo hitInfo = view.CalcHitInfo(e.Point);
        if (hitInfo.InRow)
        {
            var rowData = gridView1.GetRowCellValue(hitInfo.RowHandle, "SP");
            string[] rowDataSplit = rowData.ToString().Split(':');
            using (frmInterfaceLogSelection form = new frmInterfaceLogSelection(Services))
            {
                var sql = rowDataSplit[1].ToString();

                var ds = Services.RunSql(sql);
                var table = ds.FirstTable();

                if (table == null)
                {
                    var error = Services.LastSqlResultError;
                    if (error.Length > 0)
                    {
                        MessageBox.Show(error);
                    }
                    return;
                }

                table.AcceptChanges();

                this.gridControl1.DataSource = table;
                this.gridView1.Columns.BestFitAll();

                form.Show();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T01:18:25.467

这是因为您正在处理表单。

该`using`语句在 之后处理表单`form.Show()`，因此它消失了。

您可能需要处理您的 SQL 连接/服务连接，而不是您的表单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T01:19:22.453

尝试使用显示对话框

```
 form.ShowDialog(); 
```

# javascript - 在 JS 中用空格分割文本

> ID：13596168
> 
> 赞同：0
> 
> 时间：2012-11-28T01:13:50.987
> 
> 标签：javascript, split, whitespace

我想用空格分割一行文本（即去掉所有的空格并将其余的作为单独的元素）。我有这个代码：

```
line.split(/\s+/); 
```

但它并不完全符合我的要求。例如`hi there!`，它拆分为：[hi,there!,]（注意数组末尾的 1 个空元素）。如何在没有最后一个空元素的情况下拆分一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:15:42.277

您确定字符串末尾没有空格吗？因为它对我有用。

无论如何，试试这个：

```
line.replace(/^\s+|\s+$/g,'').split(/\s+/); 
```

这将在拆分之前从字符串的开头和结尾删除任何空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:17:53.950

在拆分字符串之前调用 .trim() ，它将删除字符串前后的空格

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T01:18:27.570

```
line.trim().split(/\s+/); 
```

这应该做你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T01:45:10.027

做起来不是更容易吗

```
line.match(/\S+/g); // => ["hi", "there!"] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T01:15:58.273

为什么不简单地使用

```
line.split(' '); 
```

它分裂了“嗨！” 进入

```
["hi", "there!"] 
```

# jquery - 如何取消绑定直播活动？

> ID：13596169
> 
> 赞同：-1
> 
> 时间：2012-11-28T01:13:50.520
> 
> 标签：jquery

我正在尝试取消绑定我的代码的点击事件。

我有

```
$('#test').unbind('click'); //this won't work

$('#test').live('click', function(e){
    alert('alert')
    $(this).unbind(e) //this won't work
}) 
```

我正在使用 jquery 1.63，我需要`.live`我的元素。

任何的想法？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:14:48.023

你正在寻找`die()`方法。

# mysql - 使用 MySQL 存储过程检查恶意代码

> ID：13596176
> 
> 赞同：2
> 
> 时间：2012-11-28T01:14:27.820
> 
> 标签：mysql, stored-procedures

我正在尝试在 MySql 中编写一个将采用单个参数的存储过程，然后检查该参数是否包含任何包含“DROP”、“INSERT”、“UPDATE”、“TRUNCATE”等的文本，几乎任何东西这不是 SELECT 语句。我知道这并不理想，但是不幸的是，SELECT 语句是在客户端构建的，为了防止某种中间人更改，它只是服务器增加了一层安全性。

我已经尝试过几种方法来完成它，但是，它对我不起作用。我想出了类似的东西：

```
CREATE PROCEDURE `myDatabase`.`execQuery` (in INC_query text)
BEGIN

#check to see if the incoming SQL query contains INSERT, DROP, TRUNCATE, 
#or UPDATE as an added measure of security
IF (
    SELECT LOCATE(LOWER(INC_query),'drop') OR
    SELECT LOCATE(LOWER(INC_query),'truncate') OR
    SELECT LOCATE(LOWER(INC_query),'insert') OR
    SELECT LOCATE(LOWER(INC_query),'update') OR
    SELECT LOCATE(LOWER(INC_query),'set')
    >= 1) 
THEN
    SET @command = INC_query;
    PREPARE statement FROM @command;
    EXECUTE statement;
ELSE
    SELECT * FROM database.otherTable; #just a generic output to know the procedure executed correctly, and will be removed later. Purely testing.

END IF;

END 
```

即使它包含我的任何“可过滤”单词，它仍然会执行查询。任何帮助将不胜感激，或者如果有更好的做某事的方法，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:27:22.317

如果您有一个名为`updated_at`or的列`settings`怎么办？您不可能期望它按您的意愿工作。这种技术是网络上有这么多对[clbuttic](http://www.codinghorror.com/blog/2008/10/obscenity-filters-bad-idea-or-incredibly-intercoursing-bad-idea.html)的引用的原因。

如果你走这条路，你真的会把事情弄得一团糟。

解决此问题的唯一合理方法是发送您要构建的查询类型的参数，然后使用经过审查的允许术语**白名单在您的应用程序中构建查询。**以 JSON 表示的示例：

```
{
    "select" : {
      "table" : "users",
      "columns" : [ "id", "name", "DROP TABLE users", "SUM(date)", "password_hash" ],
      "joins" : {
         "orders" : [ "users.id", "orders.user_id" ]
      }
} 
```

您只需要创建一个发出这种东西的查询构造函数，以及另一个将它转换回有效查询的构造函数。您可能只想列出特定的列进行查询，因为某些列可能是秘密的或仅内部的，不会被披露，就像`password_hash`在这个例子中一样。

您还可以允许诸如`(SUM|MIN|MAX|AVG)\((\w+)\)`捕获特定分组操作或`JOIN`条件之类的模式。这取决于你想走多远。

# mysql - 加载数据本地 Infile 问题

> ID：13596177
> 
> 赞同：0
> 
> 时间：2012-11-28T01:14:39.317
> 
> 标签：mysql

好的，我正在尝试将 txt 文件上传到我的表中。我的问题是字段终结器。我尝试过使用几个字符，但没有任何效果。我的最后一次尝试是使用“。”。

txt文件：

```
John. B. Smith. 123456789\. 1955-01-09\. 731 Fondren, Cary, NC. M. 30000\. 333445555\. 5\.   
Franklin. T. Wong. 333445555\. 1945-12-08\. 638 Voss, Cary, NC. M. 40000\. 888665555\. 5\. 
Alicia. J. Zelaya. 999887777\. 1958-07-19\. 3321 Castle, Apex, NC. F. 25000\. 987654321\. 4.
Jennifer. S. Wallace. 987654321\. 1931-06-20\. 291 Berry, Garner, NC. F. 43000\. 888665555\. 4.
Ramesh. K. Narayan. 666884444\. 1952-09-15\. 975 Fire Oak, Angier, NC. M. 38000\. 333445555\. 5.
Joyce. A. English. 453453453\. 1962-07-31\. 5631 Rice, Raleigh, NC. F. 25000\. 333445555\. 5.
Ahmad. V. Jabbar. 987987987\. 1959-03-29\. 980 Dallas, Cary, NC. M. 25000\. 987654321\. 4.
James. E. Borg. 888665555\. 1927-11-10\. 450 Stone, Cary, NC. M. 55000\. NULL. 1. 
```

mysql代码：

```
mysql> load data local infile 'c:/employee upload2.txt' into table employee
    -> fields terminated by '.' lines terminated by '\n';
Query OK, 8 rows affected, 80 warnings (0.02 sec)
Records: 8  Deleted: 0  Skipped: 0  Warnings: 80 
```

table 看起来所有东西都试图塞进第一个字段，但它只能容纳前 8 个字符。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:21:03.660

你的数据格式不好。如果您希望这项工作有任何希望，您需要一个一致的字段分隔符。如果不转义其他字段（如地址字段（或名称字段，尽管示例数据中未显示））中的空格，则不能使用空格分隔值。

您也不会在此文件中包含列标题。

如果您只是使用制表符分隔的值而不是空格分隔，这将与`LOAD DATA INFILE`字段分隔符、转义和行分隔符的默认设置一起工作（假设`\n`实际上是您的行分隔符）

默认的 MySQL 行为（如果没有为分隔符、字段封装字符、转义序列或行开始和结束字符指定任何内容，则为：

```
FIELDS TERMINATED BY '\t' ENCLOSED BY '' ESCAPED BY '\\'
LINES TERMINATED BY '\n' STARTING BY '' 
```

只要您匹配查询以使用相同的设置，您显然可以在数据集中使用您喜欢的任何字符。

如果你想坚持使用空格分隔符，你可以做这样的事情

```
FIELDS TERMINATED BY ' ' ENCLOSED BY '"' ESCAPED BY '\\'
LINES TERMINATED BY '\n' STARTING BY '' 
```

并放置`"`任何可能在其中（或所有字段）中有空格的字段，或者使用`\\`. 如果它们在双引号括起来的字段内，则不需要转义空格。

# .net - 如何在保留身份验证功能的同时禁用 ServiceStack 会话以实现按请求身份验证

> ID：13596181
> 
> 赞同：2
> 
> 时间：2012-11-28T01:15:04.980
> 
> 标签：.net, authentication, servicestack, basic-authentication

我正在尝试强制每个请求进行身份验证，但是通过添加自动添加`AuthFeature`的`SessionFeature`gets，这似乎缓存了身份验证结果（我没有收到`IUserAuthRepository.TryAuthenticate`来自同一客户端的请求的多个调用）。

我已经尝试注释掉`SessionFeature`正在添加的内容，`AuthFeature`但它似乎没有效果，会话仍然创建？此外，在`AuthFeature`构造函数中，我为会话工厂传递了 null，仍然创建了一个会话。我希望这要么不创建会话，要么抛出异常？无论如何，我会继续探索这个领域，但是为了在这个项目上取得进展，我只需要知道如何使用内置的身份验证提供程序进行每个请求的身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:12:57.513

在我们的项目中，我们采用简单的方法。

在下面创建一些东西。

基本身份验证类：

```
 public class TagAuth
    {
        /// <remarks/>
        public string agent { get; set; }

        /// <remarks/>
        public string sign { get; set; }

        /// <remarks/>
        public string ts { get; set; }

        /// <remarks/>
        public int seed { get; set; }
    } 
```

所有请求的基类：

```
 public class BaseRequest
    {
        /// <remarks/>
        public TagAuth auth { get; set; }
    } 
```

对模型中的所有请求使用 BaseRequest 类：

```
public class Cancel : BaseRequest
    {

        public long bid { get; set; }

    } 
```

实现服务接口：

公共类 CancelService : ServiceBase {

```
protected override object Run(Cancel request)
{
    SecurityManager.CheckAuthorization(request.auth); 
    return CancelRouter.Route(request);
} 
```

}

但是本机支持每个请求的身份验证对我们来说也很有趣。

# go - Go 中的单向通道有什么意义？

> ID：13596186
> 
> 赞同：62
> 
> 时间：2012-11-28T01:15:16.167
> 
> 标签：go

我正在学习围棋，到目前为止，我对它印象深刻。我已经阅读了 golang.org 上的所有在线文档，并且正在阅读 Chrisnall 的“The Go Programming Language Phrasebook”。我了解了渠道的概念，并认为它们将非常有用。但是，在此过程中，我一定错过了一些重要的事情，因为我看不到单向通道的意义。

如果我对它们的解释正确，只能接收只读通道而只能发送只写通道，那么为什么要有一个可以发送但永远不会接收的通道呢？它们可以从一个“方向”投射到另一个“方向”吗？如果是这样，那么，如果没有实际约束，那又有什么意义呢？它们仅仅是对客户代码通道目的的提示吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-28T01:48:53.197

可以将通道设置为对接收它的任何人都是只读的，而发送者仍然有一个可以写入的双向通道。例如：

```
func F() <-chan int {
    // Create a regular, two-way channel.
    c := make(chan int)

    go func() {
        defer close(c)

        // Do stuff
        c <- 123
    }()

    // Returning it, implicitely converts it to read-only,
    // as per the function return value.
    return c
} 
```

无论谁打电话`F()`，都会收到一个他们只能阅读的频道。这对于避免在编译时潜在地滥用通道非常有用。因为只读/只写通道是不同的类型，编译器可以使用其现有的类型检查机制来确保调用者不会尝试将内容写入它没有业务写入的通道。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T18:45:48.883

我认为只读通道的主要动机是防止通道的损坏和恐慌。想象一下，如果您可以写入[`time.After`](http://golang.org/pkg/time/#After). 这可能会弄乱很多代码。

此外，如果您：

*   多次关闭频道
*   写入关闭的通道

这些操作是只读通道的编译时错误，但是当多个 go-routine 可以写入/关闭通道时，它们可能会导致令人讨厌的竞争条件。

解决这个问题的一种方法是永远不要关闭通道并让它们被垃圾收集。但是，`close`不仅用于清理，而且在通道范围内时它实际上是有用的：

```
func consumeAll(c <-chan bool) {
    for b := range c {
        ...
    }
} 
```

如果通道从未关闭，则此循环将永远不会结束。如果多个 go-routines 正在写入一个通道，那么有很多簿记必须继续决定哪个将关闭通道。

由于您无法关闭只读通道，因此可以更轻松地编写正确的代码。正如@jimt 在他的评论中指出的那样，您无法将只读通道转换为可写通道，因此您可以保证只有可以访问通道的可写版本的部分代码可以关闭/写入它。

**编辑：**

至于有多个读者，这完全没问题，只要你考虑到它。这在生产者/消费者模型中使用时特别有用。例如，假设您有一个 TCP 服务器，它只接受连接并将它们写入工作线程队列：

```
func produce(l *net.TCPListener, c chan<- net.Conn) {
    for {
        conn, _ := l.Accept()
        c<-conn
    }
}

func consume(c <-chan net.Conn) {
    for conn := range c {
        // do something with conn
    }
}

func main() {
    c := make(chan net.Conn, 10)
    for i := 0; i < 10; i++ {
        go consume(c)
    }

    addr := net.TCPAddr{net.ParseIP("127.0.0.1"), 3000}
    l, _ := net.ListenTCP("tcp", &addr)
    produce(l, c)
} 
```

您的连接处理可​​能会比接受新连接花费更长的时间，因此您希望有很多消费者和一个生产者。多个生产者比较困难（因为您需要协调谁关闭通道）但是您可以在通道发送中添加某种信号量样式的通道。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-28T09:57:25.903

Go 通道以 Hoare 的通信顺序流程为模型，这是一种面向并发的流程代数，围绕通信参与者之间的事件流（小“a”）。因此，通道有一个方向，因为它们有一个发送端和一个接收端，即事件的生产者和事件的消费者。Occam 和 Limbo 也使用了类似的模型。

这很重要——如果通道端可以在不同时间任意重复用作发送方和接收方，则很难推断死锁问题。

# c++ - C++ - Qt QObject::connect 跨类的 GET 请求使用

> ID：13596199
> 
> 赞同：0
> 
> 时间：2012-11-28T01:16:33.807
> 
> 标签：c++, qt, qtnetwork

快速概述正在发生的事情：我正在尝试使用 Qt 的 GET 请求`QNetworkAccessManager`，但我的函数上的回调函数`QObject::connect(..)`没有被调用。我的问题是我可以`QObject::connect`从一个对象调用，但连接到另一个对象的插槽（假设我有一个指向对象和插槽的指针） - 有关更多详细信息，请参见下文。

*我的最终目标是发布数据（因为它是一个登录函数），我的 POST 请求代码最终遇到了同样的问题——没有调用回调函数。所以我希望能够先做一个简单的 GET 请求，一旦我有了它，我想我自己就可以了。*

我目前有一个 QMainWindow `LoginWindow`，带有一个调用`doLogin()`LoginWindow 类中的插槽的按钮。这一切都如您所料。LoginWindow 还有一个`public slots`名为`loginResponse(QNetworkReply* response)`.

```
//---LoginWindow.h

...

public slots:
    void doLogin();
    void loginResponse(QNetworkReply* response)

...

//---LoginWindow.cpp

LoginWindow::LoginWindow(QWidget *parent) :
    QMainWindow(parent),
ui(new Ui::LoginWindow)
{
    ui->setupUi(this);
    ui->username_le->setFocus();
}

void LoginWindow::doLogin()
{
   MyProduct::Network network(this);
    qDebug() << "Logging in...";

    //Here I call network.login from LoginWindow and pass 
    //references to the Slot I want to use and the LoginWindow itself
    network.login(
        ui->username_le->text(), //username
        ui->password_le->text(), //password
        this,                    //reference to this object (LoginWindow*)
        SLOT(loginResponse(QNetworkReply*)) //loginResponse slot
    );
}

void LoginWindow::loginResponse(QNetworkReply* response)
{
    qDebug() << "Log in complete";
} 
```

接下来我在命名空间下有另一个类`MyProduct`，称为`Network`. 正如你在上面看到的，`Network`有一个叫做登录的函数。这里是：

```
void MyProduct::Network login(QString username, QString password, QObject *receiver, const char *slot)
{
    QNetworkRequest request(QUrl(API_ROOT + LOGIN_PATH)); //"http://localhost/basic/login.php"
    request.setHeader(QNetworkRequest::ContentTypeHeader,"application/x-www-form-urlencoded");

    //nam = QNetworkAccessManager* declared in the constructor
    QObject::connect(nam,SIGNAL(finished(QNetworkReply*)), receiver, slot);

    qDebug() << "Posting login data...";
    nam->get(request);
} 
```

这里的目标是在我的类中创建一个登录功能`Network`，可以在任意数量的窗口中使用和连接（因为用户可以从多个地方登录）。但我没有得到任何回应 -`LoginWindow::loginResponse`没有运行。

我在控制台中看到“登录...”和“发布登录数据”输出，但没有看到“登录完成”。

谁能指出我正确的方向或告诉我我疯了或者这是一个坏主意？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:37:47.813

请注意，`QNetworkAccessManager`异步操作。该`get()`方法在网络操作发生时不会阻塞；它立即返回。（有关详细信息，请参阅文档的[详细说明](http://doc.qt.digia.com/qt/qnetworkaccessmanager.html#details)部分。）

这是非常典型的 Qt 网络相关 API，因为您通常不希望应用程序在等待数据通过网络移动时冻结。

这意味着您的实例`nam`的存活时间不足以使 GET 请求实际完成。您的类实例`Product::Network`在调用后立即被删除，`login()`因为它是在堆栈上分配的。虽然我看不到代码，但我猜它也会清理代码`QNetworkAccessManager`。

如果您延长`network`对象的生命周期，您可能会发现您的插槽最终会被调用。

* * *

此外，这更像是一个偏好问题，但我认为避免将接收器和插槽传递给您的`login()`函数会更干净。我建议在`Network`类中声明您自己的信号作为其 API 的一部分，并连接到`LoginWindow`类中的信号。

# c++ - 模板化的部分应用程序调用问题

> ID：13596202
> 
> 赞同：1
> 
> 时间：2012-11-28T01:16:48.040
> 
> 标签：c++, templates, boost, functor

对于即将在一月份的课程作业，我开始开发一个小型 DirectX 引擎。为了确定是否有性能提升，我想尝试根本不使用任何虚拟设备（我知道虚拟设备并不全是坏事，但我只是想看看没有它们是否可能）。

当我开始使用简单的 StateManager 时，很难避免虚拟，但这是我目前的方法：

```
#include <boost\function.hpp>
#include <boost\bind.hpp>

template <class Derived>
struct TBaseState {
  bool update(float delta) {
    return static_cast<Derived *>(this)->update(delta);
  };
};

struct CTestState : TBaseState<CTestState> {
  bool update(float delta) {
      return true;
  }
};

class StateManager
{
public:
    template <class StateClass> static void setState(StateClass nextState)
    {
        m_funcptrUpdate = boost::bind(&TBaseState<StateClass>::update,     boost::ref(nextState), _1);
    }
    static bool update(float delta) 
    {
        return m_funcptrUpdate(delta);
    }
protected:
private:
    static boost::function<bool (float)> m_funcptrUpdate;
}; 
```

Visual Studio 2010 的 Intellisense 似乎认为一切都很好，但是当我想编译程序并使用非常基本的方法测试 StateManager 时：

```
CTestState* t = new CTestState(); 
StateManager::setState(*t);
StateManager::update(0.0f); 
```

在链接阶段抛出以下错误：

```
error LNK2001: unresolved external symbol "private: static class boost::function<bool __cdecl(float)> StateManager::m_funcptrUpdate" (?m_funcptrUpdate@StateManager@@0V?$function@$$A6A_NM@Z@boost@@A) 
```

所以很明显他找不到绑定的功能，但是我该如何解决这个问题呢？如果我直接使用 boost::bind 到某个类，我会得到类似的错误。由于我是一名计算机科学专业的学生，​​因此我也会对一些无需提升的见解或方法感兴趣（例如 bind1st，...）。

编辑：我也在考虑使用 C++11 Variadic Templates，但课程要求之一是坚持 VS2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:20:30.193

静态类成员需要存储。它们就像`extern`变量。`.cpp`在类定义之外向您的文件之一添加定义：

```
boost::function<bool (float)> StateManager::m_funcptrUpdate; 
```

此外，在这段代码中：

```
template <class StateClass> static void setState(StateClass nextState)
{
    m_funcptrUpdate = boost::bind(&TBaseState<StateClass>::update,
        boost::ref(nextState), _1);
} 
```

您正在维护存储对局部变量的引用`nextState`。返回后该引用将无效`setState`。

# c# - CountdownEvent 从不设置为零

> ID：13596209
> 
> 赞同：0
> 
> 时间：2012-11-28T01:17:10.033
> 
> 标签：c#, asynchronous, webclient, countdownevent

我需要从不同的 url 下载一些文本，然后我使用 CountDownEvent 来处理我的事件 Donwnload 完成的次数，但问题是我的 CountDownEvent 永远不会设置为零，这仍在等待。

知道这段代码有什么问题吗？

```
namespace WebApplication.AsyncCall
{
    using System;
    using System.Collections.Generic;
    using System.Net;
    using System.Threading;

    public partial class _Default : System.Web.UI.Page
    {
        private CountdownEvent countDown = null;
        public CountdownEvent CountDown
        {
            get
            {
                if (this.countDown == null)
                {
                    this.countDown = new CountdownEvent(1);
                }

                return this.countDown;
            }
        }

        private List<string> text = null;
        public List<string> Text
        {
            get
            {
                if (this.text == null)
                {
                    this.text = new List<string>();
                }

                return this.text;
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            List<string> rssSources = new List<string>();

            rssSources.Add(@"http://news.yahoo.com/rss/entertainment");
            rssSources.Add(@"http://go.microsoft.com/fwlink/?linkid=84795&clcid=409");

            foreach (string uri in rssSources)
            {
                this.CountDown.AddCount();
                LoadSources(uri);
            }

            this.CountDown.Signal();
            this.CountDown.Wait();
        }

        private void LoadSources(string uri)
        {
            WebClient client = new WebClient();
            client.DownloadStringAsync(new Uri(uri, UriKind.Absolute));

            client.DownloadStringCompleted += (s, a) =>
            {
                if (a.Error == null && !a.Cancelled)
                {
                    this.Text.Add(a.Result);
                    this.CountDown.Signal();
                }
            };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:11:36.813

我终于弄清楚如何解决我的问题，问题是尽管我正在异步触发我的下载事件，但它们似乎仍然在主线程上执行，这意味着`this.CountDown.Wait()`在任何下载完成之前调用它然后我`this.CountDown`没有因此，signaled`this.CountDown`永远不会设置为零，这仍然在等待。

这是我所做的：

进入`foreach`我用 ThreadPool.QueueUserWorkItem 替换了对该方法的调用，`LoadSources(uri)`它将[一个](http://msdn.microsoft.com/en-us/library/kbf0f1ct.aspx)方法排队等待执行。该方法在线程池线程可用时执行。

```
ThreadPool.QueueUserWorkItem(new WaitCallback(LoadSources), (object)uri); 
```

我还必须更改 LoadSources 方法以适应我的调整。

```
private void LoadSources(object uri)
{
    WebClient client = new WebClient();
    client.DownloadStringAsync(new Uri(uri.ToString(), UriKind.Absolute));

    client.DownloadStringCompleted += (s, a) =>
    {
        lock (thisLock)
        {
            try
            {
                if (a.Error == null && !a.Cancelled)
                {
                    this.Text.Add(a.Result);
                }
            }
            finally
            {
                this.CountDown.Signal();
            } 
        }
    };
} 
```

如您所见，我添加了一个锁定语句以避免两个或多个线程尝试`this.Text.Add`同时调用

在此之前，我只是声明了一个要锁定的私有对象。

```
private Object thisLock = new Object(); 
```

# c++ - 具有多个数组的类的构造函数初始化列表（C++11 可以，boost 和 std::vector 不行）

> ID：13596213
> 
> 赞同：0
> 
> 时间：2012-11-28T01:17:29.177
> 
> 标签：c++, constructor, c++11, initializer-list

我还不了解用于在构造函数初始化程序列表中初始化数组的新 C++11 语法。我不再坚持使用 C++03，但由于程序限制，我不能使用 boost 或 std::vector。

FOO 的实例必须通过构造函数调用来确定大小，并且表现得好像 x 和 y 的大小是静态已知的。新的 C++11 特性是否允许这样做？

我不确定是否或如何`std::initializer_list<>`提供帮助。

```
class FOO
{
public:
    // this constructor needs to size x = count and y = count * 4
    FOO(int count) : 
    {
        // interate over x and y to give them their initial and permenent values
    }
private:
    const BAR x[];
    const TAR y[];
};

#include "foo.h"
void main(void)
{
    // both need to work as expected
    FOO alpha(30);
    FOO * bravo = new FOO(44);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:16:15.840

你不能做你想做的事。数组的大小*必须*是编译时常量。虽然在您的特定用例中提供给构造函数的值可能是编译时常量，但 C++ 无法知道这一点。

此外，作为一种静态类型语言，C++ 需要能够在编译时计算类的大小。`sizeof(Foo)`需要有一个精确的、单一的值。而你的不能。

初始化列表不会帮助你。您需要两个运行时大小的数组；这就是`std::vector`目的。如果你想要编译时大小的数组，你需要使用模板类型：

```
template<int count>
class FOO
{
public:
    FOO(initializer_list<Whatever> ilist)
    {
        // interate over x and y to give them their initial and permenent values
    }

private:
    const BAR x[count];
    const TAR y[count * 4];
};

#include "foo.h"
void main(void)
{
    // both need to work as expected
    FOO<30> alpha;
    FOO<44> * bravo = new FOO<44>;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:11:40.817

除了 Nicol Bolas 使用模板参数使大小在编译时可配置的答案之外，您还可以在堆上分配内存：

```
class FOO
{
public:
    // this constructor needs to size x = count and y = count * 4
    FOO(int count) : x(new BAR[count]), y(new TAR[count])
    {
        // interate over x and y to give them their initial and permenent values
    }

    // Need a destructor to free the memory we allocated in the constructor
    ~FOO()
    {
        delete [] y;
        delete [] x;
    }
private:
    const BAR* x;
    const TAR* y;
}; 
```

# javascript - 具有动态值和图像的 HTML5 Canvas 图像旋转

> ID：13596219
> 
> 赞同：0
> 
> 时间：2012-11-28T01:18:27.273
> 
> 标签：javascript, html, canvas, html5-canvas

我有以下代码 -

```
for(var i = 0; i < treesLength; i++){
    var tmpTree = trees[i];
    tmpTreeX = 1+Math.random()*($("#gameBoard").width()-95);
    tmpTreeY = 1+Math.random()*($("#gameBoard").height()-90);
    var imgTreeFile = new Image();
    imgTreeFile.onload = function() {
        context.save();
        context.translate(tmpTreeX,tmpTreeY);
        context.rotate(47 * Math.PI / 180);
        context.translate(-tmpTreeX,-tmpTreeY);
        context.drawImage(imgTreeFile, tmpTreeX, tmpTreeY);
        context.restore();
    };
    imgTreeFile.src = 'img/tree.png';
} 
```

我想要实现的是将`'n'`大量图像添加到画布（恰好是树）我想将图像旋转随机数量的弧度。目前只是为了让它工作，我设置了这个数字，而不是随机生成弧度。

如果我不尝试旋转图像，我成功地将循环中的所有图像随机放置在整个画布中。当我尝试旋转时，我只是将所有图像都放在同一个地方而没有旋转。

谁能指出我正确的方向，我的搜索只会让我感到沮丧，因为我“似乎”做得正确（显然我不是！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:37:34.650

在这里的快速测试中似乎没有问题：http: [//jsfiddle.net/ZZ7MQ/](http://jsfiddle.net/ZZ7MQ/)

但我确实注意到您的代码有两件奇怪的事情：

1.  `.width()`并不`.width`奇怪，但也许那是一个 jQuery 的东西？无论如何都应该`canvas.width`如此。
2.  您**在代码中使用了一个名为 asynchronously 的循环变量**，这 99% 可能是您的问题。我强烈建议您重构代码，以便在循环发生之前加载所有图像。如果它们都是相同的图像，那就很容易了：

    ```
    var imgTreeFile = new Image();
    imgTreeFile.onload = function() {
    for(var i = 0; i < treesLength; i++){
        var tmpTree = trees[i];
        tmpTreeX = 1+Math.random()*($("#gameBoard").width()-95);
        tmpTreeY = 1+Math.random()*($("#gameBoard").height()-90);
        context.save();
        context.translate(tmpTreeX,tmpTreeY);
        context.rotate(47 * Math.PI / 180);
        context.translate(-tmpTreeX,-tmpTreeY);
        context.drawImage(imgTreeFile, tmpTreeX, tmpTreeY);
        context.restore();
      }
    };
    imgTreeFile.src = 'img/tree.png'; 
    ```

# javascript - 计算的 JS var 的 NaN 或空白值

> ID：13596225
> 
> 赞同：2
> 
> 时间：2012-11-28T01:19:20.580
> 
> 标签：javascript, parsing

我有以下 javascript：

```
<script type="text/javascript">
function changeBet(parseFloat(bet)) {
var moneyline = parseFloat(<?php echo json_encode($win) ?>);
var gain = parseFloat(bet * moneyline);
document.getElementById("PotentialGain").value = gain;
}
</script> 
```

php 变量 $win 成功地 var_dump'ed 作为浮点数。当变量`gain`=`bet`时，PotentialGain 按预期显示来自 BetAmount 的用户输入。这是我的回显 php 代码：

```
echo '<tr>';
echo '<td>type="text" name="BetAmount[]" id="BetAmount" onkeyup="changeBet(this.value);" ></td></tr><tr><td>Potential Gain:<input type="text" name="PotentialGain[]"  id="PotentialGain" ></td></tr><tr><td><input type="Submit" name="send" value="Submit"></td>';
echo '</tr>'; 
```

但是，我希望将增益（作为 PotentialGain 值输入）作为用户输入`bet`* var `moneyline`。

结果是 NaN。是否有一个变量我没有正确解析以显示正确的增益数值？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:25:09.543

问题是这一行中的语法不正确：

```
function changeBet(parseFloat(bet)) { 
```

您需要将**参数**传递给函数，如下所示：

```
function changeBet(bet) { 
```

然后，当您*调用*该函数时，您可以评估要通过 parseFloat 发送的任何参数：

```
changeBet(parseFloat(strBet)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:25:10.533

您不能将函数调用放在需要参数名称的位置。

```
function changeBet(bet) {
    bet = parseFloat(bet);
    // rest of code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:59:27.817

这是我使用的最终 javascript：

```
<html>
<script type="text/javascript">
function changeBet(bet) {
var moneyline = <?php echo $win ?>;
var gain = (bet * moneyline).toFixed(2);
document.getElementById("PotentialGain").value = gain;
}
</script>
</html> 
```

我最后的笔记是： 1\. 要记住将 javascript 函数放在代码之后，并使用 php 计算。2.感谢所有澄清的人，`parseFloat`如果您知道 var 是 int （或在我的情况下为 double ），则没有必要。3.感谢大家澄清`parseFloat`不属于函数参数。

希望这可以帮助其他人！

# c - 快速排序指向结构的指针数组

> ID：13596228
> 
> 赞同：1
> 
> 时间：2012-11-28T01:19:31.130
> 
> 标签：c, pointers, struct, quicksort

我目前正在尝试使用 C 提供的内置快速排序来对指向结构的指针数组进行排序。我想根据结构中的名称元素对每个元素进行排序。

虽然我每次通过比较函数对整个数组的调试输出都显示该函数确实在移动元素，但最终结果不是正确的排序顺序。有什么我在这里看不到的吗？

```
typedef struct // The custom data type.
{
    char *name;
} Person;

----------------------------

Person **people; // A dynamically allocated array of Person pointers.
int numPeople;   // The logical index of people.
int maxPeople;   // The current maximum capacity of people.

int compare(const void *a, const void *b) // The comparison function for determining
{                                         //    alphabetic ordering.
   const Person *const *p1 = a;
   const Person *const *p2 = b;
   return strcmp((*p1)->name, (*p2)->name); // Compare alphabetically, return result.
}

void SomeFunction(void)
{
    qsort(people, numPeople, sizeof(Person *), compare); // Perform the sort.
} 
```

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:49:01.387

我已经测试了你的代码，它看起来工作正常。这是我用 gcc 4.5.2 编译的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct // The custom data type.
{
        char *name;
} Person;

Person **people; // A dynamically allocated array of Person pointers.
int numPeople;   // The logical index of people.
int maxPeople;   // The current maximum capacity of people.

int compare(const void *a, const void *b) // The comparison function for determining
{                                         //    alphabetic ordering.
        const Person *const *p1 = a;
        const Person *const *p2 = b;
        return strcmp((*p1)->name, (*p2)->name); // Compare alphabetically, return result.
}

void SomeFunction(void)
{
        qsort(people, numPeople, sizeof(Person *), compare); // Perform the sort.
}

int main()
{
        int iCnt;

        maxPeople = 4;
        numPeople = 4;

        people = calloc(1, sizeof(Person *) * maxPeople);

        people[0] = calloc(1, sizeof(Person));
        people[1] = calloc(1, sizeof(Person));
        people[2] = calloc(1, sizeof(Person));
        people[3] = calloc(1, sizeof(Person));

        people[0]->name = strdup("Tanya");
        people[1]->name = strdup("Alfred");
        people[2]->name = strdup("Harry");
        people[3]->name = strdup("Oakley");

        for(iCnt = 0; iCnt < numPeople; iCnt ++)
                printf("[%d] %s\n", iCnt, people[iCnt]->name);

        SomeFunction();

        for(iCnt = 0; iCnt < numPeople; iCnt ++)
                printf("[%d] %s\n", iCnt, people[iCnt]->name);

        return 0;
} 
```

代码看起来合法，我不确定出了什么问题。您可以尝试编译我测试的代码并查看它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:29:18.580

你能试试这个吗

```
int compare(const void *a, const void *b) // The comparison function for determining
{                                         //    alphabetic ordering.
   const Person *p1 = *(const Person**)a;
   const Person *p2 = *(const Person**)b;
   return strcmp((p1)->name, (p2)->name); // Compare alphabetically, return result.
} 
```

# mysql - 在mysql中创建一个链接2个表的查询并且只显示某些信息

> ID：13596229
> 
> 赞同：0
> 
> 时间：2012-11-28T01:19:46.803
> 
> 标签：mysql

我有 2 张桌子，tbl_students 和 tbl_inv。学生表包含学生的所有信息。我正在创建一个发票系统来为学生创建和保存发票（每月）记录。tbl_inv 可以为单个学生提供多张发票，但日期不同。我正在尝试创建一个数组，该数组将列出所有学生的最新发票、总数和按顶部最新发票日期排序的状态。我对使用 mysql 和 php 编程相当陌生，所以如果我的问题听起来很愚蠢，我深表歉意。这就是我的查询......

```
$query = "SELECT * FROM tbl_student 
  LEFT JOIN tbl_inv ON tbl_student.sid = tbl_inv.inv_sid 
  GROUP BY tbl_student.sid 
  ORDER BY tbl_inv.inv_date DESC"; 
```

这将创建一个数组，每个学生一行，但不显示最新的发票日期和详细信息。

如果有人可以提供帮助，我将不胜感激:-)

**（将直接评论添加到现有答案中）**

这是有效的最终查询..

```
SELECT 
      S.*, 
      TI2.* 
   FROM 
      tbl_student S 
         LEFT JOIN ( SELECT 
                           TI.inv_sid, 
                           MAX(TI.inv_id) LatestInvoice 
                        FROM 
                           tbl_inv TI 
                        GROUP BY 
                           TI.inv_sid ) PreQuery 
            ON S.sid = PreQuery.inv_sid 
            LEFT JOIN tbl_inv TI2 
               ON PreQuery.inv_sid = TI2.inv_sid 
              AND PreQuery.LatestInvoice = TI2.inv_id 
   ORDER BY 
      TI2.inv_id ASC 
```

我使用学生表上名为 f_link 的字段让学生相互链接。如果学生有与其相关联的家庭成员，则 f_link 字段显示主 ID 号。如果没有家庭链接，则该字段仅显示 0。使用我的发票系统，我正在为学生和与他们链接的任何家庭成员创建发票。当前查询将不显示家庭成员的发票数据，但已开具发票。我想缩小这个查询范围，只显示 f_link 字段中为 0 的学生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:56:18.977

继续寻找和学习查询...格式和可读性是未来维护的一大优势。对于此类问题，请询问您需要的第一件事是什么……在您的情况下，以每个学生为基础，他们拥有的最后一张发票是什么（无论数据如何）。

```
select
      TI.inv_sid,
      MAX( TI.inv_date ) LatestInvoiceDate
   from
      tbl_inv TI
   group by
      TI.inv_sid 
```

以上将为您提供一个难题，那就是构建了多少复杂查询。然后，您需要学生的姓名和有关此最新发票的发票详细信息。为此，将在下一阶段使用上述查询……在这种情况下，它将为其结果集获取一个“别名”以获取其余详细信息。

```
select
      S.*,
      TI2.*
   from
      tbl_Student S
         LEFT JOIN  ( select
                            TI.inv_sid,
                            MAX( TI.invoicenumber ) LatestInvoiceNumber,
                            count(*) totalInvoicesForStudent,
                            sum( TI.Total ) as TotalAllInvoices,
                            sum( TI.Total - TI.AmountPaid) as OutstandingBalances
                         from
                            tbl_inv TI
                         group by
                            TI.inv_sid ) PreQuery
            on S.sid = PreQuery.inv_sid
            LEFT JOIN tbl_inv TI2
               on PreQuery.inv_sid = TI2.inv_sid
              AND PreQuery.LatestInvoiceNumber = TI2.invoiceNumber
   where
      s.F_Link = 0
   order by
      TI2.inv_date desc 
```

因此，为了澄清上述查询

对于每个学生（首先列出的表格），

对包含所有学生最近发票日期的“预查询”结果集进行 LEFT JOIN（所有学生，无论是否有发票）。

如果找到这样的发票记录，则再次向发票表执行 LEFT JOIN，但这次是在为该用户确定的预查询“学生 id”和原始发票表中的“LatestInvoiceDate”上。

将这些全部连接在一起后，从学生表和 SECOND 实例 (TI2) 发票表中获取所有字段以获取发票详细信息。

现在，如果您只需要至少有 1 张发票的学生，只需留下“JOIN”而不是“LEFT JOIN”。

# jquery - removeAttr("style") 和 attr("style","") 不起作用

> ID：13596231
> 
> 赞同：2
> 
> 时间：2012-11-28T01:20:19.243
> 
> 标签：jquery, attr

[http://synergine.net/rain.php](http://synergine.net/rain.php)

你好。我正在尝试清除 .ripple div 中所有元素的样式属性，但未成功：

```
function contact(level){
focus_ripple = Math.floor(Math.random() * 100) + 1;
$("#"+level+" .ripple"+focus_ripple+" p").css("opacity",1);
$("#"+level+" .ripple"+focus_ripple+" .fourth").animate({
    height: "324px",
    width: "324px",
    top: "-162px",
    left: "-162px",
    "border-radius": "162px"
},{duration: 1000, queue: false});
$("#"+level+" .ripple"+focus_ripple+" .third").animate({
    height: "108px",
    width: "108px",
    top: "-54px",
    left: "-54px",
    "border-radius": "54px"
},{duration: 1000, queue: false});
$("#"+level+" .ripple"+focus_ripple+" .second").animate({
    height: "32px",
    width: "32px",
    top: "-18px",
    left: "-18px",
    "border-radius": "18px"
},{duration: 1000, queue: false});
$("#"+level+" .ripple"+focus_ripple+" .first").animate({
    height: "10px",
    width: "10px",
    top: "-6px",
    left: "-6px",
    "border-radius": "6px"
},{duration: 1000, queue: false});
$("#"+level+" .ripple"+focus_ripple+" p").animate({
    opacity: 0
},{duration: 1550, queue: false});
setTimeout(function() {
    $("#"+level+" .ripple"+focus_ripple+" p").removeAttr("style");
},1575);
counter++; 
```

}

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:54:52.160

[`removeAttr()`](http://api.jquery.com/removeAttr/)在 1.7.2 上为我工作：

```
$("div").click(function(){
    $(this).removeAttr("style");
})​ 
```

见小提琴：http: [//jsfiddle.net/adrianonantua/p5Dcs/](http://jsfiddle.net/adrianonantua/p5Dcs/)

你必须确保你的选择器确实带来了结果。

# android - 在包“android”中找不到属性“onClick”的资源标识符

> ID：13596244
> 
> 赞同：1
> 
> 时间：2012-11-28T01:23:02.853
> 
> 标签：android

当我尝试运行我的代码时，出现以下错误。

我用谷歌搜索了它。许多人谈到 onclick 方法不适用于 API<=3。我重新检查了我的 API 级别。它是 17。

我如何开始运行我的代码。

如果需要，我可以发布我的 MainActivity.java 代码来弄清楚。

这是代码

```
package com.example.myfirstapp;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class MainActivity extends Activity {

private Button btn;
private EditText edit;
private Spinner spinner;
private TextView textView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn = (Button) findViewById(R.id.button);
    edit = (EditText) findViewById(R.id.edit_message);
    spinner = (Spinner) findViewById(R.id.spinner);
    textView = (TextView) findViewById(R.id.textView1);

    btn.setOnClickListener(
            new View.OnClickListener()
            {
                public void onClick(View view)
                {
                    //Log.v("EditText", edit.getText().toString());
                    //Log.v("Spinner", spinner.getSelectedItem().toString());
                    String url="http://js-server.xxx.edu:23405/examples/servlet/HelloWorldExample?title="+edit.getText().toString()+"&type="+spinner.getSelectedItem().toString();
                    Log.v("url",url);
                }
            });

ArrayAdapter<CharSequence> adapter =      ArrayAdapter.createFromResource(this,R.array.title_type,android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

  //String url="http://js-server.xxx.edu:23405/examples/servlet/HelloWorldExample?title="+edit.getText().toString()+"&type="+spinner.getSelectedItem().toString();
 // Log.v("url",url);

 spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        //Object item = parent.getItemAtPosition(pos);

    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
});

}

private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";
      for (String url : urls) {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        try {
          HttpResponse execute = client.execute(httpGet);
          InputStream content = execute.getEntity().getContent();

          BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
          String s = "";
          while ((s = buffer.readLine()) != null) {
            response += s;
          }

        } catch (Exception e) {
          e.printStackTrace();
        }
      }
      return response;
    }

    @Override
    protected void onPostExecute(String result) {
      textView.setText(result);
    }
  }

  public void readWebpage(View view) {
    DownloadWebPageTask task = new DownloadWebPageTask();
    task.execute(new String[] { "http://js-server.xxx.edu:23405/examples/servlet/HelloWorldExample?title="+edit.getText().toString()+"&type="+spinner.getSelectedItem().toString() });

  }
} 
```

我要做的就是获取服务器返回的 JSON 数据。然后我需要解析 JSON 数据以形成表格格式。我还没有进入这部分，仍然坚持从我的服务器检索 JSON 数据。

我的 XML 文件是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/edit_message"
    android:layout_width="298dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="37dp"
    android:ems="10"
    android:hint="@string/edit_message" />

<Spinner
    android:id="@+id/spinner"
    android:layout_width="304dp"
    android:layout_height="45dp" />

<Button
    android:id="@+id/button"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="106dp"
    android:layout_height="wrap_content"
    android:onclick="readWebpage"
    android:text="@string/button_send" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Example Text" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T02:35:17.293

Android 的 XML 解析器区分大小写。这是不正确的：

```
android:onclick="readWebpage" 
```

这是对的：

```
android:onClick="readWebpage" 
```

# android - Typeface.ITALIC 不适用于 Galaxy Note 2

> ID：13596245
> 
> 赞同：11
> 
> 时间：2012-11-28T01:23:09.310
> 
> 标签：android, fonts, galaxy, samsung-mobile, italics

我正在制作一个应用程序，有时我想根据要显示的数据将 textview 的字体更改为斜体。

在我的 Galaxy Nexus 上，这只是一个案例

```
textView.setTypeface(font, iWantItalics ? Typeface.ITALIC : Typeface.NORMAL); 
```

它工作得很好。

问题是我有一个新的 Galaxy Note II 来测试，而且……不，没有斜体。

阅读[支持 setTypeface(Typeface.Italic) 的三星设备？](https://stackoverflow.com/questions/10420077/samsung-devices-supporting-settypefacetypeface-italic)我觉得这是 Note 的 Android 版本上的一个错误，所以 Roboto 字体根本没有斜体。我已经尝试了关于该线程和其他类似（ , 等）的所有建议，`Typeface.defaultFromStyle(Typeface.ITALIC)`但`Typeface.create(null, Typeface.ITALIC)`没有运气。

我的问题是，该线程中的人使用的解决方法是在`assets`目录中复制 Roboto TTF 并从那里创建字体，但是在手机中使用*另一种默认字体的人呢？*我不想在他们身上强制使用 Roboto，或者更糟糕的是，当字体正常时使用其他字体，否则使用 Roboto 斜体。

有人对我有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T15:25:58.040

作为此错误的解决方法，您可以通过这种方式设置文本斜体（这似乎适用于损坏的三星设备）：

```
textView.setText(setTextStyleItalic(textView.getText()); 
```

你需要这个方法：

```
public static CharSequence setTextStyleItalic(CharSequence text) {
    final StyleSpan style = new StyleSpan(Typeface.ITALIC);
    final SpannableString str = new SpannableString(text);
    str.setSpan(style, 0, text.length(), 0);
    return str;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T13:05:06.833

另一个简单的解决方案是这样做：

```
myTextView.setText(Html.fromHtml("<i>" + myString + "</i>")); 
```

# java - 从 Java 中的 URL 中排序文本的最有效方法

> ID：13596246
> 
> 赞同：0
> 
> 时间：2012-11-28T01:23:12.120
> 
> 标签：java, regex, url, sorting, dao

所以我有一个全是文本的网页，它包含数千行信息，如姓名、办公室号码等。我试图找出最有效的方法来理解这些数据。我可以毫无问题地获得所有文本，但是最好的排序方法是什么，以便我可以使用我的 DAO 将信息添加到适用的类。

例如，我曾尝试过使用正则表达式——但它变得一团糟。Java相对较新，我想知道是否有更好的方法。

现在，我有这样的东西（它非常松散，我只是在尝试不同的东西，直到我让它工作然后正确实施它）：

```
private void read()
{
  BufferedReader reader = new BufferedReader(new InputSteamReader(urlOne.openStream()));

  StringBuilder result = new StringBuilder();

  while((result = reader.readLine()) != null)
  {
   //Regex here sorts things, once sorted it will add that to a List<foo>
  }
} 
```

对我来说，正则表达式似乎变得过于复杂，我只是觉得我为自己做了比需要的更多的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:29:44.243

您可能正在寻找[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

# javascript - 显示网页的一部分 javascript

> ID：13596248
> 
> 赞同：-4
> 
> 时间：2012-11-28T01:23:17.830
> 
> 标签：javascript, iframe

寻找一种显示网页的 javascript 方法。类似于 iframe，但在 javascript 中。1\. 像这样：

```
 var location = "www.example.com"
    javascript method = location 
```

这将在另一个网页中显示一个网页。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:32:18.847

当然。通过 js 是可能的。您创建一个 xmlhttprequest，并将其响应放入一个 div。但是，当然，同源政策适用。

```
<div id="myDiv"></div>

<script type="text/javascript">

     var req = new XMLHttpRequest();
     var target = '/mylocalsite.aspx';
     req.open( 'GET', encodeURI( target ), true );
     req.onreadystatechange = function () {
         if ( req.readyState == 4 ) {
             document.getElementById('myDiv').innerHTML = req.responseText;
         }
     };
         req.send( null );

</script> 
```

但我更喜欢 iframe

# android - 如何监听 PreferenceFragment 中的偏好变化？

> ID：13596250
> 
> 赞同：97
> 
> 时间：2012-11-28T01:23:20.733
> 
> 标签：android, android-fragments, android-activity, sharedpreferences, android-preferences

[如此处](http://developer.android.com/guide/topics/ui/settings.html#Fragment)所述，我将 PreferenceFragment 子类化并在 Activity 中显示它。该文档解释了如何在[此处](http://developer.android.com/guide/topics/ui/settings.html#Listening)侦听首选项更改，但前提是您将 PreferenceActivity 子类化。既然我不这样做，我如何听取偏好变化？

我已经尝试在我的 PreferenceFragment 中实现 OnSharedPreferenceChangeListener 但它似乎不起作用（`onSharedPreferenceChanged`似乎从未被调用）。

到目前为止，这是我的代码：

**SettingsActivity.java**

```
public class SettingsActivity extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        getFragmentManager().beginTransaction().replace(android.R.id.content, new SettingsFragment()).commit();
    }
} 
```

**SettingsFragment.java**

```
public class SettingsFragment extends PreferenceFragment implements OnSharedPreferenceChangeListener
{
    public static final String KEY_PREF_EXERCISES = "pref_number_of_exercises";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key)
    {
        //IT NEVER GETS IN HERE!
        if (key.equals(KEY_PREF_EXERCISES))
        {
            // Set summary to be the user-description for the selected value
            Preference exercisesPref = findPreference(key);
            exercisesPref.setSummary(sharedPreferences.getString(key, ""));
        }
    }
} 
```

**首选项.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <EditTextPreference
        android:defaultValue="15"
        android:enabled="true"
        android:key="pref_number_of_exercises"
        android:numeric="integer"
        android:title="Number of exercises" />

</PreferenceScreen> 
```

另外，PreferenceFragment 是否是监听偏好变化的正确位置，还是应该在 Activity 中进行？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-11-28T02:00:14.247

我相信你只需要`Listener`在你的中注册/注销`PreferenceFragment`它就可以了。

```
@Override
public void onResume() {
    super.onResume();
    getPreferenceManager().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);

}

@Override
public void onPause() {
    getPreferenceManager().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);
    super.onPause();
} 
```

根据您想要做什么，您可能不需要使用侦听器。对首选项的更改将`SharedPreferences`自动提交。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-06T14:25:40.767

antew 的解决方案效果很好，在这里您可以看到 Android v11 及更高版本的完整偏好活动：

```
import android.app.Activity;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.os.Bundle;
import android.preference.ListPreference;
import android.preference.PreferenceFragment;

public class UserPreferencesV11 extends Activity  {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Display the fragment as the main content.
    getFragmentManager().beginTransaction().replace(android.R.id.content,
            new PrefsFragment()).commit();
}

public static class PrefsFragment extends PreferenceFragment implements OnSharedPreferenceChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);

        // set texts correctly
        onSharedPreferenceChanged(null, "");

    }

    @Override
    public void onResume() {
        super.onResume();
        // Set up a listener whenever a key changes
        getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    public void onPause() {
        super.onPause();
        // Set up a listener whenever a key changes
        getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        // just update all
        ListPreference lp = (ListPreference) findPreference(PREF_YOUR_KEY);
        lp.setSummary("dummy"); // required or will not update
        lp.setSummary(getString(R.string.pref_yourKey) + ": %s");

    }
}
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-06-24T12:25:52.397

所有其他答案都是正确的。但我更喜欢这种替代方案，因为您立即拥有导致更改的 Preference 实例。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Preference pref = findPreference(getString(R.string.key_of_pref));        
    pref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
        @Override
        public boolean onPreferenceChange(Preference preference, Object newValue) {
            // do whatever you want with new value

            // true to update the state of the Preference with the new value
            // in case you want to disallow the change return false
            return true;
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-07T17:42:50.160

这对我有用 PreferenceFragment.onCreate()

```
OnSharedPreferenceChangeListener listener = 
    new SharedPreferences.OnSharedPreferenceChangeListener()
    {
        public void onSharedPreferenceChanged(SharedPreferences prefs, String key)
        {
         showDialog();
        }
    }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-20T02:01:27.543

这是一种避免任何潜在内存泄漏的方法：

```
@Override
public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {
    addPreferencesFromResource(R.xml.pref_movies);

    SharedPreferences sharedPreferences = getPreferenceScreen().getSharedPreferences(); 

    //starts live change listener
    sharedPreferences.registerOnSharedPreferenceChangeListener(this);
}

@Override
public void onDestroyView () {
    super.onDestroyView(); 
//Unregisters listener here
    PreferenceManager.getDefaultSharedPreferences(getContext())
            .unregisterOnSharedPreferenceChangeListener(this);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-23T10:01:38.900

如果您只想更新摘要，请使用 [androidx 首选项库](https://developer.android.com/reference/androidx/preference/package-summary.html)（请参阅[官方指南](https://developer.android.com/guide/topics/ui/settings.html)），并在您的布局 xml 中添加以下属性就足够了：

```
<EditTextPreference
    ...
    app:useSimpleSummaryProvider="true" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-06T20:53:28.393

我最近使用 完成了自己`PreferenceScreen`的整理`Preferences API`，所以我想我会贡献我自己的完整示例。这包括将 更新`Summary`为新的/更改的值，以及侦听和响应更改。

**PS。**要回答您的最后一个问题：要`Summary`在初始创建时显示默认值`PreferenceScreen`（在值发生任何更改之前），您*可以*直接从文件中将 设置`android:summary`为您选择的值`preferences.xml`- 然后，一旦出现*是值的更改*，它将使用下面我的示例中包含的代码自动更新。*就个人*而言，我使用了一个简短的解释`Preference`作为我的初始`Summary`，在我的 中设置`preferences.xml`，然后一旦第一次更改值，*它*就会简单地将当前值显示为`Summary`从那时起。

*无论如何*，这是我的完整**示例：**

**SettingsFragment.java**

```
public class SettingsFragment extends PreferenceFragment {

public static final String PREF_NOTIFICATION_MODE = "pref_notificationMode";
private SharedPreferences.OnSharedPreferenceChangeListener preferenceChangeListener;

@Override
public void onCreate (@Nullable Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);

    final SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(this.getActivity());

    preferenceChangeListener = new SharedPreferences.OnSharedPreferenceChangeListener() {
        @Override
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {

            if (key.equals(PREF_NOTIFICATION_MODE)) {
                Preference notifModePref = findPreference(key);
                notifModePref.setSummary(sharedPreferences.getString(key, ""));

                //  DO SOMETHING ELSE HERE WHEN (PREF_NOTIFICATION_MODE) IS CHANGED
            }
        }
    };
}

@Override
public void onResume() {
    super.onResume();

    getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(preferenceChangeListener);

    Preference notifModePref = findPreference(PREF_NOTIFICATION_MODE);
    notifModePref.setSummary(getPreferenceScreen().getSharedPreferences().getString(PREF_NOTIFICATION_MODE, ""));

}

@Override
public void onPause() {
    getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(preferenceChangeListener);

    super.onPause();
}
} 
```

我希望这有帮助！
非常感谢任何积极的反馈，因为我对 StackOverflow 还很陌生；）
**快乐编码！**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-18T13:03:35.223

使用 PreferenceFragmentCompat 在 Kotlin 上的解决方案

[https://developer.android.com/reference/androidx/preference/PreferenceFragmentCompat](https://developer.android.com/reference/androidx/preference/PreferenceFragmentCompat)

在 prefChange 时收听

```
class SettingsFragment : PreferenceFragmentCompat() {

    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        setPreferencesFromResource(R.xml.root_preferences, rootKey)
        val prefListener =
            OnSharedPreferenceChangeListener { prefs, key ->
                val valueChanged = preferenceManager.sharedPreferences.getString(key,key)
                when(valueChanged){
                    getString(R.string.value_lang_en) -> applyLang(valueChanged)
                    getString(R.string.value_lang_th) -> applyLang(valueChanged)
                }
            }
        preferenceManager.
        sharedPreferences.
        registerOnSharedPreferenceChangeListener(prefListener)
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-07T05:12:50.537

另一个完整的例子，让你看到整个画面。

```
public class SettingsActivity extends AppCompatPreferenceActivity {

    /**
     * A preference value change listener that updates the preference's summary
     * to reflect its new value.
     */
    private static Preference.OnPreferenceChangeListener
            sBindPreferenceSummaryToValueListener =
            new Preference.OnPreferenceChangeListener() {

                @Override
                public boolean onPreferenceChange(Preference preference, Object value) {
                    String stringValue = value.toString();

                    if (preference instanceof ListPreference) {
                        // For list preferences, look up the correct display value in
                        // the preference's 'entries' list.
                        ListPreference listPreference = (ListPreference) preference;
                        int index = listPreference.findIndexOfValue(stringValue);

                        // Set the summary to reflect the new value.
                        preference.setSummary(
                                index >= 0
                                        ? listPreference.getEntries()[index]
                                        : null);

                    } else if (preference instanceof RingtonePreference) {
                        // For ringtone preferences, look up the correct display value
                        // using RingtoneManager.
                        if (TextUtils.isEmpty(stringValue)) {
                            // Empty values correspond to 'silent' (no ringtone).
                            preference.setSummary(R.string.pref_ringtone_silent);
                        } else {
                            Ringtone ringtone = RingtoneManager.getRingtone(
                                    preference.getContext(), Uri.parse(stringValue));
                            if (ringtone == null) {
                                // Clear the summary if there was a lookup error.
                                preference.setSummary(null);
                            } else {
                                // Set the summary to reflect the new ringtone display
                                // name.
                                String name = ringtone.getTitle(preference.getContext());
                                preference.setSummary(name);
                            }
                        }

                    } else {
                        // For all other preferences, set the summary to the value's
                        // simple string representation.
                        preference.setSummary(stringValue);
                    }
                    return true;
                }
            };

    /**
     * Helper method to determine if the device has an extra-large screen. For
     * example, 10" tablets are extra-large.
     */
    private static boolean isXLargeTablet(Context context) {
        return (context.getResources().getConfiguration().screenLayout
                & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_XLARGE;
    }

    /**
     * Binds a preference's summary to its value. More specifically, when the
     * preference's value is changed, its summary (line of text below the
     * preference title) is updated to reflect the value. The summary is also
     * immediately updated upon calling this method. The exact display format is
     * dependent on the type of preference.
     *
     * @see #sBindPreferenceSummaryToValueListener
     */
    private static void bindPreferenceSummaryToValue(Preference preference) {
        // Set the listener to watch for value changes.
        preference.setOnPreferenceChangeListener(sBindPreferenceSummaryToValueListener);

        // Trigger the listener immediately with the preference's current value.
        sBindPreferenceSummaryToValueListener.onPreferenceChange(preference,
                PreferenceManager
                        .getDefaultSharedPreferences(preference.getContext())
                        .getString(preference.getKey(), ""));
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setupActionBar();
    }

    /**
     * Set up the {@link android.app.ActionBar}, if the API is available.
     */
    private void setupActionBar() {
        ActionBar actionBar = getSupportActionBar();
        if (actionBar != null) {
            // Show the Up button in the action bar.
            actionBar.setDisplayHomeAsUpEnabled(true);
        }
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {
        int id = item.getItemId();
        if (id == android.R.id.home) {
            if (!super.onMenuItemSelected(featureId, item)) {
                NavUtils.navigateUpFromSameTask(this);
            }
            return true;
        }
        return super.onMenuItemSelected(featureId, item);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public boolean onIsMultiPane() {
        return isXLargeTablet(this);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.pref_headers, target);
    }

    /**
     * This method stops fragment injection in malicious applications.
     * Make sure to deny any unknown fragments here.
     */
    protected boolean isValidFragment(String fragmentName) {
        return PreferenceFragment.class.getName().equals(fragmentName)
                || GPSLocationPreferenceFragment.class.getName().equals(fragmentName)
                || DataSyncPreferenceFragment.class.getName().equals(fragmentName)
                || NotificationPreferenceFragment.class.getName().equals(fragmentName);
    }

    ////////////////// NEW PREFERENCES ////////////////////////////

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class GPSLocationPreferenceFragment extends PreferenceFragment {

        Preference prefGPSServerAddr, prefGPSASDID, prefIsGPSSwitch;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.pref_gps_location);
            setHasOptionsMenu(true);

            // Bind the summaries of EditText/List/Dialog/Ringtone preferences
            // to their values. When their values change, their summaries are
            // updated to reflect the new value, per the Android Design
            // guidelines.

            bindPreferenceSummaryToValue(findPreference("gpsServer_Addr"));
            bindPreferenceSummaryToValue(findPreference("gpsASD_ID"));

            prefGPSServerAddr = findPreference("gpsServer_Addr");
            prefGPSServerAddr.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference, Object newValue) {

                    try {
                        // do whatever you want with new value

                    }
                    catch (Exception ex)
                    {
                        Log.e("Preferences", ex.getMessage());
                    }

                    // true to update the state of the Preference with the new value
                    // in case you want to disallow the change return false
                    return true;
                }
            });

            prefGPSASDID = findPreference("gpsASD_ID");
            prefGPSASDID.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference, Object newValue) {

                    try {
                        // do whatever you want with new value

                    }
                    catch (Exception ex)
                    {
                        Log.e("Preferences", ex.getMessage());
                    }

                    // true to update the state of the Preference with the new value
                    // in case you want to disallow the change return false
                    return true;
                }
            });

            prefIsGPSSwitch = findPreference("isGPS_Switch");
            prefIsGPSSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference, Object newValue) {

                    try {
                        // do whatever you want with new value

                    }
                    catch (Exception ex)
                    {
                        Log.e("Preferences", ex.getMessage());
                    }

                    // true to update the state of the Preference with the new value
                    // in case you want to disallow the change return false
                    return true;
                }
            });
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            int id = item.getItemId();
            if (id == android.R.id.home) {
                boolean tabletSize = getResources().getBoolean(R.bool.isTablet);
                if (tabletSize) {
                    startActivity(new Intent(getActivity(), MainActivity.class));
                } else {
                    startActivity(new Intent(getActivity(), SettingsActivity.class));
                }
                return true;
            }
            return super.onOptionsItemSelected(item);
        }
    }

    ///////////////////////////////////////////////////////////////

    /**
     * This fragment shows notification preferences only. It is used when the
     * activity is showing a two-pane settings UI.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class NotificationPreferenceFragment extends PreferenceFragment {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.pref_notification);
            setHasOptionsMenu(true);

            // Bind the summaries of EditText/List/Dialog/Ringtone preferences
            // to their values. When their values change, their summaries are
            // updated to reflect the new value, per the Android Design
            // guidelines.
            bindPreferenceSummaryToValue(findPreference("notifications_new_message_ringtone"));
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            int id = item.getItemId();
            if (id == android.R.id.home) {
                boolean tabletSize = getResources().getBoolean(R.bool.isTablet);
                if (tabletSize) {
                    startActivity(new Intent(getActivity(), MainActivity.class));
                } else {
                    startActivity(new Intent(getActivity(), SettingsActivity.class));
                }
                return true;
            }
            return super.onOptionsItemSelected(item);
        }
    }

    /**
     * This fragment shows data and sync preferences only. It is used when the
     * activity is showing a two-pane settings UI.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class DataSyncPreferenceFragment extends PreferenceFragment {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.pref_data_sync);
            setHasOptionsMenu(true);

            // Bind the summaries of EditText/List/Dialog/Ringtone preferences
            // to their values. When their values change, their summaries are
            // updated to reflect the new value, per the Android Design
            // guidelines.
            bindPreferenceSummaryToValue(findPreference("sync_frequency"));
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            int id = item.getItemId();
            if (id == android.R.id.home) {
                boolean tabletSize = getResources().getBoolean(R.bool.isTablet);
                if (tabletSize) {
                    startActivity(new Intent(getActivity(), MainActivity.class));
                } else {
                    startActivity(new Intent(getActivity(), SettingsActivity.class));
                }
                return true;
            }
            return super.onOptionsItemSelected(item);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-25T06:45:06.643

`onResume()`您只需要在您的方法中取消指定的 Prefernce 类。就我而言，我使用`SwitchPreference`的是类，因此代码类似于- **SettingsActivity.class**

```
public static class PrivacyPreferenceFragment extends PreferenceFragment
{
    public SwitchPreference switchPreference;

    @Override
    public void onResume() {
        super.onResume();
        switchPreference = (SwitchPreference) findPreference("privacy_notice_check");
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.pref_privacy);
        setHasOptionsMenu(true);

    } 
```

然后在要使用该`PrefernceFragment`值的活动中，只需使用该`SharedPreference`对象调用该值并触发它即可。

# linux - Linux制作编译代码的快捷方式

> ID：13596252
> 
> 赞同：0
> 
> 时间：2012-11-28T01:23:27.920
> 
> 标签：linux, shortcut

我正在尝试在 linux 系统的后台创建可执行文件的快捷方式。我想在双击背景上的图标时执行它。我知道如何运行代码的唯一方法是使用 xterm 和 type`./program`

如果有人能告诉我该怎么做，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:29:49.707

假设您使用的是 gnome（或支持以下内容的桌面环境），您可以只创建一个`myprogram.desktop`文件。（这有点类似于 Windows 中的 .lnk 文件。）它包含要执行的命令，您可以给它一个有意义的名称（不是文件名）。

一个示例可能如下所示。

```
[Desktop Entry]
Name=My Program
Exec=/home/foo/bar/myprogram
Type=Application 
```

将此文件保存在您的桌面上并授予其执行权限 ( `chmod +x myprogram.desktop`)。

在这里，我使用绝对文件名来链接可执行文件，因此无论您当前的工作目录如何都能找到它。

如果您的程序使用标准输出来显示重要信息，您可以告诉桌面环境在终端窗口中运行命令，方法是添加

```
Terminal=true 
```

您还可以指定一个图标

```
Icon=/home/foo/bar/myprogram.png 
```

文档可以在[这里](http://standards.freedesktop.org/desktop-entry-spec/latest/ar01s05.html)找到。

# forms - 带有 Twitter Bootstrap 的 form-horizo ntal 中的普通（垂直）表单

> ID：13596253
> 
> 赞同：14
> 
> 时间：2012-11-28T01:23:38.780
> 
> 标签：forms, twitter-bootstrap

我想要一个在第一级有水平布局的表单，但是在一行内可以有一个表单“内联”，我想要一个垂直（默认）布局。有没有简单的方法来实现这一目标？

**注意：** `.form-inline`不做我想要的，因为它没有将内部标签放在输入的顶部。

到目前为止，我有这样的事情：

```
<div class="form-horizontal">
    <div class="control-group">
        <label class="control-label">
           outer label
        </label>
        <div class="controls ### SOMETHING TO CLEAR/OVERRIDE form-horizontal ###">
            ### INLINE FORM WITH SAME STRUCTURE IS HERE ###
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T14:27:55.597

默认情况下，Boostrap 无法执行此操作，但我已将其包含在我的 fork 中[https://github.com/jasny/bootstrap/blob/master/less/jasny-forms.less#L40](https://github.com/jasny/bootstrap/blob/master/less/jasny-forms.less#L40)

请考虑使用 Jasny 的 Bootstrap 扩展[http://jasny.github.com/bootstrap](http://jasny.github.com/bootstrap)

或者只使用这个 CSS

```
.form-vertical .form-horizontal .control-group > label {
  text-align: left;
}
.form-horizontal .form-vertical .control-group > label {
  float: none;
  padding-top: 0;
  text-align: left;
}
.form-horizontal .form-vertical .controls {
  margin-left: 0;
}
.form-horizontal .form-vertical.form-actions,
.form-horizontal .form-vertical .form-actions {
  padding-left: 20px;
}
.control-group .control-group {
  margin-bottom: 0;
} 
```

使用 HTML

```
<form class="form-horizonal">
    # Horizal controls here

    <div class="form-vertical">
        <div class="control-group">
            <label class="control-label">Label</label>
            <div class="controls">Something here</div>
        </div>
    </div>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T00:01:40.677

这是为 Boostrap 3 更新的@jasny-arnold-daniels CSS。在 3 **form-group**替换**control-group**，**form-control**替换**control**。还需要 @user9645 更改宽度。新的 CSS 是：

```
.form-vertical .form-horizontal .form-group > label {
  text-align: left;
}
.form-horizontal .form-vertical .form-group > label {
  float: none;
  padding-top: 0;
  text-align: left;
  width: 100%
}
.form-horizontal .form-vertical .form-control {
  margin-left: 0;
}
.form-horizontal .form-vertical.form-actions,
.form-horizontal .form-vertical .form-actions {
  padding-left: 20px;
}
.form-group .form-group {
  margin-bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-03T21:58:17.530

您不需要为 Bootstrap 3 编写自定义 CSS。不要将您的*form-* horizo​​ntal 类放在表单标签上，只需在您想要水平的表单元素周围放置一个带有该类的包装 div（并支持 column-size水平项目的类）。

例如，这将起作用：

```
<form>
  <div class="form-horizontal">
    <div class="form-group">
      <label class="col-sm-2 control-label">I'm a horizontal form element</label>
      <div class="col-sm-10">
        <input type="text" class="form-control">
      </div>
    </div>
  </div>

  <div class="form-group">
    <label>I'm a vertical form element</label>
    <input type="text" class="form-control">
  </div>
</form> 
```

这是有效的，因为垂直表单会自动用于没有明确说明类的表单。可以在[此处](http://getbootstrap.com/css/#forms-example)的文档中看到“缺少课程” 。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-10T14:37:53.733

我不确定您到底在寻找什么，但我试图猜测。

我制作了一个带有两条垂直线的表单，第二行带有多个表单元素。

我使用 inline-block 来做到这一点。

[http://jsbin.com/icoduh/1/edit](http://jsbin.com/icoduh/1/edit)

# java - 如何在 JAX-WS Web 服务上引发自定义错误？

> ID：13596260
> 
> 赞同：35
> 
> 时间：2012-11-28T01:24:10.073
> 
> 标签：java, web-services, exception, jax-ws, soapfault

如何在 JAX-WS Web 服务上抛出自定义的 soap 错误？如何指定肥皂故障的`faultCode`,`faultString`和？`detail`是否可以设置`detail`as bean 的值而不是 a `String`？

请注意，我正在使用代码优先方法进行开发。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-28T02:28:32.933

使用`@WebFault`注释。

[您可以在 Java JAX-WS Web 服务中使用 SOAP 错误和异常 - Eben Hewitt on Java](http://io.typepad.com/eben_hewitt_on_java/2009/07/using-soap-faults-and-exceptions-in-java-jaxws-web-services.html)中看到一个很好的示例。

您将看到以下示例：

```
@WebFault(name="CheckVerifyFault",
    targetNamespace="http://www.example.com")
public class CheckVerifyFault extends Exception {

    /**
     * Java type that goes as soapenv:Fault detail element.
     */
    private CheckFaultBean faultInfo;

    public CheckVerifyFault(String message, CheckFaultBean faultInfo) {
        super(message);
        this.faultInfo = faultInfo;
    }

    public CheckVerifyFault(String message, CheckFaultBean faultInfo, 
           Throwable cause) {
        super(message, cause);
        this.faultInfo = faultInfo;
    }

    public CheckFaultBean getFaultInfo() {
        return faultInfo;
    }
} 
```

* * *

**更新**

另一种方法是在子句中声明***典型*异常。**`throws`

例如，假设以下是我的异常类：

```
package pkg.ex;

public class FooException extends Exception {

    public FooException(String message, Throwable cause) {
        super(message, cause);
    }

} 
```

下一个类是服务实现。

```
package pkg.ws;

import javax.jws.WebService;
import pkg.ex.FooException;

@WebService(serviceName = "FooSvc")
public class FooService {

    public String sayHello(String name) throws FooException {
        if (name.isEmpty()) {
            Throwable t = new IllegalArgumentException("Empty name");
            throw new FooException("There is one error", t);
        }
        return "Hello, " + name;
    }

} 
```

如果我的要求是：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                  xmlns:ws="http://ws.pkg/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:sayHello>
         <arg0>Peter</arg0>
      </ws:sayHello>
   </soapenv:Body>
</soapenv:Envelope> 
```

没有问题：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:sayHelloResponse xmlns:ns2="http://ws.pkg/">
         <return>Hello, Peter</return>
      </ns2:sayHelloResponse>
   </S:Body>
</S:Envelope> 
```

但...

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                  xmlns:ws="http://ws.pkg/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:sayHello>
         <arg0></arg0>
      </ws:sayHello>
   </soapenv:Body>
</soapenv:Envelope> 
```

然后...

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <S:Fault xmlns:ns4="http://www.w3.org/2003/05/soap-envelope">
         <faultcode>S:Server</faultcode>
         <faultstring>There is one error</faultstring>
         <detail>
            <ns2:FooException xmlns:ns2="http://ws.pkg/">
               <message>There is one error</message>
            </ns2:FooException>
         </detail>
      </S:Fault>
   </S:Body>
</S:Envelope> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-27T10:12:58.777

```
import javax.xml.soap.SOAPFactory;
import javax.xml.soap.SOAPFault;
import javax.xml.ws.soap.SOAPFaultException;
import javax.xml.namespace.QName;
...

SOAPFactory soapFactory = SOAPFactory.newInstance();
SOAPFault soapFault = soapFactory.createFault(
        "Your custom message", 
         new QName("http://schemas.xmlsoap.org/soap/envelope/", "Client")); 
throw new SOAPFaultException(soapFault); 
```

要选择正确的故障代码，请参阅[http://www.tutorialspoint.com/soap/soap_fault.htm](http://www.tutorialspoint.com/soap/soap_fault.htm)。

# xcode - xcode drawrect - UIView 边界不反映模拟器中的旋转

> ID：13596263
> 
> 赞同：0
> 
> 时间：2012-11-28T01:24:15.533
> 
> 标签：xcode, rotation, drawrect, bounds

我正在使用 xcode 4.5.2 来学习在 iOS6 中进行开发。我的drawRect中有这段代码...

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPoint midPoint;
    midPoint.x = self.bounds.origin.x + self.bounds.size.width/2;
    midPoint.y = self.bounds.origin.y + self.bounds.size.height/2;
... etc 
```

出于某种原因，当我在 iphone 模拟器中运行它时，结果总是

```
midpoint.x = 160
midpoint.y = 252 
```

无论模拟器（iPhone 视网膜屏幕）是处于纵向模式还是旋转为横向。结果是我在纵向模式下绘制的图形在屏幕上正确居中，但在横向模式下向左偏移。

有人可以建议我从哪里开始寻找为什么会这样？

这个 drawRect 代码直接来自我早期编写的一个应用程序，该应用程序在确定屏幕的这个中点（跨越整个屏幕的 UIView）方面运行正常。当我将这段代码（整个类）导入到我当前的程序中时，就会出现这个问题，该程序正在进入这些 UIView 的实例中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:05:24.007

想通了，我想...

似乎由于未知的原因（无论如何对我来说），当手机旋转时，手机内部的视图没有调整大小以填充新的垂直和水平尺寸。因此中点坐标总是相同的——因为视图基本上没有调整大小。在尺寸检查器中，视图只有左右两侧的支柱，没有弹簧。

通过添加垂直和水平弹簧，视图似乎会随着旋转而调整大小，并且中点坐标似乎也会相应改变。

虽然我已经克服了障碍，但我仍然不清楚为什么需要在视图中添加弹簧，因为我正在关注的演示似乎不需要这一步。任何建议，将不胜感激。谢谢。

# c# - 使用正则表达式删除连续的重复字符

> ID：13596265
> 
> 赞同：-4
> 
> 时间：2012-11-28T01:24:34.597
> 
> 标签：c#, regex, replace

可以说我有这样的事情：

```
. . . . 第一的 。. 第二。. . . . 第三 。. .
```

所需的输出是：

```
.First.Second.Third. 
```

如何通过使用正则表达式来实现这一点？我想到了这样的事情：

```
str = Regex.Replace(str, @"\.+", ".", RegexOptions.Multiline).Trim(); 
```

试过了，不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:10:22.300

如果您在点之间有空格，就像您在问题中出现的那样，请尝试：

```
str = Regex.Replace(str, @"[\. ]*\. *", ".", RegexOptions.Multiline) 
```

这将转换任何点和空格字符串，包括至少一个点。

```
“. . .First” => “.First”
“ . . First” => “.First”
“ ... 第一” => “.First”
"..First" => ".First"
“第一”=>“第一”

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:40:33.533

```
Regex.Replace(input, @"(?<=(.))\1+", ""); 
```

请参阅**[此演示](http://ideone.com/ujhF5r)**。

* * *

**更新** *（基于问题更新）*：

```
Regex.Replace(input, @"((\s)?(\S)(?(2)|\s))\1+\s?", "$3"); 
```

请参阅**[此演示](http://ideone.com/hDFtKw)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:28:02.323

您是否尝试过使用反向引用？

根据您的正则表达式引擎，如下所示：`(.)(\1)+`

一个字符（如果你只想要点，就这么说吧——但这应该是显而易见的），然后至少再复制一份。将字符串替换为`\1`- 第一组的结果 - 它应该可以工作。使用 perl 肯定对我有用：

```
$ perl -pe 's/(.)(\1)+/\1/g'
aaa bbb   ccc def abbc
a b c def abc 
```

任何重复的字符只替换为第一次出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T02:00:20.790

根据您最近的（并且希望是正确的）修订：

```
Regex.Replace(
   ". . . . First. . . Second. . . . . . Third. . .", 
   @"(?: *\. *)+", 
   ".", 
   RegexOptions.Multiline)
.Trim() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T06:16:21.417

也试试这个：

```
Regex.Replace(input, "[. ]+(?=[^ .])?","."); 
```

此模式将查找字符“。” 和 " " 除非它后面跟着除这两个以外的其他字符。

# sql-server - 本地数据库同步到云端

> ID：13596267
> 
> 赞同：-6
> 
> 时间：2012-11-28T01:24:52.340
> 
> 标签：sql-server

我正在涉足一个新世界……数据库同步。我使用 SQL Server，我有一个本地数据库，另一个在云中。我试图通过按一个按钮来同步这两个数据库。

有没有人有做这些的经验？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:31:23.670

您的问题非常模糊，因此，我的回答似乎也很模糊。

一般来说，`Local <==> Cloud`我个人一直在使用名为 RedGate SQL Toolbelt 的第三方工具进行同步。该产品价格略高，但提供的好处是巨大的！您只需单击一个按钮即可轻松比较和部署结构和数据更改。

[（我与该产品无关）]

# haskell - Haskell GHCI没有加载编译的目标文件

> ID：13596273
> 
> 赞同：3
> 
> 时间：2012-11-28T01:25:56.970
> 
> 标签：haskell, ghc, ghci

我希望 GHCI 为一个模块加载已编译的目标代码，该模块在编译时比未编译版本快得多。当所有文件都在同一个目录中（没有模块层次结构）时，这工作得很好。但是，当文件位于模块层次结构中时，它们不起作用。

工作版本 MyFile.hs：

```
import Basic
import Histogram 
```

其中 Basic.o 和 Histogram.o 与 MyFile.hs 位于同一目录中

不工作版本 MyFile.hs：

```
import Util.Basic
import Util.Histogram 
```

其中 Basic.o 和 Histogram.o 位于子目录 Util 中。使用这个版本，我在加载 MyFile.hs 时得到以下信息：

```
[1 of 2] Compiling Util.Basic ( Util/Basic.hs, interpreted )
[2 of 2] Compiling Util.Histogram ( Util/Histogram.hs, interpreted )
Ok, modules loaded: Util.Basic, Util.Histogram. 
```

我希望能够在模块中组织我的代码，但仍然可以从使用编译的 o 文件中获得好处。

另外，应该注意的是，自从 o 文件被编译后，源文件并没有改变。

编辑：以下是每个文件的内容：

我的文件.hs

```
import Util.Basic
import Util.Histogram 
```

实用程序/基本.hs

```
module Util.Basic () where 
```

实用程序/直方图.hs

```
module Util.Histogram () where 
```

文件/编译：

```
$:~/programming/haskell/example-error$ ls
MyFile.hs  MyFile.hs~  Util
$:~/programming/haskell/example-error$ cd Util
$:~/programming/haskell/example-error/Util$ ls
Basic.hs  Basic.hs~  Histogram.hs  Histogram.hs~
$:~/programming/haskell/example-error/Util$ ghc *.hs
[1 of 2] Compiling Util.Histogram   ( Histogram.hs, Histogram.o )
[2 of 2] Compiling Util.Basic       ( Basic.hs, Basic.o )
$:~/programming/haskell/example-error/Util$ ls
Basic.hi  Basic.hs~  Histogram.hi  Histogram.hs~
Basic.hs  Basic.o    Histogram.hs  Histogram.o
$:~/programming/haskell/example-error/Util$  cd ../
$:~/programming/haskell/example-error$ ghci -ignore-dot-ghci MyFile.hs
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[1 of 3] Compiling Util.Histogram   ( Util/Histogram.hs, interpreted )
[2 of 3] Compiling Util.Basic       ( Util/Basic.hs, interpreted )
[3 of 3] Compiling Main             ( MyFile.hs, interpreted )
Ok, modules loaded: Util.Basic, Util.Histogram, Main.
*Main> 
```

丹尼尔建议的解决方案：

```
The fix is to compile the importing file, and the files in the 
subdirectory only as a consequence of that, not directly. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:54:04.963

问题与下面讨论的相同，标志发生了变化：

```
~/.../Util> ghc Other.hs
[1 of 1] Compiling Util.Other       ( Other.hs, Other.o )
~/.../Util> cd ..
~/.../src> ghc MyFile.hs
[1 of 2] Compiling Util.Other       ( Util/Other.hs, Util/Other.o ) [flags changed]
[2 of 2] Compiling MyFile           ( MyFile.hs, MyFile.o ) 
```

我还没有发现特别是哪些标志，或者为什么在单独编译期间传递的标志与编译为从导入模块追逐的模块时传递的标志不同，但它们确实发生了变化，因此重新编译是必要的（具体来说，文件中的标志哈希值会`.hi`发生变化）。

因此，解决方法是不单独编译模块，而是将它们编译为顶级导入器的依赖项。

* * *

原始几乎正确的猜测：

我只能部分重现。编译后`touch`ing `MyFile.hs`，

```
$ ghci-7.4.2 MyFile.hs
-- snip
[1 of 2] Compiling Util.Other       ( Util/Other.hs, interpreted )
[2 of 2] Compiling MyFile           ( MyFile.hs, interpreted )
Ok, modules loaded: MyFile, Util.Other. 
```

它看起来和你一样，但是在 7.6.1 中，我们得到了一个提示（编译和`touch`ing）：

```
$ ghci MyFile.hs
-- snip
[1 of 2] Compiling Util.Other       ( Util/Other.hs, interpreted ) [flags changed]
[2 of 2] Compiling MyFile           ( MyFile.hs, interpreted )
Ok, modules loaded: MyFile, Util.Other. 
```

旗帜变了。我`:set -XNoMonomorphismRestriction`的`.ghci`文件中有，标志的更改会导致重新编译。

```
$ ghci -ignore-dot-ghci MyFile.hs
GHCi, version 7.6.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[2 of 2] Compiling MyFile           ( MyFile.hs, interpreted )
Ok, modules loaded: MyFile, Util.Other. 
```

`.ghci`忽略没有为编译提供的标志的违规行为，`Util.Other`不解释未更改的，使用编译后的代码。`.ghci`（使用 GHC < 7.4，甚至不需要忽略该文件。）

如果您有一个`.ghci`文件在其中设置了语言选项 ( `NoMonomorphismRestriction`, , ...) 并且 ghc >= 7.4，则在加载模块时`TypeFamilies`需要忽略该文件。`.ghci`

如果不是这种情况，则重新编译不是预期的行为。然后需要更多信息来诊断问题并找到解决方法。

然后，半解决方法将成为`-fobject-code`ghci 的标志。

# java - 使用 Solr 和 Mahout 的推荐系统

> ID：13596275
> 
> 赞同：15
> 
> 时间：2012-11-28T01:26:30.230
> 
> 标签：java, architecture, solr, mahout

我一直在阅读有关使用 Solr 和 Mahout 开发推荐系统的文章。

据我了解，他们处理两个不同的问题。

1.  由于 Solr 是一个搜索引擎+分类系统，它主要用于 Drupal 中的“更像这样”之类的推荐 - [http://jamidwyer.com/d7/node/21](http://jamidwyer.com/d7/node/21)。

（或 StackOverflow 中的“相关”功能）

2.  在 Mahout 的情况下，它实现了协作过滤等机器学习算法。它可用于根据用户以前的操作在亚马逊中实现建议等功能。（喜欢、购买的物品）

我的问题，

它们是否用于解决两个不同的问题？

它们可以集成吗？

我读过 Mahout 进行离线处理和可扩展性。这是否意味着 Solr 无法扩展？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:29:46.537

这些是针对不同问题的不同工具。Solr 并没有真正提出建议，它会根据内容推荐类似的文档。这不是个性化的，因为它与用户无关。它非常擅长这个特定的问题。

Taste / Mahout 用于协同过滤，它并不特定于文档或任何其他类型的事物，并且在“相似项目”方面存在重大差异，并且推荐基于用户-项目交互，而不是项目属性。

两者都可以很好地扩展，具体取决于您的需要和意思。没有理由怀疑 Solr。

关于 Mahout 和推荐器，简而言之，它有两个部分。一件 (Taste) 是实时的，不是基于 Hadoop 的，并且可以在一台机器上扩展到适度的数据集（可能是 10M 数据点）。Mahout 然后添加了一个基于 Hadoop 的非实时批处理实施，可以扩大规模。（广告：我是上述内容的主要作者，并且正在开发基于两者的下一代系统[Myrrix](http://myrrix.com)。如果您对可扩展和实时 Mahout 风格的推荐器感兴趣，它将很有吸引力。）

如果您对一家公司感兴趣，该公司基于上述构建平台，包括 Solr，您应该查看[NGDATA](http://www.ngdata.com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T08:46:14.200

你是对的，他们解决了两个不同的问题，到目前为止，我还没有看到/发现任何可以开箱即用的现有集成。

您可以做的是使用 Mahout 分类结果将更多信息添加到您的索引文档中，然后这些信息可用于提升目的。

关于您的最后一个答案 - Solr 可以扩展，使用刚刚发布的 4.0 版，它甚至可以比以前更好地扩展。但它解决了不同的目的，并且可以很好地扩展。

你的问题有点不具体，所以我希望这在某种程度上有所帮助。

干杯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-24T03:38:03.097

如果您愿意亲自动手，您实际上可以使用 Solr + Collaborative Filtering 来制作一个非常好的搜索感知推荐系统。也就是说，给定一个搜索`S`，给定搜索者的购买历史，`P_i`并给定其他所有人的购买历史。然后，您可以返回满足搜索但根据搜索者可能希望基于其他类似用户的项目得到提升的结果。`P_j``j≠i``S`

这是我写的一篇博文，可以为您指明正确的方向： http: [//opensourceconnections.com/blog/2013/10/05/search-aware-product-recommendation-in-solr/](http://opensourceconnections.com/blog/2013/10/05/search-aware-product-recommendation-in-solr/)

# c++ - 删除指针时崩溃

> ID：13596276
> 
> 赞同：3
> 
> 时间：2012-11-28T01:26:34.610
> 
> 标签：c++, pointers, delete-operator

我有一个创建 PriorityQueue 结构的任务，但我在处理这段代码时遇到了问题。当我在我的编译器上编译它时，一切都很好，但我尝试将它提交给 ideone，我收到以下错误：

> “glibc 检测到 *** ./prog：双重释放或损坏”。

我能够跟踪给我这个错误的部分，我发现导致崩溃的原因是我试图在我的类的析构函数中删除一个指针。问题是我不知道为什么我不能删除它。我对指针不太了解，但我认为如果我使用 new 来分配内存，我必须在使用它后删除它，我认为这就是我想要做的。这是我的代码：

```
struct PriorityQueue
{
LinkedList queue; LinkNode *it,*node;
int sz;

PriorityQueue(){
    sz=0;
    queue.head=NULL;
    queue.tail=NULL;
    it = NULL;
    node=NULL;
}

~PriorityQueue(){

    if(node != NULL) //this is causing the error.
    delete [] node;

    if(it != NULL)
    delete [] it;
}

int size(){

    return sz;
}

void enqueue(int x){

    node = new LinkNode(x,NULL,NULL);

    if(sz==0){

        queue.insert_head(x);
        sz++;

    }

    else{

    if(x <= queue.head->value ){

        queue.insert_head(x);
        sz++;

    }

    else if( x>= queue.tail->value ){

        queue.insert_tail(x);
        sz++;

    }
    else{

        it = queue.head;

        for(int k=0;k<sz;k++){

                if( (x>= it->value)  && (x <= it->next->value) ){

                     node->next= it->next;
                     node->previous = it;

                     it->next->previous = node;
                     it->next = node;
                     sz++;
                     break;

                }

                    it=it->next;

        }

    }

    }

}

int dequeue_min(){

    int min = queue.remove_head();
    sz--;

    return min;
}

int dequeue_max(){

    int max= queue.remove_tail();
    sz--;

    return max;
}

};

int main()
{
PriorityQueue pq;
pq.enqueue(4);
pq.enqueue(2);
pq.enqueue(7);
pq.enqueue(-6);
pq.enqueue(0);
cout << pq.dequeue_min() << endl;   // debe imprimir -6
cout << pq.dequeue_min() << endl;   // debe imprimir 0
pq.enqueue(3);
cout << pq.dequeue_min() << endl;   // debe imprimir 2
cout << pq.dequeue_min() << endl;   // debe imprimir 3

return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:29:18.113

`it`并`node`指向对象，而不是数组。
您不能`delete[]`在它们上使用数组形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:36:00.073

正如 Slaks 指出的那样，似乎不仅指向对象`it`而`node`不是数组，而且它们似乎也可能指向同一事物。作为旁注，您不需要在调用`delete[] p`或之前检查 null `delete p`：如果指针`p`为 null，则此表达式将无效。

这与您的问题无关，但请注意您的优先级队列`O(n)`（具有`n`大小）复杂性。通常，在实现优先级队列时，您希望获得`O(log(n))`复杂性。实现这种优先级队列的最简单策略是[d-heap](http://en.wikipedia.org/wiki/D-ary_heap)，它方便地存在于一个数组中，并且实际上比您的链表更容易维护（我认为，至少）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T01:31:16.770

使用 delete[] 将尝试删除其对象是某种数组的指针。还有另一种删除类型，它允许删除指向单个对象的指针。（提示：非常直观）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T01:31:27.617

您正在删除`it`和`node`使用`delete []`. 它们不是数组。您只能`delete []`对数组或对象数组使用语法。请记住对相同数据类型使用类似删除和新建命令的经验法则。如果您已分配内存`new`，请删除`delete`。如果您已分配内存`new []`，请删除它`deete []`。

# php - 带有删除按钮的 PHP 表单

> ID：13596281
> 
> 赞同：0
> 
> 时间：2012-11-28T01:27:37.050
> 
> 标签：php

您好，我正在为我的 PHP 编程课程做一个项目。我们使用的书是 Murach 的 PHP 和 MYSQL。对于我们的项目 6-1，我们获得的文件夹称为 tech_support。我将向您展示我正在处理的内容的屏幕截图。我目前使用 phpmyadmin 和 localhost 来用于这个项目，因为那是我们使用的服务器。

出于某种原因，当我点击产品经理文件夹中表格的删除按钮时，它不会删除它只会显示一个空白页面。但是现在当我转到 product_manager/index.php 页面时，它没有显示表格，而是给了我一个错误。

**致命错误：无法在第 7 行的 C:\xampp\htdocs\tech_support\model\product_db.php 中重新声明 get_products()（之前在 C:\xampp\htdocs\tech_support\model\product_db.php:3 中声明）**

当我在 Dreamweaver 或记事本中查看我正在使用的页面时，它在第 7 行显示的所有内容都是一个右大括号。我就是不明白为什么这么说？？我还可以向您展示我的两个代码，我的产品经理文件夹中有几页它们是 product_db.php、delete_product.php、add_product.php product_list.php。这些是我现在正在使用的文件夹。

**product_list.php 代码**

```
 <?php include '../view/header.php'; ?>
<?php require ('../model/product_db.php');?>
<div id="main">

    <h1>Product List</h1>

    <div id="content">
        <!-- display a table of products -->
        <h2><?php echo $category_name; ?></h2>
        <table>
            <tr>
                <th>Code</th>
                <th>Name</th>
                <th>Version</th>
                <th>Release Date</th>
                <th>&nbsp;</th>
            </tr>

            <?php foreach ($products as $product) : ?>
            <tr>
                <td><?php echo $product['productCode']; ?></td>
                <td><?php echo $product['name']; ?></td>
                <td><?php echo $product['version']; ?></td>
                <td><?php echo $product['releaseDate']; ?></td>
                <td><form action="." method="post">
                    <input type="hidden" name="action"
                           value="delete_product" />
                    <input type="hidden" name="product_code"
                           value="<?php echo $product['productCode']; ?>" />
                    <input type="submit" value="Delete" />
                </form></td>
            </tr>
            <?php endforeach; ?>
        </table>
        <p><a href="add_product.php">Add Product</a></p>
    </div>

</div>
<?php include '../view/footer.php'; ?>

**product_db.php code** 
```

**product_db.php**

```
 <?php
function get_products() {
    global $db;
    $query = 'SELECT * FROM  products';
    $products = $db->query($query);
    return $products;
}

function get_product($product_id) {
    global $db;
    $query = "SELECT * FROM  products
              WHERE productID = '$product_id'";
    $product = $db->query($query);
    $product = $product->fetch();
    return $product;
}

function delete_product($product_code) {
    global $db;
    $query = "DELETE FROM products
              WHERE productCode = '$product_code'";
    $db->exec($query);
}

function add_product($code, $name, $version, $releasedate) {
    global $db;
    $query = "INSERT INTO products
                 (code, name, version, releasedate)
              VALUES
                 ('$code', '$name', '$version', '$releasedate')";
    $db->exec($query);
}
?> 
```

**delete_product.php 代码**

```
<?php
// Get IDs
$product_id = $_POST['productID'];

// Delete the product from the database
require_once('database.php');
$query = "DELETE FROM products
          WHERE productID = '$product_id'";
$db->exec($query);

// display the Product List page
include('product_list.php');
?> 
```

好的，因此该表的表名在 tech_support phpmyadmin 数据库中称为**products 。**这是到目前为止我一直盯着并试图弄清楚这段代码的截图，它刚刚开始让我感到沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:29:22.583

**问题 1** -`"it will not delete it will just show a blank page"`

这将是由 -

(1) 您的表格没有有效的`action`. （除非您禁用提交，并且它是由您的`'../view/header.php'`文件中未包含的 java OR javascript/jQuery/Ajax 脚本完成的。）这将发布到未知/空白页面。

```
<form action="." method="post"> 
```

(2) 你`<input type="hidden">`的`name="product_code"`与`value="<?php echo $product['productCode']; ?>"`

```
<input type="hidden" name="product_code" value="<?php echo $product['productCode']; ?>" /> 
```

但在`delete_product.php`你使用`$product_id = $_POST['productID'];`和`WHERE productID = '$product_id'";`

```
$product_id = $_POST['productID'];
....
$query = "DELETE FROM products
      WHERE productID = '$product_id'"; 
```

另外，你为什么要重写你的`DELETE`查询？你应该使用你的功能 -

```
// Get IDs
$product_code = $_POST['product_code'];  // see final comment about SQL Injection

// Delete the product from the database
delete_product($product_code); 
```

* * *

**问题 2** -`Fatal error: Cannot redeclare get_products() (previously declared...`

这是一个有根据的猜测，没有看到您的页面布局/结构`product_manager/index.php`。

如果`product_manager/index.php`您包含这两个文件 -

```
include('product_list.php');
include('delete_product.php'); 
```

你`product_manager/index.php`基本上会——

```
include('product_list.php');
    |-> include '../view/header.php';  
    |-> require ('../model/product_db.php');
include('delete_product.php');
      |-> include('product_list.php');
              |-> include '../view/header.php';  
              |-> require ('../model/product_db.php'); 
```

您`**Fatal error:**...`将由包含`product_db.php`两次引起，您将重新声明您的函数，因此在第一次重新声明（`get_products()`）之后将出现致命错误。

* * *

请注意，您的`functions/queries`in `product_list.php`&`delete_product.php`容易受到 SQL 注入的攻击。请阅读 -
[防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

# php - 从 hsl 到 rgb 的转换

> ID：13596283
> 
> 赞同：1
> 
> 时间：2012-11-28T01:27:38.017
> 
> 标签：php

有没有办法即时将 hsl 颜色转换为 rgb 颜色？我在文档中搜索了这个功能，但目前似乎没有这样的功能。有没有办法为此创建一个自定义函数，其中转换就像`$rgb = hslrgb($hsl)`$hsl 和 $rgb 对应值的数组一样简单？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:29:09.890

当然它可能......功能就是为此而设计的！这就是我经常用来进行此类转换的方法。它足够准确，即使我正在四舍五入一些值；）但另一方面它很快！

```
function hsl2rgb ( $hsl )
{
    $h = $hsl[0]; $s = $hsl[1]; $l = $hsl[2];

    $m2 = ( $l <= 0.5 ) ? $l * ( $s + 1 ) : $l + $s - $l * $s;
    $m1 = $l * 2 - $m2;

    $hue = function ( $base ) use ( $m1, $m2 ) {
        $base = ( $base < 0 ) ? $base + 1 : ( ( $base > 1 ) ? $base - 1 : $base );
        if ( $base * 6 < 1 ) return $m1 + ( $m2 - $m1 ) * $base * 6;
        if ( $base * 2 < 1 ) return $m2;
        if ( $base * 3 < 2 ) return $m1 + ( $m2 - $m1 ) * ( 0.66666 - $base ) * 6;
        return $m1;
    }

    return array( $hue( $h + 0.33333 ), $hue( $h ), $hue( $h - 0.33333 ) );
} 
```

# javascript - 可以从浏览器中拖动的隐藏文本？

> ID：13596289
> 
> 赞同：6
> 
> 时间：2012-11-28T01:28:19.367
> 
> 标签：javascript, jquery, html, css

如何创建一个 html 元素，当从浏览器拖动到文本编辑器时，拖动元素上或拖动元素中的隐藏文本将粘贴到编辑器中？

我的第一个想法是在锚标签上使用 href 属性：

```
<a href="hidden message text here">Drag me into a text editor!</a> 
```

这在 chrome 中效果很好，但是 firefox 和 safari 会从 href 值中删除空格，这会使复制的消息无法使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:17:05.450

您不想操纵浏览器拖动文本/链接/图像的默认行为，而是希望将数据设置为`dragstart`事件中的任意内容。

例如，使用隐藏的文本`#content`：

```
$('[draggable]').on('dragstart', function(e) {
    var content = $(this).find('#content').text(); // Can be anything you want!
    e.originalEvent.dataTransfer.setData('text/plain', content);
    $(this).addClass('dragging');
}); 
```

这是一个有效的[JSFiddle](http://jsfiddle.net/ansonhoyt/QhJH7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:57:53.770

对于 10 以下不支持 dataTransfer 方法的 IE 版本，我发现了另一种有点笨拙的方法来完成这项工作。

基本上，您使用 css 使文本不可见，然后在悬停时使用 js 在背景中选择它。

HTML

```
<div id="drag_area" draggable="true">
    <div id="text">
      hidden text
    </div>
</div>​ 
```

CSS

```
#text { filter:alpha(opacity=0); opacity:0;
        overflow:hidden; z-index:100000; width:180px; height:50px } 
```

​ JS

```
 function selectText(elementID) {
        var text = document.getElementById(elementID);
        if ($.browser.msie) {
            var range = document.body.createTextRange();
            range.moveToElementText(text);
            range.select();        
        } else if ($.browser.mozilla || $.browser.opera) {
            var selection = window.getSelection();
            var range = document.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        } else {
            var selection = window.getSelection();
            selection.setBaseAndExtent(text, 0, text, 1);
        }
    }
    $('#drag_area').hover(function(){
        selectText('text');  
    }); 
```

这里结合了 Anson 的解决方案和一点特征检测：http: ~~//jsfiddle.net/zaqx/PB6XL/~~ （适用于 IE8、IE9 和所有现代浏览器）

**编辑：在下面的评论中更新了小提琴。**

# shopify - 如何将 Shopify 应用发布为 Beta

> ID：13596291
> 
> 赞同：1
> 
> 时间：2012-11-28T01:28:55.287
> 
> 标签：shopify

我有一个 Shopify 应用程序，我想在应用程序市场中作为测试版进行测试。根据[文档](http://wiki.shopify.com/Shopify_App_Development#Beta_test_with_merchants_.26_friends)中的这个链接，它说我应该能够点击应用列表顶部的“发布测试版应用”以将其公开。我在提交中没有看到该选项，我只看到一个提交按钮，并且类别没有显示 beta 选项。有人可以帮助我了解我所缺少的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:53:04.543

据我记得，您只需点击“App Store Publishing”并填写表格。之后，您的应用程序将变为“测试版”，您将能够请求 Shopify 进行审核以发布。

换句话说，没有专门的按钮来发布测试版。

# maven-3 - Maven3 多个仓库

> ID：13596292
> 
> 赞同：0
> 
> 时间：2012-11-28T01:29:07.450
> 
> 标签：maven-3

我是Maven的新手。我有一个没有指定 repo 的 POM，我想下载 Spring 的移动内容，并且 maven 方向指定了一个 repo：

```
<repository>
<id>springsource-repo</id>
<name>SpringSource Repository</name>
<url>http://repo.springsource.org/release</url> 
```

和

```
<repository>
<id>springsource-milestone</id>
<name>SpringSource Milestone Repository</name>
<url>http://repo.springsource.org/milestone</url> 
```

如何编辑我的 POM 以将这些存储库用于 Spring 移动依赖项，但继续将主存储库用于其他依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:33:45.880

您是否尝试过添加 maven.apache.org/guides/mini/guide-multiple-repositories.html 中提到的存储库标签

# wpf - 我可以只在左键按下时进行 WPF ListBox 更改选择吗

> ID：13596299
> 
> 赞同：0
> 
> 时间：2012-11-28T01:29:26.577
> 
> 标签：wpf, drag-and-drop, listbox, mouseleftbuttondown

我有一个`ListBox`在单选模式下运行的 WPF。我正在添加拖放以移动项目。目前，`ListBox`选择响应按下左键，然后鼠标按下左键移动。因此，在我等待`MinimumVerticalDragDistance`开始拖动操作后，可以选择不同的项目。拖动未选择的原始项目或拖动新的选定项目会造成混淆。`MouseMove`在 xxx_或 xxx_中添加 'e.Handled=true'`PreviewMouseMove`不会做任何事情。由于鼠标左键向下移动而抑制此选择的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:52:37.387

我想出的最好的办法是在 IsMouseCapturedChanged 事件中取消 ListBox 的“通过拖动选择”。

```
 public partial class MainWindow : Window
{
    Rect? dragSourceGestureRect;
    bool busy;

    public MainWindow()
    {
        InitializeComponent();

        listBox.ItemsSource = Enumerable.Range(1, 9);

        listBox.PreviewMouseLeftButtonDown += listBox_PreviewMouseLeftButtonDown;
        listBox.IsMouseCapturedChanged += listBox_IsMouseCapturedChanged;
        listBox.MouseMove += listBox_MouseMove;
    }

    void listBox_IsMouseCapturedChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        if (busy)
            return;

        if (!listBox.IsMouseCaptured)
            dragSourceGestureRect = null;

        else if (dragSourceGestureRect.HasValue)
        {
            busy = true;
            {
                //tell the ListBox to cancel it's "Selection by dragging"
                listBox.ReleaseMouseCapture();
                //Now recapture the mouse for canceling my dragging
                listBox.CaptureMouse();
            }
            busy = false;
        }
    }

    void listBox_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        var center = e.GetPosition(listBox);
        dragSourceGestureRect = new Rect(
            center.X - SystemParameters.MinimumHorizontalDragDistance / 2,
            center.Y - SystemParameters.MinimumVerticalDragDistance / 2,
            SystemParameters.MinimumHorizontalDragDistance,
            SystemParameters.MinimumVerticalDragDistance);
    }

    void listBox_MouseMove(object sender, MouseEventArgs e)
    {
        if (!dragSourceGestureRect.HasValue || dragSourceGestureRect.Value.Contains(e.GetPosition(listBox)))
            return;

        dragSourceGestureRect = null;

        var data = new DataObject(DataFormats.UnicodeText, "The Data");
        DragDrop.DoDragDrop(listBox, data, DragDropEffects.Copy);

        e.Handled = true;
    }
} 
```

# python - 使用 .format(**self.__dict__) 在 __str__ 中打印单个列表对象

> ID：13596300
> 
> 赞同：0
> 
> 时间：2012-11-28T01:29:27.253
> 
> 标签：python, string, function, python-3.x, string-formatting

我正在为游戏角色对象打印一个统计块。在上一个问题中，我展示了一种在`__str__`函数中使用显示对象数据的方法，如下所示：

```
def __str__(self):
    if self.poisoned is True:
        status = "[POISONED]"
    else:
        status = ""
    self.status = status
    return ('NAME: {name} {status}\n' \
            'XP:   {xp}\n' \
            'HP:   {hit_points}\n' \
            'SP:   {spell_points}\n' \
            'STR:  {strength}\n' \
            'DEX:  {dexterity}\n' \
            'WEAPON: {weapon}\n' \
            'SPELL:  {spell}\n' \
            'ITEM:   {item}\n' \
            'AURA:   {aura}\n' \
            ).format(**self.__dict__) 
```

我要解决的问题与 WEAPON、SPELL、ITEM 和 AURA 变量有关。这些项目在 Character 对象中定义为单个项目列表：`weapon=[]`等等。使用上述方法返回列表对象，而不是它包含的不带`[]`. `" "`如果存在且不存在，我会看到一个空白字符串或列表包含的对象`[]`。

```
NAME: Bones 
XP:   0
HP:   100
SP:   100
STR:  14
DEX:  19
WEAPON:   []
SPELL:    []
ITEM:     []
AURA:     [] 
```

我已经尝试了许多实验，包括在定义列表对象为空时哪个不起作用之后替换`{weapon}`引用。那只是错误。我可以在对象实例化时生成项目，但这有时会不起作用，因为有时会是一个空列表容器。`{current_weapon}``current_weapon = weapon[0]``IndexError: list index out of range``self.item`

我可以使用对象传播列表，`" "`但随后必须将它们与替换项目一起处理并跟踪这似乎非常不优雅且可能很麻烦。

我似乎无法用一种优雅的方式来`__str__`按照当前设计的方式在上述返回中打印列表对象。我仍在学习 Python，并希望相信有一个简单的添加可以附加到这个`return`字符串中来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:30:01.330

`self`另一种选择是使用字符串格式化的力量来检查它传入的属性，以及方法中的局部变量这一事实：

```
def __str__(self):
    status = '[POISONED]' if self.poisoned else ''
    weapon = self.weapon[0] if self.weapon else ''
    spell = self.spell[0] if self.spell else ''
    item = self.item[0] if self.item else ''
    aura = self.aura[0] if self.aura else ''
    return ('NAME: {self.name} {status}\n'
            'XP:   {self.xp}\n'
            'HP:   {self.hit_points}\n'
            'SP:   {self.spell_points}\n'
            'STR:  {self.strength}\n'
            'DEX:  {self.dexterity}\n'
            'WEAPON: {weapon}\n'
            'SPELL:  {spell}\n'
            'ITEM:   {item}\n'
            'AURA:   {aura}\n'
            ).format(**locals()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:46:04.820

您可以只创建您的字典的本地副本，并修改您想要的值，然后将其传递给格式：

```
def __str__(self):
    local_data = self.__dict__.copy()

    local_data['status'] = "[POISONED]" if self.poisoned else ""

    local_data['weapon'] = " " if not self.weapon else ','.join(self.weapon)

    return ('NAME: {name} {status}\n' \
            'XP:   {xp}\n' \
            'HP:   {hit_points}\n' \
            'SP:   {spell_points}\n' \
            'STR:  {strength}\n' \
            'DEX:  {dexterity}\n' \
            'WEAPON: {weapon}\n' \
            'SPELL:  {spell}\n' \
            'ITEM:   {item}\n' \
            'AURA:   {aura}\n' \
            ).format(**local_data) 
```

这样做可能比修改简单的格式属性更好，就像你对`self.status`. 现在您只是在修改临时副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T01:56:45.880

即使不是那么微不足道，您也可以通过简单的方式做到这一点。您可以修改字符串格式以获取整个对象并利用属性的力量。这具有不创建字典副本的优点，这对于大对象来说可能很昂贵。

我会给你一个应该接近你需要的例子：

```
class A(object):
    def __init__(self):
        # one full list and one empty one
        self.c = [1,2,3]
        self.d = []

    #these two preperties create a string versione when requeste
    c_str = property(lambda self: ", ".join(str(i) for i in self.c))
    d_str = property(lambda self: ", ".join(str(i) for i in self.d))

    def __str__(self):
        #you have to use the dotted version because properties are not visibles 
        # from the dict attribute
        string = "c = {0.c_str} \nd = {0.d_str}"
        return string.format(self)
a = A()
print str(a)
# c = 1, 2, 3 
# d = 
```

如果您正在编写某种游戏属性，则可能是一个巨大的救星，因为您可以使用它们来获取复杂的值作为属性而不是函数，从而创建更清晰的代码。它们允许您甚至检查值的插入，例如值是正数。

### 编辑：

为什么我使用`0.c_str`而不是`c_str`？这是因为属性是特殊对象，只有当您使用点符号 ( ) 访问它们时才会调用它们`self.c_str`。它们不存在于对象 __dict__ 中，因此您无法使用它。如果您尝试打印 __dict__ ，您将只看到值**c**和**d**。

这就是为什么我将整个对象传递给格式函数并访问其属性而不是传递对象字典的原因。

如果您不喜欢该`0.c_str`符号，您可以以不同的方式对其进行转义，例如使其接近通常的符号：

```
"{self.c_str}".format(self=self) 
```

或者

```
"{foo.c_str}".format(foo=self) 
```

# web-services - 使用 VB6 使用 Web 服务

> ID：13596304
> 
> 赞同：0
> 
> 时间：2012-11-28T01:29:52.770
> 
> 标签：web-services, vb6

> **可能重复：**
> [从 VB6 使用 Web 服务的最佳方式是什么？](https://stackoverflow.com/questions/122607/what-is-the-best-way-to-consume-a-web-service-from-vb6)
> [在 VB6 中与 WCF Windows 服务通信？](https://stackoverflow.com/questions/7615540/communicate-with-wcf-windows-service-in-vb6)

我有一个简单的 Web 服务（asp.net 2010），它只会返回输入的字符串。

问题是我想在 vb6 上显示它（可能在 msgbox 上），但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:35:15.200

您可能对[另一个](https://stackoverflow.com/questions/3516119/get-post-to-restful-web-service)关于从 VB6 访问 RESTful Web 服务的问题感兴趣。它使用 MSXML 库，乍一看，它封装了发送 HTTP 请求的实际行为。

# java - 使用带有返回的 jcomponents 和泛型的方法

> ID：13596306
> 
> 赞同：1
> 
> 时间：2012-11-28T01:29:55.323
> 
> 标签：java, swing, oop, generics, jcomponent

这是一个两部分的问题。首先，是否可以使用通用的定义对象方法，例如：

```
public class MyClass<T>{

    public MyClass(T t){
        t.setText("Hello World"); // Assume class T is JMenuIten has the special method setText
    }

} 
```

此代码无法按原样工作，但显示了我的目标的总体思路。我想使用该封装对象特有的方法。但是，如果我要传入另一个对象，例如包含封装方法 .doSomething 的对象。我想要做 ...

```
public class MyClass<T>{

    public MyClass(T t){
        t.doSomething("Hello World"); // Assume class T is JMenuIten has the special method setText
    }

} 
```

我希望可以做到这一点，否则我将不得不编写多个构造函数来处理我所有的特殊情况。

我的第二个问题类似，因为我想返回一个 GUI 组件并执行一个语句，例如 ...

```
myJPanel.getComponent(1).setText("Hello"); // Assuming index 1 is a JLabel and setText is a specific method defined in the JLabel class 
```

这段代码不起作用，因为编译器无法提前告诉运行时需要哪些符号，尽管我希望有一种方法可以使这样的事情起作用。我还想知道是否有一种方法可以告诉我 .getComponent() 正在返回的类类型（如果可能的话）。我正在尝试使代码尽可能动态，而不必对所有内容进行硬编码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:34:56.730

您必须使用有界通配符。

例如

```
public interface MyObject {
    void myMethod();
}

public class GenericObj<T extends MyObject> {
    private T t;

    public void invokeMethod() {
        t.myMethod(); //this way you can invoke methods (declcared in MyObject) on T
    }
} 
```

# ruby-on-rails - 试图让 Postres 和 Postgis 在 Rails 应用程序中运行

> ID：13596308
> 
> 赞同：1
> 
> 时间：2012-11-28T01:30:09.247
> 
> 标签：ruby-on-rails, postgresql, postgis, postgresql-9.1, rails-postgresql

我对 Postgresql、Postgis 和 SQL 完全陌生，并且对 Rails 有一点了解。我正在尝试在本地运行现有应用程序，并且在运行 rake 任务以设置我的数据库时当前收到以下消息。

```
Blane-Cordess-MacBook:ajungo blanecordes$ rake postgres:create_postgis_template --trace
(in /Users/blanecordes/ajungo)
** Invoke postgres:create_postgis_template (first_time)
** Execute postgres:create_postgis_template
Enter your postgres username: blane
Password for user blane: 
psql (9.2.1, server 9.1.4)
WARNING: psql version 9.2, server version 9.1.
     Some psql features might not work.
You are now connected to database "template1" as user "blane".
psql:assets/sql/postgis_template_osx.sql:2: ERROR:  permission denied to create database
psql:assets/sql/postgis_template_osx.sql:6: ERROR:  permission denied for relation      pg_database
psql:assets/sql/postgis_template_osx.sql:7: \connect: FATAL:  database   "template_postgis" does not exist 
```

我的 postgis_template_osx.sql 文件如下：

```
\c template1
CREATE DATABASE template_postgis WITH template = template1;

-- set the 'datistemplate' record in the 'pg_database' table for
-- 'template_postgis' to TRUE indicating its a template
  UPDATE pg_database SET datistemplate = TRUE WHERE datname = 'template_postgis';
\c template_postgis
CREATE LANGUAGE plpgsql ;
\i /usr/local/Cellar/postgis/2.0.1/share/postgis/postgis.sql;
\i /usr/local/Cellar/postgis/2.0.1/share/postgis/spatial_ref_sys.sql;
-- 1.5.2

-- in a production environment you may want to
-- give role based permissions, but granting all for now
GRANT ALL ON geometry_columns TO PUBLIC;
GRANT ALL ON spatial_ref_sys TO PUBLIC;

-- vacuum freeze: it will guarantee that all rows in the database are
-- "frozen" and will not be subject to transaction ID wraparound
-- problems.
VACUUM FREEZE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:18:17.430

PostgreSQL [ROLE](http://www.postgresql.org/docs/current/static/sql-createrole.html) *无权*创建数据库。[ALTER](http://www.postgresql.org/docs/current/static/sql-alterrole.html) blane*并*添加 CREATEDB 选项或使用具有该功能的现有管理员角色。

```
postgres=# ALTER ROLE blane WITH CREATEDB; 
```

# android - GetLogin 类返回一个值

> ID：13596309
> 
> 赞同：2
> 
> 时间：2012-11-28T01:30:16.627
> 
> 标签：android

我不知道如何从我拥有的扩展 AsyncTask 的 GetLogin 类中检索值。这是我的代码：

```
public class GetLogin extends AsyncTask<String, Void, String> {

private final HttpClient httpclient = new DefaultHttpClient();

final HttpParams params = httpclient.getParams();
HttpResponse response;
private String content =  null;
private Context mContext;

public GetLogin(Context context){

    this.mContext = context;

}

protected String doInBackground(String... urls) {

    String result = null;

    try {

        DefaultHttpClient httpClient=new DefaultHttpClient();

        Log.e("Tag", "url: " + urls[0]);

        //Connect to the server
        HttpGet httpGet = new HttpGet(urls[0].toString());

        //Get the response
        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        InputStream stream = httpEntity.getContent();

        //Convert the stream to readable format
        result = convertStreamToString(stream);
        Log.e("Tag", "Result: " + result);

        if (result.charAt(1)=='1') {
            return "Login Successful";
        } if (result.charAt(1)=='0') {
            return "Login Failed";
        } else {
            return result.toString();
        }

  //  } catch (ClientProtocolException e) {
  //      Log.w("HTTP2:",e );
 //       content = e.getMessage();
  //      cancel(true);
  //      return "Could not connect to Server";
   //     
   // } catch (IOException e) {
   //     Log.w("HTTP3:",e );
   //     content = e.getMessage();
   //     cancel(true);
   //     return "Could not connect to Server";

    }catch (Exception e) {
        Log.w("HTTP4:",e );
        content = e.getMessage();
        cancel(true);
        return "Could not connect to Server";
    }
}

public static String convertStreamToString(InputStream is) 
{
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } 
    catch (IOException e) {
        e.printStackTrace();
    } 
    finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

}

这是登录活动的代码

```
 String url = "http://192.168.1.107:6972/evalservice/checkLogin?name="+tvUsername.getText()+"&pass="+tvPassword.getText();
    new GetLogin(LoginActivity.this).execute(url); 
```

我想做的是放一个 if 语句来查看登录是否成功，如果是，则继续下一个活动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:37:41.163

> 我想做的是放一个 if 语句来查看登录是否成功，如果是，则继续下一个活动

无论您返回什么，`doInBackground(...)`都将传递`onPostExecute(...)`给`AsyncTask`. 只需检查该方法中的结果，如果成功，让它启动下一个`Activity`和`finish()`当前一个。

# java - 使用 ksoap 时出错

> ID：13596310
> 
> 赞同：0
> 
> 时间：2012-11-28T01:30:26.650
> 
> 标签：java, web-services, soap, ksoap

我已经为我的应用程序实现了许多 SOAP 函数，但现在我遇到了一些问题：

```
public int generatePost(String sid, int uid, int obj_id, int ref_id, int thr_pk, 
        String msg, int pos_pk, String title, String date)
{
    int pos_pk_new = 0;
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    SoapObject soapObject = new SoapObject("urn:ilUserAdministration", "generatePost");
    soapObject.addProperty("sid", sid);
    soapObject.addProperty("uid", uid);
    soapObject.addProperty("obj_id", obj_id);
    soapObject.addProperty("ref_id", ref_id);
    soapObject.addProperty("thr_pk", thr_pk);
    soapObject.addProperty("msg", msg);
    soapObject.addProperty("pos_pk", pos_pk);
    soapObject.addProperty("title", title);
    soapObject.addProperty("date", date);
    envelope.setOutputSoapObject(soapObject);
    HttpTransportSE transport = new HttpTransportSE(PATH_TO_YOUR_ILIAS_INSTALLATION + "/webservice/soap/server.php");
    transport.debug = true;
    try
    {
        transport.call("generatePost", envelope);
        pos_pk_new = Integer.parseInt(envelope.getResponse().toString());
        return pos_pk_new;
    }
    catch (IOException e)
    {               e.printStackTrace();            }
    catch (XmlPullParserException e)
    {               e.printStackTrace();            }

    return 0;
} 
```

像：PATH_TO_YOUR_ILIAS_INSTALLATION、urn:ilUserAdministration 等参数都可以。我还有其他运行良好的功能，但是这个会产生这个错误：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG (empty) <br>@1:6 in java.io.InputStreamReader@44c45f52) 
0
    at org.kxml2.io.KXmlParser.exception(Unknown Source)
    at org.kxml2.io.KXmlParser.require(Unknown Source)
    at org.ksoap2.SoapEnvelope.parse(Unknown Source)
    at org.ksoap2.transport.Transport.parseResponse(Unknown Source)
    at org.ksoap2.transport.HttpTransportSE.call(Unknown Source)
    at de.ilias.SOAPExample.generatePost(SOAPExample.java:1048)
    at de.ilias.SOAPExample.main(SOAPExample.java:1473) 
```

php 函数 generatePost 运行良好，因为我已经在 php 片段中对其进行了测试。

ksoap 库是否有可能对添加到我的 soapObject 的参数有限制？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:45:30.817

好的，很好，我只是忘记在我的肥皂函数中添加一个库......有一天试图解决这个问题，就是这样。解决了。

# c# - 如何根据用户身份验证隐藏菜单项

> ID：13596311
> 
> 赞同：5
> 
> 时间：2012-11-28T01:30:26.240
> 
> 标签：c#, asp.net

我是这个网站的新手，过去我在网上研究过很多次，但无法解决这个问题。如果用户未经授权并且我使用的是 Windows 身份验证方法，我基本上想隐藏一个菜单项。我对这段代码的问题是即使我处于管理员角色，名为“Admin”的菜单项也被隐藏了。我基本上在名为 Admin 的文件夹下有一个名为 Admin.aspx 的文件。在 Admin 文件夹中，我有一个 Web 配置，这就是我配置它的方式：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <location path="~/Admin/Authors.aspx"></location>
    <system.web>
        <authorization>
            <deny users="?" />

            <allow users="Perf_Mon" />
            <allow roles="Perf_Mon" />

        </authorization>
    </system.web>
    <system.webServer>
        <security>
            <authorization>
                <remove users="*" roles="" verbs="" />
                <add accessType="Deny" users="?" />

                <add accessType="Allow" roles="Admin" />
            </authorization>
        </security>
    </system.webServer>
</configuration> 
```

我还在母版页文件中使用后面的代码，因为我的所有菜单都在那里，代码在这里：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        'Protected Sub Page_Load(sender As Object, e As EventArgs)
        If Not Roles.IsUserInRole("Admin") Then
            Dim menuItems As MenuItemCollection = NavigationMenu.Items
            Dim adminItem As New MenuItem()
            For Each menuItem As MenuItem In menuItems
                If menuItem.Text = "Admin" Then
                    adminItem = menuItem
                End If
            Next
            menuItems.Remove(adminItem)
        End If
    End Sub 
```

所以我想知道为什么即使我处于管理员角色，管理员菜单也对我隐藏。我不确定我做错了什么。谢谢 这是母版页的 ASP 文件

```
<body>
    <form id="Form1" runat="server">
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                    Home Page
                </h1>
            </div>
            <div class="loginDisplay">
                <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                    <AnonymousTemplate>
                        [ <a href="~/Account/Login.aspx" id="HeadLoginStatus" runat="server">Log In</a>
                        ]
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        Welcome <span class="bold">
                            <asp:LoginName ID="HeadLoginName" runat="server" />
                        </span>! [
                        <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out"
                            LogoutPageUrl="~/" />
                        ]
                    </LoggedInTemplate>
                </asp:LoginView>
            </div>
            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
                    IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Admin/Authors.aspx" Text="Admin" />
                        <asp:MenuItem NavigateUrl="~/Users/MyTest1.aspx" Text="Summary" />
                        <asp:MenuItem NavigateUrl="~/Users/MyTest2.aspx" Text="Details" />

                    </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server" />
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">
    </div>
    </form>
</body> 
```

它在这一行中引用了母版页，我们如何将其更改为引用站点地图？

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" MaintainScrollPositionOnPostback="true" CodeFile="Authors.aspx.cs" Inherits="Admin_Authors1" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:35:29.977

首先将此代码放在`<system.web>`标签内的 web.config 中

```
 <siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
    <providers>
      <add name="XmlSiteMapProvider" type="System.Web.XmlSiteMapProvider, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" siteMapFile="/NavMenu.sitemap" />
    </providers>
  </siteMap> 
```

现在向您的项目添加一个新的站点地图项并将其命名为 NavMenu.sitemap，然后使用以下代码填充：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="#" title="Menu"  description="">
        <siteMapNode url="~/Admin/Author.aspx" title="Admin" roles="Admin"/>
        <siteMapNode url="http://www.google.co.uk" title="Google" roles="*"/>
        <siteMapNode url="http://www.hotmail.co.uk" title="Hotmail" roles="*"/>
    </siteMapNode>
</siteMap> 
```

现在在你的 site.master （或任何你放置菜单的地方）用这两行替换你的菜单：

```
<asp:Menu ID="NavigationMenu" runat="server" DataSourceID="NavMenuDS"></asp:Menu>
<asp:SiteMapDataSource ID="NavMenuDS" runat="server" ShowStartingNode="False" SiteMapProvider="XmlSiteMapProvider"/> 
```

现在我将解释（或尝试）它们中的每一个是什么： 第一个代码块是声明站点地图提供者，没有这个你不能读取站点地图文件，NavMenuDS 然后使用这个提供者信息来填充 NavigationMenu。

在站点地图文件中，您会注意到在管理行末尾`role="Admin"`指定了`role="*"`.

任何 Q 都会让他们失望....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T09:29:18.517

.Net Web 不提供每个菜单项的属性来指定可见性。因此，不可能将特定菜单项设置为“显示”每个用户可见。但是需要注意的是，您首先可以不创建菜单项。

例如：不要通过 Visual Studio 设计器视图添加菜单项。添加无论身份验证级别如何都是静态的项目。

在页面加载事件中 - 执行身份验证检查。如果用户通过了身份验证，则通过面向对象的方法创建您希望在通过身份验证时出现的菜单项——利用它们的构造函数并设置任何需要的属性。我在我的 Site.Master 页面中执行此操作：因为我希望菜单在所有页面上都以这种方式运行。

但是，如果需要，您可以按单个页面执行此操作。

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            MenuItem m = new MenuItem("Upload");
            m.NavigateUrl = "~/Uploader/Upload.aspx";
            NavigationMenu.Items.Add(m);
        }
    } 
```

# php - 如何使用 node.js 获取 SSL 证书信息？

> ID：13596315
> 
> 赞同：9
> 
> 时间：2012-11-28T01:30:50.020
> 
> 标签：php, node.js, curl, ssl-certificate

我已经使用[这篇文章](https://stackoverflow.com/questions/3081042/how-to-get-ssl-certificate-info-with-curl-in-php/3081093)的答案构建了一个 PHP 版本。

现在我的问题是我想并行执行多个请求。我已经在使用 node.js 对 NS 服务器等进行类似的请求，所以很自然地想到了它。

有人可以帮我吗？

作为替代选择，有人可以告诉我是否有办法仅使用 PHP 使其并行。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T19:00:19.807

对于每个面临同样问题的人，这里是答案：

```
var https = require('https');
var options = {
    host: 'google.com',
    port: 443,
    method: 'GET'
};

var req = https.request(options, function(res) {
    console.log(res.connection.getPeerCertificate());
});

req.end(); 
```

# java - 如何访问 Play2 应用程序退出的静态注入依赖项

> ID：13596323
> 
> 赞同：2
> 
> 时间：2012-11-28T01:31:27.937
> 
> 标签：java, playframework-2.0, guice

我有一个 Play 2 应用程序，它使用 Guice 将静态对象（实时传感器监控对象）注入 Application.java：

*控制器。应用：*

```
public class Application extends Controller {
    @Inject static MonitorService monitorService;
    ...
} 
```

*模块.依赖项：*

```
public class Dependencies {
   ....
   @Provides
   @Singleton
   public MonitorService getMonitorService(final MonitorFactory factory) {
       return new MonitorService(factory){
              @Override 
              public MonitorService(Factory factory){
                 return factory.getMonitor();
              }
          }
   }
} 
```

我的问题是我想在播放应用程序退出时访问*工厂*或*监视*对象以便优雅地关闭它。我已经查看了连接到*GlobalSettings.onStop*但看不到从*Play.Application*对象中提取引用的方法。我尝试将*MonitorService*注入 Global 类，但它返回一个 null 对象，所以我假设*Dependencies*对象已被此阶段销毁。

我也知道这种方法可能是完全错误的；）

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:08:24.430

我假设您使用的是[Typesafe 插件](https://github.com/typesafehub/play-plugins/)。

AFAIK，不幸的是，插件关闭[时没有监听](https://github.com/typesafehub/play-plugins/blob/master/guice/src/main/java/com/typesafe/plugin/inject/GuicePlugin.java)`onStop() method`器，有一个 onStart() 方法，但没有任何.

因此，要么你 fork 插件，要么将 Guice 自己集成到 Global 对象的 onStart/onStop 方法中。

# oauth-2.0 - 使用 Shopify .NET 刷新 Shopify 访问令牌

> ID：13596324
> 
> 赞同：1
> 
> 时间：2012-11-28T01:31:31.157
> 
> 标签：oauth-2.0, shopify

我正在.NET 中构建 Shopify 应用程序。我成功使用 Shopify .NET 库来获取访问令牌。但是，它似乎是一个临时令牌，因为它会在一段时间后过期。需要访问商店的功能作为后台云服务运行，因此我不能简单地在浏览器中重新进行身份验证。

我怎么能：

1.  获取永久访问令牌，或
2.  获取刷新令牌，然后我可以交换临时令牌？

此外，是否有“官方”HTTP 响应代码来告知令牌已过期？

谢谢！

# java - BigInteger 类中的无用变量，为什么？

> ID：13596326
> 
> 赞同：4
> 
> 时间：2012-11-28T01:31:41.247
> 
> 标签：java

我今天浏览 Java 代码时发现了一些东西。

```
int[] m = mag;
int len = m.length;
int[] xm = xInt.mag;
if (len != xm.length)
    return false; 
```

（这是在`BigInteger`类中，解压后可以找到`src.zip`。在`equals`方法中。）为什么一个全新的变量`m`只使用一次就创建了？为什么代码不只是`int len = mag.length`？我在另一种方法中也看到了这一点 ( `bitLength`)，而且`m`只使用了一次。这样做有什么好处，或者这只是这个类的创造者的一个错误？

编辑：正如@usernametbd 指出的那样，稍后会使用它：

```
for (int i = 0; i < len; i++)
    if (xm[i] != m[i])
        return false; 
```

但他们仍然可以使用`mag`. 为什么要制作一个全新的变量？

在不同的函数中（在同一个类中`bitLength`），创建了一个新变量`m`，并且只使用了一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:01:43.720

因为 mag 是一个字段，所以 m 是局部变量。访问局部变量可能会更快，尽管现代 JIT 可以自动创建这样的替代局部变量。

顺便说一句，您应该已经说出您想到的方法（我发现它是`equals()`），并引用原始源（它是可用的）而不是反编译的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:37:56.653

再往下一点（几行），他们使用

```
for (int i = 0; i < len; i++)
    if (xm[i] != m[i])
        return false; 
```

所以`m`并不是完全孤立的。他们当然可以`mag`改用，但这只是一种设计选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:17:59.023

当您通过反射调用`length`（公共最终成员变量）时，这是恒定时间操作。`Array`但在[C++](http://pages.cs.wisc.edu/~hasti/cs368/JavaTutorial/NOTES/Java_vs.html#arrays)中是不一样的。您必须以字节为单位获得第一个数组大小，然后将此结果除以 int 的大小以获得确切值（也许有更好的方法）。我认为开发人员在 C++ 时代有同样的反应，并将值带入局部变量以多次使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T02:21:04.673

为什么它对你很重要？该语句不是复制数组，只是复制一个引用——一个指针。并且“m”可能会被分配到一个寄存器中，而 JVM 标准要求通常必须从对象中重新获取“mag”——JITC 不能自由地优化掉字段引用。

# c# - 如何在 C# 中使用 HttpWebRequest 判断 Internet url 是否指向文件夹或文件？

> ID：13596328
> 
> 赞同：-3
> 
> 时间：2012-11-28T01:31:44.450
> 
> 标签：c#

众所周知，互联网 URL 可以指向文件夹或文件。
文件夹通常以默认页面作为响应——例如 index.html。文件自己响应。

在任何一种情况下，你都不知道你得到的是哪一个。例如想象一下（“http://www.example.com/fileorfolder.html”）。它是返回默认文件的奇怪命名文件夹还是文件？

我该怎么说？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:35:03.333

您的假设是错误的——（在 WebDAV 之外）网络上没有“文件夹”或“文件”，只有任意资源。

如果 Web 服务器配置为将资源路径映射到文件系统（默认情况下大多数*但不是全部*），则访问“文件夹”仍会返回 HTML 文档，只有文档包含文件列表 - 但格式本文档的内容因使用的软件而异。

为什么你还想知道？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:43:26.553

最好检查您是否从请求的 URL 重定向到不同的 URL。

看看这个链接。

[C# 检测页面重定向](https://stackoverflow.com/questions/2538895/c-sharp-detect-page-redirect)

# scale - Kinect 骨架缩放奇怪的行为

> ID：13596331
> 
> 赞同：2
> 
> 时间：2012-11-28T01:32:03.963
> 
> 标签：scale, kinect, scaling, kinect-sdk

我正在尝试缩放骨架以匹配另一个骨架的大小。我的算法执行以下操作：

*   使用植物定理求原始骨骼和命运骨骼的两个关节之间的距离
*   将这两个距离相除以找到乘数。
*   将每个关节乘以该因子。

这是我的实际代码：

```
public static Skeleton ScaleToMatch(this Skeleton skToBeScaled, Skeleton skDestiny)
    {
        Joint newJoint = new Joint();

        double distanciaOrigem = 0;
        double distanciaDestino = 0;
        double fator = 1;
        SkeletonPoint pos = new SkeletonPoint();

        foreach (BoneOrientation bo in skToBeScaled.BoneOrientations)
        {
            distanciaOrigem = FisioKinectCalcs.Distance3DBetweenJoint(skToBeScaled.Joints[bo.StartJoint], skToBeScaled.Joints[bo.EndJoint]);
            distanciaDestino = FisioKinectCalcs.Distance3DBetweenJoint(skDestiny.Joints[bo.StartJoint], skDestiny.Joints[bo.EndJoint]);

            if (distanciaOrigem > 0 && distanciaDestino > 0)
            {
                fator = (distanciaDestino / distanciaOrigem);

                newJoint = skToBeScaled.Joints[bo.EndJoint]; // escaling only the end joint as the BoneOrientatios starts from HipCenter, i am scaling from center to edges.

                // applying the new values to the joint
                pos = new SkeletonPoint()
                {
                    X = (float)(newJoint.Position.X * fator),
                    Y = (float)(newJoint.Position.Y * fator),
                    Z = (float)(newJoint.Position.Z * fator)
                };

                newJoint.Position = pos;
                skToBeScaled.Joints[bo.EndJoint] = newJoint;
            }
        }

        return skToBeScaled;
    } 
```

除了手和脚外，一切似乎都很好

看看这些图片

![在此处输入图像描述](../Images/fe4031606a0dc98c72d476fe5cb8c085.png) ![在此处输入图像描述](../Images/421fb9135459106d12b2b9816b78db10.png)

我有自己的骨架，我的骨架和另一个人一样大，但手和脚仍然很疯狂。（但代码看起来正确）

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:13:36.330

不运行代码很难说，但它有点“看起来不错”。

我要验证的是，你的

```
if (distanciaOrigem > 0 && distanciaDestino > 0) 
```

如果`distanciaOrigem`非常 接近`0`, 但 即使 只是`epsilon`远离`0`, 也 不会 被 捡到`if`, 然后

```
fator = (distanciaDestino / distanciaOrigem); 
```

会导致非常大的数量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T15:56:49.993

我建议平滑该因子，使其通常适合适当的比例。试试这个代码：

```
 private static Dictionary<JointType, double> jointFactors = null;
    static CalibrationUtils()
    {
        InitJointFactors();
    }
    public static class EnumUtil
    {
        public static IEnumerable<T> GetValues<T>()
        {
            return Enum.GetValues(typeof(T)).Cast<T>();
        }
    }
    private static void InitJointFactors()
    {
        var jointTypes = EnumUtil.GetValues<JointType>();
        jointFactors = new Dictionary<JointType, double>();
        foreach(JointType type in jointTypes)
        {
            jointFactors.Add(type, 0);
        }
    }
    private static double SmoothenFactor(JointType jointType, double factor, int weight)
    {
        double currentValue = jointFactors[jointType];
        double newValue = 0;
        if(currentValue != 0)
            newValue = (weight * currentValue + factor) / (weight + 1);
        else
            newValue = factor;
        jointFactors[jointType] = newValue;
        return newValue;
    } 
```

当涉及到因子使用时，请先使用该`SmoothenFactor`方法：

```
 public static Skeleton ScaleToMatch(this Skeleton skToBeScaled, Skeleton skDestiny, double additionalFactor = 1)
    {
        Joint newJoint = new Joint();

        double distanceToScale = 0;
        double distanceDestiny = 0;
        double factor = 1;
        int weight = 500;
        SkeletonPoint pos = new SkeletonPoint();
        Skeleton newSkeleton = null;
        KinectHelper.CopySkeleton(skToBeScaled, ref newSkeleton);
        SkeletonPoint hipCenterPosition = newSkeleton.Joints[JointType.HipCenter].Position;
        foreach(BoneOrientation bo in skToBeScaled.BoneOrientations)
        {
            distanceToScale = Distance3DBetweenJoints(skToBeScaled.Joints[bo.StartJoint], skToBeScaled.Joints[bo.EndJoint]);
            distanceDestiny = Distance3DBetweenJoints(skDestiny.Joints[bo.StartJoint], skDestiny.Joints[bo.EndJoint]);

            if(distanceToScale > 0 && distanceDestiny > 0)
            {

                factor = (distanceDestiny / distanceToScale) * additionalFactor;

                newJoint = skToBeScaled.Joints[bo.EndJoint]; // escaling only the end joint as the BoneOrientatios starts from HipCenter, i am scaling from center to edges.

                factor = SmoothenFactor(newJoint.JointType, factor, weight);

                pos = new SkeletonPoint()
                {
                    X = (float)((newJoint.Position.X - hipCenterPosition.X) * factor + hipCenterPosition.X),
                    Y = (float)((newJoint.Position.Y - hipCenterPosition.Y) * factor + hipCenterPosition.Y),
                    Z = (float)((newJoint.Position.Z - hipCenterPosition.Z) * factor + hipCenterPosition.Z)
                };
                newJoint.Position = pos;
                newSkeleton.Joints[bo.EndJoint] = newJoint;
            }
        }
        return newSkeleton;
    } 
```

`ScaleToMatch`如您所见，我还修改了您的方法。需要相对于`HipCenter`位置移动关节。新位置也会保存到新`Skeleton`实例中，因此它们不会用于进一步的矢量计算。

尝试一下，`weight`但由于我们的骨骼长度是恒定的，您可以使用 100 或更多的大数字来确保错误的 Kinect 读数不会干扰正确的比例。

`HandRight`这是它如何帮助缩放关节位置的示例：

![在此处输入图像描述](../Images/d632e40c1da5c4b237b1afe57ea7ca28.png)

被`weight`设置为`500`。结果`factor`应该在附近`2`（因为基础骨架被故意缩小了 2 倍）。

我希望它有帮助！

# python - 在其他进程完成后更改应用程序的图标

> ID：13596332
> 
> 赞同：2
> 
> 时间：2012-11-28T01:32:10.887
> 
> 标签：python, appindicator

我正在为 Grive 编写一个 appindicator [，这](https://github.com/Grive/)是一个用于同步 Google Drive 文件的守护进程。由于我的编程经验很少，我决定编写一个 Python 脚本，将 Grive 作为子进程调用，而不是将其集成到其 C++ 源代码中。

我已经修改了 Stefaan Lippens 的[代码，用于异步读取子进程管道](http://stefaanlippens.net/python-asynchronous-subprocess-pipe-reading)，以便在发生重要事件（例如添加新文件或网络错误）时显示通知并更改指示器的图标。通知运作良好；但是，指示器的图标只有在整个过程完成后才会更改，这是没有用的，因为我需要在完成后多次更改它。

这是我正在使用的代码：

异步.py

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import subprocess
import time
import threading
import Queue

class AsynchronousFileReader(threading.Thread):
    '''
    Helper class to implement asynchronous reading of a file
    in a separate thread. Pushes read lines on a queue to
    be consumed in another thread.
    '''

    def __init__(self, fd, queue):
        assert isinstance(queue, Queue.Queue)
        assert callable(fd.readline)
        threading.Thread.__init__(self)
        self._fd = fd
        self._queue = queue

    def run(self):
        '''The body of the tread: read lines and put them on the queue.'''
        for line in iter(self._fd.readline, ''):
            self._queue.put(line)

    def eof(self):
        '''Check whether there is no more content to expect.'''
        return not self.is_alive() and self._queue.empty()

def run(command, show):
    '''
    Main function to consume the output of a command.
    command = The command to be run
    show = Function that will process output
    '''
    # Launch the command as subprocess.
    process = subprocess.Popen(command, shell=True, stdin=None, stdout=subprocess.PIPE, stderr=subprocess.PIPE, close_fds=True)

    # Launch the asynchronous readers of the process' stdout and stderr.
    stdout_queue = Queue.Queue()
    stdout_reader = AsynchronousFileReader(process.stdout, stdout_queue)
    stdout_reader.start()
    stderr_queue = Queue.Queue()
    stderr_reader = AsynchronousFileReader(process.stderr, stderr_queue)
    stderr_reader.start()

    # Check the queues if we received some output (until there is nothing more to get).
    while not stdout_reader.eof() or not stderr_reader.eof():
        # Show what we received from standard output.
        while not stdout_queue.empty():
            line = stdout_queue.get()
            show(line)

        # Show what we received from standard error.
        while not stderr_queue.empty():
            line = stderr_queue.get()
            show(line)

        # Sleep a bit before asking the readers again.
        time.sleep(.1)

    # Let's be tidy and join the threads we've started.
    stdout_reader.join()
    stderr_reader.join()

    # Close subprocess' file descriptors.
    process.stdout.close()
    process.stderr.close()

    return True 
```

悲伤.py

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import subprocess
import time
import async
from gi.repository import Gtk
from gi.repository import Gio
from gi.repository import GObject
from gi.repository import Notify
from gi.repository import AppIndicator3 as AppIndicator

GRIVE_FOLDER = "/home/ilhuitemoc/Publike/Google Drive"

def show(line):
    line = line.replace("\n", "")
    print line
    if line.startswith("[gr::expt::MsgTag*] = "):
        line = line.replace("[gr::expt::MsgTag*] = ","",1)
        n = Notify.Notification.new("Error", line, icon)
        n.show()
        indicator.set_icon("ubuntuone-client-offline")
    if line.startswith("sync "):
        line = line.replace("sync ","",1)
        line = line.replace('"','<b>',1)
        line = line.replace('"','</b>',1)
        n = Notify.Notification.new("Sync in progress", line, icon)
        n.show()
        indicator.set_icon("ubuntuone-client-updating")
    if "Finished!" in line:
        #n = Notify.Notification.new(line, line, icon)
        #n.show()
        indicator.set_icon("ubuntuone-client-idle")

def openinfolder(obj):
    subprocess.call(["xdg-open",GRIVE_FOLDER])

def openinbrowser(obj):
    subprocess.call(["xdg-open","http://drive.google.com/"])

if __name__ == '__main__':
    subprocess.call(["killall","pantheon-notify"])
    time.sleep(1)

    indicator = AppIndicator.Indicator.new('grive', 'ubuntuone-client-offline', AppIndicator.IndicatorCategory.APPLICATION_STATUS)
    indicator.set_status(AppIndicator.IndicatorStatus.ACTIVE)
    menu = Gtk.Menu()

    status = Gtk.MenuItem("Connecting...") #Not finished yet
    status.set_sensitive(False)
    menu.append(status)

    sp = Gtk.SeparatorMenuItem()
    menu.append(sp)

    mi = Gtk.MenuItem("Open Google Drive folder")
    mi.connect('activate',openinfolder)
    menu.append(mi)

    mi = Gtk.MenuItem("Go to Google Drive webpage")
    mi.connect('activate',openinbrowser)
    menu.append(mi)

    sp = Gtk.SeparatorMenuItem()
    menu.append(sp)

    mi = Gtk.ImageMenuItem("Quit")
    img = Gtk.Image.new_from_stock(Gtk.STOCK_QUIT, Gtk.IconSize.MENU)
    mi.set_image(img)
    mi.connect('activate',Gtk.main_quit)
    menu.append(mi)

    menu.show_all()

    indicator.set_menu(menu)

    Notify.init('grive')
    icon = 'google-drive'

    #async.run('cd "%s" && grive' % GRIVE_FOLDER, show)
    GObject.timeout_add(5*60000, async.run, 'cd "%s" && grive' % GRIVE_FOLDER, show)
    #GObject.timeout_add(5000, async.run, "test.sh", show)
    Gtk.main() 
```

我认为我做错了什么，但这对我来说并不明显。使用子流程修改指标是否正确？还是我可以正确地做到这一点的任何其他方式？

# haskell - 将表达式转换为无点样式（Haskell）

> ID：13596335
> 
> 赞同：9
> 
> 时间：2012-11-28T01:32:25.410
> 
> 标签：haskell, functional-programming, pointfree

我写了这段代码，我必须将它重写为无点样式：

```
num_of_occ ele list = length(filter(==ele)list) 
```

所以我这样做了：

```
num_of_occ ele = length . filter((==)ele) 
```

有用。比我这样做：

```
num_of_occ = length . filter . (==) 
```

而且它没有……我的思路有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T01:41:25.810

这是一个常见的错误。这是修复：

```
num_of_occ = (length .) . filter . (==) 
```

它与您的函数采用的参数数量有关。函数组合`(.)`运算符适用于具有一个参数的函数，您需要应用两次`(f .) .`才能使其适用于具有两个参数的函数。

Hackage 上有一个程序，如果你想玩它，它会自动将一段代码转换为无点样式。

```
$ cabal 安装 pointfree
$ pointfree 'num_of_occ ele list = length (filter (== ele) list)'
num_of_occ =（长度。）。筛选 。(==)

```

如前所述，这需要类型签名才能正常工作。造成这种情况的原因相对平凡但晦涩难懂，并且存在提高 Haskell 性能的限制。您可以打开`NoMonomorphismRestriction`扩展，或添加类型签名：

```
num_of_occ :: Eq a => a -> [a] -> Int
num_of_occ = (length .) . filter . (==) 
```

# multithreading - cudaDeviceSynchronise 产生新线程，即使设置为阻塞

> ID：13596337
> 
> 赞同：0
> 
> 时间：2012-11-28T01:32:32.547
> 
> 标签：multithreading, cuda

我正在尝试编写一些代码以确保停止所有 GPU 活动（特别是所有正在运行的线程）。我需要这样做以使用 dlclose 卸载模块，因此我需要确保主机和设备上的所有线程都已停止。

根据[CUDA 文档](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__DEVICE_gb76422145b5425829597ebd1003303fe.html#gb76422145b5425829597ebd1003303fe)，cudaDeviceSynchronize：

> 阻塞，直到设备完成所有先前请求的任务...如果为该设备设置了 cudaDeviceScheduleBlockingSync 标志，则主机线程将阻塞，直到设备完成其工作。

但是，当我设置阻塞同步标志并调用 cudaDeviceSynchronize 时，会产生一个新的主机线程，它在 cudaDeviceSynchronize 返回后仍在运行。这与我想要达到的目标相反。

此行为在示例程序中演示：

```
#include <iostream>

void initialiseDevice()
{
    cudaError result = cudaSetDeviceFlags(cudaDeviceScheduleBlockingSync);

    if (cudaSuccess == result)
            std::cout << "Set device flags." << std::endl;
    else
            std::cout << "Could not set device flags. (" << result << ")"
                    << std::endl;
}

void synchroniseDevice()
{
    cudaError result = cudaDeviceSynchronize();

    if (cudaSuccess == result)
            std::cout << "Device synchronise returned success." << std::endl;
    else
            std::cout << "Device synchronise returned error. (" << result << ")"
                    << std::endl;
}

int main()
{
    initialiseDevice();
    sleep(1);
    synchroniseDevice(); // new thread is spawned here
    sleep(1);            // new thread is still running here!
    return 0;
} 
```

如果我用 编译这个程序`nvcc -g main.cu`，并在 gdb 中运行它，调用`info threads`显示在 cudaDeviceSynchronize 返回后有两个线程在运行。

在 gdb 中运行时在 cudaDeviceSynchronise 之后的行上输出信息线程：

```
(gdb) info threads 
  Id   Target Id         Frame 
  2    Thread 0x7ffff5b8b700 (LWP 28458) "a.out" 0x00007ffff75aa023 in select
    () at ../sysdeps/unix/syscall-template.S:82
* 1    Thread 0x7ffff7fd4740 (LWP 28255) "a.out" main () at cuda_test.cu:30 
```

谁能帮我理解为什么 cudaDeviceSynchronize 会产生一个新线程，以及为什么线程在调用返回后仍在运行？

谁能指出我正确的方向来帮助我找到一种阻止方法，直到所有设备**和主机**活动/线程完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:57:33.373

CUDA 4.2 及更高版本具有中介工作线程，用于调解应用程序线程和操作系统之间的阻塞调用。我的测试表明，为您的应用程序使用的每个 GPU 创建一个线程（每个 CUDA 上下文一个线程？）。我怀疑引入这些工作线程是为了使流事件回调的实现更容易（我认为这些线程可能会执行回调）；虽然，在这个技术原因上我可能完全错了。

我真的希望 NVIDIA 提供一个环境变量来禁用这些中间线程。如果您想将程序作为 SCHED_FIFO 运行，则会出现问题。在调用任何 CUDA 例程之前，您必须确保转换到 SCHED_FIFO。否则，在 SCHED_FIFO 转换之前生成的任何工作线程都将被安排为常规线程，而您的主线程是 SCHED_FIFO。这会导致优先级反转，您的主线程被阻塞，等待以较低优先级调度工作线程。在任何线程产生之前转换到 SCHED_FIFO 允许未来的线程继承父级的 SCHED_FIFO 策略和优先级。

至于您的问题的解决方案：您可以在应用程序的上下文中调用 cudaDeviceReset() 吗？这应该有望重新初始化系统中的任何 CUDA 运行时状态并终止任何工作线程。否则，总会有 pthread_cancel() （或 Windows 等价物），但这可能会使 CUDA 处于不一致的状态。

# ios - 在数组中创建 UIButtons 并将它们添加到 MainViewController

> ID：13596339
> 
> 赞同：0
> 
> 时间：2012-11-28T01:32:42.183
> 
> 标签：ios, nsmutablearray

我一直在开发一个应用程序，我在 IB 中手动创建了十几个按钮。我现在想重新开始，并在代码中做所有事情，因为我需要按钮的数量是动态的。我还想做其他事情，比如手动控制它们出现的位置等。

在`MainViewController.h`：

```
@property (nonatomic, retain) IBOutlet UIButton *startButton;
@property (nonatomic, retain) IBOutlet UIButton *stopButton;
@property (nonatomic, retain) IBOutletCollection(UIButton) NSMutableArray *tiles;
- (IBAction) tilePressed:(id)sender;
- (void) initTiles; 
```

在`MainViewController.m`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initTiles];
}

- (void)viewDidUnload
{
    [self setStartButton:nil];
    [self setStopButton:nil];
    [self setTiles:nil];
    [super viewDidUnload];
}

-(void)initTiles
{
//tiles = [[NSMutableArray alloc] initWithCapacity:5];

  for (int count = 0; count < 5; count++) 
  { //I used tiles.count here, but that fails
    UIButton *b = [[UIButton alloc] initWithFrame:CGRectMake(count*10+10, 10, 10, 10)];
    [b setTitle:[NSString stringWithFormat:@"%i",count+1] forState:UIControlStateNormal];
    [b setTag:count];
    [b setHidden:NO];
    [b addTarget:self action:@selector(tilePressed:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:b];
  }
}

-(IBAction)tilePressed:(id)sender {
    NSLog(@"button pressed: %i", [sender tag]);
} 
```

我一直在尝试做的只是在屏幕上添加 5 个按钮。理想情况下，我想创建按钮，将它们放在一个数组 (NSMutableArray) 中，以便以后可以操作它们，然后将它们扔到`tiles`MainViewController。但我什至没有把按钮拿到控制器上没有瓷砖对象。

编辑：我想我会补充一下，它们是否属于一个数组并不重要，重要的是我可以稍后与它们交互，即倾斜会有动画和文本更改等。然而，最初的问题是，是他们没有显示在控制器上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:44:19.460

您的代码实际上可以完美运行，但是您无法确定，因为：

*   按钮非常小，几乎无法使用
*   按钮太小以至于文本标题不会显示
*   背景颜色为 nil，因此默认为清除，这使得在这种情况下整个按钮不可见。

为了让它更明显，只需将按钮变大并更改背景颜色：

```
-(void)initTiles
{
    //tiles = [[NSMutableArray alloc] initWithCapacity:5];

    for (int count = 0; count < 5; count++)
    { //I used tiles.count here, but that fails
        UIButton *b = [[UIButton alloc] initWithFrame:CGRectMake(count*50+10, 50, 50, 50)];
        [b setTitle:[NSString stringWithFormat:@"%i",count+1] forState:UIControlStateNormal];
        [b setTag:count];
        [b setHidden:NO];
        [b addTarget:self action:@selector(tilePressed:) forControlEvents:UIControlEventTouchUpInside];
        [b setBackgroundColor:[UIColor purpleColor]];
        [self.view addSubview:b];
    }
} 
```

现在，将它们添加到数组中：

```
-(void)initTiles
{
    self.tiles = [[NSMutableArray alloc] initWithCapacity:5];

    for (int count = 0; count < 5; count++)
    { //I used tiles.count here, but that fails
        UIButton *b = [[UIButton alloc] initWithFrame:CGRectMake(count*50+10, 50, 50, 50)];
        [b setTitle:[NSString stringWithFormat:@"%i",count+1] forState:UIControlStateNormal];
        [b setTag:count];
        [b setHidden:NO];
        [b addTarget:self action:@selector(tilePressed:) forControlEvents:UIControlEventTouchUpInside];
        [b setBackgroundColor:[UIColor purpleColor]];
        [self.tiles addObject:b];
        [self.view addSubview:b];
    }
} 
```

然后，您可以使用数组访问按钮！

# iphone - UILabel 没有视觉上令人耳目一新

> ID：13596344
> 
> 赞同：0
> 
> 时间：2012-11-28T01:33:32.887
> 
> 标签：iphone, ios, cocoa, uilabel

## 问题

我有一个`UILabel`隐藏在几层子视图中，我似乎无法更改它的文本。更新标签的代码在`MyCardSubclass`'s`updateVisualElements`方法中。真正奇怪的是，**当我记录这些标签的描述时，文本已更新，但不可见。**这是它的样子：

在我的视图控制器的`viewDidLoad`方法中，我初始化了一个`UIScrollView`和我的卡片对象。我将其添加`cardView`为子视图，如下所示：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    MyCardSubclass *myCard = [[MyCardSubclass alloc]initWithInfo:info andPoint:CGPointMake(5, runningYValue)];
    [myCard setParentViewController:self];
    [scrollView addSubview:[myCard cardView]];

    //Resize scrollView contentSize
} 
```

### 我的卡

```
//header
@property (nonatomic, strong) UIView *contentView;
@property (nonatomic, strong) UIView *cardView;
@property (nonatomic, strong) CardInfo *cardInfo;
@property (nonatomic, strong) UIViewController *parentViewController;

//implementaion
-(UIView *)cardView
{
CGRect screenRect = [[UIScreen mainScreen] bounds];
UIView *toReturn = [[UIView alloc]initWithFrame:CGRectMake(self.point.x,self.point.y, screenRect.size.width-borderOffset*2, cardViewHeight)];

UILabel *titleLabel = [[UILabel alloc]initWithFrame:CGRectMake(borderOffset, 0, toReturn.frame.size.width-borderOffset*2, titleHeight)];
[titleLabel setText:self.title];
[toReturn addSubview:titleLabel];

[self.contentView setFrame:CGRectMake(borderOffset, titleHeight, screenRect.size.width-borderOffset, contentViewHeight)];
if(self.contentView)
    [toReturn addSubview:self.contentView];
else
    NSLog(@"no contentView");

//other view stuff

return toReturn;
} 
```

### 我的卡子类

```
//header
@property(nonatomic, strong) UILabel *totalAmountLabel;
@property(nonatomic, strong) UILabel *availableAmountLabel;
@property(nonatomic, assign) double available;

//implementation
-(UIView *)cardView
{
  [self setContentView:[self contentViewFromCardInfo:self.cardInfo]];
  return [super cardView];
}

-(UIView *)contentViewFromCardInfo:(CardInfo *)cardInfo
{
  UIView *toReturn = [[UIView alloc]init];

  NSString *amount = @"0";

  self.totalAmountLabel = [[UILabel alloc]initWithFrame:CGRectMake(labelWidth,
                                                                     runningYValue,
                                                                     labelWidth,
                                                                     labelHeight)];
  [self.totalAmountLabel setText:amount];
  [toReturn addSubview:self.totalAmountLabel];
  runningYValue +=self.totalAmountLabel.frame.size.height+spacer;

  self.availableAmountLabel = [[UILabel alloc]initWithFrame:CGRectMake(labelWidth,
                                                                         runningYValue,
                                                                         labelWidth,
                                                                         labelHeight)];

  [self.availableAmountLabel setText:@"0"];
  [toReturn addSubview:self.availableAmountLabel];

  return toReturn;
}

-(void)updateVisualElements
{
  NSString *amount = @"10"
  NSString *availableString = @100"
  //The log descriptions for these labels are okay.
  [self.totalAmountLabel setText:amount];
  NSLog(@"%@",self.totalAmountLabel.debugDescription);
  [self.availableAmountLabel setText:availableString];
  NSLog(@"%@",self.availableAmountLabel.debugDescription);

  NSAssert([NSThread isMainThread], @"Not on main thread");
  NSAssert(self.totalAmountLabel, @"No label");
} 
```

## 我试过的

*   `[self.totalAmountLabel setNeedsDisplay]`设置文本后调用

*   使用在主线程上调用方法`[self.totalAmountLabel performSelector:@selector(setText:) withObject:amount afterDelay:0.0]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:13:53.213

您可以尝试一件事，使用**`Tag`**属性来获取添加的标签并更改其竞争

**例子：**

```
 UILabel totalAmountLabel = [[UILabel alloc]initWithFrame:CGRectMake(labelWidth,
                                                                     runningYValue,
                                                                     labelWidth,

  [totalAmountLabel setText:amount];
  totalAmountLabel.tag = 100;
  [toReturn addSubview:totalAmountLabel]; 
```

然后在你的**`updateVisualElements()`**

```
 UILabel *tempTotalAmountLabel = (UILabel *)[self.view viewWithTag:100];
 [tempTotalAmountLabel setText:amount]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:00:08.973

修复！问题实际上并不在于我尝试设置标签或绘制其视图。

我没有正确使用我的初始化程序来初始化我的内容视图一次。

我在我的子类中删除了这个覆盖

```
-(UIView *)cardView
{
  [self setContentView:[self contentViewFromCardInfo:self.cardInfo]];
  return [super cardView];
} 
```

我还从`-(UIView *)cardView`我的超类中的方法中获取了代码，并将其放入一个`-(UIView *)buildCardView`方法中，并将 cardView 属性访问器重写为它应该是的。

```
-(UIView *)cardView
{
    if(!_cardView)
        _cardView = [self buildCardView];

    return _cardView;
} 
```

感谢您的意见和评论。

# android - 谷歌地方API解析问题

> ID：13596350
> 
> 赞同：1
> 
> 时间：2012-11-28T01:34:15.970
> 
> 标签：android, json, google-places-api

我正在使用 google places API，在解析中我使用的是 JSON，但是这一行

```
JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
request.addParser(parser); 
```

已弃用。有什么方法可以修复或任何替代方法吗？

这是功能：

```
public Placeslist search(double latitude, double longitude, double radius, String types)
        throws Exception {

    try {
        HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
        request.getUrl().put("key", API_KEY);
        request.getUrl().put("location", _latitude + "," + _longitude);
        request.getUrl().put("radius", _radius);  
        request.getUrl().put("sensor", "false");
        if(types != null)
            request.getUrl().put("types", types);

        Placeslist list = request.execute().parseAs(Placeslist.class);
        // Check log cat for places response status
        Log.d("Places Status", "" + list.status);
        return list;
    } catch (HttpResponseException e) {
        Log.e("Error:", e.getMessage());
        return null;
    }
}  

// Creating http request Factory  
public static HttpRequestFactory createRequestFactory(
        final HttpTransport transport) {
    return transport.createRequestFactory(new HttpRequestInitializer() {
        public void initialize(HttpRequest request) {
            GoogleHeaders headers = new GoogleHeaders();
            headers.setApplicationName("Google-Places-Test");
            request.setHeaders(headers);
            JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
            request.addParser(parser);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T17:21:00.253

在 1.11 版中似乎不推荐使用类`JsonHttpParser`和方法。`HttpRequest`有关详细信息，请参阅[弃用列表](http://javadoc.google-http-java-client.googlecode.com/hg/1.10.2-beta/deprecated-list.html)。

所以而不是：

```
JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
request.addParser(parser); 
```

您现在将拥有：

```
JsonObjectParser parser = new JsonObjectParser(new JacksonFactory());
request.setParser(parser); 
```

并将您的导入更改为：

```
import com.google.api.client.json.JsonObjectParser; 
```

编辑：我已经对此进行了测试，它对我有用。

# jquery - jQuery：使用字符串应用插件

> ID：13596352
> 
> 赞同：1
> 
> 时间：2012-11-28T01:34:57.697
> 
> 标签：jquery, jquery-plugins

我写了一个 jquery 插件，我像这样应用它：

```
div.myPlugin1(); 
```

现在我想使用字符串动态应用它：

```
var number = 1;
var plugin_name = "myPlugin"+number;
div[plugin_name](); 
```

太糟糕了，这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:37:46.807

```
div[plugin_name].call(div); 
```

或者

```
div[plugin_name].apply(div); 
```

（它们在使用参数的方式上有所不同，但对于无参数方法的行为相同）

# asp.net-mvc-3 - 如何从 Razor MVC3 中的表单提交操作返回时更改 div 的样式？

> ID：13596356
> 
> 赞同：1
> 
> 时间：2012-11-28T01:35:26.933
> 
> 标签：asp.net-mvc-3, razor

我有一个带有表单和提交按钮的 Razor/ASP/MVC3 Web 应用程序，它会在服务器上执行一些操作，然后发回表单。通常会有一些延迟，重要的是用户知道他们应该在关闭页面或在网站上做其他事情之前等待它完成并确认，因为用户似乎正在这样做，有时他们的工作还没有被处理假设它有。

因此，我在一个隐藏的 Div 中添加了一个“正在保存，请稍候...”微调器，当他们按下提交按钮时，该微调器变得可见，效果非常好，但我无法找到获取 Div 重新的方法- 动作完成时隐藏。

我的微调器 Div 是：

```
<div id="hahuloading" runat="server">
  <div id="hahuloadingcontent">
    <p id="hahuloadingspinner">
        Saving, Please Wait...<br />
        <img src="../../Content/Images/progSpin.gif" />
    </p>
  </div>
</div> 
```

它的 CSS 是：

```
#hahuloading
{
    display:none;
    background:rgba(255,255,255,0.8);
    z-index:1000;
} 
```

我让“请稍候”微调器出现在可见按钮的 JS 方法中，它调用实际的提交按钮，如下所示：

```
 $(document).ready(function () {
        $("#submitVisibleButton").click(function () {
            $(this).prop('disabled', true);
            $("#myUserMessage").html("Saving...");
            $("#myUserMessage").show();
            $("#hahuloading").show();
            document.getElementById("submitHiddenButton").click();
        });
    }); 
```

并且我的视图模型代码被调用，执行操作并返回一个字符串，该字符串设置了显示正常的用户消息内容，但是当我尝试在示例中执行一些代码时，我看到例如：

```
 // Re-hide the spinner:
        Response.write (hahuloading.Attributes.Add("style", "visibility:hiddden")); 
```

它告诉我“当前上下文中不存在 hahuloading”。是否有某种方法我应该在视图模型中定义一个变量，该变量将对应于 Div，以便我可以从服务器的操作处理程序中设置它的可见性？或者，我可以让 div 显示以某个值为条件，以在页面从操作返回时起作用吗？或者，以任何方式，任何人都可以帮助我弄清楚如何在服务器操作完成后重新隐藏我的 div？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:40:43.677

这是用ajax完成的吗？我会假设是因为页面没有被重定向。试试这个：

```
$(document).ready(function () {
    $("#submitVisibleButton").click(function () {
        $(this).prop('disabled', true);
        $("#myUserMessage").html("Saving...");
        $("#myUserMessage").show();
        $("#hahuloading").show();
        document.getElementById("submitHiddenButton").click();
    });
    $("#hahuloading").ajaxStop(function () {
     $(this).hide();
    });
}); 
```

顺便说一句，您不再需要`runat=server`.

# objective-c - 设置 NSDateComponents 会导致不正确的 NSDate

> ID：13596358
> 
> 赞同：4
> 
> 时间：2012-11-28T01:35:34.520
> 
> 标签：objective-c, ios, nsdate, nsdatecomponents

我正在尝试获取本地时间为 21:00 的 NSDate 对象 - 不在乎哪一天。我对这个非常奇怪的结果摸不着头脑：

```
NSCalendar *calendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setHour:21];
[components setMinute:0];
[components setSecond:0];

NSDate *date = [calendar dateFromComponents:components];
NSLog(@"%@", date); 
```

结果是`0001-01-02 04:52:58 +0000`

我不知道为什么。当前时间是太平洋标准时间 17:34，但结果不会随当地时间改变。

如果我将 setMinute 和 setSecond 行调整为

```
[components setMinute:7];
[components setSecond:2]; 
```

我明白`0001-01-02 05:00:00 +0000`了，这是正确的（太平洋标准时间 21:00）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T02:04:58.220

问题是铁路时间直到 1883 年 11 月 18 日才实施。您忽略了设置年份，因此您得到的是在那之前的日期。在实施铁路时间之前，美国时区与格林威治标准时间的时差并不精确。我不确定 Apple 为您选择的确切时区，但无论是哪个时区，在 1883 年移至 PST 后似乎已调整了 7 分 2 秒。

# verilog - Verilog ：这个FF/Latch将在优化过程中被修剪

> ID：13596361
> 
> 赞同：1
> 
> 时间：2012-11-28T01:35:53.243
> 
> 标签：verilog

我正在使用 Xilinx ISE Project navigator (P.28d) 为自动售货机编写 verilog 代码。我的代码有什么问题？这么多警告，但没有错误。

```
module vend(
    input clk,
    input reset,
    input cancel,
    input sel1,
    input sel2,
    inout [6:0] money,
    input Rs_10,
    input Rs_20,
    output reg product,
    output reg [6:0] change,
    output reg [6:0] returns
    ); 
     wire wait_1,wait_2;
     reg st_1,st_2,st_3,st_4;
     wire pr_1,pr_2;
     reg nx_1,nx_2;
     reg snacks,coffee;
     reg snack_c,coffee_c;
     reg [6:0] money_count;

always @(posedge clk)

begin   : count
if (sel1==1)
    begin
    if(pr_1==1)
          begin
    nx_1<=wait_1;

          if((Rs_10) & ~(Rs_20))
    begin
    nx_1<=st_1;
    money_count=(money_count+7'b0001010);
          if(money_count>=7'b0011110)
    begin
                                    nx_1<=snacks;
    change<=({0,money_count}-7'b0011110);
                                    snack_c<=snack_c-1;
    disable count;
    end
    nx_1<=wait_1;
    if(cancel==1)
    begin
    returns<=({0,money_count});
    disable count;
    end

    end
    if(~(Rs_10) &(Rs_20))
    begin

    nx_1<=st_2;
    money_count=(money_count+7'b0010100);
    if(money_count>=7'b0011110)
    begin
                                    nx_1<=snacks;
    change<=({0,money_count}-7'b0011110);
                                    snack_c<=snack_c-1;
    disable count;
          end
                                    nx_1<=wait_1;
    if(cancel==1)
    begin
          returns<=({0,money_count});
    disable count;
    end
    end

    end
    end 
    else
            begin
                snack_c<=1'd4;
                nx_1<=reset;
                product<=0;
            end

          if (sel2==1)
    begin
    if(pr_2==1)
    begin
    nx_2<=wait_2;

    if((Rs_10) & ~(Rs_20))
    begin
    nx_2<=st_3;
    money_count=(money_count+7'b0001010);
    if(money_count>=7'b0101000)
    begin
    nx_2<=coffee;
    change<=({0,money_count}-7'b0101000);
    coffee_c<=coffee_c-1;
    disable count;
    end
    nx_2<=wait_2;
    if(cancel==1)
    begin
    returns<={0,money_count};
    disable count;

    end

    end
          if(~(Rs_10) &(Rs_20))
    begin

    nx_2<=st_4;
                                money_count=money_count+7'b0010100;
    if(money_count>=7'b0101000)
    begin
    nx_2<=coffee;
    change<=({0,money_count}-7'b0101000);
    coffee_c<=coffee_c-1;
    disable count;
    end
    nx_2<=wait_2;
    if(cancel==1)
    begin
    returns<=({0,money_count});
    disable count;

    end
    end

    end
    end 
        else
            begin
                coffee_c<=1'd4;
                nx_2<=reset;
                product<=0;
            end

end 
endmodule 
```

我收到的一些警告

```
Xst:1710 - FF/Latch <returns_0> (without init value) has a constant value of 0 in block <vend>. This FF/Latch will be trimmed during the optimization process.
Xst:1710 - FF/Latch <change_0> (without init value) has a constant value of 0 in block <vend>. This FF/Latch will be trimmed during the optimization process.
Xst:2677 - Node <money_count_0> of sequential type is unconnected in block <vend>. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:34:13.343

看起来该错误是指`change`and的 MSB`returns`始终为 的事实`0`，因此它不会综合逻辑（因为它会无缘无故地浪费门）。

你试过模拟这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:48:44.560

当我模拟并且只有 z 值时，这是因为我的模块中没有初始块。永远记得初始化你的寄存器和变量。

```
module foo(
     input a,
     output reg b);

    // Runs on startup.
    initial
    begin
        b = 1'b0;
    end
endmodule 
```

# c# - 节点字体大小的短语 Html 文档

> ID：13596368
> 
> 赞同：1
> 
> 时间：2012-11-28T01:36:21.070
> 
> 标签：c#, html, font-face, html-agility-pack, phrase

有什么方法可以短语（读取）html节点字体大小。

它在 C# 中，我尝试检查 htmlagilitypack 但找不到任何东西。

我正在使用 C# 从网页中提取信息，并且需要知道它有什么字体/样式。

感谢帮助。

# api - 这个谷歌 API 有规范吗？

> ID：13596370
> 
> 赞同：0
> 
> 时间：2012-11-28T01:36:31.230
> 
> 标签：api, google-maps

我想要一个给定区域的特定子字符串的 API，比如 kem，它会提供诸如 kemayoran 或 kentucky 之类的东西。

我在这里找到了一个： [http ://maps.google.com/maps/suggest?q=k&cp=2&hl=en&gl=&v=2&clid=1&json=a&ll=-6.230664,106.55365&spn=0.498289,0.276031&src=1&num=20&numps= 10](http://maps.google.com/maps/suggest?q=k&cp=2&hl=en&gl=&v=2&clid=1&json=a&ll=-6.230664,106.55365&spn=0.498289,0.276031&src=1&num=20&numps=10)

结果在这里：

```
[,,,[["Karawaci, Tangerang, Banten, Indonesia",[[[0,8,,"0x2e69f94aa2ffbb19:0x501576d15005300",1,,0,1,1,0,1,,,,9939],[10,19,,"0x2e69f8e853d2e38d:0x301576d14feb9c0",,,,,,,,,,,37],[21,27,,"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",,,,,,,,,,,545],[29,38,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Kebayoran Baru, Jakarta, Jakarta Capital Region, Indonesia",[[[0,14,,"0x2e69f16435820073:0x400c5e82dd4bfe0",1,,0,1,1,0,1,,,,9938],[16,23,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[25,47,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[49,58,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Kebayoran Lama, Jakarta, Jakarta Capital Region, Indonesia",[[[0,14,,"0x2e69f10e08ea97f5:0x400c5e82dd4bf80",1,,0,1,1,0,1,,,,9938],[16,23,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[25,47,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[49,58,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Karawang Regency, West Java, Indonesia",[[[0,16,,"0x2e69775e79e70e01:0x301576d14feb9e0",1,,0,1,1,0,1,,,,546],[18,27,,"0x2e68e6398252477f:0xbc18a454fc8e9d7e",,,,,,,,,,,545],[29,38,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,546,,,,0.0059705396927272232,,0],["Kembangan, Jakarta, Jakarta Capital Region, Indonesia",[[[0,9,,"0x2e69f773223661c9:0x400c5e82dd4c150",1,,0,1,1,0,1,,,,9938],[11,18,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[20,42,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[44,53,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Kelapa Gading, Jakarta, Jakarta Capital Region, Indonesia",[[[0,13,,"0x2e69f53368e40397:0x400c5e82dd4c1f0",1,,0,1,1,0,1,,,,9938],[15,22,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[24,46,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[48,57,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Kota Tangerang, Banten, Indonesia",[[[0,14,,"0x2e69f8e853d2e38d:0x301576d14feb9c0",1,,0,1,1,0,1,,,,37],[16,22,,"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",,,,,,,,,,,545],[24,33,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,37,,,,0.0059705396927272232,,0],["Kalideres, Jakarta, Jakarta Capital Region, Indonesia",[[[0,9,,"0x2e69f8081bfecd17:0x400c5e82dd4c130",1,,0,1,1,0,1,,,,9938],[11,18,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[20,42,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[44,53,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Karang Tengah, Tangerang, Banten, Indonesia",[[[0,13,,"0x2e69f9f95eebc263:0x501576d15005520",1,,0,1,1,0,1,,,,9939],[15,24,,"0x2e69f8e853d2e38d:0x301576d14feb9c0",,,,,,,,,,,37],[26,32,,"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",,,,,,,,,,,545],[34,43,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Kebon Jeruk, Jakarta, Jakarta Capital Region, Indonesia",[[[0,11,,"0x2e69f6fc585f2119:0x400c5e82dd4c140",1,,0,1,1,0,1,,,,9938],[13,20,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[22,44,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[46,55,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Kembangan Selatan, Jakarta, Jakarta Capital Region, Indonesia",[[[0,17,,"0x2e69f771676956eb:0x500c5e82dd53ad0",1,,0,1,1,0,1,,,,9939],[19,26,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[28,50,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[52,61,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Kosambi, Banten, Indonesia",[[[0,7,,"0x2e6a037bcda7d61b:0x401576d14fed6d0",1,,0,1,1,0,1,,,,37],[9,15,,"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",,,,,,,,,,,545],[17,26,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,37,,,,0.0059705396927272232,,0],["Kelapa Dua, Curug, Banten, Indonesia",[[[0,10,,"0x2e69fc0f4b37da0f:0x501576d15005230",1,,0,1,1,0,1,,,,9938],[12,17,,"0x2e69fc3f47733283:0x401576d14fed760",,,,,,,,,,,37],[19,25,,"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",,,,,,,,,,,545],[27,36,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9938,,,,0.0059705396927272232,,0],["Kemayoran, Jalan Garuda, Jakarta Pusat, Jakarta Capital Region, Indonesia",[[[0,9,,"0x2e69f5b89e46703d:0x76e6e2a8b70371cf",1,,0,1,1,0,1,,,,5139],[11,23,,"0x2e69f5bbe23cfc87:0x9dd643c13bf677f5",,,,,,,,,,,17],[25,38,,"0x2e69f44a266b52a5:0x300c5e82dd4b890",,,,,,,,,,,9937],[40,62,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[64,73,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,5139,,,,0.0059705396927272232,,0],["Kunciran, Tangerang, Banten, Indonesia",[[[0,8,,"0x2e69fbd50e260ba7:0x501576d15005260",1,,0,1,1,0,1,,,,9939],[10,19,,"0x2e69f8e853d2e38d:0x301576d14feb9c0",,,,,,,,,,,37],[21,27,,"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",,,,,,,,,,,545],[29,38,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Klender, Jakarta, Jakarta Capital Region, Indonesia",[[[0,7,,"0x2e698cac516deacd:0x500c5e82dd535c0",1,,0,1,1,0,1,,,,9939],[9,16,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[18,40,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[42,51,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Karet Tengsin, Jakarta, Jakarta Capital Region, Indonesia",[[[0,13,,"0x2e69f41ae77b1459:0x500c5e82dd53790",1,,0,1,1,0,1,,,,9939],[15,22,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[24,46,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[48,57,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Kemanggisan, Jakarta, Jakarta Capital Region, Indonesia",[[[0,11,,"0x2e69f6934ab075f1:0x500c5e82dd53c70",1,,0,1,1,0,1,,,,9939],[13,20,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[22,44,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[46,55,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Kebon Melati, Jakarta, Jakarta Capital Region, Indonesia",[[[0,12,,"0x2e69f423ac6f0a67:0x500c5e82dd537b0",1,,0,1,1,0,1,,,,9939],[14,21,,"0x2e69f3e945e34b9d:0x5371bf0fdad786a2",,,,,,,,,,,37],[23,45,,"0x2e69f3e945e34b9d:0x100c5e82dd4b820",,,,,,,,,,,545],[47,56,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,9939,,,,0.0059705396927272232,,0],["Kedunghalang, West Java, Indonesia",[[[0,12,,"0x2e69c6e837f5593b:0x401576d14fed5a0",1,,0,1,1,0,1,,,,37],[14,23,,"0x2e68e6398252477f:0xbc18a454fc8e9d7e",,,,,,,,,,,545],[25,34,,"0x2c4c07d7496404b7:0xe37b4de71badf485",,,,,,,,,,,33]]],2,,,,,,,,,,,,,,37,,,,0.0059705396927272232,,0]]] 
```

这几乎是完美的。抓到我不知道经纬度。似乎 0x2c4c07d7496404b7:0xe37b4de71badf485 以某种方式对这两个数字进行了编码。但是，我不知道。

有人知道该 API 的规范吗？那是私有API吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:52:21.453

那是仅用于 maps.google.com 的私有 API。如果您的应用程序或程序连续访问访问点，您的访问将被 Google 拒绝。

Google 为 REST 提供了官方 API，您应该使用这些 API。 [https://developers.google.com/maps/documentation/webservices/](https://developers.google.com/maps/documentation/webservices/)

# bash - 在 Redis 中删除很多键

> ID：13596371
> 
> 赞同：0
> 
> 时间：2012-11-28T01:36:44.220
> 
> 标签：bash, redis, xargs

试图做类似的事情：

```
# redis-cli keys "resque:lock:*" |xargs -0 redis-cli del
xargs: argument line too long 
```

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T01:40:16.230

摆脱`-0`. 我对 redis 不熟悉，但据我所知`redis-cli keys`，它不使用 NUL 分隔符。

没有它就呕吐的原因是它处理引号的方式。来自`man xargs`：

> **xargs**从标准输入中读取项目，由空格（**可以用双引号或单引号或反斜杠保护**）或换行符分隔，并执行命令（默认为 /bin/echo）一次或多次，后面跟着任何初始参数通过从标准输入读取的项目。标准输入上的空行被忽略。

试试`xargs -d '\n'`。这将禁用 xarg 的“智能”引用处理并告诉它逐行读取参数。

# c++ - 哪个类应该负责序列化？

> ID：13596376
> 
> 赞同：2
> 
> 时间：2012-11-28T01:37:32.443
> 
> 标签：c++, oop, serialization, class-design

我有一个非常普遍的问题，关于什么是更好的方法以及为什么：让一个对象负责序列化自己或有一个单独的`Reader`和`Writer`类来做到这一点？

* * *

这是一个插图。我有一个由标题和一系列对象组成的文件格式。

## 示例 #1 - 嵌入式序列化

```
class Header
{
    friend std::ostream& operator<< (std::ostream& out, const Header& header);
    friend std::istream& operator>> (std::istream& in, Header& header);
}

class Object
{
    friend std::ostream& operator<< (std::ostream& out, const Object& object);
    friend std::istream& operator>> (std::istream& in, Object& object);
}

class Reader
{
    void readHeader(Header& header) { ifs_ << header; }
    void readObject(Object& object) { ifs_ << object; }

private:
    ifstream ifs_;
}

class Writer
{
    void writeHeader(Header const& header) { header >> ofs_ }
    void writeObject(Object const& object) { object >> ofs_ }

private:
    ofstream ofs_;
} 
```

在这种情况下，所有序列化细节都进入重载的`<<`和`>>`运算符。

## 示例 #2 - 外部序列化

```
class Header
{

}

class Object
{

}

class Reader
{
    void readHeader(Header& header) { // serialization details go here }
    void readObject(Object& object) { // serialization details go here }

private:
    ifstream ifs_;
}

class Writer
{
    void writeHeader(Header const& header) { // serialization details go here }
    void writeObject(Object const& object) { // serialization details go here }

private:
    ofstream ofs_;
} 
```

注意：我提供`<<`和`>>`运算符只是作为示例，并不意味着我一定要将数据存储为文本。这种方法也可以用使用二进制格式的`serialize`/方法代替。`deserialize`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:22:36.477

简短的回答：恕我直言，您的每个实体类的 Reader 类专业化将是一个更好的解决方案。

长答案：

可能序列化不应该是您的实体的关注点（即：标题），因此此功能不应该属于它们（参见维基百科中的[单一责任原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)）。

另一方面，一个了解所有实体类的外部序列化程序在您的系统中是一种不可接受的紧密耦合（将来可读性和可维护性将受到严重影响）。

所以，我的建议是创建只知道如何序列化/反序列化特定实体类（即：HeaderReader/HeaderWriter）的 Readers/Writers 泛化。

[]的，

# ruby-on-rails - 使用注册流程略有不同的设计

> ID：13596383
> 
> 赞同：0
> 
> 时间：2012-11-28T01:38:05.683
> 
> 标签：ruby-on-rails, ruby, authentication, devise

在设计之前，我有一个名为 Participant 的模型，其中包含用户信息。它有一个控制器和一组与之配套的视图。我添加了设计，并要求它使用参与者作为用户记录。这似乎工作得很好。

现在在我的世界中，创建参与者的路径如下所示：./program/2/participant/new，因为除了单个“管理员”之外的任何参与者都是在单个程序中创建和使用的。参与者模型已经有一个 belongs_to :program。

我的路线如下所示：

```
 devise_for :participants

  root to: 'programs#index'
  resources :programs do
    resources :participants do
      resources :rounds do
        get 'survey' => 'rounds#present_survey'
        put 'survey' => 'rounds#store_survey'
      end
    end
    resources :questions
    resources :rounds
    member do
      get 'report' => 'reports#report'
    end
  end 
```

我对事物的结构有点困惑。当我将设计引擎中的所有视图带入我的应用程序时，我会得到视图/设计/注册/编辑和新的。我希望他们成为 /view/participants/edit 和新的。

我希望路线和所有这些都相应地表现出来。当我创建一个新的 Participant 时，我会从路由中知道它在哪个 Program 中，并且能够正确设置 program_id。当用户登录时，除非他们是“管理员”，否则我希望他们被重定向到 ./program/3 之类的路由。

我不知道如何解决这个问题。能给我一些建议吗，不胜感激！！

-- 皮托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:07:07.273

您必须执行以下操作

```
class ParticipantsController < Devise::RegistrationsController

  def new
    ... # your code of new
  end

  def update
    ... # your code of update
  end
end 
```

并在路线中

```
devise_for :users, :controllers => { :registrations => "participants" } 
```

希望它会有所帮助

# scala - 如何在scala中缩短理解（打破它）？

> ID：13596385
> 
> 赞同：10
> 
> 时间：2012-11-28T01:38:19.507
> 
> 标签：scala, break, for-comprehension, infinite-sequence

我有一段代码，代码如下：

```
val e2 = for (e <- elements if condition(expensiveFunction(e))) yield {
            expensiveFunction(e)
         } 
```

其中一些元素的条件为真，然后对所有剩余的元素变为假。

不幸的是，这不起作用（即使我忽略了性能），因为 my`elements`是一个无限迭代器。

有没有办法在理解中使用“中断”，以便在满足特定条件时停止产生元素？否则，计算 my 的 scala 惯用方法是`e2`什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T02:02:46.753

您可以采用惰性方法：

```
val e2 = elements.toIterator                    
          .map(expensiveFunction)
          .takeWhile(result => result == true) // or just .takeWhile(identity)
// you may want to strict iterator, (e.g. by calling .toList) at the end 
```

所以你按需计算昂贵的函数，如果某个步骤有错误，你就不会做不必要的工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T05:44:47.983

```
scala> def compute(i: Int) = { println(s"f$i"); 10*i }
compute: (i: Int)Int

scala> for (x <- Stream range (0, 20)) yield compute(x)
f0
res0: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> res0 takeWhile (_ < 100)
res1: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> res1.toList
f1
f2
f3
f4
f5
f6
f7
f8
f9
f10
res2: List[Int] = List(0, 10, 20, 30, 40, 50, 60, 70, 80, 90) 
```

编辑，另一个演示：

```
scala> def compute(i: Int) = { println(s"f$i"); 10*i }
compute: (i: Int)Int

scala> for (x <- Stream range (0, 20)) yield compute(x)
f0
res0: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> res0 takeWhile (_ < 100)
res1: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> res1.toList
f1
f2
f3
f4
f5
f6
f7
f8
f9
f10
res2: List[Int] = List(0, 10, 20, 30, 40, 50, 60, 70, 80, 90)

scala> Stream.range(0,20).map(compute).toList
f0
f1
f2
f3
f4
f5
f6
f7
f8
f9
f10
f11
f12
f13
f14
f15
f16
f17
f18
f19
res3: List[Int] = List(0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190)

scala> Stream.range(0,20).map(compute).takeWhile(_ < 100).toList
f0
f1
f2
f3
f4
f5
f6
f7
f8
f9
f10
res4: List[Int] = List(0, 10, 20, 30, 40, 50, 60, 70, 80, 90) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T01:47:06.410

你可以只使用 takeWhile：

```
elements.takeWhile(condition(expensiveFunction(_))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T02:30:07.350

这是我的想法：如果元素已经是一个惰性容器（如 Stream、Iterator）：

```
(for (e <- elements; 
      buf = expensiveFunction(e);  
      if condition(buf)) yield buf).headOption 
```

或不：

```
(for (e <- elements.view; 
      buf = expensiveFunction(e);  
      if condition(buf)) yield buf).headOption 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T01:58:54.003

找到了这个解决方案：

```
(for (e <- elements) yield {
  val x= expensiveFunction(e)
  if (condition(x)) Some(x) else None
}).takeWhile(_.nonEmpty).map(_.get) 
```

更好的，有人吗？

# r - 使用 grep 识别唯一字符串

> ID：13596388
> 
> 赞同：4
> 
> 时间：2012-11-28T01:38:47.603
> 
> 标签：r

假设我有一个向量字符串：

```
words <- c("Guardian","ia","librarian") 
```

如果我 grep 为“ia”，它将返回所有三个。

```
grep("ia",words) # 1 2 3 
```

我怎样才能使它只找到第二个术语，即其中没有其他内容的那个？

注意：我可以做相反的事情，`grep(".+ia|ia+.",words)`但我不确定在这种情况下如何只返回第二个位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T01:40:15.970

使用正则表达式将 grep 限制为您想要的字母：

```
grep("^ia$", words) # 2 
```

# templates - 在 prestashop 中覆盖贝宝模块模板文件

> ID：13596389
> 
> 赞同：2
> 
> 时间：2012-11-28T01:38:52.990
> 
> 标签：templates, module, paypal, smarty, prestashop

我一直在为 prestashop 创建一个主题，并且很早就发现您可以通过在 myTheme/modules/modulename 中创建一个文件夹来覆盖模块模板，然后将覆盖的模板放在那里，但是，当我尝试为贝宝模块被覆盖的模板文件没有被使用。

过去有没有其他 prestashop 用户遇到过这个问题，如果有，您是如何解决的？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T08:01:41.630

我遇到了类似的问题，因为我正在将要覆盖的模块中的文件复制到我的主题目录中，并删除那些我没有覆盖的文件。

但是，PayPal 的模块有几个层次。您不能将文件留在原处，它们需要位于覆盖目录的根目录中。

Para 示例，要覆盖`express_checkout_payment.tpl`：

复制`/app/modules/paypal/views/templates/hook/express_checkout_payment.tpl` 到`/app/themes/han/modules/paypal/express_checkout_payment.tpl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:15:45.520

我有同样的问题，并在[prestashop 论坛](http://www.prestashop.com/forums/index.php?/topic/180186-how-to-override-tpl-files-of-the-paypal-module/page__view__findpost__p__1027830)上找到了解决方法。

这意味着修改paypal模块代码，这不是一个完美的解决方案，但它可以工作......

# asp.net - Web API 路由 - api/{controller}/{action}/{id} “dysfunctions” api/{controller}/{id}

> ID：13596391
> 
> 赞同：95
> 
> 时间：2012-11-28T01:39:17.823
> 
> 标签：asp.net, routing, controller, asp.net-web-api, action

我在 Global.asax 中有默认路由：

```
 RouteTable.Routes.MapHttpRoute(
         name: "DefaultApi",
         routeTemplate: "api/{controller}/{id}",
         defaults: new { id = System.Web.Http.RouteParameter.Optional }
         ); 
```

我希望能够针对特定功能，所以我创建了另一条路线：

```
RouteTable.Routes.MapHttpRoute(
         name: "WithActionApi",
         routeTemplate: "api/{controller}/{action}/{id}",
         defaults: new { id = System.Web.Http.RouteParameter.Optional }
         ); 
```

所以，在我的控制器中，我有：

```
 public string Get(int id)
    {
        return "object of id id";
    }        

    [HttpGet]
    public IEnumerable<string> ByCategoryId(int id)
    {
        return new string[] { "byCategory1", "byCategory2" };
    } 
```

打电话`.../api/records/bycategoryid/5`会给我我想要的。但是，打电话`.../api/records/1`会给我错误

> 找到与请求匹配的多个操作：...

我理解为什么会这样 - 路由只定义了哪些 URL 是有效的，但是当涉及到函数匹配时，both`Get(int id)`和`ByCategoryId(int id)`match使框架`api/{controller}/{id}`感到*困惑。*

我需要做什么才能让默认的 API 路由再次工作，并保留它`{action}`？我想创建一个不同的控制器，命名`RecordByCategoryIdController`为匹配默认的 API 路由，我会为此请求`.../api/recordbycategoryid/5`. 但是，我发现这是一个“肮脏”（因此不令人满意）的解决方案。我一直在寻找这方面的答案，但没有关于使用路线的教程`{action}`甚至提到这个问题。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-11-28T02:15:42.763

路由引擎使用与您向其中添加规则相同的顺序。一旦它获得第一个匹配的规则，它将停止检查其他规则并以此来搜索控制器和操作。

所以，你应该：

1.  将您的特定规则放在一般规则之前（如默认），这意味着`RouteTable.Routes.MapHttpRoute`先映射“WithActionApi”，然后映射“DefaultApi”。

2.  删除`defaults: new { id = System.Web.Http.RouteParameter.Optional }`“WithActionApi”规则的参数，因为一旦 id 是可选的，像“/api/{part1}/{part2}”这样的 url 将永远不会进入“DefaultApi”。

3.  将命名操作添加到您的“DefaultApi”以告诉路由引擎输入哪个操作。否则，一旦您的控制器中有多个操作，引擎将不知道要使用哪一个并抛出“找到与请求匹配的多个操作：...”。然后要使其与您的 Get 方法匹配，请使用[ActionNameAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionnameattribute%28v=vs.108%29.aspx)。

所以你的路线应该是这样的：

```
// Map this rule first
RouteTable.Routes.MapRoute(
     "WithActionApi",
     "api/{controller}/{action}/{id}"
 );

RouteTable.Routes.MapRoute(
    "DefaultApi",
    "api/{controller}/{id}",
    new { action="DefaultAction", id = System.Web.Http.RouteParameter.Optional }
); 
```

和你的控制器：

```
[ActionName("DefaultAction")] //Map Action and you can name your method with any text
public string Get(int id)
{
    return "object of id id";
}        

[HttpGet]
public IEnumerable<string> ByCategoryId(int id)
{
    return new string[] { "byCategory1", "byCategory2" };
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-06-18T07:56:53.637

**您可以在属性路由**的帮助下解决您的问题

 ****控制器**

```
[Route("api/category/{categoryId}")]
public IEnumerable<Order> GetCategoryId(int categoryId) { ... } 
```

**jQuery中的URI**

```
api/category/1 
```

**路由配置**

```
using System.Web.Http;

namespace WebApplication
{
    public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            // Web API routes
            config.MapHttpAttributeRoutes();

            // Other Web API configuration not shown.
        }
    }
} 
```

并且您的默认路由作为默认**的基于约定的路由工作**

**控制器**

```
public string Get(int id)
    {
        return "object of id id";
    } 
```

**jQuery中的URI**

```
/api/records/1 
```

**路由配置**

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        // Attribute routing.
        config.MapHttpAttributeRoutes();

        // Convention-based routing.
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

查看文章以获取更多信息[属性路由和基于本发明的路由here](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2) & [this](http://weblogs.asp.net/jongalloway//looking-at-asp-net-mvc-5-1-and-web-api-2-1-part-2-attribute-routing-with-custom-constraints)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-10T07:53:31.083

试试这个。

```
public class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        // Web API configuration and services

        var json = config.Formatters.JsonFormatter;
        json.SupportedMediaTypes.Add(new System.Net.Http.Headers.MediaTypeHeaderValue("application/json"));
        config.Formatters.Remove(config.Formatters.XmlFormatter);

        // Web API routes
        config.MapHttpAttributeRoutes();

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional , Action =RouteParameter.Optional }

        );
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-07T18:50:13.443

可能的原因也可能是您没有从 ApiController 继承 Controller。发生在我身上花了一段时间才明白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T10:44:05.353

要区分路线，请尝试添加 id 必须为数字的约束：

```
RouteTable.Routes.MapHttpRoute(
         name: "DefaultApi",
         routeTemplate: "api/{controller}/{id}",
         constraints: new { id = @"\d+" }, // Only matches if "id" is one or more digits.
         defaults: new { id = System.Web.Http.RouteParameter.Optional }
         ); 
```**

# python - 在 python 中为 matplotlib 的“for”循环内的每页和多个页面制作多个图

> ID：13596392
> 
> 赞同：2
> 
> 时间：2012-11-28T01:39:22.663
> 
> 标签：python, loops, matplotlib, plot, pdf-generation

我需要从数值模型中生成 100 多个图（折线图）。到目前为止的代码正在生成循环内指定的图，但它不断向相同的 4 个图添加多行。我希望它完成 4 个绘图，然后打开一个新页面并一次又一次地绘制这 4 个绘图，所以我应该说 25 页总共 100 个绘图。

到目前为止的代码 - 我从小开始，想在 3 页上生成 12 个图并将其保存为文件“plot.pdf”：

```
from t2listing import *
import matplotlib.pylot as plt
from matplotlib.backends.backend_pdf import PdfPages

lst = t2listing('WAI1515PR_AW_407_ayfixold2.listing')

pdf_pages = PdfPages('plot.pdf')

feed = lst.generation.row_name

zone = feed[0:12]

sub = [221, 222, 223, 224]

for i in xrange(3):
    fig = plt.figure()
    for zone,sub in in zip(feed[0:12],(10/4+1)*sub):
        (time, massflow) = lst.history([('g',zone,'Generation rate')])
        ax1 = fig.add_subplot(sub)
        ax1.plot(time, massflow, 'k-')
        plt.ylabel('massflow kg/s')
        plt.xlabel('time in seconds')
        plt.title('GENER data')
        plt.tight_layout()
        plt.savefig('plot.pdf')
    pdf_pages.savefig(fig)
    pdf_pages.close() 
```

到目前为止的结果是我得到了 4 个图，每个图上都有 3 个线图，有什么可能的方法来获得 12 个单独的图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:39:49.603

您应该在每次迭代中生成新图形。例如`fig1 = plt.figure()`，`ax1 = fig1.add_subplot(sub)`在第一次迭代中。然后，`fig2 = plt.figure()`在`ax2 = fig2.add_subplot(sub)`第二次迭代中，依此类推。这样，它将在每次迭代中绘制四个子图。您可以将每个图形保存为`fig1.savefig(...)`，`fig2.savefig(...)`...

# xcode - 有没有办法在 XCode 的调试会话期间查看 UIView 的实例？

> ID：13596396
> 
> 赞同：0
> 
> 时间：2012-11-28T01:39:55.037
> 
> 标签：xcode, ios6

我正在调试 XCode 中视图的一个难以发现的问题，如果有办法检查当前视图层次结构，我会喜欢它。过去，我的方法是删除应用程序中的所有视图，然后按顺序重新添加每个视图，直到问题再次出现。上述方法耗时、乏味，并且需要更强大、可重复的解决方案。

所以，我问小组，有没有办法在调试会话期间检查 XCode 中的视图层次结构？是否有执行此操作的 3rd 方实用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:05:43.090

在调试器中，您可以键入

```
> po [view recursiveDescription] 
```

或者如果你想使用 NSLog 语句

```
NSLog(@"%@", [view performSelector:@selector(recursiveDescription)]); 
```

Apple 在本文档中提到它：http: [//developer.apple.com/library/ios/#technotes/tn2239/_index.html](http://developer.apple.com/library/ios/#technotes/tn2239/_index.html)

但是，否则，我在为其查找文档时遇到问题，因此我不知道它是否构成“私有 API”。换句话说，您可能不想将它包含在您提交给 App Store 的代码中。

# php - 为网址调整此正则表达式

> ID：13596397
> 
> 赞同：0
> 
> 时间：2012-11-28T01:40:03.533
> 
> 标签：php, regex

大家好，试图将我的正则表达式排序为 bbcodes。

我现在有这个网址：

```
 "/\[url\=\'(.+?)\'\](.+?)\[\/url\]/is", 
```

那只会得到已经包含在''中的url，我怎样才能让它检查带有和不带单引号的url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:49:43.407

你可以使用这个正则表达式：

```
\[url=(?:'([^']+)'|"([^"]+)")\](.+?)\[\/url\] 
```

它接受单引号、双引号和无引号分隔的 url 值。缺点是您必须检查多个捕获组才能获取 URL 属性值。

以下是捕获组：

*   第 1 组：如果属性是单引号分隔的，则找到的值。
*   第 2 组：如果属性是双引号分隔的，则找到的值。
*   第 3 组：URL 标记之间的文本。

如果您不允许方括号出现在 URL 标记之间，则可以改用以下正则表达式。在这种情况下，它将更快地找到匹配项。

```
\[url=(?:'([^']+)'|"([^"]+)")\]([^\[]+)\[\/url\] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:42:43.200

您可以使用交替的模式，即使用竖线 (|) 的结构。

```
"/\[url\=(\'(.+?)\'|([^'].+?))\](.+?)\[\/url\]/is", 
```

# python - 为 Python 2.7 构建/安装 C 模块时出错

> ID：13596407
> 
> 赞同：12
> 
> 时间：2012-11-28T01:41:40.433
> 
> 标签：python, visual-studio-2008

我在尝试为 python 安装/编译[ctools](http://deap.gel.ulaval.ca/doc/default/tutorials/speedup.html#using-the-c-version-of-the-nsga-ii-algorithm)时遇到以下错误（版本信息）

```
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:22:14) [MSC v.1500 64 bit (AMD64)] on win32 
```

*   操作系统：Windows 7 Professional 64 位（Service Pack 1）
*   已安装：Microsoft Visual C++ 2008 速成版

错误：

```
building 'deap.cTools' extension
Traceback (most recent call last):
  File "setup.py", line 40, in <module>
    cmdclass = {'build_py': build_py}
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\install.py", line 563, in run
    self.run_command('build')
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build.py", line 127, in run
    self.run_command(cmd_name)
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build_ext.py", line 340, in run
    self.build_extensions()
  File "C:\Python27\lib\distutils\command\build_ext.py", line 449, in build_extensions
    self.build_extension(ext)
  File "C:\Python27\lib\distutils\command\build_ext.py", line 499, in build_extension
    depends=ext.depends)
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 473, in compile
    self.initialize()
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 383, in initialize
    vc_env = query_vcvarsall(VERSION, plat_spec)
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 299, in query_vcvarsall
    raise ValueError(str(list(result.keys())))
ValueError: [u'path'] 
```

我已经按照[此处](https://stackoverflow.com/questions/4676728/value-error-trying-to-install-python-for-windows-extensions)的建议安装了 PyWin ，但没有帮助。我很感激帮助解决这个问题。

**编辑**

尝试安装时出现同样的问题`scikit-learn`

```
 File "C:\Python27\lib\distutils\msvc9compiler.py", line 299, in query_vcvarsall
    raise ValueError(str(list(result.keys())))
ValueError: [u'path'] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-20T05:03:47.393

我在我的博客中总结了以上内容。 [http://springflex.blogspot.com/2014/02/how-to-fix-valueerror-when-trying-to.html](http://springflex.blogspot.com/2014/02/how-to-fix-valueerror-when-trying-to.html)

要安装包含所有必需组件的 Visual Studio 2008 Express Edition：

1.  安装 Microsoft Visual Studio 2008 速成版。主要的 Visual Studio 2008 Express 安装程序可从（C++ 安装程序名称为 vcsetup.exe）获得：

2.  安装 Microsoft Windows SDK。Microsoft Windows SDK 可通过搜索 Microsoft 的下载站点获得，或直接访问： [http ://www.microsoft.com/downloads/details.aspx?FamilyId=F26B1AA4-741A-433A-9BE5-FA919850BDBF&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=F26B1AA4-741A-433A-9BE5-FA919850BDBF&displaylang=en)

3.  要验证您是否已安装所有组件，请检查 Microsoft SDK 是否包含 C/C++ 编译器“cl.exe”的“amd64”版本。这通常安装在

    ```
    C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\amd64\cl.exe 
    ```

4.  复制 .../VC/bin/vcvars64.bat 到 .../VC/bin/vcvarsamd64.bat

5.  将 .../VC/bin/vcvars64.bat 复制到 .../VC/bin/amd64/vcvarsamd64.bat

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-11T20:45:56.387

由于您使用的是 64 位版本的 Python，一旦您安装了[Microsoft Windows SDK for Windows 7 和 .NET Framework 3.5 SP1 （它安装了安装](http://www.microsoft.com/en-us/download/details.aspx?id=3138)[Visual Studio 2008 SP1 Express Edition](http://download.microsoft.com/download/A/5/4/A54BADB6-9C3F-478D-8657-93B3FC9FE62D/vcsetup.exe) 时未安装的 64 位编译器）；您需要将 复制到*声称*它`vcvars64.bat`的位置。`vcvarsall.bat`

 *从`%CSIDL_PROGRAM_FILESX86%\Microsoft Visual Studio 9.0\VC\bin\`，您需要[复制](https://devtalk.nvidia.com/default/topic/460547/visual-studio-express-2008-and-64-bit-compiles-on-win7-how-to-fix-visual-studio-express-64-bit-compi/) `vcvars64.bat`到`amd64\vcvarsamd64.bat`。

注意目标文件名中的**amd**部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-07T21:39:06.130

Microsoft now publishes a [Visual C++ compiler just for Python 2.7](http://aka.ms/vcpython27), although it will work for other versions of Python that used the same compiler. Check the system requirements: setuptools 6.0 or later is required. It will not work with packages using distutils.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-03T03:00:27.030

我遇到了这个问题，因为我没有 64 位版本的 Visual C++ 2008。为了解决这个问题，我按照[这个答案](https://stackoverflow.com/a/5981596/1397061)通过程序和功能中的更改/删除安装了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-07T18:35:20.383

我遇到了同样的问题，但只是重命名上面列出的文件（以某种不透明的方式）对我不起作用。起作用的是一个更简单的解决方案。只需在开始安装之前运行 vcvarsall.bat。这设置了正确的路径并且更容易理解。就我而言，我需要一个 64 位版本，所以我运行：“C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\vcvarsall.bat”x64*

# python - 终端和python脚本中的du -sh行为？

> ID：13596408
> 
> 赞同：0
> 
> 时间：2012-11-28T01:41:47.353
> 
> 标签：python, linux, shell, terminal, du

参考[我在 SuperUser 的问题](https://superuser.com/questions/507666/email-file-and-folder-list-with-size)，我面临一个令人费解的情况，即使用`du -sh /media/ExternalHd/myfolder/*`终端按预期工作，但`p=subprocess.Popen(['du', '-sh', '/media/ExternalHd/myfolder/*'], stdout=subprocess.PIPE)`在 python 脚本中使用显示`error du: cannot access /media/ExternalHd/myfolder/*: No such file or directory`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:16:08.247

终端会为您扩展 *。告诉子进程这样做：

```
p=subprocess.Popen('du -sh /tmp/*', shell=True) 
```

或者，如果您需要更多控制，您可以使用 glob 模块自己扩展 *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:19:28.947

您应该将参数添加`shell=True`到您的 subprocess.Popen 函数中。这样您就可以调用 shell 并使用环境变量、文件 glob 等。

```
p = subprocess.Popen(['du', '-sh', '/media/ExternalHd/myfolder/*'], stdout=subprocess.PIPE, shell=True) 
```

但是，您应该避免使用`shell=True`，因为存在安全隐患，请参阅[python subprocess module docs](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)中的警告。对于像这样的小脚本，也许它不会产生问题，但请记住；）

有关更多详细信息，请参阅[this answer](https://stackoverflow.com/a/3172488) to another stackoverflow question。

# c# - 如何判断哪个面板触发了点击事件

> ID：13596409
> 
> 赞同：2
> 
> 时间：2012-11-28T01:41:49.400
> 
> 标签：c#, winforms, events, sender

我有一组面板控件，它们以编程方式以我的形式放置在不同的位置。您可以在下面看到，当我遍历并增加`I`时，所有面板都注册了相同的事件处理程序。这对我来说很好，但我无法在事件处理程序代码中找到一种方法来判断哪个面板触发了事件。我尝试使用`sender`，但我似乎无法弄清楚如何使用它。所以我的问题是如何在事件处理程序代码中判断哪个面板触发了事件

```
 Panels[i].Click += new EventHandler(AllPanels_Click);

  void AllPanels_Click(object sender, EventArgs e)
        {
           //need logic code here!
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:47:09.840

投到第`sender`一个`Panel`：

```
void Form1_Click(object sender, EventArgs e)
{
    Panel clickedPanel = sender as Panel;
    if (clickedPanel != null)
    {
        // do something with clickedPanel
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T01:50:48.240

```
void Form1_Click(object sender, EventArgs e)
{
    var panel = sender as Panel;
    if (null != panel)
    {
        if (panel.Name.equals("Panel1"))
        {
             .. ...
        }
    }
} 
```

# javascript - 将鼠标悬停在固定的 HTML 元素上时防止 JQuery 可排序传播

> ID：13596410
> 
> 赞同：2
> 
> 时间：2012-11-28T01:41:51.283
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable, jquery-events

我试图弄清楚如何在将鼠标悬停在页面底部的固定元素上时防止可排序的拖动和传播。

顺便说一句，我不确定最好和最简单的方法是什么。

我在这里创建了一个简单的示例来概述问题：http: [//jsfiddle.net/arpowers/kSCQU/1/](http://jsfiddle.net/arpowers/kSCQU/1/)

可排序代码：

```
jQuery('.sortable_area').sortable({
  items: ".sortable",
  dropOnEmpty: true,
  forcePlaceholderSize: true,
  forceHelperSize: false,
  connectWith: ".column",
  placeholder: "placeholder",
  cursor: "move",
  tolerance: "pointer",
});​ 
```

并且有一个简单的 HTML 元素固定在页面的页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:15:19.237

Sortable 有一个选项[contains](http://docs.jquery.com/UI/Sortable#option-containment)。`containment: '.container'`在初始化可排序元素时设置并`margin-bottom: 251px;`在类中添加属性`container`（固定部分总高度）。然后该元素不能在您的固定部分上，它应该防止任何可排序的事件。

# matlab - 弹丸运动与阻力 Matlab

> ID：13596413
> 
> 赞同：0
> 
> 时间：2012-11-28T01:42:00.740
> 
> 标签：matlab, drag, octave, motion, projectile

我正在尝试用空气阻力来模拟弹丸运动。

这是我的代码：

```
function [ time , x , y ] = shellflightsimulator(m,D,Ve,Cd,ElAng)

% input parameters are:
% m mass of shell, kg
% D caliber (diameter)
% Ve escape velocity (initial velocity of trajectory)
% Cd drag coefficient
% ElAng angle in RADIANS

A = pi.*(D./2).^2; % m^2, shells cross-sectional area (area of circle)
rho = 1.2 ; % kg/m^3, density of air at ground level
h0 = 6800; % meters, height at which density drops by factor of 2
g = 9.8; % m/s^2, gravity
dt = .1; % time step

% define initial conditions
x0 = 0; % m
y0 = 0; % m
vx0 = Ve.*cos(ElAng); % m/s
vy0 = Ve.*sin(ElAng); % m/s

N = 100; % iterations

% define data array
x = zeros(1,N + 1); % x-position,
x(1) = x0;
y = zeros(1,N + 1); % y-position,
y(1) = y0;
vx = zeros(1,N + 1); % x-velocity,
vx(1) = vx0;
vy = zeros(1,N + 1); % y-velocity,
vy(1) = vy0;

i = 1;
j = 1;

while i < N
    ax = -Cd*.5*rho*A*(vx(i)^2 + vy(i)^2)/m*cos(ElAng); % acceleration in x
    vx(i+1) = vx(i) + ax*dt; % Find new x velocity
    x(i+1) = x(i) + vx(i)*dt + .5*ax*dt^2; % Find new x position
    ay = -g - Cd*.5*rho*A*(vx(i)^2 + vy(i)^2)/m*sin(ElAng); % acceleration in y
    vy(i+1) = vy(i) + ay*dt; % Find new y velocity
    y(i+1) = y(i) + vy(i)*dt + .5*ay*dt^2; % Find new y position

    if y(i+1) < 0 % stops when projectile reaches the ground
        i = N;
        j = j+1;
    else
        i = i+1;
        j = j+1;
    end
end

plot(x,y,'r-')
end 
```

这就是我放入 Matlab 的内容：

shellflightsimulator(94,.238,1600,.8,10*pi/180)

这会产生一个奇怪的情节，而不是抛物线。此外，这些位置似乎是负值。注意：ElAng 以弧度为单位！

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:03:30.627

你的 vx 和 vy 不正确... vx= ve*sin（弧度角）和 vy 相反。你也不需要在你的初始速度和*之间加一个点...这仅用于逐个元素的乘法，并且初始速度是一个常数变量。但是，点乘数不会改变答案，只是没有必要..

# ruby-on-rails - Rails：根据嵌套模型值在提交时设置一个值

> ID：13596415
> 
> 赞同：0
> 
> 时间：2012-11-28T01:42:03.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设在我的 rails 应用程序中，我有一个模型 Entry，它有一个嵌套模型Measures，这样每个条目都有_many_measures（和measures belongs_to 条目）。

每项措施都有其自身的动机。Entry 是否有可能有一个整数也称为激励，其值等于所有度量值的总和？你如何做到这一点？

对我来说，这似乎变成了一个两部分的问题：如何在提交时根据另一个字段值定义模型字段？那么..如何在提交时根据其嵌套模型值定义一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:51:59.520

尝试`after_update`在嵌套属性的模型中使用回调来更新其父级：

```
class Measure < ActiveRecord::Base
  after_update :calculate_measure_sum

  ...
  private

  def calculate_measure_sum
    # calculate sum
    self.entry.save
  end
end 
```

您可能还需要在`after_create`回调上使用相同的方法。

**编辑：**

在阅读了`touch`另一个[问题](https://stackoverflow.com/questions/13604931/order-by-association-created-at-or-by-own-created-at-if-no-association)之后，我想更新我的方法：

```
class Entry < ActiveRecord::Base
  has_many :measures
  after_touch :calculate_measure_sum

  ...
  private

  def calculate_measure_sum
    # calculate sum
    self.entry.save
  end
end

class Measure < ActiveRecord::Base
  belongs_to :entry, touch: true
  ...
end 
```

这里发生的情况是，每次创建或编辑 Measure 时，它​​都会通过调用其[touch 方法](http://apidock.com/rails/v3.2.8/ActiveRecord/Persistence/touch)通知其 Entry 已更新。在条目中，我们可以使用回调`after_touch`来重新计算度量的总和。请注意，`after_touch`在创建、删除和修改度量时调用 -callback。

与我之前的方法相比，这种方法将责任放在了入口对象上，从设计的角度来看这是有利的。

# perl - 在 Perl 的数字 lt (<) 第 25 行中使用未初始化的值 $guess

> ID：13596417
> 
> 赞同：3
> 
> 时间：2012-11-28T01:42:07.577
> 
> 标签：perl, random

我对 Perl 很陌生，并且被分配了一个简单的猜谜游戏，用户有 8 次机会猜测 1 到 100 之间的数字。我不断收到上面提到的错误，无法弄清楚。

这是我的代码：

```
 use Modern::Perl;

    my ($guess,$target,$counter); 
    $target = (int rand 100) + 1;

    while ($guess < $target)
    {
        chomp ($guess=<>);
        print "Enter guess $counter: ";

        $counter++;

        if ($guess eq $target) {
            print "\nCongratulations! You guessed the secret number $target in   $counter";
        }
        elsif ($guess > $target) {
            print "\nYour guess, $guess, is too high.";
        }
        elsif ($guess < $target) {
            print "\nYour guess, $guess, is too low.";
        }
        else {
            print "You lose. The number was $target.";
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:24:20.603

您的代码存在一些问题。这是我的代码，使用不同的方法：

```
#!/usr/bin/perl

use 5.012;   # use strict; use feature 'say';
use warnings;

my $number = (int rand 100) + 1;
my $max_guesses = 8;

GUESS: foreach my $guess_no (1..$max_guesses) {
  say "($guess_no) Please enter a guess:";
  my $guess = <>;
  chomp $guess;

  unless ($guess =~ /^\d+$/) {
    say "Hey, that didn't look like a number!";
    redo GUESS;
  }

  if ($guess == $number) {
    say "Congrats, you were on target!";
    last GUESS;
  } elsif ($guess < $number) {
    say "Nay, your guess was TOO SMALL.";
  } elsif ($guess > $number) {
    say "Nay, your guess was TOO BIG.";
  } else {
    die "Illegal state";
  }

  if ($guess_no == $max_guesses) {
    say "However, you have wasted all your guesses. YOU LOOSE.";
    last GUESS;
  }
} 
```

示例用法：

```
$ perl guess-the-number.pl
(1) Please enter a guess:
15
Nay, your guess was TOO SMALL.
(2) Please enter a guess:
60
Nay, your guess was TOO BIG.
(3) Please enter a guess:
45
Nay, your guess was TOO BIG.
(4) Please enter a guess:
30
Nay, your guess was TOO SMALL.
(5) Please enter a guess:
38
Congrats, you were on target! 
```

（所有其他极端情况（猜测太多，非数字作为输入）按预期工作）

我做了什么不同的事情？

*   当猜测太小时我没有循环（←错误！）。相反，我对每个猜测进行了循环迭代。但是，`while (1)`循环也可以。
*   我使用简单的正则表达式对输入进行了完整性检查。它断言输入将被 Perl 视为数字。否则，您可以重做猜测。
*   我一声明它们就初始化所有变量。这消除了在错误消息中弹出未初始化值的任何可能性。
*   我使用适当的比较运算符。Perl 标量有两种形式：字符串型和数字型：

    ```
    Stringy  Numeric
    lt       <
    le       <=
    eq       ==
    ne       !=
    ge       >=
    gt       >
    cmp      <=> 
    ```

*   该`say`函数打印字符串 like `print`，但附加一个换行符。`\n`这将删除字符串开头或结尾的akward 。它使阅读代码更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:13:15.660

你没有提到哪一行是第 25 行！这可能很重要。

不过，看看你的`while`说法。请注意，您正在与 进行比较`$guess`，`$target`但尚未设置`$guess`。这是***在***你的`while`循环中设置的。这就是你得到未定义变量的原因。

我也没有看到在哪里`$counter`设置。这也可能是一个问题。

让我们仔细看看你的`while`循环：

```
while ( $guess < $target ) {
    blah, blah, blah
} 
```

假设有一个`$guess`，您将循环直到用户猜出一个大于 的数字`$target`。那是你要的吗？不，你说你想给用户八回合，就是这样。你想要的是更多类似的东西：

```
 my $count = 1;
 while ( $count <= 8 ) {
     $count++;
     blah, blah, blah
 } 
```

一个更好的方法是使用 for 循环：

```
for ( my $count = 1; $count <= 8; $count++ ) {
    blah, blah, blah
} 
```

然而，这些 C 风格的 for 循环是如此过时。`1..8`另外，使用语法有一种更清晰的方法。这和说的一样`(1, 2, 3, 4, 5, 6, 7, 8)`。它干净且易于理解：

```
 for my $counter (1..8) {
     blah, blah, blah
 } 
```

（**注意**：有些人在执行这种类型的循环时使用`foreach`关键字而不是`for`关键字，以将其与 C 样式的 for 循环区分开来。但是，有些人（咳！达米安康威，咳！）不赞成使用，`foreach`因为它没有并没有真正增加清晰度。）

让我们看看你的逻辑的另一个方面：

```
if ($guess eq $target) {
    print "\nCongratulations! You guessed the secret number $target in   $counter";
}
elsif ($guess > $target) {
    print "\nYour guess, $guess, is too high.";
}
elsif ($guess < $target) {
    print "\nYour guess, $guess, is too low.";
}
else {  #Do this if the guess isn't equal to, greater than or less than the target
    print "You lose. The number was $target.";
} 
```

你的`else`条款什么时候执行？答案是永远不会。毕竟，除非`$guess`既不大于、等于或小于，您也不会执行它`$target`。此外，即使您确实*失败了*，您仍然处于该循环中。

您可能想要做的是将*You lost*线放在循环之外。这样，在第八次猜测并且你的循环结束后，你会得到*You* lost spiel。

另外，让我们看看这一行：

```
chomp ( $guess = <> );
print "Enter guess $counter: "; 
```

首先，`<>`是*null 文件句柄运算符*，它与以下非常非常不同`<STDIN>`：

> 空文件句柄 <> 很特殊：它可以用来模拟 sed 和 awk 的行为，以及任何其他接受文件名列表的 Unix 过滤程序，对来自所有文件名的每一行输入执行相同的操作。<> 的输入要么来自标准输入，要么来自命令行中列出的每个文件。它是这样工作的：第一次评估 <> 时，检查 @ARGV 数组，如果它为空，则 $ARGV[0] 设置为“-”，打开时会为您提供标准输入。然后将@ARGV 数组作为文件名列表进行处理。

你想要的是`<STDIN>`.

另请注意，在打印提示之前您正在获取输入。你真的想这样做：

```
print "Enter guess $counter: ";
chomp ($guess = <STDIN>); 
```

此外，您希望设置`$|`为非零值以关闭缓冲。否则，您可能仍需要`$guess`在看到提示之前输入您的。

这是修改后的程序`Modern::Perl`在我的系统上不起作用，所以我使用三个单独的 pragma 来覆盖它：

```
#! /usr/bin/env perl
use strict;
use warnings;
use feature qw(say);

use constant {
    UPPER_RANGE => 100,
    MAX_GUESSES => 8,
};

$| = 1;
my $target = int ( ( rand UPPER_RANGE ) + 1 );

for my $counter (1..MAX_GUESSES) {
    print "Enter guess #$counter: ";
    chomp ( my $guess = <STDIN> );

    if ($guess == $target) {
        say "Congratulations! You guessed the secret number $target in $counter turns";
        exit;
    }   
    elsif ($guess > $target) {
        say "Your guess, $guess, is too high.";
    }   
    else {
        say "Your guess, $guess, is too low.";
    }   
}   
say "You lose. The number was $target."; 
```

有几件事我没有涉及：

*   进行数字比较时，使用`==`运算符而不是`eq`字符串。
*   我尽可能使用`say`而不是使用`print`。该`say`命令就像`print`它自动为我放在最后的 NL。
*   注意`exit;`我说你赢了之后。我想在那时结束我的程序。
*   请注意，在我需要它们之前，我不会声明所有变量。在我的程序中，`$guess`只`$counter`存在于`for`循环内部，而`$target`存在于循环内部和外部`for`。
*   我`use constant`帮助避免*神秘*数字。例如，`1..MAX_GUESSES`帮助我理解循环会达到我的最大猜测，而`1..8`不能解释为什么我会去 8。另外，我可以简单地改变我的常数，突然你有 10 次改变猜测 1 到 1000 之间的数字.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T02:23:11.863

这里的问题是您没有显式初始化变量。默认情况下，Perl 将您创建的变量初始化`my()`为该`undef`值。因此，请查看脚本中的以下行：

```
my ($guess,$target,$counter); 
```

这一行创建了三个变量，**所有**变量都设置为`undef`。有关`my()`运算符的详细信息，请查看[perlsub 文档](http://perldoc.perl.org/perlsub.html#Private-Variables-via-my%28%29)。这是该文档页面的相关引用：

> 如果需要，可以分配 my() 的参数列表，这允许您初始化变量。（如果没有为特定变量提供初始化程序，则使用未定义的值创建它。）

# c - Printf 输出顺序相反

> ID：13596418
> 
> 赞同：1
> 
> 时间：2012-11-28T01:42:13.940
> 
> 标签：c, printf

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

我在 GCC 中尝试了这个简单的 C 程序

```
#include<stdio.h>
int main(){
int x=5;
printf("%d,%d,%d,%d,%d",++x,x++,x,x++,++x);
return 0;
} 
```

输出是 9,7,7,6,6 我跟踪它并假设它会打印 6,6,7,7,9 但我发现我的假设顺序相反，怎么会！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:44:03.990

因为你的程序有**未定义的行为**。函数参数的计算之间没有序列点，并且在不干预序列点的情况下多次改变同一个对象是未定义的行为。

该程序只是格式错误。它不是一个有效的 C 程序。

# python - python - 如何在python pandas中将两列与if/else结合起来？

> ID：13596419
> 
> 赞同：10
> 
> 时间：2012-11-28T01:42:21.877
> 
> 标签：python, pandas

我对 Pandas 很陌生（即不到 2 天）。但是，我似乎无法找出将两列与 if/else 条件组合的正确语法。

实际上，我确实想出了一种使用“zip”的方法。这是我想要完成的，但似乎在 pandas 中可能有更有效的方法来做到这一点。

为了完整起见，我包括一些我做的预处理以使事情变得清晰：

```
records_data = pd.read_csv(open('records.csv'))

## pull out a year from column using a regex
source_years = records_data['source'].map(extract_year_from_source) 

## this is what I want to do more efficiently (if its possible)
records_data['year'] = [s if s else y for (s,y) in zip(source_years, records_data['year'])] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T00:01:17.743

在 pandas >= 0.10.0 尝试

```
df['year'] = df['year'].where(source_years!=0,df['year']) 
```

看看：

[http://pandas.pydata.org/pandas-docs/stable/indexing.html#the-where-method-and-masking](http://pandas.pydata.org/pandas-docs/stable/indexing.html#the-where-method-and-masking)

如评论中所述，这确实在引擎盖下使用 np.where - 不同之处在于熊猫将系列与输出对齐（例如，您只能进行部分更新）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T03:13:49.947

Perhaps try [np.where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html#numpy-where):

```
import numpy as np
df['year'] = np.where(source_years,source_years,df['year']) 
```

# android - Android 通知 PendingIntent Extras null

> ID：13596422
> 
> 赞同：56
> 
> 时间：2012-11-28T01:42:30.003
> 
> 标签：android, android-intent, bundle, android-notifications, android-pendingintent

我正在尝试将信息从通知发送到调用的活动，而从我的活动中我得到了空值。

通知代码如下：

```
private void showNotification() {
Intent resultIntent = new Intent(this, MainActivity.class);
if (D)
    Log.d(TAG, "Id: " + Id);
resultIntent.putExtra("ineedid", deviceId);

TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
stackBuilder.addParentStack(MeterActivity.class);
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,
    PendingIntent.FLAG_UPDATE_CURRENT);
// Bundle tmp = resultIntent.getExtras();
// if (tmp == null) {
// Log.d(TAG, "tmp bundle is null");
// } else {
// long id = tmp.getLong("ineedid", -1);
// Log.d(TAG, "tmp id : " + id);
// }
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
    BLEMessengerService.this)
    .setSmallIcon(R.drawable.ic_action_search)
    .setContentTitle("Event tracker")
    .setContentText("Events received").setOngoing(true)
    .setContentIntent(resultPendingIntent)
    .setWhen(System.currentTimeMillis());

int mId = R.string.service_notification_start_service;
mNM.notify(mId, mBuilder.getNotification());
} 
```

从主要活动的意图中获取信息的代码；

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    long deviceID = getIntent().getLongExtra("ineedid",
        -1);
    if (ID == -1) {
    if (D)
        Log.i(TAG_D, "Wrong Id received.");
    finish();
    } else {
    device = dataSource.getDeviceByID(deviceID);
    if (D)
        Log.i(TAG_D, "Get the id.");
    }
} else {
    if (D)
    Log.d(TAG_D, "Bundle is null");
    finish();
} 
```

在通知收到通知之前我已经验证，bundle 不为空，并且它在 extras 中有 id。虽然，当我试图从意图中获取它时，它已经消失了。帮助。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2016-03-28T21:17:34.440

在 PendingIntent 中使用这个标志`PendingIntent.FLAG_UPDATE_CURRENT`它对我有用

```
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-06-04T20:34:58.920

对我来说，除了设置 Intent.FLAG_ACTIVITY_SINGLE_TOP 之外，我还必须在意图中添加一个独特的操作：

```
 Intent resultIntent = new Intent(caller, NotificationActivity.class);

    String xId = getNextUniqueId();
    resultIntent.putExtra("x_id", xId);
    resultIntent.setAction(xId);
    resultIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

.. 如果没有 setAction(..)，我的 NotificationActivity 收到的 Intent 上的 Extras 为空。

这篇文章有助于解释它：[https ://stackoverflow.com/a/3128271/2162226](https://stackoverflow.com/a/3128271/2162226)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-28T02:01:18.230

我刚刚得到答案，添加一行：`resultIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);`

注意：如果您将其添加为`resultIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);` 它将不起作用。

我还尝试了其他标志，例如“FLAG_ACTIVITY_NEW_TASK”和“FLAG_ACTIVITY_RESET_TASK_IF_NEEDED”。在这里都不起作用。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-09-03T21:09:38.250

当一个活动被启动（当它第一次启动时）或重新启动（当它被带到堆栈的顶部时），`getIntent().getExtra()`不会放弃`null`。但是，当活动出现在*堆栈顶部时，*使用`PendingIntent`启动该活动不会重新启动活动（`onCreate()`不会被调用），而是`onResume()`会被调用。并将`getIntent().getExtra()`返回与启动活动的意图相关联的值（即`null`）。
*为了更新意图，请执行以下步骤：*

1）。在您的意图中设置`FLAG_ACTIVITY_SINGLE_TOP`和`FLAG_ACTIVITY_CLEAR_TOP`标记。

> `resultIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);`

2）。在调用`onNewIntent()`的活动中覆盖。`getIntent().getExtra()`此方法由`FLAG_ACTIVITY_SINGLE_TOP`

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    setIntent(intent);
} 
```

有关更多信息：[请参阅此文档](https://developer.android.com/reference/android/app/Activity#onNewIntent(android.content.Intent))

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-17T13:42:22.303

当我遇到同样的问题时，我正在使用 Unity 的本地通知插件 -> 我启动了应用程序，安排了本地通知，将应用程序发送到后台，出现本地通知，当我点击它时，应用程序恢复并且`getIntent().getExtras()`是`null`.

就我而言，问题是我试图以错误的意图获得额外的东西。尝试使用简单的 toString 打印意图，在创建时刻和获得它时，以确保收到的是您所期望的。

另请查看[onNewIntent](https://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent) "onNewIntent")方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-26T23:33:24.420

如果您使用***隐式意图***来构建 PendingIntent，您可能会遇到此问题。

以前的方法解决这个问题。

```
val intent = Intent()
intent.action = Intent.ACTION_VIEW
intent.data = Uri.parse("deeplink or applink here")
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_SINGLE_TOP)
intent.putExtra("key", Parcelable)
PendingIntent.getActivity(context, abs(Random.nextInt()), intent, PendingIntent.FLAG_UPDATE_CURRENT) 
```

基于隐式 Intent 尝试了上面列出的多种方法对我不起作用。

* * *

这是解决我的问题的方法。***将 Intent 从隐式更改为显式。***

```
// only diff
val intent = Intent(context, YourIntentDestinationActivity::class.java)
// only diff
intent.action = Intent.ACTION_VIEW
intent.data = Uri.parse("deeplink or applink here")
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_SINGLE_TOP)
intent.putExtra("key", Parcelable)
PendingIntent.getActivity(context, abs(Random.nextInt()), intent, PendingIntent.FLAG_UPDATE_CURRENT) 
```

希望这对你有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-15T20:47:01.883

对我来说，我的三星设备不断从意图中删除额外内容，有时甚至使应用程序崩溃。尝试了所有组合，但这种行为的实际原因不是明确地将`PendingIntent.FLAG_IMMUTABLE`标志添加到待处理的意图。

虽然，[这是 Android 12 及更高版本的要求](https://developer.android.com/guide/components/intents-filters#DeclareMutabilityPendingIntent)。

```
val pendingIntent = PendingIntent.getActivity(
                                this, 0,
                                getIntent(),
PendingIntent.FLAG_CANCEL_CURRENT or PendingIntent.FLAG_IMMUTABLE
                            ) 
```

# vb.net - 访问在选项卡内打开的表单的控件

> ID：13596423
> 
> 赞同：2
> 
> 时间：2012-11-28T01:42:33.157
> 
> 标签：vb.net, winforms, tabs

当我在选项卡中打开 Winform 控件时，我无法访问它。

我有Form1和Form2。Form1 有一个选项卡，我打开 form2 如下：

```
Dim ff As New Form2

ff.TopLevel = False
ff.FormBorderStyle = FormBorderStyle.None
ff.Width = TabControl1.TabPages(tabs).Width
TabControl1.TabPages(tabs).Controls.Add(ff) 
```

一切都很好，但我无法从 Form1 访问 Form2 控件。

我很感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:32:48.930

将表单添加到控件集合时，需要使表单可见：

```
TabControl1.TabPages(tabs).Controls.Add(ff)
ff.Visible = True 
```

由于您在 Form1 中有声明（大概），您可以直接访问控件集合：

```
For Each c As Control in ff.Controls
  ' do something with c
Next 
```

如果没有在表单级别声明“ff”，那么可以将name属性赋给表单，然后通过控件集合找到它：

```
Dim ff As New Form2
ff.Name = "ff" 
```

然后后来：

```
Dim ff As Form2
If TabControl1.TabPages(tabs).Controls.ContainsKey("ff") Then
  ff = TabControl1.TabPages(tabs).Controls("ff")
End If 
```

# java - 我如何在 JNI 中从 java 访问 DoubleBuffer[]

> ID：13596427
> 
> 赞同：0
> 
> 时间：2012-11-28T01:42:52.063
> 
> 标签：java, android, android-ndk, java-native-interface, buffer

这几乎就像二维数组。数组的每个槽都是一个 DoubleBuffer。

在我做单缓冲区之前，我在 JNI 中使用了这个：假设我的 JNI 方法采用 DoubleBuffer

```
double *dBuf = env->GetDirectBufferAddress(env, buf); 
```

然后只需使用 dBuf[i] => 进行索引，其中 i 是索引。假设我想传入一个 FloatBuffer 数组，我如何索引插槽并分配数据

我能说......么

```
double **dBuf = env->GetDirectBufferAddress(env, buf); ?? 
```

请帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:18:34.327

不，你不能。您必须像往常一样通过 JNI 获取 Java 数组的`GetObjectArrayElement(),`每个元素，然后`DoubleBuffer`使用其 API 访问每个元素。

# java - 将复选框组添加到 java 菜单

> ID：13596428
> 
> 赞同：1
> 
> 时间：2012-11-28T01:42:58.037
> 
> 标签：java, checkbox, awt, jmenu

我试图在我的菜单中添加一个复选框组，但不断收到“找不到符号”错误。

```
 MenuBar mb = new MenuBar();
    Menu file = new Menu("File");
    Menu colorM = new Menu("Color");
    MenuItem quitM = new MenuItem("Quit", new MenuShortcut(KeyEvent.VK_Q));
    CheckboxGroup cbg = new CheckboxGroup();
    Checkbox cb1 = new Checkbox("Black",cbg,true);
    Checkbox cb2 = new Checkbox("Red",cbg,false);
    Checkbox cb3 = new Checkbox("Blue",cbg,false);
    Checkbox cb4 = new Checkbox("Green",cbg,false); 
```

然后在我的初始化中我有

```
 chatF.setMenuBar(mb);
    mb.add(file);
    mb.add(colorM);
    file.add(quitM);
    colorM.add(cbg); 
```

我尝试添加一个 MenuItem 并将 cbg 放在那里，但同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:16:09.473

`CheckboxGroup`不是 a `Component`（或更具体地说，是 a `MenuItem`），因此您不能将其添加到菜单中。相反，您可以创建一个`CheckboxMenuItem`，但我认为`CheckboxGroup`仅适用于的实例，`Checkbox`因此您必须编写自己的代码来强制执行单选。

如果 Swing 是一个选项，您可以改用`JRadioButtonMenuItem`and `ButtonGroup`：

```
package com.example.checkboxmenu;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JRadioButtonMenuItem;

public class CheckboxMenu extends JFrame {

    public CheckboxMenu() {
        JMenuBar mb = new JMenuBar();
        JMenu file = new JMenu("File"); //$NON-NLS-1$
        JMenu colorM = new JMenu("Color");
        JMenuItem quitM = new JMenuItem("Quit", KeyEvent.VK_Q);

        JRadioButtonMenuItem cb1 = new JRadioButtonMenuItem("Black", true);
        JRadioButtonMenuItem cb2 = new JRadioButtonMenuItem("Red", true);
        JRadioButtonMenuItem cb3 = new JRadioButtonMenuItem("Blue", true);
        JRadioButtonMenuItem cb4 = new JRadioButtonMenuItem("Green", true);

        ButtonGroup group = new ButtonGroup();
        group.add(cb1);
        group.add(cb2);
        group.add(cb3);
        group.add(cb4);

        setJMenuBar(mb);
        mb.add(file);
        mb.add(colorM);
        file.add(quitM);
        colorM.add(cb1);
        colorM.add(cb2);
        colorM.add(cb3);
        colorM.add(cb4);

        quitM.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(400,300);
        setVisible(true);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        new CheckboxMenu();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:11:44.813

您不能将 a 添加`CheckboxGroup`到菜单...您只能添加`MenuItem`实例。您可以添加一个`CheckboxMenuItem`，但这也不明白`CheckboxGroup`。

因此，您需要将 s 更改`CheckBox`为`CheckboxMenuItem`s，将它们单独添加到菜单中，滚动您自己的`CheckboxMenuItemGroup`类并使用它将`CheckboxMenuItem`s 绑定在一起。

像下面这样的东西应该可以工作：

```
public class CheckboxMenuItemGroup implements ItemListener {

    private Set<CheckboxMenuItem>   items = new HashSet<CheckboxMenuItem>();

    public void add(CheckboxMenuItem cbmi) {
        cbmi.addItemListener(this);
        cbmi.setState(false);
        items.add(cbmi);
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            String itemAffected = (String) e.getItem();
            for (CheckboxMenuItem item : items) {
                // Use this line to allow user to toggle the selected item off
                if (!item.getLabel().equals(itemAffected)) item.setState(false);
                // Use this line to force one of the items to always be selected
                // item.setState(item.getLabel().equals(itemAffected));
            }
        }
    }

    public void selectItem(CheckboxMenuItem itemToSelect) {
        for (CheckboxMenuItem item : items) {
            item.setState(item == itemToSelect);
        }
    }

    public CheckboxMenuItem getSelectedItem() {
        for (CheckboxMenuItem item : items) {
            if (item.getState()) return item;
        }
        return null;
    }
} 
```

这应该有效，因为`ItemListener`s 在代码调用时不会被调用`item.setState()`，只有当用户单击菜单中的项目时才会调用。只需确保您仅通过`CheckboxMenuItemGroup.selectItem()`调用设置项目的状态，否则您最终可能会选择多个项目。

然后你只需要像这样构建你的菜单：

```
public static void main(String[] args) {

    final Frame f = new Frame("Test CheckboxMenuItemGroup");
    MenuBar mb = new MenuBar();
    Menu menu = new Menu("Menu");
    CheckboxMenuItem cb1 = new CheckboxMenuItem("Black");
    CheckboxMenuItem cb2 = new CheckboxMenuItem("Red");
    CheckboxMenuItem cb3 = new CheckboxMenuItem("Blue");
    CheckboxMenuItem cb4 = new CheckboxMenuItem("Green");

    CheckboxMenuItemGroup mig = new CheckboxMenuItemGroup();
    mig.add(cb1);
    mig.add(cb2);
    mig.add(cb3);
    mig.add(cb4);
    mig.selectItem(cb1);

    menu.add(cb1);
    menu.add(cb2);
    menu.add(cb3);
    menu.add(cb4);

    f.setMenuBar(mb);

    f.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent e) {
            System.exit(0);
        }
    });
    f.setSize(300, 200);
    f.setVisible(true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T01:43:12.503

使用 swing 代替 awt。

```
JMenuBar menuBar = new JMenuBar();
JMenu color = new JMenu("Color");

JCheckBoxMenuItem cb1 = new JCheckBoxMenuItem("Black");
JCheckBoxMenuItem cb2 = new JCheckBoxMenuItem("Red");
JCheckBoxMenuItem cb3 = new JCheckBoxMenuItem("Blue");
JCheckBoxMenuItem cb4 = new JCheckBoxMenuItem("Green");

ButtonGroup group = new ButtonGroup();
group.add(cb1);
group.add(cb2);
group.add(cb3);
group.add(cb4);

menuBar.add(cb1);
menuBar.add(cb2);
menuBar.add(cb3);
menuBar.add(cb4);

setJMenuBar(menuBar); // Set the JMenuBar of the JFrame 
```

您可以将任何[AbstractButton](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html)添加到[ButtonGroup](http://docs.oracle.com/javase/7/docs/api/javax/swing/ButtonGroup.html#add(javax.swing.AbstractButton))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T09:59:31.303

在 OSX Java 7 (1.7.0_40) 上，Julian 的回答不太有效，因为 ItemEvent 返回的对象实际上是一个字符串而不是 CheckBoxItem，这听起来像 OSX 中的一个错误，但通过修改 itemStateChanged 方法让它工作

```
import java.awt.*;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.HashSet;
import java.util.Set;

public class CheckboxMenuItemGroup implements ItemListener
{

    private Set<CheckboxMenuItem> items = new HashSet<CheckboxMenuItem>();

    public void add(CheckboxMenuItem cbmi) {
        cbmi.addItemListener(this);
        cbmi.setState(false);
        items.add(cbmi);
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {

            String itemAffected = (String)e.getItem();
            for (CheckboxMenuItem item : items) {
                if (item.getLabel() != itemAffected) item.setState(false);
            }
        }
    }

    public void selectItem(CheckboxMenuItem itemToSelect) {
        for (CheckboxMenuItem item : items) {
            item.setState(item == itemToSelect);
        }
    }

    public CheckboxMenuItem getSelectedItem() {
        for (CheckboxMenuItem item : items) {
            if (item.getState()) return item;
        }
        return null;
    }
} 
```

# python - 为什么我不能添加 .append 到 python 集？

> ID：13596430
> 
> 赞同：7
> 
> 时间：2012-11-28T01:43:52.717
> 
> 标签：python, set

为什么我可以将普通的可调用对象和方法添加到集合中，但不能`<some list>.append`（例如）？

例如：

```
>>> l = []
>>> s = set()
>>> s.add(l.append)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list'
>>> type(l.append)
<type 'builtin_function_or_method'>
>>> type(map)
<type 'builtin_function_or_method'>
>>> s.add(map)
>>> def func(): print 'func'
... 
>>> s.add(func)
>>> print s
set([<built-in function map>, <function func at 0x10a659758>]) 
```

编辑：我注意到这`l.append.__hash__()`也给出了这个错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T01:48:31.010

您不能将`list`s 添加到集合中，因为列表是可变的。只有不可变的对象可以添加到集合中。

`l.append`是一个实例方法。你可以把它想象成元组`(l, list.append)`——也就是说，它是绑定到特定列表的 list.append() 方法`l`。list.append() 方法是不可变的，但`l`不是。因此，虽然您可以添加`list.append`到集合中，但您无法添加`l.append`.

这有效：

```
>>> s.add(list.append) 
```

这不起作用：

```
>>> s.add((l, list.append))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T01:45:48.953

您没有尝试添加`list.append`. 您正在尝试添加`l.append`哪个是实例方法，而不是类方法。 `list`实例不可散列，显然它们的方法也不可散列。

这样想吧。您有 2 个列表：

```
lfoo = []
lbar = [] 
```

现在您想将它们各自的附加添加到您的集合中：

```
s = set()
s.add(lfoo.append)
s.add(lbar.append) 
```

现在，当您对集合进行哈希查找时，不能只依赖实例方法的函数部分。确实，`lfoo`并`lbar`最终使用相同的功能（`list.append`）。所以这不是一个唯一的哈希。使其独一无二的方法是将其附加到实例上。但是，该实例不支持散列，因此该集合无法分辨`lfoo.append`和之间的区别`lbar.append`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T01:46:55.273

在 Python 中，`list`对象是不可散列的。我怀疑当你散列一个实例方法时，它包含了它绑定到的实例的散列。这样，您将获得`TypeError`.

# javascript - 使用 JavaScript 的 ActiveX DLL

> ID：13596438
> 
> 赞同：1
> 
> 时间：2012-11-28T01:45:06.420
> 
> 标签：javascript, activex

我想访问在 VB6 中创建的 Activex DLL 上的方法和属性

只是一些背景知识... VB6 DLL 的项目名称为 PDFViewer，我有一个类 clsPDFViewer。在类中有我希望使用的方法和属性。

我在 IE9 中使用 javascript。

基本上在javascript中我已经引用了该对象

尝试了两种方法

var PDFViewer = new ActiveXObject("PDFViewer"); var PDFViewer = document.getElementById("PDFViewer");

一个错误不断发生，说即使我克服了这个错误，它也无法创建 ActiveX..

当我尝试这样的事情时

警报（PDFViewer.Page）；

然后另一个错误是属性或方法不存在有人可以帮忙吗

我是javascript新手..请耐心等待它令人沮丧的是，当我尝试一种方式时由于一个原因不起作用，然后当我尝试另一种方式时由于其他原因而不起作用grrrrrrr ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:05:06.247

This is due to security restrictions in IE. The minimum dependency is that the DLL is registered on the client. (The VB6 IDE will do this if compiling on the same machine as testing, otherwise use the Rgsvr32 command to install the DLL on the client.)

Then you can either add the URL/domain hosting your page attempting to use the DLL to IE's "Trusted Sites" zone and/or you can enable ActiveX scripting for other internet zones. (Although the latter will leave your browser in an unsafe state and constantly annoy you with messages about such!)

# ruby-on-rails - 复杂的 ActiveRecord 查询 - 在哈希中搜索

> ID：13596441
> 
> 赞同：0
> 
> 时间：2012-11-28T01:45:24.477
> 
> 标签：ruby-on-rails, activerecord

三个表，用于分布式图书馆系统：

```
Class Book       # model: id, name, auhtor
  has_many :book_belongs
  has_many :owners, through: :book_belongs, source: :user

Class User       # model: id, name, email, facebook_uid, facebook_friends
  has_many :book_belongs
  has_many :ownedbooks, through: :book_belongs, source: :book

Class BookBelong # model: user_id, book_id
  belongs_to :user
  belongs_to :book 
```

@user.facebookfriends 是一个（序列化）散列，包含用户 facebook 朋友的 facebook_id 和 facebook_name

我在设计 ruby​​/rails activerecord 查询时遇到问题：

*   返回 facebook 好友拥有的书籍。

在“英语”中，查询应该查看图书所有者 facebook_id 并匹配用户 facebook_friends 哈希。

*   有没有更好的方法来设计表/数据模型以使其更简单且计算成本更低？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:07:09.457

好的 - 解决了，使用

```
BookBelong.joins(:book).joins(:user).where('users.uid' => current_user.friends.keys) 
```

并使用简单的方法在视图中获取实际的书籍

```
 <% @friends_books.each do |book| %>
    <td><%= book.book.name %></td> 
```

不过，似乎效率不高。

# c# - appfabric VM 问题：服务器已拒绝客户端凭据

> ID：13596442
> 
> 赞同：0
> 
> 时间：2012-11-28T01:45:30.527
> 
> 标签：c#, .net, vmware, virtualization, appfabric-cache

> **可能重复：**
> [AppFabric 客户端虚拟机问题](https://stackoverflow.com/questions/13574306/appfabric-client-virtual-machine-issue)

我可以成功地从我的开发机器连接到应用结构缓存集群服务器。但是，当我尝试通过 VMWare VM 托管的 .net 应用程序进行操作时，出现以下错误：

**System.ServiceModel.Security.SecurityNegotiationException：服务器已拒绝客户端凭据。---> System.Security.Authentication.InvalidCredential 异常：服务器已拒绝客户端凭据**

请帮忙。

我的代码和配置文件如下：

```
 try
    {

        var cacheFactory = new DataCacheFactory();
        var cache = cacheFactory.GetCache("default");
        var key = "CachedObjectKey";
        var obj = cache[key];
        if (obj == null)
        {
            obj = "here is a string to cache";
            cache.Add(key, obj);
            Console.WriteLine("object was not in cache");
        }

        obj = cache.Get(key);

        Console.WriteLine(obj.ToString());
    }
    catch (Exception ex)
    {
        if (ex.InnerException != null)
        {
            Console.WriteLine(ex.InnerException.ToString());
        }
        else
        {
            Console.WriteLine(ex.ToString());
        }
    }
    Console.ReadLine(); 
```

配置文件如下：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="dataCacheClient" type="Microsoft.ApplicationServer.Caching.DataCacheClientSection, Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" allowLocation="true" allowDefinition="Everywhere"/>
  </configSections>

  <!-- add comments about adding machines..-->
  <dataCacheClient>
    <!--<localCache isEnabled="true" />-->
    <localCache
    isEnabled="true"
    sync="NotificationBased"
    objectCount="10000"
    ttlValue="60" />
    <hosts>
      <host name="mycacheclusterservermachinename" cachePort="22233"/>

    </hosts>
  </dataCacheClient>

  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:06:28.173

**服务器已拒绝客户端凭据。**

将 VM 添加到与我的开发机器相同的域后，此问题已得到解决。

# asp.net-mvc-3 - MVC 3 中以下代码的快捷方式 LINQ 实体查询

> ID：13596444
> 
> 赞同：1
> 
> 时间：2012-11-28T01:45:40.120
> 
> 标签：asp.net-mvc-3, linq, entity-framework

![实体的数据库模型](../Images/1e87d080f10a8a6b87b06ec67e9691f1.png)

我有间接连接的实体。在这里，**Task**间接连接到**Sprint 。**一个**BacklogItem**可以有多个**Task**，每个**BacklogItem**属于一个**Sprint**。因此，在我的应用程序中，我需要属于某个 sprint 的所有任务。由于它们不直接连接，因此我不得不编写许多代码行，如下所示：

```
public viewResult tasksForSprint(int sprintId){
List<Task> tasksforSprint = new List<Task>();

var backlogItemlsit = db.BacklogItems.Where(b => b.sprintId == sprintId).OrderBy(i => i.backlogId).ToList();
var sprintTaskItems = db.Tasks.OrderBy(i => i.taskId).ToList();
foreach (var item in sprintTaskItems)
{
            if (backlogItemlsit.Any(b => b.backlogId == item.backlogId))
                taskforSprint.Add(item);
}
return view(tasksforSprint);
} 
```

现在，我想要的是使用一个 LINQ 查询而不是 6 行代码来获取 List tasksforSprint。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:03:15.017

好像是联动。未经测试：

```
db.BacklogItems
    .Where(b => b.sprintId == sprintId)
    .Join(db.Tasks, 

        // outer join key
        sprint => sprint.backlogId, 

        // inner join key
        task => task.backlogId,

        // result selector -- take the tasks
        (outer, inner) => inner)
.OrderBy(task => task.taskId)    
.ToList(); 
```

# css - css3 从动画到正常状态的过渡

> ID：13596446
> 
> 赞同：5
> 
> 时间：2012-11-28T01:45:53.100
> 
> 标签：css, css-transitions, css-animations

我有一个相当基本的“颜色脉冲”动画，当您将鼠标悬停在某物上时，它会从白色变为蓝色。除了一件事之外，这很好用——当我移开鼠标时，它会立即恢复为白色。我试图弄清楚如何让它变回白色，但到目前为止还没有运气。

手写笔代码：

```
@-webkit-keyframes pulse
    0%
        background #FFF
    50%
        background #88B1DA
    100%
        background #FFF

.scaffolding
    background    #FFF
    transition    background 0.5s linear

    &:hover
        animation pulse 2s linear infinite; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:03:21.703

## 在悬停时也使用过渡

您需要将 a`transition`与悬停结合起来`animation`。[请参阅小提琴（在 webkit 浏览器中）](http://jsfiddle.net/JDVDe/10/)。为了让它变`background`回`#fff`它必须首先将它从那个更改为脉冲颜色`#88B1DA`，因为该`transition`属性不会触发`animation`元素的状态。通过将 设置为周期时间的`transition`一半`animation`，无论我`hover`从哪一点退出状态，它似乎对我来说都很顺利。

```
@-webkit-keyframes pulse {
    0% { background: #FFF;}
    50% { background: #88B1DA;}
    100% { background: #FFF;}
}

.scaffolding {
    background:    #FFF;
    -webkit-transition: background 1s linear;
}
.scaffolding:hover {
    background:    #88B1DA;
    -webkit-transition: background 1s linear;
    -webkit-animation: pulse 2s linear infinite;
} 
```

​</p>

# ruby-on-rails - 使用 link_to 为分层模型创建链接

> ID：13596448
> 
> 赞同：2
> 
> 时间：2012-11-28T01:46:04.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, link-to

好的，所以我是 Rails 的新手，正在使用该框架创建一个项目管理系统。对于我的几个模型、视图和控制器，我使用了脚手架并且没有任何问题。对于其他部分，我自己编写了所有部分。

因此，作为我项目的概述，从根本上讲，您可以拥有许多项目。在所有这些项目中，您可以创建多个待办事项列表。在每个待办事项列表中，您可以有多个任务。这就是我在标题中所说的“分层”的意思。

我刚刚创建了我的列表页面，当我直接在浏览器中访问 URL（例如：）时`http://localhost:3000/projects/3/lists/20/tasks/1`，任务会正确显示。但是，我不知道如何格式化我的待办事项列表视图之一中的链接（任务通常显示在待办事项列表下方，但现在我希望它们显示在自己的视图中）。

这是我目前拥有的代码：

```
<%= link_to "#{task.description}", project_list_tasks_url(@list.id,task.id) %> 
```

我知道这`link_to "#{task.description}"`是正确的，因为我尝试将它与静态 URL（谷歌或其他东西）一起使用，但这`project_list_tasks_url(@list.id,task.id)`是我遇到问题的地方。

有人可以帮帮我吗？我可以从我的待办事项列表或任务控制器和视图中提供尽可能多的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:57:38.313

一些技巧可以帮助减少路由的混乱。习惯了可能有点令人不安。

**路由规则 #1**

始终检查输出`rake routes`以确定如何调用各种路由方法。您可能*认为*通过查看您的路线将如何发挥作用，但直到您查看已编译的路线表时`routes.rb`您才会*知道。*

在您的情况下，您期望使用以下格式的路线：

```
/projects/:project_id/lists/:list_id/tasks/:id 
```

一定是这样。如果是，您的调用应如下所示：

```
project_list_task_path(@project, @list, task) 
```

请注意，这里的参数是`:project_id`,`:list_id`和`:id`，因此在这种情况下所有三个都是必需的。路径规范中括号中的任何内容都可以忽略，就像`:format`通常一样。

**路由规则 #2**

`_path`除非您严格要求完整的 URL，否则请使用这些方法。它们更短，输出更容易阅读和调试。如果您没有正确区分`www.mysite.com`和 ，它们也不会无意中在浏览器中翻转 URL 并导致会话问题`site.com`。

**路由规则#3**

不要忘记将它提供给路由路径方法之间和何时提供*巨大*差异。`@project``@project.id`

The router will always call the `to_param` method if it's available and this can be over-ridden in your model to produce pretty or friendly URLs. `id` is for your database and your database alone. `to_param` is for routing but you shouldn't be calling it manually unless you're doing something exceptionally irregular.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:54:25.197

您通常不应将资源嵌套[超过一层 deep](http://weblog.jamisbuck.org/2007/2/5/nesting-resources)，但抛开这一点，`link_to`格式应该是：

```
link_to task.description, project_list_task_path(@project, @list, task) 
```

ie`project_link_tasks_url`应该是`project_link_task_url`，并且您必须将 the`@project`作为第一个参数传递（我假设您的项目名为`@project`）。我已经切换`_url`到，`_path`所以您可以将对象本身作为参数而不是它们的 id 传递。

有关详细信息，请参阅有关[从对象创建路径和 URL 的文档](http://guides.rubyonrails.org/routing.html#nested-resources#creating-paths-and-urls-from-objects)。

# mysql - 我需要帮助从我的数据库中导出一个 sql 文件

> ID：13596449
> 
> 赞同：1
> 
> 时间：2012-11-28T01:46:09.837
> 
> 标签：mysql, mysqldump, mysql-workbench

美好的一天，我目前是使用数据库的新手。我下载了一个名为 MySql Worckbench 5.2 CE 的应用程序，因为我看到它有一种创建和访问数据库的简单方法。我现在正在导出 .sql。每当我转到如下所示的导出选项卡时：

![在此处输入图像描述](../Images/7b1c09f1fe7468b8c9c0c4812c8d1e79.png)

在我点击开始导出后，它给了我这个错误：

![在此处输入图像描述](../Images/563a4001afa2b6a1b5b3d562ac82d32d.png)

我不确定是什么错误，因为我不熟悉 MySql 转储.. 有没有办法解决这个问题？或使用其他方式。我也不熟悉在 cmd (Windows) 中使用 mysql，但如果有任何建议或步骤我可以遵循，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:51:25.277

我推荐使用 PhpMyAdmin [http://www.phpmyadmin.net/home_page/index.php](http://www.phpmyadmin.net/home_page/index.php)

还是导航？（不是免费的）

或者您可以使用 Mac 版 Sequel Pro（免费）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:53:47.917

**MySQL Workbench**的伟大而简单的教程。

[http://blancer.com/tutorials/25445/visual-database-creation-with-mysql-workbench/](http://blancer.com/tutorials/25445/visual-database-creation-with-mysql-workbench/)

查看该`Generating SQL`部分。

仍然面临问题。↓↓↓</p>

尝试在默认的 Windows 目录上安装 MySQL Workbench。

# email - 使用 url 公开电子邮件

> ID：13596452
> 
> 赞同：0
> 
> 时间：2012-11-28T01:46:26.053
> 
> 标签：email, sendgrid, mailgun, mailjet

这可能不是电子邮件集成问题，但我想使用互联网上可用的各种软件或使用 API 对其进行编程来获得解决方案。

任务：我使用 php/.net 代码向人们发送货币交易确认电子邮件，并将其抄送给我自己。需要将电子邮件显示给无权访问电子邮件帐户的人。

是否可以自动执行以下任何操作：

1.  以任何方式显示从 code/gmail/mailchimp/mandril/zapier/sendgrid 发送的电子邮件作为 url
2.  任何已经可用的服务，从 gmail/mailchimp/mandril/zapier/sendgrid 等获取电子邮件的屏幕截图，并使用 ftp 详细信息在公共 url 上发布
3.  以编程方式截取从 code/gmail/mailchimp/mandril/zapier/sendgrid 发送的电子邮件的屏幕截图，并使用 ftp 详细信息在公共 url 上发布
4.  公开使用 code/gmail/mailchimp/mandril/zapier/sendgrid 发送的任何电子邮件的任何其他方式

# python - Torrent Tracker 信息哈希 GET 请求 - Python

> ID：13596453
> 
> 赞同：2
> 
> 时间：2012-11-28T01:46:38.670
> 
> 标签：python, http, urlencode, bittorrent, tracker

我正在尝试连接到一个 torrent 跟踪器以接收一个同伴列表来播放比特 torrent，但是我在形成正确的 GET 请求时遇到了麻烦。

据我了解，我必须从 .torrent 文件中获取经过编码的“信息”部分的 20 字节 SHA1 哈希。我使用以下代码：

```
h = hashlib.new('sha1')
h.update(bencode.bencode(meta_dict['info']))
info_hash =  h.digest() 
```

这就是我卡住的地方。我不知道如何创建正确的 url 编码 info_hash 以作为参数粘贴到 URL 字符串中。

我相信它涉及 urllib.urlencode 和 urllib.quote 的某种组合，但是我的尝试到目前为止还没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-03T14:15:33.593

好吧有点晚了，但可能会对某人有所帮助。

使用模块`requests`自己对 url 进行编码。首先，您需要使用参数（info_hash、peer_id 等）创建一个字典。然后你只需要做一个获取请求

```
response = requests.get(tracker_url, params=params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:52:15.537

我认为这`urllib.quote_plus()`就是你所需要的。

# java - 拆分正则表达式以提取连续字符的字符串

> ID：13596454
> 
> 赞同：23
> 
> 时间：2012-11-28T01:46:41.877
> 
> 标签：java, regex, split, contiguous

是否有一个正则表达式可以将[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)字符串分解为连续的字符 - 即拆分下一个字符与前一个字符不同的位置？

这是测试用例：

```
String regex = "your answer here";
String[] parts = "aaabbcddeee".split(regex);
System.out.println(Arrays.toString(parts)); 
```

预期输出：

```
[aaa, bb, c, dd, eee] 
```

尽管测试用例只有字母作为输入，但这只是为了清楚起见；输入字符可以是*任何*字符。

* * *

请不要提供涉及循环或其他技术的“解决方法”。

问题是为如上所示的代码找到正确的正则表达式 - 即只使用`split()`而不调用其他方法。这不是寻找能够“完成工作”的代码的问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-28T02:17:20.147

完全可以编写正则表达式以一步进行拆分：

```
"(?<=(.))(?!\\1)" 
```

由于您想在每组相同的字符之间进行拆分，因此我们只需要寻找 2 组之间的边界。我通过使用积极的后视来获取前一个字符来实现这一点，并使用消极的前瞻和后向引用来检查下一个字符是否不是同一个字符。

如您所见，正则表达式是零宽度的（只有 2 个环顾断言）。正则表达式不消耗任何字符。

# c++ - 使用尾递归查找数组的最小元素

> ID：13596455
> 
> 赞同：4
> 
> 时间：2012-11-28T01:46:48.480
> 
> 标签：c++, algorithm

`a`给定一个大小为 的整数数组，`n`用原型编写一个尾递归函数

```
int f(int a[], int n); 
```

找到数组的最小元素。

* * *

这是我想出的最好的：

```
int f(int a[], int n)
{
   static int *min;

   if (min == 0)
      min = new int(a[n - 1]);
   else if (*min > a[n - 1])
      *min = a[n - 1];

   if (n == 1)
      return *min;
   else
      return f(a, n - 1);
} 
```

能好起来吗？我不喜欢使用静态变量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T01:53:20.023

```
int f(int a[], int n)
{
    if (n == 1)
        return a[0];
    n--;
    return f(a + (a[0] > a[n]), n);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T02:22:50.650

kmkaplan 的解决方案很棒，我支持他。这本来是我不那么棒的解决方案：

```
int f(int a[], int n)
{
    if(n == 1)
        return a[0];

    n--;

    if(a[0] > a[n])
        a[0] = a[n];

    return f(a, n);
} 
```

在任何给定时间，数组的最小元素都存储在 a[0] 中。我最初包含了一个非修改版本，但后来我想到它*不是*尾递归的。

# image - 在 JSF 中以表格格式显示图像列表

> ID：13596456
> 
> 赞同：2
> 
> 时间：2012-11-28T01:46:48.547
> 
> 标签：image, jsf, repeat

这可能是一个非常简单的 JSF 问题，但我似乎找不到简单的答案。

我有一个图像列表，我想在图像表中显示它们。每个图像都以其文件名显示。我正在使用`ui:repeat`如下所示的标签。我没有按要求获得 5 列，但是只有 1 列。

```
<h:panelGrid id="resourcePanel" columns="5" rules="all">
    <ui:repeat var="res" value="#{resourceUpload.resources}">
        <h:panelGrid columns="1" rules="none">
                <h:graphicImage
                    value="/image/resource?id=#{res.idAsString}"
                    style="width:100px;" />
                <h:outputText value="#{res.name}" />
        </h:panelGrid>
    </ui:repeat>
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:54:21.120

为什么你`<h:panelGrid>`在里面使用另一个`<ui:repeat>`？你可以像这样使用 div 。
代替

```
<h:panelGrid columns="1" rules="none"> 
```

采用

```
<div style="display:inline-block;"> 
```

编辑：

* * *

我不认为你可以做到这一点`<ui:repeat>`。改为使用`<c:forEach>`。

首先你应该导入命名空间

```
xmlns:c="http://java.sun.com/jstl/core" 
```

现在`<ui:repeat>`用`<c:forEach>`这样的替换。

```
<c:forEach items="#{accountMastList.resultList}" var="res"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:41:28.080

输出完全符合预期和指定。这`<ui:repeat>`是一个渲染时间标签，而不是像`<c:forEach>`. 构建视图后，`<h:panelGrid>`最终得到 1 个子组件（*本身*`<ui:repeat>`），而不是像使用.*`<h:panelGrid>``<c:forEach>`*

 *```
<html ... xmlns:c="http://java.sun.com/jsp/jstl/core">
...
<h:panelGrid id="resourcePanel" columns="5" rules="all">
    <c:forEach var="res" items="#{resourceUpload.resources}">
        <h:panelGrid columns="1" rules="none">
            <h:graphicImage
                value="/image/resource?id=#{res.idAsString}"
                style="width:100px;" />
            <h:outputText value="#{res.name}" />
        </h:panelGrid>
    </c:forEach>
</h:panelGrid> 
```

*（这在早于 2.1.18 的 Mojarra 版本中具有以下含义`#{resourceUpload}`：它不能是视图范围的 bean，由于视图状态保存/恢复中的鸡蛋问题，它必须是请求范围的；你需要升级到 Mojarra 2.1.18)*

顺便说一句，您的嵌套`<h:panelGrid>`毫无意义。我会在`<h:panelGroup>`这里使用。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)- 更好地理解“查看构建时间”与“查看渲染时间”
*   [在 JSF 中动态创建表列](https://stackoverflow.com/questions/11280688/create-table-columns-dynamically-in-jsf)- 另一个类似的问题*

# excel-2010 - 如何在给定范围内生成随机数（或单元格）？Witout两次使用相同的结果？

> ID：13596463
> 
> 赞同：0
> 
> 时间：2012-11-28T01:47:30.043
> 
> 标签：excel-2010, random-access

我正在尝试从特定范围生成一个随机单元格：

我需要每个单元格行从特定列（范围）生成随机选择

下面是我的设置和失败尝试的图片：

![在此处输入图像描述](../Images/fea66c5ce94c1b683e459eed7b16d0dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:57:25.610

你可以这样做：

1.  使用 . 在您的数据集旁边添加一个随机数`=RAND()`。我用过 column `B`，但你可以把它放在任何你喜欢的地方。
2.  将此公式添加到单元格`C2`中`H2`

    ```
    =INDEX($A$2:$A$21,RANK.EQ(INDEX($B$2:$B$21,COLUMN()-2),$B$2:$B$21)) 
    ```

这个怎么运作：

*   `RAND()`返回范围内的随机数`[0..1)` 这用作数据的随机排序顺序
*   分解公式：
    *   `COLUMN()-2``1..6`返回列`C`的序号`H`
    *   `INDEX($B$2:$B$21, ... )`从随机数列表中返回`1st`要数`6th`
    *   `RANK.EQ( ... ,$B$2:$B$21)`返回随机数在排序后的随机数列表中的位置，`1..20`。
    *   `=INDEX($A$2:$A$21, ... )`根据上面的随机排名从您的数据集中返回一个项目。

注意：每次 Excel 重新计算时，这将返回一个新的随机样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:58:33.347

进行不重复的随机选择的唯一方法是制作一个整数数组，然后将其随机化，然后一个一个取出。

例如，您从以下开始：

1 2 3 4 5 6 7

你随机化它（随机交换元素）

2 4 5 1 7 3 6

比你一个一个地取出元素。（保留您在某个单元格中使用了多少元素的索引）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:08:29.280

![随机把戏](../Images/688f509b2f213bdf9be500fdb783b096.png)

好的，这是一个技巧，添加另一列随机数，而不是同时选择随机列和范围列并单击排序按钮（图片来自 libreoffice，但 excel 中有一个类似的按钮）这将随机化您的范围列。比你简单地为“w-1”赋值：“w-6”像这样=B2，=B3，=B4，=B5，=B6，=B7

我试过这个，它就像你想要的那样工作，唯一的问题是它会在你的范围列中随机排列值。

# javascript - 使用 Google Earth API 捕捉相机视图

> ID：13596464
> 
> 赞同：2
> 
> 时间：2012-11-28T01:47:33.537
> 
> 标签：javascript, screenshot, google-earth-plugin

是否可以从 Google Earth API 以编程方式捕获相机视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:53:34.450

您可以使用*copyAsLookAt()*函数返回相机正在观看的纬度和经度等。在下面的示例中，返回的值被传递给新的*lookAt*对象：

```
var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND); 
```

同样，视图可以作为 Camera 值返回：

```
var camera = ge.getView().copyAsCamera(ge.ALTITUDE_RELATIVE_TO_GROUND); 
```

经验法则是，如果视图方向与行星相交，那么您只需要*LookAt*方向。如果视图方向高于地平线，那么您需要一个相机视图。

来源：[https ://developers.google.com/earth/documentation/camera_control#current_view](https://developers.google.com/earth/documentation/camera_control#current_view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:10:45.117

您是否尝试过“ScreenGrab”功能？

```
bmp = geWebBrowser1.ScreenGrab(); 
```

# rally - WSAPI：查找故事的根父级

> ID：13596467
> 
> 赞同：2
> 
> 时间：2012-11-28T01:48:12.993
> 
> 标签：rally

我有一个返回多个故事的 WSAPI 查询。对于这些故事中的每一个，我都想检查“根”父级。所以我进行查询，并在“获取”字段中请求“父”。

但是，这只给了我直接的父母。如果父母有父母，那似乎不会被退回。相比之下，如果我要求一个故事的孩子，我可以下很多层次。

WSAPI 有没有办法对用户故事进行一次查询，以便我可以访问每个用户故事的根父级？事实上，有时父项是功能级别的投资组合项目，因此理想情况下也需要包括在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:01:57.797

在 WSAPI 请求中一次只能遍历层次结构的一个级别。您必须继续加载每个父级，直到到达顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:13:26.533

看看这个答案：

[Lookback API：查找已知父节点下的所有叶节点故事](https://stackoverflow.com/questions/10725244/lookback-api-find-all-leaf-node-stories-under-a-known-parent)

Lookback API 使得通过单个查询获取父/子对象的整个层次结构成为可能。LBAPI 目前为部分 Rally 订阅提供有限的公共预览版，但目标是尽快提供完整的公共预览版。

# jquery - 表格上的 jQuery html 没有可用的源

> ID：13596471
> 
> 赞同：0
> 
> 时间：2012-11-28T01:48:37.907
> 
> 标签：jquery, response

我不知道我是在叫错树还是我只是一个旋钮......

我正在做一个 ajax 调用，成功后，我用 .html 返回的响应替换了我的表。（我也尝试过使用 .replaceWith(response) 但这也不起作用）

这部分工作正常，我的表格项正在返回并填充表格......但是，当我查看浏览器源代码时，我的源代码中没有任何内容......我假设这与 jQuery 的方式有关退货...

但是问题是我想为选定的 a.delete 获取“Id”属性，但我无法获得任何值。

这是我的代码的细分......我已经简化了字段以占用更少的空间

我的观点：

```
<tr>
        @using (Html.BeginForm("AddSample", "SPR", FormMethod.Post))
        { 
            <th>
            </th>

            <th>@Html.TextBox("CustomerSampleId", null, new { style = "width: 80px" })
            </th>
            <th>@Html.TextBox("CustomerSampleId2", null, new { style = "width: 80px" })
            </th>
            <th>@Html.TextBox("CustomerSampleId3", null, new { style = "width: 80px" })
            </th>                 
        }
        <th>
            <button class="button saveSampleButton" id="saveSampleButton">
                Add Sample</button>
        </th>
    </tr>
</thead>
<tbody>
</tbody> 
```

我的部分：

```
@for (int i = 0; i < Model.Count(); i++) 
```

{ 变数 = i + 1;

```
<tr>
    <td>@number
    </td>
    <td>
        <a href="#" id="@Model.ElementAt(i).Id" class="delete">
            <img src="/images/delete.png" /></a>

        @Model.ElementAt(i).CustomerSampleId
    </td>
    <td>@Model.ElementAt(i).CustomerSampleId2
    </td>
    <td>@Model.ElementAt(i).CustomerSampleId3
    </td>
</tr> 
```

}

进行保存的 jQuery

```
$("#saveSampleButton").click(function () {

        //validate fields

        if (fieldsValid) {

            $.ajax({
                url: "/SPR/AddSample",
                type: "POST",
                data: { data: data
                },
                success: function (pId) {
                    GetSamples(pId);

                },
                error: function () {
                    alert("Something went wrong : Were all the necessary fields filled in?");
                }
            });
            return false;
        }
    });

  function GetSamples(pId) {
        $.ajax({
            url: "/SPR/GetSamples",
            type: "POST",
            data: { Id: pId },
            success: function (response) {
                $("#Samples tbody").html(response);
            }
        });
    } 
```

当我添加了一些样本并查看我的浏览器源时，这就是我得到的：

```
<tr>
  <form action="/SPR/AddSample" method="post">                <th>
            </th>
            <th><input id="CustomerSampleId" name="CustomerSampleId" style="width: 80px" type="text" value="" />
            </th>
            <th><input id="CustomerSampleId2" name="CustomerSampleId2" style="width: 80px" type="text" value="" />
            </th>
            <th><input id="CustomerSampleId3" name="CustomerSampleId3" style="width: 80px" type="text" value="" />
            </th>                

               </form>            <th>
              <button class="button saveSampleButton" id="saveSampleButton">Add Sample</button>
        </th>
    </tr>
</thead>
<tbody>
</tbody> 
```

有没有人能够阐明发生了什么以及为什么我无法访问 a.delete 链接的 ID？

# android - 强制在 Android Chrome 上打开 .vcf 的 web.config 规则

> ID：13596477
> 
> 赞同：2
> 
> 时间：2012-11-28T01:49:25.453
> 
> 标签：android, google-chrome, web-config, vcf-vcard

通过其他帖子，我的 web.config 文件被修改为让大多数设备打开 .vcf 文件，但我的 Android (S3) 手机上的 Chrome 会显示它。

我使用 vcard 2.1 并运行 IIS 7.5。这是[链接。](https://www.overair.ca/bc/ethan.vcf)

我试图摆弄：**value="attachment; filename=(*.vcf)"** 但没有运气。

以下是出站规则：

```
<rule name="Allow vcards to be downloaded" preCondition="Only match vcards">
    <match serverVariable="RESPONSE_Content_Disposition" pattern="(.*)" negate="false" />
    <action type="Rewrite" value="attachment, filename=(*.vcf)" replace="true" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="^text/x-vcard" />
    </conditions>
</rule>

<preConditions>
     <preCondition name="Only match vcards">
         <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/x-vcard$" />
     </preCondition>
</preConditions> 
```

预先感谢您的帮助！

# jenkins - Jenkins 通过或失败构建外部可执行文件

> ID：13596479
> 
> 赞同：1
> 
> 时间：2012-11-28T01:49:38.487
> 
> 标签：jenkins, hudson, exe, jenkins-plugins

作为构建过程的一部分，我编写了一个 EXE，它将数据库更改推送到暂存数据库。

这个过程有时会遇到错误，如果是这样，我希望构建失败。如何将 EXE 添加为构建步骤，以便在失败时（我可以将其捕获为异常）使构建失败并记录一些详细信息（类似于 NUUnit 显示失败的方式）？

我还希望 exe 记录一些其他详细信息（例如更改的内容 - 构建是通过还是失败）。有没有关于我如何做到这一点的文档？

我正在使用 MSBuild，并且我可以完全控制 EXE（我编写了它）。我可以对其进行编码以输出我想要的内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:40:46.540

您在主要构建步骤中使用什么？马文特？蚂蚁？自定义脚本？有很多方法可以做到这一点，这在很大程度上取决于您的 .exe 设计方式，您没有在 OP 中解释。

最简单的方法是从下拉列表中添加另一个**构建步骤。**选择**执行 Windows 批处理命令**。在那里，编写批处理命令来启动 .exe 并捕获返回码：

```
C:\Location_of_exe\your.exe
IF NOT "%ERRORLEVEL%" == "0" (
    ECHO "Your exe failed"
    EXIT /B 1
) ELSE (
    ECHO "Your exe passed"
) 
```

如果你的 .exe 像普通程序一样工作，它会在成功时返回退出代码 0，否则它将返回一个非零退出代码。上面的语句查找非零退出代码（表示某种失败），如果检测到将退出批处理并返回错误代码 1 本身`EXIT /B 1`。这反过来将向 Jenkins 指示构建步骤失败，并将标记作业失败。

再一次，这在很大程度上取决于您的 .exe 是否正确并在失败时返回非零退出代码。

至于“我还希望 exe 记录一些其他详细信息”，再次完全取决于您的 .exe

*   它是否针对不同的失败返回不同的退出代码？- 如果是这样，可以轻松修改上面的代码以捕获所有可能性并相应地在日志中显示错误

*   它是在控制台中显示不同错误的命令行 .exe 吗？如果是这样，那么从批处理中调用它会自动在 Jenkins 日志中显示错误。如果您的 .exe 未返回正确的退出代码，您也可以使用此方法。您可以捕获命令行输出并用于`findstr`在那里搜索特定的输出行以确定成功或失败

*   如果您的 .exe 是一个 GUI 应用程序，并且没有生成正确的退出代码，那么您无法判断它是成功还是失败（以及失败的原因）

如果您确定它是哪一个，我将更新此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:43:10.903

这是我能想到的一个快速的：

1.  将构建过程分成 2 个工作 - **A.** Upto Exe。**B.**发布 Exe
2.  在作业A中，`Add post build step`运行作业B（无论A是否成功）
3.  在 B 的配置中，编写脚本以使用 Jenkins 环境变量捕获输出。查看`<yourjenkinsurl>/env-vars.html/`

但它真的是一个`Exe`可执行文件还是其他一些可执行文件，如 BAT，因为 exe 是一个二进制文件，你不能真正改变一个 exe 来实现这一点 - `I would also like the exe to log some other details`。您必须更改可执行文件的源代码以从第 3 步捕获变量并执行某些操作。

# winapi - 如何将系统事件绑定到 VBA 类事件处理程序

> ID：13596480
> 
> 赞同：1
> 
> 时间：2012-11-28T01:49:42.317
> 
> 标签：winapi, events, excel, excel-2003, vba

在过去的几天里，我一直在尝试解决 VBA 中缺乏继承的问题，当`WithEvents`在 VBA 类模块中使用 MSForms 对象时，可以允许将多个事件处理程序分配给用户窗体中的一系列控件。我主要关注`_Enter`和`_Exit`事件，这些事件在我的控件所在的`MSForms.Control`而不是（从属）`MSForms.TextBox`。因此，将每个 TextBox 添加到类模块中的 tbTextBox 变量中，如下所示：

```
Private WithEvents tbTextBox as MSForms.TextBox

Private Sub tbTextBox_Exit()
 ' Do Something Here - doesn't work
End Sub

Private Sub tbTextBox_DblClick()
 ' Do Something Here - works
End Sub 
```

不适用于 Exit（在 MSForms.Control 中），尽管 DblClick 工作正常（在 MSForms.TextBox 中）。

我或多或少处于这样的地步，因为我知道这些事件确实会引发（仅在父级别），我想通过 Win32 API 连接到我的表单中的控件，并手动监视任何这些事件发生，然后引发我自己的事件来重新实现我自己的功能。

到目前为止，我从谷歌那里画了一个空白，但我认为一些更高级的 VBA 编码器比我能指出我正确的方向。还应该注意，我正在使用 Excel 2003，所以 VB.Net 不是一个选项，而且环境是高度沙盒的，所以不能使用外部模块或 .dll。

# delphi - 数据库网格：如何使用一个当前行的列作为另一个索引？

> ID：13596482
> 
> 赞同：1
> 
> 时间：2012-11-28T01:49:55.850
> 
> 标签：delphi, dbgrid, tdbgrid

我不确定问题标题是否足够清晰，请随时编辑。

基本上，我有两个数据库网格，它们反映了两个数据库表，每个网格显示一个。

当用户在第一个表中选择一行时（我们称之为`oders`），我想用与第一个表的选定行的列匹配的任何行的详细信息来更新第二个。

比如说，该表`orders`有一个列`customer_id`，我想`order_details`用该客户的所有订单的详细信息填充第二个表（我们称之为它），每行一个订单。

我可以连接 2@datasource、查询和连接到这两个`TDbGrid`s，但我对如何编写`order_details`SQL 感到困惑。

SQL for `orders`is just `SELECT * from orders`，但另一个？

我想要类似的东西`SELECT * from order_details WHERE cutomer_id=<orderQuery>.currentRow.FieldByName("customer_id").AsInteger`-但我不知道该怎么做...

有人可以帮我一些德尔福代码吗？

另外，一旦我建立了这种关系，在`orders`数据库网格中选择一个新行会自动更新`order_details`数据库网格吗？还是我需要为此添加代码。

Ps 我知道不再有`books`标签了（更遗憾的是），但是有人可以推荐一本好书来解释编程 DB 感知控件的基础知识吗？我显然需要一个。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:28:11.373

对详细（子）数据库使用参数化查询：

```
SELECT * FROM Order_Details od WHERE od.CustomerID = :CustomerID 
```

然后将子查询设置`MasterSource`为父 ( ) 数据源，`Order`并将. （如果有多个列将两者联系起来，用 分隔它们，如。）`MasterFields``CustomerID``;``CustomerID;OrderNumber`

每次滚动父项时（更改父 DBGrid 中的选定记录），子查询将自动执行，并将父行的 ID 作为参数传递。

# c++ - linux上是否有等效的windows concurrency_queue.h？

> ID：13596485
> 
> 赞同：2
> 
> 时间：2012-11-28T01:50:49.100
> 
> 标签：c++, linux, multithreading, concurrency, thread-safety

好吧，我试图拥有一个并发队列，但[concurrency_queue](http://msdn.microsoft.com/en-us/library/ee355358.aspx)不是标准 C++，它适用于 windows，linux 没有。linux 有这样的东西吗（具有与 windows 等效的相同功能？）？

编辑：这是将此 Windows 代码移植到 linux 所必需的：

```
#include <concurrent_queue.h>

#ifdef defined(WIN32) || defined(_WIN32) || defined(__WIN32__)
    #define SLEEP(x) { Sleep(x); }
    #include <windows.h>
    #include <process.h>
    #define OS_WINDOWS
    #define EXIT_THREAD() { _endthread(); }
    #define START_THREAD(a, b) { _beginthread( a, 0, (void *)( b ) ); }
#else
    #include <pthread.h>
    #define sscanf_s sscanf
    #define sprintf_s sprintf
    #define EXIT_THREAD() { pthread_exit( NULL ); }
    #define START_THREAD(a, b) {    pthread_t thread;\
                                pthread_create( &thread, NULL, a, (void *)( b ) ); }
#endif

using namespace std;
using namespace Concurrency;

struct QuedData
{
    int start;
    int end;
    int extraid;
    AMX * script;
    QuedData(){start = 0;end = 0;extraid = 0;script = NULL;}
    QuedData(int start_,int end_,int extraid_, AMX * script_){start = start_;end = end_;extraid = extraid_;script = script_;}
};

struct PassData //thanks to DeadMG for improvements.
{
    std::vector<cell> Paths;
    int extraid;
    AMX * script;
    cell MoveCost;
    PassData(){extraid = 0;script = NULL;MoveCost = 0;Paths.clear();}
    template<typename Iterator> PassData(Iterator begin, Iterator end, int extraid_, cell MoveCost_, AMX * script_)
        : Paths(begin, end)
    {extraid = extraid_;MoveCost = MoveCost_;script = script_;}
    ~PassData(){Paths.clear();}
};

concurrent_queue            <QuedData>          QueueVector;
concurrent_queue            <PassData>          PassVector;
PassData LocalPass;

void PLUGIN_CALL
    ProcessTick()
{
    if(PassVector.try_pop(LocalPass))
    {
        amx_Push(LocalPass.script, LocalPass.MoveCost);
        //blabla
    }
}

static cell AMX_NATIVE_CALL n_CalculatePath( AMX* amx, cell* params )
{
    QueueVector.push(QuedData(params[1],params[2],params[3],amx));
    return 1;
}

bool PLUGIN_CALL Load( void **ppData )
{
    START_THREAD( Thread::BackgroundCalculator, 0);
    return true;
}

QuedData RecievedData;
vector <cell>tbcway;
cell tbccostx;
#ifdef OS_WINDOWS
    void Thread::BackgroundCalculator( void *unused )
#else
    void *Thread::BackgroundCalculator( void *unused )
#endif
{
    while( true ){
        if(QueueVector.try_pop(RecievedData)){
            dgraph->findPath_r(xNode[RecievedData.start].NodeID ,xNode[RecievedData.end].NodeID,tbcway,tbccostx);
            PassVector.push(PassData(tbcway.begin(),tbcway.end(),RecievedData.extraid,tbccostx,RecievedData.script));
        }
        SLEEP(5);
    }
    EXIT_THREAD();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T02:39:03.457

Visual C++ concurrent_queue 实际上基于英特尔线程构建模块库（如果您在 VC++ 中打开 concurrent_queue.h 头文件，您将看到一个确认）

你可以从

[http://threadingbuildingblocks.org/](http://threadingbuildingblocks.org/)

该库也将在 Linux 上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T01:54:30.910

我认为[线程池可以做到这一点，或者是一个名为 lockfree](https://www.ohloh.net/p/lockfree)[的](http://threadpool.sourceforge.net/)非官方 Boost 增强功能，现在应该是. 我没有同时使用这两种方法，但如果你有任何运气，请告诉我们。`Boost::Atomics`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T02:03:23.913

我建议查看[https://github.com/romanek-adam/boost_locking_queue](https://github.com/romanek-adam/boost_locking_queue)的代码以及[使用条件变量实现线程安全队列的文章](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)

# ios - 旋转一个已经通过旋转动画的 UIView

> ID：13596486
> 
> 赞同：1
> 
> 时间：2012-11-28T01:51:06.477
> 
> 标签：ios, uiview, transform, calayer

我一直在四处寻找，但找不到似乎可以解决我的具体问题的答案。在我的应用程序中，我有一个自定义 UIView 可以无限期地制作动画。它是一片海藻，动画非常微妙，让它看起来像是在水中摇摆。我使用`transform.rotation.z`和`position`键上的 CAKeyframeAnimation 对象来执行此操作。这些被添加到一个 CAAnimationGroup 中，它作为一个层添加到我的 UIView 中，如下所示：

```
animGroup = [CAAnimationGroup animation];
animGroup.fillMode = kCAFillModeForwards;
[animGroup setAnimations:[NSArray arrayWithObjects:posAnim, rotateAnim, nil]];
animGroup.duration = prpAnim.duration;
animGroup.repeatCount = prpAnim.repeat;
animGroup.delegate = self;
[animGroup setValue:self forKey:[NSString stringWithFormat:@"paper.rot.pos.%d",objID]];
[self.layer addAnimation:animGroup forKey:[NSString stringWithFormat:@"rot.pos.%d",objID]]; 
```

我想在倾斜 iPad 时进一步旋转 UIView 图像（一块海藻）而不干扰核心动画。当它不是由关键帧动画时我可以做到这一点，但是当我尝试将两者结合起来时，它不起作用，我无法弄清楚。

我试过用这样的东西为图层设置动画：

```
CATransform3D rotatePiece3D = CATransform3DMakeRotation(-(tiltRadians), 0.0, 0.0, 1.0);
seaweedPiece.layer.transform = rotatePiece3D; 
```

但这也不起作用 - 仅当动画组关闭时。这是一个 2D 应用程序，所以我只希望它在向左或向右倾斜时围绕 z 轴旋转。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:19:54.457

你显然不能在动画时单独改变旋转，所以我试图做的事情是行不通的。我最终将动画键更改为`path`，这使我可以使用加速度计单独旋转视图。

# php - 在公共视图中阻止 php 页面

> ID：13596490
> 
> 赞同：-1
> 
> 时间：2012-11-28T01:51:33.543
> 
> 标签：php, .htaccess

在公共视图中阻止 php 页面。但仍然可以被其他页面使用。

嗨，我正在开发一个有 ajax live search(search.php) 的网站，search.php 从另一个 php 页面调用以在数据库中搜索，它工作得很好，问题是 search.php 可以输入在 url 中并显示数据库中的所有数据。我试着用谷歌搜索它，仍然不知道如何解决它。我读过它可以在.htaccess 中完成，也可以通过更改权限来完成......我只是想了解如何正确解决问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:58:14.753

我将如何做到这一点是通过在表单中​​添加另一个 $_POST 变量..类似于以下内容..

```
$.post('search.php', {search: 'search term', secret: 'ajax'}, function(r){
  $(insert).html(r)
}) 
```

然后在帖子页面..

```
if(isset($_POST['secret']) && $_POST['secret'] == 'ajax'){
  // do your submitting..
} else {
  // display some kind of error message since the secret post wasnt found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:56:55.440

试试这个确保将它放在 search.php 页面的顶部：D

```
if(basename(__FILE__) == basename($_SERVER['PHP_SELF'])) send_404();

function send_404()
{

    header('HTTP/1.x 404 Not Found');

    print '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">'."\n".

    '<html><head>'."\n".

    '<title>404 Not Found</title>'."\n".

    '</head><body>'."\n".

    '<h1>Not Found</h1>'."\n".

    '<p>The requested URL '.

    str_replace(strstr($_SERVER['REQUEST_URI'], '?'), '', $_SERVER['REQUEST_URI']).

    ' was not found on this server.</p>'."\n".

    '</body></html>'."\n";

    exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:58:39.640

在 search.php 文件的第一行尝试这样的事情

```
/***************DO NOT ALLOW DIRECT ACCESS************************************/
if ( (strpos( strtolower( $_SERVER[ 'SCRIPT_NAME' ] ), strtolower( basename( __FILE__ ) ) ) ) !== FALSE ) { // NOT FALSE if the script's file name is found in the URL
  header( 'HTTP/1.0 403 Forbidden' );
  die( '<h2>Forbidden! Access to this page is forbidden.</h2>' );
}
/*****************************************************************************/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T02:02:33.160

我通过将非登陆 PHP 页面置于公共 html 文件夹之外来解决问题，通常位于公共 html 文件夹上方的 /php 或 /lib 文件夹中。这种假设您的所有登录页面都包含某种形式的引导程序，该引导程序设置您的包含路径以包含 /php 文件夹。

另一个简单的解决方案是让您的登陆 php 文件设置一个值或常量，如果未设置该值，则让您的包含拒绝执行 - 这样您就无法直接执行 php 文件。

**索引.php**

```
<?php
define(VALID_REQUEST, 1);
include "include.php"
... 
```

**包含.php**

```
<?php
if (!defined(VALID_REQUEST)) { exit; }
... 
```

# css - 使用 CSS 的可点击显示/隐藏手风琴菜单

> ID：13596491
> 
> 赞同：0
> 
> 时间：2012-11-28T01:51:44.387
> 
> 标签：css, menu, hide, accordion, show

我需要一些帮助来调整这个小手风琴菜单并用点击效果替换悬停效果，这意味着每当我点击它时显示/隐藏，而不是仅仅悬停在它上面。

[http://www.deluxeblogtips.com/2010/04/accordion-menu-css3-transition.html](http://www.deluxeblogtips.com/2010/04/accordion-menu-css3-transition.html)

我对 CSS 了解不多，我学到的一切都是即时的，但这对我来说太难了。我研究了其他选项，例如 :target 但我认为您不能同时使用它来显示和隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:02:56.723

尝试使用 jquery .slideDown() [http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)， .slideUp() [http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)和 .slideToggle() [http://api.jquery。 com/slideToggle/](http://api.jquery.com/slideToggle/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-27T08:09:59.133

你可以使用你的 CSS 选择器

```
#accordion div:hover {...} and #accordion div:hover a {...} 
```

并将它们替换为

```
#accordion .item.active {...} and #accordion .item.active a {...} 
```

然后用 jQuery 添加点击功能

```
$('#accordion').on('click', '.item', function(){
   $('.item').not(this).removeClass('active');
   $(this).toggleClass('active');
}); 
```

你就完成了。对于完整的代码

[https://jsfiddle.net/logiccanvas/ntgcj0mf/](https://jsfiddle.net/logiccanvas/ntgcj0mf/)

# android - Android 图像调整大小和保留 EXIF 数据（方向、旋转等）

> ID：13596500
> 
> 赞同：57
> 
> 时间：2012-11-28T01:52:43.747
> 
> 标签：android, image, android-camera, exif

如果您的 Android 应用程序使用设备相机拍摄照片然后调整其大小（这对于减小上传大小非常非常常见），您可能没有意识到此调整大小操作会**剥离**Exif 元数据。

这可能会导致问题，特别是如果相关设备依赖“方向”标签来正确垂直显示图像。

不同的 Android 设备以不同的方式处理相机/图像旋转 - 我值得信赖的旧 Nexus One 似乎总是在捕获后立即旋转图像，因此文件的原生内容在查看时始终是“直立的”。

但是，其他设备（尤其是我测试中的三星手机）*不会*旋转图像文件的内容——而是设置 Exif 'Orientation' 标签。每当图像稍后显示时，相关图像代码应检测方向“标签”的存在并适当地旋转图像。但是，如果您对图像进行了任何位图处理并将其保存到新文件中，那么所有的 Exif 数据都会丢失。

除了方向数据之外，您还可能会丢失其他有价值的元数据，例如品牌/型号等。

这让我困惑了几个星期（图像在电话图库中显示时看起来是直立的，但随后以错误的方向到达我的服务器并且没有明显的元数据）。我在这里添加这个自我问题来帮助别人。这篇博文非常有帮助：

*[Android 在不丢失 EXIF 信息的情况下调整图像大小](http://vikaskanani.wordpress.com/2011/07/17/android-re-size-image-without-loosing-exif-information/)*

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-28T01:52:43.747

据我所知，**没有任何**机制可以自动保存元数据，甚至快照任何存在并批量传输。

相反，您似乎必须明确检查特定属性并使用 ExifInterface 自己将它们复制到新图像文件中。

[http://developer.android.com/reference/android/media/ExifInterface.html](http://developer.android.com/reference/android/media/ExifInterface.html)

所以像：

```
ExifInterface oldExif = new ExifInterface(oldImagePath);
String exifOrientation = oldExif.getAttribute(ExifInterface.TAG_ORIENTATION);

if (exifOrientation != null) {
   ExifInterface newExif = new ExifInterface(imagePath);
   newExif.setAttribute(ExifInterface.TAG_ORIENTATION, exifOrientation);
   newExif.saveAttributes();
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-11-05T19:38:53.460

对于懒惰的人，这里有一个可重用的函数：

```
public static void copyExif(String oldPath, String newPath) throws IOException
{
    ExifInterface oldExif = new ExifInterface(oldPath);

    String[] attributes = new String[]
    {
            ExifInterface.TAG_APERTURE,
            ExifInterface.TAG_DATETIME,
            ExifInterface.TAG_DATETIME_DIGITIZED,
            ExifInterface.TAG_EXPOSURE_TIME,
            ExifInterface.TAG_FLASH,
            ExifInterface.TAG_FOCAL_LENGTH,
            ExifInterface.TAG_GPS_ALTITUDE,
            ExifInterface.TAG_GPS_ALTITUDE_REF,
            ExifInterface.TAG_GPS_DATESTAMP,
            ExifInterface.TAG_GPS_LATITUDE,
            ExifInterface.TAG_GPS_LATITUDE_REF,
            ExifInterface.TAG_GPS_LONGITUDE,
            ExifInterface.TAG_GPS_LONGITUDE_REF,
            ExifInterface.TAG_GPS_PROCESSING_METHOD,
            ExifInterface.TAG_GPS_TIMESTAMP,
            ExifInterface.TAG_IMAGE_LENGTH,
            ExifInterface.TAG_IMAGE_WIDTH,
            ExifInterface.TAG_ISO,
            ExifInterface.TAG_MAKE,
            ExifInterface.TAG_MODEL,
            ExifInterface.TAG_ORIENTATION,
            ExifInterface.TAG_SUBSEC_TIME,
            ExifInterface.TAG_SUBSEC_TIME_DIG,
            ExifInterface.TAG_SUBSEC_TIME_ORIG,
            ExifInterface.TAG_WHITE_BALANCE
    };

    ExifInterface newExif = new ExifInterface(newPath);
    for (int i = 0; i < attributes.length; i++)
    {
        String value = oldExif.getAttribute(attributes[i]);
        if (value != null)
            newExif.setAttribute(attributes[i], value);
    }
    newExif.saveAttributes();
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-09T02:23:29.097

正如其他人所指出的，您必须将 Exif 数据从原始图像复制到最终调整大小的图像。Sanselan Android 库通常最适合这一点。根据 Android 操作系统版本，ExifInterface 有时会损坏 Exifdata。

此外，ExifInterface 还处理有限数量的 Exif 标签——即只处理它“知道”的标签。另一方面，Sanselan 将保留所有 Exiftags 和标记注释。

这是一篇博文，展示了如何使用 Sanselan 复制图像数据：

*[使用 Sanselan 复制 Exif 元数据](http://bricolsoftconsulting.com/copying-exif-metadata-using-sanselan/)*

顺便说一句，在 Android 上，我也倾向于旋转图像并删除方向 Exiftag。例如，在装有 Android 4.03 的 Nexus S 上，相机在 Exifmetadata 中设置了一个方向标签，但 webview 忽略了该信息并错误地显示了图像。可悲的是，旋转实际图像数据并删除 Exiforientation 标签是让每个程序正确显示图像的唯一方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-01T15:04:04.070

已经是 2019 年了，仍然没有比[@prom85](https://stackoverflow.com/users/1439522/prom85)、[Mike Repass](https://stackoverflow.com/users/614880/mike-repass)和[Theo](https://stackoverflow.com/users/483708/theo)提出的更好的答案。

2016 年，Android 团队引入了[ExifInterface 支持库](https://android-developers.googleblog.com/2016/12/introducing-the-exifinterface-support-library.html)，如果您希望在 Android 版本之间保持一致的行为，这可能是最佳选择。我最终创建了一个标签子集`ExifInterface#EXIF_TAGS`（[源代码](https://github.com/aosp-mirror/platform_frameworks_support/blob/d79202da157cdd94c2d0c0b6ee57170a97d12c93/exifinterface/src/main/java/androidx/exifinterface/media/ExifInterface.java#L3584)），我只是迭代这个子集以从输入文件中提取元数据并将其设置在输出中。如果您需要复制所有标签，我建议您不要这样做！一些标签的值无论如何都需要相应地更新（例如`TAG_IMAGE_LENGTH`和`TAG_IMAGE_WIDTH`）。就个人而言，我一直在问为什么我们需要首先保留所有元数据数据（它与您在使用的设备和相机之间获得的数据不同）并且我们意识到 GPS 位置和日期/时间数据也需要保留。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-26T18:19:07.193

为什么不直接修改 ExifInterface 源并添加您自己的实现以支持批量读/写，这样您就不必逐个标签指定。这是我会做的一个片段。

添加新方法以公开内部属性：

```
public HashMap<String, ExifAttribute>[] getAllAttributes() {
    return mAttributes;
} 
```

添加新方法来设置所有属性：

```
public void setAttributes(HashMap<String, ExifAttribute>[] attributes) {
    for (int i = 0 ; i < EXIF_TAGS.length; ++i) {
        mAttributes[i] = attributes[i];
    }
} 
```

然后像这样使用它来保存Exif并保存到另一个文件

```
// Grab all the original exif attributes from an image file and save to memory or wherever
let attributes = ExifInterface2(sourceImagePath).attributes

// Later on you can just copy those attributes to another image
ExifInterface2(destImagePath)
    .setAttributes(attributes)
    .saveAttributes(); 
```

# c - 为什么要在函数 strtod() 中使用 (char **endptr) 而不是 (char ch) 或 (char *chptr)

> ID：13596503
> 
> 赞同：0
> 
> 时间：2012-11-28T01:53:02.997
> 
> 标签：c, string, pointers

`double strtod(const char *str, char **endptr);`

参数**endptr**是指向指针的指针。停止扫描的字符的地址存储在 endptr 指向的指针中。

为什么要在函数 strtod() 中使用 (char **endptr) 而不是 (char ch) 或 (char *chptr)。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T01:55:46.607

> 为什么要在函数中使用`(char **endptr)`而不是`(char ch)`或`(char *chptr)``strtod()`

因为该参数旨在向调用者提供信息。所以它必须修改调用者控制的内存，这通常也是最容易通过在调用者中传递变量的地址来完成的。

可以有一个类型的参数`char*`指向`char`调用者中的单个变量，但这不允许轻松检查是否应该接受结果（例如，是否要忽略尾随空格）或是否进一步处理需要输入字符串。

拥有该类型`char**`可以`strtoX`非常舒适地在解析器中使用，它们在消耗完它们的部分后留下指向字符串其余部分的指针。

如果类型是`char*`，并且仅保存消耗`char`的部分之后`strtoX`，则需要通过本质上重新解析数字来定位进一步解析的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:01:15.560

因为使用 a`char *`您将只获得有关停止扫描的字符的值的信息，而使用 a`char **`您可以获得有关字符位置（内存地址）的信息，这使您可以进一步处理字符串的其余部分。

如[cplusplus.com](http://www.cplusplus.com/reference/cstdlib/strtod/)的示例所示，您可以执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  char szOrbits[] = "365.24 29.53";
  char *pEnd;
  double d1, d2;

  d1 = strtod(szOrbits, &pEnd);
  d2 = strtod(pEnd, NULL);
  printf("The moon completes %.2f orbits per Earth year.\n", d1 / d2);

  return (0);
} 
```

# python - Python命令在命令提示符下不起作用

> ID：13596505
> 
> 赞同：113
> 
> 时间：2012-11-28T01:53:17.320
> 
> 标签：python, windows, windows-8, command

当我`python`在命令行中键入时，命令提示符会显示`python is not recognized as an internal or external command, operable program, or batch file`. 我该怎么办？

注意：我的计算机上安装了 Python 2.7 和 Python 3.2。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2017-12-18T13:50:15.143

我已经从[Releases for Windows](https://www.python.org/downloads/windows/)安装了最新的 Python for Win10 。只需键入`py` 开始`Command Prompt Window`Python。

```
Microsoft Windows [Version 10.0.15048]
(c) 2017 Microsoft Corporation. All rights reserved.

C:\Users\sg7>py
Python 3.6.3 (v3.6.3:2c5fed8, Oct  3 2017, 18:11:49) [MSC v.1900 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>`enter code here` 
```

测试：

```
>>> print("hello!")
hello!
>>> 
```

请注意，在我的情况下，Python 安装在`C:\Users\sg7\AppData\Local\Programs\Python\Python36>`目录中

```
C:\Users\sg7\AppData\Local\Programs\Python\Python36>dir
 Volume in drive C is Windows7_OS
 Volume Serial Number is 1226-12D1

 Directory of C:\Users\sg7\AppData\Local\Programs\Python\Python36

08/05/2018  07:38 AM    <DIR>          .
08/05/2018  07:38 AM    <DIR>          ..
12/18/2017  09:12 AM    <DIR>          DLLs
12/18/2017  09:12 AM    <DIR>          Doc
12/18/2017  09:12 AM    <DIR>          include
12/18/2017  09:12 AM    <DIR>          Lib
12/18/2017  09:12 AM    <DIR>          libs
10/03/2017  07:17 PM            30,334 LICENSE.txt
10/03/2017  07:17 PM           362,094 NEWS.txt
10/03/2017  07:15 PM           100,504 python.exe
10/03/2017  07:12 PM            58,520 python3.dll
10/03/2017  07:12 PM         3,610,776 python36.dll
10/03/2017  07:15 PM            98,968 pythonw.exe
08/05/2018  07:38 AM           196,096 Removescons.exe
08/05/2018  07:38 AM            26,563 scons-wininst.log
08/05/2018  07:38 AM    <DIR>          Scripts
12/18/2017  09:12 AM    <DIR>          tcl
12/18/2017  09:12 AM    <DIR>          Tools
06/09/2016  11:53 PM            87,888 vcruntime140.dll
               9 File(s)      4,571,743 bytes
              10 Dir(s)  20,228,898,816 bytes free 
```

当我处于`C:\Users\sg7>`目录级别时，`python`可以通过键入来调用 `AppData\Local\Programs\Python\Python36\python`

```
C:\Users\samg>AppData\Local\Programs\Python\Python36\python
Python 3.6.3 (v3.6.3:2c5fed8, Oct  3 2017, 18:11:49) [MSC v.1900 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

较新的 Python 3.7 将安装在： `C:\Users\YourUserNameHere\AppData\Local\Programs\Python\Python37`

如果您愿意，可以添加到您的路径环境变量： `%USERPROFILE%\AppData\Local\Programs\Python\Python36`

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2012-11-28T02:51:30.070

终于成功了！！！

我需要做一些事情才能让它工作

1.  将 C:\Python27\ 添加到 PATH 系统变量的末尾
2.  将 C:\Python27\ 添加到 PYTHONPATH 系统变量的末尾

我必须将它们添加到两者中才能正常工作。

如果我添加了任何子目录，由于某种原因它不起作用。

谢谢大家的回复。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2016-08-04T11:52:09.347

该视频非常有用。

1.  转到系统属性-> 高级（或在开始菜单中键入“系统环境”。）
2.  点击环境变量
3.  编辑“PATH”变量
4.  添加 2 个新路​​径 'C:\Python27' 和 'C:\Python27\scripts'
5.  再次运行 cmd 并键入 python。

它对我有用

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2019-01-03T21:00:17.397

而不是命令“python”，请考虑通过[py 启动器](https://docs.python.org/3/using/windows.html#getting-started)启动 Python ，[如 sg7 的回答中所述](https://stackoverflow.com/a/47869909/5257294)，它通过运行最新版本的 Python（或让您选择特定版本）。py 启动器在安装期间通过复选框启用（默认值：“on”）。

尽管如此，您仍然可以在“首次安装”或“修改”现有安装时将“python”命令放在 PATH 中。

* * *

**第一次安装：**

在第一个对话框中选中“[x] Add Python xy to PATH”框。以下是它在 3.8 版中的外观： [![在此处输入图像描述](../Images/ad3f7c3e512601d0768ef5d940a0e314.png)](https://i.stack.imgur.com/c5ZMx.png)

这具有将以下内容添加到`PATH`变量的效果：

```
C:\Users\...\AppData\Local\Programs\Python\Python38-32\Scripts\
C:\Users\...\AppData\Local\Programs\Python\Python38-32\ 
```

* * *

**修改现有安装：**

重新运行您的安装程序（例如在下载中，python-3.8.4.exe）并选择“修改”。检查您想要的所有可选功能（可能没有更改），然后单击 [下一步]。勾选 [x]“将 Python 添加到环境变量”和 [安装]。 [![在此处输入图像描述](../Images/6c799e3d7a4eac72f7f04c02d0b38753.png)](https://i.stack.imgur.com/gRyw8.png)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2019-12-15T06:01:33.177

在 Windows 7 中，命令提示符中的 python start 命令是

```
c:\>python3 
```

但在 Windows 10 命令提示符下的 python start 命令是

```
 C:\>py
Python 3.6.3 (v3.6.3:2c5fed8, Oct  3 2017, 17:26:49) [MSC v.1900 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>

C:\>py --version
Python 3.6.3

C:\> 
```

但在 Windows 10 python3 语法不起作用也没有给出任何错误。

Django 启动命令也使用**py**而不是 python3。

```
d:\>py manage.py runserver 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2021-03-05T09:41:35.040

如果其他人有同样的问题，如果您已经添加到 PATH 并且如果`C:\Users\pete.kirkham\AppData\Local\Programs\Python\Python39\python`您使用完整路径运行它（`python`

转到设置 > 应用程序执行别名并禁用运行应用程序安装程序的 python 的别名。

更多细节可以在这个问题中找到[CMD opens window store when I type python](https://stackoverflow.com/questions/58754860/cmd-opens-window-store-when-i-type-python)

（大概如果您的组织没有禁用 Windows 应用商店并且您通过应用商店安装它会在您安装时禁用此功能，但通过从 python.org 下载安装不会）

[![在此处输入图像描述](../Images/39c7ff9bcbef1e004ab80f2dc2c7d997.png)](https://i.stack.imgur.com/33pbr.png)

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2021-02-04T07:39:30.310

这对我有用：

```
PS C:\Users\MyUsername> py -V

Python 3.9.0 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-11-24T13:56:23.000

他们已经给了我们一个脚本来为我们做这件事

```
C:\Users\hUTBER\AppData\Local\Programs\Python\tools\scripts\win_add2path.py 
```

您需要确保关闭并打开它，`cmd`否则那里不会有新路径。

如果您找不到此脚本，这些是它将添加的路径，最后我必须手动添加。

```
C:\Users\hUTBER\AppData\Local\Programs\Python\Python35
C:\Users\hUTBER\AppData\Local\Programs\Python\Python35\Scripts 
```

我现在`python`在哪里工作`cmd`

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-11-28T02:07:28.377

Kalle 发布了一个链接，指向包含[此视频](http://showmedo.com/videotutorials/video?name=960000&fromSeriesID=96)的页面，但它是在 XP 上完成的。如果您使用 Windows 7：

1.  按窗口键。
2.  键入“系统环境”。按回车。
3.  按`alt + n`
4.  按`alt + e`
5.  按向右，然后`;`（这是一个分号）
6.  在不添加空格的情况下，在最后键入：`C:\Python27`
7.  按两次回车。按 esc。
8.  用于`windows key + r`调出运行对话框。输入`python`并按回车。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-04-02T00:08:07.670

我可能是这里最新手的用户，我花了六个小时在 Windows 8 的命令行中运行 python。一旦我安装了 64 位版本，然后我将其卸载并替换为 32 位版本。然后，我在这里尝试了大多数建议，特别是通过在系统变量中定义路径，但它仍然没有用。

然后我意识到当我输入命令行时：echo %path%

该路径仍未定向到 C:\python27。所以我只是重新启动了计算机，现在它可以工作了。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-11-28T19:48:19.727

只是一些评论：

1.  如果您`PYTHONPATH`只想在`PATH`. `PYTHONPATH`环境变量告诉 Python 在哪里寻找要导入的模块。将其设置为`C:\Python27\`不会完成任何有用的事情，尽管它可能是无害的。

2.  从“编辑系统变量”修改环境变量（包括`PATH`）对已经运行的进程没有影响。这意味着您必须重新启动`cmd.exe`才能使更改生效。但是，不需要重新启动。

3.  修改 PATH 时，还要添加 Scripts 子目录。或者，换句话说（并使用前面的示例）： add `;C:\Python27;C:\Python27\Scripts`. 这将允许您从命令行运行诸如`easy_install`、或之类`pip`的脚本——一旦您安装了这些脚本。这与适用于 Windows 的 UNIX-y 差不多。（注意，在全新安装 Python 后，子目录不存在，但会在需要时创建。）`virtualenv``sphinx``Scripts`

4.  **不要**在. _ `Lib`_ 没有必要，它可能会造成伤害。`DLL``PATH`

5.  如果您已经安装了多个版本的 Python（这并不少见），您最好*不要*将它们中的任何一个放在上面，`PATH`而是`cmd.exe`为不同版本创建不同的快捷方式，从而`PATH`为每个版本设置 。您可能还对[PEP-397](http://www.python.org/dev/peps/pep-0397/)感兴趣。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-02-25T15:00:53.050

即使按照上述有价值答案的说明，从命令行调用 python 也会打开 Microsoft Store 并将我重定向到下载软件的页面。

我发现这是由 0 Ko python.exe 文件引起的，该文件`AppData\Local\Microsoft\WindowsApps`优先于我的 PATH 中的 python 可执行文件。

从我的 PATH 中删除此文件夹解决了它。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2012-11-28T02:01:58.790

您必须在系统路径中添加 python 可执行文件，执行以下操作，`My Computer > Properties > Advanced System Settings > Environment Variables`> 然后在系统变量下创建一个名为“PythonPath”的新变量。在这个变量中，我有`"C:\Python27\Lib;C:\Python27\DLLs;C:\Python27\Lib\lib-tk;C:\other-foolder-on-the-path"`.

![在此处输入图像描述](../Images/7dc0cf1f475ca09e5685fd5386ebde4b.png)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-09-29T20:42:55.637

这是为使用他人共享计算机的办公室工作人员准备的。

我确实将我的用户路径放在了路径中，并在我的计算机的 PATH 变量中创建了 PYTHONPATH 变量。它列在计算机属性中的环境变量 -> Windows 7 中的高级设置下。

例子：

C:\Users\randuser\AppData\Local\Programs\Python\Python37

这样我就可以使用命令提示符了。

希望这有帮助。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-11-28T02:00:15.127

似乎在您的 PATH 中找不到 python 可执行文件，它定义了它在哪里寻找可执行文件。有关如何在 PATH 中获取 python 可执行文件的说明，请参阅[官方说明。](http://docs.python.org/2/faq/windows.html)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-11-28T02:01:01.930

您需要将 python 添加到您的 PATH 中。我可能是错的，但 Windows 7 应该具有与 Windows 8 相同的 cmd。在命令行中试试这个。**`setx`永久**使用会更改您的 PATH。注意没有等号，使用引号。

```
setx PATH "%PYTHONPATH%;C:\python27" 
```

将 设置为`c:\python27`您希望从键入`python`命令提示符运行的 python 版本的目录。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2012-11-28T02:02:54.830

将 python bin 目录添加到计算机的 PATH 变量中。它列在计算机属性中的环境变量 -> Windows 7 中的高级设置下。它应该与 Windows 8 相同。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-08-30T22:28:28.903

只需执行命令即可`py`。我在 Windows 7 上运行 python 3.6.2，它工作得很好。 我从系统目录中删除了所有 python 路径，当我在 cmd 中
运行命令时，这些路径没有显示出来。`echo %path%`Python 仍然可以正常工作。
我在打字时不小心按Enter键遇到了这个`python`......

编辑：我没有提到我将 python 安装到自定义文件夹 C:\Python\

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-01-21T21:17:36.903

当您将 python 目录添加到路径时（计算机 > 属性 > 高级系统设置 > 高级 > 环境变量 > 系统变量 > 路径 > 编辑），请记住添加分号，然后确保添加文件所在的精确目录存储“python.exe”（例如 C:\Python\Python27，如果这是存储“python.exe”的位置）。然后重新启动命令提示符。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-09-26T20:30:00.337

如果您正在使用命令提示符，并且即使在将 python 路径添加到系统变量 PATH 后仍面临问题。

请记住重新启动命令提示符 (cmde.exe)。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-04-07T11:12:57.433

我想添加一个安装时发生的常见问题。路径安装长度可能太长。为避免这种情况，请更改标准路径，使其短于 250 个字符。

当我在 WIN10 操作系统上安装软件并进行自定义安装时，我意识到了这一点。在自定义安装中，软件应该可以将 Python 添加为 PATH 变量

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-03-27T20:19:19.733

这些都不适合我。要真正在其路径中识别 Python，您需要做的是仅从该网站而不是其他网站下载它的最新版本： [https ://www.python.org/downloads/](https://www.python.org/downloads/)

但安装时要小心；如果您有 Windows 计算机，默认安装设置为不将 Python 的路径添加到控制面板中的环境变量中，但您应该更改设置，以便安装完成，这一切都会自行完成。

# ios - 使用滑动手势启动和停止音频

> ID：13596509
> 
> 赞同：1
> 
> 时间：2012-11-28T01:53:47.863
> 
> 标签：ios

我正在开发一个小应用程序供我女儿玩，但我在启动和停止声音时遇到了一点问题。我现在已经对其进行了编码，当您从一页滑动到下一页时它会播放不同的声音，但它们会重叠。我试图弄清楚如何在页面来回滑动时停止上一个声音并开始下一个声音。这是我所拥有的：

```
@implementation ViewController
@synthesize imageview;

int imageIndex = 0;

- (IBAction)handleSwipe:(UIGestureRecognizer *)sender {
//NSLog(@"swiped");

UISwipeGestureRecognizerDirection direction =
[(UISwipeGestureRecognizer *) sender direction];

switch (direction) {
    case UISwipeGestureRecognizerDirectionLeft:
        imageIndex++;
        break;
    case UISwipeGestureRecognizerDirectionRight:
        imageIndex--;
        break;
    default:
        break;
}
[self doit];
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
imageIndex = -1;

imageview.image = [UIImage imageNamed:@"icon.png"];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

-(void) doit {
NSArray *images= [[NSArray alloc] initWithObjects:
                  @"bee.png",
                  @"cow.png",
                  @"cat.png",
                  @"dog.png",
                  @"elephant.png",
                  @"goat.png",
                  @"horse.png",
                  @"lion.png",
                  @"monkey.png",
                  @"pig.png",
                  @"rooster.png",
                  @"sheep.png",
                  @"snake.png",
                  @"squirrel.png",
                  @"tiger.png",
                  @"wolf.png", nil];

NSArray *audio= [[NSArray alloc] initWithObjects:
                 @"Bee",
                 @"Cow",
                 @"Cat",
                 @"Dog",
                 @"Elephant",
                 @"Goat",
                 @"Horse",
                 @"Lion",
                 @"Monkey",
                 @"Pig",
                 @"Rooster",
                 @"Sheep",
                 @"Snake",
                 @"Squirrel",
                 @"Tiger",
                 @"Wolf", nil];
imageIndex = (imageIndex < 0) ? ([images count] -1):
imageIndex % [images count];
imageview.image = [UIImage imageNamed:[images objectAtIndex:imageIndex]];

//audio here
NSString *str = [audio objectAtIndex:imageIndex];
CFStringRef string =  (__bridge CFStringRef) str;

CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundeFileURLRef;
soundeFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) string, CFSTR ("mp3"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundeFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID); 
```

# groovy - Groovy 中 href 值的正则表达式

> ID：13596511
> 
> 赞同：0
> 
> 时间：2012-11-28T01:54:12.333
> 
> 标签：groovy

Groovy 中使用正则表达式捕获链接的 href 值的最佳方法是什么？

`example: <a href="`**http://someurl.com**`">some link</a>`

我想捕捉粗体字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:21:06.260

这取决于您从中挑选锚标签的内容，但是如果您将其与所显示的内容隔离开来，则以下内容应该可以工作：

```
def link= """<a href="http://someurl.com">some "link</a>"""
def url = (x =~ /\"(.*?)\"/)[0][1] 
```

# r - 重新编码数值变量

> ID：13596512
> 
> 赞同：0
> 
> 时间：2012-11-28T01:54:13.500
> 
> 标签：r

非常基本的问题，但我无法通过搜索找到答案：

我正在尝试将序数变量的值重新编码为新值。

我尝试使用 car 包中的 recode() 函数，如下所示：

```
recode(x, "0=1; 1=2; 3=2") 
```

我收到以下错误消息：

```
Error in recode(threecat, "0=1; 1=2; 3=2") : 
  (list) object cannot be coerced to type 'double 
```

'

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:09:06.183

在我看来它`threecat`是一个列表，而 car::recode 需要一个向量。里面有什么`threecat`？按照@mnel 的建议包含`dput(head(threecat))`.

```
> x<-c(0,1,2,3,4)
> recode(x, "0=1; 1=2; 3=2")
[1] 1 2 2 2 4
> y<-list(x)
> y
[[1]]
[1] 0 1 2 3 4

> recode(y, "0=1; 1=2; 3=2")
Error in recode(y, "0=1; 1=2; 3=2") : 
  (list) object cannot be coerced to type 'double' 
```

如果 threecat 的元素是向量，则只需对向量元素运行 recode：

```
> recode(y[[1]], "0=1; 1=2; 3=2")
[1] 1 2 2 2 4 
```

如果 threecat 是元素列表，则必须将其取消列出：

```
> yy <- list(0,1,2,3,4)
> yy
[[1]]
[1] 0

[[2]]
[1] 1

[[3]]
[1] 2

[[4]]
[1] 3

[[5]]
[1] 4

> recode(unlist(yy), "0=1; 1=2; 3=2")
[1] 1 2 2 2 4 
```

如果没有看到您实际使用的变量，很难说更多。

# ios - 如何检测我是否正在访问仅限 iOS6 的方法？

> ID：13596514
> 
> 赞同：2
> 
> 时间：2012-11-28T01:54:17.630
> 
> 标签：ios, ios6, selector

> **可能重复：**
> [XCode 有没有办法警告新的 API 调用？](https://stackoverflow.com/questions/4676000/is-there-a-way-for-xcode-to-warn-about-new-api-calls)

我正在构建一个支持 iOS 4.3 到 iOS 6.x 的应用程序。但是，我在不知不觉中使用了标记为**__OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_6_0)**的方法。这意味着选择器在以前的 iOS 版本中不存在。

当然，当我在 iOS 5.x 设备上测试我的代码时，应用程序崩溃了。我弄清楚发生了什么，并插入了一个**respondsToSelector**检查，并在检查失败时默认为“iOS 4.x 方式”的处理方式。

以后如何防止这些错误？是否有一种编译时方法可以确定**我正在访问仅限 iOS-6 的方法**，以便我可以添加适当的 iOS 功能检查？

我不想意外地发布在我的 iOS6 设备上运行良好的产品，只是让它在某人的 iOS4.3 设备上失败，因为选择器不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:40:07.050

这里的答案对我有用：[https ://stackoverflow.com/a/8919108/208989](https://stackoverflow.com/a/8919108/208989)

下载此标头：[https ://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Utilities/MJGAvailability.h](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Utilities/MJGAvailability.h)

并将以下内容放在 .pch 文件的顶部：

```
#define __IPHONE_OS_VERSION_SOFT_MAX_REQUIRED __IPHONE_4_3
#import "MJGAvailability.h" 
```

# jquery - 从同级元素onClick jquery中查找索引

> ID：13596517
> 
> 赞同：2
> 
> 时间：2012-11-28T01:54:37.713
> 
> 标签：jquery, indexing, css-selectors

我有多个具有相同类名的 div 可以动态填充容器。

```
<div class="container">
<div class="content cancel"><button class="showModal"></button></div>
<div class="content cancel"><button class="showModal"></button></div>
<div class="content cancel"><button class="showModal"></button></div>
<div class="content cancel"><button class="showModal"></button></div>
<div class="content cancel"><button class="showModal"></button></div>
</div> 
```

每个 div.content 都有一个显示 jqueryUI 对话框的按钮。模式启动后，它有两个按钮用于保存和取消。如果单击取消，则警报将显示启动模式的 div 的索引位置，并从启动它的 div.content 容器中删除类“cancel”。

```
<div class="modal">
<button class="save">save</button>
<button class="RemoveCancel">cancel</button>
</div> 
```

这是我的jQuery

```
$(".modal").on("click", ".RemoveCancel", function () {

    var parent = $(this).closest(".content");
    var modalTest = $(".content").index(parent);
    $("div.content:nth-child(" + (modalTest + 1) + ")").removeClass("cancel");
    alert("div.content:nth-child(" + (modalTest + 1) + ")");
}); 
```

对于模态

```
$(function () {
    $(".modal").dialog({
        autoOpen: false,
        height: 140,
        modal: true
    });

 $(".showModal").live('click', function () {
        $(".modal").dialog("open");
        return false;
    });

    $(".save, .RemoveCancel").live('click', function () {
        $(".modal").dialog("close");
        return false;
    });
}); 
```

感谢您的任何输入，目前我得到的警报值为 -1。如果我省略了索引选择器，它将显示许多 div 在索引之外。我希望这是有道理的，再次感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:08:49.310

我会重组你的代码。这是我想出的框架。我认为您可以利用它来满足您的需求。

[http://jsfiddle.net/v4dtL/](http://jsfiddle.net/v4dtL/)

一些东西：

不要使用`live`. 它已被弃用。使用`on`或`delegate`代替。

向单击的元素添加一个名为 modalized 的类。这使您可以跟踪谁启动了模式窗口，而无需进行任何时髦的 DOM 遍历。

使用 jQuery`index`找出被点击元素相对于其兄弟元素的索引。

```
//when showmodal is clicked, add modalized class to the clicked element
$(".container").on('click', '.showModal', function() {
    $(".modal").show();
    $(this).addClass('modalized');
});

//I broke save and removecancel into separate event handlers so that they don't step on each others toes (order of operations)
$(".modal").on('click', '.save', function() {
    $(".modal").hide();
    $('.modalized').removeClass('modalized');
});

//Use Index() to find the modalized element in relation to its siblings
$(".modal").on("click", ".RemoveCancel", function() {        
    var index = $('.showModal').index($('.modalized'));
    alert(index);
    $(".modal").hide();    
    $('.modalized').removeClass('modalized');
});

​ 
```

jQuery 的`data`对象允许您在元素上存储信息。所以你可以做这样的事情。未经测试。

```
$('.showModal').click( function() {
      //store clicked index
      var index = $(this).siblings().index($(this));
      $('.modal').show().data('clickedIndex', index);
});

$('.cancel').click( function() {
      //retrieve clicked index
      var index = $(this).closest('.modal').data('clickedIndex');
      alert(index);
      //get all showmodal buttons, but grab the one with matching index
      $('.showModal')[index].removeClass('foo');
}); 
```

# vb.net - 在 Visual Basic 中对文件扩展名进行排序

> ID：13596519
> 
> 赞同：0
> 
> 时间：2012-11-28T01:54:52.403
> 
> 标签：vb.net

```
For Each File As String In My.Computer.FileSystem.GetFiles(Line, FileIO.SearchOption.SearchTopLevelOnly, "*.txt|*.docx")

Next 
```

以这种方式进行 OR 扩展是否正确？我只需要获取`txt`和`docx`文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:33:17.800

如果您查看此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/ab4b5290-49db-40c9-9e12-f2ab37db7d3b/)，它建议使用数组来保存这样的文件扩展名。使用像你这样的 Or 语句会给你一个错误。

```
Dim line As String = "C:\Temp"
Dim extension(1) As String
extension(0) = "*.txt"
extension(1) = "*.docx"

For Each File As String In My.Computer.FileSystem.GetFiles(Line, FileIO.SearchOption.SearchTopLevelOnly, extension)

Next 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-01-22T13:30:13.463

```
 Dim extension As New List(Of String)
    extension.Add("*.avi")
    extension.Add("*.mkv")
    extension.Add("*.wmv")
    extension.Add("*.mp4") 
```

对于 My.Computer.FileSystem.GetFiles("c:\yourPath", FileIO.SearchOption.SearchAllSubDirectories, extension.ToArray) 中的每个 F

' 做

下一个

# android - 如何让我的 android 按钮布局下降？

> ID：13596523
> 
> 赞同：1
> 
> 时间：2012-11-28T01:55:01.967
> 
> 标签：android

我目前正在制作俄罗斯方块游戏，游戏将使用 android 图像按钮作为对象。每次设备倾斜时，此游戏将利用 android 加速度计使按钮向左或向右移动。传感器更改功能已经很好地工作了，我可以水平移动按钮。问题是当我尝试向下移动按钮时，它根本不动。有人知道这个问题吗？这是我的代码：

```
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)
        return;
   // System.out.println((int)event.values[0]);
    int mMovement=(int)event.values[0];
    if(mMovement>prevMove&onMove==false&test.getLeft()-40>=0){
        test.layout(test.getLeft()-40, test.getTop()+1, test.getRight()-40, test.getBottom()+1);
        prevMove=mMovement;
    }
    else if(mMovement<prevMove&onMove==false&test.getRight()+40<=320){
        test.layout(test.getLeft()+40, test.getTop()+1, test.getRight()+40, test.getBottom()+1);
        prevMove=mMovement;
    }
}

public void downdowndown(){
    System.out.println(test.getBottom());
    while(test.getBottom()<480){
        test.layout(test.getLeft(), test.getTop()+40, test.getRight(), test.getBottom()+40);
    }
}` 
```

test 是按钮变量，称为 downdowndown onCreate();。+1 onsensorchanged 也在这里工作，我不知道为什么 downdowndown 根本没有移动我的按钮..

# symfony - 如何在 Symfony 2.1 中获得登录表单 CSRF 保护？

> ID：13596529
> 
> 赞同：1
> 
> 时间：2012-11-28T01:55:53.057
> 
> 标签：symfony, csrf, symfony-2.1, symfony-forms

我似乎无法让登录表单 CSRF 保护使用 Symfony 2.1 愉快地工作。

在 config.yml 中，csrf_protection 设置为 true。登录表单正在呈现一个名为“form[_token]”的隐藏输入。在 security.yml 中：

```
csrf_parameter: form[_token]
intention: authenticate 
```

使用此配置，我可以毫无问题地登录。但是没有检查 CSRF 令牌。我通过在提交表单之前删除隐藏的输入字段来确认这一点：

```
<input type="hidden" id="form__token" name="form[_token]" value="9b2f5d5efabb938ff8d83c2c8318db1377a3ef16"> 
```

如果我将 csrf_provider 配置设置添加到 security.yml，我将无法再登录，收到错误“Invalid CSRF token”

```
csrf_provider: form.csrf_provider 
```

我已经阅读了有关该主题的所有内容，但似乎没有任何内容可以正常工作-除了我在本文中阅读的内容：http: [//henrik.bjrnskov.dk/symfony2-cross-site-request-forgery/](http://henrik.bjrnskov.dk/symfony2-cross-site-request-forgery/)。这些东西似乎被拉进了 Symfony 之友：[https](https://github.com/FriendsOfSymfony/FOSUserBundle/pull/469) ://github.com/FriendsOfSymfony/FOSUserBundle/pull/469 ，我没有使用它。

该帖子指示您：

*   在 loginAction 中手动生成令牌：

    $csrfToken = $this->container->get('form.csrf_provider')->generateCsrfToken('authentication');

*   将其发送到视图

*   并在表单中手动呈现

这很烦人。

问题基本上归结为 - CSRF 保护是否应该在 Symfony 2.1 中仅使用配置设置的登录表单起作用，还是我需要修改我的 loginAction 和模板才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T15:37:32.570

您将错误的参数传递给 generateCsrfToken() 方法。它应该是“身份验证”，而不是“身份验证” - 这就是您获得无效令牌的原因。执行以下操作以使其工作：

```
secured_area:
    pattern: ^/
    form_login:
        csrf_provider: form.csrf_provider
        csrf_parameter: _csrf_token 
```

然后将以下值添加到登录控制器的响应中：

```
'csrf_token' => $this->container->get('form.csrf_provider')->generateCsrfToken('authenticate') 
```

最后在您的模板中：

```
<input type="hidden" name="_csrf_token" value="{{ csrf_token }}" /> 
```

使用 Symfony 2.3.1 测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:03:54.780

我遇到了同样的问题 - 当我发布表单时，我收到“无效的 csrf 令牌”错误。

我发现每个请求的 PHPSESSID 都不同。这导致了问题，因为 csrf 令牌是使用该 cookie 内容生成的。

解决方法：设置 cookie_secure: false

在您的 config.yml 中，或者只是从配置中删除该行（这可以在 framework -> session 下找到）

默认（true）设置在google chrome中没有造成任何问题，但是mozzila和其他浏览器引发了这个错误。

# ruby-on-rails - 以键为数组的散列 - 如何变成普通散列？

> ID：13596530
> 
> 赞同：0
> 
> 时间：2012-11-28T01:55:57.630
> 
> 标签：ruby-on-rails, ruby, hash, multiple-columns

我一直在使用 arel/rails 并想出了如何让我的 group by statement 正常工作。使用多列它会给出这样的输出

```
{["column1_value","column2_value","column3_value"]=>count,... etc ...} 
```

将其转换为多级哈希的最佳/最简单方法是什么？例如

```
{column1_value:{
  column2_value:{
   column3_value1: count,
   column3_value2: count
  }
  column2_value2:{ ...}
 }
 column2_value2: {....}
} 
```

我明白为什么结果是由数组键入的，但它并不是特别容易使用！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:19:24.143

或者，如果您更喜欢迭代方法：

```
a = {[:a, :b, :c]=> 1, [:a, :b, :d]=>2, [:a, :c, :e]=>3}

a.each_with_object({}) { |((*keys, l), v), m|
  keys.inject(m) {|mm, key|
    mm[key] ||= {}
  }[l] = v
}
# {:a=>{:b=>{:c=>1, :d=>2}, :c=>{:e=>3}}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:11:08.597

```
def hashify(array, value, hash)
  key = array.shift
  if array.empty?
    hash[key] = value
  else
    hashify(array, value, hash[key] ||= {})
  end
end

a = {[:a, :b, :c]=> 1, [:a, :b, :d]=>2, [:a, :c, :e]=>3}
h = {}
a.each { |k, v| hashify(k, v, h) }

h
# => {:a=>{:b=>{:c=>1, :d=>2}, :c=>{:e=>3}}} 
```

# bash - 如何使用 bash 工具搜索非 ASCII 字符？

> ID：13596531
> 
> 赞同：28
> 
> 时间：2012-11-28T01:56:07.743
> 
> 标签：bash, unicode, grep

我有一个大文本文件，其中包含一些使 LaTeX 崩溃的 unicode 字符。如何在 Linux bash 中使用 sed 等在文件中查找非 ASCII 字符？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-28T02:08:57.477

尝试：

```
nonascii() { LANG=C grep --color=always '[^ -~]\+'; } 
```

可以像这样使用：

```
printf 'ŨTF8\n' | nonascii 
```

内`[]` `^`是“不”的意思。所以`[^ -~]`表示不在空格和~之间的字符。因此，不包括控制字符，这匹配非 ASCII 字符，并且是一个更便携但稍微不太准确的版本`[^\x00-\x7f]`。该`\+`方法`1 or more`将获得多字节字符以在完整字符周围显示颜色，而不是散布在每个字节中，从而破坏多字节序列

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-28T02:00:20.907

试试这个命令：

```
grep -P '[^\x00-\x7f]' file 
```

# android - 使用 API 在 Android 应用中打开和编辑 PDF 文件

> ID：13596532
> 
> 赞同：9
> 
> 时间：2012-11-28T01:56:17.880
> 
> 标签：android, api, sqlite, pdf, edit

好的，这是我第一次在 android 中处理 pdf。

我有的：

*   具有 2 页的可编辑 PDF 文件（准确的表格，带有要打勾的括号，要评论的字段等）

我需要做什么：

*   将PDF存储在SD卡的某个位置（这样用户就不需要从任何服务器下载）

*   允许用户打开和编辑表单

*   将编辑好的内容保存到 SQLite

现在的问题是我不知道如何在我的应用程序中打开 PDF 文件以及如何允许用户编辑文件。我确实看透了：[Reading PDF from within an Android application](https://stackoverflow.com/questions/4646486/reading-pdf-from-within-an-android-application)

但是，我不知道如何允许用户编辑 PDF 文件。有人可以指导我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T23:49:52.560

它是开源的并且是为 unix/debian Linux 构建的，所以需要一些玩弄，但这是一个开始。

[http://pdfedit.cz/en/index.html](http://pdfedit.cz/en/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-01T12:00:45.273

你可以在这里使用像 Foxit 这样的 SDK [..](https://developers.foxitsoftware.com)

另一种方式是像[Qoppa](http://qoppa.com) pdf 或[MuPdf](http://mupdf.com)这样的库是免费的

# mysql - Mysql，有没有办法知道在多个条件WHERE中哪些条件返回true？

> ID：13596534
> 
> 赞同：0
> 
> 时间：2012-11-28T01:56:19.867
> 
> 标签：mysql, conditional-statements, where

在示例中

SELECT * FROM users WHERE first_name LIKE '%a%' OR last_name LIKE '%a%';

我需要知道哪个返回了 true？

我知道我可以运行单独的查询，但是有更优化的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:58:35.787

您可以像这样修改您的查询： `SELECT *,CASE WHEN <condition 1> THEN 1 ELSE 0 END as Cond1, .... FROM ...`并检查该列名称值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:01:24.717

你可以使用这样的东西，它实现了一个`CASE`语句：

```
SELECT firstname, lastname,
  case 
    when firstname LIKE '%a%' then 'firstname match' 
    when lastname LIKE '%a%' then 'last name match'
    else null
    end matchedcol
FROM users 
WHERE firstname LIKE '%a%' OR lastname LIKE '%a%'; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b074e/4)

# mysql - 您可以使用 Doctrine 2 DQL 加入子查询吗？

> ID：13596541
> 
> 赞同：2
> 
> 时间：2012-11-28T01:57:23.460
> 
> 标签：mysql, sql, doctrine-orm, dql

有没有办法在连接`WITH`子句中访问连接实体的关系？我试图避免使用`IN`带有子查询的子句。

**编辑：**或者有没有办法加入子查询而不是使用`IN`？

即确保连接对象的`t.final`值为1。

**试图避免这个查询**

```
SELECT o
FROM Entity\Order o
WHERE o.status = :orderStatus
AND o.id NOT IN (
  SELECT o2.id
  FROM Entity\ServiceRequest s
  JOIN s.order o2
  JOIN s.serviceType t
  WHERE s.status = :serviceStatus
  AND t.final = 1
) 
```

**重写尝试失败：** 无法访问`s.serviceType.final`

```
SELECT o
FROM Entity\Order o
LEFT JOIN o.serviceRequests s
    WITH s.status = :serviceStatus
    AND s.serviceType.final = 1
LEFT JOIN s.serviceType t
WHERE o.status = :orderStatus
AND COUNT(s) = 0 
```

**订单实体：**

```
<?php
namespace Entity;

/**
 * @Entity(repositoryClass="Repository\Order")
 * @Table(name="orders")
 */
class Order
{
  const STATUS_REVIEW    = 0;
  const STATUS_PENDING   = 1;
  const STATUS_SCHEDULED = 2;
  const STATUS_COMPLETE  = 3;

  /**
   * @Id
   * @Column(type="integer")
   * @GeneratedValue
   *
   * @var int
   */
  protected $id;

  /**
   * @ManyToOne(targetEntity="Invoice")
   *
   * @var Invoice
   */
  protected $invoice;

  /**
   * @Column(type="integer")
   *
   * @var int
   */
  protected $status;

  /**
   * @Column(type="smallint", name="is_canceled")
   *
   * @var int
   */
  protected $isCanceled;

  /**
   * @OneToMany(targetEntity="ServiceRequest", mappedBy="order")
   *
   * @var ServiceRequest[]
   */
  protected $serviceRequests;

  /**
   * @return int
   */
  public function getId()
  {
    return $this->id;
  }

  /**
   * @return \Entity\Invoice
   */
  public function getInvoice()
  {
    return $this->invoice;
  }

  /**
   * @return int
   *
   * @uses \Entity\Order::STATUS_REVIEW
   * @uses \Entity\Order::STATUS_PENDING
   * @uses \Entity\Order::STATUS_SCHEDULED
   * @uses \Entity\Order::STATUS_COMPLETE
   */
  public function getStatus()
  {
    return $this->status;
  }

  /**
   * @param int $status
   *
   * @uses \Entity\Order::STATUS_REVIEW
   * @uses \Entity\Order::STATUS_PENDING
   * @uses \Entity\Order::STATUS_SCHEDULED
   * @uses \Entity\Order::STATUS_COMPLETE
   */
  public function setStatus($status)
  {
    $this->status = $status;
  }

  /**
   * @return int
   */
  public function getIsCanceled()
  {
    return $this->isCanceled;
  }

  public function cancel()
  {
    $this->isCanceled = 1;
  }

  /**
   * @return ServiceRequest[]
   */
  public function getServices()
  {
    return $this->services;
  }
} 
```

**服务请求实体：**

```
/**
 * @Entity
 * @Table(name="order_service_requests")
 */
class ServiceRequest
{
  const STATUS_REVIEW    = 0;
  const STATUS_PENDING   = 1;
  const STATUS_SCHEDULED = 2;
  const STATUS_COMPLETE  = 3;

  /**
   * @Id
   * @Column(type="integer")
   * @GeneratedValue
   *
   * @var int
   */
  protected $id;

  /**
   * @ManyToOne(targetEntity="Invoice")
   *
   * @var Invoice
   */
  protected $invoice;

  /**
   * @ManyToOne(targetEntity="ServiceType")
   * @JoinColumn(name="service_types_id")
   *
   * @var ServiceType
   */
  protected $serviceType;

  /**
   * @ManyToOne(targetEntity="Order")
   * @JoinColumn(name="orders_id")
   *
   * @var Order
   */
  protected $order;

  /**
   * @Column(type="integer")
   *
   * @var int
   */
  protected $status;

  /**
   * @Column(type="smallint", name="is_canceled")
   *
   * @var int
   */
  protected $isCanceled;

  /**
   * @return int
   */
  public function getId()
  {
    return $this->id;
  }

  /**
   * @return \Entity\Invoice
   */
  public function getInvoice()
  {
    return $this->invoice;
  }

  /**
   * @return int
   *
   * @uses \Entity\ServiceRequest::STATUS_REVIEW
   * @uses \Entity\ServiceRequest::STATUS_PENDING
   * @uses \Entity\ServiceRequest::STATUS_SCHEDULED
   * @uses \Entity\ServiceRequest::STATUS_COMPLETE
   */
  public function getStatus()
  {
    return $this->status;
  }

  /**
   * @param int $status
   *
   * @uses \Entity\ServiceRequest::STATUS_REVIEW
   * @uses \Entity\ServiceRequest::STATUS_PENDING
   * @uses \Entity\ServiceRequest::STATUS_SCHEDULED
   * @uses \Entity\ServiceRequest::STATUS_COMPLETE
   */
  public function setStatus($status)
  {
    $this->status = $status;
  }

  /**
   * @return \Entity\ServiceType
   */
  public function getServiceType()
  {
    return $this->serviceType;
  }

  /**
   * @return int
   */
  public function isCanceled()
  {
    return $this->isCanceled;
  }

  public function getOrder()
  {
    return $this->order;
  }
} 
```

**服务类型实体：**

```
<?php
namespace Entity;

/**
 * @Entity
 * @Table(name="service_types")
 */
class ServiceType
{
  /**
   * @Id
   * @Column(type="integer")
   * @GeneratedValue
   *
   * @var int
   */
  protected $id;

  /**
   * @Column(type="smallint")
   *
   * @var int
   */
  protected $final;

  /**
   * @return int
   */
  public function getId()
  {
    return $this->id;
  }

  /**
   * @return int
   */
  public function getFinal()
  {
    return $this->final;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:59:59.610

您在加入之前查询服务类型。尝试：

```
SELECT o
FROM Entity\Order o
LEFT JOIN o.serviceRequests s
  WITH s.status = :serviceStatus
LEFT JOIN s.serviceType t
WHERE o.status = :orderStatus
AND COUNT(s) = 0
AND t.final = 1 
```

# javascript - onclick 重定向到不同的 url

> ID：13596544
> 
> 赞同：1
> 
> 时间：2012-11-28T01:57:39.983
> 
> 标签：javascript

我正在创建一个下拉菜单，将用户推送到选定的 url。在列表中，我有几个设置为 0 的值，用于列表中的标题。我已将它们设置为 0，因此它们什么也不做。

这适用于列表中的第一个值为 0 但其他值为 0 的人仍将浏览器重定向到具有相同域和最后 /0 的新网站？我错过了什么？

```
<select onchange="if (this.selectedIndex > 0) document.location.href=this.value;">
<option value="0" selected="selected">More...</option>
<option value="0">----- Locations  -----</option>
<option value="http://www.location1.com/">location1</option>
<option value="http://www.location2.com/">location2</option>
<option value="http://www.location3.com/">location3</option>
<option value="0">----- Other Locations  -----</option>
<option value="http://www.olocation1.com/">olocation1</option>
<option value="http://www.olocation2.com/">olocation2</option>
<option value="http://www.olocation3.com/">olocation3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:01:31.743

将您的代码更改为：

```
<select onchange="if (this[this.selectedIndex].value !== '0') document.location.href=this.value;">
<option value="0" selected="selected">More...</option>
<option value="0">----- Locations  -----</option>
<option value="http://www.location1.com/">location1</option>
<option value="http://www.location2.com/">location2</option>
<option value="http://www.location3.com/">location3</option>
<option value="0">----- Other Locations  -----</option>
<option value="http://www.olocation1.com/">olocation1</option>
<option value="http://www.olocation2.com/">olocation2</option>
<option value="http://www.olocation3.com/">olocation3</option>
</select>​ 
```

演示：http: [//jsfiddle.net/pratik136/kWHXX/](http://jsfiddle.net/pratik136/kWHXX/)

## 为什么？

你的代码：

```
onchange="if (this.selectedIndex > 0) document.location.href=this.value;" 
```

正在检查列表`index`中选定`option`的 。现在，由于列表索引从开始，因此选择第一个（或第0^(索引)）项目`0`时，您会得到预期的结果。但是所有其他项目都通过了测试并被重定向。^(`selectedIndex > 0`)

使用

```
onchange="if (this[this.selectedIndex].value !== '0') document.location.href=this.value;" 
```

基本上检查`value`selected`index`的 ，如果是`value !== '0'`，它会重定向到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T01:59:56.447

您将它们重定向到 url `0`，它解释为`/0`. `"0"`您可能想通过使用类似的东西来检查以确保该值不是`this.value !== "0"`.

# php - Zend Framework 2 - 在视图中调用动作

> ID：13596547
> 
> 赞同：2
> 
> 时间：2012-11-28T01:58:07.123
> 
> 标签：php, model-view-controller, zend-framework2

> **可能重复：**
> [如何在 ZF2 中使用 ZF1 $this->action？](https://stackoverflow.com/questions/12758561/how-can-i-use-zf1-this-action-in-zf2)

我从几年前就开始使用 PHP，我非常了解 OOP，但我是 Zend Framework 2 的新手，我在它的概念上遇到了一些麻烦。

我正在尝试开发一个网站，已经完成，但现在使用 ZF2。

我最大的问题之一是布局/视图（我已经知道它们之间的区别）。

在该网站中，有一个动态生成的侧边栏菜单（从 DB 中提取的内容......让我们在 CategoriesController 中调用 sideBarGenAction）。而且我需要在每个页面（布局模板内）中显示它。所以，这就是我的疑问：如何做到这一点，而不在每个其他动作中调用那个动作（sideBarGenAction）？

如果侧边栏有静态内容，我可以使用 $this->partial，但它有动态内容，并且需要传递部分变量。

我想我可以创建一个 ViewHelper，但它没有多大意义（因为它不是一个小部件，它是一个模型内的业务规则......如果我必须为我需要的所有内容创建一个 ViewHelper称为“视图内”，我不需要 MVC 框架）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:57:02.393

因此，您的模型应该具有可重用的单元可测试方法来获取数据片段，可以是字符串、对象、数组等。这是正确处理数据的逻辑，因此它可以以有意义的方式使用，而且可以是单元测试。

在控制器中，您实例化该模型的一个实例，并使用您需要的方法来获取您想要使用的数据。然后你将它传递给视图。现在这可以在操作本身中，或者，您可以创建一个可重用的方法来执行此操作并返回数据，以便其他操作也可以使用它。如果这也可以在其他控制器中使用，那么您可能应该创建一个控制器使用的动作助手......你明白了......有很多方法可以构建相同的东西，具体取决于您对可重用代码的关注程度。

要将数据从控制器传递到 zf1 中的视图，您需要这样做

```
$this->view->whateverItIsCalled = $someValueOrArrayTypeThing; 
```

然后在视图中使用它，回显它等等，比如`$this->whateverItIsCalled.`

在zf2中是这样的

```
namespace Content\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class ArticleController extends AbstractActionController
{
    public function viewAction()
    {
        // get the article from the persistence layer, etc...

        $view = new ViewModel();

        $articleView = new ViewModel(array('article' => $article));
        $articleView->setTemplate('content/article');

        $primarySidebarView = new ViewModel();
        $primarySidebarView->setTemplate('content/main-sidebar');

        $secondarySidebarView = new ViewModel();
        $secondarySidebarView->setTemplate('content/secondary-sidebar');

        $sidebarBlockView = new ViewModel();
        $sidebarBlockView->setTemplate('content/block');

        $secondarySidebarView->addChild($sidebarBlockView, 'block');

        $view->addChild($articleView, 'article')
             ->addChild($primarySidebarView, 'sidebar_primary')
             ->addChild($secondarySidebarView, 'sidebar_secondary');

        return $view;
    }
} 
```

并且视图将像您之前在 zf1 中使用的东西一样使用它，例如

```
<?php // "content/article" template ?>
<div class="row content">
    <?php echo $this->article ?>

    <?php echo $this->sidebar_primary ?>

    <?php echo $this->sidebar_secondary ?>
</div>

<?php // "content/article" template ?>
    <!-- This is from the $articleView View Model, and the "content/article"
         template -->
    <article class="span8">
        <?php echo $this->escapeHtml('article') ?>
    </article>

<?php // "content/main-sidebar" template ?>
    <!-- This is from the $primarySidebarView View Model, and the
         "content/main-sidebar" template -->
    <div class="span2 sidebar">
        sidebar content...
    </div>

<?php // "content/secondary-sidebar template ?>
    <!-- This is from the $secondarySidebarView View Model, and the
         "content/secondary-sidebar" template -->
    <div class="span2 sidebar pull-right">
        <?php echo $this->block ?>
    </div>

<?php // "content/block template ?>
        <!-- This is from the $sidebarBlockView View Model, and the
            "content/block" template -->
        <div class="block">
            block content...
        </div> 
```

您可以看到您如何实例化一个新的视图模型，然后不仅将内容传递给视图，还可以指定更具体的部分，这是不同的。

无论如何，希望对你有所帮助。基本上，长话短说，ZF2 比 ZF1 提高了性能有几个原因，但减少开销是一个重要的原因。很多框架，事实上，大多数都是这样做的，因为你只在需要时才需要它。

# html - 在链接中隐藏 .html 扩展名

> ID：13596550
> 
> 赞同：2
> 
> 时间：2012-11-28T01:58:31.437
> 
> 标签：html, hyperlink, hide

假设我在 public_html/index.html 上有一个这样的链接：

```
<a href="pictures/index.html">Link to picture</a> 
```

由于“图片链接”有自己的文件夹并使用 index.html，因此如果我输入“www.mywebsite.com/pictures”，通常会隐藏该扩展名。但如果我先访问“www.mywebsite.com”，然后单击该链接，它会在地址栏中显示为“www.mywebsite.com/pictures/index.html”。如何隐藏链接中的“index.html”？我已经尝试过了，但它不起作用：

```
<a href="pictures/">Link to picture</a> <---this simply opens the file directory 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:01:50.520

将以下内容添加到您的`httpd.conf`文件中：

```
DirectoryIndex index.html 
```

默认情况下，如果你不传入文件名`index.html`而不是目录内容

# ruby-on-rails - 如何使用内联 javascript HAML 编写多行 if/else 语句？

> ID：13596557
> 
> 赞同：0
> 
> 时间：2012-11-28T01:59:01.540
> 
> 标签：ruby-on-rails, haml

我基本上是在尝试根据从服务器输入的数据生成 jQuery 效果。我尝试了多种方法，但结果不正确

```
:javascript
  "#{if @user.nil?}"
    $('#test-container').show();
  "#{end}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:35:16.610

的内容`#{...}`需要是单个表达式，并且允许跨越多行。在内部`#{...}`，您可以简单地通过引用它们来使用文字字符串，并且您不需要在整个内容周围加上引号。

```
:javascript
  #{if @user.nil?
  "$('#test-container').show();"
  end} 
```

在这种情况下，您可以将其作为一行来执行：

```
:javascript
  #{"$('#test-container').show();" if @user.nil?} 
```

通常，您希望避免像第一个示例中那样复杂的多行插值块。如有必要，您应该考虑创建帮助程序以使您的视图简单易懂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:07:06.007

这行得通吗？

```
- unless @user
  :javascript
    $('#test-container').show(); 
```

# python - 捕获通过 gunicorn 运行的 python 标准输出

> ID：13596558
> 
> 赞同：3
> 
> 时间：2012-11-28T01:59:09.987
> 
> 标签：python, linux, terminal, flask, gunicorn

我有一个烧瓶应用程序，可以为我提供如下输出 `127.0.0.1 - - [27/Nov/2012 20:56:33] "GET / HTTP/1.1" 200 -`

如何将此写入文件？我知道我可以跑步`python app.py > blah.log`，但是我如何在 gunicorn 跑步时做同样的事情呢？谁在输出？我注意到查看 gunicorn 的日志，它只有关于启动的信息，而不是关于实际 http 请求的信息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:27:41.370

想通了我的问题。我正在寻找烧瓶上的日志记录页面：http: [//flask.pocoo.org/docs/errorhandling/](http://flask.pocoo.org/docs/errorhandling/)

我在阅读本文时错过的是错误仅在*生产*模式下记录到文件中。

# php - 包含在一个while循环中

> ID：13596562
> 
> 赞同：5
> 
> 时间：2012-11-28T01:59:35.977
> 
> 标签：php, mysql

我确信我无法解决这个问题是由于缺乏对 php 某些方面的了解，但我已经尝试解决它一个月了，但没有运气。这是问题的简化版本。

在我的数据库中，我有一个 members 表、一个 childrens 表（每个成员的孩子）和一个朋友请求表（其中包含孩子们发送给彼此的朋友请求）。

我正在尝试做的是使用以下while循环显示特定父母的孩子......

```
$query = "SELECT * From children " . <br>
         "WHERE parent_member_id = $member_id";     <br>  
$result = mysql_query($query) <br>
      or die(mysql_error());<br>
$num_children = mysql_num_rows($result);<br>
echo $num_children;<br>
while($row = mysql_fetch_array($result)){<br>
   $first_name = $row['first_name'];<br>
   $child_id = $row['child_id'];<br>

<div>echo $first_name<br>

} 
```

这个while循环完美地工作并显示类似这样的东西......

**1) 肯尼斯
2) 拉里**

我正在尝试做的也是显示每个孩子在他们的名字旁边有多少朋友请求......就像这样

**肯尼斯 (2)
拉里 (5)**

为此，我尝试对原始的 while 循环进行以下修改...

```
$query = "SELECT * From children " .<br>
         "WHERE parent_member_id = $member_id";<br>

$result = mysql_query($query) <br>
      or die(mysql_error());<br>
$num_movies = mysql_num_rows($result);<br>
echo $num_movies;<br>
while($row = mysql_fetch_array($result)){<br>

   $first_name = $row['first_name'];<br>
   $child_id = $row['child_id'];<br>

echo $first_name; include('counting_friend_requests.php') ;

} 
```

在这个版本中，包含的脚本看起来像这样......

```
$query = "SELECT <br>children.age,children.child_id,children.functioning_level,children.gender,children.parent_member_id,children.photo, children.first_name,friend_requests.request_id " .
         "FROM children, friend_requests " .
         "WHERE children.child_id = friend_requests.friend_two " .
         "AND friend_requests.friend_one = $child_id"; <br>

$result = mysql_query($query)<br>
  or die(mysql_error());<br>
$count = mysql_num_rows($result);<br>
if ($count==0)<br>
  {<br>
  $color = "";<br>
  }<br>
else<br>
  {<br>
  $color = "red";<br>
  }<br>
echo span style='color:$color' ;<br>
echo $count;<br>
echo /span;<br> 
```

这个while循环再次开始工作，但包含的文件导致循环在返回第一条记录后停止并产生以下输出......

**肯尼斯 (2)**

所以我的问题是，有没有办法在不中断 while 循环的情况下显示我想要的结果？如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:08:50.387

避免像瘟疫一样在代码中执行子查询，因为它会随着记录数量的增加而拖累你的数据库引擎；思考`<members> + 1`查询。

您可以像这样创建查询以直接获得所需的结果（未经测试）：

```
SELECT child_id, first_name, COUNT(friend_two) AS nr_of_requests
From children
LEFT JOIN friend_requests ON friend_one = child_id OR friend_two = child_id
WHERE parent_member_id = $member_id
GROUP BY child_id, first_name; 
```

它根据任一朋友列连接`children`表记录；`friend_requests`然后它根据 进行分组`child_id`来完成`count()`工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:20:46.527

只是为了澄清这里发生的事情。

解析脚本时完成“包含”处理。本质上它只是将包含文件中的文本复制到当前文件中。完成此操作后，将解析逻辑。

您应该将任何包含语句与您的主要逻辑分开。在大多数情况下，“包含”代码将包含一个或多个函数的定义。然后，您可以从程序主体的适当位置调用这些函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:05:44.787

您不需要在每次循环时都包含 php 文件。尝试创建一个具有 getFriendRequestCount() 方法的 Person 类。这种方法可以对所有的数据库。这也意味着您可以创建诸如 getGriendRequests() 之类的方法，该方法可以返回好友请求、姓名等数组。然后您可以使用 count($myPerson->getFriendRequests()) 来获取数字。数以千计的选择！

一个很好的起点，[http ://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

另一个简单类的例子，[http ://edrackham.com/php/php-class-tutorial/](http://edrackham.com/php/php-class-tutorial/)

例如。

```
include ('class.Person.php');  
while(loop through members)
    $p = new Person(member_id)
    echo $p->getName()
    echo $p->getFriendRequestCount()
    foreach($p->getFriendRequests as $fr)
         echo $fr['Name'] 
```

在您的 Person 类中，您希望有一个构造函数，该构造函数从数据库中获取成员并将其保存到私有变量中。然后，您的函数可以访问该变量，以对该成员进行 SQL 查询。

# graph - 图中的割集

> ID：13596565
> 
> 赞同：0
> 
> 时间：2012-11-28T01:59:58.637
> 
> 标签：graph, theory

我对网络中的最大流量有疑问。我试图在图表中找到一个可以断开源和目标的割集。我探索了图中从源到目的地的所有边缘独立路径。接下来，我从这些路径中的每一个中挑选一个边缘并将它们组合在一起。所以基本上我列举了从每条路径中获取一条边的所有可能组合。所以我有一组这样的组。这是否意味着我最终找到了该特定源和目标的网络切割集？这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:06:04.743

这听起来像是指数级的复杂性。我不能确切地说，因为我不知道“所有边缘独立路径”是什么意思。例如：

```
 A
   |
   B
  / \
 C   D
  \ /
   E 
```

从 A 到 E 有两条路径，但它们不是边缘独立的。

图上的最大流与[最小割](https://en.wikipedia.org/wiki/Minimum_cut)是对偶的，并且有很多标准算法可以在（小）多项式时间内找到一个。如果您对任何切割都满意，只需删除所有边缘 - 这会在 O(E) 时间内运行。

你的限制是什么？

# javascript - 多维数组的问题

> ID：13596575
> 
> 赞同：3
> 
> 时间：2012-11-28T02:00:40.103
> 
> 标签：javascript, multidimensional-array, tracking

我遇到了这个该死的数组的问题。这是为了发布我的信息，看起来像这样。任何想法如何解决这一问题？

```
prdpr=10.95^TBCC9^2^Shoes
prdsku=2.50^TDxa2^1^Pants
prdqn=7.50^Tasds^1^Hats
prdcatid=undefined^undefined^undefined^undefined 
```

它应该是这样的：

```
prdpr=10.95^2.50^7.50
prdsku=TBCC9^TDxa2^Tasds
prdqn=2^1^1
prdcatid=Shoes^Pants^Hats 
```

稍后我会串起来作为一个 URL

```
var advid = "xxx";
var oid = "xxx";
var amt = "20.95";

// This array I cannot mess with, this is just an example
var OrderDetails = new Array();
OrderDetails[0] = ['10.95','2.50','7.50'];
OrderDetails[1] = ['TBCC9','TDxa2','Tasds'];
OrderDetails[2] = ['2','1','1'];
OrderDetails[3] = ['Shoes','Pants','Hats'];

var prdpr = '';
var prdsku = '';
var prdqn = '';
var prdcatid = '';

for(var x = 0; x < OrderDetails.length; x++) {
    var delim = "";
    if(x == 0){
        delim = "";
    }  else{
        delim = "^";
    }

    prdsku += delim + OrderDetails[x][0];
    prdpr += delim + OrderDetails[x][1];
    prdqn += delim + OrderDetails[x][2];
    prdcatid += delim + OrderDetails[x][3];
}

var output = '<div>Product Sku=' + prdsku + 'Item Cost=' + prdpr + 'Quanty=' + prdqn + 'Category=' + prdcatid + '</div>';
document.write(output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:07:57.297

```
var OrderDetails = new Array();
OrderDetails[0] = ['10.95','2.50','7.50'];
OrderDetails[1] = ['TBCC9','TDxa2','Tasds'];
OrderDetails[2] = ['2','1','1'];
OrderDetails[3] = ['Shoes','Pants','Hats'];

var delim = '^';

var prdpr = OrderDetails[0].join(delim);
var prdsku = OrderDetails[1].join(delim);
var prdqn = OrderDetails[2].join(delim);
var prdcatid = OrderDetails[3].join(delim); 
```

# c# - 将字节数组从 c++ 传递到 ac# 程序集有哪些不同的方法？

> ID：13596576
> 
> 赞同：1
> 
> 时间：2012-11-28T02:00:44.160
> 
> 标签：c#, c++, pinvoke

我想知道可用于将字节数组从 c++ 传递到 c# 的不同方法及其性能特征。理想情况下，我希望将指向非托管堆中的字节数组的指针传递给 C# 程序集，并避免任何复制操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:48:22.637

假设您使用[Reverse P/Invoke](http://tigerang.blogspot.com/2008/09/reverse-pinvoke.html)之类的方法从非托管 C++ 调用 C# 方法，您只需传递指针即可。C# 代码应接受指针为`IntPtr`or `UIntPtr`，然后它可以将其视为非托管数组。

将指针传递给 C# 代码后，有多种方法可以访问该指针后面的数据。您可以使用[Unsafe Code 和 Pointers](http://msdn.microsoft.com/en-us/library/t2yzs44b.aspx)，如果您在单个字节上聚会，这可能是最高的性能。

如果要将其视为字节流，可以使用[UnmanagedMemoryStream](http://msdn.microsoft.com/en-us/library/system.io.unmanagedmemorystream.aspx)。

或者，您可以使用`Marshal.Copy`and `Marshal.Read`（许多变体）方法在该缓冲区内的不同区域读取不同的数据类型。

以上都不需要在 C++ 和 C# 代码之间复制指针本身以外的任何数据。

毫无疑问，还有其他我没有在上面列出的从 C# 访问内存的方法。它的要点是，以任何一种方式传递一个字节数组都是非常轻松的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:46:41.633

我认为您可以在 C++ 端使用指针，在 C# 端使用 ref。请参阅评论中提供的链接。

# c++ - 在 g++ 中使用未初始化的全局变量而不是 gcc 编译 C 程序时出现“值的多重定义”

> ID：13596577
> 
> 赞同：4
> 
> 时间：2012-11-28T02:00:47.133
> 
> 标签：c++, c, linker, compiler-errors, global-variables

我试图了解头文件中外部和全局变量声明的用法，所以我想出了以下用 C 编写的测试程序。

main.c 文件

```
//main.c
#include "global.h"
#include <stdio.h>

int nExternValue = 6;

int main(int argc, char* argv[])
{
    printf("%d \n", nValue);
    printf("%d \n", nExternValue);

    AddToValue();

    printf("%d \n", nValue);
    printf("%d \n", nExternValue);
} 
```

global.h 文件

```
#ifndef _GLOBAL_H
#define _GLOBAL_H

//WRONG! do not declare a variable here
int nValue;

//OK! extern variable makes it a global accessable variable
extern int nExternValue;

//OK! function prototype can be placed in h file
int AddToValue();

#endif 
```

和一个实现 AddToValue 函数的 AddValue.c 文件。

```
#include "global.h"

int AddToValue() {
    nValue++;
    nExternValue++;
} 
```

我使用 gcc 编译了应用程序，并运行了它：

```
$ gcc main.c AddValue.c -o test
$./test
0 
6 
1 
7 
```

我使用 g++ 编译了应用程序并得到以下链接器错误：

```
$ g++ main.c AddValue.c -o test
/tmp/ccFyGDYM.o:(.bss+0x0): multiple definition of `nValue'
/tmp/cc3ixXdu.o:(.bss+0x0): first defined here
collect2: ld returned 1 exit status 
```

为什么 gcc 链接器不产生错误？我虽然 nValue 变量会被声明多次，这会产生错误！

```
$ gcc --version
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:18:23.533

C 和 C++ 是不同的语言。举个例子，上面的程序是一个有效的 C 程序，但在格式错误的 C++ 程序中。您违反了 C++ 的单一定义规则。C中没有相应的规则。

使用 gcc 编译时，您将上述文本编译为 C 程序。使用 g++ 编译时，您将上述文本编译为 C++ 程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T02:23:28.517

使用 gcc 编译时，未初始化的全局变量（如 nValue）将被视为通用符号。在不同编译单元中出现的相同公共符号将在链接时合并。如果使用 g++ 编译（这意味着源程序将被视为 C++ 程序），未初始化的全局变量将被隐式初始化为默认值 0。由于 global.h 包含在多个源文件中，编译器将考虑符号 nValue 定义多次。

还请看看这篇文章： [为什么未初始化的全局变量是弱符号？](https://stackoverflow.com/questions/3691835/why-uninitialized-global-variable-is-weak-symbol)

# mysql - 使用 codeigniter 的 MySQL 查询（活动记录）

> ID：13596585
> 
> 赞同：3
> 
> 时间：2012-11-28T02:01:27.760
> 
> 标签：mysql, codeigniter, activerecord

我在codeigniter中使用以下查询：

```
$this->db->select('products.id,
                   categories.name as cat_name, 
                   products.name as name,
                   products.product_image,
                   products.description,
                   products.price,
                   products.furl,
                   products.on_sale,
                   products.quantity_in_stock,
                   products.product_code,
                   products.rating_1,
                   products.rating_2,
                   products.rating_3,
                   products.rating_4,
                   products.rating_5,
                   products.rated_by,
                   products.discount,
                   ((products.rating_1+products.rating_2,
                     products.rating_3,
                     products.rating_4,
                     products.rating_5)/rated_by  as calc)
'); 
```

检查 calc 附近的 sql 语法时出现错误。请解释问题的出处和原因。ps：我只是想在 order by 子句中使用 calc，如下所示：

```
$this->db->order_by('calc','desc');
$this->db->get(); 
```

更新：这是我在执行此查询时得到的：

```
Error Number: 1064 
```

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'as calc) FROM ( `products`) JOIN `categories`ON附近使用的正确语法`categories`。`id`= `products`.`ca' 在第 1 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:05:27.347

如果您要使用别名，那么您不希望 CodeIgnioter 自动在您的列名周围添加刻度，因为它会搞砸。只需设置 to 的第二个参数`select()`即可`false`关闭此行为：

```
$this->db->SELECT(  
                 'products.id,categories.name as cat_name,  
                  products.name as name,  
                  products.product_image,  
                  products.description,  
                  products.price,  
                  products.furl,  
                  products.on_sale,  
                  products.quantity_in_stock,  
                  products.product_code,  
                  products.rating_1,  
                  products.rating_2,  
                  products.rating_3,  
                  products.rating_4,  
                  products.rating_5,  
                  products.rated_by,  
                  products.discount,  
                  ((products.rating_1+products.rating_2,  
                    products.rating_3,products.rating_4,  
                    products.rating_5)/rated_by  as calc)', false)  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T11:02:39.767

是的，你是对的@John

```
$this->db->select('products.id,categories.name as cat_name, products.name as name,products.product_image,products.description,products.price,products.furl,products.on_sale,products.quantity_in_stock,products.product_code,products.rating_1,products.rating_2,products.rating_3,products.rating_4,products.rating_5,products.rated_by,products.discount,((products.rating_1+products.rating_2,products.rating_3,products.rating_4,products.rating_5)/rated_by  as calc)', false)  ; 
```

也为我工作

# c++ - 是否有任何树容器可以存储其中包含多个值的节点？

> ID：13596588
> 
> 赞同：0
> 
> 时间：2012-11-28T02:01:30.350
> 
> 标签：c++, tree, containers, nodes, treenode

我正在写一个 c++ 代码，它应该能够用我写的节点构造一个多树。但是我尝试使用在以下地址下载的树容器来存储我的节点，但所有这些似乎都无法存储其中包含多个值的节点。

[http://www.datasoftsolutions.net/tree_container_library/overview.php](http://www.datasoftsolutions.net/tree_container_library/overview.php)

[http://archive.gamedev.net/archive/reference/programming/features/coretree2/default.html](http://archive.gamedev.net/archive/reference/programming/features/coretree2/default.html)

```
struct node{    //construct the node
    char *dirname;
    char date[12];
    int loc;
    bool prot;
} 
```

那么是否有任何树容器可以存储我编写的节点？我需要将节点存储为多树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:44:22.950

我怀疑它与结构节点中的多个字段有什么关系。

存储在树中的任何数据类型都需要一些比较运算符。您需要弄清楚您尝试使用的库需要哪些库，然后为您的节点类型实现它们。我看了看文档。该包是用 C++ 编写的，使用模板，并且与 STL 兼容。所以它可能还需要某些类型定义，如 value_type 等......

向我们展示您收到的错误消息，我们可以解决。至少，您可能需要实现 operator< 和 operator!= 或等效项。

更新：为了搜索树（或将节点放入其中），您至少需要定义 operator<。错误消息告诉我们。您可能还需要 operator== 才能使其正常工作。试试这个（未经测试）：

```
#include <cstring>

bool operator< (const node& left, const node&right) {
    return 0 > strcmp(left.dirname, right.dirname);
}

bool operator== (const node& left, const node&right) {
    return 0 == strcmp(left.dirname, right.dirname);
} 
```

# wpf - MVVM 中的 UI 绑定验证

> ID：13596596
> 
> 赞同：2
> 
> 时间：2012-11-28T02:02:23.657
> 
> 标签：wpf, mvvm, validation

我正在使用`DataTemplate`s 将一些代码转换为更合适的 MVVM 实现，并且在某些类型的 UI 验证方面遇到问题。

我在视图模型中的验证没有任何问题——`IDataErrorInfo`已实现并且一切都很好。我遇到的问题是 UI 绑定错误，它们可能会将字母`TextBox`绑定到 int。

以前，我用过：

```
System.Windows.Controls.Validation.AddErrorHandler(userControl, handler) 
```

...并保留添加和删除的错误计数，以了解所有表单的数据是否正常。

但是现在我正在做 MVVM，我无权访问 userControl 来设置这个处理程序。所以我真的没有一个钩子来开始这个。

是否有某种全局`DataTemplateApplied`事件处理程序可用，我可以在其中执行以下操作：

```
void OnDataTemplateApplied(object data, Control template)
{
  if (data is MyViewModelBase)
  {
    Validation.AddErrorHandler(template, handler);
  }
} 
```

或者，也许我可以`AddErrorHandler`在外部 Shell 窗口的引导程序中调用一次，然后每次触发事件时以某种方式确定哪个 ViewModel 正在为该特定控件提供动力？

我知道有些人喜欢制作所有 VM 字段字符串并在 VM 中进行大量类型转换——由于各种原因，这对于我们的系统来说是不现实的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:55:20.193

您可能对此答案感兴趣：[https](https://stackoverflow.com/a/13335971/1094526) ://stackoverflow.com/a/13335971/1094526 主要思想正是您所说的（订阅错误处理程序）。据我了解，问题是您无法从 ViewModel 访问控件，但这并不难解决

在我正在工作的项目中，我从 ViewModel 中公开了两个方法：AddUIError 和 RemoveUIError。我在 View 中创建了一个事件处理程序，并将 DataContext 转换为 ViewModel 的类型，并根据发生的情况调用 AddUIError 或 RemoveUIError。我正在使用 DataTemplates 将 View 与 ViewModel 相关联，因此在应用模板时，DataContext 会自动设置为 ViewModel。如果需要，您可以将 ViewModel 存储在私有字段中（在视图中）并在每次 DataContext 更改时更新引用（有一个 DataContextChanged 事件）

如果这将在多个 ViewModel 中完成，您可以将这两个方法（AddUIError 和 RemoveUIError）放在 ViewModelBase 之类的类中，并将 ValidationError 事件处理移动到一个 Behavior 并在每个视图中使用它。

* * *

有关行为部分的更多信息：行为类是 Expression Blend SDK 的一部分，因此如果您想遵循这种方式，您将需要它。

例如，行为对于将一些通用功能附加到许多组件而无需创建派生类很有用。

首先，我们需要在一个名为 ViewModelBase 的类中定义 AddUIError 和 RemoveUIError（当然，它是所有其他 ViewModel 的基类）：

```
class ViewModelBase {
   public void AddUIError(...) {/* Details ommitted */ }
   public void RemoveUIError(...) {/* Details ommitted */ }
} 
```

然后，通过子类化 Behavior 创建一个 Behavior。我们使用 FrameworkElement 作为模板参数，因此可以将此行为附加到任何 FrameworkElement（或派生类）实例：

```
class NotifyDataErrorsBehavior : Behavior<FrameworkElement>
{
    // Called when the the Behavior is attached
    protected override void OnAttached()
    {
        base.OnAttached();
        // Initialize the handler for the Validation Error Event
        _handler = new RoutedEventHandler(OnValidationRaised);
        // Add the handler to the event from the element which is attaching this behavior
        AssociatedObject.AddHandler(System.Windows.Controls.Validation.ErrorEvent, _handler);
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        // Remove the event handler from the associated object
        AssociatedObject.RemoveHandler(System.Windows.Controls.Validation.ErrorEvent, _handler);
    }

    private RoutedEventHandler _handler = null;

    private void OnValidationRaised(object sender, RoutedEventArgs e)
    {
        var args = (System.Windows.Controls.ValidationErrorEventArgs)e;

        ViewModelBase viewModel = AssociatedObject.DataContext as ViewModelBase;
        if (viewModel != null)
        {
            // You can add only Exception validation errors if you want..

            if (args.Action == ValidationErrorEventAction.Added)
                viewModel.AddUIValidationError(...);
            else if (args.Action == ValidationErrorEventAction.Removed)
                viewModel.RemoveUIValidationError(...);
            else
                throw new NotSupportedException("ValidationErrorEventAction has changed");
        }
    }
} 
```

最后只在 XAML 中使用它： 1\. 添加对 NotifyDataErrorsBehavior 所在命名空间的引用，以及对 System.Windows.Interactivity 命名空间的引用（来自 Expression Blend SDK）：

```
<UserControl 
        ...
        xmlns:behavior="clr-namespace:MyApp.Behaviors"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        ...
> 
```

2\. 添加行为（与您的 UserControl 的内容处于同一级别：

```
<i:Interaction.Behaviors>
    <behavior:NotifyDataErrorsBehavior/>
</i:Interaction.Behaviors> 
```

前任：

```
<UserControl 
        ...
        xmlns:behavior="clr-namespace:MyApp.Behaviors"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        ...
>
    <i:Interaction.Behaviors>
       <behavior:NotifyDataErrorsBehavior/>
    </i:Interaction.Behaviors>
    <Grid>
       ...
    </Grid>
</UserControl> 
```

# android - 助手中有多个图书馆项目？

> ID：13596597
> 
> 赞同：3
> 
> 时间：2012-11-28T02:02:23.890
> 
> 标签：android, aide-ide

我正在尝试使用 Aide 从我的手机和平板电脑上处理我的 android 应用程序。我不断收到数百个错误。似乎一次只检测一个库项目。我可以通过删除一个库并添加一个不同的库来更改我得到的错误（我正在使用三个）

有没有人在助手中成功使用了多个项目库，并且可能能够提供一些帮助？

我的项目 。属性如下所示：

```
[Eclipse references (I think)]
android.library.reference.1=../../../../libraries/android-greendroid/GreenDroid
android.library.reference.2=../../../../libraries/ActionBarSherlock/library

[Aide references]
android.library.reference.1=/storage/extSdCard/code/android-actionbarsherlock/library
android.library.reference.1=/storage/extSdCard/code/android-facebook/facebook
android.library.reference.1=/storage/extSdCard/code/android-greendroid/GreenDroid
android.library.reference.1=/storage/extSdCard/code/android-actionbarsherlock/library
android.library.reference.1=/storage/extSdCard/code/myproject/android/free 
```

因此，助手引用都是 0.1，并且它们之间没有新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T23:04:13.780

我也遇到了同样的问题，并像在 eclipse 中一样修复了这个格式化引用。

像这样：

```
[Eclipse references]
android.library.reference.1=../../../../libraries/android-greendroid/GreenDroid       
android.library.reference.2=../../../../libraries/ActionBarSherlock/library

[Aide references]
android.library.reference.1=/storage/extSdCard/code/android-actionbarsherlock/library
android.library.reference.2=/storage/extSdCard/code/android-facebook/facebook
android.library.reference.3=/storage/extSdCard/code/android-greendroid/GreenDroid
android.library.reference.4=/storage/extSdCard/code/android-actionbarsherlock/library
android.library.reference.5=/storage/extSdCard/code/myproject/android/free 
```

您无法在 AIDE 中编辑 project.properties，因此请使用文本编辑并修复此问题。将输入放在正确的位置并固定参考号；）

# xcode - NSInvocation 问题

> ID：13596609
> 
> 赞同：0
> 
> 时间：2012-11-28T02:03:18.640
> 
> 标签：xcode, nsinvocation

因此，当我尝试从文件加载信息时遇到了一些问题。

```
myMutableArray=[[NSKeyedUnarchiver unarchiveObjectWithFile:dataFile]retain]; 
```

这是给我 NSinvocation 问题的行

> *** NSInvocation: 警告: 类 'myClass' 的对象 0xf9f500 没有实现 methodSignatureForSelector: -- 前面的麻烦
> 
> *** NSInvocation: 警告: 类 'myClass' 的对象 0xf9f500 没有实现 doesNotRecognizeSelector: -- 中止

我查看了其他问题和其他站点以尝试找到答案。myClass 确实继承自 NSObject，而我的客户视图控制器继承自 UIViewController。我的客户视图控制器实现了上面的代码。我从中加载的保存文件确实存在。不知道我需要为此做什么，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:23:13.927

所以我在 myClass 中遇到了一个问题，我没有对某些内容进行编码，但我试图在之后对其进行解码。我只需要添加一行代码并删除我的旧保存文件。

# javascript - 某些部分未加载到 ajax 请求的页面上

> ID：13596610
> 
> 赞同：1
> 
> 时间：2012-11-28T02:03:19.247
> 
> 标签：javascript, jquery, ajax

我建立了这个网站： http: [//newslist.ca/](http://newslist.ca/)

最近，我对其进行了更改，因此当您从下拉菜单中选择不同的内容时，页面会立即使用新的提要进行更新。但我注意到应该根据新内容加载的所有内容都不会加载。主要是：分享按钮，每篇文章的评论数？

我做错了什么，我该如何解决？

```
$('.ajax').change(function() {
  var url = "/?cat=" + $("select option:selected")[0].label + "&loc=" + $("select option:selected")[1].label + "&sort=" + $("select option:selected")[2].label;
  console.log(url);

  $.get(url, function (data) {
    $('body').empty();
    $('body').append(data);
  })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:26:03.190

当您完全刷新页面内容时，社交媒体图标不会加载，因为它们是通过等待文档正文完成加载并触发事件的 JavaScript 插入的。我的想法是您的评论计数方法正在使用类似的方法。Xymotech 上面关于使用 Ajax 将少量数据加载到页面而不是整个页面内容的评论是正确的；如果您决定重新访问 Ajax 方法，您很可能希望将评论计数加载为每个项目的数据并保留共享工具（即不要重新加载它们）。

# javascript - 在 Rails 应用程序中组织 javascript

> ID：13596613
> 
> 赞同：3
> 
> 时间：2012-11-28T02:03:33.837
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript

我的 Rails javascripts 目录中有几个 javascript（咖啡脚本）文件。代码在逻辑上分为不同的文件。但是，每个文件都以某些文件开头，`$(document).ready ->`并且某些文件共享通用的帮助函数。

分解辅助函数的最佳方法是什么？我是否应该将它们全部放在 application.js 中较早包含的其他文件中？

另外，按照我的方式划分代码是否正常，每个页面都在哪里`$(document).ready ->`？这是否意味着我的所有代码在每个页面上都被调用，无论它是否相关？这个组织有其他选择吗？

我不确定这个问题是特定于 Rails 还是与一般的 javascript 和 jQuery 相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:17:12.317

我确实认为这是一个 Rails 问题，而且是一个很好的问题。

Rails 中的正常范例，其中“全局”的东西进入`application.*`了资产管道有点混乱，因为 application.js 真的充当清单，而不是公共文件。当然你可以在那里添加东西，甚至`application.js.coffee`为你的通用代码创建一个。我决定创建一个名为`common.js.coffee`（在另一种情况下`shared.js.coffee`为 ）的文件，在我的情况下，该文件由`require_tree .`指令自动处理。

（根据@jonathan-tran 的评论更新）在某些情况下，您可能只希望在文档上调用的方法为所有页面准备好——例如，我使用它来使日期选择器可用于任何视图中的任何字段。相反，如果您希望方法（实际上是全局函数）可调用，则需要将咖啡脚本函数导出到变量，例如通过附加到`window`对象。您可以在共享文件中执行这两项操作。

`$(document).ready ->`确实，如果您使用生成器，您最终会得到每个控制器的文件，如果没有专门的代码，则会在编译资产时导致一系列冗余语句。因此，只需摆脱您不使用的那些。但是遵循分离特定于页面的功能的模式对我来说很有意义并且效果很好——我知道在哪里可以找到东西，随着项目的发展，这很有价值。

我在 Rails 中学到的另一条规则：顺其自然。如果这就是 Rails 的做法，那可能是一个好方法。他们确实考虑过这些事情。不要修复有效的方法:-)

# javascript - 如何使用 JavaScript 包含/添加多个计算？

> ID：13596619
> 
> 赞同：1
> 
> 时间：2012-11-28T02:04:16.643
> 
> 标签：javascript, html, css, calculator

预先警告，我是 JavaScript 新手，但我可以理解已经编写好的计算，这是我自己编写的问题。我正在尝试为我们的网站创建一个在线税收计算器。我找到了工作的基础，但我需要更新它，以便计算正确。

**目标：**
用户输入他们的总收入并点击“计算”按钮。结果应显示应付税款、医疗保险税，最后是净收入。净额 = 总税 - 医疗保险。

**我在哪里：**
我发现了一些代码可以工作，这些代码为我提供了一些税收计算，我已将其更新为正确的值。但是，目前适用于所有税级的医疗保险价值 (1.5%) 是不正确的，实际上也有 3 个不同的级别。

***我不确定如何将这两个计算合并在一起，然后从总收入中扣除这些计算得出净结果？我没有添加任何东西来进行最终计算，在这个阶段，我正在尝试解决如何在一个脚本中执行多个功能。***

我试图通过一次进行一项计算来逐步建立这一点，但一尝试就被难住了。我在[http://www.faa.net.au/test/](http://www.faa.net.au/test/)创建了一个测试页面。

我真的很感激这方面的任何帮助。我正在等待 JavaScript 指南，以便真正抽出一些时间并正确学习 JavaScript。

我试图添加的额外医疗保险计算如下：

```
// Calculation below needs to replace Medicare above
if (income>0 && income<=19404) {
    medicare = (income*0)/100;
}
else if (income>19404 && income<=22828) {
    medicare = (income*10)/100;
}
else if (income>22828) {
    medicare = (income*1.5)/100;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:26:53.387

您需要的 javascript 代码与此类似，我相信：

```
// I am using a javascript library called jQuery.
$(function(){
    // On clicking the Calculate button
    $('#calculate').on('click', function(){
        // Get the value of user supplied income from the textbox
        var income = parseInt($('#preIncome').val().trim()),
            postIncome = 0,
            medicare = 0;
        console.log(income);
        if(income > 0){
            // Calculation below needs to replace Medicare above
            if (income>0 && income<=19404) {
                medicare = (income*0)/100;
            }
            else if (income>19404 && income<=22828) {
                medicare = (income*10)/100;
            }
            else if (income>22828) {
                medicare = (income*1.5)/100;
            }
            // Calculate the new income based on derived medicare value
            postIncome = income - medicare;
        }
        // Set the new medicare and income values to the textboxes
        $('#postIncome').val(postIncome);
        $('#medicare').val(medicare);
    });
});​ 
```

这里有一个工作演示：http: [//jsfiddle.net/pratik136/YdWNA/](http://jsfiddle.net/pratik136/YdWNA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:32:34.603

如果我正确理解了这个问题，我认为您只需要使用两个变量，一个用于医疗保险计算，一个用于税率。然后当你有了这些，你可以计算净收入。

所以在 JavaScript 中，它可能看起来像这样：

```
var medicare;
var tax; 
var income;
// This is just your medicare calculation
if (income>0 && income<=19404) {
    medicare = (income*0)/100;
}
else if (income>19404 && income<=22828) {
    medicare = (income*10)/100;
}
else {
    medicare = (income*1.5)/100;
}
// Hypothetical Tax calculation (I don't know the real tax rates)
if (income>0 && income<=20000) {
    tax = (income*25)/100;
}
else {
    tax = (income*40)/100;
}
// and now the net income using the calculated values
var netIncome=income-tax-medicare; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:33:40.833

这是您的表格的内容：

```
<form name="calc">

  Gross Income: <input type="text" class="innerc resform" size="15" name="income">

  <input type="button" onclick="calculate(this)" name="result" value="Calculate"
   class="calcButton">

  Income Tax:    <input type="text" size="15" class="resform" name="tax">
  Medicare Levy: <input type="text" size="15" class="resform" name="medicare">
  Net Income:    <input type="text" size="15" class="resform" name="net">
</form> 
```

如果您`this`从计算按钮传递（注意更改的侦听器和添加的值），计算医疗保险费的函数可以是：

```
function calculate(element) {
  var form = element.form;
  var income = form.income.value;

  // 0 for income less than threshold
  var medicare = 0;

  // Add 1% of income between 19404 and 22828
  if (income > 19404 && income <= 22828) {
    medicare = (income - 19404) * 0.01;
  }

  // Add 1.5% of income over 22828
  if (income > 22828) {
    medicare += (income - 22828) * 0.015;
  }
} 
```

希望这会让你继续前进。

# r - 如何处理在 R 中创建大型数据集

> ID：13596623
> 
> 赞同：2
> 
> 时间：2012-11-28T02:04:41.073
> 
> 标签：r

如果您将大型数据集带入 R 并且它太大而无法存储在 RAM 中，那么通过各种 Revolution R 模块之类的东西可以获得相当多的支持。但是有什么方法可以处理*在 R*中创建的数据集太大而无法存储在 RAM 中，而不是简单地（手动）将创建步骤分成一系列 RAM 大小的块，将该块写入磁盘，清除它，并继续？

例如，只是做一个大型模拟，或者使用类似 SurvSplit() 的东西来获取一个生存时间从 1 到 N 的单个观察并将其分解为 N 个单独的观察？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:08:34.747

如果您在 R 中创建数据，并且您可以对总数据的一小部分进行分析，那么只需创建任何给定分析所需的大块。

# google-maps - 为什么边界在此 Google MAP API 中不起作用？

> ID：13596627
> 
> 赞同：0
> 
> 时间：2012-11-28T02:05:06.413
> 
> 标签：google-maps

如果我这样做： [http](http://maps.googleapis.com/maps/api/geocode/json?address=kemayoran&sensor=false) : //maps.googleapis.com/maps/api/geocode/json?address=kemayoran&sensor=false 这是我想要的结果，如果不是因为我希望它在访问者键入 kem 而不是 kemayoran 时起作用.

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "Kemayoran",
               "short_name" : "Kemayoran",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Jakarta Pusat",
               "short_name" : "Jakarta Pusat",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Jakarta",
               "short_name" : "Jakarta",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Jakarta Capital Region",
               "short_name" : "Jakarta Capital Region",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Indonesia",
               "short_name" : "ID",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Kemayoran, Jakarta, Indonesia",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : -6.14935190,
                  "lng" : 106.8857620
               },
               "southwest" : {
                  "lat" : -6.171493900000001,
                  "lng" : 106.84546290
               }
            },
            "location" : {
               "lat" : -6.16165420,
               "lng" : 106.8550150
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : -6.14935190,
                  "lng" : 106.8857620
               },
               "southwest" : {
                  "lat" : -6.171493900000001,
                  "lng" : 106.84546290
               }
            }
         },
         "types" : [ "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Kemayoran",
               "short_name" : "Kemayoran",
               "types" : [ "train_station", "transit_station", "establishment" ]
            },
            {
               "long_name" : "Jalan Garuda",
               "short_name" : "Jalan Garuda",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Pasar Baru",
               "short_name" : "Pasar Baru",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Sawah Besar",
               "short_name" : "Sawah Besar",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Jakarta Pusat",
               "short_name" : "Jakarta Pusat",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Jakarta",
               "short_name" : "Jakarta",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Jakarta Capital Region",
               "short_name" : "Jakarta Capital Region",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Indonesia",
               "short_name" : "ID",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "10710",
               "short_name" : "10710",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Kemayoran, Jalan Garuda, Jakarta 10710, Indonesia",
         "geometry" : {
            "location" : {
               "lat" : -6.16204140,
               "lng" : 106.84154990
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : -6.160692419708497,
                  "lng" : 106.8428988802915
               },
               "southwest" : {
                  "lat" : -6.163390380291502,
                  "lng" : 106.8402009197085
               }
            }
         },
         "types" : [ "train_station", "transit_station", "establishment" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Kemayoran",
               "short_name" : "Kemayoran",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Kemayoran",
               "short_name" : "Kemayoran",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Jakarta Pusat",
               "short_name" : "Jakarta Pusat",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Jakarta",
               "short_name" : "Jakarta",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Jakarta Capital Region",
               "short_name" : "Jakarta Capital Region",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Indonesia",
               "short_name" : "ID",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "10620",
               "short_name" : "10620",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Kemayoran, Jakarta 10620, Indonesia",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : -6.1602730,
                  "lng" : 106.8572680
               },
               "southwest" : {
                  "lat" : -6.1664210,
                  "lng" : 106.851820
               }
            },
            "location" : {
               "lat" : -6.16165420,
               "lng" : 106.8550150
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : -6.1602730,
                  "lng" : 106.8572680
               },
               "southwest" : {
                  "lat" : -6.1664210,
                  "lng" : 106.851820
               }
            }
         },
         "types" : [ "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Kemayoran",
               "short_name" : "Kemayoran",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Krembangan",
               "short_name" : "Krembangan",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Surabaya",
               "short_name" : "Surabaya",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "East Java",
               "short_name" : "East Java",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Indonesia",
               "short_name" : "ID",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "60176",
               "short_name" : "60176",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Kemayoran, Surabaya 60176, Indonesia",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : -7.2369960,
                  "lng" : 112.7333040
               },
               "southwest" : {
                  "lat" : -7.2465120,
                  "lng" : 112.726760
               }
            },
            "location" : {
               "lat" : -7.2417540,
               "lng" : 112.7300320
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : -7.2369960,
                  "lng" : 112.7333040
               },
               "southwest" : {
                  "lat" : -7.2465120,
                  "lng" : 112.726760
               }
            }
         },
         "types" : [ "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Kemayoran",
               "short_name" : "Kemayoran",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Bangkalan",
               "short_name" : "Bangkalan",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Bangkalan Regency",
               "short_name" : "Bangkalan Regency",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "East Java",
               "short_name" : "East Java",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Indonesia",
               "short_name" : "ID",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "69116",
               "short_name" : "69116",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Kemayoran, Bangkalan 69116, Indonesia",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : -7.0243290,
                  "lng" : 112.7483040
               },
               "southwest" : {
                  "lat" : -7.039670,
                  "lng" : 112.7349340
               }
            },
            "location" : {
               "lat" : -7.031263999999999,
               "lng" : 112.7417250
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : -7.0243290,
                  "lng" : 112.7483040
               },
               "southwest" : {
                  "lat" : -7.039670,
                  "lng" : 112.7349340
               }
            }
         },
         "types" : [ "sublocality", "political" ]
      }
   ],
   "status" : "OK"
} 
```

我有几个kemayoran。

如果我做：

[http://maps.googleapis.com/maps/api/geocode/json?address=kemayoran&sensor=false&bounds=-6,106|-5,107](http://maps.googleapis.com/maps/api/geocode/json?address=kemayoran&sensor=false&bounds=-6,106|-5,107)

我得到了kemayoran。但是即使所有其他的kemayoran都在范围内，也只有一个。

我在第一次查询时正确指定了边界，因为正如大家所见，kemayoran 的纬度对数正好在 -6,106|-5,107 的范围内

如果我做

[http://maps.googleapis.com/maps/api/geocode/json?address=kemay&sensor=false&bounds=-6,106|-5,107](http://maps.googleapis.com/maps/api/geocode/json?address=kemay&sensor=false&bounds=-6,106|-5,107)

我得到了 Kemnay 而不是 kemayoran。

与此私有 API 进行比较： http://maps.google.com/maps/suggest?q=kemay&cp=2&hl=en&gl=&v=2&clid=1&json=a&ll=-6.230664,106.55365&spn=1,1&src=1&num=20& [numps =0](http://maps.google.com/maps/suggest?q=kemay&cp=2&hl=en&gl=&v=2&clid=1&json=a&ll=-6.230664,106.55365&spn=1,1&src=1&num=20&numps=0)

结果正是我想要的，只是它没有给出纬度和经度，更不用说是一个私有 API。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:11:13.690

[正如Google 的 webservice 文档中](https://developers.google.com/maps/documentation/geocoding/?hl=sv-SE#Viewports)所解释的那样，边界只是一种偏向搜索结果的方法。由于您指定了搜索字符串“Kemay”，因此它会在苏格兰找到完全匹配的内容。但是，正如您在输入确切的字符串时所观察到的，它会找到您要查找的内容。

**编辑：**

听起来您确实在寻找诸如地点自动完成功能之类的功能（[通过 webservice](https://developers.google.com/places/documentation/autocomplete#location_biasing)，或者更好的是通过[javascript library](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)）。在输入部分字符串时，那个似乎给出了更准确的结果。

# wolfram-mathematica - 在mathematica中的某个点评估函数表

> ID：13596628
> 
> 赞同：0
> 
> 时间：2012-11-28T02:05:08.203
> 
> 标签：wolfram-mathematica

我想知道是否可以在*mathematica*中的某个点评估函数表。

现在，我得到了一个包含 10 个函数的表格，并希望在 x = 0 处评估它们。

我试过这个：

```
Evaluate[myTable, {x, 0}] 
```

它不评估任何东西，它只是给出这个输出：

```
Sequence[ {term1, term2, term3, term4, term5, term6, term7, term8, term9, term10}, {x,0}] 
```

将 term1 ... term10 替换为实际条款。

我怎么能做到这一点？

谢谢，布科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:10:24.483

通过[{f1,f2,f3,f4,f5,f6,f7,f8,f9,10}[0]]

# wordpress - 如何从一些帖子中隐藏特色图片

> ID：13596629
> 
> 赞同：1
> 
> 时间：2012-11-28T02:05:10.857
> 
> 标签：wordpress

有没有办法从一些帖子中隐藏特色图片？

我的博客是[cur-mudg-eon.com](http://www.cur-mudg-eon.com)，如果您查看标题为“孔子说...”的最新帖子（在主页上），您会发现我使用了特色图片，并且显示了一些摘录文本. 当您单击标题或图片时，它会将您带到显示我要显示的卡通以及我要隐藏/删除的特色图像的帖子。

我只想在一些帖子上这样做，但我希望能够将特色图片保留在主页上。

这可能吗？

## **编辑：**

[按要求粘贴文件](http://pastebin.com/H71TAYZ4)。

根据 Chris Herberts 的回答，我将在哪里将他的代码添加到我的 single.php 文件中的代码中：

```
 <?php if(has_post_thumbnail()) {
        echo '<figure class="featured-thumbnail"><span class="img-wrap">'; the_post_thumbnail(); echo '</span></figure>';
        }
      ?>
    <?php } else { ?>
      <?php if(has_post_thumbnail()) {
        echo '<figure class="featured-thumbnail large"><span class="img-wrap"><span class="f-thumb-wrap">'; the_post_thumbnail('post-thumbnail-xl'); echo '</span></span></figure>';
        }
      ?>
    <?php } ?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T02:50:11.037

另一种不依赖于它们都属于同一类别的方法是使用[自定义字段](http://codex.wordpress.org/Using_Custom_Fields)。

您将为要隐藏特色图像的帖子设置一个自定义字段 - 在下图中，我分别使用“hide_featured_image”和“yes”作为键和值。

![在此处输入图像描述](../Images/43a9250d5e3e295d0dcb9b59f9636e2c.png)

然后，您将在调用函数以显示特色图像时检查“hide_featured_image”字段是否设置为“yes”。这是一个例子：

```
$shouldHideFeaturedImage = get_post_meta($post->ID, 'hide_featured_image', true);

if ( $shouldHideFeaturedImage != 'yes' ) {
 if ( has_post_thumbnail() ) {
    the_post_thumbnail('medium'); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T02:37:57.533

如果所有这些帖子都属于同一类别，您可以这样做。

在您的主题文件中，在文件 single.php 下应该有类似下面的内容：

```
if ( has_post_thumbnail() ) {
the_post_thumbnail('medium'); 
} 
```

将其更改为：

```
if ( !in_category( array( 'category1', 'category2', 'etc' ) )) {
 if ( has_post_thumbnail() ) {
    the_post_thumbnail('medium'); 
    } 
} 
```

# c# - 将对象和子对象保存到数据库时遇到问题？

> ID：13596631
> 
> 赞同：0
> 
> 时间：2012-11-28T02:05:30.390
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, entity-framework-migrations, asp.net-4.5

我无法查看需要更正或添加到控制器的内容，以便将我的数据保存到数据库中。请参阅下面我到目前为止的内容。

**创建方法**

```
[HttpPost]
    public ActionResult Create(Team model)
    {
        if (ModelState.IsValid)
        {
            new Team
                {
                    Name = model.Name,
                    Division = model.Division,
                    Description = model.Description,

                    TeamContact = new TeamContact
                                        {
                                            EmailAddress = model.TeamContact.EmailAddress,
                                            PhoneNumber = model.TeamContact.PhoneNumber,

                                            TeamAddress = new TeamAddress
                                                            {
                                                                Box = model.TeamContact.TeamAddress.Box,
                                                                StreetName = model.TeamContact.TeamAddress.StreetName,
                                                                StreetNumber = model.TeamContact.TeamAddress.StreetNumber,
                                                                City = model.TeamContact.TeamAddress.City,
                                                                PostalCode = model.TeamContact.TeamAddress.PostalCode,
                                                                Province = model.TeamContact.TeamAddress.Province
                                                            }
                                    }
                };
                _dataSource.Save();
        }

        return View(model); 
```

**表关系**

```
-Team one-to-one TeamContact
-TeamContact one-to-on TeamAddress 
```

**IDataSource 接口**

```
 IQueryable<Team> Teams { get; }        
    IQueryable<TeamAddress> TeamAddresses { get; }
    IQueryable<TeamContact> TeamContacts { get; }
    void Save(); 
```

**上下文类**

```
 public DbSet<Team> Teams { get; set; }        
    IQueryable<Team> IDataSource.Teams
    {
        get { return Teams; }
    }

    public DbSet<TeamAddress> TeamAddresses { get; set; }
    IQueryable<TeamAddress> IDataSource.TeamAddresses
    {
        get { return TeamAddresses; }
    }

    public DbSet<TeamContact> TeamContacts { get; set; }
    IQueryable<TeamContact> IDataSource.TeamContacts
    {
        get { return TeamContacts; }
    }

    public void Save()
    {
        SaveChanges();
    } 
```

将数据保存到数据库中我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:31:38.783

您的控制器中没有任何代码实际上将其添加`Team`到您的数据库中。现在您只是在内存中创建一个新的 Team 对象并将更改保存到您的数据库中。实际上没有任何东西被添加到数据库中来保存。

```
Team team = new Team
                {
                    .. the rest of your model building code here ..
                };

_dataSource.Teams.Add(team); // This adds the Team entity to the database
_dataSource.Save(); 
```

# java - 用图标包装可执行 jar 文件

> ID：13596634
> 
> 赞同：2
> 
> 时间：2012-11-28T02:05:44.660
> 
> 标签：java, jar, icons, wrapper

背景：我在 java 中创建了一个简单的 GUI，可以通过单击其可执行 jar 文件来运行该 GUI。我在 java 中创建了 GUI，以便它可以在多个操作系统上运行。

问题：有没有办法为 jar 文件制作某种“包装器图标”，以便当我单击它（图标）时，GUI 会打开？

需要明确的是，我不是在谈论更改由操作系统确定的 .jar 文件图标。我成功地将 jar 文件转换为 .exe、.app 和 .sh 文件，目的是运行一个 cmd 文件，该文件将确定操作系统并运行适当的文件。但后来我开始觉得我在回溯。我知道我很挑剔，但我只是认为我的 Java 程序有不同的图标会很有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:51:44.887

> 我创建了一个简单的 GUI .. 有没有办法为.. (GUI) 制作某种“包装图标”

当然。启动应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。它可以在支持的平台上安装带有图标的桌面图标和菜单快捷方式。为了进一步的品牌推广，添加一个飞溅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:32:50.337

Windows：Launch4J 从您的 JAR 中创建一个 EXE，并让您选择它的图标。如果您想保留当前用于构建 EXE 的任何工具，然后更改该 EXE 的图标，请尝试 Resource Hacker：http: [//download.cnet.com/Resource-Hacker/3000-2352_4-10178587。 html](http://download.cnet.com/Resource-Hacker/3000-2352_4-10178587.html)

Mac：
要更改 Mac 应用程序包图标，请在 info.plist 中添加以下内容

```
<key>CFBundleIconFile</key>
<string>maciconfile</string> 
```

将 maciconfile.icns 文件放在资源目录中。

如果您拥有 Mac，您可以免费获得 Xcode 开发人员工具，其中包含您需要的工具。如果您没有 Mac，则其他平台上的工具允许您为 Mac 构建包（例如用于 Maven 的 OS X 应用程序包插件）。

# function - 在 postgreSQL 中删除重音的函数

> ID：13596638
> 
> 赞同：43
> 
> 时间：2012-11-28T02:06:42.343
> 
> 标签：function, postgresql, struts-1

> **可能重复：**
> [PostgreSQL 是否支持“不区分重音”排序规则？](https://stackoverflow.com/questions/11005036/does-postgresql-support-accent-insensitive-collations)

我正在尝试删除重音，因此当我进行*SELECT*时，它会忽略它们。

例子：

```
SELECT * FROM table WHERE
table.id ILIKE 'Jose'; 
```

它返回：

```
José
Jose
Jósé
Jóse 
```

或类似的东西。

我找到了这些功能，但它们不起作用，我想这可能是因为我使用的是 Struts 1.X，请检查它们并告诉我我哪里错了或者我应该使用什么其他功能。

***第一个功能***

```
CREATE OR REPLACE FUNCTION unaccent_string(text) RETURNS text AS $$
DECLARE
    input_string text := $1;
BEGIN

input_string := translate(input_string, 'âãäåāăąÁÂÃÄÅĀĂĄ', 'aaaaaaaaaaaaaaa');
input_string := translate(input_string, 'èééêëēĕėęěĒĔĖĘĚ', 'eeeeeeeeeeeeeee');
input_string := translate(input_string, 'ìíîïìĩīĭÌÍÎÏÌĨĪĬ', 'iiiiiiiiiiiiiiii');
input_string := translate(input_string, 'óôõöōŏőÒÓÔÕÖŌŎŐ', 'ooooooooooooooo');
input_string := translate(input_string, 'ùúûüũūŭůÙÚÛÜŨŪŬŮ', 'uuuuuuuuuuuuuuuu');

return input_string;
END;
$$ LANGUAGE plpgql; 
```

***第二个功能***

```
CREATE OR REPLACE FUNCTION norm_text_latin(character varying) 
  RETURNS character varying AS 
$BODY$ 
declare 
        p_str    alias for $1; 
        v_str    varchar; 
begin 
        select translate(p_str, 'ÀÁÂÃÄÅ', 'AAAAAA') into v_str; 
        select translate(v_str, 'ÉÈËÊ', 'EEEE') into v_str; 
        select translate(v_str, 'ÌÍÎÏ', 'IIII') into v_str; 
        select translate(v_str, 'ÌÍÎÏ', 'IIII') into v_str; 
        select translate(v_str, 'ÒÓÔÕÖ', 'OOOOO') into v_str; 
        select translate(v_str, 'ÙÚÛÜ', 'UUUU') into v_str; 
        select translate(v_str, 'àáâãäå', 'aaaaaa') into v_str; 
        select translate(v_str, 'èéêë', 'eeee') into v_str; 
        select translate(v_str, 'ìíîï', 'iiii') into v_str; 
        select translate(v_str, 'òóôõö', 'ooooo') into v_str; 
        select translate(v_str, 'ùúûü', 'uuuu') into v_str; 
        select translate(v_str, 'Çç', 'Cc') into v_str; 
        return v_str; 
end;$BODY$ 
  LANGUAGE 'plpgsql' VOLATILE; 
```

当我在 NetBeans 中运行文件时，这两个函数都会生成以下错误：

```
ERROR: unterminated dollar-quoted string at or near "*the string that starts the function*" 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-28T03:02:09.280

使用 PostgreSQL 附带的[unaccent](http://www.postgresql.org/docs/current/static/unaccent.html)模块。

```
somedb=# CREATE EXTENSION unaccent;
CREATE EXTENSION
somedb=# SELECT unaccent('Hôtel');
 unaccent
----------
 Hotel

somedb=# SELECT * FROM table WHERE lower(unaccent(table.id)) = lower('Jose'); 
```

并通过生成无重音的小写索引来加快速度：

```
somedb=# CREATE INDEX CONCURRENTLY ON table (lower(unaccent(id))); 
```

# c++ - 警告：格式“%5f”需要类型“double”，但参数 3 的类型为“int”

> ID：13596642
> 
> 赞同：2
> 
> 时间：2012-11-28T02:06:53.287
> 
> 标签：c++, opengl, floating-point, compiler-errors, printf

我收到（仅）以下编译错误：

> RuberSystem.cpp:425：警告：格式“%5f”需要类型“double”，但参数 3 的类型为“int”</p>

以下是声明：

```
float x = 6000.0f;
float z = -6000.0f;
float lx = -6000.0f;
float lz = 6000.0f;
float angle = 0.0f; 
```

这是第425行：

```
printf("Right pressed: angle=%5f\nx=%5f\nlx=%5f\nz=%5f\nlz=%5f",angle,x,lx,z,lz); 
```

这些变量进行的唯一操作是：

```
angle -= 0.01f;
lx = sin (angle);
lz = -cos (angle); 
```

我也尝试使用 (float) 进行这些操作，但没有运气。

可能有用的信息：这在我的 Windows 机器上工作，在 Visual Studio 8 中，现在我正在我的带有 GNU g++ 的 macbook 上编译。我已经为 mac 使用设置了正确的定义。

编辑：我发现了对这些变量的另一项操作：

```
gluLookAt(
  x, 1500.0, z,    // eye location
  x+lx, 0.0,   z+lz,    // center location
  0.0, 1.0,   0.0); //open GL function 
```

我查看了 gluLookAt 的代码，它似乎接受了浮点数并将它们存储在浮点数矩阵中，所以我也没有看到问题存在，但我认为分享它是一件好事。

**答：**我是个白痴。正在调用的方法`angle -= 0.01f;...`具有名为`int x`and的参数`int y`，因此是`void processSpecialKeys(int key, int x, int y) {`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:10:16.753

您`x`在第 425 行是否有不同的声明生效？例如：

```
float x;
void func(int x) { ... }

// or

float x;

for (int x = ...)
{
}

// or

#define x ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:47:08.003

**答：**调用角度的方法`-= 0.01f;...`有名为`int x`and的参数`int y`，因此：`void processSpecialKeys(int key, int x, int y) {`。谢谢大家的帮助。

# android - Android MediaRecorder 启动失败：-12

> ID：13596659
> 
> 赞同：1
> 
> 时间：2012-11-28T02:08:44.400
> 
> 标签：android, mediarecorder

我一直在尝试制作一个没有音频的录制视频的应用程序（API 8）。我已按照 Android 教程中的说明进行操作。我的代码如下：

```
 mCamera.unlock();
    recorder = new MediaRecorder();
    recorder.setCamera(mCamera);
    recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
    recorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());
           //getOutputMediaFile returns a file path where the video will be saved
    recorder.setPreviewDisplay(mHolder.getSurface());
    try {
        recorder.prepare();
        recorder.start();
        recording = true;
    } catch (IllegalStateException e) {
        System.out.println("Error preparing recorder");
        e.printStackTrace();
    } catch (IOException e) {
        System.out.println("Error preparing video output");
        e.printStackTrace();
    } 
```

当它到达`recorder.start()`时，程序崩溃，抛出一个`IllegalStateException`无法捕获的错误代码`start failed: -12`。我能找到的关于这个错误代码的唯一其他信息是在[这篇](https://stackoverflow.com/questions/11766779/mediarecorder-start-failed-12)文章中，但它没有给出一个非常明确的答案，我使用的模型也不是这篇文章中提到的任何一个。

任何人都可以帮助确定错误是什么并提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:52:55.723

您是否尝试过设置 MediaRecorder 配置文件？

```
 recorder.setProfile(CamcorderProfile.get(camId, CamcorderProfile.QUALITY_LOW)); 
```

sof 中有一个类似的问题：

[MediaRecorder“启动失败-12”](https://stackoverflow.com/questions/11766779/mediarecorder-start-failed-12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:39:52.157

所以现在我尝试了一个例子并下载了源代码。我用你的代码修改了它，它在 API 8 上没有保存声音。这是主类：

```
 public class AndroidVideoCapture extends Activity implements SurfaceHolder.Callback{

Button myButton;
MediaRecorder mediaRecorder;
SurfaceHolder surfaceHolder;
boolean recording;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    recording = false;

    mediaRecorder = new MediaRecorder();
    initMediaRecorder();

    setContentView(R.layout.main);

    SurfaceView myVideoView = (SurfaceView)findViewById(R.id.videoview);
    surfaceHolder = myVideoView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    myButton = (Button)findViewById(R.id.mybutton);
    myButton.setOnClickListener(myButtonOnClickListener);
}

private Button.OnClickListener myButtonOnClickListener 
= new Button.OnClickListener(){

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        if(recording){
            mediaRecorder.stop();
            mediaRecorder.release();
            finish();
        }else{
            mediaRecorder.start();
            recording = true;
            myButton.setText("STOP");
        }
    }};

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub

}
@Override
public void surfaceCreated(SurfaceHolder arg0) {
    // TODO Auto-generated method stub
    prepareMediaRecorder();
}
@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
    // TODO Auto-generated method stub

}

private void initMediaRecorder(){

    mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
    mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
    mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
}

private void prepareMediaRecorder(){
    mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
    try {
        mediaRecorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

与您的代码不同的是，在本教程中没有实例化相机。它仅适用于 MediaRecorder。另一个区别是 prepare() 和 start() 方法是分开的。MediaRecorder 在启动应用程序时初始化，在创建 SurfaceView 时准备好，并在单击按钮时启动。也许您也应该尝试将它们分开并且不要使用相机。请以这种方式尝试，如果可行，请给我反馈。

# java - 在客户端和服务器之间将图像作为字节数组发送

> ID：13596660
> 
> 赞同：1
> 
> 时间：2012-11-28T02:08:46.673
> 
> 标签：java, image, sockets

我可以成功地从我的客户端发送并绘制一个调整大小的 125 x 125 图像到我的服务器。唯一的问题是，那太小了。我希望能够发送更大的图像，但字节数组无法处理它，并且我得到一个 java 堆异常。目前我正在使用它来解释我的图像。有没有更有效的方法？

在客户端

```
screenShot = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
                screenShot = resize(screenShot, 125, 125);

                ByteArrayOutputStream byteArrayO = new ByteArrayOutputStream();
                ImageIO.write(screenShot,"PNG",byteArrayO);
                byte [] byteArray = byteArrayO.toByteArray();
                out.writeLong(byteArray.length);
                out.write(byteArray); 
```

上面调用的 resize 方法。

```
 public static BufferedImage resize(BufferedImage img, int newW, int newH) {  
    int w = img.getWidth();  
    int h = img.getHeight();  
    BufferedImage dimg = new BufferedImage(newW, newH, img.getType()); 
    Graphics2D g = dimg.createGraphics();  
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
    RenderingHints.VALUE_INTERPOLATION_BILINEAR);  
    g.drawImage(img, 0, 0, newW, newH, 0, 0, w, h, null);  
    g.dispose();  
    return dimg;  
   } 
```

解释图像的服务器

```
in = new DataInputStream(Client.getInputStream());
            long nbrToRead = in.readLong();
            byte[] byteArray = new byte[(int) nbrToRead];
            int nbrRd = 0;
            int nbrLeftToRead = (int) nbrToRead;

            while (nbrLeftToRead > 0) {
                int rd = in.read(byteArray, nbrRd, nbrLeftToRead);
                if (rd < 0)
                    break;
                nbrRd += rd; // accumulate bytes read
                nbrLeftToRead -= rd;
            }
            ByteArrayInputStream byteArrayI = new ByteArrayInputStream(
                    byteArray);
            image = ImageIO.read(byteArrayI);

            if (image != null) {
                paint(f.getGraphics(), image);
            } else {
                System.out.println("null image.");
            } 
```

正如您所知道的，代码量很大，而且很可能效率低下。我可以将图像的 1/10 发送 10 次以获得 with 和 height，而不是在这些部分上绘制，但我想知道是否有更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:32:54.400

您可能应该将数据视为通过网络传输的流。[您可以使用RMIIO](http://openhms.sourceforge.net/rmiio/)等第三方库。如果您可以使用 Web 服务进行数据传输，那么您可以查看消息传输优化机制 (MTOM)，它可以让您以更有效的方式将数据作为流传输。更多详情请看[这里](http://weblogs.java.net/blog/adhirmehta/archive/2010/06/11/transferring-large-binary-data-web-services)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:46:18.553

这对我有用

```
public class ImageClient {

  public static void main(String[] args) throws AWTException, IOException {

    BufferedImage screenShot = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
    Socket socket = new Socket("localhost",11111);
    MemoryCacheImageOutputStream byteArrayO = new MemoryCacheImageOutputStream(socket.getOutputStream());
    ImageIO.write(screenShot, "PNG", byteArrayO);
    byteArrayO.flush();
    socket.close();
  }

}

public class ImageServer {

    public static void main(String[] args) throws IOException, ClassNotFoundException {
        ServerSocket ss = new ServerSocket(11111);
        try{
            Socket s = ss.accept();
            InputStream is = s.getInputStream();
            MemoryCacheImageInputStream ois = new MemoryCacheImageInputStream(is);
            ImageIO.read(ois);
            s.close();
        }finally{
            ss.close();
        }
   }
} 
```

# android - 货币格式的 EditText 上的退格键导致问题

> ID：13596663
> 
> 赞同：1
> 
> 时间：2012-11-28T02:08:53.630
> 
> 标签：android, formatting, textwatcher

所有-我有一个`edittext`格式化为货币的格式，如下所示：

![在此处输入图像描述](../Images/dad60d93cbbe22981bf13ceeda3ddf27.png)

问题是当用户退格所以只有一个数字和美元符号 ($5) 并且再按一次退格时，我的应用程序强制关闭。我查看了 logcat，发现它是由我的 textwatcher 中的无效双精度 ($) 引起的，当您查看我的代码时，这很合理：

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
    if (!s.toString().equals(current)) {
        editText$.removeTextChangedListener(this);

        String cleanString = s.toString().replaceAll("[$,]", "");

            double parsed = Double.parseDouble(cleanString);
            NumberFormat formatter = NumberFormat.getCurrencyInstance();
            formatter.setMaximumFractionDigits(0);
            String formatted = formatter.format(parsed);

            current = formatted;

            editText$.setText(formatted);
            editText$.setSelection(formatted.length());
            editText$.addTextChangedListener(this); 
```

我尝试在 textwatcher 中使用“if”语句来捕捉在格式化之前是否只留下美元符号但没有运气。有人知道解决这个问题的方法吗？谢谢。

# queue - Cloudbees 对 Worker 线程的支持

> ID：13596665
> 
> 赞同：0
> 
> 时间：2012-11-28T02:09:00.487
> 
> 标签：queue, cloudbees, worker

Cloudbees 是否支持工作进程/线程，例如 Heroku 上的 Worker Dynos 或 GAE 上的队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:13:26.693

听起来您正在寻找 som 异步任务执行器，不是吗？在您的应用程序中，您可以将其实现为 ServiceExecutor 线程池。与 GAE 相比，RUN@Cloud 没有线程限制。要在多个节点上分发任务，您将需要我们不提供的消息队列服务。你可以看看[amazon SQS](http://aws.amazon.com/sqs/)或[rabbit MQ SaaS CloudAMQP](http://www.cloudamqp.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:38:40.367

CloudBees 上的每个应用程序都是相似的 - 无需指定一个作为工作 dyno 类型的东西 - 人们经常使用这种模式（他们有一个实际上是工作人员的应用程序 - 但它只是一个应用程序 - 任何应用程序都可以完成这项工作）。

您也可以运行诸如石英调度程序之类的东西。

# android - Android中Fragment的生命周期

> ID：13596667
> 
> 赞同：0
> 
> 时间：2012-11-28T02:09:18.383
> 
> 标签：android, android-fragments, android-viewpager

我问了一个关于 Fragment 初始化的问题并发布了我的代码（[在 Android 中使用 Fragment 时延迟初始化](https://stackoverflow.com/questions/13580369/delay-initialization-when-using-fragment-in-android)）。问题解决了。但我的问题仍然存在。当我调用`onLoad()`获取变量时，它会抛出`NullPointerException`. 我在`onCreateView()`. 所以我猜生命周期结束了。我在这些函数中记录了 A.java 中的信息：`onDestroy`, `onDestroyView`, `onStop`. 当片段 A 更改为另一个片段时，and 被调用，而 is 不被`onDestroyView`调用`onStop`。`onDestroy`奇怪的：

片段 A 中有一个 EditText。我输入了一个字符串`abc`。1、如果生命周期结束，那么当我将片段从A更改为另一个然后再更改回A时，输入应该为空。但事实并非如此。2、如果生命周期没有结束，为什么我拿不到变量？

那么有什么可以保存的`abc`地方吗？那是什么？在哪里？

看来我不能延迟Fragment中的初始化。我无法获得非静态变量。

```
Code:
/** super class of Fragment */
public class BaseFragment extends Fragment {
    public void onLoad(Context context){
    }
}

/** */
public class AFragment extends BaseFragment{
    TextView name;
    @Override
    public View onCreateVew(...){
        name = new TextView(..);
    }
    @Override
    public void onLoad(Context context){
         // here will throw NullPointerException
         name.setText("=========");
    }
}

public class TabsAdapter extends FragmentPagerAdapter implements TabHost.OnTabChangeListener,ViewPager.OnPageChangeListener {
    ....
    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.mClss.getName(), info.mArgs);
    }

    @Override
    public void onPageSelected(int position) {
        TabWidget widget = mTabHost.getTabWidget();
        int oldFocusability = widget.getDescendantFocusability();
        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);

        widget.setDescendantFocusability(oldFocusability);

        BaseFragment f = (BaseFragment) getItem(position);
        f.onLoad(mContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:53:03.287

> 但我的问题仍然存在。当我调用 onLoad() 来获取变量时，它会抛出 NullPointerException。我在 onCreateView() 中初始化了这些变量。

问题在于您使用这些片段的方式。更准确地说，在`onPageSelected`您调用`FragmentPagerAdapter`'`getItem()`方法来查找该位置的片段的方法中（或者这就是我认为您正在尝试做的事情）。但是调用这个方法只是在每次调用它时**实例化一个新的片段**`ViewPager`，它不会为您提供对该位置的片段的引用。这个新实例化的片段没有附加到 an`Activity`并且它的`onCreateView`方法没有被调用，因此它没有创建任何视图。尝试使用您的`onLoad`方法访问其中一个视图是错误的，它会抛出该`NullPointerException`. 您应该尝试使用我上一个答案中的代码，因为该代码将尝试找到`ViewPager`实例化并通过`FragmentManager`.

# wordpress - 在仅限会员的 Wordpress 博客中显示动态 googleVis 输出

> ID：13596669
> 
> 赞同：2
> 
> 时间：2012-11-28T02:09:35.013
> 
> 标签：wordpress, r, google-visualization

我正在创建一个基于订阅的 Wordpress 博客，并希望显示 R googleVis 输出（作为 HTML），大约每 30 分钟更新一次。已经有几个关于如何在 Wordpress 中显示 R googleVis 输出的问题/答案，但它们依赖于：

1.  手动将 html 粘贴到单个帖子中，或
2.  将 output.html 文件写入 Web 服务器并在博客内的内联框架中引用 URL。

第一个选项对我不起作用，因为内容每 30 分钟更新一次，第二个选项将允许非成员通过直接导航到内联框架的 URL 来规避 Wordpress 安全性。任何关于如何通过 Wordpress 发布此内容同时仍保持订阅者访问权限的想法将不胜感激。

# javascript - 在 java 脚本中编写切换按钮时出现错误

> ID：13596672
> 
> 赞同：0
> 
> 时间：2012-11-28T02:10:08.600
> 
> 标签：javascript, google-chrome-extension

这是我在 chrome 扩展中的 popup.js：

```
 function getlink(){

    console.log(document.getElementById("linkify").value);
    if(document.getElementById("linkify").value == "on")
    {
            localStorage.setItem("linkify",false);

            document.getElementById("linkify").innerHTML = "Get links - off";
            document.getElementById("linkify").value = "off";
            console.log(document.getElementById("linkify").value);
            chrome.extension.sendRequest({ msg: "linkify"});

    }
    else if(document.getElementById("linkify").value == "off")
    {
        localStorage.setItem("linkify",true);
        console.log("Hello!");
        document.getElementById("linkify").innerHTML = "Get links - on";
        document.getElementById("linkify").value = "on";
        chrome.extension.sendRequest({ msg: "linkify"});

    }
    }

    $(document).ready(function (){

    if(localStorage.getItem("linkify"))
    {
        document.getElementById("linkify").innerHTML = "Get links - on";
        document.getElementById("linkify").value = "on";
    }
    $("#linkify").click(function() {
      getlink();
    });
    }); 
```

基本上，我想要的功能是：扩展中的一个按钮，可以打开或关闭。切换时，其文本会发生变化，存储在 localStorage 中的值也会发生变化。

虽然，切换工作正常，但这是发生的错误：

如果我关闭按钮，那就是把它变成关闭链接并退出弹出窗口。然后再次打开弹窗，按钮状态又回到“on”。它没有保持其状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:22:22.613

你的问题是你如何使用本地存储。**本地存储将所有内容存储为字符串**。

所以基本上：

```
localStorage.setItem("foo", false)
localStorage.getItem("foo") // returns "false"

if(localStorage.getItem("foo")) {
  console.log("bar")
} else {
  console.log("bing")
}
// Logs bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:38:56.883

使用 if(JSON.parse(localStorage.getItem("linkify")))

# transactions - 在 Firebird (2.1) 中查询 RDB$TRANSACTIONS 表

> ID：13596677
> 
> 赞同：4
> 
> 时间：2012-11-28T02:10:27.337
> 
> 标签：transactions, metadata, firebird

如何在 firebird 中使用与交易相关的元数据（使用 2.1 版）？

例如：

1) 打开一个 isql 会话，更改一些表，保持事务打开。

2) 打开另一个 isql 会话，执行以下查询：

```
SELECT * FROM RDB$TRANSACTIONS; 
```

不返回任何行。我需要什么特别的东西才能获得这些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:55:52.383

表 RDB$TRANSACTIONS 仅用于分布式事务（即针对多个数据库运行的事务）。为了监视常规事务，请改用表 MON$TRANSACTIONS。

```
MON$TRANSACTIONS (started transactions)
  - MON$TRANSACTION_ID (transaction ID)
  - MON$ATTACHMENT_ID (attachment ID)
  - MON$STATE (transaction state)
       0: idle
       1: active
  - MON$TIMESTAMP (transaction start date/time)
  - MON$TOP_TRANSACTION (top transaction)
  - MON$OLDEST_TRANSACTION (local OIT number)
  - MON$OLDEST_ACTIVE (local OAT number)
  - MON$ISOLATION_MODE (isolation mode)
       0: consistency
       1: concurrency
       2: read committed record version
       3: read committed no record version
  - MON$LOCK_TIMEOUT (lock timeout)
      -1: infinite wait
       0: no wait
       N: timeout N
  - MON$READ_ONLY (read-only flag)
  - MON$AUTO_COMMIT (auto-commit flag)
  - MON$AUTO_UNDO (auto-undo flag)
  - MON$STAT_ID (statistics ID) 
```

# django - Django 站点框架：如何管理对共享同一数据库的不同站点的访问？

> ID：13596678
> 
> 赞同：0
> 
> 时间：2012-11-28T02:10:29.807
> 
> 标签：django

我有两个 Django 站点，它们共享相同的数据库和一些功能。每个站点都有自己的 settings.py 和不同的 SITE_ID。每个站点都在其自己的 runserver 进程下运行。

我有这个自定义后端来检查是否允许用户在登录期间访问当前站点：

```
user_or_none = super(SiteBackend, self).authenticate(**credentials)
if user_or_none and user_or_none.get_profile().sites.filter(id=Site.objects.get_current().id).count() < 1:
    user_or_none = None 
```

如果 SITE_ID 存储在用户的个人资料中（在 auth_user_profile_site 表中），则用户可以访问站点

我的问题是，当用户登录他有权访问的站点之一时，他可以切换到他无权访问的另一个站点，系统让他进入。

此外，一旦登录一个站点，似乎在切换到另一个站点时，从：`Site.objects.get_current().id`获取的 SITE_ID 与第二个站点 ID 不对应，我们总是从登录的第一个站点接收 SITE_ID...

这是网站框架的正常行为吗？

任何建议如何解决这些问题？

非常感谢

艾蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:52:06.757

您应该在 django 会话框架中寻找答案。当有人登录时，它会在会话中保存用户 ID。session 只是一个临时存储（您可以在 view 中访问它`request.session`）。取决于会话后端，它可以与其他站点交互。

看[这里](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.login)

# java - 在运行应用程序之前检测/测试没有唯一的 @Autowired bean

> ID：13596680
> 
> 赞同：2
> 
> 时间：2012-11-28T02:10:37.387
> 
> 标签：java, spring, autowired

我正在使用 Java + Spring 进行一些编码。就像是，

```
public interface PeopleService {}
public class CustomerService implemented PeopleService {}
public class EmployeeService implemented PeopleService {} 
```

如果我在这样的代码中使用@Autowired，

```
@Autowired
protected PeopleService peopleService; 
```

应用程序抛出异常“没有定义类型 [xxxxxxxx] 的唯一 bean：预期的单个匹配 bean，但找到 2。” 在运行时。通过添加@Qualifier("xxxxxx") 可以轻松解决此问题。然而，这个问题令人讨厌的部分是异常只在运行时弹出。通过这种方式，如果我在手动之前不仔细检查注释。一旦应用程序达到自动装配点，它可能会抛出异常。

我不喜欢手动检查。只是想知道，在运行应用程序之前（例如在应用程序的初始化或编译期间）是否有任何智能方法可以测试/检测此类异常？

非常感谢。

* * *

**编辑：**

最后，我刚刚提出了一个解决方案，该解决方案将找到所有扩展 BasicService 的类，并逐个初始化它们以测试每个类中自动装配的 bean 的唯一性。

```
@Test
public void autowireValidationForAllSubclassOfBaseService() {
    ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(false);
    provider.addIncludeFilter(new AssignableTypeFilter(BasicService.class));

    Set<BeanDefinition> serverResources = provider.findCandidateComponents("path/class");
    AutowireCapableBeanFactory beanFactory = applicationContext.getAutowireCapableBeanFactory();

    for (BeanDefinition serverResource : serverResources) {
        try {
            Class<? extends BasicService> serverResourceClass =
                    (Class<? extends BasicService>) Class.forName(serverResource.getBeanClassName());
            Object bean = beanFactory.createBean(serverResourceClass, AutowireCapableBeanFactory.AUTOWIRE_BY_NAME, false);
            beanFactory.initializeBean(bean, serverResourceClass.getSimpleName());
        } catch (Exception e) {
            Assert.assertTrue(false, "Autowired might not be handled properly " + e.getMessage());
        }
    }
} 
```

这可能不是最好的方法，但我现在对它很满意，因为它可以工作并在真正运行它之前检测所有可能的自动连线问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:06:36.837

尝试在公共类 CustomerService 实现 PeopleService {} 之前添加 @Service

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:43:41.977

最后，我刚刚提出了一个解决方案，该解决方案将找到所有扩展 BasicService 的类，并逐个初始化它们以测试每个类中自动装配的 bean 的唯一性。

```
@Test
public void autowireValidationForAllSubclassOfBaseService() {
    ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(false);
    provider.addIncludeFilter(new AssignableTypeFilter(BasicService.class));

    Set<BeanDefinition> serverResources = provider.findCandidateComponents("path/class");
    AutowireCapableBeanFactory beanFactory = applicationContext.getAutowireCapableBeanFactory();

    for (BeanDefinition serverResource : serverResources) {
        try {
            Class<? extends BasicService> serverResourceClass =
                    (Class<? extends BasicService>) Class.forName(serverResource.getBeanClassName());
            Object bean = beanFactory.createBean(serverResourceClass, AutowireCapableBeanFactory.AUTOWIRE_BY_NAME, false);
            beanFactory.initializeBean(bean, serverResourceClass.getSimpleName());
        } catch (Exception e) {
            Assert.assertTrue(false, "Autowired might not be handled properly " + e.getMessage());
        }
    }
} 
```

这可能不是最好的方法，但我现在对它很满意，因为它可以工作并在真正运行它之前检测所有可能的自动连线问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:42:56.180

好吧，你不需要使用`@Autowired`. 您始终可以通过 xml 或 java 进行显式连接。

要连接以下课程，您可以：

```
public class MyBean {
    private PeopleService peopleService;
    public MyBean(PeopleService peopleService) {
        this.peopleService = peopleService;
    }
} 
```

xml:

```
<bean id="customerService" class="the.package.containing.customerservice.CustomerService"/>

<bean id="employeeService" class="the.package.containing.employeeService.EmployeeService"/>

<bean id="myBean" class="the.package.containing.mybean.MyBean">
    <constructor-arg ref="employeeService"/>
</bean> 
```

爪哇：

```
@Configuration
public class AppConfig {
    @Bean
    public PeopleService customerService() {
        return new CustomerService();
    }

    @Bean
    public PeopleService employeeService() {
        return new EmployeeService();
    }

    @Bean
    public MyBean myBean() {
        return new MyBean(customerService());
    }
} 
```

由于您似乎在追求编译时类型安全，因此我建议您使用基于 Java 的方法，因为它为您提供了编译时保证。

# c++ - CGAL：将线段延伸到多边形边界

> ID：13596684
> 
> 赞同：1
> 
> 时间：2012-11-28T02:11:14.167
> 
> 标签：c++, polygon, segment, boundary, cgal

如果我在多边形的 2 个顶点之间有一个线段，有没有办法使用 CGAL 扩展这个线段直到它到达多边形边界？（如果至少有一个顶点是反射顶点，就会发生这种情况）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:07:26.823

您可以通过获取线段的支撑线[`mySegment.supporting_line()`](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/Class_Segment_2.html)并检查该线与多边形边界的相交位置。然后，您可以创建一个基于找到的交点的新段。

让 p1 和 p2 成为 Segment 的顶点。如果我猜对了，您可能希望按坐标对交点进行排序，并创建一个从小于 p1 和 p2 的第一个交点到大于 p1 和 p2 的第一个交点的段。（注意这里要处理几种特殊情况。）

要获得交点，您可以遍历多边形的各个部分，并通过 将每个部分与提到的支撑线相交[`CGAL::intersection`](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/Function_intersection.html)。

一种更复杂的方法是创建一个包含多边形的[Arrangement](http://www.cgal.org/Manual/3.3/doc_html/cgal_manual/Arrangement_2_ref/Class_Arrangement_2.html)，将[Observer](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Arrangement_on_surface_2_ref/Class_Arr_observer.html)附加到它，然后将提到的支撑线添加到 Arrangement。然后，您将从对`obs.before_split_face()`和的自动调用中获得所需的信息`obs.before_split_face()`。

# php - 在较大的表单中上传文件（一个页面上有两个表单），我如何一次提交两组数据（文件和表单）？(PHP)

> ID：13596685
> 
> 赞同：4
> 
> 时间：2012-11-28T02:11:25.477
> 
> 标签：php, javascript, html, forms

我有一个表格，其中包含输入的问题列表，然后是上传文件的邀请（如果有的话）。

我通过弹出包含上传的表单来避免嵌套表单。困难在于，如果他们在 Uploader 表单上按下提交，它将处理目标页面上的上传，同样，如果他们在表单的其余部分点击提交，则不会提交上传。

我怎样才能同时做这两个？

我的代码：

```
<form id="questions" action="page2.php" method="POST">
    Question 1 <input name="q1"/>
    Question 2 <input name="q2" />  
    Have any files to add? <button id="upload-button">Upload</button>
    <input type="submit" value="Submit Answers" />
</form>

<div class="hidden">
    <form id="fileupload" enctype="multipart/form-data" action="uploader.php" method="POST">
        <input id="fileupload" type="file" name="files[]"  multiple>
        <input  type="submit" value="Upload Files" />
    </form>
</div> 
```

如果有人按下按钮添加文件，jQuery 会弹出隐藏的 div。

我没有将它们发布到同一个地方的问题，但我尝试使用 javascript 来使用每个按钮的点击事件来提交两个表单，但它不起作用。（后面读栈溢出解释了，只有最后一次提交是这样处理的）

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:15:37.817

非常简单，像这样构建您的 HTML，并一次性处理来自 page2.php 和 uploader.php 的逻辑（即在 page2.php 中包含文件上传逻辑）。如果您向我们展示这两个文件的内容，我可以向您展示如何组合它们。

还添加了带有关联输入链接的标签，并将提交输入交换为按钮元素。

```
<form id="questions" enctype="multipart/form-data" action="page2.php" method="POST">
    <label for="q1">Question 1</label>
    <input id="q1" name="q1" type="text" />

    <label for="q2">Question 2</label> 
    <input id="q2" name="q2" type="text" />  

    <label for="fileupload">Upload a File<label>
    <input id="fileupload" type="file" name="files[]"  multiple />

    <button type="submit">Submit</button>
</div> 
```

# nginx - 检查文件名 try_files

> ID：13596690
> 
> 赞同：0
> 
> 时间：2012-11-28T02:12:32.863
> 
> 标签：nginx

我正在尝试检查文件是否存在，但 url 与文件名不同。我的意思是，我的网址是：

本地主机/12/569.jpg?od=3

我想通过 ngingx 上的 try_files 检查文件 v12t569.jpg 是否存在。是否可以？

```
try_files /files/img/$uri ; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:01:11.547

```
location ~ ^/(\d+)/(\d+\.jpg)$ {
    root /files/img;
    try_files /v$1t$2 =404;
} 
```

*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/root](http://nginx.org/r/root)
*   [http://nginx.org/r/try_files](http://nginx.org/r/try_files)
*   man pcresyntax
*   人 pcrepattern

# css - CSS浮动属性和块

> ID：13596692
> 
> 赞同：0
> 
> 时间：2012-11-28T02:12:46.497
> 
> 标签：css, css-float

我读了这篇文章[http://css-tricks.com/implied-block/](http://css-tricks.com/implied-block/)。我在自己的 chrome 浏览器中对其进行了测试，是的，使用浮动样式生成 display:block 样式。据我所知， display:block 意味着该元素成为块级元素，并且占据整行。下一个元素应该从新行开始。

但是我测试了 float 属性。虽然它生成了 display:block，但下一个元素（也是浮动的）仍然在同一行。那么它有什么问题呢？

```
 <style type="text/css">
    span
    {
        width: 30px;
        margin: 0 10px;
        background-color: Red;
        float:left;
    }
 </style>
<body>
<span>222</span><span>323</span><span>dd</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:24:39.527

您需要清除浮动以使“浮动”元素中断到下一行。您可以用 div 替换 span 元素，您将看到相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:59:13.763

You can try this blog, this might help you to understand more about float

[http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:28:41.227

如果您只想让每个跨度占据一个新行，那么给它们每个：

```
span { display:block; } 
```

并删除：

```
span { float:left; } 
```

A `div` would also accomplish this without css.

# android - 我的android应用程序错误--GoBang

> ID：13596696
> 
> 赞同：1
> 
> 时间：2012-11-28T02:13:26.243
> 
> 标签：android

这是android应用程序的简单代码--GoBang。但是，我无法解决这个错误，因为我是一个新生。当应用程序跳转到这个活动时，它会立即崩溃。这是活动代码：

```
package org.crazyit.gobang;

import android.app.Activity;    
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.drawable.Drawable;
import android.os.Bundle;    
import android.util.AttributeSet;
import android.util.Log;    
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;    
import android.widget.TextView;    

public class enter extends Activity {    

    /** Called when the activity is first created. */   
     @Override   
    public void onCreate(Bundle savedInstanceState) {    
        super.onCreate(savedInstanceState);    
        GobangView gbv; //= new GobangView(this); 
        setContentView(R.layout.acyivity_enter);    

       gbv = (GobangView)this.findViewById(R.id.gobangview);    
       gbv.setTextView((TextView)this.findViewById(R.id.text));    
 }  

public class GobangView extends View{    

    protected int GRID_SIZE = 10;    
    protected int GRID_WIDTH = 30;
    protected int CHESS_DIAMETER = 26;    
    protected int mStartX;    
    protected int mStartY;    

    private Bitmap[] mChessBW;     
    private int[][] mGridArray;   

    boolean key = false;    

    int wbflag = 1;     
    int mLevel = 1;    
    int mWinFlag = 0;    
    private final int BLACK=1;    
    private final int WHITE=2;    

    int mGameState = GAMESTATE_RUN;    
    static final int GAMESTATE_PRE = 0;    
    static final int GAMESTATE_RUN = 1;    
    static final int GAMESTATE_PAUSE = 2;    
    static final int GAMESTATE_END = 3;    

    //private TextView mStatusTextView;     
    public TextView mStatusTextView;    

    private Bitmap btm1;    
    private final Paint mPaint = new Paint();    

    CharSequence mText;    
    CharSequence STRING_WIN = "White win! /n Press Fire Key to start new game.";    
    CharSequence STRING_LOSE = "Black win! /n Press Fire Key to start new game.";    
    CharSequence STRING_EQUAL = "Cool! You are equal! /n Press Fire Key to start new    Game.";    

    public GobangView(Context context, AttributeSet attrs, int defStyle) {    
       super(context, attrs, defStyle);    
    }    

    public GobangView(Context context, AttributeSet attrs) { 
        super(context, attrs);    
        this.setFocusable(true);  //20090530    
        this.setFocusableInTouchMode(true);    

        init();    
   }    

public void init() {    
    mGameState = 1;    
    wbflag = BLACK;    
    mWinFlag = 0; 
    mGridArray = new int[GRID_SIZE-1][GRID_SIZE-1];    

    mChessBW = new Bitmap[2];    

    Bitmap bitmap = Bitmap.createBitmap(CHESS_DIAMETER, CHESS_DIAMETER, Bitmap.Config.ARGB_8888);    
    Canvas canvas = new Canvas(bitmap);    
    Resources r = this.getContext().getResources();    

    Drawable tile = r.getDrawable(R.drawable.bai);    
    tile.setBounds(0, 0, CHESS_DIAMETER, CHESS_DIAMETER);    
    tile.draw(canvas);    
    mChessBW[0] = bitmap;    

    tile = r.getDrawable(R.drawable.hei);    
    tile.setBounds(0, 0, CHESS_DIAMETER, CHESS_DIAMETER);    
    tile.draw(canvas);    
    mChessBW[1] = bitmap;    
 }    

public void setTextView(TextView tv){    
    mStatusTextView =tv;    
    mStatusTextView.setVisibility(View.INVISIBLE);    
}    

@Override   
protected void onSizeChanged(int w, int h, int oldw, int oldh) {    
    mStartX = w / 2 - GRID_SIZE * GRID_WIDTH / 2;    
    mStartY = h / 2 - GRID_SIZE * GRID_WIDTH / 2;    
}    

 @Override   
public boolean onTouchEvent(MotionEvent event){    
    switch (mGameState) {    
    case GAMESTATE_PRE:    
        break;    
    case GAMESTATE_RUN: {    
            int x;    
            int y;    
            float x0 = GRID_WIDTH - (event.getX() - mStartX) % GRID_WIDTH;    
            float y0 = GRID_WIDTH - (event.getY() - mStartY) % GRID_WIDTH;    
            if (x0 < GRID_WIDTH / 2) {    
                x = (int) ((event.getX() - mStartX) / GRID_WIDTH);    
            } else {    
                x = (int) ((event.getX() - mStartX) / GRID_WIDTH) - 1;    
            }    
            if (y0 < GRID_WIDTH / 2) {    
                y = (int) ((event.getY() - mStartY) / GRID_WIDTH);    
            } else {    
                y = (int) ((event.getY() - mStartY) / GRID_WIDTH) - 1;    
            }    
            if ((x >= 0 && x < GRID_SIZE - 1)    
                    && (y >= 0 && y < GRID_SIZE - 1)) {    
                if (mGridArray[x][y] == 0) {    
                    if (wbflag == BLACK) {    
                        putChess(x, y, BLACK);    
                        //this.mGridArray[x][y] = 1;     
                        if(checkWin(BLACK)){ //如果是黑棋赢了    
                            mText = STRING_LOSE;    
                            mGameState = GAMESTATE_END;    
                            showTextView(mText);    
                        }else if(checkFull()){//如果棋盘满了    
                            mText = STRING_EQUAL;    
                            mGameState = GAMESTATE_END;    
                            showTextView(mText);    
                        }    

                        wbflag = WHITE;    
                    } else if (wbflag == WHITE) {    
                        putChess(x, y, WHITE);    
                        //this.mGridArray[x][y] = 2;    
                        if(checkWin(WHITE)){    
                            mText = STRING_WIN;    
                            mGameState = GAMESTATE_END;    
                            showTextView(mText);    
                        }else if(checkFull()){//如果棋盘满了    
                            mText = STRING_EQUAL;    
                            mGameState = GAMESTATE_END;    
                            showTextView(mText);    
                        }    
                        wbflag = BLACK;    
                    }    
                }    
            }    
        }    

        break;    
    case GAMESTATE_PAUSE:    
        break;    
    case GAMESTATE_END:    
        break;    
    }    

    this.invalidate();    
    return true;    

}     

@Override   
public boolean onKeyDown(int keyCode, KeyEvent msg) {    
    Log.e("KeyEvent.KEYCODE_DPAD_CENTER", " " + keyCode);    

    if(keyCode == KeyEvent.KEYCODE_DPAD_CENTER){    
        switch(mGameState){    
        case GAMESTATE_PRE:    
            break;    
        case GAMESTATE_RUN:    
            break;    
        case GAMESTATE_PAUSE:    
            break;    
        case GAMESTATE_END:    
        {//游戏结束后，按CENTER键继续    

            Log.e("Fire Key Pressed:::", "FIRE");    
            mGameState = GAMESTATE_RUN;    
            this.setVisibility(View.VISIBLE);    
            this.mStatusTextView.setVisibility(View.INVISIBLE);    
            this.init();    
            this.invalidate();    

        }    
            break;               
        }    
    }    

    return super.onKeyDown(keyCode, msg);    
}    

@Override   
public void onDraw(Canvas canvas) {    

    canvas.drawColor(Color.YELLOW);    

    // 画棋盘    
    {    
        Paint paintRect = new Paint();    
        paintRect.setColor(Color.GRAY);    
        paintRect.setStrokeWidth(2);    
        paintRect.setStyle(Style.STROKE);    

        for (int i = 0; i < GRID_SIZE; i++) {    
            for (int j = 0; j < GRID_SIZE; j++) {    
                int mLeft = i * GRID_WIDTH + mStartX;    
                int mTop = j * GRID_WIDTH + mStartY;    
                int mRright = mLeft + GRID_WIDTH;    
                int mBottom = mTop + GRID_WIDTH;    
                canvas.drawRect(mLeft, mTop, mRright, mBottom, paintRect);    
            }    
        }    

        //画棋盘的外边框    
        paintRect.setStrokeWidth(4);    
        canvas.drawRect(mStartX, mStartY, mStartX + GRID_WIDTH*GRID_SIZE, mStartY + GRID_WIDTH*GRID_SIZE, paintRect);    
    }    

    //画棋子    

    for (int i = 0; i < GRID_SIZE-1; i++) {    
        for (int j = 0; j < GRID_SIZE-1; j++) {    
            if(mGridArray[i][j] == BLACK){    
                //通过图片来画    
                //canvas.drawBitmap(mChessBW[0], mStartX + (i+1) * GRID_WIDTH - CHESS_DIAMETER/2 , mStartY + (j+1)* GRID_WIDTH - CHESS_DIAMETER/2 , mPaint);    

                //通过圆形来画    
                 {    
                    Paint paintCircle = new Paint();    
                    paintCircle.setColor(Color.BLACK);    
                    canvas.drawCircle(mStartX + (i+1) * GRID_WIDTH, mStartY + (j+1)* GRID_WIDTH, CHESS_DIAMETER/2, paintCircle);    
                }     

            }else if(mGridArray[i][j] == WHITE){    
                //通过图片来画    
                //canvas.drawBitmap(mChessBW[1], mStartX + (i+1) * GRID_WIDTH - CHESS_DIAMETER/2 , mStartY + (j+1)* GRID_WIDTH - CHESS_DIAMETER/2 , mPaint);    

                //通过圆形来画    
                {    
                    Paint paintCircle = new Paint();    
                    paintCircle.setColor(Color.WHITE);    
                    canvas.drawCircle(mStartX + (i+1) * GRID_WIDTH, mStartY + (j+1)* GRID_WIDTH, CHESS_DIAMETER/2, paintCircle);    
                }    
            }    
        }    
    }    
}    

public void putChess(int x, int y, int blackwhite){    
    mGridArray[x][y] = blackwhite;    
}    

public boolean checkWin(int wbflag){    
    for(int i = 0; i < GRID_SIZE - 1 ; i++ ) //i表示列(根据宽度算出来的)    
        for(int j = 0; j < GRID_SIZE - 1; j++){//i表示行(根据高度算出来的)    
            //检测横轴五个相连    
            if(((i+4) < (GRID_SIZE - 1))&&    
               (mGridArray[i][j] == wbflag) && (mGridArray[i+1][j] == wbflag)&& (mGridArray[i + 2][j] == wbflag) && (mGridArray[i + 3][j] == wbflag) && (mGridArray[i + 4][j] == wbflag)){    
                Log.e("check win or loss:", wbflag + "win");    

                mWinFlag = wbflag;    
            }    

            //纵轴5个相连    
            if(((j+4) < (GRID_SIZE - 1))&&    
                       (mGridArray[i][j] == wbflag) && (mGridArray[i][j+1] == wbflag)&& (mGridArray[i ][j+ 2] == wbflag) && (mGridArray[i ][j+ 3] == wbflag) && (mGridArray[i ][j+ 4] == wbflag)){    
                        Log.e("check win or loss:", wbflag + "win");    

                        mWinFlag = wbflag;    
                    }    

            //左上到右下5个相连    
            if(((j+4) < (GRID_SIZE - 1))&& ((i+4) < (GRID_SIZE - 1)) &&    
                       (mGridArray[i][j] == wbflag) && (mGridArray[i+1][j+1] == wbflag)&& (mGridArray[i + 2 ][j+ 2] == wbflag) && (mGridArray[i + 3][j+ 3] == wbflag) && (mGridArray[i + 4 ][j+ 4] == wbflag)){    
                        Log.e("check win or loss:", wbflag + "win");    

                        mWinFlag = wbflag;    
                    }    

            //右上到左下5个相连    
            if(((i-4) >= 0)&& ((j+4) < (GRID_SIZE - 1)) &&    
                       (mGridArray[i][j] == wbflag) && (mGridArray[i-1][j+1] == wbflag)&& (mGridArray[i - 2 ][j+ 2] == wbflag) && (mGridArray[i - 3][j+ 3] == wbflag) && (mGridArray[i - 4 ][j+ 4] == wbflag)){    
                        Log.e("check win or loss:", wbflag + "win");    

                        mWinFlag = wbflag;    
                    }    
    }    

    if( mWinFlag == wbflag){    
        return true;        
    }else   
        return false;    

}    

public boolean checkFull(){    
    int mNotEmpty = 0;    
    for(int i = 0; i < GRID_SIZE -1; i ++)    
        for(int j = 0; j < GRID_SIZE - 1; j ++){    
            if(mGridArray[i][j] != 0) mNotEmpty +=1;    
        }    

    if(mNotEmpty == (GRID_SIZE-1)*(GRID_SIZE-1)) return true;    
    else return false;    
}    

public void showTextView(CharSequence mT){    
    this.mStatusTextView.setText(mT);    
    mStatusTextView.setVisibility(View.VISIBLE);    

}    

}  
} 
```

这是xml代码：

```
<?xml version="1.0" encoding="utf-8"?>   
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"   
    android:layout_width="fill_parent"   
    android:layout_height="fill_parent">   

<org.crazyit.gobang.GobangView android:id="@+id/gobangview"   
    android:layout_width="fill_parent"     
    android:layout_height="fill_parent" />   

<RelativeLayout   
    android:layout_width="wrap_content"   
    android:layout_height="wrap_content"   
    android:layout_centerInParent="true" >   

    <TextView     
        android:id="@+id/text"     
        android:text="hahahhaha"   
        android:visibility="visible"     
        android:layout_width="wrap_content"   
        android:layout_height="wrap_content"   
        android:layout_centerInParent="true"   
        android:gravity="center_horizontal"     
        android:textColor="#ffff0000"   
        android:textStyle="bold"   
        android:textSize="24sp" >   
     </TextView>

    </RelativeLayout> 
```

以下是错误信息：

```
11-28 01:41:28.612: E/AndroidRuntime(398): FATAL EXCEPTION: main
11-28 01:41:28.612: E/AndroidRuntime(398): java.lang.RuntimeException: Unable to start       activity ComponentInfo{org.crazyit.gobang/org.crazyit.gobang.enter}: android.view.InflateException: Binary XML file line #6: Error inflating class org.crazyit.gobang.GobangView
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.os.Looper.loop(Looper.java:123)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 01:41:28.612: E/AndroidRuntime(398):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 01:41:28.612: E/AndroidRuntime(398):  at java.lang.reflect.Method.invoke(Method.java:507)
11-28 01:41:28.612: E/AndroidRuntime(398):  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 01:41:28.612: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 01:41:28.612: E/AndroidRuntime(398):  at dalvik.system.NativeStart.main(Native Method)
11-28 01:41:28.612: E/AndroidRuntime(398): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class org.crazyit.gobang.GobangView
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-28 01:41:28.612: E/AndroidRuntime(398):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.Activity.setContentView(Activity.java:1657)
11-28 01:41:28.612: E/AndroidRuntime(398):  at org.crazyit.gobang.enter.onCreate(enter.java:30)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-28 01:41:28.612: E/AndroidRuntime(398):  ... 11 more
11-28 01:41:28.612: E/AndroidRuntime(398): Caused by: java.lang.ClassNotFoundException: org.crazyit.gobang.GobangView in loader dalvik.system.PathClassLoader[/data/app/org.crazyit.gobang-2.apk]
11-28 01:41:28.612: E/AndroidRuntime(398):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-28 01:41:28.612: E/AndroidRuntime(398):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-28 01:41:28.612: E/AndroidRuntime(398):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.createView(LayoutInflater.java:471)
11-28 01:41:28.612: E/AndroidRuntime(398):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
11-28 01:41:28.612: E/AndroidRuntime(398):  ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:29:12.630

问题出在这里：

```
Caused by: java.lang.ClassNotFoundException: org.crazyit.gobang.GobangView in loader dalvik.system.PathClassLoader[/data/app/org.crazyit.gobang-2.apk] 
```

确保您`GobangView`在`org.crazyit.gobang`包裹中，它现在无法找到它`Class`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:41:07.093

尝试`GobangView`在新的 java 文件中移动类

五子棋视图.java

```
public class GobangView extends View{    
    ....
} 
```

输入.java

```
public class enter extends Activity {    
       .....  
} 
```

注意：我自己还没有尝试过。

# c++ - 带 bo ost 的 C++11 占位符

> ID：13596697
> 
> 赞同：20
> 
> 时间：2012-11-28T02:13:39.490
> 
> 标签：c++, c++11, boost

这段代码...

```
int main()
{
    using namespace std::placeholders;
    ClassA a;
    ClassB b, b2;
    a.SigA.connect( std::bind(&ClassB::PrintFoo, &b) );
    a.SigB.connect( std::bind(&ClassB::PrintInt, b,  _1));
    a.SigB.connect( std::bind(&ClassB::PrintInt, &b2, _1));

    a.SigA();
    a.SigB(4);
} 
```

给出编译错误，“错误：对 '_1' 的引用不明确”

它可以通过完全限定占位符来修复......

```
int main()
{
    // using namespace std::placeholders;
    ClassA a;
    ClassB b, b2;
    a.SigA.connect( std::bind(&ClassB::PrintFoo, &b) );
    a.SigB.connect( std::bind(&ClassB::PrintInt, b,  std::placeholders::_1));
    a.SigB.connect( std::bind(&ClassB::PrintInt, &b2, std::placeholders::_1));

    a.SigA();
    a.SigB(4);
} 
```

...但是为什么第一个代码片段不起作用？

**编辑**

只是为了防止任何歧义，我正在使用 Clang 和 Boost 1.52 进行编译，`--stdlib=libc++ -std=c++0x`整个代码块是这样的......

```
#include <boost/signals2.hpp>
#include <iostream>

struct ClassA
{
    boost::signals2::signal<void ()>    SigA;
    boost::signals2::signal<void (int)> SigB;
};

struct ClassB
{
    void PrintFoo()      { std::cout << "Foo" << std::endl; }
    void PrintInt(int i) { std::cout << "Bar: " << i << std::endl; }
};

int main()
{
    // using namespace std::placeholders;
    ClassA a;
    ClassB b, b2;
    a.SigA.connect( std::bind(&ClassB::PrintFoo, &b) );
    a.SigB.connect( std::bind(&ClassB::PrintInt, b,  std::placeholders::_1));
    a.SigB.connect( std::bind(&ClassB::PrintInt, &b2, std::placeholders::_1));

    a.SigA();
    a.SigB(4);
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-28T03:19:01.547

让我们看看包含是如何工作的：

`#include <boost/signals2.hpp>`包括`#include <boost/signals2/signal.hpp>` 哪个包括`#include <boost/signals2/slot.hpp>`哪个包括`#include <boost/bind.hpp>`哪个包括`#include <boost/bind/bind.hpp>`哪个包括在全局命名空间`include <boost/bind/placeholders.hpp>`中使用`static boost::arg<1> _1;`*，因此有歧义。

*：从技术上讲，`_1`它位于未命名的命名空间中，但由于 using 指令而可见。

一种解决方法是在文件顶部定义以下内容，以便`<boost/bind/placeholders.hpp>`不包括在内：

```
#define BOOST_BIND_NO_PLACEHOLDERS 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-28T03:10:25.433

C++ 看到两个名为`_1`. 它不知道您的意思是`std::placeholders::_1`代替 Boost 的`_1`. 这就是标准库将它们放在嵌套命名空间中的原因之一：防止像这样的意外冲突。

如果您需要它们更短，只需创建一个简单的命名空间别名：

```
namespace ph = std::placeholders 
```

那么它只是`ph::_1`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T03:19:18.200

GCC 提供有关您的错误的以下信息：

```
.../include/c++/4.7.0/functional:864:34: \
    error: candidates are: const std::_Placeholder<1> std::placeholders::_1
.../boost/1.49.0/boost/bind/placeholders.hpp:55:15: \
    error:                 boost::arg<1> {anonymous}::_1 
```

问题的提示可以在第二个错误中找到：`boost::arg<1> {anonymous}::_1`

原因是 boost 占位符位于全局命名空间内的匿名命名空间中。

```
namespace
{
    boost::arg<1> _1;
    // etc...
} // unnamed namespace 
```

由于 boost 占位符位于匿名命名空间中并且您正在导入`std::placeholders`到全局命名空间中，因此它们现在都可以在全局范围内使用。

因此，编译器无法知道您指的是哪个符号。

正如 Nicol 建议的那样，使用*命名空间别名*来创建速记前缀`std::placeholders::_1`以减少打字。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T07:30:24.077

由于您使用的是`std::bind`我想您有一些 C++11 支持。也考虑这个版本（即更喜欢 lambdas over `std::bind`）

```
int main()
{
    ClassA a;
    ClassB b, b2;
    a.SigA.connect( [&](){ b.PrintFoo(); } );
    a.SigB.connect( [&](int i){ b.PrintInt(i); } );
    a.SigB.connect( [&](int i){ b2.PrintInt(i); } );

    a.SigA();
    a.SigB(4);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-16T10:10:36.937

通过使用局部变量在范围内解决此问题的另一种方法：

```
{
    auto& _1 = std::placeholders::_1;
    auto f = std::bind(&Foo::bar, b, _1);
    ...
} 
```

# css - em 使用 ceil 或 floor 转换为 px，css 规范在哪里？

> ID：13596699
> 
> 赞同：1
> 
> 时间：2012-11-28T02:13:48.137
> 
> 标签：css

我知道 em 是字体大小的相对大小，问题是，当 font-size * em 不是整数时，比如 font-size: 12px * 1.4em = 16.8px，结果是 16px 还是 17px？我在哪里可以找到有关此的规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:20:09.367

它在此处的 CSS2.1 规范中进行了描述：http: [//www.w3.org/TR/CSS21/fonts.html#algorithm](http://www.w3.org/TR/CSS21/fonts.html#algorithm)

案文如下：

> 4.'font-size' 必须在与 UA 相关的容差范围内匹配。（通常，可缩放字体的大小四舍五入到最接近的整个像素，而位图字体的容差可能高达 20%。）进一步的计算，例如，通过其他属性中的“em”值，基于计算值'字体大小'。

所以回答你的问题：16.8px**可以**映射到 17px，但最终由客户端 UA 决定如何呈现文本。如果显示器具有逻辑子像素（如 Apple 的 Retina 显示器，其中 1 个 CSS 像素实际上是 2x2 实际像素），那么您可以使用非整数像素字体大小。

编辑：我想我误解了规范，因为现代用户代理能够将文本呈现为任意大小，甚至是非整数像素大小。CSS2 规范可以追溯到 1998 年，当时计算机上的排版与今天不同（例如，我不相信您可以强制 IE5 呈现 12pt 和 14pt 之间的文本）。所以我想这已经无关紧要了，就像你告诉现代浏览器渲染 0.5px 的文本一样，它实际上会给你一个很好的模糊 blob。

# haml - 在 Haml 中将属性拉伸到多行时，出现括号不平衡错误

> ID：13596701
> 
> 赞同：9
> 
> 时间：2012-11-28T02:14:28.553
> 
> 标签：haml

下面的代码`unbalanced bracket error`在第 4 行给了我

```
%ul
  - @sentences.each do |sentence|
    %li
      %a{id:"s-#{sentence.id}",
      href:"/sentence/#{sentence.id}",
      'data-type' => 'text',
      'data-url' => "/sentence/#{sentence.id}",
      'data-toggle' => 'manual'
      }= sentence.content
      %a{href:'#'}
        %i.icon-pencil

Haml::SyntaxError at /user/1/sentence
Unbalanced brackets.
file: sentences.haml location: nil line: 4 
```

任何的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T02:45:11.480

我自己发现了问题，关闭`}`不应该像任何其他语言一样在新行中

```
'data-toggle' => 'manual'}
  = sentence.content 
```

将工作

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-04T23:14:47.803

我发现其他解决方案可能适用于其他解决方案。根据[文档](http://haml.info/docs/yardoc/file.REFERENCE.html#multiline)，它需要用于`|`多行内容。当然右括号不能在新行中。例子：

```
 %a{id:"s-#{sentence.id}", |
  href:"/sentence/#{sentence.id}", |
  'data-type' => 'text', |
  'data-url' => "/sentence/#{sentence.id}", |
  'data-toggle' => 'manual'}= sentence.content 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-20T19:06:41.383

这个对我有用。尝试在最后一个键值对后添加逗号。

例如

`... 'data-url' => "/sentence/#{sentence.id}", 'data-toggle' => 'manual', }`

注意`,`后面`'manual'`。这对我有用。希望它可以帮助某人。

# list - 语法错误列表/字典

> ID：13596702
> 
> 赞同：0
> 
> 时间：2012-11-28T02:14:41.047
> 
> 标签：list, syntax, python-3.x

Python 3: someList = [0000, 1000, 0100]#, 1100, 0010, 1010, 0110, 1110, 0001, 1001, 0101, 1101, 0011, 1011, 0111, 1111]

如果我在列表中放置超过 2 个项目，有一个列表会给我一个语法错误

someList = [0000, 1000] 有效，但如果我再添加它，它会一直给我一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:38:44.783

使用相同的列表，我在 Python 3 中的数字“0100”上出现语法错误，不是因为它是第三项，而是因为值本身。我也只是在做一个语法错误

```
someList = []
someList.append(0100) 
```

所以实际上它似乎是导致问题的价值。我不确定您到底要做什么，但是如果您只想在列表中使用二进制文字，则可以使用以下内容：

```
someList = [0b0000, 0b1000, 0b0100, 0b1100, 0b0010, 0b1010, 0b0110, 0b1110, 0b0001, 0b1001, 0b0101, 0b1101, 0b0011, 0b1011, 0b0111, 0b1111] 
```

..其中“0b”前缀（即零b）表示二进制数。

关于不同 python 版本及其对基本文字值的处理的有趣链接： [How do you express binary literals in Python？](https://stackoverflow.com/questions/1476/how-do-you-express-binary-literals-in-python)

# javascript - twitter 引导轮播无法正常工作（symfony2 项目）

> ID：13596703
> 
> 赞同：1
> 
> 时间：2012-11-28T02:15:10.430
> 
> 标签：javascript, symfony, twitter-bootstrap, carousel

加载页面时，我的控制台说：

```
 $('.carousel').carousel is not a function 
```

生成的 html 源代码（我使用 symfony 和 twig 文件）如下所示：

```
<body>        

<div class="container">
    <div class="row">
           <div class="span6 well">
                 <div id="myCarousel" class="carousel">
                       <!-- Carousel items -->
                         <div class="carousel-inner">
                                    <div class="active item"><img alt="" src="/projet_etienne_auth/web/bundles/etiennepsav/images/carousel1.jpg"></div>
                                    <div class="item"><img alt="" src="/projet_etienne_auth/web/bundles/etiennepsav/images/carousel2.jpg"></div>
                         </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                       <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
                </div>
         </div>
    </div>
</div>  

<!-- Le javascript
================================================== -->  

    <script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/bootstrap.js" type="text/javascript" media="all" ></script>
    <script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/jquery-1.8.3.js" type="text/javascript" media="all" ></script>  
    <script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/bootstrap-carousel.js" type="text/javascript" media="all" ></script> 
    <script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/bootstrap-transition.js" type="text/javascript" media="all" ></script> 
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

      <script type="text/javascript">
         $(document).ready(function() {
   $('.carousel').carousel()  ;
 });

       </script> 
```

有人会发现有什么问题吗？干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T02:24:39.473

最后将您的javascript更改为以下内容..

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/bootstrap.js" type="text/javascript" media="all" ></script>
<script type="text/javascript">
$(document).ready(function() {
  $('.carousel').carousel();
});
</script> 
```

jquery 库需要是包含的第一个脚本文件，然后是 bootstrap.js 文件。

如果您没有将它们全部包含在引导下载包中，则仅包含以下脚本文件。

```
<script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/bootstrap-transition.js" type="text/javascript" media="all" ></script> 
<script rel="javascript" href="/projet_etienne_auth/web/bundles/etiennepsav/js/bootstrap-carousel.js" type="text/javascript" media="all" ></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T02:18:07.790

您的 jquery 库似乎有一个双重条目。

此外，将 jquery.min 或 jquery-1.8.3 移动到第一行（并删除其中一个，因为它们本质上是相同的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:53:52.727

最后我再次下载了boostrap.js，包括旋转木马

```
 http://twitter.github.com/bootstrap/customize.html 
```

像这样放入我的html头

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
          <script rel="javascript" href="{{ asset('bundles/etiennepsav/js/bootstrap.js') }}" type="text/javascript" media="all" ></script>

          <script type="text/javascript">
              $(document).ready(function() {
                  $('.carousel').carousel();
                                           });
           </script> 
```

我已经从我的 symfony 项目中删除了整个 web 文件夹

然后使用控制台命令重新加载它

```
 php app/console assets:install web 
```

# ruby-on-rails - 设计 - 强制 JSON 响应

> ID：13596713
> 
> 赞同：0
> 
> 时间：2012-11-28T02:16:11.163
> 
> 标签：ruby-on-rails, ruby, json, devise

如何在 Devise 上强制响应 JSON？

当我的控制器需要身份验证时

```
before_filter :authenticate_user! 
```

如果我发布 JSON 数据，则响应仅在 JSON 中。但我希望 Devise 始终以 JSON 响应某些控制器和操作。

编辑

我在用

```
:token_authenticatable 
```

所以我为每个电话传递 auth_token ：

```
curl --data "token=xyzHtPAFGuAuFiVWsxsZ&receipt=adsfadsfsdfdsf" http://0.0.0.0:3000/user/receipt 
```

但是当令牌不正确时，响应是 HTML 重定向

```
<html><body>You are being <a href="http://0.0.0.0:3000/users/sign_in">redirected</a>.</body></html> 
```

我希望该响应是 JSON

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:11:24.910

您需要定义所需响应的**内容类型**。

```
curl -X POST \
     -H "Content-Type:application/json" \
     -H "Accept:application/json \
     -d "token=xyzHtPAFGuAuFiVWsxsZ&receipt=adsfadsfsdfdsf" \
      http://0.0.0.0:3000/user/receipt 
```

请查看*curl*的手册页以获取更多参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:16:01.733

我不确定我是否理解您的问题，但这可能是您正在寻找的。只需在您的控制器中添加 respond_to，例如：

```
class MyController < ApplicationController
  respond_to :json

  ...
end 
```

# iphone - 如何在右侧耳机播放音频，在左侧播放音乐？

> ID：13596716
> 
> 赞同：0
> 
> 时间：2012-11-28T02:16:20.867
> 
> 标签：iphone, ios, xcode, audio, core-audio

我需要在右耳机上播放音频（22KHz），并从 iPhone 的左耳机播放列表中播放音乐。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:21:51.753

1.  创建两个音频文件，一个带有音乐，一个带有音频
2.  分别移除右声道/左声道
3.  同时播放它们

# php - 从 PHP 备份我的数据库时遇到问题

> ID：13596719
> 
> 赞同：0
> 
> 时间：2012-11-28T02:17:12.033
> 
> 标签：php, mysql, mysqldump, fopen, fwrite

我遇到的问题是 fopen()、fwrite() 和 fclose() 函数。这是我收到的错误：

警告：fopen(/db-backup-salisbury_school-20121128-021138.sql) [function.fopen]：未能打开流：C:\inetpub\wwwroot\omarejaz\sbyschool\q5.php 中的权限被拒绝，第 177 行

警告：fwrite() 期望参数 1 是资源，在第 178 行的 C:\inetpub\wwwroot\omarejaz\sbyschool\q5.php 中给出的布尔值

警告：fclose() 期望参数 1 是资源，在第 179 行的 C:\inetpub\wwwroot\omarejaz\sbyschool\q5.php 中给出的布尔值

这部分 php 的代码可以在下面找到任何帮助将不胜感激！

```
 * Save SQL to file
 * @param string $sql
 */
protected function saveFile(&$sql, $outputDir = '.')
{
    if (!$sql) return false;

    try
    {
        $handle = fopen($outputDir.'/db-backup-'.$this->dbName.'-'.date("Ymd-His", time()).'.sql','w+');
        fwrite($handle, $sql);
        fclose($handle);
    }
    catch (Exception $e)
    {
        var_dump($e->getMessage());
        return false;
    }

    return true;
} 
```

} ?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:21:12.897

我相信他正在使用 IIS 运行 Windows 网络服务器 - 从 C:\Inetput\wwwroot 目录结构判断......所以在 Windows 中你需要以这种方式处理它

如果您的脚本位于此处

```
C:\inetpub\wwwroot\omarejaz\sbyschool\q5.php 
```

然后，您需要在输出目录中使用正确的 Windows 目录结构指定完整目录。请记住，您可能必须转义\，因为在PHP 中\ 是转义字符。

```
$OutputDir = "C:\\inetpub\\wwwroot\\omarejaz\\sbyschool\\tmp"; 
```

然后在 Windows 中确保您在“tmp”文件夹上设置了适当的权限，以允许 IIS 对其进行写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:31:40.940

您需要将 $outputDir 设置为 '/tmp' 或您的 PHP 脚本可以写入的内容。

如果从命令行运行脚本，则运行脚本的用户需要写权限。如果从 Web 浏览器运行，则 apache 或 'nobody' 需要写入权限。

用于`chmod -R a+w <outputfolder>`设置所有用户的写入权限。

如果您无权访问网络服务器，则可以按照此视频使用 filezilla 设置文件夹权限：[http ://www.youtube.com/watch?v=oq0oM2w9lcQ](http://www.youtube.com/watch?v=oq0oM2w9lcQ)

如果您可以使用 file_get_contents() 获取文件的内容并将其回显到标准输出。如果您不打印任何其他内容，您的浏览器将提示您下载文件。

# android-emulator - 如何从 SDK 工具修订版 21 中为 Android 模拟器选择带键盘的皮肤

> ID：13596722
> 
> 赞同：0
> 
> 时间：2012-11-28T02:17:39.813
> 
> 标签：android-emulator

在 Android SDK 20.0.3 我可以得到这个 ![在 Android SDK 20.0.3 我可以得到这个](../Images/79ca8af83d2465a87721de9fdd082da7.png)

但现在在 Rev 21 上，我无法使用键盘获取皮肤。如何在模拟器上获得带键盘的皮肤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:45:48.323

我检查了 AVD Manager，我认为您无法使用键盘获得模拟器屏幕，但您可以使用物理键盘（与 PC 或笔记本电脑相连的键盘）。

但是，您可以在屏幕上显示其他按钮，例如 HOME、MENU 等。

![在此处输入图像描述](../Images/b290a8d7847ee763a6c39d1b57aff35d.png)

# .net - UploadString 需要 60 秒才能发布非常短的字符串

> ID：13596726
> 
> 赞同：0
> 
> 时间：2012-11-28T02:18:08.587
> 
> 标签：.net, webclient

我正在创建测试。我的 UDP 测试客户端向我的 UDP 服务发送消息。有效负载是一个 JSON 字符串。当它找到属性“ForwardingAddress”时，UDP 服务会这样做：

```
WebClient.UploadString(forwardingAddress, payload) 
```

所有这些都有效，但我的模拟网络服务器使用裸套接字和围绕从套接字获得的流包裹的 StreamReader 实现，ReadToEnd() 需要 60 秒才能返回。

这闻起来很像超时值。有谁知道这个超时可以在哪里设置？否则我将被迫用循环和字符串解析状态机替换 ReadToEnd。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:40:56.600

有一个类 HttpListener 实现了 HTTP 协议的服务器端。

在内部，我敢说它包含我不想写的字符串解析状态机的非常完整的实现。

这是完全正确的——“TCP-IP”是一套协议，其中 FTP 和 HTTP 是其中的成员。我对框架这一部分的完整性印象深刻。最令人印象深刻的是微软。

# c++ - 模板参数推导失败

> ID：13596728
> 
> 赞同：5
> 
> 时间：2012-11-28T02:18:20.597
> 
> 标签：c++, templates

我编写了以下代码，模板参数推导失败：

```
template<int>
struct num {};

template<int m>
void match(num<2*m>) {
}

int main()
{
  match(num<2>());
  return 0;
} 
```

我凭直觉知道编译器无法推断出正确的`m`，但我想了解它为何失败的理论基础。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T02:21:46.937

好吧，您基本上是在要求编译器`2 * m == 2`为您解方程，以便`m`确定`match`. 编译器不会在模板参数推导期间求解方程，无论它们多么简单和明确。

14.8.2.4/14 (C++03)、14.8.2.5/16 (C++11) 中的语言规范涵盖了您的情况并有类似的示例

> **14**如果在声明具有非类型模板参数的函数模板 *中*，在函数参数列表中的表达式中使用 了非类型*模板参数*，则必须始终显式指定或推导相应的*模板参数*其他地方，因为对于这样的*模板参数*，类型推导总是会失败。

```
template<int i> class A { /* ... */ };
template<short s> void g(A<s+1>);

void k() {
  A<1> a;
  g(a); //error: deduction fails for expression s+1
  g<0>(a); //OK
} 
```

至于为什么这样做……我认为很明显，在一般情况下，求解数学方程的问题太复杂了。它还可能导致模棱两可的解决方案或不属于预期域的解决方案。例如，您希望编译器推断`match(num<3>())`什么？

# ember.js - 在嵌套视图中使用 `afterRender` 钩子

> ID：13596733
> 
> 赞同：2
> 
> 时间：2012-11-28T02:19:16.387
> 
> 标签：ember.js

[如果您想先看代码，这里是 jsFiddle](http://jsfiddle.net/arasbm/vPbM4/4/)

我想做的很简单：在当前路由中的所有视图完成渲染后，从 jQuery 和 jsPlumb 库中执行一些（实际上很多）视图层 Javascript 代码。在从[这个解决方案中](https://stackoverflow.com/a/13339048/527559)获得一些帮助并发现 ember-latest 刚刚更新为包含`afterRender`hook 之后，我决定升级。我现在有了万能的`afterRender`钩子。

我插入到 dom 中的所有视图都有一个`block`与之关联的类。因此，我一直在测试以查看是否所有视图都在 dom 中的方式正在使用`$('.block').size()`并查看它是否与预期的数字匹配。

但是，当我尝试在我的应用程序中使用这个钩子时，我遇到了一些问题。`afterRender`在调用`connectOutlets`. 当我打印出 dom 中的块数时，我总是只得到 1 个块，而应该有 10 个。

如果我将此代码放在`didInsertElement`我的本地`block`视图中：

```
didInsertElement: () ->
    knob = this.$("##{@get 'knobId'}")
    name = this.$(".name")
    main = this.$(".main") #block html content will be injected into main
    knob.hide()

    Ember.run.scheduleOnce('afterRender', this, ()->
      console.log ">> block count: ", $(".block").size()
    )
    ... 
```

然后我得到以下输出：

```
>> block count: 1
>> block count: 10
>> block count: 10
>> block count: 10
>> block count: 10
>> block count: 10
>> block count: 10
>> block count: 10
>> block count: 10
>> block count: 10 
```

出于某种原因，第一次迭代我在 dom 中只得到了 1 个*块*，之后我得到了全部 10 个。我不知道为什么。但这里的主要问题是，如果我把钩子放在里面`didInsertElement`，代码会根据数据执行任意数量的视图（在这个例子中是 10）。但是，我只想在所有视图完成渲染后运行一次此代码。

请注意，我正在使用的视图具有嵌套数据。我试图[在 jsFiddle 上重现这一点，](http://jsfiddle.net/arasbm/vPbM4/4/)但我失败了，因为它似乎在小提琴上都能找到和花花公子。也许是因为我的观点很大而且很复杂，它会导致一些同步问题？无论如何，我认为我们可以使用小提琴作为讨论解决方案的一种方式，我可以在本地对其进行测试。

我试图解决这个问题的一个技巧是安排我的代码在 500 毫秒延迟后使用`Ember.run.later`. 这确实解决了我本地机器上的问题。但是，使用计时器来做这件事是非常牛粪，并且不能可靠地工作，因为不同的浏览器或机器可能需要更长的时间来呈现视图。

这是一个可以重现的问题，我已经花了很多时间试图找到解决方案。我将不胜感激在此处重现问题或找到解决方案的任何帮助。

**编辑（解决方法）：**感谢您帮助我解决此问题，并通过查看[有关类似问题的这篇文章](https://stackoverflow.com/a/12097401/527559)，我想出了以下临时解决方法，我将其放入路由器代码中：

```
 # Keep trying until there are two or more blocks in DOM
    blocksLoaded = ->
      console.log "blocks number ...: ", $('.block').size()
      if $('.block').size() > 1
        console.log "Yay!...we have ", $('.block').size()
        startTraversingBlocks()
      else
        Ember.run.next(this, ()->
          blocksLoaded()
        )

    blocksLoaded() 
```

这输出：

```
blockies number ...: 0
blockies number ...: 1
blockies number ...: 1
blockies number ...: 1
...
blockies number ...: 1
blockies number ...: 10
Yay!...we have 10 
```

正如卢克指出的那样，这里的问题是我的嵌套视图正在多个 RunLoop 上呈现。当我刷新浏览器时，我`blockies number ...: 1`每次都会得到不同数量的输出，在我的测试期间任何地方都在 4 到 10 次之间。

在我看来，这不是一个很好的解决方案，但它似乎适用于我的用例。我觉得这里需要另一个钩子，当保证视图中的所有元素都可以通过 jQuery 选择器访问时，它允许访问 DOM，但也许我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:49:59.277

我向 Kris Selden 提出了这个问题，他说“afterRender 是在该运行循环的渲染队列完全刷新之后；我猜这超过了一个循环”

最可能的可能性是您加载了记录数组。也许它从一个项目开始，然后再加载 9 个。如果您排除数据加载，也许您的代码中有一个`Ember.run.next`或`Ember.run.later`某处？

# java - 从 XMLGregorianCalendar 到 Date/Calendar 增加了额外的时间/不需要

> ID：13596740
> 
> 赞同：7
> 
> 时间：2012-11-28T02:20:09.570
> 
> 标签：java, web-services, jakarta-ee, web

我正在开发一个 Web 服务的客户端，该服务公开 (.wsdl) 合同，它要求请求参数上的 yyyy-MM-dd 格式为 1，但是基于 .wsdl 自动生成的 POJOS 将日期属性创建为 XMLGregorianCalendar 类型。

* * *

**我的问题不是转换为 XMLGregorianCalendar 或从 XMLGregorianCalendar 转换，请参阅下面的实用程序：**

```
public static XMLGregorianCalendar toXMLGregorianCalendar(Calendar c){
 GregorianCalendar gc = new GregorianCalendar();
 gc.setTimeInMillis(c.getTimeInMillis());
 XMLGregorianCalendar xc= null;
try {
    xc = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);
} catch (DatatypeConfigurationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
 return xc;
} 
```

* * *

**我的问题是从 XMLGregorianCalendar 到 Date/Calendar 在调用 calendar.getTime(); 时向我的 yyyy-MM-dd 添加了额外的时间/不需要的数据；**

在特定的代码段中，我需要从 XMLGregorianCalendar 转到 Date

```
if (repairOrderType.getCloseDate() != null) {

                LOG.debug("ServiceHistoryMapper, processRepairOrders() , repairOrderType.getCloseDate() BEFORE:"
                        + repairOrderType.getCloseDate());
                String date = repairOrderType.getCloseDate().getYear() + "-"
                        + repairOrderType.getCloseDate().getMonth() + "-"
                        + repairOrderType.getCloseDate().getDay();

                //Approach #1, trying to remove hour,minute,sec values by calendar.clear() method , not successful 
                Calendar calendar = Calendar.getInstance();
                calendar.set(repairOrderType.getCloseDate().getYear(),
                        repairOrderType.getCloseDate().getMonth(),
                        repairOrderType.getCloseDate().getDay());
                calendar.clear(Calendar.HOUR);
                calendar.clear(Calendar.MINUTE);
                calendar.clear(Calendar.SECOND);
                calendar.clear(Calendar.MILLISECOND);

                /*Approach#2 , trying to remove hour,minute,sec values using SimpleDateFormat ,
                 * also not successful. SimpleDateFormat or DateFormat are use to format String output NOT remove internal data
                 *
                DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
                Calendar calendar = formatter.getCalendar();
                calendar.set(repairOrderType.getCloseDate().getYear(),
                repairOrderType.getCloseDate().getMonth(),
                repairOrderType.getCloseDate().getDay());
                */

                LOG.debug("ServiceHistoryMapper, processRepairOrders() , repairOrderType.getCloseDate() AFTER:"
                        + calendar.getTime());
                repairOrder.setCloseDate(calendar.getTime());

            } 
```

输出：

2012 年 11 月 27 日 18:10:39.743 调试 com.tms.owners.integration.nsh.mapping.ServiceHistoryMapper - ServiceHistoryMapper、processRepairOrders()、repairOrderType.getCloseDate() **BEFORE:2012-04-30**

2012 年 11 月 27 日 18:10:51.413 调试 com.tms.owners.integration.nsh.mapping.ServiceHistoryMapper - ServiceHistoryMapper、processRepairOrders()、repairOrderType.getCloseDate() 之后：**2012 年 5 月 30 日星期三 18:00:00 PDT**

正如您在上面看到的，BEFORE 日期是 BEFORE:2012-04-30，AFTER 日期是**2012 年 5 月 30 日 18:00:00 PDT**，不需要的时间是“18:00:00 PDT”。

* * *

以下是我发送到服务的实际请求 XML：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns4:VehicleServiceHistoryDetails
            xmlns="urn:tms.toyota.com/Components" xmlns:ns2="urn://esb.ari.xxxxxx.com/2008/12/10/schemas/common/Customer"
            xmlns:ns3="urn:incentives.ari.xxxxxx.com/StandardHeader"
            xmlns:ns4="urn://esb.ari.xxxxxx.com/2008/12/10/schemas/History"
            xmlns:ns5="http://ice.ari.xxxxxx.com/EMF" xmlns:ns6="urn:ari.xxxxxx.com/rtmheader">
            <ns5:ApplicationArea>
                <ns5:CreationDateTime>2012-11-27T18:11:23.071-08:00
                </ns5:CreationDateTime>
                <ns5:Sender />
                <ns5:UserArea />
            </ns5:ApplicationArea>
            <ns4:VehicleServiceHistoryDataArea>
                <ns4:VehicleServiceHistoryHeader>
                    <ns3:TimeStamp>2012-11-27T18:11:23.071-08:00</ns3:TimeStamp>
                    <ns3:SourceSystem>TOO</ns3:SourceSystem>
                    <ns4:SourceKey>TOY1TWXE</ns4:SourceKey>
                </ns4:VehicleServiceHistoryHeader>
                <ns4:VehicleServiceHistory>
                    <ns4:VIN>XXXXXXXXXXXXXXXX</ns4:VIN>
                    <ns4:RepairOrder>
                        <ns2:RepairOrderDealer>
                            <DealerNumber>29059</DealerNumber>
                        </ns2:RepairOrderDealer>
                        <ns2:RepairOrderNumber>0088745</ns2:RepairOrderNumber>
                        <ns2:CloseDate>2012-05-30-07:00</ns2:CloseDate>
                    </ns4:RepairOrder>
                </ns4:VehicleServiceHistory>
            </ns4:VehicleServiceHistoryDataArea>
        </ns4:VehicleServiceHistoryDetails>
    </S:Body>
</S:Envelope> 
```

您可以在 2012-05-30-07:00 的请求 xml 中看到添加了额外的“-07:00”数据，我只想要 2012-05-30。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:00:38.967

在 XML 数据类型的上下文中，XMLGregorianCalendar 是通过 javax.xml.datatype.DatatypeFactory 中的工厂方法创建的，它似乎有一个名为 newXMLGregorianCalendarDate(int year, int month, int day, int timezone); 的方法。

* * *

所以我创建了一个实用方法：

```
public static XMLGregorianCalendar toXMLGregorianCalendarDateOnly(Calendar c){
     GregorianCalendar gc = new GregorianCalendar();
     gc.setTimeInMillis(c.getTimeInMillis());
     XMLGregorianCalendar xc= null;
    try {
        xc = DatatypeFactory.newInstance().newXMLGregorianCalendarDate(gc.get(Calendar.YEAR),Calendar.MONTH,Calendar.DAY_OF_MONTH,DatatypeConstants.FIELD_UNDEFINED);
    } catch (DatatypeConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     return xc;
    } 
```

现在问题已解决，我们得到了所需的 yyyy-MM-ddd。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-21T07:56:27.277

你也可以用以下更易读的方式编写它：

```
GregorianCalendar gc = new GregorianCalendar();
gc.setTimeInMillis(c.getTimeInMillis());

XMLGregorianCalendar calendar = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);
calendar.setMillisecond(DatatypeConstants.FIELD_UNDEFINED);
calendar.setTimezone(DatatypeConstants.FIELD_UNDEFINED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T08:49:47.597

我使用下面的代码来解决同样的问题。

```
public  static XMLGregorianCalendar toXMLGregorianCalendarWithoutTimeStamp(String date) {
        Date mDate = null;
        GregorianCalendar cal = new GregorianCalendar();
        XMLGregorianCalendar xmlGregorianCalendar;
        DateFormat df = new SimpleDateFormat("dd-MM-yyyy");
        try {
            mDate = df.parse(date);
            cal.setTime(mDate);
            xmlGregorianCalendar = DatatypeFactory.newInstance()
                    .newXMLGregorianCalendarDate(cal.get(Calendar.YEAR),
                            cal.get(Calendar.MONTH) + 1,
                            cal.get(Calendar.DAY_OF_MONTH),
                            DatatypeConstants.FIELD_UNDEFINED);
            return xmlGregorianCalendar;

        } catch (DatatypeConfigurationException e) {
            LOGGER.error("Error in getCustomerCDRResponse Date Formate Type Configuartion :: " + e);
        } catch (ParseException e) {
            LOGGER.error("Error in getCustomerCDRResponse Date Parsing :: " + e);
        }
        return null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T05:30:26.513

尝试这个。

```
Date dob=null;
    DateFormat df=new SimpleDateFormat("dd/MM/yyyy");
    dob=df.parse( "10/02/2014 11:15:00" );
    GregorianCalendar cal = new GregorianCalendar();

    cal.setTime(dob);
XMLGregorianCalendar xmlDate3 = DatatypeFactory.newInstance().newXMLGregorianCalendarDate(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH)+1, cal.get(Calendar.DAY_OF_MONTH),DatatypeConstants.FIELD_UNDEFINED);
System.out.println(xmlDate3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T07:36:03.417

如果您使用 javax.xml.bind.Marshaller 来准备 SOAP 主体，那么不需要的行为的根源就在您的 xlmns:ns2 中。字段 ns2:CloseDate 是类型（或一些其他类型，包括日期和时间）：

```
{http://www.w3.org/2001/XMLSchema}dateTime 
```

将其更改为（或其他没有小时和分钟的日期类型）：

```
{http://www.w3.org/2001/XMLSchema}date 
```

如果您不管理此 xlmns，只需接受您的 CloseDate 必须定义时间。如果没有它，称为 Web 服务的时间声明将不合适（我不知道确切的价值，但我打赌 0:00）

# java - 我如何运行 oracle 客户端服务器教程？

> ID：13596742
> 
> 赞同：0
> 
> 时间：2012-11-28T02:20:27.203
> 
> 标签：java, oracle, client, client-server

我正在尝试[在此处实施本教程，](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)但我不明白如何运行它。

我做了以下事情：

1.  创建 2 个 java 项目，一个带有客户端源文件，另一个项目包含服务器和协议代码

2.  进入我的命令提示符并 cd 进入我的服务器项目目录

3.  设置路径进入java目录和jdk目录

4.  在创建文件`.java`之后键入带有文件名的 javac`.class`

5.  键入 java KnockKnockProtocol

    > 错误：在类 KnockKnockProtocol 中找不到主方法，请将主方法定义为：public static void main(string[] args)

6.  输入 java KnockKnockServer 然后终端屏幕不允许我输入任何其他内容

我是一个完整的java初学者，第一次做这一切。所以我真的做的不多。我什至不确定我所做的是否正确。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:31:45.180

首先，在上面提到的教程中，`KnockKnockServer.java`是创建服务器套接字的服务器类。

`KnockKnockProtocol.java`是客户端和服务器用来通信的协议。

java程序的入口点是main方法：

```
 public static void main(String... args){} 
```

使用以下命令启动服务器：

```
 javac KnockKnockServer.java
     java KnockKnockServer 
```

# vb.net - 在 VB.NET 中将 JPEG 转换为 PNG（保存的输出没有扩展名）

> ID：13596747
> 
> 赞同：1
> 
> 时间：2012-11-28T02:21:16.447
> 
> 标签：vb.net, png, jpeg, converter

这是我转换图像的代码

```
Public Sub ConvertImage(ByVal Filename As String, _
      ByVal DesiredFormat As System.Drawing.Imaging.ImageFormat, _
      ByVal NewFilename As String)
        NewFilename = "ConvertedToPNG-" + NewFilename + "-" + Format(Date.Now, "MMMMddyyyyhhmmtt")
        Try
            Dim imgFile As System.Drawing.Image = _
              System.Drawing.Image.FromFile(Filename)
            imgFile.Save(txtPNGFileDestination.Text & "\" & NewFilename, DesiredFormat)
        Catch ex As Exception
            Throw ex
        End Try
    End Sub 
```

它运行正常，但保存的图像没有 PNG 文件扩展名，因此它只是一个文件。我做错什么了吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:06:04.377

只需将扩展名添加到 NewFileName。您还需要声明 NewFileName "ByRef"：

```
Public Sub ConvertImage(ByVal Filename As String, ByVal DesiredFormat As System.Drawing.Imaging.ImageFormat, ByRef NewFilename As String)
  NewFilename = "ConvertedToPNG-" + NewFilename + "-" + Format(Date.Now, "MMMMddyyyyhhmmtt") & "." & DesiredFormat.ToString 
```

# java - 在svn下的eclipse中找不到或编辑java类

> ID：13596752
> 
> 赞同：0
> 
> 时间：2012-11-28T02:21:51.673
> 
> 标签：java, eclipse, search

我正在开发一个位于 svn 和 Maven 下的大型开源项目。当我试图了解项目中包含的各种类和方法时，我意识到我无法使用通常的 Eclipse 搜索功能（例如 Ctrl + Shift + T）来搜索类名。我什至无法修改一个类而不会出现此错误：

**“此编译单元不在 java 项目的构建路径上”**

..我有点猜这意味着什么，但我真的不明白它为什么这么说。我的意思是我刚刚从 svn 中检查了项目，并像往常一样将它导入到 eclipse 中。

当我尝试这些简单的任务时，我还粘贴了一个屏幕截图，以便了解我在项目中的位置。

谁能告诉我这个项目有什么问题，并就如何解决这个问题给我一些指导？ ![在此处输入图像描述](../Images/0e1d855c04d0de922182a4583b9a357a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:28:03.767

Subversion 文件似乎~~可能~~没有包含 Eclipse 的 Java 构建路径，而您还没有创建路径。在您转到“项目”>“属性”并指定源文件夹的位置（可能还有其他内容，例如库）后，它将存储在 .classpath 文件中。

# android - 如何一步将声音从 SoundManager 加载到所有活动？

> ID：13596757
> 
> 赞同：0
> 
> 时间：2012-11-28T02:22:35.843
> 
> 标签：android, audio, android-activity, soundpool

我试图弄清楚如何在应用程序中加载各种声音。我的声音管理器工作顺利，如下所示：

```
package com.beeseries.contextclues;

import java.util.HashMap;

import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;

public class SoundManager {

private  SoundPool mSoundPool;
private  HashMap mSoundPoolMap;
private  AudioManager  mAudioManager;
private  Context mContext;

public void initSounds(Context theContext) {
mContext = theContext;
mSoundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
mSoundPoolMap = new HashMap();
mAudioManager = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
        }

public void addSound(int index, int SoundID)
{
mSoundPoolMap.put(index, mSoundPool.load(mContext, SoundID, 1));
}

public void loadWritingSounds(){
mSoundPoolMap.put(0, mSoundPool.load(mContext, R.raw.writing1, 1));
mSoundPoolMap.put(1, mSoundPool.load(mContext, R.raw.writing2, 1));
mSoundPoolMap.put(2, mSoundPool.load(mContext, R.raw.writing3, 1));
mSoundPoolMap.put(3, mSoundPool.load(mContext, R.raw.writing4, 1));
mSoundPoolMap.put(4, mSoundPool.load(mContext, R.raw.writing5, 1));
}

public void playSound(int index)
{
float streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
streamVolume = streamVolume /     mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
mSoundPool.play((Integer) mSoundPoolMap.get(index), streamVolume, streamVolume, 1, 0,     1f);
}

public void playLoopedSound(int index)
{
float streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
streamVolume = streamVolume / mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
mSoundPool.play((Integer) mSoundPoolMap.get(index), streamVolume, streamVolume, 1, -1, 1f);
}

} 
```

我的应用程序的打开活动包含以下代码片段，以使声音正常工作：

```
public SoundManager mSoundManager;

mSoundManager = new SoundManager();
mSoundManager.initSounds(getBaseContext());
mSoundManager.loadWritingSounds(); 
```

以下代码播放随机声音（有效，但仅在开放活动中）：

```
int b = randSound1.nextInt((whichSound.length));

mSoundManager.playSound(b); 
```

所以我的困境是我需要能够一次加载所有活动的 WritingSounds，因为现在，如果我尝试在另一个活动上播放声音，除非我添加代码片段来制作音响经理工作。

我该怎么办！？

# php - 有没有一种（简单的）方法可以在纯 PHP 中分离模型，有什么好的方法呢？

> ID：13596761
> 
> 赞同：3
> 
> 时间：2012-11-28T02:23:21.417
> 
> 标签：php, database, oop, frameworks

我正在寻找的是一种从构成网站的一组 PHP 文件中删除模型的方法。（对我来说）很难解释。

我所说的模型是指 MVC 意义上的模型。

例如说我有这个网站：

*   索引.php
*   关于.php
*   shop.php
*   结帐.php

以上所有 PHP 文件都使用相同的数据库。我通过使用 view.php 文件添加模板来分离视图，该文件呈现正确的模板并传递给它的值。

我**不想**使用已经存在的框架。我正在考虑在某种意义上写我自己的，只有我需要在其中使用的位。

如果有人想解释为什么这不是必需的，或者更好的做事方式，那么我也愿意。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:10:42.707

编写自己的 MVC 框架需要时间，但在此过程中您会学到很多东西。所以，如果你有时间/资源去做，我绝对鼓励你这样做。在这种情况下，这里有一些可以帮助您的小建议：

*   首先创建您的域模型。我假设您将采用 OO 方式，因此请考虑您的域问题并创建最能代表您的问题的抽象。尽量使其与[横切关注点](http://en.wikipedia.org/wiki/Cross-cutting_concern)（如持久性）脱钩。
*   多测试，多测试。在创建域模型时尝试测试（并运行测试）。当您在 6 个月内添加新功能并希望确保您没有破坏任何东西时，这将特别有价值。如果您可以将您的域模型与任何外部（如持久层或第三方 Web 服务）分开，那么测试将会简单得多。今天， [PHPUnit](http://www.phpunit.de/manual/current/en/)几乎是 PHP 单元测试的事实标准。
*   您不必从头开始编写所有内容。有很多库可以帮助您简化 MVC 框架的开发，以便您可以专注于您真正想要开发的内容。例如，您可以使用[Slim](http://www.slimframework.com/)来处理页面路由，或者您可以将持久性内容委托给[Doctrine 2](http://www.doctrine-project.org/)。
*   分析其他框架如何解决问题总是很好的。您可能想查看[Symfony](http://symfony.com/)或[Kohana 之](http://kohanaframework.org/)类的产品，甚至查看[Elgg](http://elgg.org/)如何处理其视图系统。此外，如果你想看看完全不同的东西，你可以看看[Seaside](http://www.seaside.st/)的建筑。

回到你原来的问题，对我来说，关键是让不同层的事情尽可能地分离。虽然我只使用了版本 1，但 Doctrine 2 似乎是一个很好的持久化候选者，因为它允许您创建一个完全独立于数据库的域模型。这是一大步。第二件事是如何处理视图系统。这完全取决于开发人员的口味。例如，我喜欢用对象建模一切，所以我喜欢 Seaside 的方法。另一方面，Elgg 处理视图的方式非常好，并且可能更适合 PHP 中处理事物的方式。这是您在决定要走的路线之前进行一些研究的时候。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:30:31.377

作为一个编写了自己的 PHP 框架的人，并且和你一样敏感，我可以告诉你，使用框架是一件好事。也就是说，从编写自己的代码开始——您将对框架的真实结构和实用性有更多的了解。

您将想要了解[单例](https://stackoverflow.com/questions/203336/creating-the-singleton-design-pattern-in-php5) [对象](http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html) [模式](http://php.net/manual/de/language.oop5.patterns.php)。它是您可以在框架中开发的对象种类的主要区别。

当您编写了一些您的文件/控制器（假设 MVC）包含的模型时，您将开始看到在哪里抽象其他扩展的“基本模式”（提示：DB 单例）。

当您开始引入配置等时，您将拥有您的第一个框架对象，所有其他基础都将从中进行扩展。

# c++ - 在 C++ 中，如何继承父类的非成员函数，这只是在文件中定义的？

> ID：13596763
> 
> 赞同：1
> 
> 时间：2012-11-28T02:23:25.250
> 
> 标签：c++, class, inheritance

我有这样的代码：

```
class A{  // declaration is simplified
 virtual void FNC1();
};
bool compare(S s1,S s2){
    return  s1<s2; 
}
void A::FNC1(){
  iterator it;
  sort(it.begin(),it.end(),compare);
}

class B : public A{
 virtual void FNC1();
};
void B:FNC1(){
  iterator it;
  // do something different

  sort(it.begin(),it.end(),compare);
} 
```

所以我用B类继承A类并覆盖了函数FNC1()，但问题是，在std::sort()函数中，第三个变量应该是一个函数，而这样的函数总是直接声明的。我真的很想知道如何避免复制和粘贴并使B直接继承此功能。我试图将 compare() 函数作为 A 的成员函数，它不会编译：sort(it.begin(), it.end(), this->compare);

我试图将比较函数包含到一个单独的头文件中，它说我不能声明它。我怎样才能正确地让 B 继承这个函数？因为，实际上，我有 3 个类都需要重用 A 的代码，而比较函数确实是一个复杂的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:34:52.407

您的问题是该函数`compare`是在标头中定义的，这意味着除了其签名之外，您还有它的主体。如果你在两个地方包含头文件，编译器会报错多个定义。您应该只在标头中有声明，在 .cpp 文件中有定义。

这应该进入A的标题，我们称之为`a.h`

```
bool compare(S s1,S s2); 
```

这应该进入`a.cpp`

```
bool compare(S s1,S s2){
    return  s1<s2; 
} 
```

顺便说一下，为了澄清术语，您不能继承非成员函数。你可以在任何地方使用任何非成员函数，只要你包含它的声明并链接到它的目标文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:26:55.357

您可以使比较函数成为`static`基类的成员函数，而不是使其独立：

```
class A{  // declaration is simplified
    virtual void FNC1();
public:
    static bool compare(const A& s1, const A& s2) {
        return ...; // The logic behind your compare function goes here
    }
}; 
```

您可以像这样使用该功能：

```
sort(it.begin(), it.end(), A::compare); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T02:35:55.533

你在正确的轨道上。您可以简单地重用该`compare`功能，无需修改它或尝试“继承”它或任何此类事情。

以下应该编译并运行没有错误。

```
#include <algorithm>
#include <vector>

struct S { int i; };

class A{  // declaration is simplified
public:
 virtual void FNC1();
};
bool compare(const S& s1,const S& s2){
    return  s1.i < s2.i;
}

void A::FNC1(){
  std::vector<S> v;
  std::sort(v.begin(),v.end(),compare);
}

class B : public A{
public:
 virtual void FNC1();
};
void B::FNC1(){
  std::vector<S> v;
  // do something different

  std::sort(v.begin(),v.end(),compare);
}

int main () { A a; B b; a.FNC1(); b.FNC1(); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T02:32:27.947

如果您比较 A 的成员，它不会编译的原因可能是您没有将其公开或保护。默认情况下，类的成员是私有的，派生类看不到私有成员。

你需要：

```
class A{  // declaration is simplified
{
    virtual void FNC1();

    protected:
        bool compare( S s1, S s2 ){...}
}; 
```

# blackberry-android - 检测黑莓 10 Android 运行时

> ID：13596766
> 
> 赞同：2
> 
> 时间：2012-11-28T02:23:42.317
> 
> 标签：blackberry-android

我将我的 android 应用程序移植到 bb10，它运行良好。但是，我应该关闭一些功能，因为它们需要 Google Play 商店。当我对 Amazon Kindle Fire 遇到类似问题时，我通过检查 android.os.Build.MODEL 并将 Kindle 设备列入黑名单来处理它。采用 BB10 的正确方法是什么？如果是，当前和未来设备的模型字符串是什么？或者他们是更好的处理方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T17:16:58.193

您可以使用 System.getProperty 方法来检测您的 Android 应用程序是否在 BlackBerry PlayBook 平板电脑或 BlackBerry 10 设备上运行。

System.getProperty(“os.name”);

在 BlackBerry 设备上，这将返回“qnx”。

通过： http: [//supportforums.blackberry.com/t5/Android-Runtime-Development/How-to-Detect-if-an-Android-Application-is-Running-on-a/ta-p/1470313](http://supportforums.blackberry.com/t5/Android-Runtime-Development/How-to-Detect-if-an-Android-Application-is-Running-on-a/ta-p/1470313)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T21:56:53.117

我们使用此函数来检测我们的 android 应用程序是否在 Blackberry 设备（BB10、Playbook）、Kindle Fire 或 Android 设备上运行：

```
/**
     * @return platform id
     * 1 Android
     * 2 Amazon
     * 3 Blackberry
     */
    public static int getPlatform(){
        if(android.os.Build.BRAND.toLowerCase().contains("blackberry")){
            return 3;
        }else if(android.os.Build.MODEL.toLowerCase().contains("kindle")){
            return 2;
        }else{
            return 1;
        }           
    } 
```

# c# - 为什么 `i += i++` 在 C 中为 1 而在 C# 中为 0？

> ID：13596768
> 
> 赞同：-1
> 
> 时间：2012-11-28T02:23:57.650
> 
> 标签：c#, c, postfix-operator

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

堆栈溢出有一个非常好的问题。

[对于 i = 0，为什么 (i += i++) 等于 0？](https://stackoverflow.com/questions/13516689/if-i-0-why-is-i-i-0-in-c)

但是当我在 C 中尝试相同的代码时，它给出了不同的结果：

```
int i = 0;          
i += i++;          // 1 in C and 0 in C#
printf("%d", i); 
```

但以下内容：

```
i = i++ + i;       // 1 in C and 1 in C#
i += i++ + i;      // 1 in C 
```

在 C# 中，它评估`++`and`=+`运算符，首先通过`tempVar`为每个 fo 分配它们并对`tempVars`. C如何实现它？还是建筑不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:30:15.137

C 标准没有指定评估顺序。它留给编译器实现。

# android - 没有互联网的 android 语音到文本

> ID：13596769
> 
> 赞同：1
> 
> 时间：2012-11-28T02:24:02.003
> 
> 标签：android, speech-recognition

1)**是否可以在没有 Internet 连接的情况下使用 Speech to Text API(Google)？**

或者

2)**我可以在没有 Internet 连接的情况下使用哪些 Speech to Text API 或应用程序？**

我正在寻找一种无需在服务器端进行转换即可使用语音转文本的方法。

版本：2.2 或 2.3 Android 版本

# jquery - BlackBerry Webworks 滚动超出宽度或高度

> ID：13596774
> 
> 赞同：0
> 
> 时间：2012-11-28T02:24:35.137
> 
> 标签：jquery, html, css, blackberry-webworks

移动应用程序的基本布局是：

html布局：

```
<div id="title">Title</div>
<div id="tabs">Some tabs</div>
<div id="container" x-blackberry-focusable="true">
<div id="contents" style="width: "1000px;" height: "1000px;">
<div x-blackberry-focusable="true" onmouseover="highlight(this)" onmouseout="noHighlight(this)">I am some content">
 . 
 .
 .
<div x-blackberry-focusable="true" onmouseover="highlight(this)" onmouseout="noHighlight(this)">I am some content"> 
</div>
</div> 
```

CSS代码：

```
#title
{
   height: 50px;
}
#tabs
{
   height: 40px;
}
#container
{
   overflow: auto;
} 
```

我使用jQuery设置了宽度和高度来检测手机屏幕的宽度和高度，使其适合不同版本的黑莓手机。jQuery 还用于检测 div#title、div#tabs 和 div#container 的宽度。最后，div#container 的高度是通过 div#title 和 div#tabs 高度减去屏幕高度来计算的。

div#container 中的内容总是大于 div#container 的高度或宽度。例如，在 Torch 9800 上，屏幕是 360x480 div#container 将是 360x390，那么里面的任何东西都会比 div#container 大。

即使我设置了 div#container overflow: auto，当我使用触控板或轨迹球滚动 div#container 内的内容时，即使内部容器大于 div#container，它也永远不会超过 div#container 的宽度或高度。

谁能帮帮我吗。我已经坚持了几个星期，真的很迷茫。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:31:23.700

尝试这个 -

```
 #container{
      overflow: scroll;
      -webkit-overflow-scrolling: touch;
  } 
```

**注意：**如果容器/内容具有位置属性（绝对或相对），它将无法正常工作。BB OS6 及以上版本使用 webkit。

# javascript - jQuery中的灵活/响应框奇怪的浏览器行为

> ID：13596775
> 
> 赞同：1
> 
> 时间：2012-11-28T02:24:36.400
> 
> 标签：javascript, jquery, css, responsive-design, fluid-layout

野生动物园：作品

Firefox：初始页面加载时出现奇怪的浮动问题，在浏览器调整大小后有效

Chrome：缩小窗口时结束框会快速跳动（尚未测试其他浏览器）

视频显示浏览器问题：[http ://tinypic.com/r/2gxo8w3/6](http://tinypic.com/r/2gxo8w3/6)

完整脚本：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
</head>
<style>
.box {
    height: 250px;
    background-color: #999;
    float: left;
    margin-right: 10px;
    margin-top: 10px;
}
#boxes {
    width: 100%;
    overflow: auto;
}
.end-box {
    margin-right: 0;
}
.top-box {
    margin-top: 0;
}
</style>
<body>
<div id='boxes'>
    <div class='box'>1</div>
    <div class='box'>2</div>
    <div class='box'>3</div>
    <div class='box'>4</div>
    <div class='box'>5</div>
    <div class='box'>6</div>
    <div class='box'>7</div>
    <div class='box'>8</div>
</div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
columns = Math.floor($('#boxes').width()/225); //min box/column size (before spacing)
var spacing = ((columns - 1) * 10/$('#boxes').width())*100; //10px spacing between boxes
$('.box').width(100/columns-spacing/columns+'%');
$('.box:nth-child('+columns+'n+0)').addClass('end-box');//removes margins
$('.box:nth-child(-n'+columns+')').addClass('top-box');

$(window).resize(function() {
    columnsCheck = Math.floor($('#boxes').width()/225);
    if(columns != columnsCheck) {
        $('.end-box').removeClass('end-box');
        $('.top-box').removeClass('top-box');
        $('.box:nth-child('+columnsCheck+'n+0)').addClass('end-box');
    }
    columns = columnsCheck;
    var spacing = ((columns - 1) * 10/$('#boxes').width())*100;
    $('.box').width(100/columns-spacing/columns+'%');
    $('.box:nth-child('+columns+'n+0)').addClass('end-box');
    $('.box:nth-child(-n'+columns+')').addClass('top-box');
});
</script>
</body>
</html> 
```

我该如何解决这个问题（同时保持 10px 的边距）。我也对通过 JavaScript/jQuery 创建这种效果的替代方法持开放态度（试图避免纯 CSS3）。

# android - Android 4.2 锁屏小部件图像位图不会加载

> ID：13596778
> 
> 赞同：3
> 
> 时间：2012-11-28T02:25:03.007
> 
> 标签：android, lockscreen, android-4.2-jelly-bean

我正在尝试在 Android 4.2 锁屏上的应用程序中启用我的小部件，它工作正常，但是它无法解析任何图像 uri。我得到的错误是这样的：

```
java.io.FileNotFoundException: /storage/emulated/0/Android/data/com.tvshowfavs/cache/22kifo7sdmyet7x7kphdgch69: open failed: EACCES (Permission denied)
    at libcore.io.IoBridge.open(IoBridge.java:416)
    at java.io.FileInputStream.<init>(FileInputStream.java:78)
    at java.io.FileInputStream.<init>(FileInputStream.java:105)
    at android.content.ContentResolver.openInputStream(ContentResolver.java:447)
    at android.widget.ImageView.resolveUri(ImageView.java:636)
    at android.widget.ImageView.setImageURI(ImageView.java:381)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at android.widget.RemoteViews$ReflectionAction.apply(RemoteViews.java:1146)
    at android.widget.RemoteViews.performApply(RemoteViews.java:2304)
    at android.widget.RemoteViews.apply(RemoteViews.java:2263)
    at android.widget.RemoteViewsAdapter$RemoteViewsFrameLayout.onRemoteViewsLoaded(RemoteViewsAdapter.java:286)
    at android.widget.RemoteViewsAdapter$RemoteViewsFrameLayoutRefSet.notifyOnRemoteViewsLoaded(RemoteViewsAdapter.java:335)
    at android.widget.RemoteViewsAdapter$4.run(RemoteViewsAdapter.java:993)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.os.HandlerThread.run(HandlerThread.java:60)
    Caused by: libcore.io.ErrnoException: open failed: EACCES (Permission denied)
    at libcore.io.Posix.open(Native Method)
    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
    at libcore.io.IoBridge.open(IoBridge.java:400) 
```

任何人都知道为什么它无法打开存储在模拟存储中的图像？此图像之前已使用 Environment.getExternalStorageDirectory() 下载并缓存，因此应正确写入存储目录。这是在尝试加载任何图像时收到此异常的 Nexus 10 上。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:39:48.500

Alright, I figured out the problem. I was using the RemoteView method setImageUri(), which it looks as though won't work since the different process can't access the file. The solution is to use setImageViewBitmap() and to decode the bitmap yourself, like this, for example: BitmapFactory.decodeFile(Uri.parse(uri).getPath())

I find it strange that the setImageUri() works fine with launchers but not on the lockscreen, however.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T23:12:08.943

托马斯是对的。使用`content:`Uri 而不是`file:`Uri 为我解决了这个问题。

请参阅[此示例项目，演示如何通过此 SO 答案中的 ContentProvider](https://github.com/commonsguy/cw-advandroid/tree/master/ContentProvider/Files)提供[文件](https://stackoverflow.com/a/6535817/57490)。

# ruby-on-rails - rspec 错误未定义的局部变量或方法“用户”michael hartl 教程

> ID：13596779
> 
> 赞同：1
> 
> 时间：2012-11-28T02:25:17.203
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我一直在研究 Michael Hartl 的 Rails 教程应用程序，以制作 Twitter 的复制品。我在我的测试套件中遇到了问题。我的代码和 Hartl 的代码之间的一个区别是我不想安装 FactoryGirl 来生成测试用户，所以我在测试开始时创建了一个用户。我觉得这可能是问题的一部分，但想了解究竟出了什么问题。我在下面的测试脚本（我在以下行收到错误：fill_in“Email”，带有：user.email）：

```
describe "Authentication" do 
subject {page}
before do
    @user = User.create(name: "Example User", email: "user@example.com", 
          password: "foobar", password_confirmation: "foobar")
end

describe "signin page" do
    before { visit signin_path }

    describe "with invalid information" do
        before { click_button "Sign in"}

        it { should have_selector('title', text: 'Sign in')}
        it { should have_selector('div.alert.alert-error', text: 'Invalid')}

    end

    describe "with valid information" do
        let(:user) { User.find_by_email(@user.email) }

        fill_in "Email", with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
    end

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }
    it { should have_link('Sign out')}

    describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
    end
end 
```

结尾

更新：设法自行解决 - 我最终通过使用有效信息块在描述中创建用户实例来解决，然后直接引用我创建的实例而不是使用 let(:user) 方法。

'describe "with valid information" do before do @user = User.create(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")

```
 fill_in "Email", with: @user.email
        fill_in "Password", with: @user.password
        click_button "Sign in"
    end

    it { should have_selector('title', text: @user.name) }
    it { should have_link('Profile', href: user_path(@user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }
    it { should have_link('Sign out')}
end' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:35:31.567

你没有包装这条线来`it`阻止。例如

```
 it "can sign up" do
   fill_in "Email", with: user.email
   fill_in "Password", with: user.password
   click_button "Sign in"
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:49:20.387

我认为你应该做的只是：

```
describe "Authentication" do 
  subject { page }

  let!(:user) do
    User.create(name: "Example User", email: "user@example.com", 
      password: "foobar", password_confirmation: "foobar")
  end

  describe "signin page" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in"}

      it { should have_selector('title', text: 'Sign in')}
      it { should have_selector('div.alert.alert-error', text: 'Invalid')}
    end

    describe "with valid information" do
      fill_in "Email", with: user.email
      fill_in "Password", with: user.password
      click_button "Sign in"
    end

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }
    it { should have_link('Sign out')}

    describe "after visiting another page" do
      before { click_link "Home" }

      it { should_not have_selector('div.alert.alert-error') }
    end
  end
end 
```

它是什么`let!`实例化了`user`访问器，在每个示例之后放入`before`块并重置。

# makefile - makefile 权限被拒绝

> ID：13596782
> 
> 赞同：4
> 
> 时间：2012-11-28T02:25:37.507
> 
> 标签：makefile, permission-denied

我正在尝试制作一个 C++ 程序，它可以找到走出迷宫的最短路线。不过，我现在正在努力让我的 makefile 正常工作。目前，我的 makefile 包含以下内容：

```
mazeIO : mazeIO.cpp maze.h
    g++ -g -Wall mazeIO.cpp maze.h -o mazeIO 
```

mazeIO.cpp 和 maze.h 是我在项目中仅有的两个文件。在命令行中我输入

```
make -f Makefile 
```

它编译得很好。然后我在打字

```
./mazeIO maze.txt 
```

maze.txt 是我要导航的迷宫输入。输入此内容后，出现以下错误：

```
bash: ./mazeIO: Permission denied 
```

我不懂为什么。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T15:10:04.967

这很简单。它需要可执行权限。

chmod +x mazeIO

如果需要由其他用户执行，您也可以使用 chmod。
如果需要由其他用户执行， man chmod 将为您提供所需的数值。谨慎授予完整的可执行、读取和写入权限 (chmod 777)

chmod 600 不会使其可执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T02:37:09.057

`x`由于存在 execute ( ) 标志，可执行文件在 Linux 中被称为可执行文件。您的“可执行文件”没有它 - 它只有读取 ( `r`) 和写入 ( `w`) 权限。要么您从可执行文件中删除权限（例如，使用`chmod 600 mazeIO`），要么您的 umask 很奇怪。umask 控制新文件的默认用户权限，如果您从默认值修改它，它可能会造成严重破坏。默认 umask 适用`0022`于大多数系统，我建议将其保留在那里，除非您知道会发生什么。我不知道为什么您可能会丢失 exec 位。

# php - 使用 PHP 调整图像大小，支持 PNG、JPG

> ID：13596794
> 
> 赞同：22
> 
> 时间：2012-11-28T02:28:21.130
> 
> 标签：php, image, resize, png

我正在使用这个类：

```
class ImgResizer {

function ImgResizer($originalFile = '$newName') {
    $this -> originalFile = $originalFile;
}
function resize($newWidth, $targetFile) {
    if (empty($newWidth) || empty($targetFile)) {
        return false;
    }
    $src = imagecreatefromjpeg($this -> originalFile);
    list($width, $height) = getimagesize($this -> originalFile);
    $newHeight = ($height / $width) * $newWidth;
    $tmp = imagecreatetruecolor($newWidth, $newHeight);
    imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);

    if (file_exists($targetFile)) {
        unlink($targetFile);
    }
    imagejpeg($tmp, $targetFile, 95);
}

} 
```

效果很好，但是使用 png 失败了，它会创建一个调整大小的黑色图像。

有没有办法调整这个类以支持 png 图像？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-28T02:42:42.460

```
function resize($newWidth, $targetFile, $originalFile) {

    $info = getimagesize($originalFile);
    $mime = $info['mime'];

    switch ($mime) {
            case 'image/jpeg':
                    $image_create_func = 'imagecreatefromjpeg';
                    $image_save_func = 'imagejpeg';
                    $new_image_ext = 'jpg';
                    break;

            case 'image/png':
                    $image_create_func = 'imagecreatefrompng';
                    $image_save_func = 'imagepng';
                    $new_image_ext = 'png';
                    break;

            case 'image/gif':
                    $image_create_func = 'imagecreatefromgif';
                    $image_save_func = 'imagegif';
                    $new_image_ext = 'gif';
                    break;

            default: 
                    throw new Exception('Unknown image type.');
    }

    $img = $image_create_func($originalFile);
    list($width, $height) = getimagesize($originalFile);

    $newHeight = ($height / $width) * $newWidth;
    $tmp = imagecreatetruecolor($newWidth, $newHeight);
    imagecopyresampled($tmp, $img, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);

    if (file_exists($targetFile)) {
            unlink($targetFile);
    }
    $image_save_func($tmp, "$targetFile.$new_image_ext");
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-07T02:07:58.497

我已经编写了一个可以做到这一点的类，并且非常好用且易于使用。它被称为
**[PHP 图像魔术师](https://github.com/Oberto/php-image-magician)**

```
$magicianObj = new imageLib('racecar.jpg');
$magicianObj -> resizeImage(100, 200);
$magicianObj -> saveImage('racecar_convertd.png', 100); 
```

它支持读写（包括转换）以下格式

*   jpg
*   PNG
*   gif
*   bmp

并且只能读取

*   psd的

**例子**

```
// Include PHP Image Magician library
require_once('php_image_magician.php');

// Open JPG image
$magicianObj = new imageLib('racecar.jpg');

// Resize to best fit then crop
$magicianObj -> resizeImage(100, 200, 'crop');

// Save resized image as a PNG
$magicianObj -> saveImage('racecar_small.png'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T02:49:51.310

你可以试试这个。目前它假设图像将始终是 jpeg。这将允许您加载 jpeg、png 或 gif。我还没有测试，但它应该工作。

```
function resize($newWidth, $targetFile) {
    if (empty($newWidth) || empty($targetFile)) {
        return false;
    }

    $fileHandle = @fopen($this->originalFile, 'r');

    //error loading file
    if(!$fileHandle) {
        return false;
    }

    $src = imagecreatefromstring(stream_get_contents($fileHandle));

    fclose($fileHandle);

    //error with loading file as image resource
    if(!$src) {
        return false;
    }

    //get image size from $src handle
    list($width, $height) = array(imagesx($src), imagesy($src));

    $newHeight = ($height / $width) * $newWidth;

    $tmp = imagecreatetruecolor($newWidth, $newHeight);

    imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);

    //allow transparency for pngs
    imagealphablending($tmp, false);
    imagesavealpha($tmp, true);

    if (file_exists($targetFile)) {
        unlink($targetFile);
    }

    //handle different image types.
    //imagepng() uses quality 0-9
    switch(strtolower(pathinfo($this->originalFile, PATHINFO_EXTENSION))) {
        case 'jpg':
        case 'jpeg':
            imagejpeg($tmp, $targetFile, 95);
            break;
        case 'png':
            imagepng($tmp, $targetFile, 8.5);
            break;
        case 'gif':
            imagegif($tmp, $targetFile);
            break;
    }

    //destroy image resources
    imagedestroy($tmp);
    imagedestroy($src);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-19T06:20:26.133

试试这个，使用它你还可以将图像保存到特定路径。

```
function resize($file, $imgpath, $width, $height){
    /* Get original image x y*/
    list($w, $h) = getimagesize($file['tmp_name']);
    /* calculate new image size with ratio */
    $ratio = max($width/$w, $height/$h);
    $h = ceil($height / $ratio);
    $x = ($w - $width / $ratio) / 2;
    $w = ceil($width / $ratio);

    /* new file name */
    $path = $imgpath;
    /* read binary data from image file */
    $imgString = file_get_contents($file['tmp_name']);
    /* create image from string */
    $image = imagecreatefromstring($imgString);
    $tmp = imagecreatetruecolor($width, $height);
    imagecopyresampled($tmp, $image, 0, 0, $x, 0, $width, $height, $w, $h);
    /* Save image */
    switch ($file['type']) {
       case 'image/jpeg':
          imagejpeg($tmp, $path, 100);
          break;
       case 'image/png':
          imagepng($tmp, $path, 0);
          break;
       case 'image/gif':
          imagegif($tmp, $path);
          break;
          default:
          //exit;
          break;
        }
     return $path;

     /* cleanup memory */
     imagedestroy($image);
     imagedestroy($tmp);
} 
```

现在您需要在保存图像时调用此函数...

```
<?php

    //$imgpath = "Where you want to save your image";
    resize($_FILES["image"], $imgpath, 340, 340);

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T18:13:55.787

我采用了 P. Galbraith 的版本，修复了错误并将其更改为按区域（宽度 x 高度）调整大小。对于我自己，我想调整太大的图像。

```
function resizeByArea($originalFile,$targetFile){

    $newArea = 375000; //a little more than 720 x 480

    list($width,$height,$type) = getimagesize($originalFile);
    $area = $width * $height;

if($area > $newArea){

    if($width > $height){ $big = $width; $small = $height; }
    if($width < $height){ $big = $height; $small = $width; }

    $ratio = $big / $small;

    $newSmall = sqrt(($newArea*$small)/$big);
    $newBig = $ratio*$newSmall;

    if($width > $height){ $newWidth = round($newBig, 0); $newHeight = round($newSmall, 0); }
    if($width < $height){ $newWidth = round($newSmall, 0); $newHeight = round($newBig, 0); }

    }

switch ($type) {
    case '2':
            $image_create_func = 'imagecreatefromjpeg';
            $image_save_func = 'imagejpeg';
            $new_image_ext = '.jpg';
            break;

    case '3':
            $image_create_func = 'imagecreatefrompng';
         // $image_save_func = 'imagepng';
         // The quality is too high with "imagepng"
         // but you need it if you want to allow transparency
            $image_save_func = 'imagejpeg';
            $new_image_ext = '.png';
            break;

    case '1':
            $image_create_func = 'imagecreatefromgif';
            $image_save_func = 'imagegif';
            $new_image_ext = '.gif';
            break;

    default: 
            throw Exception('Unknown image type.');
}

    $img = $image_create_func($originalFile);
    $tmp = imagecreatetruecolor($newWidth,$newHeight);
    imagecopyresampled( $tmp, $img, 0, 0, 0, 0,$newWidth,$newHeight, $width, $height );

    ob_start();
    $image_save_func($tmp);
    $i = ob_get_clean();

    // if file exists, create a new one with "1" at the end
    if (file_exists($targetFile.$new_image_ext)){
      $targetFile = $targetFile."1".$new_image_ext;
    }
    else{
      $targetFile = $targetFile.$new_image_ext;
    }

    $fp = fopen ($targetFile,'w');
    fwrite ($fp, $i);
    fclose ($fp);

    unlink($originalFile);
} 
```

如果您想允许透明度，请检查：[http ://www.akemapa.com/2008/07/10/php-gd-resize-transparent-image-png-gif/](http://www.akemapa.com/2008/07/10/php-gd-resize-transparent-image-png-gif/)

我测试了这个功能，它工作正常！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-25T07:00:34.980

接受的答案有很多错误在这里是固定的

```
<?php 

function resize($newWidth, $targetFile, $originalFile) {

    $info = getimagesize($originalFile);
    $mime = $info['mime'];

    switch ($mime) {
            case 'image/jpeg':
                    $image_create_func = 'imagecreatefromjpeg';
                    $image_save_func = 'imagejpeg';
                    $new_image_ext = 'jpg';
                    break;

            case 'image/png':
                    $image_create_func = 'imagecreatefrompng';
                    $image_save_func = 'imagepng';
                    $new_image_ext = 'png';
                    break;

            case 'image/gif':
                    $image_create_func = 'imagecreatefromgif';
                    $image_save_func = 'imagegif';
                    $new_image_ext = 'gif';
                    break;

            default: 
                    throw Exception('Unknown image type.');
    }

    $img = $image_create_func($originalFile);
    list($width, $height) = getimagesize($originalFile);
    $newHeight = ($height / $width) * $newWidth;
    $tmp = imagecreatetruecolor($newWidth, $newHeight);
    imagecopyresampled($tmp, $img, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);

    if (file_exists($targetFile)) {
            unlink($targetFile);
    }
    $image_save_func($tmp, "$targetFile.$new_image_ext");
}

$img=$_REQUEST['img'];
$id=$_REQUEST['id'];

  //  echo $img
resize(120, $_SERVER['DOCUMENT_ROOT'] ."/images/$id",$_SERVER['DOCUMENT_ROOT'] ."/images/$img") ;

?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-29T06:45:40.060

我知道这是一个非常古老的线程，但我发现 PHP 内置了 imagescale 函数，它可以完成所需的工作。[在此处](https://www.php.net/manual/en/function.imagescale.php)查看文档

示例用法：

```
$temp = imagecreatefrompng('1.png'); 
$scaled_image= imagescale ( $temp, 200 , 270); 
```

这里 200 是宽度，270 是调整后图像的高度。

# c++ - 按下的 WM_Char 键值的串联 win32API

> ID：13596797
> 
> 赞同：0
> 
> 时间：2012-11-28T02:28:46.300
> 
> 标签：c++, c, winapi

我正在尝试捕获 WM_CHAR 键的值，然后将所有捕获的值放入一个字符串中。我尝试将按下的键值 2、3、4 和 5 与 _tcscat 连接，生成的 TCHAR 字符串看起来像这样“22232323423423452345”我想知道如何使 TCHAR 字符串看起来像 2345。以下是我的代码有。

```
LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{

      static PMSG   pmsg ;  
      int           i, iType ;
      int           StrLen;
      TCHAR     StrBuf[9];
      static TCHAR         tBuf[32];
      TCHAR     MyTchar[8] = TEXT ("A");
      WORD          wCharCode;

     switch (message)
    {
      case WM_PAINT:
        hdc = BeginPaint (hwnd, &ps) ;
        GetClientRect(hwnd, &rect);
        SelectObject (hdc, GetStockObject (SYSTEM_FONT)) ;
        SetBkMode (hdc, TRANSPARENT) ;          
        for (i = min (cLines, cLinesMax), cScreenLine=1; i>0 ; i--, cScreenLine++)
        {
             iType  =   pmsg[i-1].message == WM_CHAR ;

     if (!iType)
            {

              StrLen= wsprintf(StrBuf, TEXT("%s"), TEXT(" "));
     }
            else
     {
    wCharCode = (WORD)(pmsg[i-1].wParam & 0xffff);
          memcpy(&MyTchar, &wCharCode, 2);
                 StrLen = wsprintf(StrBuf[2], TEXT("%s"), &MyTchar);
    _tcscat(tBuf, MyTchar);

      }

      EndPaint (hwnd, &ps) ;

      return 0 ;

     case WM_DESTROY:
         PostQuitMessage (0) ;
         return 0 ;
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:09:18.927

我不明白您在 WM_PAINT 消息期间的消息处理。您可能希望将 WM_CHAR 完全作为单独的消息处理，您可以在其中跟踪字符串。

在您的之外`WndProc`，您将需要`#include <string>;`和`std::wstring keyPresses;`

然后可以像处理 WndProc 中的任何其他事件一样处理 WM_CHAR。

```
case WM_CHAR:
    switch (wParam) 
    { 
        // First, handle non-displayable characters by beeping.
        case 0x08:  // backspace.
        case 0x09:  // tab.
        case 0x0A:  // linefeed.
        case 0x0D:  // carriage return.
        case 0x1B:  // escape.
        case 0x20:  // space.
            MessageBeep((UINT) -1); 
        break;

        // Next, handle displayable characters by appending them to our string.
        default:
            keyPresses += (wchar_t) wParam;
    } 
    break; 
```

然后，您可以对该字符串执行任何操作，包括在 WM_PAINT 消息期间[显示它。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535991%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:04:20.470

在使用字符串缓冲区之前，您应该先清除它们。你可以使用 1\. ZeroMemery 2\. memset

和或

```
TCHAR     StrBuf[9];
====>
TCHAR     StrBuf[9] = {0}; 
```

最后，为什么你使用 tBuf 作为静态变量？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:45:16.037

由于您使用的是 C++，因此请使用 std::string 或 std::wstring。它将更加简单和安全（没有缓冲区溢出）

# objective-c - 当有人点击IOS中的按钮时隐藏表格视图

> ID：13596798
> 
> 赞同：0
> 
> 时间：2012-11-28T02:28:54.120
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

我在 tableView1 的标题中有 2 个按钮。我想要这样当人们单击任一按钮时，会发生两件事：

tableView1 消失

tableView2 出现

或者

tableView1 出现

tableView2 消失

我怎样才能使用 IOS 做到这一点？

我尝试执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
if(indexPath.row == 0)
{
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setImage: [UIImage imageNamed:@"tableheader_01.png"]forState:UIControlStateNormal];
        button.frame = CGRectMake(0, 0, 159, 57);
        button.tag = 7;
        [button addTarget:self action:@selector(hideTable:) forControlEvents:UIControlEventTouchUpInside];

        UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button2 setImage: [UIImage imageNamed:@"tableheader_02.png"]forState:UIControlStateNormal];
        button2.frame = CGRectMake(159, 0, 161, 57);
        button2.tag = 7;
        [button2 addTarget:self action:@selector(hideTable:) forControlEvents:UIControlEventTouchUpInside];

        [cell.contentView addSubview: button];
        [cell.contentView addSubview: button2]; 
```

hideTable 的代码如下：

```
-(IBAction) hideTable : (id) sender;
{
    NSLog(@"test");

    [self.myTableView1 setHidden:YES];
    [self.myTableView2 setHidden:NO];
} 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:38:04.453

您可以使用单个表格视图并在单击按钮时更改数据源，然后重新加载表格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:55:05.060

你可以设置self.myTableView1.datasource = nil，当你需要使用它时，你可以设置self.myTableView1.datasource = self和[self.myTableView1 reloaddata]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:45:11.593

实现这样的 UI 有很多可能性。

1.您可以将两个按钮都保留在两个表格之外或上方。这样，如果您单击按钮 1，您将隐藏第一个表格并显示第二个表格，然后单击第二个隐藏第二个表格并显示第一个表格。

或者

2.在第一个表中，像您一样在第一行添加两个按钮。当您单击 button1 时，不是隐藏第一个表，而是在 numberofrows 方法中为 table1 数据源返回 1 并重新加载 table1，这样按钮就会在那里然后显示第二个表在第一个表下方。当用户单击第二个按钮然后隐藏第二个表并返回第一个表的新数据源并重新加载表 1。

或者

3.为两个数据源使用一个表。在第一行会有两个按钮。点击它们相应地重新加载表。

# php - 如何在 cURL POST 请求中使用数组

> ID：13596799
> 
> 赞同：45
> 
> 时间：2012-11-28T02:28:58.683
> 
> 标签：php, post, curl

我想知道如何使此代码支持数组？目前该`images`数组似乎只发送第一个值。

这是我的代码：

```
<?php
//extract data from the post
extract($_POST);

//set POST variables
$url = 'http://api.example.com/api';
$fields = array(
            'username' => "annonymous",
            'api_key' => urlencode("1234"),
            'images[]' => urlencode(base64_encode('image1')),
            'images[]' => urlencode(base64_encode('image2'))
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);
echo $result;

//close connection
curl_close($ch);
?> 
```

这就是在 api 收到的内容

```
VAR: username = annonymous
VAR: api_key = 1234
VAR: images = Array
array(3) { 
         ["username"]=> string(10) "annonymous" 
         ["api_key"]=> string(4) "1234" 
         ["images"]=> array(1) { // this should contain 2 strings :( what is happening?
                               [0]=> string(8) "aW1hZ2Uy" 
                               } 
         } 
```

中的第二个值发生了`images[]`什么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-28T02:40:55.487

您只是错误地创建了数组。您可以使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)：

```
$fields = array(
            'username' => "annonymous",
            'api_key' => urlencode("1234"),
            'images' => array(
                 urlencode(base64_encode('image1')),
                 urlencode(base64_encode('image2'))
            )
        );
$fields_string = http_build_query($fields); 
```

因此，您可以使用的整个代码是：

```
<?php
//extract data from the post
extract($_POST);

//set POST variables
$url = 'http://api.example.com/api';
$fields = array(
            'username' => "annonymous",
            'api_key' => urlencode("1234"),
            'images' => array(
                 urlencode(base64_encode('image1')),
                 urlencode(base64_encode('image2'))
            )
        );

//url-ify the data for the POST
$fields_string = http_build_query($fields);

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, 1);
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);
echo $result;

//close connection
curl_close($ch);
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-08-18T09:49:14.443

```
 $ch = curl_init();

    $data = array(
        'client_id' => 'xx',
        'client_secret' => 'xx',
        'redirect_uri' => $x,
        'grant_type' => 'xxx',
        'code' => $xx,
    );

    $data = http_build_query($data);

    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_URL, "https://example.com");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    $output = curl_exec($ch); 
```

# asp.net - 在 ID 中指定类 Css

> ID：13596804
> 
> 赞同：0
> 
> 时间：2012-11-28T02:29:51.127
> 
> 标签：asp.net, html, css

如何在我的 CSS 文件类中识别 id。

所以在我的 html 文件中，我创建了一个基本的标签和文本框。

```
<div id="User">
    <div>
        <div class="left">
            <asp:Label ID="Label1" runat="server" Text="User Name"></asp:Label>
        </div>
        <div class="right">
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        </div>
    </div>
</div> 
```

但是我如何在我的 CSS 文件中访问左右类，这就是我所拥有的。

```
#User
{
    .left {
        width: 30%;
        float: left;
        text-align: right;
    }
    .right {
        width: 65%;
        margin-left: 10px;
        float:left;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:34:44.143

不要像那样嵌套你的选择器。这应该工作

```
#User .left {
  width: 30%;
  float: left;
  text-align: right;
}
#User .right {
  width: 65%;
  margin-left: 10px;
  float:left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:33:06.413

您不需要#User 部分。以下就足够了

```
.left 
{
 width: 30%;
 float: left;
 text-align: right;
}

.right 
{
 width: 65%;
 margin-left: 10px;
 float:left;
} 
```

添加#User 部分的唯一原因是区分可能具有 .left 和 .right 类的其他 div，例如，如果你想这样做，那么你会去

```
#User .left {  background-color: blue; }
#User .right { /** CSS Code in here **/ }

<div id="User">
    <div class="left">Testing Left</div>
    <div class="right">Testing Right</div>
</div>
<br />
<br />
<div id="User2">
    <div class="left">Testing Left2</div>
    <div class="right">Testing Right2</div>
</div> 
```

在这种情况下，只有第一个 .left 将具有蓝色背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:34:45.763

```
#user.left and #user.right 
```

应该管用。你可以对像 td.left 这样的标签做同样的事情，它只会针对左类的 td 元素。

编辑：是的，不要像 MVCKarl 所说的那样嵌套

# ios - 提交AppStore审核后描述是否可以更改

> ID：13596810
> 
> 赞同：0
> 
> 时间：2012-11-28T02:30:44.707
> 
> 标签：ios, iphone, ipad, app-store

我打算将应用程序提交到 AppStore，但是，我还没有写完整的描述。

所以我将提交简要说明。

提交AppStore审核后描述是否可以更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:59:46.897

是的，描述可以随时编辑，即使在 Apple 批准二进制文件之后也是如此。屏幕截图也是可编辑的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:43:04.580

**不，描述不可更改，您需要重新提交应用程序才能进行更改

编辑-描述**实际上**是可变的，我的错误。对不起大家

# matlab - 当矩阵的所有条目都是变量时，如何在matlab中找出矩阵的特征值？

> ID：13596811
> 
> 赞同：4
> 
> 时间：2012-11-28T02:30:44.543
> 
> 标签：matlab, eigenvalue, function-handle

我有一个包含一堆未知常量的矩阵，如下所示：

```
 a*b     -c     -d     0
   -c      e     -a    -b-d
   -d     -a      d    -e
    0     -b-d   -e     a 
```

您可能会意识到它关于对角线对称，因此对角线值都是正数。所有常数均大于 0。

我想为matlab中的特征值解决这个问题。我该怎么做呢？我不知道 a、b、c、d 和 e 的值。我想做这样的事情：

```
d = eig(@getMatrix) 
```

但 eig 函数不接受函数句柄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:59:58.083

在 MATLAB 中没有问题。

```
>> syms a b c d e
>> M = [a*b     -c     -d     0
   -c      e     -a    -b-d
   -d     -a      d    -e
    0     -b-d   -e     a];

>> eig(M)
ans =
 a/4 + d/4 + e/4 + (a*b)/4 - ((51*a*d^3)/16 - (117*a^4*b)/16 + (27*a^3*d)/16 + (27*a*e^3)/16 + (57*b*d^3)/2 + (27*a^3*e)/16 + (27*d*e^3)/16 + (51*d^3*e)/16 + 6*((4*(2*b*d - (a*e)/4 - (a*d)/4 - (d*e)/4 - (a^2*b)/4 + (11*a^2)/8 + b^2 + c^2 + (19*d^2)/8 + (11*e^2)/8 + (3*a^2*b^2)/8 - (a*b*d)/4 - (a*b*e)/4)*((17*a*d^3)/64 - (39*a^4*b)/64 + (9*a^3*d)/64 + (9*a*e^3)/64 + (19*b*d^3)/8 + (9*a^3*e)/64 + (9*d*e^3)/64 + (17*d^3*e)/64 + (45*a^4)/256 + (285*d^4)/256 + (45*e^4)/256 - (a^2*b^2)/16 + (a^2*b^3)/8 + (3*a^2*b^4)/16 + (31*a^4*b^2)/128 + (a^4*b^3)/64 - (3*a^4*b^4)/256 + (3*a^2*c^2)/16 + (15*a^2*d^2)/128 - (9*a^2*e^2)/128 + (19*b^2*d^2)/16 - (b^2*e^2)/16 + (3*c^2*d^2)/16 + (15*c^2*e^2)/16 + 
...

(a*b*c^2*e)/8 + (3*a*b*d*e^2)/64 + (11*a*b*d^2*e)/64 + (a*b^2*d*e)/4 - (33*a^2*b*d*e)/32 - (5*a^2*b^2*d*e)/64 + (a*b*d*e)/4 + (a*c*d*e)/2 - 2*b*c*d*e) - 256*((17*a*d^3)/64 - (39*a^4*b)/64 + (9*a^3*d)/64 + (9*a*e^3)/64 + (19*b*d^3)/8 + (9*a^3*e)/64 + (9*d*e^3)/64 + (17*d^3*e)/64 + (45*a^4)/256 + (285*d^4)/256 + (45*e^4)/256 - (a^2*b^2)/16 + (a^2*b^3)/8 + (3*a^2*b^4)/16 + (31*a^4*b^2)/128 + (a^4*b^3)/64 - (3*a^4*b^4)/256 + (3*a^2*c^2)/16 + (15*a^2*d^2)/128 - (9*a^2*e^2)/128 + (19*b^2*d^2)/16 - (b^2*e^2)/16 + (3*c^2*d^2)/16 + (15*c^2*e^2)/16 + (15*d^2*e^2)/1...

Output truncated.  Text exceeds maximum line length of 25,000 characters for Command Window display. 
```

我在那里删除了很多。诚然，它相当混乱和冗长，但你真的能期待更好吗？

编辑：我应该评论说，就计算准确性而言，如此长的扩展公式可能是危险的。我见过人们盲目地使用如此混乱的表达式，在 Fortran 或 MATLAB 中对其进行评估。他们认为，因为它是“象征性的”，所以它也是准确的。当进行数值计算时，这完全是错误的。

在这些方面很可能存在巨大的减法抵消，巨大的正项和负项几乎相互抵消，留下一个微小的结果，由于浮点计算的动态范围有限，基本上毫无价值。谨防。至少，比较使用相同表达式完成的单精度和双精度计算。如果它们相差很大，请尝试扩展精度版本以验证双打没有问题。如果您没有测试过这样的表达式并对其进行了广泛的验证，请不要相信它。

# c++ - 如何使用 CMake 生成面向 Windows XP 的 Visual Studio 2012 项目？

> ID：13596816
> 
> 赞同：18
> 
> 时间：2012-11-28T02:31:30.817
> 
> 标签：c++, visual-studio, visual-studio-2012, cmake, windows-xp

随着 Visual Studio 2012 Update 1 的发布，我希望构建一个 C++ 项目来支持 Windows XP。有没有办法使用 CMake 生成针对 Windows XP 的项目？基本上，CMake 需要生成一个使用 Platform Toolset = Visual Studio 2012 - Windows XP (v110_xp) 的项目文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T10:21:50.563

根据[http://www.cmake.org/Bug/view.php?id=10722](http://www.cmake.org/Bug/view.php?id=10722)答案现在（很快）是的。

> 已在 CMake 2.8.11 版本中修复
> 
> 此处添加了一个新的“生成器工具集”功能：
> 
> [http://cmake.org/gitweb?p=cmake.git;a=commitdiff;h=7dab9977](http://cmake.org/gitweb?p=cmake.git;a=commitdiff;h=7dab9977) [^]
> 
> 现在可以从命令行运行 CMake
> 
> -G“Visual Studio 10”-T“v90”
> 
> 为了使用特定的工具集进行构建。我们还没有为此添加到 cmake-gui 的一流接口，但可以在配置之前添加缓存条目“CMAKE_GENERATOR_TOOLSET”以包含“-T”值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-28T08:35:00.367

根据[http://www.cmake.org/Bug/view.php?id=10722](http://www.cmake.org/Bug/view.php?id=10722)答案是~~否定~~的。

更新：上面提到的错误已通过以下评论解决：

> 已在 CMake 2.8.11 版本中修复
> 
> 此处添加了一个新的“生成器工具集”功能：
> 
> [http://cmake.org/gitweb?p=cmake.git;a=commitdiff;h=7dab9977](http://cmake.org/gitweb?p=cmake.git;a=commitdiff;h=7dab9977) [^]
> 
> 现在可以从命令行运行 CMake
> 
> -G“Visual Studio 10”-T“v90”
> 
> 为了使用特定的工具集进行构建。我们还没有为此添加到 cmake-gui 的一流接口，但可以在配置之前添加缓存条目“CMAKE_GENERATOR_TOOLSET”以包含“-T”值。

您还可以查看对其他答案的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:58:39.800

我认为您可以为 Visual Studio 2010/2012 生成一个解决方案。打开此解决方案，在 Visual Studio 中打开解决方案/项目，打开属性并将平台工具集重新配置为 v110_xp。

那你应该没事。但我仍在寻找解决方案如何设置命令行来构建 v110_xp 程序......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T03:50:42.523

我认为解决此问题的最佳方法是使用 CMake 为 Visual Studio 2010 构建项目，然后使用 Visual Studio 2012 打开项目。这样做时，使用的工具集将是适用于 WinXP 的 vs2010。

# php - WordPress 中自动生成的列在 HTML 中间分割内容？

> ID：13596818
> 
> 赞同：1
> 
> 时间：2012-11-28T02:31:41.443
> 
> 标签：php, html, image, wordpress, multiple-columns

我正在使用以下功能自动将 WordPress 帖子中的内容输出到 3 列。但是，当将带有图像的最少内容添加到帖子中时，该函数会在 img 标签 HTML 中间将内容拆分为另一列，从而破坏图像和内容。

知道如何解决这个问题吗？

```
function content_split($text, $separator = '<hr/>', $start = false ) {

if ( $start === false) {
    $string = '';
    $start = ceil(strlen($text) / 3);

    $string.= substr($text,0,$start);
    $string.= $separator;
    $string.= substr($text,$start,$start);
    $string.= $separator;
    $string.= substr($text,($start*2),$start);

    return $string;
}

$lastSpace = false;
$split = substr($text, 0, $start - 1);

// if the text is split at a good breaking point already.
if (in_array(substr($text, $start - 1, 1), array(' ', '.', '!', '?'))) {

$split .= substr($text, $start, 1);
// Calculate when we should start the split
$trueStart = strlen($split);

// find a good point to break the text.
} else {

$split = substr($split, 0, $start - strlen($separator));
$lastSpace = strrpos($split, ' ');

if ($lastSpace !== false) {
$split = substr($split, 0, $lastSpace);
}
if (in_array(substr($split, -1, 1), array(','))) {
$split = substr($split, 0, -1);
}

// Calculate when we should start the split
$trueStart = strlen($split);
}
//now we know when to split the text
return substr_replace($text, $separator, $trueStart, 0);

} 
```

# html - CSS在同一行对齐图像和文本

> ID：13596821
> 
> 赞同：57
> 
> 时间：2012-11-28T02:31:46.077
> 
> 标签：html, css, styles, alignment, image

几个小时以来，我一直在寻找和尝试不同的方法。我似乎无法将这两个图像和文本全部放在一行上。我希望图像和文本都在一行排列的图像、文本、图像、文本我的图像是这样编码的，具有简单的样式

```
 <img style='height: 24px; width: 24px; margin-right: 4px;' src='design/like.png'/><h4 class='liketext'>$likes</h4>
 <img style='height: 24px; width: 24px; margin-right: 4px;' src='design/dislike.png'/><h4 class='liketext'>$dislikes</h4> 
```

我的“liketext”类只有一个简单的文本颜色修饰符。使用此代码，第一个图像和文本位于同一行，下一个图像和文本位于下一行。我希望所有四个对象都在同一行。我真的试图自己解决这个问题，并感谢提供的任何帮助，希望这篇文章也能帮助其他人，谢谢！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-28T02:35:59.663

您可以使用（在 h4 元素上，因为它们默认为块）

```
display: inline-block; 
```

或者您可以将元素浮动到左侧/右侧

```
float: left; 
```

只是不要忘记清除浮动后

```
clear: left; 
```

* * *

@VSB 在下面分享的浮动左/右选项的更多视觉示例：

```
<h4> 
    <div style="float:left;">Left Text</div>
    <div style="float:right;">Right Text</div>
    <div style="clear: left;"/>
</h4>
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-09-28T06:35:57.633

您可以通过设置简单地将父标签中的图像和文本居中

```
div {
     text-align: center;
} 
```

垂直居中 img 和 span

```
img {
     vertical-align:middle;
}
span {
     vertical-align:middle;
} 
```

您可以在下面添加第二组，要提一提的是 h4 具有块显示属性，因此您可能需要设置

```
h4 {
    display: inline-block
} 
```

设置h4“内联”。

此处显示了完整的示例。

```
<div id="photo" style="text-align: center">
  <img style="vertical-align:middle" src="https://via.placeholder.com/22x22" alt="">
  <span style="vertical-align:middle">Take a photo</span>
</div>
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-01T12:58:10.037

这个问题是从 2012 年开始的，从那一天起有些事情发生了变化，并且由于它仍然从 google 获得大量流量，所以我想通过添加*flexbox*作为解决方案来完成它。

到目前为止，建议使用*flexbox*模式，即使它[缺乏 IE9 支持](https://caniuse.com/#search=flexbox)。

您唯一需要关心的是添加`display: flex`父元素。默认情况下，无需设置其他属性，该元素的所有子元素将在同一行对齐。

如果你想了解更多`flexbox`，你可以在[这里](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)做。

```
.container {
  display: flex;
}

img {
  margin: 6px;
}
```

```
<div class="container">
  <img src="https://placekitten.com/g/300/300" /> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-27T13:16:26.430

```
vertical-align: text-bottom; 
```

经过测试，这对我来说非常有效，只需将其应用于图像即可。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-28T02:42:46.030

首先，我不建议使用内联样式。如果必须，您应该尝试将浮点数应用于每个项目：

```
<img style='float:left; height: 24px; width: 24px; margin-right: 4px;' src='design/like.png'/>
<h4 style='float:left;" class='liketext'>$likes</h4>
<img style='float:left; height: 24px; width: 24px; margin-right: 4px;' src='design/dislike.png'/>
<h4 style='float:left;" class='liketext'>$dislikes</h4> 
```

之后可能需要进行一些调整，并清除浮动。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-28T02:46:06.437

参见示例：http: [//jsfiddle.net/6Rpkh/](http://jsfiddle.net/6Rpkh/)

```
<style>
img.likeordisklike { height: 24px; width: 24px; margin-right: 4px; }
h4.liketext { color:#F00; display:inline }
​&lt;/style>

<img class='likeordislike' src='design/like.png'/><h4 class='liketext'>$likes</h4>
<img class='likeordislike' src='design/dislike.png'/><h4 class='liketext'>$dislikes</h4> 
```

​</p>

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-28T02:48:27.630

H4 元素是块显示类型的元素。您可以强制 H4 具有内联显示类型，或者简单地使用像 P 这样的内联元素并根据需要设置它的样式。

供参考：[http ://www.w3.org/TR/CSS21/visuren.html#propdef-display](http://www.w3.org/TR/CSS21/visuren.html#propdef-display)

因此，您将更改 H4 的显示类型，例如：

```
<html>
<head>
   <title>test</title>
   <style type='text/css'>
     h4 { display: inline }
   </style>
  </head>
  <body>
  <img style='height: 24px; width: 24px; margin-right: 4px;' src='design/like.png'/><h4 class='liketext'>$likes</h4>
  <img style='height: 24px; width: 24px; margin-right: 4px;' src='design/dislike.png'/><h4 class='liketext'>$dislikes</h4>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-28T17:53:31.200

在这种情况下，您可以使用 display:inline 或 inline-block。

***例子：***

```
img.likeordisklike {display:inline;vertical-align:middle;  }
h4.liketext { color:#F00; display:inline;vertical-align:top;padding-left:10px; }
```

```
<img class='likeordislike' src='design/like.png'/><h4 class='liketext'>$likes</h4>
<img class='likeordislike' src='design/dislike.png'/><h4 class='liketext'>$dislikes</h4>
```

不要使用 float:left 因为再次需要写一个更清晰的行和它的旧方法也..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-28T02:36:16.230

尝试插入你`img`的`h4` [DEMO](http://jsfiddle.net/6ZHRm/20/)

```
<h4 class='liketext'><img style='height: 24px; width: 24px; margin-right: 4px;' src='design/like.png'/>$likes</h4>
<h4 class='liketext'> <img style='height: 24px; width: 24px; margin-right: 4px;' src='design/dislike.png'/>$dislikes</h4>​ 
```

# javascript - 使用带有计时器的 if else 语句

> ID：13596838
> 
> 赞同：1
> 
> 时间：2012-11-28T02:34:01.520
> 
> 标签：javascript, timer, if-statement

我正在尝试使用计时器设置一系列 if else 语句。理想情况下，这些 if else 语句将根据实时显示图像。但是，如果有一种方法可以设置我自己的计时器并使用 if else 语句显示图像，那也可以。这就是我的想法；

```
if (time < 7:00) {
document.getElementById("whatever").style.display="block";
} 
```

如果有人知道此特定问题的最佳解决方案，请提供帮助。谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:37:46.880

如果您只想要一个在晚上 7 点之前变得真实的条件：

```
if (new Date().getHours() < 19) { } 
```

该[`getHours()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours)方法返回 0 到 23 之间的一天中的小时。

在计时器函数中，它看起来像这样：

```
function doMagicStuff()
{
    var now = new Date();

    if (now.getHours() < 19) { 
    }
    // other conditions based on time
}

// let it run approximately every second; doesn't have to be very accurate
setInterval(doMagicStuff, 1000); 
```

# ruby-on-rails - 如何正确处理“共享”文件夹中的自定义辅助方法？

> ID：13596841
> 
> 赞同：1
> 
> 时间：2012-11-28T02:34:41.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, module, view-helpers

我正在使用 Ruby on Rails 3.2.2，我想*组织*和*共享*自定义辅助视图方法，就像我为我的视图文件所做的那样。也就是说，在我的`app/views`目录中，我有一个`shared`放置所有共享模板的文件夹，并且我希望在目录中也有一个`shared`文件夹（旨在使用相同的“共享方式”，但用于帮助文件）`app/helpers`。

但是，我的疑问是：

1.  共享辅助方法而不是将它们放入`ApplicationHelper`模块中是否正确（即使这些辅助方法特定于*共享*视图并且与任何模型或控制器没有直接关系）？
2.  如何加载`app/shared/helpers`目录中存在的模块以使它们可用于视图？
3.  这种方法有一些处方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:40:31.040

在 Rails 中，助手实际上是全局的。这意味着您可以在帖子视图中调用用户助手。所以你真的不用去污染ApplicationHelper，只要尽可能的把它们分开，正常使用就行了。

# django - 在事务块结束之前忽略命令当前事务被中止

> ID：13596844
> 
> 赞同：0
> 
> 时间：2012-11-28T02:34:46.730
> 
> 标签：django

当我尝试通过[Django-registration](https://bitbucket.org/ubernostrum/django-registration)插件向应用程序注册帐户时，Django 不断抛出以下错误。我可以毫无问题地对其他模型进行粗加工操作。

我的环境：Postgresql 8.4 Django 1.4.2

> 环境：
> 
> 请求方式：POST 请求地址：localhost:8000/accounts/register/
> 
> Django 版本：1.4.2 Python 版本：2.7.3 已安装应用程序：('django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.sites', 'django .contrib.messages'、'django.contrib.staticfiles'、'django.contrib.admin'、'django.contrib.humanize'、'django.contrib.gis'、'django.contrib.staticfiles'、'south'、 'dirapp', 'registration', 'django_extensions', 'sorl.thumbnail', 'debug_toolbar') 已安装的中间件: ('django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django .middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware','django.contrib.messages.middleware.MessageMiddleware', 'debug_toolbar.middleware.DebugToolbarMiddleware')
> 
> 回溯：get_response 111 中的文件“/root/env27/lib/python2.7/site-packages/django/core/handlers/base.py”。响应=回调（请求，*callback_args，**callback_kwargs）文件“/root /posguide/registration/views.py”在寄存器 187 中。new_user = backend.register(request, **form.cleaned_data) 文件“/root/posguide/registration/backends/default/ **init**.py" 在寄存器 79\. 密码，站点) 文件 "/root/env27/lib/python2.7/site-packages/django/db/transaction.py" 在内部 209\. return func(*args, **kwargs) create_inactive_user 中的文件“/root/posguide/registration/models.py” 78\. new_user = User.objects.create_user（用户名，电子邮件，密码）文件“/root/env27/lib/python2.7/site-packages/django/ contrib/auth/models.py" 在 create_user 160\. user.save(using=self._db) 文件 "/root/env27/lib/python2.7/site-packages/django/db/models/base.py" 在保存 463\. self.save_base(using=using, force_insert=force_insert, force_update=force_update) 文件“/root/env27/lib/python2.7/site-packages/django/db/models/base.py”在 save_base 565\. created=(not record_exists), raw=raw, using=using) 发送 172 中的文件“/root/env27/lib/python2.7/site-packages/django/dispatch/dispatcher.py”。响应 =接收者（信号=自我，发送者=发送者，**命名）文件“/root/posguide/dirapp/views.py”在 create_user_profile 154\. UserProfile.objects.create（用户=实例）文件“/root/env27/lib/ python2.7/site-packages/django/db/models/manager.py" 在create 137\. return self.get_query_set().create(**kwargs) 文件"/root/env27/lib/python2.7/site- packages/django/db/models/query.py" 在创建 377.obj.save(force_insert=True, using=self.db) 文件"/root/env27/lib/python2.7/site-packages/django/db /models/base.py" 在保存 463\. self.save_base(using=using,force_insert=force_insert, force_update=force_update) 文件 "/root/env27/lib/python2.7/site-packages/django/db/models/base.py" 在 save_base 551\. 结果 = manager._insert([self], fields =fields, return_id=update_pk, using=using, raw=raw) _insert 203 中的文件“/root/env27/lib/python2.7/site-packages/django/db/models/manager.py”。返回 insert_query(self .model, objs, fields, **kwargs) 文件 "/root/env27/lib/python2.7/site-packages/django/db/models/query.py" in insert_query 1593\. return query.get_compiler(using=using ).execute_sql(return_id) 文件 "/root/env27/lib/python2.7/site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)7/site-packages/django/db/models/base.py”在 save_base 551 中。结果 = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw) 文件“/root /env27/lib/python2.7/site-packages/django/db/models/manager.py" in _insert 203\. return insert_query(self.model, objs, fields, **kwargs) File "/root/env27/lib /python2.7/site-packages/django/db/models/query.py”在 insert_query 1593 中。返回 query.get_compiler(using=using).execute_sql(return_id) 文件“/root/env27/lib/python2.7/ site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)7/site-packages/django/db/models/base.py”在 save_base 551 中。结果 = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw) 文件“/root /env27/lib/python2.7/site-packages/django/db/models/manager.py" in _insert 203\. return insert_query(self.model, objs, fields, **kwargs) File "/root/env27/lib /python2.7/site-packages/django/db/models/query.py”在 insert_query 1593 中。返回 query.get_compiler(using=using).execute_sql(return_id) 文件“/root/env27/lib/python2.7/ site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)raw=raw) _insert 203 中的文件“/root/env27/lib/python2.7/site-packages/django/db/models/manager.py”。返回 insert_query(self.model, objs, fields, **kwargs) insert_query 1593 中的文件“/root/env27/lib/python2.7/site-packages/django/db/models/query.py”。返回 query.get_compiler(using=using).execute_sql(return_id) 文件“/root/ env27/lib/python2.7/site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)raw=raw) _insert 203 中的文件“/root/env27/lib/python2.7/site-packages/django/db/models/manager.py”。返回 insert_query(self.model, objs, fields, **kwargs) insert_query 1593 中的文件“/root/env27/lib/python2.7/site-packages/django/db/models/query.py”。返回 query.get_compiler(using=using).execute_sql(return_id) 文件“/root/ env27/lib/python2.7/site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)execute_sql(return_id) 文件 "/root/env27/lib/python2.7/site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)execute_sql(return_id) 文件 "/root/env27/lib/python2.7/site-packages/django/db/models/sql/compiler.py" 在 execute_sql 910\. cursor.execute(sql, params)
> 
> 异常类型：/accounts/register/ 处的内部错误异常值：当前事务被中止，命令被忽略，直到事务块结束

# java - 如何将任意数据与Java中的对象相关联

> ID：13596847
> 
> 赞同：1
> 
> 时间：2012-11-28T02:35:09.557
> 
> 标签：java, android, oop

我正在使用[naga](http://code.google.com/p/naga/)进行一些异步套接字编程。

但是我需要能够将任意数据附加到 Socket 对象。

例如我有这样的代码：

```
service = new NIOService();
// Server is JSONObject
NIOSocket socket = service.openSocket(Server.getString("ip"), Server.getInt("port"));
??? Add mydata to socket
socket.listen(observer); // See class below
System.out.println(socket.mydata);// get new data

public static class Observer extends SocketObserverAdapter {

        //Called when Socket makes connection
        @Override
        public void connectionOpened(NIOSocket socket) {
            System.out.println(socket.mydata); // get data
            socket.mydata = "yay!";// set data
        }
} 
```

我遇到的问题是我需要在`Observer.connectionOpened`回调中获取和设置套接字对象上的数据，并且以后能够访问它。

我意识到可能没有办法只向对象添加数据，但是将数据与对象关联以便我可以传递它并仍然访问（和修改）数据的最佳方法是什么？

我总是可以重新编译类代码以将变量添加到类中，但这似乎很不合时宜，我尽量远离。

注意：我对 Java 编程相当陌生，但对一般编程并不陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:45:14.970

想到的两种方法是：

将 Socket 包装在一个携带信息的类中

```
class MySocketWithData {
    private final Socket theSocket;
    private String myData;
    ....
} 
```

或者，维护一个`Map`包含您关心的信息的信息。

```
private final Map<Socket, MyCoolData> socketMap = new ConcurrentHashMap<>();
public void doSomething(Socket sock) {
    MyCoolData data = socketMap.get(sock);
} 
```

我可能更喜欢第一个。`Socket`如果您需要在自己周围传递实例并且不能替换您自己的类，则第二种方法会更合适。

# css - 字母间距似乎使 div 移动

> ID：13596848
> 
> 赞同：1
> 
> 时间：2012-11-28T02:35:14.253
> 
> 标签：css, html

我正在设计一个类似表格的 div 集群。只有两行。

“表”的构建如下：

```
<div class="artist_meta_first_row">
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
</div>
<div class="artist_meta_second_row">
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
</div> 
```

相当简单，对吧？那么这里是样式：

```
.artist_meta_first_row{
      text-transform: uppercase;
      padding-bottom: 40px;
      font-family: futura-pt, sans-serif;
      font-weight: 100;
      letter-spacing: 3px;
    }

      .artist_meta_first_row div{
        display: inline-block;
        min-width: 190px;
      }

.artist_meta_second_row div{
        display: inline-block;
        min-width: 190px;
        vertical-align: top;
      } 
```

我遇到的问题是，第一行 div 中的文本比第二行 div 中的文本更靠右。第一行几乎看起来有一些填充，但在 css 代码中没有。所以经过大量的试验和错误后，我发现这是由于`letter-spacing: 3px;`第一行中的 - 它似乎使第一行中的 div 有点宽，导致第一行和第二行中的单元格没有很好地对齐，即使我指定了宽度。

有什么办法可以正确对齐两行而不必摆脱字母间距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:45:34.420

我自己找到了一种方法 - 因为我指定了两行内每个 div 的宽度，所以我只是从第一行中的 div 的宽度中减去了字母间距带走的三个像素。现在，第一行和第二行的列的开头已正确对齐。

这是工作代码：

```
.artist_meta_first_row{
      text-transform: uppercase;
      padding-bottom: 40px;
      font-family: futura-pt, sans-serif;
      font-weight: 100;
      letter-spacing: 3px;
    }

      .artist_meta_first_row div{
        display: inline-block;
        min-width: 182px; /* notice 185 - 3 = 182 */
      }

      .artist_meta_second_row div{
        display: inline-block;
        min-width: 185px;
        vertical-align: top;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:46:30.753

完全复制粘贴，应该可以解决：

```
<div class="artist_meta_first_row">
    <div>some text</div><div>
    some text</div><div>
    some text</div><div>
    some text</div><div>
    some text</div>
</div>
<div class="artist_meta_second_row">
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
    <div>some text</div>
</div>​ 
```

演示：http: [//jsfiddle.net/FdRt5/](http://jsfiddle.net/FdRt5/)

在这里查看原因：[如何删除内联块产生的额外边距空间？](https://stackoverflow.com/questions/1801589/how-do-i-remove-extra-margin-space-generated-by-inline-blocks)

# r - 在 geom_boxplot 上覆盖 geom_point 层

> ID：13596850
> 
> 赞同：1
> 
> 时间：2012-11-28T02:35:23.453
> 
> 标签：r, graphics, ggplot2

真的在为此苦苦挣扎。

`a`&`b`是现实世界中的实际数据集，`a`非常大。我收到一个错误 ggplot2 不知道如何处理 uneval 类的数据。我要做的是将第二个数据集的单个点覆盖到箱线图上，以突出显示一个特定样本与宇宙的比较。

知道我做错了什么吗？我该如何解决？

```
a = data.frame(YTD.Retn=runif(1000,-10,10),sector="a")
a = rbind(a,data.frame(YTD.Retn=runif(1000,-10,10),sector="b"))
a = rbind(a,data.frame(YTD.Retn=runif(1000,-10,10),sector="c"))
a = rbind(a,data.frame(YTD.Retn=runif(1000,-10,10),sector="d"))
a = rbind(a,data.frame(YTD.Retn=runif(1000,-10,10),sector="e"))
a = rbind(a,data.frame(YTD.Retn=runif(1000,-10,10),sector="f"))
a = rbind(a,data.frame(YTD.Retn=runif(1000,-10,10),sector="g"))

b = data.frame(sector=c("a","b","c","d","e","f","g"),YTD.Retn=c(5,6,7,3,2,-1,-5))

p1 =ggplot(a,aes(factor(sector),YTD.Retn,fill=factor(sector))) + geom_boxplot() +
  scale_fill_discrete(guide=F) +
  geom_point(b,aes(factor(sector),YTD.Retn))

plot(p1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:39:38.157

`data`在调用中调用时，您需要命名参数`geom_...()`。命名参数通常是一种很好的做法（如果有点耗时）

```
p1 =ggplot(data = a, aes(x = factor(sector), y = YTD.Retn, fill=factor(sector))) + 
   geom_boxplot() +
  scale_fill_discrete(guide=F) +
  geom_point(data = b, aes(x= factor(sector),y= YTD.Retn))

plot(p1) 
```

# tcp - 我对有关 wifi 的术语感到困惑

> ID：13596853
> 
> 赞同：0
> 
> 时间：2012-11-28T02:35:42.317
> 
> 标签：tcp, udp, wifi, terminology

我正在尝试模拟 wifi 视频传输，为此我使用 2 个设备之间的套接字创建了一个连接，但是我开始怀疑这是否是必需的，或者我是否应该创建一个 UDP 连接。

我想我只是对这里的术语感到困惑，我已经用谷歌搜索了，我发现 Wifi 可以有 TCP 或 UDP 我的问题是通过 TCP 的 Wifi 传输对于模拟来说是否像使用 UDP 的一样可靠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:41:18.423

我建议您阅读[TCP 和 UDP 之间的区别？](https://stackoverflow.com/questions/5970383/difference-between-tcp-and-udp).

对于像视频传输这样的流式传输，您通常需要使用 UDP。如果一个数据包无法及时到达服务器，最好将其丢弃，而不是暂停整个传输以等待一个微小的丢失数据包，其中仅包含另一个人在闪烁。

但显然，这取决于您以及您如何实现您的软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:56:35.927

您可能需要阅读一些有关 TCP/IP 协议的内容。TCP 和 UDP 只是数据包/数据报的类型。主要区别在于 TCP 数据包包含额外的协议信息，而 UDP 是更简单的数据包，只有目标、数据本身和校验和。

结果是UDP数据包的发送者无法知道数据包是否在另一端收到。通常这无关紧要 - 因为它可能由软件中的更高层以其他方式处理，或者可以简单地丢失和忽略而不会产生任何负面后果。因此，在某些情况下，UDP 可以更有效地利用带宽——因为交换的协议信息更少，因此实际数据更多。加上 TCP 更复杂，因为你必须处理协议的东西。

因此，当您创建系统时，您可以选择 TCP 或 UDP 数据包，具体取决于您要实现的目标以及您希望如何实现它。但是这两种数据包类型实际上都是“tcp/ip”协议栈的一部分，并且有相似之处。

# mysql - 按 id 对结果进行分组并创建新列

> ID：13596856
> 
> 赞同：2
> 
> 时间：2012-11-28T02:35:59.620
> 
> 标签：mysql, sql

我有一个看起来像下面这样的表......

```
id           price             condition         sell
21039        20.40             new               0 
21039        20.41             used              1
12378        10.40             new               1
12378        5                 used              0
45898        30.30             new               1
45898        12.20             used              0 
```

（**注意**：每个 id 只会有 1 个新的和已使用的值）

我想要做的是对具有相同 ID 号的所有行进行分组，但在此过程中为每个条件创建新列，这应该看起来像......

```
id           new_price         new_sell          used_price         new_sell
21039        20.40             0                 20.41              1
12378        10.40             1                 5                  0
45898        30.30             1                 12.20              0 
```

我想出的只是以下查询，看起来很傻

```
SELECT id, price, condition, 
IF(price > 3, 1, 0)  AS sell
FROM products 
GROUP BY id 
```

我怎样才能获得第二张桌子的预期效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:40:07.937

这称为*数据透视表*。`CASE`它是通过对您需要生成的每一列的一系列语句以及聚合`MAX()`或`SUM()`消除 NULL 并将其折叠为单行来完成的。

```
SELECT
  id,
  SUM(CASE WHEN `condition` = 'new' THEN price ELSE 0 END) AS new_price,
  SUM(CASE WHEN `condition` = 'new' THEN sell ELSE 0 END) AS new_sell,
  SUM(CASE WHEN `condition` = 'used' THEN price ELSE 0 END) AS used_price,
  SUM(CASE WHEN `condition` = 'used' THEN sell ELSE 0 END) AS used_sell
FROM 
  products
GROUP BY id 
```

如果没有`SUM()`and `GROUP BY`，您仍然会得到 2 行`id`，每行都有一半的列（`condition`在 中不匹配`CASE`）作为`NULL`。（`SUM()`也可以`MAX()`在这种情况下使用）消除了 NULL 并产生一行，因为聚合函数排除 NULL 值，而按`GROUP BY`对行进行分组`id`。

### 这是SQLFiddle.com 上[的一个工作示例](http://sqlfiddle.com/#!2/21ef1/1)

### 评论后更新：

要`sell`基于计算`price`，只需替换`sell` `CASE`语句中的条件：

```
SELECT
  id,
  SUM(CASE WHEN `condition` = 'new' THEN price ELSE 0 END) AS new_price,
  SUM(CASE WHEN `condition` = 'new' AND price > 3 THEN 1 ELSE 0 END) AS new_sell,
  SUM(CASE WHEN `condition` = 'used' THEN price ELSE 0 END) AS used_price,
  SUM(CASE WHEN `condition` = 'used' AND price > 3 THEN 1 ELSE 0 END) AS used_sell
FROM 
  products
GROUP BY id 
```

（[更新样本...](http://sqlfiddle.com/#!2/21ef1/2)）

# java - 在 CXF jax-rs 中禁用多部分缓存

> ID：13596857
> 
> 赞同：3
> 
> 时间：2012-11-28T02:36:05.020
> 
> 标签：java, cxf, jax-rs

我将此问题[发布](http://cxf.547215.n5.nabble.com/Disable-multipart-caching-in-temp-files-on-the-server-stream-straight-out-the-socket-td5719255.html)到 CXF 列表中，但没有任何运气。所以我们开始吧。我正在尝试将大文件上传到远程服务器（想想它们是虚拟机磁盘）。所以我有一个接受上传请求的宁静服务。上传的处理程序如下所示：

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Path("/doupload")
public Response receiveStream(MultipartBody multipart) {
    List<Attachment> allAttachments = body.getAllAttachments();
    Attachment att = null;
    for (Attachment b : allAttachments) {
        if (UPLOAD_FILE_DESCRIPTOR.equals(b.getContentId())) {
            att = b;
        }
    }
    Assert.notNull(att);
    DataHandler dh = att.getDataHandler();
    if (dh == null) {
        throw new WebApplicationException(HTTP_BAD_REQUEST);
    }
    try {
        InputStream is = dh.getInputStream();
        byte[] buf = new byte[65536];
        int n;
        OutputStream os = getOutputStream();
        while ((n = is.read(buf)) > 0) {
            os.write(buf, 0, n);
        }
        ResponseBuilder rb = Response.status(HTTP_CREATED);
        return rb.build();
    } catch (IOException e) {
        log.error("Got exception=", e);
        throw new WebApplicationException(HTTP_INTERNAL_ERROR);
    } catch (NoSuchAlgorithmException e) {
        log.error("Got exception=", e);
        throw new WebApplicationException(HTTP_INTERNAL_ERROR);
    } finally {}

} 
```

这段代码的客户端相当简单：

```
public void sendLargeFile(String filename) {
    WebClient wc = WebClient.create(targetUrl);
    InputStream is = new FileInputStream(new File(filename));
    Response r = wc.post(new Attachment(Constants.UPLOAD_FILE_DESCRIPTOR,
        MediaType.APPLICATION_OCTET_STREAM, is));
} 
```

该代码在功能方面运行良好。在性能方面，我注意到在我的处理程序（receiveStream() 方法）从流中获取第一个字节之前，整个流实际上被持久化到一个临时文件中（使用 CachedOutputStream）。不幸的是，这对我来说是不可接受的。

*   我的处理程序只是将传入的字节传递给后端存储系统（虚拟机磁盘存储库），等待整个磁盘写入缓存只是再次读取需要大量时间，占用大量资源，并且降低吞吐量。
*   写入块并再次读取它们会产生成本，因为应用程序在云中运行，并且云提供商对每个读取/写入的块收费。
*   由于每个字节都写入本地磁盘，我的服务 VM 必须有足够的磁盘空间来容纳所有上传的流的总大小（即，如果我有 10 个上传，每个 100GB，我必须有 1TB 的磁盘来缓存内容）。这又是一笔额外的钱，因为服务 VM 的大小急剧增长，云提供商也会对预置的磁盘大小收费。

鉴于所有这些，我正在寻找一种方法来使用 HTTP InputStream（或尽可能接近它）直接从那里读取附件并在之后处理它。我想这个问题可以转化为以下之一： - 有没有办法告诉 CXF 不做缓存 - 或者 - 有没有办法让 CXF 传递一个输出流（我写的）来使用，而不是使用 CachedOutputStream

[我在这里](http://mail-archives.apache.org/mod_mbox/cxf-users/200907.mbox/%3C24677330.post@talk.nabble.com%3E)发现了一个类似的问题。决议说使用 CXF 2.2.3 或更高版本，我正在使用 2.4.4（并尝试使用 2.7.0）但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:56:34.653

我认为这在逻辑上是不可能的（无论是在 CXF 还是在其他任何地方）。您正在调用`getAllAttachements()`，这意味着服务器应该从 HTTP 输入流中收集有关它们的信息。这意味着整个流必须进入内存进行[MIME](http://en.wikipedia.org/wiki/MIME)解析。

在您的情况下，您应该直接使用流，并自己进行 MIME 解析：

```
public Response receiveStream(InputStream input) { 
```

现在您可以完全控制输入，并且可以逐字节将其消耗到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:55:51.970

我最终以一种不雅的方式解决了这个问题，但它确实有效，所以我想分享我的经验。如果有一些“标准”或更好的方法，请告诉我。

由于我正在编写服务器端，我知道我正在按发送顺序访问所有附件，并在它们流入时对其进行处理。因此，为了反映处理程序方法（上面的receiveStream() 方法）的这种行为，我在服务器端创建了一个名为“@SequentialAttachmentProcessing”的新注释，并用它注释了我的上述方法。

此外，还编写了一个名为 SequentialAttachment 的 Attachment 子类，它的作用类似于链表。它有一个跳过当前附件的skip()方法，当一个附件结束时，hasMore()方法告诉你是否还有另一个。

然后我编写了一个自定义的 multipart/form-data 提供程序，其行为如下：如果目标方法如上注释，则处理附件，否则调用默认提供程序进行处理。当它由我的提供者处理时，它总是最多返回一个附件。因此，它可能会误导非可疑的处理方法。但是，我认为这是可以接受的，因为服务器的编写者必须将该方法注释为“@SequentialAttachmentProcessing”，因此必须知道这意味着什么。

因此，receiveStream() 方法的实现现在类似于：

```
@POST
@SequentialAttachmentProcessing
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Path("/doupload")
public Response receiveStream(MultipartBody multipart) {
    List<Attachment> allAttachments = body.getAllAttachments();
    Assert.isTrue(allAttachments.size() <= 1);
    if (allAttachment.size() > 0) {
        Attachment head = allAttachments.get(0);
        Assert.isTrue(head instanceof SequentialAttachment);
        SequentialAttachment att = (SequentialAttachment) head;
        while (att != null) {
            DataHandler dh = att.getDataHandler();
            InputStream is = dh.getInputStream();
            byte[] buf = new byte[65536];
            int n;
            OutputStream os = getOutputStream();
            while ((n = is.read(buf)) > 0) {
                os.write(buf, 0, n);
            }
            if (att.hasMore()) {
                att = att.next();
            }
        }
    }
} 
```

虽然这解决了我眼前的问题，但我仍然相信必须有一个标准的方法来做到这一点。我希望这可以帮助别人。

# python - 在 Windows 上使用 Mod_WSGI 的 Flask 应用程序将无法运行 - 现在 URLS 将无法工作

> ID：13596866
> 
> 赞同：3
> 
> 时间：2012-11-28T02:37:16.920
> 
> 标签：python, apache, flask, mod-wsgi

编辑：我现在稍微进一步，但新问题是关于渲染模板。当我转到任何 URL 时，我会在日志中收到以下错误消息：

server:666/ 给出这个错误

```
[error] [client 192.168.100.109] client denied by server configuration: C:/I4/importicusindex.html 
```

和 server:666/export 给出这个错误

```
error] [client 192.168.100.109] client denied by server configuration: C:/I4/importicusexport 
```

它必须读取 .py 文件，因为它知道在访问“/”时要查找 index.html，或者这只是默认行为？

* * *

我正在努力让我的应用程序使用 MOD_WSGI 在 Windows 上的 APACHE 中运行。我已经在这里浏览了一些答案，并尝试按照文档进行操作，但无济于事。

该应用程序本身使用烧瓶的内置服务器运行良好。

**c:\i4\importicus\wsgi\importicus.WSGI**

```
import sys
sys.path.append('c:/i4/importicus/')
activate_this = 'c:/i4/importicus/importicus.py'
execfile(activate_this, dict(__file__=activate_this))
import importicus as importicus 
```

**虚拟主机文件**

```
<VirtualHost *:666>
    ServerAdmin imats@copyright.com.au
    DocumentRoot "c:/i4/importicus"

    ErrorLog c:/i4/importicus/logs/engine-error_log
    CustomLog c:/i4/importicus/logs/engine-access_log common

    Alias /media c:/i4/importicus/static
    <Directory c:/i4/importicus>

        Order deny,allow
        Allow from all
    </Directory>

    WSGIScriptAlias /wsgi z:\i4\importicus\wsgi\importicus.wsgi

    <Directory c:/i4/importicus/wsgi>

        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost> 
```

**c:\i4\importicus\importicus.py**

```
from flask import Flask, render_template,jsonify, request
from werkzeug import secure_filename
import importicus_functions
import ast, os, sys
importicus_main = Flask(__name__)

UPLOAD_FOLDER = 'uploads'
importicus_main.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER

#print importicus_main.config.keys()#['ROOT_PATH']='C:/IMATS-Project/legacy import scripts/importicus/'
importicus_main.debug=True

@importicus_main.route('/')
def importicus():

    return render_template('splash.html') 
```

我得到的唯一错误是：

**禁止的**

您无权访问此服务器上的 /。

所以 apache 显然是在找到 WSGI 文件，但我怀疑我没有正确运行烧瓶应用程序。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:42:19.533

`WSGIScriptAlias /wsgi z:\i4\importicus\wsgi\importicus.wsgi`是问题所在，您会注意到所有其他路径都在**c:**上，而不是**z:**

真气！

# activerecord - Activerecord：如何添加响应保存或更新事件的功能？

> ID：13596868
> 
> 赞同：0
> 
> 时间：2012-11-28T02:37:27.610
> 
> 标签：activerecord

这是**活动**模型

```
class Activity < ActiveRecord::Base
  belongs_to :user
  attr_accessible :week, :day, :bcalor, :bicycl, :ccalor, :foodid, :jog, 
                  :lunges, :pushups, :situps, :squats
end 
```

我想添加功能，例如，在我保存或更新活动后，我能够更新所有活动的摘要。在 .NET 中，我们有**OnModelUpdating**和**OnModelUpdated 之**类的东西。如何使用 activerecord 完成同样的事情？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:57:12.660

在 Rails 中，它们被称为回调。给你：[http ://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# objective-c - 循环直到变量改变

> ID：13596869
> 
> 赞同：0
> 
> 时间：2012-11-28T02:37:35.970
> 
> 标签：objective-c, ios, events, loops

这是我想做的

到目前为止，我想在执行操作之前执行一个循环或类似的操作，我正在这样做

```
//check if it's multiplayer mode
if ([PlayerInfo instance].playingMultiplayer == YES)
{
   //no cards has been played
   //the while and NSRunLoop combination seems harsh
   while ([PlayerInfo instance].cardsPlayed == NULL) 
   {
      [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
   }
   //after the "loop thing" done, execute this method
   //take out cards with the broadcasted cardsPlayed, it's event based
   [self takeOutCards:[PlayerInfo instance].cardsPlayed];
}
//single player, don't bother this
else
    {
       //AI logic, select possible best cards
       NSArray * bestCards = [playerLogic selectBestMove];
       [self takeOutCards:bestCards];
    } 
```

这看起来是一种不好的做法。

顺便说一下，[PlayerInfo instance].cardsPlayed 是一个从服务器广播的变量，会经常更改。基于用户交互的更改，而另一个用户将等待将播放哪些牌。

简而言之，在等待广播变量到来时我应该怎么做？有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:26:03.817

您的应用程序已经运行了一个事件循环，并且它应该已经在用户操作之间以及正在检查网络的新状态时处于空闲状态。您要做的是在触发条件时生成一个事件，以便应用程序做出反应。

最简单的方法是在条件发生时发布通知（在应用程序内）。像这样的东西：

```
// just guessing about your PlayerInfo here, and assuming ARC

@property (nonatomic, strong) NSArray *cardsPlayed;
@synthesize cardsPlayed = _cardsPlayed;

// replace the synthesized setter with one that does the set and checks for
// the condition you care about.  if that condition holds, post a notification
//
- (void)setCardsPlayed:(NSArray *)cardsPlayed {
    _cardsPlayed = cardsPlayed;

    // is the condition about an array that's nil or empty?  guessing 'either' here...
    if (!_cardsPlayed || !_cardsPlayed.count) {
        [[NSNotificationCenter defaultCenter] 
            postNotificationName:@"CardsPlayedDidBecomeEmpty" object:self];
   }
} 
```

然后，在初始化关心条件的对象时（您在问题中提出该循环的位置）......

```
 [[NSNotificationCenter defaultCenter]
        addObserver:self
           selector:@selector(cardsPlayedEmpty:)
               name:@"CardsPlayedDidBecomeEmpty" object:nil]; 
```

这将导致 cardsPlayedEmpty: 在条件成立时被调用。它应该有这样的签名：

```
- (void)CardsPlayedDidBecomeEmpty:(NSNotification *)notification {
} 
```

**编辑**-我认为您修改后的问题是您想在检查服务器状态之前暂停。您可以使用 performSelector:withObject:afterDelay: ...

```
- (void)getRemoteState {

    NSURLRequest = [NSURLRequest requestWithURL:url];
    [NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        // here, handle the response and check the condition you care about
        // post NSNotification as above here
                       }];
}

// now the code you're trying to write ...

if ([PlayerInfo instance].playingMultiplayer == YES) {

    // give other players a chance to play, then check remote state
    // this will wait 20 seconds before checking
    [self performSelector:@selector(getRemoteState) withObject:nil afterDelay:20.0]; 
```

# c# - 何时使用 await 关键字

> ID：13596872
> 
> 赞同：6
> 
> 时间：2012-11-28T02:37:42.303
> 
> 标签：c#, .net-4.5, async-await

如果一个方法被声明为'async'，当我们调用那个方法时，我们可以使用await或者不使用它。我想知道什么时候用它，用它有什么效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:40:29.250

async 关键字只是向编译器指示该方法可能包含等待语句。

Eric Lippert 有一篇有趣的文章解释了设计选择

> 要求“异步”意味着我们可以一次消除所有向后兼容性问题；任何包含 await 表达式的方法都必须是“新构造”代码，而不是“旧工作”代码，因为“旧工作”代码从来没有 async 修饰符。

[http://blogs.msdn.com/b/ericlippert/archive/2010/11/11/whither-async.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/11/11/whither-async.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:43:03.783

标记的异步方法通常使用 await 来指定暂停点。await 运算符告诉编译器，在等待的异步过程完成之前，异步方法不能继续超过该点。与此同时，控制权返回给异步方法的调用者。

换句话说，如果你正在做 asyncronius 编程并且想要同时运行某些线程任务，你会想要依赖 async 和 await

更详细的解释在这里

[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

# c# - 在 WPF 中创建一个图像，其像素是随机选择的

> ID：13596874
> 
> 赞同：1
> 
> 时间：2012-11-28T02:37:48.623
> 
> 标签：c#, wpf

我想创建一个 800x600 的图像，其每个像素随机选择为绿色或红色。如何在 WPF 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:26:07.513

请参见[WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)

```
const uint red = 0xFFFF0000,green = 0xFF00FF00;
var rnd = new Random();
var bmp = new WriteableBitmap(800, 600, 96, 96, PixelFormats.Pbgra32, null);
var data = Enumerable.Range(0, 800 * 600).Select(x => rnd.NextDouble() > 0.5 ? red : green).ToArray();
bmp.WritePixels(new Int32Rect(0, 0, 800, 600), data, bmp.BackBufferStride, 0); 
```

这是一个简单的例子，不包括处理位图步幅、不同的像素格式或 alpha。

# ios - 直通触摸事件

> ID：13596875
> 
> 赞同：0
> 
> 时间：2012-11-28T02:37:56.003
> 
> 标签：ios, uiview

将触摸事件传递给所有子视图的最佳方式是什么？

ViewController -> 视图 -> (subview1, subview2)

我希望 subview1 和 subview2 都响应触摸事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:28:27.570

将子视图上的标签设置为显着标签。然后在视图中进行树搜索以查找这些标签。不幸的是，没有子类化并没有真正好的方法来做到这一点。如果您愿意子类化，那么您将子类化视图，然后在触摸时抛出一个 NSNotification，该子类的所有其他视图都会监听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:29:00.637

在父级的触摸处理程序中，您可以遍历该视图的子视图并调用相同的处理程序：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   for(UIView *subview in [self.view subviews]) {
       [subview touchesBegan:touches withEvent:event];
   }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
   for(UIView *subview in [self.view subviews]) {
       [subview touchesMoved:touches withEvent:event];
   }
} 
```

或者，如果您需要识别特定的子视图，您可以将整数标签分配给子视图以便稍后识别它们：

```
- (void)loadView {
   UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(10,10,10,10)];
   view1.tag = 100;
   [self.view addSubview:view1];

   UIView *view2 = [[UIView alloc] initWithFrame:CGRectMake(20,20,20,20)];
   view2.tag = 200;
   [self.view addSubview:view2];

} 
```

然后稍后在触摸事件调用的 ViewController 方法中

```
- (void)touchEventResponder {
   UIView *view1 = [self.view viewWithTag:100];
   // Do work with view1
   UIView *view2 = [self.view viewWithTag:200];
   // Do work with view2
} 
```

# php - 'else if' 用于多个复选框组合

> ID：13596880
> 
> 赞同：0
> 
> 时间：2012-11-28T02:38:33.083
> 
> 标签：php, checkbox

我有一个带有 4 个复选框的表单；首次亮相，击球，没有和保龄球。添加时，如果选中，它将使用此代码添加数据（在本例中，首次亮相）：

```
if(!empty($_POST["debut"])) {
try
{
$sql = 'INSERT INTO performance SET
    matchid = :matchid,
    playerid = :playerid,
    team = :team,
    debut = 1,
    batted = 0,
    batpos = :batpos,
    runs = :runs,
    ballsfaced = :ballsfaced,
    fours = :fours,
    sixes = :sixes,
    no = 0,
    howout = :howout,
    fielder = :fielder,
    bowler = :bowler,
    bowled = 0,
    ballsbowled = :ballsbowled,
    maidens = :maidens,
    wickets = :wickets,
    runsconceded = :runsconceded,
    catches = :catches,
    stumpings = :stumpings,
    runouts = :runouts';
$s = $pdo->prepare($sql);
$s->bindValue(':matchid', $_POST['matchid']);
$s->bindValue(':playerid', $_POST['playerid']);
$s->bindValue(':team', $_POST['team']);
$s->bindValue(':batpos', $_POST['batpos']);
$s->bindValue(':runs', $_POST['runs']);
$s->bindValue(':ballsfaced', $_POST['ballsfaced']);
$s->bindValue(':fours', $_POST['fours']);
$s->bindValue(':sixes', $_POST['sixes']);
$s->bindValue(':howout', $_POST['howout']);
$s->bindValue(':fielder', $_POST['fielder']);
$s->bindValue(':bowler', $_POST['bowler']);
$s->bindValue(':ballsbowled', $_POST['ballsbowled']);
$s->bindValue(':maidens', $_POST['maidens']);
$s->bindValue(':wickets', $_POST['wickets']);
$s->bindValue(':runsconceded', $_POST['runsconceded']);
$s->bindValue(':catches', $_POST['catches']);
$s->bindValue(':stumpings', $_POST['stumpings']);
$s->bindValue(':runouts', $_POST['runouts']);
$s->execute();
}
catch (PDOException $e)
{
$error = 'Error adding submitted performance.';
include 'error.html.php';
exit();
}
} 
```

它工作得很好。但是，如果我尝试组合（例如首次亮相和击球），则使用以下代码不起作用：

```
else if(!empty($_POST["debut"]) && (!empty($_POST["batted"]))) {
  try
{
$sql = 'INSERT INTO performance SET
    matchid = :matchid,
    playerid = :playerid,
    team = :team,
    debut = 1,
    batted = 1,
    batpos = :batpos,
    runs = :runs,
    ballsfaced = :ballsfaced,
    fours = :fours,
    sixes = :sixes,
    no = 0,
    howout = :howout,
    fielder = :fielder,
    bowler = :bowler,
    bowled = 0,
    ballsbowled = :ballsbowled,
    maidens = :maidens,
    wickets = :wickets,
    runsconceded = :runsconceded,
    catches = :catches,
    stumpings = :stumpings,
    runouts = :runouts';
$s = $pdo->prepare($sql);
$s->bindValue(':matchid', $_POST['matchid']);
$s->bindValue(':playerid', $_POST['playerid']);
$s->bindValue(':team', $_POST['team']);
$s->bindValue(':batpos', $_POST['batpos']);
$s->bindValue(':runs', $_POST['runs']);
$s->bindValue(':ballsfaced', $_POST['ballsfaced']);
$s->bindValue(':fours', $_POST['fours']);
$s->bindValue(':sixes', $_POST['sixes']);
$s->bindValue(':howout', $_POST['howout']);
$s->bindValue(':fielder', $_POST['fielder']);
$s->bindValue(':bowler', $_POST['bowler']);
$s->bindValue(':ballsbowled', $_POST['ballsbowled']);
$s->bindValue(':maidens', $_POST['maidens']);
$s->bindValue(':wickets', $_POST['wickets']);
$s->bindValue(':runsconceded', $_POST['runsconceded']);
$s->bindValue(':catches', $_POST['catches']);
$s->bindValue(':stumpings', $_POST['stumpings']);
$s->bindValue(':runouts', $_POST['runouts']);
$s->execute();
}
catch (PDOException $e)
{
$error = 'Error adding submitted performance.';
include 'error.html.php';
exit();
}
} 
```

在这种情况下，只有首次亮相会被插入为 1。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:44:29.733

我注意到这是在 elseif 语句中......也许第一个条件得到满足并且这部分代码永远不会执行？

如果这段代码遵循上面的 if 语句，那肯定是这种情况。

[编辑]

您还应该检查代码重复，如果唯一的区别是将 'batted' 和 'debut' 设置为 0 或 1，那么在没有 'if' 语句的情况下可以使用更短的方法。

```
$debut = (isset($_POST['debut']) ? 1 : 0);
$batted = (isset($_POST['batted']) ? 1 : 0); 
```

然后像绑定其他值一样绑定值。有关三元语句的示例，请参见[http://davidwalsh.name/php-ternary-examples](http://davidwalsh.name/php-ternary-examples)

# android - 如何在发送列表中添加我的 Android 应用程序节目？

> ID：13596882
> 
> 赞同：5
> 
> 时间：2012-11-28T02:38:45.097
> 
> 标签：android, send

我实现了一个应用程序。
它可以将照片上传到我自己的服务器。
当实现以下代码时，我想让我的应用程序可以在发送列表中列出：

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/jpeg");
share.putExtra(Intent.EXTRA_STREAM, Uri.parse(FilePath));
startActivity(Intent.createChooser(share, "Share Image")); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T04:10:16.287

您需要在清单中添加以下内容。

```
<intent-filter>
    <action android:name="android.intent.action.SEND"></action>
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/jpeg" />
</intent-filter> 
```

您的清单应类似于以下内容。

```
<application android:name="MyApplication" android:allowBackup="true" android:icon="@drawable/ic_launcher"
android:label="@string/app_name" android:theme="@style/AppTheme">
    <activity android:name="com.example.arcasample.MainActivity" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND"></action>
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/jpeg" />
        </intent-filter>
    </activity>
</application> 
```

# encryption - 解密阶段AES中的系数矩阵

> ID：13596883
> 
> 赞同：1
> 
> 时间：2012-11-28T02:38:57.047
> 
> 标签：encryption, aes, encryption-asymmetric, encryption-symmetric

我知道在 AES 中，在加密阶段，在 MixColumns 中，我们使用 [4x4] 系数矩阵，其值只有 (00,01,02,03)。有谁知道在解密阶段 InvMixColumns 中的系数矩阵使用什么值？我知道这些系数是通过在 rajindel 字段中取 00,01,02,03 的倒数产生的。我计算为

```
00---------->00  
01---------->01
02---------->141
03---------->246 
```

上面显示的关联是系数------>它在 Rajindel 字段中的倒数以十进制表示。值是否正确？我需要一些确认。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:14:55.047

AES的多项式系数实际上是：

```
03, 01, 01, 02 
```

可以反转为：

```
0B, 0D, 09, 0E 
```

另请参见[FIPS 197](http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf)的第 4.3 节，特定等式 (4.14)、(4.15)、(5.5) 和 (5.9)。

请注意，这并不像将字段 GF(2 ⁸ ) 中的每个系数取反一样简单。相反，您将整个*多项式*环中的多项式取反，取模 x ⁴ +1。

# c - C语言不能打印array[i][j]

> ID：13596886
> 
> 赞同：0
> 
> 时间：2012-11-28T02:39:10.603
> 
> 标签：c, printf

在 C 语言中，

我有一个数组[3][2]；

```
int i = 0, j = 0;
for (i = 0; i < 3; i++) {
    for (j = 0; j < 2; j++) {
        printf("%d", array[i][j]);
    }
} 
```

当我使用 gcc 编译 .c 文件时，错误显示：

```
format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘int *’ 
```

如何使用 C 打印数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:43:21.063

错误消息似乎很简单。它告诉你那`array[i][j]`是 type `int*`，而`printf()`"%d" 格式化程序需要一个 type 的参数`int`。

我不确定你期望在这里发生什么。你还没有向我们展示你是如何声明`array`的。但是，如果它应该是 的二维数组`int`，那么您声明它是错误的。

# javascript - jQuery 工具、选项卡 => 窗格大小调整和按需加载

> ID：13596887
> 
> 赞同：0
> 
> 时间：2012-11-28T02:39:35.490
> 
> 标签：javascript, jquery, jquery-tools

首先，我尝试在 jQuery Tools 论坛上发布它，但访问他们的论坛时一直出错。“需要身份验证”错误。

无论如何，我在使用 jQuery 工具选项卡的两件事上遇到了问题。

1.  有没有办法只按需加载选项卡？例如，我在 Tab2 上有很多图像，我不希望用户在单击 tab2 之前加载这些图像。这样，人们只会加载他们需要的东西。

2.  在我的 CSS 中，我将窗格高度设为 100 像素。我想根据每个标签更改高度。例如，Tab1 的高度应为 100 像素，标签 2 的高度应为 500 像素。这是我的代码：

```
<div class="panes">

 <div>Tab1 Section: <br /> Sample</div> ( 100 px here)

 <div>Tab2 Section: <br /> Sample</div> (500 px here)
    </div> 
```

CSS：

```
 .panes div { height: 100px; } 
```

# android - MapView 在地图上同一点的手机、平板电脑和 PC 之间的触摸位置不同

> ID：13596896
> 
> 赞同：1
> 
> 时间：2012-11-28T02:40:21.027
> 
> 标签：android, google-maps, overlay, android-mapview

我正在开发一个应用程序，我在平板电脑屏幕上显示 MapView，触摸特定位置，在该位置覆盖一个标记，并保存通过 onTap() 事件触摸的位置的 GeoPoint。通过使用显示屏幕触摸位置的开发人员设置，我可以非常精确地知道被触摸的屏幕点。不幸的是，相对于我正在考虑的“真实测量”，保存的所有点似乎都向东移动，即在 Windows PC 上单击谷歌地图中的相同点并记录这些坐标。

我的应用程序可以在我从 PC 上的查询点获得的确切位置显示标记，它只是无法通过从平板电脑查询来获取相同的坐标。相对于地图本身，我是否可能无意中移动了读取点击次数的叠加层？非常令人沮丧，但我的应用程序需要一致性。

为什么从 PC 屏幕获取位置比在平板电脑或手机上进行相应操作更准确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:58:25.913

如果您不发布代码，则很难猜测出了什么问题...

移动标记问题在大多数情况下与错误设置（或丢失）标记边界有关。

问候。

# objective-c - 在Objective-c中，我如何创建一个所有子类都可以访问但不能公开访问的方法

> ID：13596909
> 
> 赞同：3
> 
> 时间：2012-11-28T02:41:53.520
> 
> 标签：objective-c, inheritance

假设我创建了一个 viewController。然后我想创建另一个类似于第一个的 viewController。看起来像继承的工作。

但是，originalViewController 的许多任务都是私有方法，我想最小化公共接口。

如果我将这些方法声明为公开，那么将无法实现将私有内容保密的目标。

如果我将这些方法声明为私有，那么子类将不知道这些方法。

如果我为子类创建一个特殊的 .h 文件，那会很尴尬。

那么无论如何，做这种事情的行业标准方式是什么？

在 C++ 中，我们会使用受保护的方法或函数来完成这项工作吗？

更新：

我放

```
#import "BGGoogleMap+protected.h"

@implementation BGGoogleMap ()

@end 
```

它不起作用。它要求标识符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:48:46.450

除了 Catfish_Man 的建议之外，您还可以在您的类中创建只有您的子类可以访问的类别。这是有关如何执行[此操作的文档。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)基本上，您只需为您的类创建一个新接口并将任何私有方法放入其中。像这样：

```
@interface MyClass (MyClass_Private)
// Method declarations
@end 
```

将它们放在 Foo_Internal.h 中，并将 Foo_Internal.h 包含在您的子类中，但不要公开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T02:46:03.203

将标头拆分为 Foo.h 和 Foo_Internal.h 听起来是最好的方法。

# html - 仅使用 CSS 自定义 html 中的选择框

> ID：13596910
> 
> 赞同：0
> 
> 时间：2012-11-28T02:41:55.010
> 
> 标签：html, css

我有一个选择框，我只使用 css 对它进行了一些自定义，但我无法让它根据要求运行。

这是HTML页面的完整代码

```
<html>
<head>

<style>
select {
  -webkit-appearance:none;
  background-color:#58B14C;
  background-position:initial initial;
  background-repeat:initial initial;
  border:0;
  border-bottom-left-radius:8px;
  border-bottom-right-radius:8px;
  border-top-left-radius:8px;
  border-top-right-radius:8px;
  color:#EEEEEE;
  font-size:20px;
  font-weight:bold;
  margin-left:3px;
  padding:2px 10px;
  width:347px;
}

#mainselection { overflow:hidden; width:407px;
-moz-border-radius: 9px 9px 9px 9px;
-webkit-border-radius: 9px 9px 9px 9px;
border-radius: 9px 9px 9px 9px;
box-shadow: 1px 1px 11px #330033;
background:url("img/arrow.gif") no-repeat scroll 362px 6px black; }
</style>

</head>
<body>
<div id="mainselection">
<select>
<option>Select an Option</option>
<option>Option 1</option>
<option>Option 2</option>
</select>
</div>
</body>
</html> 
```

运行此代码后，输出看起来像我上传的图像。当我单击绿色部分时，下拉菜单会正常工作。我的意思是下拉的工作方式。但是我希望在单击箭头时下拉菜单。那么是否有可能将任何装饰应用于背景 div，它可以插入到选择的 css 中。连同图像？或者任何可以编写以获得所需功能的javascript？ ![在此处输入图像描述](../Images/ba95e81e2333e1e36fd9f9ab80484944.png)

# monodevelop - 在 monodevelop 如何清除任务列表？

> ID：13596918
> 
> 赞同：4
> 
> 时间：2012-11-28T02:43:01.867
> 
> 标签：monodevelop

我的任务列表板充满了旧的//Todo 注释任务，这些任务已从代码中解析出来。不幸的是，他们引用的文件早已消失，任务像僵尸一样四处游荡。删除每个任务只会引发文件丢失的错误。如何手动强制完全清除任务列表以便重新解析？我快速浏览了这部分 MD 的源代码，但我没有看到任何明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:54:07.530

我建议你[提交一个错误](http://bugzilla.xamarin.com)。

但是，为了快速解决问题，请尝试删除代码完成数据库缓存。在 Mac 上，您可以在 中找到它们`~/Library/Caches/MonoDevelop-3.0/DerivedData`，而在 Windows 上，它们位于`AppData\Local\MonoDevelop-3.0\Cache\DerivedData`.

# c - 在交换函数中使用 void 指针

> ID：13596922
> 
> 赞同：0
> 
> 时间：2012-11-28T02:43:22.207
> 
> 标签：c, pointers, swap, void

我有一个像这样的交换功能：

```
void swap(int i, int j, void* arr[])
{
    void *temp;
    temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
} 
```

我在 main 中调用 swap，如下所示：

```
main()
{
    int arr[8] = {4,7,9,2,6,7,8,1};
    void *ptr = arr;
    swap(0, 1, ptr);
    int k;
    for (k=0; k<8; k++)
        printf("%d ", arr[k]);
} 
```

现在，交换似乎工作正常，但是不是将 1 个值与另一个交换，而是将 2 个值与另外 2 个值交换。例如，当我执行 swap(0, 1, ptr) 时，我得到了数组

```
9,2,4,7,6,7,8,1 
```

当我应该得到：

```
7,4,9,2,6,7,8,1 
```

不是交换 4 和 7，而是交换 4,7 和 9,2。为什么要这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T02:46:30.160

`swap()`将数组视为指针数组，但实际传递的数组是 type 的数组`int`。显然，您的系统是这样的，一个指针的大小是两个`int`s，所以每次它交换一个“指针”时，它实际上是交换两个整数。

你需要你的交换例程是这样的：

```
void swap(int i, int j, int arr[])
{
    int temp;
    temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
} 
```

# android - 我在新函数中使用什么语法来复制 oncreate 方法中的代码功能

> ID：13596925
> 
> 赞同：0
> 
> 时间：2012-11-28T02:43:49.993
> 
> 标签：android, layout, structure

再试一次

我有这个代码示例，它不完整，但它应该让我的观点跨越

```
 public class MainActivity extends Activity {

    ListView list1;
    LazyAdapter adapter;
    String nUdid;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        final Context context = this;
        setContentView(R.layout.main);
        TextView viewtitle1 = (TextView) findViewById(R.id.textView1);

        JSONObject j = new JSONObject();
        try {
            j.put("action", "udid_get_products");
            j.put("success", "true");
            j.put("content", "udid product list");
            j.put("data", nUdid);
        } catch (JSONException e1) {
            e1.printStackTrace();
        }
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.xxxxxxxxx.com/yyyy/test.php");
    }
} 
```

这段代码存在于 oncreate 方法中

我需要做的是这个

```
 public class MainActivity extends Activity {

    ListView list1;
    LazyAdapter adapter;
    String nUdid;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        myNewFunction();
    }

    public void myNewFunction() {
        final Context context = this;
        TextView viewtitle1 = (TextView) findViewById(R.id.textView1);

        JSONObject j = new JSONObject();
        try {
            j.put("action", "udid_get_products");
            j.put("success", "true");
            j.put("content", "udid product list");
            j.put("data", nUdid);
        } catch (JSONException e1) {
            e1.printStackTrace();
        }
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.xxxxxxxxx.com/yyyy/test.php");
    }
} 
```

这会完全按原样工作还是我需要在函数名 myNewFunction 后面的 () 中做一些额外的事情。myNewFunction 语法中是否需要 oncreate 方法中的片段“Bundle savedInstanceState”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:34:33.787

你所拥有的应该没问题。如果您需要在该方法中引用它，您只需要定义 myNewFunction 方法来获取 Bundle。根据您的示例，您目前在 myNewFunction 方法中不需要它。

但除非您需要在 MainActivity 之外调用 myNewFunction 方法，否则我个人会将其设为私有。

# php - Select2 AJAX Multiple 无法正常工作

> ID：13596926
> 
> 赞同：4
> 
> 时间：2012-11-28T02:43:57.853
> 
> 标签：php, jquery, jquery-select2

所以我有一个 select2 ajax 选择器，在不使用 multiple 时可以完美运行，但是当我使用 multiple 时，它​​基本上有时可以正常工作，而其他情况则不能。

```
 $('#organizations').select2(
    {
        placeholder: "Add Organizations!",
        minimumInputLength: 3,
        multiple: true,
        ajax: {
            url: "https://boilerprojects.com/organizations/search",
            dataType: 'json',
            quietMillis: 100,
            data: function (term, page) {
                return {
                q: term, // search term
                page_limit: 10
                };
            },
            results: function (data, page)
            {
                var more = (page * 10) < data.total;
                console.log(data.results);
                return { results: data.results, more: more };
            },
            dropdownCssClass: "bigdrop"
        },
    }); 
```

我的 PHP 返回的是：`{"results":[{"id":"6","text":"LukePOLO"}]}`

所以我得到的结果只是没有填充。

有人有想法么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T22:01:17.390

如果您想使用该无限滚动选项，那么您的回答是错误的。

```
{"results":[{"id":"6","text":"LukePOLO"}]} 
```

应该是这样的：

```
{"results":[{"id":"6","text":"LukePOLO"}], "total":"1"} //Total 1 result 
```

您有关键结果，但没有总计的关键。在您的帖子数据功能中，您还应该说您搜索的女巫页面。

```
$('#organizations').select2(
{
    placeholder: "Add Organizations!",
    minimumInputLength: 3,
    multiple: true,
    ajax: {
        url: "https://boilerprojects.com/organizations/search",
        dataType: 'json',
        quietMillis: 100,
        data: function (term, page) {
            return {
            q: term, 
            page_limit: 10,
            page: page //you need to send page number or your script do not know witch results to skip
            };
        },
        results: function (data, page)
        {
            var more = (page * 10) < data.total;
            return { results: data.results, more: more };
        },
        dropdownCssClass: "bigdrop"
    }
}); 
```

# jquery-mobile - 使用 jquery-mobile 设计，如何处理错误消息？

> ID：13596927
> 
> 赞同：0
> 
> 时间：2012-11-28T02:44:00.273
> 
> 标签：jquery-mobile, devise, ruby-on-rails-3.2

在带有（Gemfile）的应用程序中：

```
gem "devise", ">= 2.1.2"
gem 'rails', '3.2.8' 
gem 'jquery_mobile_rails' 
```

在添加 jquery-mobile 之前，一切正常，当输入无效数据时，我得到带有错误消息和日志的页面：

```
Started POST "/users/sign_in" for 127.0.0.1 at 2012-11-28 12:01:13 -0500
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jLtHS2q0wO+tgswm9VM2/EiuTiq7J9Wwp8d65t/RSGE=", "user"=>{"email"=>"", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 0ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jLtHS2q0wO+tgswm9VM2/EiuTiq7J9Wwp8d65t/RSGE=", "user"=>{"email"=>"", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/sessions/new.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation.html.erb (0.5ms)
  Rendered layouts/_messages.html.erb (0.0ms)
Completed 200 OK in 29ms (Views: 28.9ms) 
```

添加 jquery-mobile 后，使用正确数据登录时工作正常，但使用无效数据我得到 401 并且不重定向注意。在 http 响应中（使用 firebug 查看）仅显​​示带有“无效电子邮件”（不是 html 代码或 json）之类的错误消息，并且 jquery-mobile 显示“错误加载页面”。

```
Started POST "/users/sign_in" for 127.0.0.1 at 2012-11-27 21:32:45 -0500
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"EYx56pui4v6trcuzmXQuhzY2BDHwqrADepKuySx9ub0=", "user"=>{"email"=>"test@test.net", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 0ms 
```

我生成了默认设计控制器和默认视图。

如何使用 jquery mobile 处理设计的错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:36:32.287

仅不要将 ajax 与 jquery-mobile 一起使用并设计为默认值。

在`config/initializers/devise.rb`

```
# If http headers should be returned for AJAX requests. True by default.
  config.http_authenticatable_on_xhr = false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:21:39.950

另一种解决方案是添加

```
:html => {:data => {:ajax => 'false'}} 
```

到有问题的表单，所以 jQM 不会劫持它并将其转换为 ajax 请求。

请查看我对同一问题的完整答案[https://stackoverflow.com/a/14595607/64669](https://stackoverflow.com/a/14595607/64669)

# android - 在 Android 中存储应用数据

> ID：13596933
> 
> 赞同：1
> 
> 时间：2012-11-28T02:44:32.947
> 
> 标签：android, android-sqlite

我对 android 开发完全陌生（来自 J2EE、Spring 和 Oracle 背景）。只是想在 android 中创建一个徽标测验应用程序。我正在计划我的简单 sqlite db 结构，

1.  唯一的图像名称
2.  徽标图像的答案（检查用户输入）
3.  是否回答（只是一个标志）
4.  如果回答，则加分。

用户安装应用程序后，必须使用所有值创建表。现在，我的疑问是，如何存储这些数据？如果我在一个活动中编写这个存储逻辑，那么每次活动启动时，我们会创建一个新的数据库并存储它吗？这个初始存储的编码逻辑会去哪里？

对于这个傻瓜问题，任何帮助都非常感谢......在此先感谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:51:06.260

您可以使用 HTML5 本地存储来存储数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:54:55.997

试试这个代码来检查你的数据库是否存在

```
private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try {

            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {
            // TODO: handle exception
        }

        if(checkDB != null){
            checkDB.close();
        }

        return checkDB != null;
    } 
```

所以如果它返回 true 你不需要创建一个新的数据库

或者您也可以从此 [链接学习](http://myandroidsolutions.blogspot.com/2012/07/android-database-tutorial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:55:35.127

使用 SharedPreferences 来存储应用程序数据。

例如 SharedPreferences 你可以找到数千个链接，这里有两个

[http://saigeethamn.blogspot.com/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.com/2009/10/shared-preferences-android-developer.html)

并且 api 文档在这里

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

但是如果你想存储大量数据，然后更好地使用数据库（或文件在某些​​情况下）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T03:47:05.347

是的。sqlite应该很简单。[首先从这里](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)从官方网站了解 sqlite 非常重要

然后参考[这里的例子](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

[SQLite 的使用](http://www.edumobile.org/android/android-development/use-of-sqlite/)

[在 Android 上使用 SQLite](http://www.drdobbs.com/database/using-sqlite-on-android/232900584)

# api - 使用 Node JS 代理 http 并修改响应

> ID：13596942
> 
> 赞同：7
> 
> 时间：2012-11-28T02:45:56.743
> 
> 标签：api, node.js, http-proxy

我正在尝试使用 Node JS 编写 API 服务的前端。

我希望能够让用户将他们的浏览器指向我的节点服务器并发出请求。节点脚本会修改请求的输入，调用 api 服务，然后修改输出并传回给用户。

我喜欢这里的解决方案（使用 Express JS 和 node-http-proxy），因为它通过我的站点将 cookie 和标头直接从用户传递到 api 服务器。

[node.js / express中的代理请求](https://stackoverflow.com/questions/7075577/proxy-request-in-node-js-express)

我看到如何修改请求的输入，但我不知道如何修改响应。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-24T11:55:36.597

[变压器代理](https://github.com/philippotto/transformer-proxy)在这里可能很有用。我是这个插件的作者，我在这里回答是因为我在寻找同样的问题时发现了这个页面并且对和谐不满意，因为我不想操纵 HTML。

也许其他人正在寻找这个并发现它很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T10:31:56.623

Harmon 旨在插入 node-http-proxy [https://github.com/No9/harmon](https://github.com/No9/harmon) 它使用小号，因此基于流来解决任何缓冲问题。它使用元素和属性选择器来启用响应操作。

这可用于修改输出响应。

见这里：[https ://github.com/nodejitsu/node-http-proxy/issues/382#issuecomment-14895039](https://github.com/nodejitsu/node-http-proxy/issues/382#issuecomment-14895039)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-10T19:40:47.513

[http-proxy-interceptor](https://github.com/kaysond/http-proxy-interceptor)是我为此目的而编写的中间件。它允许您使用一个或多个转换流来修改 http 响应。有大量可用的基于流的包（如 trumpet，harmon 使用），通过使用流，您可以避免缓冲整个响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-12T09:21:57.277

```
var httpProxy = require('http-proxy');
var modifyResponse = require('http-proxy-response-rewrite'); 
var proxy = httpProxy.createServer({
      target:'target server IP here',
        });
  proxy.listen(8001);
  proxy.on('error', function (err, req, res) {
  res.writeHead(500, {
  'Content-Type': 'text/plain'
});
res.end('Something went wrong. And we are reporting a custom error message.');
 });

proxy.on('proxyRes', function (proxyRes, req, res) {

modifyResponse(res, proxyRes.headers['content-encoding'], function (body) {
    if (body && (body.indexOf("<process-order-response>")!= -1)) {
        var beforeTag = "</receipt-text>"; //tag after which u can add data to 
                                                              //       response
        var beforeTagBody = body.substring(0,(body.indexOf(beforeTag) + beforeTag.length));
              var requiredXml = " <ga-loyalty-rewards>\n"+
                                 "<previousBalance>0</previousBalance>\n"+
                                 "<availableBalance>0</availableBalance>\n"+
                                 "<accuruedAmount>0</accuruedAmount>\n"+
                                 "<redeemedAmount>0</redeemedAmount>\n"+                                   
                                 "</ga-loyalty-rewards>";
     var afterTagBody = body.substring(body.indexOf(beforeTag)+  beforeTag.length)+
     var res = [];
     res.push(beforeTagBody, requiredXml, afterTagBody);    
     console.log(res.join(""));
     return res.join("");
    }
    return body;
   });
}); 
```

# mysql - 为什么我的查询不使用我的日期时间字段上的索引？

> ID：13596951
> 
> 赞同：6
> 
> 时间：2012-11-28T02:46:34.267
> 
> 标签：mysql

我有下表：

```
CREATE TABLE 'tableA'(
 `col1` int(11) NOT NULL AUTO_INCREMENT,
  `col2` varchar(20) NOT NULL,
  `col3` int(11) NOT NULL,
  `col4` varchar(200) NOT NULL,
  `col5` varchar(15) NOT NULL,
  `col6` datetime NOT NULL,
  PRIMARY KEY (`col1`),
  UNIQUE KEY `col2,col3` (`col2`,`col3`),
  KEY `col6` (`col6`)
) ENGINE=InnoDB AUTO_INCREMENT=1881208 DEFAULT CHARSET=utf8 
```

我在 col6 上有一个索引，一个 datetime 列。我的表中有近 2M 行，日期范围从 2007 年 1 月 1 日到 2012 年 11 月 27 日。

当我运行以下命令时，它不使用我的索引：

```
EXPLAIN SELECT * FROM tableA ORDER BY col6 ASC

+----+-------------+----------+------+---------------+------+---------+------+---------+----------------+
| id | select_type | table    | type | possible_keys | key  | key_len | ref  | rows    | Extra          |
+----+-------------+----------+------+---------------+------+---------+------+---------+----------------+
|  1 | SIMPLE      | tableA | ALL  | NULL          | NULL | NULL    | NULL | 1933765 | Using filesort |
+----+-------------+----------+------+---------------+------+---------+------+---------+----------------+ 
```

我尝试将 datetime 字段转换为整数并将 datetime 转换为 unix 时间戳。但是，它仍然不会使用我的索引。我错过了什么？为什么优化器坚持对大量行（在本例中为 1,933,765 行）进行排序而不是使用索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:53:09.880

由于您没有根据索引选择任何内容来缩小结果集，因此使用它只会产生额外的工作来通过点查找来查找主表中的每一行。

# matplotlib - matplotlib 和 Log10Transform 中的可选数字

> ID：13596953
> 
> 赞同：3
> 
> 时间：2012-11-28T02:47:01.740
> 
> 标签：matplotlib, scale, pickle

你可能已经知道，在 matplotlib 1.2.0 中有一个新的实验特性，即数字是可挑选的（它们可以用`pickle`模块保存）。

但是，当使用对数刻度时它不起作用，例如。

```
import matplotlib.pyplot as plt
import numpy as np
import pickle
ax = plt.subplot(111)
x = np.linspace(0, 10)
y = np.exp(x)
plt.plot(x, y)
ax.set_yscale('log')
pickle.dump(ax, file('myplot.pickle', 'w')) 
```

结果是：

```
PicklingError: Can't pickle <class 'matplotlib.scale.Log10Transform'>: attribute lookup matplotlib.scale.Log10Transform failed 
```

有人知道对此有任何解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:14:04.510

我已将其作为关于 matplotlib 的[github 问题跟踪器](https://github.com/matplotlib/matplotlib/issues/1539)的错误报告打开。在 matplotlib 存储库端实现它是一个相当容易的修复（只是不要将`Log10Transform`类嵌套在`LogScale`类中），但这并不能真正帮助您在 mpl 1.2.0 中使用它......

有一个解决方案可以在 1.2.0 中为您工作，但我警告您 - 它并不漂亮！

根据我对[腌制问题](https://stackoverflow.com/a/11493777/741316)的回答，可以腌制嵌套类（按原样`Log10Transform`）。我们需要做的就是告诉`Log10Transform`如何“[减少](http://docs.python.org/2/library/pickle.html?highlight=__reduce__#object.__reduce__)”本身：

```
import matplotlib.scale

class _NestedClassGetter(object):
    """
    When called with the containing class as the first argument, 
    the name of the nested class as the second argument,
    and the state of the object as the third argument,
    returns an instance of the nested class.

    """
    def __call__(self, containing_class, class_name, state):
        nested_class = getattr(containing_class, class_name)
        # return an instance of a nested_class. Some more intelligence could be
        # applied for class construction if necessary.
        c = nested_class.__new__(nested_class)
        c.__setstate__(state)
        return c

def _reduce(self):
    # return a class which can return this class when called with the 
    # appropriate tuple of arguments
    cls_name = matplotlib.scale.LogScale.Log10Transform.__name__
    call_args = (matplotlib.scale.LogScale, cls_name, self.__getstate__())
    return (_NestedClassGetter(), call_args)

matplotlib.scale.LogScale.Log10Transform.__reduce__ = _reduce 
```

您可能还决定对其他基于日志的转换/类执行此操作，但对于您的示例，您现在可以腌制（并成功取消腌制）您的示例图：

```
import matplotlib.pyplot as plt
import numpy as np
import pickle

ax = plt.subplot(111)
x = np.linspace(0, 10)
y = np.exp(x)
plt.plot(x, y)
ax.set_yscale('log')

pickle.dump(ax, file('myplot.pickle', 'w'))
plt.savefig('pickle_log.pre.png')
plt.close()

pickle.load(file('myplot.pickle', 'r'))
plt.savefig('pickle_log.post.png') 
```

我将继续为 mpl 1.3.x 修复此问题，以便将来不需要这种讨厌的解决方法:-)。

高温下，

# javascript - 如果出现新课程，如何替换课程

> ID：13596954
> 
> 赞同：0
> 
> 时间：2012-11-28T02:47:04.507
> 
> 标签：javascript, jquery, html, css

当拖动 div 时出现新类时，我需要替换一个类

```
<div class="grab-cursor"> 
```

更改为用户开始拖动 div 的时间

```
<div class="grabbing-cursor"> 
```

我有一个手风琴窗格，我需要在拖动完成之前关闭

```
<div class"accordion_on"> 
```

想把上面改成

```
<div class"accordion_off"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:50:57.127

使用jQuery：

```
$(".accordion_on").addClass("accordion_off").removeClass("accordion_on"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:51:13.610

您可以使用 jquery 添加类

```
$(document).ready(function () {
$('.my_draggable_elements').draggable({
    drag: function(){
      $('#'+this.id).attr('class','grabbing-cursor')
    }
}); 
```

});

您还可以使用 javascript ondragstart 和 ondrop 事件来更改类

```
There are a number of different events to attach to for monitoring the entire drag and drop process:

ondragstart,ondrag,ondragenter,ondragleave,ondragover,ondragend,ondrop 
```

拖动开始时调用函数

```
 ondragstart="change(this)"

function change(ev)
{
$('#'+ev.id).attr('class','grabbing-cursor');
} 
```

# javascript - 在 resize() 中检查窗口的宽度函数

> ID：13596955
> 
> 赞同：0
> 
> 时间：2012-11-28T02:47:55.650
> 
> 标签：javascript, jquery

我想在用户访问 url 中检查窗口的宽度，如果浏览器调整大小，然后再做一次。

Q1。如果我只在其中调用函数`setcolamt()`，`resize()`它不会做任何`colmat`与以前相同的值，我不知道为什么？我必须再次提取所有代码，就像`comment`then`colmat`将发生变化一样。

Q2。为什么`alert()`在`resize()`里面会弹出3次？

任何建议将不胜感激。

[jsfiddle](http://jsfiddle.net/86TDM/2/)

```
var colamt=0;
var winwid = $(window).width();
function setcolamt(){        
    if(winwid > 800){
        colamt = 8;
    }
    else{
        colamt = 4;
    }
};
setcolamt();
alert(colamt);

$(window).resize(function(){
    //var colamt=0;
    //var winwid = $(window).width();
    //function setcolamt(){        
        //if(winwid > 800){
        //    colamt = 8;
        //}
        //else{
        //    colamt = 4;
        //}
    //};
    setcolamt();
    alert(colamt);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:05:01.857

搬进。`var winwid = $(window).width();`_ `setcolamt()`但请注意`alert()`在检查前删除。它可能挂了。`console.log`比它好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:04:40.827

初始调用后宽度不会更新，因为该函数`setcolamt()`不会修改`winwid`.

```
var colamt=0;
var winwid = $(window).width();

function setcolamt(){        
    // Get the new winwid
    winwid = $(window).width();
    if(winwid > 800){
        colamt = 8;
    }
    else{
        colamt = 4;
    }
}; 
```

除非您打算使用`winwid`outside `setcolamt()`，否则没有必要在全局范围内声明它。相反，您可以在函数中声明和使用它

```
function setcolamt(){        
    // declare winwid here with var, not outside.
    // and no need to call $(window).width() outside...
    var winwid = $(window).width();
    if(winwid > 800){
        colamt = 8;
    }
    else{
        colamt = 4;
    }
}; 
```

[这是更新的jsfiddle](http://jsfiddle.net/86TDM/3/)（使用`console.log()`而不是烦人`alert()`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T03:09:05.373

1.  把*var winwid = $(window).width();* 在 setcolamt() 里面；
2.  不关心有多少警报，因为调整大小会触发多次。请改用 console.log()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T03:05:21.967

`var winwid = $(window).width();`只会设置一次，因为它是当前编写的。在调整大小事件中，您需要注意窗口的更新大小。一种快速的方法是将 移到`var winwid = $(window).width()`函数中。另一个是从传递给 .resize() 回调函数的事件中获取新宽度。

# java - 使用接口。如何验证我的 Java 接口？

> ID：13596960
> 
> 赞同：-2
> 
> 时间：2012-11-28T02:48:31.753
> 
> 标签：java, interface

我正在尝试像世界上数以百万计的其他人一样理解 Java 接口。如何测试我是否真的在使用我的界面？如果我在我的 TestBubbles 类中删除“实现”，我仍然会得到相同的结果。我可以更改任一方法定义并导致编译失败，但如何测试我传递的数据？

```
public interface Bubbles {
   public void addAir(String bubbleType, float bubbleOne, float bubbleTwo );
} 
```

* * *

```
public class TestBubbles implements Bubbles {

    public static void main(String [] args){
      String type = "wiggly";
      float sizeOne = 42.01f;
      float sizeTwo = 80.10f;

      TestBubbles tb = new TestBubbles();
      tb.addAir(type, sizeOne, sizeTwo);

}

   public void addAir(String rType, float fOne, float fTwo ){
       System.out.println(rType + " " + fOne + " " + fTwo);

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:13:07.780

通常，您应该使用接口类型的变量来引用对象。

例如

```
Bubbles tb = new TestBubbles(); //now it will not compile if you remove implements 
```

不如下（否则创建界面没有意义）

```
TestBubbles tb = new TestBubbles(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:25:18.507

您对此进行测试，并且应该通过使用接口类型而不是类的类型定义变量来对其进行编码。
看看你的线：

```
TestBubbles tb = new TestBubbles();
tb.addAir(type, sizeOne, sizeTwo); 
```

对接口进行编程时，应按如下方式编码：

```
Bubbles tb = new TestBubbles();
tb.addAir(type, sizeOne, sizeTwo); 
```

这样，您以后可以将 TestBubbles 与 SuperTrooperTestBubbles 交换，后者只需更改一行代码即可实现相同的接口，其余的将起作用：

```
Bubbles tb = new SuperTrooperTestBubbles();
tb.addAir(type, sizeOne, sizeTwo); 
```

在哪里

```
public class SuperTrooperTestBubbles implements Bubbles { .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:52:18.977

如果接口指定了对输入变量的任何约束，则由具体实现来检查它们。没有神奇的解决方案。

也就是说，如果它*不*`@Override`覆盖另一个方法，您可以将方法标记为编译器错误，这对这种情况很有用。我总是这样做。

# c - 与浮点数相比，双倍产生奇数输出

> ID：13596961
> 
> 赞同：0
> 
> 时间：2012-11-28T02:48:36.200
> 
> 标签：c

我真的很想知道为什么当我使用双精度时这会搞砸我的代码。据我了解，双精度数只是一个更精确的浮点数。然而在下面的代码中，如果我将 float 替换为 double，我会得到一个古怪的输出，即使所有代码所做的只是获取输入并将其吐出。

```
#include <stdio.h>

int y;
int z;
int i;
int n;
int r;
int c;
float e;
float d;

void main() {
    puts("Enter Row Number:");
    scanf("%i", &r);
    puts("Enter Column Number:");
    scanf("%i", &c);
    float x[r][c];
    int j = r;

    for(y = 1; y <= r; y++) {
        for(z = 1; z <= c; z++) {
            scanf("%f", &x[y][z]);
        }
    }
    for (y = 1; y <= r; y++) {
        for(z = 1; z <= c; z++) {
            printf("%g\t", x[y][z]);
        }
        puts("\n");
    }
} 
```

在使用浮点数的情况下，在为行输入 2 并为列输入 3 之后，然后是数字 1-6，我得到了 1-6 的输出，正如预期的那样。但是改用双精度并保持输入与以前相同，我得到的输出为 {1.36224e-312,1.78905e-307, 1.81506e-307, 3.15957e+263, 5.3568e-315, 3.44886e-313 }。显然，这甚至不接近正确，而且它不像我在这里处理复数......只是整数1-6。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:54:03.033

`scanf %f`需要 a 的地址`float`。将数据直接读取到非本地变量是很危险的`scanf`，因为很难看出它实际上不是`float`. 我会以这种方式更改代码以使其更健壮：

```
float temp;
scanf("%f", &temp);
x[y][x] = temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:06:39.487

你的循环是错误的：

```
for(y = 1; y <= r; y++) {
    for(z = 1; z <= c; z++) { 
```

当你定义一个数组

```
float x[r][c]; 
```

数组的索引从零变为大小减一。所以数组的`y`极限是`x`

```
x[0]  /* first sub-array */
x[r - 1]  /* last sub-array */ 
```

将循环更改为

```
for(y = 0; y < r; y++) {
    for(z = 0; z < c; z++) { 
```

请注意，它们现在从零开始，而是使用小于比较运算符。

# jquery - 如何选择具有可能干预类的选择器的下一个实例

> ID：13596965
> 
> 赞同：0
> 
> 时间：2012-11-28T02:49:13.213
> 
> 标签：jquery

我希望能够在下面选择特定选择器的下一个实例，例如 .ajax-loader。我尝试了 .next('.ajax-loader') 但似乎没有用，因为可能有中间类，只是简单地 next() 不起作用。这是我的标记和小提琴：

```
$(document).ready(function(){
  $('.click-me').on('click',function(){
    $(this).next().html('here i am');
  });
});​ 
```

html:

```
<button class='click-me'>JT</button>
<div class='other-loader'>other loader</div><div class='ajax-loader'></div><br />
<button class='click-me'>JU</button><div class='ajax-loader'></div><br /> 
```

在第一个例子中，我怎么能程序化地说下一个 ajax-loader 实例？这是一个小提琴：http: [//jsfiddle.net/HAJLP/2/](http://jsfiddle.net/HAJLP/2/)

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:01:25.550

尝试`nextAll()`与`:first`.

```
$(document).ready(function(){
  $('.click-me').on('click',function(){
     $(this).nextAll('.ajax-loader:first').html('here i am');
  });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:02:32.193

尝试这个：

```
$(document).ready(function(){
    $('.click-me').on('click',function(){
        $(this).find("~ .ajax-loader:first").html('here i am');
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:35:45.660

这个成本会更低，因为您只遍历 div 标签 -

> ```
> $(document).ready(function(){
>   $('.click-me').on('click',function(){
>       $(this).nextAll('div.ajax-loader:first').html('here i am');
>   });
> });​ 
> ```

# encryption - 根据字符串和盐确定使用的加密

> ID：13596967
> 
> 赞同：2
> 
> 时间：2012-11-28T02:49:25.193
> 
> 标签：encryption, hash, theory

我正在对我负责理解的系统进行逆向工程。系统使用令牌和半随机 [1] 时间戳（作为盐）和未知的散列函数来生成用于身份验证的随机密钥。

它生成的字符串长度为 64 个字符，并且似乎有一种散列模式。例如（基于不相关长度的虚构输入和输出，因为这个问题是理论）：

```
salt: 135407067754316
token: aaaa.bbbb.cccc.dddd 
```

这将产生：

```
hash: d41d8cd98f00b204e9800998ecf8427ed41d8cd98f00b204e9800998ecf8427e 
```

然后换盐：

```
salt: 13540707209819
token: aaaa.bbbb.cccc.dddd 
```

产生：

```
hash: d41d9g838fddb275e9800123ecf8427ed41d9g838fddb275e9800123ecf8427e 
```

这*类似于*第一个哈希（前 3 个字符始终匹配），其中生成的唯一区别是密钥（半随机时间戳），这使我得出结论，他们正在使用一些基本的哈希，它使用随机时间戳作为盐。

**问题**我将如何缩小他们的加密方式或他们正在使用的功能？我可以生成我需要的任意数量的哈希（使用我可用的密钥和令牌）但是我不能使用我选择的令牌和密钥生成哈希。结果是 64 个字符的长度。

如果我有 100、200、500、1000、10000、100000 个盐、令牌和结果的示例，是否存在允许我暴力破解生成方法的技术？

[1] 半随机意味着他们采用当前时间戳（例如：1354068826）并在末尾添加一个随机的 5 长度数字，以创建类似 135406882613951 的内容）

最后一点，除了基本概念（输入值和盐，获取哈希）之外，我对加密、散列或安全一无所知。

# java - Java 读取和写入对象到文件

> ID：13596970
> 
> 赞同：0
> 
> 时间：2012-11-28T02:50:01.567
> 
> 标签：java, file, object, nio

我的任务是创建一个类 (RandomAccessObjectFile)，它提供对象的读取和写入以及在文件中的查找。这是我第一次使用 Java File NIO，并希望确保我正确掌握它。以下是我在课堂上必须具备的方法，我正在寻求一些帮助和更多了解如何处理这门课的其余部分。

```
public class RandomAccessObjectFile {

RandomAccessFile raFile;
private RandomAccessObjectFile(String fileName) throws FileNotFoundException {
    raFile = new RandomAccessFile(new File(fileName), "rw");
}

static void create(String fileName) throws IOException {
    Path createTarget = Paths.get(fileName);
    Files.createFile(createTarget);
}

static void delete(String fileName) throws IOException {
    Path deleteTarget = Paths.get(fileName);
    Files.delete(deleteTarget);
}

static RandomAccessObjectFile open(String fileName) {

}

<T> void write(T obj) {
}

<T> T read() {

}

void seek(long location) {
}

long length() {

} 
```

}

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:29:47.010

对于`java.nio`包的背景，您可以从[java 教程开始。](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html) 要将对象序列化为文件，我使用[ObjectOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)取得了成功。我认为您可能需要进一步说明 seek 方法应该做什么。长输入是文件位置吗？这似乎是一件奇怪的事情，因为写入文件的对象将占用文件中不同数量的空间。seek 方法的大多数输入值都是无效的，因为文件中的特定位置可能不代表对象序列化的开始。但如果这就是输入参数的解释方式，那么我认为如果输入值不代表对象的开始，该方法应该抛出 IllegalArgumentException。

这个类的用户如何知道如何寻找一个特定的对象？

也许您还应该存储一些索引数据。也许写入文件的每个对象都需要有一些唯一的 ID 字段。然后创建一个映射，将这些 ID 映射到文件中的位置。然后可以使用此映射快速跳转到正确的文件位置以读取数据。只要文件中的数据不需要更改，这种方法应该可以很好地工作。以这种方式将新对象添加到文件中应该可以正常工作，但是修改对象或从文件中间删除对象将需要更多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:01:24.600

`Path`除了对 and 的琐碎和冗余使用之外，这里根本没有 NIO `Files`，因此很难看出您的问题实际上是关于什么的。但是我会评论如下：

1.  该`create()`方法是多余的。构建类的实例时将创建目标文件，否则将引发异常。

2.  该`delete()`方法是多余的，`File.delete()`并且`Files.delete()`已经存在。

3.  整个任务都是徒劳的。对象流不是随机访问。它们是严格的流。除非您知道去哪里寻找，否则您无法寻找它们，并且没有提供任何 API 来获取该信息。

# android - 查询函数上的Phonegap 传递参数。存储 API

> ID：13596971
> 
> 赞同：1
> 
> 时间：2012-11-28T02:50:06.153
> 
> 标签：android, jquery, cordova

我正在使用一个包装的 android 应用程序，`phonegap`并且我正在使用它的 Storage API。如何在我的 Sqlite 查询上传递参数以获取特定行？提前致谢。下面是我的脚本。你能给我一个例子吗？谢谢

```
$(document).ready(function() {  

            code        = 1;

            var db = window.openDatabase("DEMO", "1.0", "DEMOX", 20000000 ); // 20MB in quuota storage size
                db.transaction(function(){ queryDB(code) }, errorCB, querySuccess);

             function querySuccess(tx, results) {
                 console.log("Returned rows = " + results.rows.length);
                 // this will be true since it was a select statement and so rowsAffected was 0
                 if (!resultSet.rowsAffected) {
                     alert('No rows affected!');
                   return false;
                 }
             }

            function queryDB(tx, code) {
                 tx.executeSql('SELECT * FROM table WHERE code = ?', [code], querySuccess, errorCB);
            }

            function errorCB(err) {
                 console.log("Error processing SQL: "+err.code);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:05:23.653

My solution : hope this will help others.

```
$(document).ready(function() {  

        code        = 1;

        var db = window.openDatabase("DEMO", "1.0", "DEMOX", 20000000 ); // 20MB in quuota storage size
            db.transaction(queryDB, errorCB, querySuccess);

         function querySuccess(tx, results) {
             console.log("Returned rows = " + results.rows.length);
             // this will be true since it was a select statement and so rowsAffected was 0
             if (!resultSet.rowsAffected) {
                 alert('No rows affected!');
               return false;
             }
         }

        function queryDB(tx) {
             var sql = 'SELECT * FROM table WHERE code = :code'; 
             tx.executeSql(sql, [code], querySuccess, errorCB);
        }

        function errorCB(err) {
             console.log("Error processing SQL: "+err.code);
        }
    }); 
```

# php - DreamHost 和 CodeIgniter htaccess

> ID：13596983
> 
> 赞同：3
> 
> 时间：2012-11-28T02:51:33.390
> 
> 标签：php, .htaccess, codeigniter, dreamhost

我有一个 CodeIgniter 应用程序，它成功部署在 localhost 和 justhost 上，没有任何错误。现在，我需要迁移到 DreamHost 并将其放在子目录中：http: [//mywebsite.com/code_igniter_root/](http://mywebsite.com/code_igniter_root/)现在应用程序给我这个旧的 htaccess 文件的“未指定输入文件”错误：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

当我通过在 RewriteRule index.php 之后添加问号来更改此设置时，它可以工作：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L,QSA] 
```

但是，有一个问题是我无法再通过 $_POST 和 $this->input->post(); 接收帖子数据；

这个问题的解决方案是什么？DreamHost 真的很烦人...

# jquery - 使用 jQuery 预加载大图像

> ID：13596986
> 
> 赞同：0
> 
> 时间：2012-11-28T02:51:51.440
> 
> 标签：jquery, image, preload

所以我遇到了这个问题，我需要将非常大的图像（7MB）显示为背景和其他东西，但是当在线时，浏览器只需花一点时间并慢慢显示图像（比如它的 2001 年）。

有没有办法获得某种预加载器，比如在 Flash 中，但是使用 jQuery？我见过很多东西，但这似乎不是实际的预加载，而是即时引入图像。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T04:24:51.147

没试过，不过有个jquery插件可以帮忙，懒加载

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:34:13.390

您肯定需要针对网络优化这些图像。话虽如此，您可以通过多种方式预加载它们。我肯定只会在您需要它们时才加载它们，因此您可以尝试将图像 URL 存储在某个地方，然后在需要时执行以下操作：

```
var myImageUrl='image.jpg';
$('.imageContainer').append('<img src="'+myImageUrl+'" />');
$('.imageContainer img').load(function() {
    alert('done loading image');
}); 
```

有了这个，您可以创建一个预加载器。

# sql-server - 如何将序列号列添加到结果数据中？

> ID：13596987
> 
> 赞同：5
> 
> 时间：2012-11-28T02:51:54.073
> 
> 标签：sql-server, sql-server-2008

> **可能重复：**
> [向此 T-SQL 查询添加行号](https://stackoverflow.com/questions/9150378/add-row-number-to-this-t-sql-query)

我正在使用 sql server 2008。

当我输入：从员工中选择 *。结果是这样的：

```
EmpID    |    EmpName    |    Salary
-------------------------------------
DB1608   |    David      |    100000
JT2607   |    John       |    150000
AM1707   |    Ann        |    140000
ML1211   |    Mary       |    125000 
```

但我想要这样的结果：

```
No      |    EmpID    |    EmpName    |    Salary
--------------------------------------------------
1       |    DB1608   |    David      |    100000
2       |    JT2607   |    John       |    150000
3       |    AM1707   |    Ann        |    140000
4       |    ML1211   |    Mary       |    125000 
```

“否”列是自动增量编号，而不是此表中的标识字段。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T02:58:07.083

使用`ROW_NUMBER()`（[文档](http://msdn.microsoft.com/en-us/library/ms186734.aspx)）

```
SELECT ROW_NUMBER() OVER (ORDER BY EmpID ASC) AS No, 
    EmpID, EmpName, Salary
FROM Employee 
```

## [看实际](http://sqlfiddle.com/#!3/09bf0/1)

# javascript - Javascript 获取文本区域的内容与边框像素的距离

> ID：13596990
> 
> 赞同：1
> 
> 时间：2012-11-28T02:52:08.837
> 
> 标签：javascript, jquery

如何确定输入框中的文本，从左框中的像素数？可能有utf8，中文 ![在此处输入图像描述](../Images/746349da9c7c113ef4635f893d016ad9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:18:32.420

这可能不是最好的方法，但我想这可能是一个开始。这将返回输入元素中剩余的像素数：

```
function getRemainingWidth(element){
    var span = $('<span class=\"'+$(element).attr('class')+'\" style=\"visibility:hidden;\">'+$(element).val()+'</span>');
    $(document.body).append(span);
    var diff = $(element).width() - $(span).width();
    $(span).remove();
    return diff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:20:58.917

一种方法是创建一个`span`元素并将文本添加到其中。但是有一个问题：你必须将它添加到 dom 中才能得到它：

```
var sYourText = 'asdfafdsa, dzcvxvxc';
var oText = document.createElement('span');
oText.innerHTML = sYourText;
document.getElementsByTagName('body')[0].appendChild(oText)
console.log(oText.offsetWidth); 
```

当然：请务必应用与您的 textarea 相同的字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:34:30.430

```
$("textarea").keyup(function(){
                var s = $(this).val()
                var data = s.replace(/(\s)/g,'&nbsp;')
                console.log(data)
                $('span').html(data)
            }) 
```

我用替换的常规空格替换它，但可能需要使用 CSS 的包装问题

# perl - 舞者 DBIC 无法加载 schema_class

> ID：13596994
> 
> 赞同：1
> 
> 时间：2012-11-28T02:52:44.277
> 
> 标签：perl, dancer

我有一个正在运行的 Dancer 应用程序。我正在为数据库使用 DBIC。

我想向数据库中添加一些表，因此我为这些表创建了新文件。但是，现在当我重新启动应用程序时，出现以下错误

```
Error while loading ././bin/app.pl: Could not load schema_class MyApp::Schema at /usr/local/share/perl/5.14.2/Dancer/Plugin/DBIC.pm line 42.
Compilation failed in require at ././bin/app.pl line 5.
BEGIN failed--compilation aborted at ././bin/app.pl line 5. 
```

当我删除新文件时，一切正常。

这是我的 Schema.pm 文件

```
package MyApp::Schema;

# Created by DBIx::Class::Schema::Loader
# DO NOT MODIFY THE FIRST PART OF THIS FILE

use strict;
use warnings;

use base 'DBIx::Class::Schema';

__PACKAGE__->load_namespaces;

1; 
```

我在哪里可以获得有关错误和我做错了什么的更多信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:48:14.013

由于您正在使用`__PACKAGE__->load_namespaces`，所有新类都将加载，这解释了为什么新类文件的简单存在会导致错误。如果您的新类文件中存在语法错误，则加载模式将失败。

您可以`perl -c`在新的类文件上使用，以确保它们能够编译并更好地了解问题（如果没有的话）。

# io - 为什么不需要 CPU 来处理 I/O 请求？

> ID：13596997
> 
> 赞同：66
> 
> 时间：2012-11-28T02:52:56.377
> 
> 标签：io, operating-system

我正在学习操作系统，但有一个小概念我无法掌握。假设进程 1 正在 CPU 上运行，然后它发出 I/O 请求以从磁盘读取。为提高效率，CPU 在处理此请求时开始执行进程 2。这一切都说得通，但 I/O 不需要使用 CPU 吗？

![在此处输入图像描述](../Images/52a6e5bbf3168fd6232241aaff4646fe.png)

**我的问题：**为什么不需要 CPU 来服务进程 1 的请求？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-28T08:16:36.343

这将有助于理解 I/O 在计算机体系结构中的 3 个重要方面的作用：中断、DMA 和硬件控制器。

当 CPU 向硬盘发出 I/O 请求时，硬盘有自己的专用芯片，称为设备（或硬件）控制器，专门用于处理来自 CPU 的命令，例如从磁盘读取。最初这些是为 CPU 执行特定操作的简单芯片，但现代硬件控制器基本上是它们自己的带有固件和所有东西的微处理器，因此它们能够在没有主 CPU 帮助的情况下进行非常复杂的操作。当硬盘驱动器的控制器忙于执行请求时，主 CPU 可以自由地做它想做的任何事情，例如在您的示例中执行进程 2。控制器能够使用所谓的直接内存访问 (DMA) 控制器直接读写系统 RAM，

当硬盘驱动器完成请求并且相关数据已通过 DMA 加载到 RAM 中时，它会发出中断请求，通知 CPU 数据已加载到 RAM 中。此时 CPU 可以将控制权转移回进程 1。因此，CPU 不需要对所有涉及 I/O 的任务进行微观管理。曾经是这种情况，但发明了这些技巧（中断、DMA、特殊控制器）是为了提高 CPU 性能并提高效率。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2016-05-01T07:26:15.083

cpu是用来发起每一个io请求，然后在准备好的时候接受……不是cpu不参与io操作。

例如，将 2gb 文件从 c 驱动器复制到 d 驱动器并打开任务管理器..在性能选项卡中，您将看到磁盘利用率以及 cpu 使用情况。

证明我的观点。

阿山