# StackOverflow 问答 15881000-15881999

# python-2.7 - 我正在尝试切片：但是我们还没有学会它

> ID：15881001
> 
> 赞同：0
> 
> 时间：2013-04-08T13:56:08.863
> 
> 标签：python-2.7

我试图取两个随机整数，然后将相应编号的东西从列表中切出，但是我不确定我应该做什么。它说 [r1:r2] 中的冒号不正确。

```
from random import* 

#2

z=['cats','dogs','soccer','weather','whale','tennis']

def slicer(ls):
    r1=randrange(0,5)
    r2=randrange(0,5)
    for x in ls:
        [r1:r2]
    return('The slice from '+str(r1)+' to '+str(r2)+' is: ' + ls)

print(slicer(z)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:01:34.153

你试图什么都不切。[r1:r2] 不是有效的 Python 语法。

我认为您正在尝试做的是：

```
sliced = ls[r1:r2] 
```

但即使这样也不太可能做你想做的事，因为切片中的第二个数字需要更高。

一种更正确的方法来处理您似乎正在尝试做的事情（但我不是读心术者）

```
r1 = randrange(0,len(ls)-1)
r2 = randrange(0,len(ls)-r1-1) #Number of items to slice, -1
slice = ls[r1:r1+r2] 
```

这将返回列表的一个小节，至少 1 项长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:58:46.417

那是因为为了切片，您需要一个列表（或类似对象的序列）来从中获取切片。

你可能打算做的只是`return ls[r1:r2]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:02:04.720

我想我明白了

```
from random import* 

z=['cats','dogs','soccer','weather','whale','tennis']

def slicer(ls):
    r1=randrange(0,5)
    r2=randrange(0,5)

    if (r1<r2):
        return('The slice from '+str(r1)+' to '+str(r2)+' is: ' + str(ls[r1:r2]))
    else:
        return('The slice from '+str(r2)+' to '+str(r1)+' is: ' + str(ls[r2:r1]))
print(slicer(z)) 
```

# emacs - Emacs 中的拆分窗口——Tabbar 仅显示活动缓冲区

> ID：15881015
> 
> 赞同：3
> 
> 时间：2013-04-08T13:56:46.857
> 
> 标签：emacs, elisp

我正在使用拆分 Emacs 框架将我的窗口移动到更方便的状态。但是，有两件事困扰着我，我想知道它们是否可以改变：

1.  我正在使用标签栏，当前打开的所有缓冲区都显示在所有窗口拆分上。我希望只显示当前拆分可用的缓冲区。因此，如果我`somefile.org`在顶部拆分和`anotherfile.org`底部打开，我希望只有相应的一个出现在每个标签栏列表（顶部和底部）中。

2.  我想知道是否有可能将模式行配置为仅在底部出现一次，并在我移动到另一个窗口时刷新它。对于那些知道的人来说，一些类似的东西`tmux`- 信息会根据我目前所在的窗口进行更改（尽管它被称为窗格）。

**编辑：**

关于第1点：

假设我有 2 个打开的缓冲区 -`file1.txt`和`file2.txt`. 第一个显示在顶部的垂直拆分中，另一个显示在底部的垂直拆分中。我希望顶部标签栏只显示`file1.txt`，底部只显示`file2.txt`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T14:52:30.023

以下是问题 1 的答案：

```
(setq tabbar-buffer-groups-function (lambda () (list
  (if (eq (get-buffer-window (current-buffer)) (car (window-list)))
     "my-active-buffer"
     "not-used")))) 
```

* * *

我相信@phils 关于第 2 个问题是正确的——也就是说，如果不修改使 Emacs 成为现实的底层“C”源代码，这是不可能的。

* * *

这是问题 2 的另一种方法，它使非活动窗口的模式行的背景与缓冲区的背景颜色相同。原始发布者可以使用该代码并使非活动模式行的文本也与缓冲区的背景颜色相同，这将使非活动模式行完全不可见。但是，可见模式行会自然地将位置切换到处于活动状态的任何窗口。

[https://stackoverflow.com/a/20936397/2112489](https://stackoverflow.com/a/20936397/2112489)

[![例子](https://i.stack.imgur.com/nFoQV.png)](https://i.stack.imgur.com/nFoQV.png)
[（来源：[lawlist.com](http://www.lawlist.com/images/modeline-example.png)）]

# java - 通过连接点进行弹簧方面的单元测试用例？

> ID：15881020
> 
> 赞同：5
> 
> 时间：2013-04-08T13:56:54.777
> 
> 标签：java, spring, spring-aop

我有spring aop方面，它的方法如下：这是一个在特定方法之前将被调用的方面。

```
public void someMethod(JoinPoint jp) {
        //Somelogic
    } 
```

我需要为此编写一个junit测试用例。我如何实例化并将参数发送到`someMethod`？我的意思是我怎样才能`JoinPoint`用 args 填充？如何在关节点设置参数并传递它？方面是在应用程序上下文 xml 文件中配置的。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:09:28.600

我认为您在这里有几个不错的选择...

1.  `JoinPoint`是一个接口。因此，您应该能够创建您自己的具有您期望的行为的“存根”实现。在您的测试中，实例化此存根的新实例并将其传递给`someMethod`方法。
2.  使用模拟框架来模拟`JoinPoint`对象，并在模拟上设置预期的行为。如果您不熟悉一般的模拟框架，这可能听起来有些陌生，所以我建议您查看[Mockito](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html)上的文档，这是一个流行的模拟框架。

在单元测试方面，最佳实践（至少我的）建议测试应该始终使用某种模拟/存根（用于成员和传递的参数），以确保单元测试只测试单元。如果您要使用`JoinPoint`Spring/AspectJ 使用的实现，那么您可能还在***单元***测试中测试***它们***实现的一些逻辑。如果将来这些实现细节发生变化，您的测试可能会在您没有任何代码更改的情况下中断。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T10:55:40.483

我深入研究了这一点，发现最简单的方法是创建一些方面应该绑定到的“模拟方法”，然后您可以在测试中调用这些方法并针对方面所做的事情进行断言。

模拟 JoinPoint 非常困难且非常耗时，因为您通常希望访问其中的许多本机内容，例如声明为 final 的反射对象，因此模拟起来很复杂。*

# java - 原始值如何存储在对象中以及对象被转换时会发生什么

> ID：15881026
> 
> 赞同：1
> 
> 时间：2013-04-08T13:57:02.170
> 
> 标签：java, integer, primitive

我想这是一个非常基本的问题，但我不知道如何理解跟随所以如果有人会这么好

```
Object a = 128;
Object b = 128;
Log.debug("a: " + ((Integer) a == (Integer)b));
Log.debug("b: " + (((Integer) a).intValue() == ((Integer) b).intValue())); 
```

“a”为假，而“b”为真，对于 a = 127 和 b = 127，两者都为真

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:02:27.577

```
Object a = 128 
```

编译为

```
Object a = Integer.valueOf(128) 
```

这称为自动装箱。

在某些 JDK 版本中，Integer.valueOf() 使用通常从 -128 到 127 的 Integer 实例缓存，并从该缓存中返回实例，而不是每次都创建一个新的 Integer 实例。这就是为什么`==`127 返回 true 而 128 不返回的原因。

不要依赖这个，因为它是一个非强制性的实现细节。始终比较它们的原始 int 值或使用`equals()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T13:58:56.630

`==`运算符仅适用于整数实例的缓存值。并且整数的缓存范围是从 -128 到 127。但是，在第二种情况下，`Integer.intValue()`返回一个 int 原语，在这种情况下，`==`运算符的工作方式与在原语情况下的工作方式相同。

有关的：

[== 后增量后令人费解的行为](https://stackoverflow.com/questions/15064785/puzzling-behaviour-of-after-postincrementation/15064819#15064819)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T13:59:02.587

当您比较对象引用时，`==`被定义为`true`当引用引用**相同对象**时，而不是等效对象。（这就是为什么[`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)。）

对于原语，`==`定义`true`为等效值。

在您的第一个示例中，您有两个不同的对象，一个分配给`a`，另一个分配给`b`。这是因为您尝试分配给引用类型的原语是“自动装箱的”（自动包装在原语的等效对象类型中）。你的代码：

```
Object a = 128;
Object b = 128; 
```

...有效地处理如下：

```
Object a = Integer.valueOf(128);
Object b = Integer.valueOf(128); 
```

...where[`Integer.valueOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf%28int%29)返回一个`Integer`包含您给它的值的对象，对于具有相同值的后续调用，该对象可能是也可能不是同一个对象，具体取决于您给它的值。来自 Javadoc：

> `Integer`如果不需要新实例，则通常应优先使用此方法，而不是构造函数`Integer(int)`，因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。此方法将始终缓存 -128 到 127（含）范围内的值，并且可能缓存此范围之外的其他值。

因此，这意味着当您使用值 127 运行它时，每次调用 都会返回**相同的对象**`Integer.valueOf`，因此可以正常`==`工作。但是对于 128，每次调用都会返回*不同*`==`的对象，因此不起作用，因为它再次检查两个引用是否引用**同一个对象**，而不是等效的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T14:12:21.897

Integer.intValue() 它将对象转换为原始数据类型为 int

'==' 的功能是检查项目的平等性

如果我们检查诸如 (Integer) a == (Integer)b 之类的对象，那么它会检查

该整数值的引用，因为您将其类型转换为来自原始数据类型的对象

和 ((Integer) a).intValue() == ((Integer) b).intValue())

它检查实际值而不是参考（存储这些值的内存地址位置

如果要检查实际值，请使用 equals() 方法比较它们的值。

# iphone - CLLocationManager在iphone处于飞行模式时第一次获取纬度和经度值。为什么？

> ID：15881032
> 
> 赞同：1
> 
> 时间：2013-04-08T13:57:25.453
> 
> 标签：iphone, ios, cllocationmanager, latitude-longitude

我将手机置于飞行模式并尝试获取位置详细信息。第一次它需要纬度和经度值，然后我再次尝试获取位置，但它失败并抛出 kCLErrorLocationUnknown 错误。但根据 Apple 在飞行模式时，它不应该接受任何信号。但第一次需要。为什么？非常感谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:06:08.657

可以从上次使用位置服务时缓存位置。要检查该位置的最新程度，请检查该位置的`timestamp`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:03:49.657

当您启动`CLLocationManager`它时，它将返回最后一个已知位置，这是为了加快速度。

由于从 GPS 获取位置可能需要一些时间，因此 iOS 将首先尝试通过三角测量获取位置。基于手机信号塔信息或 WiFi。

该类[`CLLocation`](https://developer.apple.com/library/iOS/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/c_ref/CLLocation)有一个`timestamp`属性，可让您检查位置是否是最新的。

# android - 从捆绑包中获取字符串 android 返回 null

> ID：15881033
> 
> 赞同：10
> 
> 时间：2013-04-08T13:57:26.343
> 
> 标签：android, android-activity, bundle

我想将一个字符串从一个活动传递到另一个活动，我在其中一个活动中写道

公共无效pdfView（文件f）{

```
 // f is: /data/data/com.example.iktabClasses/files/fileName.pdf

 Intent intent = new Intent(getApplicationContext(),NewPdfActivity.class);

 intent.putExtra("filename", f);

    startActivity(intent);

} 
```

在另一个活动中我写道：

```
 Bundle b=getIntent().getExtras();

        if (b != null) {

        filename = getIntent().getStringExtra("filename");

       System.out.println("filename: "+filename);
    } 
```

但文件名始终返回为“空”。如何解决这个问题？提前致谢。/////////////////

我把它做成

```
 Intent intent;
    Bundle b = new Bundle();

    b.putString("filename", f.toString());

    intent = new Intent(getApplicationContext(),NewPdfActivity.class);

    intent.putExtras(b);

    startActivity(intent); 
```

现在它可以工作了

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-08T14:04:21.390

试试这个方法

```
Intent intent = new Intent(first.this, second.class);

Bundle bundle = new Bundle();
bundle.putInt("index", index);

intent.putExtras(bundle);startActivity(intent); 
```

然后得到它

```
Bundle b = getIntent().getExtras();
int index = b.getInt("index"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:04:14.950

在您的其他活动中，而不是使用

```
filename = getIntent().getStringExtra("filename"); 
```

尝试使用

```
filename = b.getString("filename"); 
```

那应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T19:19:03.190

问题是，在 中`pdfView()`，它被写为`intent.putExtra("filename", f);`。

尝试将其转换为`toString()`（即`intent.putExtra("filename", f.toString());`

也许，您可以跳过发送`Bundle`到显式意图。

# turbolinks - 如何让 turbolinks 始终从服务器获取页面

> ID：15881034
> 
> 赞同：7
> 
> 时间：2013-04-08T13:57:27.443
> 
> 标签：turbolinks

如果我有一个永远不应该被缓存并且应该始终从服务器检索的页面，当用户按下后退按钮时，我怎样才能让 turbolinks 做到这一点？它会服从来自 http 响应的缓存控制指令吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-01T03:05:27.780

这在[Turbolinks 5](https://github.com/turbolinks/turbolinks)中发生了变化，现在您需要将其设置`<head>`为不缓存页面的级别：

```
<head>
  ...
  <meta name="turbolinks-cache-control" content="no-cache">
  ...
</head> 
```

参考：[https ://github.com/turbolinks/turbolinks#opting-out-of-caching](https://github.com/turbolinks/turbolinks#opting-out-of-caching)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-07T22:33:22.210

您可以执行以下操作以使 turbolinks 始终从服务器获取所有页面的页面（至少在我的情况下这是所需的行为，因此单击后退按钮页面也会更新）：

```
// js
Turbolinks.pagesCached(0); 
```

或者，根据[文档](https://github.com/rails/turbolinks/#transition-cache-a-speed-boost)为一个站点禁用它，只需将`data-no-transition-cache`属性添加到任何元素，例如在您不想被缓存的站点上将其添加到正文：

```
<body data-no-transition-cache>...</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:33:02.200

在用户访问启用了 turbolink 的页面后，您无法禁用 turbolinks 效果，即使您禁用了 turbolinks，当用户按下返回按钮时，可能会显示浏览器缓存的页面。

后面部分是不可逃避的，但格式化程序部分很容易通过设置链接来强制制作正常链接来逃避，`data-no-turbolink`这导致总是需要像这样检索页面

```
<div>
  <a href="retrieve_always.html" data-no-turbolink>Special Page</a>
  <a href="normal_page.html">NormalPage</a>
</div> 
```

而且，您可以在`data-no-turbolink`全局范围内设置更多

```
<div data-no-turbolink>
  <a href="retrive_page1.html">Retrive page 1</a>
  <a href="retrive_page2.html">Retrive page 2</a>
</div> 
```

在这些情况下，所有检索所需的页面都由浏览器而不是 turbolinks 缓存，因此，后退按钮按下处理委托给浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T19:50:13.593

简短的回答是否定的，当按下后退按钮时，您不能禁用显示页面的缓存副本。这种行为与浏览器的默认行为不同，Turbolinks 会尽可能地模仿浏览器的默认行为。

如果您访问任何网站，单击几个链接，然后按返回按钮，您会注意到浏览器显示一个缓存副本。据我所知，不能在浏览器级别禁用。

# android - 如何正确使用android dp单元？

> ID：15881041
> 
> 赞同：1
> 
> 时间：2013-04-08T13:57:41.387
> 
> 标签：android, android-layout, android-widget

Nexus 4 和三星 Note II 中的 100 dp 按钮看起来大小不同。但根据[http://developer.android.com/guide/practices/screens_support.html#density-independence](http://developer.android.com/guide/practices/screens_support.html#density-independence)两部手机的尺寸应该是一样的。我错过了什么？

# c# - 跨服务器维护会话？

> ID：15881042
> 
> 赞同：1
> 
> 时间：2013-04-08T13:57:42.053
> 
> 标签：c#, php, asp.net

我在不同的服务器上有两个应用程序。一个应用程序在 LAMP 环境中，另一个在带有 IIS7 的 ASP.Net 4.0 上。主应用程序在 PHP 中，而 ASP.Net 应用程序只是 PHP 应用程序的一个模块。

这两个应用程序将共享 MySQL 中的同一个数据库。

我需要在服务器之间共享会话。有没有人这样做过？我对此没有什么想法-

1.  在 MySQL 数据库中创建 Seesion 表，并让 PHP 和 ASP.Net 读/写会话到该表中。=> 对于这个 PHP 代码需要更改。客户可能不同意这一点。

2.  由于 PHP 将会话存储在文件中，因此在 PHP 服务器上编写 Web 服务，它将读取/写入会话详细信息到会话文件。ASP.Net 应用程序可以使用此服务来读取/写入会话。服务将接受“PHPSessionId”作为输入参数。

3.  直接访问 ASP.Net 应用程序以读取/写入 PHP 服务器上的 PHP 会话文件。=> 不确定授予会话文件权限是个好主意。

期待您的建议，根据您的经验，上述任何一点是否有意义或任何其他最适合的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:05:31.477

我建议查看[session-set-save-handler()](http://php.net/manual/en/function.session-set-save-handler.php)。

通过一些工作，但不涉及重写使用会话的 php 代码，您可以将所有会话数据推送到数据库中。然后，只需从 C# 端为此编写一个接口即可。最困难的部分是解析序列化数据，但可以肯定的是，它类似于[序列化（）值的剖析](http://www.php.net/manual/en/function.serialize.php#66147)

请注意，这可以通过更改单个中央 php 配置文件来完成，或者甚至可以通过使用`php_value auto_prepend_file`dbsessions.php`php_value auto_prepend_file dbsessions.php`文件中的会话保存处理程序代码来完成。

# javascript - 通过javascript更改href

> ID：15881045
> 
> 赞同：1
> 
> 时间：2013-04-08T13:57:47.677
> 
> 标签：javascript, html

我无法更改此脚本中的 href。但是 innerHTML 有效。怎么了？

```
 <script>
        FB.init({
            appId: 1234, 
            cookie: true,
            status: true,
            xfbml: true
        });
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                document.getElementById('test').href = 'http://www.example.com/auth/login';
                // document.getElementById('index-facebook-login-button').innerHTML = '<a class="index-facebook-login-button" href="http://www.example.com/auth/login" target="_self"></a>';

            } else if (response.status === 'not_authorized') {
                document.getElementById('test').href += 'http://www.example.com/connectfacebook';
                //this works!!!                    
                //document.getElementById('index-facebook-login-button').innerHTML = '<a class="index-facebook-login-button" href="http://www.example.com/connectfacebook" target="_self"></a>';

            } else {
                document.getElementById('test').href += 'http://www.example.com/connectfacebook';
                //this works!!!                    
               // document.getElementById('index-facebook-login-button').innerHTML = '<a class="index-facebook-login-button" href="http://www.example.com/connectfacebook" target="_self"></a>';
            }

        });
    </script>

<div id="index-facebook-login-text" onLoad="FB.getLoginStatus();">
some text here
    <div id="index-facebook-login-button" style="margin-left: 25px;">
            <a id="test" class="index-facebook-login-button" href="" target="_self"></a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T14:01:19.317

Javascript 的 DOM API 中 Element 对象的属性与 DOM 中实际元素的属性不同。这个对象只是 DOM 的一个接口。您想使用 setAttribute() 方法：

```
document.getElementById('test').setAttribute('href', 'http://example.com') 
```

h̶t̶t̶p̶:̶/̶/̶w̶w̶w̶.̶w̶3̶s̶c̶h̶o̶o̶l̶s̶.̶c̶o̶m̶/̶j̶s̶r̶e̶f̶/̶m̶e̶t̶_̶e̶l̶e̶m̶e̶n̶t̶_̶s̶e̶t̶a̶t̶t̶r̶i̶b̶u̶t̶e̶.̶a̶s̶p̶ ( [don't use W3school](http://w3fools.com/) ) [https://developer.mozilla.org/en/docs/DOM/element.setAttribute](https://developer.mozilla.org/en/docs/DOM/element.setAttribute)

# c# - 当部分位置已知时查找文件的路径

> ID：15881048
> 
> 赞同：0
> 
> 时间：2013-04-08T13:58:04.777
> 
> 标签：c#

我对 C# 相当陌生，当我知道部分路径时，可以使用一些帮助来确定如何找到文件的路径 - 我正在尝试查找由另一个应用程序安装的日志文件，该文件始终位于即使在自定义安装中也可以使用树。

例如

/Main/Bin/Logs/logfile.log

我需要将此路径加载到变量中，以便稍后在构建 zip 文件时引用它。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:10:10.047

如果您知道部分路径的文件名和根目录，则可以使用递归搜索该根路径下的所有文件夹[`Directory.EnumerateDirectories()`](http://msdn.microsoft.com/en-us/library/dd383462.aspx)

例如：

```
string root = "Some root directory name";
string filename = "Some filename";

foreach (var directory in Directory.EnumerateDirectories(root, "*", SearchOption.AllDirectories))
{
    string fullPathName = Path.Combine(directory, filename);

    if (File.Exists(fullPathName))
    {
        // Now you can return or store fullPathName 
    }
} 
```

# java - 表名“条件”的 MySQLSyntaxErrorException

> ID：15881049
> 
> 赞同：3
> 
> 时间：2013-04-08T13:58:05.320
> 
> 标签：java, mysql, sql

我有一张桌子叫`condition`. 我需要用那个名字保留它，但是当我执行命令时

```
Query qb = em.createQuery("SELECT c FROM Condition c ") 
```

我得到这个例外：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'condition' at line 1
at sun.reflect.GeneratedConstructorAccessor5.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2310)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:931)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:607) 
```

我知道 MySQL 有一个名为 condition 的命令，这就是为什么这个命令会抛出异常。

是否有一种表格可以将我的表命名为条件，这将允许我执行以下命令？

```
Query qb = em.createQuery("SELECT c FROM Condition c ") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:00:01.893

这是因为**condition**是[MySQL的](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)[*保留关键字*](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

试试这个：

```
Query qb = em.createQuery("SELECT c FROM `Condition` c ") 
```

检查*[架构对象名称](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)*以获取更多详细信息。

我希望它可以帮助你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T13:59:05.057

`CONDITION`是保留关键字。必须使用[反引号](https://en.wikipedia.org/wiki/Grave_accent#Use_in_programming)对其进行转义：

```
SELECT c FROM `Condition` c 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有机会更改标识符，请更改保留关键字列表中不存在的表名。这将避免你未来的头痛。

# android - 如何通过代码检测设备的触摸声音

> ID：15881051
> 
> 赞同：1
> 
> 时间：2013-04-08T13:58:07.010
> 
> 标签：android

其实我想知道，如何通过代码检测设备的触摸声音，我的意思是说我想检测设备中的触摸声音是启用还是禁用。

我谷歌这个，但无法找到正确的解决方案。如果有人知道，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:23:19.723

请尝试检查此字段：`Setting.system.SOUND_EFFECTS_ENABLED`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:29:37.370

检查Settings.System`SOUND_EFFECTS_ENABLED`中的[设置](http://developer.android.com/reference/android/provider/Settings.System.html#SOUND_EFFECTS_ENABLED)。

即是这样的：

```
boolean clickSoundsEnabled = Settings.System.getInt(getContentResolver(), Settings.System.SOUND_EFFECTS_ENABLED, 0) != 0; 
```

# python - 组合输出多处理python

> ID：15881055
> 
> 赞同：6
> 
> 时间：2013-04-08T13:58:17.253
> 
> 标签：python, multiprocessing

这个问题与[我之前提出](https://stackoverflow.com/questions/15704010/write-data-to-hdf-file-using-multiprocessing)的一个问题有关，这似乎是一个简单的问题，但我很难找到有关多处理主题的有用信息或教程。

我的问题是我想将生成的数据组合成一个大数组，然后将其存储在我的 hdf 文件中。

```
def Simulation(i, output):
    # make a simulation which outputs it resutlts in A. with shape 4000,3
    A = np.array([4000,3])

    output.put(A)

def handle_output(output):
    hdf = pt.openFile('simulation.h5',mode='w')
    hdf.createGroup('/','data')

    # Here the output should be joined somehow. 
    # I would like to get it in the shape [4000,3,10]

    output.get()
    hdf.createArray('/data','array',A)
    hdf.close()

if __name__ == '__main__':
    output = mp.Queue()    
    jobs = []
    proc = mp.Process(target=handle_output, args=(output, ))
    proc.start()
    for i in range(10):
        p = mp.Process(target=Simulation, args=(i, output))
        jobs.append(p)       
        p.start()
    for p in jobs:
        p.join()
    output.put(None)
    proc.join() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T14:15:13.453

你真正需要的是一个多处理池

只需执行以下操作：

```
def Simulation(i): 
    return output

p = mp.Pool(16)

result = p.map(Simulation,range(10))
result = np.array(result).reshape(...)
p.close()
p.join() 
```

# javascript - 插入对象（jquery）延迟？

> ID：15881061
> 
> 赞同：6
> 
> 时间：2013-04-08T13:58:33.570
> 
> 标签：javascript, jquery, html

我允许用户插入一个对象、一个图像，然后我在该对象上调用一个函数。什么在我看来是随机的，有时有效，有时无效，我想这与 DOM 尚未更新有关？

```
//add a new image
function add_image(img) {

var objCount = count_objects() + 1;
var objId = 'object_'+objCount;

var myNewImg = jQuery('<div/>', {
    id: objId,
    class: 'object_image invisible',
}).appendTo('#objectbox');

//sätt objektnamnet (användaren kan ändra senare)
$('#'+objId).attr('namn', objId)

//sätt låsta proportioner som standard
$('#'+objId).addClass('lockedAspectRatio')

//lägg till bilden i detta element
var imgInner = jQuery('<img/>', {
    id: objId,
    class: 'object_image_inner',
    src: img,
}).appendTo( '#'+objId );

window.objectCounter++;

prepare_editmode();

//reset the flag and the temporary image field now that image adding is complete
$('#imageGhost').val(null);

//fixa rätt storlek på bilden
setTimeout(function(){
    restoreSize(myNewImg,imgInner);
    $(myNewImg).removeClass('invisible');
}, 1500);

} 
```

因为如果我在一秒钟左右后用按钮手动触发最后一个功能，它总是可以工作的。

```
function restoreSize(myImg,imgInside) { 

if (imgInside == null) {
    console.log("nothing passed");
    var imgInside = $(myImg).find('img');
}
else {
    console.log("passed alright");
}

//remove fixed dimensions on containing div
$(myImg).css("height", 'auto' );
$(myImg).css("width", 'auto' );

//remove the 100% attribute on the image
$(imgInside).css("width", 'auto' );
$(imgInside).css("height", 'auto' );

//get calculated dimensions of div once img original size determines it
var newWidth = $(myImg).css("width");
var newHeight = $(myImg).css("height");

//...and set them firmly.
$(myImg).css("width", newWidth );
$(myImg).css("height", newHeight );

//restore the height/width 100% property to image in case of new resize
$(imgInside).css("width", '100%' );
$(imgInside).css("height", '100%' );    
} 
```

我尝试使用相同的结果超时零 - 有时图像已经加载，有时不是这样它随机工作，更大的图像（在浏览器中加载需要更长的时间）它当然更频繁地失败。现在我已经用几秒钟的超时绕过了它，但这不是一个很好的解决方案：-/也许我可以在 find('img') 上放置一个循环，不断检查图像并且只在找到后继续？但这有时可能会让我陷入无限循环问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:40:55.483

这对你有用吗？

```
 function add_image(img) {
        var objCount = count_objects() + 1;
        var objId = 'object_' + objCount;

        var myNewImg = jQuery('<div/>', {
           id: objId,
           class: 'object_image invisible'
        }).appendTo('#objectbox');

        $('#' + objId).attr('namn', objId)

        $('#' + objId).addClass('lockedAspectRatio')

        var imgInner = jQuery('<img/>', {
           id: objId,
           'class': 'object_image_inner',
           src: img
        }).load(function () {
           imgInner.appendTo('#' + objId)
           restoreSize(myNewImg, imgInner);
           $(myNewImg).removeClass('invisible');
        });

        window.objectCounter++;

        prepare_editmode();

        //reset the flag and the temporary image field now that image adding is complete
        $('#imageGhost').val(null);
     } 
```

顺便说一句，你有重复的 id`myNewImg`和`imgInner`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:06:28.023

而不是在追加后立即查询 DOM，只需存储对元素的引用，然后引用它。像：

```
var div = jQuery("<div/>", {
    id: objId,
    "class": "object_image"
}).appendTo("#objectbox");
restoreSize(div); 
```

另外，我可以发誓你不能设置一个对象的键，`class`因为它是一个保留的标识符，没有引号......所以使用`"class": "object_image"`. 此外，您在值之后有一个额外的逗号`class`......这是一个语法错误，至少在 IE 中是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:26:09.303

你可以使用jquery的[加载功能](http://api.jquery.com/load/)。这是您的代码示例：

[http://jsfiddle.net/UhUb7/](http://jsfiddle.net/UhUb7/)

```
 var images = [
    "http://upload.wikimedia.org/wikipedia/commons/4/4b/Apple_pie.jpg"
             ]

$(document).ready(function(){
    addImage(images[0]);
});

function addImage(url){
    var holder = $('<div class="object_image invisible">');
    var image = $('<img src="'+url+'" />');
    holder.append(image);
    $("#objectbox").append(holder);

    image.load(function(){
        holder.show('slow');

       // alert(image.css("width"));
    });  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:05:50.577

您是否尝试使用已有的参考资料？

```
var obj = jQuery('<div/>', {
    id: objId,
    class: 'object_image',
}).appendTo('#objectbox');

restoreSize(obj); 
```

也许它有效

**编辑**：您可以在浏览器渲染后设置超时 0 来附加您的功能...

```
var obj = jQuery('<div/>', {
        id: objId,
        class: 'object_image',
    }).appendTo('#objectbox');

    setTimeout(function(){ restoreSize(obj) }, 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T01:32:08.933

在图像加载之前，您无法访问图像的宽度和高度。这就是为什么 setTimeout 有时对你有用。使用 image.load() 回调函数触发图像加载后需要运行的代码。

```
 var imgInner = jQuery('<img/>', {           
       src: img
    }).load(function () {
       jQuery(this).appendTo('#' + objId)
       restoreSize(myNewImg, this);           
       //and so on
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T18:54:05.987

不用 jquery 也可以，只需使用 es5 变异观察者和加载事件

```
(function (global) {
    "use strict";

    if (!("MutationObserver" in global)) {
        global.MutationObserver = global.WebKitMutationObserver || global.MozMutationObserver;
    }

    function loadImage(e) {
        var img = e.target,
            width = img.clientWidth,
            height = img.clientHeight;

        img.removeEventListener('load', loadImage, false);
        alert("Image loaded: width: " + width + " height: " + height);
    }

    var observer = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
            switch (mutation.type) {
            case 'childList':
                Array.prototype.forEach.call(mutation.target.children, function (child) {
                    if (child.id === "smiley") {
                        child.addEventListener('load', loadImage, false);
                    }
                });

                break;
            default:
            }
        });
    });

    var container = document.getElementById("container");

    observer.observe(container, {
        childList: true,
        characterData: true,
        subtree: true
    });

    container.innerHTML = "<img id='smiley' src='http://1.bp.blogspot.com/-b1Z0R5ExM9s/TdWbeGQ-wdI/AAAAAAAAAPI/Ft52XTSxs0s/s1600/blue+sky+wallpaper+%25289%2529.jpg'/>";
}(window)); 
```

一个活生生的例子是在[jsfiddle](http://jsfiddle.net/Xotic750/gZysL/)

您可以在 mdn阅读有关[MutationObserver的更多信息](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)

# c - 为什么获取信号量而不是创建信号量？

> ID：15881064
> 
> 赞同：0
> 
> 时间：2013-04-08T13:58:34.900
> 
> 标签：c, linux, ipc, semaphore

我正在尝试掌握信号量的窍门。我编写了一个处理信号量的程序，其中我有这个函数来创建一个信号量：

```
int semcreate()
{
    semp = semget(ftok("./output.txt", 'a'),1,IPC_CREAT|IPC_EXCL|0664);

    if(semp == -1) /*Semaphore exists, fetch*/
    {
        printf("Semaphore fetched\n");
        semp = semget(ftok("./output.txt", 'a'), 1, 0);
    }
    else if(semp>=0) /*Semaphore created here*/
    {
        printf("Semaphore created\n");
        seminit(); /* Initialize semaphore*/
    }
    return 1;
} 
```

当我从两个单独的终端运行这个程序时，两个实例都打印`Semaphore fetched`. 这是正确的行为吗？为什么？

![在此处输入图像描述](https://i.stack.imgur.com/uqsqI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:32:15.060

信号量可能存在于系统上。使用命令`ipcs`列出系统中的所有信号量，并删除您的程序使用创建的信号量`ipcrm`。

# python - 安装我的第一个 WSGI

> ID：15881070
> 
> 赞同：1
> 
> 时间：2013-04-08T13:58:44.337
> 
> 标签：python, apache, flask, mod-wsgi, wsgi

我正在使用 apache modewsgi 安装烧瓶应用程序。

我已经解决了多个麻烦： - 环境变量 - virtualenv - 文件权限

但现在我真的被应用程序名称困住了。我不知道在 WSGI 文件的“from”指令中写什么。

这是我的 ~user/appname.com/appname.com.wsgi

```
activate_this = '/home/user/appname.com/venv/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this))
import sys
sys.path.insert(0, '/home/user/appname.com')
from appname.com import app as application 
```

这会导致以下日志。

```
[Mon Apr 08 15:50:26 2013] [error] [client 64.120.6.170] mod_wsgi (pid=6392): Exception occurred processing WSGI script '/home/user/appname.com/appname.com.wsgi'.
[Mon Apr 08 15:50:26 2013] [error] [client 64.120.6.170] Traceback (most recent call last):
[Mon Apr 08 15:50:26 2013] [error] [client 64.120.6.170]   File "/home/user/appname.com/appname.com.wsgi", line 5, in <module>
[Mon Apr 08 15:50:26 2013] [error] [client 64.120.6.170]     from appname.com import app as application
[Mon Apr 08 15:50:26 2013] [error] [client 64.120.6.170] ImportError: No module named appname.com 
```

但是，如果我删除 from`appname.com`我可以从 python 命令行运行 .wsgi 而不会出现错误，但在 apache 中，它会引发以下错误...

```
[Mon Apr 08 15:27:31 2013] [error] [client 64.120.6.170] mod_wsgi (pid=6274): Exception occurred processing WSGI script '/home/user/appname.com/appname.com.wsgi'.
[Mon Apr 08 15:27:31 2013] [error] [client 64.120.6.170] TypeError: 'module' object is not callable 
```

*更新：*

这是 ~user/appname.com/ 的结构

```
app/
    controller.py
    __init__.py
    models.py
    ...
    static/
        ...
    templates/
config.py
Procfile
README
requirements.txt
run.py
appname.com.wsgi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:51:53.877

由于您构建目录的方式，您需要添加：

*   /家/用户

到 sys.path。

要解释第二个错误是什么，需要查看“com.py”中的内容。

我建议将您的目录命名为“appname.com”是一个非常糟糕的主意。'.' 的存在 在目录名称中会混淆 Python。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T09:29:53.037

原来我需要写

```
from app import app as application 
```

# c# - 包含 Main 方法的类的含义

> ID：15881071
> 
> 赞同：0
> 
> 时间：2013-04-08T13:58:46.140
> 
> 标签：c#

如果`Main`方法是在静态或非静态类中定义的，或者该类是否是公共的，以及`Main`方法是否是公共的，有什么区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T13:59:49.807

不，唯一的条件是它不能是*泛型*类型。从 C# 4 规范的第 3.1 节：

> 应用程序入口点可能不在泛型类声明中。

我怀疑这也打算包括通用结构声明，因为它们会以同样的方式失败。（CLR 不知道要提供什么类型的参数。）

入口点类型可以是嵌套的、静态的、任何可访问性等。方法本身也可以是私有的，只要它具有适当的返回类型（`void`或`int`）和适当的参数（无或`string[]`） - 它必须是当然是静态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:59:32.897

不，这根本不重要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T14:01:16.813

根据[MSDN](http://msdn.microsoft.com/en-us/library/acy3edy3%28v=vs.110%29.aspx)：

> Main 在类或结构中声明。Main**必须**是静态的，并且不应该是公共的。(...) 封闭类或结构不需要是静态的。

不过，尚不完全清楚*为什么*它不应该公开。（在 Java 中，它**必须**是公共的）

类/结构的可访问性无关紧要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T14:04:23.160

CLR 实际上并不介意您的方法是私有的还是公共的。它不会通过使用普通的 C# 代码来调用它。[在这里](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/9184c55b-4629-4fbf-ad77-2e96eadc4d62)阅读更多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T14:14:24.817

.NET 的一个奇怪元素使得 Main 函数的安全性实际上非常重要。

在 .NET 语言中，您可以将可执行文件作为库链接！这意味着如果在 中`ConsoleApplication4`，我定义了完整的程序：

```
 namespace ConsoleApplication4
    {
        public class Program
        {
            public static int Foo(int a, int b)
            {
                return a + b;
            }
            public static void Main(string[] args)
            {

            }
        }
    } 
```

然后我实际上可以在另一个项目中引用 ConsoleApplication4，并执行以下操作：

```
 namespace UsedExecutableAsLibrary
    {
        class Program
        {
            static void Main(string[] args)
            {
                ConsoleApplication4.Program.Foo(10, 20);
                ConsoleApplication4.Program.Main(args);
            }
        }
    } 
```

但是，如果我将其设为`ConsoleApplication4.Program`私有，或将任何函数`Program`设为私有，则它们在编译后将不再可访问。您想要哪种行为完全取决于您，但通常您希望对其他人隐藏程序的有趣部分，因此您将 main 设为私有。

# php - 如何注释掉包含 PHP 的 HTML 代码？

> ID：15881074
> 
> 赞同：5
> 
> 时间：2013-04-06T20:38:47.850
> 
> 标签：php

我有一个包含 PHP 的 HTML 代码，我想把它全部注释掉。

```
<input type="hidden" name="returnurl" value="<?php if (!empty($link)) {echo $link;}?>"> 
```

如何在不单独注释的情况下同时注释掉 HTML 和 PHP？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T22:39:34.917

感谢罗斯帕特森，我发现我完全误解了这个问题。所以这是新的答案。我保留下面的旧答案，因为它可能对某些人仍然有用。

## 新答案

您的案例很简单，因为您的代码中既没有 PHP 字符串，也没有注释。这意味着注释这段特定的代码很简单：

```
<?php
/*
<input type="hidden" name="returnurl" value="<?php if (!empty($link)) {echo $link;}?>">
*/
?> 
```

问题是您迟早会发现自己处于这种情况下不起作用，因为注释代码本身包含注释。想象下面的一段代码：

```
<div>
  You're logged in.
  <?php
  /**
   * Says "hello" to the person.
   * @param string $name The name of the person.
   */
  function SayHello($name)
  {
    echo 'Hello, ' . $name;
  }

  SayHello($personName);
  ?>
</div> 
```

您不可能将其嵌入到单个注释中，因为它会在第 7 行中断。

相反，您可以做的是使用[NOWDOC 语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)将代码嵌入字符串中，并且永远不要使用此字符串：

```
<?php
$GUID2328f09280b94c22867d831a885b57eb = <<<'GUID2328f09280b94c22867d831a885b57eb'
<div>
  You're logged in.
  <?php
  /**
   * Says "hello" to the person.
   * @param string $name The name of the person.
   */
  function SayHello($name)
  {
    echo 'Hello, ' . $name;
  }

  SayHello($personName);
  ?>
</div>
GUID2328f09280b94c22867d831a885b57eb
?> 
```

几点说明：

*   *为什么我使用 NOWDOC 而不是简单的字符串？*

    一个简单的字符串将在第 5 行中断（在“Says "hello"”上）。单引号字符串将在第 2 行中断（在“You're”上）。

*   *为什么我使用NOWDOC 而不是HEREDOC？*

    因为我不想解析变量名。在这种上下文中解析变量会导致很难找到和调试的问题，因为范围发生了变化。

*   *这个可怕的 GUID2328 是什么……？*

    我使用[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)来确保，首先，字符串永远不会在实际结束之前终止，其次，字符串变量永远不会在以后的代码中合理使用。我放了一个 GUID 前缀，因为 HEREDOC/NOWDOC 要求名称以字母开头，而不是数字。

    如果您觉得它丑陋和愚蠢，请随意使用您想要的任何语法。

*   *它会影响 Web 应用程序的性能，对吧？*

    不要过早优化。初始化一个字符串可能会有性能成本，但要么它足够小而无需关心，要么甚至 PHP 解释器也足够聪明，可以优化代码并删除未使用的字符串（我非常怀疑）。

请注意，您不应该首先注释大量代码。如果您不需要该代码，只需将其删除即可。如果您认为以后可能需要它，让版本控制来处理它（您正在使用版本控制，是吗？）。

* * *

## 旧答案

你在为谁评论？

*   开发商？然后在 PHP 中进行注释。例子：

    ```
    <?php /** The value is hidden for the moment to be backwards compatible, but the field
            * would be removed in the near future, since having this field presents a
            * security risk. See bug report 1422, http://example.com/bugs/1422 */ ?>
    <input type="hidden" name="returnurl" value="<?php if (!empty($link)) {echo $link;}?>"> 
    ```

    请记住，HTML 注释是公开显示的。像上面的例子那样发表评论是给黑客的礼物。

*   用户？然后用 HTML 注释。例子：

    ```
    <!-- If `returnurl` is null or empty, the client would be redirected to the home page
         of the website. -->
    <input type="hidden" name="returnurl" value="<?php if (!empty($link)) {echo $link;}?>"> 
    ```

    在这里，目的是告诉用户一些有用的东西，例如屏幕废弃您的网站或做一些操作 HTML 的事情（我看到的唯一有效的例子是做一个真正的 API 对你来说太贵了，所以你授权并邀请用户直接解析 HTML 代码）。

请记住：

1.  每个人都可以看到 HTML 注释，

2.  HTML 评论被发送到客户端，增加了带宽的使用。注意：在大多数情况下，您不在乎；除非您在 Google 主页上工作，否则不会有几个额外的字节会影响您网站的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:47:32.707

在编写您的示例时，您不能在不单独评论的情况下将两者都注释掉。

如果您让 PHP 打印 html 以及值，您可以一次完成所有操作。如：

```
<?php 
     print '<input type="hidden" name="returnurl" value="';
     if (!empty($link)) {echo $link;}
     print '">';
?> 
```

当然还有更好的方法来写这个，但是现在你可以这样做：

```
<?php /*
     print '<input type="hidden" name="returnurl" value="';
     if (!empty($link)) {echo $link;}
     print '">';
     */
?> 
```

PHP 被处理成 HTML，然后发送到请求页面的客户端。然后该客户端处理 HTML。所以 PHP 注释只能被 PHP 处理器看到，而 HTML 注释不会被 PHP 处理器触及，但是浏览器（客户端）会识别出 HTML 注释并相应地跳过它们。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:43:41.743

如果你用很少或没有 HTML 注释 php 块，使用 php 注释，如果你用少量 PHP 注释大块 HTML，使用 HTML 注释。

将注释以最清晰和最具描述性的任何形式放置在任何地方，并尝试在整个编码过程中保持一致的风格。

您还应该根据您实际评论的内容进行区分。如果您要对 HTML 结构进行评论，如果您要评论 php 的详细信息，请使用 HTML，除非它位于 HTML 块的中间，否则请使用 php.ini。注释风格应该补充代码风格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T03:23:40.053

你有没有尝试过：

```
<?php /*
<input type="hidden" name="returnurl" value="<?php if (!empty($link)) {echo $link;}?>">
*/ ?> 
```

我不太喜欢 PHP，但我认为这会起作用，除非它已经有一个`*/`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-19T06:41:00.177

**nibra**是唯一理解这个问题并给出有价值答案的人。

```
<?php if(0) : ?>
...
<?php endif; ?> 
```

这是我发现的最简单的方法，可以注释掉包含 PHP 的 HTML 代码块，而无需进入该块并摆弄其内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T07:10:35.670

```
<!-- <input type="hidden" name="returnurl" value="<?php //if (!empty($link)) {echo $link;}?>"> --> 
```

就这样

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T12:33:01.177

如果您可以在评论之前进行一些重写（我猜您不想只是删除代码）。

1.  使代码全部为php，
2.  将任何多行代码转换为一堆单行注释
3.  最后使用php多行注释注释掉整个块

说你开始

```
<input type="hidden" name="returnurl" value="<?php 
/**
a multi line
comment here
*/
if (!empty($link)) {echo $link;}?>"> 
```

像这样转换

```
<?php 
echo :<input type="hidden" name="returnurl" value="";
//a multi line
//comment here
//
if (!empty($link)) {echo $link;}
echo ">";
?> 
```

最后全部注释掉

```
<?php 
/*
echo :<input type="hidden" name="returnurl" value="";
//a multi line
//comment here
//
if (!empty($link)) {echo $link;}
echo ">";*/
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T13:09:31.397

（暂时）停用代码的一种非常简单的方法是用

```
<?php if(0) : ?>
...
<?php endif; ?> 
```

这独立于块内的任何注释样式。`if(0)`违反编码风格`if (0)`是有意的，因为它使以后更容易找到这些位置。

# c - C语言结构

> ID：15881091
> 
> 赞同：0
> 
> 时间：2013-04-08T13:59:11.587
> 
> 标签：c

我正在学习C语言。任何人都可以帮助我理解以下结果：

```
int main()
{
  struct xx
  {
    int x;
    char name[];
  };
  struct xx *s;
  printf("%d",s->x);
  printf("%s",s->name);
   return 0;
} 
```

输出：- 分段错误

我写了另一个代码是：

```
struct Foo
{
  char *pName;
};

int main()
{
  struct Foo *obj = malloc(sizeof(struct Foo));
  strcpy(obj->pName,"Your Name");
  printf("%s", obj->pName);
  return 0;
} 
```

输出：分段错误（核心转储）；

为什么我会遇到分段错误？代码有什么问题？核心转储是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:03:32.857

1.  您不会在结构定义中分配值
2.  假设您在托管环境中工作（在具有操作系统的系统上运行），`main()`应该具有标准形式 ( `int main(void)`) 并返回一个`int`值
3.  在示例一中，您没有为指针分配任何内存`s`
4.  您在第二个示例中存在内存泄漏，您没有释放内存`obj`
5.  您没有在第二个示例中将任何内存分配给`pName`within`struct Foo`
6.  [核心转储](http://whatis.techtarget.com/definition/core-dump)意味着出现了非常严重的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:04:02.297

为该结构声明了一个指针，但该指针从未被初始化，也从未创建任何结构。 `s`指向一些随机内存空间，您尝试从中读取。

在第二种情况下，您有一个`pName`从未分配过内存的指针。它还指向一个随机内存空间。您正在从字符串文字中复制字符串并写入随机内存位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:07:48.887

在示例 1 中，您声明了一个指针，但尚未对其进行初始化。因此指针指向一个未知的位置。

在示例 2 中，出于同样的原因，obj->pname 指向内存的未知部分（它没有被初始化），因此试图在 strcpy 中访问它会使程序崩溃。

你应该做的：你应该为指针分配一些内存，使它们指向属于你的内存，而不是内存的一些随机（非法？）部分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T11:45:50.853

```
 #include <stdio.h> 
   #include <stdlib.h> 
   int main()
   {
     struct xx
     {
       int x;
       char name[25];  /* mention size of array */
     };

     struct xx *s;
     s=(struct xx *)malloc(sizeof(struct xx));   /* allocate the size for pointer variable */
     printf("Enter the value\n");
     scanf("%d",&s->x);           /*get the value */
     printf("Enter the name\n");
     scanf("%s",s->name);         
     printf("%d\n",s->x);          /*get the value */
     printf("%s\n",s->name);
     return 0;
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T06:31:39.673

您已声明指针变量但尚未为其分配内存要在之后添加`strict xx *S;`

```
S=(struct xx*) malloc(sizeof(strict xx)); 
```

并声明第一个大小为`char name[30]`;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-07T14:37:17.977

首先，您需要分配变量 s 的大小，因为您的编译器不了解它应该分配给变量的内存大小。这就是为什么您需要将内存分配为： S=(struct xx*)malloc (sizeof(struct xx));

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-22T16:53:00.527

很高兴看到有人研究 C 语言...

好的，...在您的第一个代码中，您没有为**ss**变量分配内存并且您正在访问它的值，因此它会生成分段错误..

其次， **pName**是一个字符指针......所以你不能在 strcpy() 函数中使用它......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-07T03:26:16.987

struct 中的指针在使用时未初始化（称为野指针）。即使指针已经初始化，它也应该指向一个有效的内存区域。

学习C语言时，内存操作是重中之重。

# ios - 如何在通话时禁用 UILocalNotification 声音

> ID：15881093
> 
> 赞同：1
> 
> 时间：2013-04-08T13:59:15.667
> 
> 标签：ios, notifications

我想在通话期间禁用 UILocalNotification 声音。如何告诉可可？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:02:12.617

你不能。`UILocalNotification`不提供任何方法来做到这一点。

用户必须在设置应用程序中自行更改设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T09:31:56.370

你可以！从 iOS 4.0 开始，您可以`CTCallCenter`使用`CoreTelephony.framework`. 您可以检查用户是否有这样的电话：

```
#import <CoreTelephony/CTCallCenter.h> 
```

...

```
CTCallCenter * callCenter = [[CTCallCenter alloc] init];
if ([callCenter currentCalls] == nil) {
    // Play sound
} else {
    // Maybe the same sound but not as loud as the original
} 
```

`currentCalls`是一个`NSSet`与`CTCall`对象。

# javascript - 如何检索在 html javascript 中动态生成的值

> ID：15881096
> 
> 赞同：0
> 
> 时间：2013-04-08T13:59:22.140
> 
> 标签：javascript, database, listbox

我有一个使用 javascript 动态生成的具有 2 列的表。第一列是从列表框中选择的项目的列表，第二列是用于输入数量的空白文本框。**现在我想检索要插入数据库的表的第一列的值。**请帮助我如何做到这一点。到目前为止，我已经做了这样的事情。我尝试使用隐藏文本框或具有隐藏文本框的标签。但无法得到结果。（chem_sel2 是我的列表框的名称）

```
function fun1(){

var my_chem_qty_div = document.getElementById("chem_qty");
var table = document.createElement('TABLE');
table.id='sel_chem_table';
table.border='1';
table.align='center';
table.style.width='100%';
var tableBody = document.createElement('TBODY');
table.appendChild(tableBody);

var chem_sel2_combo =document.getElementById("chem_sel2");

for(var k=0;k<chem_sel2_combo.options.length;k++)
        {
         var tr = document.createElement('TR');
         tableBody.appendChild(tr);

        /*  var td = document.createElement('TD');
        td.width='30';
        td.appendChild(document.createTextNode(chem_sel2_combo.options[k].value));
        tr.appendChild(td);*/

        var td1 = document.createElement('TD');
        var lbl= document.createElement('label');
        var txt=document.createElement('input');
        txt.setAttribute('id','selctd_chem');
        txt.setAttribute('value',chem_sel2_combo.options[k].value);
       // txt.setAttribute('type','hidden');
        lbl.setAttribute('id', 'lbl_txt');
        lbl.setAttribute('value', chem_sel2_combo.options[k].value);
        td1.width='40';

        td1.appendChild(txt);
        td1.appendChild(lbl);
        //td1.setAttribute('type', 'hidden');
        tr.appendChild(td1);

        var td2 = document.createElement('TD');
        var txt= document.createElement('input');
        txt.setAttribute('id',"qty_text");
        txt.setAttribute('type','text');
        td2.width='30';
        td2.appendChild(txt);
        tr.appendChild(td2);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:14:24.477

移动`tableBody.appendChild(tr);`到循环的末尾。在向 tr 添加任何内容之前，您将附加`tr`到表中。

```
for (...) {
    var tr = ...;
    tr.append(...);
    tableBody.append(tr);
} 
```

代替：

```
for (...) {
    var tr = ...;
    tableBody.append(tr);
    tr.append(...);
} 
```

# function - jQuery 函数在 Safari 上不起作用

> ID：15881098
> 
> 赞同：3
> 
> 时间：2013-04-08T13:59:22.550
> 
> 标签：function, sorting, safari

我有一个按价格 ASC 和 DESC 对 div 进行排序的功能。但它**不适用于 Safari**。在 Firefox/Chrome 上没问题。

什么原因？

代码（和[小提琴](http://jsfiddle.net/gion_13/jKJc3/)版本）：

```
 function sortByPrice(a,b){
      return $(a).find('.cicerone_price').text() > $(b).find('.cicerone_price').text();
  }

  function sortByPriceDesc(a,b){
     return $(a).find('.cicerone_price').text() < $(b).find('.cicerone_price').text();
  }

  function reorderEl(el){
      var container = $('#tabs');
      container.html('');
      el.each(function(){
          $(this).appendTo(container);
      });
  }
  $('#filter_price').change(function(){
      if ($("#filter_price option:selected").val()=='desc'){ 
          reorderEl($('.global_product').sort(sortByPriceDesc));
         } else if ($("#filter_price option:selected").val()=='asc'){ 
            reorderEl($('.global_product').sort(sortByPrice));
            }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:54:27.827

问题已解决，对于解决方案，我添加 parseFloat 为小数

解决方案在这里：[小提琴校正](http://jsfiddle.net/3kcwW/8/)

```
function sortByPrice(a,b){
    return parseFloat($(a).find('.productPriceForSorting').text()) > parseFloat($(b).find('.productPriceForSorting').text()) ? 1 : -1;
} 
```

# paypal - aMember paypal ipn 不会创建自动首付款

> ID：15881102
> 
> 赞同：0
> 
> 时间：2013-04-08T13:59:27.620
> 
> 标签：paypal, paypal-ipn, recurring-billing, amember

我正在使用 aMember 进行用户注册和付款。一切正常，即使是贝宝付款等。

我正在测试的产品第一个月的费用为 0 美元，然后每月重复收费 100 美元。

现在，ipn 回来了，我收到了发票 nr，但我的会员没有创建第一个产品供用户访问，我必须手动创建它吗？

我检查了日志，它很干净。

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:55:14.867

所以你没有看到第一笔付款？如果您正在使用订阅按钮，并且正在使用 IPN 在您的系统中进行设置，您应该会看到创建的配置文件的 ipn。在该月过去之前，您不会看到第一次付款的 IPN。您希望脚本在创建 IPN POST 的配置文件上创建它。

# actionscript-3 - 如何将 FXG 文件的名称转换为 SpriteVisualElement 类？

> ID：15881103
> 
> 赞同：0
> 
> 时间：2013-04-08T13:59:31.600
> 
> 标签：actionscript-3, apache-flex, actionscript

我有star.fxg 文件，我想从字符串“star”创建SpriteVisualElement 类。我正在尝试这样：

```
var classRef:Class = getDefinitionByName("star") as Class;
myStar = new ClassFactory(classRef).newInstance() as SpriteVisualElement; 
```

但是 Flex 说*没有定义变星*。

但如果我尝试：

```
myStar = new star() as SpriteVisualElement; 
```

一切正常。

如何从 fxg 的字符串名称中获取 SpriteVisualElement 的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:17:01.553

答案是使用完全限定的类名。而不是`star`使用`com.myPackage.mySubPackage.star`

# git - 推送后如何使裸git存储库组可写？

> ID：15881104
> 
> 赞同：0
> 
> 时间：2013-04-08T13:59:32.200
> 
> 标签：git

我在通过 SSH 访问的服务器上有一个裸 git 存储库。我可以推拉就好了。但是，我推送的文件是在具有访问权限的服务器上创建的`644`，这意味着只有我可以更改文件。只要我是唯一的贡献者，这很好，但是我可以做些什么来允许多个用户使用存储库？我在服务器上没有 root 权限，所以我无法更改任何全局选项。

在推入存储库后，我正在考虑一些挂钩脚本来更改文件权限。

这是解决我的问题的首选方法吗？我应该如何前进？还有其他/更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:24:37.893

您必须将文件夹更改为 775，将文件更改为 664。之后，您需要配置`core.sharedRepository`.

[https://www.kernel.org/pub/software/scm/git/docs/git-config.html](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)

> 当 group （或 true）时，存储库可在组中的多个用户之间共享（确保所有文件和对象都是组可写的）。当所有人（或世界或所有人）时，所有用户都可以读取存储库，此外还可以组共享。当 umask（或 false）时，git 将使用 umask(2) 报告的权限。当 0xxx（其中 0xxx 是八进制数）时，存储库中的文件将具有此模式值。0xxx 将覆盖用户的 umask 值（而其他选项只会覆盖用户的 umask 值的请求部分）。示例：0660 将使所有者和组可以读/写 repo，但其他人无法访问（相当于组，除非 umask 是例如 0022）。0640 是组可读但不可组写的存储库。请参阅 git-init(1)。默认为假。

在我的团队存储库中，我将其设置为`group`. 所以，我的`config`样子是这样的：

```
sharedRepository = group 
```

你在服务器上没有权限？除非您计划与多个贡献者共享您的一个 SSH 帐户，否则这需要解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:14:00.667

服务器用户只是 repo 文件的所有者。贡献者是可以访问服务器的其他用户，但不一定是真正的系统用户。

假设您有用户`git`on `yourserver.com`，并且您的 repo 在`/home/git/yourproject.git`. 在本例中，我们将使用 authorized_keys 方法来验证您的用户：您需要将贡献者的 SSH 公钥添加到用户 git 的 authorized_keys 文件中（例如 inside `/home/git/.ssh/authorized_keys`）。

此时，贡献者可以轻松地克隆项目并将更改推送回来：

```
$ git clone git@yourserver.com:/home/git/yourproject.git 
```

贡献者第一次必须配置他们的身份：

```
$ git config --global user.email "bob@example.com" 
```

使用这种方法，您可以为少数开发人员快速启动并运行一个读/写 Git 服务器，而无需担心文件权限，而是跟踪单个更改；我总是使用这个设置来配置一个 git 存储库。

# javascript - 使用 Javascript 创建日志文本文件

> ID：15881108
> 
> 赞同：8
> 
> 时间：2013-04-08T13:59:43.387
> 
> 标签：javascript, html, logging, text, text-files

我一直在尝试这样做，但没有运气，所以我决定问一下。

我有一个包含一堆不同按钮的页面，每个按钮都有自己的参数。

我想创建一个 .txt 文件作为日志，然后每次有人单击其中一个按钮时，都会在日志中写入参数和单击的按钮。每个按钮都有自己的功能，所以我假设我只是创建函数，然后使用函数的参数将它添加到每个函数的开头。

因此，我猜我需要使用 onLoad() 创建 txt 文件，然后创建一个函数以在每次单击按钮时写入 .txt 文件。

我试过了：

```
function WriteToFile(passForm) {

    set fso = CreateObject("Scripting.FileSystemObject");  
    set s = fso.CreateTextFile("logs\log1.txt", True);
    s.writeline("HI");
    s.writeline("Bye");
    s.writeline("-----------------------------");
    s.Close();
 } 
```

但没有运气，我收到一条错误消息，说`set fso`在行首预期对象。

关于如何解决这个问题或以更好的方式实施它的任何想法？

**更新** 所以我只想创建一个日志文件并在每次用户单击按钮时填充数据，这样我就知道谁在单击什么。我所有的文件都在服务器中，所以我只想在那里创建文本文件并用信息填写它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:55:58.627

Say You have following HTML MARKUP with Different Buttons

```
 <input type='button' name='button1' class='capture' />
 <input type='button' name='button2' class='capture' />
 <input type='button' name='button3' class='capture' /> 
```

And when a button is clicked you get name of button and send it to server to write on logfile with following ajax call. Assuming you have PHP on server side

```
 $(".capture").click(function(){

    var buttnName=$(this).attr('name');
    $.ajax({
      type:"POST",
      data:"ClickedButton="+buttonName, 
      url: "server.php",
      success: function(data){

      alert('Written in Log File');
    }
    }); // END Ajax 
    }); 
```

in `server.php` following code will be used to write on log file

```
 $myFile = "logfile.txt"; \\Considering the text file in same directory where server.php is
  $fh = fopen($myFile, 'w') or die("can't open file");
  $stringData =$_POST['ClickedButton'] ;
  fwrite($fh, $stringData);
  fclose($fh); 
```

is not simple? **Note: You Need Jquery for this purpose**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:08:07.557

JavaScript，没有浏览器（默认情况下），可以访问文件系统中的任何地方。连一点自己的空间都没有。您可能想查看 HTML5 存储[http://www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)。

如果用户使用日志报告请求`file.txt`，您可以生成下载调用并使用存储对象中存储的内容填充返回的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:04:56.790

你想这样做吗？

[http://www.yaldex.com/wjscript/jsfilecreateTextFile.htm](http://www.yaldex.com/wjscript/jsfilecreateTextFile.htm)

如果是这样，则使用活动 x 对象。那将是一件事情。

# c - 以下哪一种是设置无符号整数最大值的更便携的方法？

> ID：15881120
> 
> 赞同：4
> 
> 时间：2013-04-08T14:00:01.603
> 
> 标签：c, casting, c99

在符合 C99 的 C 中，假设没有定义预处理器宏，这是设置无符号整数最大值的更可移植的方式：

```
unsigned x = -1; 
```

或者

```
unsigned y = ~0; 
```

我记得几年前我遇到了一个线程，它声称将**unsigned int**设置`-1`为更便携，因为在晦涩的系统上`~0`有某种*陷阱表示；*不过，我不再确定这是真的。

我知道将负值设置为无符号变量的行为在 C99 标准中得到了很好的定义（即模值等），但是 的反转`0`呢？

此外，如果两个操作都具有同等的可移植性，并且假设没有编译器优化，那么在时钟周期方面哪个操作会更有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T14:03:03.147

```
#include <limits.h>

unsigned x = UINT_MAX; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T14:08:01.960

`unsigned x = UINT_MAX;`工作（包括后`<limits.h>`），根据定义`UINT_MAX`。

`unsigned x = -1;`根据操作如何与无符号整数一起工作的定义来工作（`UINT_MAX+1`添加或减去以使结果可表示，因此`-1`变为`-1+UINT_MAX+1`which equals `UINT_MAX`）。

`unsigned x = ~0;`不保证有效，因为`~`被定义为对整数位的操作，而不是对数值的操作，但 C 标准并未完全指定有符号整数的位。

`unsigned x = ~0u;`有效，因为`0u`它是一个无符号整数，并且它的值位完全由 C 标准指定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T14:07:50.783

首先，

```
unsigned x = -1; 
```

更便携。保证在每个符合要求的实现上设置`x`to的值。`UINT_MAX`

第二，

```
unsigned x = ~0; 
```

在 a 上进行按位补码`int`，因此不能保证 is 的值`~0`-`-1`它不在一个的补码或符号和大小机器上，它甚至可能是一个陷阱表示。

替代方案

```
unsigned x = ~0u; 
```

它采用`unsigned`零的补码，也是完全可移植的。

# java - 如何在java中舍入一毫秒？

> ID：15881121
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:00:10.460
> 
> 标签：java

**Java 代码**

```
public static long round(long millis , TimeUnit unit){
    Calendar calendar = Calendar.getInstance();
    switch(unit){
        case DAYS:
            calendar.set(Calendar.MILLISECOND, 0);
            calendar.set(Calendar.SECOND,0);
            calendar.set(Calendar.MINUTE, 0);
            calendar.set(Calendar.HOUR, 0);
            return calendar.getTimeInMillis();
        case HOURS:
            calendar.set(Calendar.MILLISECOND, 0);
            calendar.set(Calendar.SECOND, 0);
            calendar.set(Calendar.MINUTE, 0);
            return calendar.getTimeInMillis();
        case MINUTES:
            calendar.set(Calendar.MILLISECOND , 0);
            calendar.set(Calendar.SECOND, 0);
            return calendar.getTimeInMillis();
        case SECONDS:
            calendar.set(Calendar.MILLISECOND, 0);
            return calendar.getTimeInMillis();
        case MILLISECONDS:
        default:
            calendar.set(Calendar.MILLISECOND, 0);
            return  calendar.getTimeInMillis();
    }
} 
```

目前，我正在使用此代码对毫秒值进行舍入。在这种方法中，代码的冗余是一个大问题。

有没有更好的解决方案或数学方程来计算这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:02:06.493

您可以通过像这样利用*下降来消除所有重复的行：*

```
public static long round(long millis , TimeUnit unit){
    Calendar calendar = Calendar.getInstance();
    switch(unit){
        case DAYS:
            calendar.set(Calendar.HOUR, 0);
        case HOURS:
            calendar.set(Calendar.MINUTE, 0);
        case MINUTES:
            calendar.set(Calendar.SECOND, 0);
        case SECONDS:
        case MILLISECONDS:
        default:
            calendar.set(Calendar.MILLISECOND, 0);
    }
    return calendar.getTimeInMillis();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:02:40.453

```
public static long round(long millis , TimeUnit unit){
    Calendar calendar = Calendar.getInstance();
    switch(unit){
        case DAYS:
            calendar.set(Calendar.HOUR, 0);
        case HOURS:
            calendar.set(Calendar.MINUTE, 0);
        case MINUTES:
            calendar.set(Calendar.SECOND, 0);
        default:
            calendar.set(Calendar.MILLISECOND, 0);
    }
    return calendar.getTimeInMillis();
} 
```

注意里面没有`break`or`return`语句`switch`。这会导致`switch`块中的语句*落入*下一个`case`标签。

本[教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)中对此进行了介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:02:43.540

还`calender.set(Calendar.MILLISECOND, 0)`不够吗？

另一种方法是：

```
return date.getTime() / 1000 * 1000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:04:34.193

您可以在 switch 语句中利用“fallthrough”：

```
public static long round(long millis , TimeUnit unit){
    Calendar calendar = Calendar.getInstance();
    switch(unit){
        case DAYS:
            calendar.set(Calendar.HOUR, 0);
        case HOURS:
            calendar.set(Calendar.MINUTE, 0);
        case MINUTES:
            calendar.set(Calendar.SECOND, 0);
        case SECONDS:
            calendar.set(Calendar.MILLISECOND, 0);
    }
    return  calendar.getTimeInMillis();

} 
```

# java - WS 安全错误：尝试通过 Apache CXF 访问 Web 服务时出现 181001

> ID：15881128
> 
> 赞同：0
> 
> 时间：2013-04-08T14:00:20.423
> 
> 标签：java, web-services, cxf

我已经使用 wsdl2java 成功生成了 Java 类。现在我正在尝试构建一个用于访问 Web 服务的客户端。为此，我正在使用 Apache CXF。在尝试连接时，我收到以下错误：

```
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: WS Security Error : 181001
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:155)
    at $Proxy36.getCustomerOp(Unknown Source)
    at com.ievgen.webservices.TestClient4.main(TestClient4.java:87)
Caused by: org.apache.cxf.binding.soap.SoapFault: WS Security Error : 181001
    at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.unmarshalFault(Soap11FaultInInterceptor.java:75)
    at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:46)
    at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:35)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:114)
    at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:69)
    at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:34)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:800)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1592)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1490)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1309)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:463)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:366)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:319)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:133)
    ... 2 more 
```

根据我在网上找到的信息，181001 错误意味着缺少所需的身份验证块。但是，我已经按照文档中的说明配置了用户名和密码：http: [//cxf.apache.org/docs/ws-secureconversation.html](http://cxf.apache.org/docs/ws-secureconversation.html)

这是我的代码：

```
package com.ievgen.webservices;

import java.io.File;

import javax.net.ssl.*;
import javax.xml.ws.BindingProvider;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.transport.http.HTTPConduit;

import info.app.catalogservices.schemas.customerquery_1.CustomerQueryType;
import info.app.catalogservices.services.csscatalogservicesinterface_1_0.CustomerError;
import info.app.catalogservices.services.csscatalogservicesinterface_1_0.IntfCatalogServicesService;
import info.app.catalogservices.services.csscatalogservicesinterface_1_0.PortType;

public class TestClient4 {

    /**
     * @param args
     * @throws MalformedURLException
     */
    public static void main(String[] args) throws MalformedURLException {
        // Create a trust manager that does not validate certificate chains
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }

            public void checkClientTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }

            public void checkServerTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }
        } };

        // TODO Auto-generated method stub
        File wsdlFile = new File("WebContent/CatalogServices-1.1.0.wsdl");
        URL wsdlUrl = null;
        if (wsdlFile.exists()) {
            wsdlUrl = wsdlFile.toURL();
        } else {
            System.out.println("File doesn't exist");
        }

        System.out.println("WSDL url: " + wsdlUrl);
        IntfCatalogServicesService service = new IntfCatalogServicesService(
                wsdlUrl);
        PortType portType = service.getPortTypeEndpoint();

        // This will configure the http conduit dynamically
        Client client = ClientProxy.getClient(portType);

        client.getRequestContext().put("ws-security.username", "username");
        client.getRequestContext().put("ws-security.password", "password");

        HTTPConduit http = (HTTPConduit) client.getConduit();

        TLSClientParameters tlsParams = new TLSClientParameters();
        // set trust manager which trusts to all certificates
        tlsParams.setTrustManagers(trustAllCerts);
        // The certificate provides another CN that it really is, so disable
        // CNcheck
        tlsParams.setDisableCNCheck(true);

        http.setTlsClientParameters(tlsParams);

        String resp;
        CustomerQueryType customerQuery = new CustomerQueryType();
        customerQuery.setCustomer("0056712120");
        java.util.Map<String,Object> requestContext = ((BindingProvider) portType)
                .getRequestContext();
            //I set username/password twice because I am not sure where to do it better
            //I have found different directions in different sources
        requestContext.put("ws-security.username", "username");
        requestContext.put("ws-security.password", "password");
        requestContext
                .put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,
                        "https://host:port/Services/intfCatalogServices-service.serviceagent/portTypeEndpoint");

        try {
            resp = portType.getCustomerOp(customerQuery).toString();
            System.out.println(resp);
        } catch (CustomerError e) {
            e.printStackTrace();
        }
    }

} 
```

**注意：我可以使用 SOAP UI 访问 Web 服务。**

你能告诉我我在这里错过了什么吗？

编辑：这里：[http](http://cxf.apache.org/docs/ws-secureconversation.html) ://cxf.apache.org/docs/ws-secureconversation.html据说有必要设置“ws-security.username.sct:。另一方面，这里：[http:// cxf.apache.org/docs/ws-securitypolicy.html](http://cxf.apache.org/docs/ws-securitypolicy.html)据说设置“ws-security.username”。我尝试了这两种变体，但它们都不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:14:03.503

您正在使用的 WSDL 中是否有描述安全要求的 WS-Policy 片段？如果没有，则不会应用 WS-SecurityPolicy 属性，因为有效的策略没有提及与安全相关的任何内容。

如果没有任何与安全相关的策略，则需要手动配置 WSS4J 拦截器。见[http://cxf.apache.org/docs/ws-security.html](http://cxf.apache.org/docs/ws-security.html)

# objective-c - 在一个类上填充一个数组

> ID：15881129
> 
> 赞同：0
> 
> 时间：2013-04-08T14:00:20.247
> 
> 标签：objective-c, ios6

我有一个小（也许）非常简单的问题，让我的大脑感到撕裂。

我创建了一个类“ArrayClass”：

```
//  ArrayClass.m

#import "ArrayClass.h"

@implementation ArrayClass{

    NSMutableArray *NameList;

}

@end 
```

现在我想在我的主文件中的这个类的一个对象上填充这个数组。

我以为这是对的，但不幸的是没有结果。

```
//Main File:

//Create an object

ArrayClass *object_bla = [[ArrayClass alloc] init]; 
```

那么如何用“object_bla”对象填充我的数组呢？

我无法访问此数组。使用正常的例如 int 变量我没有问题。

* * *

其实我昨天还不是很远。所以这就是我想要做的。

我需要一个类，在其中创建一个数组。这是因为我想稍后用一些用户输入填充这个数组。

所以我得到了我的课程：

类.h

```
#import <Foundation/Foundation.h>

@interface AClass : NSObject

//Array deklarieren
@property NSMutableArray *WordList;

@end 
```

在主文件中没有我想创建这个类的一个对象，以访问 *WordList 数组。后来班级得到更多的东西，所以现在是一个试用期。我是一名 C++ 开发人员，对 Objective-c 非常陌生，所以请原谅我的菜鸟问题。

这就是我到目前为止所做的：

```
#import <Foundation/Foundation.h>
#import "AClass.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

    //create object
    AClass *blabla = [[AClass alloc] init];

    //fill array
    [blabla.WordList addObject:@"GünterKörper"];

    //output
    for (int i = 0; i<[blabla.WordList count]; i++){
        NSLog(@"Objekte: %@", [blabla.WordList objectAtIndex:i]);
    }

    }
    return 0;
} 
```

但这没有给我任何东西。数组为空。我在这里缺少什么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:03:12.503

您需要创建一个`property`for `NameList`。

```
@property (strong) NSMutableArray *NameList; 
```

然后在你的`main`文件中

在 main 中创建一个`tempArray`，用一些数组填充它，然后使用：

```
NSMutableArray *tempArray=[NSMutableArray arrayWithArray:@[@"A",@"B",@"C"]];
[object_bla setNameList:tempArray; 
```

如果要一次添加一个对象：

```
[object_bla.NameList addObject:@"new object"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:17:35.263

您需要先实例化数组，然后才能向其中添加对象。这可以通过多种方式完成：

1 - 在您的自定义类的 init 方法中：

```
@implementation AClass 

- (id)init {
    self = [super init];
    if (self) {
        _WordList = [[NSMutableArray alloc] init];
    }
    return self
}

// Rest of class implementation...

@end 
```

2 - 通过在自定义类中实现自己的属性获取器来使用延迟加载。

```
@implementation AClass 

- (NSMutableArray *)WordList {
    if (_WordList == nil) {
        _WordList = [[NSMutableArray alloc] init];
    }
    return _WordList;
}

// Rest of class implementation...

@end 
```

第二个可能是首选，因为它仅在您实际引用对象时分配内存。

# python - 为什么 Django 不为来自其他应用程序的模型生成外键引用？

> ID：15881141
> 
> 赞同：2
> 
> 时间：2013-04-08T14:00:59.467
> 
> 标签：python, sql, django

我有一个名为 的 Django 应用程序`tickets`，具有以下模型：

```
from django.db import models

class Project(models.Model):
    name = models.CharField(max_length=200)

class Ticket(models.Model):
    summary = models.CharField(max_length=500)
    project = models.ForeignKey(Project)
    user = models.ForeignKey('auth.User') 
```

有一个外键`auth.User`。但是，当我使用 Django 生成 SQL 时，它没有显示`REFERENCES`for `user_id`。为什么不？

```
$ python manage.py sql tickets
BEGIN;
CREATE TABLE "tickets_project" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(200) NOT NULL
)
;
CREATE TABLE "tickets_ticket" (
    "id" integer NOT NULL PRIMARY KEY,
    "summary" varchar(500) NOT NULL,
    "project_id" integer NOT NULL REFERENCES "tickets_project" ("id"),
    "user_id" integer NOT NULL -- no references here!
)
;

COMMIT; 
```

这不会在我调用`python manage.py sql auth tickets`任何一个时发生，也不会在应用程序位于同一个项目中时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:06:17.147

它不能在创建时执行此操作，因为如果您只是打印票证应用程序的 SQL，它不能保证已创建身份验证表。因此，它在最后单独执行它们 - 但`sql`不打印索引，`sqlindexes`确实如此。

# hibernate - 如何在 setParameter 休眠查询中设置枚举值

> ID：15881143
> 
> 赞同：3
> 
> 时间：2013-04-08T14:01:05.310
> 
> 标签：hibernate

如何在 setParameter 休眠查询中设置枚举值。

```
query.setParameter( "keyValue", Enum.valueOf(, KeywordType.specific)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:06:45.753

假设枚举是`KeywordType`并且您想传递`specific`此枚举的实例：

```
query.setParameter("keyValue", KeywordType.specific); 
```

就像您在其他任何地方使用枚举一样。

# c++ - 具有可变数量的模板参数的简单方法

> ID：15881145
> 
> 赞同：0
> 
> 时间：2013-04-08T14:01:06.803
> 
> 标签：c++, templates

我想用可变数量的模板参数构建一个类，有什么简单的方法来获得它吗？

```
template<class T0, class T1, ...>
class MyClass; 
```

目前我正在使用元组来做到这一点。

```
template<class Tuple>
class MyClass; 
```

并像使用它一样

```
MyClass<std::tuple<T0, T1, T2>> a; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:02:40.933

[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)是 C++11 标准的一部分。符合标准的编译器（GCC、Visual Studio 2012 的[最新编译器版本](http://www.microsoft.com/en-us/download/details.aspx?id=35515)等）将支持这一点。

# caching - 在 Zend Optimizer+ 可以与 apc 或 xcache 共存之前，我可以在生产中使用 FilesystemCache 进行 Doctrine2 缓存吗？

> ID：15881149
> 
> 赞同：1
> 
> 时间：2013-04-08T14:01:24.077
> 
> 标签：caching, doctrine-orm, zend-optimizer

Doctrine2 doc 推荐 Apc/Memcache/Xcache 用于元数据缓存和查询缓存[[reference]](http://docs.doctrine-project.org/en/2.1/reference/configuration.html#metadata-cache-recommended)。但是，我们不能使用 Apc 或 Xcache，因为我们使用的是 zend optimizerPlus。他们暂时不合作。我也不想使用 Memcache，因为它涉及网络时间（我们有多个专用的 Memcache 服务器）。

你们中有人有使用 \Doctrine\Common\Cache\FilesytemCache 进行教义的**生产经验吗？**由于 linux 操作系统会将这些缓存文件缓存在内存中，我觉得在我们可以使用 apc/xcache 和 zend 优化器+（希望在 php 5.5 中）之前已经足够了。但任何建议将不胜感激。

# asp.net - 为什么无法从 ajax、jquery mobile 访问 .net Web 服务方法？

> ID：15881151
> 
> 赞同：2
> 
> 时间：2013-04-08T14:01:32.483
> 
> 标签：asp.net, ajax, web-services, cordova, jquery-mobile

问题原因是什么？？？我尝试了很多不同的方法，但无法访问 Web 服务的“hello world”方法。我找不到问题的原因。我的结构如下所示。

网络服务 ：

```
 [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        } 
```

JavaScript：

```
<script src="js/jquery.js"                  type="text/javascript" ></script>
  <script src="js/jquery-1.9.0.min.js"        type="json/javascript" ></script>
  <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript" ></script>

  <script type="text/javascript">
    app.initialize();

      $.ajax(
      {
        type: "POST",
        url: "http://localhost:49182/Service1.asmx?op=HelloWorld",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        sucess: function() { console.log('response.responseText'); },
        error: function() { console.log('error'); }
      });    
  </script>
</head> 
```

控制台总是给出*错误*信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:04:19.723

你的`success`拼写有错误。此外，您需要在错误调用中捕获错误。

就像是 ：

`error: function(obj){console.log(obj)};`

它会让你更好地了解你可能出错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:05:46.947

Becoz，您正在尝试使用基于肥皂的 Web 服务，例如 restful 服务。将服务更改为 RESTful 以像这样使用。

[http://www.codeproject.com/Articles/38035/Build-ReST-based-Web-Services-in-NET-C](http://www.codeproject.com/Articles/38035/Build-ReST-based-Web-Services-in-NET-C)

更多阅读： http: [//msdn.microsoft.com/en-in/library/dd203052.aspx](http://msdn.microsoft.com/en-in/library/dd203052.aspx) [http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm) [http://en。 wikipedia.org/wiki/Representational_State_Transfer](http://en.wikipedia.org/wiki/Representational_State_Transfer)

# mysql - MySQL 正则表达式更新查询

> ID：15881158
> 
> 赞同：2
> 
> 时间：2013-04-08T14:01:53.690
> 
> 标签：mysql, sql, regex, database

我目前在表列中保留完全限定的类名，但在后端更改了此功能以保留简单的类名。

我需要将完全限定的类名更新为数据库中的简单名称，但不确定如何使用 REGEXP

我想更新列数据并更改`com.test.models.core.SomeFilter`为`SomeFilter`

所以从最后一个句号获取文本并更新列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:05:05.737

```
UPDATE filter_table SET filter_name= SUBSTRING_INDEX(filter_name, '.', -1); 
```

# command - 命令/句柄应该保存完整的聚合还是只保存它的 id？

> ID：15881162
> 
> 赞同：1
> 
> 时间：2013-04-08T14:01:58.133
> 
> 标签：command, domain-driven-design, cqrs

我正在尝试使用 DDD 和 CQRS。

我得到了这两个解决方案：

*   将 AggregateId 添加到我的命令/事件中。很好，我可以使用我的命令作为我的 Web 服务的参数，我也可以将我的命令的一些实例返回到我的表单中，以表示“你可以执行这个命令，他的一个和这个”

*   将我的完整聚合添加到我的命令/事件中。这很好，因为我确信如果有很多事件发生，我不会加载我的聚合 100 次，我只会传递我的引用（例如，我不会将它加载到我的命令的验证器和我的命令处理程序）。但我会添加为每个只有 id 的命令创建一个参数类。

现在我在命令中有 id，在事件中有完整模型（我相信我的工作单元可以缓存 Load(aggregateId)，所以我不会为 1 个命令执行相同的请求 100）。

有没有正确/更好的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T15:19:30.613

是的，您当前的方法是正确的 - 使用命令上的标识值引用聚合。命令旨在被序列化并跨进程边界发送。此外，命令通常由可能没有足够信息来创建整个聚合实例的客户端构建。这也是为什么应该使用身份的原因。是的，如果需要，您的工作单元应该负责在工作单元期间缓存聚合。

# c++ - C++ MFC 应用程序在 Windows 7 上运行缓慢，但在 XP 上运行迅速

> ID：15881168
> 
> 赞同：1
> 
> 时间：2013-04-08T14:02:15.167
> 
> 标签：c++, visual-studio, visual-c++, mfc

我有一个`C++ MFC`应用程序（这是在 2000 年之前编写的），我已经在 Visual Studio 2012 中编译它并`Windows XP`在`Windows 7`.
例如，当尝试使用打开文件对话框打开文件时，应用程序需要大约 3 秒来显示对话框，然后在选择文件后大约需要 7 秒来打开文件。
要在其中运行它，`Windows 7`我确实需要可`C++`再发行包。

任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:03:35.923

如果在 PC 上安装文件加密和指纹读取器时读取或写入文件，C++ MFC 应用程序控件将在 Windows 7 和 windows vista 中运行缓慢。就我而言，问题应用程序是 Digital Persona Pro。问题 dll 是 DpFbView.dll 和 DPClback.dll

# javascript - 将全局回调添加到 $.ajaxSetup

> ID：15881169
> 
> 赞同：3
> 
> 时间：2013-04-08T14:02:15.117
> 
> 标签：javascript, ajax, jquery, callback

我`$.ajaxSetup`习惯于在我的站点中使用全局授权方法和全局错误处理。我想将一个回调函数传递给全局错误方法，这样我就可以在需要时在全局错误处理程序中调用该函数。这是我的`$.ajaxSetup`：

```
 $.ajaxSetup({
       global: false,
       // type: "POST",
        beforeSend: function (xhr) {
            //The string needs to be turned into 'this.pasToken'
            //if not us, don't include
            if(app.cookieAuth)
                xhr.setRequestHeader("Authorization", _this.pasToken);
        },
        statusCode: {
            401: function(){
                //Redirect to the login window if the user is unauthorized
                window.location.href = app.loginUrl;
            },
            //This is where I need help
            403: function(error, callback){
                //Show an error message if permission isn't granted
                callback(error);
                alert(JSON.parse(error.responseText)['Message']);
            }
        }
     }); 
```

注意`403:`状态码。我正在尝试传入一个回调函数，但我不知道如何从各个`ajax`调用中做到这一点。有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:09:05.630

最简单的解决方案；为 ajax 选项定义您自己的属性。

```
$.ajaxSetup({
    statusCode: {
        403: function(error, callback){
            this.callback403(error);
        }
    }
});

$.ajax({
    callback403: function () {}
}); 
```

请注意，如果您更改`context`ajax 请求的选项，这可能不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T14:05:44.867

我不确定这是否是您要查找的内容：

```
$.ajax({
    statusCode: {
       404: function() {
     alert("page not found");
    }
   }
   }); 
```

# c++ - 是否存在与堆内存分配相关的内存开销（例如堆中的标记）？

> ID：15881170
> 
> 赞同：9
> 
> 时间：2013-04-08T14:02:15.877
> 
> 标签：c++, windows, visual-studio, memory-management, heap-memory

特别是考虑使用最近的 Visual Studio C++ 编译器在 Windows 上使用 C++，我想知道*堆*实现：

假设我使用的是发布编译器，并且我不关心内存碎片/打包问题，是否存在与在*堆上*分配内存相关的内存开销？如果是这样，那么每个分配大概有多少字节？它的`64-bit`代码会比大`32-bit`吗？

我对现代*堆*实现了解不多，但我想知道每次分配是否有标记写入*堆*，或者是否维护某种表（如文件分配表）。

在相关点上（因为我主要考虑像“map”这样的标准库功能），Microsoft 标准库实现是否曾经使用自己的分配器（用于树节点之类的东西）来优化*堆*使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:14:19.220

是的，一点没错。

分配的每个内存块都将具有“标题”的恒定开销，以及一个小的可变部分（通常在末尾）。究竟有多少取决于使用的确切 C 运行时库。过去，我通过实验发现每次分配大约 32-64 字节。可变部分是为了应对对齐 - 每个内存块都将对齐到一些不错的甚至 2^n 基地址 - 通常是 8 或 16 个字节。

我不熟悉内部设计`std::map`或类似的工作原理，但我非常怀疑他们在那里有特殊的优化。

您可以通过以下方式轻松测试开销：

```
char *a, *b;

a = new char;
b = new char;

ptrdiff_t diff = a - b;

cout << "a=" << a << " b=" << b << " diff=" << diff; 
```

[请注意，可能是这里的大多数正则，上面的 ab 表达式调用未定义的行为，因为减去一个已分配的地址和另一个的地址，是未定义的行为。这是为了应对没有线性内存地址的机器，例如分段内存或“不同类型的数据存储在基于它们的类型的位置”。以上内容绝对适用于任何不使用分段内存模型且堆中有多个数据段的基于 x86 的操作系统 - 这意味着它肯定适用于 32 位和 64 位模式的 Windows 和 Linux]。

您可能希望以不同的类型运行它 - 请记住，差异在“类型的数量”中，因此如果您将其`int *a, *b`设置为“四个字节单位”。您可以制作一个`reinterpret_cast<char*>(a) - reinterpret_cast<char *>(b);`

[diff 可能是负数，如果你在循环中运行它（不删除`a`and `b`），你可能会发现一大块内存耗尽的突然跳转，并且运行时库分配了另一个大块]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T14:16:01.093

Visual C++ 在分配的缓冲区边界附近嵌入控制信息（链接/大小和可能的一些校验和）。这也有助于在内存分配和释放期间捕获一些缓冲区溢出。

最重要的是，您应该记住`malloc()`需要返回针对所有基本类型（`char`, `int`, `long long`, `double`, `void*`, `void(*)()`）适当对齐的指针，并且对齐通常是最大类型的大小，因此它可能是 8 甚至 16 个字节。如果分配单个字节，则仅对齐可能会丢失 7 到 15 个字节。我不确定是否`operator new`有相同的行为，但很可能是这种情况。

这应该给你一个想法。精确的内存浪费只能从文档（如果有）或测试中确定。语言标准没有用任何术语定义它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T15:05:55.697

是的。所有实际的动态内存分配器都具有最小**粒度**¹。例如，如果粒度是 16 个字节，而您只请求 1 个字节，那么仍然会分配整个 16 个字节。如果您要求 17 个字节，则会分配一个大小为 32 个字节的块，等等......

还有一个（相关的）对齐问题。²

相当多的分配器似乎是大小映射和空闲列表的组合——它们将潜在的分配大小拆分为“桶”，并为每个分配器保留一个单独的空闲列表。看看[Doug Lea 的 malloc](http://g.oswego.edu/dl/html/malloc.html)。还有许多其他具有各种权衡的分配技术，但这超出了这里的范围......

* * *

*¹通常为 8 或 16 个字节。如果分配器使用空闲列表，那么它必须在每个空闲槽内编码两个指针，因此空闲槽不能小于 8 字节（32 位）或 16 字节（16 位）。例如，如果分配器试图拆分一个 8 字节的槽以满足 4 字节的请求，那么剩余的 4 字节将没有足够的空间来编码空闲列表指针。*

*²例如，如果`long long`在您的平台上是 8 字节，那么即使分配器的内部数据结构可以处理比这更小的块，实际上分配较小的块可能会将下一个 8 字节分配推到未对齐的内存地址。*

# php - 绘制具有透明度的矩形

> ID：15881173
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:02:19.420
> 
> 标签：php, image

如何绘制多个具有透明度的矩形？我的代码如下。

```
$img = imagecreatetruecolor(400, 400);
//$img =imagecreatefromjpeg("water.jpg");
$imageX = imagesx($img);
$imageY = imagesy($img);
imagealphablending($img, false);
imagesavealpha($img, true);
$transparent = imagecolorallocatealpha($img, 255,255,255, 127);
$white = imagecolorallocate($img, 000,255,255);
imagefilledrectangle($img, 10, 10, $imageX-10, $imageY-10, $transparent);
//imagealphablending($img, true);
imagerectangle($img, 50, 50, 150, 150, $white);
header("Content-Type: image/png");
imagepng($img);
//imagepng($img,'anand.png'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:20:22.297

请参阅[imagecolorallocatealpha](http://php.net/manual/en/function.imagecolorallocatealpha.php)。根据文档：

> imagecolorallocatealpha() 的行为与 imagecolorallocate() 相同，只是增加了透明度参数 alpha。

只需替换`imagecolorallocate`为`imagecolorallocatealpha`，指定颜色的不透明度作为最后一个参数，其值从 0 到 127（其中 0 是完全不透明的，127 是完全透明的）

# iphone - UIDocumentInteractionController 自 iOS6 起不起作用

> ID：15881176
> 
> 赞同：1
> 
> 时间：2013-04-08T14:02:36.027
> 
> 标签：iphone, ios, objective-c

在我的应用程序中，我使用 UIDocumentInteractionController 将 pdf 文档打开到 acrobat 阅读器（或任何其他查看器）中，但从 iOS6 开始它不再工作了。

我尝试了很多东西，最后一个来自[这里](https://stackoverflow.com/questions/12631466/uidocumentinteractioncontroller-no-longer-works-in-ios6)：

```
UIDocumentInteractionController *docController = [[UIDocumentInteractionController alloc]init];
docController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:documentsDirectory]];
docControler.UTI = @"com.adobe.pdf";
docController.delegate = self;
CGrect navRect = self.view.frame;
[docController presentOpenInMenuFromRect:navRect inView:self.view animated:YES]; 
```

当此代码运行时，我的应用程序完全冻结。我尝试使用“presentOpenInMenuFromBarButtonItem”，但我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:09:07.307

将控制器分配给强引用的属性：

```
@property (nonatomic, strong) UIDocumentInteractionController *docController; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:09:41.590

我在 iOS 6 中成功使用了 UIDocumentInteractionController。示例代码：

```
self.documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:myPDFPath]];
[self.documentInteractionController presentOpenInMenuFromBarButtonItem:self.actionButton animated:YES]; 
```

您需要保留对 UIDocumentInteractionController 的引用，否则它将在其工作完成之前被释放。

此外，您似乎使用的是文档文件夹的路径，而不是特定文件的路径。我认为这行不通 - 将路径传递给特定文件。

# android - java.lang.SecurityException：不允许绑定到服务意图

> ID：15881178
> 
> 赞同：4
> 
> 时间：2013-04-08T14:02:36.613
> 
> 标签：android

我在 GCMIntentService onMessage 方法中实现了反向地理编码。我得到异常**java.lang.SecurityException: Not allowed to bind to service Intent { act=com.android.location.service.GeocodeProvider pkg=com.google.android.location }** 应用程序运行很长时间后。如果我重新启动设备，它会再次正常工作。我还看到当网络位置服务被杀死时，android open issue **[Reconnection with Geocoder services not possible。](https://code.google.com/p/android/issues/detail?id=39635)**. 有什么办法可以解决这个问题吗？

注意：我在三星 Galaxy Tab 2（Android 4.1.1）中运行应用程序

# php - 无法使用 POST 获取页面

> ID：15881179
> 
> 赞同：0
> 
> 时间：2013-04-08T14:02:36.823
> 
> 标签：php, post

我在一个政府网站上： http: [//bit.ly/10N0Ld8](http://bit.ly/10N0Ld8)，当我点击选择（如图中带有蓝色矩形的图像所示）时，它会获取一些数据。我想从我的 PHP 程序中执行此“获取”。我已经使用 Firebug 获取了 POST 数据。但它未能获得相同的数据。我试过删除参数等，但没有任何效果。网站返回错误“对不起，此网站遇到严重问题，请尝试重新加载页面或联系站长。”

任何想法 - 我如何以编程方式获取此值？

这是我使用的源代码：[https](https://docs.google.com/file/d/0B7aEugGV1GwTdHRhXzZnXzNrNVE/edit?usp=sharing) ://docs.google.com/file/d/0B7aEugGV1GwTdHRhXzZnXzNrNVE/edit?usp=sharing 。由于我测试了另一个 POST 请求，Curl 代码工作正常。

![在此处输入图像描述](https://i.stack.imgur.com/yl1xj.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:13:00.273

__VIEWSTATE 和 __EVENTVALIDATION 每次加载页面时都是唯一的，因此您需要首先检索页面，然后使用 POST 向 Select 链接发出请求，并包括获取的 viewstate 和 eventvalidation 值（最好使用 DOM）。

```
$viewstate = $xpath->query(...); 
```

# sql - 更新sql server中行ID的最简单方法？

> ID：15881186
> 
> 赞同：0
> 
> 时间：2013-04-08T14:02:52.637
> 
> 标签：sql, sql-server, tsql

此表中的主键 ID 值正在我们最近合并的 2 个系统中使用，但是其中一个系统中有大量项目指向错误的 id 值，我需要更新 ID（PK ) 值，以便 600 万个现有项目将指向正确的行。

![在此处输入图像描述](https://i.stack.imgur.com/bOZVh.jpg)

id 喜欢将 id 列更新为以下内容：

```
ID
1 to 5
2 to 6
3 to 7
4 to 1
5 to 2
6 to 3
7 to 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:18:44.040

好吧，假设它不是 IDENTITY 列（在这种情况下，您需要将 IDENTITY_INSERT 设置为 on），那么以下应该可以工作（例如，参见[SQLFiddle](http://sqlfiddle.com/#!3/f7f04/1)）

```
UPDATE MyTable 
SET ID = 
    CASE WHEN ID >= 4 SET ID - 3 
         ELSE  ID + 4
    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:23:25.030

使用带有 case 语句的更新查询

```
Update tableName set PkId = Case PkId 
   When 1 then 5
   When 2 then 6
   When 3 then 7
   When 4 then 1
   When 5 then 2
   When 6 then 3
   When 7 then 4  End
Where PkId In (1,2,3,4,5,6,7) 
```

如果您的答案中的值只是需要更改的值的一小部分（所有 600 万都需要更改吗？），那么您需要创建一个映射表，其中包含旧的错误值和新的正确值，并使用它（通过连接）而不是 case 语句。

```
 Update t set PkId = map.NewPkId
 From tablename t 
    Join mappingTable m 
       On m.oldPkId = t.PkId 
```

# android - 如何在没有这么多延迟的情况下向 80K 设备发布通知？

> ID：15881189
> 
> 赞同：1
> 
> 时间：2013-04-08T14:03:03.247
> 
> 标签：android, push-notification, google-cloud-messaging

使用 Google Cloud Messaging 向 80K 设备发送通知大约需要 1.5-2 分钟。这个持续时间是正常的还是有任何解决方法可以在 5 或 10 秒内发送它？

向 GCM 服务器发送 80 个请求仅需 1 秒，但最后一个包的响应大约需要 1.5 分钟。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:07:40.880

看看像 Xtify.com 这样的服务并使用他们的 BulkPush API。不是积极的，但我相信他们每 2 秒支持多达 100k 次推送。那么您的交付时间完全取决于 GCM 服务器。

# github - 在 Github 上发布编程教程的最佳方式是什么？

> ID：15881194
> 
> 赞同：2
> 
> 时间：2013-04-08T14:03:14.053
> 
> 标签：github, markdown, publish, github-pages

我想在 github 上发布一系列编程教程以及一些代码。教程将使用 Markdown 编写。会有几个互相引用的markdown文档。

现在我想知道什么是最好的选择：

1.  将纯 Markdown 文件连同代码一起放入存储库
2.  使用 github wiki 获取教程并链接到代码
3.  使用 github 页面（例如使用 jekyll）获取教程并链接到代码

我对 github 页面和 github wiki 都不是很熟悉，所以在这种情况下任何关于（不利）优势的提示都是有帮助的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:22:41.117

您已经提到了三种不同的方法可以做到这一点，我将详细说明它们......

# 仓库中的 Markdown 文件

这种方法实际上并不算太糟糕，因为人们只要知道 Markdown 就可以为它做出贡献（而且 Markdown 无论如何都很容易学习），因为他们只需要在分叉你的存储库后发送一个拉取请求。此外，由于 Github 使用了一种叫做[Github Flavored Markdown](https://help.github.com/articles/github-flavored-markdown)的东西，你可以将代码直接嵌入到每个文件中，并有一些漂亮的语法高亮显示。

# Github 维基

使用 Github wiki 是一个可行的选择，因为它可以让其他人轻松地为它做出贡献。但是，您可能更希望其他人在批准类型系统上进行更改，这是由于拉取请求功能而使用第一个选项的时候。我个人不建议您纯粹使用 wiki，因为它破坏了 Github 存储库本身（在 wiki 中有一个带有堆的空存储库）。不过这只是我个人的看法。

# Github 页面生成器

您*可以*使用 Github Pages 生成器并使用它创建一个网站。但是我想指出，它使用 Jekyll 来生成站点，并且生成器只会自动创建一个页面，其余页面将由您使用 Markdown 和一些 HTML 来制作。它看起来会更好，但会更耗时。

# 我的个人推荐

我建议您将教程本身托管在用 Markdown 编写的 Github 存储库中，然后您可以使用页面生成器创建一个页面，该页面将链接到教程的所有部分（充当登录页面）

# asp.net-mvc - ASP.NET MVC 企业 DDD 架构和 WCF 层

> ID：15881196
> 
> 赞同：1
> 
> 时间：2013-04-08T14:03:16.280
> 
> 标签：asp.net-mvc, domain-driven-design, enterprise-architect

我已经使用域驱动设计设计了我的 ASP.NET MVC 应用程序，并且我得到了以下项目：

*   MyApp.Core - 应用程序核心，包含领域模型等。
*   MyApp.Infrastructure - 应用程序主要基础设施，包含使用 EF 进行域模型存储（repos 等）的实现。
*   MyApp.Web.Core - 域模型、服务声明（接口）等仅适用于 Web（例如 IFormAuthenticationTicketSupplier、IOAuthAuthenticationProvider 等）
*   MyApp.Web.Infrastructure - Web 实现
*   MyApp.Web.UI - ASP.NET MVC 标准应用程序。

该应用程序应该由具有多个服务器的企业使用等。目前，该应用程序在控制器的基础设施层调用一个服务，该服务使用Repositories和EF。我可以使用连接字符串连接到数据库服务器。

在 Google 研究这个主题时，我读到创建企业应用程序时采用的一些方法是创建应用程序服务器和 Web 服务器。在应用程序服务器中 - 存储 WCF 服务，而在 Web 服务器中只是调用它。

我想知道我是否应该这样做（如果在与企业打交道时创建 WCF 服务是正确且必需的方法）： - 为什么有人不应该只使用控制器中的服务而是使用 API？- 如果我使用 API，它不会减慢响应速度吗？因为即使计算机在同一个网络上，我仍然会打开一个 HTTP 请求。- 如果我应该使用 WCF 或 ASP.NET WebAPI？

感谢您的任何反馈和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:26:24.373

首先，关于您的项目，是否需要拆分 MyApp.Web.Core、MyApp.Web.Infrastructure 和 MyApp.Web.UI？当然，它们可能是单独的职责，但有时依赖卫生胜过封装。您始终可以将它们放在单独的文件夹和命名空间中。我不会将某些内容提取到单独的项目中，除非我需要从其他地方将其作为库引用。

至于应用程序服务，这也取决于您的需求。如果调用该应用程序服务的唯一地方是 ASP.NET MVC 应用程序，那么就没有太多需要提取应用程序服务。不过也有一些好处。一是您不必担心服务所需的所有依赖项 - 您只需通过 Url 引用它。当然，您可以从控制器以外的地方调用服务，尽管 MVC 控制器也可以充当纯 HTTP 服务。您还可以在不发布 MVC 应用程序的情况下将更新部署到特定服务。但是您确实有维护单独服务的负担。如果您确实走那条路，请使用 WebAPI，WCF 实在是太抽象了。

# eclipse - 在Eclipse上安装JBoss后在哪里可以找到JBossWS的wsconsume

> ID：15881200
> 
> 赞同：1
> 
> 时间：2013-04-08T14:03:23.357
> 
> 标签：eclipse, jboss, wsdl, jboss-tools

我已经从 Eclipse 市场在 Eclipse 上安装了 JBoss。以下快照显示了安装结果： ![在此处输入图像描述](https://i.stack.imgur.com/KRIoe.png)

wsconsume 没有向导。据我了解，它只是一个命令行工具。我在哪里可以找到 wsconsume？

其实我只对使用 wsconsume 感兴趣。所有的安装都是为了这个目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:11:41.907

我猜你已经安装了`JBoss Tools for Eclipse`. 顾名思义，它只是围绕 JBoss 相关技术的工具（`JBoss Application Server`其中最重要的技术之一）。
`JBossWS`它的`wsconsume`配套工具与`JBoss Application Server`（简称JBossAS）一起分发，它是独立的独立产品。请从[JBoss 下载站点下载](http://www.jboss.org/jbossas/downloads)。当前的社区版本是 7.1.1。
接下来，将存档解压缩到某个文件夹（从现在开始我将其称为 JBOSS_HOME）。`JBOSS_HOME/bin`Wsconsume 工具作为 Windows 和 Unix/Linux 系统的脚本放置在文件夹中：`wsconsume.bat`和`wsconsume.sh`分别。

作为替代方案，您可以只下载[JBossWS](http://www.jboss.org/jbossws/downloads)本身而不是整个 JBossAS，但由于某些原因，我发现上面描述的方式更容易。

我不知道是否有任何`JBoss Tools for Eclipse`帮助。`wsconsume`我总是从命令行使用它，我对它非常满意。

（我不知道您目前使用 JBoss 技术的经验，所以如果我的解释过于基础，请见谅。）

# javascript - 对象未定义或为空

> ID：15881202
> 
> 赞同：0
> 
> 时间：2013-04-08T14:03:32.557
> 
> 标签：javascript, jquery, asp.net-mvc

我编写了一个名为 global.js 的 JavaScript 文件，其内容如下：

```
;

var Globals = 
{
    function getAppRoot() {
        if (typeof (jQuery) !== "undefined")
            return $("#ApplicationRoot").attr("href");
    };

    appRoot : getAppRoot();
}; 
```

然后在我的 HTML 文件（ASP.NET MVC 项目）中，我包含了我的 JavaScript 文件，如下所示：

```
<link rel = "home" id = "ApplicationRoot" 
    href = "@Url.Content("~/")" />

<script src = "@Url.Content("~/Scripts/jquery-1.8.3.js")" 
    type="text/javascript"></script>

<script src = "@Url.Content("~/Scripts/global.js")" 
    type = "text/javascript"></script> 
```

然后，在 HTML 文件中，在 SCRIPT 标记内，我写道：

```
$(document).ready( 
    function() { 
        alert("Globals.appRoot = " + window.Globals.appRoot); 
    } ); 
```

但是，当我运行代码时，它告诉我这`Globals`是未定义的。

**更新** 谢谢大家。我只是注意到我忘记了一个等号（赋值运算符）。

我现在观察到的另一件重要的事情（我不完全确定）是：我从您的评论中假设对象声明如下：

```
var foo = { /* cannot have anything that does not adhere to the bar : gar syntax? */ } 
```

**另一个更新** 事情是：如果我`appRoot`这样做了一个方法：

```
var Globals = 
{
    appRoot : function() { }
}; 
```

或者像这样：

```
var Globals = 
{
    appRoot : function getAppRoot() { }
} 
```

客户端必须`appRoot`使用一组以下括号进行调用。我想`appRoot`成为一个属性而不是一个方法。我怎么做？

**最终更新** 我现在已将代码更改为如下所示：

```
// globals.js
// I understand that the starting semi-colon is not 
// required. I'd left it in for reasons that it is used
var Globals = 
{
    appRoot : $("#ApplicationRoot").attr("href");
};

// inside the HTML file in $(document).ready();

if (tyepof(Globals) == "undefined" || Globals == null)
  alert("Globals is either undefined or null");
else
  alert("Globals.appRoot = " + Globals.appRoot); 
```

我收到警报消息**Globals is either undefined or null**。

**回答** 好的，最后。感谢你的帮助。我在对象的对象声明/初始化中遇到了另一个小语法错误`Globals`。

由于`appRoot`是对象的成员，并且我使用的是对象初始化器语法，因此我不应该`appRoot`用分号终止声明。相反，我应该要么使用逗号，要么不使用任何终止字符，因为它是最后一个（也是 的唯一成员`Globals`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:08:11.977

你需要重新编写你的 globals.js，这样的东西应该可以工作：

```
var Globals = {
    appRoot : function() {
        if (typeof (jQuery) !== "undefined") {
            return $("#ApplicationRoot").attr("href");
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:07:36.253

你`global.js`应该看起来更像这样：

```
//; << not needed
var Globals = /*equal to missing*/
{
    appRoot : function getAppRoot() {
        if (typeof (jQuery) !== "undefined")
            return $("#ApplicationRoot").attr("href");
    }
}; 
```

# c# - 如何在 F# 中编写此 C# 代码

> ID：15881206
> 
> 赞同：9
> 
> 时间：2013-04-08T14:03:44.193
> 
> 标签：c#, f#, try-catch, mutable

我习惯用 C# 编写这样的代码：

```
SomeObj obj;
try{
    // this may throw SomeException
    obj = GetSomeObj();
}catch(SomeException){
    // Log error...
    obj = GetSomeDefaultValue();
}

obj.DoSomething(); 
```

这是我在 F# 中翻译它的方式（obj 是一个列表）：

```
let mutable obj = []
try
    obj <- getSomeObj
with
    | ex ->
        // Log ex
        obj <- getSomeDefaultValue

doSomething obj 
```

有什么方法可以在不使用可变变量的情况下在 F# 中执行此操作？在 F# 中是否有更“优雅”的方式来处理这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T14:14:12.627

F#-ish 方式是在两个分支中返回相同类型的表达式：

```
let obj =
    try
        getSomeObj()
    with
    | ex ->
        // Log ex
        getSomeDefaultValue()

doSomething obj 
```

在 F# 中，您可以使用`option`类型来处理异常。当没有明显的默认值时，这是一个优势，并且编译器会强制您处理异常情况。

```
let objOpt =
    try
        Some(getSomeObj())
    with
    | ex ->
        // Log ex
        None

match objOpt with
| Some obj -> doSomething obj
| None -> (* Do something else *) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T14:56:15.870

将此逻辑包装在函数中...

```
let attempt f = try Some(f()) with _ -> None
let orElse f = function None -> f() | Some x -> x 
```

...它可能是：

```
attempt getSomeObj |> orElse getSomeDefaultValue 
```

# iphone - 使用 AVAudioSessionCategoryPlayAndRecord 启用响铃/静音开关

> ID：15881207
> 
> 赞同：0
> 
> 时间：2013-04-08T14:03:46.653
> 
> 标签：iphone, ios, audio, recording, avaudiosession

当我想使用 AVAudioSessionCategoryPlayAndRecord 同时播放和录制音频时，如何使物理响铃/静音开关再次工作？我只是无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T03:46:41.987

AVAudioSessionCategoryPlayAndRecord 专为以音频为中心的应用程序而设计，应用程序的目的是播放音乐。设置此类别时，静音开关或屏幕锁定不会使音频静音。VOIP 应用程序和音乐应用程序需要这种行为。

如果您希望通过静音开关使音频静音，则需要在不录制时将类别切换为 AVAudioSessionCategoryAmbient 或 AVAudioSessionCategorySoloAmbient。

如果您可以访问 WWDC 开发人员视频，我建议您观看“WWDC 2010 session 412 Audio Development for iPhone OS part 1”。

# c - Linux内核模式字符串复制

> ID：15881209
> 
> 赞同：5
> 
> 时间：2013-04-08T14:03:49.923
> 
> 标签：c, linux-kernel

在内核模式下搜索字符串副本几分钟后，想到发布一个新问题。

**当代码在内核模式下**运行时，什么实用程序可以帮助我进行字符串复制？

我确定那里应该有一些东西，并且在我当前的项目中，我看到使用`memcpy()`具有`strcpy()`.

是的，我同意这只是 的单行代码`strcpy()`，但您知道代码审查中可能不接受这些代码 :)

编辑：我会以更好的方式提出我的问题，是否`strcpy()`在内核模式下使用？（比如 linux 内核 2.6 及更高版本）如果是这样，它是使用 libc 还是其他一些 util ？

PS：我看到`strcpy()` [http://livegrep.com/search/linux?q=strcpy](http://livegrep.com/search/linux?q=strcpy)用于内核源代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T14:25:45.370

我不确定您正在寻找什么作为答案...但是 linux 内核提供[strcpy()](https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/include/linux/string.h?h=v3.8.6#n20)和[memcpy()](https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/include/linux/string.h?h=v3.8.6#n99)。

如果您询问`strcpy()`在代码审查中如何推荐朋友，您可以使用`strncpy()`. 大多数传统的 C 字符串函数都是定义的，而且大部分都定义在`include/linux/string.h`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-09T18:45:45.140

在 Linux 源代码树中，各种实用程序函数位于*lib*子目录中。有一个*[string.c](https://github.com/torvalds/linux/blob/master/lib/string.c)*文件，其中提供了*strcpy()*、*strcasecmp()*等函数。

但是，如果您想要一个通过代码审查的健壮代码，您应该尽可能使用某些服务的健壮版本。源代码树中的[文档](https://github.com/torvalds/linux/blob/master/Documentation/process/deprecated.rst)指定了不安全的功能和建议的替换：

> . 使用 strscpy() 代替 strcpy()、strncpy() 和 strlcpy()
> 。分别使用 kstrtol()、kstrtoll()、kstrtoul()、kstrtoull() 代替 simple_strtol()、simple_strtoll()、simple_strtoul() 和 simple_strtoull()

# python - Python：使用argparse显示输入参数的顺序

> ID：15881211
> 
> 赞同：1
> 
> 时间：2013-04-08T14:03:51.427
> 
> 标签：python, arguments, argparse

在 Python 中，使用`argparse`调用脚本时，是否可以直接指定参数在屏幕上显示的顺序`-h`？

更具体地说，我想在其他一些论点*之后*显示一些论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:09:47.667

我相信顺序是您`add_argument`（对于每个组）的顺序，因为它们在内部存储在一个列表中。

例如：

```
import argparse

args = ('foo','bar','baz','qux')

#This is not the order the get printed in, so it's not using a dict...
print (set(args))  

parser = argparse.ArgumentParser()
for x in args:
    parser.add_argument('--{0}'.format(x),help=x)

parser.parse_args(['-h']) 
```

结果是：

```
set(['baz', 'foo', 'bar', 'qux'])
usage: test.py [-h] [--foo FOO] [--bar BAR] [--baz BAZ] [--qux QUX]

optional arguments:
  -h, --help  show this help message and exit
  --foo FOO   foo
  --bar BAR   bar
  --baz BAZ   baz
  --qux QUX   qux 
```

当然，欢迎不同的python实现`argparse`在他们认为合适的时候重新实现，但由于它是纯python，我看不出他们有任何理由重新发明轮子。

# asp.net - 使用 asp.net 从表单中收集数据并将其插入到由多个表组成的 sql 视图中

> ID：15881213
> 
> 赞同：0
> 
> 时间：2013-04-08T14:03:53.390
> 
> 标签：asp.net, sql, forms, insert, views

我正在尝试使用 asp.net 从表单中收集数据并将其插入到由多个表组成的 sql 视图中。但是一直显示错误，说“v_orderdetails 不可更新，因为修改会影响多个基表。” 谁能帮忙，下面是我的代码：

```
public partial class _Order : System.Web.UI.Page
{
    string myConnectionString;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
        }
    }

    protected void Orderbtn_Click(object sender, EventArgs e)
    {
        SqlConnection myConn = new SqlConnection();
        myConnectionString = "server=CSSQL; database=Oh31_PE; Trusted_Connection = true";
        myConn.ConnectionString = myConnectionString;

        string querystring1;
        querystring1 = "insert into v_orderdetails (dbo.t_order.OrderDate, dbo.t_product.Material, dbo.t_product.Description, dbo.t_orderdetails.Quantity) values ( '";
        querystring1 += od.Text + "','" + opname.Text + "','" + tom.Text + "','" + tod.Text + "','" + qq.Text + "')";

        SqlCommand dbcommand1 = new SqlCommand();
        dbcommand1.CommandText = querystring1;
        dbcommand1.Connection = myConn;
        myConn.Open();
        dbcommand1.ExecuteNonQuery();
        myConn.Close();

        {
            Response.Redirect("Order.aspx");
        }

    } // end Orderbtn_Click
} 
```

# http - http 和 www 版本的不同输出

> ID：15881226
> 
> 赞同：0
> 
> 时间：2013-04-08T14:04:21.813
> 
> 标签：http, iis, web-applications, dns, plesk

我有一个域，即：`foo.com`

当我输入时`http://foo.com`，它会转到我的应用程序。

当我键入`www.foo.com`时，它会转到默认的 IIS 页面。

我正在为 Windows 使用 plesk 9。

当我使用 nslookup 查找 DNS 时，它们都指向同一个 DNS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:09:16.343

如果这两个域指向相同的 IP 地址，您似乎需要正确配置 IIS 服务器的主机标头。

使用 Plesk，我认为您只需要在域管理页面中添加一个适当的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:11:13.533

在 IIS 应用程序中转到绑定，并确保 www.yourdomain.tld 和 yourdomain.tld 都已绑定。（PS。这个问题在 serverfault.com 上可能会更好）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:30:26.347

直接在 IIS 中（不是通过 Plesk）对域配置所做的更改将在未来重置（在 Plesk 中的域配置更新之后）

在 Plesk 9 中，您可以在主机设置页面上为域打开“www”，域名左侧有“WWW 前缀”复选框。

# drop-down-menu - 展开时保持菜单下方的行

> ID：15881232
> 
> 赞同：1
> 
> 时间：2013-04-08T14:04:46.897
> 
> 标签：drop-down-menu, styling

悬停时，我在菜单项下方有一行。这是一个下拉菜单，当我将鼠标悬停在子菜单中时，我想保留该行。

这是我的代码：

```
 <nav id="primary_navigation">
<h1>Primary Navigation Menu</h1>
<ul>
<li class="active"><a href="<?php echo home_url('/'); ?>">Home</a></li>
<li><a href="about-us/">About Us</a></li>
<li class="has-sub"><a href=""><span>Services</span></a>
<ul>
    <li><a href=""><span>Service 1</span></a></li>
    <li><a href=""><span>Service 2</span></a></li>
    </ul>
                </li>
                <li><a href="">Fees and Process</a></li>
                <li><a href="">Blog</a></li>
                <li><a href="">Contact</a></li>
            </ul>               
        </nav> 
```

这是CSS：

```
nav#primary_navigation h1{
display: none;
text-align: center; 
}
nav#primary_navigation {
margin-top: 15px;
margin-left: 100px;
font-family: 'Eraslght';
font-size: 18pt;
line-height: 20pt;
}
nav#primary_navigation ul {
list-style:none;

}
nav#primary_navigation ul li {
display: block;
float: left;
position: relative;
margin-left: 25px;

}
nav#primary_navigation ul li a:link, nav#primary_navigation ul li a:visited {
display: block;
text-align: center;
text-decoration: none;
color: black;
}
/*1*/
nav#primary_navigation ul li:hover a{ 
display: block;
text-align: center;
text-decoration: none;  
color: black;

}
nav#primary_navigation ul li a:hover, nav#primary_navigation ul li a:visited{
display: block;
text-align: center;
text-decoration: none;
color: black;
padding-bottom: 10px;
border-bottom: solid #000000;   
} 

nav#primary_navigation ul li a:active {
display: block;
text-align: center;
text-decoration: none;
color: black;   

}
/*fin 1*/
nav#primary_navigation ul li:hover ul {
display: block;
background-color: #04E1BE;
}
nav#primary_navigation ul li ul {
margin: 0px;
list-style: none;
display: none;
position: absolute;
top: 40px;
left: -2px;
}
nav#primary_navigation ul li ul li {    
width: 100px;
clear: left;
margin-left: -5px;
margin-top: 0px;
}
nav#primary_navigation ul li ul li a:link{
clear:left;
padding:4px 0px 0px 4px;
border:none;
position:relative;
z-index:1000;
}
nav#primary_navigation ul li ul li:hover a, nav#primary_navigation ul li ul li a:active, nav#primary_navigation ul li ul li a:hover {
clear:left;
color: white;
padding:4px 0px 0px 4px;
border:none;
position:relative;
z-index:1000;
} 
```

谁能告诉我一个提示？我看不到我应该在哪里编码什么。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:04:34.530

正如我所看到的那样。您已将该`padding-bottom`属性赋予`li a:hover`或访问或激活，但您已将子菜单嵌套在`li`元素中，那么这怎么可能，兄弟？您`nav#primary_navigation ul li a`在开始子菜单之前结束该元素，`ul li`因为

```
<li class="has-sub"><a href=""><span>Services</span></a> [your li a ends here]
<ul>
    <li><a href=""><span>Service 1</span></a></li> [So here no hover action'll be applied] here
    <li><a href=""><span>Service 2</span></a></li>
    </ul>
</li> 
```

所以，就用这样的风格。

```
nav#primary_navigation ul li:hover, nav#primary_navigation ul li:visited{
display: block;
text-align: center;
text-decoration: none;
color: black;
padding-bottom: 10px;
border-bottom: solid #000000;   
} 
```

反而

```
nav#primary_navigation ul li a:hover, nav#primary_navigation ul li a:visited{
/*style goes here*/   
} 
```

希望你能明白。

# android - 框架布局问题

> ID：15881235
> 
> 赞同：0
> 
> 时间：2013-04-08T14:04:52.890
> 
> 标签：android, android-layout

我尝试使用 Framelayout 创建布局。

下面我尝试但没有得到输出的代码。我想要像图像一样的输出。

```
 <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="left|top"
            android:src="@drawable/login_arrow" />

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="right|bottom"
            android:src="@drawable/login_fbsignup" />
    </FrameLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/8VY2I.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:14:35.503

我会使用`RelativeLayout`而不是`FrameLayout`. 但更重要的是，我只制作一张图像并在没有任何布局容器的情况下使用

# javascript - Draggable JS Bootstrap modal - 性能问题

> ID：15881245
> 
> 赞同：9
> 
> 时间：2013-04-08T14:05:06.017
> 
> 标签：javascript, performance, twitter-bootstrap, modal-dialog, draggable

对于工作中的项目，我们使用 JavaScript 中的 Bootstrap 模态窗口。我们想让一些窗口可以移动，但是我们遇到了 JQuery 的性能问题。

```
$("#myModal").draggable({
    handle: ".modal-header"
}); 
```

[例如](http://jsfiddle.net/nj6ST/show) ，
[来源](http://jsfiddle.net/nj6ST/) 。
在 IE9 中，它按预期工作。
在 Chrome 中，水平拖动按预期工作，垂直拖动相当慢但没有问题。
在 Firefox 中，水平拖动按预期工作，但垂直拖动非常慢。

这很奇怪，因为示例窗口在图形上并不繁重，而且 JQuery 应该规范浏览器行为。我尝试不使用 JQuery 的可拖动来解决这个问题，但我遇到了同样的问题。

所以我有几个问题：

*   性能缓慢是浏览器、JQuery、Bootstrap 的错还是我的代码不是最优的？
*   为什么水平和垂直拖动有区别？
*   我应该找到解决方法，还是完全避免 Bootstrap 用于动态弹出窗口？

亲切的问候，圭多

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-17T18:44:28.380

我找到了一些解决此问题的方法。

`transition`将此添加到您的 CSS 文件将在拖动模态时禁用效果。然而，似乎一旦用户拖动框，飞入将不会正确发生，而是只会淡入。

```
.modal.fade.ui-draggable-dragging {
    -moz-transition: none;
    -o-transition: none;
    -webkit-transition: none;
    transition: none;
} 
```

或者，将以下内容添加到您的 CSS 文件和`nofly`模型中的类将一起禁用飞入，但不会禁用淡入：

```
.modal.fade.nofly {
    top: 10%;        
    -webkit-transition: opacity 0.3s linear;
    -moz-transition: opacity 0.3s linear;
    -o-transition: opacity 0.3s linear;
    transition: opacity 0.3s linear;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-17T12:48:35.937

我发现在引导程序 3 中我必须覆盖模态对话框的这些 css 属性：

```
.modal
{
    overflow: hidden;
    bottom: auto;
    right: auto;
}
.modal-dialog{
    margin-right: 0;
    margin-left: 0;
} 
```

[小提琴](http://jsfiddle.net/dave_wilton/a3gyq/5/)

[全屏演示](http://jsfiddle.net/dave_wilton/a3gyq/5/embedded/result/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-04T20:11:34.880

这并不能完全回答您的问题，但您可以尝试禁用`*-transition`属性或减少指定的时间值`0.3s`。这在 中定义`.modal.fade`。但这也会与最初的弹出动画混淆。如果这不可接受，您可以使用小部件的`start`事件`draggable`来应用新样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-16T15:54:41.283

使用 Bootstrap 3.3 和 jQuery UI 1.1，我将一个名为“modal-draggable”的类添加到具有“modal”类的元素中。

它`.modal-dialog`使用类绑定到容器内的元素`.modal-draggable`（与此处绑定到实际容器的一些示例不同）。

有一些 CSS，因此滚动长对话框仍然适用于所有屏幕尺寸的设备。

CSS：

```
.modal-draggable .modal-backdrop {
  position: fixed;
}

.modal.modal-draggable {
    overflow: overflow-y;
}

.modal-draggable .modal-header:hover {
  cursor: move;
} 
```

JavaScript：

```
$(".modal-draggable .modal-dialog").draggable({
  handle: ".modal-header"
}); 
```

**请参阅此处的 JS Fiddle 以获取演示：http: [//jsfiddle.net/jcosnn6u/3/](http://jsfiddle.net/jcosnn6u/3/)**

*注意：到目前为止，我只在 Chrome、Firefox 和 Safari 以及移动设备上进行了测试，因此无法评论 Internet Explorer 的兼容性。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T11:55:39.600

我更喜欢使用 jqueryui。有关可拖动 API 的更多详细信息：http: [//api.jqueryui.com/draggable/](http://api.jqueryui.com/draggable/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-19T21:23:47.430

尽管建议的 CSS 更改对我有用，但我不喜欢最初显示在左侧的对话框。将 jquery UI 从 1.9 升级到 1.11 解决了我看到的问题

# android - zxing客户端无法扫描二维码

> ID：15881249
> 
> 赞同：6
> 
> 时间：2013-04-08T14:05:19.780
> 
> 标签：android, qr-code, zxing

我无法扫描具有深色背景（深粉色）和较浅 QR 码（浅粉色）的 QR 码。我在我的应用程序中集成了 zxing 条码扫描器来扫描代码。它非常适合浅色背景和深色二维码。

我使用默认的 zxing 条码扫描仪应用程序进行了尝试。但它无法扫描此类代码。

以下是我要扫描的二维码， ![在此处输入图像描述](https://i.stack.imgur.com/6u7Wr.png)

请提出一些解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:31:47.157

您包含的 QR 码的对比度对于大多数相机来说应该足够了。这里的问题是 ZXing 库不支持反向二维码。它仅支持浅色背景上的深色代码。

要添加此支持，您需要自己反转图像。您可以使用与此类似的一些代码： [http ://www.androidsnippets.com/how-to-invert-bitmap-color](http://www.androidsnippets.com/how-to-invert-bitmap-color)

当然，您需要通过包含库来集成 ZXing 来完成此操作，而不仅仅是通过 Intent（我不知道您现在是如何做的），以便您可以修改一些代码。

您可以在类**DecodeHandler的方法****decode** (byte[], int, int) 中添加代码来反转位图。

# android - Android：如何保证文件上传到 WCF 服务？

> ID：15881250
> 
> 赞同：1
> 
> 时间：2013-04-08T14:05:21.670
> 
> 标签：android, file, upload

我的应用程序动态创建一些文件并通过对象跟踪文件。在某些时候，对象被传递给 IntentService。IntentService 的目的是

*   创建一个 XML 文件以包含有关其他文件的数据
*   将 XML 文件和其他文件添加到 ZIP 文件
*   将 ZIP 文件上传到 WCF 服务

ZIP 文件**必须**在某个时候上传。事情可能会发生；WCF 服务可能已关闭等。

在保证上传 ZIP 文件方面，我有哪些选择？我目前的计划是将一些信息保存到 SQLite DB 并在每次启动应用程序时检查它并从那里获取它。不确定这是一个好主意，或者是否有更好的方法来处理这个问题。

另外，我是一个Android新手，但如果我理解正确的话，如果IntentService在它完成之前被关闭，它会在某个时候自动用相同的Intent重新创建，对吧？否则我也必须考虑到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:48:29.300

你应该看看通过使用同步适配器来使用内置同步服务看看这个 [http://naked-code.blogspot.co.uk/2011/05/revenge-of-syncadapter-synchronizing。 html](http://naked-code.blogspot.co.uk/2011/05/revenge-of-syncadapter-synchronizing.html)

观看嵌入该页面的谷歌 I/O 视频。

您应该注意，Virgil 建议使用同步适配器以外的任何东西都是完全错误的。SyncAdapter 实现起来很简单，上面的链接还演示了如何设置它。

SyncAdapter 将负责重试尝试，并选择最佳时刻为您的手机同步数据。您可以安排同步适配器，也可以根据您的需要请求立即同步。

客户经理不保存名称和密码。他们会；您的网站或 oauth2 服务需要，但客户经理存储令牌而不是凭证。如果令牌需要刷新，则会向用户显示帐户管理器登录屏幕，然后运行您的代码以获取新的身份验证令牌。

有关详细信息，请参阅[http://developer.android.com/training/id-auth/identify.html](http://developer.android.com/training/id-auth/identify.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:09:46.333

> 我目前的计划是将一些信息保存到 SQLite DB 并在每次启动应用程序时检查它并从那里获取它。

您快到了。不是每次应用程序启动时检查数据库，而是`AlarmManager`每 X 小时/天使用并检查上传状态。上传可以由`IntentService`.

一个更好的原因`AlarmManager`是用户可以选择让应用程序保持打开数天或数周！通过运行数据库和上传代码的重复警报，您可以确定上传尝试会定期发生。

看看这个关于调度重复任务的相关问题 - [Scheduling recurring task in Android](https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android)

# jquery - jQuery UI Slider、HTML5 FullScreen、Google Chrome 和状态栏

> ID：15881251
> 
> 赞同：2
> 
> 时间：2013-04-08T14:05:25.960
> 
> 标签：jquery, google-chrome, slider

所以我有一个 jQuery UI 滑块，我在最新的 Chrome 浏览器上以 HTML5 全屏模式使用它。

当用户单击并拖动滑块句柄时，由于 jQuery UI 将滑块句柄绘制为带有 的`<a>`标签`href="#"`，Chrome 会`#`在全屏底部的“状态栏”中显示链接（就像将鼠标悬停在链接上时一样，浏览器窗口底部会出现一个小状态栏）。

这破坏了我的全屏体验。

有没有办法阻止 Chrome 专门针对该滑块标签或任何带有 href 的链接执行此操作`#`？仍然为其他链接显示此信息会很有用。

如果做不到这一点，是否有让 jQuery 将滑块绘制为`<div>`标签而不是`<a>`标签的方法？

最后，（只是因为我很好奇）为什么 jQuery UI 团队的霸主会认为`<a>`在这种情况下使用标签比使用标签更明智`<div>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:37:38.787

`<a>`在使用滑块后，标签似乎保持选中状态。用户完成滑块后，如何检测这取决于您，您可以使用[`jQuery.blur()`](http://api.jquery.com/blur/)取消选择元素，如下所示：

`$('#element').blur()`

这不是一个完美的解决方案，但我觉得这将是你现在能找到的最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:48:07.553

如果您要`href`在页面加载时从锚标记中删除 ，则 Chrome（或任何浏览器可能）中的状态栏将不会出现。

我同意这不是一个很好的解决方案。

为此，将以下行添加到您的末尾，`$(document).ready()`以便在整个页面加载后执行：

```
$(<* selctor for jQuery UI Slider *> ).removeAttr('href'); 
```

我通过这样做选择了元素：

```
$('.ui-slider-handle').removeAttr('href'); 
```

# android - android-使主屏幕小部件可见

> ID：15881252
> 
> 赞同：0
> 
> 时间：2013-04-08T14:05:28.990
> 
> 标签：android, android-widget

在主屏幕上长按后，我可以在小部件列表中找到我的小部件，但是，当我单击该小部件时，它在 Android 2.3 中不可见，但在 4.2 中可见。谁能告诉我如何使它在 2.3 中也可见？

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" android:initialLayout="@layout/activity_main" android:updatePeriodMillis="0" android:minHeight="90dp" android:minWidth="144dp"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:15:06.897

如果我没记错，请进入 xml 视图并使可见性可见。

```
android:visibility="visible" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:15:00.027

只需要更改 android:minHeight="150dp" android:minWidth="200dp"。难以置信..！

# python - Django 模型 - 在不触及 lastmodified_at 的情况下更新属性

> ID：15881253
> 
> 赞同：3
> 
> 时间：2013-04-08T14:05:29.457
> 
> 标签：python, django, django-models, timestamp

我正在创建一个小型 wiki 应用程序并使用 lastmodified_at 属性 ( `auto_now`)。现在我想计算一下我的页面的浏览量。

我的第一个想法是在我的 wiki 文章对象中添加一个字段，并在`showArticle`调用视图时将其体现为一个。

不幸的是，这也会导致`lastmodified_at`更新。

是否有另一种可能性然后创建一个包含 article_id 和计数器的额外表或删除/重建我的`auto_now`属性？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:16:30.313

我很想有一个单独的模型来跟踪带有 FK 到您的文章模型的页面浏览量。

例如

```
class ArticleViewCount(model):
    counter = models.PositiveIntegerField()
    article = models.OneToOneField(Article) 
```

然后您可以使用文章相关字段从模板中调用页数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:15:49.983

已经有几个答案：

例如，不要直接使用 auto_now，在保存之前覆盖保存或更改字段的 auto_now 属性。

[暂时禁用 auto_now / auto_now_add](https://stackoverflow.com/questions/7499767/temporarily-disable-auto-now-auto-now-add)

如果您想保留 auto_now，我将提供另一种肮脏的方法：

```
class Temp(models.Model):
    test = models.CharField(max_length=255)       
    updated = models.DateTimeFeild(auto_now=True)

    def save_without_updated(self):
        self._meta.get_field("updated").auto_now = False
        # self.meta.auto_created = False
        self.save()
        # self.meta.auto_created = True
        self._meta.get_field("updated").auto_now = True 
```

# sql - 根据不同的字段将值与上一行的值进行比较

> ID：15881254
> 
> 赞同：1
> 
> 时间：2013-04-08T14:05:30.570
> 
> 标签：sql, sql-server, compare

我有 SQL，它输出日期时间戳行和状态更改标志（0 或 1）

我需要获取从第一个记录（标志为 0）到状态标志变为 1 的时间跨度，当标志仍为 1 时忽略记录，然后获取它变回 0 后的时间跨度直到最后的记录。状态改变标志可以在 0 和 1 之间翻转任意次数。

所以我需要能够将状态更改标志与前一行进行比较，并决定是否需要继续累积日期时间戳的差异。

我一直在研究写一个游标，但继续阅读游标是如何非常低效的。

希望这有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:17:04.680

```
DECLARE @test TABLE ([group] int,t DateTime,[status] bit)

INSERT INTO @test values (1,'20130101 11:11:11',0)
INSERT INTO @test values (1,'20130101 11:11:12',0)
INSERT INTO @test values (1,'20130101 11:11:13',0)
INSERT INTO @test values (1,'20130101 11:11:14',1)
INSERT INTO @test values (1,'20130101 11:11:15',1)
INSERT INTO @test values (1,'20130101 11:11:16',1)
INSERT INTO @test values (1,'20130101 11:11:17',0)
INSERT INTO @test values (1,'20130101 11:11:18',0)
INSERT INTO @test values (1,'20130101 11:11:19',0)

Select [Group],MIN(t)

,(Select MAX(t) from @test t2 where [status]=0 and t2.[group]=t.[group] and Exists(Select * from @test t3 where [status]=1 and t3.[group]=t.[group] and  t3.t<t2.t))
,DateDiff(ss,MIN(t)
,(Select MAX(t) from @test t2 where [status]=0 and t2.[group]=t.[group] and Exists(Select * from @test t3 where [status]=1 and t3.[group]=t.[group] and  t3.t<t2.t))
) as Seconds
from @test t where Status=0
group by [group] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:20:03.080

我认为这样的事情会奏效。但我可能需要更多关于表结构的信息

```
WITH FirstFlag(FlagType, FlagTime)
AS
(
    SELECT 
        FlagType
        , min(DateCreated) as FlagTime
    FROM TheTable
    WHERE Flag = 0
)
, SecondFlag(FlagTime1, FlagTime2)
AS
(
    SELECT 
        F.FlagTime as FlagTime
        , min(T.DateCreated) as FlagTime
    FROM TheTable as T
        INNER JOIN FirstFlag as F
            ON T.FlagType = F.FlagType
    WHERE Flag = 1
        AND T.DateCreated > F.FlagTime
)
SELECT datediff(min, FlagTime1, FlagTime2)
FROM SecondFlag 
```

# web-services - WSDL 中定义的多端口服务

> ID：15881256
> 
> 赞同：12
> 
> 时间：2013-04-08T14:05:34.367
> 
> 标签：web-services, soap, service, wsdl, port

一个不同的问题，与基本问题。在我的 WSDL 文件的末尾。

```
<wsdl:service name="Lighting">
    <wsdl:port name="SwitchPower" binding="tns:SwitchPower">
        <soap:address location="http://localhost:8080/Lighting/SwitchPower/" />
    </wsdl:port>
    <wsdl:port name="Dimming" binding="tns:Dimming">
        <soap:address location="http://localhost:8080/Lighting/Dimming/" />
    </wsdl:port>
</wsdl:service> 
```

具有两个端口的相同服务。这样对吗？

如果不是，规范的规则是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T14:46:42.060

是的。想象在现实生活中，这确实是可能的：

## 航运码头：多港口服务的理念

![在此处输入图像描述](https://i.stack.imgur.com/b9q9S.png)

[请参阅W3 WSDL 规范](http://www.w3.org/TR/wsdl#_services)的第 2.7 节。您可以看到 * 表示您可以在一个服务下拥有多个端口。实际上，服务*将一组相关的端口组合在一起*。不过有几点需要注意。

## W3 WSDL 规范的第 2.7 节

服务将一组相关的端口组合在一起：

```
<wsdl:definitions .... >
    <wsdl:service name="nmtoken"> *
        <wsdl:port .... />*
    </wsdl:service>
</wsdl:definitions> 
```

name 属性在封闭的 WSDL 文档中定义的所有服务中提供唯一的名称。

服务中的端口具有以下关系：

*   没有一个端口相互通信（例如，一个端口的输出不是另一个端口的输入）。
*   如果一个服务有几个端口共享一个端口类型，但是使用不同的绑定或地址，那么这些端口是替代的。每个端口都提供语义等效的行为（在每个绑定强加的传输和消息格式限制内）。这允许 WSDL 文档的使用者根据某些标准（协议、距离等）选择要与之通信的特定端口。
*   通过检查其端口，我们可以确定服务的端口类型。这允许 WSDL 文档的使用者根据它是否支持多种端口类型来确定它是否希望与特定服务进行通信。如果端口类型的操作之间存在某种隐含关系，并且必须存在整个端口类型集才能完成特定任务，这将很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-08T01:25:55.913

*   每个端口引用唯一绑定（可以有多个绑定）
*   每个绑定都可以引用单个 portType
*   多个绑定可以引用相同的端口类型或不同的端口类型（可以有多个端口类型）
*   因此，当我们有多个 portTypes 时，我们通过引用绑定来发布多个端口。
    [![在此处输入图像描述](https://i.stack.imgur.com/7UrTP.jpg)](https://i.stack.imgur.com/7UrTP.jpg)

[图片礼貌](http://slideplayer.com/5342846/17/images/47/WSDL+Structure+portType+Multiple+bindings+per+portType%3A+Ports.jpg)

# sql - 查找在给定表中索引的列

> ID：15881257
> 
> 赞同：1
> 
> 时间：2013-04-08T14:05:39.730
> 
> 标签：sql, oracle, indexing

我试图找出为给定表创建索引的列。我正在使用以下查询来了解表的索引名称：

```
select index_name from dba_indexes where table_name='TABLE_NAME'; 
```

请帮助我如何获取创建索引的列。如何知道索引是唯一索引还是非唯一索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:07:28.333

使用`all_ind_columns`：

手册中的更多详细信息：http: [//docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1100.htm#i1577532](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1100.htm#i1577532)

# node.js - 如何将 Git 哈希写入（节点的）package.json？

> ID：15881261
> 
> 赞同：12
> 
> 时间：2013-04-08T14:05:47.957
> 
> 标签：node.js, package, development-environment, gruntjs

有没有办法使用 git 的 HEAD 哈希自动更新 package.json 的版本号（ [https://npmjs.org/doc/json.html ）？](https://npmjs.org/doc/json.html)我想`version: 1.0.0+rev82e4b91cfe42cd86e9453b4987b9cc446566de6`在项目的 package.json 文件中有类似的东西。加号之前的所有内容都是手动设置的，并且每次我提交某些内容时都会更新哈希值。

这可能吗？我在这个话题上找不到任何东西：-/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-09T19:54:00.920

看来这可以在没有插件的情况下直接完成。`npm version $(git describe)`将从`git describe`package.json 中获取值并更新版本的值。

（我目前使用的是 npm 3.10 版。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:13:58.610

其中一部分可以解决，`git-describe`实际上有一个 grunt 插件可以为您包装它（[https://github.com/mikaelkaron/grunt-git-describe/](https://github.com/mikaelkaron/grunt-git-describe/)）。

第二部分你必须手动完成（现在），但我现在实际上有一个类似的问题，所以我可以尝试为你（和我自己）开发一个 grunt 插件。

*完全公开，我是`grunt-git-describe`上面的作者。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T23:07:29.993

`git rev-parse HEAD`将写出对当前头分支的最后一次提交，然后您可以在运行构建时将其附加到包中的版本号。

有许多`git rev-xxx`命令可能对您可能想要记录的任何其他内容有用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-08T14:38:49.527

Automatically at what point? Possibilities are:

1.  Update the version field every time you run a build from a machine environment
2.  Update the version field every time you run any build.
3.  Update the version field in a git hook to keep in sync. Personally, I'd be nervous about a hook that performs a change when something changes. This strategy is highest risk, highest reward.

If you go with the first or second approach, it depends of course on what build tool you use. If you use grunt, see about a grunt plugin. I can't find any grunt plugins that do what you're asking for, but you can create one fairly easily.

[http://gruntjs.com/plugins](http://gruntjs.com/plugins)

If you do end up creating one, let me know as I am also in need of a similar process :)

In my case, I am using SVN, but want the same pattern. I want to put the SVN revision number as my build number.

My recommendation is to leave the build number blank in the file that is checked in and have your build environment do a git clone for a new build and update the build number. Then built packages always have something about them indicating the git commit they came from.

I think that for development, you don't really need it because you can always ask git which version you have checked out. There is a grunt-git plugin which you could maybe use to figure out the version in dev. (maybe git show?)

# mysql - Mysql等效于“ne”或不等于perl

> ID：15881262
> 
> 赞同：-6
> 
> 时间：2013-04-08T14:05:49.057
> 
> 标签：mysql, perl

新手来了 对不起，谢谢。我需要找到不等于“Ok”的记录。此代码不起作用。

是否有与 Perl 等效的 MySql `ne`？

```
use DBI;

SELECT * FROM people WHERE status ne 'Ok' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:06:37.470

有两个运算符

```
SELECT * FROM people WHERE status != 'Ok' 
```

和

```
SELECT * FROM people WHERE status <> 'Ok' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:06:55.347

mysql 中的 ne 运算符是 !=

```
SELECT * FROM people WHERE status != 'Ok' 
```

# java - Zookeeper 不清理已删除的节点

> ID：15881265
> 
> 赞同：1
> 
> 时间：2013-04-08T14:05:53.813
> 
> 标签：java, out-of-memory, apache-zookeeper

我做了一些测试，似乎 zookeeper 没有清理最后 500 个删除的节点。

在我的测试中，我创建了节点并在创建后删除了每个节点。我重复了这个步骤 1000 次，然后触发了一个完整的 gc。这些是结果

> ```
> Creating 1000 Nodes and deleting 1000 Nodes and each node has...
>  ...1000kb data = 529MB heap used after FullGC
>  ...500kb  data = 281MB heap used after FullGC
>  ...256kb  data = 140MB heap used after FullGC
>  ...128kb  data =  68MB heap used after FullGC 
> ```

如果我用每个 1000kb 数据创建 1000 个节点，然后删除这些节点，然后用 128kb 数据创建 1000 个节点并再次删除节点，则使用 68MB 堆空间。

所以看起来 Zookeeper 缓存/没有清理最后 500 个删除的节点。

这是一个错误还是有配置参数来改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:23:18.500

ZKDatabase.committedLog 保留了过去的 500 个事务。所以这就是行为的原因。此设置不可配置，但存在一个[未解决的问题](https://issues.apache.org/jira/browse/ZOOKEEPER-1687)。

# clojure - Clojure 模块依赖项

> ID：15881266
> 
> 赞同：5
> 
> 时间：2013-04-08T14:06:02.667
> 
> 标签：clojure, dependency-management, modularity

我正在尝试在 clojure 中创建一个模块化应用程序。

假设我们有一个博客引擎，它由两个模块组成，例如 - 数据库模块和文章模块（存储博客文章的东西），所有模块都带有一些配置参数。

所以 - 文章模块依赖于存储，并且拥有文章模块和数据库模块的两个实例（具有不同的参数）允许我们在两个不同的数据库中托管两个不同的博客。

我试图实现这一点，为每个已初始化的模块即时创建新的命名空间，并在这个命名空间中定义具有部分应用参数的函数。但我认为这种方法是某种黑客行为。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:36:10.630

“模块”是一个名词，就像史蒂夫·耶格的“[名词王国”一样。](http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html)

尽可能地坚持参数（动词）的无副作用或纯函数，除了抽象的最顶层。您可以随心所欲地组织这些功能。在最顶层，您将拥有一些应用程序状态，有很多方法可以管理它，但我使用最多的一种是将这些顶级服务隐藏在 clojure 协议下，然后在 clojure 记录中实现它（可能包含对数据库连接或类似的引用）。

这种方法最大限度地提高了灵活性，并防止您将自己写到角落里。它类似于 java 的依赖注入。Stuart Sierra 最近在 Clojure/West 2013 上就这些主题做了一场精彩的演讲，但视频尚未发布。

请注意与您的方法的区别。您需要将对象的管理和解析与其生命周期分开。将它们绑定到命名空间可以快速访问，但这意味着您作为使用该代码的客户端编写的任何函数现在都在访问全局状态。使用协议，您可以将全局状态的实现细节与访问接口分开。

如果你需要一个激励性的例子来说明为什么这很有用，请考虑一下，你将如何拦截对全局可访问的服务的所有访问？好吧，您将下推完整实现并将入口点作为包装函数，而不是将相关细节推到更靠近客户端代码的位置。如果您想要代码的某些客户端而不是其他客户端的某些行为怎么办？现在你被困住了。这只是预期先发制人地做出那些不可避免的权衡，让你的生活更轻松。

# python - Flask-Mail - 连接被拒绝 [Errno 111]

> ID：15881277
> 
> 赞同：6
> 
> 时间：2013-04-08T14:06:35.323
> 
> 标签：python, python-2.7, flask, flask-mail

我在小型 Web 应用程序中使用 Flask-Mail。由于应用程序很小，我使用 gmail 发送电子邮件。完成文档中的所有步骤后，当我运行应用程序来测试电子邮件功能时。我不断得到一个`error: [Errno 111] Connection refused`.

这是我的电子邮件设置`config.py`：

```
MAIL_SERVER = 'smtp.gmail.com'
MAIL_PORT = 587
MAIL_USE_TLS = True
MAIL_USERNAME = 'some_user@gmail.com'
MAIL_PASSWORD = 'some_password'
DEFAULT_MAIL_SENDER = 'some_user@gmail.com' 
```

这是我用来测试 Flask-Mail 的视图`views.py`：

```
@app.route('/', methods=['POST', 'GET'])
def index():

    form = ContactForm()

    if request.method == 'POST':
        if form.validate():

            msg = Message('New Msg - Test',
                          recipients=['some_user@gmail.com'])

            msg.body = 'name=%s, email=%s \n Message:%s' % (form.name.data,
                                                            form.email.data,
                                                            form.message.data)

            mail.send(msg)

            flash('Message sent, I will contact you soon! Thanks')

            return redirect(url_for('index'))

    return render_template('index.html', form=form) 
```

我测试了是否有这样的防火墙问题：

```
In [2]: import socket

In [3]: sock = socket.socket()

In [4]: sock.connect(("smtp.gmail.com", 587))

In [5]: sock.send("EHLO\n")
Out[5]: 5

In [6]: sock.recv(1024)
Out[6]: '220 mx.google.com ESMTP b9sm23940776vee.3 - gsmtp\r\n250-mx.google.com at your service, [108.21.9.10]\r\n250-SIZE 35882577\r\n250-8BITMIME\r\n250-STARTTLS\r\n250 ENHANCEDSTATUSCODES\r\n' 
```

我不太确定是什么导致连接被拒绝。如果有人能在正确的方向上推动我如何进一步测试或指出我犯错的地方，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:41:56.617

I am using gmail SMTP for Flask-Mail but with the following settings. I use SSL with port 465\. May be this will work for you ?

```
MAIL_SERVER = 'smtp.gmail.com'
MAIL_PORT = 465
MAIL_USE_TLS = False
MAIL_USE_SSL = True
MAIL_USERNAME = 'some_user@gmail.com'
MAIL_PASSWORD = 'some_password'
DEFAULT_MAIL_SENDER = 'some_user@gmail.com' 
```

# vba - 无效的操作设置结果集对象 VBA

> ID：15881278
> 
> 赞同：1
> 
> 时间：2013-04-08T14:06:35.710
> 
> 标签：vba, runtime-error, invalidoperationexception

嗨也许有人可以在这里启发我。使用 VBA 代码，我想从查询中检查零记录计数，现在它在我之前添加的代码中失败了。下面的代码显示设置：

```
Sub MySub()

Dim db As DAO.Database
Set db = CurrentDb()
Dim qdf As DAO.QueryDef
Dim sqlQry As String
Dim rst As DAO.Recordset

sqlQry = "My Query String"

If DLookup("Name", "MSysObjects", "Name= 'QueryName1'") <> "" Then
Set qdf = CurrentDb.QueryDefs("QueryName1")
qdf.SQL = sqlQry
Else
Set qdf = CurrentDb.CreateQueryDef("QueryName1", sqlQry)
End If

Set rst = db.OpenRecordset(qdf.Name) << FAILS HERE
If rst.RecordCount <> 0 Then
DoCmd.OpenQuery (qdf.Name)
Else
MsgBox "no data returned"
Exit Sub
End If

Set qdf = Nothing
Set db = Nothing
End Sub 
```

它在上面显示的行上失败，运行“时间错误 3219 无效操作”。我唯一改变的是为代码的另一部分而不是这部分添加了业务对象的对象引用。它之前运行良好，只有其他更改是在此代码下方开始新的子代码，但在调试模式下仅运行此位代码（而不是整个模块）时出现错误。

# git - 如果消息无效，则让 gerrit 中止提交推送

> ID：15881282
> 
> 赞同：1
> 
> 时间：2013-04-08T14:06:39.573
> 
> 标签：git, githooks, gerrit

我正在使用 gerrit 2.5.1。

如果用户的消息不符合公司强制的格式，我想中止用户的提交推送。

所以，想象一下我希望用户只能使用格式如下的消息推送提交：

```
[#ISSUENUMBER] Issue Title

Something about the issue

Fix #ISSUENUMBER @5h 
```

我已经有一个验证这种格式的脚本，但我不知道如何在 gerrit 中添加这个钩子，以及如何从被推送的提交中获取正文消息。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:45:47.433

查看[ref-update](https://gerrit-review.googlesource.com/Documentation/config-hooks.html#_ref_update)钩子或[提交验证器插件](https://gerrit.googlesource.com/)（需要即将发布的 Gerrit 2.6）。

# c# - WPF Grid 不会调整大小以适应嵌套内容

> ID：15881283
> 
> 赞同：0
> 
> 时间：2013-04-08T14:06:41.460
> 
> 标签：c#, wpf

我以编程方式将网格插入到网格中，对于第一个嵌套，它将完美运行。但是从那一刻起，它就会停止调整大小以适应内容。

我覆盖的唯一默认值是 MinWidth 和 MinHeight。

编辑：每次创建网格时，我都会向每个单元格添加一个堆栈面板（内部带有标签）。然后我在该堆栈面板中插入一个嵌套网格。

![在此处输入图像描述](https://i.stack.imgur.com/8VThh.png)

如上所示，标有绿色的网格不会影响 mainGrid 的大小。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:09:00.597

显然网格限制了它的最大尺寸，我不知道出于什么目的。

希望以后不会对我反击。但现在，我所要做的就是创建和使用具有无限“调整空间”的自定义网格。

```
public class CustomGrid : Grid
{
    protected override Size MeasureOverride(Size availableSize)
    {
        availableSize = new Size(availableSize.Width + double.MaxValue, availableSize.Height + double.MaxValue);
        return base.MeasureOverride(availableSize);
    }
} 
```

这个问题可能有更合法的解决方案，但目前我只需要这些。

# wcf - 基于性能的 ASP.NET Web API 和 RESTful WCF 之间的区别

> ID：15881284
> 
> 赞同：0
> 
> 时间：2013-04-08T14:06:42.573
> 
> 标签：wcf, rest, asp.net-web-api

ASP.NET Web API 和 RESTful WCF 有什么区别。哪个服务能够处理双向巨大的流量，消耗更少的数据和服务器的效率/性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:27:59.793

If you are well versed with MVC concepts, go for Asp.Net web Api, else use the REST WCF Http services. Performance wise both doesnt have any differences.

# http-status-codes - 对于缺少的必需参数，返回的正确 HttpStatusCode 是什么？

> ID：15881292
> 
> 赞同：4
> 
> 时间：2013-04-08T14:06:54.683
> 
> 标签：http-status-codes, asp.net-web-api

我正在构建一个 Web API 方法来检查名称是否在该类型中是唯一的，并且需要确保给出 name 参数。返回的正确状态码是什么？

```
public HttpResponseMessage GetIsNameUnique(string name)
{
  if (string.IsNullOrWhiteSpace(layoutName))
  {
      throw new HttpResponseException(new HttpResponseMessage { 
        StatusCode = HttpStatusCode.{What Goes Here?},
         Content = new StringContent("The name is required.")
      });
  }
  // more code here to check....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:00:42.317

400，或者如果 name 参数是 URI 的一部分，那么您可以返回 404。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:19:40.423

编辑：400 似乎是最好的答案，而不是 412，我在下面提到。

在查看此问题评论中 codebox 提供的链接后，我将使用 412，PreconditionFailed。来自 System.Net.HttpStatusCode 文件

```
// Summary:
//     Equivalent to HTTP status 412\. System.Net.HttpStatusCode.PreconditionFailed
//     indicates that a condition set for this request failed, and the request cannot
//     be carried out. Conditions are set with conditional request headers like
//     If-Match, If-None-Match, or If-Unmodified-Since. 
```

# php - 使用php的高CPU消耗Mysql请求

> ID：15881295
> 
> 赞同：1
> 
> 时间：2013-04-08T14:06:58.223
> 
> 标签：php, mysql, cpu

我目前正在为 iOS 应用程序测试我所有的 php 服务。其中一个似乎非常快地消耗了我所有的 3 个 cpu 核心（而其他没有）。该服务会获取最接近用户实际位置的 51 个“气泡”（bulles）。这是我的 php：

```
$sql="SELECT *, get_distance('$latitude','$longitude',latitude,longitude) AS proximite
FROM bulles INNER JOIN
(SELECT userId, userFirstName, userLastName, userName, userPictureUrl from user) AS users
ON bulles.auteur = users.userId
INNER JOIN interests
ON bulles.interet1 = interests.id
WHERE auteur = '$userID'
OR auteur
IN (
    SELECT followedId
    FROM following
    WHERE followerId = '$userID'
)
ORDER BY proximite
LIMIT 51"; 
```

这是我存储的函数“get_distance”：

```
FUNCTION `get_distance`(lat1 DOUBLE, lng1 DOUBLE, lat2 DOUBLE, lng2 DOUBLE) RETURNS double
BEGIN
    DECLARE rlo1 DOUBLE;
    DECLARE rla1 DOUBLE;
    DECLARE rlo2 DOUBLE;
    DECLARE rla2 DOUBLE;
    DECLARE dlo DOUBLE;
    DECLARE dla DOUBLE;
    DECLARE a DOUBLE;

    SET rlo1 = RADIANS(lng1);
    SET rla1 = RADIANS(lat1);
    SET rlo2 = RADIANS(lng2);
    SET rla2 = RADIANS(lat2);
    SET dlo = (rlo2 - rlo1) / 2;
    SET dla = (rla2 - rla1) / 2;
    SET a = SIN(dla) * SIN(dla) + COS(rla1) * COS(rla2) * SIN(dlo) * SIN(dlo);
    RETURN (6378137 * 2 * ATAN2(SQRT(a), SQRT(1 - a)));
END 
```

每秒 10 个此服务请求会使 cpu 饱和。我以前在使用 INNER JOIN 语句时遇到过问题，所以它可能来自那里？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:12:44.773

MySQL 'IN' 非常低效（虽然是一个很好的结构），因为查询是针对每一行重新处理的。IE

```
IN (
    SELECT followedId
    FROM following
    WHERE followerId = '$userID'
) 
```

将其替换为 FROM 子句中的表。例如：

```
...FROM ( SELECT followedId FROM following WHERE followerId = '$userID') AS whatever 
(then in the WHERE put ) OR auteur = whatever.followedId... 
```

干杯。

# c# - BackgroundWOrker 无效的跨线程访问

> ID：15881301
> 
> 赞同：-6
> 
> 时间：2013-04-08T14:07:26.363
> 
> 标签：c#, multithreading, silverlight, windows-phone-7, xaml

我尝试在另一个线程上添加加载数据模型并将项目加载到列表框，因为将 50 个项目加载到列表框需要很长时间（大约 5 秒）。

我对 BackgroundWorker 有问题，它显示错误 Invalid cross-thread access

他是 Inbox.xaml 的代码

```
 public Inbox()
    {
        InitializeComponent();

        DataContext = App.ViewModel;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        ProgressIndicator progress = new ProgressIndicator
        {
            IsVisible = true,
            IsIndeterminate = true,
            Text = "Načítání"
        };

        SystemTray.SetProgressIndicator(this, progress);
        SystemTray.IsVisible = true;

        BackgroundWorker backgroundWorker = new BackgroundWorker();
        backgroundWorker.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork);
        backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker_RunWorkerCompleted);

        backgroundWorker.RunWorkerAsync();
    }

    private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        LoadData();
    }

    void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            MessageBox.Show(e.Error.Message);
        }
        else
        {
            SystemTray.IsVisible = false;
        }
    }

    private void LoadData()
    {
        try
        {
            (this.DataContext as MainViewModel).LoadInboxData();
        }
        finally
        {
            TasksListBox.ItemsSource = (this.DataContext as MainViewModel).Tasks;
        }
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:12:50.077

BackgroundWorker.DoWork 处理程序在后台非 ui 线程上运行。在您的示例 LoadData() 方法在后台非 ui 线程上运行，并且您在该方法中设置 ListBox 的 ItemSource 属性。

您应该尝试将该代码移动到您的 BackgroundWorkder.RunWorkerCompleted 处理程序，因为此处理程序在 UI 线程上运行。

您的代码可以像下面这样重写以避免错误：

```
void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Error != null)
    {
        MessageBox.Show(e.Error.Message);
    }
    else
    {
        SystemTray.IsVisible = false;
    TasksListBox.ItemsSource = (this.DataContext as MainViewModel).Tasks;
    }
}

private void LoadData()
{
    (this.DataContext as MainViewModel).LoadInboxData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:11:52.903

您正在尝试从非 UI 线程更新 UI，因此您会遇到异常。

只有 UI 线程可以执行 UI 更新，您需要使用`Dispatcher`才能从非 UI 线程更新 UI。

```
Dispatcher.BeginInvoke(() =>
{
   // Update UI in here as this part will run on the UI thread.
}); 
```

请参阅：http: [//msdn.microsoft.com/en-gb/library/system.windows.threading.dispatcher.begininvoke.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.threading.dispatcher.begininvoke.aspx)

# backbone.js - 在服务器端有效地处理骨干 pushState 路由？

> ID：15881302
> 
> 赞同：0
> 
> 时间：2013-04-08T14:07:26.443
> 
> 标签：backbone.js, pushstate

我有 Backbone 与 pushState 一起工作。非常好，但现在我明白我应该支持从主干使用的任何路由加载应用程序。例如，如果有人手动输入一个 backboen 路由到他们的浏览器，服务器应该响应并呈现页面，然后让主干接管。

我想知道，处理它的最有效方法是什么？Backbone 还建议在初始页面加载时引导数据以减少 ajax 请求。我应该只尝试引导该特定视图所需的数据，还是应该尝试引导基本集合（例如：用户、设置、文档等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:06:15.213

对于您问题的第一部分，您可以只指定一个回调路由（匹配所有内容并提供主页），这样用户就永远不会收到 404（尽管在开发应用程序时不要使用它，这可能会给您带来一些困难如果您在调用服务器时遇到真正的 404，请对其进行调试）。

对于第二个，我会说这取决于您需要的数据量。我个人正在开发一个模块化应用程序，不幸的是不能真正引导任何东西。我会说这只是一些建议。

# cuda - 是否可以在 Cuda 设备中查询活动块号的数量？

> ID：15881309
> 
> 赞同：0
> 
> 时间：2013-04-08T14:07:46.207
> 
> 标签：cuda

我想了解配置为在设备内核中启动以供运行时的块数。有什么功能或方法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:27:18.843

我无法用一行找到确切的数字，但`gridDim.x gridDim.y ...`给出了我想要的，如果你知道你正在使用什么维度的内核，你可能会通过这些值得到数字。

# android - 在 Android 中以编程方式合并 xml 布局

> ID：15881317
> 
> 赞同：3
> 
> 时间：2013-04-08T14:08:06.977
> 
> 标签：android, xml, android-layout, android-inflate

我已经在 Android 中以编程方式构建了一个布局（树视图），现在我想在构建的视图中添加一个顶栏（topbar.xml）。

所以我需要的是而不是：

```
setContentView(scroll) 
```

就像是：

```
inflateInMyViewCalledScroll(topbar.xml)
setContentView(scroll) 
```

感谢您的建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T14:09:30.860

`topbar.xml`使用膨胀`LayoutInflater`，将结果放入`scroll`：

```
getLayoutInflater().inflate(R.layout.topbar, scroll); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T14:24:50.770

ScrollView 只能有一个直接子级。

所以你必须做这样的事情：

```
<ScrollView>
    <LinearLayout android:id="@+id/foo" android:orientation="vertical">
        <!--  youll add topbar here, programmatically -->
        <other things/>
    </LinearLayout/>
</ScrollView> 
```

然后在运行时，你会膨胀 topbar

```
View topbar = getLayoutInflater().inflate(R.layout.topbar, null); 
```

并将其添加为第一个索引`foo`

```
foo.addView(topbar, 0); 
```

# jqgrid - ember.js 和 Jqgrid 的结合

> ID：15881327
> 
> 赞同：1
> 
> 时间：2013-04-08T14:08:32.817
> 
> 标签：jqgrid, ember.js

我正在尝试使用 ember.js 构建一个 Jqgrid 组件。是否有任何现有的解决方案，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:23:28.373

至于 jQuery 插件，最简单的解决方案可能是使用视图的`didInsertElement`钩子手动管理视图的内容：http: [//jsbin.com/opobeg/1/edit](http://jsbin.com/opobeg/1/edit)

一般的想法是使用 访问视图的元素`this.$()`，它返回一个 jQuery 对象。不要忘记拆除事件侦听器等。您附加在`willDestroyElement`挂钩中！

[Yehuda 的文章](http://yehudakatz.com/2011/06/11/using-sproutcore-2-0-with-jquery-ui/)很好地描述了这种机制。虽然这篇文章已经过时了（仍然指的是 SproutCore 2.0），但从那时起基本思想并没有太大变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:29:21.800

我们以[https://github.com/Addepar/ember-table](https://github.com/Addepar/ember-table)为基础做了很多很酷的事情。

# interpolation - 双三次插值中的“t”是什么？

> ID：15881329
> 
> 赞同：2
> 
> 时间：2013-04-08T14:08:42.033
> 
> 标签：interpolation, bicubic

我正在阅读[维基百科](http://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm)上的双三次插值。我遇到了`t`未定义的变量。

方程是：

![在此处输入图像描述](https://i.stack.imgur.com/t5xtC.png)

谁能告诉这个变量的含义以及它的通常值是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:20:03.710

t 是 0 到 1 之间的任意数字。

p(0) 是曲线的起点，p(1) 是一维的终点。

例如，通过选择足够小的 dt，您可以绘制这样的平滑曲线

```
dt = 0.01;
for(var t = 0; t < 1 ; t += dt)
{
   draw( p(t) );
} 
```

# grep - 无法使 grep 搜索大写字母可靠地工作

> ID：15881330
> 
> 赞同：1
> 
> 时间：2013-04-08T14:08:42.740
> 
> 标签：grep

我有几个大型文本文件，我想对其中的数千条记录进行 grep，这些记录在每条记录的 1 行上都有一个字符串，上面写着“1 name userabc.db”或“1 name xy040101.db”或“1 name abcdfr。 db”或“1 名称 efgh.db”例如。

字符串“userabc.db”等可以在此名称中包含大写字母，如 USERABC.DB、Userabc.db 或 userAbc.db，位于 .db 文件名称中的任何位置。

所以我需要能够在每条记录中搜索并识别这条线，如果有的话，这条线的任何地方都有大写字母。

当我使用 "grep '[1 name ][AZ] ./store.txt" 没有双引号时，我发现：

“1 名称 USERxxx.db”和“1 名称 Xy040101.DB”和“1 名称 Abcdfr.db”和“1 名称 EFGH.DB”，但当大写字母或多个字母从 . db 文件名在有问题的行中。

底线是，当这些字母位于 .db 文件名称中的任何位置时，我需要能够找到所有具有大写字母或多个字母的行，而不仅仅是在开头或所有字母都是大写字母时。

这可以做到吗？也许用 sed 或 awk 做得更好？

谢谢，鲍勃·佩雷斯 (bperez@novell.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:22:00.767

所有你需要的是：

```
grep "1 name .*[A-Z].*" ./store.txt 
```

`.*`将匹配任何字符任意次数。

# ruby - 什么是 osx_brew，我可以将它安装在我的 ubuntu 机器中吗？

> ID：15881331
> 
> 赞同：0
> 
> 时间：2013-04-08T14:08:47.133
> 
> 标签：ruby, macos, rvm

我已经尝试了很多尝试来纠正 ruby​​ 版本的问题。在某处之间，我在我的机器上安装了 osx_brew。其实我不知道我为什么要安装这个。经过短暂的谷歌搜索后，我发现 osx_brew 仅适用于 mac os。我不知道这是否正确。无论如何，当我尝试安装时，`rvm requirements`我都会收到类似的错误

```
Installing requirements for osx_brew, might require sudo password.
Already up-to-date.
Installing required packages: autoconf, automake, libtool, pkg-config, apple-gcc42, libyaml, readline, libxml2, libxslt, libksba, openssl, sqlite...
Error running 'requirements_brew_libs_install autoconf automake libtool pkg-config apple-gcc42 libyaml readline libxml2 libxslt libksba openssl sqlite',
please read /home/anoop/.rvm/log/package_install_autoconf_automake_libtool_pkg-config_apple-gcc42_libyaml_readline_libxml2_libxslt_libksba_openssl_sqlite.log
There were package installation errors, make sure to read the log.
Check Homebrew requirements https://github.com/mxcl/homebrew/wiki/Installation 
```

不知道是不是因为这个问题`homebrew`。

另外，当我尝试命令时`rvm autolibs status`

它向我展示了

```
---
value: osx_brew
number: 4
runner: osx_brew
description: Allow RVM to use package manager if found, install missing dependencies, install package manager (only OS X). 
```

它说只适用于 osx_homebrew。如果是，我在 rvm ruby​​ 中工作时是否需要安装，你能告诉我这样做的目的吗？如果我不需要这个，如何在我的 ubuntu 系统中删除它？

# jquery-ui - jQuery-JTable：为行添加点击事件？

> ID：15881334
> 
> 赞同：11
> 
> 时间：2013-04-08T14:08:56.027
> 
> 标签：jquery-ui, jquery, spring-mvc, jquery-jtable

我必须按照代码来显示我的用户表，这是由 JTable 实现的。

```
<script type="text/javascript">
    $(document).ready(function() {              
        $('#userTableContainer').jtable({
            title: 'Users',
            selecting: false,
            paging: true,
            pageSize: 15,
            sorting: true,
            addRecordButton: false,
            saveUserPreferences: false,
            create: false,
            edit: false,
            actions: {
                listAction: 'user/getUsers.htm',
            },
            fields: {
                username: {
                    title: 'username'
                },
                firstname: {
                    title: 'firstname'
                },
                lastname: {
                    title: 'lastname'
                },
                company: {
                    title: 'company'
                }
             }
        });
        $('#userTableContainer').jtable('load');              
    });    

</script>

<div id="content">
    <h1>Users</h1>      

    <br />
    <div id="userTableContainer">

    </div>
</div> 
```

是否可以为每一行添加自定义操作事件？这样我就可以向我的控制器提交像“user/showUser.htm”这样的请求。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T12:57:54.530

这应该可以帮助您：

```
$('#userTableContainer').jtable({
    ....
    recordsLoaded: function(event, data) {
        $('.jtable-data-row').click(function() {
            var row_id = $(this).attr('data-record-key');
            alert('clicked row with id '+row_id);
        });
    }
}); 
```

# javascript - 根据 IP 范围加载不同的页面

> ID：15881338
> 
> 赞同：2
> 
> 时间：2013-04-08T14:09:15.937
> 
> 标签：javascript, apache, .htaccess, clientip

我想根据国家 IP 范围在索引页面中加载不同的内容。可能吗 ？

# php - Opencart 删除类别顶部菜单中的计数器

> ID：15881340
> 
> 赞同：1
> 
> 时间：2013-04-08T14:09:17.870
> 
> 标签：php, opencart

我有 Sellya 主题，我想删除类别顶部菜单中产品旁边的计数器。

见这里：[http ://twsgs.com](http://twsgs.com)

我在底部看到了一个解决方案，它看起来像这样[：](http://forum.opencart.com/viewtopic.php?f=20&t=34222)

```
First change:

Open category.php with your preferred editor on => catalog/controller/module/category.php

Go to the line 49: 'name' => $child['name'] . ' (' . $product_total . ')'
Change it to: 'name' => $child['name'],// . ' (' . $product_total . ')'

Go to line 71: 'name' => $category['name'] . ' (' . $product_total . ')', 
Change it to: 'name' => $category['name'],// . ' (' . $product_total . ')',

Second change:

Open category.php on => catalog/controller/product/category.php

Go to line 137: 'name' => $result['name'] . ' (' . $product_total . ')',
Change it to: 'name' => $result['name'],// . ' (' . $product_total . ')',

Third change:

Open category.php on => catalog/controller/common/header.php

Go to line: 'name' => $child['name'] . ' (' . $product_total . ')';
Change it to: 'name' => $child['name'];// . ' (' . $product_total . ')'; 
```

但它部分工作。

header.php（在控制器/公共目录）和 category.php（在控制器/产品目录）也有问题，所以我插入我的备份文件。

我的 Opencart 版本是 1.5.5.1

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T14:25:45.067

您可以在管理中编辑一个适当的选项：`System`-> `Settings`-> 编辑您的商店设置-> 选项卡`Options`并找到一个名为`Category product count`或类似的选项-> 检查值**否**并保存。

或者这个扩展可能有用：[Category Product Count Removal](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=8237)。

# ada - 从 Ada 中的文件中获取单词

> ID：15881341
> 
> 赞同：1
> 
> 时间：2013-04-08T14:09:23.130
> 
> 标签：ada

我有一个包含一些文本的文件的文件夹。我试图一个接一个地浏览所有文件，并计算我们在文本文件中看到每个单词的次数。我知道如何打开文件，但是一旦我进入文件，我不知道如何一个接一个地阅读每个单词，然后转到下一个单词。

如果有人有一些想法来指导我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:04:07.600

这是一种方法，我需要一些容器的游戏时间。考虑到多个文件，使用流仍然是解决问题的最佳方法。

* * *

**`Text_Search.ads`**

```
Pragma Ada_2012;
With
Ada.Containers.Indefinite_Ordered_Maps;

Package Text_Search  with Elaborate_Body is

Text : Constant String :=
  ASCII.HT &
  "We hold these truths to be self-evident, that all men are created " &
  "equal, that they are endowed by their Creator with certain unalienable "&
  "Rights, that among these are Life, Liberty and the pursuit of " &
  "Happiness.--That to secure these rights, Governments are instituted " &
  "among Men, deriving their just powers from the consent of the governed" &
  ", --That whenever any Form of Government becomes destructive of these " &
  "ends, it is the Right of the People to alter or to abolish it, and to " &
  "institute new Government, laying its foundation on such principles " &
  "and organizing its powers in such form, as to them shall seem most " &
  "likely to effect their Safety and Happiness. Prudence, indeed, will " &
  "dictate that Governments long established should not be changed for " &
  "light and transient causes; and accordingly all experience hath shewn, "&
  "that mankind are more disposed to suffer, while evils are sufferable, " &
  "than to right themselves by abolishing the forms to which they are " &
  "accustomed. But when a long train of abuses and usurpations, pursuing " &
  "invariably the same Object evinces a design to reduce them under " &
  "absolute Despotism, it is their right, it is their duty, to throw off " &
  "such Government, and to provide new Guards for their future security." &
  "now the necessity which constrains them to alter their former Systems " &
  "of Government. The history of the present King of Great Britain is a " &
  "history of repeated injuries and usurpations, all having in direct " &
  "object the establishment of an absolute Tyranny over these States. To " &
  "prove this, let Facts be submitted to a candid world.";

Package Word_List is New Ada.Containers.Indefinite_Ordered_Maps(
    Key_Type     => String,
    Element_Type => Positive
);

Function Create_Map( Words : String ) Return Word_List.Map;

Words : Word_List.map;

End Text_Search; 
```

* * *

**`Text_Search.adb`**

```
Package Body Text_Search is

Function Create_Map( Words : String ) Return Word_List.Map is
    Delimiters : Array (Character) of Boolean:=
  ('.' | ' ' | '-' | ',' | ';' | ASCII.HT => True, Others => False);

    Index, Start, Stop : Positive := Words'First;

begin
    Return Result : Word_List.Map do
        Parse:
        loop
        Start:= Index;
        -- Ignore initial delimeters.
        while Delimiters(Words(Start)) loop
            Start:= 1+Start;
        end loop;

        Stop:= Start;
        while not Delimiters(Words(Stop)) loop
            Stop:= 1+Stop;
        end loop;

        declare
            -- Because we stop *on* a delimiter we mustn't include it.
            Subtype R is Positive Range Start..Stop-1;
            Substring : String renames Words(R);
        begin
            -- if it's there, increment; otherwise add it.
            if Result.Contains( Substring ) then
            Result(Substring):= 1 + Result(Substring);
            else
            Result.Include( Key => substring, New_Item => 1 );
            end if;
        end;

        Index:= Stop + 1;
        end loop parse;

    exception
        When Constraint_Error => null; -- we run until our index fails.
    end return;
    End Create_Map;

Begin
    Words:= Create_Map( Words => Text );
End Text_Search; 
```

* * *

**`Test.adb`**

```
Pragma Ada_2012;
Pragma Assertion_Policy( Check );

With
Text_Search,
Ada.Text_IO;

Procedure Test is

    Procedure Print_Word( Item : Text_Search.Word_List.Cursor ) is
    use Text_Search.Word_List;
    Word : String renames Key(Item);
    Word_Column : String(1..20) := (others => ' ');
    begin
    Word_Column(1..Word'Length+1):= Word & ':';
    Ada.Text_IO.Put_Line( Word_Column & Positive'Image(Element(Item)) );
    End Print_Word;

Begin
    Text_Search.Words.Iterate( Print_Word'Access );
End Test; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:23:33.220

使用 Get_Line 将文件一次一行读入一个字符串，然后将该行分解为单个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:56:58.273

如果您使用的是 Ada 2012，我建议您这样做：

1.  `With Ada.Containers.Indefinite_Ordered_Maps`.
2.  `String`用as key 和as Key实例化一个 Map `Positive`；
3.  抓住绳子；我会使用单个字符串或`stream`-处理。
4.  将输入文本分解成单词；如果您使用流，这可以即时完成。
5.  当你得到一个词（来自#4）时，如果它不存在，则将它添加到你的地图中，否则增加元素。
6.  完成后，只需运行一个`For Element of WORD_MAP Loop`打印字符串和计数的命令。

有几种方法可以处理 #3 中的字符串：

1.  通过递归函数调用 [终止于非单词字符或输入结尾] 完美调整大小。
2.  Unbounded_String
3.  Vector (Positive, Character) -- 附加有效字符，转换为数组 [string] 并在遇到无效字符 [或输入结尾] 时添加到映射 - 工作变量。
4.  `Not Null Access String`工作变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:30:36.407

您可以使用 Get_Line 将文件一次一行读入字符串，然后使用正则表达式：[Ada 中的正则表达式？](https://stackoverflow.com/questions/1665461/regular-expressions-in-ada)

# php - PHP中精炼ETA结果的日期差异

> ID：15881343
> 
> 赞同：0
> 
> 时间：2013-04-08T14:09:28.400
> 
> 标签：php, mysql, if-statement

如果 MySQL 的日期 = 2013-12-25 & $daydiff = 'any'，我正在尝试将我的输出设置为“<em>日期未确认”，如果 MySQL 日期 =“，则输出“<em>不可用” NULL” & 和 $daydiff = '任何'

**我的代码**

```
$ArrivalDate = $variants_data['ArrivalDate'];

$daydiff=floor((abs(strtotime(date("Y-m-d")) - strtotime($ArrivalDate))/(60*60*24)));

if ( $daydiff = ''  AND $ArrivalDate ='2013-12-25') {
    $ETA ='Date Not Confirmed';
}

elseif ( $daydiff = ''  AND $ArrivalDate ='NULL') {
    $ETA ='Not available';
}

elseif ( $daydiff < '0') {
    $ETA ='';
}
elseif ( $daydiff < '31' ) {
    $ETA ='Within 30 days';
}

elseif ( $daydiff > '31' ) {
    $ETA ='1 Month';
}

elseif ( $daydiff < '60' )  {
    $ETA ='2 Months';
}

elseif ( $daydiff < '90' ) {
    $ETA ='3 Months';
}

elseif ( $daydiff < '121' ) {
    $ETA ='4 Months';
}

elseif ( $daydiff < '152' ) {
    $ETA ='5 Months';
}

elseif ( $daydiff < '182' ) {
    $ETA ='6 Months';
}

elseif ( $daydiff < '213' ) {
    $ETA ='7 Months';
}

elseif ( $daydiff < '245' ) {
    $ETA ='8 Months';
}

elseif ( $daydiff < '274' ) {
    $ETA ='9 Months';
}

elseif ( $daydiff < '304' ) {
    $ETA ='10 Months';
}

elseif ( $daydiff < '334' ) {
    $ETA ='11 Months';
}

elseif ( $daydiff < '365' ) {
    $ETA ='12 Months';
}

else
{
$ETA ='Not Applicable';
} 
```

到目前为止，代码没有给我所需的结果，我什么时候出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:08:10.640

重读后，我注意到您使用赋值运算符 ( `=`) 进行初始比较。您应该改用相等运算符 ( `==`)。你的前几个条件应该是：

```
if ( $daydiff == '' && $ArrivalDate == '2013-12-25') {
    $ETA ='Date Not Confirmed';
} elseif ( $daydiff == '' && $ArrivalDate == 'NULL') {
    $ETA ='Not available';
} 
```

此外，可以`$ArrivalDate`设置为**字符串**值，`"NULL"`还是您的意思`NULL`是什么都没有？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:43:41.237

您可能通常会在 1 个月或更长时间内获得 1 个月的 ETA？尝试向您的 elseif 语句添加多个条件，因为您的第一个 elseif 语句将在 31 天后始终为真。所以像..

```
elseif ( $daydiff > 30 && $daydiff < 60 ) { // anything between 31 and 59 days is 1 month
$ETA ='1 Month';
}

elseif ( $daydiff > 60 && $daydiff < 90  )  { // anything between 61 and 89 days is 2 months
$ETA ='2 Months';
} 
```

等等...

# java - 如何正确打开和查询数据库？

> ID：15881349
> 
> 赞同：0
> 
> 时间：2013-04-08T14:09:33.243
> 
> 标签：java, android, sqlite

我有我的 nextQuestion 方法，每次我需要在我的游戏中提出新问题时，我都会调用它，使用导入的 sqlite 预填充数据库。我认为我做错了，因为每次我提出新问题时，我的数据库都会再次创建。但我试图将数据库的东西放在活动范围内，但我得到错误 mDbHelper.createDatabase(); 行（令牌 createDatabase 上的语法错误，此令牌后应有标识符）。这是我的 nextQuestion 方法，我第一次在 onCreate 方法中调用它，然后在每个用户回答之后调用。

```
public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getTestData(generateWhereClause());
            mAnsweredQuestions.add(c.getLong(0));

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            Collections.shuffle(labels);

            tacanOdg = c.getString(2);

        question.setText(c.getString(1));

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener);
            } 
```

如何正确执行此操作？

如果需要，这是我的助手。

```
public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "/data/data/rs.androidaplikacijekvizopstekulture/databases/"; 
private static String DB_NAME ="pitanja.sqlite";// Database name
private static SQLiteDatabase mDataBase; 
private final Context mContext;
private static final String KEY_ID = "_ID";
private static final String KEY_PITANJE = "PITANJE";
private static final String KEY_ODGOVOR = "ODGOVOR";
private static final String KEY_OPCIJA1 = "OPCIJA1";
private static final String KEY_OPCIJA2 = "OPCIJA2";
private static final String KEY_OPCIJA3 = "OPCIJA3";
private static final String TABLE_NAME = "tblPitanja";

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }
    */

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }

    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    public void onCreate(SQLiteDatabase arg0) {
        }

    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        Log.w("DataBaseHelper", "Upgrading database!!!!!");
          onCreate(arg0);

    }

} 
```

和测试适配器：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanja WHERE 1 = 1 " + whereClause + " ORDER BY RANDOM() LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

好的，我已经编辑了我的数据库助手类并添加了这段代码来检查 db 是否存在：

```
**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
public boolean checkDataBase(){

SQLiteDatabase checkDB = null;

try{
String myPath = DB_PATH + DB_NAME;
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}catch(SQLiteException e){

//database does't exist yet.

}

if(checkDB != null){

checkDB.close();

}

return checkDB != null ? true : false;
} 
```

然后在我的游戏活动中，我检查这个方法是返回真还是假，如果它是假的，我创建数据库：

```
TestAdapter mDbHelper = new TestAdapter(this);
        DataBaseHelper myDbHelper = new DataBaseHelper(this);

        if(!myDbHelper.checkDataBase()){
        mDbHelper.createDatabase();
        }

        try{

            mDbHelper.open();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:12:39.323

您不应该一直调用`createDatabase()`，而是将数据库创建放在 helper 中`onCreate()`。完成后，您还应该使用`close()`您的 db ( `mDbHelper.close()`)。

编辑：您似乎想基于存储在资产中的 sqlite 文件来初始化您的数据库？如果是这样，不要重新发明轮子，而是使用这个助手：[https ://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:14:48.910

这是您可以使用的 DataBaseHelper 的一个很好的示例：

> ```
> public class DataBaseHelper extends SQLiteOpenHelper{
> 
> //The Android's default system path of your application database.
> private static String DB_PATH = "/data/data/YOUR_PACKAGE/databases/";
> 
> private static String DB_NAME = "myDBName";
> 
> private SQLiteDatabase myDataBase;
> 
> private final Context myContext;
> 
> /**
>   * Constructor
>   * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
>   * @param context
>   */
> public DataBaseHelper(Context context) {
> 
> super(context, DB_NAME, null, 1);
> this.myContext = context;
> } 
> 
> /**
>   * Creates a empty database on the system and rewrites it with your own database.
>   * */
> public void createDataBase() throws IOException{
> 
> boolean dbExist = checkDataBase();
> 
> if(dbExist){
> //do nothing - database already exist
> }else{
> 
> //By calling this method and empty database will be created into the default system path
> //of your application so we are gonna be able to overwrite that database with our database.
> this.getReadableDatabase();
> 
> try {
> 
> copyDataBase();
> 
> } catch (IOException e) {
> 
> throw new Error("Error copying database");
> 
> }
> }
> 
> }
> 
> /**
>   * Check if the database already exist to avoid re-copying the file each time you open the application.
>   * @return true if it exists, false if it doesn't
>   */
> private boolean checkDataBase(){
> 
> SQLiteDatabase checkDB = null;
> 
> try{
> String myPath = DB_PATH + DB_NAME;
> checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
> 
> }catch(SQLiteException e){
> 
> //database does't exist yet.
> 
> }
> 
> if(checkDB != null){
> 
> checkDB.close();
> 
> }
> 
> return checkDB != null ? true : false;
> }
> 
> /**
>   * Copies your database from your local assets-folder to the just created empty database in the
>   * system folder, from where it can be accessed and handled.
>   * This is done by transfering bytestream.
>   * */
> private void copyDataBase() throws IOException{
> 
> //Open your local db as the input stream
> InputStream myInput = myContext.getAssets().open(DB_NAME);
> 
> // Path to the just created empty db
> String outFileName = DB_PATH + DB_NAME;
> 
> //Open the empty db as the output stream
> OutputStream myOutput = new FileOutputStream(outFileName);
> 
> //transfer bytes from the inputfile to the outputfile
> byte[] buffer = new byte[1024];
> int length;
> while ((length = myInput.read(buffer))>0){
> myOutput.write(buffer, 0, length);
> }
> 
> //Close the streams
> myOutput.flush();
> myOutput.close();
> myInput.close();
> 
> }
> 
> public void openDataBase() throws SQLException{
> 
> //Open the database
> String myPath = DB_PATH + DB_NAME;
> myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
> 
> }
> 
> @Override
> public synchronized void close() {
> 
> if(myDataBase != null)
> myDataBase.close();
> 
> super.close();
> 
> }
> 
> @Override
> public void onCreate(SQLiteDatabase db) {
> 
> }
> 
> @Override
> public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
> 
> }
> 
> // Add your public helper methods to access and get content from the database.
> // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
> // to you to create adapters for your views.
> 
> } 
> ```

然后打开数据库：

```
 ...

DataBaseHelper myDbHelper = new DataBaseHelper();
myDbHelper = new DataBaseHelper(this);

try {

myDbHelper.createDataBase();

} catch (IOException ioe) {

throw new Error("Unable to create database");

}

try {

myDbHelper.openDataBase();

}catch(SQLException sqle){

throw sqle;

}

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:34:11.427

尝试像链接中提供的那样设置您的 SQLiteHelper 类。

[http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial_database](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial_database)

然后在教程中是一个 CommentsDataSource 类，它相当于你的 TestAdapter 类。

# javascript - 使用点击功能获取地图上已添加的所有标记

> ID：15881351
> 
> 赞同：0
> 
> 时间：2013-04-08T14:09:40.580
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我想获取我添加到地图中的所有标记的坐标，但它只获取最后添加的标记。如何使每个添加的标记都显示在数组中？

```
google.maps.event.addListener(map, 'click', function (evt) {
    placeMarker(evt.latLng);
    coordinates = Array(evt.latLng + ';');
}); 
```

下面是它现在的打印方式：`["(38.28993659801203, -89.6484375);"]`. 我希望它打印出来`["38.28993659801203,-89.6484375;39.9434364619742,-91.64794921875;"]`。

演示：http: [//jsfiddle.net/edgren/CZ34s/](http://jsfiddle.net/edgren/CZ34s/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:11:22.100

`coordinates`在点击侦听器之外定义`push`新的坐标到数组上：

```
var coordinates = [];

google.maps.event.addListener(map, 'click', function (evt) {
    placeMarker(evt.latLng);
    coordinates.push(evt.latLng.toString());
}); 
```

或者，如果您想要一个长字符串，请创建`coordinates`一个字符串并将新值连接到其上：

```
var coordinates = "";

google.maps.event.addListener(map, 'click', function (evt) {
    placeMarker(evt.latLng);
    coordinates += evt.latLng.toString() + ";";
}); 
```

# bash - 获取已登录人员的列表

> ID：15881353
> 
> 赞同：2
> 
> 时间：2013-04-08T14:09:43.763
> 
> 标签：bash, shell, awk, cut, tail

我试图通过解析的输出来显示登录的所有用户的名字和姓氏`finger`。这是我尝试过的：

`finger | awk '{$1=$4=$5=$6=$7=$8=$9=$10=""; print}' | tail -n +2`

输出：

```
Fname Sname 
Fname Sname 
Fname Sname 
Fname Sname 
Fname Sname 
```

有什么方法可以使用更整洁的命令获得相同的输出？

谢谢。

感谢所有帮助和评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:12:14.753

我认为这就是你想要的：

```
finger | awk 'NR>1{print $2,$3}' 
```

这将只打印跳过标题的用户的名字和姓氏。只需打印您真正想要的列，不要尝试做相反的事情。

# ios - iOS中调度组操作完成后执行方法的延迟

> ID：15881356
> 
> 赞同：0
> 
> 时间：2013-04-08T14:09:50.600
> 
> 标签：ios, asynchronous, queue, grand-central-dispatch

在调度组中的队列完成执行后，我正在调用一个方法。但是，即使在所有队列都已执行之后，执行 final 方法也会有很大的延迟。谁能解释任何可能的原因？

```
dispatch_group_t group = dispatch_group_create();
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_group_async(group, queue,^{
     //some code             
}

dispatch_group_notify(group, queue,
    ^{
        [self allTasksDone];
    }); 
```

我的意思是，即使异步队列中的操作已经完成，allTask​​sDone 方法也会在延迟一段时间后执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:41:20.453

如何`-allTasksDone`工作？如果它通过更新用户界面元素与用户进行通信，它需要在主线程的上下文中运行，否则会出现相关的 UI 元素“延迟”——直到主运行它们才会更新循环恰好使它们更新。

试试这个：

```
dispatch_group_notify(group, dispatch_get_main_queue(),
^{
    [self allTasksDone];
}); 
```

事实上，您在`-allTasksDone`默认后台队列上运行，这与 AppKit 或 UIKit 不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:03:46.290

我建议使用另一种方法，尽管您肯定可以使用*调度组*来完成此操作。

```
// Important note: This does not work with global queues, but you can use target queues to direct your custom queue to one of your global queues if you need priorities.
dispatch_queue_t queue = dispatch_queue_create("com.mycompany.myqueue", DISPATCH_QUEUE_CONCURRENT);

dispatch_async(queue,^{
     //some code             
}

dispatch_barrier_async(queue,
    ^{
        // this executes when all previously dispatched blocks have finished.
        [self allTasksDone];
    }); 
```

# durandal - 加载应用程序时在 Durandal 路由器中动态添加/删除路由

> ID：15881357
> 
> 赞同：4
> 
> 时间：2013-04-08T14:09:50.373
> 
> 标签：durandal

我需要帮助在 Durandal 路由器中动态添加/删除路由。我想要的是在用户登录后，我将能够根据登录用户的类型添加或删除特定路线。

我试图从 visibleRoutes/allRoutes 数组中添加/删除路由......但从淘汰赛库中获得绑定异常......

我希望这将是常见的情况......但仍然找不到任何解决方案......请帮助我解决这个问题。

谢谢。瓦西姆

发表评论：

我尝试使用此功能来动态隐藏/显示路线...并且类似地尝试从 allRoutes[] 添加/删除路线...但随后在淘汰赛出价时出现异常

```
showHideRoute: function (url,show) {

        var routeFounded = false;
        var theRoute = null;
        $(allRoutes()).each(function (route) {

            if (url === this.url) {
                routeFounded = true;
                var rt = this;
                theRoute = rt;
                return false;
            }
        });

        if (routeFounded)
        {
            if (show)
            {
                visibleRoutes.push(theRoute);
            }
            else
            {
                visibleRoutes.remove(theRoute);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T01:59:23.490

Durandal 2.0 不再有该方法`visibleRoutes`。我发现以下内容对我有用。

```
router.reset();
router.map([
        { route: 'home', moduleId: 'home/index', title: 'Welcome', nav: true },
        { route: 'flickr', moduleId: 'flickr/index', title: '', nav: true }
])
.buildNavigationModel()
.mapUnknownRoutes('home/index', 'not-found'); 
```

这将删除所有以前的路线，如果您想维护当前路线，您可以尝试使用该`router.routes`属性来重建路线数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T04:49:49.110

在杜兰达尔 2.0.

您可以枚举路线以找到您希望显示/隐藏的路线。

然后改变：nav属性的值

然后运行 ​​buildNavigationModel();

这是一个例子：

```
// see if we need to show/hide 'flickr' in the routes
for (var index in router.routes) {
    var route = router.routes[index];
    if (route.route == 'flickr') {
         if (vm.UserDetail().ShowFlickr) { // got from ajax call
            // show the route
            route.nav = true;  // or 1 or 2 or 3 or 4; to have it at a specific order
         } else if (route.nav != false) {
            route.nav = false;
         }
         router.buildNavigationModel();
        break;
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:03:55.890

我有类似的要求。如果我是你，我会采取另一种方法。而不是在应用程序加载时添加/删除路由 - 从每个用户类型开始获取正确的路由。

两个选项，（我同时使用）1）有一个 json 服务为每个用户类型提供正确的路由，如果您需要“保护/模糊”路由，这种方法会很好......即我不希望引用的路由任何客户端资源。2) 更简单的解决方案参见[Durandal.js：更改每个区域的导航选项](https://stackoverflow.com/questions/16031226/durandal-js-change-navigation-options-per-area?answertab=active#tab-top) 您可以使用设置属性识别用户类型。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T13:21:46.330

我有一个类似的问题：首先，`router.visibleRoutes()`是一个可观察的数组。换句话说，当你改变它的值时，路由会自动更新。但是，此数组中的项目是*不可*观察的，因此要进行更改，您需要替换整个数组，而不仅仅是更改其中的单个项目。

所以，你所要做的就是在这个数组中找到你想要删除的项目，然后创建一个*没有这个项目的**新*数组，并设置到这个新数组。*`router.visibleRoutes()`*

 *例如，如果您发现它是第三项，那么一种方法是：

```
router.visibleRoutes(router.visibleRoutes().splice(2, 1)) 
```

请注意，它`splice()`返回一个新数组，其中删除了一个项目。这个新数组被放入`router.visibleRoutes`.*

# r - R、DMwR 包、SMOTE 功能不起作用

> ID：15881358
> 
> 赞同：5
> 
> 时间：2013-04-03T16:17:57.417
> 
> 标签：r, data-mining

我需要将 smote 算法应用于数据集，但无法使其正常工作。

例子：

```
x <- c(12,13,14,16,20,25,30,50,75,71)
y <- c(0,0,1,1,1,1,1,1,1,1)

frame <- data.frame(x,y)

library(DMwR)

smotedobs <- SMOTE(y~ ., frame, perc.over=300) 
```

这给出了以下错误：

```
Error in scale.default(T, T[i, ], ranges) : subscript out of bounds
In addition: Warning messages:
1: In FUN(newX[, i], ...) :
  no non-missing arguments to max; returning -Inf
2: In FUN(newX[, i], ...) : no non-missing arguments to min; returning Inf 
```

会给予任何帮助或提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-21T05:22:44.753

SMOTE 在 OS Win7 32 位有一个 bug，它假设参数 'form' 中的目标变量是数据集中的最后一列，下面的代码将解释

```
library(DMwR)
data(iris)
# data <- iris[, c(1, 2, 5)]  # SMOTE work
data <- iris[, c(2, 5, 1)]  # SMOTE bug
data$Species <- factor(ifelse(data$Species == "setosa", "rare", "common"))
head(data)
table(data$Species)
newData <- SMOTE(Species ~., data, perc.over=600, perc.under=100)
table(newData$Species) 
```

它将显示以下消息

> `colnames<-`( , value = c(" Sepal.Width `*tmp*`", "Species", "Sepal.Length" 中的错误：'names' 属性 [3] 必须与向量 [2] 的长度相同)

在Win7 64bit下，不会出现顺序问题！！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T11:08:25.483

我没有完整的答案。不过，我可以提供另一个线索：

如果将 'y' 转换为因子，SMOTE 将返回而不会出现错误 - 但合成的观测值具有 x 的 NA 值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-09T20:44:01.263

SMOTE 代码中有一个错误。它假设它正在输入的 y 函数已经是一个因子变量，目前它不处理非因子的边缘情况。确保在调用方法之前转换为一个因子。

# angularjs - ngRepeat 更新后的指令

> ID：15881362
> 
> 赞同：4
> 
> 时间：2013-04-08T14:10:01.887
> 
> 标签：angularjs, ng-repeat

当 ng-repeat 完成更新时，我在触发指令时遇到了一些 AngularJS 问题。我有三个命名数组，通过三个链接切换到，允许 ng-repeat 显示所选数组。我想在完成后触发一些代码，因为我打算设置一些元素属性供 D3 使用。

我已经尝试在我的指令中检查 scope.$last ，但这并不是在每个 ng-repeat 进程结束时调用的。如果某些数据保持不变，它可能不会将 scope.$last 设置为 true。

[http://plnkr.co/edit/hwmOlI6YrgS4H1C1h7k2?p=preview](http://plnkr.co/edit/hwmOlI6YrgS4H1C1h7k2?p=preview)

那么，当 ng-repeat 完成时，在指令中触发代码的最佳方式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T14:30:25.797

这是为您提供的解决方案。请注意，最后一次触发现在每次。

[http://plnkr.co/edit/xV1quqzorzxliS2shrP4?p=preview](http://plnkr.co/edit/xV1quqzorzxliS2shrP4?p=preview)

你只需要`$watch`$`last`变量，它就可以正常工作。这有助于在`scope`未创建但仅使用新值更新的情况下。您的指令被创建一次，如果重复变量之一只是更改值`ng-repeat`优化并仅更新值（而不是删除所有值并重新创建新值。）。在这种情况下，这`$scope.$last`将是一个更新的变量，而不是“创建”的东西。因此，您将需要`$watch`它。

# c# - 字符串中的正则表达式

> ID：15881366
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:10:21.060
> 
> 标签：c#, regex

我需要一些帮助来解决一个问题。

事实上，我通过十六进制代码搜索检查图像类型。

```
string JpgHex = "FF-D8-FF-E0-xx-xx-4A-46-49-46-00"; 
```

然后我有一个条件

```
string.StartsWith(pngHex). 
```

问题是我的“JpgHex”字符串中出现的“x”字符可以是我想要的任何字符。

我想我需要一个正则表达式来检查，但我不知道怎么做！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:18:14.683

就像我说的那样，我需要更好地了解您需要匹配的模式。

这里有些例子：

```
Regex rgx = 
       new Regex(@"^FF-D8-FF-E0-[a-zA-Z0-9]{2}-[a-zA-Z0-9]{2}-4A-46-49-46-00$");
rgx.IsMatch(pngHex); // is match will return a bool. 
```

我`[a-zA-Z0-9]{2}`用来表示一个字符的两个实例，大写字母、小写字母或数字。所以上面的正则表达式会匹配：

```
FF-D8-FF-E0-aa-zZ-4A-46-49-46-00
FF-D8-FF-E0-11-22-4A-46-49-46-00
.. etc 
```

1.  根据您的需要相应更改正则表达式，因此**只有**大写字母和数字您更改为`[A-Z0-9]`. `{2}`表示两次出现。
2.  `^`表示字符串应以 开头，表示字符串应以`FF`结尾。`$``00`

假设你只想匹配**两个**数字，所以你会使用`\d{2}`，整个事情看起来像这样：

```
Regex rgx = new Regex(@"^FF-D8-FF-E0-\d{2}-\d{2}-4A-46-49-46-00$");
rgx.IsMatch(pngHex); 
```

我怎么知道这些神奇的人物？很简单，到处都有文档。[有关一些基本的正则表达式模式](http://msdn.microsoft.com/en-us/library/3y21t6y4.aspx)，请参阅此 MSDN 页面。此页面显示了一些[量词](http://msdn.microsoft.com/en-us/library/3206d374.aspx)，例如*匹配一个或多个*或*仅匹配一个*。

[备忘单也派上用场](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:18:50.503

我不太清楚你到底想做什么，但点“。” character 表示 Regex 中的任何字符。

所以正则表达式 "^FF-D8-FF-E0-..-..-4A-46-49-46-00" 可能会成功。'^' = 输入开始。

如果您只想允许十六进制字符，您可以使用 "^FF-D8-FF-E0-[0-9A-F]{2}-[0-9A-F]{2}-4A-46-49-46 -00”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:15:56.343

正则表达式会帮助你；您可以使用以下工具来帮助您测试和学习：-

[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

*我建议你玩一玩，因为那样你就会学会！*

要简单地匹配**任何**字符代替 x，以下应该有效：-

“^FF-D8-FF-E0-..-..-4A-46-49-46-00$”

在 C# 中，它会是这样的： -

```
var test = "FF-D8-FF-E0-AB-CD-4A-46-49-46-00";

var foo = new Regex("^FF-D8-FF-E0-..-..-4A-46-49-46-00$");

if (foo.IsMatch(test))
{
  // Do magic
} 
```

您需要阅读正则表达式以了解一些可能看起来不熟悉的字符，即 ^ 和 $。见[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

# c# - 字符串格式的日期时间建议

> ID：15881370
> 
> 赞同：1
> 
> 时间：2013-04-08T14:10:32.500
> 
> 标签：c#, sql, entity-framework, datetime

我正在做一个比较`DateTime`SQL Server 中的两个值的查询。`DateTime`SQL server 中的格式是这样的：

```
 2010-09-20 00:00:00.000 
```

我正在使用实体框架，让我告诉你我现在面临的问题。

当我`DateTime`在 Entity Framework 中比较一个值时，该属性必须与数据库相同，这意味着必须是`DateTime`. 日期来自一个帖子，这意味着它是一个字符串。这里的问题是，如何将它们转换为`DateTime`与数据库中相同的格式？

用户的输入以字符串的形式出现，我所做的是：

```
DateTime start_date = Convert.ToDateTime(postValueHere); 
```

但值并不如预期：

```
2010/20/46 12:00:00 am 
```

所以，我给它一个格式：

```
string format = "yyyy-MM-dd 00:00:00.000";
string date = start_date .ToString(format); 
```

但是现在该值变成了一个字符串，这意味着我无法将该值与 Entity Framework 进行比较：

```
db.Product.Where(x=>x.START_DATE== date)//error, cannot compare datetime with string. 
```

如何将用户的输入转换为与 SQL Server 中相同的格式，然后再转换为`DateTime`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:16:21.273

您可以尝试使用[DateTime.TryParseExact()](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)作为：

```
 DateTime start_date;
 DateTime.TryParseExact(strDate, "yyyy-MM-dd hh:mm:ss tt",
                        System.Globalization.CultureInfo.InvariantCulture,
                        System.Globalization.DateTimeStyles.None, out start_date);
 Console.WriteLine(start_date); 
```

您可以[在此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)查看更多自定义格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:18:31.657

如果您使用 EF 从数据库中获取该日期值，则它应该以 DateTime 类型的属性结束。这个值只是一个 DateTime 结构，*没有任何格式*。
当您检查帖子中的解析日期时，调试器`.ToString()`会在值上使用 a 来获取它可以显示的字符串。它仍然是一个没有任何格式的 DateTime 结构！

所以只需比较 DateTime 值，而不用担心格式。

# mysql - 休眠查询执行问题

> ID：15881371
> 
> 赞同：0
> 
> 时间：2013-04-08T14:10:34.627
> 
> 标签：mysql, database, hibernate

我在查询执行中遇到了一些问题，这是我的情况：

我有两个表**记录**有 20 万条记录和**日志**记录有 60 万条记录

日志表中的单个日志记录可以在**日志****记录表**中有多个日志消息，我的数据库架构如下

 ****日志**表

```
CREATE TABLE `log` (                           
       `logid` varchar(50) NOT NULL DEFAULT '',         
       `creationtime` bigint(20) DEFAULT NULL,            
       `serviceInitiatorID` varchar(50) DEFAULT NULL,   
       PRIMARY KEY (`logid`),                           
       KEY `idx_creationtime_wsc_log` (`creationtime`)  
     ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

和**logrecords**表

```
CREATE TABLE `logrecords` (                                                 
              `logrecordid` varchar(50) NOT NULL DEFAULT '',                                
              `timestamp` bigint(20) DEFAULT NULL,                                          
              `message` varchar(8000) DEFAULT NULL,                                         
              `loglevel` int(11) DEFAULT NULL,                                              
              `logid` varchar(50) DEFAULT NULL,                                             
              `indexcolumn` int(11) DEFAULT NULL,                                           
              PRIMARY KEY (`logrecordid`),                                                  
              KEY `indx_logrecordid_message_logid` (`logrecordid`,`message`(767),`logid`),  
              KEY `logid` (`logid`),                                                        
              KEY `indx_message` (`message`(767))                                           
            ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

hibernate 创建的查询就像

```
select this_.logid as logid4_1_, this_.loglevel as loglevel4_1_, this_.creationtime as creation3_4_1_,this_.serviceInitiatorID as service17_4_1_, this_.logtype as logtype4_1_,logrecord1_.logrecordid as logrecor1_3_0_, logrecord1_.timestamp as timestamp3_0_, logrecord1_.message as message3_0_, logrecord1_.loglevel as loglevel3_0_, logrecord1_.logid as logid3_0_, logrecord1_.indexcolumn as indexcol6_3_0_ from log this_ inner join wsc_logrecords logrecord1_ on this_.logid=logrecord1_.logid where (1=1) and (1=1) and logrecord1_.message like 'SecondMessage' order by this_.creationtime desc limit 25 
```

执行大约**需要 7313 毫秒**

查询解释就像

![在此处输入图像描述](https://i.stack.imgur.com/2TXxt.png)

但是当我执行下面的查询时，执行大约需要 15 分钟

```
select count(*) as y0_ from log this_ inner join logrecords logrecord1_ on this_.logid=logrecord1_.logid where (1=1) and (1=1) and lower(logrecord1_.message) like 'SecondMessage' order by this_.creationtime desc limit 25 
```

对于上面的查询解释就像 ![在此处输入图像描述](https://i.stack.imgur.com/pgcif.png)

我正在使用 MySQl 数据库。我认为索引或其他一些我无法识别的问题

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:19:21.707

当您使用`lower(logrecord1_.message) like 'SecondMessage'`而不是plain`logrecord1_.message like 'SecondMessage'`时，数据库引擎将停止使用`logrecord1_.message`.

您可以通过创建一个基于函数的索引来`lower(logrecord1_.message)`代替`logrecord1_.message`.**

# c++ - 启动服务时的错误5

> ID：15881385
> 
> 赞同：0
> 
> 时间：2013-04-08T14:11:23.847
> 
> 标签：c++, service, windows-7, admin

我在 C++ 中创建了一个 Windows 服务，当我尝试启动该服务时，我收到消息错误 5：访问被拒绝。

![在此处输入图像描述](https://i.stack.imgur.com/51D4U.png)

我的用户帐户设置为管理员，我什至尝试使用计算机上的默认管理员帐户，但它仍然无法正常工作。

我可以通过 cmd 安装/卸载服务没有问题，但我无法启动服务

代码不是用户帐户的问题。对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:18:15.270

“运行服务”不仅仅是“在我的桌面上启动程序”。它不一定以“你”的身份运行。

该服务与任何桌面分离，它实际上忽略了您的用户帐户。该服务将在操作系统中存储自己的帐户/密码配置，当您运行它时，您只需命令它启动。它将在自己的用户帐户上启动。如果您已将 .exe/.dll 文件放在某个受保护的文件夹中，并且您既没有配置对该文件的访问权限，也没有为该服务配置用户密码，那么该服务很有可能会尝试以默认服务用户运行像“LocalService”或“NetworkService”这样的帐户，它根本无法触及文件。

如果您正确安装了服务，请转到 ControlPanel - AdministrativeTools - Services，找到您的服务并检查（如果我没记错的话）第二个选项卡，并验证此处显示的用户名是否可以访问尝试加载和运行的文件。如果用户名错误，请更正。如果您不关心用户名，那么只需查看该名称并在文件夹和/或文件上设置访问权限，以便**至少**“读取目录内容”和“读取”和“执行”都可用于该用户名 -服务尝试运行方式。

# facebook - 像盒子浏览器一样的网络插件问题

> ID：15881386
> 
> 赞同：0
> 
> 时间：2013-04-08T14:11:37.417
> 
> 标签：facebook, iframe, facebook-social-plugins

在我的网站上，我可以在 Chrome 中看到该插件，而其他人则看不到。没有人能够在 IE 中看到该插件。我尝试使用 iframe 代码，现在我正在使用 HTML5 代码。有任何想法吗？

[http://craftcaferochester.com/](http://craftcaferochester.com/)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:42:07.067

这可能是你的问题：

```
FB.getLoginStatus() called before calling FB.init(). 
```

我在 Chrome 控制台中看到了它。要解决，请参阅：

[`FB.getLoginStatus() called before calling FB.init() error in console`](https://stackoverflow.com/q/8048564/1693859)

**更新：**

您应该在[Facebook 开发者](https://developers.facebook.com)处注册以获取`appId`和`channelUrl`. 转到[JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)并阅读该`Loading and Initialization`部分。当您注册为开发者时，您可以从[App Dashboard](https://developers.facebook.com/apps)获取它们。

# xamarin.ios - 来自 Visual Studio (xamarin) 的 IOS 应用程序超时

> ID：15881391
> 
> 赞同：1
> 
> 时间：2013-04-08T14:11:53.083
> 
> 标签：xamarin.ios, xamarin

我在 pc 和 mac 上都使用了最新的稳定版本的 xamarin。我正在尝试从 VS 构建 hello world 应用程序，但遇到了麻烦。

事实上，Visual Studio 在 mac 上启动了模拟器，但模拟器上没有运行任何东西（黑屏）。

我终于在超时期间收到错误消息。

感谢任何解决该问题的想法:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:55:03.307

我回来解释我的问题的解决方案。

我按照这里提到的步骤：在此处[输入链接描述，](http://forums.xamarin.com/discussion/comment/6084/#Comment_6084) 但我真的认为主要问题是应用程序没有应用程序名称标识符和版本，所以去VS中的项目并编辑它：（[http ://screencast.com/t/jM7LGcY5yp](http://screencast.com/t/jM7LGcY5yp)）

# xpath - XPath 表达式？

> ID：15881396
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:12:17.400
> 
> 标签：xpath

```
<?xml version="1.0" encoding="UTF-8"?>
<Patients>
  <patientRole>
    <id extension="996-756-495" root="2.16.840.1.113883.19.5"/>
    <id extension="775-756-495" root="2.16.840.1.113883.14.6"/>
    <patient>
      <name>
        <given>Henry</given>
        <family>Levin</family>
      </name>
      <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
      <birthTime value="19320924"/>
    </patient>
    <providerOrganization>
      <id root="2.16.840.1.113883.19.5"/>
      <name>Good Health Clinic</name>
    </providerOrganization>
    <admissionTime value="2012030111:32"/>
  </patientRole>
  <patientRole>
    <id extension="65" root="2.16.840.1.113883.3.933"/>
    <patient>
      <name>
        <given>Paul</given>
        <family>Pappel</family>
      </name>
      <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
      <birthTime value="19551217"/>
    </patient>
    <providerOrganization>
      <id extension="84756-11241-283-OPTD-3322" root="1.2.3.4.5.6.1.8.9.0"/>
      <name> Dr.med. Hans Topp-Glucklich</name>
    </providerOrganization>
    <admissionTime value="201201152200"/>
  </patientRole>
  <patientRole>
    <id extension="800001" root="2.16.840.1.113883.19.5"/>
    <patient>
      <name>
        <given>JEANNE</given>
        <family>PETIT</family>
      </name>
      <administrativeGenderCode code="F" codeSystem="2.16.840.1.113883.5.1"/>
      <birthTime value="19480105"/>
    </patient>
    <providerOrganization>
      <id root="2.16.840.1.113883.19.5"/>
      <name>Good Health Clinic</name>
    </providerOrganization>
    <admissionTime value="20120101T22:00"/>
  </patientRole>
</Patients> 
```

我很难为以下两项编写 XPath 表达式：

1955 年 12 月 17 日出生的患者姓名和姓氏

2012年1月「好康诊所」收治病人数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:32:32.180

这将为您提供`name`提供在特定日期出生的患者的元素：

```
patientRole/patient[birthTime/@value="19551217"]/name 
```

这将为您`patientRole`提供具有指定组织名称和入学日期的元素数量：

```
count(patientRole[providerOrganization/name="Good Health Clinic"][starts-with(admissionTime/@value,"201201")]) 
```

# mysql - mysql自动增量在innodb中不是顺序的

> ID：15881400
> 
> 赞同：5
> 
> 时间：2013-04-08T14:12:23.830
> 
> 标签：mysql, auto-increment

Mysql 自动增量不是顺序的。

当我尝试上传 csv 批量数据时，它跳过了一些自动增量 ID

自动增量 ID 不是连续的

数据库引擎是 innodb & id 是自动增量

例子

```
   身份证颜色
    1红色
    2 蓝色
    3 绿色
    4橙
    9 粉红色
    10白
    11黑色
    16灰色
    17棕色

```

id 不是连续的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-16T16:13:04.640

如果您使用比`5.1.22`这更新的 MySQL，则可能是因为 InnoDB[锁定策略](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)，正如 Miguel Angel Nieto 在[此博客文章](http://www.mysqlperformanceblog.com/2011/11/29/avoiding-auto-increment-holes-on-innodb-with-insert-ignore/)中所解释的那样。

`innodb_autoinc_lock_mode`您可以通过设置参数来更改此行为：

*   `innodb_autoinc_lock_mode = 0`：**“传统”锁定模式**，与之前的行为相同`5.1.22`
*   `innodb_autoinc_lock_mode = 1`：**“连续”锁定模式**，默认行为，这可能是您设置的，它旨在提高并发性和性能，但缺点是序列上有*漏洞*。
*   `innodb_autoinc_lock_mode = 2`: **“interleaved” 锁模式**，这是最快和最可扩展的锁模式，但是在使用**基于语句的复制**或恢复场景时**从二进制日志重放 SQL 语句时****不安全**

 ****有关详细的使用信息，`innodb_autoinc_lock_mode`您可以查看[详细的 mysql 文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html#innodb-auto-increment-configurable)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:31:25.650

不知道 codeignitor 和事务的细节，但我知道查询中的“捕获失败”（如`insert ignore`）具有不插入的效果，但确实增加了 auto_increment。在这里寻找你的答案。其余的不要打扰“修复”这个。****

# asp.net - CMS 编辑器能否设置特定页面以要求身份验证 - Sitecore

> ID：15881411
> 
> 赞同：0
> 
> 时间：2013-04-08T14:12:49.823
> 
> 标签：asp.net, sitecore

我想知道是否可以这样做，以便 sitecore 中的编辑可以设置它，以便您只需要一个特定页面的用户名/登录名。

www.yourwebsite.com - 无需密码 www.yourwebsite.com/internalstuff - 需要密码并由编辑在 CMS 中设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:15:45.720

Sitecore 提供的[Security Administrator's Cookbook](http://sdn.sitecore.net/upload/sitecore6/securityadministratorscookbook-usletter.pdf)对此进行了广泛的解释。

这就是您需要做的，只需几个简短的步骤：

*   创建一个用户组`User Manager`（在`Extranet`域上，默认情况下是这样调用的，在您的安装中可能会有所不同）
*   将用户添加到组
*   转到`Security Editor`，选择要保护的项目，并禁止`Read`匿名用户的权限（这使得未登录的用户无法查看它）
*   `Read`为您的新用户组启用您的项目权限

请务必阅读说明书，以便了解如何正确使用安全继承。这将为您将来节省大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:15:33.777

实际上，如果您安装了面向营销人员的 Web 表单，则无需编码即可。这不是通过电子邮件激活等方式进行的企业就绪登录，但它可以工作。首先，您当然应该设置访问权限和角色，如 Ruud 在[此答案](https://stackoverflow.com/a/15881477/1007278)中提到的，另外您需要 WFFM 准备好样式化的表单和配置为接受表单的占位符。

*   转到WFFM并创建一个注册表单（用户名作为单行文本字段，密码作为密码确认字段）
*   作为保存操作添加“创建用户”（在那里配置正确的域/角色）（您还可以添加“用户使用密码登录操作并在注册后直接登录用户）
*   将注册表单添加到公共页面

*   创建登录表单（用户名作为单行文本字段，密码作为密码字段）；再次将数据映射到为您的外联网设置的用户名、密码和域）

*   将登录表单添加到公共页面

*   请享用 ：）

注意：这要求您对 asp.net 用户表具有写入权限（默认情况下在核心数据库中设置）。确保您的安全要求符合此要求。正如已经提到的，这不会在注册时为您提供基本的电子邮件验证。

# java - 将图像转换为颜色数组

> ID：15881413
> 
> 赞同：3
> 
> 时间：2013-04-08T14:12:50.867
> 
> 标签：java, arrays, image, colors

我在 Java 中加载图像并希望将其转换为 RGB 数组，以便读取每个像素的颜色。我在谷歌上搜索，但我只找到了如何将颜色数组转换为图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:35:44.417

以下几行说明了 API 方法的用法：

```
BufferedImage bi = ImageIO.read( new File( "image.png" ) );
int[] data = ( (DataBufferInt) bi.getRaster().getDataBuffer() ).getData();
for ( int i = 0 ; i < data.length ; i++ ) {
    Color c = new Color(data[i]);
    // RGB is now accessible as
    c.getRed();
    c.getGreen();
    c.getBlue();
} 
```

如果您因颜色模型而遇到问题，请先创建一个副本

```
BufferedImage img2 = new BufferedImage( bi.getWidth(), bi.getHeight(), BufferedImage.TYPE_INT_RGB );

img2.getGraphics().drawImage( bi, 0, 0, null ); 
```

并在上面的代码中使用 img2 。

# html - 边距 0 自动不适用于带有 display:table 单元格的 div

> ID：15881414
> 
> 赞同：1
> 
> 时间：2013-04-08T14:12:55.587
> 
> 标签：html, css

我正在处理一个页面..其中 Margin 0 auto 在带有 display:table 单元格的 div 中不起作用
这是我的代码

CSS Styles

```
<style>
    html,body{
        height:100%;
        width:100%;
    }
    .wrapper{
        background-color:#999;
        height:500px;
    }
    .tableContent{
        display:table;
        height:500px;
    }

    .tableContentRow{
        display:table-row;
    }

    .tableContentCell{
        display:table-cell;
        vertical-align:middle;
        height:500px;
    }

    .loginBox{
        height:100px;
        background-color:#FFF;
        width:250px;
        margin:0 auto;
    }
</style> 
```

这是HTML

```
<div class="wrapper">
    <div class="tableContent">
        <div class="tableContentRow">
            <div class="tableContentCell">
                <div class="loginBox">
                     <!-- More contents Go HEre -->
                </div>
            </div>
        </div>
    </div>
</div> 
```

loginBox div 未定位到 tableContentCell div 的中心
请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:19:12.380

在 div 上设置一个特定的宽度`.tableContentCell`，你会没事的。

[小提琴](http://jsfiddle.net/jonnysooter/xahmZ/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:17:53.330

表格本身没有居中。检查这个[小提琴](http://jsfiddle.net/trajce/hwkPs/)。

```
.tableContent{
    margin:0 auto;
} 
```

# iphone - 类似 Instagram 的刷新按钮

> ID：15881416
> 
> 赞同：0
> 
> 时间：2013-04-08T14:13:00.263
> 
> 标签：iphone, ios, objective-c, xcode, navigation

我真的很想像 instagram 的按钮一样做一个按钮（rightBarButtonItem），我认为不可能同时为按钮设置背景图像和图像。

看到这个

**

## AppDelegate.m

**

```
NSDictionary *faTextAttributes = @{ UITextAttributeFont : [UIFont fontWithName:@"Arial" size: 12],
                                        UITextAttributeTextColor : [UIColor whiteColor],
                                        UITextAttributeTextShadowColor: [UIColor blackColor],
                                        UITextAttributeTextShadowOffset: [NSValue valueWithCGSize: CGSizeMake(0,0)] };

    [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil]
     setTitleTextAttributes:faTextAttributes forState:UIControlStateNormal];
    [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil]
     setTitleTextAttributes:faTextAttributes forState:UIControlStateHighlighted];

    [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil]
     setBackgroundImage:[UIImage imageNamed:@"bar"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil]
     setBackgroundImage:[UIImage imageNamed:@"bar"] forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault]; 
```

## 第一视图控制器.m

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStyleDone target:nil action:nil];

self.navigationItem.rightBarButtonItem = rightButton; 
```

这里的图像：

背景图片 (2x) [http://d.pr/i/BYS9](http://d.pr/i/BYS9)

刷新图像 (2x) [http://d.pr/i/Hg5u](http://d.pr/i/Hg5u)

* * *

我在寻找什么来做 instagram 应用程序的相同按钮，在背景图像中设置刷新图像。

希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:54:20.027

不幸的是 UIBarButtonItem 不是 UIButton 的子类，因此不具有 UIButton 所具有的复杂属性和可定制性。Instagram 完成此按钮的方式是仅将一张图像作为刷新图像叠加在背景图像上。当按下按钮时，他们隐藏项目并用风车替换它。

或者，您可以创建一个自定义按钮，将所需的属性添加到该按钮，然后使用该按钮创建栏项目：

`UIBarButton* button initWithCustomView:customButton;`

# ms-access - 在 1 个查询中将计算字段连接到表

> ID：15881418
> 
> 赞同：1
> 
> 时间：2013-04-08T14:13:08.417
> 
> 标签：ms-access, ms-access-2007

我有一个字段，当缩短为最左边的 2 个字符时，可以将其作为关键字段连接到另一个表。

当我这样做时，我总是必须在自己的查询中执行 LEFT([FieldName],2) 位，然后在第二个查询中执行实际联接。

有没有办法在单个查询中完成此操作？

这是删除最左边的 2 个字符的查询语法；让我们称之为`QueryA`：

```
SELECT Left([TableA].[Field1],2) AS AbbrField1
FROM [TableA]; 
```

`QueryA`这是基于我必须首先创建的字段“AbbrField1”连接到另一个表的查询；让我们称之为`QueryB`：

```
SELECT [TableB].[Field2]
FROM [QueryA] 
LEFT JOIN [TableB] ON [QueryA].[AbbrField1] = [TableB].[Field1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:19:59.530

您应该能够使用JOIN 上`JOIN`的函数对表进行操作：`LEFT`

```
SELECT B.[Field2]
FROM [TableA] as A
LEFT JOIN [TableB] as B 
    ON Left(A.[Field1], 2) = B.[Field1]; 
```

这将消除对第二个查询的需要。

*注意：这是在 MS Access 2003 中测试的。*

# sql - Oracle 查询中的自增值

> ID：15881419
> 
> 赞同：1
> 
> 时间：2013-04-08T14:13:10.543
> 
> 标签：sql, oracle

我是 Oracle DB 的新手...

我有一个包含 2 个字段的表，即 YEAR 和 MAINT_CODE。

我必须编写一个报告查询，它将在报告中呈现以下内容：

```
 ACTION  | YEAR | MAINT_CODE
--------------------------
Action 1 | 2012 | 0123
Action 2 | 2012 | 0122
Action 3 | 2013 | 0122 
```

现在，我没有 Action 字段，Action 之后的这个数字必须增加。我根本无法改变桌子。

我当前的查询如下所示：

```
SELECT YEAR, MAINT_CODE
FROM mytable 
```

我怎样才能在行动之后获得那个递增的价值？我什至不知道去哪里找——我已经研究过测序，但我不确定这就是我需要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T14:17:28.260

```
SELECT 'Action '||to_char(row_number() over (order by year, maint_code)) as action,
       YEAR, 
       MAINT_CODE
FROM mytable
order by year, maint_code 
```

你必须有一个顺序，否则“序列”没有意义，这就是为什么我应用一个`order by year, maint_code`来生成`row_number()`并使用相同的排序定义对整体结果进行排序。

# java - 如何转换地图 在保持顺序的同时分成两个列表？

> ID：15881422
> 
> 赞同：5
> 
> 时间：2013-04-08T14:13:12.773
> 
> 标签：java

如何将 a 转换`Map<K, V>`为 lists `List<K> keys`,`List<V> values`以便 in`keys`和`values`match 的顺序？我只能找到`Set<K> Map#keySet()`并且`Collection<V> Map#values()`可以使用以下方法转换为列表：

```
List<String> keys   = new ArrayList<String>(map.keySet());
List<String> values = new ArrayList<String>(map.values()); 
```

但我担心顺序会是随机的。

我必须手动转换它们是正确的还是某处有快捷方式？

更新：由于答案，我能够找到我想与您分享的其他有用信息，随机谷歌用户： [如何有效地迭代地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T14:15:57.773

使用 Map.entrySet()：

```
List<String> keys = new ArrayList<>(map.size());
List<String> values = new ArrayList<>(map.size());
for(Map.Entry<String, String> entry: map.entrySet()) {
   keys.add(entry.getKey());
   values.add(entry.getValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:14:40.813

您应该提取您提到的键列表，然后遍历它们并提取值：

```
List<String keys = new ArrayList<String>(map.keySet());
List<String> values = new ArrayList<String>();
for(String key: keys) {
    values.add(map.get(key));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:15:36.680

您可以遍历[`map.entrySet()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet%28%29)，将键和值附加到两个列表中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T14:19:34.757

请注意，地图不是有序集合。迭代顺序不固定。因此，当您在 Map 中添加更多条目时，它们将出现在迭代中的随机点，因此将不再匹配您创建的任何列表。

如果您需要 Map 的迭代顺序与插入顺序相同，请查看[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

# jquery - JQuery Datepicker 没有触发 .prop('disabled')

> ID：15881423
> 
> 赞同：0
> 
> 时间：2013-04-08T14:13:13.503
> 
> 标签：jquery, datepicker, keyup

早晨，

我刚开始玩弄日期选择器。一切都很顺利，但我以我的一种形式说

```
\$('#datepicker3').keyup(function() {
                                    if (\$(this).val() != '')
                                            \$('#dayswaived').prop("disabled", true);
                                    else
                                            \$('#dayswaived').prop("disabled", false);
                            }); 
```

如果我手动输入该字段，则触发条件，而另一个字段被禁用。如果我使用 datepicker，则条件永远不会触发。我也尝试过模糊但没有成功。

对此有什么想法吗？在问这个问题之前，我做了一些环顾四周。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:21:52.773

请参阅更改事件：

```
$('#datepicker3').change(function() {
     if ($(this).val() != '')
          $('#dayswaived').prop("disabled", true);
     else
          $('#dayswaived').prop("disabled", false);
}).keyup(function(){$(this).change()}); 
```

[看演示](http://jsfiddle.net/XM5Q6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:35:20.530

您可以使用烤的示例，也可以使用[onSelect](http://api.jqueryui.com/datepicker/#method-dialog)回调。

```
function check(){
    $('#dayswaived').prop("disabled", this.value != '')
};
$('#datepicker3').datepicker({onSelect:check}).keyup(check); 
```

此外，确实不需要 if/else，因为您可以将条件直接传递给 prop 方法。

[小提琴](http://jsfiddle.net/7ZCLj/)

# c++ - MSVC 编译器更新

> ID：15881424
> 
> 赞同：2
> 
> 时间：2013-04-08T14:13:13.707
> 
> 标签：c++, visual-studio-2010, visual-c++, compiler-construction, visual-studio-2012

我可以将 MSVC2010 编译器更新到 MSVC2012 但仍然使用 MSVC2010 集成开发环境吗？如果我有像QT这样用MSVC2010编译的第三方，更新后还能用吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:49:41.573

For the x86 build environment, write this in a batch file. Remove the call keyword if commands are typed in the command line:

```
call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat" x86
start "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" /useenv 
```

Take a look at other shortcuts in C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Microsoft Visual Studio 2012\Visual Studio Tools too see how to setup for x64 or ARM builds.

Intellisense probably should be turned off as the old engine complains a lot about new language constructs (e.g. range-based for statement). Debugger gets correct reading on a vector despite the size change in VC11 but I am not sure how much trust you want to put on the visualizers for other types.

# ios - iOS 游戏本地化字符串格式

> ID：15881425
> 
> 赞同：1
> 
> 时间：2013-04-08T14:13:21.290
> 
> 标签：ios, objective-c, xcode, localization

我想用句子中的数字本地化字符串。我不使用 iOS 的 Localizable.strings 文件，因为它很乏味且容易出错，我可能会决定稍后重新措辞。

这是我所做的：

```
#define sf_buy_bombs @"Are you sure you want to buy %i bombs for $%i? " 
```

其中“sf”后缀表示“字符串格式”

这是我需要使用它的时候：

```
[NSString stringWithFormat: [Helper getLocalizedStringWithString:sf_buy_bombs], num_shop_items_bundle, price_bombs] 
```

以及处理翻译的辅助方法

```
+(NSString*) getLocalizedStringWithString: (NSString*) str {
    if ([Helper isSimplifiedChinese]) {
        if ([str isEqualToString:sf_buy_bombs]) {
            return @"确定要购买%i个炸弹道具吗? ($ %i)";
        }
    }
    return str;
} 
```

最后显示的标签是“确定要购买%i个炸弹道具吗？($ %i)”，数字不会被替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:23:40.153

在您的 Helper 类中

```
#define sf_buy_bombs @"Are you sure you want to buy %i bombs for $%i? " 
```

和

```
+(NSString *)localizedStringWithString{
    return sf_buy_bombs;//all other stuffs 
} 
```

在所需的类中：

```
NSString *string=[NSString stringWithFormat:[Helper localizedStringWithString],10,100];
NSLog(@"%@",string); //gives correct output as checked by me as :

//Are you sure you want to buy 10 bombs for $100? 
```

**编辑：使用您的中文字体字符串：** [在此处查找工作模型。](http://www.keepandshare.com/doc/6141966/chinese-macro-88k?da=y)

![在此处输入图像描述](https://i.stack.imgur.com/JoQd5.png)

# css - 是否可以将动态图像 (JSF) 添加到 css 文件中？

> ID：15881426
> 
> 赞同：0
> 
> 时间：2013-04-08T14:13:23.577
> 
> 标签：css, image, jsf, servlets, dynamic

我有一个模板系统，它使用 servlet 加载图像。这样，如果当前主题/模板中不存在图像，则 servlet 会加载默认图像。

我正在寻找一种不需要 servlet 的方法。所以问题是是否有可能做类似[这里](https://stackoverflow.com/questions/5816522/how-can-i-embed-an-css-background-image-link-with-jsf/5817307#5817307)回答的事情。

# javascript - django sweetpie 自定义身份验证

> ID：15881433
> 
> 赞同：1
> 
> 时间：2013-04-08T14:14:02.803
> 
> 标签：javascript, jquery, django, authentication, tastypie

所以我有 django tastepie 和 jquery ajax post 基本身份验证的这个实现，它可以工作：

美味派：

```
class RatingResource(ModelResource):
    city = fields.ForeignKey(CityResource, 'city')
    user = fields.ForeignKey(UserResource, 'user')
    class Meta:
        queryset = Rating.objects.all()
        resource_name = 'rating'
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization() 
```

询问：

```
 $.ajax({
    type: 'POST',
    url: url,
    data: data,
    crossDomain: true,
    beforeSend: function (xhr){ 
            xhr.setRequestHeader('Authorization', make_base_auth('yuri','y')); 
    },
    success: function (){
        alert("200"); 
    },
    contentType:'application/json',
    dataType: 'application/json',
    processData: false,
  }); 
```

我的问题是，我如何编写自己的自定义身份验证？

我试图遵循这一点：[http](http://django-tastypie.readthedocs.org/en/latest/authentication.html#implementing-your-own-authentication-authorization) : //django-tastypie.readthedocs.org/en/latest/authentication.html#implementing-your-own-authentication-authorization 但我得到了一个未经处理的 401。这是我失败的尝试：

```
class SillyAuthentication(BasicAuthentication):
    def is_authenticated(self, request, **kwargs):
        if 'test' in request.user.username:
          return True

        return False

    # Optional but recommended
    def get_identifier(self, request):
        return request.user.username

class RatingResource(ModelResource):
    city = fields.ForeignKey(CityResource, 'city')
    user = fields.ForeignKey(UserResource, 'user')
    class Meta:
        queryset = Rating.objects.all()
        resource_name = 'rating'
        authentication = SillyAuthentication()
        authorization = DjangoAuthorization()

function make_base_auth(user, password) {
            var tok = user + ':' + password;
            var hash = btoa(tok);
            return "Silly " + hash;
          }
  $.ajax({
    type: 'POST',
    url: url,
    data: data,
    crossDomain: true,
    beforeSend: function (xhr){ 
            xhr.setRequestHeader('Authorization', make_base_auth('yuri','y')); 
    },
    success: function (){
        alert("200"); 
    },
    contentType:'application/json',
    dataType: 'application/json',
    processData: false,
  }); 
```

如何使用自定义身份验证调整我的代码？

# .net - Linq - 对象内的列表未在 db.SaveChanges() 调用上保存

> ID：15881437
> 
> 赞同：2
> 
> 时间：2013-04-08T14:14:13.957
> 
> 标签：.net, linq, entity-framework, linq-to-entities

我在将以下内容保存到数据库时遇到问题。

我有一个分支列表作为 MessageType 对象的一部分。我在第 1 部分代码中更新分支列表，然后将分支列表保存到第 2 部分中的 MessageType 对象，然后调用 db.SaveChanges()。不幸的是，新的分支列表没有保留。

```
// section 1
 List<Branch> myBranches = new List<Branch>();
            foreach (int bid in branches)
            {
                var bran = db.Branches.Find(bid);
                if (bran != null)
                {
                    myBranches.Add(bran);
                }
            }
//section 2
            try
            {

                messagetype.SenderID = eSenderDB.MvcApplication.SenderID;
                messagetype.Branches = myBranches;
                foreach (Branch bra in messagetype.Branches)
                {
                    db.Entry(bra).State = EntityState.Modified;
                    db.SaveChanges();

                }
                //db.Entry(messagetype.Branches).State = EntityState.Modified;
                db.Entry(messagetype).State = EntityState.Modified;

                db.SaveChanges(); 
```

我的创建方法

```
[HttpPost]
        public ActionResult Create(MessageType messagetype, int[] branches)
        {
            List<Branch> myBranches = new List<Branch>();
            foreach (int bid in branches)
            {
                var bran = db.Branches.Find(bid);
                if (bran != null)
                {
                    myBranches.Add(bran);
                }
            }

            {
                messagetype.Branches = myBranches;
                messagetype.SenderID = eSenderDB.MvcApplication.SenderID;
                messagetype.OptIns = 0;
                db.MessageTypes.Add(messagetype);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(messagetype);
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:22:07.040

您忘记将它们附加到上下文中。试试下面的代码：

```
foreach (Branch bra in messagetype.Branches)
{
  db.Branches.Attach(bra);
  db.Entry(bra).State = EntityState.Modified;
  db.SaveChanges();
} 
```

在旁注中，我质疑`SaveChanges`在您的`foreach`循环中调用 to 。您可以将保存推迟到最后，它应该仍然可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:18:45.287

我猜这两种方法是 MVC 中的 Create 和 Edit 控制器方法。

这里的问题是您的 MessageType 对象是通过 MVC Binder 直接从 HTTP 请求传入的。所以它是一个 ViewModel。同时，您将此对象用作 EntityModel。

这有点代码味道，因为表示层的需求通常会偏离数据模型的需求。为每个对象设置单独的对象会给您带来一些好处。

要解决此特定问题，您有 2 个选项：

```
// Tell the database context to track the object and that the initial state is modified.
db.MessageTypes.Attach(messagetype); 
db.MessageTypes(messagetype).State = EntityState.Modified; 
```

或者，

```
// Separate the entity object from the view object and merge the changes.
var messageTypeEntity = db.MessageTypes.Find(messageTypeViewModel.Id);
if(messageTypeEntity == null)
{
    ModelState.AddModelError(string.Empty, "The specified MessageType could not be found.");
    return View(messageTypeViewModel);
}

// Update messageTypeEntity from messageTypeViewModel
UpdateModel(messageTypeEntity);

db.SaveChanges(); 
```

阅读有关[System.Web.Mvc.Controller.UpdateModel(...)的内容，](http://msdn.microsoft.com/en-us/library/dd470933%28v=vs.98%29.aspx)[这里](https://stackoverflow.com/questions/1087279/how-does-the-asp-net-mvc-updatemodel-method-work)有一些关于 SO 的讨论。

# python - SQLAlchemy 没有关闭与 ORM 的会话？

> ID：15881439
> 
> 赞同：3
> 
> 时间：2013-04-08T14:14:17.110
> 
> 标签：python, sqlalchemy, bottle

我有一个使用 MySQL 作为后端的[Bottle.py](http://bottlepy.org/docs/dev/) (0.10.11) 和[SQLAlchemy](http://www.sqlalchemy.org/) (0.7.9)的周末项目。

我有很多“MySQL 服务器已经消失”，并将其深入到这样一个事实，即当我不使用我的程序时，一些会话会在夜间保持打开状态。

现在我可以看到 MySQL 会话在哪里打开，但我不知道应该如何进行。

这就是我在路由器页面 web.py 中的内容

```
[...]
db = create_engine('mysql://USER:PASSWORD@DATABASE', poolclass=NullPool)
session = scoped_session(sessionmaker(bind=db))

@route("/")
    links = session.query(Link)

    session.close()
    return bottle.template("index", links=links) 
```

在我看来 index.tpl

```
[...]
%for link in links:
    <div class="link">
        <a class="link" href="{{link.url}}">{{link.title}}</a> 
        %for tag in link.tags:
            <a href="/tag/{{tag.text}}" class="tag">{{tag.text}}</a>
        %end
        <a href="/edit/{{link.id}}">edit</a>
    </div>
%end
[...] 
```

如果我使用`session.query(Link).all()`而不是`session.query(Link)`MySQL 会话正确关闭，但我无法从 ORM 因素中受益。

如何关闭所有会话？

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T23:08:56.973

当您说 时`q = session.query(Link)`，那是一个`Query`尚未执行的对象。您说得`session.close()`很好，但随后该`Query`对象被传递给您的模板并遍历它，这会在其上打开一个新事务`Session`以发出 SQL。

在这种情况下，您希望`all()`在关闭 之前坚持调用`Session`，或者更灵活地保持`Session`打开状态，直到模板完成渲染。然后模板也可以引用延迟加载的属性。

# ios - PhoneGap iOS LocalNotifications 夏令时

> ID：15881445
> 
> 赞同：2
> 
> 时间：2013-04-08T14:14:33.763
> 
> 标签：ios, objective-c, cordova, phonegap-plugins, uilocalnotification

我[在 iOS 中使用（臭名昭著的）Drew Dahlman 的 Phonegap Local Notifications](http://www.drewdahlman.com/meusLabs/?p=84)。它*似乎*有效。

我从来没有写过*objective-c*，也不想写（这可能是我现在遇到麻烦的原因！）但我认为插件工作不正常，如果可能的话想修复它。

当我在今天 13:00 设置通知时，它会正确触发。但是，当夏令时生效时，通知会在 14:00 触发，晚了一个小时。

这是因为没有考虑时区吗？Drew 提到将时区设置为 +0000 不是问题，但这是错误信息吗？我应该更新插件以处理时区和夏令时吗？或者在我自己的代码中处理夏令时并在 DST 处于活动状态时简单地设置日期 -1 小时？

**我想我必须在LocalNotification.m**中更新这些行中的第二行，但正如我所说，我不确定将其更新为什么。

```
UILocalNotification *notif = [[UILocalNotification alloc] init];
notif.timeZone = [NSTimeZone defaultTimeZone]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:04:49.713

啊，设置通知时似乎有点奇怪。

**示例 1：** 当我做这样的事情时`duedate`，2013-04-08T21:30 的值在哪里

```
var d = new Date(duedate).getTime();
d = new Date(d);

plugins.localNotification.add({
date: d,
... 
```

通知被记录为设置为 21:30，如下所示：

`Notification Set: 2013-04-08 21:30:00 +0000`

**示例 2：**如果我这样设置`duedate`：（现在时间是 21:30）

```
var d = new Date().getTime(); 
```

通知被记录为设置为 20:30，如下所示：

`Notification Set: 2013-04-08 20:30:00 +0000`

**然而**，在第二个示例中，由于夏令时，通知在 21:30 触发。

**解决方案**（各种）

我将不得不添加或减去从现在到我希望触发通知的时间差，而不是专门设置日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:02:59.123

这是相当有趣的。我在创建插件时处理的最重要的事情之一是 JS 和 OBJ-C 解释时间的奇怪方式。根据文档，您可以使用`systemTimeZone`插件所依赖的系统再次设置它。那是用户设置的时间和手机正在使用的时间。

即使它默认为 +000GMT，它仍然会在系统时间中考虑这一点，并针对 +0500 或您所在的任何区域进行调整。

[UILocalNotification 没有使用正确的时区](https://stackoverflow.com/questions/8653632/uilocalnotification-not-using-the-correct-timezone)

[NSTimeZone：localTimeZone 和 systemTimeZone 有什么区别？](https://stackoverflow.com/questions/1526990/nstimezone-what-is-the-difference-between-localtimezone-and-systemtimezone)

两者都处理这个 - 默认情况下插件使用系统时间。

# git - 为什么 tortoisemerge 不能用作我的合并工具？

> ID：15881449
> 
> 赞同：10
> 
> 时间：2013-04-08T14:14:41.383
> 
> 标签：git, tortoisegit

我安装了 TortoiseGit，过去它被`tortoisemerge`无缝地用作我的合并工具。但是自从我将 TortoiseGit 升级到 1.8.x 后，我的 mergetool 不再工作：

```
c:\Code\whatever> git mergetool
merge tool candidates: tortoisemerge emerge vimdiff
No known merge resolution program available. 
```

这曾经可以工作，那为什么现在坏了？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T14:14:41.383

根据[这篇文章](http://git.661346.n2.nabble.com/PATCH-mergetools-Add-tortoisegitmerge-helper-td7575538.html)，在 1.8 版中，TortoiseGit 重命名为`tortoisemerge.exe`，`tortoisegitmerge.exe`因为旧版本无法很好地处理文件名中的空格。

根据[这篇博](http://devstuffs.wordpress.com/2013/03/08/setting-tortoisegitmerge-in-msysgit-as-the-git-mergetool/)文，您需要输入以下命令：

```
git config --global merge.tool tortoisemerge 
git config --global mergetool.tortoisemerge.cmd '"C:/Program Files/TortoiseGit/bin/TortoiseGitMerge.exe" -base:"$BASE" -theirs:"$REMOTE" -mine:"$LOCAL" -merged:"$MERGED"' 
```

但是，这对我不起作用，所以我将以下内容添加到我的`.gitconfig`（这只是将路径更改为`TortoiseGitMerge.exe`：

```
[merge]
    tool = tortoisemerge
[mergetool "tortoisemerge"]
    path = C:\\Program Files\\TortoiseGit\\bin\\tortoisegitmerge.exe 
```

# c# - 如何重置 ModalPopupExtender？

> ID：15881451
> 
> 赞同：1
> 
> 时间：2013-04-08T14:14:42.990
> 
> 标签：c#, asp.net, ajax

我有一个 ModalPopUpExtender，单击取消按钮时，它应该重置 ModalPopUpExtender 的原始形式，就像它在`Page_Load`. 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:33:25.920

**ASPX：**

```
<head id="Head1" runat="server">
    <title>Modal Popup</title>
    <style type="text/css">
        .modalStyle
        {
            background-color: Gray;
            filter: alpha(opacity=70);
            opacity: 0.7;
        }

        .panelStyle
        {
            width: 300px;
            height: 180px;
            border: 2px solid Gray;
            background-color: White;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:Button ID="btnShow" runat="server" Text="Show" />
    <asp:ToolkitScriptManager ID="scripManager" runat="server" />
    <asp:ModalPopupExtender ID="modal" BackgroundCssClass="modalStyle" PopupControlID="popup" TargetControlID="btnShow" runat="server" />
    <asp:Panel runat="server" ID="popup" CssClass="panelStyle">
        <div>
            <asp:Button ID="btnCancel" runat="server" OnClick="HideModal" Text="Cancel" />
        </div>
    </asp:Panel>
    </form>
</body> 
```

**后面的代码：**

```
protected void HideModal(object sender, EventArgs e)
{
    System.Diagnostics.Debugger.Break();
    modal.Hide();
    //Execute the reset logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T16:39:19.383

隐藏`ModelPopupExtender`我们单击取消按钮时需要在控件中使用`CancelControlID`属性。`ModalPopupExtender`

# angularjs - AngularJS访问指令模板内的DOM元素

> ID：15881453
> 
> 赞同：67
> 
> 时间：2013-04-08T14:14:52.683
> 
> 标签：angularjs, angularjs-directive

在指令模板中选择 DOM 元素是否有更“角度”的方式？例如，假设你有这个指令：

```
app.directive("myDirective", function() {
    return {
        template: '<div><ul><li ng-repeat="item in items"></ul></div>',
        link: function(scope, element, attrs) {
            var list = element.find("ul");
        }
    }
}); 
```

`<ul>`我使用 jQuery 样式选择器来获取在我的模板中呈现的 DOM元素。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-08T14:40:00.217

我认为没有更“有角度的方式”来选择一个元素。[例如，在旧文档页面](https://code.angularjs.org/1.1.0/docs/guide/directive)的最后一个示例中查看他们实现此目标的方式：

```
{
     template: '<div>' +
    '<div class="title">{{title}}</div>' +
    '<div class="body" ng-transclude></div>' +
    '</div>',

    link: function(scope, element, attrs) {
        // Title element
        var title = angular.element(element.children()[0]),
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-08-06T20:43:28.653

您可以为此编写一个指令，它只需使用属性给定的名称将 (jqLit​​e) 元素分配给范围。

这是指令：

```
app.directive("ngScopeElement", function () {
  var directiveDefinitionObject = {

    restrict: "A",

    compile: function compile(tElement, tAttrs, transclude) {
      return {
          pre: function preLink(scope, iElement, iAttrs, controller) {
            scope[iAttrs.ngScopeElement] = iElement;
          }
        };
    }
  };

  return directiveDefinitionObject;
}); 
```

用法：

```
app.directive("myDirective", function() {
    return {
        template: '<div><ul ng-scope-element="list"><li ng-repeat="item in items"></ul></div>',
        link: function(scope, element, attrs) {
            scope.list[0] // scope.list is the jqlite element, 
                          // scope.list[0] is the native dom element
        }
    }
}); 
```

一些备注：

*   由于[嵌套指令的编译和链接顺序，](https://groups.google.com/forum/#!msg/angular/bBgJ6Tb-mHo/PDSU76pNPtAJ)您只能`scope.list`从`myDirective`s postLink-Function 访问，无论如何您很可能会使用它
*   `ngScopeElement`使用 preLink 函数，以便嵌套在元素中的指令`ng-scope-element`已经可以访问`scope.list`
*   不确定这在性能方面的表现如何

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-02T18:09:33.327

这个答案来的有点晚，但我也有类似的需要。

观察@ganaraj 在问题中写的评论，我需要的一个用例是，通过指令属性传递一个类名，以添加到模板中的 ng-repeat li 标记。

例如，使用如下指令：

```
<my-directive class2add="special-class" /> 
```

并获得以下html：

```
<div>
    <ul>
       <li class="special-class">Item 1</li>
       <li class="special-class">Item 2</li>
    </ul>
</div> 
```

[在这里](https://docs.angularjs.org/guide/directive)找到的与 templateUrl 一起应用的解决方案是：

```
app.directive("myDirective", function() {
    return {
        template: function(element, attrs){
            return '<div><ul><li ng-repeat="item in items" class="'+attrs.class2add+'"></ul></div>';
        },
        link: function(scope, element, attrs) {
            var list = element.find("ul");
        }
    }
}); 
```

刚刚使用 AngularJS 1.4.9 成功尝试过。

希望能帮助到你。

# iphone - 为什么 UITextview 没有 UITextField 之类的占位符属性

> ID：15881454
> 
> 赞同：21
> 
> 时间：2013-04-08T14:14:53.647
> 
> 标签：iphone, ios, objective-c, ios5, ios5.1

您好我正在使用 iPhone 应用程序，我知道 UITextfield 具有占位符属性。但是 UITextview 没有占位符属性。我知道如何为 UITextview 自定义占位符的过程。但请让我知道其中的区别。

UITextfield 继承自 UIControl，而 UIControl 又继承自 UIView...NSObject。而 UITextview 继承自 UIScrollView、UIView、UIresponder...NSOBject。但是与占位符属性的区别在哪里。

textfield 如何包含占位符属性，为什么 textview 不包含占位符？

请给出任何想法、建议和/或给出更好的解释。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-08T14:27:17.510

我不知道为什么 Apple 没有在 UITextView 上包含 placeHolder 属性。但是我能够使用包含占位符文本的 UILabel 子视图添加一个。

然后在委托回调中显示或隐藏它，如下所示

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    self.defaultLabel.hidden = YES;
}

- (void)textViewDidChange:(UITextView *)txtView
{
    self.defaultLabel.hidden = ([txtView.text length] > 0);
}

- (void)textViewDidEndEditing:(UITextView *)txtView
{
    self.defaultLabel.hidden = ([txtView.text length] > 0);
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-08T14:38:21.803

为什么`UITextField`具有占位符值，`UITextView`与它们的继承甚至编程无关。这是关于苹果如何看待他们的使用并更喜欢他们的使用。

**`UITextField`**是一个单行项目。它可用于输入用户名、密码、地址位或几乎任何东西。通常，您会将其中几个聚集在一起，并且可能很难确定哪个字段应该包含哪些数据而没有占位符文本。占位符让我们知道该字段的用途。

![文本字段示例](https://i.stack.imgur.com/oOCbp.png)

**`UITextView`**是一个文本块。通常是几行，通常有一个与之关联的标题。因此，占位符文本通常没有用处。文本视图也更有可能填充静态文本，这再次使占位符文本没有真正有用。

我认为苹果应该添加一个占位符属性`UITextView`吗？是的。在我需要的时候必须自己做是很烦人的。Apple 还在某些使用`UITextView`. 以下示例来自添加日历条目。

![带有占位符的文本视图示例](https://i.stack.imgur.com/Y1a46.png)

# r - 如何在 R 中用多边形剪辑 WorldMap？

> ID：15881455
> 
> 赞同：9
> 
> 时间：2013-04-08T14:14:55.117
> 
> 标签：r, gis, polygon, crop, clip

我使用 R 包栅格从[www.GADM.org导入了世界地图数据集。](http://www.GADM.org)我想将它剪辑到我创建的多边形以减小地图的大小。我可以检索数据并且可以毫无问题地创建多边形，但是当我使用“gIntersection”命令时，我收到一条模糊的错误消息。

关于如何剪辑我的世界地图数据集的任何建议？

```
library(raster)
library(rgeos)

## Download Map of the World ##
WorldMap <- getData('countries')

## Create the clipping polygon
clip.extent <- as(extent(-20, 40, 30, 72), "SpatialPolygons")
proj4string(clip.extent) <- CRS(proj4string(WorldMap))

## Clip the map
EuropeMap <- gIntersection(WorldMap, clip.extent, byid = TRUE) 
```

错误信息：

> RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_intersection") 出错：几何集合可能不包含其他几何集合此外：警告消息：在 RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_intersection") 中：spgeom1 和 spgeom2有不同的 proj4 字符串

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T22:48:17.287

您不需要使用 PBS（我已经学会了这一点，因为@flowla 发布的[r-sig-geo](https://stat.ethz.ch/pipermail/r-sig-geo/2012-June/015433.html)链接是我最初发布的问题！）。这段代码展示了如何在 rgeos 中完成这一切，这要归功于Roger Bivand 的[**各种**](https://stat.ethz.ch/pipermail/r-sig-geo/2013-January/017225.html)不同[**帖子**](https://stat.ethz.ch/pipermail/r-sig-geo/2012-June/015340.html)。这将是更规范的子集化方式，无需强制转换为 PolySet 对象。

错误消息的原因是您不能对 SpatialPolygons 集合进行 gIntersection，您需要单独执行它们。找出你想要使用的那些`gIntersects`。然后我使用`gIntersection`. 我在将 SpatialPolygons 对象列表传递回 SpatialPolygons 时遇到问题，这会将裁剪后的 shapefile 转换为 SpatialPolygons，这是因为并非所有裁剪后的对象都是`class` `SpatialPolygons`. 一旦我们排除了这些，一切正常。

```
# This very quick method keeps whole countries
gI <- gIntersects(WorldMap, clip.extent, byid = TRUE )
Europe <- WorldMap[which(gI), ]
plot(Europe)

#If you want to crop the country boundaries, it's slightly more involved:
# This crops countries to your bounding box
gI <- gIntersects(WorldMap, clip.extent, byid = TRUE)
out <- lapply(which(gI), function(x){ 
        gIntersection(WorldMap[x,], clip.extent)
   })

# But let's look at what is returned
table(sapply(out, class))
#   SpatialCollections    SpatialPolygons 
#                    2                 63 

# We want to keep only objects of class SpatialPolygons                 
keep <- sapply(out, class)
out <- out[keep == "SpatialPolygons"]

# Coerce list back to SpatialPolygons object
Europe <- SpatialPolygons(lapply(1:length(out), function(i) {
          Pol <- slot(out[[i]], "polygons")[[1]]
          slot(Pol, "ID") <- as.character(i)
          Pol
   }))

plot(Europe) 
```

![在此处输入图像描述](https://i.stack.imgur.com/vCZ78.jpg)

如果可以，我建议您查看[naturalearthdata](http://www.naturalearthdata.com/downloads/)。他们拥有高质量的 shapefile，这些文件会保持最新状态，并且会不断检查错误（因为它们是开源的，如果您发现错误，请通过电子邮件发送给他们）。国家边界位于*文化*按钮下方。您会看到它们也更轻量级，您可以选择适合您需要的分辨率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:24:42.700

稍微中间步骤怎么样？[我主要从R-sig-Geo](https://stat.ethz.ch/pipermail/r-sig-geo/2012-June/015433.html)采用了以下代码，我认为它应该可以解决问题。您将需要“maptools”和“PBSmapping”软件包，因此请确保已安装它们。这是我的代码：

```
# Required packages
library(raster)
library(maptools)
library(PBSmapping)

# Download world map
WorldMap <- getData('countries')
# Convert SpatialPolygons to class 'PolySet'
WorldMap.ps <- SpatialPolygons2PolySet(WorldMap)
# Clip 'PolySet' by given extent
WorldMap.ps.clipped <- clipPolys(WorldMap.ps, xlim = c(-20, 40), ylim = c(30, 72))
# Convert clipped 'PolySet' back to SpatialPolygons
EuropeMap <- PolySet2SpatialPolygons(WorldMap.ps.clipped, close_polys=TRUE) 
```

我刚刚对其进行了测试，它可以正常工作。不过，将 SpatialPolygons 转换为 PolySet 需要一些计算时间。

干杯，弗洛里安

# sockets - Boost 中的单线程服务器

> ID：15881461
> 
> 赞同：2
> 
> 时间：2013-04-08T14:15:07.317
> 
> 标签：sockets, select, boost, boost-asio

我有一个服务器类，它将启动两个线程，一个是接受所有传入的连接并将这些套接字放入一个向量中。另一种是扫描这个套接字向量，找出哪个被读为读/写，然后做一些事情。

所以问题是在第二个线程（成员函数）中，我如何实际扫描这些套接字？

人们建议使用 unix socket 的 select() 但我决定在任何地方都使用 boost，所以我正在寻找 boost 中的解决方案。

我已经阅读了 boost.org 和这个站点的一些文档。人们说 io_service 是 select 的抽象。我不明白。我只是绑定函数/对象然后使用 io_service::post() 将它们放入队列并使用 io_service::run() 执行吗？

* * *

更新，在我的理解中，每次你使用包含 io_service 对象的构造函数实例化一个新的套接字对象时，这个套接字对象都会与 io_service 对象相关联，因为我只有一个 io_service 对象，所以当我调用 io_service 时会执行这些套接字对象。跑（）

但是，问题是，我如何将handle_function分配给那些套接字，我看到人们像这样使用acceptor.async_accept(socket, boost::bind(handler, &socket))，但我想使用accept而不是async_accept()，但是 accept() 函数不能用于将处理函数绑定到此套接字

我该怎么办？

```
class Server
{
  io_service IOService;

  std::vector<boost::....::socket> SocketVector;

  listen()

  {
    //blockingly accept all incoming connection and bind socket with handler function;
  }

  process HandleRequest()
  {
    //io_service.run()
  } 
} 
```

* * *

```
int main()
{
    Server myServer;
    boost::thread thread1(&Server::listen, &myServer);
    boost::thread thread2(&Server::HandleRequest, &myServer);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:08:22.223

您的设计听起来过于复杂，可能无法与 Boost Asio 很好地集成。是的，您可以为每个套接字使用一个线程，但是当有多个并发连接时，它[很快就会分崩离析。](http://en.wikipedia.org/wiki/C10k_problem)

我建议重新考虑您的设计并将其基于异步操作。研究asio 文档中包含[的示例。](http://www.boost.org/doc/libs/release/doc/html/boost_asio/examples.html)[boost-asio](/questions/tagged/boost-asio "显示标记为“boost-asio”的问题")标签中也有大量信息。

# c++ - C++, 跳跃精灵, 碰撞

> ID：15881464
> 
> 赞同：0
> 
> 时间：2013-04-08T14:15:12.390
> 
> 标签：c++, collision-detection

我正在尝试使用 C++ 实现非常基本的平台/精灵行为。

到目前为止，我已经成功渲染了 2 个平台和一个可以移动和跳跃的精灵。下面是一段模拟跳跃和重力的代码片段。

如果我`2,3, & 6`从注释为“//gravity”的片段中注释掉行，我不能完美地从下面跳过平台，但我无法登陆它......如果我让它们保持在下面，（使用`check_collision`功能），我可以成功跳上平台并左右移动。不幸的是，如果我再按一次跳跃 ( `key119`)，我会从平台上掉下来，有时甚至会粘在平台下面而不是再跳一次。

我忘记实现什么来让精灵再跳一次？

```
 if(keyDown[119]){                                               //While 'w' key is pressed and not colliding
        if(!check_collision(sprite,platform)                        //If not colliding...
            && !check_collision(sprite,platform2)){
            y_Pos += jumpHeight;                                    //Jump up
            if(keyDown[97] ){x_Pos -= velocity*jumpLength;}         //While 'w' and 'a' are pressed, simulate arc of jump/gravity
            if(keyDown[100]){x_Pos += velocity*jumpLength;}         //While 'w' and 'd' are pressed, simulate arc of jump/gravity
        }
        else                                                        //Else you must be colliding, bounce off
            y_Pos -= jumpHeight;
    }
    if(keyDown[115]){y_Pos -= velocity;}                            //While 's' key is pressed
    if(keyDown[97] ){x_Pos -= velocity;}                            //While 'a' key is pressed
    if(keyDown[100]){x_Pos += velocity;}                            //While 'd' key is pressed

    //gravity
    if(y_Pos>0){                                                    //If above ground
        if(!check_collision(sprite,platform)                        //And not colliding
            && !check_collision(sprite,platform2)){
            gravity-=5*delta;                                       //Calculate gravity force
            y_Pos+=gravity;                                         //Descend to ground
        }
        if(keyDown[97] ){x_Pos -= velocity*2;}                      //While off ground, whilst 'a' is pressed, move left
        if(keyDown[100]){x_Pos += velocity*2;}                      //While off ground, whilst 'd' is pressed, move right
    }
    else{gravity=0;}                                                //Else, on ground, so gravity force is zero 
```

请原谅我的天真并耐心等待，我正在自学，我们都必须从某个地方开始。谢谢。

代码太多，无法发布整个程序，但如果您有兴趣，可以在[这里找到完整的源代码](http://pastebin.com/VGg1RXAF)

# iphone - 当在后台线程上调用函数时，具有透明图像的精灵显示为白框

> ID：15881465
> 
> 赞同：0
> 
> 时间：2013-04-08T14:15:13.197
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在检测面部特征并显示通过透明图像创建精灵的位置，如果我正在调用在主线程上添加精灵的函数精灵显示正确但是当我在后台线程或除主线程之外的任何其他线程上调用此函数时，它显示白框。下面我上传了屏幕截图和代码片段。

![输出截图](https://i.stack.imgur.com/ZR3v6.png)

```
- (id)init{

       if( (self=[super init])) {

      [self addBackImageAndControls];
  }
return self;
 }

-(void)addBackImageAndControls{

    UIImage *scalledImage =[originalImage1 scaleToSize:CGSizeMake(320, 480)];
    texture2D =[[CCTexture2D alloc] initWithImage:originalImage1];

    [self body_init];

    self.isTouchEnabled = YES;

    CCMenuItem *done = [CCMenuItemFont itemFromString:@"Done" block:^(id sender) {[self done];}];
    done.position = ccp(40, 60);
    CCMenu *starMenu = [CCMenu menuWithItems:done, nil];//
    starMenu.position =CGPointZero;
    [self addChild:starMenu z:0 tag:125];

    //[self callFunc:scalledImage];

   [NSThread detachNewThreadSelector:@selector(callFunc:) toTarget:self withObject:scalledImage];

}

-(void)done{

  md.LipRect =  [self lipRect];

  [self removeAllChildrenWithCleanup:YES];

   CCMenuItem *item1 = [CCMenuItemFont itemFromString:@"One" block:^(id sender)
      {[self sizeOne];}];
   item1.position = ccp(40, 40);

  CCMenuItem *item2 = [CCMenuItemFont itemFromString:@"Two" block:^(id sender)
    {[self sizeTwo];}];
  item2.position = ccp(110, 40);

  CCMenuItem *item3 = [CCMenuItemFont itemFromString:@"Three" block:^(id sender)
  {[self sizeThree];}];
  item3.position = ccp(180, 40);

  CCMenu *starMenu = [CCMenu menuWithItems:item1,item2,item3, nil];//
  starMenu.position =CGPointZero;
  [self addChild:starMenu];

}

 -(void)callFunc:(UIImage*)image{

   [self opencvFaceDetect:image];
   [self opencvEyeDetect:image];
   [self opencvNoseDetect:image];

   [self LipsEffect];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:44:04.310

如果它正在更新 UI，则必须在主线程上完成。像这样包装 UI 更新：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // UI here
}); 
```

# html - :nth-child() 不工作

> ID：15881468
> 
> 赞同：2
> 
> 时间：2013-04-08T14:15:21.593
> 
> 标签：html, css, css-selectors

我正在尝试使用 :nth-child(5); 在背景上拉伸图像以进行第三次打印。但它没有抓住它。难道我做错了什么？

```
table#OppPracticeOverview tr th {
    padding:5px !important;
    background-color:transparent;
}
table#OppPracticeOverview tr th img {
    width:47px;
    height:22px;
    float:left;
    margin:-5px 0 0 -42px;
    position:absolute;
    z-index:-1;
}
table#OppPracticeOverview tr th img:nth-child(5) {
    width:110px;
    height:22px;
    float:left;
    margin:-5px 0 0 -105px;
    position:absolute;
    z-index:-1;
} 
```

HTML：

```
<table id="OppPracticeOverview">
<tbody>
    <tr>
        <th>
            Patients
            <img src="/images/img-CCCCCC.png">
       </th>
       <td>
       <th>
           On Hold
           <img src="/images/img-CCCCCC.png">
        </th>
        <td>
        <th>
           Reattribution Request
          <img src="/images/img-CCCCCC.png">
       </th>
       <td>
   </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:21:12.427

你几乎是对的，只需将`nth-child`from移动`img`到`th`这样的位置：`table#OppPracticeOverview tr th:nth-child(5) img`

演示：http: [//jsfiddle.net/G79X9/1/](http://jsfiddle.net/G79X9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:19:27.923

它是相对于它的父母的第 n 个孩子。所以你说的是“第五个`img`它的父母`th`”。您的 html 很混乱（如错误），但我认为您应该尝试定位`th`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:20:51.893

我不工作，因为你们`th`都没有 5 张图片。我想你想要

```
table#OppPracticeOverview tr th:nth-child(5) img {...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-05T15:06:12.153

就我而言，我犯了一个小错误

```
.someclassA .someclassB: nth-child(odd){ 
```

如上所示，someclassB: 和 nth-child 之间有一个空格。就是这样..通过删除它开始工作的空间:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-24T12:30:56.930

**有时 nth-child 不起作用试试这个 nth-of-type()**

```
table#OppPracticeOverview tr th:nth-of-type(5) img 
```

这对我有用

# java - 如何从用户那里获取代码？

> ID：15881469
> 
> 赞同：0
> 
> 时间：2013-04-08T14:15:23.600
> 
> 标签：java, graph, equation-solving

请参阅我想使用 Netbeans 在 Java 中执行此方程图绘图仪。我正在使用 Graphics 2D 绘制个别点。我的问题是是否可以从用户那里获取一个方程式并将其放入代码中？

例子 ： `float y=(float) ( Math.sin(x/100)*100);`

假设用户想要查看 cos 图，是否可以输入`Math.cos(x/100)*100`并将其等同于 y ？

如果不是我该如何解决这个问题？赞赏任何替代方法

# networking - OPNET 上的无线网络动画

> ID：15881473
> 
> 赞同：2
> 
> 时间：2013-04-08T14:15:38.253
> 
> 标签：networking, simulation, wireless

当我设置无线场景并记录数据包流，然后运行模拟然后播放 2D 动画时，数据包流是不可见的，尽管它在任何有线网络的情况下都是可见的，那么是否需要任何配置来使数据包流可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T09:22:56.843

Modeler 不提供使用 2D 动画的无线数据包动画。最好的方法是在调试模式下运行模拟。在调试模式下，您可以看到无线链路中的数据包传输。像涟漪一样。

# c - C 参数传递 - 提出的解决方案

> ID：15881475
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:15:41.293
> 
> 标签：c, eclipse-cdt

有问题的行：

```
void deleteController(Controller* ctrl) {
    ...  
    destroy(ctrl->repo);
    ...
} 
```

从不兼容的指针类型传递 'destroy' 的参数 1 [默认启用]

问题函数的标题：

```
void destroy(Vector* v); 
```

控制器结构：

```
typedef struct {
    TransRepository* repo;
} Controller; 
```

TransRepository 结构：

```
typedef struct {
    Vector* TList;  
    char* fileName;
} TransRepository; 
```

向量结构

```
typedef struct {     
    TElem* elems;   // vector elements   
    int len;        // #of elements from the vector      
    int capacity;   // maximum capacity of the vector

    CmpFun cmp;     // comparison function for two generic elements 

    CpyFun cpy;     // cloning function for a generic element    
    DelFun del;     // deallocation function for a generic element  
} Vector; 
```

附加定义：

```
typedef void* TElem;
typedef int (*CmpFun)(TElem, TElem);
typedef TElem (*CpyFun)(TElem);
typedef void (*DelFun)(TElem); 
```

我想过改变参数的类型， `destroy()` 但效果不好。所以我在参数部分添加了另一个字段，认为该函数没有找到它需要的东西。

```
destroy(ctrl->repo->TList); 
```

错误消失了，但我正在等待您确认我做了正确的事情（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:23:47.907

是的...`destroy`功能说：

```
void destroy(Vector* v); // I want a pointer to a Vector 
```

你给了它：

```
destroy(ctrl->repo); // A TransRepository pointer 
```

所以当然不开心。由于`TransRepository`结构包含指向向量的指针，答案是肯定的，修复*应该*是传递：

```
destroy(ctrl->repo->TList); 
```

没有看到任何其他代码，我会说你做了正确的事情。

# macros - 如何在 Confluence 中显示页面的最高访问用户？

> ID：15881476
> 
> 赞同：2
> 
> 时间：2013-04-08T14:15:45.107
> 
> 标签：macros, wiki, confluence

如何在 Confluence 中显示页面的热门访问用户？我试过宏“顶级用户”，但你只能设置“限制这些空间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T07:24:42.003

ViewTracker[宏](https://marketplace.atlassian.com/plugins/ch.bitvoodoo.confluence.plugins.viewtracker)将显示页面访问者。[跟踪插件](https://marketplace.atlassian.com/plugins/net.customware.confluence.plugin.tracking)也很有用。如需更高级的信息收集，请使用[Google Analytics Plugin](https://marketplace.atlassian.com/plugins/com.go2group.plugins.confluence-ga)。或者，使用[Piwik](http://piwik.org)并在空间或站点级别插入跟踪 JS 代码。

# mysql - NULL 值在连接期间将所有内容都变为 NULL

> ID：15881483
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:16:11.273
> 
> 标签：mysql, sql, concatenation

我正在使用的 DBMS 是 MySQL。

这是表格：

```
 AUTHOR
author_id | first_name | last_name | patronymic
-----------------------------------------------
     1    | John       | Bush      | NULL
     2    | Sergey     | Burov     | Romanovich
     3    | NULL       | Filin     | NULL 
```

如果我发出此查询：

```
SELECT author_id,
       CONCAT(first_name, ' ', last_name,  ' ', patronymic) AS full_name
FROM   author; 
```

输出如下所示：

```
author_id | full_name
-----------------------------------
     1    | NULL
     2    | Sergey Burov Romanovich
     3    | NULL 
```

因此，正如您从示例中看到的那样，如果一个字段具有 NULL 值，那么在连接过程中，整个事物都会被设置为 NULL。请解释一下，如何使 MySQL 将 NULL 值转换为长度为 0 的字符串，或者简单地使其不连接 NULL 值？

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:18:31.377

您可以使用[CONCAT_WS](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)使用分隔符连接字符串，并跳过空值：

```
SELECT author_id,
       CONCAT_WS(' ', first_name, last_name,  patronymic) AS full_name
FROM   author; 
```

请[在此处](http://sqlfiddle.com/#!2/bf5c9/1)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:17:43.487

这是直接回答您的问题的方法：

```
SELECT author_id,
       CONCAT(ISNULL(first_name,''), ' ', 
              ISNULL(last_name,''),  ' ',
              ISNULL(patronymic,'')) AS full_name
FROM author; 
```

甚至这个（解决空中间名的双空格问题）：

```
SELECT author_id,
       CONCAT(ISNULL(CONCAT(first_name,' '),''), 
              ISNULL(CONCAT(last_name,' '),''),
              ISNULL(patronymic,'')) AS full_name
FROM author; 
```

但这将回答真正的问题——在这种或更复杂的情况下进行良好格式化的最佳解决方案：

[SQL 中的 FirstName、LastName 太复杂？](https://stackoverflow.com/questions/1851037/firstname-lastname-in-sql-too-complex)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:17:48.660

在所有列上使用 a`COALESCE`以保证它们永远不会返回 null（通过返回值或空字符串）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:21:22.427

```
SELECT author_id,
   CONCAT(ifnull(first_name,''), ' ', ifnull(last_name,''),  ' ', ifnull(patronymic,'')) AS full_name FROM   author; 
```

# java - JAVA从键盘读取一个字符输入-循环中的'\ r'

> ID：15881486
> 
> 赞同：0
> 
> 时间：2013-04-08T14:16:29.757
> 
> 标签：java

如何从键盘循环读取字符输入 - '\r'？我测试了2种方法。第一种方法是：在第一轮循环中，for can't stop in line znak = (char)System.in.read(); 我不知道为什么会这样。

```
public static void lista() {
    Ewidencja tmp = null;
    char znak = 0;
    for(Ewidencja el: Lista)
    {
        if (znak == 'Q')
        {
            el = tmp;
        }

        tmp = el;

        System.out.println("[Enter] - zapisz");
        System.out.println("[Q] - cofnij");

        try {
            znak = (char)System.in.read();
            System.out.println(znak);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if(znak == '\r')
        {
            continue;
        }
        else if(znak != 'Q')
        {
            System.exit(-1);
        }
    }
} 
```

第二种方法是使用类 Scanner，但此方法不读取字符 Enter '\r'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:38:18.800

您也可以使用 a`BufferedInputReader`而不是直接访问 System.In：

BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in)) ;

现在您可以决定是否喜欢阅读 a`char`或其他内容 ( `String, Integer...`)

```
String string ="";
try{
   string = bufferedReader.readLine() ;
}catch(IOException e){
   System.exit(-1);
}
if(string.trim().equals("")){
   continue;
}else  if(string.trim().equalsIgnoreCase("Q")){
   System.exit(-1);
}
... 
```

这样，您可以更轻松地避免检测`'\n'`或`'\r'`处理来自用户的“不清楚”输入（'q' != 'Q' 并且如果用户不小心输入了两个字母等，则无法读取字符。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:06:46.337

使用您问题中的一些代码，这是如何让扫描仪检测被按下的输入键。

```
Scanner scan = new Scanner(System.in);

for(Ewidencja el: Lista) {
    znak = scan.nextLine();
    System.out.println(znak);

    if(znak.equals("")) {
        continue;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:05:58.197

感谢您的任何回复。这段代码对我很有帮助，因为我不知道方法等于。

```
if(znak.equals("")) 
{ 
    continue; 
} 
```

# sql - SQL 更新 - 多列

> ID：15881487
> 
> 赞同：27
> 
> 时间：2013-04-08T14:16:33.120
> 
> 标签：sql, tsql, sql-server-2012

我想使用`Select`语句根据第二个表中的值更新表中的多个列，以获取如下值：

```
UPDATE tbl1 
SET (col1, col2, col3) = (SELECT colA, colB, colC 
                          FROM tbl2 
                          WHERE tbl2.id = 'someid') 
WHERE tbl1.id = 'differentid' 
```

但是，似乎不可能“设置”多个列名 - 是否有替代方法而不是为每一列编写单独的更新语句？

```
UPDATE tbl1 
SET col1 = (SELECT colA FROM tbl2 WHERE tbl2.id = 'someid') 
WHERE tbl1.id = 'differentid'

UPDATE tbl1 
SET col2 = (SELECT colB FROM tbl2 WHERE tbl2.id = 'someid') 
WHERE tbl1.id = 'differentid'

UPDATE tbl1 
SET col3 = (SELECT colC FROM tbl2 WHERE tbl2.id = 'someid') 
WHERE tbl1.id = 'differentid' 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-08T14:28:00.900

```
update tbl1
set col1 = a.col1, col2 = a.col2, col3 = a.col3
from tbl2 a
where tbl1.Id = 'someid'
and a.Id = 'differentid' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T14:19:36.667

这应该工作 -

```
 Update Tbl1 
    SET 
    Col1 = B.ColA,
    Col2 = B.ColB,
    Col3 = B.ColC
    FROM
    Tbl2 B
    Where
    B.Id = 'Someid' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-01-28T14:21:54.387

[你可以在这里](https://docs.microsoft.com/en-us/sql/t-sql/queries/update-transact-sql?view=sql-server-ver15#b-updating-multiple-columns)找到答案。

# security - 在 HornetQ 中使用 LDAP

> ID：15881490
> 
> 赞同：1
> 
> 时间：2013-04-08T14:16:41.263
> 
> 标签：security, ldap, jaas, hornetq

HornetQs 默认的 SecurityManager (HornetQSecurityManagerImpl) 将检查存储在 hornetq-users.xml 中的用户/角色。我想使用 LDAP 来验证用户；我有两种方法：

1.  使用 Jass，并将其与 LD​​AP 一起用于对用户进行身份验证。
2.  手动实现 SecurityManager 接口，并在我自己的安全管理器实现中使用 LDAP。

哪一个更好？其他方法？我应该怎么办？（经验，样品）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:48:10.207

I'd say it's always better to use something that's ready and tested. Using JAAS with Ldap will give you an easier path as that should work nicely.

On the hornetq's distribution there's an example showing how to configure JAAS. You can just get the distribution zip at [http://www.jboss.org/hornetq/downloads.html](http://www.jboss.org/hornetq/downloads.html) and refer the the examples that are part of hornetq already.

# paypal - 贝宝自适应并行支付

> ID：15881491
> 
> 赞同：1
> 
> 时间：2013-04-08T14:16:41.943
> 
> 标签：paypal, parallel-processing, split

好的，这里是：

**假设：**假设我正在为各种自由艺术家在线销售数字内容。艺术家们将他们的内容提交到我的网站，我将它们提供给公众，但需要付费。

客户进入网站以购买对内容的访问权。一旦客户通过 PayPal 付款，付款将通过使用并行自适应付款自动在我的业务（接收者 1）和艺术家（接收者 2）之间分配。

**问题：**是否可以为每个提交的内容分配某种类型的“艺术家 ID”，将艺术家的内容链接到他们的 PayPal 帐户，以便他们在每次销售时获得安全付款，同时仍保持每次拆分付款交易对企业的付款？请记住，将有多个艺术家，每个艺术家提交多条内容。

我希望我没有让这比现在更复杂，但如果有人可以帮助解决这个问题，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:52:37.417

我不确定我是否完全理解你的问题。但是，您可以在其中一个可用变量中传递一个 id，例如 item id、custom 等。如果您试图最终获得某种类型的标识符。

# actionscript-3 - AS3 FLASH AIR - 加载程序找不到 url

> ID：15881493
> 
> 赞同：1
> 
> 时间：2013-04-08T14:16:49.430
> 
> 标签：actionscript-3, loader

我在使用 Loader 类加载图像时遇到问题。有人可以看到我做错了什么吗？

```
// get file folder location
var file = new File(File.applicationStorageDirectory.nativePath);

// convert to string
var fileString:String = file.url.toString();

// remove string characters
    fileString = fileString.split('file:///').join('');

// create loader
var loader:Loader = new Loader();

// create request
 var urlReq:URLRequest = new URLRequest(fileString+'/logo.jpg');

// load request
   loader.load(urlReq); 
```

当我测试它给我一个'错误＃2044：未处理的IOErrorEvent：。文本=错误 #2035：找不到 URL。如果我使用 loader.contentLoaderInfo 来检查 IOERROR.IO_ERROR，它会给我“1119 通过静态类型 flash.display:Loader 的引用访问可能未定义的属性 IOERROR”

对我做错了什么有任何想法吗？我也试过从同一个文件夹中加载 .jpg

```
var urlReq = new URLRequest('logo.jpg'); 
```

测试应用程序在但仍然得到“找不到 URL”

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:05:06.677

这很简单：不要使用`Loader`，`FileStream`而是使用。由于文件保存在应用程序存储目录中（或者我认为至少是这样），因此您可以直接读取它，而不是使用加载器。

```
var file:File = File.applicationStorageDirectory.resolvePath( "logo.jpg" );
var fs:FileStream = new FileStream();
fs.open( file, FileMode.READ );
var bmp:Bitmap = fs.readObject();
fs.close();

this.addChild( bmp ); 
```

您应该尽可能避免使用 Loader。Loader 类中有很多额外的重量，这可能会消耗性能。使用`Bitmap`而不是，这是显示图像的最低级别的方式，如果您需要赋予它交互性，则将其包装在一个`Sprite`（或使用而不是位图和 Sprite，如果使用 Flex）。`Image`

# objective-c - Objective-C 中参数的命名约定

> ID：15881495
> 
> 赞同：2
> 
> 时间：2013-04-08T14:16:54.943
> 
> 标签：objective-c, parameters, coding-style, naming-conventions

在Objective-C中命名参数时，如果我对类似方法使用相同的名称，这是否重要——也就是说，对于文档/易读性是可取的？例如：

```
@interface Zookeeper : Employee

-(void) washAnimal:(Animal *)someAnimal;
-(void) feedAnimal:(Animal *)someAnimal;
-(void) trainAnimal:(Animal *)someAnimal;

... 
```

或者，应该是这样的：

```
@interface Zookeeper : Employee

-(void) washAnimal:(Animal *)animalToBeWashed;
-(void) feedAnimal:(Animal *)animalToBeFed;
-(void) trainAnimal:(Animal *)animalToBeTrained;

... 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:19:57.827

在您给出的示例中，我只是将`animal`其用作所有 3 的名称。查看`UITableViewDelegate`和`UITableViewDataSource`方法 - 相关表格视图的所有参数都命名为`tableView`.

# python - 使用 Python iterparse 检索 XML 属性值

> ID：15881497
> 
> 赞同：4
> 
> 时间：2013-04-08T14:16:58.797
> 
> 标签：python, xml-parsing, elementtree, xml-attribute, iterparse

我试图找出如何在 Python (2.7) 中使用 cElementTree iterparse 检索 XML 属性值。我的 XML 是这样的：

```
<root>
  <record attr1="a" attr2="b" attr3="c" ... />
  <record attr1="x" attr2="y" attr3="z" ... />
  ...
</root> 
```

我的代码是这样的：

```
context = ET.iterparse(sys.stdin, events=('start','end'))
context = iter(context)
event, root = context.next()

for event, elem in context:
    if event == 'end' and elem.tag == 'record':
        # get the attributes!! 
    elem.clear()
    root.clear() 
```

我正在处理来自标准输入的大数据。我没有运气弄清楚这一点。有人可以告诉我如何（最佳？）这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:35:02.553

哎呀，盯着我的脸，有点：[http ://docs.python.org/2/library/xml.etree.elementtree.html#element-objects](http://docs.python.org/2/library/xml.etree.elementtree.html#element-objects)

总之：

```
elem.get('attr_name', default_value) 
```

或者，

```
for name, value in elem.items(): 
```

或者，

```
elem.attrib() - dictionary 
```

我还应该补充一点，有必要修改问题中发布的代码：

```
...
if event == 'start' and elem.tag == 'record':
... 
```

# java - 用版本控制保存java对象树？

> ID：15881503
> 
> 赞同：0
> 
> 时间：2013-04-08T14:17:18.043
> 
> 标签：java, serialization

`ObjectOutputStream`我有一个 Java 应用程序，它使用默认的 java 对象序列化（等等）将对象树保存到文件中。这很好用。

当我将字段添加到对象树中的对象时，就会出现问题。当我现在加载旧对象树时，我得到一个`ClassException`，这当然是有道理的，因为该对象/类已更改并且旧类与新类不匹配。

现在我可以编写不同版本的加载方法，以便它可以处理旧的对象树，但我怀疑这可能变得不太容易管理和维护。

我想知道是否有更好的方法可以在支持版本控制的 java 中保存对象树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:19:49.480

您可以使用这种方法（实现`readObject`和`writeObject`）来处理模式迁移：[http ://www.javaworld.com/javaworld/jw-02-2006/jw-0227-control.html](http://www.javaworld.com/javaworld/jw-02-2006/jw-0227-control.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:39:13.980

在 Serializable 类中使用 ObjectInputStream 和 ObjectOutputStream 类的 readObject() 和 writeObject() 方法，以便在从文件 ObjectOutputStream 序列化/反序列化对象时定义默认行为 ObjectOutputStream oos = new ObjectOutputStream(file/path/url); oos.writeObject(序列化对象); oos.close(); oos.flush(); ObjectInputStream ois = new ObjectInputStream(file/path/url/request); Object obj = (TypeCast to proper Object)ois.readObject();

# perl - 从现有 CSV 创建新 CSV

> ID：15881510
> 
> 赞同：0
> 
> 时间：2013-04-08T14:17:37.737
> 
> 标签：perl, csv

我设法从 CSV 中提取姓名和电子邮件地址列。

电子邮件字段是唯一始终存在的字段。姓名字段可以是空白的，只有名字，有时是名字和姓氏。像这样：

```
Name, Email
Fred, fred@flinstones.com
Wilma Flinstone, wima@flintstones
,barny@rubble.com 
```

我想做的是从上面创建一个新的 CSV，如果可能的话，将名称分成第一个和最后一个。所以上面看起来像这样：

```
First Name, Last Name, Email
Fred, ,fred@flinstones.com
Wilma, Flinstone, wima@flintstones
,,barny@rubble.com 
```

我怎么能在 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:25:30.990

```
($fullname, $email) = split(/,/);
($first, @last) = split(/ /, $fullname);
print join(',', $first, "@last", $email), "\n"; 
```

# ruby - :string 的未定义方法错误

> ID：15881511
> 
> 赞同：1
> 
> 时间：2013-04-08T14:17:39.847
> 
> 标签：ruby

我有这个代码...

```
foo = opt_source.downcase.camelize
"#{foo}".new.start_check 
```

这应该调用一个类和方法 start_check，但我得到一个未定义的方法错误

> “Abcd”的未定义方法`start_check'：String（Abcd是foo代表的类）

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:27:04.813

您需要将该字符串转换为常量。从历史上看，这是这样做的，`eval`但这会导致您的代码中出现安全问题——从来没有`eval`用户提供的字符串。

正确的方法（在 Rails 中）是通过[String#constantize](http://apidock.com/rails/String/constantize)：

```
foo = opt_source.downcase.camelize
foo.constantize.new.start_check 
```

对于 ruby​​，使用[Kernel#const_get](http://apidock.com/ruby/Module/const_get)：

```
foo = opt_source.downcase.camelize
Kernel.const_get(foo).new.start_check 
```

在调用你的方法之前不要忘记检查错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:26:41.280

只是`eval(foo).new.start_check`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:12:11.030

从复数表名创建一个类名，就像 Rails 为表名到模型所做的那样。

[http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-classify](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-classify)

如果您从活动记录中调用方法，camelize 不适合将复数字符串转换为活动记录类

例如：

```
u = "batteries"
u.camelize #=> "Batteries"
u.classify #=> ""Battery" 
```

尝试

```
opt_source.classify.constantize.new.send(:start_check) 
```

# asynchronous - 如何同步附加 YUI3 模块？

> ID：15881512
> 
> 赞同：2
> 
> 时间：2013-04-08T14:17:42.113
> 
> 标签：asynchronous, module, yui, loading

我想同步附加 YUI 模块。

```
Given the YUI modules are already on the page
When I run: console.log YUI().use('base').Base
Then I get `undefined` 
```

然而，

```
When I run: YUI().use('base', (Y) -> console.log Y.Base)
Then I eventually get the Y.Base ctor function 
```

看起来加载器正在附加异步，因为它使用回调方法工作正常。IIRC 第一种方法应该也可以工作。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:30:30.223

YUI 模块确实希望通过回调中的 Y 对象来调用。如果您确定您需要的所有代码都已加载到页面上，您可以使用 *. 有关示例，请参见[https://github.com/evangoer/yui3-cookbook/blob/master/examples/loading/use_synchronous.html 。](https://github.com/evangoer/yui3-cookbook/blob/master/examples/loading/use_synchronous.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:09:25.390

如果您在 Node.js 等受控环境中使用 YUI，那么您应该能够使用`useSync`配置：

```
YUI({ useSync: true }).use('base').Base 
```

但是在浏览器或任何其他客户端运行时，您应该坚持异步性质，`Y.use`因此加载器可以根据功能检测等计算要附加的正确模块列表的工作。将模块手动包含在 pase 中是只是不够。想象一下`scrollview-base`在 IE 中，它需要一个名为 的特殊模块`scrollview-base-ie`，除非您在构建包含该模块的初始标记时仅在 IE 中运行时进行检测，否则您将缺少一个模块。同样，在加载内容时坚持异步模式。

# python - Reducer 通过 sys.stdin 获取多个键？

> ID：15881513
> 
> 赞同：0
> 
> 时间：2013-04-08T14:17:43.340
> 
> 标签：python, hadoop, hadoop-streaming

我知道与 Key 关联的所有值都发送到单个 Reducer。Reducer 是否可以通过其标准输入一次获取多个键？

我的用例是将行拆分为键值对，然后我想将与键关联的所有行发送到 API。我看到多个密钥一次发送到 API 中。

这是我的工作正在运行的一些示例代码

映射器

```
def main():
    for line in sys.stdin
        part1 = get_part1(line)
        part2 = get_part2(line)
        key = '%s - %s' % (part1, part2)
        print '%s\t%s' % (key, line) 
```

减速器

```
def main():
    my_module.sent_to_api(sys.stdin) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:16:27.170

虽然与单个键关联的所有值都发送到单个减速器，但该减速器可能获得的不仅仅是一个键，因此每个输出文件中都会出现多个键。

# android - 点击图标启动谷歌地图活动，但不显示路线

> ID：15881516
> 
> 赞同：1
> 
> 时间：2013-04-08T14:17:47.963
> 
> 标签：android, navigation, maps, routes

我想显示两点（标记）之间的路线，然后将标记（端点）的纬度和经度字符串传递给uri。第二点是 gps 位置，我也将它的属性传递给 uri。我在 onClick 方法中有这个 android 代码。当我第一次单击标记时，路线显示良好。当我使用后退按钮（按两次）退出谷歌地图并立即再次点击标记时，不会显示路线，但如果从按下后退按钮（大约 8 秒）经过一段时间后，路线会正常显示。

```
public void onClick(DialogInterface dialog, int id) {
    String uri = "http://maps.google.com/maps?saddr="+s1+","+s2+"&daddr="+s3+","+s4;
    Intent intent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse(uri));
    intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
    startActivity(intent);                  
} 
```

# ios - 在 iOS 模拟器中进行多次交互后，UIPoover 延迟消失

> ID：15881518
> 
> 赞同：1
> 
> 时间：2013-04-08T14:17:51.027
> 
> 标签：ios, xamarin.ios, ios-simulator, uipopover

我正在使用 monoTouch 使用 UITextField 对应用程序进行编程，该应用程序显示带有结果的弹出框（例如带有一些建议的 Google 搜索中的文本字段）。选择 cellTable 时，我的弹出框将隐藏。一切似乎都正常，但是当我与它进行太多交互时，Popover 延迟了将近 4 秒才消失。这让用户感到沮丧。

这是我显示弹出框的代码：

```
partial void showPopover (MonoTouch.Foundation.NSObject sender){
            UITextField from = (UITextField)sender;

            string[] tableItems = {"aaaa","bbbb"};
            var tableController = new UITableViewController();
            var navigationC = new UINavigationController(tableController);

            tableController.Title = from.Placeholder;//dinamico
            UITableView table = new UITableView(from.Frame);
            tableController.View = table;
            table.Source = new PopoverTableSource(tableItems);
            if( popoverController == null ){
                popoverController = new UIPopoverController(navigationC);
                popoverController.PopoverContentSize = new SizeF (320, 320);
            }
            else{
                popoverController.SetContentViewController(navigationC,true);
            }

            popoverController.PresentFromRect (from.Frame, View, UIPopoverArrowDirection.Up, true);
        } 
```

这是关闭 Popover 的功能：

```
public void update(int tag, string selectedChart){
            if(popoverController.PopoverVisible){
                popoverController.Dismiss (true);
            }
            popoverController = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-13T12:01:40.380

*由@jonathanpeppers 和 OP 解决*

慢速动画是 iOS 模拟器中的一项功能。
要禁用（或启用），请转到 Simulator Menu > Debug > Toggle Slow Animations。( `Cmd`+ `T`)。

# r - 使用 HTTP 请求从冗余 URI 中识别 Web 对象

> ID：15881519
> 
> 赞同：1
> 
> 时间：2013-04-08T14:17:51.083
> 
> 标签：r, http, rcurl, httr

我正在为一个结构不正确的网络服务器日志文件而苦苦挣扎，我想总结一下以分析托管站点的出席情况。对我来说不幸的是，该站点的架构很混乱，因此没有托管对象（html 页面、jpg 图像、pdf 文档等）的索引，而多个 URI 可以引用同一页面。例如 ：

*   `http://www.site.fr/main.asp?page=foo.htm`
*   `http://www.site.fr/storage-tree/foo.htm`
*   `http://www.site.fr/specific.asp?id=200`
*   `http://www.site.fr/specific.asp?path=/storage-tree/foo.htm`

等等，在重复的 URI 之间没有任何明显的规律性。

**如何在概念上和实践上有效地识别页面？**正如我看到的问题，这个想法是构建一个索引，将日志的 URI 与从 http 请求构造的唯一对象标识符链接起来。存在三个松散的约束：

*   我将 R 用于统计部分，因此也更愿意将其用于 http 处理
*   日志包含数十万个不同的 URI（其中包括表单、搜索和数据库查询），因此速度可能是一个问题
*   如果我想在三天或一个月内判断这个新的 URI 是一个已知的先前标识的页面，我已经存储了我用来评估两个 URI 引用同一页面的特性。然后，存储空间是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:01:15.897

使用 httr 这很容易：

```
library(httr)
HEAD("http://gmail.com")$url 
```

您可能还想检查`status_code`HEAD 返回的内容，因为通常不会重定向失败。

（这里使用 httr 而不是 RCurl 的一个优点是它会自动保留对同一站点的多个 http 调用之间的连接，这使事情变得更快）

# android - 具有可检测触摸事件的形状/区域集合的 Android UI

> ID：15881521
> 
> 赞同：1
> 
> 时间：2013-04-08T14:17:57.410
> 
> 标签：android, events, user-interface, touch, polygons

背景：我正在做一个研究项目，需要创建一个复杂的 UI，该 UI 由一组奇怪的形状（即不是矩形或圆形，最好将其描述为多边形）组成。复杂性在于用户交互（即触摸事件）应该选择/取消选择单个区域，这些区域有时可能非常小。选择一个区域应该会改变该特定区域的颜色！

因此，要求是绘制一组形状并检测触摸事件是否落在形状/区域的边界内并确定它是哪个区域。

如果有人对我可以从哪里开始有任何想法或指示，请建议！

非常感谢！

# c++ - 如何在 Visual Studio 2010 的 C++ googletest 项目中设置代码覆盖率

> ID：15881524
> 
> 赞同：7
> 
> 时间：2013-04-08T14:18:11.817
> 
> 标签：c++, visual-studio-2010, visual-c++, code-coverage, googletest

我在 Visual Studio 2010 Professional 中构建了一个 C++ googletest 项目。这将构建一个生成 XML 测试结果输出的控制台应用程序。如何设置它以获取代码覆盖率信息？

我已经尝试过[此处](http://blogs.msdn.com/b/phuene/archive/2007/05/14/code-coverage-collection.aspx)的说明来检测代码，但查看代码覆盖率结果似乎需要 Visual Studio Ultimate。Visual Studio 生成的 .coverage 文件是否有任何转换器？

便携式/免费/开源解决方案的奖励积分！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-24T09:56:51.380

您可以尝试 OpenCppCoverage：[http](http://opencppcoverage.codeplex.com) ://opencppcoverage.codeplex.com 。

OpenCppCoverage 是 Windows 下的 C++ 代码覆盖工具。它是开源的，可与 google test / Visual Studio C++ 配合使用。

免责声明：我是这个工具的作者。

希望有所帮助。

**编辑以遵循[brasofilo 的](https://stackoverflow.com/users/1287812/brasofilo)建议：**

为了更准确地了解您的问题，OpenCppCoverage 应该与 Visual Studio C++ 2010 专业版一起使用。唯一的要求是支持**本机**Pdb 文件 ( [http://msdn.microsoft.com/en-us/library/yd4f8bd1%28vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/yd4f8bd1%28vs.71%29.aspx) )。

它是开源且免费的，您可以在此处找到源代码：[https](https://opencppcoverage.codeplex.com/SourceControl/latest) ://opencppcoverage.codeplex.com/SourceControl/latest 。

你说的便携是什么意思？

*   如果您的意思是“多平台”-> 不，它仅适用于 Windows
*   如果您的意思是“便携式应用程序”（[http://en.wikipedia.org/wiki/Portable_application）：OpenCppCoverage](http://en.wikipedia.org/wiki/Portable_application)只需要 Redistributable 即可在主机上安装 Visual Studio 2013（[http://www.microsoft.com/en-US ） /download/details.aspx?id=40784](http://www.microsoft.com/en-US/download/details.aspx?id=40784)）但它不会写入注册表，您可以将二进制文件移动到您想要的位置（例如 USB 密钥）。

希望有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:35:27.447

我认为您可以为此目的使用 VSTEST.Consol.exe [http://msdn.microsoft.com/en-us/library/vstudio/jj155796.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj155796.aspx)。根据文档，它将运行针对任何测试框架编写的测试。您可以启用该 `/Enablecodecoverage`选项，该选项`Enables data diagnostic adapter CodeCoverage in the test run.`

更多信息可以在这里找到：http: [//blogs.msdn.com/b/bhuvaneshwari/archive/2012/06/16/vstest-console-exe-commandline-test-runner.aspx](http://blogs.msdn.com/b/bhuvaneshwari/archive/2012/06/16/vstest-console-exe-commandline-test-runner.aspx)

还有一个名为 ggcov 的开源代码覆盖工具：http: [//ggcov.sourceforge.net/index.html](http://ggcov.sourceforge.net/index.html)

希望这些有所帮助。

# processing - 处理和 Twitter4j，搜索推文的问题

> ID：15881528
> 
> 赞同：0
> 
> 时间：2013-04-08T14:18:17.467
> 
> 标签：processing, twitter4j

我有处理 2.0 和 twitter4j 3.0.3；当我尝试运行程序时，我收到错误消息“函数“getTweet() 不存在”。

我尝试了 getStatuses 却无济于事，我收到相同的错误消息，该函数不存在。

帮助？

```
ArrayList<String> words = new ArrayList();
TwitterFactory twitterFactory;
Twitter twitter;

void setup() {

  size(500, 500);
  background(0);
  smooth();
  connectTwitter();
}

 void draw() {
   //draw fade rectangle
   fill(0, 1);
   rect(0, 0, width, height);

   //draw arraylist words
   int i = (frameCount % words.size());
   String word = words.get(i);

   fill(255, random(50, 150));
   textSize(random(10, 30));
   text(word, random(width), random(height));
 }

// Initial connection
void connectTwitter() {

ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setOAuthConsumerKey("FvnrJfRMsMUCEhL0xxPegQ");
cb.setOAuthConsumerSecret("ZSnKgo6EQmq9wVd5gCMbufcMP5ztFuQhVwKpJvDhAY");
cb.setOAuthAccessToken("274686457-ZiYxpWchtcwHod7UXPjLCj18djl9CyNrk1HMqtQx");
cb.setOAuthAccessTokenSecret("kafd2QHznAu4Mu0R9x5HNyeyA4J3UwCOpETQYeDU");

  twitterFactory = new TwitterFactory(cb.build());
  twitter = twitterFactory.getInstance();
  Query query = new Query("#BioshockInfinite");
  query.setCount(100);

  try {
    QueryResult result = twitter.search(query);
    ArrayList Status = (ArrayList) result.getTweet();

    for (int i = 0; i < tweet.size(); i++) {
      Status s = (Status) tweet.get(i);
      User user = s.getUser;
      String name = user.getName();
      String msg = s.getText();
      Date d = s.getCreatedAt();
      println("Tweet by" + user + "at" + d + ":" + msg);
     }  
  }
  catch (TwitterException te) {
    println("Couldn't connect:" + te);
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:01:42.870

我换了行

```
ArrayList Status = (ArrayList) result.getTweet(); 
```

（无论如何看起来有点奇怪）

```
List<Status> tweets = result.getTweets(); 
```

我现在得到结果。Eclipse 显示 getTweet() 需要一个列表来存储推文的错误。

# html - 拖放区的视觉 HTML5 效果不错？

> ID：15881529
> 
> 赞同：0
> 
> 时间：2013-04-08T14:18:18.710
> 
> 标签：html, css, drag-and-drop

我已经实现了一个具有基于 html5 的拖放上传功能的 Web 应用程序。

现在我正在寻找一个很好的效果来作为放置邀请，向用户展示她可以将拖动的文件放在哪里。

我看到了一些降低不透明度的示例，但是由于我使用的是 HTML5 和 CSS3，因此应该可以实现更好的效果。

我看了一下[http://css-plus.com/2012/03/gaussian-blur/](http://css-plus.com/2012/03/gaussian-blur/)但这仅适用于图像......

编辑：更具体地说：整个应用程序是基于 ExtJS 的，拖放区是一个网格。我可以在网格上成像一个很好的模糊效果（如给定链接中所示）......

有什么建议么？

在此先感谢，萨沙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:07:09.437

You can use a CSS3 filter: See [http://html.adobe.com/webplatform/graphics/customfilters/cssfilterlab/](http://html.adobe.com/webplatform/graphics/customfilters/cssfilterlab/) for demos.

Just apply: `-webkit-filter: blur(3px);` to your CSS. Vendor prefix as needed. Just know that compatibility it not very good: [http://caniuse.com/#feat=css-filters](http://caniuse.com/#feat=css-filters)

# .net - 尝试运行 git 项目时出错

> ID：15881531
> 
> 赞同：0
> 
> 时间：2013-04-08T14:18:29.793
> 
> 标签：.net, node.js, coffeescript

我正在尝试在我的 Windows 7 上运行这个项目： [https ://github.com/JoelBesada/pasteboard#readme](https://github.com/JoelBesada/pasteboard#readme)

我按照项目页面上的说明进行操作，但它不会运行。当我在控制台中执行时

`./run_local`

我收到找不到 run_local 的消息（但我在项目文件夹中）。

我安装了 node.js 以及 coffeescript.js 和 app.js。

在执行“npm install”时，我会在一段时间后收到错误消息。

我需要一个 .NET 框架吗？为什么我不能运行项目？

# iphone - 如何本地化 NSPhotoLibraryUsageDescription 键（ALAssets）

> ID：15881534
> 
> 赞同：24
> 
> 时间：2013-04-08T14:18:31.943
> 
> 标签：iphone, xcode, ios6, alassetslibrary

我正在尝试本地化应用程序的 info.plist 文件中定义的*NSPhotoLibraryUsageDescription键（*[在此处参考](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)）。
当应用程序首次要求访问您的相机胶卷时，此键可让您提供自定义消息。我正在使用 ALAssetsLibrary 枚举资产组（这会触发访问请求消息弹出）。

到目前为止，我的谷歌搜索并没有回答我如何实现这一目标。

我想避免本地化整个 info.plist 文件，因为它包含更多非语言环境相关的内容。

任何人已经解决了这个问题或有提示如何继续？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-16T21:33:32.460

您可以创建一个名为`InfoPlist.strings`. 该文件的使用和本地化与该文件非常相似`Localizable.strings`。

在其中，您将拥有并输入以下内容：

```
NSPhotoLibraryUsageDescription = "Test of new Photos warnings"; 
```

请注意，键周围没有引号

我认为只要键包含在 中，如果它可用于该语言`info.plist`，它将使用值进行本地化。`InfoPlist.string`否则它将使用 info.plist 中定义的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-22T13:17:23.897

我在这里有我的笔记[https://github.com/onmyway133/notes/issues/290](https://github.com/onmyway133/notes/issues/290)，否则你会得到

> 缺少 Info.plist 键 - 此应用程序尝试在没有使用说明的情况下访问隐私敏感数据。应用的 Info.plist 必须包含一个 NSPhotoLibraryUsageDescription 键和一个字符串值，向用户解释应用如何使用这些数据。更正这些问题后，您可以重新交付更正后的二进制文件。

确保

*   您在 Info.plist 中声明键
*   您在 InfoPlist.strings 中将其本地化
*   你不需要双引号，比如`"NSPhotoLibraryUsageDescription" = "Test of new Photos warnings";`，你可以使用`NSPhotoLibraryUsageDescription = "Test of new Photos warnings";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-02T13:25:31.370

使这项工作对我有用的唯一方法是在 Xcode 中：

1) 前往`Project target -> Info-> Localization-> Add localization`

在那里添加了语言。此操作创建了`<projectName>/<LanguageInitials>.lproj`文件夹。

[![在此处输入图像描述](https://i.stack.imgur.com/G4Mup.png)](https://i.stack.imgur.com/G4Mup.png)

2）我在文件夹中创建了文件 InfoPlist.strings `<projectName>/<LanguageInitials>.lproj`；

3）我添加了文字：

`NSPhotoLibraryUsageDescription = "<Add your translated text here>";`

在那个`InfoPlist.strings`文件里面。

4）然后我将该文件夹添加到项目中`File -> add new files to the project`或拖放。

注意：为了测试这个我：

清理缓存，将模拟器上的语言设置为新语言，将方案中的语言编辑为在模拟器上运行的新语言并重新启动模拟器。

[![在此处输入图像描述](https://i.stack.imgur.com/9wnYf.png)](https://i.stack.imgur.com/9wnYf.png)

# asp.net - 针对不同屏幕调整图像大小

> ID：15881535
> 
> 赞同：0
> 
> 时间：2013-04-08T14:18:34.717
> 
> 标签：asp.net, html, image, css, web-applications

![图片显示图片+按钮文字](https://i.stack.imgur.com/YPiPl.png)

大家好，

上图显示了一系列图像和相应的链接文本。要求是我需要缩小图像和文本，以便它们在不同的屏幕分辨率下出现在同一行......

我使用 vw 作为字体调整大小的字体规范。但无法使用以下 css 调整图像大小...

```
.bannerimage {

 max-width: 100%; 
  height: auto; 
  width: auto/9;/* ie8 */ 
  overflow:hidden; 
```

}

功能区的设计代码如下：

```
 <div style="padding-left: 50px; padding-top: 20px; height: 110px; width: 100%">
            <div>
                <div style="float: left">
                    <div style="float: left;">
                        <asp:ImageButton runat="server" ImageUrl="~/Images/Go_to_icon.png" CssClass="footerimage" style="min-height:30px;min-width:30px" />
                    </div>
                    <div style="top: 15px; position: relative; float: left; width: 180px">
                        <div class="footerlinkdiv">
                            <asp:LinkButton ID="LinkButton9" runat="server" CssClass="footerlink" Text="Go To Administration Page" Style="text-align: start"></asp:LinkButton>
                        </div>
                    </div>
                    <div class="footerseprator">
                    </div>

                </div>

                <div style="float: left">
                    <div style="float: left; padding-left: 20px">
                        <asp:ImageButton ID="ImageButton8" runat="server" ImageUrl="~/Images/Go_to_icon.png" CssClass="footerimage" />
                    </div>
                    <div style="top: 15px; position: relative; float: left; width: 180px">
                        <div class="footerlinkdiv">
                            <asp:LinkButton ID="LinkButton10" runat="server" CssClass="footerlink" Text="Go To Authorize US Partners" Style="text-align: start"></asp:LinkButton>
                        </div>
                    </div>
                    <div class="footerseprator">
                    </div>

                </div>

                <div style="float: left">
                    <div style="float: left; padding-left: 20px">
                        <asp:ImageButton ID="ImageButton9" runat="server" ImageUrl="~/Images/Go_to_icon.png" CssClass="footerimage" />
                    </div>
                    <div style="top: 15px; position: relative; float: left; width: 180px">
                        <div class="footerlinkdiv">
                            <asp:LinkButton ID="LinkButton11" runat="server" CssClass="footerlink" Text="Go To Authorize Canada Partners" Style="text-align: start"></asp:LinkButton>
                        </div>
                    </div>
                    <div class="footerseprator">
                    </div>

                </div>

                <div style="float: left">
                    <div style="float: left; padding-left: 20px">
                        <asp:ImageButton ID="ImageButton10" runat="server" ImageUrl="~/Images/Go_to_icon.png" CssClass="footerimage" />
                    </div>
                    <div style="top: 15px; position: relative; float: left; width: 180px">
                        <div class="footerlinkdiv">
                            <asp:LinkButton ID="LinkButton13" runat="server" CssClass="footerlink" Text="Go To Authorize Distributor Page" Style="text-align: start"></asp:LinkButton>
                        </div>
                    </div>

                </div>

            </div>

        </div>

  tried a lot.. Could some one plz help me with css of the same for below ribbon 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:28:22.527

如果没有 jquery 库或 css 媒体查询，您将无法调整文本大小。但是你可以通过给它一些高度或宽度的值来调整图像的大小，如下所示：

```
.bannerimage {
max-width: 100%; 
height: auto; 
width: 10%;
overflow:hidden;
} 
```

# sql - 从 2 个查询而不是表中获取丢失的记录

> ID：15881539
> 
> 赞同：0
> 
> 时间：2013-04-08T14:18:42.273
> 
> 标签：sql, sql-server, sql-server-2008

我知道如何在缺少但有两个查询的表之间找到一个共同的值？

查询一：

```
SELECT DISTINCT GENG.GlGroup
FROM MCMGenHistory GENH 
    RIGHT OUTER JOIN RPZCGenGroup GENG 
        ON GENG.ExpenseCode = substring(GENH.GlCode,13,3)
WHERE SUBSTRING(GENH.GlCode,1,1)='P' 
```

结果：

```
10
7
8
5
1
6
9
4 
```

查询 2：

```
SELECT DISTINCT GENG.GlGroup 
from RPZCGenGroup GENG 
```

结果：

```
1
10
2
3
4
5
6
7
8
9 
```

我想要丢失的记录，例如 2 和 3。问题是第一个查询使用同一个表但带有过滤器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:37:44.783

当您在标准之外添加标准时，`JOIN`您实际上将您的标准`OUTER JOIN`变成了`INNER JOIN`. 如果我理解正确，您希望加入标准的 GENG.GlGroup 值不适用，那么为什么不将所有剔除标准保留在`OUTER JOIN`逻辑中并从 RPZCGenGroup 获取 GENH.GlGroup 为 Null 的记录？

```
SELECT  DISTINCT GENG.GlGroup
FROM    MCMGenHistory GENH 
RIGHT   OUTER JOIN RPZCGenGroup GENG 
        ON  GENG.ExpenseCode=substring(GENH.GlCode,13,3)
        AND SUBSTRING(GENH.GlCode,1,1)='P'
WHERE   GENH.GlCode Is Null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:23:58.737

假设您的意思是您想要*Query 2*结果中不在*Query 1*结果中的所有记录，那么一种快速简便的方法是使用`EXCEPT`：

```
[Query 2]
EXCEPT
[QUERY 1] 
```

具体来说：

```
SELECT DISTINCT GENG.GlGroup 
FROM RPZCGenGroup GENG
EXCEPT
SELECT GENG.GlGroup
FROM MCMGenHistory GENH 
    RIGHT OUTER JOIN RPZCGenGroup GENG 
        ON GENG.ExpenseCode = substring(GENH.GlCode,13,3)
WHERE SUBSTRING(GENH.GlCode,1,1)='P' 
```

您可能也不想`DISTINCT`在第二个查询中使用，因为它可能会降低性能并且对结果没有影响。

更多文档：[EXCEPT 和 INTERSECT](http://msdn.microsoft.com/en-us/library/ms188055.aspx) @ MSDN

看起来您真正想要的是 RPZCGenGroup 中的所有记录，这些记录在*MCMGenHistory*中没有任何匹配的记录，*且 GlCode*以“P”开头。快速简便的版本是使用`NOT EXISTS`：

```
SELECT GENG.GlGroup 
FROM RPZCGenGroup GENG
WHERE NOT EXISTS (
    SELECT 
    FROM MCMGenHistory GENH
    WHERE substring(GENH.GlCode,13,3) = GENG.ExpenseCode
        AND SUBSTRING(GENH.GlCode,1,1)='P'
) 
```

的性能`NOT EXISTS`可能是一个问题，因此您可以/应该用适当的外部连接替换它（也请注意@Love2Learn 的评估）：

```
SELECT GENG.GlGroup 
FROM RPZCGenGroup GENG
    LEFT OUTER JOIN MCMGenHistory GENH
        ON substring(GENH.GlCode,13,3) = GENG.ExpenseCode
            AND SUBSTRING(GENH.GlCode,1,1)='P'
WHERE GENH.GlCode IS NULL 
```

# c# - 在 VS 2012 express 中更改源文件的目录

> ID：15881543
> 
> 赞同：1
> 
> 时间：2013-04-08T14:18:49.423
> 
> 标签：c#, visual-studio-2012, github

我在 VS 2012 express 中有一个现有的 C# 项目，我想将它添加到存储库中。我对源代码管理非常陌生，所以如果这是一个新手问题，请原谅。

我安装了 GitHub 并创建了一个存储库，我希望这个存储库包含 中的源文件`Visual Studio\Projects\My Project`，即我的项目的默认源目录。不幸的是 GitHub 创建了一个新文件夹，所以每次更改文件时我都需要将文件复制到该文件夹​​中。或者，我可以将 VS 保存源文件的目录更改为 GitHub 创建的目录。我四处搜索，但在 VS 2012 express 中没有找到方法。这可能吗？还是我缺少更好/更简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:09:39.147

你可以做的是：

*   在您现有的 VS 项目中初始化一个 git repo：（`git init .`没有创建额外的目录，除了 a `.git`）
*   让“GitHub for Windows”[扫描现有的存储库](https://stackoverflow.com/a/14455249/6309)并找到您创建的存储库。
    （尽管您应该能够简单地将 VS 项目目录拖放到 GitHub for Windows GUI）
*   在 GitHub 上发布（它会在 GitHub 上创建一个新的公共仓库）

# c - 来自发布的 MQTT recv 和 mqtt ping C

> ID：15881549
> 
> 赞同：0
> 
> 时间：2013-04-08T14:19:00.137
> 
> 标签：c, sockets, recv, mqtt

我遇到了这个问题，在一个测试程序中，我正在为 MQTT 开发一个客户端，我订阅了一个主题，之后，我等待从服务器到我的客户端的“发布”消息。

在良好的接收（发布消息）或接收超时后，我向服务器发送一个 mqtt PINGREQ。

在 A PINGREQ 之后，我将等待 PINGRESP，然后我调用 recv，就像我在等待 PUBLISH 消息一样。

如果流程是这样的：

```
Client -> PINGREQ
Server -> PUBLISH
Server -> PINGRESP 
```

比服务器发布消息丢失。如何解决这个问题？我在 QOS 0 上使用 MQTT，在这个 QOS 级别上解决这个问题是有意义的，还是在 QOS1 上检查这个案例是明智的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:15:03.640

我认为你的事情有点混乱。当客户端和服务器之间没有任何其他网络流量通过时使用 PINGREQ/PINGRESP，以便让客户端和服务器都知道连接是否断开。

您的客户端应跟踪与服务器的最后一次传出或传入通信的时间，并在超过其 CONNECT 命令设置的保活计时器时发送 PINGREQ。如果没有收到通信，服务器将在 1.5*keepalive 断开客户端。如果客户端在发送 PINGREQ 的保活期间没有收到响应其 PINGREQ 的 PINGRESP，则客户端应假定服务器已断开连接。

QoS 级别并不那么重要，您必须确保保持活动超时。

我还想到，听起来您正在使用阻塞网络调用-如果可以获得更多灵活性，最好转向非阻塞。

# python - Flask：使用 app 作为属性并访问装饰器

> ID：15881550
> 
> 赞同：6
> 
> 时间：2013-04-08T14:19:02.760
> 
> 标签：python, flask

使用python烧瓶模块，我想拥有

```
app = flask.Flask(__name__) 
```

作为类的属性：

```
class Handler(object):
    def __init__(self):
        self.datastores = {}
        self.websocket_queue = gevent.queue.JoinableQueue()
        self.app = flask.Flask(__name__) 
```

问题是如何访问装饰器呢？

```
 @self.app.route('/socket.io/<path:remaining>')
    def socketio(self, remaining): 
```

这会产生错误`NameError: name 'self' is not defined` 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:01:28.130

这取决于 - 如果您在`Handler`类的方法中添加处理程序，它应该可以正常工作：

```
def add_routes(self):
    @self.app.route("/some/route")
    def some_route():
        return "At some route" 
```

如果您尝试在外部添加路由，`Handler`则需要使用对您的`Handler`实例的引用：

```
handler = Handler()

@handler.app.route("/some/route")
def some_route():
    return "At some route" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:32:13.833

您可以尝试使用[Flask-Classy ，因为它提供了一种通过](http://pythonhosted.org/Flask-Classy/)[Python-Flask](http://flask.pocoo.org/)使用类的简单方法。

# vb.net - 数据表无法正常工作

> ID：15881551
> 
> 赞同：0
> 
> 时间：2013-04-08T14:19:07.877
> 
> 标签：vb.net, visual-studio-2010, .net-4.0

数据表无法正常运行，甚至导致我的动态表布局不显示。而且我完全不知道出了什么问题。顺便说一句，我是初学者。

```
Public Class ListItem
Dim dt As System.Data.DataTable

Private Sub ListItem_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim conn As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source =|DataDirectory|\SMS.accdb"
    Dim sqlstr As String = "Select * from ItemList"
    Dim dtad As New OleDb.OleDbDataAdapter(sqlstr, conn)
    dtad.Fill(dt)
    dtad.Dispose()
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim ListTable As New TableLayoutPanel()
    ListTable.AutoSize = True
    ListTable.AutoSizeMode = Windows.Forms.AutoSizeMode.GrowAndShrink
    ListTable.Location = New Point(20, 20)
    ListTable.BackColor = Color.White
    ListTable.ColumnCount = CInt(dt.Columns.Count)
    ListTable.RowCount = CInt(dt.Rows.Count)
    ListTable.CellBorderStyle = TableLayoutPanelCellBorderStyle.Single

    For colindex = 0 To dt.Columns.Count - 1
        For rowindex = 0 To 0
            Dim newlabel As New Label()
            newlabel.Location = New Point(10, 10)
            newlabel.Name = "label" & colindex
            newlabel.Font = New Drawing.Font("Microsoft Sans Serif", 16, FontStyle.Underline)
            newlabel.Text = dt.Columns(colindex).ColumnName
            newlabel.AutoSize = True
            ListTable.Controls.Add(newlabel, colindex, rowindex)
        Next
    Next

    Controls.Add(ListTable)
End Sub
End Class 
```

它给了我这个错误：

```
An unhandled exception of type 'System.NullReferenceException' occurred in StockManagementSystem.exe

Additional information: Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:28:10.597

课堂上的第一行。从这里改变它：

```
Dim dt As System.Data.DataTable 
```

对此：

```
Dim dt As New System.Data.DataTable 
```

# javascript - 重新排序 javascript 函数的输出

> ID：15881554
> 
> 赞同：0
> 
> 时间：2013-04-08T14:19:15.700
> 
> 标签：javascript, calendar

这是我的代码。它目前创建了这个：![在此处输入图像描述](https://i.stack.imgur.com/kzZOf.png) 但我需要它来显示日期下方的星期几。我知道这可能只是切换 2 行的问题，但我的 javascript 技能有限，我很挣扎。非常感谢任何帮助。

```
 var Timeline = function (container, date) {
        this.daysPerMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        this.weekDays = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"];
        this.monthsOfYear = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        this.dayNumbers = {
            "sunday": 0,
            "monday": 1,
            "tuesday": 2,
            "wednesday": 3,
            "thursday": 4,
            "friday": 5,
            "saturday": 6
        };
        this.initialize = function () {
            this.isIE6 = (jQuery.browser.msie && jQuery.browser.version == "6.0");
            this.container = $("#" + container);
            if (!this.container.length) {
                alert("can not locate container element \"" + container + "\"!");
                return;
            }
            this.bubble = new Timeline.Bubble(this);
            this.date = (date) ? date : new Date();
            this.readEvents();
            this.placeHolders = this.setupPlaceHolders();
            this.container.addClass("timeline");
            this.render();
        },
        this.readEvents = function () {
            this.events = [];
            var eventList = this.container.find("ul");
            var eventItems = eventList.find("li");
            for (var i = 0; i < eventItems.length; i++) {
                var date = new Date(eventItems[i].getAttribute("title"));
                if (date == "Invalid Date") continue;
                this.events[i] = {
                    name: eventItems[i].className,
                    date: date,
                    day: date.getDate(),
                    month: date.getMonth(),
                    year: date.getFullYear(),
                    content: jQuery(eventItems[i]).html()
                };
            }
            var j, tmp, events = this.events;
            for (var i = 1; i < events.length; i++) {
                tmp = this.events[i];
                for (j = i; j > 0 && events[j - 1].date > tmp.date; j--)
                events[j] = events[j - 1];
                events[j] = tmp;
            }
            eventList.remove();
        }
        this.render = function () {
            this.placeHolders.arrows.empty();
            this.placeHolders.top.empty();
            this.placeHolders.bottom.empty();
            var monthRepresentation = this.getMonthRepresentation();
            for (var i = 0; i < monthRepresentation.length; i++)
            this.renderDay(this.placeHolders.top, this.placeHolders.bottom, monthRepresentation[i]);
            if (this.isIE6) this.handleIE6Issues();
            this.setupArrows();
        }
        this.handleIE6Issues = function () {
            var clone = this.placeHolders.top.clone(true);
            this.container.append(clone);
            clone.css({
                left: "-1000px",
                top: "-1000px"
            });
            var width = clone.outerWidth();
            clone.remove();
            this.placeHolders.top.css({
                width: width + "px"
            });
            this.placeHolders.bottom.css({
                width: width + "px"
            });
        }
        this.renderDay = function (topRow, bottomRow, data) {
            var cssClass = "";
            cssClass += (this.isToday(data.number)) ? "today" : "";
            cssClass += (data.events.length) ? " event" : "";
            topRow.append("<li class=\"" + data.name  + "\"><div class=\"" + cssClass + "\">" + data.name + "</div></li>");
            bottomRow.append("<li class=\"" + data.name  + "\"><div class=\"" + cssClass + "\">" + data.number + "</div></li>");
            nameEl = topRow.find("div:last");
            numbEl = bottomRow.find("div:last");
            if (data.events.length == 0) return;
            var self = this;
            var enterClosure = function (e) {
                self.onMouseEnter(e);
            };
            var leaveClosure = function (e) {
                self.onMouseLeave(e);
            };
            nameEl.bind("mouseenter", data, enterClosure);
            numbEl.bind("mouseenter", data, enterClosure);
            nameEl.bind("mouseleave", data, leaveClosure);
            numbEl.bind("mouseleave", data, leaveClosure);
        }
        this.setupArrows = function () {
            var dateString = this.monthsOfYear[this.date.getMonth()] + " " + this.date.getFullYear();
            var html = "";
            html += "<div class=\"timeline_lastyear\" title=\"Previous Year\"></div>"
            html += "<div class=\"timeline_lastmonth\" title=\"Previous Month\"></div>"
            html += "<div class=\"timeline_date\">" + dateString + "</div>"
            html += "<div class=\"timeline_nextmonth\" title=\"Next Month\"></div>"
            html += "<div class=\"timeline_nextyear\" title=\"Next Year\"></div>"
            this.placeHolders.arrows.append(html);
            var children = this.placeHolders.arrows.children();
            var self = this;
            $(children[0]).bind("click", this, function () {
                self.previousYear()
            });
            $(children[1]).bind("click", this, function () {
                self.previousMonth()
            });
            $(children[3]).bind("click", this, function () {
                self.nextMonth()
            });
            $(children[4]).bind("click", this, function () {
                self.nextYear()
            });
        }
        this.getEventsForDay = function (dayNumber) {
            var result = [];
            for (var i = 0; i < this.events.length; i++) {
                var e = this.events[i];
                if (e.day == dayNumber && e.month == this.date.getMonth() && e.year == this.date.getFullYear()) result.push(this.events[i]);
            }
            return result;
        }
        this.setupPlaceHolders = function () {
            var arrows = jQuery(document.createElement("div"));
            arrows.addClass("timeline_arrows");

            var bottom = jQuery(document.createElement("div"));
            bottom.addClass("timeline_bottom");
            var top = jQuery(document.createElement("div"));
            top.addClass("timeline_top");
            top.append("<ul></ul>");
            bottom.append("<ul></ul>");
            this.container.append([arrows[0], top[0], bottom[0]]);
            return {
                arrows: arrows,

                bottom: bottom.find("ul:first"),
                top: top.find("ul:first")
            };
        }
        this.getMonthRepresentation = function () {
            var result = [];
            var numberOfDays = this.getNumberOfDaysInMonth(this.date);
            var firstDay = this.getFirstDayOfMonth(this.date);
            var finished = false;
            for (var i = 0; i < numberOfDays; i++) {
                result.push({
                    name: this.weekDays[firstDay].substring(0, 3),
                    number: (i + 1 < 10) ? "0" + (i + 1) : (i + 1),
                    events: this.getEventsForDay(i + 1)
                });
                firstDay = (firstDay == 6) ? 0 : ++firstDay;
            }
            return result;
        }
        this.getNumberOfDaysInMonth = function (dateObject) {
            var month = dateObject.getMonth();
            if (month == 1) {
                var leapYear = (new Date(dateObject.getYear(), 1, 29).getDate()) == 29;
                if (leapYear) return 29
                else return 28;
            } else return this.daysPerMonth[month];
        },
        this.getFirstDayOfMonth = function (dateObject) {
            var save = dateObject.getDate();
            dateObject.setDate(1);
            var result = dateObject.getDay();
            dateObject.setDate(save);
            return result;
        },
        this.isToday = function (dayNumber) {
            var today = new Date();
            return (today.getDate() == dayNumber && today.getFullYear() == this.date.getFullYear() && today.getMonth() == this.date.getMonth());
        },
        this.onMouseEnter = function (event) {
            var left = $(event.target).offset().left;
            var width = $(event.target).outerWidth();
            this.bubble.setContent(event.data.events);
            this.bubble.show(left + (width / 2));
        }
        this.onMouseLeave = function (event) {
            this.bubble.hide();
        }
        this.nextMonth = function () {
            this.date.setMonth(this.date.getMonth() + 1);
            this.render();
        }
        this.nextYear = function () {
            this.date.setYear(this.date.getFullYear() + 1);
            this.render();
        }
        this.previousMonth = function () {
            this.date.setMonth(this.date.getMonth() - 1);
            this.render();
        }
        this.previousYear = function () {
            this.date.setYear(this.date.getFullYear() - 1);
            this.render();
        }
        this.initialize();
    }
    Timeline.Bubble = function (timeline) {
        this.initialize = function () {
            var IE6Class = (timeline.isIE6) ? " bubbleIE6" : "";
            var id = "bubble_" + new Date().getTime();
            var html = "";
            html += "<div id=\"" + id + "\" class=\"timeline_bubble\">";
            html += "<div class=\"bubble_top" + IE6Class + "\"></div>";
            html += "<div class=\"bubble_mid" + IE6Class + "\"></div>";
            html += "<div class=\"bubble_bottom" + IE6Class + "\"></div></div>";
            timeline.container.after(html);
            this.container = $("#" + id);
            this.container.bind("mouseenter", this, this.onMouseEnter);
            this.container.bind("mouseleave", this, this.onMouseLeave);
        }
        this.onMouseEnter = function (event) {
            event.data.stopHiding();
        }
        this.onMouseLeave = function (event) {
            event.data.hide();
        }
        this.stopHiding = function () {
            if (this.goingOffHandle && this.goingOffHandle != null) {
                clearTimeout(this.goingOffHandle);
                this.goingOffHandle = null;
            }
        }
        this.setContent = function (events) {
            this.stopHiding();
            var html = "";
            for (var i = 0; i < events.length; i++)
            html += "<div><div class=\"event_title\">" + events[i].name + "<p class=\"event_data\">" + events[i].content + "</p></div></div>";
            var midSection = $(this.container.children()[1]);
            midSection.empty();
            midSection.append(html);
            var titles = midSection.find(".event_title");
            titles.each(function (inx, element) {
                $(element).bind("mouseenter", function (event) {
                    $(element).children(":first").animate({
                        opacity: "toggle"
                    }, 200);
                });
                $(element).bind("mouseleave", function (event) {
                    $(element).children(":first").animate({
                        opacity: "hide"
                    }, 200);
                });
            });
        }
        this.show = function (at) {
            this.container.animate({
                opacity: "show"
            }, 250);
            this.container.animate({
                left: at - (this.container.outerWidth() / 2)
            }, 300);
        }
        this.hide = function () {
            var self = this;
            this.goingOffHandle = setTimeout(function () {
                self.container.animate({
                    opacity: "hide"
                }, 250);
            }, 700);
        }
        this.initialize();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:22:13.633

在`this.renderDay`尝试反转两条`.append`线：

```
topRow.append("<li class=\"" + data.name  + "\"><div class=\"" + cssClass + "\">" + data.name + "</div></li>");
bottomRow.append("<li class=\"" + data.name  + "\"><div class=\"" + cssClass + "\">" + data.number + "</div></li>"); 
```

所以它读

```
bottomRow.append("<li class=\"" + data.name  + "\"><div class=\"" + cssClass + "\">" + data.number + "</div></li>");
topRow.append("<li class=\"" + data.name  + "\"><div class=\"" + cssClass + "\">" + data.name + "</div></li>"); 
```

# android - 如何在 XML 中定义特定于屏幕大小的动画

> ID：15881555
> 
> 赞同：10
> 
> 时间：2013-04-08T14:19:17.157
> 
> 标签：android, android-animation

我在我的应用程序中创建`Animation`了一个。`Fragments`动画在选项卡`Animation`之间移动，为此我需要对当前进行动画处理`Fragment`以完全移出屏幕，同时需要`Fragment`从另一侧滑入。有点像`Animation`用途`ViewPager`。

我需要指定的绝对开始和结束位置，`View`并且由于不同的设备具有不同的尺寸，我无法`Animation`在 XML 中定义适合所有设备的。在较大的设备`View`上，屏幕可能不会完全滑动，而在较小的设备上，`View`当他已经离开屏幕时，会移动很多并继续移动。

所以我想我的问题是：如何在 XML 中定义一个动画，它会滑出`Fragment`屏幕，同时适合所有设备？

我的动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">      

  <objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:propertyName="x" 
    android:valueType="floatType"
    android:valueTo="720" 
    android:valueFrom="0"
    android:duration="300"/>  

</set> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-06-30T04:18:40.333

# 1）关于赏金：

> [**SO上的现有答案**](https://stackoverflow.com/questions/4932462/animate-the-transition-between-fragments)建议将FrameLayout子类化......

如果你想使用 an`ObjectAnimator`你别无选择，只能将`View`你想要动画的子类化。您需要提供`ObjectAnimator`必要的 getter 和 setter 方法来发挥它的魔力，因为它本质上只是调用这些 getter 和 setter 方法来执行`Animation`.

您链接到的问题（**[动画片段之间的过渡](https://stackoverflow.com/questions/4932462/animate-the-transition-between-fragments)**）是子类化`FrameLayout`以添加 a`setXFraction()`和 a`getXFraction()`方法。它们的实现方式是将 x 值设置为相对于`FrameLayout`. 只有这样做才能`ObjectAnimator`在绝对值之间进行动画处理之外的其他任何事情。

总而言之，它`ObjectAnimator`本身实际上并没有做太多动画，它只是通过反射调用 getter 和 setter 方法。

> 真的没有办法将实际的屏幕像素尺寸（不仅仅是 dp）放入 xml 文件吗？

没有`ObjectAnimator`办法做到这一点。`ObjectAnimators`只需从起始值到结束值进行插值。正如我上面解释的，setter 方法定义了实际发生的情况。

> 例如，调用一个返回宽度的自定义函数就可以了，或者定义一个代码可以设置的常量，让代码将所述常量设置为等于屏幕宽度，然后从 xml 访问该常量同样有用。

您不能将代码中的任何值插入到任何 xml 资源中。xml 文件中包含的所有内容都会在您构建时编译到您的 APK 中，并且在运行时**无法**更改。这也是对您其他问题的回答：在包含当前屏幕大小的 xml 中没有可访问的资源或常量或任何内容。安装应用程序的设备的屏幕大小等动态值不能成为这些资源的一部分，因为它们中的所有内容都在您构建应用程序时编译到您的应用程序中。

* * *

# 2）可能的解决方案：查看动画

一种可能的解决方案是使用视图动画而不是`ObjectAnimator`. 使用视图动画，您可以指定分数而不仅仅是绝对值：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">  
    <translate android:fromYDelta="-100%" android:toYDelta="0%" android:duration="1000"/>
</set> 
```

这将为屏幕高度的`View`从`-100%`到设置动画。`0%`换句话说，从完全的屏幕到 的位置`View`。你可以像这样使用它：

```
Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.slide_down);
view.startAnimation(animation); 
```

我意识到这可能对你没有任何帮助。在某些情况下，必须使用`ObjectAnimators`且不能使用视图动画。但是只要您能够使用视图动画，这应该可以解决您的问题。

*   [**链接到文档**](http://developer.android.com/guide/topics/graphics/view-animation.html)
*   [**相关问题**](https://stackoverflow.com/a/19766034/2310866)

* * *

# 3) 最佳实践

我们真正应该在这里解决的是我认为您的误解。正如您已经注意到，您在 xml 中定义的每个动画都有绝对的开始和结束值。这些值是静态的，在编译您的应用程序后无法更改。

如果您查看资源如何与许多可用的选择器以及 dp、sp... 一起工作，那么您将意识到它旨在做一件事：
例如，您可以定义一个将 a 移动`View`100dp 的动画。Dp 是物理尺寸的度量，100dp 与任何像素密度的任何屏幕的物理尺寸完全相同。通过选择器，您可以为具有更小或更大屏幕的设备更改此动画，其中动画可能移动`View`太多或太少。但是你只能填写静态值。除了使用选择器之外，您无法为每个设备自定义动画。

所以你看，资源真的只是为任何静态和不变的东西而设计的。它适用于尺寸或字符串转换，但有时使用动画可能会有点痛苦。正如我上面所说，只有视图动画通过提供指定分数而不是绝对值的选项来提供一种绕过静态性质的方法。但一般来说，你不能在 xml 中定义任何动态的东西。

为了进一步证实这一论点，请查看谷歌关于动画的优秀 DevBytes 视频：

*   [**查看动画**](https://www.youtube.com/watch?v=_UWXqFBF86U)
*   [**自定义活动动画**](https://www.youtube.com/watch?v=CPxkoe2MraA)
*   [**卡片翻转动画**](https://www.youtube.com/watch?v=pMcu35-tVls)
*   [**属性动画**](https://www.youtube.com/watch?v=3UbJhmkeSig)
*   [**ListView 动画**](https://www.youtube.com/watch?v=8MIfSxgsHIs)

然后您会注意到，这些示例中没有一个动画是在 xml 中定义的。当然有人可能会争辩说他们没有在 xml 中定义它们，因为他们希望更轻松地解释和显示代码，但在我看来，这再次证明了一点：

**您不能在依赖于纯动态值的静态资源中定义动画**

由于屏幕宽度/高度因设备而异，因此您需要为每个设备设置不同的动画。只有视图动画提供了一种解决方法，因为它们允许您定义分数而不是绝对值。在任何其他情况下，您都需要以编程方式定义动画。幸运的是，这并不难`ObjectAnimators`：

```
Animator animator = ObjectAnimator.ofFloat(view, View.X, startValue, endValue);
animator.start(); 
```

这将以`View`像素为单位对从开始到结束值的 x 位置进行动画处理。您可以传递 的宽度`View`以像您想要的那样对其进行动画处理：

```
Animator animator = ObjectAnimator.ofFloat(view, View.X, -view.getWidth(), 0.0f);
animator.start(); 
```

这将使`View`从左侧滑入的动画。它完全在屏幕外开始并在其最终位置停止。你也可以这样做：

```
view.animate().x(targetValue); 
```

这会将其`View`从当前 x 位置动画到目标 x 值。

但请不要误会我，您仍然应该尝试在资源中尽可能多地定义 - 无论是动画还是其他任何东西。应尽可能避免硬编码动画或任何其他值，除非在您的情况下有必要。

* * *

# 4) 总结

所以总结一下：

*   `ObjectAnimators`如果不将所需的 getter 和 setter 方法添加到`View`要制作动画的对象中，您将无法做您想做的事情。
*   如果可能的话，使用[**视图动画**](http://developer.android.com/guide/topics/graphics/view-animation.html)。使用它们，您可以根据`View`.
*   如果上述方法不起作用或不适用于您的情况，则以[**编程**](http://developer.android.com/guide/topics/graphics/prop-animation.html#object-animator)方式定义动画，这在任何情况下都有效。

我希望我能帮助你，如果你有任何进一步的问题，请随时提问！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T14:52:19.383

只需根据屏幕密度创建不同的文件夹。

因此，假设您的动画 xml 位于名为 anim 的文件夹中（在 res 父文件夹中）。

然后在 res 中创建 anim-ldpi 、 anim-mdpi 等。将您各自的动画放在代表屏幕密度的每个文件夹中，android 将选择正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T21:25:49.043

有人在问我的工作解决方案。这里是。它是通过 Mono 编写的 C# 代码。希望 Java 作者能够弄清楚该语言应该是什么。

```
public class MyFragment: Fragment  {

    public int TransitDuration {
      get {
        return 500;
      }
    }

    public override Animator OnCreateAnimator(FragmentTransit transit, bool enter, int nextAnim) {
      switch (transit) {
        case FragmentTransit.FragmentOpen:
          {
            if (enter) {
              return this.EnterFromLeftAnimator;
            } else {
              return this.ExitToRightAnimator;
            }
          }
        case FragmentTransit.FragmentClose:
          {
            if (enter) {
              return this.EnterFromRightAnimator;
            } else {
              return this.ExitToLeftAnimator;
            }
          }
        default:
          Animator r = base.OnCreateAnimator(transit, enter, nextAnim);
          if (r == null) {
            if (!this.IsAdded) {
              this.OnContextHidden();
            }
          }
          return r;
      }
    }

    public Animator EnterFromLeftAnimator {
      get {
        float width = Screen.MainScreen.PixelSize.Width; // this is an object of mine; other code cached the width there long ago. It would actually be better to use the window width.
        ObjectAnimator animator = ObjectAnimator.OfFloat(this, "X", width, 0);
        animator.SetDuration(this.TransitDuration);
        Animator r = animator as Animator;
        return r;
      }
    }
    public Animator ExitToRightAnimator {
      get {
        float width = Screen.MainScreen.PixelSize.Width;
        ObjectAnimator animator = ObjectAnimator.OfFloat(this, "X", 0, -width);
        animator.SetDuration(this.TransitDuration);
        Animator r = animator as Animator;
        r.AddListener(new AnimatorEndListenerAdapter(() => this.OnContextHidden()));
        return r;
      }
    }
    public Animator EnterFromRightAnimator {
      get {
        float width = this.ScreenWidth;
        ObjectAnimator animator = ObjectAnimator.OfFloat(this, "X", -width, 0);
        animator.SetDuration(this.TransitDuration);
        Animator r = animator as Animator;
        return r;
      }
    }
    public Animator ExitToLeftAnimator {
      get {
        float width = this.ScreenWidth;
        ObjectAnimator animator = ObjectAnimator.OfFloat(this, "X", 0, width);
        animator.SetDuration(this.TransitDuration);
        Animator r = animator as Animator;
        r.AddListener(new AnimatorEndListenerAdapter(() => this.OnContextHidden()));

        return r;
      }
    }

    public override void OnActivityCreated(Bundle savedInstanceState) {
      base.OnActivityCreated(savedInstanceState);
      this.RetainInstance = true;
    }

} 
```

# ruby-on-rails - Ruby on Rails：根据多个关系和条件过滤关联

> ID：15881558
> 
> 赞同：0
> 
> 时间：2013-04-08T14:19:21.400
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

在我的应用程序中，我有模型 Category、Item、Property 和 PropertyValuation。这个想法是一个类别包含项目，一个项目有几个属性。PropertyValuation 的目的是存储特定项目的属性值。模型定义如上：

```
class Category < ActiveRecord::Base
  attr_accessible :name, :description, :parent, :children, :items, :parent_id

  has_many :children, :class_name => "Category", :foreign_key => "parent_id", :dependent => :nullify
  belongs_to :parent, :class_name => "Category"

  has_many :categorizations
  has_many :items, :through => :categorizations
end

class Item < ActiveRecord::Base
  attr_accessible :name, :description, :property_valuations, :barcode

  has_many :property_valuations, :dependent => :destroy  
  has_many :properties, :through => :property_valuations 

  has_many :categorizations
  has_many :categories, :through => :categorizations

end

class Property < ActiveRecord::Base
  attr_accessible :name, :description, :value_type, :unit, :unit_id

  has_many :property_valuations, :dependent => :destroy  
  has_many :items, :through => :property_valuations
  has_many :property_ranges, :dependent => :destroy

  belongs_to :unit
end

class PropertyValuation < ActiveRecord::Base     
  attr_accessible :property, :item, :value, :categorization

  belongs_to :property
  belongs_to :item
end 
```

现在我的问题是，我已经成功地通过这样做来按名称过滤类别项目：

```
@category.items.where("lower(items.name) like ?", "%#{params[:keywords].downcase}%") 
```

但现在我还想根据关联的属性值过滤这些项目。我收到属性 ID 和每个属性的值（精确值、最小值或最大值），其想法是动态构建查询。给定我的模型，例如，我该怎么做：我想要名称包含“foo”的项目，其中 id=1 的属性值为 2，id=2 的属性值为 <10，id=8 的属性具有值>2 和值<5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:32:16.813

您可以将搜索从`PropertyValuation`模型中移开并将其加入产品和类别模型

```
valuations = PropertyValuation.joins(:item)
                              .where(value: 2, property_id: 1)
                              .where('lower(items.name) LIKE ?', "%#{params[keywords].downcase}%")
items      = valuations.map(&:item) 
```

有一个宝石可以让这件事变得更容易，一个是 Ransack [https://github.com/ernie/ransack](https://github.com/ernie/ransack)

```
Item.search(name_contains:                   params[:keywords], 
            product_valuations_value_equals: 2, 
            product_valuations_property_id:  1) 
```

# powershell - 变量不能由函数通过点酸来设置

> ID：15881560
> 
> 赞同：1
> 
> 时间：2013-04-08T14:19:24.107
> 
> 标签：powershell

我想在 common.ps1 中实现一个“日志”库，然后使用点源来加载它。但它不像我预期的那样工作我认为在调用 SetLogConfiguratoion 后我可以获得不同的值，但该值没有改变。那么“日志”功能不起作用，因为日志路径是 $null。我是否误解了点源？

```
write-host $g_nodeName ==> show $null
. 'C:\Test\Common.ps1'

write-host $g_nodeName ==> show "unkown"
SetLogConfiguratoion $sqlInstance (join-path $BackupShare 'RemvoeAgent.log')
write-host $g_nodeName ==> still "unkown"
Log 'ERROR' 'Test' 
```

Common.ps1如下

```
$g_logPath = $null
$g_nodeName = "Unknown"

function SetLogConfiguratoion
{
    param
    (
        [Parameter(
            Mandatory=$true,
            HelpMessage='NodeName')]
            [ValidateNotNullOrEmpty()]
        [string]$NodeName,    

       [Parameter(
            Mandatory=$true,
        HelpMessage='LogPath')]
            [ValidateNotNullOrEmpty()]
            [string]$LogPath
        )

        if($LogPath.StartsWith('Microsoft.PowerShell.Core\FileSystem::'))
        {
            $g_logPath = $LogPath;
        }
        else
        {
            $g_logPath = 'Microsoft.PowerShell.Core\FileSystem::' + $LogPath;
        }

        $g_NodeName = $NodeName;
    }
function Log
{
    param
    (    
        [Parameter(
            Mandatory=$true,
            HelpMessage='Log level')]
        [ValidateNotNullOrEmpty()]
        [ValidateSet(
            'Error',
            'Warning',
            'Info',
            'Verbose'
            )]
        [string]$level,

        [Parameter(
            Mandatory=$true,
            HelpMessage='message')]
        [ValidateNotNull()]
        [string]$message
    )

    if($g_logPath -eq $null)
    {
        return
    }

    $time = Get-Date –format ‘yyyy/MM/dd HH:mm:ss’

    $msg = "$time :: $level :: $nodeName :: $message"

    Add-content $LogPath -value $message + '\n'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:45:55.050

点源脚本将使其在本地范围内运行，并在那里创建函数，但您仍然在它自己的范围内调用函数。它将在该范围内设置 $g_nodename 。如果您希望所有这些都在本地范围内运行，您需要将脚本点源到本地范围以创建函数，然后在本地范围内调用函数（通过在它们前面加上'。'（注意后面的空格点 - 必须在那里）。

```
. SetLogConfiguratoion $sqlInstance (join-path $BackupShare 'RemvoeAgent.log') 
```

# php - .htaccess 双重重写规则到同一个文件

> ID：15881564
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:19:35.163
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在制作一个应用程序，您可以在其中将文件存储在文件夹等中。

我的 .htaccess 文件中有一个小问题，因为我希望能够将两个规则重定向到同一个页面，一个属性打开而没有。

我想`example.com/drive`将自己重新写入`example.com/drive.php`并且它确实这样做了这部分工作，但我也想`example.com/drive/path/to/a/dir/here/`将自己重写为`example.com/drive?dir=drive/path/to/a/dir/here/`.

.htaccess 文件可以做到这一点吗？如果是，如何？

这是我到目前为止得到的代码：

```
DirectoryIndex home.php
DirectoryIndex index.php

ErrorDocument 404 /err/404.php
ErrorDocument 500 /err/500.php

Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L,QSA]
RewriteRule ^u/(.+)$ /profile.php?u=$1 [L,QSA]
RewriteRule ^f/(.+)$ /file.php?f=$1 [L,QSA]
RewriteRule ^s/(.+)/(.+)$ /page.php?p=$1&f=$2 [L,QSA]
RewriteRule ^s/(.+)$ /page.php?p=$1 [L,QSA]
RewriteRule ^dir/(.+)$ /drive.php?dir=$1 [L,QSA] 
```

此代码通过在 url 中使用 dir 而不是 drive 来工作，但这不是我想要的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:59:57.507

您的规则将是正确的（如果您更改`dir`为`drive`如前所述），您只需要重新排序它们：

```
DirectoryIndex home.php
DirectoryIndex index.php

ErrorDocument 404 /err/404.php
ErrorDocument 500 /err/500.php

Options +FollowSymlinks
RewriteEngine On
RewriteBase /

# first handle these explicit pattern matches
RewriteRule ^u/(.+)$         /profile.php?u=$1   [L,QSA]
RewriteRule ^f/(.+)$         /file.php?f=$1      [L,QSA]
# it's quite likely this is what you want here instead:
RewriteRule ^s/([^/]+)/(.+)$ /page.php?p=$1&f=$2 [L,QSA]
RewriteRule ^s/(.+)$         /page.php?p=$1      [L,QSA]
RewriteRule ^drive/(.+)$     /drive.php?dir=$1   [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
# I'm guessing you want to only rewrite to script that exists in the root, if
# this is not the case you can change this back to .+
RewriteRule ^[^/]+$ /$0.php [L,QSA] 
```

# python - Python，argparse：关闭所选参数的帮助描述

> ID：15881568
> 
> 赞同：1
> 
> 时间：2013-04-08T14:19:48.257
> 
> 标签：python, argparse

使用`argparse`，有没有办法关闭某些选定参数的帮助说明？我试过`add_help=False`了，但它与`help=myDescription`.

我想传递一个布尔值来决定是否要显示参数。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:21:31.113

是的。在`add_argument`中，只需指定`help=argparse.SUPPRESS`。

例子：

```
import argparse

args = ('foo','bar','baz','qux')    
parser = argparse.ArgumentParser()

for x in args:
    parser.add_argument('--{0}'.format(x),help=x if x != 'baz' else argparse.SUPPRESS)

parser.parse_args(['-h']) 
```

现在我们看到它`baz`不见了。

# linux - 读取shell脚本时如何处理未找到的文件

> ID：15881571
> 
> 赞同：1
> 
> 时间：2013-04-08T14:19:56.280
> 
> 标签：linux, bash, shell

我正在通过 shell 脚本从文件中读取字符串。它是这样的：

```
count = 0
while read LINE
do
    count++
    if [ "$LINE" == "NONE" ]
    then
       echo "state is NONE"
    else
       if [ "$LINE" == "PLAYING" ]
       then
           echo "state is PLAYING"
       fi
    fi
done<$FILENAME 
```

这是我从文件中读取的内容，以及我如何处理它，现在如果找不到文件，我想做其他事情，有什么办法吗？例如：

```
if[ file not found]
then
   do something
fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:23:03.160

```
if [ -f path_to_file ]
then
  echo "file was found"
else
  echo "file was not found"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:21:35.333

您最好使用以下条件开始您的脚本：

```
if [ ! -f /your/file ]; then
    echo "file not found"
else
    ...
    proceed with your `while`, etc.
    ...
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:34:57.090

由于您正在尝试读取文件，那么也许您应该测试该文件是否存在，*以及*您是否具有读取权限：

```
if [[ ! -f $FILENAME ]] || [[ ! -r $FILENAME ]]
then
    # do stuff
fi 
```

`-f`检查是否`$FILENAME`是常规文件的测试，`-r`检查您（当前用户）是否具有读取权限。

# c# - 从 C# 中的视频流中获取图像

> ID：15881574
> 
> 赞同：1
> 
> 时间：2013-04-08T14:20:00.347
> 
> 标签：c#, .net, image, video, stream

我正在尝试从流中获取图像（更准确地说是 MemoryStream）。我无法从 Microsoft 找到任何可以解决我的问题的东西。我从 SQL 获取我的流，所以如果有某种方法可以从那里获取图像，那就没问题了。我检查了ffmpeg，问题是我需要保存视频文件。这些文件可以达到 2GB，如果有办法不写入磁盘，那将会很有帮助。如果有办法只读取前 10MB 或其他有限大小并从中读取图像，那也可以是一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:21:12.653

视频馈送可能像原始未压缩视频帧并排一样简单，也可能像更复杂的多路复用文件格式兼容的数据块一样简单，例如 .MP4 文件。虽然前一种情况可能非常简单，但后一种情况需要您解复用文件，在流中查找，开始解码，可能跳过几帧，然后抓取感兴趣的帧。关键是它可能并不像看起来那么简单。

Windows 中的视频处理 API 是 DirectShow、Media Foundation。使用 DirectShow，可以在 SQL 支持的数据流之上创建自定义数据源，并从那里按需获取 DB 数据，使用 API 接口组件（库存和第三方）完成其余任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T07:06:27.333

[可以使用免费的 VideoConverter for .NET](http://www.nrecosite.com/video_converter_net.aspx)捕获帧，它实际上是 FFMpeg 工具的包装器。这个想法是使用 VideoConverter 的实时流功能（到 C# Stream）来处理特殊的 FFMpeg 格式“rawvideo”，它实际上是可以由 C# 程序处理的位图流，如下所示：

```
var videoConv = new FFMpegConverter();
var ffMpegTask = videoConv.ConvertLiveMedia(
    "input.mp4",
    null, // autodetect live stream format
    rawBmpOutputStream,  // this is your special stream that will capture bitmaps
    "rawvideo",
    new ConvertSettings() {
        VideoFrameSize = "320x200",  // lets resize to exact frame size
        CustomOutputArgs = " -pix_fmt bgr24 ", // windows bitmap pixel format
        VideoFrameRate = 5, // lets consume 5 frames per second
        MaxDuration = 5 // lets consume live stream for first 5 seconds
    }); 
```

VideoConverter 可以从另一个 .NET Stream 读取实时流（如果输入格式可以与实时流转换一起使用）。

# c# - 获取 DropDownList 的选定值。ASP.NET MVC

> ID：15881575
> 
> 赞同：9
> 
> 时间：2013-04-08T14:20:02.123
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

我正在尝试填充 DropDownList 并在提交表单时获取所选值：

这是我的模型：

```
public class Book
{
    public Book()
    {
        this.Clients = new List<Client>();
    }

    public int Id { get; set; }
    public string JId { get; set; }
    public string Name { get; set; }
    public string CompanyId { get; set; }
    public virtual Company Company { get; set; }
    public virtual ICollection<Client> Clients { get; set; }
} 
```

我的控制器：

```
 [Authorize]
    public ActionResult Action()
    {
        var books = GetBooks();
        ViewBag.Books = new SelectList(books);
        return View();
    }

    [Authorize]
    [HttpPost]
    public ActionResult Action(Book book)
    {
        if (ValidateFields()
        {
            var data = GetDatasAboutBookSelected(book);
            ViewBag.Data = data;
            return View();
        }
        return View();
    } 
```

我的表格：

```
@using (Html.BeginForm("Journaux","Company"))
{
<table>
    <tr>
        <td>
            @Html.DropDownList("book", (SelectList)ViewBag.Books)
        </td>
    </tr>
    <tr>
        <td>
            <input type="submit" value="Search">
        </td>
    </tr>
</table>
} 
```

当我单击时，Action 中的参数“book”始终为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T14:49:22.260

在 HTML 中，下拉框只发送简单的标量值。在您的情况下，这将是所选书籍的 id：

```
@Html.DropDownList("selectedBookId", (SelectList)ViewBag.Books) 
```

然后调整您的控制器操作，以便您从传递给您的控制器操作的 id 中检索书：

```
[Authorize]
[HttpPost]
public ActionResult Action(string selectedBookId)
{
    if (ValidateFields()
    {
        Book book = FetchYourBookFromTheId(selectedBookId);
        var data = GetDatasAboutBookSelected(book);
        ViewBag.Data = data;
        return View();
    }
    return View();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T16:29:50.967

您可以使用 DropDownListFor 如下，它更简单

```
@Html.DropDownListFor(m => m.Id, new SelectList(Model.Books,"Id","Name","1")) 
```

（你需要一个强类型视图——视图包不适合大列表）

```
 public ActionResult Action(Book model)
   {
        if (ValidateFields()
        {
            var Id = model.Id;
        ... 
```

我认为这更易于使用。

# asp.net-mvc-3 - 模拟单元测试的 Request.QueryString 并针对视图进行断言

> ID：15881579
> 
> 赞同：2
> 
> 时间：2013-04-08T14:20:11.110
> 
> 标签：asp.net-mvc-3, unit-testing, controller, mocking, moq

我有以下控制器：

```
public class ResetController : Controller
{
    //
    // GET: /Reset/
    private Models.ResetModel rm = new Models.ResetModel();

    public ActionResult Index()
    {
        //Check that this has a query string that is containing in the database 
        //and has been done in the last 30  mins.
        string qString = Request.QueryString["v"].ToString();            

        //if this is a good querystring
        if (rm.CheckQString(qString))
            return View();
        else
            return View("Index", "Home");
    } 
```

我现在需要创建一个单元测试，以确保如果在数据库中找到 Request.QueryString 值，则返回适当的视图，但我无法这样做。这是我尝试进行的测试以检查这一点：

```
[TestMethod()]
    public void IndexTest()
    {
        ResetController target = new ResetController();                           
        var request = new Mock<HttpRequestBase>();
        request.SetupGet(r => r.QueryString).Returns(HttpUtility.ParseQueryString("?v=0ocIqhOQkrBaCXRO96E4B5HcOCYgMfJYOpRdNU/yIEUmH2szuXXKU51Td6NzRxlk"));

        var result = target.Index() as ActionResult;
        Assert.IsNotNull(result);
    } 
```

有人可以帮我提出建议以确保该控制器经过全面测试吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T19:06:20.630

这是一个迟到的答案，但如果将来有人出现在这篇文章中......请参阅这篇文章[我将如何模拟查询字符串](https://stackoverflow.com/questions/11734181/how-would-i-mock-a-querystring)

目标是隔离测试，使其不依赖于来自数据库的 QueryString 结果，而是依赖于提供的值。要在 Moq 中执行此操作，请在创建模拟上下文后使用 SetupGet 方法。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:51:41.403

我建议您将模型作为依赖项传递给控制器​​。然后，您也可以在单元测试中对其进行模拟，以将您的控制器逻辑与模型的 CheckQString 实现逻辑隔离开来。我不确定我是否正确理解了您的问题。

好的案例可能看起来像这样。当然，您需要检查是否返回了正确的视图。

```
[TestMethod()]
public void IndexTest()
{
    const string query = "some query";
    Models.ResetModel rm = new Mock<Models.ResetModel>();
    rm.Setup(m => m.CheckQString(query)).Returns(true);
    ResetController target = new ResetController(rm.Object);                           
    var request = new Mock<HttpRequestBase>();
    request.SetupGet(r => r.QueryString).Returns(HttpUtility.ParseQueryString("?v=" + query));

    var result = target.Index() as ActionResult;
    Assert.IsNotNull(result);
} 
```

# android - 用 ABS 覆盖标准样式

> ID：15881580
> 
> 赞同：0
> 
> 时间：2013-04-08T14:20:14.407
> 
> 标签：android, android-layout

在我的 AndroidManifest 文件中，我没有声明主题。结果是：黑色背景和蓝色背景的 ABS，列表项的状态也是蓝色。没关系。

现在我想`indeterminateProgressStyle`设置`Widget.ProgressBar.Small`

因此我必须像这样声明我自己的风格：

```
<style name="Custom" parent="??">
    <item name="android:actionBarStyle">@style/ActionBarIPS</item>
</style> 
```

我应该在父参数中输入什么？我想要像以前一样的所有样式行为（黑色背景，蓝色 ABS 和蓝色列表项状态等，因为它是在我没有在 AndroidManifest 中声明主题属性时定义的。

编辑：我还需要知道这个父母的价值：

```
<style name="ActionBarIPS" parent="ABS with blue background">
    <item name="android:indeterminateProgressStyle">@style/IndeterminateProgress</item>
</style> 
```

清单中没有样式的版本： ![清单中没有样式的版本](https://i.stack.imgur.com/PtdHD.jpg)

具有自定义样式和 parent=Theme.Sherlock 的版本 ![具有自定义样式和 parent=Theme.Sherlock 的版本](https://i.stack.imgur.com/aJmIi.jpg)

我想要将不确定微调器设置为“小”的第一个版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:23:45.773

这取决于您当前的风格，可以是`Theme.Sherlock`,`Theme.Sherlock.Light`等`Theme.Sherlock.ForceOverflow`，例如：

```
<style name="Custom" parent="Theme.Sherlock or Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/ActionBarIPS</item>
    <item name="android:indeterminateProgressStyle">@style/IndeterminateProgress</item>
</style> 
```

***注意：***`style.xml`您必须在您的`values`目录中声明此样式

**编辑：**

你在`ActionBar`没有使用 ABS 的情况下会变成蓝色，因为你使用的是三星`TouchWiz`默认 UI。

如果您安装`APK`在非三星设备上，您将看不到此蓝色操作栏，但如果您被迫拥有蓝色操作栏，则将以下图像放入您的`drawable`目录并将其设置为您的操作栏背景：

```
 getSupportActionBar().setBackgroundDrawable(getResources()
            .getDrawable(R.drawable.TouchWiz_ActionBar_Bg)); 
```

![在此处输入图像描述](https://i.stack.imgur.com/EtBpl.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:25:36.707

尝试使用“Theme.Sherlock”作为父母。另外我建议添加：

```
<item name="actionBarStyle">@style/ActionBarIPS</item> 
```

# android - 如何在android中停止后台运行服务？

> ID：15881583
> 
> 赞同：0
> 
> 时间：2013-04-08T14:20:15.453
> 
> 标签：android

```
Intent svc=new Intent(BeapSoundActivity.this, BackgroundService.class);
           pendingIntent = PendingIntent.getService(BeapSoundActivity.this, 0, svc, 0);

           AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

           Calendar calendar = Calendar.getInstance();
           calendar.setTimeInMillis(System.currentTimeMillis());
           calendar.add(Calendar.SECOND, 2);
           alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 10*1000, pendingIntent); 
```

我正在使用上面的代码在 mt onCreate() 中启动我的服务，

当我单击按钮更改我的活动时，我只想停止此服务

```
I used this line in my Button Click

    stopService(new Intent(BeapSoundActivity.this, BackgroundService.class)); 
```

但这对我没有用

## 这是我的 BackGroundService 类

```
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONObject;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.IBinder;
import android.os.StrictMode;
import android.util.Log;

public class BackgroundService extends Service{

//   private static final String TAG = null;
//   MediaPlayer player;
     MediaPlayer mMediaPlayer;
     String  strResponse;
     int i=0;

     static {

//         StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

           StrictMode.setThreadPolicy( new StrictMode.ThreadPolicy.Builder().permitAll().build());
       }
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        mMediaPlayer = new MediaPlayer();
        Log.e("Oncreate","oncreate");

    }
    public int onStartCommand(Intent intent, int flags, int startId) {
//        player.start();
        Log.e("Onstartcommand","onstartcommand");

            pendingCount();

        return 1;
    }

    public void onStart(Intent intent, int startId) {
        // TO DO
//      super.onStart(intent,startId);

        Log.e("Onstart","onstart");
//      pendingCount();
    }
    public IBinder onUnBind(Intent arg0) {
        // TO DO Auto-generated method
        return null;
    }

    public void onStop() {

    }
    public void onPause() {

    }
    @Override
    public void onDestroy() {
//        player.stop();
//        player.release();
    }

    @Override
    public void onLowMemory() {

    }

    public void playSound(Context context) throws IllegalArgumentException, SecurityException, IllegalStateException,
    IOException {
  Uri soundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
//   mMediaPlayer = new MediaPlayer();
  mMediaPlayer.setDataSource(context, soundUri);
  final AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
  if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
    mMediaPlayer.setLooping(true);
    mMediaPlayer.prepare();
    mMediaPlayer.start();

}
}

    public void pendingCount(){
         DefaultHttpClient httpClient = new DefaultHttpClient();

           HttpGet post = new HttpGet("http://mybusinessapp2.testshell.net/api/Orders");

           post.addHeader("UserName", "info@mybusinessapp.com");
         post.addHeader("Password", "c7d7cdf598be88a21a477842ebfa5ca5");

         ResponseHandler<String> resHandler = new BasicResponseHandler();

              String post_response = null;
            try {
                post_response = httpClient.execute(post,resHandler);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
              Log.e("resp",post_response);

              try{
                    JSONObject jobject=new JSONObject(post_response);

                     strResponse= jobject.getString("Count");

              }
              catch(Exception e){
                  e.printStackTrace();
              }

              Log.e("tv",""+BeapSoundActivity. pending_number);
             try{ 
               BeapSoundActivity. pending_number.setText(strResponse);

//              int pending=Integer.parseInt(BeapSoundActivity.pending_number.getText().toString());

//               Log.e("counter",""+pending);
             }
             catch(NullPointerException e){
                 e.printStackTrace();
             }
             int pending=Integer.parseInt( strResponse);
                 if(pending==0){

                      mMediaPlayer.stop();
                      mMediaPlayer = new MediaPlayer();
                 }

                 if(pending>0){

                        try {
                            playSound(BackgroundService.this);
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    catch (IllegalArgumentException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (SecurityException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();

                 }
                 }

    }

} 
```

请帮我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:28:03.393

您创建了一个每隔 10 秒启动一次服务的警报。您是否在停止服务之前取消了它？（如果没有，使用 (AlarmManager)getSystemService(Context.ALARM_SERVICE).cancel）

# eclipse - Eclipse/IntelliJ：成员的静态导入

> ID：15881584
> 
> 赞同：1
> 
> 时间：2013-04-08T14:20:21.267
> 
> 标签：eclipse, static, import, intellij-idea, member

我正在重构一些影响我的代码的许多位（巨大）的东西，我最终需要组织我的项目的导入，以便它可以添加一个类中成员的静态导入..

在花了一整天试图弄清楚如何做到这一点之后，我找不到路。它在 IntelliJ 或 Eclipse 中都不起作用。

在 Eclipse 中，我已将其添加到收藏夹设置中，就像这里解释的那样：

[Eclipse 优化导入以包括静态导入](https://stackoverflow.com/questions/288861/eclipse-optimize-imports-to-include-static-imports)

但是，它仅适用于 Control + 空格，不适用于 Control+Shift+O（重新排列导入）

在 Eclipse 4.2 中，至少它绘制了红色线并向我提出了添加导入的建议，但它仍然在“组织导入”触发器上什么都不做。

在 IntelliJ 中也是一样，将包和类添加到设置中，修复了 Control+Alt+Space，但它不处理“优化导入”功能。

我无法相信这一点。有没有人必须处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-04T12:21:20.160

您不想`import static`在所有事情上都执行；如果该类包含过于通用的类成员，`import static`则只会使您的代码不可读。除此之外，还可能存在名称冲突（例如，两个具有一个`static getInstance()`方法的类会很常见。

使用 IntelliJ 13.1.3，您可以按 Alt-ENTER，然后选择进行静态导入（旧版本可能需要在 Alt-ENTER 之前有一个或多个 CTR-Space。如果您在静态成员上执行此操作，则只有静态成员是静态导入。如果您在一个类上执行此操作，则可以静态导入所有内容（例如`import static some.package.SomeClass.*`）。在后一种情况下，它将删除静态导入前面的类，*除非*存在名称冲突。

请注意，即使没有名称冲突，执行诸如静态导入之类`SomeInterface someInstance = getInstance()`的操作`getInstance()`也会让您的同事*非常紧张*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:19:02.480

请重新阅读您提到的问题。您错过了提到++的[答案](https://stackoverflow.com/a/289289/44089)。“组织导入”和“添加导入”命令之间存在差异。`Ctrl``Shift``M`

# c# - 将 0+ 关联映射到实体

> ID：15881586
> 
> 赞同：1
> 
> 时间：2013-04-08T14:20:22.140
> 
> 标签：c#, entity-framework, entity-framework-4

我正在使用 Entity Framework 4.1，我想映射以下内容。

```
Car 
- Car_ID
- Name
- Created

Part
- Part_ID
- Car_ID
- Name
- Created 
```

所以“汽车”可以有 0 个或更多部分。并且零件必须与汽车相关联。

```
public class Car
{
  [Key]
  [Column("Car_Id")]
   public int Id {get;set;}

   ..
   ..

   public ICollection<Parts> Parts { get; set; } 
}

public class Part
{
  [Key]
  [Column("Part_Id")]
   public int Id {get;set;}

   ..
   ..

   public Car Car { get; set; } 
} 
```

我的上下文如下所示：

```
public class MyContext :  DbContext
{
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
 {
     modelBuilder.Configurations.Add(new CarConfiguration());
     modelBuilder.Configurations.Add(new PartConfiguration());
 }

}

public class CarConfiguration : EntityTypeConfiguration<Car>
{
      public DealerDemoEnrollmentConfiguration()
      {
          this.ToTable("Cars", SchemaName);
          this.HasKey(x => x.Id);
          this.HasMany(x => x.Parts);
      }
}

public class PartConfiguration : EntityTypeConfiguration<Part>
{
      public DealerDemoEnrollmentConfiguration()
      {
          this.ToTable("Parts", SchemaName);
          this.HasKey(x => x.Id);
          this.HasRequired(x => x.Car);
      }
} 
```

1.  我希望 Car 成为“主”实体，所以如果我想添加一个部分，我必须这样做：

    car.Add(部分);

2.  默认情况下会延迟加载零件还是每次我加载汽车时都会加载所有零件？我希望它默认延迟加载，除非我明确想要所有部分。

3.  出于学习目的，如果我不想要 #1 怎么办，即我只想能够做到：

    part.Car = car // 保存部分，即不保存部分

# linux - 错误：未在此范围内声明“qAbs”

> ID：15881587
> 
> 赞同：0
> 
> 时间：2013-04-08T14:20:26.847
> 
> 标签：linux, qt, qwt

当我尝试手动安装 qwt 时，出现此错误。我该如何解决？提前谢谢。顺便说一句，我也尝试使用命令 yum install 安装 qwt，但之后我找不到 qwt 的安装位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:18:33.367

`rpm -ql qwt`会告诉你它安装了哪些文件。请注意，基于 RPM 的发行版通常都有`-dev`软件包，因此您可能正在寻找该`qwt-dev`软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:33:47.523

您必须提供的最少信息是 Qt 和 Qwt 版本。

# asp.net-mvc-3 - 在内存或数据库中缓存昂贵的 SQL 查询？

> ID：15881590
> 
> 赞同：2
> 
> 时间：2013-04-08T14:20:30.887
> 
> 标签：asp.net-mvc-3, caching, entity-framework-4, asp.net-caching, database-caching

让我从描述场景开始。我有一个带有 SQL Server 2008 的 MVC 3 应用程序。在其中一个页面中，我们显示了从数据库返回的产品列表，并且每个登录用户都是唯一的。用于返回产品列表的 SQL 查询（实际上是 VIEW）非常昂贵。

*   它基于非常复杂的业务需求，现阶段无法更改。
*   数据库架构无法更改或重新设计，因为它被其他应用程序使用。
*   有 50k 个产品和 5k 个用户（每个用户可以访问 1 到 50k 个产品）。

为了显示登录用户的产品页面，我们使用：

```
SELECT TOP X * FROM [VIEW] WHERE UserID = @UserId -- where 'X' is the size of the page 
```

上面的查询最多返回 50 行（最大页面大小）。WHERE 子句将行数限制为最多 50k（用户有权访问的产品）。加载页面大约需要 5 到 7 秒，而这正是上面的 SQL 查询在 SQL 中运行所需的时间。 **问题**：

用户进入产品页面，很可能使用分页，重新排序结果，进入详细信息页面等，然后返回列表。并且每次显示结果需要5-7s。

这是不可接受的，但同时业务团队已经接受第一次加载产品页面可能需要 5-7 秒。因此，我们想到了**CACHING**。

我们现在有两个选项可供选择，至少对我而言，最“明显”的一个是使用 .Net 缓存（在内存中/在 proc 中）。（请注意，由于我们的提供商/托管合作伙伴的技术限制，目前不允许分布式缓存）。

但我对此不太满意。我们最终可能会在内存中有很多产品（当有 50 或 100 个用户同时登录时），这可能会导致服务器上的其他问题，例如 .Net 在我们的代码插入新项目时不断删除缓存项目以释放​​空间。

第二**个**选项：

这里的主要问题是生成用户 x 产品 x 访问视图非常昂贵，因此我们认为我们可以创建一个平面表（或者换句话说，数据库中所有产品 x 用户的缓存）。该表将完全是视图的结果。但是，如果添加新产品、更改用户权限等，结果可能随时更改。因此我们需要不断刷新表（这可能需要几秒钟），这开始变得有点复杂。

同样，尽管我们可以实现某种缓存提供程序，并且根据用户的请求，我们将运行原始 SQL 查询并从视图中选择产品（5-7 秒，只接受一次）并将结果保存在平面中SQL 中名为 ProductUserAccessCache 的表。下一个请求，我们将通过快速查询从这个缓存表中获取值（因为我们可以很容易地识别为该特定用户缓存的结果），而无需在 SQL 中进行计算。每当添加产品或更改权限时，我们都会截断缓存表，并在新请求时为请求的用户重新填充该表。这对我来说似乎并不太复杂，但我们在这里所做的基本上是创建一个新的缓存“提供程序”。

*   有没有人有这种问题的经验？
*   使用 .Net 缓存（在 proc 中）会更好吗？
*   有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:47:32.010

前段时间我们遇到了类似的问题，我们正在考虑使用 EF 缓存来避免检索信息的延迟。我们的问题是 1 - 2 秒。延迟。[以下](http://code.msdn.microsoft.com/EFProviderWrappers)是一些可能有助于如何缓存扩展 EF 的表的信息。缓存的缺点之一是您需要的信息有多新鲜，因此您需要相应地设置缓存过期时间。根据该到期时间，用户可能需要等待比他们想要的更多时间来获取新信息，但如果您的用户可以接受他们可能会看到过时的信息以避免延迟，那么权衡是值得的。

在我们的场景中，我们决定更好地获得新鲜信息而不是快速，但正如我之前所说，我们的等待时间并没有那么长。

希望能帮助到你

# c# - 更改不是子操作的 Controller 中的 ViewBag，并在 View 上下文中检索它

> ID：15881591
> 
> 赞同：0
> 
> 时间：2013-04-08T14:20:31.937
> 
> 标签：c#, asp.net-mvc-4, viewbag

我们的应用程序有一个全局控制器，所有其他控制器都继承自该控制器；从内部，在`OnResultExecuting`覆盖中，我访问`HttpContext`存储在

*filterContext.ParentActionViewContext.ViewBag*

这允许我在请求的生命周期后期访问 ViewBag 中的此项。

**问题**：其中一些 filterContext 不是子操作，因此它们的*ParentActionViewContext*字段为空，我不知道有任何其他方式可以访问 ViewBag。

**问题**：如果我的控制器偶然发现了一个非子动作，我怎样才能将这个项目传递给 ViewBag？

我想强调我对 ASP.Net MVC4 的缺乏经验——如果有更好的方法来解决同样的问题，请不要犹豫，提出建议。

编辑：添加一些代码进行澄清。

这是我在 Controller 方法中将 myItem保存在**ViewBag中的位置：**

```
protected override void OnResultExecuting(ResultExecutingContext filterContext) {

    [...]

    if (filterContext.ParentActionViewContext != null && filterContext.ParentActionViewContext.ViewBag != null) {
        filterContext.ParentActionViewContext.ViewBag["DealerId"] = myItem;
    }

    [...]

    base.OnResultExecuting(filterContext);
} 
```

这是我在 HtmlHelper 中检索它的地方：

```
public static MvcHtmlString DealerSpecificLessStyleSheet(this HtmlHelper htmlHelper)
    {
        var linkBuilder = new TagBuilder("link");

        var dealerReferenceGuid = (string)htmlHelper.ViewBag["DealerId"];
        /* Do something with this ID */

        [...]
        return new MvcHtmlString(linkBuilder.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:39:30.340

> I access an item (something obtained by accessing the Session...

If you already have the value in Session then you don't need to have it in the ViewBag just specifically in your current situation. You can use a helper class to get it to your views:

```
public sealed class UIHelper
{
    public static string GetThatValue()
    {
        return (string)HttpContext.Current.Session["target_key"];
    }
} 
```

# git - 无法克隆开发分支

> ID：15881592
> 
> 赞同：0
> 
> 时间：2013-04-08T14:20:32.720
> 
> 标签：git, github, git-clone, typerex

我想从它的[开发分支安装](https://github.com/OCamlPro/typerex)[typerex](http://www.typerex.org/index.html)。但是我在克隆它时遇到了麻烦，如下所示：

```
~:~$ git clone git@github.com:OCamlPro/typerex.git
Cloning into 'typerex'...
The authenticity of host 'github.com (204.232.175.90)' can't be established.
RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'github.com,204.232.175.90' (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:32:06.883

您正在尝试在没有有效 SSH 密钥的情况下访问 SSH 地址。请尝试克隆只读地址。它不需要任何类型的任何身份验证。

```
git clone git://github.com/OCamlPro/typerex.git 
```

# asp.net - HTMLEditorExtender 移除“class”、“id”属性

> ID：15881594
> 
> 赞同：2
> 
> 时间：2013-04-08T14:20:43.903
> 
> 标签：asp.net, ajax, ajaxcontroltoolkit, sanitization, htmleditorextender

HTMLEditorExtender 似乎正在剥离我的 HTML 元素的“class”和“id”属性，即使 EnableSanitization="false" 也是如此。

这是默认行为吗？有解决办法吗？

我正在使用最新版本的 AjaxControlToolkit。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:TextBox ID="TextBox1" runat="server" Width="100%"></asp:TextBox>
<ajaxToolkit:HtmlEditorExtender ID="TextBox1_HtmlEditorExtender" runat="server" EnableSanitization="false"
    DisplaySourceTab="true" TargetControlID="TextBox1">
</ajaxToolkit:HtmlEditorExtender>
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:47:21.403

您需要下载 AjaxControlToolkit 库的源代码并根据您的需要稍微调整它们。有两个文件必须修改：

[HtmlEditorExtenderBehavior.Pre.js](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/a2a6dc6854e0cfb4d11ffa81ad2c2383dfe35086#Client/MicrosoftAjax.Extended/HtmlEditorExtender/HtmlEditorExtenderBehavior.Pre.js) 让我们调整`_encodeHtml`这个文件中的函数：

```
_encodeHtml = function () {
    //Encode html tags
    var isIE = Sys.Browser.agent == Sys.Browser.InternetExplorer;

    // code below to the next comment below can be removed completely if you 
    // want to preserve 'width' attribute as well
    var elements = this._editableDiv.getElementsByTagName('*');
    var element;
    for (var i = 0; element = elements[i]; i++) {
        /*
        try {
        element.className = '';
        element.removeAttribute('class');
        } catch (ex) { }
        try {
        element.id = '';
        element.removeAttribute('id');
        } catch (ex) { } */
        try {
            element.removeAttribute('width');
        } catch (ex) { }
        if (isIE) {
        }
    }
    // end of part of code that may be removed

    var html = this._editableDiv.innerHTML;
    if (isIE) {
        //force attributes to be double quoted
        var allTags = /\<[^\>]+\>/g;
        html = html.replace(allTags, function (tag) {
            var sQA = '';
            var nQA = '';
            if (tag.toLowerCase().substring(0, 2) != '<a') {
                sQA = /\=\'([^\'])*\'/g; //single quoted attributes
                nQA = /\=([^\"][^\s\/\>]*)/g; //non double quoted attributes
                return tag.replace(sQA, '="$1"').replace(nQA, '="$1"');
            }
            else {
                return tag;
            }
        });
    }
    //convert rgb colors to hex
    var fixRGB = this._rgbToHex;
    var replaceRGB = function () {
        html = html.replace(/(\<[^\>]+)(rgb\s?\(\d{1,3}\s?\,\s?\d{1,3}\s?\,\s?\d{1,3}\s?\))([^\>]*\>)/gi, function (text, p1, p2, p3) {
            return (p1 || '') + ((p2 && fixRGB(p2)) || '') + (p3 || '');
        });
    };
    //twice in case a tag has more than one rgb color in it;
    replaceRGB();
    replaceRGB();
    // remove empty class and id attributes
    html = html.replace(/\sclass\=\"\"/gi, '').replace(/\sid\=\"\"/gi, '');
    //converter to convert different tags into Html5 standard tags
    html = html.replace(/\<(\/?)strong\>/gi, '<$1b>').replace(/\<(\/?)em\>/gi, '<$1i>');
    //encode for safe transport
    html = html.replace(/&/ig, '&amp;').replace(/\xA0/ig, '&nbsp;');
    html = html.replace(/</ig, '&lt;').replace(/>/ig, '&gt;').replace(/\'/ig, '&apos;').replace(/\"/ig, '&quot;');
    return html;
} 
```

请注意上面注释的代码块。

[HtmlEditorExtender.cs](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/a2a6dc6854e0cfb4d11ffa81ad2c2383dfe35086#Server/AjaxControlToolkit/HtmlEditorExtender/HtmlEditorExtender.cs) 这是一个服务器控制代码文件，你需要稍微改变一下`Decode`方法：

```
public string Decode(string value)
{
    EnsureButtons();

    string tags = "font|div|span|br|strong|em|strike|sub|sup|center|blockquote|hr|ol|ul|li|br|s|p|b|i|u|img";
    string attributes = "style|size|color|face|align|dir|src";
    string attributeCharacters = "\\'\\,\\w\\-#\\s\\:\\;\\?\\&\\.\\-\\="; 
```

将**id**和**class**属性添加到`attributes`变量：

```
string attributes = "style|size|color|face|align|dir|src|class|id"; 
```

这就是全部 - 构建项目并在您的项目中使用 ACT 库的自定义 dll。

# java - java在eclipse中运行但不会在命令提示符下运行

> ID：15881597
> 
> 赞同：4
> 
> 时间：2013-04-08T14:20:54.820
> 
> 标签：java, eclipse

就在今天，我注意到我可以在 eclipse 中毫无问题地运行 java，但是当我尝试在命令提示符下运行它时，我得到“找不到或加载主类”。命令提示符实际上可以编译，它输出一个.class文件，但是在尝试执行时显示错误消息。（另外，几周前我能够在 cmd 中运行 java。）

```
/* work area for practice
 * 
*/

package Scrap;

public class experimentational {

public static void main (String [] args) {
    System.out.println("welcome to java!");

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:28:07.710

找到了答案：（我使用不同的代码，但它仍然与这个问题有关）

```
java -cp . hiThere

output: "Hi there" 
```

我知道这是类路径，但不知道它为什么起作用或周期对它有什么作用。有人有想法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:04:09.997

您是否在 Eclipse 之外的机器上安装了 JDK？如果您这样做了，请确保您正确设置了路径变量。打开命令提示符（假设是 windows）并输入 java -version

如果 JDK 安装正确并且路径变量设置正确，它应该会告诉您安装的 Java 版本。如果它告诉您“java”未被识别为您未安装 JDK 或未正确安装的命令。

您的程序在 Eclipse 中运行的原因是 Eclipse for Java 有自己的内部 JDK 和 JVM。

您的另一个选择是将路径变量设置为指向 Eclispe 的内部 JDK。

如果您之前能够从命令提示符运行它，那么很可能您的类路径已更改。这是一台在工作的机器吗？一些公司的 SMS 任务会定期执行并将默认系统设置（包括路径变量）恢复为公司默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:28:33.040

试试`java -cp . [your main class]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T14:32:33.980

利用：

```
javac Scrap/experimentational.java 
```

其次是：

```
java Scrap.experimentational 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T14:33:02.513

也许 java 和 javac 不在您的操作系统路径中。如果您在 cmd 中使用 Microsoft Windows，请键入路径，然后输入。如果 jdk 或 jre 不在路径中，则需要将它们放入其中

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-03-27T18:55:17.727

当我将粘贴的代码复制到编辑器中时，我遇到了类似的问题。我删除了第 1 行的包声明，然后它运行了。因此，在首先尝试删除包行之后，我会调查上述关于包的评论。

# ios - 如何为 iPhone 5 更新完全由图像组成的应用程序

> ID：15881599
> 
> 赞同：0
> 
> 时间：2013-04-08T14:21:09.157
> 
> 标签：ios, objective-c, xcode, interface-builder, iphone-5

我需要更新为 iPhone 4 屏幕尺寸编写的应用程序以在 iPhone 5 上运行。我已经阅读了关于 AutoLayout 等的内容，但问题是这个应用程序中的每个屏幕都是由背景图像组成的，然后具有可触摸区域，并且在代码中绘制。这些是绝对定位的。这不是我设计应用程序的方式，但这是我面临的任务。

我有两个问题要解决：

1）如何加载正确的背景图像。我是否需要为每个图像创建单独的图像大小，并且它们在每次加载图像时在代码中查询设备大小？为了提供一些背景信息，有超过 100 张图像。

2）如何维护可触摸区域。是否最好将所需数量的像素添加到应用程序的底部？这会起作用吗，还是每次我画东西时我都需要查询设备大小并相应地更改坐标？

谢谢，

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:25:04.973

自动布局将在运行 iOS 6 或更高版本的设备上工作。

1) 是的，您需要为应用程序中的所有图像提供更大的图像。您可以在基类中重载一些方法，以使其更容易加载正确的图像。另一种选择是拉伸图像，但这取决于您。

2）我会根据设备的大小调整我的坐标。

如果 Apple 添加其他屏幕尺寸，您将再次遇到同样的问题。您应该尝试创建一个可以随屏幕增长的界面。

# linux - setfsuid() - 如何解释结果代码？

> ID：15881603
> 
> 赞同：2
> 
> 时间：2013-04-08T14:21:12.643
> 
> 标签：linux, libc, setuid, setfsuid

[手册页`setfsuid()`](http://man7.org/linux/man-pages/man2/setfsuid.2.html)说：

> 成功时，返回之前的*fsuid*值。*出错时，返回fsuid*的当前值。

如果我没记错的话，可以简单地说“ ***setfsuid() 总是返回在调用 setfsuid() 之前设置的 fsuid 值——无论它是否成功。*** ”

我的假设正确吗？

如果是这样，并注意到*没有* `getfsuid()`功能，我应该如何检查调用是否成功？

作为一个快速而丑陋的黑客，我只能想到调用`setfsuid()`两次并使用第二次调用的返回值......

# php - 将 JSON 转换为 html 表

> ID：15881606
> 
> 赞同：0
> 
> 时间：2013-04-08T14:21:20.377
> 
> 标签：php, javascript, jquery, html

我已经做的是：我写了一个 php 脚本来呼应我的 JSON 数据结构。我现在正在尝试编写一个 Html 脚本，它将以 JSON 格式获得结果，但在下面的 html 表中回显这是我的 PHP 脚本和我尝试的 HTM 脚本。关于如何做到这一点的任何提示，我将不胜感激。

```
 <html>
<head>
<title>Details B</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="robots" content="noindex, nofollow" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        JSONload();
    })
    function JSONload() {
        $('#results').empty();
        $('<table id="table2" border="1"/>').appendTo('#results');
        $.get("details.php",   {date1:$('#date_1').val(),date2:$('#date_2').val()}, function(result){
            for(elem in result[0])
                $('<th scope="col">'+elem+'</th>').appendTo('#table2');
            for(var i = 0; i <= result.length; i++) {
                $('<tr id="'+(i)+'" />').appendTo('#table2');
                for(elem in result[i]) {
                    $('<td>'+result[i][elem]+'</td>').appendTo('#'+i);
                }
            }
        },'json');
    }
</script>
</head>
<body>
<table>
<tr>
<td>
    <div class="fixed">  
    </div>
</td>
</tr>
</table>
<br />
<table border="1">
  <tr>
        <th scope="col">Key</th>
        <th scope="col">Value</th>
  </tr>
  <tr>
    <td>    <label for="date_1">Date as dd/mm/yyyy (date_1)</label></td>
    <td>
      <input name="date_1" type="text" class="larger" id="date_1" value="31/1/1970" size="12" />
    </td>
  </tr>
  <tr>
          <td><label for="date_2">Date as dd/mm/yyyy (date_2)</label></td>
    <td>
      <input name="date_2" type="text" class="larger" id="date_2" value="31/1/1990" size="12" />
    </td>
  </tr>

  <tr>
    <td>List name of all cyclists with their country's name, gdp and population</td>
    <td><input type="button" onClick="JSONload()" name="submit" id="button" value="Submit"  class="larger" /></td>
  </tr>

  <tr>

  </tr>
</table>
<div id="results" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:24:58.203

我建议你看看一些流行的 jQuery 插件：

*   [数据表](http://datatables.net/)。我在几个项目中使用过它。通常我会创建一个由客户端调用的处理程序，以提供 JSON 格式的数据。该插件负责渲染、分页、启用排序和过滤。

*   [jq网格](http://www.trirand.com/blog/)。我没有使用它的经验，但它被一个庞大的社区使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:07:44.687

假设您的 JSON 数据以如下格式返回：

```
[
   {
       "name": "Lance Armstrong",
       "country": "USA",
       "gdp": 5000000000000,
       "population": 350000000
   },
   {
       "name": "Someone Else",
       "country": "France",
       "gdp": 1000000000000,
       "population": 70000000
   }
] 
```

下面的方法将生成您希望的表格：

```
function JSONload() {
$.get("details.php", {
    date1: $('#date_1').val(),
    date2: $('#date_2').val()
}, function (results) {
    var $table = $('<table id="table2" border="1"/>');    

    var $headerRow = $( "<tr></tr>");
    var keys = [];
    var aRow = results[0];
    for ( var key in aRow ) {
        keys.push(key);
        $headerRow.append("<th>" + key + "</th>");
    }
    $table.append($headerRow);

    for ( var  i = 0; i < results.length; i++ ) {
        var row = results[i];
        console.log(row);
        var $rowEl = $("<tr id='" + i + "'></tr>");
        for ( var j = 0; j < keys.length; j++) {
            console.log(key);
            key = keys[j];
            var value = row[key];
            $rowEl.append("<td>" + value + "</td>");
        }
        $table.append($rowEl);
    }    

$('#results2').empty().append($table); 
```

请注意，将 html 字符串与 jQuery 拼凑在一起并不是最佳实践。如果您正在寻找一个成熟的网格，请查看@ADC 的答案中建议的解决方案之一。

如果您要进行大量的 JavaScript HTML 生成，我建议您查看模板库，例如[Handlebars](http://handlebarsjs.com/)或[Underscore](http://underscorejs.org/#template)。这些允许您编写干净的语义模板，如下所示（取自 Handlebars）：

模板

```
<script id="template" type="text/template">
    <h1>{{title}}</h1>
    <ul class="people_list">
       {{#each people}}
          <li>{{this}}</li>
       {{/each}}
    </ul>
</script> 
```

采用

```
var template = Handlebars.compile($("#template").html());
var html = template({
    "title": "My People",
    "people": [
         "John Jones",
         "Mary Smith",
         "Suzie Smart"
    ]
});
$("results").html(html); 
```

# php - 您可以使用 Microsoft Azure 执行 SHOW TABLES 查询（或类似查询）吗？

> ID：15881607
> 
> 赞同：0
> 
> 时间：2013-04-08T14:21:20.973
> 
> 标签：php, codeigniter, azure-sql-database

是否有可能做到这一点？

我需要获取所选/连接数据库中所有表名的列表。

我一直在尝试使用 sql 关键字 EXPLAIN、DESCRIBE、SHOW TABLES 等，但只是从 Azure 返回错误：

```
Could not find stored procedure 'SHOW'. 
```

任何人都知道它是否可以做我想做的事情？

试过：

```
$q = $this->db->query('
  SHOW TABLES
');

$query = $q->result_array(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:55:54.613

我能够找到这个查询。

```
select * from sys.tables; 
```

[（基于此处的查询）](http://blogs.msdn.com/b/arunrakwal/archive/2012/04/09/sql-azure-list-of-tables-with-record-count.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:27:53.983

在 INFORMATION_SCHEMA.TABLES 上执行 SELECT ，如果您也想要列，请使用 INFORMATION_SCHEMA.COLUMNS

# javascript - 替换 var 中的 html 类

> ID：15881609
> 
> 赞同：0
> 
> 时间：2013-04-08T14:21:26.440
> 
> 标签：javascript, jquery, handlebars.js

我需要能够操作一个包含 html 的变量，我将在应用于 DOM 之前将其应用于 DOM。

我检索了一个车把模板并编译并应用了一个 JSON 对象。生成一个包含要应用于 DOM 的标记的 var。

不幸的是，jQuery 不能操纵这个输出。有没有办法让 jQuery 将此变量视为 html，以便在添加到 DOM 之前对其进行操作？

下面的例子

```
var htm = '<section><div></div></section>';
$('div',$(htm)).addClass('smurf');
alert(htm); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:23:08.607

尝试：

```
var htm = '<section><div></div></section>';
var $htm = $(htm);
$htm.find("div").addClass('smurf');
htm = $("<div>").append($htm).html();
alert(htm); 
```

**演示：http:** [//jsfiddle.net/Mf5JC/](http://jsfiddle.net/Mf5JC/)

您的代码的问题是 jQuery 没有按照您的预期修改字符串。您必须通过创建一个 jQuery 元素、操作它（将类添加到子 div）并获取内容来解决这个问题。

您的代码所做的是：

1.  获取 HTML 字符串并将其放入一个新的 jQuery 对象中
2.  查找`<div>`该 HTML 中的任何后代
3.  将类“smurf”添加到匹配的元素
4.  警告原始`htm`HTML 字符串

注意它是如何在新的 jQuery 对象上运行的。创建 jQuery 对象时，它不会保留对原始字符串的一些引用，因此它不会/不能修改它。如果你把逻辑分开，就像我提供的代码一样，你可以实现你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:23:45.623

您正在获取一个字符串，从中构造一个 jQuery 对象（从字符串生成一个 DOM），修改 DOM，然后警告*原始字符串*。

如果要获取修改后的代码，则需要将其序列化回字符串。

```
var htm = '<section><div></div></section>';
var jHtm = $(htm);
jHtm.find('div').addClass('smurf');
// Add to a div so that we can get the innerHTML of that div
var div = jQuery('<div>').append(jHtm);
alert(div.html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:23:49.033

您的方法*应该*有效，但不会影响`htm`变量；您需要将生成的 jQuery 对象添加到 DOM 中：

```
var htm = '<section><div></div></section>';
var $htm = $(htm);
$('div', $htm).addClass('smurf');
$('body').append($htm); 
```

# wpf - 为什么 KeyUp 和 KeyDown 事件变慢？

> ID：15881611
> 
> 赞同：7
> 
> 时间：2013-04-08T14:21:33.630
> 
> 标签：wpf, keyboard-events

我在 WPF 窗口上使用`KeyUp`and`KeyDown`事件。

我在这个窗口的 CompositionTarget_Rendering 事件中也有很多调用，它们创建 UIElement 并为其设置动画。这是由下面的引擎类完成的：

```
int _Fps;
Stopwatch sw = new Stopwatch();

void CompositionTarget_Rendering_Stats(object sender, EventArgs e)
{
    _Fps++;
    var ms = sw.ElapsedMilliseconds;
    sw.Restart();
    engine.Update(ms / 1000f);
    timeFrames.Add(ms);
} 
```

我注意到我拥有的元素越多，获取`KeyUp`和`KeyDown`事件就越慢。

当我在主窗口中有大约 1000 个 UIelements 时，**control_KeyDown 和 control_KeyUp 的代码在我按下或释放一个键后大约半秒执行**。

如果 Window 内的动画也很滞后，这不会让我感到惊讶，但事实并非如此。

*   帧率约为 55 fps
*   动画保持流畅
*   事件中的计算`CompositionTarget_Rendering`持续时间不超过 20 毫秒。

似乎只有键盘事件轮询受到严重条件的影响。

我的问题是：

*   WPF 中键盘处理背后的魔力是什么：为什么它在繁重的条件下变得迟钝，而不是渲染过程？
*   如何处理更好的键盘输入并避免这种情况？

**编辑：**

我写了一个受安迪评论启发的样本。您可以将其复制粘贴到新 WPF 应用程序的主窗口中。它会在按键按下或按下时更改窗口的颜色，并在 CompositionTarget_Rendering 事件中填充尽可能多的文本框。

```
public partial class MainWindow : Window
{
    WrapPanel root2;

    public MainWindow()
    {
        InitializeComponent();
        root2 = new WrapPanel();
        root2.Margin = new Thickness(10);
        this.Content = root2;
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        for (var i = 0; i < 2000; i++)
            root2.Children.Add(new TextBlock() { Background = Brushes.Yellow });

        this.KeyDown += MainWindow_KeyDown;
        this.KeyUp += MainWindow_KeyUp;
        CompositionTarget.Rendering += CompositionTarget_Rendering;
    }

    void MainWindow_KeyUp(object sender, KeyEventArgs e)
    {
        this.Background = Brushes.Red;
    }

    void MainWindow_KeyDown(object sender, KeyEventArgs e)
    {
        this.Background = Brushes.Green;
    }

    void CompositionTarget_Rendering(object sender, EventArgs e)
    {
        foreach (var child in root2.Children)
            ((TextBlock)child).Text = DateTime.Now.Millisecond.ToString();
    }
} 
```

根据您的机器性能，更改 2000 以增加文本框的数量。在一定数量下，CompositionTarget_Rendering 触发器比 KeyUp 或 KeyDown 多。按键时看到边框颜色变化是相当明显的：按键按下，然后多次触发Composition_Rendering，然后触发keydown事件，边框变为红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:00:13.583

为了回答我的第二个问题，我找到了一种替代方法来执行**全局键盘挂钩**：[在 WPF / C# 中使用全局键盘挂钩 (WH_KEYBOARD_LL)](https://stackoverflow.com/questions/1639331/using-global-keyboard-hook-wh-keyboard-ll-in-wpf-c-sharp)

它`Keyup`和`Keydown`事件响应没有延迟，在繁重的 CPU 和图形负载下发生事件。

# javascript - D3.js 流图示例 - 生成正确的面积函数值

> ID：15881613
> 
> 赞同：2
> 
> 时间：2013-04-08T14:21:35.680
> 
> 标签：javascript, d3.js, area, stream-graph

我是 d3js 的新手，并试图从这里[http://bl.ocks.org/mbostock/4060954](http://bl.ocks.org/mbostock/4060954)调整流图示例：

![在此处输入图像描述](https://i.stack.imgur.com/1NIyg.gif)

...使用我自己的数据来跟踪来自不同地方（在线、留言簿、博物馆）的艺术展览的参观者。我已经取得了一些进展，我认为我的数据格式正确，但是我得到了一些非常不稳定的最终 y 值，而我的示例没有显示任何内容。

我的数据以 csv 开头：

```
index,date,venue,num_visitors
0,4/6/2013,online,3844
0,4/6/2013,museum,789
0,4/6/2013,guestbook,20
1,4/7/2013,online,217
1,4/7/2013,museum,718
1,4/7/2013,guestbook,20 
```

然后我嵌套它以按场地（在线、博物馆、留言簿）组织成 3 层/流：

```
layer0 = [
  {
    "key": "online",
    "values": [
      { "x": 0, "y":  3844},
      { "x": 1, "y": 217}
      etc

    ]
  },
  {  
    "key": "museum",
    "values": [
      { "x": 0, "y":  789},
      { "x": 1, "y": 718}
      etc
    ]
  }
]; 
```

生成页面时，y 值始终为 800，svg 路径对象的宽度为 1400 像素，高度为 0。我不确定这是否是我如何将输入域缩放到输出范围的问题，或者是否是面积函数生成 y 值的问题。下面是点值显示的一个生成路径的示例：

```
d="M0,800L17.72151898734177,800L35.44303797468354,800L53.164556962025316,800L70.88607594936708, etc" 
```

这是我的完整页面 - 非常感谢一些指导，因为我觉得我在这里遗漏了一些简单的东西。

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>Streamgraph</title>
<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: 0;
  position: relative;
  width: 1400px;
}

button {
  position: absolute;
  right: 10px;
  top: 10px;
}

</style>
<button onclick="transition()">Update</button>
<script src="d3.js"></script>
<script>

var format = d3.time.format("%m/%d/%Y");

d3.csv("streamdata.csv", function(error, data) {
        data.forEach(function(d) {
            d.date = format.parse(d.date);
            d.y = d.num_visitors;
            d.x = d.index;

        });
        window.data = data;

        drawVisitorStats();
});

function drawVisitorStats(){
    var nest = d3.nest()
           .key(function(d){ return d.venue});
    var n = window.data.length, // number of layers, online, guestbook & museum

        stack = d3.layout.stack().offset("wiggle").offset("zero")
          .values(function(d) { return d.values; }),

        //group data by venue
        layers0 = stack(nest.entries(data)),
        layers1 = stack(nest.entries(data));

    var m = layers0[0].values.length; // number of samples per layer

    var yDomain = d3.max(layers0.concat(layers1), function(layer) { 
        return d3.max(layer, 
            function(d) { 
              return d.y0 + d.y; 
            }); 
    });

    var width = 1400,
        height = 800;

    var x = d3.scale.linear()
    .domain([0, m - 1])
    .range([0, width]);

    var y = d3.scale.linear()
    .domain([0, yDomain])
    .range([height, 0]);

    var color = d3.scale.linear()
        .range(["#ff0c00", "#ffc000"]);

    var area = d3.svg.area()
      .x(
        function(d) { 
          return x(d.x); 
        })
        .y0(function(d) { 
          return y(d.y0); 
        })
        .y1(function(d) { 
          return y(d.y0 + d.y); 
        }); 

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    svg.selectAll("path")
        .data(layers0)
      .enter().append("path")
        .attr("d", function(d) { return area(d.values); })
        .style("fill", function() { return color(Math.random()); });
}
function transition() {
  d3.selectAll("path")
      .data(function() {
        var d = layers1;
        layers1 = layers0;
        return layers0 = d;
      })
    .transition()
      .duration(2500)
      .attr("d", area);
}

</script> 
```

这是数据 csv 文件

```
index,date,venue,num_visitors
0,4/6/2013,online,3844
0,4/6/2013,museum,789
0,4/6/2013,guestbook,20
1,4/7/2013,online,217
1,4/7/2013,museum,718
1,4/7/2013,guestbook,20
2,4/8/2013,online,203
2,4/8/2013,museum,741
2,4/8/2013,guestbook,6
3,4/9/2013,online,1445
3,4/9/2013,museum,874
3,4/9/2013,guestbook,7
4,4/10/2013,online,3098
4,4/10/2013,museum,755
4,4/10/2013,guestbook,3
5,4/11/2013,online,744
5,4/11/2013,museum,368
5,4/11/2013,guestbook,6
6,4/12/2013,online,1342
6,4/12/2013,museum,826
6,4/12/2013,guestbook,17
7,4/13/2013,online,694
7,4/13/2013,museum,826
7,4/13/2013,guestbook,17
8,4/14/2013,online,213
8,4/14/2013,museum,261
8,4/14/2013,guestbook,7
9,4/15/2013,online,3215
9,4/15/2013,museum,776
9,4/15/2013,guestbook,14
10,4/16/2013,online,2663
10,4/16/2013,museum,331
10,4/16/2013,guestbook,12
11,4/17/2013,online,172
11,4/17/2013,museum,633
11,4/17/2013,guestbook,10
12,4/18/2013,online,4516
12,4/18/2013,museum,543
12,4/18/2013,guestbook,5
13,4/19/2013,online,988
13,4/19/2013,museum,792
13,4/19/2013,guestbook,19
14,4/20/2013,online,2556
14,4/20/2013,museum,663
14,4/20/2013,guestbook,0
15,4/21/2013,online,2814
15,4/21/2013,museum,449
15,4/21/2013,guestbook,18
16,4/22/2013,online,596
16,4/22/2013,museum,445
16,4/22/2013,guestbook,15
17,4/23/2013,online,4790
17,4/23/2013,museum,217
17,4/23/2013,guestbook,5
18,4/24/2013,online,733
18,4/24/2013,museum,655
18,4/24/2013,guestbook,12
19,4/25/2013,online,362
19,4/25/2013,museum,321
19,4/25/2013,guestbook,20
20,4/26/2013,online,637
20,4/26/2013,museum,420
20,4/26/2013,guestbook,3
21,4/27/2013,online,2916
21,4/27/2013,museum,910
21,4/27/2013,guestbook,6
22,4/28/2013,online,1097
22,4/28/2013,museum,468
22,4/28/2013,guestbook,0
23,4/29/2013,online,796
23,4/29/2013,museum,687
23,4/29/2013,guestbook,9
24,4/30/2013,online,821
24,4/30/2013,museum,951
24,4/30/2013,guestbook,12
25,5/1/2013,online,2466
25,5/1/2013,museum,810
25,5/1/2013,guestbook,6
26,5/2/2013,online,1005
26,5/2/2013,museum,291
26,5/2/2013,guestbook,19
27,5/3/2013,online,1243
27,5/3/2013,museum,446
27,5/3/2013,guestbook,5
28,5/4/2013,online,4623
28,5/4/2013,museum,538
28,5/4/2013,guestbook,0
29,5/5/2013,online,547
29,5/5/2013,museum,457
29,5/5/2013,guestbook,11
30,5/6/2013,online,4132
30,5/6/2013,museum,407
30,5/6/2013,guestbook,8
31,5/7/2013,online,3083
31,5/7/2013,museum,741
31,5/7/2013,guestbook,9
32,5/8/2013,online,2854
32,5/8/2013,museum,516
32,5/8/2013,guestbook,1
33,5/9/2013,online,2122
33,5/9/2013,museum,932
33,5/9/2013,guestbook,14
34,5/10/2013,online,587
34,5/10/2013,museum,701
34,5/10/2013,guestbook,0
35,5/11/2013,online,698
35,5/11/2013,museum,887
35,5/11/2013,guestbook,18
36,5/12/2013,online,3538
36,5/12/2013,museum,223
36,5/12/2013,guestbook,4
37,5/13/2013,online,2413
37,5/13/2013,museum,799
37,5/13/2013,guestbook,13
38,5/14/2013,online,3581
38,5/14/2013,museum,744
38,5/14/2013,guestbook,7
39,5/15/2013,online,1750
39,5/15/2013,museum,845
39,5/15/2013,guestbook,17
40,5/16/2013,online,3025
40,5/16/2013,museum,630
40,5/16/2013,guestbook,10
41,5/17/2013,online,2038
41,5/17/2013,museum,342
41,5/17/2013,guestbook,7
42,5/18/2013,online,148
42,5/18/2013,museum,447
42,5/18/2013,guestbook,20
43,5/19/2013,online,886
43,5/19/2013,museum,755
43,5/19/2013,guestbook,20
44,5/20/2013,online,1168
44,5/20/2013,museum,305
44,5/20/2013,guestbook,10
45,5/21/2013,online,190
45,5/21/2013,museum,378
45,5/21/2013,guestbook,11
46,5/22/2013,online,1416
46,5/22/2013,museum,276
46,5/22/2013,guestbook,13
47,5/23/2013,online,1753
47,5/23/2013,museum,380
47,5/23/2013,guestbook,7
48,5/24/2013,online,2573
48,5/24/2013,museum,221
48,5/24/2013,guestbook,17
49,5/25/2013,online,2425
49,5/25/2013,museum,610
49,5/25/2013,guestbook,11
50,5/26/2013,online,3359
50,5/26/2013,museum,492
50,5/26/2013,guestbook,1
51,5/27/2013,online,1853
51,5/27/2013,museum,873
51,5/27/2013,guestbook,4
52,5/28/2013,online,4106
52,5/28/2013,museum,543
52,5/28/2013,guestbook,7
53,5/29/2013,online,591
53,5/29/2013,museum,894
53,5/29/2013,guestbook,11
54,5/30/2013,online,2938
54,5/30/2013,museum,565
54,5/30/2013,guestbook,4
55,5/31/2013,online,2237
55,5/31/2013,museum,313
55,5/31/2013,guestbook,4
56,6/1/2013,online,3754
56,6/1/2013,museum,622
56,6/1/2013,guestbook,10
57,6/2/2013,online,1529
57,6/2/2013,museum,309
57,6/2/2013,guestbook,2
58,6/3/2013,online,1482
58,6/3/2013,museum,636
58,6/3/2013,guestbook,8
59,6/4/2013,online,1607
59,6/4/2013,museum,655
59,6/4/2013,guestbook,8
60,6/5/2013,online,364
60,6/5/2013,museum,485
60,6/5/2013,guestbook,0
61,6/6/2013,online,555
61,6/6/2013,museum,219
61,6/6/2013,guestbook,3
62,6/7/2013,online,4209
62,6/7/2013,museum,674
62,6/7/2013,guestbook,18
63,6/8/2013,online,4767
63,6/8/2013,museum,824
63,6/8/2013,guestbook,11
64,6/9/2013,online,4788
64,6/9/2013,museum,877
64,6/9/2013,guestbook,2
65,6/10/2013,online,295
65,6/10/2013,museum,873
65,6/10/2013,guestbook,14
66,6/11/2013,online,2057
66,6/11/2013,museum,559
66,6/11/2013,guestbook,13
67,6/12/2013,online,3199
67,6/12/2013,museum,592
67,6/12/2013,guestbook,15
68,6/13/2013,online,2453
68,6/13/2013,museum,907
68,6/13/2013,guestbook,12
69,6/14/2013,online,3688
69,6/14/2013,museum,267
69,6/14/2013,guestbook,12
70,6/15/2013,online,352
70,6/15/2013,museum,389
70,6/15/2013,guestbook,15
71,6/16/2013,online,1583
71,6/16/2013,museum,304
71,6/16/2013,guestbook,7
72,6/17/2013,online,4202
72,6/17/2013,museum,438
72,6/17/2013,guestbook,3
73,6/18/2013,online,2652
73,6/18/2013,museum,392
73,6/18/2013,guestbook,1
74,6/19/2013,online,3988
74,6/19/2013,museum,764
74,6/19/2013,guestbook,17
75,6/20/2013,online,3025
75,6/20/2013,museum,663
75,6/20/2013,guestbook,18
76,6/21/2013,online,4057
76,6/21/2013,museum,266
76,6/21/2013,guestbook,9
77,6/22/2013,online,4853
77,6/22/2013,museum,614
77,6/22/2013,guestbook,15
78,6/23/2013,online,1334
78,6/23/2013,museum,745
78,6/23/2013,guestbook,6
79,6/24/2013,online,4729
79,6/24/2013,museum,506
79,6/24/2013,guestbook,8 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:08:15.183

在您的`yDomain`定义中，您需要返回每个图层值的最大值，因为每个图层都是一个地图 - 它同时具有一个键和一个值数组，而不仅仅是一个平面数字数组。

```
var yDomain = d3.max(layers0.concat(layers1), function(layer) { 
    return d3.max(layer.values, //Used to be layer
        function(d) { 
          return d.y0 + d.y; 
        }); 
}); 
```

此外，对于您的堆栈定义，您需要删除第二个偏移调用..它否定了“摆动”，因此您将获得一个正常的堆叠图而不是流图。

```
stack = d3.layout.stack().offset("wiggle")  // Used to have .offset("zero") here
      .values(function(d) { return d.values; }) 
```

这是两个都更改的示例：http: [//jsfiddle.net/G6dTy/3/](http://jsfiddle.net/G6dTy/3/)。留言簿的数字很小，与其他两个值相比相形见绌。

看一下[堆积面积图](http://bl.ocks.org/mbostock/3885211)示例可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:46:20.187

谢谢小美！那非常有帮助。我意识到的另一件事是我没有将 x & y 值解析为数字，而是将它们作为字符串读取，并使点计算变得疯狂。因此，当它遍历 CSV 文件的行时，它需要使用 parseInt：

```
data.forEach(function(d) {
        d.date = format.parse(d.date);
        d.y = parseInt(d.num_visitors);
        d.x = parseInt(d.index);

    }); 
```

这是我更新的文件，以防将来有人想以此作为示例。

HTML

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>Streamgraph</title>
<script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: 0;
  position: relative;
  width: 1400px;
  background-color: #053749;
}

button {
  position: absolute;
  right: 10px;
  top: 10px;
}
svg{
  margin-top: 450px;
}

</style>
<script src="d3.js"></script>
<body>
  <div id="layerTitle"></div>
</body>
<script>

var format = d3.time.format("%m/%d/%Y");

d3.csv("streamdata.csv", function(error, data) {
        data.forEach(function(d) {
            d.date = format.parse(d.date);
            d.y = parseInt(d.num_visitors) + 1;
            d.x = parseInt(d.index);

        });
        window.data = data;

        drawVisitorStats();
        //$('path').tooltip('{container:layerTitle}');
        $("path").tooltip({
            'container': 'body',
            'placement': 'bottom'
        });

});

function drawVisitorStats(){
    var nest = d3.nest()
           .key(function(d){ return d.venue});
    var n = window.data.length, // number of layers, online, guestbook & museum

    stack = d3.layout.stack().offset("wiggle")
          .values(function(d) { return d.values; });

    //group data by venue
    layers0 = stack(nest.entries(data));

    var m = layers0[0].values.length; // number of samples per layer

    var allValues = layers0[0].values.concat(layers0[1].values).concat(layers0[2].values);

    var yDomain = d3.max(allValues, function(d) { 
      return d.y0 + d.y; 
    });

    var width = 1400,
        height = 200;

    var x = d3.scale.linear()
      .domain([0, m - 1])
      .range([0, width]);

    var y = d3.scale.linear()
    .domain([1, yDomain])
    .range([height, 0]);

    var color = d3.scale.linear()
        .range(["#053749", "#6bb9d6"]);

    var area = d3.svg.area()
      .x(
        function(d) { 
          return x(d.x); 
        })
        .y0(function(d) {          
          return y(d.y0); 
        })
        .y1(function(d) { 
          return y(d.y0 + d.y); 
        })
        .interpolate("cardinal")
        .tension(0.6); 

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    svg.selectAll("path")
        .data(layers0)
      .enter().append("path")
        .attr("d", function(d) { return area(d.values); })
        .attr("id", function(d) { 
          return d.key;
        })
        .attr("title", function(d) { 
          return "visitors from " + d.key;
        })
        .style("fill", function() { return color(Math.random()); });
}

</script>
</html> 
```

数据文件

```
index,date,venue,num_visitors
0,4/8/2013,online,1721
0,4/8/2013,museum,826
0,4/8/2013,guestbook,333
1,4/9/2013,online,1377
1,4/9/2013,museum,840
1,4/9/2013,guestbook,61
2,4/10/2013,online,1849
2,4/10/2013,museum,539
2,4/10/2013,guestbook,191
3,4/11/2013,online,1205
3,4/11/2013,museum,810
3,4/11/2013,guestbook,65
4,4/12/2013,online,1960
4,4/12/2013,museum,957
4,4/12/2013,guestbook,221
5,4/13/2013,online,1215
5,4/13/2013,museum,658
5,4/13/2013,guestbook,384
6,4/14/2013,online,1565
6,4/14/2013,museum,621
6,4/14/2013,guestbook,94
7,4/15/2013,online,1678
7,4/15/2013,museum,710
7,4/15/2013,guestbook,35
8,4/16/2013,online,1267
8,4/16/2013,museum,964
8,4/16/2013,guestbook,8
9,4/17/2013,online,1781
9,4/17/2013,museum,896
9,4/17/2013,guestbook,238
10,4/18/2013,online,1185
10,4/18/2013,museum,712
10,4/18/2013,guestbook,318
11,4/19/2013,online,1097
11,4/19/2013,museum,753
11,4/19/2013,guestbook,132
12,4/20/2013,online,1053
12,4/20/2013,museum,927
12,4/20/2013,guestbook,399
13,4/21/2013,online,1738
13,4/21/2013,museum,653
13,4/21/2013,guestbook,78
14,4/22/2013,online,1491
14,4/22/2013,museum,568
14,4/22/2013,guestbook,72
15,4/23/2013,online,1403
15,4/23/2013,museum,997
15,4/23/2013,guestbook,184
16,4/24/2013,online,1335
16,4/24/2013,museum,987
16,4/24/2013,guestbook,26
17,4/25/2013,online,1964
17,4/25/2013,museum,753
17,4/25/2013,guestbook,239
18,4/26/2013,online,1260
18,4/26/2013,museum,815
18,4/26/2013,guestbook,249
19,4/27/2013,online,1404
19,4/27/2013,museum,817
19,4/27/2013,guestbook,360
20,4/28/2013,online,1790
20,4/28/2013,museum,840
20,4/28/2013,guestbook,163
21,4/29/2013,online,1698
21,4/29/2013,museum,700
21,4/29/2013,guestbook,129
22,4/30/2013,online,1479
22,4/30/2013,museum,921
22,4/30/2013,guestbook,347
23,5/1/2013,online,1093
23,5/1/2013,museum,720
23,5/1/2013,guestbook,278
24,5/2/2013,online,1148
24,5/2/2013,museum,655
24,5/2/2013,guestbook,162
25,5/3/2013,online,1521
25,5/3/2013,museum,806
25,5/3/2013,guestbook,267
26,5/4/2013,online,1365
26,5/4/2013,museum,662
26,5/4/2013,guestbook,232
27,5/5/2013,online,1809
27,5/5/2013,museum,659
27,5/5/2013,guestbook,398
28,5/6/2013,online,1078
28,5/6/2013,museum,999
28,5/6/2013,guestbook,51
29,5/7/2013,online,1477
29,5/7/2013,museum,512
29,5/7/2013,guestbook,385 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T23:23:38.050

[**请注意，这里**](https://stackoverflow.com/questions/21946257/d3-js-transitions-on-a-streamgraph-using-csv-data)有一个基于相同 CSV 数据但尝试使用转换的后续问题。同样，错误与“区域”有关，但在转换函数内。

# java - 将 .jar 文件集成到 Android 应用程序中

> ID：15881619
> 
> 赞同：0
> 
> 时间：2013-04-08T14:21:57.757
> 
> 标签：java, android, eclipse, jar, integration

我是创建 Android 应用程序的新手，如果这听起来很幼稚，请原谅我。我有一个 .jar 文件和相关的 .java 和 .class 文件。我想做的是创建一个 Android 应用程序（我正在使用 Eclipse）并以某种方式将 .jar 文件与其集成。.jar 文件充当拼写检查器，我想创建一个拼写检查器应用程序，那么我应该怎么做呢？当然，我知道我必须做出改变，但这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:25:24.677

假设 jar 中没有 UI（它只是您想用作库的算法）只需将 jar 放入 /libs 文件夹，确保将其添加到 Eclipse 的项目属性中的项目中，然后您可以参考它像任何其他类集一样在您的项目中。

如果那里确实有 UI，则必须将其删除并重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T16:14:04.133

Android 文档展示了将私有库包含到项目中的最佳方式：**放入 libs 文件夹**。Android IDE 自动检测变化并创造奇迹。 [Android：管理项目](https://developer.android.com/tools/projects/index.html)

但是，您可以添加一个库项目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T14:26:29.897

在 Eclipse 中，如果要将外部库（jar 文件）添加到项目类路径中，则需要将其添加到项目的构建路径中 - 您将在项目属性中找到构建路径选项。

编辑：也将您的 jar 文件放入 libs 文件夹。休息保持有效。

# php - 查找 PHP 中最小的 int

> ID：15881625
> 
> 赞同：-3
> 
> 时间：2013-04-08T14:22:11.010
> 
> 标签：php, min

我有2个整数。我需要知道哪个具有最小值并获得该值。有什么漂亮的方法（一个功能？）吗？现在我这样做：

```
$foo = 5;
$bar = 7;
$min = min($foo, $bar);
if($min == $foo) {
...
}
else {
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:25:19.810

`min()`如果您需要使用较低的值，请使用。

```
$min = min($foo, $bar);
print "min: $min"; 
```

`if`如果您只想进行比较，请使用常规

```
if ($foo <= $bar)
{
    // $foo is smaller/equal
}
else
{
    // $bar is smaller
} 
```

# excel - 从 CSV 文件在 Excel 中生成图表

> ID：15881628
> 
> 赞同：0
> 
> 时间：2013-04-08T14:22:18.007
> 
> 标签：excel, vba, graph

我需要编写一个脚本，该脚本将根据 .csv 文件中两列的数据创建图表。

数据集：

```
Date, Memory Free
Thu Mar 28 12:19:03 ,19252852,
Thu Mar 28 12:19:08 ,19253444,
Thu Mar 28 12:19:13 ,19253492,
Thu Mar 28 12:19:18 ,19253676,
Thu Mar 28 12:19:23 ,19251164,
Thu Mar 28 12:19:28 ,19251568,
Thu Mar 28 12:19:33 ,19251496,
Thu Mar 28 12:19:38 ,19249448,
Thu Mar 28 12:19:43 ,19250472, 

Date, %Idle
Thu Mar 28 12:19:03 ,99.80,
Thu Mar 28 12:19:08 ,99.80,
Thu Mar 28 12:19:13 ,99.80,
Thu Mar 28 12:19:18 ,99.80,
Thu Mar 28 12:19:23 ,99.80,
Thu Mar 28 12:19:28 ,99.80,
Thu Mar 28 12:19:33 ,99.80,
Thu Mar 28 12:19:38 ,99.80,
Thu Mar 28 12:19:43 ,99.80,
Thu Mar 28 12:19:48 ,99.80,
Thu Mar 28 12:19:53 ,99.80,
Thu Mar 28 12:19:58 ,99.80,
Thu Mar 28 12:20:03 ,99.80, 
```

这是我到目前为止所得到的：

```
Sub Macro3()
'
' Macro3 Macro
'
' Keyboard Shortcut: Ctrl+p
'
Columns("A:A").Select
Selection.NumberFormat = "ddd mmm dd hh:mm:ss"
Range("A1:B66677").Select
Range("A2").Activate
ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlXYScatterSmoothNoMarkers
ActiveChart.SetSourceData Source:=Range( _
    "'cwapp2_MemCPU-Date-pIdle'!$A$1:$B$66677")
End Sub 
```

但它没有在 x 轴上显示日期。那么我该如何解决呢？而且，我可以使用 VBA 处理多个文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:23:04.720

我稍微清理了您的代码，并在底部添加了几行来设置日期的刻度标签。这假定基础数据是`Date`Excel 识别的有效值

您在示例中提供的数据是 Excel 不解释为日期的字符串值。如果它实际上以这种方式存储在 CSV 中，请告诉我，我们可以稍微调整一下来解决这个问题。

```
Sub Macro3()
'
' Macro3 Macro
'
' Keyboard Shortcut: Ctrl+p
Dim cht as Chart
Dim tl As TickLabels

ActiveSheet.Columns("A:A").NumberFormat = "ddd mmm dd hh:mm:ss"

Set cht = ActiveSheet.Shapes.AddChart.Chart
cht.ChartType = xlXYScatterSmoothNoMarkers
cht.SetSourceData Source:=Range( _
"'cwapp2_MemCPU-Date-pIdle'!$A$1:$B$66677")

Set tl = cht.Axes(xlCategory).TickLabels

tl.NumberFormat = "ddd mmm dd hh:mm:ss"

End Sub 
```

要转换 A 列中的字符串数据，您可以使用如下内容：

```
Sub ConvertTextToDate()

Dim cl As Range
Dim dt As Date

    For Each cl In Range("A1:A66677")
        dt = Right(cl.Value, Len(cl.Value) - 4)
        cl.Value = dt
        cl.NumberFormat = "ddd mmm dd hh:mm:ss"
    Next
End Sub 
```

# android - 在 QVGA 屏幕上调整图像大小

> ID：15881633
> 
> 赞同：0
> 
> 时间：2013-04-08T14:22:29.790
> 
> 标签：android, android-layout, android-drawable

我有一个带有登录屏幕的应用程序。在那个屏幕上，我有公司的标志。

首先，我制作了一个布局文件夹和一个可绘制文件夹。我测试过，一切正常。

然后我添加了 4 个布局文件夹（普通、大、小和 xlarge）和 4 个可绘制文件夹（hdpi、ldpi、mdpi、xhdpi）。我刚刚将我的 logo.png 和 main_layout.xml 复制到每个文件夹（这是错误的，但只是为了测试）。当然，当我在每个不同的屏幕尺寸模拟器上测试应用程序时，它会显示徽标图像位置错误或变形（有时更大或更小，有时位置不好，等等）。没错，因为我没有创建不同的 png 文件，也没有针对不同的尺寸调整布局。

因此，下一步是与设计区域交谈并要求每个密度的 4 个 png 文件并检查“4 个布局”。

一旦我修复了 4 个 png 文件和布局，我使用 4 个模拟器再次测试了应用程序（一个用于普通屏幕，另一个用于大屏幕，另一个用于超大屏幕，一个用于小屏幕）。仍然不能像我想要的那样工作。

在某些情况下，logo.png 它显示的比我想要的更大。在其他方面它显示得更小。我不明白我必须做什么。我使用 wrap_content，我创建了 4 个可绘制文件夹（hdpi、ldpi、mdpi、xhdpi），我有 4 个不同大小的 logo.png 文件。

但是当我在 QVGA Emulator 上看到图像时（例如），它会显示一个巨大的图像。

如果不同的布局是针对屏幕尺寸的，而不同的 pngs 是针对不同的密度，我必须做什么才能使用小或大的图像（png）？

感谢并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:36:38.937

这种类型的问题通常是非常具体的。

但一般的做法是只有一个布局。此布局中的任何尺寸值都放在 /values/ 文件夹内的 dimens.xml 文件中。创建 4 个 .png（ldpi、mdpi、hdpi、xhdpi）并确保它们的比例正确！（仔细检查 Android 开发者网站以查看正确的比例。

并且在您使用此设置进行测试后，**如果**有一些不对齐的内容，您将为该屏幕尺寸（小、大等）创建一个dimens.xml，并且只添加您实际想要更改的尺寸。

测试前不要添加所有尺寸或所有布局。从基本开始并根据需要添加更多资源通常更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:52:51.433

我遇到了类似的问题，可能对您有帮助，也可能对您没有帮助。我试图读取某个大小的 mjpeg 流，但它从来没有完全适合我调整它的窗口。问题归结为许多设备的像素密度与操作系统报告的不完全相同。例如，操作系统可能报告 mdpi 为 160 dpi，但设备的实际 dpi 为 164。因此，如果您希望使用 1 个非常大的 *.png 并在运行时调整它的大小，请不要使用“标准”缩放因素（即 1、2、4 等），而是使用

```
float factor = getResources().getDisplayMetrics().density;

//To get width/height of the View 
int width = view.getWidth(); //a fixed width would be preferred over this
int realwidth = (int) Math.round(width/factor); 
```

请注意，调整大小是自动完成的，但有时如果让操作系统处理它，您不会得到想要的结果。

这并不完全是您所要求的，但如果您决定走只有一个可绘制的路线，这有望避免一些头痛。

# php - 从 php 生成的 vcard 文件不被接受为有效

> ID：15881634
> 
> 赞同：0
> 
> 时间：2013-04-08T14:22:30.903
> 
> 标签：php, vcf-vcard

raI 设置脚本以从 wordpress 自定义帖子中的信息生成 vcard 文件。它似乎有效，但结果文件不被 mac 上的“联系人”接受为有效文件。

这是文件内容：

```
BEGIN:VCARD
VERSION:3.0
N:Hans H;Hansen
PREFIX:Mr
FN:Hans H. Hansen
ORG:Chemical Tankers
TITLE:Managing Director
PHOTO;VALUE=URL;TYPE=jpg:http://test.test.org/wp-content/uploads/sites/2/2013/04/jan_johansen.jpg
TEL;TYPE=WORK,VOICE:+47 55 55 55 55
TEL;TYPE=HOME,VOICE:
TEL;TYPE=CELL,VOICE:+47 99 99 99 99
ADR;TYPE=WORK:;;Weravg 5, Os;Stavanger;P.O.Box 1225, Os;Norway
LABEL;TYPE=WORK:Weravg 5, Os, Stavanger Stavanger\r\nNorway
EMAIL;TYPE=PREF,INTERNET:joar.hansen@sdomain.no
REV:20130408T195243Z\r\n 
END:VCARD 
```

我什至想包括这两行，但我不确定“邮政”类型的地址，所以我会在剩下的没问题后尝试：

```
ADR;TYPE=POSTAL:;;Weraveg 5, Os;Stavanger;P.O.Box 1225, Os;Norway
LABEL;TYPE=WORK:Weraveg 5, Os, Stavanger Stavanger\r\nNorway 
```

我的错误在哪里？

# c# - 将对象转换为相同类型以及对性能的影响

> ID：15881639
> 
> 赞同：3
> 
> 时间：2013-04-08T14:22:52.777
> 
> 标签：c#, performance, casting

关于将对象转换为相同类型的性能的问题（我知道一开始听起来很奇怪，但让我把它放在上下文中）

```
public T Get<T>(string key) where T : class
{
     var objToReturn = (T)_cache[key];
     if (objToReturn != null)
     {
         return objToReturn;
     }
     return null;
} 
```

上面是一段代码，用于尝试从调用者强类型化的类型中`T`获取类型对象。`CacheObject`

知道看到对象的类型是强类型的，我想知道这一行：

```
var objToReturn = (T)_chache[key]; 
```

这实际上会调用强制转换并将缓存中的实例转换为另一个实例并返回该实例，还是会发现类型与简单忽略的强制转换相同。

我要求强制转换的能力在以后开发该缓存用于获取派生类型的应用程序时很有用，但我不想在早期产生潜在的主要性能影响。

想法和谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:25:05.570

您展示的演员表是“自然”参考类型演员表。它不会改变对象的任何内容 - 它只是确保对象是适当的类型（您要转换为的类型或子类）。如果对象的类型错误，则会引发异常。不会创建额外的对象或类似的东西。

它当然不是免费的——但这很少会成为性能瓶颈。

目前尚不清楚为什么你有这个代码：

```
if (objToReturn != null)
{
    return objToReturn;
}
return null; 
```

为什么不直接使用：

```
return objToReturn; 
```

? 这将表现完全相同。然后您的整个方法可以简化为：

```
public T Get<T>(string key) where T : class
{
    return (T) _cache[key];
} 
```

编辑：请注意，您不应该*只*使用`as`，除非您真的希望错误类型的值以`null`. 例如：

```
cache[key] = new object();
string x = cache[key] as string; // x is null
string y = (string) cache[key]; // Exception 
```

# c++ - 可以从其他类调用的 C++ 多实例结构

> ID：15881640
> 
> 赞同：1
> 
> 时间：2013-04-08T14:22:55.043
> 
> 标签：c++, struct, extern

我想制作多个结构，具有不同的设置......！它们都持有相同的变量（相同的名称等）！但是不同的实现！而且这个设置应该可以从另一个班级访问......这是最好的方法吗？还是我做错了什么？

**啊：**

```
class A
{
};

struct Color{
   unsigned char r;
   unsigned char g;
   unsigned char b;
};

extern struct Settings settings; 
```

**A.cpp**

```
struct settings{
   Color firstcolor = {0,0,0}; //error: data member initializer is not allowed
   Color secondcolor = {255,255,255}; //error: data member initializer is not allowed
};
struct anothersettings{
   Color firstcolor = {255,255,255}; //error: data member initializer is not allowed
   Color secondcolor = {0,0,0}; //error: data member initializer is not allowed
}; 
```

**B.cpp**

```
#include "A.h"
dosomethingwith(settings); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:28:30.533

似乎您在`struct`类型和该类型的对象之间感到困惑。a 的全部意义`struct`在于它描述了该类型对象的外观。如果您要创建两个`struct`具有完全相同成员的 s（就像您使用`settings`and所做的那样`anothersettings`），您可能会犯一个大错误。相反，您应该拥有一个`struct`然后是多个该类型的对象。

你最好有一个`struct Settings`像这样的单曲：

```
struct Settings {
  Color firstcolor;
  Color secondcolor;
}; 
```

然后您可以创建这种类型的对象，并根据需要设置颜色：

```
Settings settings1;
settings1.firstcolor.r = 0;
settings1.firstcolor.g = 0;
// And so on...

Settings settings2;
settings2.firstcolor.r = 255;
settings2.firstcolor.g = 255;
// And so on... 
```

事实上，使用聚合初始化有一个更好的方法来编写它：

```
Settings settings1 = {{0, 0, 0}, {255, 255, 255}};
Settings settings2 = {{255, 255, 255}, {0, 0, 0}}; 
```

然后你可以有一个带`Settings`参数的函数：

```
void soSomething(Settings); 
```

然后你可以这样调用：

```
doSomething(settings1);
// or
doSomething(settings2); 
```

# javascript - 生成多个 jquery-UI 对话框

> ID：15881646
> 
> 赞同：0
> 
> 时间：2013-04-08T14:23:16.573
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我已将我的 jquery 对话框内容放在一个 div 中。但是每当我以这种方式初始化对话框时：

```
$(".uof_add_form").dialog({
  autoOpen : false,
  height : 500,
  width : 600,
  modal : true,
  buttons : {
   "Done" : function() {
    $(this).close();
  }
  }
}); 
```

内容从我的 div 中删除。因此我不能使用

```
$("#new_form").on("click",".add_level", function(){
        var wrapper_data = $(this).parent().parent().parent().parent();
        wrapper_data.find(".uof_add_form").dialog("open");

}); 
```

打开我的对话框。

由于我的内容是动态生成的，因此我需要使用`$(this)`.

有什么方法可以让我的内容留在我的 div 中？

`display:none`我更改了我的代码以通过这种方式在我的 div上进行的单击本身进行初始化：-

```
$("#new_form").on("click",".add_level", function(){
    var wrapper_data = $(this).parent().parent().parent().parent();
    wrapper_data.find(".add_level_pop").dialog({autoOpen : true, height : 500,width : 600,modal : true, buttons : {   "Done" : function() {  $(this).dialog('close'); } } });

}); 
```

对话框在第一次单击时打开，但在第二次单击时对话框不会被触发，因为**内容已在对话框初始化时转移到不同的位置。**

我还在**jsfiddle**上添加了一个示例，请[在此处查看](http://jsfiddle.net/sachinprasad/2Pv3q/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:04:56.810

虽然我不确定我是否理解您最初的问题，但通过查看小提琴中的代码，您可能需要考虑：

*   当你已经有一个时，在你的选择器中省略类限定符`ID`，它会粘在对话框元素上，所以你总是可以`<div>`在`DOM`（[小提琴v3](http://jsfiddle.net/2Pv3q/3/)）中找到你的
*   在加载时将其保存`<div>`到变量中，这样您就可以在不查询 DOM 的情况下访问它（[小提琴 v4](http://jsfiddle.net/2Pv3q/4)）

在您的小提琴的两个更新版本中，对话框会在第二次单击时打开，如果这是您正在寻找的。希望能帮助到你。

* * *

当您尝试解决更通用的情况时，我已在[另一个小提琴版本](http://jsfiddle.net/2Pv3q/7/)中相应地更新了您的示例。[`.data()`](http://api.jquery.com/data/)对话框 div 使用该函数保存在按钮上。要打开对话框，使用保存的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:26:37.470

使用的返回值`.dialog()`作为句柄：

```
var handle = $(".uof_add_form").dialog({
 [...]
}); 
```

然后在某个时候，

```
handle.dialog("open"); 
```

# c# - 如何生成 5 秒后过期的随机 6 位数字？

> ID：15881648
> 
> 赞同：0
> 
> 时间：2013-04-08T14:23:23.473
> 
> 标签：c#

我得到了一个逻辑，它生成一个 6 位数字，该数字在 5 秒内保持不变。这是代码。问题是下面的例程按顺序生成数字，我不想要我想要动态的，任何用户都无法猜测下一个数字是什么。

```
public static int GetTimestamp()
{
    // 10m ticks in a second, so 50m in 5 seconds
    const int ticksIn5Seconds = 50000000;
    return (int)((DateTime.Now.Ticks / ticksIn5Seconds) % 1000000);
} 
```

这是另一个在 C# 中生成唯一 8 位数字的代码。

```
public string Get8Digits()
 {
   var bytes = new byte[4];
   var rng = RandomNumberGenerator.Create();
   rng.GetBytes(bytes);
   uint random = BitConverter.ToUInt32(bytes, 0) % 100000000;
   return String.Format("{0:D8}", random);
 } 
```

我尝试结合这两种逻辑来生成随机的 6 位数字，可能无法猜到下一个 6 位数字会生成什么。寻求指导我应该怎么做才能实现我的目标。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:35:56.937

基于您自己的`Get8Digits`方法的一种可能的解决方案...

```
 private static DateTime _expiry = DateTime.MinValue;
    private static string _current = "0";

    public string CurrentNumber()
    {
        if (_expiry < DateTime.Now)
        {
            _expiry = DateTime.Now.AddSeconds(5);
            _current = Get8Digits();
        }

        return _current;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:26:36.043

您可以使用时间模 5 秒（实际上是时间 - 时间 % 5s）为伪随机生成器播种。它会起作用，但它不是获得好的不可预测数字的最佳方法。

用代码编辑：

```
Random random = new Random(DateTime.Now.Ticks - (DateTime.Now.Ticks % 50000000)); 
```

Edit2 有更多代码：

```
int random5 = random.Next(100000, 999999) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:30:27.553

```
private static Stopwatch age; // init me
private static int lastRandom = 0;
public static int GetTimestamp()
{
  if (age.Elapsed.TotalSeconds>5 ||lastRandom==0){
     lastRandom = Guid.NewGuid().GetHash(); // stronger random than Random
     age.Reset();
  }
  return lastRandom % 100000; // limit the digits to 6, assuming leading 0s
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T14:28:15.020

我理解你的问题是你想生成一个随机数生成器，它将每 5 秒生成一个不同的随机数。

```
public int GetRandomValue() 
{
    // Seed the RNG with an integer that changes every 5 seconds.
    Random rnd = new Random((int)(DateTime.Now.Ticks / ticksIn5Seconds));
    // Generate a 6 digit random number.
    return rnd.Next(100000, 999999); 
} 
```

# javascript - 如何定义一个“常量”并在 NodeJS 中随处访问它

> ID：15881665
> 
> 赞同：1
> 
> 时间：2013-04-08T14:24:02.280
> 
> 标签：javascript, node.js, express, ejs

我对 node.js 有点摆弄，在我的（所谓的）项目中，我偶然发现了一个问题，虽然不是完全威慑，但让我很恼火。

我每天都使用 PHP 框架 CodeIgniter，CodeIgniter 拥有的东西（可能任何其他 PHP 框架也有）是一种定义一次**BASE URL**然后可以在任何地方访问（库、控制器、模型、视图......）具有简单的功能。很标准的东西。

现在，在 Express 中，我找不到同样的方法。我浏览了人们提出类似问题的关于 SO 的问题，通常答案是`res.locals`or `app.locals`，这是行不通的。我使用 Express 3.1.1 和**ejs-locals**作为模板引擎。我知道我可以定义一个全局变量，然后将其传递给渲染函数，但我想知道是否有一种方法（有效）可以在任何地方访问它。我相信问题可能出在模板引擎上，但是，最好有第二个意见。

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-12T14:07:49.220

在 app.js 中改变这个

```
 var myVar = "only in file"; 
```

有了这个（没有“var”）

```
 myVar = "everywhere"; 
```

如果您这样做以防万一，那就更好了。

# jquery - 在 iframe 中运行 javascript 以显示警报

> ID：15881668
> 
> 赞同：0
> 
> 时间：2013-04-08T14:24:28.583
> 
> 标签：jquery, asp.net

我在 ASP.Net 页面上的 iFrame 中托管 PDF，并希望设置警报以在活动时间间隔后关闭。因为我无法在 iFrame 中捕获任何事件，所以我无法检查鼠标移动、滚动、点击或任何我可以用来检测用户是否处于活动状态的东西。（闲置 20 分钟后，我想显示警报）

我需要的是一种在 iFrame 中运行 javascript 或编写一些可以检测 iFrame 中事件的 jquery 的方法。非常感谢任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:37:12.383

难道你不能在 iframe 指向的 html 文件中加载 jQuery 吗？您应该能够在 iFrame html 中正常使用 jQuery 吗？

# java - Solr 接口

> ID：15881670
> 
> 赞同：0
> 
> 时间：2013-04-08T14:24:33.547
> 
> 标签：java, .net, apache, interface, solr

是否有任何其他接口，我可以使用它来索引数据，如 HTTP？

我有大量的文件要索引，这需要很多时间。

我可以编写 POST 客户端，但我不想使用 HTTP 向 Solr 提供数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:57:58.853

当然有很多接口可以索引数据。您可能会开始阅读[Wiki](http://wiki.apache.org/solr/DataImportHandler)或[参考手册](http://docs.lucidworks.com/display/solr/Uploading+Structured+Data+Store+Data+with+the+Data+Import+Handler)中的“数据导入处理程序”主题。

# grails - Grails 启动过程

> ID：15881676
> 
> 赞同：4
> 
> 时间：2013-04-08T14:24:54.897
> 
> 标签：grails

是否有任何描述 grails 如何初始化的文档？

当您执行以下操作时会发生什么`grails run-app`：启动 servlet 容器、启动插件、属性、映射域对象和资源的过程 [和开发人员挂钩] 以控制器初始化和服务请求结束？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:52:15.883

我认为[这篇博文](https://justlearningdotcom.wordpress.com/2012/12/02/grails-bootstrap-under-the-hood/comment-page-1/)可以帮助你。

# jquery - 来自成功的 Web api 调用的 Jquery Mobile Ajax 错误（返回 200）

> ID：15881677
> 
> 赞同：0
> 
> 时间：2013-04-08T14:24:57.303
> 
> 标签：jquery, jquery-mobile

我收到一个 ajax 错误，它在“errorThrown”中不包含任何详细信息，但是看着提琴手我可以看到对服务器的 API 调用和带有 Json 对象的 200 响应。除了 Ajax 错误之外，一切都运行得很完美。服务器获取正确的数据并返回 200。

这是服务器端代码

```
 public JObject Post(JObject jobj)
    {
        var rtn = JsonServer.StaticJsonSrv.Post(jobj);
        //force return type to Json.. trying to fix JQM problem...
        JObject obj = new JObject();
        obj.Add("success", "true" );
        return obj;
    } 
```

这是客户端代码

```
 $.ajax({
      type: 'POST',
      url: URL,
      dataType: 'json',
      data: data,
       success: function()
        {  
           alert("Status: success"); 
        },
       error: function(XMLHttpRequest, textStatus, errorThrown) { 
            //alert("Status: " + textStatus); 
            alert("Errors: " + errorThrown); 
        }  

    }); 
```

这是服务器的结果

```
 HTTP/1.1 200 OK
        Content-Length: 18
        Content-Type: application/json; charset=utf-8
        Server: Microsoft-HTTPAPI/2.0
        Date: Mon, 08 Apr 2013 14:13:41 GMT

        {"success":"true"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:52:02.450

我在 IE 中运行它，但没有出现传输错误。搜索给了我一个解决方案，来自[IE 中的 'No Transport' Error w/jQuery ajax call](https://stackoverflow.com/questions/9160123/no-transport-error-w-jquery-ajax-call-in-ie)

```
 $.support.cors = true; 
```

# javascript - 骨干：视图不更新（重置事件）

> ID：15881678
> 
> 赞同：0
> 
> 时间：2013-04-08T14:25:01.170
> 
> 标签：javascript, events, backbone.js, view

我目前正在使用 BackboneJS 通过主干模型从我的数据库中获取数据。

问题是我的应用程序没有触发我的重置事件，即使我的获取执行得很好，我的数据也没有显示在屏幕上。如果我在控制台中执行 app.messages.toJSON()，我的数据会按要求返回。

你有什么想法吗？这是我的代码

```
var app = window.app = {};

// APP HERE

// Model

app.Message = Backbone.Model.extend({
    url : 'messages'
});

app.message = new app.Message;

// Collection

app.Messages = Backbone.Collection.extend({
    model : app.Message,
    url : 'messages'
});

// Views

app.messages = new app.Message(); 
app.messages.fetch();

app.ListView = Backbone.View.extend({
    template : Handlebars.compile($('#template-list').html()),

    initialize : function(){
        _.bindAll(this, 'render');
        //this.collection.on('reset', this.render); 
    },

    render : function(){
        this.$el.html(this.template({
            collection : this.collection.toJSON()
        }));
        return this;
    }

}); 
```

我要咬牙切齿了。

西蒙

编辑

毕竟这些代码我有

```
app.Router = Backbone.Router.extend({
    routes: {
        '*path' : 'home'
    },
    home: function(){
        this.views = {};
        this.views.list = new app.ListView({
            collection : app.messages
        });
        $('#list-shell').empty().append(this.views.list.render().el);
    }
});

app.router = new app.Router();
Backbone.history.start({pushState : true});
Backbone.emulateJSON = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:41:30.567

`app.messages = new app.Message();` I guess this is only a mistake you made while writing the question.

As for the question itself, if you're using Backbone 1.0, you'll have to use the `reset flag` if you want a `reset event` fired.
Furthermore, if the piece of code you added really is **after** the first one, you're fetching your data **before** creating the Router, therefore the view. Even if the fetching method is asynchronous, you're not controlling what you're doing here.

# c - 源引擎风格的绳索渲染

> ID：15881684
> 
> 赞同：6
> 
> 时间：2013-04-08T14:25:19.747
> 
> 标签：c, matrix, 3d, opengl-es-2.0

我正在创建一个 3D 图形引擎，其中一个要求是绳索的行为类似于 Valve 的源引擎。

所以在源引擎中，一段绳索是一个四边形，它沿着它的方向轴旋转以面对相机，所以如果绳索段在 +Z 方向上，它将沿着 Z 轴旋转，所以它的面朝向相机的中心位置。

目前，我已经定义了绳索的部分，所以我可以有一个很好的弯曲绳索，但现在我正在尝试构建一个矩阵，它将沿着它的方向向量旋转它。

我已经有一个基于这种广告牌技术渲染广告牌精灵的矩阵： [构建广告牌矩阵](http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/) 目前我一直在尝试对其进行重组，以使右、上、前向量与绳索段的方向向量相匹配。

我的绳子是由多个部分组成的，每个部分是一个由两个三角形组成的矩形，正如我上面所说的，我可以将位置和部分完美地获得，正是面对相机的旋转给我带来了很多问题。

这是在 OpenGL ES2 中并用 C 编写的。

我在 Model_beam.cpp 中研究了 Doom 3 的光束渲染代码，那里使用的方法是基于法线而不是使用矩阵来计算偏移量，所以我在我的 C 代码中创建了一个类似的技术，它有点工作，至少它，我现在需要的就可以了。

因此，对于那些也想弄清楚这一点的人，使用绳索中点与相机位置的叉积，对其进行归一化，然后将其乘以您希望绳索的宽度，然后在构建时顶点，在结果向量的 + 或 - 方向上偏移每个顶点。

尽管这并不完美，但进一步的帮助会很棒！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T23:21:14.330

[在 OpenGL 的广告牌上](https://stackoverflow.com/questions/512326/getting-sprites-to-face-the-camera-properly-in-opengles)查看这个相关的 stackoverflow 帖子 它引用了一个很不错的[lighthouse3d教程。](http://www.lighthouse3d.com/opengl/billboarding/index.php3?billCyl)以下是该技术的要点：

```
void billboardCylindricalBegin(
                float camX, float camY, float camZ,
                float objPosX, float objPosY, float objPosZ) {

        float lookAt[3],objToCamProj[3],upAux[3];
        float modelview[16],angleCosine;

        glPushMatrix();

    // objToCamProj is the vector in world coordinates from the 
    // local origin to the camera projected in the XZ plane
        objToCamProj[0] = camX - objPosX ;
        objToCamProj[1] = 0;
        objToCamProj[2] = camZ - objPosZ ;

    // This is the original lookAt vector for the object 
    // in world coordinates
        lookAt[0] = 0;
        lookAt[1] = 0;
        lookAt[2] = 1;

    // normalize both vectors to get the cosine directly afterwards
        mathsNormalize(objToCamProj);

    // easy fix to determine wether the angle is negative or positive
    // for positive angles upAux will be a vector pointing in the 
    // positive y direction, otherwise upAux will point downwards
    // effectively reversing the rotation.

        mathsCrossProduct(upAux,lookAt,objToCamProj);

    // compute the angle
        angleCosine = mathsInnerProduct(lookAt,objToCamProj);

    // perform the rotation. The if statement is used for stability reasons
    // if the lookAt and objToCamProj vectors are too close together then 
    // |angleCosine| could be bigger than 1 due to lack of precision
       if ((angleCosine < 0.99990) && (angleCosine > -0.9999))
          glRotatef(acos(angleCosine)*180/3.14,upAux[0], upAux[1], upAux[2]);   
    } 
```

# installation - Inno 设置 - 无压缩

> ID：15881687
> 
> 赞同：0
> 
> 时间：2013-04-08T14:25:24.883
> 
> 标签：installation, inno-setup

是否可以在没有压缩的情况下生成具有 inno 设置的构建？

默认情况下，它会生成 setup.exe 文件，其中所有文件都打包在 exe 中

我想要一个包含我的文件列表和 setup.exe 的文件夹，它将获取这些文件并为用户安装在 Program Files 上

（我只想为每个下载我的程序的用户更改几个文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:16:41.067

@TLama - 感谢**外部**标志对我有用

解决方案：

```
Source: "{src}/somefile-or-folder"; DestDir: "{app}"; Flags: external 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:27:17.727

`Compression`您可以使用以下指令禁用设置中的所有压缩：

```
[Setup]
Compression = none 
```

您还可以为单个文件关闭此功能，允许您的下载器使用`nocompression`和`dontverifychecksum`标志更改它们。

如果您真的想将文件与安装程序包分开，那么您可以使用`external`标志并使用`{src}`常量，但是用户需要单独下载每个文件，或者您将它们压缩。

# c# - ref 参数和赋值在同一行

> ID：15881689
> 
> 赞同：11
> 
> 时间：2013-04-08T14:25:27.723
> 
> 标签：c#, .net, ref-parameters

我最近遇到了一个讨厌的错误，简化的代码如下所示：

```
int x = 0;
x += Increment(ref x); 
```

...

```
private int Increment(ref int parameter) {
    parameter += 1;
    return 1;
} 
```

Increment 调用后 x 的值为 1！一旦我发现发生了什么，这很容易解决。我将返回值分配给一个临时变量，然后更新 x. 我想知道是什么解释了这个问题。它是规范中的内容还是我忽略的 C# 的某些方面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:36:49.263

+= 读取左边的参数，然后读取右边的参数，所以它读取变量，执行递增的方法，对结果求和，然后分配给变量。在这种情况下，它读取 0，计算 1 并带有将变量更改为 1 的副作用，求和为 1，并为变量分配 1。IL 确认了这一点，因为它按顺序显示了加载、调用、添加和存储。

将返回值更改为 2 以查看结果是 2 确认该方法的返回值是“粘住”的部分。

既然有人问，这是通过 LINQPad 的完整 IL 及其注释：

```
IL_0000:  ldc.i4.0
IL_0001:  stloc.0     // x
IL_0002:  ldloc.0     // x
IL_0003:  ldloca.s    00 // x
IL_0005:  call        UserQuery.Increment
IL_000A:  add
IL_000B:  stloc.0     // x
IL_000C:  ldloc.0     // x
IL_000D:  call        LINQPad.Extensions.Dump

Increment:
IL_0000:  ldarg.0
IL_0001:  dup
IL_0002:  ldind.i4
IL_0003:  ldc.i4.1
IL_0004:  add
IL_0005:  stind.i4
IL_0006:  ldc.i4.2
IL_0007:  ret 
```

请注意，在 IL_000A 行，堆栈包含 x 的加载（加载时为 0）和 Increment 的返回值（为 2）。然后它运行`add`并且`stloc.0`不进一步检查 x 的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T14:55:52.343

这：

```
static void Main()
{
    int x = 0;
    x += Increment(ref x);
    Console.WriteLine(x);
} 
```

编译为此：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 2
    .locals init (
        [0] int32 x)
    L_0000: nop 
    L_0001: ldc.i4.0 
    L_0002: stloc.0 
    L_0003: ldloc.0 
    L_0004: ldloca.s x
    L_0006: call int32 Demo.Program::Increment(int32&)
    L_000b: add 
    L_000c: stloc.0 
    L_000d: ldloc.0 
    L_000e: call void [mscorlib]System.Console::WriteLine(int32)
    L_0013: nop 
    L_0014: ret 
} 
```

编译器`ldloca.s x`用于将当前值`x`放入本地寄存器，然后调用`Increment()`并使用`add`将返回值添加到寄存器中。这导致使用`x`调用之前的 from值`Increment()`。

实际 C# 语言规范的相关部分是这样的：

> 通过应用二元运算符重载决议（第 7.3.4 节）来处理 x op= y 形式的操作，就好像该操作写成 x op y。然后，
> 
> 如果所选运算符的返回类型可隐式转换为 x 的类型，则该操作将计算为 x = x op y，但 x 仅计算一次。

意思就是：

```
x += Increment(ref x); 
```

将被改写为：

```
x = x + Increment(ref x); 
```

由于这将从左到右进行评估，因此将捕获并使用 的*旧*值，`x`而不是调用更改的值`Increment()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:23:30.317

C# 规范说明了复合运算符：(7.17.2)

> 运算被评估为`x = x op y`，除了 x 只被评估一次。

因此 x 被评估（为 0），然后由方法的结果递增。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T04:47:09.610

其他答案暗示了这一点，我赞同 C++ 的建议，将其视为“一件坏事”，但“简单”的解决方法是：

```
int x = 0;
x = Increment(ref x) + x; 
```

因为 C# 确保从左到右评估表达式*，所以这符合您的预期。

*引用 C# 规范的“7.3 运算符”部分：

> 表达式中的操作数从左到右计算。例如，在 中`F(i) + G(i++) * H(i)`，`F`使用 的旧值调用`i`方法，然后使用 的旧值`G`调用方法`i`，最后`H`使用 的新值调用方法`i`。这与运算符优先级分开且无关。

请注意，最后一句话的意思是：

```
int i=0, j=0;
Console.WriteLine(++j * (++j + ++j) != (++i + ++i) * ++i);
i = 0; j = 0;
Console.WriteLine($"{++j * (++j + ++j)} != {(++i + ++i) * ++i}");
i = 0; j = 0;
Console.WriteLine($"{++j} * ({++j} + {++j}) != ({++i} + {++i}) * {++i}"); 
```

输出这个：

> 真
> 5 != 9
> 1 * (2 + 3) != (1 + 2) * 3

最后一行可以“信任”为与前两个表达式中使用的值相同的值。IE 即使在乘法之前执行加法，由于括号，操作数已经被计算。

请注意，将其“重构”为：

```
i = 0; j = 0;
Console.WriteLine(++j * TwoIncSum(ref j) !=  TwoIncSum(ref i) * ++i);
i = 0; j = 0;
Console.WriteLine($"{++j * TwoIncSum(ref j)} != { TwoIncSum(ref i) * ++i}");
i = 0; j = 0;
Console.WriteLine($"{++j} * {TwoIncSum(ref j)} != {TwoIncSum(ref i)} * {++i}");

private int TwoIncSum(ref int parameter)
{
    return ++parameter + ++parameter;
} 
```

仍然完全一样：

> 真
> 5 != 9
> 1 * 5 != 3 * 3

但我仍然宁愿不依赖它:-)

# javascript - 单个页面上的两个样式的 Google 地图

> ID：15881693
> 
> 赞同：0
> 
> 时间：2013-04-08T14:25:40.303
> 
> 标签：javascript, google-maps, google-maps-api-3

我很感激在一个页面上设置两个谷歌地图（API 3）的帮助。他们有一些共同的风格。我可以运行一个，但不能同时运行两个。

*   [http://theredfrog.com/new/temp3.html](http://theredfrog.com/new/temp3.html) - 一张地图（好的）
*   [http://theredfrog.com/new/temp4.html](http://theredfrog.com/new/temp4.html) - 两张地图（破损）

这是脚本...

```
<script type="text/javascript">
      function initialize() {
var styles = [
  ....

];

var hulloptions = {
    mapTypeControlOptions: {
        mapTypeIds: [ 'Styled']
    },

    center: new google.maps.LatLng(53.7413176, -0.3353987),
    zoom: 15,
    mapTypeId: 'StyledHull'
};

var leedsoptions = {
    mapTypeControlOptions: {
        mapTypeIds: [ 'Styled']
    },

    center: new google.maps.LatLng(53.796177,-1.541862),
    zoom: 15,
    mapTypeId: 'StyledLeeds'
};

maphull = new google.maps.Map(document.getElementById("map-hull"),hulloptions);
mapleeds = new google.maps.Map(document.getElementById("map-leeds"),leedsoptions);

var image = './skin/logo.png';
var HullLatLng = new google.maps.LatLng(53.7413176, -0.3353987);
var LeedsLatLng = new google.maps.LatLng(53.796177,-1.541862);

var rfdMarkerHull = new google.maps.Marker({
      position: HullLatLng,
      map: maphull,
      icon: image
  });
  var rfdMarkerLeeds = new google.maps.Marker({
      position: LeedsLatLng,
      map: leedshull,
      icon: image
  });

var styledMapTypeHull = new google.maps.StyledMapTypeHull(styles, { name: 'RFD Hull' });
var styledMapTypeLeeds = new google.maps.StyledMapTypeLeeds(styles, { name: 'RFD Leeds' });
maphull.mapTypes.set('StyledHull', styledMapTypeHull);
mapleeds.mapTypes.set('StyledLeeds', styledMapTypeLeeds);
}

google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:24:33.953

这两行看起来不正确：

```
var styledMapTypeHull = new google.maps.StyledMapTypeHull(styles, { name: 'RFD Hull' });
var styledMapTypeLeeds = new google.maps.StyledMapTypeLeeds(styles, { name: 'RFD Leeds' }); 
```

您不会在 JavaScript 控制台中收到错误消息吗？

我想你的意思是：

```
var styledMapTypeHull = new google.maps.StyledMapType( styles, {
    name: 'RFD Hull'
});
var styledMapTypeLeeds = new google.maps.StyledMapType( styles, {
    name: 'RFD Leeds'
}); 
```

（也为较短的行重新格式化）

这是[更多信息和一个工作示例](https://developers.google.com/maps/documentation/javascript/styling#creating_a_styledmaptype)。

现在，我在 Chrome 中打开开发者工具的情况下尝试了您的第二张地图，我发现还有其他错误，甚至还没有走那么远。

首先是一个警告：

```
Warning: you have included the Google Maps API multiple times
on this page. This may cause unexpected errors. 
```

然后`lazyload`在此处未定义`plugins.js`：

```
$(".lazy").lazyload({
    effect: "fadeIn",
    effectspeed: 600,
    failure_limit: 10
}); 
```

然后在一些 Maps API 压缩代码中出现了一个看起来很神秘的错误，但是如果你查看调用堆栈，你会`initialize`在堆栈中看到你的函数，如果你点击它，它会转到这一行：

```
mapleeds = new google.maps.Map(document.getElementById("map-leeds"),leedsoptions); 
```

将其粘贴到 JavaScript 控制台中，您将看到问题所在：

```
document.getElementById("map-leeds") 
```

之后还有更多错误，甚至还没有解决我在查看您的代码时看到的问题。

所以你有一些调试要做。您熟悉 Chrome 或其他浏览器中的开发者工具吗？如果没有，现在是时候了！这是[对 Chrome DevTools 的精彩介绍](https://developers.google.com/chrome-developer-tools/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:38:51.043

您的问题是（您需要使用调试器运行代码）：

1.  错别字（`map: mapleeds,`不是`map: leedshull,`

2.  排序，在初始化变量之前不能使用变量

3.  这些是无效的： `google.maps.StyledMapTypeHull`，`google.maps.StyledMapTypeLeeds`（可能是搜索和替换出错了。应该是`google.maps.StyledMapType`

    ```
    <script type="text/javascript">
    var maphull = null;
    var mapleeds = null;
    function initialize() {
    var styles = [
    {
       stylers: [
         { saturation: -100 }
       ]   
     },{
       featureType: 'water',
       elementType: 'all',
    stylers: [
           { lightness: -74 },
           { visibility: 'on' }
          ]
     },{
       featureType: 'landscape',
       elementType: 'geometry',
       stylers: [
        { lightness: -26 },
        { visibility: 'simplified' }
       ]
    },{
    featureType: 'road',
    elementType: 'geometry',
    stylers: [
        { hue: '#efefef' },
        { lightness: 83 },
        { visibility: 'simplified' }
       ]
    },{
          featureType: 'poi',
          elementType: 'all',
            stylers: [
          { hue: '#999999' },
              { saturation: -100 },
              { lightness: -23 },
              { visibility: 'on' }
           ]
    },{
        featureType: 'road',
        elementType: 'labels',
            stylers: [
             { saturation: -100 },
             { visibility: 'on' }
       ]
      }
    ];

    var hulloptions = {
       mapTypeControlOptions: {
           mapTypeIds: [ 'Styled']
       },

       center: new google.maps.LatLng(53.7413176, -0.3353987),
       zoom: 15,
       mapTypeId: 'StyledHull'
     };

     var leedsoptions = {
        mapTypeControlOptions: {
            mapTypeIds: [ 'Styled']
        },

        center: new google.maps.LatLng(53.796177,-1.541862),
        zoom: 15,
        mapTypeId: 'StyledLeeds'
      };

    var image = './skin/logo.png';
    var HullLatLng = new google.maps.LatLng(53.7413176, -0.3353987);
    var LeedsLatLng = new google.maps.LatLng(53.796177,-1.541862);

    var styledMapTypeHull = new google.maps.StyledMapType(styles, { name: 'RFD Hull' });
    var styledMapTypeLeeds = new google.maps.StyledMapType(styles, { name: 'RFD Leeds' });

    maphull = new google.maps.Map(document.getElementById("map-hull"),hulloptions);
    mapleeds = new google.maps.Map(document.getElementById("map-leeds"),leedsoptions);

    maphull.mapTypes.set('StyledHull', styledMapTypeHull);
    mapleeds.mapTypes.set('StyledLeeds', styledMapTypeLeeds);
      var rfdMarkerHull = new google.maps.Marker({
         position: HullLatLng,
         map: maphull,
         icon: image
      });
      var rfdMarkerLeeds = new google.maps.Marker({
          position: LeedsLatLng,
          map: mapleeds,
          icon: image
      });
    }

     google.maps.event.addDomListener(window, 'load', initialize);

     </script> 
    ```

# crystal-reports - CrystalReports 在浏览器中停止工作

> ID：15881699
> 
> 赞同：1
> 
> 时间：2013-04-08T14:25:50.827
> 
> 标签：crystal-reports

我在 asp.net webform 中创建了一个水晶报表，但该项目实际上是 Asp.netMVC4。它过去在所有浏览器中都可以正常工作，但现在它在浏览器中显示一个空白页面。如果我进行预览，它工作得很好，但在浏览器上显示空白。没有显示错误信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:53:17.540

请在预览后选择任何缩放选项......然后检查......

# vba - 使用 vba 偏移和调整大小

> ID：15881700
> 
> 赞同：3
> 
> 时间：2013-04-08T14:25:54.500
> 
> 标签：vba, excel

我对我认为是一个简单的 vba 命令有一些问题：

```
Worksheets("Sheet").Range("namedrange_d").Resize(0, 4).Offset(6, 0).Copy _
  Destination:=Worksheets("Sheet1").Range("namedrange").Resize(0, 4).Offset(6, 0) 
```

我想复制 5 个单元格宽的默认范围，即参考单元格 ( `namedrange_d`) 下方的 7 个单元格。语法有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T15:05:24.643

零不是调整大小的有效参数。如果要保持范围的原始大小，只需省略参数即可。否则，您需要明确指定行数和列数。这是保留原始行数的方法

```
Worksheets("Sheet").Range("namedrange_d").Resize(, 4).Offset(6, 0).Copy _
  Worksheets("Sheet1").Range("namedrange").Resize(, 4).Offset(6, 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:08:59.283

我会做以下事情（我非常明确 - 这往往会使代码更易于阅读和调试，对速度的影响最小。这不是“聪明”。）：

```
Dim dataSource As Range
Dim firstCellSource, firstCellDest As Range

Set firstCellSource = Worksheets("Sheet1").Range("namedrange_d").Offset(6, 0)
Set firstCellDest = Worksheets("Sheet1").Range("namedrange").Offset(6, 0)

Set dataSource = Range(firstCellSource, firstCellSource.Offset(0, 4))

dataSource.Copy Destination:=firstCellDest 
```

像这样，代码本质上是“自我记录”，很容易看到你在做什么。请注意，您只需要提供目的地的第一个单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:47:50.043

先偏移，然后`Range("A1:E1")`用来引用5列宽的区域：

```
Worksheets("Sheet").Range("namedrange_d").Offset(7,0).Range("A1:E1").Copy Destination:=Worksheets("Sheet1").Range("namedrange") 
```

...这应该就是你所需要的

# r - 在 Windows 上的 R 中并行运行两个命令

> ID：15881701
> 
> 赞同：0
> 
> 时间：2013-04-08T14:25:58.307
> 
> 标签：r, parallel-processing

我曾尝试在网上阅读有关在 R 中使用并行计算的信息。我的问题是我想在我的 PC 上使用我的所有内核，并且在阅读了不同的资源之后，我不确定我是否需要像 multicore 这样的包来实现我的目的，不幸的是在 Windows 上不起作用。

我可以简单地将我的非常大的数据集拆分为几个子数据集，并在每个子数据集上运行相同的功能，并在不同的内核上运行相同的功能吗？他们不需要互相交谈，我只需要每个人的输出。在windows上真的不可能吗？假设我有一个名为 timeanalysis() 的函数和两个数据集 1 和 2。我不能两次调用同一个函数，并告诉它每次使用不同的核心吗？

时间分析(1)

时间分析(2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:28:14.087

我发现[降雪](http://cran.r-project.org/web/packages/snowfall/index.html)包最容易在 Windows 中用于并行任务。

# richfaces - `rich:menuItem` 中的 JSF 属性`rendered` 无法从参数中读取`boolean` 值

> ID：15881702
> 
> 赞同：2
> 
> 时间：2013-04-08T14:26:03.040
> 
> 标签：richfaces, menuitem, jsf-1.2, param, rendered-attribute

我正在使用 JSF 1.2_09，丰富的面孔 3.3.3，jsf-facelets 1.1.14。

看起来属性`rendered`中的属性`rich:menuItem`无法`boolean`从参数中读取值`enableEdit`......即使`enableEdit`有`true`值，`rich:menuItem`也不会呈现（不可见）。

有谁知道解决方案，它是旧 jsf 中的错误吗？

```
<h:form id="mainId">
    <rich:contextMenu attached="false" id="conMenu" hideDelay="400" disableDefaultMenu="false">
        <rich:menuItem action="#{foo.edit}" rendered="{enableEdit}">
            <h:outputText value="Edit" />
            <a4j:actionparam assignTo="#{someBean.id}" value="{myId}" />
        </rich:menuItem>
        <rich:menuItem action="#{foo.viw}" rendered="true">
            <h:outputText value="View" />
            <a4j:actionparam assignTo="#{someBean.id}" value="{myId}" />
        </rich:menuItem>
    </rich:contextMenu>

    <h:panelGrid columns="1">
        <rich:dataTable id="tableId" value="#{someBean.results}" var="tableIter" rowClasses="oddTableRow,evenTableRow">
            ...
            ...
            <rich:componentControl event="onRowClick" for="conMenu" operation="show" params="">
                <f:param value="#{tableIter.id}" name="myId" />            
                <f:param value="#{!tableIter.locked}" name="enableEdit" />                          
            </rich:componentControl>
        </rich:dataTable>          
    </h:panelGrid>
</h:form> 
```

-达詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:08:10.197

尝试：

```
<rich:menuItem action="#{foo.edit}" rendered="{param.enableEdit}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:34:11.240

尝试

```
<h:outputText rendered="{enableEdit}">
  <rich:menuItem action="#{foo.edit}">
    <h:outputText value="Edit" />
    <a4j:actionparam assignTo="#{someBean.id}" value="{myId}" />
  </rich:menuItem>
</h:outputText> 
```

# javascript - 如何叠加两个透明背景图像

> ID：15881704
> 
> 赞同：0
> 
> 时间：2013-04-08T14:26:04.427
> 
> 标签：javascript, jquery, html, css

我需要覆盖两个不同 div 的几个背景图像，我使用的是透明 PNG，但是当我将一个覆盖在另一个上时，第二个在第一个上添加了一些烦人的白色背景，效果就丢失了。我在某处读到这可能是由于 alpha 通道造成的，但没有任何演练信息。有人可以指出我的解决方案吗？

**请注意**我正在使用精灵并从那里获取两个图像，也包括 jQuery（所以我将接受 JS 或 jQuery 解决方案），我需要使用透明图像，不能使用不透明，不能合并图像。我目前正在使用`z-index: 1;`底层和`z-index:2;`顶层，可能会有第三个，所以解决方案不应该集中在覆盖两个图像上，而是覆盖 2+ 个图像。

谢谢！

[我正在使用的图像](http://tinypic.com/r/16pc2v/6)

[在 JS 部分](http://jsfiddle.net/626qd/1/)添加了一个带注释的小提琴

[结果的截图](http://tinypic.com/r/2hf5pmp/6)注意到左上角叶子之间的白色，它应该是一个 35px 的正方形，里面有一点污垢

**解决方案：**

通过使用 CSS 并添加，`background-color: transparent;`我删除了 div 的背景颜色并获得了完整的透明度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:29:15.777

默认情况下， A`div`不一定是透明的。它继承了它的父母的背景。哪个最有可能是白色的，而不是透明的..

尝试：

```
<div style="background-color: rgba(255, 0, 0, 0.5)">.........</div> 
```

# xslt - 在翻译十进制逗号后对同一级别的节点求和

> ID：15881705
> 
> 赞同：0
> 
> 时间：2013-04-08T14:26:09.163
> 
> 标签：xslt, xslt-1.0

给出以下 xml 文档

```
<root>
  <row>
   <field1/>
   <tax1>10,00</tax1>  
   <tax3>100,00</tax3>  
   <tax2>150,00</tax2>  
   <tax4>50,0</tax4>  
   <field2/>
  </row>
</root> 
```

我需要选择所有税收字段（tax1、tax2、tax3、tax4 并翻译“，”->“。”并将它们相加。这可以在 xpath 1.0 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:33:43.797

Dimitre Novatchev 在这里为此类问题提供了完整的答案：[`https://stackoverflow.com/questions/647991/summing-numbers-with-comma-as-decimal-separator-in-xslt`](https://stackoverflow.com/questions/647991/summing-numbers-with-comma-as-decimal-separator-in-xslt).

**简而言之，有很多可能的解决方案：**

1.  XSLT/XPath 1.0 +[`EXSLT`](http://www.exslt.org/)
2.  [`FXSL 2.0`](http://fxsl.sourceforge.net/)（特别是`transform-and-sum()`转型）
3.  XSLT/XPath 2.0

**根据您的评论，看起来#1 和#2 会很有趣。**

# backbone.js - Backbone.js 没有在 paramRoot 中向服务器发送特定属性

> ID：15881706
> 
> 赞同：0
> 
> 时间：2013-04-08T14:26:11.980
> 
> 标签：backbone.js, coffeescript

如果我保存我的代码..

```
attrs = 
  attr1: 1
  attr2: 2
  attr3: 3

@question.save(attrs) 
```

我的骨干模型中有这个：

```
url: '/questions'
paramRoot: 'question' 
```

它会将这些参数发送到我的服务器：

```
{question: {attr1: 1, attr2: 2} } # Note how it skips attr3 
```

我非常特别地尝试更新我的原始模型中不存在但可以保存的属性，同样*不保存*已经用对象实例化的其他属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:39:58.150

在 javascript 中，您可以执行以下操作：

```
var QuestionModel = Backbone.Model.extend({
    urlRoot = "/questions"
});

question = new QuestionModel();
question.set('attr1', 1);
question.set('attr2', 2);
question.set('attr3', 3);

question.save(); 
```

或者您可以一次保存并添加属性：

```
question.save({
    attr1: 1,
    attr2: 2,
    attr3: 3
}); 
```

# web-services - 使用 Web 服务任务执行 SSIS 包时出错

> ID：15881709
> 
> 赞同：0
> 
> 时间：2013-04-08T14:26:19.760
> 
> 标签：web-services, ssis

说明：发生错误并显示以下错误消息：“Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebserviceTaskException：Web 服务在方法执行过程中引发错误。错误是：客户端发现响应内容类型为 'text/html; charset =utf-8'，但预期为 'text/xml'。请求失败并显示错误消息：-- IIS 7.5 详细错误 - 500.24 - 内部服务器错误

# 应用程序“默认网站”中的服务器错误

互联网信息服务 7.5

错误摘要

## HTTP 错误 500.24 - 内部服务器错误

### 已检测到不适用于集成托管管道模式的 ASP.NET 设置。

详细的错误信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T20:35:22.823

将您的应用程序池属性更改为：

```
.NET Framework Version
-- .NET Framework *version*

Pipeline Mode
-- Classic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T17:19:15.447

像这样更改您的 web.config：

```
<system.webServer> 
<validation validateIntegratedModeConfiguration="false" /> 
</system.webServer> 
```

# batch-file - 缓慢的 xcopy 启动脚本

> ID：15881717
> 
> 赞同：1
> 
> 时间：2013-04-08T14:26:48.547
> 
> 标签：batch-file, startup, xcopy

我有一个使用 Xcopy 复制文件夹的 .bat 文件。

我正在使用这个 bat 通过组策略编辑器作为启动脚本运行

.bat 文件包含：

```
xcopy "D:\temp\Temporary Firefox Files\*.*" "r:\TEMP\Temporary Firefox Files\"  /E /I /H /Y /C /Q 
```

如果我在登录后运行它，大约需要 5 秒才能完成。

但是在启动时（登录前）运行时，它会运行大约 2 分钟。（登录后我启动任务管理器并看到 Xcopy 进程仍在运行 2 分钟）。

作为提示，如果我运行与关闭脚本相同的 .bat（也通过 GPO），则只需 5 秒即可完成。

我正在 Windows 7 Ultimate X64 和 Windows XP Professional X86 上对此进行测试。结果是一样的。

有任何想法吗？

# php - 从一个点到由两点表示的直线的垂直距离

> ID：15881718
> 
> 赞同：3
> 
> 时间：2013-04-08T14:26:51.570
> 
> 标签：php, geometry, cartesian, cartesian-coordinates

我有一个点 C(Cx,Cy)，然后是一条由两个点 A(Ax,Ay) 和 B(Bx,By) 表示的线。我需要找到点 C 和 AB 表示的线之间的垂直距离。我如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:06:51.900

答案是直截了当的。它的数学而不是 PHP

```
<?php
    //Coordinates are (a,b) and (c,d)
    //the point (x,y) is the required point.
    $a=1;
    $b=2;
    $c=3;
    $d=4;

    $m=($d-$b)/($c-$a);
    //echo $m."\n";

    $x=10;
    $y=20;
    //echo $y-($m*$x)-$b+($m*$a)."\n";
    $distance=abs($y-($m*$x)-$b+($m*$a))/sqrt(1+($m*$m));
    echo $distance;
   ?> 
```

# iphone - 检查对象是否为 UIKeyboard

> ID：15881720
> 
> 赞同：0
> 
> 时间：2013-04-08T14:26:57.447
> 
> 标签：iphone, ios, cocoa-touch, uikeyboard

我想知道是否有人有聪明的方法来检查对象是否属于类型`UIKeyboard`？我不能使用`UIKeyboardDidShow`通知，因为我正在使用它们来调出除键盘之外的其他 inputView 类，因此我必须能够区分当前在屏幕上的哪个 inputView（即我有一个弹出在具有控制面板的屏幕，可让您更改某物的颜色）。

使用`[view isKindOfClass:[UIKeyboard class]]`不起作用，因为 UIKeyboard 无法识别，我无法导入它的 .h 文件而不会出现错误。

有谁知道我可以在这里做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:31:23.503

使用反射。

```
[view isKindOfClass:NSClassFromString(@"UIKeyboard")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:32:54.653

如果我理解您的要求，您可以询问输入视图是否是第一响应者，或者您可以检查 inputView 属性以查看其是否设置，如果为 nil，则为键盘。

```
UITextField *field = [[UITextField alloc] initWithFrame:CGRectZero];
if( [field isFirstResponder] ) {
    //Currently being used to input something
}

if( [field inputView] != nil ) {
    //User is not using a default keyboard
} 
```

# python - Python乘法范围

> ID：15881724
> 
> 赞同：4
> 
> 时间：2013-04-08T14:27:05.010
> 
> 标签：python, arrays, range

我需要获取从范围（15,20,1）派生的数字列表，每个数字都是 15*x*100：

```
X   Y
15  100
16  93,75
17  88,2352941176
18  83,3333333333
19  78,9473684211
20  75 
```

结果应该是一个带有两位小数的 y 数组。

我尝试使用 python，但我花了一段时间才发现它只能处理整数。然后我尝试了numpy，但我仍然没有到达那里。我是个小笨蛋，很抱歉这个问题很愚蠢，但在尝试了两个小时后，我决定发布一个问题。

最好的，梅斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:33:31.800

你需要类似的东西：

```
ylist = [float(x)*15*100 for x in range(15,21)] 
```

?

这将返回：

```
[22500.0, 24000.0, 25500.0, 27000.0, 28500.0, 30000.0] 
```

我不太确定您的 Y 列是什么意思，因为您的公式`15*x*100`不会生成这些值。

如果您实际上是说`x*100/15`，那将是：

```
ylist = [15/float(x)*100 for x in range(15,21)] 
```

或者更简单：

```
ylist = [15.0/x*100.0 for x in range(15,21)] 
```

如果计算中的所有值都是 type `int`，python 将创建一个`int`作为结果。另一方面，如果其中一个是 a`float`或`double`，那将是结果的类型。

这种强制既可以显式使用`float(x)`，也可以简单地将其中一个常量表示为浮点值，例如`100.0`.

至于需要 2 位小数，这取决于您需要对这些值做什么。

一种方法是使用`round`2 位小数，例如：

```
ylist = [round(15.0/x*100.0, 2) for x in range(15,21)] 
```

如果您总是需要两位小数，可能您会想要使用字符串格式，请查看@mgilson 回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:36:17.527

也许您正在寻找类似的东西：

```
>>> print [float(15)/x*100 for x in range(15,21)]
[100.0, 93.75, 88.23529411764706, 83.33333333333334, 78.94736842105263, 75.0] 
```

这不会为您提供小数点后 2 位的数字。为此，您需要`round`或字符串格式...（我不确定您究竟想在事后对数字做什么，所以很难在这里给出建议）。这是字符串格式的示例：

```
>>> print ['{0:.2f}'.format(float(15)/x*100) for x in range(15,21)]
['100.00', '93.75', '88.24', '83.33', '78.95', '75.00'] 
```

# javascript - 刷新标记 - Google Maps JavaScript API v3

> ID：15881727
> 
> 赞同：0
> 
> 时间：2013-04-08T14:27:22.737
> 
> 标签：javascript, google-maps-api-3, refresh, markers

我使用 setInterval 函数每 5 秒刷新一次标记数组。我需要比较两个数组（刷新之前/之后），以选择将哪些标记添加（或删除）到地图中。有没有任何有效的方法（除了两个链式 for 循环的经典方法）？

在刷新之前删除所有标记会自动关闭信息窗口（这是不可取的）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:56:33.523

请参阅此讨论 [JavaScript 数组差异](https://stackoverflow.com/questions/1187518/javascript-array-difference) 。我认为 Joshaven Potters 的答案为您提供了解决方案。

# r - 如何放大面板以包含长图例标签

> ID：15881731
> 
> 赞同：0
> 
> 时间：2013-04-08T14:27:47.473
> 
> 标签：r, plot, ggplot2

我有看起来像[这样](http://dpaste.com/1051194/plain/)的数据。

我当前的代码在这里

```
library(ggplot2)
library(RColorBrewer)
pal <- c(brewer.pal(8,"Dark2"),brewer.pal(12,"Paired"));
dat<-read.table("http://dpaste.com/1051194/plain/",header=TRUE)
dat.sub <- data.frame(dat$Function,dat$Freq)
ggplot(dat.sub,aes(dat.Freq,color=dat.Function),shape=dat.Function)+ stat_density(geom="path",position="identity",size=0.5) 
```

生成如下图： ![在此处输入图像描述](https://i.stack.imgur.com/UkoQE.png)

请注意，图例文本的长度导致主图被挤压。处理此问题的最佳方法是什么，以使数字看起来正常并且图例也显示其完整性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:37:59.317

一种可能性是将图例放在图下方，然后将标签排列在两列中。

```
ggplot(dat.sub,aes(dat.Freq,color=dat.Function),shape=dat.Function)+ 
  stat_density(geom="path",position="identity",size=0.5)+
  theme(legend.position="bottom",legend.direction="vertical")+
  guides(color=guide_legend(ncol=2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/0Nb3Y.png)

# dart - 飞镖项目中的 Greensock 或任何其他 Javascript 库

> ID：15881732
> 
> 赞同：-1
> 
> 时间：2013-04-08T14:27:48.173
> 
> 标签：dart, gsap, dart-editor, dart-js-interop

我一直在尝试在我的新 Dart 项目中使用 Greensock JavaScript 库，但没有成功。任何人都有经验或可以向我推荐 dart 中有人成功使用外部 JS 库的指南或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:36:47.513

看看[使用 Dart 中的 JavaScript：js 库](http://www.dartlang.org/articles/js-dart-interop/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T20:59:37.403

只需导入 dart:js 库，然后你会像这样从 Dart 调用 greensock：

```
context['TweenMax'].callMethod("to",["#myDiv", 0.15, new JsObject.jsify({x:100})]); 
```

导入 dart:js 库时，请确保将 interop.js 添加到 HTML 页面，如下所示：

> ```
> <script src="packages/browser/interop.js"></script> 
> ```

# sql - 如何查询范围？

> ID：15881734
> 
> 赞同：1
> 
> 时间：2013-04-08T14:27:57.670
> 
> 标签：sql, range

原始数据

```
| ID  | STATUS      |
|  1  |      A      |
|  2  |      A      |
|  3  |      B      |
|  4  |      B      |
|  5  |      B      |
|  6  |      A      |
|  7  |      A      |
|  8  |      A      |
|  9  |      C      | 
```

结果

```
| START      | END    |
|      1     |   2    |
|      6     |   8    | 
```

STATUS A 的范围

如何查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:23:44.423

这应该给你正确的范围：

```
SELECT
  STATUS,
  MIN(ID),
  max_id
FROM (
  SELECT
    t1.STATUS,
    t1.ID,
    COALESCE(MAX(t2.ID), t1.ID) max_id
  FROM
    yourtable t1 LEFT JOIN yourtable t2
    ON t1.STATUS=t2.STATUS AND t1.ID<t2.ID
  WHERE
    NOT EXISTS (SELECT NULL
                FROM yourtable t3
                WHERE
                  t3.STATUS!=t1.STATUS
                  AND t3.ID>t1.ID AND t3.ID<t2.ID)
  GROUP BY
    t1.ID,
    t1.STATUS
) s
WHERE
  status = 'A'
GROUP BY
  STATUS,
  max_id 
```

请[在此处](http://sqlfiddle.com/#!2/2770d/4)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:58:05.217

使用基于游标的解决方案或客户端功能可能会更好。

但是，如果您使用的是 Oracle - 以下将起作用。

```
WITH LOWER_VALS AS
( -- All the Ids with no immediate predecessor
  SELECT ROWNUM AS RN, STATUS, ID AS LOWER FROM
  (
  SELECT STATUS, ID 
  FROM RAWDATA RD1 
  WHERE RD1.ID -1 NOT IN
    (SELECT ID FROM RAWDATA PRED_TABLE WHERE PRED_TABLE.STATUS = RD1.STATUS)
  ORDER BY STATUS, ID
  )
) ,  
UPPER_VALS AS
( -- All the Ids with no immediate successor  
  SELECT ROWNUM AS RN, STATUS, ID AS UPPER FROM
  (
  SELECT STATUS, ID 
  FROM RAWDATA RD2 
  WHERE RD2.ID +1 NOT IN
    (SELECT ID FROM RAWDATA SUCC_TABLE WHERE SUCC_TABLE.STATUS = RD2.STATUS)
  ORDER BY STATUS, ID
  )
)  
SELECT
  L.STATUS, L.LOWER, U.UPPER
FROM 
  LOWER_VALS L
  JOIN UPPER_VALS U ON
    U.RN = L.RN; 
```

结果集中

```
A   1   2

A   6   8

B   3   5

C   9   9 
```

[http://sqlfiddle.com/#!4/10184/2](http://sqlfiddle.com/#!4/10184/2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T14:31:46.713

你放的东西没什么可做的，但我认为这可能会奏效。我正在使用 T-SQL，因为我不知道您在使用什么？

```
SELECT
    min(ID)
    , max(ID)
FROM RawData 
WHERE [Status] = 'A' 
```

# c++ - 指向复合类数据成员的指针 - 第 2 部分

> ID：15881735
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:27:57.723
> 
> 标签：c++, pointers, member

除了我之前的问题[C++：指向复合类数据成员的指针](https://stackoverflow.com/questions/15879071/c-pointer-to-composite-class-data-member)：

很抱歉没有描述我的需求。在我看来，解释起来有点复杂。但是，按照要求，请在下面找到我的问题的简要说明。

我想创建一个从 XML 自动填充的参数类。

为此，我将该参数类的每个数据成员添加到指向与其 XML 标记名称关联的成员的指针向量中。

在 XML 读取期间，从 XML 中读取所有标签名称，并更新所有参数值。

我还没有找到任何方法来声明指向我的类的“stParam1.fVal1”成员的成员指针（参见下面注释的行）。

**如何声明一个指向类结构的成员指针？**

```
class XmlReader
{
public : 
    struct ST_PARAM
    {
        float XmlReader::*ptrFloat;
        string tagName;
    };

    void addAttribut(float XmlReader::* pfMembre, string& tagName) {
        ST_PARAM stParam;
        stParam.ptrFloat = pfMembre;
        stParam.tagName = tagName;
        _tstParams.push_back(stParam);
    }
    void ReadParameters(string& fileName){/*...*/}    // Read Xml File and update all parameters in _tstParams 

private:
    vector<ST_PARAM> _tstParams;
};

class Param : public XmlReader
{
public:
    Param() {
        addAttribut((float XmlReader::*)&Param::fVal1, string("XML_TAG_NAME_1"));                // OK
        addAttribut((float XmlReader::*)&Param::fVal2, string("XML_TAG_NAME_2"));                // OK

        // addAttribut((float XmlReader::*)&Param::stParam1.fVal1, string("XML_TAG_NAME_3"));    // DON'T WORK -> Syntax is invalid
        //...
        }

    // Some more complex parameters types
    typedef struct 
    {
        float fVal1;
        float fVal2;
    }ST_PARAM_1;
    //...

    // Declaration of several parameters
    ST_PARAM_1 stParam1;
    F32 fVal1;
    F32 fVal2;
    //...
};

void test()
{
    Param myParam;
    myParam.ReadParameters(string("Parameters.xml"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:19:16.207

为什么你需要所有这些`XmlReader::`东西`Param::`？

我认为您在数据成员周围建立围栏只是为了跳过它们......

把事情简单化...

```
class XmlReader
{
public :
  struct ST_PARAM
  {
    float *ptrFloat;
    string tagName;
  };

  void addAttribut(float* pfMembre, string tagName) {
    ST_PARAM stParam;
    stParam.ptrFloat = pfMembre;
    stParam.tagName = tagName;
    _tstParams.push_back(stParam);
  }
  void ReadParameters(string fileName){/*...*/}    // Read Xml File and update all parameters in _tstParams

private:
  vector<ST_PARAM> _tstParams;
};

class Param : public XmlReader
{
public:
  Param() {
    addAttribut(&fVal1, "XML_TAG_NAME_1");                // OK
    addAttribut(&fVal2, "XML_TAG_NAME_2");                // OK

    addAttribut(&stParam1.fVal1, "XML_TAG_NAME_3");    // OK...
    //...
  } 
```

# javascript - javascript中的参数引用不一致

> ID：15881736
> 
> 赞同：0
> 
> 时间：2013-04-08T14:27:59.097
> 
> 标签：javascript, arrays, ecmascript-5, ecma262

我最近在 JS 中遇到了一个令人讨厌的问题。

假设我们将一个映射、一个对象数组传递给函数 f。

```
var o=[{a:0}];
function f(a){
    for(var i in a){
        if (a.hasOwnProperty(i)){
            a[i]=null;
        }
    }
    return a;
};
var outp=f(o);

alert(outp[0]+" === "+o[0]+" : "+(outp[0]===o[0]));

// here we expect loose equality, and equality in type, 
//furthermore it should identically equal as well, and we got right! 
```

但是，我们不能将对象的全部责任作为参数传递给函数，就像在函数范式中一样`o=(function(o){return o})()`，因为没有引用对 o 的任何修改！

```
var o=[];
function ff(a){
    return (a=undefined);
};
var outp=ff(o);
alert(outp+" === "+o.constructor+" : "+(outp===o));
// here we expect true, but we got false! 
```

为什么在第二个用例中上述参考丢失和可能不同的参考处理，尽管在这两种情况下，函数都将数组参数放在 0\. 位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:33:39.670

Javascript 总是按值传递参数，所以这不起作用：

```
 function foo(x) {
    x = 100;
 }

 y = 5
 foo(y)
 y == 100 // nope 
```

但是，这确实有效：

```
 function foo(x) {
    x.bar = 100;
 }

 y = {}
 foo(y)
 y.bar == 100 // yes 
```

在第二个片段中，x 仍然是按值传递的，但是这个值是一个对象的引用（指针）。因此，可以在函数中取消引用它并访问对象“内部”的内容。

# jquery - 在 Fancybox 框架内的真实图像上自动覆盖透明 gif

> ID：15881744
> 
> 赞同：0
> 
> 时间：2013-04-08T14:28:13.553
> 
> 标签：jquery, wordpress, fancybox

我发现这个 jQuery 解决方案可以在真实图像上自动覆盖透明 gif。

[http://www.dwuser.com/education/content/stop-the-thieves-strategies-to-protect-your-images/](http://www.dwuser.com/education/content/stop-the-thieves-strategies-to-protect-your-images/)

（“欺骗下载者”）

它在我的 Wordpress 网站 (v. 3.5.1) 和 FancyBox 插件 (v. 1.3.4) 上运行良好。

**但是现在我所有与图像相关的链接都消失了......**

是否有任何解决方案来保持与图像相关的活动链接？

我还尝试将覆盖 gif 仅归因于 fancybox 框架内的图像，但没有成功......

**>>编辑发布相关代码<<**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    var pixelSource = 'http://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif';
    var useOnAllImages = true;
    // Preload the pixel
    var preload = new Image();
    preload.src = pixelSource;
    $('img').live('mouseenter touchstart', function(e) {
        // Only execute if this is not an overlay or skipped
        var img = $(this);
        if (img.hasClass('protectionOverlay')) return;
        if (!useOnAllImages && !img.hasClass('protectMe')) return;
        // Get the real image's position, add an overlay
        var pos = img.offset();
        var overlay = $('<img class="protectionOverlay" src="' + pixelSource + '" width="' + img.width() + '" height="' + img.height() + '" />').css({position: 'absolute', zIndex: 9999999, left: pos.left, top: pos.top}).appendTo('body').bind('mouseleave', function() {
            setTimeout(function(){ overlay.remove(); }, 0, $(this));
        });
        if ('ontouchstart' in window) $(document).one('touchend', function(){ setTimeout(function(){ overlay.remove(); }, 0, overlay); });
    });
});
</script> 
```

感谢并为我糟糕的英语感到抱歉。d。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:37:29.313

试试这个：{请注意，任何 javascript 保护对有经验的开发人员来说都是无用的}

```
$(function() {
    var pixelSource = 'http://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif';
    var useOnAllImages = true;
    // Preload the pixel
    var preload = new Image();
    preload.src = pixelSource;
    //live is deprecated, use 'on' instead
    $(document).on('mouseenter touchstart','img', function(e) {
        // Only execute if this is not an overlay or skipped
        var img = $(this);
        if (img.hasClass('protectionOverlay')) return;
        if (!useOnAllImages && !img.hasClass('protectMe')) return;
        // Get the real image's position, add an overlay
        var pos = img.offset();
        var overlay = $('<img class="protectionOverlay" src="' + pixelSource + '" width="' + img.width() + '" height="' + img.height() + '" />').css({position: 'absolute', zIndex: 9999999, left: pos.left, top: pos.top}).appendTo('body').bind('mouseleave', function() {
            setTimeout(function(){ overlay.remove(); }, 0, $(this));
        }).click(function(){
           if(img.parent('a').length)//assuming your image is embeded in a link tag
              window.location.replace(img.parent('a').attr('href'));
        });
        if ('ontouchstart' in window) $(document).one('touchend', function(){ setTimeout(function(){ overlay.remove(); }, 0, overlay); });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:33:43.860

在您的图像上放置水印是一种选择吗？当您在图像上放置 gif 时，您可以使用鼠标右键阻止保存图像。但是使用 Firefox，您可以右键单击任意位置并选择“查看页面信息”，然后从那里的标签媒体，您仍然可以下载图像。

PS：或者禁用JS的人也可以下载图像。

# http - 我应该以这种方式使用 Content-Location 标头吗？

> ID：15881746
> 
> 赞同：5
> 
> 时间：2013-04-08T14:28:15.740
> 
> 标签：http, rest

**前言：**

在阅读了大量有关 HTTP 和 REST 的内容后，您花了几个小时设计了一个巧妙的内容协商方案。这样您的 Web API 就可以从单个 URL 提供 XML、JSON 和 HTML。因为，您知道，资源应该只有一个 URL，并且应该使用`Accept`标头请求不同的表示形式。你开始想知道为什么网络需要 20 年才能实现这一目标。

这就是现实[给你一记耳光的](http://blogs.msdn.com/b/ieinternals/archive/2009/07/01/ie-and-the-accept-header.aspx)时候。

因此，为了帮助浏览器（以及您尝试调试）强制您的服务提供所需的内容类型，您需要做每个自尊的 REST 布道者都会鄙视您的事情：*文件扩展名。*

**尽管在地狱中受到永恒的折磨，以下使用`Content-Location`+`.ext`是否可以接受？**

`/users/:loginname`例如，假设我们有用户`/users/bob`。这将是任何能够设置正确`Accept`标头的 API 端点。但是对于任何可能的`Content-Type`（或至少一些），我们允许使用另一种访问方法，即带有文件类型后缀的 URL。例如`/users/bob.html`对于 HTML 表示。让我们假设（这是一个很大的假设）登录名*永远不会*包含句点/点。

要求：

```
GET /users/bob.json HTTP/1.1  
Host: example.com 
```

回复：

```
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 14
Content-Location: /users/bob

{"foo": "bar"} 
```

这将允许我对访问（在这种情况下）用户信息的*替代方式进行编码。*例如，指向用户页面的链接可以是`<a href="/users/bob.html">Bob</a>`. vCard 的链接（将用户添加到地址簿/Outlook/任何东西）将是`<a href="/users/bob.vcf">Bob</a>`.

有没有我错过的陷阱？这有什么优点/缺点？

编辑：[这](https://stackoverflow.com/a/15473879/1762194)让我注意到有点晚了。即使它触及主题并且真的很有帮助，我认为这并不是我想要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:35:37.827

据我所知，您使用 Content-Location 的方式完全错误；它应该指向更具体的 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:46:33.183

根据 RFC 2616：

```
The Content-Location entity-header field MAY be used to supply 
the resource location for the entity enclosed in the message 
when that entity is accessible from a location separate from 
the requested resource's URI. 
```

和

```
The Content-Location value is not a replacement for the original
requested URI; it is only a statement of the location of the resource 
corresponding to this particular entity at the time of the request. 
```

所以一般来说，是的，您可以使用 Content-Location 标头来识别原始资源。使用扩展后缀的主要缺点是您正在创建另一个 URL，例如 /users/bob、/users/bob.vfc、/users/bob.html 是三种不同的资源。

# ruby-on-rails - Rails：添加列后添加索引

> ID：15881749
> 
> 赞同：142
> 
> 时间：2013-04-08T14:28:22.687
> 
> 标签：ruby-on-rails, indexing, migration

假设我`table`在 Rails 应用程序中创建了一个表。一段时间后，我添加了一个运行的列：

```
rails generate migration AddUser_idColumnToTable user_id:string. 
```

然后我意识到我需要添加`user_id`为索引。我知道这个`add_index`方法，但是这个方法应该在哪里调用呢？我应该运行迁移（如果是，是哪个？），然后手动添加这个方法？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-04-08T14:31:47.553

您可以运行另一个迁移，仅针对索引：

```
class AddIndexToTable < ActiveRecord::Migration
  def change
    add_index :table, :user_id
  end
end 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-07-08T23:01:43.743

如果您需要创建一个，`user_id`那么这是一个合理的假设，即您正在引用一个用户表。在这种情况下，迁移应为：

```
rails generate migration AddUserRefToProducts user:references 
```

此命令将生成以下迁移：

```
class AddUserRefToProducts < ActiveRecord::Migration
  def change
    add_reference :user, :product, index: true
  end
end 
```

运行后`rake db:migrate`，`user_id`列和索引将被添加到`products`表中。

如果您只需要向现有列（例如表）添加索引`name`，`user`则以下技术可能会有所帮助：

`rails generate migration AddIndexToUsers name:string:index`将生成以下迁移：

```
class AddIndexToUsers < ActiveRecord::Migration
  def change
    add_column :users, :name, :string
    add_index :users, :name
  end
end 
```

删除`add_column`行并运行迁移。

在所描述的情况下，您可以发出`rails generate migration AddIndexIdToTable index_id:integer:index`命令，然后`add_column`从生成的迁移中删除行。但我宁愿建议撤消初始迁移并添加参考：

```
rails generate migration RemoveUserIdFromProducts user_id:integer
rails generate migration AddUserRefToProducts user:references 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-08T14:32:28.983

在创建列后添加生成的迁移如下（示例）

```
add_index :photographers, :email, :unique => true 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-03-29T10:23:45.883

如需参考，您可以致电

```
rails generate migration AddUserIdColumnToTable user:references 
```

如果将来您需要添加一个通用索引，您可以启动它

```
rails g migration AddOrdinationNumberToTable ordination_number:integer:index 
```

生成的代码：

```
class AddOrdinationNumberToTable < ActiveRecord::Migration
  def change
   add_column :tables, :ordination_number, :integer
   add_index :tables, :ordination_number, unique: true
  end
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-06T11:28:04.763

您可以使用它，只要认为 Job 是您要添加 index **cader_id**的模型的名称：

```
class AddCaderIdToJob < ActiveRecord::Migration[5.2]
  def change
    change_table :jobs do |t|
      t.integer :cader_id
      t.index :cader_id
    end
  end
end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-30T17:37:14.690

对于那些使用 postgresql db 并面临错误的人

```
StandardError: An error has occurred, this and all later migrations canceled:

=== Dangerous operation detected #strong_migrations ===

Adding an index non-concurrently blocks writes 
```

请参考[这篇文章](https://thoughtbot.com/blog/how-to-create-postgres-indexes-concurrently-in)

例子：

```
class AddAncestryToWasteCodes < ActiveRecord::Migration[6.0]
  disable_ddl_transaction!

  def change
    add_column :waste_codes, :ancestry, :string
    add_index :waste_codes, :ancestry, algorithm: :concurrently
  end
end 
```

# asp.net - aspx.net 中的 FileUpload 控件不允许文件读取

> ID：15881754
> 
> 赞同：0
> 
> 时间：2013-04-08T14:28:37.047
> 
> 标签：asp.net, file-upload, file-permissions

我正在尝试使用 FileUpload 控件将上传的文件读取到服务器，但是，出现以下错误：

> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 上的网络服务），如果应用程序不模拟，则使用该标识。如果应用程序通过 模拟`<identity impersonate="true"/>`，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户

我查了一下，好像这​​个文件夹没有网络服务账号的权限，所以我添加了，但是问题依旧。这是我的 FileUpload 控件的代码：

```
<asp:FileUpload ID="FileUpload1" runat="server" style="top: 164px; left: 12px;       position: absolute; height: 22px; width: 281px" /> 
```

这是我用来将文件保存在服务器中的代码：

```
protected void Button1_Click1(object sender, EventArgs e)
{
    FileUpload1.SaveAs("C:\\folder\\autoTrack.xlsx");
    StatusLabel.Text = FileUpload1.PostedFile.FileName;
    if (FileUpload1.PostedFile.FileName != "")
    {
        this.readFile("C:\\folder\\autoTrack.xlsx"); //this is where the program crash due to lack of permissions!
    }
    else 
    {
        StatusLabel.Text = "Select a file to start the process!";
    }

} 
```

c:\folder 文件夹的 ACL 具有具有完全控制权限的网络服务，并且启用了继承以传播到子对象。

此外，我读到在应用程序池的“身份”选项卡中使用域帐户可以解决问题，但是如果我将身份从预定义的网络服务更改为我的域用户，则在尝试访问我的应用程序时出现“服务不可用”。

对此的任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:45:32.967

首先，尝试在文件夹中授予所有人权限，看看它是否有效。如果是这样，那么只需找到正确的用户来授予正确的权限。如果您在 IIS 上运行，则应按照此处的说明向应用程序池用户授予权限-> [http://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:13:26.480

经过一番挣扎，我终于找到了问题所在。您必须在服务器中设置网络服务的 DCOM 属性。下面的链接描述了如何做到这一点：

[http://community.spiceworks.com/education/projects/Setting_The_Default_DCOM_Properties_And_Security](http://community.spiceworks.com/education/projects/Setting_The_Default_DCOM_Properties_And_Security)

设置后，我停止接收访问错误。

# asp.net - 如何在 ASP.net 中安排任务？

> ID：15881756
> 
> 赞同：3
> 
> 时间：2013-04-08T14:28:42.823
> 
> 标签：asp.net, scheduled-tasks

我正在用**ASP.net (C#)**开发一个站点，并且有以下要求：

该站点应每晚从 RSS 提要中获取数据，执行一些计算并使用计算值更新数据库。如何在**共享主机环境**中实现这一点？

我通常得到的答案是拥有一个执行此操作的 Windows 服务，但我不能使用它，因为我不允许在我的共享主机环境中运行 Windows 服务。

我发现的另一种选择是使用[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/中所述的 HttpRuntime.Cache](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

然而，这种方法似乎有很多缺点。**还有其他方法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:31:49.933

在一些（大多数？）共享托管服务提供商，至少是我使用过的那些，他们允许您通过他们的控制面板安排任务。我知道 discountasp.net 和 rackspace 也是如此。

如果您的提供商确实具有该功能，请让它在指定时间调用/加载某个 asp.net 网页，并完成其工作。对于很多小任务，这将是阻力最小的路径。

如果它不提供该功能，并且您不愿意切换提供程序，则您始终可以从不在您的 ISP 处的计算机上运行计划任务（使用 Windows 服务器中的内置任务），只要您可以从中获取数据库。我过去也使用过这种方法。任何在正确时间可靠启动的机器都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T11:46:49.913

**Windows 计划任务**：

如果您没有任何专用资源，则在共享主机中是不可能的。非常有限。

使用诸如 Windows 计划任务和控制面板功能之类的技巧并不是很好的解决方案。他们大部分时间都很糟糕，因为今年他们让我们头疼。

**调度网络服务**：

您可以在**共享主机中使用**[ATrigger](http://atrigger.com/)调度服务。[.Net 库](http://atrigger.com/docs/wiki/13/library-net)也可用于创建计划任务而无需开销。

 **免责声明：我是 ATrigger 团队中的一员。这是一个免费软件，我没有任何商业目的。**

# jquery - 垂直幻灯片式菜单

> ID：15881757
> 
> 赞同：1
> 
> 时间：2013-04-08T14:28:42.483
> 
> 标签：jquery, menu, slideshow

[点我看示意图](http://dl.dropbox.com/u/14193826/schematic_vertical_menu.jpg)

我正在尝试构建一个简单的滑动垂直菜单 -*一个 div 容器 (sliderContainer) 内的几个 div (#sliderOption_ )。两个箭头（上/下）将控制滑动效果。*我需要滑块内的 div垂直向上或向下*移动 80 像素（#optionMenu_ * 高度）。*我希望 div 的 css（即边框半径），实际上是在 sliderContainer 的可见区域内，根据它们的顺序（第 1、第 2 和第 3 - 参见图片）进行更改。中间项目将是触发其他事情发生的项目 - #btn? 为此目的应出现相应的。我一直在检查其他帖子，但无法为我的案例找到解决方案... Html 结构：

```
<p id="upBtn">Up</p>
<p id="downBtn">Down</p>

<div id="sliderContainer">
    <div id="optionMenu_1" class="optionMenu"> Option menu 1 <div id="btn1" class="btn">1</div> </div>
    <div id="optionMenu_2" class="optionMenu"> Option menu 2 <div id="btn2" class="btn">2</div> </div>
    <div id="optionMenu_3" class="optionMenu"> Option menu 3 <div id="btn3" class="btn">3</div> </div>
    <div id="optionMenu_4" class="optionMenu"> Option menu 4 <div id="btn6" class="btn">4</div> </div>
    <div id="optionMenu_5" class="optionMenu"> Option menu 5 <div id="btn5" class="btn">5</div> </div>
    <div id="optionMenu_6" class="optionMenu"> Option menu 6 <div id="btn6" class="btn">6</div> </div>
    <div id="optionMenu_7" class="optionMenu"> Option menu 7 <div id="btn7" class="btn">7</div> </div>
</div> 
```

我真的想要最简单的事情 - 没有外部库（如果可能的话）。这是一个包含所有元素的[jsFiddle 。](http://jsfiddle.net/LPkZZ/)

任何帮助表示赞赏。谢谢。

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:13:01.497

我已经更新了您的示例，请在[此处查看](http://jsfiddle.net/LPkZZ/8/)。

我只是添加一个包含你的`optionMenu`和一些 jQuery 魔法的 div。

解释 ：

```
<div id="sliderContainer">
    <div class="sliderContainerInside">//add just wrapper to your .optionMenu divs
    ......
    ......
</div>//end div #sliderContainerInside 
```

在 CSS 中添加以下内容：

```
.sliderContainerInside {
    position:absolute;
    top:10px;
}
#sliderContainer{
      ......
      ......
      position:relative;
} 
```

在 JS 中：

```
$("#upBtn").on('click', function () {
    // slide all optionMenu_* up by 80px
    var maxUp = ($('div.optionMenu').length - 3) * 90;//now get the max px that our .sliderContainerInside can have as top(css) value. Notice that (3) represent the number of divs that 'll be visible to the user and (90) is the optionMenu height plus the value of top padding(10)
    if (-maxUp < parseInt($('.sliderContainerInside').css('top')) - 10) {
        $('.sliderContainerInside').css('top', parseInt($('.sliderContainerInside').css('top')) - 90 + 'px');
    }
    //console.info($('.sliderContainerInside').css('top') - 80);
}); 
```

# c# - 使用 Ninject 将通用接口绑定到存储库时出现“MissingMethodException：无法创建接口的实例”

> ID：15881762
> 
> 赞同：6
> 
> 时间：2013-04-08T14:28:49.073
> 
> 标签：c#, asp.net-mvc-4, ninject, entity-framework-5

按照[此处](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/EF-Code-First-Common-Practices.aspx)的指南，而不是 StructureMap 尝试使用 Ninject。

`IRepository<SomeEntityType>`每当我尝试将一个注入到操作方法中的参数中时，它都会引发“MissingMethodException：无法创建接口的实例”错误。

更新：还没有找到 bootstrapper.cs，我使用了 MVC3 Ninject Nuget 包。

```
 public ActionResult Index(IRepository<SomeEntityType> repo)
        {

            return View();
        } 
```

NinjectWebCommon.cs

```
 private static void RegisterServices(IKernel kernel)
    {
        string Cname = "VeraDB";
        IDbContext context = new VeraContext("VeraDB");
        kernel.Bind<IDbContext>().To<VeraContext>().InRequestScope().WithConstructorArgument("ConnectionStringName", Cname);
        kernel.Bind(typeof(IRepository<>)).To(typeof(EFRepository<>)).WithConstructorArgument("context",context);

    } 
```

存储库

```
 public interface IRepository<T> where T : class
{
    void DeleteOnSubmit(T entity);
    IQueryable<T> GetAll();
    T GetById(object id);
    void SaveOrUpdate(T entity);
} 
```

EF存储库

```
 public class EFRepository<T> : IRepository<T> where T : class, IEntity
{
    protected readonly IDbContext context;
    protected readonly IDbSet<T> entities;

    public EFRepository(IDbContext context)
    {
        this.context = context;
        entities = context.Set<T>();
    }

    public virtual T GetById(object id)
    {
        return entities.Find(id);
    }

    public virtual IQueryable<T> GetAll()
    {
        return entities;
    }

    public virtual void SaveOrUpdate(T entity)
    {
        if (entities.Find(entity.Id) == null)
        {
            entities.Add(entity);
        }

        context.SaveChanges();
    }

    public virtual void DeleteOnSubmit(T entity)
    {
        entities.Remove(entity);

        context.SaveChanges();
    }
} 
```

IEntity 仅充当通用约束。

```
 public interface IEntity
{
    Guid Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-16T20:52:34.293

我犯了同样简单的错误。Ninject 将参数注入您的构造函数，但您将参数添加到 Index Controller 操作。

它应该如下所示：

```
public class HomeController : Controller
{
    private IRepository<SomeEntityType> _repo;

    public HomeController(IRepository<SomeEntityType> repo)
    {
        _repo= repo;
    }

    public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application. " +
                          _repo.HelloWorld();

        return View();
    }
} 
```

说得通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:48:38.253

这种错误通常表明您在运行时使用的 dll 版本与您在项目中引用的版本不同。

尝试手动将项目目录中的所有相关 dll 复制到 bin 目录中。

如果做不到这一点，请查看[这篇](http://blogs.msdn.com/b/suzcook/archive/2004/02/13/debugging-a-missingmethodexception-missingfieldexception-typeloadexception.aspx)（诚然，非常古老的）帖子，了解如何调试问题的一些想法。

# java - 在文本视图中显示数组

> ID：15881763
> 
> 赞同：0
> 
> 时间：2013-04-08T14:28:53.603
> 
> 标签：java, android, arrays, textview

我想用随机数填充我的数组，但我无法在`TextViewer`我的数组中显示`casual[]`- 帮帮我！

```
LanciaB.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        int result = np2.getValue();
        int result2 = np.getValue();
        result = result == 0 ? 10 : result;

        int casual[] = new int[10];
        for(int i=0; i < result2; i++){
            casual[i] = (int) (Math.random()*10);
        }

        tv.setText(casual.toString());

        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:30:23.583

使用将数组作为参数的数组的重载[**Arrays#toString(int[]) 。**](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)

```
 Arrays.toString(casual) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:32:48.497

您需要加入数组的元素。在 Android 中，您可以执行以下操作：

```
tv.setText(TextUtils.join(",", casual)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:10:08.740

我使用了您的建议，但打印的字符串不仅是数字，而且是字符和字母......是打印问题（字符串编码）还是填充随机数数组的错误方式？

# flash - 如何在线查看交互式 PDF

> ID：15881770
> 
> 赞同：0
> 
> 时间：2013-04-08T14:29:03.647
> 
> 标签：flash, pdf, interactive

我有一个交互式 pdf，我正试图进入我的网站。除了需要很长时间来加载（任何建议）之外，它在预览模式下无法正常工作，截至目前它只显示一个 Flash 符号。有没有办法让它在预览模式下显示而不自动下载？

[http://aishconnections.com/2013report.pdf](http://aishconnections.com/2013report.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T12:29:46.203

You could use pdf.js to preview your pdf without it downloading. Works in all major browsers including mobile devices.

# c++ - boost 1.53 python 致命错误 LNK1104 boost_python-vc110-mt-gd-1_53.lib

> ID：15881771
> 
> 赞同：3
> 
> 时间：2013-04-08T14:29:05.760
> 
> 标签：c++, python, boost, visual-studio-2012

我正在尝试（现在几天）使用 boost/python 构建从 C++ 代码生成的 DLL，以供 python 使用。我是一名来自德国的学生，直到现在主要与 Java 有关（我之前用 C++ 编写了一些基本的 OpenGL 和 gimp 过滤器的东西）。所以请提前原谅我英语不好或 C++ 初学者的错误。我的意思是，与 C++ 相比，使用 Java 编程确实要舒服得多。但足够的小规模冲突。

错误：

```
LINK : fatal error LNK1104: File "boost_python-vc110-mt-gd-1_53.lib" could not be openend 
```

我的预设：

- 使用 MS Visual Studio 2012 (11.0)

- 使用 boost_1_53_0

-使用python2.7（听说3.3可能会出现一些问题）

我做了什么：

安装python并将其添加到PATH。然后在 VS 中创建一个新的空项目和一个类文件“Test.cpp”，其中包含以下内容，如 boost 教程页面所述：

```
char const* greet()
{
    return "hello world";
}

#include <boost/python.hpp>

BOOST_PYTHON_MODULE(Test)
{
    using namespace boost::python
    def("greet", greet);
} 
```

然后是我的新部分，在 VS Project Properties 中：

配置属性 > 常规 > 配置类型 > 动态库 (.dll)

C/C++ > 常规 > 添加包含目录 > C:[..]\boost_1_53_0

链接器 > 常规 > 其他库目录 > C:[..]boost_1_53_0\stage\lib

从错误中，我假设我对 Linker 或 Include 做错了什么。我还将 Linker > General > Additional Library Directories 更改为 boost_1_53_0\libs 因为我不确定，但发生了同样的错误。是的，我正确地包含了 python。我也不确定是否必须将 python 旁边的其他内容放入 Linker > Input 以进行提升。

然后我用 bjam 构建 boost，除了 msvc-11.0 之外没有其他选项，以确保拥有我需要的一切（尽管我读到 boost/python 不需要额外的构建）并且仍然得到相同的错误。有人能帮我吗？我很想一步一步地描述要做什么。我真的对此感到绝望。

[顺便说一句：在Linker error LNK1104 with 'libboost_filesystem-vc100-mt-s-1_49.lib'](https://stackoverflow.com/questions/9628527/linker-error-lnk1104-with-libboost-filesystem-vc100-mt-s-1-49-lib)前几天我和这个人有同样的错误然后停止工作，当我重新开始时，我得到了我的全新错误（我不能告诉你这是怎么发生的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-20T10:01:46.283

既然是找静态库，就加`BOOST_PYTHON_STATIC_LIB`flag，去VS属性->预处理器->处理器定义，加`BOOST_PYTHON_STATIC_LIB`flag。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T17:55:49.960

您需要创建一个“user-config.jam”文件，该文件指示 Boost.Build 可以在何处找到 python 头文件和库。您可以在 boost_1_53_0/ 目录中使用以下内容创建它：

```
# Configure specific Python version.
 using python : 2.7
 : C:/Python27/python.exe
 : C:/Python27/include #directory that contains pyconfig.h
 : C:/Python27/libs    #directory that contains python27.lib
 : <toolset>msvc ; 
```

然后从该 boost_1_53_0/ 目录中，您需要像这样调用 b2 以构建缺少的库：

```
b2 toolset=msvc-11.0 --with-python variant=debug runtime-debugging=on link=shared --user-config=user-config.jam stage 
```

（尽管我建议`b2 toolset=msvc-11.0 --with-python --user-config=user-config.jam --build-type=complete stage`您一步完成未来可能需要的所有配置）

拥有库后，您需要将目录添加到 Visual Studio（boost 和 python）。

成功构建模块后，您需要将其重命名为`Test.pyd`（您在`BOOST_PYTHON_MODULE`.

```
import Test
print Test.greet() 
```

并获得熟悉的“hello world”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:16:55.693

请注意，我非常感谢您的尝试，但您的回答都没有帮助。然后一位同学给了我正确答案的提示，有些步骤真的很容易，有些我不明白，但现在可以了。

第一个问题是：新的 boost 1.53.0 不适用于 Python27 或更早版本。然后我将它与 Python33 链接并删除了构建错误。

但是当然，构建版本没有错误就无法工作。当我尝试启动从 VisualStudio 构建的 .pyd 导入并调用 greet 方法的 helloboost.py 时，出现以下错误：

```
ImportError: DLL load failed: The specified module could not be found. 
```

当我使用依赖项步行器检查 hello_ext.pyd 并疯狂复制粘贴时，我发现它需要 boost_python-vc110-mt-gd-1_53.dll （可能取决于你需要什么，并且之前用 bjam 构建）在同一个文件夹。那时它奏效了。也许有人可以解释为什么没有地方解释我需要这个dll与pyd在同一个文件夹中（或者我错过了什么？仅仅是因为我之前犯了一个错误？）

无论如何，我很高兴它现在可以工作，并希望它可以帮助其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T06:29:52.447

您现在可能已经解决了这个问题 - 但是：

当 .exe 查找要加载的 .dll 时，未指定路径。因此 .dll 必须在文件的搜索路径中。

另外：我正在尝试为 Visual Studio 2013 构建 1.49 库 - 并且不断从我的项目中收到 LNK 错误。我不知道谁在 stackoverflow 上提出了建议，但有人\某事让我想到了从最近的提升中复制构建系统的想法，该提升知道如何为最近的环境制作 .libs。（谢谢你）

在 1.58 中运行 bootstrap 后，我必须从 1.58 复制 boost 构建系统，将 b2、bjam 和 boost-build.jam 复制到较早的 boost 文件夹根目录以替换那里的相同命名文件。您还需要复制后面的 tools\build 文件夹以支持构建系统。

在这里指出，希望它可以帮助我发现自己处于类似引用中的其他人。

请参阅：[Windows 用于查找 DLL 的搜索路径](https://msdn.microsoft.com/en-us/library/7d83bc18.aspx)

# loops - 如何从文件上传中编写带有动态索引的cfloop

> ID：15881772
> 
> 赞同：1
> 
> 时间：2013-04-08T14:29:07.010
> 
> 标签：loops, coldfusion

我有以下代码正在读取文件上传中的电子表格。我的问题是：如何使 COL_3 动态化，以便 3 是循环的索引号？所以像：

```
<cfset test = test & variables.file.COL_[j][j]> 
```

但这不起作用。这就是我所拥有的：

```
<cfset ColQty  = #ListLen(variables.file.ColumnList)#>
<cfset test = "">
  <cfloop from="1" to="#ColQty#" index="j">
      <cfset test = test & variables.file.COL_3[j]>     
  </cfloop> 
```

任何帮助表示赞赏。谢谢JC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:42:58.640

您可以像这样访问结构键：

```
<cfset test = test & variables.file["COL_" & j][j]> 
```

但我希望你的代码会表现不正确，因为你不是`test`每次都重置，所以它只会一遍又一遍地追加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:42:27.087

我想你正在寻找这样的东西。

```
<cfloop from="1" to="#ColQty#" index="j">
    <cfset test = test & variables.file["COL_" & j][j]>     
</cfloop> 
```

# list - 捕获穿梭列表的值

> ID：15881773
> 
> 赞同：0
> 
> 时间：2013-04-08T14:29:11.690
> 
> 标签：list, report, oracle-apex

我正在使用 APex 4.2

我有一个带有班车列表的页面（第 31 页）。该列表包含几个工作类别（a、e、x、c 等）。我在该页面上有一个按钮，可以根据所选的工作类别生成报告。我单击按钮，查询运行，然后将我带到报告页面（第 27 页）。查询是沿着这些线

```
select * from 'table'
where (instr(':'||:P31_JOB_CATEGORY||':',':'||JOB_CATEGORY||':') > 0) 
```

其中 P31_JOB_CATEGORY 由穿梭列表表示。这给了我第 27 页所需的结果，但是，有没有办法捕获在第 31 页的穿梭列表中选择的每个选定的工作类别并将其传递到第 27 页以显示？最好将它存储在某种连接字符串中以便于处理，即 A、E、C、X。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:35:59.953

原因在于如何将穿梭值保存到会话状态以及如何构造顶点 URL。
如您所见，穿梭值是通过用冒号连接选定值来构造的。例如，我在`ENAME`from上有一个穿梭`EMP`，选择 3 个值并提交页面。穿梭的会话状态是：`URUGUAY:HOWARD:M BENZ`。

现在假设您重定向到另一个页面，使用此穿梭项目的值设置项目。URL 将如下所示： `f?p=54687:6:100741653098795::NO::P6_TEXT:URUGUAY:HOWARD:M BENZ`

顶点 URL 是使用冒号构造的。您将带有冒号的值放在那里根本不适用于顶点。
解决方案？您可以提交页面并使用计算来替换冒号，然后分支到目标页面。例如，我用我的名字替换冒号 ~: `URUGUAY~HOWARD~M BENZ`。然后，在您的目标页面上，您可以使用此值并调整您的 sql 或使用前/后标头中的计算来再次替换分隔符。

# emacs - Emacs Dired 重命名许多文件

> ID：15881776
> 
> 赞同：30
> 
> 时间：2013-04-08T14:29:16.947
> 
> 标签：emacs, dired

如何重命名：

```
VAR1_1F_text.txt
VAR2_1F_text.txt
VAR3_2F_text.txt 
```

到

```
1F_VAR1_text.txt
1F_VAR2_text.txt
2F_VAR3_text.txt 
```

如何切换部分文件名？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-08T15:04:05.137

这可以很容易地使用`dired`：

1.  输入目录的目录视图

2.  切换到可写的dired模式（`wdired-change-to-wdired-mode`）：`C-x``C-q`

3.  像普通缓冲区一样编辑文件名列表（例如使用键盘宏或矩形选择或查询替换）。这是一个基于正则表达式的解决方案：

    `C-M-%``\(VAR.\)_\(..\)``RET``\2_\1``RET`

4.  完成编辑 ( `wdired-finish-edit`)：`C-x``C-s`或`C-c``C-c`

你完成了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-30T21:02:09.170

您也可以从这里使用 Magnar Sveen 的多光标，[github 链接](https://github.com/magnars/multiple-cursors.el)。

切换到writable dired，选择要重命名的文件，Mx mc/edit-lines. 这应该创建多个游标，每个游标都有自己的杀戮历史。

# r - 在 R 中选择具有特定值的列

> ID：15881779
> 
> 赞同：1
> 
> 时间：2013-04-08T14:29:19.777
> 
> 标签：r

我在 R 中有以下问题：

我正在使用一个巨大的矩阵。一些列包含值“零”，这会在我进一步的工作中导致问题。

因此，我想识别至少包含一个“零”值的列。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:41:03.830

如果您有一个大矩阵，那么这可能比应用解决方案更快： `mat[,colSums(mat==0)<0.5]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:34:47.850

假设您的矩阵称为 x，

```
x = matrix(runif(300), nrow=10) 
```

获取至少有 1 个零的列的索引：

```
ix = apply(x, MARGIN=2, function(col){any(col==0)}) 
```

# asp.net-mvc - 来自 Active Directory 的应用程序中的活动用户

> ID：15881780
> 
> 赞同：0
> 
> 时间：2013-04-08T14:29:23.540
> 
> 标签：asp.net-mvc, active-directory

我想在我的应用程序仪表板上显示一个活跃用户列表。

我的所有用户都是员工，并通过他们的 Active Directory 凭据访问应用程序。

我已经使用 UserPrincipal 来获取当前用户的详细信息，但是可以为所有当前用户执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:21:45.830

您可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
   // define a "query-by-example" principal - here, we search for all "enabled" UserPrincipal 
   UserPrincipal qbeUser = new UserPrincipal(ctx);
   qbeUser.IsEnabled = true;

   // create your principal searcher passing in the QBE principal    
   PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

   // find all matches
   foreach(var found in srch.FindAll())
   {
       // do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
   }
} 
```

如果您还没有 - 绝对阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

# java - 如何生成范围内的随机数

> ID：15881783
> 
> 赞同：0
> 
> 时间：2013-04-08T14:29:32.283
> 
> 标签：java, math, random, floor, ceil

```
computerTotal = (int) Math.ceil(Math.random() * 21); 
```

有人可以告诉我如何获得 16 - 21 随机数当我尝试实现 Math.floor 函数时，我不断收到错误...如您所见，我不太擅长将函数放入函数中。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:34:41.553

如果是 Java，请使用`Random`Class。

```
Random r = new Random();
int myRand = 16+ r.nextInt(6); //16+[0-6) = 16-21 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:31:21.817

`min`要在（包括）和之间创建随机数`max`，您可以这样做：

```
Math.floor(Math.random() * (max - min + 1)) + min 
```

* * *

编辑：`JAVA`标签是在我建议之后才添加的；在它根本没有暗示特定语言的标签之前——因此在语言 X 中可能有更好/已经实现的方法是很有可能的。这是一种非常通用的方法。

# html - Excel VBA：使用 HTML DOM

> ID：15881790
> 
> 赞同：1
> 
> 时间：2013-04-08T14:29:46.587
> 
> 标签：html, excel, internet-explorer, vba, dom

我需要知道我可以用 Excel VBA 上的 HTML 做什么。例如，我知道我可以通过 id 找到元素 `ie.document.getElementByID()`。我将使用没有带有 id 的元素的 HTML 表格，这样它看起来就像`child->child->sibling->child.....`我想的那样。

任何人都可以向我展示部分代码，它将从此示例表中获取文本“hello”吗？第一个节点将通过他的 ID 找到。

```
...
<table id="something">
  <tr>
    <td></td><td></td>
  </tr>
  <tr>
    <td></td><td>hello</td>
  </tr>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T12:53:53.087

我现在正在看这种类型的东西......

我相信像下面这样的事情应该这样做：

```
ie.getelementbyid("something").getelementsbytagname("TD")(3).innertext 
```

这个怎么运作：

它在 HTML 文档中搜索 ID 等于“某物”的元素（如果大于 1，将进行第一次迭代，但您可以循环遍历多个）。然后它将获取表数据标签并转到文本所在的迭代 (3)（0 将等于第一个 TD）。

让我们知道这是否有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-07T13:07:26.343

许多 HTML 文档在通用表中都有名称，而不是 ID

我通常使用如下所示的某种形式；

```
Set HTML = IE.Document
Set SomethingID = HTML.GetElementByID("something").Children
For Each TR in SomethingID
   If TR.TagName = "td" Then
      If TR.Name = "myname" Then
         'code in here if you are looking for a name to the element
      ElseIf TR.Value = "myValue" Then
         'Code in here if you are looking for a specific value
      ElseIf TR.innerText = "mytext" Then
         'more code in here if you are looking for a specific inner text
      End If
   End If
Next TR 
```

# android - Lanuch Activity 位于 jar 文件中

> ID：15881791
> 
> 赞同：0
> 
> 时间：2013-04-08T14:29:54.100
> 
> 标签：android

我看到了许多与该主题相关的帖子，但仍然没有明确的答案，我希望我的活动被压缩为一个 jar 文件，而不是使用 startActivity 从另一个应用程序启动这个 jar 文件中的一个活动。我已经创建了一个 jar 并将其导入到应用程序的 bin 文件夹中（尝试在构建路径中添加 jar，但仍然无法启动任何活动）。它的问题位于 bin 文件夹中的两个清单文件中jar 文件的应用程序和另一个是否有解决方案，可以完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:34:39.647

只需将活动定义添加到应用程序的清单中。android 不会查看位于 jar 中的清单。
您使用并在 jar 中定义的所有活动、服务、广播接收器和权限都需要在您的清单中声明。

**编辑**
还请注意，一个更简单的解决方案是将jar中的代码制作为Android库项目，这样android将处理清单和您将使用的相关UI资源（布局，drawables等...... )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:54:52.723

您绝对必须在已编译的应用程序**清单**中定义活动。*其他清单对完成的应用程序根本*没有贡献。所有必需的库、电话功能和权限定义也是如此。我使用的典型库清单如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="org.meredrica.example.library"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="17"/>

</manifest> 
```

# php - 根据 PHP 条件显示不同的 div

> ID：15881792
> 
> 赞同：0
> 
> 时间：2013-04-08T14:30:01.880
> 
> 标签：php, wordpress, if-statement

我希望显示一个包含表单按钮的特定 div，如果自定义字段已完成，则显示 3 个链接，如果自定义字段未完成，则显示不带表单按钮和 3 个链接的不同 div。

我已经尝试查找如何正确使用这些命令，但我运气不佳。

如果自定义字段“add_to_cart”已完成，我希望出现此内容：

```
<div class="purchase">
<?php echo apply_filters('the_content', get_post_meta($post->ID, 'add_to_cart', true)); ?><?php endif;?>
<?php if (get_field('itunes_url') != ""): ?><a href="<?php echo get_field('itunes_url'); ?>">iTunes</a> |<?php endif;?>
<?php if (get_field('amazon_url') != ""): ?><a href="<?php echo get_field('amazon_url'); ?>">Amazon</a> |<?php endif;?>
<?php if (get_field('cd_baby_url') != ""): ?><a href="<?php echo get_field('cd_baby_url'); ?>">CD Baby</a></div>
<?php endif;?> 
```

如果自定义字段未完成，则会出现：

```
<div class="purchase2">
<?php if (get_field('itunes_url') != ""): ?><a href="<?php echo get_field('itunes_url'); ?>">iTunes</a> |<?php endif;?>
<?php if (get_field('amazon_url') != ""): ?><a href="<?php echo get_field('amazon_url'); ?>">Amazon</a> |<?php endif;?>
<?php if (get_field('cd_baby_url') != ""): ?><a href="<?php echo get_field('cd_baby_url'); ?>">CD Baby</a></div>
<?php endif;?> 
```

对于第一部分，我知道我需要使用：

```
<?php if (get_field('add_to_cart') != ""): ?> 
```

但这只是我坚持的 ELSE 部分。我不断收到解析错误，而且我对 PHP 真的不太了解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:53:04.107

例子 ：

```
<?php if (true) : ?>

// If part here 

<?php else : ?>

// Else part here

<?php endif; ?> 
```

这称为替代语法[http://www.php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)

```
<?php if (get_field('add_to_cart') != ""): ?>
<div class="purchase">
<?php echo apply_filters('the_content', get_post_meta($post->ID, 'add_to_cart', true)); ?>
<?php if (get_field('itunes_url') != ""): ?><a href="<?php echo get_field('itunes_url'); ?>">iTunes</a> |<?php endif;?>
<?php if (get_field('amazon_url') != ""): ?><a href="<?php echo get_field('amazon_url'); ?>">Amazon</a> |<?php endif;?>
<?php if (get_field('cd_baby_url') != ""): ?><a href="<?php echo get_field('cd_baby_url'); ?>">CD Baby</a><?php endif;?>
</div>

<?php else : ?>
<div class="purchase2">
<?php if (get_field('itunes_url') != ""): ?><a href="<?php echo get_field('itunes_url'); ?>">iTunes</a> |<?php endif;?>
<?php if (get_field('amazon_url') != ""): ?><a href="<?php echo get_field('amazon_url'); ?>">Amazon</a> |<?php endif;?>
<?php if (get_field('cd_baby_url') != ""): ?><a href="<?php echo get_field('cd_baby_url'); ?>">CD Baby</a><?php endif;?>
</div>
<?php endif; ?> 
```

# ios - 可以将委托变量分配给调用对象吗？

> ID：15881793
> 
> 赞同：0
> 
> 时间：2013-04-08T14:30:05.857
> 
> 标签：ios, uiview

大多数时候我这样做：

```
self.someVC = [myVC alloc] initWithFrame:frame];
self.someVC.delegate = self; 
```

有没有办法自动设置委托变量？

```
-(void)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
         self.delegate = [the object that is calling initWithFrame];
.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:32:00.887

不，这是不可能的。您将不得不检查调用堆栈或我不推荐的东西。没有标准的设施。

即使有可能，这也是一个坏主意。你应该像往常一样使用构造函数或属性注入，这样依赖关系就很清楚了，你不会混淆阅读你代码的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:35:58.857

添加一个将委托对象作为参数的自定义初始化程序。

像这样：

```
-(void)initWithFrame:(CGRect)frame delegate:(id)delegate
{
    self = [super initWithFrame:frame];
    if (self) {
         self.delegate = delegate;
.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:36:16.577

你总是可以提供一个新的 initWithFrame 方法：

```
- (id)initWithFrame:(CGRect) aFrame delegate:(id)aDelegate {
    self = [super initWithFrame:aFrame];
    if (self) {
        self.delegate = aDelegate;
    }
    return self;
} 
```

# c++ - 将来自不同客户端的数据同时写入单独的文件

> ID：15881794
> 
> 赞同：0
> 
> 时间：2013-04-08T14:30:12.957
> 
> 标签：c++, multithreading, client, thrift

我现在有一个 Thrift TSimpleServer，它将一次接受来自多个客户端的连接。一旦这些客户端连接，它们将发送要存储在服务器上的相应文件中的数据。现在我对节俭很陌生，所以我不确定 TSimpleServer 如何处理多个连接（还没有测试过），我什至不知道如何将接收到的数据同时保存在单独的文件中。我假设创建了一个单独的线程来处理每个客户端连接，但是如何为每个线程提供一个文件路径来使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:51:29.863

TSimpleServer 处理简单:-) 一次一个连接。您可能希望使用能够并行处理请求的 TThreadedServer 或 TThreadPoolServer。

你如何给每个线程一个文件取决于你的确切用例。例如，您可以考虑派生一个自己的线程工厂版本并将其注册到线程管理器。虽然下面的博文并未完全涵盖您的场景，但您应该从文末的代码中了解思路：

[http://mikecvet.wordpress.com/2010/05/13/apache-thrift-tutorial-the-sequel/](http://mikecvet.wordpress.com/2010/05/13/apache-thrift-tutorial-the-sequel/)

# mysql - mysql，为这种情况做一个分组

> ID：15881803
> 
> 赞同：0
> 
> 时间：2013-04-08T14:30:32.187
> 
> 标签：mysql

我有这个数据：

```
column1  |  column2  
____________________
15           2013
16           2012
15           2012 //repeated
15           2012 //repeated
...
... 
```

我想得到这个结果

```
15     2013
16     2013
15     2012  //not repeated 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:31:29.190

如何使用`DISTINCT`？由于两行在 column1 和 column2 上具有相同的值。

```
SELECT DISTINCT Col1, Col2
FROM   TableName 
```

# asp.net - 一个应用程序可以有多少个母版页？

> ID：15881809
> 
> 赞同：0
> 
> 时间：2013-04-08T14:30:41.437
> 
> 标签：asp.net, master-pages

我想知道一个应用程序可以有多少个母版页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:32:36.357

想多少就多少/需要多少就多少。这个没有限制，为什么会有..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:34:08.033

母版页的数量没有具体限制，因为您只需按文件名引用它们。

如果你有数千个，或者可能是数百万个，你可能会遇到一些空间限制......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:32:26.997

应用？无限。
页？一个（可以继承）。

# javascript - Require & Backbone 中的变量函数名

> ID：15881811
> 
> 赞同：1
> 
> 时间：2013-04-08T14:30:48.627
> 
> 标签：javascript, backbone.js, requirejs

我正在使用 Require.js 和 Backbone，并且有一个 Backbone 路由器模块，例如：

```
define([
  "views/global",
  "views/project/edit",
  "views/project/list",
], function(GlobalView, edit, list){
    return Backbone.Router.extend({

      routes: {
        "projects/:action/" : "projectsAction",
      },

      projectsAction : function(action) {
        /* .... lots of code cut out here .... */
        /* Create and render the action specified */
        this.subView = new eval(action+"()").render();

      }
  });
}); 
```

这是一个示例，我从 projectAction 中删除了很多设置代码。
我希望 URL:使用param =`/projects/list`运行 projectAction，然后调用 Require.js 函数中的模块。我目前正在使用，但我想知道是否有更好的方法？`action``list``list``eval()`

基本上，在 Javascript 中，你可以用另一个变量名来引用一个变量，而不使用`eval()`?

我想一个更短的版本是，你怎么做：

```
var name = "Math.random";
name();  // = 0.34343.... 
```

没有`eval()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:35:36.743

您不能访问具有字符串中名称的变量。但是您可以创建一个映射：

```
var actions = {
    edit: edit,
    list: list
}; 
```

然后您可以通过按键访问该功能：

```
projectsAction : function(action) {
    this.subView = new actions[action]().render();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:48:42.373

imo最好的方法是使用`require`requirejs的功能：

```
projectsAction : function(action) {
    /* .... lots of code cut out here .... */
    /* Create and render the action specified */
    var self = this;
    require('views/project/' + action, function(view) {
      (self.subView = new view).render();
    }
  } 
```

因为它还会减少样板文件的大量操作。

# tsql - 使用一些逻辑将表导出到平面文件

> ID：15881812
> 
> 赞同：1
> 
> 时间：2013-04-08T14:30:52.440
> 
> 标签：tsql, export, flat-file, bcp

我每天都在编写脚本来将一些表导出到平面文件。我正在查看 BCP 实用程序，但我不确定它是否具有我真正需要的功能。

1.  例如，我需要乱序输出字段。即MSSQL数据库中的第15个字段应该是平面文件中的第2个字段，etc.c

2.  更重要的是，一些字段需要更改。例如，如果某个字段为空或包含一些特殊值，我需要将它们替换为代码。

BCP 是解决此问题的正确工具吗？我的直觉告诉我改用 Perl 来做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:51:34.927

您可以编写一个存储过程并在那里进行所有数据转换。然后将此存储过程提供给**bcp**。

它肯定会比 Perl 快。

SSIS 也很快；如果转换非常复杂，可能是一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:17:06.920

您可以使用查询直接使用 BCP 对列进行排序和格式化

[bcp 实用程序](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

"query"
是返回结果集的 Transact-SQL 查询。

例子：

```
bcp "SELECT Name FROM AdventureWorks.Sales.Currency" queryout Currency.Name.dat -T -c 
```

# javascript - addEventListener() 不适用于 Firefox 中的图像

> ID：15881815
> 
> 赞同：3
> 
> 时间：2013-04-08T14:31:04.490
> 
> 标签：javascript, image, firefox

我正在我的 javascript 代码中创建一个 Image 对象。我想将处理程序附加到此图像以进行“加载”事件。我正在尝试使用以下代码执行此操作，但从未调用处理程序方法。

```
var img = new Image();
img.src='some url';
img.addEventListener('load', function(){
      //do something
}, false); 
```

我做错了什么还是有其他方法可以做到这一点？我已经尝试过 img.onload 但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:32:54.077

在为属性分配值*之前*添加事件侦听器。`src`如果图像已经在浏览器的缓存中，`load`事件可能会在`src`属性设置后立即发生。

此外，请确保将对`Image`对象的引用保存到在下载图像之前不会自动销毁的变量。例如，如果您`Image`在函数内实例化一个对象并将对它的引用保存在函数局部变量中，则该对象可能会在函数执行完成后立即自动销毁。为了防止它，将对象的引用保存在全局变量或全局对象的属性中，如下所示：

```
window.example = {
    _images: []
};

example.preloadImage = function(url, callback) {
    var image = new Image;
    image.onload = callback;
    image.src    = url;

    // This prevents the image from destroying after the function is executed.
    example._images.push(image);
};

example.preloadImage('some-image.jpg', function() {
    alert('Image is loaded.');
}); 
```

# python - numpy 将不同类型的数组保存到文本文件中

> ID：15881817
> 
> 赞同：1
> 
> 时间：2013-04-08T14:31:08.317
> 
> 标签：python, file-io, numpy, newline

假设我有以下 numpy 结构化数组：

```
>>> a = numpy.array((1, 2.0, 'buckle_my_shoe'),dtype=('i4,f8,a14')) 
array((1, 2.0, 'buckle_my_shoe'), 
  dtype=[('f0', '<i4'), ('f1', '<f8'), ('f2', 'S14')]) 
```

我想**将它保存到文本文件中的单个空格或制表符分隔的行中**。如果数组都是同一类型，我可以使用`numpy.savetxt('myfile.dat,myarray,newline=" ")`. 但是，这似乎不像混合数据类型/结构化数组，例如：

```
file('myfile.dat', 'a')
numpy.savetxt('myfile.dat',a,newline=" ") 
```

给出这个错误：

```
IndexError: tuple index out of range 
```

任何人都可以推荐一种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:58:31.537

**编辑**：无论出于何种原因，我似乎都无法独自回答这个问题，所以这里有一个更简洁的版本，它不会`csv`不必要地使用该模块。作为记录，@askewchan 的答案仍然更好！

```
a = numpy.array([(1, 2.0, 'buckle_my_shoe'),
                 (3,4.0,'lock_the_door')],dtype=('i4,f8,a14'))
with open('test.txt','w') as f:
     f.write(' '.join([str(item) for sublist in a for item in sublist]))
print open('test.txt','r').read() 
```

输出：

```
1 2.0 buckle_my_shoe 3 4.0 lock_the_door 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:53:40.823

如果你有一个像你的例子一样的零维数组，那么你可以这样做：

```
b = np.array((1, 2.0, 'buckle_my_shoe'), 
         dtype=[('f0', '<i4'), ('f1', '<f8'), ('f2', 'S14')])

with open('myfile.dat','w') as f:
    for el in b[()]:
        f.write(str(el)+' ') # or `f.write(repr(el)+' ') to keep the quote marks 
```

这通过使用以下方式访问 0d 数组的元素来工作`[()]`：

```
>>> b.ndim
0

>>> b[0]
IndexError: 0-d arrays cannot be indexed

>>> b[()]
(1, 2.0, 'buckle_my_shoe') 
```

* * *

如果您经常使用零维度的 numpy 数组，为了获得复杂的 dtype，我可能会建议使用[`NamedTuple`from`collections`](http://docs.python.org/2/library/collections.html#collections.namedtuple)。

```
>>> import collections
>>> A = collections.namedtuple('A', ['id', 'val', 'phrase'])
>>> a = A(1, 2.0, 'buckle_my_shoe')

>>> a
A(id=1, val=2.0, phrase='buckle_my_shoe')
>>> a.id
1
>>> a.val
2.0
>>> a.phrase
'buckle_my_shoe'

with open('myfile.dat','w') as f:
    for el in a:    
        f.write(repr(el)+' ') 
```

* * *

如果数组有多个元素：

```
a = np.array([(1, 2.0, 'buckle_my_shoe'),
              (3, 4.0, 'lock_the_door')],
        dtype=('i4, f8, a14')) 
```

我不确定你希望你的文件是什么样子。如果你想要空格分隔的元组，这是我认为的最好方法：

```
with open('myfile.dat','w') as f:
    for row in a:
        f.write(repr(row)+' ') 
```

这会产生如下文件：

```
(1, 2.0, 'buckle_my_shoe') (3, 4.0, 'lock_the_door') 
```

* * *

也许你不想有逗号或括号，在这种情况下你可以这样做：

```
with open('myfile.dat','w') as f:
    for row in a:
        for el in row:
            f.write(str(el)+' ') 
```

这给出了这个文件：

```
1 2.0 buckle_my_shoe 3 4.0 lock_the_door 
```

* * *

用于`repr`保持字符串周围的引号

```
with open('myfile.dat','w') as f:
    for row in a:
        for el in row:
            f.write(repr(el)+' ') 
```

这给出了这个文件：

```
1 2.0 'buckle_my_shoe' 3 4.0 'lock_the_door' 
```

* * *

奖励：如果您的 dtype 有字段名称，您也可以打印这些名称：

```
a.dtype.names = "index value phrase".split()
a.dtype
#dtype([('index', '<i4'), ('value', '<f8'), ('phrase', 'S14')])

with open('myfile.dat','w') as f:
    for name in a.dtype.names:
        f.write(name + ' ') # or write(repr(name)) to keep the quote marks
    for row in a:
        for el in row:
            f.write(repr(el)+' ') 
```

* * *

请注意，如果您复制这些文件，请注意我`'w'`没有使用`'a'`，这样我就可以在我的测试用例中覆盖每个文件。

# sql - ruby 按最后一个值对混合类的多维数组进行排序，一个字符串

> ID：15881822
> 
> 赞同：-3
> 
> 时间：2013-04-08T14:31:25.070
> 
> 标签：sql, ruby, data-management

所以我从几个数据库中获取了一堆信息来获取一组值，它们的名称和顺序是：

```
['type', 'baseid', 'lotid', 'split', 'sub', 'sequence', 'resourceid', 'user1', 'user2', 'part', 'department'] 
```

所以我有一个数组，我把它放到一个表格视图中，我需要按部门值重新排列数组，而不改变内部数组的任何顺序，这样在表中所有程序集都在一起，所有 GMBEAD BLAST 都是一起等...

具有值的数组示例如下所示：

```
[[EDM, M, 887013393, C, 0, 2, 50, GE_1_INS], [QUALITY, M, 887013393, C, 0, 2, 60, GMDEBURR], [FINISH, M, 887013393, C, 0, 2, 70, GMBEAD BLAST]] 
```

是的，我尝试了一些`.sort`或`.sort_by`方法，但是使用数组中的数字，当我输入排序方法时，它甚至不会让我运行程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:38:26.897

你想要这样的东西：

```
sorted_array = your_array.sort_by {|inner_array| inner_array.last } 
```

您遇到的错误听起来像是您正在尝试对内部数组进行排序，但这是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:36:17.310

“它甚至不允许我运行程序”是什么意思？假设部门总是最后一列，一个简单的 my_array.sort{ |a,b| a.last <=> b.last } 应该可以解决问题。

# javascript - 如何在 VB.net 中替换 td 文本

> ID：15881823
> 
> 赞同：0
> 
> 时间：2013-04-08T14:31:24.900
> 
> 标签：javascript, jquery, asp.net, vb.net

我有这个代码

```
<asp:Panel ID="pnlWindHailExclusionDirectDamage" Visible="False" runat="server">   
   <tr>
    <td>
      Wind/Hail Exclusion - Direct Damage:
    </td> 
```

如何在某些给定条件下操作 td 标签下的文本？我在问之前查了一下，但找不到我的问题的明确答案。在给定条件下，我希望文本为 Wind/Hail Exclusion: 而不是 Wind/Hail Exclusion - Direct Damage:。帮助表示赞赏。PS：我查看了一些 javascript 示例，但无法执行，因为我以前从未这样做过。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:41:29.927

I made a quick fiddle demonstrating the concept: [http://jsfiddle.net/eBJSe/](http://jsfiddle.net/eBJSe/) -- I used jQuery since you tagged it in the question.

The code:

```
$("#test").click(function() {
    $("tr td:first-child").text("Windo/Hail Exclusion:");
}); 
```

Since you didn't post the complete table structure, I assumed this was the first td (hence the `first-child` selector). You can modify this to fit your needs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:38:40.507

要么使用文档对象模型（一种在 xml 文档中移动的方法）

或者你可以使用肮脏的方式和

1.  按 vbCrLf 分割文本（每一项为一行）
2.  检查是否有一条线（修剪）
3.  （在这种情况下）按照您的计划替换下一行

# java - Java 错误，java.lang.NoClassDefFoundError：Hadoop 中的 org/myorg/WordCount

> ID：15881827
> 
> 赞同：1
> 
> 时间：2013-04-08T14:31:28.537
> 
> 标签：java, hadoop

我对 Hadoop 很陌生。我遵循了有关如何在 hadoop 中创建字数统计程序的基本教程。一切都很好。我尝试创建自己的 map reduce，并将其放在单独的 jar 文件中。当我尝试运行该程序时，它给了我这个错误：

```
shean@ubuntu-PC:~/hadoop/bin$ hadoop jar ../weather.jar weather.Weather /user/hadoop/weather_log_sample.txt /user/hadoop/output
Warning: $HADOOP_HOME is deprecated.

Exception in thread "main" java.lang.NoClassDefFoundError: org/myorg/WordCount
    at weather.Weather.main(Weather.java:45)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.ClassNotFoundException: org.myorg.WordCount
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 6 more 
```

但问题是，它正在寻找 WordCount 类......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:36:49.567

如果我没记错的话，你错过了罐子 `wordcount.jar`。请将它添加到`build path.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T08:50:54.750

我的建议：你把“包”路径先去掉。这使得不报告 NoClassDefFoundError 错误更容易。javac 编译时间：javac-classpath "$HADOOP_HOME/hadoop-core-1.2.0.jar: $HADOOP_HOME/lib/commons-cli-1.2.jar"-d。/ 天气

ltianmin@gmail.com

# ruby-on-rails - 如何在 Ruby on Rails 中发送 ajax 请求？

> ID：15881835
> 
> 赞同：1
> 
> 时间：2013-04-08T14:31:51.930
> 
> 标签：ruby-on-rails, ruby, testing, rspec, capybara

我在 javascript homepage.js 文件中发送 ajax 请求

```
function GotoHomePage() {
var URL = 'homepage/1';
$.ajax({
    url : URL,
    success : function() {
    },
    error:function(){
    }
});
} 
```

控制器代码 products_controller.rb 文件：

```
def homepage
@val="here is query"
end 
```

路线 routes.rb 文件：

```
match "homepage/1" => 'products#homepage' 
```

Rspec products_controller_spec.rb 文件：

```
describe ProductDetailsController do
 render_views
   describe '#homepage' do
   before { xhr :get, 'homepage/1' }
   it { response.status.should == 200 }
   end
 end 
```

但我收到错误

```
before { xhr :get, 'homepage/1' }
 ActionController::RoutingError:
   No route matches {:controller=>"products", :action=>"homepage/1"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:34:37.193

尝试更改路线

```
match "homepage/1" => 'products#homepage' 
```

至

```
match "homepage/:id" => 'products#homepage' 
```

然后在控制器中你可以获取 params[:id]

编辑：

也许将您的测试更改为：

```
describe 'homepage' do
  it 'should be successful' do
    get 'homepage',:id=>1
    response.should be_success
  end
end 
```

# ios - 单元测试中销毁的变量

> ID：15881836
> 
> 赞同：1
> 
> 时间：2013-04-08T14:31:51.637
> 
> 标签：ios, sentestingkit

全部：

我有以下单元测试类（显示的实现文件）：

```
@implementation SampleTests {
    A* c;
    NSString* token;
}

- (void)setUp
{
    [super setUp];

    // Set-up code here.
    c = [[A alloc] init];
}

- (void)tearDown
{
    // Tear-down code here.

    [super tearDown];
}

- (void)testA
{
    token = @"sample";
}

-(void)testB
{
    [c method:token]; // <-- fails because token is nil, but c has a correct value. Why!
}

@end 
```

当我运行测试时，testB 失败，因为 token 为 nil，但是 c 没问题，那为什么它`token`被破坏了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:40:04.773

每次运行单元测试时，都会独立调用每个测试用例。在每个测试用例运行之前，调用 setUp 方法，之后调用 tearDown 方法。

所以如果你想在测试之间共享令牌，你应该添加

```
token = @"sample"; // or smth else 
```

到您的设置方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:04:45.603

据我所知，当前实现按字母顺序运行测试方法，因此您的示例应该可以正常运行。

通常，如果我想先测试某些东西，我会命名方法`test1_criticalFeature`等`test2_dependentFeatures`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:44:16.977

无法保证测试方法的执行顺序，因此可能会在它们并行`testB`运行之前`testA`甚至将来运行。

# python - python中的分段错误

> ID：15881840
> 
> 赞同：0
> 
> 时间：2013-04-08T14:31:56.950
> 
> 标签：python

如何在 python 2.7.3 中运行以下程序

```
import sys
sys.setrecursionlimit(2 ** 20)
def f(x):
    if (x==0): return 0
    else: return f(x-1)+1
print f(200000) 
```

此代码在 Ubuntu 中收到分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:35:27.260

Python 解释器的堆栈空间不足。像在相同情况下的任何其他进程一样，它被操作系统杀死。

您可以尝试增加操作系统堆栈大小限制 ( `ulimit -c`)。

更好的方法可能是重写您的代码，以便它不需要这么深的递归（您的特定示例可以简单地转换为迭代）。

# json.net - 如何使用 json.net 取消实现未定义和嵌套的 Hashtable 结构

> ID：15881841
> 
> 赞同：1
> 
> 时间：2013-04-08T14:32:00.703
> 
> 标签：json.net

如何使用 json.net 取消实现未定义和嵌套的 Hashtable**结构**？例如：@"{"a" : {"b" : 1}}"

```
Hashtable data = JsonConvert.DeserializeObject<Hashtable>(json_str) 
```

在 data["a"] 处返回*Newtonsoft.Json.Linq.JObject ，而不是**Hashtable*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:55:00.417

如果事先不知道 JSON 的结构，并且 JSON 不包含任何类型元数据来帮助 Json.Net 解决问题，那么 Json.Net 就别无选择，只能使用 JToken（JObject、JProperty、JArray、JValue等）将事物反序列化为。这就是它的设计方式。

如果您更喜欢使用 Hashtables，则应该可以在反序列化后将 JToken 对象图转换为嵌套的 Hashtable 结构，但我不确定您这样做会获得多少收益。您最好只学习如何直接从 JToken 中读取数据。（无论如何，您都必须这样做才能进行转换。）

# windows - Windows 消息权限

> ID：15881844
> 
> 赞同：0
> 
> 时间：2013-04-08T14:32:05.917
> 
> 标签：windows, delphi, privileges, windows-messages

什么是 Windows 消息权限？

在应用程序 1 中，我向应用程序 2 发布了一条消息：

```
PostMessage(handle, WM_LOCAL, 0, Integer(Lst)); 
```

在应用程序 2 中，消息实现：

```
var l: TStringList;
begin    
  ShowMessage('got 1');
  l := TStringList(Message.LParam);
  ShowMessage('got 2');
  Memo1.Clear;
  ShowMessage('got 3');

  if Memo1 = nil then
    ShowMessage('nil');

  //HERE : Access violation.
  //Memo1.Text := l.Text;
  //ShowMessage('got 4');

  Memo1.Lines.Add('good!');
  ShowMessage('got 5');

  l.Free;      
  ShowMessage('got 6');

  //Access violation Too..
  Memo1.Repaint;
  ShowMessage('got 7'); 
```

为什么会发生这种情况？

我既不能重绘备忘录，也不能访问文本属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:39:12.613

您不能在应用程序之间共享对象。甚至指针也会指向目的地的地址空间。
也许[WM_COPYDATA](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649011%28v=vs.85%29.aspx)将满足您复制数据的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T14:41:56.787

拥有特权的不是消息，而是进程。该功能称为[用户界面特权隔离](http://en.wikipedia.org/wiki/User_Interface_Privilege_Isolation)(UIPI)。此功能阻止较低完整性级别的进程将消息发送到较高完整性级别的进程。

但这不是你的问题。您的问题是每个进程都有一个单独的地址空间。因此，来自一个进程的指针在另一个进程中没有任何意义。这就是您遇到访问冲突的原因。您收到的指针指向不同进程中的内存，因此毫无意义。

您需要使用进程间通信 (IPC) 机制。例如，发送`WM_COPYDATA`消息，或者命名管道，或者套接字等等。

# php - php array_splice() 空数组

> ID：15881846
> 
> 赞同：2
> 
> 时间：2013-04-08T14:32:12.497
> 
> 标签：php, arrays, array-splice

我正在尝试将值添加到给定索引处的数组中，但到目前为止没有任何运气。我有以下内容：

```
$array = array('first', 'second', 'third');
array_splice($array, 0, 0, array('another')); 
```

这导致空数组。

我还尝试了不同的偏移量，例如 1 或 2 - 结果相同。

有人可以解释一下我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T14:35:48.993

`array_splice()`通过引用修改它的第一个参数。返回的空数组将包含操作中删除的元素（如果有的话）。由于您没有删除任何内容，因此它是空的。您的原始变量`$array`已按预期进行了修改。

```
$array = array('first', 'second', 'third');
array_splice($array, 0, 0, array('another'));
var_dump($array); 
```

[http://codepad.org/VI1WoW7M](http://codepad.org/VI1WoW7M)

# exception - 使用 moxy 在 JAXB 注释类中部署扩展 HashMap 的类时出现 MalformedParameterizedTypeException

> ID：15881848
> 
> 赞同：2
> 
> 时间：2013-04-08T14:32:13.440
> 
> 标签：exception, jaxb, moxy

我正在努力从 JAXB-RI 迁移到 moxy。

我已经迁移了大部分注释（我在 RI 和 Moxy 之间的行为上遇到了一些显着差异），现在我正在与一个奇怪的异常作斗争。我已将其缩小到在现有应用程序中运行的这个简单案例。

```
@XmlRootElement(name="StringMap")
public class StringMap extends StringMapBase  
{
}

@XmlTransient
class StringMapBase extends HashMap<String,String>
{

} 
```

StringMap 是我试图序列化的类，这无法在 glassfish 中部署，只要我更改 StringMapBase 使其不扩展 HashMap 部署就可以了。如果 StringMapBase 扩展 ArrayList 我会得到同样的错误。

moxy 版本是：- 实施版本：2.3.2.v20111125-r10461

glassfish 版本是：- 3.1.2.2-5 这是使用 3.1-43 中的 glassfish 升级工具升级的，而不是全新安装（全新安装是不可能的，因为我必须复制我们的客户将经历的过程）

在将其作为针对 moxy 的错误之前，我还有什么明显的可以尝试的吗？在过去的几天里，我一直在用头撞墙才能走到这一步，但如果我不能让它工作，我必须解开我的所有更改并返回 JAXB-RI！

提前谢谢了。欧文

===== 异常

```
[#|2013-04-08T11:58:30.805+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=24;_ThreadName=Thread-2;|javax.xml.bind.JAXBException
 - with linked exception:
[java.lang.reflect.MalformedParameterizedTypeException]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:832)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:143)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:142)
    at com.sun.xml.ws.db.toplink.JAXBContextFactory.newContext(JAXBContextFactory.java:180)
    at com.sun.xml.ws.spi.db.BindingContextFactory.create(BindingContextFactory.java:191)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:213)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:186)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:186)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:111)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:318)
    at com.sun.xml.ws.db.DatabindingImpl.<init>(DatabindingImpl.java:99)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:74)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:58)
    at com.sun.xml.ws.db.DatabindingFactoryImpl.createRuntime(DatabindingFactoryImpl.java:130)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:433)
    at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:268)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:145)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:569)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:552)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:623)
    at org.glassfish.webservices.WSServletContextListener.registerEndpoint(WSServletContextListener.java:282)
    at org.glassfish.webservices.WSServletContextListener.contextInitialized(WSServletContextListener.java:102)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.MalformedParameterizedTypeException
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.validateConstructorArguments(ParameterizedTypeImpl.java:42)
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.<init>(ParameterizedTypeImpl.java:35)
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.make(ParameterizedTypeImpl.java:77)
    at sun.reflect.generics.factory.CoreReflectionFactory.makeParameterizedType(CoreReflectionFactory.java:86)
    at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:122)
    at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
    at sun.reflect.generics.repository.FieldRepository.getGenericType(FieldRepository.java:67)
    at java.lang.reflect.Field.getGenericType(Field.java:223)
    at org.eclipse.persistence.jaxb.javamodel.reflection.JavaFieldImpl.getResolvedType(JavaFieldImpl.java:96)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getFieldPropertiesForClass(AnnotationsProcessor.java:1654)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getFieldPropertiesForClass(AnnotationsProcessor.java:1637)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getPublicMemberPropertiesForClass(AnnotationsProcessor.java:2662)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getPropertiesForClass(AnnotationsProcessor.java:1629)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.buildTypeInfo(AnnotationsProcessor.java:683)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.postBuildTypeInfo(AnnotationsProcessor.java:597)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.processClassesAndProperties(AnnotationsProcessor.java:234)
    at org.eclipse.persistence.jaxb.compiler.Generator.<init>(Generator.java:147)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:829)
    ... 64 more
|#]

[#|2013-04-08T11:58:30.805+0100|WARNING|glassfish3.1.2|javax.enterprise.webservices.org.glassfish.webservices|_ThreadID=24;_ThreadName=Thread-2;|Deployment failed
com.sun.xml.ws.spi.db.DatabindingException
    at com.sun.xml.ws.db.toplink.JAXBContextFactory.newContext(JAXBContextFactory.java:185)
    at com.sun.xml.ws.spi.db.BindingContextFactory.create(BindingContextFactory.java:191)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:213)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:186)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:186)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:111)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:318)
    at com.sun.xml.ws.db.DatabindingImpl.<init>(DatabindingImpl.java:99)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:74)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:58)
    at com.sun.xml.ws.db.DatabindingFactoryImpl.createRuntime(DatabindingFactoryImpl.java:130)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:433)
    at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:268)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:145)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:569)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:552)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:623)
    at org.glassfish.webservices.WSServletContextListener.registerEndpoint(WSServletContextListener.java:282)
    at org.glassfish.webservices.WSServletContextListener.contextInitialized(WSServletContextListener.java:102)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.bind.JAXBException
 - with linked exception:
[java.lang.reflect.MalformedParameterizedTypeException]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:832)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:143)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:142)
    at com.sun.xml.ws.db.toplink.JAXBContextFactory.newContext(JAXBContextFactory.java:180)
    ... 61 more
Caused by: java.lang.reflect.MalformedParameterizedTypeException
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.validateConstructorArguments(ParameterizedTypeImpl.java:42)
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.<init>(ParameterizedTypeImpl.java:35)
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.make(ParameterizedTypeImpl.java:77)
    at sun.reflect.generics.factory.CoreReflectionFactory.makeParameterizedType(CoreReflectionFactory.java:86)
    at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:122)
    at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
    at sun.reflect.generics.repository.FieldRepository.getGenericType(FieldRepository.java:67)
    at java.lang.reflect.Field.getGenericType(Field.java:223)
    at org.eclipse.persistence.jaxb.javamodel.reflection.JavaFieldImpl.getResolvedType(JavaFieldImpl.java:96)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getFieldPropertiesForClass(AnnotationsProcessor.java:1654)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getFieldPropertiesForClass(AnnotationsProcessor.java:1637)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getPublicMemberPropertiesForClass(AnnotationsProcessor.java:2662)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.getPropertiesForClass(AnnotationsProcessor.java:1629)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.buildTypeInfo(AnnotationsProcessor.java:683)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.postBuildTypeInfo(AnnotationsProcessor.java:597)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.processClassesAndProperties(AnnotationsProcessor.java:234)
    at org.eclipse.persistence.jaxb.compiler.Generator.<init>(Generator.java:147)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:829)
    ... 64 more
|#]

[#|2013-04-08T11:58:31.148+0100|SEVERE|glassfish3.1.2|org.apache.catalina.core.StandardContext|_ThreadID=24;_ThreadName=Thread-2;|PWC1306: Startup of context /WebServices failed due to previous errors|#] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:12:22.993

我已经重现了您所看到的问题。您可以使用以下错误来跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/405170](http://bugs.eclipse.org/405170)

* * *

**解决方法**

由于您`@XmlTransient`在超类上使用（请参阅： [http](http://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html) ://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html ），如果没有您尝试继承的映射属性，那么您可以使用 MOXy 的外部映射文件来覆盖类的超类型`StringMap`。

**oxm.xml**

下面是一个[重写](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)超类`StringMap`.

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="bug405170">
    <java-types>
        <java-type name="StringMap" super-type="java.lang.Object"/>
     </java-types>
</xml-bindings> 
```

**演示**

```
package bug405170;

import java.util.*;
import java.util.Map;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, String> properties = new HashMap<String, String>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "bug405170/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {StringMap.class}, properties);

        StringMap stringMap = new StringMap();
        stringMap.put("a", "A");
        stringMap.put("b", "B");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(stringMap, System.out);
    }

} 
```

* * *

**兼容性**

> 我已经迁移了大部分注释（我在 RI 和 Moxy 之间的行为上遇到了一些显着差异）

听到您必须更改任何注释，我感到非常惊讶。您可以针对遇到的任何问题打开错误吗？

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

# ruby-on-rails-3 - omn iauth google_oauth2 个人资料图片不在 authhash 中

> ID：15881851
> 
> 赞同：1
> 
> 时间：2013-04-08T14:32:20.260
> 
> 标签：ruby-on-rails-3, omniauth, user-profile

这是在omniauth.rb 中编写的一个初始化程序。

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2,ID,SECRET,
  {
  :approval_prompt => '',
  :scope => 'http://gdata.youtube.com,https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/userinfo.profile'
  } 
```

## **返回的身份验证哈希在“信息”中没有 IMAGE 元素，为什么?????????**

在下面的 HASH 中用 x 替换了原始信息

```
*********************
--- !ruby/hash:OmniAuth::AuthHash
provider: google_oauth2
uid: 'xxxxxxxxxxxxxxxxxxxx' 
info: !ruby/hash:OmniAuth::AuthHash::InfoHash
  name: xxxx xxx 
  email: xxxxxxxxxx 
  first_name: xxxxxx
  last_name: xxxxxxx 
credentials: !ruby/hash:Hashie::Mash
  token: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
  expires_at: 1365434778
  expires: true
extra: !ruby/hash:Hashie::Mash
  raw_info: !ruby/hash:Hashie::Mash
    id: 'xxxxxxxxxxxxxxxxxxxxxxxxxxx' 
    email: xxxxxxxxxx.xxx@gmail.com 
    verified_email: true
    name: xxxx xxxx 
    given_name: xxx 
    family_name: xxx 
    link: https://plus.google.com/xxxxxxxxxxx 
    gender: male
    locale: en
********************* 
```

**我想要个人资料图片，我做错了什么？**

也试过，

{:scope => 'userinfo.email,userinfo.profile'}

不工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:44:47.253

不确定该范围在做什么，但我刚刚解决了为自己获取谷歌信息的问题。该信息是发送到 Rails 的实际参数，还是保存的用户哈希？

如果它不是您在登录时获得的实际参数，您可以使用：

```
# sessions_controller.rb
raise env["omniauth.auth"].to_yaml 
```

这将向您展示谷歌发送给您的所有内容。

如果是用户并且如果您像我一样关注[Railscasts](http://railscasts.com/episodes/241-simple-omniauth-revised?view=asciicast)，请检查您是否已创建一个字段来保存图片，并且您已设置该字段以保存哈希中的信息。我这样做了：

```
# sessions_controller.rb
def create
  user = User.from_omniauth(env["omniauth.auth"])
  user.image = env["omniauth.auth"]['info']['image']
  user.save
  session[:user_id] = user.id
  redirect_to root_url, :notice => "Signed in!"
end 
```

如果这不是你需要的，你能更具体吗？

# sed - sed 替换 XML 文件中的文本

> ID：15881852
> 
> 赞同：0
> 
> 时间：2013-04-08T14:32:20.933
> 
> 标签：sed

我有一个巨大的 XML 文件，其中包含如下数据：

```
<amount quantity="1">12.00</amount> 
```

如何使用 sed 将 12.00 替换为其他版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:35:21.807

您的问题中没有足够的信息，但是`12.00`用`24.00`您可以做的替换所有值：

```
$ sed 's/>12\.00</>24.00</g' file.xml 
```

如果您对结果感到满意，您可以使用以下`-i`选项将它们存储回来：

```
$ sed -i 's/>12\.00</>24.00</g' file.xml 
```

一个更强大的匹配将是：

```
$ sed -r 's_(<amount quantity="[0-9]+">)12.00(</amount>)_\124.00\2_g' file.xml 
```

但是您应该真正正确地解析 XML，而不是强制正则表达式做一些它不是为之设计的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:47:51.680

脚本.sh：

```
#!/bin/bash
xml="<amount quantity="1">12.00</amount>"
newxml=`echo $xml | sed -n "s/\(<amount[^>]*>\)\([^<]*\)\(<\/amount>\)/\113.37\3/gp"`
echo "$newxml" 
```

结果：

```
$ ./script.sh 
<amount quantity=1>13.37</amount> 
```

# node.js - 从基于 _id 的另一个集合中获取信息并合并 - MongoDB

> ID：15881854
> 
> 赞同：2
> 
> 时间：2013-04-08T14:32:27.863
> 
> 标签：node.js, mongodb, aggregation-framework

我有两个系列。让我们呼叫一个`baskets`和另一个`fruits`。

在`baskets`我们有以下文件：

```
[{
    basket_name: "John's Basket",
    items_in_basket: [
        {
            fruit_id: 1,
            comment: "Delicious!"
        },
        {
            fruit_id: 2,
            comment: "I did not like this"
        }
    ]
}] 
```

我们有`fruits`以下文件：

```
[{
    _id: 1,
    fruit_name: "Strawberry",
    color: "Red"
},
{
    _id: 2,
    fruit_name: "Watermelon",
    color: "Green"
}] 
```

我如何获得每种水果的信息`John's Basket`？

结果应如下所示：

```
[{
    fruit_id: 1,
    comment: "Delicious!",
    fruit_name: "Strawberry",
    color: "Red"
},
{
    fruit_id: 2,
    comment: "I did not like this",
    fruit_name: "Watermelon",
    color: "Green"  
}] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:49:46.683

MongoDB 中没有“加入”。您可以：

*   考虑使用 MapReduce 函数创建一个包含合并数据的新结构
*   `fruit`编写按需获取每个实例所需的代码，并将其与`basket`文档合并到您的客户端代码中。
*   对数据进行非规范化并在文档中包含每个水果的详细信息`basket`。这带来了它自己的一系列问题，因为数据是重复的，`fruit`然后需要对集合中的每次使用进行更新。

两者都有其优点和缺点。

您可能会发现此[Q/A](https://stackoverflow.com/questions/4067197/mongodb-and-joins)以及[此](http://docs.mongodb.org/manual/core/data-modeling/)MongoDB 文档很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-10T00:20:45.987

这不再是真的。

从 3.2 版本开始，MongoDB 添加了 $lookup 命令。

[https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)

```
db.orders.insert([
   { "_id" : 1, "item" : "almonds", "price" : 12, "quantity" : 2 },
   { "_id" : 2, "item" : "pecans", "price" : 20, "quantity" : 1 },
   { "_id" : 3  }
])

db.inventory.insert([
   { "_id" : 1, "sku" : "almonds", description: "product 1", "instock" : 120 },
   { "_id" : 2, "sku" : "bread", description: "product 2", "instock" : 80 },
   { "_id" : 3, "sku" : "cashews", description: "product 3", "instock" : 60 },
   { "_id" : 4, "sku" : "pecans", description: "product 4", "instock" : 70 },
   { "_id" : 5, "sku" : null, description: "Incomplete" },
   { "_id" : 6 }
])

db.orders.aggregate([
   {
     $lookup:
       {
         from: "inventory",
         localField: "item",
         foreignField: "sku",
         as: "inventory_docs"
       }
  }
]) 
```

返回：

```
{
   "_id" : 1,
   "item" : "almonds",
   "price" : 12,
   "quantity" : 2,
   "inventory_docs" : [
      { "_id" : 1, "sku" : "almonds", "description" : "product 1", "instock" : 120 }
   ]
}
{
   "_id" : 2,
   "item" : "pecans",
   "price" : 20,
   "quantity" : 1,
   "inventory_docs" : [
      { "_id" : 4, "sku" : "pecans", "description" : "product 4", "instock" : 70 }
   ]
}
{
   "_id" : 3,
   "inventory_docs" : [
      { "_id" : 5, "sku" : null, "description" : "Incomplete" },
      { "_id" : 6 }
   ]
} 
```

# file-io - Fortran 将文件读入数组 - 转置维度

> ID：15881858
> 
> 赞同：9
> 
> 时间：2013-04-08T14:32:34.777
> 
> 标签：file-io, io, fortran

我正在尝试在 Fortran 程序中将文件读入内存。该文件有`N`行，每行有两个值。这是我目前所做的（它编译并运行，但给了我不正确的输出）：

```
program readfromfile
  implicit none

    integer :: N, i, lines_in_file
    real*8, allocatable :: cs(:,:)

    N = lines_in_file('datafile.txt') ! a function I wrote, which works correctly

    allocate(cs(N,2))

    open(15, 'datafile.txt', status='old')
    read(15,*) cs

    do i=1,N
        print *, cs(i,1), cs(i,2)
    enddo

end 
```

我希望得到的是加载到变量中的数据`cs`，第一个索引为行，第二个索引为列，但是当上面的代码运行时，它首先打印一个带有两个“左列”值的行，然后是一个带有两个“右列”值，然后是接下来两个“左列值”的行，依此类推。

这是对情况的更直观的描述：

```
In my data file:       Desired output:        Actual output:
A1   B1                A1   B1                A1   A2
A2   B2                A2   B2                B1   B2
A3   B3                A3   B3                A3   A4
A4   B4                A4   B4                B3   B4 
```

我尝试在分配时切换索引`cs`，但结果相同（或段错误，取决于我是否也在 print 语句中切换索引）。我也尝试逐行读取值，但由于数据文件的格式不规则（逗号分隔，而不是列对齐），我根本无法让它工作。

如何以最佳方式将数据读入内存以达到我想要的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T15:16:17.387

我在您的数据文件中没有看到任何逗号。无论如何，它不应该与列表导向输入有任何区别。试着像你写它一样读它。

```
do i=1,N
    read (*,*) cs(i,1), cs(i,2)
enddo 
```

否则，如果您在一个命令中读取整个数组，它将以列优先顺序读取，即，`cs(1,1), cs(2, 1), ....cs(N,1), cs(1, 2), cs(2,2), ...`这是数组在内存中存储的顺序。

# c# - C#数组转换成MWarray Matlab

> ID：15881862
> 
> 赞同：8
> 
> 时间：2013-04-08T14:32:44.557
> 
> 标签：c#, .net, matlab

我有一个 MxNx3 矩阵，我想使用`MWArray`.
这是我的代码，但是没有 CTOR。
有什么办法吗？

```
RGBImage image = _currentImage as RGBImage;

int height = image.Height;
int width = image.Width;

//transform the 1D array of byte into MxNx3 matrix 
byte[, ,] rgbByteImage = new byte[3, height, width];
if (image[0].Bpp > 16)
{
    for (int i = 0; i < height; i++)
    {
        for (int j = 0, k = 0; k < width; j = j + 3, k++)
        {
            rgbByteImage[0, i, k] = image[0].Data[i * width + j]; 
            rgbByteImage[1, i, k] = image[0].Data[i * width + j + 1]; 
            rgbByteImage[2, i, k] = image[0].Data[i * width + j + 2 ]; 
        }
    }
}

MWNumericArray tempArr = new MWNumericArray(rgbByteImage); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:35:56.997

```
RGBImage image = _currentImage as RGBImage;

int height = image.Height;
int width = image.Width;

//transform the 1D array of byte into MxNx3 matrix 

byte[ , , ] RGBByteImage = new byte[3,height, width];

if (image[0].Bpp > 16)
{
    for (int i = 0; i < height; i++)
    {
        for (int j = 0, k = 0; k < width; j = j + 3, k++)
        {
            RGBByteImage[0, i, k] = image[0].Data[3 * i * width + j];
            RGBByteImage[1, i, k] = image[0].Data[3 * i * width + j + 1];
            RGBByteImage[2, i, k] = image[0].Data[3 * i * width + j + 2]; 
        }
    }
}

MWNumericArray matrix = null;
matrix = new MWNumericArray(MWArrayComplexity.Real, MWNumericType.Int8, 3,height, width);
matrix = RGBByteImage; 
```

这就是我发现的。

这里还有一个很好的教程 [http://domoreinlesstime.wordpress.com/2013/01/26/access-matlab-from-c/](http://domoreinlesstime.wordpress.com/2013/01/26/access-matlab-from-c/)

请注意，您正确引用了 MWArray.dll 文件（x64 或 x86）。我已经浪费了一天左右的时间。

# sas - 如何使用 SAS 中的计算从现有宏变量创建新的宏变量？

> ID：15881864
> 
> 赞同：4
> 
> 时间：2013-04-08T14:32:47.637
> 
> 标签：sas, sas-macro

我想从其他已经存在的宏变量中创建一个新的宏变量。

我尝试了 , 的多种变体，`call symput`但无济于事...`%eval``input`

我想`d`评估为 3 / 30 = .10。

* * *

```
*****  taken directly from the sas help files...  ;

%let a=1+2;
%let b=10*3;
%let c=5/3;
%let eval_a=%eval(&a);
%let eval_b=%eval(&b);
%let eval_c=%eval(&c);

%put &a is &eval_a;
%put &b is &eval_b;
%put &c is &eval_c; * not sure why this evaluates to 1, but I'm sure it's documented somewhere... ;

*****  This evaluates to 0...

%let d = %eval(%eval(&a) / %eval(&b)) ; 

%put &d ; 
```

* * *

非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:39:48.770

%eval 只会返回一个整数。要获得小数点，您需要使用 %sysevalf。

# hadoop - 我想开发一个 map reduce 逻辑来从输入文件中查找句子计数

> ID：15881866
> 
> 赞同：0
> 
> 时间：2013-04-08T14:32:47.907
> 
> 标签：hadoop, mapreduce

我是 hadoop 新手，对 map reduce 有基本的了解，map 函数的输入将是键值对。那么我基本上如何确定我的句子何时完成以及如何计算它。是否可以使用默认输入格式，即 TextInput 格式，或者我们可以使用其他输入格式以更简单的方式进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:49:20.070

我想你只需检查线路的时间段。决定是否应该忽略省略号 (...) 等。然后，当每一行都传递给 map() 方法时，您将写出一个键/值来计算上下文中的合法周期。结束一个句子意味着什么的定义是你的电话。这样做的逻辑应该很简单。

您可以让整个句子一次一个地传递给 map() 方法，但这要困难得多。您基本上采用相同的逻辑并将其放入新的输入格式类型和相应的 RecordReader 中。如果您可以选择使用 map() 方法中的逻辑，而不是输入格式类型和记录阅读器。

# matlab - 具有 3 个相同大小的向量的 3D 绘图 matlab

> ID：15881871
> 
> 赞同：2
> 
> 时间：2013-04-08T14:33:01.397
> 
> 标签：matlab, 3d

我有三个向量，X、Y 和 Z。长度相等 (20000,1)。我想在 3d 图中绘制所有三个。我尝试使用但无济于事，因为它们要求 Z 的大小为（20000,20000）`surf`。`plot3`有人可以帮忙吗？TIA

```
X = DAT(3,:);

Y = DAT(4,:);

Z = DAT(11,:);

[x,y] = meshgrid(X,Y);

surf(x,y,Z); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:01:00.293

您是否尝试过`griddata`或`TriScatteredInterp`创建了插值曲面？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T01:33:47.547

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/311767](http://www.mathworks.com/matlabcentral/newsreader/view_thread/311767)给出的代码片段可能会对您有所帮助。

```
X=rand(1,30);
Y=rand(1,30);
Z=rand(1,30);

[XI YI ZI] = griddata(X,Y,Z,linspace(0,1),linspace(0,1)');

figure
subplot(1,2,1)
trisurf(delaunay(X,Y),X,Y,Z)
subplot(1,2,2);
surf(XI,YI,ZI) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:21:49.010

不！`plot3`不需要 Z。如果`plot3`您只想绘制一个点集，那么就可以完全按照您的意愿进行操作。

`plot3(X,Y,Z,'.')`

关键是，没有必要使用`meshgrid`for `plot3`。实际上，没有必要`meshgrid`像您尝试过的那样使用`surf`. （如果您要调用`griddata`，那么`meshgrid`将是必要的，但对于较小的网格。）

如果您需要一个曲面图，那么您需要创建一个曲面。如果这些点是分散的，那么您的基本选项是文件交换中的最后一个工具，如`triscatteredinter`、`griddata`或。[`gridfit`](http://www.mathworks.com/matlabcentral/fileexchange/8998-surface-fitting-using-gridfit)

# javascript - 更改图像并使用 JavaScript 点击事件将其更改回来

> ID：15881873
> 
> 赞同：1
> 
> 时间：2013-04-08T14:33:03.653
> 
> 标签：javascript, mouseclick-event

我有以下代码：

```
window.onload = function () {
'use strict';

var alcohol = document.getElementById('alcohol'); 

var changeImage = function (event) {
    alcohol.src = "image/alcohol3.jpg";
};

var changeBack = function (event) {
    alcohol.src = "image/alcohol.jpg";
};

addHandler(alcohol, "click", changeImage);
// addHandler(alcohol, "mouseout", changeBack); 
```

如何通过第二次点击事件将图像更改回来？目前，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:35:32.717

将您的功能更改`changeImage`为：

```
var changeImage = function (event) {
    if (alcohol.src != "image/alcohol3.jpg"){
       alcohol.src = "image/alcohol3.jpg";
    }
    else
    {
       alcohol.src = "image/alcohol.jpg";
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:43:26.357

你可以使用这样的闭包来做到这一点：

```
var changeImage = function() {
    function a(event) {
        alcohol.src = "image/alcohol3.jpg";
        event.srcElement.onclick = b;
    }
    function b(event) {
        alcohol.src = "image/alcohol.jpg";
        event.srcElement.onclick = a;
    }
    return a;
}
addHandleaddHandler(alcohol, "click", changeImage()); 
```

首先，它是分配为处理程序的函数，每次引发事件，处理程序都会在和`a`之间切换。`a``b`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:36:30.190

您可以使用切换：

```
$("#alcohol").toggle(
  changeImage() ,
  changeBack()
); 
```

# c# - JsonTextReader (Json.NET)

> ID：15881875
> 
> 赞同：1
> 
> 时间：2013-04-08T14:33:16.223
> 
> 标签：c#, json.net

我正在尝试使用 JsonTextReader 从 JSON 字符串中读取一个类（我需要在流式 pov 中读取，而不将整个结构加载到内存中）。但似乎 JsonTextReader 不适用于数组，或者我做错了什么，因为有些值不是 Read()。

我的代码：

```
while (jsonReader.Read())
{
    if (jsonReader.Value != null)
        Console.WriteLine("Token: {0}, Value: {1}", jsonReader.TokenType, jsonReader.Value);
    else
        Console.WriteLine("Token: {0}", jsonReader.TokenType);
} 
```

我的 JSON 文件：

```
{
    "employees": [
        {
            "firstName": "John",
            "lastName": "Doe"
        },
        {
            "firstName": "Anna",
            "lastName": "Smith"
        },
        {
            "firstName": "Peter",
            "lastName": "Jones"
        }
    ]
} 
```

输出：

```
Token: StartObject
Token: StartArray
Token: StartObject
Token: PropertyName, Value: firstName
Token: PropertyName, Value: lastName
Token: EndObject
Token: StartObject
Token: PropertyName, Value: firstName
Token: PropertyName, Value: lastName
Token: EndObject
Token: StartObject
Token: PropertyName, Value: firstName
Token: PropertyName, Value: lastName
Token: EndObject
Token: EndArray
Token: EndObject 
```

请注意，Jonh、Anna、Doe 等内容不会显示。

知道我该如何解决这个问题吗？我正在避免序列化\反序列化解决方案或 LINQ，因为我无法将整个结构加载到内存中。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T14:55:23.443

Looks like for properties, `jsonReader.Value` returns property name, when ToString is called. You can try casting value to something like JsonProperty type and see if it holds a value of the property. I'm not sure what the exact type name is, but you can look it up in the debugger.

# java - 将 XML 实体映射到 Java 对象

> ID：15881876
> 
> 赞同：22
> 
> 时间：2013-04-08T14:33:18.193
> 
> 标签：java, xml, spring, mapper

我很确定，这是围绕 XML 到 Java 对象转换的许多重复问题之一。但是我开始了这个线程，因为我找不到更简单或寻找更简单的解决方案。

我有一个 xsd [事实上我正在设计它] 和 xml。我想根据映射将 xml 数据自动映射到 Java bean

```
<tns:SummaryCart xmlns:tns="SummaryCart" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="SummaryCart.xsd">
    <SummaryElement type="test">
        <order>1</order>
        <id>A</id>
        <displayName>A</displayName>
        <subElements>
            <order>1</order>
            <id>Preactivation</id>
            <displayName>Preactivation</displayName>
        </subElements>
        <maxlines>1</maxlines>
    </SummaryElement>
</tns:SummaryCart> 
```

现在我的 Java 类将是

```
public class SummaryCart{
    private List<SummaryElement> summaryElementList;
}
public class SummaryElement {
    private int order;
    private String id;
    private String displayName;
    private String property;
    private List<SummaryElement> subElements;
    private int maxlines;
    private String type;
} 
```

是否有任何简单的工具/框架可以将数据从 XML 自动映射到 Java bean [必须支持属性/元素映射]。教程会很好。

顺便说一句，我正在使用 Spring 框架，如果利用 spring-oxm 优势，它是受欢迎的。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-08T16:17:23.000

下面是如何使用[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)将对象映射到 XML 。从 Java SE 6 开始，JDK/JRE 中包含一个实现。Spring 支持 JAXB（参见第 8.5 节：[http](http://static.springsource.org/spring-ws/site/reference/html/oxm.html) ://static.springsource.org/spring-ws/site/reference/html/oxm.html ）

**摘要购物车**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="SummaryCart", namespace="SummaryCart")
@XmlAccessorType(XmlAccessType.FIELD)
public class SummaryCart{

    @XmlElement(name="SummaryElement")
    private List<SummaryElement> summaryElementList;

} 
```

**摘要元素**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class SummaryElement {

    private int order;
    private String id;
    private String displayName;
    private String property;
    private List<SummaryElement> subElements;
    private int maxlines;

    @XmlAttribute
    private String type;

} 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(SummaryCart.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15881876/input.xml");
        SummaryCart sc = (SummaryCart) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, "SummaryCart.xsd");
        marshaller.marshal(sc, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:SummaryCart xmlns:ns2="SummaryCart" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="SummaryCart.xsd">
    <SummaryElement type="test">
        <order>1</order>
        <id>A</id>
        <displayName>A</displayName>
        <subElements>
            <order>1</order>
            <id>Preactivation</id>
            <displayName>Preactivation</displayName>
            <maxlines>0</maxlines>
        </subElements>
        <maxlines>1</maxlines>
    </SummaryElement>
</ns2:SummaryCart> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:16:43.997

基本上你想*解组*你的 XML。这是一个详细的教程，描述了如何使用 JAXB`xjc`命令[从 XML Schema 生成 Java 类](http://theopentutorials.com/examples/java/jaxb/generate-java-class-from-xml-schema-using-jaxb-xjc-command/)。为了您的方便，还提供了一个 maven [xjc 插件。](http://mojo.codehaus.org/jaxb2-maven-plugin/xjc-mojo.html)

# c# - 调用“context.AttachTo”时 - ObjectContext 实例已被释放，不能再用于需要连接的操作

> ID：15881877
> 
> 赞同：0
> 
> 时间：2013-04-08T14:33:19.997
> 
> 标签：c#, c#-4.0, entity-framework-4, entity-framework-5

我很难通过新的上下文对实体对象进行更改。我以前做过很多次这项工作，但在这种情况下，我得到了旧的“ObjectContext 实例已被处理”异常。

这是我的快速编辑/保存代码：

```
private void SaveChanges()
{
    using (var context = new Manticore.ManticoreContext(Global.ManticoreClient))
    {
        **context.AttachTo("Users", Global.LoggedInUser);**
        Global.LoggedInUser.FirstName = this.FirstNameText.Text;
        Global.LoggedInUser.LastName = this.LastNameText.Text;
        Global.LoggedInUser.Email = this.EmailText.Text;

        context.SaveChanges();
    }
} 
```

Global.LoggedInUser 属性（已实例化）：

```
public static Manticore.User LoggedInUser
{
    get
    {
        return HttpContext.Current.Session["LoggedInUser"] as Manticore.User;
    }

    set
    {
        HttpContext.Current.Session["LoggedInUser"] = value;
    }
} 
```

最重要的是这里有一个可以工作的快速单元测试（现在没有断言，但没有抛出异常）：

```
 private User _testUser;

    private TestInstanceBucket _testBucket;

    [TestInitialize]
    public void TestInitialize()
    {
        using (var context = new Manticore.ManticoreContext())
        {
            this._testBucket = new TestInstanceBucket(context);
            this._testUser = this._testBucket.TestUser;
            context.AddObject("Users", this._testUser);
            context.SaveChanges();
        }
    }

    [TestMethod]
    public void User_ShouldBeAbleToChangeDetails()
    {
        using (var context = new ManticoreContext())
        {
            context.AttachTo("Users", this._testUser);
            this._testUser.FirstName = "New";
            context.SaveChanges();
        }
    } 
```

就像我说的，我以前做过这样的代码，而且很好。我是否走运了，或者将实体存储在会话中会导致问题？

**更新**

我已将代码从全局移动到使用 SaveChanges() 的页面继承的页面基类。同样的问题，所以它规则我们的静态类/方法并将实体存储在会话中以某种方式导致问题。

**更新**

所以，在我的头撞到墙上几个小时后，我有了一个相当简单的修复，如果烦人的话。在初始获取用户之后，我现在调用

```
context.Detach(user); 
```

我只能假设与测试环境相比，ASP.NET 中垃圾收集处理上下文的速度有多快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:11:04.843

在我的 EF 经验中，当实体仍链接到旧上下文时，似乎总是会出现此问题。我相信总是使用新的上下文重新加载实体是最安全的（在 PK 上查询）。我知道这不是最有效的，但它避免了这个问题。

在回答之前，我查看了此页面，如果您还没有尝试过它的一些建议，您可以试一试：[EF Add/Attach](http://msdn.microsoft.com/en-US/data/jj592676)。

# xslt - 根据xslt语句添加html类

> ID：15881880
> 
> 赞同：4
> 
> 时间：2013-04-08T14:33:28.110
> 
> 标签：xslt

xslt 对我来说很新。是否可以做类似于我下面的代码的事情。我知道在其他模板语言中是可能的。

```
 <div class="<xsl:if test="position()=1">myclass</xsl:if>">Hello</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T15:02:42.057

你可以把一个包裹`xsl:attribute`在一个`xsl:if`...

```
 <div>
        <xsl:if test="position()=1">
            <xsl:attribute name="class">myclass</xsl:attribute>
        </xsl:if>
        <xsl:text>Hello</xsl:text>
    </div> 
```

此外，在 XSLT 2.0 中，您可以这样编写`xsl:attribute`：

```
<xsl:attribute name="class" select="'myClass'"/> 
```

另一个 XSLT 2.0 选项，如果您不介意使用 empty `class=""`，则`if`在 AVT（[属性值模板](https://www.w3.org/TR/xslt-20/#attribute-value-templates)）中使用 an：

```
<div class="{if (position()=1) then . else ''}">...</div> 
```

`then`可能因上下文而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:52:59.823

它应该是这样的：

```
<xsl:variable name="myclass" select="variablenode" />

<div class="adf">
<xsl:if test="yournode[position()=1]">
    <xsl:value-of select="$myclass"/>
</xsl:if>
Hello</div> 
```

但请给我们您的源 XML、您目前拥有的 XSLT 以及预期的输出。否则我们只能猜测。

# python - 如何使用 Python 从列表中填充海龟坐标？

> ID：15881883
> 
> 赞同：0
> 
> 时间：2013-04-08T14:33:32.387
> 
> 标签：python, coordinates, fill, turtle-graphics

我需要知道如何修复此代码，以便当调用具有坐标列表的名为“redlist”的列表时，它会在调用移动函数时填充这些点。这是我到目前为止所拥有的：

```
redlist=[]
def move():
        penup()
        if color()[0]=="red":                      
        #coordinates of redlist should be filled here               

def paint():
        pendown()
        if color()[0]=="red":
                begin_fill
                redlist.append(pos()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:46:10.523

我不知道你的意思是什么坐标，但我打电话给`x`他们`y`

```
redlist=[]
def move():
        penup()
        if color()[0]=="red":                      
            x = 1 # replace this line
            y = 2 # replace this line
            redlist.append((x, y)) # you can access them by #x, y = redlist[-1]
        #coordinates of redlist should be filled here               

def paint():
        pendown()
        if color()[0]=="red":
                begin_fill
                redlist.append(pos()) 
```

# jquery - 如何使用 Jquery 发送动态表单的数据

> ID：15881886
> 
> 赞同：1
> 
> 时间：2013-04-08T14:33:43.447
> 
> 标签：jquery

我`dynamic forms`在一个网页中有多个，如下所示

```
<form name='login' id='login_1'>
<input type='text' name='username'/>
<input type='password' name='pwd'/>
<input type='submit' name='submit' id='submit_1' value='Login'/>
</form>
<form name='login' id='login_2'>
<input type='text' name='username'/>
<input type='password' name='pwd'/>
<input type='submit' name='submit' id='submit_2' value='Login'/>
</form>
.......
....... 
```

这`id's`是动态的，假设如果用户以第二个表单输入数据并提交，那么我需要在不使用第三方的情况下将第二个（仅）表单数据发送到服务器`jQuery plugins`，这里我无法`submit button id`正确选择。

使用发送数据的过程是否安全`serializeArray();`，尤其是登录过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:48:32.067

一种方法是附加一个函数 $('form').submit() 并将你的 ajax POST 放到服务器代码那里......

```
$('form').submit(function(){
    var thisForm = $(this);
    alert(thisForm.find("input[type=submit]").attr("id"));

    // perform ajax call here
    // $(ajax). ---

    return false;
}); 
```

**这是一个演示** [http://www.bootply.com/61682](http://www.bootply.com/61682)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:15:56.790

除非您有没有文件的表单，否则序列化表单输入就可以了。

您可以使用 ajax 捕获提交事件并传递数据

```
$("form").submit(function(){
   var action = $(this).attr("action");
   //You Can add an input type hidden to store form id, in case you need it at Server
   $(this).append("<input type='hidden' name='id' value='"+$(this).attr("id")+"'>");
   var data = $(this).serializeArray();
   $.post(action,data,function(data){
     //server response
     console.log(data);
   });
}); 
```

# sharepoint - Sharepoint 2010 - 关于基本概念的问题

> ID：15881892
> 
> 赞同：0
> 
> 时间：2013-04-08T14:33:56.743
> 
> 标签：sharepoint

我正在开始共享点开发，并且有一些关于基本术语的快速问题。

1.  我如何确定特定网站是网站集还是仅通过 URL 的网站？他们是执行此操作的 powershell 命令吗？

2.  我在 sharepoint 中创建了一些网站。一些站点附加了 /sites/sitename，而其他站点则位于 sharepoint 的基本 URL 下。2有什么区别？而且，我如何在站点节点下重新创建那些？出于某种原因，我找不到再次在站点节点下创建的选项。请解释一下这个概念，因为所有 msdn 教程对于像我这样的初学者来说都很混乱。一旦你掌握了基础知识，这些就很好了。

3.  请举例说明如何理解 Web 应用程序、网站集、站点、网站等。

4.  有没有办法将 NEWFORM.aspx 用于文档库而不是 UPLOAD.aspx？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:38:13.973

1.  网站集位于 Web 应用程序的根级别。所以[http://abc.com/](http://abc.com/) => Site collection 使用 Powershell，打开 Sharepoint Powershell 提示符并运行 Get-SPSite 以获取所有 Site-Collections
2.  /sites/ 被称为托管路径 它可以在管理中心中为每个 Web 应用程序定义。仅当您在 Web 应用程序下创建第二个网站集时，选择 /sites 的选项才可用（第一个网站集默认使用 /。）

3.  看看[Technet 文章](http://technet.microsoft.com/en-ca/library/cc262410%28v=office.15%29.aspx)

4.  文档库用于上传文件，不用于存储用户提交的数据，为此您需要创建一个列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:09:21.683

1）文档集用于多个文档具有相同属性的情况，就像将所有这些文档放在一个文件夹中，然后为该文件夹提供属性，这些属性依次应用于该文件夹中的每个文档。在您的情况下，如果所有文件的 8 个字段的值都相同，那么文档集是正确的方法。

2）如果有与文件关联的其他元数据，则可以将这些元数据添加到内容类型（例如文档或文档集内容类型）或库本身的列中，您不需要创建单独的列表来保存那个数据。向内容类型添加数据可确保该网站集中所有文档库的一致性，向库添加列仅影响该库。

# php - 模块不保存在 Joomla

> ID：15881904
> 
> 赞同：0
> 
> 时间：2013-04-08T14:34:39.433
> 
> 标签：php, joomla, joomla-extensions

MetaMod（和 Jumi）存在问题。当我对模块进行更改并点击保存时，我会被踢到模块管理器（就像我点击保存并退出一样）。然后，该模块旁边有一个“已签出”挂锁，当我返回该模块时，所做的更改尚未保存。当我“签入”模块并返回查看时，更改仍未保存。

我最近使用 Akeeba 移动了 Joomla 站点，这似乎是我唯一遇到的问题。任何帮助将不胜感激，因为我还没有找到解决方案。

如果我使用简单的代码，例如

```
 $user =& JFactory::getUser();
    $userID = $user->id;

if ($userID !== 0){
 return 186;
} 
```

然后它会很好地保存。只要我添加一个查询，它就会中断。

```
$user =& JFactory::getUser();
$userID = $user->id;
$query = "SELECT id FROM schools WHERE leader_id='{$userID}'";
$result = mysql_query($query);
$amIanRL = mysql_num_rows($result);
if ($amIanRL !== 0){
 return 186;
} 
```

顺便说一句，上面的代码适用于我在 Akeeba 恢复之前创建的一些模块（它们只是返回不同的模块）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:32:52.093

尝试使用以下查询：

```
$user = JFactory::getUser();
$userID = $user->id;
$db = JFactory::getDbo();

$query = $db->getQuery(true);
$query->select('*')
->from('#__schools')
->where('leader_id = ' . $userID . );
$db->setQuery($query);

$results = $db->loadObjectList();
if ($results !== 0){
  return 186;
} 
```

它有一些调整并坚持 Joomla 2.5 编码标准。

# java - 在制作交互式 Jtable 时需要一些帮助

> ID：15881908
> 
> 赞同：1
> 
> 时间：2013-04-08T14:34:43.990
> 
> 标签：java, swing, jtable

我想制作一个可以与输入交互的 Jtable`JTextField`和几个`JButtons`. 我首先从文件中读取信息，如下所示：

```
public insertion_sort_and_binary(Scanner sc) {
    int counter = 0;
    setTitle("GamesList");
    setSize(600, 360);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    container = new JPanel();
    container.setLayout(null);

    database = new Game[Integer.parseInt(sc.nextLine())];
    while(sc.hasNextLine())
    {
        Object[] temp = this.theSpliter(sc.nextLine());
        database[counter] = new Game((String)temp[0],(String)temp[1],(String)temp[2],(String)temp[3],(String)temp[4]);
        counter++;
    }
    sort_database(); 
```

因此，我制作了这个数组列表来存储所有信息，然后它将制作 Jtable。

但是我意识到我不能只用一个 Jtable 做我想做的事，所以我需要创建一个 AbstractTableModle。问题是我完全无法识别 AbstractTableModle 的构造。

这是我需要 Jtable 帮助的列表：我需要在按下添加按钮时添加一个新行，但是它将位于排序位置，这意味着它不会位于末尾，而是按字母顺序排列的某个位置.

如果我按下删除按钮，我还需要删除一组行，它将按名称搜索。

PS：有一件事我真的不想要，那就是通过一些自动方法设置边界。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:11:34.147

> 我需要在按下添加按钮时添加一个新行，但是它将位于排序位置，这意味着它不会位于末尾，而是按字母顺序排列的某个位置。

JTable 支持对 TableModel 进行排序。您不需要自己进行排序。

阅读 Swing 教程中关于[排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)的部分。插入的行将根据表格的当前排序显示在适当的位置。

# c++ - 寻找线性方程的解集？

> ID：15881909
> 
> 赞同：1
> 
> 时间：2013-04-08T14:34:45.257
> 
> 标签：c++, python, c, algorithm, math

我需要为这个方程找到所有可能的解：

`x+2y = N`, `x<100000`和`y<100000`.

给定`N=10`，说。

*我在python*中这样做：

```
for x in range(1,100000):
    for y in range(1,100000):
        if x + 2*y == 10:
             print x, y 
```

我应该如何优化这个**速度**？我该怎么办？

本质上这是一个与**语言无关的**问题。C */C++*答案也会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:37:49.943

如果`x+2y = N`，则`y = (N-x)/2`（假设`N-x`是偶数）。你不需要全部迭代`range(1,100000)`

像这样（对于给定的 N）

```
if (N % 2): x0 = 1
else: x0 = 0
for x in range(x0, min(x,100000), 2):
    print x, (N-x)/2 
```

编辑：你必须注意 Nx 不会变成负数。这`min`就是应该做的

Leftris 的答案实际上比我的要好，因为这些特殊情况以优雅的方式处理

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:45:49.040

我们可以遍历 y 的域并计算 x。还考虑到 x 也有一个有限的范围，我们进一步将 y 的域限制为 [1, N/2] （因为任何超过 N/2 的 y 都会给 x 负值）

```
x=N;
for y in range(1,N/2-1):
     x = x-2
     print x, y 
```

*   这只是循环 N/2 次（而不是 50000 次）
*   它甚至不做那些昂贵的乘法和除法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:38:09.833

这在二次时间中运行。您可以通过将方程式重新排列为形式来将其减少为线性时间`y = ...`。这允许您`x`仅循环、计算`y`并检查它是否为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T14:38:48.553

`x`您可以尝试只检查给定的偶数`N =10`；原因是：`2y`必须是偶数，因此，`x`必须是偶数。这应该将总运行时间减少到检查 all 的一半`x`。

如果您还要求答案是自然数，则排除负数。然后，您只需检查介于`[0,10]`for之间的数字`x`，因为两者`x`和`2y`必须不大于`10`单独。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:40:36.617

[Lefteris E](https://stackoverflow.com/a/15882156/2032663)的答案是要走的路，

但我确实觉得`y`应该在范围内`[1,N/2]`而不是`[1,2*N]`

解释：

```
x+2*y = N

//replace x with N-2*y
N-2*(y) + 2*y = N
N-2*(N/2) + 2*y = N
2*y = N

//therefore, when x=0, y is maximum, and y = N/2
y = N/2 
```

所以现在你可以这样做：

```
for y in range(1,int(N/2)):
   x = N - (y<<1)
   print x, y 
```

# opencv - 如何在没有 CMake 的情况下在 opencv v2.4.4 和 VC10 中启用 CUDA 5.0 并解决错误“缺少 cudart32_42_9.dll”？

> ID：15881912
> 
> 赞同：1
> 
> 时间：2013-04-08T14:34:50.287
> 
> 标签：opencv, cuda, gpu, vc10

这是我的第一篇文章，如果我不清楚或未能完全遵守发帖规则，请接受我的歉意。无论如何，我已经为我自己的问题进行了广泛的准备。

## 与：

*   Windows 7 企业版 6.1.7600
*   Intel Xeon CPU 四核 3.07GHz
*   英伟达 Quadro 4000 GPU
*   适用于 Windows x64 构建的 CUDA v5.0 工具包
*   OpenCV v2.4.4
*   OpenCV Cuda Package 属于 opencv v2.4.4
*   Microsoft Visual Studios C++ 2010 Express ('vc10')
*   (!) 没有 CMake (!)

## 我已经完成的步骤、教程和检查：

*   我已经按照 opencv.org 教程安装并配置了 opencv 2.4.4 所需的软件......
*   使用 vc10，按照 opencv.org 关于在 vc10 中构建 opencv 的教程（应用那里描述的**全局**方法并将与 gpu 相关的 dll 放在顶部），但是
*   **在我尝试将计算转移到 GPU 之前，我还没有安装 CMake 软件**，也没有任何需要它。
*   此外，我已将我在此 vc10 解决方案中应用的所有 .dll 文件复制粘贴到“调试”文件夹中（与该解决方案的 .sln 文件位于同一文件夹中）。
*   最后，我按照 NVidia 开发人员 Zone CUDA 5.0 Getting Started Guide 直到“验证安装”段落，并取得了成功，并按照“为现有项目的构建自定义”说明配置了构建配置以包括 CUDA 编译。

这个问题是关于尝试加速我在调试模式下制作的win32控制台.cpp（即使用win32 OpenCV库的视觉工作室解决方案，一个相当简单的图像处理项目，但带有大内核的模糊正在占用很多时间）通过让它在GPU上运行。但是，我在使用 cuda 5.0 运行 opencv 时遇到了问题（即使 OpenCV Cuda Package 的 readme.txt*告诉*我下载并安装 Cuda 5.0）。

在 vc10 中编译和运行（=按 F5，使用 Win32 平台） - 或者同样在运行相应的 .exe 可执行文件时 - 出现系统错误，提示“无法启动程序，因为我的计算机上缺少 cudart32_42_9.dll ”。

[显然](http://answers.opencv.org/question/3810/cuda-on-visual-studio-2010-to-build-libraries-or/ "12 年 11 月，见弗拉迪斯拉夫的评论")，即使 opencv 的自述文件告诉我使用 cuda5.0，它*仍在*寻找属于 32 位 cuda 4.2 工具包（cudart **32** _ **42** _9.dll）的 cuda 库 - 显然没有找到它们，因为它们没有安装。

在 [这个问题](https://stackoverflow.com/questions/13228762/opencv-2-4-3rc-and-cuda-4-2-opencv-error-no-gpu-support/13231205#13231205 "12 年 11 月，请参阅问题中的“还有一个旁注”部分")中，提到 OpenCV v2.4.4 根本没有用 cuda 5.0 编译，唯一的方法是使用 CMake 编译我自己的库。

# 我的问题：

我想知道同时允许 OpenCV v2.4.4 使用 x64 cuda 5.0 运行**是否**成为可能，但不必使用 CMake 编译我自己的库。

我想请你们中的任何人准确地与我分享要采取的步骤。在您的解决方案中，请详细写出，因为这只是我使用 C++ 语言、编译器库 dll 等的第三周。

提前谢谢了！

## 编辑

这个问题实际上现在（由于@talonmies 的评论）变得更像是一个问题

*   用户“duttasankha”，标题为“OpenCV with cuda MS Visual Studio 2008”，以及
*   用户“zebullon”，标题为“我需要在 64 位机器上安装 64 位 SDK”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:00:19.780

为了完全回答我自己的问题：

我**已经**能够让 CUDA 5.0 运行，而无需自己编译任何东西（例如，无需使用 CMake）或重新安装任何 GPU 驱动程序软件。

我关注了——其中包括——duttasankha 和 zebullon 的帖子（我在我的问题中的编辑中命名了这些帖子），并采取了额外的、小小的信念飞跃。

1.  我下载了 32 位 CUDA 4.2 SDK（软件开发工具包，与其他 CUDA 下载在同一站点上可用）并安装/解压它。**这是值得注意的，因为我安装了*更新*的 CUDA 工具包和驱动程序版本 (5.0)，它是 64 位！**

2.  我查看（Windows 搜索功能）SDK 文件的提取位置，并在 C:...\My Documents\NVIDIA GPU Computing SDK 4.2\C\common\bin 文件夹中找到 cudart32_42_9.dll。

3.  我复制了该文件夹中的**所有**32 位 dll（所有名称以“32_42_9.dll”结尾的 dll）并将它们（连同我在上面问题的摘要中提到的 opencv-dll 一起）放在名为“Debug”的文件夹中' 位于该项目的 .sln 解决方案文件所在的同一文件夹中（这是 Visual Studios 始终放置属于该项目的 .exe 可执行文件的文件夹）。我复制了所有这些，因为即使我只得到这个 cudart-dll 丢失的消息，opencv 中的 gpu 函数也需要所有复制的 dll。
4.  我已经完成了有关所需 Visual Studios 设置的说明。（请参阅关于启用 Visual Studios 2010 的 opencv.org 教程，以*全局*（非本地）方式执行此操作，另请参阅[本指南](https://stackoverflow.com/questions/10901905/installing-opencv-2-4-3-in-visual-c-2010-express)。但现在，在链接器；输入；附加依赖项字段中，我使用 cuda 相关库完成了我的依赖项列表. 它看起来像这样： C:\opencv\build\x86\vc10\lib\opencv_gpu244d.lib C:\opencv\build\x86\vc10\lib\opencv_core244d.lib C:\opencv\build\x86\vc10\lib \opencv_highgui244d.lib C:\opencv\build\x86\vc10\lib\opencv_video244d.lib C:\opencv\build\x86\vc10\lib\opencv_ml244d.lib C:\opencv\build\x86\vc10\lib\opencv_legacy244d .lib C:\opencv\build\x86\vc10\lib\opencv_imgproc244d.lib**请注意，与 cuda 相关的库的“opencv_gpu244d.lib”和“opencv_core244d.lib”位于此列表的顶部。**（顺便说一下，这个 core244d.lib 与 cuda 相关，因为这是我从 Sourceforge.com 下载的 OpenCV-2.4.4-CUDA-vc10.7z 包中的 opencv 核心库。提供了解包/正确放置的说明在 Sourceforge 的这个 7z 包中随附的 .text 文件中）。
5.  在 Visual Studios 的 Project-Folder Explorer 中，我右键单击我的项目名称（=vc10 解决方案）并选择 Build-configuration。在这里，我在 CUDA 5.0(.targets, .props) 中进行了检查，其中显示了相应的路径“$(VCTargetsPath)\BuildCustomizations\CUDA 5.0.targets”。

现在，运行我的代码不会提示更多关于缺少 DLL 的系统错误，并且 opencv.org 文档中的 CUDA“初始化和信息”函数也在我为检查 CUDA 集的全局功能而编写的新测试项目中运行-向上。

显然，较新版本的 Driver 和 CUDA Toolkit 知道如何与旧版本 CUDA SDK 的 DLL 配合。

希望其他人在阅读本文时能节省一些时间。如果我在对答案的描述中遗漏了详细信息，请告诉我。

# c++ - 如何在 QtCreator 中链接 opencv 并使用 Qt 库

> ID：15881913
> 
> 赞同：47
> 
> 时间：2013-04-08T14:34:53.773
> 
> 标签：c++, qt, opencv, qt-creator

这个问题必须重复多次，但它不起作用，有时仍然没有答案。信息来源主要是这些
[http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml](http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml)
[http://www.youtube.com/watch?v=dgcXYQijV6c](http://www.youtube.com/watch?v=dgcXYQijV6c)

这是我认为应该/可以做的总结。（现在它对我有用。）希望我从一开始就提到了一切，目的是写一个非常清晰的教程。

**为 QtCreator 安装 OpenCV**

1.  我已经安装了 MS Visual Studio 2010 Professional。（我作为学生有免费许可证） - 我认为这没有必要，只是提一下
2.  **下载：**用于 Windows 32 位的 Qt 5.0.1 (MinGW 4.7, 823 MB)
    2.1**安装：**警告，Qt 使用的所有内容（例如 OpenCV）必须位于名称中不包含空格的目录中。- 即“程序文件”是错误的。（但我不希望不同的程序文件直接累积在 C 上，所以我只创建了一个文件夹“程序”，其中安装了所有重要的东西）
3.  **下载：** cmake-2.8.10.2-win32-x86.exe - 为所有用户安装（可以在程序文件中）
4.  **下载：** OpenCV-2.4.0.exe，解压到：*C:\Programs\opencv24* - 它将创建一个目录“opencv”；添加另一个文件夹“opencv_bin”。现在看起来像这样：
    *C:\Programs\opencv24\opencv**
    *C:\Programs\opencv24\opencv_bin*
5.  **设置 PATH 环境变量**，以便有一个指向 MinGW 编译器的链接。例如*C:\Programs\Qt\Qt5.0.1\Tools\MinGW\bin；*
6.  **启动cmake-gui.exe**
    6.1**源码：**设置OpenCV的默认目录；*C:\Programs\opencv24\opencv*
    6.2**二进制文件：**设置 opencv_bin 目录；C:\Programs\copencv24\opencv_bin
    6.3**点击配置：**
    *   选择**MinGW Makefiles**和**Specify native compilers**，点击下一步
    *   字段 C 用于 gcc.exe；*C:/Programs/Qt/Qt5.0.1/Tools/MinGW/bin/gcc.exe*
    *   字段 C++ 用于 g++.exe；*C:/Programs/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe*
    6.4**会出现多条红线**在搜索栏一一输入：WITH_QT、WITH_TBB、WITH_IPP、WITH_CUDA、CMAKE_BUILD_TYPE
    *   WITH_QT - 必须选择。
    *   WITH_TBB、WITH_IPP、WITH_CUDA - 必须取消选择
    *   CMAKE_BUILD_TYPE - 单击并输入文本“调试”（不带引号）。
    6.5**点击configure**，一直点击configure，直到所有红线都消失，然后**点击generate**，**关闭** *cmake-gui.exe*
7.  转到***终端（~命令提示符）***，cd 到构建目录*（opencv_bin）*并输入***mingw32-make***

8.  当进程在很长一段时间后结束时，键入**mingw32-make install**

9.  *将 QtCreator/bin C:\Programs\Qt\Qt5.0.1\Tools\QtCreator\bin*的路径添加到 Path 变量中

 *现在我在 QtCreator 中创建了一个新的控制台应用程序。

```
//cvHello.pro
QT       += core
QT       -= gui

TARGET = cvHello
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app
INCLUDEPATH += C:/Programs/opencv24/opencv_bin2/install/include
LIBS += "C:/Programs/opencv24/opencv_bin2/bin/*.dll"

SOURCES += main.cpp
OTHER_FILES += \
    img.JPG 
```

和主文件：

```
//main.cpp
#include <iostream>
#include "opencv2/core/core.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv/cv.h"

using namespace std;

int main()
{
    cout << "Hello World!" << endl;

    cv::Mat mat;
    mat = cv::imread("img.JPG");
    cvNamedWindow("hello");
    cv::imshow("hello",mat);

    cvWaitKey(0);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T22:37:17.217

终于我开始快乐了。在调整这个问题时，我不得不尝试所有方法，如何定义 LIBS。手动列出它们有帮助，起初我写错了。

这就是它最终的工作方式：

```
LIBS += -LC:\\Programs\\opencv24\\opencv_bin2\\bin \
    libopencv_core240d \
    libopencv_highgui240d \
    libopencv_imgproc240d \
    libopencv_features2d240d \
    libopencv_calib3d240d \ 
```

顺便说一句，如果我犯了任何语法错误，我为我的英语感到抱歉。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-19T06:01:30.910

最初接受的答案对我不起作用，我正在运行 MSVC2013 Professional 和 QT5.9。我发现 SIMPLE 和 SUREFIRE CROSS-PLATFORM 解决方案应该可以帮助任何试图将外部库（如 openCV）与 QT 链接的人。

下面列出的步骤可在 Qt5 文档中找到：http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html[在](http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html)“添加库”部分下。

1.  右键单击位于创建者左侧“项目窗格”中的项目文件...并选择“添加库...”
2.  按照向导的说明进行操作

让我从这里添加一些特殊性：

3.  选择“外部库”
4.  对于“库文件”，导航到您的 opencv_worldXXX.lib 文件（或 opencv_worldXXXd.lib 文件，您会注意到，通过仅指定一个或另一个，向导有一个自动包含另一个的复选框）**[例如。...\opencv\build\x64\vc12\lib\opncv_world310.lib]**
5.  对于“包含文件夹”，导航到构建中的“包含”文件夹。**[前任。...\opencv\build\include]**
6.  选择您的操作系统、动态/静态库（以适当者为准）
7.  点击下一步，清理并运行！*

# java - 搜索文本和图像 OutOfMemory 异常

> ID：15881915
> 
> 赞同：0
> 
> 时间：2013-04-08T14:34:56.163
> 
> 标签：java, android

我为我的列表实现了一个搜索文本，

每个列表行项目都包含我从服务器下载的文本和图像。

我总是保留两个列表，一个是原始的文本和图像列表，另一个是排序的文本和图像列表......

如果我的列表仅包含 4 个项目，那么我的应用程序运行良好，但是如果我的列表包含 20 个项目并且每个图像为 1MB，并且我需要在适配器内保留两个列表 listImagesOriginal 、 image_array （= 40MB），我会收到 OutOfMemory 异常。

如何减少我不会收到 OutOfMemory 异常的内存消耗？

多谢

我怎样才能减少

```
private MyCustomAdapter adapter;

private List<String> text = new ArrayList<String>();
private List<Bitmap> listImages;

private List<String> textOriginal = new ArrayList<String>();
private List<Bitmap> listImagesOriginal =new ArrayList<Bitmap>();

adapter =new MyCustomAdapter(text,listImages);
         ListView.setAdapter(adapter);

searchText= (EditText) findViewById(R.id.profile_page_search);

         searchText.addTextChangedListener(new TextWatcher()
         {
             public void afterTextChanged(Editable s)
             {
                   // Abstract Method of TextWatcher Interface.
                 textlength = searchText.getText().length();
                 adapter.deleteAllForSearch();
                 for (int i = 0; i < textOriginal.size(); i++)
                 {

                         if(textOriginal.get(i).contains(
                                 searchText.getText().toString().trim()))
                         {
                             adapter.addObjectForSearch(textOriginal.get(i), listImagesOriginal.get(i));
                         }

                 }
             }
             public void beforeTextChanged(CharSequence s,
                     int start, int count, int after)
             {
                 // Abstract Method of TextWatcher Interface.
             }
             public void onTextChanged(CharSequence s,
                     int start, int before, int count)
             {

              }
          });

class MyCustomAdapter extends BaseAdapter{
          public   List<String> text_array = new ArrayList<String>();
          public   List<Bitmap> image_array = new ArrayList<Bitmap>();

          public int getCount(){
               return text_array.size();
          }

          MyCustomAdapter(List<String> text, List<Bitmap>)
          {

           text_array = text;
           image_array = image;

          }

          public long getItemId(int position){
               return position;
          }
          public String getItem(int position){
               return null;
          }
          public View getView(final int position, View convertView, ViewGroup parent) {
               //my implementation
          }

public void addObjectForSearch(String text, Bitmap bitmap) {
                text_array.add(text);
                image_array.add(bitmap);

                notifyDataSetChanged();

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:42:00.267

40MB 对于安卓来说太多了。每部手机都有每个应用程序的内存限制，40MB 甚至比大多数高端手机使用的还要高。您需要实现图像的磁盘和/或内存缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:42:07.410

您需要使用缓存和/或将它们存储到持久内存（数据库、文件系统等）中，因为您不希望所有这些位图同时加载到内存中，特别是如果您在同时。许多旧设备的 VM 堆大小约为`16-24MB`，您需要能够保持在合理的内存使用量内。

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

# opencv - 较旧的 OpenCV 1.1 与较新的英特尔集成性能基元 (IPP) 7.1

> ID：15881918
> 
> 赞同：1
> 
> 时间：2013-04-08T14:35:03.757
> 
> 标签：opencv, image-processing, intel-ipp

我在让 OpenCV 1.1 加载英特尔的集成性能基元 (IPP) 7.1 版时遇到了一些麻烦。

我的旧 Open CV 1.1 代码最初是在另一台旧的 Windows XP 机器上与 IPP 6.1 一起使用的。出于不重要的原因，我现在想在带有[英特尔 IPP 7.1](http://software.intel.com/en-us/intel-ipp)的全新 Windows 7 机器上使用它，它是[Intel Composer XE 2013](http://software.intel.com/en-us/intel-composer-xe)的一部分。英特尔的文档[建议我必须更改 cxswitcher.c 中的三行](http://software.intel.com/en-us/articles/intel-integrated-performance-primitives-intel-ipp-open-source-computer-vision-library-opencv-faq/#3)以让旧的 OpenCV 代码找到新的英特尔 IPP，即我应该更新这些行：

```
static const char* ipp_sfx_ia32[] = { "-6.1", "-6.0", "-5.3", "-5.2", "-5.1", "", 0 };
static const char* ipp_sfx_ia64[] = { "64-6.1", "64-6.0", "64-5.3", "64-5.2", "64-5.1", "64", 0 };
static const char* ipp_sfx_em64t[] = { "em64t-6.1", "em64t-6.0", "em64t-5.3", "em64t-5.2", "em64t-5.1", "em64t", 0 }; 
```

我这样做是为了让它们现在包含版本号为“7.1”的字符串，尽可能地匹配模式：

```
static const char* ipp_sfx_ia32[] = { "-7.1", "-6.1", "-6.0", "-5.3", "-5.2", "-5.1", "", 0 };
static const char* ipp_sfx_ia64[] = {"64-7.1", "64-6.1", "64-6.0", "64-5.3", "64-5.2", "64-5.1", "64", 0 };
static const char* ipp_sfx_em64t[] = { "em64t-7.1","em64t-6.1", "em64t-6.0", "em64t-5.3", "em64t-5.2", "em64t-5.1", "em64t", 0 }; 
```

我已经重新编译并将以下目录添加到我的路径中：

*   `C:\Program Files (x86)\Intel\Composer XE 2013\redist\intel64\ipp`
*   `C:\Program Files (x86)\Intel\Composer XE 2013\redist\intel32\ipp`

但是，当我运行包含该`cvGetModuleInfo()`函数的示例代码时，我的代码无法加载 IPP dll，我得到以下输出：

```
 NumUploadedFunction = 0

     opencv_lib = cxcore: 1.1.0,
     add_modules = 
```

� 请注意，我已经进行了一些其他测试。英特尔的 IPP 演示`C:\Program Files (x86)\Intel\Composer XE 2013\ipp\demo\intel64`只有在我将带有 DLL 的目录添加到路径后才能运行，所以这让我认为我的 PATH 设置是正确的。我还确认这个目录实际上是通过在 MSYS 提示符下运行添加到我的 MSYS 命令提示符中的路径中`echo $PATH`的。

我怀疑问题出在`cxswitcher.c`.

我还应该尝试什么？

# c - 挂钩 C 函数

> ID：15881920
> 
> 赞同：0
> 
> 时间：2013-04-08T14:35:12.460
> 
> 标签：c, macos, hook, core-audio, function-interposition

我想`AudioUnitInitialize`通过在应用程序启动时注入一个包来挂钩该功能以获取应用程序的音频单元。
我找到了一个示例（[http://pastie.org/1882125](http://pastie.org/1882125)），但它使用函数`MSHookFunction`来替换函数名称。问题是我想替换 Mac OS X 上的功能，而不是 iOS。
还有另一种方法来挂钩 C 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:43:39.247

如果您[仔细观察](http://gitweb.saurik.com/substrate.git/blob/HEAD:/Hooker.cpp)，您会发现 MobileSubstrate 也可以在 OS X 上运行。

# linux - 为什么 tc 不能做入口整形？入口整形有意义吗？

> ID：15881921
> 
> 赞同：13
> 
> 时间：2013-04-08T14:35:19.103
> 
> 标签：linux, networking, network-traffic, trafficshaping

在我的工作中，我发现 tc 可以做出口整形，并且只能做入口监管。我想知道为什么 tc 不实现入口整形？

代码示例：

```
#ingress
tc qdisc add dev eth0 handle ffff: ingress
tc filter add dev eth0 parent ffff: protocol ip prio 50 \
   u32 match ip src 0.0.0.0/0 police rate 256kbit \
   burst 10k drop flowid :1
#egress
tc qdisc add dev eth0 root tbf \
   rate 256kbit latency 25ms burst 10k 
```

但我不能这样做：

```
#ingress shaping, using tbf
tc qdisc add dev eth0 ingress tbf \
   rate 256kbit latency 25ms burst 10k 
```

我发现一个名为 IFB（更新的 IMQ）的解决方案可以将流量重定向到出口。但这似乎不是一个好的解决方案，因为它正在浪费 CPU。所以我不想用这个。

入口整形有意义吗？为什么 tc 不支持它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-06T01:12:13.353

虽然入口的 tc 整形规则非常有限，但您可以创建一个虚拟接口并对其应用出口规则，如下所述：

> [https://serverfault.com/questions/350023/tc-ingress-policing-and-ifb-mirroring](https://serverfault.com/questions/350023/tc-ingress-policing-and-ifb-mirroring)

（如果您的虚拟机已经使用虚拟接口，您可能不需要虚拟接口，您可以将 tc 应用于它们。）

入口整形的警告是，由于流源和接口之间的路由器中的所有缓冲区，传入流可能需要很长时间才能响应您的整形操作。并且在流确实响应降低的限制之前，它将[继续淹没](http://www.tldp.org/HOWTO/ADSL-Bandwidth-Management-HOWTO/how-it-works.html#AEN152)您的下游！同时，您将丢弃好的数据包，从而降低吞吐量。

同样，当高优先级流结束或下降时，低优先级流需要一段时间才能恢复到其全速。如果它经常发生，这可能会非常具有破坏性！

这样做的结果是，动态整形可能对稳定速率的长寿命流组按需要工作，但当下游被淹没时，对短寿命或变化速率的高优先级流几乎没有优势：低优先级流将只是需要太长时间才能退缩。但是，将低优先级和中优先级数据包分类并限制在低于最大降速率的某个*静态*速率可能会有所帮助，以保证至少有一些空间用于高优先级数据。

我没有这方面的任何数据，并且自 ADSL 时代以来延迟已经改善了很多。所以我认为它可能值得测试，如果您希望高优先级数据包的低延迟或高吞吐量比整体吞吐量更重要，并且您可以忍受上述限制。

正如 Janoszen 和 ADSL HOWTO 所提到的，如果我们可以调整 TCP 窗口大小作为整形的一部分，流可以更快地响应。

[搜索 TLDP](http://www.google.com/cse?cx=017644269519104757279:gm62gtzaoky&q=traffic%20shaping)以进行进一步研究。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-10T22:55:29.813

整形作用于发送缓冲区。入口整形需要控制远程发送缓冲区。

# c - malloc 上的分段错误

> ID：15881934
> 
> 赞同：0
> 
> 时间：2013-04-08T14:35:43.667
> 
> 标签：c

在多次运行此函数（不确定具体多少次）后，它会在简单的内存分配上出现故障。为什么会突然出现这种情况？我确实注意到 GDB 中有一些奇怪的东西。在调用它的函数中，通常 wrd 有 6 位长的十六进制值（例如 wrd = 0x605140），但是在它崩溃的调用中，十六进制值只有两位长。(wrd=0x21)。我还检查了 wrd->length，它是 3。

它崩溃的线路是......

```
char *word_temp = malloc(wrd->length * sizeof(char)); 
```

编辑：

这是创建 wrd 的代码...

```
while(fgets(input, 100, src) != 0)
{
    int i = 0;
    while(input[i] != '\0')
    {
        i++;
    }

    struct word *wrd = malloc(sizeof(struct word));
    wrd->letters = input;
    wrd->length = i; 
```

如果我遇到溢出，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:44:13.703

貌似`wrd->length`不包括终止符`'\0'`。

修复1，`word_temp`这样分配：

```
char *word_temp = malloc( wrd->length + 1 ); 
```

修复 2，通过修改长度计数循环来包含 '\0'：

```
int i = 0;
while(input[i++] != '\0') {} 
```

这将比问题中的代码增加一倍，如果您考虑为空`i`的情况，这很容易看出。`input`

请注意，您需要修复 1 或修复 2，而不是两者。选择适用于其余代码的那个。

* * *

您可能对这一行有第二个问题：

```
wrd->letters = input; 
```

它不复制输入，它复制指针。如果你改变 的内容`input`，内容`wrd->letters`也会改变，因为它们指向相同的内存位置。另外如果`input`是一个本地的char数组，那么一旦超出范围，`wrd->letters`就会变成一个悬空指针，会被其他数据覆盖，之后修改它会导致内存损坏。

可能的修复（取决于您的代码的其余部分）是使用[`strdup`](http://linux.die.net/man/3/strdup)：

```
wrd->letters = strdup(input); 
```

记住它现在是从堆中分配的，所以完成后一定要记得做

```
free(wrd->letters); 
```

* * *

大约`wrd`是 0x21，表示内存损坏，或者您实际上有两个单独的`wrd`变量，其中一个未初始化。

例如，也许`wrd`是一个函数参数`struct word *wrd`，在这种情况下你只修改函数中的局部值，它不会被传回给调用者。要修改调用者的指针，你需要有指向指针的指针：`struct word **wrd`然后做`(*wrd) = malloc...`等等`(*wrd)->letters...`。

# javascript - Javascript 语法：等号和逗号

> ID：15881938
> 
> 赞同：3
> 
> 时间：2013-04-08T14:35:48.447
> 
> 标签：javascript, variables, syntax

我真的不知道该怎么称呼这个问题，也不知道我可以用谷歌搜索什么。我试图理解 D3.js 库的源代码，但由于语法对我来说是新的，我遇到了两个我根本无法理解的函数。

第一个是数字插值器：

```
function d3_interpolateNumber(a, b) {
  b -= a = +a;
  return function(t) { return a + b * t; };
} 
```

这里的第二行发生了什么？我们从 的值中减去 的值`b`，`a`然后……嗯，你失去了我。这个语法是如何工作的？

让我感到困惑的另一件事是，我在其他地方也看到过，变量的右侧赋值由几个用逗号分隔的变量组成。如：

```
var i = d3.interpolators.length, f; 
```

这是什么意思？这些片段取自[https://github.com/mbostock/d3/blob/master/src/interpolate/number.js](https://github.com/mbostock/d3/blob/master/src/interpolate/number.js)和 [https://github.com/mbostock/d3/blob/master/src/interpolate/interpolate .js](https://github.com/mbostock/d3/blob/master/src/interpolate/interpolate.js)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T14:38:03.643

您要询问的第一行只是两个作业。这相当于：

```
a = +a;
b -= a; 
```

这`+a`是使用[一元加号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)将字符串转换为数字。因此，我们将转换`a`为一个数字，然后从该数字中减去该数字`b`（并将新值重新分配给`b`）。

您要询问的第二点语法只是变量声明的列表。例如：

```
var a, b, c; // Declares 3 variables, all initialised to undefined 
```

这相当于：

```
var a;
var b;
var c; 
```

在您的示例中，列表中的声明之一还包括一个赋值。它们中的任何数量都可以，所以这也是有效的：

```
var a, b = 1, c = true, d; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:41:17.820

第二行是

```
 b -= (a = +a); 
```

意思是：

*   设置`a`为`+a`（转换为数字）。在括号外返回此值。
*   无论返回什么值，从 b 中减去它。

或者

```
a=+a //converts a to an int
b-=a // or b=b-a 
```

请记住，赋值返回它们的值。所以，`alert(a=1)`会提醒`1`。

* * *

另一方面，

```
var i = d3.interpolators.length, f; 
```

拆分为：

```
var i = d3.interpolators.length;
var f; 
```

这基本上是一种说法“var 适用于以下逗号分隔列表”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:42:01.713

赋值也是一个表达式，它返回被赋值的值。所以这：

```
b -= a = +a; 
```

是相同的：

```
b -= (a = +a); 
```

或者：

```
a = +a;
b -= a; 
```

* * *

如果右侧真的是用逗号分隔的值，即：

```
var i = (d3.interpolators.length, f); 
```

然后逗号运算符返回最后一个操作数的值，因此它与以下内容相同：

```
d3.interpolators.length;
var i = f; 
```

但是，如果没有括号，逗号是声明变量之间的分隔符，而不是逗号运算符，因此它与以下内容相同：

```
var i = d3.interpolators.length;
var f; 
```

# java - SimpleDateFormatter 抛出 ParseException

> ID：15881948
> 
> 赞同：0
> 
> 时间：2013-04-08T14:36:10.433
> 
> 标签：java, simpledateformat, parseexception

我现在有这两种方法。在这种情况下，当我从数据库中获取一个数据字段时，它是 BigDecimal 格式。所以我决定为它写一个测试（formatDate() 方法）。我将 BigDecimal 传递给该方法，但似乎我写错了这段代码的一些片段。从我在示例和 SimpleDateFormat API 中看到的内容来看，我认为我已经正确编写了代码，但我似乎无法弄清楚让它抛出 parseEx 出了什么问题。有人可以告诉我发生了什么吗？

```
private void loadMap() {
    //TODO:  Uncomment when finished testing.
    //DO OTHER STUFF
    BigDecimal bd = new BigDecimal(12051998);
    System.out.println(formatDate(bd));
}

private String formatDate(BigDecimal bd) {
    String value = bd.toString();   
    SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");   
    try {
        return format.parse(value);
    } catch (ParseException pEx) {
        logger.error(pEx);
        return "Bad Date Format";
    }
} 
```

在此先感谢，最热烈的问候，

*   乔什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:37:27.707

```
SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy"); 
```

应该

```
SimpleDateFormat format = new SimpleDateFormat("MMddyyyy"); 
```

`return format.parse(value);`// **value 应该是 Date 类型而不是 String**。

尝试将日期格式从 MMddyyyy 更改为 MM/dd/yyyy：对我来说效果很好。

```
public static void main(String[] args) throws ParseException {
    BigDecimal bd = new BigDecimal(12051998);
    String s = bd.toString();
    System.out.println(s);
    DateFormat originalFormat = new SimpleDateFormat("MMddyyyy");
    DateFormat targetFormat = new SimpleDateFormat("MM/dd/yyyy");
    Date date = originalFormat.parse(s);
    String formattedDate = targetFormat.format(date);
    System.out.println(formattedDate);
} 
```

输出：

```
12051998
12/05/1998 
```

# javascript - Jquery 打开和关闭

> ID：15881957
> 
> 赞同：0
> 
> 时间：2013-04-08T14:36:31.750
> 
> 标签：javascript, jquery, html

我想打开 onclick 画廊并关闭。我尝试了很多东西并在互联网上搜索事件，但它们不起作用..

如果有人帮我一把，我将不胜感激。

```
<script type="text/javascript">
$(document).ready(function() {
    $( '#carousel' ).elastislide( {
        minItems : 2
    });
})
</script>

<a href="#t">Open Gallery></a>
<div class="container demo-3">
    <div class="main">
        <div class="fixed-bar">
            <!-- Elastislide Carousel -->
            <ul id="carousel" class="elastislide-list">
                <li><a href="#"><img src="elastislide/small/1.jpg" alt="image01" /></a></li>
                <li><a href="#"><img src="elastislide/small/2.jpg" alt="image02" /></a></li>
                <li><a href="#"><img src="elastislide/small/3.jpg" alt="image03" /></a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:12:39.763

```
<a onClick="$('#carousel').toggle();">Open Gallery</a> 
```

我不确定#t href 的去向，所以我把它省略了，但是添加上面的 onClick 事件将切换滑块的可见性。如果您想切换其他内容，请将“carousel”替换为不同的 div id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:39:09.370

试试这个：

```
$('a').click(function(){
    $('#carousel').toggle();
}); 
```

（我假设您使用的是 jQuery）；

**来源**

[jQuery API - 切换（）](http://api.jquery.com/toggle/)

# excel - 从 X、Y、Z 数据、Excel 或其他工具进行 3D 绘图

> ID：15881959
> 
> 赞同：16
> 
> 时间：2013-04-08T14:36:33.293
> 
> 标签：excel, charts, plot, visualization, data-visualization

我的数据如下所示：

```
1000    13  75.2
1000    21  79.21
1000    29  80.02
5000    29  87.9
5000    37  88.54
5000    45  88.56
10000   29  90.11
10000   37  90.79
10000   45  90.87 
```

我想使用第一列作为 x 轴标签，第二列作为 y 轴标签，第三列作为 z 值。我想以这种方式显示一个表面。做这个的最好方式是什么？我尝试了 Excel，但并没有真正取得任何进展。有人对执行此操作的工具有任何建议吗？有谁知道如何在 Excel 中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T00:22:35.597

我最终使用了[matplotlib](http://matplotlib.org/) :)

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np
x = [1000,1000,1000,1000,1000,5000,5000,5000,5000,5000,10000,10000,10000,10000,10000]
y = [13,21,29,37,45,13,21,29,37,45,13,21,29,37,45]
z = [75.2,79.21,80.02,81.2,81.62,84.79,87.38,87.9,88.54,88.56,88.34,89.66,90.11,90.79,90.87]
fig = plt.figure()
ax = fig.gca(projection='3d')
ax.plot_trisurf(x, y, z, cmap=cm.jet, linewidth=0.2)
plt.show() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T15:25:25.380

您真的不能将 3 列数据显示为“表面”。只有一列“Z”数据将为您提供 3 维空间中的一条线，而不是表面（或者在您的数据的情况下，为 3 条单独的线）。为了让 Excel 能够处理这些数据，需要将其格式化，如下所示：

```
 13    21   29      37    45   
1000  75.2                              
1000       79.21                            
1000             80.02                      
5000             87.9                   
5000                    88.54               
5000                           88.56            
10000            90.11      
10000                   90.79   
10000                          90.87 
```

然后，要获得实际表面，您需要使用适当的 Z 值填充所有缺失的单元格。如果您没有这些，那么最好将其显示为 3 条单独的 2D 线，因为没有足够的数据用于表面。

Excel 为您提供的上述数据的最佳 3D 表示非常令人困惑：

![在此处输入图像描述](https://i.stack.imgur.com/W5L73.png)

将这个有限的数据集表示为 2D 数据可能是更好的选择：

![在此处输入图像描述](https://i.stack.imgur.com/Dlfpu.png)

作为将来参考的说明，这些类型的问题通常在[superuser.com](http://superuser.com)上做得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T07:00:07.773

您可以使用 r 库进行 3D 绘图。

步骤是：

首先使用 data.frame() 命令创建一个数据框。

使用 scatterplot3D 库创建 3D 图。

或者您也可以通过 plot3d() 命令使用 rgl 库旋转图表。

或者，您可以使用 rcmdr 库中的 plot3d() 命令。

在 MATLAB 中，您可以根据需要使用 surf()、mesh() 或 surfl() 命令。

[ [http://in.mathworks.com/help/matlab/examples/creating-3-d-plots.html]](http://in.mathworks.com/help/matlab/examples/creating-3-d-plots.html])

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-21T17:44:38.040

您也可以使用`Gnuplot`也可以从`gretl`. 将您的 xyz 数据放在文本文件中，然后插入以下内容

```
splot 'test.txt' using 1:2:3 with points palette pointsize 3 pointtype 7 
```

然后你可以设置标签等使用

```
set xlabel "xxx" rotate parallel
set ylabel "yyy" rotate parallel
set zlabel "zzz" rotate parallel
set grid
show grid
unset key 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-19T14:26:54.993

为什么不合并包含相同值的行？-

```
 13    21    29     37    45 
```

*   1000] -75.2 -- 79.21 -- 80.02

*   5000] ---------87.9---88.54----88.56

*   10000]--------90.11--90.97----90.87

Excel可以很好地使用它..

# c# - 如何将值添加到字典中，其中包含字典列表

> ID：15881960
> 
> 赞同：-2
> 
> 时间：2013-04-08T14:36:37.173
> 
> 标签：c#, dictionary

您好，我正在尝试向这个复杂对象添加值。我正在尝试使用 JSON.Net 将此对象转换为 JSON。

```
Dictionary<string, List<Dictionary<string, int>>> MyList 
    = new Dictionary<string, List<Dictionary<string, int>>>(); 
```

最终结果应该是这样的：`{ "Documents": [ { "Title": , "DatePublished": , "DocumentURL": , "ThumbnailURL": , "Abstract": , "Sector": "", "Country": [ "" ], "Document Type": "" }` 我已经尝试过了，但没有奏效：

```
MyList["Dictionary"][0].Add("test", 4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:45:14.347

如果您有一个`Dictionary<string, int> dictA`，您可以通过

```
Dictionary<string, int> dictA = new Dictionary<string, int>();
dictA.Add("SomeString", 99); 
```

然后将此字典添加到您的`List<Dictionary<string, int>>`使用以下

```
List<Dictionary<string, int>> dictList = new List<Dictionary<string, int>>();
dictList.Add(dictA); 
```

现在您可以通过以下方式将其添加到您的`Dictionary<string, List<Dictionary<string, int>>> myList`对象中

```
Dictionary<string, List<Dictionary<string, int>>> myList = 
    new Dictionary<string, List<Dictionary<string, int>>>();
myList.Add("SomeString", dictList); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:43:00.083

对于它的价值，这里有一个示例循环，它展示了如何使用[`Dictionary.Add`](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)和[Collection Initalizer](http://msdn.microsoft.com/en-us/library/vstudio/bb531208.aspx)：

```
Dictionary<string, List<Dictionary<string, int>>> MyList = 
    new Dictionary<string, List<Dictionary<string, int>>>();

foreach (int i in Enumerable.Range(1, 100))
{
    var list = new List<Dictionary<string, int>>();
    foreach (int ii in Enumerable.Range(1, 100))
        list.Add(new Dictionary<string, int>() { { "Item " + ii, ii } });
    MyList.Add("Item " + i, list);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:42:30.057

```
MyList.Add("key1", new List<Dictionary<string, int>());
MyList["key1"].Add(new Dictionary<String, int>()); 
```

等等

恐怕需要您提供更多细节才能提供更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T14:43:12.433

虽然看起来很复杂，其实很简单：

您的字典采用 的键`string`和 的值`List<Dictionary<string, int>>`。因此，要添加一个*值*，该值应该始终是 type `List<Dictionary<string, int>>`。

# authentication - mifare 卡的身份验证错误“6982：不满足安全状态”

> ID：15881962
> 
> 赞同：1
> 
> 时间：2013-04-08T14:36:38.153
> 
> 标签：authentication, command, smartcard, mifare, apdu

[我知道这个问题在这里](https://stackoverflow.com/questions/14908239/authentication-error-for-mifare-card-6982security-status-not-satisfied)之前被问过。但答案对我来说毫无用处。

我有 pc/sc 读卡器和非接触式卡（mifare 卡），我可以连接到卡，也可以`getdate`成功执行命令。但是，当我想进行身份验证时，我看到了这个错误：

> “6982：不满足安全状态”

我已经尝试了这 4 个不同的命令来进行身份验证，但我都得到了相同的错误。

```
FF 88 00 00 06 FF FF FF FF FF FF
FF 88 00 00 60 12
FF 88 00 00 05 01 00 12 60 00
FF 88 00 00 60 00 
```

我怎样才能对这张卡进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:25:03.033

GENERAL AUTHENTICATE 指令执行 Mifare Classic 身份验证 (CRYPTO1)。应用程序必须提供要使用的键的索引；此密钥必须已通过先前的 LOAD KEY 指令加载到阅读器中。

**如果当前激活的 PICC/VICC 不是 Mifare Classic，请勿调用此函数！**

> FF 86 00 00 05 01 00 blockNo keyLocation keyIndex

在哪里

blockNo = 是卡上的地址，我们尝试在其中进行身份验证。

关键位置 =

*   h60 用于使用 CRYPTO1“A”密钥（标准 PC/SC 定义的值）进行身份验证
*   h61 用于使用 CRYPTO1 “B” 密钥（标准 PC/SC 定义的值）进行身份验证

keyIndex = 读取器中已加载密钥的密钥索引（可能值从 0x00 到 0x1f）

# php - mysql - 找出最后 30 条记录中是否存在输入

> ID：15881964
> 
> 赞同：0
> 
> 时间：2013-04-08T14:36:44.310
> 
> 标签：php, mysql

我想知道最近30条记录中是否存在注册用户的ip。这将帮助我防止多次注册。我尝试在 mysql 中执行此操作时遇到困难。这是我目前所处的位置：

检查所有记录中多个 ip 的旧查询：

```
$same_ip_count = mysql_num_rows(mysql_query("SELECT * FROM login_users WHERE ip='".$ip."'")); 
```

失败的新代码：

```
$same_ip_count = mysql_num_rows(mysql_query(
"SELECT 'user_id'
FROM (
    SELECT *
    FROM login_users
    ORDER BY user_id DESC
    LIMIT 30
) AS t
WHERE t.ip = '".$ip."'")); 
```

对sql来说有点新，所以在这一点上任何建议都会很好。

**编辑：**

要清楚 - 我只想搜索最后 30 条记录。我不想搜索所有记录，然后将它们限制为 30。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:39:22.527

首先使用子查询来获取最后 30 项。然后，您可以从 IP 匹配的 30 个列表中进行选择。

```
Select * From
(SELECT *
        FROM login_users
        ORDER BY registration_date DESC
        LIMIT 30) a
 WHERE a.ip = '".$ip."' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:40:25.610

Mysql 不知道最后 30 条记录是什么。如果您使用自动递增的主键，那么您可以按该键按后代顺序排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:43:34.827

试试这个。

```
$query = mysql_query(
"SELECT 'user_id' as result from `login_users` WHERE ip = '".$ip."' ORDER BY user_id DESC LIMIT 30");

$same_ip = mysql_num_rows($query); 
```

# java - 使用 Hector 编辑存在的 Columnfamily 并同时添加新列得到错误？

> ID：15881974
> 
> 赞同：0
> 
> 时间：2013-04-08T14:36:58.860
> 
> 标签：java, cassandra, hector

当我尝试添加带有一些新列的列族时，我正在学习使用 Hector 并出现错误。

以下代码有效，我只编辑没有新定义的列的列族。

```
KeyspaceDefinition kd = gameCluster
.describeKeyspace("testKeySpace");
//here i am try to add new columns in the columnfamily in the meanwhile
//BasicColumnDefinition cd1 = new BasicColumnDefinition();
//cd1.setName(StringSerializer.get().toByteBuffer("basicColumnname1"));
//cd1.setIndexName("testIndex");
//cd1.setValidationClass(ComparatorType.BYTESTYPE.getClassName());

BasicColumnFamilyDefinition bcf = new BasicColumnFamilyDefinition();
//add it to the new columnfamily
//bcf.addColumnDefinition(cd1);

bcf.setKeyspaceName("testKeySpace");
bcf.setName("testColumnFamily");
bcf.setComparatorType(ComparatorType.UTF8TYPE);

gameCluster.addColumnFamily(bcf); 
```

如果我移动评论，那么我会收到一条错误消息：

```
Exception in thread "main" me.prettyprint.hector.api.exceptions.HectorException:        java.lang.NullPointerException
at me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:67)
at me.prettyprint.cassandra.service.ThriftCluster$4.execute(ThriftCluster.java:105)
at me.prettyprint.cassandra.service.ThriftCluster$4.execute(ThriftCluster.java:92)
at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:104)
at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:258)
at me.prettyprint.cassandra.service.ThriftCluster.addColumnFamily(ThriftCluster.java:109)
at me.prettyprint.cassandra.service.ThriftCluster.addColumnFamily(ThriftCluster.java:84)
at game.cassandra.conn.DataPrepopulate.testAddColumnFamily(DataPrepopulate.java:91)
at game.cassandra.conn.DataPrepopulate.main(DataPrepopulate.java:101) 
```

造成的：

```
java.lang.NullPointerException
at me.prettyprint.cassandra.service.ThriftColumnDef.indexTypeToThrift(ThriftColumnDef.java:105)
at me.prettyprint.cassandra.service.ThriftColumnDef.toThrift(ThriftColumnDef.java:97)
at me.prettyprint.cassandra.service.ThriftColumnDef.toThriftList(ThriftColumnDef.java:88)
at me.prettyprint.cassandra.service.ThriftCfDef.toThrift(ThriftCfDef.java:265)
at me.prettyprint.cassandra.service.ThriftCluster$4.execute(ThriftCluster.java:99)
... 7 more 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T15:11:48.970

如果指定索引名称，则还必须指定索引类型

尝试添加

```
cd1.setIndexType(ColumnIndexType.KEYS); 
```

# scala - 玩！框架表单/HTML 助手：关注点分离？

> ID：15881979
> 
> 赞同：3
> 
> 时间：2013-04-08T14:37:20.347
> 
> 标签：scala, playframework, playframework-2.1, separation-of-concerns

我刚开始使用 Scala 玩 Play 2.1.1。通过一些教程/示例应用程序，我遇到了可用于创建表单的辅助方法，例如：

```
@(myForm: Form[User])

@helper.form(action = routes.Application.submit) {

    @helper.inputText(myForm("username"))

    @helper.inputPassword(myForm("password"))

} 
```

我仍然是一个n00b。但据我了解，这基本上需要在控制器中定义一个表单对象，该对象“包装”模型（简化）：

```
 val loginForm = Form(
    tuple(
      "email" -> text,
      "password" -> text
    ))
  )

  def login = Action { implicit request =>
    Ok(html.login(loginForm))
  } 
```

我发现这很令人惊讶，因为我感觉通过 Form 对象的间接寻址似乎“在错误的位置”。我所期待的是这样的（伪）：

```
@(user: User)

@helper.form(action = routes.Application.submit) {

    @helper.inputText(() => user.userName)
    @helper.inputPassword(() => user.password)
} 
```

...这样就不必在控制器中定义 Form 对象；所有与表单相关的东西都将位于视图模板中。将“this-will-be-rendered-in-a-form”逻辑混合到控制器中对我来说似乎是对 SOC 的轻微违反。

现在我想知道：这只是在 Play 中做事的方式，还是我错过了什么？有没有“更好”的方法来处理这个问题？

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:09:19.257

我认为控制器中的许多表单定义也会很烦人，尤其是应用程序将涉及许多表单。

但是 Play!Framework 使开发人员编写代码更加灵活。您可以像这样在 scala 模板助手中混合纯 HTML：

```
@helper.form(action = routes.Application.submit) {
   <input type="text" name="username">
   <input type="password" name="password">

   ....
} 
```

在我看来，scala 助手实际上有助于表单更新之前创建的数据。因为它将现有值绑定到默认输入值。此外，它还有助于显示由对象验证引起的错误。

如果表单不考虑以前的值，比如登录表单，我认为使用纯 HTML 输入会更好。

# angularjs - 无法使带有角度标签的自定义 html 与 select2 一起使用

> ID：15881982
> 
> 赞同：1
> 
> 时间：2013-04-08T14:37:27.047
> 
> 标签：angularjs

我正在使用 angular-ui 的 ui-select2。我想为选择添加自定义 html 格式。Select2 通过在其配置中指定 formatSelection 来实现这一点。

我有如下带有角度标签的html，我想用它来格式化选择-

```
var format_code = $compile('<div ng-click="showHide=!showHide" class="help-inline"><div style="cursor: pointer;" ng-show="!!showHide" ng-model="workflow.select" class="label">ANY</div><div style="cursor: pointer;" ng-hide="!!showHide" ng-model="workflow.select" class="label">ALL</div></div>')( $scope );

 var format_html = "<span>"  + data.n + ' : ' + data.v +' ng-bind-html-unsafe=format_code'+ "</span>"

$scope.select_config = {
    formatSelection: format_html
} 
```

如果我像上面那样编译 html 并分配它，我只会在浏览器中看到一个 [object,object] 呈现。如果我不编译它，我会看到正确呈现的 html，但不会发生角度绑定，即点击不起作用。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T21:33:01.193

我遇到了同样的问题，select2 在 jquery 对话框中加载，而不是使用我会给它的选项对象。

我最终做的是隔离指令中的元素，如下所示：

```
 define(['./module'], function (module) {
    return module.directive('dialogDirective', [function () {
      return {
        restrict: 'A',
        controller: function ($scope) {
          console.log('controller gets executed first');
          $scope.select2Options = {
            allowClear: true,
            formatResult: function () { return 'blah' },
            formatSelection: function () { return 'my selection' },
          };
        },
        link: function (scope, element, attrs) {
          console.log('link');
          scope.someStuff = Session.someStuff();

          element.bind('dialogopen', function (event) {
            scope.select2content = MyResource.query();
          });
        },
      }
    }]); 
```

和标记

```
 <div dialog-directive>
          {{select2Options}}
          <select ui-select2="select2Options" style="width: 350px;">
            <option></option>
            <option ng-repeat="item in select2content">{{item.name}}</option>
          </select>
          {{select2content | json}}
        </div> 
```

这里重要的是：

'controller' 函数在 html 被渲染之前被执行。这意味着当 select2 指令被执行时，它已经初始化了 select2Options 对象。

'link' 函数使用 MyResource $resource 异步填充 select2content 变量。

继续尝试，您应该会看到下拉列表中的所有元素都显示为“blah”，而选定的元素应显示为“我的选择”。

希望这会有所帮助，这是我第一次发帖。

# javascript - AngularJS：从路线弹出对话框？

> ID：15881984
> 
> 赞同：0
> 
> 时间：2013-04-08T14:37:27.753
> 
> 标签：javascript, angularjs, angularjs-routing

我有一个使用 AngularJS 的管理 CRUD 界面。一切都很好，除了一个问题：我想要一个用于编辑/创建项目的弹出对话框，我无法做出不替换整个 ng-view 的路线。它是如何完成的，有可能吗？如果没有，那么我可以以某种方式定义跑步路线的替代方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:39:48.960

If your ok with using GET parameters for the pop-up dialog you can set reloadOnSearch to false on that route.

Something like:

```
$routeProvider.when('/channel/:channelid', {templateUrl: 'channel.html', reloadOnSearch: false}) 
```

Take a look at the Angularjs docs for more information: [http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng).$route

# drupal-7 - PDOException：找不到列

> ID：15881986
> 
> 赞同：0
> 
> 时间：2013-04-08T14:37:29.423
> 
> 标签：drupal-7

我刚刚接手了一个老同事做的 Drupal 7.14 网站。我已经登录，但是每当我转到管理 > 内容并单击“编辑”以编辑我的任何基本页面的内容时，我都会收到以下错误消息：

> PDOException：SQLSTATE [42S22]：未找到列：1054 'where 子句'中的未知列 'source'：SELECT url_alias.* FROM {url_alias} url_alias WHERE (source = :db_condition_placeholder_0) ；path_load() 中的数组（ [:db_condition_placeholder_0] => node/1 ）（/home/sites/mediamatterstechnology.com/public_html/includes/path.inc 的第 419 行）。

此外，如果我进入 Admin > Configuration > URL Aliases，我会收到类似的消息，如下所示：

> PDOException：SQLSTATE [42S22]：找不到列：1054 'where 子句'中的未知列'语言'：SELECT 1 FROM {url_alias} WHERE 语言 <>：语言限制 0、1；path_admin_overview() 中的数组（ [:language] => und ）（/home/sites/mediamatterstechnology.com/public_html/modules/modules/path/path.admin.inc 的第 18 行）。

对于这方面的任何帮助，我将不胜感激。我已经为此工作了好几天，但我是 Drupal 的新手。

![截屏](https://i.stack.imgur.com/i8zx5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:18:28.430

[Drupal 5](http://api.drupal.org/api/drupal/modules!system!system.install/function/system_install/5)和[Drupal 6](http://api.drupal.org/api/drupal/modules!system!system.install/function/system_schema/6)没有这些字段中的一个（或两个）。该数据库不包含这些字段的原因可能是：

*   网站从 Drupal 5 / Drupal 6 更新到 Drupal 7，更新不成功
*   数据库已损坏
*   一个模块从数据库中删除了字段
*   这些字段被手动删除

您可以做的是将缺少的字段添加到数据库中，尝试首先更新现有字段（如果站点是从以前的 Drupal 版本更新的，并且更新不成功）。

以下代码应该有所帮助。

```
// Drop indexes.
@db_drop_index('url_alias', 'src_language_pid');
@db_drop_unique_key('url_alias', 'dst_language_pid');

// Rename the fields, and increase their length to 255 characters.
@db_change_field('url_alias', 'src', 'source', array('type' => 'varchar', 'length' => 255, 'not null' => TRUE, 'default' => ''));
@db_change_field('url_alias', 'dst', 'alias', array('type' => 'varchar', 'length' => 255, 'not null' => TRUE, 'default' => ''));

if (db_field_exists('url_alias', 'language')) {
  $spec = array(
    'description' => "The language this alias is for; if 'und', the alias will be used for unknown languages. Each Drupal path can have an alias for each supported language.",
    'type' => 'varchar',
    'length' => 12,
    'not null' => TRUE,
    'default' => '',
  );
  db_change_field('url_alias', 'language', 'language', $spec);
  db_update('url_alias')
    ->fields(array('language' => LANGUAGE_NONE))
    ->condition('language', '')
    ->execute();
}
else {
  $spec = array(
    'description' => "The language this alias is for; if 'und', the alias will be used for unknown languages. Each Drupal path can have an alias for each supported language.",
    'type' => 'varchar',
    'length' => 12,
    'not null' => TRUE,
    'default' => '',
  );
  db_add_field('url_alias', 'language', $spec);
}

// Add indexes back.
@db_add_index('url_alias', 'source_language_pid', array('source', 'language', 'pid'));
@db_add_index('url_alias', 'alias_language_pid', array('alias', 'language', 'pid')); 
```

如果此代码没有获取缺失的字段，则它不是失败的更新。在这种情况下，您可以使用以下代码，当您确定站点不是从早于 Drupal 7 的 Drupal 版本更新时，应该使用该代码。

```
// Drop indexes.
@db_drop_index('url_alias', 'src_language_pid');
@db_drop_unique_key('url_alias', 'dst_language_pid');

$spec = array(
  'description' => "The language this alias is for; if 'und', the alias will be used for unknown languages. Each Drupal path can have an alias for each supported language.",
  'type' => 'varchar',
  'length' => 12,
  'not null' => TRUE,
  'default' => '',
);
db_add_field('url_alias', 'language', $spec);

$spec = array(
  'type' => 'varchar',
  'length' => 255,
  'not null' => TRUE,
  'default' => ''
);

db_add_field('url_alias', 'source', $spec);

// Add indexes back.
@db_add_index('url_alias', 'source_language_pid', array('source', 'language', 'pid'));
@db_add_index('url_alias', 'alias_language_pid', array('alias', 'language', 'pid')); 
```

该代码是根据在更新以前的 Drupal 版本时从系统模块使用的更新代码编写的。我添加的部分是创建数据库字段的部分，因为数据库字段通常是在 Drupal 安装期间创建的。

# android - 我需要丰富的 ui 经验到 android 吗？

> ID：15881991
> 
> 赞同：1
> 
> 时间：2013-04-08T14:37:48.897
> 
> 标签：android, user-interface, adt, eclipse-adt

我开始进入 android 世界，但我心中有个问题让我怀疑。我们都知道，一个应用要想吸引人，就必须为用户提供良好的 ui 体验。尽管我在开发企业 Web 应用程序方面拥有丰富的前端经验，但我对图形设计一无所知。我真的需要拥有图形知识来创建具有视觉吸引力的应用程序吗？Java 是我的故乡，我对实际编程的任何方面都没有意见。这是唯一让我思考的事情。我非常想听听您对此事的意见，如果您能指出一些方向，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:51:31.943

虽然不需要成为 UI/UX/Photoshop 专家，但它肯定会有所帮助。您应该首先查看 Google 制定的设计指南。它非常广泛，涵盖了您的应用程序的外观和行为方式：

[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

在 Android 中，通过使用常用主题和默认 UI 元素来开发保持常用外观的应用程序相对容易。并且有很多[工具](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)可以为您提供图标和 UI 元素的基本、股票主题外观。但是，如果您想要一个具有独特外观和感觉的自定义外观应用程序，您将需要能够创建自己的 UI 资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:47:49.067

我认为你*不需要*它，但它肯定有帮助。很多安卓用户都喜欢 Holo UI，所以坚持下去。所有的图标都是现成的并且可以免费使用。只要确保您没有滥用任何图标（例如，使用垃圾桶进行保存）。

# javascript - Backbone.js / Marionette.js 全局模块事件绑定...？

> ID：15881998
> 
> 赞同：0
> 
> 时间：2013-04-08T14:38:00.817
> 
> 标签：javascript, backbone.js, marionette, backbone-events

我正在尝试查看是否有一种方法可以自动将`start`, `stop`,`before:start`事件绑定到所有已初始化的模块，而无需`this.on('start',function() {})`向每个模块添加样板。

我只是通过这些函数进行一些基本的日志记录/调试，以帮助我更好地了解我的基础架构，如果我可以定义类似于如何覆盖原型被覆盖的事件，那就太酷了。

为了完成这样一个看似简单的任务，我必须添加“样板”类型的示例。显然这是在咖啡里......

```
@on "before:start", ->
  console.log "starting: #{Self.moduleName}"
  return
@on "start", (defaults)->
  _init()
  console.log "started: #{Self.moduleName}"
  return
@on "stop", () ->
  console.log "stopped: #{Self.moduleName}"
  return

  _init = () ->
    return 
```

我的第一个想法是以`MyApp.module()`某种方式覆盖该函数并将事件绑定放在那里？不知道我会怎么做... :-/

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:59:36.940

我会照你说的做。
您可以覆盖构造函数。但是如果你这样做，你必须非常小心，并重新绑定任何静态方法和绑定到它的原型。基本上，你可以这样做：

```
var module = Marionette.Module;
Marionette.Module = function() {
  // this would be bound BEFORE anything else happens
  this.on('before:start', ...);

  module.apply(this, arguments);

  // this would be bound AFTER anything else happens
  this.on('before:start', ...);
}; 
```

再说一次，你必须在之后重新绑定原型和静态方法。

**编辑：**
关于重新绑定：

```
// save the prototype and any static method (or value)
var protoProps = Marionette.Module.prototype;
// this is maybe only the extend function
var staticProps = {};
for(var prop in Marionette.Module) staticProps[prop] = Marionette.Module[prop];

// override the Module
var module = Marionette.Module;
Marionette.Module = function() {
  ...
};

// rebind
Marionette.Module.prototype = protoProps;
_.extend(Marionette.Module, staticProps); 
```

# mysql - 数据库中 x 值的序列

> ID：15881999
> 
> 赞同：0
> 
> 时间：2013-04-08T14:38:03.177
> 
> 标签：mysql, sql

示例：我的查询有 200 个结果。

```
Result
----------    
true
false
false
true
true
true
false
false
.
.
. 
```

我可以知道我的结果中是否有一个 x "true" 的序列，使用 mysql 吗？

示例：我想知道在这个结果中我是否有 20 个“真”序列，不间断，在这 20 个“真”之间没有一个假。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:31:04.503

以下是我的两个假设：

1.  `result`是一个`varchar`
2.  该查询还返回`id`将用于设置顺序的，因此我们有一个明确的顺序（如果您的原始查询已经应用了一致的顺序，那么您可能不需要订购外部查询）。

以下代码将在不间断的序列中计算“真”的**最大值**`Table1`（您需要将其应用于您的子查询）：

```
SET @n = 0;
SELECT MAX(CASE WHEN result = 'true' THEN @n:=@n+1 ELSE @n:=0 END ) AS "Maximum Number of True"
FROM Table1
ORDER BY id; 
```

因此，您将确定返回的最大值是否**至少为 20**（在您的情况下）。

这是您可以试验的[SQL Fiddle 。](http://sqlfiddle.com/#!2/36503/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:48:02.143

这是 SQL 数据：

```
create table results
(
  result bool not null
);

insert into results values (1);
insert into results values (0);
insert into results values (0);
insert into results values (1);
insert into results values (1);
insert into results values (1);
insert into results values (0);
insert into results values (0); 
```

这是查询：

```
SELECT result, MAX(streak)
FROM (
      SELECT result,
             IF(result=@prev, @rownum:=@rownum+1, @rownum:=1) AS streak, @prev:=result
      FROM results,
           (SELECT @prev:=NULL, @rownum:=1) vars
     ) sq
GROUP BY result
ORDER BY streak DESC 
```

结果是这样的：

```
1   3
0   2 
```

这告诉您，对于一个`1 = true`值，您有一个连续 3 个 1 的序列，而对于一个`0 = false`值，您有一个连续 2 个 0 的序列。

使用数据的 SQL Fiddle：[http ://sqlfiddle.com/#!2/2f706/12](http://sqlfiddle.com/#!2/2f706/12)