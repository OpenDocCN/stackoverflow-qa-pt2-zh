# StackOverflow 问答 14596000-14596999

# javascript - 在 IE9 上显示以下内容的超大 JQuery 插件

> ID：14596000
> 
> 赞同：0
> 
> 时间：2013-01-30T03:04:42.270
> 
> 标签：javascript, jquery, css, jquery-plugins, supersized

我正在使用 Supersize 插件，它在 Chrome、FF 和 Safari 上运行良好，但在 IE9（以及 8 和 7）上却不行（惊喜，惊喜）。

背景图像出现在我的内容下方，而不是在其后面。

在这里查看网站：http: [//host.pixelframe.net.au/~pptestco/](http://host.pixelframe.net.au/~pptestco/)

我认为这应该是一个 css 修复，因为超大图像位于所有其他内容的下方，`ul`具有以下样式：

```
display: block;
position: fixed;
left: 0;
top: 0;
overflow: hidden;
z-index: -999;
height: 100%;
width: 100%; 
```

有人知道如何纠正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:50:09.027

好的 - 我使用的 CMS（ModX Revo）似乎预装了错误（或没有）DOCTYPE。

我已经添加

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

到我的模板（上面的`<html>`）标签，它似乎没问题！

# actionscript-3 - 显示玩家生命 /文本 Flash 游戏 CS6 AS3

> ID：14596004
> 
> 赞同：1
> 
> 时间：2013-01-30T03:05:11.303
> 
> 标签：actionscript-3, flash, flash-cs6

我正在使用 AS3 编写一个 Flash 游戏，其中玩家从 3 条生命开始，我希望它显示在屏幕上，但它只显示第一个字母“L”并且没有数字（int Lives）

这是相关代码（片段）

我有一个名为 txtLives 的空白文本框

```
var lives:int = 3;

txtLives.addEventListener(Event.ENTER_FRAME, updateTextFields);

function updateTextFields(event:Event):void{
 var lives:int = 3;
 var str:String = "Lives ";
 txtLives.text = str + String(lives);
 } 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:00:02.973

通过选择文本字段确保您的字体嵌入在文本字段中，然后在字符部分的属性选项卡上按“嵌入...”按钮。确认您想要的字符集都被选中。

![在此处输入图像描述](../Images/e9abcb3b2cdfe7444b6cd24494eaf1ca.png)

同样在您的功能中，您可以将其简化为：

```
function updateTextFields(event:Event):void
{
     txtLives.text = "Lives " + lives;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:51:38.877

或者您可以启用设备字体的使用。

![使用设备字体](../Images/022c093442caa89a12ac57cc532d9e91.png)

选择“使用设备字体”，您的代码应该可以按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T10:20:39.187

大声笑，如果上面那个人的技巧不起作用，那么请尝试扩展您的文本框。

# jquery - 使用 jquery on 方法知道 url 中的哈希何时更改

> ID：14596010
> 
> 赞同：0
> 
> 时间：2013-01-30T03:05:58.053
> 
> 标签：jquery

所以我有一个网址，它可能是 mywebsite.com/index.html#Jobs

我首先需要在我做的哈希之后得到名字

```
var $ext = $(location).attr('hash');
$ext= $ext.replace("#",""); 
```

问题是知道此哈希标记何时在实时事件中更改而不是页面刷新

这就是我尝试过的

```
var $ext = $(location).attr('hash');

$ext.('change', function() {

  console.log("changed");
}); 
```

我知道这不起作用，因为 $ext 不是元素，但需要一些帮助。

任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:09:56.250

使用这个插件：[http ://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

并使用此代码：

```
$(window).hashchange( function() {
    var hash = location.hash;
    myfunc(hash);
});
function myfunc(hash)  {
    alert(hash);
} 
```

您也可以使用但有一些兼容性问题：

```
window.onhashchange = function() {
    alert(window.location.hash);
} 
```

检查浏览器是否支持 hashchange：

```
if ("onhashchange" in window) {
    alert("The browser supports the hashchange event!");
} 
```

# javascript - 使 Javascript 函数参数成为变量的一部分

> ID：14596017
> 
> 赞同：-2
> 
> 时间：2013-01-30T03:06:56.593
> 
> 标签：javascript, variables, arguments

我想将函数的参数与变量合并但我不知道该怎么做。

```
firstDates = [];

function myFunction(partOne) {
    partOne + Dates.push(someOtherVar); 
}

myFunction(first); 
```

我知道这行不通，但是正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:11:21.783

为什么不这样呢？

```
var dates = {};

function myFunction(partOne) {
   dates[partOne] = [];               // dates["first"] = []
   dates[partOne].push(someOtherVar); // dates["first"].push(someOtherVar)
}

myFunction("first"); 
```

否则，您要完成的是评估类型的设置。这通常是一个非常糟糕的主意。不要使用动态命名的变量。

# ios - 覆盖类集群的方法时出现意外结果

> ID：14596019
> 
> 赞同：0
> 
> 时间：2013-01-30T03:07:14.980
> 
> 标签：ios, objective-c, macos, design-patterns

在实现 NSArray 的子类（类簇）时，我惊讶地发现我的覆盖描述方法没有被调用。有人可以解释这里发生了什么吗？

```
@interface MyArrayClassCluster : NSArray

@end

@implementation MyArrayClassCluster
{
    NSArray *_realArray;
}

// Implement the class cluser stuff here
- (NSUInteger)count
{
    return [_realArray count];
}

- (id)objectAtIndex:(NSUInteger)index
{
    return [_realArray objectAtIndex:index];
}

// lifeCycle

- (id)initWithItems:(NSArray *)items
{
    self = [super init];
    _realArray = [items retain];
    return self;
}

- (void)dealloc
{
    [_realArray release];
    [super dealloc];
}

- (NSString *)description
{
    return [NSString stringWithFormat:@"My Custom Array: %p, objs:%@", self, _realArray];
}

@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSArray *a = @[@1, @2, @3];
        NSLog(@"a: %@", a);
        MyArrayClassCluster *clzCluster = [[MyArrayClassCluster alloc] initWithItems:a];
        NSLog(@"clzCluster: %@", clzCluster);
    }
    return 0;
} 
```

输出

```
2013-01-29 18:52:38.704 ClassClusterTester[31649:303] a: (
    1,
    2,
    3
)
2013-01-29 18:52:38.707 ClassClusterTester[31649:303] clzCluster: (
    1,
    2,
    3
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:28:23.737

@Rob 指向的链接在底部有正确的答案。一个模糊的事实：如果某些东西实现了 descriptionWithLocale:，NSLog 会调用它。由于我的类是 NSArray 的子类，并且 NSArray 实现了它，所以我的描述版本没有被调用。

# java - 对这段代码感到困惑。Dijkstra 算法

> ID：14596020
> 
> 赞同：0
> 
> 时间：2013-01-30T03:07:34.327
> 
> 标签：java

重新编辑：对不起，如果我将代码粘贴到 pastebin。我不知道你们能这么快就结束一个问题。

所以我正在修改代码，完成后我不知道为什么我做错了，因为：

> 每次我在映射文件中添加一个条目时，它不是计算路径它在第八个节点上返回无穷大：它不提供堆栈跟踪，而是抛出：

```
Distance to Mandurriao: 0.0
Path: [Mandurriao]
Distance to Jaro: 79.0
Path: [Mandurriao, Jaro]
Distance to Iloilo: 118.0
Path: [Mandurriao, Jaro, Iloilo]
Distance to Leganes: 182.0
Path: [Mandurriao, Jaro, Leganes]
Distance to Tagbak: 81.0
Path: [Mandurriao, Tagbak]
Distance to Derp: 214.0
Path: [Mandurriao, Tagbak, Derp]
Distance to Herp: 305.0
Path: [Mandurriao, Tagbak, Derp, Herp]
Distance to Tugigarao: Infinity
Path: [Tugigarao] 
```

> 每次我使我的地图文件少于 7 个节点时，它都会给我：

```
Exception in thread "main" java.lang.NullPointerException
        at Dijkstra.search(Dijkstra.java:81)
        at Dijkstra.main(Dijkstra.java:132) 
```

我是一个完整的 java 菜鸟，而且我只像一天前那样编写 java 代码。

所以这里是代码：

```
import java.util.PriorityQueue;
import java.util.List;
import java.util.ArrayList;
import java.util.Collections;
import java.io.*;
import java.util.*;

class Vertex implements Comparable<Vertex>
{
    public final String name;
    public Edge[] adjacencies;
    public double minDistance = Double.POSITIVE_INFINITY;
    public Vertex previous;
    public Vertex(String argName) { name = argName; }
    public String toString() { return name; }
    public int compareTo(Vertex other)
    {
        return Double.compare(minDistance, other.minDistance);
    }

}

class Edge
{
    public final Vertex target;
    public final double weight;
    public Edge(Vertex argTarget, double argWeight)
    { target = argTarget; weight = argWeight; }
}

public class Dijkstra
{

    public static void computePaths(Vertex source)
    {
        source.minDistance = 0.;
        PriorityQueue<Vertex> vertexQueue = new PriorityQueue<Vertex>();
    vertexQueue.add(source);

    while (!vertexQueue.isEmpty()) {
        Vertex u = vertexQueue.poll();

            // Visit each edge exiting u
            for (Edge e : u.adjacencies)
            {
                Vertex v = e.target;
                double weight = e.weight;
                double distanceThroughU = u.minDistance + weight;
        if (distanceThroughU < v.minDistance) {
            vertexQueue.remove(v);

            v.minDistance = distanceThroughU ;
            v.previous = u;
            vertexQueue.add(v);
        }
            }
        }
    }

    public static List<Vertex> getShortestPathTo(Vertex target)
    {
        List<Vertex> path = new ArrayList<Vertex>();
        for (Vertex vertex = target; vertex != null; vertex = vertex.previous)
            path.add(vertex);

        Collections.reverse(path);
        return path;
    }

     ///////////////////////////////////////////////////////////////////////////

    public static int search(String [ ] numbers, String key)
    {
           for (int index = 0; index < numbers.length; index++)
          {
               if ( numbers[index].equals(key) )
                     return index;  //We found it!!!
          }
         // If we get to the end of the loop, a value has not yet
         // been returned.  We did not find the key in this array.
         return -1;
    }

    ///////////////////////////////////////////////////////////////////////
    public static void main(String[] args)
    {
        int MapLength = 0;
        Vertex[] v = new Vertex[100];
        String[] names = new String[100];
        System.out.println("Initalized");
        try {
            int i = 0;
            System.out.println("Initalized[0]");
            FileInputStream fStream = new FileInputStream("f:\\map2.txt");
            System.out.println("Initalized[1]");
            BufferedReader in = new BufferedReader(new InputStreamReader(fStream));
            System.out.println("Initalized[2]");
            while (in.ready()) {
                String parsed = "";
                parsed = in.readLine();
                String[] t = parsed.split(">");
                if(t[0].equals("v")){
                    System.out.println("Added>" + parsed);
                    v[i] = new Vertex(t[1]);
                    names[i] = t[1];
                    i++;
                    MapLength = i;
                    }

                if(t[0].equals("e")){
                    System.out.println("Initalized[3]");
                    int a;
                    int weight;
                    int ii = 0;

                    System.out.println("Initalized[4]." + t[1]);
                    String[] container = t[1].split("-");
                    System.out.println("Initalized[5]." + container);

                    Edge[] temp = new Edge[(container.length - 1) / 2];

                    for(a = 1; a < container.length; a +=2 ){
                        System.out.println("Initalized[6]." + names[search( names , container[ a ] )] + "...." + Integer.parseInt(container[ a + 1 ]));
                        temp[ii] = new Edge(v[ search( names , container[ a ] ) ], Integer.parseInt(container[ a + 1 ]));
                        ii++;
                        }
                    //System.out.println("Debug@LineCurrentNumberSearch: " +  search( names , container[ a ] ) );
                    v[ search( names , container[ 0 ] ) ].adjacencies = temp;

                    }

            }
            in.close();
        } catch (IOException e) {
            System.out.println("File input error" + e);
            }

/*
    v[0] = new Vertex("Harrisburg");
    v[1] = new Vertex("Baltimore");
    v[2] = new Vertex("Washington");
    v[3] = new Vertex("Philadelphia");
    v[4] = new Vertex("Binghamton");
    v[5] = new Vertex("Allentown");
    v[6] = new Vertex("New York");

    v[0].adjacencies = new Edge[]{ new Edge(v[1],  79.83), new Edge(v[5],  81.15) };

    v[1].adjacencies = new Edge[]{ new Edge(v[0],  79.75),
                                 new Edge(v[2],  39.42),
                                 new Edge(v[3], 103.00) };
    v[2].adjacencies = new Edge[]{ new Edge(v[1],  38.65) };
    v[3].adjacencies = new Edge[]{ new Edge(v[1], 102.53),
                                 new Edge(v[5],  61.44),
                                 new Edge(v[6],  96.79) };
    v[4].adjacencies = new Edge[]{ new Edge(v[5], 133.04) };
    v[5].adjacencies = new Edge[]{ new Edge(v[0],  81.77),
                                 new Edge(v[3],  62.05),
                                 new Edge(v[4], 134.47),
                                 new Edge(v[6],  91.63) };
    v[6].adjacencies = new Edge[]{ new Edge(v[3],  97.24),
                                 new Edge(v[5],  87.94) };
*/

    Vertex[] vertices = new Vertex[MapLength];
    int j;
    for(j = 0; j < MapLength; j++){
        vertices[j] = v[j];
        }

        computePaths(v[0]);
        for (Vertex a : vertices)
    {
        System.out.println("Distance to " + a + ": " + a.minDistance);
        List<Vertex> path = getShortestPathTo(a);
        System.out.println("Path: " + path);
    }
    }
} 
```

这是地图文件：

```
v>Mandurriao
v>Jaro
v>Iloilo
v>Leganes
v>Tagbak
v>Derp
v>Herp
v>Tugigarao
e>Mandurriao-Jaro-79-Tagbak-81
e>Jaro-Mandurriao-79-Iloilo-39-Leganes-103
e>Iloilo-Jaro-38
e>Leganes-Jaro-102-Tagbak-61-Derp-69
e>Tagbak-Derp-133
e>Derp-Mandurriao-81-Leganes-62-Tagbak-134-Herp-91
e>Herp-Leganes-97-Derp-87
e>Tugigarao-Herp-100 
```

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:12:02.130

如果输入文件包含以下条目：

```
v>Mandurriao
v>Jaro
v>Iloilo
v>Leganes
v>Tagbak
v>Derp
e>Mandurriao-Jaro-79-Tagbak-81
e>Jaro-Mandurriao-79-Iloilo-39-Leganes-103
e>Iloilo-Jaro-38
e>Leganes-Jaro-102-Tagbak-61-Derp-69
e>Tagbak-Derp-133 
```

顶点“Derp”没有任何相邻顶点，因此 u.adjacency 为空，导致小于 7 的条目出现空指针异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:23:22.007

好吧，只是为了向任何人展示是否有一些 Google 员工偶然发现了这里。

它计数到无穷大的原因是没有节点引用“Tugigarao”顶点，因此没有显示到它的路径。正如你可能会说的，你可以从顶点出来，但你不能进来，因为没有参考或边。

# powershell - 设置文档的元数据字段

> ID：14596022
> 
> 赞同：0
> 
> 时间：2013-01-30T03:07:39.140
> 
> 标签：powershell, sharepoint-2010

我想设置文档的`title`字段。`.docx`如何在 PowerShell 中实现这一点？

# monodevelop - 有没有办法在 Mono Develop 中关闭代码完成？

> ID：14596023
> 
> 赞同：2
> 
> 时间：2013-01-30T03:07:43.270
> 
> 标签：monodevelop

有没有办法在 Mono Develop 中关闭代码完成？
我正在使用版本 2.8.6.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:40:39.493

转到“文本编辑器->常规”面板并取消选中“启用代码完成”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:12:59.367

假设您遇到了[此处描述的错误](http://codethatworks.blogspot.com/2009/10/how-to-fix-monodevelop-code-completion.html)，解决方案*不是*禁用代码完成。相反，解决方案如下：

1.  关闭 MonoDevelop
2.  打开终端应用程序
3.  运行这个命令：rm -r ~/.config/MonoDevelop/CodeCompletionData
4.  重启 MonoDevelop

# java - 如何从 .t xt 文件中读取数据并将数据放入对象的数组列表中？

> ID：14596027
> 
> 赞同：3
> 
> 时间：2013-01-30T03:08:26.743
> 
> 标签：java, arraylist

到目前为止，我所写的内容基于我目前对基本数组的了解，但我只是不明白如何使用数组列表，或者如何从文件中读取。到目前为止，我所写的内容有效。任何有助于修复我的代码以从文件中读取并使用数组列表的链接或建议将不胜感激。谢谢你。

* * *

```
public class TestPackages
{
   public static void main (String[] args) 
    {
       Packages testPackages = new Packages();

       testPackages.addPacket(1001, 7.37, "CA");
       testPackages.addPacket(1002, 5.17, "CT");
       testPackages.addPacket(1003, 11.35, "NY");
       testPackages.addPacket(1004, 20.17, "MA" );
       testPackages.addPacket(1005, 9.99, "FL");
       testPackages.addPacket(1006, 14.91, "VT");
       testPackages.addPacket(1007, 4.97, "TX");

       System.out.println(testPackages); 
    }
}

-------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------

import java.util.Scanner;
import java.io.*;
import java.util.ArrayList;

public class Packages
{
   private Packet[] shipment;
   private int count;
   private double totalWeight;

   public Packages()
   {
      shipment = new Packet[100];
      count = 0;
      totalWeight = 0.0;
   }

   public void addPacket (int idNumber, double weight, String state)
   {
      if(count == shipment.length)
         increaseSize();

      shipment[count] = new Packet (idNumber, weight, state);
      totalWeight += weight;
      count++;
   }

   public String toString()
   {
      String report;

      report = "All Packets\n";
      for(int num = 0; num < count; num++)
         report += shipment[num].toString() + "\n";

      report += "Total Weight:\t" +totalWeight+" pounds";
      return report;
   }

   private void increaseSize()
   {
      Packet[] temp = new Packet[shipment.length * 2];

      for (int num = 0; num < shipment.length; num++)
         temp[num] = shipment[num];

      shipment = temp;
   } 
}

-------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------

public class Packet
{
   private int idNumber;
   private double weight;
   private String state;

   public Packet(int idNumber, double weight, String state)
   {
      this.idNumber = idNumber;
      this.weight = weight;
      this.state = state;
   }

   public boolean isHeavy(double weight)
   {
      return (weight > 10);
   }

   public boolean isLight(double weight)
   {
      return (weight < 7);
   }

   public String toString()
   {
      String description = "ID number: " + idNumber + "\tWegiht: " + weight + "\tState: " 
      + state;

      return description;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T12:18:46.223

在java中有很多方法可以逐行读取文件。但我更喜欢使用[commons-io](http://commons.apache.org/proper/commons-io/)工具。这是一个非常有用的工具，提供从文件中读取。这是一个单行示例。

```
List<String> lines = FileUtils.readLines(new File(fileName)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:55:34.837

试试这个链接来学习如何用 JAVA 从文件中读取

[如何使用 Java 逐行读取大文本文件？](https://stackoverflow.com/questions/5868369/how-to-read-a-large-text-file-line-by-line-in-java)

你可以试试下面的代码来学习如何使用Arraylist（网上还有很多教程）

```
Packet p1=new Packet (1001, 7.37, "CA");
Packet p2=new Packet (1002, 17.5, "SF");
Packet p3=new Packet (1003, 13.8, "DF");
Packet p4=new Packet (1004, 14.4, "XC");

ArrayList<Packet> arr= new ArrayList<Packet>();

arr.add(p1);
arr.add(p2);
arr.add(p3);
arr.add(1,p4);

System.out.println("return the 2st element- " + arr.get(1) );
System.out.println("return the 4rd element- " + arr.get(3) );

System.out.println("Size of ArrayList after insertion- " + arr.size());
System.out.println("Elements of ArrayList after insertion- " + arr);

arr.remove(p2); 
arr.remove(2);

System.out.println("Size of ArrayList after deletion- " + arr.size());
System.out.println("Elements of ArrayList after deletion- " + arr); 
```

# susy-compass - Susy 语法错误：未定义的混合 'span-columns'

> ID：14596028
> 
> 赞同：0
> 
> 时间：2013-01-30T03:08:30.827
> 
> 标签：susy-compass

我是 Susy 的新手，我正在尝试使用 span-columns mixin，但是我收到以下错误：

```
Syntax error: Undefined mixin 'span-columns' 
```

我已经安装了 compass-susy-plugin (0.9)，但没有安装 Susy gem。

SCSS 文件包括 screen.scss 和 _base.scss

**屏幕.scss**

```
// Imports -------------------------------------------------------------------

@import "base";
@import "typography";

/* Layout ------------------------------------------------------------------*/

.container {
  @include container;
  @include susy-grid-background;
}

.main {
    @include span-columns(8,12);
}

.left-sidebar {  
  @include columns(2);  
  @include alpha;
  background-color: red;  
}

.right-sidebar {  
  @include columns(2);  
  @include omega;  
  background-color: red;
} 
```

**_base.scss**

```
// Imports -------------------------------------------------------------------

@import "susy";

// Grid ----------------------------------------------------------------------

$total-cols             : 12;
$col-width              : 4em;
$gutter-width           : 1em;
$side-gutter-width      : $gutter-width;

$show-grid-backgrounds  : true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:06:16.480

根据我拥有的更改日志，0.9 版中的列 mixin 在 1.0 版中被重命名为 span-columns，所以我会说跨度列 mixin 在 Susy 的 0.9 分支中不存在。

当前版本是 1.0.5，这是我正在使用的没有问题的版本（到目前为止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T19:10:18.330

这是文档的另一个答案：

> Susy 2.x 并排支持两种语法选项。如果您想使用最新版本但保留旧语法，请将您的导入从 susy 更改为 susyone。

// 安装了 Susy 2.x... @import "susyone";

# javascript - 打开 2 个窗口 javascript

> ID：14596033
> 
> 赞同：0
> 
> 时间：2013-01-30T03:09:02.137
> 
> 标签：javascript

如何使用 javascript 重定向当前页面并打开另一个弹出窗口！那可能吗？有风险吗？谢谢你

更新：

```
 I am trying now to: 
  var myid=  "<xsl:value-of select="@ID" />"
  which works for
  document.location.href = http://... + myid
 but won't work for 
 window.open=("http://... "+ myid) 
```

知道我做错了什么。windows.open 没有任何价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:14:15.663

# 1 打开新窗口

```
window.open("http://stackoverflow.com/") 
```

# 2 重定向

```
window.location = "http://stackoverflow.com/" 
```

注意：这里的顺序很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:14:12.667

使用可以使用 window.open 打开一个新窗口：

```
window.open("http://www.example.com"); 
```

您可以更新文档的位置以进行简单的重定向：

```
document.location = "http://www.example.com"; 
```

这样做的缺点是，如果用户没有预料到，额外的窗口往往会惹恼用户，并且一些浏览器/弹出窗口阻止程序根本不允许打开新窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T03:12:45.220

重定向：

```
window.location.href = "http://someothersite.com"; 
```

弹出：

```
window.open("http://somepopup.com","newWindowNameHere"); 
```

您可以在新窗口中指定各种功能。请参阅[此参考。](https://developer.mozilla.org/en-US/docs/DOM/window.open)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T03:12:56.370

您可以通过更改的值使 javascript 加载新页面`location.href`

您可以使用 javascript 打开一个新的弹出窗口`window.open()`

仅供参考，许多浏览器和插件会提示访问者允许/拒绝弹出窗口，或者完全拒绝它。

# javascript - 整个 li 元素消失了

> ID：14596035
> 
> 赞同：0
> 
> 时间：2013-01-30T03:09:09.637
> 
> 标签：javascript, html, css, wordpress

自定义 wordpress 主题，并遇到非常奇怪的问题。

[http://dev.epicwebdesign.ca/evandentremont.com/](http://dev.epicwebdesign.ca/evandentremont.com/)

每当我尝试在滑块上显示 li 时，如果它们都有背景图像，则整个滑块都是空白的。如果其中一个 li 没有背景，它可以正常工作。

根本没有 PHP 或 JS 错误，当我使用 chrome 的代码检查器时，这些块似乎就在那里，只是不可见。如果我将鼠标悬停在上面，我会看到 ul、li 和滑动。

我怎样才能阻止这种情况发生？

```
<li style="
display:block; 
background-image:URL(http://dev.epicwebdesign.ca/evandentremont.com/wp-content/uploads/2013/01/5qqoq5weno_210218126-2.jpg) ; 
height:300px; 
webkit-background-size: cover; 
moz-background-size: cover;
o-background-size: cover; 
background-size: cover; 
"> 
```

[http://jsfiddle.net/HZ26M/](http://jsfiddle.net/HZ26M/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:49:10.453

仅当您的幻灯片包含至少一个图像时，您的滑块选项才会触发其事件（检查lofslider`isPreloaded`的[第](http://dev.epicwebdesign.ca/evandentremont.com/wp-content/themes/max-magazine/js/lofslider.js?ver=3.5.1)247 行）。`complete`

您可以将此选项设置为`false`或确保滑块中至少有一个图像。

或者改变它！

# c++ - 在c ++中用另一个替换一个ascii字符的所有实例？

> ID：14596037
> 
> 赞同：0
> 
> 时间：2013-01-30T03:09:16.323
> 
> 标签：c++

> **可能重复：**
> [如何替换字符串中所有出现的字符？](https://stackoverflow.com/questions/2896600/how-to-replace-all-occurrences-of-a-character-in-string)

例如，我有一个字符串“Hello World”，我想用“1”替换所有“l”。我该怎么做？我是 C++ 新手。我的大部分背景都在 Python 中，您可以在其中使用 .replace 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T03:10:52.890

使用`std::replace`.

```
#include <string>
#include <algorithm>
#include <iostream>

int main() {
    std::string str = "Hello World";
    std::replace(str.begin(),str.end(),'l','1');
    std::cout << str; //He11o Wor1d
} 
```

# sql - 不选择底行

> ID：14596040
> 
> 赞同：1
> 
> 时间：2013-01-30T03:09:30.213
> 
> 标签：sql, sql-server, sql-server-2005

我有这个[LINK](http://sqlfiddle.com/#!3/c72cd/1)，

为什么直到最后一行才算？

我想要输出直到最后一行。
它计算**STATUS = 0的间隔**

```
 CREATE TABLE [Alerts]
(
  [Timestamp] datetime,
  [Status] int
)

INSERT INTO [Alerts] ([Timestamp], [Status])
  VALUES
    ('2013-1-1 00:00:00', 1),
    ('2013-1-1 00:00:05', 1),
    ('2013-1-1 00:00:10', 2),
    ('2013-1-1 00:00:15', 2),
    ('2013-1-1 00:00:20', 0),
    ('2013-1-1 00:00:25', 1),
    ('2013-1-1 00:00:30', 1),
    ('2013-1-1 00:00:32', 2),
    ('2013-1-1 00:00:35', 2),
    ('2013-1-1 00:00:40', 0),
    ('2013-1-1 00:00:45', 0),
    ('2013-1-1 00:00:50', 0) 
```

我试过这个：

```
SELECT
  MIN ([main].[Start]) AS [STOP_Begin],
  [main].[End] AS [STOP_End],
  DATEDIFF(s, MIN([main].[Start]), [main].[End]) AS [Interval_Second]
FROM
(
  SELECT
    [sub].[Start],
    MIN([sub].[End]) AS [End]
  FROM
  (
    SELECT
      [start].[Timestamp] AS [Start],
      [start].[Status] AS [StartingStatus],
      [end].[Timestamp] AS [End],
      [end].[Status] AS [EndingStatus]
    FROM [Alerts] [start],  [Alerts] [end]
    WHERE [start].[Status] = 0
      AND [start].[Timestamp] < [end].[Timestamp]
      AND [start].[Status] <> [end].[Status]
  ) AS [sub]
  GROUP BY
    [sub].[Start],
    [sub].[StartingStatus]
) AS [main]
GROUP BY
  [main].[End] 
```

它给出输出：
![输出](../Images/9d0e56bcd9ad97a97689b71a9ad27530.png)

我希望输出直到最后一行，如果**0**是最后一行，它给我**Interval=NULL**，我的问题
它直到最后一行**0才算在内**

我想要的结果：

```
 ---------STOP_BEGIN-----         --------STOP_END--------- ----INTERVAL_SECOND-----<br />
January, 01 2013 00:00:20+0000  January, 01 2013 00:00:25+0000      5
January, 01 2013 00:00:40+0000           NULL                       NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:36:02.513

这是您的查询（我已将其添加到您底部的 SQL Fiddle 中）

```
SELECT
  MIN ([main].[Start]) AS [STOP_Begin],
  [main].[End] AS [STOP_End],
  DATEDIFF(s, MIN([main].[Start]), [main].[End]) AS [Interval_Second]
FROM
(
  SELECT
    [starts].[Start],
    MIN([ends].[Timestamp]) AS [End]
  FROM
  (
    SELECT
      [Timestamp] AS [Start]
    FROM [Alerts]
    WHERE [Status] = 0
  ) AS [starts] LEFT JOIN [Alerts] AS [ends]
  ON  [starts].[Start] < [ends].[Timestamp]
  AND [ends].[Status] <> 0
  GROUP BY
    [starts].[Start]
) AS [main]
GROUP BY
  [main].[End]
ORDER BY 1 
```

# xml - 如何让 XML 注释出现在生成的 XSD 中？

> ID：14596041
> 
> 赞同：1
> 
> 时间：2013-01-30T03:09:50.850
> 
> 标签：xml, xsd, xml-comments, xml-attribute

如果我有`XML`遵循以下模式的文档，我如何`XSDs`为这些文档生成但将注释转换为注释标签？

```
<ELEMENT1>

  <!--
  documentation text ....
  -->
  <ELEMENT2>
    <ELEMENT3>ABC</ELEMENT3>
  </ELEMENT2>

  <!--
  documentation text ....
  -->
  <ELEMENT4>
    <ELEMENT5>0534564117</ELEMENT5>
    <ELEMENT6>123456</ELEMENT6>
    <ELEMENT7>090314b4-fc7d-42c5-b382-a5b745671ee32b</ELEMENT7>
  </ELEMENT4>

</ELEMENT1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:15:32.170

很难从你的问题中看出你在这里发现了什么困难。你试过什么？您有什么想法但由于某种原因尚未尝试过？那是什么原因？

有许多工具可用于从 XML 文档集合生成文档语法（以 DTD、Relax NG 模式或 XSD 模式的形式）；搜索“语法归纳”或“语法推理”和“XML”会出现一些工具（在 Stack Overflow 上，搜索`XML Trang`或`xml xsd.exe`将产生许多命中），而且我相信面向 XML 的开发环境包含从样本生成模式的功能并不少见（通常在后台使用相同的开源工具）。然而，这些工具的本质是试图从几个样本中推断出一般语法，这意味着任何一个输入文件中的注释都不太可能有趣或重要到值得包含在模式中。因此，您不太可能找到带有开关的现成语法推理工具，以使其将输入中的注释复制到输出中的注释中。

另一方面，您的问题的标题听起来好像您已经知道如何从 XML 输入生成 XSD 模式，并且您只是在寻求有关如何使 XML 中的注释可供该过程访问的建议那就是生成模式。在这种情况下，答案是：使用一种编程语言或 XML 解析器接口，让您可以访问评论。XSLT 或 SAX2 是显而易见的选择。（另一方面，任何对 XML 足够了解以知道如何从 XML 实例集合生成有用模式的人都不太可能对如何读取 XML 输入中的注释有任何疑问。所以我想这不是真的问题。）

您的选择包括：

*   使用 SAX2 接口（或任何其他公开注释的解析器 API）以您选择的编程语言读取 XML 实例并生成模式。
*   在 XSLT 中编写模式生成器，并使用`<xsl:template match="comment()"> ... </xsl:template>`模板来处理输入中的注释并`xs:documentation`在作为输出生成的 XSD 模式文档中生成元素。
*   使用现成的模式生成器（例如，Trang）为您的数据生成模式文档，然后编写 XSLT 样式表或 SAX 过滤器以重新读取 XSD 模式文档和您的 XML 输入，提取注释中的注释XML 输入，识别注释相关的声明，并再次写出模式文档，`xs:annotation`并`xs:documentation`在适当的点插入元素，其中包含来自 XML 输入的注释。

# svn - 如何将基于文件的 Tortoise SVN 存储库移动到基于 HTTP 的存储库？

> ID：14596048
> 
> 赞同：1
> 
> 时间：2013-01-30T03:11:00.930
> 
> 标签：svn, tortoisesvn

我有许多 SVN 存储库，由 Tortoise SVN 客户端使用 file:// 访问网络路径创建和访问。我希望能够使用 http:// 访问这些现有存储库。我不知道是否可以在现有存储库上更改它，或者是否需要将其复制到新存储库中。

无论哪种方式，如果有人可以概述实现此目的的最简单方法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:11:43.130

1.  安装[VisualSVN 服务器](http://www.visualsvn.com/server/getting-started/)，
2.  将您的存储库放入`C:\Repositories\`或设置 VisualSVN 服务器以使用存储在网络共享上的存储库。

完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:37:16.763

那么，您现在正在通过`file://`协议访问文件吗？共享存储库不是一个好主意。特别是如果它们在网络驱动器上而不是您的本地计算机上。

首先，澄清一下：

这里有两个不同的 Subversion 程序： * 客户端 * 服务器

TortoiseSVN 是一个***客户端*程序**。无论使用哪种类型的 SUBversion 服务器，您都可以使用它来访问 Subversion 存储库。说“我如何移动基于文件的 TortoiseSVN 存储库”会使客户端程序 (TortoiseSVN) 与服务器协议混淆。移动文件后，您可以使用 TortoiseSVN。

现在，进入服务器...

Subversion 可以使用三种服务器协议：

*   `file:///`: 不推荐用于标准使用，绝对不应该用于共享或远程存储库。该`file://`协议很有用，因为它很快。许多 Subversion 网页浏览平台，如 Fisheye 或 ViewVC 都使用它。
*   `svn://`: 这使用`svnserve`服务器。它使用起来既快速又简单。与多用户访问一起使用很好，并且易于设置。将其设置为[Windows 服务](http://subversion.open.collab.net/articles/svnserve-service.htm)的说明比比皆是。主要问题往往是您的网络是否阻止端口 3690。此外，安全性往往不太灵活。例如，我喜欢使用 Windows Active Directory 来保证安全性，`svnserve`但并不容易做到这一点。安全设置很简单（它只是一个易于理解的文本文件），但必须有人维护它。
*   `http://`：这通过 Subversion 插件模块使用 Apache 服务器。设置起来很棘手，但它是最灵活的。另外，由于它通常不在端口 80 上，因此通常不会被路由器阻止。幸运的是，那里有许多*包*，其中包括为 Windows 配置了 Apache 的 Subversion

我建议您`svnserve`先尝试并使其正常工作。您不必安装其他程序，这是最容易上手的。这可能就是你真正需要的。

一旦你开始工作，你可以尝试使用基于 Apache 的包之一。我推荐 CollabNet Edge。它允许您做一些事情，例如使用 Windows Active Directory 来确保安全，而无需为此支付额外费用。（这是使用 Apache 的真正原因）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T13:19:45.667

有很多方法可以做到这一点：

*   使用[uberSVN](http://www.wandisco.com/ubersvn)、VisualSVN Server 或 Collabnet Edge 之类的 GUI。这些产品消除了您的烦恼，为您提供了实现目标的最快和最简单的方法，并且它们可以免费下载和安装（VisualSVN Server 和 Edge 也有付费企业版）。
*   使用托管解决方案，例如 Assembla 或 Beanstalk。这些对于快速入门很有用，但要注意内存限制或额外成本。
*   您可以自己安装 Apache HTTP Server 并将其设置为为存储库提供服务 - 此处的优秀 SVNBook（带有 Subversion 的版本控制）一书中[的说明](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html)。可能是最困难的，但会给你最终的控制权，同时你会了解它实际上是如何完成的。:)

# java - 格点和复数

> ID：14596051
> 
> 赞同：1
> 
> 时间：2013-01-30T03:11:27.777
> 
> 标签：java

我很难使用复数代码的乘法方法。这条线似乎给我带来了最大的麻烦：

```
public IntegerComplex multiply(IntegerComplex a){
    return new IntegerComplex((this.c*a.c - this.d*a.d)+(this.c*a.c + this.d*a.d));
} 
```

我一辈子都想不通；现在我以前从未编码过复数

```
 public class LatticePoint {

        private int x;
        private int y;
        protected double distance;

        public LatticePoint()
        {
            x = 0;
            y = 0;
        }

        public LatticePoint(int x, int y){
            setX(x);
            setY(y);
        }

        public void setX(int x){
            this.x = x;
        }

        public int getX()
        {   
            return this.x;
        }

        public void setY(int y){
            this.y = y;     
        }

        public int getY()
        {
            return this.y;
        }

        public double distance(LatticePoint p){
            LatticePoint q = new LatticePoint(p.x - this.y, p.y - this.x);
            return q.distance();

        }

        public double distance()
        {
            return Math.sqrt((x*x)+(y*y));
        }

        public LatticePoint add(LatticePoint p){
            return new LatticePoint(this.x + p.x, this.y + p.y);
        }

        //returns this - p
        public LatticePoint sub(LatticePoint p){
            return new LatticePoint(this.x - p.x, this.y - p.y); 
        }

        public static void main(String[] args) {
            // TODO Auto-generated method stub

        }

            }

    public class IntegerComplex extends LatticePoint {

       private int c;
       private int d;

       public IntegerComplex()
        {
            super();
        }
        public IntegerComplex(int c, int d)
        {
            super.setX(c);
            super.setY(d);

        }

        public int getC(){
            return this.c;
        }
        public int getD(){
            return this.d;
        }

        public IntegerComplex add(IntegerComplex a){
    super.add(a);
            return a;
        }

        public double distance(IntegerComplex a){
            super.distance(a);
            return a.distance();
        }

        public IntegerComplex multiply(IntegerComplex a){
            return new IntegerComplex((this.c*a.c - this.d*a.d)+(this.c*a.c +this.d*a.d));
        }

        public static void main(String[] args) {
            // TODO Auto-generated method stub

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:21:12.100

```
public IntegerComplex multiply(IntegerComplex a){
    return new IntegerComplex((this.c*a.c - this.d*a.d)+(this.c*a.c + this.d*a.d));
} 
```

没有`IntegerComplex`构造函数将单个`int`作为参数，因此无法编译。

### 编辑：

如果你想实现公式`(ac - bd) + (bc + ad)*i`，那么方法应该这样写：

```
public IntegerComplex multiply(IntegerComplex a){
    return new IntegerComplex(this.c*a.c - this.d*a.d, this.d*a.c + this.c*a.d);
} 
```

但是请注意，您的数学似乎是伪造的（并且对于 stackoverflow 问题有太多需要解决的问题）。请查看复杂数学的基础课程或关于复数[的维基百科文章](http://en.wikipedia.org/wiki/Complex_number)。

# class - 带指针参数的类成员函数

> ID：14596056
> 
> 赞同：1
> 
> 时间：2013-01-30T03:12:13.817
> 
> 标签：class, pointers, parameters, reference, memory-address

我有这个家庭作业，现在给我带来了很多麻烦。我的老师在课堂上很含糊，很难沟通。我会非常努力地在这里表达我的想法。这是作业：

> （3 分）给定以下类头文件，为列出的每个访问器和修改器函数编写类的源代码。（注意函数如何列出它们的参数，在按引用传递和按值传递之间变化。）不要忘记注释您的代码 - 它很重要！
> 
> ```
> class Album {
>   private:
>       char * artist;  // band or singer’s name
>       char * title;   // title of the album
>       int year_released;  // year the album is released
>       char * record_label;    // name of company produced album
>       int num_songs;  // number of songs on the album
>       int num_minutes_long;   // length (mins) of album
>       char * genre;   // genre of artist (eg, rock, pop, …)
>   public:
>       //constructors
>       Album();
>       Album(char *& a, char *& t);
> 
>       //deconstructor
>       ~Album();
> 
>       //accessors and mutators
>       bool set_artist(char * a);
>       bool set_title(char * t);
>       bool set_year_released(int value);
>       bool set_record_label(char *& label);
>       bool set_num_songs(int value);
>       bool set_num_minutes_long(int value);
>       bool set_genre(char * g);
>       bool get_artist(char *& a);
>       bool get_title(char *& t);
>       int get_year_released();
>       bool get_record_label(char *& label);
>       int get_num_songs();
>       int get_num_minutes_long();
>       bool get_genre(char *& g);
> }; 
> ```

这是我到目前为止的工作：

```
bool Album::set_artist(char * a)
{
 *artist = a;
}

bool Album::set_title(char * t)
{
*title =  t;
}

bool Album::set_year_released(int value)
{
year_released = value;
}   

bool Album::set_record_label (char *& label)
{
*record_label = label;
}

bool Album::set_num_songs(int value)
{
num_songs = value;
}
bool Album::set_number_minutes_long(int value)
{
num_minutes_long = value;
}
bool Album::set_genre(char * g)
{
*genre = g;
}
bool Album::get_artist(char *& a)
{
return artist;
}
bool Album::get_title(char *& t)
{
return title;
}
int Album::get_year_released()
{
return year_released;
}

bool Album::get_record_label(char *& label)
{
return *record_label;
} 
```

输入将是一个数组。

我的问题：

1.  首先，我在正确的轨道上吗？

2.  例如，当`(char * a)`用于函数时，这是传递 的地址，对`a`吗？那么`*artist=a;`改变`a`指向的地址是什么？

3.  此外，当我期望 void 时，这些函数是 bool 的。为什么？

4.  对于所有`set_xxx`函数，参数是`*`... 但对于 set_record_label 它是`*&`。这对我来说似乎是一个错误。那正确吗？

5.  `*&`和`*`as 参数有什么区别？

感谢您的时间。我知道这里有很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:34:27.183

1.  **首先，我在正确的轨道上吗？**

    有点笼统，让我们详细介绍一下。但至少，您没有提供所需的评论。

2.  **例如，当将 (char * a) 用于函数时，这是传递 a 的地址，对吗？**

    不，它传递一个名为 的地址`a`。

    **那么*艺术家=a; 改变 a 的地址指向什么？**

    这会产生类型不匹配。`artist`是指向 的指针`char`。`*artist`是`char`变量`artist`指向。`a` 是，agian，指向`char`. 因此，您将指针分配给`char`变量 => 类型不匹配。

3.  **此外，当我期望 void 时，这些函数是 bool 的。为什么？**

    我不知道你为什么期望`void`。但是，`bool`这是有道理的：它允许函数报告操作（有副作用！）是否成功。

4.  **对于所有 set_xxx 函数，参数是`*`...，但对于 set_record_label，它是 *&。这对我来说似乎是一个错误。那正确吗？**

    由于您的讲师强调使用不同的参数，因此可能没有错误。然而，在现实生活中，这将是一种糟糕的风格。

5.  ***& 和 * 作为参数有什么区别？**

    `*`描述一个指针，`&`一个引用。引用的值又可以是一个指针。我建议你重新阅读教科书中关于类型的部分。

# python - 分发不带 .py 扩展名的 Python 脚本

> ID：14596057
> 
> 赞同：7
> 
> 时间：2013-01-30T03:12:19.470
> 
> 标签：python, package, setuptools, distutils, distutils2

`scripts`如果我正在用 Python 编写一个包进行分发，并且我在of中放置了一些被视为可执行文件的脚本`setup.py`，是否有一种标准方法可以使它们没有 *.py 扩展名？只制作没有 .py 扩展名的文件就足够了吗，还是需要任何额外的东西？是否会从文件名中删除 .py 会破坏与`setup.py`/distutils 等 Python 工具相关的任何功能？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:28:42.400

仅当`.py`您要导入模型 AFAICT 时才需要扩展。请记住，`pip`,`easy_install`等只是顶部带有 shebang 的可执行文件。唯一依赖文件扩展名来执行的操作系统是 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:48:29.363

如果您需要 Windows 兼容性，则不要删除`.py`扩展名或使用 setuptools`entry_points`选项自动生成适合系统脚本文件的选项，例如，将`pip.main()`函数安装为脚本，`pip`指定`setup.py`：

```
 entry_points=dict(console_scripts=['pip=pip:main', 
          'pip-%s=pip:main' % sys.version[:3]]), 
```

`entry_points`即使您不需要 Windows 兼容性，使用它也是有意义的，因为它会为您生成正确的 shebang，指向特定的 python 解释器（其中泛型`#! /usr/bin/env python`是错误的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:18:31.450

如果脚本打算从命令行执行，则`.py`扩展实际上不会为您做任何事情。该脚本将在两种情况下使用 Python 解释器执行：

1.  您明确表示要在命令行中这样做：`$ python nameofyourscript`
2.  您明确表示要在脚本顶部包含一个指向 Python 的 shebang。首选版本是`#!/usr/bin/env python`.

通过在每个脚本中包含一个 shebang，您可以将文件命名为您想要的任何名称。

如果不执行其中任何一项操作，脚本将作为普通脚本执行，适用于您使用的任何 shell。

# php - 在 CodeIgniter 中加载多个数据库

> ID：14596073
> 
> 赞同：0
> 
> 时间：2013-01-30T03:13:35.217
> 
> 标签：php, mysql, codeigniter

我正在尝试使用 codeigniter 构建一个网站，我将在其中使用两个数据库

但是我似乎在使它们工作时遇到了问题

我得到的错误是

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: cms_db

Filename: models/site_model.php 
```

致命错误：在非对象上调用成员函数 select()

这是我的代码

**控制器（site.php）**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_controller {

public function __construct()
{
    parent::__construct();
    // Your own constructor code
    $this->load->model("site_model");

    $cms_db = $this->load->database('cms', TRUE);
    $site_db = $this->load->database('default', TRUE);

} 

public function index()
{
$data = $this->_initialize_data();
$this->load->vars($data);
$this->load->view('site/index');
}

public function _initialize_data()
{
    $data['cp'] = $this->site_model->get_cp();
    $data['op'] = $this->site_model->get_op();
    $data['learnfn'] = $this->site_model->get_learnfn();
    return $data;
}

} 
```

**模型（site_model.php）**

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    //  CI 2.0 Compatibility
    if(!class_exists('CI_Model')) { class CI_Model extends Model {} }

    class Site_model extends CI_Model
    {   
        function get_cp()
        {
            return $this->db->select()->from("listings")->where("list_UID","2")->get();
        }

        function get_op()
        {
            return $this->db->select()->from("listings",0,4)->where("list_UID","1")->get();
        }

        function get_learnfn()
        {
            return $cms_db->select()->from("education")->get()->row();
        }
    } 
```

**配置（数据库.php）**

```
 //CMS
    $active_group = 'cms';
    $active_record = TRUE;

    $db['cms']['hostname'] = 'localhost';
    $db['cms']['username'] = 'root';
    $db['cms']['password'] = '';
    $db['cms']['database'] = 'db2';
    $db['cms']['dbdriver'] = 'mysql';
    $db['cms']['dbprefix'] = '';
    $db['cms']['pconnect'] = TRUE;
    $db['cms']['db_debug'] = TRUE;
    $db['cms']['cache_on'] = FALSE;
    $db['cms']['cachedir'] = '';
    $db['cms']['char_set'] = 'utf8';
    $db['cms']['dbcollat'] = 'utf8_general_ci';
    $db['cms']['swap_pre'] = '';
    $db['cms']['autoinit'] = TRUE;
    $db['cms']['stricton'] = FALSE;

    //SITE
    $active_group = 'default';
    $active_record = TRUE;

    $db['default']['hostname'] = 'localhost';
    $db['default']['username'] = 'root';
    $db['default']['password'] = '';
    $db['default']['database'] = 'db1';
    $db['default']['dbdriver'] = 'mysql';
    $db['default']['dbprefix'] = '';
    $db['default']['pconnect'] = TRUE;
    $db['default']['db_debug'] = TRUE;
    $db['default']['cache_on'] = FALSE;
    $db['default']['cachedir'] = '';
    $db['default']['char_set'] = 'utf8';
    $db['default']['dbcollat'] = 'utf8_general_ci';
    $db['default']['swap_pre'] = '';
    $db['default']['autoinit'] = TRUE;
    $db['default']['stricton'] = FALSE; 
```

这就是我回应它们的方式

```
<?php echo $learnfn->name; ?> 
```

我错过了什么吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:24:52.677

嗨，首先在配置文件中，您必须只定义一个活动组，并且活动记录不是两者都为真，并且 $cms_db 您正在控制器加载它的控制器部分而不是模块，如果您的活动组是默认的，您可以按照以下方式进行

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_controller {

public function __construct()
{
    parent::__construct();
    // Your own constructor code
    $this->load->model("site_model");

    $this->site_model->cms_db = $this->load->database('cms', TRUE);

} 

} 
```

**模型**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site_model extends MY_Model
{   

    public $cms_db;

    //other option if you are not passing through controller
    // this will always load cms_db 
    function __ construct(){
        parent::__construct();
     }

    function get_cp()
    {
        return $this->db->select()->from("listings")->where("list_UID","2")->get();
    }

    function get_op()
    {
        return $this->db->select()->from("listings",0,4)->where("list_UID","1")->get();
    }

    function get_learnfn()
    {
        return $this->cms_db->select()->from("education")->get()->row();
    }
} 
```

**MY_型号**

```
//  CI 2.0 Compatibility
if(!class_exists('CI_Model')) { class CI_Model extends Model {} }

     class MY_Model extend CI_Model{
       public $cms_db = null;
        function __construct(){
           $this->site_model->cms_db = $this->load->database('cms', TRUE);
        }
     } 
```

如果你想要 $cms_db 总是创建 MY_Model 放在它的构造函数加载数据库中，并用 MY_Model 扩展你的所有模型

# c# - 来自 WCF 服务的方法未显示在客户端应用程序中

> ID：14596076
> 
> 赞同：2
> 
> 时间：2013-01-30T03:13:42.933
> 
> 标签：c#, .net, wcf

我最近在 C# 编码方面的尝试是学习 WCF 服务。我正在尝试做一个非常简单的服务。它有一个非默认方法，它只返回用户输入的整数乘以 2 的字符串。我已将该服务上传到 aspspider.com，并创建了一个 winforms 客户端应用程序。但是，在查看服务类时，它只显示 GetData 方法。老实说，我对此感到困惑，我一生都无法理解为什么我的方法不会出现。我已经从命令行使用了 svcutil.exe 命令，但仍然没有。如果有人可以帮助我，我将不胜感激！这是我的代码：

服务代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Web.Services;

namespace WcfService1
{
    public class Service1 : IService1
    {        
        public string GetData(int value)
        {
            return string.Format("You entered: {0}", value);
        }

        public string GetDouble(int value) //Method that isn't showing up
        {
            return (value * 2).ToString();
        }
     }
  } 
```

服务接口：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace WcfService1
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string GetData(int value);

        [OperationContract]
        public string GetDouble(int value); //Method that isn't showing up

        // TODO: Add your service operations here
    }   
} 
```

Service1Client（请注意这很混乱。仍在尝试弄清楚如何在此处格式化代码）：

```
namespace WcfService1
{
    using System.Runtime.Serialization;

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.Runtime.Serialization.DataContractAttribute(Name="CompositeType", Namespace="http://schemas.datacontract.org/2004/07/WcfService1")]
    public partial class CompositeType : object, System.Runtime.Serialization.IExtensibleDataObject
    {
        private System.Runtime.Serialization.ExtensionDataObject extensionDataField;
        private bool BoolValueField;
        private string StringValueField;

        public System.Runtime.Serialization.ExtensionDataObject ExtensionData
        {
            get
            {
                return this.extensionDataField;
            }
            set
            {
                this.extensionDataField = value;
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public bool BoolValue
        {
            get
            {
                return this.BoolValueField;
            }
            set
            {
                this.BoolValueField = value;
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public string StringValue
        {
            get
            {
                return this.StringValueField;
            }
            set
            {
                this.StringValueField = value;
            }
        }
    }
}

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ServiceModel.ServiceContractAttribute(ConfigurationName="IService1")]
public interface IService1
{
    [System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/IService1/GetData", ReplyAction="http://tempuri.org/IService1/GetDataResponse")]
    string GetData(int value);
    [System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/IService1/GetDataUsingDataContract", ReplyAction="http://tempuri.org/IService1/GetDataUsingDataContractResponse")]
    WcfService1.CompositeType GetDataUsingDataContract(WcfService1.CompositeType composite);
}

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
public interface IService1Channel : IService1, System.ServiceModel.IClientChannel
{
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
public partial class Service1Client : System.ServiceModel.ClientBase<IService1>, IService1
{
    public Service1Client()
    {
    }

    public Service1Client(string endpointConfigurationName) : 
            base(endpointConfigurationName)
    {
    }

    public Service1Client(string endpointConfigurationName, string remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }

    public Service1Client(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }

    public Service1Client(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(binding, remoteAddress)
    {
    }

    public string GetData(int value)
    {
        return base.Channel.GetData(value);
    }

    public WcfService1.CompositeType GetDataUsingDataContract(WcfService1.CompositeType composite)
    {
        return base.Channel.GetDataUsingDataContract(composite);
    }
} 
```

客户：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WebServiceTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Service1Client client = new Service1Client();
            client.Open();
            label1.Text = client.GetData(5);
            client.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T03:16:09.297

这甚至可以正确编译吗？接口不能声明其中方法的可见性。它们是隐式公开的。所以这;

```
[OperationContract]
public string GetDouble(int value); 
```

应该是这个；

```
[OperationContract]
string GetDouble(int value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:46:28.383

我解决了这个问题。显然我忘了编译更改。感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:38:26.187

所以从 Operation 合约中移除访问修饰符，如下所示，

```
string GetData(int value)
{
    return string.Format("You entered: {0}", value);
}
string GetDouble(int value) 
{
    return (value * 2).ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T10:35:57.190

你得到了答案，因为你在正确的方向上做了（构建和编译）。如果您没有以正确的方式打开解决方案，它也可能发生在某个地方。

# html - 如何在html中获取值

> ID：14596080
> 
> 赞同：-3
> 
> 时间：2013-01-30T03:14:03.230
> 
> 标签：html, flash, find

游戏是flash。链接： http: [//www.miniclip.com/games/bounzy-2/pt/](http://www.miniclip.com/games/bounzy-2/pt/)

我需要得到值，确切地说，“分数”。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:25:04.347

我相信，您可以修改 Flash 游戏以与页面上的 javascript 进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T04:03:42.650

是的，如果您可以访问它，您将需要能够修改游戏本身的代码。它无法通过简单的 src= 在页面上显示分数，除非 miniclip 有支持页面交互的 API。

# javascript - innerHTML 在 Chrome 中导致不需要的滚动

> ID：14596082
> 
> 赞同：3
> 
> 时间：2013-01-30T03:14:11.200
> 
> 标签：javascript, innerhtml

我有一个简单的设置：单击图像后，我想要播放 mp3 文件。

从我记得的大多数来源中，建议是创建一个虚拟跨度元素，可以在其中嵌入音频播放器以在单击图像时自动启动。

这是执行此类操作的函数：

```
<script language="javascript" type="text/javascript">
  function playSound(soundfile,evt) {
    document.getElementById("dummy").innerHTML = "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
    evt.preventDefault(); // this doesnt do anything
    return false; // neither does this
  }
</script> 
```

图片的 HTML 代码：

```
<a href="#" onclick="playSound('aud.mp3'); return false;"> 
```

我将“虚拟”跨度放在页面的最底部。单击图像时，会播放声音，但令人难以置信的是页面会自动向下滚动到此 span 元素的位置。

我在 IE 和 Firefox 上试过这个：这个问题没有发生。仅在最新版本的 Chrome (24.0.1312.56 m) 中才会发生这种情况。我在两台电脑上试过这个。

有谁知道怎么回事？你如何摆脱这个烦人的滚动？

`return false;`没有帮助（它们都没有；第二个只是通过属性滚动到顶部）`#`。也没有`preventDefault()`。也不会将 a`href`属性从更改`#`为`javascript:void(0)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T01:54:55.303

我没有使用虚拟`span`元素，而是发现`play()`Javascript 中有一个用于`audio`和`video`DOM 元素的方法，所以我只是重写了代码以避免 Chrome 错误。显然，IE8 或更早版本不支持它，但这是一个值得权衡的选择。

```
<audio id="aud">
    <source src="aud.ogg" type="audio/ogg" />
    <source src="aud.mp3" type="audio/mpeg" />
</audio>
<a href="#" onClick="document.getElementById('aud').play(); return false;">
  Link
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T07:04:35.913

好的，我遇到了类似的问题并发现了这个，但它对我没有帮助，我想出了一个解决方法，所以我决定在这里发布它来帮助其他有同样问题的人。问题是浏览器会显示，因为这是对用户单击某些内容的响应，它应该滚动以自动显示新的 html 内容。我想出的解决方法是这样的 -

```
setTimeout(function(){
    document.getElementById('dummy').innerHTML += "THE STUFF";
}, 0); 
```

它只是简单地执行 0 毫秒的 setTimeout，然后添加 html 代码，这样它就与点击事件解除关联。

# c - 如何从动态数组中删除元素？

> ID：14596085
> 
> 赞同：1
> 
> 时间：2013-01-30T03:14:31.017
> 
> 标签：c, dynamic-arrays

我已经看到了类似问题的其他答案，但似乎没有一个对我有用。假设我有一个动态数组：

```
int* myarray;
myarray = malloc(myarray, 4*sizeof(int));
myarray[0] = 1;
myarray[1] = 2;
myarray[2] = 3;
myarray[3] = 4; 
```

我想要做的是删除（并且免费，因为数组会越来越大）数组的*第一个*元素。我很清楚如果缩小，`realloc`它会删除数组的*最后一个*元素。对此有什么想法吗？这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T03:22:40.187

我能想到的一种方法是做

```
 memmove(myarray, myarray+1, 3*sizeof(int)) 

```

然后用于`realloc`缩小数组。我不确定在 C 中有更有效的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:22:11.213

通常，无法对阵列执行“删除”操作。也许您想创建和使用链表？

C++ 有其`std::vector`支持这一点。它将做的是将稍后出现的元素向前移动 1 个元素。您可以实现这一点，然后再调用`realloc`。

如果只需要删除第一个元素，则将它们反向存储是一个明显的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T03:23:36.093

您必须将所有其他元素分流到一个。从概念上讲，它是这样的：

```
for( int i = 0; i < 3; i++ ) p[i] = p[i+1]; 
```

正如其他人所提到`memmove`的，针对移动重叠的内存段进行了优化，而不是使用上述循环。

随着阵列变大，移动数据仍然效率低下。每次添加项目时重新分配一个数组更糟糕。一般建议是不要这样做。只需跟踪您的数组有多大以及其中当前存储了多少项目。当您种植它时，将其种植大量（通常您会将其扩大一倍）。

听起来您可能想要一个循环队列，在其中预先分配数组，并且当您推入和弹出项目时，头和尾指针相互追逐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T03:49:11.240

我不认为你会在 C 中找到一种正确/干净的方法来做到这一点。C++ 作为一些这样做的图书馆，几乎所有面向 OO 的语言都可以做到这一点，但不是 C。我能想到的是移动内存，是的，调用 realloc，或者将您想要释放的位置设置为已知值，您将在内存重用策略中将其视为空。

另一种解决问题的方法是通过数组的动态实现。不知道你是否想去那里，但如果你想，这里有一些简短的例子。

由于您只保存整数，因此像这样的结构：

```
typedef struct DynamicArray_st{
 int x;
 struct DynamicArray_st *next;
}DynamicArray; 
```

可以根据程序需要分配和释放元素。它还允许在中间、开始或结尾插入，frees 也是如此。

您将执行此操作的方式是保存指向此动态类型开头的指针，然后对其进行迭代。问题是您无法通过 [] 表示法访问数据。迭代是必要的，这使得处理时间变得更重。

除此之外，你的代码会变成这样：

```
DynamicArray *array = malloc(sizeof(DynamicArray)); /*Just a first element that will stay empty so your Dynamic array persists*/
 array->next = NULL;
 DynamicArray *aux = array;
 DynamicArray *new;
 for(i = 0; i<4; i++){
    new = malloc(sizeof(DynamicArray));
    new->next = NULL;
    new->x = i+1;
    aux->next = new;
    aux = new;
 } 
```

在这里，您有一个结构序列，每个结构都指向下一个结构，并且内部有一个整数。如果现在你会做类似的事情：

```
aux = array->next; /*array points to that empty one, must be the next*/
 while(aux != NULL){
   printf("%d\n",aux->x);
   aux = aux->next;
 } 
```

你会得到输出：

```
1
2
3
4 
```

释放第一个元素很简单：

```
 aux = array->next;
  array->next = aux->next;
  free(aux); 
```

如果您尝试绘制它（结构是框，next/aux/next 是箭头），您会看到一个框的箭头勾勒出一个框 - 您想要释放的框。

希望这可以帮助。

# sql - 在 Oracle 11g 中获取实际执行计划

> ID：14596088
> 
> 赞同：2
> 
> 时间：2013-01-30T03:14:45.857
> 
> 标签：sql, oracle, oracle11g, toad

我已经阅读了这篇[文章](https://stackoverflow.com/questions/9269042/oracle-execution-plan)和[这篇](http://blog.jooq.org/2012/09/19/how-to-get-oracle-execution-plans-with-starts-e-rows-a-rows-and-a-time-columns/)优秀的文章

我的问题是，如何获得Oracle 11g 中的实际执行**计划**

**没有**sys 权限和 DBA 权限。（您可以将我的案例视为只读用户）

我可以使用`SYS.PLAN_TABLE$`or `CTRL`+ `E`in获得解释计划`TOAD`

但我的理解是解释计划=估计的执行计划？

在 Oracle 的文档中找到

> 由于以下原因，执行计划可能会有所不同：

*   > 不同的模式

*   > 不同的成本

请给我任何你能提供的帮助来清除我的概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:22:04.367

如果你想使用`dbms_xplan.display_cursor`，你[至少需要这些授权](http://docs.oracle.com/cd/E14072_01/appdev.112/e10577/d_xplan.htm#i999214)：

```
grant select on sys.v_$sql_plan to larry;
grant select on sys.v_$session to larry;
grant select on sys.v_$sql_plan_statistics_all to larry; 
```

你可能还需要`V$SQL`找到`SQL_ID`：

```
grant select on sys.v_$sql to larry; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:19:51.343

如果您是开发人员，也许我可以请求授予您 SELECT_CATALOG_ROLE。在 11g 中授予它是无害的。这将允许对 DBA 拥有的大多数信息进行只读访问。

这将使您可以访问 v$sql_plan*、v$session_longops、V$lock、V$SQL_BIND_CAPTURE 和其他与性能相关的数据。

# python - 始终获取列表的 Pythonic 方式

> ID：14596089
> 
> 赞同：0
> 
> 时间：2013-01-30T03:15:10.357
> 
> 标签：python

是否有标准库函数或更 Pythonic 的方式来做到这一点？

```
def itemize(i):
    if type(i) is list:
        return i
    return [i] 
```

语境：

在从单个值到列表的 db（nosql 样式）迁移中很有用

```
doc = <get doc from db>
for i in itemize(doc.var1):
    #blah 
```

或者

```
doc.var1 = itemize(doc.var1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:21:50.280

通常，执行这类事情是个坏主意。在许多情况下，您可以做的最 Pythonic 的事情是检查您的项目是否是一个*序列*：

```
import collections
def to_sequence(item):
    return item if isinstance(item,collections.Sequence) else [item] 
```

*传递您可能不想*传递的东西的一个实例是字符串...字符串是序列，因此`to_sequence('foo')`将 return `'foo'`，而不是`['foo']`-但您不太可能希望它`['f','o','o']`是...所以您可能需要特殊情况如果需要的话。

一个简单的解决方法是（对于 python2.x）：

```
import collections
def to_sequence(item):
    return item if isinstance(item,collections.Sequence) and hasattr(item,'__iter__') else [item] 
```

但同样，通常“pythonic”要做的事情是推迟这种检查并尝试在某些上下文中使用该对象——如果它失败了，那么你可以做一些事情来做出反应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T03:19:04.673

```
def itemize(i):
    try:
        return list(i) # Will return a list if provided an iterable
    except TypeError:
        return [i] 
```

不完全确定你为什么认为你需要这个，它可能是你实际需要的其他地方的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T03:19:29.520

如果你必须输入检查（你通常应该在 python 中避免，我很想在这里看到一些需要的上下文）你可以使用`isinstance`这个更可取的速记。

```
def makelist(i):
  return i if isinstance(i, list) else [i] 
```

# android - 如何在 Android 操作栏中将图标居中

> ID：14596090
> 
> 赞同：12
> 
> 时间：2013-01-30T03:15:13.373
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我正在尝试将图标居中在 android 操作栏中。我正在使用自定义布局，左侧有一个按钮，中间有一个图标，右侧有菜单选项。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ActionBarWrapper"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <ImageButton
            android:id="@+id/slideMenuButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_menu_bookmark" />

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/RelativeLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_centerInParent="true"  >
            <ImageView
                android:id="@+id/icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher"
                android:layout_centerInParent="true" />
        </RelativeLayout>

</RelativeLayout> 
```

我已经尝试过使用和不使用包装 ImageView 的 RelativeLayout。左侧按钮显示正常，我可以使用 layout_toRightOf 设置图标，但无法使其居中。有人有想法么？

编辑：这是 on create 方法中的 android 代码。

```
ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayUseLogoEnabled(false);
    actionBar.setDisplayHomeAsUpEnabled(false);
    actionBar.setDisplayShowCustomEnabled(true);
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayOptions(actionBar.DISPLAY_SHOW_CUSTOM);
    View cView = getLayoutInflater().inflate(R.layout.actionbar, null);
    actionBar.setCustomView(cView); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T04:07:30.450

好的。这应该有效。试试这个（**在正常活动中测试**）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ActionBarWrapper"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="horizontal">

    <ImageButton
        android:id="@+id/slideMenuButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:layout_alignParentLeft="true" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:layout_centerVertical="true"
        android:layout_centerInParent="true"  />    

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-07T09:50:50.220

之前的答案对我不起作用（在 Android 4.4 设备上），因为外部容器视图组没有完全展开，所以容器组和居中的内部徽标已经在标题栏中左对齐。

我发现了一个与常规操作栏菜单（右侧）一起使用的布局，无论是否启用常规操作栏徽标和标题（左侧）。此示例仅将附加徽标居中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal"
>

    <View android:layout_width="0dp"
          android:layout_height="match_parent"
          android:layout_weight="1"
    />

    <ImageView android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:src="@drawable/my_logo"
               android:layout_gravity="center_vertical"
               android:contentDescription="Logo"
        />

    <View android:layout_width="0dp"
          android:layout_height="match_parent"
          android:layout_weight="1"
      />

</LinearLayout> 
```

您必须通过此启用自定义视图

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayShowCustomEnabled(true);
View cView = getLayoutInflater().inflate(R.layout.actionbar, null);
actionBar.setCustomView(cView); 
```

但不是这种方法（它会禁用操作栏中的所有其他元素）。

```
// actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T03:25:07.443

您可以将自定义视图添加到操作栏。只需添加一个 LinearLayout 作为自定义视图并将子视图添加到线性布局。我使用这种技术在中间添加了 4 个按钮。

要添加自定义视图，请使用 actionBar.setCustomView(view)。还使用 actionBar.setDisplayOptions 设置选项 DISPLAY_SHOW_CUSTOM。

一旦你在栏中有一个自定义视图，然后使用正常的布局程序来获得你想要的效果。您可以使用的一个技巧是拥有 3 个嵌套的线性布局并为每个布局分配一个权重。例如 1,4,1，因此中心布局获得最大空间。这是一个示例，当然，如果您希望它为空白，则可以省略右侧布局上的按钮。使用这种方法，您可以达到精确的中心。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#F00"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2"
        android:background="#0F0"
        android:gravity="center_horizontal"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#00F"
        android:gravity="right"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>
</LinearLayout> 
```

# java - 如何在没有块注释的情况下计算 loc？

> ID：14596092
> 
> 赞同：0
> 
> 时间：2013-01-30T03:15:32.327
> 
> 标签：java, lines-of-code, block-comments

我正在尝试从 java 文件中获取代码行数。但我无法数数。

首先，我尝试用 ifs 跳过它们，但我的想法不起作用。现在我用注释来计算相同的行，我的 Java 文件有这个标题。任何想法，我都被困在如何计算它们上。

我的 if 是用于获取带有注释块的行数。我试图做一个减法。

```
/*
example
example
*/

int totalLoc = 0;
int difference = 0;
while((line =buff.readLine()) !=null){

    if((line.trim().length() !=0 &&(!line.contains("/*") ||!line.contains("*/")) )){
       if(line.startsWith("/*")){
           difference++;
       }else if(linea.startsWith("*/")){
           difference++;
       }else{
           difference++;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:36:52.917

如果您想计算任何文件中的行数，请在下面的方法中写入并将文件名作为输入传递给下面的方法，它将返回计数。

```
public int count(String filename) throws IOException
     {
        InputStream is = new BufferedInputStream(new FileInputStream(filename));
        try
        {
            byte[] c = new byte[1024];
            int count = 0;
            int readChars = 0;
            boolean empty = true;
            while ((readChars = is.read(c)) != -1)
            {
                empty = false;
                for (int i = 0; i < readChars; ++i)
                {
                    if (c[i] == '\n')
                        ++count;
                }
            }
            return (count == 0 && !empty) ? 1 : count;
        }
        finally
        {
            is.close();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:42:16.847

得到解决方案尝试下面的代码，它将打印所有多行注释以及在文件中找到的多行注释的总行。

```
 import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.nio.MappedByteBuffer;
    import java.nio.channels.FileChannel;
    import java.nio.charset.Charset;
    import java.util.regex.Matcher;
    import java.util.regex.Pattern;

public class LinesOfCode {
    public static void main(String[] args) {
        try {
            String s = readFile("D:\\src\\SampleClass.java");

            Pattern p = Pattern.compile("/\\*[\\s\\S]*?\\*/");

            Matcher m = p.matcher(s);

            int total = 0;
            while (m.find()) {

                String lines[] = m.group(0).split("\n");
                for (String string : lines) {
                    System.out.println(string);
                    total++;
                }
            }
            System.out.println("Total line for comments = " + total);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static String readFile(String path) throws IOException {
        FileInputStream stream = new FileInputStream(new File(path));
        try {
            FileChannel fc = stream.getChannel();
            MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0,
                    fc.size());
            /* Instead of using default, pass in a decoder. */
            return Charset.defaultCharset().decode(bb).toString();
        } finally {
            stream.close();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T06:01:04.170

[http://ostermiller.org/findcomment.html](http://ostermiller.org/findcomment.html) 查看此链接，它将为您提供更多帮助。并通过使用此表达式 => (/*([^ *]|[\r\n]|(*+([^* /]|[\r\n]))) **+/)|(//.* )您可以计算单行和多行评论！

# c# - 我的精灵向上，向下，向左，向右看起来很锐利，但是当它在任何方向上对角线时，它会变得有点模糊？

> ID：14596096
> 
> 赞同：0
> 
> 时间：2013-01-30T03:16:30.347
> 
> 标签：c#, rotation, sprite, xna-4.0, sprite-sheet

我正在使用 XNA 4.0 框架在 c# 中进行编码。我注意到，当精灵向上、向下、向左、向右移动时（它会翻转以面向正确的方向），精灵是清晰的并且焦点类似于它的绘制方式。

**向上方向的精灵示例（清晰图像）；**

![在此处输入图像描述](../Images/4e28d22c1d57656e70c776e416f53705.png)

但是由于某种原因，当我沿对角线方向对角线移动播放器时，它会变得有点模糊。

**对角上/右方向的精灵示例（模糊图像）；**

![在此处输入图像描述](../Images/ac1a4a2f3309ab705d7d1134cbd7ccea.png)

我只是围绕它的原点（精灵中心）旋转对象，除了旋转和原点之外，我没有弄乱任何其他绘制属性。

**谁能解释为什么会发生这种情况？这只是精灵旋转时发生的情况吗？有没有办法可以旋转精灵并保持其清晰度？**

---我不确定这是否重要，但精灵在我的精灵表中朝上方向绘制---

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:25:24.017

> 我不确定这是否重要，但精灵在我的精灵表中朝上方向绘制

确实如此。当精灵上下移动时，绘制到碎石上的像素可能与精灵表中的像素完全相同，因为它们与缓冲区对齐。旋转图像时，需要进行计算以确定要着色的最佳像素。这会导致某些像素是灰色的，而不是全黑的和白色的，从而导致“模糊”。您可以使用抗锯齿设置来获得您满意的东西，但是对于像您的 sprite 看起来那样具有硬线的 sprite，这可能是一个更大的问题。

# emacs - (elisp) 向量的向量元素

> ID：14596098
> 
> 赞同：3
> 
> 时间：2013-01-30T03:16:48.017
> 
> 标签：emacs, elisp

我构建了一个由向量​​组成的二维数组（矩阵）：

```
(setq zero-row [0 0 0 0 0])
  => [0 0 0 0 0]

(setq zero-mat (make-vector 4 zero-row))
  => [[0 0 0 0 0] [0 0 0 0 0] [0 0 0 0 0] [0 0 0 0 0]] 
```

我将通过将第 2 行替换为包含已更改元素的向量，将第 2 行第 3 列（0 索引）中的元素设置为 42：

```
(aset zero-mat 2 [0 0 0 42 0])
  => [0 0 0 42 0]

zero-mat
  => [[0 0 0 0 0] [0 0 0 0 0] [0 0 0 42 0] [0 0 0 0 0]] 
```

有用。

接下来，我尝试构建一个函数，该函数采用这种方法在这样的二维数组中设置第 (i,j) 个元素：

```
(defun matrix-set (mat i j elt)
"Set the (i, j)-th element of mat to elt. mat is a vector of the row vectors. Indexing is 0-based in each component."
(let ((vect (aref mat i)))
   (aset vect j elt)
   (aset mat i vect)
   mat)) 
```

但这不起作用：

```
(setq zero-row [0 0 0 0 0])
  => [0 0 0 0 0]

(setq zero-mat (make-vector 4 zero-row))
  => [[0 0 0 0 0] [0 0 0 0 0] [0 0 0 0 0] [0 0 0 0 0]]

(matrix-set zero-mat 2 3 42)
  => [[0 0 0 42 0] [0 0 0 42 0] [0 0 0 42 0] [0 0 0 42 0]] 
```

看起来数组的所有行都链接到同一个向量，因此更改该向量会更改所有行。

所以有两个问题：（1）为什么在第二种情况下会发生这种情况，而不是第一种情况？(2) 我该如何解决这个问题（这样我就可以访问以这种方式表示的二维数组的第 (i, j) 个条目）？

（我最初是编写一个小例程来添加两个矩阵，表示为上述向量的向量，并且遇到了同样的问题。我认为上面的精简示例可能会使问题更清楚。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:09:58.717

在第一种情况下，您正在用另一个向量替换“外部”向量中的一个元素（而其他三个“内部”向量仍然都指向同一个元素）。在第二种情况下，您替换“内部”向量中的一个元素（并且根据您的示例，您只有一个内部向量重复了四次。将向量初始化为不同*的不同*向量的一种简单方法是这样的：

```
(let ((i 0) (new-vector (make-vector 4 nil))
 (while (< (progn (aset new-vector i (make-vector 5 0))
                  (incf i))
           (length new-vector))) 
```

抱歉，如果有任何错别字，是在原地写的。但是这个想法应该很简单，可以弄清楚。

# html - 从表格单元格中检索值到控制器

> ID：14596099
> 
> 赞同：-1
> 
> 时间：2013-01-30T03:17:10.077
> 
> 标签：html, grails, controller, html-table, css-tables

我正在尝试从表格单元格中获取特定值并将其传递给控制器​​。但这似乎不起作用。我向您展示我的一些代码：

这是在控制器中：

```
def searchUser = {
        String abc = request.getParameter("harrow")
        println(abc)
    } 
```

这是在html页面中：

```
 <form>
 <div style="height: 250px; overflow: scroll; width: 100%;">
              <table id="normal">
              <g:each in = "${result}">
              <tr id="btn">
              <td width=10% >${it.ID}</td>
              <td width=25% id="harrow">${it.username}</td>

              </tr>
              </g:each>

              </table>
         </div>
            <input type ="submit" name ="abc" id="opener">

    </form> 
```

**编辑**

阿贾克斯：

```
 $("#edittable").on('click', function() {
            $.ajax({
                url: URL,
                data: $(this).serialize(),
                type: "POST",
                success: function(html){
                    //do something with the `html` returned from the server here
                    $("#edit1").html(html).dialog("open")
                },
                error: function(jqXHR, textStatus, errorThrown){
                    alert('error: ' + textStatus + ': ' + errorThrown);
                }
            });
            return false;//suppress natural form selection
        }); 
```

我可以将值传递给控制器​​，但现在它只检索第一行值而不是另一行。我的 AJAX 代码有问题吗？非常感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:21:34.733

因此，要显示该行的详细信息，其中一种方法可以是：

**控制器方法**

```
def rows = [
        [id:1, name:'name1'],
        [id:2, name:'name2'],
        [id:3, name:'name3']
    ]

def show(){
    [results:rows]
}

def showLine(Long id){
    render rows.find {it.id == id }
} 
```

**看法**

```
<html>
<head>
    <g:javascript library="jquery" />
    <r:layoutResources />
</head>
<body>

<table>
    <thead>
        <tr>
            <th>Action</th>
            <th>Id</th>
            <th>Name</th>
        </tr>
    </thead>
    <tbody>
        <g:each in="${results}" status="i" var="r">
            <tr>
                <td><g:remoteLink value="Details" id="${r.id}" action="showLine" update="lineDetails">Details</g:remoteLink></td>
                <td>${r.id}</td>
                <td>${r.name}</td>
            </tr>
        </g:each>
    </tbody>
</table>

<div id="lineDetails">
</div>
</body>
</html> 
```

基本上，您使用 AJAX 调用 showLine 方法并传递行对象 ID。然后搜索对象并将其渲染回来。渲染后的数据放入表格下的 div 中。是否在表格中使用 onclick、按钮或链接取决于您。如何在结果页面上显示详细信息也取决于您 - 使用 jquery 对话框或其他方式。希望能帮助到你

# events - 限制使用 FQL 显示的事件

> ID：14596100
> 
> 赞同：0
> 
> 时间：2013-01-30T03:17:12.933
> 
> 标签：events, facebook-graph-api

我试图将显示的事件限制为仅显示即将发生的事件，目前我正在从过去和现在显示的页面中获取所有事件。下面是代码：

```
<?php
date_default_timezone_set('America/Chicago');
$fql    =   "SELECT eid, name, pic, start_time, end_time, location, description 
             FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = XXXXXXXXXXXX ) 
             ORDER BY start_time asc";

$param  =   array(
'method'    => 'fql.query',
'query'     => $fql,
'callback'  => ''
);

$fqlResult   =   $facebook->api($param);

foreach( $fqlResult as $keys => $values ){
     $sdate = strtotime($values['start_time']);
     $edate = strtotime($values['end_time']);

     $start_date = date( 'l, m/d', $sdate );
     $end_date = date( 'l, m/d', $edate );

if(empty ($edate)){
         $edate = $sdate;
         }

     $start_time = date( 'g A', $sdate );
     $end_time = date( 'g A', $edate );
     $eventid = $values['eid'];

  ?> 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:21:03.747

使用`start_time > now()`.

```
SELECT eid, name, pic, start_time, end_time, location, description 
         FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = xxxxxxxx ) AND start_time > now()
         ORDER BY start_time asc 
```

# vsto - 将 Outlook 插件部署到 Citrix XenApp 安装

> ID：14596102
> 
> 赞同：5
> 
> 时间：2013-01-30T03:17:39.137
> 
> 标签：vsto, ms-office, outlook-addin, citrix, xenapp

我创建了一个 Outlook 插件。它没有什么特别的，只是添加一个带有一个菜单项的菜单。我遵循了来自[http://blogs.msdn.com/b/mcsuksoldev/archive/2010/10/01/building-and-deploying-an-outlook-2010-add-in-part-2-of的安装程序创建教程-2.aspx](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/10/01/building-and-deploying-an-outlook-2010-add-in-part-2-of-2.aspx)。

它可以在普通的 Windows 桌面安装上正常安装和工作，但我不知道如何在 Citrix XenApp 环境中执行此操作。我可以使用安装程序在成功安装 Outlook 的同一配置文件中安装它。但是当 Outlook 运行时，当我从信任中心菜单查看它时，它位于“非活动应用程序插件”部分，并且它不会正确激活。如果我打开“管理 COM 插件”菜单，它会显示“启动时加载”作为插件的加载行为。如果我尝试从此菜单手动激活它，则没有任何反应，如果我再次打开它，加载行为将更改为“未加载。托管加载项加载程序无法初始化”。

有人遇到过这个或类似的东西吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:37:31.450

如果它正在安装但处于非活动状态，那么它可能会在启动时引发异常。

我会将您的所有启动代码（ThisAddIn_Startup 函数在您的 ThisAddIn.cs 中）包装在 try {} catch {} 中，并将所有错误记录到磁盘上，以便您了解 Outlook 禁用插件的原因。

您是否尝试过设置 VSTO_SUPPRESSDISPLAYALERTS 环境变量以查看是否可以让 Outlook 为您提供更多信息？

（顺便说一句，我发现 Outlook VSTO 很不稳定。有时他们只是拒绝安装和工作。）

# pdf - PDF 中的文本旋转

> ID：14596106
> 
> 赞同：1
> 
> 时间：2013-01-30T03:17:57.480
> 
> 标签：pdf, floating-point, rotation, coordinates, glyph

所以我有这种情况：

使用`pdftoxml.exe`sourceforge.net 我得到了文本标记及其坐标。如果 pdf 文件被旋转（即它`/Rotate 90`的源代码中有一个），pdftoxml.exe 交换给定页面的高度和宽度以及任何给定对象的 x 和 y 坐标。这就是我的理解。

我对此很满意，直到我遇到一个用来`re`画粗线的 pdf 文件。也就是说，对于一条粗线，绘制了 4 条细线并填充了空间，如图所示。在左侧，您会看到两条细线（非彩色），它们是较大矩形（高度放大）的一部分。我清空了实际上充满黑色的空间，以查看线条：

![在此处输入图像描述](../Images/20e0eca5ee26f6f1c5fd9fb5bf0d9aef.png)

此外，上面的pdf被旋转。因此，为了`B`最终保持直立，使用了这个文本矩阵：`0 1 -1 0 90.72 28.3705 Tm`. 细线是这样绘制的`83.04 27.891 0.48 0.48 re`（坐标在这里可能会有所不同，但它是一些类似的重新操作。操作就像[adobe's pdf 1.7](http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf) page 133`x y width height re`中`re`的矩形）。此处相关的是由于浮点问题而未四舍五入或更改的计算。这是行 x 的确切值，不幸的是，它大于硬编码的 'sx，即：`27.891 + 0.48 = 28.371``B``28.3705`

```
83.52 27.891 m 92.39999999999999 27.891 l s

92.39999999999999 27.891 m 92.39999999999999 28.371 l s

92.39999999999999 28.371 m 83.52 28.371 l s

83.52 28.371 m 83.52 27.891 l s 
```

页面的坐标`842 x 595,2`根据左上角的 PDFXChange 查看器进行。这看起来很自然，因为页面是旋转的。不旋转，它将是左下角，所以应该没问题。

* * *

当文本更改`1 0 0 1 90.72 28.3705 Tm`为原始方向时，可以看到折叠的底线与左侧的线：

![在此处输入图像描述](../Images/a7de0b60e6c49ba4c02704a464a99826.png)

这是我所期望的，因为`B`'sy 是`28.3705`并且行的水平位置是`28.371`（如上面代码行的第二行所示）。所以很可能`B`的底线超出了`28.371`但我无法放大。

现在第一张图片中线和线之间的差距`B`来自哪里？这对我来说很重要，因为我试图找出最靠近左边的线`B`并且对这两个值感到惊讶，即我从 pdftoxml.exe 获得的文本的 suppsed x 值`28.3705`和水平线值`28.371`. 因为我知道这条线实际上远远超出了`B`不可能正确的左边，至少在“取线的 x 位置，取 B 的 x 位置，比较，如果线的 x 小于`B`'sx, 线在左边”。

我无法使用 x 值找到正确的行。相反，我得到了最左边的另一行......就像文本落在他们两个之间一样。

这是文字绘制代码：

```
BT
%0 7.5 -7.5 0 90.72 28.3705 Tm
0 1 -1 0 90.72 28.3705 Tm
%1 0 0 1 90.72 28.3705 Tm
/F1 1 Tf
1 Tr
q
0.01 w
(B) Tj
Q
ET 
```

因此，B 的大小或线条粗细没有什么特别之处。

你能帮我弄清楚吗？

* * *

`I`这是一张更新的图片，在同一页面上绘制了两张，上一张`I`使用`0 1 -1 0 90.72 28.3705 Tm`（数学旋转 90 度），下一张使用`1 0 0 1 90.72 28.3705 Tm`。所以我不明白，下部是如何`I`旋转`+90`并最终成为上部的？

这是pdf代码。它相当大，但您应该能够将其复制到您的文件中并将其命名为 sth.pdf。

![在此处输入图像描述](../Images/942d3cd4604c4ebc3afb7e10d421e1fa.png)

[PDF 示例（您必须实际放大到真正大的左上角才能看到`I`）](https://docs.google.com/folder/d/0B5mSEsSR-2gPanJRQ2p6Ylg3ZVE/edit)

编辑我实际上发现了一些关于查找字形边界框的[有趣信息](https://tex.stackexchange.com/questions/96120/using-xetex-to-calculate-the-bounding-box)，但我还无法将这些部分放在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:09:16.463

请看一下

![字形指标](../Images/8f303027a60161978ae9d7609065fd5c.png)

> 字形原点是字形坐标系中的点 (0, 0)。Tj 和其他文本显示操作符应将要绘制的第一个字形的原点定位在文本空间的原点。

[（无耻地从ISO 32000-1 第 9.2.4 节的图 39](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)复制）。

如您所见，字形所在的坐标（字形原点）不一定是实际字形边界框开始的位置。这可以解释您的第一张图片中的差距。

因此，当您试图从光学*上找出最靠近 B 的左侧线时，仅**取线的 x 位置、取 B 的 x 位置、比较，如果该线的 x 小于 B 是不够的x，线在左边，*相反，您还必须考虑字体数据本身，并考虑字形原点和由*B*表示的字形的字形边界框之间的差距。

如需更深入的分析，请提供字体数据。

**编辑**关于您的双 I 问题...在您上面的评论中，您说您实际上*希望在两个 I 字符中看到一个共同点 - 旋转点，因此*您*可以获得左侧边界框侧的可靠水平坐标的一个字符。*

![双I情况](../Images/a44a5a4d7c76e1a9befaf1b8f1465275.png)

红线交叉的点不是你的旋转点吗？它应该是两个 Tj 操作的字形起源，而 I 字形也有它们的起源。现在你可以从那里开始测量了。

# mysql - 怎么做一个滚动求和，每一行都需要包括前几行的总和

> ID：14596107
> 
> 赞同：3
> 
> 时间：2013-01-30T03:17:59.873
> 
> 标签：mysql, sql

我有桌子[访问]。当 order_number 为空时，我需要获取按 user_id 和 visit_duration_seconds 总和分组的行，例如，对于用户 [2875636]，我将得到：61+151+33+13。每行应该包括它之前的行的总和。
请在下面的预期结果中参考 RESULT 列

> ```
> user_id   starttime           visit_duration_seconds  order_number
> 2875636   2013-01-16 18:03:50 61  
> 2875636   2013-01-16 18:08:18 151 
> 2875636   2013-01-16 18:15:43 33  
> 2875636   2013-01-16 18:16:37 13  
> 2875636   2013-01-16 18:18:01 2011                     10177888
> 2875636   2013-01-16 18:24:35 1172                     10177884
> 2875636   2013-01-16 18:32:03 4731    
> 2875636   2013-01-16 18:33:27 407 
> 2875636   2013-01-16 18:37:29 74  
> 2875636   2013-01-16 18:48:55 80  
> 2875636   2013-01-16 19:05:00 1955    
> 2875636   2013-01-16 19:14:12 326 
> 2875636   2013-01-16 19:23:39 972 
> 2875636   2013-01-16 19:33:05 5440    
> 2875636   2013-01-16 19:35:48 43  
> 2875636   2013-01-16 19:41:10 66  
> 2875636   2013-01-16 19:42:03 100 
> 2875636   2013-01-16 19:42:12 2414                     10177940
> 2875636   2013-01-16 19:49:05 432                  10177925
> 2875636   2013-01-16 19:50:19 183 
> 2875636   2013-01-16 19:52:46 2061    
> 2875636   2013-01-16 19:52:53 400 
> 2875636   2013-01-16 20:00:47 338 
> 2875636   2013-01-16 20:08:58 216 
> 2875636   2013-01-16 20:14:21 58  
> 2875636   2013-01-16 20:14:26 196 
> 2875636   2013-01-16 20:19:14 2189    
> 2875636   2013-01-16 20:21:29 424 
> 2875636   2013-01-16 20:24:42 999 
> 2875636   2013-01-16 21:01:39 1810    
> 2875636   2013-01-16 21:02:54 525 
> 2875636   2013-01-16 21:10:06 27  
> 2875636   2013-01-16 21:12:08 282 
> 2875636   2013-01-16 21:51:02 6   
> 2875636   2013-01-16 22:18:34 173 
> 2875636   2013-01-16 23:02:58 318 
> 2875636   2013-01-16 23:45:37 207 
> 3018868   2013-01-16 16:01:45 18  
> 3018868   2013-01-16 16:16:45 39  
> 3018868   2013-01-16 16:22:55 656 
> 3018868   2013-01-16 16:25:54 1852    
> 3018868   2013-01-16 16:29:23 688 
> 3018868   2013-01-16 16:47:26 2258                       10177846
> 3018868   2013-01-16 16:57:41 572 
> 3018868   2013-01-16 17:06:47 1431    
> 3018868   2013-01-16 17:18:32 29  
> 3018868   2013-01-16 17:21:57 45  
> 3018868   2013-01-16 17:29:23 16  
> 3018868   2013-01-16 17:36:47 490 
> ```

预期结果

```
user_id starttime           visit_duration_seconds  order_number        RESULT
2875636 2013-01-16 18:03:50 61                                      61
2875636 2013-01-16 18:08:18 151                                     212
2875636 2013-01-16 18:15:43 33                                      245
2875636 2013-01-16 18:16:37 13                                      258
2875636 2013-01-16 18:18:01 2011                     10177888           0
2875636 2013-01-16 18:24:35 1172                     10177884           0
2875636 2013-01-16 18:32:03 4731                                        4731
2875636 2013-01-16 18:33:27 407                                     5138
2875636 2013-01-16 18:37:29 74                                      5212
2875636 2013-01-16 18:48:55 80                                      ...
2875636 2013-01-16 19:05:00 1955                                        ...
2875636 2013-01-16 19:14:12 326                                     ...
2875636 2013-01-16 19:23:39 972 
2875636 2013-01-16 19:33:05 5440    
2875636 2013-01-16 19:35:48 43  
2875636 2013-01-16 19:41:10 66  
2875636 2013-01-16 19:42:03 100 
2875636 2013-01-16 19:42:12 2414                     10177940
2875636 2013-01-16 19:49:05 432                  10177925
2875636 2013-01-16 19:50:19 183 
2875636 2013-01-16 19:52:46 2061    
2875636 2013-01-16 19:52:53 400 
2875636 2013-01-16 20:00:47 338 
2875636 2013-01-16 20:08:58 216 
2875636 2013-01-16 20:14:21 58  
2875636 2013-01-16 20:14:26 196 
2875636 2013-01-16 20:19:14 2189    
2875636 2013-01-16 20:21:29 424 
2875636 2013-01-16 20:24:42 999 
2875636 2013-01-16 21:01:39 1810    
2875636 2013-01-16 21:02:54 525 
2875636 2013-01-16 21:10:06 27  
2875636 2013-01-16 21:12:08 282 
2875636 2013-01-16 21:51:02 6   
2875636 2013-01-16 22:18:34 173 
2875636 2013-01-16 23:02:58 318 
2875636 2013-01-16 23:45:37 207 
3018868 2013-01-16 16:01:45 18  
3018868 2013-01-16 16:16:45 39  
3018868 2013-01-16 16:22:55 656 
3018868 2013-01-16 16:25:54 1852    
3018868 2013-01-16 16:29:23 688 
3018868 2013-01-16 16:47:26 2258                       10177846
3018868 2013-01-16 16:57:41 572 
3018868 2013-01-16 17:06:47 1431    
3018868 2013-01-16 17:18:32 29  
3018868 2013-01-16 17:21:57 45  
3018868 2013-01-16 17:29:23 16  
3018868 2013-01-16 17:36:47 490 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:30:20.433

您可以使用 MySQL 用户变量来模拟分析函数。（还有其他一些方法，例如使用半连接或使用相关子查询。如果您觉得它们可能更合适，我也可以为这些方法提供解决方案。）

要模拟“运行总计”分析函数，请尝试以下操作：

```
SELECT t.user_id
     , t.starttime
     , t.order_number
     , IF(t.order_number IS NOT NULL,
         @tot_dur := 0,
         @tot_dur := @tot_dur + t.visit_duration_seconds) AS tot_dur
  FROM visit t
  JOIN (SELECT @tot_dur := 0) d
 ORDER BY t.user_id, t.start_time 
```

这里的“技巧”是使用 IF 函数来测试是否`order_number`为空。当它为空时，我们将持续时间值添加到变量中，否则，我们将变量设置为零。

我们使用内联视图（别名为`d`，以确保 @tot_dur 变量初始化为零。

注意：小心使用这样的 MySQL 用户变量。在上面的 SELECT 语句中，SELECT 列表中变量的赋值发生在 ORDER BY 之后，因此我们可以获得确定性的行为。

* * *

该查询不处理 user_id 中的“中断”。为此，我们需要前一行的 user_id 值。我们可以将其保存在另一个用户变量中。操作的顺序是确定的，我们需要注意在覆盖前一行的 user_id 之前进行累积。

我们要么需要重新排序列，以便 user_id 出现在 tot_dur 之后（或者包括 user_id 列的第二个副本）

```
SELECT t.user_id
     , t.starttime
     , t.order_number
     , IF(t.order_number IS NULL,
         @tot_dur := IF(@prev_user_id = t.user_id,@tot_dur,0) + t.visit_duration_seconds,
         @tot_dur := 0
       ) AS tot_dur
     , @prev_user_id := t.user_id AS prev_user_id
  FROM visit t
  JOIN (SELECT @tot_dur := 0, @prev_user_id := NULL) d
 ORDER BY t.user_id, t.start_time 
```

`user_id`和`prev_user_id`列中返回的值是相同的。可以删除“额外”列，或者可以通过将查询（作为内联视图）包装在另一个查询中来重新排序列，尽管这会降低性能：

```
SELECT v.user_id
     , v.starttime
     , v.order_number
     , v.tot_dur
  FROM (SELECT t.starttime
             , t.order_number
             , IF(t.order_number IS NULL,
                 @tot_dur := IF(@prev_user_id = t.user_id,@tot_dur,0) + t.visit_duration_seconds,
                 @tot_dur := 0
               ) AS tot_dur
             , @prev_user_id := t.user_id AS user_id
          FROM visit t
          JOIN (SELECT @tot_dur := 0, @prev_user_id := NULL) d
         ORDER BY t.user_id, t.start_time
       ) v 
```

该查询表明 MySQL 可以返回指定的结果集。但是为了获得最佳性能，我们只想在内联视图中运行查询（别名为`v`），并在检索行时在客户端处理列的重新排序（将 user_id 列放在首位）。

其他两种常见的方法是使用半连接和使用相关子查询，尽管这些方法在处理大型集合时可能会占用更多资源。

# java - scp文件夹怎么下载？

> ID：14596108
> 
> 赞同：0
> 
> 时间：2013-01-30T03:18:01.963
> 
> 标签：java, scp

我使用了“SCP”方法“下载（）”。但是，此方法是文件下载。我想知道那个文件夹下载...请回答我..谢谢。

//例子

```
private boolean readFolderSCP(String localFolder, String remoteFolder)
{
   ssh.authPassword(param.getUsername(), param.getPasswd());
   File scpfile = new File(remoteFolder);
   if (scpfile.isDirectory())
   {
     String scpfiles[] = scpfile.list();
     for (int i=0; i<scpfiles.length; i++)
     {
        File remotefile = new File(remoteFolder+"/"+scpfiles[i]);
        if (remotefile.isFile())
        {
          ssh.newSCPFileTransfer().download(remoteFolder+"/"+scpfiles[i], new FileSystemFile(localFolder+"/"+scpfiles[i])); 
        } 
     }
   }    
   return true;
} 
```

这是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:16:11.740

SCP 并不是真正设计用于执行目录列表，因为它几乎只是一个文件复制协议。因此，除非您确切知道要查找的内容，否则很难从目录中获取一堆文件。

您编写的代码肯定无法获得远程目录列表，因为初始调用`new File(remoteFolder)`将查看您的本地系统，而不是远程系统。

SFTP 具有与 SCP 相同的安全性（它基于 SSH 协议），并包含 FTP 的所有命令，包括目录列表。我会检查您的库文档并尝试使用 SFTP 而不是 SCP 编写您的命令。

# jquery - 带有隐藏 div 的布局网页

> ID：14596109
> 
> 赞同：-1
> 
> 时间：2013-01-30T03:18:09.497
> 
> 标签：jquery, asp.net, html, css

我有一个网页，其中大部分是隐藏的 div，我使用 jquery 动画与之交互。
我想知道最好的方法是什么。

我想到的一些想法包括将页面上的所有 div 保留为隐藏的 div。
另一个想法，也可能是我希望追求的想法是，将这些隐藏的 div 中的每一个都放在自己的页面中，这样更容易单独管理。
有什么想法或方法可以做到这一点？

方法也是当前的一个 asp.net 页面，我计划最终将其转换为 asp mvc，它允许使用 jquery 加载视图。

所以我可以将每个 div 放入一个视图中并以这种方式管理它们。
在此之前，任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:33:53.943

我在使用 JavaScript 模板之前已经这样做了。每个 div 都会获得它自己的 HTML 文件，该文件会根据需要加载到 DOM 中。您还可以将数据传递给这些模板并在插入之前对其进行操作。另一个方便的用途是在调用每个页面后对其进行缓存。

[我只是为这个http://ejohn.org/blog/javascript-micro-templating/](http://ejohn.org/blog/javascript-micro-templating/)使用了一个简单的模板引擎

# node.js - 您如何使用 node-irc 登录？

> ID：14596110
> 
> 赞同：3
> 
> 时间：2013-01-30T03:18:10.487
> 
> 标签：node.js, irc

它非常容易设置并且运行良好。但是文档中没有任何地方说明如何

```
/msg nickserv identify <pword> 
```

我能找到的最接近的是

```
client.join('#yourchannel yourpass'); 
```

或许

```
For any commands that there aren’t methods for you can use the send() method which sends raw messages to the server
client.send('MODE', '#yourchannel', '+o', 'yournick'); 
```

但似乎都没有完成工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T03:21:14.093

`client.say("nickserv", "identify <pword>");`不工作？[API](https://node-irc.readthedocs.org/en/latest/API.html)说应该。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-18T04:47:41.257

为了扩展上面的答案，到目前为止，我发现真正知道客户端何时完全连接的唯一方法是`autoConnect: false`在创建时使用 then 模式：

```
var client = new irc.Client('irc.freenode.net', 'CommandBot', {
  autoConnect: false
});
client.connect(retryCount, function(serverReply) {
  console.log("Connected!\n", serverReply);
  client.join('#channel', function(input) {
    console.log("Joined #channel");
    client.say('#channel', "Hi, madafaca");
  });
}); 
```

# iphone - 基于打印输出从 NSDictionary 访问信息

> ID：14596112
> 
> 赞同：1
> 
> 时间：2013-01-30T03:18:33.727
> 
> 标签：iphone, ios, cocoa-touch, nsdictionary

我`NSLog(@"%@", [filter attributes]);`用来从字典中打印出以下内容：

```
CIAttributeFilterDisplayName = "Color Controls";
CIAttributeFilterName = CIColorControls;
inputBrightness =     {
    CIAttributeClass = NSNumber;
    CIAttributeDefault = 0;
    CIAttributeIdentity = 0;
    CIAttributeSliderMax = 1;
    CIAttributeSliderMin = "-1";
    CIAttributeType = CIAttributeTypeScalar;
}; 
```

我`NSDictionarys`对信息的组织方式以及信息的组织方式有些困惑。如果我需要访问 的属性`inputBrightness`，从字典中检索此格式的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:40:02.197

如果你想`inputBrightness`从字典中检索`filter`，你可以试试这个：

```
NSDictionary *inputBrightnessDict = filter[@"inputBrightness"]; //or [filter valueForKey:@"inputBrightness"]; 
```

这将返回另一个带有键值对的字典`CIAttributeClass`: `NSNumber`, `CIAttributeDefault`:`0`等。

`filter[@"inputBrightness"]`您可以通过查看 NSLog 语句来确认这是一本字典。`{`包含在和中的键值对`}`表示字典，其中 as`(`和`)`表示数组。

为了从您那里检索任何值，`inputBrightnessDict`您可以将其获取为，`inputBrightnessDict[@"CIAttributeType"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:21:49.847

```
[filter objectForKey:inputBrightness]; 
```

希望这可以帮助..

字典使用对象和键的概念。您可以使用键检索对象。关键对象成对出现。

# winapi - SetWindowsHookEx() WM_KEYBOARD_LL 没有通过全屏 RDC

> ID：14596117
> 
> 赞同：3
> 
> 时间：2013-01-30T03:19:16.940
> 
> 标签：winapi, setwindowshookex

我正在尝试做一个像 Skype 这样的客场计时器风格的东西。如果用户“离开”了一段时间，我会触发一些东西。我一直在将 SetWindowsHookEx() 与 WM_KEYBOARD_LL 一起使用，效果很好。直到您打开 RDC 连接并使其全屏显示。然后我永远不会得到键盘事件。

有人遇到过这个吗？或者知道实现这一目标的更好方法？我实际上已经测试了Skype，并且使用全屏RDC，如果我输入RDC，它将正确地从Away转到Online。

谢谢

编辑：在 Raymond Chen 发表评论后，我做了一些测试，他是对的。不敢相信我经过所有的搜索后从未找到这种方法。它还解决了我遇到的 WPF 应用程序未触发 LL_Mouse/KEYBOARD 事件的问题。

再次感谢。基于此更新我接受的答案。如果您需要做 LL_MOUSE/KWYBOARD，另一个答案仍然很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:59:38.987

看看[`GetLastInputInfo()`](http://msdn.microsoft.com/en-us/library/ms646302.aspx)。尝试定期调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T03:22:33.197

是的。您不会在远程桌面中按下按键。我遇到了这个问题，我找到的唯一解决方案是：

使用 FindWindow API 总是寻找 RDP 窗口，如果您检测到已创建全屏 RDP 窗口，您应该这样做：

a) 解开所有挂钩。b) 重置所有挂钩。

因此，创建一个调用 SetWindowHookEx API 的函数并将其称为 SetHook 和另一个作为 UnHook 函数。然后在您发现用户进入远程桌面时重新调用他们两个。

现在，即使在远程桌面连接中，您也可以按下按键。

我找到了我的旧代码，我做了这样的事情：

创建了一个 1 秒的计时器。然后

```
std::string tmp;
HWND hParent = ::FindWindow(TEXT("TSHELLHWND"), NULL);
GetWindowString(hParent, tmp);

ix = za.find(" - Remote Desktop");

if (hParent != NULL && ix != string::npos)
RestartHook(); 
```

当您重新启动钩子时，您还应该设置一个全局变量，否则它将一直重新启动钩子。当窗口关闭时，您可以重置该全局变量。

# racket - 在 Racket 中打印一个填充的二进制字

> ID：14596118
> 
> 赞同：5
> 
> 时间：2013-01-30T03:19:26.587
> 
> 标签：racket

我想在 Racket 中以二进制打印填充到 32 位的字。我知道`printf`和“~b”，但我希望它每次填充为 32 位长。我该怎么做呢？

例子

```
(printf "~b" 42) 
=> 101010
Want: 00000000000000000000000000101010 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T04:08:12.477

这是使用 Racket 5.3.1 及更高版本执行此操作的简洁方法：

```
Welcome to Racket v5.3.2.3.
-> (require racket/format)
-> (~r 42 #:base 2 #:min-width 32 #:pad-string "0")
"00000000000000000000000000101010" 
```

有关更多详细信息，请参阅[球拍/格式](http://docs.racket-lang.org/reference/strings.html?q=%7Er#%28mod-path._racket/format%29)。

在较旧的球拍版本中，您可以这样做：

```
Welcome to Racket v5.3.
-> (require srfi/13)
-> (string-pad (number->string 42 2) 32 #\0)
"00000000000000000000000000101010" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:45:16.977

那么这是一个简单，低效的方法：

```
(define (pad-left length padding the-str)
  (if (> length (string-length the-str))
      (pad-left length padding (string-append padding the-str))
      the-str))

(write (pad-left 32 "0" (format "~b" 42))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T03:56:10.047

好吧，我强行提出了一个解决方案：

```
(define (print-word x)
  (if  (not (<= -2147483648 x 4294967295))
    (error 'print-word "ERROR This number is bigger than a word ~a" x)
    (let* ([positive-x (if (< x 0) (+ #x100000000 x)
                         x)]
           [str (number->string positive-x 2)]
           [padded-str (string-append 
                         (make-string (- 32 (string-length str)) #\0)
                         str)])
      (build-string 39 
        (λ(i) (cond [(= (remainder (+ 1 i) 5) 0) #\space]
                    [else (string-ref padded-str (- i (quotient i 5)))])))))) 
```

这实际上返回了每 4 位之间有空格的字符串，因为实际上很难以另一种方式阅读。

# java - java.io.FileNotFoundException log4j

> ID：14596121
> 
> 赞同：0
> 
> 时间：2013-01-30T03:19:42.650
> 
> 标签：java

我遇到了一个问题，目前我收到以下错误。当然，这是因为用户无权访问 C：这不是问题所在。问题是我找不到任何参考：

*   日志4j
*   org.apache.log4j
*   org.apache.log4j.xml.DOMConfigurator

我查看了类路径、构成程序的所有类的导入、与项目关联的 XML 文件，但我找不到对这些项目的任何引用。

我需要知道如何追踪它被引用的位置，以便我可以将它从项目中删除。

错误示例

```
java.io.FileNotFoundException: c:\javalog\jhook.log (Access is denied)
at java.io.FileOutputStream.openAppend(Native Method)
at java.io.FileOutputStream.<init>(Unknown Source)
at java.io.FileOutputStream.<init>(Unknown Source)
at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:194)
at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:285)
at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:171)
at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:184)
at org.apache.log4j.xml.DOMConfigurator.parseChildrenOfLoggerElement(DOMConfigurator.java:502)
at org.apache.log4j.xml.DOMConfigurator.parseRoot(DOMConfigurator.java:471)
at org.apache.log4j.xml.DOMConfigurator.parse(DOMConfigurator.java:921)
at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:790)
at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:682)
at org.apache.log4j.xml.DOMConfigurator.configure(DOMConfigurator.java:811)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.eglue.jhook.logging.Log4jLogger.internalInvokeStaticMethod(Log4jLogger.java:94)
at com.eglue.jhook.logging.Log4jLogger.<init>(Log4jLogger.java:19)
at com.eglue.jhook.logging.LoggerFactory.getLogger(LoggerFactory.java:22)
at com.eglue.jhook.jni.ValuePair.<clinit>(ValuePair.java:11)
at com.eglue.jhook.jni.DataEnvelope.addValue(DataEnvelope.java:52)
at com.eglue.jhook.jni.HookManager.createMMFServer(HookManager.java:169)
at com.eglue.jhook.jni.HookManager.<init>(HookManager.java:116)
at com.eglue.jhook.Hook.init(Hook.java:43)
at com.eglue.jhook.Hook.guiInitialized(Hook.java:38)
at com.sun.java.accessibility.util.EventQueueMonitor.maybeNotifyAssistiveTechnologies(EventQueueMonitor.java:233)
at com.sun.java.accessibility.util.ComponentEvtDispatchThread.run(EventQueueMonitor.java:649) 
```

任何帮助/想法，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:26:32.410

我曾经遇到过同样的问题，我使用的第三方库在内部拥有 log4j 的副本。

以下代码将给出加载 log4j 的位置

```
DOMConfigurator.class.getProtectionDomain().getCodeSource().getLocation(); 
```

从这里您可以找到可能的配置文件的位置

# c# - 如何使用某个组合键+鼠标移动来调整窗口大小？（如 Linux 中的 Alt+F8）不单击并拖动

> ID：14596125
> 
> 赞同：0
> 
> 时间：2013-01-30T03:20:44.520
> 
> 标签：c#, c++, winapi, resize, window-resize

在 C# winform 应用程序中，我正在尝试实现一些 Linux 窗口管理器功能。我已经做了很多事情，但是现在，我正在尝试调整大小的部分，在窗口中按下某个组合，然后向右/向左移动鼠标，窗口的宽度会增加向右/向左，对角线移动，窗口将在两个方向上增加。

现在我已经知道如何注册热键、获取/设置鼠标光标位置、移动窗口等。全部在 winapi 中。

我似乎无法得到那么多的东西是，我怎样才能在一个方向上增加窗口的宽度，比如宽度？如果我通常增加它，它将跨越两个方向。我想了想，我认为：窗口会在两个方向上增加，但是如果我们只想向右增加它的宽度，我们会一直在它的起点重新定位/移动它，以便左侧它将保持固定，正确的将跨越。

什么是正确且简单的方法？我的猜测是对的吗？

请注意，我不只是希望它只在我的表单中工作，而是在任何窗口上工作。

任何 C++/C#/Winapi 代码都会有所帮助。

任何某种想法/想法也会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:34:20.100

任何 Windows 窗口：

*   `Alt`+ `Space`- 调出标准 Windows 菜单
*   `S`- 选择尺寸
*   箭头键（或鼠标） - 调整窗口大小
*   `Enter`- 提交操作

# powershell - Invoke-Expression 不将逗号分隔的字符串列表作为单个参数传递给脚本

> ID：14596134
> 
> 赞同：0
> 
> 时间：2013-01-30T03:21:38.270
> 
> 标签：powershell

我有一个 powershell 脚本，它正在调用一个批处理脚本（在里面运行 perl），当从我的 powershell 脚本调用时，它没有正确解析参数。情况如下。

手动调用我的批处理/perl 脚本时

```
test.cmd -tasks "Task A","Task B","Task C" 
```

一切正常，参数“Task A”、“Task B”、“Task C”被视为一个单元，可以传递给另一个可执行文件。

但是当使用调用表达式调用时

```
$fullCommand = "cmd.exe /C C:\test\test.cmd -tasks  `"Task A`",`"Task B`",`"Task C`";
Invoke-Expression -Command $fullCommand; 
```

批处理脚本认为每个字符串都是一个单独的参数。换句话说，“任务 A”是 -tasks 之后的第一个参数，然后是“任务 B”，然后是“任务 C”，脚本无法识别如何处理。

我可以通过单独传递每个任务名称来解决这个问题（例如 -Task “Task A” -Task “Task B” -Task “Task C”），但这需要我有额外的逻辑来解析这些，将它们放入一个数组，然后将它们改造成一个字符串并传回另一个可执行文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:14:28.233

Invoke-Expression 采用 powershell 表达式。如果要运行可执行文件，只需使用 & 运算符。例如

```
$exe = cmd.exe
$params = @("/C", "-tasks", '"Task A, "Task B", "Task C"') 
& $exe $params 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:55:08.800

有几种不同的方法可以使用单引号和双引号字符串来完成此操作。尝试：

```
iex 'cmd /c c:\test\test.cmd -tasks "Task A","Task B","Task C"' 
```

帮助解决这些问题的一种方法是获取[PowerShell Community Extensions](http://pscx.codeplex.com)并使用`echoargs.exe`util 代替您要运行的程序，例如：

```
8> iex 'cmd /c EchoArgs.exe -tasks "Task A","Task B","Task C"'
Arg 0 is <-tasks>
Arg 1 is <Task A>
Arg 2 is <Task B>
Arg 3 is <Task C>

Command line:
EchoArgs.exe  -tasks "Task A" "Task B" "Task C" 
```

它将向您展示您的程序如何从 PowerShell 接收参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-31T12:25:27.637

这是脚本排除子文件夹并仅删除根文件夹的文件

```
foreach($a in $b=(Get-childItem "C:\test\" "*.*"| Where-Object{!$_.psiscontainer}).FullName)
{
   $c="cmd.exe /C del /f '$a'"
   Invoke-Expression  $c
} 
```

# c# - Java/C# 静态类之间的主要区别是什么？

> ID：14596139
> 
> 赞同：17
> 
> 时间：2013-01-30T03:22:26.430
> 
> 标签：c#, java, static-class

在 C# 中，静态类是一个类，除了不支持继承之外，它还可以具有任何类型的成员，“普通”类可以具有除实例成员之外的任何类型的成员。

不太确定静态类在 java 中是如何工作的，但是基于我所看到的有限数量的 java 代码，我很清楚它们的工作方式并不完全相同。

有人可以列举差异吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T03:28:33.077

Java 中的静态类是该语言提供的三种嵌套类之一（另外两种是非静态嵌套类和函数范围类）。

Java 的静态类的行为方式与 C# 的嵌套类相同：它们可以访问封闭类的静态成员，但如果没有对封闭对象的附加引用，则无法访问实例成员。相反，非静态嵌套函数可以访问实例变量，但您需要一个封闭实例才能被实例化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T03:28:23.993

在 C# 中

使用静态类来包含与特定对象无关的方法。例如，创建一组不作用于实例数据并且不与代码中的特定对象关联的方法是一个常见的要求。您可以使用静态类来保存这些方法。

静态类的主要特点是：

*   它们只包含静态成员。
*   它们不能被实例化。
*   它们是密封的。
*   它们不能包含实例构造函数

在 Java 中：

*   只有嵌套类可以是静态的。

*   类中可以有静态成员

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T03:35:58.070

在 Java 中，不能将最外层的类设为静态。只有内部类可以用 static 修饰符声明。这样做可以防止内部类访问外部类的实例成员。

在 C# 中，您可以使用 static 修饰符定义外部类，这使得无法创建该类的实例变量。它们有两个不同的目的。要在 Java 中创建类似的效果，您可以定义私有无参数构造函数。单例模式实现就是这样做的。同样在 Java 中，也可以创建一个所有成员都定义为静态的类，但这并不妨碍创建新实例。

# backbone.js - 主干样板布局管理器

> ID：14596143
> 
> 赞同：1
> 
> 时间：2013-01-30T03:22:47.787
> 
> 标签：backbone.js, backbone-boilerplate, backbone-layout-manager

有人可以帮助解释/提供有关如何在 Backbone Bolierplate 中使用 LayoutManager 的示例吗？

在 app.js 中，我可以看到一个扩展主 app 对象的 useLayout 函数。在这里，它似乎正在设置一个基本布局元素：

```
// Helper for using layouts.
    useLayout: function(name, options) {
      // Enable variable arity by allowing the first argument to be the options
      // object and omitting the name argument.
      if (_.isObject(name)) {
        options = name;
      }

      // Ensure options is an object.
      options = options || {};

      // If a name property was specified use that as the template.
      if (_.isString(name)) {
        options.template = name;
      }

      // Create a new Layout with options.
      var layout = new Backbone.Layout(_.extend({
        el: "#main"
      }, options));

      // Cache the refererence.
      return this.layout = layout;
    } 
```

那是对的吗？如果是这样，我是否以某种方式将“UseLayout”功能与应用程序路由器一起使用？...向主视图添加不同的 UI 元素/嵌套视图？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:07:18.013

您可以像使用常规 Backbone 一样使用它`View`。`View`您可以使用它来创建一个新实例，而不是直接构建。您发布的代码是扩展`object`顶部的包装器，设置为可覆盖的默认元素。`Backbone Layout Manager``el: #main``View`

```
var layout = new useLayout({ template: "#viewElement", ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:46:01.630

我通常会有一个“应用程序”对象来存储整个应用程序所需的所有设置。然后，此对象扩展了一些有用的功能，例如您上面列出的功能。例如：

```
var app = {
  // The root path to run the application.
  root: "/",
  anotherGlobalValue: "something",
  apiUrl: "http://some.url"
};

// Mix Backbone.Events, modules, and layout management into the app object.
return _.extend(app, {
    // Create a custom object with a nested Views object.
    module: function(additionalProps) {
      return _.extend({ Views: {} }, additionalProps);
    },

    // Helper for using layouts.
    useLayout: function(options) {
      // Create a new Layout with options.
      var layout = new Backbone.Layout(_.extend({
        el: "#main"
      }, options));

      return this.layout = layout;
    },

    // Helper for using form layouts.
    anotherUsefulFunction: function(options) {
      // Something useful
    }

  }, Backbone.Events);

}); 
```

现在在我的路由器中，我会执行以下操作：

```
app.useLayout({ template: "layout/home" })
  .setViews({
    ".promotional-items": new Promotions.Views.PromotionNavigation(),
    ".featured-container": new Media.Views.FeaturedSlider({
      vehicles: app.vehicles,
      collection: featuredCollection
    })
}).render().then(function() {
  //Do something once the layout has rendered.
}); 
```

我刚刚从我的一个应用程序中抽取了一个样本，但我相信你能明白这一点。我的主要布局基本上只是一个布局模板文件，其中包含元素，因此可以将视图注入到它们各自的持有者中。

# android - Android 应用程序附加结构

> ID：14596144
> 
> 赞同：2
> 
> 时间：2013-01-30T03:22:52.490
> 
> 标签：android, add-on, filefilter

如何将附加组件合并到我的应用程序中？

此示例的附加组件将是游戏应用程序的新关卡，但它们也可以是项目、模型、功能等。

我对结构的想法是这样的：

我的应用程序有 10 个级别，用户下载了新的第 11 个级别。我的应用程序将此新级别下载到我的应用程序根目录下的预定义目录，例如...myAppRootDir/Addons/Levels/。

为了向用户展示这个新级别，每次下载时都会更新一个文件（例如 myAppFeatures.xml），其中包含一系列级别、项目、模型、功能等。为此，我相信我需要熟悉[File](https://developer.android.com/reference/java/io/File.html)类和[FileFilter](https://developer.android.com/reference/java/io/FileFilter.html)接口。

现在 myAppFeatures.xml 包含一组插件、功能等，然后我可以在我的应用程序中引用此文件来显示插件、功能等的 ListView，具体取决于用户选择查看的列表。

我想当用户从列表中选择项目时，我将传递一个唯一的 ID，以便我可以启动意图、动画、布尔逻辑等。也许使用[Android SQL Databases](https://developer.android.com/training/basics/data-storage/databases.html)处理得更好。

这种结构有意义吗？

# security - 低功耗蓝牙和 BR/EDR 的安全性之间的区别

> ID：14596149
> 
> 赞同：6
> 
> 时间：2013-01-30T03:24:01.807
> 
> 标签：security, bluetooth, bluetooth-lowenergy

这是一个基本问题，但我不知道。我已经阅读了规范，但我仍然不清楚。我的问题是，在蓝牙低功耗中，我们在安全性中使用短期和长期密钥。它们之间有什么区别？还请告诉我这些密钥是否也在 BR/EDR 中使用？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T20:40:36.490

要了解两者之间的区别，应该了解 BLE 中的配对阶段： 阶段 1：两个设备交换设备信息，例如功能等。 阶段 2：根据 BLE 规范定义的程序生成短期密钥 (STK) . 阶段 3：长期密钥 (LTK)、连接签名解析密钥 (CSRK) 和身份解析密钥 (IRK) 使用 STK 加密并在两个设备之间交换。

在第 3 阶段之后，将不再使用 STK。相反，LTK 用于链路层加密，而 CSRK 用于 AAT 层加密，具体取决于安全模式。

简而言之，STK在配对时用于对设备间的LTK等信息进行加密，之后在正常数据传输中使用LTK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:23:07.183

短期密钥 (STK) 用作加密的第一步（就在配对完成之后）。一旦链接被加密，就会生成长期密钥 (LTK)。

基本上，如果主服务器没有针对从服务器生成 LTK，并且同一从服务器尝试再次连接到主服务器，则主服务器假定从服务器未经过身份验证，因此尝试再次与从服务器配对。如果 LTK 存在，则主设备了解该设备已经过身份验证并继续进行会话加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T12:39:06.607

为时已晚，但对于其他人的信息。

**1.STK和LTK有什么区别？**

从[BLE 安全指南](http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-121r1.pdf)：

> LE 配对始于两个设备就临时密钥 (TK) 达成一致，其值取决于所使用的配对方法。然后设备交换随机值并根据这些值和 TK 生成短期密钥 (STK)。然后使用 STK 对链接进行加密，这允许 LTK、IRK 和 CSRK 的安全密钥分发。

**2.BR/EDR中是否也用到了这些key？**

不，在 BR/EDR 中不使用 LTK 和 STK。BR/EDR 和 BLE 的底层配对过程不同。BR/EDR 使用密钥协商，而 BLE 使用密钥传输进行配对。在 BR/EDR 中，link key 相当于 BLE 中的 LTK。

# android - MonoDroid：关于 Bitmap.Recycle() 和 Bitmap.Dispose()

> ID：14596151
> 
> 赞同：2
> 
> 时间：2013-01-30T03:24:23.943
> 
> 标签：android, bitmap, mono, xamarin.android, dispose

我还需要打电话`Bitmap.Dispose()`吗`Bitmap.Recycle()`？还是`Bitmap.Dispose()`就够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:14:06.017

根据Android文档[Bitmap.Recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)应该足够了：

> 释放与此位图关联的本机对象，并清除对像素数据的引用。

[Mono for Android 文档](http://androidapi.xamarin.com/index.aspx?link=M:Android.Graphics.Bitmap.Recycle%28%29)说的完全一样。

此外，[这个问题](https://stackoverflow.com/questions/4959485/bitmap-bitmap-recycle-weakreference-and-garbage-collector)对 Bitmap.Recycle 的工作方式有更深入的了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:27:04.233

另一种解决方案可能是包装在一个`using`语句中：

```
using (var bm = new Bitmap(..))
{
    // Do stuff with the Bitmap here
} 
```

请记住，当您离开 using 语句的范围时，Bitmap 可能会被垃圾回收。因此，如果您只是将其绘制到 a`Canvas`或其他东西上，这是一个不错的方法。

# php - 文本文件：如何解析文本文件？

> ID：14596155
> 
> 赞同：0
> 
> 时间：2013-01-30T03:24:42.710
> 
> 标签：php, javascript, jquery

如何解析文本文件。

我有一个存储在我拥有的文本文件中的 xml 响应，

```
<item>
<title geoid="2405">Maryland</title>
<description cong_dist="Congressional District 5">MD - Congressional District 5 <br/> No of Incidents: 4627</description>
<latitude>38.584128</latitude>
<longitude>-76.796848217734</longitude>
<georss:where>
<georss:polygon>38.702820547525 -76.531788346774 38.699669 -76.532537 38.691483067884 -76.532483595111 38.678363 -76.532398 38.668638351202 -76.530063988263 38.654562061162 -76.526685539659 38.645956 -76.52462 38.645269636055 -76.524245033111 38.640885760613 -76.521850081935 38.629361 -76.515554 38.615745 -76.511278 38.590229 -76.51634 38.555763 -76.515106 38.539149 -76.517506 38.537207756341 -76.517162112726 38.528988 -76.515706 38.50461 -76.506023 38.482997828117 -76.492790125676 38.482849 -76.492699 38.451233 -76.455799 38.450411034397 -76.455848927893 38.447891 -76.456002 38.446556103643 -76.45476571365 38.442422 -76.450937 38.433429 -76.436271 38.414682 -76.415384 38.396003 -76.40271 38.389477 -76.393378 38.387781 -76.388348 38.382013 -76.386229 38.364206709193 -76.386892465863 38.361267 -76.387002 38.341089 -76.40494 38.340713058044 -76.4050476356 38.33628 -76.408871 38.328088 -76.414539 38.319072 -76.421601 38.322185 -76.426075 38.324977 -76.436098 38.324977 -76.43848 38.322825 -76.451438 38.324633 -76.4517 38.325411 -76.449782 38.328684 -76.449114 38.329975 -76.448962 38.332278 -76.448185 38.332758 </georss:polygon>
<georss:polygon>38.268945 -76.864292 38.26986 -76.864903 38.270189 -76.864585 38.266112 -76.855873 38.264397 -76.851112 38.263759 -76.843681 38.263874 -76.84194 38.264561 -76.84104 38.261861 -76.837934 38.261282871941 -76.837988305571 38.254491 -76.842139 38.25616 -76.847074 38.268945 -76.864292</georss:polygon>
<georss:polygon>38.119264 -76.469798 38.115534 -76.469738 38.111392 -76.466404 38.10583 -76.46533 38.103035 -76.473266 38.104709 -76.476222 38.115873 -76.481036 38.128960028531 -76.492582005749 38.125491 -76.484719 38.123311 -76.483214 38.119171 -76.475795 38.120591 -76.472319 38.119264 -76.469798</georss:polygon>
</georss:where>
</item> 
```

我必须解析这个文本文件的值`javascript.`

怎么做，如何解析文本文件的值。用javascript打开。`(js)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:17:58.777

您可以从这里开始[http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)

**PHP 的简单示例：**

```
<?php
$xml = '<?xml version="1.0" encoding="UTF-8" ?> 
<rss> 
 <channel> 
    <item> 
        <title><![CDATA[Tom & Jerry]]></title> 
    </item> 
 </channel> 
</rss>'; 

$xml = simplexml_load_string($xml); 

$myFile = "testFile.txt";//text file path
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $xml->channel->item->title; 
fwrite($fh, $stringData);
fclose($fh);
?> 
```

**编辑：使用 Jquery**

如果 XML 文件结构是

```
<item>
   <subject></subject>
   <date></date>
   <thumb></thumb>
</item> 
```

使用 JQuery，$.ajax() 方法：

```
 var tmpSubject, tmpDate, tmpThumb;
        $.ajax({
        url: '/your_file.xml',
        type: 'GET', 
        dataType: 'xml',
        success: function(returnedXMLResponse){
            $('item', returnedXMLResponse).each(function(){
                 tmpSubject = $('subject', this).text();
                 tmpDate = $('date', this).text();
                 tmpThumb = $('thumb', this).text();
                //Here you can do anything you want with those temporary variables
            })
        }  
    }); 
```

请记住在标头中包含 jquery 文件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

# vb.net - 数学方程到文本

> ID：14596157
> 
> 赞同：0
> 
> 时间：2013-01-30T03:24:48.190
> 
> 标签：vb.net, math, equation

有没有办法将数学方程转换为文本？

前任。

```
 3π * 3 = x 
```

输出将是

```
3(3.141592) multiplied by 3 equals to x 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:03:38.423

默认情况下这是不可能的，您可以编写代码以获取不同符号和数字的正确字符串（单词）。您可以使用数据库来存储单词，也可以使用您的函数来完成。

# ipad - 更改方向时，地图注释顶部的弹出框会反弹

> ID：14596158
> 
> 赞同：0
> 
> 时间：2013-01-30T03:25:03.467
> 
> 标签：ipad, ios5, uipopovercontroller, mkannotation, popover

在我目前正在工作的 iPad 应用程序中，我有一个地图注释，每次点击它时，都会显示一个弹出框以显示其详细视图。显示弹出窗口没有问题。我的问题是，当我点击注释时，会在其顶部显示一个弹出框，然后更改我的方向，弹出框反弹，这意味着它不再位于其相应地图注释的顶部。有什么想法吗？提前致谢。

# javascript - 在具有数据属性的 IE 中使用 javascript 向 DOM 添加脚本标记

> ID：14596164
> 
> 赞同：14
> 
> 时间：2013-01-30T03:25:26.797
> 
> 标签：javascript, dom, requirejs

在我的页面上运行了一些东西之后，我需要将以下脚本标记添加到 DOM：

```
<script data-main="js/main" src="lib/Require/require.js"></script> 
```

我知道最好的一切都将在我的需要文件中，但到目前为止我需要修复它才能在 IE 中工作。

我在 FF/Chrome 中工作的是：

```
var script = document.createElement('script');
script.setAttribute('data-main', 'js/main');
script.src = 'lib/Require/require.js';
document.getElementsByTagName('script')[0].parentNode.appendChihld(script); 
```

但是，当我尝试设置属性时，IE 不喜欢它`'data-main'`，因此无法正常工作。

我怎样才能解决这个问题并让它将脚本元素添加到 dom 并让它同时加载脚本？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T03:35:10.940

这似乎在 IE 中也可以正常工作：

```
var scriptTag = document.createElement("script");
scriptTag.type = "text/javascript";
scriptTag.src = "lib/Require/require.js";
scriptTag.setAttribute("data-main", "js/main");
( document.getElementsByTagName("head")[0] || document.documentElement ).appendChild( scriptTag ); 
```

# python - 如何计算python中的字符串出现次数

> ID：14596165
> 
> 赞同：0
> 
> 时间：2013-01-30T03:25:51.463
> 
> 标签：python, list

我有这个文件

```
10, 44.66.44.55 , AD, AC , 112
10, 44.66.54.55 , AD, AC , 112
10, 44.66.44.55 , AD, AC , 112
50, 44.66.64.55 , AD, AC , 112
10, 44.66.54.55 , AD, AC , 112
10, 44.66.44.55 , AD, AC , 112 
```

我想添加具有相同 IP 地址的 column1。我想要像这样的输出

```
30, 44.66.44.55 , AD, AC , 112
20, 44.66.54.55 , AD, AC , 112
50, 44.66.64.55 , AD, AC , 112 
```

我想用python做

我试过了

```
import re
import collections

a = collections.Counter()
with open("temp.txt", "r") as f:
   for line in f.readlines():
         list = line.split()
     a[list[1]] += int(list[0])
         print list[1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:47:41.230

您可以使用 itertools.groupby 解决方案，这在这种情况下是理想的

```
>>> with open("test.csv") as fin:
    grouped_lines = groupby(sorted((e.split(',') for e in fin), key = itemgetter(1)), key = itemgetter(1))

>>> for k, v in grouped_lines:
    lines = list(v)
    lines[0][0] = sum(int(e[0]) for e in lines)
    print lines[0]

[30, ' 44.66.44.55 ', ' AD', ' AC ', ' 112\n']
[20, ' 44.66.54.55 ', ' AD', ' AC ', ' 112\n']
[50, ' 44.66.64.55 ', ' AD', ' AC ', ' 112\n'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:47:53.123

您需要`,`在空格上拆分

尝试这个

`list = line.split(',')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:25:53.477

虽然@Abhijit 的答案更短，
试试这个，它也可以。

处理完文件数据后，我将数据存储在字典中。然后在需要时处理这些数据。
您的数据是字典中的值。

```
all_ips = {}

f = open('Test2.txt')
lines = f.readlines()
f.close()

for line in lines:
    ip = line.split(',')[1]

    props = line.split(',')
    props[0] = int(props[0])

    if ip not in all_ips:
        all_ips[ip] = props
    else:
        all_ips[ip][0] += props[0]

for ip in all_ips:
    print all_ips[ip] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:22:44.240

有一个`collections.Counter`模块。[它返回http://docs.python.org/2/library/collections.html](http://docs.python.org/2/library/collections.html)的字典`{'word': numberTimes}`

# c# - Windows phone 8 sdk 中的“TargetInvocationException”

> ID：14596167
> 
> 赞同：2
> 
> 时间：2013-01-30T03:26:13.947
> 
> 标签：c#, web-services, exception, xml-parsing, windows-phone-8

> System.ni.dll 中发生 System.Reflection.TargetInvocationException 类型的异常，但未在用户代码中处理。

```
var client = new WebClient(); 
client.DownloadStringCompleted += (sender, e) =>
           {
                XDocument doc = XDocument.Load(e.Result);
           };
client.DownloadStringAsync(new Uri("http://mylocation.com/myfile.php?userid=xyz")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:40:31.420

也许您可以添加一些错误检查来缩小范围

```
 WebClient client = new WebClient();
        client.DownloadStringCompleted += (sender, e) =>
        {
            if (e.Error != null && !string.IsNullOrEmpty(e.Result))
            {
                XDocument doc = XDocument.Load(e.Result);
            }
        };
        client.DownloadStringAsync(new Uri("http://mylocation.com/myfile.php?userid=xyz")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T11:28:38.093

也许应用程序和服务之间传递的数据超过了一定的大小。例如，当您将大于 8K 字符的字符串传递回 Service 时，您将收到 404 错误。需要更改默认配置以处理大数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-22T04:43:35.110

大多数情况下，e.Result 或其子项之一为 null，因此会引发此异常。

转到工具 -> 选项 -> 调试并选择在 Visual Studio 中启用仅我的代码。这应该可以帮助您找出问题所在。

# objective-c - 使用 GLSL 3.0+ 绘制球体、圆柱体等

> ID：14596172
> 
> 赞同：-3
> 
> 时间：2013-01-30T03:27:04.050
> 
> 标签：objective-c, macos, opengl, 3d, glsl

是否有任何教程用于解释如何使用 OpenGL 着色语言绘制圆柱体或球体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:50:34.810

> 是否有任何教程用于解释如何使用 OpenGL 着色语言绘制圆柱体或球体？

不，因为这不是 GLSL 所做的（嗯，实际上可以使用几何着色器和镶嵌着色器，但这不是 GLSL 的用途）。

# wordpress - 类别永久链接重定向到 index.php

> ID：14596176
> 
> 赞同：0
> 
> 时间：2013-01-30T03:27:10.180
> 
> 标签：wordpress, categories, redirect

例如，当我键入“localhost/?cat=3”时，要显示 ID 为 3 的所有类别的帖子，而不是这样做，它会显示所有类别的所有帖子（这是我的 index.php 的工作），所以我猜想重定向到主页正在发生。我真的不知道该怎么办。你能帮助我吗？下面是 index.php 检索帖子的代码：

```
<?php 
        $tmp = $wp_query;
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        $wp_query = new WP_Query('cat=-4&posts_per_page=5&paged=' . $paged);
        if ( $wp_query->have_posts() ) : while ( $wp_query->have_posts() ) : $wp_query->the_post(); ?>
    <div id="wrapper2">
        <div id="topicos" >
            <p id="titulo"><?php the_title(); ?></p>
            <p id="data_public">Publicado em <b><?php the_time('j') ?> de <?php the_time('F, Y') ?> </b> por <?php the_author() ?></p>
            <?php if(has_post_thumbnail()){
            ?>  <div id="thumbnail">
                    <?php the_post_thumbnail(); ?>
                </div>  
                <?php
            }
            ?>
            <div id="prv_texto"><?php the_excerpt(); ?></div>

            <p id="cont_lendo"><a href="<?php the_permalink(); ?>">Continuar lendo...</a></p>
        </div>
         <?php endwhile; ?>
         <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:23:40.730

您是否尝试过在您的主题中创建一个archive.php 文件，并在之前没有自定义查询的情况下运行一个简单的Wordpress 循环？

# java - Spotify 谜题：避免异常处理错误

> ID：14596180
> 
> 赞同：2
> 
> 时间：2013-01-30T03:27:45.827
> 
> 标签：java, exception-handling, io, spotify, puzzle

我正在研究一个 Spotify 拼图（可[在此处](http://www.spotify.com/uk/jobs/tech/zipfsong/)查看）。我正在用 Java 编写解决方案，并且我的代码在 Eclipse、ideone.com 和我的 osx 上的终端中传递了他们的两个示例输入，所有这些都没有错误。然而，每当我提交给 Spotify 机器人时，我都会得到以下极简主义的回应：

> 我们已经测试了您的解决方案，不幸的是，在这样做的同时，我们
> 
> 发现以下错误：运行时错误
> 
> 未捕获到异常

这基本上是我在输入中读取的内容：

```
scn = null;

try {
    scn = new Scanner(System.in);

      if(scn.hasNext()){
      strIn = scn.nextLine();
      //do work on first line of input
      }

      if(scn.hasNext()){
      strIn = scn.nextLine();
      //do work on second line of input
      }

      //do work on the rest of the lines
      while (scn.hasNext()) {
      strIn = scn.nextLine();

      if(/*reached last line*/){
           break;
      }
      }

  }

  catch(Exception e){
      System.out.println("Exception caught");
      System.out.println(e.getStackTrace());

  } finally {
      if (scn != null) {
          scn.close();
      }
  } 
```

[你可以在这里](http://ideone.com/B96Qcf)查看我的完整解决方案。请注意，根据 Spotify 提交指南，我的实际提交声明我的班级是公开的。

由于该问题只需要从标准输入到标准输出的简单 I/O，因此我似乎只需要考虑在我的 try 块中读取输入时可能引发的任何异常。我为所有异常（我知道的错误形式）提供了一个 catch 块，但不应该处理它吗？也许我忽略了一些可能在其他地方出现的例外情况？

可能是我没有考虑 Spotify 机器人如何解析输入的一些小特性，但它们的响应消息和指南使得很难确定问题的确切位置。如果这个问题过于本地化，我深表歉意——其他 Spotify 难题问题都是这样看待的——但我认为我的 i/o 和异常问题足够广泛，也许人们对 Spotify 机器人如何工作有一些很好的答案。另外，我已经有一段时间没有用 Java 编码了，所以当然欢迎任何其他评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T17:12:38.987

只是为了使它正式，引发的异常不是 I/O 异常，就像我想的那样，而是实际上是整数溢出异常。我需要将变量保持轨道播放的数据类型从 int 更改为 long。Spotify 使用的测试数据肯定有非常大的数字，我的整数无法容纳，这就是程序不断崩溃的原因！希望这对人们有所帮助。

# android - 数据输入活动表格

> ID：14596182
> 
> 赞同：0
> 
> 时间：2013-01-30T03:27:52.230
> 
> 标签：android

我正在尝试创建一个看起来与此类似的活动（以红色圈出）：

![例子](../Images/0c2c084d36e4377acdf6719d7627e522.png)

我想知道他们是否使用 Listview 来执行此操作？

我也想知道，他们是如何根据您输入的提醒数量来扩展和缩回“提醒”部分的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:37:04.427

> 我想知道他们是否使用 Listview 来执行此操作？

不太可能。那大概是一个`GridLayout`，或许包裹在一个`ScrollView`。

> 我也想知道，他们是如何根据您输入的提醒数量来扩展和缩回“提醒”部分的。

`GridLayout`在适当的位置添加更多的孩子。

# javascript - 用于在 javascript 中同步的回调函数

> ID：14596184
> 
> 赞同：0
> 
> 时间：2013-01-30T03:28:02.073
> 
> 标签：javascript, node.js, callback, mongoose, geocode

我正在尝试使用 Mongoose 在 Node.js 中使用一个函数，该函数是用于 HTTP 请求的 .save 函数，我正在尝试提取地理坐标并将它们保存为 MongoDB 中 Mongoose Schema 中的数组。但是，我似乎遇到了同步问题，因为坐标最初打印为未定义，我必须刷新页面才能显示它们。我认为回调会解决这个问题，但他们没有。（我在下面添加了相关的代码片段。）我是在回调中做错了什么，还是应该做其他事情？提前致谢！

```
ArticleProvider.prototype.save = function(articles, callback) {
for( var i =0;i< parties.length;i++ ) {
    article = articles[i];
    article._id = articleCounter++;
    article.created_at = new Date();
if (article.coords === undefined){
      geocode(article.address, function(results){
        article.coords = results;
      });
}
 callback(null, articles);
};

var geocoder = require('Geocoder');
function geocode(address, callback) {
    geocoder.geocode( address, function( err , data) {
         // console.log(data.results[0].geometry.location);
          //console.log( [data.results[0].geometry.location.lng, data.results[0].geometry.location.lat]);
          var coords = [data.results[0].geometry.location.lng, data.results[0].geometry.location.lat];
        console.log(coords);
        callback(coords);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:21:06.120

您在调用回调`callback(null, articles);`之前`geocode`调用回调。在调用回调之前，您需要确保所有这些都完成。我通常会推荐一个异步库，例如[Caolan 的 async](https://github.com/caolan/async)（查看`async.forEach`），但对于它的单个案例可能是矫枉过正。我会建议：

```
ArticleProvider.prototype.save = function(articles, callback) {
  var finishedCount = 0;
  var finishedOne = function() {
    finishedCount++;
    if(finishedCount == parties.length)
      callback(null, articles);
  };
  for( var i =0;i< parties.length;i++ ) {
    article = articles[i];
    article._id = articleCounter++;
    article.created_at = new Date();
    if (article.coords === undefined){
      geocode(article.address, function(results){
        article.coords = results;
        finishedOne();
      });
    }
    else {
      finishedOne();
    }
  }
}; 
```

我还修复了您的括号不匹配问题，我认为这是复制/粘贴错误。

# c - MPI简单数据传输程序

> ID：14596186
> 
> 赞同：2
> 
> 时间：2013-01-30T03:28:13.463
> 
> 标签：c, mpi

我应该从一个处理器向另一个处理器发送一些整数，这将在我大学的 shell 服务器上完成......

首先我创建了我的解决方案代码，它看起来像（至少我是这么认为的......）

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char **argv)
{
    int currentRank = -1;

    MPI_Init(&argc, &argv);

    MPI_Comm_rank(MPI_COMM_WORLD, &currentRank);

    if(currentRank == 0) {
        int numberToSend = 1;
        MPI_Send(&numberToSend , 1, MPI_INT, 1, 0, MPI_COMM_WORLD);
    }
    else if(currentRank == 1) {
        int recivedNumber;
        MPI_Recv(&recivedNumber, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
        printf("Recived number = %d\n", recivedNumber);
    }

    MPI_Finalize();

    return 0;
} 
```

比我应该创建一些 name.pbs 文件...并运行它。而且我不明白如何指定这个处理器数量......我尝试如下：

```
#PBS -l nodes=2:ppn=2 
#PBS -N cnt 
#PBS -j oe 
mpiexec ~/mpi1 
```

但后来仍然不知道如何处理腻子。`qstat`comamnd 似乎什么都不做……只有当`qstat -Q`它`q`向我显示一些“统计数据”但到处都是 0 值时……这是我在 mpi 中的第一个程序，我真的一点也不明白……

当我尝试运行我的程序时，我得到：

```
164900@halite:~$ ./transfer1
Fatal error in MPI_Send: Invalid rank, error stack:
MPI_Send(174): MPI_Send(buf=0x7fffd28ec640, count=1, MPI_INT, dest=1, tag=0, MPI_COMM_WORLD) failed
MPI_Send(99).: Invalid rank has value 1 but must be nonnegative and less than 1 
```

谁能解释我如何在服务器上运行它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:56:16.080

示例代码在这里工作正常，用 OpenMPI 和 GCC 测试，

问题是，当您运行代码时，您需要通过 mpirun 实例指定内核数量，您可能已经使用扭矩或您使用的任何调度程序正确分配了它们，但是您正在运行编译后的代码，就好像它是您需要的串行代码一样用 mpi heres 和相关输出的示例运行它

```
mpirun -np 2 ./example
Recived number = 1 
```

使用不同的调度程序 hydra、PBS 或不同的 MPI 版本，您需要遵循与上述相同的模式，并且特定于您的 mpi 运行命令核心数

# binary-tree - 检查二叉树是否平衡（Big-O）

> ID：14596195
> 
> 赞同：0
> 
> 时间：2013-01-30T03:29:05.370
> 
> 标签：binary-tree, big-o

检查二叉树是否平衡。

CTCI 5th上的源代码：

```
public class QuestionBrute {

public static int getHeight(TreeNode root) {
    if (root == null) {
        return 0;
    }
    return Math.max(getHeight(root.left), getHeight(root.right)) + 1;
}

public static boolean isBalanced(TreeNode root) {
    if (root == null) {
        return true;
    }
    int heightDiff = getHeight(root.left) - getHeight(root.right);
    if (Math.abs(heightDiff) > 1) {
        return false;
    }
    else {
        return isBalanced(root.left) && isBalanced(root.right);
    }
}

public static void main(String[] args) {
    // Create balanced tree
    int[] array = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    TreeNode root = TreeNode.createMinimalBST(array);
    System.out.println("Root? " + root.data);
    System.out.println("Is balanced? " + isBalanced(root));

    // Could be balanced, actually, but it's very unlikely...
    TreeNode unbalanced = new TreeNode(10);
    for (int i = 0; i < 10; i++) {
        unbalanced.insertInOrder(AssortedMethods.randomIntInRange(0, 100));
    }
    System.out.println("Root? " + unbalanced.data);
    System.out.println("Is balanced? " + isBalanced(unbalanced));
}
} 
```

由于算法要检查每个节点的高度，并且我们没有在每次递归中保存高度，所以运行时间应该是 O(N^2)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:08:48.853

首先，让我们修复一下您的代码。您检查根是否平衡的功能将无法正常工作，因为在以下情况下二叉树是平衡的：

```
maxHeight(root) - minHeight(root) <= 1 
```

我引用维基百科：“平衡二叉树通常被定义为一个二叉树，其中每个节点的两个子树的深度相差 1 或更小”

您的算法将为这棵树给出错误的答案：

![一个简单的二叉树，大小为 9，高度为 3，根节点的值为 2。上面的树是不平衡的，没有排序。](../Images/2d280baf6960b2bb91d1f2c004db1bcc.png)

当你调用`getHeight(Node7)`它时它会返回 3，当你调用`getHeight(Node5)`它时它也会返回 3，因为`(0>1) == false`你会返回`true`:(

要解决此问题，您所要做的就是以`int MinHeight(TreeNode node)`与您相同的方式实施，`getHeight()`但使用`Math.min()`

现在回答你。就运行时复杂性而言，每当您`getHeight()`从根调用函数时，您正在执行[DFS](http://en.wikipedia.org/wiki/Depth-first_search)，并且由于您必须访问所有节点才能找到树的高度，因此该算法将为 O(N)。现在确实，您在调用时执行了该算法两次，`maxHeight(root)`但是`minHeight(root)`由于它们都是 O(N) （假设它们完全按照所做`getHeight()`的操作），因此总体复杂度将以 C*N 作为某个常数 C 的上限，并且所有N 大于某个 N 结，即 O(N)，其中 N 是树的节点数；）

干杯!

# c# - C#图表轴标签位置变化

> ID：14596196
> 
> 赞同：0
> 
> 时间：2013-01-30T03:29:15.070
> 
> 标签：c#, charts, labels

我想从表格的左侧到右侧更改屏幕左侧 (149 169 189 209 229) 位置上的这些值，我该怎么做？我认为它在某处`chart1.ChartAreas[0].AxisY`，但我找不到它。我不能发布图片，所以这里是我的表单和值的链接：http: [//img689.imageshack.us/img689/1484/clipboardcc.jpg](http://img689.imageshack.us/img689/1484/clipboardcc.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:03:30.420

你可以改变你`Y Axis`的`Secondary`

例子：

```
 myLines.YAxisType = AxisType.Secondary; 
```

# android - 操作栏强制拆分选项卡和操作模式

> ID：14596198
> 
> 赞同：5
> 
> 时间：2013-01-30T03:29:20.390
> 
> 标签：android, android-actionbar, actionmode

如何强制`ActionBar`使用制表符（在`top`）和`ActionMode`（在`bottom`）拆分？
`android:uiOptions="splitActionBarWhenNarrow"`没有帮助（我正在尝试使用宽屏模拟器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T17:57:59.357

在纵向模式下测试它会更好，因为 splitActionBarWhenNarrow 明确用于窄（即纵向）方向。

这种设计是有目的的——在横向模式下，您的垂直空间更加有限，因此充分利用单个操作栏的更大宽度而不是占用两倍的空间（顶部和底部）是有意义的。虽然 Ethan 提供的链接将引导您进行一些自定义实现，但我建议重新考虑设计以尽可能遵循 Android 设计模式。当你有一个非常好的理由时，当然会偏离。

# c - 在 Linux 服务器上运行 C 程序

> ID：14596199
> 
> 赞同：10
> 
> 时间：2013-01-30T03:29:24.590
> 
> 标签：c, webserver, hosted

这个问题我肯定已经回答了，但老实说，我不知道如何通过搜索来提问。所以请原谅我缺乏知识，因为这是我在计算机科学领域真正缺乏知识的唯一地方之一。

我如何/是否有可能在托管服务器上运行 C 程序。我可以去哪里[http://mysite.com/myspecialcprogram.c](http://mysite.com/myspecialcprogram.c)它会运行？或者更好的是，我可以在多大程度上使用像 C 这样的高级语言来为我的服务器编程？

还应该注意的是，我有一个运行 apache 的专用 Linux 机器。所以我有完全的访问权限。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T05:22:34.350

正如@paddy 已经提到的，一种方法是将其作为 CGI 运行。但是，程序会运行缓慢，启动时间长。

另一种方法是使用[FastCGI](http://www.fastcgi.com/drupal/)运行它。它会更快，您只需要对代码进行一些修改即可使其正常工作，例如 CGI：

```
#include <stdio.h>
#include <time.h>

int main(int argc, char **argv)
{
    time_t timer;
    char time_str[25];
    struct tm* tm_info;

    time(&timer);
    tm_info = localtime(&timer);
    strftime(time_str, sizeof(time_str), "%Y/%m/%d %H:%M:%S", tm_info);

    /* Without this line, you will get 500 error */
    puts("Content-type: text/html\n");

    puts("<!DOCTYPE html>");
    puts("<head>");
    puts("  <meta charset=\"utf-8\">");
    puts("</head>");
    puts("<body>");
    puts("   <h3>Hello world!</h3>");
    printf("   <p>%s</p>\n", time_str);
    puts("</body>");
    puts("</html>");

    return 0;
} 
```

编译它：

```
$ # 'cgi-bin' path may be different than yours
$ sudo gcc example.c -o /usr/lib/cgi-bin/example
$ wget -q -O - http://localhost/cgi-bin/example
<!DOCTYPE html>
<head>
  <meta charset="utf-8">
</head>
<body>
   <h3>Hello world!</h3>
   <p>2013/01/30 08:07:29</p>
</body>
</html>
$ 
```

使用 FastCGI：

```
#include <fcgi_stdio.h>
#include <stdio.h>
#include <time.h>

int main(int argc, char **argv)
{
    time_t timer;
    char time_str[25];
    struct tm* tm_info;

    while(FCGI_Accept() >= 0)   {
        time(&timer);
        tm_info = localtime(&timer);
        strftime(time_str, sizeof(time_str), "%Y/%m/%d %H:%M:%S", tm_info);

        /* Without this line, you will get 500 error */
        puts("Content-type: text/html\n");

        puts("<!DOCTYPE html>");
        puts("<head>");
        puts("  <meta charset=\"utf-8\">");
        puts("</head>");
        puts("<body>");
        puts("   <h3>Hello world!</h3>");
        printf("   <p>%s</p>\n", time_str);
        puts("</body>");
        puts("</html>");
    }

    return 0;
} 
```

编译它：

```
$ # Install the development fastcgi package, I'm running Debian
$ sudo apt-get install libfcgi-dev 
 ...
$ 
$ # Install Apache mod_fcgid (not mod_fastcgi)
$ sudo apt-get install libapache2-mod-fcgid
 ...
$ 
$ # Compile the fastcgi version with .fcgi extension
$ sudo gcc example.c -lfcgi -o /usr/lib/cgi-bin/example.fcgi
$ # Restart Apache
$ sudo /etc/init.d/apache2 restart
Restarting web server: apache2 ... waiting .
$
$ # You will notice how fast it is
$ wget -q -O - http://localhost/cgi-bin/example.fcgi
<!DOCTYPE html>
<head>
  <meta charset="utf-8">
</head>
<body>
   <h3>Hello world!</h3>
   <p>2013/01/30 08:15:23</p>
</body>
</html>
$
$ # Our fastcgi script process
$ ps aux | grep \.fcgi
www-data  2552  0.0  0.1   1900   668 ?        S    08:15   0:00 /usr/lib/cgi-bin/example.fcgi
$ 
```

在 Poth 程序中，有：

```
puts("Content-type: text/html\n"); 
```

这将打印：

```
Content-type: text/html[new line]
[new line] 
```

没有它，Apache 将抛出 500 服务器内部错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T03:56:37.543

您需要编译您的 C 程序。Linux 随 GNU C 编译器 (gcc) 一起分发。在紧要关头，您可以使用命令行编译程序：

```
gcc -o myprog myprog.c 
```

这意味着您需要 shell 访问权限。在评论中，人们建议使用该`system`函数通过 PHP 运行 shell 命令。出于安全原因，您的 PHP 安装可能已禁用此命令。

您真的应该询问您的主机是否可以通过 SSH 提供 shell 访问。

如果您的主机可以这样做，您可以运行终端会话（如果您在本地有 Windows，则使用 PuTTY，或者在大多数其他系统上使用命令行 ssh）。

所以你上传你的文件（通过 FTP、SCP 或其他方式），然后编译它。到目前为止一切都很好。

现在你需要你的网络服务器来让它运行。通常，您无法从 Web 服务器的文档根目录执行二进制文件。您需要将二进制文件放入配置的`cgi-bin`目录中。这通常位于文档根目录的上一级目录。

在我的系统上，我的文件位于：

```
/srv/httpd/htdocs 
```

我的 cgi-bin 在：

```
/srv/httpd/cgi-bin 
```

通常，cgi-bin 目录将使用别名，以便它出现在您的文档根目录中。所以你可以通过`http://mysite.com/cgi-bin/myprog`. 您确实需要在您的网络服务器上启用 CGI。在 Linux 上，您的 Web 服务器可能是 Apache。

此外，服务器需要权限才能运行该文件。这意味着适当用户的执行权限。紧要关头：

```
chmod 0770 /srv/httpd/cgi-bin/myprog
chown apache:apache /srv/httpd/cgi-bin/myprog 
```

示例适用于我的特定系统。

这一切都假设您想要运行您的程序并通过 HTTP 获取输出。如果不是这种情况，只需拥有 shell 访问权限就足够了。如果您不理解这个答案，那么我建议您认真阅读有关 Linux、网络和 HTTP 的内容。

这是一个让 CGI 工作的 Apache 指南：[http ://httpd.apache.org/docs/2.2/howto/cgi.html](http://httpd.apache.org/docs/2.2/howto/cgi.html)

# php - 如何访问所有 PHP-MySQL 在提交表单时在 $_GET 中动态生成的元素？

> ID：14596200
> 
> 赞同：0
> 
> 时间：2013-01-30T03:29:39.943
> 
> 标签：php, mysql, forms

我有一个简单的数据库和一个小桌子。这张名为**STOCK**的表只有一列 - 文具中不同物品的名称。

我在**PHP-MySQL中动态生成一个表单，该表单从****STOCK**（如 Pencil、Pen 等）中获取 Item并使用`echo()`函数显示它们。所以我生成了一个显示项目和相应的`<input>`文本框的表单。提交此表单后，如何通过遍历`$_GET`数组来访问所有名称及其文本输入？

动态生成的表格是：

```
 $res = mysql_query("SELECT * FROM Stock");

        echo "<form name='input' action='add_stock_later.php' method='get'>";
        echo "<table align='left' border='1'>
        <tr>
        <th>Item</th>
        <th>Quantity</th>
        <th>Remarks</>
        </tr>";

        while($row = mysql_fetch_array($res))
          {
            $item = $row['Item'];
            echo "<tr>";
            echo "<td>" . $item . "</td>";

            echo "<td><input type='text' name='$item'></td>";
            echo "<td><input type='text' name='Remarks'></td>";
            echo "</tr>";
          }

          echo "<tr><td></td>
        <td align='middle'><input type='submit' value='Submit'></td></tr>";

        echo "</table>"; 
```

现在在**add_stock_later.php**中，我如何访问所有这些`$item`以及它的相应输入，而无需手动使用`$_GET['Pencil'], $_GET['Pen']`等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:32:20.917

首先编辑您的表格。

```
echo "<td><input type='text' name='".$item."[quantity]'></td>";
echo "<td><input type='text' name='".$item."[remarks]'></td>"; 
```

然后使用[`foreach()`](http://php.net/manual/en/control-structures.foreach.php).

```
foreach ($_GET as $stationery => $info) {
    $stationery; // name of the stationery
    $info["quantity"]; // quantity of the stationery
    $info["remarks"]; // remarks for the stationery
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:37:43.993

像这样的东西，当然添加它。

```
$required = array('pencil', 'pen', 'paper', 'staples');
foreach ($required as $getKey){
    if (isset($_GET[$getKey]) && $_GET[$getKey] !=''){
        $$getKey = trim($_GET[$getKey]);
    }
} 
```

这变成`$_GET['pencil']`了`$pencil`，您无需担心试图注入垃圾的傻瓜。

# objective-c - 尝试从 UITableView 中删除行时断言失败

> ID：14596202
> 
> 赞同：0
> 
> 时间：2013-01-30T03:29:53.980
> 
> 标签：objective-c, xcode, uitableview, tableview, reloaddata

当我尝试使用 UITableViewCellEditingStyleDelete 从 UITableView 中删除一行时出现断言失败。希望有人能告诉我我的代码出了什么问题。

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:1070
2013-01-30 14:19:21.450 MyApp[48313:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (1) must be equal to the number of rows contained in that section before the update (3), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).'
*** First throw call stack:
(0x28ee012 0x1d3fe7e 0x28ede78 0x19fef35 0xf51b8d 0xf5df95 0xf5dfc3 0xcfe9 0xf6c384 0x10a9b1b 0x1d53705 0xeb3920 0xeb38b8 0xf74671 0xf74bcf 0xf746a6 0x1144f95 0x1d53705 0xeb3920 0xeb38b8 0xf74671 0xf74bcf 0xf73d38 0xee333f 0xee3552 0xec13aa 0xeb2cf8 0x2d1adf9 0x2d1aad0 0x2863bf5 0x2863962 0x2894bb6 0x2893f44 0x2893e1b 0x2d197e3 0x2d19668 0xeb065c 0x24fd 0x2435)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

这是我的代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [records count];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {

        // Delete record from the sqlite database
        NSNumber *recordDBID = [records objectAtIndex:indexPath.row];
        Record *myRecord = [[Record alloc] initWithDBID:recordDBID database:UIAppDelegate.formManager.connection];
        BOOL valueX = [myRecord deleteRecordInDb:recordDBID];
        [myRecord release];

        // Delete record from array
        NSMutableArray *aNewArray = [[NSMutableArray alloc] initWithArray:records];
        [aNewArray removeObjectAtIndex:indexPath.row];
        records = aNewArray;
        [aNewArray release];

        // Delete the record from the table
        [tableView beginUpdates];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tableView endUpdates];
        [tableView reloadData];   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:16:54.427

我认为您可能会使删除表格视图行过于复杂。

你*不需要*打电话`[tableView beginUpdates]`，`[tableView endUpdates]`如果你只想在这两个电话之间删除一行，那么你可能会丢失它们。仅当您要同时执行多个插入或删除操作时才需要开始和结束更新。

其次，`[tableView reloadData]`此时调用是多余的，因为表视图将使用分配的委托/数据源自动请求作为删除操作的一部分所需的信息。您可以将代码的最后一部分简化为：

> // 从表中删除记录
> 
> [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

可能是当前的行删除代码（结合更广泛的代码库）使系统感到困惑。

如果上述方法没有帮助，我们需要查看`records`修改数组的所有代码。在这种情况下，我将更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T07:45:23.727

就我而言，我有错别字：`indexPath`而是`newIndexPath`在`insertRowsAtIndexPaths`

```
 func controller(controller: NSFetchedResultsController, didChangeObject anObject: AnyObject, atIndexPath indexPath: NSIndexPath?, forChangeType type: NSFetchedResultsChangeType, newIndexPath: NSIndexPath?)
        {
            switch type
            {
            case .Insert:
                self.tableView.insertRowsAtIndexPaths([newIndexPath!], withRowAnimation: .Bottom)

            case .Delete:
                self.tableView.deleteRowsAtIndexPaths([indexPath!], withRowAnimation: .None)

            case .Update:
                self.tableView.reloadRowsAtIndexPaths([indexPath!], withRowAnimation: .Fade)

            case .Move:
                    self.tableView.deleteRowsAtIndexPaths([indexPath!], withRowAnimation: .None)
                    self.tableView.insertRowsAtIndexPaths([newIndexPath!], withRowAnimation: .Bottom)
                }
        } 
```

# android - 页面完成加载后如何滚动网页视图

> ID：14596204
> 
> 赞同：0
> 
> 时间：2013-01-30T03:30:03.343
> 
> 标签：android, android-layout, scroll, android-webview, runnable

这是我想要实现的：我组装了一个本地html页面，其中包含一些标签和互联网资源，然后使用WebView加载html页面网页，页面末尾有一个“查看更多”按钮，当有人单击该按钮，我将重新组装 html 页面（包含旧数据和新数据，例如刷新 twitter 以加载更多 twits）并让 WebView 再次加载它。但是当用户单击按钮时已经滚动到某个位置，所以我想让 WebView 滚动到用户单击按钮之前所在的位置。

这就是现在要做的事情，我创建了一个 WebViewClient 并实现：

```
public void onPageFinished(WebView view, String url) {
    view.scrollTo(last_X, last_Y);
} 
```

它没有像我预期的那样工作，我有两个问题，请大家帮帮我：1.这个回调函数不是一直有效。在大多数情况下，它可以工作，但有时，由于未知原因，它只是不起作用。2.即使有效，也不是我想要的。正如我提到的，html页面包含一些互联网资源，如

```
<a href='whateversite/whateverimage'><img src='whateversite/whateverimage'></img></a> 
```

所以 scrollTo 函数只有在所有图像都加载时才被调用，它需要太多时间而且没有必要，有没有办法在页面加载但在所有其他资源加载之前开始滚动？按说，只要 webview.getContentHeight() > 0，滚动就可以了。

为我糟糕的英语道歉，我将不得不用大量的词来试图让自己清楚。

小伙伴们请稍等~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:47:45.243

Do something like this :

```
view.post(new Runnable() {
    public void run() {
        view.scrollTo(last_X, last_Y);
    }
}); 
```

# python - 在 Python 中初始化全局对象

> ID：14596207
> 
> 赞同：1
> 
> 时间：2013-01-30T03:30:35.583
> 
> 标签：python, global-variables

总之，我的问题是如何轻松地将连接资源设为全局变量？具体来说，我想打开一个 Redis 队列连接，并希望在多个函数中使用它，而无需将其作为参数传递，即'

```
#===============================================================================
# Global variables
#===============================================================================
REDIS_QUEUE <- how to initialize 
```

然后，在我的主要功能中，有

```
# Open redis queue connection to server
REDIS_QUEUE = redis.StrictRedis(host=SERVER_IP, port=6379, db=0) 
```

然后`REDIS_QUEUE`在多个功能中使用，例如

```
def sendStatusMsgToServer(statusMsg):
    print "\nSending status message to server:"
    print simplejson.dumps(statusMsg)
    REDIS_QUEUE.rpush(TLA_DATA_CHANNEL, simplejson.dumps(statusMsg)) 
```

我以为`REDIS_QUEUE = none`会工作，但它给了我

```
AttributeError: 'NoneType' object has no attribute 'rpush' 
```

我是 Python 新手，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:37:22.273

如果要从函数内部设置全局变量的值，则需要使用`global`语句。所以在你的主要功能中：

```
def main():
    global REDIS_QUEUE
    REDIS_QUEUE = redis.StrictRedis(host=SERVER_IP, port=6379, db=0)
    # whatever else 
```

请注意，在执行此操作之前无需在外部“初始化”变量`main`，尽管您可能只想记录变量存在。

# c++ - 程序忽略输入

> ID：14596209
> 
> 赞同：2
> 
> 时间：2013-01-30T03:30:48.453
> 
> 标签：c++, input, interpreter, brainfuck

我正在尝试用C++编写一个简单的[笨蛋解释器。](http://en.wikipedia.org/wiki/Brainfuck)到目前为止它工作得很好，但它忽略了字符输入命令（'，'）。

口译员：

```
#include <iostream>
#include <fstream>
#include <windows.h>
using namespace std;

#define SIZE 30000

void parse(const char* code);

int main(int argc, char* argv[])
{
    ifstream file;
    string line;
    string buffer;
    string filename;

    cout << "Simple BrainFuck interpreter" << '\n';
    cout << "Enter the name of the file to open: ";
    cin >> filename;
    cin.ignore();

    file.open(filename.c_str());
    if(!file.is_open())
    {
        cout << "ERROR opening file " << filename << '\n';
        system("pause");
        return -1;
    }
    while (getline(file, line)) buffer += line;

    parse(buffer.c_str());

    system("pause");
    return 0;
}
void parse(const char* code)
{
    char array[SIZE];
    char* ptr = array;

    char c; 
    int loop = 0;
    unsigned int i = 0;
    while(i++ < strlen(code))
    {
        switch(code[i])
        {
            case '>':       ++ptr;  break;
            case '<':       --ptr;  break;
            case '+':       ++*ptr; break;
            case '-':       --*ptr; break;
            case '.':
                cout << *ptr;
                break;
            case ',':
                cin >> *ptr;
                break;
            case '[':
                if (*ptr == 0)
                {
                    loop = 1;
                    while (loop > 0)
                    {
                        c = code[++i];
                        if (c == '[') loop ++;
                        else if (c == ']') loop --;
                    }
                }
                break;
            case ']':
                loop = 1;
                while (loop > 0)
                {
                    c = code[--i];
                    if (c == '[') loop --;
                    else if (c == ']') loop ++;
                }
                i --;
                break;
        }
    }
    cout << '\n';
} 
```

打破一切的 UtraSimple 脑残代码：

```
,. 
```

有谁知道是什么导致它跳过输入字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T03:39:25.587

我会先看看这个：

```
unsigned int i = 0;
while(i++ < strlen(code))  // increments i NOW !
{
    switch(code[i])        // uses the incremented i. 
```

将在那里处理的第一个字符将是`code[1]`，*而不是* `code[0]`。

因此程序将`",."`首先处理（字符串结尾），因此不会处理输入命令。`.``\0``,`

如果您将代码更改如下，您可以看到这一点：

```
unsigned int i = 0;
while(i++ < strlen(code))
{
    cout << "DEBUG [" << i << ":" << (int)code[i] << ":" << code[i] << "]\n";
    switch(code[i]) 
```

你会看到：

```
DEBUG [1:46:.]
DEBUG [2:0: ] 
```

你需要推迟递增`i`，直到你完成它*。*

# hibernate - Hibernate 一对一注解异常

> ID：14596210
> 
> 赞同：0
> 
> 时间：2013-01-30T03:30:57.303
> 
> 标签：hibernate, annotations, one-to-one

我需要一些基本帮助来设置一对一的映射和查询。我知道这应该是整个互联网，但我找不到一个好的解释/例子

2 表：

place 和 place_info place 有一个名为 place_id 的主键 place_info 有一个名为 place_id 的外键，它引用 place 表中的 place_id

```
@Entity
@Table(name="place")
public class Place 
{
    @Id
    @Column(name="place_id", nullable=false)
    private int placeId;

    @Column(name="name", nullable=false)
    private String name;

    @Column(name="category", nullable=false)
    private String category;

    @Column(name="submit_date", nullable=false)
    private Date submitDate;

    @Column(name="user")
    private String user;

@Entity
@Table(name="place_info")
public class PlaceInfo 
{
    @Id
    @Column(name="place_info_id")
    private int placeInfoId;

    @Column(name="address")
    private String address;

    @Column(name="city")
    private String city;

    @Column(name="state")
    private String state;

    @Column(name="phone")
    private String phone;

    @Column(name="hours")
    private String hours;

    @Column(name="submit_date", nullable=false)
    private Date submitDate;

    @Column(name="user")
    private String user;

    @OneToOne
    @JoinColumn(name="place_id", referencedColumnName="place_id")
    private Place place;

public List<PlaceInfo> findPlaceInfo(Criteria criteria) {

        StringBuilder string = new StringBuilder("select pI, p.name from PlaceInfo pI");

        string.append(" inner join Place p p.placeId");
        if(criteria.getId()!=null)
            string.append(" where p.placeId = :id");

        Query query = getSessionFactory().getCurrentSession().createQuery(string.toString());

        if(criteria.getId()!=null)
            query.setParameter("id", criteria.getId());

        List<PlaceInfo> placeInfo = query.list();

        return placeInfo;
    }

Jan 29, 2013 10:23:03 PM org.hibernate.hql.internal.ast.ErrorCounter reportError
ERROR: line 1:87: unexpected token: p
Jan 29, 2013 10:23:03 PM org.hibernate.hql.internal.ast.ErrorCounter reportError
ERROR: line 1:87: unexpected token: p
line 1:87: unexpected token: p
at org.hibernate.hql.internal.antlr.HqlBaseParser.fromJoin(HqlBaseParser.java:1693)
at org.hibernate.hql.internal.antlr.HqlBaseParser.fromClause(HqlBaseParser.java:1348)
at org.hibernate.hql.internal.antlr.HqlBaseParser.selectFrom(HqlBaseParser.java:1054)
at org.hibernate.hql.internal.antlr.HqlBaseParser.queryRule(HqlBaseParser.java:700)
at org.hibernate.hql.internal.antlr.HqlBaseParser.selectStatement(HqlBaseParser.java:294)
at org.hibernate.hql.internal.antlr.HqlBaseParser.statement(HqlBaseParser.java:157)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:266)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:219)
at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:197)
at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1732)
at com.collegecellar.repository.search.impl.SearchQueryRepositoryImpl.findPlaceInfo(SearchQueryRepositoryImpl.java:73)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy14.findPlaceInfo(Unknown Source)
at com.collegecellar.service.search.impl.SearchQueryServiceImpl.findPlaceInfo(SearchQueryServiceImpl.java:33)
at com.collegecellar.managedbean.review.ReviewBean.findPlaceInfo(ReviewBean.java:50)
at com.collegecellar.managedbean.review.ReviewBean.getSelectedPlace(ReviewBean.java:58)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIData.getValue(UIData.java:730)
at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:729)
at org.primefaces.component.api.UIData.getDataModel(UIData.java:581)
at javax.faces.component.UIData.getRowCount(UIData.java:355)
at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:581)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:220)
at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:74)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Jan 29, 2013 10:23:03 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/reviews.xhtml]
javax.el.ELException: /reviews.xhtml @13,63 value="#{reviewBean.selectedPlace}": Error reading 'selectedPlace' on type com.collegecellar.managedbean.review.ReviewBean
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIData.getValue(UIData.java:730)
at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:729)
at org.primefaces.component.api.UIData.getDataModel(UIData.java:581)
at javax.faces.component.UIData.getRowCount(UIData.java:355)
at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:581)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:220)
at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:74)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: p near line 1, column 87 [select pI, p.name from com.collegecellar.domain.place.PlaceInfo pI inner join Place p p.placeId where p.placeId = :id]
at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
at org.hibernate.hql.internal.ast.ErrorCounter.throwQueryException(ErrorCounter.java:79)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:276)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:219)
at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:197)
at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1732)
at com.collegecellar.repository.search.impl.SearchQueryRepositoryImpl.findPlaceInfo(SearchQueryRepositoryImpl.java:73)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy14.findPlaceInfo(Unknown Source)
at com.collegecellar.service.search.impl.SearchQueryServiceImpl.findPlaceInfo(SearchQueryServiceImpl.java:33)
at com.collegecellar.managedbean.review.ReviewBean.findPlaceInfo(ReviewBean.java:50)
at com.collegecellar.managedbean.review.ReviewBean.getSelectedPlace(ReviewBean.java:58)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
... 39 more
Jan 29, 2013 10:23:04 PM org.hibernate.hql.internal.ast.ErrorCounter reportError
ERROR: line 1:87: unexpected token: p
Jan 29, 2013 10:23:04 PM org.hibernate.hql.internal.ast.ErrorCounter reportError
ERROR: line 1:87: unexpected token: p
line 1:87: unexpected token: p
at org.hibernate.hql.internal.antlr.HqlBaseParser.fromJoin(HqlBaseParser.java:1693)
at org.hibernate.hql.internal.antlr.HqlBaseParser.fromClause(HqlBaseParser.java:1348)
at org.hibernate.hql.internal.antlr.HqlBaseParser.selectFrom(HqlBaseParser.java:1054)
at org.hibernate.hql.internal.antlr.HqlBaseParser.queryRule(HqlBaseParser.java:700)
at org.hibernate.hql.internal.antlr.HqlBaseParser.selectStatement(HqlBaseParser.java:294)
at org.hibernate.hql.internal.antlr.HqlBaseParser.statement(HqlBaseParser.java:157)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:266)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:219)
at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:197)
at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1732)
at com.collegecellar.repository.search.impl.SearchQueryRepositoryImpl.findPlaceInfo(SearchQueryRepositoryImpl.java:73)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy14.findPlaceInfo(Unknown Source)
at com.collegecellar.service.search.impl.SearchQueryServiceImpl.findPlaceInfo(SearchQueryServiceImpl.java:33)
at com.collegecellar.managedbean.review.ReviewBean.findPlaceInfo(ReviewBean.java:50)
at com.collegecellar.managedbean.review.ReviewBean.getSelectedPlace(ReviewBean.java:58)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIData.getValue(UIData.java:730)
at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:729)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.faces.facelets.util.DevTools.writeAttributes(DevTools.java:375)
at com.sun.faces.facelets.util.DevTools.writeStart(DevTools.java:424)
at com.sun.faces.facelets.util.DevTools.writeComponent(DevTools.java:245)
at com.sun.faces.facelets.util.DevTools.writeComponent(DevTools.java:264)
at com.sun.faces.facelets.util.DevTools.writeComponent(DevTools.java:264)
at com.sun.faces.facelets.util.DevTools.writeComponent(DevTools.java:264)
at com.sun.faces.facelets.util.DevTools.debugHtml(DevTools.java:128)
at com.sun.faces.renderkit.RenderKitUtils.renderHtmlErrorPage(RenderKitUtils.java:1207)
at com.sun.faces.context.ExceptionHandlerImpl.throwIt(ExceptionHandlerImpl.java:269)
at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:139)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:03:43.417

此行引发错误：

```
string.append(" inner join Place p p.placeId"); 
```

正确的是

```
string.append(" inner join pI.place p"); 
```

您无需提及连接列的名称。它已经在注释中完成。然后对于内部联接，您不提供班级，而是提供成员名称。

不过，这不会生成 PlaceInfo 列表，因为您还选择了 p.name（这是多余的）。

正确的代码是

```
 StringBuilder string = new StringBuilder("from PlaceInfo pI");
    string.append(" inner join pI.place");
    if(criteria.getId()!=null)
        string.append(" where pI.place.placeId = :id"); 
```

当您需要该地点的名称时，您可以像这样引用它

```
placeInfo.get(i).place.name 
```

（在您的代码中，placeInfo 是 PlaceInfo 实例的列表，这令人困惑。您最好将其命名为 placeInfoList，并且仅将名称 placeInfo 用于 PlaceInfo 的单个实例。）

# c# - 建议为程序集提供完全指定的文本标识

> ID：14596211
> 
> 赞同：1
> 
> 时间：2013-01-30T03:30:58.857
> 
> 标签：c#, winforms

我想在运行时使用实例化一个类

```
_syncHelper = (ISyncHelper) Activator.CreateInstance("SBD.Syrius.Synchronisation", "SyncHelper");

A first chance exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.dll

System.IO.FileNotFoundException: Could not load file or assembly 

'SBD.Syrius.Synchronisation' or one of its dependencies. The system cannot find the file specified.

File name: 'SBD.Syrius.Synchronisation'
at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase,    
Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr   pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)

at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)

at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)

at System.Activator.CreateInstance(String assemblyString, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityInfo, StackCrawlMark& stackMark)
at System.Activator.CreateInstance(String assemblyName, String typeName)

at SBD.Syrius.DataLayer.DataHelper.get_SyncHelper() in e:\EShared\Syrius6\syrius_syrius\SBD.Syrius.DataLayer\DataHelper.cs:line 35

at SBD.Syrius.DataLayer.Context.SaveChanges() in e:\EShared\Syrius6\syrius_syrius\SBD.Syrius.DataLayer\Context.cs:line 99

at SBD.Syrius.UI.MDIHelper.AttemptToSave(Context Db) in  e:\EShared\Syrius6\syrius_syrius\SBD.Syrius.UI\MDIHelper.cs:line 51

=== Pre-bind state information ===
LOG: User = saturn\kirsten
LOG: DisplayName = SBD.Syrius.Synchronisation
(Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: SBD.Syrius.Synchronisation | Domain ID: 1
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information 
and common solutions to this issue.
LOG: Appbase = file:///E:/EShared/Syrius6/syrius_syrius/SBD.Syrius.UI/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : SBD.Syrius.DataLayer, Version=1.0.0.0, Culture=neutral,  
PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file:    
E:\EShared\Syrius6\syrius_syrius\SBD.Syrius.UI\bin\Debug\SBD.Syrius.UI.vshost.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from    
C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or    
location-based assembly bind).

LOG: Attempting download of new URL          file:///E:/EShared/Syrius6/syrius_syrius/SBD.Syrius.UI/bin/Debug/SBD.Syrius.Synchronisation.DLL.

LOG: Attempting download of new URL   file:///E:/EShared/Syrius6/syrius_syrius/SBD.Syrius.UI/bin/Debug/SBD.Syrius.Synchronisation/SBD.Syrius.Synchronisation.DLL.

LOG: Attempting download of new URL file:///E:/EShared/Syrius6/syrius_syrius/SBD.Syrius.UI/bin/Debug/SBD.Syrius.Synchronisation.EXE.

LOG: Attempting download of new URL file:///E:/EShared/Syrius6/syrius_syrius/SBD.Syrius.UI/bin/Debug/SBD.Syrius.Synchronisation/ SBD.Syrius.Synchronisation.EXE. 
```

我收到的错误包含指向 MSDN [here](http://msdn.microsoft.com/en-us/library/dd153782.aspx)的链接，但我找不到如何为程序集指定文本标识的示例。

我注意到完整的错误表明它正在寻找错误的文件夹以及带有大写 .DLL 的文件。我的文件是用小写的 .dll 创建的

是否有示例说明如何为程序集提供完全指定的文本标识？我应该尝试更改 .dll 扩展名的大小写吗？

如果我实际上将 .dll 复制到 UI\bin\debug 文件夹，那么我会得到一个不同的错误

```
A first chance exception of type 'System.TypeLoadException' occurred in mscorlib.dll
System.TypeLoadException: Could not load type 'SyncHelper' 
from assembly 
```

'SBD.Syrius.Synchronisation，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = null'。

```
 at System.Reflection.RuntimeAssembly.GetType(RuntimeAssembly assembly, String name,    
 Boolean throwOnError, Boolean ignoreCase, ObjectHandleOnStack type)

at System.Reflection.RuntimeAssembly.GetType(String name, Boolean throwOnError, Boolean ignoreCase)

 at System.Activator.CreateInstance(String assemblyString, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture,   Object[] activationAttributes, Evidence securityInfo, StackCrawlMark& stackMark)

at System.Activator.CreateInstance(String assemblyName, String typeName)
at SBD.Syrius.DataLayer.DataHelper.get_SyncHelper() in   

e:\EShared\Syrius6\syrius_syrius\SBD.Syrius.DataLayer\DataHelper.cs:line 35
at SBD.Syrius.DataLayer.Context.SaveChanges() in 

e:\EShared\Syrius6\syrius_syrius\SBD.Syrius.DataLayer\Context.cs:line 99

at SBD.Syrius.UI.MDIHelper.AttemptToSave(Context Db) in   
e:\EShared\Syrius6\syrius_syrius\SBD.Syrius.UI\MDIHelper.cs:line 51 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:15:31.717

发现三个错误：

1.  `Activator.CreateInstance`需要类型的完整名称来加载它，这意味着您必须将命名空间添加到类型名称。
    您可能在不同的命名空间中有多个具有该名称的类，那么它如何确定加载哪个类。

2.  您想创建一个不可能的接口实例。
    `ISyncHelper`是一个界面，你不能说：
    `var variable = new ISynchHelper()`

    这会导致编译错误，因为接口只是空的主体，不包含单行实现。
    因此，每当您使用反射做某事时，请小心，因为编译器无法帮助您，如果出现问题，您将在运行时而不是在编译时面对它。

3.  最后一个错误是由于 UI 中没有对 Synchronization 项目的引用，这意味着它不会复制到 UI 项目的 Bin 文件夹。

    您可以通过将同步项目添加到 UI 或只是将复制命令添加到同步项目以在构建后复制来做到这一点。

祝你好运 ：-）

# javascript - 将 DIV 缩小到包装到最大宽度的文本？

> ID：14596213
> 
> 赞同：25
> 
> 时间：2013-01-30T03:31:01.250
> 
> 标签：javascript, html, css

将 div 收缩到一些文本非常简单。但是，如果文本由于最大宽度（例如）而换行到第二行（或更多），则 DIV 的大小不会缩小到新换行的文本。它仍然扩展到断点（在本例中为 max-width 值），从而在 DIV 的右侧产生了相当多的边距。当想要将此 DIV 居中以使换行的文本居中时，这是有问题的。不会，因为 DIV 不会缩小为换行的多行文本。一种解决方案是使用两端对齐的文本，但这并不总是实用的，而且单词之间的间隔很大，结果可能很可怕。

我知道没有解决方案可以将 DIV 缩小为纯 CSS 中的包装文本。所以我的问题是，如何使用 Javascript 实现这一目标？

这个 jsfiddle 说明了它：[jsfiddle](http://jsfiddle.net/onlinespending/uS6cf/7/)。由于最大宽度，这两个单词几乎没有换行，但 DIV 并没有缩小到新换行的文本，留下了令人讨厌的右侧边距。我想消除这一点，并可能使用 Javascript 将 DIV 调整为包装文本（因为我不相信纯 CSS 中存在解决方案）。

```
.shrunken {text-align: left; display: inline-block; font-size: 24px; background-color: #ddd; max-width: 130px;}

<div class="shrunken">Shrink Shrink</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T06:27:00.780

这不是最漂亮的解决方案，但它应该可以解决问题。逻辑是计算每个单词的长度，并用它来计算在强制换行之前最长的行是多少；然后将该宽度应用于div。在这里小提琴：http: [//jsfiddle.net/uS6cf/50/](http://jsfiddle.net/uS6cf/50/)

示例 html...

```
<div class="wrapper">
    <div class="shrunken">testing testing</div>
</div>

<div class="wrapper">
    <div class="shrunken fixed">testing testing</div>
</div>

<div class="wrapper">
    <div class="shrunken">testing</div>
</div>

<div class="wrapper">
    <div class="shrunken fixed">testing</div>
</div>

<div class="wrapper">
    <div class="shrunken" >testing 123 testing </div>
</div>

<div class="wrapper">
    <div class="shrunken fixed" >testing 123 testing </div>
</div> 
```

还有 javacript（依赖于 jQuery）

```
$.fn.fixWidth = function () {
    $(this).each(function () {
        var el = $(this);
        // This function gets the length of some text
        // by adding a span to the container then getting it's length.
        var getLength = function (txt) {
            var span = new $("<span />");
            if (txt == ' ')
                span.html('&nbsp;');
            else
                span.text(txt);
            el.append(span);
            var len = span.width();
            span.remove();
            return len;
        };
        var words = el.text().split(' ');
        var lengthOfSpace = getLength(' ');
        var lengthOfLine = 0;
        var maxElementWidth = el.width();
        var maxLineLengthSoFar = 0;
        for (var i = 0; i < words.length; i++) {
            // Duplicate spaces will create empty entries.
            if (words[i] == '')
                continue;
            // Get the length of the current word
            var curWord = getLength(words[i]);
            // Determine if adding this word to the current line will make it break
            if ((lengthOfLine + (i == 0 ? 0 : lengthOfSpace) + curWord) > maxElementWidth) {
                // If it will, see if the line we've built is the longest so far
                if (lengthOfLine > maxLineLengthSoFar) {
                    maxLineLengthSoFar = lengthOfLine;
                    lengthOfLine = 0;
                }
            }
            else // No break yet, keep building the line
                lengthOfLine += (i == 0 ? 0 : lengthOfSpace) + curWord;
        }
        // If there are no line breaks maxLineLengthSoFar will be 0 still. 
        // In this case we don't actually need to set the width as the container 
        // will already be as small as possible.
        if (maxLineLengthSoFar != 0)
            el.css({ width: maxLineLengthSoFar + "px" });
    });
};

$(function () {
    $(".fixed").fixWidth();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-14T14:52:36.157

我有点晚了，但我认为这段 CSS 代码对其他有同样问题的用户很有用：

```
div {
  width: -moz-min-content;
  width: -webkit-min-content;
  width: min-content;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T03:49:36.440

我想这就是你正在考虑的，它可以在 css 中完成：

```
div {
    border: black solid thin;
    max-width: 100px;
    overflow: auto;
} 
```

你可以在这里看到它：http: [//jsfiddle.net/5epS4/](http://jsfiddle.net/5epS4/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-04-12T12:20:08.037

试试这个： [https ://jsfiddle.net/9snc5gfx/1/](https://jsfiddle.net/9snc5gfx/1/)

```
.shrunken {
   width: min-content;
   word-break: normal;
} 
```

# objective-c - 错误：使用 GNUStep 找不到“NSAttributedString”的接口声明

> ID：14596216
> 
> 赞同：1
> 
> 时间：2013-01-30T03:31:17.283
> 
> 标签：objective-c, gnustep

我一直在搞乱 GNUStep，我有一个简单的 main.m，它编译得很好。我想看看objective-c库（用于ios/mac）是否与GNUStep一起工作，所以我下载了JSONKit并试图编译它，但我一直收到这个错误：

```
mark@Emperor:~/objc-test2$ make
This is gnustep-make 2.6.2\. Type 'make print-gnustep-make-help' for help.
Making all for tool Test...
Compiling file JSONKit.m ...
In file included from JSONKit.m:110:0:
JSONKit.h:63:21: warning: "/*" within comment [-Wcomment]
In file included from /usr/include/GNUstep/Foundation/NSAttributedString.h:143:0,
             from /usr/include/GNUstep/Foundation/Foundation.h:42,
             from JSONKit.h:72,
             from JSONKit.m:110:
/usr/include/GNUstep/GNUstepBase/NSAttributedString+GNUstepBase.h:44:1: error: cannot find interface declaration for ‘NSAttributedString’
make[3]: *** [obj/Test.obj/JSONKit.m.o] Error 1
make[2]: *** [internal-tool-all_] Error 2
make[1]: *** [Test.all.tool.variables] Error 2
make: *** [internal-all] Error 2
mark@Emperor:~/objc-test2$ 
```

我的 main.m 是这样的：

```
mark@Emperor:~/objc-test2$ cat main.m
#import <stdio.h>
#include <Foundation/Foundation.h>
#import "Fraction.h"
#import "JSONKit.h"
    int main( int argc, const char *argv[] ) {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        // create a new instance
        Fraction *frac = [[Fraction alloc] init];

        // set the values
        [frac setNumerator: 1];
        [frac setDenominator: 3];

        // print it
        NSLog(@ "The fraction is: %@", [frac print]);

        // free memory
        [frac release];

        NSMutableArray *testArr = [[NSMutableArray alloc] initWithCapacity:0];
        [testArr addObject:[NSNumber numberWithInt:2]];
        [testArr addObject:@"Hey"];
        NSLog([testArr JSONString]);

        [pool drain];
        return 0;

    }
mark@Emperor:~/objc-test2$ 
```

我已经四处搜索，并确保我设置了 GNUStep 环境变量，并且我正在使用一个 make 文件（取自在线示例）

```
mark@Emperor:~/objc-test2$ cat GNUmakefile
include $(GNUSTEP_MAKEFILES)/common.make

TOOL_NAME  = Test
Test_OBJC_FILES = main.m Fraction.m JSONKit.m
Test_CPPFLAGS = $(RUNTIME_DEFINE)
# Include in the rules for making Objective-C programs
include $(GNUSTEP_MAKEFILES)/tool.make
mark@Emperor:~/objc-test2$ 
```

我真的不明白这一点，因为 /Foundation/NSAttributedString.h 清楚地包含 NSAttributedString 和 NSAttributedString+GNUStepBase.h 的接口声明，所以知道出了什么问题吗？

# javascript - 延迟后续的 ajax 调用，直到第一个 ajax 调用完成

> ID：14596221
> 
> 赞同：1
> 
> 时间：2013-01-30T03:32:23.350
> 
> 标签：javascript, jquery

我在 javascript 事件的时间安排上遇到了一些问题。我遇到的问题是代码的一部分似乎在另一部分代码完成之前正在执行。我需要确保第一个代码在后一个代码开始之前完成。这是初始代码：

```
function(){     
    myLoop();  //this needs to complete before the call to myMethod below 
    $.ajax({
    url: sURL + "myController/myMethod",
    success: function() {       
    $.msg("My Success Message",{live:10000});
    error: function(){
    $.msg("My Error Message",{live:10000});
});
} 
```

这是循环并将记录插入数据库的代码：

```
function myLoop(){
$('input[name=c_maybe].c_box').each(function(){
if( $(this).prop('checked') ){ 
    var rn = $(this).prop('value'); 
    $.ajax({
        url: sURL + 'myController/myInsert',
        type:"POST",
        dataType: 'text',
        data: {'rn': rn},
        success: function(data) {
            //not sure what to do on success.
        }
    });
} 
}); 
} 
```

似乎正在发生的问题`myController\myMethod`是在`myLoop`完成将所有记录插入数据库之前发生调用。

有人可以为我建议一种重新设计此代码的方法，以便我可以确保在完全完成`myController\myMethod`之前不会调用它？`myLoop`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:39:14.477

您可以使用已添加到 jQuery 的 $.when 函数。

它是这样的：

```
 $.when(ajaxFunction1(), ajaxFunction1()).done(function(response1, response2){
    // when the function calls are done this code here will be executed -> the response will be passed as parameters corresponding to the functions -> response1, response2
   }); 
```

或者您可以尝试在 ajax 函数中使用“beforeSend”：

```
$.ajax({
   beforeSend: function(){    
     alert("doing stuff before the ajax call ...");    
   },
   success: function(){    
    alert("Whoa!");    
   }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T03:40:26.147

```
function myLoop() {
   var jqxhrs = [];
   if( $(this).prop('checked') ){ 
       var rn = $(this).prop('value'); 
       jqxhrs.push($.ajax({...
   }
   return jqxhrs;
}

function () {
   $.when.apply(undefined, myLoop()).done(function () {
      $.ajax({
         url: sURL + "myController/myMethod",
         ...
   });
} 
```

`$.when.apply`用于调用`$.when`ajax 请求数组，因此`.done`在它们*全部*完成之前不会被调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T03:47:31.103

您可以使 ajax 调用同步。这样，执行将被阻止，直到 ajax 调用返回：

```
$.ajax({
    url: sURL + 'myController/myInsert',
    type:"POST",
    dataType: 'text',
    data: {'rn': rn},
    async: false,
    success: function(data) {
        //not sure what to do on success.
    }
}); 
```

# android - ActivityNotFoundException：未找到处理 Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/testdata5.pdf 的活动

> ID：14596227
> 
> 赞同：2
> 
> 时间：2013-01-30T03:33:10.953
> 
> 标签：android, android-intent, android-activity

我需要显示 SD 卡中的 pdf 文件。此 pdf 文件是在网络操作后创建的。我`ActivityNotFoundException`在尝试通过`activity.startActivity(intent);`. 下面是代码 **folder_list_details.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
 <ListView 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" android:id="@+id/listV_main"/>
<ImageView 
    android:id="@+id/photo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingRight="15dp"
    android:paddingTop="10dp" />
        <TextView android:id="@+id/name"
    android:textSize="14sp" 
    android:textStyle="bold" 
    android:textColor="#000000" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/photo"/>

      </RelativeLayout> 
```

**文件夹活动.java**

```
 public class FolderListActivity extends ListActivity{

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("FolderListActivity", "onCreate" );
    FolderDisplay folderObj = new FolderDisplay(FolderListActivity.this);
    folderObj.execute((Void) null);
     }
    } 
```

**文件夹显示.java**：

```
 @Override
       protected void onPostExecute(Void v) {
    try{
                //activity is an  instance of FolderListActivity
        final ListView lv1 =activity.getListView(); 
        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
      public void onItemClick(AdapterView<?> arg0, View v, int position,long id) {                           
            File file =Utility.getInstance().getFile();
                Intent intent = new Intent(Intent.ACTION_VIEW);
                 intent.setDataAndType(Uri.fromFile(file), "application/pdf");
                 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                  activity.startActivity(intent);
            }  
        });
    }catch(Exception e){
        }
 } 
```

**Mainfest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
             <manifest xmlns:android="http://schemas.android.com/apk/res/android"
           package="com.example.testlogin"
           android:versionCode="1"
             android:versionName="1.0" >

      <uses-sdk
       android:minSdkVersion="11"
     android:targetSdkVersion="17" />
       <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE">
       </uses-  permission>

      <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:debuggable="true"
    >
    <activity
        android:name="com.example.testlogin.LoginActivity"
        android:label="@string/app_name"
        android:windowSoftInputMode="adjustResize|stateVisible" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
      </activity>
        <activity
        android:name="com.example.testlogin.RepoListActivity"
        android:label="@string/title_activity_repo_list" >
       </activity>
       <activity
        android:name="com.example.testlogin.FolderListActivity"
        android:label="@string/title_activity_folder_list" >
      </activity>
     </application>

     </manifest> 
```

**我得到的**错误****

 **```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/Alfdata/testdata5.pdf typ=application/pdf flg=0x4000000 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:34:40.073

这是因为您的设备或模拟器没有能够查看本地 PDF 文件的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:37:44.347

每当您启动一个意图时，您都必须在模拟器上安装本机应用程序来处理该意图。前任。如果您使用 Maps 作为操作调用意图，则必须使用基于 Google API 的模拟器。默认情况下，android 模拟器没有 PDF 阅读器。您可以在带有 PDF 阅读器的设备上进行测试，它应该可以正常工作。

如果您认为您的问题已经解决，请将答案标记为正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:21:32.713

我显然遇到了同样的问题，Android 没有库存 PDF 查看器，但作为替代方案，如果您将 pdf 放在云端，那么您可以在 webView 中打开它，这会打开指向您的 pdf url 的 google docs 链接。

[在这里](https://stackoverflow.com/questions/4468621/android-load-pdf-pdf-viewer)看这篇文章**

# c# - 删除 div 标签之间的所有文本（包括标签）

> ID：14596228
> 
> 赞同：0
> 
> 时间：2013-01-30T03:33:18.887
> 
> 标签：c#, .net, asp.net-mvc-4

我正在寻找最好的方法来删除 2 个 div 标签之间的所有文本，包括标签本身。

例如：

```
<body>
<div id="spacer"> This is a title </div>
</body> 
```

变成：

```
<body>
</body> 
```

编辑：这需要发生在服务器端（C#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:46:51.717

您可以使用此库：[http](http://htmlagilitypack.codeplex.com/) ://htmlagilitypack.codeplex.com/在服务器端进行操作，以下是您的案例示例：

```
var doc = new HtmlDocument();
doc.LoadHtml("<body><div id=\"spacer\"> This is a title </div></body>");
doc.GetElementbyId("spacer").Remove();

var stream = new StringWriter();
doc.Save(stream);

var result = stream.ToString(); 
```

**编辑：**

您还可以使用 xpath 选择所需的任何节点：

```
var nodes = doc.DocumentNode.SelectNodes("body/div");
nodes.ToList().ForEach(node => node.Remove()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:54:48.363

不确定您要实现什么，但在您的情况下隐藏或删除细节的最佳方法是 JQuery/Javascript，因为您不是指服务器端控制。

如果您只是解析字符串：-

1）解析并找到第一次出现/最后一次出现并修剪两者之间的东西。

2）XML解析将是另一种方式，我猜是一种更好的方式，因为您可以遍历整个xml以以更好的方式进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:12:33.267

您可以使用正则表达式去除 html 标签和文本。您会在 google 中找到几个示例。

# java - FindViewById 在类类型服务中？

> ID：14596230
> 
> 赞同：0
> 
> 时间：2013-01-30T03:33:31.023
> 
> 标签：java, android

我正在使用 android sdk 提供的示例媒体播放器。MainActivity 使用 启动 Service MusicService `startService(new Intent(MusicService.ACTION_PLAY))`。

我需要在服务中按 ID 查找视图，但我不知道该怎么做：

```
 findViewById(R.id.playbutton).setVisibility(View.GONE); 
```

我发现了一些类似的问题，但没有一个提供简单的解决方案（最相似的问题接受的答案实际上是“不，你不能”，我相信这是可能的）。我怎样才能使这条线在服务中工作？我是否必须将上下文从 MainActivity 传递给它，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:55:23.073

> 由于该服务处理媒体播放，因此应在播放/暂停之前直接更新界面，这就是我需要从中更新 ui 的原因

你不可以。您需要让 UI 知道状态变化（如果存在）。UI 将影响它自己认为合适的更改。可能根本没有任何 UI，这取决于用户所做的事情。

为了让任何受影响的 UI 部分了解状态更改，您可以：

*   发送常规广播`Intent`，或
*   用于`LocalBroadcastManager`发送“窄播” `Intent`（很像广播，但它完全在您的流程中），或者
*   使用[Otto](http://square.github.com/otto/)作为事件总线

# ajax - 如何在 AppHarbor 上接受 CORS AJAX 请求？

> ID：14596231
> 
> 赞同：2
> 
> 时间：2013-01-30T03:33:40.603
> 
> 标签：ajax, nginx, cors, appharbor

我正在使用 Thinktecture.IdentityModel nuget 包为 MVC Web 应用程序中的 WebAPI 控制器启用 CORS。目前，我只担心 POST，但让我知道其他动词的任何问题。这在通过 IIS Express 服务器运行时有效。

在处理 AppHarbor 部署时，它不起作用。nginx 似乎没有将 OPTIONS 请求传递给我的代码。还需要什么才能让它在 AppHarbor 上运行？

### 要求

> 选项 $path HTTP/1.1
> Host: $servername Connection: keep-alive
> Access-Control-Request-Method: POST
> Origin: [http://www.local](http://www.local)
> User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 （KHTML，如 Gecko）Chrome/24.0.1312.56 Safari/537.17
> Access-Control-Request-Headers：accept，origin，content-type
> Accept：*/*
> Referer：[http://www.local/wordpress/2013/01/request- url-test/](http://www.local/wordpress/2013/01/request-url-test/)
> Accept-Encoding: gzip,deflate,sdch
> Accept-Language: en-GB,en;q=0.8,en-US;q=0.6
> Accept-Charset: ISO-8859-1,utf-8;q= 0.7,*;q=0.3

### 回复

> HTTP/1.1 200 OK
> 服务器：nginx
> 日期：2013 年 1 月 30 日星期三 02:34:14 GMT
> 内容长度：0
> 连接：保持活动
> 允许：OPTIONS、TRACE、GET、HEAD、POST
> 公开：OPTIONS、TRACE、GET、负责人，职位

我的 web.config 设置了以下默认处理程序：

```
<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

## WebDAV 是罪魁祸首吗？

在 Jeffery To 的建议下，我[按照这些说明](http://brockallen.com/2012/10/18/cors-iis-and-webdav/)禁用了 WebDAV 。甚至不知道 AH 上安装了 WebDAV，但这样做确实改变了我的结果。

### 相关的 Web.config 部分

```
<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <remove name="WebDAV" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers>
<modules runAllManagedModulesForAllRequests="true">
  <remove name="WebDAVModule"/>
  <remove name="AspNetAppHarborIntegration" />
  <add name="AspNetAppHarborIntegration" type="Premotion.AspNet.AppHarbor.Integration.AppHarborModule, Premotion.AspNet.AppHarbor.Integration" />
</modules> 
```

### 要求

> 选项 $path HTTP/1.1
> Host: $servername
> Connection: keep-alive
> Access-Control-Request-Method: POST
> Origin: [http://www.local](http://www.local)
> User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 （KHTML，如 Gecko）Chrome/24.0.1312.57 Safari/537.17
> Access-Control-Request-Headers：accept，origin，content-type
> Accept：*/*
> Referer：[http://www.local/wordpress/2013/01/request- url-test/](http://www.local/wordpress/2013/01/request-url-test/)
> Accept-Encoding: gzip,deflate,sdch
> Accept-Language: en-GB,en;q=0.8,en-US;q=0.6
> Accept-Charset: ISO-8859-1,utf-8;q= 0.7,*;q=0.3

### 回复

> HTTP/1.1 405 方法不允许
> 服务器：nginx
> 日期：星期一，2013 年 2 月 4 日 17:09:19 GMT
> 内容类型：应用程序/json；charset=utf-8
> Content-Length: 76
> Connection: keep-alive
> Cache-Control: no-cache
> Pragma: no-cache
> Expires: -1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:50:52.577

WebDAV 应归咎于在响应中未获取完整 CORS 标头的最初问题。405 错误是我的应用程序配置中的某个问题。

在深入研究内部之后，似乎与 WebAPI 一起使用的 CORSMessageHandler（由 Thinktecture 提供）没有正确识别预检请求，并且这些请求被路由到 WebAPI 对象本身。

我通过移动到[IIS 模块](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)而不是 WebAPI 模块来解决这个问题。这可能会使未来的生活更加困难，但至少它是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:12:07.727

我可能在这里遗漏了一些东西，但根据您包含的示例响应，该方法似乎`OPTIONS`实际上已发送到您的应用程序 -响应中包含`Allow`和`Public`标头。

# angularjs - AngularJS ng-click 未使用 {{$index}} 调用

> ID：14596235
> 
> 赞同：11
> 
> 时间：2013-01-30T03:34:02.307
> 
> 标签：angularjs, angularjs-directive

出于某种原因，当在 ng-click 中使用 {{$index}} 时，AngularJS 不会触发该事件。

**我的html：**

```
<div ng-controller="Ctrl">
  <ul>
    <li ng-repeat="foo in foos">
     <label>{{foo.name}}</label>
     <a href="#" ng-click="remove({{$index}})">X (doesnt work)</a>
     <a href="#" ng-click="remove(0)">Remove first element (works)</a>
    </li>
  </ul>
 </div> 
```

**jsfiddle：http:** [//jsfiddle.net/Lcasg/3/](http://jsfiddle.net/Lcasg/3/)

任何人都知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T03:48:31.933

ng-click 属性的值被评估为角度表达式，因此只需使用`remove($index)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-27T20:06:39.183

解决了！

```
<div ng-repeat="idiomax in textos.idiomas ">
    <div class="idioma"  ng-click="cambiaridioma($index)" ng-class="idioma != $index || 'idioma-activo'" > 
    {{idiomax.idioma}}
    </div>
</div> 
```

* * *

```
$scope.cambiaridioma = function (indice) {
        $scope.idioma = indice;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-29T05:26:05.343

我必须`$index`在字符串表达式中使用，这就是它的工作方式：

**HTML**

```
<button ng-click="showUserStories($event, '#modal-id-prefix-' + $index)">Show Modal</button> 
```

**脚本**

```
$scope.showUserStories = function(event, modalId) {
        $(modalId).modal("show");
        event.stopPropagation();
    } 
```

# c++ - 四舍五入到小数点后两位

> ID：14596236
> 
> 赞同：8
> 
> 时间：2013-01-30T03:34:07.397
> 
> 标签：c++, double, decimal

我使用以下方法将我的值四舍五入到小数点后 2 位：

```
 x = floor(num*100+0.5)/100; 
```

这似乎工作正常；除了像“16.60”这样的值，即“16.6”。

我想像“16.60”一样输出这个值。

我输出值的方式如下：

```
cout setw(12) << round(payment); 
```

我尝试了以下方法：

```
cout setw(12) << setprecision(2) << round(payment); 
```

但这给了我这样的答案

```
1.2e+02 
```

如何正确输出值？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T03:37:19.497

这是因为`std::setprecision`如果您不将浮点格式更改为使用小数点后的固定位数，则不会设置小数点后的数字而是有效数字。要更改格式，您必须将[std::fixed](http://en.cppreference.com/w/cpp/io/manip/fixed)放入输出流中：

```
double a = 16.6;
std::cout << std::fixed << std::setprecision(2) << a << std::endl; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T03:36:36.757

您可以使用 printf / sprintf 或其他类似功能。以下代码将浮点值格式化为小数点后两位。有关更多格式信息，请参阅 printf 手册

```
float f = 1.234567
printf("%.2f\n", f); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-26T03:02:18.603

来自 Trevor Boyd Smith 的评论：

> 如果您对 printf 和朋友过敏，`#include <boost/format.hpp>`那么您可以使用类型安全的 C++ 版本来执行以下操作：

```
float f = 1.234567;
cout << boost::format("%.2f") % f << endl; 
```

# php - MySQL 计数结果

> ID：14596238
> 
> 赞同：0
> 
> 时间：2013-01-30T03:34:21.900
> 
> 标签：php, mysql

我有一张这样设计的桌子：

```
tbl_User
id
Name

tbl_User_Payment
id
user_id
amount
status

tbl_User
id      Name
001     John Doe
002     Juan Dela Cruz

tbl_User_Payment
id        user_id      amount        status
001         001          10         Successful
002         002          10         Fail
003         001          10         Fail
004         001          10         Fail
005         001          10         Fail
006         002          10         Successful
007         002          10         Fail
008         002          10         Fail 
```

这里的问题是，如何计算支付成功后支付失败的次数。所以这里的结果应该是这样的：

```
John Doe - 3 Failed Payment
Juan Dela Cruz - 2 Failed Payment 
```

我希望你明白我在这里想要完成什么。

您的帮助将不胜感激和奖励！

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:48:31.070

为了简洁明了，我将在我的代码中给一些东西起别名。

```
SELECT
    Users.UserName,
    FailCount
FROM
    (
    SELECT
        UserId,
        COUNT(*) As FailCount
    FROM
        Payments,
        (
        SELECT
            UserId,
            MAX( PaymentId ) As LastSuccessId
        FROM
            Payments
        WHERE
            Status = Successful
        GROUP BY
            UserId
        ) AS LastSuccess
    WHERE
        PaymentId > LastSuccessId
    GROUP BY
        UserId
    ) As FailCount
    INNER JOIN Users ON Users.UserId = FailCount.UserId
ORDER BY
    UserName DESC 
```

我有点生疏了，我没有测试过这个 SQL，但如果它不起作用，我怀疑是因为我的 " `FROM Payments, <subquery>`" 语法。我无法验证我的解决方案，因此如果它不起作用，您可能需要招募人员来帮助您。

如果你想知道，这是我的逻辑：

1.  我的代码假设 PaymentIds 按时间顺序递增。
2.  执行查询以获取每个用户（最里面的`SELECT`）最后一次成功付款的 ID。
3.  重新查询 Payments 表以获取`COUNT`每个用户的行数，这些行位于最内层检索到的“最后一次成功的付款 ID”值之后`SELECT`。
4.  `JOIN`步骤 3 的结果与用户表一起获取用户名。

另外，关于未来数据库设计的一些提示：没有必要在数据库设计中使用匈牙利符号——每次看到“tbl_”前缀时我都会畏缩。我还建议不要将主键字段简单地命名为“id”，因为这会使 JOIN 变得更加困难，因为您需要消除它们的歧义。考虑在它们前面加上表的名称（例如“ `payments.id`”变成“ `Payments.PaymentId`”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:51:25.967

尝试使用 count 函数和 group by 语句

例如：

```
select Name, count(Status), Status from tbl_User as tu, tbl_User_Payment as tup where tup.user_id = tu.id group by status 
```

检查一下，让我知道这是否有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T03:55:05.273

试试这个查询

```
SELECT
      `user_id`,
      COUNT(id) AS "Total",
      SUM(CASE WHEN status= 'Fail' THEN 1 ELSE 0 END) AS "Failed",
      SUM(CASE WHEN status= 'Successful' THEN 1 ELSE 0 END) AS "Successful"
FROM `tbl_User_Payment`
GROUP BY `user_id`; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T04:13:51.680

PHP 版本。这可以进行优化，使其不会遍历表`user`中的每个 / 行`tbl_User`，但它可以完成工作。

```
<?php

$mysqli = new mysqli('localhost', 'root', DB_PASSWORD, DB_NAME);

if ($mysqli->connect_error)
  die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);

$result = $mysqli->query("SELECT * FROM `tbl_User_Payment` WHERE `status` = 'Fail'"))
$array = [];
while ($col = $result->fetch_array(MYSQLI_ASSOC)) {
  if (array_key_exists($col['user_id'], $array))
    $array[$col['user_id']] = $array[$col['user_id']]+1;
  else
    $array[$col['user_id']] = 1;
}
$result->close();
$mysqli->close();

$mysqli = new mysqli('localhost', 'root', DB_PASSWORD, DB_NAME);

if ($mysqli->connect_error)
  die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);

$result = $mysqli->query("SELECT * FROM `tbl_User` WHERE 1"))
while ($col = $result->fetch_array(MYSQLI_ASSOC)) {
  if (array_key_exists($col['id'], $array))
    echo $col['Name'] . ' - ' . $array[$col['id']] . ' Failed attempts <br />';
}
$result->close();
$mysqli->close();

?> 
```

# ruby-on-rails - Rails 模型上的静态查找

> ID：14596241
> 
> 赞同：1
> 
> 时间：2013-01-30T03:35:05.153
> 
> 标签：ruby-on-rails, ruby, model

我试图找出在我的 rails 应用程序中为简单查找建模的最佳方法。

我有一个模型，优惠券，它可以是两种“类型”，百分比或固定金额。我不想围绕“类型”查找构建数据库表，所以我想做的只是在 Coupon 表上有一个 coupon_type(integer) 字段，它可以是 1（代表百分比）或 2（固定）。

处理这个问题的最佳方法是什么？

我发现了这个：[Ruby on Rails Static List Options for Drop Down Box](https://stackoverflow.com/questions/5073296/ruby-on-rails-static-list-options-for-drop-down-box)，但不确定当我希望每个值都有两个字段（ID 和 Description）时它是如何工作的。

我也希望它能够填充一个选择列表。

感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:02:39.463

如果这真的不太可能改变，或者如果它确实改变了，这将是一个足以需要重新部署的事件，最简单的方法是使用一个定义条件的常量：

```
COUPON_TYPES = {
  :percent => 1,
  :fixed => 2
}

COUPON_TYPES_FOR_SELECT = COUPON_TYPES.to_a 
```

第一个常量定义了一个前向映射，第二个常量的格式适合`options_for_select`.

重要的是要注意，这种事情最多需要一毫秒才能从数据库中读取。除非您每秒渲染数百个表单，否则它几乎不会影响性能。

不要担心优化那些不明显的问题。

# java - 通过数据库表名获取实体类

> ID：14596242
> 
> 赞同：2
> 
> 时间：2013-01-30T03:35:08.787
> 
> 标签：java, jpa

是否可以从表名称中获取实体类名称？我正在使用 JPA。

我有表名。我能够获得表的主键。现在我想从表中检索一个元组。我需要实体对象形式或字符串数​​组形式的元组。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-19T10:06:24.603

从 Java Persistence 2.0 开始，您可以使用它[`Metamodel`](http://docs.oracle.com/javaee/7/api/javax/persistence/metamodel/Metamodel.html)来执行此操作：

```
public Class<?> getTypeForTableName(String tableName) {
  for (EntityType<?> entityType : getEntityManager().getMetamodel().getEntities()) {
    if (entityType.getJavaType().getAnnotation(Table.class).name().equals(tableName)) {
      return entityType.getJavaType();
    }
  }
  return null;
} 
```

# mysql - SQL - where 子句只匹配一个条件

> ID：14596245
> 
> 赞同：1
> 
> 时间：2013-01-30T03:35:43.107
> 
> 标签：mysql, sql, select

我需要帮助编写查询。使用此模式作为示例：

```
Table: A
id 1
id 2

Table: ALocalized
A_id 1, culture 1, name 'EN translation'
A_id 1, culture 2, name 'PT translation'
A_id 2, culture 1, name 'EN translation' 
```

这是我用来本地化信息的架构。**A**上的每条记录在**ALocalized**上至少有一个相关记录，但可能有一些行没有针对某些文化的本地化记录。

在此示例中，我想查询**A**并按区域性 2 过滤**ALocalized**。如果区域性 2 不存在，则返回任何其他可用的。结果应该是：

```
A_id 1, culture 2, name 'PT translation'
A_id 2, culture 1, name 'EN translation' 
```

我尝试使用子查询来连接两个表，但我认为我的问题出在**where**子句中。

```
where (ALocalized.culture = @cultureparameter OR ALocalized.culture = 1 OR ALocalized.culture = 2) limit 1 
```

当 @cultureparameter 为 2 时返回文化 1。它不尊重 where 子句的顺序

我该怎么做？我试图避免使用循环来检查每个**A**记录是否存在**ALocalized**。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:47:36.740

```
SELECT  a.*,
        COALESCE(b.culture, c.culture) Culture,
        COALESCE(b.Name, c.Name) Name
FROM    tableA a
        LEFT JOIN   tableB b
            ON a.id = b.a_id AND
                b.culture = 2
        LEFT JOIN   tableB c
            ON a.id = c.a_id AND
                c.culture = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/bd407/3)

# python - 我需要帮助来理解使用 Python 的 return 语句及其在此递归语句中的作用

> ID：14596250
> 
> 赞同：0
> 
> 时间：2013-01-30T03:35:59.210
> 
> 标签：python, recursion, printing, return

不，这不是家庭作业，但它在我们的测试学习指南中。我需要了解 return 语句所扮演的角色以及递归所扮演的角色。我不明白为什么函数在 x = 1 后不会中断。

```
def thisFunc(x):
    print(x)
    if x>1:
         result=thisFunc(x-1)
         print(result)
    return x+1 
```

抱歉，我知道这是多么初级，但我真的可以使用一些帮助。可能是为什么我在任何地方都找不到解释……因为它太简单了。

编辑：为什么它会打印出它的作用以及最后的 x 值是什么以及为什么？对不起，如果我问了很多，我只是很沮丧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:19:23.960

当您输入带有值的函数时，`n>1`它会打印当前值，然后使用`n-1`. 当内部函数返回时，它返回的值`n - 1 + 1`就是`n`. 因此，该函数`n`两次打印出该值，一次在内部递归之前，一次在之后。

如果`n == 1`，这是基本情况，该函数只打印`1`一次并且不会再次调用它自己（因此不会`result`返回打印）。相反，它只是返回，因此为什么`1`只打印一次。

把它想象成洋葱。

调用`thisFunc(n)`将导致

```
n
# what ever the output (via print) of thisFunc(n-1) is
n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:53:53.813

*我不明白为什么函数在 x = 1 后不会中断。*

但它确实：

```
>>> ================================ RESTART ================================
>>> x = 1
>>> def thisFunc(x):
    print("Function called on x-value: ", x)
    if x > 1:
        result = thisFunc(x-1)
        print(result)
    return x+1

>>> thisFunc(x)
Function called on x-value:  1
2
>>> 
```

*编辑：为什么它会打印出它的作用以及最后的 x 值是什么以及为什么？* 好吧，它会打印出来，因为你告诉它。尝试在执行函数时遵循 x 的值（“x 是一，一不*大于*1；返回 1+1。好的。[新案例] x 是二，二大于 1...”和很快）。

`return`并且`recursion`是编程的一部分；return 语句指定函数的结尾（即使您可能还有几行代码），它们还将数据传回给他们要求的任何东西。在您的情况下，您要问“根据这些规则，当 x 为 1 时会发生什么？”；返回的数据就是你的答案。

如果（您）需要，递归只是让函数调用自身的问题。您只需告诉程序“嘿，只要 x 大于 1，就调用这个函数 [恰好是最初调用的同一个函数] 并让它做它的事情”。为了更好地理解您的函数，我建议您将该行添加`"Function called on x-value: "`到函数内的第一个`print`语句中，或者至少可以让您识别哪个打印行是`x`哪个是`result`.

对于递归更深入的解释，我推荐[使用洪水填充算法和僵尸和猫来解释递归](http://inventwithpython.com/blog/2011/08/11/recursion-explained-with-the-flood-fill-algorithm-and-zombies-and-cats/)

# c++ - 具有外部实例创建的 ObjectPool

> ID：14596254
> 
> 赞同：0
> 
> 时间：2013-01-30T03:36:25.073
> 
> 标签：c++, templates, object

我尝试修改现有的对象池类，以便能够将实例创建者类作为参数传递给对象池。基本上，我希望能够将实际的对象构造排除在内存池之外，这样我就可以更自由地创建要池化的实例。

这是对象池定义：

```
template < 
    typename T, 
    typename InstanceCreator = DefaultInstanceFactory<T>
>
class ObjectPool : private noncopyable {
...
} 
```

所以我会像这样创建一个 ObjectPool

```
ObjectPool<int> intPool((DefaultInstanceFactory<int>())); 
```

或者

```
ObjectPool<IntClass, IntClass::InstanceFactory> intPool (IntClass::InstanceFactory (1)); 
```

默认实例创建者如下所示

```
template <typename T>
class DefaultInstanceFactory {
public:
    T * operator ()() const {
        return new T;
    }
}; 
```

在该 ObjectPool 类内部是一个嵌套类，用于存储项目

```
class PooledItem {
public:
    char data[OBJECT_SIZE];
    PooledItem * next;
    bool initialized;

    PooledItem() 
    : initialized(false) {}

    ~PooledItem() { 
        // --- call T destructor
        if (initialized) 
            cast()->~T(); 
    }
    T * cast() { 
        return reinterpret_cast<T *>(data); 
    };
}; 
```

有一个获取对象的 borrowObject 方法，这是我的实际问题：

```
T * borrowObject() {
    PooledItem * item = getItem();
    T * obj = item->cast();
    if (! item->initialized) {
        // old original line, call the defaut constructor of T
        new (obj) T();
        // how to integrate the external Instance Creator at this point?
        //new (instCreator_ ()) T(1);
        //instCreator_ ();
        item->initialized = true;
    }

    if (obj == NULL) {
        throw ObjectPoolException(
            "Object is NULL!", __FILE__, __LINE__, __FUNCTION__);
    }

    return obj;
} 
```

在上述方法中，我标记了实际的问题行。我不知道如何`new (obj) T()`用外部实例创建者替换放置新行，以重用该内存。

为了完整起见，将对象返回到池中的方法如下所示

```
void returnObject(T * obj) {
    // --- Get containing PooledItem pointer
    PooledItem * item = reinterpret_cast<PooledItem *>(obj);
    // --- Make sure object came from this pool
    if (item->next != reinterpret_cast<PooledItem *>(this)) {
        // throw Exception
    }

    // --- Destroy object now if we want to reconstruct it later
    if (destroyOnRelease) {
        item->cast()->~T();
        item->initialized = false;
    } 
```

谁能给我一些帮助如何修改方法以便正确集成外部实例创建者？到目前为止，我不知道是否需要更改 returnObject 方法中的某些内容，到目前为止我认为不需要。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:24:30.410

听起来您需要更改 InstanceFactory 的签名以获取指针

```
template <typename T>
class DefaultInstanceFactory {
public:
  void operator ()(T* out) const {
      return new(out) T;
  }
}; 
```

# windows-phone-7 - Windows 7 手机键盘

> ID：14596257
> 
> 赞同：0
> 
> 时间：2013-01-30T03:36:40.953
> 
> 标签：windows-phone-7, keyboard

我想重新映射键来实现任何想法。我做了一堆搜索。有谁知道如何重新映射键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:51:09.927

您无法重新映射 Windows Phone 中的键.. 至少在没有黑客攻击的情况下是这样。

原因是没有公开 API 来允许这样的操作。如果您只关心在本地执行它/不将其发布到商店，请跳到 XDA 开发人员上，您会在那里找到一些 dllimport / 键盘工作。

# django - django：获取外键信息

> ID：14596265
> 
> 赞同：0
> 
> 时间：2013-01-30T03:37:21.953
> 
> 标签：django, model

我创建了一个带有几个类和外键的模型，并且能够将其保存在数据库中。

我有以下型号：

```
class Player_Bios(models.Model):
  my_id            = models.SlugField(unique=True)
  player_id        = models.IntegerField(max_length=50, unique=True)    
  name             = models.CharField(max_length=50) 
  last             = models.CharField(max_length=50)
  middle           = models.CharField(max_length=50, blank=True)

class BatStat (models.Model):
  player_id           = models.ForeignKey('Player_Bios')
  team_id             = models.ForeignKey('Team')
  bat_stat_id         = models.CharField(max_length=50, unique=True)
  sport_code           = models.CharField(max_length=50, blank=True) 
  ab                  = models.IntegerField(max_length=50, null=True)

class Team (models.Model):

  team_id             = models.IntegerField(max_length=50, unique=True)
  team_short          = models.CharField(max_length=50, blank=True)
  team_full           = models.CharField(max_length=50, blank=True) 
```

当我将它保存到数据库时，我可以看到 Team 表上的 team_id 与 BatStat 表上的 team_id 相同，但 BatStat 上的 player_id 与 Player_Bios 表上的 player_id 不同。这是我将数据保存到数据库的方式：

```
p_id = Player_Bios.objects.get(player_id=st['player_id'])
t_id = Team.objects.get(team_id=st['team_id']) #I get the team_id from the Team Class
bat_id = str(st['season'])+ str(st['team_seq'])
bat_id = str(p_id.player_id) + bat_id
c = BatStat(player_id = p_id,team_id=t_id, bat_stat_id=bat_id, sport_code =st["sport_code"],ab=st['ab'])
c.save() 
```

st['player_id'] 是一个字典。我做了一个打印，它显示了正确的 player_id 号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:45:26.370

在 BatStat 中，您将密钥存储到 Player_Bios，而不是 player_id

```
class Player_Bios(models.Model):
  ...
  player_id        = models.IntegerField(max_length=50, unique=True)  

class BatStat (models.Model):
  ...
  player_id           = models.ForeignKey('Player_Bios') 
```

我不确定为什么您的 team_id 相同，但是，您似乎已经有了 ID。您可以通过直接设置 id 来避免查找 Player_Bios 和 Team。

[Django：使用整数设置外键？](https://stackoverflow.com/questions/2846029/django-set-foreign-key-using-integer)

```
class Player_Bios(models.Model):
  ...
  player_id = models.IntegerField(primary_key=True, max_length=50)  

class Team (models.Model):
  ...
  team_id = models.IntegerField(primary_key=True, max_length=50)

class BatStat (models.Model):
  ...
  player = models.ForeignKey('Player_Bios') # notice i renamed this to not have '_id'
  team = models.ForeignKey('Team') # notice i renamed this to not have '_id'

c = BatStat(bat_stat_id=bat_id, 
            sport_code =st["sport_code"],
            ab=st['ab'])
c.player_id = st['player_id'], # notice that this has '_id'
c.team_id = st['team_id'], # notice this has '_id'
c.save() 
```

# assembly - 这段汇编代码到 C 中是什么？

> ID：14596268
> 
> 赞同：0
> 
> 时间：2013-01-30T03:37:42.123
> 
> 标签：assembly, x86, conditional, att

**ATT 语法。**

我试图了解以下汇编代码的作用：

```
movl  8(%ebp), %edx
movl  $0, %eax
testl %edx, %edx
je    .L7
.L10:
xorl  %edx, %eax
shrl  %edx
jne   .L10
.L7:
andl  $1, %eax 
```

它应该是带有一个参数的函数体：无符号 x。我知道这是一个**do-while 循环**，但我怎样才能将它完全转换为 C 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:07:44.533

```
unsigned int function(unsigned int x)
{
  unsigned int a = 0;

  while (x != 0)
  {
    a = a ^ x;
    x = x >> 1;
  }

  a = a & 1;

  return a;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:48:13.000

简单的：

```
void or unsigned some_function(unsigned x)
{
  unsigned edx = x;
  unsigned eax = 0;
  if (edx == 0)
    goto L7;
L10:
  eax ^= edx;
  if ((edx >>= 1) != 0)
    goto L10;
L7:
  eax &= 1;
  // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:23:34.387

重要的是要记住它`eax`是 x86 中的返回寄存器（即使此代码段不包含`ret`指令）。此处，如果 的第一位`eax`为 1，则该函数返回 true。

该算法对输入的所有位进行异或运算并返回结果位。

可以用一个简短的高级句子来概括：如果输入的 1 位的个数是奇数，则返回 1，如果是偶数，则返回 0（您需要考虑一下才能看到它，如果您需要更多详细信息）。

# jquery - 动态添加行后jquery DataTable将ID添加到TR元素

> ID：14596270
> 
> 赞同：10
> 
> 时间：2013-01-30T03:37:53.340
> 
> 标签：jquery, datatables

我正在使用此代码来**初始化 DataTable**：

```
 $('#table-groups').dataTable( {
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "bFilter": false,
    "bInfo": false,
    "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
    "aoColumns": [
     { "sClass": "name" },
     { "sClass": "tools", "bSortable": false},
     ],     
    }); 
```

现在我通过这样的服务器端脚本添加行：

```
$('#table-groups').dataTable().fnAddData( ["<strong>"+$_returnvalue.name+"</strong>","<div class=\"cell edit\"> Group ID is: "+$_returnvalue.entryid+" </div>"]); 
```

我的问题是：有没有办法将 的值插入`$_returnvalue.entryid`为的 **ID**`<tr>`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-30T03:46:55.630

您可以使用[fnCreatedRow](http://www.datatables.net/usage/callbacks#fnCreatedRow)回调

您可以执行类似 where`aData[0]`必须是 id 的操作。

```
$('#example').dataTable( {
    "fnCreatedRow": function( nRow, aData, iDataIndex ) {
        $(nRow).attr('id', aData[0]);
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/wVUjR/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-18T05:47:58.073

```
 var MyUniqueID = "tr123"; // this is the uniqueId.
    var rowIndex = $('#MyDataTable').dataTable().fnAddData([ "column1Data", "column2Data"]);
    var row = $('#MyDataTable').dataTable().fnGetNodes(rowIndex);
    $(row).attr('id', MyUniqueID); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-26T18:42:16.937

您在这里没有使用服务器端数据表。这个答案可能会帮助那些使用服务器端数据表并尝试放置唯一 ID（来自服务器端，基于 db 数据）的人。

你只需要`ID`通过这个键发送：（`DT_RowId`从服务器端，作为响应）。它不需要对前端进行任何更改。可以在以下链接中找到更多详细信息：[https ://datatables.net/examples/server_side/ids.html](https://datatables.net/examples/server_side/ids.html)

# java - Android onsaveinstancestate()

> ID：14596272
> 
> 赞同：0
> 
> 时间：2013-01-30T03:38:23.357
> 
> 标签：java, android

所以我明白了如何使用的主要思想

```
 protected void onSaveInstanceState (Bundle outState) 
```

[http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle))

也来自[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

但我的问题是，如果这是第一次创建应用程序怎么办？那么之前任何东西都不会存储在捆绑包中......如果是这样，那么当我尝试从捆绑包中调出之前尚未保存的东西时，我会得到什么？null？例如我的代码中有这个

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String [] b=savedInstanceState.getStringArray("MyArray");
}
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    String [] a={"haha"};
    savedInstanceState.putStringArray("MyArray", a);
} 
```

在第一次打开应用程序时，b 的值是多少？在应用程序被使用一次之后，b 的值是多少？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:43:53.700

在你的 onCreate() 添加一个条件

```
 if(savedInstanceState==null){
  //meaning no data has been saved yet or this is your first time to run the activity.  Most likely you initialize data here.
 }else{
   String [] b=savedInstanceState.getStringArray("MyArray");
 } 
```

顺便检索保存在 onSaveInstanceState 中的数据，您将覆盖它

```
 @Override
 protected void onRestoreInstanceState(Bundle savedInstanceState) {
   // TODO Auto-generated method stub
  super.onRestoreInstanceState(savedInstanceState);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:42:17.990

**您必须始终在onCreate()**或**onRestoreInstanceState()**中检查 null，如下所示：

```
String [] b = new String[arraysize];    

   protected void onCreate(Bundle savedInstanceState) {
                  super.onCreate(savedInstanceState);      

                  if (savedInstanceState != null)
                  {
                       b = savedInstanceState.getStringArray("MyArray");

                      // Do here for resetting your values which means state before the changes occured.

                  }
                  else{
                          default.. 
                  }

                   Here you do general things.
    } 
```

# c++ - 如何在地图中同时打印键和值？

> ID：14596274
> 
> 赞同：0
> 
> 时间：2013-01-30T03:38:53.200
> 
> 标签：c++, map

当我尝试使用 it.first 打印时，it.second 它不起作用，这些甚至是有效的功能吗？

```
#include <iostream>
#include <string>
#include <map>
using namespace std;
int main()
{
map<string, int> workers;

workers["John"] = 1;
workers["Frank"] = 2;

for(map<string, int>::iterator it = workers.begin(); it != workers.end(); ++it) {
        cout<<it.first()<<":"<<it.second()<<endl;
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:47:56.307

`first`并且`second`不是成员函数，它们是普通的成员对象：

```
cout << it->first << ":" << it->second << endl; 
```

注意没有括号，那些不是函数调用。

# python - 设计 - 如何处理时间戳（存储）以及何时执行计算；Python

> ID：14596276
> 
> 赞同：5
> 
> 时间：2013-01-30T03:39:06.430
> 
> 标签：python, design-patterns, datetime, architecture, system-design

我正在尝试确定（因为我的应用程序正在处理来自不同来源和不同时区、格式等的大量数据）如何最好地存储我的数据并使用它。

例如，我应该将所有内容都存储为 UTC 吗？这意味着当我获取数据时，我需要确定它当前所在的时区，如果它不是 UTC，则进行必要的转换以使其如此。（注意，我在 EST）。

然后，在对数据执行计算时，我应该提取（比如说它是 UTC）并进入我的时区（EST），所以当我查看它时是否有意义？我应该将其保留在 UTC 并进行所有计算吗？

很多这些数据是时间序列的，将被绘制成图表，并且图表将在 EST 中。

这是一个 Python 项目，所以假设我有一个数据结构：

```
"id1": {
    "interval": 60,                            <-- seconds, subDict['interval']
    "last": "2013-01-29 02:11:11.151996+00:00" <-- UTC, subDict['last']
}, 
```

我需要对此进行操作，通过确定当前时间（now（））是否>最后一个+间隔（已经过去了 60 秒）？所以在代码中：

```
lastTime = dateutil.parser.parse(subDict['last'])    
utcNow = datetime.datetime.utcnow().replace(tzinfo=tz.tzutc())

if lastTime + datetime.timedelta(seconds=subDict['interval']) < utcNow:
    print "Time elapsed, do something!" 
```

那有意义吗？我在任何地方都在使用 UTC，无论是存储的还是计算的……

此外，如果有人有关于如何在软件中使用时间戳的优秀文章的链接，我很乐意阅读它。可能像 Joel On Software 一样在应用程序中使用时间戳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:31:35.600

在我看来，好像您已经在“以正确的方式”做事。用户可能希望在他们的本地时区（输入和输出）中进行交互，但是以 UTC 格式存储标准化日期是正常的，这样它们就不会产生歧义并简化计算。因此，尽快标准化为 UTC，并尽可能晚地进行本地化。

可以在此处找到有关 Python 和时区处理的一些少量信息：

*   [Django时区实现](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)
*   [pytz 文档](http://pytz.sourceforge.net/)

我目前的偏好是将日期作为 unix 时间戳`tv_sec`值存储在后端存储中，并在处理过程中转换为 Python`datetime.datetime`对象。处理通常使用`datetime`UTC 时区中的对象完成，然后在输出前转换为本地用户的时区。我发现拥有丰富的对象，例如`datetime.datetime`有助于调试。

时区处理起来很麻烦，您可能需要根据具体情况确定是否值得努力正确支持时区。

例如，假设您正在计算所用带宽的每日计数。可能出现的一些问题是：

1.  夏令时边界会发生什么？您是否应该假设一天总是 24 小时以便于计算，或者您是否需要始终检查每天在夏令时边界上可能有更少或更多小时的计算？
2.  在呈现本地化时间时，是否重复时间是否重要？例如。如果您在本地时间显示每小时报告而没有附加时区，是否会使用户感到困惑，因为缺少一小时的数据，或者在夏令时更改前后重复一小时的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:09:30.990

Since, as I can see, you do not seem to be having any implementation problems, I would focus rather on design aspects than on code and timestamp format. I have an experience of participating in design of network support for a navigation system implemented as a distributed system in a local network. The nature of that system is such that there is a lot of data (often conflicting), coming from different sources, so solving possible conflicts and keeping data integrity is rather tricky. Just some thoughts based on that experience.

Timestamping data, even in a distributed system including many computers, usually is not a problem if you do not need a higher resoluition than one provided by system time functions and higher time synchronization accuracy than one provided by your OS components.

In the simplest case using UTC is quite reasonable, and for most of tasks it's enough. However, it's important to understand the purpose of using time stamps in your system from the very beginning of design. Time values (no matter if it is Unix time or formatted UTC strings) sometimes may be equal. If you have to resolve data conflicts based on timestamps (I mean, to always select a newer (or an older) value among several received from different sources), you need to understand if an incorrectly resolved conflict (that usually means a conflict that may be resolved in more than one way, as timestamps are equal) is a fatal problem for your system design, or not. The probable options are:

1.  If the 99.99% of conflicts are resolved in the same way on all the nodes, you do not care about the remaining 0.01%, and they do not break data integrity. In that case you may safely continue using something like UTC.

2.  If strict resolving of all the conflicts is a must for you, you have to design your own timestamping system. Timestamps may include time (maybe not system time, but some higher resolution timer), sequence number (to allow producing unique timestamps even if time resolution is not enough for that) and node identifier (to allow different nodes of your system to generate completely unique timestamps).

3.  Finally, what you need may be not timestamps based on time. Do you really need to be able to calculate time difference between a pair of timestamps? Isn't it enough just to allow ordering timestamps, not connecting them to real time moments? If you don't need time calculations, just comparisons, timestamps based on sequential counters, not on real time, are a good choice (see [Lamport time](http://en.wikipedia.org/wiki/Lamport_timestamps) for more details).

If you need strict conflict resolving, or if you need very high time resolution, you will probably have to write your own timestamp service.

Many ideas and clues may be borrowed from a book by A. Tanenbaum, "[Distributed systems: Principles and paradigms](https://rads.stackoverflow.com/amzn/click/com/0132392275)". When I faced such problems, it helped me a lot, and there is a separate chapter dedicated to timestamps generation in it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T03:54:07.027

我认为最好的方法是将所有时间戳数据存储为 UTC。当您读入时，立即转换为UTC；在显示之前，将 UTC 转换为您当地的时区。

您甚至可能想让您的代码两次打印所有时间戳，一次在本地时间，第二次在 UTC 时间……这取决于您需要一次在屏幕上显示多少数据。

我是 RFC 3339 时间戳格式的忠实粉丝。它对人类和机器来说都是明确的。最好的一点是几乎没有什么是可选的，所以它看起来总是一样的：

```
2013-01-29T19:46:00.00-08:00 
```

我更喜欢将时间戳转换为单个浮点值以进行存储和计算，然后再转换回日期时间格式以进行显示。我不会在浮点数中存钱，但时间戳值在浮点值的精度范围内！

使用时间浮点数使很多代码变得非常容易：

```
if time_now() >= last_time + interval:
    print("interval has elapsed") 
```

看起来你已经在这样做了，所以我不能建议任何显着的改进。

我编写了一些库函数来将时间戳解析为 Python 时间浮点值，并将时间浮点值转换回时间戳字符串。也许这里的一些东西对你有用：

[http://home.blarg.net/~steveha/pyfeed.html](http://home.blarg.net/~steveha/pyfeed.html)

建议你看看`feed.date.rfc3339`。BSD 许可证，因此您可以根据需要使用代码。

编辑：问题：这对时区有什么帮助？

答：如果您存储的每个时间戳都以 UTC 时间存储为 Python 时间浮点值（自纪元以来的秒数，带有可选的小数部分），您可以直接比较它们；从另一个中减去一个以找出它们之间的间隔；等等。如果您使用 RFC 3339 时间戳，那么每个时间戳字符串在时间戳字符串中都有时区，并且可以通过您的代码正确地将其转换为 UTC 时间。如果您在显示之前将浮点值转换为时间戳字符串值，则时区对于本地时间将是正确的。

另外，正如我所说，看起来他已经在做这件事了，所以我不认为我可以提供任何惊人的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T05:19:24.643

我个人使用的是 Unix-time 标准，由于其简单的表示形式，存储起来非常方便，它只是一个数字序列。由于它在内部表示 UTC 时间，因此您必须确保在存储之前正确生成它（从其他时间戳转换）并根据您想要的任何时区对其进行格式化。

一旦您在后端数据中有一个通用的时间戳格式（tz 感知），绘制数据就非常容易，只需设置目标 TZ。

举个例子：

```
import time
import datetime
import pytz
# print pre encoded date in your local time from unix epoch
example = {"id1": {
                   "interval": 60,
                   "last": 1359521160.62
                   }
           }
#this will use your system timezone formatted
print time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(example['id1']['last']))
#this will use ISO country code to localize the timestamp
countrytz = pytz.country_timezones['BR'][0]
it = pytz.timezone(countrytz)
print  it.localize(datetime.datetime.utcfromtimestamp(example['id1']['last'])) 
```

# python - 无法导入 fbconsole、fbconsole 安装？

> ID：14596277
> 
> 赞同：0
> 
> 时间：2013-01-30T03:39:06.723
> 
> 标签：python, facebook, google-app-engine, easy-install

我正在尝试使用[fbconsole](https://github.com/facebook/fbconsole)。

网站说

```
pip install fbconsole 
```

但我没有 pip，所以我使用 easy_install fbconsole 并安装了 fbconsole。

我检查 Python 目录并且有 fbconsole-0.3-py2.7.egg 文件。

我尝试导入 fbconsole，但错误是

```
Internal Server Error
import_string() failed for 'myapp.views.index'. Possible reasons are: - missing __init__.py in a package; - package or module path not included in sys.path; - duplicated package or module name taking precedence in sys.path; - missing module, class, function or variable; Debugged import: - 'myapp' found in 'D:\\PythonProj\\LLL\\myapp\\__init__.pyc'. - 'myapp.views' not found. Original exception: ImportError: No module named fbconsole 
```

更新 1：我的项目结构是

![在此处输入图像描述](../Images/f16adb0721b6373a3ec67b860aaec452.png) 这与您的解释完全不同，因为我使用的是 KAY 框架。我按照你的解释，但仍然无法导入包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:16:43.653

您需要将该`fbconsole`模块放入您的 GAE 项目中以使其工作。
通过安装它`pip`或`easy install`确实使它可用于您的本地 python 但不适用于 GAE 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:05:21.337

当我`pip install fbconsole`没有得到一个`.egg`文件，而是一个`.egg-info`文件，它只是元数据，以及项目文件`fbconsole.py`和`fbconsole.pyc`. [看来源包是PyPI](http://pypi.python.org/pypi/fbconsole/0.3)上唯一上传的格式，所以如果您使用我的脚本，您的问题似乎是您需要将`fbconsole.py`文件（并且可选地，尽管它会在首次访问时重建此文件）复制到您的包目录，或者如果不是，则到项目的根目录。`fbconsole.pyc``path_fixer.py`

`.egg`这是有关和`.egg-info`文件之间差异的更多信息。

> 目前为 Python Eggs 实现了两种基本格式：
> 
> 1.  `.egg`格式：*包含*项目代码和资源的目录或 zip 文件，以及 包含项目元数据的`EGG-INFO`子目录
>     
>     
>     
> 2.  `.egg-info`*格式：与项目代码和资源相邻*放置的文件或目录，直接包含项目的
>     元数据。

[http://svn.python.org/projects/sandbox/trunk/setuptools/doc/formats.txt](http://svn.python.org/projects/sandbox/trunk/setuptools/doc/formats.txt)

# ios - 无法使 if then 语句起作用？

> ID：14596279
> 
> 赞同：-1
> 
> 时间：2013-01-30T03:39:13.607
> 
> 标签：ios, xcode, if-statement, geocoding

> **可能重复：**
> [xcode iOS 比较字符串](https://stackoverflow.com/questions/6936129/xcode-ios-compare-strings)

试图让 UIImageview 根据用户的位置（城市）显示不同的图像，这是我得到的代码：

```
 [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
    NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
    if (error == nil && [placemarks count] > 0) {
        placemark = [placemarks lastObject];
        //Display country and city
        country.text = [NSString stringWithFormat:placemark.country];
        city.text = [NSString stringWithFormat:placemark.locality];
        if (placemark.locality==@"Cupertino")
            banner.image = [UIImage imageNamed:@"cupertino.png"];
    } else {
        NSLog(@"%@", error.debugDescription);
    }
} ]; 
```

我可以让标签显示国家和城市，但不能让 UIImageview 根据城市改变，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:42:53.293

使用`isEqualToString:`方法来比较字符串，比如

```
if ([placemark.locality isEqualToString:@"Cupertino"])
        banner.image = [UIImage imageNamed:@"cupertino.png"];
} else {
    NSLog(@"%@", error.debugDescription);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:20:51.083

确保您已使用 [UIImage alloc] 分配图像。

# upgrade - 从 32 位 JDK 升级到 64 位 JDK

> ID：14596292
> 
> 赞同：2
> 
> 时间：2013-01-30T03:41:02.293
> 
> 标签：upgrade, 32bit-64bit, java

我有一个关于将 Java 应用程序从 32 位 JDK 升级到 64 位 JDK 的问题。这样升级兼容吗？

使用旧的 java 代码 (.java) 在 64 位 JDK 中进行简单的完整编译可以实现吗？

等待您对此的评论。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T18:56:37.947

只要您不使用 JNI 或本机代码，您应该能够使用 64 位 SDK 编译您的 java 代码而不会出现问题。

有关更多信息，请参阅[https://stackoverflow.com/a/9411435/153424](https://stackoverflow.com/a/9411435/153424)

# c# - 有什么快速的方法来转换列表 十六进制字符串？

> ID：14596294
> 
> 赞同：1
> 
> 时间：2013-01-30T03:41:14.003
> 
> 标签：c#, .net, c#-4.0, c#-3.0

> **可能重复：**
> [如何将字节数组转换为十六进制字符串，反之亦然？](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa)

我有一个列表，我需要将其转换为十六进制字符串。我觉得我转换的方式很安静。

```
List<byte> TRIGGER_POL = Data.GetRange(23, 1);
byte[] TRIGGER_POL_temp = new byte[TRIGGER_POL.Count];
TRIGGER_POL_temp[0] = TRIGGER_POL[0];
string TRIGGER_POL_hx = BitConverter.ToString(TRIGGER_POL_temp, 0).Replace("-", string.Empty); 
```

有没有更快、更有效的方法来做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:07:12.813

有很多方法可以做到这一点，但这个可能对你有用

```
 List<string> hexStrings = TRIGGER_POL.Select(b => BitConverter.ToString(new byte[]{b})).ToList(); 
```

或者如果你只想要 1 个字符串

```
string hex = BitConverter.ToString(TRIGGER_POL.ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:10:26.550

我个人最喜欢的做法是深埋在 .NET [SoapHexBinary中的一个鲜为人知的类](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.metadata.w3cxsd2001.soaphexbinary.aspx)

```
byte[] tmp1 = SoapHexBinary.Parse("DEADBEEF"); //tmp1 now equals the array {0xDE, 0xAD, 0xBE, 0xEF}
string tmp2 = new SoapHexBinary(tmp1).ToString(); //tmp2 now equals "DEADBEEF" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:12:04.390

试试这个：

```
public static string ConvertToHex(byte[] bytes)
{
    SoapHexBinary hexBin = new SoapHexBinary(bytes);
    return hexBin.ToString();
}
return ConvertToHex(TRIGGER_POL.ToArray()); 
```

# r - 使用 Shiny 时的内存分配

> ID：14596295
> 
> 赞同：0
> 
> 时间：2013-01-30T03:41:13.637
> 
> 标签：r, memory-management, shiny

我正在使用 Shiny 在**R**中运行一个非常简单的模拟。但是我遇到了内存问题，并收到消息：

> “错误：无法分配大小为 274.8 Mb 的向量”等。

**但是当我在R Studio**中运行相同的代码时，它工作正常。任何一般的想法如何增加对 Shiny 的内存分配？非常感谢。安德鲁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:39:03.107

这是我关于内存管理的标准链接： [R 内存管理/无法分配大小为 n Mb 的向量](https://stackoverflow.com/questions/5171593/r-memory-management-cannot-allocate-vector-of-size-n-mb)

[http://stat.ethz.ch/R-manual/R-patched/library/base/html/Memory-limits.html](http://stat.ethz.ch/R-manual/R-patched/library/base/html/Memory-limits.html)

[增加（或减少）R 进程可用的内存](https://stackoverflow.com/questions/1395229/increasing-the-memory-available-to-r-processes)

# node.js - 是否可以看到与 socket.io 捆绑在一起的 redis 模块内部

> ID：14596296
> 
> 赞同：0
> 
> 时间：2013-01-30T03:41:22.390
> 
> 标签：node.js, redis, socket.io

因为我们可以将 socket.io 配置为使用 redis 来实现它的内部工作，如下所示：

```
var RedisStore = require('socket.io/lib/stores/redis')
, redis  = require('socket.io/node_modules/redis')
, pub    = redis.createClient()
, sub    = redis.createClient()
, client = redis.createClient();

io.set('store', new RedisStore({
  redisPub : pub
, redisSub : sub
, redisClient : client
})); 
```

怎么可能看到这个 RedisStore 的内部来查看 socket.io 正在插入和删除什么数据。我将我的 socket.io 配置设置为使用从 node-redis 安装的 redis 实例，如下所示：

```
redis  = require('redis') 
```

但我没有看到任何 socket.io 活动正在进行，我想知道 socket.io 是否真的在使用 redis。我确实看到我的 cookie 存储在 redis 中，因为我将 express 和 connect 配置为使用 redis 作为 MemoryStore，但我没有看到任何与 socket.io 相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T22:33:43.200

对于本地 redis node.js 开发/调试，我这样做。

在后台启动 redis 服务器并在同一个 tty 中运行 cli 监视器：

```
redis-server &
redis-cli monitor -h host -p port 
```

如果使用本地默认值，您可以离开*-*关闭。

您还可以运行一个 redis 从站，它回显所有主命令并将当前 redis-server 的内存保存的数据同步到默认为 ./dump.rdb 的文本文件中。该文件可以加载到 redis 并使用文本编辑器查看。

```
 redis-cli --slave -h host -p port
 vim ./dump.rdb 
```

一个基本的 node.js Passport session-cookie 看起来像这样：

```
sess:L2C4MPtAUmlO4zHGkXnq4icuÃ@U@Z{"cookie":{"originalMaxAg  null,"expiresÀhttpOnly":true,"path":"/"}passport L} 
```

为了进一步帮助您*了解内部*情况，您可能需要单步执行您的应用程序并在节点代码和 redis 驱动程序交互的区域放置断点。

您可以使用它来观察握手过程，通过单步执行您的函数并观察控制流期间的状态变化来查看不正确的数据交换、套接字问题等。

此作业的节点应用程序是节点检查器。

它将允许您在类似于 Chrome 开发工具的调试环境中查看您的应用程序运行，您可以在其中设置断点以暂停、步入和退出功能，并及时向前移动，直到下一个断点或异常触发暂停。

```
npm -g install node-inspector 
```

当您在多个项目中使用它时，您可以使用“-g”全局开关安装它。

在终端窗口中运行没有任何选项的程序会为我生成以下输出：

```
~/passaic-streaming git:weekend-refactor ❯❯❯
Node Inspector v0.7.0
Visit http://localhost:8080/debug?port=5858 to start debugging. 
```

您可以使用配置或 ENV 变量配置 HOST、PORT、DEBUG-PORT（DEBUG_PORT，端口 5858，作为参数传递，在运行的节点进程和运行 Web 应用程序的浏览器之间设置套接字连接）。

现在，有三种方法可以在调试模式下运行你的 node.js 代码。在第一次运行节点检查器后执行此操作：

```
node --debug-brk app.js

node --debug app.js

node app.js  // then send a SIGUSR1 to the node process:

// pgrep node
// kill -s USR1 PID 
```

使用第一个命令“--debug-brk”，直到一切正常，因为它告诉您的代码在模块的第一行停止。

```
 browser http://localhost:8080/debug?port=5858 
```

根据您的应用程序大小，加载可能需要一些时间。但是一旦在那里，您将有一个源选项卡来逐步执行代码，以及一个控制台选项卡。

'--debug' 可以在 express 应用程序上正常工作，您可能只需要点击端点或执行一些事务或告诉它手动在断点处暂停。

一些节点脚本太快而无法被节点检查器侦听器捕获，并且在您在源代码中设置断点之前，可以方便地在第一行中断，因此命令。

您还可以`'node debugger';`在以下区域周围放置线条：

```
 // connect to Redis for sessionStore

  node debugger;    // node-inspector will pause here.

  redisClient = redis.createClient(
    options.PORT, options.HOST, options.REDIS_OPTIONS)); 
```

您可能需要使用 SIGUSR1 而不是在调试模式下启动应用程序的主要原因是您使用的是 node.js 集群 API。

如果您尝试监视使用集群并创建多个节点进程的应用程序，那么如果您尝试在 node < 0.11.x 中进行调试，您将看到套接字存在以下问题：

```
Failed to open socket on port 5858, waiting 1000 ms before retrying
Failed to open socket on port 5858, waiting 1000 ms before retrying 
```

在不稳定的节点版本中，child_process.fork 命令在调试器端口 5858+1 上进行侦听，例如 59、60 等，具体取决于您拥有的工作人员。

目前在节点 0.10.x 中，如果您需要检查集群应用程序中工作人员的状态，您必须启动节点而不是“--debug”模式，而是将 kill USR1 信号发送到进程。

要使用 redis 强制更多地注销节点，请将您的 node_redis 驱动程序置于调试模式：

```
redis = require('redis');
redis.debug_mode = true; //turn on debug mode 
```

另外，如果您像这样开始使用 connect-redis 中间件：

```
DEBUG=* node app.js 
```

然后你会看到这样的 connect-redis 输出：

```
connect:redis SETEX "sess:FVDBpNoFDFIOkynFDLcpM6St" ttl:604799 
{"cookie":{"originalMaxAge":604799991,"expires":"2014-03-08T22:38:32.620Z","httpOnly":true,"path":"/"},"passport":{"user":"52edfdfdf3da2rer0c06eb34"}} +50ms 
```

最后，StrongOps/Strongloop 的团队加入了他们的命令行工具节点检查器的一部分。

```
npm install -g strong-cli

slc debug app.js 
```

它将启动节点检查器，打开网络浏览器到适当的检查器，并且在最新的节点版本中——它理解集群。

# libevent - evhttp_request_new() evhttp_request 返回 null

> ID：14596297
> 
> 赞同：0
> 
> 时间：2013-01-30T03:41:24.143
> 
> 标签：libevent

我编写了一个 libevet 程序来从某个 Web 界面获取数据。像这样的代码：有时 self->done 的 struct evhttp_request *req 为 NULL。我找不到这个的原因。

```
response->connecttime = spi_utils_float_time();
self->evreq = evhttp_request_new(self->done, task);
if (self->evreq == NULL) {
    SPI_LOG_ERROR("spider", "cannot create evhttp_request");
    goto download_error;
}

/* bson_print(&task->task); */

/** set header and body */
/* TODO: set timeout */
spi_http_request_split_header(self, self->header->str, self->evreq);
if (self->body != NULL)
    evbuffer_add_printf(self->evreq->output_buffer, (const char*)self->body->str);

    if (self->method == spi_http_post)
            cmd_type = EVHTTP_REQ_POST;

self->evcon = evhttp_connection_new(self->host->str, self->port);
if (self->evcon == NULL) {
    SPI_LOG_ERROR("spider", "evhttp_connection_new Failed!\n");
    goto download_error;
}

SPI_LOG_DEBUG("spider", "set retries: %d.", 5);
evhttp_connection_set_retries(self->evcon, 3);
SPI_LOG_DEBUG("spider", "set timeout: %d.", 60);
evhttp_connection_set_timeout(self->evcon, 20);

response->connectedtime = spi_utils_float_time();

response->crawltime = spi_utils_float_time();

SPI_LOG_DEBUG("spider", "evhttp_make_request");
if (evhttp_make_request(self->evcon, self->evreq, cmd_type, self->path->str) == -1) {
    SPI_LOG_ERROR("spider", "evhttp_make_request Failed.\n");
    goto download_error;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T22:46:58.627

（从你的问题来看，你在哪里得到的并不完全清楚`NULL`，但也许你的意思是）如果有超时，
传递给的回调`evhttp_request_new`可能会得到。`NULL`

# specifications - 是否所有 CMIS 操作都需要同步？

> ID：14596303
> 
> 赞同：0
> 
> 时间：2013-01-30T03:42:12.600
> 
> 标签：specifications, synchronous, cmis

[CMIS 协议规范](http://docs.oasis-open.org/cmis/CMIS/v1.1/csprd01/CMIS-v1.1-csprd01.html)甚至不包含“同步”或“异步”这两个词。

我猜想，每个服务器端操作都是同步的？
有反例吗？

场景：我创建了一个文档，然后我立即列出了目录，但文件还没有出现。
这种情况是否违法？
（不是客户端问题，客户端等待HTTP响应再进行下一条指令）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:15:31.293

一般来说，CMIS 操作应该是同步的。我不知道有什么反例。服务器上的异步操作几乎不可能创建应用程序。

假设您在幕后使用 AtomPub，您可能需要查看 [http://bitworking.org/projects/atom/rfc5023.html](http://bitworking.org/projects/atom/rfc5023.html)。创建资源会返回其 URI。

所以我猜你看到的要么是实现中的错误，要么是客户端正在使用规范未涵盖的实现细节。例如，露天存储库默认为异步索引 (solr)。因此，我认为应该可以提供代码来演示您观察到的通过搜索支持列表的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:00:15.217

CMIS 是同步的，对于跨越多个请求的事务没有任何语义。因此，每个成功的变更请求（ AtomPub 绑定中的 , `POST`）都会立即对后续请求产生影响。`PUT``DELETE`

你描述的场景并不违法，在CMIS下根本不可能实现。如果您需要异步操作，则需要将客户端与 CMIS 解耦并引入一个中间层，例如：

*   缓存 CMIS 突变的执行前状态
*   返回缓存的值，直到突变成功。

# r - R2WinBUGS 错误 - 陷阱 - 不兼容的副本

> ID：14596307
> 
> 赞同：2
> 
> 时间：2013-01-30T03:42:40.863
> 
> 标签：r, winbugs, winbugs14, r2winbugs

我试图从 R 调用 winBUGS 来估计逻辑回归。我正在使用以下代码：

```
# Directorio de trabajo
setwd("~/3 Diplomado/7 Bayesiana/8t1")

# paquete para hablarse con WinBUGS desde R
library(R2WinBUGS)

# cargamos datos
reg <- read.table("enf.csv", header = TRUE, sep = ",")
edad <- reg$edad
enfer <- reg$efer
n <- length(reg$edad)

# Primeras filas de los datos
head(reg)

# Nombres de los datos para alimentar al modelo en WinBUGS
datos <- list("edad","enfer", "n")

# Construimos el modelo

modelo <- function(){
  for (i in 1:n) {
    enfer[i] ~ dbin(theta[i], 1)
    logit(theta[i]) < - beta0 + beta1 * edad[i] 
    phi[i]<-theta[i]/(1-theta[i])
      }
  beta0 ~ dnorm(0, 0.0001)
  beta1 ~ dnorm(0, 0.0001)

}

## escribimos el modelo a un archivo .bug file:
write.model(modelo, "modelo.bug")
## Para echarle un vistazo al modelo:
file.show("modelo.bug")

# Distribuciones iniciales
iniciales <- function(){
 list(beta0=1,beta1=1)
}

# Corremos esto en WinBUGS

   regresionlogistica.sim = bugs(datos,iniciales,
                 model.file="modelo.bug",
                 parameters=c("beta0","beta1"),
                 n.chains=1,n.iter=20000,n.burnin=5000,n.thin=1,
                 bugs.directory="C:/Users/pythonxy/Documents/3 Diplomado/7 Bayesiana/winbugs14",
                 working.directory="~/3 Diplomado/7 Bayesiana/8t1",          
                 codaPkg=FALSE) 
```

WinBUGS 打开，但出现错误。“不兼容的副本”。我一直在寻找这个错误，发现很多人都遇到过这种情况。我已经尝试了建议的解决方案：model.bug 的文件路径更短，确保工作目录中没有更多的“数据”文件，使用数据变量名称的名称列表等。

但我仍然无法让它工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:47:38.667

如果我没记错的话，如果输入数据或输出参数有问题，就会出现这个错误。我在您的代码中发现了几个潜在问题：

1.  我认为这`datos <- list("edad","enfer", "n")`是错误的：您应该使用 like `datos <- list(edad = edad, enfer = enfer, n = n)`，因为您想传递实际数据，而不仅仅是 R 变量名！不要将此与输出参数混淆！

2.  `phi`节点被计算但不被监控。我不确定这是否是个问题，但 WinBUGS 有时会以这种方式表现得很奇怪。试试看！

3.  初始值应该是随机生成的，而不是像这样固定的（比如`rnorm(1, 0, 0.01)`等）

# android - 如何在Android中检测键盘动画结束？或在没有动画的情况下立即隐藏键盘

> ID：14596309
> 
> 赞同：3
> 
> 时间：2013-01-30T03:43:05.310
> 
> 标签：android, keyboard, android-edittext

我有很多`EditText`我设置了一些，`setInputType(InputType.TYPE_NULL)`让我们的输入视图来处理插入数据。

但其中一些，我使用来自`EditText`.

当我触摸普通`EditText`普通键盘时，当我触摸我的自定义普通键盘时，从这个状态开始，我的自定义`EditText`普通键盘不会立即隐藏，我的自定义输入显示在该键盘上方。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:12:57.680

为什么不使用自己的键盘布局？

或者，如果您想使用，则必须将其更改为样式。

这是默认 KeyboardView 样式的代码：

```
<style name="Widget.KeyboardView" parent="android:Widget">
    <item name="android:background">@android:drawable/keyboard_background</item>
    <item name="android:keyBackground">@android:drawable/btn_keyboard_key</item>
    <item name="android:keyTextSize">22sp</item>
    <item name="android:keyTextColor">#FFFFFFFF</item>
    <item name="android:keyPreviewLayout">@android:layout/keyboard_key_preview</item>
    <item name="android:keyPreviewOffset">-12dip</item>
    <item name="android:keyPreviewHeight">80dip</item>
    <item name="android:labelTextSize">14sp</item>
    <item name="android:popupLayout">@android:layout/keyboard_popup_keyboard</item>
    <item name="android:verticalCorrection">-10dip</item>
    <item name="android:shadowColor">#BB000000</item>
    <item name="android:shadowRadius">2.75</item>
</style> 
```

希望你能理解。

随时发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:22:40.393

1.  将以下方法添加到您想要隐藏内置`SoftKeyBoard`.

    ```
    public void hideSoftKeyboard(Activity activity) {
        InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
        inputMethodManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), 0);
    } 
    ```

2.  现在在`onCreate`之后添加以下行`setContentView()`。

    ```
    final EditText editText = (EditText) findViewById(R.id.edtTitle);
    editText.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            android.util.Log.i(TAG, "Touch");
            hideSoftKeyboard(JoinImageActivity.this);
            //Open your custom keyboard here
            return true;
        }
    }); 
    ```

在这里，您可以打开自定义键盘，因为它隐藏了内置键盘。我希望这可以帮助你。

# c++ - 从 Pulse Audio 运行简单 C 程序时出错

> ID：14596310
> 
> 赞同：-2
> 
> 时间：2013-01-30T03:43:05.407
> 
> 标签：c++, c, linux, centos, pulseaudio

我使用脉冲音频的简单 C 代码进行播放和录制，效果很好。但是当我将它转换为 C++ 时，它不起作用。我正在粘贴两个代码。请帮忙。C++ 代码不显示任何错误，但不播放任何声音。但是 C++ 代码会播放录制的声音。注意：我使用的是 64 位 CentOS 6.2

C++ 代码：

```
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif
#include <iostream>
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <fcntl.h>
#include <stdint.h>

#include "pulse/simple.h"
#include "pulse/error.h"
using namespace std;
#define BUFSIZE 32
int error;

/* The Sample format to use */

class AudioCapt
{

public: 
    AudioCapt();
    void RecordSound(int argc,char *argv[],pa_simple *s_in,pa_sample_spec &ss,pa_simple *s_out,uint8_t buf[],ssize_t r);
    void PlaybackSound(int argc, char*argv[],pa_simple *s_out,pa_sample_spec &ss,uint8_t buf[],ssize_t r);
};

void AudioCapt::RecordSound(int argc, char*argv[],pa_simple *s_in,pa_sample_spec &ss,pa_simple *s_out,uint8_t buf[],ssize_t r)
{

printf("Audio Capturing \n");
  if (!(s_in = pa_simple_new(NULL, argv[0], PA_STREAM_RECORD, NULL, "record", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
}

    if (pa_simple_read(s_in, buf, sizeof(buf), &error) < 0) {
        fprintf(stderr, __FILE__": read() failed: %s\n", strerror(errno));
}
printf("Buffer :::: %d\n",buf[0]);

}

void AudioCapt::PlaybackSound(int argc, char*argv[],pa_simple *s_out,pa_sample_spec &ss,uint8_t buf[],ssize_t r)
{
printf("Audio PlayBack \n");
printf("Play Buffer::: %d\n",buf[0]);
if (!(s_out = pa_simple_new(NULL, argv[0], PA_STREAM_PLAYBACK, NULL, "playback", &ss, NULL, NULL,  &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
}

    /* ... and play it (Modified) */
   if (pa_simple_write(s_out, buf, sizeof(buf), &error) < 0) {
       fprintf(stderr, __FILE__": pa_simple_write() failed: %s\n", pa_strerror(error));
}

/* Make sure that every single sample was played */
if (pa_simple_drain(s_out, &error) < 0) {
    fprintf(stderr, __FILE__": pa_simple_drain() failed: %s\n", pa_strerror(error));
}
}

int main(int argc, char * argv[])
{

pa_sample_spec ss;
ss.format = PA_SAMPLE_S16LE;
ss.rate = 44100;
    ss.channels = 2;

pa_simple *s_in, *s_out = NULL;

AudioCapt *m_pMyObject;

for(;;)
{ 
uint8_t buf[BUFSIZE];
    ssize_t r;
m_pMyObject->RecordSound(argc,argv,s_in,ss,s_out,buf,r);
m_pMyObject->PlaybackSound(argc,argv,s_out,ss,buf,r);
}   
return 0;
} 
```

C代码：

```
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <fcntl.h>

#include <pulse/simple.h>
#include <pulse/error.h>

#define BUFSIZE 32

int main(int argc, char*argv[]) {

/* The Sample format to use */
static const pa_sample_spec ss = {
    .format = PA_SAMPLE_S16LE,
    .rate = 44100,
    .channels = 2
};

pa_simple *s_in, *s_out = NULL;
int ret = 1;
int error;

/* Create a new playback stream */
if (!(s_out = pa_simple_new(NULL, argv[0], PA_STREAM_PLAYBACK, NULL, "playback", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
    goto finish;
}

  if (!(s_in = pa_simple_new(NULL, argv[0], PA_STREAM_RECORD, NULL, "record", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
    goto finish;
}

for (;;) {
    uint8_t buf[BUFSIZE];
    ssize_t r;

#if 1
    pa_usec_t latency;

    if ((latency = pa_simple_get_latency(s_in, &error)) == (pa_usec_t) -1) {
        fprintf(stderr, __FILE__": pa_simple_get_latency() failed: %s\n", pa_strerror(error));
        goto finish;
    }

    fprintf(stderr, "In:  %0.0f usec    \r\n", (float)latency);

    if ((latency = pa_simple_get_latency(s_out, &error)) == (pa_usec_t) -1) {
        fprintf(stderr, __FILE__": pa_simple_get_latency() failed: %s\n", pa_strerror(error));
        goto finish;
    }

    fprintf(stderr, "Out: %0.0f usec    \r\n", (float)latency);
 #endif

    if (pa_simple_read(s_in, buf, sizeof(buf), &error) < 0) {

        fprintf(stderr, __FILE__": read() failed: %s\n", strerror(errno));
        goto finish;
    }
printf("Buffer :::: %d\n",buf[0]);

    /* ... and play it */
    if (pa_simple_write(s_out, buf, sizeof(buf), &error) < 0) {
        fprintf(stderr, __FILE__": pa_simple_write() failed: %s\n", pa_strerror(error));
        goto finish;
    }
}

/* Make sure that every single sample was played */
if (pa_simple_drain(s_out, &error) < 0) {
    fprintf(stderr, __FILE__": pa_simple_drain() failed: %s\n", pa_strerror(error));
    goto finish;
}

ret = 0;

finish:

if (s_in)
    pa_simple_free(s_in);
if (s_out)
    pa_simple_free(s_out);

return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:50:17.497

在 RecordSound 和 PlaybackSound 中，您使用 pa_simple_new 初始化临时变量。一旦函数返回，这个值就会丢失，并且你将 NULL 传递给下一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-19T18:53:37.690

我建议打开编译器检查并修复编译器在此代码上发出的​​所有错误和警告。

首先，m_pMyObject 从未初始化，因此在调用 RecordSound 时使用它意味着将未初始化的值作为“this”传递给方法。这通常是一件坏事。

在 RecordSound 和 PlaybackSound 中，您使用 size(buf) 来告诉库要读取/写入多少字节。参数 buf 是一个指向 uint8_t 的指针。所以编译器会填入指针的大小（在 64 位机器上可能是 8）。在这些方法中，您应该使用您拥有的尺寸参数。在调用中，将 sizeof(buf) 传递给该参数。

我不知道库在内存/资源耗尽之前可以创建多少个流。对 RecordSound 的每次调用都会创建一个录制流，而 PlaybackSound 会创建一个播放流。这些流永远不会被释放。

综上所述，如果使用未初始化的值调用 RecordSound 方法不会导致程序崩溃，它将创建一个录制流并录制几个样本，然后它将创建一个播放流并播放这两个样本。然后它将尝试再次执行所有这些操作。

# javascript - jQuery同位素过滤器没有项目？

> ID：14596312
> 
> 赞同：5
> 
> 时间：2013-01-30T03:43:25.357
> 
> 标签：javascript, jquery, jquery-isotope

我正在使用同位素过滤具有多个过滤器的列表，其中可能基于某些过滤器的组合不会显示任何项目。在这种情况下，我想向用户显示一条消息，根据他们的过滤器参数，不存在任何结果。我将如何解决这个问题，同位素是否有内置的东西来处理这个问题？这是一个jsfiddle示例。如果没有项目匹配过滤器集，则应显示...

[http://jsfiddle.net/cssguru/e4vA3/](http://jsfiddle.net/cssguru/e4vA3/)

```
 $(function(){

   var $container = $('#container'),
      $checkboxes = $('#filters input');

   $container.isotope({
    itemSelector: '.item'
   });

   $checkboxes.change(function(){
    var filters = [];
    // get checked checkboxes values
    $checkboxes.filter(':checked').each(function(){
      filters.push( this.value );
    });
    // ['.red', '.blue'] -> '.red, .blue'
    filters = filters.join('');
    $container.isotope({ filter: filters });
   });

   }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T15:37:21.893

您可以查看有多少同位素项目没有添加“同位素隐藏”类。当结果为 0 时，这意味着您的所有元素都将被隐藏，您可以触发某些事情发生。您可以使用回调函数，例如 reLayout 每次同位素被过滤时运行。

```
function noResultsCheck() {
    var numItems = $('.item:not(.isotope-hidden)').length;
    if (numItems == 0) {
        //do something here, like turn on a div, or insert a msg with jQuery's .html() function
        alert("There are no results");
    }
} 
```

将此添加到您的更改功能：

```
$container.isotope( 'reLayout', noResultsCheck ); 
```

[http://jsfiddle.net/xvU8D/](http://jsfiddle.net/xvU8D/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-05T04:51:21.030

只是为了补充 nspace 所说的......

您*不需要*添加“reLayout”回调，您可以在您已经拥有的代码中进行回调，`$container.isotope({ filter: filters });`如下所示：

```
$container.isotope({ filter: filters }, function noResultsCheck() {
    var numItems = $('.item:not(.isotope-hidden)').length;
        if (numItems == 0) {
        alert("There are no results");
    }
}); 
```

[http://jsfiddle.net/xvU8D/33/](http://jsfiddle.net/xvU8D/33/)

这取自此处的文档：http: [//isotope.metafizzy.co/docs/introduction.html#script](http://isotope.metafizzy.co/docs/introduction.html#script) - 对“回调”进行页面搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-20T14:39:29.497

刚刚在 isotopes github issue-page 找到了一个很好的解决方案。

* * *

同位素 v1：

```
$container.isotope({ filter: '.my-crazy.awesome.filter' });

if ( !$container.data('isotope').$filteredAtoms.length == 0) {
    // do stuff when no element was found
} 
```

[请参阅同位素帮助 - 访问实例](https://isotope.metafizzy.co/v1/docs/help.html#accessing_the_instance)

* * *

同位素 v2

```
if ( !$container.data('isotope').filteredItems.length == 0) {
    // do stuff when no element was found
} 
```

[请参阅同位素 - 过滤项目](https://isotope.metafizzy.co/faq.html#filtered-items)

* * *

[在此处查看完整帖子](https://github.com/metafizzy/isotope/issues/93)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-26T14:08:43.433

此外，要在同位素 2 中工作，您必须检查它是否可见/不可见，而不是让同位素隐藏类：

像这样

```
var numItems = $('.item:visible').length; 
```

# django - Django，TypeError：decode() 参数 1 必须是字符串，而不是无

> ID：14596322
> 
> 赞同：10
> 
> 时间：2013-01-30T03:44:24.840
> 
> 标签：django

我正在学习 Django，这是我的第一个项目。我正在本教程中处理这个项目。[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

当我运行 syncdb 命令时。表已创建。然后它问我是否要添加一个超级用户，我说是的。然后收到以下错误消息。我在stackoverflow上发现了一些类似的问题，但仍然无法解决。

```
(django)feelexit@ubuntu:~/.virtualenvs/testDjango$ ./manage.py syncdb
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): y
Please enter either "yes" or "no": yes
Traceback (most recent call last):
  File "./manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 73, in create_superuser
    call_command("createsuperuser", interactive=True, database=db)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/home/feelexit/.virtualenvs/django/local/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
TypeError: decode() argument 1 must be string, not None 
```

**更新：**我使用的是 ubuntu 12.04。我找到了一个可能的解决方案。将以下代码添加到 manage.py。但是旁边有一个免责声明“我不知道这是否会导致任何负面影响。”。我正在寻找一种更好的方法来解决它。

```
import os
os.environ.setdefault('LANG','en_US') 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T15:49:51.940

这是 Django 代码中的一个错误（请参阅[django 错误报告](https://code.djangoproject.com/ticket/16017)）。

票证中解决此问题的常用方法是导出您的 shell`LANG`环境变量。

```
export LANG="en_US.UTF-8" 
```

那个在 SuSE 设置上对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-06T20:54:24.347

出口 LANG="en_US.UTF-8"

对我有用，但是通过编辑 manage.py 来做到这一点，django-admin 创建了一个与以前不同的目录结构，我正在将 settings.py、urls.py 等文件移出子文件夹。

编辑： os.environ["LANG"]="en_US.UTF-8" （在导入操作系统之后）

我使用 sys.append 添加路径以避免导入错误。

# css - 表格主体不占整个表格宽度

> ID：14596325
> 
> 赞同：6
> 
> 时间：2013-01-30T03:45:10.193
> 
> 标签：css, html, twitter-bootstrap

我正在使用 twitter bootstrap 进行响应式设计，其中包含一个包含四列的表。我希望表格列具有相同的宽度，所以我设置`td width`为 25%。

我认为表格行将从表格继承它们的大小，然后表格单元格将是该大小的四分之一。当设备宽度为 768 像素或更大时，这似乎有效。当设备宽度较小时，行的大小基于最大单元格中的文本，而不是父表的大小。

我在下面包含了一些示例代码，不同元素上的背景颜色以突出显示错误（通过水平调整窗口大小变得明显）。错误以黄色突出显示（基础表颜色可见）。

现场示例： http: [//pastehtml.com/view/cqrwl31z2.html](http://pastehtml.com/view/cqrwl31z2.html)

我已经在 Chrome 和 Safari 中进行了测试。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Table Test</title>
    <!-- Bootstrap -->
    <link href="http://www.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet" media="screen">
    <script type="text/javascript" src="http://www.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        td, th { width: 25% !important; }
        table { background-color: yellow; }
        tr { background-color: gray; }
        th { background-color: aqua; }
        td:nth-child(1) { background-color: red; }
        td:nth-child(2) { background-color: green; }
        td:nth-child(3) { background-color: blue; }
        td:nth-child(4) { background-color: purple; }
    </style>
  </head>
  <body>
    <div class="container">
        <h1>Hello, world!</h1>
        <div class="row">       
            <table class="span12">
                <thead>
                    <tr>
                        <th>A</th>
                        <th>B</th>
                        <th>C</th>
                        <th>D</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                    <tr>
                </tbody>
            </table>
        </div>

        <div class="row">
            <table class="span12">
                <thead>
                    <tr>
                        <th>Longer Table</th>
                        <th>Headers In</th>
                        <th>This</th>
                        <th>Table</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                    <tr>
                </tbody>
            </table>
        </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T04:08:55.393

```
[class*="span"], .uneditable-input[class*="span"], 
.row-fluid [class*="span"] {
   display: table;
} 
```

* * *

也许在表格上使用网格类不是一个好主意。相反，在包装器 div 上使用 .span12 并将表设置为`width: 100%`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T04:19:58.963

在你的桌子上放一个宽度。

[http://jsfiddle.net/nEeKQ/4/](http://jsfiddle.net/nEeKQ/4/)

```
table {
background-color: yellow;
width:100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-02T21:35:32.893

确保所有父容器的宽度都设置为`100%`，除了表格具有属性`width="100%"`或`style="width:100%"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:35:52.663

当您缩放或设备宽度变得大于指定宽度时，它没有空间可以扩展，因为宽度以 % 而不是 px 给出，因此克服此问题的最佳方法是使用

`min-width:100px`

td 或 th ，这将是最小宽度即使设备宽度超过它也需要。

# php - 如何使用 javascript 添加和删除文本框，然后将数据发送到 php？

> ID：14596327
> 
> 赞同：-3
> 
> 时间：2013-01-30T03:45:29.023
> 
> 标签：php, javascript, jquery

如何创建动态添加/删除文本框并将所有数据发送到 PHP？进行动态添加和删除很好，但是如何将其存储在 PHP 中？

文本框的数量会有所不同，那么如何将它们分别存储在 php 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:17:58.083

你可以用 JQuery 和 PHP 做到这一点

这是我完整的[工作示例](https://www.iranthajayasekara.com/blog/jquery-dynamic-table-row-inserter.html)。那里有代码。

# xml - 替换各种 XML 文件中的字符串

> ID：14596328
> 
> 赞同：2
> 
> 时间：2013-01-30T03:45:30.067
> 
> 标签：xml, xslt, xquery, marklogic

鉴于以下 xml 文件的结构和内容可以更改：

```
<something>
  <parent>
    <child>Bird is the word 1.</child>
    <child>Curd is the word 2.</child>
    <child>Nerd is the word 3.</child>
  </parent>
  <parent>
    <child>Bird is the word 4.</child>
    <child>Word is the word 5.</child>
    <child>Bird is the word 6.</child>
  </parent>
</something> 
```

我想要一种使用 xquery（甚至 xslt）的方法来用另一个替换提供的字符串的所有实例。例如，将单词“Bird”替换为“Dog”。因此结果将是：

```
<something>
  <parent>
    <child>Dog is the word 1.</child>
    <child>Curd is the word 2.</child>
    <child>Nerd is the word 3.</child>
  </parent>
  <parent>
    <child>Dog is the word 4.</child>
    <child>Word is the word 5.</child>
    <child>Dog is the word 6.</child>
  </parent>
</something> 
```

我不知道这是否可能。我所做的每一次尝试都消除了标签。我什至试过这个例子（[http://geekswithblogs.net/Erik/archive/2008/04/01/120915.aspx](http://geekswithblogs.net/Erik/archive/2008/04/01/120915.aspx)），但它是针对文本而不是整个文档。

请帮忙！

**更新**

我尝试使用 xslt 2.0 建议运行，因为它似乎最适合。在尝试为我的情况修改它时，我一直在干。

我想传入一个 xml 参数来定义替换。因此，像这样修改 xslt：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:param name="list">
<words>
  <word>
        <search>Bird</search>
    <replace>Dog</replace>
  </word>
      <word>
        <search>word</search>
    <replace>man</replace>
  </word>
</words>
  </xsl:param>

<xsl:template match="@*|*|comment()|processing-instruction()">
  <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="text()">
  <xsl:param name="chosen" select="." />
<xsl:for-each select="$list//word">
  <xsl:variable name="search"><xsl:value-of select="search" /></xsl:variable>
  <xsl:analyze-string select="$chosen" regex="{$search}">
    <xsl:matching-substring><xsl:value-of select="replace" /></xsl:matching-substring>
    <xsl:non-matching-substring><xsl:value-of select="$chosen"/></xsl:non-matching-substring>
  </xsl:analyze-string>
</xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

结果是：

```
<something>
  <parent>
    <child>Bird is the word 1.Bird is the word 1.</child>
    <child>Curd is the word 2.Curd is the word 2.</child>
    <child>Nerd is the word 3.Nerd is the word 3.</child>
  </parent>
  <parent>
    <child>Bird is the word 4.Bird is the word 4.</child>
    <child>Word is the word 5.Word is the word 5.</child>
    <child>Bird is the word 6.Bird is the word 6.</child>
  </parent>
</something> 
```

不用说，但是，我不希望它重复并且也不正确。

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T05:55:32.963

如果 XQuery 和 XSLT 都是一个选项，那么您*可能*正在使用 XSLT 2.0 处理器。如果是这样，这应该工作：

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="search" select="'Bird'"/>
    <xsl:param name="replace" select="'Dog'"/>

    <xsl:template match="@*|*|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:analyze-string select="." regex="{$search}">
            <xsl:matching-substring><xsl:value-of select="$replace"/></xsl:matching-substring>
            <xsl:non-matching-substring><xsl:value-of select="."/></xsl:non-matching-substring>
        </xsl:analyze-string>
    </xsl:template>

</xsl:stylesheet> 
```

使用问题中的 XML 输入，此 XSLT 生成以下输出：

```
<something>
   <parent>
      <child>Dog is the word 1.</child>
      <child>Curd is the word 2.</child>
      <child>Nerd is the word 3.</child>
   </parent>
   <parent>
      <child>Dog is the word 4.</child>
      <child>Word is the word 5.</child>
      <child>Dog is the word 6.</child>
   </parent>
</something> 
```

注意：在创建输出时不会更改任何元素/属性/注释/处理指令。

* * *

**编辑**

你得到重复的原因是因为你`xsl:for-each`正在循环这两个`word`元素。如果你有 3，它将输出文本 3 次。

您只需要稍微不同地构建正则表达式：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:param name="list">
        <words>
            <word>
                <search>Bird</search>
                <replace>Dog</replace>
            </word>
            <word>
                <search>word</search>
                <replace>man</replace>
            </word>
        </words>
    </xsl:param>

    <xsl:template match="@*|*|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:variable name="search" select="concat('(',string-join($list/words/word/search,'|'),')')"/>
        <xsl:analyze-string select="." regex="{$search}">
            <xsl:matching-substring>
                <xsl:value-of select="$list/words/word[search=current()]/replace"/>
            </xsl:matching-substring>
            <xsl:non-matching-substring>
                <xsl:value-of select="."/>
            </xsl:non-matching-substring>
        </xsl:analyze-string>
    </xsl:template>
</xsl:stylesheet> 
```

这将产生：

```
<something>
   <parent>
      <child>Dog is the man 1.</child>
      <child>Curd is the man 2.</child>
      <child>Nerd is the man 3.</child>
   </parent>
   <parent>
      <child>Dog is the man 4.</child>
      <child>Word is the man 5.</child>
      <child>Dog is the man 6.</child>
   </parent>
</something> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T05:31:54.793

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:param name="findText" select="'Bird'" />
  <xsl:param name="replaceText" select="'Dog'" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:call-template name="string-replace-all">
      <xsl:with-param name="text" select="." />
      <xsl:with-param name="replace" select="$findText" />
      <xsl:with-param name="by" select="$replaceText" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="string-replace-all">
    <xsl:param name="text" />
    <xsl:param name="replace" />
    <xsl:param name="by" />
    <xsl:choose>
      <xsl:when test="contains($text, $replace)">
        <xsl:value-of select="substring-before($text,$replace)" />
        <xsl:value-of select="$by" />
        <xsl:call-template name="string-replace-all">
          <xsl:with-param name="text"
          select="substring-after($text,$replace)" />
          <xsl:with-param name="replace" select="$replace" />
          <xsl:with-param name="by" select="$by" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

请注意，我已将“Bird”和“Dog”指定为参数的默认值，以便可以轻松演示结果，但应该可以从外部代码传入这些参数的值。在您的示例输入上运行时，这会产生：

```
<something>
  <parent>
    <child>Dog is the word 1.</child>
    <child>Curd is the word 2.</child>
    <child>Nerd is the word 3.</child>
  </parent>
  <parent>
    <child>Dog is the word 4.</child>
    <child>Word is the word 5.</child>
    <child>Dog is the word 6.</child>
  </parent>
</something> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:21:16.873

我认为诀窍在于了解文档模型与字符串解析不同。一旦你有了它，这个用例在 XQuery 或 XSLT 中就足够简单了。您自己的喜好将是一个品味问题。这是 XQuery 中的一种粗略方法。一个更完善的解决方案可能使用递归函数调用，ala [http://docs.marklogic.com/4.1/guide/app-dev/typeswitch](http://docs.marklogic.com/4.1/guide/app-dev/typeswitch)

```
let $in := <something>
  <parent>
    <child>Bird is the word 1.</child>
    <child>Curd is the word 2.</child>
    <child>Nerd is the word 3.</child>
  </parent>
  <parent>
    <child>Bird is the word 4.</child>
    <child>Word is the word 5.</child>
    <child>Bird is the word 6.</child>
  </parent>
</something>
return element { node-name($in) } {
  $in/@*,
  for $n in $in/node()
  return typeswitch($n)
  case element(parent) return element { node-name($n) } {
    for $c in $n/node()
    return typeswitch($c)
    case element(child) return element { node-name($c) } {
      replace($c, 'Bird', 'Dog') }
    default return $c }
  default return $n } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T06:14:59.510

这是另一个 XQuery 选项...

```
declare function local:searchReplace($element as element()) {
  element {node-name($element)}
    {$element/@*,
     for $child in $element/node()
        return 
            if ($child instance of element())
            then
                local:searchReplace($child)
            else 
                replace($child,'Bird','Dog')
    }
};

local:searchReplace(/*) 
```

这也会产生与我的 XSLT 2.0 答案相同的输出：

```
<something>
      <parent>
            <child>Dog is the word 1.</child>
            <child>Curd is the word 2.</child>
            <child>Nerd is the word 3.</child>
      </parent>
      <parent>
            <child>Dog is the word 4.</child>
            <child>Word is the word 5.</child>
            <child>Dog is the word 6.</child>
      </parent>
</something> 
```

# android - 替代 setSelection(int) 或如何更准确地设置滚动位置

> ID：14596333
> 
> 赞同：0
> 
> 时间：2013-01-30T03:46:02.767
> 
> 标签：android

我有两个网格视图，我需要同步它，当我滚动一个时，第二个必须滚动相同。我这样做了：

```
gvMain1.setOnScrollListener(new OnScrollListener(){
            @Override public void onScroll(AbsListView arg0, int arg1, int arg2, int arg3) 
            {
                gvMain2.setSelection(arg1);
            }
            @Override public void onScrollStateChanged(AbsListView arg0, int arg1) {}
            }); 
```

但是当我滚动时，我得到接近一行高度差的增量，我认为这是因为第一个网格移动，但不足以切换到下一个位置。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:58:59.143

这并不容易。我尝试过这个并最终放弃了。GridView 不支持 ListView 支持的所有东西，这就是让这变得如此困难的原因。您可以打开 android ListView 源代码并尝试复制它们的功能。或者，如果适合您的需要，则只需切换到使用列表视图。

对于gridview，您可以做一些魔术来获得位置。请参阅[如何从 GridView 获取滚动位置？](https://stackoverflow.com/questions/6125013/android-how-to-get-scroll-position-from-gridview)

对于网格视图，我从来没有找到真正让它滚动到正确位置的方法。它只会逐项滚动。

有关列表视图，请参阅这篇文章： [Android 在 ListView 中获取准确的滚动位置](https://stackoverflow.com/questions/10808387/android-getting-exact-scroll-position-in-listview)

这里也有一篇关于这个主题的好帖子：[Android: Synchronized scrolling of two different views](https://stackoverflow.com/questions/4591083/android-synchronized-scrolling-of-two-different-views)

# jsf - 如何禁用 Primefaces 输入文本中的特殊字符和字母？

> ID：14596334
> 
> 赞同：3
> 
> 时间：2013-01-30T03:46:42.970
> 
> 标签：jsf, jsf-2, primefaces

我想要一个`<p:inputText>`只接受数字而不接受任何其他字符的。是否有可能让用户只能输入数字而其他字符被禁用？如果是这样，请让我知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:16:06.570

最后，`<h:inputText>`and`<p:inputText>`组件将渲染一个`<input type="text" />`HTML 组件。您唯一需要做的就是应用 JavaScript 方法来限制文本中允许的字符。

知道了这一点，您可以使用问题[HTML Text Input allow only Numeric input](https://stackoverflow.com/q/469357/1065197)中提供的任何方法。我将根据帖子的第二个答案向您展示一个示例：

```
<h:head>
    <script type="text/javascript">
        //<![CDATA[
        var numericRegex = /\d+\.?\d*/;
        function validateNumericInput(evt, text) {
            var theEvent = evt || window.event;
            var key = theEvent.keyCode || theEvent.which;
            key = String.fromCharCode( key );
            if (key === '.') {
                theEvent.returnValue = (text.indexOf(key) < 0);
            } else {
                var regex = /\d/;
                if( !regex.test(key) ) {
                    theEvent.returnValue = false;
                    if(theEvent.preventDefault) theEvent.preventDefault();
                }
            }
        }
        //]]>
    </script>
</h:head>
<h:body>
    Try to write a non-numeric
    <p:inputText onkeypress="validateNumericInput(event, this.text)" />
</h:body> 
```

请注意，此示例仅允许写入正实数，只需更改 JavaScript 方法以定义不同的行为。

# excel - IMessageFilter 无法处理 0x800AC472 (VBA_E_IGNORE) 是否使实现 IMessageFilter 无关紧要？

> ID：14596337
> 
> 赞同：7
> 
> 时间：2013-01-30T03:46:53.507
> 
> 标签：excel, c#-4.0, office-interop, excel-interop

从[msdn](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/9168f9f2-e5bc-4535-8d7d-4e374ab8ff09/)看来，它似乎`IMessageFilter`不能处理所有异常，例如，在某些时候，办公应用程序“暂停”它们的对象模型，此时它不能被调用并抛出：`0x800AC472 (VBA_E_IGNORE)`

为了解决这个问题，您必须将您的调用置于循环中并等待它成功：

```
while(true)
{
    try
    {
        office_app.DoSomething();
        break;
    }
    catch(COMException ce)
    {
        LOG(ce.Message);
    }
} 
```

我的问题是：如果每次调用办公应用程序的对象模型都需要这个样板代码，那么实施有什么意义`IMessageFilter`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T08:29:14.280

是的，这两种机制是独立的。IMessageFilter 是一种通用的 COM 机制，用于处理已经紧张且在 60 秒内无法处理呼叫的 COM 服务器。VBE_E_IGNORE 错误高度特定于 Excel，当它处于属性浏览器暂时禁用的状态时会发生。将其视为一种模态状态，当 Excel 需要执行必须完成的关键操作才能再次处理进程外调用时，特意将其打开。如果你愿意的话，一把锁。它与时间无关，如 IMessageFilter，而纯粹与执行状态有关。VSTO 团队的 Geoff Darst 在此[MSDN 论坛主题](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/9168f9f2-e5bc-4535-8d7d-4e374ab8ff09/)中提供了一些背景信息。

当然，必须编写这种重试循环是很可怕的。鉴于这是一个执行状态问题，并假设您正在与 Excel 进行互操作，而用户也没有操作该程序，那么应该有一种方法可以绕过这个问题。如果您从程序中的工作线程中获取 Excel，请考虑检查代码中线程之间的交互，以确保您不会创建线程大致同时发出 Excel 调用的情况。

# c++ - 生成特定的 32 位二进制序列

> ID：14596341
> 
> 赞同：1
> 
> 时间：2013-01-30T03:47:04.467
> 
> 标签：c++, c, algorithm, binary, hex

我需要生成这样一个 32 位二进制序列：它有八个“1”，其余位为“0”。所以用十六进制写，一些序列将是这样的：

```
000000FF
000001FE
000001FD
000001FB
000001F7
... 
```

问题是从 32 中选择 8，所以有 10518300 种组合。换句话说，像我的例子一样，有 10518300 个序列。如果您给我任何建议或算法来生成我想要的序列，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T04:01:21.573

这个问题是关于零和一的排列。最容易编写代码的解决方案是使用[`next_permutation`](http://www.cplusplus.com/reference/algorithm/next_permutation/)和`vector<bool>`.

准备一个按字典顺序排列最早的向量（那些在后面）。运行`next_permutation`直到它返回`false`。这是一个演示代码，它生成所有设置为三位的 8 位序列：

```
vector<bool> data(8, false);
data[7] = data[6] = data[5] = true;
do {
    for (int i = 0 ; i != data.size() ; i++) {
        cout << (int)data[i];
    }
    cout << endl;
} while (next_permutation(data.begin(), data.end())); 
```

这是[一个带有运行演示的 ideone 链接](http://ideone.com/qydO7X)。

您的程序将需要一个 32 位向量，其中最后八个元素设置为`1`. 您需要将它们转换为 32-bit`int`并将它们存储在输出容器中，而不是打印序列的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:50:03.033

设计：

1.  定义组合的顺序，使一个在前，一个在最后，并且每个组合在该顺序中都有一个位置。

2.  编写一个算法，根据您所做的排序将一个序列转换为下一个序列。

3.  在代码中实现该算法。

执行：

1.  根据您的顺序将序列设置为第一个序列。

2.  输出当前序列。

3.  如果这是最后一个序列停止。

4.  使用您实现的算法转到下一个序列。

5.  转到第 2 步。

# iphone - iOS UIImageView 没有动画

> ID：14596342
> 
> 赞同：0
> 
> 时间：2013-01-30T03:47:07.723
> 
> 标签：iphone, ios, objective-c, uiimageview, caanimation

我正在制作一个应用程序并有一个当用户点击按钮时触发的 IBAction。继承人的代码：

```
- (IBAction)expand:(id)sender{
UIImage *statusImage = [UIImage imageNamed:@"status.png"];
[activityImageView setImage:statusImage];

CATransform3D rotationTransform = CATransform3DMakeRotation(1.0f * M_PI, 0, 0, 1.0);
CABasicAnimation* rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];

rotationAnimation.toValue = [NSValue valueWithCATransform3D:rotationTransform];
rotationAnimation.duration = 0.25f;
rotationAnimation.cumulative = YES;
rotationAnimation.repeatCount = 1;

[activityImageView.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
[[NSUserDefaults standardUserDefaults]setFloat:self.conditionsImageView.bounds.size.height forKey:@"rect"];
[[NSUserDefaults standardUserDefaults]setFloat:self.conditionsImageView.bounds.origin.y forKey:@"y"];
NSURL *uuu = [NSURL URLWithString:@"http://api.wunderground.com/api/3c158b3b3cd6ce90/animatedradar/q/autoip.gif?newmaps=1&timelabel=1&smooth=1&timelabel.y=10&num=8&delay=50&width=640&height=960"];
self.conditionsImage = [UIImage animatedImageWithAnimatedGIFURL:uuu duration:8];
self.conditionsImageView.bounds = CGRectMake(0, 0, 320, self.view.bounds.size.height + 20);
self.conditionsImageView.image = conditionsImage;
exp.hidden = 0;
exp1.hidden = 1;

} 
```

看，ImageView activityImageView 不会显示，直到从该 url 加载另一个图像完成并且它没有动画。有人看到任何可能导致此问题的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:54:41.183

我假设您正在使用[我的`+[UIImage animatedImageWithAnimatedGIFURL:duration:]`](https://github.com/mayoff/uiimage-from-animated-gif/blob/master/uiimage-from-animated-gif/UIImage%2BanimatedGIF.m).

这种方法是同步的。在从 URL 加载所有数据之前，它不会返回。因此，当您在主线程上调用它时，您将阻塞主线程，从而阻止您的其他动画启动（并阻止任何用户交互）。

而不是使用`+[UIImage animatedImageWithAnimatedGIFURL:duration:]`，使用`+[NSURLConnection connectionWithRequest:delegate:]`或`+[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`在后台从 URL 加载数据。当它全部加载后，然后用于`+[UIImage animatedImageWithAnimatedGIFData:duration:]`创建图像。

# c - c客户端和telnet上的部分页面返回

> ID：14596344
> 
> 赞同：0
> 
> 时间：2013-01-30T03:47:21.640
> 
> 标签：c, httprequest, telnet

我正在尝试通过我自己的客户端请求网页，但网页返回的内容缺失。当我尝试 Telnet 页面请求时也会发生同样的情况。我已尝试使用此处找到的代码和剥离版本（两者都返回相同的结果）：

[http://coding.debuntu.org/c-linux-socket-programming-tcp-simple-http-client](http://coding.debuntu.org/c-linux-socket-programming-tcp-simple-http-client)

我请求的网页是下面的网页，可以从浏览器轻松访问，但是当我尝试使用自己的客户端访问它时，我在 Telnet 和代码中都丢失了大部分内容。我玩过缓冲区大小，一旦这产生了稍微大一点的结果，但在第二次运行时，内容就消失了。

[http://www.asx.com.au/asx/research/companyInfo.do?by=asxCode&asxCode=MQG](http://www.asx.com.au/asx/research/companyInfo.do?by=asxCode&asxCode=MQG)

如何发出页面请求并获取完整页面源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:20:53.960

我只是尝试使用以下请求行请求页面：

```
GET /asx/research/companyInfo.do?by=asxCode&asxCode=MQG HTTP/1.0
UserAgent: Myself 
```

我得到的结果是：

```
HTTP/1.0 200 OK
Age: 36
Date: Wed, 30 Jan 2013 07:12:03 GMT
Content-Length: 38060
Content-Type: text/html;charset=ISO-8859-1
Server: Apache
Content-Language: en 
```

也包括浏览器获取的整个页面内容。我想您找不到您要查找的信息的问题来自于页面包含动态（JavaScript）部分，这些部分在页面显示在浏览器中后立即加载更多信息。

如果您想从该页面获取特定信息，您必须剖析页面内容分析 JavaScript 部分并对接口进行逆向工程这些部分如何检索信息。

旁注：如果您负担得起（就空间和复杂性而言），请使用[curl](http://curl.haxx.se/)之类的库，该库已经涵盖了您在实现 HTTP 时必须注意的许多问题。

# php - 将代码输出为字符串

> ID：14596349
> 
> 赞同：0
> 
> 时间：2013-01-30T03:47:54.817
> 
> 标签：php

我想将以下代码的输出转换为 PHP 中的字符串。

```
if( Is_Array( $Players ) ){
   foreach( $Players as $Player ) {
      echo "<tr>";echo "<td>";
      echo htmlspecialchars( $Player[ 'Name' ] );
      echo "</td>";
      echo "<td>";
      echo htmlspecialchars( $Player[ 'TimeF' ] );
      echo "</td>";
      echo "</tr>";
   }
} else {
   echo "<tr><td colspan='2' >No players in da house!</td></tr>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:49:18.683

`echo`交换你所有的with实例`$string.=`

# c# - C# PHP 连接洪水保护

> ID：14596352
> 
> 赞同：0
> 
> 时间：2013-01-30T03:48:01.043
> 
> 标签：c#, php, mysql

假设我在 C# 中创建了一个反馈表单。它将反馈发送到我的 PHP 页面，然后我的 PHP 页面将其添加到我的 MySQL 数据库中。代码：

```
private void PostFeed(string Params)
{
    using (WebClient wc = new WebClient())
    {
        wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        wc.Headers["Accept"] = @"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        wc.Headers["Accept-Language"] = @"en-US,en;q=0.5";
        string HtmlResult = wc.UploadString("http://website/feedtest.php", "POST", Params);
        Console.WriteLine(HtmlResult);
    }
} 
```

在我的 PHP 上，我的代码类似于：

```
$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$desc = $_REQUEST['description'];
connect
post result...
close connection 
```

我的问题是：有没有办法防止洪水？我知道任何人都可以通过连续发送反馈甚至创建每秒发送 1000 个帖子请求的第三方应用程序来发送垃圾邮件/泛滥它。我正在考虑在 PHP 端实现某种检查，例如：如果来自 c# 应用程序的连接密码匹配，则继续，如果不匹配，则退出。

基本上，我不希望人们利用反馈方法向我发送垃圾邮件。

任何人都可以提出一种方法吗？还是我什至不应该担心这个？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:56:12.270

一种典型的技术是每 X 单位时间限制进行​​某种提交，其中您在表中有一`last_submitted_at`列与某种标识符相关联。例如，如果您有一个相当强大的用户注册系统，您可能会将其与用户相关联，或者如果您没有，您可能会将其与 IP 相关联。

如果您尝试投票、发帖或作为问题过于频繁，这是 Stack Overflow 使用的系统。它们中的每一个都有一个单独的计时器，它可能会转换为`last_X_at`数据库中某处的单独列。

如果最后一次小于某个阈值，则显示错误而不是接受提交。

# wpf - WPF：改变 使用后面的代码

> ID：14596361
> 
> 赞同：0
> 
> 时间：2013-01-30T03:49:08.893
> 
> 标签：wpf, xaml, window

我正在尝试将一个孩子包含在一个中的`Window`父母（另一个`Window`）中`Page`，当我在 XAML 中使用时，我知道我可以使用这个：

```
<views:ParentView Width="550" Height="250" /> 
```

但是，是否可以从以下位置更改 XAML 代码：

```
<views:ParentView Width="550" Height="250"/> 
```

进代码后面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:15:29.100

在 XAML 中，您可以使用`StackPanel`：

```
 <StackPanel x:Name="myStackPanel" /> 
```

并在以下代码后面的代码中向主视图添加新控件：

```
 myStackPanel.Children.Add(new ParentView() { Width = 550, Height = 250 }); 
```

# ruby-on-rails - 使用 FancyBox 2 在 Rails 应用程序中尝试登录失败后保持模式窗口打开

> ID：14596366
> 
> 赞同：1
> 
> 时间：2013-01-30T03:49:47.913
> 
> 标签：ruby-on-rails, devise, fancybox-2, rails-admin

我有一个使用 rails_admin、devise 和 cancan 运行的基本 Rails 应用程序。当用户单击客户端登录链接时，我正在使用 FancyBox 2 显示灯箱类型的登录模式窗口。除了当用户输入不正确的凭据时，它的行为与预期相同. 我有两个问题：

1.  如果用户提交了不正确的凭据，如何使 FancyBox 2 模态窗口继续显示，并显示提示他们需要在模态窗口中重新输入凭据的 Flash 消息？
2.  除非它位于 FancyBox 2 模式窗口中，否则我如何阻止用户访问 /users/sign_in 页面？现在，如果用户输入：www.example.com/users/sign_in，那么他们将进入完整页面进行登录。理想情况下，我希望它能够触发 FancyBox 2 模态窗口。

以下是相关文件：

应用程序/视图/布局/appliction.html.erb

```
<!DOCTYPE html>
<html>
<head>
   <title>Test App</title>
   <%= stylesheet_link_tag    "application", :media => "all" %>  
   <%= stylesheet_link_tag    "jquery.fancybox.css", :media => "all" %> 
   <%= javascript_include_tag "application" %>
   <%= javascript_include_tag "jquery.fancybox.js" %>
   <%= csrf_meta_tags %>
</head>
<body>

   <%= flash[:notice] %>
   <%= flash[:alert] %>

   <%= yield %>

<script>
   $(document).ready(function() {
      $('.fancybox').fancybox({
         'onStart': function() {
            $('#fancybox-outer').css({'background':'transparent'});
            $('#fancybox-bg-n,#fancybox-bg-ne,#fancybox-bg-e,#fancybox-bg-se,#fancybox-bg-s,#fancybox-bg-sw,#fancybox-bg-w,#fancybox-bg-nw')
               .css({'background-image':'none'});
         }
      })
   });
</script>

</body>
</html> 
```

app/views/welcome/index.html.erb (root_path)

```
<h1>Test App</h1>

<% if user_signed_in? %>
<a href="app">Dashboard</a>
<% else %>
<a class="fancybox fancybox.ajax" href="users/sign_in">Client Login</a>
<% end %> 
```

app/views/devise/sessions/new.html.erb

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
   <div><%= f.label :email %><br />
   <%= f.email_field :email, :autofocus => true %></div> 

   <div><%= f.label :password %><br />
   <%= f.password_field :password %></div>

   <% if devise_mapping.rememberable? -%>
      <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
   <% end -%>

   <div><%= f.submit "Sign in" %></div>
   <% end %>

<%= render "devise/shared/links" %> 
```

路线.rb

```
TestApp::Application.routes.draw do
   get "welcome/index"
   resources :containers
   resources :scales
   devise_for :users
   mount RailsAdmin::Engine => '/app', :as => 'rails_admin'
   root :to => 'welcome#index'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:08:35.090

1.  您可能想查看针对此问题的 ajax 解决方案。传递`remote: true`给表单应该这样做。查看[https://github.com/plataformatec/devise#configuring-controllers](https://github.com/plataformatec/devise#configuring-controllers)以了解如何覆盖会话控制器，以便添加可用于显示错误消息的 js 模板。
2.  您应该查看[https://github.com/plataformatec/devise#configuring-routes](https://github.com/plataformatec/devise#configuring-routes)，以便在用户尝试访问该登录 url 时将他们重定向到您的主页。我认为你可以只传递一个参数，你可以检查它来触发一个打开fancybox的javascript事件

# python - 使用 Python 将整数转换为二进制

> ID：14596367
> 
> 赞同：6
> 
> 时间：2013-01-30T03:49:50.783
> 
> 标签：python, binary, integer

我正在尝试将整数转换为二进制。这是我的工作。我不知道如何制作一个列表来显示二进制文件。

```
num_str = input("Please give me a integer: ")

num_int = int(num_str)

while num_int > 0:

    if num_int % 2 == 0:
        num_int = int(num_int / 2)
        num_remainder = 1
        print("The remainder is:", 0)
        continue

    elif num_int % 2 == 1:
        num_int = int(num_int / 2)
        num_remainder = 1
        print("The remainder is:", 1)
        continue 
```

怎么把剩下的一起做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T03:52:43.933

你知道内置`bin`函数吗？

```
>>> bin(100)
'0b1100100'
>>> bin(1)
'0b1'
>>> bin(0)
'0b0' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T04:04:07.627

您走在正确的轨道上，您只需要将数字保存在某个变量中，而不仅仅是将它们打印到屏幕上：

```
num_str = input("Please give me a integer: ")

num_int = int(num_str)

num_bin_reversed = ''

while num_int > 0:

    if num_int % 2 == 0:
        num_int = int(num_int / 2)
        num_remainder = 1
        print("The remainder is:", 0)
        num_bin_reversed += '0'

    elif num_int % 2 == 1:
        num_int = int(num_int / 2)
        num_remainder = 1
        print("The remainder is:", 1)
        num_bin_reversed += '1'

num_bin = num_bin_reversed[::-1]
if int(num_str) > 0:
  assert '0b' + num_bin == bin(int(num_str)) 
```

现在，尝试通过使其与负数和 0 一起工作来修复它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T22:57:44.553

```
#First off yes there is an easier way to convert i.e bin(int) but where is the fun in that

"""First we ask the user to input a number. In Python 3+ raw input is gone
so the variable integer_number will actually be a string"""

integer_number = input('Please input an integer') #get integer whole number off user

"""We could use int(input('Please input an integer')) but we don't want to overload
anyones brains so we show casting instead"""

'''Next we convert the string to an integer value (cast). Unless the user enters text
then the program will crash. You need to put your own error detection in'''

integer_number = int(integer_number)

"""initialise a variable name result and assign it nothing.
This so we can add to it later. You can't add things to a place that doesn't exist"""

result = ''  

'''since we are creating an 8bit binary maximum possible number of 255
we set the for loop to 8 (dont forget that x starts at 0'''
for x in range(8):
    #The variable in the for loop will increase by 1 each time
    #Next we get the modulos of the integer_number and assign it to the variable r
    r = integer_number % 2 

    #then we divide integer number by two and put the value back in integer_value
    #we use // instead of / for int division els it will be converted to a float point  variable
    integer_number = integer_number//2

    #Here we append the string value of r which is an integer to result
    result += str(r)

    #This then loops back to the for loop whilst x<8

#then we assign the reverse of result using [::-1] to result
result = result[::-1]

#print out the result
print(result) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T04:50:03.103

您可以将余数存储为字符串中的数字。这是从十进制转换为二进制的一种可能的函数：

```
def dec2bin(d_num):
    assert d_num >= 0, "cannot convert negative number to binary"
    if d_num == 0:
        return '0'
    b_num = ""
    while d_num > 0:
        b_num = str(d_num%2) + b_num
        d_num = d_num//2
    return b_num 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-18T22:36:10.627

这是一个在 python 3.3.0 中工作的代码，将二进制转换为整数，将整数转换为二进制，只需复制和粘贴！！！

```
def B2D():
    decnum = int(input("Please enter a binary number"), 2)
    print(decnum)
    welcome()
def D2B():
    integer_number = input('Please input an integer')
    integer_number = int(integer_number)
    result = ''  
    for x in range(8):
        r = integer_number % 2
        integer_number = integer_number//2
        result += str(r)
    result = result[::-1]
    print(result)
    welcome()
def welcome():
    print("*********************************************************")
    print ("Welcome to the binary converter program")
    print ("What would you like to do?")
    print ("Type 1 to convert from denary to binary")
    print ("Type 2 to convert from binary to denary")
    print ("Type 3 to exit out of this program")
    choice = input("")
    if choice == '1':
        D2B()
    elif choice == '2':
        B2D()
    elif choice == '3':
        print("Goodbye")
        exit
welcome() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-15T23:02:01.697

```
#This is the same code as the one above it's just without comments
#This program takes a number from the user and turns it into an 8bit binary string

integer_number = int(input('Please input an integer'))

result = ''  

for x in range(8):

    r = integer_number % 2 
    integer_number = integer_number//2
    result += str(r)

result = result[::-1]

print(result) 
```

# php - 显示包含来自两个表的数据的列表

> ID：14596368
> 
> 赞同：0
> 
> 时间：2013-01-30T03:49:53.070
> 
> 标签：php, mysql

我有 2 个要从中提取数据的表。第一个表称为类别，其结构如下：

```
---------------------------------
id  |   name            |  parent |
--------------------------------- |
1   |  Desktop Courses  |     0   |
2   |  Adobe            |     1   |
3   |  CS6              |     2   |
4   |  IT Courses       |     0   | 
5   |  Microsoft        |     4   |
6   |  Server 2008      |     5   | 
```

我正在使用以下代码将数据显示为列表：

```
<?php
  //Connect to mysql server
  $cn = mysql_pconnect("server", "username", "password");
  mysql_select_db("database");
  $rs = mysql_query("SELECT id, parent, name FROM course_categories", $cn);
  $childrenTree = array(); 
  $categoryNames = array(); 

  while($row = mysql_fetch_array($rs)){
     list($id, $parent, $name) = $row;     
     $categoryNames[(string)$id] = $name;
     $parent = (string)$parent;
     if(!array_key_exists($parent, $childrenTree)) 
         $childrenTree[$parent] = array();
     $childrenTree[$parent][] = (string)$id;
  }

 function renderTree($parentid = "0"){
    global $categoryNames;
    global $childrenTree;
    if($parentid != "0") echo "<li> ", $categoryNames[$parentid], "\n";
    $children = $childrenTree[$parentid];
    if(count($children) > 0){ //If node has children
       echo "<ul>\n";
       foreach($children as $child)
          renderTree($child);
       echo "</ul>\n";
    }
    if($parentid != "0") echo "</li>\n";
 }
 renderTree();  
?> 
```

所以这显然会像这样提取数据：

```
Desktop Courses
  Adobe
    CS6
IT Courses
  Microsoft
    Server 2008 
```

现在我还有一个表格，显示结构如下的课程：

```
---------------------------------------------------
id    |      categoryid   |      course            |
---------------------------------------------------|
1     |          3        |       Photoshop CS6    |
2     |          6        |       Active Directory | 
```

现在我想将课程中的数据合并到类别列表中，但我不确定如何做到这一点，以便它显示如下：

```
Desktop Courses
  Adobe
    CS6
      Photoshop CS6
IT Courses
  Microsoft
    Server 2008
      Active Directory 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:00:27.240

好吧，您可以尝试做的只是`UNION ALL`两个表中的数据，如下所示：

```
SELECT id, parent, name, 'category' as `type` FROM course_categories
 UNION ALL
SELECT id, categoryid, course, 'course' as `type` FROM courses 
```

附加列`type`被添加到结果集中，您可以稍后区分类别和课程。这样，您将利用现有的 php 代码。不过，您需要进行调整以适应此字段。

**编辑：**这种方法的问题是两个表中的 id 相交。为了缓解这个问题，您可以：

*   将课程的 ID 转换为预定义值（例如 1000）。

```
SELECT id, parent, name, 'category' as `type` FROM course_categories
 UNION ALL
SELECT (1000 + id) AS id, categoryid, course, 'course' as `type` FROM courses 
```

*   首先为不同范围的类别和课程定义 ID

为了鼓励您考虑从 deprecated 切换`mysql_`到`PDO`here，您的数据访问代码可能如下所示：

```
<?php

$childrenTree = array(); 
$categoryNames = array();

//Connect to mysql server
$db = new PDO('mysql:host=server;dbname=db;charset=UTF-8', 'user', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$sql = "SELECT id, parent, name, 'category' as `type` FROM course_categories
         UNION ALL
        SELECT (1000 + id) AS id, categoryid, course, 'course' as `type` FROM courses";
foreach ($db->query($sql) as $row) {
     //your initial logic wrapped in the PDO row retrieval foreach loop
     list($id, $parent, $name) = $row;     
     $categoryNames[(string)$id] = $name;
     $parent = (string)$parent;
     if(!array_key_exists($parent, $childrenTree)) 
         $childrenTree[$parent] = array();
     $childrenTree[$parent][] = (string)$id;        
}
//close connection to the db
$db = null;

//Rest of your code goes here intact 
```

*免责声明：*为简洁起见，跳过了错误处理、验证等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:01:31.517

`select u_id, course_name, cat_id from (select id as 'u_id', name as 'course_name', parent as 'cat_id' from course_categories union select id as 'u_id', course as 'course_name', categoryid as 'cat_id')`

希望这可以帮助

# php - php url执行器延迟

> ID：14596372
> 
> 赞同：-4
> 
> 时间：2013-01-30T03:50:18.643
> 
> 标签：php, sleep

嗨，我正在寻找一个简单的 php 脚本，它可以从列表中执行 exp 10 站点 url，然后休眠 1 分钟并执行另外 10 个 url .. 并且一次又一次地喜欢这个。有人可以给我一个方向或可以帮助我的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:03:32.460

您对此不是很清楚，但简单地请求 URL 的最简单方法是使用[file_get_contents](http://php.net/file_get_contents)。您还在寻找一个循环来遍历 URL 数组。为这个选择你最喜欢的，我将使用[foreach](http://www.php.net/manual/en/control-structures.foreach.php)。最后你需要[睡眠](http://php.net/sleep)功能。

**未经测试的代码：**

```
$urls = array(
    'http://google.com',
    'http://yahoo.com',
    'http://bing.com');

foreach($urls as $url)
{
    //Make a request.
    $url_content = file_get_contents($url);

    /*
     * Do something with the content here.
     */

    //Wait a few moments.
    sleep(60); // Seconds.
} 
```

为了获得更大的灵活性，您需要研究[curl](http://php.net/curl)支持，除其他外，POST 请求和弄乱标头。

# r - 从数据框中删除单变量异常值（+-3 SD）

> ID：14596373
> 
> 赞同：4
> 
> 时间：2013-01-30T03:50:20.723
> 
> 标签：r, outliers

我对 R 很陌生，以至于我很难在别人的问题中找到我需要的东西。我认为我的问题是如此简单，以至于没有人会费心去问它。

什么是最简单的代码来创建一个新的数据框，该数据框排除了单变量异常值的数据（我将其定义为与条件均值相差 3 个标准差的点），在他们的条件下，在某个变量上？

我很尴尬地展示我尝试过的东西，但就是这样

```
greaterthan <- mean(dat$var2[dat$condition=="one"]) + 
               2.5*(sd(dat$var2[dat$condition=="one"]))
lessthan    <- mean(dat$var2[dat$condition=="one"]) -
               2.5*(sd(dat$var2[dat$condition=="one"]))   

withoutliersremovedone1 <-dat$var2[dat$condition=="one"] < greaterthan 
```

我几乎已经被困在那里了。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T04:04:20.077

```
> dat <- data.frame(
                    var1=sample(letters[1:2],10,replace=TRUE),
                    var2=c(1,2,3,1,2,3,102,3,1,2)
                   )
> dat
   var1 var2
1     b    1
2     a    2
3     a    3
4     a    1
5     b    2
6     b    3
7     a  102 #outlier
8     b    3
9     b    1
10    a    2 
```

现在只从相关变量返回那些不 ( `!`) 大于 2 `abs`olute的行。显然，将 2 更改为您想成为截止点的任何数量。`sd``mean``sd`

```
> dat[!(abs(dat$var2 - mean(dat$var2))/sd(dat$var2)) > 2,]
   var1 var2
1     b    1
2     a    2
3     a    3
4     a    1
5     b    2
6     b    3 # no outlier
8     b    3 # between here
9     b    1
10    a    2 
```

或更简写使用该`scale`功能：

```
dat[!abs(scale(dat$var2)) > 2,]

   var1 var2
1     b    1
2     a    2
3     a    3
4     a    1
5     b    2
6     b    3
8     b    3
9     b    1
10    a    2 
```

**编辑**

这可以扩展到使用组内查看`by`

```
do.call(rbind,by(dat,dat$var1,function(x) x[!abs(scale(x$var2)) > 2,] )) 
```

这假设`dat$var1`您的变量定义了每行所属的组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T03:52:47.807

我为此任务使用了[robustHD](http://cran.r-project.org/package=robustHD)`winsorize()`包中的函数。这是它的例子：

```
R> example(winsorize)

winsrzR> ## generate data
winsrzR> set.seed(1234)     # for reproducibility

winsrzR> x <- rnorm(10)     # standard normal

winsrzR> x[1] <- x[1] * 10  # introduce outlier

winsrzR> ## winsorize data
winsrzR> x
 [1] -12.070657   0.277429   1.084441  -2.345698   0.429125   0.506056  
 [7]  -0.574740  -0.546632  -0.564452  -0.890038

winsrzR> winsorize(x)
 [1] -3.250372  0.277429  1.084441 -2.345698  0.429125  0.506056 
 [7] -0.574740 -0.546632 -0.564452 -0.890038

winsrzR> 
```

这默认为中值 +/- 2 mad，但您可以设置均值 +/- 3 sd 的参数。

# c# - 最大回文

> ID：14596375
> 
> 赞同：0
> 
> 时间：2013-01-30T03:50:32.363
> 
> 标签：c#, sorting, palindrome

我已经成功地确定了哪两个数字相乘时会在 C# 中产生数字回文，但是我需要将产品从最低到最高排序。有没有办法做到这一点？

```
static void LargestPalindrome()
{
    ulong product = 0;
    ulong compare = 0;
    for (uint i = 100; i < 1000; i++) 
    {
        for (uint j = 100; j < 1000; j++)
        {
            product = i * j;
            StringBuilder value = new StringBuilder(product.ToString());

            //Pass string to reverse
            string value_r = Reverse(value.ToString());

            //Check if Numeric Palindrome
            if(value_r.Equals(value.ToString()) && product>compare)
            {      
                Console.WriteLine("{0} x {1} = {2} in reverse {3}", i, j, value, value_r);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:51:42.703

不要打印回文，而是将数字放在 List<int> 中。完成循环后，调用 list.Sort()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:55:38.123

以下应该足够了。我只是对回文列表进行了排序并将它们打印到控制台屏幕。

```
static void LargestPalindrome()
{
    ulong product = 0;
    ulong compare = 0;
    List<ulong> results = new List<ulong>();
    for (uint i = 100; i < 1000; i++) 
    {
        for (uint j = 100; j < 1000; j++)
        {
            product = i * j;
            StringBuilder value = new StringBuilder(product.ToString());

            //Pass string to reverse
            string value_r = Reverse(value.ToString());

            //Check if Numeric Palindrome
            if(value_r.Equals(value.ToString()) && product>compare)
            {      
                results.Add(product);
            }
        }
    }

    results.Sort();
    foreach (var palindrome in results)
    {
        Console.WriteLine(palindrome);
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T23:49:37.380

您还可以使用 LINQ：

```
var palindromes = from i in Enumerable.Range(100, 9900)
                  from j in Enumerable.Range(100, 9900)
                  let product = (i * j)
                  where product.ToString() == new string(product.ToString().Reverse().ToArray())
                  orderby product
                  select product; 
```

# three.js - Three.js 纹理看起来从右侧剪裁

> ID：14596376
> 
> 赞同：1
> 
> 时间：2013-01-30T03:50:45.143
> 
> 标签：three.js, textures, mesh

我在另一个网格的顶部有一个网格，如下所示（顶部网格区域是暗的）

![在此处输入图像描述](../Images/f061c50c187ffd8233b0ca7ca8932228.png)

如果我添加这样的纹理图像；

```
var logoTexture = THREE.ImageUtils.loadTexture( logoPath );
mesh.material = new THREE.MeshBasicMaterial( { map:logoTexture } ); 
```

图像看起来已损坏（从右侧剪切）

![在此处输入图像描述](../Images/1e1992581cb26d96788ca7911a5b38fb.png)

原始图像看起来像；

![在此处输入图像描述](../Images/2c9d36c7935f5bc23c5f18764233b661.png)

我不知道是什么导致了这个问题，图像也是 512x512 像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:40:56.133

也许您的纹理纵横比与几何形状不匹配。您可以调整几何尺寸和/或使用纹理定位和拉伸，如下所示：

```
var map = logoTexture;

map.wrapS = THREE.RepeatWrapping;
map.wrapT = THREE.RepeatWrapping;

map.offset.x = 0; // adjust as needed to move horizontally
map.offset.y = 0; // adjust as needed to move vertically

map.repeat.x = 1; // adjust as needed to stretch horizontally
map.repeat.y = 1; // adjust as needed to stretch vertically 
```

# spring - 在 freemarker 字符串中引用时变量未定义但否则存在

> ID：14596377
> 
> 赞同：1
> 
> 时间：2013-01-30T03:50:54.513
> 
> 标签：spring, hibernate, struts2, freemarker

我对 Freemarker/Struts2/Spring/Hibernate 等很陌生，但我正在做一个旧项目。我修改了一个 FTL 文件以反映一些更改，但我遇到了一个奇怪的问题。

这有效，即检索到正确的值：

```
<@s.property value="#dataResult.gene.genbankId" /> 
```

但是，这不会：

```
<a href="${geneBankLink}${dataResult.gene.genbankId}" target="_blank"> 
```

这两行紧接着出现，即

```
<a href="${geneBankLink}${dataResult.gene.genbankId}" target="_blank">
<@s.property value="#dataResult.gene.genbankId" /> </a> 
```

产生的错误（简而言之）是：

表达式 dataResult.gene 未定义

freemarker.core.InvalidReferenceException：表达式 dataResult.gene 在 web/search/search_data_result.ftl 的第 54 行第 51 列上未定义。

对我来说奇怪的是它确实找到了 dataResult，否则错误将是 dataResult 未定义，而不是 dataResult.gene。

为什么 dataResult.gene 属性可以通过 struts 表示法访问，但不能通过 FreeMarker 表示法访问？

或者，在这种情况下避免使用 FreeMarker 符号的方法就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:28:15.340

好吧，经过几个小时的反复试验，您甚至可以在另一个标签中使用 struts 语法！

所以这实际上有效：

```
<a href="${geneBankLink}<@s.property value="#dataResult.gene.genbankId" />" target="_blank">
<@s.property value="#dataResult.gene.genbankId" /> </a> 
```

去搞清楚。我仍然有兴趣找出它为什么起作用/为什么它首先会破裂，但这足以让我继续……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:50:00.693

你试过了吗：

```
<a href="${geneBankLink + #dataResult.gene.genbankId}" target="_blank"> 
```

`${}`- 表示表达式和内部的所有内容或多或少都被视为 Java 代码（OGNL 负责处理），还`#`定义了一些不同的行为如何解析值 - 在整个 ActionContext 中搜索以找到值

[http://struts.apache.org/2.x/docs/access-to-valuestack-from-jsps.html](http://struts.apache.org/2.x/docs/access-to-valuestack-from-jsps.html) [http://struts.apache.org/2.x/docs/ognl.html](http://struts.apache.org/2.x/docs/ognl.html)

# android - 堆叠 UI 元素和跟踪 Android

> ID：14596378
> 
> 赞同：0
> 
> 时间：2013-01-30T03:51:02.970
> 
> 标签：android, android-layout

我有许多矩形（卡片）（技术上是一个 Rect 类以及其中的一个 ShapeDrawable），它们彼此堆叠或应保持在两侧..它们应该响应触摸和缩放事件。

例如，

这里有阴影的卡片在下面，其余的在上面。卡片 2 和 3 部分隐藏了它。当我触摸下面的卡片时，它应该会出现。

我应该如何设计我的卡片或阴影矩形。我应该使用自定义视图或视图组。（我是 android 新手，我不知道如何实现这个。这甚至是一个好主意吗。我们可以有这么多屏幕上？）

到目前为止，我已经创建了一个存储此类对象列表的堆栈，并创建了另一个内部类，SurfaceView 和我正在访问上面的堆栈以绘制我的所有元素。但现在的问题是我必须映射我的所有触摸这些卡片或矩形中的每一个的事件。虽然这是可能的，但我想知道是否有更好的方法来做到这一点。

![在此处输入图像描述](../Images/dccd914f717b0ce77a32e741e931432d.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:27:36.570

您可以使用基本思想如何从[CardUIExample](http://www.androidviews.net/2012/12/cardsui/)编写某种代码。他们开发了一种这样有用的东西。

# iphone - 为什么我不能 addUsersObject:(User *)value

> ID：14596381
> 
> 赞同：0
> 
> 时间：2013-01-30T03:51:19.400
> 
> 标签：iphone, ios, core-data, tableview

我有 2 个实体：事件和用户。

活动有很多用户。我有一个列出所有事件的表格视图，当我单击一行时，我得到了这一行的托管对象。我将目标视图控制器的托管对象设置为此。一切正常，但我不能`addUsersObject`。没有代码提示。像这样的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Event *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    EventsViewController *eventsVC = [[EventsViewController alloc] init];
    eventsVC.event = object;
    [self.navigationController pushViewController:eventsVC animated:YES];
} 
```

事件.h

```
@interface Event (CoreDataGeneratedAccessors)

- (void)addUsersObject:(User *)value;
- (void)removeUsersObject:(User *)value;
- (void)addUsers:(NSSet *)values;
- (void)removeUsers:(NSSet *)values; 
```

在目标视图控制器中，当我这样做时`[self.event add]`，我无法获得`addUsersObject`. 我认为是因为我没有`alloc`和`init`事件。但如果我这样做，我会创建一个新的事件对象。我需要选择行中的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:29:08.427

如何申报`event`财产`EventsViewController.h`

您需要将其声明为`Event`类属性：

```
@property (nonatomic, strong) Event *event; 
```

为了使用`Event`该类，您需要将头文件导入`EventsViewController.h`

```
#import "Event.h" 
```

如果您的代码完成仍然无法正常工作，您可能需要删除项目的派生数据 - 关闭您的项目，然后转到管理器，选择您的项目，然后单击派生数据旁边的删除...按钮。然后重新打开项目 - 索引完成后，您应该重新获得代码完成。

# binary - 添加两个负二进制补码

> ID：14596385
> 
> 赞同：1
> 
> 时间：2013-01-30T03:51:34.450
> 
> 标签：binary

因此，假设我想使用 2s 补码二进制表示法将 -7 和 -7 加在一起。我试过这个：

```
-7 -> -00000111 -> 11111001
  1 1 1 1 1 0 0 1
+ 1 1 1 1 1 0 0 1
__________________
1 0 0 0 0 0 0 1 0 
```

但删除多余的数字后，我得到 00000010 = 2 而不是 11110001 = 14。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:55:45.507

沿着这条线的某个地方，您丢失（并且一直丢失）进位标志：

```
 +- Here, 1 + 1 = 0 and sets carry to 1
          |   (everything up to here isokay).
          v
  1 1 1 1 1 0 0 1
+ 1 1 1 1 1 0 0 1
__________________
1 1 1 1 1 0 0 1 0
| | | ^ ^
| | | | |
| | | | +- Here, 1 + 1 + carry(1) is 1, not 0.
| | | +--- Ditto.
| | +----- And again.
| +------- Now it's just getting tedious.
+--------- Lastly, here is the final carry, just discard. 
```

取`11110010`反（反转位并加 1）给你`00001110`，这绝对是 14 (8 + 4 + 2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:54:36.133

你的数学是错误的。在位置 5 中添加 1 + 1 得到 10，因此携带 1。在下一列中，您需要添加 1 + 1 + 进位，= 11 = 1 + 进位。

当您考虑到这一点时，您最终会得到 1 1 1 1 0 0 1 0 = -14。

# r - 编写 OLS 函数以对大数据框值运行回归

> ID：14596390
> 
> 赞同：0
> 
> 时间：2013-01-29T02:34:41.903
> 
> 标签：r, time-series

我有一个大型数据框，其中包含包括美国在内的 7 个不同国家（列）从 1970 年 1 月到 2009 年 12 月（行）的月度股票收益。我的任务是使用 4 个不同时间段（即 70 年代、80 年代、90 年代和 00 年代）的值对每个国家的股票收益（因变量）回归美国股票收益（自变量）。

数据集 (.csv) 可在以下网址下载： [https ://docs.google.com/file/d/0BxaWFk-EO7tjbG43Yl9iQVlvazQ/edit](https://docs.google.com/file/d/0BxaWFk-EO7tjbG43Yl9iQVlvazQ/edit)

这意味着我有 24 个回归要单独运行并报告结果，我已经使用该`lm()`函数完成了这些。但是，我目前正在尝试更智能地使用 R 并创建自定义函数来实现我的目的并产生 24 组结果。

我创建了子数据框，其中包含根据知道十年中有 120 个月的时间段聚类的观察结果。

```
seventies = mydata[1:120, ] # 1970s (from Jan. 1970 to Dec. 1979)
eighties = mydata[121:240, ] # 1980s (from Jan. 1980to Dec. 1989)
nineties = mydata[241:360, ] # 1990s (from Jan. 1990 to Dec. 1999)
twenties = mydata[361:480, ] # 2000s (from Jan. 2000 to Dec. 2009) 
```

注意：每个新创建的变量都是 120 x 7 矩阵，用于 7 个国家/地区的 120 次观察。

使用 Java 运行 24 次回归将需要使用叠瓦式`for`循环。

谁能提供我必须采取的步骤来编写一个能够达到预期结果的函数？一些 R 代码片段也将不胜感激。我也认为该`mapply`功能将被使用。

谢谢，如果我的帖子需要编辑，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:05:08.687

这不是一个完整的答案，而是一个开始。

首先，我认为将数据集拆分为不同的对象是错误的。这只会让它更难处理。更好的是在您的数据框中添加一个指标变量，例如

```
> mydata <- as.data.frame(matrix(round(rnorm(480*7),1), ncol=7))
> names(mydata) <- c("USA", paste("country", 1:6, sep=""))
> 
> mydata$decade <- rep(c("seventies", "eighties", "nineties", "twenties"), rep(120,4))
> 
> head(mydata)
   USA country1 country2 country3 country4 country5 country6    decade
1  0.2     -0.1      0.8      0.9     -1.6     -0.1     -1.1 seventies
2  0.0     -0.5      0.1     -0.4     -1.2     -0.9      1.3 seventies
3  2.2      1.4      1.7      1.0     -1.6     -1.5      0.6 seventies
4 -0.5      2.5      0.2     -0.9      2.3      1.0      0.1 seventies
5 -0.1      0.0     -0.9     -1.4      0.7     -0.1     -0.1 seventies
6  0.3     -0.4      0.1      0.5      0.2      0.9     -0.5 seventies 
```

我的第二个技巧是使用 reshape 或 reshape2 库将其转换为长格式，例如

```
> library(reshape2)
> mydata.m <- melt(mydata, id.vars=c("USA", "decade"))
> head(mydata.m)
   USA    decade variable value
1  0.2 seventies country1  -0.1
2  0.0 seventies country1  -0.5
3  2.2 seventies country1   1.4
4 -0.5 seventies country1   2.5
5 -0.1 seventies country1   0.0
6  0.3 seventies country1  -0.4 
```

从这里你有一系列的选择。您可以使用 base 中的 tapply() 或 plyr 包中的某些东西。您甚至可以将其作为一个大模型拟合，变量和十年之间存在交互作用（与您的 24 个模型给出相似但不相同的结果，这将降低对残差方差的单独估计）。例如，使用 tapply 开始：

```
> country <- with(mydata.m, tapply(USA, list(decade, variable), function(x){x}))
> country
          country1    country2    country3    country4    country5    country6   
eighties  Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120
nineties  Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120
seventies Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120
twenties  Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120 Numeric,120
> country[1,1]
[[1]]
  [1]  0.2  1.1  0.2  0.1 -0.1  2.1 -2.4 -0.5 -0.5 -0.3  0.1 -0.9 -0.6 -0.1  0.8  0.9  0.4  0.6 -0.5  0.4
 [21] -1.3  0.9  0.0 -1.0  0.2 -0.2  0.0 -0.5  0.0  1.4  0.7 -0.9 -1.1  1.7  0.5 -1.0  1.1  0.1  0.3  0.8
 [41] -0.5 -1.9 -1.5 -0.2  0.5 -0.8 -1.2  1.0  0.3  1.7 -0.5  1.2 -0.1  0.9  0.9  0.5 -1.8  0.7  0.1  0.7
 [61]  0.4  0.2 -0.7  2.1  0.2 -1.1 -1.4  1.7 -0.4 -1.0  0.0  1.0 -0.6  1.5  0.4  0.3 -0.2 -1.0 -0.8  1.0
 [81]  0.4 -0.3  1.2  0.9 -0.8  0.2 -0.7 -1.3  0.4 -0.7  0.7  1.5 -0.7 -0.3 -2.3  0.3  0.6 -0.9 -0.5  0.4
[101]  0.4 -0.8  0.2  0.2  0.3 -1.0 -1.0  0.6 -2.8 -0.2  2.7  1.1 -0.5 -0.1 -0.6 -0.6 -0.2  0.1  0.0 -0.9 
```

等等。plyr 包可能会给你一些优雅的方式来拟合模型，避免轻敲。您如何进行将部分取决于您希望如何存储模型结果 - 您想要整个模型，还是只是每个模型的汇总统计等等。

如果有必要，我不会害怕在某些时候使用循环。在 R 中，循环几乎总是一个坏主意，因为它在向量中一次做一个元素，但使用它们一次做一个模型对于代码的读者来说有时比更深奥的操作更透明。当数据以数千行而不是数百万行计算时，操作速度不会成为问题（例如，您的数据集实际上非常小），因此代码的透明度和易于检查成为选择编程的真正标准方法。

# jsf-2 - 我可以将列表项拖放到 JSF 中的文本框吗？

> ID：14596393
> 
> 赞同：1
> 
> 时间：2013-01-30T03:52:04.370
> 
> 标签：jsf-2

我有要求，即我有 SelectManyMenu，我想将列表项拖放到 JSF 中的文本框或文本区域？有没有可能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T08:49:05.957

我会尝试结合使用 selectManyMenu JavaScript API 和 JavaScript（jQuery UI 支持拖放）。在这里查看组件的文档：http: [//docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)

# neo4j - Neo4j 1.9：如何连接到 HA 机器？通过IP？机器出故障了怎么办？

> ID：14596396
> 
> 赞同：2
> 
> 时间：2013-01-30T03:52:43.327
> 
> 标签：neo4j

Neo4j 1.9：如何连接HA机器？通过 IP ？机器出故障了怎么办？

1.9以后，Neo4j不再使用zookeepers；但是如果我通过 IP 连接到 HA 机器，whasome 机器崩溃了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:54:53.843

对于大多数设置，您希望在集群前面有一个负载均衡器组件。这可以是硬件 lb 或软件 lb，如 ha_proxy，请参阅[http://docs.neo4j.org/chunked/milestone/ha-haproxy.html](http://docs.neo4j.org/chunked/milestone/ha-haproxy.html)

# java - 从 servlet 的 out.println 方法写入的大量文本在 Java 桌面客户端上丢失

> ID：14596400
> 
> 赞同：0
> 
> 时间：2013-01-30T03:53:01.937
> 
> 标签：java, servlets

我正在编写一个软件，该软件的一部分涉及我的 Java 桌面客户端应用程序和 servlet 之间的通信。servlet 从数据库中提取文本数据并将其写入 1 个单独的 out.println() 语句。问题是，当 servlet 写入的文本数据很多时，部分文本永远不会到达客户端。尽管在 servlet 中设置了 contentlength response.setContentLength(text.length())。会发生什么？这是小服务程序：

```
package servlets;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Clob;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;'
import javax.sql.DataSource;
/**
 *
 * @author GBEMIRO
 */

public class MessageRetrieverServlet extends HttpServlet {

DataSource pool;  // Database connection pool
private HttpSession session;

@Override
public void init() throws ServletException {
    try {
        // Create a JNDI Initial context to be able to lookup the DataSource
        InitialContext ctx = new InitialContext();
        // Lookup the DataSource, which will be backed by a pool
        //   that the application server provides.
        pool = (DataSource) ctx.lookup("java:comp/env/jdbc/TestDB");
        if (pool == null) {
            throw new ServletException("Unknown DataSource 'jdbc/TestDB'");
        }
    } catch (NamingException ex) {
        ex.printStackTrace();
    }
}//end method init

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    session = request.getSession();
    Connection conn = null;
    try {

        String email = request.getParameter("email");

        conn = pool.getConnection();

        PreparedStatement pstmt = conn.prepareStatement("SELECT MSG FROM POSTS_TABLE WHERE EMAIL = ? ");

        pstmt.setString(1, email);

        ResultSet rs = pstmt.executeQuery();
        rs.next();

        //The huge text
        Clob clob = rs.getClob("MSG");

        /**
         * The text retrieved into msg is very large, but I checked with
         * System.out.println(msg) statements it is complete up to this
         * point, no part of it is lost. So the retrieval from the database
         * is always successful.
         *
         */
        String msg = clob.getSubString(0, (int) clob.length());

        out.print(msg);

    }//end try
    catch (SQLException exception) {
        String errorMsg = "error3";
        exception.printStackTrace();
        out.print(errorMsg);
    } catch (NumberFormatException numberFormatException) {
        String errorMsg = "error4";
        numberFormatException.printStackTrace();
        out.print(errorMsg);
    }

    try {
    } finally {
        out.close();
        try {
            if (conn != null) {
                conn.close();
            }  // return to pool
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
}//end method

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
/**
 * Handles the HTTP
 * <code>GET</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

/**
 * Handles the HTTP
 * <code>POST</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

/**
 * Returns a short description of the servlet.
 *
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
}

Now this is the receiving method on the client where the problem arises:

public void retrieveMessages(){
    try {
        URL url = new URL("http://"+server_name_or_ip+":8080/SecureChatEngine/MessageRetrieverServlet");

            HttpURLConnection urlCon = (HttpURLConnection) url.openConnection();
        urlCon.setDoInput(true);
        urlCon.setDoOutput(true);
              urlCon.setRequestMethod("POST");        
  urlCon.setRequestProperty("Content-type",
      "application/x-www-form-urlencoded");

  PrintWriter out = new PrintWriter( new OutputStreamWriter(
      urlCon.getOutputStream(  ), "8859_1"), true );
        StringBuilder sb = new StringBuilder("");
        sb.append(URLEncoder.encode("email","UTF-8"));
        sb.append("=");
        sb.append(URLEncoder.encode("gbenroscience@yahoo.com","UTF-8"));

           String formData = sb.toString();
           out.print(formData);
        out.flush();

   int contentLength = urlCon.getContentLength();
  byte[] raw = new byte[contentLength];
  int length = urlCon.getInputStream().read(raw);
  System.out.println("len = "+length);
  out.close();
/**
* The message retrieved here is incomplete..a truncated version of what is coming from the server, whereas 
* it should be the full version.
*/
String serverMsg = new String(raw, 0, length);    

}
catch(Exception e){
e.printStackTrace();
}

}//end method 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:16:19.363

不能保证 read() 会填满缓冲区。请参阅 Javadoc。您必须循环阅读，直到 EOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:58:58.780

@EJP 的答案是正确的，不能保证您一次读取就可以读取输入流。你需要循环如下......

```
BufferedReader in = null;
    StringBuilder sb = new StringBuilder();
    try {
        in = new BufferedReader(new InputStreamReader(urlCon.getInputStream()));
        String input = null;
        while((input=in.readLine())!=null) {
            sb.append(input);
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if(in!=null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    String serverMsg = sb.toString(); 
```

# django - 如何制作一个同时执行 GET 和 POST 的 Django 视图？

> ID：14596401
> 
> 赞同：1
> 
> 时间：2013-01-30T03:53:02.907
> 
> 标签：django, django-views

我正在创建我的 Django 模型对象的实例：myObject.

我已经设置了一个 Django 表单向导以允许用户创建 myObjects 的新实例。

我已经设置了一个视图，允许用户使用这样的 GET 在 myObject 上“向下钻取”：“myWebsite.com/?objID=5”

在表单向导的最后一步之后，我将用户重定向到“myWebsite.com/?objID=" 到目前为止一切顺利。有用。但是我有两个新要求：

1.  如果表单向导刚刚将我重定向到此页面，我希望它在此向下钻取页面的顶部显示“这是您新创建的对象”。
2.  无论天气如何，我都是从表单向导或通过任何其他方式来到这个深入研究页面的，我希望 URL 保持与我上面解释的相同。

要求 #2 需要我使用 POST 以免更改 URL。但原始 URL 需要 GET。所以看来我需要在同一页面上执行 GET 和 POST。我怎样才能做到这一点？我是不是误会了什么？有没有更好的方法让我完成我想做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:57:14.843

您实际上不需要同时发出 GET 和 POST 请求。您缺少的是 POST 请求实际上可以具有 GET 参数以及 POST 参数。因此，正如 matino 在评论中指出的那样，这是完全有效的：

```
<form method="POST" action="myWebsite.com/?objID=5"> 
```

在您看来，`request.GET`将包含`{'objID': 5}`并且`request.POST`将包含在您的表单中提交的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:52:47.527

您不能发出既是 POST 又是 GET 请求的 http 请求。试图这样做是不好的，并且会破坏互联网。

它违反了[RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-5)（http 的 w3c 规范）。http 提供了一个方法，该方法必须是“OPTIONS”、“GET”、“HEAD”、“POST”、“PUT”、“DELETE”、“TRACE”、“CONNECT”之一

尽管这是开发人员经常忽略的原则，但 GET 旨在从服务器检索资源，特别是在不更改服务器上该资源或任何资源的状态的情况下。相反，POST 请求专门用于更改资源的状态。所以 GET 用于查询，POST 用于数据库更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-18T19:58:10.067

这是我使用的：

```
# views.py
def api(request):
    params = request.POST.copy()
    params.update(request.GET)
    # now params has both get and post params merged 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:49:52.730

`request.method`告诉您视图中的请求使用什么 http 方法。因此，您可以相应地对其进行编码。

例如

```
def my_view(request):

    if request.method == 'GET':
        #do processing for get

    else if request.method == 'POST':
        #do processing for POST

    ... 
```

# macos - 在 Mac OS X 上使用 kCGBlendModeClear 实现橡皮擦笔划

> ID：14596404
> 
> 赞同：2
> 
> 时间：2013-01-30T03:53:38.323
> 
> 标签：macos, cocoa, core-graphics

我使用 kCGBlendModeClear 混合模式来实现橡皮擦工具。它在 ios 中运行良好，但在 OS X 中无法运行。它在 OS X 中使用 kCGBlendModeClear 混合模式创建黑色线条。

这是示例代码：

```
 #if TARGET_OS_IPHONE
    CGContextRef context = UIGraphicsGetCurrentContext();
  #else
    CGContextRef context = [[NSGraphicsContext currentContext] graphicsPort];
  #endif

  CGContextSaveGState(context);

  CGContextSetLineWidth(context, 10);
  CGContextSetRGBStrokeColor(context, 255.0, 0.0, 0.0, 1.0);
  CGContextMoveToPoint(context, 100, 100);
  CGContextAddLineToPoint(context, 200, 200);
  CGContextStrokePath(context);

  CGContextSetBlendMode(context, kCGBlendModeClear);
  CGContextMoveToPoint(context, 150, 150);
  CGContextAddLineToPoint(context, 180, 180);
  CGContextStrokePath(context);

  CGContextRestoreGState(context); 
```

IOS：

![在 iOS 中](../Images/58561d379b7482948cab9e3663954e95.png)

但在 OS X 中：

![在 OS X 中](../Images/867b9355aaacc10e0f0fa7a53cf46e02.png)

我还尝试更改视图和超级视图不透明属性和背景颜色，但没有帮助。

我知道清晰的颜色实际上是带有 alpha 0 的黑色，但我想知道为什么在 OS X 中忽略了 alpha。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T13:14:11.107

使用 Layer 支持的 NSView, [view setWantsLayer:YES];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:34:36.720

我遇到了和你一样的问题。

使用 NSBezierPath 进行剪辑，以防 NSView 剪辑

使用“kCGBlendModeClear”需要设置“self.backgroundColor = [UIColor clearColor];”。

我想我们不能设置 NSView 的 backgroundColor。否则，我们必须调整 NSView 的上下文。但是，我不知道该怎么做。

只需使用 NSBezierPath 剪辑。这很简单...

# java - Java RXTX 和打包

> ID：14596406
> 
> 赞同：1
> 
> 时间：2013-01-30T03:53:52.807
> 
> 标签：java, jakarta-ee, rxtx

我有一个内置于 netbeans 的 java 程序，它使用[Here](http://rxtx.qbang.org/wiki/index.php/Main_Page)的 RXTX 。到目前为止，它在 windows 和 linux 中都运行良好。

我的问题：是否可以在 JAR 中包含所需的 RXTX 文件，而无需按照 RXTX 站点上的说明进行安装。我希望能够将所有包含文件的 JAR 提供给 Linux 或 Windows 上的人们，并让它正常工作。

这可能吗？最好的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T14:39:08.630

您不需要*自行安装*它们 - 您只需将`java.library.path`VM 参数指向包含相应 DLL 文件的文件夹即可。

但是，对于 Jar 文件，这将涉及在某处提取它们，然后在初始化 RXTX 之前分别加载 DLL，因为它们不能直接从 Jar 文件内部读取和使用（因为它本质上是一个 zip 存档。）最佳答案关于[这个问题](https://stackoverflow.com/questions/1611357/how-to-make-a-jar-file-that-include-dll-files)应该在这里为您指明正确的方向（不要忘记没有什么可以阻止您将它们提取到临时位置并调用`deleteOnExit()`文件，因此它不会比它必须的时间长。）

# query-string - COncrete5：未在仪表板上登录时查询字符串不起作用

> ID：14596408
> 
> 赞同：1
> 
> 时间：2013-01-30T03:54:07.083
> 
> 标签：query-string, block, concrete5

我正在使用一个涉及查询字符串的自定义块。当我以管理员身份登录时，不幸的是，当我注销时，一切正常，我的查询字符串显示在地址栏上，但页面未显示正确的信息。

示例查询字符串：[http](http://c5.demop_site.com/calendar/?date=2012-12) ://c5.demop_site.com/calendar/?date=2012-12 ...

日历段是由我的控制器中的自定义函数生成的，如下所示。

[http://c5.demop_site.com/getCurrentUrl](http://c5.demop_site.com/) (); ?>/?date=2012-12

```
public function getCurrentUrl(){
  global $c;
  $nh = Loader::helper('navigation');
  $cpl = $nh->getCollectionURL($c); 
  return $cpl;
} 
```

当我没有登录时，该功能也不起作用，所以我想知道这是否是我的查询字符串出错的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:23:37.743

您是否检查了该页面的权限？

# html - 没有 clearfix 的 CSS 浮动 div 的行为如何

> ID：14596413
> 
> 赞同：0
> 
> 时间：2013-01-30T03:54:40.857
> 
> 标签：html, css

嘿，伙计们需要一些关于 html 和 css 浮动内容的帮助。请检查[http://jsfiddle.net/anilnamde/DVJ4b/](http://jsfiddle.net/anilnamde/DVJ4b/)并且以下是我的疑问。还包括下面的代码

```
 .p{
    background:red;
    width:100%;
    padding:20px;

}

.p div{
    width:49%;
    background:blue;
    float:left;
    margin-left:5px;
    min-height: 200px;
}
</style>
<body>
<div class="p">
    <div>
        first
    </div>    
    <div>second
    </div>
    This is the test text
</div>
<p>This is good</p>
</body> 
```

1.  根据我的理解，父 div 中的 p 标签和文本应该放在两个浮动元素的后面。这没有发生。
2.  再次以某种方式没有任何 clearfix 或清除两者或溢出隐藏的父 div 的高度似乎是正确的。这有点难以理解。

有人可以帮我理解这一点。

根据我开始了解其标准示例以了解浮动相关问题并应用 clearfix 修复它。但突然我发现它在没有 clearfix 的情况下开始正常工作。所以我目前不太确定我的浮动理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:01:10.123

1.  .p 中的文本按照应有的方式环绕在浮动的 div 周围，但是您没有在两侧留下任何空间让它这样做，所以它落在下面。p 标签中的文本在 div.p 之外，所以它出现在下面。同样，这是意料之中的。Div.p 是块级元素，因此即使您没有明确说明，它也是全角的。

2.  您的父 div 展开以包裹已包裹在浮动 div 下方的文本。这是意料之中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:02:05.493

最后一个浮动 div 之后的文本用作“clearfix”并“拉”下面的红色框：

[http://jsfiddle.net/DVJ4b/1/](http://jsfiddle.net/DVJ4b/1/)

至于为什么`<p>`标签文字出现在红框下方，那是因为外层div没有浮动。

如果您在内容*之前*有浮动，则浮动不会与它们重叠。浮动仍然是流内容的一部分；它只与定位有关：

[http://jsfiddle.net/DVJ4b/4/](http://jsfiddle.net/DVJ4b/4/)

我想你可能对绝对定位感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:09:28.920

给定的例子不是很好。您有两个浮动元素，它们将占据几乎 100% 的可用宽度，没有空间让“p”标签在其周围“浮动”。所以，发生的事情是文本“这是测试文本”实际上是在浮动的 div 的“周围”和“下方”浮动（只需用 ap 标签包装这个文本并使用它应用背景颜色`.p p { background-color: gray; }`，你会看到）。这证明你的第一个陈述（

> ...这没有发生。

) 是错误的，因为它正在发生。

问题是：因为您没有空间让文本浮动到那些浮动框的右侧，所以文本本身正在“像”一个 clearfix 一样工作。

现在，删除文本“This is the test text”，您会发现需要进行清晰的修复，因为红色背景会缩小到顶部，如预期的那样，并且需要清晰的修复。

想尝试不同的东西吗？将“This is the test text”放回原处，将那些浮动框的宽度更改为 51%，然后大吃一惊！

希望我在这里让自己“清楚”。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:15:01.763

这是我的解决方案[http://jsfiddle.net/burn123/DVJ4b/5/](http://jsfiddle.net/burn123/DVJ4b/5/)

**变更摘要**

*   添加了一篇文章到`This is the test test`
*   添加`clear:both;`到文章中，使其始终显示在浮动对象下方。
*   将`box-sizing`属性设置为`border-box`不会溢出。这将设置元素，以便您为元素提供任何宽度或高度，无论如何它都将遵循该宽度。
*   添加了一个响应元素，以便在 575px 之前它会浮动，并且任何小于该宽度的元素都设置为 100%。这只是可选的

如果需要，这只是一种改进布局的方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T04:00:24.807

这种行为是因为您在`.p`div 中有一些文本必须放在某个地方。考虑到占据 200px 高度的浮动元素，它适合的最佳位置在它们下方，从而拉伸了`.p`div。

如果您从`.p`div 中删除文本（“这是测试文本”），您会看到`.p`div 的高度要小得多。现在高度是由填充引起的，您需要使用 clearfix 或`overflow: hidden`.

# python - 酸洗 Z3 Python 对象

> ID：14596416
> 
> 赞同：3
> 
> 时间：2013-01-30T03:54:45.953
> 
> 标签：python, z3, pickle

未来版本是否考虑支持酸洗（或序列化）Z3 对象？我目前正在尝试将 Z3 Python API 生成的模型腌制到一个文件中，我收到错误消息`ctypes objects containing pointers cannot be pickled`，我认为这意味着 Python API 只是 Z3 DLL 的包装器。

或者有没有更好的方法将 Z3 Python API 生成的对象保存到文件中以备将来使用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:50:51.750

是的，Z3 Python API 是 Z3 共享库（即 Windows 上的 DLL）的包装器。添加方法`__getstate__()`和`__setstate(state)__`包装公式、模型等的 Z3 Python 对象是可行的。如果这些方法可用，Python pickler 将使用它们。因此，原则上，可以添加此功能。也就是说，我们可以在 Z3 API（C API）中添加用于将 Z3 表达式/公式和模块编码/解码为字节流的过程。然后使用这些 API 来实现`__getstate__()`和`__setstate(state)__`. 有一些细节：

*   *共享*：假设我们有一个 Z3 表达式的 Python 列表，这些表达式共享很多子表达式。Python pickler 将为`__getstate__()`列表的每个元素调用，Z3 将多次编码共享的子表达式。问题在于，对于 Python，每个 Z3 表达式都是一个“blob”，并且 Z3 编码器/序列化器不知道这些不同的表达式是更大的 Python 数据结构的一部分。因此，用户在挑选包含对许多不同 Z3 对象的引用的 Python 对象时应该小心。请注意，在某些情况下，很容易解决此问题。例如，我们可以使用 Z3`ASTVector`而不是 Z3 表达式的 Python 列表。然后，Z3 可以将其编码`ASTVector`为一个大“blob”，其中每个共享子表达式只编码一次。

*   Z3 对象，例如表达式和模型，与上下文相关联。请注意，Python API 中的大多数过程都有一个额外的`ctx`参数。例如，`Int('x')`创建一个`x`在默认上下文中命名的整数变量，并`Int('x', ctx)`在上下文中创建它`ctx`。多个上下文很有用，因为我们可以从不同的执行线程同时访问它们。当我们解开 Z3 对象时，我们必须决定将它存储在哪个上下文中。一种可能性是设置一个全局参数来指定要使用的上下文。如果未设置，则使用默认上下文。*这不是一个完美的解决方案*. 假设我们有一个 Python 数据结构，其中包含对来自不同上下文的 Z3 表达式的引用，我们将其腌制。然后，当我们 unpickle 数据时，所有表达式都将添加到同一个 Z3 上下文中。也许，这不是一个大问题，因为大多数用户只使用一个 Z3 上下文，而使用多个上下文的用户通常不会将来自不同上下文的表达式的引用存储在同一个 Python 对象中。

请随时提出替代解决方案。我们 Z3 团队中没有一个人是 Python 专家。

# r - 如何通过R中的列名获取值？

> ID：14596420
> 
> 赞同：-4
> 
> 时间：2013-01-30T03:55:05.913
> 
> 标签：r, dataframe

我有一个制表符分隔文件。

猫文件

```
A      B     C
2      3     4 
3      4     5
2      6     6 
```

infile<-read.table("file",header=TRUE)

我需要获取具有标题 =“A”的列的值。

```
 A 
 2
 3
 2 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:00:25.500

对于单列`data.frame`作为输出：

```
infile["A"]
infile[1] 
```

对于作为输出的向量：

```
infile[, "A"]
infile[, 1]
infile[["A"]]
infile[[1]]
infile$A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T03:59:42.970

infile$A 应该可以工作。你需要更多地阅读 R 书籍，然后开始你的编程试验。

# python - 从python中的用户输入列表中提取随机项

> ID：14596426
> 
> 赞同：2
> 
> 时间：2013-01-30T03:55:58.487
> 
> 标签：python, list, input, user-input

```
sup = ['eyes', 'nose', 'mouth'] 
car = ['4wd', 'hatch', 'coupe']
tan = ['dark', 'light', 'pale']

objects = ['sup', 'car', 'tan']

import random

print 'choose 2 objects from the following list separated by commas:'
print 'sup, car, tan'

chorol []
chorol.extend (objects[:2])

from random import choice
print choice (1)

from random import choice
print choice (2) 
```

我试图让用户从一组 3 个列表中选择 2 个列表，然后从用户选择的 2 个列表中的每个列表中打印 1 个随机项目。我最近才开始学习编码，所以这个错误可能是非常基本的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:00:41.013

您最好在这里使用字典：

```
import random
d = dict(sup = ['eyes', 'nose', 'mouth'],
         car = ['4wd', 'hatch', 'coupe'],
         tan = ['dark', 'light', 'pale'])

items = raw_input("pick 2 (separated by comma):" + ','.join(d)+' > ')
#The next line of code could be
#item1,item2 = [x.strip() for x in items.split(',')] 
#if you want to do some validation
item1, item2 = items.split(',')  

print 'picked:', random.choice(d[item1])
print 'picked:', random.choice(d[item2]) 
```

# c# - 在线程之间锁定图像的问题

> ID：14596429
> 
> 赞同：3
> 
> 时间：2013-01-30T03:56:06.083
> 
> 标签：c#, locking, emgucv

我需要在两个不同的线程中获得一个锁才能访问 EmguCv 中的位图（从网络摄像头填充）。我有一个“GetFrame”函数，可以查询相机并将它返回的内容放入 .NET 位图中。我有两个线程需要访问这个位图，一个需要写入位图并将位图分配给图片框，另一个需要读取位图，将其转换为图像对象并将其分配给 EMGU ImageBox。我首先锁定一个任意对象，然后执行我的操作。代码如下（_Camera.LiveFrame为Bitmap）：

写/读线程：

```
while (_CaptureThreadRunning)
{
   lock (_Camera)
   { 
      // _Camera.GetFrame writes to the Bitmap
      if (_VideoPlaying && _Camera.GetFrame(500)) 
           pbLiveFeed.Invalidate();
    }
}
_Camera.CloseCamera(true);
_CaptureExitEvent.Set();           // Set to signal captureThread has finished 
```

阅读/ImageBox 线程：

```
while (_ProcessThreadRunning)
{
   lock (_Camera)
   {
      //  _Camera.LiveFrame is the Bitmap
      procImage = new Image<Bgr, int>((Bitmap)_Camera.LiveFrame.Clone());          
      procImage.Draw(new Rectangle(10,20,20,15),new Bgr(Color.LightGreen), 5);

      ibProcessed.Image = procImage;
      ibProcessed.Invalidate();
    }
}
_ProcessExitEvent.Set(); 
```

这在大多数情况下运行良好，但是当我尝试 Clone() 位图时，时不时会出现“对象正在其他地方使用”错误。这不是正确的锁定方式吗？我不明白为什么这会导致问题。

附言。我的线程也不能再优雅地退出。我的循环之外的 .Set() 调用永远不会被调用。我猜线程是死锁的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:53:49.857

GDI+ 有一个锁定机制，可以防止两个线程使用 Bitmap 对象——这是您收到的错误。

您正在尝试访问该位图，而 UI 线程已经在访问它。例如，1）您将位图分配给图片框，2）图片框无效然后重新绘制，3）您退出写/读线程锁，然后 4）读/图像框线程试图访问相同重绘仍在进行时的位图。

要解决这个问题，只需复制位图，并使用该副本进行操作。无论您给图片框什么，都不要假设您可以从非 UI 线程再次触摸它。

例如，在 _Camera.GetFrame 中：

```
// Get the bitmap from the camera
capturedBitmap = GetFromCamera();

// Clone the bitmap first before assigning to the picture box
_Camera.LiveFrame = new Bitmap(capturedBitmap);

// Assign to the picture box
pbLiveFeed.Image = capturedBitmap; 
```

现在， _Camera.LiveFrame 应该可以从线程访问，只要您有适当的锁定。

我会在这里考虑其他几个问题：

1.  您提到您正在锁定一个“任意对象”，但 _Camera 似乎并非如此 - 它是一个可以以不可预测的方式在其他地方使用的对象。我建议制作一个仅用于锁定的对象，例如

    ```
    object lockObject = new lockObject;
    lock (lockObject)
    {
        // put your synchronized code here
    } 
    ```

2.  Bitmap.Clone() 创建一个与原始位图共享像素数据的位图。当您转换为图像对象以分配给 EMGU ImageBox 时，您正在使用该克隆，它维护对位图的引用。因此，在这种情况下，创建一个新位图而不是使用 Clone() 对我来说似乎更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:13:22.257

我认为你完全可以避免在这里使用显式锁。只需将位图创建操作移至接收线程 - 这样您将保证原始位图上的所有操作都从接收线程执行。

位图创建完成后，将对新位图的引用传递给读取线程 - 将其分配给为其提供服务的类的成员。引用赋值是一个原子操作，你可以保证读取线程要么看到新值，要么看到旧值。虽然您只在完成创建位图后才传递参考，但您可以保证只有读取线程才能使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:05:05.593

您可以使用 ManualResetEvent 代替锁来编排读取操作和写入。一个例子是这样的。

写/读线程：

```
while (_CaptureThreadRunning)
{
   imageBoxTrhead.WaitOne();
   readWriteThread.Reset();

   // _Camera.GetFrame writes to the Bitmap
   if (_VideoPlaying && _Camera.GetFrame(500)) 
      pbLiveFeed.Invalidate();

   readWriteThread.Set();

}
_Camera.CloseCamera(true);
_CaptureExitEvent.Set(); 
```

阅读/ImageBox 线程：

```
while (_ProcessThreadRunning)
{
   readWriteThread.WaitOne();
   imageBoxTrhead.Reset();

   //  _Camera.LiveFrame is the Bitmap
   procImage = new Image<Bgr, int>((Bitmap)_Camera.LiveFrame.Clone());          
   procImage.Draw(new Rectangle(10,20,20,15),new Bgr(Color.LightGreen), 5);

   imageBoxTrhead.Set();

   ibProcessed.Image = procImage;
   ibProcessed.Invalidate();
}
_ProcessExitEvent.Set(); 
```

默认情况下，readWriteThread 和 imageBoxTrhead 是 ManualResetEvent 对象。

# javascript - 将事件处理程序添加到按钮数组不起作用 Javascript

> ID：14596434
> 
> 赞同：4
> 
> 时间：2013-01-30T03:56:23.863
> 
> 标签：javascript, jquery, mouseevent, jquery-events

我正在尝试将事件处理程序分配给数组中的按钮。当我按下按钮时，它应该调用一个函数，但没有也无法弄清楚为什么。这是我的代码：

```
var btns = [];
    btns.push($('<div />').addClass('mvn_no mvn'));
    btns.push($('<div />').addClass('mvn_n mvn'));
    btns.push($('<div />').addClass('mvn_ne mvn'));
    btns.push($('<div />').addClass('mvn_o mvn'));
    btns.push($('<div />').addClass('mvn_c'));
    btns.push($('<div />').addClass('mvn_e mvn'));
    btns.push($('<div />').addClass('mvn_so mvn'));
    btns.push($('<div />').addClass('mvn_s mvn'));
    btns.push($('<div />').addClass('mvn_se mvn'));
    for ( var i = 0; i < btns.length; i++) {
        btns[i].mousedown(function() {
            moveImage(this);
        }).mouseup(function() {
            clearTimeout(tMovement);
        }).mouseout(function(){
            clearTimeout(tMovement);
        });
        table.find('td:eq(' + i + ')').append(btns[i]);
        $($options.expose.elementMovement).empty().append(table);

    }
    alert($._data( $("div.mvn_so"), "events" )); 
```

一旦这段代码运行，我点击按钮，没有任何反应。我什至尝试调用一个只有警报的虚拟函数，但它仍然不起作用。我还尝试在给定元素上获取事件，它返回未定义。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:57:57.747

所以，经过几个小时的调试，我终于找到了破坏我的代码的罪魁祸首。当我删除它时，它是该死`.empty()` 的`$($options.expose.elementMovement).empty().append(table);`，代码工作得很好。我不知道为什么它没有按原样工作，但我很高兴它现在可以工作。即使将空放在单独的行中也会破坏我的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:44:57.367

尝试这样的事情：http: [//jsfiddle.net/ADGSc/](http://jsfiddle.net/ADGSc/)

```
$('#myTable').on({
    'mousedown': function() {
        moveImage(this);
    },
    'mouseup': function(something) {
        clearTimeout(tMovement);
        status.text('mouseup: ' + $(this).attr('class'));
    },
    'mouseout': function(something) {
        clearTimeout(tMovement);
        status.text('mouseout: ' + $(this).attr('class'));
    }
}, 'div'); 
```

这可能不是*您*想要的，但希望它会引导您走上正确的道路。

在此处了解有关 jQuery`.on()`功能的更多信息：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

# linux - linux中的pthread_create是什么？

> ID：14596438
> 
> 赞同：1
> 
> 时间：2013-01-30T03:56:46.367
> 
> 标签：linux, linux-kernel, operating-system, pthreads

我是操作系统的新手，所以，我想了解 Linux 中的 pthread_create（标准化接口）？它创建什么类型的线程？用户级线程还是内核级线程？证明合法 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:17:29.567

Linux 中的 PThreads 为您提供内核级线程，而不是用户级线程。

如果您查看 pthreads 的手册页，这很明显：（查找单词`Both`）：

> 两种线程实现都使用 Linux clone(2) 系统调用。

在这种情况下，“Both”一词指的是现在不受支持的 LinuxThreads 实现，以及 glibc 中较新的 NPTL（本机 POSIX 线程库）。

另请参阅[此答案](https://stackoverflow.com/questions/9305992/linux-threads-and-process/9306150#9306150)以了解内核线程调度在 Linux 下的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:22:34.683

另请阅读像[这样](https://computing.llnl.gov/tutorials/pthreads/)的优秀 Posix 线程教程。

[阅读一本关于高级 linux 编程](http://advancedlinuxprogramming.com/)的好书也很重要。

# php - 带有 PDO::MYSQL_ATTR_MAX_BUFFER_SIZE 的 PHP 中的致命错误

> ID：14596439
> 
> 赞同：2
> 
> 时间：2013-01-30T03:56:50.960
> 
> 标签：php, mysql, fatal-error, class-constants

使用 PHP Web 应用程序时，我遇到了 PDO::MYSQL_ATTR_MAX_BUFFER_SIZE 的致命错误，但仅限于非常罕见的托管计划。这是说这个常数不可用。如何检测到它不可用而不使用它？

我的意思是，我可以使用 if (!defined(...)) if/then 检查，但是在那些未使用 PDO 编译 MYSQL_ATTR_MAX_BUFFER_SIZE 的系统上，这仍然会出现致命错误吗？请注意，有一个关于 MYSQL_ATTR_MAX_BUFFER_SIZE 和 mysqlnd 的已知错误，在安装了 mysqlnd 的情况下它不会被编译。该错误被标记为“不会修复”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:08:04.743

你没有[`defined()`](http://php.net/manual/en/function.defined.php)正确使用，是我的猜测。您需要为其提供一个字符串。

```
if( defined( 'PDO::MYSQL_ATTR_MAX_BUFFER_SIZE' ) ) // note the quotes
{
    // do something useful with PDO::MYSQL_ATTR_MAX_BUFFER_SIZE
} 
```

`PDO::MYSQL_ATTR_MAX_BUFFER_SIZE`上面的示例在我的设置（PHP 5.3.20，其中未定义）中没有发出任何通知/警告/错误，使用`error_reporting( E_ALL | E_STRICT )`.

# jquery - wordpress 在 jquery 动画之后使用 ajax 获取帖子内容？

> ID：14596442
> 
> 赞同：1
> 
> 时间：2013-01-30T03:57:45.173
> 
> 标签：jquery, ajax

我想在使用 ajax 的 jquery 动画之后获取帖子内容，比如 jpg 流..！ [计划写在图片中](http://img4host.net/upload/3003324151088649d5f2d.jpg)

这是我现在拥有的 jquery 代码：

```
 $(".read-more").click(function() {
   var wheight = $(window).height() 

   $("#wrapper").animate({top:wheight},700,'easeInOutQuart', function(){
       $("#wrapper_project").slideDown('1000','easeOutCirc');
       $("#menu").fadeOut('500');

});

}); 
```

这是 HTML 模板：

```
<section class="block">

             <?php
                $mypost = array( 
                'post_type' => 'project',
                'posts_per_page' => 1000,
                );
                $loop = new WP_Query( $mypost );
                ?>

             <?php while ( $loop->have_posts() ) : $loop->the_post();?>

             <article id="post-<?php the_ID(); ?>" <?php post_class('post clearfix'); ?>>
                <div class="left thumbnail_box">    
                    <a rel="<?php the_permalink() ?>" href="<?php echo get_permalink(); ?>"><?php the_post_thumbnail( 'project-thumbnail' ); ?></a>
                </div>
                 <div class="desc">
                    <h3 class="post_title"><a rel="<?php the_permalink() ?>" href="<?php echo get_permalink(); ?>"><?php the_title(); ?></a></h3>
                    <p class="entry-content"><?php the_content(); ?> <a rel="<?php the_permalink() ?>" href="#" class="read-more">...Read More</a> </p>
                 </div>
             </article>

             <?php endwhile; ?>
             <!-- list_view-->

             <?php wp_reset_query(); ?>

         </section><!-- section --> 
```

# boilerplatejs - 样板 js 在模块之间共享数据

> ID：14596443
> 
> 赞同：2
> 
> 时间：2013-01-30T03:57:53.487
> 
> 标签：boilerplatejs

我需要一种在模块之间共享信息的方法——不仅是在同一模块中的组件之间——。我有公共数据要在不同的 moduleContext 之间共享。

- 我尝试使用应用程序上下文（moduleContext.getParentContext().setSettings() 或 getSettings()，但每个模块上下文都有不同的 moduleContext.getParentContext()。

-我也尝试为应用程序创建一个单例对象，但即使在这种情况下，第一个模块（登录页面）的单例数据也不适用于其他模块。

-我尝试的第三件事是通过通知（通知/侦听）传递数据，结果相同。

有谁知道如何解决这个问题？

马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:51:55.160

如果要保持模块树之间的关系，则有必要通过调用来创建模块层次结构：

parentContext.loadChildContexts(moduleContexts);

完成后，该方法确保子上下文的“事件中介”设置为与父上下文完全相同的“中介”实例。然后在任何模块上发生的事件将被通知到同一模块树中的所有上下文。

设置也是一样的。当使用“loadChildContexts”方法时，父上下文的设置被“复制”到子上下文设置。

如果它仍然不适合你，你能把你的代码分享给我吗？我可以帮你找出问题所在。

# visual-studio-2012 - 用于行号和异常管理的 Visual Studio 2012 插件？

> ID：14596444
> 
> 赞同：1
> 
> 时间：2013-01-30T03:58:06.443
> 
> 标签：visual-studio-2012, add-on

我正在寻找 Visual Studio 2012 的免费（或廉价）插件来：

*   将行号添加到过程、类或整个项目

*   向代码块或子代码添加异常管理（如果可能，参数化异常代码）

我在 Visual Studio 2010 上使用 mz-tools 来处理这两件事，但我没有升级到 Visual Studio 2012 的 mz-tools 许可证，我不想再为 2 个功能支付 70 美元（我不知道使用其他 mz-tools 工具）

非常感谢！

更新：

我不想查看文件行号，我想查看代码行号，例如：

```
20:         Dim sw As IO.StreamWriter = IO.File.AppendText(".\debug.log")
30:         Dim s As String

40:         s = DateTime.Now.ToString 

50:         sw.Write(s)
60:         sw.WriteLine()
70:         sw.Close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:05:58.197

如果你去，已经可以看到行号

> 工具 --> 选项 --> 文本编辑器（在左侧窗格中） --> 所有语言

`Line Numbers`现在您会在“显示”组的右侧找到一个小复选框。选中它以获取源代码上的行号。

**编辑：这是在 VS 2010 Ultimate**

**第二次编辑：**

这就是我最后看到的：

![行号](../Images/993e079ce4f897ab24ea5ec2010d055a.png)

这和你问的不一样吗？

**第三次更新**：

好的，现在我明白了！.. 我希望[这里的链接](https://stackoverflow.com/questions/2646154/best-vs2010-extensions)能帮助你。如果它确实有帮助，那么将我的帖子标记为答案。

# java - Java垃圾回收机制

> ID：14596447
> 
> 赞同：1
> 
> 时间：2013-01-30T03:58:35.640
> 
> 标签：java

当我们这样写时： { new A().test(); } 这个函数返回后A的内存会被gc回收（我知道可以回收，现在不能回收）。问题是，jvm如何确保在test（）执行期间不会实现A的内存（我假设gc是一个独立的线程）。我认为编译器可能会将语句更改为：

```
{
    //cover it in a scope
    {
    A temp = new A();
    temp.test();
    }
    //outside the scope, temp is no longer stay in stack, so that A's memory can be colllected
} 
```

这只是一个猜想。顺便说一句，非常抱歉我的英语不好，请使用简单的语法（回答或解释），谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:29:47.953

gc 检查对象的可达性。您的对象被分配在堆上，并且对它的引用被放置在当前正在执行的方法的堆栈中，这使得 gc 可以访问它，因此它不会被收集。

当您的方法返回时，堆栈内存不再“可访问”，因此对堆中对象的单一引用消失了，因此 gc 可以自由地将其标记为收集。

您的“temp”变量只是编译器创建的那个引用的漂亮名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:14:00.880

编译器生成字节码，以确保堆栈上有对 A 的临时引用，有点像您的示例。

# php - 在 PHP 中存储字符串集合哪个更快/更好

> ID：14596448
> 
> 赞同：0
> 
> 时间：2013-01-30T03:58:40.490
> 
> 标签：php, arrays, isset

我正在尝试创建一个数组来存储我之前访问过的节点。节点将由一个字符串唯一表示，并且该***字符串可以很长***。因此，我想知道这两种实现中的哪一种会更快或更可扩展。

```
$stateString = "..... ....";
$states = array(); 
```

1) 将 stateString 存储为键

```
$states[$stateString] = true; // I just want to set the key in the array
$visited = isset($states[$stateString]); 
```

2) 将 stateString 存储为一个值

```
$states[] = $stateString;
$visited = in_array($stateString, $states); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:00:09.517

存储为密钥要快得多（对于您正在谈论的随机查找）。

# ruby-on-rails-3 - 关闭会话后 Rails 延迟作业失败

> ID：14596451
> 
> 赞同：0
> 
> 时间：2013-01-30T03:59:26.843
> 
> 标签：ruby-on-rails-3, delayed-job

我使用延迟作业 gem 来处理我的电子邮件传递。它在开发中运行良好，我对此感到非常满意。但是，在我部署到服务器后，当我使用命令时：

```
RAILS_ENV=production script/delayed_job start 
```

它会起作用的。我检查了日志文件和数据库，一切都很好，我可以按预期接收邮件。但是，当我从服务器退出时，什么都不会发生。

我使用 sequel pro 检查了我的数据库，发现**延迟的作业在数据库中创建了一行，并且在 run_at 列中的时间之后，该行将消失，但无法接收邮件**。当我再次登录时，延迟的作业进程仍在运行，日志没有什么奇怪的，但我只是无法接收我想的电子邮件。我不能一直保持我的自我登录。没有延迟的工作，我可以使用传统的方式，它工作正常但速度慢。**为什么我退出服务器后延迟作业失败？**

这是我在 config/initializers/delay_job.rb 中的延迟作业设置

```
require "bcrypt"

Delayed::Worker.max_attempts = 5
Delayed::Worker.delay_jobs = !Rails.env.test?
Delayed::Worker.destroy_failed_jobs = false 
```

PS我不确定这与独立乘客有什么关系，因为我必须使用不同版本的导轨，所以我必须使用端口 3002 的独立乘客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:39:52.957

我想我已经找到了解决方案。

通读此[https://github.com/collectiveidea/delayed_job/wiki/Common-problems#wiki-jobs_are_silently_removed_from_the_database](https://github.com/collectiveidea/delayed_job/wiki/Common-problems#wiki-jobs_are_silently_removed_from_the_database)

我很快意识到我可能会错过配置文件中的“require bcrypt”。

我使用 RVM 并且有很多 gemset，但只有这个特定的 gemset 有 gem bcrypt-ruby。在我注销系统后，延迟的作业可能会使用全局或默认 gemset，因此我在所有 gemset 中安装 bcrypt-ruby 并重新启动独立乘客，它就可以工作了！

但是，我仍然不知道 bcrypt 和延迟工作之间的联系。

# java - JProgressBar 仅在使用 Java 1.7 的 Mac 上不动画

> ID：14596452
> 
> 赞同：2
> 
> 时间：2013-01-30T03:59:29.443
> 
> 标签：java, macos, swing, event-dispatch-thread, jprogressbar

下面是一些在 EDT 上创建和显示 JProgressBar 的代码。在 Apple 的 Java 6 上，进度条是动画的。在 Oracle 的 Java 7 上，它不会：

```
import javax.swing.*;

public class ScratchSpace {

    public static void main(String[] args) {

        System.out.println("java.version = " + System.getProperty("java.version"));
        System.out.println("java.vm.version = " + System.getProperty("java.vm.version"));

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JProgressBar progressBar = new JProgressBar();
                progressBar.setIndeterminate(true);

                JFrame frame = new JFrame();
                frame.getContentPane().add(progressBar);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });

    }
} 
```

准确地说，我使用的是 Java 1.7.0_12-ea 和 OS X 10.8.3。

你能看出我做错了什么吗？如果没有，是否有解决方法？

**编辑：这是文本输出：**

```
java.version = 1.7.0_12-ea
java.vm.version = 24.0-b27 
```

**编辑：[这似乎是一个已知问题](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7168926)**

所以现在我的问题是：我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:35:04.430

由于这是一个已确认的 JRE 错误，因此解决方法将是相当骇人听闻的。

如果您仅在不确定模式下使用进度条（换句话说，您不需要显示实际进度，只需显示长时间运行的任务），请尝试使用[SwingX](http://swingx.java.net/)的 JXBusyLabel 代替。（注意：祝你好运找到文档......现在所有的链接似乎都被打破了）

如果这不是一个选项，您可以尝试使用计时器定期强制重绘的旧 VB6 方法。天真的实现：

```
import javax.swing.*;

public class ScratchSpace {

    public static void main(String[] args) {

        System.out.println("java.version = " + System.getProperty("java.version"));
        System.out.println("java.vm.version = " + System.getProperty("java.vm.version"));

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JProgressBar progressBar = new JProgressBar();
                progressBar.setIndeterminate(true);

                int delayMilliseconds = 250;
                Timer repaintTimer = new javax.swing.Timer(delayMilliseconds, new ActionListener(){
                    @Override
                    public void actionPerformed(final ActionEvent ae) {
                        progressBar.repaint();
                    }
                });
                repaintTimer.start();

                JFrame frame = new JFrame();
                frame.getContentPane().add(progressBar);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });        
    }
} 
```

# java - while循环中的数组索引越界异常

> ID：14596454
> 
> 赞同：0
> 
> 时间：2013-01-30T03:59:34.017
> 
> 标签：java, arrays, exception

我有这个有趣的`ArrayIndexOutofBounds`例外。

代码是这样的：

```
int m = 0;
while (scan.hasNextInt())
{
    intArray[m++] = scan.NextInt();
} 
```

我只是将一堆整数扫描到一个数组中，但总是`ArrayIndexOutofBounds`出错。我以为我`int m`的已经初始化为零了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:03:26.597

`inputString.length()`返回字符串中的字符数。它不一定对应于字符串中的数字数量。您需要在`while`语句中添加另一个条件以确保它`m`不会大于`intArray.length`. 此外，您可能希望使用调试器单步执行代码，以确定数组何时用完空间。

由于 java 数组是固定大小的，如果您不知道输入的大小，您应该使用它`ArrayList<Integer>`来存储您的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:00:59.843

1.  数组中是否有任何元素可以开始？

2.  在循环的未来迭代中，m 不为零，因为您在循环内递增它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:09:24.583

ArrayIndexOutofBounds 意味着您的数组不足以容纳您放入其中的值的数量。你在哪里初始化数组intArray？

如果您不知道扫描仪预先有多少值（我认为是这种情况），您可能想要使用 ArrayList 代替。

像这样的东西应该工作..

```
List<Integer> intArray = new ArrayList<Integer>();
while (scan.hasNextInt())
{
    intArray.add(scan.NextInt());
} 
```

如果您需要数组而不是 ArrayLIst 中的最终结果，您可以使用

```
Integer[] newArray = (Integer[])intArray.toArray(); 
```

# mysql - Mysql SUM 基于另一个计算的归档条件

> ID：14596456
> 
> 赞同：0
> 
> 时间：2013-01-30T03:59:55.587
> 
> 标签：mysql, sql, aggregate-functions

共有三个表用户、列表、详细信息。这是我的表结构和数据示例

```
userid username   |  list_id  list_val  user_id  |   detail_id   list_id   multipler
1      user1      |     1       500        1     |      1           1         3
2      user2      |     2       300        1     |      2           1         2
3      user3      |     3       600        1     |      3           2         1
                        4       100        2            4           2         1
                                                        5           3         4

SELECT
users.username,
SUM(lists.lists_var),
FROM
users
INNER JOIN lists ON users.userid = lists.user_id
GROUP BY
users.username
HAVING
(SELECT (exp(sum(log(COALESCE(details.multipler, 1))))) FROM details WHERE
details.list_id = lists.list_id) > 3 
```

这个查询给了我结果

```
user1 - 1400 
```

但我想要一些 IF multipler_total > 3 THEN SUM(list_val) 所以结果必须是：

```
user1 - 1100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:03:20.247

试试这个：

```
SELECT
users.username,
SUM(lists.lists_var),
FROM
users
INNER JOIN lists ON users.userid = lists.user_id
INNER JOIN (SELECT list_id, SUM(multiplier) mult_total FROM details GROUP BY list_id) d
ON d.list_id = lists.list_id and d.mult_total > 3
GROUP BY
users.username 
```

# java - iOS远程MySQL数据库，技术推荐

> ID：14596461
> 
> 赞同：0
> 
> 时间：2013-01-30T04:00:21.250
> 
> 标签：java, python, mysql, ios, ruby

有一个与新闻相关的 Web 应用程序，它使用 MySQL 数据库并向用户提供基于 Web 的界面。

我想构建一个 iOS 应用程序，它也具有移动界面。用户界面非常简单，我有这方面的经验。

问题出在数据库上，我没有经验。我将学习数据库，并可能参加 Coursera 课程。我不是要你教我这个。我只想知道在接下来的几个月里我应该把时间投入到哪些技术上。

到目前为止，我的理解是应用程序不应该直接与数据库对话，而应该在服务器上有一个人代表应用程序与数据库对话。

这是我想清楚理解的问题和部分，如果我错了，请纠正我。

我将不得不编写某种在服务器上运行并与数据库对话然后与应用程序通信的 unix 程序？如何？使用网络视图？使用 unix 套接字与应用程序通信？SSH？苹果哪款好？

我更喜欢在服务器上写这样的东西：python（有经验）、java（有经验），也许还有 ruby​​（没有经验）。我宁愿避免使用脚本语言。

他们还好吗？哪一个最适合？另外，这个中间人是否必须在具有数据库的同一台服务器上，或者可以是互联网上的另一台机器（我更喜欢这个，所以我可以把它放在我自己的 VPS 上，而不必搞砸服务器机器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:59:22.243

这与今晚的[另一个问题](https://stackoverflow.com/questions/14595343/using-mysql-in-ios-app/14595417)相似，但你是从不同的角度来回答的。

一般来说，需要能够在离线模式下运行的 iOS 应用程序需要有自己的数据库。这意味着创建 Core Data 模型来存储应用程序所需的所有数据。这在内部存储在 SQLite 数据库中。

如果您想制作一个仅在线的应用程序，这会稍微容易一些，因为您无需担心核心数据部分，而是可以专注于构建您的服务 API。如果您熟悉 Python，那么最好的选择是[Django](https://www.djangoproject.com/)来提供该层。您需要实现一些可以接收请求的端点，将其转换为适当的数据库调用，然后以机器可读的格式呈现结果。

即使对于大规模系统，脚本语言也是大多数后端的动力。在大多数情况下，数据库将成为瓶颈，而不是用于与之交互的语言。甚至 Twitter 也坚持使用 Ruby，直到它们达到数千万活跃用户，所以除非你处于那个水平，否则不要担心。

对于大多数应用程序，使用 HTTP 作为传输机制并使用[JSON](http://json.org/)作为编码方法是可行的方法。它的构造非常简单，易于使用，并且相当易于阅读。您可能有很多方法可以阅读和编写此内容，但这是另一个问题。

对于用户数量以数百计的小型应用程序，您可以将应用程序和数据库托管在同一台服务器上。即使是具有 512MB 内存的普通 VPS 也可以完成这项工作，但对于较重的负载，您可能需要投资 1GB 实例。这实际上取决于人们访问您的应用程序的频率以及峰值负载是什么样的。

# spring - 从 Maven 命令行获取 HSQL 连接时 JPA 测试挂起

> ID：14596466
> 
> 赞同：5
> 
> 时间：2013-01-30T04:00:32.380
> 
> 标签：spring, jpa, datasource, hsqldb, dbunit

测试在 Eclipse 中单独工作（右键单击，以 Junit 身份运行），但是当我使用 maven 从命令行运行它们时，它会在尝试获取与 HSQL 数据库的 DataSource 连接时停止。

```
LogicalConnectionImpl [DEBUG] Obtaining JDBC connection 
```

对我来说最奇怪的是，如果我将运行的测试限制为 10 个（不是类，而是单个 @Test 方法），它将起作用。但是一旦第 11 次测试运行，它就会爆炸。测试组合无关紧要，所以如果我有 30 个测试，并且我选择 11 个或更多来运行，那么它将失败。这让我认为这是一个 DataSource 连接最大问题，但到目前为止还没有详细说明。我曾尝试仅为咯咯笑而添加堆大小，但这没有用。

所以在这个挂起之前，我有多个成功的 JDBC 连接和发布。

这是我的 applicationContext-HSQL.xml，它用于 Eclipse 和命令行版本。我知道 b/c 我已经通过弄乱下面的 Class 值来迫使他们每个人失败。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:flow="http://www.springframework.org/schema/webflow-config"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xmlns:osgi="http://www.springframework.org/schema/osgi"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:p="http://www.springframework.org/schema/p"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/webflow-config http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd
          http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
          http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi-3.0.xsd
          http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
          http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="com.company"/>

    <import resource="classpath*:/application-context-cxf.xml"/>

     <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceXmlLocation" value="META-INF/persistence.xml"  />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="false" />
                <property name="generateDdl" value="false" />
                <property name="databasePlatform" value="org.hibernate.dialect.HSQLDialect" />
            </bean>
        </property>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:test" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>

    <tx:annotation-driven />
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" >
        <property name="entityManagerFactory" ref="entityManagerFactory"  />
    </bean>
</beans> 
```

我所有的测试类都使用 Spring 3.2.5、JPA、DBUnit 并扩展 AbstractInMemoryTests.java

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:applicationContext-hsqldb.xml"})
public class AbstractInMemoryTests {

private static final String FLAT_XML_DATASET = "FlatXmlDataSet.xml";

@Autowired
BasicDataSource bds;

@Before
public void setUp() throws Exception {
    DatabaseOperation.CLEAN_INSERT.execute(getConnection(), getDataSet());
}

@SuppressWarnings("deprecation")
private IDataSet getDataSet() throws Exception {
    InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream(FLAT_XML_DATASET);
    IDataSet dataset = new FlatXmlDataSet(inputStream);
    return dataset;
}

private IDatabaseConnection getConnection() throws Exception {
    Connection jdbcConnection = bds.getConnection();
    IDatabaseConnection connection = new DatabaseConnection(jdbcConnection);
    return connection;
}
} 
```

关于我为什么会挂在那个连接上的任何想法，或者关于如何排除故障的想法？

谢谢，肖恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:02:53.533

根据通常的协议，睡个好觉可以帮助您思考。我完全忽略了可用于我的 DataSource 的 appContext-hsqldb.xml 属性的 maxActive 设置

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" value="jdbc:hsqldb:mem:test" />
    <property name="username" value="sa" />
    <property name="password" value="" />
    ****<property name="maxActive" value="-1"/>****
</bean> 
```

希望这对将来的其他人有所帮助。

[http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:48:19.800

如果有东西挂起，您可以在 Unix 上使用“kill -3 {process_number}”，它会提供一个线程转储（如果不是在 Unix 上，则在 Windows/Mac 上有一个等价物）。这将显示锁定问题的位置，这可能会让您了解导致它的原因以及如何修复它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T13:51:31.700

如果在几次页面访问之后挂起（可能是 8，这是默认的 maxTotal），那么您不会永远关闭连接并在每个请求中打开。只需`entityManager.close();`在数据库查询之后使用或在创建新连接之前检查连接是否已经存在。

接受的答案是将 maxTotal 连接设置为无限制。连接只会不断增加。

# node.js - Express：如何将变量传递给挂载的中间件

> ID：14596467
> 
> 赞同：6
> 
> 时间：2013-01-30T04:00:38.503
> 
> 标签：node.js, design-patterns, express

我刚刚开始使用 Expressjs，我想知道如何将变量传递给已安装的中间件/子应用程序。在以下示例中，我希望将配置对象传递给我的 /blog/index

在 app.js 中

```
var express = require('express');
var app = express();
//...
var config = {}
//...
app.use('/blog', require('./blog/index') 
```

在 /blog/index.js

```
var express = require('express');
app = module.exports = express();

app.use(express.static(...
app.get('/', function(req, res, next) {
  //handle the req and res
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T05:20:06.500

我在这里看到两个选项：

1.  由于您的`blog`应用程序是一个快速应用程序，因此您可以使用`app.set`和`app.get`. 例如

    ```
     blog = require('./blog/index');
     blog.set('var1', value1);
     blog.set('var2', value2); 
     ...
     app.use('/blog', blog); 
    ```

    并在`blog/index.js`使用`app.get('var1')`中获取 的值`var1`。

2.  您可以将 express 应用程序包装`blog`在另一个接受配置参数的函数中（很像`static`中间件接受目录名称）并返回配置的应用程序。如果你想要一个例子，请告诉我。

**编辑：**第二个选项的示例

app.js 看起来像这样：

```
var blog = require('./blog/index');
...
var config = {};
app.use('/blog', blog(config)); 
```

和 /blog/index.js 像这样：

```
var express = require('express')

module.exports = function(config) {
    var app = express();
    // configure the app and do some other stuffs here
    // ...

    return app;
} 
```

# ruby - 设置实例变量

> ID：14596469
> 
> 赞同：-2
> 
> 时间：2013-01-30T04:00:46.867
> 
> 标签：ruby

如果我有一个特定的值分配给一个实例变量，我如何定义一个方法来重新分配这个变量的值？当我在下面运行代码时`rspec`，我不断获得原始值。

```
class Test
 def name 
   @name = 'me'
 end

 def name=(input)
   @name = input
 end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:07:22.533

```
def name 
  @name = 'me'
end 
```

每次调用上述方法时，都会设置并`@name`返回`'me'`它。

相信你在找`||=`运营商

```
def name
  @name ||= 'me' # only set @name to 'me' if it is not already set
end 
```

IMO，完成默认值的最佳方法`@name`是：

```
class Test
  attr_accessor :name

  def initialize
    @name = 'me'
  end
end 
```

例子：

```
t = Test.new
t.name
 # => "me" 
t.name = 'foo'
 # => "foo" 
t.name
 # => "foo" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:06:55.643

因为您`@name`在 getter 中设置变量，所以您应该只返回它。像这样：

```
class Test
  def name
    @name
  end

  def name=(input)
    @name = input
  end
end 
```

或者更简单地说，您应该只使用该`attr_accessor`方法来声明 getter 和 setter 方法的样板版本。像这样：

```
class Test
  attr_accessor :name
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:09:56.177

初始值应在构造方法中设置。

```
class Test
 def initialize
   @name = 'me'
 end

 def name 
   @name
 end

 def name=(input)
   @name = input
 end
end 
```

您可以使用它`attr_accessor`来简化代码：

```
class Test
  attr_accessor :name

  def initialize
    @name = 'me'
  end
end 
```

# javascript - 如何在从服务器端传递的 javascript 中访问 Dictionary Generic 对象

> ID：14596478
> 
> 赞同：1
> 
> 时间：2013-01-30T04:01:34.830
> 
> 标签：javascript, dictionary

我想在 javascript 中访问 Dictionary Generic 对象（从 asp.net 服务器端传递）... & 我还想将该字典作为键、值对检索..

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-14T08:54:54.663

如果您使用的是 MVC，则可以通过以下方式轻松实现：

```
<script type="text/javascript">
  var model = @Html.Raw(Json.Encode(Model));
  // go ahead and use the model javascript variable to bind with ko
</script> 
```

您只需将 传递给包含该代码位的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T09:14:15.057

它有点简单，尝试使用下面的代码。

```
<script type="text/javascript">
     var perm =@Html.Raw(Json.Encode(@ViewBag.Message));
</script> 
```

# objective-c - 与Objective C的sqlite连接

> ID：14596479
> 
> 赞同：3
> 
> 时间：2013-01-30T04:01:45.757
> 
> 标签：objective-c, sqlite

我有一段简单的代码用于连接我的 sqliteDb。我的 sqlite3_prepare_v2 虽然反复失败。我将其缩小到以下代码：

```
NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"xyz" ofType:@"sqlite3"]; 
```

sqLiteDb 返回 null。我不知道为什么-尽我所能并关注了许多线程。在这里真的很挣扎-请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:05:59.450

尝试这个

in.h 文件

```
 NSString *databasePath;

in .m file

NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,               NSUserDomainMask, YES);
  NSString *documentsDir = [documentPaths objectAtIndex:0];
  databasePath = [documentsDir stringByAppendingPathComponent:@"dbname.sqlite"];    
  [self checkAndCreateDatabase];

-(void) checkAndCreateDatabase
    {
     // Check if the SQL database has already been saved to the users phone, if not then copy it over
     BOOL success;

     // Create a FileManager object, we will use this to check the status
     // of the database and to copy it over if required
     NSFileManager *fileManager = [NSFileManager defaultManager];

     // Check if the database has already been created in the users filesystem
     success = [fileManager fileExistsAtPath:databasePath];

     // If the database already exists then return without doing anything
     if(success) return;

     // If not then proceed to copy the database from the application to the users filesystem

     // Get the path to the database in the application package
     NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath]  stringByAppendingPathComponent:databaseName];

     // Copy the database from the package to the users filesystem
     [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:18:01.463

您确定您的`xyz.sqlite3`文件包含在正确的 Target Membership 中吗？如果不包含它，那么在构建时它不会被复制到你的包中。

![截屏](../Images/3de01792e318221e4ea8defcb8a75392.png)

# c# - C# 多次单击按钮时更改标签文本

> ID：14596486
> 
> 赞同：0
> 
> 时间：2013-01-30T04:03:14.677
> 
> 标签：c#, visual-studio-2010

抱歉，我是新手，只是想知道是否有人可以提供帮助，我试图让我的标签在每次单击按钮时更改其文本。不知道我应该怎么做。谁能帮助我。

```
private void button1_Click(object sender, EventArgs e)
    {  
        string[] MonthName;
        MonthName = new string[12];

        MonthName[0] = "January";
        MonthName[1] = "February";
        MonthName[2] = "March";
        MonthName[3] = "April";
        MonthName[4] = "May";
        MonthName[5] = "June";
        MonthName[6] = "July";
        MonthName[7] = "August";
        MonthName[8] = "September";
        MonthName[9] = "October";
        MonthName[10] = "November";
        MonthName[11] = "December";

            label1.Text = (MonthName[0]);
            label1.Text = (MonthName[1]); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T04:07:21.413

这样做可能更容易：

```
DateTime currentDate = new DateTime(DateTime.Now.Year, 1, 1); // Per Habib's suggestion

private void button1_Click(object sender, EventArgs e) {
    label1.Text = currentDate.ToString("MMMM");
    currentDate = currentDate.AddMonths(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:38:04.833

这应该可以解决问题：

在类中声明数组和一个int

```
string[] MonthName = { "Jan", "Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec" };
    static int i = 0; 
```

然后在按钮中单击

```
protected void btnAddMonth_Click(object sender, EventArgs e)
{
    lblMonth.Text = MonthName[i];
    i = (i+1) % 12;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:37:33.823

1.  将数组初始化移到单击处理程序之外。
2.  有一个隐藏标签，用于存储计数器以确定要选择数组中的哪个元素。

类似于下面的代码。请注意，这不是最优雅的代码，但我想保持简单，因为您说您是新手。

```
var Months = new List<string>
            {
                   "January",
                   "February",
                   "March",
                   "April",
                   "May",
                   "July",
                   "August",
                   "September",
                   "October",
                   "November",
                   "December"
            };

private void button1_Click(object sender, EventArgs e)
{
        if(string.IsNullOrEmpty(labelHiddenCounter.Text))
            labelHiddenCounter.Text = "0";

        if(labelHiddenCounter.Text == "11")
            labelHiddenCounter.Text = "-1";

        var nextCounter = Convert.ToInt32(labelHiddenCounter.Text) + 1;

        label1.Text = (Months[nextCounter]);

        labelHiddenCounter.Text = nextCounter.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T20:00:40.273

如果您希望在单击按钮时出现随机月份，请使用。

```
 var random = new Random();
        var months = new List<string>
        {
             "Jan", 
             "Feb", 
             "Mar", 
             "Apr", 
             "May", 
             "Jun", 
             "Jul", 
             "Aug", 
             "Sep", 
             "Oct", 
             "Nov", 
             "Dec"
        };

        int index = random.Next(months.Count);
        label1.Text = (months[index]); 
```

# java - JButton 上的 ImageIcon 未显示在 Runnable JAR 文件中

> ID：14596487
> 
> 赞同：4
> 
> 时间：2013-01-30T04:03:15.960
> 
> 标签：java, image, swing, awt, embedded-resource

我的 GUI 上有 6 个 JButton，上面都有图像，当我编译并运行代码时，JButton 上的所有图像都完美显示，但在可运行的 JAR 文件中，JButton 上的图像没有显示出来。我该如何解决这个问题？

**我在我的代码中使用此方法在 JButtons 上显示图标**

```
ImageIcon SettingsIc = new ImageIcon("bin/images/settings.png");
jb1 = new JButton(SettingsIc);
jb1.setFocusPainted( false );
//jb1.setBorderPainted(false); 
jb1.setContentAreaFilled(false); 
```

**这是我在 Eclipse 中编译代码时 GUI 的外观** ![在此处输入图像描述](../Images/64ea74219493e7e6145202d3ea37bf7a.png)

**这是我的 GUI 在执行 Runnable JAR 文件后的样子** ![在此处输入图像描述](../Images/94615469a2a63dba5d8df3c02f9cdedb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:13:57.197

这（正如许多人指出的那样）

```
ImageIcon SettingsIc = new ImageIcon("bin/images/settings.png"); 
```

建议您尝试从`bin/images`文件系统外加载图像。这是从应用程序执行点开始的相对路径。

`ImageIcon`如果文件不存在，不会抱怨。

如果可能的话，最好将资源嵌入到 Jar 文件中（这将使部署更容易）并使用类似`getClass().getResource("/bin/images/settings.png")`加载图像的方法。

如果可能，您应该尝试使用来加载图像，如果/指向的资源不存在（或无效）`ImageIO.read(URL)`，它将引发异常。`File``URL`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-28T05:36:32.053

只需将 jar 和图像保存在同一个文件夹中并保留

`ImageIcon icon = new ImageIcon("image.jpg");`

在代码中

# ios - 最简单、最有效的方式来遮蔽 UIImageview 的角落

> ID：14596490
> 
> 赞同：1
> 
> 时间：2013-01-30T04:03:27.587
> 
> 标签：ios, xcode, animation, uiimageview

我的应用程序有大量世界各地不同城市的图像，问题是，其中一些图像与右下角的白色标签效果不太好，我想知道是否有某种方法可以模糊或遮蔽角落并且仅遮蔽那个角落，以使所有图像与标签看起来都很好。示例：（是的，我知道标签与城市不匹配，我还没有导入所有城市。）

![](../Images/b633e1605bc0ef20c04c6a326fec5a98.png)

那个可能看起来不错。

![在此处输入图像描述](../Images/9a37a23c9ebfbb6a22b6164d2cab15d4.png)

但是这个可以使用一些阴影。无论如何，我要让 UIImageView 在右下角有某种模糊/遮蔽阴影效果，以使所有图像看起来都不错，而无需对数百张单张照片进行 Photoshop 处理？非常感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:15:41.460

您可以使用[CILinearGradient](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/uid/TP40004346)仅在一个角落获得渐晕效果：

![在此处输入图像描述](../Images/83693248c7badff8e58586e990c79d16.png)

```
- (CIImage*) processPhoto:(CIImage*)image {
    CGFloat width = [image extent].size.width;
    CGFloat height = [image extent].size.height;

    CIFilter* gradient = [CIFilter filterWithName:CILinearGradient];

    [gradient setValue:
        [CIVector vectorWithX:width*0.75 Y:height*0.5]
                forKey:@"inputPoint0"];

    [gradient setValue:
        [CIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:0]
                forKey:@"inputColor0"];

    [gradient setValue:
        [CIVector vectorWithX:width*0.85 Y:0]
                forKey:@"inputPoint1"];

    [gradient setValue:
        [CIColor colorWithRed:0 green:0 blue:0 alpha:0.7]
                forKey:@"inputColor1"];

    CIImage* croppedImage =
        [gradient.outputImage imageByCroppingToRect:[image extent]];

    CIFilter* composite = [CIFilter filterWithName:CIHardLightBlendMode];
    [composite setValue:croppedImage forKey:kCIInputImageKey];
    [composite setValue:image forKey:kCIInputBackgroundImageKey];
    return composite.outputImage;
} 
```

您可能想要更多地调整端点和渐变以获得最佳结果。

或者，如果您更喜欢方形外观，您可以在文本和具有黑色背景且不透明度约为 0.4 的图像之间粘贴一个 UIView：

![在此处输入图像描述](../Images/d870956cb945851c3a4410af0c95f7f5.png)

设计方面，我认为这是一种更好的方法，但代码并不那么有趣！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T05:13:12.803

您可以更改图像的 CALayer 属性..这是非常有效和强大的试试这个：

UIView *view = [[UIView alloc] initWithFrame:frame];

view.layer.shadowColor = [[UIColor COLOR] CGColor];

view.layer.shadowRadius = 5.0;

view.layer.cornerRadius = 5.0;

# c++ - 在 VC++ 中使用 GetOpenFileName() API 打开文件夹而不是文件

> ID：14596493
> 
> 赞同：0
> 
> 时间：2013-01-30T04:03:47.860
> 
> 标签：c++, winapi, visual-c++, dialog, menuitem

BOOL WINAPI GetOpenFileName( *Inout* LPOPENFILENAME lpofn );

用于在 VC++ 程序中打开文件，比如说

> C:\你好\世界\abc.txt

. 但我想用这个功能来选择一个文件夹

> C:\Hello\World 里面有一个文件。

我想我需要对结构“OPENFILENAME”的成员进行一些更改。任何人都可以让我知道如何在 VC++ 程序中实现这一点。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:10:10.517

`GetOpenFileName`根本不支持文件夹选择。

您的选择是：

*   `SHBrowseForFolder`它在 Windows 2000 及更高版本上可用，但看起来有点难看。
*   `IFileDialog`这是平台本机文件夹选择器，但仅适用于 Vista 或更高版本。要使对话框充当文件夹选择器，请传递`FOS_PICKFOLDERS`给`SetOptions`.

在我看来，对用户来说最好的结果是在可用的`IFileDialog`地方使用，但回退到`SHBrowseForFolder`旧操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:45:09.803

有[ShBrowseForFolder](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762115.aspx)。如果您搜索，周围有很多 C++ 示例。

# ios - iTunes 搜索查找所有开发人员应用程序

> ID：14596499
> 
> 赞同：5
> 
> 时间：2013-01-30T04:04:37.110
> 
> 标签：ios, iphone, itunes

有没有办法使用 iTunes 查找来显示开发人员拥有的所有应用程序？例如：

```
https://itunes.apple.com/lookup?devid=123 
```

我也试过：

```
http://itunes.apple.com/search?media=software&term=Developer Name 
```

但这也没有用。想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T04:18:56.037

要获取开发人员的详细信息，

```
https://itunes.apple.com/lookup?id=514675684 
```

要获取该开发者的所有应用，

```
https://itunes.apple.com/lookup?id=514675684&entity=software 
```

要获取基于本地化的应用程序，

```
https://itunes.apple.com/lookup?id=514675684&entity=software&country=in 
```

或者，`itunes.apple.com/in/lookup?id=514675684&entity=software`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-29T02:15:21.343

如果您想按开发者名称搜索应用程序，则需要包含`attribute=softwareDeveloper`，如下所示：[https ://itunes.apple.com/search?term=milk+llc&entity=software&attribute=softwareDeveloper](https://itunes.apple.com/search?term=milk+llc&entity=software&attribute=softwareDeveloper)

（感谢 Ted Hosmann 的评论[iTunes Search Lookup for all a Developers Apps](https://stackoverflow.com/questions/14596499/itunes-search-lookup-for-all-a-developers-apps#comment20559319_14596622)帮助我解决了这个问题。）

嘿，看看这个。文档没有说你可以这样做，但`entity=softwareDeveloper`会返回一个仅包含开发人员的列表：[https ://itunes.apple.com/search?term=milk+llc&entity=softwareDeveloper&attribute=softwareDeveloper](https://itunes.apple.com/search?term=milk+llc&entity=softwareDeveloper&attribute=softwareDeveloper)

# scala - scala 上的 hadoop 有哪些选项

> ID：14596500
> 
> 赞同：24
> 
> 时间：2013-01-30T04:04:37.313
> 
> 标签：scala, hadoop, mapreduce, jvm-languages

我们正在启动一个基于大数据的分析项目，并且我们正在考虑采用 scala（类型安全堆栈）。我想知道可用于执行 hadoop、map reduce 程序的各种 scala API/项目。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T21:58:54.790

绝对检查[烫伤](https://github.com/twitter/scalding)。作为用户和偶尔的贡献者，我发现它是一个非常有用的工具。Scalding API 也意味着与标准 Scala 集合 API 非常兼容。就像你可以在普通集合上调用 flatMap、map 或 groupBy 一样，你可以在 scalding Pipes 上做同样的事情，你可以把它想象成一个分布式的元组列表。还有一个 API 的类型化版本，它提供了更强的类型安全保证。我没有使用 Scoobi，但 API 看起来与他们所拥有的相似。

此外，还有一些其他好处：

*   Scalding 在 Twitter 的生产中大量使用，并且已经在 Twitter 规模的数据集上进行了实战测试。
*   它在 Twitter 内部和外部都有几个积极的贡献者，他们致力于让它变得更好。
*   它可以与您现有的 Cascading 作业互操作。
*   除了 Typed API 之外，它还有一个 Fields API，对于 R 和数据框架框架的用户来说可能更熟悉。
*   它提供了一个强大的[矩阵库](https://github.com/twitter/scalding/wiki/Introduction-to-Matrix-Library)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T06:33:38.340

我在[Scoobi](https://github.com/NICTA/scoobi)上取得了成功。它使用简单，强类型，隐藏了大部分 Hadoop 混乱（通过为您自动序列化您的对象之类的事情），并且完全是 Scala。我喜欢它的 API 的一件事是设计者希望 Scoobi 集合感觉就像标准的 Scala 集合，所以你实际上以几乎相同的方式使用它们，除了操作在 Hadoop 上而不是在本地运行。这实际上使得在开发和测试时在 Scoobi 集合和 Scala 集合之间切换变得非常容易。

我还使用[了 Scrunch](http://incubator.apache.org/crunch/scrunch.html)，它建立在基于 Java 的 Crunch 之上。我有一段时间没有使用它了，但它现在是 Apache 的一部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T14:11:34.593

Twitter 在 Scalding 上投入了大量精力，包括一个不错的 Matrix 库，可用于各种机器学习任务。我也需要试试 Scoobi。

为了完整起见，如果您不喜欢 MapReduce，请查看[Spark](http://spark-project.org/)项目。它在许多场景中的表现要好得多，包括在他们的 Hive 到 Spark 的端口中，适当地称为[Shark](http://shark.cs.berkeley.edu/)。作为 Hive 的频繁用户，我对此感到很兴奋。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T04:34:55.787

我可能会研究的前两个是[Scalding](https://github.com/twitter/scalding)（建立在[Cascading](http://www.cascading.org/)之上）和[Scoobi](https://github.com/NICTA/scoobi)。不过，我也没有使用过，但特别是 Scalding，看起来它提供了一个非常好的 API。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-03T10:51:31.457

另一个选择是[Stratosphere](http://stratosphere.eu)，它提供了一个[Scala API](http://stratosphere.eu/docs/0.4/programming_guides/scala.html)，可以将 Scala 类型转换为 Stratosphere 的内部数据类型。

API 与 Scalding 非常相似，但 Stratosphere 本身支持高级数据流（因此您不必链接 MapReduce 作业）。使用 Stratosphere 将比使用 Scalding 获得更好的性能。

Stratosphere 不在 Hadoop MapReduce 上运行，而是在[Hadoop YARN](https://hadoop.apache.org/docs/current2/hadoop-yarn/hadoop-yarn-site/YARN.html)上运行，因此您可以[使用现有的 YARN 集群](http://stratosphere.eu/docs/0.4/setup/yarn.html)。

这是 Stratosphere 中的字数统计示例（使用 Scala API）：

```
val input = TextFile(textInput)
val words = input.flatMap { line => line.split(" ") }
val counts = words
  .groupBy { word => word }
  .count()
val output = counts.write(wordsOutput, CsvOutputFormat())
val plan = new ScalaPlan(Seq(output)) 
```

# php - SQL 查询不会返回行中的内容（PHP）

> ID：14596501
> 
> 赞同：0
> 
> 时间：2013-01-30T04:04:37.183
> 
> 标签：php, sql, database, echo

我的PHP：

```
<?php

function connectDB($user, $pass) {
    try {   
        return(new PDO("mysql:host=localhost;dbname=Test;", $user, $pass));
    } catch(PDOException $ex) {
        return $ex;
    }
}

$db = connectDB("root", "root");
    if ($db instanceof PDOException) {
        die($db->getMessage());
    }
$query = "SELECT * FROM `TABLE`";
$stmt = $db->prepare($query);
$stmt->execute();
$rows = $stmt->fetch();
foreach($rows as $row) {
    echo $row['VALUE1'];
    echo $row['VALUE2'];
    echo $row['VALUE3'];
}
?> 
```

它只回显每个值的第一个字母。

这是我的桌子的样子：

```
VALUE1 VALUE2 VALUE3
gomeow book   nothing
other  book   nothing 
```

它只打印出第一行的第一个字母多次打印出：ggggggbbbbbbnnnnnn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:16:29.023

检查你的错误日志，然后试试这个，然后让我知道 -

```
$rows = $stmt->fetch(PDO::FETCH_BOTH);
print_r($rows); 
```

# spring - hibernate.cfg.xml 无法使用 Tomcat/Spring 2 重新加载

> ID：14596502
> 
> 赞同：0
> 
> 时间：2013-01-30T04:04:38.157
> 
> 标签：spring, hibernate

我正在使用带有 Tomcat 和 Hibernate 的旧 Spring 2 应用程序。我的印象是我可以更改 hibernate.cfg.xml 中的一些设置，重新启动 Tomcat，新设置（如数据库连接）就会生效。然而，旧的设置仍然存在。我必须做些什么才能使这些新变化通过？这是一个xml的例子：

```
<property name="connection.username">career</property>
    <property name="connection.url">jdbc:oracle:thin:@192.168.76.46:1521:ISDD</property>
    <property name="dialect">org.hibernate.dialect.Oracle9Dialect</property>
    <property name="myeclipse.connection.profile">my-careers</property>
    <property name="connection.password">farcri</property>
    <property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property> 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:05:03.910

我不确定你的新设置是什么。无论如何应该找到它们。你想将数据库从一个提供者更改为 oracle。请输入你的 tomcat 输出。你可以做一件事，包括 log4j jar 文件，以便你可以看到tomcat 正在详细做什么。我认为您正在使用 myeclipse..do 项目清理这些东西..转到项目并右键单击然后刷新..关闭 myeclipse 并重新开始。

希望这有助于您找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:28:17.977

事实证明，应用程序没有读取 hibernate.cfg.xml。相反，数据库连接设置被放置在 localhost 的 ROOT.xml 文件中。不知道为什么这会是有利的。以下是 ROOT.xml 文件的相关部分：

```
<Resource name="jdbc/careers" auth="Container"
          type="javax.sql.DataSource" driverClassName="oracle.jdbc.OracleDriver"
          url="jdbc:oracle:thin:@192.168.76.55:1521:ISDD"
          username="career" password="farcri" maxActive="20" maxIdle="10"
          maxWait="-1"/> 
```

# php - JSON数组转PHP/MySQL JSON.parse JSON.stringify如何存储双引号和单引号

> ID：14596503
> 
> 赞同：0
> 
> 时间：2013-01-30T04:04:40.150
> 
> 标签：php, mysql, json, parsing, stringify

我有一个带有字段的表单和一个允许输入任何字符的文本区域。我不能只提交表单，因为表单被多次回收，所以表单值存储在关联数组中：

```
<form name='Theform'>

    <input type="text" id="VISITOR_DETAILS_NAME" value="Joe">
    <input type="text" id="VISITOR_DETAILS_SIZE" value="Large">
    <textarea id='VISITOR_DETAILS_INFO'>
       User can enter anything here including double " and single ' quotes
    </textarea>
<input type="hidden" name="package" id="package" value="" />

</form> 
```

文本区域值与其他表单值一起存储在 JavaScript 数组中：

```
myArray[0]['VISITOR_DETAILS_NAME'] = document.getElementById('VISITOR_DETAILS_NAME').value;
myArray[0]['VISITOR_DETAILS_SIZE'] = document.getElementById('VISITOR_DETAILS_SIZE').value;
myArray[0]['VISITOR_DETAILS_INFO'] = document.getElementById('VISITOR_DETAILS_INFO').value; 
```

我最终得到一个像这样的数组：

```
{
VISITOR_DETAILS_NAME : "Joe",
VISITOR_DETAILS_SIZE : "Large",
VISITOR_DETAILS_INFO : "User can enter anything here including double " and single ' quotes"
}; 
```

**然后我使用JSON.stringify**将此 JavaScript 数组传递给隐藏的表单字段，然后将其发布到 PHP：

```
document.getElementById('package').value = JSON.stringify(myArray[0]);
Theform.submit(); 
```

（现在我只是发布到 iframe 以测试 JSON 是否通过 POST 正确传递 JavaScript 数组）。

当我在 PHP 方面得到它时 - 似乎很好。看起来**JSON.stringify**已将反斜杠添加到双引号**(\" )** - 现在我想将值存储在 MySQL 中。但我想首先测试我可以将 JSON 发送/重建回 javascript 作为一个数组 - 所以我试试这个：

```
parent.myArray[0] = JSON.parse('<?php echo $_POST['package']; ?>'); 
```

我在参数列表后收到 ERROR: **SyntaxError: Expected token ')' OR SyntaxError: missing )**

* * *

这对我来说很奇怪 - 因为当我在没有 POSTING 的情况下尝试它时 - 它似乎像这样工作正常：

```
document.getElementById('package').value = JSON.stringify(myArray[0]); 
```

现在，如果我尝试将**字符串化**值传回数组

```
myArray[0] =  JSON.parse(document.getElementById('package').value); 
```

- 它似乎工作正常 - 没有错误

* * *

**问题：**

*   为什么在尝试从**POSTED JSON.stringify()**值重建 ARRAY 时出现此错误？
*   我是否将这个 JSON.stringify() 值按原样保存在 MySQL 中？
*   还是我先 PHP **json_decode()**它？

我想获取表单数据 - 正确处理 - 将其存储在 MySQL 中，然后在需要时将其读回表单中。

谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:41:11.277

```
parent.myArray[0] = JSON.parse('<?php echo $_POST['package']; ?>'); 
```

在这里，您尝试将 JSON 文本转换为 JSON 文本的 JavaScript 字符串表示的 HTML 表示，但您没有做任何事情来转义它。

如果`'`JSON 数据中有任何字符，那么它们将终止 JavaScript 字符串。

如果`"`JSON 数据中有任何字符，那么它们将被表示为`\"`，但`\"`它是 的 JavaScript 字符串表示`"`。由于您没有对放入 JS 字符串中的文本进行任何转义，因此斜杠字符将被 JavaScript 解析器使用，并且在到达 JSON 解析器之前就会消失。

如果要转换数据以放入 JavaScript 字符串，则需要对其进行转义。

**然而**，JSON 是 JavaScript 的一个子集（几乎）。因此，将 JSON 文本转换为 JavaScript 字符串以便将其解析为 JavaScript 对象的过程过于复杂。您可以跳过直接进入：

```
<script>
var foo = <?php echo $json; ?>
</script> 
```

但是，由于您从客户端获取 JSON，直接回显将使您面临 XSS 攻击。为了解决这个问题，您应该过滤服务器上的数据。

这会：

*   无法解析任何无效的 JSON，因此不会输出错误的 JSON（但它可能什么也不输出，给您一个 JSON 语法错误，您应该应用测试来查看解析是否成功，如果失败则输出合理的默认情况）。
*   `</script>`将数据中的任何内容转换为`<\/script>`可以安全地放置在脚本元素中（因为这就是 PHP 的`json_encode`工作方式

这样的：

```
<!-- I don't do PHP, this is untested -->
<script>
var foo = <?php
    $unsafe_json = $_POST['package'];
    $data_structure = json_parse($unsafe_json);
    $safe_json = json_encode($data_structure);
    echo $safe_json;
?>;
</script> 
```

* * *

> 我是否将这个 JSON.stringify() 值按原样保存在 MySQL 中？还是我先 PHP json_decode() 它？

这取决于您打算如何处理数据。*通常*，将数据放入数据库时​​，最好从数据格式中提取数据并对其进行规范化。这样你就可以对它运行查询。

如果您只打算存储数据然后检索它，您可能可以不这样做并将 JSON 字符串存储在数据库中。但是，这会失去很多灵活性，并且将来可能会咬到您。

# mysql - 什么 MySQL 查询可以返回满足所有条件的结果集，例如返回具有这些“x”关键字的所有照片？

> ID：14596507
> 
> 赞同：1
> 
> 时间：2013-01-30T04:05:11.557
> 
> 标签：mysql, join

我有 3 张桌子：

**照片：身份证、姓名**

**关键字：id，关键字**

**photo_keyword 关系表：photo_id、keyword_id**

换句话说，一张照片可能与描述该照片的多个关键字相关联

```
photos:
id | name
1  | photo 1
2  | photo 2
3  | photo 3

keywords:
id | keyword
1  | NHL
2  | Toronto
3  | Montreal
4  | Boston
5  | Chicago
6  | Canadiens
7  | Leafs

photo_keyword:
photo_id | keyword_id
1 | 2
1 | 7
1 | 1
2 | 1
2 | 3
2 | 6
3 | 2
3 | 7 
```

我想动态编写/构建一个查询，我可以在其中获取满足所有要求的照片列表。

示例：我想要所有以 Toronto (2) 和 Leafs (7) 作为关键字的照片

即）我想检索照片 1 和照片 3，因为它们是具有两个关键字的两个

如果我要求以 NHL (1) Toronto (2) 和 Leafs (7) 作为标准的照片，则只会返回照片 1。

显而易见的第一次尝试涉及加入表格：

```
SELECT photo.id, photo.name
FROM photo
LEFT JOIN photo_keyword ON photo_keyword.photo_id = photo.id
LEFT JOIN keyword ON keyword.id = photo_keyword.keyword_id
WHERE keyword.keyword = 'Toronto' 
```

返回照片 1 和 2

每当我搜索满足 1 个关键字条件的所有照片时，都可以使用这种类型的查询。但是，尝试获取满足两个关键字标准的照片是另一回事。

我试过了

```
 WHERE keyword.keyword IN ('NHL, 'Toronto', 'Leafs') 
```

但这会返回满足任一条件但不一定同时满足两者的照片。在这种情况下，照片 1 和 2 也是如此。

那么如何构建一个只返回满足所有关键字条件的照片的查询呢？

对此的任何帮助将不胜感激！

**更新：**

有了每个人的评论，这就是我汇总的内容，并且似乎符合我的要求：

```
SELECT
    photos.id
FROM photos
LEFT JOIN photo_keyword pk ON pk.photo_id = photos.id
LEFT JOIN keywords kw ON kw.id = pk.keyword_id
WHERE kw.keyword IN ('NHL', 'Toronto', 'Leafs')
GROUP BY photos.id
HAVING COUNT(kw.keyword) = 3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:57:18.343

如果您知道给定照片不能重复关键字，我认为您可以通过以下方式完成此操作：

```
SELECT photo.name from photo where photo.id IN (
SELECT photo.id
FROM photo
LEFT JOIN photo_keyword ON photo_keyword.photo_id = photo.id
LEFT JOIN keyword ON keyword.id = photo_keyword.keyword_id
WHERE keyword.keyword IN ('NHL, 'Toronto', 'Leafs')
GROUP BY (photo.id)
HAVING COUNT (photo.name) = *Number of passed keywords*) 
```

也可以使用 UNIONS 等来执行此操作，但这在很大程度上取决于您对关键字的了解以及如何获取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:31:02.693

试试这个查询 -

```
SELECT p.id, p.name FROM photo_keyword pk
  JOIN keywords k
    ON k.id = pk.keyword_id
   JOIN photos p
     ON p.id = pk.photo_id
GROUP BY
  pk.photo_id
HAVING 
  COUNT(IF(k.keyword = 'Toronto', 1, NULL)) > 0 AND
  COUNT(IF(k.keyword = 'Leafs', 1, NULL)) > 0 
```

# java - 无法正确实现布尔逻辑

> ID：14596508
> 
> 赞同：0
> 
> 时间：2013-01-30T04:05:11.027
> 
> 标签：java, android, boolean, boolean-logic

这是我试图实现的目标：我有 ActioBar，并且在 ActionBar 上有一个名为 Login 的菜单项。单击此登录菜单项时，它会在操作栏中添加一个新选项卡，并在父活动的容器内加载带有 login_layout 的片段。如果我单击任何其他选项卡，登录选项卡就会消失。并且只有在再次单击登录菜单项。登录成功后，我想将菜单项的标题更改为注销。现在将登录菜单项的标题设置为注销后，如果我单击它，它不应该在操作栏上添加任何选项卡，因为用户已经是登录。

我有一个工作代码，直到用户成功登录的部分，因此他登录菜单项的标题已更改为注销。但我遇到的问题是，现在当用户单击注销时，它仍然添加选项卡并显示登录片段。

这样做的简单方法是 menuItem.getTitle() 并根据 menuItem 的当前标题限制操作。但我认为这不是实现此目的的好方法。所以现在我尝试使用标志“loginMenuItemFlag”并尝试解决问题但没有成功。我已经能够让它工作到它改变登录菜单项的标题以注销但当用户单击注销时它再次添加/显示登录选项卡我不想要。谁能告诉我我做错了什么，并指出我正确的方向。谢谢。

下面是我创建 menuItem 并添加选项卡、删除选项卡、更改标志、根据标志值更改菜单项的标题的类的代码：

```
public class HomeActivity extends SherlockFragmentActivity {

String mCurFilter;
static boolean flag,loginMenuItemFlag;
LoginScreenFragment loginFragment;
HomeFragment homeFragment;
CartFragment cartFragment;
MyFragment myFragment;
FragmentTransaction ft, ft2;
ActionBar actionbar;
MenuItem loginItem;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    // ActionBar
    actionbar = getSupportActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    homeFragment = new HomeFragment();
    cartFragment = new CartFragment();
    myFragment = new MyFragment();
    loginFragment = new LoginScreenFragment();

    actionbar.addTab(actionbar.newTab()
            .setText(R.string.home_fragment_title)
            .setTabListener(new MyTabsListener(homeFragment))
            .setTag("HOME"));
    actionbar.addTab(actionbar.newTab()
            .setText(R.string.cart_fragment_title)
            .setTabListener(new MyTabsListener(cartFragment))
            .setTag("CART"));
    actionbar.addTab(actionbar.newTab()
            .setText(R.string.my_fragment_title)
            .setTabListener(new MyTabsListener(myFragment))
            .setTag("MYFragment"));
    if (!flag) {
        ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.fragment_container, homeFragment);
        ft.show(homeFragment);
        ft.add(R.id.fragment_container, cartFragment);
        ft.hide(cartFragment);
        ft.add(R.id.fragment_container, myFragment);
        ft.hide(myFragment);
        ft.add(R.id.fragment_container, loginFragment);
        ft.hide(loginFragment);
        ft.commit();
        flag = true;
    } else {
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar()
            .getSelectedNavigationIndex());
}

@Override
public boolean onCreateOptionsMenu(final Menu menu) {
    loginItem = menu.add(R.string.menuitem_login);
    loginItem.setTitle(R.string.menuitem_login);
    loginItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    loginItem.setOnMenuItemClickListener(new OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            if(!loginMenuItemFlag){
                Tab loginTab = actionbar.newTab()
                        .setText(R.string.login_fragment_title)
                        .setTabListener(new MyTabsListener(loginFragment))
                        .setTag(R.string.login_label);
                actionbar.addTab(loginTab);
                actionbar.selectTab(loginTab);
                loginItem.setVisible(false);
                loginItem.setTitle(R.string.login_label);
                //loginMenuItemFlag = false;
            }
            else{
                loginItem.setTitle(R.string.menuitem_login);
                //loginMenuItemFlag = false;
            }
            return false;
        }
    });
    return true;
}

// removes TAB at a specified position
public void deleteTabAt(int tabPosition) {
    actionbar = getSupportActionBar();
    actionbar.removeTabAt(tabPosition);
}

//setting Login menu Item to visible when Login tab has been removed from the tabs
public void setLoginMenuItemVisible() {
    loginItem.setVisible(true);
}

public void changeLoginMenuFlag(){
    loginMenuItemFlag = false;
}
//chaging Log In menu item to Log out upon successful Log in
public void changeLoginMenutItem(){
    if(!loginMenuItemFlag){
        loginItem.setTitle(R.string.menuitem_logout);
        loginMenuItemFlag = false;
    }else{
        loginItem.setTitle(R.string.menuitem_login);
        loginMenuItemFlag= true;
    }
}

class MyTabsListener implements ActionBar.TabListener {

    public SherlockFragment fragment;

    public MyTabsListener(SherlockFragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        System.out.println("TabReselected " + tab.getPosition());
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        System.out.println("TabSelected " + tab.getPosition());
        ft.show(this.fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        System.out.println("TabUnselected " + tab.getPosition());
        ft.hide(this.fragment);

        //making check if the unselected tab was Login tab(located at tab position 3),if it was a login tab than we remove it from ActionBar
        if (tab.getPosition() == 3) {
            deleteTabAt(tab.getPosition());
            setLoginMenuItemVisible();
        }
    }
} 
```

}

下面是正在执行登录操作的 LoginFragment 中的代码。下面是在登录尝试后执行的代码片段。

```
@Override
public void sendResponse(String response) {
    pd.dismiss();
    System.out.println("Response in the callback: " + response);
    if (response != null) {
        FragmentActivity homeActivity = getActivity();
        if (homeActivity instanceof HomeActivity) {
            ((HomeActivity) homeActivity).deleteTabAt(3);
            ((HomeActivity) homeActivity).changeLoginMenuFlag();
            ((HomeActivity) homeActivity).changeLoginMenutItem();
            ((HomeActivity) homeActivity).setLoginMenuItemVisible();
            Toast.makeText(getActivity(), "Login Successful!",
                    Toast.LENGTH_LONG).show();
        }
    } else {
        Toast.makeText(getActivity(), "Login failed,Please try again...",
                Toast.LENGTH_LONG).show();
    }

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:50:59.187

用于`onPrepareOptionsMenu()`更改菜单和`onOptionsItemSelected`处理菜单项点击：

```
private boolean mLoggedIn;
private MenuItem mItemLogIn;
private MenuItem mItemLogOut;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    mItemLogIn = menu.add("Log In");
    mItemLogOut = menu.add("Log Out");

    //---set more properties--

    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    mItemLogIn.setVisible(!mLoggedIn);
    mItemLogOut.setVisible(mLoggedIn);
    return super.onPrepareOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if(item.equals(mItemLogIn)){
        //--login--
        mLoggedIn = true;
        invalidateOptionsMenu();
    }else if(item.equals(mItemLogOut)){
        //--log out--
        mLoggedIn = false;
        invalidateOptionsMenu();
    }
    return super.onOptionsItemSelected(item);
} 
```

# ruby-on-rails - 正则表达式验证用户名

> ID：14596510
> 
> 赞同：0
> 
> 时间：2013-01-30T04:05:37.513
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, ruby-on-rails-3.2

我想用这些参数验证用户名：“它只能包含字母数字字符或破折号，不能以破折号开头，长度必须在 2-20 个字符之间”

这是我的尝试，但不太正确

```
/^[a-z0-9]+([a-z0-9-]+[a-z0-9])?$/i 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:12:40.183

```
/^[a-z0-9][-a-z0-9]{1,19}$/i 
```

`[^-]`允许各种非字母数字字符。

# c# - 应用程序首次启动时，我无法让此文本框获得焦点

> ID：14596511
> 
> 赞同：0
> 
> 时间：2013-01-30T04:05:43.117
> 
> 标签：c#, silverlight

...在 Silverlight 中。标题中没有标签，等等。我在 Chrome 上使用 Silverlight 4，虽然我也在 IE 上尝试过。我试过了：

```
System.Windows.Browser.HtmlPage.Plugin.Focus();
this.Focus();
Dispatcher.BeginInvoke(() => { textBox_username.Focus(); }); 
```

以及它们的各种组合（如类似线程所建议的），以及附加到表单加载事件的单独方法。以上让我最接近，因为单击页面上的任何位置都会使我的文本框获得焦点，就像插件仍然没有获得焦点一样。可能是因为这是查看的第一个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:37:45.907

更改您的代码，如下所示

```
public partial class MainPage : UserControl 
```

{

```
public MainPage()
{
    InitializeComponent();
    this.Loaded += MainPage_Loaded;
}

void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    System.Windows.Browser.HtmlPage.Plugin.Focus();
    txtBox.UpdateLayout();
    txtBox.Focus();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:32:38.703

我不认为那是因为查看了第一个窗口。尝试将`this.Focus();`您的 Dispatcher 设置为 false；

# java - 通过 getObject() 映射到 Java 对象类型的 Oracle JDBC 类型 - 错误的文档？

> ID：14596513
> 
> 赞同：6
> 
> 时间：2013-01-30T04:05:46.420
> 
> 标签：java, oracle, jdbc, ojdbc

这是文档链接：[“映射 SQL 和 Java 类型”](http://docs.oracle.com/javase/6/docs/technotes/guides/jdbc/getstart/mapping.html)

让我们看看 8.9.3 JDBC 类型映射到 Java 对象类型的行：TIMESTAMP - java.sql.Timestamp

但是当我在 TIMESTAMP 列上将 getObject() 与 oracle 数据库一起使用时，返回类型是 oracle.sql.TIMESTAMP，它不能转换为 java.sql.Timestamp

我知道我可以使用 getTimestamp() 但我需要 getObject() 来处理任何类型的结果集。

文件错了还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:48:03.790

文档是正确的，是Oracle JDBC驱动的问题。

有两种可能的解决方案：

第一个，使用getObject：

```
oracle.sql.TIMESTAMP ts = (oracle.sql.TIMESTAMP) res.getObject("last_update");
agent.setLastUpdate(new Date(ts.dateValue().getTime())); 
```

第二个是向您的应用程序添加一个 VM 参数：

```
-Doracle.jdbc.J2EE13Compliant=true 
```

这将使驱动程序返回`java.sql.Timestamp`而不是`oracle.sql.TIMESTAMP`.

# javascript - jquery代码根据访问者ip重定向页面

> ID：14596516
> 
> 赞同：3
> 
> 时间：2013-01-30T04:06:09.177
> 
> 标签：javascript, jquery, redirect, ip

我有[www.propertyhere.com](http://www.propertyhere.com)

我想在索引页面中插入一些 Jquery 代码，以根据访问者的地理 ip 位置将访问者重定向到以下页面。

```
 if user ip is from AU then show:
 http://www.propertyhere.com/Country/AU/search-to-buy;

 if user ip is from CA then show:
 http://www.propertyhere.com/Country/CA/search-to-buy;

 if user ip is from NZ then show:
 http://www.propertyhere.com/Country/NZ/search-to-buy;

 if user ip is from US then show:
 http://www.propertyhere.com/Country/US/search-to-buy;

 if user ip is from CN then show:
 http://www.propertyhere.com/Country/CN/search-to-buy;

 if user ip is from RU then show:
 http://www.propertyhere.com/Country/RU/search-to-buy; 
```

如果访问者的 ip 与上述位置不匹配，则让访问者留在主页中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:41:04.040

您可以使用诸如[http://geoiplookup.wikimedia.org/](http://geoiplookup.wikimedia.org/)之类的服务并执行一个简单的 ajax 请求。这应该为您提供所有必要的详细信息。

像这样的圆顶东西可能会有所帮助：

```
$.ajax('http://geoiplookup.wikimedia.org/', {
    crossDomain:true,
    success:function(data,text,xhqr){
        alert(data);
    },
    error:function(xhr, textStatus){
        alert(xhr.responseText);
    }
}); 
```

# ruby-on-rails - rake db:migrate 没有创建数据

> ID：14596517
> 
> 赞同：0
> 
> 时间：2013-01-30T04:06:09.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试使用迁移添加一个设计管理员用户。我尝试使用 --trace 运行以下命令，但没有发现任何问题。我的迁移文件是：

```
 class InsertAdminUser < ActiveRecord::Migration
  def up
    User.new(:email => "abc@abc.com", :name => "abc", :password => "abc", admin => true)
  end

  def down
    User.delete_all(:email => "abc@abc.com")
  end
end 
```

当我运行 db:migrate 时，它​​运行良好，但未创建用户。

知道为什么它没有创建用户，或者我如何进一步调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T22:17:25.957

是否有任何特殊原因要在迁移文件中执行此操作？我认为将这种迁移放入种子文件将是一个更明智的解决方案。

将 User.create!(:email => "abc@abc.com", :name => "abc", :password => "abc", admin => true) 放入 seed.rb 并运行 rake db:seed

您还可以创建自定义种子文件，例如，创建 seed_admin.rb 并放置

```
User.create!(:email => "abc@abc.com", :name => "abc", :password => "abc", admin => true) 
```

创建 delete_admin.rb 并放置

```
User.delete_all(:email => "abc@abc.com") 
```

然后你可以运行

```
rake db:seed:seed_admin and rake db:seed:delete_admin 
```

如果您将代码放到 github，请不要忘记将这些敏感文件放入 .gitingore

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:53:21.850

代替

```
User.new(:email => "abc@abc.com", :name => "abc", :password => "abc", admin => true) 
```

和

```
User.create!(:email => "abc@abc.com", :name => "abc", :password => "abc", admin => true) 
```

[创造！](http://guides.rubyonrails.org/active_record_validations_callbacks.html#valid-and-invalid)如果未创建记录将引发错误

# java - 在 XML 上应用 XSLT v. 2

> ID：14596521
> 
> 赞同：1
> 
> 时间：2013-01-30T04:06:27.813
> 
> 标签：java, xml, xslt, xslt-2.0

我编写了一个 XSLT 2.0 版本文件，当它应用于 XML 文件时，它给了我以下错误：

```
ERROR:  'Unsupported XSL element 'http://www.w3.org/1999/XSL/Transform:sequence'' 
```

这是Java代码：

```
 TransformerFactory tFactory = TransformerFactory.newInstance();
   Transformer transformer = tFactory.newTransformer(new StreamSource("Test.xslt"));
   transformer.transform(new StreamSource("Old.xml"),new StreamResult(new    
   FileOutputStream("New.xml"))); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:29:35.237

java 中的默认 XSLT 处理器还不支持`XSLT 2.0`. [在这里](https://stackoverflow.com/questions/1599957/xslt-2-0-support-in-jdk-6)查看

您要么需要坚持使用 XSLT 1.0，要么找到[支持 XSLT 2.0 的 XSLT 处理器](https://stackoverflow.com/questions/515979/java-xslt-processors-supporting-xpath-2-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:44:36.810

尝试将此行添加到您的代码中

```
System.setProperty( 
"javax.xml.transform.TransformerFactory","net.sf.saxon.TransformerFactoryImpl"); 
```

注意：还可以为 Saxon 解析器添加相应的 JAR 文件，这样就可以了。您可以参考[此链接](http://saxon.sourceforge.net/saxon6.5.4/)以获取 JAR 文件参考。希望这会有所帮助。

# c++ - 对非类型模板和返回元组的函数的简单混合感到困惑

> ID：14596522
> 
> 赞同：3
> 
> 时间：2013-01-30T04:06:29.553
> 
> 标签：c++, tuples, variadic-templates

作为练习，我正在尝试编写 2 个采用非类型模板 int N 的简单函数。第一个函数需要创建一个元组，该元组由 T 类型的某个对象的 N 个副本组成。我希望它类似于以下内容：

```
template <class T, int N> 
constexpr std::tuple<T...> fun(T t) {
  return (N > 0) ? std::tuple_cat(t, fun<T, N-1>(t)) : std::make_tuple(t);
} 
```

我也尝试过这样的事情，但没有成功（[http://liveworkspace.org/code/3LZ0Fe](http://liveworkspace.org/code/3LZ0Fe)）。我希望能够用 T = bool 来实例化它，比如：

```
auto bools = fun<bool, 10> (false); 
```

第二个应该是轻微的变化；我有一个模板结构 Foo，我想创建一个包含 Foo< 0 >, ..., Foo< N > 的元组

```
template <int N> struct Foo {
   static const int id = N;
}

template <template <int> class T, int N> 
constexpr ??? fun2 (???) {...} 
```

由于模板函数不能部分特化，我什至不知道如何为我的递归编写适当的终止。我想完全静态地做到这一点，而不使用**for**循环。

==================================================== =================================

按照 Seth 的建议，我坚持编写无限递归的 fun 函数本身：

```
template<typename T, int N>
typename fun_helper<T, N>::type 
fun(T t) {
  if (N > 0) 
    return typename fun_helper<T, N>::type 
      { std::tuple_cat(std::make_tuple(t), fun<T, N-1>(t)) };
  else return typename fun_helper<T, N>::type { };
} 
```

通过使用带有终止的附加结构，我能够得到这个工作：

```
template<typename T, int N> struct fun {
  typename fun_helper<T, N>::type make(T t) {
    return typename fun_helper<T, N>::type 
      { std::tuple_cat(std::make_tuple(t), fun<T, N-1>().make(t)) };
  }
};

template<typename T> struct fun<T, 0> {
  typename fun_helper<T, 0>::type 
  make(T t) {
    return typename fun_helper<T, 0>::type { };
  }
}; 
```

调用还是比较笨拙的：

```
auto conds = fun<bool, 3>().make(false); 
```

有没有办法让它在没有这个额外的结构的情况下工作？

```
auto conds = fun<bool, 3>(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:22:32.500

首先，您可以使用 s 递归构建参数包以`struct`进行部分特化（我以这种方式向您展示，因为它与 #2 相关）。此代码未经测试，不处理元素的默认值，但它为您提供了思路，并且可以轻松添加默认值代码。

```
template<typename T, int N, typename... Rest>
struct fun_helper {
    typedef typename fun_helper<T, N - 1, T, Rest...>::type type;
};

template<typename T, typename... Rest>
struct fun_helper<T, 0, Rest...> {
    typedef std::tuple<Rest...> type;
};

template<typename T, int N>
typename fun_helper<T, N>::type fun() {
    return typename fun_helper<T, N>::type { };
} 
```

对于第二个，您可以将上述技术与 s 的参数包结合起来，`int`并使用 s`...`来扩展它们，例如

```
Foo<Ints>... 
```

扩展到

```
Foo<Int1>, Foo<Int2>, ... 
```

在你的功能中。

# spring - 尝试在 Weblogic 服务器上使用 ClassPathXmlApplicationContext 创建应用程序上下文对象时引发 FileNotFound 异常

> ID：14596523
> 
> 赞同：0
> 
> 时间：2013-01-30T04:06:39.303
> 
> 标签：spring, weblogic

**场景** 我的项目中需要对 Web 服务进行多线程调用。这是使用 ThreadPoolTask​​Executor (Spring) 实现的。由于线程类需要在运行时提供值，因此实现了如下代码 -

```
ApplicationContext applicationContext = new ClassPathXmlApplicationContext("application-context.xml");
for (DocumentData documentData : documentDataList){
    MinerThread minerThread = applicationContext.getBean("minerThread",MinerThread.class);
    minerThread.setHeader(header);
    minerThread.setDocumentData(documentData);
    minerThread.setBatchSize(batchSize);
    minerThreadExecutor.execute(minerThread);
} 
```

**问题** 在本地我有tomcat服务器，这个实现按预期工作。但是在 Weblogic 上（在客户端计算机上，我无权访问 Weblogic），当部署战争时，它会引发 FileNotFound 异常。

由于应用程序上下文对象是通过 ClassPathXmlApplicationContext API 创建的，因此认为错误是因为该位置不在 Weblogic 类路径下而引发的。Weblogic 服务器类路径中没有设置任何内容。然而，即使在类路径中包含 WEB-INF/classes 之后，也会引发相同的异常。

**异常** 2013/01/29 09:19:12,853 [错误] RequestQueueListener - org.springframework.beans.factory.parsing.BeanDefinitionParsingException：配置问题：无法从相对位置导入 bean 定义 [../shared-common-context.xml ] 违规资源：类路径资源[application-context.xml]；嵌套异常是 org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [../shared-common-context.xml]；嵌套异常是 java.io.FileNotFoundException：类路径资源 [../shared-common-context.xml] 无法打开，因为它不存在

BeanDefinitionParsingException 是由于在 Weblogic 类路径中添加的相对路径引起的。

在 Weblogic 上，文件位于 - ./wls10.3.4/ColorisPPT1/user_projects/domains/Coloris_PPT1_Domain/servers/Coloris_PPT1_AdminServer/tmp/.appmergegen_1336142780924_documentservice.war/WEB-INF/classes

当建立战争（使用Maven）时，application-context.xml 被放置在 WEB-INF/classes 文件夹下。

有人可以建议如何进行此操作。

# opengl - 阴影映射中的偏置矩阵混淆

> ID：14596524
> 
> 赞同：3
> 
> 时间：2013-01-30T04:06:42.387
> 
> 标签：opengl, shadow, shadow-mapping

我对阴影映射中的偏置矩阵感到困惑。根据这个问题：[阴影映射](https://stackoverflow.com/questions/2396178/bias-matrix-in-shadow-mapping)中的偏置矩阵，偏置矩阵用于按比例缩小并转换为 [0..1]x 和 [0..1]y。所以我想如果我们不使用偏置矩阵，纹理将仅填充 1/4 场景大小？真的吗？还是这里有什么魔力？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T06:57:56.320

不完全是，但结果是一样的。正如您链接的问题的答案所说。在 w 除之后，您的坐标位于 NDC 空间中，因此在 [-1, 1] 范围内（x、y 和 z）。现在，当您从纹理中采样时，您应该给出的坐标位于“纹理空间”中，并且 OpenGL 将该空间定义为在 [0, 1] 范围内（至少对于 2D 纹理）。x=0 y=0 是纹理的左下角，x=1 y=1 是纹理的右上角。

这意味着，*当您要从渲染的深度纹理中采样时*，您必须将计算出的纹理坐标从 [-1, 1] 转换为 [0, 1]。如果你不这样做，纹理会很好，但只有四分之一的坐标会落在你实际想要采样的范围内。

您*不想将要渲染的对象偏向深度纹理*，因为 OpenGL 会将坐标从 NDC 转换为窗口坐标（在这种情况下，窗口是您的纹理，`glViewport`用于正确的转换）。

要将偏差应用于纹理坐标，您可以使用纹理偏差矩阵，并将其乘以投影矩阵，因此着色器不必担心它。您链接的帖子已经给出了该矩阵：

```
const GLdouble bias[16] = {
  0.5, 0.0, 0.0, 0.0,
  0.0, 0.5, 0.0, 0.0,
  0.0, 0.0, 0.5, 0.0,
  0.5, 0.5, 0.5, 1.0}; 
```

如果您的矩阵是列主矩阵，则该矩阵应将 [-1, 1] 转换为 [0, 1]，它将首先乘以 0.5，然后再加上 0.5。如果您的矩阵是行主要的，您应该简单地转置矩阵，您就可以开始了。

希望这有帮助。

# iphone - 在所有设备尺寸上居中 UIVIEW

> ID：14596534
> 
> 赞同：3
> 
> 时间：2013-01-30T04:07:42.357
> 
> 标签：iphone, ios, xcode, interface

我正在开发一个 iPhone 应用程序，并且对 xcode 比较陌生。我正在尝试设计我的应用程序，以便无论使用什么设备，主用户界面都将是中心。我有一个包含我所有控件（文本字段、提交按钮）的 uiview。我将这个 uiview 集中在基于 iPhone 5 模拟指标的界面构建器中。当我在 iPhone 4 或更低版本上测试时，这个 uiview 自然不是居中而是朝向屏幕底部。有没有一种简单的方法可以让界面生成器基于设备拥有这个 uiview 自动中心？我需要以编程方式添加它吗？

感谢任何能提供帮助的人！

iPhone 3.5 英寸 = [http://bit.ly/14r6R6U](http://bit.ly/14r6R6U)
iPhone 4英寸 = [http://bit.ly/WOyQcn](http://bit.ly/WOyQcn)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:15:55.200

您可以在界面构建器中使用自动调整大小选项。固定上边距和下边距并设置灵活高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:19:50.293

如果您使用的是 Xcode 4.5 及更高版本，那么您可以为 iPhone 3.5 英寸和 iPhone 4 英寸制作两种不同的 xib，例如：![在此处输入图像描述](../Images/54b61d24bb218c984d35a607fd4abed8.png)

这将易于维护所有视图组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:16:10.937

最初创建大小为 (320,480) 的 baseView，然后将视图添加为 baseview 的子视图。

然后这样做，

```
CGRect _baseFrame=baseView.frame;
    _baseFrame.origin=CGPointMake((self.view.frame.size.width-baseView.frame.size.width)/2, (self.view.frame.size.height-baseView.frame.size.height)/2);
    baseView.frame=_baseFrame; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:32:50.500

如果你打开了自动布局（默认情况下），你应该水平和垂直居中视图，并给它一个固定的高度和固定的宽度。一旦你有了这些，你应该能够删除任何其他约束。这将使它在纵向和横向的任何大小的屏幕中居中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T04:45:42.583

你需要探索这些东西：

旧方式 - 自动调整蒙版

新方式 - 自动布局
在新项目中默认启用此功能。您可以通过取消选中情节提要的文件检查器中的框来关闭它。自动布局仅适用于 ios6。自动调整大小适用于 ios6,5,4...

这两者都提供了不需要代码的布局引擎。使用这两种方法，您都可以使用大小检查器更改情节提要中对象的设置。

自动布局是 Apple 强烈推荐的前进方式，但我建议先尝试自动调整蒙版大小。自动布局允许您对对象的相对定位施加更多的控制，但代价是更大的复杂性。如果您可以使用自动调整大小来实现您的结果，请执行此操作。

[Raywenderlich.com](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)对两者都有很好的指导。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T05:45:40.993

在您的视图控制器中定义它

```
#define STATUSBAR_HEIGHT 20

#define SCREEN_HEIGHT (( double )[ [ UIScreen mainScreen ] bounds ].size.height - STATUSBAR_HEIGHT)

#define SCREEN_WIDTH (( double )[ [ UIScreen mainScreen ] bounds ].size.width) 
```

例如

```
UIView *view = [[UIView alloc]init];
[view setBackgroundColor:[UIColor purpleColor]];

//for example view height 100 and width 100 then

float xAxis = (SCREEN_WIDTH - 100)/2;
float yAxis = (SCREEN_HEIGHT - 100)/2;

[view setFrame:CGRectMake(xAxis, yAxis, 100, 100)];
[self.view addSubview:view]; 
```

如果您通过 xib 进行查看，那么您应该使用它

![在此处输入图像描述](../Images/d2cbd43e49c21e6ac0f29efaa2d8c1f9.png)

# flash - AS2 将多个动态文本字段更新到时间轴中的所有帧

> ID：14596546
> 
> 赞同：0
> 
> 时间：2013-01-30T04:09:01.773
> 
> 标签：flash, actionscript-2, flash-cs5

如何在具有 4 帧的时间轴中更新具有不同实例名称的多个动态文本字段？

我有一个名为（按钮）的影片剪辑，使用同名的自定义类

```
第一帧：
- 第 1 层：名为 (txt1) 的动态文本
- 第 2 层：名为 (txtbg1) 的动态文本

第二帧
- 第 1 层：名为 (txt2) 的动态文本
- 第 2 层：动态文本命名 (txtbg2)

第 4 帧
- 第 1 层：动态文本命名 (txt4)
- 第 2 层：动态文本命名 (txtbg4)

```

自定义类“按钮”代码：

```
class button extends MovieClip {
function button() { super(); }
function onLoad() {}
function setActivate(tf)
{
    delete this.onPress;
    delete this.onRelease;
    delete this.onRollOver;
    delete this.onRollOut;

    if (tf)
    {
        this.gotoAndStop(2);
        this.onRollOver = function()
        {
            this.gotoAndStop(3);
        }
        this.onRollOut = function ()
        {
            this.gotoAndStop(2);
        }
        this.onPress = function ()
        {
            this.gotoAndStop(4);
        }
        this.onRelease = function ()
        {
            if (_currentframe == 4)
            {
                //CLICKED DO ACTION
            }
            this.gotoAndStop(3);
        };
        return;
    }
    else
    {
        this.gotoAndStop(1);
    }
}
function setButtonText(txt)
{
    this["txt1"].text = txt;
    this["txtbg1"].text = txt;
    this["txt2"].text = txt;
    this["txtbg2"].text = txt;
    this["txt4"].text = txt;
    this["txtbg4"].text = txt;
}
} 
```

在我的主要场景中，我有一个名为“main”的影片剪辑，它使用同名的同一个类。在那个moviecplip中包含了之前说的两个按钮

自定义类“主”代码：

```
 class main extends MovieClip
{
    var button1, button2;
    function main()
    {
        super();
    }
    function onLoad()
    {
        button1.setActivate(true);
        button2.setActivate(true);
        button1.setButtonText("OK");
        button2.setButtonText("CANCEL");
    }
} 
```

感谢和抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:39:25.843

只有在输入适当的框架时才能设置文本。原因是在框架中创建的文本字段总是会在每次进入它们的框架时重新创建。所以决定你为文本存储变量：

```
var txt:String; //for storing your text 
function setActivate(tf)
{
    delete this.onPress;
    delete this.onRelease;
    delete this.onRollOver;
    delete this.onRollOut;

    if (tf)
    {
        this.gotoAndStop(2);
        this.onRollOver = function()
        {
            this.gotoAndStop(3);
        }
        this.onRollOut = function ()
        {
            this.gotoAndStop(2);
            setButtonText(txt);
        }
        this.onPress = function ()
        {
            this.gotoAndStop(4);
            setButtonText(txt);
        }
        this.onRelease = function ()
        {
            if (_currentframe == 4)
            {
                //CLICKED DO ACTION
            }
            this.gotoAndStop(3);
        };
        return;
    }
    else
    {
        this.gotoAndStop(1);
        setButtonText(txt);
    }
} 
```

# c# - 参考类型。我理解正确吗？

> ID：14596547
> 
> 赞同：3
> 
> 时间：2013-01-30T04:09:04.230
> 
> 标签：c#

这很尴尬。我很久以前学过 C#，现在正试图理解这个关于类的问题（因为它们是引用类型，当然）。

这里的问题是：如果我创建一个名为的类的两个新实例，`Person`一个实例`P`和另一个`Q`（谁在乎我为什么叫它`Q`）并设置`P.Name`为`"James"`，然后设置`Q.Name`为`"Suzie"`，将`P.Name`设置为`"Suzie"`？还是我没有正确理解这一点？

谢谢大家

感谢大家帮助我解决这个问题。我认为向我解释的情况就是这样。但是我看的教程里的解释不是很清楚，而且我已经几个月没有电脑了，所以我自己测试了一下。

Ps 我选择了我清楚的第一个正确答案。但注意到了几个。再次感谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:12:36.467

简短的回答是否定的，更改 Q.Name 不会影响 P.Name。如在

```
 var p = new Person();
 var q = new Person();
 p.Name = "James";
 q.Name = "Suzie"; 
```

但是，如果 q 指向 p 实例，那么改变 q 也会改变 p。如：

```
 var p = new Person();
 var q = p;
 p.Name = "James";
 q.Name = "Suzie"; 
```

q 和 q Name 现在都是“Suzie”。

使用数据初始化器，您可以将第一个示例编写为：

```
var p = new Person { Name = "James" };
var q = new Person { Name = "Suzie" }; 
```

我认为这更容易阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T04:14:27.870

例子：

```
// p and q are separate in the below example..

Person p = new Person();
Person q = new Person();

p.Name = "James";
q.Name = "Suzie";

Console.WriteLine(p.Name); // "James"
Console.WriteLine(q.Name); // "Suzie"

// both p and q refer to the same object, so both are "Suzie" in the below example
Person p = new Person();
Person q = p;

p.Name = "James";
q.Name = "Suzie";

Console.WriteLine(p.Name); // "Suzie"
Console.WriteLine(q.Name); // "Suzie" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T04:20:36.207

不，这不是，因为它们都是**P 和 Q**类**Person**的不同**实例**。对象或实例都定义在不同的内存位置。看这个[教程](http://msdn.microsoft.com/en-us/library/vstudio/x9afc042.aspx)

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T04:15:04.573

如果创建*两个*实例？不，它们将是 2 个独立的对象。

```
Person person1 = new Person();
person1.Name = "James";
Person person2 = new Person();
person2.Name = "Suzie";
Console.WriteLine(person1.Name);
Console.WriteLine(person2.Name); 
```

这将打印出`James`然后`Suzie`，因为它们是 2 个不同的对象。但是，如果您这样做了：

```
Person person1 = new Person();
person1.Name = "James";
Person person2 = person1;
person2.Name = "Suzie";
Console.WriteLine(person1.Name);
Console.WriteLine(person2.Name); 
```

这将打印`Suzie`和`Suzie`. 这是因为`person1`和`person2`都引用了同一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T04:15:03.260

这绝对不会将 P.Name 更改为 Suzie，因为您创建了同一个类的两个实例，这意味着您在堆上为这两个实例分配了两个**不同的内存位置。****

# c# - 如果我不再关心结果，是否有办法结束代表？

> ID：14596556
> 
> 赞同：5
> 
> 时间：2013-01-30T04:10:54.270
> 
> 标签：c#, multithreading, delegates

我有一段代码可以搜索多个第三方 API。我根据搜索条件将搜索分为 2 组。我开始两个搜索，因为每个搜索都非常及时，但是如果第一组搜索结果匹配，我不想等待第二个搜索组完成。所以基本上我所拥有的是：

```
Dictionary<string, string> result = null;
NameSearchDelegate nameDel = new NameSearchDelegate(SearchByName);
IAsyncResult nameTag = nameDel.BeginInvoke(name, null, null);
if(!string.IsNullOrWhiteSpace(telNum))
{
    result = SearchByTelNum(telNum);//Will return null if a match is not found
}
if(null == result)
{
    result = nameDel.EndInvoke(nameTag);
}
//End the delegate to prevent memory leak
//else
//{
//    nameDel.EndInvoke(nameTag)
//}
return result; 
```

因此，我想在调用 SearchByTelNum 之前启动 SearchByName，以防它找不到匹配项，但是如果它确实找到匹配项，我不想在返回匹配项之前等待 SearchByName 完成。如果我不再需要它的结果，有什么方法可以简单地结束或取消该委托？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:58:01.620

我能够使用 System.ComponentModel.BackgroundWorker 解决我的问题。我不一定按照预期的方式使用它，但它能够做我需要的事情。所以基本上我的新代码是这样的：

```
Dictionary<string, string> telResult = null,
                           nameResult = null;

BackgroundWorker bw = new BackgroundWorker();
bw.WorkerSupportsCancellation = true;
bw.DoWork += (obj, e) => nameResult = SearchByName(name, bw);
bw.RunWorkerAsync();

if(!string.IsNullOrWhiteSpace(telNum))
    telResult = SearchByTelNum(telNum);//Will return null if a match is not found

if(telResult != null)
{
    bw.CancelAsync;
    return telResult;
}

bool hasTimedOut = false;
int i = timeOutCount;
while (bw.IsBusy && !hasTimedOut)
{
    System.Threading.Thread.Sleep(500);
    if (0 == --i) hasTimedOut = true;
}

return nameResult; 
```

为了确保没有错误，我必须确保 SearchByName 定期检查 bw.CancellationPending 是否等于 true，并在这种情况下结束该方法。CancelAsync 不会结束工作线程，它只是提醒工作线程调用者线程已取消它。

我也可以简单地使用

```
while(bw.IsBusy) System.Threading.Thread.Sleep(500) 
```

等待该方法完成，但如果 SearchByName 中发生了一些不好的事情，您最终可能会在无限循环中永远等待。这样，我可以在该方法被认为已超时并且调用者线程继续正常运行之前设置一段时间。在这种情况下，由于我每 0.5 秒检查一次 bw.IsBusy，超时长度等于 timeOutCount / 2 秒。

好的，我想我已经彻底回答了我自己的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:44:55.923

我已经通过定义一个可中止的参数对象来处理这个问题

```
public class AbortableParameter<T>
{
    public T Parameter { get; private set }
    public bool ShouldAbort { get; set; }
    public AbortableParameter(T parameter)
    {
        Parameter = parameter;
        ShouldAbort = false;
    }
} 
```

只需使用要传递给委托的任何参数创建此类的实例并保留对它的引用；如果委托应该退出，则将其设置为 true。然后，委托需要定期检查`ShouldAbort`并在它变为 时优雅地退出`true`。

这是不利的一面，委托人必须定期检查，否则它是否应该中止都没有关系。

也可以让`ShouldAbort`属性的 set 方法在设置为 true 时杀死委托，但这不是一个优雅的退出，在大多数情况下应该避免——但它确实具有不需要委托轮询的好处。

# javascript - 图像被追加和删除但文本没有被删除jQuery

> ID：14596557
> 
> 赞同：0
> 
> 时间：2013-01-30T04:11:11.357
> 
> 标签：javascript, jquery, html, append

所以这是我的代码：

```
<input type = checkbox id = "kinch" name = "link" > Bunz </input>
<div id = bootypipe></div> 
```

这是JavaScript：

```
$("#kinch").click(function(){

    if ($("#kinch").is(":checked")) {

        //Add image to div bootypipe
         $("#bootypipe").append("<image id = 'chink' src = 'http://4.bp.blogspot.com/_TUdhYRa2Xm0/RsuDa4NvSEI/AAAAAAAAAQs/jr_r6v_SUgs/s320/New-England-Style-Hot-Dog-Buns_8A827671.jpg'>HA!</image>");

    } else {

        $("#chink").remove();

    }
}); 
```

这是jsfiddle：http: [//jsfiddle.net/shrimpboyho/wUu34/13/](http://jsfiddle.net/shrimpboyho/wUu34/13/)

图像删除并附加，但是当我删除图像时，文本`Ha!`仍然保留并随着时间的推移而增加。我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:15:49.097

因为您只删除图像标签而不是文本。你可以这样做

用一个 div 包装图像和文本，然后删除 div 标签，如

```
$("#kinch").click(function(){

    if ($("#kinch").is(":checked")) {

        //Add image to div bootypipe
         $("#bootypipe").append("<div id='chink_outer'><img id = 'chink' src = 'http://4.bp.blogspot.com/_TUdhYRa2Xm0/RsuDa4NvSEI/AAAAAAAAAQs/jr_r6v_SUgs/s320/New-England-Style-Hot-Dog-Buns_8A827671.jpg'/>HA!</div>");

    } else {

        $("#chink_outer").remove();

    }
}); 
```

[演示](http://jsfiddle.net/muthusamy/wUu34/15/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:16:52.957

你不能这样做：

```
$("#bootypipe").empty(); 
```

而不是删除图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:13:47.573

```
<image id = 'chink' src = 'http://4.bp.blogspot.com/_TUdhYRa2Xm0/RsuDa4NvSEI/AAAAAAAAAQs/jr_r6v_SUgs/s320/New-England-Style-Hot-Dog-Buns_8A827671.jpg'>HA!</image> 
```

是无效的 HTML 标记；该元素实际上不能包含文本。正确的标签是`<img>`. 我怀疑它实际上被解释为

```
<img id='chink' src='...' > HA! 
```

意味着文本不是元素的一部分，也不会被删除。

而不是做`$('#chink').remove()`，做`$('#bootypipe').empty()`删除您添加的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T04:28:25.050

该`<img>`元素是自动关闭的，例如`<br>`或`<hr>`（您的演示代码无效，如另一个答案中所述）。

但是，如果您只在图像周围包含一个包装器 ( `<p>`, `<span>`, )，您的代码就可以工作。`<div>`然后移除包装（即`$('p').remove();`）。不要添加额外的 ids、类（您已经围绕#kinch 创建了一个函数。为什么要添加到代码中？）。只需针对包装器。`$('#chink').parent().remove();`也可以，并且它不偏向于哪个元素是父元素。

```
$("#kinch").click(function(){
    if ($("#kinch").is(":checked")) {
        $("#bootypipe").append("<p><image id = 'chink' src = '...'>HA!</p>");
    } else {
        $('p').remove();
        // or $('#chink').parent().remove(); // pick your poison
    }
}); 
```

# jquery-mobile - Backbone 和 jQuery Mobile App 在浏览器后退按钮后重置

> ID：14596558
> 
> 赞同：2
> 
> 时间：2013-01-30T04:11:17.593
> 
> 标签：jquery-mobile, backbone.js, href

我正在使用 Backbone.js 和 jQuery Mobile 构建一个应用程序。在我的应用程序的某些页面上，我有外部 href 链接，我遇到了问题。

当用户单击外部 href 链接时，会被带到外部站点，然后单击后退按钮。我的应用程序没有从用户最初离开应用程序的正确页面加载。

事实上，我的整个 DOM 都被重置了，所以看起来我的网站完全刷新了，并且没有保留任何以前的状态。

我一直在尝试寻找解决方案，但这个问题很难说清楚。我希望这是有道理的。

有没有人有什么建议？

更新我的愚蠢错误..我在页面上设置了错误的ID，当用户返回页面时，它没有加载我在会话中保存的数据..更改了ID，一切都很好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:22:44.097

如果您使用了一个带有多页解决方案的 html，那么这里有一个解释。

rel="external" 将导致整页刷新，因此不会记住最后一页的位置。当您返回上一个位置时，它将触发新的刷新，并且将再次显示第一页。

这可以通过多 html 页面解决方案来防止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:16:33.980

```
<a href="www.external.com" target="_blank">Link</a> 
```

让您的外部链接打开新标签。

# php - 根据在第一个选项上选择的选项值隐藏选项选择值

> ID：14596563
> 
> 赞同：1
> 
> 时间：2013-01-30T04:11:57.790
> 
> 标签：php, javascript

我有两个选择选项字段。

```
<div style="float:left; width:7%">
<label>Type</label>             
<select name="ostatus" id="ostatus" class="input-small">
<option value="Actual">Actual</option>
<option value="Ghost">Ghost</option>
</select>

<div style="float:left; width:7%">
<label>Upgrade</label>              
<select name="oupg" id="oupg" class="input-small">
<option value="Exp" >Exp</option>
<option value="Post" >Post</option>
<option value="Upgrade" >Upg</option>
<option value="Retail" >Retail</option>
<option value="Prepaid" >Prepaid</option>
</select> 
```

如果在类型选择中选择了 Ghost，我想在升级选项下隐藏选项零售和预付。我该怎么做？我可以隐藏整个 div 容器以进行升级，但我只想隐藏最后两个选项。请提供一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:26:49.867

使用 Javascript 和`display:none`css 样式，您可以做到这一点：

```
<head>
    <script type="text/javascript">
        function hideOpt() {
            var type = document.getElementById("ostatus");
            var upgrade = document.getElementById("oupg");
            if (type.options[type.selectedIndex].value == 'Ghost') {
                upgrade.options[3].style.display = 'none';
                upgrade.options[4].style.display = 'none';
                // IE exception
                upgrade.options[3].disabled = true;
                upgrade.options[4].disabled = true;
            } else {
                upgrade.options[3].style.display = 'block';
                upgrade.options[4].style.display = 'block';
                // IE exception
                upgrade.options[3].disabled = false;
                upgrade.options[4].disabled = false;
            }
        }
    </script>
</head>

<label>Type</label>             
<select name="ostatus" id="ostatus" onchange="return hideOpt();" class="input-small">
    <option value="Actual">Actual</option>
    <option value="Ghost">Ghost</option>
</select>

<label>Upgrade</label>              
<select name="oupg" id="oupg" class="input-small">
    <option value="Exp" >Exp</option>
    <option value="Post" >Post</option>
    <option value="Upgrade" >Upg</option>
    <option value="Retail" >Retail</option>
    <option value="Prepaid" >Prepaid</option>
</select> 
```

* * *

**编辑：**

添加`else`了声明以在选择“实际”时再次显示选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:45:39.277

你可以使用jquery

```
$(document).ready(function(){
    $('#ostatus').on('change',function() {
        if($(this).val()== 'Ghost'){
          $('#oupg') .find ("option[value=Retail]").hide();
           $('#oupg') .find ("option[value=Prepaid]").hide();
        }
        else{
            $('#oupg') .find ("option[value=Retail]").show();
           $('#oupg') .find ("option[value=Prepaid]").show();
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:17:32.950

您不能`option`在所有浏览器中隐藏元素，但可以禁用它们：

```
document.querySelector("#oupg option[value=Retail]").disabled = true;
document.querySelector("#oupg option[value=Prepaid]").disabled = true; 
```

这将适用于 IE8 及更高版本。

* * *

如果你想要 IE7 和更低的支持，那么：

```
var opts = document.getElementById("oupg").options;

opts[opts.length - 2].disabled = true;
opts[opts.length - 1].disabled = true; 
```

# xml - 如何在 C# 中将数据库记录转换为 XML

> ID：14596567
> 
> 赞同：0
> 
> 时间：2013-01-30T04:12:04.840
> 
> 标签：xml

目前我有一个包含不同表的数据库。我想将每个表的每条记录映射到相应的预定义 XML 模板以形成 XML 文档。例如，其中一张表是人。它有姓名、年龄、地址等字段。而它对应的模板就像

```
<person name="" age="">
     <Address> </Address>
 </person> 
```

是否有一个 C# 库可以在不直接使用 XMLWriter 的情况下进行这种转换？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:17:51.603

一种方法是将它们加载到 DataSet（或 DataTable）并使用 .NET 的[XmlSerializer](http://msdn.microsoft.com/en-au/library/system.xml.serialization.xmlserializer.aspx)或使用内置`WriteXML()`方法（[DataSet's](http://msdn.microsoft.com/en-us/library/system.data.dataset.writexml.aspx) / [DataTable's](http://msdn.microsoft.com/en-us/library/system.data.datatable.writexml.aspx)）序列化数据集。

另一个简单的选择是简单的数据库查询（适用于 SQL 2005 及更高版本）：

```
SELECT * FROM People FOR XML AUTO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:21:23.147

我能想到的最简单的方法是将表的数据填充到数据集中，然后`datasetobject.WriteXml();`用于将数据写入 XML

# orientdb - 边缘可以有一组属性（我的意思是多值属性）

> ID：14596570
> 
> 赞同：1
> 
> 时间：2013-01-30T04:12:49.867
> 
> 标签：orientdb

假设我有两个顶点`A and B`。

这个顶点之间的边可以有 `Set`属性吗？设置我的意思是设置。不是键值映射。

从 A 到 B 的 EG Edge 具有 Set 标签。

我想要类似的模型 `A workswith B`

现在`workswith`有属性喜欢`ondays [monday,tuesday,friday]`

```
tags values = ['Monday','Tuesday','Friday']; 
```

这里的标签是一个单一的属性，但它的类型是 Set。这可能吗？

现在将遍历我想找到类似的东西

在星期一找到所有 A 作品？查找所有 A 是否会在一天内工作？

注意：这是一个描述我的用例的简单示例。我的实际用例更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:42:22.647

是的你可以。边缘是一个文档，因此对于集合、地图和嵌套文档来说可能非常复杂。

# php - Codeigniter 多数据库连接慢

> ID：14596575
> 
> 赞同：1
> 
> 时间：2013-01-30T04:13:27.760
> 
> 标签：php, mysql, codeigniter, codeigniter-datamapper

在我的一个 codeigniter 项目中，我想连接多个数据库。我连接到多个并且工作正常。

它是一个更新 - 大项目。意味着需要从多个数据库等重组和获取数据。

由于其大，其现有的数据库查询如下

模型.php

```
 $res=mysql_query("select * from news order by date DESC LIMIT 0,10");
    while($r=mysql_fetch_array($res)){
          echo '<li><div class="newshead"><a href="'.site_url('movie-news/'.$r['id'].'/'.$r['seo']).'">'.$r['heading'].'</a></div><img alt="'.$r['heading'].'" align="left" src="share/news/'.$r['thumb'].'" /><p>'.stripslashes(strip_tags(substr($r['news'],0,150))).'</p><br/> <a class="readmore" href="'.site_url('movie-news/'.$r['id'].'/'.$r['seo']).'">Read More</a></li>';
         } 
```

所以我在配置中添加了2个数据库并像这样连接到数据库

```
 $this->load->database('default', TRUE);
    $res=mysql_query("select * from news order by date DESC LIMIT 0,10");
    while($r=mysql_fetch_array($res)){
             echo '<li><div class="newshead"><a href="'.site_url('movie-news/'.$r['id'].'/'.$r['seo']).'">'.$r['heading'].'</a></div><img alt="'.$r['heading'].'" align="left" src="share/news/'.$r['thumb'].'" /><p>'.stripslashes(strip_tags(substr($r['news'],0,150))).'</p><br/> <a class="readmore" href="'.site_url('movie-news/'.$r['id'].'/'.$r['seo']).'">Read More</a></li>';
    } 
```

有数百个类似这个查询的函数。我的实际问题是在构造函数中添加/连接数据库，我将数据库添加到每个函数中。从那里它将被告知从哪个数据库中获取数据。

它会影响网站的性能（如果我从每个功能连接到数据库）

其实我是这样编码的

```
Class Tickets extends CI_Model {

    function __construct() {
        parent::__construct();
         $this->db =$this->load->database('users', TRUE);
         $this->gen = $this->load->database('default', TRUE);
    }

function getSlidingThumb(){
    $this->gen->select('*');
    $this->gen->from('front_slide');
    $this->gen->order_by("id", "ASC");
    $query = $this->gen->get();
    $thumbs = $query->result();

    foreach($thumbs as $thu){
       echo '<li><a href="javascript:;"><img  src="share/home/t-'.$thu->image.'" alt="'.$thu->title.'" width="45" height="23" border="0"/></a> </li>'; 

    }
  } 
```

在这种情况下，我需要在构造函数中将 db 连接一次并像这样查询。$query = $this->gen->get();

但为此我需要编辑 100 个现有功能

请告诉我我想要哪个选项。客户需要性能和快速加载

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T22:30:53.930

您能否配置您的数据库，以便在 CodeIgniter 中配置的默认用户可以访问所有这些数据库？如果是，您可以将数据库作为参数传递并在查询中使用它：

修改您的模型：

```
Class Tickets extends CI_Model {

    public function __construct() {
        parent::__construct();
    }

    public function getSlidingThumb ($db = 'default') {
        $this->db->select('*');
        $this->db->from("$db.front_slide");
        $this->db->order_by("id", "ASC");
        $query = $this->db->get();

        return $query->result();

    }
} 
```

为了清楚起见并尊重 MVC 模式，请将 HTML 移至视图：

```
<?php foreach ($thumbs as $thu) : ?>
    <li><a href=""><img src="share/home/t-<?php echo $thu->image;?>" alt="<?php echo $thu->title;?>" width="45" height="23" border="0" /></a></li>
<?php endforeach;?> 
```

# javascript - 获取文本输入中选定文本的索引

> ID：14596582
> 
> 赞同：3
> 
> 时间：2013-01-30T04:14:32.160
> 
> 标签：javascript, html, text, dom-events

如果您有一个 HTML`input`元素，您如何检测其中选定文本的开始和结束位置的索引`input`？我尝试使用`window.getSelection`，但它似乎无法正常工作。我需要在活动中弄清楚这一点`keydown`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:21:24.093

您可以使用`selectionStart`and`selectionEnd`属性来获取各个值的索引。

```
var start = document.getElementById("myArea").selectionStart;  
var end = document.getElementById("myArea").selectionEnd;

console.log(start);
console.log(end); 
```

# php - 将日期字符串（Ymd）转换为“Mar 2nd”php/mysql

> ID：14596592
> 
> 赞同：0
> 
> 时间：2013-01-30T04:15:24.267
> 
> 标签：php, mysql, date

我正在使用数组 $row[dt]; 从 mySQL 表（例如 2010-12-03）中提取 Ymd 形式的日期字符串；

```
echo $row["dt"]; // in a while loop 
```

我想将该存储的字符串输出为“Mar 2nd”

我已经尝试过`strtotime()`，`date( "m d", $row['dt'] )`但它们不起作用..例如，后者只输出“Dec 31”

可以这样做吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:34:10.843

我相信这就是您正在寻找的答案。`j`而不是 the的原因`d`是因为海报要求*Mar 2nd*。使用`d`将输出*Mar 02nd*。

```
echo date("M jS", strtotime($row['dt'])); 
```

编辑：M 而不是 m。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:27:47.823

看起来 PHP 没有对序数足够的内置支持，所以你必须手动完成。

在您的代码中包含以下函数：

```
function suffix($number) {
    $last = substr($number, -1, 1);
    switch($last) {
        case "1": return "st";
        case "2": return "nd";
        case "3": return "rd";
        default: return "th";
    }
} 
```

...那么您的 PHP 将是：

```
echo date( "m d", $row['dt'] ) . suffix( date( "d", $row['dt'] ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:36:21.113

你可以这样转换，

```
echo date("M jS", strtotime($row['dt'])); 
```

在这里，您可以获得所有 PHP 日期和时间格式。

**[PHP 日期和时间格式](http://php.about.com/od/learnphp/ss/php_functions_3.htm)**

# javascript - Async Javascript Uncaught TypeError: Object has no method 'test'

> ID：14596593
> 
> 赞同：0
> 
> 时间：2013-01-30T04:15:25.733
> 
> 标签：javascript, asynchronous

我正在尝试创建我的第一个异步加载的 javascript 文件，但之后无法从对象调用函数。下面是我的示例 javascript 文件 exampletest.js ...

```
(function(){
    var example = {
        test : function () {
            alert("test function called");
        }
    };
    window.example = example;
})(); 
```

然后我尝试使用以下代码调用此文件。

```
 (function(doc, example) {
            window.example = example;

            var script = doc.createElement("script");
            script.type = "text/javascript";
            script.async = true;
            script.src = "http://www.example.com/exampletest.js";

            var scriptTag = doc.getElementsByTagName("script")[0];
            scriptTag.parentNode.insertBefore(script, scriptTag);
    })(document, window.example || []);

    example.test(); 
```

当我运行此脚本时，我收到错误“Uncaught TypeError: Object has no method 'test'”

如果我在页面加载后调用该方法，例如单击链接，则正确调用了测试方法并且我得到了我的警报框。

我一直在四处寻找，试图更好地理解这一点，但到目前为止还没有运气。我试图更好地理解如何在没有方法“测试”的情况下调用函数。有没有办法在 javascript 加载后推送函数调用，而不会破坏调用本身，所以它保持为 example.test();？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T04:21:06.097

只需在调用之前检查该函数是否存在。

试试这个 ：

```
if (typeof example.test == function){
    example.test();
} 
```

注意：由于 JavaScript 是异步加载的，`window.onload`因此无法正常工作。

**更新**

拥有的全部目的`async`是在不等待脚本加载的情况下加载页面。你不能两者兼得。

这行不通

```
<script src="exampletest.js"  async ></script>

<script type="text/javascript">
    example.test();
</script> 
```

但这会起作用，因为执行会等待文件加载

```
<script src="exampletest.js" ></script>

<script type="text/javascript">
    example.test();
</script> 
```

# iphone - 在 UIScrollView 中添加对象会扰乱 x 和 y 位置

> ID：14596594
> 
> 赞同：1
> 
> 时间：2013-01-30T04:15:28.073
> 
> 标签：iphone, uiscrollview, interface-builder

这个过程浪费了我很多时间，真的让我很烦。

我在界面生成器中工作。

我的对象（`UIButton`,`UILabels`等`UIImageViews`）被添加到`UIView`. `UIScrollView`当我将它们拖入a 时，我添加了a `UIScrollView`，位置（x 和 y）受到干扰。

我必须再次设置它们 - 每个控件。我正在寻找一个更简单的解决方案。因为每当我将每个控件拖到 UIScrollView 中时，我都不必为每个控件设置“x”和“y”。

泰穆尔

# java - 以管理员身份运行命令提示符

> ID：14596599
> 
> 赞同：13
> 
> 时间：2013-01-30T04:15:57.987
> 
> 标签：java, command-line, command-prompt

我正在开发一个小型关机调度程序项目，我必须将计算机置于`"Stand By"`模式。我正在使用的命令是

```
Runtime.getRuntime().exec("cmd /c Powrprof.dll,SetSuspendState "); 
```

此命令需要管理员权限，我不知道如何获得。此外，在搜索以前的答案时，我发现我可以`elevate.exe`用作

```
Runtime.getRuntime().exec("c:/elevate Rundll32.exe Powrprof.dll,SetSuspendState "); 
```

`Elevate.exe`正在执行任务，但花费了太多时间，即使软件变慢。有没有其他快速的方法？我正在使用 Netbeans IDE。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T04:22:21.360

```
 Runtime.getRuntime().exec("runas /profile /user:Administrator \"cmd.exe /c Powrprof.dll,SetSuspendState\""); 
```

也请看评论

[以没有管理员权限的管理员身份运行](https://superuser.com/questions/244959/run-as-administrator-shortcut-without-password-prompt)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T04:50:36.310

你有几个选择

A. 使用 admin priv 创建快捷方式。

快捷方式将运行`cmd /c Rundll32.exe Powrprof.dll,SetSuspendState`

您的 Java 代码将运行该快捷方式：

```
Runtime rt = Runtime.getRuntime();
rt.exec("cmd /c start \"\" \"myshortcut.lnk\"") 
```

右键单击快捷方式图标>属性>高级>以管理员身份运行

B.以管理员身份运行java进程

同样，创建一个快捷方式并设置为以管理员身份运行。产生的任何进程也将具有管理员权限。您的 java 代码将运行：

```
rt.exec("cmd /c Powrprof.dll,SetSuspendState") 
```

C. 使用 JNA 直接调用 SetSuspendState 例程。Java 进程将需要管理员权限（如 B），但您不必生成进程。如果你喜欢这个，我可以提供源代码。

D.**使用[wizmo](http://www.grc.com/wizmo/wizmo.htm)实用程序**：`wizmo quiet standby`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-13T13:14:56.907

添加参数`/savecred`

```
runas /profile /user:Administrator /savecred 
```

输入密码一次。将来操作系统不会询问您的密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T18:28:18.727

我正在使用 Windows 10。IDK 为什么但`runas`无法正常工作并且没有报告任何错误。

**[我在superuser.com](https://superuser.com/a/1200474/345864)****上找到了这个答案**：

```
 powershell -Command "Start-Process 'cmd.exe /c Powrprof.dll,SetSuspendState ' -Verb runAs" 
```

*   如果您有权提升，则无需密码。
*   客户端机器上不需要快捷方式
*   不依赖于`runas`
*   需要`powershell`

根据[serverfault.com](https://serverfault.com/a/615293/181145)上的答案，Powershell 自 Windows 8 和 Windows Server 2008 R2 以来默认安装在 Windows 上。

# mysql - MYSQL中可以存储整数或双精度值的字段类型是什么我的意思是在同一列中可以存储整数|| 双打？

> ID：14596612
> 
> 赞同：0
> 
> 时间：2013-01-30T04:17:48.057
> 
> 标签：mysql

MYSQL中可以存储整数或双精度值的字段类型是什么我的意思是在同一列中可以存储整数|| 双打？这是什么类型或我该怎么做？

任何努力将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:44:59.557

没有满足您要求的本机 MySQL 数据类型。

一般来说，DECIMAL 数据类型符合要求，尽管这是一个精确的十进制值，而不是浮点类型的近似值。并且由于它有一个固定的小数点，可以存储的数值范围比 DOUBLE 类型小几个数量级。

一种选择是使用`VARCHAR`列，并存储值的字符表示。

另一个（笨拙的）选项是使用`BIT(64)`列。

但似乎使用这些方法中的任何一种，您都需要某种类型的指示符来确定存储了哪种类型的值。这两种方法都有一些缺点。一个很大的缺点是这些将允许存储“无效”值。

我会考虑的一种方法（如果我有这个要求）是使用两列，其中一个`INTEGER`，另一个`DOUBLE`，并指定优先级，并允许 INTEGER 列中的 NULL 值表示该值存储在`DOUBLE`列中.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:23:48.850

INT - 可以有符号或无符号的正常大小的整数。如果有符号，则允许的范围是从 -2147483648 到 2147483647。如果没有符号，则允许的范围是从 0 到 4294967295。您可以指定最多 11 位的宽度。

DOUBLE(M,D) - 不能无符号的双精度浮点数。您可以定义显示长度 (M) 和小数位数 (D)。这不是必需的，默认为 16,4，其中 4 是小数位数。DOUBLE 的小数精度可以达到 53 位。REAL 是 DOUBLE 的同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:28:05.407

您可以使用双精度数据类型，并在您的语言（php，ja）中将该值显示为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:29:43.047

我认为mysql中没有这种数据类型。可能您可能想要 varchar，并在服务器端代码（php，java ...）中转换为正确的数据类型，但这可能会导致性能开销。我不知道你怎么会有这么奇怪的数据类型要求。如果必须以这种方式存储数据，请考虑添加一个额外的列来标记数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T05:19:27.860

我想你可能想不明白计算机是如何存储数字的：数字要么是整数，要么是浮点数。处理器算术逻辑单元 (ALU) 中的每个都有不同的电路。你不能有一个两者兼而有之的数字。

# assembly - 8086汇编编码中调用汇编函数时要保存哪些寄存器

> ID：14596616
> 
> 赞同：1
> 
> 时间：2013-01-30T04:18:01.997
> 
> 标签：assembly, x86-16

当我从另一个函数调用汇编函数时，我应该保存哪些寄存器（8086）

例如：在手臂汇编编码中，我正在保存 r4-r12 寄存器。

我还应该保存 BX、CX、DX、SI、DI @Multimedia Mike

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:29:51.950

您应该保存您打算使用的任何寄存器，并在函数内部进行，而不是从函数外部进行。在 8086 域中习惯保存 BP 寄存器，然后使用它来引用压入堆栈的参数，在退出时恢复 BP 寄存器。此外，如果您需要返回一个值，则按照惯例使用 AX 寄存器。

**更新**：针对您更新的问题，如果您的 ASM 功能使用这些寄存器，您应该保存它们。如果您不想手动管理它，您可以随时使用 pusha/popa，它将推送/弹出所有 x86 寄存器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:23:00.320

[e]ax, [e]cx, [e]dx 是调用者保存的寄存器，[e]bx, [e]si, [e]di, [e]bp 是被调用者保存的寄存器，这意味着任何函数都可以丢弃 eax , ecx 和 edx。

习惯上在 8086 域中的 dx:ax 对中返回“结构”或 32 位值。

[根据维基百科的调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)

# highcharts - 高图表（折线图）中 X 轴和 Y 轴的更改间隔

> ID：14596620
> 
> 赞同：0
> 
> 时间：2013-01-30T04:18:38.440
> 
> 标签：highcharts

我有一张包含以下数据的表格

交易价格（卢比）

2012 年 11 月 7 日星期三 09:43 AM 14:00 2012 年 11 月 7 日星期三 09:44 AM 14:00 2012 年 11 月 7 日星期三 09:44 AM 14:00 2012 年 11 月 7 日星期三 09:44 AM 14:00 2012 年 11 月 7 日星期三2012 年 11 月 7 日星期三上午 09:45 14:45 上午 9:45 2012 年 11 月 7 日星期三上午 14:45 2012 年 11 月 7 日星期三上午 9:45 上午 14:20 2012 年 11 月 7 日星期三上午 9:47 上午 14:20 , 2012 年 11 月 7 日 09:47 AM 14.20 2012 年 11 月 7 日星期三 09:47 AM 14.20 2012 年 11 月 7 日星期三 09:47 AM 14.20 2012 年 11 月 7 日星期三 09:48 AM 14.20 2012 年 11 月 7 日星期三 09 2012 年 11 月 7 日星期三上午 48 点 14 点 30 分 09 点 48 分 2012 年 11 月 7 日星期三 09 点 48 分 2012 年 11 月 7 日星期三 09 点 48 分 14 点 48 分 2012 年 11 月 7 日星期三上午 9 点 48 分 14 点 48 分2012 年 11 月 7 日 09 日：上午 48 点 2012 年 11 月 7 日星期三 09:49 上午 14:30 2012 年 11 月 7 日星期三 09:49 上午 14:30 2012 年 11 月 7 日 星期三 09:49 上午 14:30 2012 年 11 月 7 日星期三 09:49 上午 14:30 11 月星期三2012 年 7 月 09:49 上午 14:30 2012 年 11 月 7 日星期三 09:51 上午 14:20 2012 年 11 月 7 日星期三 09:52 上午 14:20 2012 年 11 月 7 日星期三 09:52 上午 14:20 2012 年 11 月 7 日星期三 09:52上午 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 11 月 7 日星期三, 2012 年 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.1030 2012 年 11 月 7 日星期三 09:49 AM 14:30 2012 年 11 月 7 日星期三 09:49 AM 14:30 2012 年 11 月 7 日星期三 09:49 AM 14:30 2012 年 11 月 7 日星期三 09:51 AM 14:20 11 月 7 日星期三2012 年 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三上午 09:53 14.1030 2012 年 11 月 7 日星期三 09:49 AM 14:30 2012 年 11 月 7 日星期三 09:49 AM 14:30 2012 年 11 月 7 日星期三 09:49 AM 14:30 2012 年 11 月 7 日星期三 09:51 AM 14:20 11 月 7 日星期三2012 年 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三上午 09:53 14.1052 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 11 月星期三2012 年 7 月 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53上午 14.1052 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:52 AM 14.20 11 月星期三2012 年 7 月 09:52 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53 AM 14.20 2012 年 11 月 7 日星期三 09:53上午 14.10

我想在折线图中显示这些数据，Y 轴为价格，X 轴为时间，我需要知道如何根据我的要求更改 Highcharts 中 X 轴和 Y 轴的间隔。这是股票在一段时间内的价格变动。我目前使用的代码如下，但它只生成一条直线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:21:22.530

Highcharts 期望日期是 Javascript 日期数字（请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC)）。如果以下字符串`Wednesday, November 7, 2012 09:43 AM 14.00`是您数据库中的内容，您首先需要将其解析为一个数字。

前任：

```
Date.UTC(2012, 10, 7, 9, 43); 
// will output the number 1357551780000 
```

# svg - 中断 SVG 中的链式动画（使用 Webkit）

> ID：14596626
> 
> 赞同：3
> 
> 时间：2013-01-30T04:19:28.507
> 
> 标签：svg, webkit, mobile-webkit

我正在使用 SVG 显示链式动画（每个路径在前一个路径完成时自动启动）并设法使其正常工作。我什至在重置动画链的“刷新”元素中工作。

我的问题是我想提供一种“跳过”动画的方法。添加一个元素来触发元素以显示没有动画的路径很容易`<set>`，但这不会停止动画链，它会继续遍历每个元素（重置和重新绘制它们）。

**我需要一种*支持 WebKit 的*方式来停止链接的 SVG 动画......**

我尝试过的事情：

*   在由 : 触发的元素上设置`end`属性会停止当前笔画的动画，但仍会触发事件，因此不会停止链。`<animate>``skip.click``end`

*   将`begin`属性设置为`indefinite`并在每条路径的末尾手动触发下一条路径的动画。但是，这需要能够`onend`在`<animate>`元素中执行代码，而 WebKit 显然还不支持。

*   找到任何方法来停止正在进行的动画（不触发`end`事件），但对当前版本的 SVG 的引用似乎没有给出任何方法（我已经看到它被列为一个需要解决的问题，在关于起草 SVG/SMIL 未来版本的演示文稿中）。

我希望任何人都想出了解决这个问题的某种解决方法。我想我一定不是第一个想要带有“重启”和“跳过”按钮的动画链的人......

作为参考，这是我正在使用的 SVG 代码类型的简化示例（由程序即时生成，因此可能没有尽可能紧凑）：

```
<svg width="220" height="220" viewBox="0 0 109 109" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" version="1.1"  baseProfile="full">  
    <path d="M33.28,19.04c1.84,0.71,3.7,0.86,5.4,0.63c4.95-0.67,27.95-4.58,29.86-4.92c3.46-0.62,4.06,1.36,2.11,3.58c-1.95,2.22-11.41,13.17-16.35,17.19" style="fill:none;stroke:rgb(230,71,71);stroke-width:3" stroke-dasharray="67.00,67.00" stroke-dashoffset="67.00" stroke-linecap="round">
        <animate id="step0" attributeName="stroke-dashoffset" values="67.00;0" dur="1.3s" begin="0.10;refresh.click+0.01" fill="freeze" keySplines="0.5 0 0.5 1" calcMode="spline" />
        <set attributeName="stroke-dashoffset" to="67.00" begin="refresh.click" /> 
    </path> 
    <path d="M52.48,37.74c6.42,2.97,11.75,30.73,5.24,52.57c-2.8,9.38-8.09,2.96-10.47,0.99" style="fill:none;stroke:rgb(230,71,71);stroke-width:3" stroke-dasharray="70.00,70.00" stroke-dashoffset="70.00" stroke-linecap="round">
        <animate id="step1" attributeName="stroke-dashoffset" values="70.00;0" dur="1.4s" begin="step0.end+0.1s" fill="freeze" keySplines="0.5 0 0.5 1" calcMode="spline" />
        <set attributeName="stroke-dashoffset" to="70.00" begin="refresh.click" /> 
    </path> 
    <path d="M12.25,51.48c3.75,1.14,8.79,1.03,12.48,0.49c16.77-2.47,42.86-5.84,58.53-6.75c4.26-0.25,9.11-0.34,13.11,0.57" style="fill:none;stroke:rgb(230,71,71);stroke-width:3" stroke-dasharray="85.00,85.00" stroke-dashoffset="85.00" stroke-linecap="round">
        <animate id="step2" attributeName="stroke-dashoffset" values="85.00;0" dur="1.7s" begin="step1.end+0.1s" fill="freeze" keySplines="0.5 0 0.5 1" calcMode="spline" />
        <set attributeName="stroke-dashoffset" to="85.00" begin="refresh.click" /> 
    </path> 
    <g id="skipAnimation" visibility="visible"> <set  attributeName="visibility" begin="step2.end" end="refresh.click" to="hidden"/> 
        <text id="skip" x="95" y="105" stroke="#AAA" stroke-width="0.5" style="font-size:11px;">➠&lt;/text>
    </g>
    <g id="animationDone" visibility="hidden"> <set  attributeName="visibility" begin="step2.end" end="refresh.click" to="visible"/> 
        <text id="refresh" x="95" y="105" stroke="#AAA" stroke-width="0.5" style="font-size:11px;">↻&lt;/text>
    </g>
</svg> 
```

# python - Django：如何根据访问者的来源显示不同的 html 元素？

> ID：14596627
> 
> 赞同：0
> 
> 时间：2013-01-30T04:19:41.820
> 
> 标签：python, django

我是 Django 的新手。在我的模板上，如果访问者来自某个页面，我想显示一条消息。例如，如果用户来自 www.abcdef.com，则页面将显示以下消息：

你好呀！

如果用户来自任何其他 url，则不会显示该消息。我一直在搞乱{{request.META.HTTP_REFERER}}，但我还是迷路了。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:34:15.710

如果您使用链接在页面之间导航，则可以在链接中对其进行硬编码，以便：

```
 <a href='/main/welcome?from={{path|urlencode}}'> 
```

在您被重定向到的页面中，使用

```
 page=request.GET.get('from', None) 
```

获取用户来自哪里，并从那里设置您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:34:56.287

在您的视图中确定 HTTP 引用者并将其与您的上下文一起传递，您不必传递可以在布尔上下文变量中传递的引用者，或者两者都传递 - 我会推荐 - 这将使您保持更清洁模板，并允许您更适当地定制消息。

**获取推荐人：**

[https://stackoverflow.com/questions/4406377/django-request-to-find-previous-referrer](https://stackoverflow.com/questions/4406377/django-request-to-find-previous-referrer)

通过上下文变量发送变量后，尝试在模板中检查它们。我添加了refer_approved_source，您可以对照列表检查并在您的视图中设置它不必将该名称仅用于说明目的。

```
{% if refer_approved_source == 'source' %}
  It looks like you are from {{refer}}
{% endif % 
```

# javascript - 使用 Ajax/JQuery 检查原始密码作为用户类型

> ID：14596630
> 
> 赞同：1
> 
> 时间：2013-01-30T04:19:54.377
> 
> 标签：javascript, ajax, jquery

我想允许用户在更改密码页面上输入他们的原始密码，并让页面检查它是否正确而无需刷新。当密码正确时，我希望在文本框旁边显示一个复选框图像。

不过，我有两个问题。1）如何以安全的方式做到这一点，以及 2）每次按键触发 ajax 调用似乎并不总是能捕捉到每个按键。

这是我到目前为止所拥有的：

```
$("#oldPW").keyup(function () {
    checkPW();
});

// on keyup
function checkPW() {
    var pw = $("#oldPW").val();
    var dataSring = "pw=" + pw;
    $.ajax({
        type: "POST",
        url: "checkPW",
        data: dataSring,
        cache: false,
        success: function (data) {
            if (data== "True") {
                $("#pwok").fadeIn();
            }
            if (data== "false") {
                $("#pwok").fadeOut();
            }
        }
    });
} 
```

我看到上面代码的问题是用户可以手动显示图像，这将绕过上面的“安全性”。我可以在用户按下提交后再次检查，但这并不能解决问题 1，缺少键盘，而且我不确定它在安全性方面是否万无一失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:25:36.163

对于问题 #1，您需要在服务器端验证密码，*无论*. 然后，您不必担心有人绕过客户端。

至于 #2，问题是您不知道 ajax 调用将以什么顺序完成，因此之前的调用可能会在最近的调用之后完成。您可以通过多种方式处理此问题，但一种是在每次重试时中止请求：

```
$("#oldPW").data('lastRequest', {abort: function () {}});

function checkPW() {
    var pw = $("#oldPW").val();
    var dataSring = "pw=" + pw;
    $("#oldPW").data('lastRequest').abort();
    $("#oldPW").data('lastRequest', $.ajax({ 
```

# c++ - 多个输入到同一个字符串c ++

> ID：14596632
> 
> 赞同：0
> 
> 时间：2013-01-30T04:20:19.183
> 
> 标签：c++, sentinel

我正在尝试编写一个 c++ 程序，提示输入几个 1 个字的输入，直到输入一个标记值。一旦输入了这个值（即“完成”），程序应该输出用户输入的所有单词。

我有一般格式；但是，这不会为字符串存储多个值......任何帮助都会很棒，谢谢。

```
#include <iostream>
#include <cstring>

using namespace std;

int main()
{
    string word;
    word = "";
    cout << "Enter the next bla bla now:   " ;
    cin >> word;

    while ( word != "complete" )
    {
        cout << "The previous bla bla was:  " << word << endl;
        cout << "Enter the next bla bla now: ";
        cin >> word;

    }

    cout << "Your phrase..bla bla bla is :  " << word << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:23:33.303

您可以将结果存储到向量中，然后像这样循环遍历它们：

```
#include <iostream>
#include <string>
#include <vector>

int main() {
    std::string str;
    std::vector<std::string> strings;
    while(std::getline(std::cin,str) && str != "complete") {
        strings.push_back(str);
    }
    std::cout << "Your strings are: \n";
    for(auto& i : strings)
        std::cout << i << '\n';
} 
```

这段代码的作用是不断询问用户输入，直到找到“完成”这个词，它不断将输入的字符串插入到向量容器中。输入“完成”一词后，循环结束并打印出向量的内容。

请注意，这使用 C++11 for-range 循环，可以使用迭代器或`std::copy`with替换它`std::ostream_iterator`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:23:42.870

您可能希望使用集体字符串将这些单词连接在一起。简而言之...

```
#include <iostream>
#include <cstring>

using namespace std;

int main()
{
    string word;
    string allWords = "";

    word = "";
    cout << "Enter the next bla bla now:   " ;
    cin >> word;

    while ( word != "complete" )
    {
        allWords += word + " ";
        cout << "The previous bla bla was:  " << word << endl;
        cout << "Enter the next bla bla now: ";
        cin >> word;
    }

    cout << "Your phrase..bla bla bla is :  " << allWords << endl;

    return 0;
} 
```

编辑

回想起来，使用向量在以后更有用，并且允许您出于其他目的遍历这些单词。我的解决方案只有在您出于某种原因想将这些单词编译成一个句子时才有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:23:43.873

您可以`std::vector<std::string>`用来存储单词，下面的代码只需对您自己的代码进行少量更改即可：

```
#include <vector>
#include <string>
#include <iostream>
#include <iterator>

int main()
{
    std::vector<std::string> words;
    std::string word;
    std::cout << "Enter the next bla bla now:   " ;

    while (std::cin >> word && word != "complete" )
    {
      words.push_back(word);
      std::cout << "You entered:  " << word << std::endl;
    }

    std::cout << "Your word collection is:  " << std::endl;
    std::copy(words.begin(), words.end(), 
              std::ostream_iterator<std::string>(std::cout, " "));

    return 0;
} 
```

# google-maps-api-3 - 单击标记时防止地图重新定位（Google Map v3）

> ID：14596635
> 
> 赞同：1
> 
> 时间：2013-01-30T04:20:40.143
> 
> 标签：google-maps-api-3, slide

标记会打开一个包含几段文本的窗口。当用户单击标记时，地图会自行重新定位（通常是向北移动地图）以显示弹出窗口。

有没有防止这种重新定位动作的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:14:38.963

设置 disableAutoPan 选项：

```
infowindow.setOptions({disableAutoPan: true}); 
```

[**文档在这里**](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)

# ubuntu - 在 ec2 中提供目录

> ID：14596640
> 
> 赞同：0
> 
> 时间：2013-01-30T04:21:15.857
> 
> 标签：ubuntu, amazon-ec2

我有一个运行 ubuntu 的 ec2 实例，我可以通过 ssh 上传/下载文件。但是，ssh 经常在公共 wifis（图书馆、咖啡馆等）上被阻止。有没有办法通过 http 提供目录的内容来下载文件？

我尝试使用`python -m SimpleHttpServer`，但我似乎无法使用以下方式访问它：public-ip:port

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:16:15.260

这是连接问题吗？（例如，您根本不能访问 public-up:port）或更多关于使用诸如 SimpleHttpServer 之类的工具提供文件的信息？您总是可以切换您正在运行 SSH 的端口，不是吗？

# javascript - 角度绑定不会更新

> ID：14596656
> 
> 赞同：2
> 
> 时间：2013-01-30T04:23:05.957
> 
> 标签：javascript, angularjs

我正在使用 angularjs 为电子商务网站制作前端，到目前为止我遇到的唯一问题与购物车实现有关。我有一个提供该`Cart`功能的服务，该功能具有原型方法`add`、`change`和`remove`购物车中的项目。这是它的一个非常基本的版本（它包含在服务声明中）：

```
var Cart = function(){
  this.items = [];
  this.total_price = 0;
  this.item_count = 0;
}

Cart.prototype.getItems = function(){ return this.items }
Cart.prototype.getTotal = function(){ return this.total_price }

// Add a product to the cart
Cart.prototype.add = function(product, variant, qty){
  // Check if the item is already in the card and add to the quantity
  // or create the line item and add it to the list
  this.items.push(item)

  // Update totals
  this.total_price += product.price * qty;
  this.item_count += qty;
  console.log('Added product. total:', this.getTotal())
}

// Modify a product in the cart
Cart.prototype.change = function(product, variant, qty){
  // Find the item or error

  existingItem.quantity += qty;
  existingItem.line_price += existingItem.price * qty;
}

// Remove an item from the cart
Cart.prototype.remove = function(item){
  var index = this.items.indexOf(item);
  if (index !== -1) {
    this.total_price -= item.line_price;
    this.item_count -= item.quantity;
    this.items.splice(index, 1);
  }
  console.log('Removed line item. total:', this.getTotal())
}

return new Cart; 
```

这段代码在直接使用时似乎运行良好，但在控制器中绑定时出现了一个奇怪的问题。这是购物车控制器：

```
app.controller('CartCtrl', [
  '$scope',
  'Cart',
  function($scope, Cart) {
    $scope.items = Cart.getItems();
    $scope.total = Cart.getTotal();
    $scope.delete = function(item){ Cart.remove(item) };
  }
]); 
```

当我将产品添加到购物车时，`$scope.items`会更新并显示在`ng-repeat`ed 列表中，但`$scope.total`绑定什么也不做。我知道它实际上是在更新，因为我`console.log`在调试的时候到处都放了 s。我也尝试`$rootScope.$apply()`在更新总数后调用，但它只是错误，因为它已经在运行。

有没有人有任何想法？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:36:06.107

看看这是否是你的问题......这条线

```
$scope.total = Cart.getTotal(); 
```

在 $scope 上创建一个`total`属性，由于 getTotal() 返回一个原始值，所以 $scope.total 设置为 0。这里没有绑定，所以当 Cart 的 total_price 发生变化时，$scope.total 不会更新。

（$scope.items 将在 Cart 的 items 更改时更新，因为 $scope.items 被分配了对 items 数组的引用。）

# sql - 如何从存储过程中获取值

> ID：14596662
> 
> 赞同：1
> 
> 时间：2013-01-30T04:23:35.400
> 
> 标签：sql, sql-server, vb6

如何从存储过程中获取返回值，使用`VB6`and `SQL Server`.

存储过程

```
ALTER PROCEDURE [dbo].[DayAttn]
    @Attn VARCHAR(12) OUTPUT
AS
BEGIN
    SELECT @Attn = MAX(id)
    FROM   table1

    RETURN @Attn
END 
```

VB6

```
conn.Execute "exec DayAttn '" '" & Attn & "'" 
```

上面的代码显示错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:05:06.473

此代码应向您展示如何在 VB6/ADO 经典中执行此操作：

```
Set cmdTemp = New ADODB.Command
Set cmdTemp.ActiveConnection = gcnxMain
cmdTemp.Parameters.Append cmdTemp.CreateParameter("Ret", adInteger, adParamReturnValue)
cmdTemp.CommandType = adCmdStoredProc
cmdTemp.CommandText = "Procname"
cmdTemp.Execute
MsgBox "Return Value: " & cmdTemp.Parameters("Ret") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T05:21:33.990

以下是如何使用输入/输出参数：

示例存储过程

```
CREATE PROCEDURE [dbo].[TestRetVal]
    @P1 int,         --Parameter 1, INPUT ONLY
    @P2 int OUT      --Parameter 2, INPUT/OUTPUT
AS
BEGIN
DECLARE @RetVal int
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

SET @RetVal = @P1 + @P2  --Do whatever you need with parms

SET @P2 = 10 * @P1       --Assign value to OUTPUT parameter

RETURN @RetVal           --Assign SP return value

END 
```

VB6 代码：

```
Dim cnnDB As ADODB.Connection
Dim Cmd As New ADODB.Command
Dim Param As ADODB.Parameter

'Set up your cnnDB connection...

 Cmd.CommandText = "TestRetVal"
 Cmd.CommandType = CommandTypeEnum.adCmdStoredProc

 Set Param = Cmd.CreateParameter(, adInteger, adParamReturnValue)
 Cmd.Parameters.Append Param

 Set Param = Cmd.CreateParameter("P1", adInteger, adParamInput, 8, 2)
 Cmd.Parameters.Append Param

 Set Param = Cmd.CreateParameter("P2", adInteger, adParamInputOutput, 8, 4)
 Cmd.Parameters.Append Param

 'Assuming a connection has been established
 Set Cmd.ActiveConnection = cnnDB
 Set rstTest = Cmd.Execute()

 Debug.Print Cmd.Parameters(0)       '--> 6  (Shows SP return value, value of the FIRST parameter added to cmd)
 Debug.Print Cmd.Parameters("P2")    '--> 20 (Shows current value for P2 OUT parameter) 
```

另请参阅[how-to-get-return-value-of-a-stored-procedure](https://stackoverflow.com/questions/749622/how-to-get-return-value-of-a-stored-procedure?rq=1)（感谢 Pecos Bill！）

# sql - 遍历位置 SQL

> ID：14596669
> 
> 赞同：0
> 
> 时间：2013-01-30T04:23:55.777
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有以下查询获取项目，itemid，类别，数量，数量，数量总计，它们可以是不同位置的相同项目。

```
SELECT
    it.itemno,
    it.item,
    c.category,
    q.owned,
    q.added,
    (q.owned + q.added) AS total,
    (q.owned * it.cost) AS Tcost
FROM item it
INNER JOIN phiq     q  ON it.itemlid = q.itemlid
INNER JOIN category c  ON c.catid = it.catid
WHERE q.locationid = '12653'
  AND q.qdate LIKE '%2013%' 
```

由于将有三个不同的位置，我需要在不同的位置运行这个查询 3 次不同的时间。还有几年这是 2013 年的，但我应该也不能在 2012 年运行这个查询，以便再次比较 3 个位置和然后对于每个项目，我需要每个位置的总数，例如：

ITEMID 项目类别 Loc1owned Loc1 added loc1total loc2owned loc2total loc3owned loc3 added loc3total TOTAL (loc1toal+loc2total+loc3total)

由于之前的 loc 都适用于 2013 年，因此我在 2012 年也会有相同的 (loc1owned, loc1total,loc2owned)..... 并且每个项目都是 1 行，依此类推。

我的问题是我将如何在 SQL 中做到这一点。是否有循环......迭代......我对此相当陌生，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:30:32.963

你可以试试：

```
SELECT  q.locationid, it.itemno,it.item,c.category,q.owned
        ,q.added,(q.owned+q.added) as total, (q.owned*it.cost) as Tcost 
FROM    item it
        INNER JOIN phiq q on it.itemlid= q.itemlid
        INNER JOIN category c on c.catid=it.catid
WHERE   q.locationid IN ('12653', 'anotherlocation', 'nextlocation')
        AND (q.qdate LIKE '%2013%')
GROUP BY    q.locationid, it.itemno,it.item,c.category,q.owned,q.added
            ,(q.owned+q.added), (q.owned*it.cost) 
```

除非我知道它的数据类型（和内容）是什么，否则我不能做这一年。

# facebook - Facebook应用程序不询问权限

> ID：14596670
> 
> 赞同：4
> 
> 时间：2013-01-30T04:23:58.500
> 
> 标签：facebook, api

我目前正在开发一个使用 highscores API 的 Facebook 游戏，我知道它需要一些我要求的特殊权限，但它似乎不起作用。

我的登录网址如下所示：`https://www.facebook.com/dialog/oauth/?client_id=234234234&redirect_uri=http://www.facebook.com/pages/testPage/2342342342323423?sk=app_448314321899332&state=login&scope=email,publish_actions,publish_stream,read_friendlists,user_hometown,user_location,user_games_activity`

但在权限屏幕中，它只要求用户输入`Post on your behalf`和`Access your custom friend lists`。

为什么不要求其他所需的权限？

我只是将用户重定向到登录页面，如下所示：

```
var url = 'https://www.facebook.com/dialog/oauth/?client_id=' + window.appId + '&redirect_uri=' + window.canvas + '&state=login&scope=' + window.permissions;
top.window.location = url; 
```

编辑：当我使用`FB.login()`

```
FB.login(function(response) {
if(response.authResponse) {
    player.app.login();
    } else {
    top.window.location = window.canvas;
    }
}, {scope: window.permissions}); 
```

`console.log(window.permissions)`返回`email,publish_actions,publish_stream,read_friendlists,user_hometown,user_location,user_games_activity`

# ios - 解决有关自定义单元格的编译时错误

> ID：14596671
> 
> 赞同：0
> 
> 时间：2013-01-30T04:24:11.773
> 
> 标签：ios, objective-c, viewcontroller, iboutlet, outlet

我正在 iOS 6 中编写一个应用程序。这是 ViewController.m 文件中的一段代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:@"CustomCellIdentifier"];

    if (cell == nil) {

        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];

        cell = _customCell;
        _customCell = nil;

    }

    cell.firstName.textLabel = @"dsdsds";
    cell.middleName.textLabel = @"N/A";
    cell.lastName.textLabel = @"daasdsdasa";

    return cell;
} 
```

这些代码行给了我错误（`Property 'firstName' not found on object of type 'CustomCell*'`）：

```
cell.firstName.textLabel = @"dsdsds";
        cell.middleName.textLabel = @"N/A";
        cell.lastName.textLabel = @"daasdsdasa"; 
```

客户单元.h：

```
#import <UIKit/UIKit.h>

@interface CustomCell : UITableViewCell
@property (strong, nonatomic) IBOutlet UILabel *firstName;

@property (strong, nonatomic) IBOutlet UILabel *middleName;
@property (strong, nonatomic) IBOutlet UILabel *lastName;

+(NSString*) reuseIdentifier;
@end

In the Outlets of CustomCell.xib:
firstName -> label
middleName -> label
lastName -> label

Referencing Outlets:
customCell -> File's Owner

Selecting the firstName label:
Referencing Outlets:
firstName -> CustomCell
firstName -> CustomCell -CustomCellIdentifier

Selecting the middleName label:
lastName -> Custom Cell - CustomCellIdentifier
middleName -> Custom Cell

Selecting the lastName label:
lastName -> Custom Cell
middleName -> Custom Cell- Custom Cell Identifier 
```

那么，问题是什么？在我看来，这与奥特莱斯有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:04:29.983

我在您的代码中看到了几个错误：

```
cell.firstName.textLabel = @"dsdsds";
cell.middleName.textLabel = @"N/A";
cell.lastName.textLabel = @"daasdsdasa"; 
```

问题是 UILabel 没有像 textLabel 这样的属性。

将其更改为：

```
cell.firstName.text  = @"dsdsds";
cell.middleName.text = @"N/A";
cell.lastName.text   = @"daasdsdasa"; 
```

如果您没有合成该属性，请改用以下内容：

```
cell._firstName.text  = @"dsdsds";
cell._middleName.text = @"N/A";
cell._lastName.text   = @"daasdsdasa"; 
```

也改变：

```
if (cell == nil) {

        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
} 
```

至

```
if (cell == nil) {
         NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = (CustomCell *)[nib objectAtIndex:0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:43:41.713

该错误`(Property 'firstName' not found on object of type 'CustomCell*'):`意味着编译器不知道名称为 的属性`firstName`。您需要通知编译器类中可用的属性，通常是通过导入头文件。

因此，在表格视图代码所在的文件顶部，输入：

```
#import "CustomCell.h" 
```

（请注意，它在您的`@implementation`块之前，与其他`#import`的 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:00:31.163

为什么你`+reuseIdentifier`的 .h 文件中有类方法？您继承的`UITableViewCell`类有一个具有该名称的属性，所以这有点令人困惑。

此外，约定是为您的网点使用“弱”：`@property (weak, nonatomic) IBOutlet UILabel *firstName;`因为视图将具有其子视图的强副本。

我不确定为什么找不到您的财产。这是一个运行时错误。如果没有正确连接笔尖；一旦您尝试实例化该视图，您就会得到一个异常。您是否将该视图的“类”设置为 CustomCell？（虽然如果你不这样做，你应该让一个常规的 TableViewCell 出队并且无法设置你的插座，所以......）嗯。

# c++ - 为什么当我使用 -fvisibility=hidden 时仍会导出构造函数

> ID：14596672
> 
> 赞同：4
> 
> 时间：2013-01-30T04:24:27.853
> 
> 标签：c++, gcc

我有一个A类：

```
class A
{
public:
   A() {}
   virtual ~A() {}

   void Func();
}; 
```

和另一个使用 A 的 M 类。我想创建隐藏所有 A 符号的 libM.so。我使用以下脚本来编译它：

```
g++ -c A.cc -fPIC -fvisibility=hidden
g++ -c M.cc -fPIC
g++ -shared -z defs -o libM.so M.o A.o 
```

但是当我使用“nm -DC libM.so”时，它仍然有

```
0000000000000c78 W A::A()
0000000000000c78 W A::A() 
```

我在谷歌上搜索了这个问题，发现了另一个 gcc 选项：“-fvisibility-inlines-hidden”隐藏内联函数，但即使在编译 Ao 时添加此选项，我仍然得到相同的结果

```
g++ -c A.cc -fPIC -fvisibility=hidden -fvisibility-inlines-hidden 
```

为什么“-fvisibility-inlines-hidden”没有效果？如何防止 A::A() 出现在 libM.so 的导出符号中？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:40:59.043

感谢迈克·西摩。我应该在编译 M.cc 时添加 -fvisibility-inlines-hidden

```
g++ -c A.cc -fPIC -fvisibility=hidden -fvisibility-inlines-hidden
g++ -c M.cc -fPIC -fvisibility-inlines-hidden
g++ -shared -z defs -o libM.so M.o A.o 
```

# html - 语言环境更改时更改 html lang 属性

> ID：14596673
> 
> 赞同：3
> 
> 时间：2013-01-30T04:24:40.823
> 
> 标签：html, symfony, internationalization, symfony-2.1, lang

我有一个使用 PHP/Symfony2 运行的多语言网站。

当用户切换语言（=切换语言环境）时，我想更改 html lang 属性。

实现这一目标的最佳方法是什么？

PS：我的最终目标是能够为不同的语言切换字体（我为英文选择的字体看起来太糟糕了）。我正在考虑使用 CSS :lang() 伪选择器：`html:lang(zh)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T04:50:07.910

假设您使用 html5 和 twig 作为模板引擎：

```
<!doctype html>

<html lang="{{ app.request.locale }}">

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T20:29:43.040

推荐的存储语言环境的方法是语言代码下划线国家代码，例如 en_GB。

> 术语区域设置大致是指用户的语言和国家。它可以是您的应用程序用来管理翻译和其他格式差异（例如货币格式）的任何字符串。建议使用 ISO 639-1 语言代码、下划线 (_)，然后是 ISO 3166-1 alpha-2 国家/地区代码（例如 fr_FR 表示法语/法国）。 [http://symfony.com/doc/current/book/translation.html](http://symfony.com/doc/current/book/translation.html)

因此，在 lang 属性中使用语言环境的安全方法是：

```
<html lang="{{ app.request.locale|split('_')[0] }}"> 
```

这适用于**en_GB**语言环境和**en**语言环境。

# mysql - MySQL 更新事件触发插入

> ID：14596674
> 
> 赞同：0
> 
> 时间：2013-01-30T04:25:05.027
> 
> 标签：mysql, phpmyadmin

简而言之，我有以下每 1 分钟运行一次的事件：

```
UPDATE ticket SET status ='4'
WHERE duedate <= now() 
```

现在我需要创建一个触发器来捕获任何时候`update`发生的情况，然后`insert`将票证`ticketID`连同`datetime`（一种活动表）一起发送到某个表。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:36:55.627

我认为它对你有用......

```
mysql> delimiter $$
mysql> CREATE TRIGGER Employee_Trigger
    -> AFTER UPDATE ON employee
    -> FOR EACH ROW
    -> BEGIN
    -> INSERT into Employee_log
    -> (user_id, description)VALUES (user(),
    -> CONCAT('Id with ',NEW.id,' is modified ',
    -> ' from ',OLD.start_date, ' to ', NEW.start_date));
    ->  END$$ 
```

请参考此链接（[http://www.roseindia.net/sql/trigger/mysql-trigger-after-update.shtml](http://www.roseindia.net/sql/trigger/mysql-trigger-after-update.shtml)）

# functional-programming - SICP 练习 2.19 - 如何扩展这个？

> ID：14596676
> 
> 赞同：0
> 
> 时间：2013-01-30T04:25:22.200
> 
> 标签：functional-programming, lisp, scheme, sicp

我只是通过 SICP 探索函数式编程，并且想知道如何扩展练习 2.19 来做一些更有用的事情（并且这似乎需要副作用）。

该练习涉及一个程序，该程序计算一个给定硬币面额列表的给定金额（以便士为单位）的更改方式的数量。解决方案非常简单（cc 代表“count-change”）：

```
(define (cc amount coin-values)
  (cond ((= amount 0) 1)
        ((or (< amount 0) (no-more? coin-values)) 0)
        (else
         (+ (cc amount
                (except-first-denomination coin-values))
            (cc (- amount
                   (first-denomination coin-values))
                coin-values)))))

(define (first-denomination coinTypes) (car coinTypes))
(define (except-first-denomination coinTypes) (cdr coinTypes))
(define (no-more? coinTypes) (null? coinTypes)) 
```

[您可以在此处](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-15.html "链接到相关的 SICP 部分")查看相关的 SICP 部分，如果上述内容不清楚，则链接到算法描述。

我首先想看看硬币的实际组合构成了每种更改方式，因此我编写了自己的版本，将每个解决方案打印为列表：

```
(define (count-change amount coinTypes)
    (define (cc amount coinTypes currChangeList)
        (cond ((= amount 0) 
                    (display (reverse currChangeList)) 
                    (newline) 
                    1)
              ((or (negative? amount) (null? coinTypes)) 
                    0)
              (else (+ (cc amount (cdr coinTypes) currChangeList)
                       (cc (- amount (car coinTypes)) coinTypes (cons (car coinTypes) currChangeList))))))
    (cc amount coinTypes ())) 
```

所以这就是我卡住的地方：我想修改我的方法，而不是返回一个整数结果=# 进行更改的方式，并在计算过程中简单地打印每种方式，我希望它返回一个解决方案列表（a列表的列表，其中的长度 = # 进行更改的方法）。但是，我不知道如何实现这一点。用命令式/OO 语言很容易做到，但我不知道如何在功能上做到这一点。

有人知道如何实现这一目标吗？对于经验丰富的函数式编码器来说，这似乎应该是一件很容易的事情。请帮助满足我的好奇心，并为自己赢得一些编码业力:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:02:59.767

```
(define (count-change amount coinTypes)
    (define (cc amount coinTypes currChangeList)
        (cond ((= amount 0) 
               (list (reverse currChangeList)))
              ((or (negative? amount) (null? coinTypes)) 
               '())
              (else
                (append
                   (cc amount (cdr coinTypes) currChangeList)
                   (cc (- amount (car coinTypes))
                       coinTypes
                       (cons (car coinTypes) currChangeList))))))
    (cc amount coinTypes '())) 
```

# xml - 读取 XML 属性的特定部分

> ID：14596679
> 
> 赞同：0
> 
> 时间：2013-01-30T04:25:50.350
> 
> 标签：xml, grep

我正在尝试获取 XML 属性的特定部分。假设 XML 文件是这样的：

```
<item>
<title>1000 SMS + 1000 Minuten + 1000 MB</title>
</item> 
```

现在我只想提取“1000 MB”部分。我已经可以使用 Grep 获得完整的线路，但无法找到如何使用 sed 删除剩余的文本/符号。我已经有以下内容：

```
grep -o ".* MB" merged.xml 
```

哪个打印：

```
<title><![CDATA[1000 SMS + 1000 Minuten + 1000 MB 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T05:31:08.353

```
$ grep -o '[0-9]* MB' merged.xml
1000 MB 
```

# java - 使用 System.out.println 在 Java 中打印“\”键

> ID：14596680
> 
> 赞同：0
> 
> 时间：2013-01-30T04:26:09.200
> 
> 标签：java

我正在尝试`\`在我的部分输出中使用密钥。

目前通过谷歌搜索并没有被证明是成功的，也许我把它称为错误的东西（反斜杠、转义字符等）我在任何地方都找不到代码或如何让 eclipse 明白我想实际打印那个字符，而且我没有尝试某种转义码。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T04:26:58.543

你必须双重转义它，因为它是转义字符：

`System.out.println("\\");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:37:00.820

与'\'对齐，还有一些字符需要与转义序列一起使用。

\' - 此时在文本中插入一个单引号字符。

\" - 此时在文本中插入双引号字符。

\\ - 此时在文本中插入反斜杠字符。

当在 print 语句中遇到转义序列时，编译器会相应地解释它。例如，如果要将引号放在引号内，则必须在内部引号上使用转义序列 \"。要打印句子

她说：“你好！” 大部头书。

你会写

```
System.out.println("She said \"Hello!\" to me."); 
```

# c# - 在 C# 应用程序中查找命名互斥锁

> ID：14596681
> 
> 赞同：2
> 
> 时间：2013-01-30T04:26:15.397
> 
> 标签：c#, mutex, thread-synchronization

如果我没有该应用程序的源代码，如何在正在运行的 C# 应用程序中找到命名的互斥锁？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T05:40:00.790

SysInternals 的 Process Explorer 实用程序可以列出进程正在使用的句柄；其中一些句柄可能被命名为互斥体，然后您可以对其进行检查。

# google-apps-script - 在单元格中的公式完成“思考...”后运行的 Google 电子表格脚本

> ID：14596683
> 
> 赞同：4
> 
> 时间：2013-01-30T04:26:43.427
> 
> 标签：google-apps-script, google-sheets, google-docs, formula, google-drive-api

我进行了长时间的搜索和大量的代码试验，但找不到我要找的东西。也许有人在那里可以提供帮助？

我在单元格 A1 中有一个带有复杂公式的 Google 电子表格。有时，当公式计算结果时，单元格会说“正在思考...”几秒钟。

我有一个脚本“myFunction()”，它取决于单元格 A1 中的值。如果单元格显示“正在思考...”，它将无法正常运行，因此我试图创建另一个脚本，等待公式完成“思考”，然后执行 myFunction()。

这是我到目前为止所拥有的：

```
function waitMyFunction () {      

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');

    var range = s.getRange('A1:A1')  // range where I want to make sure 'Thinking' is done  
    var values = range.getValues();
    var string = values.toString();

    var loading = "Thinking...";

      while (string.search(loading) ==! 0); {
      (Utilities.sleep(10000));  // Wait for 10 seconds
}       
  myFunction();
}; 
```

问题是，无论单元格 A1 中的值是什么，脚本似乎都会等待 10 秒。即使公式不是“思考”，它也会等待。我需要这个脚本快速运行，我可以忍受它需要 10 秒，这是公式思考的奇数时间，但不是每次都！

谁能指出我正确的方向？我花了几个小时试图解决这个问题。如果有人有任何想法，我们将非常感谢您的帮助。

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T05:37:44.627

看起来与以下内容相同：[Google SpreadSheets - 在代码中使用时间触发器时，某些单元格获取“#N/A”值](https://stackoverflow.com/questions/19374226/google-spreadsheets-when-using-a-time-trigger-in-code-some-cells-getting-n/19446695?noredirect=1#comment28886210_19446695)

旁注，我怀疑您还想删除“；”

```
while (string.search(loading) ==! 0)  ;
                                      ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:25:15.620

“加载”只被评估一次。如果一开始是“Thinking ...”，那么在while 语句中总是这样。因此，您每次都需要获取单元格的值（不是值）。您可能想通过 JavaScript 语法检查 while 和 not-equals [http://www.w3schools.com/js/js_comparisons.asp](http://www.w3schools.com/js/js_comparisons.asp) 如果您希望它运行得更快，那么减少时间延迟/更频繁地测试。

# ajax - Ajax ModalPopup 在 IE8 - IE9 中显示错误

> ID：14596684
> 
> 赞同：3
> 
> 时间：2013-01-30T04:26:46.050
> 
> 标签：ajax, modalpopup

我使用母版页在我的aspx web（VB.NET）中使用ModalPopup（AJAX），它在（ie6，Firefox）中工作正常但是当我使用IE7，IE8，IE9时，当我想打开Modalpopup时，显示不正确（屏幕放大了，当我使用鼠标滚轮时，屏幕变得越来越大:()我已经尝试更改文档类型，`'<meta http-equiv="X-UA-Compatible" content="IE=8".` 希望您能帮助我...

*我正在使用 AJAX TOOLKIT 3.5，VISUAL STUDIO 2008

这是我的代码：

```
ModalPopUpPage

<asp:ModalPopupExtender ID="Panel7_ModalPopupExtender" runat="server"                                                              
        CacheDynamicResults="True" 
        DynamicServicePath="" Enabled="True"                                                                     
        PopupControlID="Panel7" CancelControlID="Button6"
        TargetControlID="label3" OkControlID="label3" 
        RepositionMode="None" >
</asp:ModalPopupExtender>
 <asp:Panel ID="Panel7" runat="server" BackColor="#EAEFF5" BorderStyle="Solid" 
        Width="100%" CssClass="" >
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
 <asp:GridView ID="GridViewBusAna" runat="server" AllowPaging="True" 
                AutoGenerateColumns="False" CssClass="tab" PageSize="6">
                <Columns>
                    <asp:CommandField ShowSelectButton="True" />
                    <asp:BoundField DataField="pdcNro" HeaderText="" />
                    <asp:BoundField DataField="pdc" 
                        HeaderText="" />
                    <asp:BoundField DataField="" HeaderText="" />
                </Columns>
                <SelectedRowStyle BackColor="#CCCCCC" />
            </asp:GridView>
            <br />
        </ContentTemplate>
        </asp:UpdatePanel>
    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:48:36.300

试试这个，改变css，在你的css文件中位置是相对的，你可以把它改成

```
position: absolute; 
```

# angularjs - 使用页内 JSON 初始化 AngularJS $resource

> ID：14596687
> 
> 赞同：14
> 
> 时间：2013-01-30T04:27:05.393
> 
> 标签：angularjs

我正在使用 AngularJS 的 $resource 来获取和更新一个对象。为了节省页面加载的往返行程，我将 JSON 对象放在页面上的一个变量中。如何使用这些数据初始化 $resource 而不是调用 $get？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T05:55:08.467

您可以使用`new`以下方法创建资源实例`$resource`：

```
window.somePreloadedJson = {
  id: 1,
  name: 'lancelot',
  quest: 'holy grail',
  color: 'blue',
};

app.factory('myResource', function($resource) {
  return $resource('/my/fake/:id', { id: '@id' });
});

...

$scope.resource = new myResource(window.somePreloadedJson); 
```

[这是 jsFiddle 上此技术的一个示例](http://jsfiddle.net/BinaryMuse/a6yJA/)，它演示了`$save`,`$delete`等在创建的实例上按预期工作。（添加了一些调试代码来注销 HTTP 请求，而不是实际发出请求，因此您可以看到页面中会发出哪些请求。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:24:23.167

您可以使用[此处](http://code.angularjs.org/1.1.2/angular-mocks.js)`angular-mocks.js`提供的脚本。该脚本允许您在运行时拦截服务调用并替换响应，这对于测试目的非常有用。

例如，给定一个服务：

```
app.factory('MyService', ['$resource', function($resource) {
    return $resource('http://myservice/service', {}, {
        get: {
            method:'GET', 
            params:{}, 
            isArray:false
        }
    });
}]); 
```

可以这样重定向：

```
app.config(function($provide) {
    $provide.decorator('$httpBackend', angular.mock.e2e.$httpBackendDecorator);
});

app.run(function($httpBackend) {
    $httpBackend.whenGET(new RegExp(".*/myservice/service.*")).respond(200, mockData.fake);
    ...
} 
```

模拟数据在这样的地方定义：

```
var mockData = new Object();
mockData.fake = ... 
```

要激活虚假服务，只需包含 angular-mocks 脚本和上述定义，切换到普通服务只需注释掉或删除它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:53:02.170

没有更好的答案让我感到非常沮丧。这是我的解决方案。我不知道它是否符合蹩脚的条件，但它对我有用：

```
# Loading json data from the document into angular seems to be a pain.
# The sole purpose of this controller is to make that easier.

# Let's say you want to load up the following JSON: [{"name": "Joe", "id": 1}]
# AND you have an angularjs service called People with a list
# You would do the following:

# <any_element ng-controller='JsonDataController' data-json='[{"name": "Joe", "id": 1}]' data-service='People' data-binding='list'></any_element>
# The controller would then set People.list = JSON.parse($attrs.json)

# And that's all there is to it.

window.JsonDataController = ['$scope', '$attrs', '$injector', ($scope, $attrs, $injector) ->
  service = $injector.get($attrs.service)
  attributeName = $attrs.binding
  service[attributeName] = JSON.parse($attrs.json)
  ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-15T14:25:54.877

您可以使用自定义 $cacheFactory 使用数据初始化 $resource。

假设您有：

```
window.initData = {
    '/request1': 'a',
    '/request2': [1, 2, 3],
    '/request3': {c: 'c', d: 'd'}
}; 
```

首先，创建自定义缓存工厂：

```
angular.module('app').factory('PreloadedCache', function($cacheFactory, $window) {
    var PreloadedCache = $cacheFactory('preloadedCache');

    // Pre-populating the $resource cache
    angular.forEach($window.initData, function(item, key) {
        PreloadedCache.put(key, item);
    });

    // Overwrite the put cache function - prevent saving in two places
    PreloadedCache.put = function() {};

    return PreloadedCache;
}); 
```

然后，在资源操作上声明一个缓存属性（来自文档）：

cache - {boolean|Cache} - 如果为真，默认的 $http 缓存将用于缓存 GET 请求，否则如果使用 $cacheFactory 构建的缓存实例，此缓存将用于缓存。

```
{action1: {method:?, params:?, cache: PreloadedCache, ...},
action2: {method:?, params:?, isArray:?, headers:?, cache: PreloadedCache, ...},
...} 
```

# charts - JavaFX 我想完全保存图表图像

> ID：14596688
> 
> 赞同：9
> 
> 时间：2013-01-30T04:27:35.430
> 
> 标签：charts, javafx

这是我的代码：

```
public class SceneToImageAndWrite extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        stage.setTitle("Primary Stage");

        final CategoryAxis xAxis = new CategoryAxis();
        xAxis.setLabel("Animals");
        final NumberAxis yAxis = new NumberAxis();
        yAxis.setLabel("Number");

        final LineChart<String, Number> lineChart = new LineChart<String, Number>(xAxis, yAxis);
        lineChart.setTitle("Line Chart");

        XYChart.Series<String, Number> series1 = new Series<String, Number>();
        series1.setName("Series");

        /** xAxis & yAxis Data */
        LinkedHashMap<String, Number> map = new LinkedHashMap<>();      
        map.put("dog", 12);
        map.put("cat", 3);
        map.put("bear", 8);
        map.put("tiger", 20);

        for (Entry<String, Number> entry : map.entrySet()) {
            series1.getData().add(new XYChart.Data<String, Number>(entry.getKey(), entry.getValue()));
        }

        lineChart.getData().add(series1);

        Scene scene = new Scene(lineChart);
        stage.setScene(scene);
        stage.show();

        WritableImage snapShot = scene.snapshot(null);
        ImageIO.write(SwingFXUtils.fromFXImage(snapShot, null), "png", new File("test.png"));
    }
} 
```

框架很棒，但保存的图像没有它应该拥有的所有图表数据。我想完全保存 Chart-Image，怎么了？⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T04:58:01.867

关闭图表上的[动画。](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/Chart.html#setAnimated(boolean))

从[快照](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#snapshot%28javafx.scene.SnapshotParameters,%20javafx.scene.image.WritableImage%29)javadoc：

> 当拍摄正在动画的场景的快照时，无论是由应用程序显式还是隐式（例如图表动画），快照将根据拍摄快照时场景图的状态进行渲染，并且不会反映任何后续动画更改。

# java - 为什么 log4j 的 Logger.getLogger() 需要传递一个 Class 类型？

> ID：14596690
> 
> 赞同：66
> 
> 时间：2013-01-30T04:27:37.427
> 
> 标签：java, log4j

我阅读了一些关于如何使用 log4j 的文章。他们中的大多数以下面的代码作为开始：

```
 Logger logger = Logger.getLogger("com.foo.Bar"); 
```

或者

```
 Logger logger = Logger.getLogger(XXX.class); 
```

这将初始化记录器对象。但我的问题是为什么需要将类类型作为参数发送？似乎当我使用记录器时，我不在乎我在哪个类中使用它。所以类类型似乎对记录器没有影响。如果我将一个记录器声明为静态和公共的，我可以在另一个类中调用这个记录器，那么作者这样设计它的意图是什么？当我使用记录器时，Class 类型会绑定一些东西吗？或者我可以将任何类类型发送到 getLogger 函数。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-30T05:08:44.300

1.  **除了类类型之外，您始终可以使用任何字符串作为记录器名称。绝对没问题。**

2.  **很多人使用类类型的原因，我猜：**

    *   便于使用。您无需担心复杂的 Java EE 应用程序中的记录器名称重复。如果其他人也使用您的记录器名称，您可能有一个日志文件，其中不仅包括您的类的输出；

    *   易于检查日志记录类，因为记录器名称将显示在日志文件中。您可以快速导航到特定班级；

    *   当您分发课程时，人们可能希望将日志从您的课程重定向到特定文件或其他地方。在这种情况下，如果您使用特殊的记录器名称，我们可能需要检查源代码，或者如果源不可用，则不可能这样做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T04:35:29.623

来自[javadoc](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html#getLogger(java.lang.Class)) :`Logger.getLogger(Class)`是`getLogger(clazz.getName())`. 与 log4j 和其他日志记录框架一起使用的约定是为每个类定义一个静态记录器。例如，

```
public class SomeClass {
    private static final Logger LOG = Logger.getLogger(SomeClass.class);
    ...
} 
```

我发现这个约定可以很好地组织日志输出。这当然不是必需的，但它是一种有用的做法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-14T03:25:41.473

1：之前在log4j.properties中定义的时候可以使用“类名”或者“字符串名”，比如

```
log4j.logger.anything=INFO,anything 
```

因此，您可以将日志记录为

```
 Logger logger = Logger.getLogger("anything"); 
```

2：如果你定义了一些日志名称，你可以很容易地检查它，因为它们是分开的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T04:46:31.453

您可以按类类型跟踪您的日志。

示例1：

```
public class Bar {
    Logger logger = Logger.getLogger("com.foo.Bar");
    ...
    logger.debug("debug message");
} 
```

也许您可以在下面看到一条日志消息。

```
DEBUG: **com.foo.Bar** debug message 
```

示例2：

```
public class Foo {
    Logger logger = Logger.getLogger("com.foo.Foo");
    ...
    logger.debug("debug message");
} 
```

也许您可以在下面看到一条日志消息。

```
DEBUG: **com.foo.Foo** debug message 
```

如果您有很多 java 类和记录器消息，那么很难找到日志消息的来源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-07T10:04:26.600

它可以依赖于特定的日志库，但通常它不仅仅是一个名称。它表示记录器的层次结构。配置 logger 时，通常会同时传递 Log Level 和 Logger name，如下所示：

```
<logger name="org.hibernate" level="ALL"/> 
```

这个属性不仅仅是名称，它的属性意味着一个层次结构。如果相反，您会编写如下内容：

```
<logger name="org" level="ALL"/> 
```

不仅休眠，而且 org 包中的所有内容都会受到影响。另一方面，如果您编写如下内容：

`<logger name="org.hibernate.validator" level="ALL"/>`

它只涉及休眠验证包，而不涉及休眠的其余部分。

顺便说一句，如果你不想为每个工厂指定一个具体的类，你可以使用类似（Kotlin）的[东西：](https://stackoverflow.com/questions/80692/java-logger-that-automatically-determines-callers-class-name/32132312#32132312)

```
val logger: Logger = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T04:32:12.590

XXX.class 是为您的 Logger 命名，即标记后续的日志语句。让您了解某些日志语句属于/源自哪个类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-27T22:41:12.560

具有类名的记录器不是强制性的，您可以使用自己的消息。约定使用：

```
Logger logger = Logger.getLogger(XXX.class) 
```

并且对调试很有用。它将记录执行了哪一行代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-01T19:01:43.667

尝试使用`getName()`方法。

```
private static final Logger log = LogManager.getLogger(JwtAuthenticationFilter.class.getName()); 
```

# javascript - Javascript .innerHTML 插入需要两次点击才能可见

> ID：14596693
> 
> 赞同：0
> 
> 时间：2013-01-30T04:28:01.850
> 
> 标签：javascript

感谢您花时间看我的问题。我正在用 Javascript 制作一个非常基本的“翻译器”，我只想接受用户输入，使用 RegExp 进行一些更改，然后将修改后的信息发送回一个空的 div。

当我单击提交按钮时，信息将提交到 URL，从输入区域中删除，并在所需区域短暂闪烁......但需要第二次单击才能根据需要保留在 #receptive 中。我不确定我正在寻找的效果是否需要 AJAX。

```
<form name="translate" id="translate_frm" action="#">

Try it out: <input type="text" name="inputField" id="inputField" />

<button name="submit" onclick="processFormData();">Do it!</button>
</form>

<div id="receptive"></div>

<script>

function age(str) {
 return str.replace(/my/, "mine")
  .replace(/\bis\b/g, "be")
  .replace(/y\b/g, "ye")
  .replace(/t\b/g, "te")
  .replace(/t,/g, "te,")
  .replace(/t\./g, "te.");
}

function finalWrite(text, location) {
  document.getElementById(location).innerHTML = "<p>" + text + "</p>";
}

function processFormData() {
  var inputText = document.getElementById("inputField");
  var refactored = age(inputText.value);
  finalWrite(refactored, "receptive");
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:38:30.707

您可能需要在单击按钮时通过返回 false 来取消表单操作。您可以使用 Firebug（或 Chrome/IE 开发人员工具）检查是否有额外的请求发送。

```
function processFormData() {
  var inputText = document.getElementById("inputField");
  var refactored = age(inputText.value);
  finalWrite(refactored, "receptive");
  return false;
} 
```

请参阅以下位置的小提琴：http: [//jsfiddle.net/W7nRW/](http://jsfiddle.net/W7nRW/) （注意：处理程序正在使用 jQuery 不显眼地应用。如果从 中删除 return 语句`processFormData`，您将收到有关需要使用 POST 请求的错误）

# python - 在 Python 3 中调用命令行参数

> ID：14596694
> 
> 赞同：2
> 
> 时间：2013-01-30T04:28:05.180
> 
> 标签：python, python-3.x, command-line-arguments

我正在用 Python 3 编写一个程序，该程序将从 csv 文件中获取数据，对其进行调整并将新数据写入将由用户命名的 csv 文件。

我只是想了解命令行部分。我希望它以这种格式正确执行。

```
$ program.py input.csv output.csv 
```

我还计划检查总共有 3 个参数。

我的问题是命令行上的这个文件名输入在哪里？它们是否保存到默认变量？如何在我的 python 程序中调用这些文件名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T04:32:07.783

命令行选项存储在 sys.argv 中。你可能想检查一下：

[http://docs.python.org/3/library/sys.html?highlight=argv#sys.argv](http://docs.python.org/3/library/sys.html?highlight=argv#sys.argv)

此外，如果您需要更复杂的命令行参数解析并基于此决定程序逻辑，您应该尝试使用[argparse](http://docs.python.org/3/library/argparse.html?highlight=argparse#argparse)

# java - 如何为小语言构建解释器？

> ID：14596698
> 
> 赞同：3
> 
> 时间：2013-01-30T04:28:20.953
> 
> 标签：java, c++, interpreter

我试图弄清楚从哪里开始这个项目。也许有人可以引导我朝着正确的方向前进。

我得到了一种小语言，我必须为其编写解释器。该语言由括号中的表达式组成：

```
(integer integer operator) 
```

或由以下形式的表达式组成的算术 IF 语句：

```
IF exp1 exp2 exp3 exp4 
```

其中，如果 exp1 为负数，则返回 exp2，如果 exp1 为零，则返回 exp3，如果 exp1 为正数，则返回 exp4。

运算符是 + 或 x（分别用于加法和乘法）。

我必须一起实现一个扫描器/解析器，然后是输出结果的解释器。解释器部分并不难，但我无法弄清楚如何开始扫描/解析过程。

我从使用 Java 开始，并让 Scanner 对象收集输入并将其存储在字符串中。然后我将字符串拆分为一个字符串数组，不使用任何内容作为分隔符（这样每个字符、符号、空格等都存储在它自己的字符串索引中）。这可能不是最好的方法，因为我不知道从这里去哪里。我无法掌握的部分是如果不遵循此语法如何返回错误，或者如何检测括号和/或 IF 等。

这是我在上一段中描述的代码片段：

```
public void run() {
    Scanner sc = new Scanner(System.in);

    while (sc.hasNext()) {
        String sLine = sc.nextLine();
        String[] scanned = sLine.split(""); 
```

输入示例：

```
(7 2 +)

Output: 9

IF (2 -2 +) (5 2 +) (5 -2 x) (5 2 x)

Output: -10 
```

如果有人对我有好的方向，请分享。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:01:32.033

您可以使用基于堆栈的算法来处理后缀表达式。一个简单的想法是将整数压入堆栈，当遇到运算符时，从堆栈中弹出整数并执行运算符提到的操作，如 + ， - 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T05:47:23.563

我认为使用 ANTLR、JavaCC、SampleCC 或其他解析器生成器工具将使用大锤来破解坚果。如果语法定义中没有递归，那么几个方法就足够了。以下代码给出了一个基本思路（它可能无法编译或工作，我从头开始编写它作为说明如何开始）：

```
public int parse(String input) {
Scanner scanner = new Scanner(input);

    return consumeLine(scanner);
}

public int consumeLine(Scanner scanner) {
    if( scanner.hasNext("(") ) {
        return consumeExpression(scanner);

    } else if( scanner.hasNext("IF") ) {
        return consumeIf(scanner);
    }
}

public int consumeExpression(Scanner scanner) {
    scanner.next("(");
    int a = scanner.nextInt();
    int b = scanner.nextInt();
    String op = scanner.next("[+-/*]");
    scanner.next(")");

    if( "+".equals(op) ) {
        return a + b;

    } else if( "-".equals(op) ) {
        return a - b;
    } ...

    throw new RuntimeException("parsing error");
}

public int consumeIf(Scanner scanner) {
    scanner.next("IF");
    int exp1 = consumeExpression(scanner);
    int exp2 = consumeExpression(scanner);
    int exp3 = consumeExpression(scanner);
    int exp4 = consumeExpression(scanner);

    if( exp1 < 0 ) {
        return exp2;
    } else if( exp1 == 0 ) {
        return exp3;
    } ...

    throw new RuntimeException("should not be here (TM)");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:35:54.973

如果您喜欢 java，使用 javacc 很容易。您可以以紧凑和简单的方式提及您的令牌以及如何处理它们，然后在编译它时，它会在 java 源代码中生成执行逻辑所需的所有代码。

[javacc 简介](http://www.javaworld.com/jw-12-2000/jw-1229-cooltools.html)

[javacc 常见问题](http://www.engr.mun.ca/~theo/JavaCC-FAQ/javacc-faq-moz.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:54:43.443

我建议你使用 C++ 和 boost 精神库....

# mysql - 创建表，SQL。基本的东西

> ID：14596701
> 
> 赞同：0
> 
> 时间：2013-01-30T04:28:35.063
> 
> 标签：mysql, sql, database, database-table

所以我在创建表格时遇到了一个小问题。问题在于我尝试为另一个表创建外键。我目前使用的是MYSQL2008 Management R2 express，所以没有设计师。这是我的两张桌子

```
use teckDB;

CREATE TABLE inventory
(
  primId int NOT NULL PRIMARY KEY,
  prodName VarChar(255),
  quantity int,
  prodCost MONEY,
  prodDesc VARCHAR(255)   
);

CREATE TABLE orderTB
(
 primId INT NOT NULL PRIMARY KEY,
 orderId INT NOT NULL,
 created date,
 prodId INT,
); 
```

那两张桌子运行没有问题。但是，当创建第三个时会导致此错误消息。

> 消息 1769，级别 16，状态 1，第 3 行外键 'orderTB' 引用了引用表 'CustomerTB' 中的无效列 'orderTB'。消息 1750，级别 16，状态 0，第 3 行无法创建约束。请参阅以前的错误。

第三张桌子上......

```
CREATE TABLE CustomerTB
(
 primId INT NOT NULL  PRIMARY KEY,
 orderId INT, FOREIGN KEY (orderTB) REFERENCES orderTB(orderId),
 fName VARCHAR(50),
 lName VARCHAR(50),
 addLN1 VARCHAR(255),
 addLN2 VARCHAR(255),
 addCity VARCHAR(255),
 addPro VARCHAR(255),
 addPST VARCHAR(7)
 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:33:13.603

尝试这个

```
FOREIGN KEY (iparent_id) REFERENCES innodb_parent (iparent_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:34:01.137

我认为这应该有助于解决您的查询

[http://blog.sqlauthority.com/2008/09/08/sql-server-%E2%80%93-2008-creating-primary-key-foreign-key-and-default-constraint/](http://blog.sqlauthority.com/2008/09/08/sql-server-%E2%80%93-2008-creating-primary-key-foreign-key-and-default-constraint/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T12:05:19.597

在“orderId INT”之后有一个额外的逗号，并且外键语法错误。

这应该有效：

```
CREATE TABLE CustomerTB
(
  primId INT NOT NULL  PRIMARY KEY,
  orderId INT REFERENCES orderTB(orderId),
  fName VARCHAR(50),
  lName VARCHAR(50),
  addLN1 VARCHAR(255),
  addLN2 VARCHAR(255),
  addCity VARCHAR(255),
  addPro VARCHAR(255),
  addPST VARCHAR(7)
); 
```

在[SQLFiddle 上测试这里](http://sqlfiddle.com/#!2/4cfd0)

# memory - 可能导致 Hbase Thrift Server 崩溃的内存问题

> ID：14596702
> 
> 赞同：3
> 
> 时间：2013-01-30T04:28:45.127
> 
> 标签：memory, crash, hbase, thrift, cloudera

我正在使用 Hbase 和 Hbase Thrift Server 运行 Cloudera CDH4。一天几次，Thrift 服务器崩溃。

在 /var/log/hbase/hbase-hbase-thrift-myserver.out 中，有这样的：

```
#
# java.lang.OutOfMemoryError: Java heap space
# -XX:OnOutOfMemoryError="kill -9 %p"
#   Executing /bin/sh -c "kill -9 8151"... 
```

在 /var/log/hbase/hbase-hbase-thrift-myserver.log 中，文件末尾没有错误消息。只有很多调试消息表明其中一个节点正在缓存特定文件。

我无法弄清楚 Hbase Thrift Server 的任何配置选项。/etc/ 中没有明显的文件。只是 /etc/hbase/conf 和它的 Hbase 文件。

关于调试的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:21:25.167

我们在 HBase Thrift 设置中遇到了同样的问题，最后使用了一个看门狗脚本，如果 Thrift 没有运行，它会重新启动它。

您是否每天多次使用 HBase 服务器？这可能会导致这种情况。没有办法解决这个问题，Thrift 似乎每次使用时都会占用（或泄漏）大量内存，因此您需要一个看门狗脚本。

如果看门狗脚本过于繁重，您可以使用简单的 cron 作业在频繁的时间间隔内重新启动 Thrift，以确保它保持正常运行。

以下 cron 每两个小时重新启动一次 Thrift。

```
0 */2 * * * hbase-daemon.sh restart thrift 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T02:02:26.673

使用 /etc/hbase/conf/hbase-env.sh，我增加了堆大小，这解决了崩溃问题。

```
# The maximum amount of heap to use, in MB. Default is 1000.
export HBASE_HEAPSIZE=8000 
```

感谢[CDH 用户邮件列表上的 Harsh J](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!mydiscussions/cdh-user/4zavDGw8D0Q)帮助我弄清楚。正如他所指出的，我缺少日志消息表明`kill -9`可能正在发生：

> 实际上，如果日志尾部崩溃前缺少关闭处理程序消息，则可能是通过 OOM 处理程序将 kill -9 传递给进程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-08T22:18:35.487

增加堆大小可能并不总是解决方案。

根据这个[cloudera 博客](http://www.cloudera.com/documentation/enterprise/5-2-x/topics/cdh_ig_hbase_troubleshooting.html)，

Thrift 服务器可能正在接收无效数据。我建议启用帧传输和紧凑协议。

如果您在服务器上启用这些协议，则有一个问题，客户端应该使用相同的协议。

# ada - Ada的字母转换程序

> ID：14596704
> 
> 赞同：1
> 
> 时间：2013-01-30T04:28:58.650
> 
> 标签：ada

我在 Ada 中制作了一个字母转换程序，它将接受任何小写字母并将其更改为大写，反之亦然。整个过程一直有效，直到您到达我的 argument_count = 3 部分。它应该将文本输出到另一个文件，而它根本不起作用。我的异常错误`when others=> error`不断弹出。

当您将其输入终端或命令行时，它应该是这样的：

```
./case_converter u plain.text output 
```

* * *

```
With Ada.Text_IO, Ada.Command_Line, Ada.Characters.Handling;
Use Ada.Text_IO, Ada.Command_Line, Ada.Characters.Handling;

Procedure case_conversion is

    Argument_Error : Exception; --the excpetion raise for bad command-line arguments.
    Input, Output  : File_Type;-- input and output files, if specified.
    File           : File_Type; 
    Eol           : Boolean;
    Char           : Character;

Function To_Upper (upper : Character) Return Character is  

Begin

    Case upper is 

        When 'a' =>
            Return 'A';
        When 'b' =>
            Return 'B';
        When 'c' =>
            Return 'C';
        When 'd' =>
            Return 'D';
        When 'e' =>
            Return 'E';
        When 'f' =>
            Return 'F';
        When 'g' =>
            Return 'G';
        When 'h' =>
            Return 'H';
        When 'i' => 
            Return 'I';
        When 'j' =>
            Return 'J';
        When 'k' =>
            Return 'K';
        When 'l' =>
            Return 'l';
        When 'm' =>
            Return 'M';
        When 'n' =>
            Return 'N';
        When 'o' =>
            Return 'O';
        When 'p' =>
            Return 'P';
        When 'q' =>
            Return 'Q';
        When 'r' =>
            Return 'R';
        When 's' =>
            Return 'S';
        When 't' =>
            Return 'T';
        When 'u' =>
            Return 'U';
        When 'v' =>
            Return 'V';
        When 'w' =>
            Return 'W';
        When 'x' =>
            Return 'X';
        When 'y' =>
            Return 'Y';
        When 'z' =>
            Return 'Z';
        When Others =>
            Return char; -- This will let me know if there is a bug in the code, and to just return char.
    end case;
end To_Upper;

Function To_Lower (lower : Character) Return character is              

Begin

    Case lower is

        When 'A' =>
            Return 'a';
        When 'B' =>
            Return 'b';
        When 'C' =>
            Return 'c';
        When 'D' =>
            Return 'd';
        When 'E' =>
            Return 'e';
        When 'F' =>
            Return 'f';
        When 'G' =>
            Return 'g';
        When 'H' =>
            Return 'h';
        When 'I' =>
            Return 'i';
        When 'J' =>
            Return 'j';
        When 'K' =>
            Return 'k';
        When 'L' =>
            Return 'l';
        When 'M' =>
            Return 'm';
        When 'N' =>
            Return 'n';
        When 'O' =>
            Return 'o';
        When 'P' =>
            Return 'p';
        When 'Q' =>
            Return 'q';
        When 'R' =>
            Return 'r';
        When 'S' =>
            Return 's';
        When 'T' =>
            Return 't';
        When 'U' =>
            Return 'u';
        When 'V' =>
            Return 'v';
        When 'W' =>
            Return 'w';
        When 'X' =>
            Return 'x';
        When 'Y' =>
            Return 'y';
        When 'Z' =>
            Return 'z';
        When Others =>
            Return char; 

    end case;
End To_Lower;

begin

        If argument_count < 1 then
            Raise Argument_Error;
        end if;

           IF Argument_Count > 1 THEN 
        null;     
   END IF; 

   IF Argument_Count > 2 THEN 
        null; 
   END IF;   

      If argument_Count = 1 then
            loop          
                look_Ahead (Char, Eol);       
                    if Argument (1) = "U" or Argument (1) = "u" then
                           Get (char);
                           Char := (To_Upper(char));
                          Put (char);
                        elsif
                               Argument (1) = "L" or Argument (1) = "l" then
                            Get (char);
                            Char := (To_Lower(char));
                            Put (char);
                       end if;  
                   end loop;
            end if;

-----------------------------------------------------------                   

        If Argument_Count = 2 then            
           Open (file, In_File, Argument (2));
        end if;

        While Not End_of_File (file) loop
               Look_Ahead (File, Char, EoL);

                If Argument (1) = "U" or Argument (1) = "u" then
                   Get (file, char);
                   Char := (To_Upper(char));
                   Put (char);
                elsif
                       Argument (1) = "L" or Argument (1) = "l" then
                    Get (file, char);
                    Char := (To_Lower(char));
                    Put (char);
               end if;     

    If EoL then
               New_Line;
        end if; 
end loop;

------------------------------------------------------------    
          If Argument_Count = 3 then
            Open (file, In_File, Argument (2));
            Create (Output, Out_file, Argument(3));

              While Not End_of_File (file) loop 
             -- Look_Ahead (file, Char, EoL);
                              If EoL then
                             New_Line(output);
                         end if;   
                 If Argument (1) = "U" or Argument (1) = "u" then

                           Get (file, char);
                           Char := (To_Upper(char));
                           Put (output, char);

                       elsif Argument (1) = "L" or Argument (1) = "l" then                           
                               ---------
                                  If Eol then
                                      new_line (output);
                                  end if;
                                Get (file, char);
                                Char := (To_Lower(char));
                                Put (output, char);

                      end if;             
    end loop;
end if;

   IF Is_Open(input) THEN 
      Close(Input); 
   END IF; 

   IF Is_Open(Output) THEN 
      Close(Output); 
   END IF;

EXCEPTION
   WHEN Name_Error =>
      Put_Line("The file " & Argument(2) & " cannot be used for input");
   WHEN OTHERS =>
      Put_Line("Usage: case_converter U|L [infile [outfile]]");

end case_conversion; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:11:54.887

为什么不是`Ada.Characters.Handling.To_Upper`(and `To_Lower`) 函数？

如果您确实需要检查字符是否为字母，请使用`Is_Letter`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:24:05.080

用 捕获异常通常是个坏主意`when others`，除非您确定可能会引发哪些异常（即使是非常有经验的开发人员也可能会出错）。

在您的情况下，您应该注释掉“当其他人”行；当你运行你的程序并发生异常时，它会被报告（通常是发生它的行号，虽然不是 - 在我的机器上 - 在这种情况下）。[它有助于获得堆栈跟踪：这在 Mac OS X 上比在其他机器上更难，我在这里](http://forward-in-code.blogspot.co.uk/2011/08/debugging-and-stack-traces-on-mac-os-x.html)写过。

我跑了

```
$ ./case_conversion u case_conversion.adb t  

Execution terminated by unhandled exception
Exception name: ADA.IO_EXCEPTIONS.STATUS_ERROR
Message: file not open
Call stack traceback locations:
0x1000103bc 0x10000c9eb 0x100001e9a 0x100001a19 
```

并使用解码堆栈跟踪

```
$ atos -o case_conversion 0x1000103bc 0x10000c9eb 0x100001e9a 0x100001a19
system__file_io__check_read_status (in case_conversion) (s-fileio.adb:207)
ada__text_io__end_of_file (in case_conversion) (a-textio.adb:304)
_ada_case_conversion (in case_conversion) (case_conversion.adb:177)
main (in case_conversion) (b~case_conversion.adb:265) 
```

看着`case_conversion.adb:177`：

```
173    if Argument_Count = 2 then
174       Open (File, In_File, Argument (2));
175    end if;
176
177    while not End_Of_File (File) loop 
```

那么，如果`Argument_Count`是 3 会发生什么？

如果您不是在 Mac OS X 上运行，请尝试使用[addr2line而不是](http://www.manpagez.com/man/1/atos/)[atos](http://linux.die.net/man/1/addr2line)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T14:29:29.417

顺便说一句，鲨鱼是对的。不为此使用内置例程是愚蠢的。

但是，如果您出于某种奇怪的原因想要自己编写它，那么字母是连续的并且上下顺序相同的事实会使您的处理方式更加愚蠢。请注意，您的那些大喇叭案例陈述中的每个条目彼此之间的距离相同。要制作每个案例条目，您可以复制前一个并将两边的值加一。这正是我们发明计算机来帮助我们进行的重复机械活动，不是吗？:-)

在两者之间进行转换的传统方法是在整理序列中添加两组字符之间的差异（大多数人选择字母“A”）。例如：

```
Upper_To_Lower_Difference : constant := character'pos('a') - character'pos('A');

function To_Upper (Lower : character) return character is
begin
    if Lower in 'a'..'z' then
        return character'val(character'pos(Lower) + Upper_To_Lower_Difference);
    end if;
    return Lower;
end To_Upper; 
```

# c# - 为什么我会收到“无法使用已在使用的密钥添加实体”错误

> ID：14596718
> 
> 赞同：0
> 
> 时间：2013-01-30T04:30:39.697
> 
> 标签：c#, linq

> **可能重复：**
> [无法使用已在使用的键添加实体 (LINQ)](https://stackoverflow.com/questions/9681381/cannot-add-an-entity-with-a-key-that-is-already-in-use-linq)

我在这个问题上搜索了很多，发现很多人都面临同样的问题。但可以通过它。发布了许多解决方案，但没有收获。

我编写了一个**LINQ**查询，它检索大约 38 条记录，并使用**foreach**循环根据代码将这些记录插入到其他表中。

```
var Results =  (from p in (from d in compact.CURRENT_STATUS
                                                   where QtrEndDate >= d.ValidStartDate && QtrEndDate <= d.ValidDueDate && d.LocationCode == EmployeeLocation && d.DeptCode == selecteddept
                                            select new
                                            {
                                                loccode = d.LocationCode,
                                                taskcode = d.TaskCode,
                                                deptcode = d.DeptCode,
                                                flag = d.Flag,
                                                startdate = d.ValidStartDate,
                                                duedate = d.ValidDueDate,
                                                remarks = d.Remarks,
                                                content = d.UploadDocContent,
                                                title = d.UploadDocTitle,
                                                type = d.UploadDocType
                                            }).Union(from i in compact.HISTORY_STATUS
                                                     where QtrEndDate >= i.ValidStartDate && QtrEndDate <= i.ValidEndDate && i.LocationCode == EmployeeLocation && i.DeptCode ==  selecteddept
                                                     select new
                                                     {
                                                loccode = i.LocationCode,
                                                taskcode = i.TaskCode,
                                                deptcode = i.DeptCode,
                                                flag = i.Flag,
                                                startdate = i.ValidStartDate,
                                                duedate = i.ValidEndDate.Date,
                                                remarks = i.Remarks,
                                                content = i.UploadDocContent,
                                                title = i.UploadDocTitle,
                                                type = i.UploadDocType
                                                     }) select p);

                        foreach (var item in Results)
                        {
                            REPORT_TABLE RT = new REPORT_TABLE();
                            {

                                RT.LocationCode = item.loccode;
                                RT.TaskCode = item.taskcode;
                                RT.DeptCode = item.deptcode;
                                RT.Flag = item.flag;
                                RT.ValidStartDate = item.startdate;
                                RT.ValidDueDate = item.duedate;
                                RT.Remarks = item.remarks;
                                RT.UploadDocContent = item.content;
                                RT.UploadDocTitle = item.title;
                                RT.UploadDocType = item.type;
                                RT.SubmittedBy = (Session["username"]).ToString();
                                RT.SubmittedByIP = (Session["IP"]).ToString();
                                RT.SubmittedOn = System.DateTime.Now;
                                RT.ReportID = RHqueryFind.ReportID;
                                RT.AsOnDate = QtrEndDate;
                            }
                            compact.REPORT_TABLEs.InsertOnSubmit(RT);  
                            compact.SubmitChanges();
                        }; 
```

但我确实收到错误**Cannot add an entity with a key that has been in use** in the last line ie **SubmitChanges**。

在其中一个解决方案中，我发现要添加一行代码，`RefreshMode`但这无法解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:43:20.143

我认为您必须删除列的主键。创建新列即**SerialNo**并将其设置为具有**Identity Specification的****主键**。

 **我遇到了同样的问题，即**无法使用已在使用的键添加实体，**但是当我删除了插入值的列的主键并使用主键和身份规范创建新列时。问题解决了**

# javascript - 用于解析.net json Datetime 的 javascript 正则表达式

> ID：14596719
> 
> 赞同：4
> 
> 时间：2013-01-30T04:31:11.043
> 
> 标签：javascript, regex, json, date

我不是正则表达式专家，所以我寻求帮助以提出一个可以像这样工作的正则表达式：

```
var regExp = ???

regExp.exec('\/Date(1330848000000-0800)\/') = [..., '1330848000000', '0800']

// optional gmt
regExp.exec('\/Date(1330848000000)\/') = [..., '1330848000000', null]

regExp.exec('\/Date(1)\/') = [..., '1', null]

// gmt required if - is present
regExp.exec('\/Date(1330848000000-)\/') = null

// escaping backslash is required
regExp.exec('/Date(1330848000000-0800)\/') = null
regExp.exec('\/Date(1330848000000-0800)/') = null

// case sensitive
regExp.exec('\/date(1330848000000-0800)\/') = null

// only numbers allowed
regExp.exec('\/Date(1aaa848000000-0800)\/') = null
regExp.exec('\/Date(1330848000000-0a00)\/') = null 
```

我很早就被这样愚蠢的事情困住了：

```
/\\bla(.*)bla/.exec('\bla123bla') = null // instead of [ ..., '123']

new RegExp('\\\\bla(.*)bla').exec('\bla123bla') = null // instead of [ ..., '123'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T05:06:31.443

如果字符串从不包含除时间和时区之外的任何其他数字，则可以使用此正则表达式：

```
/(\d+)(?:-(\d+))?/ 
```

放入您的代码：

```
var regex = /(\d+)(?:-(\d+))?/;
// regex.exec... 
```

如果您确实需要*验证* **并**从字符串中提取数字：

```
/^\/Date\((\d+)(?:-(\d+))?\)\/$/ 
```

上面的正则表达式将检查字符串是否遵循确切的格式，并将数字提取出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:54:33.450

以下正则表达式检查您所需的约束：

```
\\/Date\((\d{13})(-(\d{4}))?\)\\/ 
```

它检查 a`\`后跟 a`/`后跟文本`Date`，后跟括 13 位数字的括号和一个可选序列 of`-`后跟 4 位数字，然后是必需的`\`and `/`。

匹配需要转义的`\\`单个`\`字符，因为它是正则表达式中的特殊字符。和的情况也是`(`如此`)`。

由此，$1 匹配括号内的 13 位数字，$3 匹配 4 位数字（如果存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:25:53.573

一直在玩正则表达式，终于搞定了

转义斜杠只是被javascript忽略了，所以这就是我提出的解决方案（在chrome控制台上测试）

```
var regExp
undefined

regExp = /^\/Date\((\d+)(?:-(\d+))?\)\/$/
/^\/Date\((\d+)(?:-(\d+))?\)\/$/

regExp.exec('\/Date(1330848000000-0800)\/')
["/Date(1330848000000-0800)/", "1330848000000", "0800"]

regExp.exec('\/Date(1330848000000)\/')
["/Date(1330848000000)/", "1330848000000", undefined]

regExp.exec('\/Date(1)\/')
["/Date(1)/", "1", undefined]

regExp.exec('\/Date(1330848000000-)\/')
null

regExp.exec('/Date(1330848000000-0800)\/')
["/Date(1330848000000-0800)/", "1330848000000", "0800"]

regExp.exec('\/Date(1330848000000-0800)/')
["/Date(1330848000000-0800)/", "1330848000000", "0800"]

regExp.exec('\/date(1330848000000-0800)\/')
null

regExp.exec('\/Date(1aaa848000000-0800)\/')
null

regExp.exec('\/Date(1330848000000-0a00)\/')
null 
```

# java - 调用 BCrypt 时出现错误 - 第 535 行：无法在数组类型 int[] 上调用 clone()

> ID：14596720
> 
> 赞同：0
> 
> 时间：2013-01-30T04:31:33.597
> 
> 标签：java, eclipse, gwt, encryption, bcrypt

我正在使用以下代码生成加密密码：

```
class DuplicateHandler<T> implements AsyncCallback<User> {
  public void onFailure(Throwable ex) {
    Window.alert("RPC call failed.");
  }

  public void onSuccess(User result) {
    User u = result;
    if (u == null) {
      String pw_hash = BCrypt.hashpw(passwordTextBoxEmail.getText(),
          BCrypt.gensalt());
      System.out.println("Hashed password lenth is: " + pw_hash.length());
      AsyncCallback<User> callback = new CreationHandler<User>();
      rpc.createUser(textBoxAccount.getText(), pw_hash, null, null, null,
          callback);
    } else {
      Window
          .alert("Username already in use. Please select another Username.");
    }
  }
} 
```

我收到以下错误：

```
[DEBUG] [org.AwardTracker.AwardTracker] - Validating units:
[INFO] [org.AwardTracker.AwardTracker] - Ignored 1 unit with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO] [org.AwardTracker.AwardTracker] - Module org.AwardTracker.AwardTracker has been loaded
[ERROR] [org.AwardTracker.AwardTracker] - Errors in 'file:/C:/Users/Glyndwr/Eclipse/Workspace/AwardTracker/src/org/AwardTracker/client/BCrypt.java'
[ERROR] [org.AwardTracker.AwardTracker] - Line 535: Cannot invoke clone() on the array type int[]
[ERROR] [org.AwardTracker.AwardTracker] - Line 536: Cannot invoke clone() on the array type int[]
[ERROR] [org.AwardTracker.AwardTracker] - Line 609: Cannot invoke clone() on the array type int[]
[ERROR] [org.AwardTracker.AwardTracker] - Line 706: No source code is available for type java.security.SecureRandom; did you forget to inherit a required module?
[ERROR] [org.AwardTracker.AwardTracker] - Uncaught exception escaped

15:10:39.817 [ERROR] [org.AwardTracker.AwardTracker] Uncaught exception escaped

java.lang.Error: Unresolved compilation problem: 
Cannot invoke clone() on the array type int[]

at org.AwardTracker.client.BCrypt.crypt_raw(BCrypt.java:609)
at org.AwardTracker.client.BCrypt.hashpw(BCrypt.java:682)
at org.AwardTracker.client.CreateAccountView$1$DuplicateHandler.onSuccess(CreateAccountView.java:103)
at org.AwardTracker.client.CreateAccountView$1$DuplicateHandler.onSuccess(CreateAccountView.java:1)
at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)
at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Unknown Source) 
```

根据文档，我包含了 BCrypt.java 和调用 BCypt 并返回值的单行。我没有修改 BCrypt.java。

任何帮助，将不胜感激。

问候，

格林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:24:06.793

我想在 GWT 中做同样的事情，即我想在客户端使用 BCrypt；不幸的是，java.security 包尚未移植到 GWT，这就是为什么您不能在客户端使用 java.security.SecureRandom 类的原因。一种解决方案是自己移植该类。我的决定是在服务器端使用 BCrypt，并依靠安全套接字 (SSL) 来保护从客户端发送到服务器的密码。可以在此处找到已在 GWT 中的客户端可用的包：[JRE 仿真参考](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

# android - 我所有的矩阵函数都不起作用？OpenGL ES 2.0

> ID：14596722
> 
> 赞同：0
> 
> 时间：2013-01-30T04:31:35.873
> 
> 标签：android, opengl-es, matrix, opengl-es-2.0

我正在尝试制作一个投影矩阵来缩放屏幕并制作一个协调系统。出于某种原因，我认为我的任何矩阵调用都不起作用......我正在使用的 3 个函数是

```
Matrix.orthoM(mProjMatrix, 0, 0, 1520, 0,  1000, -1, 10);
Matrix.setLookAtM(mVMatrix, 0, 0, 0, 1.0f, 0.0f, 0f, 0f, 0f, 1.0f, 0.0f);
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0); 
```

他们是在互相抵消吗？有什么问题吗？（完整的渲染类代码在最后）

我这样做的主要目标是最终达到这样一种情况，即当我制作一个正方形时，我可以提供`(200, 100,0) //x, y, z`不仅在 -1 和 1 之间的坐标。

这是我的完整渲染类：

```
public class MyRenderer implements Renderer {

private static final String TAG = "MyRenderer";

Square square;

private final float[] mMVPMatrix = new float[16];
private final float[] mProjMatrix = new float[16];
private final float[] mVMatrix = new float[16];
private final float[] mRotationMatrix = new float[16];

private int camWidth,camHeight;

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    GLES20.glClearColor(0.0f, 0.0f, 1.0f, 0.5f);
    camWidth=480;camHeight=320;
    // initialize a square
    square = new Square();
}

@Override
public void onDrawFrame(GL10 nope) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

    //set camera position

    GLES20.glViewport(0, 0, camWidth, camHeight);

    Matrix.orthoM(mProjMatrix, 0, 0, 1520, 0,  1000, -10, 999999);
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, 1.0f, 0.0f, 0f, 0f, 0f, 1.0f, 0.0f);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    square.draw(mMVPMatrix);
}

@Override
public void onSurfaceChanged(GL10 nope, int width, int height) {

    GLES20.glViewport(0, 0, camWidth, camHeight);

    Matrix.orthoM(mProjMatrix, 0, 0, 1520, 0,  1000, -10, 999999);
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, 1.0f, 0.0f, 0f, 0f, 0f, 1.0f, 0.0f);
}

public static int loadShader(int type, String shaderCode) {

    // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
    // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
    int shader = GLES20.glCreateShader(type);

    // add the source code to the shader and compile it
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    return shader;
}

 } 
```

我的 Square 课（不确定是否需要，但只是为了安全:)）-

```
public class Square {
private final String vertexShaderCode =
    "attribute vec4 vPosition;" +
    "void main() {" +
    "  gl_Position = vPosition;" +
    "}";

private final String fragmentShaderCode = "precision mediump float;"
        + "uniform vec4 vColor;" + "void main() {"
        + "  gl_FragColor = vColor;" + "}";

static final int COORDS_PER_VERTEX = 3;

static float triangleCoords[] = { // in counterclockwise order:
-0.5f, 0.5f, 0.0f, // top left
        -0.5f, -0.5f, 0.0f, // bottom left
        0.5f, -0.5f, 0.0f, // bottom right
        0.5f, 0.5f, 0.0f

};
private short drawOrder[] = { 0, 1, 2, 0, 2, 3 };
private final int vertexCount = triangleCoords.length / COORDS_PER_VERTEX;

private final int vertexStride = COORDS_PER_VERTEX * 4; // bytes per vertex

// red-green-blue-alpha
float color[] = { 0.63f, 0.76f, 0.22f, 1.0f };

private final int mProgram;
private int mPositionHandle;
private int mColorHandle;
private int mMVPMatrixHandle;
private FloatBuffer vertexBuffer;
private ShortBuffer drawListBuffer;

public Square() {
    ByteBuffer bb = ByteBuffer.allocateDirect(
    // # of coords values * 4 bytes per float
            triangleCoords.length * 4);

    // use native byte order
    bb.order(ByteOrder.nativeOrder());

    // create a floating point buffer from the ByteBuffer
    vertexBuffer = bb.asFloatBuffer();
    // add coordination to FloatBuffer
    vertexBuffer.put(triangleCoords);
    // set the buffer to read first coordinate
    vertexBuffer.position(0);

    ByteBuffer dlb = ByteBuffer.allocateDirect(drawOrder.length * 2);

    dlb.order(ByteOrder.nativeOrder());

    drawListBuffer = dlb.asShortBuffer();
    drawListBuffer.put(drawOrder);
    drawListBuffer.position(0);

    int vertexShader = ChizRenderer.loadShader(GLES20.GL_VERTEX_SHADER,
            vertexShaderCode);
    int fragmentShader = ChizRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER,
            fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();
    GLES20.glAttachShader(mProgram, vertexShader);
    GLES20.glAttachShader(mProgram, fragmentShader);
    GLES20.glLinkProgram(mProgram);

}

public void draw(float[] mvpMatrix) {
    // Add program to OpenGL ES environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
            GLES20.GL_FLOAT, false, vertexStride, vertexBuffer);

    // get handle to fragment shader's vColor member
    mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

    // set color for drawing the triangle
    GLES20.glUniform4fv(mColorHandle, 1, color, 0);

    // get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

    // apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

    // Draw the triangle
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
            GLES20.GL_UNSIGNED_SHORT, drawListBuffer);

    // dispable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);

}
} 
```

最后，你可以有一些视觉效果：

![有和没有矩阵函数](../Images/fd8e436c5ed0a5836883397b5a9a4dbd.png)

这就是我的手机在有和没有前面提到的三个 metrix 功能的情况下的样子，似乎唯一对宽度和高度做出任何改变的东西是`GLES20.glViewport(0, 0, camWidth, camHeight);`

似乎metrix什么也没做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:02:36.977

看起来您将[样本](http://developer.android.com/training/graphics/opengl/index.html)调整为正方形。这里有几个问题：

1.  `glViewPort`仅`onSurfaceChanged`使用给定的参数调用。
2.  顶点着色器代码不使用`uMVPMatrix`. 您可以通过检查`mMVPMatrixHandle`(这是`-1`针对不存在的制服的值，请参见[此处](http://www.opengl.org/sdk/docs/man/xhtml/glGetUniformLocation.xml)) 看到这一点。
3.  链接程序后，着色器变量的*位置*是固定的，因此代码可能会获取它们一次，而不是每次绘制调用。

然后，您需要调整正方形的坐标...

# c# - 如何在树视图中获取所有展开的节点？

> ID：14596723
> 
> 赞同：6
> 
> 时间：2013-01-30T04:31:35.877
> 
> 标签：c#, treeview, nodes

我有一个包含 TreeView 的程序。除了根和根下的两个节点之外，我的所有节点都是从数据库加载的。

当用户将数据添加到数据库时，它必须自动添加到 TreeView。我可以通过清除所有节点、添加默认节点并将包括新节点在内的所有数据添加到我的 TreeView 来成功执行此操作，但是新 TreeView 的所有节点都已折叠。

我们的客户希望保留所有扩展的节点，但仍要添加他刚刚添加的新数据。有没有办法知道所有展开的节点并在折叠或刷新后再次展开？感谢您的任何回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T13:48:46.020

嗨据我了解，您希望在刷新树视图（通过添加新数据甚至删除一些数据）后保存树视图地图，您希望展开所有展开的节点，而其他节点默认折叠。解决方案是：

1) 刷新前保存展开的树视图节点

2）刷新树视图数据（请注意，如果您要删除一个节点，请将其从保存的列表中删除）

3) 设置之前保存的树状图

保存树视图图（仅扩展节点）-> 此代码查看树视图节点集合并将扩展节点名称保存在字符串列表中

```
List<string> collectExpandedNodes(TreeNodeCollection Nodes)
        {
            List<string> _lst = new List<string>();
            foreach (TreeNode checknode in Nodes)
            {
                if (checknode.IsExpanded)
                    _lst.Add(checknode.Name);
                if (checknode.Nodes.Count > 0)
                    _lst.AddRange(collectExpandedNodes(checknode.Nodes));
            }
            return _lst;
        } 
```

现在，您已经在列表中收集了展开的节点名称，并且想要恢复树视图的外观，您需要 2 个函数，一个通过名称检索节点的函数和一个展开选定节点的函数，它的父节点执行以下代码：

如果节点存在于树节点集合中，此函数检索指向选定节点名称的指针

```
TreeNode FindNodeByName(TreeNodeCollection NodesCollection , string Name)
        {
          TreeNode returnNode = null; // Default value to return
          foreach (TreeNode checkNode in NodesCollection)
            {
                if (checkNode.Name == Name)  //checks if this node name is correct
                    returnNode = checkNode;
                else if (checkNode.Nodes.Count > 0 ) //node has child
                {
                    returnNode = FindNodeByName(checkNode.Nodes , Name);
                }

              if (returnNode != null) //check if founded do not continue and break
              {
                  return returnNode;
              }

            }
            //not found
            return returnNode;
        } 
```

和这个功能展开节点和它的父母

```
void expandNodePath(TreeNode node)
        {
            if (node == null)
                return;
            if (node.Level != 0) //check if it is not root
            {
                node.Expand();
                expandNodePath(node.Parent);
            }
            else
            {
                node.Expand(); // this is root 
            }

        } 
```

以下向您展示函数的用法

```
private void button4_Click(object sender, EventArgs e)
        {
            //saving expanded nodes
            List<string> ExpandedNodes = new List<string>();
            ExpandedNodes = collectExpandedNodes(treeView1.Nodes);
            //resetting tree view nodes status to colapsed
            treeView1.CollapseAll();

            //Restore it back
            if (ExpandedNodes.Count > 0)
            {
                TreeNode IamExpandedNode;
                for (int i = 0; i < ExpandedNodes.Count;i++ )
                {
                    IamExpandedNode = FindNodeByName(treeView1.Nodes, ExpandedNodes[i]);
                    expandNodePath(IamExpandedNode);
                }

            }

        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T04:59:03.117

要扩展所有节点，请使用以下代码

```
treeView1.ExpandAll(); 
```

为了扩展选定的节点，请使用以下代码

```
treeView1.SelectedNode.ExpandAll(); 
```

为了扩展特定节点，请使用以下代码

```
treeView1.Nodes[Index].Expand(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-12T11:25:11.190

假设 Nodename 是唯一的。

*   使用数据库，节点名可以是表的唯一 rowid
*   树（列表）的状态可以简单地用格式化程序（例如[BinaryFormatter](http://msdn.microsoft.com/de-de/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.110%29.aspx)） 保存
    *   如果用户想保存状态

只保存展开状态

```
private List<string> SaveTreeState(TreeNodeCollection nodes)
{
  List<string> nodeStates = new List<string>();
  foreach (TreeNode node in nodes)
  {
    if (node.IsExpanded) nodeStates.Add(node.Name);
    nodeStates.AddRange(SaveTreeState(node.Nodes));
  }
  return (nodeStates);
} 
```

让树视图完成查找要还原的节点的工作

```
private void RestoreTreeState(TreeView tree, List<string> treeState)
{
  foreach (string NodeName in treeState)
  {
    TreeNode[] NodeList = treeView1.Nodes.Find(NodeName, true);
    if (NodeList.Length > 0) // only if node after reload is avail
      NodeList[0].Expand(); 
  }
} 
```

使用：

```
List<string> StateList = SaveTreeState(treeView1.Nodes);
... // reload
RestoreTreeState(treeView1, StateList); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-06T07:09:44.733

这很简单。下面，你可以看到我的递归版本：

```
//List of storage ids of expanded nodes
List<int> expandedNodeIds = new List<int>();
//call recursive fun for our tree
CollectExpandedNodes(tree.Nodes);
//recursive fun for collect expanded node ids
private void CollectExpandedNodes(TreeListNodes nodes)
{
   foreach (TreeListNode node in nodes)
   {
      if (node.Expanded) expandedNodeIds.Add(node.Id);
      if (node.HasChildren) CollectExpandedNodes(node.Nodes);
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T04:34:50.903

要简单地扩展节点，您可以尝试以下代码

```
 private void button1_Click(object sender, EventArgs e)
{
  treeView1.Nodes.Add(new TreeNode("New Node",
    new TreeNode[2] { new TreeNode("Node1"), new TreeNode("Node2") }));
  treeView1.Nodes[1].Expand();
} 
```

希望有帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-27T01:34:16.440

I know this post is old but if the tree is deep it might not be a good idea to use a recursive traversal of the tree. Since I have not seen any anwser using a non-recursive way here is a solution for doing getting expanded nodes without impacting performance.

```
public static IEnumerable<TreeNodeAdv> CollectExpandedNodes(this TreeNodeAdv root)
{
    Stack<TreeNodeAdv> s = new Stack<TreeNodeAdv>();
    s.Push(root);
    while (s.Count > 0)
    {
        TreeNodeAdv n = s.Pop();

        if (n.IsExpanded)
            yield return n;

        foreach (var child in n.Children.ToArray().Reverse())
        {
            s.Push(child);
        }
    }
} 
```

To use this method, you can do the following:

```
foreach (TreeNodeAdv expandedNode in yourTreeView.Root.CollectExpandedNodes())
{
    //Do processing on the expanded node or add in list.
} 
```

This [extension method](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods) uses [Deep-First traversal](https://en.wikipedia.org/wiki/Depth-first_search) in [post-order](https://en.wikipedia.org/wiki/Tree_traversal) along with the [yield keyword](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/yield) to generate an [IEnumerable collection](https://msdn.microsoft.com/en-us/library/system.collections.ienumerable(v=vs.110).aspx).

# jquery-ui - jquery datepicker 不显示动态添加的输入

> ID：14596724
> 
> 赞同：4
> 
> 时间：2013-01-30T04:31:36.617
> 
> 标签：jquery-ui, dom, dynamic, jquery-ui-datepicker, jquery-append

我有一个表格，每个单元格都是表格的一部分。在我的表单中，我有一个 jquery datepicker 应用于输入元素：

```
<form method="post" action="test.php">
                <table>
                    <tr>
                     ....
                        <td>
                            <input type="text" id="date" name="test"/>
                        </td>
                     ....
                    </tr>
                </table>
                <button type="button" id="addLine">Add line</button>
                <button id="submit" type="submit">Submit</button>
            </form> 
```

我像这样添加我的日期选择器：

```
$(document).ready(function() {
            $('#date').datepicker({showAnim: "slideDown"});   
        }); 
```

问题来了...我想在我的表中添加一行，但日期选择器不适用于新添加的行...

```
$(document).ready(function() {
            $('#addLine').click(function() {
                var line = $('<tr>...<input type="text" id="date" name="test"/>...</tr>');
                $('table').append(line);
              });
        }); 
```

新行出现，但是当我想插入一个值时，日期选择器不会在新创建的行上弹出。

我试图在我的 .click(function... 中放置另一个 $('#date').datepiker()... 但它不起作用。我还尝试用一种方法刷新 dom调用 page().. 但我有一个错误，该方法在元素上不存在。我需要你的帮助！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:43:39.977

您不能有多个具有相同值的 id，这可能会导致您的一些问题。改用类名，例如`class="date"`

```
<input type="text" class="date" name="test"/> 
```

由于您正在动态添加内容，因此在加载后您可以触发该`datePicker`功能。

所以：

```
line.find(".date").datepicker({showAnim: "slideDown"}) 
```

示例：http: [//jsbin.com/omoyiy/2/edit](http://jsbin.com/omoyiy/2/edit)

# java - StackOverflowError 使用递归

> ID：14596729
> 
> 赞同：0
> 
> 时间：2013-01-30T04:32:26.927
> 
> 标签：java, recursion

我应该比较一个递归函数和一个非递归函数，看看哪个函数对类项目更快。教授还希望我们在迭代器等于 10,100,1000 等时以毫秒为单位对迭代进行计时。我完成了所有工作，但在 C++ 中获取计时器时遇到了很多麻烦，所以我改用 Java，因为它太多了更容易获得毫秒输出。

但是现在当我尝试使用任何超过 8,000 的数字时，我会从递归算法中得到一个大的胖堆栈溢出错误。谁能给我任何见解？奖励：我也不知道如何像在非递归函数中那样在递归函数中执行计时器。我将如何处理这个？

```
public class comparingTimes {
    public static void main(String[] args) {

        double num = 10000;
        double result;
        nonRec(num); 
        result = rec(num);      
        System.out.printf("Rec %.0f",(result));
    }
    public static void nonRec(double num)
    {
    double resultNum = 1;
    double total = 0;
    long startTime = System.currentTimeMillis();
    long endTime;
    for (double i = 1; i < num; i++)
     {
        total += i * (i+1);
        if (i == resultNum)
        {
            endTime = System.currentTimeMillis();
            System.out.printf("Total execution time: %f seconds - num = %.0f%n", (endTime - startTime)/1000.0, i);
            resultNum *= 10;
        }           
     }      
    System.out.printf("NonRec: %.0f%n", total); 
}
public static double rec(double num)
{
    if (num == 0)
        return 0;
    else            
        return num * (num-1) + rec(num-1);      
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:37:38.823

递归的理想用例是在每个递归级别上大量减少“搜索空间”。例如，考虑一个二分搜索，其中每个递归级别将剩余搜索空间减半。

您的特殊问题是您正在尝试进行 8000 级递归，因为每个级别都会简单地递减值。这将需要相当大的堆栈空间。

您可以考虑使用`-ss`or`-oss`选项增加 JVM 的堆栈大小（当然取决于实现）。但这只会给你买这么多。

就整个递归操作的计时而言，我只需将顶级调用之前的时间存储在 中`main()`，然后将其与顶级调用返回*之后的时间进行比较，例如：*

```
long startTime = System.currentTimeMillis();
result = rec(num);
long endTime = System.currentTimeMillis();
// Now calculate the elapsed time. 
```

无需尝试在递归调用本身中执行此操作。

如果您想在递归调用中的某些点执行此操作*，*您可以将“全局”计数器变量（递归本身之外的一个，例如类级静态变量）初始化为 0，并让递归函数为每个递归级别。

然后让它在您感兴趣的点输出时间增量，例如当变量设置为 10、100、1000 等时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:31:37.507

尝试增加[堆栈大小](https://stackoverflow.com/questions/3700459/how-to-increase-to-java-stack-size)。

至于测量时间

```
public static void main(String[] args) {

    double num = 10000;
    double result;
    long start = System.currentTimeMillis();
    nonRec(num); 
    long finish = System.currentTimeMillis();
    System.out.println("Time taken (non-recursive): " + (finish -start));
    start = System.currentTimeMillis();
    result = rec(num);      
    finish = System.currentTimeMillis();
    System.out.println("Time taken (recursive): " + (finish -start));
    System.out.printf("Rec %.0f",(result));
} 
```

# web-services - 地址验证 API 印度

> ID：14596731
> 
> 赞同：1
> 
> 时间：2013-01-30T04:32:39.390
> 
> 标签：web-services, street-address

我正在寻找一项服务来帮助我专门验证印度的地址。我看到很多网站现在开始有一些地址验证，比如出租车服务和电子商务。对要使用的特定 API 有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-20T22:15:49.693

我不知道有任何免费服务，但是有一些公司，如 Experian Data Quality 和 Address Doctor 提供覆盖印度的地址验证服务。

为了全面披露，我在 Experian Data Quality 工作，我们有一项名为[QAS Pro On Demand](http://www.qas.co.uk/solutions/data-quality-software/data-capture/address-lookup-software.htm)的服务，可让您轻松地将印度和其他国家/地区的地址验证集成到您的网站中。

可在[此处找到 Experian Data Quality Web 服务涵盖的国家/地区列表](http://www.qas.co.uk/solutions/data-quality-software/data-enhancement/address-data/international-data.htm)

如果您想尝试实施一项您自己的简单服务，仅验证 PIN 码、城市、州，那么有一个开放的 All India Pincode 数据集。

# yii - enableAjaxValidation 在 yii 中不起作用 cactiveform

> ID：14596737
> 
> 赞同：2
> 
> 时间：2013-01-30T04:32:53.463
> 
> 标签：yii

我正在为我的 CActiveForm 使用客户端验证和 ajax 验证，但是如果我删除 ajaxvalidation 意味着错误的客户端验证正在发生，则客户端和 ajax 验证都不会执行。可以在这里提出解决方案的任何建议吗？我正在发布我的代码

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'useraccess-form',
'enableClientValidation'=>true,
'enableAjaxValidation'=> true,
'clientOptions' => array(
    'validateOnSubmit' => true
),
)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:00:26.847

尝试通过 htmlOptions 检查生成页面的源代码为 feilds 设置 id 时遇到了同样的问题。比较 javascript 代码中的字段 id 和 html 代码中的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T01:19:45.650

我被包含两次 JQuery。需要一次并带有框架。

```
 <?php Yii::app()->getClientScript()->registerCoreScript('jquery'); ?> 
```

# wso2 - WS02 BAM - 分析框架

> ID：14596740
> 
> 赞同：1
> 
> 时间：2013-01-30T04:33:04.833
> 
> 标签：wso2, wso2bam

在 Cassandra Cluster EVENT_KS Key Space 中，我有一个 bookTicket1（流），它有列 payload_provider、payload_totalNoTickets。当我尝试如下新的分析脚本时，

```
CREATE EXTERNAL TABLE IF NOT EXISTS BusTicketTable 
(provider STRING, totalNoTickets STRING,  version STRING) 
STORED BY 'org.apache.hadoop.hive.cassandra.CassandraStorageHandler'
WITH SERDEPROPERTIES ( 
"cassandra.host" = "127.0.0.1" , 
"cassandra.port" = "9160" , 
"cassandra.ks.name" = "EVENT_KS" , 
"cassandra.ks.username" = "admin" , 
"cassandra.ks.password" = "admin" , 
"cassandra.cf.name" = "bookTicket1" , 
"cassandra.columns.mapping" = ":payload_provider,payload_totalNoTickets, Version" ); 
```

它返回错误：

> 错误：执行 Hive 脚本时出错。查询返回非零代码：9，原因：失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1“

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:28:37.240

考虑这条线，

```
"cassandra.columns.mapping" = ":payload_provider,payload_totalNoTickets, Version" 
```

Cassandra 中没有设置密钥。我不确定，但我认为您可能还必须设置键，因为行键对于 Cassandra 列族是必需的。

例如："cassandra.columns.mapping" = ":key, payload_provider,payload_totalNoTickets, Version"

您可能需要将唯一字段设置为键。

# twitter-bootstrap - 如何更改 Twitter Bootstrap 工具提示的宽度和高度？

> ID：14596743
> 
> 赞同：179
> 
> 时间：2013-01-30T04:33:15.070
> 
> 标签：twitter-bootstrap, tooltip

我使用 Twitter Bootstrap 创建了一个工具提示。

工具提示显示为三行。但是，我想只显示一行的工具提示。

如何更改工具提示的宽度？这是特定于 Twitter Bootstrap 还是工具提示本身？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-05-27T08:07:46.863

只需覆盖 bootstrap.css

BS2 中的默认值为 max-width:200px；因此，您可以根据自己的需要增加它。

```
.tooltip-inner {
    max-width: 350px;
    /* If max-width does not work, try using width instead */
    width: 350px; 
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-02-09T00:47:26.987

在 BS3 上

```
.tooltip-inner {
    min-width: 150px; /* the minimum width */
} 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2016-03-20T12:47:34.027

我意识到这是一个非常古老的问题，但如果我来到这里，其他人也会。所以我想我在权衡。

如果您希望工具提示仅响应一行而不管您添加多少内容，宽度必须灵活。但是，Bootstrap 确实将工具提示设置为一个宽度，因此您至少必须声明该宽度将是多少，并使其从该大小开始变得灵活。这是我推荐的：

```
.tooltip-inner {
    min-width: 100px;
    max-width: 100%; 
} 
```

`min-width`声明一个起始大小。与其他人建议的最大宽度相反，它声明了一个**停止**宽度。根据您的问题，您不应声明最终宽度，否则您的工具提示内容最终将在该点换行。相反，您使用无限宽度或灵活宽度。`max-width: 100%;`将确保一旦工具提示以 100 像素宽开始，无论您在其中包含多少内容，它都会增长并适应您的内容。

**记住** 工具提示并不打算包含大量内容。如果你在整个屏幕上有一根长串，它可能看起来很时髦。它肯定会对您的响应式视图产生影响，特别是智能手机（320px 宽度）。

我会推荐两种解决方案来完善这一点：

1.  将您的工具提示内容保持在最低限度，以便不超过 320 像素宽。即使您这样做，您也必须记住，如果您将工具提示放置在屏幕右侧并且`data-placement:right`使用裹）
2.  如果您一心想要使用这一单行工具提示概念，那么通过使用`@media`查询重置您的工具提示以适应智能手机视图来覆盖您的六个。像这样：

我的演示[**HERE**](http://codepen.io/LOTUSMS/pen/eZvgRe)还根据内容大小和设备显示大小演示了工具提示的灵活性和响应性

```
@media (max-width: 320px) {
    .tooltip-inner {
         min-width: initial;
         width: 320px;
    }
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-11-19T10:03:14.710

用“重要！”定义最大宽度 并使用 data-container="body"

CSS 文件

```
.tooltip-inner {
    max-width: 500px !important;
} 
```

HTML 标记

```
<a data-container="body" title="Looooooooooooooooooooooooooooooooooooooong Message" href="#" class="tooltiplink" data-toggle="tooltip" data-placement="bottom" data-html="true"><i class="glyphicon glyphicon-info-sign"></i></a> 
```

JS脚本

```
$('.tooltiplink').tooltip(); 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-03-31T10:14:35.350

您应该使用自己的 css 覆盖属性。像这样：

```
div.tooltip-inner {
    text-align: center;
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
    margin-bottom: 6px;
    background-color: #505050;
    font-size: 14px;
} 
```

选择器选择保存工具提示的 div（工具提示是由 javascript 添加的，它通常不属于任何容器。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2015-12-20T20:33:29.003

要解决宽度问题，请改用以下代码。

```
$('input[rel="txtTooltip"]').tooltip({
    container: 'body'
}); 
```

例如： [http ://eureka.ykyuen.info/2014/10/08/bootstrap-3-tooltip-width/](http://eureka.ykyuen.info/2014/10/08/bootstrap-3-tooltip-width/)

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-04-10T14:51:36.900

另一种解决方案；在 CSS 中创建一个新类（例如 tooltip-wide）：

```
.tooltip-wide + .tooltip > .tooltip-inner {
     max-width: 100%;
} 
```

在需要宽工具提示的元素上使用此类：

```
<div class="tooltip-wide" data-toggle="tooltip" title="I am a long tooltip">Long tooltip</div> 
```

Bootstrap 工具提示在包含工具提示的元素下方生成标记，因此生成标记后的 HTML 实际上看起来像这样：

```
<div class="tooltip-wide" data-toggle="tooltip" title="I am a long tooltip">Long tooltip</div>
<div class="tooltip" role="tooltip">
    <div class="tooltip-arrow"></div>
    <div class="tooltip-inner">I am a long tooltip</div>
</div> 
```

CSS 使用它来访问相邻元素 (+) 到 .tooltip-wide，并从那里导航到 .tooltip-inner，然后再应用 max-width 属性。这只会影响使用 .tooltip-wide 类的元素，所有其他工具提示将保持不变。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-04-02T23:13:33.903

经过一些试验，这对我来说效果最好：

```
.tooltip-inner {
    max-width: 350px; /* set this to your maximum fitting width */
    width: inherit; /* will take up least amount of space */ 
} 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-01-30T04:46:20.383

您可以在 bootstrap.css 中编辑 .tooltip-inner css 类。默认最大宽度为 200 像素。您可以将最大宽度更改为您想要的大小。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-11-10T19:37:10.510

只需将默认值覆盖为`max-width`适合您需要的任何内容。

```
.tooltip-inner {
  max-width: 350px;
} 
```

**当 max-width 不起作用时**（选项 1）

如果 max-width 不起作用，则可以改用设置宽度。这很好，但您的工具提示将不再调整大小以适合文本。如果您不喜欢这样，请跳至选项 2。

```
.tooltip-inner {
  width: 350px;
} 
```

**正确处理小容器**（选项 2）

由于 Bootstrap 将工具提示附加为目标的同级，因此它受包含元素的约束。如果包含元素小于您的`max-width`，`max-width`则将不起作用。

因此，当`max-width`不起作用时，您只需要更改`container`：

```
<div class="some-small-element">
  <a data-container="body" href="#" title="Your boxed-in tooltip text">
</div> 
```

专业提示：容器可以是任何选择器，当您只想覆盖几个工具提示上的样式时，这很好。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2019-10-06T14:44:29.903

在 Bootstrap 4 上，如果您不想更改所有工具提示的宽度，您可以为所需的工具提示使用特定模板：

```
<a href="/link" class="btn btn-info"
   data-toggle="tooltip"
   data-placement="bottom"
   data-template="<div class='tooltip' role='tooltip'><div class='arrow'></div><div class='tooltip-inner' style='max-width: 400px;'></div></div>"
   title="This is a long message displayed on 400px width tooltip !"
>
    My button label
</a> 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-06-19T17:01:47.543

将类设置为主工具提示 div 和内部工具提示

```
div.tooltip {
    width: 270px;
}

div.tooltip-inner {
    max-width: 280px;
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-11-17T10:37:08.290

请参考以下帖子。cmcculloh 的回答对我有用。 [https://stackoverflow.com/posts/31683500/edit](https://stackoverflow.com/posts/31683500/edit)

[正如文档中](http://getbootstrap.com/javascript/#callout-tooltip-multiline)所暗示的，确保您的工具提示完全不换行的最简单方法是使用

```
.tooltip-inner {
    max-width: none;
    white-space: nowrap;
} 
```

有了这个，您不必担心尺寸值或类似的东西。主要问题是如果你有一个超长的文本行，它就会离开屏幕（正如你在[JSBin 示例](http://jsbin.com/nihido/edit?css,output)中看到的那样）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-03-14T16:42:42.220

BS3：

```
.tooltip-inner { width:400px; max-width: 400px; } 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-07-03T13:09:26.430

我需要调整一些工具提示的宽度。但不是整体设置。所以我最终这样做了：

CSS

```
.large-tooltip .tooltip-inner {
    max-width: 300px;
}
@media screen and (max-width: 300px) {
  .large-tooltip .tooltip-inner {
    max-width: 100%;
  }
} 
```

jQuery

```
$('[data-toggle="tooltip"]')
    .tooltip()
    .on('shown.bs.tooltip', function(e) {
        /**
         * If the item that triggered the event has class 'large-tooltip'
         * then also add it to the currently open tooltip
         */
        if ($(this).hasClass('large-tooltip')) {
            $('body').find('.tooltip[role="tooltip"].show').addClass('large-tooltip');
        }
    }); 
```

html

```
<img src="/theimage.jpg" class="large-tooltip" data-toggle="tooltip" data-html="true" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum." /> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-04-24T15:10:40.483

设置类 tooltip-inner的**最大宽度对****我不起作用**，我使用的是 bootstrap 3.2

某些**设置 max-width 的方法仅在您设置父类的宽度**(.tooltip) 时起作用。

但随后所有工具提示都会变成您指定的大小。所以这是我的解决方案：

向父类添加一个宽度：

```
.tooltip {
  width:400px;
} 
```

然后你添加最大宽度并将显示更改为内联块，这样它就不会占据整个空间

```
.tooltip-inner {
  max-width: @tooltip-max-width;
  display:inline-block;
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-04-26T05:26:08.927

试试这个代码，

```
.tooltip-inner {
     max-width:350px !important;
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-09-29T07:03:14.943

我有同样的问题，但是所有流行的答案 - 改变`.tooltip-inner{width}`我的任务未能正确完成工作。至于其他（即较短的）工具提示，固定宽度太大了。我懒得为无数的工具提示编写单独的 html 模板/类，所以我只是用**`&nbsp;`**每个文本行中的单词之间的所有空格替换。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-01-16T00:59:59.227

我的所有可变长度和设置的最大宽度都不适合我，所以将我的 css 设置为 100% 就像一个魅力。

```
.tooltip-inner {
    max-width: 100%;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-21T19:27:05.023

使用 Bootstrap 4 我使用

```
.tooltip-inner {
    margin-left: 50%;
    max-width: 50%;
    width: 50%;
    min-width: 300px;
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-02-12T14:46:19.857

in bootstrap 3.0.3 you can do it by modifying the popover class

```
.popover {
    min-width: 200px;
    max-width: 400px;
} 
```

# python - Windows 7 上的 Dropbox Python SDK 安装错误（无法创建“构建”）

> ID：14596744
> 
> 赞同：0
> 
> 时间：2013-01-30T04:33:15.390
> 
> 标签：python, windows, sdk, dropbox

我希望能得到一些帮助。我正在尝试在 Windows 7 上安装适用于 Dropbox 的 Python SDK（已安装 Python 2.7.3）。按照自述文件中的说明，我在命令提示符下运行了以下命令：“python setup.py install -f”。我收到以下错误。有什么想法吗？提前谢谢了。

```
running install
running bdist_egg
running egg_info
writing dropbox_python_sdk.egg-info\PKG-INFO
writing top-level names to dropbox_python_sdk.egg-info\top_level.txt
writing dependency_links to dropbox_python_sdk.egg-info\dependency_links.txt
reading manifest file 'dropbox_python_sdk.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'dropbox_python_sdk.egg-info\SOURCES.txt'
installing library code to build\bdist.win32\egg
running install_lib
running build_py
creating build
error: could not create 'build': Cannot create a file when that file already exists 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:05:59.590

抱歉……我想通了。我想我在下载/提取过程中弄错了一些东西，因为我从头开始，这次它起作用了。8)

# c# - 智能感知未显示 InsertonSubmit

> ID：14596748
> 
> 赞同：0
> 
> 时间：2013-01-30T04:33:48.967
> 
> 标签：c#, linq

这很奇怪，我试图在我的数据库中插入一条记录，`LINQ`但是我的智能感知没有显示`InsertonSubmit`属性，所以我使用下面的代码插入一条记录，但我只是好奇我的视觉工作室发生了什么.

```
 public  CreateSapCostCentreList(string Code, string Name,string Manager)
 {
     var db = new SAPLookUpEntities();
     SAPCostCentre SapLookUp = new SAPCostCentre();
     SapLookUp.CostCentreCode = Code;
     SapLookUp.CostCentreName = Name;
     SapLookUp.CostCentreManager = Manager;
     db.SAPCostCentres.AddObject(SapLookUp);
     db.SaveChanges();
     Add(new SchedSAPEntities.SapCostCentreEntities.CreateSapCostCentre());
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:36:50.093

看来`db.SaveChanges();`您正在使用 LINQ to 实体。 [`Table<TEntity>.InsertOnSubmit`](http://msdn.microsoft.com/en-us/library/bb763516.aspx)可**用于 LINQ to SQL**

# jqgrid - JQGrid-Trirand。如何编辑字段？

> ID：14596749
> 
> 赞同：0
> 
> 时间：2013-01-30T04:33:48.793
> 
> 标签：jqgrid, jqgrid-asp.net

我有一页使用JqGrid绑定数据，但我的要求是在编辑网格的一行时，可编辑字段**不能是**内置字段（内置文本框）我想将其绑定到其他文本框，复选框是外网格。我要编辑的数据必须提供给 jqgrid 内置输入控件以外的其他输入控件，最后这可能吗？？？

希望我对我的问题很清楚。

请帮我回复说是或否或如何，以及为什么。

已编辑

![在此处输入图像描述](../Images/58e0680f7fb07955570ec2ecc8b3a91a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T10:42:38.410

试试这个 [http://www.trirand.net/examples/grid/selection/selectedrow_client/default.aspx](http://www.trirand.net/examples/grid/selection/selectedrow_client/default.aspx)

或试试这个

```
<ClientSideEvents BeforeEditDialogShown="beforeEdit"/>

   <script type="text/javascript">

   function beforeEdit(rowID) {
      var grid = jQuery("#<%= JQGrid1.ClientID %>");
      lastSelectedRow = grid.getGridParam("selrow");
   };

   </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:51:41.530

我不确定我是否正确理解您的意思，但似乎您应该只使用[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)模式。要在客户端激活它，您只需将`editable: true`属性添加到所有可编辑的列，或使用将所有列的`cmTemplate: {editable: true}`默认值`editable`设为的选项`true`。之后，您可以例如使用[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#definition)在寻呼机中添加添加、编辑和删除按钮。之后客户端的功能将准备就绪。现在您只需在服务器代码中实现编辑部分。如果您使用 jqSuite 之类的商业版 jqGrid，您应该查看文档或[演示](http://www.trirand.net/demo.aspx)以获取更多详细信息。

# php - 为什么框架和此类弃用函数而不是仅仅更新它们？

> ID：14596757
> 
> 赞同：2
> 
> 时间：2013-01-30T04:34:31.340
> 
> 标签：php, jquery, mysql, frameworks, deprecated

例如，jQuery 已`.live()`被弃用，而我们必须使用`.on()`and 对于 MySQL，`mysql_*`很快将被弃用并转向其他东西......更值得注意的是`mysqli`......。

为什么框架和编程语言会弃用旧功能而不仅仅是更新它们？对不起，如果这是在错误的地方。如果是，请告诉我应该在哪里发帖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:38:39.200

当功能的设计发生变化时，他们希望提供一段同时提供新旧功能的时间段（过渡时间），然后在将来的某个日期删除旧版本。如果他们为新行为保留相同的名称，则无法做到这一点。 `.live()`并`.on()`采取不同的论点并以不同的方式工作。 `.on()`功能更强大，可以根据需要进行模拟`.live()`，但是如果不更改调用代码，两者是不兼容的。

引入具有新行为的新特性也简化了文档过程，因为它完全清楚记录了哪些行为（它所写的是哪个名称）。

而且，当旧代码包含不再支持旧的做事方式的最新版本时，为什么事情在不存在时不起作用`.live()`比在存在但有错误行为时更清楚。

而且，像这样的旧行为`.live()`最终会从代​​码中删除，因为它们是一种糟糕的做事方式（可能导致效率显着降低），因此 jQuery 希望每个人最终都停止使用它们。从未来的版本中删除它是一种迫使它的使用下降并最终消失的方式。过渡期为开发人员提供了大量时间来了解更改的必要性并实施/测试更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:37:56.567

答案很简单。当一个人更新他们的软件版本时。为什么他们已经编码的所有内容都要中断？当事物被弃用时，它们不仅会修复安全漏洞，还会改变它的使用方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:38:02.680

通常不推荐使用某些东西，以便人们知道不使用它们，并且知道在将来的某个时候它们将不再存在。然而，与此同时，弃用意味着他们可以在不破坏旧代码的情况下继续进行语言/框架开发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:43:58.220

从 Oracle 的[Java 文档](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/deprecation/deprecation.html)中查看：

> 希望用户迁移到新 API 的正当理由包括： - 旧 API 不安全、有缺陷或效率极低 - 旧 API 将在未来版本中消失 - 旧 API 鼓励非常糟糕的编码实践

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T04:47:40.067

所有人都尊重所有框架和语言..这就是弃用发生的原因..

1-哎呀，我到底在想什么！

我很想考虑这是不推荐使用方法的主要原因之一..在某些时候曾经犯过php / jquery或计算机犯了错误，而解决该错误的唯一方法是提供其他解决方案..

最好的例子是`mysql_`图书馆

2-你不能让每个人都进入你的新功能..比如说我喜欢打字，`.live`因为它感觉更自然，所以不要仅仅破坏我用 jquery 库构建的所有东西，他们会告诉我这很糟糕并且然后他们创造了更好的东西，最后他们将弃用旧功能..

3-我不想犯同样的错误，所以为了看起来更酷，我会给大家时间来测试新功能，如果有什么问题他们会告诉我..因为我不想和其他人一起修复错误一

4-也是最重要的核心变化和新思维..

这就是我的想法.. 肯定每一种方法都被弃用有它自己的原因.. 但让我们面对现实吧，他们知道他们比我们做得更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T04:47:42.777

`mysql_query`是一个默认危险的接口。如果不破坏围绕它构建的所有应用程序，就无法更新它，因此最好的计划是停用它。没有它，世界真的会更好。

尽管框架应该尽其所能促进向后兼容性，但在某些情况下，删除功能有助于平台更快地推进或变得更加一致。

我不确定为什么 jQuery 会放弃`live()`，但有时像这样的功能很难支持，或者与 API 的其他元素有显着的功能重叠。请记住，jQuery 不仅是一个框架，而且在代码大小方面也需要非常小心。核心库中每增加一千字节的代码，就会导致通过互联网下载额外的*TB数据。*当你添加东西时，有些东西必须去。

为什么 Linux 内核[放弃了对 80386 的支持](http://www.extremetech.com/computing/143216-linux-drops-support-for-intels-386-processors-but-does-it-really-matter)？这是因为维护您不想要的功能会减少您想要的功能的工作量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T04:51:25.987

在发布过程中必须有一个步骤允许在已弃用的功能与其替换之间同时兼容（如`.live`和`.on)`。如果此步骤不存在并且`.live`被替换为`.on`立即具有 的功能，任何依赖旧的行为`.live`并想要更新到下一个版本将不得不处理完全损坏的代码，这将更加困难。

其他原因是后端的两个 API 之间缺乏兼容性。这可能适用于`ext/mysql`vs.`mysqli`比它更适用于`.live`vs. `.on`（可能具有相似且小得多的后端）。 `mysqli`并且`PDO`都已经存在了很长时间，并且都是作为独立于不同人的项目开始的，`ext/mysql`并且可能由不同的人维护（我假设是这样）。最终，`mysqli`/`PDO`在与`ext/mysql`. 这两者的后端和前端都几乎不兼容。

我不认为你问他们为什么要摆脱`.live`/的具体原因`ext/mysql`（你似乎明白他们是劣等的），但至少 PHP 有一个关于它的常见问题解答：[http://www.php。 net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

# asp.net-mvc-3 - 如何在使用 LINQ to SQL 类的地方部署 asp.net mvc 3？

> ID：14596764
> 
> 赞同：0
> 
> 时间：2013-01-30T04:35:19.080
> 
> 标签：asp.net-mvc-3, iis, linq-to-sql

我是新来的`LINQ`。我曾经在我的.now`LINQ`中上课，当涉及到如何管理连接的部署时？我被困在这里。请帮助，提前谢谢`SQL``asp.net mvc 3``iis`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:27:40.437

您是否通过 管理连接`Web.config`？

```
<connectionStrings>
    <remove name="MyConnectionString"/>
    <add name="MyConnectionString" connectionString="XXXXXXXXXX"
      providerName="System.Data.SqlClient" />
</connectionStrings> 
```

您应该验证 connectionStrings 是否指向正确的 SQL 服务器

*编辑-1*

只是为了确保我们在“通过 Web.config 管理连接”的同一页面上，我的意思是通过部分类：

```
public partial class MyDataContext{
    public MyDataContext()
        : base(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString,mappingSource)
    {
    }
} 
```

当然，您还需要更改： ![连接-ApplicationSettings-True](../Images/22e552213675fb14dec212d2280b5883.png)

# html - 表格与 Div 对齐

> ID：14596765
> 
> 赞同：0
> 
> 时间：2013-01-30T04:35:22.197
> 
> 标签：html, css, alignment, css-tables

我需要一些关于表格对齐的帮助。我已经有一段时间没有编码了，也无法弄清楚我在这里做错了什么。我有这些 div 设置和一个表格，但由于某种原因，表格没有与中间对齐。它仅与桌子的左侧对齐，其余部分通向右侧。这是我的代码：

```
<div id="SlideShow_Wrapper" align="center">
    <div id="SlideShow_Background" align="center">
        <div align="center" id="SlideShow">
            <table border="1" align="center" >
                <tr align="center">
                    <td style="padding-right:15px;"><img src="LeftArrow.png"  /></td>
                    <td><img id="SlideShow_Picture" src="Ore_Background.png"  /></td>
                    <td style="padding-left:15px;"><img src="RightArrow.png"  /></td>
                </tr>
            </table>
        </div>
    </div>
</div> 
```

这是我的CSS：

```
#SlideShow {
    margin:0px auto;
}
#SlideShow_Background {
    background-image:url(Stone.png);
    border-radius:10px;
    width:820px;
    height:420px;
}
#SlideShow_Wrapper {
    padding-top:50px;
} 
```

我尝试了一些东西，当我删除 时`SlideShow_Background`，表格正常对齐，但是当我重新添加时，表格只是向右对齐。你能帮忙的话，我会很高兴

*编辑：*
我希望表格居中，而不是偏右。这个[jsFiddle](http://jsfiddle.net/7CctF)显示它，但没有内容，但你可以看到我的意思。
下一个链接就是我想要的样子，[jsfiddle.net/fuECu](http://jsfiddle.net/7CctF)看看它是如何居中的，但我找不到不取下`SlideShowbackground`div 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:03:47.687

你的桌子已经居中了。该`SlideShow_Background`部门只是在小屏幕上创建一个水平滚动条。但是，如果您将栏滚动到中间，您会看到桌子在中间。

不过，如果您希望表格居中，则不必删除`SlideShow_Background`. 只需删除 div 的 height 和 width 属性即可。它将被设置为自动。

```
#SlideShow_Background{
background-image:url(Stone.png);
border-radius:10px;
} 
```

[**小提琴**](http://jsfiddle.net/7CctF/1/)

# jquery - 为 jQuery .toggle() 方法添加 WAI-ARIA 支持

> ID：14596769
> 
> 赞同：5
> 
> 时间：2013-01-30T04:35:54.273
> 
> 标签：jquery, accessibility, wai-aria

我想将[WAI-ARIA`aria-hidden`](http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden)支持与 jQuery 的 .toggle() 方法配对。

所以给定`<p id="myElement">Hi there</p>`

`$('#myElement').toggle()`将隐藏元素，并设置`aria-hidden="true"`：

`<p id="myElement" style="display: none;" aria-hidden="true">Hi there</p>`

再次执行相同的`$('#myElement').toggle()`脚本将显示（切换）元素，并设置（切换）`aria-hidden="false"`：

`<p id="myElement" style="display: block" aria-hidden="false">Hi there</p>`

我可能想使用该[方法](http://api.jquery.com/toggle/)的完整功能，也许类似于

```
$('#myElement').toggle(
    if ($this.css('display')==='none'){
       $this.prop('aria-hidden', 'true')
    }
    else
    {
            $this.prop('aria-hidden', 'false')
    }
) 
```

**`.toggle()`扩展以切换状态的最高效解决方案是`aria-hidden`什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:39:55.627

**简短的回答是没有必要这样做。**

Accessible Technology`display: hidden;`以一种已经正确隐藏元素的方式支持 CSS 的属性。因此`aria-hidden="true"`，从屏幕阅读器的角度来看，指定 jQuery 的`.toggle()`方法将`display`属性设置为`hidden`. 指定`aria-hidden="false"`（或删除`aria-hidden`属性）对于 jQuery`.toggle()`将`display`属性设置为`inline`.

请参阅[https://stackoverflow.com/a/10351673/1430996](https://stackoverflow.com/a/10351673/1430996)和[Steve Faulkner](https://stackoverflow.com/users/1361227/steve-faulkner)的[HTML5 Accessibility Chops: hidden and aria-hidden](http://www.paciellogroup.com/blog/2012/05/html5-accessibility-chops-hidden-and-aria-hidden/)博客文章（特别是“结果摘要”）以了解更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-13T21:23:43.693

公认的答案在精神上是正确的，但在细节上存在一些问题：

1.  CSS Display 属性没有“隐藏”值——它应该是“无”。

2.  jQuery .toggle() 在取消隐藏时不会将显示设置为“内联”；它将其设置回空白，这将回退到级联规定的任何值。因此，如果显示的计算值是“块”，那就是它返回的值。

# ruby-on-rails - RestClient::Request.execute 传递哈希集

> ID：14596773
> 
> 赞同：8
> 
> 时间：2013-01-30T04:36:14.077
> 
> 标签：ruby-on-rails, rest-client

我一直在使用 RestClient 请求：

```
response = RestClient.post server_url, post_params, accept: :json 
```

哪个工作正常。但是我需要增加超时，因为它在服务器执行上传时不时完成。

我研究并发现唯一的解决方案是将语法更改为：

```
response = RestClient::Request.execute(:method => :post, :url => server_url, post_params, :timeout => 9000000000) 
```

但是，我似乎无法`'post_params'`像在之前的调用中那样传递参数 ( ) 的哈希图。我应该如何编写请求以便`'post_params'`包含在内。这是一个复杂的哈希图，所以我无法增加或摆脱它。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T06:32:31.313

您发送的数据称为有效负载，因此您需要将其指定为有效负载：

```
response = RestClient::Request.execute(:method => :post, :url => server_url, :payload => post_params, :timeout => 9000000, :headers => {:accept => :json}) 
```

此外，您可能希望使用更短的超时，否则您可能会得到 Errno::EINVAL: Invalid 参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-28T10:51:09.140

当我们尝试使用 rest_client.post 或 get 之类的任何方法时，您发送的数据在有效负载中，把[rest_client](https://github.com/rest-client/rest-client/blob/master/lib/restclient.rb)做的是

```
def self.post(url, payload, headers={}, &block)
    Request.execute(:method => :post, :url => url, :payload => payload, 
                    :headers => headers, &block)
end 
```

所以就像我们想要执行

```
 response = RestClient.post api_url,
             {:file => file, :multipart => true },
             { :params =>{:foo => 'foo'} #query params 
```

所以在执行命令中将采取`{:file => file, :multipart => true }`作为有效载荷和`{ :params =>{:foo => 'foo' } }`作为标题，以便传递所有这些你需要

```
response= RestClient::Request.execute(:method => :post, 
                                     :url => api_url,
                                     :payload => {:file => file, :multipart => true },
                                     :headers => { :params =>{:foo => 'foo'}},
                                      :timeout => 90000000) 
```

这应该做

# hibernate - JPQL 2.1 的 ON 和 Hibernate 的 WITH 子句有什么区别

> ID：14596774
> 
> 赞同：2
> 
> 时间：2013-01-30T04:36:20.700
> 
> 标签：hibernate, jpa, join, hql, jpql

根据[https://blogs.oracle.com/arungupta/entry/jpa_2_1_early_draft](https://blogs.oracle.com/arungupta/entry/jpa_2_1_early_draft)`JPA 2.1`的早期草案版本，它将包括对JPQL 中关键字的支持。在休眠中，我们已经有了做类似工作的子句。`ON``WITH`

我的问题是这两个是相同的还是有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:48:18.640

根据我的理解，“with”只是hibernate中“on”的替换。问题是hibernate甚至不支持左连接查询中的“on”关键字。所以我认为可以肯定地说hibernate“with”关键字等同于SQL“on”关键字。

# ellipsis - 如何触发文本溢出：多行元素上的省略号

> ID：14596777
> 
> 赞同：0
> 
> 时间：2013-01-30T04:36:39.620
> 
> 标签：ellipsis, css

我有这个元素包含一个超出可用空间的字符串。文本应仅显示在两行上。我需要`text-overflow: ellipsis`被触发，但这里没有发生。我究竟做错了什么？

```
<div><span>IpsumLorem Traborditum orb Porfalohyrm</span></div> 
```

```
div{
    text-overflow: ellipsis;
    overflow: hidden;
    float: left;
    line-height: 20px;
    padding: 8px 6px 6px;
    height: 44px;
    width: 133px;
} 
```

[JSFiddle](http://jsfiddle.net/DHge3/)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-30T04:48:58.690

您需要`white-space: nowrap;`正常`text-overflow: ellipsis;`工作：http: [//jsfiddle.net/DHge3/3/](http://jsfiddle.net/DHge3/3/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T05:19:53.977

`padding`从你的删除`CSS`，它会正常工作

**CSS**

```
div {
    line-height: 20px;
    height: 44px;
    width: 133px;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

**[小提琴](http://jsfiddle.net/sxk8n/26/)**

# highcharts - yAxis 格式化程序有时会为 this.value 接收 0

> ID：14596781
> 
> 赞同：0
> 
> 时间：2013-01-30T04:36:58.897
> 
> 标签：highcharts

我可能是错的，但我认为这很可能是某种错误：

[http://jsfiddle.net/bRgUb/](http://jsfiddle.net/bRgUb/)

```
 yAxis: {
                labels: {
                    formatter: function () {
                        return convertSecondsToHoursMinutesSeconds(this.value);
                    }
                },
                title: {
                    text: 'Time (h, min, s)'
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:43:03.557

由于 yAxis.minPadding 和 yAxis.startOnTick 的默认值（请参阅 api.highcharts.com#yAxis），Y 轴超出了数据范围。

这是您将这些设置设置为 0 和 false 的小提琴：http: [//jsfiddle.net/highcharts/bRgUb/2/](http://jsfiddle.net/highcharts/bRgUb/2/)

```
 yAxis: {
                startOnTick: false,
                minPadding: 0
            }, 
```

我仍然建议您对 yAxis 使用 type: "datetime"。

# amazon-s3 - Amazon EMR NativeS3FileSystem 内部查询

> ID：14596783
> 
> 赞同：1
> 
> 时间：2013-01-30T04:37:07.510
> 
> 标签：amazon-s3, amazon-emr

与普通 Hadoop HDFS 相比，是否有人对具有不同 InputFormat 的 NativeS3FileSystem 在 Amazon EMR 案例中的内部工作有见解，即输入拆分计算、实际数据流？将 Amazon EMR 与 S3 结合使用时，需要考虑哪些最佳实践和要点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:53:33.770

重要的是，如果您打算使用 S3N 而不是 HDFS，您应该知道这意味着您将失去**数据本地化**的好处，这可能会对您的工作产生重大影响。

通常，在使用 S3N 时，您的工作流程有 2 种选择：

*   从 S3 流式传输数据作为 HDFS 的替代品：如果您需要持续访问整个数据集，这很有用，但如前所述，可能存在一些性能限制。
*   将您的数据从 S3 复制到 HDFS：如果您只需要在某个时间点访问一小部分数据，您应该只复制到 HDFS 以保留数据局部性的好处。

根据我的经验，我还注意到对于大型作业，拆分计算可能会变得非常繁重，我什至看到了 CPU 仅用于计算输入拆分的 100% 的情况。原因是我认为 Hadoop`FileSystem`层试图分别获取每个文件的大小，如果存储在 S3N 中的文件涉及为每个文件发送 API 调用，那么如果你有很多输入文件的大工作，那就是时间可以花。

有关更多信息，我建议您查看[以下文章](https://forums.aws.amazon.com/message.jspa?messageID=213586)，其中有人在亚马逊论坛上提出了类似的问题。

# javascript - 带有工具提示的 Javascript 事件侦听器

> ID：14596785
> 
> 赞同：0
> 
> 时间：2013-01-30T04:37:27.370
> 
> 标签：javascript

是否可以使用 javascript 事件侦听器为作为侦听器目标的按钮初始化工具提示？我在网上搜索并找到了许多使工具提示起作用的方法，但想使用事件侦听器。我将使用 onmoveover 作为目标的事件类型。这真的可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:06:54.047

是的，有可能。

谷歌应该给你很多例子，这里有一个......

[http://sixrevisions.com/tutorials/javascript_tutorial/create_lightweight_javascript_tooltip/](http://sixrevisions.com/tutorials/javascript_tutorial/create_lightweight_javascript_tooltip/)

# rest - 将 RPC 样式的 Web 服务操作转换为 REST 服务

> ID：14596786
> 
> 赞同：4
> 
> 时间：2013-01-30T04:37:29.947
> 
> 标签：rest, asp.net-web-api

我正在使用 ASP.NET Web API 将基于 SOAP 的 RPC 样式“Web 服务”转换为基于 JSON 的 REST Web 服务。AddXYZ / UpdateXYZ / RemoveXYZ 等方法干净地映射到 POST/PUT/DELETE 的 HTTP 动词。是否有任何最佳实践/指导将典型的 RPC 样式操作（例如“ExecuteXYZ”或“AssignXYZ”样式方法）映射到它的 REST 对应项？我的看法是，此类操作将映射到相应的 URL 可寻址资源，例如“ExecuteXYZRequest”和“AssignXYZRequest”

```
http://myhost/myservice/ExecuteXYZRequest
http://myhost/myservice/AssignXYZRequest 
```

然后，执行“ExecuteXYZ”的请求将转换为 POST 操作。

获取提交的请求将转换为 GET（通常用于获取提交的请求的状态）。

```
http://myhost/myservice/ExecuteXYZRequest/1   <--- 1 is the ID of the request 
```

取消请求（假设它是可取消的）将转换为 DELETE

POST 不会真正映射到任何东西。

以上听起来像是一个合理的 REST 实现，还是我完全不在乎我的想法？非常感谢思想/指导。

**更新** 这是我试图建模的具体示例：联系人和事件实体之间的多对多关系。将联系人的成员资格建模为 REST 资源的最佳方法是什么，以便可以从事件中添加/删除联系人。在 RPC 领域，这将是诸如“AssignContactToEvent”之类的方法，它获取两个实体的 ID 并建立这两者之间的关系。如何在 REST 中自然地将其建模为资源。我记得有一个链接和“rel”的概念，但找不到一个具体的实际示例来说明如何使用 Web API 对这样的东西进行建模

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:19:11.033

> 问题是 RPC 方法映射到 REST 资源是否有意义，如帖子中所示

简而言之; 不，以您描述的方式将方法映射到资源是没有意义的:)

为了成功地“做 REST”，我们必须换个思路，摒弃 RPC 和 CRUD 操作的所有想法；一旦你接受了 RESTful，这些真的是相当有限的！

> REST 中信息的关键抽象是资源。任何可以命名的信息都可以是资源：文档或图像、时间服务（例如“洛杉矶今天的天气”）、其他资源的集合、非虚拟对象（例如人）等等. 换句话说，任何可能成为作者超文本参考目标的概念都必须符合资源的定义。资源是到一组实体的概念映射，而不是在任何特定时间点对应于映射的实体。 [http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)

方法或动作/动词不是资源，因此它在 URI 中没有位置——当然，除非您正在构建一个允许人们创建自己的方法的应用程序，这将是相当不寻常的！

**以联系人和事件关系的具体示例为例**，重要的是要了解您的“AssignContactToEvent”是在 Web-API 层下发生的操作，不能以 RESTful 方式建模；我希望这将在以下示例的过程中变得清楚:)

首先，我们需要一些好的资源来对所有联系人列表和所有事件列表进行建模：

```
/contacts

/events 
```

这些资源对由 ID 令牌标识的单个联系人或事件建模：

```
/contacts/{contact_id}

/events/{event_id} 
```

您的应用程序的用户想知道谁参与了特定事件，因此我们需要一个资源来模拟事件参与者的列表：

```
/events/{event_id}/participants 
```

当我们想将联系人添加到事件时，我们可以将最小的联系人表示（仅包含联系人 ID）发布到事件的参与者列表：

```
POST /events/{event_id}/participants/ HTTP/1.1
Content-Type: application/json

{'id': {contact_id}} 
```

要从事件中删除联系人：

```
DELETE /events/{event_id}/participants/{contact_id} HTTP/1.1 
```

您的应用程序用户还希望一目了然地看到联系人参与的事件，因此您需要另一个资源来对此进行建模：

```
/contacts/{contact_id}/events 
```

同样，您现在可以获取联系人的事件列表，并使用 POST 分配事件：

```
POST /contacts/{contact_id}/events/ HTTP/1.1
Content-Type: application/json

{'id': {event_id}} 
```

重要的一点是，每当您需要对新事物进行建模时，您就创建了一个资源。如何存储数据对象的属性和关系的细节在 Web-API 后面被抽象出来。事实上，数据存储技术将来可能会发生变化，比如从关系存储到对象存储，或者您更改编程语言或框架，但在所有情况下，您的 URI（和 Web-API）都保持不变。REST 和 HTTP 旨在超越底层运行的技术。

作为创建新资源的最后一个示例，考虑一个对具有组织者角色的联系人列表建模的资源：

```
/events/{event_id}/organisers 
```

或者这个模拟联系人正在组织的事件列表的模型：

```
/contacts/{contact_id}/events-organised 
```

如果您有身份验证系统，那么您可能希望查看*您*正在参加的活动：

```
/my-account/events 
```

我希望这有助于阐明 Web-API 的目的并遵循 ​​RESTful 原则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:06:49.387

到目前为止，我看到了**两种**方法。

**一种**是如果动作很少，则将动作映射到动词，这样就不会发生冲突。因此，如果动作不安全也不幂等`POST`，则如果不安全但幂等，则`PUT`：

```
POST http://myhost/myservice/XYZ 
```

**另**一种是将动作定义为逻辑资源：

```
POST http://myhost/myservice/XYZ/Assignment 
```

后来更富有，我赞成这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T05:05:36.187

几个重点

*   RPC 端点 -> REST 入口点

*   RPC 读取方法 -> 资源上的 REST GET

*   RPC 创建方法 -> REST POST 操作

*   PRC 删除方法 -> REST DELETE 操作

*   RPC SOAP 消息 -> REST PayLoad

additonaly，想想缓存头，像@Consumes，@Produces这样的Content-Type头

# scheme - 有没有办法检查符号数据类型？

> ID：14596789
> 
> 赞同：0
> 
> 时间：2013-01-30T04:37:49.643
> 
> 标签：scheme

在方案中，有没有办法检查数据类型是否是符号？

就像是

```
(define symbol-test
  (lambda (s)
    (if (symbol? s)
        #t
        #f))) 
```

所以如果你给喜欢`(symbol-test 'x)`应该是`#t`。（即使`x`未定义）而且 this `(symbol-test 3)`or `(symbol-test '(1 2 3))`should be `#f`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:44:11.603

你实际上就在那里。`symbol?`是 R5RS 中的标准函数。

引用标准

> 程序：符号？obj 如果 obj 是符号，则返回 #t，否则返回 #f。

```
(symbol? 'foo)                         ==>  #t
(symbol? (car '(a b)))                 ==>  #t
(symbol? "bar")                        ==>  #f
(symbol? 'nil)                         ==>  #t
(symbol? '())                          ==>  #f
(symbol? #f)                           ==>  #f 
```

在相关说明中，我会使用

```
(define symbol-test symbol?) 
```

而不是您当前的实现，它更干净，更容易理解。

# cruisecontrol.net - 为什么执行任务失败时 CruiseControl.net 构建仍然成功？

> ID：14596790
> 
> 赞同：0
> 
> 时间：2013-01-30T04:37:55.387
> 
> 标签：cruisecontrol.net

在 xmllogger 之后，我在发布者中有这个任务：

```
 <exec>
    <executable>CheckForWarnings.cmd</executable>
    <successExitCodes>0</successExitCodes>
    <baseDirectory>C:\Program Files (x86)\CruiseControl.NET\server</baseDirectory>
    <buildArgs>all</buildArgs>
  </exec> 
```

我已验证此任务通过 ccnet 服务日志返回非 0 退出代码：

2013-01-29 23:21:20,571 [Encompass.2013R1:INFO] 集成完成：失败 - 2013 年 1 月 29 日晚上 11:21:20

那么为什么构建仍然是绿色的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:31:37.667

放在该`publisher`部分中的任务不会更改构建结果，**因为它们是报告**（发布者）而不是构建（任务）的一部分。

> 发布者部分在构建完成后运行（无论它通过还是失败）。这是您汇总和发布构建结果的地方。

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/Tasks_and_Publishers](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Tasks_and_Publishers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:18:08.987

如果您希望构建失败，您必须将 exec 任务放在任务部分，而不是发布部分。

# python - 不确定字典为什么会发生变异

> ID：14596792
> 
> 赞同：1
> 
> 时间：2013-01-30T04:37:58.103
> 
> 标签：python, dictionary, mutated

通过 MIT Open Courseware 自学 Python，遇到了下面这段代码的问题。当我单独或在另一个函数中运行此函数时，它会改变最初传递的值“hand”，我不知道为什么。我将两个局部变量（hand0 和 tester）设置为 hand，第一个用于保留初始值，第二个用于迭代。但是，这三个都发生了变化，而我只希望“测试人员”这样做。除了改变“手”之外，该功能按预期工作。

（传递给函数的值在设置参数中有所不同：word_list 是有效英语单词的列表，word 是我在此函数中替换以进行测试的字符串，hand 是字母字典及其相关计数。调试代码已注释掉.)

```
def is_valid_word(word, hand, word_list):
    """
    Returns True if word is in the word_list and is entirely
    composed of letters in the hand. Otherwise, returns False.
    Does not mutate hand or word_list.

    word: string
    hand: dictionary (string -> int)
    word_list: list of lowercase strings
    """
    hand0 = hand
    tester = hand
    #display_hand(hand)
    #display_hand(tester)
    word = raw_input('test word: ')
    length = len(word)
    disc = True
    for c in range(length):
        if word[c] in tester.keys() and tester[word[c]]>0:
            #print tester[word[c]]
            #display_hand(hand)
            #display_hand(tester)
            tester[word[c]]=tester[word[c]]-1            
        else:
            #print 'nope'
            disc = False
    if word not in word_list:
        disc = False
    #print disc
    #display_hand(hand)
    #display_hand(tester)
    #display_hand(hand0)
    return disc 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T04:41:42.290

当您这样做时`tester = hand`，您只是在创建对该`hand`对象的新引用。换句话说，`tester`和`hand`是*同一个对象*。如果你检查了他们的，你会看到这个`id`：

```
print id(tester)
print id(hand)  #should be the same as `id(tester)` 
```

或者等效地，与`is`运算符进行比较：

```
print tester is hand  #should return `True` 
```

要制作字典的副本，有一种`.copy`方法可用：

```
tester = hand.copy() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T04:41:58.640

当你这样做时`tester = hand`，你不是在制作 的副本`hand`，而是在对同一个对象进行新的引用。您所做的任何修改都`tester`将反映在`hand`.

用于`tester = hand.copy()`解决此问题： http: [//docs.python.org/2/library/stdtypes.html#dict.copy](http://docs.python.org/2/library/stdtypes.html#dict.copy)

# c - 在 C 中用逗号打印浮点数

> ID：14596796
> 
> 赞同：0
> 
> 时间：2013-01-30T04:38:11.080
> 
> 标签：c, floating-point, floating-point-conversion

> **可能重复：**
> [将 1000000 输出为 1,000,000 等等](https://stackoverflow.com/questions/6800192/output-1000000-as-1-000-000-and-so-on)

我有一个格式为 xxxxxxxx.xx 的浮点变量（例如 11526.99）。我想用逗号将其打印为 11,562.99。如何在 C 中插入逗号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:41:02.680

尝试：

```
#include <locale.h>
#include <stdio.h>

int main()
{
    float f = 12345.67;

    // obtain the existing locale name for numbers    
    char *oldLocale = setlocale(LC_NUMERIC, NULL);

    // inherit locale from environment
    setlocale(LC_NUMERIC, "");

    // print number
    printf("%'.2f\n", f);

    // set the locale back
    setlocale(LC_NUMERIC, oldLocale);
} 
```

这取决于当前的语言环境。C 和 POSIX 语言环境没有千位分隔符。您可以自己将其设置为您知道使用千位分隔符的语言环境，而不是从环境中继承语言环境。在我的系统上， using`"en_NZ"`提供了千位分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:07:30.393

下面的*addcommas*函数是一个版本*locale* -less，它允许负浮点数（虽然不适用于指数`3.14E10`）

```
#include <stdio.h>
#include <string.h>

#define DOT     '.'
#define COMMA   ','
#define MAX     50

static char commas[MAX]; // Where the result is

char *addcommas(float f) {
  char tmp[MAX];            // temp area
  sprintf(tmp, "%f", f);    // refine %f if you need
  char *dot = strchr(tmp, DOT); // do we have a DOT?
  char *src,*dst; // source, dest

  if (dot) {            // Yes
    dst = commas+MAX-strlen(dot)-1; // set dest to allow the fractional part to fit
    strcpy(dst, dot);               // copy that part
    *dot = 0;       // 'cut' that frac part in tmp
    src = --dot;    // point to last non frac char in tmp
    dst--;          // point to previous 'free' char in dest
  }
  else {                // No
    src = tmp+strlen(tmp)-1;    // src is last char of our float string
    dst = commas+MAX-1;         // dst is last char of commas
  }

  int len = strlen(tmp);        // len is the mantissa size
  int cnt = 0;                  // char counter

  do {
    if ( *src<='9' && *src>='0' ) {  // add comma is we added 3 digits already
      if (cnt && !(cnt % 3)) *dst-- = COMMA;
      cnt++; // mantissa digit count increment
    }
    *dst-- = *src--;
  } while (--len);

  return dst+1; // return pointer to result
} 
```

例如，如何调用它（*主要*示例）

```
int main () {

   printf ("%s\n", addcommas(0.31415));
   printf ("%s\n", addcommas(3.1415));
   printf ("%s\n", addcommas(31.415));
   printf ("%s\n", addcommas(314.15));
   printf ("%s\n", addcommas(3141.5));
   printf ("%s\n", addcommas(31415));
   printf ("%s\n", addcommas(-0.31415));
   printf ("%s\n", addcommas(-3.1415));
   printf ("%s\n", addcommas(-31.415));
   printf ("%s\n", addcommas(-314.15));
   printf ("%s\n", addcommas(-3141.5));
   printf ("%s\n", addcommas(-31415));
   printf ("%s\n", addcommas(0));

  return 0;
} 
```

编译指令示例

```
gcc -Wall comma.c -o comma 
```

正在做

```
./comma 
```

应该输出

```
0.314150
3.141500
31.415001
314.149994
3,141.500000
31,415.000000
-0.314150
-3.141500
-31.415001
-314.149994
-3,141.500000
-31,415.000000
0.000000 
```

*   设置`DOT`为什么是点
*   设置`COMMA`为应该是逗号的内容
*   `MAX`设置为 50 假定转换为字符串的浮点数不会超过 49 个字符（不确定增加`MAX`）
*   *从作为参数给定的浮点数*返回指向*逗号*添加字符串的指针，指向静态区域的指针，因此 **   *addcommas*不是[*可重入*](http://en.wikipedia.org/wiki/Reentrancy_(computing))的，并且返回的指针所指向的值（通常）在每次调用后都会发生变化，例如。
    *   *在第二次调用addcommas*后， in `char *a = addcommas(3.1415) ; char *b = addcommas(2.7182) ;` *a*不能再安全使用*

# ruby - 输入需要更多输入/不立即执行的代码后如何在 IRB 中转义/退出

> ID：14596800
> 
> 赞同：5
> 
> 时间：2013-01-30T04:38:18.343
> 
> 标签：ruby, irb

特定的代码行没有输出，IRB 退出`>>`提示。我不打算退出 IRB，而只是退出到导致`>>`提示消失的代码行之前的状态。

```
>> stop_words = %w {the a and if}
>> stop_words.each{|x| stop_words << x.capitalize}
quit
quit
quit 
```

1.  一旦进入这种情况，我什至无法退出 IRB shell，因为“退出”命令不会执行任何更改。
2.  我想退出该状态并保持我之前的变量定义完好无损，以便在代码示例中，我可以调用它`stop_words`来进行试验。任何对这里发生的事情的解释/洞察力都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:53:04.357

您的代码无限循环，因此您不会收到新的提示，因为它仍在处理您之前的命令。

您可以`Ctrl``C`立即中止当前正在运行的命令。

# python - 在 Python 中从 Dropbox 下载文件时权限被拒绝错误

> ID：14596801
> 
> 赞同：1
> 
> 时间：2013-01-30T04:38:26.237
> 
> 标签：python, dropbox, dropbox-api

通过一个文件夹的元数据，我可以获取要下载到本地机器的文件的相对文件路径。当我给出这个源代码的路径时`do_get()`，它给了我权限被拒绝的错误。这是应该下载文件并解密它们但它不能直接下载文件的代码。

```
 @command
  def do_decryptFiles(self, from_path, to_path, key):
    """
    Decrypt all the files given in the folder and subfolders of from_path 

    Examples:
    Dropbox> decryptFiles '/Photos' 'E:\temp' 'a13223132323232' 
    """

    folder_metadata = self.api_client.metadata(from_path)
    print "metadata:", folder_metadata
    for s in folder_metadata['contents']:
        if(s['is_dir'] == True):
            print "directory:", s['path']
        else:
            FFPath = s['path'] 
            print FFPath
            do_get(self, from_path, to_path)
            to_file = open(os.path.abspath(to_path), "wb")
            f, metadata = self.api_client.get_file_and_metadata(self.current_path + FFPath)
            to_file.write(f.read()) 
```

当它调用时`open()`，命令行给我 Permission Denied 错误。任何帮助，将不胜感激。

```
Traceback (most recent call last):
  File "example/cli_client.py", line 397, in <module>
    main()
  File "example/cli_client.py", line 394, in main
    term.cmdloop()
  File "C:\Python27\lib\cmd.py", line 142, in cmdloop
    stop = self.onecmd(line)
  File "C:\Python27\lib\cmd.py", line 219, in onecmd
    return func(arg)
  File "example/cli_client.py", line 77, in wrapper
    return f(self, *args)
  File "example/cli_client.py", line 315, in do_decryptFiles
    to_file = open(os.path.abspath(to_path), "wb")
IOError: [Errno 13] Permission denied: 'E:\\proto' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:23:15.547

听起来是本地目录权限问题？[我最近遇到了类似的问题，如果这里](https://stackoverflow.com/questions/15461404/permission-denied-to-other-app-after-makedirs/15461928#15461928)有一些可能的解决方案。

在我看来，这不是 Dropbox API 问题，而是本地 IO 错误。

# plugins - 什么工具可以用来为书签需求创建插件/插件

> ID：14596803
> 
> 赞同：0
> 
> 时间：2013-01-30T04:38:31.927
> 
> 标签：plugins, add-on, firebreath

我必须为我的官方社区网站创建插件或附加组件。要求

1.  浏览器上应该有一个按钮，它应该扩展一个表单，它可以将当前 url 添加为书签，与用户进行交互并进行更多输入，然后将其记录到本地驱动器中的 excel 表中。我有 VBA 代码从社区 url 中提取数据到 excel 表。现在，我必须创建浏览器控件以启用用户直接 url 来获取数据。

2.  应该根据 url 激活我的控件（即工具栏按钮），那么我应该创建什么，插件或附加组件？我希望我的控件不会影响浏览器性能或用户体验。

3.  根据对 2 的回复，我应该使用什么工具来创建应该跨浏览器兼容的插件/附加组件？

4.  我已经完成了 Fire-breath 演示，Visual Studio 的代码功能，这很好，但仍然缺少一些关于 Visual Studio 的知识，Visual Studio 安装包的内容以及使用的语言，如果它会更好视觉基础 ?

5.  最后，是否可以在网页内放置控件（即按钮）以激活我的代码，如果可以，哪一个能够做到这一点，插件或插件？简而言之，实现这一目标的工作流程......

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:26:15.827

首先，要了解几点：

1.  浏览器插件是通过以下两种方式之一实例化的：

    1.  在对象或嵌入标签中注入 DOM
    2.  由浏览器实例化以打开具有特定 mimetype 的页面
2.  浏览器插件对浏览器、URL 栏、书签、上下文菜单、浏览器对话框、浏览器镶边、浏览器事件等一无所知。浏览器插件只知道当前页面的任何信息。浏览器插件无法更改浏览器设置

3.  浏览器插件是 DLL；它们不容易用 Visual Basic 编写。虽然这可能是可能的，但我从未见过，而且你必须先了解*很多*关于 NPAPI 插件的知识，然后才能做到这一点。您可能还必须为 IE 编写一个，为 IE 编写一个，等等。

换句话说，您需要的不是插件。Firebreath 不会对你有太大帮助，如果有的话。一些扩展（也称为附加组件）使用 npapi 插件来提供他们无法自行完成的功能。有关详细信息，请参阅[http://npapi.com/extensions](http://npapi.com/extensions)

有了这些信息，我建议您考虑一下，并针对您接下来需要了解的内容创建一个新的、更具体的问题。我不知道扩展，我做插件。实际上，一旦您将您需要做的事情分解成一些较小的问题，您可能会发现其他人问的最多，您可以通过简单的搜索找到答案。您的主要问题是您还不了解需要使用的技术。希望这有所帮助。

# c++ - c++0x线程初始化

> ID：14596809
> 
> 赞同：0
> 
> 时间：2013-01-30T04:40:13.827
> 
> 标签：c++, multithreading, c++11

> **可能重复：**
> [使用成员函数启动线程](https://stackoverflow.com/questions/10673585/start-thread-with-member-function)

在 c++0x 中使用类方法定义线程构造函数时，如下所示，我得到的函数无法解析。我究竟做错了什么？

例如，如果我有

```
#include <thread>
 using namespace std;
class A
{
 public:
    void doSomething();
    A();
} 
```

然后在A类的构造函数中，我想用doSomething启动一个线程。如果我像下面这样写，我会收到 doSomething 未解决的错误。我什至这个->doSomething。

```
 A::A()
 {
     thread t(doSomething);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:42:08.933

试试这个：

```
class A
{
 public:
   void doSomething();

   A()
   {
      thread t(&A::doSomething, this);
    }
}; 
```

或者

```
class A
{
 public:
   static void doSomething();

   A()
   {
      thread t(&A::doSomething);
    }
}; 
```

注意：您需要在某处加入您的线程，例如：

```
class A
{
public:
   void doSomething()
   {
      std::cout << "output from doSomething" << std::endl;
   }

   A(): t(&A::doSomething, this)
   {
   }
   ~A()
   {
     if(t.joinable())
     {
        t.join();
     }
   }

private:
  std::thread t;  
};

int main() 
{
    A a;        
    return 0;
} 
```

# android - Android ICS WebView 中的奇怪缩放行为

> ID：14596810
> 
> 赞同：1
> 
> 时间：2013-01-30T04:40:18.690
> 
> 标签：android, webview, android-4.0-ice-cream-sandwich

我有一个应用程序在 WebView 中显示来自资源资产的 html 页面。选择 WebView 是为了允许页面上的导航链接，并且所有导航操作都在 WebView 客户端类中处理，方法是中断新页面请求并返回所需的本地资产。包含 WebView 的 Activity 支持纵向和横向，WebView 在“onCreate”中配置（“setInitialScale”和“WebSettings”）。页面显示为适合宽度并且可垂直滚动。在 ICS 更新之前，这一直运行良好。

在 ICS 下，选择的初始页面仍然像以前一样显示，但显示的更多页面链接比屏幕宽度更宽（并且包括一个水平滚动条）。如果在加载初始页面时设备处于纵向或横向，则会发生这种情况。将设备旋转到横向并返回纵向可以解决问题（导致重新加载 Activity，就好像显示的页面是第一个页面一样），但是在纵向导航回到以前的页面会导致它们再次具有超过设备显示，即使返回到正确显示的主页。

这主要是一个烦恼 - 但不一致的行为令人担忧。不幸的是，还有一些与此代码相关的其他“调整”（主要是重新调整 html 中的图像大小以适应屏幕并在方向更改时保留 WebView 滚动位置）。虽然这些可能是当前问题的根源，但其结果的快速日志输出显示它们正在按预期工作，这表明 ICS WebView 行为发生了变化。

我已经搜索了该问题的任何类似帖子，但没有找到任何直接参考，所以我的问题真的很开放。有没有其他人在 ICS WebView 类中看到过类似的东西，还是我应该寻找改变行为的另一个来源？

**更新：**

在连续删除一行代码几个小时后（grrrr），我发现了问题。

在 android api 14 或更高版本下运行时，当视口固定在设备宽度时（使用元标记 name="viewport" content= html css 中的“width=device-width”）。初始页面加载似乎尊重设备宽度，但随后的页面加载可能会或可能不会以比请求更宽的视口呈现，几乎是随机的。

这可能是预期的行为，尽管不可预测性表明它不是（如果是，那么它是对先前版本行为的修复）。

使用的代码设置比例以允许用户在首选项中调整文本显示大小，页面图像的大小在页面加载之前被“固定”为代码中的值。这已被将页面比例保持在 100% 并使用“WebSettings.setDefaultFontSize”从用户的首选项中设置文本大小来取代，这消除了呈现问题。

# facebook - 流式传输的 FQL 查询仍然返回不可靠的结果？

> ID：14596816
> 
> 赞同：0
> 
> 时间：2013-01-30T04:40:57.843
> 
> 标签：facebook, stream, facebook-fql

我正在尝试使用 FQL 来查询流表并检索新闻提要项目。像这样：

```
SELECT post_id, actor_id, target_id, message, created_time 
FROM stream 
WHERE filter_key in 
    (SELECT filter_key 
     FROM stream_filter 
     WHERE uid=me() 
     AND type='newsfeed'
     ) 
AND is_hidden = 0 
```

按照[这里](http://developers.facebook.com/blog/post/478/)的建议，我一直在尝试使用纪元时间戳（created_time）来限制返回的项目数量并对所有内容进行分页（看起来像一个杂物，但是好的，如果这是我们能做的最好的）。但是，只要我将截止时间指定为早于一天左右（尚未确定确切的模式），它就会返回 null。没有错误消息...只是“数据”：[]。

我知道过去对流表进行分页存在很多问题，但这似乎是一个老错误（如果它仍然是一个错误而不是我的疏忽）。有没有人想出如何处理这个问题？如果我在查询之外留下对 filter_key 的任何引用，我可以获得更好的结果，但我需要使用它，所以这并不是真正的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:04:58.733

我有一个非常相似的问题，我通过删除

filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed' )

从我的查询。我所做的最初是进行查询以获取过滤器键，并保存 filter_key 字符串，然后在所有后续查询中使用。这对我有用

# php - 仅打印复选框选定的数据

> ID：14596820
> 
> 赞同：0
> 
> 时间：2013-01-30T04:41:17.890
> 
> 标签：php, javascript

嗨，我有结果，它包含一个复选框`<input type='checkbox' name="ChkS[]" value='<? echo $rs->id?>'>`

我在页脚中有一个打印输出列表选项`<input type="button" value="Show Printable List" class="butten" onClick="openPrint()">`

它在新的弹出窗口中打开可打印列表。

```
function openPrint() {
    window.open("<?= $_SERVER["PHP_SELF"]; ?>?<?=$qstring?>&print=true","","width=1024,height=600,menubar=yes,resizable=yes, scrollbars=yes");
} 
```

我需要使用上面的选择复选框，它应该在弹出窗口中显示选定的打印列表？

我希望理解它应该不是问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:44:07.017

目前您已经定义了按钮 onclick 事件，而不是在复选框上设置了这个 onclick 事件。

```
<input type='checkbox' name="ChkS[]" value='<? echo $rs->id?>' onClick="openPrint();"> 
```

希望这将帮助您解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:46:02.470

Javascript修改：

```
var s = "";
function changeval(value) {
    s = value;
}
function openPrint() {
    alert(s);
    window.open("<?= $_SERVER["PHP_SELF"]; ?>?<?=$qstring?>&print=true","","width=1024,height=600,menubar=yes,resizable=yes, scrollbars=yes");
} 
```

HTML修改：

```
<input type='checkbox' name="ChkS[]" value='<? echo $rs->id?>' onchange="changeval(this.value)" /> 
```

我做了什么？

1.  创建了一个全局变量`s`。

2.  在复选框上附加或绑定`onchange`事件并根据其设置变量的值`s`。

3.  现在，你有了`s`带值的变量，你只需要在任何函数中使用它。

# android - Android：顶部位置的选定项目的微调器下拉列表

> ID：14596822
> 
> 赞同：7
> 
> 时间：2013-01-30T04:41:24.723
> 
> 标签：android, spinner

我对 Android 中的 Spinner 有疑问。从下拉列表中选择一个项目将在下次打开该下拉列表时调整它的偏移量。例如，如果我在 500 项下拉列表中选择第 100 项，下次我打开下拉列表时，第 100 项将位于列表顶部。这是我想要的行为。

当我将选择器功能与调用`setSelection(int)`. 通过以下步骤，我似乎打破了下拉微调器上的偏移系统。

*   打开 Spinner 并选择第二个项目。
*   再次打开 Spinner，这次关闭它而不选择任何内容。
*   `setSelection(int)`使用大于 2 的值调用Spinner。
*   第三次打开微调器。请注意，偏移量与步骤 1 中的相同。

我查看了 Spinner 和 AdapterView 中的代码，但看不到任何我错过的公共调用。这是 Spinner 中的错误还是我的代码中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:11:24.640

你试过了`public void setSelection (int position, boolean animate)`吗？我没有尝试过，但我认为`true`作为第二个参数传递应该会使列表滚动到所选位置。另一种选择是计算滚动偏移量（项目高度 x 选定项目位置）并调用`setDropDownVerticalOffset`.

**更新：**我尝试修改 API 演示中的 Spinner 示例以使用`setSelection(7, true)`，并且在遵循您在问题中提供的 4 个步骤时它似乎可以工作。我只是添加了一个Handler并修改`showToast`如下：

```
private final Handler handler = new Handler();

void showToast(CharSequence msg) {
    Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    handler.postDelayed(new Runnable(){
        public void run() {
            Toast.makeText(Spinner1.this, "auto setting", Toast.LENGTH_SHORT).show();
            Spinner s2 = (Spinner) findViewById(R.id.spinner2);
            s2.setSelection(7, true);
        }
    }, 5000);
} 
```

我测试如下：

1.  打开第二个微调器并选择“维纳斯”（第二个选择）。
2.  打开第二个微调器，然后按返回关闭
3.  5 秒后，postDelayed 调用导致选择“Neptune”（第七个选择）
4.  打开微调器，偏移量正确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:08:37.727

我认为您可以通过将列表发送到适配器来解决该问题。选择项目后，对列表进行排序，然后使用适配器的 notifyDataSetChanged() 函数。当您再次调用 setSelection(int) 函数时，对 List 进行排序并使用 notifyDataSetChanged() 函数。

# jasper-reports - 我在哪里可以找到 Jasper 报告代码中的 HTML 模板来修改它？

> ID：14596826
> 
> 赞同：1
> 
> 时间：2013-01-30T04:41:52.150
> 
> 标签：jasper-reports

当我将 Jasper 报告导出为*html*格式时，我想要动态*html页面。*要应用*Js*框架使其动态化，我想获取生成的*html*。但问题是生成的*html*不完整，无法直接应用框架（如Jquery）。

 ***我猜后面必须有一个*html*模板，在 Jasper 报告中填写数据。我在哪里可以在 Jasper 报告代码中找到该*html模板？*

我可以修改*html*模板吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:06:31.803

没有 html 模板，只有 HTML 的导出器配置（请参阅[此处](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/export/JRHtmlExporter.html)）。为了丰富导出器的功能，我建议通过扩展现有的`JRHtmlExporter`. 为此，您需要注册一个扩展点并实现自定义 HTML 导出器。***

# php - move_uploaded_file() 无法打开流：没有这样的文件或目录

> ID：14596832
> 
> 赞同：16
> 
> 时间：2013-01-30T04:42:22.493
> 
> 标签：php, file-upload

我已经完成了您的标准检查（那里的目录是否设置了足够宽松的权限），并且我很确定我已经涵盖了您的标准愚蠢的人类技巧。这是失败的代码：

```
move_uploaded_file($_FILES['image1']['tmp_name'], "/public_html/flashsale/assets/img/products/T".$_FILES['image1']['name']); 
```

*目录在那里 - 我从FileZilla*复制了路径。我什至在 FileZilla 和*HostGator*控制面板的文件管理器中都将权限设置为**777 。**此代码生成两个警告：

 *> 消息：move_uploaded_file(/public_html/flashsale/assets/img/products/Tsirloin.jpg) [function.move-uploaded-file]：无法打开流：没有这样的文件或目录
> 
> 消息：move_uploaded_file() [function.move-uploaded-file]：无法将“/tmp/phpI5GZ3S”移动到“/public_html/flashsale/assets/img/products/Tsirloin.jpg”

以该顺序。那么，文件正在上传，目录存在并设置为 777，我还能缺少什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T04:45:32.820

您不需要将完整目录放入文件中。尝试`/public_html/flashsale/`从您的链接中删除，看看是否可行。另外，文件不需要777权限，我自己上传文件到755权限的文件夹。

此外，您可以`getcwd();`在您的目标目录中使用。该功能将为您提供移动文件所需的目录。[来源](http://php.net/manual/en/function.move-uploaded-file.php)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-22T09:52:29.040

**问题**

```
$dirpath = dirname(getcwd()) 
```

这是我最初用来获取 /public_html/upload 文件夹的目录路径的方法。$dirpath 将包含

```
/public_html/upload 
```

**解决方案（在服务器上）**

```
$dirpath = realpath(dirname(getcwd())) 
```

由于我在共享主机环境中，让 move_uploaded_file 工作的正确方法是使用它作为目标： realpath(dirname(getcwd())) 返回类似：

```
/home/cpanelusername/public_html/upload 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T04:58:46.250

确保您正在穿越的路径。public_html 不是必需的

```
$image=basename($_FILES['file']['name']);
$image=str_replace(' ','|',$image);

$tmppath="images/".$image;

        if(move_uploaded_file($_FILES['file']['tmp_name'],$tmppath))
        {
         echo "success";
        }
        else
        {
         echo "fail";
        } 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-27T15:19:19.667

对于带有 XAMPP 的 Ubuntu 14.04，我也遇到了上传问题，但是在我用 修复后`sudo chmod -R 777 destination`，它运行良好。

这是我所做的：

在我的 Ubuntu 14.04 XAMPP 中上传的临时文件夹是 /opt/lampp/temp/。如果我希望我的上传文件`/opt/lampp/temp/testupload`作为目标文件夹，那么我需要下面的配置。

1.  转到临时文件夹

    ```
    cd /opt/lampp/temp/ 
    ```

2.  在 /opt/lampp/temp/ 下创建“testupload”文件夹

    ```
    sudo mkdir testupload 
    ```

3.  更改权限 777

    ```
    sudo chmod -R 777 /opt/lampp/temp/testupload/ 
    ```

4.  PHP 代码

    ```
    move_uploaded_file($_FILES["file"]["tmp_name"], "/opt/lampp/temp/testupload/" . $_FILES["file"]["name"]) 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-28T14:54:32.233

适用于 Windows 和 ISS 的解决方案：

IUSR 帐户需要目标目录中的权限。不是 ISS_IUSR 帐户，只是 IUSR 帐户。*

# php - 如何回显动态复选框？

> ID：14596835
> 
> 赞同：0
> 
> 时间：2013-01-30T04:42:42.820
> 
> 标签：php

我在显示我的复选框时遇到问题。有人可以帮忙吗？我在线搜索解决方案并尝试了代码，但它不起作用。

这是我的代码

```
<?php
include "mysqli.connect.php";
// Make a MySQL Connection
$retrieveflavor = "SELECT * FROM flavor"; 
$result = $mysqli->query($retrieveflavor);  
while ($row = $result->fetch_array(MYSQLI_ASSOC))
{
    //echo "<input type='checkbox' name='candyFlavors[]' value=".$row['flavorname']."/>";
    //echo "<input type=\"checkbox\" name=\"candyFlavors[]\" value=\"$row[flavorname]\">";
    //echo "<input name=\"candyFlavors[]\" type='checkbox' value='"$row[flavorname]"'/>";
    echo "<td><img src=".$row['image']." width='240px' height='190px'></td>";
    echo "<input type=\"checkbox\" name=\"candyFlavors[]\" value=\"$row[flavorname]\">";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:48:52.913

我认为应该是这样的。

```
echo "<input type=\"checkbox\" name=\"candyFlavors[]\" value=\"".$row['flavorname']."\">"; 
```

你错过了单引号`$row[flavorname]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:58:46.267

```
 echo '<input type="checkbox" name="candyFlavors[]" value="'.$row['flavorname'].'">'; 
```

试试这个

# javascript - 如何从开始暂停 Sencha Animator 的动画？

> ID：14596837
> 
> 赞同：0
> 
> 时间：2013-01-30T04:42:49.123
> 
> 标签：javascript, extjs, sencha-touch

我用 Sencha Animator 做一个简单的动画。我想从一开始就暂停动画。有一个按钮，当你按住按钮时，它只会播放动画。

我怎样才能在 Sencha Animator 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:49:18.213

你可以试试这个

监听`onTouchStart`事件以添加动画并显示面板并`onTouchEnd`隐藏动画面板

# vb.net - Websocket 新帧字节

> ID：14596841
> 
> 赞同：0
> 
> 时间：2013-01-30T04:43:18.267
> 
> 标签：vb.net, visual-studio-2012, websocket

我目前正在编写一个 Visual Basic 脚本，该脚本在本地机器 ip (127.0.0.1) 和端口 8181 上打开一个 TcpListener。我从 Google Chrome 连接到我的 websocket 服务器（通过 AcceptSocket 方法）。我从 Chrome 向服务器发送请求，服务器可以读取它和所有内容。当我发回消息（如回显）时，我可以第一次发送它，但第二次我收到错误：

`Received unexpected continuation frame.`

我需要的是一个 CByte，它告诉框架开始一个新的或结束打开的（不关闭套接字连接）

这是可以实现的，如果可以，解决方案是什么？

我用`SendMessage(sck, "test")`

这是我的消息发件人的代码：

```
Sub SendMessage(sck As Socket, message As String)
    Dim rawData = System.Text.Encoding.UTF8.GetBytes(message)
    Dim frameCount = 0
    Dim frame(10) As Byte
    frame(0) = CByte(129)

    If rawData.Length <= 125 Then
        frame(1) = CByte(rawData.Length)
        frameCount = 2
    ElseIf rawData.Length >= 126 AndAlso rawData.Length <= 65535 Then
        frame(1) = CByte(126)
        Dim len = CByte(rawData.Length)
        frame(2) = CByte(((len >> 8) & CByte(255)))
        frame(3) = CByte((len & CByte(255)))
        frameCount = 4
    Else
        frame(1) = CByte(127)
        Dim len = CByte(rawData.Length)
        frame(2) = CByte(((len >> 56) & CByte(255)))
        frame(3) = CByte(((len >> 48) & CByte(255)))
        frame(4) = CByte(((len >> 40) & CByte(255)))
        frame(5) = CByte(((len >> 32) & CByte(255)))
        frame(6) = CByte(((len >> 24) & CByte(255)))
        frame(7) = CByte(((len >> 16) & CByte(255)))
        frame(8) = CByte(((len >> 8) & CByte(255)))
        frame(9) = CByte((len & CByte(255)))
        frameCount = 10
    End If
    Dim bLength = frameCount + rawData.Length
    Console.WriteLine(frameCount)
    Console.WriteLine(rawData.Length)
    Dim reply(bLength + 1) As Byte

    Dim bLim = 0
    For i = 0 To frameCount - 1
        Console.WriteLine(bLim)
        reply(bLim) = frame(i)
        bLim += 1
    Next

    For i = 0 To rawData.Length - 1
        Console.WriteLine(bLim)
        reply(bLim) = rawData(i)
        bLim += 1
    Next
    For i = 0 To reply.Length - 1
        Console.WriteLine("Byte: " & reply(i))
        Console.WriteLine("Char: " & CByte(reply(i)))
    Next
    sck.Send(reply, reply.Length, 0)
End Sub 
```

更新：

将行更改为后`Dim reply(bLength + 1) As Byte`，`Dim reply(bLength) As Byte`我没有收到连续帧错误，而是收到了一个新错误：

`A server must not mask any frames that it sends to the client.`

希望这些信息可以指出问题所在。

更新 2：

下面是整个客户端 Sub 与客户端一起做所有事情。从接受到握手再到消息。

```
Private Sub clientStarter(ByVal sck As Socket)
    Dim netStream As New NetworkStream(sck)
    Dim netReader As New IO.StreamReader(netStream)
    Dim netWriter As New IO.StreamWriter(netStream)

    Dim key As String = ""

    Console.WriteLine("Accept new connection ...")

    '' Reading handshake message
    While (True)
        Dim line As String = netReader.ReadLine()
        If line.Length = 0 Then
            Exit While
        End If

        If (line.StartsWith("Sec-WebSocket-Key: ")) Then
            key = line.Split(":")(1).Trim()
        End If

        Console.WriteLine("Data: " & line)
    End While

    '' Calculate accept-key
    key += "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"
    key = getSHA1Hash(key)

    '' Response handshake message
    Dim response As String
    response = "HTTP/1.1 101 Switching Protocols" & vbCrLf
    response &= "Upgrade: websocket" & vbCrLf
    response &= "Connection: Upgrade" & vbCrLf
    response &= "Sec-WebSocket-Accept: " & key & vbCrLf & vbCrLf
    netWriter.Write(response)
    netWriter.Flush()
    Dim dataSent As [Byte]() = Nothing
    Dim dataRecieved(1024) As [Byte]
    Dim bytes As Int32
    Console.WriteLine(dataRecieved)
    Dim message As String = Nothing
    While (True)
        If (sck.Connected = False) Then
            Exit While
        End If
        bytes = sck.Receive(dataRecieved, dataRecieved.Length, 0)
        'Console.WriteLine(bytes)
        While (bytes > 0)
            Console.WriteLine("recieved Data")
            message = System.Text.Encoding.UTF8.GetString(dataRecieved, 0, bytes)
            Console.WriteLine(bytes)
            bytes = 0
            If (bytes = 0) Then
                Console.WriteLine("test")
                Console.WriteLine(message)

                dataSent = System.Text.Encoding.UTF8.GetBytes(message, 0, bytes)
                SendMessage(sck, "test")
                message = Nothing
            End If
        End While
    End While
End Sub 
```

更新 3（解决方案）：

我已经弄清楚了我的问题。通过更改它`frame(1) = CByte(rawData.Length)`来`frame(1) = CByte(rawData.Length + 1)`合并结束 0 字节，现在消息的正确长度是正确的，并且消除了我的屏蔽问题。我猜消息字节的结尾应该包含在消息长度中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:58:24.523

看起来您在消息末尾包含了一个额外的字节。不应该线

```
Dim reply(bLength + 1) As Byte 
```

改为

```
Dim reply(bLength) As Byte 
```

反而？您在消息中只需要操作码 + 长度 ( `frameCount`) + 消息 ( `rawData.Length`)。websocket 客户端会将这些字节作为完整的有效消息读取。然后它将从您的消息中读取剩余的字节作为新消息的开始，从而有效地破坏您实际发送的下一条消息。

# javascript - 实例内部原型

> ID：14596843
> 
> 赞同：0
> 
> 时间：2013-01-30T04:43:27.340
> 
> 标签：javascript, jquery

正如有人所说，实例内部原型是到构造函数原型的链接，因此按照这个

```
 function foo(){}
 x=new foo()
 foo.prototype={};
 x instanceof foo//false (if instance internal prototype is a link to constructor prototype than it should have been replaced with replacing prototype) but
 x.constructor==foo//true why according to the above definition if internal prototype is a link to constructor prototype it should have been updated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:07:02.690

在 javascript 中，您没有真正的课程。您创建对象，然后添加它的方法和属性。所以 foo 的所有实例都将具有应用于 foo 的方法/属性，无论何时添加它们都无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:11:17.533

当您使用`new`关键字制作对象时，原型不会被*复制*，而是被*链接*到。在 chrome、firefox 和 safari（但这是非标准的）中，可以通过`__proto__`属性访问该链接，因此：

```
var x = new T();
console.log(x.__proto__ === T); // => true 
```

内部所做的是，当一个属性被访问并且在对象中找不到它时，javascript引擎在原型对象中查找它，原型对象本身可能有一个原型对象。

# php - 在 joomla 中为粘性 div 添加 jquery 时发生冲突

> ID：14596847
> 
> 赞同：1
> 
> 时间：2013-01-30T04:44:04.843
> 
> 标签：php, javascript, jquery

我需要一个在向下滚动页面时粘在顶部的标题。我正在使用以下 jquery 函数

```
<script type="text/javascript">
google.load("jquery", "1");

function sticky_relocate() {
  var window_top = $(window).scrollTop();
  var div_top = $('#sticky-anchor').offset().top;
  if (window_top > div_top)
    $('#sticky').addClass('stick')
  else
    $('#sticky').removeClass('stick');
  }
// If you have jQuery directly, use the following line, instead
// $(function() {
// If you have jQuery via Google AJAX Libraries
google.setOnLoadCallback(function() {
  $(window).scroll(sticky_relocate);
  sticky_relocate();
  });
</script> 
```

但是页面中已经存在的滑块无法正常工作！请帮我解决这个问题。我`$.noConflict();`在功能上方添加了滑块正常工作并且粘性 div 不起作用！

并对代码进行了以下更改 // 开始关闭以防止命名空间冲突

```
;(function($) {

// Whatever code you want that relies on $ as the jQuery object

// End closure
})(jQuery); 
```

滑块和粘性 div 都不起作用！

# c# - NAudio 在 x86 代码上崩溃

> ID：14596854
> 
> 赞同：0
> 
> 时间：2013-01-30T04:44:19.403
> 
> 标签：c#, x86, naudio

就像在主题中一样，一切正常`AnyCPU`，但是当我更改为`x86`-> 应用程序崩溃时。我在 Win 7 x64 下工作。

编辑：

```
(Exception from HRESULT: 0x80070057 (E_INVALIDARG))"} 
```

堆：

```
 at System.StubHelpers.InterfaceMarshaler.ConvertToManaged(IntPtr pUnk, IntPtr itfMT, IntPtr classMT, Int32 flags)  
   at NAudio.Wave.DirectSoundOut.IDirectSound.CreateSoundBuffer(BufferDescription desc, Object& dsDSoundBuffer, IntPtr pUnkOuter)  
   at NAudio.Wave.DirectSoundOut.InitializeDirectSound()  
   at NAudio.Wave.DirectSoundOut.PlaybackThreadFunc()  
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)  
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)  
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)  
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:20:49.480

奇怪的是，唯一需要注意的输入参数是缓冲区描述（ 的一个实例`DSBUFFERDESC`），但我看不到任何与 NAudio 互操作相关的 x64/x86 问题。您的设备可能不支持某些辅助缓冲区标志：

```
bufferDesc2.dwFlags = DirectSoundBufferCaps.DSBCAPS_GETCURRENTPOSITION2
    | DirectSoundBufferCaps.DSBCAPS_CTRLPOSITIONNOTIFY
    | DirectSoundBufferCaps.DSBCAPS_GLOBALFOCUS
    | DirectSoundBufferCaps.DSBCAPS_CTRLVOLUME
    | DirectSoundBufferCaps.DSBCAPS_STICKYFOCUS; 
```

关于堆栈跟踪的另一个奇怪的事情是错误在`ConvertToManaged`，这表明它是声音缓冲区到托管对象的转换出错了，但我想不出为什么会发生这种情况，因为我们没有`IDirectSoundBuffer`在调用完成之前不要尝试强制转换`CreateSoundBuffer`。

为什么您的应用程序不能使用 WaveOut 或 WaveOutEvent 的任何原因？您可能会发现它们更可靠。

# java - 使用 FileWriter 时出现 FileNotFoundException

> ID：14596861
> 
> 赞同：0
> 
> 时间：2013-01-30T04:45:14.027
> 
> 标签：java

我正在尝试将一些消息写入文本文件。文本文件位于服务器路径中。我能够从该文件中读取内容。但我无法将内容写入该文件。我收到 FileNotFoundException: \wastServer\apps\LogPath\message.txt（拒绝访问）。

注意：文件具有读写权限。

但是我在哪里做错了。请在下面找到我的代码。

代码：

```
 String FilePath = "\\\\wastServer\\apps\\LogPath\\message.txt";

    try {
        File fo = new File(FilePath);
        FileWriter fw=new FileWriter(fo); 
        BufferedWriter bw=new BufferedWriter(fw); 
        bw.write("Hello World"); 
        bw.flush(); 
        bw.close(); 
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:58:05.627

请检查您是否可以访问`apps`和`LogPath`目录。

在运行时键入这些（Windows 键 + R）

```
\\\\wastServer\\apps\\

\\\\wastServer\\apps\\LogPath\\ 
```

并查看您是否可以从正在执行上述代码的机器和用户访问这些目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:33:48.387

您没有对共享、目录之一或文件本身的写入权限。可能该文件已经打开。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T05:19:50.967

在这条线之后

```
 File fo = new File(FilePath); 
```

尝试打印绝对路径

```
System.out.println( fo.getAbsolutePath() ); 
```

然后检查文件是否存在于该位置，而不是直接检查

```
\\\\wastServer\\apps\\LogPath\\message.txt 
```

因此，您将知道编译器在哪里搜索文件。

# c# - 通过查询字符串传递数组

> ID：14596862
> 
> 赞同：7
> 
> 时间：2013-01-30T04:45:18.890
> 
> 标签：c#, asp.net

我通过 传递一个 javascript 数组`Request.QueryString["cityID"].ToString()`，但它向我显示“无效参数”的错误：

```
blObj.addOfficeOnlyDiffrent(Request.QueryString["cityID"].ToString(),
                            Request.QueryString["selectTxtOfficeAr"].ToString()); 
```

方法声明如下所示：

```
public string addOfficeOnlyDiffrent(string[] cityID, string selectTxtOfficeAr) { } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T04:47:00.420

您的方法`addOfficeOnlyDiffrent`需要一个字符串数组参数，`cityID`而您将单个`string`类型对象传递给调用中的方法。我相信你`cityID`是一个单一的字符串，所以你可以从方法声明中删除数组。在您的方法调用中。

```
Request.QueryString["cityID"].ToString() 
```

以上表示单个字符串，而不是字符串数组。

如果您的查询字符串包含一个字符串数组，那么值可能是字符串表示形式，由某个字符分隔，例如`,`. 要将字符串传递给方法，您可以调用`string.Split`拆分字符串以获取数组。

编辑：根据您的评论，您的查询字符串包含：

```
Request.QueryString["cityID"].ToString() (123456,654311,987654) 
```

您可以执行以下操作。

```
string str = Request.QueryString["cityID"].ToString();
string[] array = str.Trim('(',')').Split(',');
blObj.addOfficeOnlyDiffrent(array,
                            Request.QueryString["selectTxtOfficeAr"].ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:53:48.693

如果您的查询字符串参数值如下所示：“123456,654311,987654”

```
string[] ids = Request.QueryString["cityID"]
    .Split( new[] {","}, StringSplitOptions.RemoveEmptyEntries ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:59:09.573

试试这个很**简单**。

```
 string city = Request.QueryString["cityID"];

 string[] cityID =city.Split(new char[] {','},StringSplitOptions.RemoveEmptyEntries); 
```

**你在city**中得到这样的字符串 "123456,654311,987654" 。您在 cityID 中获得数组。

# css - 在 IE7 / IE8 中定位 :nth-child(2)

> ID：14596872
> 
> 赞同：0
> 
> 时间：2013-01-30T04:45:46.827
> 
> 标签：css, internet-explorer-8, css-selectors

我对以下代码中 nth-child(2) 的实现有疑问。该代码在 Chrome/Firefox 中运行良好，第一个子矩阵转换在 IE 中运行良好。但是，我遇到了第二个子选择器的问题。虽然我知道 IE8 及以下不支持 nth child，但我尝试使用 selectizr 和 jQuery 来启用，但是我相信它在我的情况下可能不起作用（因为这些是服务器端 jsp 文件并且目标 div 是计算的通过Javascript动态）。

我正在寻找解决方法……我只需要第二个孩子。

我进行了搜索，发现了这篇文章：[IE8 :nth-child 和 :before](https://stackoverflow.com/questions/8492121/ie8-nth-child-and-before)

有没有办法在我的情况下应用第一个孩子+ li a 的这种方法？

如果没有，是否有人对针对此 div 的方法有任何建议？如果有帮助，这将用于定位从 InfoVis 工具包修改的 StackedArea 图表上方的浮动聚合。

谢谢

```
.fte-chart-container .node > div > :first-child {
font-family: Arial;
color: black;
font-size: 11px;
width: 35px !important;
transform:rotate(-80deg);
-ms-transform:rotate(-80deg); /* IE 9 */
-moz-transform:rotate(-80deg); /* Firefox */
-webkit-transform:rotate(-80deg); /* Safari and Chrome */
-o-transform:rotate(-80deg); /* Opera */
-ms-filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.17364817766693044,
    M12=0.984807753012208, M21=-0.984807753012208, M22=0.17364817766693044, 
    SizingMethod='auto expand'); /* For IE8 */
filter: progid:DXImageTransform.Microsoft.Matrix(
        M11=0.17364817766693044,
        M12=0.984807753012208,
        M21=-0.984807753012208,
        M22=0.17364817766693044,
        SizingMethod='auto expand'); /* IE 6 and 7 */

}

.fte-chart-container .node > div > :nth-child(2) {
font-family: Arial;
color: black;
font-size: 10px;
transform:rotate(-60deg);
-ms-transform:rotate(-60deg); /* IE 9 */
-moz-transform:rotate(-60deg); /* Firefox */
-webkit-transform:rotate(-60deg); /* Safari and Chrome */
-o-transform:rotate(-60deg); /* Opera */
-ms-filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.4999999999999997, 
M12=0.8660254037844388, M21=-0.8660254037844388, M22=0.4999999999999997,   
SizingMethod='auto expand'); /* For IE8 */
filter: progid:DXImageTransform.Microsoft.Matrix(
        M11=0.4999999999999997,
        M12=0.8660254037844388,
        M21=-0.8660254037844388,
        M22=0.4999999999999997,
        SizingMethod='auto expand'); /* IE 6 and 7 */

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:35:56.403

如果您不知道第二个孩子到底是什么，您可以在 CSS 中替换`:nth-child(2)`为：`:first-child + *`

```
.fte-chart-container .node > div > :first-child + * 
```

但是`*`在较旧的浏览器中，在复杂选择器的末尾可能会表现不佳，因此您应该尝试识别要选择的元素并用该元素`*`的任何类型/类/等替换。

# django - 使用通用 GenericForeignKey

> ID：14596873
> 
> 赞同：0
> 
> 时间：2013-01-30T04:45:53.523
> 
> 标签：django, django-models

我想在我当前的设置中添加一个新模型，看起来像这样

```
class Cinerama(models.Model):
    memeber = models.ManyToManyField(Person)
    #somethins 
```

但问题是我没有人模型我有一个像这样的男孩和女孩模型

```
class Girls(models.Model):
    #somethins only girls do
    #many other fk
    teacher = models.ForeignKey(Teacher)

class Boys(models.Model):
    #somethins only boys do
    #many other fk
    teacher = models.ForeignKey(Teacher) 
```

所以我不想改变设置，所以我想给女孩和男孩添加标签，然后制作一个新的人物模型，这样系统就会像这样

```
class Person(models.Model):
    slug = models.SlugField()

class Cinerama(models.Model):
    members = models.ManyToManyField(Person)
    #somethins

class Girls(models.Model):
    #somethins
    teacher = models.ForeignKey(Teacher)
    tag= models.ForeignKey(Person)

class Boys(models.Model):
    #somethins
    teacher = models.CharField()
    tag= models.ForeignKey(Person) 
```

这将是采用或使用 generic.GenericForeignKey 的最佳选择吗？您将如何检索由 pk=1 的老师带到 Cinerama 的所有学生，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:04:47.690

这里需要一个通用的外键。他们是其他替代方案，例如创建一个人物模型并从中扩展您的男孩和女孩模型。可以将通用关系创建为：

```
class Cinerama(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')
    # other fields here 
```

还要在你的女孩和男孩模型中添加一个反向关系，这样你就可以做到`Girls.cinerama.all()`：

```
class Girls(models.Model):
    cinerama = generic.GenericRelation(Cinerama)
    # other fields here 
```

# android - 将 OPENCV 加载到 Android 应用程序中

> ID：14596875
> 
> 赞同：0
> 
> 时间：2013-01-30T04:46:14.153
> 
> 标签：android, opencv

我正在创建一个 android 应用程序，并且正在使用 OPENCV 进行人脸检测。我已经使用 eclipse 创建了一个新的 android 项目，现在我必须将 OPENCV 人脸检测（eclipse 中的一个单独项目）添加到新创建的项目中。我必须从新的 android 项目的 Activity 类中调用 OPENCV 的 onCreate 方法。我已经用谷歌搜索了，我不清楚这样做。此外，要运行 OPENCV 代码，我们需要在设备/模拟器中安装 OPENCV 管理器。

其他方法是将库包含在新创建的 android 项目中，这将增加应用程序的大小。哪种方法更好用？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:01:58.613

为什么不将人脸检测项目的必要部分复制到自己的新项目中。这样，您将能够实现保持面部检测完好无损的任何附加功能。是的，如果您想异步加载 OpenCV 库，则需要在设备上安装 OpenCV 管理器。如果您不喜欢这种方式，那么您将不得不将该库静态添加到您的项目中，这将增加最终 apk 的大小。这实际上取决于您认为最有可能的情况。我个人更喜欢异步加载它，因为它是更快更简单的方式。

# iphone - 如何在标签中获取地图注释标题样式/字体

> ID：14596876
> 
> 赞同：1
> 
> 时间：2013-01-30T04:46:15.470
> 
> 标签：iphone, ios, xcode, map

谁能告诉我如何在 UIlabel 中获取地图注释标题的字体/样式![在此处输入图像描述](../Images/cc5e25a2a97d91588c6a524fa8d6ef69.png)

我想要标签中的确切样式/字体..

```
 UILabel *name = [[UILabel alloc]init];
        name.text = @"Hello Annotation";
        name.textColor = [UIColor whiteColor];
       [name setFont: [UIFont fontWithName:@"Helvetica" size:20.0]]; 
```

我还需要包括什么才能获得注释标题的确切样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:54:43.600

尝试

```
 [name setFont: [UIFont boldSystemFontOfSize:20.0]]; 
```

也玩阴影设置。

```
[name setShadowColor:[UIColor blackColor]];
[name setShadowOffset:CGSizeMake(0, -1)]; 
```

# ios - 配置文件中未启用通行证

> ID：14596880
> 
> 赞同：6
> 
> 时间：2013-01-30T04:46:28.447
> 
> 标签：ios, xcode, provisioning-profile, app-id, entitlements

这是我的步骤。

我使用 pass.com.domain.AppName 样式创建了一个 passtype ID。

我为 com.domain.AppName 创建了一个 App ID。

我在 App ID 中启用了 Passes。

我使用之前创建的应用程序 ID 创建了一个新的配置文件。

我在 Xcode 中打开了我的项目，将代码签名身份设置为我刚刚创建的配置文件。

我启用了权利，并在通行证下，告诉它使用我的配置文件中的权利。

它说通行证未启用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:25:13.187

您是否在第一步之后在配置门户中配置了通行证？您需要创建通行证，仅创建通行证类型 ID 是不够的。也不要忘记在请求和生成证书后下载证书。

# mono - Apache Mono - 503 错误

> ID：14596883
> 
> 赞同：0
> 
> 时间：2013-01-30T04:46:35.130
> 
> 标签：mono, mod-mono

当我访问我的网站时，我看到 Mono 图标，但尝试访问任何页面都会出现 503 错误 - “服务暂时不可用”

这是我的 httpd.conf 末尾附近（隐藏 IP 地址）：

* * *

```
Include /etc/httpd/conf/mod_mono.conf
<VirtualHost *.80>
DocumentRoot /var/www/html
ServerName 74.63.???.?
</VirtualHost> 
```

* * *

这是我的 mod_mono.conf

* * *

```
<IfModule !mod_mono.c>
LoadModule mono_module /usr/lib/httpd/modules/mod_mono.so.0.0.0
</IfModule>

<IfModule mod_headers.c>
Header set X-Powered-By "Mono"
</IfModule>

<IfModule mono_module>

AddType application/x-asp-net .aspx
....
DirectoryIndex index.aspx

MonoAutoApplication enabled
MonoDebug false
MonoServerPath "/usr/local/lib/mono/gac/mod-mono-server4/2.10.2.0__032efab45532/mod-mono-server4
Alias /test "/opt/monoserv"
MonoApplications "/test:/opt/monoserv"
SetHandler mono

</IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:21:49.380

感谢顺蒂的帮助。我查看了日志，它说“在多次尝试生成进程后无法连接到 mod-mono-server。”

我将 MonoServerPath 更改为指向 shunty 注释中的示例，并将在该文件中找到的路径更改为正确的路径。

然后我按照这里的说明操作：[http ://www.vbforums.com/showthread.php?524548-RESOLVED-mod_mono-with-apache](http://www.vbforums.com/showthread.php?524548-RESOLVED-mod_mono-with-apache)

我仍然有问题，但至少它们不再与服务器配置相关。谢谢！

# python - 删除 () 和 [] 之间的文本

> ID：14596884
> 
> 赞同：65
> 
> 时间：2013-01-30T04:46:35.637
> 
> 标签：python, python-2.7

我有一个很长的文本字符串，其中包含`()`和`[]`。我试图删除括号和方括号之间的字符，但我不知道如何。

该列表与此类似：

```
x = "This is a sentence. (once a day) [twice a day]" 
```

这个列表不是我正在使用的，但非常相似并且要短得多。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-01-30T08:10:16.577

您可以使用 re.sub 功能。

```
>>> import re 
>>> x = "This is a sentence. (once a day) [twice a day]"
>>> re.sub("([\(\[]).*?([\)\]])", "\g<1>\g<2>", x)
'This is a sentence. () []' 
```

如果要删除 [] 和 ()，可以使用以下代码：

```
>>> import re 
>>> x = "This is a sentence. (once a day) [twice a day]"
>>> re.sub("[\(\[].*?[\)\]]", "", x)
'This is a sentence.  ' 
```

重要提示：此代码不适用于嵌套符号

### 解释

第一个正则表达式分组`(`或`[`进入第 1 组（用括号括起来）和`)`或`]`进入第 2 组，匹配这些组和它们之间的所有字符。匹配后，匹配的部分被第 1 组和第 2 组替换，最后的字符串在括号内没有任何内容。第二个正则表达式是自解释的 -> 匹配所有内容并替换为空字符串。

*--根据[Ajay Thomas的](https://stackoverflow.com/users/5459912/ajay-thomas)[评论修改](https://stackoverflow.com/questions/14596884/remove-text-between-and#comment86784588_14599280)*

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-30T06:42:22.973

运行此脚本，它甚至可以使用嵌套括号。
使用基本的逻辑测试。

```
def a(test_str):
    ret = ''
    skip1c = 0
    skip2c = 0
    for i in test_str:
        if i == '[':
            skip1c += 1
        elif i == '(':
            skip2c += 1
        elif i == ']' and skip1c > 0:
            skip1c -= 1
        elif i == ')'and skip2c > 0:
            skip2c -= 1
        elif skip1c == 0 and skip2c == 0:
            ret += i
    return ret

x = "ewq[a [(b] ([c))]] This is a sentence. (once a day) [twice a day]"
x = a(x)
print x
print repr(x) 
```

以防万一你不运行它，
这是输出：

```
>>> 
ewq This is a sentence.  
'ewq This is a sentence.  ' 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-30T12:01:19.787

这是一个类似于[@pradyunsg 的答案](https://stackoverflow.com/a/14598135/4279)的解决方案（它适用于任意嵌套括号）：

```
def remove_text_inside_brackets(text, brackets="()[]"):
    count = [0] * (len(brackets) // 2) # count open/close brackets
    saved_chars = []
    for character in text:
        for i, b in enumerate(brackets):
            if character == b: # found bracket
                kind, is_close = divmod(i, 2)
                count[kind] += (-1)**is_close # `+1`: open, `-1`: close
                if count[kind] < 0: # unbalanced bracket
                    count[kind] = 0  # keep it
                else:  # found bracket to remove
                    break
        else: # character is not a [balanced] bracket
            if not any(count): # outside brackets
                saved_chars.append(character)
    return ''.join(saved_chars)

print(repr(remove_text_inside_brackets(
    "This is a sentence. (once a day) [twice a day]")))
# -> 'This is a sentence.  ' 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-01-30T05:14:26.267

这应该适用于括号。正则表达式将“消耗”它匹配的文本，因此它不适用于嵌套括号。

```
import re
regex = re.compile(".*?\((.*?)\)")
result = re.findall(regex, mystring) 
```

或者这会找到一组括号，只需循环查找更多：

```
start = mystring.find("(")
end = mystring.find(")")
if start != -1 and end != -1:
  result = mystring[start+1:end] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-01T08:40:26.043

您可以再次拆分、过滤和加入字符串。如果您的括号定义明确，则应该执行以下代码。

```
import re
x = "".join(re.split("\(|\)|\[|\]", x)[::2]) 
```

# codelite - Codelite 中的调试 (Ubuntu 12.04)

> ID：14596891
> 
> 赞同：2
> 
> 时间：2013-01-30T04:47:13.487
> 
> 标签：codelite

我在 Ubuntu 12.04 中安装了 codelite (v4.1.5770)。

当程序出现错误时，我发现它无法正确构建。它在构建过程中报告它们，但最终在构建完成时输出没有错误的消息。

我在Windows中没有遇到过这种情况。我更改了建筑设置，但它没有用。

那么谁能告诉我该怎么做呢？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:53:43.560

codelite 使用正则表达式来解析编译器产生的输出。编译器生成的错误格式很可能（并且可能是这种情况）根本无法被 codelite 识别。

如果您可以发布一些您收到的错误消息，而这些错误消息未被 codelite 检测为错误/警告，我可以帮助您编译正确的正则表达式并指导您将它们放在 codelite 中的哪个位置

伊兰

# php - .htaccess 带分页的 mod-rewrite 规则

> ID：14596893
> 
> 赞同：0
> 
> 时间：2013-01-30T04:47:40.907
> 
> 标签：php, .htaccess, mod-rewrite

我正在尝试编写一个 mod-rewrite 规则来处理我网站上的分页链接。

现在，没有分页，我正在使用这个：

```
RewriteRule ^category/(.*)/?$ /category.php?cat_slug=$1 [L,QSA] 
```

我是 .htaccess 和 mod-rewrite 的初学者，我不确定如何在末尾添加另一个 get 变量以进行分页。

我希望我的 url 结构是这样的： [http ://www.mysite.com/category/example/2](http://www.mysite.com/category/example/2)

我尝试了以下方法：

```
RewriteRule ^category/(.*)/?$ /category.php?cat_slug=$1&page=$2 [L,QSA] 
```

任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:54:40.347

像这样的东西可能是你需要的

```
RewriteRule ^category/([a-zA-Z_-]+)/([0-9]?) /category.php?cat_slug=$1&page=$2 [L,QSA] 
```

# mod-rewrite - 针对类别和子类别的 url 重写建议

> ID：14596899
> 
> 赞同：0
> 
> 时间：2013-01-30T04:47:55.920
> 
> 标签：mod-rewrite, url-rewriting

目前我的网站有大约 40 个主要类别和大约 250 个子类别和大约 10K 产品。

我现在的网址是这样的......

```
site.com/1/electroncis (main category)
site.com/2/Headphones ( electronics > headphones) 
```

----现在有很多父类和子类

我想做的是跟随...

```
site.com/electroncis (main category)
site.com/electroncis/headphones (main > sub) 
```

我`ID`在 url 中有 '，所以在我的代码中我可以获取并返回那些匹配的产品，我的表使用（而不是类别名称）`categoryID`执行查找。`CategoryID`完成我想要的...我需要在我的`web.config`文件中创建超过 500 条静态规则吗？必须有更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:52:33.747

我真的不认为它可能。我想出的最接近的解决方案是使用键/值对创建 rewriteMaps

```
<add key="cars" value="page.asp?v=1" />
<add key="car/suvs" value="page.asp?v=2" /> 
```

我可以使用 .NET 生成上述标签并将它们粘贴到 .config 文件中。

# javascript - 添加字符串和数字时，JavaScript如何转换为字符串？

> ID：14596900
> 
> 赞同：2
> 
> 时间：2013-01-30T04:47:58.207
> 
> 标签：javascript, types, type-conversion

为什么此代码评估为：

```
10 + "10" => "1010"
"10" + 10 => "1010" 
```

为什么它*不能*这样工作：

```
10 + "10" => 20 // the number comes first
"10" + 10 => "1010" // the string comes first 
```

编辑：

更具体地说，在解释器的实现中，它在哪里执行此操作？或者，它是如何做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:55:27.787

`+`是一个连接运算符，也是 Javascript 中的算术运算符。如果它发现在字符串和数字之间使用了该运算符，那么它将该数字连接到字符串中，否则如果您将运算符用于两个整数，那么结果也将是整数。

所以，

字符串 + 字符串 = 字符串

字符串 + 整数 = 字符串

整数 + 字符串 = 字符串

整数 + 整数 = 整数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T05:02:02.217

[ECMAScript 262 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)编纂了 JavaScript 语言（JavaScript 实际上是 ECMAScript 的 Mozilla 实现）。无论如何，在我通常参考的[Annotated ES5中，事情相对容易找到。](http://es5.github.com)

请参阅[11.6.1 加法运算符 (+)](http://es5.github.com/#x11.6.1)：

> 加法运算符执行字符串连接或数字加法。
> 
> 产生式 AdditiveExpression : AdditiveExpression + MultiplicativeExpression 的评估如下：
> 
> 1.  令 lref 为 AdditiveExpression 求值的结果。
> 2.  令 lval 为 GetValue(lref)。
> 3.  令 rref 为评估 MultiplicativeExpression 的结果。
> 4.  设 rval 为 GetValue(rref)。
> 5.  令 lprim 为 ToPrimitive(lval)。
> 6.  令 rprim 为 ToPrimitive(rval)。
> 7.  *如果 Type(lprim) 是 String 或 Type(rprim) 是 String，则返回作为连接 ToString(lprim) 后跟 ToString(rprim) 的结果的 String*
> 8.  返回对 ToNumber(lprim) 和 ToNumber(rprim) 应用加法运算的结果。请参见 11.6.3 下方的注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T05:45:07.000

在比较具有不同类型的值时，JavaScript 使用一组复杂且令人困惑的规则。通常，它只是尝试将其中一个值转换为另一个值的类型（正如我们在您的问题中看到的那样）。这通常被称为自动类型转换。

让我们看一下您的代码：

```
 10 + "10" => "1010"
"10" + 10 => "1010" 
```

在 JavaScript 中，如果将任何非字符串值添加到字符串中，则该值会在连接之前自动转换为字符串。因此，无论您的整数或字符串值的顺序如何，JavaScript 都将任何整数视为字符串。

但是，您应该知道，JavaScript 并不将此应用于所有算术运算符。例如，如果我们将我们的值相乘，我们会得到：

```
 10 * "10" => 100
 "10" * 10 => 100
 "ten" * 10 => NaN 
```

现在，为什么 Javascript 会这样做？好吧，你可以说这是为了方便。在很多情况下，您可能需要将两个值连接成一个字符串。相反，您永远不能将整数与字符串相乘，正如我们在上面的最后一个示例中所见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T04:56:54.410

不幸的是，这就是 Javascript 的工作方式

# ruby-on-rails - Rails 嵌套表单编辑

> ID：14596902
> 
> 赞同：0
> 
> 时间：2013-01-30T04:48:06.220
> 
> 标签：ruby-on-rails, ruby, nested-attributes

我试图弄清楚整个嵌套表单的事情，并且在渲染表单进行编辑时遇到问题。

我不会以“典型方式”来执行新的和创建操作，因为我实际上不会保存任何东西。我只是用这个表格来生成一些测试。

这是我所拥有的..

模型.rb

```
class Model < ActiveRecord::Base
  has_many :columns
  has_many :associations
  accepts_nested_attributes_for :associations, :reject_if => lambda { |a| a[:type].blank? }
  accepts_nested_attributes_for :columns, :reject_if => lambda { |a| a[:name].blank? }
  attr_accessible :name, :associations_attributes, :columns_attributes
end 
```

列.rb

```
class Column < ActiveRecord::Base
  belongs_to :model
  attr_accessible :db_index, :mass_assign, :max_length, :min_length, :name, :required,     :unique, :columns_attributes

  validates :name, :presence => true

end 
```

生成器控制器.rb

```
 def model
    if params['submit']
      @model = Model.new(params[:model])
      @model.columns.build

    else
      @model = Model.new
      3.times { @model.columns.build }
    end

    render 'generator/model'
  end 
```

表单视图

```
<%= nested_form_for(@model, :url => '/model', :html => {:style => 'width:100%;'}) do |f| %>
          <%= flash_helper() %>
          <h3>Model Name</h3>
          <%= f.text_field :name %>

          <h3>Add Table Columns</h3>

          <div id="columns">
            <% f.fields_for :columns do |builder| %>
                <div class="float_left column">
                  <%= builder.label :name %>
                  <br>
                  <%= builder.text_field :name, :size => 20 %>
            </div>
            <div class="float_left column">
              <%= builder.label :mass_assign %>
              <br>
              <%= builder.check_box :mass_assign %>
            </div>
            <div class="float_left column">
              <%= builder.label :required %>
              <br>
              <%= builder.check_box :required %>
            </div>
            <div class="float_left column">
              <%= builder.label :unique %>
              <br>
              <%= builder.check_box :unique %>
            </div>

            <div class="float_left column">
              <%= builder.label :db_index %>
              <br>
              <%= builder.check_box :db_index %>
            </div>
            <div class="float_left column">
              <br>
              <%= image_tag "delete-icon24x24.png", :class => "btnDel clickable" %>
            </div>
            <br class="clear_float">
        <% end %>
        <%= f.link_to_add image_tag('add-icon.png'), :columns %>

      </div>

      <br><br>
      <input type="submit" name="submit">

      <p>
        <%= @results %>
      </p>

  <% end %> 
```

所以问题是，新建时的表单没有显示“3.times {@model.columns.build}”应该做的列。另外，当我提交表单时，我需要弄清楚为什么它会删除所有添加的嵌套属性。因此，每次我提交表单并再次呈现表单时，所有属性都消失了。（“模型”属性仍然存在，但“列”属性每次都会重置）

关于我做错了什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:50:49.020

我什至不好意思承认这一点，但希望它可以帮助其他人做一件事来检查他们是否有同样的问题。

```
<% f.fields_for :columns do |builder| %> 
```

变成：

```
<%= f.fields_for :columns do |builder| %> 
```

是啊..不敢相信我做到了...

# android - 获取 GridView 中的 ImageName

> ID：14596905
> 
> 赞同：0
> 
> 时间：2013-01-30T04:48:24.163
> 
> 标签：android, android-layout, gridview

我有 GridView，它正在从 sdcard 获取图像并将其显示在 gridview 中。但是当我单击某些图像时，我想要它。它应该显示在下一个带有其名称的大尺寸活动中。只有当我获取图像时才有可能当我点击它时的名字......我该怎么做......这是我的代码，它只是显示来自 sd 卡的图像

```
package com.example.imagegallary;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.util.ArrayList;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class Album3 extends Activity implements OnClickListener {
      Bitmap bit;
      Button addpicc;
      String    picname ;
      String namee;

    public class ImageAdapter extends BaseAdapter {

     private Context mContext;

     ArrayList<String> itemList = new ArrayList<String>();

     public ImageAdapter(Context c) {
      mContext = c; 
     }

     void add(String path){
      itemList.add(path); 
     }

  @Override
  public int getCount() {
   return itemList.size();
  }

  @Override
  public Object getItem(int arg0) {
   // TODO Auto-generated method stub
   return null;
  }

  @Override
  public long getItemId(int position) {
   // TODO Auto-generated method stub
   return 0;
  }

  @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
   ImageView imageView;
         if (convertView == null) {  // if it's not recycled, initialize some attributes
             imageView = new ImageView(mContext);
             imageView.setLayoutParams(new GridView.LayoutParams(220, 220));
             imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
             imageView.setPadding(8, 8, 8, 8);
             imageView.setOnClickListener(new View.OnClickListener() {

                 @Override
                 public void onClick(View view) {
                   Toast.makeText(getApplicationContext(), ""+position,2).show();
                 }

               });
         } else {
             imageView = (ImageView) convertView;
         }

         Bitmap bm = decodeSampledBitmapFromUri(itemList.get(position), 220, 220);

         imageView.setImageBitmap(bm);
         return imageView;
  }

  public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth, int reqHeight) {

   Bitmap bm = null;
   // First decode with inJustDecodeBounds=true to check dimensions
   final BitmapFactory.Options options = new BitmapFactory.Options();
   options.inJustDecodeBounds = true;
   BitmapFactory.decodeFile(path, options);

   // Calculate inSampleSize
   options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

   // Decode bitmap with inSampleSize set
   options.inJustDecodeBounds = false;
   bm = BitmapFactory.decodeFile(path, options); 

   return bm;   
  }

  public int calculateInSampleSize(

   BitmapFactory.Options options, int reqWidth, int reqHeight) {
   // Raw height and width of image
   final int height = options.outHeight;
   final int width = options.outWidth;
   int inSampleSize = 1;

   if (height > reqHeight || width > reqWidth) {
    if (width > height) {
     inSampleSize = Math.round((float)height / (float)reqHeight);    
    } else {
     inSampleSize = Math.round((float)width / (float)reqWidth);    
    }   
   }

   return inSampleSize;    
  }

 }

    ImageAdapter myImageAdapter;

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.grid);

        GridView gridview = (GridView) findViewById(R.id.myGrid);
        myImageAdapter = new ImageAdapter(this);
        gridview.setAdapter(myImageAdapter);
        addpicc=(Button)findViewById(R.id.addpic);
        addpicc.setOnClickListener(this);

        String ExternalStorageDirectoryPath = Environment
          .getExternalStorageDirectory()
          .getAbsolutePath();
        Intent intent = getIntent();
        //Parcelable myParcelableObject = (Parcelable) i.getParcelableExtra("name_of_extra");

      namee = intent.getStringExtra("name");
        bit = (Bitmap) getIntent().getParcelableExtra("Image");
     picname = intent.getStringExtra("picname");

        Toast.makeText(getApplicationContext(), namee+"gallaryname", 2).show();
        Toast.makeText(getApplicationContext(), picname+"picname", 2).show();

        String targetPath = ExternalStorageDirectoryPath + "/Gallary/"+namee;

      //  Toast.makeText(getApplicationContext(), targetPath, Toast.LENGTH_LONG).show();
        File targetDirector = new File(targetPath);

        File[] files = targetDirector.listFiles();
        for (File file : files){
         myImageAdapter.add(file.getAbsolutePath());
         Toast.makeText(getApplicationContext(),file.getAbsolutePath() ,2).show();
        } 
    }

@Override
public void onClick(View v) {
    String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
    String gallaryname=extStorageDirectory+"/Gallary/"+namee;
     OutputStream outStream = null;

    File file = new File(gallaryname,picname);
    try {
     outStream = new FileOutputStream(file);
     bit.compress(Bitmap.CompressFormat.PNG, 100, outStream);
     outStream.flush();
     outStream.close();

     Toast.makeText(this, "Saved in SD card", Toast.LENGTH_LONG).show();
     Intent i=new Intent(Album3.this,MainApp.class);
     startActivity(i);

    } catch (FileNotFoundException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
     Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
public void onBackPressed(){
     Intent i=new Intent(Album3.this,addGallaray.class);
     startActivity(i);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:06:02.723

在调用下一个活动时，您必须在 putExtra 中传递 arraylist 位置的 gridview 的 OnItemClickListener，如下所示：

```
grid.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {
                Intent intent = new Intent(currentactivity.this, nextactivity.class);
                intent.putExtra("path", itemList.get(position));
                startActivity(intent);

            }
        }); 
```

发送图像的路径，而不是将位图发送到下一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:20:15.540

像这样试试

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);

    GridView gridview = (GridView) findViewById(R.id.myGrid);
    myImageAdapter = new ImageAdapter(this);
    gridview.setAdapter(myImageAdapter);

    gridview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int pos, long id) {
            Intent intent = new Intent(Album3 .this, NewActivity.class);
            intent.putExtra("Name", itemList.get(pos));
            startActivity(intent);
        }
    }); 
```

# android - 短信收件箱中对联系人表的错误引用

> ID：14596908
> 
> 赞同：5
> 
> 时间：2013-01-30T04:48:38.903
> 
> 标签：android, message, android-contacts

我正在尝试从手机的短信收件箱中查找与短信相对应的联系方式。据我了解，该`person`列`_id`是`ContactsContract.Contacts`.

我的问题是我`person`从短信查询中得到了错误的值。`person`联系人表中不存在某些id，而有些则指向完全不同的联系人。

下面是我用于获取`person`值列表的代码，谁能告诉我我是否遗漏了什么或遇到了类似的问题。

使用运行 Android 4.1.2 的 Nexus S 进行测试

```
Uri parsedUri = Uri.parse("content://sms/inbox");
    String[] projection = new String[] { "_id", "address", "person" };
    Cursor cursor = contentResolver.query(parsedUri, projection, null, null, null);

    Log.d(TAG, "Total Count " + cursor.getCount());

    if (cursor.getCount() > 0) {
        // String address;
        int person;
        int personIndex = cursor.getColumnIndex("person");
        if (cursor.moveToFirst())
            do {
                person = cursor.getInt(personIndex);
                if (person > 0) {
                    // Add this id to a list
                }
            } while (cursor.moveToNext());
    }
    cursor.close(); 
```

更新：我正在查看`Android Developer Portal`（[http://developer.android.com/guide/topics/providers/contacts-provider.html](http://developer.android.com/guide/topics/providers/contacts-provider.html)）的一些文档，是否有可能`person`从短信收件箱中检索到的 id 指的是而`ContactsContract.RawContacts`不是`ContactsContract.Contacts`我所做的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T06:40:58.597

实际上，短信收件箱中的人员列指的是`RawContacts`条目的 ID。通过查询 `RawContacts`表，您可以找到特定用户`contact_id`的`Contacts`表。

您可以尝试使用此代码从 RawContacts 表中获取联系人 ID。

```
long contactId = 0;
Uri uri = ContactsContract.RawContacts.CONTENT_URI;
String[] projection = new String[] { ContactsContract.RawContacts._ID, ContactsContract.RawContacts.CONTACT_ID };
Cursor cursor = contentResolver.query(uri, projection, 
        ContactsContract.RawContacts._ID + " = ?",
        new String[] { rawContactId }, null);

if (cursor.moveToFirst()) {
    int contactIdIndex = cursor.getColumnIndex(ContactsContract.RawContacts.CONTACT_ID);
    contactId = cursor.getLong(contactIdIndex);
}
cursor.close(); 
```

This should solve your problem for fetching the correct contact details by reading an sms row in Android. However as the sms data provider is not documented and phone manufacturers may use them differently, there is chance that this approach may not work on phones other than pure android.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:05:00.693

您首先检查联系人列表中是否存在人员号码。如果是，则匹配两个 ID。

```
Cursor cursor=managedQuery(uri, null, null, null, null);

                    while (cursor.moveToNext()) { 
                        String contactId = cursor.getString(cursor.getColumnIndex( 
                                ContactsContract.Contacts._ID)); 
                        String hasPhone = cursor.getString(cursor.getColumnIndex( 
                                ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
                        if (Boolean.parseBoolean(hasPhone)) { 
                            // You know have the number so now query it like this
                            Cursor phones = getContentResolver().query( 
                                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                                    null, 
                                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, 
                                    null, null); 
                            while (phones.moveToNext()) { 
                                String phoneNumber = phones.getString( 
                                        phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));              
                            } 
                            phones.close(); 
                        } 
                    } 
```

# mysql - 使用Index;Using Temporary，会不会拖慢订单？

> ID：14596912
> 
> 赞同：0
> 
> 时间：2013-01-30T04:48:58.050
> 
> 标签：mysql, performance, query-optimization

我有一个复杂且难以调试的 sql 查询，因为我是通过自己编写的 querybuilder 类生成的。但它一切正常（只是变量名不是用户友好的）。现在，当我运行解释时，它在第一行给了我以下输出：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY         user1_  const   PRIMARY         PRIMARY 257 const   1   Using index; Using temporary 
```

现在我想知道，当我拥有大约 100k 的庞大用户群时，这是否是一个问题（性能问题）。请告诉我是否需要提供数据库架构或查询（它是一个 8k 字符长的查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:51:48.400

每当您看到“使用临时”时，您就会陷入痛苦的世界。这涉及创建一个临时文件并稍后将其读回。尽你所能避免这种情况，尤其是对于较大的结果集，但有时你只需要付出代价，因为没有其他办法。

请记住，这可能需要一个应该在 1 毫秒内执行的查询需要 5 毫秒，而不是特别严重的延迟，但如果它通常需要 10 秒而不是 50 秒，您将开始感到痛苦。

# asp.net - 我们可以从 aspstatetempsessions 表中删除旧记录吗？

> ID：14596922
> 
> 赞同：6
> 
> 时间：2013-01-30T04:50:48.180
> 
> 标签：asp.net, sql-server

最近我`Session State`在我的项目中创建，代码如下

```
<sessionState mode="SQLServer" allowCustomSqlDatabase="true" 
    sqlConnectionString="Data Source=ADMIN-9F8C57749\SQLEXPRESS;Initial 
    Catalog=kecbliss;Integrated Security=True" timeout="60" 
    stateNetworkTimeout="60">
</sessionState> 
```

问题是一天比一天`aspstatetempsessions table`大，所以我的问题是

1.  我可以从 aspstatetempsessions 中删除前几天的记录吗？
2.  如何在不影响项目的情况下实现这一点？

**项目详情** 
前端`ASP.NET`
后端`MS SQL Server`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T05:03:03.873

要解决此问题：

**步骤1：**

确保 SQL 代理服务正在运行，并检查名为*SSPdatabaseName* _Job_DeleteExpiredSessions 的 SQL 代理作业是否存在并成功运行。

如果您已启动 SQL 代理服务并且缺少 SQL 代理作业，请继续执行步骤 2

**第2步：**

在 SSP 数据库上手动运行 DeleteExpiredSessions 存储过程。

*   使用 Microsoft SSMS --> Client on New query 连接到数据库服务器。
*   确保您已在新查询窗口中选择了 SSP 数据库。
*   输入“EXEC DeleteExpiredSessions”并执行查询。

此命令将清理 ASPStateTempSessions 表并且不会删除任何活动连接。

注意：根据 ASPStateTempSessions 表的大小，建议在 SharePoint/SQL 服务器的非高峰时间运行此命令。

要注册将来自动运行的作业，请按照以下步骤操作：

*   确保 SQL 代理已打开（它也应设置为自动启动 Windows 服务）
*   获取包含缺少关联 SQL 代理作业的 ASPStateTempSessions 表的 SSP 数据库名称。
*   在 WFE 或具有服务器场的任何应用程序服务器上执行以下命令：

从命令提示符转到 ASP .Net 文件夹 %WINDIR%\Microsoft.NET\Framework\v2.0.50727\

```
aspnet_regsql.exe -sqlexportonly exportfilepath.sql -ssadd -sstype c -d SSP db name 
```

*   在记事本中打开 exportfilepath.sql 文件，确保选择以下行之间的文本：

/* 创建作业以删除过期会话 */

和

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

*   复制上面复制的测试并在托管 SSP 数据库的 SQL 框上执行代码。

现在您应该发现创建了一个 SQL 代理作业。

拉吉

来源：support.microsoft.com/kb/970788

# ide - PHPStorm 无法与 xdebug 建立外部连接

> ID：14596923
> 
> 赞同：11
> 
> 时间：2013-01-30T04:50:57.200
> 
> 标签：ide, xdebug, phpstorm

我的操作系统是 Mac 山狮。

我的 PhpStorm 版本是 5.0.4。

这是我的 php xdebug 信息：

*   xdebug.remote_autostart => 关闭 => 关闭
*   xdebug.remote_connect_back => 关闭 => 关闭
*   xdebug.remote_cookie_expire_time => 3600 => 3600
*   xdebug.remote_enable => 开启 => 开启
*   xdebug.remote_handler => dbgp => dbgp
*   xdebug.remote_host => 127.0.0.1 => 127.0.0.1
*   xdebug.remote_log => 数据/日志/xdebug.log => 数据/日志/xdebug.log
*   xdebug.remote_mode => req => req
*   xdebug.remote_port => 9000 => 9000
*   xdebug.idekey => 没有价值 => 没有价值

我可以在 PhpStorm 中调试 PhpScript 运行类型，它工作正常。所以我认为 xdebug 配置得很好。

但是在我尝试按照“零配置调试”（Web应用程序运行类型）之后，Phpstorm无法连接传入连接。

这是我的步骤：

1.  单击 Start Listion Php Connection。（将呼叫切换为绿色）
2.  在 PhpScript 中点击 Run->Break at first line，并在第一条语句处设置断点。
3.  选择 My WebApplication Config 并单击 Debug 按钮。然后它会启动 chrome 并链接到我的 phpscript。（使用 ?XDEBUG_SESSION_START=19869）
4.  在 PhpStorm 中，调试器显示正在等待带有 ide 键“19869”的传入连接。
5.  在终端，打印`lsof -i4TCP:9000`。

    > 命令 PID 用户 FD 类型 设备大小/关闭节点名称
    > webide 288 wangfeng 69u IPv6 0xa83881cdce30c579 0t0 TCP *:cslistener (LISTEN)

6.  打开 Chrome 的开发者工具，选择 Cookies。

    > XDEBUG_SESSION 19869 localhost / 2013 年 1 月 30 日星期三 05:27:17 GMT 19

7.  刷新 Chrome。无法连接到 PhpStorm 调试连接。

额外的：

*   我的防火墙已关闭。
*   我的服务器是 nginx。我的 phpwebapp 和服务器都在我的本地机器上。

它会导致ipv6吗？

希望有所帮助！我已经尝试了一切，扩展书签，根本不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T07:10:18.717

其他进程可能正在使用端口 9000。

1.  在 php.ini 设置`xdebug.remote_port=9001`或您选择的另一个未使用的端口中。
2.  在 PHPStorm 中转到 Settings->PHP->Debug 并在 Xdebug 部分下将调试端口设置为 9001。
3.  重新启动您的网络服务器。
4.  开始调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T19:07:14.617

在检查了 php.ini 文件和 IDE 中的所有配置后，不要忘记添加浏览器特定的扩展，该扩展基本上通过 IDE Key 通过 IDE 进行通信。

请参考此[链接](http://blog.zipleen.com/2014/03/debugging-php-with-xdebug-with-phpstorm.html)

# php - 设置 htaccess 以根据请求显示背景页面

> ID：14596925
> 
> 赞同：0
> 
> 时间：2013-01-30T04:51:06.793
> 
> 标签：php, .htaccess, url, url-rewriting

请不要生气，如果这看起来很简单，但对`htaccess`文件使用是新手，我想知道，如果我能得到帮助来完成以下类似的事情：

当用户在我的网站上键入用户名时，例如**www.mysite.com/cindy** ，它不会显示找不到页面的错误，而是会加载一个页面以显示带有`username`.`url`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:43:40.407

# 在 .htaccess 中：

重写引擎开启

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ controller.php?username=$1 [L,QSA]

此外 ：

您需要创建 controller.php 文件，该文件将接受来自 URL 的参数**用户名**，根据该用户名获取用户数据并显示用户配置文件视图。

# ios - 如何在 iphone 中以编程方式获取 IMEI 号码？

> ID：14596926
> 
> 赞同：0
> 
> 时间：2013-01-30T04:51:08.633
> 
> 标签：ios, iphone, imei

> **可能重复：**
> [如何在 iPhone 上获取 IMEI？](https://stackoverflow.com/questions/823181/how-to-get-imei-on-iphone)

如何以`imei`编程方式从 iPhone 获取号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:08:05.767

以编程方式获取 IMEI 号码有些困难。但是，如果您正在寻找一种方法来识别特定电话，则可以使用 UDID（唯一设备标识符）来做到这一点。

```
 NSString *UDID = [[UIDevice currentDevice] uniqueIdentifier]; 
```

也可以试试这个 IMEI

```
NSString *imei = [[NetworkController sharedInstance] IMEI]; 
```

# linux - CPU滴答声和赫兹有什么关系？

> ID：14596928
> 
> 赞同：0
> 
> 时间：2013-01-30T04:51:36.953
> 
> 标签：linux, cpu, cpu-usage

一些 unix 工具（使用 /proc）通过滴答声提供 CPU 时间。但我想以赫兹测量 CPU 使用率。

那么，CPU tick 与 Hertz 之间有什么关系呢？

# regex - 用于电话号码验证的正则表达式？

> ID：14596929
> 
> 赞同：0
> 
> 时间：2013-01-30T04:51:45.517
> 
> 标签：regex, validation, phone-number

我想使用以下格式的正则表达式验证我的电话号码。我已经用谷歌搜索了这些东西，但我找不到以下格式的正则表达式...

```
 079-26408300 / 8200
    (079) 26408300
    079 264 083 00 
    9429527462 
```

谁能指导我如何验证上述格式的电话号码字段？我只想验证上述格式的电话号码，因为现在只使用以下正则表达式`var phone_pattern = /^[a-z0-9]+$/i;`

@阿里沙阿艾哈迈德

```
var phone_pattern = "(\d{10})|(\d{3}-\d{8}\s/\s\d{4})|((\d{3}\s){3}\d{2})|((\d{3})\s\d{8})"; 
```

这是检查其是否有效的方式

```
if (!phone_pattern.test(personal_phone))
        {
            $("#restErrorpersonalphone").html('Please enter valid phone number');
            $("#personal_phone").addClass('borderColor');
            flag = false;
        } else {
            $("#restErrorpersonalphone").html('');
            $("#personal_phone").removeClass('borderColor');
        } 
```

它不工作。我是否以错误的方式实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:14:00.603

让我们从最简单的电话号码开始`9429527462`
因为它有 10 个字符并且都是数字，所以它的正则表达式可能是`\d{10}`

现在下一个电话号码`079 264 083 00`。这种模式的正则表达式可能是`(\d{3}\s){3}\d{2}` 首先我们期望一组 3 位数字和一个重复三次的空格`(\d{3}\s){3}`，这将覆盖`079 264 083`（其中包含空格），所以左边将是最后两个字符，使用`\d{2}`

对于电话号码`(079) 26408300`，`\(\d{3}\)\s\d{8}`可以使用正则表达式。正则表达式首先查找一个左括号，然后是其中的三个数字，然后是右括号。然后它会寻找一个空格，然后是 8 位数字。

`079-26408300 / 8200`可以使用 regex 验证电话号码`\d{3}-\d{8}\s/\s\d{4}`。它首先查找 3 位数字，然后是 -，然后是 8 位数字，然后是空格。然后查找 /，然后查找空格，然后查找 4 位数字。

如果您想知道一个用于验证上述所有模式的正则表达式，请告诉我。

最终组合的正则表达式将是：

```
/(\d{10})|(\d{3}-\d{8}\s\/\s\d{4})|((\d{3}\s){3}\d{2})|(\(\d{3}\)\s\d{8})/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:00:59.990

直截了当的解决方案很简单，使用 |

```
String ex = "\\d{3}-\\d{8} / \\d{4}|\\(\\d{3}\\) \\d{8}|... 
```

# vb.net - 如何在运行时设置秒表名称？

> ID：14596932
> 
> 赞同：0
> 
> 时间：2013-01-30T04:52:16.973
> 
> 标签：vb.net, visual-studio-2010, timer, add, stopwatch

我需要一个解决方案来解决我项目中的一个小问题，我会尽可能简单：

在我项目中的一个表单中，用户应该能够向表单添加一个面板，并且该表单应该包含 2 个控件……一个标签和一个（秒表或计时器）。

问题是动态创建秒表后，我无法为秒表设置名称。稍后在该表单中，当用户单击面板秒表时必须启动。如何为创建的秒表设置名称？或任何其他解决方案，如果我的方式太愚蠢的话。这是我所拥有的：

```
Dim Panels As Integer = ds.Tables("Pool").Rows.Count
        For i = 1 To Panels 
            'set the new panel number
            Dim NextPanelNumber As Integer = FlowLayoutPanel1.Controls.Count + 1
            'controls to be added
            Dim NextPanel As New PanelControl
            Dim NextPanelLabel As New LabelControl
            Dim NextPanelStopwatch As New Stopwatch
            'determine properties for new table
            NextPanel.Width = 200
            NextPanel.Height = 114
            NextPanelStopwatch.Name = "anything" ' <-- PROBLEM IS HERE

            'add controls into new panel
            NextPanel.Controls.Add(NextPanelLabel) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:06:49.763

您在创建秒表时为其创建了名称，没有额外的名称属性。只需确保实例在您想要开始的位置具有可见性。

```
Dim NextPanelStopWatch As New Stopwatch
NextPanelStopWatch.Start() 
```

# php - MVC 中的路由、导航和状态

> ID：14596934
> 
> 赞同：3
> 
> 时间：2013-01-30T04:52:54.920
> 
> 标签：php, model-view-controller

我正在尝试使用 MVC 范例重构我的应用程序。

我的网站显示图表。URL 的格式为

*   app.com/category1/chart1
*   app.com/category1/chart2
*   app.com/category2/chart1
*   app.com/category2/chart2

我正在使用 Apache Rewrite 将所有请求路由到 index.php，因此我正在使用 PHP 进行 URL 解析。

I am working on the enduring task of adding an `active`class to my navigation links when a certain page is selected. 具体来说，我既有类别级导航，也有图表级子导航。我的问题是，在保持 MVC 精神的同时，最好的方法是什么？

在我重构之前，由于导航变得相对复杂，我决定将它放入一个数组中：

```
$nav = array(
  '25th_monitoring' => array(
    'title'    => '25th Monitoring',
    'charts' => array(
      'month_over_month' => array(
        'default' => 'month_over_month?who=total&deal=loan&prev='.date('MY', strtotime('-1 month')).'&cur='.date('MY'),
        'title'   => 'Month over Month'),
      'cdu_tracker' => array(
        'default' => 'cdu_tracker',
        'title'   => 'CDU Tracker')
    )
  ),
  'internet_connectivity' => array(
    'title'   => 'Internet Connectivity',
    'default' => 'calc_end_to_end',
    'charts' => array(
      'calc_end_to_end' => array(
        'default' => 'calc_end_to_end',
        'title' => 'calc End to End'),
      'quickcontent_requests' => array(
        'default' => 'quickcontent_requests',
        'title' => 'Quickcontent Requests')
    )
  )
); 
```

同样，我需要知道当前类别和正在访问的当前图表。我的主要导航是

```
<nav>
  <ul>
    <?php foreach ($nav as $category => $category_details): ?>
    <li class='<?php echo ($current_category == $category) ? null : 'active'; ?>'>
      <a href="<?php echo 'http://' . $_SERVER['SERVER_NAME'] . '/' . $category . '/' . reset(reset($category_details['charts'])); ?>"><?php echo $category_details['title']; ?></a>
    </li>
    <?php endforeach; ?>
  </ul>
</nav> 
```

并且 sub-nav 是类似的，检查 current_chart 而不是 current_category。

之前，在解析过程中，我正在爆炸`$_SERVER['REQUEST_URI']`，`/`并将碎片分解为`$current_category`and `$current_chart`。我在 index.php 中这样做。现在，我觉得这不符合字体控制器的精神。从[Symfony 2's docs](http://symfony.com/doc/current/book/from_flat_php_to_symfony2.html#creating-the-front-controller)之类的参考资料来看，似乎每条路由都应该有自己的控制器。但是后来，我发现自己必须多次定义当前类别和图表，要么在模板文件本身（这似乎不符合 MVC 的精神），要么在模型中的任意函数（然后必须由多个控制器调用，这似乎是多余的）。

这里的最佳做法是什么？

更新：这是我的前端控制器的样子：

```
// index.php
<?php
// Load libraries
require_once 'model.php';
require_once 'controllers.php';

// Route the request
$uri = str_replace('?'.$_SERVER['QUERY_STRING'], '', $_SERVER['REQUEST_URI']);
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && (!empty($_GET)) && $_GET['action'] == 'get_data') {

  $function = $_GET['chart'] . "_data";
  $dataJSON = call_user_func($function);
  header('Content-type: application/json');
  echo $dataJSON;

} elseif ( $uri == '/' ) {
  index_action();

} elseif ( $uri == '/25th_monitoring/month_over_month' ) {
  month_over_month_action();

} elseif ( $uri == '/25th_monitoring/cdu_tracker' ) {
  cdu_tracker_action();

} elseif ( $uri == '/internet_connectivity/intexcalc_end_to_end' ) {
  intexcalc_end_to_end_action();

} elseif ( $uri == '/internet_connectivity/quickcontent_requests' ) {
  quickcontent_requests_action();

} else {
  header('Status: 404 Not Found');
  echo '<html><body><h1>Page Not Found</h1></body></html>';   
}

?> 
```

例如，似乎在调用 month_over_month_action() 时，由于控制器知道 current_chart 是 month_over_month，它应该将其传递。这就是我被绊倒的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:28:46.057

这方面没有“最佳实践”。虽然有一些比其他更常用，还有一些是非常糟糕的想法*（不幸的是，这两组往往重叠）*。

### MVC 中的路由

虽然从技术上讲不是 MVC 设计模式的一部分，但当应用于 Web 时，您的应用程序需要知道要初始化哪个控制器以及调用什么方法。

收集`explode()`此类信息是个坏主意。它既难以调试又难以维护。一个更好的解决方案是使用正则表达式。

基本上你最终会得到一个路由列表，其中包含一个正则表达式和一些后备值。您遍历该列表并在拳头匹配中提取数据并应用默认值，其中缺少数据。

这种方法还使您可以为参数顺序提供更广泛的可能性。

为了使解决方案更易于使用，您还可以添加将*符号*字符串转换为正则表达式的功能。

例如（取自我拥有的一些单元测试）：

*   符号：     `test[/:id]`
    表达式：`#^/test(:?/(?P<id>[^/\.,;?\n]+))?$#`

*   符号：     `[[/:minor]/:major]`
    表达式：`#^(:?(:?/(?P<minor>[^/\.,;?\n]+))?/(?P<major>[^/\.,;?\n]+))?$#`

*   符号：     `user/:id/:nickname`
    表达式：`#^/user/(?P<id>[^/\.,;?\n]+)/(?P<nickname>[^/\.,;?\n]+)$#`

虽然创建这样的生成器不会那么容易，但它会非常可重用。恕我直言，投入制作它的时间会花得很好。此外，`(?P<key>expression)`在正则表达式中使用构造为您提供了来自匹配路由的非常有用的键值对数组。

### 菜单和 MVC

关于突出显示哪个菜单项的决定`active`应该始终是当前视图实例的责任。

更复杂的问题是做出此类决定所必需的信息从何而来。如果数据可用于视图实例，则有两个来源：控制器传递给视图的信息和数据，即从模型层请求的视图。

> [MVC 中的控制器接受用户的输入，并基于此输入，通过传递所述值来更改当前视图和模型层的状态。控制器不应**从**模型层提取信息。]

恕我直言，在这种情况下，更好的方法是在模型层上传递有关菜单内容和其中当前活动元素的信息。虽然可以对视图中当前活动的元素进行硬编码，也可以在控制器传递的信息上中继，但 MVC 通常用于大规模应用程序，这种做法最终会伤害到你。

> [MVC 设计模式中的视图不是一个愚蠢的模板。它是一个负责 UI 逻辑的结构。在 Web 上下文中，这意味着在必要时从多个模板创建响应，或者有时只是简单地发送 HTTP 位置标头。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:48:52.687

好吧，在编写类似 CMS 的产品时，我遇到了几乎同样的麻烦。所以我花了一些时间试图弄清楚如何使它工作并保持代码更易于维护和清洁。CakePHP 和 Symfony 路由机制都给了我一些启发，但对我来说还不够好。所以我会试着给你一个我现在如何做的例子。

> 我的问题是，在保持 MVC 精神的同时，最好的方法是什么？

首先，一般来说，最佳实践是根本不要在 Web 开发中使用带有 MVC 的过程方法。其次，保留 SRP。

> 从像 Symfony 2's docs 这样的参考资料来看，似乎每条路由都应该有自己的控制器。

是的，这是正确的方法，但这**并不意味着**另一个路由匹配不能具有相同的控制器，而是不同的操作。

您的方法（您发布的代码）的主要缺点是您混合了职责并且您没有实现受 MVC 启发的模式。无论如何，PHP 中的 MVC 与过程方法只是一件可怕的事情。

所以，你正在混合的是：

*   路由机制逻辑（它应该是另一个类）不在“控制器”和路由映射中
*   请求和响应责任（我发现这对你来说并不明显）
*   类自动加载
*   控制器逻辑

所有这些“部分”都应该有一个类。基本上，它们必须包含在索引或引导文件中。

此外，通过这样做：

`require_once 'controllers.php';`

您会自动包含每次匹配的所有控制器（即使在不匹配的情况下）。它实际上与 MVC 无关，并导致内存泄漏。相反，您应该只包含并实例化与 URI 字符串匹配的控制器。另外，请注意，`include()`如果`require()`您在某处包含两次相同的文件，它们可能会导致代码重复。

并且，

```
} elseif ( $uri == '/' ) {
  index_action();

} elseif ( $uri == '/25th_monitoring/month_over_month' ) {
  month_over_month_action();

} elseif ( $uri == '/25th_monitoring/cdu_tracker' ) {
  cdu_tracker_action();

} elseif ( $uri == '/internet_connectivity/intexcalc_end_to_end' ) {
  intexcalc_end_to_end_action(); 
```

`if/else/elseif`使用控制结构进行匹配是非常不明智的。好吧，如果你有 50 场比赛呢？甚至100？然后你需要写50或100次才能`else/elseif`相应地写。相反，您应该有一个映射并（例如一个数组）在每个 HTTP 请求上对其进行迭代。

使用带有路由机制的 MVC 的一般方法归结为：

1.  将请求与路线图匹配（如果我们有参数，请保留参数）
2.  然后实例化合适的控制器
3.  然后传递参数，如果我们有它们

在 PHP 中，实现如下所示：

文件：index.php

```
<?php

//.....

// -> Load classes here via SPL autoloader or smth like this

// .......

// Then -> define or (better include route map from config dir)

$routes = array(

    // -> This should default one
    '/' => array('controller' => 'Path_To_home_Controller', 'action' => 'indexAction'),

    '/user/:id' => array('controller' => 'Path_to_user_controller', 'action' => 'ViewAction'),   

    // -> Define the same controller
    '/user/:id/edit' => array('controller' => 'Path_to_user_controller', 'action' => 'editAction'),

    // -> This match we are going to hanlde in example below:
    '/article/:id/:user' => array('controller' => 'SomeArticleController', 'action' => )

);

// -> Also, note you can differently handle this: array('controller' => 'SomeArticleController', 'action' => )
// -> Generally controller key should point to the path of a matched controller, and action should be a method of the controller instance
// -> But if you're still on your own, you can define it the way you want.

// -> Then instantiate common classes

$request  = new Request();
$response = new Response();

$router = new Router();

$router->setMap( $routes );

// -> getURI() should return $_SERVER['REQUEST_URI']
$router->setURI( $request->getURI() ); 

if ( $router->match() !== FALSE ) {

  // -> So, let's assume that URI was:  '/article/1/foo'     

  $info = $router->getAll();

  print_r ( $info );

  /**
   * Array( 'parameters'  =>  Array(':id' => '1', ':user' => 'foo'))
   *        'controller'  => 'Path_To_Controller.php'
   *        'action'      => 'indexAction'
   */

   // -> The next things we are going to do are:

   // -> 1\. Instantiate the controller
   // -> 2\. Pass those parameters we got to the indexAction method   

   $controller =  $info['controller'];

   // -> Assume that the name of the controller is User_Controller
   require ( $controller ); 

   // -> The name of class should also be dynamic, not like this, thats just an example
   $controller = new User_Controller(); 

   $arguments = array_values( $info['parameters'] );

   call_user_func_array( array($controller, $info['action']), $arguments );  

   // -> i.e we just called $controller->indexAction('1', 'foo') "dynamically" according to the matched URI string

   // -> idealy this should be done like: $response->send( $content ), however

} else {

   // -> In order not to show any error
   // -> redirect back to "default" controller
   $request->redirect('/');

} 
```

在我受 MVC 启发的应用程序中，我的路由是这样的：

（我使用依赖注入并保留 SRP 的地方）

```
<?php

require (__DIR__ . '/core/System/Auload/Autoloader.php');

Autoloader::boot(); // one method includes all required classes

$map = require(__DIR__ . '/core/System/Route/map.php');

$request    = new Request();
$response   = new Response();

$mvc        = new MVC();
$mvc->setMap( array_values($map) ); 
// -> array_values($map) isn't accurate here, it'd be a map of controllers
// -> take this as a quick example

$router     = new Router();

$router->setMap( $map );
$router->setURI( $request()->getURI() );

if ( $router->match() !== FALSE ) {

    // -> Internally, it would automatically find both model and view instances
    // -> then do instantiate and invoke appropriate action
    $router->run( $mvc );

} else {

    // No matches handle here
    $request->redirect('/');
} 
```

在浏览了 Cake 和 Symfony 之后，我发现这更适合我。

我要注意的一件事：

在 PHP 中找到关于 MVC 的好文章并不容易。他们中的大多数都是错误的。（我知道那是什么感觉，因为我第一次开始向他们学习，就像很多人一样）

所以我的观点是：

不要像我以前那样犯同样的错误。如果您想学习 MVC，请从阅读 Zend Framework 或 Symfony 教程开始。即使是有点不同，场景的想法是一样的。

**回到问题的另一部分**

> 同样，我需要知道当前类别和正在访问的当前图表。我的主要导航是

```
<nav>
  <ul>
    <?php foreach($nav as $category => $category_details): ?>
    <li class='<?php echo ($current_category == $category) ? null : 'active'; ?>'>
      <a href="<?php echo 'http://' . $_SERVER['SERVER_NAME'] . '/' . $category . '/' . reset(reset($category_details['charts'])); ?>"><?php echo $category_details['title']; ?></a>
    </li>
    <?php endforeach; ?>
  </ul>
</nav> 
```

首先，不要连接字符串，而是使用`printf()`如下：

```
<a href="<?php printf('http://%s/%s/%s', $_SERVER['SERVER_NAME'], $category, reset(reset($category_details['charts']))); ?>"><?php echo $category_details['title']; ?></a> 
```

如果您需要它无处不在（或至少在许多不同的模板中），我建议将它放在一个通用的抽象视图类中。

例如，

```
abstract class View
{
    // -> bunch of view reusable methods here...

    // -> Including this one
    final protected function getCategories()
    {
        return array(

            //....
        );
    }
}

class Customers_View extends View
{
    public function render()
    {
        $categories =& $this->getCategories();

        // -> include HTML template and then interate over $categories
    }

} 
```

# c# - .NET Compact Framework 2.0 对话框失去焦点

> ID：14596939
> 
> 赞同：0
> 
> 时间：2013-01-30T04:53:41.100
> 
> 标签：c#, .net, forms, dialog, compact-framework

我有一个表单可以打开另一个作为对话框

```
form.ShowDialog() 
```

但是我有一个问题，我认为是新对话框失去焦点造成的。

有时，原始表单仍然存在，而新对话框永远不会打开。

我认为可能是在尝试通过按钮打开新对话框时，我在新对话框打开之前再次按下初始表单上的某个位置。是否将焦点放在初始表单上只是与新对话框重叠？

我不知道如何检查这个，而且它并不总是发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:03:29.480

> 我认为可能是在尝试通过按钮打开新对话框时，我在新对话框打开之前再次按下初始表单上的某个位置。

尝试这样的事情：

```
private void button1_Click(object sender, EventArgs e)
{
  button1.Enabled = false;
  using (Form2 form = new Form2())
  {
    form.ShowDialog();
  }
  button1.Enabled = true;
} 
```

这将防止您的按钮被点击两次。

# mongodb - 是否可以在同一台机器上设置主/从？

> ID：14596942
> 
> 赞同：0
> 
> 时间：2013-01-30T04:53:51.347
> 
> 标签：mongodb

我**对同一台机器上的**Mongo DB Master/Slave 设置有疑问。

我使用 Ubutu 12 作为操作系统。我需要在同一台机器上有两个 MongoDB 副本吗？

如果是的话，它怎么能允许分开安装两次？？

```
(sudo apt-get install mongodb-10gen) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:22:20.880

由于所有链接的问题都是针对 Windows 的，而且这是一个 Linux 命令，我将从“可能重复”的评论中转移。

`mongod`是的，您可以在同一台机器上运行多个s。而不是安装多次，您只需`mongod`像这样以不同的方式开始：

```
./mongod --dbpath /foo/bar/otherpath --port some_other_port 
```

来源：[https ://serverfault.com/questions/296246/multiple-mongos-on-one-server](https://serverfault.com/questions/296246/multiple-mongos-on-one-server)

但由于资源争用，不建议这样做，尤其是内存。即使是开发服务器也将是可怕的，如果您打算将此设置投入生产，那么您不妨选择一个`mongod`。

如果您想在同一台机器上运行多个实例，建议使用容器，例如虚拟机或其他东西。那里有几个。

# android - 这个{Web服务中的故障字符串结束元素}的解决方案

> ID：14596947
> 
> 赞同：1
> 
> 时间：2013-01-30T04:54:08.967
> 
> 标签：android, android-websettings

我通过我的android应用程序中的Web服务链接有PDF文件列表，当我打开我的PDF时，它在我返回我的列表后工作完美，现在我点击（第二次）相同的PDF文件它不是opem（工作）以下错误一致..请帮帮我..

**错误：**

```
I/faultstringendElement(664): FaultStringSystem.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.IO.IOException: The process cannot access the file 'D:\web\users\KnotBiz\c.knotbiz.com\000970\CON000970000016-1474.pdf' because it is being used by another process.
I/faultstringendElement(664):at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
I/faultstringendElement(664):at System.IO.File.InternalDelete(String path, Boolean checkHost)
I/faultstringendElement(664):at KnotBiz.Mobile.WebService.MobileService.PrintContract(Int64 UserId, Int64 eventId, Nullable`1 id)
I/faultstringendElement(664):--- End of inner exception stack trace --- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:36:45.407

您已经在访问该文件 - 因为它正在被另一个进程使用。根据您的植入，您需要在关闭文件时释放文件或检查它是否已经打开。

# linux-kernel - GDB 中的用户模式到内核模式调试

> ID：14596948
> 
> 赞同：1
> 
> 时间：2013-01-30T04:54:12.650
> 
> 标签：linux-kernel, gdb, kernel, user-mode-linux

我正在调试一个我点击的程序

整数 0x80

我知道这意味着系统调用，然后内核执行它。但是，GDB 不允许我在执行此系统调用时查看内核运行的指令。它只是执行系统调用并将我带到下一条指令。

无论如何我可以在调试用户模式程序时查看内核模式代码吗？如果不是，那么我可以使用的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:44:28.217

> 无论如何我可以在调试用户模式程序时查看内核模式代码吗？

不。

（实际上，如果您使用[UML ，您](http://user-mode-linux.sourceforge.net/)*可以*这样做，但这可能对您来说太复杂而无法设置。）

# objective-c - Pdf 文件页码

> ID：14596949
> 
> 赞同：1
> 
> 时间：2013-01-30T04:54:29.017
> 
> 标签：objective-c, pdf, pdf-generation

我是开发 iOS 应用程序的新开发人员。我正在使用下面的代码来创建 pdf。pdf 被创建并且还显示数据。但我需要显示每个 pdf 页面的页码。请帮我。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *saveDirectory = [paths objectAtIndex:0];
    NSString *filename =@"Gp By SalesPerson Summary";
    filename = [filename stringByAppendingString:@".pdf"]; 
    NSLog(@"Filename= %@",filename);
    NSString *saveFileName = filename;
    NSString *newFilePath = [saveDirectory stringByAppendingPathComponent:saveFileName];
    const char *filenm = [newFilePath UTF8String];

    CGRect pageRect = CGRectMake(0, 0, 712,792);

    // This code block sets up our PDF Context so that we can draw to it
    CGContextRef pdfContext;
    CFStringRef path;
    CFURLRef url;
    CFMutableDictionaryRef myDictionary = NULL;

    // Create a CFString from the filename we provide to this method when we call it
    path = CFStringCreateWithCString (NULL, filenm,
                                      kCFStringEncodingUTF8);

    // Create a CFURL using the CFString we just defined
    url = CFURLCreateWithFileSystemPath (NULL, path,
                                         kCFURLPOSIXPathStyle, 0);
    NSLog(@"path= %@",path);
    CFRelease (path);

    // This dictionary contains extra options mostly for 'signing' the PDF
    myDictionary = CFDictionaryCreateMutable(NULL, 0,
                                             &kCFTypeDictionaryKeyCallBacks,
                                             &kCFTypeDictionaryValueCallBacks);
    CFDictionarySetValue(myDictionary, kCGPDFContextTitle, CFSTR("My PDF File"));
    CFDictionarySetValue(myDictionary, kCGPDFContextCreator, CFSTR("My Name"));

    // Create our PDF Context with the CFURL, the CGRect we provide, and the above defined dictionary 
    pdfContext = CGPDFContextCreateWithURL(url, &pageRect, myDictionary);

    NSLog(@"%@",url);
    CFRelease(myDictionary);
    CFRelease(url);

    //pdf page creation code starts here…

    //I have stored the product details in array aryPrdCode,aryPrdName,aryPrdImageData
    filterArray = [[NSMutableArray alloc]init];
    NSLog(@"arrayCoutnt:%d",[array_spName count]);
    int count ;
    for(int i = 0; i<[namesArray count]; i++)
    {
         [filterArray removeAllObjects];
        int perPage;
        for(int j=0; j<[filArray count]; j++)
        {
            if([[namesArray objectAtIndex:i] isEqualToString:[[filArray objectAtIndex:j]objectForKey:@"EmployeeName"]])
            {

                [filterArray addObject:[filArray objectAtIndex:j]];

            }
        }
        revenueSum = 0;
        cogsSum = 0;
        marginSum = 0;
        marginPerSum = 0;
        for(int j=0; j<4; j++)
        {
            for(int i=0; i<[filterArray count]; i++)
            {
                if(j==0)
                    revenueSum = revenueSum +[[[filterArray objectAtIndex:i] objectForKey:@"Revenue"] floatValue];
                else if(j==1)
                    cogsSum = cogsSum +[[[filterArray objectAtIndex:i] objectForKey:@"COGS"] floatValue];
                else if(j==2)
                    marginSum = marginSum +[[[filterArray objectAtIndex:i] objectForKey:@"GP"] floatValue];
                else if(j==3)
                    marginPerSum = marginPerSum +[[[filterArray objectAtIndex:i] objectForKey:@"MarginPer"] floatValue];

            }
        }

        NSLog(@"filterArray:%@ %d",filterArray,[filterArray count]);
        perPage = 17; //Number of products to be shown per page
        count = [filterArray count];
        float pages = ((float)count / (float)perPage);

        int pagesInPdf = [[NSNumber numberWithFloat:ceilf(pages)] intValue];

        CGContextBeginPage (pdfContext, &pageRect);
        NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setDateFormat:@"dd/MM/yyyy"];
        NSString *theDate = [dateFormat stringFromDate:[NSDate date]];
        // Header fields like customerId, REP name etc

        const char *repName = [[NSString stringWithFormat:@"%@",[[filterArray objectAtIndex:0]objectForKey:@"EmployeeName"]] UTF8String];
        //const char *salesOrder = [[NSString stringWithFormat:@"Sales: %@",@"For Ship Out"] UTF8String];
        //const char *customerId = [[NSString stringWithFormat:@"Customer-Id: %@",@"444"] UTF8String];
        const char *dolOn = [[NSString stringWithFormat:@"Date: %@",theDate] UTF8String];
        // const char *orderAmount = [[NSString stringWithFormat:@"Order Total: $%@",@"10000"] UTF8String];

        CGContextSelectFont (pdfContext, "Helvetica", 14, kCGEncodingMacRoman);

        CGContextShowTextAtPoint (pdfContext, 10 , 760, repName, strlen(repName));
        //CGContextShowTextAtPoint (pdfContext, 230 , 780, salesOrder, strlen(salesOrder));
        // CGContextShowTextAtPoint (pdfContext, 500 , 780, customerId, strlen(customerId));   
        CGContextShowTextAtPoint (pdfContext, 230 , 760, dolOn, strlen(dolOn));
        // CGContextShowTextAtPoint (pdfContext, 270 , 760 , orderAmount, strlen(orderAmount));

        CGContextSelectFont (pdfContext, "Helvetica", 15, kCGEncodingMacRoman); // this code generates some error check the error below think coz it is unable to find font
        CGContextSetTextDrawingMode (pdfContext, kCGTextFill);

        //Drawing Headings in a Table

        CGContextSetRGBFillColor (pdfContext, 0, 0, 0, 1);  

        UIImage *headingStrip = [UIImage imageNamed:@"gray-strip-horizontal.png"];

        CGContextDrawImage(pdfContext, CGRectMake(0, 715, 712, 39), headingStrip.CGImage);

        CGContextShowTextAtPoint (pdfContext, 20 , 730, [@"SalesPerson" UTF8String], strlen([@"SalesPerson" UTF8String]));
        CGContextShowTextAtPoint (pdfContext, 211 , 730, [@"Revenue $" UTF8String], strlen([@"Revenue $" UTF8String]));
        CGContextShowTextAtPoint (pdfContext, 330 , 730, [@"COGS $" UTF8String], strlen([@"COGS $" UTF8String]));   
        CGContextShowTextAtPoint (pdfContext, 460 , 730, [@"GP Margin $" UTF8String], strlen([@"GP Margin $" UTF8String]));
        CGContextShowTextAtPoint (pdfContext, 600 , 730 ,[@"GP Margin %" UTF8String], strlen([@"GP Margin %" UTF8String]));

        const char *borderLine = [@"-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------" UTF8String];
        const char *borderLine1 = [@"  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------" UTF8String];

        UIImage *columnImg = [UIImage imageNamed:@"gray-strip-virticle.png"];

        int k=0;
        //Drawing Rows in a Table

        CGContextSelectFont (pdfContext, "Helvetica", 12, kCGEncodingMacRoman);
        CGContextSetRGBFillColor (pdfContext, 0., 0, 0, 1);
        NSLog(@"pagesInPdf;%d",pagesInPdf);

        for(int j=0;j<pagesInPdf;j++)
        {

            if(j!=0)
            {  
                //from 2nd page this code will call

                CGContextBeginPage (pdfContext, &pageRect);
                CGContextSetTextDrawingMode (pdfContext, kCGTextFill);
                CGContextSelectFont (pdfContext, "Helvetica", 12, kCGEncodingMacRoman);
                CGContextSetRGBFillColor (pdfContext, 0., 0, 0, 1);  

            }

            int noOfRowsInPage;
            if(j!=(pagesInPdf-1)){
                noOfRowsInPage= perPage;
                NSLog(@"Number of Rows In Pages=-=-:%d",noOfRowsInPage);}
            else
            {
                noOfRowsInPage = [filterArray count]-j*perPage;
                NSLog(@"Number of Rows In Pages:%d",noOfRowsInPage);
            }
            NSLog(@"numberOfRows In Pages:%d",noOfRowsInPage);
            for(int i =0;i<noOfRowsInPage;i++)
            {

                NSLog(@"kkkkkkk:%d  %d",k,j);
                  k++;
                const char *itemNo = [[[filterArray objectAtIndex:j*perPage+i] objectForKey:@"EmployeeName"]  UTF8String];
                const char *description = [[[filterArray objectAtIndex:j*perPage+i] objectForKey:@"Revenue"] UTF8String];
                const char *price = [[[filterArray objectAtIndex:j*perPage+i] objectForKey:@"COGS"] UTF8String];
                const char *maxinv = [[[filterArray objectAtIndex:j*perPage+i] objectForKey:@"GP"] UTF8String];
                const char *qtyorder = [[[filterArray objectAtIndex:j*perPage+i] objectForKey:@"MarginPer"] UTF8String];

                if(j==0)
                {
                    //1st Page
                    CGContextShowTextAtPoint (pdfContext, 20 , 695-i*40, itemNo, strlen(itemNo));
                    CGContextDrawImage(pdfContext, CGRectMake(200, 675-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 211 , 695-i*40, description, strlen(description));
                    CGContextDrawImage(pdfContext, CGRectMake(320, 675-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 330 , 695-i*40, maxinv, strlen(maxinv));   

                    CGContextDrawImage(pdfContext, CGRectMake(450, 675-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 460 , 695-i*40, qtyorder, strlen(qtyorder));
                    CGContextDrawImage(pdfContext, CGRectMake(590, 675-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 600 , 695-i*40, price, strlen(price));

                    CGContextShowTextAtPoint (pdfContext, 0 , 673-i*40, borderLine, strlen(borderLine));
                    CGContextShowTextAtPoint (pdfContext, 0 , 673-i*40, borderLine1, strlen(borderLine1));

                }

                else
                {
                    //2nd,3rd etc..Pages
                    CGContextShowTextAtPoint (pdfContext, 20 , 750-i*40, itemNo, strlen(itemNo));
                    CGContextDrawImage(pdfContext, CGRectMake(200, 735-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 211 , 750-i*40, description, strlen(description));
                    CGContextDrawImage(pdfContext, CGRectMake(320, 735-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 330 , 750-i*40, maxinv, strlen(maxinv));   
                    CGContextDrawImage(pdfContext, CGRectMake(450, 735-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 460 , 750-i*40,qtyorder, strlen(qtyorder));
                    CGContextDrawImage(pdfContext, CGRectMake(590, 735-i*40, 1, 40), columnImg.CGImage);
                    CGContextShowTextAtPoint (pdfContext, 600 , 750-i*40, price, strlen(price));

                    CGContextShowTextAtPoint (pdfContext, 0 , 733-i*40, borderLine, strlen(borderLine));
                    CGContextShowTextAtPoint (pdfContext, 0 , 733-i*40, borderLine1, strlen(borderLine1));
                }

            }
            int row;
            row = noOfRowsInPage;
            NSString *str = @"Total";
            if(row == noOfRowsInPage)
            {
                NSLog(@"MarginSum:%f",marginSum);
                NSLog(@"CogsSum:%f",cogsSum);
                NSLog(@"RevenueSum:%f",revenueSum);
                NSLog(@"MargenPer:,%f",marginPerSum);
                const char *itemNo = [str UTF8String];
                const char *description = [[NSString stringWithFormat:@"$%0.2f",revenueSum] UTF8String];
                const char *price = [[[NSString stringWithFormat:@"%0.2f",(marginSum/revenueSum *100)]stringByAppendingString:@"%"] UTF8String];
                const char *maxinv = [[NSString stringWithFormat:@"$%0.2f",cogsSum] UTF8String];
                const char *qtyorder = [[NSString stringWithFormat:@"$%0.2f",marginSum] UTF8String];

                if([[NSString stringWithFormat:@"$%f",revenueSum]  length]>17)
                {
                    CGContextSelectFont (pdfContext, "Helvetica-Bold", 10, kCGEncodingMacRoman);
                    CGContextSetRGBFillColor (pdfContext, 0., 0, 0, 1);  
                    NSLog(@"rowCount is:%d",row); 
                }
                else {
                    CGContextSelectFont (pdfContext, "Helvetica-Bold", 13, kCGEncodingMacRoman);
                    CGContextSetRGBFillColor (pdfContext, 0., 0, 0, 1);  
                    NSLog(@"rowCount is:%d",row);
                }

                if(j == pagesInPdf-1)
                {
                    if(j == 0)
                    {
                        //1st Page Total---->> Footer
                        CGContextShowTextAtPoint (pdfContext, 20 , 695-row*40, itemNo, strlen(itemNo));
                        CGContextDrawImage(pdfContext, CGRectMake(200, 675-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 211 , 695-row*40, description, strlen(description));
                        CGContextDrawImage(pdfContext, CGRectMake(320, 675-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 330 , 695-row*40, maxinv, strlen(maxinv));   
                        CGContextDrawImage(pdfContext, CGRectMake(450, 675-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 460 , 695-row*40, qtyorder, strlen(qtyorder));
                        CGContextDrawImage(pdfContext, CGRectMake(590, 675-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 600 , 695-row*40, price, strlen(price));

                        CGContextShowTextAtPoint (pdfContext, 0 , 673-row*40, borderLine, strlen(borderLine));
                        CGContextShowTextAtPoint (pdfContext, 0 , 673-row*40, borderLine1, strlen(borderLine1)); 
                    }
                    else {
                        //2nd,3rd etc.. Pages Total---->>Footer
                        CGContextShowTextAtPoint (pdfContext, 20 , 750-row*40, itemNo, strlen(itemNo));
                        CGContextDrawImage(pdfContext, CGRectMake(200, 735-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 211 , 750-row*40, description, strlen(description));
                        CGContextDrawImage(pdfContext, CGRectMake(320, 735-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 330 , 750-row*40, maxinv, strlen(maxinv));   
                        CGContextDrawImage(pdfContext, CGRectMake(450, 735-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 460 , 750-row*40, qtyorder, strlen(qtyorder));
                        CGContextDrawImage(pdfContext, CGRectMake(590, 735-row*40, 1, 40), columnImg.CGImage);
                        CGContextShowTextAtPoint (pdfContext, 600 , 750-row*40, price, strlen(price));

                        CGContextShowTextAtPoint (pdfContext, 0 , 733-row*40, borderLine, strlen(borderLine));
                        CGContextShowTextAtPoint (pdfContext, 0 , 733-row*40, borderLine1, strlen(borderLine1));
                    }

                }
            }
            CGContextEndPage (pdfContext);

        }

    }

    CGContextRelease (pdfContext); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:25:43.080

**用于显示页码：**

```
- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
    UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

    NSInteger currentPage = 0;

        //Draw a page number at the bottom of each page.
        currentPage++;
        [self drawPageNumber:currentPage];

}

- (void)drawPageNumber:(NSInteger)pageNumber
{
    NSString* pageNumberString = [NSString stringWithFormat:@"Page %d", pageNumber];
    UIFont* theFont = [UIFont systemFontOfSize:12];

    CGSize pageNumberStringSize = [pageNumberString sizeWithFont:theFont
                                   constrainedToSize:pageSize
                                       lineBreakMode:UILineBreakModeWordWrap];

    CGRect stringRenderingRect = CGRectMake(20,
                                   pageSize.height - 40.0,
                                   pageSize.width - 2*20,
                                   pageNumberStringSize.height);

    [pageNumberString drawInRect:stringRenderingRect withFont:theFont lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter];
} 
```

# c# - WPF 获取框中的光标

> ID：14596950
> 
> 赞同：0
> 
> 时间：2013-01-30T04:54:33.120
> 
> 标签：c#, wpf, textbox, cursor, radio-button

大家好，我前面有一个单选按钮和文本框，一旦我检查了按钮，文本框就会变得可见！

但我也希望我的光标在文本框中可见，以便用户更容易输入 \ 我该怎么做？！

这就是我的功能

```
 private void SelectQualityChecked(object sender, RoutedEventArgs e)
    {
        txtSelectedQuantity.IsEnabled = true;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:08:33.403

您可以在 Xaml 中完成这一切。不需要后面的代码。

首先将属性绑定到`RadioButton` `IsChecked`属性上`TextBox` `IsEnabled`，然后使用`Trigger`on `TextBox` `IsEnabled`true 将焦点设置在`TextBox`使用`FocusManager.FocusedElement`属性上。

例子：

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <StackPanel>
            <RadioButton x:Name="radioBtn" Content="Click me!"  />
            <TextBox x:Name="txtbox" IsEnabled="{Binding ElementName=radioBtn, Path=IsChecked}">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}">
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="True">
                                <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=txtbox}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>
        </StackPanel>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:25:02.707

试试这个代码：

```
 private void checkBox1_Checked(object sender, RoutedEventArgs e)
        {
          textBox1.IsEnabled = true;
          textBox1.Focus();
        } 

        private void checkBox1_Unchecked(object sender, RoutedEventArgs e)
        {
            textBox1.IsEnabled = false;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T05:01:08.583

尝试添加这个。我认为您应该在复选框单击事件之后传递布尔值

```
 private void SelectQualityChecked(object sender, RoutedEventArgs e)
    {
        txtSelectedQuantity.IsEnabled = SelectQuality.Checked;
        txtSelectedQuantity.Focusable = SelectQuality.Checked;
        if(SelectQuality.Checked)
        {
            txtSelectedQuantity.Focus();
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T05:01:24.790

试试这个代码：

```
private void radioButton1_Checked(object sender, RoutedEventArgs e)
    {
        textBox1.Visibility = System.Windows.Visibility.Visible;
        textBox1.Focus();
    } 
```

# javascript - 创建“出现内容”效果的好方法

> ID：14596957
> 
> 赞同：0
> 
> 时间：2013-01-30T04:55:13.150
> 
> 标签：javascript, html, css

我需要一种效果，当页面打开时，网站中的某些 div 会淡入（因此它们将从 0 淡入到 100 不透明度）。

我已经用 js 创建了这个效果，但我不确定这是否是最好的方法。我很想得到一些想法，以找到一种创造类似效果的好方法。

出于某种原因，我相信这可以用纯 css3 来完成，你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:59:03.770

纯 CSS 将起作用：

```
@keyframes fadein {from{opacity:0} to{opacity:1}}
@keyframes fadeout {from{opacity:1} to{opacity:0}} 
```

然后你可以`animation: fadein 1s linear`在你想要淡入的元素上使用（或其他）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:58:21.593

我会使用 jQuery 的 .fadeIn('') 函数。

# cocos2d-iphone - Cocos2D 使相机跟随 Sprite 无法正常工作

> ID：14596959
> 
> 赞同：1
> 
> 时间：2013-01-30T04:55:23.233
> 
> 标签：cocos2d-iphone, camera, objective-c++, levelhelper

我正在使用以下代码使相机跟随我的角色跌落屏幕：

```
[self runAction:[CCFollow actionWithTarget:charSprite worldBoundary:[levelLoader gameWorldSize]/*CGRectMake(0,0,320,3000)*/]]; 
```

发生的情况是这样的：代码按照您的预期运行，并在角色从屏幕顶部跌落时跟随角色。然而：当他到达屏幕中间时，相机停止跟随他。

我已经尝试了上面的代码以及用`[levelLoader gameWorldSize]`注释掉的替换`CGRectMake(0,0,320,3000)`- 两者都产生相同的结果。作为最后的手段，我尝试使用我在 www.raywenderlich.com 上找到的一些代码，这些代码以前对我有用（见下文）（它在我编写的另一个游戏中的 x 轴上工作），但发生了同样的问题。

```
-(void)setViewpointCenter:(CGPoint) position
{
 CGSize winSize = [[CCDirector sharedDirector] winSize];
 CGRect worldRect = [levelLoader gameWorldSize];

 int x = MAX(position.x, worldRect.origin.x + winSize.width / 2);
 int y = MAX(position.y, worldRect.origin.y + winSize.height / 2);
 x = MIN(x, (worldRect.origin.x + worldRect.size.width) - winSize.width / 2);
 y = MIN(y, (worldRect.origin.y + worldRect.size.height) - winSize.height/2);
 CGPoint actualPosition = ccp(x, y);

 CGPoint centerOfView = ccp(winSize.width/2, winSize.height/2);
 CGPoint viewPoint = ccpSub(centerOfView, actualPosition);

 self.position = viewPoint;
} 
```

我的世界是使用 LevelHelper 在纵向模式下创建的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:44:27.377

CCFollow 跟随世界边界内的节点，减去屏幕宽度/高度的一半。如果你的精灵在 y = 320 开始下降，那么 CCFollow 将跟随它直到 y = 160。

您可以将精灵定位到世界边界的顶部（y = 3000）或将世界边界设为负值（y = -3000）。无论哪种方式，当精灵到达世界边界时，滚动将在世界边界前半个屏幕宽度/高度停止。

# wordpress - WooCommerce 中带有翻转的多个产品视图

> ID：14596966
> 
> 赞同：0
> 
> 时间：2013-01-30T04:56:40.863
> 
> 标签：wordpress, e-commerce, woocommerce

我正在使用 WooCommerce 开发一个电子商务网站，我正在尝试添加多个产品视图，当单击或悬停时，替换主图像。股票代码在花哨的框中打开附加到帖子的缩略图，我不喜欢。我看了一遍，发现只有几个插件很接近，但离我想要的效果还很远。

理想情况下，我正在寻找的是一个插件或代码，我可以添加到我的函数中，当您翻转缩略图时，它会用新的图像替换主图像。如果那不可能，我需要它至少在单击时替换它。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:50:21.083

我找到了这个[http://www.magictoolbox.com/magiczoomplus/](http://www.magictoolbox.com/magiczoomplus/)它处理了我需要的东西。我只是将缩放设置为内部，因此它不会打开缩放窗口，并且它具有替换主图像的缩略图悬停。也许这可以帮助有类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T20:30:22.833

老实说，我根本不明白为什么你需要一个插件来做到这一点，常规的 javascript/jQuery 就可以了。

```
 $( ".smallImage" ).hover(function() {
         var smallSrc = $(this).attr("src");
         $( "#bigImage" ).attr("src", src );
     }, function() {
         // Code here for mouse out
     }
 ); 
```

# wix - 仅启动服务前的自定义操作

> ID：14596968
> 
> 赞同：0
> 
> 时间：2013-01-30T04:56:56.123
> 
> 标签：wix, windows-installer, custom-action

我正在尝试仅在开始服务之前运行自定义操作。

现在我正在这样做。

```
<Custom Action="Parameter7" Before="Action7">LANGUAGE = "United States - English"</Custom>
<Custom Action="Action7" Before="StartServices" >LANGUAGE = "United States - English"</Custom> 
```

我有这个代码来启动服务

```
 <Component Id="START_SERVICE" Guid="13A5B40E-569D-49f5-A0DD-FDE659DAB11B">
        <ServiceControl Id="StartService" Start="install" Stop="both" Name="LRSAS" Wait="yes" />
 </Component> 
```

我想看到“Action7”在仅启动服务之前运行（仅在安装时）的结果，但似乎这个 Action 7 在卸载时也运行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:32:05.880

好的，我必须将我的代码更改为这个。:)

```
 <Custom Action="Parameter7" Before="Action7">NOT Installed AND LANGUAGE = "United States - English"</Custom>
  <Custom Action="Action7" Before="StartServices">NOT Installed AND LANGUAGE = "United States - English"</Custom> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:31:05.303

从技术上讲，ServiceControl 与组件相关联，并且仅在设置组件时才会运行。如果您想完全准确，您的条件还应该检查组件的操作状态。

未安装 AND $START_SERVICE>2 AND LANGUAGE = "United States - English"

# java - 给我的 jar 文件更多的内存

> ID：14596970
> 
> 赞同：0
> 
> 时间：2013-01-30T04:57:14.813
> 
> 标签：java, multithreading, web-crawler

我有一个多线程爬虫。在这个程序中，如果我加载了很多种子，我会得到一个错误。我看到了`java.lang.OutOfMemoryError`，想也许内存不够。我尝试`crawler.jar`使用这些参数运行文件：`java -Xms512m -Xmx3G -jar crawler.jar`但到目前为止，还没有运气。

这是程序的 StackTrace：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.lang.OutOfMemoryError: unable to create new native thread
        at java.lang.Thread.start0(Native Method)
        at java.lang.Thread.start(Thread.java:597)
        at com.sleepycat.je.utilint.DaemonThread.runOrPause(DaemonThread.java:99)
        at com.sleepycat.je.dbi.EnvironmentImpl.runOrPauseDaemons(EnvironmentImpl.java:772)
        at com.sleepycat.je.dbi.EnvironmentImpl.envConfigUpdate(EnvironmentImpl.java:717)
        at com.sleepycat.je.dbi.EnvironmentImpl.finishInit(EnvironmentImpl.java:579)
        at com.sleepycat.je.dbi.DbEnvPool.getEnvironment(DbEnvPool.java:204)
        at com.sleepycat.je.Environment.makeEnvironmentImpl(Environment.java:230)
        at com.sleepycat.je.Environment.<init>(Environment.java:212)
        at com.sleepycat.je.Environment.<init>(Environment.java:166)
        ... 
```

这与我怀疑的记忆有关吗？`-Xms512m -Xmx3G`当我使用运行 jar 文件时添加工作`java -jar`吗？

我运行了任务管理器（我在 Windows Server 上运行），但运行应用程序后，内存并没有那么高！我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:45:39.757

*-Xms512m -Xmx3G*选项只会影响 JVM的堆大小，不会解决您的问题。

但是，在大多数情况下，默认线程数限制应该足够了。您可以通过调整 JVM/系统选项来增加限制，但无论您创建多少线程，系统的容量都受限于您的计算机资源。例如cpu、内存、网络等。

我建议从不同的角度解决这个问题：

*   尝试在工作线程之间共享 Environment 实例。
*   尝试将并发级别控制在系统繁忙且不触及线程数限制的速率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:07:42.867

这类错误通常可以通过一些简单的分析来解决。JDK 随 jvisualvm 一起提供。

例如 C:\Program Files\Java\jdk1.7.0_11\bin\jvisualvm.exe

您将能够看到堆大小的图表，并且还值得检查 PermGen 空间。

如果这没有显示任何内容，请尝试在运行 jar 时添加 -XX:-HeapDumpOnOutOfMemoryError，然后将堆转储加载到 Eclipse 内存分析器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T05:13:16.250

您产生的线程数超过了 Java 所能承受的。尝试使用此 JVM 参数缩小堆栈大小：`-Xss128k`

如果不是这样，也许你正在达到操作系统限制。如果您使用的是 Linux，请将这样的一行添加到`~/.profile`：`ulimit -u 4096`

发生这种情况的原因有[很多](http://java.dzone.com/articles/outofmemoryerror-unable-create)，具体取决于您的代码和您使用的操作系统。

# java - 在 GridWorld 的 GUI 中扩展一个类而不改变其他使用它的类

> ID：14596971
> 
> 赞同：2
> 
> 时间：2013-01-30T04:57:24.467
> 
> 标签：java, extends, performance, gridworld

我想更改 GridWorld GUI 的类，`DefaultDisplay`以便可以在运行期间更改演员的图像，并且由于我使用的是代码的 jar 文件，因此我正在创建.`CustomDisplay``DefaultDisplay`

但是，由于创建子类会更改名称，因此我必须创建使用的类的子类，`DefaultDisplay`以便将它们更新为使用`CustomDisplay`而不是`DefaultDisplay`. 例如，我必须创建一个`DisplayMap`名为`CustomMap`that 的子类，而不是这个：

```
private Display defaultDisplay = new DefaultDisplay(); 
```

说：

```
private Display customDisplay = new CustomDisplay(); 
```

然后`DisplayMap`必须将使用的任何其他类更改为使用`CustomMap`. 仅仅因为它们使用我更改的类而创建所有这些类的子类似乎非常低效。

是否有可能让它`CustomDisplay`自动使用而不是`DefaultDisplay`让我只需要更改一个类？

### 笔记

1.  我所说的类不在普通的[javadoc](http://www.horstmann.com/gridworld/javadoc/)上，但可以在[这里](http://www.fangengine.org/images/docs/api/info/gridworld/gui/package-summary.html)找到。
2.  我检查了[Extending GridWorld](http://www.horstmann.com/gridworld/extending-gridworld.html)并发现了很多信息，但没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T01:59:36.500

这个问题似乎过时了，但我认为一个通用的答案可以帮助任何找到它的人。

问题是关于 GridWorld，一个用于教学的简单框架。

OP 想要进行特定的更改，通过引入新的显示类来解决未说明的问题，但不能更改现有的类。因此问题就变成了如何引入新的显示类？

应用面向对象的思维。框架是否支持引入新的显示类？我们应该检查文档，如果失败，请检查框架的公共类接口：是否有任何方法可以设置显示？我们可以检查网格、演员，也许还有其他人使用或使用这些。

尽管 OP 说了什么，但有一个明确的声明（@Andrew Thompson 所说的）解决了这个要求：

“渲染算法如下：

1.  检查是否有一个类，其名称是添加后缀Display的类名，并且实现了info.gridworld.gui。显示界面。如果是，则调用它的 draw 方法。这与 MBS 案例研究中使用的机制相同。（如果你决定提供这样一个类，你应该扩展自动处理缩放和旋转的便利类 info.gridworld.gui.AbstractDisplay。）"

这是这个问题所需要的。

有几个“学习”。

1.  如果您正在阅读看起来相关的文档（在这种情况下，它提到了显示界面），并且您不理解它，那么请调查它直到您理解为止。

2.  如果您对问题解决方案的想法遇到了障碍，请在投入过多精力之前返回重新评估引导您到达那里的路径中的分支。

3.  你的老师（在如此低水平的科目中）不会设置不可能的任务（除非他们做了一个巨大的填充物）。所以 2\. 适用。

4.  这与调试有关：我们最难的错误来自我们不知道自己做出的假设。我们可能是出于懒惰的想法或无知。因此，重新思考并了解所涉及的技术和技术。在尝试更改之前了解正在发生的事情。

# perl - 如何使用 perl 在质量中心的测试实验室中创建文件夹

> ID：14596972
> 
> 赞同：0
> 
> 时间：2013-01-30T04:57:26.483
> 
> 标签：perl

有没有办法使用 Perl 在质量中心的测试实验室中创建文件夹和/或测试集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:05:59.417

mkdir command=使用 MODE 指定的模式创建一个名称和路径为 EXPR 的文件夹，为清楚起见，应以八进制值提供。例子

```
#!/usr/bin/perl -w

$dirname ="/tmp/testdir";

mkdir $dirname, 0755; 
```

# windows-phone-7 - 如何降级 Windows Phone 8 应用程序？

> ID：14596973
> 
> 赞同：3
> 
> 时间：2013-01-30T04:57:39.060
> 
> 标签：windows-phone-7, windows-phone-8

我最初为 WP7 制作了一个应用程序，然后不久后决定对 UI 和代码进行彻底检查，这是 WP8 出来的时候，所以我删除了旧应用程序并制作了一个专门针对最新平台的新应用程序，但是我现在想要将其“移植”回来以针对旧受众。

我已经进行了几次尝试，但这似乎是一项乏味的任务，有没有简单的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:59:08.710

根据上述答案，没有自动恢复项目的方法；但是，我通常将尽可能多的逻辑分离到一个 Windows Phone 类库中，该类库可由 Windows Phone 7 和 8 项目共享。所以我的建议是将你能做的（虚拟机、服务等）复制到一个单独的类项目中，设置一个新的 Windows Phone 7 项目，并引入你的 WP8 视图并删除任何不兼容的位，例如新的地图控件和引用两个平台之间的共享库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:37:28.227

不，很遗憾，您不能将 windows phone 8 项目降级到 windows phone 7。您只能将 windows phone 7 项目升级到 windows phone 8。

# java - Google 应用引擎中对 Gmail 的全域授权

> ID：14596975
> 
> 赞同：1
> 
> 时间：2013-01-30T04:57:46.973
> 
> 标签：java, google-app-engine

我们可以在使用 Java 的 Google 应用引擎中对 Gmail 使用域范围的授权吗？

[http://code.google.com/p/java-gmail-imap/wiki/GmailAndXOAUTH2](http://code.google.com/p/java-gmail-imap/wiki/GmailAndXOAUTH2)

# file-upload - 使用 InputStream 上传到 Amazon S3 时出现请求超时错误

> ID：14596976
> 
> 赞同：1
> 
> 时间：2013-01-30T04:57:53.537
> 
> 标签：file-upload, amazon-s3

我正在尝试使用 InputStream 在 AMazon S3 上上传文件，我的代码如下，我收到请求超时错误，文件的大小非常小，大约 1 MB。

```
ObjectMetadata metadata = new ObjectMetadata();
Long contentLength = Long.valueOf(IOUtils.toByteArray(fis).length);
metadata.setContentLength(contentLength);
try {

    s3Handler.putObject(new PutObjectRequest(bucketName, s3key, fis,metadata));
} catch (AmazonServiceException ase) {
    s3ExceptionHandler.processAmazonServiceException(ase);
} catch (AmazonClientException ace) {
    s3ExceptionHandler.processAmazonClientException(ace);
} 
```

请求超时： -

```
Your socket connection to the server was not read from or written to within the timeout period. Idle connections will be closed.
Jan 30, 2013 10:15:42 AM javacode.S3ExceptionHandler processAmazonServiceException
SEVERE: HTTP Status Code: 400
Jan 30, 2013 10:15:42 AM javacode.S3ExceptionHandler processAmazonServiceException
SEVERE: AWS Error Code:   RequestTimeout 
```

当我使用文件而不是它时它工作正常，`inputstream`但问题是我只有`inputStream`对象可用。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T15:33:28.220

看这个：[亚马逊 s3 上传文件超时](https://stackoverflow.com/questions/12774909/amazon-s3-upload-file-time-out)

之后重置您的连接：

Long contentLength = Long.valueOf(IOUtils.toByteArray(fis).length);

fis.reset();

s3Handler.putObject(new PutObjectRequest(bucketName, s3key, fis,metadata));

这个对我有用

# font-face - 实际 Kindle Fire 上的字体渲染，但不是在线 KDP Kindle Previewer

> ID：14596977
> 
> 赞同：2
> 
> 时间：2013-01-30T04:57:54.143
> 
> 标签：font-face, media-queries, epub, kindle-fire

我为 KF8 加载了一个字体，它完美地显示在桌面预览器和我的物理 Kindle Fire 上。但是，当我将它加载到 KDP 在线预览器上时，它会完全忽略字体并使用默认字体设置。

这发生在任何人身上吗？您是否可以在在线预览器上呈现“安全”的 KF8 字体？Tangerine 是一种谷歌网络字体，只能作为 ttf 使用，但我已将其转换为 otf 和 woff，并尝试过，但无济于事。我需要这本诗集的脚本字体。

是否会有针对在线预览器的媒体查询？

此外，在线预览器上的错误字体（默认 Kindle 字体）是否会显示在 Look Inside 预览中？

我的 CSS：

```
@font-face { 
    font-family: "Tangerine_Bold.ttf";
    src: url("Tangerine_Bold.ttf");
} 
```

amzn-kf8 媒体查询中的更多 CSS：

```
.section {
    font-size: 2.3em;
    font-family: "Tangerine_Bold.ttf", serif;
} 
```

OPF：

```
<item id="font2" href="Tangerine_Bold.ttf" media-type="application/x-font-ttf"/> 
```

我也尝试过将它作为 font/ttf 并且效果很好，也是。

字体在实际的 Kindle 上看起来很棒。请帮忙！艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:50:05.757

Kindle 预览器，无论是在线应用程序还是独立应用程序，都不能保证完全忠实地复制每台设备上发生的情况。实际上，我在使用 Nook 网络预览器时也遇到了同样的问题（人们在购买前也可以使用它来查看书籍样本）；它不显示基于数据 URI 的图像（而是显示一个破碎的 GIF 图标）。无论如何，您为什么担心 KDP 预览器不显示您的字体？

# mongodb - 如何使用mongodb备份和恢复所有数据库？

> ID：14596979
> 
> 赞同：5
> 
> 时间：2013-01-30T04:57:57.670
> 
> 标签：mongodb, backup, mongodump, mongorestore, database

如果我想对**mongodb 中的所有数据库进行通用备份，**我所要做的就是：

```
$ mongodump 
```

如果我想恢复我创建的最新转储，我需要做的就是：

```
$ mongorestore 
```

*   **mongodump 的备份存储在哪里？**
*   **如何为要还原的所有数据库指定特定转储？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T09:06:11.683

备份存储在您在命令行中使用 --out 选项指定的目录中。如果您不指定任何输出目录，备份将被放置到 ./dump 目录。使用 mongorestore，您必须将之前转储的目录指定为命令行参数。

在分片环境中，如果您通过 mongos 使用 mongodump，备份将被展平。恢复后，您将不得不重新分片集合。所以恢复并不总是毫不费力。请参阅文档： [http ://docs.mongodb.org/manual/tutorial/backup-small-sharded-cluster-with-mongodump/](http://docs.mongodb.org/manual/tutorial/backup-small-sharded-cluster-with-mongodump/)

您也可以直接转储 db 文件夹，检查 cli 选项。

对于分片集群，您可以在此处检查可能性：http: [//docs.mongodb.org/manual/administration/backups/#sharded-cluster-backups](http://docs.mongodb.org/manual/administration/backups/#sharded-cluster-backups)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-07T18:19:09.207

恢复所有 mongorestore --host= --port= --username= --authenticationDatabase= --nsInclude " *.* "

备份所有 mongodump --ssl --host --port -p --authenticationDatabase -u -p --out

如果要备份数据库，请使用： mongodump --ssl --host --port -p --authenticationDatabase -u -p --out

如果数据库启用了 ssl，则包括 --ssl 标志如果不包括 --out mongodump 将创建一个“/dump”目录。在转储或指定的备份目录中，您会找到带有数据库名称的目录，在每个目录中，您会找到备份文件，对于每个集合，您会找到一个“.bson”和一个“.metadata.xml”。 json"

要恢复所有数据库，请使用： mongorestore --ssl --host= --port= --username= --authenticationDatabase= --nsInclude " *.* "

同样，如果数据库启用了 ssl，则包括 --ssl 标志，如果不只是删除它。“--nsInclude”标志告诉 mongorestore 您要恢复哪些数据库或集合。示例：--nsInclude=test.users（这将备份数据库测试的用户集合，因此如果转储的路径不是该特定数据库的 users.bson 的路径，则会失败）

要包含所有数据库和所有集合，请使用 --nsInclude= *。*或 --nsInclude *。* 然后定义备份的所有收集目录的路径

# sql - SQL 子查询的运行速度比任何一个查询本身都慢

> ID：14596983
> 
> 赞同：1
> 
> 时间：2013-01-30T04:58:10.870
> 
> 标签：sql, phpmyadmin, subquery, average

当从 PHPMyAdmin 执行时，我有两个查询可以在几秒钟内自行运行得相当快。

```
SELECT * FROM `testresults` WHERE `SCH_NAME` <> ''

SELECT AVG(pass_rate) FROM `testresults` WHERE `SCH_NAME` <> '' 
```

但是，当我将第二个查询用作子查询时，查询运行速度很慢，以至于我达到了最大执行时间而什么也得不到。

```
SELECT 
      * 
FROM `testresults` 
WHERE pass_rate > (SELECT 
                      AVG(pass_rate) 
                   FROM `testresults` 
                     WHERE `SCH_NAME` <> ''
                  ) 
 AND `SCH_NAME` <> '' 
```

似乎正在为每一行执行子查询，尽管该平均值是恒定的。我的查询中是否有一些不正确的地方导致它被解释为每行的平均变化？怎么可能改写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:02:57.410

尝试子查询。未经测试，但像这样：

```
SELECT * FROM 
    `testresults` as tr , 
    (select avg(pass_rate) as passrate from testresults) as tr2
WHERE tr.`SCH_NAME` <> ''
and   tr.passrate > tr2.passrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:27:28.663

您的表中似乎有很多记录 sch_name 为空白，即`SCH_NAME=''`

尝试更改外部选择查询的 WHERE 子句中的条件位置。从左到右评估条件。

```
SELECT 
      * 
FROM `testresults` 
WHERE `SCH_NAME` <> '' AND pass_rate > (SELECT 
                                         AVG(pass_rate) 
                                        FROM `testresults` 
                                        WHERE `SCH_NAME` <> ''
                                      ) 
```

如果有记录`SCH_NAME=''`，则不会评估子查询，即使用**AND**运算符时，如果第一个条件评估为 false，则不评估第二个条件。这称为[短路](http://www.gailer-net.de/tutorials/java/Notes/chap40/ch40_2.html)。

更好的方法是评估 AVG(pass_rate) 一次，将结果存储在一个变量中，并在 where 条件而不是子查询中使用这个变量。

```
 Declare @var int
    SET @var = (SELECT  AVG(pass_rate) 
               FROM `testresults` 
               WHERE `SCH_NAME` <> '')

     SELECT 
              * 
        FROM `testresults` 
        WHERE `SCH_NAME` <> '' AND pass_rate >@var 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:09:37.323

这适用于 Transact SQL：

```
 select
    testresults.*
   from
    testresults
       inner join 
         (
              select 
                  AVG(pass_rate) as calculated_avg 
              from testresults 
               where sch_name <> ''
         ) p 
           on (testresults.pass_rate > p.calculated_avg)
    where sch_name <> '' 
```

# perl - 在 Perl 中查找内容与字符串模式不匹配的文件

> ID：14596986
> 
> 赞同：0
> 
> 时间：2013-01-30T04:58:32.550
> 
> 标签：perl

我正在编写代码来查找不包含字符串模式的文件。如果我有一个文件列表，我必须查看每个文件的内容，如果文件中没有出现字符串模式“clean”，我想获取文件名。请帮忙。

这是场景：我有一个文件列表，每个文件里面都有很多行。如果文件是干净的，它将有“干净”的措辞。但是如果文件是脏的，“干净”的措辞就不存在，也没有明确的指示来告诉文件是脏的。所以只要在每个文件中，如果没有检测到“干净”的措辞，我会将其归类为脏文件，我想跟踪文件名

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:23:18.407

您可以使用简单的单线：

```
perl -0777 -nlwE 'say $ARGV if !/clean/i' *.txt 
```

用 slurping 文件`-0777`，对整个文件进行正则表达式检查。如果没有找到匹配，我们打印文件名。

对于不支持的低于 5.10 的 perl 版本，`-E`您可以`-E`用`-e`和`say $ARGV`替换`print "$ARGV"`。

```
perl -0777 -nlwe 'print "$ARGV\n" if !/clean/i' *.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:59:16.850

如果您需要在 Perl 中生成列表，该[`File::Finder`](https://metacpan.org/module/File%3a%3aFinder)模块将使生活变得轻松。

未经测试，但应该可以工作：

```
use File::Finder;

my @wanted = File::Finder              # finds all         ..
              ->type( 'f' )            # .. files          ..
              ->name( '*.txt' )        # .. ending in .txt ..
              ->in( '.' )              # .. in current dir ..
              ->not                    # .. that do not    ..
              ->contains( qr/clean/ ); # .. contain "clean"

print $_, "\n" for @wanted; 
```

整洁的东西！

编辑：

现在我对问题有了更清晰的了解，我认为这里不需要任何模块：

```
use strict;
use warnings;

my @files = glob '*.txt';  # Dirty & clean laundry

my @dirty;

foreach my $file ( @files ) {     # For each file ...

    local $/ = undef;             # Slurps the file in
    open my $fh, $file or die $!;

    unless ( <$fh> =~ /clean/ ) { # if the file isn't clean ..
        push @dirty, $file;       # .. it's dirty
    }

    close $fh;
}

print $_, "\n" for @dirty;        # Dirty laundry list 
```

* * *

一旦你掌握了机制，这可以简化为 la[`grep`](http://perldoc.perl.org/functions/grep.html)等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:12:37.410

```
#!/usr/bin/perl

use strict;
use warnings;

open(FILE,"<file_list_file>");
while(<FILE>)
{
my $flag=0;
my $filename=$_;
open(TMPFILE,"$_");
        while(<TMPFILE>)
        {
         $flag=1 if(/<your_string>/);
        }
    close(TMPFILE);
    if(!$flag)
        {
        print $filename;
        }
}
close(FILE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T06:17:24.627

像这样的一种方式：

```
ls *.txt | grep -v "$(grep -l clean *.txt)" 
```

# android - 如何调用另一个项目中的活动？

> ID：14596999
> 
> 赞同：5
> 
> 时间：2013-01-30T04:59:54.863
> 
> 标签：android, android-activity

嗨，我是 android 新手，我创建了 2 个项目。

现在，我想通过单击按钮从第一个项目中调用第二个项目中的活动。

第一个项目仅处理登录屏幕，当我单击登录按钮时，我需要调用第二个项目中存在的活动。

我搜索了网络，但没有找到任何我理解正确的教程。

嗨，我发现了以下错误。

```
01-30 08:36:47.230: E/dalvikvm(3408): Could not find class 'com.androidhive.googleplacesandmaps.MainActivity', referenced from method org.fluturasymphony.recommendation.LoginActivity$DownloadWebPageTask.doInBackground
01-30 08:36:52.587: E/AndroidRuntime(3408): FATAL EXCEPTION: AsyncTask #1
01-30 08:36:52.587: E/AndroidRuntime(3408): java.lang.RuntimeException: An error occured while executing doInBackground()
01-30 08:36:52.587: E/AndroidRuntime(3408):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.lang.Thread.run(Thread.java:856)
01-30 08:36:52.587: E/AndroidRuntime(3408): Caused by: java.lang.NoClassDefFoundError: com.androidhive.googleplacesandmaps.MainActivity
01-30 08:36:52.587: E/AndroidRuntime(3408):     at org.fluturasymphony.recommendation.LoginActivity$DownloadWebPageTask.doInBackground(LoginActivity.java:69)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at org.fluturasymphony.recommendation.LoginActivity$DownloadWebPageTask.doInBackground(LoginActivity.java:1)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-30 08:36:52.587: E/AndroidRuntime(3408):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-30 08:36:52.587: E/AndroidRuntime(3408):     ... 3 more 
```

我已将清单声明为这样。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.fluturasymphony.recommendation"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="9"
              android:targetSdkVersion="11" />
    <uses-permission android:name="android.permission.INTERNET" />    
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <activity android:label="@string/app_name" android:name=".LoginActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="org.achartengine.GraphicalActivity" />
        <activity android:name=".CategoryWiseSalesChartActivity" />
        <activity android:name=".ProductWiseSalesChartActivity" />
        <activity android:name="com.androidhive.googleplacesandmaps.MainActivity"/>
        <activity android:label="@string/home_screen" android:name=".HomeActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/store_screen" android:name=".StoreActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/store_list_screen" android:name=".StoreListActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/location_screen" android:name=".StoreMapActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/recommended_products_list_screen" android:name=".RecommendedProductsListActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/category_wise_sales_screen" android:name=".CategoryWiseSalesActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/product_wise_sales_screen" android:name=".ProductWiseSalesActivity" android:configChanges="orientation">            
        </activity>
                <uses-library android:name="com.google.android.maps" />

    </application>

</manifest> 
```

我正在像这样调用第二堂课的活动。

```
Intent loginintent = new Intent("com.androidhive.googleplacesandmaps.MainActivity");
                        startActivity(loginintent); 
```

这是正确的吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:06:00.693

根据Android，您可以通过制作项目[库](http://developer.android.com/tools/projects/projects-eclipse.html)来处理这个问题，然后在清单文件中定义它并以您想要的任何方式调用它

为了解释我按照我的要求做了这个你想在按钮上调用的活动单击在清单中定义它及其完整的包名称然后当你在按钮上调用它时单击新项目的活动将触发示例执行这是在`manifest`你的第一个项目的文件中定义这样的东西

```
<activity 
        android:name="packagefull.activityname"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

    </activity> 
```

在包名称中定义您要调用的活动的完整路径，并在包名称之后给出活动的名称希望这对您有用，因为这对我来说非常完美

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:22:21.037

用这个：

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.setComponent(new ComponentName("app package name", "app launch activity's classname"));
i.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T05:16:08.723

这确实不是开发任何应用程序的好方法。但是，如果您想实现这一点，您将必须在该应用程序的 Manifest 文件中为目标活动声明一个[意图过滤器](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)，并将其用作登录活动的隐含意图。

项目 A 的清单内部：

```
<activity android:name="com.example.android.TargetActivity">
             <intent-filter>
                <action android:name="com.someone.wants.to.call.me"></action>
            </intent-filter>
</activity> 
```

内部项目 B 的活动：

```
Intent intent = new Intent("com.someone.wants.to.call.me");
         startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:13:16.843

1.  在地图项目的 AndroidManifest 文件中添加您的自定义意图过滤器

    ```
     <!-- add custom action -->
     <activity android:name="MapActivity"
                android:label="@string/mapLabel"
            >
                <intent-filter>
                    <action android:name="com.example.map.show" />
                </intent-filter>
            </activity> 
    ```

2.  从登录按钮调用这个活动是这样的：

Intent intent = new Intent("com.example.map.show"); 开始活动（意图）；

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-30T05:03:49.400

您应该为每个应用程序使用一个项目。如果您想将您的登录与应用程序的其余部分分开，您可以使用不同的包。除非我误解了您所说的“项目”是什么意思？