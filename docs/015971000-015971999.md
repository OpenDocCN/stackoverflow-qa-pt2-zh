# StackOverflow 问答 15971000-15971999

# jquery - 没有模型的田地的铁轨

> ID：15971007
> 
> 赞同：0
> 
> 时间：2013-04-12T12:06:27.677
> 
> 标签：jquery, ruby-on-rails, forms

我有一个用于创建新用户的表单。

_ **form.html.erb**

```
<%= form_for(@practice) do |f| %>
   <div class="field">
     <b>Name:   </b>
     <%= f.text_field :name %>
   </div>
   <%= f.submit :class => "btn btn-primary" %>
<% end %> 
```

现在我想再次添加一个像名称这样的字段。但是现在您不应该编辑内容，而是选择三个单选按钮之一，这将通过 jquery 更改值。

如何在没有模型的情况下向此表单添加字段，并更改 text_field 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:13:09.363

```
<%= form_for(:controller, url:controller_path) do |f| %>
   <div class="field">
     <%= f.label :name %>
     <%= f.text_field :name %>
   </div>
   <%= f.submit :class => "btn btn-primary" %>
<% end %> 
```

# bash - 具有固定数量字段的 awk 解析

> ID：15971009
> 
> 赞同：0
> 
> 时间：2013-04-12T12:06:31.863
> 
> 标签：bash, awk

寻找使用 awk 记录解析的解决方案，其中，其中也可以是`/n`字符。记录用 分隔`|`。问题是当达到一定数量的字段时可以确定新行。如何在 awk 中做到这一点？

例子：

```
2013-03-24 15:49:40.575175 EST|aaa|tsi|p1753|th2056569632|172.30.10.212|56809|2013-03-24 15:49:32 AFT|10354453|con2326|cmd7|seg-1||dx318412|x10354453|sx1|LOG: |00000|statement: SET DATESTYLE = "ISO"; Select * 
from bb 
where cc='1'||||||SET DATESTYLE = "ISO"; Select * from bb where cc='1'|0||postgres.c|1447|
2013-04-10 12:45:48.277080 EST|aa|tsi|p22814|th1093698336|172.30.0.186|3304|2013-04-10 12:44:29 AFT|10400046|con67|cmd5|seg-1||dx341|x10400046|sx1|LOG: |00000|statement: create table xx as (select r.xx,sum(r."XX"),c.dd from region_RR r, cat_CC c
where r.aa=c.vv
group by 1)||||||create table xx as (select r.xx,sum(r."XX"),c.dd from region_RR r, cat_CC c
where r.aa=c.vv
group by 1)
|0||postgres.c|1447| 
```

是一个记录，它有很多`\n`字符。我需要用 awk 解析并从中获取例如第 5 个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:32:44.760

从上面 sudo_O 的答案中汲取灵感...将变量 FIELD_TO_PRINT 设置为感兴趣的字段位置，将另一个变量 FIELDS_PER_RECORD 设置为表示记录的字段数。`GNU awk`在 Ubuntu 上测试

```
awk   -v FIELDS_PER_RECORD=10 -v FIELD_TO_PRINT=5 'BEGIN{FS="|"; RS="\0"}\
{for (i=1; i<=NF; ++i) {if (i % FIELDS_PER_RECORD == FIELD_TO_PRINT) {print $i} }}' file_name.txt
th2056569632
x10354453
SET DATESTYLE = "ISO"; Select * from bb where cc='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:12:27.780

对于文件中的一条记录，您不能将记录分隔符设置为空字符`RS='\0'`，以便将输入文件作为一条完整记录读取：

```
$ awk '{print $5}' FS='|' RS='\0' file
th2056569632 
```

对于多条记录，您可以将其`date`用作记录分隔符*（除非它们已经用空行分隔，这会使事情变得更简单，或者除非您在输出中需要此字段）*：

```
$ awk 'NR>1{print $5}' FS='|' RS='(^|[^|])[0-9]{4}-[0-9]{2}-[0-9]{2} ' file
th2056569632
th1093698336 
```

* * *

更简单的`grep -o 'th[0-9]*' file` 是否适合这里？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:42:27.363

显然，这不是您所要求的：为了比较，这就是我在 python 中的做法：

```
from cStringIO import StringIO

def records_from_file(f,separator='|',field_count=30):
  record = []
  for line in f:
    fields = line.split(separator)
    if len(record) > 0:
      # Merge last of existing with first of new
      record[-1] += fields[0]
      # Extend rest of fields
      record.extend(fields[1:])
    else:
      record.extend(fields)
    if len(record) > field_count:
      raise Exception("Concatenating records overflowed number of fields",record)
    elif len(record) == field_count:
      yield record
      record = []

sample = """2013-03-24 15:49:40.575175 EST|aaa|tsi|p1753|th2056569632|172.30.10.212|56809|2013-03-24 15:49:32 AFT|10354453|con2326|cmd7|seg-1||dx318412|x10354453|sx1|LOG: |00000|statement: SET DATESTYLE = "ISO"; Select * 
from bb 
where cc='1'||||||SET DATESTYLE = "ISO"; Select * from bb where cc='1'|0||postgres.c|1447|
2013-04-10 12:45:48.277080 EST|aa|tsi|p22814|th1093698336|172.30.0.186|3304|2013-04-10 12:44:29 AFT|10400046|con67|cmd5|seg-1||dx341|x10400046|sx1|LOG: |00000|statement: create table xx as (select r.xx,sum(r."XX"),c.dd from region_RR r, cat_CC c
where r.aa=c.vv
group by 1)||||||create table xx as (select r.xx,sum(r."XX"),c.dd from region_RR r, cat_CC c
where r.aa=c.vv
group by 1)
|0||postgres.c|1447|"""

for record in records_from_file(StringIO(sample)):
  print record[4] 
```

产量：

```
th2056569632
th1093698336 
```

# android - Asyntask 下载和保存图像导致 ANR

> ID：15971011
> 
> 赞同：0
> 
> 时间：2013-04-12T12:06:37.743
> 
> 标签：android, android-asynctask

我已经实现了一个 Asyntask，我正在尝试使用它来下载图像并将其保存到手机的 sdcard 中。OnPostExecute 我再次调用 asyntask，这一直持续。但是大约一个小时后，应用程序开始说 ANR ，我应该如何处理这个场景。

```
 public class DownloadSavePics extends AsyncTask<Void, Void, String> {
        Context context;
        String Tag = "DownloadSavePics";
        String res;
        QVSEngine qvsEngine;
        String IID; 
        String url1 = "";
        String deviceId ="";
        String FileName ="";

        /*
         * Pass all data required to log in and handle the result here.
         */

        public DownloadSavePics(Context context,String url1,String deviceId) {
            this.context = context;
            this.deviceId = deviceId;
            this.url1 = url1;
            qvsEngine = new QVSEngine(context,null);        
        }

        @Override
        protected void onPreExecute() { 
            Log.i(Tag, "inside pre execute");
        }

        /*
         * Do all the network IO and time-consuming parsing in here, this method
         * will be invoked in its own thread, not blocking the UI.
         */

        protected String doInBackground(Void... params) {
            /*
             * the background thread calls the method CallService 
             * 
             */
            if (qvsEngine.checkInternetConnection()){   
                CallService();  
            }
            return FileName;        
        }

        public void CallService (){
            /*
             *  downloading the file
             */
            try {
                if(qvsEngine.checkInternetConnection()){
                    /*
                     * requested for connection so set the led1 as amber 
                     */
                    try {
                        URL imgURL = new URL(url1);
                        Log.e(Tag,"Downloading from hotspot "+url1);
                        URLConnection ucon = imgURL.openConnection();
                        InputStream is = ucon.getInputStream();
                        BufferedInputStream bis = new BufferedInputStream(is);
                        ByteArrayBuffer baf = new ByteArrayBuffer(50);
                        int current = 0;                    
                        while ((current = bis.read()) != -1) {
                            baf.append((byte) current);
                        }
/*saving the file in the sdcard
*/                                  
                        String FileName = deviceId.trim()+".jpg";                   
                        String path = Environment.getExternalStorageDirectory().toString()+"/school/snaps/"+FileName;;
                        FileOutputStream fos = new FileOutputStream(path);
                        fos.write(baf.toByteArray());
                        fos.close();                                    
                    }catch(Exception e){
                        Log.e(Tag,""+e);
                    } 
                }
            }catch(Exception e){
                Log.e(Tag,""+e);
            }
        }

        @Override
        protected void onPostExecute(String result) {
            try {
                qvsEngine.database.RunQuery("insert into webcam values (null,'"+FileName+"','0')");
                Log.e(Tag,"webcame table has :  "+ qvsEngine.RunQuery("select count(imgid) from webcam where path ='"+FileName+"'") );      
            }catch(Exception e){
                Log.e(Tag,""+e);
            }   
            new DownloadSavePics(context,url1,deviceId).execute();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:13:00.267

是的，您将收到“应用程序无响应”，因为

你在打电话

```
 new DownloadSavePics(context,url1,deviceId).execute(); 
```

in `onPostExecute`，所以它会`DownloadSavePics`再次执行，当到达 onPostExecute 时，它​​将再次收到一个调用....所以没有结束。

连续`DownlaodSavePics`呼叫导致`ANR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:19:21.710

尝试通过 runOnUIThread() 从 Runnable 执行新实例。如果没有帮助，请发布日志。

这里有一个想法：也许你的任务下载数据***失败***（例如 WiFi 已经坏了），*然后*你生成了一个无限循环的即时执行任务。尝试添加 sleep(500) （在工作线程中），看看这是否有帮助。

# c++ - 使用基类函数指针访问派生类成员函数

> ID：15971013
> 
> 赞同：3
> 
> 时间：2013-04-12T12:06:51.567
> 
> 标签：c++, visual-c++, visual-studio-2005

我在我的项目中使用函数指针，面临问题，创建了一个测试用例来显示它......下面的代码在 MSVC2005 上失败并出现以下错误（简单来说，我想通过基类函数指针访问派生类函数）

> 错误 C2440：“=”：无法从“void (__thiscall ClassB::*)(void)”转换为“ClassAFoo”

```
class ClassA {
 public: 
    virtual void foo() 
    {
       printf("Foo Parent"); 
    }
};

typedef void (ClassA::*ClassAFoo)();

class ClassB : public ClassA {
 public:
    virtual void foo() 
    { 
        printf("Foo Derived"); 
    }
};

int main() {
    ClassAFoo fPtr;
    fPtr = &ClassB::foo;
} 
```

我的问题是

1.  我无法通过基类函数指针访问派生类函数还是它的编译器错误是 C++ 行为吗？
2.  我一直在玩上面的案例，如果我注释掉`ClassB::foo`，这段代码编译正常，没有任何进一步的修改，为什么会这样，应该不会`fPtr = &ClassB::foo;`再次导致编译时错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:14:56.383

1.  这是正确的行为。可以这样想：所有的实例`ClassB`都有成员`ClassA::foo`，但不是所有的实例`ClassA`都有成员`ClassB::foo`；只有那些`ClassA`实际上是实例的基类子对象的`ClassB`实例才有它。因此，分配给`ClassB::foo`“纯”对象`ClassAFoo`然后结合使用将尝试调用不存在的函数。`ClassAFoo``ClassA`

2.  如果从 中删除`foo`，`ClassB`表达式实际上是`ClassB::foo`指在`ClassA::foo`中继承的`ClassB`，所以那里没有问题。

详细说明 1\. 进一步：指向成员的指针实际上与普通指针的工作方式相反。使用普通指针，您可以分配`ClassB*`到`ClassA*`（因为所有实例`ClassB`也是 的实例`ClassA`），但反之则不然。使用成员指针，您可以分配`ClassA::*`到`ClassB::*`（因为`ClassB`包含 的所有成员`ClassA`），但反之则不行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T12:14:50.013

好的，可以。您不能分配给 的函数指针的`class A`函数指针`class B`。你可以这样做

```
fPtr = &ClassA::foo;
ClassB b;
classA* a = &b;
(a->*fPtr)(); 
```

并且`ClassB`将调用函数中的覆盖。

当 中没有函数`foo`时`ClassB`，`ClassA`将使用 of 函数。[活生生的例子](http://liveworkspace.org/code/3beJS5%2412)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-21T07:51:39.330

首先，我不是 C++ 专家（我正在努力学习 C++ 这么深）。如果我错了，请纠正我，这是一个实验。

作为学习成员函数指针的一部分，我还在搜索代码示例以使用基成员函数指针调用派生成员。通过这个线程后，我创建了一个代码示例，即使成员函数不是虚拟的，它也能够调用派生成员函数。

我正在使用委托人充当调用者。我希望它可能对某人有所帮助。（纠正我如果我做错了什么）

```
class AbstractBase
{
protected:
    AbstractBase()
    {};

    virtual ~AbstractBase()
    {};

public:
    //Place holder method
    void SimpleMethod(void)
    {
        printf_s("\nAbstractBase::SimpleMethod");
    };
};

class Derived : public AbstractBase
{
public:
    //This overridden but not virtual.
    void SimpleMethod(void)
    {
        printf_s("Derived::SimpleMethod");
    };
};

typedef void (AbstractBase::*SimpleMethodCallback)();

class Delegator
{
private:
    AbstractBase * pbasePtr;
    SimpleMethodCallback pCallback;

public:
    Delegator()
    {
        this->pbasePtr = nullptr;
        this->pCallback = nullptr;
    };

    void RegisterCallback(AbstractBase * pbasePtr, SimpleMethodCallback callback)
    {
        if (pbasePtr == nullptr || callback == nullptr)
            throw "Delegate target or callback cannot be null";

        this->pbasePtr = pbasePtr;
        this->pCallback = callback;
    };

    void Invoke()
    {
        if (this->pbasePtr == nullptr || this->pCallback == nullptr)
            throw "Inoke cannot be performed on null target or callback";
        (pbasePtr->*pCallback)();
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    Delegator delegate;
    delegate.RegisterCallback(new Derived(), reinterpret_cast<SimpleMethodCallback>(&Derived::SimpleMethod));

    delegate.Invoke();

    return 0;
} 
```

输出：

delegate.Invoke() 将调用 Derived::SimpleMethod() 并且输出将是“Derived::SimpleMethod”**

# postgresql - 在非常大的表上运行 AUTO_VACUUM（以防止回绕）的问题

> ID：15971015
> 
> 赞同：3
> 
> 时间：2013-04-12T12:06:53.270
> 
> 标签：postgresql, pgadmin, postgresql-8.3

我遇到了问题，需要一些建议。我通常是一名开发人员，但是由于最近我公司的人员变动，我现在是唯一的 IT 人员，所以我不得不涉足许多未知领域并且确实需要一些帮助。

我们正在运行 postgres 8.3。数据库正在尝试在大型对象表 (pg_catalog.pg_large_object) 上运行 AUTO_VACUUM 以防止事务 ID 回绕。我想我理解这意味着什么的基础知识。问题是，这张表是 750G，有 4.52 亿行。AUTO_VACUUM 大量写入磁盘，占用了磁盘空间（昨天它消耗了我们最后 250GB 的 1TB）。紧急中断后，我们以 1100GB 的空间和 100GB 的可用空间恢复运行。然而，一旦 postgres 重新启动并运行，它就会再次启动 AUTO_VACUUM 进程。如果我终止交易（我确定不推荐这样做），它就会重新启动。

所以这是我的问题：

1) 对于该表，完成 AUTO_VACUUM 进程需要多少空间？我如何确定这一点？

2) 有没有更好的方法来配置服务器来处理这种情况，以便在需要时不需要大量的磁盘空间？

3）如果不是 2，你建议如何解决这个问题？

我不是 DBA，也没有 linux 服务器管理经验，只是一个被要求身兼数职的开发人员。我正试图让 DBA 顾问帮助解决问题，但该公司正在回击。尽管我尽了最大努力，但他们似乎并不了解问题的严重性。

建议？注释？您可以提供的任何建议或指导将不胜感激。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:12:22.090

如果您不尽快解决此问题，您的数据库将进入紧急关闭状态以防止数据损坏并**拒绝启​​动备份，**直到 txid 环绕 vaccuum 完成。检查日志以查看您离这一点有多近，您将看到如下消息：

```
WARNING:  database "mydb" must be vacuumed within 177009986 transactions 
HINT:  To avoid a database shutdown, execute a database-wide VACUUM in "mydb". 
```

不要只是杀死真空并将问题搁置。你真的，真的需要解决这个问题，除非你能承受一些计划外的停机时间。

它消耗大量磁盘空间的原因可能是您使用的旧版本没有自动管理的 freespacemap 设置，并且您可能已经超过`max_fsm_pages`和/或`max_fsm_relations`. 检查日志，您可能会看到有关这些的消息。

不幸的是，您不能在事后仅仅提高这些参数。这个旧的 PostgreSQL 安装已经失去了关于表中哪些空间是空闲的知识。正确的清理和恢复将需要一个`CLUSTER`表，它至少需要与表+索引大小一样多的可用空间，并且*需要在运行期间对表进行排他锁*。

既然您正在接近强制 txid 环绕预防，那么大多数侵入性较小的缓解选项（例如`pg_reorg`）不再对您开放。您最好的选择很可能是为 autovacuum 提供完成工作所需的空间 - 或者处理停机时间，`CLUSTER`然后`VACUUM FREEZE`处理表格以更快地完成该过程。

一旦你恢复了，我会建议大大增加`max_fsm_pages`并确保`max_fsm_relations`足够大。搜索这些旧版本的许多调整建议。

计划升级到 9.2，它会自动管理自由空间地图（就像任何 8.4+ 版本一样）并具有各种 autovac 增强功能，以帮助您首先阻止您进入这些泡菜。

如果这种情况非常危急，请考虑与[专业的 PostgreSQL 支持提供商](http://www.postgresql.org/support/professional_support/)联系。（正确披露：我为 2ndQuadrant 工作，这是列出的提供商之一）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:28:16.493

FreeNode 的#postgresql (IRC) 的实时支持令人惊叹。经常有知识渊博的人醒着，可以谈论 DBA/开发细节。我不能推荐它。

# ruby-on-rails - Rails 在视图呈现后登录用户

> ID：15971019
> 
> 赞同：0
> 
> 时间：2013-04-12T12:06:59.380
> 
> 标签：ruby-on-rails, ruby, view, devise

我有一个应用视图（索引页面），如果用户从该视图应用，用户可以留下他的凭据，将生成一个帐户，用户将登录。将显示一个概述页面（创建页面）

但是，如果他已经登录并应用了“我们已将您的密码发送到...”这句话，则无法在我的视图中显示。

所以我做了以下几点：

```
 <% unless user_signed_in? %> 
    <div class="row">
      <div class="three columns">
        <strong><%= t("apply.create.labels.password") %></strong>:
      </div>
      <div class="nine columns">
        <%= t("apply.create.labels.emailed_password_html", :link => mail_to(@user.personal_info.e_mail))%>
        <%= link_to(t("apply.create.labels.choose_password"), user_profile_path) %>
      </div>
    </div>
    <!-- Try to Sign in User -->
    <% priv_sign_in %>
   <% end %> 
```

这段代码是因为。如果用户申请，则@user 信息已填写，但只有在生成这部分视图后才能登录。

在我的 applycontroller create 中，我有以下要做的 priv_sign_in：

```
 # Helpers
  helper_method :priv_sign_in

  # Sign in User from View
  private
  def priv_sign_in
    sign_in(@user)
  end 
```

有没有更好的办法是。所以为了让事情更清楚。

当我进入创建视图时，必须这样做：

如果用户已登录 --> 隐藏部分视图 如果用户未登录 --> 显示部分视图并尝试登录

有不清楚的地方请教一些问题，万分感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:53:53.933

你不应该在你的观点中处理这么多的逻辑。

控制器 ：

```
@was_signed_in = user_signed_in?
sign_in(@user) unless @was_signed_in 
```

看法 ：

```
<% unless @was_signed_in %> 
  <div class="row">
  <div class="three columns">
    <strong><%= t("apply.create.labels.password") %></strong>:
   </div>
   <div class="nine columns">
     <%= t("apply.create.labels.emailed_password_html", :link => mail_to(@user.personal_info.e_mail))%>
     <%= link_to(t("apply.create.labels.choose_password"), user_profile_path) %>
   </div>
 </div>
<% end %> 
```

# javascript - 节点集群：为什么所有请求都由一个worker处理？

> ID：15971020
> 
> 赞同：4
> 
> 时间：2013-04-12T12:07:04.073
> 
> 标签：javascript, multithreading, node.js, cluster-computing

我按照[这个](http://ofps.oreilly.com/titles/9781449398583/chap_3.html)例子创建了一个 Node.js 集群。

我已经`console.log(cluster.worker.id)`输入了我的 API 调用来确定哪个工作人员正在接受请求。

所有工作人员都已成功启动（我有 4 个核心，所以我创建了 4 个工作人员），但请求始终由一名工作人员处理。

有谁知道为什么会这样？我使用 Windows 7 操作系统并拥有 0.8.8 版本的 Node。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T21:06:02.033

您没有看到任何工作人员的切换，因为 Cluster 认识到它没有处于高负载状态，并且不会打扰切换工作人员。当进程处于高负载状态时，集群会自动进行负载平衡。这是文档中的内容：

> 当多个进程都`accept()`在同一个底层资源上运行时，操作系统非常有效地在它们之间进行负载平衡。Node.js 或您的程序中没有路由逻辑，工作人员之间也没有共享状态。因此，重要的是设计您的程序，使其不会过于依赖内存中的数据对象来处理会话和登录等事情。

# javascript - 如何仅替换第一个节点

> ID：15971021
> 
> 赞同：1
> 
> 时间：2013-04-12T12:07:08.840
> 
> 标签：javascript, jquery

使用以下 HTML 代码：

```
<ul class="column">
  <li><h2>Name</h2></li>
</ul>
<ul class="column">
  <li><h2>Address</h2></li>
</ul>
<ul class="column">
  <li><h2>Title</h2></li>
</ul> 
```

如何仅替换第一个之间的文本`<h2>`？

我试过了：

```
$(".column").first("h2").html("Replacing Name for another name"); 
```

但这不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:08:13.853

你有很多方法可以实现它：

```
$(".column:eq(0) h2").html("Replacing Name for another name"); 
```

或者：

```
$(".column:first h2").html("Replacing Name for another name"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:08:28.107

尝试：

```
$(".column:first h2").html("Replacing Name for another name"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:09:41.503

尝试

```
$(".column:eq(0) h2").html("Replacing Name for another name"); 
```

或者

```
$(".column:first h2").html("Replacing Name for another name"); 
```

有关更多详细信息，请[**检查**](http://api.jquery.com/nth-child-selector/)

# zend-framework2 - 如何在 zend2 选择查询中应用 OR 运算符

> ID：15971028
> 
> 赞同：0
> 
> 时间：2013-04-12T12:07:22.900
> 
> 标签：zend-framework2, zend-db

到目前为止，我能够在 zend2 SELECT 查询中应用 AND 和 LIKE，但无法弄清楚如何应用 OR 运算符。这是我的查询：

```
 $this->table = $data['table'];
    $select = new Select();
    $spec = function (Where $where) {
        $where->like('title', 'border%');
    };
    $select->from($this->table)
            ->where(array('id'=>  8));
    $select->where($spec);
    $resultSet = $this->selectWith($select);
    $resultSet->buffer();
    return $resultSet; 
```

它返回这个 sql 语句

```
SELECT `rs_morning_report`.*   
FROM `rs_morning_report` 
WHERE `id` = :where1 AND `title` LIKE :where2 
```

现在我想添加“AND（扇区 LIKE %a% 或扇区 LIKE %b%）”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:58:00.417

您可以使用 Where 对象链接它们。

```
$where = new Where();
$where->equalTo('fieldOne', 'XX')
    ->AND
    ->equalTo('field_two', 'XXX')
    ->OR
    ->equalTo('field_three', 'XXX')
;

$select->where($where); 
```

如果需要，您还可以嵌套它们：

```
$where = new Where();
$where->equalTo('fieldOne', 'XX')
    ->NEST
        ->equalTo('field_two', 'XXX')
        ->OR
        ->equalTo('field_three', 'XXX')
    ->UNNEST
;

$select->where($where); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:23:06.223

要生成`OR`语句，您可以使用`Zend\Db\Sql\Predicate\PredicateSet`参数`PredicateSet::COMBINED_BY_OR`。

例子：

```
use Zend\Db\Sql\Predicate;

$select->where(array(
    // Other conditions...
    new Predicate\PredicateSet(
        array(
            new Predicate\Like('sector', '%'.$sectorA.'%'),
            new Predicate\Like('sector', '%'.$sectorB.'%'),
        ),
        Predicate\PredicateSet::COMBINED_BY_OR
    ),
)); 
```

# sharepoint - 使用 WSDL 的 Web 部件 Sharepoint 2010 - 如何将它连接在一起？

> ID：15971031
> 
> 赞同：0
> 
> 时间：2013-04-12T12:07:33.057
> 
> 标签：sharepoint

我需要在 Sharepoint 2010 中激活自定义功能。

当我转到“站点操作”->“管理站点功能”并单击“激活”按钮时，我收到类似“此功能只能安装在用于会议工作区的页面上”的错误消息。确切的错误 ID 是：a06f1d31-f84a-4033-980d-5d8cdbea0189。

您知道如何以其他方式激活此功能，也许是通过 Power Shell？我已经尝试过这样的事情：http: [//www.greggalipeau.com/2011/08/23/sharepoint-2010-powershell-enabledisable-feature-for-all-site-collections/](http://www.greggalipeau.com/2011/08/23/sharepoint-2010-powershell-enabledisable-feature-for-all-site-collections/)

但是，当我在我的项目中使用 VS 2012 时，Power Shell 说我不能将 .NET Framework 4.0 与我试图激活的这个功能一起使用。

该怎么办？还有其他激活功能的方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:58:11.220

转到项目属性并将项目的构建版本设置为 .net framework 2.0/3.5。完成后，再次重建并部署您的解决方案。

要在 powershell 中启用功能，您需要`[Enable-SPFeature](http://technet.microsoft.com/en-us/library/ff607803.aspx) -Identity "FeatureGUID/FeatureFolderName" -url "url of the site collectino of site"`

# android - 旋转图像而不丢失分辨率

> ID：15971034
> 
> 赞同：0
> 
> 时间：2013-04-12T12:07:55.980
> 
> 标签：android, bitmap, rotation

我在旋转图像位图时遇到问题。当我旋转图像时，它会失去分辨率。每次用户单击按钮时我都想旋转图像。按钮单击的代码在这里：

```
matrix.postRotate(90);

bitmap = Bitmap.createBitmap(bitmap_rotate, 0, 0, bitmap_rotate.getwidth(),bitmap_rotate.getHeight(),matrix, true);
d_reflect = new BitmapDrawable(bitmap);

image_view.removeAllViews();
image_view.setBackgroundDrawable(d_reflect); 
```

其中image_view是LinearLayout，我想设置旋转LinearLayout。每次旋转图像时它都会失去分辨率。我的原始位图大小是300x300。我用谷歌搜索了很多解决方案，但没有一个对我有用。任何解决方案将不胜感激。在此先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:11:36.537

这是在图像视图中平滑旋转图像而不创建额外位图的代码。

```
Matrix m = new Matrix();
m.setRotate(degrees);
image_view.setImageMatrix(m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:52:33.760

创建具有所需宽度和高度的缩放位图：

```
Bitmap bmp = Bitmap.createScaledBitmap(bitmap_rotate, 300, 300, false); 
```

# android - 使用录音机从音频样本记录中去除噪音

> ID：15971035
> 
> 赞同：4
> 
> 时间：2013-04-12T12:07:58.150
> 
> 标签：android, audio, audio-recording

我正在制作 TalkingTomcat 之类的应用程序。我正在使用 android 录音机录制声音，并使用 libsonic 我通过改变音高来播放声音。但是在播放声音时它会发出很多噪音。即使我正在使用音轨播放声音样本，它也会发出声音。我使用的是 44100 采样率和 MONO 和 16 位。

如果有人可以帮助我，请帮助我。或者给我另一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-08T15:20:43.367

您可以在预处理阶段进行噪声去除。在这里，我过滤了语音和音乐的可听范围。我发现这在我的测试中非常有效，而不是 NoiseSuppressor。使用方法和实用方法，

```
recorder.read(data, 0, data.length);
if(isAudible(data)) {
    // TODO further processing can go here
}

public static boolean isAudible(short[] data) {
    double rms = getRootMeanSquared(data);
    return (rms > 198 && 5600 > rms);
}

public static double getRootMeanSquared(short[] data) {
    double ms = 0;
    for (int i = 0; i < data.length; i++) {
        ms += data[i] * data[i];
    }
    ms /= data.length;
    return Math.sqrt(ms);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:13:05.350

你玩过[NoiseSuppressor](http://developer.android.com/reference/android/media/audiofx/NoiseSuppressor.html)吗？“噪声抑制 (NS) 是一种音频预处理，可从捕获的信号中去除背景噪声”

# c# - c#在弹出框或类似框中输入文本

> ID：15971036
> 
> 赞同：0
> 
> 时间：2013-04-12T12:08:02.440
> 
> 标签：c#

我需要我的用户在参数化 sql 插入查询的过程中输入交易日期。我想到了一个带有文本框的弹出窗口，将日期作为字符串返回，但我遇到了很多问题，我想有一种更简单的方法。另外我必须多次调用这段代码，因为每笔交易都有不同的参数，但日期总是在那里。我看到了一个输入框，但无法真正理解它是如何工作的。谢谢您的帮助。它在 C# 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:18:19.923

您可以做的一件事是参考 Visual Basic 的输入框。您可以通过在顶部引用它来做到这一点；

```
using Microsoft.VisualBasic.Interaction; 
```

然后像这样访问输入框对象；

```
string yourReturnedValue = Microsoft.VisualBasic.Interaction.InputBox("Question", "Title", "Default", 0, 0); 
```

这将提示用户一个 MessageBox 类型框，但带有一个可以分配给变量的输入字段，如上面的示例所示 - “yourReturnedValue”

更多信息可以在这里找到; [http://msdn.microsoft.com/en-us/library/6z0ak68w(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/6z0ak68w(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:23:05.617

试试这个： [输入框](http://www.csharp-examples.net/inputbox/)

我在很多地方都使用了 InputBox。这里有一个例子：

```
InputBoxResult InputDate = InputBox.Show("Please enter a Date:", 
                                         "Input Date",
                                         DateTime.Today.ToString("dd.MM.yyyy"));

if (InputWorkspaceName.ReturnCode == DialogResult.OK)
{
    RequestData(InputDate.Text);
} 
```

这是结果类

```
public class InputBoxResult 
{
    public DialogResult ReturnCode;
    public string Text;
} 
```

# tcp - Go TCP 超时不起作用？

> ID：15971038
> 
> 赞同：2
> 
> 时间：2013-04-12T12:08:10.700
> 
> 标签：tcp, timeout, go

我`net.Listen()`用来监听来自客户端的 TCP 连接。

当客户端建立连接时，`Handler(conn net.Conn)`将处理它。

```
func Handler(conn net.Conn) {

  read_len, err := conn.Read(request)

  if err != nil {
    if neterr, ok := err.(net.Error); ok && neterr.Timeout() {
      fmt.Println(neterr)
      PILOG("Client timeout!", PILOGWARNING)
      conn.Close()
      return
  }
} 
```

我使用测试客户端连接然后突然杀死客户端而不发送`DISCONNECT`消息。我的服务器在超时时应该关闭连接，但经过长时间的等待，它永远不会发生。

我也尝试过`conn.SetReadDeadline(time.Now())`，但似乎仍然无法正常工作。所以我想知道 go 中默认的 TCP 超时是多少，我该如何设置呢？

`netstat -n`在杀死客户端后，我也使用并得到了以下结果：

`tcp4 0 0 127.0.0.1.12345 127.0.0.1.57296 CLOSE_WAIT`

是什么`CLOSE_WAIT`意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T12:21:24.957

[`SetReadDeadline`](http://golang.org/pkg/net/#TCPConn.SetReadDeadline)可以使用 AFAIK，但`SetReadDeadline(time.Now())`没有合理的用途，我相信这就是问题所在。例如，*要从现在开始*超时 N 秒，请使用：

```
SetReadDeadline(time.Now().Add(N*time.Second)) 
```

来自[维基百科](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)

> **关闭等待**
> 
> （服务器和客户端）表示等待来自本地用户的连接终止请求。

# php - Yii CMenu Widget - 如何获取主页

> ID：15971043
> 
> 赞同：2
> 
> 时间：2013-04-12T12:08:20.737
> 
> 标签：php, yii, navigation, cmenu

我在 Yii 中整理了一个菜单（我第一个使用它的项目），如下所示：

```
$this->widget('zii.widgets.CMenu',array(
    'items'=>array(
        array('label'=>'Home', 'url'=>array('/')),
        array('label'=>'Examples', 'url'=>array('/examples')),
        array('label'=>'Contact', 'url'=>array('/contact')),
        array('label'=>'FAQ', 'url'=>array('/faq')),
        array('label'=>'Blog', 'url'=>array('/blog')),
        array('label'=>'Order', 'url'=>array('/order')),
    ),
)); 
```

这些 URL 路径中的每一个，例如**/examples**都是在我的配置中定义的路由，因此它看起来不像**site/examples**。

对于主页链接，我试图让它只链接到网站的根级别。显然，CMenu 小部件首先通过[CHtml::normalizeUrl()](http://www.yiiframework.com/doc/api/1.1/CHtml#normalizeUrl-detail)传递 URL ，最终使其指向当前页面。因此，如果我在示例页面上，主页链接指向**/examples**。

这就是 normalizeUrl() 所说的：

> 如果输入参数为空字符串，则返回当前请求的 URL。
> 
> 如果输入参数是非空字符串，则将其视为有效 URL，将不作任何更改地返回。
> 
> 如果输入参数是一个数组，则将其视为控制器路由和 GET 参数列表，并调用 CController::createUrl 方法创建 URL。

我尝试传递一个空字符串，它最终按预期指向当前请求 URL。我试过传递“/”，它是一个非空字符串，它*仍然*指向当前的请求 URL。我也尝试将它传递给一个数组，但它会`trim() expects parameter 1 to be string, array given`因为 CMenu 需要一个字符串而死掉。

我正在尝试以 Yii 的方式做事，但如果它不能解决像返回主页这样简单的问题，我真的打算让菜单保持静态。

**TL;DR**如何让 Yii 中的 CMenu 小部件创建指向“/”或基域的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:28:48.733

当您使用数组时，`url`它将尝试根据您的路由器配置创建 url，但如果您将字符串作为参数传递，它将按字面意思传递，即：

```
$this->widget('zii.widgets.CMenu',array(
    'items'=>array(
        // Root hardcoded
        array('label'=>'Home', 'url'=>'/'),
        // Root dynamic (works also if not in domain root)
        array('label'=>'Home', 'url'=>Yii::app()->baseUrl),
        // External url
        array('label'=>'Examples', 'url'=> 'http://example.com/'),
        // current url
        array('label'=>'Contact', 'url'=> ''),
        array('label'=>'FAQ', 'url'=>array('/faq')),
        array('label'=>'Blog', 'url'=>array('/blog')),
        array('label'=>'Order', 'url'=>array('/order')),
    ),
)); 
```

哦，这就是你可以使用 url 的所有地方的规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:30:00.063

```
array('label'=>'Home', 'url'=>Yii::app() -> request -> baseUrl) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:44:43.310

另外的选择

```
array('label'=>'Home', 'url'=>Yii::app()->homeUrl) 
```

如果您`baseUrl`不是您的`homeUrl`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T22:44:11.367

获取一个绝对的 webroot url，并去掉 http[s]://

```
array('label'=>'Home', 'url'=>Yii::app()->getBaseUrl(true)), 
```

# spring - junit hsqldb spring集成版本报错

> ID：15971045
> 
> 赞同：0
> 
> 时间：2013-04-12T12:08:23.510
> 
> 标签：spring, hibernate, versioning, hsqldb

我正在使用 hsqldb 2.2.8 版本

```
<spring.version>3.2.2.RELEASE</spring.version>
<hibernate.version>3.5.4-Final</hibernate.version> 
```

这些版本。

这是错误：

引起：org.hsqldb.HsqlException：用户缺少权限或找不到对象：

我尝试更改 hibernate 和 hsqldb 的版本，但找不到解决此问题的解决方案。您对哪个版本的 hsqld 适合哪个版本的 hibernate 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:24:46.697

使用 hsqldb 最好的方法是让 hibernate 创建表，使用 schema ddl 和数据 sql 文件不是一个好的选择。

# android - Android 和 PhpmyAdmin 后端连接

> ID：15971053
> 
> 赞同：0
> 
> 时间：2013-04-12T12:08:39.700
> 
> 标签：android, arraylist, request, backend

我正在尝试在我的android应用程序和服务器（phpmyadmin）之间发送和接收数据我设法发送和接收数据但只有字符串和整数，现在我正在尝试从我的android应用程序发送一个arraylist，这个arraylist我' m 从类扩展应用程序中获取它。这是我的代码：

```
OrderManager om = (OrderManager) getApplication();
            ArrayList<OrderStrings> lstOrder = om.getLstOrder();

            Object[] mStringArray = lstOrder.toArray();

            for (int i = 0; i < mStringArray.length; i++) {
                Log.d("string is", (String) mStringArray[i]);
                String request = "http://192.168.1.3/insertfinalorder.php?array=";
                request += mStringArray;
            } 
```

当我在 logcat 中打印请求时，我在数组中得到的是 android.widget.... 而不是数组列表本身的数据，你们可以帮帮我吗:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:22:25.007

下面的行不应该在 for 循环中。您应该在 for 循环上方声明它，然后附加 arraylist 的值。希望这可以帮助你。

```
String request = "http://192.168.1.3/insertfinalorder.php?array="; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:22:27.430

首先将您的列表解析为 XML 或 JSON。这些是用于此类通信案例的语言。

# ios - 释放栈中的viewcontroller（在didReceiveMemoryWarning之后）

> ID：15971061
> 
> 赞同：1
> 
> 时间：2013-04-12T12:09:03.737
> 
> 标签：ios, objective-c, uiviewcontroller, release, didreceivememorywarning

我想在“内存警告”后删除堆栈中的所有视图控制器（Root 除外）以释放内存。

我在最后一个控制器中弹出ToRootViewController。

流程：*Root(push)->AController(push)->BController(内存警告后返回)->Root*

（在 BController 中）

```
- (void)didReceiveMemoryWarning {
    CMLog(@"BController");

    [super didReceiveMemoryWarning];

    CMLog(@"[allControllers lastObject]");
    [self.navigationController popToRootViewControllerAnimated:NO];
} 
```

日志

1.  收到内存警告。
2.  [RootViewController didReceiveMemoryWarning]
3.  [AController didReceiveMemoryWarning]
4.  [BController didReceiveMemoryWarning]
5.  [BController didReceiveMemoryWarning]:[allControllers lastObject]
6.  (popToRootViewControllerAnimated)

所以我重复这个过程

1.  收到内存警告。
2.  [RootViewController didReceiveMemoryWarning]
3.  [AController didReceiveMemoryWarning]
4.  [BController didReceiveMemoryWarning]
5.  [AController didReceiveMemoryWarning](<<<<**重复**)
6.  [BController didReceiveMemoryWarning](<<<<**重复**)
7.  [BController didReceiveMemoryWarning]:[allControllers lastObject]
8.  (popToRootViewControllerAnimated)

多次尝试后应用程序崩溃，因为内存不足

我可以简单地删除[堆栈](https://stackoverflow.com/a/10281607/900763)中的视图控制器吗？并会释放内存？

# c# - 使用参数内联 C# 调用服务器端函数

> ID：15971063
> 
> 赞同：0
> 
> 时间：2013-04-12T12:09:14.853
> 
> 标签：c#

谁能帮我这个 ：

```
 <asp:Repeater ID="rep_Categories" runat="server" >
       <ItemTemplate>
      <li><a href='<%#WriteUrl("<%#Eval("PARTNER_CATEGORY_NAME")%>"," <%#Eval("PARTNER_CATEGORY_ID")%>") %>'  ><%# Eval("PARTNER_CATEGORY_NAME") %>  </a></li>
    </ItemTemplate>
       </asp:Repeater> 
```

服务器端 ：

```
 public string WriteUrl(string PartnerName, string CategoryID)
{
    string url=Page.GetRouteUrl("Category ID", new { PartnerName = PartnerName } + "," + new { CatID = CategoryID });
    return url;
} 
```

我知道我上面的语法不正确，但我找不到解决方法，谁能告诉我如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:11:55.237

您需要重新排列引号组合

```
<a href='<%# WriteUrl(Eval("PARTNER_CATEGORY_NAME").ToString(), Eval("PARTNER_CATEGORY_ID").ToString()) %>'     </a></li> 
```

# c - 如何使用c在make文件中链接xmlsec/xmlsec.h

> ID：15971067
> 
> 赞同：1
> 
> 时间：2013-04-12T12:09:23.153
> 
> 标签：c, linux

src/file.c:17:27：致命错误：xmlsec/xmlsec.h：没有此类文件或目录编译终止。make: *** [src/file.o] 错误 1

安装了 apt-get install libxmlsec-dev 并在使用 locate 命令后，位置是 usr/include/xmlsec1/xmlsec/xmlsec.h

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-29T09:42:36.337

使用 pkg-config 以便您可以看到标题等的正确位置...

```
pkg-config --cflags --libs xmlsec1 
```

这应该输出类似于：

```
-DXMLSEC_CRYPTO=\"openssl\" -D__XMLSEC_FUNCTION__=__FUNCTION__ -DXMLSEC_NO_SIZE_T
-DXMLSEC_NO_GOST=1 -DXMLSEC_NO_XKMS=1 -DXMLSEC_NO_CRYPTO_DYNAMIC_LOADING=1 
-I/usr/include/xmlsec1  -DXMLSEC_OPENSSL_100=1 -DXMLSEC_CRYPTO_OPENSSL=1 
-I/usr/include/libxml2 -lxmlsec1-openssl -lxmlsec1 -lssl -lcrypto -lxslt  -lxml2 
```

您得到的错误似乎只是在找不到头文件时。

# java - jmeter，模拟线程数较少的用户

> ID：15971068
> 
> 赞同：1
> 
> 时间：2013-04-12T12:09:23.633
> 
> 标签：java, performance, testing, web-applications, jmeter

我正在寻找一种方法来模拟 Web 应用程序的更多并发用户，而不是在 jmeter 中使用真实线程。我想模拟接近真实世界的使用模式，即用户定期在页面上执行某些操作，但每天保持登录 9 小时，然后注销。其他地区的用户在不同的时间做同样的事情，等等。我想潜在地模拟 100000 个甚至更多的系统用户。因此，如果我可以使用比模拟用户更少的线程，那将有很大的不同。我可能会使用任何数量的亚马逊 ec2 大型实例。我看不到任何迹象表明 jmeter 可以做到这一点。我想如果我编写自己的采样器并使用自己的线程池并将每个登录用户的状态保存到某个缓存中，但这会消除使用框架的很多好处。

在一个[邮件列表线程中](http://jmeter.512774.n5.nabble.com/number-of-threads-vs-number-of-simulated-users-td2258255.html)，我正在阅读一些理性的内容，但归结为太难以实施且不值得。好吧，我认为测试 Web 应用程序的唯一真正方法是模拟预期的实际使用模式，这意味着大量空闲用户。所以我想知道我是否错过了一些方法来做到这一点，或者只是没有人足够关心来实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T16:31:27.477

尝试使用 docker 和任何云提供商（轻量级虚拟化）构建您自己的 JMeter Cloud。在这里查看我的演示文稿 - [http://goo.gl/fJByCb](http://goo.gl/fJByCb)

# asp.net - 如何在 wpf 中的 DataGrid SelectedCellsChanged 上获取选定的单元格值？

> ID：15971079
> 
> 赞同：0
> 
> 时间：2013-04-12T12:10:02.437
> 
> 标签：asp.net, wpf, datagrid, wpf-controls, wpfdatagrid

我想在我的 wpf 应用程序中获取 DataGrid 选定单元格 Changed 事件的单元格值。请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:45:16.423

您可以使用 CurrentCellChanged 或 SelectedCellsChanged 事件

# apache-camel - 基于序列的骆驼请求+回复（异步）

> ID：15971097
> 
> 赞同：1
> 
> 时间：2013-04-12T12:11:10.707
> 
> 标签：apache-camel

我是骆驼的新手，但仍在试图掌握它的想法。

这是我要构建的步骤：

1.  我的应用程序需要将请求文件 (REQ1.TXT) 从我的应用程序发送到文件 EndPoint（共享文件夹）
2.  另一台服务器读取该文件，并在 10 分钟内（大约）放置一个响应文件（RESP1.TXT）
3.  我的应用程序将 RESP1.TXT 移动到我的端点并处理响应文件。

这是否可以使用 Camel 的 Async Request-Reply 实现，或者我应该创建 2 条路由（如下所示）？

```
 context.addRoutes(new RouteBuilder()
 {public void configure()
  { 
    from("file:/temp/input/?include=REQ*.*txt").to("file:/shared/output/");
    from("file:/shared/output/?include=RES*.*txt").delay(600000).to("file:/temp/input/");
 }}); 
```

如果使用 Request Reply 可以实现，那么如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:42:20.137

文件组件（以及一般的文件系统）没有任何“请求/回复”的概念。您在提供的路线中所拥有的可能是您对其拥有最多控制权的方式。

对于它的外观，您没有任何依赖关系来处理与请求处于相同状态的响应，因此，实际上最好将两个路由分开（不管协议如何）。

# c# - 使用绑定从列表创建菜单项会导致空白项

> ID：15971101
> 
> 赞同：0
> 
> 时间：2013-04-12T12:11:29.083
> 
> 标签：c#, wpf, datatemplate, menuitem, hierarchicaldatatemplate

我有一个 Menuitem，它应该将数量列表显示为子项，其中显示为该数量定义的单位列表作为子项。数量列表在 MenuItem 的 ItemsSource 的代码隐藏中设置。

```
<MenuItem Header="common.unitsystem" Name="mnuItemUnits">
    <MenuItem.Resources>
        <DataTemplate DataType="{x:Type guidev:Measurement}">
            <StackPanel>
                <TextBlock Text="Measurement"/>
                <TextBlock Text="{Binding Name}"/>
            </StackPanel>
        </DataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type guidev:Quantity}" ItemsSource="{Binding Measurements}">
            <StackPanel>
                <TextBlock Text="Quantity "/>
                <TextBlock Text="{Binding Name}"/>
            </StackPanel>
        </HierarchicalDataTemplate>
    </MenuItem.Resources>
</MenuItem> 
```

结果是我的 MenuItem 带有一个弹出窗口，但子项（数量）上没有任何绑定文本。子项的数量是正确的，但它们本身没有子项。所以我认为绑定存在问题，因为我添加的固定文本用于检查 DataTemplates 是否实际工作正在显示（“数量”）。

我认为我不能将 ItemTemplate 用于 MenuItem，因为这是具有 2 种不同类型的分层...

**编辑：**

我的数据模型如下所示：

```
public class Quantity
{
    [XmlAttribute]
    public string Name;

    [XmlElement]
    public List<Measurement> Measurement;
}

public class Measurement
{
    [XmlAttribute]
    public string Name;

    [XmlAttribute]
    public string Symbol;

    [XmlAttribute]
    public string System;

    public string ToBaseFormula;

    public string FromBaseFormula;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:35:45.513

哦，伙计，很高兴你问到数据模型......现在我想通了：

解决方案是：**在数据模型中使用属性，而不是字段！**

# html-lists - 用于响应式设计的等距 div 和百分比

> ID：15971102
> 
> 赞同：0
> 
> 时间：2013-04-12T12:11:31.450
> 
> 标签：html-lists, responsive-design, percentage, spacing, text-justify

[工作示例](http://www.haselden.co.uk/media-query.html)和[JS Fiddle](http://jsfiddle.net/YT3KZ/3/)

试图为此提出一个解决方案，该解决方案创建一个`ul li`列表，该列表显示等距的项目，但使用百分比。

该解决方案需要能够响应式地工作，即块（带有文本覆盖的图像）的大小将减小，它们之间的空间将缩小到 iPad 大小。在典型的手机分辨率下，它们会堆叠。

共有三个元素，但使用百分比的好处是可以添加一个额外的元素，而无需重做大量 CSS。希望块（在这种情况下为`li`项目）会相应地调整它们的大小和空间。

[我尝试在这里](http://css-tricks.com/equidistant-objects-with-css/)玩一些等距的 CSS 技巧，但它们并不真正适合响应式。

我计划使用`max-width:100%`将图像调整为当前的最大宽度，`li`以便可以使用更大的图像而无需调整大小（在交换图像时节省时间，并且意味着可以在网站的其他地方使用相同的图像）

`li`list 不需要使用，可以使用简单的`div`or`span`结构。

有任何想法吗？

**第一个问题：**在我的[JS Fiddle](http://jsfiddle.net/YT3KZ/3/)示例中，您可以看到图像根据窗口大小对齐和调整大小。然而，最右边的元素不与右边缘齐平（它们通常都是左对齐的）。虽然我已经添加了`text-align:justify`它似乎没有达到预期的效果

**第二个问题：**三个不可分是个问题。30% 不是真正的三分之一，而 33% 似乎将其排除在外。

**第三个问题：**空白。有没有办法阻止`li`放置在不同行的 's 之间的邪恶空白？我必须牺牲可读的 HTML 来摆脱空格吗？

**HTML：**

```
<div id="bottomWide">
    <ul>
    <li><img src="#" alt="text"></li>
    <li><img src="#" alt="text"></li>
    <li><img src="#" alt="text"></li>
    </ul>
</div> 
```

**CSS：**

# 底宽{

```
width:85%;
margin:0 auto;
border:1px solid red;} 
```

# 底宽 ul{

```
margin:0;
padding:0; 
```

}

# bottomWide li{

```
list-style-type: none;
display: inline-block;
width:30%;
text-align:justify; 
```

}

# 底宽img{

```
max-width:100%; 
```

}

**用于堆叠的媒体查询（效果很好）**

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-width : 320px) 
and (max-width : 480px) {
/* Styles */
    #bottomWide li{
    display:block;
    width:100%;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:34:39.937

这是一种方式：

[http://jsfiddle.net/YT3KZ/3/](http://jsfiddle.net/YT3KZ/3/)

我将 li 更改为`float:left;`而不是`display:inline-block;`添加 a`margin-left: 1%;`并将宽度设为 32.333% 以补偿 1% 的边距并将其分布在 div 中。

这会将 li 定位在左侧 1% 的边距并在右侧切断 1%，因此您需要在 ul 上使用负边距来应对这种情况，或者您可以添加一个位置类来执行此操作。

```
margin-left:-1%; 
```

另一种方法是使容器比您的页面宽度更宽，以便它们正确定位并使用负边距/填充来补偿将被切断的部分。

PS。只是注意到您不想要间隙..删除并将其`1% margin`更改`li`为`33.333%`

[http://jsfiddle.net/YT3KZ/7/](http://jsfiddle.net/YT3KZ/7/)

注意：我没有删除不需要的 css。例如`text-align:justify;`，你可以清理它。

# node.js - 使用 Jenkins 运行 Grunt.js

> ID：15971103
> 
> 赞同：16
> 
> 时间：2013-04-12T12:11:35.480
> 
> 标签：node.js, jenkins, gruntjs

我已经建立了一个带有 mocha 测试和 JSlint 的 Gruntfile。如果我只是从终端运行 grunt，这很好用。

我想从詹金斯那里咕哝！

我建立了一个新工作->并建立了一个shell脚本并包括：

```
/usr/local/bin/grunt 
```

一旦我运行这项工作，詹金斯的终端输出就会说：

```
[workspace] $ /bin/sh -xe /tmp/hudson8550584576040162032.sh
+ /usr/local/bin/grunt
/usr/bin/env: node: No such file or directory
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

看来它不能精细节点二进制！？！但是节点已安装并在终端中运行良好！

我所有的二进制文件（mocha、grunt、node）都在 /usr/local/bin/

有谁知道问题是什么？或者也许有人有一个链接可以用 jenkins 设置 grunt.js？

有人有东西吗？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-17T14:57:21.613

发生这种情况是因为 Jenkins 将作为不同的用户运行，`/usr/local/bin`而`$PATH`.

在你的 shell 脚本中确保`/usr/local/bin`被添加到你的`$PATH`

```
export PATH="/usr/local/bin:$PATH"
# This will also mean you can call 'grunt' rather than '/usr/local/bin/grunt'
grunt 
```

这具有调用您已安装的任何程序而`/usr/local/bin`不是`/usr/bin`. 如果您不想要这种行为，只需附加而不是前置：

```
export PATH="$PATH:/usr/local/bin"
# This will also mean you can call 'grunt' rather than '/usr/local/bin/grunt'
grunt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:45:29.063

老实说，我不熟悉 Jenkins，但是当我想将 GruntJS 与 XCode 自定义构建步骤或在 TeamCity 部署过程中集成时，我遇到了同样的问题。

我通过在运行 grunt 或 node 之前将 /usr/local/bin/ 添加到我的 shell 脚本中的 PATH 来解决我的问题。就像是：

```
PATH=${PATH}:/usr/local/bin
grunt 
```

我希望这对你也有帮助:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T16:00:41.510

您可以允许从 jenkins 设置所有内容：

## 安装 Jenkins 插件

*   Git 插件 -*用于 git*
*   Git 客户端插件 -*用于 git*
*   Git 参数插件 -*用于 git 标签*
*   GitHub API 插件 -*用于 github*
*   NodeJS Plugin -*常用 JavaScript 工具 NodeJS 和 npm 的集成*

## Git / Ant / Maven / NodeJS 安装

*   转到服务器/詹金斯/配置

吉特

*   Git -> Git 安装 -> 添加 Git -> JGit
*   Git 插件 -> 全局配置 user.name 值 = “Anthony Mckale”，全局配置 user.email 值 = “anthony.mckale@bskyb.com”

节点JS

*   NodeJS-> NodeJS 安装 -> 添加 NodeJS -> Name = "NodeJS 0.11.10"，勾选“自动安装”，选择“从 nodejs.org 安装”，将“grunt-cli”添加到全局安装的包中

## 多田

希望你可以使用 git/nodejs 和 grunt

# jquery - jQuery：slideDown() 向后滑动

> ID：15971109
> 
> 赞同：0
> 
> 时间：2013-04-12T12:12:11.110
> 
> 标签：jquery, html, slidedown

我有一个很难重现的问题

*   在它 slidesDown() 之后大约 50% 的时间向上滑动。jQuery 代码非常简单：

    ```
    $( document ).ready(function() {
    var slideOptions = {
        duration: 500,
        easing: 'linear'
    };

    $( 'li.navtitle' ).mouseenter(function() {
        $( this ).next().slideDown();
        return false;
    });
    $( 'ul.navunit' ).mouseleave(function() {
        $( this ).find( 'li.navcontent' ).delay(800).slideUp();
        return false;
    });
    }); 
    ```

    这是HTML：

    ```
    <ul id="navigation">
      <li class="navtop">   
        <ul class="navunit">
          <li class="navtitle unselectable" unselectable="on">TITLE</li>
          <li class="navcontent"><p class="textcontent">CONTENT HERE</li>
        </ul>
      </li>
    <!-- Some more navtop/navunits... -->
    </ul> 
    ```

    如前所述，这大约有 50% 的时间有效。但是，在许多情况下，当鼠标位于 navunit ul 中时，navcontent li 会 slideUp()。

    有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:24:54.830

看起来你需要`stop()`在动画中添加一个。JS 代码在下面，但这里有一个指向 JSFiddle 的链接，可以查看它的实际操作[http://jsfiddle.net/MDpxD/](http://jsfiddle.net/MDpxD/)

```
$( document ).ready(function() {
var slideOptions = {
    duration: 500,
    easing: 'linear'
};

$( 'li.navtitle' ).mouseenter(function() {
    $( this ).next().stop().slideDown();
    return false;
});
$( 'ul.navunit' ).mouseleave(function() {
    $( this ).find( 'li.navcontent' ).stop().delay(800).slideUp();
    return false;
});
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T12:14:37.953

这可能会发生，因为它触发了两次。尝试将其添加到函数的末尾：

```
 $(this).unbind("mouseenter");
$(this).unbind("bind");
$(this).die(); 
```

# android - 将列添加到表未更新

> ID：15971110
> 
> 赞同：1
> 
> 时间：2013-04-12T12:12:19.583
> 
> 标签：android, sqlite

我创建了一个表并使用命令成功添加了一个列

```
ourNewDatabase.execSQL("ALTER TABLE " + tbname + " ADD " + key_day + " VARCHAR(10);"); 
```

但是在用更新的值更新任何行时，除了添加的列（key_day）之外，该特定行的所有列值都会更新..尝试了很多次..但没有解决方案..更新的命令是：

```
ContentValues cvUpdate = new ContentValues();
cvUpdate.put(KEY_STUNAME, "AHIHUOI");
cvUpdate.put(KEY_STUROLL,"109rty890");
cvUpdate.put(key_day,"false");
String stuuid = "20130801001";
int ans = ourNewDatabase.update(tbname, cvUpdate, KEY_STUUID + "= '" + stuuid+"'", null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T07:18:39.560

尝试通过增加数据库版本号来升级您的数据库。

# maven - 如何从终端运行插件目标

> ID：15971114
> 
> 赞同：1
> 
> 时间：2013-04-12T12:12:25.770
> 
> 标签：maven, plugins

我有一个多模块项目

一个模块使用一个特殊的插件——maven-glassfish-plugin

我有这个插件的问题 - 它无法创建新域。目标创建域失败

我想用键 -X 从终端运行这个目标来查看完整的日志。但我不知道该怎么做 - 以前我使用 IDE 来运行目标

如何从终端运行选择的插件目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:25:55.723

尝试`mvn glassfish:<goal>`

[您可以在此处](http://maven-glassfish-plugin.java.net/plugin-info.html)找到可用的目标和更多文档

maven 二进制文件必须可以通过`PATH`查找访问，并且`M2_HOME`应该设置环境变量来告诉 maven 在哪里操作。[您可以在此处](http://maven.apache.org/guides/development/guide-building-m2.html)找到有关配置此的更多详细信息

# c# - ServiceStack.Text：强制序列化未使用 DataMember 属性修饰的属性

> ID：15971117
> 
> 赞同：1
> 
> 时间：2013-04-12T12:12:31.057
> 
> 标签：c#, servicestack, datacontractserializer, datacontract

我有以下课程（简化）。

```
[DataContract]
public class ServiceResponse
{
    public int Sequence { get; set; }

    [DataMember]
    public ServiceResponseStatus Status { get; set; }
} 
```

我正在使用 ServiceStack 序列化对象以进行日志记录，并让`DataContractSerializer`其余的工作。正如预期的那样，ServiceStack 不会序列化`Sequence`，因为它没有用`DataMember`属性修饰。

有没有办法强制 ServiceStack 序列化这个属性？

Marc Gravell 对这个类似问题[DataContract Serialization without DataMember Attribute](https://stackoverflow.com/questions/11309010/datacontract-serialization-without-datamember-attribute)的回答似乎提出了一种不同的方法，但我想我会问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:43:33.717

`DataContract/DataMember`用属性装饰你的类**专门**用于选择你想要序列化的属性。如果要序列化所有属性，请**删除**所有属性。

[有关忽略 Servicestack 序列化程序中的属性](https://stackoverflow.com/a/14859968/85785)的其他方法，请参阅此答案。

# sed - Unix to tail 等待特定字符串或超时后退出的解决方案

> ID：15971121
> 
> 赞同：2
> 
> 时间：2013-04-12T12:12:38.497
> 
> 标签：sed, grep, tail

我正在尝试改进服务（守护程序）脚本以显示 tomcat 输出（从 tty 运行时），直到应用程序有效启动。

Tomcat 应用程序最多可能需要 10 分钟才能启动，这对于查看发生的情况非常有用。

尽管如此，如果启动确认消息未能出现在日志中，我们仍需要确保此启动脚本不会无限期地运行。

我知道互联网上充满了类似的问题，但到目前为止，我无法找到一个明确的解决方案，尤其是一个不需要默认情况下不可用的实用程序的解决方案。

要求：

1.  无需您在最新的 Debian、Ubuntu、RedHat 和 OS X 上安装任何东西即可运行
2.  结束时没有留下任何进程（由于任何原因）
3.  将记录的行显示到标准输出
4.  日志文件是只读的，你不能触摸它
5.  日志文件可以在不破坏工具的情况下旋转
6.  额外的荣誉，如果你可以让它在一行中工作

目前发现的问题：

*   `read -t`在当前的 Debian 上不可用，`Illegal option -t`

到目前为止对部分解决方案的引用：

*   [用于在特定时间跟踪特定字符串的日志文件的 Shell 函数](https://stackoverflow.com/questions/13983572/shell-function-to-tail-a-log-file-for-a-specific-string-for-a-specific-time)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T01:40:01.790

如果您想要一个脚本来监视等待特定字符串的 tomcat 输出，那么下面的解决方案应该可以工作，并且它不使用`read -t`.

```
( tail -f server.log & ( (tail -f server.log | grep -l STARTED && kill -9 `pstree -pa $$ | grep -E '\-(tail|sleep),' | sed 's/^[^0-9]*\([0-9]*\).*/\1/' | grep -vw $$ | xargs` ) & sleep 900 && kill -9 `pstree -pa $$ | grep -E '\-(tail|sleep),' | sed 's/^[^0-9]*\([0-9]*\).*/\1/' | grep -vw $$ | xargs` && exit 3 ) ) ; [ $? -eq 3 ]  && echo 'server not up after 5 min'  || echo 'server up' 
```

它正在日志文件*server.log*中搜索字符串“ *STARTED* ” ，超时时间为 15 分钟（900 秒）。我不确定你的 Debian 中有什么可用的。你应该有，其输出应该类似于：*`pstree`*

 *```
$ pstree -pa 1803
bash,1803
  └─bash,7850
      ├─bash,7852
      │   ├─bash,7853
      │   │   ├─grep,7856 --color=auto -l STARTED
      │   │   └─tail,7855 -f server.log
      │   └─sleep,7854 20
      └─tail,7851 -f server.log 
```

其余的我相信你应该有：`kill`, `sed`, `sleep`, `grep`, `echo`, `xargs`.

对正在发生的事情的一些解释。此行包含一个命令和命令结果的最终评估，以打印服务器是否启动。该命令分为 3 个部分：

1.  只需按要求输出日志内容。
2.  监视输出以查找特定字符串“ *STARTED* ”；如果找到，`kill`第 1 部分和第 3 部分。
3.  等待 15 分钟，如果 15 分钟过去，则`kill`第 1 部分和第 2 部分以代码 3 退出以向外部评估发出信号，表明整个命令由于超时而结束。

附评论：

```
( tail -f server.log & # part 1 - just output the log content
  ( # part 2
    (tail -f server.log | grep -l STARTED # search for the string
     && kill -9 `pstree -pa $$ | grep -E '\-(tail|sleep),' | 
        sed 's/^[^0-9]*\([0-9]*\).*/\1/' | grep -vw $$ | 
        xargs` # if found, kill the remaining tails and sleeps
    ) & # if the command ends in part 2, exit code is not 3
  sleep 900 # part 3: sleep 15 minutes
  && kill -9 `pstree -pa $$ | grep -E '\-(tail|sleep),' | 
              sed 's/^[^0-9]*\([0-9]*\).*/\1/' | grep -vw $$ | 
              xargs` # if time passed, kill the remaining tails and sleeps
  && exit 3 # exit with code 3, so that the outside evaluation 
            # knows it ended by timeout
  )
) ; # end of command; whenever it finishes, the evaluation below is executed, 
    # checking the exit code to print the appropriate message
[ $? -eq 3 ]  && echo 'server not up after 5 min'  || echo 'server up' 
```

请注意，由于`bash`管道的工作方式，如果找到“ *STARTED* ”字符串，则该命令实际上只会在带有“ *STARTED ”的行之后向**server.log*添加额外的行后退出并打印消息“ *server up* ”。那是因为当打印“ *STARTED* ”行时，会找到它，打印它的输出并退出，关闭它的输入。但是，相应的会继续运行，直到它有别的东西要写；只有这样才会意识到它的输出是关闭的，然后会死掉，继续执行将导致评估的命令。AFAIK，没有解决方法。***`grep``tail``tail``kill`*STARTED* ”消息，如果还没有的话。****

# asp.net - WebForm_PostBackOptions 是 IE10 中未定义的错误

> ID：15971122
> 
> 赞同：1
> 
> 时间：2013-04-12T12:12:39.697
> 
> 标签：asp.net, .net, internet-explorer-10

WebForm_PostBackOptions

在 ASP.NET 网站上单击按钮时在 IE10 中出现未定义错误

本国的：

```
 <asp:Button runat="server" id="btnSearch" 
    OnClientClick="if (!isValid()){return false;};" PostBackUrl="Result.aspx" /> 
```

渲染：

```
 <input type="submit" name="BtnSearch" value="SEARCH" id="BtnSearch"
    onclick="if (!isValid()) { return false; };WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;BtnSearch&quot;, &quot;&quot;, false, &quot;&quot;, &quot;Result.aspx&quot;, false, false))" > 
```

在所有浏览器中工作。请帮我关闭这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T15:34:58.270

这可能是因为该机器没有最新的 .Net 更新。ASP.Net 需要使用最新的浏览器定义文件进行更新以识别新的浏览器。

修复方法是更新 \Windows\Microsoft.NET\Framework\\Config\Browsers 中的 ie.browser 和 firefox.browser 文件

有两种方法可以修复它：服务器范围或站点范围。

服务器范围：安装以下链接中的修补程序之一。

*   [http://support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088) [http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100) [http://support.microsoft.com/kb/2608565](http://support.microsoft.com/kb/2608565)

站点范围：

*   在您的网站根目录中创建 App_Browsers 文件夹
*   将 ie.browser 和 firefox.browser 文件从此 zip 文件复制到此文件夹中： [http ://www.hanselman.com/blog/content/binary/App_BrowsersUpdate.zip](http://www.hanselman.com/blog/content/binary/App_BrowsersUpdate.zip)

感谢 Scott Hanselman 的提示：[http ://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T20:08:57.390

请检查带有 runat="server" 的表单标签是否存在于 aspx 文件中。

# java - Selenium WebDriver 在 Firefox 上非常慢

> ID：15971129
> 
> 赞同：3
> 
> 时间：2013-04-12T12:12:58.657
> 
> 标签：java, firefox, selenium-webdriver

我在 64 位 linux 和 64 位 Windows 上运行带有 Java 的 Selenium WebDriver 2.31.0。我们的页面加载速度非常快，大约 2 秒。但是，运行 WebDriver 测试页面可以加载 30 秒左右。WebDriver 运行速度很慢时是否存在一些一般情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:46:53.130

我在加载页面时遇到了类似的问题，有时会出现超时错误。我将 WebDriver 与 Java 和 JUnit 一起使用。然后我更新到 Java 库的最新版本，它运行良好。

# eclipse - 如何解决jsp错误？

> ID：15971130
> 
> 赞同：0
> 
> 时间：2013-04-12T12:12:59.437
> 
> 标签：eclipse, jsp, liferay

你好，我是 jsp 的新手，当我将以下代码放在文件顶部时，我 在 jsp 页面中遇到错误。

```
 <%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %> 
```

我收到以下错误。

> 找不到标签库描述符 `"http://java.sun.com/portlet_2_0"`

我正在使用liferay eclipse ide。使用 jsp 页面创建表单，我在文件顶部收到错误。我创建了 init.jsp 文件，并在该文件中放入了所有常见的东西。我在 init.jsp 文件中有错误

您好，我还为您提供了我的 init.jsp 文件。

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@page import="javax.portlet.PortletURL"%>
<%@page import="javax.portlet.ActionRequest"%>
<%@page import="javax.portlet.ActionResponse" %>
<%@ page import="com.dir.service.directoryLocalServiceUtil" %>
<%@ page import="com.dir.model.directory" %>
<%@ page import="java.util.*" %>
<%@ taglib uri="http://liferay.com/tld/aui" prefix="aui" %>
<portlet:defineObjects /> 
```

我在第一行得到了错误。 **找不到“ [http://java.sun.com/portlet_2_0](http://java.sun.com/portlet_2_0) ”的标记库描述符**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:20:49.110

使用以下内容将 web.xml 添加到您的 WEB-INF 文件夹应该会有所帮助。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.5//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>

<taglib>
<taglib-uri>http://java.sun.com/portlet_2_0</taglib-uri>
<taglib-location>/WEB-INF/tld/liferay-portlet.tld</taglib-location>
</taglib>

</web-app> 
```

# c# - 释放一个静态对象，使用 new()?

> ID：15971140
> 
> 赞同：1
> 
> 时间：2013-04-12T12:13:19.850
> 
> 标签：c#, wpf, xaml, data-binding, static

我在 .net 4.5 中有一个 WPF 应用程序在这个应用程序中，我创建了一个名为“Client”的类。

在我的 App.xaml.cs 上，我声明并实例化了一个 Client 对象：

```
 public partial class App : Application
    {

        public static Client obj_myClient;

        private void Application_Startup_1(object sender, StartupEventArgs e)
        {

            obj_myClient = new Client();

        }
    } 
```

启动后，我将所有客户端加载到 DataGrid 中，并且，当我进入客户端行（在 DataGrid 上）时，客户端属性将加载到 App.obj_myClient（带有绑定）中。

我可以轻松地修改我的客户在数据库中的保存。

我的问题：当我想创建一个新客户端时，我需要“刷新”我的 App.objMyClient 对象，所以我使用了：

```
App.obj_myClient = new Client(); 
```

这段代码编译正确，没有崩溃，但它似乎在我的绑定中生成了错误的数据并且总是奇怪的错误（比如非触发事件发生了变化等....）

我认为这与以下内容有关：

```
App.obj_myClient = new Client(); 
```

因为如果我删除这一行，代码会更好。

请问您在这种情况下有何建议？

非常感谢 ：）

此致，

尼克修斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:37:24.123

您可以执行以下操作来避免静态变量。但是很难说它是否能解决你的问题，因为我们不知道它在做什么。

```
public class App : Application
{
    public Client obj_myClient;
    private void Application_Startup_1(object sender, StartupEventArgs e)
    {
        obj_myClient = new Client();
    }
} 
```

用法

```
private void SomeMethod()
{
    var someValue = ((App)Application.Current).obj_myClient.WhatEverMethod();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:43:32.193

您不需要将客户端对象作为静态对象。将其转换为属性。

事件的非触发是，当您创建一个新的 Client 对象时，对旧对象的订阅会丢失，您必须重新创建它们。

# clojure - 如何编写一个将整个集合考虑在内的原子查询

> ID：15971141
> 
> 赞同：7
> 
> 时间：2013-04-12T12:13:21.067
> 
> 标签：clojure, datomic

是否可以用 datomic 编写这类查询？

*   找到最年长的孩子的名字
*   找到体重指数（体重/身高）最低的人

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T15:01:12.163

```
[:find (max ?tuple) :where 
    [?k :kid/age ?age] 
    [?k :kid/name ?name] 
    [(vector ?age ?name) ?tuple] 
```

笔记：

*   表达式中属性的顺序`(vector ?age ?name)`很重要

*   该查询返回单个结果，而我们可能期望一个集合，因为可能有许多年龄最大的孩子。您可以使用`(max n ?tuple)`来实现这一点。

[另请参阅http://docs.datomic.com/query.html](http://docs.datomic.com/query.html)中的聚合返回集合部分

如果您有更具体的想法，请在问题中提供更多详细信息并包含您的架构。

# asp.net - IE10 AjaxToolkit Tabpanel 错误

> ID：15971144
> 
> 赞同：2
> 
> 时间：2013-04-12T12:13:28.393
> 
> 标签：asp.net, ajaxcontroltoolkit, tabpanel, scriptresource.axd

我的标签面板在几乎所有浏览器中都可以正常工作。我的一个客户抱怨 IE 10 你基本上不能像这样切换到另一个标签。它给出了一个错误，例如：

```
SCRIPT5022: Sys.ArgumentOutOfRangeException: Value must be an integer.
Parameter name: x
Actual value was 247.1199951171875\. 
ScriptResource.axd, line 5820 character 12 
```

F12 调试器向我展示了这一点： ![在此处输入图像描述](https://i.stack.imgur.com/QQMDu.png)

您在图像中看到的代码是“copyright microsoft”，我认为它来自 ScriptResource.axd

**在问这个问题之前，我确实做了阅读。**

1.  这没有帮助：< meta http-equiv="X-UA-Compatible" content="IE=7" >
2.  我也发现了很多与 iFrame 边框宽度相关的想法
3.  表格宽度从百分比变为整数
4.  宽度删除 'px'
5.  iframe - 我在第二个选项卡中有一个 iframe，但我删除了它，我仍然收到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T19:10:12.580

您需要将项目升级到更新的 .NET 框架：

[http://codecorner.galanter.net/2013/05/01/solution-for-ie10-error-script5022-sys-argumentoutofrangeexception-value-must-be-an-integer/](http://codecorner.galanter.net/2013/05/01/solution-for-ie10-error-script5022-sys-argumentoutofrangeexception-value-must-be-an-integer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:46:14.797

我不确定为什么会发生这种情况，但可以为这个问题提出解决方法。您可以下载 AjaxControlToolkit 源并在[DomElement.js 文件](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/a2a6dc6854e0cfb4d11ffa81ad2c2383dfe35086#Client/MicrosoftAjax/Extensions/Sys/UI/DomElement.js)`$type.getLocation`中调整一些功能

在从函数返回新的 Point 对象之前添加以下代码：

```
if (typeof offsetX === "number") {
    offset = Math.round(offsetX);
}

if (typeof offsetY === "number") {
    offsetY = Math.round(offsetY);
} 
```

之后，重建解决方案并在您的项目中使用自定义 ajaxtoolkit dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T19:16:43.460

这可能是你的问题：

Asp.net 回发在 IE10 中不起作用。

[http://msdn.microsoft.com/en-us/library/ie/hh869299(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh869299(v=vs.85).aspx) [http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

[http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)

# javascript - JS计数重复出现

> ID：15971147
> 
> 赞同：1
> 
> 时间：2013-04-12T12:13:50.293
> 
> 标签：javascript, jquery, logic

我需要查找 td.aws 中的字符串是否出现超过 3 次，如果出现，则将该字符串放入新列表中。

我有一张这样的桌子：

```
<table width="100%" cellspacing="0" cellpadding="2" border="1" class="aws_data">
<tbody><tr bgcolor="#ECECEC"><th>URL (1,908)</th></tr>
<tr><td class="aws">/images/bullet3.png</td></tr>
<tr><td class="aws">/pdf-signing-tool/ErrorCode.properties</td></tr>
<tr><td class="aws">/pdf-signing-tool/Display.properties</td></tr>
<tr><td class="aws">/evcert.cfm</td></tr>
<tr><td class="aws">/evcert.cfm</td></tr>
<tr><td class="aws">/evcert.cfm</td></tr>
<tr><td class="aws">/evcert.cfm</td></tr>
<tr><td class="aws">/repository/03</td></tr>
<tr><td class="aws">/repository/0</td></tr>
etc

<div id="problems"></div> 
```

到目前为止，我有：

```
$('.aws').each(function(){
var temp = $(this).text();
var count = temp.match('/'+temp+'/g');  

if (count.length > 3)
{
    thisString = $(this).text();
    $('#problems').append(thisString)
}

}); 
```

谁能帮忙，目前我只是收到 JS 错误“计数为空”

[JS小提琴](http://jsfiddle.net/qT6Nz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:24:21.437

## [例子](http://jsfiddle.net/qT6Nz/3/)

```
//store the counts for each "text" occurrence in a hash table
var countHash = {}; 

//iterate over your tds
$('.aws').each(function(){

    //pull of the text
    var temp = $(this).text();

    //has it already been added to the list? 
    //see: 'countHash[temp] = false;' below.
    if(countHash[temp] === false){return;}

    //increment the occurrence count
    //or set to 1 if this is the first occurrence.
    countHash[temp] = (countHash[temp] || 0) + 1; 

    //have more than three been found?
    if (countHash[temp] > 3)
    {
        //add to your list
        $('#problems').append(temp);

        //ignore future occurrences
        countHash[temp] = false; 
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:29:05.070

`new RegExp()`如评论中所述，应该使用创建这样的正则表达式。除此之外，如果使用括号和问号之类的东西，使用每个表格单元格的内部文本可能会导致无效的正则表达式。因此，在这种情况下，我建议不要这样做。

您可以在遍历 each 时像这样进行频率计数`td.aws`：

```
var frequencies = {};

$('td.aws').each(function() {
    var key = $(this).text(),
    freq = frequencies[key] || 0;

    // increase the frequency and check if it goes above 3
    if (++freq > 3) {
        $('#problems').append(key);
        freq = -Infinity;
    }

    frequencies[key] = freq;
}); 
```

[**演示**](http://jsfiddle.net/qT6Nz/)

对象`frequencies`在其属性中保留每个术语的频率；一旦达到一定数量，它就会做任何你需要的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:19:53.780

```
var count = {};
$(".aws").each(function(i,v) {
    var temp = $(v).text();
    var current = count[temp];
    if (!current) {
        current = 0;
    }
    current++;
    count[temp] = current;
    if (current > 3) {
       $("#problems").append("<p>"+temp+"</p>");
    }
} 
```

我不确定您是否要从旧列表中删除出现三次的项目，所以我没有添加

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:24:32.077

您的问题在这里：`'/'+temp+'/g'`您不能在正则表达式文字中使用变量。您必须将正则表达式构建为字符串：

```
var tempRegex = new RegExp(temp, 'g');
var count = temp.match(tempRegex); 
```

您的代码中似乎存在更大的逻辑问题。现在你正在构建一个正则表达式来查看文本是否匹配自身，这总是会的。我认为您正在尝试搜索所有 TD 以确定是否存在重复项。试试这种方法：

```
var items = [];

$('.aws').each(function(){
    var currentText = $(this).text();
    var duplicate = false;

    for (var i = 0; i < items.length; i++) {
        if (items[i].text === currentText) {
            items[i].count++;

            if (items[i].count > 2) {
                console.log('found more than 2 of ' + currentText);
                $('#problems').append(currentText)
            }

            duplicate = true;
            break;
        }
    }

    if (!duplicate) {
        items.push({ text: currentText, count: 1});
    }
}); 
```

[http://jsfiddle.net/qT6Nz/2/](http://jsfiddle.net/qT6Nz/2/)

# jquery - 响应式多排瓷砖轮播 - 有可能吗？

> ID：15971149
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:13:57.297
> 
> 标签：jquery, html, css, scrollable

我需要执行以下可滚动操作：

1.  2排瓷砖
2.  灵活的宽度 - 一行可以有 4、6 和 8 个瓷砖
3.  它必须向左和向右滚动才能显示更多图块

我尝试了很长时间，但我不知道这是否可能？如果我有 2 行图块，我必须将它们包装到 div 中（因此它不能再灵活地处理图块的数量了）。当我没有包装 div 时，我有一排瓷砖..

甚至可能吗？有任何想法吗？

首先，我试图从 jQuery 工具[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)自定义可滚动，但现在我认为我不能为此目的自定义它。但也许我可以？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:03:36.240

据我了解，您只想要一个响应式轮播？

[这是](http://caroufredsel.dev7studios.com/)我经常使用的一个，我以前用它做两层旋转木马。查看此处的多行轮播[示例。](http://caroufredsel.dev7studios.com/examples/intermediate-carousels.php)

您的问题可能需要更清楚。也许创建某种图形或提供您目前所拥有的代码。

# c# - 从 XNA3.1 转换到 XNA 4.0

> ID：15971150
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:14:15.623
> 
> 标签：c#, xna, xna-4.0, xna-3.0

如何将此代码部分从 XNA 3.1 转换为 XNA 4.0。
如果有人知道请帮忙。

```
public ModelLightMesh(Viewer3D viewer, Vector3 position, float radius, Color color, float u0, float v0, float u1, float v1)
    {
        var verticies = new[] {
            new VertexPositionColorTexture(new Vector3(position.X - radius, position.Y + radius, position.Z), color, new Vector2(u1, v0)),
            new VertexPositionColorTexture(new Vector3(position.X + radius, position.Y + radius, position.Z), color, new Vector2(u0, v0)),
            new VertexPositionColorTexture(new Vector3(position.X + radius, position.Y - radius, position.Z), color, new Vector2(u0, v1)),
            new VertexPositionColorTexture(new Vector3(position.X - radius, position.Y - radius, position.Z), color, new Vector2(u1, v1)),
        };
        VertexDeclaration = new VertexDeclaration(viewer.GraphicsDevice, VertexPositionColorTexture.VertexElements);
        VertexBuffer = new VertexBuffer(viewer.GraphicsDevice, VertexPositionColorTexture.SizeInBytes * verticies.Length, BufferUsage.WriteOnly);
        VertexBuffer.SetData(verticies);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:24:03.840

Microsoft 在一系列 MSDN 文章和代码示例中强调了这些差异。

您还可以使用此处提供的备忘单：

[http://nelxon.com/resources/xna-3-1-to-xna-4-0-cheatsheet.php](http://nelxon.com/resources/xna-3-1-to-xna-4-0-cheatsheet.php)

**文章**：

*   [将 3D XNA 3.0 游戏转换为 XNA 4.0 – 示例](http://blogs.microsoft.co.il/blogs/grozen/archive/2010/10/23/converting-a-3d-xna-3-0-game-to-xna-4-0-an-example.aspx)
*   [XNA 开发中心](http://msdn.microsoft.com/en-us/centrum-xna.aspx)

PS：您的回答可能被否决了，因为您没有专门遇到麻烦并询问具体问题？

# node.js - Node.js 生产部署

> ID：15971156
> 
> 赞同：3
> 
> 时间：2013-04-12T12:14:27.140
> 
> 标签：node.js, deployment, production

现在是 2013 年，自 2011 年（新的和过时的库）以来发生了很多变化，当时最流行的 node.js 部署问题得到了解答。

我想知道您在部署 node.js 时认为最佳实践是什么。

**如何自动重启 node.js 应用程序**

监视？

**如何创建集群和负载均衡请求（websocket 支持）**

节点http代理，HAProxy？

hook.io 已被删除，因此我也不太喜欢使用 node-http-proxy。

**Node.js 日志记录实用程序**

等等...

Node.js 现在成熟了很多，你学到了什么，你有什么推荐的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:23:55.610

# 部署

我的部署选择是按子堆栈使用[舰队](https://github.com/substack/fleet)

我部署在 SmartOS 上，并让舰队中心和无人机作为[服务](https://github.com/substack/fleet/issues/46)运行，这些服务会自动重启。

我正在开发[调度](https://github.com/nisaacson/dispatcher/)程序，它是车队的前端。Dispatcher 将允许您将所有存储库保存在中央位置，例如 github 或 bitbucket，然后从中央 git 服务器部署最新代码

# 负载均衡

有关设置 http 和 https 服务器的信息，请在此处查看[我的答案。](https://stackoverflow.com/questions/15839253/express-3-0-https/15839596#15839596)在我的应用程序中，http 服务器实际上是另一个 node-http-proxy 服务器。在这个设置中，我的应用程序可以包含许多在[海港注册的小服务](https://github.com/substack/seaport)

**路由http服务器**

```
var http = require('http')
var https = require('https')
var httpProxy = require('http-proxy');
var seaport = require('seaport');
var fs = require('fs')
var inspect = require('eyespect').inspector();
var express = require('express')
function router(data, cb) {
  var app = express()
  var config = data.config
  var logger = data.logger
  var appPort = config.get('application:port');
  var routerConfig = config.get('router')
  var seaHost = config.get('seaport:host')
  var seaPort = config.get('seaport:port')
  var ports = seaport.connect(seaPort, seaHost)
  var proxy = new httpProxy.RoutingProxy();
  app.use(express.methodOverride());
  app.use(app.router)
  var server = http.createServer(app)
  app.all('/api/:service/*', function (req, res) {
    var service = req.params.service
    var ps = ports.query(service);
    if (!ps || ps.length === 0) {
      ps = null
      unavailable(req, res, service, logger);
      service = null
      return
    }
    var item = ps[0]
    // remove /api/service/ from start of the url
    var newURL = req.url.replace(/^\/api\/.*?\//, '/')
    logger.debug('proxying to api service', {
      role: router,
      service: service,
      url: req.url,
      newURL: newURL
    })
    req.url = newURL
    proxy.proxyRequest(req, res, {
      host: item.host,
      port: item.port
    });
    item = null
  })

  var pong = 'PONG'
  app.get('/ping', function (req, res) {
    res.send(pong)
  })
  app.get('/services', function (req, res) {
    return showServices(req, res, ports)
  })
  app.all('/*', function (req, res) {
    var service = 'web'
    var ps = ports.query(service);
    if (!ps || ps.length === 0) {
      unavailable(req, res, service, logger);
      service = null
      ps = null
      return
    }

    proxy.proxyRequest(req, res, {
      host: ps[0].host,
      port: ps[0].port
    });
    ps = null
  })

  var serverPort = routerConfig.port
  server.listen(serverPort, function (err, reply) {
    if (err) { return cb(err); }
    logger.debug('router application online', {
      type: 'router',
      port: serverPort
    });
    var output = {
      port: serverPort,
      server: server
    }
    cb(null, output)
  });
}
function showServices(req, res, ports) {
  var ps = ports.query();
  var data = {
    message: 'Current services registered',
    services: ps
  }
  res.writeHead(200)
  return res.end(JSON.stringify(data))
}

function isServicesURL(url) {
  var pattern = /^\/services/i;
  return pattern.test(url)
}

function unavailable(req, res, service, logger ) {
  var resData = {
    error: 'service unavailable',
    message: 'no servers are available to serve your request',
    url: req.url,
    role: 'router'
    service: service
  };
  logger.debug('router service unavailable', {
    role: 'router',
    responseData: resData
  })
  res.writeHead(500);
  return res.end(JSON.stringify(resData));
}

module.exports = router; 
```

**spinUpRouter.js**这是由舰队实际产生的节点进程

```
var inspect = require('eyespect').inspector()
var assert = require('assert')
var fs = require('fs')
var routerLib = require('./index.js');
var optimist = require('optimist');
var nconf = require('nconf')
var argv = optimist.demand(['config']).argv;
var configFilePath = argv.config
assert.ok(fs.existsSync(configFilePath), 'config file not found at path: ' + configFilePath);
var config = nconf.argv().env().file({file: configFilePath});
var logger = require('loggly-console-logger')
var routerData = {
  config: config,
  logger: logger
}
logger.debug('spinning up router', {
  type: 'router',
  configFilePath: configFilePath
})
routerLib(routerData, function (err, server) {
  inspect('router online')
}) 
```

# 日志记录

我使用[winston](https://github.com/flatiron/winston)来管理我的日志。更具体地说，我使用控制台和[Loggly](http://loggly.com/)传输。我做了这么多，我把它包装成一个模块[loggly-console-logger](https://github.com/nisaacson/loggly-console-logger)

# sql - SQL - 结合 DISTINCT 和 INNER JOIN 和 COUNT(CASE WHEN)

> ID：15971157
> 
> 赞同：2
> 
> 时间：2013-04-12T12:14:27.997
> 
> 标签：sql, distinct, case, inner-join

我有返回正确结果的 SQL。

```
select accounts.name, count( case when ((( estimated_start_date<='2013-01-01' 
and project.status='closed')

or ( estimated_start_date<='2013-01-01' and project.status='open' 
and estimated_end_date>='2013-04-01')))
then 1 else null end) as Number

from project

inner join project_cstm on project.id=project_cstm.id_c
inner join accounts on project_cstm.account_id_c=accounts.id

group by accounts.name 
```

我给了我很好的结果：

例如：

```
Telenor 5
Telecom 3 
```

现在我想`BOOKED_DATE`在`WHERE`子句中添加新字段以限制项目数量，仅在该时间间隔内创建一些项目任务。所以我用表做 INNER JOIN，`inner join project_task`结果应该更小，但结果却是我得到了这些巨大的数字。不知道如何组合它。

感谢帮助

```
Telenor 150
Telecom 980

select accounts.name, count( case when ((( estimated_start_date<='2013-01-01' 
and project.status='closed')

or ( estimated_start_date<='2013-01-01' and project.status='open' 
and estimated_end_date>='2013-04-01')))
then 1 else null end) as Number

from project

inner join project_cstm on project.id=project_cstm.id_c
inner join accounts on project_cstm.account_id_c=accounts.id
inner join project_task on project_task.project_id=project.id
where booked_date>'2013-01-01' and booked_date<'2015-01-01'
group by accounts.name 
```

由于表 PROJECT_TASK 中的行，我得到的结果远非正确。如何限制它？我试过推杆，`... count(distinct case when ...`但结果总是 1。

所以我必须以某种方式限制这个值，而不是我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:19:23.460

您为项目的每个任务计算 1，这就是为什么您有这么多。
对于每个项目，您只需将计数增加 1 次。

您想计算不同的项目，因此不要只计算 1，而是计算不同的项目 id：

```
select accounts.name
     , count( distinct  -- here distinct
        case when ((( estimated_start_date<='2013-01-01' and project.status='closed')
                 or ( estimated_start_date<='2013-01-01' and project.status='open' and estimated_end_date>='2013-04-01')))
        then project.id -- here project id
        else null 
        end) as Number
from project
    inner join project_cstm 
        on project.id=project_cstm.id_c
    inner join accounts 
        on project_cstm.account_id_c=accounts.id
    inner join project_task 
        on project_task.project_id=project.id
where booked_date>'2013-01-01' 
and booked_date<'2015-01-01'
group by accounts.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:18:53.207

我无法测试您的查询，但我认为您应该使用以下内容：

```
select accounts.name, count(DISTINCT project.id) as Number
from project   
  inner join project_cstm on project.id=project_cstm.id_c
  inner join accounts on project_cstm.account_id_c=accounts.id
  inner join project_task on project_task.project_id=project.id
where
  (booked_date>'2013-01-01' and booked_date<'2015-01-01')
  AND ((estimated_start_date<='2013-01-01' and project.status='closed')
      OR
       (estimated_start_date<='2013-01-01'
        and project.status='open'
        and estimated_end_date>='2013-04-01'))
group by accounts.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:23:42.857

您的加入表 project_task 可能在“project_id”列中有重复项

# javascript - 如何增加摩卡中单个测试用例的超时时间

> ID：15971167
> 
> 赞同：450
> 
> 时间：2013-04-12T12:15:11.250
> 
> 标签：javascript, mocha.js

我在测试用例中提交网络请求，但这有时需要超过 2 秒（默认超时）。

如何增加单个测试用例的超时时间？

* * *

## 回答 #1

> 赞同：716
> 
> 时间：2013-04-13T00:36:40.043

给你： http: [//mochajs.org/#test-level](http://mochajs.org/#test-level)

```
it('accesses the network', function(done){
  this.timeout(500);
  [Put network code here, with done() in the callback]
}) 
```

对于箭头函数使用如下：

```
it('accesses the network', (done) => {
  [Put network code here, with done() in the callback]
}).timeout(500); 
```

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2016-03-28T06:28:12.447

如果您希望使用 es6 箭头函数，您可以在定义`.timeout(ms)`的末尾添加 a `it`：

```
it('should not timeout', (done) => {
    doLongThing().then(() => {
        done();
    });
}).timeout(5000); 
```

至少这在 Typescript 中有效。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2016-02-14T22:32:25.067

*（因为我今天遇到了这个）*

使用 ES2015 粗箭头语法时要小心：

**这将失败：**

```
it('accesses the network', done => {

  this.timeout(500); // will not work

  // *this* binding refers to parent function scope in fat arrow functions!
  // i.e. the *this* object of the describe function

  done();
}); 
```

**编辑：为什么失败：**

正如@atoth 在评论中提到的那样，*胖箭头*函数没有自己的*this*绑定。*因此， it*函数不可能绑定到回调的*this*并提供*超时*函数。

*底线*：不要将箭头函数用于需要增加超时的函数。

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2017-05-14T07:49:34.600

如果您在 NodeJS 中使用，那么您可以在 package.json 中设置超时

```
"test": "mocha --timeout 10000" 
```

然后您可以使用 npm 运行，例如：

```
npm test 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2016-02-03T14:16:36.383

从命令行：

```
mocha -t 100000 test.js 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-11-14T13:39:22.177

您可能还考虑采用不同的方法，并将对网络资源的调用替换为存根或模拟对象。使用[Sinon](http://sinonjs.org/)，您可以将应用程序与网络服务解耦，专注于您的开发工作。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-11-12T03:38:02.823

**对于测试导航`Express`：**

```
const request = require('supertest');
const server = require('../bin/www');

describe('navigation', () => {
    it('login page', function(done) {
        this.timeout(4000);
        const timeOut = setTimeout(done, 3500);

        request(server)
            .get('/login')
            .expect(200)
            .then(res => {
                res.text.should.include('Login');
                clearTimeout(timeOut);
                done();
            })
            .catch(err => {
                console.log(this.test.fullTitle(), err);
                clearTimeout(timeOut);
                done(err);
            });
    });
}); 
```

在示例中，测试时间为 4000 (4s)。

注意：`setTimeout(done, 3500)`比`done`在测试时间内调用的次数少，但`clearTimeout(timeOut)`它一直避免使用。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-10-18T15:20:19.103

这对我有用！找不到任何东西可以使它与 before() 一起使用

```
describe("When in a long running test", () => {
  it("Should not time out with 2000ms", async () => {
    let service = new SomeService();
    let result = await service.callToLongRunningProcess();
    expect(result).to.be.true;
  }).timeout(10000); // Custom Timeout 
}); 
```

# c# - Entity Framework Model First - 1 to 1..0 关系 - 为什么它不喜欢非主键的外键？

> ID：15971177
> 
> 赞同：0
> 
> 时间：2013-04-12T12:15:53.303
> 
> 标签：c#, entity-framework

我正在尝试建模以下内容：

图片有很多类型，所以我在图片和类型之间制作了一个关系表。

我想知道一个图像有多少种类型，所以我需要一个标识关系的主键。

类型 1 到 1..0 关系 * 到 1 图片

我希望关系将图片的 id 和类型的 id 作为外键，并识别该关系。

它说：“多重性在角色中无效“......”因为从属角色属性不是关键属性，所以从属角色多重性的上限必须是 *”

我在 VS2012 中使用 EF 5

有什么办法可以硬编码吗？我的模型中有许多 1 到 1..0 的关系......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:49:30.160

我必须说我不明白你想说的一切，

...但我猜你想要一个`many-to-many relation in between Types and Pictures`附加到“关系”的自定义信息。

看看我在这里发的帖子，`Person`用`Picture`,`SecurityGroup`替换`Type`。而你的“关系”实体是`PersonSecurityGroupDefinition`。

[带有附加数据的 EF 代码优先多对多](https://stackoverflow.com/questions/10199158/ef-code-first-many-to-many-with-additional-data/10199455#10199455)

你不需要`pk`在你的“关系表”上。这是通过使用两者的复合键来完成的（您总是可以通过这种方式找到它）。

然后，您为每个“关系”添加额外的内容 - 就像我在`public int Privilege { get; set; }`.

# node.js - 如何通过 Forever 模块检测应用程序的重启

> ID：15971184
> 
> 赞同：5
> 
> 时间：2013-04-12T12:16:30.943
> 
> 标签：node.js

我有一个集群和永远的应用程序。我想在关闭或重新启动应用程序之前保存来自工作人员的信息。所以我使用 process.on('SIGINT') 并且它适用于 CTRL+C。

但我一直坚持Forever。是否有可能检测到应用程序以某种方式被 Forever 重新启动？有什么信号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-04T16:48:23.853

这个问题很老了，但是对于那些没有看到它的人，最新的永久版本支持 --killSignal （已在 2013 年 12 月添加），因此您可以通过示例使用`--killSignal=SIGUSR2`并捕获此信号`process.on('SIGUSR2', func)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:31:58.427

我建议`kill -s SIGUSR1 <pid>`在重新启动你的守护进程之前做。这个信号很容易被 node by 捕获`process.on('SIGUSR1')`。

```
kill -s SIGUSR1 <pid>
forever restart test.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:30:43.940

永远使用 SIGKILL 参见[https://github.com/nodejitsu/forever-monitor/blob/master/lib/forever-monitor/monitor.js#L353](https://github.com/nodejitsu/forever-monitor/blob/master/lib/forever-monitor/monitor.js#L353)

因此，请添加`process.on('SIGKILL', onStop);`到您的`process.on('SIGINT', onStop);`注意事项中，之后永远使用发送“SIGTERM”的`kill` [https://github.com/nodejitsu/forever-monitor/blob/master/lib/forever-monitor/common.js#L45](https://github.com/nodejitsu/forever-monitor/blob/master/lib/forever-monitor/common.js#L45)`process.on('SIGTERM', onStop)` .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T02:25:31.200

forever 有一个选项 --killSignal，您可以将其自定义为其他可捕获的信号（例如 SIGINT），然后在您的应用程序中，使用 process.on('SIGINT', ...) 来捕获它。有一个[官方的例子](https://github.com/nodejitsu/forever-monitor/blob/master/examples/graceful-exit.js "优雅退出.js")，console.log 语句在信号处理程序中没有效果，我认为这是一个错误，希望尽快修复。

# events - 穆工具。循环中带有事件的新元素

> ID：15971185
> 
> 赞同：0
> 
> 时间：2013-04-12T12:16:31.440
> 
> 标签：events, mootools, element

我找不到问题。也许你可以帮助我：

```
load_images: function(config, container, page) {

   console.log(page) // Every time page = 4 Why?
   var paging = new Element('div','class':'pg'}).inject(container,'after'),     
       css_class = '';

   if (data.pages>1) {
     for (var i=1; i<=data.pages; i++) {                        
        css_class   = (i == page) ? 'current' : '';

        new Element('a', {'class':css_class,'href':'javascript:void(0);','html': i,
           events: { 
               click: function(e){
                  load_images(config, container, parseInt(i));
              }
           }
        }).inject(paging);
     }
   }
}

The code above generate HTML:

<div class="pg">
   <a class="current" href="javascript:void(0);">1</a>
   <a class="" href="javascript:void(0);">2</a>
   <a class="" href="javascript:void(0);">3</a>
</div> 
```

当我单击页面链接时，我的页面变量为 4（请参阅 console.log()）。为什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:16:26.930

这是[Javascript Closure的经典案例](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

问题是在您的情况下，单击事件会在循环中创建关闭并关闭 i var，因此最终它等于 i 的最后一个值：您可以做些什么来解决它在“for”循环中是这样的：

```
for (var i=1; i<=data.pages; i++) {                        
        css_class   = (i == page) ? 'current' : '';

        (function(i){
          new Element('a', {'class':css_class,'href':'javascript:void(0);','html': i,
            events: { 
               click: function(e){
                  load_images(config, container, parseInt(i));
              }
           }
         }).inject(paging);
       })(i);
     } 
```

这样，您就可以复制 i 并将其发送到匿名函数，并且它始终“保留”其值。

要完全理解它 - 阅读我发送的链接 - 这个主题在 javascript 中有点复杂

# jquery - 由于垂直滚动条，如何克服 jquery 中的窗口宽度错误

> ID：15971186
> 
> 赞同：0
> 
> 时间：2013-04-12T12:16:33.227
> 
> 标签：jquery, css, viewport, screen-resolution

在我的布局中，我有两个容器右 div 和左 div。

CSS：

```
 #left {float:left;position:relative;width:300px;height:100%}
    #right {float:right;position:absolute;height:100%;margin-left:300px;} 
```

我已经为`right div container`使用以下 jquery 设置了宽度：

```
 var right_width = ($(window).width() - 300)
         $("#right").css("width",right_width); 
```

这很好用，两个 div 都填满了整个屏幕，没有任何水平滚动条。垂直滚动条出现在内容高度`right div` 超过 100%（屏幕高度）的情况下。由于这种垂直滚动条`right div`宽度溢出屏幕，水平滚动条会随着右 div 宽度的增加而出现。如何克服这个问题，因为我认为有和没有垂直滚动条的视口宽度存在差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:39:10.167

实际上，我的项目中有类似的问题。

一般来说，我没有找到让我满意的方法。我所做的是减少右（或左）div 的宽度，以手动为垂直滚动条腾出空间。

它将解决部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:54:46.987

检查[这个答案](https://stackoverflow.com/a/7501799/1977733)，你会得到滚动条的宽度。使用此值，您将能够设置正确的 div 位置。

# php - 在 PI 中从浏览器执行 GPIO python

> ID：15971197
> 
> 赞同：2
> 
> 时间：2013-04-12T12:17:13.940
> 
> 标签：php, python, raspberry-pi

我试图执行一个调用 python 程序来控制 Raspberry Pi 中的 GPIO 引脚的 php 脚本。我可以通过在终端中运行它来使其工作。但是当我从 midori 浏览器运行它时，我无法让它工作......请帮助我，下面是 php 代码......！

```
<?php
    echo "Executing Python";
    exec("python /usr/bin/Light.py");
 ?> 
```

以下是python代码

```
import RPi.GPIO as GPIO
 import time

 def blink(pin):

GPIO.output(pin,True)

   time.sleep(1)

GPIO.output(pin,False)

time.sleep(1)

return

GPIO.setup(11,GPIO.OUT)

for i in range(0,20):

  blink(11)

 cleanup() 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:29:59.413

除非您更改了权限，否则您需要以 root 身份运行才能使用 GPIO 模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T18:37:11.873

为 www-data 添加权限：sudo visudo

将以下行添加到末尾：www-data ALL=NOPASSWORD: /usr/bin/Light.py

# 3d - XNA 创建自定义模型处理器

> ID：15971199
> 
> 赞同：0
> 
> 时间：2013-04-12T12:17:17.857
> 
> 标签：3d, xna

我正在尝试遵循[本](http://blogs.msdn.com/b/shawnhar/archive/2006/12/07/rendering-a-model-with-a-custom-effect.aspx)教程，但在尝试实现它时遇到错误。

对于`using Microsoft.Xna.Framework.Content.Pipeline; using Microsoft.Xna.Framework.Content.Pipeline.Graphics; using Microsoft.Xna.Framework.Content.Pipeline.Processors;` 它告诉我的线条：`Error 3 The type or namespace name 'Pipeline' does not exist in the namespace 'Microsoft.Xna.Framework.Content' (are you missing an assembly reference?)`

我尝试使用的每个课程都被突出显示并告诉我以下内容：`Error 8 The type or namespace name 'ModelProcessor' could not be found (are you missing a using directive or an assembly reference?)`

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Content.Pipeline;
using Microsoft.Xna.Framework.Content.Pipeline.Graphics;
using Microsoft.Xna.Framework.Content.Pipeline.Processors;

// TODO: replace these with the processor input and output types.
using TInput = System.String;
using TOutput = System.String;
using System.IO;

namespace Game.Engine
{
    /// <summary>
    /// This class will be instantiated by the XNA Framework Content Pipeline
    /// to apply custom processing to content data, converting an object of
    /// type TInput to TOutput. The input and output types may be the same if
    /// the processor wishes to alter data without changing its type.
    ///
    /// This should be part of a Content Pipeline Extension Library project.
    ///
    /// TODO: change the ContentProcessor attribute to specify the correct
    /// display name for this processor.
    /// </summary>
    [ContentProcessor]
    public class CustomEffectModelProcessor : ModelProcessor
    {
        protected override MaterialContent ConvertMaterial(MaterialContent material, ContentProcessorContext context)
        {
            EffectMaterialContent myMaterial = new EffectMaterialContent();

            string effectPath = Path.GetFullPath("MyEffect.fx");

            myMaterial.Effect = new ExternalReference<EffectContent>(effectPath);

            return base.ConvertMaterial(myMaterial, context);
        }
    }
} 
```

# vb.net - VB.NET - 手动引发 FormClosing 事件

> ID：15971200
> 
> 赞同：0
> 
> 时间：2013-04-12T12:17:18.270
> 
> 标签：vb.net, events, formclosing

我对 vb.net 很陌生，当用户关闭表单时，我正在尝试创建一个特殊的系统。对于我的系统，我想手动引发 FormClosing 事件。

-> 那么：如何从代码中的某处引发 FormClosing 事件？

信息：表单作为“ShowDialog”弹出。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:20:07.623

要手动强制[FormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)事件，请使用表单实例调用[Close()](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)方法来关闭。

这意味着您对 Close() 的调用应该从显示的表单内部完成，因为您使用了`ShowDialog()`. 此方法是模态的，在窗体关闭之前不会返回控件

FormClosing 事件接收一个 FormClosingEventArgs 参数，您可以在其中找到[CloseReason](http://msdn.microsoft.com/en-us/library/system.windows.forms.closereason.aspx)属性。此属性是一个枚举，您可以在其中检查关闭事件的原因。

如果原因是，`UserClosing`那么您可以将 FormClosingEventArgs 的属性 Cancel 设置为 true（保持表单打开）并调用您自己的过程

# python - PDB 中的自动完成和 Tab 键

> ID：15971201
> 
> 赞同：25
> 
> 时间：2013-04-12T12:17:19.790
> 
> 标签：python, python-2.7, debugging, autocomplete, pdb

除了在 (pdb) 提示符下插入选项卡之外，我一直在尝试`TAB`做其他事情。

我想到的是触发自动完成，例如在[here](http://code.activestate.com/recipes/498182-sane-tab-completion-in-pdb/)或[here](http://maurits.vanrees.org/weblog/archive/2006/10/tab-completion-in-python-pdb-and-zopectl)中，但是 tab 键除了向 pdb 添加标签之外没有其他任何作用。

所以：

```
(pdb)var + tabKeyPressed

```

我想得到：

```
(pdb) 变量

```

代替：

```
(pdb)var[]

```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-12-11T09:32:05.167

iPython 是这个问题的第三方解决方案。有时你只能依赖普通的 Python。我找到了 2 个解决方案。

**Per-shell 解决方案 - 使用模块“rlcompleter”：**

```
$ python3

Python 3.4.3 (default, Sep 14 2016, 12:36:27) 
[GCC 4.8.4] on linux
Type "help", "copyright", "credits" or "license" for more information.

>>> import pdb
>>> pdb.set_trace()
--Return--
> <stdin>(1)<module>()->None

# press tab - but nothing
(Pdb) str.
*** SyntaxError: invalid syntax
(Pdb) --KeyboardInterrupt--
(Pdb) c
>>> import rlcompleter
>>> pdb.Pdb.complete=rlcompleter.Completer(locals()).complete
>>> pdb.set_trace()
--Return--
> <stdin>(1)<module>()->None
(Pdb) str.
str.__add__(            str.__getattribute__(   str.__name__            str.__text_signature__  str.isdigit(            str.rfind(
str.__base__(           str.__getitem__(        str.__ne__(             str.__weakrefoffset__   str.isidentifier(       str.rindex(
str.__bases__           str.__getnewargs__(     str.__new__(            str.capitalize(         str.islower(            str.rjust(
str.__basicsize__       str.__gt__(             str.__prepare__(        str.casefold(           str.isnumeric(          str.rpartition(
str.__call__(           str.__hash__(           str.__qualname__        str.center(             str.isprintable(        str.rsplit(
str.__class__(          str.__init__(           str.__reduce__(         str.count(              str.isspace(            str.rstrip(
str.__contains__(       str.__instancecheck__(  str.__reduce_ex__(      str.encode(             str.istitle(            str.split(
str.__delattr__(        str.__itemsize__        str.__repr__(           str.endswith(           str.isupper(            str.splitlines(
str.__dict__            str.__iter__(           str.__rmod__(           str.expandtabs(         str.join(               str.startswith(
str.__dictoffset__      str.__le__(             str.__rmul__(           str.find(               str.ljust(              str.strip(
str.__dir__(            str.__len__(            str.__setattr__(        str.format(             str.lower(              str.swapcase(
str.__doc__             str.__lt__(             str.__sizeof__(         str.format_map(         str.lstrip(             str.title(
str.__eq__(             str.__mod__(            str.__str__(            str.index(              str.maketrans(          str.translate(
str.__flags__           str.__module__          str.__subclasscheck__(  str.isalnum(            str.mro(                str.upper(
str.__format__(         str.__mro__             str.__subclasses__(     str.isalpha(            str.partition(          str.zfill(
str.__ge__(             str.__mul__(            str.__subclasshook__(   str.isdecimal(          str.replace(            
(Pdb) c
>>> 
```

**系统范围的解决方案 - 使用文件 ~/.pdbrc**

```
$ cat ~/.pdbrc
import rlcompleter
pdb.Pdb.complete=rlcompleter.Completer(locals()).complete
$ python3
Python 3.4.3 (default, Sep 14 2016, 12:36:27) 
[GCC 4.8.4] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import pdb
>>> pdb.set_trace()
--Return--
> <stdin>(1)<module>()->None
(Pdb) str.
str.__add__(            str.__getattribute__(   str.__name__            str.__text_signature__  str.isdigit(            str.rfind(
str.__base__(           str.__getitem__(        str.__ne__(             str.__weakrefoffset__   str.isidentifier(       str.rindex(
str.__bases__           str.__getnewargs__(     str.__new__(            str.capitalize(         str.islower(            str.rjust(
str.__basicsize__       str.__gt__(             str.__prepare__(        str.casefold(           str.isnumeric(          str.rpartition(
str.__call__(           str.__hash__(           str.__qualname__        str.center(             str.isprintable(        str.rsplit(
str.__class__(          str.__init__(           str.__reduce__(         str.count(              str.isspace(            str.rstrip(
str.__contains__(       str.__instancecheck__(  str.__reduce_ex__(      str.encode(             str.istitle(            str.split(
str.__delattr__(        str.__itemsize__        str.__repr__(           str.endswith(           str.isupper(            str.splitlines(
str.__dict__            str.__iter__(           str.__rmod__(           str.expandtabs(         str.join(               str.startswith(
str.__dictoffset__      str.__le__(             str.__rmul__(           str.find(               str.ljust(              str.strip(
str.__dir__(            str.__len__(            str.__setattr__(        str.format(             str.lower(              str.swapcase(
str.__doc__             str.__lt__(             str.__sizeof__(         str.format_map(         str.lstrip(             str.title(
str.__eq__(             str.__mod__(            str.__str__(            str.index(              str.maketrans(          str.translate(
str.__flags__           str.__module__          str.__subclasscheck__(  str.isalnum(            str.mro(                str.upper(
str.__format__(         str.__mro__             str.__subclasses__(     str.isalpha(            str.partition(          str.zfill(
str.__ge__(             str.__mul__(            str.__subclasshook__(   str.isdecimal(          str.replace(            
(Pdb) c
>>> 
```

笔记：

1.  仅在 Python 3.4 上测试

2.  操作系统 - Linux Mint

3.  基于[https://reminiscential.wordpress.com/2009/06/12/python-enable-auto-complete-in-a-pdb-session/](https://reminiscential.wordpress.com/2009/06/12/python-enable-auto-complete-in-a-pdb-session/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-12T16:34:07.180

[ipdb](https://pypi.python.org/pypi/ipdb)来救援。

> ipdb 导出函数以访问 IPython 调试器，该调试器具有 **选项卡**补全、语法高亮、更好的回溯、更好的自省功能，与 pdb 模块具有相同的界面。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-12-17T12:38:50.167

官方文件说：

> 在 3.3 版更改: 通过 readline 模块的制表符补全可用于命令和命令参数，例如，当前全局和本地名称作为 p 命令的参数提供。

[https://docs.python.org/3/library/pdb.html](https://docs.python.org/3/library/pdb.html)

所以你只需使用`p`命令：

```
(Pdb) p var[TAB] # complete global and local names
var1 var2
(Pdb) [TAB] # complete commands
EOF        b          cl         cont       disable    exit       interact   list       next       quit       retval     source     unalias    up         
a          break      clear      continue   display    h          j          ll         p          r          run        step       undisplay  w          
alias      bt         commands   d          down       help       jump       longlist   pp         restart    rv         tbreak     unt        whatis     
args       c          condition  debug      enable     ignore     l          n          q          return     s          u          until      where 
```

# webforms - 未为 DataType.MultilineText 呈现 Textarea

> ID：15971207
> 
> 赞同：0
> 
> 时间：2013-04-12T12:17:28.180
> 
> 标签：webforms, data-annotations, model-binding, asp.net-4.5, asp.net-dynamic-data

我在 ASP.NET 4.5 Web 窗体 FormView 中有一个 EditItemTemplate。我在 FormView 上设置了 ItemType，所以我使用 DynamicControls 来显示和编辑字段。

```
<asp:FormView runat="server" ItemType="FooModel">
    <EditItemTemplate>
        <asp:DynamicControl runat="server" ID="message" DataField="Message" Mode="Edit" />
    </EditItemTemplate>
</asp:FormView> 
```

这似乎可以正常工作，直到我在 ItemType 属性上设置 DataType 以使其成为多行，就像这样。

```
public class FooModel
{
    [DataType(DataType.MultilineText)]      
    public string Message { get; set; }
} 
```

这仍然给了我一个标准的文本输入。有任何想法吗？

我可以通过使用来解决它

```
<asp:TextBox ID="Message" Text='<%# Bind("Message") %>' runat="server" TextMode="MultiLine" /> 
```

...但是从我的财产上的数据类型推断它会更好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:35:08.190

您可以手动编辑动态数据字段模板。您需要做的就是进行以下`OnInit`控制检查`Text_Edit.ascx`：

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);

    if(Column.DataTypeAttribute.DataType == DataType.MultilineText)
        TextBox1.TextMode =  TextBoxMode.MultiLine;
} 
```

`Column`[FieldTemplateUserControl](http://msdn.microsoft.com/en-us/library/system.web.dynamicdata.fieldtemplateusercontrol.aspx)的属性为您提供有关模型属性元数据的所有信息。

# ios - 由于 iPhone 上的 sqlite 数据库中的数据丢失导致的奇怪行为

> ID：15971208
> 
> 赞同：1
> 
> 时间：2013-04-12T12:17:29.823
> 
> 标签：ios, cordova, sqlite

我有一个可以在 Android 和 iOS 上运行的 phonegap 应用程序。

我面临一个奇怪的问题。我的应用程序受密码保护，只有在输入正确的密码后，用户才能登录。此外，该应用程序有多个屏幕。

假设我在一个特定的屏幕上（登录后），关闭设备（应用程序仍在运行），重新打开设备并启动我的应用程序。它从 Android 上可见的屏幕开始，但在 iOS 上，什么都没有显示，只是一个白屏。

经过一些调试，我发现登录凭据存在于 Android 上的 sqlite3 数据库中，而不是 iOS 上。这是为什么 ？

# meteor - 带有 Collection.update() 的 cursor.observe({add}) 会破坏 Meteor - 为什么？

> ID：15971209
> 
> 赞同：0
> 
> 时间：2013-04-12T12:17:33.387
> 
> 标签：meteor

我正在尝试`cursor.observe({added})`根据插入的字段来计算新字段。如果观察 on ，使用`Docs.update()`添加的文档会中断`added`，Meteor 似乎在内爆之前停止循环。但是，更新`changed`作品。

为什么？我将如何计算插入时的新字段？

看评论：

```
Meteor.startup(function () {
  var cursor = Docs.find();
  var handle = cursor.observe({
    added: function (doc) {
      // This breaks Meteor. Meteor gets stuck in a loop and breaks.
      Docs.update(
        doc._id,
        {$set: {metric: getCalculatedMetric( doc.x, doc.y )}}
      );
      // However, this would log once as expected.
      // console.log(doc.name + ' has been added.');
    },

    changed: function (doc, oldDoc) {
      // This works as expected, updates myField.
      Docs.update(
        doc._id,
        {$set: {metric: getCalculatedMetric( doc.x, doc.y )}}
      );
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:10:49.137

不知道为什么这会是一个问题，但我使用方法有一些非常相似的工作

```
CollectionName.find({}).observe({
        added: function(document){
            Meteor.call('doSomething', {
                id: document._id
            });
        },
        changed: function(newDocument, oldDocument){
            Meteor.call('doSomething', {
                id: newDocument._id
            });
        }
}); 
```

如果这对你有用，如果有删除重复计算代码的额外好处

我的方法确实使用了更细粒度的查询，但这不应该是一个问题

```
doSomething : function(data) {
        if(!data.id)
            throw new Meteor.Error(500, "Missing id!");
        CollectionName.update({_id:data.id}, {$set: {
            'field':value
        }});
}, 
```

# google-cloud-endpoints - API Explorer 仅显示公共 Google 服务

> ID：15971218
> 
> 赞同：1
> 
> 时间：2013-04-12T12:18:16.320
> 
> 标签：google-cloud-endpoints

刚刚更新到 GAE 1.7.7，从那时起 API Explorer 不再显示我的 API 服务，而只显示所有公共 Google API 服务。我生成了发现文档，清除了浏览器缓存，但 GAE 日志一直显示“GET /_ah/api/explorer HTTP/1.1”302

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:48:30.237

似乎它是 GAE 的一个临时错误，但现在它又可以正常工作了。它持续了几个小时，它也让我有点疯狂......

# c - 输入文件的 SegFault

> ID：15971220
> 
> 赞同：0
> 
> 时间：2013-04-12T12:18:25.970
> 
> 标签：c

这是我的代码。编辑：来电者包括在底部。

该函数读取一个数据文件，确定有多少行和列，然后将数据存储到 data_array 中。

```
int getdata(double* *data_array, int* *data_labels, int argc, char *argv[], int *items, int *attr)
{  
// filename variables
char *filename; // pointer to a string that will contain the name of the training data file.
char *result = NULL; // used with strtok() to extract each feature value given a line of delimited features.
FILE *fp; // pointer to FILE, we can use this with fgets to access each line
char line[10000];       // array of 1000 chars for storing the raw data for one observation
char delims[4];         // an array of common delimiters for data files
delims[0]='\t';
delims[1]=' ';
delims[2]=',';
delims[3]='\0';
int i, j;
// check that we have the correct number of command line arguments
if (argc < 2)
{
   printf("2usage: progname filename\n");
   return -1;
}

if (argc < 4)
{
   printf("3usage: progname filename num_labels k(nn)\n");
   return -1;
}

if (atoi(argv[2]) < 1)
{
    printf("num_labels must be a positive integer.\n");
    return -1;
}

if (atof(argv[2]) - atoi(argv[2]) > 0)
{
    printf("num_labels must be an integer.\n");
    return -1;
}

if (atoi(argv[3]) < 1)
{
   printf("k must be a positive integer.\n");
   return -1;
}

if (atof(argv[3]) - atoi(argv[3]) > 0)
{
   printf("k must be an integer.\n");
   return -1;
}

// try to open the file
filename = argv[1];
fp = fopen(filename, "r");
if (fp == NULL)
{
   printf("could not open file: %s\n", filename);
   printf("note: the filename should be the second command line argument, after the .exe file");
    return -1;
 }
 printf("reading file: %s\n", filename);

 // GET NUMBER OF ROWS AND COLUMNS OF INPUT FILE
 fgets(line, 10000, fp);
 result = strtok(line,delims);
 while(result != NULL)
 {
  (*items)++;
  result = strtok(NULL, delims);
 }  
  (*attr)++;
  while(fgets(line,sizeof(line),fp) != NULL)
  (*attr)++;

  printf("num items: %d\n", *items);
  printf("num attributes: %d\n", *attr); 

  // NOW THAT YOU HAVE FILE SIZE, ALLOCATE MEMORY TO STORE DATA
  *data_array = malloc(*items* *attr*sizeof(double));
  //*data_labels = malloc(*items*sizeof(int));
  printf("data array size = %d\n\n",*items* *attr);

  i=0;
  j=0;
  fclose(fp);
  fp = fopen(filename, "r");
  // SAVE DATA INTO DATA_ARRAY
  while (fgets(line, 10000, fp) != NULL) 
  { 

  // we break line into tokens using our delimeters list declared at the beginning of the function
  result = strtok(line,delims);
  //printf("%d\n",i);
   while(result != NULL) {
   (*data_array)[i++] = atof(result);
   //printf("%f\n",(*data_array)[i-1]);
   result = strtok(NULL, delims);
   }
   //(*data_labels)[j++] = (int)((*data_array)[--i]);
   }
   // close the file
   fclose(fp);
   return 0;
    }

    int main(int argc, char *argv[])
    {
      double *data_array = NULL;
      int *data_labels = NULL;
      int items = 0;
      int attr = 0;

      if (getdata(&data_array, &data_labels, argc, argv, &items, &attr) == -1)
      {
        printf("reading input data failed");
        return 0;
      }
      printf("PROCESS COMPLETED WITHOUT SEGFAULT");

      #ifdef CROSSVAL
      // v-fold cross-validation
      if (crossval(data_array, atoi(argv[2]), items, attr, closest_center, centers) == -1)
      {
        printf("k-means operation failed");
        return 0;
      }
      #else

      // coords holds coordinates of one new point
      int i;
      double coords[attr];
      for(i = 0; i<attr;i++)
      {
        coords[i] = atof(argv[i+4]);
      }
    /*
      // calling knn function
      if (knn(data_array, data_labels, atoi(argv[2]), atoi(argv[3]), coords, items, attr) == -1) // use a heap!
      {
        printf("knn operation failed");
        return 0;
      }
    */
      #endif

      free(data_array);
      return 0;
     } 
```

奇怪的是这个函数在段错误之前正确输出。给定一个带有 的数据文件`2 columns and 272 rows`，我得到“ 。但是如果我在“ ”行之后和最后一行之前`num items: 2, num attributes: 272, data array size = 544"`注释掉所有内容，它仍然会出现段错误。所以它可以很好地通过打印语句，然后出现段错误，即使它之后没有重要的代码。 如此迷茫。`printf("num attributes: ...``fclose(fp)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:20:44.063

`getdata()`在`for`循环调用后程序段错误。

您不检查程序是否有足够的参数并读取`attr + 4`参数，无论它们是否存在。

这也是为什么它没有段错误的原因，当你删除`(*attr)++`. 因为那样，`attr`仍然存在`0`，您不会尝试阅读不存在的论点。

# sql - 不要重复自己：相同的 SQL 查询，但有两个不同的表

> ID：15971225
> 
> 赞同：5
> 
> 时间：2013-04-12T12:18:42.157
> 
> 标签：sql, oracle, oracle10g, union-all

我有一个 SQL 查询，其代码完全相同，但有两个不同的表（AUDIT_TRAIL_ARCHIVE 和 AUDIT_TRAIL）。我使用“UNION ALL”得到一个结果。

优秀的程序员使用[“不要重复自己”](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的原则。优秀的程序员会避免 WET（所有内容都写两次）。

如何用“不要重复自己”的原则重写这段代码？

```
SELECT REPLACE (ENTITY_KEY, 'rss_user_name=CN=', '')
 FROM    AUDIT_TRAIL_ARCHIVE AU
   INNER JOIN
      (SELECT RSS_USER_NAME
         FROM RSS_USER
        WHERE RSS_NAME = 'rmad'
              AND ADD_INFO_MASTER LIKE '%__47__UPN=%@richemont.com%') FALSCH
   ON REPLACE (AU.ENTITY_KEY, 'rss_user_name=CN=', '') =
         FALSCH.RSS_USER_NAME
WHERE     AU.RSS_NAME = 'rmad'
   AND AU.TABLE_NAME = 'rss_user'
   AND AU.ACTION = 'Insert'
   AND AU.ENTITY_KEY LIKE 'rss_user_name=CN=%'
   AND AU.ORIGIN != 'RSS'
UNION ALL
SELECT REPLACE (ENTITY_KEY, 'rss_user_name=CN=', '')
 FROM    AUDIT_TRAIL AU
   INNER JOIN
      (SELECT RSS_USER_NAME
         FROM RSS_USER
        WHERE RSS_NAME = 'rmad'
              AND ADD_INFO_MASTER LIKE '%__47__UPN=%@richemont.com%') FALSCH
   ON REPLACE (AU.ENTITY_KEY, 'rss_user_name=CN=', '') =
         FALSCH.RSS_USER_NAME
WHERE     AU.RSS_NAME = 'rmad'
   AND AU.TABLE_NAME = 'rss_user'
   AND AU.ACTION = 'Insert'
   AND AU.ENTITY_KEY LIKE 'rss_user_name=CN=%'
   AND AU.ORIGIN != 'RSS' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:23:32.370

例如：

```
SELECT REPLACE (ENTITY_KEY, 'rss_user_name=CN=', '')
 FROM    (select * --or relevant columns
          from AUDIT_TRAIL_ARCHIVE AU
          union all
          select * 
          from AUDIT_TRAIL AU
           ) AU
   INNER JOIN
      (SELECT RSS_USER_NAME
         FROM RSS_USER
        WHERE RSS_NAME = 'rmad'
              AND ADD_INFO_MASTER LIKE '%__47__UPN=%@richemont.com%') FALSCH
   ON REPLACE (AU.ENTITY_KEY, 'rss_user_name=CN=', '') =
         FALSCH.RSS_USER_NAME
WHERE     AU.RSS_NAME = 'rmad'
   AND AU.TABLE_NAME = 'rss_user'
   AND AU.ACTION = 'Insert'
   AND AU.ENTITY_KEY LIKE 'rss_user_name=CN=%'
   AND AU.ORIGIN != 'RSS' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:32:13.537

优秀的程序员使用“不要重复自己”的原则。优秀的程序员会避免 WET（所有内容都写两次）。

呵呵。我喜欢。微妙的。

另外，我可能太基础了，但会这样工作：

```
CREATE [OR REPLACE] PROCEDURE <name_of_procedure> [ (<ENTITY_KEY_variable>) ]
IS
    <ENTITY_KEY=ENTITY_KEY_variable>
BEGIN
    <your code goes here>

    [EXCEPTION
        exception_section]
END [procedure_name]; 
```

编辑：我从第一个发布的答案中看到我爱上了拖钓？傻我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:47:46.297

简直不能。SQL 是编译语言（即使它看起来像脚本），Oracle 会记住查询所依赖的 OBJECT_ID。查询的每一半都有不同的依赖关系、不同的“字节码”和不同的执行计划。

你可以

*   使用表空间分区。那么你将只有一张桌子。可以使用“select * from AUDIT_TRAIL partition ACTIVE”限制对实时数据的查询。

*   使用查询分解，如

    ```
    WITH AU AS
    (SELECT * from AUDIT_TRAIL union all select * from AUDIT_TRAIL_ARCHIVE)
    SELECT REPLACE (ENTITY_KEY, 'rss_user_name=CN=', '')
    FROM AU JOIN ...
    ... 
    ```

    但是我不确定在这种情况下Oracle是否会保证执行计划的相同效率。

# google-app-engine - 限制 AppEngine (python) NDB 仅生成 32 位密钥

> ID：15971229
> 
> 赞同：0
> 
> 时间：2013-04-12T12:19:08.793
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

我使用 Python 作为开发脚本和 NDB。

生成自动数字 id（键）的默认算法是什么？如果应用程序中的总记录低于 32 位范围，是否可以安全地假设该应用程序中的键值永远不会超过？

我的实际问题是，我的客户端应用程序不支持 64 位整数，如果 AppEngine 将生成大于 32 位整数的数字键，我的客户端应用程序将出现意外行为。一种解决方案是使用字符串键。但是大部分客户端已经编写好了，更改客户端代码将是巨大的重构。

是否可以限制 AppEngine 生成低于 32 位值的数字键？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:12:44.123

不，文档所说的只是 ID 是系统生成的：[https ://developers.google.com/appengine/docs/python/ndb/entities#numeric_keys](https://developers.google.com/appengine/docs/python/ndb/entities#numeric_keys)

但是，您可以使用`allocate_ids`让系统为您生成一些 id，您可以决定是否使用这些 id。只要`allocate_ids`最终返回足够小的值，这将起作用，但这也不能保证。

帮助（但不能保证）避免这种情况的一种方法是使用实​​体组：每个实体组都有自己的一组数字 ID。不过，这并不是对实体组的充分利用，因为对实体组的写入速率是有限的（经验法则是 1 次写入 / 秒）

真正的解决方案是咬紧牙关，让您的客户端应用程序能够处理大整数 ID。

# ios - XCode 模拟器未显示最新更改

> ID：15971230
> 
> 赞同：2
> 
> 时间：2013-04-12T12:19:14.337
> 
> 标签：ios, xcode4.5, simulator

我正在 XCode 4.5 中创建一个应用程序。我的问题是我在模拟器中运行应用程序，但它没有显示最近的更改。`Content and Settings`从选项重置时，`iOS simulator`它显示最新输出。但是，如果我关闭模拟器并再次运行应用程序，它会再次显示旧输出。任何人都可以知道，这背后是什么以及如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:23:59.857

尝试从模拟器中删除应用程序（就像在 iPhone 上那样），然后从 xcode 重新运行您的应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T11:52:13.947

发生这种情况时我会做什么：

1）从模拟器中删除应用程序

2）运行项目>清理

3）运行项目>清理构建文件夹（CMD + Shift + Option + k）

4) 手动删除应用程序的 Derived Data 文件夹（您可以在 Organizer>Projects 下找到它）

您可能不需要每次都执行所有这些步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-15T08:09:36.317

如果您正在使用 Ionic，那么很抱歉，但这是一个问题，离子变化不会显示变化。

现在，您必须从 Ionic 项目中删除 ios 平台并再次添加 ios 平台。

为我工作...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T23:42:11.550

只需重命名您的故事板并从 Project - General 这对我有用。

如果它不起作用，请删除模拟器中的应用程序，然后再试一次，这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T13:12:52.927

尝试从您的项目中删除构建目录，然后清理项目并再次构建它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-18T08:57:29.677

如果在 Xcode 中使用 Capacitor 时发生这种情况，试试这个：

1.  `ionic build`
2.  `npx cap sync`或者 `npx cap copy`
3.  在模拟器中重新运行应用程序（再次按下“播放”按钮）

注意：该`sync`命令会更新依赖项，并将所有 Web 资产复制到您的项目中。该`copy`命令仅复制 Web 资产，如果您知道不需要更新本机依赖项，​​则速度会更快。

（[https://capacitorjs.com/docs/ios](https://capacitorjs.com/docs/ios)）

# jquery - 如何在jquery中对动态添加的表行执行计算

> ID：15971240
> 
> 赞同：0
> 
> 时间：2013-04-12T12:19:36.010
> 
> 标签：jquery

嗨，有一个表格可以在单击按钮时动态添加表格行，但现在我想在表格的列中执行计算，比如我有一个列名 prevqty、thisqty、qty（这是总数量）、费率和金额，我有一个存储总金额的总字段我已经尝试过计算，但它似乎不起作用

这是我的脚本

```
 $(document).ready(function() {
var currentItem = $('#items').val();

$('#data').on('keyup', '.prevqty, .thisqty, .qty, .rate, .cal', calculateRow);

$('#addnew').click(function() {
    currentItem++;
    $('#items').val(currentItem);
    $('#data').append('<tr>\n\
        <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_' + currentItem + '" class="form-input-oth" onkeyup="return copy(this.val());"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="srno_' + currentItem + '" class="form-input-oth"/></td>\n\
        <td align="center"><textarea name="descrip_' + currentItem + '" cols="70" class="form-input-textareasm"></textarea></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="prevqty_' + currentItem + '" class="prevqty form-input-rate" onkeyup="calculateRow();"//></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="thisqty_' + currentItem + '" class="thisqty form-input-rate" onkeyup="calculateRow();"//></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="qty_' + currentItem + '" class="qty form-input-rate" onkeyup="calculateRow();"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="rate_' + currentItem + '" class="rate form-input-rate" onkeyup="calculateRow();"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="amt_' + currentItem + '" class="cal  form-input-amt" onkeyup="calculateRow();"/></td>\n\
        </tr>'
                     );
});

function calculateSum() {
    var sum = 0;
    $(".cal").each(function () {
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    $("#total").val(sum.toFixed(2));
}
function calculateRow() {
    var cost = 0;
    var $row = $(this).closest("tr");
    var prevqty = parseFloat($row.find('.prevqty').val());
    var thisqty = parseFloat($row.find('.thisqty').val());
    var qty = parseFloat($row.find('.qty').val(prevqty + thisqty));
        //parseFloat($row.find('.qty').val());
    alert(qty);
    if (isNaN(qty)) {
        $row.find('.qty').val("0");
    } else {
        $row.find('.qty').val(qty);
    }
    // changed the following line to only look within the current row
    var rate = parseFloat($row.find('.rate').val());

    cost = qty * rate;

    if (isNaN(cost)) {
        $row.find('.cal').val("0");
    } else {
        $row.find('.cal').val(cost);
    }
    calculateSum();
}}); 
```

我在这里有一个工作小提琴，prevqty 和 thisqty 工作正常，但费率和金额计算不起作用，请参见此处[http://jsfiddle.net/rey_kahn/YS4N2/](http://jsfiddle.net/rey_kahn/YS4N2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:25:45.187

每次您的`$("#addnew").click`事件触发时，您都需要重新绑定该`keyup/calculateRow`方法。就像是：

```
$('#addnew').click(function() {
    currentItem++;
    $('#items').val(currentItem);
    $('#data').append('<tr>\n\
        <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_' + currentItem + '" class="form-input-oth" onkeyup="return copy(this.val());"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="srno_' + currentItem + '" class="form-input-oth"/></td>\n\
        <td align="center"><textarea name="descrip_' + currentItem + '" cols="70" class="form-input-textareasm"></textarea></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="prevqty_' + currentItem + '" class="prevqty form-input-rate" onkeyup="calculateRow();"//></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="thisqty_' + currentItem + '" class="thisqty form-input-rate" onkeyup="calculateRow();"//></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="qty_' + currentItem + '" class="qty form-input-rate" onkeyup="calculateRow();"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="rate_' + currentItem + '" class="rate form-input-rate" onkeyup="calculateRow();"/></td>\n\
            <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="amt_' + currentItem + '" class="cal  form-input-amt" onkeyup="calculateRow();"/></td>\n\
        </tr>'
                     );
    $('#data').off('keyup').on('keyup', '.prevqty, .thisqty, .qty, .rate, .cal', calculateRow);
}); 
```

`$("#data").off('keyup').on(...`在活动结束时注意到了吗？那应该使您的新行正确计算。

**更新**

查看您在 jsfiddle 评论中发布的代码后，我发现了一些 HTML 错误，但我认为真正的问题是您设置/计算的方式`qty`。看看这个更新小提琴：http: [//jsfiddle.net/YS4N2/1/](http://jsfiddle.net/YS4N2/1/)

在那里你会看到我将 qty 输入与它用于计算的方式分开设置。这工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T09:26:34.947

在开头添加了 Default Row 和 Grand Total 。

以及一些细微的变化。

```
<table border="1px" width="90%" id="data">                  
              <tr>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Order</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Sr No.</font><span></span></label></td>
                 <td width="580px" align="center"><label for=""><font color="#0099FF" size="3px">Description</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Unit</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Previous Qty.</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">This Bill Qty</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Total Quantity</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Rate</font><span></span></label></td>
                 <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Amount</font><span></span></label></td>
              </tr>
               <tr>
                <td><input type="text" size="6" maxlength="6" maxlength="6" name="ord_' + currentItem + '" class="form-input-oth" onkeyup="return copy(this.val());"/></td>
                <td><input type="text" size="6" maxlength="6" maxlength="6" name="srno_' + currentItem + '" class="form-input-oth"/></td>     
                <td><textarea name="descrip_' + currentItem + '" cols="70" class="form-input-textareasm"></textarea></td>     
                <td><input type="text" size="6" maxlength="9" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"/></td>     
                <td><input type="text" size="6" maxlength="9" maxlength="6" name="prevqty_' + currentItem + '" class="prevqty "/></td>     
                <td><input type="text" size="6" maxlength="9" maxlength="6" name="thisqty_' + currentItem + '" class="thisqty "/></td>     
                <td><input type="text" size="6" maxlength="9" maxlength="6" name="qty_' + currentItem + '" class="qty "/></td>     
                <td><input type="text" size="6" maxlength="9" maxlength="6" name="rate_' + currentItem + '" class="rate "/></td>     
                <td><input type="text" size="6" maxlength="9" maxlength="6" name="amt_' + currentItem + '" class="cal"/></td>     
              </tr>
              <tr>
                <td colspan="8"></td>
                <td><input type="text" id="total"/></td>
              </tr> 
```

检查更新链接：http: [//jsfiddle.net/YS4N2/9/](http://jsfiddle.net/YS4N2/9/)

# iphone - ImageView 不显示阴影

> ID：15971241
> 
> 赞同：1
> 
> 时间：2013-04-12T12:19:38.097
> 
> 标签：iphone, objective-c, uiimageview, shadow

我试图以`UIImageview`以下方式在一个阴影上放置阴影：

```
imageView.layer.shadowColor = [UIColor purpleColor].CGColor;
imageView.layer.shadowOffset = CGSizeMake(0, 1);
imageView.layer.shadowOpacity = 1;
imageView.layer.shadowRadius = 1.0;
imageView.clipsToBounds = NO; 
```

但是当`UIImageview`没有图像或背景颜色作为清晰的颜色阴影时不显示。我什至尝试放置透明图像，但它仍然没有显示。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:30:58.847

如果图像视图不包含任何内容，则没有什么可以制作阴影。在这种情况下，您可以做的是定义一个明确的阴影矩形，而不是使用图像内容：

```
CGPathRef shadowPath = CGPathCreateWithRect(imageView.bounds, NULL);
imageView.layer.shadowPath = shadowPath;
CGPathRelease(shadowPath); 
```

事实上，在一般情况下添加阴影时，这种技术可以提供显着的性能提升，因为不需要根据图层内容动态计算阴影。例如，您可以使用此技术来提高滚动性能。Apple 在他们的一个 WWDC 视频中提到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:46:31.303

如果您想要一个没有图像的阴影，那么请寻求`Mike Weller's`解决方案，`explicit shadow rect`老实说，我比我的更喜欢这个答案，但作为替代方案，您可以尝试设置`maskToBOunds`并`NO`添加一个`shadowPath`喜欢：

```
 // Set your basic shadow properties.
 imageView.layer.shadowColor = [[UIColor purpleColor] CGColor];
 imageView.layer.shadowOpacity = 1.0f;
 imageView.layer.shadowOffset = CGSizeMake(0, 1.0f);
 imageView.layer.shadowRadius = 1.0;

 // Unmask from bounds
 imageView.layer.masksToBounds = NO;

 // Create a UIBezierPath
 UIBezierPath *path = [UIBezierPath bezierPathWithRect:imageView.bounds];

 // Set the UIBezierPath (path) to the shadowPath
 imageView.layer.shadowPath = [path CGPath]; 
```

预先警告，如果用于很多事情，这会影响性能，但如果用于一两件事情，我只会注意到如果有任何性能影响较小。

但就像我说我喜欢`Mike Weller's`解决方案一样，我非常喜欢它，我可能会自己更改代码。我只提供一个替代方案。

# git - git：使用单个 rebase 命令将他们的提交放在我的提交之后

> ID：15971244
> 
> 赞同：2
> 
> 时间：2013-04-12T12:19:48.287
> 
> 标签：git

假设 master 和 origin/master 分歧。
我在 master 上，我想在我的提交之后从 origin/master 提交提交，然后推送 --force。

```
 A---B---C origin/master
    /
D---E---F---G *master

     A---B---C origin/master
    /
D---E---F---G---A'---B'---C' *master 
```

变体 1：

```
git branch -f tmp
git reset --hard origin/master
git rebase tmp 
```

这种变体很糟糕，因为 'git reset --hard' 会检出一些文件，而 'git rebase' 在应用提交之前会再次重写它们。这是一份多余的工作。
变体 2：

```
git branch -f tmp origin/master
git rebase --onto master master tmp
git branch -f master
git checkout master 
```

命令太多。我只想用一个命令来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:24:38.703

我得到了答案：

```
git cherry-pick HEAD..origin/master 
```

虽然cherry-pick不像rebase那么聪明，并且在这种情况下不会丢弃提交（k，l，m）：

```
 /--k---l---m---A---B---C origin/master
    /
D---E---k'--l'--m'---F---G *master 
```

# php - 使用 YII COutputCache 存储 HTTP 状态码

> ID：15971248
> 
> 赞同：2
> 
> 时间：2013-04-12T12:20:02.623
> 
> 标签：php, caching, yii, yii-components

我们正在使用 YII 框架，并使用 COutputCache 来缓存 RESTful Web 服务的结果。RESTful Web 服务使用不同的 HTTP 状态代码来指示操作是否成功执行。不幸的是，HTTP 状态代码没有保存在缓存中。

因此，当 RESTful Web 服务返回错误，例如状态 403（未授权）时，结果数据将存储在缓存中。下一次完成相同的请求时，从缓存中获取正确的输出正文，但随后返回 HTTP 状态代码 200（成功），它应该返回相同的 403。

有两种方法可以解决这个问题：

1.  不要在缓存中存储任何状态码不是 200 的数据
2.  将http状态码存储在缓存中，当内容来自缓存时使用它来设置正确的状态码

最好，我们会选择第二种选择。第一个选项可能是（临时）解决方法。

我们正在努力让这两种选择都发挥作用。我们应该如何扩展 COutputCache 以使其中之一（最好是选项 2）工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:03:52.257

我会使用[数据缓存](http://www.yiiframework.com/doc/guide/1.1/en/caching.data "数据缓存")。有了这个，您可以决定选项 1 或 2。我个人更喜欢选项 1，因为有时您可能会遇到临时服务器错误 (500) 或其他问题。您不应该缓存临时错误的结果。

# c++ - 计时器取决于大写锁定

> ID：15971249
> 
> 赞同：1
> 
> 时间：2013-04-12T12:20:04.190
> 
> 标签：c++, winforms, visual-studio-2010

我正在使用 Visual Studio 2010 C++，我正在制作一个 Windows 窗体应用程序。我的问题是如何制作一个取决于大写锁定状态启动和停止的计时器，就像它会在大写锁定打开时启动并在大写锁定关闭时停止。像这样的东西

```
public void keyDownEvent(... )
    {
       if (capslockOn != 0)
           timer1->enabled = true
       else
           timer1->enabled = false
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:29:38.713

在 C++ 中，您可以使用 Windows API 函数`GetKeyState`来确定 CAPS LOCK 键的状态：

```
SHORT WINAPI GetKeyState(
  _In_  int nVirtKey
); 
```

测试：

```
if ((GetKeyState(VK_CAPITAL) & 0x0001)!=0)
  // Caps Lock is ON
else
  // Caps Lock is OFF 
```

哪里`VK_CAPITAL`是 0x14。低位打开或关闭，指示键的状态。

# c# - 屏幕捕获中出现 GDI+ 中的一般错误

> ID：15971251
> 
> 赞同：0
> 
> 时间：2013-04-12T12:20:07.300
> 
> 标签：c#, screenshot

我正在编写一个拍摄屏幕截图的应用程序，但它会随机抛出 GDI+ 通用错误。不幸的是，一个通用错误并不能帮助我很好地调试。我的屏幕截图代码是：

```
 static void CaptureScreen()
    {
        bmpScreenshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);
        // Create a graphics object from the bitmap
        gfxScreenshot = Graphics.FromImage(bmpScreenshot);
        // Take the screenshot from the upper left corner to the right bottom corner
        gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);
        // Save the screenshot to the specified path that the user has chosen
        bmpScreenshot.Save(savePath + "img" + times.ToString()+ ".png", ImageFormat.Png);
    } 
```

这偶尔会给我一个一般错误，所以我想“也许我应该处理位图和图形变量”

```
 static void CaptureScreen()
    {
        bmpScreenshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);
        // Create a graphics object from the bitmap
        gfxScreenshot = Graphics.FromImage(bmpScreenshot);
        // Take the screenshot from the upper left corner to the right bottom corner
        gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);
        // Save the screenshot to the specified path that the user has chosen
        bmpScreenshot.Save(savePath + "img" + times.ToString()+ ".png", ImageFormat.Png);

        bmpScreenshot.Dispose();
        gfxScreenshot.Dispose();
    } 
```

然后删除所述文件：

```
 for (int i = 1; i == times; i++)
            {
                File.Delete(savePath + @"\img" + i.ToString() + ".png");
            }
            times = 0; 
```

但是，如果您运行两次，则表示该文件正在使用中，如果您正在写入同一个文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:28:18.280

以下可能会有所帮助：

```
using (bmpScreenshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb))
using (gfxScreenshot = Graphics.FromImage(bmpScreenshot))
{
    // Take the screenshot from the upper left corner to the right bottom corner
    gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);

    Bitmap bmpScreenshot2 = new Bitmap(bmpScreenshot); // FIX: Change "S" to "s"...
    // Save the screenshot to the specified path that the user has chosen
    bmpScreenshot2.Save(savePath + "img" + times.ToString()+ ".png", ImageFormat.Png);
} 
```

# python - numpy - 列向量乘以行向量的标量乘法

> ID：15971257
> 
> 赞同：6
> 
> 时间：2013-04-12T12:20:25.830
> 
> 标签：python, vector, matrix, numpy

在 python numpy 中解决以下问题的最佳和最有效的方法是什么：

给定一个权重向量：

```
weights = numpy.array([1, 5, 2]) 
```

和一个值向量：

```
values = numpy.array([1, 3, 10, 4, 2]) 
```

结果我需要一个矩阵，它在每一行包含`values`向量标量乘以的值`weights[row]`：

```
result = [
    [1,  3, 10,  4,  2],
    [5, 15, 50, 20, 10],
    [2,  6, 20,  8,  4]
] 
```

我发现的一种解决方案如下：

```
result = numpy.array([ weights[n]*values for n in range(len(weights)) ]) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:27:50.430

这种操作称为[外积](http://en.wikipedia.org/wiki/Outer_product)。可以使用[`numpy.outer()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.outer.html)：

```
In [6]: numpy.outer(weights, values)
Out[6]: 
array([[ 1,  3, 10,  4,  2],
       [ 5, 15, 50, 20, 10],
       [ 2,  6, 20,  8,  4]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T12:27:09.030

您可以重塑`weights`为维度 (3,1) 数组，然后将其乘以`values`

```
weights = numpy.array([1, 5, 2])[:,None]  #column vector
values = numpy.array([1, 3, 10, 4, 2])
result = weights*values

print(result)

array([[ 1,  3, 10,  4,  2],  
      [ 5, 15, 50, 20, 10],  
      [ 2,  6, 20,  8,  4]]) 
```

[这个答案](https://stackoverflow.com/a/14757382/1860757)解释了`[:,None]`

# mysql - 为什么 Cloudbees Jenkins 会因 MySQL 的 Access denied 错误而间歇性失败？

> ID：15971261
> 
> 赞同：0
> 
> 时间：2013-04-12T12:20:50.227
> 
> 标签：mysql, cloudbees

我们已经设置 Cloudbees Jenkins 以在它检测到 Github 中的提交时运行集成测试作业。但由于某些奇怪的原因，一些间歇性构建失败并出现以下错误：

错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用密码：是）

在我们的集成测试工作中，我们执行以下操作：

1.  如果 MySQL 数据库存在，则删除它。
2.  为集成测试创建一个新数据库。
3.  运行集成测试（Junit）

我们已经将 MySQL admin 的密码设置为 root 用户的“mysql”——通过在作业中执行 shell 命令。后来我们删除了它，因为它下一次失败了，这表明密码不需要每次都由作业设置。

关于为什么会发生这种情况的任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:16:22.740

Cloudbees 平台使用从池，您的构建可能发生在它已经构建的节点上（分配算法试图为您提供这样的节点，以便您获得所有依赖项已经配置）但有时您将不得不在一个节点上开始构建新鲜的新节点。因此，您的构建需要在这两种情况下完全可重现。

可能的解决方法是使此密码初始化以某种方式为条件，以便您检测数据库是否已设置，或强制执行完全重置，以便您可以在每次构建时安全地运行 init 命令

# highstock - 用于highstocks中的导航器的隐藏系列休息导航器

> ID：15971263
> 
> 赞同：1
> 
> 时间：2013-04-12T12:20:53.510
> 
> 标签：highstock

如果我在 highstocks 中隐藏用于导航器的系列并动态添加数据，导航器将停止渲染，并且图表不会滑动到新点。

```
series.hide(); 
```

看看[http://jsfiddle.net/QP2CL/](http://jsfiddle.net/QP2CL/)。我添加了两个系列，然后在 10 秒后隐藏第一个系列。然后导航器不会更新。

我尝试控制导航器并在代码中向其添加数据，但随后该系列不会滑动以自动显示新添加的点。[http://jsfiddle.net/zEgEF/1/](http://jsfiddle.net/zEgEF/1/)

如果源系列被隐藏+自动滑动以显示动态添加的点，关于如何始终显示导航器的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:12:11.020

默认情况下，Navigator 包含第一个系列。虽然为隐藏系列添加点不会触发重新计算（以获得更好的性能），但 Navigator 也不会更新。

但是，您的第二个解决方案几乎可以工作，您需要添加的只是设置新的极端，请参阅：http: [//jsfiddle.net/zEgEF/2/](http://jsfiddle.net/zEgEF/2/)

代码：

```
 // set up the updating of the chart each second
                var chart = this;
                var axis = chart.xAxis[0];
                var ex = axis.getExtremes();
                var series1 = this.series[0];
                var navigator = this.series[1];
                setInterval(function() {
                    var x = (new Date()).getTime(), // current time
                    y1 = Math.round(Math.random() * 100);
                    y2 = Math.round(Math.random() * 100);
                    series1.addPoint([x, y1], false, false);
                    navigator.addPoint([x, y2], false, false);
                    axis.setExtremes(x - (ex.max- ex.min),x,false); <-- set new extremes
                    chart.redraw();
                }, 1000); 
```

# javascript - 如果引用者使用 https，我如何通过 JavaScript 获取正确的引用者？

> ID：15971264
> 
> 赞同：3
> 
> 时间：2013-04-12T12:20:54.120
> 
> 标签：javascript, html, referrer

我`document.referrer`过去常常通过 JavaScript 读取引荐来源网址，例如，如果用户点击 google 搜索结果链接并登陆我的网站：

```
http://www.google.com -> Click on search result -> redirect -> http://www.mysite.com => document.redirect returns correct referrer 
```

现在，只要通过 http 传递 google 搜索结果，它就可以正常工作，**但**如果使用 httpS，`document.referrer`则始终为空：

```
https://www.google.com -> Click on search result -> redirect -> http:/www.mysite.com => document.redirect is empty 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:25:45.457

> 当您从[https://www.google.com](https://www.google.com)进行搜索时，您通过我们的自然搜索列表访问的网站仍会知道您来自 Google，但不会收到有关每个单独查询的信息。

请阅读：http: [//googleblog.blogspot.com/2011/10/making-search-more-secure.html](http://googleblog.blogspot.com/2011/10/making-search-more-secure.html)

# c# - 如何使面板垂直滚动条正常工作（出现但不执行任何操作）？

> ID：15971267
> 
> 赞同：0
> 
> 时间：2013-04-12T12:20:59.393
> 
> 标签：c#, scroll, scrollbar, panel, vertical-scrolling

我已经以编程方式将滚动条添加到表单中的面板中，但是当我运行应用程序时，滚动条不会执行任何操作。

如何让它上下滚动面板？

非常感激。

```
pnlGantt.Visible = true;
ScrollBar vScrollBar1 = new VScrollBar();
vScrollBar1.Dock = DockStyle.Right;
vScrollBar1.Scroll += (sender, e) => { pnlGantt.VerticalScroll.Value = vScrollBar1.Value; };
pnlGantt.Controls.Add(vScrollBar1); 
```

控制板： ![在此处输入图像描述](https://i.stack.imgur.com/EfffD.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:18:55.170

您要滚动放置的内容是什么？它是一个堆栈面板吗？您的滚动条不知道它应该控制的内容/面板的大小。

尝试将您的内容（pnlGantt）放在 XAML 中的 ScrollViewer 中。现在您将滚动条放置在 pnlGantt 中。

# css - 使用变换和关键帧时如何创建 DRY CSS

> ID：15971271
> 
> 赞同：3
> 
> 时间：2013-04-12T12:21:14.567
> 
> 标签：css, keyframe

[我](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)试图在`transform`与`keyframes`. 假设我有以下内容：

**HTML**

```
<div id="box"></div> 
```

**CSS**

```
#box {
    width:300px;
    height:300px;
    background-color:red;

    animation: animate 5s;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    animation-timing-function: ease-in-out;
}
@keyframes animate {
    from {
        transform: scale(0.8) translateY(100px) rotate(10deg);
    }
    to {
        transform: scale(0.8) translateY(100px) rotate(-10deg);
    }
} 
```

[JSFiddle 示例](http://jsfiddle.net/gmn3L/)。

如何防止在动画中执行`scale(0.8)`and ？`translateY(100px)`我只希望它来回旋转，而不必在每个步骤的变换中应用这些属性。这里只使用了两个步骤（`from`和`to`），但是如果使用多个步骤（例如使用`0%`, `20%`, `40%`, `60%`, `80%`, `100%`）则意味着很多重复的代码。正如您可以想象的那样，当稍后出现更改时，这并不是很好。

最终，我正在寻找这样的东西（这是不可能的，因为该`transform`属性将被覆盖）：

```
#box {
    transform: scale(0.8) translateY(100px);
}

@keyframes animate {
    from {
        transform: rotate(10deg);
    }
    to {
        transform: rotate(-10deg);
    }
} 
```

这甚至可能吗？

附言。我不是在寻找将`width`/更改`height`为`scale`和/或将`margin`/`top`属性更改为的答案`translate`。LESS/SASS 也没有任何东西可以使值易于更改，因为它仍然会导致重复的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T14:58:55.007

我为您整理了两个选项[-jsFiddle](http://jsfiddle.net/apaul34208/gmn3L/9/)

**选项 1** - 不是 DRY，而是更浓缩一点：

```
 #box {
        width:300px;
        height:300px;
        background:red;
        animation: animate 1s ease-in-out 0s infinite alternate;
    }
    @keyframes animate {
        from {
            transform: scale(0.8) translateY(100px) rotate(10deg);
        }
        to {
            transform: scale(0.8) translateY(100px) rotate(-10deg);
        }
    } 
```

**选项 2** - 技术上干燥，但不一定“更好”

```
<div id="option2">
    <div id="box2"></div>
</div>

#option2{
    transform: scale(0.8) translateY(100px);
}
#box2 {
    width:300px;
    height:300px;
    background-color:blue;
    animation: animate2 6s ease-in-out 0s infinite alternate;
}
@keyframes animate2 {
    0%, 40%, 80% {
        transform: rotate(10deg);
    }
    20%, 60%, 100% {
        transform: rotate(-10deg);
    }
} 
```

我猜想使用选项 2 可能是值得的，如果您使用的是更复杂的动画，但我不确定是否只是将它包装在一个包含`div`和缩放/翻译包含`div`将提供任何真正的好处小规模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:40:42.877

哇，所以我认为肯定有一种方法可以做到这一点，而不必为每个关键帧动画重新​​编写 scale 和 translateY 属性。我尝试了几种不同的方法，但无法获得您想要的结果。如果参数是新的，则似乎 transform 应该能够接受更多参数而不会覆盖旧参数。

我知道您说过您不想使用 LESS/SASS，因为它在技术上并不干燥，但如果您希望在一个地方编写代码并在任何地方进行更新，我会建议您这样做。我认为它是干的，因为你没有重复自己（即使代码是）。我想不出任何其他方法来得到你想要的。

# apache - 已启用不安全的 HTTP 方法 - 如何禁用

> ID：15971276
> 
> 赞同：19
> 
> 时间：2013-04-12T12:21:29.010
> 
> 标签：apache, security

我们正在我们的应用程序 URL 上运行理性应用程序扫描，它返回以下结果：

似乎 Web 服务器配置为允许以下一种（或多种）HTTP 方法（动词） - 删除 - 搜索 - 复制 - 移动 - PROPFIND - PROPPATCH - MKCOL - LOCK - UNLOCK - PUT

为了解决这个问题，我添加了一个 RewriteRule 来禁止任何这些方法。现在，当我手动测试时，我得到响应代码 403：

```
curl -X PUT https://someurl.com/somecontext/somepage.xhtml

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /somecontext/somepage.xhtml
on this server.</p>
</body></html> 
```

但理性的应用程序扫描仍然显示这是一个问题。有没有人遇到过同样的问题。此 URL 通过 AJP 转到 tomcat 后端。将不胜感激这个解决方案。

PS：我想到了 Limit 和 LimitExcept 但我不确定它是否会阻止通过 mod_proxy 或 mod_jk 的请求

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T06:46:47.173

最终奏效的简单解决方案

```
RewriteEngine On
RewriteCond %{REQUEST_METHOD} !^(GET|POST|HEAD)
RewriteRule .* - [R=405,L] 
```

这让应用程序扫描愉快（我也是）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T14:26:29.183

我怀疑 Apache 正在将 OPTIONS 请求（获取可能支持的方法列表）转发给 Tomcat。然后你会得到默认的 HttpServlet 实现[`doOptions`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doOptions%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)，它显然会返回一个`Allow`包含在其中的标头`TRACE`。

您可以覆盖`doOptions`以`TRACE`从这个误导性列表中删除，例如匹配 Apache：

```
response.setHeader("Allow", "OPTIONS, GET, HEAD, POST"); 
```

或者，如果您确定永远不需要它的任何其他功能（例如 CORS 预飞行），您可以完全阻止 OPTIONS。顺便说一句，您还可以将[Limit](http://httpd.apache.org/docs/2.4/mod/core.html#limit)与 mod_access 一起使用来限制对所需方法的访问，而不必拖入 mod_rewrite 处理链。

或者：如果您确定您实际上没有`TRACE`或任何其他不需要的方法可用，您可以忽略该发现。AppScan 试图警告您，*看起来**可能*有一些危险的方法可用，但它实际上并没有发现这样的漏洞。返回`OPTIONS`方法实际上不起作用是不可取的，但这不是真正的安全问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-27T04:32:05.960

我们最初在 Apache 的 httpd.conf 中设置了下面的 conf 以禁用易受攻击的 HTTP 方法[TRACE|TRACK|PUT|DELETE|CONNECT|OPTIONS]，但它对我们不起作用：

```
 RewriteEngine on

    RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK|PUT|DELETE|CONNECT|OPTIONS)

    RewriteRule .* - [F] 
```

现在，我们设置了以下规则及其工作：

```
 Order allow,deny

 Allow from all

 <LimitExcept POST GET>

       Deny from all

 </LimitExcept> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T14:11:01.403

我认为 AppScan 以及所有与此相关的扫描仪都使用 OPTIONS 指令来找出启用的方法。您可能需要在重写规则中添加它。

最好的方法是检查您的文档并完全禁用这些方法。

干杯，扎克

# javascript - 下拉列表上的 javascript 验证

> ID：15971279
> 
> 赞同：0
> 
> 时间：2013-04-12T12:21:41.283
> 
> 标签：javascript, html-select

我有两个下拉列表来选择从 0 到 23 的值。我想要的是，当用户从第一个列表中选择一个值时，他不能在第二个列表中选择低于该值的值。

我应该如何在这里通过 javascript 添加验证？！！

```
<select name="hourfrom">
    <option value="0" @(Request["hourfrom"] == "0" ? " selected=\"selected\"" : "") >0</option>
    <option value="1" @(Request["hourfrom"] == "1" ? " selected=\"selected\"" : "") >1</option>
    <option value="2" @(Request["hourfrom"] == "2" ? " selected=\"selected\"" : "") >2</option>
    <option value="3" @(Request["hourfrom"] == "3" ? " selected=\"selected\"" : "") >3</option>
    <option value="4" @(Request["hourfrom"] == "4" ? " selected=\"selected\"" : "") >4</option>
    <option value="5" @(Request["hourfrom"] == "5" ? " selected=\"selected\"" : "") >5</option>
    <option value="6" @(Request["hourfrom"] == "6" ? " selected=\"selected\"" : "") >6</option>
    <option value="7" @(Request["hourfrom"] == "7" ? " selected=\"selected\"" : "") >7</option>
    <option value="8" @(Request["hourfrom"] == "8" ? " selected=\"selected\"" : "") >8</option>
    <option value="9" @(Request["hourfrom"] == "9" ? " selected=\"selected\"" : "") >9</option>
    <option value="10" @(Request["hourfrom"] == "10" ? " selected=\"selected\"" : "") >10</option>
    <option value="11" @(Request["hourfrom"] == "11" ? " selected=\"selected\"" : "") >11</option>
    <option value="12" @(Request["hourfrom"] == "12" ? " selected=\"selected\"" : "") >12</option>
    <option value="13" @(Request["hourfrom"] == "13" ? " selected=\"selected\"" : "") >13</option>
    <option value="14" @(Request["hourfrom"] == "14" ? " selected=\"selected\"" : "") >14</option>
    <option value="15" @(Request["hourfrom"] == "15" ? " selected=\"selected\"" : "") >15</option>
    <option value="16" @(Request["hourfrom"] == "16" ? " selected=\"selected\"" : "") >16</option>
    <option value="17" @(Request["hourfrom"] == "17" ? " selected=\"selected\"" : "") >17</option>
    <option value="18" @(Request["hourfrom"] == "18" ? " selected=\"selected\"" : "") >18</option>
    <option value="19" @(Request["hourfrom"] == "19" ? " selected=\"selected\"" : "") >19</option>
    <option value="20" @(Request["hourfrom"] == "20" ? " selected=\"selected\"" : "") >20</option>
    <option value="21" @(Request["hourfrom"] == "21" ? " selected=\"selected\"" : "") >21</option>
    <option value="22" @(Request["hourfrom"] == "22" ? " selected=\"selected\"" : "") >22</option>
    <option value="23" @(Request["hourfrom"] == "23" ? " selected=\"selected\"" : "") >23</option>

    </select> 
```

至：

```
 <select name="hourto">
      <option value="0" @(Request["hourto"] == "0" ? " selected=\"selected\"" : "") >0</option>
    <option value="1" @(Request["hourto"] == "1" ? " selected=\"selected\"" : "") >1</option>
    <option value="2" @(Request["hourto"] == "2" ? " selected=\"selected\"" : "") >2</option>
    <option value="3" @(Request["hourto"] == "3" ? " selected=\"selected\"" : "") >3</option>
    <option value="4" @(Request["hourto"] == "4" ? " selected=\"selected\"" : "") >4</option>
    <option value="5" @(Request["hourto"] == "5" ? " selected=\"selected\"" : "") >5</option>
    <option value="6" @(Request["hourto"] == "6" ? " selected=\"selected\"" : "") >6</option>
    <option value="7" @(Request["hourto"] == "7" ? " selected=\"selected\"" : "") >7</option>
    <option value="8" @(Request["hourto"] == "8" ? " selected=\"selected\"" : "") >8</option>
    <option value="9" @(Request["hourto"] == "9" ? " selected=\"selected\"" : "") >9</option>
    <option value="10" @(Request["hourto"] == "10" ? " selected=\"selected\"" : "") >10</option>
    <option value="11" @(Request["hourto"] == "11" ? " selected=\"selected\"" : "") >11</option>
    <option value="12" @(Request["hourto"] == "12" ? " selected=\"selected\"" : "") >12</option>
    <option value="13" @(Request["hourto"] == "13" ? " selected=\"selected\"" : "") >13</option>
    <option value="14" @(Request["hourto"] == "14" ? " selected=\"selected\"" : "") >14</option>
    <option value="15" @(Request["hourto"] == "15" ? " selected=\"selected\"" : "") >15</option>
    <option value="16" @(Request["hourto"] == "16" ? " selected=\"selected\"" : "") >16</option>
    <option value="17" @(Request["hourto"] == "17" ? " selected=\"selected\"" : "") >17</option>
    <option value="18" @(Request["hourto"] == "18" ? " selected=\"selected\"" : "") >18</option>
    <option value="19" @(Request["hourto"] == "19" ? " selected=\"selected\"" : "") >19</option>
    <option value="20" @(Request["hourto"] == "20" ? " selected=\"selected\"" : "") >20</option>
    <option value="21" @(Request["hourto"] == "21" ? " selected=\"selected\"" : "") >21</option>
    <option value="22" @(Request["hourto"] == "22" ? " selected=\"selected\"" : "") >22</option>
    <option value="23" @(Request["hourto"] == "23" ? " selected=\"selected\"" : "") >23</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:32:19.353

这是一个如何做到这一点的[**示例：**](http://jsfiddle.net/zWwTQ/1/)

```
var hourFrom = document.getElementsByName("hourfrom")[0];
var hourTo = document.getElementsByName("hourto")[0];

hourFrom.onchange = function(){
    var from = parseInt(hourFrom.value, 10),
        toOptions = hourTo.options,
        toOptionsLength = toOptions.length;

    while(toOptionsLength--){
        if(parseInt(toOptions[toOptionsLength].value, 10) < from ){
            toOptions[toOptionsLength].disabled = true;
        }
        else{
            toOptions[toOptionsLength].disabled = false;
        }
    }
}; 
```

我们基本上禁用了 hourFrom 之前的所有选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:34:08.870

我刚刚提供了示例，只需根据您的要求对其进行更新............

```
 <script>
    function check(hourto)
    {
        from=document.getElementById("hourfrom").value;
        to=hourto.value;
        if(to>from)
        {
            alert("From should be less then false");
            return false;
        }
        else
        {
            return true;
        }    
    }
</script>
From:
    <select name="hourfrom" id ="hourfrom">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
To:
<select name="hourto" id ="hourto" onchange="check(this)">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
    </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:41:11.823

您可以使用所选选项的索引

```
document.getElementById("to").onchange = function(){
if (document.getElementById("from").selectedIndex > document.getElementById("to").selectedIndex){
    alert("You cannot select less than from");
    document.getElementById("to").selectedIndex="0";
}
} 
```

[观看现场演示](http://jsfiddle.net/Dineshkani/PYSeJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:55:29.353

正如我在评论中所说：通过在 from 值更改时重新填充 to 元素来实现这一点非常容易。[**我已经设置了这个快速小提琴**](http://jsfiddle.net/tqXHA/)来做到这一点。

显然，您必须`onload`在现实生活中将其包装在处理程序中，但想法保持不变......这是小提琴代码的一个稍微不同的版本：

```
document.getElementById('hoursfrom').onchange = (function()
{
    //create closure reference to to element, so there is only 1 DOM query
    var toElem = document.getElementById('hoursto'),
    vals = (function(max)
    {//this just returns an array [0,1,2,3,...,23]
        var r = [], i = 0;
        while(i <= max)
        {
            r.push(i++);
        }
        return r;
    }(23));//change 23 to whatever max you need here, and the array will be adjusted
    return function(e)
    {//this is the actual handler, returned by IIFE
        var newVals = vals.slice(parseInt(this.value, 10)),//slice from full vals array, only valid values will be used
        //this allows for both from and to to have the same value, if you want to change that:
        //var newVals = vals.slice(parseInt(this.value, 10) + 1);
        options = '<option selected="selected">Now select a TO value</option>',//adds a default first option
        i;
        do
        {
            i = newVals.splice(0,1)[0];
            options += '<option value="'+i+'">'+i+'</option>';
        }while(newVals.length);
        toElem.innerHTML = options;
    };
}()); 
```

使用此代码，您可以根据需要填充（或不填充）目标元素。您可能想研究保留用户在 to 元素中选择的任何值的方法（如果可能）。这并不难，只需`toElem.value`在设置innerHTML之前使用，并更改`options`字符串（`options.replace('selected="selected"', '').replace('value="'.toElem.value.'"', 'value="'.toElem.value.'" selected="selected"')`）例如......

# seo - 选项卡中的内容不可抓取。磷酸盐

> ID：15971286
> 
> 赞同：0
> 
> 时间：2013-04-12T12:21:57.630
> 
> 标签：seo, web-crawler, google-crawlers

我在我的网页上创建了多个标签，但只有默认标签中的内容被谷歌爬虫抓取。当我在缓存副本的纯文本版本中检查其他选项卡中的内容时，谷歌爬虫不会抓取其他选项卡中的内容。任何人都可以查看代码并指导我应该怎么做才能使其可抓取？

网页是：[http ://www.itdevicesonline.com/SDX1-25C-BULK.php](http://www.itdevicesonline.com/SDX1-25C-BULK.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:25:33.737

如果禁用 javascript，只需让您的网站显示所有选项卡。[使用像 lynx 这样的纯文本网络浏览器](http://en.wikipedia.org/wiki/Lynx_%28web_browser%29)测试您的网站，以更好地了解 google 看到的内容：

```
 Follow @itdevicesonline
     * Home
     * |
     * About Us
     * |
     * View Cart
     * |
     * Contact Us
     * |
     * My Account
     * |
     * Login
   [IMG]
   Call Us Today866-585-5130
   _____________________ [ submit ]
   Your Basket:
   0 items(s)
   [IMG]
     * Cisco
          * Switches
          * Routers
          * Cisco Network Modules
          * Cisco Power Supplies and Fan
          * Phones
          * Cisco Air Products
          * Cisco Security Products
          * Cisco 4500 and 6500 Series
          * Cisco GBICs and SFPs
          * Smartnet
     * Data Media
          * 8mm Tapes
          * AIT Tapes
          * Cleaning Tapes
          * DDS Tapes
          * DLT Tapes
          * DTF Tapes
          * Enterprise Tapes
          * LTO Tapes
          * Magneto Optical Discs
          * SDLT Tapes
          * T10000 Tapes
          * Travan Tapes
          * VXA Tapes
          * RDX Cartridges
          * SLR MLR Tapes
          * QIC Tapes
     * Hp
          HP Networking
          * HP 5000 Series Switches
          * HP 2000 Series Switches
          * HP 3000 Series Switches
          * HP 4000 Switch Series
          * HP 6000 Switch Series
          HP Server Options
          * SATA Hard Drives
          * SCSI and SAS Hard Drives
          * HP Memory
          * HP Miscellaneous Items
          * Power Supplies
          * Smart Array Controllers
          * HP Tape Drives
          * Solid State Drive
          HP Server
          * BL460 and 465 Servers
          * DL100 and DL120 Servers
          * DL160 and 165 Servers
          * DL180 and 185 Servers
          * DL320 Servers
          * DL360 and 365 Servers
          * DL370 Servers
          * DL380 and 385 Servers
          * DL580 and 585 Servers
          * DL900 Servers
          * ML330 and 350 Servers
          * ML370 Servers
     * IBM
          * IBM Controllers
          * IBM Hard Drives
          * IBM Memory
          * IBM Tape Drives
   Current Promotion
   CISCO
     * Switches
     * Routers
     * Cisco Network Modules
     * Cisco Power Supplies and Fan
     * Phones
     * Cisco Air Products
     * Cisco Security Products
     * Cisco 4500 and 6500 Series
     * Cisco GBICs and SFPs
     * Smartnet
   HP Networking
     * HP 5000 Series Switches
     * HP 2000 Series Switches
     * HP 3000 Series Switches
     * HP 4000 Switch Series
     * HP 6000 Switch Series
   HP Server Options
     * SATA Hard Drives
     * SCSI and SAS Hard Drives
     * HP Memory
     * HP Miscellaneous Items
     * Power Supplies
     * Smart Array Controllers
     * HP Tape Drives
     * Solid State Drive
   HP Servers
     * BL460 and 465 Servers
     * DL100 and DL120 Servers
     * DL160 and 165 Servers
     * DL180 and 185 Servers
     * DL320 Servers
     * DL360 and 365 Servers
     * DL370 Servers
     * DL380 and 385 Servers
     * DL580 and 585 Servers
     * DL900 Servers
     * ML330 and 350 Servers
     * ML370 Servers
   IBM Server Options
     * IBM Controllers
     * IBM Hard Drives
     * IBM Memory
     * IBM Tape Drives
   Data Media
     * 8mm Tapes
     * AIT Tapes
     * Cleaning Tapes
     * DDS Tapes
     * DLT Tapes
     * DTF Tapes
     * Enterprise Tapes
     * LTO Tapes
     * Magneto Optical Discs
     * SDLT Tapes
     * T10000 Tapes
     * Travan Tapes
     * VXA Tapes
     * RDX Cartridges
     * SLR MLR Tapes
     * QIC Tapes
   DVD Media
     * Blu ray DVD
   FARGO
     * FARGO Printer Ribbons

           Sony AIT-1 25/65GB Tape Cartridge - New in Bulk Packaging

   SDX1-25C-BULK Sony AIT-1 25/65GB Tape Cartridge - New in Bulk Packaging
     * Manufacturer:Sony
     * Price $32.70
     * Part No:

SDX1-25C-BULK

     * Availability: In-Stock.
   ______ [ button ]
     * Features
     * Technical Detail
     * Related Products

   General             
   Type                Storage media - AIT                                    
   Media Included Qty  1                                                      
   Media               
   Native Capacity     25 GB                                                  
   Compressed Capacity 65 GB                                                  
   Tape Length         170 m                                                  
   Tape Width          8 mm                                                   
   Features            Advance Metal Evaporated (AME), Diamond Like Carbon    
                       (DLC) surface, MIC (Memory In Chip).                   
   Recording Standard  AIT-1                                                  

   IT Devices OnlineServices
   [IMG] [IMG]
   [IMG]
     * Home
     * |
     * My Account
     * |
     * View Cart
     * |
     * Contact Us
     * |
     * About Us
     * |
     * Return Policy
     * |
     * Site Map

   Copyright 2013 All Rights reserved by IT Devices Online 
```

# spring - 抽象类上的Spring Autowire注释：没有定义唯一的bean

> ID：15971288
> 
> 赞同：9
> 
> 时间：2013-04-12T12:22:01.793
> 
> 标签：spring, annotations, abstract-class, autowired

我有一个抽象类：

```
@Component
public abstract class BaseReport {

  public void export() {
   ...
} 
```

还有一堆扩展它的类，并覆盖 export() 方法（或不覆盖）。

```
@Component
public final class Report1 extends BaseReport

@Component
public final class Report2 extends BaseReport 
```

我的大多数测试都自动装配扩展 BaseReport 的具体类，没有问题：

```
public class Report1Test extends BaseTest {

    @Autowired
    Report1 _report;

public class Report2Test extends BaseTest {

    @Autowired
    Report2 _report; 
```

这适用于所有*扩展*BaseReport 的类的自动装配。但我还需要自动装配抽象类 BaseReport 来测试 export() 方法。

```
public class BaseReportTest extends BaseTest {

  @Autowired
  BaseReport _report; 
```

当我尝试运行它时，我得到了臭名昭著的：

*未定义 BaseReport 类型的唯一 bean：预期单个匹配 bean，但找到 2 [Report1，Report2]。*

我试过使用@Qualifier，但@Qualifier 的问题是（据我所知）你用它来告诉Spring你希望使用哪个类——实现接口或扩展抽象类。但这不是我的情况。我想使用抽象类本身。

我也尝试过使用@Resource，如下所示：

```
public class BaseReportTest extends BaseTest {

  @Resource(name = "baseReport")
  BaseReport _report; 
```

Spring告诉我没有这个名字的bean。:(

我怎样才能做到这一点？

干杯。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T12:27:49.047

抽象类不能实例化，需要使用具体的实现。与普通 java 一样，如果您尝试实例化一个抽象类，它会告诉您在其中实现抽象方法。当您这样做时，将创建一个匿名类。它不是抽象类的实例化，而是该抽象类的新子类。

Spring 将寻找扩展您的基类的类，即 Report1 和 Report2，Spring 看到它有多个符合要求的类，但不知道该选择哪一个。因此你会得到有多个匹配 bean 的错误。

您可以通过使“适配器”基本上创建一个具体类来解决此问题，该类扩展您的基类，实现抽象方法，但不做任何事情。然后您可以自动装配该实现并对其进行测试。但是，由于您正在测试报告 1 和 2，因此您的抽象类应该已经过测试。如果您的基类仍然出现错误，则意味着您不使用的逻辑会导致错误，这无论如何都是一种不好的做法。还使用测试覆盖工具，您可以通过这种方式发现未使用的代码。

# ajax - 模态表单多次提交

> ID：15971289
> 
> 赞同：2
> 
> 时间：2013-04-12T12:22:03.853
> 
> 标签：ajax, asp.net-mvc, twitter-bootstrap

我的引导模式多次提交，这似乎是模式已打开的次数。

**代码**

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

<script type="text/javascript">
// Close Modal when done.
function CloseModal() {
    $("#SkillModalWindow").modal("hide");
}
</script>

@using (Ajax.BeginForm("Save", "SkillGroup", null, new AjaxOptions
{
    HttpMethod = "Post",
    OnSuccess = "CloseModal"
},
new { id = "CreateSkillGroups" }))
{
@Html.ValidationSummary(true)
@Html.Hidden("JobRoleId", (int)ViewBag.JobRoleID)

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Add New Skills to Job Role</h3>
</div>
<div class="modal-body" id="CreateModal">@Html.Partial("_Create")</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button type="submit" class="btn btn-primary">Save</button>
</div>
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:42:51.630

您只是隐藏模式，而不是重置它。您需要在发布后重置数据。

```
$('#SkillModalWindow').data('modal', null); 
```

# php - PHP - move_uploaded_file 不工作

> ID：15971290
> 
> 赞同：-2
> 
> 时间：2013-04-12T12:22:05.390
> 
> 标签：php, file-upload

```
<td class="reg-txt-left">Profile Picture:</td>
<td class="reg-input-right">
    <form action="profile_save_upload.php" method="post" enctype="multipart/form-data">
        <?php 
        echo "<img src=\"../user/".$_SESSION['profileEmail']."/images/".$_SESSION['profilePic']."\" alt='Profile Picture' width='200px' height='200px' />" 
        ?>
        <input type="file" name="file"   />
        <input type="submit" name="submitProfilePic" id="button" value="Change Profile Picture" />
    </form>
</td> 
```

这是 profile_save_upload.php

```
<?php session_start();
 if(isset($_POST['submitProfilePic'])){
 /*file saving*/
   if ($_FILES["file"]["error"] > 0){
     echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
   }
   else{
     if (file_exists("../user/".$_SESSION['profileEmail']."/" . $_FILES["file"]["name"]))
       {
       include('../includes/dbcon.php');
    /*update database*/
    $sql = mysql_query("UPDATE users
                        SET picture = '".$_FILES["file"]["name"]."'
                        WHERE email = '".$_SESSION['profileEmail']."'");
    header("Location: profileEdit.php");
  }
  else{ 
    move_uploaded_file($_FILES["file"]["tmp_name"], "../user/".$_SESSION['profileEmail']."/" . $_FILES["file"]["name"]);
    include('../includes/dbcon.php');

    $sql = mysql_query("UPDATE users
                        SET picture = '".$_FILES["file"]["name"]."'
                        WHERE email = '".$_SESSION['profileEmail']."'");
    header("Location: profileEdit.php");

    }
   }
 }
?> 
```

这是文件夹的层次结构

```
 includes
     dbcon.php
 site
     profileEdit.php
     profile_save_upload.php
 user
     user1
        [the image supposed to be moved here] 
```

图像文件名正在保存到数据库中，但不在文件夹中。

有谁知道错误的部分在哪里？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:28:22.553

以下是检查扩展的方法（如果需要）：

```
if(is_uploaded_file($_FILES['imgfile']['tmp_name']))
{
    $fileExtension = array('jpg','jpeg','gif','png');
    $file_name = pathinfo($_FILES["imgfile"]["name"]);
    $extension = strtolower($file_name['extension']);
    if(!in_array($extension, $fileExtension))
    {
        $error .= "<span class='error'>invalid file format !</span><br>";
    }
} 
```

.

如果没有发现错误，您将如何上传：

```
$tmp_file = '';       
if(is_uploaded_file($_FILES['imgfile']['tmp_name']))
{
    $file_name = pathinfo($_FILES["imgfile"]["name"]);
    $extension = strtolower($file_name['extension']);
    $tmp_file = substr($file_name['filename'], 0, 50).'_'.time().'.'.$extension;

    $uploaddir = 'user_image/';
    $uploadfile = $uploaddir.$tmp_file;

    move_uploaded_file($_FILES['imgfile']['tmp_name'], $uploadfile);
    //list($width, $height) = getimagesize($uploadfile);

    $fileType = $_FILES['imgfile']['type'];
    $fileSize = $_FILES['imgfile']['size'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:29:09.730

```
move_uploaded_file($_FILES["file"]["tmp_name"], "../user/".$_SESSION['profileEmail']."/" . $_FILES["file"]["name"]);
include('../includes/dbcon.php');

$sql = mysql_query("UPDATE users
                    SET picture = '".$_FILES["file"]["name"]."'
                    WHERE email = '".$_SESSION['profileEmail']."'"); 
```

`$_FILES["file"]["name"]`是文件名。查看您的 SQL 查询，您只保存该名称。您可能希望像这样进行查询：

```
UPDATE users SET picture = '".$basepath."/user/".$_SESSION['profileEmail']."/" . $_FILES["file"]["name"]."'... 
```

其中 $basepath 是其父文件夹的路径`user/`

# sql-server-2005 - 如何将两个拆分列插入表的两列

> ID：15971292
> 
> 赞同：1
> 
> 时间：2013-04-12T12:22:12.623
> 
> 标签：sql-server-2005

我有一个函数，它将一个字符串和一个字符作为输入，它将用这个字符分割字符串并返回列

```
DECLARE @strIndustryID varchar(MAX)='1,2,3,4,5,6,7,44,55,66,77,88'
DECLARE @strIndustryDescription varchar(MAX)='desc1|desc2|desc3|desc4|desc5|desc6|desc7|desc44|desc55|desc66|desc77|desc88'
DECLARE @COUNT INT=0
SELECT * FROM dbo.Split(@strIndustryID,',');
SELECT * FROM dbo.Split(@strIndustryDescription,'|'); 
```

并由第一个查询输出

```
1
2
3
4
5
6
7
44
55
66
77
88 
```

并从第二个查询

```
desc1
desc2
desc3
desc4
desc5
desc6
desc7
desc44
desc55
desc66
desc77
desc88 
```

现在我想要像这样的输出

```
<pre lang="vb">desc1
Col1 col2
2   desc2
3   desc3
4   desc4
5   desc5
.
.
.
. 
```

我想将这些列插入到 table1 中，它有一个名为 col1 和 col2 的列

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:37:00.687

```
DECLARE @strIndustryID varchar(MAX)='1,2,3,4,5,6,7,44,55,66,77,88'
DECLARE @strIndustryDescription varchar(MAX)='desc1|desc2|desc3|desc4|desc5|desc6|desc7|desc44|desc55|desc66|desc77|desc88'
DECLARE @COUNT INT=0
SELECT a, b  FROM
(
SELECT a FROM dbo.Split(@strIndustryID,',') t1 CROSS JOIN 
SELECT b FROM dbo.Split(@strIndustryDescription,'|') t2
) AS main
WHERE a = REPLACE(b, 'desc', '') 
```

# html - 宽度大于其包装（设置为溢出：隐藏）的子图像可以动态水平居中吗？

> ID：15971293
> 
> 赞同：2
> 
> 时间：2013-04-12T12:22:16.253
> 
> 标签：html, css, image, center

所以给出以下[流体图像](http://alistapart.com/article/fluid-images)：

```
<div class="container">
    <img src="http://www.placehold.it/400x150">
</div> 
```

和

```
.container {
    margin: 0 15px;
    overflow: hidden;
    text-align: center;
}

img {
    min-width: 300px;
    max-width: 100%;
} 
```

是否可以在不将其设置为背景图像的情况下将该图像水平居中在 css 中，而边缘溢出？

源代码也在这里：http: [//jsfiddle.net/RWqha/3/](http://jsfiddle.net/RWqha/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:38:34.533

它有点乱，但它有效（仅在 Firefox 中测试）。分叉示例（尝试调整框架大小）：http: [//jsfiddle.net/GAFzc/](http://jsfiddle.net/GAFzc/)

```
<div class="container">
    <div class="image-wrap">
       <img src="http://www.placehold.it/400x150">
    </div>
</div>

.image-wrap {
     margin: 0 -999px;
     text-align: center;     
} 
```

您正在寻找此解决方案吗？

**UPD**

所以，如果我们需要一个响应式图像，它会适应容器宽度，但仍然有一个最小宽度值，并且必须*在可见*部分内居中，我们应该使用另一种方式来丰富它。我想，我找到了解决方案：http: [//jsfiddle.net/GAFzc/5/](http://jsfiddle.net/GAFzc/5/)

HTML（相同）：

```
<div class="container">
    <div class="image-wrap">
       <img src="http://www.placehold.it/500x200">
    </div>
</div> 
```

CSS：

```
.image-wrap {
     margin: 0;
     text-align: center;
     text-indent: -300px; /* Min width of image */
}
.image-wrap > img {
     position: relative;
     left: 150px; /* Half of min-width value */
     min-width: 300px;
     width: 100%;
     display: inline-block; /* or inline */
} 
```

我实际上并不了解它是如何工作的，但它可以工作（在 Chrome、FF、IE10,9 中测试）。这里的主要技巧是使用文本缩进。我们“保留”了第一行左边缘之外的空间，然后用它来使我们的图像居中（左：150px；）。或类似的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:23:53.623

**为什么这很难做到**

您正在模仿由 CSS 实现的块格式化算法来呈现视觉内容。

您的容器形成一个块元素，并且图像（具有计算尺寸的内联替换元素）位于父容器的左侧和顶部边缘。

这不能使用任何 CSS 属性进行更改，除非您可以硬编码特定值的填充、边距、位置或任何取决于所显示图像尺寸的值。

当然，这可以通过 jQuery/JavaScript 来完成。在某种程度上，这就是为什么所有这些优雅的图像旋转器和图像画廊都是用 JavaScript/jQuery 构建的。

**尝试媒体查询**

如果您允许自己充分利用 HTML5/CSS3，您可以尝试指定 CSS 规则以优化较小屏幕的媒体查询。

我认为当前的 CSS/HTML 无法实现这种效果。

# mvvm - Kendo UI：无法保存有关在网格中编辑/更新记录的记录详细信息

> ID：15971294
> 
> 赞同：0
> 
> 时间：2013-04-12T12:22:20.467
> 
> 标签：mvvm, kendo-ui, kendo-grid

**场景：** 我使用 Kendo UI MVVM 将 JSON 文件中的记录绑定到网格。我已将可编辑属性设置为 Popup，因此在编辑记录时，弹出窗口会打开，但是在修改数据和更新时，记录不会更新。因此，要关闭弹出窗口，我单击取消按钮。

经过一番研究，我遇到了保存功能。这会更新网格中的记录。

**问题：** 我应该如何定义 MVVM 场景中的保存功能？一般保存函数在网格上定义如下：

```
$("#myGridView").kendoGrid({
    //...
    save:function(){
        this.refresh
    }
)}; 
```

以上在非 MVVM 标准中运行良好。我想怎么做同样的事情 MVVM 方式？

```
var viewModel = kendo.observable({
    dataSource:new kendo.data.DataSource({
        //...
    }),
    save:function(){
        //how to implement the same refresh functionality?
    }
}); 
```

现在我已将`save`事件附加到网格上`events: { save: save }`。该`save`函数被调用，但是当我在弹出窗口中单击“更新”时没有任何反应。在萤火虫它说`this.refresh`不是一个功能。

我哪里错了？？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:52:53.203

`this`这里不一样......如果你想刷新网格，我想你必须这样写：

```
save : function() {
    $("#myGridView").data("kendoGrid").refresh();
} 
```

# c# - 具有未映射属性的实体框架 4 困难查询

> ID：15971301
> 
> 赞同：0
> 
> 时间：2013-04-12T12:22:35.283
> 
> 标签：c#, entity-framework-4, union, data-warehouse

我是新手，`EF`我认为有时牺牲 ORM 的优势更容易。但我想知道是否有办法使用`EF4`.

我有带有事实表的数据仓库。映射看起来像

```
 public class GameResult
    {
        [Key]
        public int GameResultId { get; set; } 

        public virtual Competition Competition { get; set; }    

        public virtual CustomDate DateGame { get; set; }     

        public virtual Contender ContenderFirst { get; set; }  

        public virtual Contender ContenderSecond { get; set; } 

        public virtual Location Location { get; set; }

        public int ScoreContenderFirst { get; set; }

        public int ScoreContenderSecond { get; set; }

        public int PrizeStock { get; set; }

        public int Budget { get; set; }

        [NotMapped]
        public int WinCount { get; set; }

        [NotMapped]
        public int FailCount { get; set; }

        [NotMapped]
        public int DeadHeatCount { get; set; }

        [NotMapped]
        public int CountGames { get; set; } 
    } 
```

并查询`sql`

```
select 
    Contenders.Name,
    sum((Case 
        when (ScoreContenderFirst > ScoreContenderSecond) then 1
        else 0
    end)) as wins,
    sum ((Case 
        when (ScoreContenderFirst = ScoreContenderSecond) then 1
        else 0
    end)) as equals,
    sum((Case 
        when (ScoreContenderFirst < ScoreContenderSecond) then 1
        else 0
    end)) as fail,
    COUNT(GameResults.GameResultId)as countGames
from GameResults 
inner join Contenders
on GameResults.ContenderSecond_ContenderId = Contenders.ContenderId
where GameResults.ContenderFirst_ContenderId = 42 
group by Contenders.Name 
UNION 
select 
    Contenders.Name,
    sum((Case 
        when (ScoreContenderFirst < ScoreContenderSecond) then 1
        else 0
    end)) as wins,
    sum ((Case 
        when (ScoreContenderFirst = ScoreContenderSecond) then 1
        else 0
    end)) as equals,
    sum((Case 
        when (ScoreContenderFirst > ScoreContenderSecond) then 1
        else 0
    end)) as fail,
    COUNT(GameResults.GameResultId)as countGames
from GameResults 
inner join Contenders
on GameResults.ContenderFirst_ContenderId = Contenders.ContenderId
where GameResults.ContenderSecond_ContenderId = 42 
group by Contenders.Name 
```

此`sql`查询的意思是（我想获取特定球队与其他球队的比赛结果（特定球队获胜的比赛数量，以及特定球队较松的比赛数量））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:33:09.883

```
_efContext.GameResult
          .Where(game => game.ContenderFirst_ContenderId  == 42)
          .Select(game => new { 
                    ContendersName = game.ContenderFirst.Name
                  , Win = game.ScoreContenderFirst > game.ScoreContenderSecond
                  , Draw = game.ScoreContenderFirst == game.ScoreContenderSecond
                  , Lose = game.ScoreContenderFirst < game.ScoreContenderSecond
                  })
          .GroupBy(game => game.ContendersName)
          .Select(grp => new {
                  ContendersName= grp.Key
                , Wins = grp.Where(game => game.Win).Count()
                , Draws = grp.Where(game => game.Draw).Count()
                , Loses = grp.Where(game => game.Lose).Count()
           }) 
```

不包括 countGames，因为它只是胜利、平局和失败的总和。

对于第二个，你可以加入这个看起来像第一个的查询：

```
_efContext.GameResult
          .Where(game => game.ContenderSecond_ContenderId  == 42)
          .Select(game => new { 
                ContendersName = game.ContenderSecond.Name
              , Win = game.ScoreContenderFirst < game.ScoreContenderSecond
              , Draw = game.ScoreContenderFirst == game.ScoreContenderSecond
              , Lose = game.ScoreContenderFirst > game.ScoreContenderSecond
              })
          .GroupBy(game => game.ContendersName)
          .Select(grp => new {
              ContendersName= grp.Key
            , Wins = grp.Where(game => game.Win).Count()
            , Draws = grp.Where(game => game.Draw).Count()
            , Loses = grp.Where(game => game.Lose).Count()
       }) 
```

# umbraco - 取消发布使用的 UMBRACO 节点会导致站点崩溃

> ID：15971303
> 
> 赞同：1
> 
> 时间：2013-04-12T12:22:37.227
> 
> 标签：umbraco

我正在使用 UMBRACO 6.0.2，我看到一个问题，当我取消发布在其他地方使用的节点时，UMBRACO 不会删除引用节点并导致代码崩溃。

我宁愿不实现逻辑来处理空节点，而是希望实际的 CMS 更优雅地处理它。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:04:14.867

据我所知，Umbraco 不会将节点之间的引用保存在单独的表中，因此没有标准选项来查看哪些节点引用了另一个节点。

但是，有一种方法可以通过对数据库表使用查询来完成此操作。Umbraco将`cmsPropertyData`表中documenttype字段的值保存在字段中`dataNtext`，nodeID保存在`contentNodeId`字段中

您可以挂钩`Document.AfterUnPublish()`or`Document.BeforeUnPublish()`事件并在`cmsPropertyData`表上运行查询以检查是否存在`dataNtext`包含您刚刚未发布的 nodeId 的字段。如果是这样，您还需要从`contentNodeId`字段中取消发布带有 nodeID 的文档。

这个解决方案不是一个干净的解决方案，但它可以工作。棘手的部分是确定节点是否尚未在您的事件中被处理/取消发布，否则您可能会创建无限循环；）

# redis - Redis 哈希键自动从服务器中删除

> ID：15971305
> 
> 赞同：0
> 
> 时间：2013-04-12T12:22:39.320
> 
> 标签：redis

我使用 redis 几个月了，但现在 redis 哈希键从服务器自动删除。我正在使用主从架构，我的网站也遇到每小时用户不足的情况。任何人都可以帮助我如何解决这个问题.....提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:44:55.360

确保您使用的是正确的 max-memorypolicy （您可能不想要 allkeys-lru 因为 redis 将使最少访问的密钥过期，无论它们是否过期）。

您还应该确保 redis 有足够的内存来存储您不想过期或被 redis 驱逐的密钥。（redis maxmemory 配置与系统内存相比）

如果您使用 no-eviction 策略，请确保 redis 永远不会耗尽内存。

# php - htaccess 在网站的 codeigniter 上

> ID：15971307
> 
> 赞同：0
> 
> 时间：2013-04-12T12:22:43.713
> 
> 标签：php, codeigniter

嗨，我的 url 有问题。我认为当我将文件上传到实时网站时的 htaccess 代码我注意到错误是 thi -------------->没有指定输入文件。这是我的网站链接 [http://springrainglobal.com/movies_world/index.php/movies](http://springrainglobal.com/movies_world/index.php/movies) 这是我的 htaccess 代码

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^system.*
RewriteCond $1 ^(index\.php|robots\.txt|favicon\.ico|images|js|assets|css)
RewriteRule ^(.*)$ /movies_world/index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /movies_world/index.php?/$1 [L] 
```

任何人都可以帮助我如何正确配置实时服务器上的 htacces 吗？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:31:55.317

您的网站可以在[http://springrainglobal.com/movies_world/movies](http://springrainglobal.com/movies_world/movies)下找到（保留 index.php），如果您正在寻找的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:00:55.497

这是我一直用于 CodeIgniter 构建的标准 .htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

如果您将该代码的第 3 行更改为

```
RewriteBase /movies_world/ 
```

你应该被设置。

# python - 在 Python 中获取自午夜以来的秒数

> ID：15971308
> 
> 赞同：58
> 
> 时间：2013-04-12T12:22:43.720
> 
> 标签：python, date, datetime

我想获得自上个午夜以来过期的秒数。Python中最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-12T12:31:41.847

最好对返回当前日期/时间的函数进行一次调用：

```
from datetime import datetime

now = datetime.now()
seconds_since_midnight = (now - now.replace(hour=0, minute=0, second=0, microsecond=0)).total_seconds() 
```

或者确实

```
datetime.now() - datetime.now() 
```

为这里的任何人返回零时间增量？

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-12T12:30:55.263

```
import datetime
now = datetime.datetime.now()
midnight = now.replace(hour=0, minute=0, second=0, microsecond=0)
seconds = (now - midnight).seconds 
```

或者

```
import datetime
now = datetime.datetime.now()
midnight = datetime.datetime.combine(now.date(), datetime.time())
seconds = (now - midnight).seconds 
```

选择哪个是口味问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T12:22:43.720

我会这样做：

```
import datetime
import time

today = datetime.date.today()
seconds_since_midnight = time.time() - time.mktime(today.timetuple()) 
```

# php - 当我尝试从 PhpStorm 运行 PHPUnit 时出错

> ID：15971310
> 
> 赞同：19
> 
> 时间：2013-04-12T12:22:45.943
> 
> 标签：php, testing, phpunit, phpstorm, composer-php

当我尝试在 IDE PhpStorm 中运行 PHPUnit 测试时，我没有什么问题。

我使用 Composer 文件，它看起来：

```
{
    "require": {
        "phpunit/phpunit": "3.7.19"
    }
} 
```

现在，当我运行测试时，我收到异常： `PHP Fatal error: Uncaught exception 'PHPUnit_Framework_Exception' with message 'Class "PHPUnit_Extensions_RepeatedTest" does not extend PHPUnit_Framework_TestCase.'`

怎么了？当我包括梨安装版本测试工作正常。

//**编辑** 示例测试类：

```
 class ReaderTest extends PHPUnit_Framework_TestCase
    {
        /**
         * @test
         */
        public function shouldGetReadedValue ()
        {
            $this->assertTrue(true);
        }
    } 
```

// **EDIT2** 跟踪：

```
/usr/bin/php /tmp/ide-phpunit.php --no-configuration /path/to/my/project
Testing started at 14:53 ...
PHP Fatal error:  Uncaught exception 'PHPUnit_Framework_Exception' with message 'Class "PHPUnit_Extensions_RepeatedTest" does not extend PHPUnit_Framework_TestCase.' in /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php:183
Stack trace:
#0 /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php(315): PHPUnit_Framework_TestSuite->__construct(Object(ReflectionClass))
#1 /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php(389): PHPUnit_Framework_TestSuite->addTestSuite(Object(ReflectionClass))
#2 /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php(416): PHPUnit_Framework_TestSuite->addTestFile('/var/www/php-sh...')
#3 /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/Runner/BaseTestRunner.php(96): PHPUnit_Framework_TestSuite->addTestFiles(Array)
#4 /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/TextUI/Command.php(150): PHPUnit_Runner_BaseTestRunner->getTest('/var/www/php-sh...', '', A in /path/to/my/project/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php on line 183

Process finished with exit code 255 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T06:26:41.280

我找到了关于这个问题的解决方案。

`/path/to/my/project/tests`在此测试正常运行后，在目录中的编辑配置中，我设置了测试目录 ( ) 的路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-27T02:55:25.810

这对我有用，这要感谢 Piotr 上面的回答，但我在这里提供了更准确的细节，所有我必须做的步骤：

使其工作的步骤（在 PHPStorm 8.0.1 中测试）：

**1）** `Preferences > PHP > PHPUnit` **确保没有为默认配置文件或默认引导文件设置任何内容。**

**2）通过** `Run > Edit Configurations >` **在** `Command Line` **小节中进行自定义 PHPUnit 配置，并确保：**

**a) 设置** `Custom working directory:` **为** `/absolute/path/to/vendor`。

**b）选中“使用替代配置文件：”并将其设置为** `/absolute/path/to/vendor/your_app/(sub_app_if_applicable)/phpunit.xml.dist`

然后您可以通过指定类和文件来运行套件中的任何测试类，或者只需选中“在配置文件中定义”即可根据配置运行所有测试类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-23T02:22:53.680

使用作曲家时我有同样的问题。

解决方案是将您的测试文件放在它自己的目录中。这是我的工作 phpunit，我将所有测试都放在`test`目录中。

```
<phpunit bootstrap="vendor/autoload.php" 
    colors="true"
    convertErrorsToExceptions="true"
    convertNoticesToExceptions="true"
    convertWarningsToExceptions="true"
    stopOnFailure="true">
    <testsuites>
        <testsuite name="Test Suite">
            <directory>test</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

希望它解决如果有人有同样的问题.. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:55:18.390

在 PHPUnit_Framework_TestSuite 内部，此代码[存在于构造函数中](http://drupalcode.org/sandbox/johnalbin/1074382.git/blob/60d523d898487ca29b72dc372c56fa122c91143e:/core/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php#l183)：

```
if (!$theClass->isSubclassOf('PHPUnit_Framework_TestCase')) {
   throw new PHPUnit_Framework_Exception(
      'Class "' . $theClass->name . '" does not extend PHPUnit_Framework_TestCase.'
   );
} 
```

我在您的**示例**中看到您正在扩展，`PHPUnit_Framework_TestCase`但错误表明您正在使用`PHPUnit_Extensions_RepeatedTest`which extends`PHPUnit_Extensions_TestDecorator`最终扩展`PHPUnit_Framework_Assert`

```
PHPUnit_Framework_Assert
   |
   --PHPUnit_Extensions_TestDecorator
      |
      --PHPUnit_Extensions_RepeatedTest 
```

仔细检查您的测试，因为错误表明您正在尝试使用测试扩展来运行 TestSuite `PHPUnit_Extensions_RepeatedTest`。您是否尝试使用测试装饰器来扩展 PHUnit？

[http://docs.tadiavo.com/phpunit/www.phpunit.de/pocket_guide/3.1/en/extending-phpunit.html](http://docs.tadiavo.com/phpunit/www.phpunit.de/pocket_guide/3.1/en/extending-phpunit.html)

这就是我目前可以提供的所有建议，而无需查看您的实际测试以及您如何运行它们。

# html - 在列表导航菜单中缩放背景图像的大小

> ID：15971317
> 
> 赞同：0
> 
> 时间：2013-04-12T12:23:03.087
> 
> 标签：html, css, background-image, fluid-layout

我希望使用带有背景图像的无序列表构建一个精灵导航菜单。我希望这个菜单展开以适应浏览器窗口。在我的代码 `<img src="images/css-sprite-example.png" alt="header" />`中，缩放图像以适应屏幕的整个宽度。

我将如何在菜单中使用相同的图像并且菜单扩展以填充屏幕的宽度。

我正在使用 CSS `#menu li a{background:url('images/css-sprite-example.png') no-repeat; width:100%; height 100%; display:block;}`，但 100% 仅将图像缩放到图像的实际大小。

显然，我将不得不更改我的 CSS 选择器必须以百分比而不是像素为单位的方式。

非常感谢

```
<head>
<style type="text/css">
#menucontainer {
    background: blue;
    text-align: center;
    height:auto;
    width:auto;
}
#menucontainer img {
    margin-left: auto;
    margin-right: auto;
    border: 1px solid red;
    display: block;
    width: 100%;
}
#menucontainer ul {
    margin-left: auto;
    margin-right: auto;
    border: 1px solid pink;
    display: block;
    width: 100%;
    list-style:none;
}
#menucontainerr li {
    margin-left: auto;
    margin-right: auto;
    border: 1px solid black;
    display: block;
    width: 100%;
}
ul#menu{margin:0; padding:0; list-style:none;}
#menu li{overflow:hidden; text-indent:-9999px; display:inline; float:left; margin-right:1px;}
#menu li a{background:url('images/css-sprite-example.png') no-repeat; width:100%; height 100%; display:block;}
    /* Home Button */
    #menu li.home{width:215px; height:52px;}
    #menu li.home a{background-position:-5px -5px;}
    #menu li.home a:hover{background-position:-5px -15px;}
    #menu li.home a.selected{background-position:-5px -25px;}
    /* About Button */
    #menu li.about{width:120px; height:52px;}
    #menu li.about a{background-position:-125px -5px;}
    #menu li.about a:hover{background-position:-125px -15px;}
    #menu li.about a.selected{background-position:-125px -25px;}
    #menu li.about a.selected:hover{background-position:-125px -35px;}
    /* Contact Button */
    #menu li.contact{width:80px; height:52px;}
    #menu li.contact a{background-position:-250px -5px;}
    #menu li.contact a:hover{background-position:-10% -15px;}
    #menu li.contact a.selected{background-position:-250px -25px;}
</style>
</head>
<body>
    <div id="menucontainer">
        <img src="images/css-sprite-example.png" alt="header" />
        <ul id="menu">  
            <li class="home"><a href="#">Home</a></li>  
            <li class="about"><a class="selected" href="#">About</a></li>  
            <li class="contact"><a href="#">Contact</a></li>  
        </ul>  
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:29:13.117

如果要缩放需要使用的背景图像`background-size`，请参阅[http://docs.webplatform.org/wiki/css/properties/background-size](http://docs.webplatform.org/wiki/css/properties/background-size)和[https://developer.mozilla.org/en-US/docs/ CSS/背景尺寸](https://developer.mozilla.org/en-US/docs/CSS/background-size)

# windows-8 - Windows 8 高级启动命令提示符文档

> ID：15971318
> 
> 赞同：0
> 
> 时间：2013-04-12T12:23:03.517
> 
> 标签：windows-8

我参与了磁盘过滤器驱动程序的开发。

Windows 8 具有特殊的恢复模式：高级启动命令提示符。它类似于以前版本的 Windows 中的安全模式命令提示符。但它的工作方式不同。例如，并非所有命令都可用。并非所有驱动程序都已加载。而且我们的驱动程序也没有加载。必须加载我们的驱动程序，因为它加密/解密磁盘内容。没有它，磁盘内容不可用。

我们如何解决这个问题？驱动程序如何强制 Windows 在高级启动命令提示符中加载它？可能我们需要为这种模式开发特殊类型的驱动程序？我找不到有关高级启动命令提示符如何工作的详细文档。是否存在此类文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:35:46.723

只需在制作安装映像时添加一个小的未加密引导 bcd/swap 分区。windows也制作了自己的300兆分区。构建简单。

磁盘部分清理后的 3 个分区

1 个 Windows 分区（在 w8 安装时第一次重新启动时安装） 2 个未加密的 ntfs 分区，其中包含 BCD、SWAP 和其他一些东西 3 个单个 VHD 文件或更多:)，在一个巨大的加密分区上

使用easy bcd 选择您选择的vhd，如果您从一个磁盘转到另一个磁盘，您只需要VHD 和安装Windows 的原始BCD。基本上，Windows 安装与 BCD 相关联，如果没有 BCD，则无法将一个 vhd 从一个磁盘移动到另一个磁盘。

Pro、Ultimate、Server 等都是 vhd 可启动的

# java - 一起使用 spring:bind 和 spring:eval

> ID：15971319
> 
> 赞同：1
> 
> 时间：2013-04-12T12:23:03.930
> 
> 标签：java, spring, spring-mvc

我无法理解 spring:eval 在以下代码中 spring:bind 中的使用。

```
 <spring:bind path="someProperty">    
         <spring:eval expression="${status.path}"/>
      </spring:bind> 
```

有人可以解释为什么要在 spring:bind 中使用 spring:eval 吗？

# linux-kernel - 如何删除/禁用 8250.o 模块并实现我自己的 8250 驱动程序

> ID：15971323
> 
> 赞同：2
> 
> 时间：2013-04-12T12:23:07.620
> 
> 标签：linux-kernel, serial-port, linux-device-driver

我想禁用或删除 8250.c（低级 UART 驱动程序）模块并在基本功能上实现相同的功能，以便它执行来自用户空间的读写请求

这是我的问题：

1.  如何删除/禁用 8250.0 模块
2.  如果可能的话，给我一些参考链接/示例来实现具有基本功能的 8250 驱动程序。

我是Linux设备驱动程序的新手，如果我错了，请原谅。我用谷歌搜索了很多，但没有得到正确的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:18:40.527

回答 1) 如果您当前的系统已将 8250 驱动程序构建为模块，只需将其卸载：

```
$ lsmod | grep 8250
# rmmod 8250-driver-name 
```

（我没有检查司机的确切姓名）

如果您当前的系统在内核中构建了 8250 驱动程序（或者您正在为新系统构建 Linux 内核），则必须编译内核。您必须编辑您当前的配置结束删除驱动程序。您可以使用：

```
$ make xconfig 
```

或者

```
$ make menuconfig 
```

对于图形界面（在 Linux 内核源代码中的这些命令上运行一个）。您也可以手动编辑`.config`文件并删除驱动程序

```
 CONFIG_SERIAL_8250=n 
```

或通过设置将其编译为模块：

```
 CONFIG_SERIAL_8250=m 
```

（不推荐用于此驱动，请使用 xconfig 或 menuconfig 阅读文档）

如果你已经有一个工作配置文件，你可以将它复制到你的内核源代码中`.config`

```
cp /path/to/you/config/file /path/to/your/kernel/source/.config 
```

然后，如上编辑字段 CONFIG_SERIAL_8250。

回答 2) 我可以链接的最佳示例是[8250.c 驱动程序](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/drivers/serial/8250.c?v=2.6.11.8)。但是如果你想学习如何开发 Linux 驱动，你可以阅读[Linux Device Driver](http://tjworld.net/books/ldd3/)

# php - 使用 smarty 模板引擎和 slim

> ID：15971324
> 
> 赞同：1
> 
> 时间：2013-04-12T12:23:08.823
> 
> 标签：php, html, smarty, slim

我正在尝试使用 Smarty 设置 Slim Framework，但出现了非常错误的情况。我可以输出模板，但它使用标记和应该替换标记的数据呈现模板。在 .tpl 我有一个标记`{#currency#}`，但这也是我调用 test.php/test/1 时打印的内容

我的 test.php 中有这个

```
require 'libs/Slim/Slim.php';
\Slim\Slim::registerAutoloader();
use Slim\Slim;

require 'libs/Slim/Extras/Views/Smarty.php';

$app = new Slim(array('view', new \Slim\Extras\Views\SmartyView()));

$app->get('/test/:id', function($id) use ($app) {   
    $adverts = new Adverts();
    $app->render('viewad.tpl', array(
        'viewad' => $adverts->viewsinglead($id),
        'imagelist' => $adverts->getadimages($id),
        'firstimage' => $adverts->getadimage($id)    
    ));
});

$app->run(); 
```

在 libs/Slim/Extras/Views/Smarty.php 我设置了这个：

```
public static $smartyDirectory = '/var/www/vhosts/xxxxx.dk/web/libs/smarty/libs';
public static $smartyCompileDirectory = '/templates_c';
public static $smartyCacheDirectory = '/cache';
public static $smartyTemplatesDirectory = '/templates'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:24:17.480

数组中有错误！这修复了它：

```
$app = new Slim(array('view' => new \Slim\Extras\Views\SmartyView())); 
```

# c# - 使用共享合同将电子邮件地址添加到电子邮件应用程序的字段中？

> ID：15971325
> 
> 赞同：2
> 
> 时间：2013-04-12T12:23:09.823
> 
> 标签：c#, windows-runtime, winrt-xaml

我正在创建一个示例 Win8 应用程序并使用共享合同尝试共享 HTML 内容。当用户从共享应用程序选项中选择电子邮件应用程序时，我想在`TO`字段中设置电子邮件地址。我该怎么做？以下是我为共享 HTML 内容而编写的代码：

代码：

```
DataPackage requestData = request.Data;
requestData.Properties.Title = this.PageViewModel.JobInformationDetail.JobNumber;
requestData.Properties.Description = this.PageViewModel.JobInformationDetail.CustomerSignatureName;
//requestData.SetText("Sample Text");
StorageFile signatureStream = await GetInkManagerStream();
requestData.SetHtmlFormat(Windows.ApplicationModel.DataTransfer.HtmlFormatHelper.CreateHtmlFormat(this.GetMailDescription())); 
```

下图显示了在 To 字段中设置电子邮件地址的位置：

![在此处输入图像描述](https://i.stack.imgur.com/YnUfh.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:28:42.947

你不能那样做。[在 WinRT 为StandardDataFormats](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.standarddataformats.aspx)`DataPackage`提供标准电子邮件格式并在电子邮件应用程序中支持它之前，我们将有一个解决方案。

我认为微软的默认邮件应该升级。它完全取决于共享目标应用程序以将特定数据显示到特定位置。DataPackage 的`Title`属性设置为主题，`Description`属性设置为邮件正文，但没有针对电子邮件的规定。

如果共享体验是最好的，那么用户将使用默认邮件应用程序，否则他们将使用另一个邮件应用程序。

# dojo - 当我移动到 dojo dataGrid 中的下一页时，会自动选择行（在第一页中选择的行）

> ID：15971328
> 
> 赞同：1
> 
> 时间：2013-04-12T12:23:17.383
> 
> 标签：dojo, dojox.grid.datagrid

在我的 dojo dataGrid 中，例如，如果我在第一页中选择第 7 行和第 8 行，并且如果我通过使用分页功能移动到第二页。行（在第一页中选择的第 7 行和第 8 行）在第二页中也默认选择。这是我的网格：

```
var grid = new dojox.grid.EnhancedGrid({
id: 'linesGrid',
style: 'width:950px;height:250px;',
store: store,
structure: layout,
rowSelector: '20px',
plugins: {
  indirectSelection: {headerSelector:true, width:"40px", styles:"text-align: center;"},
  pagination: {
      pageSizes: ["25", "50", "100", "All"],
      description: true,
      sizeSwitch: true,
      pageStepper: true,
      gotoButton: true,
              /*page step to be displayed*/
      maxPageStep: 4,
              /*position of the pagination bar*/
      position: "bottom"
  }
}
}, document.createElement('div')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T15:18:45.793

将网格设置为 keepSelection : true。这将保持选择的正确行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:42:53.813

`yourGrid.selection.deselectAll();`在显示下一页之前，您需要执行一次。

**编辑：**

这里也讨论了这个问题的一部分：

[无法在分页 dojo 增强网格上调用函数](https://stackoverflow.com/questions/16018041/not-able-to-call-a-function-on-pagination-dojo-enhancedgrid/16021386?noredirect=1#comment22872392_16021386)

# java - 异步回调失败

> ID：15971332
> 
> 赞同：0
> 
> 时间：2013-04-12T12:23:29.073
> 
> 标签：java, gwt, gxt, asynccallback

在我的应用程序中，我需要将字符串值添加到文件（.property 文件，如果它很重要）。并且用户在 gwt GUI 中输入此值。这是它的重要部分：

```
final Button submit = new Button("Submit");
        addButton(submit);
        submit.addSelectionListener(new SelectionListener<ButtonEvent>() {
            @Override
            public void componentSelected(ButtonEvent ce) {
                keyWord.selectAll();
                regexp.selectAll();
                if (keyWord.getValue() != null){
                    setKeyWord(customerId, keyWord.getValue());
                    keyWord.setValue("");
                }
                if (regexp.getValue() != null){
                    setRegExp(customerId, regexp.getValue());
                    regexp.setValue("");
                }

            }
        });
    }

    private void setKeyWord(final String customerId, final String keyword){

        final AsyncCallback<String> callbackItems = new AsyncCallback<String>() {
            public void onFailure(final Throwable caught) {
                Window.alert("unable to add " + caught.toString());
            }

            public void onSuccess(final String x) {
                Window.alert(x);
            }
        };
        serverManagementSvc.setKeyWords(customerId, keyword, callbackItems);
    }

    private void setRegExp(final String customerId, final String regexp){

        final AsyncCallback<String> calbackItems = new AsyncCallback<String>() {
            @Override
            public void onFailure(Throwable throwable) {
                Window.alert("unable to add " + throwable.toString());
            }

            @Override
            public void onSuccess(String s) {
                Window.alert(s);
            }
        };
        serverManagementSvc.setRegExp(customerId, regexp, calbackItems);
    } 
```

所以我需要使用 Asunccallback 来调用“服务器部分”中的方法。以下是这些方法：

```
//adds a new keyword to customers properties
    public String setKeyWords(String customer, String word){
        try{
                PropertiesConfiguration props = new PropertiesConfiguration("/home/mikhail/bzrrep/DLP/DLPServer/src/main/resources/rules.properties");
                String newKeyWord = new String(props.getString("users." + customer + ".keywords" + "," + word));
                props.setProperty("users." + customer + ".keywords", newKeyWord);
                props.save();
        }catch (ConfigurationException e){
            e.printStackTrace();
        }
        return "keyword " + word + " added";
    }

    // adds a new regexp to customer properties
    public String setRegExp(String customer, String regexp){
        try {
                PropertiesConfiguration props = new PropertiesConfiguration("/home/mikhail/bzrrep/DLP/DLPServer/src/main/resources/rules.properties");
                String newRegValue = new String(props.getString("users." + customer + ".regexps" + "," + regexp));
                props.setProperty("users." + customer + ".regexps", newRegValue);
                props.save();
        } catch (ConfigurationException e){
            e.printStackTrace();
        }
        return "regexp " + regexp + " added to " + customer + "'s config";
    } 
```

所有接口都存在。当我运行我的代码并在 gui 中按“提交”按钮时，我看到两个异步回调失败（如您所见，Window.alert 显示“空指针异常”，尽管我发送给方法的值不为空） . 为什么会这样？你能给我一些建议吗？

**UPD**这里是萤火虫显示的错误：

```
uncaught exception: java.lang.ClassCastException    
function W8(){try{null.a()}catch(a){return a}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:02:54.960

问题解决了：代码中有一个简单的错误。我在错误的地方关闭了括号：

```
//adds a new keyword to customers properties
    public String setKeyWords(String customer, String word){
        try{
                PropertiesConfiguration props = new PropertiesConfiguration("/home/mikhail/bzrrep/DLP/DLPServer/src/main/resources/rules.properties");
                String newKeyWord = new String(props.getString("users." + customer + ".keywords") + "," + word);
                props.setProperty("users." + customer + ".keywords", newKeyWord);
                props.save();
        }catch (ConfigurationException e){
            e.printStackTrace();
        }
        return "keyword " + word + " added";
    }

    // adds a new regexp to customer properties
    public String setRegExp(String customer, String regexp){
        try {
                PropertiesConfiguration props = new PropertiesConfiguration("/home/mikhail/bzrrep/DLP/DLPServer/src/main/resources/rules.properties");
                String newRegValue = new String(props.getString("users." + customer + ".regexps") + "," + regexp);
                props.setProperty("users." + customer + ".regexps", newRegValue);
                props.save();
        } catch (ConfigurationException e){
            e.printStackTrace();
        }
        return "regexp " + regexp + " added to " + customer + "'s config";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:04:21.960

我建议您使用 -style PRETTY 重新编译 GWT 代码，然后再次检查该 firebug 输出；与您更新的未捕获异常相比，它可能会给您一个更好的线索。

接下来，我建议您在 Eclipse 调试器中运行它，并在客户端和服务器代码中设置断点，然后您可以检查变量并单步执行代码。

# mysql - mysql中的多个DELETE不能使用别名

> ID：15971337
> 
> 赞同：0
> 
> 时间：2013-04-12T12:23:45.167
> 
> 标签：mysql, sql, sql-delete

我将此方案用于多个 DELETE

```
DELETE Table1, Table2, Table3
FROM   Table1
JOIN   Table2 ON (Table2.ConditionID = Table1.ConditionID)
JOIN   Table3 ON (Table3.ConditionID = Table2.ConditionID)
WHERE  Table1.ConditionID = ?; 
```

为什么我不能使用这样的别名

```
DELETE Table1, Table2, Table3
FROM   Table1 t1
JOIN   Table2 t2 ON (t2.ConditionID = t1.ConditionID)
JOIN   Table3 t3 ON (t3.ConditionID = t2.ConditionID)
WHERE  t1.ConditionID = ?; 
```

我只得到一个正常的语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:25:42.107

其实你可以，你只需要使用关键字`ALIAS`后面给出的名称。`DELETE`

```
DELETE  t1, t2, t3
FROM    Table1 t1
        JOIN   Table2 t2 ON (t2.ConditionID = t1.ConditionID)
        JOIN   Table3 t3 ON (t3.ConditionID = t2.ConditionID)
WHERE   t1.ConditionID = ?; 
```

# asp.net - ASP.NET 编译器抱怨与 MiniProfiler 的框架版本不匹配

> ID：15971340
> 
> 赞同：29
> 
> 时间：2013-04-12T12:23:48.230
> 
> 标签：asp.net, .net, asp.net-mvc, binding, mvc-mini-profiler

我有一个从 VS2010 升级到 VS2012 的 MVC3 项目。该项目还参考了`MiniProfiler`. 我们的应用程序在 VS2012 中编译并运行良好，没有任何警告/错误。使用 IIS Express 运行时，这两个程序集都可以正常加载。但是，在使用 ASP.NET 编译器工具时，我收到以下警告：

> Microsoft (R) ASP.NET 编译工具版本 4.0.30319.17929 用于预编译 ASP.NET 应用程序的实用程序 版权所有 (C) Microsoft Corporation。版权所有。
> 
> (0)：警告：以下程序集依赖于高于目标的 .NET Framework 版本，并且在运行时可能无法正确加载，导致失败：MiniProfiler、Version=2.1.0.0、Culture=neutral、PublicKeyToken= b44f9351044011a3。依赖项是：System.Data.Linq，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089。您应该确保依赖程序集对于目标框架是正确的，或者确保您正在处理的目标框架是依赖程序集的框架。

我们没有明确引用`System.Data.Linq`. 直到更新到 VS2012，我们没有任何错误。该`MiniProfiler`版本确实针对 .NET 4.0（就像我们的应用程序一样）。什么可能导致此警告？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-08-12T17:11:47.143

我终于能够用[这个答案](https://stackoverflow.com/a/10431075/200322)的提示来修复它。我在中添加了以下`<add>`行`web.config`：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <!-- etc... -->
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <!-- etc... -->
      </assemblies>
    </compilation>
  <system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:18:16.893

您是否更改了 Web.confing 中的 targetFramework？

# ruby - 如何使用 Ruby 读取和写入同一个 EXCEL 文件？

> ID：15971344
> 
> 赞同：2
> 
> 时间：2013-04-12T12:24:00.380
> 
> 标签：ruby, excel, spreadsheet, xls

我想使用 Ruby 读取和写入同一个 EXCEL 文件（file.xls）。我尝试使用不允许写入文件的 Roo gem。现在我正在使用电子表格 gem，但我无法更新同一个 excel 文件中的现有数据。

是否可以使用 Ruby 在不更改宏的情况下读取和写入同一个 EXCEL 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T03:34:06.130

这是收到答案的类似帖子：[我想用 ruby​​ 编辑格式正确的 excel 文件](https://stackoverflow.com/questions/16167075/i-want-to-edit-a-wellformatted-excel-file)

基本上，您可能想查看 win32ole：[http ://davidsulc.com/blog/2011/03/27/using-ruby-and-win32ole-to-manipulate-excel/](http://davidsulc.com/blog/2011/03/27/using-ruby-and-win32ole-to-manipulate-excel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T07:06:22.040

我无法让 Roo 从同一个文件中读写。这可能是由于 Roo 在写入之前创建了一个临时文件。写入新文件更干净、更容易且受支持。我有我想在 db/data/import 下的项目中读取的数据，然后我写入 db/data/export ，一旦我采用这种方法，一切都会变得更容易。

# windows - 从 git 中删除文件

> ID：15971346
> 
> 赞同：0
> 
> 时间：2013-04-12T12:24:02.147
> 
> 标签：windows, git

如何从 Windows 上的 git 历史记录中删除文件？我的意思是完全删除它，因为该文件包含敏感数据并且无意中被推送到远程服务器。

有没有简单的内置 git 工具/命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:27:24.800

看一下git的帮助：[https ://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

> 删除敏感数据 用户有时会不小心将密码或密钥等数据提交到 git 存储库中。虽然您可以使用 git rm 删除文件，但它仍将保留在 repo 的历史记录中。幸运的是，git 使得从整个 repo 历史中删除文件变得相当简单。

# php - 计算MySQL中的平均每日访问者

> ID：15971348
> 
> 赞同：2
> 
> 时间：2013-04-12T12:24:09.683
> 
> 标签：php, mysql

我在从 MySQL 数据库计算平均每日访问者时遇到了一些问题。我有一个自动填充 0 或 1 的列，具体取决于访问者是真正的访问者还是机器人。我的查询看起来像这样

```
SELECT
   COUNT( * ) / COUNT( DATEDIFF( NOW( ) , 
   SELECT * 
    FROM mw_visitors
    WHERE bot = 0
    ORDER BY ID ASC 
   LIMIT 1 ) )
FROM mw_visitors
WHERE bot = 0 
```

但它不起作用。我的 PHPMyAdmin 告诉我，“SELECT * FROM mw_visitors where bot = 0 ORDER..”处的语法有错误。我在网上搜索过，但没有找到正确的东西。

编辑：结构[http://pastebin.com/dm4Hjukr](http://pastebin.com/dm4Hjukr) 获得真实的人类访客：

```
SELECT COUNT(DISTINCT `ip`) AS `visits`
FROM `mw_visitors` WHERE `bot` = 0 AND `time` BETWEEN
(SELECT `time` FROM `mw_visitors` WHERE `bot` = 0 ORDER BY `ID` ASC LIMIT 1) AND NOW() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:40:53.573

了解您的表看起来如何肯定会有很大帮助，但即使没有，您为什么不以更简单的方式对查询进行建模呢？

如果我理解正确，您希望获得访问您网站的真实访问者的数量，因此您需要过滤掉任何机器人。

像这样对查询建模不是更容易吗？

```
SELECT COUNT(`visitor_id`) AS `visits` FROM `mw_visitors` WHERE `bot` = 0 AND `date` BETWEEN ? AND ?; 
```

（这两个问号是您要检查访问者点击的日期区域）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:35:18.850

好的，现在我看到了您的表结构。在这种情况下，您要查找的查询应该是：

```
SELECT COUNT(DISTINCT(`ip`)) / (SELECT ABS(DATEDIFF(NOW(),(SELECT `time` FROM `mw_visitors` ORDER BY `time` ASC LIMIT 1)))) AS `visits` FROM `mw_visitors` WHERE `bot` = 0 AND `time` BETWEEN NOW() AND (SELECT `time` FROM `mw_visitors` ORDER BY `time` ASC LIMIT 1); 
```

我没有检查最后一个`(SELECT...)`，但它应该没问题。

# vim - 无法使用病原体安装 vim 插件

> ID：15971351
> 
> 赞同：1
> 
> 时间：2013-04-12T12:24:23.123
> 
> 标签：vim, pathogen

我正在连接我大学的计算机。我正在尝试自定义 vim。他们将他们的 vim 配置文件放在我没有权限的受保护的 /usr/share 文件夹中。

我将 .vimrc 文件复制到我的主目录并开始更改。这似乎工作:-)

第 2 步，我按照此处的说明安装了病原体：http: [//mirnazim.org/writings/vim-plugins-i-use/](http://mirnazim.org/writings/vim-plugins-i-use/)

我将以下行添加到 .vimrc

```
execute pathogen#infect('~/.vim/bundle/{}')
call pathogen#helptags() 
```

不幸的是，vim 无法识别我的插件（例如 TagBar）。我尝试使用 infect 中的参数，将执行更改为调用等。

没有任何帮助。

有趣的是，当我`:scriptnames`看到那个`~/.vim/autoload/pathogen.vim`节目时。捆绑目录中的文件不显示:-(。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:14:02.213

我知道这很明显，但是您的插件文件夹实际上里面有文件？

有些人已经错过了：[Vim: Pathogen not loading](https://stackoverflow.com/questions/8723464/vim-pathogen-not-loading/8735115#8735115)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:56:46.247

> 我怎样才能使我的插件工作？也许没有病原体？

有些人喜欢它，有些人不喜欢，但我建议你使用[Vundle](https://github.com/gmarik/vundle)而不是病原体。[这是一篇关于为什么](http://lepture.com/en/2012/vundle-vs-pathogen)的好帖子，但老实说，主要原因是使用它管理插件只是愚蠢的简单。

安装过程非常简单：

```
git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle 
```

并编辑 .vimrc : filetype off " required! set rtp+=~/.vim/bundle/vundle/ call vundle#rc() Bundle 'gmarik/vundle' " ... new bundles here filetype plugin indent on

对于我要安装的每个新插件，我都会将以下内容添加到我的 .vim rc 中，其中的注释是：

```
Bundle "user/plugin" 
```

然后你`:BundleInstall`在一个新实例上执行。

优雅简约，你还想要什么？

# windows-phone-7 - Visifire.Charts 如何禁用垂直线。可湿性粉剂

> ID：15971355
> 
> 赞同：0
> 
> 时间：2013-04-12T12:24:41.437
> 
> 标签：windows-phone-7, charts, visifire

图表是由代码创建的。但我不能禁用图表中的垂直线。这是创建图表的代码：

```
 public void CreateChart() {
        CleanChart();

        visiChart = new Chart()
        {
            ToolTipEnabled = true,
            Width = 400,
            Height = 200,
            Padding = new Thickness(0),
            Margin = new Thickness(0, 6, 0, -12),
            Background = new SolidColorBrush(Colors.White),
        };

        ChartGrid grid = new ChartGrid()
        {
            Enabled = false
        };
        DataSeries dataSeries = new DataSeries();
        DataPoint dataPoint;
        Axis yAx = new Axis()
        {
            AxisLabels = new AxisLabels() { Enabled = false },
            Grids = new ChartGridCollection() {grid}
        };

        int i = 0;
        var deps = App.CurrentAgreement.Deposits.Deposit.Where(x => x.DepositIliv + x.DepositLink > 0).ToList();

        foreach (var dep in deps) {
            dataPoint = new DataPoint();
            dataPoint.YValue = dep.DepositIliv + dep.DepositLink + dep.UValue + dep.WarrantyValue;
            dataPoint.XValue = i;
            i++;
            dataPoint.LabelText = dataPoint.YValue.Out();
            dataPoint.AxisXLabel = DateTime.Parse(dep.DepositDate).ToString("MMM yyyy");
            dataPoint.MouseLeftButtonUp += dataPoint_MouseLeftButtonUp;
            dataSeries.DataPoints.Add(dataPoint);
        }
        dataSeries.LabelEnabled = true;
        dataSeries.RenderAs = RenderAs.Column;
        dataSeries.Color = new SolidColorBrush(Colors.Green);
        visiChart.Series.Add(dataSeries);
        visiChart.AxesY.Add(yAx);

        ChartPlaceHolder.Children.Add(visiChart);
    } 
```

但我不需要可见的垂直线。这是一个图表屏幕。

![图表](https://i.stack.imgur.com/rgTMk.png)

我怎样才能禁用线路？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:57:24.337

您还必须从 AxisX 禁用网格线。

例子：

```
ChartGrid grid = new ChartGrid()
{
    Enabled = false
};

Axis xAx = new Axis();
xAx.Grids.Add(grid);
visiChart.AxesX.Add(xAx); 
```

# iphone - iOS 上 UIAlertView 中的国际字符

> ID：15971356
> 
> 赞同：0
> 
> 时间：2013-04-12T12:24:43.283
> 
> 标签：iphone, ios

我在显示国际字符时遇到问题`UIAlertView`。

我正在从此 URL 中检索 JSON 格式的[字符串](http://kancelarijahatipovic.com/translate.php?from=eng&dest=hr&phrase=iron)。

返回的格式没问题，并且包含正确的字符。

当我尝试在我的应用程序中加载它时，`UIAlertView`我看到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/na4jd.png)

显示西班牙文、克罗地亚文、中文等 Unicode 字符的正确方法是什么？

更改设置中的默认语言并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:12:52.637

没有任何代码，很难指出哪里出错了。下面的代码有效，我只能假设您正在对编码数据进行特别有效的处理。

```
NSData *data = [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://kancelarijahatipovic.com/translate.php?from=eng&dest=hr&phrase=iron"]] returningResponse:nil error:nil];    
NSString *string = [NSString stringWithUTF8String:[data bytes]];
SBJsonParser *parser = [[SBJsonParser alloc] init];
id returnVal = [parser objectWithString:string];  
if( [returnVal isKindOfClass:[NSDictionary class]]) {  
    //build string  
    NSMutableString *alertString = [NSMutableString string];    
    if( [returnVal objectForKey:@"tuc"] != nil ) {  
        NSArray *tucs = [returnVal objectForKey:@"tuc"];  

        for( id tucObject in tucs ) {  
            if( [tucObject isKindOfClass:[NSDictionary class]] && [tucObject objectForKey:@"phrase"] != nil ) {  
                id phraseObject = [tucObject objectForKey:@"phrase"];  

                if( [phraseObject isKindOfClass:[NSDictionary class]] && [phraseObject objectForKey:@"text"] != nil )  {  
                    [alertString appendFormat:@"%@\n", [phraseObject objectForKey:@"text"]];  
                }  
            }  
        }  
    }  

    if( alertString.length > 0 ) {  
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"example" message:alertString delegate:nil cancelButtonTitle:@"okay" otherButtonTitles: nil];  
        [alertView show];  
    }  
} 
```

编辑： SBJsonParser`objectWithData:`提供与上述相同的结果。

# html - 我只是在 CSS 中发现了一个错误，还是我忽略了某些东西？

> ID：15971360
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:24:48.230
> 
> 标签：html, css

我在全球范围内的所有链接都有这些样式。我无法覆盖同一页面上 div 中的链接样式。

```
a, a:visited{
    outline: 0;
    cursor: pointer;
    color: inherit;
    text-decoration: none;
}

a:hover{
    text-decoration: underline;
} 
```

现在我想覆盖锚链接的样式以在悬停时将其颜色更改为白色，但仅在多个看不见的类的 div 和像这样的通知容器中......

```
<div class="unseen notificationContainer">                     
    <a href="profile?customerId=1365764036258">
        <strong>robert</strong>
    </a>
    sent you a friend request 
    <a href="friend_request?type=accept&amp;notificationId=1365764054463">
        Accept
    </a>
    <a href="friend_request?type=reject&amp;notificationId=1365764054463">
        Reject
    </a>          
</div> 
```

所以我将以下内容添加到我的 CSS

```
.unseen{
    background: #09f;
    color: #fff;
}

.unseen a :hover{
    color: #fff;
    text-decoration: underline;
} 
```

当页面加载悬停在第一个链接上时，它的颜色变为白色，但其他三个采用背景的蓝色。在过去的一个小时里，我一直在做这个，而不是只是令人恼火。notificationContainer 的样式如下

```
.notificationContainer{
    width: 390px;
    float: left;
    border-bottom: solid 1px #eee;
    padding: 5px;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:27:21.753

CSS不可能有错误，只有浏览器可以（除非您的意思是CSS规范中的错误等）。

也就是说，这是您的代码中的错误，而不是浏览器中的错误：

```
.unseen a :hover{
    color: #fff;
    text-decoration: underline;
} 
```

`a`和之间的空间`:hover`表示任何元素是`:hover`和*内* `a`，很像`.unseen a`表示`a`内的元素`.unseen`，所以这不起作用。您需要删除该空间：

```
.unseen a:hover{
    color: #fff;
    text-decoration: underline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:43:46.743

不太确定你在追求什么——你的问题并没有说清楚。如果我猜错了，请原谅我。这有帮助吗？（您可以定位具有多个类的元素）

```
<style>
a, a:visited{
outline: 0;
cursor: pointer;
color: inherit;
text-decoration: none;
}

a:hover{
    text-decoration: underline;
}

.unseen.notificationContainer a:hover
{
    background: #09f;
    color: #fff;
    text-decoration: underline;
}
.notificationContainer
{
    display: inline-block;
    float: left;
    border-bottom: solid 1px #eee;
    padding: 5px;
}
</style> 
```

和

```
<div class="unseen notificationContainer">                     
    <a href="profile?customerId=1365764036258"><strong>robert</strong></a>
    sent you a friend request 
    <a href="friend_request?type=accept&amp;notificationId=1365764054463">Accept</a>
    <a href="friend_request?type=reject&amp;notificationId=1365764054463">Reject</a>          
</div> 
```

# jquery - 我的数组未定义

> ID：15971362
> 
> 赞同：2
> 
> 时间：2013-04-12T12:24:53.767
> 
> 标签：jquery, html, arrays, leaflet

我有以下问题代码进一步向下。当我这样做时

```
city[i] = response[i].name; 
```

我可以打印出我拥有的每个城市的每个名字。但是现在我想要一个多维数组，因为我还想保存以下代码

```
L.marker([response[i].lat, response[i].lon]).bindPopup(response[i].name); 
```

而且我认为我可以将它保存在一个多维数组中，所以当我们有一个例子

```
city[1]["CityName"] = "New York"
city[1]["Locations"] =  L.marker([location]).bindPopup(name); 
```

所以，现在当我打电话时，`city[1]['Locations']`我得到了 L.Marker，对吧？

这是我的代码

```
function init()
{
region = 'all';
var url = "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
    attribution = "(c) OSM contributors, ODBL";

var minimal = L.tileLayer(url, {styleID: 22677, attribution: attribution});
$.ajax
({
    type: 'GET',
    url: 'webservice.php',
    data: {region: region},
    success: function(response, textStatus, XMLHttpRequest) 
    { 
        var city = new Array();
        var lygStr = '';
        for(var i = 0; i < response.length; i++)
        {
            //alert(response[i].lat + " | " + response[i].lon + " | " + response[i].name);
            alert(response[i].name);
            city[i]["CityName"] = response[i].name;

            //L.marker([response[i].lat, response[i].lon]).bindPopup(response[i].name);
            if(i + 1 == response.length)
            {
                lygStr += city[i]["CityName"];
            }
            else
            {
                lygStr += city[i]["CityName"] + ", ";
            }
        }
        alert("Test" + lygStr);
        var cities = L.layerGroup([lygStr]);

        map = L.map("map1", 
        {
            center: new L.Latlng(resposne[1].lat, response[0].lon),
            zoom: 10,
            layers: [minimal, cities]
        });
    }
});

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:27:46.553

正确的初始化将解决此问题 - 您需要将位置处`city[i]`的对象初始化为保存您的值而不是未定义的对象。

```
 var city = [];   // don't use new Array() !
    var lygStr = '';
    for(var i = 0; i < response.length; i++)
    {
        city[i] = {}; // you need to create an object here

        city[i]["CityName"] = response[i].name; 
```

此外，您希望拥有一个对象而不是数组。数组只能有数字索引，而对象可以有你想要的标识符。

```
 city[i]['Location']
    // same as
    city[i].Location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:29:39.500

它看起来像在这一行：

```
city[1]["Locations"] =  L.marker([location]).bindPopup(name); 
```

你`city[1]["Locations"]`将被设置为任何`.bindPopup(name)`回报。这可能是`undefined`或者它可能是一个函数。该方法是否构造为返回其调用的对象？仅此而已：

```
city[1]["Locations"] =  L.marker([location]);
city[1]["Locations"].bindPopup(name); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T12:28:03.933

在声明它之前，您将`city[i]`其用作数组：

```
var city = []; // don't use the new Array(); syntax
var lygStr = '';

for(var i = 0; i < response.length; i++) {
    // before using city[i] as an array, you must declare it as an array
    city[i] = [];    

    city[i]["CityName"] = response[i].name;
    ... 
```

# ruby - Codecademy“符号和字符串之间的转换”红宝石课

> ID：15971364
> 
> 赞同：9
> 
> 时间：2013-04-12T12:24:56.547
> 
> 标签：ruby, string, symbols

这些是 Codecademy 的说明：

> 我们有一个字符串数组，我们希望稍后将其用作哈希键，但我们希望它们是符号。创建一个新数组，符号。用于`.each`迭代字符串数组并将每个字符串转换为符号，将这些符号添加到符号中。

这是我写的代码（`strings`提供了数组）：

```
strings = ["HTML", "CSS", "JavaScript", "Python", "Ruby"]
symbols = []
strings.each { |x| x.to_sym }
symbols.push(strings) 
```

我知道我可能做错了很多事情，但是到目前为止，我已经轻松地完成了 ruby​​ 轨道，所以我不确定为什么这个会难倒我。首先，它没有将字符串转换为符号，其次，它没有将它们推送到符号数组。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T12:27:42.277

`to_sym`独自一人没有做任何有用的事情；它正在转换字符串，但没有将其存储在任何地方或以后使用它。您想继续添加到符号数组。

```
strings = ["HTML", "CSS", "JavaScript", "Python", "Ruby"]
symbols = []
strings.each { |s| symbols.push s.to_sym } 
```

或者更优雅的是，您可以跳过设置`symbols = []`并使用`map`一行来创建它：

```
symbols = strings.map { |s| s.to_sym } 
```

`map`将遍历数组中的每个项目并根据 map 函数将其转换为其他内容。对于您只是应用函数的简单地图，您可以更进一步：

```
symbols = strings.map &:to_sym 
```

（和 一样`symbols = strings.map(&:to_sym)`，用你觉得更有品位的那个。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:27:35.983

`each`迭代`strings`，将块应用于每个元素。但是，它不会返回任何东西。您需要添加到`symbols`块本身的数组中：

```
strings.each { |x| symbols.push(x.to_sym) } 
```

但是，您也可以在一行中生成符号数组：

```
symbols = strings.map { |x| x.to_sym } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T09:53:57.513

您可以将代码更改为以下内容：

```
strings.each do |x|
x = x.to_sym
symbols.push(x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T07:02:33.237

```
strings = ["HTML", "CSS", "JavaScript", "Python", "Ruby"]

symbols = Array.new
strings.each do |x|
    symbols.push(x.to_sym)
end 
```

这应该是一个确切的答案..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T08:02:29.303

您必须在迭代字符串的每个值时存储新值，将其转换为符号，然后重新调整值

```
strings = ["HTML", "CSS", "JavaScript", "Python", "Ruby"]
symbols = []
strings.each do |s|
  s = s.to_sym
  symbols.push(s)
end 
```

# objective-c - 为什么我们使用接口而不是协议？

> ID：15971369
> 
> 赞同：0
> 
> 时间：2013-04-12T12:25:20.933
> 
> 标签：objective-c

我认为，除了名称之外，协议更适合用作类之间的“接口”。它们完成了`@interface`s 所做的所有事情（公开属性和方法），并且除此之外，不同的类可以实现相同的协议，这与 Objective-C 的动态特性相结合是一个巨大的优势。那么为什么我们仍然使用`@interface`s 呢？与协议相比，它们带来了哪些优势？（我希望从这个问题中得到更多，而不是“他们在做什么时很明确”或“因为没有建设性而封闭”。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:39:34.227

委托协议需要这样定义

```
@protocol 
//methods
@end 
```

它可以放在任何 .h 类中，您只需在要使用它时导入它。

协议不像 java 接口，协议是允许两个类一起工作的适配器。基本上它说，如果您希望 A 类向您发送有关其状态和操作的消息，这些是它将在其委托上调用的方法，您必须实现这些方法。它不像接口，因为接口说如果你想继承这个类，你必须实现这些方法，协议说如果你想与这个类交互，你必须实现这些方法，所以它有些不同。

[Objective C 接口、委托和协议](https://stackoverflow.com/questions/1375617/objective-c-interfaces-delegates-and-protocols)

# javascript - Require.js Uncaught TypeError: undefined is not a function

> ID：15971374
> 
> 赞同：4
> 
> 时间：2013-04-12T12:25:27.527
> 
> 标签：javascript, jquery, requirejs

我刚开始学习[Require.js](http://requirejs.org/)

**文件系统**是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/Zq1Hq.png)

这是我的**index.html**

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>

    <script type="text/javascript" src="lib/require/require.min.js" data-main="lib/main"></script>

</head>
<body>
    <span id="content"></span>
</body>
</html> 
```

现在，我知道加载到 DOM 的**第一个**文件是 require.js，然后加载**lib/main.js**

现在**main.js**是

```
require(['jquery'],function($){
     //this works since both **main.js** and **jquery.js** are in same folder
     $("#content").html("jquery am  loaded");
}); 
```

![在此处输入图像描述](https://i.stack.imgur.com/Nmeuf.png) 如果我将**jquery.js**保存在与 main.js 相同的文件夹中，那么问题就来了，代码可以正常工作，但是如果我将路径更改为 jquery/jquery.js 并将 main.js 更改为

```
require(['jquery/jquery'],function($){
     //this thing shows 'Uncaught TypeError: undefined is not a function'
     $("#content").html("jquery am  loaded");
}); 
```

我理解问题在于，如果**jquery.js位于*****除 main.js 之外***的任何其他文件夹中，则它不会加载它，但是为什么，请说明一下以及如何实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:57:17.210

要使用 RequireJS 和 jQuery，您应该使用组合的 RequireJS/jQuery 文件，该文件位于：

[http://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)

或使用`path`.

[http://requirejs.org/docs/api.html#config-paths](http://requirejs.org/docs/api.html#config-paths)

```
require.config({
    paths: {
        "jquery": 'http://code.jquery.com/jquery-1.9.1'
    }
});

require(["jquery"], function ($) {
    console.log($.fn.jquery);
}); 
```

# php - 已使用 require 发送的标头

> ID：15971381
> 
> 赞同：-2
> 
> 时间：2013-04-12T12:25:42.240
> 
> 标签：php, curl, header, include

我正在使用 curl 编写登录页面，因此我需要将一些变量传递到名为`action.php`.

这是我的代码：

```
global $var1;
global $var2;

if(isset($match[1][0])){
mail($send,$subject,$message,$headers);
header('Location: page1.php');}else{
header('Location: page2.php');} 
```

**page1.php**

```
require('action.php');

echo $var1;

echo $var2; 
```

它没有让我知道变量。

我也看到了

`Warning: Cannot modify header information - headers already sent by (output started at on page1.php`

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:35:08.567

您关于警告的问题已得到解答（在使用之前不要发送任何输出`header()`），但数据未在页面之间传递的问题尚未得到解答。

2 个 PHP 脚本之间无法访问全局变量 - [HTTP 是无状态的](https://stackoverflow.com/questions/4913763/what-does-it-mean-when-they-say-http-is-stateless)。

使用会话或其他方式使两个页面之间的数据可访问。

```
session_start();
$_SESSION['var1'] = 'some value';
$_SESSION['var2'] = 'some value';

if(isset($match[1][0])){
    mail($send,$subject,$message,$headers);
    header('Location: page1.php');
}else{
    header('Location: page2.php');
} 
```

和

```
session_start();
require('action.php');
echo $_SESSION['var1'];
echo $_SESSION['var2']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:27:45.247

如果您已经将任何内容写入屏幕，则不能使用标题重定向。

因此，即使您正在执行`echo "hello"`或在执行`<html>`此操作之前，标头命令也无法使用 javascript 重定向进行后输出重定向或使用输出缓冲，这将允许您进行后输出重定向，因为它只会在您写出缓冲区时告诉它。

希望这是有道理的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:29:26.687

这是在[PHP 手册](http://php.net/manual/en/function.header.php)中，

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

自己看看哪里出错了。

**编辑**：您可以通过将值设置为 $_SESSION[] 并在另一侧读取它们来传递变量。

# php - Jquery POST在keyup上获取数据

> ID：15971383
> 
> 赞同：4
> 
> 时间：2013-04-12T12:25:48.133
> 
> 标签：php, jquery, ajax

**我想做的事**

在文本字段中写入时，我希望`<div class="result">`用 PHP 回显的内容填充。

但它不起作用！

*jQuery*

```
$(document).ready(function() {
    var search = $("#search");
    if (search.val() !== '') {
        search.keyup(function() {
            $.post("index.php", { search : search.val()}, function(data) {
                $(".result").html(data);
            });
        });
    }
}); 
```

*php*

```
 if (isset($_POST['search'])) {
        echo 'hello';
    } 
```

*html*

```
<input type="text" name="search" id="search"/>
<br />
<div class="result"></div> 
```

**问题**

填写输入时，什么都没有发生，这意味着在 keyup 上发布输入的数据（输入新字符/或删除。

是什么阻止它工作？我是 jQuery 新手。

谢谢。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:29:05.393

这是错误的。

```
if (search.val() !== '') { 
```

上面的行应该是，

```
if (search.val() != '') { 
```

**编辑：**

然后将 if 条件包装在 keyup 函数中。

```
$(document).ready(function() {
    var search = $("#search");

        search.keyup(function() {
            if (search.val() != '') {
                $.post("getInputs.php", { search : search.val()}, function(data) {
                    $(".result").html(data);
                });
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:40:27.677

当我遇到这样的情况时，我只是开始将问题分成两半，看看它失败的地方。这是我会尝试的几件事。

首先，在您的 jQuery 中，向控制台添加一些输出：

```
if (search.val() !== '') {
        console.log("I am not empty so I should go to index.php");
        search.keyup(function() {
            $.post("index.php", { search : search.val()}, function(data) {
                $(".result").html(data);
            });
        });
    } 
else
{
     console.log("search val was empty");
} 
```

当然，您可以随时检查浏览器网络分析器以查看它是否对该资源进行了 POST。这将告诉您问题是否在您的`search.val`测试中。

然后，如果您想调试 PHP 端，您可以删除`isset`测试并始终返回“hello”。这将告诉您它是否与您的 POST 变量或检查有关。

最后，您可以输出数据结果以确保有什么东西回来了。这将消除任何`$(".result").html()`问题：

```
$.post("index.php", { search : search.val()}, function(data) {
   console.log(data);
   $(".result").html(data);
}); 
```

如果这些都不起作用，也许您可​​以`keyup`首先切换绑定方式：

```
$(document).ready(function() {
    $("#search").keyup(function() {
       if ($(this).val() !== '') {
            $.post("index.php", { search : $(this).val()}, function(data) {
                $(".result").html(data);
            });
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:35:28.133

```
$(document).ready(function() {
    var search = $("#search");

}); 
```

仅在文档准备就绪时触发，而不是在 keyup 时触发，这意味着 var $("#search").val() 将是空白的。

更改您的代码以在每次按键时捕获输入值。

```
$(document).ready(function() {
         search.keyup(function() {

             var value = $("#search").val();
             if(value!="")
            {
             $.post("index.php", { search : value}, function(data) {
                $(".result").html(data);
            });
           }
        });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:36:36.817

你的逻辑不正确。如果您的#search 中包含文本，则仅设置 keyup 事件处理程序。不幸的是，当该脚本在准备好的文档上运行时，#search 中没有任何值，因此您的 keyup 处理程序永远不会被设置，这就是它永远不会触发的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:57:41.160

实际上，您的代码没有任何问题。我已经尝试过您的代码本身。唯一的问题是您有条件地调用了 keyup 函数。您的 Javascript 代码应如下所示：

```
$(document).ready(function() {
    var search = $("#search");
        search.keyup(function() {
            if (search.val() != '') {       
            $.post("index.php", { search : search.val()}, function(data) {
                $(".result").html(data);
            });
            }
        });

}); 
```

在这里，条件应该在 keyup 函数内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T12:46:20.120

我重写了你的一些逻辑并且能够让它工作。一种是您检查以确保您有价值的方式。我正在检查长度而不是字符串比较。此外，我没有将事件绑定到字段，而是将事件绑定到文档上并以字段为目标。试试看：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<input type="text" name="search" id="search"/>
<br />
<div class="result"></div>

<script>
    $(document).ready(function() {
        $(document).on('keyup', 'input#search', function() {
            if($(this).val().length > 0) {
                $.post('index.php', {"search":$(this).val()}, function(data) {
                    $('div.result').html(data);
                });
            }
        });
    });
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T12:47:31.233

```
// when the html is loaded
$(document).ready(function() {
    // find an element with the id 'search'
    var search = $("#search");

    // if this element's value is NOT an empty string -- oh look, it is!
    if (search.val() !== '') {
        // well, going to skip all this here then
        search.keyup(function() { // don't care
            $.post("index.php", { search : search.val()}, function(data) { // don't care
                $(".result").html(data); // don't care
            });
        });
    }

    // YAAAAY! All done!
}); 
```

# networking - GPS模块耗时

> ID：15971386
> 
> 赞同：1
> 
> 时间：2013-04-12T12:25:55.130
> 
> 标签：networking, gps, sensors, tinyos, nesc

[如果我使用连接到这个 gps 模块uBlox LEA-4A 的](http://www.u-blox.com/)420cc 传感器板，GPS 模块需要多少时间来获取 gps 信息 。

我用虹膜微粒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:18:27.777

数据表通常规定第一次修复的时间为 30-40 秒，具有良好的天线。但是第一次启用 GPS 设备需要 10 - 15 分钟。两次都在可以自由观看天空时有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T17:01:09.443

当 GPS 接收器打开时，它需要从至少三颗 GPS 卫星获取数据，然后才能给出其位置。通常这需要大约一分钟，但如果接收器远离上次使用的位置或它已关闭很长时间，则可能需要更长的时间。

# python - 将列表输出为列

> ID：15971389
> 
> 赞同：1
> 
> 时间：2013-04-12T12:25:57.760
> 
> 标签：python, list

我有 3 个大列表要输出为列，[0][0][0] 然后向下输出。我目前的书面代码（适用于较小的列表）是这样的：

```
f=open("Clustered_energies.txt", "w")
for i in range(0, len(frame_position)):
print >> f, frame_position[i],energy[i],cell_volume[i]
f.close() 
```

这给了我一个列表索引超出范围错误。我猜我需要使用列表理解，我试过这个：

```
print [(i,e,c) for i in frame_position for e in energy for c in cell_volume] 
```

但是它的输出一遍又一遍地重复每个列表中的一个值，列表理解是要走的路吗？或者我的原始代码可以修复吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:29:29.587

像这样的东西？

```
[[x,y,z] for x,y,z in zip(frame_position,energy,cell_volume)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:31:49.737

我的第一个想法是使用[`zip`](http://docs.python.org/2.7/library/functions.html#zip)，但它停在最短的列表上，所以我会使用[`izip_longest`](http://docs.python.org/2.7/library/itertools.html#itertools.izip_longest)（[`zip_longest`](http://docs.python.org/3.3/library/itertools.html#itertools.zip_longest)在 Python3 中调用它以供将来参考）：

```
import itertools
for i, e, c in itertools.izip_longest(frame_position, energy, cell_volume, fillvalue=" "):
    print i, e, c 
```

# opengl - CUDA OPENGL 互操作性：慢映射

> ID：15971391
> 
> 赞同：3
> 
> 时间：2013-04-12T12:26:01.567
> 
> 标签：opengl, cuda, interop, pbo

我的应用程序将从 openGL（深度图和渲染的 2D 图像信息）获取渲染结果到 CUDA 进行处理。

我做的一种方法是通过 glReadPixel(..., image_array_HOST/depth_array_Host)* 检索图像/深度图，然后通过 cudaMemcpy(..., cudaMemcpyHostToDevice) 将 image_HOST/depth_HOST 传递给 CUDA。我已经完成了这部分，虽然这听起来是多余的。（从 GPU>CPU>GPU）。*image_array_HOST/depth_array_Host 是我在主机上定义的数组。

另一种方法是使用 openGL<>cuda interpol。第一步是在 openGL 中创建一个缓冲区，然后将图像/深度信息传递给该像素缓冲区。还注册了一个 cuda 令牌并将其链接到该缓冲区。然后将 CUDA 上的矩阵链接到该 cuda 令牌。（据我所知，似乎没有直接的方法将像素缓冲区链接到 cuda 矩阵，应该有一个 cudatoken 供 openGL 识别。如果我错了，请纠正我。）

这部分我也做过。它认为这应该是相当有效的，因为 CUDA 正在处理的数据没有传输到任何地方，而只是传输到它在 openGL 上的位置。它是设备（GPU）内部的数据处理。

但是，我从第二种方法获得的花费时间甚至（略）长于第一种方法（GPU>CPU>GPU）。这真的让我很困惑。

我不确定我是否错过了任何部分，或者我没有以有效的方式做到这一点。

我也不确定的一件事是 glReadPixel(...,*data)。在我的理解中，如果 *data 是一个指向 HOST 上内存的指针，那么它将执行从 GPU>CPU 传输的数据。如果 *data=0，并且绑定了一个缓冲区，那么数据将被传输到该缓冲区，它应该是 GPU>GPU 的事情。

也许其他一些方法可以比 glReadPixel(..,0) 更有效地传递数据。

希望有人能解释我的问题。

以下是我的代码：

--

```
// openGL has finished its rendering, and the data are all save in the openGL. It is ready to go.
... 

// declare one pointer and memory location on cuda for later use.
float *depth_map_Device;
cudaMalloc((void**) &depth_map_Device, sizeof(float) * size); 

// inititate cuda<>openGL
cudaGLSetGLDevice(0);   

// generate a buffer, and link the cuda token to it -- buffer <>cuda token
GLuint gl_pbo;
cudaGraphicsResource_t cudaToken;   
size_t data_size = sizeof(float)*number_data;                               // number_data is defined beforehand
void *data = malloc(data_size);
glGenBuffers(1, &gl_pbo);
glBindBuffer(GL_ARRAY_BUFFER, gl_pbo);
glBufferData(GL_ARRAY_BUFFER, size, data, GL_DYNAMIC_DRAW); 
glBindBuffer(GL_ARRAY_BUFFER, 0);
cudaGraphicsGLRegisterBuffer(&cudaToken, gl_pbo, cudaGraphicsMapFlagsNone); // now there is a link between gl_buffer and cudaResource
free(data);

// now it start to map(link) the data on buffer to cuda 
glBindBuffer(GL_PIXEL_PACK_BUFFER, gl_pbo);                     
glReadPixels(0, 0, width, height, GL_RED, GL_FLOAT, 0);         
// map the rendered data to buffer, since it is glReadPixels(..,0), it should be still fast? (GPU>GPU)
// width & height are defined beforehand. It can be GL_DEPTH_COMPONENT or others as well, just an example here.
glBindBuffer(GL_PIXEL_UNPACK_BUFFER, gl_pbo);                       
cudaGraphicsMapResources(1, &cudaToken, 0);                     // let cufaResource which has a link to gl_buffer to the the current CUDA windows
cudaGraphicsResourceGetMappedPointer((void **)&depth_map_Device,  &data_size, cudaToken);   // transfer data
cudaGraphicsUnmapResources(1, &cudaToken, 0);           // unmap it, for the next round

// CUDA kernel
my_kernel       <<<block_number, thread_number>>> (...,depth_map_Device,...); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:06:38.910

我想我现在可以部分回答我的问题，并希望它对某些人有用。

我将 pbo 绑定到浮点 cuda (GPU) 内存，但似乎 openGL 原始图像渲染数据是无符号字符格式，（以下是我的假设）因此需要将这些数据转换为浮点数，然后传递到 cuda 内存。我认为openGL所做的就是使用CPU来进行这种格式转换，这就是为什么使用pbo和不使用pbo没有太大区别的原因。

通过使用 unsigned char (glreadpixel(..,GL_UNSIGNED_BYTE,0))，与 pbo 绑定比不使用 pbo 读取 RGB 数据更快。然后我通过它做一个简单的 cuda 内核来做格式转换，这比 openGL 做的效率更高。通过这样做，速度会快得多。

但是，它不适用于深度缓冲区。出于某种原因，通过 glreadpixel 读取深度图（无论是否使用 pbo）都很慢。然后，我发现了两个旧讨论： [http ://www.opengl.org/discussion_boards/showthread.php/153121-Reading-the-Depth-Buffer-Why-so-slow](http://www.opengl.org/discussion_boards/showthread.php/153121-Reading-the-Depth-Buffer-Why-so-slow)

[http://www.opengl.org/discussion_boards/showthread.php/173205-Saving-Restoring-Depth-Buffer-to-from-PBO](http://www.opengl.org/discussion_boards/showthread.php/173205-Saving-Restoring-Depth-Buffer-to-from-PBO)

他们指出了格式问题，而这正是我为 RGB 找到的。（无符号的字符）。但是我尝试过 unsigned char/unsigned short 和 unsigned int，以及 float 用于读取深度缓冲区，所有性能几乎相同的速度。

所以我仍然有阅读深度的速度问题。

# php - 加密 - 字符串损坏

> ID：15971393
> 
> 赞同：0
> 
> 时间：2013-04-12T12:26:11.927
> 
> 标签：php, url, encryption

我最近注意到我们应用程序中的一些链接正在损坏......

通过破坏，我的意思是，当字符串被加密然后解密时，输出与输入不同，输出变成一团乱麻。

```
function encode($string) { 
    $key = 'Gt88ggjJI_987JKbgKHIfgIKhOknoUa6'; 
    return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $string, MCRYPT_MODE_CBC, md5(md5($key)))); 
}

function decode($string) { 
    $key = 'Gt88ggjJI_987JKbgKHIfgIKhOknoUa6'; 
    return rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($string), MCRYPT_MODE_CBC, md5(md5($key))), "\0"); 
} 
```

*请原谅函数名称，我知道 (en|de)coding 和 (en|de)crypting 之间的区别。不幸的是，由于遗留原因，它需要被称为。*

有时 $string 是通过 URI GET 发送的（不，它不包含非常敏感的信息，让我们继续话题吧），当它通过 GET 发送时：

```
href="/path/to/thingy/?x=<?= urlencode(encode('my amazing string')); ?>" 
```

和接收端的PHP，自动urldecode，然后：

```
$string = decode($_GET['x']); 
```

但可悲的是，大约 400 分之一的加密/解密输出是错误的。谁能伸出援助之手或解释我哪里出错了？

有时，当通过 cookie 发送字符串时，它也会损坏。这是否与功能、urlencode 或客户端浏览器由于互联网连接不稳定而无法正确发送数据有关？

# jquery - jquery isotope 无限滚动在附加元素上添加悬停效果

> ID：15971397
> 
> 赞同：2
> 
> 时间：2013-04-12T12:26:32.157
> 
> 标签：jquery, jquery-isotope, infinite-scroll

当用户到达我的网站底部时，我使用一个`isotope`和一个脚本的组合来加载更多数据：`infinite-scroll`

```
var $ = jQuery,
$container = $('#content.grided .wrap #gridcontainer');
if ( $container.length > 0 ) {
    $container.isotope({
        itemSelector : '.grid-item',
        masonry : {
            columnWidth : 240
        }
    });     
        //enable infinity scroll
    $container.infinitescroll({
            navSelector  : '#posts_navi',    // selector for the paged navigation 
            nextSelector : '#posts_navi a.previous_posts',  // selector for the NEXT link (to page 2)
            itemSelector : '.grid-item',     // selector for all items you'll retrieve
            loading: {
                finishedMsg: 'No more pages to load.',
                img: 'http://i.imgur.com/qkKy8.gif'
              }
            },
            // call Isotope as a callback
            function( newElements ) {
              $container.isotope( 'appended', $( newElements ) ); 
            }
          );    
    } 
```

将元素添加到 dom 后，我想仅在这些元素上运行 jQuery 脚本，以添加一些行为：

```
$('#gridcontainer .grid-item').each(function(){
    var $this = $(this),
    $overlay = $this.find('span.overlay');

    $this.hover(
        function(){
            $this.addClass('hovered');
            $overlay.stop().hide().fadeIn('100');
        },
        function(){
            $this.removeClass('hovered');
            $overlay.stop().show().fadeOut('100');
        }
    );
} 
```

我知道我应该在第一个脚本的回调函数中执行它，在哪里`isotope` `append`使用，但是我应该如何正确执行呢？

# c++ - 相同类型的数组成员后对齐

> ID：15971399
> 
> 赞同：0
> 
> 时间：2013-04-12T12:26:34.823
> 
> 标签：c++, arrays, c++11, struct, alignment

在结构/类的常见情况下，成员之间可能存在对齐填充。但我想知道假设这种特殊情况是否安全：

```
template<typename T, size_t N>
struct MyStruct {
    T data[N];
    T term;
    constexpr MyStruct();
}; 
```

将可靠地等同于：

```
template<typename T, size_t N>
struct MyStruct {
    T data[N+1];
    constexpr MyStruct();
}; 
```

问的原因是我真正想要的是能够在 constexpr 构造函数中显式初始化数组的最后一个成员（但我不关心其余的）。例如，使用顶部 MyStruct 我可以这样做：

```
template<typename T, size_t N>
constexpr MyStruct<T,N>::MyStruct() : data{}, term{0} {} 
```

但我希望结果与 term 真的是数组的最后一个元素一样。

这安全吗？如果没有，有没有办法使用 MyStruct 的第二种形式来实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:31:33.393

*假设*您的 data[N] 和您的术语变量之间没有差距绝对是不安全的。例如，您可以显式控制 Microsoft 编译器如何将变量对齐到 n 字节边界（其中 n 是 1、2、4、8 或 16），请参阅[http://msdn.microsoft.com/en-us/library/ xh3e3fd0(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xh3e3fd0(v=vs.80).aspx)。

# c# - 通过代码隐藏填充报表查看器

> ID：15971400
> 
> 赞同：1
> 
> 时间：2013-04-12T12:26:41.887
> 
> 标签：c#, asp.net, reportviewer

我正在使用reportviewer，`strongly dataset`但现在
我需要通过代码隐藏填充我的reportviewer。但是我收到了这个错误：
`A data source instance has not been supplied for the data source 'ds_blabla'.`
这是我提供数据集的代码：

```
public DataSet PreencheDS(Relatorios rel)
  {
     DataSet retorno = new DataSet();
     try
       {
         string sql = @"SELECT proj.descricao AS projeto, func.descricao AS funcionalidade, clb.clube AS cliente, ch.descricao
         FROM MyTable ch 
         INNER JOIN table1 proj ON MyTable.projeto = table1.id 
         INNER JOIN table2 func ON MyTable.funcionalidade = table2.id 
         INNER JOIN table3 clb ON MyTable.clube = table3 .id
         WHERE (MyTable.responsavel = @responsavel) AND (MyTable.clube = @clube) AND (MyTable.dt_cadastro >= @dt_inicial) AND (MyTable.dt_cadastro <= @dt_final)";                
                MySqlCommand cmd = new MySqlCommand();
                cmd.CommandText = sql;
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.Add(new MySqlParameter("@responsavel", MySqlDbType.VarChar)).Value = rel.Responsavel_ID;
                cmd.Parameters.Add(new MySqlParameter("@clube", MySqlDbType.VarChar)).Value = rel.Clube_ID;
                cmd.Parameters.Add(new MySqlParameter("@dt_inicial", MySqlDbType.DateTime)).Value = rel.Dt_Inicial;
                cmd.Parameters.Add(new MySqlParameter("@dt_final", MySqlDbType.DateTime)).Value = rel.Dt_Final;
                retorno = _dal.Consultar(cmd);
            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
            return retorno;
        } 
```

这是包含我的页面`ReportViewer`

```
protected void Page_Load(object sender, EventArgs e)
    {           
        if (!IsPostBack)
           {
              rel.Responsavel_ID = Convert.ToInt32(Session["usrValue"].ToString());
              rel.Clube_ID = Convert.ToInt32(Session["clube_id"].ToString());
              rel.Dt_Inicial = Session["dt_inicial"].ToString() + " 00:00:00";
              rel.Dt_Final = Session["dt_final"].ToString() + " 23:59:59";

              DataSet ds = _rel.PreencheDS(rel);
              ReportDataSource source = new ReportDataSource("MyTable", ds.Tables[0]);              
              this.ReportViewer1.ProcessingMode = ProcessingMode.Local;
              this.ReportViewer1.LocalReport.DataSources.Clear();
              this.ReportViewer1.LocalReport.DataSources.Add(source);
              this.ReportViewer1.LocalReport.Refresh();
            }
        } 
```

我想通过`codebehind`而不是使用来做到这一点，`strongly dataset`因为我需要传递`parameters`给我的报告查看器。但是这些`parameters`它们可能会有所不同......所以我想通过`codebehind`.

**更新**
我确实喜欢[这个](https://stackoverflow.com/a/15971652/1919644)。现在没有消息了，但什么也没有出现......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:39:20.880

在以下行中`MyTable`，应改为`ds_blabla`：

```
ReportDataSource source = new ReportDataSource("MyTable", ds.Tables[0]); 
```

# javascript - 在 html 中使用 javascript 打印交叉

> ID：15971403
> 
> 赞同：0
> 
> 时间：2013-04-12T12:27:02.740
> 
> 标签：javascript, html, button, textarea, logic

我的外部 javascript 上有这段代码

```
function cross()
{
    var output2 = document.getElementById('output2');
    var a = "*"
      , b = " "
      , i = 0
      , j = 0
      , k = 0
    ;
    for(i = 1, k = input; i <= input; i++, k--)
    {
        for(j = 1; j <= input; j++)
        {
            if (j == i || j == k)
            {
                output2.value += a;
            }
            else
            {
                output2.value += b;
            }
            output2.value += '\n';
        }
    }
} 
```

我的第一页上的这个 html 按钮 + 我第二页上的文本区域，所以`halaman.html`在我单击第一页上的按钮后，文本区域将显示在第二页 ( ) 中。

```
<!-- code page 1-->    
<a href="halaman.html"><input type="button" value="Muncul page baru" onclick="cross();"></a><br />
<!-- code page 2-->
<textarea id="output2" rows="20" cols="90"></textarea> 
```

十字架没有显示在第二页上。出了什么问题，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:32:01.193

JavaScript 无法在尚未创建的页面上设置元素的值。

您可以提交带有该值的表单，但您必须使用 GET 请求，因为如果没有服务器端语言的帮助，JavaScript 将无法访问 POST 数据。

其他选项是使用[localstorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)。把它放在第一页，在第二页读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:34:32.350

我认为这是不可能的。因为当您导航到第二页时，上一页没有可用的 javascript。
您需要将结果存储在服务器状态或通过查询字符串传递结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:37:14.163

javascript 仅适用于第一页。您可以通过 URL 发送一个 GET 变量并在第二页上检查该变量。

您也可以将 page2 放在 iframe 上。

# sql - SQL Server - SELECT DISTINCT 取决于另一个列值

> ID：15971405
> 
> 赞同：0
> 
> 时间：2013-04-12T12:27:13.323
> 
> 标签：sql, sql-server, distinct

我有一个这样的表，输入参数 RevParam 上有：

```
Key Rev IsCurrent
=====================
abc 0   TRUE
def 0   TRUE
ghj 2   FALSE
ghj 0   TRUE
klm 0   TRUE
def 1   FALSE
abc 1   FALSE
abc 2   FALSE 
```

我想`Key`成为一个独特的价值。如果`RevParam`设置了应该查看所有具有该 Rev 值的行，则缺少的`Key`应该有：修订 0。像这样：

```
Result if RevParam = 1      

abc 1   FALSE
def 1   FALSE
ghj 0   TRUE
klm 0   TRUE

Result if revisionParameter = 0     

abc 0   TRUE
def 0   TRUE
ghj 0   TRUE
klm 0   TRUE 
```

这个问题困扰了我一整天，请大家帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:31:34.447

```
WITH records
AS
(
    SELECT  [key], [rev], [IsCurrent],
            ROW_NUMBER() OVER(PARTITION BY [key]
            ORDER BY CASE WHEN [rev] = 1          -- <<== change REV value here
            THEN 0 ELSE 1 END) rn
    FROM    tableName
    WHERE   [Rev] IN (1,0)
)
SELECT  [key], [rev], [IsCurrent]
FROM    records 
WHERE   rn = 1 
```

*   [SQLFiddle 演示`1`](http://www.sqlfiddle.com/#!3/8b500/2)
*   [SQLFiddle 演示`0`](http://www.sqlfiddle.com/#!3/8b500/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:32:45.710

如果 RevParam = 1 的结果

abc 1 假 def 1 假 ghj 0 真 klm 0 真

rev 值为 0 和 1。请明确说明

# matlab - 不断训练MATLAB ANN，即在线训练？

> ID：15971424
> 
> 赞同：1
> 
> 时间：2013-04-12T12:27:51.093
> 
> 标签：matlab, neural-network

我想问问有什么选项可以连续训练 MATLAB ANN（人工神经网络），即没有预先准备好的训练集？这个想法是有一个“在线”数据流，因此，当第一次创建网络时，它完全未经训练，但随着 ANN 中的样本流被训练和收敛。

ANN 将用于对一组值进行分类，并且实施将可视化当样本流过系统时 ANN 的训练如何得到改进。即，每个样本都用于训练，然后还由 ANN 进行评估，并将响应可视化。

我期望的效果是，对于第一个样本，ANN 的响应或多或少是随机的，但随着训练的进行，准确性会提高。

任何想法都是最受欢迎的。

问候， 奥拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T12:36:54.383

在 MATLAB 中，您可以使用`adapt`函数而不是`train`. 您可以逐步执行此操作（每次获得一条新信息时更改权重），或者您可以在每个 N 个样本中执行此操作，批量样式。

[本文档](http://www.mathworks.com/help/nnet/ug/training-styles-adapt-and-train.html)从时间序列问题的角度深入介绍了不同的训练方式。

我真的会考虑您在这里尝试做什么，因为适应性学习策略可能很困难。我发现与他们的批量同行相比，他们喜欢到处乱砍。在我处理非常嘈杂的信号的情况下尤其如此。

你确定你需要适应性学习吗？你不能定期重新训练你的神经网络吗？或者构建一个足够好的泛化？

# android - 未执行 Android 测试

> ID：15971426
> 
> 赞同：4
> 
> 时间：2013-04-12T12:27:54.833
> 
> 标签：android, android-emulator, adb, android-testing, android-uiautomator

我创建了一个测试项目，其代码与此处显示的完全相同：

[http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

我已经在 android 虚拟设备中上传了 jar 文件，现在我可以运行测试了。但我总是在控制台上得到这个输出：

> INSTRUMENTATION_STATUS：流=
> 
> WatcherResultPrinter 的测试结果=
> 
> 时间：0.0
> 
> 好的（0 次测试）
> 
> INSTRUMENTATION_STATUS_CODE：-1

* * *

我还使用以下代码创建了一个简单的测试：

```
public void FailedTest() throws UiObjectNotFoundException {
    assertTrue("This test was executed", false);
} 
```

如果使用 ui 元素的代码有问题。

包名`Tests`和类名`Login`，所以我运行以下命令：

> adb shell uiautomator runtest TestProject.jar -c Tests.Login

**编辑**

当我在真实设备上运行它时，我得到：

> uiautomator：权限被拒绝

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:51:20.013

作为第一步，您能否更改测试方法的名称以匹配 jUnit 3 中使用的标准约定，即`public void testWhatever() { ... }`名称的前 4 个字母必须是小写的“test”，签名是 public void 并且方法不取任何参数。

同样，您能否将包名称更改为更标准的小写约定，例如 org.example.tests 如果您的文件名为 Tests.java（并且该类也称为 Tests），那么您应该能够按如下方式调用它：

`adb shell uiautomator runtest Tests.jar -c com.example.tests.Tests`

如果这些没有帮助，请您修改问题以包含您的 Tests.java 文件中的整个代码？

注意：我在旅行时没有尝试在这个阶段重现您的代码。如果我的建议不能解决您的问题，我可以这样做。

`uiautomator: permission denied`我会单独跟进。UI Automator 测试确实在真实设备上运行。他们不需要设备被植根。我在标准的 Android 4.2.x 设备上运行它们。

# c++ - 默认构造函数创建时间和多个定义

> ID：15971427
> 
> 赞同：1
> 
> 时间：2013-04-12T12:27:54.890
> 
> 标签：c++

据我所知，默认构造函数是在需要时创建的。实际上意味着编译器仅在需要调用它时才实际创建它。

假设我有两个文件，fc 和 gc，它们都有对象创建代码，需要默认构造函数。编译器如何防止创建多个默认构造函数..？它如何“知道”只创建一个？即使我在两个文件中使用它并且没有自己实现它。

我的教授。告诉我它与内联有关，并告诉我检查一下。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:35:08.703

你（*很可能是你的教授*）误解了。
在 C++ 中，您可以根据需要多次声明一个函数，但该函数只能有一个定义。这是单一***[定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)***的简单定义。即使您在两个单独的翻译单元中创建对象。编译器为创建对象而调用的构造函数只定义一次。

所以回答你的问题，
*它怎么知道只创建一个？*
它被编程为创建一个且唯一的定义，因为它需要遵守 C++ 标准定义的一个定义规则。

一个定义规则的例外是内联函数。如果所有定义完全相同，则允许内联函数具有多个定义。

# iphone - 从文本字段中获取货币值到 NSDecimalNumber 的正确方法

> ID：15971428
> 
> 赞同：0
> 
> 时间：2013-04-12T12:27:57.617
> 
> 标签：iphone, ios, objective-c

我正在尝试稍微优化我的代码，我正在查看这部分，我将输入价格保存到我的`Core Data`实体中，我只是觉得它是错误的/效率低下。

```
NSNumberFormatter *priceFormatter = [[NSNumberFormatter alloc] init];
[priceFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
myEntity.price = (NSDecimalNumber *)[priceFormatter numberFromString:self.priceField.text]; 
```

实际上，我认为我在这里所做的是创建一个`NSNumberFormatter`具有十进制样式的（显然价格需要，文本字段可能输入 2 而不是 2.00，因此在某种程度上是必要的）然后使用它`NSNumberFormatter`来放置值从文本字段到`NSDecimalNumber`通过演员表。我想在表单 2.00 中输入 2 的原因是为了避免我在加载实体并在应用程序中显示它时这样做。此外，文本字段调节文本字段，使其不能超过小数点后 2 位等，因此我们不必担心这一点。

这段代码有效吗？有没有更好的方法来做到这一点？这甚至有必要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:04:02.977

假设这是一个仅限美元的应用程序，您可以只使用“美分”作为您的货币。这消除了浮点数出现的大量问题。然后，您将有一个简单的转换函数或方法，所有软件都使用显示值 - 它将值除以 100 得到美元，然后得到美分，你从总数中减去美元*100，剩下的是美分，你可以轻松显示：

```
NSInteger total = ...;
NSInteger dollars = total/100;
NSUInteger cents = abs(total) - abs(dollars*100);
NSString stringWithFormat:@"%%d.%0u", dollars, cents); 
```

# c++ - std::set 如何比 std::map 慢？

> ID：15971429
> 
> 赞同：6
> 
> 时间：2013-04-12T12:27:59.313
> 
> 标签：c++, performance, visual-c++, map, set

我试图[从 acm.timus.ru 解决这个问题，](http://acm.timus.ru/problem.aspx?space=1&num=1590)它基本上希望我输出给定字符串的不同子字符串的数量（最大长度 5000）。

我即将提出的解决方案效率极低，并且由于限制因素而注定要做出超出时间限制的判决。但是，这两种解决方案的唯一区别（至少据我所见/理解）是一种使用`std::map<long long, bool>`，而另一种使用`std::set <long long>`（参见最后一个 for 循环的开头。其余部分相同，您可以检查通过任何差异工具）。地图解决方案导致“测试 3 超过时间限制”，而设置解决方案导致“测试 2 超过时间限制”，这意味着测试 2 使得地图解决方案在其上的工作速度比设置解决方案更快。如果我选择 Microsoft Visual Studio 2010 编译器，就会出现这种情况。如果我选择 GCC，那么这两种解决方案都会导致测试 3 中的 TLE。

我不是在问如何有效地解决问题。我要问的是如何解释 using`std::map`显然比 using 更有效`std::set`。我只是看不到这种现象的机制，希望有人能有任何见解。

代码 1（使用地图，TLE 3）：

```
#include <iostream>
#include <map>
#include <string>
#include <vector>

using namespace std;

int main ()
{
   string s;
   cin >> s;
   vector <long long> p;
   p.push_back(1);
   for (int i = 1; i < s.size(); i++)
      p.push_back(31 * p[i - 1]);
   vector <long long> hash_temp;
   hash_temp.push_back((s[0] - 'a' + 1) * p[0]);
   for (int i = 1; i < s.size(); i++)
      hash_temp.push_back((s[i] - 'a' + 1) * p[i] + hash_temp[i - 1]);   
   int n = s.size();   
   int answer = 0;
   for (int i = 1; i <= n; i++)
   {
      map <long long, bool> hash_ans;
      for (int j = 0; j < n - i + 1; j++)
      {
         if (j == 0)
            hash_ans[hash_temp[j + i - 1] * p[n - j - 1]] = true;
         else
            hash_ans[(hash_temp[j + i - 1] - hash_temp[j - 1]) * p[n - j - 1]] = true;
      }
      answer += hash_ans.size();
   }
   cout << answer;
} 
```

Code2（使用集合，TLE 2）：

```
#include <iostream>
#include <string>
#include <vector>
#include <set>

using namespace std;

int main ()
{
   string s;
   cin >> s;
   vector <long long> p;
   p.push_back(1);
   for (int i = 1; i < s.size(); i++)
      p.push_back(31 * p[i - 1]);
   vector <long long> hash_temp;
   hash_temp.push_back((s[0] - 'a' + 1) * p[0]);
   for (int i = 1; i < s.size(); i++)
      hash_temp.push_back((s[i] - 'a' + 1) * p[i] + hash_temp[i - 1]);   
   int n = s.size();   
   int answer = 0;
   for (int i = 1; i <= n; i++)
   {
      set <long long> hash_ans;
      for (int j = 0; j < n - i + 1; j++)
      {
         if (j == 0)
            hash_ans.insert(hash_temp[j + i - 1] * p[n - j - 1]);
         else
            hash_ans.insert((hash_temp[j + i - 1] - hash_temp[j - 1]) * p[n - j - 1]);
      }
      answer += hash_ans.size();
   }
   cout << answer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:46:27.827

我看到的实际差异（告诉我是否遗漏了什么）是在地图案例中你所做的

```
hash_ans[key] = true; 
```

而在设定的情况下，你做

```
hash_ans.insert(key); 
```

在这两种情况下，都会插入一个元素，除非它已经存在，否则它什么都不做。在这两种情况下，查找都需要找到相应的元素并在失败时将其插入。实际上，在每个实现中，容器都将使用树，这使得查找同样昂贵。更重要的是，C++ 标准实际上要求`set::insert()`and`map::operator[]()`的复杂度为 O(log n)，因此两种实现的复杂度应该是相同的。

现在，一个人表现更好的原因可能是什么？一个区别是，在一种情况下，底层树的节点包含 a `string`，而在另一种情况下，它是 a `pair<string const, bool>`。由于该pair包含一个字符串，它必须更大并且对机器的RAM接口施加更大的压力，所以这并不能解释加速。它可以做的是扩大节点大小，以便将其他节点推离缓存线，这可能不利于多核系统的性能。

总而言之，我会尝试一些事情：

1.  在集合中使用相同的数据
    我会这样做，`struct data: string {bool b};`即将字符串捆绑在一个结构中，该结构应该具有与地图元素类似的二进制布局。作为比较器，使用`less<string>`, 以便只有字符串实际参与比较。

2.  在地图上使用 insert()
    我不认为这应该是一个问题，但是插入可能会导致参数的副本，即使最后没有插入也是如此。我希望它不会，所以我不太相信这会改变任何事情。

3.  关闭调试
    大多数实现都有一个诊断模式，其中迭代器被验证。您可以使用它来捕获 C++ 只说“未定义行为”的错误，耸耸肩并在您身上崩溃。这种模式通常不满足复杂性保证，并且总是有一些开销。

4.  阅读代码
    如果 set 和 map 的实现具有不同的质量和优化级别，这可以解释差异。在引擎盖下，我希望地图和场景都建立在相同类型的树上，所以这里也不抱太大希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:32:14.613

我猜在这种情况下，集合只比地图快一点。不过我认为你不应该考虑那么多，因为 TLE 2 或 TLE 3 并不是什么大不了的事。如果您接近给定提交的测试 2 的相同解决方案时间限制以及下一次测试 3 的时间限制，则可能会发生这种情况。我有一些解决方案仅在时间限制内通过了测试，我敢打赌，如果我重新提交他们会失败。

我使用 Ukonen 后缀树解决了这个特殊问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:21:36.037

这取决于使用的实现算法。通常集合是使用仅使用键字段的映射来实现的。在这种情况下，使用集合而不是地图会产生非常小的开销。

# android - 解析开发/输入/事件触摸事件

> ID：15971435
> 
> 赞同：2
> 
> 时间：2013-04-12T12:28:11.603
> 
> 标签：android, c, parsing, input, touch

我能够从 Android 手机上的 dev/input/event* 读取事件。然而，它们是特定顺序的行代码，就像触摸事件给出的那样。

```
3 53 216

3 54 444

3 48 40

3 50 5

0 2 0

0 0 0 
```

如何将它们解析为有意义的事件，例如 x 和 y 坐标处的触摸？或长按等。然后我想将高级事件转换回类似的代码以将它们插入事件队列中。

有没有人有 C/C++ 中的解析器代码？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T13:12:26.240

您可以在 external\kernel-headers\original\linux\Input.h 中看到 android 内核源代码中定义的 struct input_event

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T01:59:18.730

我知道这个问题很老，但这是答案[http://blog.softteco.com/2011/03/android-writing-events-low-level-touch.html](http://blog.softteco.com/2011/03/android-writing-events-low-level-touch.html)

# java - Vaadin 双击和浏览器行为

> ID：15971437
> 
> 赞同：1
> 
> 时间：2013-04-12T12:28:18.107
> 
> 标签：java, google-chrome, firefox, vaadin

我正在开发一个带有**树组件**的 Vaadin 应用程序（版本 6.8.10） 。我们需要对项目的双击做出反应。但在我们的跨浏览器测试中，我们发现**双击在****Firefox**中并不总是有效（有时有效）。

这里我们的 eventListener 代码：

```
 @Override
  public void itemClick(ItemClickEvent event) {
  *  if (event.isDoubleClick()) {  // Breakpoint line
       // our action
    }
  } 
```

在 Eclipse 中调试我们收到以下值（在每个浏览器中双击 Vaadin 后收到 2 个事件）

**铬合金**

收到 1° 事件

> event.getButton() ==> 1
> 
> event.isDoubleClick() ==> 假
> 
> event.getButtonName() ==> 左

收到 2° 事件

> event.getButton() ==> 1
> 
> event.isDoubleClick() ==> **真**
> 
> event.getButtonName() ==> 左

**火狐**

收到 1° 事件

> event.getButton() ==> 1
> 
> event.isDoubleClick() ==> 假
> 
> event.getButtonName() ==> 左

收到 2° 事件

> event.getButton() ==> 1
> 
> event.isDoubleClick() ==> **假**
> 
> event.getButtonName() ==> 左

**恢复，在 Firefox 中，我的双击被检测为 2 次单击！！！！**

你是否经历过类似的事情？你有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T15:25:10.170

解决了！！

我们看到Vaadin 论坛上有一张旧的[Ticket (#8384)描述了这种行为。](http://dev.vaadin.com/ticket/8384)

建议的解决方案是在树对象上设置**setImmediate(false)**，但我们想让代码更干净，我们决定从代码中删除**~~setImmediate()~~**行。我们对此进行了测试`new Tree().isImmediate() == false`（默认情况下），因此它应该可以工作。

经过大量的测试、研究和调试......我决定在我们的代码中实际编写**setImmediate(false)**（这应该没有必要），**现在神奇的是，我们的代码在 Firefox 中运行良好！！！**

我希望这对某人有帮助。

# c# - 在没有开发人员 SDK 的情况下在 Silverlight 中记录/显示错误

> ID：15971444
> 
> 赞同：0
> 
> 时间：2013-04-12T12:28:47.810
> 
> 标签：c#, silverlight, logging

我创建了许多用于各种 MS 系统的 Silverlight 应用程序，从 CRM 2011 到 SharePoint。

应用程序并不完美，我会第一个承认这一点，有时会出错。我所有的应用程序都已经显示出了问题：

```
 private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
    {
        (...)
            UIDispatcher.Invoke(() => ARP.DynamicsCRM2011.Silverlight.GlobalHelper.Controls.MessageWindow.ShowMessage(e.ExceptionObject.Message));
        (...)
    } 
```

但是，最终用户几乎总是不会安装 Silverlight 开发人员 SDK，并且随后只会收到一般的*“调试资源字符串不可用”*消息。

该消息通常会包含一些非常基本的异常形式，但这并不理想。我也知道我从错误中丢失了正确的堆栈跟踪（这当然很容易修复）。

我正在考虑重写该异常处理代码以显示通用的“出现问题，请重试消息”，以及一个额外的“显示日志”按钮以显示所有异常信息以及堆栈跟踪。

然而，我的问题是......我应该如何处理那些丢失的资源字符串？如果出现问题，我希望获得尽可能多的信息，但我不能要求我的用户都安装开发者 SDK。

在这种情况下，最好的行动方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:22:51.213

我不知道这是否适合您，但您可以将这些信息记录在数据库或本地文件中，以便在出现错误时检索。但我不知道这是否是您可以考虑的（例如：应用程序适用于您的公司但不公开等）

# centos - 使用不同 LUN 号挂载的 ISCSI 目标

> ID：15971448
> 
> 赞同：2
> 
> 时间：2013-04-12T12:29:02.537
> 
> 标签：centos, target, iscsi, zfs, openindiana

在 centOS 主机上，我可以使用以下命令从 SAN 中发现 ISCSI 目标：

`iscsiadm -m discovery -t sendtargets -p IPOfMySan`

从上一个命令的结果列表中登录指定目标就可以了。

但是当我检查时：

`ls -l /dev/disk/by-path/`

这真是一团糟。

我的目标在线但多次出现不同的 LUN 编号，我的条目与发现的目标数量一样多。

> iqn.(..)-eb1ecece5792-lun-0 -> ../../sdb
> iqn.(..)-eb1ecece5792-lun-1 -> ../../sdc
> iqn.(..)-eb1ecece5792 -lun-2 -> ../../sdd
> iqn.(..)-eb1ecece5792-lun-3 -> ../../sde
> iqn.(..)-eb1ecece5792-lun-4 -> .. /../sdf
> iqn.(..)-eb1ecece5792-lun-5 -> ../../sdg
> iqn.(..)-eb1ecece5792-lun-6 -> ../../sdh
> iqn.( ..)-eb1ecece5792-lun-7 -> ../../sdi

我怎样才能避免这个问题？

我的描述够清楚吗？

任何帮助将不胜感激

# php - 如何在共享服务器上使用 wkhtmltopdf

> ID：15971451
> 
> 赞同：1
> 
> 时间：2013-04-12T12:29:05.537
> 
> 标签：php, linux, webserver, pdf-generation, wkhtmltopdf

我通过调用 exec 函数在我的本地主机（windows xp）上使用 wkhtmltopdf 安装（我什至从其他目录复制了安装）。一切正常。

如何在 linux 共享网络服务器上使用它？管理员声称，这是必要的编译，并且没有什么比复制和即时使用在 linux 上是不可能的。

我试过了

```
exec('./library/External/wkhtmltopdf-i386 --V'); 
```

但什么也没发生（任何错误，file_exists 为真）。确实，不能像我在 Windows 中使用它一样使用它吗？

[我从http://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)在本地主机上使用 wkhtmltopdf-0.9.9-installer.exe 。

在共享服务器（linux）上，我使用了来自同一来源的 wkhtmltopdf-i386（它不是 .exe 或 .dll ...它是 linux 版本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:52:24.667

是的，它是真实的。您不能（在大多数情况下）只是将二进制可执行文件复制到 linux 系统并期望它能够工作。它必须被编译。

您可以在这里尝试看看这是否有帮助：[How to install wkhtmltopdf on a linux based (shared hosting) web server](https://stackoverflow.com/questions/2273534/how-to-install-wkhtmltopdf-on-a-linux-based-web-server?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:11:09.157

我会将其添加为评论，但它有点太长了。

你的文件我认为应该没问题。尝试运行以下命令

```
shell_exec('./library/External/wkhtmltopdf-i386 --asdasdsadsad 2>> err1.txt 1>> out1.txt');
shell_exec('./library/External/wkhtmltopdf-i386 --version 2>> err2.txt 1>> out2.txt'); 
```

然后检查输出到文件中的内容`out1.txt, err1.txt, out2.txt, err2.txt`。这可能会给你一些线索。将`2>>`程序的 STDERR 输出转发到文本文件，`1>>`并将 STDOUT 转发到文本文件。其中之一应该包含一些有趣的东西。

可能导致问题的一件事是，如果文件在服务器中未标记为可执行文件 - linux 根据元数据属性识别可执行文件，但我不知道你将如何检查你的情况 - 通常我会运行控制台中的命令`ls -la`查看文件权限和信息。前面命令的输出可能包含线索。

# mysql - Mysql 统计表中的不同用户

> ID：15971452
> 
> 赞同：1
> 
> 时间：2013-04-12T12:29:06.610
> 
> 标签：mysql, sql

我需要按日期对日志表中的记录进行分组，并在特定日期对普通员工或特殊员工的访问次数进行分组。访问应该是不同的，例如，如果一种类型的用户登录了两次，那么当天应该只计算一次

```
Type
PK typeId
name

Employee
PK empId
firstName
lastName
FK typeId     

Log
PK logId
FK empId
date 
```

我试过下面的查询，但无济于事。当我用计数替换总和/大小写时，它可以工作，但是我无法指定要明确计数的用户类型

```
SELECT L.`date`
SUM(DISTINCT CASE WHEN E.typeId =1 THEN 1 ELSE 0 END) as specialEmployeeAccesses,
SUM(DISTINCT CASE WHEN E.typeId=2 THEN 1 ELSE 0 END) as regularEmployeeAccesses
FROM LOG L
INNER JOIN
Employee E
ON E.empId = L.empId
GROUP BY L.`date` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:36:11.653

尝试：

```
SELECT L.`date`,
       COUNT(DISTINCT CASE WHEN E.typeId=1 THEN E.empId END) 
            as specialEmployeeAccesses,
       COUNT(DISTINCT CASE WHEN E.typeId=2 THEN E.empId END) 
            as regularEmployeeAccesses
FROM LOG L
INNER JOIN Employee E
ON E.empId = L.empId
GROUP BY L.`date` 
```

# c++ - VS10 面部检测错误上的 C++

> ID：15971457
> 
> 赞同：0
> 
> 时间：2013-04-12T12:29:14.883
> 
> 标签：c++

我是 C++ 和 VS2010 的新手……我需要一些帮助！我下载了一个开源代码“visual-control”，它使用openCV进行一些面部检测......我正在尝试在Visual Studio 2010上运行该项目，我按照说明（包括库，包括......安装QT后） ,TBB,openCV,cMake ... ) 但我仍然收到以下错误

任何帮助表示赞赏！

```
 "'Moc'ing visualcontrol.h...
  1>  Moc'ing webcamwidget.h...
  1>ClCompile:
  1>  detailedfacedetector.cpp
  1>  facedetector.cpp
  1>  eigenfacerecognizer.cpp
  1>  trainerimage.cpp
  1>  logger.cpp
  1>  main.cpp
  1>  moc_visualcontrol.cpp
  1>  moc_webcamwidget.cpp
  1>  framecapture.cpp
  1>  detector.cpp
  1>  visualcontrol.cpp
  1>  webcamwidget.cpp
  1>  Generating Code...
  1>  qrc_visualcontrol.cpp
  1>logger.obj : warning LNK4217: locally defined symbol ??1QString@@QAE@XZ (public: __thiscall       QString::~QString(void)) imported in function "public: void __thiscall Logger::log      (class std::basic_string<char,struct std::char_traits<char>,class       std::allocator<char> > const &)" (?log@Logger@@QAEXABV?$basic_string@DU?$char_traits@D@std@@V?      $allocator@D@2@@std@@@Z)
  1>visualcontrol.obj : warning LNK4049: locally defined symbol ??1QString@@QAE@XZ (public:       __thiscall QString::~QString(void)) imported
  1>webcamwidget.obj : warning LNK4049: locally defined symbol
  ........... .. . . . . .. . .
  1>webcamwidget.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public:       class QString & __thiscall QString::setNum(float,char,int)" (__imp_?      setNum@QString@@QAEAAV1@MDH@Z) referenced in function "protected: virtual void __thiscall       gui::WebcamWidget::paintEvent(class QPaintEvent *)" (?      paintEvent@WebcamWidget@gui@@MAEXPAVQPaintEvent@@@Z)
  1>webcamwidget.obj : error LNK2019: unresolved external symbol "__declspec                  (dllimport)             public:       class QString & __this'" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:13:59.023

好的，我的问题解决了，问题出在 VS 中的 QT 插件上。谢谢anws伙计们:)

# regex - 替换大日志文件中的字符

> ID：15971458
> 
> 赞同：3
> 
> 时间：2013-04-12T12:29:16.677
> 
> 标签：regex, text, replace, large-files

如何在 Windows 下更改非常大的日志文件：

```
   3334-444-(4) 任何东西 任何东西2
   4444-444-(4) 任何东西 任何东西2
   4744-454-(4) 任何东西 任何东西2
   48444 44-(4) 任何东西 任何东西2
   8444-444-(4) 任何东西 任何东西2
   4464-(444)-2 任何东西 2

```

对此：

```
33344444 任何东西 任何东西2
44444444 任何东西2
47444544 任何东西2
48444444 任何东西 任何东西2
84444444 任何东西 任何东西2
44644442 任何东西 任何东西2

```

删除除数字之外的每行第 18 位的所有内容并保留第二列的位置？

**\\Edit：**问题是从位置 1 到 17 也可能是数字之间的空格。这是我认为可能有效的逻辑：
1\. 从 pos。1 到 17 将 '(', ')', '-' 替换为 ' ' [空格]
2\. 从 pos. 1 到 17 将 ' ' [space] 替换为 '' [nothing] 并计数更改
3\. 从 pos. 1 到 17 根据上一步的每次更改在数字后添加空格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:34:49.283

好吧，如果您安装[cygwin](http://www.cygwin.com/)，您可以使用命令行工具的强大功能

```
$ sed 's/[-)(]//g' input
33344444  anything   anything2
44444444  anything   anything2
47444544  anything   anything2
48444444  anything   anything2
84444444  anything   anything2
44644442  anything   anything2 
```

**更新**

有时将复杂的任务分成更小的部分更容易。

假设输入看起来像这样（添加标尺）

```
 1         2         3         4         5
12345678901234567890123456789012345678901234567890
   3334-444-(4)  anything   anything2
   4444-444-(4)  anything   anything2
   4744-454-(4)  anything   anything2
   48444 44-(4)  anything   anything2
   8444-444-(4)  anything   anything2
   4464-(444)-2  anything   anything2 
```

**第 1 步**是使用`cut`to well，剪掉前 17 个字符，删除不需要的字符并存储在 tmp-file 中。

**第 2 步**是将字符 18 剪切到行尾并存储在 tmp 文件中。

**第 3 步**是将 tmp 文件合并为一个文件。

像这样的东西：

```
$ cut -c1-17 input | sed 's/[-)( ]*//g' > c1

$ cut -c18- input > c2

$ paste c1 c2 
```

如果这不符合您的审美，您可以使用`awk`. 将以下行放入名为“col.awk”的文件中，或者如果您喜欢它，请选择一个更好的名称：

```
{
  x = substr($0, 0, 17)
  y = substr($0, 18, length($0))
  gsub(/[-)( ]*/, "", x)
}
{ printf "%-18s%s\n", x, y } 
```

然后这样称呼它：

```
$ awk -f col.awk input 
```

输出（再次使用标尺）：

```
 1         2         3         4         5
12345678901234567890123456789012345678901234567890
33344444         anything   anything2
44444444         anything   anything2
47444544         anything   anything2
48444444         anything   anything2
84444444         anything   anything2
44644442         anything   anything2 
```

请注意，cygwin 喜欢所有具有 unix 样式的行尾，因此您可能需要将输入从 windows 样式转换为 unix 样式。一种可能对您有所帮助的工具是`dos2unix`或`fromdos`（谷歌是您的朋友）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:08:43.333

真的，不确定，`Windows`可以做到这么简单。

但..

您可以安装`Perl`- 用于文本和字符串操作的良好语言。

或者找linux机器。

在这里你可以找到安装程序：[草莓](http://strawberryperl.com/)

安装后，只需在控制台中运行它 ( `cmd.exe`)

> perl -i.bak -ne 's/^\s// && s/[-()]//g && s/\s/\t/; 打印;' 输入.txt

这将保存您的备份文件 ( `input.txt.bak`) 并获得`input.txt`文件中的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:33:29.687

使用下面的正则表达式并替换为“”（空字符串）

```
[-\(\)] 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:32:32.320

你可以试试 Ultra Edit。它是一个允许您在列模式下选择的编辑器，因此您可以选择前 18 个字符并以这种方式进行替换。

唯一想到的另一件事是使用具有宏功能的编辑器来执行此操作。

或者编写一个快速而肮脏的程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:47:17.630

下载[记事本++](http://notepad-plus-plus.org/download/v6.3.2.html)。打开文档并按 CTRL+h 进行搜索和替换。

在“查找内容”框中使用此正则表达式：

```
^([0-9]+)\-?\(?([0-9]+)\)?\-?\(?([0-9]+)\)? 
```

这在“替换为”框中：

```
\1\2\3 
```

在搜索模式中选择“正则表达式”，然后全部替换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T14:17:25.740

使用 sed：

```
sed -E ':a;s/^([0-9]*)([( ]|-\(?|\)-?)([0-9]+)\)?/\1\3/;ta;s/[ \t]+/         /;' file 
```

# svn - 在 NetBeans 7.3 中禁用外部位置的 SVN 签出

> ID：15971465
> 
> 赞同：0
> 
> 时间：2013-04-12T12:29:47.463
> 
> 标签：svn, netbeans, netbeans-7, svn-externals, svn-checkout

所以这就是问题所在。当签出 SVN 存储库时，它会完成它，但随后会创建一个具有相同名称的新目录并签出其中的所有内容。这种递归结帐过程永远持续下去。我正在使用 NetBeans 并在输出窗口中显示：

```
Updating external location at: /Applications/MAMP/htdocs/projectx/projectx 
```

它应该在 ...htdocs/projectx 处停止。

所以我的问题是 - 如何在 NetBeans 中关闭外部位置的结帐？...或者理想情况下，为什么它递归地检查我的项目以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:41:26.903

好的 - 这是我采取的解决方案：

```
svn propget -R svn:externals /path/to/working/copy/projectx/projectx 
```

这显示了该目录中的所有 svn:externals 属性。找出哪个是坏的。在我的情况下，有罪的是根目录，它具有到不存在的子目录的外部链接。所以我删除了该属性：

```
svn propdel svn:externals /path/to/working/copy/projectx/projectx 
```

就是这样。

# perl - 我们如何告诉 WWW::Mechanize::Firefox 不要等待响应或回发？

> ID：15971468
> 
> 赞同：2
> 
> 时间：2013-04-12T12:29:53.183
> 
> 标签：perl, web-scraping, www-mechanize, mozrepl, www-mechanize-firefox

嗨，我正在使用循环到`get`各个页面。

编码：

```
while($stm->fetch()) {
    $mech->get(**#TheURL**);

            $mech->select( 'this', 'that' );
            $mech->tick( 'this' => undef );
            $mech->tick( 'this' => undef  );
            $mech->tick( 'this' => undef  );
            $mech->tick( 'this' => undef  );
            my $button = $mech->selector('input.button', single => 1);
            $mech->click($csvbutton);
} 
```

上面的代码在单击按钮后下载文件。但是它在第一次迭代后停止。

我已更改 Firefox 的配置以禁用下载管理器弹出窗口。

我曾经收到过这个错误：

```
MozRepl::RemoteObject::Object has no function addProgressListener at `$mech->get(**#TheURL**);` 
```

任何援助将不胜感激。谢谢。

**更新：**

我发现它在第一次下载时卡住了，因为 WWW::Mechanize::Firefox 正在等待它没有得到的响应或回发。刚刚下载了一个文件。

```
$mech->click($csvbutton); 
```

这是它停止的地方。如果我手动操作页面（即返回或转到主页或新 URL），它将继续循环。所以它正在等待新的页面加载。

我如何告诉 WWW::Mechanize::Firefox 不要等待响应或新页面加载？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:55:05.593

您是否尝试`synchronize`过点击选项：

```
$mech->click( $csvbutton, { synchronize => 0 } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:45:26.517

行的格式应该是完美的形式：

```
$mech->click({selector => ('input.button', single => 1), synchronize => 0}); 
```

您必须使用`selector =>`或`xpath =>`

**签名：**

```
$mech->click({xpath/selector => 'name' ,synchonize => 0}) 
```

然后单击将不会等待网络服务器的响应。

如所述：[cpan WWW::Mechanize::Firefox::Troubleshooting](http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.72/lib/WWW/Mechanize/Firefox/Troubleshooting.pod#Clicking_on_a_link_makes_the_Perl_script_wait_forever)

# mysql - 如何构建具有多个连接表的数据库

> ID：15971473
> 
> 赞同：7
> 
> 时间：2013-04-12T12:30:02.963
> 
> 标签：mysql, sql, database, database-design, jointable

这是我第一次尝试将更复杂的对象存储到数据库中。我需要一些关于数据库设计的帮助。

我要存储并从数据库中重新生成的**配方对象**

```
{
    "id": 2345,
    "name": "cake",
    "description": "yummy cake",
    "categorys": [
        17,
        26
    ],
    "persons": 4,
    "author": 26,
    "language": "de",
    "unit": "en",
    "variantOf": 34,
    "specialTools": [
        34,
        44,
        10
    ],
    "img": "32598734.jpg",
    "estTime": 2777,
    "steps": {
        "1": {
            "title": "mix",
            "description": "mix all together",
            "img": "45854.jpg",
            "timer": null,
            "ingredients": [
                {
                    "name": "Butter",
                    "color": "#227799",
                    "amount": 150,
                    "unit": "g"
                },
                {
                    "name": "egg",
                    "color": "#aaff22",
                    "amount": 3,
                    "unit": "pc"
                },
                {
                    "name": "sugar",
                    "color": "#22ffff",
                    "amount": 50,
                    "unit": "g"
                }
            ]
        },
        "2": {
            "title": "bake",
            "description": "put it in the oven",
            "img": null,
            "timer": 2400,
            "ingredients": [
                {
                    "name": "butter",
                    "color": "#227799",
                    "amount": null,
                    "unit": null
                },
                {
                    "name": "sugar",
                    "color": "#22ffff",
                    "amount": null,
                    "unit": null
                },
                {
                    "name": "egg",
                    "color": "#aaff22",
                    "amount": null,
                    "unit": null
                }
            ]
        }
    }
} 
```

最复杂的部分是`steps`对象。每个配方可以有不同数量的步骤，每个步骤分配不同的成分。

这是我做 的一个**数据库设计**![数据库方案](https://i.stack.imgur.com/dSnpA.png)

`recipe_id, step_id`是外键。我想要不同表格中的所有内容，因为食谱应该可以按成分、类别...

**用于生成最重要表的**SQL 代码****

 **```
-------------------------------------------------- -----

-- 表`dev_Recipe`.`recipe`

-------------------------------------------------- -----

如果不存在 `dev_Recipe`.`recipe`，则创建表（

  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,

  `name` VARCHAR(255) NULL ,

  `描述` TEXT NULL ,

  `author_id` INT UNSIGNED NOT NULL ,

  主键 (`id`) ,

  索引 `author_id_idx` (`author_id` ASC) ,

  约束`author_id`

    外键（`author_id`）

    参考 `dev_Recipe`.`users` (`id`)

    删除无操作

    更新无动作）

引擎 = InnoDB；

-------------------------------------------------- -----

-- 表`dev_Recipe`.`step`

-------------------------------------------------- -----

如果不存在 `dev_Recipe`.`step`，则创建表（

  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,

  `recipe_id` INT UNSIGNED NOT NULL ,

  `step_number` INT UNSIGNED NOT NULL ,

  `描述` TEXT NULL ,

  `timer` INT UNSIGNED NULL ,

  `image` VARCHAR(100) NULL ,

  主键 (`id`) ,

  索引 `recipe_id_idx` (`recipe_id` ASC) ,

  约束`step_recipe_id`

    外键（`recipe_id`）

    参考 `dev_Recipe`.`recipe` (`id`)

    删除无操作

    更新无动作）

引擎 = InnoDB；

-------------------------------------------------- -----

-- 表`dev_Recipe`.`ingredient`

-------------------------------------------------- -----

如果不存在 `dev_Recipe`.`ingredient`，则创建表（

  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,

  `name` VARCHAR(45) NOT NULL ,

  `颜色` INT NOT NULL ,

  `img` VARCHAR(45) NULL ,

  主键 (`id`) )

引擎 = InnoDB；

-------------------------------------------------- -----

-- 表`dev_Recipe`.`step_ingredients`

-------------------------------------------------- -----

如果不存在 `dev_Recipe`.`step_ingredients`，则创建表（

  `recipe_id` INT UNSIGNED NOT NULL ,

  `ingredient_id` INT UNSIGNED NOT NULL ,

  `step_id` INT UNSIGNED NOT NULL ,

  `数量` INT NULL ,

  `unit` VARCHAR(25) NULL ,

  索引 `recipe_id_idx` (`recipe_id` ASC) ,

  索引`ingredient_id_idx` (`ingredient_id` ASC) ,

  索引 `step_id_idx` (`step_id` ASC) ,

  主键（`recipe_id`，`step_id`），

  约束`step_ing_recipe_id`

    外键（`recipe_id`）

    参考 `dev_Recipe`.`recipe` (`id`)

    删除无操作

    更新无动作，

  约束`ingredient_step_ing_id`

    外键（`ingredient_id`）

    参考 `dev_Recipe`.`ingredient` (`id`)

    删除无操作

    更新无动作，

  约束`step_ing_id`

    外键（`step_id`）

    参考 `dev_Recipe`.`step` (`id`)

    删除无操作

    更新无动作）

引擎 = InnoDB；
```

由于我以前从未做过连接表，我不知道这是否是解决我的问题的正确方法。这是一个合理的设计以及如何优化它？

我做了另一个设计，在哪里`recipes`加入`step`和`step`。`ingredients`我认为第一个布局更容易查询，因为我只能通过`ingredients_id` `recipe_id`查看来搜索`step_ingredients`，但我不确定。有什么想法吗？

![数据库设计2](https://i.stack.imgur.com/9ZXIW.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:58:54.953

关系数据库设计的主要内容是有 3 种类型的 FK 关系：

*   1比1
*   1对多
*   多对多

话虽如此，您的架构一目了然，看起来规范化且合乎逻辑。我要注意的唯一一点是，对于具有自引用的类别，在 SQL 中递归可能会很棘手。

几点注意事项：

步骤成分需要已经具有 recipe_id 的步骤（可能为 null）

没有步骤可以存在步骤成分吗

没有配方也可以存在步骤

用户到配方是一对一的（正如丹所说）

编辑：对于从配方到成分的双连接而不是单连接的关注，这是我对原始设计的一个规范化问题：是什么让 step_ingredient 和 step recipe_id 保持相同？目前，无法保证一致性。如果您考虑数据设计，您实际上是在说您认为您会经常加入这两个表，所以为什么不将它们与不必要的 FK 连接起来（不要这样做，否则事情会很快变得混乱:)）

您的第二个设计实际上也允许相同数量的连接，因为您已将 recipe_id 作为 PK 包含在 step 表中，然后它将成为 step_ingredient 中的 PK/FK，它将保证 recipe_id 的一致性。前任：

```
SELECT ingredient_id
FROM Recipe r
JOIN Step_ingredient si on si.step_recipe_id = r.recipe_id
JOIN Ingredient i on si.ingredient_id = i.ingredient_id 
```

以及我最喜欢的数据库规范化入门链接：[http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:56:42.567

乍一看，它看起来非常好。但是，我不确定为什么类别和成分类别表需要父 ID。

此外，您还需要用户和食谱之间的多对多关系。您目前拥有一对一的样子。**

# matlab - 绘制分组箱线图matlab的最有效方法

> ID：15971478
> 
> 赞同：9
> 
> 时间：2013-04-12T12:30:21.730
> 
> 标签：matlab

我有 3 个向量`Y=rand(1000,1)`：`X=Y-rand(1000,1)`和`ACTid=randi(6,1000,1)`。我想按 Y 和 X 组创建箱线图，对应于它们的组值 1:6（来自 ACTid）。

这是相当临时的，看起来很讨厌

```
for ii=
dummyY(ii)={Y(ACTid==ii)};
dummyX(ii)={X(ACTid==ii)}
end 
```

现在我有一个单元格中的数据，但不知道如何将它分组到箱线图中。有什么想法吗？

我找到了看起来像这样的`aboxplot` [函数](http://alex.bikfalvi.com/research/advanced_matlab_boxplot/)，但我不想要那个，我想要内置的 boxplot 函数，因为我正在将它转换为 matlab2tikz 而这个做得不好。

![在此处输入图像描述](https://i.stack.imgur.com/AnEV9.png)

**编辑**

感谢奥列格：我们现在有一个分组箱线图……但标签都是歪斜的。

```
xylabel = repmat({'Bleh','Blah'},1000,1); % need a legend instead, but doesn't appear possible
boxplot([Y(:,end); cfu], {repmat(ACTid,2,1), xylabel(:)} ,'factorgap',10,'color','rk')
set(gca,'xtick',1.5:3.2:50)
set(gca,'xticklabel',{'Direct care','Housekeeping','Mealtimes','Medication','Miscellaneous','Personal care'})
>> ylabel('Raw CFU counts (Y)') 
```

![在此处输入图像描述](https://i.stack.imgur.com/xZKGE.png)

如何添加图例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-01T07:44:50.043

我在箱形图中对数据进行分组时遇到了同样的问题。我的另一个限制是不同的组有不同数量的数据点。根据我找到的教程，这似乎是我想与您分享的一个不错的解决方案：

```
x = [1,2,3,4,5,1,2,3,4,6];
group = [1,1,2,2,2,3,3,3,4,4];
positions = [1 1.25 2 2.25];
boxplot(x,group, 'positions', positions);

set(gca,'xtick',[mean(positions(1:2)) mean(positions(3:4)) ])
set(gca,'xticklabel',{'Direct care','Housekeeping'})

color = ['c', 'y', 'c', 'y'];
h = findobj(gca,'Tag','Box');
for j=1:length(h)
   patch(get(h(j),'XData'),get(h(j),'YData'),color(j),'FaceAlpha',.5);
end

c = get(gca, 'Children');

hleg1 = legend(c(1:2), 'Feature1', 'Feature2' ); 
```

![具有不同组大小的彩色分组箱线图](https://i.stack.imgur.com/HBVUj.png)

[这](http://www.ics.uci.edu/~vpalepu/2013/03/03/Plotting-Box-plots-in-Groups-for-Vectors-of-Varying-Lengths.html)是教程的链接。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T14:32:43.517

两行方法（尽管如果您想保留两行 xlables 并将其居中在第一行，这将是 hackish）：

```
Y     = rand(1000,1);
X     = Y-rand(1000,1);
ACTid = randi(6,1000,1);

xylabel = repmat('xy',1000,1);
boxplot([X; Y], {repmat(ACTid,2,1), xylabel(:)} ,'factorgap',10) 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/75zzZ.png)

**编辑**

将标签居中...

```
% Retrieve handles to text labels
h = allchild(findall(gca,'type','hggroup'));

% Delete x, y labels
throw = findobj(h,'string','x','-or','string','y');
h     = setdiff(h,throw);
delete(throw);

% Center labels
mylbl  = {'this','is','a','pain','in...','guess!'};
hlbl   = findall(h,'type','text');
pos    = cell2mat(get(hlbl,'pos'));

% New centered position for first intra-group label
newPos = num2cell([mean(reshape(pos(:,1),2,[]))' pos(1:2:end,2:end)],2);
set(hlbl(1:2:end),{'pos'},newPos,{'string'},mylbl')

% delete second intra-group label
delete(hlbl(2:2:end)) 
```

导出为 .png 会导致问题...

# java - JFace ColumnWeigthData 导致父级增长

> ID：15971480
> 
> 赞同：4
> 
> 时间：2013-04-12T12:30:35.763
> 
> 标签：java, swt, eclipse-rcp, jface, tableviewer

我有一个 Eclipse RCP 应用程序，想在as中`TableViewer`使用动态列大小。问题是每当我布局表格时，父表单（在示例代码中）都会增长几个像素。`ColumnWeigthData``ColumnLayoutData``ScrolledForm`

要重现，您可以运行该示例并打开/关闭该部分几次。每次关闭时，该部分都会变宽。

为什么它会这样做，我怎样才能让它停止？

```
package com.test;

import org.eclipse.jface.layout.TableColumnLayout;
import org.eclipse.jface.viewers.ColumnWeightData;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.ui.forms.widgets.FormToolkit;
import org.eclipse.ui.forms.widgets.ScrolledForm;
import org.eclipse.ui.forms.widgets.Section;

public class TestShell extends Shell {
    private final FormToolkit formToolkit = new FormToolkit(Display.getDefault());
    private final Table table;

    public static void main(final String args[]) {
        try {
            final Display display = Display.getDefault();
            final TestShell shell = new TestShell(display);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch()) {
                    display.sleep();
                }
            }
        } catch (final Exception e) {
            e.printStackTrace();
        }
    }

    public TestShell(final Display display) {
        super(display, SWT.SHELL_TRIM);
        setLayout(new FillLayout(SWT.HORIZONTAL));

        final ScrolledForm scrldfrmNewScrolledform = formToolkit.createScrolledForm(this);
        formToolkit.paintBordersFor(scrldfrmNewScrolledform);
        scrldfrmNewScrolledform.setText("New ScrolledForm");
        scrldfrmNewScrolledform.getBody().setLayout(new GridLayout(1, false));

        final Section sctnSection =
                formToolkit.createSection(scrldfrmNewScrolledform.getBody(), Section.TWISTIE | Section.TITLE_BAR);
        sctnSection.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
        formToolkit.paintBordersFor(sctnSection);
        sctnSection.setText("Section");
        sctnSection.setExpanded(true);

        final Composite composite = new Composite(sctnSection, SWT.NONE);
        formToolkit.adapt(composite);
        formToolkit.paintBordersFor(composite);
        sctnSection.setClient(composite);
        final TableColumnLayout tcl_composite = new TableColumnLayout();
        composite.setLayout(tcl_composite);

        final TableViewer tableViewer = new TableViewer(composite, SWT.BORDER | SWT.FULL_SELECTION);
        table = tableViewer.getTable();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        formToolkit.paintBordersFor(table);

        final TableViewerColumn tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
        final TableColumn tblclmnColumn = tableViewerColumn.getColumn();
        tcl_composite.setColumnData(tblclmnColumn, new ColumnWeightData(150, 100));
        tblclmnColumn.setText("Column");
        createContents();
    }

    protected void createContents() {
        setText("SWT Application");
        setSize(450, 300);

    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T20:58:09.517

这是一个关于布局的错误，`ColumnWeightData`这里显示了一个解决方法：[bugs.eclipse.org/bugs/show_bug.cgi?id=215997#c4](http://bugs.eclipse.org/bugs/show_bug.cgi?id=215997#c4)

诀窍是设置`weigthHint=1`为持有`GridData`的。`Composite``TableViewer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T14:45:54.047

如果您使用上下布局（父尺寸定义明确），那么您可以覆盖 TableColumnLayout 以始终​​尊重父尺寸：

```
/** Forces table never to take more space than parent has*/
public class TableColumnLayout extends org.eclipse.jface.layout.TableColumnLayout {

    @Override
    protected Point computeSize(Composite composite, int wHint, int hHint, boolean flushCache) {
        return new Point(wHint, hHint);
    }
} 
```

# parameters - 在 OSClass 中获取参数

> ID：15971481
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:30:40.990
> 
> 标签：parameters, osclass

在 OSClass 中，我需要从 to 获取`item-post.php`参数`ItemActions.php`。我知道两种方式，一种是like，`$aItem['catId']`另一种是`Params::getParam('catId')`。

但第二个不适用于**文件**类型。还有什么办法可以得到`file type`吗？

因为，我使用以下代码，

```
$this->uploadItemResources( $aItem['photos'] , $itemId );

$this->uploadItemResources( $aItem['layout'] , $itemId ); 
```

此处照片已正确插入。但我没有得到布局价值。在 item-post.php 我的代码是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:04:59.590

这应该有效：

```
$someFiles = Params::getFiles('param_name'); 
```

在你的情况下

```
$someFiles = Params::getFiles('photos');

$otherFiles = Params::getFiles('layout'); 
```

# javascript - Jquery MultiZoom 插件在页面加载时未加载

> ID：15971494
> 
> 赞同：0
> 
> 时间：2013-04-12T12:31:13.313
> 
> 标签：javascript, jquery, jquery-plugins

我对 jQuery multizoom 插件有疑问。`document.ready()`并且`window.load()`不会在主要功能上启动它。在页面加载

*   div (#slide_body) 从左向右滑出。
*   然后在这个 div(#slide_body) 中，我在图片上调用 jQuery 插件 Multizoom。
*   由于 slide_body jQuery multizoom 没有加载。我已经尝试过`document.read()`，或者`window.load()`插件无法启动。
*   如果我调整网页大小（Ctrl + 鼠标滚轮）然后它开始工作，因为它重新定位页面元素。
*   或者，如果我单击拇指图像，它就会开始工作。但是第一个图像永远不会在页面加载上起作用。

请指导如何在页面加载时首次加载。除了 Document.ready() 或 window.load() 之外的任何其他事件

谢谢

```
<script>
function slid_body(){
    document.getElementById('slid_body').style.left = "0px";
    //document.getElementById('slid_body').style.width = "804px";
}
function slideIn() {
    //document.getElementById('slid_body').style.left = "0px";

    document.getElementById('slid_body').style.left = "-804px";
}
</script>
<body onload="javascript:slid_body()">   
 <div id="slid_body_out">
            <div id="slid_body">
                <div id="heading">
                    <ul id="breadcrumbs">
                        <li>Collection</li>
                        <li>
                            Casual</li>
                      </ul>
                <div id="left">
                    <div id="prodetail">
                        <div id="pro_dtl_left">
                            <div id="pro_dtl_leftimg">

                                <div class='targetarea'><img id='multizoom1' src='images/ProductImages/Medium/634981200372366040_XGN_6539.JPG' alt='zoomable'L32840'></img></div>
                            </div>
                            <div id="pro_dtl_right_moreviews">
                                <p>
                                    Scroll on above image to view enlarged picture<br />
                                    Use Mouse Scroll to Zoom in/out.
                                </p>
                                <li>More Views</li>
                                <br />
                                <span id="ctl00_ContentPlaceHolder1_litThumbs" style="display:inline-block;width:300px;"><ul><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634981200372366040_XGN_6539.JPG'  data-large='images/ProductImages/Original/634981200372366040_XGN_6539.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634981200372366040_XGN_6539.JPG' alt='L32840' /></a></li><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634982980662846576_XGN_6537.JPG'  data-large='images/ProductImages/Original/634982980662846576_XGN_6537.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634982980662846576_XGN_6537.JPG' alt='L32840' /></a></li><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634982981340675266_XGN_6540.JPG'  data-large='images/ProductImages/Original/634982981340675266_XGN_6540.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634982981340675266_XGN_6540.JPG' alt='L32840' /></a></li><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634982981855793870_XGN_6538.JPG'  data-large='images/ProductImages/Original/634982981855793870_XGN_6538.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634982981855793870_XGN_6538.JPG' alt='L32840' /></a></li></ul></span>
                            </div>
                        </div>

            </div>
        </div>
        <script type="text/javascript">
            jQuery(document).ready(function ($) {

                $('#multizoom1').addimagezoom({
                    descArea: '#description',
                    speed: 1000,
                    descpos: true,
                    imagevertcenter: true,
                    magvertcenter: true,
                    zoomrange: [3, 10],
                    magnifiersize: [500, 450],
                    magnifierpos: right,
                    cursorshadecolor: '#5C2E91',
                    cursorshade: true
                });

            })

        </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:07:02.597

也许是`body onload="javascript:slid_body()"`与`$(document).ready`jQuery 函数发生冲突的人。

试试这个，把脚本放在一个地方：

```
<body>   
 <div id="slid_body_out">
            <div id="slid_body">
                <div id="heading">
                    <ul id="breadcrumbs">
                        <li>Collection</li>
                        <li>
                            Casual</li>
                      </ul>
                <div id="left">
                    <div id="prodetail">
                        <div id="pro_dtl_left">
                            <div id="pro_dtl_leftimg">

                                <div class='targetarea'><img id='multizoom1' src='images/ProductImages/Medium/634981200372366040_XGN_6539.JPG' alt='zoomable'L32840'></img></div>
                            </div>
                            <div id="pro_dtl_right_moreviews">
                                <p>
                                    Scroll on above image to view enlarged picture<br />
                                    Use Mouse Scroll to Zoom in/out.
                                </p>
                                <li>More Views</li>
                                <br />
                                <span id="ctl00_ContentPlaceHolder1_litThumbs" style="display:inline-block;width:300px;"><ul><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634981200372366040_XGN_6539.JPG'  data-large='images/ProductImages/Original/634981200372366040_XGN_6539.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634981200372366040_XGN_6539.JPG' alt='L32840' /></a></li><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634982980662846576_XGN_6537.JPG'  data-large='images/ProductImages/Original/634982980662846576_XGN_6537.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634982980662846576_XGN_6537.JPG' alt='L32840' /></a></li><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634982981340675266_XGN_6540.JPG'  data-large='images/ProductImages/Original/634982981340675266_XGN_6540.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634982981340675266_XGN_6540.JPG' alt='L32840' /></a></li><li class='multizoom1 thumbs'><a href='images/ProductImages/Medium/634982981855793870_XGN_6538.JPG'  data-large='images/ProductImages/Original/634982981855793870_XGN_6538.JPG' data-title='L32840'><img src='images/ProductImages/thumb/634982981855793870_XGN_6538.JPG' alt='L32840' /></a></li></ul></span>
                            </div>
                        </div>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function() {

                $('#multizoom1').addimagezoom({
                    descArea: '#description',
                    speed: 1000,
                    descpos: true,
                    imagevertcenter: true,
                    magvertcenter: true,
                    zoomrange: [3, 10],
                    magnifiersize: [500, 450],
                    magnifierpos: right,
                    cursorshadecolor: '#5C2E91',
                    cursorshade: true
                });

                function slid_body(){
                     document.getElementById('slid_body').style.left = "0px";
                }
                function slideIn() {    
                     document.getElementById('slid_body').style.left = "-804px";
                }

                slid_body();
            })

        </script>
</body> 
```

# java - apache commons 配置：为根元素设置 xml 命名空间

> ID：15971497
> 
> 赞同：3
> 
> 时间：2013-04-12T12:31:26.707
> 
> 标签：java, apache-commons-config

保存配置文件时，我需要为根元素指定 xmlns（默认情况下`<configuration>`）。原因是，我稍后在加载配置文件时验证（使用模式）。

我似乎无法找到 commons-configuration 如何公开此功能。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:19:52.950

有一个[`setRootNode(ConfigurationNode rootNode)`](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration/HierarchicalConfiguration.html#setRootNode%28org.apache.commons.configuration.tree.ConfigurationNode%29)可能有效。您可以在[`ConfigurationNode`](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration/tree/ConfigurationNode.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T13:22:02.850

@maba 的建议有效。它不漂亮，但似乎没有更优雅的方式来做到这一点。这是代码：

```
private void setNameSpace(XMLConfiguration conf) {
    HierarchicalConfiguration.Node root = new HierarchicalConfiguration.Node(
            "configuration");
    root.addAttribute(new HierarchicalConfiguration.Node("xmlns",
            "http://namespace.com"));
    conf.setRootNode(root);
} 
```

相关进口是：

```
import org.apache.commons.configuration.ConfigurationException;
import org.apache.commons.configuration.HierarchicalConfiguration;
import org.apache.commons.configuration.XMLConfiguration; 
```

# .htaccess - .htaccess - 动态重定向虚拟文件夹到文件

> ID：15971498
> 
> 赞同：2
> 
> 时间：2013-04-12T12:31:30.247
> 
> 标签：.htaccess, redirect

我有以下代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [S=44]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [S=44]
RewriteRule ^(.*)$ index.php?id=$1 
```

它重定向`site.com/folder to site.com/index.php?id=folder`

我希望它重定向`site.com/folder/?lol=some to site.com/index.php?id=folder&lol=some`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:45:15.667

使用 QSA 标志。将您的最后一个 RewriteRule 更改为：

```
RewriteRule ^(.*)$ index.php?id=$1 [L,QSA] 
```

# c++ - 搜索数组并打印出来

> ID：15971502
> 
> 赞同：0
> 
> 时间：2013-04-12T12:31:34.880
> 
> 标签：c++, arrays, for-loop, multidimensional-array, nested-loops

我有一个二维数组。里面有一个字符`U`。我的代码搜索字符，然后输出数组，但只显示`U`它周围的每个字符。我的代码在某个地方出错了，并且`U`输出的似乎与它应该在的位置相反。

原始数组是`gameboard[]`，可以很好地读取。我们也不能使用向量、指针，就像我已经使用过的一样

```
int boardSizeRow;
    int boardSizeCol;
    inputFile.open("C:\\Users\\Michael\\Desktop\\fileboard1.txt");
    inputFile >> boardSizeRow;
    inputFile >> boardSizeCol;
    inputFile.get();
    char gameBoard[21][21];
    for (int row = 0; row <= boardSizeRow; row++)
    {
        for (int col = 0; col <= boardSizeCol; col++)
        {
            gameBoard[row][col] = inputFile.get();
        }
        //inputFile.get();
    }
    for (int row = 0; row <= boardSizeRow; row++)
    {
        for (int col = 0; col <= boardSizeCol; col++)
        {
            cout << gameBoard[row][col];
        }
        //cout << endl;
    }
bool toPrint[21][21] = {false}; 
for (int i = 0; i < boardSizeRow; i++ )
{
    for (int j = 0; j < boardSizeCol; j++)
    {
        if (gameBoard[i][j] == 'U')
       {
           toPrint[i][j] = true; 
           toPrint[i][j-1] = true; //West
           toPrint[i][j+1] = true; //East
           toPrint[i-1][j] = true;  //North
           toPrint[i+1][j] = true; //South  

       }
   }
}
for (int i = 0; i < boardSizeRow; i++ )
{
    for (int j = 0; j < boardSizeCol; j++)
    {
       if (toPrint[i][j] == true)
       {            
           cout << gameBoard[i][j];
       }
       else
       {
           cout << "0";
       }
    }
    cout<<endl;
 } 
```

原始数组：

```
WWWWWWWWWW
W WW GO  W
W WW WWW W
W   W   GW
WPWG  WW W
WWWDWK  WW
W  GW W  W
W WW  KWAW
W   SW  UW
WWWWWWWWWW 
```

** 想要的输出：

```
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
00000000A0
00000000UW
00000000W0 
```

这是我得到的随机输出示例：http: [//tinypic.com/r/2ujo8/6](http://tinypic.com/r/2ujo8/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:41:31.213

尝试这样的事情

```
for (int i = 0; i < boardSizeRow; i++ )
{
    for (int j = 0; j < boardSizeCol; j++)
    {
        if (gameBoard[i][j] == 'U')
       {

           toPrint[i][j] = true; 
           if(j!=0)
            toPrint[i][j-1] = true; //West
           if(j!=(boardSizeCol-1))
            toPrint[i][j+1] = true; //East
           if(i!=0)
           toPrint[i-1][j] = true;  //North
           if(i!=(boardSizeRow -1))
           toPrint[i+1][j] = true; //South  

       }
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T12:57:17.117

考虑过切换打印行和列吗？

```
for (int j = 0; j < boardSizeCol; j++)
{
    for (int i = 0; i < boardSizeRow; i++ )
    {
       if (toPrint[i][j] == true)
       {            
           cout << gameBoard[i][j];
       }
       else
       {
           cout << "0";
       }
    }
    cout<<endl;
 } 
```

# git - git log 不包括 100+ 次提交

> ID：15971509
> 
> 赞同：0
> 
> 时间：2013-04-12T12:31:57.190
> 
> 标签：git

我有一个 100 多个提交 ID 的列表。我想要`git log`我的整个回购，但我需要排除这些提到的提交。

我知道，有，`git log --grep=something`但我无法想象这个命令在有 100 多个元素时会是什么样子。有没有更简单的方法来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:43:36.393

`grep`有适合您的选择。从 grep 的手册页：

> `-f FILE, --file=FILE`
> 从 FILE 中获取模式，每行一个。空文件包含零个模式，因此不匹配任何内容。（-f 由 POSIX 指定。）
> 
> `-v, --invert-match`
> 反转匹配的感觉，选择不匹配的行。（-v 由 POSIX 指定。）

所以你可以简单地做：

```
git log --pretty=oneline | grep -v -f list_to_exclude 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:08:54.097

假设您有日志格式格式：

```
--pretty="%H [%ad] - %s" 
```

以及文件 exclude.lst 中的提交列表，每个提交都在新行上；
然后要排除这些提交，请使用：

```
# generate the sed program to exclude
while read c; do
    echo "/^$c /D"
done > /tmp/exclude.sed < exclude.lst

# filter out
git log --pretty="%H [%ad] - %s" | sed -f /tmp/exclude.sed 
```

# javascript - 将脚本添加到 DOM 对象

> ID：15971513
> 
> 赞同：1
> 
> 时间：2013-04-12T12:32:05.677
> 
> 标签：javascript, html, dom

我想在加载/渲染后立即添加一个适用于某种类型的 DOM 对象的脚本。这种类型的对象总是与 javascript 脚本一起出现，我想将它们放在某个标记中。这样做是否正确？如果是这样，我怀疑`span`不是在这里使用的最佳标签，因为它可能与内部元素的显示方式交互。我应该使用什么标签？

```
<span>
  <div>the dom object to be modified by the script</div>
  <script>theJavascriptFunctionThatModifiesTheDomObject()</script>
</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:42:09.493

由于以下原因，我怀疑这是在 DOM 加载特定元素之后加载脚本的最佳方式：-

*   它使您的页面加载速度变慢。
*   用户将以离散的方式看到您的完整页面。

相反，您应该这样做：-

*   为您的元素指定一个选择器。
*   在正文末尾包含您的单个 javascript 代码。
*   使用该脚本更新 DOM 元素。

编辑：解决方案1：将您的 JS 附加到正文的末尾，以便它可以访问所有 DOM 元素。由于您使用 ajax 在 DOM 中注入元素，因此您可以为 XHR 对象定义一个成功处理程序，它将修改您在 DOM 中的元素。

解决方案2：您可以在您的 JS 中定义一个单独的方法，并将该方法绑定到某个事件上。在您的 HTML 标记中定义一个数据事件属性，并在您的成功处理程序中将元素附加到 DOM，使用 jquery 数据方法提取数据事件并触发该事件。

至少它会让你的标记远离脚本逻辑。

一些有用的链接：

[加快网站速度的最佳实践 - 雅虎](http://developer.yahoo.com/performance/rules.html#js_bottom)

[为什么我们应该在最后加载脚本 - SO Link](https://stackoverflow.com/questions/143486/unobtrusive-javascript-script-at-the-top-or-the-bottom-of-the-html-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:55:07.923

我会避免这种方法；脚本会阻止页面加载——因此，如果您在几个 dom 元素之后执行此操作，页面会运行缓慢（或者如果发现错误则根本不会）

尝试使用 jquery onready - 这里的例子：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

并且脚本 [通常] 需要放在页面底部以允许页面首先加载……这个规则有一些例外，例如众所周知的现代化脚本库需要首先进入，以便它可以在加载时评估 dom

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:40:28.993

这里的问题是脚本标签不知道它在 DOM 中的位置。最好做一些事情，比如为你想要改变的元素添加一个类。在 DOM 准备就绪后，您查找元素并施展魔法。

# linux - SSH 持久连接超时

> ID：15971515
> 
> 赞同：1
> 
> 时间：2013-04-12T12:32:08.197
> 
> 标签：linux, bash, shell, unix, ssh

我使用 bash 脚本设置了 ssh 隧道，并将 ssh 隧道配置为共享持久连接隧道。

但是，在我的脚本结束时，我设置了它以对隧道调用关闭命令并删除 .ssh/config 文件，这样它就不会保持打开状态，后续由 a 手动启动的 ssh 隧道也不会保持打开状态。用户。

问题是......在调用关闭命令并删除之前，如果有人 ctrl+c 脚本或由于某种原因在脚本中间崩溃，那么确保隧道关闭的最佳方法是什么？配置文件？我打算向控制主机添加超时，但我无法根据我在 ssh_config 手册页中的读数确定我需要使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:30:44.710

尝试使用[陷阱](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html)：

```
#!/bin/bash

on_sigint(){
    echo this function is called on ctrl+c        
}

trap "on_sigint" SIGINT SIGTERM
echo start

# Do what you want
...

echo stop 
```

# c++ - 用于定点加法的 Boost 单元测试用例

> ID：15971516
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:32:10.150
> 
> 标签：c++, loops, boost, types

大家好，我是 C++ 新手，在这里我需要为我的头文件的定点添加做一个 boost 测试。它由以下代码完成。

```
 BOOST_AUTO_TEST_CASE( add )
    {
        double a=(std::numeric_limits<fpml::fixed_point<short, 8> >::min)(); 
        double b=(std::numeric_limits<fpml::fixed_point<short, 8> >::max)(); 

        for (double x=a; x<b; ++x)
        {
            for (double y=a; y<b; ++y)
            {
                fpml::fixed_point<int, 16> xx = x;
                fpml::fixed_point<int, 16> yy = y;

                BOOST_CHECK( (fpml::fixed_point<int, 16>)(x+y) == xx+yy );
            }
        }
    } 
```

我只需要知道代码中发生了什么，一个`fpml::fixed_point<short, 8>` 具有限制的类模板`short_min`被分配给并且具有限制`double function a`的相同类模板被分配给？`fpml::fixed_point<short, 8>``short_max``double function b`

`for loop`它从short的最小值循环到short的最大值是怎么回事？

有人可以解释一下 for lopp 中发生了什么以及如何完成和检查加法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:48:44.607

[std::numeric_limits](http://en.cppreference.com/w/cpp/types/numeric_limits)是`traits-type`. 在代码中的某个地方，有专门针对`fmpl::fixed_point<T, int>`. 然后`a`== 类型的最小值`fmpl::fixed_point<short, 8>`和`b`== 这种类型的最大值。对于循环检查，在 a 到 b 的范围内，对于所有和 对`a`，`b`==`fmpl::fixed_point (a + b)`和的`fmpl::fixed_point(a)`总和`fmpl::fixed_point(b)`。

# visual-studio - 错误 LNK2019 使用 openglbook.com 在 Visual Studio 12 中无法解析的外部符号

> ID：15971519
> 
> 赞同：3
> 
> 时间：2013-04-12T12:32:16.467
> 
> 标签：visual-studio, opengl, glew, freeglut

我正在尝试使用[本指南](http://openglbook.com/blog/setting-up-opengl-glew-and-freeglut-in-visual-c/)设置带有 glew 和 freeglut 的 openGL 。

我一直遵循指南直到第 7 步，但是在使用本书第 1 章中的代码进行编译时（按照建议），我得到了下面列出的错误。我可以看到错误发生在函数_InitWindow和_RenderFunction中，但我不知道如何解决它们。

```
Error   1   error LNK2019: unresolved external symbol __imp__glutInitWindowSize@8 referenced in function _InitWindow     c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj ConsoleApplication1
Error   2   error LNK2019: unresolved external symbol __imp__glutInitDisplayMode@4 referenced in function _InitWindow   c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   3   error LNK2019: unresolved external symbol __imp__glutMainLoop@0 referenced in function _main    c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   4   error LNK2019: unresolved external symbol __imp__glutPostRedisplay@0 referenced in function _RenderFunction c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   5   error LNK2019: unresolved external symbol __imp__glutSwapBuffers@0 referenced in function _RenderFunction   c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   6   error LNK2019: unresolved external symbol __imp__glutReshapeFunc@4 referenced in function _InitWindow   c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   7   error LNK2019: unresolved external symbol __imp__glutDisplayFunc@4 referenced in function _InitWindow   c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   8   error LNK2019: unresolved external symbol __imp____glutInitWithExit@12 referenced in function _glutInit_ATEXIT_HACK@8   c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   9   error LNK2019: unresolved external symbol __imp____glutCreateWindowWithExit@8 referenced in function _glutCreateWindow_ATEXIT_HACK@4    c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   10  error LNK2019: unresolved external symbol __imp__glutSetOption@8 referenced in function _InitWindow c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   11  error LNK2019: unresolved external symbol __imp__glutInitContextVersion@8 referenced in function _InitWindow    c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   12  error LNK2019: unresolved external symbol __imp__glutInitContextFlags@4 referenced in function _InitWindow  c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   13  error LNK2019: unresolved external symbol __imp__glutInitContextProfile@4 referenced in function _InitWindow    c:\Users\Lissau\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\main.obj  ConsoleApplication1
Error   14  error LNK1120: 13 unresolved externals  c:\users\lissau\documents\visual studio 2012\Projects\ConsoleApplication1\Debug\ConsoleApplication1.exe ConsoleApplication1 
```

我的 main.c 文件中的代码是：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#define WINDOW_TITLE_PREFIX "Chapter 1"

int CurrentWidth = 800,
    CurrentHeight = 600,
    WindowHandle = 0;

void Initialize(int, char*[]);
void InitWindow(int, char*[]);
void ResizeFunction(int, int);
void RenderFunction(void);

int main(int argc, char* argv[])
{
    Initialize(argc, argv);

    glutMainLoop();

    exit(EXIT_SUCCESS);
}

void Initialize(int argc, char* argv[])
{
    InitWindow(argc, argv);

    fprintf(
        stdout,
        "INFO: OpenGL Version: %s\n",
        glGetString(GL_VERSION)
        );

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
}

void InitWindow(int argc, char* argv[])
{
    glutInit(&argc, argv);

    glutInitContextVersion(4, 0);
    glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
    glutInitContextProfile(GLUT_CORE_PROFILE);

    glutSetOption(
        GLUT_ACTION_ON_WINDOW_CLOSE,
        GLUT_ACTION_GLUTMAINLOOP_RETURNS
        );

    glutInitWindowSize(CurrentWidth, CurrentHeight);

    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

    WindowHandle = glutCreateWindow(WINDOW_TITLE_PREFIX);

    if(WindowHandle < 1) {
        fprintf(
            stderr,
            "ERROR: Could not create a new rendering window.\n"
            );
        exit(EXIT_FAILURE);
    }

    glutReshapeFunc(ResizeFunction);
    glutDisplayFunc(RenderFunction);
}

void ResizeFunction(int Width, int Height)
{
    CurrentWidth = Width;
    CurrentHeight = Height;
    glViewport(0, 0, CurrentWidth, CurrentHeight);
}

void RenderFunction(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glutSwapBuffers();
    glutPostRedisplay();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T08:53:54.350

在多次重做教程的步骤但没有成功后，我去自由式寻找答案（教程中没有）。

我的问题是附加库目录路径未设置为我的 lib 文件的路径。通过右键单击您的项目来更改此设置，从下拉列表中选择“所有配置”，然后转到链接器->常规->附加库目录->编辑。就我而言，我将其设置为“C:\Program Files %28x86%29\Microsoft SDKs\Windows\v8.0A\Lib”。

# c# - 如何在一个查询字符串中传递多个值？

> ID：15971527
> 
> 赞同：1
> 
> 时间：2013-04-12T12:32:34.693
> 
> 标签：c#, asp.net

我有一个网格。网格中有多个值。假设网格中有候选 ID 列，并且每一行都有复选框。我想通过复选框选择多个候选 ID 值，并将单个查询字符串中的多个选定值传递到另一个页面，然后我将使用`split()`函数拆分值并保留在数组中。因为我必须使用这个多个候选 id 在目标页面上执行一些操作。请为此问题提供一些解决方案。

有我的网格。***我没有在此代码中包含复选框***

```
<asp:GridView ID="grdReq" runat="server" AutoGenerateColumns="false"    CssClass="SimpleGrid" OnRowDataBound="grdReq_RowDataBound">
<Columns>
  <asp:BoundField DataField="CandidateID" HeaderText="Candidate Id" />
  <asp:BoundField DataField="Candidate Name" HeaderText="Candidate Name" />
  <asp:BoundField DataField="Current Organization" HeaderText="Current Organization" />
  <asp:BoundField DataField="Current Designation" HeaderText="Current Designation" />
  <asp:BoundField DataField="Overall Exp" HeaderText="Overall Exp" />
  <asp:BoundField DataField="Qualification" HeaderText="Qualification" />
</Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:05:32.370

好吧，我在不久的过去做了类似的事情，程序是：

1.  循环浏览您的页面以查找复选框并在字符串生成器中添加已选中的复选框，例如：

```
          StringBuilder sb = new StringBuilder();

           sb.Append(你的复选框);
            sb.Append(",");

```

在接收时，您可以使用“，”将其拆分，您将拥有所有复选框。

祝你好运

# asp.net-mvc - 为什么我在部分视图中收到 NPE？

> ID：15971528
> 
> 赞同：1
> 
> 时间：2013-04-12T12:32:41.890
> 
> 标签：asp.net-mvc

我有这样的部分观点：

```
@model HesteIndex.Models.HorseModels

@if (Model != null)
{
    <a href="car-details.html">
        <img src="@Model.Pictures[0].MediaPath" alt="offer car">
        <div class="entry-label">
            <h4>@Model.Name</h4>
            <span class="price-tag">@(Model.PriceIndex == "0 - 0" ? Model.FixedPrice.ToString("#,###") : Model.PriceIndex) DKK</span>
        </div>
        <div class="entry-overlay" style="display: none;">
            <ul class="car-list-details">
                <li>@Model.Gender</li>
                <li>@Model.Color</li>
                <li>@Model.YearOfBirth</li>
                <li>@Model.Dressage</li>
                <li>@Model.Jump</li>
            </ul>
        </div>
    </a>
} 
```

我称之为：

```
<ul class="offer-small list-content">
            @if (ViewBag.RandomHorses != null)
            {
                foreach (HesteIndex.Models.HorseModels horse in (List<HesteIndex.Models.HorseModels>)ViewBag.RandomHorses)
                {
                <li>
                    @Html.Partial("_HorseSmallAd", horse);
                </li>
                }
            }
        </ul> 
```

我不明白为什么在我的部分`{`之后收到 NPE：`@if (Model != null)`

```
Object reference not set to an instance of an object. 
```

但我 100% 确定我没有通过空对象模型（我已经进行了调试，甚至打印了一些我称之为部分的马属性）。

有什么我做错了吗？

# zend-framework - 使用 Zend 框架的查询构建器

> ID：15971532
> 
> 赞同：2
> 
> 时间：2013-04-12T12:32:52.057
> 
> 标签：zend-framework, zend-queue

我刚刚开始我的 PHP Zend 框架世界之旅。我的应用程序的目的是使用 Zend 开发查询构建器。该应用程序将被网络中的许多用户同时使用。当用户根据应用程序提供的某些条件进行搜索时，系统会从庞大的数据库（超过5000万条记录甚至更多）中获取相关的搜索结果。

**注意：**一个用户一次可以执行多个搜索请求。每个请求都会创建一个唯一的队列 ID。

由于搜索结果页面的负载较多，显示结果需要一些时间。所以，我有一个想法，以实现用户友好的环境。一旦用户执行搜索，他/她可以导航到任何其他网页，一旦完成所有请求，将向用户显示搜索结果可以查看的警报或通知。

根据队列ID，用户可以切换回搜索结果页面并查看他们的结果。我曾尝试使用来自（[http://dennisgurnick.com/2011/09/29/zend-queue-with-mysql/](http://dennisgurnick.com/2011/09/29/zend-queue-with-mysql/)）的 Zend Queue；它仅用于一封一封地发送电子邮件。所以，请告诉我，如何实现这一点，非常感谢您的回答。

# templates - 如何覆盖特定内容类型的 node.tpl.php 并在单个页面中显示所有内容？

> ID：15971534
> 
> 赞同：2
> 
> 时间：2013-04-12T12:32:54.057
> 
> 标签：templates, drupal-7, preprocessor, drupal-theming

我是 drupal 的新手。我正在创建一个内容类型 "news" 。每次我创建新闻类型的内容时，它都会显示在页面中，例如 .../drupal/?q=node/6, .../drupal/?q=node/7 等等。

我到底需要什么我想在一个页面中列出所有这些内容并在一个模板文件中编辑它们。在这里我遇到问题，模板文件名是什么？

尝试：我尝试使用以下名称，并且在 mytheme/template 目录中有**“mytheme_preprocess_page()” 。**

```
 1.node--news.tpl.php
  2.node--type--news.tpl.php
  3.node-type-news.tpl.php

This is my 
   function ppi_preprocess_page(&$variables) {
     if (isset($variables['node']) && isset($variables['node']->custom_template['und'][0]['value'])) {
     $custom_template_value = $variables['node']->custom_template['und'][0]['value'];
     $templates_directory = dirname(__FILE__)."/templates";
     $template_file_path = "$templates_directory/{$variables['node']->type}--{$custom_template_value}.tpl.php";
     $template_name = "{$variables['node']->type}__{$custom_template_value}";
     if(file_exists($template_file_path)) {
      $variables['theme_hook_suggestions'][] = $template_name;
     }
     if ((arg(0) == 'node') || (arg(1) == 'edit' || arg(2) == 'news')) {
     $vars['template_files'][] =  'page-node-edit-news';
     }
   }
} 
```

我还更改了**$vars['template_files'][] = 'page-node-edit-news'**我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T11:33:11.303

```
This can be possible through the name like page--node--{custom_content_type}.tpl.php
In this case it shuld be **page--node--news.tpl.php** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:42:17.333

使用此步骤：

1.  安装视图模块
2.  运行视图和视图 ui
3.  使用链接结构/视图
4.  重新审视您的内容类型
5.  询问您需要的字段，然后根据需要构建您的页面
6.  如果需要，您可以为视图设置主题

# sql - 通过 String Concat 执行更新时出错

> ID：15971535
> 
> 赞同：0
> 
> 时间：2013-04-12T12:32:54.497
> 
> 标签：sql, sql-server-2008

我正在做一个查询，我想通过将新值连接到这些列来更新列。
我编写了如下 SQL 代码，但出现错误：

```
DECLARE @sql varchar(max), @Id INT, @Total_Service_Amount float,
@Total_Cancellation_Charge float, @Total float

SET @Id = 1
SET @Total_Service_Amount = 1
SET @Total_Cancellation_Charge = 2
SET @Total = @Total_Service_Amount + @Total_Cancellation_Charge

SET @sql = 'UPDATE [DBO].[Service_Amount] SET Request_Id = '''
+ CONCAT (Request_Id, CAST(@Id AS VARCHAR), ',') + ''',
Amount = ''' + CONCAT (Amount, CAST(@Total) AS VARCHAR), ',')
+ ''' WHERE Request_For_Id = (SELECT Request_For_Id FROM
[DBO].Request WHERE Id=@Id)' 

EXEC sp_executesql @sql 
```

我想要如下结果：之前：

> **身份证 | 请求 ID | 数量**
> 
> 1 | 1, 2, 3, 4 | 200,300,22,22

后：

> **身份证 | 请求 ID | 数量**
> 
> 1 | 1, 2, 3, 4, 5 | 200,300,22,22,12
> 
> **解决方案：**

```
DECLARE @sql nvarchar(max), @Id INT, @Total_Service_Amount float, @Total_Cancellation_Charge float, @Total float, @beforeId varchar(500), @beforeAmount varchar(max)
SET @Id = 1
select @Total_Service_Amount = 1
select @Total_Cancellation_Charge = 2
select @Total = @Total_Service_Amount + @Total_Cancellation_Charge

SELECT @beforeId = Request_Id FROM [DBO].[Service_Amount] WHERE Request_For_Id = (SELECT Request_For_Id FROM [DBO].Request WHERE Id= @Id)

SELECT @beforeAmount = Amount FROM [DBO].[Service_Amount] WHERE Request_For_Id = (SELECT Request_For_Id FROM [DBO].Request WHERE Id= @Id)

SET @sql = 'UPDATE [DBO].[Service_Amount] SET Request_Id = ''' + @beforeId + ',' + convert(VARCHAR,@Id) +  ', Amount = ''' + @beforeAmount + ',' + convert(VARCHAR,@Total) + ''' WHERE Request_For_Id = (SELECT Request_For_Id FROM [DBO].Request WHERE Id=' + convert(VARCHAR,@Id) + ')' 
EXEC sp_executesql @sql, N'@id int', @Id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:00:14.700

该行`@sql = 'UPDATE...`应该是`SET @sql = 'UPDATE...`

此外，您需要将`@id`参数传递给@sql，就像这样..

`EXEC sp_executesql @sql, N'@id int', @id`

您可以在以下文档中阅读更多信息：http `sp_executesql`: [//msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:10:54.470

如果您想将 SELECT 查询中的大量字段粘合到一个字符串中，请尝试以下操作：

```
select STUFF(
               (SELECT ',',  Request_Id as [text()]
                FROM [DBO].[Service_Amount]
                FOR XML PATH ('')
               )
             , 1, 1, '') 
```

这可以设置为变量
`Set @my_var = (SELECT Stuff... )`
并在`UPDATE`sql中使用

该`FOR XML`部分将粘合在一起，`STUFF`只是删除了前导逗号。

# c# - 获取当前系统中共享为“所有人”的文件夹名称

> ID：15971536
> 
> 赞同：0
> 
> 时间：2013-04-12T12:33:09.500
> 
> 标签：c#, asp.net, vb.net

如何获取在当前系统中以“所有人”权限创建的文件夹的名称和位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:36:05.180

您可以使用[DirectoryInfo.GetAccessControl](http://msdn.microsoft.com/en-us/library/t1h6d4k4.aspx)来获取

> 获取一个 DirectorySecurity 对象，该对象封装了当前 DirectoryInfo 对象所描述的目录的访问控制列表 (ACL) 条目。

对于系统中的单个目录。剩下的就是实现对系统中所有目录的迭代并调用它。

例子：

```
 string[] drives = System.Environment.GetLogicalDrives();
    foreach (string dr in drives)
    {
        System.IO.DriveInfo di = new System.IO.DriveInfo(dr);

        if (!di.IsReady)
        {               
            continue;
        }
        System.IO.DirectoryInfo root = di.RootDirectory;
        var directories = root.GetDirectories("*.*", System.IO.SearchOption.AllDirectories);
        foreach(var dirInfo in directories ) {
            var diAccess = dirInfo.GetAccessControl(..) ;
        }

    } 
```

完整的例子和解释可以找到：[How to: Iterate Through a Directory Tree](http://msdn.microsoft.com/en-us/library/bb513869.aspx)

这只是一个草图，根据您的需要进行更改。

# java - 内存中的 XML 文件，而不是磁盘上的文件

> ID：15971541
> 
> 赞同：0
> 
> 时间：2013-04-12T12:33:29.373
> 
> 标签：java, xml, file, download, wicket

我想创建一个 XML 文件，该文件将作为下载链接提供给用户（用于 XSLT 的 Wicket 和 TransformerFactory）。目前，我使用 File 类。但是，我不想在服务器上创建文件。该文件应该只存在于内存中。有人可以告诉我如何做到这一点吗？谢谢！

我当前的代码：

```
Reader reader = new StringReader("DATA");
TransformerFactory tFactory = TransformerFactory.newInstance();
Transformer transformer = tFactory.newTransformer(new StreamSource("EXCEL.xsl"));
transformer.setOutputProperty(OutputKeys.METHOD, "xml");
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");
File file= new File("FILE.xml");                
transformer.transform(new StreamSource(reader), new StreamResult(new FileOutputStream(file))); 
```

其他类：

```
File file = new File("file");
add(new DownloadLink("download", file, "XML.xml")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:37:45.340

你可以从这个开始（不确定这是否完全正确 - 现在无法检查）

```
ByteArrayOutputStream oStream = new ByteArrayOutputStream();
transformer.transform(new StreamSource(reader), new StreamResult(oStream))
byte[] xmlResult = oStream.toByteArray(); 
```

# php - 如何使用 PHP Curl 安装 Node.js？

> ID：15971543
> 
> 赞同：0
> 
> 时间：2013-04-12T12:33:32.587
> 
> 标签：php, apache, node.js, curl

我正在尝试查找如何在我的 apache 服务器上安装 Node.js，但我无法访问服务器上的控制台 (SSH)。是否可以使用 PHP Curl 安装 Node？

我已经下载[了源代码](https://github.com/joyent/node)并将其放在我的服务器上，但我不知道如何处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:39:59.430

PHP 和一些肮脏的调用可能是可能的`system()`，但是如果您可以在 PHP 上下文中执行这些命令，那么您为什么不能访问服务器呢？

~~我会要求某人让您直接访问服务器或让管理员为您安装 node.js。~~

由于您是该服务器的管理员，并且您不知道如何启用 SSH，甚至不知道如何安装 node.js（这非常简单），我建议您阅读有关管理服务器的内容：[this](https://speakerdeck.com/futureshocked/a-linux-server-administration-tutorial-for-beginners) as以及[此链接](http://www.tldp.org/LDP/sag/html/index.html)可能会对您有所帮助。

此外，[这里是](http://www.cyberciti.biz/faq/ubuntu-linux-openssh-server-installation-and-configuration/)`sshd`关于如何在您的服务器上启用的教程，[这里是](https://github.com/joyent/node/wiki/Installation)关于如何构建和安装 node.js 的链接。

但是我仍然问自己，如果您无法以某种方式访问​​服务器，您甚至*如何使用它...*

# mysql - 选择具有双重限制的 MySQL

> ID：15971546
> 
> 赞同：2
> 
> 时间：2013-04-12T12:33:51.677
> 
> 标签：mysql, sql, select, join

我有两个表，我想在第一个表中只选择第二个表中没有的报告，其中 id_user='N'，全部通过外键 id（table1.id，filter_table1.id_table1）。

```
SELECT * 
FROM table1, filter_table1 
WHERE table1.id!=(SELECT id_table1 FROM filter_table1 WHERE id_user='1') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:42:11.450

我宁愿使用而`LEFT JOIN`不是`NOT IN`

```
SELECT  a.*
FROM    table1 a
        LEFT JOIN filter_table1 b
            ON  a.ID = b.id_table1 AND
                b.id_user = 1
WHERE   b.id_table1 IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:39:53.443

```
SELECT * 
FROM table1
WHERE table1.id NOT IN (SELECT id_table1 FROM filter_table1 WHERE id_user='1') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:40:12.997

您不需要在上述查询中加入 - 只需使用所谓的[相关子查询](http://en.wikipedia.org/wiki/Correlated_subquery)：

```
SELECT t1.* 
FROM table1 t1
WHERE t1.id NOT IN (
  SELECT id_table1 
  FROM filter_table1 
  WHERE id_user = '1' AND t1.id = filter_table1.id_table1
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:41:38.683

尝试这个

```
SELECT * 
FROM table1, filter_table1 
WHERE table1.id NOT IN (SELECT id_table1 FROM filter_table1 WHERE id_user='1') 
```

# c# - 如何在主窗体中使用用户控件复选框事件。

> ID：15971548
> 
> 赞同：0
> 
> 时间：2013-04-12T12:34:01.467
> 
> 标签：c#, winforms

我正在尝试使用 C# windows 窗体应用程序创建 GUI。我在 mainfrom 中编写了一种方法。我在一个用户控件中有两个复选框。当复选框更改时，我需要在主窗体中引发该事件并在该事件中运行我在 mainfrom 中编写的方法。我怎样才能做到这一点 ？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:36:23.460

在帮助中查找代表。您在主框中创建一个过程，在控件中创建一个委托，将委托设置为主过程中的过程并调用复选框。选中。

一项警告工作 - 检查委托不为空（表示未设置），否则您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:40:55.050

```
public class MainForm : Form
{
    public void YourMethod()
    {
        ///
    }
}

public class UserControl
{
    private readonly MainForm _MainForm;

    public UserControl(MainForm mainForm)
    {
        _MainForm = mainForm;

        ///add event for checkbox
    }

    private void Checkbox_Clicked(object Sender, EventArgs e)
    {
        _MainForm.YourMethod();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:41:15.680

在您的用户控件中执行以下操作（来自我自己的自定义控件的示例，显然将其调整为您需要的:)）：

```
public event EventHandler InnerDiagramCheckBox1CheckChanged;

private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    if (InnerDiagramCheckBox1CheckChanged != null)
    {
        InnerDiagramCheckBox1CheckChanged(sender, e);
    }
} 
```

那么你可以在其加载或构造的主要形式中做的是：

```
instanceofyourcontrol.InnerDiagramCheckBox1CheckChanged+= new 
System.EventHandler(nameofthefunctionyouwanttotriggerinthemainform); 
```

您在这里所做的是将事件委托给您的用户控件:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:46:56.720

在用户控件中创建一个委托，并使其指向主窗体中的函数。为用户控件中的复选框创建 OnCheckedChanged() 事件，并在事件中调用委托方法。

看看这个例子

主窗体.cs

```
mainform_load()
{
// Initialize user control delegate object to point the method in mainform
usercontrol1.method= Method1;
...
}

// method to call from usercontrol
public void Method1()
{

} 
```

用户控件1.cs

```
delegate void Method1()
public PointMyMethod method;

...

checkbox1_OnCheckedChanged()
{
    // This calls the method in mainform
    method();
}

... 
```

希望能帮助到你

# jquery - jQuery iframe 弹出窗口

> ID：15971549
> 
> 赞同：1
> 
> 时间：2013-04-12T12:34:07.760
> 
> 标签：jquery, jquery-mobile

当有人单击图像时，我想在 iframe 弹出窗口中打开一个链接，这是代码 -

```
<div class="photo-container">
    <a href="<?php echo $offer_link1 ?>">
        <img src="./images/im12.png" height="100" width="100">
    </a>
</div> 
```

如何在 iframe 弹出窗口中打开链接？

网址是 - [http://beflirty.net/lp1/signup12.php](http://beflirty.net/lp1/signup12.php)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:43:04.360

尝试这个

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script>
 $(document).ready(function (e) {
 $("framediv").hide();
    $("#link1").click(
function (e) {

$("#framediv").css({'display':'block'});
});
 });

</script>

<div class="photo-container">
 <a name="link1" href="<?php echo $offer_link1 ?> " target="frame1">
     <img src="./images/im12.png" height="100" width="100">
 </a>
</div>

<div id="framediv">
 <iframe height="900px" width="1100px"  name="frame1" border="0px"></iframe>
</div> 
```

# java - 试图将 JAR 文件添加到项目中，但得到 NoClassDefFoundError

> ID：15971550
> 
> 赞同：1
> 
> 时间：2013-04-12T12:34:07.973
> 
> 标签：java, jar, runtime-error, noclassdeffounderror

[我从这个项目https://github.com/timmolter/XChange](https://github.com/timmolter/XChange)下载了 jar 文件，现在我正在尝试在 Eclipse 中运行一个示例程序。

运行前没有指示错误，但是在尝试运行它时，我收到以下错误消息。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at com.xeiam.xchange.ExchangeFactory.<init>(ExchangeFactory.java:41)
    at com.xeiam.xchange.ExchangeFactory.<clinit>(ExchangeFactory.java:39)
    at com.xeiam.xchange.rhbotha.bot.Main.main(Main.java:18)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 3 more 
```

这是我的代码。

```
package com.xeiam.xchange.rhbotha.bot;

import com.xeiam.xchange.Exchange;
import com.xeiam.xchange.ExchangeFactory;
import com.xeiam.xchange.currency.Currencies;
import com.xeiam.xchange.dto.marketdata.Ticker;
import com.xeiam.xchange.mtgox.v1.MtGoxExchange;
import com.xeiam.xchange.service.marketdata.polling.PollingMarketDataService;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {

        // Use the factory to get the version 1 MtGox exchange API using default settings
        Exchange mtGoxExchange = ExchangeFactory.INSTANCE.createExchange(MtGoxExchange.class.getName());

        // Interested in the public polling market data feed (no authentication)
        PollingMarketDataService marketDataService = mtGoxExchange.getPollingMarketDataService();

        // Get the latest ticker data showing BTC to USD
        Ticker ticker = marketDataService.getTicker(Currencies.BTC, Currencies.USD);
        System.out.println(ticker.toString());

        // Get the latest ticker data showing BTC to EUR
        ticker = marketDataService.getTicker(Currencies.BTC, Currencies.EUR);
        System.out.println(ticker.toString());

        // Get the latest ticker data showing BTC to GBP
        ticker = marketDataService.getTicker(Currencies.BTC, Currencies.GBP);
        System.out.println(ticker.toString());

    }

} 
```

根据我的阅读，这可能是类路径中的问题，但不确定该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:47:52.127

您已经下载了一个 jar，其中包含您在代码中使用的类。您正在使用的类在您下载并放在 Eclipse 中的类路径中的 jar 中。在编译时，您的代码能够编译，因为您的代码所依赖的类已经编译并且可以在类路径中找到（在您添加的 jar 中），因此您不会收到任何编译错误。

问题是您下载的 jar 依赖于其他类，这些类是您未在类路径中提供的其他 jar 的一部分。当您尝试运行时，由于该类不存在，您将得到类未找到异常。就像其他人所说的那样，我建议使用 maven，以便在包含所需的依赖项时引入 jar 的所有依赖项。你也可以把所有需要的 jars 放到你的类路径中，只是有点难以管理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:37:19.933

你错过了这个罐子（可能是其他罐子）：org.slf4j.LoggerFactory

我的建议是使用 Maven 来管理您的依赖项（通过 pom），但如果不只是下载这个 jar 并将其与其他 jar 一起包含（即在类路径中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:45:02.087

slf4j.jar 丢失。从这里下载它并将其包含在类路径中。 [http://www.slf4j.org/download.html](http://www.slf4j.org/download.html)

在 Eclipse 中，转到 Project Properties->Java Build Path->Libraries 然后添加外部 jar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:43:50.907

您的类路径中缺少 SLF4J 库。下载[slf4j jar](http://www.slf4j.org/download.html)并添加到类路径（在 Eclipse 中转到 Project Properties->Java Build Path->Libraries 然后添加外部 jar。

# f# - NullReferenceException 使用 String.Contains

> ID：15971554
> 
> 赞同：4
> 
> 时间：2013-04-12T12:34:17.763
> 
> 标签：f#

我不知道为什么我会在以下代码的 List.filter 部分得到那个异常：

```
pdfLinks |> List.filter(fun x -> x.Contains("shop")) |> List.iter (printfn "%s") 
```

pdfLinks 属于“字符串列表”类型，其中包含大量包含“商店”一词的字符串。

它在带有虚拟列表的 F# Interactive 中运行良好。原始文件是通过解析 HTML 文件生成的，但通过手表检查它显示它具有所需类型的所需值。

知道会发生什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:51:02.450

尝试`System.String.IsNullOrEmpty`在您的电话中添加一个电话`List.filter`，看看它是否可以解决问题：

```
pdfLinks
|> List.filter(fun x ->
    (not <| System.String.IsNullOrEmpty x) &&
    x.Contains("shop"))
|> List.iter (printfn "%s") 
```

# neo4j - 在不知道节点 ID 的情况下在 Neo4j 中导入大数据

> ID：15971555
> 
> 赞同：0
> 
> 时间：2013-04-12T12:34:22.187
> 
> 标签：neo4j

我有一个问题，女巫是在 neo4j db 中插入一些数据的最佳方式。我有一个包含很多电影信息的文件，每部电影都有不同的 ID，例如“tt0202025”。我还有一个包含演员信息的文件，每个文件都有一个像“mm2183122”这样的 ID 我还有另一个文件，女巫描述了演员参与的电影。mm2183122|tt0202025,tt0204548

我已经为 csv 找到了一些东西，比如插入，但由于数据大小，我之前无法在节点之间创建关系文件。

我必须先添加电影节点和演员节点，然后再添加它们之间的关系吗？以及如何知道为每个节点创建了哪个节点 ID 以创建关系？数据很大。

我也阅读了批量插入，但我无法准确理解它是如何工作的，所以我可以用 Java 编写我的代码。

希望有人可以指导我！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:30:23.983

正如您所指出的，最简单的解决方案是插入电影节点和演员节点，然后创建关系。

您可以使用“mm2183122”和“tt0202025”作为节点上的属性来跟踪节点：例如，您的节点上有一个“file_id”属性，您可以在创建节点时对其进行索引，并在您想要创建时查询它关系。如果您多次插入节点，我会使用唯一索引来确保不会复制节点。对于 REST API，您可以在此处查看文档：http: [//docs.neo4j.org/chunked/milestone/rest-api-unique-indexes.html](http://docs.neo4j.org/chunked/milestone/rest-api-unique-indexes.html)

Cypher 还允许您创建唯一节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T18:09:17.740

您可以查看 Talend Open Studio for Big Data - 它有一个 Neo4j 连接器。学习曲线相当陡峭但值得。

# asp.net-mvc - 链接到 MVC 中的 HTML 帮助页面

> ID：15971557
> 
> 赞同：2
> 
> 时间：2013-04-12T12:34:30.077
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的网站有 HTML 帮助页面，我试图弄清楚如何从我的 ASP.NET MVC4 应用程序中调用它。它只是 html 页面，但是当我创建指向该页面的链接时，我收到“找不到资源”404 错误。

这听起来像是一个愚蠢的问题，但是如何从 ASP.NET MVC 应用程序中调用 HTML 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:45:35.397

`RegisterRoutes`您可以尝试将所有静态内容放在特定的子目录中，例如“/Static/”，然后在 Global.asax的方法顶部执行以下操作：

```
routes.IgnoreRoute("Static/{*pathInfo}"); 
```

这将使 MVC 知道该子目录中的任何内容都将被视为静态内容，而不是通过其路由传递。

因此，在您的情况下，您可能会遇到以下情况：

```
routes.IgnoreRoute("Help/{*pathInfo}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:59:10.590

原来我只是把 URL 路径弄错了。我需要在路径的开头包含“区域”，通常由于某种原因我不需要。

# java - 范围的通用 InputVerifier

> ID：15971560
> 
> 赞同：0
> 
> 时间：2013-04-12T12:34:35.200
> 
> 标签：java, swing, validation, java-7, inputverifier

我正在尝试创建一个通用 InputVerifier 来检查 JComponent 中的数据是否在指定范围内。为此，我使我的泛型类型扩展了 Comparable<> 以确保它可以进行比较。

我正在关注的是以下两件事：

1.  JComponent 没有 getText() 方法，也没有一个子类可以转换为 JTextField 和 JSpinner 等常见组件使用的子类，它们都有不同的获取值的方法。
2.  我认为我不能指定我的泛型类型 DataType 必须具有特定的函数签名。我试图看看我是否可以强制它具有一个接受单个字符串的构造函数（如 Integer、Double、Float），或者强制 DataType 必须扩展 Integer、Double 或 Float，但我不确定如果 Java 7 泛型可以做到这一点。如果我能做类似的事情会很棒：`DataType myData = new DataType(text);`

这是我现在的课程。我把它抽象化了，所以子类必须知道返回文本所涉及的 JComponent 的类型，然后如何构建可比较的类型以进行比较。考虑到可能起作用的不同类型的 JComponents 和 Comparable 类型，这可能会导致许多排列。有没有办法消除我上面提到的一个或两个问题？

```
import javax.swing.InputVerifier;
import javax.swing.JComponent;

public abstract class InputRangeVerifier<DataType extends Comparable<DataType>> extends InputVerifier {

    private DataType m_min;
    private DataType m_max;

    public InputRangeVerifier(DataType min, DataType max) {
        m_min = min;
        m_max = max;
    }

    @Override
    public boolean verify(JComponent component) {
        String componentText = getComponentText();
        DataType comparable = getComparableValue(componentText);

        boolean greaterThanOrEqualToMin = comparable.compareTo(m_min) > 0;
        boolean lessThanOrEqualToMax = comparable.compareTo(m_max) < 0;
        boolean isInRange = greaterThanOrEqualToMin && lessThanOrEqualToMax;

        return isInRange;
    }

    public abstract String getComponentText();
    public abstract DataType getComparableValue(String text);

} 
```

# jquery - 停止循环在 jQuery 中的内容

> ID：15971561
> 
> 赞同：-2
> 
> 时间：2013-04-12T12:34:37.107
> 
> 标签：jquery

在[http://www.elitedeafpoker.com/dev/index.html](http://www.elitedeafpoker.com/dev/index.html)中的手牌力量。我试图弄清楚单击其中一个列表项后如何停止循环内容。我只想在单击列表项后显示内容。当前，当单击列表项之一并显示内容并等待几秒钟时，内容会旋转下一个内容而不单击项。

jQuery

```
$(document).ready(function(){
$("#featured").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:40:05.433

就像是：

```
$("element").click(function(){
    $("#featured").stop();
}); 
```

来自[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# android - 禁用从 android 应用程序 android 4.0+ 逃逸

> ID：15971562
> 
> 赞同：0
> 
> 时间：2013-04-12T12:34:38.127
> 
> 标签：android

我正在开发应该启动一个应用程序并且用户无法关闭该应用程序或离开它的应用程序。所以我需要禁用所有 3x 按钮（返回、主页、多任务）。禁用后退按钮很容易仅覆盖方法 onBackPressed()。但是我怎样才能禁用 Home 和 Multitask。我读到在 4.0+ android 中无法覆盖主页按钮，所以我该怎么做？我可以阻止多任务按钮，使用户无法从应用程序中逃脱吗？

PS：此应用程序永远不会在 Android Market 上发布，因此解决方案可能会违反“规则”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:40:26.660

返回键

[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

假设您处于活动 A 中，您导航到 B，然后导航到 C。在活动 C 中，您按下返回按钮，活动 C 从堆栈中弹出、销毁并显示上一个活动 B

假设您希望从 C 导航到 A，那么您可以覆盖按下的后退按钮

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) { 
if (keyCode == KeyEvent.KEYCODE_BACK) {
onBackPressed();
}

return super.onKeyDown(keyCode, event);
}

public void onBackPressed() {
Intent myIntent = new Intent(C.this, A.class);
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // clear back stack 
startActivity(myIntent); 
finish(); 
return;
} 
```

主页按钮

除非您将应用程序设为主屏幕，否则无法拦截 Android 上的主页按钮。这是出于安全原因，因此恶意应用程序无法通过覆盖所有可以退出的按钮来接管您的设备。主页按钮是能够离开任何应用程序的一种可靠方式。

如果要处理 HOME 按钮，请实现主屏幕。您不能禁用主页按钮。

android:launchMode ="标准|singleTop|singleTask |singleInstance"

检查单实例的活动启动模式@ [http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)。设备一次只能保存一个活动实例——只有一个这样的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:39:16.960

您可以隐藏它们或使它们变暗。看：

[http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility(int)](http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility(int))

# jquery - 循环幻灯片：仅自动显示一些指定的幻灯片

> ID：15971570
> 
> 赞同：0
> 
> 时间：2013-04-12T12:35:09.277
> 
> 标签：jquery, slideshow, cycle

我正在为我的幻灯片使用 Cycle 插件：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

幻灯片自动启动，并使用通过悬停触发的导航。

我希望幻灯片仅在指定的幻灯片中滑动，并且仅在它们悬停在导航中时才显示其他幻灯片。

我希望有人能理解。

编辑：我制作了一张图片。也许这更清楚地说明了我试图实现的目标。 [http://www.vrds.nl/foto/slide_example.jpg](http://www.vrds.nl/foto/slide_example.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:13:34.667

首先，这里有一个版本 2 的循环插件 ( [https://github.com/malsup/cycle2](https://github.com/malsup/cycle2) )

API：http: [//jquery.malsup.com/cycle2/api/](http://jquery.malsup.com/cycle2/api/)

为了做到这一点，你只需要挂钩循环后事件，当幻灯片在第三个时暂停幻灯片放映。

```
$( '#mySlideshow' ).on( 'cycle-after', function( event, opts ) {
   if (opts.currSlide==2) $('#mySlideshow').cycle('pause');  // pause on 3rd one
}); 
```

对于悬停，您可以将事件附加到它们。假设正确的部分是`li`元素（它们可以是在这里做出假设的任何东西）：

```
$('li').mouseover(function() {
   $('#mySlideshow').cycle('goto', $(this).index());  // something like this;
}); 
```

如果您不想使用插件的第二个最新版本，则逻辑完全相同。

# c - 使用管道 dup2 - c 语言执行多个命令

> ID：15971571
> 
> 赞同：0
> 
> 时间：2013-04-12T12:35:13.610
> 
> 标签：c, fork, dup2

我有一个执行 bash 命令的小 C 程序（一种 shell 程序）。

当用户发送这样的命令时：

> 1.  ls -l | grep .[c,h]$ | wc -l
>     
>     
> 2.  ls
>     
>     
> 3.  回声 | ls

我决定使用链表数据结构，这是执行的功能

```
int execute(command *c) {
//create new procces and execute command 

int numOfPipe = getNumOfPipes(c);   // gets how many commands there is seperated by | (for 1 command with no pipes. getNumOfPipes returns 1
int fds[numOfPipe][2];

pid_t pids[numOfPipe];
int i;
int status;

// create pipes
for( i = 0; i < numOfPipe; i++ ) {
    pipe(fds[i]);
}

i=0;

// p set to be the head of the list (first command)
Pipe* p = c->pl->head;  

// running throw all nodes
while(i<numOfPipe) {

    if ((pids[i] = fork()) < 0) {
            perror("fork");
            abort();
    } else if (pids[i] == 0) {
        // children processes

        // there is more then one command
        if (numOfPipe > 1) {    
            if (p==c->pl->head) // first node (will be first command)
                dup2(fds[i][1],STDOUT_FILENO);
            else if(p->next!=NULL) {    // not first / last command
                dup2(fds[i-1][0],STDIN_FILENO);
                dup2(fds[i][1],STDOUT_FILENO);

            } else if(p->next==NULL)    // last command
                dup2(fds[i-1][0],STDIN_FILENO);

            // closing all pipes
            int j;
            for( j = 0; j < numOfPipe; j++ ){
                close(fds[j][0]);
                close(fds[j][1]);
            }
        }

        // execute command
        execvp(p->params[0],p->params);

        // on execute error will print this messege and returns COMMAND_ERROR
        fprintf(stderr, "%s: command not found\n",p->params[0]);    
        destroyShell(c);
        free(c);
        exit(COMMAND_ERROR);    
    }

    // parent closing all end of pipes
    int j;
    for( j = 0; j < numOfPipe && numOfPipe > 1; j++ ){
        close(fds[j][0]);
        close(fds[j][1]);
    }

    // waiting each process
    while(wait(&status)!=pids[i]);

    // if the command is valid
    if (WIFEXITED(status) && WEXITSTATUS(status)==COMMAND_ERROR) {
        destroyShell(c);
        return WEXITSTATUS(status);
    }

    p=p->next;
    i++;

}

// closing all end of pipes (necessary here????)
int j;
for (j = 0; j < numOfPipe; j++) {
    close(fds[j][0]);
    close(fds[j][1]);
}

// returns all command's return code
if (WIFEXITED(status))
    return WEXITSTATUS(status);

return 0;
} 
```

到目前为止，这段代码以不可预知的方式工作，对于单个命令它的工作，对于薮猫有时它工作，有时不......在这段代码上花了很多时间，谷歌根本没有帮助！

几点注意事项：

1.  当用户发送命令时，例如：

> 回声|ls|123

返回码将是 COMMAND_ERROR 宏定义，并且应该是这样的错误信息：

> 123：找不到命令

但不知何故，我的代码会执行 'echo | ls' 并显示前 2 个命令的输出，之后将显示 '123' 命令的错误消息。同样对于一些错误的命令 - 它应该只显示它​​找到的第一个错误消息，并且它不应该继续执行下一个命令......

对于这个命令：

> ls -l | grep .[c,h]$ | wc -l

它似乎在无限循环中放养......

1.  命令 *c 保存链表，链表中的每个节点将是一个命令，每个节点将保留数组调用参数，数组调用参数保留命令的所有参数。示例：

> 回声 1234 | ls /家

```
 ___________                 ___________
|           |               |           |
| COMMAND 1 |      --->     | COMMAND 2 |
|___________|               |___________|
      |                           |
      |                           |
    ______                     _______
   |      |                   |       |
   | ECHO |                   |  LS   |
   |______|                   |_______|
   |      |                   |       |
   | 1234 |                   | /HOME |
   |______|                   |_______| 
```

我希望我很清楚并很好地解释了我的问题。非常感谢！

# python - 找出 10 个最常出现的词与形态

> ID：15971578
> 
> 赞同：3
> 
> 时间：2013-04-12T12:35:34.423
> 
> 标签：python, text-mining, text-analysis

请告诉我如何更好地解决这个问题。

我有俄语的文本，我想找到 10 个最常见**的词法词**。也许有任何开源库可以在**python**中解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:52:12.463

您可以使用俄语的 Python 形态分析器之一来规范化单词：

*   [https://github.com/kmike/pymorphy2](https://github.com/kmike/pymorphy2)
*   [https://github.com/kmike/pymorphy](https://github.com/kmike/pymorphy)
*   [https://github.com/irokez/Pyrus](https://github.com/irokez/Pyrus)

[在https://github.com/nltk/nltk](https://github.com/nltk/nltk)中还有一个用于俄语的 Porter 词干分析器。此外，您可以从命令行使用[http://company.yandex.ru/technologies/mystem/ 。](http://company.yandex.ru/technologies/mystem/)

我会为你的任务推荐 pymorphy2，但我有点偏颇:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:51:48.817

[PyStemmer](https://pypi.python.org/pypi/PyStemmer/)和[NLTK](http://nltk.org/)是这里最明显的两个库。

# c# - 我需要使用 lambda 表达式在实体框架上下文中查找记录的帮助

> ID：15971581
> 
> 赞同：1
> 
> 时间：2013-04-12T12:35:48.350
> 
> 标签：c#, entity-framework

我有一个实体框架上下文，其中包含一个名为“LengthDatas”的对象和一个名为“AbsoluteCounter”的属性/列，它是一个字符串值。字符串值表示十进制数。我想使用 lambda 表达式来查找最大的表达式。我将如何修改我的表达来实现这一点？

context.LengthDatas.Where(c => c.AbsoluteCounter.Last())

（我知道该列应该是十进制的，稍后我会将其转换为十进制值）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:38:11.437

使用`OrderByDescending`与`First(OrDefault)`组合：

```
context.LengthDatas.OrderByDescending(c => c.AbsoluteCounter).FirstOrDefault(); 
```

但是要真正获得十进制比较（而不是字符串），您必须定义自己的方法，如*[在组加入 linq 查询问题中将字符串转换为十进制](https://stackoverflow.com/questions/12216043/convert-string-to-decimal-in-group-join-linq-query)*的答案中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:39:46.473

您应该**先执行此操作（切换到十进制）**，然后您可以轻松地将查询更改为：

```
context.LengthDatas.OrderByDescending(c => c.AbsoluteCounter)) 
```

如果 absolutecounter 是十进制的，那么查询将对它进行排序，第一个元素将是最大的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:48:02.353

如果数据格式错误（前导空格、字母），则按字符串排序可能会失败。如果您有能力将数据带入内存，这应该可以消除漏洞：

```
 var result = db.LengthDatas
            .ToList()
            .Select(c =>
            {
                decimal d;
                Decimal.TryParse(c.AbsoluteCounter, out d);
                return d;
            })
            .Max(); 
```

但是，如果您对数据质量有信心，请使用

```
 var result1 = db.LengthDatas.Max(c => c.AbsoluteCounter); 
```

**附录**

为了完善关于在服务器上而不是在内存中将字符串转换为十进制的讨论，我尝试了上面提到的@MarcinJuraszek 技术。

我在 Code First 应用程序中进行测试，但通过向项目添加 ADO.Net 实体数据模型来添加 EDMX。有一些事情需要整理，但基本上以下类型的查询将起作用

```
var result = db.LengthDatas.Max(c => EdmxExtensions.DecimalParse(c.AbsoluteCounter)); 
```

Linq to Entities 生成的 SQL 是

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    MAX( CAST( [Extent1].[AbsoluteCounter] AS decimal(12,2))) AS [A1]
    FROM [dbo].[LengthDatas] AS [Extent1]
)  AS [GroupBy1] 
```

但是，应该注意，这不是使用 c# Decimal.TryParse 获得的强大转换。它将抛出格式错误的字符串异常。

# jquery - 使用jquery查找孩子并删除其父母？

> ID：15971582
> 
> 赞同：0
> 
> 时间：2013-04-12T12:35:58.020
> 
> 标签：jquery

我能够找到孩子但无法删除其父母，即 td 行

```
<tr><td><input type="checkbox"></td><td>Test Information</td></tr>

$(rowHtml).find('input').parent().remove(); 
```

我想要以下输出：

```
<tr><td>Test Information</td></tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:48:40.667

确保你关闭你的表达

`$(rowHtml).click(function() { $(this).parent().remove();});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:39:22.410

尝试这个：

```
$(rowHtml).closest('tr').find('td:first').find('input').remove(); 
```

我在 Jsfiddle 中添加了这个代码检查这个：http: [//jsfiddle.net/4E5zP/1/](http://jsfiddle.net/4E5zP/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:11:39.690

我刚刚向输入元素的父级添加了一个类名并将其删除

```
 <tr><td class="inputTD"><input type="checkbox"></td><td>Test Information</td></tr>

                   $(rowHTML).find(".inputTD").remove().end(); 
```

# c# - 扭曲自动批准的屏幕抓取

> ID：15971587
> 
> 赞同：0
> 
> 时间：2013-04-12T12:36:05.900
> 
> 标签：c#, screen-scraping, watin

我已获准从第三方网站上抓取一些数据。抓取效果很好，但是由于新的登录过程，现在出现了障碍。新的登录过程是智能卡、java 和 jQuery 的混合体。我现在的计划是使用 WatiN 之类的东西来完成最终目标。程序需要做什么...

打开 IE 以允许用户导航到证书登录。用户将使用他们的证书登录。

该应用程序将导航到登录后页面并开始抓取。使用 WatiN，我可以登录并打开登录后页面，但是在那之后我无法做太多事情。

我需要弄清楚的是一种方法来获取我的控制台应用程序，打开 IE 并（手动）登录，然后让爬虫在视觉上或在代码中接管 IE 窗口。理想情况下，我想从 WatiN 的登录后页面获取 cookie 和 HTML 并开始我的报废，由于爬虫中的页面更改，我需要存储 cookie。每次我尝试存储 cookie 时，都会收到错误消息“等待文档可用的超时”有什么想法吗？

```
Browser browser = new IE();
        browser.GoTo(url);

        browser.WaitForComplete(); //does not seem to work
        string _html = browser.Html;
        var cook= browser.Eval("document.cookie"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T04:37:02.070

我刚看到你的问题。我知道晚了，但它可能会帮助别人。我使用以下内容附加到打开的 Firefox 会话。我使用 Firefox，因为它不被用户用于浏览，并且不太可能更改其设置。

```
Sub AttachToOrOpenNewBrowser(ByRef ff As WatiN.Core.Browser)
    Try
        'If Browser is open then attach to browser
        ff = Browser.AttachTo(Of FireFox)(Find.First)
    Catch ex As Exception
        'Else open new Browser and attach to this NEW browser
        ff = New FireFox(Trim(url))
    End Try
End Sub 
```

我从我的代码中调用这个子。在调用它之前，我检查 ff “什么都不是”，以防它已经按如下方式附加：

```
Sub MainWork()
   Dim ff As WatiN.Core.Browser
   If ff Is Nothing Then AttachToOrOpenNewBrowser(ff)
   'Do your scrape
End Sub 
```

# node.js - 如何将参数传递给 child_process.exec 回调

> ID：15971589
> 
> 赞同：6
> 
> 时间：2013-04-12T12:36:17.260
> 
> 标签：node.js, child-process

有没有办法在我使用时将额外的参数传递给回调函数 `child_process.exec(cmd,callback)`？

根据文档，回调函数只接收error、stdout、sterr。

我最终可以有一个 unix 脚本，它可以获取额外的参数，运行命令，并将命令和参数的结果输出到标准输出，但也许有更好的方法来做到这一点

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T12:52:03.057

您可以在`exec`回调中调用另一个函数

```
var exec = require('child_process').exec
function(data, callback) {
  var cmd = 'ls'
  exec(cmd, function (err, stdout, stderr) {
    // call extraArgs with the "data" param and a callback as well
    extraArgs(err, stdout, stderr, data, callback) 
  })
}

function extraArgs(err, stdout, stderr, data, callback) {
  // do something interesting
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:24:47.423

最后，我有一个函数 my_exec ：

```
var exec = require('child_process').exec
function my_exec(cmd,data,callback)
{
    exec(cmd,function(err,stdout,stderr){
        callback(err,stdout,stderr,data)
    })
} 
```

谢谢你！

# sql - 基于工作角色的 Oracle 审计表

> ID：15971592
> 
> 赞同：1
> 
> 时间：2013-04-12T12:36:26.927
> 
> 标签：sql, database, oracle, audit

我已经设法在 Oracle 中创建了一个审计表，当记录被更新、删除或插入到员工表中时，它会审计记录。我也这样做了，因此它仅在办公时间以外（上午 9 点至下午 5 点）进行更改时审核记录。

如果您想查看此代码，请告诉我，但我只是想知道是否也可以仅根据工作角色审核记录。在员工表中有一个工作角色列，例如这样。

```
 Job_role
 Director
Security Guard II
Administration Manager
Warehouse Assistant I 
```

我只希望它审核例如保安人员或仓库助理所做的更改，因为这些工作角色不应该真正与员工数据库进行交互。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:31:42.087

您需要做的是将用户的工作描述存储在会话变量中。

为此，您使用 CREATE CONTEXT 命令声明命名空间。 [文档在这里。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_5002.htm#SQLRF01202)

然后你有[一个 AFTER-LOGON 数据库触发器](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_trigger.htm#LNPLS01374)，它查询 USERS 表并使用`DBMS_SESSION.set_context()`. [文档在这里。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sessio.htm#ARPLS054)

最后，当涉及到审计命令时，您可以读取存储的值`SYS_CONTEXT()` 并做出适当的决定：

```
if sys_context('AUDIT_INFO', 'JOB_DESCR') = 'Warehouse Assistant I'   
then
    call_your_audit_proc(.....);
end if; 
```

# objective-c - 在 Linux 上编译 Objective-C 应用程序

> ID：15971593
> 
> 赞同：7
> 
> 时间：2013-04-12T12:36:31.200
> 
> 标签：objective-c, linux, macos, gcc, compiler-construction

我使用 Objective-C 在 XCode 中编写了一个命令行应用程序。当添加到我的`/usr/local/bin`路径时，在 OS X 中可以正常工作。但是，我想让二进制文件在 Linux 上工作。

该二进制文件依赖于一个 Objective-C 框架。我该怎么做呢？或者甚至有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T12:47:43.063

是的，应该可以通过安装 GNUstep：[http ://www.gnustep.org/](http://www.gnustep.org/)

GNU 编译器集合支持 Objective-C 的基础知识。为了充分利用 Objective-C 和 Linux 上的 Cocoa /openStep 环境的强大功能，并使用本书中涵盖的许多示例，有必要安装 gcc、gcc Objective-C 支持包和GNUstep 环境。

gcc Objective-C 支持可以通过安装 gcc-objc 包安装在 Linux 上，该包可用于所有 Linux 发行版。然而，安装 GNUstep 有两种不同的路径。在那些为其提供了预构建的 GNUstep 软件包的 Linux 发行版上，这只是发出适当的命令来安装 GNUstep 的问题。在没有预构建软件包的 Linux 发行版上，该过程包括下载 GNUstep 源代码，然后手动构建和安装软件包。

看看这篇文章（gnu）一步解释这一步:) [http://www.techotopia.com/index.php/Installing_and_Using_GNUstep_and_Objective-C_on_Linux](http://www.techotopia.com/index.php/Installing_and_Using_GNUstep_and_Objective-C_on_Linux)

# deployment - 将 Azure 解决方案从 Dev 部署到测试服务器

> ID：15971596
> 
> 赞同：0
> 
> 时间：2013-04-12T12:36:44.967
> 
> 标签：deployment, azure

我正在 VS2012 上开发一个 Windows azure 解决方案，在该解决方案下我有许多项目，并且我有一个启动项目，即 xxx.Local.Client

我正在使用 Azure 模拟器来模拟 Windows azure 环境。我需要将解决方案移动到测试服务器，同时还必须将其部署在模拟器上。我打包了我的项目，但仍然不知道我应该将哪些文件移动到测试服务器，我应该在哪里托管文件以及我应该如何配置服务器以运行应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:42:42.387

不太清楚您所说的*测试服务器*是什么意思，但是......本地模拟器与您的开发环境（您已经在使用）在同一台机器上运行。然后是您可以部署到的 Windows Azure 云服务、虚拟机或网站。

如果您指的是本地网络中的独立服务器用于 Azure 测试平台，则该配置不存在（类似于 Azure 设备机器）。

根据您测试的内容，您可以将代码推送到 Azure 网站（假设您没有运行任何自定义启动脚本或尝试修改虚拟机），并且您可以使用网站的免费层。如果您需要更多自定义选项，您可以部署到云服务（Visual Studio 可以很容易地做到这一点）。

# jquery - 用外部 html 文件中的 div 替换 div

> ID：15971597
> 
> 赞同：-3
> 
> 时间：2013-04-12T12:36:51.273
> 
> 标签：jquery, html

`div`我有一个 html 文件，我想用外部 html 文件中的内容\整个 div替换其中的某个内容。

我正在尝试用 jquery 来做，但出了点问题。这是我到目前为止所得到的：

```
$("#originHtml").replaceWith(external.html #temp); 
```

以及各种与`' " '`.

代码是：

```
$("#originDivId").replaceWith(external.html #temp); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:38:51.520

您必须使用 jQuery [.load()](http://api.jquery.com/load/)函数从不同的文件加载 div。

```
$("#originHTML").load('external.html #temp'); 
```

更新：

```
$.ajax({
    url: 'external.html',
    dataType: 'html',
    success: function(html) {
        var targetdiv = $('#temp', $(html));
        $('#originHTML').replaceWith(targetdiv);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:39:24.883

您可以使用 ajax 从 external.html 获取 html。

```
$(document).ready(function(){
    $.get("external.html", function(data){
        $("#originHtml").replaceWith($(data).find("#temp"));
    });
}); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:42:43.560

要从另一个文件加载内容，您必须使用 JQuery ajax 功能。

```
$("#originHtml").load('external.html #temp');

$(document).ready(function(){
    $("#originHtml").load('external.html #temp');
}); 
```

# jsf - 如何从 src 中的 Java 类内部引用 WebContent 中的文件

> ID：15971599
> 
> 赞同：1
> 
> 时间：2013-04-12T12:36:59.490
> 
> 标签：jsf

我有一个具有以下文件结构的 JSF 应用程序：

```
ReportGeneratorJSF
 |-- src
 |    `-- Abc.java
 |-- WebContent
 |    `-- FormattedExcel
 |         `-- abc.xls
 : 
```

在我的`Abc`课堂上，我需要将 Excel 文件称为

```
File file = new File("location of abc.xls"); 
```

但是，无论我尝试什么路径，它都是`null`. 我如何找出正确的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:41:56.417

它`java.io.File`直接在本地磁盘文件系统上工作，并且完全不知道它运行的 Java (EE) 应用程序上下文。所以它绝对不知道应用程序“root”位于`C:/some/path/to/ReportGeneratorJSF`. 它将假定每个相对路径都相对于“当前工作目录”，即在 Java 虚拟机启动时当前打开的目录。

您永远不应该依赖相对路径`java.io.File`来得到正确对待。时期。

鉴于您已将其作为 JSF webapp 资源保存在项目的 webcontent 文件夹中，您应该改为使用它[`ExternalContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResourceAsStream%28java.lang.String%29)来获取`InputStream`它（最终，您想创建一个`FileInputStream`out of ，对`File`吧？不然怎么办？`File`有用？）。它采用相对于 webcontent 根目录的路径，而不是磁盘文件系统的当前工作目录。

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
InputStream input = ec.getResourceAsStream("/FormattedExcel/abc.xls");
// ... 
```

### 也可以看看：

*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream/)

# css - 如果有多个，悬停效果上的 CSS 将无法正常工作 里面的

> ID：15971600
> 
> 赞同：2
> 
> 时间：2013-04-12T12:36:59.953
> 
> 标签：css, background, html-table, hover, highlight

我有一个表格列，里面有多个 div，以适应图标、标题和描述文本。此外，在鼠标悬停时，我需要提供突出显示/叠加效果，突出显示所有列，包括 div 图像、标题和描述文本。

这是HTML

```
 <td>
   <div style="display:inline-block; border:1px solid red">left</div>
    <div style="display:inline-block">
    <div style="display:inline-block; border:1px solid blue">top left</div>
    <div style="display:inline-block; border:1px solid green">top right</div>
    <div>bottom </div>  
   </div>
 </td> 
```

当我使用简单的 CSS 效果更改列的背景时，如下所示，效果仅显示在单个 div 上，而不显示在整个表格列上。我希望如果任何 div 鼠标悬停，所有列都应该突出显示。

CSS 代码

```
#MyTable td :hover {
background: #cccccc;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T12:39:16.620

你之前有一个额外的空间`:hover`：试试

```
#MyTable td:hover { 
   background-color: #ccc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:53:43.823

看来您需要在悬停之前删除空间

```
#MyTable td:hover {
background: #cccccc;
} 
```

在这里看小提琴：http: [//jsfiddle.net/wooder89/eUCG5/](http://jsfiddle.net/wooder89/eUCG5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:41:23.770

```
#MyTable td:hover {
  background: #cccccc;
} 
```

我认为问题是你应该在“td”之后使用“：”

# rest - 以 RESTful 方式进行适当的数据交换

> ID：15971605
> 
> 赞同：0
> 
> 时间：2013-04-12T12:37:11.050
> 
> 标签：rest, restful-url, restful-architecture

在服务器端（RESTful 服务器），决定如何读取输入参数和数据的主要标准是什么？

`Accept`或者`Content-Type`

如果“客户端”（JS）向我的 RESTful 服务发送 POST 请求和编码为通常表单数据的数据（应该保存的内容），他应该使用什么样的标题来帮助我如何读取他的数据以及发送什么样的答案他回来了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:51:17.873

**内容类型**

```
Content-Type specifies the media type of the underlying data.
....
Any HTTP/1.1 message containing an entity-body SHOULD include a
Content-Type header field defining the media type of that body. If
and only if the media type is not given by a Content-Type field, the
recipient MAY attempt to guess the media type via inspection of its
content and/or the name extension(s) of the URI used to identify the
resource. If the media type remains unknown, the recipient SHOULD
treat it as type "application/octet-stream". 
```

如果客户端发送 HTML 表单数据，则正确的请求内容类型标头是 application/x-www-url-form-encoded 或 multipart/form-data。它取决于 HTML 表单的 enctype 属性。

**接受**

```
 The Accept request-header field can be used to specify certain media
 types which are acceptable for the response. 
```

因此，服务器最终使用 Content-Type 请求标头来决定传入请求正文的表示形式，并使用 Accept 请求标头来决定将什么表示形式作为响应正文发送回客户端。请注意，响应也应包含 Content-Type 标头，但它仅表示已选择的响应主体的表示。

见[https://www.rfc-editor.org/rfc/rfc2616](https://www.rfc-editor.org/rfc/rfc2616)

# c# - 在 DataTable.WriteXML 中包含 XML 声明

> ID：15971609
> 
> 赞同：0
> 
> 时间：2013-04-12T12:37:19.103
> 
> 标签：c#, datatable

我需要将 DataTable 转换为 XML 字符串。
我正在使用以下内容进行转换：

```
 StringWriter sw = new StringWriter();
  tblXml.WriteXml(sw, XmlWriteMode.WriteSchema);
  string result = sw.ToString(); 
```

我正在获取 XML 字符串，但声明部分没有到来。

```
<?xml version="1.0" encoding="utf-8"?> 
```

如何包括它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T15:07:58.463

使用[XmlTextWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx)和`WriteStartDocument()`.

```
XmlTextWriter xmlWriter = new XmlTextWriter(outputStream, Encoding.UTF8);
xmlWriter.WriteStartDocument();
tblXml.WriteXml(xmlWriter);
string result = outputStream.ToString(); 
```

# javascript - 在图像单击上显示/隐藏 div 不起作用

> ID：15971616
> 
> 赞同：0
> 
> 时间：2013-04-12T12:37:26.443
> 
> 标签：javascript, jquery, slider, toggle

如果您访问[http://oandg.co.uk.s156312.gridserver.com/#work](http://oandg.co.uk.s156312.gridserver.com/#work)并选择一个投资组合项目并单击“更多”，您将看到一个图像和一个角落带有小“i”的文本框.

我想这样做，如果您单击小“我”，文本框会消失，如果再次单击它会显示。

我试过了，但它什么也没做：

```
$(function() {
$(".openBoxButton").click(function() {
      $('#colorbox').fadeIn(1200);
       $.colorbox(); 
         $('.rsABlock img.info').click(function(e) {
          e.preventDefault();
          $('.caption-background').toggleClass('hidden');
       });
  });
}); 
```

HTML：

```
<!-- Slide One -->
<div id="simple-slider-one" class="royalSlider rsDefault" style="width: 100%;">
    <a class="rsImg" href="images/Froosh/froosh1.jpg">  
        <div class="rsABlock">
            <img src="images/info.svg" alt="" class="info">
            <div class="caption-background">
                <h4>What we did for them</h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem distinctio deserunt nostrum illum dolor obcaecati eaque ipsam! Distinctio, ipsa accusamus saepe temporibus ex pariatur possimus quidem sapiente obcaecati labore iusto.</p>
        </div>
        </div>
    </a>
    <a class="rsImg" href="images/Froosh/froosh2.jpg">  
        <div class="rsABlock">
            <img src="images/info.svg" alt="" class="info">
            <div class="caption-background">
                <h4>What we did for them</h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem distinctio deserunt nostrum illum dolor obcaecati eaque ipsam! Distinctio, ipsa accusamus saepe temporibus ex pariatur possimus quidem sapiente obcaecati labore iusto.</p>
        </div>
        </div>
    </a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:48:58.063

```
$(function () {
    $(".openBoxButton").click(function () {
        $('#colorbox').fadeIn(1200);
        $.colorbox();
    });

    $('.rsABlock').on('click', 'img.info', function (e) {
        e.preventDefault();
        $('.caption-background').toggleClass('hidden');
    });
}); 
```

编辑：只是为了对此添加一些解释，您之前在每次单击“.openBoxButton”类时都添加了一个单击处理程序 - 现在我没有在您的页面中搜索该类，但将其放在该函数之外可以防止事件处理程序被反复添加。

根据评论进行编辑：我使用开发人员工具进行了测试，并且可以正常工作。#colorBox 似乎不起作用 - 可能添加/删除了循环或其他东西。

```
 $(document).on('click', 'img.info', function (e) {
    e.preventDefault();
    $('.caption-background').toggleClass('hidden');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:47:03.363

是的......你可以用 CSS 做到这一点：

```
<!-- HTML -->
<div class="container">
    <img src="http://placekitten.com/285/275" class="portfolio" alt="">
    <div class="mask">
         <h2>Froosh</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem nostrum     porro iste excepturi vel ducimus cumque minima rem voluptates cum!</p>
    </div>
</div> 
```

* * *

```
/* CSS */
.container {
    /* Some width */
    width: 200px;
    display: inline-block;
    position: relative;
    border: 3px solid #ccc;
}
.container img {
    display: block;
    width: 100%;
}
.container .mask {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    /* some color */
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    -webkit-transition: all 0.3s ease-out;
    /* Chrome 1-25, Safari 3.2+ */
    -moz-transition: all 0.3s ease-out;
    /* Firefox 4-15 */
    -o-transition: all 0.3s ease-out;
    /* Opera 10.50–12.00 */
    transition: all 0.3s ease-out;
    /* Chrome 26, Firefox 16+, IE 10+, Opera 12.10+ */
}
.container:hover .mask {
    opacity: 1;
} 
```

有一个 JsFiddle：http: [//jsfiddle.net/KaCHN/1/](http://jsfiddle.net/KaCHN/1/)

**取决于您在`.mask`元素上添加一些样式**

# ms-access - vba 中的 OpenFileDialog 以字符串形式返回目录

> ID：15971619
> 
> 赞同：4
> 
> 时间：2013-04-12T12:37:41.200
> 
> 标签：ms-access, ms-access-2007, vba

我一直在到处寻找，我很惊讶这在 VBA 中作为一个函数并不容易获得。

我需要一个函数，当调用它时，打开一个文件对话框，人们可以在其中选择 1 个文件（不是更多，只有 1 个），然后该函数将文件的位置（包括文件名+扩展名）作为字符串返回。

起初我想：“这有多难，我在 VB.NET 中真的很简单..”

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:42:20.903

你的意思是像htis？

```
Sub Sample()
    Dim ofD As Object
    Dim Fil

    Set ofD = Application.FileDialog(3)

    ofD.AllowMultiSelect = False
    ofD.Show

    For Each Fil In ofD.SelectedItems
        MsgBox Fil
    Next
End Sub 
```

如果是，上面的`For`循环很有用`AllowMultiSelect``True`

如果只有一个文件，这是另一个示例。

```
Sub Sample()
    Dim ofD As Object
    Dim Fil

    Set ofD = Application.FileDialog(3)

    ofD.AllowMultiSelect = False

    If ofD.Show = False Then
        MsgBox "User Pressed Cancel"
    Else
        MsgBox ofD.SelectedItems(1)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:41:23.183

本周早些时候我在这里使用的解决方案遇到了同样的问题。

[http://www.mrexcel.com/forum/excel-questions/294728-browse-folder-visual-basic-applications.html](http://www.mrexcel.com/forum/excel-questions/294728-browse-folder-visual-basic-applications.html)

希望对你也有帮助。

# c# - 从同一 LINQ 查询中删除并返回 xml 块

> ID：15971625
> 
> 赞同：0
> 
> 时间：2013-04-12T12:38:10.420
> 
> 标签：c#, linq, linq-to-xml

我有以下xml

```
<Books>
    <Book>
        <Name>Let Us C</Name>
        <Price>250</Price>
        <ID>234</ID>
    </Book>
    <Book>
        <Name>Da Vinci Code</Name>
        <Price>500</Price>
        <ID>38</ID>
    </Book>

    <Book>
        <Name>Data Structures through C++</Name>
        <Price>250</Price>
        <ID>234</ID>
    </Book>

</Books> 
```

我需要删除所有具有给定 ID（比如 234）的书籍，并且 LINQ 查询应该将已删除书籍的 ID 和名称作为 keyValue 对返回给我。是否可以使用相同的 LINQ 查询来完成？

我写了以下内容来删除 ID 为 38 的书。但是我无法获得 ID 和名称，而无需再次对其进行迭代。

```
var idsToRemove  = new List<int>{{38}};
XDocument xmlDoc = XDocument.Load("sample.xml");

xmlDoc.Descendants("Book")
                .Where(
                    Book =>
                    (Book.Element("ID") != null
                    && idsToRemove.Contains(Convert.ToInt32((string) Book.Element("ID").Value)))).Select(Book => Book).Remove(); 
```

**编辑1：**

为给定书籍 ID 选择键值对的代码。

```
var result = xmlDoc.Descendants("Book")
                .Where(
                    Book =>
                    (Book.Element("ID") != null
                    && idsToRemove.Contains(Convert.ToInt32((string) Book.Element("ID").Value)))).Select(Book => new KeyValuePair<int,string>( Convert.ToInt32(Book.Element("ID").Value),(string)Book.Element("Name"))); 
```

如何将两者与单个 LINQ 查询合并

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:40:26.110

为什么不保存查询结果并`Remove`在该变量上执行？

```
var booksToRemove =
    xmlDoc.Descendants("Book")
          .Where(Book =>
              (Book.Element("ID") != null && 
              idsToRemove.Contains(Convert.ToInt32((string)Book.Element("ID").Value))))
          .ToArray();

booksToRemove.Remove();

var removedBooks = booksToRemove.Select(x => new
                                        {
                                            ID = (string)x.Element("ID"), 
                                            Name = (string)x.Element("Name")
                                        }).ToArray(); 
```

# css - 在 Rails 中预加载 SASS/CSS 背景图像

> ID：15971632
> 
> 赞同：5
> 
> 时间：2013-04-12T12:38:25.680
> 
> 标签：css, ruby-on-rails, sass

```
body
    &:after
      content: url('image1.jpg') url('image2.jpg') url('image3.jpg') url('image4.jpg') 
      display:none 
```

我正在使用上面的代码来预加载背景图像。但是，我的 display:none 似乎不起作用。所有图像正在加载并且是可见的。这是浏览器特有的东西吗？我在 mac 上使用 firefox 20 还是错误的 css/sass 语法？我需要该解决方案与多浏览器兼容。我只想以干净简单的方式预加载我的所有图像。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:44:45.290

我有一个解决方案：

我忘了在 display 和 none 之间放一个空格

因此，

```
display:none 
```

不起作用，但是

```
display: none 
```

确实有效。

有时这是最小的事情。

# java - 如何在透明 JFrame 上使用paintComponent 重置图形？

> ID：15971633
> 
> 赞同：0
> 
> 时间：2013-04-12T12:38:33.133
> 
> 标签：java, swing, graphics, jframe, paint

通常当我想制作动画时，我通过绘制矩形来重置所有图形屏幕：

```
@Override
public void paintComponent(Graphics g) {
    g.setColor(Color.white);
    g.fillRect(0,0,1000,1000);

    // now im drawing the animation on empty screen
} 
```

在我绘制了 Rect 之后，我可以在空屏幕上绘制动画，这样动画就会移动而不是传播。现在我想在透明 JFrame 上绘制动画。如何从 Precedings 图纸中清空组件，并且仍然保持 JFrame 透明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:16:48.667

1.  确保您的组件是不透明的
2.  为了使透明度起作用，您不需要在其中做任何事情`paintComponent()`（尤其是不要用白色填充矩形）
3.  每当您想重置所有内容时，请设置标志或条件并调用`repaint()`. 在 中`paintComponent()`，检查该标志或条件，如果为真，则不绘制任何内容。

这是一个半透明框架的小演示，它在鼠标所到之处绘制一条线。每当您单击框架时，它都会删除所有内容。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.net.MalformedURLException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestTransparentFrame {

    private class PaintPanel extends JPanel {
        private List<Point> points = new ArrayList<Point>();

        public PaintPanel() {
            setOpaque(false);
            MouseAdapter adapter = new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    points.clear();
                    repaint();
                }

                @Override
                public void mouseMoved(MouseEvent e) {
                    points.add(e.getPoint());
                    repaint();
                }
            };
            addMouseListener(adapter);
            addMouseMotionListener(adapter);
            setBorder(BorderFactory.createLineBorder(Color.GREEN));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (points.size() > 1) {
                g.setColor(Color.RED);
                Point p1 = points.get(0);

                for (int i = 1; i < points.size(); i++) {
                    Point p2 = points.get(i);
                    g.drawLine(p1.x, p1.y, p2.x, p2.y);
                    p1 = p2;
                }
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    protected void createAndShowGUI() throws MalformedURLException, IOException {
        JFrame frame = new JFrame("Test transparent painting");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setUndecorated(true);
        frame.setBackground(new Color(0, 0, 0, 50));
        frame.add(new PaintPanel());
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new TestTransparentFrame().createAndShowGUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

    }

} 
```

# c# - C# 将大型结构编组到 c DLL

> ID：15971637
> 
> 赞同：3
> 
> 时间：2013-04-12T12:38:38.063
> 
> 标签：c#, dll, struct, marshalling

我正在尝试访问某些 DLL 导出的函数（用于访问某些特定硬件）。使用 DLLImport 和简单数据类型对函数的访问是有效的。但是对于某些功能，我需要传递一些相当大的结构。为了克服自动编组的大小限制，我想出了使用 IntPtr。

```
typedef struct
{
    double value[MemDepth];
    double offset[MemDepth];
    unsigned long start;
    BOOL active;
} RegisterData;

typedef struct 
{
    RegisterData a,b,c,d,e,f,g,h;
    BOOL active;
    BOOL test;
} Register; 
```

这就是我尝试将它们放入 C# 的方式：

```
[StructLayout(LayoutKind.Sequential)]
public struct RegisterData
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = defines.MemDepth)]
    public double[] value;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst = defines.MemDepth)]
    public double[] offset;

    UInt32 start;

    [MarshalAs(UnmanagedType.U1)]
    bool active;
}

[StructLayout(LayoutKind.Sequential)]
public struct Register
{
    RegisterData a,b,c,d,e,f,g,h;
    [MarshalAs(UnmanagedType.U1)]
    bool active;
    [MarshalAs(UnmanagedType.U1)]
    bool test;
} 
```

我试图调用的函数在 DLL 中如下所示：

```
long ResetControl(Register* control); 
```

我翻译成：

```
[DllImport("test.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern Int32 Reset(IntPtr control); 
```

然后我尝试像这样调用函数：

```
public Int32 lib_Reset(ref Register control)
{
    int size = System.Runtime.InteropServices.Marshal.SizeOf(control);

    //IntPtr ptr = System.Runtime.InteropServices.Marshal.FreeHGlobal(size);
    IntPtr ptr = System.Runtime.InteropServices.Marshal.AllocCoTaskMem(size);

    System.Console.WriteLine("requested size of: " + size); // shows correct

    System.Runtime.InteropServices.Marshal.StructureToPtr(control, ptr, false);

    System.Console.WriteLine("mem done");

    Int32 ret = Reset(ptr);

    System.Console.WriteLine("called reset");

    System.Runtime.InteropServices.Marshal.PtrToStructure(ptr, control);
    System.Console.WriteLine("transfered back");

    System.Runtime.InteropServices.Marshal.FreeCoTaskMem(ptr);
    //System.Runtime.InteropServices.Marshal.FreeHGlobal(ptr);

    System.Console.WriteLine("freeed mem");
    ptr = IntPtr.Zero;

    return ret;
} 
```

这会导致“A 堆已损坏”。调用 DLL 重置函数时。我已经尝试了不同的方法，但没有奏效。

**编辑：**

我现在通过使用 IntPtr 方法清理和重建项目来让它工作。它不能直接使用“ref”。使用“ref”时，我总是得到：

```
 Cannot marshal 'parameter #1': Internal limitation: structure is too complex or too large. 
```

我现在执行以下操作以从结构转换为指针并返回：

```
public Int32 lib_Reset(ref Register control)
{
    int size = Marshal.SizeOf(control);
    IntPtr ptr = Marshal.FreeHGlobal(size);
    Marshal.StructureToPtr(control, ptr, false);
    Int32 ret = Reset(ptr);
    control = (Register)Marshal.PtrToStructure(ptr, typeof(control));
    Marshal.FreeHGlobal(ptr);
    ptr = IntPtr.Zero;
    return ret;
} 
```

这样我就可以调用重置，但似乎这些功能没有做任何事情。

```
Register reg = new Register();

reg.active = true;
System.Console.WriteLine(reg.active);   // .active = true
lib_Reset(ref reg);         // should set .active = false
System.Console.WriteLine(reg.active);   // .active = true 
```

函数 Reset 应该初始化寄存器结构。从而将 active 设置为 false。但在上面显示的代码中，active 的值不会改变。我用整数值测试了相同的值。它也没有改变。

我希望这里的任何人都可以指出我访问数据的正确方向。

谢谢你，托比亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:58:32.237

现在它起作用了。清理和重建项目起到了作用。它现在正在使用 IntPtr 方法。但是重置功能不会影响结构中的值。

从 DLL 的代码中，我知道元素应该被初始化为一些值。但是元素的值从调用之前到调用之后不会改变：

```
Register reg = new Register();

reg.active = true;
System.Console.WriteLine(reg.active);   // .active = true
lib_Reset(ref reg);         // should set .active = false
System.Console.WriteLine(reg.active);   // .active = true 
```

其他元素也是如此。从结构到指针再从指针到结构的转换有什么问题吗？

如果我取一些整数类型的值，并在调用前将其设置为 4，则调用后将是 4。因此保留了之前设置的值。

# jquery - 当只有一张幻灯片时，滑块显示 2 张幻灯片的分页

> ID：15971639
> 
> 赞同：0
> 
> 时间：2013-04-12T12:38:53.737
> 
> 标签：jquery, html, css

在下一页的底部，在标题“一些客户” [http://andrewmarc.co.uk/](http://andrewmarc.co.uk/)下 ，当仅显示违规幻灯片时，滑块分页为 2 张幻灯片（在桌面视口大小上）

即使滑块上的图像以 100 像素宽显示，滑块仍保持原始宽度并为 2 张幻灯片分页

有没有办法解决这个问题

# android - Android 闪屏和密码

> ID：15971642
> 
> 赞同：1
> 
> 时间：2013-04-12T12:39:03.313
> 
> 标签：android, passwords, splash-screen

我正在尝试添加密码（我不使用 alertDialog）和闪屏（这是我的问题）密码在询问时有效，但在此之前我得到了闪屏的崩溃原因，该闪屏不起作用。

我为启动画面制作了一个 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
android:layout_height="fill_parent" 
android:layout_width="fill_parent" 
android:orientation="vertical" 
xmlns:android="http://schemas.android.com/apk/res/android">  
<ImageView android:id="@+id/splashscreen" 
android:layout_gravity="center" 
android:layout_height="fill_parent" 
android:layout_width="wrap_content" 
android:src="@drawable/untitled">  
</ImageView></LinearLayout> 
```

当我尝试添加命令以在主程序中获取启动画面时

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);                 
    alert.setTitle("Login");  
    alert.setMessage("Enter Pin :");  
    alert.setCancelable(false);

    setContentView(R.layout.splashscreen);

     // Set an EditText view to get user input   
     final EditText input = new EditText(this); 
     alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
        public void onClick(DialogInterface dialog, int whichButton) {  
            String value = input.getText().toString();
            String compar = "123456";
                if(value.equals(compar))
                {
                    Log.d( TAG, "Pin Value : " + value);
                   copiezmView.setVisibility(View.VISIBLE);
                }    
                else
                {
                    Toast.makeText(getApplicationContext(), "Acces Denied", Toast.LENGTH_SHORT).show();
                    alerta();
                } 
```

我得到这个崩溃

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{///////}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

那么我做错了什么？闪屏的目的是我想在 AlertDialog 后面和后面的东西前面，这样用户如果不知道密码就看不到后面的内容（我用 setView 做过，但这只适用于 linearLayout而不是在 PreferenceScreen

完整的 logCat

```
04-12 13:09:49.734: E/AndroidRuntime(1731): FATAL EXCEPTION: main
04-12 13:09:49.734: E/AndroidRuntime(1731): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.zegoggles.smssync/com.zegoggles.smssync.SmsSync}:    java.lang.RuntimeException: Your content must have a ListView whose id attribute is   'android.R.id.list'
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.os.Looper.loop(Looper.java:137)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.ActivityThread.main(ActivityThread.java:5039)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at    java.lang.reflect.Method.invoke(Method.java:511)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at dalvik.system.NativeStart.main(Native Method)
04-12 13:09:49.734: E/AndroidRuntime(1731): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.ListActivity.onContentChanged(ListActivity.java:243)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.preference.PreferenceActivity.onContentChanged(PreferenceActivity.java:959)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.Activity.setContentView(Activity.java:1881)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at com.zegoggles.smssync.SmsSync.alerta(SmsSync.java:132)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at com.zegoggles.smssync.SmsSync.onCreate(SmsSync.java:118)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at android.app.Activity.performCreate(Activity.java:5104)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at     android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-12 13:09:49.734: E/AndroidRuntime(1731):     at       android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-12 13:09:49.734: E/AndroidRuntime(1731):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:42:19.543

我可以从 1 行崩溃输出中看出，你有一个`ListActivity`. 而且您还没有将`ListView`id 指定为`@android:id/list`.

将列表视图 ID 设为

```
android:id="@android:id/list" 
```

你的问题就会得到解决。希望能帮助到你。

# codeigniter - 代码点火器打印数组大小

> ID：15971648
> 
> 赞同：0
> 
> 时间：2013-04-12T12:39:12.107
> 
> 标签：codeigniter

在我的控制器中，我将值传递给这样的数组`$this->load->view('example',$data[test]);`

在我看来，我正在尝试获取测试的数组大小，所以我这样做了，

`echo count($test);`我的数据库中有 10 行，但我的数组正在打印 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:42:02.110

我认为您错过`$`了您给出的代码。试试这个，

```
echo count($test); 
```

# asp.net-mvc - 在类属性中使用迭代对象

> ID：15971651
> 
> 赞同：0
> 
> 时间：2013-04-12T12:39:19.593
> 
> 标签：asp.net-mvc, razor

我有这个代码：

```
@foreach (var know in Model.Items)
{

    <span class="cloud@know.Value"></span>
} 
```

我想要做的是在跨度上添加一个不同的（css-）类，具体取决于 Know 对象的值，所以我拥有的类是`cloud1`,`cloud2`等`cloud3`。

但是在我的代码中，实际上是对文本`cloud@know.Value`进行了解析；没有`know.value`被替换。

当我输入 this 时它确实有效`cloud_@know.Value`。

有没有办法在不给类名添加下划线的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:42:01.717

您需要`know.Value`用括号括起来：

```
@foreach (var know in Model.Items)
{
    <span class="cloud@(know.Value)"></span>
} 
```

# google-maps-api-3 - Google Places API 返回的opening_hours.periods.open/close.nextDate 下的nextDate 是什么意思？

> ID：15971655
> 
> 赞同：2
> 
> 时间：2013-04-12T12:39:28.410
> 
> 标签：google-maps-api-3, google-places-api

对 Google Places API 的查询返回的 Place Details 会返回一个地点的 opening_hours。在 opening_hours>periods>open/close 下有一个名为 nextDate 的键，它是一个奇怪的数字——它对应什么？

# ios - When my app enters foreground, view is not reloaded with refresh data

> ID：15971659
> 
> 赞同：3
> 
> 时间：2013-04-12T12:39:38.413
> 
> 标签：ios, xcode

I have a problem regarding reload of view.

I use tabbar in my application. When I press home button and my app is in background. Now my problem is start now. I Want that every time my first tab is display. So, every time I get 1st tabbar's view. But When I get 1st tabbar's view, I call `viewDidAppear()` of 1st tabar's viewController in AppDelegate like below:

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{

     self.tabBarController.selectedViewController=[self.tabBarController.viewControllers objectAtIndex:0];
     [navigationController1 popToRootViewControllerAnimated:YES];
     [navigationController2 popToRootViewControllerAnimated:YES];
     [navigationController3 popToRootViewControllerAnimated:YES];
     [navigationController4 popToRootViewControllerAnimated:YES];
     [navigationController5 popToRootViewControllerAnimated:YES];

     simpleTableViewController *s = [[simpleTableViewController alloc]initWithNibName:@"simpleTableViewController" bundle:nil];
     [s viewDidAppear:YES];
} 
```

So,`viewDidAppear()` is called and data is loaded and log is printed. But view is not reloaded or refreshed. Means there is not any effect in tableview. Data which is loaded from server is displayed in tableview.

I use the following code for reload or refresh view:

```
 [self.view setNeedsLayout];
        [self.view setNeedsDisplay];
        [tabledata reloadData]; 
```

But it is not effected.

Thanks in advance.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T12:51:38.057

When you're calling:

```
simpleTableViewController *s = [[simpleTableViewController alloc]initWithNibName:@"simpleTableViewController" bundle:nil];
[s viewDidAppear:YES]; 
```

You are simply creating a **new** instance of that view controller and attempting asking it to refresh it's data. Not the view controller that is already in the navigation stack.

I suggest that you add your `simpleTableViewController` as an observer for the "application did become active" or "will enter foreground" notification. E.g.:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillEnterForeground:) name:UIApplicationWillEnterForegroundNotification object:nil];
} 
```

Then in the notification handler you can reload your data:

```
- (void)applicationWillEnterForeground:(NSNotification *)notification {
    [self reloadDataFromWeb];
    [self.tableView reloadData];
} 
```

Don't forget to remove the observer in the `simpleTableViewController`'s `dealloc` method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:43:40.443

Do not call `viewDidAppear`. Show your view controller and iOS will call your `viewDidAppear` for you when the view truly appears.

# c++ - 重新实现 QThread 的 start()

> ID：15971660
> 
> 赞同：1
> 
> 时间：2013-04-12T12:39:46.233
> 
> 标签：c++, qt

我正在Qt中练习线程。我重新实现`run()`（尽管不推荐）并且一切正常。

现在我想`run()`通过让它传递一个变量来添加更多功能：`run(int i)`。此外，我希望`start()`调用 run 将变量传递给`run(int i)`: `start(int j)`。

我认为以以下方式重新实现 start 应该可以工作：（Zaehler 是 QThread）

`void Zaehler::start(int ZaehlerIndex) { run(ZaehlerIndex), terminate(); }`

好吧，它没有。我的 GUI 在启动线程时冻结。

**问题：** 我知道，应该避免弄乱启动和运行，但是有没有办法做到这一点？难道我做错了什么？

备注：我查看了 qthread.cpp 以查看如何`start()`实现，但我发现的只是

`\sa run(), terminate()`被注释掉了！所以它实际上甚至不应该工作！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:57:14.967

如果你想在线程内启动一个函数并传递一些参数这个函数我推荐这个方法：

```
class MyWorker: public QThread
{
  Q_OBJECT
public:
    MyWorker()
    {
        start();
    }

    virtual ~MyWorker()
    {
        quit();
        wait();
    }

    // your function to call inside thread
    Q_INVOKABLE void doSomeWork(int data)
    {
        // check if we called from another thread
        if (QThread::currentThread() != this)
        {
            // re-call self from very own thread
            QMetaObject::invokeMethod(this, "doSomeWork",
                                      Qt::BlockingQueuedConnection,
            // or Qt::QueuedConnection if you want to start it asynchronously
            //  and don't wait when work finished
                                      Q_ARG(int, data));
            return;
        }

        // this will be started within your thread
        // some useful work here
    }
}; 
```

如果您的线程没有 run() 方法，将使用 QEventLoop，您可以在线程上下文中调用您的方法。

此外，您可以将您的方法声明为插槽并使用排队连接调用它，而不是 Q_INVOKABLE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:32:11.850

这样的事情怎么样？

```
class Worker
{
    //note, only pass parameters by copy here.
    public: 
        Worker(int param) : myParam(param) {}

    public slots:
        void process()
        {
            //do something with myParam here, it will run in the thread.
        }

    signals:
        void finished();
        void error(QString err);

    private:
        int myParam;
}; 
```

然后可以使用“moveToThread”将其连接到线程对象，如下所示：

```
QThread* thread = new QThread;
Worker* worker = new Worker(5);
worker->moveToThread(thread);
connect(worker, SIGNAL(error(QString)), this, SLOT(errorString(QString)));
connect(thread, SIGNAL(started()), worker, SLOT(process()));
connect(worker, SIGNAL(finished()), thread, SLOT(quit()));
connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));
thread->start(); 
```

有关 Qt 中线程使用的更多信息和简短教程，请参见此处：http: [//mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

# regex - 解析正则表达式时词法分析器和解析器之间的任务分离

> ID：15971663
> 
> 赞同：1
> 
> 时间：2013-04-12T12:39:52.867
> 
> 标签：regex, parsing, lexer

我对词法分析器和解析器之间的任务分离有些困惑。

我正在尝试编写一个解析器，它采用 Perl 风格的正则表达式并构建一个语法树。我的问题是识别量词，例如`{n,m}`，这意味着前面的组或字符或字符类应该至少出现`n`，但不超过`m`次数。

*关键是不*完整/无效的量词例如`{2,5asdf}`不是量词，而是一组常规字符。

 *问题是：给定输入`/a{2,5}/`，词法分析器是否应该返回一个令牌列表，例如`DELIMITER CHARACTER QUANTIFIER_START NUMBER COMMA NUMBER QUANTIFIER_END DELIMITER END`（问题是`QUANTIFIER_START`可能不是量词的“真实”开始，取决于后面的内容），还是应该尝试匹配完整的quantifier 和 just return `QUANTIFIER`，这听起来更像是解析器的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:55:05.857

使用将词法分析器和解析器分开的工具，通常在词法分析期间几乎没有空间让您更改标记。词法分析器通常独立于解析器运行，并且如果可能的话，使词法分析上下文敏感是 hacky（您可能想在谷歌上搜索[PEG](http://pdos.csail.mit.edu/~baford/packrat/thesis/)或*无扫描仪解析*，其中词法分析和解析之间没有真正的分离）。

但是，这完全取决于您使用的工具。我已经使用 ANTLR 创建了一个 PCRE 解析器，如果解析失败，它会使用回溯。因此，如果在解析后`{2,5a`无法构造量词（`a`无效），解析器将回溯到该字符并`"{"`从中生成一个`LITERAL`标记，然后继续。以一些 RAM 为代价，我启用了[memoization](http://en.wikipedia.org/wiki/Memoization) ，导致解析器在大输入时仍然表现良好。

它解析`X{2,5asdf}`为：

```
'- ALTERNATIVE
   |- ELEMENT
   |  '- LITERAL='X'
   |- ELEMENT
   |  '- LITERAL='{'
   |- ELEMENT
   |  '- LITERAL='2'
   |- ELEMENT
   |  '- LITERAL=','
   |- ELEMENT
   |  '- LITERAL='5'
   |- ELEMENT
   |  '- LITERAL='a'
   |- ELEMENT
   |  '- LITERAL='s'
   |- ELEMENT
   |  '- LITERAL='d'
   |- ELEMENT
   |  '- LITERAL='f'
   '- ELEMENT
      '- LITERAL='}' 
```

并且`X{2,5}`作为：

```
'- ALTERNATIVE
   '- ELEMENT
      |- LITERAL='X'
      '- QUANTIFIER
         |- NUMBER='2'
         |- NUMBER='5'
         '- GREEDY 
```

您可以在此处使用解析器：http: [//pcreparser.appspot.com/](http://pcreparser.appspot.com/)

ANTLR 语法可以在这里找到：[https ://github.com/bkiers/PCREParser/blob/master/src/grammar/PCRE.g](https://github.com/bkiers/PCREParser/blob/master/src/grammar/PCRE.g)*

# android - Android Bugsense 给出异常：没有对等证书

> ID：15971666
> 
> 赞同：0
> 
> 时间：2013-04-12T12:39:59.527
> 
> 标签：android, bugsense

我正在使用 bugsense 3.2.2 jar。我有一个简单的测试代码来生成 NullPointerException。我还添加了一个示例事件，可以在仪表板中看到它，但看不到生成的崩溃。

**内部活动**

```
 //in onCreate()
    BugSenseHandler.I_WANT_TO_DEBUG = true;
    BugSenseHandler.initAndStartSession(this, "XXXXXXXX");

 //on button click
    try{
       BugSenseHandler.sendEvent("Test button clicked!!!");
       String a = null;
       a.toString();
    }catch(Exception e){
       BugSenseHandler.sendException(e);
    }

 //in onStop()
    BugSenseHandler.closeSession(this); 
```

**在 AndroidManifest.xml 中**

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

**日志输出：**

```
 04-12 17:54:34.293: W/System.err(18319): Catch exception while startHandshake: javax.net.ssl.SSLException: SSL handshake aborted: ssl=0x285240: I/O error during system call, Connection reset by peer
  04-12 17:54:34.293: W/System.err(18319): return an invalid session with invalid cipher suite of SSL_NULL_WITH_NULL_NULL
  04-12 17:54:34.373: W/BugSenseHandler(18319): Transmitting ping Exception No peer certificate
  04-12 17:54:34.373: W/System.err(18319): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:258)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
  04-12 17:54:34.373: W/System.err(18319):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
  04-12 17:54:34.373: W/System.err(18319):  at com.bugsense.trace.models.PingsMechanism.transmitPingSync(Unknown Source)
  04-12 17:54:34.373: W/System.err(18319):  at com.bugsense.trace.models.PingsMechanism$2.run(Unknown Source) 
```

上面报告的错误是在活动启动后立即生成的（问题似乎在初始化代码中）。单击按钮后没有错误，但在 bugsense 仪表板中看不到崩溃。我也尝试过使用 3.2 jar，但问题仍然相同。

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:09:46.917

您是否尝试过选择已处理的选项卡。因为你正在处理崩溃，它就在那里。

![在此处输入图像描述](https://i.stack.imgur.com/IOqwU.png)

# ios - 如何从 url 保存 .mov 以在 mpmovieplayer 中播放

> ID：15971671
> 
> 赞同：1
> 
> 时间：2013-04-12T12:40:19.617
> 
> 标签：ios, nsurlconnection, mpmovieplayer

我正在使用它来播放本地 .mov 文件

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"MOVIE" ofType:@"mov"]];

 moviePlayer =
 [[MPMoviePlayerController alloc]
 initWithContentURL:url];

 [moviePlayer setControlStyle:MPMovieControlStyleNone];

 [[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector( moviePlayBackDidFinish:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:moviePlayer];
 [moviePlayer setScalingMode:MPMovieScalingModeAspectFill];
 [moviePlayer setFullscreen:FALSE];

 //---play partial screen---
 moviePlayer.view.frame = CGRectMake(0, 0, 320, 240);
moviePlayer.shouldAutoplay = YES;
 [self.view addSubview:moviePlayer.view];
[moviePlayer play]; 
```

我想从 url 预加载视频并将其保存到驱动器，以便在播放时没有网络延迟。如何从 url 保存文件，然后将其加载到 mpmovieplayer。

好像应该是这样的……

```
NSString *stringURL = @"url to file";
NSURL  *url = [NSURL URLWithString:stringURL];
NSData *urlData = [NSData dataWithContentsOfURL:url]; 
```

但如果是这种情况，我不知道如何用数据初始化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:29:11.420

您可以使用`NSURLConnection`下载 URL 的内容，并由您决定存储位置/方式。然后将本地文件的 URL 加载到您的电影播放器​​中。

尝试将整个视频保存在内存中对我来说似乎是不可取的；它可能只是太大了！

也就是说，你真的需要这样做吗？让`MPMoviePlayerController`你现在如何处理这件事失败了？

# c# - WCF 还是服务总线？

> ID：15971672
> 
> 赞同：2
> 
> 时间：2013-04-12T12:40:22.523
> 
> 标签：c#, wcf, azure, azureservicebus

我正在开发一个云应用程序，它索引大量文档（使用 lucene），并托管一个 wcf 服务来搜索它。我有3个角色：

*   我是托管 WCF 服务的 Web 角色，并将索引的副本保存在内存中。
*   我用于管理的网络角色（更新索引）。
*   一个工作角色，它正在轮询服务总线，以获取更新消息。

更新过程：

*   登录到 Admin 网站，然后按下按钮。管理员 webrole 将更新消息放入队列，worker 角色收到此消息，遍历文档源（它们也在线）并开始更新。

我想每周更新一次或两次索引，因此工作角色将消息队列池化很多时间而没有结果（即使我在 thread.sleep 中设置了很大的睡眠时间），而且我们必须为每一次付费交易。

你认为呢？在辅助角色中托管 WCF 服务以接收更新消息，而不是不必要地（大部分）轮询消息队列会更好吗？

谢谢你的帮助！

吨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:04:30.907

除非您对服务总线消息传递有一些非常特殊的需求，否则这听起来有点矫枉过正，尤其是在您发送的消息频率非常低的情况下。一个非常简单的 WCF 服务调用就足够了。如果 WCF 服务仅保留在内部（意味着通过内部端点访问而不将其暴露给外界），那么您甚至无需担心安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:08:32.177

这取决于您对该应用程序的未来计划。
WCF 绝对是建立角色间通信的好方法，尤其是对于这些“低频”事件。
但是，如果您计划拥有越来越多的这些管理事件（甚至可能计划安排其中一些事件，使用服务总线消息的交付计划选项），那么服务总线可能会为您提供更多的东西。如果你不需要异步、调度和横向扩展，那就去 WCF 祝你好运

# c# - XNA 处理、Windows 服务、句柄、GraphicsDevice

> ID：15971680
> 
> 赞同：1
> 
> 时间：2013-04-12T12:40:33.563
> 
> 标签：c#, graphics, service, xna, device

我正在使用 XNA 库在 GPU 中进行图像处理。所有这些都必须作为 Windows 服务（而不是表单）来完成。

当我创建一个 GraphicsDevice 时，它​​需要一个 WindowsHandle。但是 WindowService 没有 WindowsHandle。即使从服务创建“窗口窗体”，也不会创建 GraphicsDevice。

如何在 WindowService 中为 GraphicsDevice 设置 WindowsHandle？

抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:31:31.597

您不应该（不能？）从服务创建表单。[由于 Session 0 Isolation](http://www.scribd.com/doc/58343489/Windows-Session-0-Isolation-Impact-on-GPU-as-Service)，您肯定无法访问 GPU 。

考虑使用自动登录和标准桌面应用程序。您可以创建一个不可见的表单并将图形设备绑定到该表单。

# apache - 用于单个通配符域 *.dev 的 Apache 多个 VirtualDocumentRoot

> ID：15971682
> 
> 赞同：0
> 
> 时间：2013-04-12T12:40:36.710
> 
> 标签：apache, apache2, virtualhost, vhosts, mod-vhost-alias

我正在使用 Virtualhosts 和一个本地包罗万象的域 TLD，我需要 3 个用例同时工作，但到目前为止，我一次只能让两个用例工作。

我需要三个不同的测试域才能访问它们各自的文档根目录。

1.  **案例 1：** test1.dev --> /path/to/www/SomeFolderName （使用它自己的唯一文件夹名称和虚拟主机文件的覆盖）

2.  **案例 2：** *.dev --> /path/to/www/%0 （包括 .dev 的完整 url，所以 test2.dev 指向 /path/to/www/test2.dev ）

3.  **案例 3：** *.dev --> /path/to/www/%1 （*不包括*.dev 的完整 url，因此 test3.dev 指向 /path/to/www/test3 ）

因此，对于像 test2.dev 或 test3.dev 这样的任何域，我需要两种通配符情况， `VirtualDocumentRoot "/path/www/%0"`如果它存在或`VirtualDocumentRoot "/share/www/%1"`存在则使用它。

现在，案例 2 或案例 3 的工作取决于首先加载的内容，但不能同时加载。**我怎样才能让 1 捕获所有域只选择现有的文档根目录？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:42:52.563

您可以尝试对所有目录使用一个文档根目录，并让 mod_rewrite 检查文件夹和/或文件是否存在（使用[`RewriteCond`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)with`-f`或`-d`as `CondPattern`）并[重写](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)URL，以便检索正确的文件。这将适用于通配符域，并且对于何时使用哪个文件夹具有非常灵活的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:58:14.960

并不真正支持让 Apache 根据目录是否实际存在来更改文档根目录。我认为您将有更好的运气标准化文档根，以便它们都是并在必要时`/share/www/testX.dev`创建符号链接。您甚至可以从自定义 404 处理程序创建符号链接。`/share/www/testX.dev``/share/www/testX`

# php - 创建独特的页面标题 slugs php

> ID：15971685
> 
> 赞同：8
> 
> 时间：2013-04-12T12:40:43.490
> 
> 标签：php, mysql, unique, slug

我有一个为页面标题创建唯一 slug 的功能。它检查页面表中是否有可用的 slug，然后通过相应地添加一个“-int”来创建一个唯一的 slug。该功能适用​​于前三个条目，例如，“test slug”输入三次将创建“test-slug-1”、“test-slug-2”和“test-slug-3”。然后，我收到第四个条目的错误“致命错误：超过 30 秒的最大执行时间”。逻辑应该有问题，谁能帮我找到它。下面是代码：

```
function createSlug($title, $table_name, $field_name) {

global $db_connect;

$slug = preg_replace("/-$/","",preg_replace('/[^a-z0-9]+/i', "-", strtolower($title)));

$counter = 1;

do{

  $query = "SELECT * FROM $table_name WHERE  $field_name  = '".$slug."'";
  $result = mysqli_query($db_connect, $query) or die(mysqli_error($db_connect));

  if(mysqli_num_rows($result) > 0){
      $count = strrchr($slug , "-"); 
      $count = str_replace("-", "", $count);
      if($count > 0){

          $length = count($count) + 1;
          $newSlug = str_replace(strrchr($slug , "-"), '',$slug);
          $slug = $newSlug.'-'.$length;

          $count++;

      }else{
          $slug = $slug.'-'.$counter;
      }  

  }

  $counter++; 
  $row = mysqli_fetch_assoc($result);

}while(mysqli_num_rows($result) > 0);

return $slug; 
```

}

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-12T12:57:38.870

只需访问数据库一次，立即获取所有内容，这可能是最大的瓶颈。

```
$query = "SELECT * FROM $table_name WHERE  $field_name  LIKE '".$slug."%'"; 
```

然后把你的结果放在一个数组中（比如说`$slugs`）

```
//we only bother doing this if there is a conflicting slug already
if(mysqli_num_rows($result) !== 0 && in_array($slug, $slugs)){
    $max = 0;

    //keep incrementing $max until a space is found
    while(in_array( ($slug . '-' . ++$max ), $slugs) );

    //update $slug with the appendage
    $slug .= '-' . $max;
} 
```

我们使用`in_array()`检查，就好像 slug 也`my-slug`将`LIKE`返回行，例如

```
my-slug-is-awesome
my-slug-is-awesome-1
my-slug-rules 
```

等会导致问题，`in_array()`检查确保我们只检查输入的确切信息。

# 为什么我们不只计算结果和+1？

这是因为如果您有多个结果并删除了一些结果，那么您的下一个 slug 很可能会发生冲突。

例如

```
my-slug
my-slug-2
my-slug-3
my-slug-4
my-slug-5 
```

删除 -3 和 -5 给我们留下

```
my-slug
my-slug-2
my-slug-4 
```

因此，这给了我们 3 个结果，下一个插入将是`my-slug-4`已经存在的。

# 为什么我们不只使用`ORDER BY`and `LIMIT 1`？

我们不能只`order by`在查询中做一个，因为^(缺乏)自然排序会使`my-slug-10`排名低于`my-slug-4`逐个字符比较而`4`高于`1`

例如

```
m = m
y = y
- = -
s = s
l = l
u = u
g = g
- = -
4 > 1 !!!
  < 0 (But the previous number was higher, so from here onwards is not compared) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-12T12:55:51.380

只需使用一个查询即可为您完成所有繁重的工作......

```
$slug = preg_replace("/-$/","",preg_replace('/[^a-z0-9]+/i', "-", strtolower($title)));

$query = "SELECT COUNT(*) AS NumHits FROM $table_name WHERE  $field_name  LIKE '$slug%'";
$result = mysqli_query($db_connect, $query) or die(mysqli_error($db_connect));
$row = $result->fetch_assoc();
$numHits = $row['NumHits'];

return ($numHits > 0) ? ($slug . '-' . $numHits) : $slug; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T12:52:46.060

您可以只选择具有最大数字的 slug 并将其增加 1：

```
$query = "SELECT $field_name FROM $table_name WHERE  $field_name LIKE '".$slug."-[0-9]*' ORDER BY $field_name DESC LIMIT 1"; 
```

`[0-9]*`in query 表示任何数字计数。

此查询将选择`$slug`开头和最大数字的行。

之后，您可以解析结果获取编号并增加它。

在这种情况下，您将只有一个查询和许多未使用的性能。

**更新**

这行不通，因为`slug-8`会比`slug-11`. 但不知道如何解决它。也许`ORDER BY`身份证`DESC`？

**更新 2**

查询也可以按长度排序，它会正常工作。感谢杰克：

```
$query = "SELECT $field_name FROM $table_name WHERE  $field_name LIKE '".$slug."-[0-9]*' ORDER BY LENGTH($field_name), $field_name DESC LIMIT 1"; 
```

**更新 3**

还增加了对原始蛞蝓的检查。感谢海尔伍德。

```
$query = "SELECT $field_name FROM $table_name WHERE $field_name = '".$slug."' OR $field_name LIKE '".$slug."-[0-9]*' ORDER BY LENGTH($field_name), $field_name DESC LIMIT 1"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-23T18:55:03.593

为什么不直接创建一个 slug 并将涉及到 MySQL 索引的其余工作留给我们。这是一个`slugify`函数（它是 Symfony 框架使用的稍作修改的版本）。

```
function slugify( $text ) {
    $text = preg_replace('~[^\\pL\d]+~u', '-', $text);  
    $text = trim($text, '-');
    $text = iconv('utf-8', 'ASCII//IGNORE//TRANSLIT', $text);   
    $text = strtolower(trim($text));
    $text = preg_replace('~[^-\w]+~', '', $text);

    return empty($text) ? substr( md5( time() ), 0, 8 ) : $text;
} 
```

并且 MySQL 部分可以通过[触发器](https://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)解决（更改表和列名）。

```
BEGIN
     declare original_slug varchar(255);
     declare slug_counter int;
     set original_slug = new.slug;
     set slug_counter = 1;
     while exists (select true from post where slug = new.slug) do
        set new.slug = concat(original_slug, '-', slug_counter); 
        set slug_counter = slug_counter + 1;
     end while;
END 
```

[MySQL插入行，重复：添加后缀并重新插入](https://stackoverflow.com/questions/8219340/mysql-insert-row-on-duplicate-add-suffix-and-re-insert)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T14:06:11.160

对于一个部分，我将创建一个对象来处理创建 slug 和处理数字的部分：

```
// generate new slug:
$slug = new NumberedSlug('Creating Unique Page Title Slugs in PHP');
echo $slug, "\n", $slug->increase(), "\n";

// read existing slug:
$slug = new NumberedSlug('creating-unique-page-title-slugs-in-php-44');
echo $slug->getNumber(), "\n"; 
```

输出：

```
creating-unique-page-title-slugs-in-php
creating-unique-page-title-slugs-in-php-1
44 
```

对于另一部分，数据库，这已经大大简化了您的代码（请仔细检查，我已经快速完成了）。另请参阅如何从您实际拥有的 Mysqli 对象中受益（但不要按原样使用）：

```
function createSlug($title, $table_name, $field_name, Mysqli $mysqli = NULL)
{
    $mysqli || $mysqli = $GLOBALS['db_connect'];

    $slug = new NumberedSlug($title);

    do
    {
        $query = "SELECT 1 FROM $table_name WHERE  $field_name  = '" . $slug . "'";

        if (!$result = $mysqli->query($query)) {
            throw new RuntimeException(var_export($mysqli->error_list, true));
        }

        if ($result->num_rows) {
            $slug->increase();
        }

    } while ($result->num_rows);

    return $slug;
} 
```

但是正如其他人已经写的那样，您应该首先从数据库中获取所有同时编号的 slug，然后在必要时选择一个唯一的。这将减少数据库调用的次数。代码也更加紧凑：

```
function createSlug2($title, $table_name, $field_name, Mysqli $mysqli = NULL)
{
    $mysqli || $mysqli = $GLOBALS['db_connect'];

    $slug = new NumberedSlug($title);

    $query = "SELECT $field_name FROM $table_name WHERE $field_name LIKE '$slug-_%'";

    if (!$result = $mysqli->query($query)) {
        throw new RuntimeException(var_export($mysqli->error_list, true));
    }

    $existing = array_flip(call_user_func_array('array_merge', $result->fetch_all()));

    $slug->increase();

    while (isset($existing[$slug])) 
    {
        $slug->increase();
    }

    return $slug;
} 
```

[在行动中看到它。](http://eval.in/private/3c8c6b27c5414d)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-11T17:26:43.403

我对答案并不完全满意，所以我想出了一个稍微不同的方法。

```
(SELECT CONCAT({$slug}, '-', counter) FROM (
  SELECT (@row_number:=@row_number + 1) AS counter, ev.*
  FROM (
    SELECT REPLACE(slug, {$slug}-, '') AS remainder
    FROM products, (SELECT @row_number:=0) AS t
    WHERE slug LIKE '{$slug}%'
  ) ev
  ORDER BY LENGTH(remainder), remainder
) sr
WHERE counter <> remainder)
LIMIT 1 
```

这基本上是做什么的，它检查数据库中与新 slug 相似的所有现有值，并将其与行号匹配以检查间隙，如果没有找到，它使用第一个生成的最大数相同的 slug 被推到最后（注意：我们替换`slug-`而不是`slug`）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T12:55:32.513

```
$query = "SELECT * FROM $table_name WHERE  $field_name  LIKE '".$slug."%'";
$result = mysqli_query($db_connect, $query) or die(mysqli_error($db_connect));
//EDITED BASED ON COMMENT SUGGESTIONS
//create array of all matching slug names currently in database
$slugs = array();
while($row = $result->fetch_row()) {
    $slugs[] = $row['field_name'];
}
//test if slug is in database, append - '1,2,..n' until available slug is found
if(in_array($slug, $slugs)){
    $count = 1;
    do{
       $testSlug = $slug . '-' . $count;
       $count++;
    } while(in_array($testSlug, $slugs));
    $slug = $testSlug;
}
//insert slug 
```

您应该能够使用 LIKE 关键字在单个数据库调用中执行此操作，这将减少您的执行时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-23T14:36:08.480

您可以使用[Fbeen/UniqueSlugBundle](https://github.com/Fbeen/UniqueSlugBundle)。这个 Bundle 是轻量级的，可以做它需要做的事情。

# android - Android：组织不同的构建目标/读取资源文件运行时

> ID：15971693
> 
> 赞同：2
> 
> 时间：2013-04-12T12:41:13.793
> 
> 标签：android, eclipse, deployment

我正在开发一个应用程序，我希望为不同的客户提供皮肤。（标题标志图像、背景图像、文本字符串等）

我正在考虑在配置文件中读取运行时，**或者**以某种方式在设计时或编译时切换它。如果运行时，应用程序将在启动时读取配置文件以配置自身。（打开/关闭事物、图形、文本等）

如果运行时：有没有办法用不同的 .zip 文件（包含图像等资源）发送 .apk 文件，然后在内存中解压缩 .zip 文件并替换例如 drawable + texts + SharedPreferences？

如果设计时：有没有办法在 Eclipse/ADT 中的不同资源集之间轻松切换，无论是编译时还是运行时？就像拥有不同的文件夹和不同的图像、字符串等？我还是 ADT/Eclipse 的新手，所以我不确定是否有一种既定的方式来做我想做的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T19:53:09.760

[在此处](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants)查看“构建变体”和“产品风味”

可以使用适用于 Android 的新 Gradle 构建来完成。您可以从命令行或从新的 Android Studio 中使用 Gradle 构建（在 Google IO 2013 上展示），请参见[此处](http://developer.android.com/sdk/installing/studio.html)

在 Google IO 主题演讲中，产品风味已作为预告片呈现，会议就是[这个](https://developers.google.com/events/io/sessions/324603352)，视频可以在[这里](http://www.youtube.com/watch?v=lmv1dTnhLH4)找到。跳转到 14:10 讨论构建变体。详细介绍是[The New Android SDK Build System](http://www.youtube.com/watch?v=LCJAgPkpmR0&list=PLWz5rJ2EKKc9WGUwq2gQ-coU3fSyexgOx&index=9)。

简而言之，您可以为不同的风格拥有不同的源集（目录），例如，一个通用目录和一个用于上面提到的每种风格的目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-28T12:00:20.227

不，你不能那样做。您最好的选择是一个 Android 库项目，以及每个“客户端/应用程序”的另一个项目。有关 Android 库项目的更多信息，请参阅 Android 官方文档：[https ://stackoverflow.com/a/1986071/198996](https://stackoverflow.com/a/1986071/198996)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-01T11:51:46.783

就像[ChrLipp](https://stackoverflow.com/users/734687/chrlipp)所说，在最前沿的 Android Studio 上，有一个方便的解决方案，称为“[风味](http://www.youtube.com/watch?v=7JDEK4wkN5I)”。

它基于镜像目录层次结构。“主”目录层次结构包含“主”构建的所有文件和“风味”目录层次结构，每个风味目录包含将在构建时覆盖或补充那些“主”文件的文件。

为了我的使用（我无法迁移到 Android Studio），我编写了一个简单的 ant 脚本来模仿“ [flavors](http://www.youtube.com/watch?v=7JDEK4wkN5I) ”功能。它适用于 Netbeans 和 Eclipse，我认为它与项目无关。

要使用它，整个项目文件夹必须退后一级层次结构，原始文件夹需要放在“主”目录中。必须创建一个构建目录，并将多个“flavors”文件夹放在“flavors”中，如下所示：

```
├── build.xml                           < - ant script file above
├── main                                < - original project
├── flavors
│     └── freeVersion                   < - files related with a freeVersion 'skin'
└── build                               < - temporary build folder 
```

运行脚本（$ ant change-flavor），它会询问你想要构建的witch flavor 目录。用户输入后，它检查风味目录是否存在，并将所有主目录复制到构建文件夹中，加上最终的“风味”文件，覆盖“主”文件。

生成的 build 文件夹是一个全新的原生 Android/Cordova/whatever 项目，可以通过 IDE 正常打开和编译。

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="Flavors" basedir="." >

<property name="flavors.dir" value="flavors"/>
<property name="flavors.build.dir" value="build"/>
<property name="flavors.main.dir" value="main"/>

<target name="change-flavor">
    <input message="Which Flavor to build?" addproperty="flavor.dir" />

     <fail message="Empty flavor not allowed">
         <condition>
                 <equals arg1="${flavor.dir}" arg2=""/>
         </condition>
    </fail>     

    <fail message="Directory ${flavors.dir}/${flavor.dir} not exists">
        <condition>
            <not>
                <available file="${flavors.dir}/${flavor.dir}" type="dir" />
            </not>
        </condition>
    </fail>

    <echo message="Deleting build dir ${flavors.build.dir}"/>
    <delete includeemptydirs="true">
        <fileset dir="${flavors.build.dir}" includes="**/*"/>
    </delete>

    <echo message="Copying from main ${flavors.build.dir}"/>
    <copy todir="${flavors.build.dir}" includeemptydirs="true" >  
            <fileset dir="${flavors.main.dir}" includes="**"/>  
     </copy>        

    <echo message="Copying from flavor ${flavors.build.dir}"/>
    <copy todir="${flavors.build.dir}" includeemptydirs="true" overwrite="true" >
            <!-- exclude folder is here because my flavors directories are also netbeans
                 projects. If similar approach is used on eclipse, maybe put here .project 
                 and .settings folders -->
            <fileset dir="${flavors.dir}/${flavor.dir}" includes="**" excludes="nbproject/**"/>
     </copy>        

    </target>    
</project> 
```

每个风味构建都有一个惩罚时间，因为没有预编译的东西，也没有很好地集成到主项目构建系统中，但就我而言，我认为它是值得的，因为从一种风味到另一种风味的唯一变化是属性文件和资产。大多数开发过程都可以在“主要”项目上完成，口味只是皮肤。除此之外，它避免了对 cordova 自己的构建系统/netbeans 集成的介绍。

# javascript - 选择选项 onclick 功能在 FF 中有效，但在 Chrome 中无效

> ID：15971698
> 
> 赞同：1
> 
> 时间：2013-04-12T12:41:30.980
> 
> 标签：javascript, jquery

我可以在 Firefox 中成功更改图表选项，但它在 chrome 中不起作用（没有错误）。我已经阅读了几乎所有关于这个问题的主题，但没有一个对我有用。当用户选择选项时，正确的捕捉方法是什么？

![在此处输入图像描述](https://i.stack.imgur.com/Bxch4.jpg)

```
<select id="sortby2">
  <option id="byweek" value="date">7 days</option>
  <option id="by14" value="spent">14 days</option>
  <option id="bymonth" value="clicks">30 days</option>
</select>

$("#by14").OnClick(function(){
$.ajax({
    type: "POST",
    url: "chartdata.php",
    data: 'by14=on',datatype:"html",  async: false,
    success: function(d){
    $('.cantent').html(d);      
    }       
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:43:23.983

您可能需要使用[**change()**](http://api.jquery.com/change/)而不是`click`event。

```
$("#sortby2").change(function(){

  if($(this).find('option:selected')[0].id != 'by14')
           return;

  $.ajax({
        type: "POST",
        url: "chartdata.php",
        data: 'by14=on',datatype:"html",  async: false,
        success: function(d){
        $('.cantent').html(d);      
        }       
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:48:46.910

侦听 select 元素上的“更改”事件。最好使用 jQuery [on()](http://api.jquery.com/on/)函数来注册它：

```
$("#sortby2").on('change', function(){
    if($(this).val() === 'spent') {
        $.ajax({
            type: "POST",
            url: "chartdata.php",
            data: 'by14=on',datatype:"html",  async: false,
            success: function(d){
                $('.cantent').html(d);      
            }       
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:50:35.223

`$("#by14").click`不使用`$("#by14").onclick`

# php - wordpress 中的文本背景颜色和自定义页脚

> ID：15971703
> 
> 赞同：0
> 
> 时间：2013-04-12T12:41:39.650
> 
> 标签：php, wordpress, footer

我有两个关于 wordpress 的问题：

我在一个网站上工作，需要为标题添加背景颜色，该标题继续在文本的左侧和右侧。这是使用正常背景颜色时的样子：

![在此处输入图像描述](https://i.stack.imgur.com/8n1g3.png) 这就是我需要的：

![在此处输入图像描述](https://i.stack.imgur.com/nVgdE.png) 第二个问题：我需要一个页脚，如果你点击红色页脚，它会消失并重新出现（见图 2）。我可以使用任何代码/插件吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:49:38.403

您可以使用 CSS 作为问题 1 的答案。尝试使用填充，以便您的文本周围有空间。这是一个示例：

```
p.padding
{
padding-top:25px;
padding-bottom:25px;
padding-right:50px;
padding-left:50px;
} 
```

这将在您的段落周围添加填充，您将能够实现您在问题 1 中要求的内容。不幸的是，我无法回答 Q2，因为通常您可以在 Wordpress 中使用一些插件。我会推荐一个我使用过的[SocialToolbarPro](http://socialtoolbarpro.com/)。它是付费的，但如果您知道自己在做什么，免费版本也一样好:)

希望这可以帮助

# php - FPDF 错误：一些数据已经输出

> ID：15971710
> 
> 赞同：1
> 
> 时间：2013-04-12T12:41:57.683
> 
> 标签：php, pdf, fpdf

每当我尝试使用 FPDF 创建 PDF 时，都会收到以下错误：

> FPDF 错误：一些数据已经输出，无法发送 PDF 文件（输出开始于路径：15）。

当我的文件中只有 PDF 脚本时，它可以工作，但我需要从我的数据库中收集一些数据。

我已添加`ob_clean();`到该功能`Output();`，但不幸的是，它仍然无法正常工作。

下面是我的代码：

```
<?php
include "connect.php";

$orderId = $_GET['OrderId'];
$findOrders = mysql_query("SELECT * FROM orderLines WHERE OrderId = $orderId ");
if (!$findOrders) { 
    die('Invalid query: ' . mysql_error());
}

while($row=mysql_fetch_array($findOrders)){
    $article = $row['article'];
    $quantity = $row['quantity'];
    $price = $row['price'];
}

require('fpdf17/fpdf.php');

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,'Hello World!');
$pdf->Output();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:52:40.990

当显示此错误时，表示除了 PHP 文件之外，还有一些数据正在发送到您的浏览器，即**FPDF**将文件头发送到 PDF 文件，

`header('Content-Type: application/pdf');`

但是，您在标头规范之前输入了一些数据，例如字符甚至空格，这会导致错误。

两种选择：

1)`require('fpdf17/fpdf.php');`在脚本的开头制作。所以，表头不能更改，在表头设置之前不会有入口；

2）如果您说脚本在没有数据库搜索的情况下工作，那么错误可能在`connect.php`文件中。查看它以确保它不会向浏览器发送任何内容（在`<?php ?>`它的内部和外部！

PS：FPDF`ob_clean()`在调用时已经这样做了。

# php - 使用 PHP 和 xPath 从 HTML 中提取数据

> ID：15971715
> 
> 赞同：2
> 
> 时间：2013-04-12T12:42:10.323
> 
> 标签：php, html, dom, xpath, extract

我正在尝试从网页中提取数据以将其插入数据库。我感兴趣的数据在具有 class="company" 的 div 中。在一个网页上有 15 个或更少这样的 div，并且我试图从中提取这些数据的页面有很多。出于这个原因，我试图找到一种自动提取数据的解决方案。

class="company" 的 div 如下（在具有不同数据的一页上有 15 个或更少这样的 div）：

```
<div class="company" id="company-6666"> <!-- EXTRACT 'company-6666' from id="company-6666" -->

  <div class="top clearfix">
    <div class="name clearfix">
      <h2>
        <a href="/company-name">Company Name</a>&nbsp; <!-- EXTRACT 'Company Name' from contents of A element and EXTRACT '/company-name' from href attribute -->
        <a href="/branches-list-link?parent_id=6666" class="branches">Branches <span>(5)</span></a> <!-- EXTRACT '/branches-list-link?parent_id=6666' from href attribute -->               
      </h2>
    </div>
  </div>

  <div class="inner clearfix has-logo">

    <div class="clearfix">          
      <div class="logo">
        <a href="/company-name">
          <img src="/graphics/company/logo/listing/123456.jpg?_ts=1365390237" border="0" alt="" /> <!-- EXTRACT '/graphics/company/logo/listing/123456.jpg?_ts=1365390237' from src attribute -->
        </a>
      </div>
      <div class="info">
        <div class="address">StreetName 500, 7777 City, County</div> <!-- EXTRACT 'StreetName 500, 7777 City, County' from contents of class="address" div -->
        <div class="clearfix">
          <div class="slogan">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi ac condimentum mi.</div> <!-- EXTRACT 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi ac condimentum mi.' from contents of class="slogan" div -->
        </div>
      </div>
    </div>

    <div class="actions-bar clearfix">
      <ul>              
        <li><span class="phone-number">6666666</span></li> <!-- EXTRACT '6666666' from contents of class="phone-number" div -->
        <li><a href="mailto:mail@mail.com" target="_blank" title="mail@mail.com" class="email">mail@mail.com</a></li> <!-- EXTRACT 'mail@mail.com' from contents of class="email" div -->
        <li><a href="http://www.webpage.com" target="_blank" title="www.webpage.com" class="redirect url">www.webpage.com</a></li> <!-- EXTRACT 'www.webpage.com' from contents of class="redirect url" div -->
      </ul>
    </div>

  </div>

</div> 
```

到目前为止，我有以下 PHP 代码（$output 有网页的 HTML 代码）：

```
<?php

$doc = new DomDocument();
@$doc->loadHTML($output);
$doc->preserveWhiteSpace = false; 

$xpath = new DomXPath($doc);

$elements = $xpath->query("//*[@class='company']");

if (!is_null($elements)) {
    foreach ($elements as $element) {
        echo $element->nodeValue;
    }
}

?> 
```

似乎它使用 class="company" 获得了所有 15 个 div，但我不知道如何提取前面提到的（在 HTML 代码的注释中）单个值。

每个 div（我说的是 class="company" 的 div）都没有写在 HTML 块中的所有值。因此，我必须以某种方式查询公司 div 中是否存在我感兴趣的数据的特定 div，如果存在，我必须检查它是否不为空（是否包含标签之间的文本）。如果它存在并且不为空，我将它添加到一个变量中。

提取值后，我想将它们分配给 PHP 变量，以便之后使用它们。如果将提取的值像这样放入数组中会更好：

```
$result = array(
    // 1'st div's data
    [0] =>  
        'company name' => 'company name',
        'company link' => 'company link',
        'company id' => 'company id',
        'company branches'  => 'branches link',
        'company logo'  => 'logo',
        'company address'  => 'address',
        'company slogan'  => 'slogan',
        'company webpage'  => 'webpage',
        'company email'  => 'email',
        'company phone'  => 'phone'

    // 2'nd div's data
    [1] =>  
        'company name' => 'company name',
        'company link' => 'company link',
        'company id' => 'company id',
        'company branches'  => 'branches link',
        'company logo'  => 'logo',
        'company address'  => 'address',
        'company slogan'  => 'slogan',
        'company webpage'  => 'webpage',
        'company email'  => 'email',
        'company phone'  => 'phone'
    ...
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:10:28.953

每个*公司*都可以由一个上下文节点表示，而每个属性由一个相对于它的 xpath 表达式表示：

```
Company company-6666:
 ->id ....... = "company-6666"    --    string(@id)
 ->name ..... = "Company Name"    --    .//a[1]/text()
 ->href ..... = "/company-name"    --    .//a[1]/@href
 ->img ...... = "/graphics/company/logo/listing/123456.jpg?_ts=1365390237"    --    .//img[1]/@src
 ->address .. = "StreetName 500, 7777 City, County"    --    .//*[@class="address"]/text()
 ... 
```

如果将其包装到对象中，则使用起来非常好：

```
$doc = new DOMDocument();
$doc->loadHTML($html);

/* @var $companies DOMValueObject[] */
$companies = new Companies($doc);

foreach ($companies as $company) {
    printf("Company %s:\n", $company->id);
    foreach ($company->getObjectProperties() as $name => $value) {
        $expression = $company->getPropertyExpression($name);
        printf(" ->%'.-10s = \"%s\"    --    %s\n", $name.' ', $value, $expression);
    }
} 
```

这适用于*DOMObjectCollection*和*DOMValueObject*，定义您自己的类型：

```
class Companies extends DOMValueCollection
{
    public function __construct(DOMDocument $doc) {
        parent::__construct($doc, '//*[@class="company"]');
    }

    /**
     * @return DOMValueObject
     */
    public function current() {
        $object = parent::current();
        $object->defineProperty('id', 'string(@id)');
        $object->defineProperty('name', './/a[1]/text()');
        $object->defineProperty('href', './/a[1]/@href');
        $object->defineProperty('img', './/img[1]/@src');
        $object->defineProperty('address', './/*[@class="address"]/text()');
        # ... add your definitions
        return $object;
    }
} 
```

对于您的阵列要求，有一种`getArrayCopy()`方法：

```
echo "\nGet Array Copy:\n\n";

print_r($companies->getArrayCopy()); 
```

输出：

```
Get Array Copy:

Array
(
    [0] => Array
        (
            [id] => company-6666
            [name] => Company Name
            [href] => /company-name
            [img] => /graphics/company/logo/listing/123456.jpg?_ts=1365390237
            [address] => StreetName 500, 7777 City, County
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:53:58.260

要检查节点是否存在，请验证返回的查询结果中的长度属性是否等于 1：

```
if ($company_name->length == 1) {
   $object->company_name = trim($company_name->item(0)->nodeValue);
} 
```

# ios - GLSL (iOS) 函数参数不能正常工作？

> ID：15971721
> 
> 赞同：2
> 
> 时间：2013-04-12T12:42:24.110
> 
> 标签：ios, opengl-es, glsl

传递给函数的纹理颜色在循环中不起作用？

我对此感到非常困惑，第一个代码有效，第二个无效。有人对这种行为有解释吗？只需将纹理查找移动到它正在工作的函数内，但不需要它，因为 xy 不会改变。

**不工作：（输出为黑色）**

```
float getDistance(vec3 point,vec4 n_0)
{
    float d=point.z;
    d+=0.1*(n_0.w);
    return(d);
}

void main()
{
   vec4 n_0;
   vec4 color;
   vec3 point;

   point=vec3(v_coord.x*1.0,v_coord.y*1.0,-1.0);

   n_0=texture2D(noise,vec2(point*1.0))*2.0-1.0;

   int i;
   float d=100.0;
   for(i=0;i<50;i++)
   {
       d=getDistance(point,n_0);
       if(d<0.001)break;

       point.z+=d;
   }

    gl_FragColor=clamp(vec4(d),0.0,1.0);
} 
```

**工作：（输出是噪音）**

```
float getDistance(vec3 point)
{
    vec4 n_0=texture2D(noise,vec2(point*1.0))*2.0-1.0;

    float d=point.z;
    d+=0.1*(n_0.w);
    return(d);
}

void main()
{
    vec4 n_0;
    vec4 color;
    vec3 point;

    point=vec3(v_coord.x*1.0,v_coord.y*1.0,-1.0);

    int i;
    float d=100.0;
    for(i=0;i<50;i++)
    {
        d=getDistance(point);
        if(d<0.001)break;

        point.z+=d;
    }

    gl_FragColor=clamp(vec4(d),0.0,1.0);
} 
```

# objective-c - 如何从 NSMatrix 获取 NSButton (CheckBox) 的状态

> ID：15971723
> 
> 赞同：3
> 
> 时间：2013-04-12T12:42:30.077
> 
> 标签：objective-c, xcode, cocoa, nsbuttoncell

为什么我的代码在第一次运行后将选中状态更改`NSButtenCell`为`NSOnState`？

```
NSButtonCell *b=[[NSButtonCell alloc] init];
b=[self.myMatrix selectedCell];
[self.myMatrix selectCellAtRow:0 column:0];
if (b.state == NSOnState) {
    NSLog(@"State is On");
}else{
    NSLog(@"State is Off");
} 
```

我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T10:30:40.490

我不确定，但你检查过是否打电话

```
[self.myMatrix selectCellAtRow:0 column:0]; 
```

执行状态更改？

NSMatrix 的 Apple 文档说：

*> 如果指定单元格是可编辑的文本单元格，则选择其文本。*

所以也许这种方法也可能改变复选框状态（但我不知道这是否可能是问题）。

# android - Android：保护您的私钥

> ID：15971724
> 
> 赞同：2
> 
> 时间：2013-04-12T12:42:35.800
> 
> 标签：android, security, signature

我一直在阅读 Android 网站上的“保护您的私钥”部分。它担心创作身份受到损害的可能性。

那么，是否可以访问已发布应用程序的签名？我的意思是例如从 apk 文件中提取作者身份或任何类型的信息？如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:02:19.060

是的，您可以获得已安装应用程序的签名。下面的示例将获取用于对包进行签名的所有签名。

```
try {
    PackageInfo info = getPackageManager().getPackageInfo(pkgName, PackageManager.GET_SIGNATURES);
    Signature[] sigs = info.signatures;
    for (Signature sig : sigs) {
        CertificateFactory certFactory = CertificateFactory.getInstance("X.509");
        ByteArrayInputStream in = new ByteArrayInputStream(sig.toByteArray());
        X509Certificate cert = (X509Certificate) certFactory.generateCertificate(in);
        // Verify or inspect cert here
    }
} catch (...) {
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:55:13.373

如果您将私钥留在公开可见的页面/文件夹上的某个地方，他们只能访问您的私钥。话虽如此，没有什么可以阻止某人解压缩您的应用程序进行更改，然后用另一个密钥将其辞职并在本地运行它。如果有人将恶意代码注入您的应用并在 Play 商店中更新，他们需要多条信息。他们不仅需要您的密钥，还需要您的谷歌开发者帐户信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:44:15.883

并非没有访问您的私钥。这就是为什么他们建议您保护它:)如果您希望将来更新它，您还*必须使用相同的密钥签署一个应用程序。*丢失您的密钥 = 市场上的新应用程序，新应用程序必须具有唯一的包名称。

# matlab - 如何在matlab中从用户那里获取所需节点的数量及其坐标？

> ID：15971734
> 
> 赞同：2
> 
> 时间：2013-04-12T12:43:05.170
> 
> 标签：matlab, input

这可能是一个愚蠢的问题，但我不太擅长 matlab，而且我不知道如何从用户那里获得输入。我正在编写应该`n`从用户那里获取节点及其坐标的代码，然后找到哈密顿路径。这是我的想法，请告诉我我错在哪里。

```
n=input('\nPlease enter the number of nodes: \n')
for i:1:n
  pos[]=input('\nPlease enter their coordinates. \n')
end
x=pos(:,1);
y=pos(:,2); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:57:41.753

我想你的意思是

```
pos[]=input('\nPlease enter their coordinates. \n') 
```

应该改为

```
pos(i)=input('\nPlease enter their coordinates. \n') 
```

但 pos 不会有两列，所以也许这更好：

```
for i:1:n
  x(i)=input('\nPlease enter X coordinate. \n')
  y(i)=input('\nPlease enter Y coordinate. \n')
end 
```

然后存储在单个数组中，在循环之后执行以下操作：

```
A = [x, y] 
```

# python - 通过命令行从 unittest.TestCase 运行单个测试

> ID：15971735
> 
> 赞同：334
> 
> 时间：2013-04-12T12:43:13.610
> 
> 标签：python, unit-testing, python-unittest

在我们的团队中，我们定义大多数测试用例是这样的：

一个“框架”类`ourtcfw.py`：

```
import unittest

class OurTcFw(unittest.TestCase):
    def setUp:
        # Something

    # Other stuff that we want to use everywhere 
```

还有很多测试用例，比如 testMyCase.py：

```
import localweather

class MyCase(OurTcFw):

    def testItIsSunny(self):
        self.assertTrue(localweather.sunny)

    def testItIsHot(self):
        self.assertTrue(localweather.temperature > 20)

if __name__ == "__main__":
    unittest.main() 
```

当我正在编写新的测试代码并希望经常运行它并节省时间时，我确实将“__”放在所有其他测试的前面。但这很麻烦，分散了我正在编写的代码的注意力，而且这产生的提交噪音很烦人。

因此，例如，在对 进行更改时`testItIsHot()`，我希望能够这样做：

```
$ python testMyCase.py testItIsHot 
```

并且只*运行*`unittest`过 *`testItIsHot()`*

 *我怎样才能做到这一点？

我试图重写这`if __name__ == "__main__":`部分，但由于我是 Python 新手，所以我感到迷茫，并不断抨击除方法之外的所有内容。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2013-04-12T12:44:32.007

这可以按照您的建议工作-您还必须指定类名：

```
python testMyCase.py MyCase.testItIsHot 
```

* * *

## 回答 #2

> 赞同：186
> 
> 时间：2014-10-23T15:34:14.660

如果你组织你的测试用例，即像实际代码一样遵循相同的组织，并且对同一个包中的模块也使用相对导入，你还可以使用以下命令格式：

```
python -m unittest mypkg.tests.test_module.TestClass.test_method

# In your case, this would be:
python -m unittest testMyCase.MyCase.testItIsHot 
```

Python 3 文档：*[命令行界面](https://docs.python.org/3/library/unittest.html#command-line-interface)*

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2013-04-12T12:53:32.630

如你所料，它可以很好地工作

```
python testMyCase.py MyCase.testItIsHot 
```

还有另一种方法来测试`testItIsHot`：

```
 suite = unittest.TestSuite()
    suite.addTest(MyCase("testItIsHot"))
    runner = unittest.TextTestRunner()
    runner.run(suite) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2017-03-26T13:54:18.797

如果您查看 unittest 模块的帮助，它会告诉您一些组合，这些组合允许您从模块运行测试用例类和从测试用例类运行测试方法。

```
python3 -m unittest -h

[...]

Examples:
  python3 -m unittest test_module               - run tests from test_module
  python3 -m unittest module.TestClass          - run tests from module.TestClass
  python3 -m unittest module.Class.test_method  - run specified test method
```lang-none

It does not require you to define a `unittest.main()` as the default behaviour of your module. 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2018-09-13T11:48:07.313

如果您只想运行特定类的测试：

```
if __name__ == "__main__":
    unittest.main(MyCase()) 
```

它适用于我在 Python 3.6 中。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-11-14T19:12:50.110

**TL;DR**：这很可能会奏效：

```
python mypkg/tests/test_module.py MyCase.testItIsHot 
```

**解释**：

*   方便的方式

    ```
     python mypkg/tests/test_module.py MyCase.testItIsHot 
    ```

    会起作用，*但*它不言而喻的假设是您已经在测试文件中（通常在末尾）有了这个传统的代码片段。

    ```
    if __name__ == "__main__":
        unittest.main() 
    ```

*   不方便的方式

    ```
     python -m unittest mypkg.tests.test_module.TestClass.test_method 
    ```

    将始终有效，而无需您`if __name__ == "__main__": unittest.main()`在测试源文件中包含该代码段。

那么为什么第二种方法被认为不方便呢？因为在 <在此处插入你的身体部位> 中手动输入那个长的、以点分隔的路径会很痛苦。在第一种方法中，该`mypkg/tests/test_module.py`部分可以通过现代外壳或您的编辑器自动完成。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-09T16:32:58.457

受到[yarkee 的](https://stackoverflow.com/questions/15971735/running-a-single-test-from-unittest-testcase-via-the-command-line/15971942#15971942)启发，我将它与我已经得到的一些代码结合起来。您也可以从另一个脚本中调用它，只需调用该函数`run_unit_tests()`而不需要使用命令行，或者只需从命令行使用`python3 my_test_file.py`.

```
import my_test_file
my_test_file.run_unit_tests() 
```

遗憾的是，这只适用于 Python 3.3 或更高版本：

```
import unittest

class LineBalancingUnitTests(unittest.TestCase):

    @classmethod
    def setUp(self):
        self.maxDiff = None

    def test_it_is_sunny(self):
        self.assertTrue("a" == "a")

    def test_it_is_hot(self):
        self.assertTrue("a" != "b") 
```

跑步者代码：

```
#! /usr/bin/env python3
# -*- coding: utf-8 -*-
import unittest
from .somewhere import LineBalancingUnitTests

def create_suite(classes, unit_tests_to_run):
    suite = unittest.TestSuite()
    unit_tests_to_run_count = len( unit_tests_to_run )

    for _class in classes:
        _object = _class()
        for function_name in dir( _object ):
            if function_name.lower().startswith( "test" ):
                if unit_tests_to_run_count > 0 \
                        and function_name not in unit_tests_to_run:
                    continue
                suite.addTest( _class( function_name ) )
    return suite

def run_unit_tests():
    runner = unittest.TextTestRunner()
    classes =  [
        LineBalancingUnitTests,
    ]

    # Comment all the tests names on this list, to run all Unit Tests
    unit_tests_to_run =  [
        "test_it_is_sunny",
        # "test_it_is_hot",
    ]
    runner.run( create_suite( classes, unit_tests_to_run ) )

if __name__ == "__main__":
    print( "\n\n" )
    run_unit_tests() 
```

稍微编辑一下代码，您可以传递一个包含您想要调用的所有单元测试的数组：

```
...
def run_unit_tests(unit_tests_to_run):
    runner = unittest.TextTestRunner()

    classes = \
    [
        LineBalancingUnitTests,
    ]

    runner.run( suite( classes, unit_tests_to_run ) )
... 
```

还有一个文件：

```
import my_test_file

# Comment all the tests names on this list, to run all unit tests
unit_tests_to_run = \
[
    "test_it_is_sunny",
    # "test_it_is_hot",
]

my_test_file.run_unit_tests( unit_tests_to_run ) 
```

* * *

或者，您可以使用*[load_tests 协议](https://docs.python.org/3/library/unittest.html#load-tests-protocol)*并在您的测试模块/文件中定义以下方法：

```
def load_tests(loader, standard_tests, pattern):
    suite = unittest.TestSuite()

    # To add a single test from this file
    suite.addTest( LineBalancingUnitTests( 'test_it_is_sunny' ) )

    # To add a single test class from this file
    suite.addTests( unittest.TestLoader().loadTestsFromTestCase( LineBalancingUnitTests ) )

    return suite 
```

如果您想将执行限制为一个测试文件，您只需将测试发现模式设置为您定义`load_tests()`函数的唯一文件。

```
#! /usr/bin/env python3
# -*- coding: utf-8 -*-
import os
import sys
import unittest

test_pattern = 'mytest/module/name.py'
PACKAGE_ROOT_DIRECTORY = os.path.dirname( os.path.realpath( __file__ ) )

loader = unittest.TestLoader()
start_dir = os.path.join( PACKAGE_ROOT_DIRECTORY, 'testing' )

suite = loader.discover( start_dir, test_pattern )
runner = unittest.TextTestRunner( verbosity=2 )
results = runner.run( suite )

print( "results: %s" % results )
print( "results.wasSuccessful: %s" % results.wasSuccessful() )

sys.exit( not results.wasSuccessful() ) 
```

参考：

1.  *[当 unittest 模块在脚本中时 sys.argv[1] 出现问题](https://stackoverflow.com/questions/2812218/problem-with-sys)*
2.  *[有没有办法循环并执行 Python 类中的所有函数？](https://stackoverflow.com/questions/2597827/is-there-a-way-to-loop-through-and-execute-all-of-the-functions)*
3.  *[在python中循环一个类的​​所有成员变量](https://stackoverflow.com/questions/1398022/looping-over-all-member-variables-of-a-class-in-python)*

* * *

`unittest.main()`或者，对于最后一个主程序示例，我在阅读方法实现后想出了以下变体：

1.  [https://github.com/python/cpython/blob/master/Lib/unittest/main.py#L65](https://github.com/python/cpython/blob/master/Lib/unittest/main.py#L65)

```
#! /usr/bin/env python3
# -*- coding: utf-8 -*-

import os
import sys
import unittest

PACKAGE_ROOT_DIRECTORY = os.path.dirname( os.path.realpath( __file__ ) )
start_dir = os.path.join( PACKAGE_ROOT_DIRECTORY, 'testing' )

from testing_package import main_unit_tests_module
testNames = ["TestCaseClassName.test_nameHelloWorld"]

loader = unittest.TestLoader()
suite = loader.loadTestsFromNames( testNames, main_unit_tests_module )

runner = unittest.TextTestRunner(verbosity=2)
results = runner.run( suite )

print( "results: %s" % results )
print( "results.wasSuccessful: %s" % results.wasSuccessful() )
sys.exit( not results.wasSuccessful() ) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-08-04T14:39:04.660

如果您想直接从脚本（例如，从 jupyter notebook）运行测试，您可以这样做来只运行一个测试：

```
from testMyCase import MyCase
unittest.main(argv=['ignored', '-v', 'MyCase.testItIsHot'], exit=False) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-18T15:22:30.097

对我有用的是：

```
cd project_dir
python -m unittest -v path\to\test\testMyCase.py -k my_test_name 
```

-v 用于 unittest 详细日志输出。*

# winforms - 尝试从 c# 更改密码时访问被拒绝

> ID：15971736
> 
> 赞同：1
> 
> 时间：2013-04-12T12:43:14.053
> 
> 标签：winforms, active-directory, access-denied, citrix, change-password

我写了一个工具，允许用户更改他们的 AD 密码。此工具在我的公司域上运行没有问题，但是在使用 citrix 的客户机器上运行它时，我收到以下错误消息：

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.UnauthorizedAccessException：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）---内部异常堆栈跟踪结束---在 System.DirectoryServices.DirectoryEntry.Invoke(String methodName, Object[] args) 在 System.DirectoryServices.AccountManagement.SDSUtils.ChangePassword( DirectoryEntry de, String oldPassword, String newPassword) at System.DirectoryServices.AccountManagement.ADStoreCtx.ChangePassword(AuthenticablePrincipal p, String oldPassword, String newPassword) at CitrixPWChangeBackend.ActiveDirectory.ChangePasswordForCurrentUser(String oldPw, String newPw, Boolean& errorWrongPw, Boolean& errorPasswordRules, String& errorMessage )

导致该错误的行是：

```
UserPrincipal.Current.ChangePassword(oldPw, newPw); 
```

“oldPW”当然是正确的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:45:45.050

“神奇”原因是该用户的策略导致属性“UserCannotChangePassword”为真。没有 Citrix 特定问题。

# ios - UIImage上传到jsp服务器

> ID：15971740
> 
> 赞同：0
> 
> 时间：2013-04-12T12:43:20.427
> 
> 标签：ios, jsp, upload, uiimage

我正在尝试将图像文件上传到服务器，但没有上传到下面我添加了我的代码

```
imageData = UIImageJPEGRepresentation(imageToUpload, 0.9f);

NSString *urlString =@"http://sample.com/LargeUpload.jsp";

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
[request setTimeoutInterval:10];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data;filename=\"\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n"dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [ NSURLConnection sendSynchronousRequest:request returningResponse:YES error: nil ]; 
```

# file - POSIX O_DIRECT 与 Windows FILE_FLAG_WRITE_THROUGH & FILE_FLAG_NO_BUFFERING

> ID：15971746
> 
> 赞同：5
> 
> 时间：2013-04-12T12:43:36.633
> 
> 标签：file, winapi, posix, device

据我所知，使用 POSIX`O_DIRECT`与`open()`阻止设备文件的工作方式与在 Windows 上结合`FILE_FLAG_WRITE_THROUGH`使用POSIX 和`FILE_FLAG_NO_BUFFERING`使用相同`CreateFile()`- 这是我正确假设的吗？

打开：

> **O_DIRECT**尽量减少进出该文件的 I/O 的缓存影响。一般来说，这会降低性能，但在特殊情况下很有用，例如当应用程序进行自己的缓存时。文件 I/O 直接与用户空间缓冲区进行。

创建文件：

> 如果使用了**FILE_FLAG_WRITE_THROUGH但未同时指定****FILE_FLAG_NO_BUFFERING** ，则系统缓存生效，则数据将写入系统缓存，但会立即刷新到磁盘。如果同时指定了**FILE_FLAG_WRITE_THROUGH**和**FILE_FLAG_NO_BUFFERING** ，则系统缓存不起作用，则数据会立即刷新到磁盘，而无需通过 Windows 系统缓存。操作系统还请求将硬盘的本地硬件缓存写入持久媒体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T12:47:21.290

是的，在 Windows 系统中使用这两个标志的效果与`O_DIRECT`在 POSIX 系统中使用的效果非常相似。由于这是两个不同的操作系统，您可以预期没有完全匹配。

但是，除非您试图准确了解文件系统的工作方式，否则您会从这两个选项中获得“*不要缓冲数据，并尽快将其直接写入磁盘”。*

# http - 在 Cache-Control HTTP 标头中设置 max-age 和 s-maxage 是否有意义？

> ID：15971747
> 
> 赞同：35
> 
> 时间：2013-04-12T12:43:38.027
> 
> 标签：http, caching, http-headers

考虑到 max-age 适用于所有缓存，而 s-maxage 仅适用于共享缓存（代理和网关缓存）......

**在不可过期和公共页面中使用这两个指令是否有意义？**

控制器伪代码：

```
w = Response();
w.setPublic();
w.setMaxAge("1 year");
w.setShareMaxAge("1 year");

return w; 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-12T13:44:15.290

从[HTTP 标头字段定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.3)：

> # 14.9.3 基本过期机制的修改
> 
> ...
> 
> ### s-maxage
> 
> 如果响应包含 s-maxage 指令，那么对于共享缓存（但不针对私有缓存），此指令指定的最长期限将**覆盖**max-age 指令或 Expires 标头指定的最长期限。
> 
> ...

注意，“**覆盖**”。因此，仅当您打算为共享缓存指定不同的最大年龄时才有意义，与`max-age`最终用户将使用的 相比。

在您的特定示例中，它们是相同的，因此`s-maxage`无需指定。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-22T23:24:20.920

定义中要注意的关键点是**共享缓存**

来自[HTTP 标头字段定义](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.3)

> # 14.9.3 基本过期机制的修改
> 
> ...
> 
> ### s-maxage
> 
> 如果响应包含 s-maxage 指令，那么对于**共享缓存**（但**不**针对**私有缓存**），此指令指定的最长期限将**覆盖**max-age 指令或 Expires 标头指定的最长期限。
> 
> ...

这意味着 varnish、cloudfront、cloudflare 等反向代理/缓存的缓存期限可能与浏览器缓存不同。我个人更喜欢的价值`s-maxage`高于`maxage`

在 HTTP 1.1 中，响应被缓存后，您无法联系浏览器来使缓存无效，但您可以将其告知 CDN。

# jquery - Jquery通过多级点击更改内容

> ID：15971750
> 
> 赞同：0
> 
> 时间：2013-04-12T12:43:42.180
> 
> 标签：jquery, jquery-ui

**问题：**

我正在尝试制作一个小的 jQuery 内容框，用户可以通过它从 3 个顶级选项中单击他们感兴趣的部分。一旦他们选择了一个，他们就会在此处看到一个链接列表。单击这些链接之一，然后加载嵌入在 div 中的 youtube 视频。

所以目前我让它工作，以便用户可以单击将成为选项卡的内容，然后在选项卡中显示列表。下一部分，用户点击视频名称，然后加载`li`项目或`div`嵌入媒体，不起作用。

**我在这里有一个演示：http:** [//jsfiddle.net/CVyAD/](http://jsfiddle.net/CVyAD/)

请注意一些类名是相似的，我只是快速将它们放在一起尝试演示我的问题。

我不确定我是否以正确的方式处理这个问题，以及是否有更好的方法来实现我正在做的事情。任何指针，提示将不胜感激。这个例子感觉很接近，但很混乱。而且我不明白为什么第 3 级没有显示，我使用了与上述级别相同的原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:53:08.067

这是因为您的 id 是以 vidsvid-1 而不是 vids1 的形式出现的...检查一下：

[http://jsfiddle.net/CVyAD/2/](http://jsfiddle.net/CVyAD/2/)

```
-$(document).ready(function() {
    var activeId = $(".active").attr("id").replace("tab",""); 
    $("#content" + activeId).show();

    $(".tab li").click(function() {
      $(".controls").hide();
      $(".tab li.active").removeClass("active");
      $(this).addClass("active")
      var id = $(this).closest("li").attr("id").replace("tab","");
      $("#content" + id).show();
   });

    $(".tabAlt li").click(function() {
      $(".videos").hide();
      $(".tabAlt li.active").removeClass("active");
      $(this).addClass("active")
      var id = $(this).closest("li").attr("id").replace("tabAlt","");
      id = id.replace("vid-",""); //this is the line i added
      $("#vids" + id).show();
   });
}); 
```

# c - 如何避免在每次“返回”之前调用 free()

> ID：15971755
> 
> 赞同：1
> 
> 时间：2013-04-12T12:43:54.657
> 
> 标签：c, free

我面临一个 free() 的问题，什么是 malloc()。有没有办法避免在下面的代码中多次写 free(p) ？

```
char *p = (char*) (malloc(100 * sizeof(char)));
if (A)
{
    free(p);
    p=NULL;
    return -1;
}
a++;
if (B)
{
    free(p);
    p=NULL;
    return -1;
}
b++;
if (C)
{
    free(p);
    p=NULL;
    return -1;
}
free(p);
p=NULL;
return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:46:37.580

这可能不受欢迎，但您可以`goto`在函数末尾使用单个标签进行清理

```
 char *p = malloc(100);
    int ret = -1;
    if (A)
        goto cleanup;
    a++;
    if (B)
        goto cleanup;
    b++;
    if (C)
        goto cleanup;
    ret = 0; /* success */
cleanup:
    free(p);
    return ret; 
```

请注意，我对您的代码做了一些其他的小改动

*   从返回中删除演员表`malloc`
*   `sizeof(char)`从您的分配计算中删除了使用。这保证为 1
*   `p`删除函数末尾的NULLing 。它即将超出范围，因此它指向已释放的内存并不重要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:46:47.267

goto怎么样。在这种资源回收的情况下，这样做并不是一件坏事，并且由于不重复代码，从 DRY 的角度来看实际上是件好事。

```
// set res and then 
if (A) { goto cleanup;}
a++;
if (B) { goto cleanup;}
...
cleanup:
 free(p);
 p = NULL;
 return res; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:47:22.050

它总是取决于你想证明什么……有很多回报可以证明早点出来，有时还可以简化阅读。但是，在某些情况下，它会强制复制大量代码。我个人更喜欢在方法中有一个返回点，并通过嵌套的 ifs 进行逻辑。

阅读起来有点复杂，但你确定你不会忘记一个免费的......

```
int retCode = -1;

if (!A)
{
    a++;
    if (!B)
    {
        b++;
        if (!C)
        {
            retCode = 0;
        }
    }
}

free(p);
p=NULL;
return retCode; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:46:50.060

您可以使用`goto`. `goto`这是在 C 中量身定制的典型用例之一。

```
if(condition) 
{ 
    goto cleanup;
}

cleanup:
    free(ptr);
    ptr = NULL; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:51:08.773

```
char *p = malloc(100);

// Step 1: evaluate the conditions
int aTrue = A ? 1 : 0;
int bTrue = B ? 1 : 0;
int cTrue = C ? 1 : 0;
free(p);
p = NULL;

// Step 2: evaluate the consequences
if (aTrue) return -1;
a++;
if (bTrue) return -1;
b++;
if (cTrue) return -1;

return 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T12:54:41.137

另一种选择：

```
char *p = (char*) (malloc(100 * sizeof(char)));

if (!A) {
    a++;
    if (!B)
        b++;
}

free(p);
p=NULL;

if (A || B || C)
    return -1;

return 0; 
```

# python - “值”对象不支持索引

> ID：15971756
> 
> 赞同：0
> 
> 时间：2013-04-12T12:43:58.413
> 
> 标签：python, django, advanced-search

这是我编写的一些代码，用于对某些具有属性的子通道进行高级搜索，并且每个属性的值都在不同的表中。它给了我这个错误：`'Value' object does not support indexing at line 35`

```
sub_id = request.GET['sub_ch_id']
attributes = Attribute.objects.filter(subchannel_id = sub_id)
values =[]
print "attributes"
# print request
post = []
value_obj =[]
for w in attributes:
    name = w.name
    print request.GET[name]
    values.append(request.GET[name])

result_search_obj = []
flag = False
result_search = []
result = []
post = []
i = 0
f = i+1
# post_temp = ""

# print "HIIIIII", len(result_search_obj)
for j in range(0,len(attributes)):
    # print 'EREEEEEEE'
    result_search_obj+=(Value.objects.filter(attribute_id = attributes[j].id 
        , value = values[j]))
    # print '1st loop'
result_search = [[] for o in result_search_obj]    
for k in range(0,len(result_search_obj)):
    # print '2 loop'
    for l in range(0,len(result_search_obj)):
        print 'why u dnt go here'

        result_search[k].append(result_search_obj[k][l].Post_id)
        # print '4 loop'
for a in range(0,len(result_search)):

    result_search.sort(len(result_search[k]))
    # print '6 loop'
for h in range(0,len(result_search)):

    post_temp = ""
    # print '3 loop'
    for g in result_search[h]:
        tmp=result_search[h]
        loc = temp[g]
        if loc == result_search[h+1][g]:
            flag = True
            post_temp = tmp[g]
            break
    post = post_temp
print post

return HttpResponse('filter_post_channel.html', {'posts' : post}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:10:19.137

我认为问题在于这一行：

```
result_search_obj+=(Value.objects.filter(attribute_id = attributes[j].id 
    , value = values[j])) 
```

您正在创建一个元组并将其附加到一个列表中。您希望将元组添加为元组，但 Python 将元组展平并添加其元素。

所以你需要改变你的行来创建一个列表并将它附加到`result_search_obj`

```
result_search_obj+= [ (Value.objects.filter(attribute_id = attributes[j].id 
    , value = values[j])) ] 
```

样品测试

```
>>> x=[]
>>> x += (1, 2)
>>> x
[1, 2]
>>> x += [(1, 2)]
>>> x
[1, 2, (1, 2)]
>>> x += (1, 2)
>>> x
[1, 2, (1, 2), 1, 2]
>>> 
```

# jquery - “即时”更改 CSS 属性

> ID：15971758
> 
> 赞同：14
> 
> 时间：2013-04-12T12:43:59.563
> 
> 标签：jquery, css, jquery-animate, slideshow

我有这个垂直幻灯片可以通过向上/向下箭头导航。幻灯片的容器 div 中有 7 个项目（div），但一次只有 3 个可见。事实上，这个幻灯片是一个菜单——从可见的 3 个项目中，中间的一个是可点击的，它将在页面的其他地方加载 div 中的内容。

现在，由于有 3 个项目并且只有第 2 个项目（中间一个）是可点击的，我需要在它们之间创建一个差异。所以，我想像这样更改项目边框/边框半径：

![在此处输入图像描述](https://i.stack.imgur.com/YFqq4.jpg)

问题是我不知道如何做到这一点，因为 div 在可见区域中不断改变位置。我在这里真的需要帮助。

HTML 标记：

```
<div id="rocksType_btns">
    <div id="rocksType_btnUp"></div>
    <div id="rocksType_btnDown"></div>
</div>

<div id="rocksType_subtypeSlider">
    <div id="rocksType_DBitems_container">
        <div id="rocksType_DB_1" class="rocksType_DBitem">Item 1</div>
        <div id="rocksType_DB_2" class="rocksType_DBitem">Item 2</div>
        <div id="rocksType_DB_3" class="rocksType_DBitem">Item 3</div>
        <div id="rocksType_DB_4" class="rocksType_DBitem">Item 4</div>
        <div id="rocksType_DB_5" class="rocksType_DBitem">Item 5</div>
        <div id="rocksType_DB_6" class="rocksType_DBitem">Item 6</div>
        <div id="rocksType_DB_7" class="rocksType_DBitem">Item 7</div>
    </div>
</div> <!-- End of id="rocksMenu_subtypeSlider" --> 
```

我已经为之前/当前/之后状态定义了 CSS 代码 - 只需要分配它们。

这是一个[小提琴](http://jsfiddle.net/MeVcy/)。

谢谢。

佩德罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:34:05.677

试试这样的东西......

HTML：

```
<div id="viewport">
    <ul id="list">
        <li class="above">Foo</li>
        <li class="selected">Bar</li>
        <li class="below">Barf</li>
        <li>Boo</li>
        <li>Huh</li>
        <li>Wha</li>
        <li>Oh</li>
    </ul>
</div>
<a href="#" id="up">UP</a> -- <a href="#" id="down">DOWN</a> 
```

CSS：

```
#viewport{
    height: 175px;
    overflow: hidden;
    padding: 0;
}

ul{
    list-style-type: none;
    padding: 0;
    margin: 0;
}

li{
    border: 1px solid #ccc;
    width: 70px;
    height: 50px;
    line-height: 50px;
    padding: 0 0 0 30px;
    margin: 5px;
    font-size: 1.5em;
    color: #999;
    background-color: #fed;
}

li.selected{
    border-radius: 20px;
    background-color: #fe0
}

li.above{
    border-radius: 10px;
    border-top-left-radius: 35px;    
}

li.below{
    border-radius: 10px;
    border-bottom-left-radius: 35px;    
} 
```

JS：

```
var viewport = $('#viewport'),
    list = $('#list'),
    itemHeight = $('li', list).first().outerHeight(),
    btnUp = $('#up'),
    btnDown = $('#down'),
    busy = false,
    selected, above, below;

var update = function(){
    selected = $('li:nth-of-type(2)', list).addClass('selected', 200);
    above = selected.prev().addClass('above', 200);
    below = selected.next().addClass('below', 200); 
    setTimeout(function(){ busy = false; }, 200);
};

var goUp = function(){
    if(busy) return; else busy = true;
    $('li', list).removeClass('selected above below');
    list.animate({marginTop: -itemHeight}, 600, 'easeOutBounce', function(){ 
        list.css({marginTop: 0}).append($('li', list).first());
        update();
    });
}
var goDown = function(){
    if(busy) return; else busy = true;
    $('li', list).removeClass('selected above below');
    list
        .css({marginTop: -itemHeight})
        .prepend($('li',list).last())
        .animate({marginTop: 0}, 600, 'easeOutBounce', update);
}
btnUp.on('click', goUp);  
btnDown.on('click', goDown); 
```

[在这里拉小提琴](http://jsfiddle.net/sjWJP/3/)。[稍微花哨的版本](http://jsfiddle.net/sjWJP/7/)。

我认为做到这一点的唯一方法是跟踪是什么，而不是围绕动画构建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:07:40.810

看看我的改动。

**更新：链接包括管理上一课和下一课的风格**

**更新：删除花哨颜色的链接**

[http://jsfiddle.net/M3QkB/5/](http://jsfiddle.net/M3QkB/5/)

这是我所做的更改，显然样式仍有待完成：

在 up 方法中：

```
 $('.rocksType_DBitem').removeClass('current');
    $('.rocksType_DBitem').removeClass('before');
    $('.rocksType_DBitem').removeClass('after');
    var middleRock = rocksType_place;
    rocksType_place--;           
    $('#rocksType_DBitems_container :eq(' + middleRock + ')').addClass('current');
    $('.current').prevAll().addClass('before');
    $('.current').nextAll().addClass('after'); 
```

在 down 方法中：

```
 $('.rocksType_DBitem').removeClass('current');
    $('.rocksType_DBitem').removeClass('before');
    $('.rocksType_DBitem').removeClass('after');
    rocksType_place++;
    var middleRock = rocksType_place + 1;        
    $('#rocksType_DBitems_container :eq(' + middleRock + ')').addClass('current');
    $('.current').prevAll().addClass('before');
    $('.current').nextAll().addClass('after'); 
```

通用代码可以重构为清理我们添加的类等功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:12:42.670

我会分配 3 个`CSS`类，例如`.before`,`.current`并`.after`在您移动项目时移动它们。您可以将边框设置分配给这些类。

这是一个示例小提琴：http: [//jsfiddle.net/DBBVU/3/](http://jsfiddle.net/DBBVU/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:20:35.250

最好的方法是在中间 div 上分配一个具有不同边框的 css-class。因为它是可点击的，所以你不知道它在哪里。然后你以同样的方式删除它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:09:04.993

如果您可以管理三个可见 div 获得一个额外的类，那么您可以将 CSS 应用于它们以更改边框半径。我猜幻灯片是用一些 javascript 创建的？如果是，您可以查看代码并尝试找出将不同的 CSS 类分配给 3 个 div。

# database - 使用经典 asp 连接 accdb 文件时出现错误代码“80004005”

> ID：15971759
> 
> 赞同：1
> 
> 时间：2013-04-12T12:44:01.510
> 
> 标签：database, ms-access, asp-classic, database-connection

很长一段时间以来，我一直在尝试使用 classic-asp 将 .accdb 文件连接到 HTML 文件。下面是我到目前为止的代码，用于建立无法正常工作的连接的桥梁。

```
<%@Language=VBScript %>
<%
Dim adoCon
Dim rsLogbook
Dim strSQL
Set adoCon = Server.CreateObject("ADODB.Connection")
adoCon.Open "DRIVER={Microsoft Access Driver (*.mdb, *.accdb)}; DBQ=" & Server.MapPath("DatabaseName.accdb")
Set rsLogbook = Server.CreateObject("ADODB.Recordset")
strSQL = "SELECT TableName.FieldName FROM TableName;"
rsLogbook.Open strSQL, adoCon
Response.Write ("<br>")
Response.Write (rsLogbook("FieldName"))
rsLogbook.Close
Set rsLogbook = Nothing
Set adoCon = Nothing
%> 
```

当我使用 .mdb 文件时，该链接运行良好，但我不能这样做，因为我需要一些仅由 .accdb 文件支持的额外功能。

下面是我得到的错误代码

> 用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误“80004005”
> 
> [Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

我试过用谷歌搜索错误代码并提供帮助，但我得到的只是 IIS 修复，我不需要这些修复，因为我将它上传到托管网站进行测试。

注意：我可以使用 classic-asp 而不是 asp.net :)

# android - 对我的结构活动的建议（Android）

> ID：15971760
> 
> 赞同：2
> 
> 时间：2013-04-12T12:44:03.357
> 
> 标签：android, android-activity, structure

我在 onCreate/onPause 等中有很多通用代码...

我创建了一个扩展 Activity 的 CommonActivity 并挖掘了扩展它的活动（哦，现在一切正常）

但是...现在我需要一个 ListActivity （带`setListAdapter`）和 CommonActivity 的所有通用代码

（obs 我使用 Sherlock 操作栏，我不直接扩展 Activity/ListActivity）显示我的问题：

![结构问题](https://i.stack.imgur.com/KUtTm.jpg) （对不起，绘画模式开启！）

我怎样才能做到这一点？

编辑：我需要 ListView 来使用它（我不知道其他方式）：

```
ArrayAdapter<MyBean> adapter = new ArrayAdapter<MyBean>(this,    android.R.layout.simple_list_item_1, values);
setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:24:53.877

您不需要`ListActivity`使用以下代码段：

```
ArrayAdapter<MyBean> adapter = new ArrayAdapter<MyBean>(this, android.R.layout.simple_list_item_1, values);
setListAdapter(adapter); 
```

`ListView`正如我已经指出的那样，只需稍作修改，相同的命令对对象有效，请参见[此处](http://developer.android.com/reference/android/widget/ListView.html#setAdapter%28android.widget.ListAdapter%29)：

```
ArrayAdapter<MyBean> adapter = new ArrayAdapter<MyBean>(this, android.R.layout.simple_list_item_1, values);
setAdapter(adapter); 
```

# asp.net-mvc-4 - MVC4 模型生命周期

> ID：15971762
> 
> 赞同：1
> 
> 时间：2013-04-12T12:44:06.983
> 
> 标签：asp.net-mvc-4

我正在使用 Asp.net mvc4 构建一个 Web 应用程序......而且我对这个主题很陌生。

我的模型正在打开与数据库的连接（不是 sql db，没有 EF）。

在控制器上，`Index()`我创建了一个模型实例，然后将其传递给视图 ( `return View(model)`) 以显示数据……一切都很好。

`Index`在每次刷新页面时调用（IE 中的 F5）。这意味着我在每次刷新时都会创建一个模型实例。该模型在其析构函数中包含对“ `MyDB.CloseConnection()`”的调用 - 但它从未被调用。

问题：控制器和模型的寿命是多少？（我希望在页面完全显示后调用析构函数）。我阅读了有关页面生命周期的各种文档，但没有找到关于何时处理模型或控制器的具体提示。

在方法中创建模型的新实例通常是一个好主意`Controller.Index()`，还是应该在“全局”（尽管用户特定）“空间”中保留引用？这样的“空间”会是什​​么？

感谢您的任何提示，蒂洛

（如果分析器是“RTFM！”-> 推荐的 M 是多少？;-)

# css - css webapp窗口调整大小导致div对于窗口来说太大了

> ID：15971765
> 
> 赞同：0
> 
> 时间：2013-04-12T12:44:14.587
> 
> 标签：css, html, window

代码见链接...

使用此代码，页面在调整大小时也为我提供了适当的宽度。但是高度必须用 jQuery 来调节。这给了我一个 div，其中高度比我想要的 100% 高一点，并且在调整页面高度时不会改变......

`Here is the code:` [http://jsfiddle.net/T6Uv4/](http://jsfiddle.net/T6Uv4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:49:19.710

这取决于您要执行的操作。但如果你改变`position: absolute;`它`position: fixed;`应该像页面一样调整大小。

但是，如果您在页面上有滚动条，那么您可能不希望它停留在页面上的相同位置。

它不是动态的问题，`position: absolute;`因此如果您更改浏览器大小，它会保持其原始大小，就像页面首次加载时一样。如果您在更改浏览器后 CRTL+F5 页面，内容将弹出到它应该出现的位置`position: absolute;`

这是一个`position: relative;` [Jsfiddle](http://jsfiddle.net/FDZnG/1/)

这是您的jQuery代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
  var windowHeight = $(window).height();
    $('#content').css({'height':windowHeight+'px'});
});
</script> 
```

这更多是您想要的吗？

新的 jsfiddle 更新：[更新的小提琴](http://jsfiddle.net/T6Uv4/1/)

您需要删除主体填充和边距以及容器周围的边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:50:33.350

我试图解释这种行为：

如果您的屏幕分辨率为 1000px（仅作为示例），则 80% 为 800px。但是如果将页面大小调整为 500 像素宽，则 80% 的页面会捕获 400 像素。那些 400px + 210px 边距= 610px（不是 500px！）

**解决方案：**尝试将 left`margin`和 your`padding`放在 porcentual 值或 em 单位中，以使内容内的边距调整大小。

这是一个[小提琴](http://jsfiddle.net/wMDQt/)。

请注意，当您调整屏幕大小时，滚动条会再次出现。您可以修复它，将边框更改为*em*单位。完美的解决方案是在整个页面中设置没有固定值。

对于更复杂的尺寸调整，您可以使用[Mediaqueries](http://www.w3.org/TR/css3-mediaqueries/)

# java - 从主类传递参数

> ID：15971767
> 
> 赞同：0
> 
> 时间：2013-04-12T12:44:19.337
> 
> 标签：java

我想问别人简单的问题，但不是我——因为我是初学者。在“public JavaApplication6()”下将参数从“main”传递给变量“server”时我有一点问题简单的代码说清楚：

```
public final class JavaApplication6 {
String server;
    public static void main(String[] args) throws IOException {
    }
    public  JavaApplication6() {
        server=main(args[0]);  ??                            //here is the problem - how to pass ?
    }
} 
```

例如，如果我在 cmd 下使用参数“java JavaApplication6 someargument”运行此应用程序，我想将字符串 someargument 分配给变量“server”，因此它将是：server==someargument，然后例如使用 System.out.println(server ) 显示字符串'someargument'。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:46:04.903

您从命令行将参数传递给 main。不在构造函数中。构造函数用于初始化类变量。

```
public final class JavaApplication6 {
    String server;

    //public constructor
    public  JavaApplication6(String s) {
        server=s;
    }
    //here is where the execution begins.
    public static void main(String[] args) throws IOException {
    //create a object of your class 

        JavaApplication6 app = new JavaApplication6(/*here is where you pass the arguments to the constructor*/ args[0]);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:50:04.183

```
public final class JavaApplication6 
{
  String server;

  public static void main(String[] args) throws IOException
  {
    JavaApplication6  obj = new JavaApplication6(args[0]);//pass zeroth argument
  }

  public  JavaApplication6(String s) {
    server = s; 
    System.out.println(s); 
  }
} 
```

运行代码时，请确保传递参数，否则将引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:54:54.373

尝试这个

```
public final class JavaApplication6 {

String server;

public  JavaApplication6(String server) {
    this.server =  server;
}

public static void main(String[] args) throws IOException {
    JavaApplication6 jv = new JavaApplication6(args[0]);
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:08:08.783

```
import java.io.IOException;

public final class JavaApplication6  
{

    String server;

    public static void main(String[] args) throws IOException {
        JavaApplication6  jApp = new JavaApplication6 (args[0]);
    }

    public JavaApplication6 (String s) {
        server = s;
    }
} 
```

像下面这样运行程序

**java JavaApplication6“本地主机”**

# python-2.7 - 在Python中以（x，y）坐标绘制箭头

> ID：15971768
> 
> 赞同：4
> 
> 时间：2013-04-12T12:44:21.510
> 
> 标签：python-2.7, matplotlib, computational-geometry

我在绘制箭头方向时遇到了一些问题。我有它们的点（x，y）坐标和角度。我想要做的是根据给定的角度绘制箭头（只是将点方向显示为每个点坐标中的箭头）。在这里，我们应该假设**'+x'、'+y'、'-x'、'-y'的坐标分别是90、0、270、180度**。

我对Python绘图工具有点陌生。无论我使用 pylab 还是其他一些模块，我仍然不确定是否绘制方向点（基于角度的箭头），或者..仍然不确定。我将以下代码作为示例以提供更好的描述：

```
 # Inputs:
 x = np.array([ 2, 4, 8, 10, 12, 14, 16])
 y = np.array([ 5, 10, 15, 20, 25, 30, 35])
 angles = np.array([45,275,190,100,280,18,45]) 

 import numpy as np
 import scipy as sp
 import pylab as pl

 def draw_line(x,y,angle):

     # First, draw (x,y) coordinate ???
     # Second, according to the angle indicate the direction as an arrow ??? 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T12:51:45.963

您可以使用 绘制箭头[`matplotlib.pyplot.arrow(x, y, dx, dy, hold=None, **kwargs)`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.arrow)。您似乎遇到困难的部分是定义偏移量`dx`并`dy`给出角度和箭头长度`r`。对于`angle`以弧度为单位的极坐标

```
dx = r*cos(angle)
dy = r*sin(angle) 
```

使您的`draw_line`功能变为

```
def draw_line(x, y, angle):
    r = 1  # or whatever fits you
    arrow(x, y, r*cos(angle), r*sin(angle)) 
```

这将绘制一个箭头，从 开始，`(x,y)`长度`angle`为`1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T22:37:16.890

您指定的角度遵循地图约定，而笛卡尔约定的 (+x, +y, -x, -y) 分别为 (0, 90, 180, 270)。他们也会采取弧度。要转换角度：

```
import math
cartesianAngleRadians = (450-mapAngleDegrees)*math.pi/180.0 
```

这是根据您提供的 x,y 点绘制刻度线的源代码。

```
import numpy as np
import scipy as sp
import pylab as pl
import math

x = np.array([ 2, 4, 8, 10, 12, 14, 16])
y = np.array([ 5, 10, 15, 20, 25, 30, 35])
angles = np.array([45,275,190,100,280,18,45]) 

def draw_line(x,y,angle,length):
  cartesianAngleRadians = (450-angle)*math.pi/180.0
  terminus_x = x + length * math.cos(cartesianAngleRadians)
  terminus_y = y + length * math.sin(cartesianAngleRadians)
  pl.plot([x, terminus_x],[y,terminus_y])
  print [x, terminus_x],[y,terminus_y]

pl.axis('equal')
pl.axis([-5,20,-5,40])
for i in range(0,len(x)):
  print x[i],y[i],angles[i]
  draw_line(x[i],y[i],angles[i],1)

pl.show() 
```

# elasticsearch - 在哪里可以找到 NEST 的变更日志？

> ID：15971769
> 
> 赞同：0
> 
> 时间：2013-04-12T12:44:21.980
> 
> 标签：elasticsearch, nuget, nest

我们使用（和喜欢）NEST 从 C# 访问 elasticsearch。[如 NEST ( http://nuget.org/packages/NEST](http://nuget.org/packages/NEST) )的 nuget oage 中所述，有频繁的发布。我试图找到某种形式的变更日志，但只能找到 git 提交。

我搜索了文档（[http://nest.azurewebsites.net/](http://nest.azurewebsites.net/)）、源代码库（[https://github.com/Mpdreamz/NEST](https://github.com/Mpdreamz/NEST)）和 nuget 站点，但没有找到。

是否存在某种变更日志，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:28:42.757

我尽力编写适当的发行说明并将它们作为公告放在 github 问题上：

[https://github.com/Mpdreamz/NEST/issues](https://github.com/Mpdreamz/NEST/issues)

我通常还发布关于新版本的推文，其中包含指向描述该版本中新内容的票证的链接。

感谢您让我意识到这可能不是传达新版本的最明显方式！

# c# - 需要 SQL Server 2008 连接字符串帮助

> ID：15971770
> 
> 赞同：1
> 
> 时间：2013-04-12T12:44:23.167
> 
> 标签：c#, asp.net, sql-server-2008-r2

我继承了一个 ASP.NET 项目，其中包含一个连接字符串，其中 DataSource 设置为：

```
"Data Source=.\\\sql2008" 
```

我以前没有见过这种类型的东西。谁能解释一下是什么`.\\\`意思？此外，零件设置为的正确技术术语是`sql2008`什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:50:59.680

句点 (.) 表示 sql server 与 asp.net 应用程序在同一个盒子上运行。

我的预感是您发布的连接字符串是从 ac# 字符串文字中提取的。\\ 实际上只是一个斜杠，但您需要在 C# 中对其进行转义，转义字符是另一个 \。

sql2008 是实例名称。Sql server 可以在一台主机上安装多次。默认实例只能有一个，可以在没有\InstanceName 后缀的情况下引用。您可以有多个命名实例。在连接字符串中使用命名实例后缀是您指定要连接到哪个实例的方式。

编辑：如果“datasource=sql2008”有效，那么您的服务器名称可能是 sql2008，并且您的数据库安装为默认实例。您可以通过检查服务控制面板小程序来确定您是否正在使用命名实例。如果您使用的是命名实例，则 sql 服务将被列为“SQL SERVER (MSSQLSERVER$INSTANCENAME)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:55:28.450

您好，我使用它，如果这对您有帮助：

```
Data Source= server_name; Initial Catalog=database_name; User ID=user_id;Password=password 
```

或尝试这样做：

```
Server=.\server_name;Database=database_name; User ID=user_id;Password=password 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:47:07.217

这是指在部署应用程序的机器上运行的本地 sql server 实例。sql2008 是正在连接的 sql server 的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:23:48.293

“ **.\”**总是表示从本地的当前位置开始

在 .NET 中，您可以通过在字符串前面放置 @ 或使用特殊值来表示要转义的字符来转义特殊字符。在这种情况下，您可以使用 \ 来表示 \

**".\\"** == **@".\"**

所以对我来说

**"数据源=.\\SQLServer2005"**等于**@"数据源=.\SQLServer2005"**

但

**“数据源 =.\\SQLServer2005”**或**“数据源 =.\\SQLServer2005”**

我不明白这可能意味着什么......

你可以试试这个吗？

```
 SqlConnection cnn ;
        String connetionString = "Data Source=ServerName;Initial Catalog=DatabaseName;User ID=UserName;Password=Password" 
        cnn = new SqlConnection(connetionString);
        try
        {
            cnn.Open();
            MessageBox.Show ("Connection Open ! ");
            cnn.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Can not open connection ! ");
        } 
```

词汇：

**数据来源**：SQL服务器地址，如果涉及实例“SQL EXPRESS”请注意->请添加 `..myadress..\SQLEXPRESS`

**初始目录**：来自您的 sql 服务器的数据库名称

**UserId**：在 sql server 上创建的用于访问定义的数据库的用户帐户

**密码**：是密码^^

# ruby-on-rails - 由于缺少 POST 路由，Spree Image 上传失败。为什么？

> ID：15971774
> 
> 赞同：0
> 
> 时间：2013-04-12T12:44:35.870
> 
> 标签：ruby-on-rails, routes, spree

当我在开发中运行我的 Rails 3 Spree 应用程序并将图像上传到产品时，我得到以下信息：

```
Started POST "/admin/products/other-product/images" for 127.0.0.1 at Fri Apr 12 22:27:46 +1000 2013
Processing by Spree::Admin::ImagesController#create as HTML
  Parameters: {"button"=>"", "image"=>{"viewable_id"=>"2", "alt"=>"", "attachment"=>#<ActionDispatch::Http::UploadedFile:0x7f6c16afbb38 @headers="Content-Disposition: form-data; name=\"image[attachment]\"; filename=\"minesweeper_example_alone_variables.png\"\r\nContent-Type: image/png\r\n", @original_filename="minesweeper_example_alone_variables.png", @tempfile=#<File:/tmp/RackMultipart20130412-28144-18934pd-0>, @content_type="image/png">}, "authenticity_token"=>"5sKQ4cysi+tUD4BMZlJIYhlnnQfWAqVoV65nckI8RAs=", "product_id"=>"other-product", "utf8"=>"✓"}
  Spree::User Load (0.2ms)  SELECT "spree_users".* FROM "spree_users" WHERE "spree_users"."id" = 1 LIMIT 1
   (0.1ms)  SELECT COUNT(*) FROM "spree_roles" INNER JOIN "spree_roles_users" ON "spree_roles"."id" = "spree_roles_users"."role_id" WHERE "spree_roles_users"."user_id" = 1 AND "spree_roles"."name" = 'admin'
  Spree::Product Load (0.1ms)  SELECT "spree_products".* FROM "spree_products" WHERE "spree_products"."permalink" = 'other-product' LIMIT 1
  Spree::Variant Load (0.1ms)  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."product_id" = 2 AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = 'f' ORDER BY "spree_variants".position ASC
  Spree::Variant Load (0.1ms)  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."product_id" = 2 AND "spree_variants"."is_master" = 't' LIMIT 1
Command :: identify -format %wx%h '/tmp/stream20130412-28144-bhw0tk-0.png[0]'
Command :: convert '/tmp/stream20130412-28144-bhw0tk-0.png[0]' -resize "48x48>" -strip -auto-orient '/tmp/stream20130412-28144-bhw0tk-020130412-28144-13nnruw-0'
Command :: identify -format %wx%h '/tmp/stream20130412-28144-bhw0tk-0.png[0]'
Command :: convert '/tmp/stream20130412-28144-bhw0tk-0.png[0]' -resize "600x600>" -strip -auto-orient '/tmp/stream20130412-28144-bhw0tk-020130412-28144-16xvtq9-0'
Command :: identify -format %wx%h '/tmp/stream20130412-28144-bhw0tk-0.png[0]'
Command :: convert '/tmp/stream20130412-28144-bhw0tk-0.png[0]' -resize "240x240>" -strip -auto-orient '/tmp/stream20130412-28144-bhw0tk-020130412-28144-nxogrs-0'
Command :: identify -format %wx%h '/tmp/stream20130412-28144-bhw0tk-0.png[0]'
Command :: convert '/tmp/stream20130412-28144-bhw0tk-0.png[0]' -resize "100x100>" -strip -auto-orient '/tmp/stream20130412-28144-bhw0tk-020130412-28144-1n2cil2-0'
Command :: identify -format %wx%h '/tmp/stream20130412-28144-bhw0tk-0.png[0]'
   (0.1ms)  begin transaction
  Spree::Asset Load (0.2ms)  SELECT "spree_assets".* FROM "spree_assets" WHERE ("spree_assets"."viewable_id" = 2) ORDER BY position DESC LIMIT 1
  SQL (0.3ms)  INSERT INTO "spree_assets" ("alt", "attachment_content_type", "attachment_file_name", "attachment_file_size", "attachment_height", "attachment_updated_at", "attachment_width", "position", "type", "viewable_id", "viewable_type") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["alt", ""], ["attachment_content_type", "image/png"], ["attachment_file_name", "minesweeper_example_alone_variables.png"], ["attachment_file_size", 7856], ["attachment_height", 271], ["attachment_updated_at", Fri, 12 Apr 2013 12:27:46 UTC +00:00], ["attachment_width", 110], ["position", 1], ["type", "Spree::Image"], ["viewable_id", 2], ["viewable_type", "Spree::Variant"]]
[paperclip] Saving attachments.
[paperclip] saving /home/robert/Code/Websites/sanair/public/spree/products/2/mini/minesweeper_example_alone_variables.png
[paperclip] saving /home/robert/Code/Websites/sanair/public/spree/products/2/large/minesweeper_example_alone_variables.png
[paperclip] saving /home/robert/Code/Websites/sanair/public/spree/products/2/product/minesweeper_example_alone_variables.png
[paperclip] saving /home/robert/Code/Websites/sanair/public/spree/products/2/small/minesweeper_example_alone_variables.png
[paperclip] saving /home/robert/Code/Websites/sanair/public/spree/products/2/original/minesweeper_example_alone_variables.png
   (164.1ms)  commit transaction
Redirected to http://localhost:3000/admin/products/other-product/images
Completed 302 Found in 545ms (ActiveRecord: 165.3ms) 
```

但是每当我在生产中运行我的 Spree 应用程序并上传相同的图像时，我都会得到：

```
Started POST "/admin/products/total-microbe-test/images" for ###.###.###.### at Fri Apr 12 08:47:32 -0400 2013

ActionController::RoutingError (No route matches [POST] "/products/total-microbe-test/images"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  railties (3.2.13) lib/rails/railtie/configurable.rb:30:in `send'
  railties (3.2.13) lib/rails/railtie/configurable.rb:30:in `method_missing'
  passenger (3.0.18) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  passenger (3.0.18) lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  passenger (3.0.18) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  passenger (3.0.18) lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  passenger (3.0.18) lib/phusion_passenger/rack/application_spawner.rb:171:in `send'
  passenger (3.0.18) lib/phusion_passenger/rack/application_spawner.rb:171:in `handle_spawn_application'
  passenger (3.0.18) lib/phusion_passenger/utils.rb:470:in `safe_fork'
  passenger (3.0.18) lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:180:in `start'
  passenger (3.0.18) lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  passenger (3.0.18) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rack_application'
  passenger (3.0.18) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  passenger (3.0.18) lib/phusion_passenger/spawn_manager.rb:246:in `spawn_rack_application'
  passenger (3.0.18) lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  passenger (3.0.18) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  passenger (3.0.18) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  passenger (3.0.18) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  passenger (3.0.18) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.18) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.18) helper-scripts/passenger-spawn-server:99 
```

所以看起来，在生产中，我的路线搞砸了。但是，我登录到生产服务器并运行：

```
bundle exec rake routes 
```

我得到的其中一条是：

```
POST     /admin/products/:product_id/images(.:format)   spree/admin/images#create 
```

所以现在我很困惑。路线应该在那里，但它的行为根本不像我期望的那样。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:18:57.740

好吧，我不会相信它，但它似乎是一个乘客错误。通过执行此处所说的操作为我解决了这个问题：[发送/放置请求的路由错误（乘客标题）](https://stackoverflow.com/questions/14116180/routing-error-with-post-put-requests-passenger-headers)

那个人是冠军。

# android - 在 Android Gridview 中显示复合项目

> ID：15971777
> 
> 赞同：2
> 
> 时间：2013-04-12T12:44:54.117
> 
> 标签：android, layout, gridview, custom-component

我正在尝试显示一个元素网格，每个元素由一个包含在 TextView 顶部的 ImageView 的 RelativeLayout 组成。

我已经看到[其他人](https://stackoverflow.com/questions/5046320/a-grid-layout-of-icon-text-buttons)问过同样的问题，并且我已经采用[了建议的解决方案](https://stackoverflow.com/questions/5046320/a-grid-layout-of-icon-text-buttons#5046586)；无论如何，在这个解决方案中，该`getView()`函数只返回一个 ImageView 项，而不是 TextView。我试图返回一个自定义项，它扩展了 RelativeLayout，但我无法在 Gridview 中看到元素。如果单击它们，我仍然会收到 Toast 消息（请参阅下面的侦听器代码），但屏幕上只能看到 Gridview 的（灰色）背景。

如果我只通过 ImageView 或 TextView ，如上面的解决方案中所建议的那样，我仍然可以看到单个项目。所以我的问题是如何管理 getView 以在自定义视图中返回两个项目。

到目前为止，这是我的代码：

活动类：

```
List<String> mItemsImage;
List<String> mItemsText;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylayout);

    mItemsImage = new ArrayList<String>();
    mItemsText = new ArrayList<String>();

    mGridView = (GridView) findViewById(R.id.mygridview);

    fillArraylists();

    mGridView.setAdapter(new CustomItemAdapter(this, mItemsImage, mItemsText));

    mGridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(MyActivity.this, "text is + "mItemsText.get(position), Toast.LENGTH_SHORT).show();
        }
    });
} 
```

适配器类：

```
class CustomItemAdapter extends BaseAdapter{
    private Context mContext;
    private List<String> mImageList;
    private List<String> mTextList;

    public CustomItemAdapter(Context c, List<String> imageList, List<String> textList) {
        mContext = c;
        mImageList = imageList;
        mTextList = textList;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        CustomItem item;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            item = new CustomItem(mContext, mImageList.get(position), mTextList.get(position));
            item.findViewById(R.id.grid_item);//Tried to add this line in a second moment, but it didn't work anyway
            item.setLayoutParams(new GridView.LayoutParams(parent.getWidth() >> 2, parent.getHeight() >> 2));
        } else {
            item = (CustomItem) convertView;
        }
        return item;
        //if I do 'return item.image' or 'return item.text' I can see the View on screen normally
    }
} 
```

自定义项类：

```
class CustomItem extends RelativeLayout{
    public ImageView image;
    public TextView text;

    public CustomItem(Context ctx, String imagepath, String description){
        super(ctx);

        image = new ImageView(ctx);
        image.findViewById(R.id.grid_item_image);
        image.setScaleType(ImageView.ScaleType.CENTER_CROP);
        image.setPadding(8, 8, 8, 8);
        image.setImageBitmap(BitmapFactory.decodeFile(imagepath));

        text = new TextView(ctx);
        text.findViewById(R.id.grid_item_text);
        text.setPadding(8, 0, 8, 0);
        text.setText(description);
    }
} 
```

mylayout.xml：

```
...

<GridView
    android:id="@+id/mygridview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background_lightgrey_rect"
    android:gravity="center"
    android:numColumns="2"
    android:stretchMode="columnWidth" >
</GridView> 
```

grid_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/grid_item" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/default_image"
        android:contentDescription="@string/image_not_found" />

    <TextView
        android:id="@+id/grid_item_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/grid_item_image"
        android:layout_centerHorizontal="true"
        android:text="@string/image_not_found"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:23:24.303

好的，我找到了解决方案的一部分。

基于[此](https://stackoverflow.com/questions/5324689/custom-adapter-for-gridview-in-android)，我将getView方法编辑如下：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    RelativeLayout item;

    if (convertView == null) {  // if it's not recycled, initialize some attributes
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        item = (RelativeLayout) inflater.inflate(R.layout.grid_item, null, true);
        ImageView image = (ImageView) item.findViewById(R.id.grid_item_image);
        image.setScaleType(ImageView.ScaleType.CENTER_CROP);
        image.setImageBitmap(BitmapFactory.decodeFile(mImageList.get(position)));

        TextView text = (TextView) item.findViewById(R.id.grid_item_text);
        text.setText(mTextList.get(position));
        item.setLayoutParams(new GridView.LayoutParams(parent.getWidth() >> 2, parent.getHeight() >> 2));

    } else {
        item = (RelativeLayout) convertView;
    }

    return item;
} 
```

而且我不再需要 CustomItem 类。

grid_item.xml 现在是：

```
<ImageView
    android:id="@+id/grid_item_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/grid_item_text"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:contentDescription="@string/image_not_found"
    android:src="@drawable/default_image" />

<TextView
    android:id="@+id/grid_item_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="@string/image_not_found"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

（不过，gridView 仍然存在一些可视化问题。第一个元素丢失了，我可以滚动到第二个元素上方）

# java - 让 GAE Shiro 和 Resteasy 一起工作

> ID：15971779
> 
> 赞同：3
> 
> 时间：2013-04-12T12:44:58.323
> 
> 标签：java, google-app-engine, jax-rs, resteasy, shiro

我正在尝试将 GAE-Shiro 和 Resteasy 组合在一起。所以我试着做一个快速端口。但是我收到此错误：

```
[ERROR] java.lang.RuntimeException: java.lang.InstantiationException: com.cilogi.shiro.guice.ServeModule
[ERROR]     at org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener.getModules(GuiceResteasyBootstrapServletContextListener.java:83)
[ERROR]     at org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener.contextInitialized(GuiceResteasyBootstrapServletContextListener.java:27)
[ERROR]     at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
[ERROR]     at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
[ERROR]     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
[ERROR]     at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
[ERROR]     at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
[ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[ERROR]     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[ERROR]     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[ERROR]     at org.mortbay.jetty.Server.doStart(Server.java:224)
[ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[ERROR]     at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
[ERROR]     at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
[ERROR]     at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
[ERROR]     at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
[ERROR]     at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
[ERROR]     at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
[ERROR]     at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
[ERROR]     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
[ERROR]     at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
[ERROR]     at com.google.gwt.dev.DevMode.main(DevMode.java:311)
[ERROR] Caused by: java.lang.InstantiationException: com.cilogi.shiro.guice.ServeModule
[ERROR]     at java.lang.Class.newInstance0(Class.java:359)
[ERROR]     at java.lang.Class.newInstance(Class.java:327)
[ERROR]     at org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener.getModules(GuiceResteasyBootstrapServletContextListener.java:70)
[ERROR]     ... 22 more 
```

这是我当前的 web.xml 配置

```
 <context-param>
        <param-name>resteasy.guice.modules</param-name>
<!--         <param-value>org.jboss.errai.ui.demo.server.MyServletModule</param-value> -->
        <param-value>com.cilogi.shiro.guice.ServeModule</param-value>
    </context-param>

    <listener>
        <listener-class>
            org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener
        </listener-class>
    </listener>

    <context-param>  
        <param-name>resteasy.servlet.mapping.prefix</param-name>  
        <param-value>/</param-value>  
    </context-param>

    <servlet>
        <servlet-name>Resteasy</servlet-name>
        <servlet-class>
            org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
        </servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Resteasy</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <context-param>
       <param-name>user-base-url</param-name>
       <param-value>/user/admin</param-value>
    </context-param>

    <context-param>
        <param-name>static-base-url</param-name>
        <param-value></param-value>
    </context-param>

    <listener>
        <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>com.cilogi.shiro.guice.ServeContextListener</listener-class>
    </listener>

    <mime-mapping>
        <extension>manifest</extension>
        <mime-type>text/cache-manifest</mime-type>
    </mime-mapping>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-17T01:16:01.257

我意识到这个问题已经有将近一年的历史了，但是我最近遇到了 Shiro（注意：不是 GAE-Shiro）和 RESTEasy 的类似问题，我想我会在这里发布我使用的解决方案，这样它可能会让其他任何经历过这个问题的人受益特别的问题。

问题是 RESTEasy`GuiceResteasyBootstrapServletContextListener`正在尝试创建一个需要将参数传递给它的模块（在我的情况下，它是一个`ShiroWebModule`需要`ServletContext`参数......在你的情况下，它看起来`com.cilogi.shiro.guice.ServeModule`需要传递一个字符串）。但是，当 RESTEasy 尝试创建模块时，它通过调用无参数构造函数来实现，然后由于没有参数而失败。

我决定采用的解决方案是扩展`GuiceResteasyBootstrapServletContextListener`和覆盖该`getModules(ServletContext ctx)`方法，以便如果`ServletContext`存在接受 a 的构造函数，则使用它，否则，使用默认的无参数构造函数。

例如：

```
公共类 MyBootstrapServletContextListener 扩展 GuiceResteasyBootstrapServletContextListener {

    @覆盖
    protected List getModules(final ServletContext context) {
        最终列表结果 = new ArrayList();
        final String modulesString = context.getInitParameter("resteasy.guice.modules");

        如果（模块字符串！= null）{
            final String[] moduleStrings = modulesString.trim().split(",");

            for (final String moduleString : moduleStrings) {
                尝试 {
                    log.info("找到模块：{}", moduleString);
                    最终类 cls = Thread.currentThread().getContextClassLoader().loadClass(moduleString.trim());
                    最终模块模块 = createModule(cls, context);
                    结果.add（模块）；
                } 捕捉（ClassNotFoundException e）{
                    抛出新的 RuntimeException(e);
                } 捕捉（IllegalAccessException e）{
                    抛出新的 RuntimeException(e);
                } 捕捉（实例化异常 e）{
                    抛出新的 RuntimeException(e);
                } 捕捉（IllegalArgumentException e）{
                    抛出新的 RuntimeException(e);
                } 捕捉（InvocationTargetException e）{
                    抛出新的 RuntimeException(e);
                }
            }
        }

        返回结果；
    }

    私有模块 createModule(Class cls, ServletContext context) 抛出 InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        构造函数构造函数 = null;

        尝试 {
            构造函数 = cls.getConstructor(ServletContext.class);
        } 捕捉（NoSuchMethodException e）{
            log.info("Class {} 没有只接受 ServletContext 参数的构造函数；默认为无参数构造函数。", cls);
        }

        返回构造函数 == null ？(模块) cls.newInstance() : (模块) 构造函数.newInstance(context);
    }

}

```

一旦这到位，我改为`web.xml`使用`MyBootstrapServletContextListener`RESTEasy's 而不是`GuiceResteasyBootstrapServletContextListener`RESTEasy 不再有问题。您应该能够执行类似的操作以允许 RESTEasy 将所需的 String 传递给`com.cilogi.shiro.guice.ServeModule`.

同样，我意识到您可能不再需要解决方案，但我在研究 Shiro 的类似问题时遇到了这个问题，并希望帮助其他试图在他们的 Web 应用程序中结合 RESTEasy 和 Shiro 的人。

# matlab - 使用 Matlab 实现 HMM

> ID：15971781
> 
> 赞同：2
> 
> 时间：2013-04-12T12:45:02.043
> 
> 标签：matlab, machine-learning, hidden-markov-models

我对 HMM 不太熟悉，但我想在 Matlab 中实现。我想使用这个工具箱[HMM Toolbox](http://www.mathworks.de/de/help/stats/hidden-markov-models-hmm.html#f10382)。我不确定我是否理解了我必须实现它的方式。如果有许多不同类别的状态训练序列。所以这就是我会这样做的方式：

1.  我为每个序列计算`[TRANS,EMIS] = hmmestimate(seq,states)`表示 HMM的转换和发射矩阵
2.  我将这些矩阵与属于哪个类的信息一起保存
3.  我对每个训练序列都这样做
4.  如果我得到一个用于分类的观察序列，我会使用 hmmviterbi(seq,TRANS,EMIS) 函数来计算我保存的每个 HMM 的“可能性”。
5.  最“可能”的一个（最高百分比）是我寻找的 HMM --> 我知道这个类

这是我可以实现 HMM 的方式吗？

我希望你能给我一些提示

顺便提一句。我知道我的英语不是那么好，但我希望它是可以理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:17:12.727

虽然我不知道 matlab 并且无法在该领域为您提供帮助，但您的步骤听起来是正确的。以下是我将实施它们的步骤：

*   您首先使用您的训练集创建一个模型来表示该集。
*   对您希望系统识别的每种情况重复此操作（例如，每种情况的模型）
*   当您有一个输入集时，您将其与每个模型进行比较并保留概率/置信度分数。
*   比较这些分数并选择最强的结果（假设它超过您设置的任何阈值）

编辑：我从上一个问题中找到了一个很好的[例子](https://stackoverflow.com/questions/9733090/issue-in-training-hidden-markov-model-and-usage-for-classification)。要回答您在评论中提供的链接是否正确，我不得不说是，但之前没有使用 matlab for HMM，因此无法确认这些功能的使用。我建议您查看上面上一个问题链接的答案并完成它，因为它更深入地解释了我上面的简单步骤。

# asp.net-mvc-4 - 编辑文本框的值时添加警告

> ID：15971789
> 
> 赞同：0
> 
> 时间：2013-04-12T12:45:35.920
> 
> 标签：asp.net-mvc-4

我认为这很简单，但我没有找到它。所以，我有一个表单，当用户编辑它时，我想在标签和特定字段的文本框之间显示一条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:48:55.637

只需向`onchange`事件添加一个函数：

```
 <input type="text" onchange="yourEvent()" />
 <span id="message" style="display:none">Your message</span>

 function yourEvent() {
     var msg = document.getElementById('message');
     msg.style.display = "block";
 } 
```

# c# - 如何将数据从 ActiveXObject("WScript.shell") 返回到 javascript 代码

> ID：15971797
> 
> 赞同：0
> 
> 时间：2013-04-12T12:46:12.843
> 
> 标签：c#, javascript, activex, wsh

我想从我的自定义程序返回数据，该程序使用添加到我的网站的 JavaScript 调用。

以下示例代码调用我的程序，但我不知道如何将消息从 C# .NET 程序返回到 JavaScript

```
<script language="javascript" type="text/javascript">
  function runApp() 
  { 
    var shell = new ActiveXObject("WScript.shell"); 
    shell.run("c:\myEXE.exe parm1 param2", 1, True); 
  } 
</script> 
```

使用此代码，它返回 0，但这不是问题的解决方案

```
var process = shell.run("c:\myEXE.exe parm1 param2", 1, True);
alert(process); // displays 0 
```

# c# - 通过串行数据将多个 Arduino 传感器值接收到 C#/WPF 应用程序中

> ID：15971812
> 
> 赞同：0
> 
> 时间：2013-04-12T12:46:56.067
> 
> 标签：c#, wpf, serial-port, arduino

我正在使用 C# UI 来控制 Arduino 板，它运行良好。我正在使用文本协议发送命令和值。但是，我不知道如何从 Arduino 接收多个传感器值到 C#。

从 C# 到 Arduino，我在字符串的开头和结尾使用 ASCII 图表来确定值应该存储在 Arduino 中的什么位置。在阿杜诺：

```
void serial_Sensitivity_command(){
    if (Serial.available()){
        while (Serial.available() >= 0){
            if (inChar == SOFF){
                dex1 = 0;
                inData_sens[dex1] = '\0';
                started1 = true;
                ended1 = false;
            }
            else
                if (inChar == EOFF){
                    ended1 = true;
                }
                else
                {
                    if (dex1 < 9){
                        inData_sens[dex1] = inChar;
                        dex1++;
                        inData_sens[dex1] = '\0';
                    }
                }

                if (started1 && ended1){
                    sensitivity_gain = atoi(inData_sens);
                    started1 = false;
                    ended1 = false;
                    dex1 = 0;
                    inData_sens[dex1] = '\0';
                }
            break;
        }
    }
} 
```

我想将八个不同的值路由到 C# 中的每个文本块。有没有像我在 Arduino 中那样在 C# 中使用的类似方法？

或者我应该读取字符串数组然后使用子字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:51:39.943

[我没有尝试过字符串协议，但我已经成功使用了USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus)上的串口。

在阿杜诺：

```
//Reading in
while(Serial.available(){
    unsigned char c;
    c = Serial.read();
    if (c == EOFF)
        <process input>
    else
        <buffer input>
}

//sending out
Serial.write(byte1);
Serial.write(byte2);
....
Serial.write(<End of stream marker); 
```

然后在 C# 中，您可以使用`System.IO.Ports`SerialPort 读取数据并以相同格式收集数据。

# ruby-on-rails - 模型验证 - 必须至少具有两个属性之一

> ID：15971814
> 
> 赞同：0
> 
> 时间：2013-04-12T12:47:02.920
> 
> 标签：ruby-on-rails, validation, model

我有一个模型，其中验证了两个字段，但只有一个是强制性的。

我写了以下验证，但它不起作用：

```
 validates_presence_of :results, :on => :update, :if => Proc.new { |order| order.results_image? }
  validates_presence_of :results_image, :on => :update, :if => Proc.new { |order| order.results? } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:56:12.003

看起来您需要一个自定义验证方法，如果两者都为空白，则添加到错误集合中，但如果其中一个被填充则通过...

```
def validate 
    errors.add_to_base "one or other is required" if results.blank? and results_image.blank? 
end 
```

# python - 保存整个模型后的 Django 信号

> ID：15971821
> 
> 赞同：7
> 
> 时间：2013-04-12T12:47:20.077
> 
> 标签：python, django, signals

我有一个带有 2 个`ManyToMany`字段的 Django 模型。我想在每次保存模型时处理模型中的数据。

`post_save`信号是在保存关系之前发送的，`ManyToMany`所以我不能使用那个。然后你有`m2m_changed`信号，但由于我有 2 个`ManyToMany`字段，我不能确定`ManyToMany`我应该在哪个字段上放置信号。

`ManyToMany`是不是所有的字段都保存了之后才触发信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:11:56.500

我觉得唯一的选择是在 every 之后处理数据`m2m_change`，因为似乎没有映射到“此模型上的所有相关数据已完成保存”的事件或信号。

如果这是高成本，您可以异步处理处理。`MyModel.needs_processing`当我遇到类似情况时，我在模型中添加了一个布尔字段来处理与处理相关的状态（例如，状态复位。

在您的情况下，如果`m2m_changed`和`needs_processing`是`False`，您可以设置`needs_processing`并`True`保存模型，将其标记为由您的任务队列处理。然后，即使第二次`m2m_changed`为其他 m2m 字段触发，也不会产生重复的处理成本。

# ios - UITableView 中的奇怪行为

> ID：15971827
> 
> 赞同：0
> 
> 时间：2013-04-12T12:47:32.470
> 
> 标签：ios, uitableview, ios5, ios6

我正在使用 Xcode 4.6.1 为 >iOS 5.0 版本开发应用程序。

该应用程序只是显示从服务器端获取、保存在数据库中并允许其用户填写的问卷。

为了显示问题，我有一个`UIScrollView`并且我在**pagingEnabled 模式下**使用它。我有三种问题选择类型，分别`checkbox`是`radio button`和`textfield`。对于 UI 控件，我创建了`CheckBoxButton`简单`RadioButton`地从`UIButton`. 我通过更改背景图像设置了选择属性。所以每一页都包含一个问题并`checkboxes | radio buttons`根据选择计数。如果选择计数为 4，则显示 4 个复选框。

如果问题和选择不适合页面，我将创建一个`UITableView`并将其添加`UIScrollView`为子视图。我没有使用，而是`UITableView`尝试使用，`UIScrollView`但它让事情变得更糟。所以，这不是一个真正的选择。要创建`UITableViewCell`，我正在使用此代码。

```
static NSString *cellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone ;
    }
        QuestionChoice *currentChoice =  [[[[_questionArray objectAtIndex:currentQuestionIndex] choices] allObjects ] objectAtIndex:indexPath.row -1 ];
        CheckBoxButton *checkBox = [[CheckBoxButton alloc] initWithXValue:20 yValue:0 tag:0];
        [cell addSubview:checkBox];
        UIFont *aeroSmall = [UIFont fontWithName:@"Aero" size:22.0f];
        NSString *choiceText = currentChoice.choiceText;
        CRTLabel *choiceLabel = [[CRTLabel alloc] initWithFrame:CGRectMake(80, 0, 700, 44) andText:choiceText font:aeroSmall tag:0];
        [cell addSubview:choiceLabel]; 
```

我知道如果屏幕上不存在一个单元格，它就不存在。我的问题就在于此。假设我已经选中了第四个复选框并向上滚动，因此第四个单元格不再显示。当我向下滚动时，将使用上面的代码重新创建第四个单元格。我的问题是它是用旧状态创建的。这意味着当我在向上滚动之前检查时，它会在检查中重新创建。

这怎么可能 ？我错过了什么？我没有使用任何缓存机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:17:38.767

为了提高效率，iOS 重用了表格单元格。当您的单元格滚出屏幕时，它不会被释放。相反，它被扔到重用队列中。当单元格重新出现在屏幕上时，系统会从重用队列中抓取一个单元格（如果可用）并将其交给您。您之前添加到该单元格的所有子视图仍然存在，因此您需要清理该单元格并正确初始化它，否则您将看到之前在该单元格中的任何内容。

UITableView 用于显示表格。它不用于存储任何信息。在您的情况下，如果有人选中它，您将想知道复选框的状态。要获得该状态，您需要将`target`和添加`action`到您的复选框，这样如果有人触摸复选框并更改其状态，您就会被调用。

在您的操作方法中，您需要将复选框的值存储在一个数据结构中，该数据结构是您的视图控制器（而不是表视图）的一部分。在重新创建一个不在屏幕但现在重新出现的单元格时，您还需要查看此数据结构。

# c++ - 32位和64位可以一起工作吗？

> ID：15971830
> 
> 赞同：21
> 
> 时间：2013-04-12T12:47:36.880
> 
> 标签：c++, 64-bit, 32-bit

64 位库可以在 32 位应用程序中工作吗？例如，我的应用程序 GUI 使用 32 位 Qt。而我的业务核心是一个 64 位的库。操作系统是 64 位的。他们可以一起工作吗？如何工作？谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T12:57:10.130

简而言之：您不能将 32 位应用程序链接到 64 位库。

您可以在 64 位操作系统（至少所有流行的 32/64 位处理器，如 AMD、Intel 和 Sparc）上使用 32 位共享库来运行 32 位应用程序。但这不涉及任何库。

更长的答案：我参与了一些为 x86 设计 64 位 Linux 内核的团队（在郊区）。有简短的（与整个项目相比，讨论持续了好几个小时）关于如何在技术上完成这项工作的一些讨论。对此的简短总结是，在 64 位中有一些寄存器在 32 位中不可用。还有内存地址和寄存器中额外的 32 位的问题。假设库本身“知道”它是一个 32 位兼容库，所有这些都可以解决。但是我们基本上有一个 64 位库，它被写成一个 32 位库，我们有点迷失了方向。

“更多寄存器”可能不适用于某些处理器，但更大的寄存器地址/位范围肯定适用于所有 32 位和 64 位兼容处理器。而且我不知道有任何单个处理器允许 32 位代码调用 64 位共享库或静态库。除非专门编写代码来解决这个问题，否则它是行不通的，这违背了拥有通用 64 位库来支持 32 位应用程序的目的。

编辑：

以上讨论了链接一个可执行单元，例如可执行文件、共享库或静态库。那必须是所有“一位”，无论是 32 还是 64 - 没有混合。

当一个进程与另一个进程通信时（例如，一个显示非 GUI 进程状态的 GUI 应用程序），只要两个进程使用相同的协议 [通常，IPC 无论如何都不允许传递指针，所以32-/64 位转换不是一个大问题]，您可以拥有一个 32 位进程和另一个 64 位进程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T13:06:38.800

是的，但这是一个大麻烦。

首先，内核不同于库。通常，库在进程的虚拟地址空间中可见；它与您自己的代码共享地址空间。调用库例程只是一个子例程调用。

相反，要向内核请求服务，您的进程会执行一条特殊指令来生成陷阱。这个陷阱会导致处理器做一些特殊的事情，包括将进程的寄存器和其他状态保存在内存中（或在您通常无法访问的特殊处理器寄存器中），更改处理器中的各种模式以使其适合内核，以及更改程序计数器以指向内核的指令。然后内核运行。此时，内核可能在 64 位模式下运行，而您的进程在 32 位模式下运行。但是，内核被设计为意识到这些差异。当您的内核检查您的进程以查看您的请求时，它会查找知道您的进程在 32 位模式下运行的信息和数据结构。

当然，这假定您使用的 64 位内核支持 32 位进程。

通常，当您调用一个库时，您希望它与您的代码具有相同的模式，因为正常的库调用只是一个子程序调用；它不会产生陷阱，也不会改变处理器模式。如果迫切需要从 32 位进程调用 64 位库中的例程，那么您可以创建一个帮助程序 64 位进程。您的 32 位进程将打包一个库调用请求，并通过某种形式的进程间通信将该请求发送到 64 位助手进程。该辅助进程将调用库例程并将结果发回。

自然，这会为每个库调用增加大量开销，因此只有在非常需要且没有更好的选择时才需要这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:28:01.163

我正在开发一个可以做到这一点的应用程序。应用程序核心是 x64（并使用 Qt），但它必须与一些设备通信，为此我只有制造商的 32 位库。我实现它的方式是有两个应用程序 64 位用于核心和 GUI，32 位控制设备并使用 QSharedMemory 与主要应用程序通信。这两个应用程序都基于 Qt（对应 64 位和 32 位）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:55:14.057

如果您在 Windows 上运行，那么为 32b 编译的应用程序可以在 Windows 64b 主机系统上运行：看看64b Windows 中内置的[WOW64子系统。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384249%28v=vs.85%29.aspx)

话虽如此，您*不能*将为 32b 编译的代码与为 64b 编译的代码混合使用。这意味着为 32b 构建的库不能与 64b 代码链接，反之亦然。（不同的调用约定，堆栈框架布局，展开除外，...）

# eclipse - Hide summary columns on a Birt report

> ID：15971831
> 
> 赞同：0
> 
> 时间：2013-04-12T12:47:37.733
> 
> 标签：eclipse, report, birt

Essentially I want to [have grand total column](http://publib.boulder.ibm.com/infocenter/iadthelp/v8r0/topic/org.eclipse.birt.doc/birt/images/xtab_layout4.gif) like the one I just linked to.

However, I want to hide the column that the grand total is based off of. For example, in reference to the picture, I would want to keep the grand total on the right without displaying the extended price column on the left.

I also tried to write a script that would hide the cells in the On Prepare event of the crosstab, but when I select the crosstab in the script tab it says "This element has no methods".

Is this possible?

Sources:

[Eclipse documentation](http://publib.boulder.ibm.com/infocenter/iadthelp/v8r0/index.jsp?topic=%2Forg.eclipse.birt.doc%2Fbirt%2Fcrosstab.17.9.html)

[Stack Overflow question stating to use the onPrepare event](https://stackoverflow.com/questions/8737248/control-crosstab-column-visibility-with-report-parameter-in-birt/12817821#12817821)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:55:27.517

Generally, you should be able to do this by selecting the column, and in the property editor below select "Visibility -> Hide Element -> For all outputs".

# iphone - ObjectiveC iOs 6 开发，设置正确的委托以从第二个视图控制器中调用方法

> ID：15971839
> 
> 赞同：1
> 
> 时间：2013-04-12T12:48:05.273
> 
> 标签：iphone, ios, objective-c, delegates

我在开发应用程序时遇到问题：我的应用程序显示了一张图片，我在这张图片上得到了一些分数。我在 XML 文件中找到点，所以我在 2 个视图控制器中做了：第一个显示图像视图和导航栏以通过 segue 调用第二个视图控制器，在第二个视图控制器中我解析 XML 文件获取我将在图像中找到的地点的名称和坐标（以像素为单位）。我的问题是它从未初始化过的委托，所以我问你是否可以帮助我解决这个问题。我希望你能帮助我找到一个正确的方法来完成这个应用程序。我在这里发布我的代码。

**视图控制器.h**

```
 #import <UIKit/UIKit.h>
#import "PlacesViewController.h"

@interface ViewController : UIViewController <UIScrollViewDelegate, UITextFieldDelegate, PlacesDelegate>
@property (weak, nonatomic) IBOutlet UIScrollView *viewScroll;
@property (weak, nonatomic) IBOutlet UIImageView *viewImage;
@property (nonatomic, strong) PlacesViewController *placesViewController;

- (IBAction)drawPinToMap:(id)sender;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"
#import "PlacesViewController.h"

@interface ViewController ()

@property CGSize imageSize;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.imageSize = self.viewImage.image.size;
    [self.viewScroll setContentSize:self.imageSize];
    [self.viewScroll setDelegate:self];

}

- (void)viewWillAppear:(BOOL)animated
{
    CGPoint svOrig = self.viewScroll.frame.origin;
    [self.viewImage setFrame:CGRectMake(svOrig.x, svOrig.y, self.imageSize.width, self.imageSize.height)];
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated {
    [self.viewImage setTag:100];
    float minimunScale = 1;
    float maximumScale = 4;
    float startZoomScale = 1;

    [self.viewScroll setMinimumZoomScale:minimunScale];
    [self.viewScroll setMaximumZoomScale:maximumScale];
    [self.viewScroll setZoomScale:startZoomScale];
}

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [self.viewScroll viewWithTag:100];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    [self.placesViewController setDelegate:self];
}

//Method to test if the code can draw the pin in the middle point of the image
- (IBAction)drawPinToMap:(id)sender {
    CGRect svframe = self.viewScroll.bounds;
    [self.viewScroll setContentOffset:CGPointMake(self.imageSize.width / 2\. - svframe.size.width / 2., self.imageSize.height / 2\. - svframe.size.height / 2.) animated:YES];
    UIImageView *pin = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pin"]];
    [self.viewScroll addSubview:pin];
    [pin setFrame:CGRectMake(0, 0, 21, 44)];
    CGRect pinFrame = pin.frame;
    pinFrame.origin.x = self.imageSize.width / 2.;
    pinFrame.origin.y = self.imageSize.height / 2.;
    pin.frame = pinFrame;
}

//Delegate method
- (void) drawPinToMapForCity:(NSString *)city andPosX:(NSNumber *)posX andPosY:(NSNumber *)posY {
    NSLog(@"City: %@ posX = %@ posY = %@", city, posX, posY);
}
@end 
```

**PlacesViewController.h**

```
#import <UIKit/UIKit.h>

@protocol PlacesDelegate;

@interface PlacesViewController : UITableViewController <NSXMLParserDelegate>

@property (assign) id <PlacesDelegate> delegate;

@end

@protocol PlacesDelegate <NSObject>

- (void) drawPinToMapForCity:(NSString*)city andPosX:(NSNumber*)posX andPosY:(NSNumber*)posY;

@end 
```

**PlacesViewController.m**

```
#import "PlacesViewController.h"

@interface PlacesViewController () {
    NSXMLParser *placesXmlParser;
}
@property (nonatomic, strong) NSMutableArray *arrayPlaces;

- (void) parseXmlFileAtUrl:(NSString *)URL;

@end

@implementation PlacesViewController

@synthesize delegate = _delegate;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.arrayPlaces = [[NSMutableArray alloc] init];
    NSString *pathXmlFile = [[NSBundle mainBundle] pathForResource:@"places" ofType:@"xml"];
    [self parseXmlFileAtUrl:pathXmlFile];
}

- (void) parseXmlFileAtUrl:(NSString *)URL {
    //Creazione dell'URL
    NSURL *xmlUrl = [NSURL URLWithString:URL];
    NSString *host = [xmlUrl host];
    if (xmlUrl == nil || host == nil) {
        NSData *data = [[NSData alloc] initWithContentsOfFile:URL];
        placesXmlParser = [[NSXMLParser alloc] initWithData:data];
    }
    else {
        placesXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlUrl];
    }
    [placesXmlParser setDelegate:self];
    [placesXmlParser setShouldProcessNamespaces:NO];
    [placesXmlParser setShouldReportNamespacePrefixes:NO];
    [placesXmlParser setShouldResolveExternalEntities:NO];
    [placesXmlParser parse];
}

- (void)parserDidStartDocument:(NSXMLParser *)parser {
    NSLog(@"File trovato inizio il parsing del documento");
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    NSLog(@"Errore Parsing");
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    if ([elementName isEqualToString:@"places"]) {
    } else if ([elementName isEqualToString:@"place"]) {
        NSString *cityValue = attributeDict[@"name"];
        NSString *posXValue = attributeDict[@"posX"];
        NSString *posYValue = attributeDict[@"posY"];

        NSDictionary* place = @{@"name": cityValue,
                                @"posX": posXValue,
                                @"posY": posYValue};
        [self.arrayPlaces addObject:place];
        NSLog(@"arraPlaces dim = %d", self.arrayPlaces.count);
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
}

- (void)parserDidEndDocument:(NSXMLParser *)parser {
    NSLog(@"ArrayPlaces = %@", self.arrayPlaces);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.arrayPlaces count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.text = [self.arrayPlaces[indexPath.row] objectForKey:@"name"];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     self.arrayPlaces[indexPath.row]objectForKey:@"posX"]
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
//I put here a NSLog to see if my delegate has a value, but if i run the app it says null and my app doesn't work properly
    NSLog(@"%@", self.delegate);
    [_delegate drawPinToMapForCity:[self.arrayPlaces[indexPath.row]objectForKey:@"name"] andPosX:[self.arrayPlaces[indexPath.row]objectForKey:@"posX"] andPosY:[self.arrayPlaces[indexPath.row]objectForKey:@"posY"]];
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

如果我运行应用程序，我会在控制台中看到：

```
2013-04-12 14:49:24.770 MiddleEarth[3346:c07] ArrayPlaces = (
    {
    name = "name1";
    posX = coordX;
    posY = coordY;
},
    {
    name = "name2";
    posX = coordX;
    posY = coordY;
} 
```

)

```
2013-04-12 14:49:26.171 MiddleEarth[3346:c07] DELEGATE VALUE: (null) 
```

在最后一行中，您可以看到我的委托没有值，因此我无法将变量提供给 ViewController，我可以使用它在图像上绘制图钉。我将 XML 解析器放在 PlacesViewController 中，这是我的选择。我希望你能帮助我找出我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:53:41.607

您需要在中设置委托属性`prepareForSegue:`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"some-segue-name"]) {
        PlacesViewController *vc = [segue destinationViewController];

        // set the delegate to a ViewController reference
        vc.delegate = self;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:58:24.043

`self.placesViewController`不是将在 Storyboard 中推送的 ViewController！

试试这个：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"yourSegueName"]) {
        [(PlacesViewController*)[segue destinationViewController] setDelegate:self];
    } 
} 
```

# c# - 如何在 Visio 中读取形状属性

> ID：15971842
> 
> 赞同：1
> 
> 时间：2013-04-12T12:48:26.773
> 
> 标签：c#, visio

```
namespace VisioEventsExample
 {
    using System;
    using Microsoft.Office.Interop.Visio;

    class Program
    {
        public static void Main(string[] args)
        {
            // Open up one of Visio's sample drawings.
            Application app = new Application();
            Document doc = app.Documents.Open(
                @"C:\Program Files\Microsoft Office\Office14\visio content\1033\ASTMGT_U.VST");

            // Get the first page in the sample drawing.
            Page page = doc.Pages[1];

            // Start with the collection of shapes on the page and 
            // print the properties we find,
            printProperties(page.Shapes);
        }

        /* This function will travel recursively through a collection of 
         * shapes and print the custom properties in each shape. 
         * 
         * The reason I don't simply look at the shapes in Page.Shapes is 
         * that when you use the Group command the shapes you group become 
         * child shapes of the group shape and are no longer one of the 
         * items in Page.Shapes.
         * 
         * This function will not recursive into shapes which have a Master. 
         * This means that shapes which were created by dropping from stencils 
         * will have their properties printed but properties of child shapes 
         * inside them will be ignored. I do this because such properties are 
         * not typically shown to the user and are often used to implement 
         * features of the shapes such as data graphics.
         * 
         * An alternative halting condition for the recursion which may be 
         * sensible for many drawing types would be to stop when you 
         * find a shape with custom properties.
         */
        public static void printProperties(Shapes shapes)
        {
            // Look at each shape in the collection.
            foreach (Shape shape in shapes)
            {               
                // Use this index to look at each row in the properties 
                // section.
                short iRow = (short) VisRowIndices.visRowFirst;

                // While there are stil rows to look at.
                while (shape.get_CellsSRCExists(
                    (short) VisSectionIndices.visSectionProp, 
                    iRow, 
                    (short) VisCellIndices.visCustPropsValue,
                    (short) 0) != 0)
                {
                    // Get the label and value of the current property.
                    string label = shape.get_CellsSRC(
                            (short) VisSectionIndices.visSectionProp, 
                            iRow,
                            (short) VisCellIndices.visCustPropsLabel
                        ).get_ResultStr(VisUnitCodes.visNoCast);

                    string value = shape.get_CellsSRC(
                            (short) VisSectionIndices.visSectionProp, 
                            iRow,
                            (short) VisCellIndices.visCustPropsValue
                        ).get_ResultStr(VisUnitCodes.visNoCast);

                    // Print the results.
                    Console.WriteLine(string.Format(
                        "Shape={0} Label={1} Value={2}",
                        shape.Name, label, value));

                    // Move to the next row in the properties section.
                    iRow++;
                }

                // Now look at child shapes in the collection.
                if (shape.Master == null && shape.Shapes.Count > 0)
                    printProperties(shape.Shapes);
            }
        }
    }
} 
```

我在评论中询问此代码已被删除。所以我创建了一个新主题。

帮我。此代码打开文档。第一页。但！形状 在单子上找不到！我总是 iRow = 0。但是！形状在一张纸上！我自己已经提前做好了！可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:58:01.123

我在代码中看不到任何会阻止它在 Visio 2007 中工作的内容。您需要使用一个文件的路径，该文件包含第一页上具有自定义属性的形状。

# c# - UTF-8 字符串看起来不正确

> ID：15971843
> 
> 赞同：-2
> 
> 时间：2013-04-12T12:48:27.333
> 
> 标签：c#, asp.net

我有一些从 API 获得的字符串。

api给了我这样的字符串：

![在此处输入图像描述](https://i.stack.imgur.com/5m5CV.png)

但我怀疑我需要以某种方式制作这些 UTF-16？有没有办法用.NET 做到这一点？我知道 .NET 更喜欢使用 UTF-16 ......

```
public Task ParseTask(XElement task, bool singleTask)
{
    Task t = new Task();
    int id;
    int.TryParse(task.Attribute("id").Value, out id);
    t.ID = id;
    t.Title = singleTask ? task.Element("name").Value : task.Attribute("name").Value;
    t.IsComplete = task.Attribute("complete").Value == "1";
    t.IsBillable = task.Attribute("billable").Value == "1";

    if (task.Element("user").Attribute("id") != null)
    {
        t.UserID = task.Element("user").Attribute("id").Value;
        t.UserName = task.Element("user").Attribute("name").Value;
    }

    t.Description = task.Element("description").Value;
    decimal pph;
    decimal.TryParse(task.Element("price_per_hour").Value, out pph);
    t.PricePerHour = pph;

    decimal bh;
    decimal.TryParse(task.Element("budget_hours").Value, out bh);
    t.BudgetHours = bh;
    int pid;
    int.TryParse(task.Element("project").Attribute("id").Value, out pid);
    t.ProjectID = pid;

    int tlid;
    int.TryParse(task.Element("tasklist").Attribute("id").Value, out tlid);
    t.TaskListID = tlid;

    return t;
} 
```

--

```
 public List<Task> GetProjectTasks(int projectID)
        {
            List<Task> list = new List<Task>();

            string args = String.Format("project_id={0}", projectID);
            string uri = CreateURI("paymo.tasks.findByProject", args);
            string reply = client.DownloadString(uri);
            XDocument doc = XDocument.Parse(reply);
            if (IsOk(doc))
            {
                IEnumerable<XElement> tasks =
                    doc.Element("response").Element("tasks").Elements();

                foreach (var task in tasks)
                {
                    list.Add(ParseTask(task, false));
                }
            }
            else
            {
                throw new Exception();
            }

            return list;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:55:12.567

.NET 默认使用 UTF-16 字符串。功能`System.Text.Encoding.UTF8.GetString()`。可以通过将数据作为`Byte[]`数组传递并检索 UTF-16 字符串来帮助您。

请参阅：[Encoding.GetString 方法 (Byte[])](http://msdn.microsoft.com/en-us/library/744y86tc.aspx)

# php - 在 codeigniter 中，我创建了静态页面，但我仍然只收到 Index.php 欢迎消息

> ID：15971853
> 
> 赞同：0
> 
> 时间：2013-04-12T12:48:53.420
> 
> 标签：php, codeigniter, apache2

我已经安装了**CodeIgniter_2.1.3** 并运行

*   Windows 7的
*   Wamp 服务器 2.1
*   PHP 5.3.5
*   阿帕奇 2.2.17

我遵循了 Codeignitor 中提供的这个 [Codeignitor 静态页面教程](http://ellislab.com/codeigniter/user-guide/tutorial/static_pages.html)链接。

我使用以下代码创建了**application/controllers/pages.php文件。**

```
<?php class Pages extends CI_Controller 
{

    public function view($page = 'home')
    {

        if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    }
}
?> 
```

然后我在**application/views/templates/header.php**创建了标题，代码如下：

```
<html>
<head>
    <title><?php echo $title ?> - CodeIgniter 2 Tutorial</title>
</head>
<body>
    <h1>CodeIgniter 2 Tutorial</h1> 
```

然后我在**application/views/templates/footer.php**使用以下代码创建了一个页脚：

```
<strong>&copy; 2011</strong>    
</body>
</html> 
```

然后当我打电话时`http://localhost/CodeIgniter_2.1.3/index.php/pages/view/home`

我把它作为输出

> 欢迎来到 CodeIgniter！
> 
> 您正在查看的页面是由 CodeIgniter 动态生成的。
> 
> 如果你想编辑这个页面，你会发现它位于：application/views/welcome_message.php
> 
> 该页面对应的控制器位于：application/controllers/welcome.php
> 
> 如果您是第一次探索 CodeIgniter，您应该从阅读用户指南开始。

而不是获取带有附加 header.php 和 footer.php 的 home.php。

我怀疑这是因为 codeignitor 配置或 php 配置或 apache 服务器配置中的一些错误设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:52:17.867

如果你这样调用`http://localhost/CodeIgniter_2.1.3/`，那么你必须从你**的**`routes.php`. 它应该是空的。默认情况下，它设置有欢迎控制器。

```
$route['default_controller'] = "" // Replace with your default controller; 
```

routes.php 将在**config 文件夹**中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:55:51.150

转到 application/config/routes.php

```
$route['default_controller'] = "pages"; 
```

希望这对你有帮助 然后去

```
/CodeIgniter_2.1.3/index.php/pages/view 
```

# oracle - Oracle 多用户应用程序暂存表 - 在 APEX 中

> ID：15971854
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:48:54.637
> 
> 标签：oracle, plsql, oracle-apex, multi-user

我正在开发一个应用程序，它采用一些原始输入数据并将其转换为通过一系列步骤计算最终结果。在这些步骤中的每一个，都有可能的用户输入（例如，权重、选择相关行等）。我已经设置了基本分析，但我的目标是在多用户环境中部署它。我不希望发生的是一个用户设置他们的输入，让另一个用户更改一些输入，并且都得到意想不到的结果。

当用户进入应用程序时，我希望他们在开始会话时获得所有主数据库表的副本，然后能够更改所有输入（甚至可能添加原始数据），运行分析和生成与所有其他用户的输出分开的输出。此输出可能会导出到 Excel，或者可以在以后提取。然后，如果用户想要对实际的数据库表（所有其他用户都会看到）进行更改，他们可以提交部分或全部更改。

我是 Oracle 和 APEX 新手，并且一直在阅读我可以接触到的所有文档和书籍，但需要帮助确定解决这个问题的好方法，或者至少是相关阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:22:11.253

我认为您必须使用 APEX 集合。

看[http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/apex_collection.htm](http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/apex_collection.htm)

升级版：

您必须寻找顶点集合。首先：当用户登录时，为每个要更改的表创建一个空的顶点集合。集合名称必须像对应的表一样命名。然后你可以为每个集合创建视图，看起来像（让表名是“tmp_tab”）：

```
create or replace view tmp_v as
select
  t.c001 as id
, t.c002 as column1
, t.c003 as column2
 from apex_collections t
 where collection_name = 'tmp_tab'; 
```

然后在表 tmp_tab 的每个报告中将该表与他对相应集合的视图连接起来。报告代码如下所示：

```
select
  t.id
, nvl(v.column1, t.column1) column1
, nvl(v.column2, t.column2) column2
 from tmp_tab t
 left join tmp_v v on v.id = t.id 
```

然后，当用户编辑数据时，将此数据保存在表中，将其保存在集合中。完成所有更改后，如果用户想要保存所有用户的数据，请将数据从相应的集合中移动到表中。这种方式是最正确的，并且您不会更改数据模型。

# java - 在二叉搜索树中查找最小元素（迭代和递归）

> ID：15971859
> 
> 赞同：0
> 
> 时间：2013-04-12T12:49:06.903
> 
> 标签：java, binary-search-tree

这是我使用两种不同的方式在 BST 中查找最小搜索键的实现，我想确保我是否正确执行：

***迭代***

```
public T findSmallest ( BinarySearchTree<T> tree )

{ BinaryNode Node = new BinaryNode (tree.getDataRoot);

  if ( Node == null ) return null;

  while(Node.hasLeftChild()) Node = Node.getLeftChild;

return Node.getData(); } 
```

***递归***

```
public T findSmallest ( BinaryNode Node ) 

{ if (Node == null) return null;

  if(Node.getLeftChild()==null) return Node.getData(); 

  else 

  return findSmallest ( (Node.getLeftChild()) ; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:17:50.610

看起来不错，我重新格式化了代码，希望我没有错过任何东西。

**迭代**

```
public T FindSmallest(BinarySearchTree<T> tree){ 
  BinaryNode Node = new BinaryNode(tree.getDataRoot());
  if (Node == null) 
    return null;

  while(Node.hasLeftChild()) 
    Node = Node.getLeftChild();

  return Node.getData(); 
} 
```

**递归的**

```
public T FindSmallest(BinaryNode Node){ 
  if (Node == null) 
    return null;

  if(Node.getLeftChild()==null) 
    return Node.getData(); 

  return findSmallest(Node.getLeftChild()); 
} 
```

这可能会让您感兴趣：[Find kth minimum element in a binary search tree in Optimum way](https://stackoverflow.com/questions/2329171/find-kth-smallest-element-in-a-binary-search-tree-in-optimum-way)

# c# - 通过windows c# setup工程安装SQL server 2005

> ID：15971863
> 
> 赞同：0
> 
> 时间：2013-04-12T12:49:14.367
> 
> 标签：c#, sql-server-2005-express

我有一个带有安装文件的 windows c# 应用程序。现在我希望在任何计算机上安装我的应用程序设置时安装 SQL Server 2005 速成版。这可能吗 ？如何 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:52:50.467

您可以`Prequisities`为此设置。

检查类似的[线程](https://stackoverflow.com/questions/9818885/how-to-setup-up-a-prerequisite-in-installer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:58:25.817

是的，您可以通过右键单击**设置项目**-->**视图**-->**自定义操作**--> 右键单击**​​自定义操作**
--> 添加自**定义**操作来添加自定义操作。

 ******现在要为您的安装项目添加先决条件。

选择您的**安装**项目，右键单击并转到**properties**，然后单击**Prerequisites**按钮。在那里你可以设置网址******

# ios - iOS - MPMediaPickerController - 仅显示播放列表

> ID：15971864
> 
> 赞同：1
> 
> 时间：2013-04-12T12:49:17.810
> 
> 标签：ios, mpmediapickercontroller

使用 MPMediaPickerController，我们可以在应用程序中只显示一个选项卡，即“播放列表”吗？
我的要求只是显示播放列表，点击播放列表歌曲必须播放。
我尝试使用 MPMediaQuery，但我不只是获取播放列表，而是返回播放列表中的所有歌曲。
有没有其他解决方案可以只获取播放列表？

# delphi - 如何与 TWebBrowser 控件中的 TAutoIntfObject 对象进行互操作？

> ID：15971871
> 
> 赞同：4
> 
> 时间：2013-04-12T12:49:39.653
> 
> 标签：delphi, twebbrowser

我有一个`TWebBrowser`控件，它实现`IDocHostUIHandler`了通过`IDispatch`容器扩展 JavaScript 互操作的控制。这工作正常，除了我不知道如何将事件从 JavaScript 分派回 Web 浏览器控件。

扩展对象是一个基于`TAutoIntfObject`like in的容器[`this example`](http://www.delphidabbler.com/articles?article=22&part=5#case-study-extdef)。正如您在示例中看到的，与 Web 浏览器控件没有互操作性。理想情况下，我想在该扩展对象上实现事件，但我不知道如何`TAutoIntfObject`在我的 Web 浏览器控件中正确声明该对象。假设我有这个扩展对象：

```
type
  TZoomChangeEvent = procedure(Sender: TObject; ZoomLevel: Integer) of object;
  TOpenLayersExt = class(TAutoIntfObject, IOpenLayers)
  private
    FOnZoomChange: TZoomChangeEvent;
    // the ZoomChange method is invoked from JavaScript
    procedure ZoomChange(ZoomLevel: Integer); safecall;
  public
    property OnZoomChange: TZoomChangeEvent read FOnZoomChange write FOnZoomChange;
  end;

implementation

procedure TOpenLayersExt.ZoomChange(ZoomLevel: Integer);
begin
  if Assigned(FOnZoomChange) then
    FOnZoomChange(Self, ZoomLevel);
end; 
```

像这样的`TWebBrowser`控件：

```
type
  TMapBrowser = class(TWebBrowser, IDocHostUIHandler)
  private
    // the extension object
    FExtObj: TOpenLayersExt;
    // IDocHostUIHandler::GetExternal method
    function GetExternal(out ppDispatch: IDispatch): HRESULT; stdcall;
    // this is the TOpenLayersExt.OnZoomChange event method implementation
    procedure OnZoomChange(Sender: TObject; Zoom: Integer);
  public
    // ordinary constructor
    constructor Create(AOwner: TComponent); override;
  end;

implementation

constructor TMapBrowser.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  // create extension object
  FExtObj := TOpenLayersExt.Create;
  // here the event method is properly binded; if I'd change the FExtObj type
  // to IDispatch with TOpenLayersExt(FExtObj) typecast, it wouldn't
  FExtObj.OnZoomChange := OnZoomChange;
end;

function TMapBrowser.GetExternal(out ppDispatch: IDispatch): HRESULT;
begin
  // the problem is that I don't know how to properly pass this object to the
  // ppDispatch parameter; if this GetExternal method is called second time,
  // the FExtObj seems to be released, but I don't get why
  ppDispatch := FExtObj as IDispatch;
  Result := S_OK;
end; 
```

问题是，如果我将`FExtObj`对象声明为`TOpenLayersExt`，则绑定事件方法，但`FExtObj`对象引用似乎在第一个扩展对象方法调用（来自 JavaScript）之后被释放。

如果我将其声明为`IDispatch`，则在 JavaScript 函数调用后不会释放引用，但`OnZoomChange`不会绑定事件。

很难在此处发布完整的代码，因为它由更多部分组成，[`here is a complete project`](https://code.google.com/p/projects-stackoverflow-tlama/downloads/detail?name=15971871.zip)由 Delphi 7 制作。

所以我的问题是，如何`TAutoIntfObject`在 Web 浏览器控件中使用来自扩展对象的事件；如何声明扩展对象，以便我能够处理来自 Web 浏览器控件的事件并将其传递给`IDocHostUIHandler::GetExternal`方法参数，仍然保持接口对象引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:49:51.043

使用引用计数，即。保持 FExtObj 作为对接口的引用，而不是对象：

```
 private
    // the extension object
    FExtObj: IDispatch; 
```

...

```
constructor TMapBrowser.Create(AOwner: TComponent);
var
  AExtObj: TOpenLayersExt;
begin
  inherited Create(AOwner);
  // create extension object
  AExtObj := TOpenLayersExt.Create;
  AExtObj.OnZoomChange := OnZoomChange;
  FExtObj := AExtObj as IDispatch;
end;

destructor TMapBrowser.Destroy;
begin
  FExtObj := nil;
  inherited Destroy;
end; 
```

# less - 结合 mixins 覆盖 LESS 值

> ID：15971873
> 
> 赞同：1
> 
> 时间：2013-04-12T12:49:42.947
> 
> 标签：less

我有一个非常基本的代码：

```
.make-red {
    background: red;
    width: 50px;
}

.make-green {
    background: green;
    height: 50px;
}

.make-red.make-green {
    background: yellow;
    border: 5px solid black;
    padding: 20px;
}

#content {
    .make-red;
    .make-green;
} 
```

我希望它可以通过两种方式访问​​和执行。

1.  在 html 层中添加类会给你混合的结果或
2.  在 less 文件中使用 mixins，这样用户就不会被迫使用 html 层中的类

如您所见-我有两个类-一个使背景变为红色，另一个使为绿色，但是当它们一起使用时，我想应用一些更改。

编译这部分代码后，结果不会很漂亮：

```
.make-red {
  background: red;
  width: 50px;
}
.make-green {
  background: green;
  height: 50px;
}
.make-red.make-green {
  background: yellow;
  border: 5px solid black;
  padding: 20px;
}
#content {
  background: red;
  width: 50px;
  background: green;
  height: 50px;
} 
```

#content 现在有重复的背景规则，它不是我想要的黄色。

我肯定做错了什么，如果有人能描述我的逻辑问题在哪里，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:54:15.123

在#content 中，您同时应用了绿色和红色，因此您在 CSS 输出中定义了两倍的背景和宽度。

您必须定义另一个 mixin 并在 red 和 green 类都存在或用于#content 时使用它：

```
.make-red {
    background: red;
    width: 50px;
}

.make-green {
    background: green;
    height: 50px;
}

.make-yellow {
    background: yellow;
    border: 5px solid black;
    padding: 20px;
}

.make-red.make-green {
    .make-yellow;
}

#content {
    .make-yellow
} 
```

# iphone - 从邮政编码（邮政编码）或城市/州获取坐标

> ID：15971875
> 
> 赞同：2
> 
> 时间：2013-04-12T12:49:44.273
> 
> 标签：iphone, ios, objective-c, ios5, mapkit

我现在使用 Map Kit 和 Core Location 并且需要从**邮政编码**或**city/state获取****位置**信息。有什么办法吗？

 ***** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T12:53:48.197

您可以使用[`CLGeocoder`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class)支持将地址转换为坐标的类，反之亦然。例如：

```
[geocoder geocodeAddressString:@"<postcode here>"
             completionHandler:^(NSArray* placemarks, NSError* error){
                 for (CLPlacemark* aPlacemark in placemarks)
                 {
                     // Process the placemark.
                 }
}]; 
```

您可能想要使用许多不同的方法。例如，您可以将搜索限制在特定区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-31T13:11:47.843

您可以使用[https://thezipcodes.com/](https://thezipcodes.com/)从邮政编码获取位置。

要与您的网站集成，请遵循[http://thezipcodes.com/docs](http://thezipcodes.com/docs)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T13:06:46.433

用这个

```
-(CLLocationCoordinate2D) getLocationFromAddressString:(NSString*) addressStr {

double latitude = 0, longitude = 0;
NSString *esc_addr =  [addressStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];
NSString *result = [NSString stringWithContentsOfURL:[NSURL URLWithString:req] encoding:NSUTF8StringEncoding error:NULL];
if (result) {
    NSScanner *scanner = [NSScanner scannerWithString:result];
    if ([scanner scanUpToString:@"\"lat\" :" intoString:nil] && [scanner scanString:@"\"lat\" :" intoString:nil]) {
        [scanner scanDouble:&latitude];
        if ([scanner scanUpToString:@"\"lng\" :" intoString:nil] && [scanner scanString:@"\"lng\" :" intoString:nil]) {
            [scanner scanDouble:&longitude];
        }
    }
}
CLLocationCoordinate2D center;
center.latitude = latitude;
center.longitude = longitude;
return center; 
```

}

当您在 this 中传递地址作为参数时，此方法使用 google api 返回**坐标。******

# jquery - 添加缓动以平滑滚动

> ID：15971881
> 
> 赞同：0
> 
> 时间：2013-04-12T12:50:00.557
> 
> 标签：jquery, smooth-scrolling, jquery-easing

我有一个相当长的单页网站，我使用导航在不同部分垂直上下滚动。目前我正在使用以下 javascript 来完成此操作。

```
 $(".scroll").click(function(event) {
        event.preventDefault();        
        var $anchor = $('#' + this.hash.substring(1));
        $('html,body').animate({ 
            scrollTop: $anchor.offset().top - $anchor.attr('data-section-offset')
        }, 500);        
    });
}); 
```

我遇到的问题是页面在大图像上也很重，所以当我滚动浏览部分时，它可能会有点不稳定。我想知道为此添加一些缓和会有多困难？我已经包含了另一个插件的 jquery-easing 脚本，但是我的 jquery 和 html5 动画知识仍然有点浅。任何建议，将不胜感激。

我曾想过只对图像使用延迟加载，但它们都是背景图像，所以我认为这不会有帮助。

**[小提琴](http://jsfiddle.net/rydkW/)**

*   正在使用数据偏移量，因此滚动清除了恶心的导航栏。谢谢，JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:24:51.743

我想我通过将延迟从 500 增加到 1500 来修复它。如果可能的话，我仍然想知道如何添加缓动。

# android - 使用户界面与服务保持同步

> ID：15971885
> 
> 赞同：0
> 
> 时间：2013-04-12T12:50:08.643
> 
> 标签：android, android-service, android-ui, android-networking

我已经实现了一个 IntentService，它从我的服务器获取数据并通过 ResultReceiver 以 JSON 形式返回结果，ResultReceiver 通过 Intent 提供给服务。

我的问题是让 UI 与服务状态保持同步，例如通过此服务登录到我的服务器，如果我想告诉用户程序正在登录我想显示一个进度对话框，但是当服务仍在获取数据、用户轮换手机或更改活动时有人打电话时会发生什么？

我不想让用户看着有登录按钮的屏幕，登录完成后它只显示表示状态的 toast，我想让用户了解当前状态。

在访问我的服务时，如何在不创建数百行重复代码的情况下处理进度对话框？

目前在我的 LoginActivity 上，用户想要登录后它调用我的 ApiAccessor 中的登录函数，该函数处理与服务的通信并在结果以这种方式返回时注册回调：

```
ProgressDialog dialog;

dialog = ProgressDialog.show(this, "Please wait..", "Logging in..");
accessor.login(usernameField.getText().toString(), passwordField.getText().toString(), new ApiCallback() {

        @Override
        public void onResponse(ApiResponse response) {
            dialog.dismiss();
        }
    }); 
```

但现在我必须在 onPause、onResume 和 onDestroy 中处理解除和重生对话框，而且我必须在每个活动中都这样做！

使 UI 与服务状态保持同步的常用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:28:27.397

您需要阅读整个服务指南和文档的 BIND 部分。

[http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

活动绑定到服务后，活动可以调用其上的任何方法，因此您可以：

*   创建接口
*   在服务上创建方法，例如`setOnSomethingHappenListener(MyInterface listener)`
*   在活动上实现接口
*   从活动电话`myService.setOnSomethingHappenListener(this);`
*   从服务中，如果侦听器不为空，则从接口调用方法（将这些事件传递给附加到它的任何活动）
*   不要忘记`onUnbind`将侦听器覆盖为空。

# ruby - Cucumber Pageobject - 未定义的方法链接

> ID：15971889
> 
> 赞同：1
> 
> 时间：2013-04-12T12:50:19.053
> 
> 标签：ruby, cucumber, bdd, page-object-gem

我想在我的类初始化中使用 PageObject**链接**方法，但我无法做到:(

这是我想要做的：

```
class MyPage
  include PageObject

  def initialize
      link_names.each do |link_name|
           link link_name, :id => "id_#{link_name}"
      end
  end

  def link_names
    ...get link names from DB...
  end

end 
```

当我在创建 MyPage 对象的实例时运行 Cucumber 时，我收到此错误：

```
undefined method `link' for #<MyPage:0xa8dcf20> (NoMethodError) 
```

我目前为避免此问题正在做的事情如下：

```
class MyPage
  include PageObject

  link_names = ['link_a', 'link_b']
  link_names.each { |link_name|
     link link_name, :id => "id_#{link_name}"
   }
end 
```

这工作正常，但我不想在我的模块中硬编码链接名称。

我也无法理解为什么在第一种情况下初始化时该方法不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:56:02.743

您上面的代码存在一个基本问题。首先，页面对象 gem 允许您预先声明元素，然后它将根据这些声明生成方法。页面对象 gem 可以做的另一件事是允许您在运行时动态查找元素，然后与它们交互。您似乎正在尝试将这两种方法结合起来，但这是行不通的。如果您的目标是使用生成的方法方法，那么考虑到您的情况，上面贾斯汀的示例似乎是最好的方法。

在运行时查找元素并在其上调用方法（实例级方法）的能力是通过调用该`[name]_element`方法来实现的。例如，`link_element`在所有实例方法中都有一个可用的方法，但它会返回一个 PageObject::Elements::Link 的实例。您可以在该返回对象上调用方法，但该调用不会像类级别调用那样生成方法`link`。

给你一个问题——你提前知道链接吗？如果是这样，那么声明会简单得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:12:04.113

链接（和其他访问器方法）是类级别的方法。这就是为什么它在初始化方法中不可用的原因。

您可以尝试定义`link_names`为类级别的方法，然后执行您现在正在做的事情。

```
class MyPage
    include PageObject

    def self.link_names
        #Get the values from the database here
    end
    link_names.each do |link_name|
        link link_name, :id => "id_#{link_name}"
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:57:29.880

除了类级别的方法之外，页面对象 gem 旨在在不覆盖构造函数的情况下使用。看看这个，[https://github.com/cheezy/page-object/wiki/Get-me-started-right-now](https://github.com/cheezy/page-object/wiki/Get-me-started-right-now)！。

如果你绝对需要在页面初始化上做一些事情，那么你可以定义一个 initialize_page 方法。您仍然无法在 initialize_page 中调用类级别的方法，但如果您想在页面对象初始化时加载数据库信息，则可以使用它。根据页面对象模块源，initialize 方法检查 initialize_page 方法，如下所示：

```
 def initialize(browser, visit=false)
    initialize_accessors if respond_to?(:initialize_accessors)
    initialize_browser(browser)
    goto if visit && respond_to?(:goto)
    initialize_page if respond_to?(:initialize_page)
  end 
```

# jquery - jQuery addClass 不向元素添加类

> ID：15971890
> 
> 赞同：1
> 
> 时间：2013-04-12T12:50:21.883
> 
> 标签：jquery

我有以下html代码

```
<ul class='selectul'>
    <li class='active'><a href='?sortby=views'>by Popularity.</a></li>
    <li><a href='?sortby=recency'>by Recency.</a></li>
    <li><a href='?sortby=alphabet'>Alphabetically.</a></li>
</ul> 
```

单击任何`<li>`元素时，我想添加`class='active'`它。然后不允许它的兄弟姐妹拥有这个类。我尝试使用以下 jQuery 代码执行此操作

```
(function(){
    $('.selectul li').on('click',function(){
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    });
}()) 
```

但它似乎没有做任何事情。我刚刚开始使用 jQuery，所以如果这个问题相当基本，我深表歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:04:39.980

剧本没问题。问题出在其他地方。单击链接后，文档会重新加载，并且您不会注意到类的更改。

尝试：

```
(function(){
  $('.selectul li').on('click',function(){
    $(this).addClass('active');
    $(this).siblings().removeClass('active');
    return false;
  });
}()); 
```

**return false**会中断 Click-Event 并防止重新加载文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:54:56.367

你的代码看起来不错，我已经验证它可以工作@jsfiddle.net

[http://jsfiddle.net/kEfyT/1/](http://jsfiddle.net/kEfyT/1/)

```
$(document).ready(function(){
    $('.selectul li').on('click',function(){
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:54:46.703

尝试等待文档就绪事件，因为元素可能尚未出现在页面上。

```
$(function(){
    $('.selectul li').on('click',function(){
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:55:17.900

我认为你应该这样编码

[http://jsfiddle.net/3WBvL/2/](http://jsfiddle.net/3WBvL/2/)

```
$(document).ready(function(){
    $('.selectul li').on('click',function(){

        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    });
}); 
```

# android - 如何上传到保管箱？

> ID：15971898
> 
> 赞同：-3
> 
> 时间：2013-04-12T12:51:02.127
> 
> 标签：android, dropbox

我正在 android 中创建一个应用程序，我想在其中提供将文件上传到 drop box 的功能。请建议这是上传文件所需的投递箱应用程序，或者我们可以在不安装应用程序的情况下上传

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:57:54.357

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("file/*"); 
intent.putExtra(Intent.EXTRA_STREAM, Uri.parse(file.getPath()));  
startActivity(Intent.createChooser(intent, "title"); 
```

使用 Action Intent.ACTION_SEND 发送 Intent。如果您的设备上有保管箱应用程序，它将起作用。

祝你好运！

# google-chrome - 用于 Chrome 的第二个 SVG 元素内的 foreignObject

> ID：15971905
> 
> 赞同：1
> 
> 时间：2013-04-12T12:51:23.430
> 
> 标签：google-chrome, svg, webkit

我遇到了 Chrome 和 foreignObject 的问题，我想将它放在一个 SVG 元素中，该元素是另一个 SVG 元素的子元素，由于某种原因，chrome 似乎不喜欢这样。我是否在语法中遗漏了某些内容，或者是时候提交错误报告了吗？

例子：

```
<svg width="400" height="600" xmlns="http://www.w3.org/2000/svg" version="1.1">
    <foreignObject x="0" y="0" width="400" height="200" overflow="hidden" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="pointer-events: all;">
        <div contenteditable="true" xmlns="http://www.w3.org/1999/xhtml" style="background: black; color: white;">
            <div>This works!</div>
        </div>
        <textarea>Here we can select text</textarea>
    </foreignObject>
    <svg x="0" y="200" xmlns="http://www.w3.org/2000/svg" version="1.1">
        <foreignObject x="0" y="0" width="400" height="200" overflow="hidden" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="pointer-events: all;">
          <div contenteditable="true" xmlns="http://www.w3.org/1999/xhtml" style="background: black; color: white;">
            <div>But this does not in chrome, why not?</div>
          </div>
          <textarea>Unable to select text, but it's posible to edit</textarea>
        </foreignObject>
    </svg>
</svg> 
```

[JSFiddle 示例](http://jsfiddle.net/QdtcW/)

# javascript - 保持建议框相对于输入字段

> ID：15971919
> 
> 赞同：0
> 
> 时间：2013-04-12T12:52:05.353
> 
> 标签：javascript, jquery, html

我有这个`input box`，`an auto suggest div`当输入某些内容时会显示。`input box`没有固定位置，可以在页面上的不同位置。

我怎样才能使建议框`div`始终出现`relative to the position`在输入中。即建议 div 的左上角与输入的右下角是同一点吗？

```
$('#textBox').on('keypress',function(){
    $('#suggestionBox').show();
  });

<input type = "text" id = "textBox" />  
<div id = "suggestionBox" style = "display:none;">
<ul>
 <li>suggestion</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:04:27.480

您可以使用`offset[Top|Left|Height]`DOM0 的属性：

```
$('#textBox').on('keypress',function(){
    $('#suggestionBox').css({
        position: "absolute",
        top: (this.offsetTop + this.offsetHeight) + "px",
        left: this.offsetLeft + "px"
    });
    $('#suggestionBox').show();
}); 
```

您可以在此[jsFiddle](http://jsfiddle.net/bAEyZ/)上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:09:23.287

你知道 JQuery[自动完成](http://jqueryui.com/autocomplete/)功能吗？

它做了你需要的同样的事情。试试看。。很简单。。

它使用户能够在键入时快速查找并从每个填充的值列表中进行选择，从而利用搜索和过滤。

# c# - 从 MemoryStream 问题反序列化

> ID：15971928
> 
> 赞同：1
> 
> 时间：2013-04-12T12:52:45.637
> 
> 标签：c#, .net, deserialization, memorystream

我需要帮助来弄清楚如何从`MemoryStream`.

```
var xmlStream = new MemoryStream();
e.Extract(xmlStream);

if (xmlStream != null)
{
    TextReader tr = new StreamReader(xmlStream);
    var contentItems = new ContentItems();
    var serializer = new XmlSerializer(typeof(ContentItems));
    contentItems = (ContentItems)serializer.Deserialize(tr); // Error is here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:06:48.343

我找到了解决方案

我们应该添加

```
 xmlStream.Seek(0, SeekOrigin.Begin); 
```

所以最终的代码看起来像

```
var xmlStream = new MemoryStream();
e.Extract(xmlStream);

if (xmlStream != null)
{
    xmlStream.Seek(0, SeekOrigin.Begin);
    var contentItems = new ContentItems();
    var serializer = new XmlSerializer(typeof(ContentItems));
    contentItems = (ContentItems)serializer.Deserialize(xmlStream); // NO ERROR 
```

# php - 如何在 ExtJS 中提交表单时从 PHP 获取 JSON 响应？

> ID：15971930
> 
> 赞同：0
> 
> 时间：2013-04-12T12:52:46.147
> 
> 标签：php, javascript, extjs

我有一个包含用户名和密码字段的登录表单，提交表单后，我的应用程序正在重定向到 PHP 响应。在这里，我想获取 JSON 响应以加载到商店中，并且应用程序不应重定向到返回 JSON 数据的 PHP 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:28:48.527

//Ext Js

```
loginForm.submit({
    success: function(form, action){
        switch(action.result.status)
        {
            case 'ok'    : document.location = 'index.php'; break;
            case 'failed': 
                login_info.setHTML(action.result.msg); 
                login_info.show();
            break;
        }        
    },
    failure: function(form, action){
        login_info.setHTML('Communication error with the server'); 
        login_info.show();
    }
}); 
```

//php

```
if( $condition ){
    // login success    
    $response = array('success'=>true, 'status'=>'ok', 'msg'=>'');
}else{
    //failure
    $response = array('success'=>true, 'status'=>'failed', 'msg'=>utf8_encode('User or password incorrect'));
}
echo json_encode($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:55:03.533

在php中写

```
echo json_encode($array); 
```

在 ExtJs 中你需要 write 方法来请求你的 php

# javascript - 当我们从一个弹出窗口移动到另一个弹出窗口时，滚动条位置不会保留

> ID：15971931
> 
> 赞同：1
> 
> 时间：2013-04-12T12:52:48.887
> 
> 标签：javascript

我有一个 .aspx 页面，从这个页面我打开一个弹出窗口使用

```
window.open("..Something.aspx?id=" + objThis, "POPUP1", "width=700,height=450,left=50,top=50, scrollbars=yes"). 
```

它将打开新的弹出窗口“POPUP1”。启用滚动条后，现在我向下滚动窗口，单击将打开另一个弹出窗口的链接。但问题是第一个弹出窗口“POPUP1”的滚动条被设置回顶部。有没有其他方法可以保留滚动位置“POPUP1”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:13:10.783

这可能意味着您的链接使用`href="#"`如下：

```
<a href="#" onClick="window.open(...)"> 
```

如果是这样，请将其更改为：

```
<a href="javascript:;" onClick="window.open(...)"> 
```

它不会以这种方式将滚动条设置回页面顶部。

# javascript - HTML 表单到 XML 文件已完成，我如何将 XML 文件发布到网络服务器？

> ID：15971936
> 
> 赞同：0
> 
> 时间：2013-04-12T12:53:07.457
> 
> 标签：javascript, jquery, html, xml

我根据我在此处找到的另一篇文章的编辑创建了一个表单，一旦单击提交按钮，HTML 表单就会以 XML 格式输出。我现在如何获取转换后的数据并通过 HTTP POST 将其发布到第三方服务器，而不是在 html 上输出？

我的当前形式的代码可以在这里找到。 [http://jsbin.com/iyokay/15/edit](http://jsbin.com/iyokay/15/edit)

我对 Javascript 的了解不是很好，因此将不胜感激任何基于代码的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:01:20.497

您可以使用 ajax 发送您的 xml，

```
$("#DownloadButton").on("click",function(){
     xml = update();
     $.ajax({
       url : "saveXml.php",
       type:"post",
       data : xml,
       contentType: "text/xml",
       success : function(response){
          alert("xml saved successfully");
       }  
     });
}); 
```

`$("#DownloadButton").click(update);`用上面的代码替换它

# c++ - 使用 setjmp 和 longjmp 时 Valgrind 失败

> ID：15971939
> 
> 赞同：2
> 
> 时间：2013-04-12T12:53:15.253
> 
> 标签：c++, c, memory-management, memory-leaks, valgrind

我被分配了一个任务，因此使用信号、setjmp 和 longjmp c 函数模拟用户级线程库。基本上，该程序包括为每个“线程”分配内存，并使用长跳转和信号来模拟非直接代码流和抢占。

当我运行 valgrind 工具时，我收到以下形式的消息：“””

```
Invalid write of size 8
==19100== at 0x560020F: __sigsetjmp (setjmp.S:36)
==19100== by 0x403EC3: switchThreads(bool, bool, bool) (uthreads.cpp:673)
==19100== by 0x403DE6: signalHandler(int) (uthreads.cpp:652)
==19100== by 0x56004EF: ??? (in /lib/x86_64-linux-gnu/libc-2.13.so)
==19100== by 0x404D93: t1() (tal3.cpp:23)
==19100== Address 0x5959c90 is 48 bytes inside a block of size 4,312 alloc'd

==19100== at 0x4C2851B: operator new(unsigned long, std::nothrow_t const&) (vg_replace_malloc.c:316)

==19100== by 0x402E67: uthread_spawn(void (*)()) (uthreads.cpp:358)
==19100== by 0x404DD6: main (a3.cpp:41) 
```

"""

我已经阅读了该工具的一些论坛和文档，据我了解，valgrind 似乎不支持长跳转和“setjmp”（只要信号处理跳转），因此导致似乎是内存问题 -但我无法给出明确的答案。

感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:01:52.560

> valgrind 似乎不支持长跳转和“setjmp”（只要信号处理跳转），

更准确地说：Valgrind 不直接支持通过 {sig,}longjmp 进行的“自定义”堆栈切换。

您可以放置​​特殊的 Valgrind 注释来通知 Valgrind 您正在执行的堆栈切换，但这可能不是一件容易的事。请参阅此[文档](http://valgrind.org/docs/manual/manual-core-adv.html)和`VALGRIND_STACK_REGISTER`，`VALGRIND_STACK_DEREGISTER`尤其`VALGRIND_STACK_CHANGE`是客户请求。

# string - ocaml 中的错误链接模块

> ID：15971941
> 
> 赞同：11
> 
> 时间：2013-04-12T12:53:31.180
> 
> 标签：string, module, include, ocaml

我是 Ocaml 编程的完整初学者，我无法将模块链接到我的程序中。实际上，我正在做一些正则表达式检查，并且我编写了一个函数，该函数基本上使用[Str 模块](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Str.html)基于分隔符字符串对字符串进行标记。所以我使用库中定义的函数，如下所示：

```
Str.regexp_string /*and so on*/ 
```

但是，当我尝试编译 ml 文件时，我收到一条错误消息，提示我有一个未定义的全局**Str**。我们通过键入 List.length 等来使用*List*函数，就像我对 Str 所做的那样，而不必显式包含特定模块。我试过了

```
open Str;;
include Str;; /*None of these work and I still get the same error*/ 
```

但是，如果在顶层我使用

```
load "str.cma" /*Then the program works without problems*/ 
```

我想将模块包含在 ml 文件中，因为我必须最后链接 3 cmo 才能获得最终的可执行文件（不在顶层运行）。我知道这是一个非常基本的问题，但我无法解决它。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T13:21:32.240

您无需在文件 foo.ml 中添加任何内容。在编译 foo.ml 时，您确实需要告诉编译器在哪里可以找到 Str 模块。为此，请将其添加到用于编译 foo.ml 的命令行中：

```
ocamlc str.cma foo.ml 
```

或者

```
ocamlopt str.cmxa foo.ml 
```

`List`和标准库中的其他模块默认是可以访问的，所以你不需要告诉编译器那些经常使用的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-14T16:49:47.897

只需添加`str`到文件的`libraries`字段中`dune` 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T14:23:53.510

```
ocamlc calc.ml str.cma -o calc
File "calc.ml", line 1:
Error: Error while linking calc.cmo:
Reference to undefined global `Str' 
```

代码很简单，可以减少乱七八糟的。

```
let split_into_words s = 
    Str.split ( Str.regexp "[ \n\t]+") s ;;

let _ = 
    split_into_words "abc def ghi" ;; 
```

在 ocaml 4.0.2 上。显然，这里有一个问题，但是我太初学者了，无法理解它是什么。从顶层看，#load "str.cma" 似乎可以正常工作，所以这里有些东西我们不明白。有人知道这是什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:01:24.147

我认为您需要使用“-cclib”编译器指令。模块名称不应包含以 .cma 结尾的文件。下面是我在尝试使用 unix 和 threads 模块时所做的。我认为您需要使用“custom”和“cclib”编译器指令的某种组合。

ocamlc -custom unix.cma threa.ml -cclib -lunix

查看本书第 7 章的帮助： [http ://caml.inria.fr/pub/docs/oreilly-book/html/book-ora063.html](http://caml.inria.fr/pub/docs/oreilly-book/html/book-ora063.html)

并在这里查看编译器指令的覆盖范围：http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual022.html#c: [camlc](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual022.html#c:camlc)

# jquery - “等待，加载，然后显示”内容的更好方法

> ID：15971943
> 
> 赞同：1
> 
> 时间：2013-04-12T12:53:33.487
> 
> 标签：jquery, load

单击时，我`div`通过该方法填充了一个内容。`$.load()`然后，我将此`div`附加到`body`弹出窗口（有点像模态弹出窗口）。每次点击，内容`div`都会改变。

### 问题

碰巧整个填充机制大约需要 1.5 到 2 秒。如果我只点击一次就没有问题。但是，如果我再次单击，则会`div`弹出旧内容，然后在接下来的 500 毫秒左右内加载新内容。所以用户可以看到我想避免的新旧内容。

### 我试过的

(1)首先想到的是用一个`setTimeout()`函数在2秒后运行。

```
$('div#temp').load('somepage.php');
setTimeout(function(){
   html = $('div#temp').html();
}, 2000);
$('div#popup').html(html).appendTo('body'); 
```

这可以工作，但它不可靠。无法保证新内容会在 2 秒内加载。它也可能需要 3 秒或更长时间。硬编码超过 2 秒的值也不好，因为它似乎是永恒的。

(2) 我尝试的下一件事是`while`通过以下方式使用循环：

```
var html = '';
$('div#temp').load('somepage.php');
html = $('div#temp').html();
while(html == '')
{
  html = $('div#temp').html();
}
$('div#popup').html(html).appendTo('body'); 
```

最后这可行，但由于某种原因，它会在弹出浏览器之前将浏览器挂起 8-10 秒`div`

很明显，这两种选择都有一些缺点。我希望可能有其他我不知道的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:00:34.210

您是否尝试过使用[$.load](http://api.jquery.com/load/)的完整回调？
`.load( url [, data ] [, complete(responseText, textStatus, XMLHttpRequest) ] )`

```
$('div#temp').load('somepage.php',function(responseText){
     $('div#popup').html(responseText).appendTo('body');
 }); 
```

如果旧内容仍然在新内容之前显示，您可以先隐藏旧内容。那么你就不需要一个临时 div 来存储数据了。

```
$('div#popup').fadeOut(function(){
     $('div#popup').load('somepage.php',function(){
     $(this).fadeIn();
 });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:59:57.133

听起来您只需要在开始 AJAX 调用之前擦除弹出 div 的内容（并可能在其中放入“正在加载...”消息）。

另外，使用完成回调参数`.load`来触发对 DOM 的后续更新。

```
$('#popup').html('loading...');
$.get('somepage.php', function(content) {
    $('#popup').html(content);
}); 
```

您永远不应该轮询 DOM 或以其他方式将 JS 解释器置于“忙循环”中——它会使浏览器无响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:57:25.820

我建议您仅在加载内容*后才*弹出 div ：

```
$.get('somepage.php', function(data) {
   $('div#popup').html(data).appendTo('body');
}); 
```

# c# - 在asp.net中进行url路由时获取正确的路由url数据

> ID：15971950
> 
> 赞同：0
> 
> 时间：2013-04-12T12:53:55.997
> 
> 标签：c#, asp.net, url-routing, global-asax

我正在为 SEO 做路由 url。但是，当我获取路线数据时，会发生此错误；“404 - 找不到文件或目录。”

网址；

```
http://subdomain.callcenter.com/ActivateUser/speu2mziTcVs+O3NCQZtWAFX2lWecxotSfAOXu1TEQ= 
```

但是当我从路由数据字符串中删除“+”字符时效果很好。

我的 global.asx 文件；

```
 RouteTable.Routes.MapPageRoute("ActivateUser", "ActivateUser/{*code}", "~/Presentation/Site/ActivateUser.aspx"); 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:25:14.327

答案是改变 web.config 如下；

```
<system.webServer>
  <security>
      <requestFiltering allowDoubleEscaping="true" />
  </security>
</system.webServer> 
```

# java - 如何在java中的列表中添加复选框

> ID：15971953
> 
> 赞同：0
> 
> 时间：2013-04-12T12:54:04.530
> 
> 标签：java, swing, checkbox, jscrollpane, jlist

大家好，我正在尝试将复选框添加到 JList 中，但由于某些原因，它给了我`IllegalArgumentException`. 如果有人知道如何在 JList 中添加复选框，请告诉我。先感谢您

```
 JCheckBox []data={
    new JCheckBox("C"),
    new JCheckBox("C++"),
    new JCheckBox("Java"),
    new JCheckBox("C sharp")};
    JList l=new JList(data);
    JScrollPane sp=new  JScrollPane(l,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:00:22.913

这是完整的异常消息：

```
IllegalArgumentException: invalid verticalScrollBarPolicy 
```

`JScrollPane`实例化时引起的。这些`JScrollPane`政策是错误的：

```
JScrollPane sp = new JScrollPane(l,
        ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,
        ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:02:04.343

问题[出](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#JScrollPane%28java.awt.Component,%20int,%20int%29)在`JScrollPane`. 第二个参数应该是垂直滚动条策略，而不是水平：

```
public JScrollPane(Component view, int vsbPolicy, int hsbPolicy) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:04:34.977

发生非法ArgumentExceptions 是因为您将水平滚动条策略与垂直滚动条策略切换。

但是使用此代码，您将不会获得复选框列表，而只会获得对象的文本表示。

看看这个[问题](https://stackoverflow.com/questions/19766/how-do-i-make-a-list-with-checkboxes-in-java-swing)

# c - 初始化无限数量的 char **

> ID：15971954
> 
> 赞同：0
> 
> 时间：2013-04-12T12:54:09.093
> 
> 标签：c, char, malloc

我正在使用 minilibX 库在 C 中制作光线跟踪引擎。我希望能够在`.conf`文件中读取要显示的场景配置：

例如：

```
(Az@Az 117)cat universe.conf
#randomcomment
obj:eye:x:y:z
light:sun:100
light:moon:test 
```

对象的数量可以在 1 和无限之间变化。从现在开始，我正在读取文件，在 char **tab 中逐一复制每一行，并按找到的对象数进行分配，如下所示：

```
void    open_file(int fd, struct s_img *m)
{
  int   i;
  char  *s;
  int   curs_obj;
  int   curs_light;

  i = 0;
  curs_light = 0;
  curs_obj = 0;
  while (s = get_next_line(fd))
    {
      i = i + 1;
      if (s[0] == 'l')
        {
          m->lights[curs_light] = s;
          curs_light = curs_light + 1;
         }
       else if (s[0] == 'o')
         {
           m->objs[curs_obj] = s;
           curs_obj = curs_obj + 1;
         }
       else if (s[0] != '#')
         {
          show_error(i, s);
          stop_parsing(m);
         }
  } 
```

现在，我希望能够将每个对象的每个信息存储`tab[i]`在一个新`char **tab`的 1 中，每个对象使用 1`':'`作为分隔符。所以我需要初始化`malloc`一个未确定数量的`char **tab`. 我怎样才能做到这一点？

（Ps：我希望我的代码和我的英语足以让你理解。而且我只使用非常基本的功能，如读、写、打开、malloc ......我正在重新构建其他所有东西，如 printf、get_line 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:04:47.347

您不能分配*不确定*的内存量；`malloc`不支持它。您可以做的是暂时分配足够的内存并稍后*进行*修改：

```
size_t buffer = 10;
char **tab = malloc(buffer);

//...
if (indexOfObjectToCreate > buffer) {
  buffer *= 2;
  tab = realloc(tab, buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:10:37.160

我会使用另一种方法（因为这是c，而不是c++）并在我们经过时分配简单的大缓冲区：

```
char *my_malloc(size_t n) {
      static size_t space_left = 0;
      static char *base = NULL;
      if (base==NULL || space_left < n) base=malloc(space_left=BIG_N);
      base +=n; return base-n;
} 
```

免责声明：我省略了垃圾收集的东西和测试返回值以及所有安全措施，以保持例程简短。

另一种思考方式是将文件读入一个足够大的未分配数组（您可以使用 ftell 检查它），扫描缓冲区，用 ascii 零字符替换分隔符、换行符等，并记住关键字的起始位置。

# c# - 在listviewitem中单击按钮后访问listview中的对象

> ID：15971957
> 
> 赞同：0
> 
> 时间：2013-04-12T12:54:15.610
> 
> 标签：c#, asp.net, data-binding

我正在尝试设置用户控件。

我已经设置了一个带有表格的用户控件，包括表格标题。对于每一行，发出第二个用户控件，显示表的 1 行。line-usercontrol 嵌入在列表视图中。

listview 的一个单元格包含一个文本框，另一个单元格包含一个按钮。每行的按钮都使用相同的 buttonclick 事件，使用命令参数来查找按下的按钮。

是否有某种方法可以获取在该特定行的文本框中输入的值？

代码头控制：

```
<asp:Panel runat="server" ID="pnlUcHeader">
<table>
    <thead>
        <tr>
            <th>...</th>
            ...
            <th>Textbox Column</th>
            <th>Button Column</th>
        </tr>
    </thead>
    <asp:ListView runat="server" ID="lvUcItemsItem" OnItemDataBound="lvUcItems_ItemDataBound">
        <ItemTemplate>
            <uc1:Items runat="server" ID="ucItems" CssClass="normal" />
        </ItemTemplate>
    </asp:ListView>
</table> 
```

代码 项目 用户控制

```
<tr runat="server" id="serverRow">
<td>
    <asp:Literal runat="server" ID="..."></asp:Literal></td>
<td>
    <asp:TextBox runat="server" ID="tbItem"></asp:TextBox>
</td>
<td>
    <asp:Button runat="server" ID="btnItem" Text="..." OnCommand="btnItem_Click"/>
</td> 
```

项目用户控件背后的代码

```
protected void btnItem_Click(object sender, CommandEventArgs e)
{
    var lineID = e.CommandArgument;
    //TextBox tb = FindControl("tbAfhaalDatum)
    ???????
} 
```

这是否可能在后面的代码中，或者是否可以选择使用 Javascript/Jquery 回发值？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:42:38.380

您必须访问您的控件[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)来搜索您的文本框：

```
protected void btnItem_Click(object sender, CommandEventArgs e)
{
    var control = (Control)sender;
    var container = control.NamingContainer;
    var textBox = container.FindControl("tbItem") as TextBox;

    if (textBox != null)
    {
        var lineID = e.CommandArgument;
        var text = textBox.Text;
    }
} 
```

# google-chrome - jquery mobile 和 chrome：加载页面

> ID：15971958
> 
> 赞同：0
> 
> 时间：2013-04-12T12:54:21.383
> 
> 标签：google-chrome, jquery-mobile

我实际上有一些使用 jQuery Mobile 框架的 HTML 页面，我的问题很简单：在 Chrome 上，我如何打开另一个页面？

```
<a href="page2.html"> Go to page2 </a> 
```

我的目标是应用过渡效果，所以我添加了例如：

```
data-transition="turn" 
```

但我的浏览器给了我这个错误：

```
Error loading page : XMLHttpRequest cannot load file:///C:/.../page2.html. Origin null is not allowed by Access-Control-Allow-Origin 
```

使用 --allow-file-access-from-files 选项运行 Chrome 并不能解决我的问题。我试图添加： `rel="external"` 但它取消了我页面之间的所有动画。

你能看到解决这个问题的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T12:50:18.277

下载 xampp。安装它并将包含 jqm 文件（my_jqm_folder）的文件夹放在 httpdocs 文件中。
打开 xampp 并运行 Apache 服务器。
（小心，你必须先关闭你的Skype，因为它们默认使用相同的端口。在你运行Apache之后再次运行你的Skype就没有问题了。）
然后转到chrome并输入：localhost/my_jqm_folder/my_html_file.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T18:12:20.250

添加 rel="外部" `<a href="page2.html" rel="external"> Go to page2 </a>`

# ms-access - 通过 VBA 发送带有后期绑定错误的电子邮件

> ID：15971959
> 
> 赞同：2
> 
> 时间：2013-04-12T12:54:27.483
> 
> 标签：ms-access, outlook, vba, office-2010, office-2003

我正在尝试在 Access 2010 和 Access 2003 中对来自 VBA 的电子邮件使用后期绑定。2003 给了我“无法完成操作”。一个或多个参数值无效。并且 2010 给了我“无效的过程调用或参数”。我已经完成了这一步，但它在`.send`底部附近失败了。我是否设置了错误的绑定？我正在尝试在参考中不使用 Microsoft 对象库的情况下执行此操作。

谢谢。

```
'Refers to Outlook's Application object
Dim appOutlook As Object
'Refers to an Outlook email message
Dim appOutlookMsg As Object
'Refers to an Outlook email recipient
 Dim appOutlookRec As Object

'Create an Outlook session in the background
Set appOutlook = CreateObject("Outlook.Application")

'Create a new empty email message
Set appOutlookMsg = appOutlook.CreateItem(olMailItem)

'Using the new, empty message...
With appOutlookMsg

strSQL = "SELECT Email FROM Employees WHERE " & sqlVar & " = True"
Set myR = CurrentDb.OpenRecordset(strSQL)

Do While Not myR.EOF
Set appOutlookRec = .Recipients.Add(myR!Email)
appOutlookRec.Type = olTo
myR.MoveNext
Loop

strSQL = "SELECT Email FROM Employees WHERE '" & user & "' = Username"    
Set myR = CurrentDb.OpenRecordset(strSQL)

Set appOutlookRec = .Recipients.Add(myR!Email)
appOutlookRec.Type = olCC

.Subject = wonum
.Body = "Department: " & strDep & vbNewLine & vbNewLine & _
    "Issue is at: " & strIssue & vbNewLine & vbNewLine & _
    "Priority is: " & strPriority & vbNewLine & vbNewLine & _
    "Complete by: " & strDate & vbNewLine & vbNewLine & _
    "Description: " & strDesc

.Send

End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:00:16.540

如果没有引用，VBA 将不知道 Outlook 常量，例如`olTo`和`olCC`。对于后期绑定（无引用），您必须提供常量的*值*而不是常量的*名称*。

但是，由于您没有报告有关这些常量的编译错误，这表明您的代码模块不包含`Option Explicit`在其声明部分中。尝试在没有 VBA 代码的情况下进行故障排除`Option Explicit`是浪费时间。

添加`Option Explicit`，然后从 VB 编辑器的主菜单中选择 Debug->Compile 并修复编译器抱怨的任何问题。之后继续进行故障排除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:52:47.743

[这里](http://www.dicks-clicks.com/excel/olBinding.htm)有一篇关于使用早期和晚期绑定通过 Outlook 发送电子邮件的文章。在最后的“后期转换清单”中，最后一个建议是

> 添加具有默认值的可选参数

我不能保证这个建议，因为当我需要从 Access 发送电子邮件时，我使用的是 CDO，而不是 Outlook。不过，听起来它可能值得一试。

# php - 获取时差并以正确的格式显示

> ID：15971965
> 
> 赞同：-5
> 
> 时间：2013-04-12T12:54:53.043
> 
> 标签：php, mysql

我在数据库中有两个字段，名为 start_time(12:30) 和 end_time(13:35)。我想以“4hrs 30Mins”格式显示它们的区别。我怎样才能完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:00:14.153

在此问题被删除之前，这是一些慈善活动

```
$date1    = new DateTime($row['date1']);
$date2    = new DateTime($row['date2']);
$interval = $date2->diff($date1);
$period   = $interval->format('%y years, %m months, %d days, %h hours, %i minutes');
$period   = str_replace(array('0 years,', ' 0 months,', ' 0 days,', ' 0 hours,', ' 0 minutes,'), '', $period);
return str_replace(array('1 years, ', ' 1 months, ', ' 1 days, ', ' 1 hours, ', ' 1 minutes'), array('1 year, ', '1 month, ', ' 1 day, ', ' 1 hour, ', ' 1 minute'), $period); 
```

**参考**

*   [日期时间类](http://www.php.net/manual/en/class.datetime.php)
*   [日期周期类](http://www.php.net/manual/en/class.dateperiod.php)
*   [日期间隔类](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:14:42.513

我自己想通了，谢谢。

```
$from_time = strtotime($job->start_time);
$to_time = strtotime($job->end_time);
$mins=round(abs($to_time - $from_time) / 60,2);
$hrs=round($mins/60,2);
$arr=explode(".",$hrs);
echo $arr[0]." Hrs ".$arr[1]." Mins"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:58:34.833

快速浏览一下 PHP 文档将为您指明正确的方向。

要比较两个日期，可以使用[`diff`DateTime 对象的方法。](http://au.php.net/manual/en/datetime.diff.php)

完成后，您可以使用[date](http://php.net/manual/en/function.date.php)随意格式化它。

# ios - IOS 库，用于将 powerpoint 演示文稿转换为图像

> ID：15971969
> 
> 赞同：4
> 
> 时间：2013-04-12T12:54:58.820
> 
> 标签：ios

经过大量搜索并仍在搜索后，我无法找到从 powerpoint 演示文稿中提取幻灯片的方法。需要帮助，如果他们知道与此相关的任何事情或已经实现了这样的事情，源代码将会很棒，或者任何参考链接也可以使用。我一直在使用 QLPreviewController，但我未能覆盖它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T14:46:22.047

我不确定这是否仍然需要。但无论如何，这就是我实施的方式

(1)`UIWebView`用于显示PPT的内容。格式良好的 (!) HTML 允许您解析它。使用获取html

```
NSString *htmlContent = [self.webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"]; 
```

(2) 计数 `div class = 'slide`得到幻灯片数

(4) 您需要解析 HTML 以获取样式并`div`使用以下代码

(5) 获取所有样式

```
- (NSString *)getStyles:(int)slideCount forView:(UIWebView *)view {

    NSString *getElementByTag = [[NSString alloc] init];
    NSString *allStyles = [[NSString alloc] init];

    for (int i = 0; i < slideCount; i++) {
        getElementByTag = [NSString stringWithFormat:@"document.getElementsByTagName('style')[%d].innerHTML", i];
        NSString *style =  [[view stringByEvaluatingJavaScriptFromString:getElementByTag] stringByAppendingString:@"\n"];
        allStyles = [allStyles stringByAppendingString:style];
    }

    allStyles = [@"<style type='text/css'>" stringByAppendingString: allStyles];

    return [allStyles stringByAppendingString:@"</style>"];
} 
```

(6) 将步骤 5 中的所有样式与`div`标签内容连接起来。定义一个`NSMutableArray`变量来存储所有带有样式的幻灯片以供将来参考。定义`NSMutableArray *slides`存储所有幻灯片

```
- (void)makeSlides:(int)slideCount forView:(UIWebView *)view {

    self.slides = [[NSMutableArray alloc] init];

    for (int i = 0; i < slideCount; i++) {
        NSString *slideBody = [NSString stringWithFormat:@"document.getElementsByClassName('slide')[%d].innerHTML", i];
        NSString *div = [view stringByEvaluatingJavaScriptFromString:slideBody];

        NSString *slide = [self.slideStyles stringByAppendingString:div];
        [self.slides addObject:slide];
    }
} 
```

希望这可以帮助

# python - 在 python 中加入列表和元组

> ID：15971985
> 
> 赞同：1
> 
> 时间：2013-04-12T12:55:18.307
> 
> 标签：python, list, tuples

我想转换

```
[(3L, (2L,)), (108L, (11L,))] 
```

至

```
(3L, (2L,), 108L, (11L,)) 
```

我尝试使用此代码来执行此操作

```
 ["".join(map(str, val)) for val in list] 
```

我的输出变成了

```
('3(2L,)', '108(11L,)') 
```

我将如何正确转换这个..？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:58:04.507

```
In [11]: lst = [(3L, (2L,)), (108L, (11L,))]

In [12]: tuple(el for subl in lst for el in subl)
Out[12]: (3L, (2L,), 108L, (11L,)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:30:19.110

另一种选择是来自 itertools的[链：](http://docs.python.org/2/library/itertools.html#itertools.chain)

```
In [1]: from itertools import chain
In [2]: a = [(3L, (2L,)), (108L, (11L,))]
In [3]: tuple(chain(*a))
Out[3]: (3L, (2L,), 108L, (11L,)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:43:41.720

```
import itertools

L = [(3L, (2L,)), (108L, (11L,))]
tuple(chain.from_iterable(L)) 
```

# jquery - 在 Bryntum Schedular 上创建事件时如何获取成功响应文本

> ID：15971990
> 
> 赞同：0
> 
> 时间：2013-04-12T12:55:29.310
> 
> 标签：jquery, extjs, ext.net

**在 Bryntum Schedular**中创建任何事件时，如何获得成功响应文本** 我想要的是，当进行预订（事件）时，我想从网络服务返回一些状态结果（可能是预订 id）。**

 **对此的任何帮助将不胜感激

```
Ext.Loader.setConfig({ enabled: true, disableCaching: true });

Ext.Loader.setPath('Sch', '../../js/Sch');

Ext.require([
    'Sch.panel.SchedulerGrid',
    //'App.DemoEditor',
    'Ext.data.*',
    'Ext.grid.*'
]);

Ext.onReady(function () {
    Ext.QuickTips.init();

    App.Scheduler.init();
});

App.Scheduler = {

    // Initialize application
    init: function () {
        this.grid = this.createGrid();
        this.grid.on('eventcontextmenu', this.onEventContextMenu, this);
    },

    // Default renderer, supplies data to be applied to the event template
    renderer: function (event, r, tplData, row, col, ds) {
        tplData.cls = r.get('Category');

        // Add data to be applied to the event template
        return Ext.Date.format(event.getStartDate(), 'Y-m-d');
    },

    onEventContextMenu: function (g, rec, e) {
        e.stopEvent();

        if (!g.gCtx) {
            g.gCtx = new Ext.menu.Menu({
                items: [
                    {
                        text: 'Show Details',
                        handler: function () {

                            new Ext.Window({
                                title: "Create Order",
                                width: 700,
                                height: 400,
                                maximizable: true,
                                minimizable: true,
                                layout: 'fit',
                                items: [{
                                    xtype: "component",
                                    autoEl: {
                                        tag: "iframe",
                                        src: "CreateOrder.aspx"
                                    }
                                }]
                            }).show();

                            //g.getSelectionModel().selected.each(function (r) {

                            //});
                        }
                    },
                    {
                        text: 'Change Status',
                        handler: function () {
                            var _booktempId = "";
                            var divColorId = g.id + '-' + g.gCtx.rec.internalId;
                            if (rec.data.Name == "New task") {
                            }
                            else {
                                _booktempId = g.gCtx.rec.internalId;
                            }
                            new Ext.Window({
                                id: 'ExtPanelStatus',
                                title: "Change Status",
                                width: 500,
                                height: 300,
                                maximizable: false,
                                minimizable: false,
                                layout: 'fit',
                                items: [{
                                    xtype: "component",
                                    autoEl: {
                                        tag: "iframe",
                                        src: "ChangeStatus.aspx?BookingId=" + _booktempId + "&divColorId=" + divColorId
                                    }
                                }]
                            }).show();
                            //g.getSelectionModel().selected.each(function (r) {
                            //    g.eventStore.remove(r);
                            //});
                        }
                    },
                    {
                        text: 'Delete Booking',
                        iconCls: 'icon-delete',
                        handler: function () {
                            g.eventStore.remove(g.gCtx.rec);
                        }
                    }

                ]
            });
        }
        g.gCtx.rec = rec;
        g.gCtx.showAt(e.getXY());
    },

    createGrid: function () {
        Ext.define('EmployeeModel', {
            extend: 'Sch.model.Resource',
            fields: [
                { name: 'ProductName', type: 'string' },
                { name: 'QuantityPerUnit', type: 'float' }
            ]
        });

        Ext.define('BookingModel', {
            extend: 'Sch.model.Event',
            clsField: 'BookingStatusColor',
            fields: [
                { name: 'Name', type: 'string' },
                { name: 'StartDate', type: 'date', dateFormat: 'MS' },
                { name: 'EndDate', type: 'date', dateFormat: 'MS' }
            ]
        });

        var resourceStore = Ext.create("Sch.data.ResourceStore", {
            sorters: 'Name',
            proxy: {
                type: 'ajax',
                sortParam: undefined,
                startParam: undefined,
                pageParam: undefined,
                limitParam: undefined,
                noCache: false,
                headers: {
                    "Content-Type": "application/json; charset=utf-8"
                },
                api: {
                    read: 'webservices/products.asmx/GetProducts?_systemIds=1',
                    create: 'webservices/products.asmx/Create',
                    destroy: 'webservices/products.asmx/Delete',
                    update: 'webservices/products.asmx/Update'
                },
                reader: {
                    type: 'json',
                    idProperty: 'ProductId',
                    root: 'd.data'
                },
                writer: {
                    root: 'data',
                    type: 'json',
                    encode: false,
                    writeAllFields: true
                }
            },
            autoSync: true,
            batch: false,
            model: 'EmployeeModel'

        }),

            // Store holding all the events
            eventStore = Ext.create("Sch.data.EventStore", {
                id: "BookingSchedular",
                autoLoad: true,
                autoSync: true,
                batch: false,
                proxy: {
                    type: 'ajax',
                    sortParam: undefined,
                    startParam: undefined,
                    pageParam: undefined,
                    limitParam: undefined,
                    noCache: false,
                    headers: {
                        "Content-Type": "application/json; charset=utf-8"
                    },
                    api: {
                        read: 'webservices/booking.asmx/GetBookings?_systemIds=1',
                        create: 'webservices/booking.asmx/Create',
                        destroy: 'webservices/booking.asmx/Delete',
                        update: 'webservices/booking.asmx/Update'
                    },
                    reader: {
                        type: 'json',
                        root: 'd.data'
                    },
                    writer: {
                        type: 'json',
                        encode: false,
                        writeAllFields: true,
                        root: 'data'
                    }
                },
                model: 'BookingModel',
                listeners: {
                    add: function (store,records,index,options) {
                        alert(1);
                    },
                    update: function (store, records, index, options) {
                        alert(2);
                    },
                    exception: function (proxy, res) {
                        alert('exception');
                        //console.log(proxy);
                        //console.log(type);
                        var responseObj = Ext.JSON.decode(res.responseText);
                        var success = responseObj.success;

                        if (success == true) {
                            EV.Rostering.Grid.eventStore.commitChanges();
                            EV.Rostering.Grid.eventStore.load();
                        }
                        else {
                            alert('Unable to save shift(s)');
                        }
                    },
                    success: function (a, b, c) {
                        alert("success");
                    }
                    //scope: this
                }
            });

        var g = Ext.create("Sch.panel.SchedulerGrid", {
            renderTo: 'divSchedular',
            width: '100%',
            height: 600,
            title: 'Employee tasks',
            frame: false,
            dndValidatorFn: function (rs) { return !rs[0].dirty; },
            resizeValidatorFn: function (r) { return !r.dirty; },
            eventStore: eventStore,
            startDate: new Date(2013, 0, 1),
            endDate: new Date(2013, 8, 1),
            //viewPreset: 'weekAndMonth',
            viewPreset: 'dayAndWeek',
            eventBarTextField: 'Name',
            rowHeight: 32,

            eventRenderer: function (item, resourceRec) {
                var bookingStart = item.get('StartDate');

                return {
                    headerText: item.dirty ? '&nbsp;' : Ext.Date.format(bookingStart, "y-M-d"),
                    footerText: item.get('Name') || '&nbsp;'
                };
            },
            listeners: {
                eventclick: function (store, records, index, options) {
                    var BookingId = records.internalId;
                    var ProductId = records.data.ResourceId;
                    new Ext.Window({
                        id: 'ExtPanelStatus',
                        title: "Edit Details",
                        width: 450,
                        height: 550,
                        maximizable: false,
                        minimizable: false,
                        layout: 'fit',
                        items: [{
                            xtype: "component",
                            autoEl: {
                                tag: "iframe",
                                src: "BookingDetails.aspx?BookingId=" + BookingId + "&ProductId=" + ProductId
                            }
                        }]
                    }).show();
                }
            },
            plugins: Ext.create('Ext.grid.plugin.CellEditing', {

                clicksToEdit: 1,

            }),

            // Specialized template with header and footer
            eventBodyTemplate: new Ext.Template(
                '<span class="sch-event-header">{headerText}</span>' +
                '<div class="sch-event-footer">{footerText}</div>'
            ),

            onEventCreated: function (newRecord) {
                newRecord.set('Name', 'New task');
            },
            // Setup your static columns
            columns: [
                { header: 'Property', dataIndex: 'ProductName', width: 70, renderer: function (v, m) { m.css = 'user'; return v; }, sortable: true, field: new Ext.form.TextField() },
                { header: 'Nr of Days', dataIndex: 'QuantityPerUnit', width: 70, align: 'center', sortable: true },
                { header: 'Arrival Day', dataIndex: 'Active', width: 70, trueText: 'Yes', falseText: 'No', align: 'center' }
            ],
            tbar: [
           {
               text: 'Add new booking',
               iconCls: 'icon-add',
               handler: function () {
                   new Ext.Window({
                       title: "Create Order",
                       width: 700,
                       height: 400,
                       maximizable: true,
                       minimizable: true,
                       layout: 'fit',
                       items: [{
                           xtype: "component",
                           autoEl: {
                               tag: "iframe",
                               src: "CreateOrder.aspx"
                           }
                       }]
                   }).show();
               }
           },
            ],
            store: resourceStore,
            resourceStore: resourceStore,
            eventStore: eventStore,
            border: true

        });

        resourceStore.load();
        eventStore.load();

        return g;

    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T14:32:55.213

```
eventStore = .....
  listeners:{
       write : function (store, operation, eOpts) {
            console.log(operation.response.responseText);
       }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:32:38.723

我认为您应该使用 Store 的 Load 侦听器。
[http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.AbstractStore-event-load](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.AbstractStore-event-load)

记录数组是将成功标志传递给侦听器。

我假设预订 ID 应该是记录的字段，不应该吗？**

# javascript - 如何在 HTML 中显示 Javascript 变量？

> ID：15971994
> 
> 赞同：-2
> 
> 时间：2013-04-12T12:55:43.603
> 
> 标签：javascript, html, css

我正在尝试将一些 javascript 添加到我的 HTML 文档中。在我的示例中，我想用 HTML 文本显示 2 的正方形。应使用 js 脚本计算结果。例如，考虑一下：

在我的标题中：

```
<script type="text/javascript">
  var square = 2*2
</script> 
```

在我的身体里：

```
<p>The square of 2 is <span id="square">.</span></p> 
```

我必须添加什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:00:03.743

您需要将`innerHtml`跨度的 设置为该值，因此它将是这样的：

```
<script type="text/javascript">
  var square = 2*2;
  document.getElementById('square').innerHTML = square;
</script> 
```

但是您会希望将此脚本移动到写入跨度的位置之后，因为页面以程序方式呈现并且跨度在头部尚不存在。另一种选择是将代码包装在`document.onload`如下函数中：

```
<script type="text/javascript">
  document.onload(function() {
      var square = 2*2;
      document.getElementById('square').innerHTML = square;
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:59:30.403

尝试使用 HTML 文档对象模型，例如，

```
function changeText(){
 var ans = 2*2;
document.getElementById("square").innerHTML = ans;
} 
```

然后，将此 javascript 附加到一个事件，例如

```
<body onload="changeText()"> 
```