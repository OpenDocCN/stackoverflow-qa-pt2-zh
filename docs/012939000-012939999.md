# StackOverflow 问答 12939000-12939999

# sql-server - 用户创建的统计信息添加对 sql server 上的列的依赖

> ID：12939000
> 
> 赞同：2
> 
> 时间：2012-10-17T16:31:55.753
> 
> 标签：sql-server

最近我删除了所有自动创建的统计信息（名为`_WA_Sys_%`）并运行以下 T-SQL 命令为数据库的所有列创建统计信息：

```
EXEC sp_createstats @indexonly = 'NO', @fullscan = 'FULLSCAN', @norecompute ='NO' 
```

一切正常，直到我不得不在表中删除一列，然后`error 5074`发生，表明应该在删除列之前删除统计信息。

有没有办法在`SQL Server`删除列时静默删除用户创建的统计信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:46:24.487

我不认为你可以让 SQL Server 默默地做到这一点，因为这对于使用用户统计信息的人来说是一个常见的问题。[有一种方法可以使用自定义查询删除相关统计信息](https://stackoverflow.com/questions/7956620/do-statistics-referencing-a-column-prevent-that-column-from-being-dropped)- 它是否适合您的需求？

# asp.net - Simple.Data 默认生成的查询和性能

> ID：12939004
> 
> 赞同：0
> 
> 时间：2012-10-17T16:32:05.750
> 
> 标签：asp.net, sql, simple.data, micro-orm

我正在考虑为我的 ASP.NET 4.5 网站使用 Simple.Data Micro-ORM。但是，在决定是否使用它之前，我需要知道一些事情。

让我们以下面的 Join 查询为例：

```
var albums = db.Albums.FindAllByGenreId(1)
  .Select(
db.Albums.Title,
db.Albums.Genre.Name); 
```

此查询将被翻译为：

```
select 
 [dbo].[Albums].[Title],
 [dbo].[Genres].[Name] 
from [dbo].[Albums] 
   LEFT JOIN [dbo].[Genres] ON ([dbo].[Genres].[GenreId] = [dbo].[Albums].[GenreId]) 
WHERE [dbo].[Albums].[GenreId] = @p1
@p1 (Int32) = 1 
```

让我们假设“流派”表是一个包含数千甚至数百万行的表。我认为在 JOIN 发生后过滤数据可能非常低效，这就是该查询在 Simple.Date 中翻译的内容。

过滤Generes表中的数据会更好，这意味着首先创建一个SELECT语句并与该过滤表进行JOIN？

提前过滤数据不是更好吗？

此外，是否可以选择使用 Simple.Data 进行这种类型的复杂（在过滤表上加入）查询。

需要您的答案才能知道是继续使用 Simple.Data，还是将其抑制为支持另一个微 ORM。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T21:50:16.697

您对数据库引擎如何解释和执行 SQL 感到困惑。现代数据库对于执行查询的最佳方式非常聪明，并且指令在 SQL 语句中出现的顺序与它们的执行顺序无关。

Try running some queries through SQL Management Studio and looking at the Execution Plan to see how they are actually optimised and executed. Or just try the SQL you think would work better and see how it actually performs compared to what is generated by Simple.Data.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:09:30.540

Simple.Data 生成的 sql 是惯用的 T-SQL，老实说，如果我自己起草 sql，我会写什么。

该 sql 允许 Sql Server 优化执行计划，这应该意味着最有效的数据检索。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-05T23:44:51.910

The beauty of Simple.Data is that if you have any doubts or issues with the sql it generates you can just call a stored proc:

```
db.ProcedureWithParameters(1, 2); 
```

# c# - 如何使用 jquery 访问 Datagrid asp.net 中存在的标签的值？

> ID：12939006
> 
> 赞同：0
> 
> 时间：2012-10-17T16:32:07.120
> 
> 标签：c#, jquery, asp.net, datagrid

```
 <asp:DataGrid ID="datagrid1" runat="server" AutoGenerateColumns="False" Width="100%"
                    DataKeyField="Expr1" OnItemCommand="datagrid1_ItemCommand" EmptyDataText="No Records Found" 
                    >
                    <HeaderStyle BackColor="#2E882E" Font-Bold="True" ForeColor="#FFFFCC" HorizontalAlign="Left" />
                    <Columns>
                        <asp:TemplateColumn HeaderText="">
                            <ItemTemplate>
                                <table>
                                    <tr>
                                         <td class="style1">
<asp:Label ID="lblStatus" runat="server" Text='<%# Eval("Status") %>'></asp:Label>
                                        </td>
  </tr>
                                </table>
                            </ItemTemplate>
                        </asp:TemplateColumn>
                    </Columns>
                </asp:DataGrid> 
```

如何使用`jquery`请帮助访问此状态标签值

```
 var DataGrid1 = $("<%=datagrid1.ClientID %>");
var status = $(DataGrid1).children("lblStatus").get(0).innerHTML; 
```

上面的代码会起作用吗？

编辑：按照建议尝试使用此代码

```
 $(document).ready(function () {
        $('.vini').click(function () {
            //var status = $("#<%=ddlstatus.ClientID%>").val();
            var DataGrid1 = $("#<%=datagrid1.ClientID %>");
              var status =$(DataGrid1).find("txtStatDesc").html();

            if (status == 'Sent') {
                var _Action = confirm('Do you really want to cancel this payment ? All pending money will be available in the retention account of the contractor ');
                if (_Action) {
                    $.blockUI({ css: {
                        border: 'none',
                        padding: '15px',
                        backgroundColor: '#000',
                        '-webkit-border-radius': '10px',
                        '-moz-border-radius': '10px',
                        opacity: .5,
                        color: '#fff'
                    }
                    });
                    return true;
                }
                else {
                    return false;
                }

            }

        });
    }); 
```

**我无法获取状态，但**

![在此处输入图像描述](../Images/1e6a8bb64eb3aa92946f85bf348e6a88.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:58:03.230

不起作用。因为`label`不是`datagrid1`. 你可以这样使用

```
 var DataGrid1 = $("<%=datagrid1.ClientID %>");
 $("#"+DataGrid1).find("label").html(); 
```

请参考jquery中的children api：

[http://api.jquery.com/children/](http://api.jquery.com/children/)

# visual-studio - 一个解决方案下的许多网站

> ID：12939007
> 
> 赞同：0
> 
> 时间：2012-10-17T16:32:26.737
> 
> 标签：visual-studio, visual-studio-2008

出于文档目的，我在一个解决方案下有许多网站。我建立这些小型网站是为了对我学到的新概念进行原型设计。

问题是每当我尝试调试其中一个独立网站时，Visual Studio 都会为解决方案下的所有网站启动 Cassini。

我知道我可以创建一个新的解决方案并根据需要引入项目，但我只是想知道是否有另一种方法可以查看我的所有网站并随时调试其中的任何人，而无需为所有网站启动 Cassini？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:34:38.457

在 Visual Studio 中，右键单击`Solution`（不是项目），然后转到`Properties`. `Configuration Properties`从左侧的窗口中选择并取消选中您要忽略的项目的`Build`和/或属性。`Deploy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:01:52.713

我最终只是为它们制作了单独的解决方案，只是组织了我的目录并使目录名称更具描述性。

# python - Python中的可定制装饰器

> ID：12939012
> 
> 赞同：2
> 
> 时间：2012-10-17T16:32:35.187
> 
> 标签：python, decorator

我想提供一个装饰器，允许在应用于函数时进行可选配置。

一个简单的实现如下：

```
import functools

class Deco(object):
    config = {'message': 'hello'}

    def __init__(self, func):
         self.func = func
         functools.wraps(func)(self)

    def __call__(self, *args, **kwargs):
         print self.config['message']
         return self.func(*args, **kwargs)

    @classmethod
    def customize(cls, **kwargs):
         """Return a customized instance of this class. """
         return type(cls.__name__, (Deco, ), {'config': kwargs})

@Deco
def add(a, b): 
    return a + b 

@Deco.customize(message='bye')
def sub(a, b): 
    return a - b 

>>> add(1, 2)
'hello'
>>> sub(2, 1)
'bye' 
```

我想用它为 Django 视图提供用户友好的装饰器。

这种方法没有错误，但是允许一个类有一个静态工厂方法来实例化它自己的自定义实例，作为装饰器有什么不好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:15:03.750

每次使用装饰器时，您都可以在不创建额外子类的情况下工作，但是您的代码很好。没有额外子类的方式可能是这样的：

```
class Deco(object):
    config = {'message': 'hello'}

    def __init__(self, func=None, **kwargs):
         if kwargs:
             self.config = kwargs
         if func is not None:
             self._decorate(func)

    def _decorate(self, func):
        self.func = func
        functools.wraps(func)(self)

    def __call__(self, *args, **kwargs):
        if not hasattr(self, "func"):
            self._decorate(func)
            return self
        print self.config['message']
        return self.func(*args, **kwargs) 
```

So, while performance wise there would be no difference to your code (unless you would be decorating at least hundreds of thousands of functions - your code create an extra object - a class - for each time the decorator is used, besides the instance of that class) - there is an impact on people would review your code (either to use your modules, or to maintain it after you are done). I mean "a decorator that dynamically generates subclasses of itself" may sound too advanced and scare people away. Although it is as simple as my suggestion above once one understands the mechanisms of class generation in Python as you had.

# sql - SQLXMLBulkLoad：COMExecption 被捕获，连接到数据源时出错

> ID：12939014
> 
> 赞同：0
> 
> 时间：2012-10-17T16:32:38.867
> 
> 标签：sql, xml, vb.net, bulk-load

尝试执行 SQLXMLBulkLoad 时遇到此错误。这是对象的配置：

```
Public Shared objbl As New SQLXMLBULKLOADLib.SQLXMLBulkLoad4
objbl.ConnectionString = ReadVariables("Data Source=localhost;Initial Catalog=db1;Integrated Security=True")
objbl.ErrorLogFile = workingdirectory & "\error.log"
objbl.TempFilePath = workingdirectory
objbl.CheckConstraints = True
objbl.KeepIdentity = False
objbl.Transaction = True
objbl.FireTriggers = True
objbl.Execute(workingdirectory & "\xsdtempfile.xsd", fname) 
```

源和目标都在 locahost 上。

我看不到我的连接字符串有什么问题。

错误发生在这一行：

```
objbl.Execute(workingdirectory & "\xsdtempfile.xsd", fname) 
```

谁能帮我一把？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-19T15:07:20.340

```
objbl.ConnectionString = "Provider=sqloledb;server=localhost;database=db1;integrated security=SSPI" 
```

或试试这个

```
objbl.ConnectionString = "Provider=sqloledb;server=localhost;database=db1;user id=User;password=Password;persist security info=True;Connect Timeout=30" 
```

# opencv - 使用 cmake 编译并使用 macport 安装依赖项

> ID：12939015
> 
> 赞同：7
> 
> 时间：2012-10-17T16:32:41.693
> 
> 标签：opencv, compilation, cmake

我正在尝试构建依赖于 OpenCV 的项目。我使用 macports 安装了 Opencv，当我尝试构建项目时，cmake 给出以下输出：

```
CMake Error at CMakeLists.txt:47 (FIND_PACKAGE):
  By not providing "FindOpenCV.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "OpenCV", but
  CMake did not find one.

  Could not find a package configuration file provided by "OpenCV" with any
  of the following names:

    OpenCVConfig.cmake
    opencv-config.cmake

  Add the installation prefix of "OpenCV" to CMAKE_PREFIX_PATH or set
  "OpenCV_DIR" to a directory containing one of the above files.  If "OpenCV"
  provides a separate development package or SDK, be sure it has been
  installed. 
```

我对这个问题进行了一些搜索并添加了以下环境。`$HOME/.profile`我的文件的变量

```
export DYLD_LIBRARY_PATH=/opt/local/lib:$DYLD_LIBRARY_PATH
export CMAKE_PREFIX_PATH=/opt/local 
```

没有成功。我检查了一下，所有 opencv 文件都安装在 /opt/local/lib 和 /opt/local/include/opencv 目录中。`OpenCVConfig.cmake`在以下路径中也有 ：

`/opt/local/lib/cmake/OpenCVConfig.cmake`

如何让cmake知道opencv的安装路径？以前我使用 cmake 自己构建 OpenCV 并安装到 /usr/local 中，然后它工作正常，没有任何其他修复。但是我在使用 ffmpeg 时遇到了一些问题，现在我改用 macports。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T19:03:56.653

另一个对我有用的选项是在 cmake opencv 目录中设置 env 值 OpenCV_DIR：

```
export OpenCV_DIR=/opt/local/lib/cmake/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:24:17.897

**macports**传统上安装 OpenCV`/opt/local/`而不是标准的`/usr/local/`.

您的问题的解决方案在以下位置说明：

> 将“OpenCV”的安装前缀添加到 CMAKE_PREFIX_PATH 或将“OpenCV_DIR”设置为包含上述文件之一的目录。

在命令行中构建项目时，请确保执行：

```
export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/opt/local/lib/pkgconfig
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/local/lib 
```

`CMAKE_PREFIX_PATH`然后为 cmake设置标志：

```
cmake -D CMAKE_PREFIX_PATH=/opt/local ../ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T01:56:46.207

不是 MACPORT 问题，但有人可能会觉得这很有帮助。[在这个问题](https://stackoverflow.com/questions/8711109/could-not-find-module-findopencv-cmake-error-in-configuration-process/22239942#22239942)中遵循@hugh-pearse 和@leszek-hanusz 的答案，稍作调整。我已经***从 ubuntu 12.10 存储库 (libopencv-* )***安装了 opencv，并且遇到了同样的问题。无法解决它`export OpenCV_DIR=/usr/share/OpenCV/`（因为我的 OpenCVConfig.cmake 在那里）。当我更改 OpenCVConfig.cmake 文件中的一些行时，它得到了解决：

```
# ======================================================
# Include directories to add to the user project:
# ======================================================

# Provide the include directories to the caller

#SET(OpenCV_INCLUDE_DIRS "${OpenCV_INSTALL_PATH}/include/opencv;${OpenCV_INSTALL_PATH}/include")

SET(OpenCV_INCLUDE_DIRS "/usr/include/opencv;/usr/include/opencv2")
INCLUDE_DIRECTORIES(${OpenCV_INCLUDE_DIRS})

# ======================================================
# Link directories to add to the user project:
# ======================================================

# Provide the libs directory anyway, it may be needed in some cases.

#SET(OpenCV_LIB_DIR "${OpenCV_INSTALL_PATH}/lib")

SET(OpenCV_LIB_DIR "/usr/lib")

LINK_DIRECTORIES(${OpenCV_LIB_DIR}) 
```

这适用于我的 Ubuntu 12.10。请记住`target_link_libraries(yourprojectname ${OpenCV_LIBS})`在您的 CMakeLists.txt 中添加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-05T14:30:55.260

确保你已经编译了 OpenCV，一旦你编译，OpenCVConfig.cmake 将在 build 目录中生成。

按照[以下](https://docs.opencv.org/3.4/d7/d9f/tutorial_linux_install.html)步骤编译

然后 ，`export OpenCV_DIR=<path to build directory with OpenCVConfig.cmake>`

它现在应该可以工作了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-04T21:46:37.897

我终于阅读了 OpenCVConfig.cmake 文件的标题。它指示包含这些行以从外部项目中使用：

```
find_package(OpenCV REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})
target_link_libraries(MY_TARGET_NAME ${OpenCV_LIBS}) 
```

（将 include_directories 添加到 CMakeLists.txt 为我修复了它）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-17T03:20:51.123

由于我在多用户服务器中编译了我自己的 OpenCV，所以我不能直接在 /usr/local 中安装 OpenCV 库，而是在我的主文件夹中，然后我会遇到完全相同的问题。

以下是我修复它的方法：

1.  流程化 OpenCV 官方文档中的步骤[：Using OpenCV with gcc and CMake](http://docs.opencv.org/2.4.13.2/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html#linux-gcc-usage)

2.  添加 displayImage 测试程序，并使用这个 CMake 文件

`cmake_minimum_required(VERSION 2.8) project( DisplayImage ) find_package( OpenCV) add_executable( DisplayImage DisplayImage.cpp ) target_link_libraries( DisplayImage ${OpenCV_LIBS} )`

3.  发生了同样的错误，所以在我的 .tcshrc 中添加一个环境变量

`setenv OpenCV_DIR "${folder where contains OpenCVConfig.cmake }" \# mine is: setenv OpenCV_DIR "~/local/OpenCV2.4.13/share/OpenCV"`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-12T21:27:24.297

我徒劳地尝试了上述所有想法。我最终找到了一种编译工作的方法：除了使用@kengregson 步骤之外，我只是重命名了文件夹 /usr/local/include/opencv2 以便在编译我的 cpp 文件时不选择它。

# fitnesse - 无法在 Fitnesse 设置页面中设置环境属性

> ID：12939024
> 
> 赞同：3
> 
> 时间：2012-10-17T16:33:03.723
> 
> 标签：fitnesse

我一直在尝试通过健身套件设置页面为数据库连接参数设置环境变量属性。我已经通过在单个测试页面上设置环境变量来测试这一点，当我这样做时，它确实在我的夹具 API 中得到解决。但是当我将它从测试页面中删除并将其包含在健身设置页面中时，由于某种原因无法在我的夹具 API 中解决它。这是我添加环境属性时包含的 COMMAND_PATTERN 字符串： !define COMMAND_PATTERN {java -cp %p -Ddbadapter.config=classpath:/properties/fiAdapter-config.properties %m}

所以这个字符串在测试页面上定义时被正确解析，但我将它移到设置测试页面（我知道它成功地将其他页面级别的参数传递给测试），它在我的夹具 API 中无法解析。

我还尝试在 Fitnesse 服务器启动时指定此属性： java -jar -Dadapter.config=classpath:/properties/fiAdapter-config.properties Fitnesse.jar -p 6538

这对我也不起作用。我可以让它工作的唯一方法是在每个测试页面上指定参数，这违背了为此使用属性文件的目的。

任何有关导致此问题的想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:50:34.940

变量是通过查看直系血统来设置的，而不是通过兄弟姐妹甚至设置页面。我通常在运行 FitNesse 之前的环境中定义它们，或者通过 FrontPage 或包含需要它的测试的 Suite 页面来定义它们。

据我所知，SetUp 作为页面的一部分进行处理。而且我可以理解您为什么选择它，但我认为它不像直接祖先页面那样是定义变量的可靠位置。

此外，如果您使用的是 COMMAND_PATTERN 变量，我很确定您必须在更改 COMMAND_PATTERN 之前定义要发送给它的变量。并且命令模式不能在单个套件执行中多次更改。

# ssh - Rsync over SSH - ssh 或 rsync 超时？

> ID：12939027
> 
> 赞同：17
> 
> 时间：2012-10-17T16:33:16.360
> 
> 标签：ssh, timeout, rsync

我正在处理一个糟糕的 ISP，它会在我的脚本运行时随机重置我的 WAN 连接。我希望转移能够在这次重置中幸存下来并继续。我手动启动此脚本与当前使用 cron / launchd。

我有一个相当基本的脚本，如下所示：

```
rsync -rltv --progress --partial -e "ssh -i <key> -o ConnectTimeout=300" <remotedir> <localdir> 
```

我最好将超时放在 rsync 部分吗？

例如：

```
rsync -rltv --progress--partial --timeout=300 -e "ssh -i <key>" <remotedir> <localdir> 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T17:05:08.017

`ConnectTimeout`仅适用于 SSH 尝试与服务器建立连接时，它与数据传输期间的超时无关。所以你需要使用该`--timeout`选项来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T14:29:26.837

尝试重新运行 rsync。也尝试不使用 ssh 选项。作业失败可能是由于失去了网络连接。我有一个 rsync 作业，通过 cron 每 2 小时在数据中心之间复制文件，它每天大约会失败一次。

# c++ - Boost Serialize 向后兼容性问题

> ID：12939028
> 
> 赞同：1
> 
> 时间：2012-10-17T16:33:16.730
> 
> 标签：c++, serialization, boost, backwards-compatibility, forward-compatibility

在 Boost v1.47 中保存的数据`boost::archive::text_oarchive`无法在 Boost v1.37 中加载`boost::archive::text_iarchive`。它使用 meddage 引发异常`"unknown version"`。

[这里](https://stackoverflow.com/questions/6015339/boost-serialization-archive-unsupported-version-exception)为二进制存档的类似问题提供了一种解决方法，但它似乎不适用于文本存档。

我可以在 Boost v1.37 上进行修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:32:54.967

您所关注的不是向后兼容性，而是向前兼容性。

Boost.Serialization 不支持开箱即用的前向兼容性，AFAIK。您可能在使用 xml 存档方面取得了成功，但仍需要您做一些工作。看到[这个线程](http://comments.gmane.org/gmane.comp.lib.boost.user/48183)

# javascript - jQuery switchStyle 不需要的行为

> ID：12939031
> 
> 赞同：0
> 
> 时间：2012-10-17T16:33:31.673
> 
> 标签：javascript, jquery, jquery-ui

为什么当我执行

```
function przygotuj_Highlighter() {
    $(".ELEMENT_LISTY").mouseenter(function() { 
        $(this).stop(true,true).switchClass("", "HIGHLIGHT", 400, "easeInOutQuad");
    });
    $(".ELEMENT_LISTY").mouseleave(function() { 
        $(this).stop(true,true).switchClass("HIGHLIGHT", "", 400, "easeInOutQuad");
    });
} 
```

萤火虫 说：

*   页面加载时`<div class="ELEMENT_LISTY DODAJ"></div>`
*   函数触发时`<div class="ELEMENT_LISTY DODAJ HIGHLIGHT"></div>`
*   当 mouseleave 被触发`<div class="ELEMENT_LISTY DODAJ" style></div>`时（当从 Firebug 复制和粘贴时，它看起来像`<div class="ELEMENT_LISTY DODAJ" style=""></div>`但 Firebug 本身显示它`style`没有`=""`

为什么要添加这种“风格”？我不想在我的代码中出现垃圾！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:49:20.437

`switchClass`实际上是 jQuery UI 的一部分，而不是基础 jQuery。

在进行过渡时，它会动态修改样式，完成后需要将其恢复。和没有 style 属性之间没有区别`style`，`style=""`因此不需要检测这种特殊情况。

它不会更改您的代码，它只是更新 DOM。

# javascript - 使用 jquery 跨域 ajax POST ie7

> ID：12939038
> 
> 赞同：0
> 
> 时间：2012-10-17T16:33:51.803
> 
> 标签：javascript, jquery, ajax, internet-explorer-7, xdomainrequest

这个脚本有问题，我设法让它在 ie8 中工作，在 chrome 上工作得很好。

```
initilize: function(){
 $('#my_form').submit(function(){
  if ($.browser.msie && window.XDomainRequest) {     
   var data = $('#my_form').serialize();
   xdr=new XDomainRequest();
   function after_xhr_load()
   {
    response = $.parseJSON(xdr.responseText);
    if(response.number =="incorrect format"){
     $('#errors').html('error');
    }
    else
    {
     $('#errors').html('worked');
    }
   }
   xdr.onload = after_xhr_load;
   xdr.open("POST",$('#my_form').attr('action')+".json");
   xdr.send(data);

  } else {
   $.ajax({
    type: "POST",
    url: $('#my_form').attr('action')+".json",
    data: $('#my_form').serialize(),
    dataType: "json",
    complete: function(data) {
     if(data.statusText =="OK"){
      $('#errors').html('error');
     }
     if(data.statusText =="Created"){
      response = $.parseJSON(data.responseText);
      $('#errors').html('Here is your code:' +response.code);
     }
    }
  });
 }
 return false;
});
} 
```

我知道 ie7 没有 XDomainRequest() 对象。我如何在 ie7 中复制它。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:58:10.813

您不会让该代码在 IE7 中工作，因为旧浏览器不支持跨域调用。您要么需要更改后端以执行 JSONP 调用，要么需要使用服务器端代理。

# c++ - 强制 Clang 与 C++ 运行时链接

> ID：12939046
> 
> 赞同：8
> 
> 时间：2012-10-17T16:34:28.870
> 
> 标签：c++, c, macos, linker, clang

我有一个包含 C 和 C++ 源混合的项目。它目前在 OS X 上使用 GCC 构建。该项目有定制的构建脚本，它们调用`gcc`命令来编译 C 和 C++ 源代码，并分别调用链接器。

我现在正试图用 Clang 构建它。

调用`clang`确实可以正确编译源文件；它区分源文件`.c`和`.cpp`源文件，并在每种情况下编译为适当的语言。不过，我在链接时遇到问题。当链接器被调用为`clang`时，C++ 运行时库没有被链接进来，由于缺少符号而导致构建错误。

当我设置`clang++`为构建工具时，我可以成功链接，但这会导致编译时错误和警告；它真的不喜欢用 C++ 编译器编译 C 源代码。

```
clang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated
...
/usr/include/stdio.h:250:49: error: redefinition of parameter 'restrict' 
```

**我必须为构建脚本指定一个工具以用作编译器/链接器**，所以我需要做一个简单的替换来`clang`代替`gcc`. 有什么办法可以说服`clang`（不是`clang++`）与 C++ 运行时库链接吗？

诸如`-stdlib=libc++`不起作用之类的选项。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T16:43:34.347

您应该能够使用普通的链接器标志，就像您对 gcc 所做的一样：`clang -lc++`或者`clang -lstdc++`取决于您想要的实现。（你应该想要 libc++）

# ios5 - MPEG2TS 容器中的 H.264 视频

> ID：12939049
> 
> 赞同：2
> 
> 时间：2012-10-17T16:34:38.370
> 
> 标签：ios5, h.264, mpeg2-ts

我有一个硬件编解码器，它以 H.264（基线配置文件，级别 3）编码视频，我将其打包到 MPEG2 传输流中，以便将其流式传输到 iDevices（HTTP 实时流）。

我遇到的问题是视频只能在较新的 iDevices（iPhone 4S/iPhone 5、iPad 2/3）上播放，而不是在较旧的 iPhone 或 iPad 1 上播放（屏幕上有活动，但没有任何东西接近实际视频）。

此外，当它工作时，视频以帧速率的 1/2 播放（30 fps 播放为 15 fps）。

Mac Mini 或 Macbook Pro 上的 Safari 没有任何问题。VLC & mplayer 对 TS 文件也没有任何问题。

当我将相同的视频打包到 MP4 容器中时，所有设备都可以正常播放视频。

1.  有关如何调试此问题的任何建议？

2.  有什么方法可以从 iPhone 或 iPad 获取调试信息来帮助我弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:39:07.317

降低你的水平？旧设备是否支持第 3 级？如果没有，请转到 1.2 级并检查

# build - app.config 中的 TFS 构建和绝对路径

> ID：12939052
> 
> 赞同：1
> 
> 时间：2012-10-17T16:34:51.567
> 
> 标签：build, tfs, path, tfsbuild

首先，我想为我的英语道歉，这不是我的第一语言！在 TFS Build (2010) 的精彩世界中，我完全是 n00b，但我遇到了问题。我将尝试使用一个简单的示例向您解释（但我的实际情况要复杂得多）。

我有一个带有控制台应用程序“MyApp1”的项目，它在我的计算机上的位置是“D:\MyProjets\MyApp1”。我有另一个项目“Res”，它只包含资源，包括一个名为 emailTemplate.html 的文件。

我的项目“MyApp1”使用这个文件。因此，在“App.config”文件中有一个存储该资源路径的键：“D:\MyProjets\Res\emailTemplate.html”

最后，我对该应用程序“MyApp1”进行了测试。此测试检查是否已发送电子邮件。发送电子邮件“MyApp1”需要文件“emailTemplate.html”，并使用配置文件中的密钥来找到它。

当我在我的电脑上运行测试时：一切正常。

但是，如果我使用 TFS Build 构建解决方案，则在运行测试时我会遇到此资源的问题。在构建过程中，源文件被复制到一个目录中（例如“D:\Build\1\My build projet\Sources\MyProjets\Res”，因此“MyApp1”将在“D”中查找“emailTemplate.html” :\MyProjets\Res\emailTemplate.html" （配置文件）当然找不到它。

我应该怎么做 ？

我已经知道我的项目不应该以这种方式使用资源，但我们现在几乎不可能改变它，因为这是我们在公司工作了很长时间的方式......

我考虑过修改 BuildProcessTemplate 以强制构建服务器在我想要的 Res 项目上运行 getLatest。但我不知道这是否是个好主意，或者是否有可能......

非常感谢你的帮助 ！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:31:40.963

编辑您的构建定义以在工作区中包含“Res”项目目录。它应该在每次构建时自动下载/更新（如果您使用任何默认流程模板），并且只要您在测试中使用相对路径就可以了。

# ruby-on-rails - 通过 Rails 中的两个关联构建对象

> ID：12939056
> 
> 赞同：0
> 
> 时间：2012-10-17T16:34:58.257
> 
> 标签：ruby-on-rails, ruby, associations

是否可以通过两个`has_many`关联来构建一个对象？例如：

```
# posts_controller.rb
def create
  @post = current_account.posts.build(params[:post])
  @post.author = current_user # I want to compact this line into the previous one
end 
```

我做了一些研究，发现了这一点：

```
@article = current_account.posts.build(params[:post], user_id: current_user.id) 
```

然而，这并没有奏效。`user_id: nil`在控制台中，每当我构建一个新对象时，我都会不断得到。

我无法实施的另一个潜在解决方案：

```
@post = current_account.post_with_user(current_user).build(params[:post]) 
```

但是我写的每个实现都`post_with_user`失败了。

我的联想如下：

```
class Discussion < ActiveRecord::Base
  belongs_to :account
  belongs_to :author, class_name: 'User', foreign_key: 'user_id', inverse_of: :discussions
end

class User < ActiveRecord::Base
  belongs_to :account
  has_many :discussions, inverse_of: :author
end

class Account < ActiveRecord::Base
  has_many :users, inverse_of: :account
  has_many :discussions
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:52:46.813

该`params`变量只是一个散列，因此这些行中的某些内容应该可以为您提供一个单行：

```
@post = current_account.posts.build params[:post].merge({ :user_id => current_user.id }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:49:42.690

您的代码显示您尝试做的事情，您应该能够做到。它应该看起来像这样：

```
@article = current_account.posts.build(params[:post]) 
```

因为您正在构建当前帐户的帖子列表，所以您不必传递当前帐户的 ID。（我不确定您的 current_user 是否与您的 current_account 相同，您不妨澄清一下）。

要将您的帖子创建压缩成一行，您可以执行以下两项操作之一。

1.  将用户/作者与帖子之间的关系转变为双向关系。查看文档[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)订单属于_to a customer, and a customer has_many orders。您可以自定义关系的名称，以便帖子具有“作者”而不是用户，方法是将其称为“作者”，但随后使用我假设将采用值的 class_name 参数：用户。

2.  在 Post 类中添加一个 after-create 钩子，并将作者值设置为与当前用户相同。在不了解您的用户子系统的情况下，我无法填写更多详细信息。

# perl - Perl 遍历文件夹列表

> ID：12939061
> 
> 赞同：2
> 
> 时间：2012-10-17T16:35:09.877
> 
> 标签：perl

我有一个名为 Logs 的文件夹，其中包含多个文件夹 Run 1、Run 1 (1)、Run 2 (2) 等。每个文件夹都包含一个我需要解析的 plist 文件。但我无法打开文件。我正在运行以下代码：

```
my $count = 0;
my $path  = "Logs/";

for my $file (glob("${path}*/*Results.plist")) {

    # initialize parser object and find insances of Fail
    my $xp      = XML::XPath->new(filename=>$file);
    my @nodeset = $xp->find('/dict/array/dict/string[1]');

    foreach my $element (@nodeset){

        if ($element->string_value == "Fail") {

            $count++;
        }
    }
}

print $count; 
```

编辑：现在我需要在“字符串”子节点中查找“失败”。plist 文件有 4 个失败，但我当前的代码只返回 2 个。有什么想法吗？

plist 文件的结构与此类似：

```
<plist version="1.0">
<dict>
<key>All Samples</key>
<array>
<dict>
    <key>LogType</key>
    <string>Fail</string>
    <key>Message</key>
    <string>Text</string>
    <key>Timestamp</key>
    <date>2012-10-17T08:01:51Z</date>
    <key>Type</key>
    <integer>4</integer>
</dict>
<dict>
    <key>LogType</key>
    <string>Fail</string>
    <key>Message</key>
    <string>An error occurred while trying to run the script.</string>
    <key>Timestamp</key>
    <date>2012-10-17T08:20:46Z</date>
    <key>Type</key>
    <integer>7</integer>
</dict>
<dict>
    <key>LogType</key>
    <string>Pass</string>
    <key>Message</key>
    <string></string>
    <key>Timestamp</key>
    <date>2012-10-17T08:01:51Z</date>
    <key>Type</key>
    <integer>5</integer>
</dict>
</array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:38:22.263

试试这个 ：

```
use strict; use warnings;
use XML::XPath;

my $path="Logs/";
my $count = 0;

for my $file (glob("${path}*/*Results.plist")){
    my $xp = XML::XPath->new(filename => $file);
    my $nodeset = $xp->find('/plist/dict/array/dict/string[1]/text()');

    foreach my $node ($nodeset->get_nodelist) {
        $count++ if XML::XPath::XMLParser::as_string($node) eq "Fail";
    }
}

print $count; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:52:35.277

您的代码有几个问题：

1.  find() 方法返回 XML::XPath::NodeSet 对象，而不是数组
2.  您的 XPath 表达式不正确，它在
3.  求你应该使用'eq'，而不是'=='来比较元素的字符串值和“失败”字符串

以下是它的外观：

```
my $nodeset = $xp->find('/plist/dict/array/dict/string[1]');
foreach my $element ($nodeset->get_nodelist) {
    if ($element->string_value eq "Fail") {
        $count++;
    }
} 
```

PS：另外，我建议使用“使用警告；使用严格；” 在你的代码中。

# regex - 用于 codeigniter 的正则表达式子组匹配

> ID：12939062
> 
> 赞同：1
> 
> 时间：2012-10-17T16:35:15.197
> 
> 标签：regex, codeigniter-2

我正在使用代码点火器，并试图通过 $routes 数组捕获多个 url 段。

例如，我的网址将如下所示：

```
/segment-1/segment-2/keyword/ 
```

我一直在尝试使用这个正则表达式：

```
$route['([\w-?]+){1,3}'] = "my/method"; 
```

但这仅返回此子组匹配：

```
segment-1 
```

然后当我尝试这条路线时：

```
(\/[\w-?]+){1,3} 
```

它将此作为子组匹配返回：

```
/keyword 
```

所以我一直明确提出我想确保捕获所有实例的确切路线：

```
$route['([\w-?]+)'] = 'my/method/$1';
$route['([\w-?]+)/([\w-?]+)'] = 'my/method/$1/$2';
$route['([\w-?]+)/([\w-?]+)/([\w-?]+)'] = 'my/method/$1/$2/$3'; 
```

这显然是相当冗长的。最终，我想在一个正则表达式中捕获所有段。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:45:15.363

在一个正则表达式中通常不可能有任意多个捕获组。从您自己的尝试中可以看出，如果您重复一个捕获组，您将获得最后一个匹配项。但是，您可以通过使额外的“目录”可选来解决一定数量的路径元素。说 3 是你的最大值：

```
$route['([\w-?]+)(/[\w-?]+(/[\w-?]+)?)?'] = 'my/method/$1$2$3'; 
```

您可以在末尾添加更多嵌套`(/[\w-?]+)?`以允许更深的路径。否则，您可以`$route`使用循环自动填充数组，但这也只能在固定深度内起作用。

# javascript - 我在javascript中更改了img图片src，但是img不刷新，如何刷新呢？

> ID：12939063
> 
> 赞同：1
> 
> 时间：2012-10-17T16:35:14.293
> 
> 标签：javascript, jquery, refresh, image

我将 javascript 中的 img src 更改为：

```
http://loclhost:8080/mvc/resources/pics/625bd317-b71c-4d74-aff2-248b86ff900b.jpg 
```

到

```
http://loclhost:8080/mvc/resources/pics/4c1541ab-204c-4eff-b641-8527294e02cd.jpg 
```

我的代码是：

```
 function selectdef(pic){
     var picid=pic.split('.')[0];
       $.ajax({    
            type:'post',        
            url:'defaultset/<c:out value="${pbid}"/>/'+picid,    
            data: {picid   : pic},    
            cache:false,    

            success:function(data){
                            //when ajax require success I will change the picture src
                $(".products li img").src='<c:out value="${path}/"/>'+pic;

            },
            error: function(e){
               alert(e.massage());
               }   
        });

     } 
```

我的更改 src 行是：

```
 $(".products li img").src='<c:out value="${path}/"/>'+pic; 
```

但图片直到没有改变

但是img不刷新，只有我重新加载页面才能刷新？为什么？我认为与img不同的src应该刷新？

怎么刷新呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:02:03.580

由于您使用 jQuery 来更改图像的`src`属性，因此您可以通过以下`attr`方法执行此操作：

```
$(".products li img").attr('src', '<c:out value="${path}/"/>' + pic); 
```

如果要使用 native`src`属性，则需要先访问 DOM 元素，然后再使用该`src`属性：

```
$(".products li img")[0].src = '<c:out value="${path}/"/>' + pic; 
```

我的建议是使用 jQuery`attr`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:02:28.573

那是我的错：我以错误的方式使用 jquery：

```
$(".products li img").src='<c:out value="${path}/"/>'+pic; 
```

正确的用法应该是：

```
$('.productdefault li img').prop("src", '<c:out value="${path}/"/>'+pic); 
```

jDom 不能只是简单地使用 DOM 人员。

# c# - 从控制器 C# 将 Css 类添加到 div

> ID：12939065
> 
> 赞同：1
> 
> 时间：2012-10-17T16:35:41.360
> 
> 标签：c#, asp.net-mvc-3, razor

从控制器向 div 添加/删除 css 类的最佳方法是什么？

我在剃刀视图中有一个 div 像这样（简化）

```
<div id="divToToggle" class="hidden">
     //content
</div> 
```

在我的控制器中，根据是否有内容，我想添加或查看该 class="hidden"。

```
if (model.name.HasAValue())
{
    model.company = Method();
    //Toggle div to visible here.
} 
```

我考虑过在模型中创建一个新属性并设置该值，然后在 razor 视图中执行类似 class="@Model.CssName" 但是，我有许多选项卡要处理并且不想使模型混乱与另一组 css 属性。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:55:59.360

鉴于您可以这样做：

```
<div id="divToToggle" class=@(model.name.HasAValue()?"hidden":"visible")> 
 //content 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-27T18:45:38.790

你也可以添加类，如果你有类数组并且你想在 foreach 循环中追加

```
<div class="panel @arrayClass[count1] panel-stat">
</div> 
```

如果您有从模型返回的课程

```
<div class="panel @model.class panel-stat">
<div> 
```

或者您也可以根据您的要求使用 if 条件或三元运算符，您可以做您想做的事情。

# ios - Air for iOS webview - 在 SSL 错误时关闭 webview

> ID：12939072
> 
> 赞同：2
> 
> 时间：2012-10-17T16:36:06.710
> 
> 标签：ios, ssl, air, error-handling

在 iOS 版 Air 的 StageWebView 中，如果出现 SSL 证书错误，默认会提示用户：

> “无法验证与此站点的安全连接。您还想继续吗？
> 
> 您正在查看的证书与您尝试查看的站点的名称不匹配。”

发生这种情况时，有没有办法阻止消息发生并隐藏 webview？

我添加了错误处理代码：

```
function webview_error(event:ErrorEvent) {  
    trace(event);
    webView.stage = null;
    isConnected = false;
} 
```

但它只有在用户点击“否”时才会触发，我不希望他们有这个选项来避免中间人攻击。

谢谢。

# java - .forward() 然后 resp.sendRedirect() 与 servlet

> ID：12939074
> 
> 赞同：0
> 
> 时间：2012-10-17T16:36:09.460
> 
> 标签：java, jakarta-ee, gwt, servlets

我正在使用 servlet 来制作基于 Java 的网站。我将计算数据发送到服务器，然后该服务器进行计算并将结果存储在数据库中。

我想要的是显示一个加载页面，所以我应该得到 1/表单提交 2/加载页面 3/结果页面

为此，我的提交表单将我发送到显示加载页面的 servlet 上，然后检查数据库是否存在数据，如果存在则将我重定向到结果页面。

这是我的加载服务

```
public class AffichageChargementServlet  extends HttpServlet{

    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        //recuperation de la clé de l'entité qui contiadra les resultats
        String key = req.getParameter("key");
        //affichage de la page de chargement
        try {
            getServletContext().getRequestDispatcher("/loading.html").forward(req, resp);
        } catch (ServletException e) {
            System.out.println("problemme dans la servlet AffichageChargementServlet lors du chargement de /loading.html");
            e.printStackTrace();
        }
        //verification de la disponibilité de l'entité
        Key resultatKey = KeyFactory.createKey("Resultat", key);
        DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
        Entity result = null;
        while(true){
            try {
                result = datastore.get(resultatKey);
            } catch (EntityNotFoundException e) {
                System.out.println("pas encore prete");
                //ne rien faire, la data n'est pas encore disponible
            }
            if(result != null){
                System.out.println("redirection vers /affichageResults?key="+key);
                resp.sendRedirect("/affichageResults?key="+key);
            }
        }
    }

} 
```

正如我刚刚了解到的，不可能在 servlet 中进行多次重定向，所以我得到一个 java.lang.IllegalStateException: Response already committed

有解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:39:20.517

`Response already committed` means you have already write something on response and you are trying to forward or redirect.

You should use either of Forward or Redirect on the response not both, your code does both. You need to decide first whether you want to forward or redirect and then commit the response based on your decision

# php - 在php中将latin1字符串转换为utf8

> ID：12939075
> 
> 赞同：4
> 
> 时间：2012-10-17T16:36:14.157
> 
> 标签：php

我有这个连接到我的 MySQL BD 的 php 文件，BD 调用是 latin1_swedish_ci

这是我的 php 代码：

```
<?php

$con = mysql_connect("localhost","root","");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("ttbfb", $con);

$result = mysql_query("SELECT * FROM news");

while($row = mysql_fetch_array($result)) {

    echo $row['name'];

}

mysql_close($con);
?> 
```

在得到回声之前，如何将 $row['name'] 字符串转换为 utf8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:43:36.270

[在将 utf8 字符转换为 iso-88591 并返回 PHP](https://stackoverflow.com/a/374463/120080)中提供了用于转换编码的选项

*   [`iconv()`](http://php.net/function.iconv)
*   [`mb_convert_encoding()`](http://php.net/function.mb-convert-encoding)
*   [`utf8_encode()`](http://php.net/function.utf8-encode)和[`utf8_decode()`](http://php.net/function.utf8-decode)

# c++ - beginthread 中的堆栈大小参数

> ID：12939077
> 
> 赞同：0
> 
> 时间：2012-10-17T16:36:41.297
> 
> 标签：c++, windows, multithreading, winapi, beginthread

我以为我知道 beginthread 中的堆栈大小参数是什么意思。所以我的问题是：为什么这行得通？

```
#include <iostream>
#include <process.h>

using namespace std;

void huge_stack(int a, int b, int c, int d)
{
    int i[100000] = {0};
    cout << a << b << c << d << i[12333] << endl;
}

bool done = false;

void thread(void* p)
{
    huge_stack(1,2,3,4);
    done = true;
}

int main()
{
    _beginthread(thread, 10, nullptr);

    while(!done) {}

    return 0;
} 
```

我确保我在调试模式下构建，因此不会优化调用和数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:08:43.770

保留堆栈的大小通常非常大……在 Windows 中为 1MB，在 Linux 中为 8MB。请注意，这与提交大小不同，提交大小是它开始的地方，通常是 4KB 左右。堆栈将自动增长到保留大小。另请注意，在 32 位系统上，具有大量保留堆栈，您可以使用数百个线程相当快地耗尽虚拟地址空间（因此，如果需要，您可以使用 Windows 链接属性或 Linux ulimit 进行调整）。最后，对于大型对象，我还是建议使用堆。

# html - 拆分父级时是否保留 CSS 规则？

> ID：12939078
> 
> 赞同：1
> 
> 时间：2012-10-17T16:36:44.120
> 
> 标签：html, css, dom, parent

考虑到 CSS 规则以各种方式组合，以下两个 HTML 片段在一般情况下是否呈现相同？如果没有，是否有一些合理的案例？

1)

```
<div class="outerrule">  
    <div class="innerrule1">content1</div>  
    <div class="innerrule2">content2</div>  
</div> 
```

2)

```
<div class="outerrule">  
    <div class="innerrule1">content1</div>  
</div>  
<div class="outerrule">  
    <div class="innerrule2">content2</div>  
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:39:29.970

> 考虑到 CSS 规则以各种方式组合，以下两个 HTML 片段在一般情况下是否呈现相同？

考虑到 CSS 规则以各种方式组合……没有一般情况。

如果根本没有作者 CSS，那么我认为它们将呈现相同的效果（因为我认为 div 默认具有 0 边距/填充）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:40:47.063

这取决于 CSS 是什么。

例如，如果有一个`.outerrule`添加边框的 CSS 规则，它们将不会呈现相同的内容。请参阅[此示例](http://jsfiddle.net/x9p8W/)。

另一方面，如果`.outerrule`只有一些字体样式，它们将呈现相同的效果。请参阅[此示例](http://jsfiddle.net/4qXUy/1/)。

这实际上完全取决于 CSS 本身。规则本身是“保留的”，因为它们将平等地适用于每个新元素。（假设，就像在您的代码中一样，它们都是类。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:42:39.863

在大多数情况下，这两个示例都应该以相同的方式呈现。您可能会发现差异的几个示例：`.innerrule1 + .innerrule2`, `.outerrule div:last-child`,`outerrule div:first-child`

# python - PyVisa 和打印新数据

> ID：12939083
> 
> 赞同：2
> 
> 时间：2012-10-17T16:36:51.500
> 
> 标签：python, visa

我正在尝试使用 Pyvisa 从我的 Keithly 2701 DMM 的一个通道中捕获数据。

我通过 获得静态一次性响应`temp = keithly.ask('SCPI COmmand')`，但我想做的是不断打印新数据而不设置任何预定义的大小，即捕获 300 个数据点。

如果我看到超过 10000 个数据点的趋势，或者在另一个实验中，我可能会在 2500 个数据点之后看到趋势，我想确定何时停止捕获。

```
from pylab import *
from visa import instrument

inst = SerialInstument(args)

while new data:
    print inst.aks('channel') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T21:52:51.223

```
while True:
    print inst.ask('channel')
    time.sleep(1) 
```

然后，您可以 ctrl-c 在您认为合适时停止循环。

上面的脚本很简单——它只是在屏幕上显示数字，直到你杀死它。我发现使用 matplotlib 实时绘制来自 PyVISA 的数据很有用。我发现这在 pyplot 模式下有问题（当我关闭交互模式时，我有很多空白屏幕，ymmv）所以我将它嵌入到 tkinter 窗口中，如下所示：

```
import matplotlib
matplotlib.use('TkAgg')  # this has to go before the other imports
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg
from matplotlib.figure import Figure
import Tkinter as Tk
import visa

# set up a PyVISA instrument and a list for the data
data = []
keithley = visa.instrument('GPIB0::whatever')

# make a Tkinter window
root = Tk.Tk()

# add a matplotlib figure to the Tk window
fig = Figure()
ax = fig.add_subplot(111)
canv = FigureCanvasTkAgg(fig, master=root)
canv.show()
canv.get_tk_widget().pack(fill='both', expand=True)

# a function that is called periodically by the event loop
def plot_update():
    # add a new number to the data
    data.append(keithley.ask('SCPI:COMM:AND?'))

    # replot the data in the Tk window
    ax.clear()
    ax.plot(data)
    fig.tight_layout()
    canv.draw()

    # wait a second before the next plot
    root.after(1000, plot_update)

root.after(1000, plot_update)
root.mainloop() 
```

它可能看起来不多，但我们逐渐将这样的短脚本开发成一个相当强大的仪器控制程序；）

# android - Android在操作栏中将菜单项向左对齐

> ID：12939085
> 
> 赞同：15
> 
> 时间：2012-10-17T16:36:55.073
> 
> 标签：android, android-actionbar, android-menu

我的应用程序中有操作栏，显示在我的`res/menu/activity_main.xml`

我的菜单项在操作栏上右对齐。我希望它们左对齐。

我为这个使用过的自定义操作栏找到了唯一的解决方案，比如这个： [Positioning menu items to the left of the ActionBar in Honeycomb](https://stackoverflow.com/questions/5306283/positioning-menu-items-to-the-left-of-the-actionbar-in-honeycomb)

但是，**我不想为我的菜单创建自定义布局**。我想使用从我的`res/menu/activity_main.xml`.

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-28T23:06:06.423

好吧，我对此很好奇，所以我深入挖掘了 SDK 的源代码。我`AppCompatActivity`在它的 XML 文件中使用了 3 个菜单项，并且我使用了默认`onCreateOptionMenu`方法，即：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_main, menu);
    return true;
} 
```

在我使用调试器从 inflate 方法继续之后，我经历了以下堆栈：

```
updateMenuView():96, BaseMenuPresenter (android.support.v7.internal.view.menu)
updateMenuView():231, ActionMenuPresenter (android.support.v7.widget)
dispatchPresenterUpdate():284, MenuBuilder (android.support.v7.internal.view.menu)
onItemsChanged():1030, MenuBuilder (android.support.v7.internal.view.menu)
startDispatchingItemsChanged():1053, MenuBuilder (android.support.v7.internal.view.menu)
preparePanel():1303, AppCompatDelegateImplV7 (android.support.v7.app)
doInvalidatePanelMenu():1541, AppCompatDelegateImplV7 (android.support.v7.app)
access$100():92, AppCompatDelegateImplV7 (android.support.v7.app)
run():130, AppCompatDelegateImplV7$1 (android.support.v7.app)
handleCallback():739, Handler (android.os)
dispatchMessage():95, Handler (android.os)
loop():148, Looper (android.os)
main():5417, ActivityThread (android.app)
invoke():-1, Method (java.lang.reflect)
run():726, ZygoteInit$MethodAndArgsCaller (com.android.internal.os)
main():616, ZygoteInit (com.android.internal.os) 
```

它以`BaseMenuPresenter`'s`updateMenuView`方法结束，这是完成相关工作的地方。

该方法的代码：

```
public void updateMenuView(boolean cleared) {
    final ViewGroup parent = (ViewGroup) mMenuView;
    if (parent == null) return;

    int childIndex = 0;
    if (mMenu != null) {
        mMenu.flagActionItems();
        ArrayList<MenuItemImpl> visibleItems = mMenu.getVisibleItems();
        final int itemCount = visibleItems.size();
        for (int i = 0; i < itemCount; i++) {
            MenuItemImpl item = visibleItems.get(i);
            if (shouldIncludeItem(childIndex, item)) {
                final View convertView = parent.getChildAt(childIndex);
                final MenuItemImpl oldItem = convertView instanceof MenuView.ItemView ?
                    ((MenuView.ItemView) convertView).getItemData() : null;
                final View itemView = getItemView(item, convertView, parent);
                if (item != oldItem) {
                    // Don't let old states linger with new data.
                    itemView.setPressed(false);
                    ViewCompat.jumpDrawablesToCurrentState(itemView);
                }
                if (itemView != convertView) {
                    addItemView(itemView, childIndex);
                }
                childIndex++;
            }
        }
    }

    // Remove leftover views.
    while (childIndex < parent.getChildCount()) {
        if (!filterLeftoverView(parent, childIndex)) {
            childIndex++;
        }
    }
} 
```

这里 the`getItemView`和`addItemView`方法按照他们的名字说的做。第一个膨胀一个新视图，第二个将它添加到父视图。更重要的是，在调试器下可以检查父对象，它是一个[ActionMenuView](http://developer.android.com/reference/android/widget/ActionMenuView.html)，它继承自`LinearLayout`膨胀形式[abc_action_menu_layout.xml](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4_r1/frameworks/support/v7/appcompat/res/layout/abc_action_menu_layout.xml?av=f)。

这意味着如果你能得到这个视图，你就可以做你想做的事。从理论上讲，我认为可以通过大量反思来完成，但这会很痛苦。取而代之的是，您可以在代码中重现它。可以在[这里](https://stackoverflow.com/q/27988346/3862022)找到实现。

根据上述情况，您的问题的答案是肯定的，可以做到，但会很棘手。

**编辑：**

我通过反射创建了一个概念证明。我用过`com.android.support:appcompat-v7:23.1.0`。

我已经在模拟器（Android 6.0）和我的 Zuk Z1（CM Android 5.1.1）上进行了尝试，两者都运行良好。

菜单 XML：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item android:id="@+id/action_settings" android:title="@string/action_settings"
        android:orderInCategory="100" app:showAsAction="always" />
    <item android:id="@+id/action_settings2" android:title="TEST1"
        android:orderInCategory="100" app:showAsAction="always" />
    <item android:id="@+id/action_settings3" android:title="TEST2"
        android:orderInCategory="100" app:showAsAction="always" />
</menu> 
```

活动 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="New Button"
        android:id="@+id/button"
        android:layout_gravity="center_vertical" />
</LinearLayout> 
```

活动：

```
public class Main2Activity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //only a linear layout with one button
        setContentView(R.layout.activity_main2);

        Button b = (Button) findViewById(R.id.button);

        // do the whole process for a click, everything is inited so we dont run into NPE
        b.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                AppCompatDelegate delegate = getDelegate();

                Class delegateImpClass = null;
                Field menu = null;
                Method[] methods = null;

                try {

                    //get objects based on the stack trace
                    delegateImpClass = Class.forName("android.support.v7.app.AppCompatDelegateImplV7");

                    //get delegate->mPreparedPanel
                    Field mPreparedPanelField = delegateImpClass.getDeclaredField("mPreparedPanel");
                    mPreparedPanelField.setAccessible(true);
                    Object mPreparedPanelObject = mPreparedPanelField.get(delegate);

                    //get delegate->mPreparedPanel->menu
                    Class PanelFeatureStateClass = Class.forName("android.support.v7.app.AppCompatDelegateImplV7$PanelFeatureState");
                    Field menuField = PanelFeatureStateClass.getDeclaredField("menu");
                    menuField.setAccessible(true);
                    Object menuObjectRaw = menuField.get(mPreparedPanelObject);
                    MenuBuilder menuObject = (MenuBuilder) menuObjectRaw;

                    //get delegate->mPreparedPanel->menu->mPresenter(0)
                    Field mPresentersField = menuObject.getClass().getDeclaredField("mPresenters");
                    mPresentersField.setAccessible(true);
                    CopyOnWriteArrayList<WeakReference<MenuPresenter>> mPresenters = (CopyOnWriteArrayList<WeakReference<MenuPresenter>>) mPresentersField.get(menuObject);
                    ActionMenuPresenter presenter0 = (ActionMenuPresenter) mPresenters.get(0).get();

                    //get the view from the presenter
                    Field mMenuViewField = presenter0.getClass().getSuperclass().getDeclaredField("mMenuView");
                    mMenuViewField.setAccessible(true);
                    MenuView menuView = (MenuView) mMenuViewField.get(presenter0);
                    ViewGroup menuViewParentObject = (ViewGroup) ((View) menuView);

                    //check the menu items count
                    int a = menuViewParentObject.getChildCount();
                    Log.i("ChildNum", a + "");

                    //set params as you want
                    Toolbar.LayoutParams params = (Toolbar.LayoutParams) menuViewParentObject.getLayoutParams();

                    params.gravity = Gravity.LEFT;

                    menuViewParentObject.setLayoutParams(params);

                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                } catch (NoSuchFieldException e) {
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                }
            }
        });
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }
} 
```

虽然这里的重力已经改变了，但在屏幕上这并没有什么明显的区别。要获得真正可见的更改，应调整其他布局参数（例如 width ）。

总而言之，自定义布局更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:08:21.283

你可以这样做：

```
activity.getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,
            ActionBar.DISPLAY_SHOW_CUSTOM);
activity.getActionBar().setCustomView(mAutoSyncSwitch, new ActionBar.LayoutParams(
            ActionBar.LayoutParams.WRAP_CONTENT,
            ActionBar.LayoutParams.WRAP_CONTENT,
            Gravity.CENTER_VERTICAL | Gravity.LEFT)); 
```

# jquery - SlideToggle 和回调，我做错了什么还是这是一个错误？

> ID：12939086
> 
> 赞同：5
> 
> 时间：2012-10-17T16:36:57.850
> 
> 标签：jquery, callback, slidetoggle, slidedown, slideup

我有一个带有四个项目按钮的页面，当用户单击这些按钮时，内容应该向下滑动。

如果它已经是可见内容，则该内容必须向上滑动，然后正确的内容应向下滑动。

一切正常，但是如果用户在项目按钮之间快速单击，幻灯片就会卡住并开始出现在其他幻灯片之上。

这是一个例子：http: [//jsfiddle.net/7t6Eh/42/](http://jsfiddle.net/7t6Eh/42/)

如果用户在项目之间单击“慢”，一切正常。

*   重新创建错误 单击项目按钮之间的快速。

我已经尝试使用 '.is(": visible")' 但得到了相同的结果。

谁能帮我吗？

## 代码

```
var active = 0;

    $("#item1").click(function(){

        if (active == 0){

            $("#ContentList1").stop().slideToggle(function() {
                active = 1;
            });

        } else {

            if (active != 1){
                $("#ContentList" + active).stop().slideToggle(function() {

                    $("#ContentList1").stop().slideToggle(function() {
                        active = 1;
                    });

                });
            }
        }
    });

    $("#item2").click(function(){

        if (active == 0){

            $("#ContentList2").stop().slideToggle(function() {
                active = 2;
            });

        } else {

            if (active != 2){
                $("#ContentList" + active).stop().slideToggle(function() {

                    $("#ContentList2").stop().slideToggle(function() {
                        active = 2;
                    });

                });
            }
        }
    });

    $("#item3").click(function(){

        if (active == 0){

            $("#ContentList3").stop().slideToggle(function() {
                active = 3;
            });

        } else {

            if (active != 3){
                $("#ContentList" + active).stop().slideToggle(function() {

                    $("#ContentList3").stop().slideToggle(function() {
                        active = 3;
                    });

                });
            }
        }
    });    

    $("#item4").click(function(){

        if (active == 0){

            $("#ContentList4").stop().slideToggle(function() {
                active = 4;
            });

        } else {

            if (active != 4){
                $("#ContentList" + active).stop().slideToggle(function() {

                    $("#ContentList4").stop().slideToggle(function() {
                        active = 4;
                    });

                });
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:55:10.073

我通常会利用选择相邻的 div 并停止它们来做这种事情`siblings()`，而不是使用“活动”变量来存储活动 div：

```
$(document).ready(function(){
    $("#item1").click(function(){
        $('#' + $(this).attr('for'))
            .slideDown().siblings('div').stop().slideUp()
    });
    $("#item2").click(function(){
        $('#' + $(this).attr('for'))
            .slideDown().siblings('div').stop().slideUp()
    });
    $("#item3").click(function(){
        $('#' + $(this).attr('for'))
            .slideDown().siblings('div').stop().slideUp()
    });
    $("#item4").click(function(){
        $('#' + $(this).attr('for'))
            .slideDown().siblings('div').stop().slideUp()
    });
}); 
```

您可以使用“for”属性（或任何其他属性）来指定链接所指的 div。例如：

```
<div id="item1" for="ContentList1" style="float: left; width: 50px; cursor: pointer;">Item1</div> 
```

一个工作小提琴的例子：http: [//jsfiddle.net/7t6Eh/46/](http://jsfiddle.net/7t6Eh/46/)

**添加**：如果你想在打开动画之前做关闭动画，你可以像这样使用 jQuery deferred：

```
$("#item1").click(function(){
    content = $('#' + $(this).attr('for'));
    $.when(content.siblings('div').stop().slideUp())
        .then(function () { content.slideDown() });
}); 
```

当然适用于所有 4 个点击事件。示例：http: [//jsfiddle.net/7t6Eh/52/](http://jsfiddle.net/7t6Eh/52/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:54:31.323

[http://jsfiddle.net/7t6Eh/50/](http://jsfiddle.net/7t6Eh/50/)

这应该做你想要达到的目标。它获取单击的列表项的位置，并根据该位置显示您想要的内容。如果您需要任何其他解释，请告诉我

```
var active = -1;
$('.content').hide();
$('ul li').click(function() {
    var index = $(this).index('ul li');
    if( active == index) {
        // this item already active, do nothing
    } else {
        // show the content you want
        $('.content').stop().slideUp();
        $('.content').eq(index).slideDown()
    }
    active = index
}) 
```

​</p>

# php - 是否可以编写一个 PHP 脚本，通过 FTP 将文件从用户计算机传输到 FTP 服务器，而不使用 HTML 文件上传？

> ID：12939087
> 
> 赞同：0
> 
> 时间：2012-10-17T16:36:58.853
> 
> 标签：php, apache, file-upload, ftp, temp

我不确定我的请求有多普遍，但这里是：

我有一个客户希望能够从他们的客户那里接收最大 2GB 的文件。这些文件很大的原因是因为它们是图形设计文件。理想情况下，他们会让客户使用 Filezilla 等 FTP 客户端通过 FTP 传输文件。然而，我的客户表示，他们花了太多时间来教人们如何将 FTP 凭据输入 FTP 程序以及一般的 FTP 概念。

所以最终我的客户表示他们希望客户能够使用他们已经熟悉的 Web 界面来完成相同的任务。例如，他们希望客户能够使用表单并点击上传文件按钮。就那么简单。

在这一点上，我应该声明我正在使用 Rackspace 云站点服务器（共享主机）之上的 WordPress 站点。

我正在使用允许我执行此操作的 WordPress 插件，它适用于小文件，但不适用于接近 500MB 的文件。在与 RS Cloud 技术支持人员交谈后，我将其范围缩小到 Apache 服务器中的临时目录 /tmp/。那是由于服务器范围的限制，服务器无法将大文件写入该临时目录。也就是说，他们无法改变这一点来满足我的需要。他们说我需要一个专用服务器，这对我来说不是一个选择。

经过一番思考，我得出的结论是，我不得不将文件上传到服务器的临时目录，只是将文件移动到 ftp 服务器，这很愚蠢。所以这让我想到了我的问题：**基于 Web 的 PHP 脚本是否可以直接从用户的机器发送文件，绕过 Web 服务器，直接发送到 FTP 服务器**？

如果没有，您还有其他建议吗？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:43:04.163

不，这根本不可能。

我的建议？搜索并了解如何使用 HTML5 上传大文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:55:23.037

它的接缝就像有人为您的问题找到解决方案一样。请参考这个问题：

[流 FTP 下载到输出](https://stackoverflow.com/questions/1397182/stream-ftp-download-to-output)

问题是如何通过 HTTP 将文件从 FTP 流式传输/管道传输到用户的浏览器。

看起来@strager 的答案就是您所需要的。

# ios - iOS6应用被拒绝

> ID：12939088
> 
> 赞同：1
> 
> 时间：2012-10-17T16:37:14.547
> 
> 标签：ios, ios6, app-store, iphone-5

由于这些模糊的原因，我的 iOS 应用程序，iOS6 和 iPhone5 兼容，只是被拒绝：

> 10.6：Apple 和我们的客户高度重视简单、精致、有创意、经过深思熟虑的界面。他们需要做更多的工作，但值得。苹果设定了很高的标准。如果您的用户界面很复杂或不太好，则可能会被拒绝
> 
> 0.6
> 
> 我们发现您的应用程序的用户界面存在以下问题：
> 
> *   不使用预期的 iO​​S 手势。
>     
>     
> *   未与 iOS 功能集成。
>     
>     
> *   不包括 iOS 功能。例如，除了 Web 视图、推送通知或共享之外，还可以使用原生 iOS 按钮和 iOS 功能。
>     
>     
> 
> 这些示例确定了在您的应用中发现的问题类型，但可能并不代表所有此类问题。彻底评估您的应用程序以解决这些类型的问题是合适的。
> 
> * * *
> 
> 学习如何改进您的应用的资源：
> 
> *   观看视频优秀应用的组成部分，了解优秀应用的基础知识
>     
>     
> *   观看视频 iPhone 和 iPad 用户界面设计，了解实用的设计技巧
>     
>     
> *   阅读 iOS 人机界面指南并仔细检查您的应用程序的用户界面是否符合这些有价值的指南。
>     
>     
> *   阅读 iOS App Programming Guide 的 App Design Basics 部分。
>     
>     
> *   观看 iOS 开发视频以了解编程和设计技巧。如果您认为我们不了解您的应用程序的功能，或者我们遗漏了关键功能，并且您的应用程序被错误地拒绝，您可以向应用程序审查委员会提出申诉。

谁能给我一些方向，我应该去哪里看？显然我在我的代码或 UI 中看不到任何具体的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:43:25.523

他们的主要建议是“阅读 iOS 人机界面指南并仔细检查您的应用程序的用户界面是否符合这些有价值的指南。” 你可以在这里找到这些：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

从他们模糊的描述中，听起来您的应用程序可能不包含一些默认的预期 UI 行为和手势。我会阅读指南以验证它们是什么，然后确保它们在您的应用程序中实现。

# c# - EF Code First 表命名问题

> ID：12939091
> 
> 赞同：0
> 
> 时间：2012-10-17T16:37:35.997
> 
> 标签：c#, entity-framework

我首先使用 EF 代码构建了一个项目。它还使用表单身份验证。直到最近，会员数据库和应用程序数据库都是分开开发的，但为了简单起见，我想将它们合并到一个数据库中。

我的代码优先模型中的一个类称为“应用程序”，因此 EF 生成的表称为“应用程序”，它与同名的成员表冲突。这是我当前上下文的一个示例：

```
public partial class ExampleContext : DbContext
{
    public DbSet<Application> Applications { get; set; }
    public DbSet<Status> StatusTypes { get; set; } // notice the name of the property vs the name of the class
} 
```

我认为表名是基于上下文中属性的名称，因为它正在生成一个`StatusTypes`为所有`Status`对象命名的表。但是，如果我将`Applications`属性重命名为类似`MyApplications`的名称，它仍然会生成一个名为`Applications`. 很明显，这不仅仅是财产的名称，我还遗漏了一些东西。

我的问题：如何让 EF 以不同的方式命名此表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:24:53.450

难道你不能使用配置类来做这样的事情：

```
public class ApplicationConfiguration : EntityTypeConfiguration<Application>
{
    public ClientConfiguration()
    {
        ToTable("SpecialApplication");
    }
} 
```

然后在您的上下文中覆盖 OnModelCreating：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new ApplicationConfiguration());
    } 
```

这应该会强制你的表被命名为 SpecialApplication 并避免冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:29:02.853

默认情况下，实体框架代码在从模型类构建数据库时首先会为表生成复数名称。您可以覆盖`OnModelCreating`db 上下文类的方法，为表指定不同的名称。

```
public class YourDBCOntext:DbContext
{
  protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
    modelBuilder.Entity<Applications>().ToTable("MYApplications");
  }    
} 
```

您也可以全局执行此操作，这样所有表都不会有复数名称。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
     modelBuilder.Conventions.Remove<PluralizingTaleNameConvention>();
  }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:06:46.937

我刚刚重命名了这个类，它起作用了。目前最简单的解决方案。

# subclass - 子类化 pandas.Index

> ID：12939093
> 
> 赞同：1
> 
> 时间：2012-10-17T16:37:42.063
> 
> 标签：subclass, pandas

我想写一个子类`pandas.core.index.Index`。我正在遵循 ndarrays 子类化指南，该指南可在[numpy 文档](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html#a-brief-python-primer-on-new-and-init)中找到。这是我的代码：

```
import numpy as np
import pandas as pd

class InfoIndex(pd.core.index.Index):

    def __new__(subtype, data, info=None):
        # Create the ndarray instance of our type, given the usual
        # ndarray input arguments.  This will call the standard
        # ndarray constructor, but return an object of our type.
        # It also triggers a call to InfoArray.__array_finalize__
        obj = pd.core.index.Index.__new__(subtype, data)
        # set the new 'info' attribute to the value passed
        obj.info = info
        # Finally, we must return the newly created object:
        return obj 
```

但是，它不起作用；我只得到一个`Index`对象：

```
In [2]: I = InfoIndex((3,))

In [3]: I
Out[3]: Int64Index([3]) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:55:54.570

当输入是特殊的（例如所有整数或日期时间）时，索引构造函数会尝试变得聪明，并在最后跳到调用查看。所以你需要明确地把它放进去：

```
In [150]: class InfoIndex(pd.Index):
   .....:     def __new__(cls, data, info=None):
   .....:         obj = pd.Index.__new__(cls, data)
   .....:         obj.info = info
   .....:         obj = obj.view(cls)
   .....:         return obj
   .....:     

In [151]: I = InfoIndex((3,))

In [152]: I
Out[152]: InfoIndex([3]) 
```

注意事项：小心子类化 pandas 对象，因为许多方法将显式返回 Index 而不是子类。如果不小心，Index 的子类中也有一些功能会丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T16:17:24.230

如果您实施该`__array_finalize__`方法，您可以确保在许多操作中保留元数据。对于某些索引方法，您需要在子类中提供实现。有关更多帮助，请参阅[http://docs.scipy.org/doc/numpy/user/basics.subclassing.html](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T18:24:23.187

扩展以前的答案。如果您使用`_constructor`property 和 set ，您还可以保留大多数索引方法`_infer_as_myclass = True`。

# javascript - 范围和命名空间问题

> ID：12939095
> 
> 赞同：1
> 
> 时间：2012-10-17T16:37:43.137
> 
> 标签：javascript, namespaces, scope

我正在检查各种 JavaScript 库以用于学习目的。基本上，我想找到初始化命名空间的最佳方法，看看专业人士如何在他们的库中加载所有相关文件。我在库用户会在几个库中调用的主文件（例如，我们称之为 myNameSpace.js）中遇到过几次：

```
(function() {

    var jsFiles = window.MyNameSpace;

    window.MyNameSpace = {
        _getScriptLocation: (function() { 
            /* some code here */ 
        })
    };

    if(!jsFiles) { 
        jsFiles = [/* An array of ALL the library files! */];
    }

    for(var i=0, len = jsFiles.length; i<len; i++) { 
        scriptTags[i] = "<script src='" + jsFiles[i]  + "'></script>"; 
    }

    if(scriptTags.length > 0) { 
        document.write(scriptTags.join("")); 
    }

})(); 
```

因此，通过此设置，如果库用户只想包含库的某些部分，他们将在加载 myNameSpace.js 之前通过执行以下操作来指定：

```
<script type='text/javascript'> window.MyNameSpace = ["libraryFile1.js", "libraryFile2.js", "libraryFile3.js"]</script>
<script type='text/javascript' src="MyNameSpace.js"></script> 
```

我的问题是，window.MyNameSpace 是一个对象，如果脚本将 jsFiles 分配给作为 window.MyNameSpace 的数组设置，这将是一个引用分配，对吗？但在那一行之后，window.MyNameSpace 立即被完全改变。那么jsFiles不应该不再引用传入的原始数组吗？在我的理解中，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:44:07.883

JS 没有“通过引用”赋值，赋值是复制，但是我们在赋值对象的时候，复制的是它们的地址，而不是对象“本身”。

看

```
window.MyNameSpace = ["libraryFile1.js", "libraryFile2.js", "libraryFile3.js"] 
```

`window.MyNameSpace`指向内存中的某个对象。假设它的地址是 0x12345

```
var jsFiles = window.MyNameSpace; 
```

`jsFiles`现在指向同一个对象（0x12345）

```
window.MyNameSpace = {...} 
```

`window.MyNameSpace`现在指向其他对象（假设为 0x56789），但`jsFiles`仍指向第一个对象（0x12345）。

# c# - 适合由线集合定义的地图的寻路算法

> ID：12939102
> 
> 赞同：0
> 
> 时间：2012-10-17T16:38:04.403
> 
> 标签：c#, algorithm, path-finding

我有一组线。一条线由两个点定义。A Point 具有 (x,y) 坐标。有些线只在一个点与其他线相连。这组线定义了一个地图。您可以在下图中看到一个示例。现在让我们假设我想从任何线段上的一个点（不仅仅是一条线的端点）到另一条线上的另一个点。

背景：从一个点移动到另一个点时，我想沿途画一条线，所以最后只画经过的路径。将其视为路径的热图。我会使用什么算法？有没有我可以使用的库？ ![由一组线定义的地图](../Images/21d3e3983604a1e9afcf61fbd8bc43de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:56:12.543

将图形表示为具有 xy 坐标的线集不适合路径查找算法，因此您应该从线段集构建正确的图形。我认为您可以使用这些公式： http: [//en.wikipedia.org/wiki/Distance_from_a_point_to_a_line](http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line) http://en.wikipedia.org/wiki/Line-line_intersection 来确定每个线段的相邻线段。两条线的每个交点都应转换为四条或三条线，以便它们仅通过端点连接。在构建每个节点代表一条线并且每个边代表线之间的连接的图形之后，您可以使用 Dijkstra 算法来查找任何一对节点（线）之间的最短路径： [http ://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:43:51.057

由于两点之间可能存在多条路径，因此无法确定问题。

如果您想要两点之间的最短路径，则必须进行 4 路计算：假设点 A 在线段 a1-a2 上，点 B 在线段 b1-b2 上。您使用 Dijstra 算法计算以下四个路径和距离：

a1 到 b1
a1 到 b2
a2 到 b1
a2 到 b2

现在，适当地增加或减少距离 A/B。例如，如果路径是这样的：

A -> a1 -> b2 -> B

那么这条路径的总实际距离是（A 到 a1）+（a1 到 b2）+（b2 到 B）。您需要计算上面列出的所有四种可能性的实际距离。取值最小的就是最短路径。然后你可以给它上色。

没有公共库可以进行此计算。我不得不手写一次。

# inno-setup - inno setup bmp 图像出现在单个页面上

> ID：12939103
> 
> 赞同：7
> 
> 时间：2012-10-17T16:38:08.410
> 
> 标签：inno-setup

我希望 bmp 图像出现在单个页面“selectadditionaltasks”上，但它出现在所有页面上。我究竟做错了什么？

```
procedure LogoOnClick(Sender: TObject);
var ResCode: Integer;
begin
end;
procedure LogoWizard();

var
  BtnPanel: TPanel;
  BtnImage: TBitmapImage;
begin
  ExtractTemporaryFile('Logo.bmp')

  BtnPanel:=TPanel.Create(WizardForm)
  with BtnPanel do begin
    Left:=40
    Top:=250
    Width:=455
    Height:=42
    Cursor:=crHand
    OnClick:=@logoOnClick
    Parent:=WizardForm
  end
  BtnImage:=TBitmapImage.Create(WizardForm)
  with BtnImage do begin
    AutoSize:=True;
    Enabled:=False;
    Bitmap.LoadFromFile(ExpandConstant('{tmp}')+'\Logo.bmp')
    Parent:=BtnPanel
  end
end;
procedure InitializeWizard();
begin
  LogoWizard();
end; 
```

图像示例

![设置屏幕截图](../Images/a27641dd50ab4f10eab7824ccff3c073.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T17:27:21.043

通过将您的 a 设置为`Parent`您要告诉的，您希望该面板成为整个向导表单的直接子级。您必须将属性更改为您希望该面板出现在其上的页面表面。`BtnPanel``WizardForm``BtnPanel.Parent`

由于您希望您的图像出现在“*选择附加任务*”向导页面上，我可以建议的最好方法是仅使用没有底层面板的图像并调整`TasksList`复选框的大小，默认情况下它也覆盖页面的底部区域，其中你想放置你的图像。这就是下面的脚本。您也可以遵循[`commented version`](https://stackoverflow.com/revisions/12939933/4)此脚本：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Files]
Source: "Logo.bmp"; Flags: dontcopy

[Tasks]
Name: associate; Description: "&Associate files"; Flags: unchecked
Name: desktopicon; Description: "Create a &desktop icon"; Flags: unchecked

[Code]
procedure LogoOnClick(Sender: TObject);
begin
  MsgBox('Hello!', mbInformation, MB_OK);
end;

procedure InitializeWizard;
var
  BtnImage: TBitmapImage;
begin
  ExtractTemporaryFile('Logo.bmp');

  BtnImage := TBitmapImage.Create(WizardForm);
  with BtnImage do 
  begin
    Parent := WizardForm.SelectTasksPage;
    Bitmap.LoadFromFile(ExpandConstant('{tmp}')+'\Logo.bmp');
    AutoSize := True;
    Left := 0;
    Top := WizardForm.SelectTasksPage.Top + WizardForm.SelectTasksPage.Height - 
      Height - 8;
    Cursor := crHand;
    OnClick := @LogoOnClick;            
  end;
  WizardForm.TasksList.Height :=
    WizardForm.TasksList.Height - BtnImage.Height - 8;
end; 
```

# python - Using python-memcached and the Pyramid Framework Pserve Server

> ID：12939105
> 
> 赞同：0
> 
> 时间：2012-10-17T16:38:11.300
> 
> 标签：python, memcached, pyramid

My web application uses the Pyramid framework, and runs on a Debian Linux system. I'm adding `python-memcached` to the application but cannot get the objects to be stored and retrieved. I get a null value when I retrieve a object from memcached using the key I used to set it with. The testing/debugging server I am using is the Pyramid Framework `pserve` server.

```
import memcache
mc = memcache.Client(['127.0.0.1:6543'], debug=0)
mc.set('key1', 'value1', 10)
val = mc.get('key1') 
```

The val is equal to 'null'.

The command I use to run the application is:

```
$ pserve development.ini --reload 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:18:31.017

我怀疑您的 memcache 服务器正在端口 6543 上运行 - 假设您使用默认的金字塔配置文件，您的开发服务器在端口 6543 上运行，您的 memcache 服务器可能在端口 11211 上。尝试运行 memcache 服务器然后设置

`mc = memcache.Client(['127.0.0.1:11211'], debug=0)`

# c++ - How Do I Fix This Loop? C ++

> ID：12939106
> 
> 赞同：0
> 
> 时间：2012-10-17T16:38:20.817
> 
> 标签：c++

> **Possible Duplicate:**
> [C++ Loop Not Looping Appropriately](https://stackoverflow.com/questions/12925276/c-loop-not-looping-appropriately)

Warning..I am new to C++ programming...I have an array of 20 x 20 that outputs how hot a plate is. I need to reiterate through a loop until no cell in the array changes more than 0.1 degree(I refresh the values through every iteration. How would you monitor the largest change for any cell in an array in order to determine when to stop iterating? Right now I have tried, but the below doesn't output correctly.

```
#include <iostream>
#include <string>
#include <fstream>
#include <iomanip>

using namespace std;

const int array_size = 20; // set array size and neighbors to calculate rest of cells
const int cell_neighbors = 4;

void initialize(double hot_plate[][array_size]); //functions here
bool writeFile(const double hot_plate[][array_size],
           const string file_name);

double sum_cell(const double hot_plate[][array_size],
            const int cell_X, const int cell_Y);
double value_cell(const double hot_plate[][array_size],
            const int cell_X, const int cell_Y);

int main()
{
double hot_plate[array_size][array_size];//set variables

initialize(hot_plate); //run function

string file_name = "hot_plate.csv"; //file name for Excel

//repeat until stable
int repeat_until_stable = 1000;
while ( repeat_until_stable > 0)
{
    for (int a = 1; a < array_size - 1; a++)
    {
        for (int b = 1; b < array_size - 1; b++)
            {

            {
                hot_plate[a][b] = sum_cell(hot_plate, b, a);
            }
        }
    }
    repeat_until_stable--;
}

if (writeFile(hot_plate, file_name)) //check functionality of the program
{
    cout << "Excel File created\n";
}
else
{
    cout << "The Excel file did not write\n";
}

system("pause");

return 0;
}

//function definition

double sum_cell(const double hot_plate[][array_size],
            const int cell_X, const int cell_Y)
{
double cell_num = hot_plate[cell_X - 1][cell_Y]; // Top
cell_num += hot_plate[cell_X][cell_Y - 1]; // Left
cell_num += hot_plate[cell_X][cell_Y + 1]; // Right
cell_num += hot_plate[cell_X + 1][cell_Y]; // Bottom

cell_num /= cell_neighbors; // find average of the 4 values closest to cell

return cell_num;
}

// setup the array so all values are defined
void initialize(double hot_plate[][array_size])
{
for (int a = 0; a < array_size; a++)
{
    for (int b = 0; b < array_size; b++)
    {
        if (a == 0 || a == array_size - 1)
        {
            if (b == 0 || b == array_size - 1)
            {
                hot_plate[a][b] = 0.0;
            }
            else
            {
                hot_plate[a][b] = 100.0;
            }
        }
        else
        {
            hot_plate[a][b] = 0.0;
        }
    }
}
}
double value_cell(const double hot_plate[][array_size],
            const int cell_X, const int cell_Y)
{
double cell_value = hot_plate[cell_X][cell_Y]; // cell value

return cell_value;
}
// Write the data to the Excel CSV file
bool writeFile(const double hot_plate[][array_size],
           const string file_name)
{
// open the excel file
ofstream fout(file_name);
if (fout.fail())
  return false;

for (int a = 0; a < array_size; a++)
{
   for (int b = 0; b < array_size; b++)
   {
       fout << hot_plate[a][b];
       if ( b < array_size - 1)
       {
           fout << ", ";
       }
       else if (a != array_size - 1)
       {
           fout << endl;
       }
   }
}

// close the input stream from the file.
fout.close();
return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:46:50.500

放置一个包含所做最大更改的变量，并在 for 循环之后检查它

```
double maxChange=.11;
.
.
.
while(maxChange>.1)
{
      maxChange=-1;
      for(.....)
             for(.....)
             {
                   change=fabs(oldValue-plate[a][b]);
                   if(change>maxChange)
                         maxChange=change;
             }

} 
```

# c# - Why do I get this error 'binding to target method' using Delegate.CreateDelegate?

> ID：12939108
> 
> 赞同：2
> 
> 时间：2012-10-17T16:38:23.403
> 
> 标签：c#, delegates

The Run2 method is run. But the Run method is not run. What is the reason ? The only difference between two methods is because parameter.

```
public class MyClass
{
    public string Name { get; set; }
}

[TestFixture]
public class Test
{
    public IEnumerable<T> TestMethod<T>(int i)
    {
        //do something
        return null;
    }

    public IEnumerable<T> TestMethod2<T>()
    {
        //do something
        return null;
    }

    [Test]
    public void Run()
    {
        MethodInfo mi = this.GetType().GetMethod("TestMethod").MakeGenericMethod(typeof(MyClass));
        var del = Delegate.CreateDelegate(typeof(Func<IEnumerable<MyClass>>), this, mi);
        var list = (IEnumerable<MyClass>)del.DynamicInvoke(0);
    }

    [Test]
    public void Run2()
    {
        MethodInfo mi = this.GetType().GetMethod("TestMethod2").MakeGenericMethod(typeof(MyClass));
        var del = Delegate.CreateDelegate(typeof(Func<IEnumerable<MyClass>>), this, mi);
        var list = (IEnumerable<MyClass>)del.DynamicInvoke();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:42:19.927

问题在这里：

```
var del = Delegate.CreateDelegate(typeof(Func<IEnumerable<MyClass>>), this, mi); 
```

您已经说过要将您的方法绑定到`Func<IEnumerable<MyClass>>`委托，但实际方法应该是`Func<int, IEnumerable<MyClass>>`（因为 的`int`参数`TestMethod`）。以下应该更正它：

```
var del = Delegate.CreateDelegate(typeof(Func<int, IEnumerable<MyClass>>), this, mi); 
```

# c# - csscript unloading assembly used with an interface

> ID：12939110
> 
> 赞同：1
> 
> 时间：2012-10-17T16:38:27.693
> 
> 标签：c#

I am trying to execute cs scripts in a directory a loop. Every time the script changed (or if it's new) it gets loaded and executed. But I receive an error on trying to load the script a second time:

`Access to the path 'C:\Users\Admin\AppData\Local\Temp\CSSCRIPT\Cache\647885655\hello.cs.compiled' is denied.`

What I tried to do was:

```
static Dictionary<string, string> mFilePathFileHashes = new Dictionary<string, string>();
public static void LoadFromDir(string dir)
{
    foreach (string filepath in Directory.GetFiles(dir))
    {
        string hash = GetMD5HashFromFile(filepath); //Generate file hash
        if (mFilePathFileHashes.Contains(new KeyValuePair<string, string>(filepath, hash))) continue; //Skip if it hasn't changed

        if (mFilePathFileHashes.ContainsKey(filepath))
        { //Hash changed
            mFilePathFileHashes[filepath] = hash;
        }
        else //This is the first time this file entered the loop
            mFilePathFileHashes.Add(filepath, hash);

        //Load the script
        IScript script = CSScript.Load(filepath)
                            .CreateInstance("Script")
                            .AlignToInterface<IScript>();

        //Do stuff
        script.AddUserControl();
    }

protected static string GetMD5HashFromFile(string fileName)
{
    FileStream file = new FileStream(fileName, FileMode.Open);
    MD5 md5 = new MD5CryptoServiceProvider();
    byte[] retVal = md5.ComputeHash(file);
    file.Close();

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < retVal.Length; i++)
    {
        sb.Append(retVal[i].ToString("x2"));
    }
    return sb.ToString();
} 
```

At the "Load the script" part it would throw the error. So I [read up](http://www.csscript.net/help/Script_hosting_guideline_.html) on it a bit and tried this:

```
//Load the script
string asmFile = CSScript.Compile(filepath, null, false);
using (AsmHelper helper = new AsmHelper(asmFile, "temp_dom_" + Path.GetFileName(filepath), true))
{
    IScript script = helper.CreateAndAlignToInterface<IScript>("Script");
    script.AddUserControl();

    //helper.Invoke("Script.AddUserControl");
} 
```

Because that page said `Script is loaded in the temporary AppDomain and unloaded after the execution. To set up the AsmHelper to work in this mode instantiate it with the constructor that takes the assembly file name as a parameter`

But that won't Align to the interface : `Type 'Script' in Assembly 'hello.cs, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' is not marked as serializable.` What does that even mean, and why would it need to be serializable?

If I switch to the `helper.Invoke` line instead I get a NullReferenceException.

The script:

```
using System;
using System.Windows.Forms;
using CSScriptTest;

class Script : CSScriptTest.IScript
{ 
    public void AddUserControl()
    {
        Form1.frm.AddUserControl1(this, "test_uc_1");
    }
} 
```

So that last error may be because I never actually Aligned to an interface, or because I am calling a static method from outside of the main AppDomain (I really wouldn't know).

Is there any way to get this working?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:33:56.447

好吧，它通过将我想要操作的对象传递给接口的方法来工作，如下所示：

```
using (var helper = new AsmHelper(CSScript.Compile(filepath), null, false))
{
    IScript script = helper.CreateAndAlignToInterface<IScript>("Script");
    script.AddUserControl(Form1.frm);
} 
```

使用这样的脚本继承`MarshalByRefObject`：

```
using System;
using System.Windows.Forms;
using CSScriptTest;

class Script : MarshalByRefObject, CSScriptTest.IScript
{ 
    public void AddUserControl(CSScriptTest.Form1 host)
    {
        host.AddUserControl1(this, "lol2");
    }
} 
```

MSDN sais`MarshalByRefObject Enables access to objects across application domain boundaries in applications that support remoting.`所以我想这是有道理的.. 但是有什么方法可以让我将主要应用程序的方法暴露给脚本？

`MarshalByRefObject`通过在主程序中继承似乎不可能，如下所示：

```
public class CTestIt : MarshalByRefObject
{
    public static CTestIt Singleton;
    internal static void SetSingleton()
    { //This method is successfully executed before we start loading scripts
        Singleton = new CTestIt();
        Console.WriteLine("CTestIt Singleton set"); 
    }

    public static void test()
    {
       //Null reference when a script calls CSScriptTest.CTestIt.test();
        Singleton.test_member(); 
    }

    public void test_member()
    {
        Console.WriteLine("test");
    }
} 
```

# php - PHP - Form won't submit if too many input fields

> ID：12939116
> 
> 赞同：0
> 
> 时间：2012-10-17T16:38:43.407
> 
> 标签：php, submit, max, variables

I recently transferred files from WAMP to a production server that I am setting up. Several forms that were previously working no longer submit. I have been able to deduce that it only happens when there are over a certain number of fields being submitted. The number of fields varies per page but stays consistent within the given page. I have been the the php.ini for both WAMP and my server and have not been able to locate what is causing this behavior. Changing max post size and max input vars did not help. I would post my php.ini but it is almost 2000 lines long.

# drupal - Drupal db_select()，如何在条件下使用两个 db 字段？

> ID：12939117
> 
> 赞同：4
> 
> 时间：2012-10-17T16:38:43.107
> 
> 标签：drupal, select, conditional-statements

我有一个drupal db_select 的问题。

这是我的代码：

```
 $query = db_select('node', 'n');
    $query->addField('n', 'nid', 'nid');
    $query->addField('cfs', 'entity_id', 'feature_support_id');
    $query->addField('fpffs', 'entity_id', 'parent_feature_support_id');
    $query->addField('cfsfc', 'feature_support_compared_target_id', 'feature_support_compared');
    $query->addField('fpffsfc', 'feature_support_compared_target_id', 'parent_feature_support_compared');
    //Get feature_support of the feature
    $query->join('field_data_feature_support_feature', 'cfs', 'n.nid = cfs.feature_support_feature_target_id');
    $query->join('field_data_feature_support_compared', 'cfsfc', 'cfs.entity_id = cfsfc.entity_id');
    //Get parent feature_support through feature
    $query->join('field_data_feature_parent_feature', 'fp', 'n.nid = fp.entity_id');
    $query->join('field_data_feature_support_feature', 'fpffs', 'fp.feature_parent_feature_target_id = fpffs.feature_support_feature_target_id');
    $query->join('field_data_feature_support_compared', 'fpffsfc', 'fpffs.entity_id = fpffsfc.entity_id');
    $query->condition('n.nid', $node_revision->nid, '=');
    $query->condition('cfsfc.feature_support_compared_target_id', 'fpffsfc.feature_support_compared_target_id', '=');
    $result = $query->execute(); 
```

在数据库中，我的请求应该是

```
SELECT n.nid AS nid, cfs.entity_id AS feature_support_id, fpffs.entity_id AS parent_feature_support_id, cfsfc.feature_support_compared_target_id AS feature_support_compared, fpffsfc.feature_support_compared_target_id AS parent_feature_support_compared
FROM node n
INNER JOIN field_data_feature_support_feature cfs ON n.nid = cfs.feature_support_feature_target_id
INNER JOIN field_data_feature_support_compared cfsfc ON cfs.entity_id = cfsfc.entity_id
INNER JOIN field_data_feature_parent_feature fp ON n.nid = fp.entity_id
INNER JOIN field_data_feature_support_feature fpffs ON fp.feature_parent_feature_target_id = fpffs.feature_support_feature_target_id
INNER JOIN field_data_feature_support_compared fpffsfc ON fpffs.entity_id = fpffsfc.entity_id
WHERE  (n.nid = '9') AND (cfsfc.feature_support_compared_target_id = fpffsfc.feature_support_compared_target_id) 
```

当我在 phpmyadmin 中尝试时，此请求有效，但在 mysql 日志中我有

```
SELECT n.nid AS nid, cfs.entity_id AS feature_support_id, fpffs.entity_id AS parent_feature_support_id, cfsfc.feature_support_compared_target_id AS feature_support_compared, fpffsfc.feature_support_compared_target_id AS parent_feature_support_compared
FROM node n
INNER JOIN field_data_feature_support_feature cfs ON n.nid = cfs.feature_support_feature_target_id
INNER JOIN field_data_feature_support_compared cfsfc ON cfs.entity_id = cfsfc.entity_id
INNER JOIN field_data_feature_parent_feature fp ON n.nid = fp.entity_id
INNER JOIN field_data_feature_support_feature fpffs ON fp.feature_parent_feature_target_id = fpffs.feature_support_feature_target_id
INNER JOIN field_data_feature_support_compared fpffsfc ON fpffs.entity_id = fpffsfc.entity_id
WHERE  (n.nid = '9') AND (cfsfc.feature_support_compared_target_id = 'fpffsfc.feature_support_compared_target_id') 
```

最后看到，在 WHERE 中，'fpffsfc.feature_support_compared_target_id' 周围有单引号，不应该在那里。

这显然是因为 ->condition 的第二个参数似乎只接受变量。任何人都知道我如何使用 db_select 为两个 db 字段创建条件？

谢谢你能给我带来的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:06:53.773

使用 $query->where($snippet, $args = array());

```
$query->where('cfsfc.feature_support_compared_target_id = fpffsfc.feature_support_compared_target_id'); 
```

# recursion - Recursive vs non-recursive

> ID：12939126
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:39:41.640
> 
> 标签：recursion, non-recursive

> **Possible Duplicate:**
> [Recursion and Iteration](https://stackoverflow.com/questions/2576993/recursion-and-iteration)

What is the difference between a recursive and a non-recursive function? Fibonacci to be exact.

I looking for answers that relate towards the time and memory.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:59:58.100

“递归”仅仅意味着一个函数调用自己。这可能是有意的，也可能不是有意的（无意的递归会导致很多崩溃）。

有意递归，其中一个函数执行部分操作，然后调用自己执行剩余部分，通常是一种有用的编程范式，但需要一定程度的理解/经验/技能才能“了解它”。

基本上，递归可用于替换“迭代”（循环）并替换伴随的数组分配（使用函数体本地的变量）。但并非每个迭代或使用数组的函数都可以有效地转换为其递归等效函数。

*如果*问题适合递归，通常可以编写一个递归版本，其执行效率与非递归版本大致相当……可能会稍好或稍差，具体取决于调用机制与循环和数组索引相比的效率在语言/编译器中。在存储方面，递归很少有效率更高，但它受益于不必为手头的特定问题预先分配（并且预先知道分配的大小）。

大多数情况下，递归更好（实际上是），因为它使实现更简单，更不容易出错，而错误是迄今为止计算中最大的成本。（当然，如果做得不正确，也会花费你很多时间。）

当递归很好时，它非常好。当递归很糟糕时，它非常糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:43:01.160

递归函数是以编程语言实现的过程或子例程，其实现引用自身。

非递归函数是用编程语言实现的过程或子例程，其实现不引用自身

以下是递归和非递归斐波那契数列的链接：-[递归和非递归斐波那契数列](http://electrofriends.com/source-codes/software-programs/java/basic-programs/java-program-print-fibonacci-sequence-recursive-recursive/)

# velocity - velocity count not incrementing in recursive call

> ID：12939129
> 
> 赞同：1
> 
> 时间：2012-10-17T16:39:46.927
> 
> 标签：velocity

My code looks like this:

```
#macro (myMac $listOfValues)
    #foreach ($val in ${listOfValues})
        #set ($subList = $val.child())
        #if (some condition)
            some output
            #if (${velocityCount} < ${listOfValues.size()})
               ,\n
            #end
        #else
            #myMac(${subList})  -- B
        #end
    #end
#end
#myMac (${listOfValues})  -- A 
```

listOfValues -- is a list of string subList -- is a list of String

${listOfValues.size() is always zero, during the recursive call (call from B), though the list has more than one value. However when the macro is called from A the size is correct. Can you please point out if there is something missing...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T03:10:40.337

我刚刚遇到了一个类似的问题，我发现了一篇有助于递归宏的帖子。

基本上它建议取消引用宏参数，而是使用本地副本，我相信这将解决问题......

所以试试

```
#macro (myMac $listOfValues)
#set ($localValues = $listOfValues) ##dereference parameters
#foreach ($val in ${localValues})
    #set ($subList = $val.child())
    #if (some condition)
        some output
        #if (${velocityCount} < ${localValues.size()})
            ,\n
        #end
    #else
        #myMac(${subList})  -- B
    #end
#end
#end
#myMac (${listOfValues})  -- A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:42:03.717

对#myMac 的每次调用都包含一个新的#foreach，每个#foreach 都会设置自己的$velocityCount

这是它被弃用的原因之一。您无法访问父级#foreach 的 $velocityCount。

在 v1.7 中，您可以将 $foreach.count 用于当前循环，将 $foreach.parent.count 用于父循环和 $foreach.parent.parent.count 等等。

或者你可以自己做柜台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:37:28.220

也许 velocityCount 不是为递归使用而设计的。速度有其局限性。您可以通过设置自己的计数器轻松解决问题。

# amazon-dynamodb - 在 dynamodb 中查询一系列主键

> ID：12939131
> 
> 赞同：2
> 
> 时间：2012-10-17T16:39:55.680
> 
> 标签：amazon-dynamodb

我想确保我做对了，
根据我到目前为止所读到的内容，你不能查询 dynamodb 中的一系列主键，
比如你有一个主键，它是你客户的电话号码之类的数字，你不能得到主键大于 3010000000 或介于 3010000000 和 3020000000 之间的项目
，我不是在谈论范围键，我的问题是关于主键本身，

所以如果这是真的，有很多用例，比如日期之间的项目，在某个时间点之后注册的用户，以及......，这需要表扫描，

它是否正确？

编辑：好的，想到的一种解决方案是仅使用一个虚拟 hash_key 作为主键，并将真实键（如上面的电话号码）插入范围键，这行得通吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T19:59:23.120

是的，您无法`hash_key`使用 DynamoDb 获得范围。但这并不意味着你被你的用例困住了。

让我们以“日期”用例为例，假设您正在构建一个日志记录应用程序。您每天可能会获得大量记录。

如果您使用日期作为 hash_key，您可以将完整的时间戳作为 range_key。这样，您可以将查询拆分为块并获得所需的内容。

当然，要获得最佳结果，您需要充分了解查询的类型。例如，典型范围是多少？使用 DynamoDb 以及其他 key:value 存储，您大多数时候在建模数据时考虑到查询，这与在建模时只考虑数据的 SQL 不同。

当然，如果您的物品跨越更大/更短的范围，只需调整此系统即可。

关于“所有人都在同一个假人下`hash_key`”听起来是个糟糕的主意。对不起。我不是百分百确定它是如何工作的，但我知道 DynamoDB 会跨所谓的分区进行一些分片。我相信`1 hash_key <=> 1 partitions`。此外，如果仔细阅读文档，您会注意到预置吞吐量在分区之间平均分配，因此每个分区只分配了您所支付费用的一小部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T06:42:17.857

在不修改主 DynamoDB 表的键的情况下，您可以添加具有恒定分区键的 GSI，并将主表的分区键作为其排序键。

这将使您能够查询索引的排序键并使用生成的分区键来获取您要查找的数据。

# .htaccess - 循环 htaccess 重写规则

> ID：12939132
> 
> 赞同：1
> 
> 时间：2012-10-17T16:39:56.020
> 
> 标签：.htaccess, rewrite

这似乎正是您想要对 htaccess 重写规则执行的操作。但我似乎无法让它正常工作。

我的网站上有这个页面：[http ://wireie.gocactus.com/network_extensions.php](http://wireie.gocactus.com/network_extensions.php)

我想将其重命名为：[http ://wireie.gocactus.com/transparent-ethernet-solutions](http://wireie.gocactus.com/transparent-ethernet-solutions)

所以这是我放在我的 htaccess 文件中的行：

```
RewriteRule ^transparent-ethernet-solutions network_extensions\.php [NC] 
```

好的。现在，如果我去`/transparent-ethernet-solutions`，效果很好。

问题是，它`/network_extensions.php`仍然很好用。所以我想用这一行重写那个url：

```
RewriteRule ^network_extensions\.php*$ /transparent-ethernet-solutions [R,NC] 
```

现在它给了我一个关于太多重定向的错误消息。如果我在没有第一行的情况下添加第二行，它会更改 PHP 链接上的 URL，但会在漂亮的链接重定向上给我一个“找不到页面”错误。

我的心都炸了。我可以在不转发的情况下重写 URL 并在不从旧 URL 重定向的情况下使新 URL 工作吗？我不确定第一行中是否缺少一些参数，或者一些必要的规则组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:12:51.667

这是您的 .htaccess 中需要的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^transparent-ethernet-solutions/?$ network_extensions.php [NC,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+network_extensions\.php\s [NC]
RewriteRule ^ transparent-ethernet-solutions [R=301,L] 
```

# ruby-on-rails - form_tag with post has a very weird behavior

> ID：12939141
> 
> 赞同：0
> 
> 时间：2012-10-17T16:40:43.673
> 
> 标签：ruby-on-rails, database, activerecord, post, get

I have a very weird behavior by Rails 3.2.

I use a form_tag in my haml page:

```
= form_tag messages_path, :method => :get do 
```

this form contains some checkboxes and this code works fine.

But I don't like get.

If I substitute "get" with "post" something really weird happens:

It appears that the control goes to my "create" method, creates a nil object in my db and then goes back to the original page (that's what I told the "create" method to do anyways).

Then, the checkboxes are pretty messed up...

Note: I save the checkbox contents in the session. Dunno, if it really matters.

Seems like "post" takes you to "create" by default ?? Can I change that ? "Get" works fine but messes up my url....

any suggestions ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:49:27.307

是的，默认情况下 post 将请求映射到控制器的 create 方法。

如果您想使用发布请求，请在 config/routes.rb 中添加以下代码

```
resources :messages do
  collection do
    post 'stuff'
  end
end 
```

在您的消息控制器中

```
def stuff
  #your stuff goes here
end 
```

然后表单生成器将是

```
form_tag stuff_messages_path, :method => :post 
```

# mysql - MySQL Workbench: Which collation will allow the widest range of characters, including foreign/acented characters?

> ID：12939142
> 
> 赞同：0
> 
> 时间：2012-10-17T16:40:44.193
> 
> 标签：mysql, sql, database, eer-model

I am creating an EER Model and want to find the collation that will provide me the most amount of characters to use. The characters that will be stored are generally standard English but on occasion the brands will have foreign and or accented characters. How can I ensure they are supported and not changed to squares or question marks down the road?

Generally I have them stored at UTF-16 but am not seeing that option available, in the default at least.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:55:30.893

您正在寻找的是**字符集**而不是**排序规则**。字符集定义了用于表示这些符号的符号集和编码。排序规则定义了用于比较给定字符集的字符并影响排序的规则。

Unicode 字符集提供最广泛的字符支持。MySQL 支持两种 Unicode 编码：

*   UTF8 - 最多使用 24 位来编码一个字符，向后兼容 ASCII 编码。
*   UCS2 - 始终使用 16 位对每个字符进行编码，与 ASCII 编码不兼容。

在这两个字符集中，MySQL 有多个排序规则，它们指定不同语言的排序规则、Unicode 规则和二进制比较规则。

查看： MySQL 参考手册中的[字符集支持](http://dev.mysql.com/doc/refman/5.1/en/charset.html)。

# python - 如何在字符串乘法中放置空格？

> ID：12939152
> 
> 赞同：1
> 
> 时间：2012-10-17T16:41:36.523
> 
> 标签：python, string

我正在做一个关于 ppm 文件的项目，我必须在其中拍摄图像并使其成为灰度并翻转图像。方法是取数字的平均值。

```
P3
255
....
200 200 200
300 300 300 
```

因此，平均值为 200 和 300。

```
Averages=[200,300]
for i in averages:
    print(str(i)*3,"\n") 
```

这给了我

```
200200200
300300300 
```

如何让它看起来像原版？我的方法是读取每一行作为字符串转换为列表，然后取每个列表的总和和平均值，然后像原始列表一样输出。这是解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:43:58.723

```
In [7]: for i in Averages:
        print(" ".join([str(i)]*3)+"\n")
   ...:  
   ...:  
200 200 200

300 300 300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:43:42.277

你可以用空格连接你的字符串：-

```
print((str(i) + ' ') * 3, "\n") 
```

或者： -

```
print(' '.join([str(i)]*3) + "\n") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:46:59.723

如何阅读python手册以进行[字符串格式化](http://docs.python.org/library/stdtypes.html#string-formatting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:47:35.087

如果你真的一次写 3 个元素，为什么不直接写：

```
print '{0} {1] {2}\n'.format(i,i,i) 
```

这对我来说似乎是最易读的方式......

# c# - 仅获取 XML 文档的一个属性

> ID：12939154
> 
> 赞同：2
> 
> 时间：2012-10-17T16:41:42.970
> 
> 标签：c#, xml, xml-serialization

我没有这方面的经验，所以也许我使用了错误的术语。

场景是这样的：我正在使用[https://stackoverflow.com/a/12309136/939213](https://stackoverflow.com/a/12309136/939213)中的代码将一个类实例序列化为一个文件。但是在某些时候我可能想稍微改变一下这个类，所以我想`int`在文件中插入一个告诉程序这是什么版本的类。

我尝试将 int 和 class 序列化到同一个文件中，但发现这是不可能的，所以我现在正在考虑`int`在 class 中有一个属性，并首先阅读它，以便知道应该反序列化哪个类。

那我一个`int`人怎么读呢？

编辑：例如，要阅读`myInt`以下内容：

```
<MyClass xml...> 
    <myInt>10</myInt> 
    <myString>abc</myString> 
</MyClass> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:41:35.083

如果您想要一个特定的答案，您需要提供一些示例 xml，否则您可以查看[Linq-To-Xml](https://www.google.com/search?q=linq+to+xml+c%23&rlz=1C1DVCC_enUS346&aq=1&oq=linq+to+xml&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:23:36.290

一条评论引导我找到解决方案：

```
XDocument xdoc = XDocument.Load(path);
int answer = (int)xdoc.Descendants("myInt").ToArray()[0]; 
```

# php - 在一台服务器上提交表单，对其进行处理，然后将结果发布到另一个域

> ID：12939156
> 
> 赞同：1
> 
> 时间：2012-10-17T16:41:52.783
> 
> 标签：php, forms

我在一个页面上有一个表单，操作设置为 /process.php

在 process.php 中，我验证了表单，并将它写入它所在的服务器上的数据库。

在它写入数据库后，我想做的是将变量发布到另一个域，然后以不同的方式处理这些变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:47:01.983

使用 curl 的示例：

```
$name = 'Test';
$email = 'test@gmail.com';

$ch = curl_init(); // initialize curl handle
$url = "http://domain2.com/process.php"; 
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_FAILONERROR, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 10); // times out after 10s
curl_setopt($ch, CURLOPT_POST, 1); // set POST method
curl_setopt($ch, CURLOPT_POSTFIELDS, "text=$name&name=$email"); // post fields
$data = curl_exec($ch); // run the whole process
curl_close($ch); 
```

不带卷曲的示例：[http ://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:26:13.233

你可以使用 file_get_contents 来做同样的事情。

例子：

```
$name="foobar";
$messge="blabla";

$postdata = http_build_query(
    array(
        'name' => $name,
        'message' => $message
    )
);

$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded',
        'content' => $postdata
    )
);

$context  = stream_context_create($opts);

$result = @file_get_contents('http://yourdomain.com/process_request.php', false, $context);

 if($http_response_header[0]=="HTTP/1.1 404 Not Found"):

            echo "iam 404";

 elseif($http_response_header[0]=="HTTP/1.1 200 OK"):

            echo "iam 200";

 else:

            echo "unknown error"; 

 endif; 
```

# playorm - 扫描的包裹

> ID：12939158
> 
> 赞同：1
> 
> 时间：2012-10-17T16:41:55.143
> 
> 标签：playorm

我有我的 Eclipse 工作区 2 项目：

1.  playOrm（它生成了一个 jar 文件）
2.  MyOwnProject（我使用上面生成的 jar 文件在 MyOwnProject 上使用类似 ORM 的 playOrm 到 Cassandra）

我的问题：

对于在 MyOwnProject 上定义的类，我如何才能使用在`com.alvazan.test.db`示例中定义的 User 类的相同好处？当我执行位于 MyOwnProject 的类时，playOrm 在我的键空间上创建它，并且还管理插入 ( `NoSqlEntityManager.put()`) 或查询 ( `@NoSqlQuery`)

我将这些注释放在我的类上，但是当我执行它们时出现错误消息：

```
java.lang.IllegalArgumentException: Entity type=com.s1mbi0se.dmp.da.bean.User was not scanned and added to meta information on startup.  It is either missing @NoSqlEntity annotation or it was not in list of scanned packages 
```

我尝试使用`@NoSqlEntity`注释定义我的类，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:49:59.087

您是否缺少 jar 文件或文件夹中的 nosql.Persistence.class 类？

如果是这样，请创建一个 nosql.Persistence.java 文件。

PlayOrm 扫描类路径上的所有 jar 和文件夹以查找 nosql.Persistence，并且仅扫描包含该文件的 jar 和文件夹。

为什么我们不像 JPA 那样使用 persistence.xml？

因为很多框架和IDE的螺丝persistence.xml只通过复制类文件所以我们使用一个类文件来兼容更多的框架。IE。比如 playframework.org，它是一个实时开发框架（当你改变东西时不需要重新启动服务器，因为我们所有的类都被重新扫描，但我们需要一个类文件来完成这个技巧）

如果您还没有尝试过 playframework.org，请试一试……它可以提高开发人员的工作效率。

后来，迪恩

# android - VideoView seekto() 函数极其不一致

> ID：12939159
> 
> 赞同：25
> 
> 时间：2012-10-17T16:42:00.813
> 
> 标签：android, android-videoview, seek

我正在尝试寻找 Android 视频中的特定位置，但由于其行为表现出的不一致，我完全被卡住了。这是我做过的事情的清单

> 1.  VideoView.Seekto 为一个视频进入 5:19，一个视频为 5:17，另一个视频为 5:32，相同毫秒（326000 毫秒）！
> 2.  由于 VideoView 不支持 onSeekListener，所以我修改了源 VideoView 并添加了对它的支持。然而它并没有停下来从我想要的地方开始寻找——总是有一个滞后！onSeekListener 在我希望它停止之前大约 6 秒被立即调用。在许多情况下，即使我从 onSeekCompleteListener 调用 video.start，搜索栏也会显示正确的时间并突然跳回几秒钟

为什么这如此不一致？在视频视图中是否有明确的方法可以在几毫秒内找到您想去的地方？我知道我应该使用 MediaPLayer + Surface 但由于 VideoView 只是两者的包装，我在源代码处对其进行了修改但无济于事。

我知道这一点：[http](http://code.google.com/p/android/issues/detail?id=9135) ://code.google.com/p/android/issues/detail?id=9135 但是有没有办法解决这个问题并有明确的方法

> 1.) 以毫秒为单位寻找确切的时间
> 
> 2.) 在准确的时间暂停和恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-12T19:34:58.957

**您必须等待搜索完成。**

VideoView 没有 OnSeekCompleteListener()，但您可以从 VideoView 的 onPrepared 方法访问 MediaPlayer，然后设置 OnSeekCompleteListener，如下所示：

```
videoView.setOnPreparedListener(new OnPreparedListener() { 
    @Override 
    public void onPrepared(MediaPlayer mp) {

        mp.setOnSeekCompleteListener(new OnSeekCompleteListener() {
            @Override 
            public void onSeekComplete(MediaPlayer mp) {
                //Seek completed. Move seekbar
            } 
        }); 

    } 
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-15T11:12:57.140

我知道这不是您问题的正确解决方案，但请查看通过 Google 的默认视频视图制作的这个库

[https://github.com/brianwernick/ExoMedia](https://github.com/brianwernick/ExoMedia)

它具有默认视频视图支持的所有功能和更多功能。

您可以使用此视频视图并`emVideoView.seekTo(1000);`在视频中跳转到 1000 毫秒。搜索完成时，您还必须`setOnSeekCompletionListener`执行处理。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-30T15:31:39.673

我这样解决了这个问题

[seekTo() 函数在 VideoView 中不起作用](https://stackoverflow.com/questions/10328854/the-seekto-function-doesnt-work-in-videoview/15720183#15720183)

# java - 集合类型转换实用程序方法是否已经存在于任何 API 中？

> ID：12939163
> 
> 赞同：0
> 
> 时间：2012-10-17T16:42:06.507
> 
> 标签：java, generics, collections

```
interface TypeConverter<T, E> {
     T convert(E e);
}
class CollectionUtil() {
     public static <E> List<T> convertToList(List<E> fromList, TypeConverter<T, E> conv) {
     {
            if(fromList== null) return null;
            List<T> newList = new ArrayList<T>(fromList.size())  
            for(E e : fromList) 
            {
                newList.add(conv.convert(e));
            }
            return newList;
     } 
} 
```

上面的代码解释了通过实现 String、Integer 的 TypeConverter 接口从 String 列表转换为 Integer 列表。任何 API（如要设置的列表等）中是否已经存在任何集合转换实用程序方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:53:41.857

# 在番石榴中：

```
List<String> strings = Arrays.asList("1", "2", "3");
List<Integer> integers =
        Lists.transform(strings, new Function<String, Integer>() {
            @Override
            public Integer apply(String input) {
                return Integer.parseInt(input);
            }
        }); 
```

### 马文

```
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>13.0</version>
</dependency> 
```

# 在[Collections 15 包](http://collections15.sourceforge.net/)中：

```
final List<Integer> integers =
        ListUtils.transformedList(strings, new Transformer<String, Integer>() {
            @Override
            public Integer transform(String s) {
                return Integer.parseInt(s);
            }
        }); 
```

### 马文

```
<dependency>
    <groupId>net.sourceforge.collections</groupId>
    <artifactId>collections-generic</artifactId>
    <version>4.01</version>
</dependency> 
```

# 在[函数式 Java中](http://functionaljava.org/)

```
List<Integer> integers = List.list("1", "2", "3").map(new F<String, Integer>() {
    @Override
    public Integer f(String s) {
        return Integer.parseInt(s);
    }
}); 
```

### 马文

```
<dependency>
    <groupId>org.functionaljava</groupId>
    <artifactId>functionaljava</artifactId>
    <version>3.1</version>
</dependency> 
```

请注意，此库使用不同的集合集。

...在 Scala 中的奖励：

```
Seq("1", "2", "3") map {_.toInt} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:50:49.077

尝试：

*   [函数](http://code.google.com/p/functionaljava/)式Java - [List.map](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/List.html#map%28fj.F%29)
*   [番石榴](http://code.google.com/p/guava-libraries/)- [Lists.transform](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Lists.html#transform%28java.util.List,%20com.google.common.base.Function%29)
*   [lambdaj -](http://code.google.com/p/lambdaj/)[在此处](http://code.google.com/p/lambdaj/wiki/LambdajFeatures)查找转换示例

# php - 如何从我选择的 cat_id 中调用 cat_name？MYSQL

> ID：12939166
> 
> 赞同：-4
> 
> 时间：2012-10-17T16:42:10.223
> 
> 标签：php, mysql

下面我在我的 phpmyadmin 中创建了一个 MySQL 表。

![在此处输入图像描述](../Images/3a02ae7132d6358fbda4c11987244c61.png)

我想在我的 php 页面上打印我选择的 cat_id 的 cat_name。我会为此使用什么代码？我在[这里查看本指南](http://www.w3schools.com/php/php_mysql_select.asp)但我没有完全弄清楚也许有人可以引导我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:43:51.903

您需要为此使用`WHERE`子句。基本上它的作用是过滤你想要的记录。

```
SELECT Cat_Name
FROM category
WHERE CAt_ID = 1   -- place the value of your desired category id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:50:45.150

有这么复杂吗？？

```
$result = mysql_query("SELECT * FROM yourtablename WHERE cat_id='yourcatidhere' ");

while($row = mysql_fetch_array($result))
  {
  print_r($row);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:52:27.670

```
<?php
    if(isset($_POST['submit'])) {
        $cat_id = isset($_POST['cat_id'])? (int)$_POST['cat_id']: 0;
        $query = mysql_query("SELECT cat_name FROM category WHERE cat_id = '$cat_id'");
        $cat_name = mysql_fetch_row($query);
    }
?>

<form method="POST" action="">
    Category ID: <input type="text" name="cat_id" />
    <input type="submit" name="submit" value="Get Category Name" />
</form>

<?php echo isset($cat_name)? $cat_name: ''; ?> 
```

# java - 更新分位数而不是重新计算

> ID：12939179
> 
> 赞同：0
> 
> 时间：2012-10-17T16:42:58.007
> 
> 标签：java, math, statistics, colt

是否有一个 java 库允许我通过添加/删除数据点来更新而不是重新计算大量数据样本集的分位数？我的猜测是，一个有效的算法应该花费恒定的时间进行更新（不是已经存在的点数的函数）。

列出了已知的算法，但没有办法从样本集中删除点：

*   [Colt Stream Quantiles](http://acs.lbl.gov/software/colt/api/hep/aida/bin/QuantileBin1D.html)：一旦添加，这个就无法删除一条数据
*   [Apache Math Percentile](http://commons.apache.org/math/api-1.0/org/apache/commons/math/stat/descriptive/rank/Percentile.html)：这只是计算数组的分位数，无法从数组中删除数据。

这是一个示例问题：假设我想计算一组风车的任意但恒定的百分位风扇速度（作为风速的估计值）。风扇速度每隔几毫秒异步更新一次。这个库应该允许我一次更新一个风车的风速，而不必重新计算中位数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:03:58.597

如果您维护数据的可更新排序表示，则只需使用数组的长度即可轻松高效地获取分位数。例如，如果您有 N 个元素，则中位数将位于位置 N/2，依此类推。当您在数据结构中插入一个新元素时，它仍然成立。效率仅取决于插入新元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:46:00.457

您可以拥有多批数据。您可以结合这些批次的百分位数/四分位数来估算总和。好处是您可以有效地丢弃多个批次，而无需重新计算其他批次。

# ember.js - ember.js 路由层次结构

> ID：12939183
> 
> 赞同：0
> 
> 时间：2012-10-17T16:43:19.847
> 
> 标签：ember.js, ember-old-router

我想要路由层次结构。因此，如果 URL “#/user/123”和“#/user/123/albums”能够正常工作，那就太好了。我想这样做：

```
App.Router = Em.Router.extend({
  root: Em.Route.extend({
    index: Em.Route.extend({
      route: '/'
    }),
    user: Em.Route.extend({
      route: '/user/:login',
      connectOutlets: function(router, context){
        router.get('applicationController').connectOutlet('user', context);
      },
      albums: Em.Route.extend({
        route: '/albums',
        connectOutlets: function(router){
          router.get('applicationController').connectOutlet('albums');
        }
      })
    })
  })
}); 
```

不是这样：

```
App.Router = Em.Router.extend({
  root: Em.Route.extend({
    index: Em.Route.extend({
      route: '/'
    }),
    user: Em.Route.extend({
      route: '/user/:login',
      connectOutlets: function(router, context){
        router.get('applicationController').connectOutlet('user', context);
      }
    }),
    albums: Em.Route.extend({
      route: '/user/:login/albums',
      connectOutlets: function(router){
        router.get('applicationController').connectOutlet('albums');
      }
    })
  })
}); 
```

我的第一个代码示例 sims 很傻，但我想要路由层次结构。有没有这样的能力？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:44:15.587

这种事情当然是可行的。有很多嵌套路由的例子。[我无法根据实际应用检查您的特定路由器，但在Ember Application Structure guide](http://emberjs.com/guides/outlets/)中有一个非常长的示例。请参阅嵌套部分。你会发现这个：

```
post: Ember.Route.extend({
  route: '/posts/:post_id',
  connectOutlets: function(router, post) {
    router.get('applicationController').connectOutlet('post', post);
  },
  index: Ember.Route.extend({
    route: '/',
    redirectsTo: 'comments'
  }),
  comments: Ember.Route.extend({
    route: '/comments',
    showTrackbacks: Ember.Route.transitionTo('trackbacks'),
    connectOutlets: function(router) {
      var postController = router.get('postController');
      postController.connectOutlet('comments', postController.get('comments'));
    }
  }),
  trackbacks: Ember.Route.extend({
    route: '/trackbacks',
    showComments: Ember.Route.transitionTo('comments'),
    connectOutlets: function(router) {
      var postController = router.get('postController');
      postController.connectOutlet('trackbacks', postController.get('trackbacks'));
    }
  })
}) 
```

# jquery - jQuery：使用 Live() 防止远程 Rails 表单提交

> ID：12939185
> 
> 赞同：1
> 
> 时间：2012-10-17T16:43:22.320
> 
> 标签：jquery, ruby-on-rails, ajax, forms

我在 jQuery 中有一个远程提交的表单：

```
<%= form_for @order, :remote => true do |f| %> 
```

在客户端上，我绑定到表单提交事件（在咖啡脚本中）：

```
 $('#new_order').live 'submit', (e) -> 
```

我想阻止rails远程表单提交，但我似乎无法让它工作，我试过了：

```
 e.preventDefault()
 e.stopPropagation()
 return false 
```

这些似乎都不起作用。我对 Rails 还很陌生，所以我想知道我是否遗漏了有关远程提交处理程序的某些内容？

编辑：

我发现如果我使用`bind`而不是`live`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:01:16.320

似乎问题在于 live 无法可靠地阻止文档中前面绑定的默认操作：

[http://api.jquery.com/live/](http://api.jquery.com/live/)

> 在事件处理程序中调用 event.stopPropagation() 无法停止附加在文档下方的事件处理程序；该事件已传播到文档。”

使用：

```
 $('#new_order').on 'submit', (e) -> 
```

成功了！

# symfony - 在表单中设置默认值

> ID：12939186
> 
> 赞同：2
> 
> 时间：2012-10-17T16:43:24.333
> 
> 标签：symfony

我想在我的表单中默认设置一个值。

我正在这样做，但没有奏效：

```
$builder->add('points', 'hidden', array(
            'data' => 5000)); 
```

任何想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:47:24.233

如果要默认设置某些内容，请在模型对象上正确设置：

```
$model = new Model;
$model->setPoints(5000);

$form = $this->createForm('type', $model); 
```

或者更好的是，如果有意义，请将其设置为模型的属性或构造函数：

```
class Model 
{
    private $points = 5000;

    // or
    public function __construct()
    {
        $this->points = 5000;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T15:59:55.803

使用 'empty_data' 而不是 'data'

```
$builder->add('points', 'hidden', array(
        'empty_data' => 5000)); 
```

# grails - 带有分类器的 grails 插件依赖项

> ID：12939189
> 
> 赞同：1
> 
> 时间：2012-10-17T16:43:25.367
> 
> 标签：grails

在 Grails 1.3.7 中，我试图用分类器声明对插件的依赖。我尝试了以下方法：

```
plugins {
    compile group: 'org.foo', name: 'myplugin', version: '0.8', classifier: 'grails1'     
} 
```

但它不起作用。如果我在版本中没有分类器的情况下重新部署插件（到本地 Artifactory）并从依赖项声明中删除分类器，它就可以工作。

# java - 案例工具可用于

> ID：12939191
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:43:34.160
> 
> 标签：java, html, oracle, javabeans, case-tools

是否有任何可用的案例工具支持 html5 用于前端，java 用于业务逻辑和 oracle 用于数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:06:12.240

j开发者。虽然，JDeveloper 12c 支持 HTML5 代码洞察。有关详细信息，请参阅[此](http://www.oracle.com/technetwork/middleware/downloads/index-087510.html)。

# c# - 带有用户添加字段的 .net 文本框

> ID：12939195
> 
> 赞同：3
> 
> 时间：2012-10-17T16:43:56.730
> 
> 标签：c#, .net, vb.net, mailmerge

我想创建一个控件类，允许用户像普通文本框一样键入文本。但是，它应该具有“邮件合并字段”功能，允许用户从列表中插入字段。然后将在稍后阶段为人口确定该字段。例如

您的订单已由 sales_person 处理，并将按时发送。

在上面的示例中，用户键入“您的订单由处理”并从字段列表中选择 sales_person。该列表将是另一个控件，例如列表框，因此该控件类将具有类似于可以调用的 insertField 方法的东西。

在稍后阶段，该字段将被填充，因此它必须在代码中可识别。此外，用户应该能够使用其字段保存和检索该短语。

这个 UI 非常类似于在 MS Word 中构建邮件合并文档。

任何人都可以提供建议和/或资源来实现这一目标。我宁愿建立自己的控制，也不愿使用第三方，但我需要指导。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:10:29.987

尝试使用**[System.Windows.Forms.RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)**，它将允许您使用**Find()**函数标记占位符，然后更改**SelectionFont**、**SelectionColor**或**SelectionBackColor**

# service - 设备收到 GCM IntentService 消息时刷新 ListView

> ID：12939197
> 
> 赞同：0
> 
> 时间：2012-10-17T16:44:01.110
> 
> 标签：service, android-listview, google-cloud-messaging

我的应用程序能够从 GCM 接收消息并将消息保存到手机上的 SQLlite 数据库。这些消息在具有列表视图的活动中是可见的。

在下面的代码中，onPause() 函数刷新了 listView。这不是一个好的实现，因为它仅在更新时未显示活动时才有效。如果活动在更新时显示，则列表是静态的并且不会更新。

问题：

1.  显示活动时如何更新列表视图？或者有没有办法使用后台服务来更新适配器，这样每当显示活动时，它总是显示最新的数据。

2.  这种功能目前在 android 上是不可能的，我需要实现一些其他的东西，比如“pull-to-refresh”？

**在 OnResume() 中刷新 listview 会使应用程序崩溃，并显示空指针异常。**

活动：

```
public class NotesView extends Activity implements OnItemClickListener {

    ListView listView;
    NoteAdapter objAdapter;
    NotificationsDatabase db = new NotificationsDatabase(this);
    List<Notes> listAlerts;
    String note;
    String time;
    TextView noteView;
    TextView timeView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.note);

        listView = (ListView) findViewById(R.id.notelist);
        listView.setOnItemClickListener(this);
        noteView = (TextView) findViewById(R.id.noteDisplay);
        timeView = (TextView) findViewById(R.id.notetimeStampDisplay);
        new MyTask().execute();

    }

    // My AsyncTask start...
    class MyTask extends AsyncTask<Void, Void, List<Notes>> {

        ProgressDialog pDialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            pDialog = new ProgressDialog(NotesView.this);
            pDialog.setMessage("Loading...");
            pDialog.setCancelable(false);
            pDialog.show();

            if (isCancelled()) {

                this.cancel(true);
            }

        }

        @Override
        protected List<Notes> doInBackground(Void... params) {

            db.open();
            listAlerts = db.getData();

            if (isCancelled()) {

                this.cancel(true);
            }

            return null;
        }

        protected void onPostExecute(List<Notes> alerts) {

            if (null != pDialog && pDialog.isShowing()) {
                pDialog.dismiss();
            }
            db.close();
            setAdapterToListview();

        }

    }// end myTask

    public void setAdapterToListview() {

        objAdapter = new NoteAdapter(NotesView.this, R.layout.row_notes, listAlerts);
        objAdapter.sortByNoteDesc();
        objAdapter.notifyDataSetChanged();
        listView.setAdapter(objAdapter);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            Intent intent = new Intent(
                    NotesView.this.getApplicationContext(),
                    TabBarExample.class);
            intent.putExtra("goToTab", "Alerts");
            startActivity(intent);
            return true;
        }

        return super.onKeyDown(keyCode, event);
    }

    public void onItemClick(AdapterView<?> parent, View viewDel, int position,
                            long id) {

        for (int i = 0; i < 1; i++) {
            Notes item = listAlerts.get(position);
            int ids = item.getId();
            note = item.getNote();
            time = item.getTimeStamp();

        }

        System.out.println(note + "  " + time);

        //      
    }

    @Override
    protected void onResume() {

        super.onResume();

    }

    @Override
    protected void onPause() {
        super.onPause();

        setContentView(R.layout.note);

        listView = (ListView) findViewById(R.id.notelist);
        listView.setAdapter(null);
        listView.setOnItemClickListener(this);
        noteView = (TextView) findViewById(R.id.noteDisplay);
        timeView = (TextView) findViewById(R.id.notetimeStampDisplay);
        new MyTask().execute();

    }

    @Override
    protected void onDestroy() {

    }

} 
```

来自 GCMIntentService 的代码片段

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    //String message = getString(R.string.gcm_message);

    System.out.println("onMessage: ");

    Bundle extras = intent.getExtras();

    String message = extras.getString("message");
    String event_id_from_server = extras.getString("server_id");
    //    displayMessage(context, message);
    generateNotification(context, message);
    saveMsg(message);

    System.out.println("server id is " + event_id_from_server);

    if (event_id_from_server != null) {

        updateLocalDatabase(event_id_from_server);

    }

}

public void saveMsg(String msg) {

    boolean worked = true;
    try {

        NotificationsDatabase entry = new NotificationsDatabase(GCMIntentService.this);
        entry.open();
        java.util.Date date = new java.util.Date();
        Timestamp x = new Timestamp(date.getTime());

        String timeStamp = x.toLocaleString();
        entry.createEntry(msg, timeStamp);

        entry.close();

        //update adapter service

    } catch (Exception e) {
        worked = false;
        String error = e.toString();
        System.out.println(error);
    } finally {
        if (worked) {

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:23:48.337

我稍微清理了你的代码。基本上所有的视图分配都应该在 onCreate 中完成一次，而数据的加载应该在 onResume() 中完成。看看这是否有帮助：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.note);
   listView = (ListView) findViewById(R.id.notelist);
   listView.setAdapter(null);
   listView.setOnItemClickListener(this);
   noteView = (TextView) findViewById(R.id.noteDisplay);
   timeView = (TextView) findViewById(R.id.notetimeStampDisplay);
}

@Override
protected void onResume() {
   super.onResume();
   new MyTask().execute();
}

@Override
   protected void onPause() {
   super.onPause();
} 
```

# jquery - jquery find() - 如何排除某些后代及其孩子？

> ID：12939198
> 
> 赞同：3
> 
> 时间：2012-10-17T16:44:00.793
> 
> 标签：jquery, jquery-selectors

我有类似这样的标记：

```
<div class='wrapper plugin'>
    //some content
    <div class='child-wrapper plugin'>
      //some more content
      <div>
        <ul>     
          <li><div class='cliky'>clicky!</div></li>
        </ul>
      </div>
    </div>
  <div class='cliky'>clicky!</div>
</div> 
```

**我只**需要能够选择第**一个** `.clicky`div ，而不是div 内的 任何div。**`.clicky``.plugin > .plugin`**

 **包装器也有`.plugin`类 - 可能看起来违反直觉，所以另一种查看方式是：我想获取`.clicky`给定`.plugin`div 的子级，但不是`.plugin .plugin .clicky`.

我试过像这样的选择器：

`$('.wrapper').find('.clicky').not('.plugin > .clicky');`

但他们仍然选择了所有子`.clicky`元素——包括那些嵌套`.plugin`元素。

我如何才能只选择`.plugin .clicky`特定`.plugin`div 的元素，而不选择任何`.plugin .plugin .clicky`元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:56:49.627

试试这个：

```
$('.wrapper .clicky').filter(function(){
   return $(this).parents('.plugin').length === 1
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:47:29.157

```
$('.wrapper').find('.plugin .clicky')[0]; 
```

应该返回“找到”数组的第一个元素。如果需要将结果合并到 jquery obj 中，只需重新获取它。

```
var t = $( $('.wrapper').find('.plugin .clicky')[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T18:04:45.783

您可以使用：

```
$('.wrapper .cliky').not('.plugin > .plugin .cliky'); 
```

或者

```
$('.wrapper .cliky:not(.plugin > .plugin .cliky)'); 
```

在 jQuery 1.9 中测试**

# css - IE7中的css问题，不知道如何解决

> ID：12939199
> 
> 赞同：1
> 
> 时间：2012-10-17T16:44:02.930
> 
> 标签：css, internet-explorer, cross-browser

在 Internet Explorer 中访问：[http](http://appointview.com/pricing) ://appointview.com/pricing （我使用的是版本 9，但在开发工具中将其设置为 IE7 模式）。

这两个 div 并没有像在更高版本的 IE 中那样排列在顶部，并且在 FF 和 Chrome 中也可以正常工作。我已经非常彻底地检查了这些元素，但无法弄清楚问题是什么。

我不是最擅长跨浏览器兼容性测试的，所以也许有一个快速简单的修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:55:02.167

IE7是一团糟。`div`尝试删除s 之间、关闭`</div>`和打开之间的任何空格`<div>`。

例如，来自：

```
 <div>
      First one
  </div>
  <div>
      Second one
  </div> 
```

至：

```
 <div>
      First one
  </div><div>
      Second one
  </div> 
```

这是一个非常常见的错误。s之间的空格`inline-block`是有问题的。尝试使用鼠标选择两个 div，您会注意到有一个空白字符占据了第二个上方不需要的空间`div`。

# jquery - 使用 jQuery 动态创建链接

> ID：12939206
> 
> 赞同：2
> 
> 时间：2012-10-17T16:44:23.450
> 
> 标签：jquery

我正在尝试使用 jQuery 在 blockquote 元素中创建一个链接。现在我处于这个阶段：

```
var pullQuote = $('span.pull-quote').each(function(){

    var $this = $(this),
    hrefLink = 'http://example.com',
    text = $this.text();

    $('<blockquote>', { 
        class: 'quote',
        text: text 
    }).prependTo( $this.closest('p'));

}); 
```

这将创建带有动态文本的块引用元素，但我想将文本转换为块引用内的链接。href 不会改变，所以我可以将它设置在一个变量中，就像我已经拥有它一样。

我可以添加一些东西来在块引用内创建 a 标签到我仍然可以使用设置变量的地方吗？（这是我一直在尝试做的）还是我只需要运行这个函数然后创建一个新函数来处理添加链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:50:40.020

```
$('<blockquote/>', { 
    class: 'quote',
    html: $('<a/>', {
        text: text,
        href: hrefLink
    )}
}).prependTo( $this.closest('p')); 
```

如果我理解正确，您只是想在块引用中构造一个锚元素并给出文本和链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:51:04.167

```
var $this = $(this);
hrefLink = 'http://example.com';
text = $this.text();

var blockQ=$('<blockquote class="quote">
                           <a href="'+hrefLink+'">'+text+'</blockquote>');
blockQ.prependTo( $this.closest('p')); 
```

演示：http: [//jsfiddle.net/QGtYQ/5/](http://jsfiddle.net/QGtYQ/5/)

# entity-framework - 为什么输出总是“System.Object”

> ID：12939211
> 
> 赞同：1
> 
> 时间：2012-10-17T16:44:47.643
> 
> 标签：entity-framework, c#-4.0

在 EF 中，我想获取查询的第一个值，所以我使用

```
ExecuteStoreQuery<object>(Query, null).FirstOrDefault(); 
```

因为如果值 comming 是 numeric 是 crash ，我不知道实际返回的数据类型是什么，所以我使用了以下

```
ExecuteStoreQuery<object>(Query, null).Select(x => x.ToString()).FirstOrDefault() 
```

但结果字符串总是`System.Object`

任何想法如何获得实际价值

此致

# php - 尝试使用 foreach 在函数中生成增量数字

> ID：12939213
> 
> 赞同：0
> 
> 时间：2012-10-17T16:44:53.963
> 
> 标签：php

这个函数创建`<li>`标签，我试图给每个`li`标签一个唯一的 CSS 类名，我试图创建一个`for`循环来生成数字，但这会产生数字 7，而不是倒数到`<li>`标签中的数字 7。

非常感谢任何帮助！

```
function the_meta() {

if ( $keys = get_post_custom_keys() ) {
    echo "<ul class='post-meta'>\n";

 //tried to add this counter here to generate incremental numbers in the foreach loop
    for ($i = 0; $i <= 6; $i++) { } 

    foreach ( (array) $keys as $key ) {
        $keyt = trim($key);
        if ( is_protected_meta( $keyt, 'post' ) )
            continue;
        $values = array_map('trim', get_post_custom_values($key));
        $value = implode($values,', ');

        echo apply_filters('the_meta_key', "<li class='$i'><span class='post-meta-key'>$key:</span> $value</li>\n", $key, $value);

    }

    echo "</ul>\n";
}
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:48:07.357

这行代码：

```
for ($i = 0; $i <= 6; $i++) { } 
```

只会增加 $i 直到它达到 6，所以当你进入“主循环”时，变量`$i`将具有相同的值。为什么要计算另一个循环？

您可以在当前循环中实现计数器：

```
$i = 1; //Before the loop , set a starting value.
    foreach ( (array) $keys as $key ) {
        $keyt = trim($key);
        if ( is_protected_meta( $keyt, 'post' ) )
            continue;
        $values = array_map('trim', get_post_custom_values($key));
        $value = implode($values,', ');

        echo apply_filters('the_meta_key', "<li class='$i'><span class='post-meta-key'>$key:</span> $value</li>\n", $key, $value);
$i++; //Increase by one!!
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:47:00.303

最初的 for 循环并没有真正做任何事情（如您所述），只需将变量初始化为 0，然后在每次使用时打印并递增它：

```
function the_meta() {

if ( $keys = get_post_custom_keys() ) {
echo "<ul class='post-meta'>\n";
$i=0;
foreach ( (array) $keys as $key ) {
    $keyt = trim($key);
    if ( is_protected_meta( $keyt, 'post' ) )
        continue;
    $values = array_map('trim', get_post_custom_values($key));
    $value = implode($values,', ');

    echo apply_filters('the_meta_key', "<li class='".$i++."'><span class='post-meta-key'>$key:</span> $value</li>\n", $key, $value);

}

echo "</ul>\n";
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:48:35.353

你的 for 循环只是迭代什么都不做。你必须使用：

```
$i = 0;
foreach ( (array) $keys as $key ) {
   // ...
   $i++;
} 
```

# delphi - 从 C 头文件自动创建 Delphi/Freepascal 接口单元

> ID：12939214
> 
> 赞同：8
> 
> 时间：2012-10-17T16:44:53.467
> 
> 标签：delphi, pascal, freepascal, hdf5

是否可以从 C 头文件自动生成接口单元？特别是，我想包装HDF5库，如果我可以避免手动编写接口单元，那就太好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T16:48:47.637

免费的 pascal 包括[H2PAS](http://www.freepascal.org/tools/h2pas.var)工具。

> **h2pas**尝试将 C 头文件转换为帕斯卡单位。它可以处理在 C 头文件中找到的大多数 C 构造，并尝试将它们转换为它们的帕斯卡对应物。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T16:50:29.050

Bob Swart ( [Dr Bob](http://www.drbob42.com) ) 有一个实用程序，它可以转换很多头文件（尽管通常也涉及一些手动工作），称为[HeaderConvert](http://www.drbob42.com/headconv/)。我从未将它与工具@RRUZ 链接进行比较，但这是另一种选择。

[JEDI 项目](http://www.delphi-jedi.org)也有一个；我从来没有测试过它。你可以在[这里](http://www.delphi-jedi.org/api-howto.html)找到它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T21:03:59.687

通常，将 C 标头**全自动**转换为其他内容（这不是所需 C 功能的有效超集）**几乎是不可能的**。

这是因为由于宏，人们看不到如何翻译它们。宏通常只能从上下文中获取其含义。例子

```
#define uglymacro 1,2,3,4 
```

而且（这个更常见）：

```
SCARYAPIMACRO void func(int c); 
```

SCARYAPIMACRO 通常是一个宏，用于测试操作系统定义以选择正确的操作系统/架构的正确调用约定。

不过，这并不意味着这些工具不能真正节省时间。但结果是更半自动的，我对 h2pas 有最多和最好的体验。

我已经翻译了很多 Windows 标头（包括 FPC 的 commctrl，它每隔几行就有一个 sendmessage 宏）。

我通常做的是制作一个小的 pascal 程序，它扫描基于行的源代码并使用启发式方法将其拆分为大部分同质的部分（所有结构或常量、宏、过程声明等）。然后我看源码，经常做一些全局替换。

只有这样我才能通过翻译器运行它，该过程通常是迭代的（细化分离，进行全局替换，尝试翻译，如果失败，再试一次等​​）。

不幸的是，这个过程确实需要很好地掌握 C，包括 pragma 的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T13:27:06.253

您可以从我的页面下载 HDF5 API 标头 Delphi 翻译、带有源代码的 Delphi XE2 HDF5 表测试程序和稍加修改的 hdf5dll： [http ://www.astro.ff.vu.lt/index.php?option=com_content&task=view&id= 46&Itemid=63](http://www.astro.ff.vu.lt/index.php?option=com_content&task=view&id=46&Itemid=63)

# mysql - 产品数据库架构重新设计

> ID：12939217
> 
> 赞同：1
> 
> 时间：2012-10-17T16:44:58.757
> 
> 标签：mysql, database, database-design

我设计我的商店来销售定制加工零件。目前我的产品实际上是一个产品包（选项）。架构如下所示：

```
types
    id, name

products
    id, type_id, name

optiontypes
    id, name

options
    id, type_id, name

product_option
    id, product_id, option_id

carts
    id, session, product_id

cart_option
    id, cart_id, option_id

orders
    id, name

order_option
    id, order_id, option_id 
```

我的问题是我有回头客，他们已经购买了包裹，现在想购买单件进行更换。我正在考虑将选项类型合并到类型中，并将选项合并到产品中，但是我将如何确定什么是打包产品或单个产品？

### 编辑

在阅读了关于 BOM - 来自 pst 的评论的模块化材料清单后，这是我想要做的：

```
------------------------------------

ORDER: 1001

package1
    module1
        component1
        component2
    module2
        component3
        component4
        component5

------------------------------------

ORDER: 1002

component1
component5

------------------------------------

ORDER: 1003

package2
    module1
        component1
    module2
        component3

------------------------------------ 
```

我将如何去寻找一个解决方案以兼顾两者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:00:11.497

好的，所以一个*包*包含一个或多个*部分*。客户可以*订购*一个或多个*包裹*和/或一个或多个*零件*。由于我不知道一个选项可能是什么，我或多或少地将它与 *part_type* 合并，所以也许你有一个**铝**部件类型以及一个**预钻孔铝**部件类型。

您的*订单*会跟踪订购了哪些*包裹*以及订购了哪些单独的*零件*。如果我对您的理解正确，作为包装组件出售的零件或单独出售的零件之间没有物理区别 - 您只需要能够跟踪它是如何购买的。像这样设置可以让你跟踪它。

```
packages
    id              unsigned int(P)
    description     text // This package contains all the parts you need to build SuperMegaWidget!

packages_parts
    id              unsigned int(P)
    package_id      unsigned int(F packages.id)
    part_id         unsigned int(F parts.id)

part_types
    id              unsigned int(P)
    name            varchar(50) // Aluminum, Brass, whatever, etc.

parts
    id              unsigned int(P)
    part_type_id    unsigned int(F part_types.id)
    name            varchar(50) // Widget A, Widget B, etc.

orders
    id              unsigned int(P)
    ... lots of other information in here

orders_packages
    id              unsigned int(P)
    order_id        unsigned int(F orders.id)
    package_id      unsigned int(F packages.id)

orders_parts
    id              unsigned int(P)
    order_id        unsigned int(F order.id)
    part_id         unsigned int(F parts.id) 
```

# c++ - 在 C++ 中定义线程

> ID：12939220
> 
> 赞同：2
> 
> 时间：2012-10-17T16:45:11.517
> 
> 标签：c++, winapi

如何使用 启动线程`_beginthreadex()`，使其执行`void myFunction(wchar_t *param);`？我尝试使用这个：

```
_beginthread(NULL, 0, myFunction, L"someParam", 0, &ThreadID); 
```

但有编译错误：

> 错误 C2664：“ *beginthreadex”：无法将参数 3 从“void (* _cdecl *)(wchar_t *)”转换为“unsigned int (__stdcall *)(void *)”。

我该如何解决这个错误？我似乎能够做到`_beginthread((void(*)(void*))myFunction, 0 , (void *)L"someParam");`。但是对于`_beginthreadex()`这些演员表似乎不起作用。我需要做什么？此代码不输出任何内容。怎么了？

```
unsigned int __stdcall myFunction( void *someParam )
{
    printf("Hello world!");
    return 0;
}

int _tmain(int argc, _TCHAR* argv[])
{
    _beginthreadex(NULL, 0, myFunction, L"param", 0, NULL);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:47:11.137

`_beginthreadex`需要一个使用`__stdcall` [调用约定](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/15/58973.aspx)的函数，而不是`__cdecl`默认的调用约定。要修复它，请使用`__stdcall`调用约定声明您的线程过程：

```
unsigned int __stdcall myFunction(void *arg)
{
    ...
} 
```

不要强制转换您要传入的函数指针，`_beginthread`或者`_beginthreadex`：[函数指针强制转换是一个等待发生的错误](http://blogs.msdn.com/b/oldnewthing/archive/2011/05/06/10161590.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T17:03:24.510

每个 Microsoft CRT 线程启动函数的函数原型要求是：

*   **[_开始线程](http://msdn.microsoft.com/en-us/library/kdzttdcb%28v=vs.80%29.aspx)**：`void __cdecl procname(void * arg);`

*   **[_beginthreadex](http://msdn.microsoft.com/en-us/library/kdzttdcb%28v=vs.80%29.aspx)**：`unsigned int __stdcall procname(void *arg);`

您还应该了解两者之间的差异。

*   **_beginthread**：分配一个新线程并调用作为参数传递的线程过程。使用此 API，线程创建参数有些受限。这个函数的返回值是一个uintptr_t，但实际上是一个HANDLE类型的Windows线程句柄。它必须转换为 HANDLE 变量才能在诸如 等函数中使用`WaitForSingleObject`。当线程过程通过正常的函数退出完成时，运行时会自动为您关闭线程句柄。**这很重要**。虽然这个函数像_beginthreadex一样返回一个线程句柄，但是可以想象线程的开始*和结束*在您可以对句柄执行任何操作之前（例如等待、挂起等）。一旦线程过程完成，RT 将关闭句柄，因此保存初始返回句柄的局部变量现在无效。

*   **_beginthreadex**：分配一个新线程并调用作为参数传递的线程过程。此版本允许对线程的创建方式进行更多控制，包括堆栈大小、初始挂起状态等。此函数的返回值是 uintptr_t，但实际上是 HANDLE 类型的 Windows 线程句柄。它必须转换为 HANDLE 变量才能在诸如 等函数中使用`WaitForSingleObject`。当线程过程通过正常的函数退出完成时，运行时**不会**自动为您关闭线程句柄。**您有责任关闭此函数返回的线程句柄，并且一旦不再需要它就应该这样做**。

使用哪个：`_beginthread`如果您不需要在等待函数等中使用线程句柄，并且没有特殊的线程创建需求（例如创建具有初始挂起状态的线程），则使用。`_beginthreadex`当您需要一个可等待的线程句柄、更好地控制创建参数等时使用。

编辑：OP 样本

```
#include <windows.h>
#include <tchar.h>
#include <stdio.h>
#include <process.h>

unsigned int __stdcall MyThread(void *p)
{
    _tprintf(_T("%s\n"), p);
    _tprintf(_T("Thread finishing!\n"));
    return 0;
}

int _tmain(int argc, TCHAR *argv[])
{
    HANDLE hThread = (HANDLE)_beginthreadex(NULL, 0, MyThread, _T("Hello, World!"), 0, NULL);
    if (hThread != INVALID_HANDLE_VALUE)
    {
        WaitForSingleObject(hThread, INFINITE);
        CloseHandle(hThread);
        _tprintf(_T("Thread finished!\n"));
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T23:09:56.550

与上面的其他答案一样，不要忘记在 _tmain 退出之前等待线程完成，否则您可能不会看到任何输出。

# objective-c - 进入全屏模式/增加窗口大小时，石英缩放精灵垂直范围但不水平

> ID：12939223
> 
> 赞同：0
> 
> 时间：2012-10-17T16:45:18.243
> 
> 标签：objective-c, macos, quartz-2d, quartz-composer

我已经创建了一个用于 MAC OS 程序的 Quartz 组合作为我界面的一部分。我依赖于这样一个事实，即当您进行合成精灵移动（在我的情况下为文本项目符号点）时，X 平面和 Y 平面都被限制为最小 -1 和最大 +1。

当我放大窗口/使窗口全屏时，我发现水平面（X 轴）保持不变，-1 是我最左边的点，+1 是我最右边的点。但是垂直平面（Y 轴）会发生变化，在全屏模式下它会从 -0.7 变为 +0.7。

这种缩放与我的计算不符。无论如何让应用程序将水平和垂直平面的比例保持为 -1 到 +1？或者有没有办法确定上限和下限？

感谢任何帮助/指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T00:29:29.450

Quartz Composer 查看器 Y 限制通常为 -0.75 -> 0.75，但这只是纵横比的问题。X 限制总是 -1 -> 1，Y 取决于它们。

您可能希望动态分配自定义宽度和高度变量，捕获上下文边界大小。例如 ：

```
double myWidth = context.bounds.size.width;
double myHeight = context.bounds.size.height; 
```

其中“上下文”是您的查看器上下文对象。

如果您直接使用 QC 查看器：您应该使用 Rendering Destination Dimensions 补丁，它将为您提供宽度和高度。将高度除以 2，然后将结果乘以 -1 得到另一边。

# css - 使用 CSS 强制浮动 column-1 中的超宽元素出现在浮动 column-2 下方

> ID：12939226
> 
> 赞同：0
> 
> 时间：2012-10-17T16:45:26.563
> 
> 标签：css, layout, css-float, html

我有一个两列布局，由固定宽度的浮动 div 组成。第一列内部是一个超宽元素。所以 html 布局看起来像这样：

```
<div id="container">
    <div id="column1">
        ...short content...
        <div id="extra-wide">
            ...wide content...
        </div>
    </div>
    <div id="column2">
        ...long content...
    </div>
</div> 
```

如注释所示，第一列包含少量内容，第二列包含大量内容。CSS 看起来像这样：

```
#column1 { width: 200px; }
#column2 { width: 100px; }
#extra-wide { width: 250px; } 
```

所以超宽元素实际上比它的父元素 column1 更宽。而且我不提前知道任何元素的高度——它们都是可变的。

这里的问题是 column2 似乎与 column1 中的超宽元素重叠。这是一个 jsfiddle 来帮助可视化这一点：http: [//jsfiddle.net/e3KNg/](http://jsfiddle.net/e3KNg/)（这个小提琴插入了一些内容并添加了颜色以使发生的事情更加清晰）。这是一个屏幕截图：

![column2 重叠超宽](../Images/8d3b694ba8d501bfd6a0c0a1bacdb8d2.png)

在不改变基本 HTML 结构或三个元素的宽度的情况下，是否可以（在没有 Javascript 的帮助下）强制 column1 中的超宽元素出现在 column2 下方？这是我想要达到的效果：

![column2 向下推超宽](../Images/70060385c9a124e9eaa4787d0ea96e84.png)

我知道这可以通过重新排列 html 元素或使用 Javascript 来完成，但我正在寻找上述限制范围内的解决方案。我尝试在各个地方使用清除div，移除或调整浮动，并尝试一些溢出设置，但无法达到我想要的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:29:49.393

看着它，没有在内容元素上设置高度或使用 javascript 来计算它们的高度或在超宽元素上设置定位，您正在寻找的东西无法实现。

这是一个小提琴，它使用超宽元素的绝对定位和顶部值，以及使用一些巧妙的 css 使列的高度相同。

[http://jsfiddle.net/yKRu4/1/](http://jsfiddle.net/yKRu4/1/)

正如我所说，这是可行的，但老实说，我觉得你所寻找的东西无法通过你设置的限制来实现。

# sql - 通过除以列的总和来查找列值

> ID：12939227
> 
> 赞同：-2
> 
> 时间：2012-10-17T16:45:35.640
> 
> 标签：sql, sql-server-2005, netezza

我在 Netezza 数据库中有一个包含以下列的表

```
Id  field1  field2      
 1   0.9    sum(field1)/0.9
 2   1.7    sum(field1)/1.7
 3   6.9    sum(field1)/6.9
 4   0.4    sum(field1)/0.4
 5   0.2    sum(field1)/0.2
 6   2.8    sum(field1)/2.8
 7   7.0    sum(field1)/7.0 
```

该`field2`列将被生成并将保存如表中所示的值。

对于这个例子，总和`field1`是`19.9`。

`field1`值也会经常变化。

请帮助进行查询，该查询将有助于计算该`field2`值，这些值也是小数，因此需要精确的总和。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:54:32.943

您可以使用[`OUTER APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
select t1.id,
  t1.field1,
  (t2.field1 / t1.field1) field2
from table1 t1
outer apply
(
  select sum(field1) field1
  from table1
) t2 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/1f152/7)

如果您无权访问，`outer apply`则可以使用笛卡尔结果查询：

```
select t1.id,
  t1.field1,
  (t2.field1 / t1.field1) field2
from table1 t1, 
(
  select sum(field1) field1
  from table1
) t2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1f152/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:49:38.263

```
SELECT  a.*, (b.totalSum / a.field1)
FROM    table1 a
        CROSS JOIN
        (
            SELECT SUM(filed1) totalSum
            FROM tableName
        ) b 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/7e418/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:02:06.807

您可以将[SUM](http://msdn.microsoft.com/en-us/library/ms187810%28v=sql.90%29.aspx)与[OVER 子句](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.90%29.aspx)一起使用。

```
select Id,
       field1,
       (sum(field1) over() / field1) as field2
from YourTable 
```

[SQLFiddle](http://sqlfiddle.com/#!6/f65c3/1/0)

# c# - 无法将不同绑定到下拉控件

> ID：12939228
> 
> 赞同：1
> 
> 时间：2012-10-17T16:45:40.723
> 
> 标签：c#, linq, visual-studio, data-binding, entity

我的应用程序在下面显示此错误：

**不支持将数据直接绑定到存储查询（DbSet、DbQuery、DbSqlQuery）**

由于我试图将我的下拉控件绑定到这个 LINQ 语句。在下面查看我的代码；

```
 using (AdventureWorksEntities dw = new AdventureWorksEntities())
        {
            ddlCon.DataSource = (from em in dw.Employees
                       select new { em.Title, em.EmployeeID }).Distinct().OrderBy(name => name);
            ;

            ddlCon.DataTextField = "Title";
            ddlCon.DataValueField = "EmployeeID";
            ddlCon.DataBind();
        } 
```

注意：请在您的回答中详细解释为什么会出现此错误及其解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:48:27.447

就像在[您的其他问题](https://stackoverflow.com/questions/12938371/data-binding-directly-to-a-store-query-dbset-dbquery-dbsqlquery-is-not-suppo)中一样，您需要使用`ToList()`，因为您不能直接绑定到查询结果。

话虽这么说，我也怀疑你`OrderBy`是不正确的。这应该是：

```
 ddlCon.DataSource = (from em in dw.Employees
                      select new { em.Title, em.EmployeeID })
                    .Distinct()
                    .OrderBy(emp => emp.Title)  // Pick Title or EmployeeID here
                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:47:30.710

您需要执行查询并将结果从数据库带到内存。只有内存中的对象可以用作数据源。这可以通过应用于`ToList`您的查询来实现：

```
ddlCon.DataSource = (from em in dw.Employees
                     select new { em.Title, em.EmployeeID })
                    .Distinct()
                    .OrderBy(x => x.Title)
                    .ToList(); 
```

# php - 主页上最近的博客文章限制

> ID：12939231
> 
> 赞同：0
> 
> 时间：2012-10-17T16:45:50.703
> 
> 标签：php, wordpress

我在设置要在主页上显示的帖子数时遇到一些问题。当我将帖子数设置为在主题选项中显示时，它会恢复为 3。我想将帖子数从 3 更改为 5。

这是我的 home.php 上的代码块，我认为需要一些改进。

-->

```
 <?php $recent = new WP_Query("cat=".get_theme_mod('featured_top_left')."&showposts=".get_theme_mod('featured_top_left_num')); while($recent->have_posts()) : $recent->the_post();?>
            <?php if( get_post_meta($post->ID, "thumb", true) ): ?>
            <a href="<?php the_permalink() ?>" rel="bookmark"><img class="thumb" src="<?php bloginfo('template_directory'); ?>/tools/timthumb.php?src=<?php echo get_post_meta($post->ID, "thumb", $single = true); ?>&amp;h=<?php echo get_theme_mod('featured_top_left_thumb_height'); ?>&amp;w=<?php echo get_theme_mod('featured_top_left_thumb_width'); ?>&amp;zc=1" alt="<?php the_title(); ?>" /></a>    
            <?php else: ?>
            <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:52:26.540

根据[Wordpress 手册](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)：

> showposts (int) - 每页显示的帖子数。自 2.1 版起已弃用，支持“posts_per_page”。

因此，如果您的版本是 >2.1，您应该编辑代码并`showposts`替换`posts_per_page`为`WP_Query`.

```
 <?php $recent = new WP_Query("cat=".get_theme_mod('featured_top_left')."&posts_per_page=".get_theme_mod('featured_top_left_num')); 
```

**更新代码。**

# c - 计算出的 tcp 校验和与原始 tcp 校验和不匹配

> ID：12939232
> 
> 赞同：0
> 
> 时间：2012-10-17T16:45:53.357
> 
> 标签：c, linux, tcp, ip, checksum

我正在尝试修改进入我的电脑的 ip 数据包。我正在使用 iptables 对数据包进行排队，并使用 libnetfilter_queue 库来修改数据包，实际上是一些 http-header 内容。即使我更改了一个字符，数据包也会被拒绝，很可能是由于 tcp 校验和的更改。所以，我正在尝试重新计算修改数据包的 tcp 校验和。最初，为了测试校验和功能，我没有修改数据包，而只是重新计算校验和。但计算出来的校验和，与原来的不匹配。这是校验和函数：`

```
unsigned short tcp_sum_calc(unsigned short len_tcp, unsigned short src_addr[],unsigned short dest_addr[], unsigned short buff[])
{
unsigned char prot_tcp=6;
unsigned long sum;
int nleft;
unsigned short *w;

sum = 0;
nleft = len_tcp;

w=buff;

/* calculate the checksum for the tcp header and payload */
while(nleft > 1)
{
sum = sum + ntohs(*w);
w++;
nleft = nleft - 2;
}

/* if nleft is 1 there ist still on byte left. We add a padding byte (0xFF) to build a 16bit word */
if(nleft>0)
{
    cout<<"check out";
// sum += *w&0xFF; 
sum += ntohs(*w&0xFF00);            // is this the correct way of doing
}

/* add the pseudo header */
sum += ntohs(src_addr[0]);
sum += ntohs(src_addr[1]);
sum += ntohs(dest_addr[0]);
sum += ntohs(dest_addr[1]);
sum += len_tcp;
sum += prot_tcp;

// keep only the last 16 bits of the 32 bit calculated sum and add the carries
sum = (sum >> 16) + (sum & 0xFFFF);
sum += (sum >> 16);

// Take the one's complement of sum
sum = ~sum;

return ((unsigned short) sum);
} 
```

下面是 libnetfilter_queue 模块的回调函数：

```
static int analyzeResponse(struct nfq_q_handle *qh, struct nfgenmsg *nfmsg,struct nfq_data *nfa, void *data)
{
int len=0,id=0;
struct iphdr *ip;
struct tcphdr *tcp;
    char *pktData;
string tempPkt;
unsigned short chksum=0,ip_hdr_len,tcp_len;
unsigned int src_ip, des_ip;
struct nfqnl_msg_packet_hdr *pktHeader;
pktHeader = nfq_get_msg_packet_hdr(nfa);

if (pktHeader) 
{
    id = ntohl(pktHeader->packet_id);
}
len = nfq_get_payload ( ( struct nfq_data * ) nfa, (char**)&ip );

if(len) 
{
    pktData=(char*)ip;
    ip_hdr_len=(unsigned short)(pktData[0]&0x7);
    src_ip=ip->saddr;
    des_ip=ip->daddr;
    int pos;
    tempPkt.assign(pktData,len);
    pos=tempPkt.find("teststring",0);
        tempPkt.replace("teststring");
    pktData=(char*)tempPkt.c_str();  
            tcp = (struct tcphdr*) (pktData + (4*ip_hdr_len));

    cout<<"*********************************************************************************";
    cout<<ip_hdr_len;
    cout<<"\ntcp checksum: "<<tcp->check;
    cout<<"\nip packet length: "<<ip->tot_len;
    cout<<"\nip packet length_calc: "<<len;
    cout<<"\nip source address: "<<src_ip;
    cout<<"\nip destination address: "<<des_ip;
    cout<<"*********************************************************************************";
    tcp->check=0; 
tcp_len=len - (4*ip_hdr_len);
    chksum = tcp_sum_calc(tcp_len, (unsigned short *) &src_ip, (unsigned short *) &des_ip, (unsigned short *) &tcp);
    tcp->check=chksum;
    cout<<"\nnew checkksum: "<<chksum;
return nfq_set_verdict(qh, id, NF_ACCEPT, len, (unsigned char*)pktData);

}   
return nfq_set_verdict(qh, id, NF_ACCEPT, len, (unsigned char*)pktData);
} 
```

这是输出：

```
5
tcp checksum: 11687
ip packet length: 54017
ip packet length_calc: 467
ip source address: 1719453657
ip destination address: 2569775296
new checkksum: 36507 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:41:37.633

看起来您没有更正数据的字节序或伪标题。原始数据是大端的，但英特尔架构是小端的。`ntohs()`因此，在进行直接添加之前，您需要交换单词的字节——你可以使用——。

请参阅此[示例](http://www.netfor2.com/tcpsum.htm)。

# html - 为什么字体颜色属性中奇怪的东西会产生真实的颜色？

> ID：12939234
> 
> 赞同：65
> 
> 时间：2012-10-17T16:45:54.857
> 
> 标签：html, fonts, colors

我在教一个jr。高中/高中网络编程课程，我们从简单的元素和属性开始，如字体和颜色，然后再学习 CSS。我知道 HTML5 不推荐使用颜色并且字体不包含在 HTML5 中，但出于教学目的，我发现从简单的 HTML 标记开始并逐步使用 CSS 很方便。在上课的第一周，学生们能够从改变页面颜色中获得很多乐趣。（我也在第一周教他们选框和眨眼，但告诉他们，如果他们再次使用它们，他们将失去分数）。

其中一名学生开始提交带有奇怪颜色属性值的作业，例如“Skittles”或“Spiderman”。我开始对此进行试验，发现几乎任何你放入字体标签的 color="" 属性的东西都会产生某种颜色。在最新版本的 IE、Firefox、Chrome、Opera 和 Safari 中，颜色似乎是一致的。

我发现将“LuckyCharms”作为 CSS 颜色放入是行不通的。它似乎只适用于 HTML 属性中需要颜色的地方，例如 font color="LuckyCharms" 或 body bgcolor="LuckyCharms"。

我试图向我的班级解释为什么会发生这种情况，到目前为止我还无法理解它，或者谷歌没有一个好的答案。看起来它被解释为颜色代码，但我无法理解如何。

***更新：***经过反复试验，我确定了一个 5 步算法（使用提供的链接）将几乎任何字符串转换为相应的十六进制颜色。我将在此处提供算法以供未来访问者启迪：

1.  将每个非十六进制字符更改为 0。
2.  向字符串添加 0，直到其长度为 3 的倍数。
3.  将绳子分成3等份。
4.  当子字符串的长度大于 2，并且所有三个子字符串都以 0 开头时，从每个字符串中删除前导 0。
5.  如果子字符串的长度仍然大于 2，则将每个子字符串截断为 2 个字符。

就是这样，把子字符串放在一起，你就得到了你的十六进制颜色代码。我已经用大约 20 个不同的样本验证了这个算法，并使用 Firefox ColorZilla 附加颜色选择器比较了结果。

请注意，在这种情况下，规则确实在答案之一中指定的链接中明确说明，并且所有浏览器都将遵守。因此，您可以依靠它在任何浏览器中工作（如果您真的想使用有趣的颜色名称）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-17T16:51:07.187

HTML 5 规范包括[解析旧颜色的规则](http://www.w3.org/TR/2011/WD-html5-20110525/common-microsyntaxes.html#colors)。

它们相当长，旨在让浏览器在处理损坏代码的方式上保持一致。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T16:55:07.457

很有意思。似乎浏览器将解释它可以解释的任何字符（af），如果它不能匹配，则将其余字符保留为 0。例如：

```
Spiderman
 00DE0 A 
```

不过还需要更多的尝试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T17:01:42.573

这是一个有趣的问题。

通过简短的实验，我发现“Luck”会产生与“LuckyCharms”相同的颜色（无论如何在我看来），但“LuckBeALady”会让你的阴影更深，而“LuckBeALadyTonight”则更蓝。

顺便说一句，我的第一个想法是它作用于可识别的十六进制字符，但这会将“LuckyCharms”变成黑色的 cca。正如 Madara Uchiba 所建议的那样，0 和十六进制字符的组合未能呈现与“LuckyCharms”相同的草绿色

没有答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T17:15:57.363

预期会发生什么的基本答案是“这取决于浏览器”。5 之前的 HTML 版本的问题之一是，当浏览器遇到非标准 HTML 时会发生什么，并没有明确说明。@Madara Uchiha 的解释是浏览器如何解释颜色规范的一个示例，但在标准方面，浏览器崩溃或弹出 CD 托盘或将显示器的分辨率更改为 400x300 也是允许的像素。当然，这并不理想 - 所以你看到的是一位程序员的想法，一次，如果遇到非标准的 HTML 颜色规范会发生什么。

CSS 不会发生这种情况的原因是它是一个不同的解析器来解释颜色。无论是内联 CSS 还是链接的 CSS 文档，这个解析器都会解释颜色。CSS[*确实定义*](http://www.w3.org/TR/1998/REC-CSS2-19980512/syndata.html#parsing-errors)了遇到不正确的值时会发生什么：它被忽略，并且根本不影响文档。

我想说这是与全班讨论标准合规性的好时机，因为这是学生理解的关键领域 - 以及我不幸认识的一些专业人士。当他们说“但是彩色彩虹糖效果很好”时，您可以告诉他们，*当他们看到它时*，它可以很好地工作，但是完全有可能会导致他们的教练的浏览器崩溃，从而为他们赢得一个大胖 F。当我们中的一些人不得不放弃我们的周末，因为在演示期间，其他人的蹩脚代码不能正常工作时，你可以得到一个真实的场景。

不过我并不苦。主要是:)

# c# - 时间：2019-05-10 标签：c#get and set accessors datetime

> ID：12939238
> 
> 赞同：2
> 
> 时间：2012-10-17T16:46:11.890
> 
> 标签：c#, asp.net

我收到在我的属性中检测到的无法访问的代码。这适用于常规字符串字段，但不适用于 DateTime 数据类型。

```
private DateTime m_RenewalDate;
    public DateTime M_RenewalDate
            {
                get { return m_RenewalDate != null ? m_RenewalDate : DateTime.MinValue; }
                set { m_RenewalDate = value; }
            } 
```

这是我的 sqldatareader

```
reader.GetDateTime(reader.GetOrdinal("M_RENEWALDATE")) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T16:47:42.017

`DateTime`是值类型，不能为空。因此，getter 中的代码无法访问：

```
return m_RenewalDate != null ? // always evaluates to true
       m_RenewalDate :         // and therefore always returns this
       DateTime.MinValue;      // The code never hits this case. 
```

如果您在数据库中的字段可以为空，则您可能希望将该属性声明为可为空的 DateTime: `DateTime?`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:51:52.100

`DateTime`是值类型，不能为空。要与数据库中的空值进行比较，请使用`DBNull.Value`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:49:52.543

正如 driis 在他的回答中所说，`m_RenewalDate == null`总是错误的，因为`DateTime`它是值类型，并且声明为值类型的事物不能为空。

在您的阅读器代码的情况下具有返回的`get`行为应该看起来更像这样`DateTime.MinValue``M_RenewalDate``M_RENEWALDATE``null`

```
object renewalDate = reader.GetValue(reader.GetOrdinal("M_RENEWALDATE"));

if (Equals(renewalDate, DBNull.Value))
{
    yourObject.M_RenewalDate = DateTime.MinValue;
}
else
{
    yourObject.M_RenewalDate = (DateTime) renewalDate;
} 
```

# mysql - Solr DataImportHandler MySQL 5.0 SELECT CONCAT 查询结果是 base64 编码的

> ID：12939242
> 
> 赞同：2
> 
> 时间：2012-10-17T16:46:47.207
> 
> 标签：mysql, solr, dataimporthandler

我已经启动并运行了 Solr 4.0，并使用 DataImportHandler 从 MySQL 导入数据。

我注意到如果我将 DataImportHandler 指向 MySQL 5.5 数据源，那么一切都会按预期工作。但是，当使用完全相同的 Solr/DataImportHandler 配置和完全相同的数据库但在 MySQL 5.0 上运行时，某些字段会返回 base64 编码。

data-config.xml 中的相关条目

```
 <dataSource type="JdbcDataSource" 
                    driver="com.mysql.jdbc.Driver" 
                    name="DB-SOURCE"
                    url="jdbc:mysql://dbhost/dbname"
                    user="user"    
                    password="password"
    />

   <document name="articles">
<entity name="article_ph" transformer="HTMLStripTransformer" dataSource="DB-SOURCE" pk="article_id" 
                            query="SELECT 'Politics Home' AS article_site, 
                                            CONCAT('ph-article-', article_id) AS article_id,
                                            article_title,
                                            article_text_plain AS article_content,
                                            article_articletype_id,
                                            article_datetime AS article_date,
                                            'Uncategorised' AS article_section,
                                            'Non Member' AS article_source
                                            FROM articles 
                                            WHERE 
                                            article_datetime!='0000-00-00 00:00:00' 
                                            AND article_datetime is NOT NULL 
                                            AND article_live=1 
                                            AND article_text_plain!='' 
                                            AND article_text_plain IS NOT NULL 
                                            AND article_title is NOT NULL
                                            AND article_title !=''">
            <field column="ARTICLE_SITE" name="article_site" />
            <field column="ARTICLE_ID" name="article_id" />
            <field column="ARTICLE_TITLE" name="article_title" />
            <field column="ARTICLE_CONTENT" name="article_content" stripHTML="true" />
            <field column="ARTICLE_DATE" name="article_date" />
            <field column="ARTICLE_SECTION" name="article_section" />
            <field column="ARTICLE_SOURCE" name="article_source" />
            <entity name="articletype_name" dataSource="DB-SOURCE" 
                            query="SELECT 
                            articletype_name 
                            FROM articletypes 
                            WHERE articletype_id='${article_ph.article_articletype_id}'">
    <field column="articletype_name" name="article_type"/>
            </entity>
</entity> 
```

当我运行指向 MySQL 5.5 的导入时，我得到：

```
<arr name="article_id"><str>ph-article-124</str></arr> 
```

当我运行指向 MySQL 5.0 的导入时，我得到带有 base64 编码 ID 的文章：

```
<arr name="article_id"><str>cGgtYXJ0aWNsZS0xMjQ=</str></arr> 
```

所有其他字段都正确返回。

两个数据库上的排序规则和字符集是相同的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:48:01.510

尝试将其转换回字符串

```
CONCAT('ph-article-', CAST(article_id AS CHAR(50)) 
```

# android - 如何使用 JSCONArray 从结果中传递所有记录

> ID：12939244
> 
> 赞同：0
> 
> 时间：2012-10-17T16:46:48.883
> 
> 标签：android

我正在尝试在 andorid 列中导入 Mysql 列这是我的 php 文件，它获取列值它向我显示所有这样的记录

```
[{"nome":"A BARATEIRA DE TECIDOS LIMITADA ME"}][{"nome":"A BARATEIRA DE TECIDOS LIMITADA ME"},{"nome":"A.A.L. COMESTIVEIS E RESTAURANTE LTDA ME"}][{"nome":"A BARATEIRA DE TECIDOS LIMITADA ME"},{"nome":"A.A.L. COMESTIVEIS E RESTAURANTE LTDA ME"},{"nome":"ACOUGUE E MERCEARIA COSTELAO DA SERRA LTDA ME"}]" 
```

//我的php文件

```
<?php
mysql_connect("localhost","root","abcd");
mysql_select_db("fabricacao");
$sql=mysql_query("SELECT nome FROM cliente ORDER BY NOME") ;
$nome ='nome';
while($rows=mysql_fetch_assoc($sql))
{
$output[]=$rows;
 print(json_encode($output));
mysql_close();
}
?> 
```

当我将结果记录转换为数组然后 JSONArray.lenght() 显示“大小 = 1”并仅插入第一条记录时，我的问题就在这里，我不明白我想存储所有行的问题在哪里？

```
try
{
   JSONArray  jArray = new JSONArray(result);
  //mydb
       sql= openOrCreateDatabase("CLT",SQLiteDatabase.CREATE_IF_NECESSARY,null);
       ContentValues values=new ContentValues(); 
       int n = jArray.length();
        for(int i=0;i<jArray.length();i++)
        {
        JSONObject json_data = jArray.getJSONObject(i);
        values.put("CLIENT", json_data.getString("nome"));
         sql.insert("clnt", null, values);
        }
       sql.close();

    }catch(Exception e)
    {
        Log.e("Erro",e.toString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:46:58.537

将您的结果数据添加到数组列表中，然后将其添加到您的数据库中。检查以下代码以获取来自数据库的所有记录。

```
 try{

            JSONArray jArray = new JSONArray(result);

            ArrayList<String> your_array_list = new ArrayList<String>();
            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);

                    String name=json_data.getString("name");
                     your_array_list.add(name);

                                    }

    }
    catch(JSONException e){
            Log.e("Error", "Error parsing data "+e.toString());
    } 
```

# symfony - 有没有办法让 twig 认为传递对象的方法是安全的？

> ID：12939246
> 
> 赞同：0
> 
> 时间：2012-10-17T16:46:56.050
> 
> 标签：symfony, twig

我在对传递给我的树枝模板的对象的方法调用中遇到了树枝转义输出的问题。我知道我可以使用`|raw`过滤器解决这个问题，但希望有一种方法可以简单地在我的对象中指定某些方法是安全的，从而消除对原始过滤器的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:18:14.467

对象本身的方法调用不能使 html 安全，因为普通对象/实体不（也不应该）知道模板引擎。

但是，twig 过滤器或函数如果知道模板引擎并且可以在其定义中标记为 html 安全。

所以你需要做的是实现一个html安全的树枝过滤器来传递对象并在过滤器函数中调用你的对象的方法。

我猜您的模板如下所示：

```
<p>{{myObj.getHtmlRepresentation()|raw}}</p> 
```

现在您需要实现一个树枝过滤器并将模板更改为以下内容：

```
<p>{{myObj|html_representation}}</p> 
```

树枝扩展应如下所示：

```
class MyTwigExtension {

    public function getFilters(){
       return array(
        // the magic is the is_safe=>html option
        'html_representation' => new \Twig_Filter_Method($this,'htmlRepresentation',array('is_safe'=>array('html'))),
    }

    public function htmlRepresentation($obj){
        return $obj->getHtmlRepresentation();
    }

 } 
```

一个设计考虑：如果您的对象是某种业务对象的实体，它不应该创建 html，但您应该将 html 创建移动到模板或树枝过滤器。

# php - 从正则表达式获取数据

> ID：12939250
> 
> 赞同：-4
> 
> 时间：2012-10-17T16:47:00.483
> 
> 标签：php, regex

是否可以从此正则表达式中获取数字？

```
preg_match("/STEAM_\d:\d:\d*/", $SteamID, $matches) 
```

我需要将所有三个数字都转换为 vars。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:49:04.640

是的。您需要捕获组。

```
preg_match("/STEAM_(\d):(\d):(\d*)/", $inputStr, $matches);
print_r($matches); 
```

如您所见，如果执行该操作，您的数字将位于`$matches[1]`,`$matches[2]`和`$matches[3]`. `$inputStr`如果这种模式在使用中出现多次`preg_match_all`。

# node.js - 带有 API 端点的 Node.js 应用程序需要 20 秒+ :: 连接保持打开 :: 如何优化？

> ID：12939253
> 
> 赞同：2
> 
> 时间：2012-10-17T16:47:05.213
> 
> 标签：node.js

我有一个返回 JSON 数据的 Node.js RESTful API。其中一个 API 调用可能（并且经常这样做）需要 10 到 20 秒才能完成。这么长的 RTT 是由于连接到外部 API，如 DiffBot、MailChimp、Facebook、Twitter 等。我希望我可以缩短 API 调用，但我不能。

当然，我已经以一种很好的异步方式实现了节点代码，但问题是客户端的入站连接（到节点应用程序）在等待服务器完成时是活动的，因此可能会影响我的性能。事实上，我目前猜测这可以解释[我在 node 中长时间运行的超时问题](https://stackoverflow.com/questions/12886438/node-js-app-has-periodic-slowness-and-or-timeouts-does-not-accept-incoming-requ)。

我已经将 maxSockets 增加到了一个巨大的数字......

```
require('http').globalAgent.maxSockets = 9999; 
```

为了感兴趣，每次建立新连接时，我都会打印出活动的套接字（[这里是代码](http://pastebin.com/pnhpxV5g)）。

这给了我这样的输出：

```
SOCKETS: {} { 'graph.facebook.com:443': 5, 'api.instagram.com:443': 1 } 
```

那里没有什么太有启发性的。我见过的最大连接数大约是 20 个左右，所有主机的总数。但这并没有真正告诉我有关传入连接的任何信息，或者如何优化它们，以使我的服务器在同时有许多连接时不会阻塞（我怀疑是这样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:53:09.697

您应该优化您的**架构**，而不仅仅是代码。

首先，我会改变客户端/服务器相互交互的方式。服务器应在收到请求后结束请求，并在该请求的所有任务真正完成后通知客户端。

有不同的方法可以实现这一目标。例如，客户端可以每隔 X 秒使用 AJAX（轮询）查询请求的统计信息。另一个例子是使用 WebSocket。

如果您要使用这种方法，请查看[Socket.IO](http://socket.io/)。它支持许多具有相同 API 的传输，如果 WebSocket 可用，它将使用它，否则，它将回退到其他传输，例如 Flash Socket、长轮询等。

其次，您不应该使用一个流程来完成所有这些工作。您应该使用队列（最好是支持队列的消息传递系统），然后运行工作人员（单独的进程）来完成“繁重的工作”。

就个人而言，我使用 AMQP 是因为它的特性和可移植性（它是一个开放标准），但可以随意使用任何其他具有持久后端的队列系统。

这样，如果一个或多个进程崩溃并且您使用正确的队列，您就不会丢失任何数据（例如您提到的 API 任务）。

希望能帮助到你。

# android - 如何使用从底部滑入的按钮创建布局

> ID：12939259
> 
> 赞同：0
> 
> 时间：2012-10-17T16:47:22.220
> 
> 标签：android, android-layout

在我的应用程序中，我想创建一个主菜单屏幕布局。布局基本上有一个线性布局，距离左侧 40 dp，另一个线性布局中也有四个按钮。

现在，我想要实现的是，当用户到达主菜单屏幕时，四个按钮应该从底部滑入，我知道我需要用按住按钮的布局来膨胀第一个布局，我研究了一下开发人员 android 上的插值器，但我仍然无法实现我想要的。

任何人都可以帮助我如何实现这一目标，一个关于通货膨胀的例子或教程会有所帮助，但通货膨胀必须从下到上或从上到下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:43:42.517

如果我理解正确，您只需为按钮设置动画（从下到上滑动）。首先，您需要在 R.anim 中定义动画，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/accelerate_decelerate_interpolator">

<translate
    android:fromXDelta="-200%"
    android:toXDelta="0%"
    android:fromYDelta="200%"
    android:toYDelta="0%"
    android:duration="3000"/>

<alpha
    android:fromAlpha="0.0"
    android:toAlpha="1.0"
    android:duration="3000" />
</set> 
```

然后您需要将动画应用于您的视图或布局：

```
Animation a = AnimationUtils.loadAnimation(this, R.anim.alpha);
a.reset();
TextView tv = (TextView) findViewById(R.id.firstTextView);
tv.clearAnimation();
tv.startAnimation(a); 
```

# c++ - 在线校准相机中校准相机时出现 OpenCV 运行时错误

> ID：12939262
> 
> 赞同：1
> 
> 时间：2012-10-17T16:47:24.560
> 
> 标签：c++, opencv, runtime-error, calibration

我写了一个校准代码如下：

```
int numBoards = 20;
int numCornersHor=6;
int numCornersVer=9;
int numSquares = numCornersHor * numCornersVer;
cv::Size board_sz = cv::Size(numCornersHor, numCornersVer);

std::vector<std::vector<cv::Point3f> > object_points;
std::vector<std::vector<cv::Point2f> > image_points;
std::vector<cv::Point2f> corners;
std::vector<cv::Point3f> obj;
    for(int j=0;j<numSquares;j++)
        obj.push_back(cv::Point3f(j/numCornersHor, j%numCornersHor, 0.0f));

int successes=0; 
```

初始化有用变量后，我从网络摄像头获取帧并将其存储在缓冲区中。

```
 while(successes<numBoards)
    {        
        unsigned char* buffer=eyeCamera->getFrame();
        cv::Mat rawImg=cv::Mat(cv::Size(widthCam,heightCam),CV_8UC4, buffer,cv::Mat::AUTO_STEP);
        cv::Mat grayImg;
        cv::cvtColor(rawImg,grayImg,CV_BGR2GRAY);

        bool found = findChessboardCorners(rawImg, board_sz, corners,
                                           CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS);
        if(found)
        {
            cv::cornerSubPix(grayImg, corners, cv::Size(11, 11), cv::Size(-1, -1),
                             cv::TermCriteria(CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 30, 1.1));
            cv::drawChessboardCorners(grayImg, board_sz, corners, found);
        }

        cv::imshow("win2", grayImg); 
```

到目前为止一切都很好。我显示了 grayImg 和棋盘角。

```
 int key = cv::waitKey(1);
        if(key==27)
            return;

        if(key==' ' && found!=0)
        {
          image_points.push_back(corners);
          object_points.push_back(obj);

          successes++;

          if(successes>=numBoards)
              break;
        }

    }

    cv::Mat intrinsic = cv::Mat(3, 3, CV_64F);
    cv::Mat distCoeffs= cv::Mat(8, 1, CV_64F);
    std::vector<cv::Mat> rvecs;
    std::vector<cv::Mat> tvecs;
    intrinsic.at<double>(0,0) = 1.0;

    int widthCam=640; 
    int heightCam=480; 
```

object_points 和 image_points 填充了 54 个元素 ~ 9 * 6

```
 cv::calibrateCamera(object_points, image_points, cv::Size(widthCam,heightCam), intrinsic, distCoeffs, rvecs, tvecs); 
```

我正在使用 Qt 创建者。调用最后一行时总是出现运行时错误：calibrateCamera()

编辑：我尝试了相同的代码，`cvCalibrateCamera2`但又遇到了同样的错误。我提供opencv Exeption：

```
OpenCV error: Bad argument (the output array of translation vectors must be 3-channel
1xn or nx1 array or 1-channel nx3 array, where n is the bumber of views) in
cvCalibrateCamera2, file F:\OpenCV\opencv\modules\calib3d\src\calibration.cpp,line 1506
terminate called after throwing an instance of 'cv::Exeption' 
```

我正在使用 10 个快照，我定义的 rvec 和 tvec 如下：

```
CvMat* rvec  = cvCreateMat(10,3,CV_32FC1);
CvMat* tvec  = cvCreateMat(10,3,CV_32FC1); 
```

谁能帮我解决这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:52:39.897

好的，现在在我的系统上本地尝试了这个，结果发现 rVecs 和 tVecs 的定义实际上与我预期的不同。

```
CvMat* rVecs = cvCreateMat( 1, 1, CV_32FC3 );
CvMat* tVecs = cvCreateMat( 1, 1, CV_32FC3 ); 
```

为我完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T12:11:05.673

我想知道是否 `CvMat* tvec = cvCreateMat(3,10,CV_32FC1);` 会有所帮助。

还有，试试 `CvMat* tvec = cvCreateMat(1,10,CV_32FC3);`

# java - Java：如何将日期添加到 mysql 数据库并返回

> ID：12939267
> 
> 赞同：0
> 
> 时间：2012-10-17T16:47:32.207
> 
> 标签：java, mysql

我需要将当前日期 +7 天添加到我的 sql 数据库中并将其取回我该怎么做？

```
Calendar cal = Calendar.getInstance();
                        cal.add(Calendar.DATE, 7); // add 7 days  
                        int date = cal.get(Calendar.DATE);
                        int month = cal.get(Calendar.MONTH);
                        int year = cal.get(Calendar.YEAR);
                        String newdate = Integer.toString(date);
                        String concat = newdate.concat("-" + Integer.toString(cal.get(Calendar.MONTH)) + "-" + Integer.toString(cal.get(Calendar.YEAR))); 
```

**我找到了这段代码**

```
java.util.Date newDate = new Date(result.getDate("VALUEDATE").getTime()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:51:32.290

您可以直接在 MySQL 中执行此操作

```
update your_table
set date_column = date_column + interval 7 day 
```

[文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:55:03.947

下载 Java MySql 连接器库[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)并将 jar 文件添加到构建路径。

现在您可以添加到您的表

```
 Connection conn = null;
    try {
        conn =  DriverManager.getConnection("<databaseURLHere>" + "user=<usernameHere>&password=<passwordHere");
        Statement stmt = conn.createStatement();
        String uid = UUID.randomUUID().toString();
        uid = uid.replaceAll("-", "");
        uid = uid.substring(0, 16);
        if (stmt.execute("<sql query here>")) {
        //    rs = stmt.getResultSet();
        }

    } catch (SQLException ex) {
        System.out.println("SQLException: " + ex.getMessage());
        System.out.println("SQLState: " + ex.getSQLState());
        System.out.println("VendorError: " + ex.getErrorCode());
    } 
```

# c++ - 我需要一个 SQL 服务器来使用 Qt 的 QtSql 库吗？

> ID：12939269
> 
> 赞同：0
> 
> 时间：2012-10-17T16:47:38.043
> 
> 标签：c++, sql, qt, qtsql

我是 Qt 的初学者，所以我的问题可能有点基本。

我的目的是使用位于我的硬盘驱动器中的 ODBC 数据库。我试图用这段代码打开它：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
db.setHostName("");
db.setDatabaseName("c:\\database.mdb");
bool ok = db.open();
QSqlQuery query;
query.exec("SELECT name FROM results WHERE tag>10");
while (query.next()) {
    QString name1 = query.value(0).toString();
    qDebug() << name1;
} 
```

现在，问题是程序找不到数据库，在 db.open() 行失败。我怀疑 Qt 不能直接打开数据库，而是必须处理 SQL 服务器。是这样吗？如果是这样的话，如果你能给我一些关于如何继续的线索，我将不胜感激，特别是关于主机名（是 localhost？）。

另外，我不确定该文件的路径是否必须包含在 DatabaseName 中。

PS：我没有问题转移到不同类型的数据库/服务器，例如 MySQL。因此，如果您的解决方案需要这个，我会很高兴的！

提前致谢

D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:02:11.710

除非您特别需要 Jet/MS Access 格式的数据库来做其他事情，否则最好使用[SQLite](http://www.sqlite.org/)。Qt 具有内置的 SQLite 支持（QSQLITE 驱动程序）——您只需将其指向数据库文件即可。无需设置 ODBC 数据源或任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:04:20.090

备查：

正如 Werne Strydom 所说，setDatabaseName 的参数不是数据库文件名，而是指向你的数据库的 ODBC 数据源的名称。因此，您需要创建一个指向您的数据库的 ODBC。

执行此操作的常用方法（在 Windows 中）是转到控制面板\系统和安全\管理工具\数据源 (ODBC)。但是，如果您使用的是 64 位计算机并且想要使用 32 位驱动程序，请转至 C:\windows\SysWOW64 并运行 odbcad32.exe

执行此操作时，将打开一个对话框（无论 64/32 位如何，都是相同的对话框）。在这里，您可以创建 ODBC，为其命名并将其链接到您的实际数据库。就我而言，当我使用本地数据库时，我使用了“用户 DNS”选项卡。

然后，回到 Qt，您将该 ODBC 名称作为 setDatabaseName 的参数。它有效！（或者它为我做了......）

新的代码如下所示：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
db.setHostName("localhost");
db.setDatabaseName("MyDataSource");
bool ok = db.open();
QSqlQuery query;
query.exec("SELECT name FROM results WHERE tag>10");
while (query.next()) {
    QString name1 = query.value(0).toString();
    qDebug() << name1;
} 
```

其中“MyDataSource”是我给 ODCB 的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:55:16.827

根据[文档](http://qt-project.org/doc/qt-4.8/sql-driver.html#qodbc)，您应该将 setDatabaseName 设置为 ODBC 数据源。然后将 ODBC 数据源配置为指向适当的文件。

# scala - scala将特征的类型参数与函数的类型参数绑定

> ID：12939271
> 
> 赞同：1
> 
> 时间：2012-10-17T16:47:42.540
> 
> 标签：scala, generics, implicit-conversion, implicit, scalaz

很难用几句话来解释问题，所以我准备了一些代码来提出问题。

让我们开发类型`Container[T1,T2]`和隐式容器，用于在该容器中包装任何值。如果该值是 `Container[T1,T2]`包装类型，则应返回相同的类型。更多的过度包装方法应该采用 T1 类型的参数（与容器中的相同），并产生具有替换 T1 值的容器。解决方案必须符合*泛型和隐含*方式。

听起来有点混乱，让我们阅读代码:)

*   容器：

    ```
    case class Container[T1, T2](t1: T1, t2: T2) 
    ```

*   带有包装方法的特征：

    ```
     trait ToContainer[A] {
        def wrappingMethod[E](e: E): Container[E, A]
      } 
    ```

*   隐含对象：

    ```
     object ToContainers {
        import language.implicitConversions

        implicit def implicitMethod[A](a: => A) = new ToContainer[A] {
          def wrappingMethod[E](e: E): Container[E, A] = Container(e, a)
        }

        implicit def implicitMethod2[E, A] (c: => Container[E, A])(implicit d:DummyImplicit): ToContainer[A] = new ToContainer[A] {
          def wrappingMethod[EX](e: EX): Container[EX, A] = c.copy(e)
        }
      } 
    ```

这就是代码。

问题是我需要以某种方式将`EX`函数的类型参数绑定`def wrappingMethod[EX]`到.`E``def implicitMethod2[E, A]`

在此之后，这样的事情应该可以工作（并且可以工作）：

```
 scala>  import     ToContainers._
        import ToContainers._

        scala>  val c1: Container[String, Int] = 1234.wrappingMethod("abc")
        c1: Container[String,Int] = Container(abc,1234)

        scala>  val c2: Container[String, Int] = c1.wrappingMethod("XXX")
        c2: Container[String,Int] = Container(XXX,1234) 
```

**...但这必须产生编译错误，并且不要**:(（看看类型：c1 有 [String, Int] 和 c3 有 [Int,Int]。我想防止这种情况发生。）

```
 scala>  val c3 = c1.wrappingMethod(0)
        c3: Container[Int,Int] = Container(0,1234) 
```

任何想法都非常感谢:)

顺便说一句：我正在使用这个版本的 scala：

欢迎使用 Scala 版本 2.10.0-M7（Java HotSpot(TM) 64 位服务器 VM，Java 1.7.0_07）

**编辑：**

我已经修复了错误。代码现在正在运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:17:03.977

您提供的示例代码不起作用，因此提供一个好的答案有点困难。但是，您不能只执行以下操作：

```
implicit def implicitMethod2[E, A] (c: => Container[E, A])(implicit d:DummyImplicit): ToContainer[A] = new ToContainer[A] {
  def wrappingMethod[E](e: E): Container[EX, A] = c.copy(e)
} 
```

所以只需将`EX`类型参数替换为`E`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:56:26.770

您需要将类型参数移动`E`到`ToContainer`：

```
trait ToContainer[E, A]

  def wrappingMethod(e: E): Container[E, A]

}

object ToContainers {
  import language.implicitConversions

  implicit def implicitMethod[E, A](a: => A) = new ToContainer[E, A] {

    def wrappingMethod(e: E): Container[E, A] = Container(e, a)

  }

  implicit def implicitMethod2[E, A] (c: => Container[E, A])(implicit d:DummyImplicit): ToContainer[E, A] = new ToContainer[E, A] {

    def wrappingMethod(e: E): Container[E, A] = c.copy(e)

  }

} 
```

# performance - Pagespeed 和 YSlow 不遵守对 Expires 标头的更改

> ID：12939273
> 
> 赞同：1
> 
> 时间：2012-10-17T16:47:50.880
> 
> 标签：performance, apache, caching, http-headers, mod-expires

我将以下代码添加到 htaccess 文件中：

```
<IfModule mod_expires.c>

# Enable expirations
ExpiresActive On

# Default directive
ExpiresDefault "access plus 1 month"

# Images
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/jpg "access plus 1 month"

# CSS
ExpiresByType text/css "access 1 month”

# Javascript
ExpiresByType application/javascript "access plus 1 year"

</IfModule> 
```

但谷歌的 PageSpeed 和 Chrome 的 YSlow 插件并未反映这些变化。

根据上面的代码，有人可以解释为什么我继续收到 PageSpeed 和 YSlow 的过期标头的 F 级吗？更重要的是，为什么 Google 的 PageSpeed 显示定义的文件类型在 4 小时内过期，而不是在 htaccess 文件中定义的 1 个月？

这是我的响应标头：

```
Date: Wed, 17 Oct 2012 15:29:36 GMT
Content-Type: text/html
Server: Nginx / Varnish
X-Powered-By: PHP/5.2.17
Cache-Control: max-age=2592000
Expires: Fri, 16 Nov 2012 15:29:36 GMT
Vary: Accept-Encoding
Content-Encoding: gzip
Age: 0

200 OK 
```

# box2d - Farseer/Box2D - 将旋转关节（或其他）的旋转约束到一个方向？

> ID：12939274
> 
> 赞同：1
> 
> 时间：2012-10-17T16:47:57.820
> 
> 标签：box2d, physics, farseer

我正在尝试在 Farseer（基于 Box2D）中创建一台机器，该机器需要使用单向轴承，以便重物仅沿逆时针方向围绕一个点旋转。

我使用 Revolute 关节连接了重量，除此问题外一切正常。我需要重物上的重力仍然影响机器。所以它应该摆动出来，并且不能在运动的物理特性仍然存在的情况下摆动回来。

如果有人对我如何实现这一点有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:23:04.863

不幸的是，Box2D 没有“开箱即用”这个功能。您可以启用旋转关节的限制，并在每个时间步调整当前旋转的限制之一。

# io - MPI 从文本文件中读取

> ID：12939279
> 
> 赞同：9
> 
> 时间：2012-10-17T16:48:15.833
> 
> 标签：io, parallel-processing, mpi

我正在学习用 MPI 编程，我遇到了这个问题。假设我有一个包含 100,000 行/行的 .txt 文件，我如何将它们分块以供 4 个处理器处理？即我想让处理器 0 负责处理 0-25000 行，让处理器 1 负责 25001-50000 等。我做了一些搜索并且确实遇到了 MPI_File_seek 但我不确定它是否可以在 .txt 上工作并在之后支持 fscanf。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T20:20:30.007

文本不是并行处理的好格式，因为您事先不知道（例如）第 25001 行的开始位置。因此，这类问题通常通过一些预处理步骤提前处理，要么建立索引，要么将文件划分为适当数量的块，以供每个进程读取。

如果你真的想通过 MPI 来做，我建议使用 MPI-IO 将文本文件的重叠块读入各种处理器，其中重叠比你预期的最长行要长得多，然后有每个处理器都同意从哪里开始；例如，您可以说进程 N 和 N+1 共享的重叠区域中的第一个（或最后一个）新行是进程 N 离开和 N+1 开始的地方。

用一些代码跟进这一点，

```
#include <stdio.h>
#include <mpi.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

void parprocess(MPI_File *in, MPI_File *out, const int rank, const int size, const int overlap) {
    MPI_Offset globalstart;
    int mysize;
    char *chunk;

    /* read in relevant chunk of file into "chunk",
     * which starts at location in the file globalstart
     * and has size mysize 
     */
    {
        MPI_Offset globalend;
        MPI_Offset filesize;

        /* figure out who reads what */
        MPI_File_get_size(*in, &filesize);
        filesize--;  /* get rid of text file eof */
        mysize = filesize/size;
        globalstart = rank * mysize;
        globalend   = globalstart + mysize - 1;
        if (rank == size-1) globalend = filesize-1;

        /* add overlap to the end of everyone's chunk except last proc... */
        if (rank != size-1)
            globalend += overlap;

        mysize =  globalend - globalstart + 1;

        /* allocate memory */
        chunk = malloc( (mysize + 1)*sizeof(char));

        /* everyone reads in their part */
        MPI_File_read_at_all(*in, globalstart, chunk, mysize, MPI_CHAR, MPI_STATUS_IGNORE);
        chunk[mysize] = '\0';
    }

    /*
     * everyone calculate what their start and end *really* are by going 
     * from the first newline after start to the first newline after the
     * overlap region starts (eg, after end - overlap + 1)
     */

    int locstart=0, locend=mysize-1;
    if (rank != 0) {
        while(chunk[locstart] != '\n') locstart++;
        locstart++;
    }
    if (rank != size-1) {
        locend-=overlap;
        while(chunk[locend] != '\n') locend++;
    }
    mysize = locend-locstart+1;

    /* "Process" our chunk by replacing non-space characters with '1' for
     * rank 1, '2' for rank 2, etc... 
     */

    for (int i=locstart; i<=locend; i++) {
        char c = chunk[i];
        chunk[i] = ( isspace(c) ? c : '1' + (char)rank );
    }

    /* output the processed file */

    MPI_File_write_at_all(*out, (MPI_Offset)(globalstart+(MPI_Offset)locstart), &(chunk[locstart]), mysize, MPI_CHAR, MPI_STATUS_IGNORE);

    return;
}

int main(int argc, char **argv) {

    MPI_File in, out;
    int rank, size;
    int ierr;
    const int overlap = 100;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    if (argc != 3) {
        if (rank == 0) fprintf(stderr, "Usage: %s infilename outfilename\n", argv[0]);
        MPI_Finalize();
        exit(1);
    }

    ierr = MPI_File_open(MPI_COMM_WORLD, argv[1], MPI_MODE_RDONLY, MPI_INFO_NULL, &in);
    if (ierr) {
        if (rank == 0) fprintf(stderr, "%s: Couldn't open file %s\n", argv[0], argv[1]);
        MPI_Finalize();
        exit(2);
    }

    ierr = MPI_File_open(MPI_COMM_WORLD, argv[2], MPI_MODE_CREATE|MPI_MODE_WRONLY, MPI_INFO_NULL, &out);
    if (ierr) {
        if (rank == 0) fprintf(stderr, "%s: Couldn't open output file %s\n", argv[0], argv[2]);
        MPI_Finalize();
        exit(3);
    }

    parprocess(&in, &out, rank, size, overlap);

    MPI_File_close(&in);
    MPI_File_close(&out);

    MPI_Finalize();
    return 0;
} 
```

在问题文本的窄版本上运行它，我们得到

```
$ mpirun -n 3 ./textio foo.in foo.out
$ paste foo.in foo.out
Hi guys I am learning to            11 1111 1 11 11111111 11
program in MPI and I came           1111111 11 111 111 1 1111
across this question. Lets          111111 1111 111111111 1111
say I have a .txt file with         111 1 1111 1 1111 1111 1111
100,000 rows/lines, how do          1111111 11111111111 111 11
I chunk them for processing         1 11111 1111 111 1111111111
by 4 processors? i.e. I want        22 2 22222222222 2222 2 2222
to let processor 0 take care        22 222 222222222 2 2222 2222
of the processing for lines         22 222 2222222222 222 22222
0-25000, processor 1 to take        22222222 222222222 2 22 2222
care of 25001-50000 and so          2222 22 22222222222 222 22
on. I did some searching and        333 3 333 3333 333333333 333
did came across MPI_File_seek       333 3333 333333 3333333333333
but I am not sure can it work       333 3 33 333 3333 333 33 3333
on .txt and supports fscanf         33 3333 333 33333333 333333
afterwards.                         33333333333 
```

# ios6 - UIPageViewController 使用滚动过渡样式导航到错误页面

> ID：12939280
> 
> 赞同：48
> 
> 时间：2012-10-17T16:48:19.180
> 
> 标签：ios6, uipageviewcontroller

我的 UIPageViewController 在 iOS 5 中运行良好。但是当 iOS 6 出现时，我想使用新的滚动过渡样式 (UIPageViewControllerTransitionStyleScroll) 而不是页面卷曲样式。这导致我的 UIPageViewController 坏了。

它工作正常，除了在我打电话之后`setViewControllers:direction:animated:completion:`。之后，下次用户手动滚动一页时，我们会得到错误的页面。这里有什么问题？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-06T15:11:30.257

我对这个错误的解决方法是在完成时创建一个设置相同视图控制器但没有动画的块

```
__weak YourSelfClass *blocksafeSelf = self;     
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished){
            if(finished)
            {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [blocksafeSelf.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];// bug fix for uipageview controller
                });
            }
        }]; 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-10-17T16:54:15.887

这实际上是 UIPageViewController 中的一个错误。它仅在滚动样式 (UIPageViewControllerTransitionStyleScroll) 中发生并且仅在`setViewControllers:direction:animated:completion:` *使用 animated:YES*调用后发生。因此有两种解决方法：

1.  不要使用 UIPageViewControllerTransitionStyleScroll。

2.  或者，如果您调用`setViewControllers:direction:animated:completion:`，请仅使用`animated:NO`。

要清楚地查看错误，请调用`setViewControllers:direction:animated:completion:`，然后在界面中（作为用户）手动向左（返回）导航到前一页。您将导航回错误的页面：根本不是前一页，而是`setViewControllers:direction:animated:completion:`调用时您所在的页面。

该错误的原因似乎是，当使用滚动样式时， UIPageViewController 会进行某种内部缓存。因此，在调用 之后`setViewControllers:direction:animated:completion:`，它无法清除其内部缓存。它认为它知道前一页是什么。因此，当用户向左导航到上一页时，UIPageViewController*无法调用 dataSource 方法`pageViewController:viewControllerBeforeViewController:`*，或者使用错误的当前视图控制器调用它。

我发布了一部电影，清楚地展示了如何查看错误：

[http://www.aeth.com/PageViewControllerBug.mov](http://www.apeth.com/PageViewControllerBug.mov)

**编辑**这个错误可能会在 iOS 8中**修复。**

**编辑**有关此错误的另一个有趣的解决方法，请参阅此答案：[https ://stackoverflow.com/a/21624169/341994](https://stackoverflow.com/a/21624169/341994)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-15T08:16:21.230

[这](https://gist.github.com/paul-delange/5582394)是我汇总的“粗略”要点。它包含一个患有阿尔茨海默病的 UIPageViewController 替代方案（即：它没有 Apple 实现的内部缓存）。

这个类不完整，但它适用于我的情况（即：水平滚动）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-06T13:50:29.593

从 iOS 12 开始，原始问题中描述的问题似乎几乎已解决。我提出这个问题是因为我在我的特定设置中经历过它，它仍然会发生，因此这里使用了“几乎”这个词。

我遇到此问题的设置是：1）应用程序是通过深层链接打开的 2）基于该应用程序必须切换到特定选项卡并通过推送打开给定项目的链接 3）描述的问题仅在目标时发生用户之前没有选择选项卡（因此 UIPageViewController 应该动画到该选项卡），并且只有在 推送返回到包含 UIPageViewController 的视图控制器之后`setViewControllers:direction:animated:completion:`有4），后者被发现是一团糟 - 它是`animated = true`呈现完全错误的视图控制器，即使调试显示逻辑级别上的一切都很好

我认为问题的根源是我在`setViewControllers:direction:animated:completion:`调用后非常快地推送视图控制器，因此 UIPageViewController 没有机会完成某些事情（可能是动画、缓存或其他内容）。

通过延迟我在 UI 中的编程导航，只需给 UIPageViewController 一些空闲时间

```
 DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 1) { ... } 
```

为我解决了这个问题。并且它还使链接项的程序化打开在视觉上更加用户友好。

希望这对处于类似情况的人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-12T21:28:33.647

这个bug在iOS9中依然存在。我使用的是上面 George Tsifrikas 发布的相同解决方法，但使用的是 Swift 版本：

```
 pageViewController.setViewControllers([page], direction: direction, animated: true) { done in
        if done {
            dispatch_async(dispatch_get_main_queue()) {
                self.pageViewController.setViewControllers([page], direction: direction, animated: false, completion: {done in })
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-02T08:48:54.437

因为 pageviewVC 在滑动时调用了多个 childVC。但我们只需要可见的最后一页。

就我而言，我需要在更改 pageView 时更改分段控件的索引。

希望这对某人有帮助:)

```
extension ViewController: UIPageViewControllerDelegate {

    func pageViewController(_ pageViewController: UIPageViewController, didFinishAnimating finished: Bool, previousViewControllers: [UIViewController], transitionCompleted completed: Bool) {
        guard let pageView = pageViewController.viewControllers?.first as? ChildViewController else { return }
        segmentedControl.set(pageView.index)
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-20T09:54:47.920

Swift 中的另一个简单解决方法：只需重置 UIPageViewController 的数据源。这显然会清除其缓存并解决该错误。这是一种直接进入页面而不中断后续滑动的方法。在下文中，m_pages 是您的视图控制器的数组。我将在下面展示如何找到 currPage（当前页面的索引）。

```
func goToPage(_ index: Int, animated: Bool)
{
    if m_pages.count > 0 && index >= 0 && index < m_pages.count && index != currPage
    {
        var dir: UIPageViewController.NavigationDirection
        if index < currPage
        {
            dir = UIPageViewController.NavigationDirection.reverse
        }
        else
        {
            dir = UIPageViewController.NavigationDirection.forward
        }

        m_pageViewController.setViewControllers([m_pages[index]], direction: dir, animated: animated, completion: nil)
        delegate?.tabDisplayed(sender: self, index: index)
        m_pageViewController.dataSource = self;
    }
} 
```

如何找到当前页面：

```
var currPage: Int
{
    get
    {
        if let currController = m_pageViewController.viewControllers?[0]
        {
            return m_pages.index(of: currController as! AtomViewController) ?? 0
        }

        return 0
    }
} 
```

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2016-12-02T23:18:39.920

***陈述：***

似乎 Apple 已经发现开发人员在非常不同的应用程序中使用 UIPageViewController，这些应用程序超出了 Apple 最初基于其设计选择的最初预期的应用程序。而不是以手势驱动的线性方式使用它，PVC 通常用于以编程方式跳转到结构化环境中的随机位置。因此，他们增强了 UIPageViewController 的实现，并且该类现在调用了两个 DataSource 回调

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController 
```

在 UIPageViewController 上设置一个新的 contentViewController 之后

```
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil]; 
```

即使动画翻页更能暗示页面层次结构中的线性进展，例如具有连续页面的书籍或 PDF。虽然 - 我怀疑从 HIG 的角度来看 Apple 是否非常喜欢看到 PVC 以这种方式使用，但是 - 它不会破坏向后兼容性，这是一个简单的修复，所以 - 他们最终做到了。实际上，这只是对两个 DataSource 方法之一的再调用一次，这在页面（ViewController）已经被兑现以供以后使用的线性环境中是绝对不必要的。

然而，即使这种增强对于某些用例可能非常方便，类的初始行为也不能被视为错误。许多开发人员这样做的事实——也在 SO 上的其他帖子中指责 UIPageViewController 行为不端——而是强调了对其设计、目的和功能的广泛传播的误解。

在没有试图冒犯这个伟大设施中的任何开发人员的情况下，我仍然决定不删除我最初的“调查”，该“调查”清楚地向 OP 解释了 PVC 的机制以及为什么他的假设是错误的，即他必须在这里处理一个错误.

这对于在 UIPageViewController 的实现中遇到一些复杂问题的任何其他开发人员也可能有用！

* * *

***原始答案：***

在一遍又一遍地阅读所有答案之后 - 包括接受的答案 - 还有一件事要说......

的设计`UIPageViewController`绝对是**完美无瑕**的，你提交的所有黑客为了规避所谓的错误只不过是对你自己错误假设的补救措施，因为你一开始就搞砸了！！！

**根本没有错误！**你只是在与框架作斗争。我会解释为什么！

* * *

关于页码和索引的讨论太多了！这些是控制器***一无所知***的概念！它唯一知道的是 - 它正在显示一些内容（顺便说一句。由您作为*dataViewController*提供）并且它可以执行诸如右/左动画之类的操作以模仿翻页。 `CURL`或者`SCROLL`……！！！

在*pageViewController*的世界中只存在一个 current `SPACE`（让我们这样称呼它以避免与页面和索引混淆）。

当您最初设置*pageViewController*时，它只关心这一点`SPACE`。只有当您开始平移它的视图时，它才会开始询问`DataSource`它最终应该显示什么，以防发生左/右翻转。当您开始向左平移时，PVC 会先询问`BEFORE-SPACE`，然后 询问`AFTER-SPACE`，如果您从右侧开始，它会反其道而行之。

在完成动画之后（`SPACE`PVC 的视图显示一个新的），PVC 认为这`SPACE`是它的新宇宙中心，当它在它的时候，它会询问`DataSource`它仍然不知道的那个。如果完成向右转弯，它想知道新`AFTER`空间，如果完成向左转弯，它会要求新`BEFORE`空间。

旧`BEFORE`空间（从动画之前开始）在完成向右转的情况下完全过时，并尽快被释放。旧`center` 的现在是新`BEFORE`的，以前`AFTER`的就是新的`center`。一切都只是向右移动了一步。

所以 - 没有谈论“*哪个页面*”或“*任何索引*” - 只是简单地 - 有一个`BEFORE`或一个`AFTER`空格。如果您将 NIL 返回到`DataSource`回调之一，PVC 只是假设它处于您的*`range of SPACES`*. 如果您将 NIL 返回到两个回调，它假定它显示*`one and only SPACE`*存在并且永远不会再调用`DataSource`回调！逻辑由你决定！您在代码中定义页面和索引！不是PVC！！！

* * *

对于该类的用户，有两种与 PVC 交互的方式。

*   `A pan-gesture that indicates whether a turn to the BEFORE/AFTER space is desired`
*   `A method - namely setViewControllers:direction:animated:completion:`

此方法的作用与平移手势完全相同。您正在指示`UIPageViewControllerNavigationDirectionBackward/Forward`动画的方向（例如） - 如果有一个意图 - 换句话说只是意​​味着 -> 去 `BEFORE`或`AFTER`......

再次 - 没有提及索引，页码等......！

这只是一种以编程方式实现相同手势的方式！并且 PVC 在首先向右移动后再次向左移动时再次显示旧内容是正确的。请记住——它只是以结构化的方式显示（你提供的）内容——这是*`'single page turn'`*设计使然！！！

这就是翻页的概念——或者 BOOK，如果你更喜欢这个词的话！

仅仅因为您在第 1 页之后提交第 8 页来搞砸它并不意味着 PVC 完全关心您对一本书应该如何工作的扭曲看法。你的应用程序的用户也不是。向右和向左翻转肯定会导致到达原始页面 - 如果使用动画完成。您可以通过为灾难找到解决方案来纠正错误。不要把它归咎于*`UIPageViewController`*. 它完美地完成了它的工作！

问问自己——你会用`PAGE-CURL`动画做同样的事情吗？不 ？好吧，你也不应该用`SCROLL`动画！动画翻页是翻页，只是翻页！无论哪种模式！如果您决定撕掉书的第 2 页到第 7 页，那就太好了！但是不要指望*`UIPageViewController`*在返回最近的页面时发明一个不存在的第 7 页，除非你告诉它事情已经改变了......

* * *

如果你真的想实现一个不协调的跳转到其他地方，那么 - 没有动画就可以了！在大多数情况下，这不会很优雅，但是 - 有可能...... -

而且 PVC 甚至可以很好地配合！当跳转到`SPACE`没有动画的新内容时，它会询问您是否需要进一步了解 -`BEFORE`和`AFTER`控制器。所以你的应用程序逻辑可以跟上 PVC ......

但是对于您始终在传达的动画 - 移动到上一个/下一个空间（`BEFORE - AFTER`）。所以从逻辑上讲，PVC 根本不需要在动画翻页时再次询问它已经知道的空间！！！

如果您想在从第 1 页动画到右侧后向左翻转时看到第 7 页 - 好吧，我会说 - 这绝对是您自己的问题！

* * *

并且以防万一您正在寻找比已接受答案中的“完成块”破解更好的解决方案（因为您正在事先为一些可能甚至可能不会在以后使用的东西提前工作）使用手势识别器代表：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer 
```

如果您真的打算向左返回第 7 页，则在此处设置您的 PVC 的 DataViewController（没有动画），并且`DataSource`将被要求`BEFORE`并且`AFTER`您可以提交您喜欢的任何页面！当你从第 1 页到第 8 页进行不受控制的跳跃时，你应该隐藏一个标志或 ivar，这应该没问题......

* * *

当人们继续抱怨 PVC 中的一个错误时——在应该只翻 1 翻的情况下翻了 2 页——将他们指向这篇文章。

同样的问题 - 在转换手势中触发未动画的*setViewControllers:*方法将导致完全相同的破坏。您认为您设置了新中心 - 要求 DataSource 提供新的`BEFORE - AFTER`dataController - 您重置了索引计数...... - 好吧，这似乎没问题......

但是 - 在所有这些业务之后，PVC 结束了它的转换/动画并想知道下一个（仍然未知）dataViewController（`BEFORE`或`AFTER`）并且还触发`DataSource`. 这是完全合理的！它需要知道它在它的小`BEFORE - CENTER - AFTER` 世界中的位置，并为下一回合做好准备。

但是您的程序逻辑在其逻辑中添加了另一个 index++ 计数，并且突然翻了 2 页！这与您认为自己所处的位置不同。

你必须考虑到这一点*！*不是*`UIPageViewController`*！！！

* * *

这正是 DataSourceProtocol 只有两种方法的重点！它希望尽可能通用——给你空间和自由来定义你自己的逻辑，而不是被别人的特殊想法和用例所束缚！逻辑完全取决于你。只是因为你找到了类似的功能

```
- (DataViewController *)viewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard *)storyboard position:(GSPositionOfDataViewController)position;
- (NSUInteger)indexOfViewController:(DataViewController *)viewController; 
```

在云中的所有复制/粘贴示例应用程序中，并不一定意味着您必须吃那些预先煮好的食物！以您喜欢的方式扩展它们！看看上面 - 在我的签名中你会发现一个*`'position:'`*论点！我稍后将其扩展为知道完成的翻页是右转还是左转。因为不幸的是，代表只是告诉您您的回合是否完成！它不会告诉你方向！但这有时对索引计数很重要，具体取决于您的应用程序的需要......

发疯——它们是你的……

快乐编码！

# database - 如何从 TDBAdvListView 中删除选定的数据库记录？

> ID：12939283
> 
> 赞同：2
> 
> 时间：2012-10-17T16:48:27.380
> 
> 标签：database, delphi, delphi-xe2

我正在通过 ComponentAce 测试绝对数据库

我的表单上有一个 TABSTable、TABSDatabase 和一个 TDataSource，并且数据显示在 TDBAdvListView 中，MultiSelect 和 RowSelect 为 True。我只有一张桌子。

When either one or more of the Items in the TDBAdvListView are selected I want to have the Database Delete the selected Records.

我在下面的代码中尝试过这种方式：

```
procedure TMain.DeleteEntry2Click(Sender: TObject);
var
  i: Integer;
begin
  with DBAdvListView1.DataSource.DataSet do
  begin
    for i := DBAdvListView1.Items.Count - 1 downto 0 do begin
    if DBAdvListView1.Items[i].Selected then
    begin
      DBAdvListView1.DataSource.DataSet.GotoBookmark(Pointer(DBAdvListView1.Items[i]));
      DBAdvListView1.DataSource.DataSet.Delete;
      end;
    end;
  end;
end; 
```

这总是会导致错误消息：

```
Cannot retrieve record - Native error: 10026 
```

我对数据库编程的经验很少，我做错了什么？

**编辑：**

我在数据库中添加了一个名为 ID 作为从 0 开始的整数的新字段，希望我可以使用 Locate 方法引用它们并尝试使用下面的代码。这不会产生错误，但只会删除 ListView 中的顶部记录，如果我选择多个记录，它将删除与所选记录不同的记录。

我的新代码：

```
procedure TMain.DeleteEntry2Click(Sender: TObject);
var
  i: Integer;
begin
  with DBAdvListView1.DataSource.DataSet do
  begin
    DBAdvListView1.BeginUpdate;
    First;
    for i := DBAdvListView1.Items.Count - 1 downto 0 do begin
    if DBAdvListView1.Items[i].Selected then
    begin
      if dbTable.Locate('ID',DBAdvListView1.Items[i].Selected,[]) then
      dbTable.Delete;
      Next;
      end;
    end;
  dbTable.Close;
  dbTable.Open;
  DBAdvListView1.EndUpdate;
  end;
end; 
```

由于某些奇怪的原因，必须关闭并打开 dbTable 才能看到更改 - 我尝试刷新无济于事......

**编辑：**

// 根据要求包含表结构...

*   ID 整数 0
*   标题字符串 200
*   作者字符串 100
*   日期字符串 20
*   位置字符串 60
*   类别字符串 100
*   ISBN-13 字符串 20
*   ISBN-10 字符串 20

在 Absolute Database Utils 目录中有一个 DatabaseManager.exe，我用它来创建实际的表，在这里我现在还设置了一个主键类型：

类型 - 主要名称 - ID

索引的字段：

ColumnName - ID CaseInsensitive - False ASC - True MaxIndexSize - 20

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:21:29.457

If you know the primary keys of all the records to be deleted, then you can use one SQL query statement in order to delete all the selected records in one go -

```
delete from table
where id in (1, 7, 15, 23, 45); 
```

You would have to build this query manually, i.e. create the string which holds the id numbers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:17:35.607

Answer to own question... I remove the selected records with the code below:

```
procedure TMain.Button5Click(Sender: TObject);
var
  i: Integer;
begin
  with DBAdvListView1 do
    for i := 0 to Items.Count - 1 do
      if Items[i].Selected then
      begin
        Memo1.Lines.Add(Items[i].Caption + ' - Selected!'); //Test for Correct ID's!
      if dbTable.Locate('ID', Items[i].Caption, []) then
      DBAdvListView1.Datasource.DataSet.Delete;
    end;
  dbTable.Close;
  dbTable.Open;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T11:17:52.537

second code will work if you just remove the Next; from the if section. Since u're already inside a 'for' loop, there's no need to use the Database.Next.

# html - 使用 LESS 使 RGBa 浏览器支持 IE8 的最优雅方式

> ID：12939287
> 
> 赞同：3
> 
> 时间：2012-10-17T16:48:42.717
> 
> 标签：html, css, internet-explorer-8, less, mixins

我使用 less 是为了使背景颜色透明的 div 。

这是我的代码，它不适用于 IE8：

```
background-color: fade(@mycolor, @transparency); 
```

我的问题是：
什么是最好的方法，因为我使用较少，以在 IE8 上获得相同的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T17:47:27.330

我不知道 LESS，但是您可以通过使用 MS 渐变滤镜并设置与开始和结束相同的颜色在 IE 7+8 中实现 alpha 透明度。alpha 通道是前两个十六进制数字，RGB 如下：

```
/* ARGB backgrounds for IE 7+8 (white background with nearly 90% transparancy) */
section {
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=#E5FFFFFF, endColorstr=#E5FFFFFF );
    -ms-filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=#E5FFFFFF, endColorstr=#E5FFFFFF );
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-25T15:16:38.200

您可以为过滤器功能制作一个mixin

// 重置IE 的**mixin**过滤器

```
.horizontal(@startColor: #555, @endColor: #333) {
  filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=1)",argb(@startColor),argb(@endColor))); // IE9 and down
}
.vertical(@startColor: #555, @endColor: #333) {
  filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=0)",argb(@startColor),argb(@endColor))); // IE9 and down
}
.directional(@startColor: #555, @endColor: #333, @deg: 45deg) {
  background-image: linear-gradient(@deg, @startColor, @endColor); // Standard, IE10
}
.horizontal-three-colors(@startColor: #00b3ee, @midColor: #7a43b6, @colorStop: 50%, @endColor: #c3325f) {
  filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=0)",argb(@startColor),argb(@endColor))); // IE9 and down, gets no color-stop at all for proper fallback
}

.vertical-three-colors(@startColor: #00b3ee, @midColor: #7a43b6, @colorStop: 50%, @endColor: #c3325f) {
  filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=0)",argb(@startColor),argb(@endColor))); // IE9 and down, gets no color-stop at all for proper fallback
}
.reset-filter() {
  filter: e(%("progid:DXImageTransform.Microsoft.gradient(enabled = false)"));
} 
```

# python - 与属性混淆

> ID：12939288
> 
> 赞同：2
> 
> 时间：2012-10-17T16:48:46.477
> 
> 标签：python, properties

我是使用属性的新手，所以我整理了一个简单的测试，如下所示。在我的测试中，我创建了两个类“Test1”和“Test2”，每个类都包含一个值。我正在尝试使用属性来管理对伪隐藏“val”属性的访问。此当前测试不限制“val”属性的任何输入或输出，因为该程序仅作为概念证明。下面显示的两个测试类产生相同的结果，并且应该代表构造属性的不同方法。我所指的属性的示例可在[此处的 python 文档](http://docs.python.org/library/functions.html#property)中找到。

根据[文档](http://docs.python.org/library/functions.html#property)：

> 如果c 是C 的一个实例，cx 将调用getter，cx = value 将调用setter，del cx 将调用deleter。

其中 C 是他们的测试班。我认为通过以我所做的方式设置值会更改 _val 并将 val 作为属性。但是在我看来，我访问属性设置器的方法实际上是用整数替换属性，`5`除非我弄错了。我希望有人能澄清我的困惑。

```
class Test1:
    def __init__(self):
        self._val = 0

    def setVal(self,newVal):
        self._val = newVal
    val = property(lambda self: self._val, setVal, None, "Property for value")

    def __str__(self):
        return "Value: {}".format(self.val)

class Test2:
    def __init__(self):
        self._val = 0

    @property
    def val(self):
        return self._val

    @val.setter
    def setVal(self,newVal):
        self._val = newVal

    def __str__(self):
        return "Value: {}".format(self.val)

def verify(a):
    print("\nCheck with {}".format(a.__class__.__name__))
    print("Value check:",a.val)
    a.val = 5
    print("Value after a.val = 5 is:",a.val)
    print("The actual value is:",a._val)

def main():
    verify(Test1())
    verify(Test2())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:04:07.993

从[文档](http://docs.python.org/library/functions.html#property)：

> `property([fget[, fset[, fdel[, doc]]]])`
> 
> **返回新样式类**（从对象派生的类）的属性属性。

描述符只为新的样式对象或类调用。您使用旧式课程。从基类型继承`object`：

```
class Test1(object):
    # your code

class Test2(object):
    def __init__(self):
        self._val = 0

    @property
    def val(self):
        return self._val

    @val.setter
    def val(self,newVal): # should be named as property
        self._val = newVal

    def __str__(self):
        return "Value: {}".format(self.val) 
```

这工作正常：

```
>>> verify(Test1())

Check with Test1
('Value check:', 0)
('Value after a.val = 5 is:', 5)
('The actual value is:', 5) 
```

阅读更多关于[新式课程和经典课程的区别](http://docs.python.org/reference/datamodel.html#newstyle)。

# c# - 使用来自 wsdl 的 c# (noob) 使用 web 服务

> ID：12939291
> 
> 赞同：1
> 
> 时间：2012-10-17T16:48:54.073
> 
> 标签：c#, web-services, wsdl

我正在尝试编写一些 C# 代码来调用 Web 服务。我正在尝试对用户进行身份验证（authenticateToNCIDv2Request），然后查看结果（authenticateToNCIDv2Result）。我不明白，基于wsdl，如何做到这一点。

我的代码（这是错误的）看起来像：

```
SingleSignOn.authenticateToNCIDv2Request request = new SingleSignOn.authenticateToNCIDv2Request();
request.AppID = "1234";
request.AppPassword = "appPW";
request.UserID = "testUser";
request.UserPassword = "userPW";

request = new authenticateToNCIDv2Request1(request).authenticateToNCIDv2Request;

SingleSignOnTest.SingleSignOn.authenticateToNCIDv2Response resp = new SingleSignOn.authenticateToNCIDv2Response();
SingleSignOn.authenticateToNCIDv2Result rslt = resp.authenticateToNCIDv2Result;

string y = rslt.Error;
SingleSignOn.Message[] msg = rslt.MessageArray; 
```

wsdl（为了简洁去掉了不适用的部分）如下：

```
<xs:element name="authenticateToNCIDv2Response" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:sequence xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:element ref="ncidng:authenticateToNCIDv2Result" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
    </xs:sequence>
    </xs:complexType>
</xs:element>
 <xs:element name="authenticateToNCIDv2Result" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:sequence xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:element maxOccurs="1" minOccurs="0" ref="ncidng:MessageArray" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        <xs:element maxOccurs="1" minOccurs="0" name="Error" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
    </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="MessageArray" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:complexType xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:sequence xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:element maxOccurs="unbounded" ref="ncidng:Message" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        </xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="Message" xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
 <xs:complexType mixed="true" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:attribute name="code" type="xs:NMTOKEN" use="required" xmlns:xs="http://www.w3.org/2001/XMLSchema"/> 
  </xs:complexType> 
</xs:element>

<xs:group name="userinfogroup" xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:sequence xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:element maxOccurs="1" minOccurs="1" name="User_DN" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="User_ID" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Personal_Title" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="First_Name" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Middle_Initial" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="Last_Name" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="Full_Name" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Suffix" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="User_Type" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Employee_Type" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="GUID" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Account_Expiration_Date" type="xs:dateTime" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Login_Disabled" type="xs:boolean" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Locked_by_Intruder" type="xs:boolean" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Password_Expiration_Date" type="xs:dateTime" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Second_Factor_Role" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="1" name="Account_Status" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" name="Migration_Status" type="xs:boolean" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        <xs:element maxOccurs="1" minOccurs="0" name="Business_Phone" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        <xs:element maxOccurs="1" minOccurs="0" name="Business_Phone_Ext" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <xs:element maxOccurs="1" minOccurs="1" name="eMail" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>           
          <xs:element maxOccurs="1" minOccurs="0" name="Street" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
          <xs:element maxOccurs="1" minOccurs="0" name="Address_Line2" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
          <xs:element maxOccurs="1" minOccurs="0" name="City" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
          <xs:element maxOccurs="1" minOccurs="0" name="State" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
          <xs:element maxOccurs="1" minOccurs="0" name="Zip_Code" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
          <xs:element maxOccurs="1" minOccurs="0" name="CR_Config" type="xs:boolean" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>         
            <xs:element maxOccurs="1" minOccurs="0" ref="ncidng:Member_of_OrganizationArray" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" ref="ncidng:Member_of_DivisionArray" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
            <xs:element maxOccurs="1" minOccurs="0" ref="ncidng:Member_of_SectionArray" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>                               
        </xs:sequence>          
</xs:group>

<xs:element name="NCIDWebServiceException" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:sequence xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:element name="reason" nillable="true" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        </xs:sequence>
    </xs:complexType>    
</xs:element> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:10:53.027

你是如何做到这一点的？传统上是这样的

```
//initialize the client
SingleSignOn client = new SingleSignOnClient();
//initialize the request
authenticateToNCIDv2Request request = new authenticateToNCIDv2Request();
//fill the request
request.AppID = "1234";
request.AppPassword = "appPW";
request.UserID = "testUser";
request.UserPassword = "userPW";
//initialize the response and fill it with response from method
authenticateToNCIDv2Response response = client.authenticateToNCIDv2(request); 
```

从这里开始解析响应。请注意，我没有深入查看您的 wsdl 以查看我的代码是否准确

# python - 根据属性键在xml中写入数据

> ID：12939292
> 
> 赞同：0
> 
> 时间：2012-10-17T16:48:56.170
> 
> 标签：python, xml

我有一个如下的 xml 文件，我想从我的设备读取数据并使用 python 脚本将数据写入特定名称的“值”列。

```
<TopoDefs>   
<Device Name="SNB" LogicalType="CORE" IdCode="0x03886A21" Mask="0xf0000000">
<Variable name="A0" value="0x52001321" type="GREEN" />
<Variable name="A1" value="0x51001321" type="GREEN" />
<Variable name="A2" value="0x03001321" type="GREEN" />
<Variable name="A3" value="0x14001321" type="GREEN" />
<Variable name="B0" value="0x5A001321" type="BLUE" />
<Variable name="B1" value="0x51001321" type="BLUE" />
<Variable name="B2" value="0x04001321" type="BLUE" />
<Variable name="B3" value="0x05001321" type="BLUE" />
</Device>
</TopoDefs> 
```

请问我如何指向变量A0在“value”属性上写入新数据？find、findall、iterfind、itertext 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:02:06.587

[`lxml`](http://lxml.de/)我认为使用, 是可用于该任务的最佳工具：

```
from lxml import etree as ET

>>> root = ET.fromstring('<TopoDefs><Device Name="SNB" LogicalType="CORE" IdCode="0x03886A21" Mask="0xf0000000"><Variable name="A0" value="0x52001321" type="GREEN" /><Variable name="A1" value="0x51001321" type="GREEN" /><Variable name="A2" value="0x03001321" type="GREEN" /><Variable name="A3" value="0x14001321" type="GREEN" /><Variable name="B0" value="0x5A001321" type="BLUE" /><Variable name="B1" value="0x51001321" type="BLUE" /><Variable name="B2" value="0x04001321" type="BLUE" /><Variable name="B3" value="0x05001321" type="BLUE" /></Device></TopoDefs>')
>>> root.xpath('.//Variable[@name="A0"]')[0].attrib['value']='test'
>>> print ET.tostring(root,pretty_print=True)
<TopoDefs>
  <Device Name="SNB" LogicalType="CORE" IdCode="0x03886A21" Mask="0xf0000000">
    <Variable name="A0" value="test" type="GREEN"/>
    <Variable name="A1" value="0x51001321" type="GREEN"/>
    <Variable name="A2" value="0x03001321" type="GREEN"/>
    <Variable name="A3" value="0x14001321" type="GREEN"/>
    <Variable name="B0" value="0x5A001321" type="BLUE"/>
    <Variable name="B1" value="0x51001321" type="BLUE"/>
    <Variable name="B2" value="0x04001321" type="BLUE"/>
    <Variable name="B3" value="0x05001321" type="BLUE"/>
  </Device>
</TopoDefs> 
```

`Variables`或者您可以按照我的理解循环并更改所有值：

```
>>> for i in root.xpath('.//Variable'):
...     i.attrib['value']='CHANGE'
...     
>>> print ET.tostring(root,pretty_print=True)
<TopoDefs>
  <Device Name="SNB" LogicalType="CORE" IdCode="0x03886A21" Mask="0xf0000000">
    <Variable name="A0" value="CHANGE" type="GREEN"/>
    <Variable name="A1" value="CHANGE" type="GREEN"/>
    <Variable name="A2" value="CHANGE" type="GREEN"/>
    <Variable name="A3" value="CHANGE" type="GREEN"/>
    <Variable name="B0" value="CHANGE" type="BLUE"/>
    <Variable name="B1" value="CHANGE" type="BLUE"/>
    <Variable name="B2" value="CHANGE" type="BLUE"/>
    <Variable name="B3" value="CHANGE" type="BLUE"/>
  </Device>
</TopoDefs> 
```

# java - 登录后丢失会话

> ID：12939295
> 
> 赞同：0
> 
> 时间：2012-10-17T16:49:06.883
> 
> 标签：java, login

我正在构建一个需要登录到某个页面并进行导航的应用程序。只要响应包含一个标识它的字符串，我就可以登录。但是当我导航到第二页时，我看不到该页面作为登录用户，只能作为匿名用户。

我将提供我的代码：

```
import java.net.*;
import java.security.*;
import java.security.cert.*;
import javax.net.ssl.*;
import java.io.*;
import java.util.*;

public class PostTest {
    static HttpsURLConnection conn = null;
    static String sessionId = null;
    private static class DefaultTrustManager implements X509TrustManager {

        @Override
        public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}

        @Override
        public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}

        @Override
        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    }

    public static void main(String[] args) {
        try {
            SSLContext ctx = SSLContext.getInstance("TLS");
            ctx.init(new KeyManager[0], new TrustManager[] {new DefaultTrustManager()}, new SecureRandom());
            SSLContext.setDefault(ctx);

            String data = URLEncoder.encode("txtUserName", "UTF-8") + "=" + URLEncoder.encode(/*username*/, "UTF-8");
            data += "&" + URLEncoder.encode("txtPassword", "UTF-8") + "=" + URLEncoder.encode(/*password*/", "UTF-8");
            data += "&" + URLEncoder.encode("envia", "UTF-8") + "=" + URLEncoder.encode("1", "UTF-8");

            connectToSSL(/*login url*/);

                    //throws java.lang.IllegalStateException: Already connected
            conn.setDoOutput(true); 

            OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
            wr.write(data);
            wr.flush();

            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;
            String resposta = "";
            while((line = rd.readLine()) != null) {
                resposta += line + "\n";
            }
            System.out.println("valid login -> " + resposta.contains(/*string that assures me I'm looged in*/));

            connectToSSL(/*first navigation page*/);

            rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            while((line = rd.readLine()) != null) {
                System.out.println(line);
            }

        } catch(Exception e) {
            e.printStackTrace();
        }
    }
    private static void connectToSSL(String address) {
        try {
            URL url = new URL(address);
            conn = (HttpsURLConnection) url.openConnection();
            conn.setHostnameVerifier(new HostnameVerifier() {
                @Override
                public boolean verify(String arg0, SSLSession arg1) {
                    return true;
                }
            });
                    if(sessionId == null) {
                            sessionId = conn.getHeaderField("Set-Cookie");
                    }
        } catch(Exception ex) {
            ex.printStackTrace();
        }
    }

} 
```

任何进一步的信息，只是问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:52:40.953

在`connectToSSL`中，您每次都打开一个新连接。在第二个连接中，它不会具有第一个连接的任何属性。

您可能希望在第一次登录连接后设置获取一些令牌/cookie 值，并在随后的调用中使用相同的值，例如

首次连接后：

```
 String sessionId = conn.getHeaderField("Set-Cookie"); 
```

在随后的连接中：

```
 conn.setRequestProperty("Cookie", sessionId ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:06:34.040

您正在访问的站点可能使用 cookie 来识别登录的会话。您需要保存在第一个请求中设置的 cookie，并在后续请求中发送它们。

如果您使用 HttpsUrlConnection，请参阅[Cookie 管理](http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-cookie.html)和[java.net.CookieManager](http://docs.oracle.com/javase/6/docs/api/)。另一种选择是默认执行 cookie 管理的[Apache HttpComponents 。](http://hc.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:08:23.650

http 是一种无状态协议。保留状态（会话）存储从服务器接收到的 cookie。 `List<String> cookies = conn.getHeaderFields().get("Set-Cookie");`

在后续请求中将它们发送到服务器

```
for (String cookie : cookies) { 
```

`//remove expires and path from cookie`

`String cookieValue=cookie.substring(0, cookie.indexOf(';');` `conn.addRequestProperty("Cookie",cookieValue);`
`}`

`OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());`

`wr.write(data);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:57:48.430

看看 Apache Commons 项目[HttpClient](http://hc.apache.org/httpclient-3.x/authentication.html)。它将帮助您完成您想要完成的工作。您有时需要比 URL 类复杂得多。从一个身份验证请求到后续的身份验证请求，它需要维护大量信息。

# php - 需要一个分页 PHP 代码来与我的 SEARCH php 脚本集成

> ID：12939301
> 
> 赞同：0
> 
> 时间：2012-10-17T16:49:28.390
> 
> 标签：php, search, pagination, integrate

已经一个月了，尝试将 php 分页代码集成到我的搜索脚本中时，我真的搞砸了。参考了谷歌搜索的大部分教程，但徒劳无功。任何帮助将非常感激。我来啦...

```
<?php
 ob_start();
 session_start();
 $_GET['term'] = trim($_GET['term']);
 $output = preg_replace('!\s+!', ' ', $_GET['term']);
 if(empty($_GET['term'])|| preg_match("/^[@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\?\ _ ]+$/i", $_GET['term']) || $output== ' ' || $_GET['term']== "%24_GET%5B%27term%27%5D")
 {
 echo "<BR>";
 echo "<BR>";
 echo("Please enter a Valid Search term");
 }
 else
 {
    mysql_connect("localhost", "root", "root");
    mysql_select_db("search");
    $_GET['term'] = explode(' ', $_GET['term']);
    foreach($_GET['term'] AS $_GET['term'])
     {
     $_GET['term'] = trim($_GET['term']);
 $sql = mysql_query("SELECT DISTINCT * FROM searchengine WHERE pagecontent LIKE '%" . str_replace(' ', "%' AND pagecontent LIKE '%", $_GET['term'])."%' LIMIT 0,10");
   while($ser = mysql_fetch_array($sql)) {
       echo "<BR>";
        echo "<b><u><a href='$ser[pageurl]'>$ser[title]</a></u></b>";
        echo "<BR>";
        echo("<span class='style_block'>{$ser['pagecontent']}</span>");
        echo "<BR>";
        echo ("<a href='$ser[pageurl]'>$ser[pageurl]</a>");
        echo "<BR>";
        echo "<BR>";
       } 
    }
$count=mysql_num_rows($sql);
if($count==0)
{
 echo "<BR>";
 echo "<BR>";
echo "Sorry, No News material was found... Please refine your search criteria and try again.";
}
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:38:55.073

除了 Luc M 在他的评论中提到的问题（你当然应该在继续之前解决），你几乎就在那里。

实际上，您需要考虑几点：每页显示多少条记录，以及您在哪个页面上。这些将规定您需要检索和显示的记录。那么，你怎么做呢？

`LIMIT`通过在 SQL 查询中使用子句，您的代码已经涵盖了第一点。第二点开始有点复杂。您需要一种识别您所在页面的方法。这可能最容易通过`GET`变量来识别，例如`http://site.com/search.php?page=2`. 现在，为了实现这一点，您需要以下内容：

```
$recordsPerPage = 10; // although you may want to have this as a GET or POST variable as well, so the user can decide
if(isset($_GET['page']) // this ensures a default value
{
    $currentPage = $_GET['page'];
}
else
{
    $currentPage = 1;
} 
```

然后，对于您的 SQL 查询，您想要构建如下内容：

```
$query = "SELECT * FROM table_name LIMIT " . $recordsPerPage . " OFFSET " . ($currentPage - 1)*$recordsPerpage . ";"; 
```

SQL的`OFFSET`子句以及`LIMIT`基本上说“选择这么多记录，从结果编号 x 开始”。您偏移是`$currentPage - 1`因为第一页不想要偏移量，而第二页只想要第一页上显示的许多记录的偏移量，依此类推。

要为分页数据创建导航，您需要了解结果集中有多少条记录，这可以通过`count($array)`PHP 的函数来完成。然后，要查找页数，只需使用以下内容：

$numPages = ceil(count($array)/$recordsPerPage);

`$array`SQL 查询中的数据集在哪里。该`ceil()`函数将结果向上舍入到下一个整数。

一旦你得到这个结果，你只需要输出每个页面的链接，这可以简单地通过一个`for`循环来完成：

```
for($i = 0; i < $numPages; i++)
{
    echo '<a href="/search.php?page="' . $i+1 . '>' . $i+1 . '</a>';
} 
```

要创建第一页、上一页、下一页和最后一页链接，您需要执行以下操作：

```
$firstPage = 1;
$previousPage = $currentPage - 1; // you may want to check here or elsewhere to make sure you have no page zero
$nextPage = $currentPage + 1; // may also want to make sure you don't go past the last page
$lastPage = $numPages; 
```

然后可以将这些值放入您生成的链接中。

再次，我将向您推荐 Luc M 的评论...这些需要修复，查看`mysqli`函数而不是您当前正在使用的现已弃用的`mysql_*()`函数，确保在使用之前清理任何用户输入的数据，并考虑查看 MVC 设计模式。

希望这会对您有所帮助。

# python - 将字符串转换为可计算的操作

> ID：12939308
> 
> 赞同：0
> 
> 时间：2012-10-17T16:49:53.620
> 
> 标签：python, string, math

是否可以将字符串转换为可计算的操作

我想做到这一点：

```
>>> import math
>>> operation = "10/2*6 + math.sqrt(42)"
>>> compute(operation)
36.48074069840786 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:52:42.493

`eval`会为你做的。

```
>>> import math
>>> operation = "10/2*6 + math.sqrt(42)"
>>> eval(operation)
36.48074069840786 
```

# java - 组件 tynamo/PropertyEditBlocks:palette_set 读取参数“选择”失败

> ID：12939309
> 
> 赞同：0
> 
> 时间：2012-10-17T16:50:00.160
> 
> 标签：java, jpa, tapestry, tynamo

我在 Tapestry 上遇到 tynamo 模型模块 (org.tynamo:tapestry-model-web:0.3.1:jar)，我遇到了一个我无法处理的问题。

我有两个实体客户和合同。显然，客户有很多合同：

## 合同

```
@Entity
@BeanModels({ @BeanModel(reorder = "id") })
public class Contract {

    [...]

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name="contract_id")
    public Long getId() {
        return id;
    }

    /**
     * @return the client
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "client_id", nullable = true)
    public Client getClient() {
        return client;
    } 
```

## 客户

```
@Entity
@BeanModels({ @BeanModel(reorder = "id") })
public class Client{

    [...]

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "client_id")
    public Long getId() {
        return id;
    }

    /**
     * @return the contracts
     */
    @OneToMany(cascade = { CascadeType.ALL })
    public List<Contract> getContracts() {
        return contracts;
    } 
```

如果我排除合同，则当我尝试创建新客户端时一切正常

```
@BeanModels({ @BeanModel(exclude = "contrats") }) 
```

但是，如果我尝试在不排除合同的情况下添加一个，则会出现以下异常：

```
ERROR] pages.Add Render queue error in SetupRender[tynamo/PropertyEditBlocks:palette_set]: Failure reading parameter 'selected' of component tynamo/PropertyEditBlocks:palette_set: org.apache.tapestry5.ioc.internal.util.TapestryException
org.apache.tapestry5.ioc.internal.util.TapestryException: Failure reading parameter 'selected' of component tynamo/PropertyEditBlocks:palette_set: org.apache.tapestry5.ioc.internal.util.TapestryException [at classpath:org/tynamo/pages/PropertyEditBlocks.tml, line 39]
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl$AbstractPhase.invoke(ComponentPageElementImpl.java:153)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl$SetupRenderPhase.render(ComponentPageElementImpl.java:181)
    at org.apache.tapestry5.internal.services.RenderQueueImpl.run(RenderQueueImpl.java:72)
    at org.apache.tapestry5.internal.services.PageRenderQueueImpl.render(PageRenderQueueImpl.java:124)
    at $PageRenderQueue_419b37801cb0d.render(Unknown Source)
    at $PageRenderQueue_419b37801cb0c.render(Unknown Source) 
```

根据我对 Palette 组件的理解，这意味着应该存在的默认选定值......不是！什么是确切的，因为没有默认值！

如果我直接在数据库（MySQL）中添加一个客户端并且不从我的实体中排除这个字段，我可以毫无问题地显示和编辑它，但在添加新的时候仍然会出现问题。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:14:03.343

只需确保您的合同列表始终具有非空值。

```
@Entity
@BeanModels({ @BeanModel(reorder = "id") })
public class Client{

    private List<Contract> contracts = new ArrayList<Contract>();

    @OneToMany(cascade = { CascadeType.ALL })
    public List<Contract> getContracts() {
        return contracts;
    }

[...]

} 
```

顺便说一句，小心客户和合同之间的双向关系。在这种情况下，我认为您正在尝试映射同一关系的两侧，但您正在映射**两个不同的**关系。双向关系总是很棘手，但这是另一个问题。

# batch-file - 创建批处理文件以解压缩多个文件夹中的文件

> ID：12939311
> 
> 赞同：0
> 
> 时间：2012-10-17T16:50:17.160
> 
> 标签：batch-file, unzip

我正在尝试创建一个批处理文件，该文件在文件夹中搜索压缩文件，然后解压缩它们。我希望脚本搜索主文件夹中的所有子文件夹，并解压缩它找到的所有内容。它可能是一个包含多个子文件夹的主文件夹。一些子文件夹将包含压缩文件，但有些则不会。

压缩文件看起来像“filename.r00”、“filename.r01”、“filename.r02”等。一个文件的名称为“filename.rar”，该文件需要使用 7-zip 解压缩。

是否可以编写一个执行此操作的批处理文件，然后删除所有 zip 文件？我已经安装了 7-zip，所以如果可能的话我想使用它。如果有人可以帮助我编写批处理文件，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:24:26.917

干得好

```
for /r C:\Mainfolder %%a in (filename.r*) do (
7z e %%a -o%%a_Extracted
del %%a /f /q
) 
```

在查看 7-Zip 的开关后，这可能会更快（未经测试）

```
7z x filename.r* -o*_Extracted -r
del filename.r* /f /q 
```

无论哪种方式，它们都会被提取到`_Extracted`最后的文件夹中，否则它会将它们提取到与存档同名的文件夹中，并且当它删除文件时，它也可能会尝试删除文件夹。

# c# - CustomValidator OnServerValidate 不工作

> ID：12939314
> 
> 赞同：1
> 
> 时间：2012-10-17T16:50:26.100
> 
> 标签：c#, textbox, code-behind, customvalidator

我正在尝试使用关键字“OnServerValidate”来使用 CustomValidator

这是我在 .aspx 文件中设置它的位置：

```
<div class="label">
    <div><label for="parentemail1">Email Address</label></div>
    <div><asp:TextBox ID="parentemail1" runat="server" MaxLength="40" Columns="40"></asp:TextBox></div>                      
        <asp:CustomValidator id="ParentEmail1Required"
        ControlToValidate="parentemail1"
        Display="Dynamic"
        ErrorMessage="Required"
        ValidateEmptyText="true"
        OnServerValidate="ServerValidator"
        runat="server"/>                          
</div> 
```

这是 OnServerValidate 方法背后的 C# 代码：

```
protected void ServerValidator(object source, ServerValidateEventArgs args)
{
    args.IsValid = false;
} 
```

我是否遗漏了什么，提交表单时不应该触发 CustomValidator 吗？
我已经阅读了一堆帖子，甚至在同一个控件上使用 RequiredFieldValidator 进行了尝试，但没有运气。我有这个使用 ClientValidationFunction 但我想访问后面代码中的属性而不是 DOM。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:03:53.400

试试这个

```
protected void ServerValidator(object source, ServerValidateEventArgs args)
{
    if(args.IsValid == false)
       return;
    Response.Redirect("NextPage.aspx");// It will not fire if page is not valid.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T22:12:16.923

好吧，参数 args 没有发送到服务器，这就是您没有收到服务器消息的原因。添加一个按钮可以做到这一点。

将代码更改为

```
<div>
        <div class="label">
    <div><label for="parentemail1">Email Address</label></div>
    <div><asp:TextBox ID="parentemail1" runat="server" MaxLength="40" Columns="40"></asp:TextBox>
        <br />
        <asp:Button ID="btnSendData" runat="server" Text="Send Data" />
            </div>                      
        <asp:CustomValidator id="ParentEmail1Required"
        ControlToValidate="parentemail1"
        Display="Dynamic"
        ErrorMessage="Required"
        ValidateEmptyText="true"
        OnServerValidate="ServerValidator"
        runat="server" SetFocusOnError="True"/>                          
</div>
    </div> 
```

# c# - 在 C# sql 中更新列表框

> ID：12939315
> 
> 赞同：1
> 
> 时间：2012-10-17T16:50:27.277
> 
> 标签：c#, sql, ajax

目前我创建了一个带有列表框的向导。列表框有一个下一个和上一个按钮。列表框有数千个项目，但下一个和上一个将一次显示 30 个项目。

我没有使用 AJAX，因此每次单击按钮时页面都会重新加载。我不希望每次用户单击下一个和上一个时都重新加载页面。我想到了使用 AJAX。

无论如何，我可以防止页面在每次用户按下下一步时通过 AJAX 或其他方式重新加载。按下一个会触发一个存储过程，它会选择接下来的 30 个项目。

C#、SQL、ASP.NET、HTML、JavaScript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:01:48.050

您当然可以为此目的使用 jquery。它将允许您执行 ajax 请求。事实上，ajax 请求甚至可以从 .Net 页面使用纯 javascript 完成，它与 .Net 版本无关。

但是，使用 jquery 会很容易，您将能够使用来自服务器的结果轻松填充列表框。

# php - php中的协程？

> ID：12939319
> 
> 赞同：5
> 
> 时间：2012-10-17T16:50:45.763
> 
> 标签：php, join, yield, state-machine, coroutine

您好我正在寻找一种在 php 文件中实现协程的方法。这个想法是我有很长的流程，需要能够在可能的几个小时或几天内产生结果。因此，其他 php 文件将调用与协程相同的文件中的函数来更新某些内容，然后调用类似的函数`$coroutine.process()`会导致协程从其最后一次产量继续。这是为了避免必须使用大型状态机。

我在想协程 php 文件在空闲时实际上不会运行，但是当给定处理时间时，它将从顶部进入并使用 switch 或 goto 之类的东西从以前的产量重新启动。然后，当它达到下一个产量时，文件会将其当前状态保存在某处（如会话或数据库），然后退出。

有没有人听说过这个，或者类似的比喻？以某种方式在一个集合下聚合和管理多个协程的奖励积分，也许支持类似线程的连接，以便在它们完成时流在一个地方继续（有点像 Go）。

**更新：php 5.5.0 增加了对生成器和协程的支持：**

[https://github.com/php/php-src/blob/php-5.5.0/NEWS](https://github.com/php/php-src/blob/php-5.5.0/NEWS)

[https://wiki.php.net/rfc/generators](https://wiki.php.net/rfc/generators)

我还没有尝试过，所以也许有人可以提出一个准系统的例子。我正在尝试将状态机转换为协程。因此，例如，for 循环中的 switch 命令（其流程难以遵循，并且随着添加更多状态而容易出错）转换为协作线程，其中每个决策点在有序的线性流程中很容易看到，该流程暂停yield 关键字的状态变化。

一个具体的例子是，假设你正在编写一个电梯控制器。不是根据电梯的状态（STATE_RISING、STATE_LOWERING、STATE_WAITING 等）确定是否读取按钮的状态，而是编写一个带有子循环的循环，该循环在电梯处于每种状态时运行。所以当它上升时，它不会下降，它不会读取除紧急按钮之外的任何按钮。这可能看起来没什么大不了的，但在像聊天服务器这样的复杂状态机中，几乎不可能在不引入细微错误的情况下更新状态机。而协作线程（协程）版本具有明显可见的流程，更易于调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-11-30T05:07:40.510

Swoole 协程库为 PHP 提供了类似 go 的协程。每个协程每个进程只增加 8K 的内存。它提供了一个协程 API 以及预期的基本功能（如 yield 和 resume）、coro 实用程序（如协程迭代器）以及更高级别的协程内置函数，如文件系统函数和网络（socket 客户端和服务器、redis 客户端和服务器、MySQL客户端等）。

您问题的第二个要素是拥有长期协同程序的能力 - 除非您在会话中保存 coro 的状态并允许 coro 结束/关闭，否则这可能不是一个好主意。否则，请求将必须与协程一样长。如果服务由长期存在的 PHP 脚本托管，则场景更容易，协程将简单地存在，直到它被允许/强制关闭。

Swoole 的性能与 Node.js 和基于 Go 的服务相当，并用于定期托管 500K+ TCP 连接的多个生产服务中。它是 PHP 鲜为人知的瑰宝，主要是因为它是在中国开发的，大多数支持和文档仅限于说中文的人，尽管少数人努力帮助说其他语言的人。

Swoole 的一个优点是它的 PHP 类包装了一个扩展的 C/C++ api，从一开始就允许它的所有功能在没有 PHP 的情况下使用。相同的源代码可以很容易地编译为 PHP 扩展和/或 *NIX 系统和 Windows 的标准库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:54:35.720

PHP 不支持协程。

我会用 编写一个 PHP 扩展[`setcontext()`](http://linux.die.net/man/2/setcontext)，当然假设您的目标是 Unix 平台。

[这里有一个关于 PHP 扩展入门](https://stackoverflow.com/q/1311389/220060)的 StackOverflow 问题： PHP 扩展开发入门。

为什么`setcontext()`？`setcontext()`可用于协程是一个鲜为人知的事实。调用另一个协程时只需交换上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:28:26.517

# c# - 如何在 MonoTouch 中为继承的视图创建 UIAppearance 代理？

> ID：12939321
> 
> 赞同：2
> 
> 时间：2012-10-17T16:50:52.590
> 
> 标签：c#, ios5, xamarin.ios, uibutton, uiappearance

我创建了一个子类，`UIButton`它在里面充当自定义后退按钮`UIBarButtonItem`：

```
 - - - - - - - - - - - - - - - - - 
|         UIBarButtonItem         |

|     ------------------------    |
     /                       |
|    \ BackButton : UIButton |    |
      ------------------------
|  _  _  _  _  _  _  _  _  _  _  _| 
```

当我将代码切换到 using`UIAppearance`时，我注意到`BackButton.Appearance`，不出所料，它继承自`UIButton.Appearance`，因此更改它将更改`UIButton`整个应用程序中的所有 s 而不仅仅是我的自定义按钮。

我知道我可以使用`AppearanceWhenContainedIn`，但是因为`UIBarButtonItem`不是外观容器，我必须在它们之间插入另一个视图来识别后退按钮，我不想这样做。

如何为具有所有可用方法的`UIAppearance`自定义子类提供代理？我注意到它的构造函数是内部的。`UIButton``UIButton.UIButtonAppearance`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:55:00.177

虽然可能有一个更简单的答案，但我最终`UIAppearance`直接继承并复制粘贴了 MonoDevelop C# 反汇编程序的相关部分`UIButton`和`UIButton+UIButtonAppearance`绑定实现，并在这里和那里修复内部字段。

内部`BackButton`：

```
static readonly IntPtr class_ptr = Class.GetHandle(typeof(BackButton));

public new static BackButtonAppearance Appearance
{
    get {
        return new BackButtonAppearance (Messaging.IntPtr_objc_msgSend (class_ptr, UIAppearance.SelectorAppearance));
    }
}

public new static BackButtonAppearance AppearanceWhenContainedIn (params Type[] containers)
{
    return new BackButtonAppearance (UIAppearance.GetAppearance (class_ptr, containers));
} 
```

嵌套`BackButtonAppearance`：

```
public class BackButtonAppearance : UIAppearance {
    public BackButtonAppearance(IntPtr handle) : base(handle) { }

    // These are copied from UIButton disassembly:

    static readonly IntPtr selSetBackgroundImageForState_ = Selector.GetHandle ("setBackgroundImage:forState:");
    static readonly IntPtr selSetTitleShadowColorForState_ = Selector.GetHandle ("setTitleShadowColor:forState:");            
    static readonly IntPtr selSetTitleColorForState_ = Selector.GetHandle ("setTitleColor:forState:");

    // These are copied from UIButton+UIButtonAppearance disassembly,
    // with internal UIButton.selSet* fields replaced by fields declared above.

    [Export ("setBackgroundImage:forState:"), CompilerGenerated]
    public virtual void SetBackgroundImage (UIImage image, UIControlState forState)
    {
        UIApplication.EnsureUIThread ();
        if (this.IsDirectBinding) {
            Messaging.void_objc_msgSend_IntPtr_UInt32 (base.Handle, selSetBackgroundImageForState_, (image != null) ? image.Handle : IntPtr.Zero, (uint)forState);
        } else {
            Messaging.void_objc_msgSendSuper_IntPtr_UInt32 (base.SuperHandle, selSetBackgroundImageForState_, (image != null) ? image.Handle : IntPtr.Zero, (uint)forState);
        }
    }

    [Export ("setTitleColor:forState:"), CompilerGenerated]
    public virtual void SetTitleColor (UIColor color, UIControlState forState)
    {
        UIApplication.EnsureUIThread ();
        if (this.IsDirectBinding) {
            Messaging.void_objc_msgSend_IntPtr_UInt32 (base.Handle, selSetTitleColorForState_, (color != null) ? color.Handle : IntPtr.Zero, (uint)forState);
        } else {
            Messaging.void_objc_msgSendSuper_IntPtr_UInt32 (base.SuperHandle, selSetTitleColorForState_, (color != null) ? color.Handle : IntPtr.Zero, (uint)forState);
        }
    }

    [Export ("setTitleShadowColor:forState:"), CompilerGenerated]
    public virtual void SetTitleShadowColor (UIColor color, UIControlState forState)
    {
        UIApplication.EnsureUIThread ();
        if (this.IsDirectBinding) {
            Messaging.void_objc_msgSend_IntPtr_UInt32 (base.Handle, selSetTitleShadowColorForState_, (color != null) ? color.Handle : IntPtr.Zero, (uint)forState);
        } else {
            Messaging.void_objc_msgSendSuper_IntPtr_UInt32 (base.SuperHandle, selSetTitleShadowColorForState_, (color != null) ? color.Handle : IntPtr.Zero, (uint)forState);
        }
    }
} 
```

这允许我将自定义视图带入支持 UIAppearance 样式的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-05T03:44:30.920

添加完整的答案。

改用. `BackButton.GetAppearance<BackButton>()`_`BackButton.Appearance`

# c# - TableLayoutPanel 从上到下而不是从左到右填充？

> ID：12939322
> 
> 赞同：3
> 
> 时间：2012-10-17T16:50:53.107
> 
> 标签：c#, winforms, tablelayoutpanel

在移动到下一列之前是否可以`System.Windows.Forms.TableLayoutPanel`填充一列？无论我如何设置`RowCount`、`ColumnCount`和`GrowStyle`，表格总是这样填充：

```
1 2 3
4 5 6 
```

我想要这个：

```
1 3 5
2 4 6 
```

TableLayoutPanel 不能自动执行此操作吗？

编辑 - 为了澄清，我以编程方式添加控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:50:16.430

您对此无能为力。这[`TableLayoutControlCollection.Add`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.add.aspx)就是内部实现的方式。我看到两个选项：

*   使用[TableLayoutControlCollection.Add(Control, column, row)](http://msdn.microsoft.com/en-us/library/he3sxc2a.aspx)。但这很麻烦，因为每次添加控件时都需要计算列/行值。
*   创建一个派生控件，将其覆盖`Add`并实现为上面的重载 - 但现在在内部。

# android - Android：AlarmManager 触发的 Intent 不包含我的标志

> ID：12939331
> 
> 赞同：0
> 
> 时间：2012-10-17T16:51:16.713
> 
> 标签：android, android-intent, flags, android-pendingintent

当我的应用程序崩溃时，我会创建一个带有 FLAG_CRASH 的 Intent。我使用该 Intent 调用 PendingIntent.getActivity，并将生成的 PendingIntent 交给 AlarmManager。

1 秒后它重新启动我的应用程序。然而，在较旧的 API 级别 (< 9) 上，Intent 上的 getFlags 始终返回 0。API 级别 15 返回我的标志。任何想法为什么？版本之间是否发生了一些默认行为更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:57:59.180

我最终编写了一个广播接收器，我可以通过挂起的意图触发自己的不同意图。该广播接收器为该活动构建了另一个意图，并在其中添加了一个额外的意图来发出崩溃信号。在 Activty 中，我有一个从 onNewIntent 和 onCreate 调用的处理程序方法，该处理程序创建错误弹出窗口并重置额外内容。

# sql-server - 未安装 SQL 和 Visual Studio 时执行 SSIS 包

> ID：12939335
> 
> 赞同：0
> 
> 时间：2012-10-17T16:51:28.423
> 
> 标签：sql-server, sql-server-2008, ssis

当 SQL 和 Visual Studio 未安装到系统中时，是否可以将 SSIS 包（.dtsx 文件）执行到系统中。

执行 SSIS 包的最低要求？请建议在这种情况下如何进行？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:09:21.033

您必须安装集成服务或 BIDS (2005 - 2008R2) / SSDT (2012)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:17:44.193

试试这篇文章。您可以尝试其他方法，例如可以在 SQL Server 中作为作业运行，或者可以使用 DTEXEC.EXE 命令行实用程序来执行 SSIS 包。 [http://www.mssqltips.com/sqlservertip/1775/different-ways-to-execute-a-sql-server-ssis-package/](http://www.mssqltips.com/sqlservertip/1775/different-ways-to-execute-a-sql-server-ssis-package/)

# objective-c - UIImageView - 从未调用过的类

> ID：12939338
> 
> 赞同：0
> 
> 时间：2012-10-17T16:51:35.253
> 
> 标签：objective-c, uiimageview, storyboard

我正在使用 StoryBoard 创建我的应用程序。

我创建了一个自定义类`UIImageView`。在 StoryBoard 中，我`UIImageView`在视图中添加了一个并将其链接到我的自定义类。

我的课程永远不会被调用，我的 imageview 也不会显示。我错过了什么？谢谢。

# asp.net-mvc-4 - 不清楚如何在 ASP.NET MVC 4 应用程序中使用 Castle Windsor 配置 NServiceBus

> ID：12939340
> 
> 赞同：1
> 
> 时间：2012-10-17T16:51:37.303
> 
> 标签：asp.net-mvc-4, castle-windsor, nservicebus

我正在使用 NServiceBus 3.2.7、Castle Windsor 3.1 和 ASP.Net MVC 4。我正在使用 Windsor 教程配置 Windsor... [Windsor 教程 - ASP.NET MVC 3 应用程序](http://docs.castleproject.org/Windsor.Windsor-tutorial-ASP-NET-MVC-3-application-To-be-Seen.ashx)

我不确定如何在此配置中设置 NServiceBus。我想维护安装程序模式，我不会运行主机（我相信）。此解决方案内部是处理所有消息的主机进程，它使用典型的 Endpointconfiguration 和 Windsor 来处理所有容器注册。

让 web 项目发送消息是事后的想法，我不想改变我配置 web 项目以添加 NServiceBus 的方式。如果有人可以提供如何执行此操作的示例，那就是极好的。我认为它将位于类似于教程中的持久性设施的设施中，但我仍然有点不确定如何适当地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:09:02.930

结果很简单。

只需创建另一个安装程序类（因为它似乎`CastleWindsorBuilder()`需要传入的容器。我试图创建一个设施，这是我的问题。）我创建了一个安装程序类，如下所示：

```
public class NServiceBusInstaller: IWindsorInstaller {
    public void Install(IWindsorContainer container, IConfigurationStore store) {
        Configure.With()
            .DefineEndpointName(ConfigurationManager.AppSettings["InputQueue"])
            .CastleWindsorBuilder(container)
            .XmlSerializer()
            .MsmqTransport()
            .UnicastBus()
                .SendOnly();
    }
} 
```

AppSettings 键是进程主机也在其中等待消息的输入队列，因此一旦它从控制器发送消息，它就会被放置在该队列中，并且主机会立即接收它。同样通过这样做，它允许我在部署到测试和生产时为其分配适当的服务器。

幸运的是，这是我在 MVC 应用程序中工作所需的所有配置，我还必须为 Windsor 3.1 设置重定向。

# mercurial - 如何使用 Mercurial 推送错误修复

> ID：12939342
> 
> 赞同：0
> 
> 时间：2012-10-17T16:51:44.070
> 
> 标签：mercurial, push, bookmarks

好的，我尝试过寻找具体的东西，但没有找到任何东西。

如果我正在处理我的默认分支中的新功能并且以前的工作出现错误报告，那么处理修复和推送的最佳方法是什么？我正在尝试书签，但后来我看到它也推动了祖先。这就是我正在做的...

*   为未来的变更集处理默认分支（rev 76）
*   在编码中间切换到错误修复
*   hg 书签主（用于当前工作）
*   hg bookmark -r 76 fix1（用于错误工作）
*   汞更新修复1
*   现在破解 rev 77
*   hg commit -m '错误修复'
*   汞更新主要
*   hg 推 -B fix1

就在那时，我注意到 76 也上升了。

由于我不希望出现新的未完成工作，而只是修复错误，那么解决此问题的最佳方法是什么？克隆虫子？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:03:33.430

您将 fix1 书签设置在与主书签相同的变更集上，而不是首先更新到修复错误的所需变更集。并且在推送时，您可以使用 -r 参数定义要推送的修订。这只会推送指定修订版的分支和祖先（在这种情况下是带有您的修复的分支）。

尝试类似：

*   为未来的变更集处理默认分支（rev 76）
*   在编码中间切换到错误修复。错误在变更集 50 中
*   `hg bookmark main`
*   `hg update -r 50`
*   `hg bookmark fix1`
*   hack hack 现在 rev 77 来修复错误
*   `hg commit -m 'bug fix part 1'`
*   hack hack 现在 rev 78 来修复错误
*   `hg commit -m 'bug fix part 2'`
*   `hg push -rfix1`
*   `hg update main`
*   再次将您的错误修复带入主代码行
*   `hg merge fix1`
*   如果需要，请删除书签
*   `hg bookmark -d fix1`
*   再次使用您的新功能

# http - 测试 HTTP PUSH（HTTP 流）有哪些好的工具/技术

> ID：12939343
> 
> 赞同：0
> 
> 时间：2012-10-17T16:51:45.213
> 
> 标签：http, curl, push, http-streaming

测试 HTTP 推送有哪些好的工具/技术？（HTTP 流）

我需要一个工具来测试利用 HTTP PUSH（HTTP 流）的 REST Web 服务。该工具需要能够建立连接并测试服务器发送的更新。如果可能的话，CURL 将是我的首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:53:49.803

您可以使用[OWASP HTTP Post Tool](https://www.owasp.org/index.php/OWASP_HTTP_Post_Tool)或尝试[使用 hurl.it](http://hurl.it/)

# ruby-on-rails - 错误 // 未初始化的常量 Sass::Rails::Application (NameError)] // 运行 'rails server' 时

> ID：12939344
> 
> 赞同：3
> 
> 时间：2012-10-17T16:51:50.993
> 
> 标签：ruby-on-rails, ruby

当我去运行服务器时，我收到此错误：

```
C:\Users\myusername\sass>rails server
C:/Users/myusername/sass/config/application.rb:13:in `<module:Sass>': uninitialized 
constant Sass::Rails::Application (NameError)
        from C:/Users/myusername/sass/config/application.rb:12:in `<top (required)
>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman
ds.rb:53:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman
ds.rb:53:in `block in <top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman
ds.rb:50:in `tap'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman
ds.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:55:19.160

`Sass`是一个 Ruby 库，顺便提一下，它也被 Ruby 使用。您应该为 Rails 应用程序使用不同的名称。

再次运行生成器并选择不同的名称，例如`myproject`或其他任何名称（Ruby 模块除外）。

# c# - 如何限制复选框列表中的元素数量？

> ID：12939348
> 
> 赞同：1
> 
> 时间：2012-10-17T16:52:18.987
> 
> 标签：c#, asp.net, checkboxlist

我的 C#/asp.net 项目中有一个复选框列表，我正在使用一个 dataTable 填充它，该数据表从查询中获取数据到我的数据库。该查询返回大量数据，我想在过滤数据之前限制它最初显示的元素数量。（比如说，前 1000 名）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:19:07.940

有两个地方可以限制数据的数量。

在数据库中（假设您使用 SQL Server），您可以修改查询以返回前 1000 行。

```
SELECT TOP 1000 * FROM SomeTable 
```

或者您可以在数据到达后使用 Linq 过滤数据。

```
var newData = dataTable.AsEnumerable().Take(1000); 
```

我更喜欢第一种方法，所以你不会到处乱扔无用的数据。但是，如果您在其他地方需要该数据，第二个肯定也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:02:36.060

您可以使用[`Take<>`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)通用 IEnumerable 方法：

```
var data = someQuery.Exec();
var limitedData = data.Take(1000).ToArray(); 
```

# php - PHP JSON 格式对象

> ID：12939349
> 
> 赞同：0
> 
> 时间：2012-10-17T16:52:21.063
> 
> 标签：php, zend-framework, json

PHP菜鸟在这里...

```
if i have JSON format: {"0":"0x1001C","1":"0"}
but what i really want is is: {"0x1001C","0"} 
```

我如何做到这一点？

本质上，我有一个包含键和值的数组。我正在删除键（因为这是一个要求）并且最终数组必须是对象格式（换句话说，JSON 必须返回带有 {} 而不是 [] 的东西）

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:54:03.323

```
 echo json_encode(array('0x1001c', '0'), JSON_FORCE_OBJECT);
                                         ^^^^^^^^^^^^^^^^^ 
```

根据文档： http: [//php.net/json_encode](http://php.net/json_encode)

# c# - 如何像在 Ruby 中一样创建 c# .net 通用列表？

> ID：12939351
> 
> 赞同：1
> 
> 时间：2012-10-17T16:52:24.430
> 
> 标签：c#, .net

我正在尝试使用 Ruby 映射我从 .net 使用的功能

如何像在 Ruby 中一样创建 c# .net 通用列表？

```
public class ClientList : List<Client> { } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:56:07.670

Ruby 是一种非常动态的语言。它没有 C# 中的强类型，因此它没有（或需要泛型）。

您可以像这样在 Ruby 中创建一个列表：

```
list = [] 
```

[http://langref.org/ruby/lists](http://langref.org/ruby/lists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:03:39.270

```
class A
end

list = [] # create
list << A.new # add 
```

像这样的东西？这里列表是动态的，您可以向其中添加任何对象。

# ajax - 在同一个域中发送没有 cookie 的 ajax 请求？

> ID：12939354
> 
> 赞同：12
> 
> 时间：2012-10-17T16:52:28.583
> 
> 标签：ajax, http, jquery, cookies, xmlhttprequest

我看到 google 或 twitter autosuggest 发送的 ajax 请求非常轻量级，因为它们不会随请求发送任何 cookie。我想知道他们是怎么做到的？我搜索了一些方法，但我找到了通过 CORS 发送的方法，但他们将请求发送到同一个域。

关于如何做到这一点的任何想法或方法。我正在使用铬。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-17T10:08:20.660

这是我能想到的两个选项来回答你的问题：

**选项 1：**`withCredentials: false`使用 XMLHttpRequest 时设置： [https ://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials)

**选项 2：**在发送请求之前删除 cookie，并且（在想要重用的情况下，之后从 temp 变量中恢复它们），如下所示：

1.  获取 cookie 并将它们存储在某个地方（全局变量中的 fi）
2.  从域中删除 cookie
3.  发送 AJAX 请求
4.  从变量中恢复 cookie

# javascript - 显示隐藏表单元素 Jquery/Bootstrap

> ID：12939355
> 
> 赞同：0
> 
> 时间：2012-10-17T16:52:30.650
> 
> 标签：javascript, jquery, forms, twitter-bootstrap

我有一组表单字段（通过 wtforms 生成）我真的只需要显示一个，然后有一个添加按钮：

* * *

```
<div class=element-work>

            <table id="identifier-0"><tr><th><label for="identifier-0-organization">Organization</label></th><td><input id="identifier-0-organization" name="identifier-0-organization" type="text" value=""></td></tr><tr><th><label for="identifier-0-position">Position</label></th><td><input id="identifier-0-position" name="identifier-0-position" type="text" value=""></td></tr><tr><th><label for="identifier-0-start_time">Start</label></th><td><input id="identifier-0-start_time" name="identifier-0-start_time" type="text" value=""></td></tr><tr><th><label for="identifier-0-end_time">End</label></th><td><input id="identifier-0-end_time" name="identifier-0-end_time" type="text" value=""></td></tr></table>

            <table id="identifier-1"><tr><th><label for="identifier-1-organization">Organization</label></th><td><input id="identifier-1-organization" name="identifier-1-organization" type="text" value=""></td></tr><tr><th><label for="identifier-1-position">Position</label></th><td><input id="identifier-1-position" name="identifier-1-position" type="text" value=""></td></tr><tr><th><label for="identifier-1-start_time">Start</label></th><td><input id="identifier-1-start_time" name="identifier-1-start_time" type="text" value=""></td></tr><tr><th><label for="identifier-1-end_time">End</label></th><td><input id="identifier-1-end_time" name="identifier-1-end_time" type="text" value=""></td></tr></table>

            <table id="identifier-2"><tr><th><label for="identifier-2-organization">Organization</label></th><td><input id="identifier-2-organization" name="identifier-2-organization" type="text" value=""></td></tr><tr><th><label for="identifier-2-position">Position</label></th><td><input id="identifier-2-position" name="identifier-2-position" type="text" value=""></td></tr><tr><th><label for="identifier-2-start_time">Start</label></th><td><input id="identifier-2-start_time" name="identifier-2-start_time" type="text" value=""></td></tr><tr><th><label for="identifier-2-end_time">End</label></th><td><input id="identifier-2-end_time" name="identifier-2-end_time" type="text" value=""></td></tr></table>

            <table id="identifier-3"><tr><th><label for="identifier-3-organization">Organization</label></th><td><input id="identifier-3-organization" name="identifier-3-organization" type="text" value=""></td></tr><tr><th><label for="identifier-3-position">Position</label></th><td><input id="identifier-3-position" name="identifier-3-position" type="text" value=""></td></tr><tr><th><label for="identifier-3-start_time">Start</label></th><td><input id="identifier-3-start_time" name="identifier-3-start_time" type="text" value=""></td></tr><tr><th><label for="identifier-3-end_time">End</label></th><td><input id="identifier-3-end_time" name="identifier-3-end_time" type="text" value=""></td></tr></table>

            <table id="identifier-4"><tr><th><label for="identifier-4-organization">Organization</label></th><td><input id="identifier-4-organization" name="identifier-4-organization" type="text" value=""></td></tr><tr><th><label for="identifier-4-position">Position</label></th><td><input id="identifier-4-position" name="identifier-4-position" type="text" value=""></td></tr><tr><th><label for="identifier-4-start_time">Start</label></th><td><input id="identifier-4-start_time" name="identifier-4-start_time" type="text" value=""></td></tr><tr><th><label for="identifier-4-end_time">End</label></th><td><input id="identifier-4-end_time" name="identifier-4-end_time" type="text" value=""></td></tr></table>

</div> 
```

* * *

我的选择：

1）加载所有页面，根据需要使用js显示/隐藏字段

2）按下按钮时有js克隆/添加字段

两者都可以，但选项 1 目前工作最少（但我猜从长远来看，数十亿次查询会消耗更多带宽，但我现在不担心这个）：jquery/bootstrap 最简单的方法是什么根据需要隐藏显示字段的后续部分？我不是一个真正的 js 人，但研究它应该很简单，但我正在发布以了解人们在我工作时必须提供哪些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:54:19.403

您可以使用`.hide()`

```
$('#id').hide();

$('table').hide(); // Hides all the tables

$('#identifier-0').show() // Shows the table wit id="identifier-0" 
```

# asp.net-mvc - Spring MVC 在页面渲染后处理请求

> ID：12939361
> 
> 赞同：0
> 
> 时间：2012-10-17T16:52:51.610
> 
> 标签：asp.net-mvc, spring, tomcat, webpage-rendering

我有一个 Spring MVC 应用程序（2.5.6），在页面渲染之后，spring MVC 会执行几个请求作为 GET 方法，这会导致我当前的命令值被擦除。它在 tomcat 5.5 下工作，我将应用程序更新为 tomcat 6.0.35，但 Jetty 也有同样的问题。我想知道 Spring MVC 2.5.6 在 tomcat 5.5 和 tomcat 6.x 下的行为不同 业务场景如下：使用创建一个空缺而不保存它，他点击预览按钮比，有一个返回按钮（不是浏览器的），点击后退按钮后，编辑表单会显示所有字段的验证错误，并保留任何值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:09:54.007

我意识到一些晦涩的 get 请求完成了在应该与 POST 请求一起使用的 URL 上加载图像，并且 Spring MVC 在收到 GET 请求时重新创建一个新命令。所以问题与 Spring MVC 本身无关，但我必须找出为什么要完成两个 GET 请求来加载图像。它甚至可能是一个 CSS 问题。

# java - 最佳实践：fail() 与 assertTrue(false)

> ID：12939362
> 
> 赞同：14
> 
> 时间：2012-10-17T16:52:52.593
> 
> 标签：java, testing, junit

当故意使测试用例失败时（例如没有抛出异常时），我看到人们同时使用fail() 和assertTrue(false)。使用其中一种有什么好处吗？

```
try {
    //method call that should throw exception
    fail("oops");
} catch (Exception e) {} 
```

对比

```
try {
    //method call that should throw exception
    assertTrue("oops", false);
} catch (Exception e) {} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T16:55:44.123

> 使用其中一种有什么好处吗？

从功能上讲，没有。但是，`fail()`更清楚地传达意图，因此更好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-17T16:54:51.987

在注解中使用 JUnit 的`expected`参数`@Test`

```
@Test(expected = ArithmeticException.class)  
public void divisionWithException() {  
    int i = 1/0;
} 
```

如果 an`ArithmeticException`没有被抛出，这将失败。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T16:55:04.717

assertTrue 只是调用失败。

恕我直言 fail() 更简单，更清晰。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T16:55:27.927

使用`fail`，否则有人会在日志中查看失败并认为“什么是假的应该是真的”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T16:55:07.200

两者都可以使用（虽然`fail`更好，因为这是真正的意图），但由于您使用的是 JUnit，因此您可以`@Test(expected=MyException.class)`改用。

# asp.net-mvc - 无法在 ASP MVC 操作中使用路径

> ID：12939364
> 
> 赞同：0
> 
> 时间：2012-10-17T16:52:59.600
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我正在尝试使用 Path() 但它下面有一条蓝线并说：“在声明之前不能引用局部变量（路径）。” 如何使用路径（）？

```
Imports System.Globalization
Imports System.IO

Public Class MessageController
    Inherits System.Web.Mvc.Controller

    <EmployeeAuthorize()>
    <HttpPost()>
    Function SendReply(ByVal id As Integer, ByVal message As String, ByVal files As IEnumerable(Of HttpPostedFileBase)) As JsonResult

            ' upload files
            For Each i In files

                If (i.ContentLength > 0) Then

                    Dim fileName = path.GetFileName(i.FileName)
                    Dim path = path.Combine(Server.MapPath("~/App_Data/uploads"), fileName)
                    i.SaveAs(path)

                End If

            Next

    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:58:15.490

你可以试试

```
Dim fileName As String
fileName = Path.GetFileName(i.FileName)
Dim path As String = Path.Combine(Server.MapPath("~/App_Data/uploads") 
```

这里是参考

[http://msdn.microsoft.com/en-us/library/system.io.path.getfilename%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename%28v=vs.71%29.aspx)

[http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:31:41.780

这里的问题是我使用`Dim path`的是不可能的，因为“路径”是一个保留字。

# c - 在c中反转单词

> ID：12939365
> 
> 赞同：-3
> 
> 时间：2012-10-17T16:53:01.437
> 
> 标签：c, string

这肯定很简单，但我是 C 的新手，我不明白为什么下面的代码有问题。该代码是字符串的简单还原字符位置：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{   int i,length;
    char *word;
    scanf("%s",word);
    length = strlen(word);
    char res[length];

    for(i=0;i<length;i++){
        res[i]=word[length-1-i];
        printf("%d",res[i]);}
} 
```

当我输入一个字符串时，我在控制台和调试器中收到一条消息： (lldb) ： movb %al, (%rcx), EXC_BAD_ACCESS(code=1,address=0x0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:54:32.250

```
char *word;
scanf("%s",word); 
```

对不存在的内存位置的无效写入。

像这样创建一个数组：`char word[MAXSIZE]`或使用`malloc`or`calloc`动态分配内存。并且`fgets`不使用`scanf`

一些让你快乐的链接： [malloc](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)，[calloc](http://www.cplusplus.com/reference/clibrary/cstdlib/calloc/)，[fgets](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:58:49.540

```
printf("%d",res[i]); 
```

如果您想输出字符而不是字节值，请使用`%c`而不是。`%d`

# jquery - FancyBox 2 + IE8 / Chrome - 无法工作

> ID：12939367
> 
> 赞同：0
> 
> 时间：2012-10-17T16:53:15.150
> 
> 标签：jquery, html, sharepoint-2007, fancybox, fancybox-2

下午好！

我需要一些帮助。我一直在这里撞墙，无法弄清楚为什么fancybox不起作用。我正在尝试加载一些带有一些链接的 iframe 并将它们显示在一个花式框中。

我正在使用来自 fancybox 的默认包含。

有谁知道我做错了什么？

谢谢你看看这个。

罗斯

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"  <html xmlns="http://www.w3.org/1999/xhtml">  
<head>   
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />    
<script type="text/javascript" src="/lib/jquery-1.8.2.min.js"></script>   
<script type="text/javascript" src="/source/jquery.fancybox.js"></script>   
<link type="css/test" rel="stylesheet" href="/source/jquery.fancybox.css" media="screen"/>   
<script type="text/javascript">   
    $(document).ready(function() {  
        $('.fancybox').fancybox();    
    });      
</script>     
<a class="fancybox fancybox-iframe" href="/Contact.html"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:05:37.400

无法在 IE 中运行，因为您的文档在 quirks 模式下运行。fancybox 需要标准模式才能在 IE 中正常工作。

您当前的`DOCTYPE`声明是（如您上面的代码）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"  <html xmlns="http://www.w3.org/1999/xhtml"> 
```

我想应该是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

（你错过了`DOCTYPE`正确关闭声明......除非是错字）

此外，更改此行：

```
<a class="fancybox fancybox-iframe" href="/Contact.html"> 
```

进入这个：

```
<a class="fancybox fancybox.iframe" href="/Contact.html"> ...</a> 
```

... 或者 ：

```
<a class="fancybox" data-fancybox-type="iframe" href="/Contact.html"> ...</a> 
```

...还要确保您`<a>`正确关闭标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:13:30.077

尝试将脚本更改为：

```
$(document).ready(function(){
    $("a#featured").fancybox({
      'hideOnContentClick': true,
      'transitionIn'        : 'none',
      'transitionOut'       : 'none',
      'type'                : 'iframe'
    });
}); 
```

然后使用：

```
 <a id="featured" href="/Contact.html"> 
```

# apache - .htaccess 重定向并制作漂亮的网址

> ID：12939369
> 
> 赞同：1
> 
> 时间：2012-10-17T16:53:21.983
> 
> 标签：apache, .htaccess, mod-rewrite

我对 .htaccess 很陌生，只想写一个类似这样的规则：

`http://www.example.com/profile.php?username=John.janorkar`

想让它变成这样：

`http://www.example.com/profile/John.janorkar`

我还想在没有 www 的情况下重定向到 www，如下所示（下面的代码工作正常，只是上面的代码有问题。

```
RewriteCond %{HTTP_HOST} ^example\.com$ [NC] 
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

请问有哪位高手可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:54:39.213

只需在您的 .htaccess 中添加此规则：

```
RewriteRule ^profile/(.+)/?$ profile.php?username=$1 [L,NC,QSA] 
```

# c - C 将 char 附加到 char*

> ID：12939370
> 
> 赞同：8
> 
> 时间：2012-10-17T16:53:25.787
> 
> 标签：c, string, char, segmentation-fault, append

所以我试图将 a 附加`char`到 a `char*`。

例如我有`char *word = " ";` 我也有`char ch = 'x';`

我确实`append(word, ch);`使用这种方法..

```
void append(char* s, char c)
{

    int len = strlen(s);
    s[len] = c;
    s[len+1] = '\0';
} 
```

它给了我一个分段错误，我明白我为什么这么想。因为`s[len]`越界了。我如何使它起作用？如果我要使用 char word[500]; 之类的东西，我也需要清除`char*`很多。一旦它附加了一些字符，我将如何清除它？会`strlen`一直这样`500`吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T16:56:47.663

典型的 C 实践如下：

```
//returns 1 if failed, 0 if succeeded 
int  append(char*s, size_t size, char c) {
     if(strlen(s) + 1 >= size) {
          return 1;
     }
     int len = strlen(s);
     s[len] = c;
     s[len+1] = '\0';
     return 0;
} 
```

传递函数时，要修改函数的数组在编译时不知道它有多少空间。C 中的通常做法是也传递数组的长度，如果函数无法在其拥有的空间中完成工作，函数将信任此边界并失败。另一种选择是重新分配并返回新数组，您需要返回`char*`或`char**`作为输入，但您必须仔细考虑在这种情况下如何管理堆内存。但是如果没有重新分配，是的，如果在没有剩余空间时要求附加，您的函数必须*以某种方式失败，如何失败取决于您。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T16:57:36.043

很难在 C 中就地附加到字符串。试试这样的事情：

```
char *append(const char *s, char c) {
    int len = strlen(s);
    char buf[len+2];
    strcpy(buf, s);
    buf[len] = c;
    buf[len + 1] = 0;
    return strdup(buf);
} 
```

确保在完成后释放返回的字符串。

仅供参考：可能是因为您传递的字符串存储在只读内存中，所以可能会出现段错误。但你是对的，你也在写完结尾（`[len+1]`写，而不是那个`[len]`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T16:55:29.050

如果你通过

```
append("foo", 'X'); 
```

它会崩溃，因为 foo 通常放在只读存储中。即使不是，它也可能会覆盖一些不好的东西！在这种情况下，编译器应该警告您从 const char * 到 char * 的转换，这将是一个线索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:01:00.740

是的，您所做的假设是 - 几乎 - 正确 - 崩溃可能是因为您试图写入字符串的边界（实际上只是`s[strlen(s) + 1]`超出范围，因为`s[strlen(s)]`它仍然是一个有效位置 - 终止 NUL 字节被存储那里）。但是您也不能修改字符串文字，因为它通常位于进程内存的某个只读部分中。这两个动作都会导致调用未定义的行为，这可能会导致崩溃。您可以通过将字符串复制到动态分配的存储空间然后修改副本来解决此问题。此外，您应该`const char *`在函数的参数中使用，因为这`char *`表明只读字符串不能传入。

```
char *append(const char *orig, char c)
{
    size_t sz = strlen(orig);
    char *str = malloc(sz + 2);
    strcpy(str, orig);
    str[sz] = c;
    str[sz + 1] = '\0';
    return str;
} 
```

`free()`此外，当不再需要返回的字符串时，不要忘记它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T17:02:29.380

您不能真正安全地附加到任意字符串，因为首先，字符串常量往往位于只读内存中，因此尝试写入它们可能会导致分段错误，其次，您无法保证如果他们给了你一个缓冲区，你还没有在它结束时拍摄。

特别是，如果您执行 char x[500];

不能保证 strlen(x) 会返回 500。它会返回从 x 的开头开始向前计数的字符数，然后才达到空值。它可能会返回 0、1 ... 500、501 ...，具体取决于 x 中的内容。

实际上，您唯一的选择是使用要附加到的缓冲区的大小来调用 append （因此，如果缓冲区已满，您可以做一些适当的事情），或者每次调用 append 时都分配一个新缓冲区，在这种情况下，您当然需要再次释放缓冲区。

# javascript - touchend 事件，返回 touchstart 状态动画

> ID：12939372
> 
> 赞同：1
> 
> 时间：2012-10-17T16:53:31.623
> 
> 标签：javascript, animation, touch

我目前正在使用 webkit 和触摸事件。

我可以让一个元素沿着触摸移动滑动，然后让它回到触摸端。

但是无论我尝试什么，它都会在没有动画的情况下恢复到原来的状态，所以它很丑。

```
var obj = document.getElementById('element');

obj.addEventListener('touchmove', function(event) {
  event.preventDefault();
  if (event.targetTouches.length == 1) {
    var touch = event.targetTouches[0];
    obj.style.left = touch.pageX + 'px';
  }
}, false);

obj.addEventListener('touchend', function(event) {

  ???

}, false); 
```

我已经尝试过 startnode、style、webkit-animation-name（在触摸事件之外工作）和其他一些奇怪的方式，但它仍然没有动画。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:14:16.023

您可以将元素设置为具有过渡，以便在设置位置时元素移动到该位置需要 X 时间。

```
.class {
    -webkit-transition: left ease 3s;
} 
```

在拖动过程中，您需要将其设置为 0，以便它不会延迟地跟随您的手指。

例子：

```
var obj = document.getElementById('element');

obj.addEventListener('touchmove', function(event) {
  event.preventDefault();
  if (event.targetTouches.length == 1) {
    obj.style.webkitTransition = 'left ease 0s';
    var touch = event.targetTouches[0];
    obj.style.left = touch.pageX + 'px';
  }
}, false);

obj.addEventListener('touchend', function(event) {

  obj.style.webkitTransition = 'left ease 3s';
  //Set position here
}, false); 
```

# hudson - 如何设置 Hudson 的类路径

> ID：12939373
> 
> 赞同：1
> 
> 时间：2012-10-17T16:53:31.440
> 
> 标签：hudson, websphere, classpath

我正在开发一个由我的一位同事编写的插件，该插件将代码部署到 WAS 6.1 服务器。我们正在更改为 WAS 8，并且该插件现在需要 6.1 不需要的类。在 hudson，我看到 java.class.path 参数设置为 /usr/lib/hudson/hudson.war。有没有办法将包含我需要的 jar 的 WebSphere 目录添加到这个类路径中。我目前正在运行插件，找到一个丢失的 jar，将其放入 hudson 的 WEB-INF\lib 目录并重复所有步骤。这变得非常痛苦。任何帮助，将不胜感激。

# java - 如何使用 XSSF (Apache POI 3.8) 调整图表大小？

> ID：12939375
> 
> 赞同：1
> 
> 时间：2012-10-17T16:53:45.770
> 
> 标签：java, apache-poi

我想知道是否有办法使用 Apache POI (XSSF) 调整图表大小。目前我正在使用一个 Excel 模板，它有一个图表，当使用 namedRanges 插入更多数据时会发生变化。

一切正常，我面临的唯一麻烦是：

*   图表总是保持相同的大小，所以如果有更多条目，它就会变得混乱，使图表变得毫无用处。
*   我正在使用日期，但我无法在图表上将日期表示为日/月（17/10）。它基本上不是 04/01/2001，而是写 36982。

工作簿的目的是列出几个工作并检查它们是否在给定日期花费了更长的时间，该图表用于帮助识别更长的经过时间的发生。作业运行时间可能从几秒到几小时不等。

这是我正在使用的代码：

 `````
package le_package.poi_tests.xssflibrary;

import java.io.*;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.apache.poi.openxml4j.opc.OPCPackage;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Name;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class POIReadFile {
    public static void main(String[] args) {
        try
        {           
            String jobName = "I am a job"; 
            String jobParent = "I am your father, Job.";        
            int rowNum = 40;
            int deface = 4;

            //Open Excel as OOXML
            XSSFWorkbook currentWorkbook = new XSSFWorkbook( OPCPackage.open("include/excelTemplate.xlsx"));

            //Get sheet in position 0
            Sheet currentSheet = currentWorkbook.getSheetAt(0);

            //Get sheet name for processing
            String sheetName = currentSheet.getSheetName();

            //Set values for headers
            currentSheet.getRow(1).getCell(0).setCellValue(jobName);            
            currentSheet.getRow(1).getCell(1).setCellValue(jobParent);              

            for (int i=0; i<rowNum; i++)
            {
                //Create row in a given position
                Row newRow = currentSheet.createRow(i+deface);

                //Create cell within row
                Cell newCell0 = newRow.createCell(0);
                Cell newCell1 = newRow.createCell(1);
                Cell newCell2 = newRow.createCell(2);
                String cellDate = "";

                /* Set CellType
                 *  0 - Numeric | 1 - String | 2 - Formula | 3 - Blank | 4 - Boolean | 5 - Error */
                newCell0.setCellType(0);
                cellDate = "3/"+(i+1)+"/2001 00:00:00";

                //Convert text into date
                Date currentCellDate = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss").parse(cellDate);
                //System.out.println(currentCellDate.toString()+"--"+cellDate);

                //Set CellValue
                newCell0.setCellValue(currentCellDate);

                cellDate = "4/"+(i+1)+"/2001 00:00:00"; 
                currentCellDate = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss").parse(cellDate);
                //System.out.println(currentCellDate.toString()+"--"+cellDate);             
                newCell1.setCellType(0);
                newCell1.setCellValue(currentCellDate);

                //setCellFormula sets the formula to be evaluated by excel, it doesn't need to start with '=' 
                newCell2.setCellFormula("A" + (i+deface+1) + "-B" + (i+deface+1));              
            }           

            //Search for named range
            Name rangeCell = currentWorkbook.getName("startRange");         
            //Set new range for named range 
            String reference = sheetName + "!$A$" + ( deface+1 ) + ":$A$" + ( rowNum+deface );          
            //Assigns range value to named range
            rangeCell.setRefersToFormula(reference);

            rangeCell = currentWorkbook.getName("endRange");            
            reference = sheetName + "!$B$"+(deface+1) + ":$B$" + (rowNum+deface);
            rangeCell.setRefersToFormula(reference);            

            rangeCell = currentWorkbook.getName("elapsedTime");
            reference = sheetName + "!$C$"+(deface+1) + ":$C$" + (rowNum+deface);
            rangeCell.setRefersToFormula(reference);

            //Create a fileStream to write into a file
            FileOutputStream newExcelFile = new FileOutputStream(jobName+".xlsx");

            //Write Stream
            currentWorkbook.write(newExcelFile);

            //Close New Excel File
            newExcelFile.close();           
        }
        catch (Exception e)
        {
            System.out.println("AAAAARGH, I was wounded by the following exception!:");
            e.printStackTrace();
            System.out.println("Sorry, your program is dead :(");
        }
    }
} 
````  `有可能做我需要的吗？

谢谢。

*注意：我不是要求从头开始创建图表，我只需要调整模板的大小，并将一些单元格更改为日期而不是写入的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:51:41.010

在研究了 xlsx 的工作原理后，我找到了如何完成它。

```
//Call the partiarch to start drawing
XSSFDrawing drawing = ((XSSFSheet)currentSheet).createDrawingPatriarch();
//Create CTMarket for anchor
CTMarker chartEndCoords = CTMarker.Factory.newInstance();
//The coordinates are set in columns and rows, not pixels.
chartEndCoords.setCol(column);
//Set Column offset
chartEndCoords.setColOff(0);
chartEndCoords.setRow(row);
chartEndCoords.setRowOff(0);
//drawing.getCTDrawing().getTwoCellAnchorArray(0).setFrom(chartStartCoords);
drawing.getCTDrawing().getTwoCellAnchorArray(0).setTo(chartEndCoords);

/*
    This line of code allows to resize the chart:
        The Patriarch is what allows to get control over the drawings, since
        a chart is considered a graph in xlsx you can access it with getCTDrawing.
        Each graph is stored in the tag getTwoCellAnchorArray, where the array position
        is the chart you have; for example getTwoCellAnchorArray(3) would refer to the
        forth graph within the sheet.

        Each getTwoCellAnchorArray has several properties as FROM and TO, which define
        where the existing graph starts and ends.   
*/ 
```

如果您有任何意见，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:15:38.140

1.  给你的日期单元格，日期格式。 [Apache poi 日期格式](https://stackoverflow.com/questions/9756748/apache-poi-date-format)

2.  POI 无法修改图形 AFAIK。``

# android - Google App Engine - 数据存储区读取操作过多

> ID：12939376
> 
> 赞同：4
> 
> 时间：2012-10-17T16:53:47.177
> 
> 标签：android, google-app-engine, google-cloud-datastore, quota

我已经通过 Google App Engine 为我的 Android 应用实现了在线排行榜。但 2 小时后，我在“数据存储读取操作”中达到了 100% 的配额。谁能帮我修改我的代码以减少读取操作？
这是我的代码：

```
public class The_Big_Bang_Theory_Quiz_HighscoreserverServlet extends HttpServlet {
public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    String game = req.getParameter("game");
    String name = req.getParameter("name");
    String pointsStr = req.getParameter("points");
    String behaviorStr = req.getParameter("behavior");
    int behavior = 0; // 0 = upload, 1 = download
    if (behaviorStr != null) {
        try {
            behavior = Integer.parseInt(behaviorStr);
        } catch (NumberFormatException e) {
            behavior = 0;
        }
    }
    if (behavior == 0) {
        int points = 0;
        if (pointsStr != null) {
            try {
                points = Integer.parseInt(pointsStr);
            } catch (NumberFormatException e) {
                points = 0;
            }
        }
        if (points > 0 && name != null) {
            addHighscore(game, name, points);
        }
    } else {
        String maxStr = req.getParameter("max");
        int max = 1000;
        if (maxStr != null) {
            try {
                max = Integer.parseInt(maxStr);
            } catch (NumberFormatException e) {
                max = 1000;
            }
        }
        returnHighscores(resp, game, max);
    }
}

private void returnHighscores(HttpServletResponse resp, String game, int max) {
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
    Key gameKey = KeyFactory.createKey("game", game);
    Query query = new Query("highscore", gameKey);
    query.addSort("points", Query.SortDirection.DESCENDING);
    List<Entity> highscores = datastore.prepare(query).asList(FetchOptions.Builder.withLimit(max));
    for(Entity e : highscores) {
        try {
            resp.getWriter().println(e.getProperty("name") + ";" +e.getProperty("points"));
        } catch (IOException exc) {
            exc.printStackTrace();
        }
    }
}

private void addHighscore(String game, String name, int points) {
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
    Key gameKey = KeyFactory.createKey("game", game);
    Entity highscore = new Entity("highscore", gameKey);
    highscore.setProperty("name", name);
    highscore.setProperty("points", points);
    datastore.put(highscore);
}
} 
```

我读了一些关于`BlobStore`. 这是更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:45:10.110

读取操作返回的每个实体都需要读取操作。您在免费配额下有 50k 读取操作。

每当您获得高分时，您似乎都会获得 1000 个高分。如果你的分数 > 1000，那么拉分数 50 次将达到你的极限。

您的用户真的关心前 1000 名的分数吗？这是你的决定，但我非常怀疑。如果您获得了前 10 名的高分，那么在用完配额之前，您的查询次数可能会增加 100 倍。

省钱的下一步是使用投影查询，以便您的读取使用小型操作而不是读取操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:06:10.200

我有同样的问题，我使用 GEA 的缓存机制来解决问题。基本上 Cache 是一个分布式 HasMap

一些代码：创建地图：

```
try {
            cache = CacheManager.getInstance().getCacheFactory().createCache(
                    new ConcurrentHashMap<String, Category>());
        } catch (CacheException e) {
            Logger
                    .getLogger(TipsDAO.class.getName())
                    .severe(
                            "unable to cretate cache using an internal ConcurrentHashMap");
            cache = new ConcurrentHashMap<String, Category>();
        } 
```

对于每次读取的弹出窗口，您首先检查 Map，如果找到 i 则返回，如果找不到，则从 DB 中读取并将其放入 Map 中，然后再返回。

```
if (cache.containsKey(cat)) {
            return (Category) cache.get(cat);
        }
        try {
            Query query = entityManager
                    .createQuery("SELECT FROM Category WHERE name = ?1");
            query.setParameter(1, cat);
            Category temp = (Category) query.getSingleResult();
            cache.put(cat, temp);
            return temp;
        } catch (Exception e) {
            LOG.severe(e.getMessage());
            return null;
        } 
```

对于数据库的每个写入操作，您还可以写入 Map

```
cache.put(cat.getName(), cat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:52:55.120

仅供参考，如果您[启用](https://developers.google.com/appengine/docs/java/tools/appstats)GAE 的 AppStats 选项，您可以获得一份很酷的报告，该报告准确地告诉您每个数据库事务的时间长短和成本有多高。

这在尝试调试资源使用情况时非常有用。

[![在此处输入图像描述](../Images/5355202313a88880807f1b264dfb0e4e.png)](https://i.stack.imgur.com/wl34H.png)

# python - 多个鼠标位置

> ID：12939379
> 
> 赞同：0
> 
> 时间：2012-10-17T16:53:52.770
> 
> 标签：python, mouse, pygame

我正在尝试为我的编程课制作一个简单的钢琴键盘。我在 pygame 中制作了它，因为它很好用且易于使用。我已经设法通过为钢琴上的每个音符制作鼠标矩形和单独的矩形并通过将其链接到 mousebuttondown 事件来播放音符来使其工作。所以它工作得很好，但我将在智能板上演示它，我想知道我是否可以让它成为多人游戏。问题是我无法找到两个人同时玩的方法，因为显然只有一个鼠标（玩家在屏幕上点击会检测到），因此只有一个 mouse.get_pos() 用于矩形碰撞检测. 如果有人可以建议解决这个问题，那就太酷了！

谢谢您的帮助

-劳拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:37:37.047

事件`MOUSEBUTTONDOWN`有两个属性：

*   位置
*   按钮

如果您使用 event.pos 而不是 mouse.get_pos() 即使您有不止一只鼠标，您也应该能够获取点击发生的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:01:56.263

目前，基于 Python 的[kivy](http://kivy.org/)框架正在兴起，作为多平台多媒体应用程序的替代方案——它们的 proeminet 特性之一是对多点触控的支持。当然，您的硬件（和驱动程序）必须具有多点触控功能，但 Kivy 框架当然可以提供您在 Python 方面所需的功能 -

在不离开 Pygame 的情况下，另一种选择是模拟由键盘或游戏控制器控制的第二个光标 - 但它需要更多的编码，而不仅仅是检测点击的坐标。

# java - SOCKET 处理并发服务器和客户端通信

> ID：12939386
> 
> 赞同：2
> 
> 时间：2012-10-17T16:54:17.793
> 
> 标签：java, sockets

我在使用套接字时遇到了一些问题。

我正在尝试使并发服务器接受多个客户端。

当客户端连接到服务器时，服务器会创建一个新线程并监听套接字。然后，如果客户端发送了一些东西，服务器必须读取它。

在客户端上，我只需打开一个字典（txt 形式），然后通过套接字发送它。

在服务器上，我唯一得到的是：

#

空值

服务器

```
 try
             {
                String message,file = new String("StressTextFile.txt");
                File filee = new File(file);
                long length;

                 // Open the file 
                 FileInputStream fstream = new FileInputStream(file);
                 // Get the object of DataInputStream
                 DataInputStream in = new DataInputStream(fstream);
                 BufferedReader br = new BufferedReader(new InputStreamReader(in));
                 String strLine = new String();

                 length  = filee.length();

                 ProgressBar.setMaximum((int)length); //we're going to get this many bytes
                 ProgressBar.setValue(0); //we've gotten 0 bytes so far
                  //Read File Line By Line

                font1 = new Font("Helvetica", Font.PLAIN, 18);
                font1.isBold();
                color = new Color( 74,118,110);
                TextArea1.setForeground(color);
                TextArea1.setFont(font1);

                 int soma=0;
                    while(in.readLine() != null)
                    {
                        strLine = in.readLine();  // reads from file
                        //System.out.println(strLine);

                        TextArea1.append(strLine+"\n");

                        pwOut.write(strLine);
                        pwOut.flush();

                        soma+=strLine.length()+1;
                        ProgressBar.setValue(ProgressBar.getValue()+(strLine.length()+1)*2);
                        ProgressBar.repaint();              
                    };

                    br.close();
                    pwOut.close();
                    Skt.close();
            }catch (Exception e){  System.err.println("Error: " + e.getMessage());  }
          } 
```

客户

```
 try
    {

        brIn = new BufferedReader(new InputStreamReader(skt.getInputStream()));

        while(s != null)
        {

            s = brIn.readLine();
            System.out.println("#####");
            System.out.println(s);
        }

    } 
    catch (IOException e1) {e1.printStackTrace();    } 
```

请忘记 Swing 组件。我认为所有套接字的东西都可以。为什么我在服务器端什么都得不到？

请帮忙

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:51:39.903

多线程服务器的准系统示例：

```
//MyServer.java
public class MyServer {

  private static int PORT = 12345;

  public static void main(String args[]) {

    ServerSocket s = new ServerSocket(PORT);
    while(true) new MyServerThread(s.accept());

  } 
```

你的服务器线程：

```
//MyServerThread.java
public class MyServerThread implements Runnable {

  private InputStream in = null;
  private OutputStream out = null;

  public MyServerThread(Socket s) {

    in = s.getInputStream();
    out = s.getOutputStream();

    (new Thread(this)).start();
  }

  public void run() {
    //do stuff with **in** and **out** to interact with client
  }
} 
```

此示例中缺少：

*   错误处理
*   `close()`获取套接字/流
*   关闭服务器
*   客户端

希望这能让您对它通常的外观有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:39:40.283

好的，所以服务器是这样的：

公共类 KnockKnockServer { public static void main(String[] args) 抛出 IOException {

```
 ServerSocket serverSocket = null;
        RunnableThread rt;

        try { serverSocket = new ServerSocket(4443);} 
        catch (IOException e) 
        {
            System.err.println("Could not listen on port: 4443.");
            System.exit(1);
        }

        Socket clientSocket = null;
        try 
        { 

            clientSocket = serverSocket.accept();
            rt = new RunnableThread("t1",clientSocket);
        } 
        catch (IOException e)
        {
            System.err.println("Accept failed.");
            System.exit(1);
        }

        serverSocket.close();
    }
}

        class RunnableThread implements Runnable 
{

    Thread runner;
    Socket skt;

    public RunnableThread(String threadName,Socket cliSock) 
    {
        runner = new Thread(this, threadName); // (1) Create a new thread.

        skt = cliSock;
        runner.run();
    }
    @SuppressWarnings("deprecation")
    public void run() 
    {

        //Display info about this particular thread
        //System.out.println(Thread.currentThread());

        //PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
        BufferedReader brIn;
        String s = new String();

        try
        {

            brIn = new BufferedReader(new InputStreamReader(skt.getInputStream()));

            while(s != null)
            {

                s = brIn.readLine();
                System.out.println("#####");
                System.out.println(s);
            }

        } 
        catch (IOException e1) {e1.printStackTrace();    }

    }
} 
```

在客户端中，唯一与服务器交互的是当我从字典文件 (StressTextFile.txt) 中读取单词并通过 Socket 发送时：

```
public void SendToServer()
    {

        new Thread() 
            {
              public void run() 
              {
                try
                 {
                    String message,file = new String("StressTextFile.txt");
                    File filee = new File(file);
                    long length;

                     // Open the file 
                     FileInputStream fstream = new FileInputStream(file);
                     // Get the object of DataInputStream
                     DataInputStream in = new DataInputStream(fstream);
                     BufferedReader br = new BufferedReader(new InputStreamReader(in));
                     String strLine = new String();

                     length  = filee.length();

                     ProgressBar.setMaximum((int)length); //we're going to get this many bytes
                     ProgressBar.setValue(0); //we've gotten 0 bytes so far
                      //Read File Line By Line

                    font1 = new Font("Helvetica", Font.PLAIN, 18);
                    font1.isBold();
                    color = new Color( 74,118,110);
                    TextArea1.setForeground(color);
                    TextArea1.setFont(font1);

                     int soma=0;
                        while(in.readLine() != null)
                        {
                            strLine = in.readLine();  // reads from file
                            //System.out.println(strLine);

                            TextArea1.append(strLine+"\n");

                            pwOut.write(strLine);
                            pwOut.flush();

                            soma+=strLine.length()+1;
                            ProgressBar.setValue(ProgressBar.getValue()+(strLine.length()+1)*2);
                            ProgressBar.repaint();              
                        };

                        br.close();
                        pwOut.close();
                        Skt.close();
                }catch (Exception e){  System.err.println("Error: " + e.getMessage());  }
              }
            }.start();
    } 
```

***对于文档：***

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

import javax.swing.*;
import javax.swing.border.Border;

public class Graphics extends JFrame  implements ActionListener 
{

    private JPanel Panel;
    public JLabel LabelConnect;
    public JLabel DataSent;
    public JLabel DataReceived;
    private JTextField TextFieldOutPUT;
    private JButton ConnectButton;
    private JButton Sendinformation;
    private int value;
    private JTextArea TextArea1; 
    private JTextArea TextArea2; 
    private JProgressBar ProgressBar;
    private Socket Skt;
    private PrintWriter pwOut;
    private boolean CONNECTED;
    private Border border;
    private Color color;
    private Font font1;
    private JScrollPane ScrollBar1;
    private JScrollPane ScrollBar2;

    public Graphics() throws UnknownHostException, IOException
    {

        value = 0;

        Panel = new JPanel();

        font1 = new Font("Helvetica", Font.PLAIN, 15);
        font1.isBold();

        LabelConnect = new JLabel();
        DataReceived = new JLabel();
        DataSent = new JLabel();
        TextFieldOutPUT = new JTextField();
        ConnectButton = new JButton("Connect");
        TextArea1 = new JTextArea("ola");
        TextArea2 = new JTextArea("Adeus");
        Sendinformation = new JButton("Send");
        ProgressBar = new JProgressBar();

        Sendinformation.setLayout(null);
        Sendinformation.setBounds(340, 450, 100, 25);
        Sendinformation.setVisible(true);
        Sendinformation.addActionListener(this);

        color = new Color( 211,211,211);

        TextArea1.setVisible(true);
        TextArea1.setLayout(null);
        TextArea2.setVisible(true);
        TextArea2.setLayout(null);

        ScrollBar1 = new JScrollPane(TextArea1);
        ScrollBar1.setLayout(null);
        ScrollBar1.setVisible(true);
        ScrollBar1.setBounds(210,40,15,400);
        ScrollBar1.setEnabled(true);
        ScrollBar1.setVisible(true);
        ScrollBar1.setBackground(color);
        ScrollBar1.setBounds(10,40,210,400);

        ScrollBar2 = new JScrollPane(TextArea2);
        ScrollBar2.setLayout(null);
        ScrollBar2.setVisible(true);
        ScrollBar2.setEnabled(true);
        ScrollBar2.setBackground(color);
        ScrollBar2.setBounds(230,40,210,400);
        ScrollBar2.setLayout(null);
        ScrollBar2.setVisible(true);

        border = BorderFactory.createTitledBorder("Reading...");

        ProgressBar.setLayout(null);
        ProgressBar.setBounds(10,450,320,25);
        ProgressBar.setValue(0);
        ProgressBar.setStringPainted(true);

        //ProgressBar.setBorderPainted(border);
        ProgressBar.setVisible(true);

        TextFieldOutPUT.setVisible(true);
        TextFieldOutPUT.setBounds(10,500,320,25);

        ConnectButton.addActionListener(this);
        ConnectButton.setLayout(null);
        ConnectButton.setVisible(true);
        ConnectButton.setBounds(340, 500, 100, 25);

        LabelConnect.setBounds(10,478,320,25);
        LabelConnect.setVisible(true);
        LabelConnect.setFont(font1);
        LabelConnect.setForeground(Color.WHITE);
        LabelConnect.setText("Connect");

        font1 = new Font("Helvetica", Font.PLAIN, 18);

        DataReceived.setBounds(235,10,200,25);
        DataReceived.setVisible(true);
        DataReceived.setFont(font1);
        DataReceived.setForeground(Color.WHITE);
        DataReceived.setText("Data Received");

        DataSent.setBounds(15,10,200,25);
        DataSent.setVisible(true);
        DataSent.setFont(font1);
        DataSent.setForeground(Color.WHITE);
        DataSent.setText("Data Sent");

        color = new Color(108,166,205);
        Panel.setBackground(color);

        Panel.add(ScrollBar1);
        Panel.add(ScrollBar2);
        Panel.add(DataSent);
        Panel.add(DataReceived);
        Panel.add(Sendinformation);
        Panel.add(ProgressBar);
        Panel.add(ConnectButton);
        Panel.add(TextFieldOutPUT);
        Panel.add(LabelConnect);
        Panel.setVisible(true);
        Panel.setLayout(null);
        Panel.setBounds(500,400,800,600);

        add(Panel);
        this.setSize(459,560 );

        setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) 
    {

        //Object obj = new obj(e.get)

        if(e.getSource() == ConnectButton)
        {
            if(!CONNECTED)
            {
                String s = new String(TextFieldOutPUT.getText());

                try {Skt = new Socket(s, 4443); Skt.close();
                } catch (UnknownHostException e2) {e2.printStackTrace(); JOptionPane.showMessageDialog(Panel, "Connection could not be established!!"); return;
                } catch (IOException e2) {e2.printStackTrace(); JOptionPane.showMessageDialog(Panel, "Connection could not be established!!");return;}  

                System.out.println(s);

                try {ConnectCLIENT(s);
                } catch (UnknownHostException e1) {e1.printStackTrace();
                } catch (IOException e1) {e1.printStackTrace();}
            }
            else
            {
                try {   Skt.close();  } catch (IOException e1){  e1.printStackTrace();  }
                ConnectButton.setText("Connect");
                TextFieldOutPUT.setEditable(true);
                CONNECTED = false;
                Panel.repaint();

            }

        }

        if(e.getSource() == Sendinformation){ 

            System.out.print("Sendinformation");
            if(CONNECTED)
                SendToServer(); 
            else
                JOptionPane.showMessageDialog(Panel, "You are not connecte to the server!! Please connect!!");

        }

    }

    public void ConnectCLIENT(String socketStr) throws UnknownHostException, IOException
    {

        try{
            Skt = new Socket(socketStr, 4443);
            pwOut = new PrintWriter(Skt.getOutputStream(),true);
            System.out.print("Connected");
            TextFieldOutPUT.setEditable(false);
            ConnectButton.setText("Disconnect");
            CONNECTED = true;
            JOptionPane.showMessageDialog(Panel, "Connection Sucessfully established!!");
            Panel.repaint();
            }
        catch(Exception E){E.printStackTrace();}

    }

    public void SendToServer()
    {

        new Thread() 
            {
              public void run() 
              {
                try
                 {
                    String message,file = new String("StressTextFile.txt");
                    File filee = new File(file);
                    long length;

                     // Open the file 
                     FileInputStream fstream = new FileInputStream(file);
                     // Get the object of DataInputStream
                     DataInputStream in = new DataInputStream(fstream);
                     BufferedReader br = new BufferedReader(new InputStreamReader(in));
                     String strLine = new String();

                     length  = filee.length();

                     ProgressBar.setMaximum((int)length); //we're going to get this many bytes
                     ProgressBar.setValue(0); //we've gotten 0 bytes so far
                      //Read File Line By Line

                    font1 = new Font("Helvetica", Font.PLAIN, 18);
                    font1.isBold();
                    color = new Color( 74,118,110);
                    TextArea1.setForeground(color);
                    TextArea1.setFont(font1);

                     int soma=0;
                        while(in.readLine() != null)
                        {
                            strLine = in.readLine();  // reads from file
                            //System.out.println(strLine);

                            TextArea1.append(strLine+"\n");

                            pwOut.write(strLine);
                            pwOut.flush();

                            soma+=strLine.length()+1;
                            ProgressBar.setValue(ProgressBar.getValue()+(strLine.length()+1)*2);
                            ProgressBar.repaint();              
                        };

                        br.close();
                        pwOut.close();
                        Skt.close();
                }catch (Exception e){  System.err.println("Error: " + e.getMessage());  }
              }
            }.start();
    }

} 
```

# javascript - javascript / jquery：检测两个元素中的哪一个在前面

> ID：12939389
> 
> 赞同：0
> 
> 时间：2012-10-17T16:54:21.337
> 
> 标签：javascript, jquery, css, positioning

我有一堆元素，通过各种方法（绝对、固定和静态）定位，具有各种 z-indexes，其中一些是其他元素的父级。对于任何两个元素，是否有一种简单、通用的方法来确定哪个在另一个之前？

我正在考虑的方法是这样的：

```
Let A and B be the two elements.  
Let X and Y be two sibling elements such that X is A or an ancestor of A, and Y is B or an ancestor of B.  
If X has a higher z-index than Y, then A is in front of B. 
```

但是，对于一个简单的问题，这似乎有很多代码，而且我还担心可能存在无法给出正确答案的极端情况。有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:31:11.757

所以这就是我想出的。不是很好。做出一些通常对我有用但可能对你不起作用的假设：

*   假设孩子总是在他们的父母面前（你可以通过混合相对定位和绝对定位来打破这个假设）
*   假设您没有给两个兄弟姐妹相同的 z-index。将 auto 计为 0。

这是代码（在coffeescript中，使用jquery）：

```
is_in_front_of = (div1, div2) ->

    z_index = (d) ->
        z = d.css 'z-index'
        z ?= 0
        if z == 'auto' then z = 0
        return z

    if $.contains div1[0], div2[0]
        return false

    if $.contains div2[0], div1[0]
        return true            

    while div1.parent().length > 0 and not $.contains div1.parent()[0], div2[0]
        div1 = div1.parent()

    while div2.parent().length > 0 and not $.contains div2.parent()[0], div1[0]
        div2 = div2.parent()

    return z_index(div1) > z_index(div2) 
```

# css - 无法弄清楚为什么图像在ie7中堆叠

> ID：12939394
> 
> 赞同：0
> 
> 时间：2012-10-17T16:54:33.713
> 
> 标签：css, internet-explorer-7

在 Internet Explorer 中访问：[http](http://appointview.com/pricing) ://appointview.com/pricing （我使用的是版本 9，但在开发工具中将其设置为 IE7 模式）。

在主体区域中，图像是堆叠的，但应该从左到右浮动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:29:28.863

看起来这是一个浮动元素以及将它们设置为 inline-block 的问题

# sql - 并行化 oracle union 查询问题

> ID：12939400
> 
> 赞同：4
> 
> 时间：2012-10-17T16:54:48.803
> 
> 标签：sql, oracle, oracle11gr1

我有一个这样的 Oralce 查询：

```
Sub_query1
Union
Sub_query2; 
```

我想并行化查询。我在网上搜索，发现有人说 UNION 不能并行化，因为子查询是串行运行的，而 UNION 直到两个子查询完成后才会运行。他们是人们说 UNION 可以并行化的。我的问题是：

> ```
>  (1) can a UNION query be parallezied? if yes, how? if no, why?
>          (2) can I just parallelize the two sub queries? 
> ```

我正在使用 Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:13:20.043

我认为您对同时运行两个查询与并行运行查询感到困惑。SQL 是一种描述性语言，它被 SQL 引擎/优化器翻译成代码。此查询计划由许多不同的组件组成，用于从表中检索数据、执行连接、执行聚合等。

Oracle 为您的联合查询生成查询计划。查询计划的每个组件都可以使用所有可用的处理器（假设满足正确的条件）。但是，每个组件基本上一次运行一个（合理的近似值）。因此，查询的组件是并行化的，尽管两个子查询不会同时运行。

一条忠告。每当您考虑使用 a`UNION`时，您应该问问自己 a`UNION ALL`是否也可以工作。`UNION ALL`效率更高，因为它不必删除最终结果集上的重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T05:20:17.130

是的，正如您已经发现的那样，UNION 查询可以并行运行。

要完全了解这里发生了什么，您可能需要阅读[VLDB 和分区指南中的并行执行](http://docs.oracle.com/cd/E11882_01/server.112/e25523/parallel002.htm#i1010963)。

操作内并行性几乎可以在任何地方发生。互操作并行只发生在生产者和消费者之间。在这种情况下，这意味着 UNION（消费者）可以在整个时间内并行执行。每个子查询（生产者）将并行执行，但不会彼此同时执行。

通过查看查询的活动报告，您可以在下面的示例中看到这种情况。

```
--Create two simple tables
create table test1(a number);
create table test2(a number);

--Populate them with 10 million rows
begin
    for i in 1 .. 100 loop
        insert into test1 select level from dual connect by level <= 100000;
        insert into test2 select level from dual connect by level <= 100000;
    end loop;
end;
/
commit;

--Gather stats
begin
    dbms_stats.gather_table_stats(user, 'TEST1');
    dbms_stats.gather_table_stats(user, 'TEST2');
end;
/

--Run a simple UNION.
select /*+ parallel */ count(*) from
(
   select a from test1 join test2 using (a) where a <= 1000
   union
   select a from test2 join test1 using (a) where a <= 1000
);

--Find the SQL_ID by looking at v$sql, then get the active report
--(which must be saved and viewed in a browser)
select dbms_sqltune.report_sql_monitor(sql_id => 'bv5c18gyykntv', type => 'active')
from dual; 
```

这是输出的一部分。它很难阅读，但它显示了计划的前 11 个步骤 UNION 如何始终运行。第一个子查询，接下来的 9 行，在查询的前半部分运行。然后第二个子查询，最后 9 行，在查询的后半部分运行。 ![并行 UNION 查询的活动报告](../Images/b448264d8568a73b76d7619dfee4c927.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:23:13.033

通过一些测试和比较执行计划，我终于找到了一种并行化联合的方法，如下所示：

```
select/* +parallel (Result) */ * from
(Sub_query1
Union
Sub_query2) Result; 
```

通过这样做，时间和 CPU 成本几乎是串行版本的一半。向两个子查询添加并行提示不会改变时间和 CPU 成本。

# java - SWT TitleAreaDialog：如何在 ButtonArea 的 LEFT 上放置一个 Button？

> ID：12939402
> 
> 赞同：4
> 
> 时间：2012-10-17T16:54:51.883
> 
> 标签：java, dialog, swt

**我刚刚创建了一个扩展TitleAreaDialog**的新类。

我覆盖了方法**createButtonsForButtonBar**并且能够添加新按钮。但是把一个放在**左边**？？（默认是正确的，除了 OK 和 CANCEL）。

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:17:36.130

在这种情况下，不要覆盖`createButtonsForButtonBar`，这将已经设置`GridLayout`按钮位于右侧。取而代之的是 override `createButtonBar`，这将使您可以控制那里的整个复合材料。

很容易在左侧添加一些东西，然后让 SWT 为您放置 OK / Cancel 按钮 - 我建议这样做，因为否则您将不得不复制“默认”按钮放置位置的逻辑（在 Mac 上最右边OS 和最近的 GNOME，在 Win32 和旧版 GNOME 上的取消按钮的左侧。）在这种情况下，您可以设置一个覆盖整个按钮栏的组合，然后让 SWT 在最右侧绘制其按钮栏。

例如：

```
@Override
protected Control createButtonBar(final Composite parent)
{
    final Composite buttonBar = new Composite(parent, SWT.NONE);

    final GridLayout layout = new GridLayout();
    layout.numColumns = 2;
    layout.makeColumnsEqualWidth = false;
    layout.horizontalSpacing = convertHorizontalDLUsToPixels(IDialogConstants.HORIZONTAL_SPACING);
    buttonBar.setLayout(layout);

    final GridData data = new GridData(SWT.FILL, SWT.BOTTOM, true, false);
    data.grabExcessHorizontalSpace = true;
    data.grabExcessVerticalSpace = false;
    buttonBar.setLayoutData(data);

    buttonBar.setFont(parent.getFont());

    // place a button on the left
    final Button leftButton = new Button(buttonBar, SWT.PUSH);
    leftButton.setText("Left!");

    final GridData leftButtonData = new GridData(SWT.LEFT, SWT.CENTER, true, true);
    leftButtonData.grabExcessHorizontalSpace = true;
    leftButtonData.horizontalIndent = convertHorizontalDLUsToPixels(IDialogConstants.HORIZONTAL_MARGIN);
    leftButton.setLayoutData(leftButtonData);

    // add the dialog's button bar to the right
    final Control buttonControl = super.createButtonBar(buttonBar);
    buttonControl.setLayoutData(new GridData(SWT.RIGHT, SWT.CENTER, true, false));

    return buttonBar;
} 
```

# php - 从文本文件中获取数据到数组中并在 PHP 中绘制

> ID：12939404
> 
> 赞同：0
> 
> 时间：2012-10-17T16:54:57.403
> 
> 标签：php

我正在尝试从文本文件中读取数据，然后使用 PHPplot 绘制它。文本文件如下所示：

```
0   24
1   28
2   30
3   35
4   40 
```

我正在尝试将数据转换为：

```
array(array(0,24),array(1,28),array(2,30),array(3,35),array(4,40)) 
```

我在php中的代码是这样的

```
 $file = fopen("data2.txt", "r");;
            while (!feof($file)) {
                $line_of_text .= fgets($file);
            }
            $members = explode("\n", $line_of_text);
            fclose($file);

for ($j=0; $j<=10; $j++)
  {       
  $parts[$j]=explode("   ", $members[$j]);       
  }
# plot 
require_once 'phplot.php';
    for ($x = 0; $x <= 5; $x += 1)
      $data[] = array('', $parts[$x][0], $parts[$x][1]);
    $plot = new PHPlot(800, 600);
    $plot->SetPrintImage(False); // No automatic output
    $plot->SetImageBorderType('plain');
    $plot->SetPlotType('lines');
    $plot->SetDataType('data-data');
    $plot->SetDataValues($data);
    $plot->SetPlotAreaWorld(0, 0, 10, 40);
    $plot->SetDrawYGrid(True);
    $plot->DrawGraph(); 
```

问题在于：

```
$data[] = array('', $parts[$x][0], $parts[$x][1]); 
```

它不会绘制 $parts[$x][1] 数字。当我说 print $parts[$x][1] values 它会在浏览器上打印它，但不要绘制它。有趣的是，当我要求它进行绘图时

```
$data[] = array('', $parts[$x][0], $parts[$x][1]); 
```

这次是剧情！！

var_dump($parts) 给出：

```
array(11) { [0]=> array(2) { [0]=> string(1) "0" [1]=> string(3) "24 " } [1]=> array(2) { [0]=> string(1) "1" [1]=> string(3) "28 " } [2]=> array(2) { [0]=> string(1) "2" [1]=> string(3) "30 " } [3]=> array(2) { [0]=> string(1) "3" [1]=> string(3) "35 " } [4]=> array(2) { [0]=> string(1) "4" [1]=> string(2) "40" } [5]=> array(1) { [0]=> string(0) "" } [6]=> array(1) { [0]=> string(0) "" } [7]=> array(1) { [0]=> string(0) "" } [8]=> array(1) { [0]=> string(0) "" } [9]=> array(1) { [0]=> string(0) "" } [10]=> array(1) { [0]=> string(0) "" } } 
```

var_dump($data) 也给出了：

```
array(5) { [0]=> array(3) { [0]=> string(0) "" [1]=> int(0) [2]=> string(3) "24 " } [1]=> array(3) { [0]=> string(0) "" [1]=> int(1) [2]=> string(3) "28 " } [2]=> array(3) { [0]=> string(0) "" [1]=> int(2) [2]=> string(3) "30 " } [3]=> array(3) { [0]=> string(0) "" [1]=> int(3) [2]=> string(3) "35 " } [4]=> array(3) { [0]=> string(0) "" [1]=> int(4) [2]=> string(2) "40" } } 
```

请帮助我非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:13:07.833

Reza，根据您的 vardump，您的数组中的值是字符串，而您在问题中显示的数组具有整数。这是将这些字符串转换为整数的一种方法。

```
 for ($j=0; $j<=10; $j++){
        $tmp=explode("   ", $members[$j]);
        for($k=0; $k<count($tmp); $k++){
            $tmp[$k] = intval($tmp[$k]);
        }
        $parts[$j]=$tmp;     
    } 
```

# jquery - 无法循环 .click 函数（创建多个按钮）

> ID：12939411
> 
> 赞同：1
> 
> 时间：2012-10-17T16:55:06.767
> 
> 标签：jquery, html, ajax, each

我正在尝试创建多个按钮，每个按钮都在做某事。它在循环之外工作得很好`each`，但是当我在`click`函数中插入`each`函数时，它就不起作用了。

```
$.each(data.arr, function(i, s){
    html += '<div id="mybtn'+s.id+'"><button class="first">Btn1</button><button class="second">Btn2</button></div>';

    var btnclass="#mybtn"+s.id+" .first";

    $(btnclass).click(function(){
      //do something 
    });
}); 
```

请让我知道出了什么问题...

**非常感谢！！！**

伊兰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:58:00.227

id 选择器和类之间缺少空格

```
var btnclass="#mybtn"+s.id " +  .first";
                          ^ 
                        Space here .. And the 
     + sign should come after the string 
```

还可以尝试将单击事件移到 for 循环之外并将其委托...

```
$.each(data.arr, function(i, s){
    html += '<div id="mybtn'+s.id+'"><button class="first">Btn1</button><button class="second">Btn2</button></div>';

});

 $('body').on('click', '.first' , function(){
      //do something 
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:08:44.977

```
$.each(data.arr, function(i, s){
  html += '<div id="mybtn'+s.id+'"><button class="first">Btn1</button><button   class="second">Btn2</button></div>';
  var btnclass="#mybtn"+Id+" .first";
  $(btnclass).click(function(){
    //do something });
  });
}); 
```

1.  您将事件分配给`<div>`，而不是按钮

2.  这也失败了，因为你没有“Id”

3.  从不将 HTML 添加到任何内容 = 没有任何事件

“正确”的方式（猜测意图）：

```
$.each(data.arr, function(i, s){
  var html = '<div id="mydiv'+s.id+'">';
  html += '<button id="mybtn1'+s.id+'" class="first clickbtn">Btn1</button>';
  html += '<button id="mybtn2'+s.id+'" class="second clickbtn">Btn2</button>';
  html += '</div>';

  $(someElement).append(html);

  $(".clickbtn").on('click', function(){
     //do something });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:58:58.100

不

> var btnclass="#mybtn"+Id+" .first";

应该

> var btnclass="#mybtn"+s.id+" .first";

?

此外，您需要将 html 变量的内容附加到 DOM，以便单击事件可以找到它。

# http - 检索 HTTP 响应，即使来自 WinHTTP 的格式错误

> ID：12939416
> 
> 赞同：3
> 
> 时间：2012-10-17T16:55:21.147
> 
> 标签：http, winapi, winhttp

例如，使用 WinHTTP，如果 HTTP 标头有问题，WinHttpReceiveResponse 将返回 ERROR_WINHTTP_INVALID_SERVER_RESPONSE。

无论如何都可以获取返回的数据，尽管它格式错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:12:11.137

在这种情况下，直接的方法是绕过 WinHTTP API，并使用套接字进行“原始”读取，并尽最大努力尝试解释响应标头。

如果可以找到匹配的行`content-length`，那么即使标题无效，您至少也可以获取所有数据。要尝试这种方法，要么在调试器中运行代码并查看 Web 服务器实际发送的内容，要么尝试捕获数据包流并查看第一个数据包内部以找到原始字节。

显然，您的结果将取决于响应的实际问题。

# mysql - 无法在 Macos X Snow Leopard 中为 root /localhost Mysql 设置密码

> ID：12939422
> 
> 赞同：0
> 
> 时间：2012-10-17T16:55:30.947
> 
> 标签：mysql, osx-snow-leopard, mysql-workbench

尝试在 Macos x Snow Leopard 中为 Mysql 配置 localhost 数据库密码：

```
mysqladmin -u root password 'password' 
```

我得到了这个错误：

> -bash：mysqladmin：找不到命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:06:07.573

如果您使用来自 mysql.com 的 OS X mysql 安装程序，则需要将 mysql bin 添加到您的路径中。例如，您可以在您`.bash_profile`的 .

```
PATH="/usr/local/mysql/bin:$PATH" 
```

然后您应该能够输入`which mysqladmin`并查看`/usr/local/mysql/bin/mysqladmin`结果。

# function - 在 shell 脚本中使用 tee 进行 stdoutt 和 stderr 重定向

> ID：12939424
> 
> 赞同：0
> 
> 时间：2012-10-17T16:55:32.530
> 
> 标签：function, unix, stdout, io-redirection, tee

我正在尝试使用以下代码将输出/错误打印到控制台和日志文件。

乐趣1（）{

回声“在 fun1 中”

乐趣2

变量=5

}

乐趣2（）{

回声“在 fun2 中”

}

乐趣1 2>&1 | tee -a testlog.txt

echo $var # 打印空值

在 fun1 执行后有什么方法可以将 var 的值打印为 5？我需要控制台和日志文件中的输出。fun1 也应该只执行一次。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:06:31.770

如果您将其编写为 bash 脚本，则可以：

```
#!/bin/bash

exec 3>&1 1> >(tee testlog.txt) 2>&1

fun1(){
    echo 'inside fun1'
    fun2
    var=5
}

fun2(){
    echo 'inside fun2'
}

fun1
echo "$var" 
```

如果您想将其作为普通的 bourn shell 执行，则可以将其分成两个脚本：

脚本2.sh：

```
#!/bin/sh

fun1(){
    echo 'inside fun1'
    fun2
    var=5
}

fun2(){
    echo 'inside fun2'
}

fun1
echo $var 
```

和 script1.sh：

```
#!/bin/sh

script2.sh 2>&1 | tee testlog.txt 
```

# list - Prolog，访问列表的特定成员？

> ID：12939425
> 
> 赞同：23
> 
> 时间：2012-10-17T16:55:39.043
> 
> 标签：list, prolog, unification

谁能告诉我如何访问序言中列表的特定成员？例如，我需要访问传递给规则的列表的第三个或第四个元素？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-17T17:06:47.410

`nth0(Ind, Lst, Elem)`或者`nth1(Ind, Lst, Elem)`使用 SWI-Prolog，`nth0`第一个元素的索引为 0。

例如，

```
nth0(3, [a, b, c, d, e], Elem). %Binds d to Elem
nth1(3, [a, b, c, d, e], Elem). %Binds c to Elem

nth0(Ind, [a, b, c, d, e], d).  %Binds 3 to Ind
nth0(3, [a, b, c, X, e], d).    %Binds d to X

nth0(3, [a, b, c, d, e], c).    %Fails. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T20:44:19.250

当您需要访问的索引非常小时，您可以使用模式匹配。假设我们需要第三个元素或第四个元素：

```
third([_,_,E|_], E).
fourth([_,_,_,E|_], E). 
```

如果使用“内联”，这可能会更有用，当列表包含具有位置相关性的信息时。例如

```
your_rule([_,_,E|Rest], Accum, Result) :-
   Sum is Accum + E,
   your_rule(Rest, Sum, Result).
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:30:42.137

序言列表是经典列表。访问不是直接的。你必须迭代才能找到你需要的东西。

您可以通过以下方式获取第 n 个元素：

```
foo( [X1,X2,X3,X4,...,XN|Xs] ) :- ... 
```

其中 [code]X[/code] [*n*]是列表的*第 n 个*元素。对于大于一个小值的*n*是不切实际的。这大致类似于 C/C++ 指针表达式：

```
LLNode *nthElement = root->next->...->next ; 
```

否则，您必须使用内置谓词或自制谓词遍历列表以找到所需的元素，例如：

foo(Xs) :- nth_element(Xs,9,X) , ...

nth_element(Xs,N,X) :- nth_element(Xs,0,N,X) 。

nth_element([X|Xs],N,N,X) :- !. nth_element([_|Xs],T,N,X) :- T1 是 T+1 ，nth_element(Xs,T1,N,X)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T05:51:34.810

使用[`func`](http://www.swi-prolog.org/pack/list?p=func)SWI-Prolog 的库，可以以更简洁的方式编写列表推导：

```
:- use_module(library(func)).

nth0((Index, List), Result) :-
    nth0(Index,List,Result). 
```

现在，您可以访问列表的两个元素并将它们添加在一起，如下所示：

```
example :-
    List = [1,5,12,9],
    Y is (nth0 $ (0, List)) + (nth0 $(3,List)), %add the 1st and 4th elements of this list
    writeln(Y). %prints 10 
```

# c - 在 C 中为数组的每个元素添加前缀

> ID：12939430
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:56:03.603
> 
> 标签：c, arrays

你好，制作一个读取文本文件的小程序，然后创建一个输出文本文件，其中行号前缀在字符串前面。

由于使用 fgets 调用输入文件。我想在将其输出到纺织品之前更改它存储的字符串数组。

示例原始文件

```
Hello
How Are you?

good. 
```

输出文件

```
1 Hello
2 How Are you?
3
4 good. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:54:01.400

我希望这个程序采取的下一步是不打印空行。但就我最初提出的问题而言，这就像一个魅力。感谢@optimist 的洞察力。

```
 while( ( fgets( b, MAX, src ) ) != NULL )
 {
    linecount++;
    fprintf( dst, "%d: ", linecount );
     fputs( b, dst );

 } 
```

# java - 无法在 Android 中写入文件

> ID：12939434
> 
> 赞同：1
> 
> 时间：2012-10-17T16:56:16.203
> 
> 标签：java, android, file

以下代码片段似乎成功创建了一个文件，并且该`writeData`函数适当地写入`StringWriter`，但是该文件似乎是空的..

```
fileOutputStream = new FileOutputStream(selectedFile);

if(!selectedFile.exists())
    selectedFile.createNewFile();

StringWriter writer = new StringWriter();
serializer.setOutput(writer);

Log.i(TAG, "- Output is asigned to the special Serializer object");     

/* The target data is written to the a string buffer in the StringWriter */
writeData(serializer, templateData); 

Log.i(TAG, String.format("- New file Data written: %s", writer.toString())); // Logcat prints the file data from this string beautifully..      

fileOutputStream.write(writer.toString().getBytes()); // Not happening?! Why :(
fileOutputStream.close(); 
```

字符串肯定不是空的！

然而，创建的文件是空的！我也尝试过`OuputStreamWriter`类似的变化，但文件没有写入。为什么？我正在 Nexus 7 平板电脑上对此进行测试，并且我拥有`WRITE_EXTERNAL_STORAGE`权限集。

更新：所有文件都是在这个过程中创建的。文件的访问权限创建为“_rw”。

我使用的其他方法给出了完全相同的结果：

```
FileWriter fw = new FileWriter(selectedFile.getPath());
fw.write(writer.toString());
fw.flush();
fw.close(); 
```

在所有情况下，文件都是通过 createNewFile() 创建的，但从未向其中写入任何数据。该应用程序正常运行而不会抛出任何东西。我只是不明白:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:30:13.340

如果您在写入文件后调用 FileOutputStream.FileOutputStream(File)，则所有数据都将被删除。查看此线程：[如何使用 FileOutputStream 写入数据而不丢失旧数据？](https://stackoverflow.com/questions/8544771/how-to-write-data-with-fileoutputstream-without-losing-old-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:14:32.893

```
FileOutputStream fOut = openFileOutput(selectedFile);//u can use (filename, Context.MODE_APPEND | Context.MODE_WORLD_READABLE)

if(!selectedFile.exists())
    selectedFile.createNewFile();

OutputStreamWriter osw = new OutputStreamWriter(fOut);
      osw.append(templateData);
      osw.flush();
      osw.close(); 
```

# html - iOS Safari Mobile 禁用选择输入的上一个和下一个

> ID：12939438
> 
> 赞同：13
> 
> 时间：2012-10-17T16:56:39.900
> 
> 标签：html, ios, select, input, mobile-safari

上周五我发现了一个关于这个问题的类似问题，但似乎无法再次找到它。如果有人能朝正确的方向戳我，那就太好了。

基本上我在一个页面上有多个选择菜单。第一个填充加载，第二个填充确定第一个的选择。很简单。

但是，在 iOS 设备中，当您点击选择元素时，它会启动 iOS 滚动条供您进行选择。如果有人使用原生 iOS`previous`或`next`按钮，下面的`<select>`输入不会收集之前的选择数据。您必须实际点击`done`然后启动下一个选择菜单才能使填充的结果准确。

有一个名为[http://m.lemonfree.com](http://m.lemonfree.com)的网站会强制您点击`done`而不是`prev/next`，并且还会阻止您点击 iOS 选择菜单以关闭选择提示。本质上是强迫用户选择`done`.

我很想知道他们是如何实现这个功能的。

干杯!

这是我的代码以防万一：

```
<form method="post" action="list.php" class="striped-bg-inverted">
  <p>
    <label for="make">Make</label>
    <select name="make" id="make" required="required">
        <option selected>Select a Make</option>
      <?php foreach ($usedMakes->MakeResult as $MakeResult) { ?>
        <option value="<?php echo $MakeResult->makeId; ?>"><?php echo $MakeResult->makeName; ?></option>
      <?php } ?>
    </select>
  </p>
  <p>
    <label for="model">Model</label>
    <select name="model" id="model" required="required">
      <option value="" selected>Select a Model</option>
    </select>
  </p>
  <p>
    <button name="submit" id="submit">&nbsp;Submit&nbsp;</button>
  </p>
</form> 
```

我的 JavaScript：

```
$("#make").change(function() {
  var makeId = $(this).val();
  $.ajax({
    url: "process.inc.php?makeId=" + makeId,
    type: "GET",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
      var list = "";
      for (i = 0 ; i < data.length; i++) {
        var modelId = data[i].ModelResult.modelId;
        var modelName = data[i].ModelResult.modelName;
        list += "<option value=\"" + modelId + "\">" + modelName + "</option>";
      };
      var theSelect = $("#model");
      theSelect.find("option:gt(0)").remove();
      theSelect.append(list);
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-21T07:57:57.033

使用 html`tabindex="nubmer"`属性 ( [http://www.w3schools.com/tags/att_global_tabindex.asp](http://www.w3schools.com/tags/att_global_tabindex.asp) )

要防止下一个/上一个输入或选择使用`tabindex="-1"`：

```
<input tabindex="-1" /> 
```

**UPD**：我检查了[http://m.lemonfree.com/](http://m.lemonfree.com/)脚本并没有发现这个表单有什么神奇之处，请参见下面的代码，这就是他们所拥有的（所以尝试使用`tabindex`）：

```
$('#PostCode_text').click(function() {
    $('#PostCode_text').val('');
});

var searchForm = new LemonFree_SearchForm();

$('#Make_select').change(function() {
    searchForm.loadVastModels(this.value, '#Model_select');
});

$('#Search_form').submit(function() {
    if (Validate.isZipCode($('#PostCode_text').val())) {
        return true;
    } else {
        alert('Please enter a 5 digit zip code');
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T04:50:33.263

我制作了一个模块来解决这个特殊问题。[这是 GitHub 存储库](https://github.com/ChrisWren/touch-input-nav)，下面是它的 gif 动图。

![在此处输入图像描述](../Images/a87621135ef5862f46791cdf2e768aa3.png)

# iphone - ios6 web app删除隐私设置

> ID：12939443
> 
> 赞同：1
> 
> 时间：2012-10-17T16:57:08.173
> 
> 标签：iphone, ios, ios6, iphone-web-app

我正在开发一个网络应用程序并在运行 iOS6 的 iPhone 5 上进行测试。

该应用程序作为主屏幕应用程序运行，并且在使用期间请求访问我允许的手机上的相机胶卷，这为我的网络应用程序在手机上的设置>隐私>照片中添加了一个切换。

我已经放弃了这个网络应用程序并删除了主屏幕图标，但切换仍然显示在隐私设置中，我想删除这个切换，但我似乎找不到这样做的方法。

任何人都可以帮忙吗？

# database - Zend_Db_Adapter_Abstract->getConnection()->exec() api？

> ID：12939445
> 
> 赞同：0
> 
> 时间：2012-10-17T16:57:24.613
> 
> 标签：database, zend-framework, exec

就像标题所说的那样。我在 Zend_Db_Adapter_Abstract 类的 getConnection 方法中找不到 exec() api 的 api、文档或示例。

有效/无效的 sql 脚本的输出是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:00:53.267

所以我做了一些自我测试，发现：

*   成功代码返回 0
*   错误代码抛出异常

我想没有其他情况（`code != 0?`）..所以我把整个代码放在一个 try-catch 和 eval`$code === 0`中以防万一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:31:23.377

这取决于您使用的适配器。如果您正在使用，`Pdo`那么您只是在调用[`PDO::exec()`](http://www.php.net/manual/en/pdo.exec.php)时调用`Zend_Db_Adapter_Abstract->getConnection()->exec()`。

`Zend_Db_Adapter_Abstract->getConnection()`从 PHP 返回底层数据库连接资源。在 PDO 的情况下，它是调用返回的内容`new PDO()`。如果您使用的是 Mysqli，那么它是调用的结果`new Mysqli()`（虽然 Mysqli 没有`exec()`方法）。

# loops - 使用 True 和 False 选择要打印的项目

> ID：12939448
> 
> 赞同：-2
> 
> 时间：2012-10-17T16:57:28.350
> 
> 标签：loops, excel, checkbox, vba

我有一个工作簿，其中包含需要打印到 Excel 中单独工作表的信息行。我正在尝试使用一个复选框来指示需要打印哪些项目以及需要跳过哪些项目。该复选框位于“A”列中，一旦选中并且宏运行，我希望它获取该特定行的每个单元格中的数据，将其传输到单独的工作表（表单），提示并将工作表保存为 pdf，清除表单，然后返回主工作表继续，直到检查完所有行。然而，现在，我的代码只是循环通过第一个“TRUE”语句，而不是继续到其余部分。这是代码：

```
Private Sub CommandButton1_Click()

    On Error GoTo ErrHandler:

    Dim i As Integer
    For i = 1 To 10
        If ActiveSheet.OLEObjects("CheckBox" & i).Object.Value = False Then
        Else
            If ActiveSheet.OLEObjects("CheckBox" & i).Object.Value = True Then
                Call PrintWO
            Else
            End If
            Do Until ActiveSheet.OLEObjects("CheckBox" & i).Object.Value = 10
                MsgBox "Nothing Selected to Print"
                Exit Do
                Exit Sub
            Loop
        End If
    Next i
    ErrHandler:
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:28:23.963

不知道为什么你会被两票否决，但仍然......

你的问题是双重的。第一的：

```
Do Until ActiveSheet.OLEObjects("CheckBox" & i).Object.Value = 10 
```

你永远不能有一个复选框值 which = 10; 它将是 True、False 或 null，而不是整数。因此，Do 循环永远不会结束，因为复选框永远不会是那个值。

我认为您真正想要的是一个布尔标志来跟踪是否对 PrintWO 进行了任何调用（如果执行该块，则将其设置为 True），如果没有，则在您的 For 块完成后显示该消息。

其次，你很少应该有一个什么都不做的错误处理程序。它至少应该显示什么错误。我最初的想法是您的代码会在上面引用的行上引发错误；显然它不会，但也不会直到结束，这意味着我想你要么最终杀死进程，要么它崩溃。

# php - 如何防止 chrome 向网页注入内容

> ID：12939449
> 
> 赞同：12
> 
> 时间：2012-10-17T16:57:28.673
> 
> 标签：php, google-chrome, code-injection

最近我发现我的应用程序在 Google Chrome 中行为不端。

在带有表单的页面上，提交后，我的应用程序使用如下简单方法重新加载页面：

```
header('Location: ' . $url); 
```

之后，页面渲染不正确，并将此内容注入 DOM

```
<div id="sbi_camera_button" class="sbi_search" style="left: 0px; top: 0px; position: absolute; width: 29px; height: 27px; border: none; margin: 0px; padding: 0px; z-index: 2147483647; display: none; "></div> 
```

手动页面刷新后，一切都按预期工作。

我不确定是什么导致了这种行为，因为我在封闭的本地环境中工作并且应用程序在 Firefox 中运行良好。

我的应用程序使用以下库（本地托管）：

*   jQuery v1.7.1
*   jQuery UI 1.8.16
*   Bootstrap.js v 2.1.1

有人可以建议我什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T17:02:00.740

会不会是Chrome的[Search By Image 插件？](https://chrome.google.com/webstore/detail/search-by-image-by-google/dajedkncpodkggklbegccjpmnglmnflm)

我从[那个论坛](http://forum.textpattern.com/viewtopic.php?pid=266344)得到了提示。

# jquery - 拆分 jQuery 选择

> ID：12939454
> 
> 赞同：-2
> 
> 时间：2012-10-17T16:57:50.987
> 
> 标签：jquery

我得到了以下内容

```
$('#formSelect option[value="'+ json.name + '"]').remove(); 
```

这将删除表单内的选项。哪个选项取决于`json.name`.

那么你知道另一种方法吗？也许是这样的形式：

```
var rmOption = ???
$('#formSelect rmOption').remove(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:15:45.663

> 你的意思是 var rmOption = 'option[value="'+ json.name + '"]'; $('#formSelect' + rmOption).remove();
> 
> @Vega是的，我的意思是这样的，谢谢，也许知道整合json.name的好方法......

您可以尝试设置选项 var 并将其附加到选择器中，如下所示，

```
var rmOption = 'option[value="'+ json.name + '"]';
$('#formSelect ' + rmOption).remove(); 
```

或者你可以做 jQuery 在内部做的迭代，

```
$('#formSelect option').filter(function () {
    return (this.value == json.name)
}).remove(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T17:02:20.577

在您的应用程序中，给每个选项一个唯一的 ID 是否可行？这样，您只需使用相同的 .remove() 标记并选择该特定 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T17:03:00.597

试试这个：

```
$('#formSelect ' + rmOption).remove(); 
```

# php - 自定义标点功能使脚本运行超过 php 的 60s 运行时限制

> ID：12939456
> 
> 赞同：0
> 
> 时间：2012-10-17T16:57:57.037
> 
> 标签：php

我正在从一个 XML 文件（大约 5000 个产品）中导入产品数据的分配。当我运行脚本时，我可以让它在大约 10-12 秒内工作。

现在，当我添加这个确保每个产品描述都以标点符号结尾的标点符号功能时，代码会一直运行到我的服务器上的 php 60 秒加载时间，但我没有收到任何错误。我打开了错误报告。我刚刚收到一个脚本无法在 60 秒内加载的最终错误。

**问题是，看看这个函数，是不是很耗资源？我该怎么做才能让它更快？**

根据评论，问题可能是预赛循环。让我解释一下这个函数的作用。它检查字符串的最后一个字符是否是标点符号。如果不是，它将匹配最后一个字符并再次检查。

```
function punctuation($string){
    if(strlen($string) > 5){
        // Get $last_char
        $desired_punctuation = array(".",",","?","!");
        $last_char = substr($string, -1); 
        // Check if $last_char is in the $desired_punctuation array
        if(!in_array($last_char, $desired_punctuation)){ 
        // strip the $mytrim string and get only letters at the end;
            while(!preg_match("/^[a-zA-Z]$/", $last_char)){
                $string = substr($string, 0, -1);
                $last_char = substr($string, -1);
            }
            // add "." to the string
            $string .= '.'; 
        } 
    }
    return $string;
} 
```

如果函数没问题，那么长的运行时间必须来自我必须发现的其他东西。

我只是想要你对这部分的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:11:21.500

看起来您应该能够用单个循环替换 while 循环`preg_replace()`

```
function punctuation($string){
  if(strlen($string) > 5){
    // Get $last_char
    $desired_punctuation = array(".",",","?","!");
    $last_char = substr($string, -1); 
    // Check if $last_char is in the $desired_punctuation array
    if(!in_array($last_char, $desired_punctuation)){ 
      // remove any trailing non-word characters, and add a period
      $string = preg_replace("/[\W]*$/", '.', $string);
    } 
  }
  return $string;
} 
```

如果 a`preg_match()`也可以比它更快，则必须对其进行测试`in_array()`

```
function punctuation($string){
  if(strlen($string) > 5){
    // Check if the last character is a desired punctuation character
    if(!preg_match("/[.,?!]$/", $string)){ 
      // remove any trailing non-word characters, and add a period
      $string = preg_replace("/[\W]*$/", '.', $string);
    } 
  }
  return $string;
} 
```

* * *

要获取有关代码运行时间的更多详细信息，包括哪些函数需要很长时间以及它们被调用的频率，您应该查看[Xdebug](http://xdebug.org/)和[xhprof](http://pecl.php.net/package/xhprof)扩展。

# javascript - JQuery+Java 用 val() + 单引号设置字段值

> ID：12939460
> 
> 赞同：0
> 
> 时间：2012-10-17T16:58:02.513
> 
> 标签：javascript, jquery, quote

> **可能重复：**
> [如何在 JSP 上转义撇号或引号（由 javascript 使用）](https://stackoverflow.com/questions/1470768/how-to-escape-apostrophe-or-quotes-on-a-jsp-used-by-javascript)

我在使用 jquery 的 val() 设置 textarea 元素的值时遇到问题。

基本上，我有一个 JSP 文件，它接收一个名为“文本”的字符串参数。

```
Java code:
String text = (String) request.getParameter("text"); 
```

现在我希望我的 textarea 元素接收这个文本：

```
Javascript code:
$('#textarea_id').val('<%=text%>'); 
```

当我的文本不包含单引号（可能还有其他字符）时，它可以工作。

例如，对于文本 =

```
test' 
```

发生此错误：

```
Uncaught SyntaxError: Unexpected token ILLEGAL
$('#textarea_id').val('test''); 
```

我希望你们能理解。我需要一种方法来编码这个值......我尝试使用转义，所以引号被替换为 %27，但是在取消转义后它再次被替换并且错误发生了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:59:32.683

您收到错误是因为 Javascript 使用 ' 字符来确定字符串的结尾。要在字符串中包含文字引号，请使用反斜杠转义引号。

```
$('#textarea_id').val('test\''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:59:34.230

您需要使用 Java 代码转义单引号。最终输出应如下所示

```
.val('test\'') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:00:19.393

它应该是

```
$('#textarea_id').val('test \' '); 
```

# objective-c - 基本问题：如何在另一个类中包含类别方法？

> ID：12939491
> 
> 赞同：0
> 
> 时间：2012-10-17T17:00:26.383
> 
> 标签：objective-c, ios, categories

这是一个超级基础的问题。我想在我的应用程序中使用来自 Matt Gemmell 的 MGImageUtilities 的类。我已将课程添加`UIImage+ProportionalFill.h`到`UIImage+ProportionalFill.m`我的项目中。他们定义了方法`imageScaledToFitSize`。但是当我尝试运行该应用程序时，我得到一个`unrecognized selector sent to instance`错误。显然，我必须使该方法可用于我希望它在其中运行的类，但我不知道该怎么做。我`#import UIImage+ProportionalFill.h`在视图控制器的 .h 和 .m 文件中都有，在我添加的 .h 文件中

```
@interface UIImage (ProportionalFill)

- (void)imageScaledToFitSize;

@end 
```

但我仍然收到错误消息。我认为我没有做一些非常基本的事情，但我不知道它是什么。

你的意见？

**更新：** 我的项目有以下类： `UIImage+ProportionalFill`'GHViewController `, and '`GHAppDelegate `.`UIImage+ProportionalFill`包含以下声明（和相应的实现）：

```
- (UIImage *)imageScaledToFitSize:(CGSize)size; 
```

在`GHViewController.m`，我有以下代码：

```
 UIImage *img = [self createImage];
    UIImage *pic;
    if (self.serviceType==SLServiceTypeFacebook)
    {
        CGSize size = CGSizeMake((404*320)/([[UIScreen mainScreen] bounds].size.height - 64), 404);
        pic = [img imageScaledToFitSize:size];
    } 
```

那是我唯一打电话的地方`imageScaledToFitSize`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:04:13.500

如果您已包含 .m 文件，则不应`unrecognized selector sent to instance`出现错误。因此，我怀疑 .m 文件未正确添加到您的目标中，或者您在调用该方法时拼错了某些内容，或者将其发送到了错误的对象（不是 的实例`UIImage`）。

如果您提供有关调用方法的方式（即，在哪个对象上）和确切的控制台日志输出的更多信息，我可能会为您提供进一步的帮助。

要检查`.m`文件是否实际分配给您的目标，请转到 Xcode 中的项目信息窗格并显示目标的构建阶段窗格；在那里，您将找到构建它时包含的所有模块的列表。

作为一般说明：

1.  包含`.h`您的类别的文件将防止编译器发出有关未定义方法的警告；如果实现可用，则不包括该`.h`文件不会阻止实际调用该方法；

2.  如果您不包含该`.m`文件，您将获得带有`unrecognized selector sent to instance`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:04:34.807

类别提供方法的实现。我认为可能发生的是您将类别添加到错误的类中。这就像向您添加一个类别，`MyClass`并且该类别调用如下：

```
[self count]; // Method from an NSArray 
```

# c# - 使用 SQLCommand 插入 C#

> ID：12939501
> 
> 赞同：25
> 
> 时间：2012-10-17T17:00:56.420
> 
> 标签：c#, .net, ado.net, sqlcommand

将数据插入数据库的最佳方法是什么？

这是我所拥有的，但它是错误的..

```
cmd.CommandText = "INSERT INTO klant(klant_id,naam,voornaam) VALUES(@param1,@param2,@param3)";

cmd.Parameters.Add(new SqlParameter("@param1", klantId));
cmd.Parameters.Add(new SqlParameter("@param2", klantNaam));
cmd.Parameters.Add(new SqlParameter("@param3", klantVoornaam)); 
```

函数将数据添加到列表框中

[http://www.pictourl.com/viewer/37e4edcf](http://www.pictourl.com/viewer/37e4edcf) *`(link is dead)`*

但没有进入数据库..

[http://www.pictourl.com/viewer/4d5721fc](http://www.pictourl.com/viewer/4d5721fc) *`(link is dead)`*

完整功能：

```
private void Form1_Load(object sender, EventArgs e)
{            
    conn2 = new SqlConnection();
    conn2.ConnectionString = ConfigurationManager.ConnectionStrings["connSpionshopString"].ConnectionString;
}

private void button2_Click(object sender, EventArgs e)
{         
    string sqlCmd = "SELECT naam,voornaam,klant_id FROM klant;";
    SqlCommand cmd = new SqlCommand(sqlCmd, conn2);

    conn2.Open();

    using(SqlDataReader reader = cmd.ExecuteReader())
    {
        while (reader.Read())
        {
            listBox2.Items.Add(reader.GetString(0) + " " + reader.GetString(1) + "  (" + reader.GetInt16(2) + ")");
        }  
    }
    conn2.Close();
}

private void button4_Click(object sender, EventArgs e)
{
    int klantId = Convert.ToInt32(textBox1.Text);
    string klantNaam = textBox2.Text;
    string klantVoornaam = textBox3.Text;

    conn2.Open();

    SqlCommand cmd = new SqlCommand();
    cmd.Connection = conn2;
    cmd.CommandText = "INSERT INTO klant(klant_id, naam, voornaam)   VALUES(@param1,@param2,@param3)";

    cmd.Parameters.AddWithValue("@param1", klantId);
    cmd.Parameters.AddWithValue("@param2", klantNaam);
    cmd.Parameters.AddWithValue("@param3", klantVoornaam);

    cmd.ExecuteNonQuery(); 

    conn2.Close();
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-17T17:27:22.373

尝试确认数据库中每个参数的数据类型（**SqlDbType**）并这样做；

```
 using(SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["connSpionshopString"].ConnectionString))
 {
            connection.Open();
            string sql =  "INSERT INTO klant(klant_id,naam,voornaam) VALUES(@param1,@param2,@param3)";
            using(SqlCommand cmd = new SqlCommand(sql,connection)) 
            {
                  cmd.Parameters.Add("@param1", SqlDbType.Int).Value = klantId;  
                  cmd.Parameters.Add("@param2", SqlDbType.VarChar, 50).Value = klantNaam;
                  cmd.Parameters.Add("@param3", SqlDbType.VarChar, 50).Value = klantVoornaam;
                  cmd.CommandType = CommandType.Text;
                  cmd.ExecuteNonQuery(); 
            }
 } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-17T17:02:24.267

你可以使用隐式转换**[`AddWithValue`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx#Y0)**

```
cmd.Parameters.AddWithValue("@param1", klantId);
cmd.Parameters.AddWithValue("@param2", klantNaam);
cmd.Parameters.AddWithValue("@param3", klantVoornaam); 
```

示例代码，

```
using (SqlConnection conn = new SqlConnection("connectionString")) 
{
    using (SqlCommand cmd = new SqlCommand()) 
    { 
        cmd.Connection = conn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = @"INSERT INTO klant(klant_id,naam,voornaam) 
                            VALUES(@param1,@param2,@param3)";  

        cmd.Parameters.AddWithValue("@param1", klantId);  
        cmd.Parameters.AddWithValue("@param2", klantNaam);  
        cmd.Parameters.AddWithValue("@param3", klantVoornaam);  

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery(); 
        }
        catch(SqlException e)
        {
            MessgeBox.Show(e.Message.ToString(), "Error Message");
        }

    } 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T17:05:17.290

```
using (SqlConnection connection = new SqlConnection(connectionString)) 
{
    connection.Open(); 
    using (SqlCommand command = connection.CreateCommand()) 
    { 
        command.CommandText = "INSERT INTO klant(klant_id,naam,voornaam) VALUES(@param1,@param2,@param3)";  

        command.Parameters.AddWithValue("@param1", klantId));  
        command.Parameters.AddWithValue("@param2", klantNaam));  
        command.Parameters.AddWithValue("@param3", klantVoornaam));  

        command.ExecuteNonQuery(); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T17:03:04.337

您应该避免在应用程序中对 SQL 语句进行硬编码。如果您不使用 ADO 或 EntityFramework，我建议您向数据库添加一个存储过程并从您的 c# 应用程序中调用它。可以在此处找到示例代码：[如何在 C# 程序中执行存储过程](https://stackoverflow.com/questions/1260952/how-to-execute-a-stored-procedure-from-c-sharp-program)和此处[http://msdn.microsoft.com/en-us/library/ms171921%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms171921%28v=vs.80%29.aspx)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-13T09:05:50.243

```
public class customer
{
    public void InsertCustomer(string name,int age,string address)
    {
        // create and open a connection object
        using(SqlConnection Con=DbConnection.GetDbConnection())
        {
            // 1\. create a command object identifying the stored procedure
            SqlCommand cmd = new SqlCommand("spInsertCustomerData",Con);

            // 2\. set the command object so it knows to execute a stored procedure
            cmd.CommandType = CommandType.StoredProcedure;

            SqlParameter paramName = new SqlParameter();
            paramName.ParameterName = "@nvcname";
            paramName.Value = name;
            cmd.Parameters.Add(paramName);

            SqlParameter paramAge = new SqlParameter();
            paramAge.ParameterName = "@inage";
            paramAge.Value = age;
            cmd.Parameters.Add(paramAge);

            SqlParameter paramAddress = new SqlParameter();
            paramAddress.ParameterName = "@nvcaddress";
            paramAddress.Value = address;
            cmd.Parameters.Add(paramAddress);

            cmd.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T17:05:51.950

您可以使用[小巧的](http://code.google.com/p/dapper-dot-net/)库：

```
conn2.Execute(@"INSERT INTO klant(klant_id,naam,voornaam) VALUES (@p1,@p2,@p3)", 
                new { p1 = klantId, p2 = klantNaam, p3 = klantVoornaam }); 
```

BTW Dapper 是一个 Stack Overflow 项目 :)

更新：我相信如果没有 EF 之类的东西，您将无法做到更简单。`using`在处理数据库连接时也尝试使用语句。即使出现异常，这也会自动关闭连接。并且连接将返回到连接池。

```
private readonly string _spionshopConnectionString;

private void Form1_Load(object sender, EventArgs e)
{            
    _spionshopConnectionString = ConfigurationManager
          .ConnectionStrings["connSpionshopString"].ConnectionString;
}

private void button4_Click(object sender, EventArgs e)
{
    using(var connection = new SqlConnection(_spionshopConnectionString))
    {
         connection.Execute(@"INSERT INTO klant(klant_id,naam,voornaam) 
                              VALUES (@klantId,@klantNaam,@klantVoornaam)",
                              new { 
                                      klantId = Convert.ToInt32(textBox1.Text), 
                                      klantNaam = textBox2.Text, 
                                      klantVoornaam = textBox3.Text 
                                  });
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T17:04:37.213

使用`AddWithValue()`，但是`be aware of the possibility of the wrong implicit type conversion`。
像这样：

```
cmd.Parameters.AddWithValue("@param1", klantId);
    cmd.Parameters.AddWithValue("@param2", klantNaam);
    cmd.Parameters.AddWithValue("@param3", klantVoornaam); 
```

# wcf - 在 web.config 中指定默认的 WS 信任凭证

> ID：12939508
> 
> 赞同：2
> 
> 时间：2012-10-17T17:01:29.477
> 
> 标签：wcf, wif, claims-based-identity, ws-trust

我有一个用 WIF 实现的自定义 STS。我的 WS-Trust 服务正在使用这些配置：

```
<behavior name="WSTrustServiceBehaviour">
    <serviceDebug includeExceptionDetailInFaults="true" />
    <serviceMetadata httpGetEnabled="true" />

    <serviceCredentials>
        <clientCertificate>
            <authentication certificateValidationMode="ChainTrust"
                            revocationMode="NoCheck"
                            trustedStoreLocation="LocalMachine"/>
        </clientCertificate>

        <serviceCertificate storeLocation="LocalMachine"
                            storeName="TrustedPeople"
                            x509FindType="FindByThumbprint"
                            findValue="5BF081CCC2E20094D0648F0A3F3C6A598155D606"/>
    </serviceCredentials>
</behavior>

<ws2007HttpBinding>
    <binding name="WSTrustHttpBinding">
        <security>
            <message clientCredentialType="Certificate"
                     negotiateServiceCredential="false" 
                     establishSecurityContext="false"/>
        </security>
    </binding>
</ws2007HttpBinding>

<service name="System.ServiceModel.Security.WSTrustServiceContract"
         behaviorConfiguration="WSTrustServiceBehaviour">
    <endpoint name="WSTrust13HttpEndpoint"
              address="http/v13"
              binding="ws2007HttpBinding"
              bindingConfiguration="WSTrustHttpBinding"
              contract="System.ServiceModel.Security.IWSTrust13AsyncContract"/>
    <endpoint name="WSTrustFeb05HttpEndpoint"
              address="http/feb05"
              binding="ws2007HttpBinding"
              bindingConfiguration="WSTrustHttpBinding"
              contract="System.ServiceModel.Security.IWSTrustFeb2005AsyncContract" />
    <endpoint name="WSTrustMexHttpEndpoint"
              binding="mexHttpBinding"
              bindingConfiguration=""
              address="http/mex"
              contract="IMetadataExchange"/>
    <host>
        <baseAddresses>
            <add baseAddress="http://services.example.com" />
        </baseAddresses>
    </host>
</service> 
```

现在我有一个需要调用 WCF 服务的 Web 应用程序。Web 应用程序和 WCF 服务都是我的自定义 STS 的依赖方。在我的 Web 应用程序的 web.config 中，我有以下内容：

```
<ws2007FederationHttpBinding>
    <binding name="MyWCFServiceWS2007FederationHttpBinding"
             useDefaultWebProxy="false"
             messageEncoding="Mtom">
        <security mode="Message">
            <message>
                <issuer address="http://sts.example.com/WSTrust.svc/http/feb05"
                        binding="ws2007HttpBinding"
                        bindingConfiguration="WSTrustHttpBinding"/>
                <issuerMetadata address="http://sts.example.com/Bus/WSTrust.svc/http/mex"/>
            </message>
        </security>
    </binding>
</ws2007FederationHttpBinding>

<endpointBehaviors>
    <behavior name="MyWCFServiceWS2007HttpEndpointBehavior">
        <clientCredentials supportInteractive="false"
                           useIdentityConfiguration="true">
            <serviceCertificate>
                <authentication certificateValidationMode="ChainTrust"
                                revocationMode="NoCheck"/>
            </serviceCertificate>
        </clientCredentials>
    </behavior>
</endpointBehaviors>

<client>
    <endpoint name="MyWCFServiceWS2007FederationHttpEndpoint"
              address="http://services.example.com/MyWCFService.svc/..."
              binding="ws2007FederationHttpBinding"
              bindingConfiguration="MyWCFServiceWS2007FederationHttpBinding"
              contract="..."
              behaviorConfiguration="IdentityWS2007HttpEndpointBehavior"/>
</client> 
```

现在的问题是，当我尝试使用客户端端点调用 My WCF 服务时，WCF 将首先联系 STS WS-Trust 端点以获取令牌。

但是 WS-Trust 服务期望客户端提供一个证书来验证自己。如何在 web.config 中指定这些凭据？

我认为在代码中我会做类似的事情：

```
var trustChannelFactory = new WSTrustChannelFactory(..., ...);

trustChannelFactory.TrustVersion = System.ServiceModel.Security.TrustVersion.WSTrust13;

trustChannelFactory.Credentials.SupportInteractive = false;

// Set the credentials here:
trustChannelFactory.Credentials  ... 
```

有任何想法吗？

谢谢。

# ruby-on-rails - 在 Ruby 中访问数组中的数据

> ID：12939511
> 
> 赞同：1
> 
> 时间：2012-10-17T17:01:33.767
> 
> 标签：ruby-on-rails, ruby, arrays, each

我在 Ruby 的“每个”语句中访问数据时遇到问题。我正在从 SQL 查询中获取数据，

```
mysql> select * from mantis_bug_relationship_table WHERE relationship_type = 2 AND destination_bug_id = 753;
+-----+---------------+--------------------+-------------------+
| id  | source_bug_id | destination_bug_id | relationship_type |
+-----+---------------+--------------------+-------------------+
| 103 |           765 |                753 |                 2 |
+-----+---------------+--------------------+-------------------+ 
```

然后我将每个结果添加到一个数组中，这样的关系类型为 2，

```
parent_map = {}
current = 1

# for each loop is here that populates parent_map

parent_map[current] = { issues_map[relation.destination_bug_id] => issues_map[relation.source_bug_id] }
current += 1

# for each loop is here that populates parent_map 
```

然后我尝试从 parent_map 读取数据，如下所示：

```
parent_map.each do |child, parent|
    pp parent_map   
    print "child: #{child}\n"
    print "parent: #{parent}\n"
    print "---------------------------------------\n"
    STDOUT.flush
  end 
```

这输出如下：

```
{1=>{753=>765}}
child: 1
parent: 753765 
```

输出应该是：

```
child: 753
parent: 765 
```

我应该如何访问孩子和父母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:13:51.000

在您的示例中，您实际上是在处理哈希，而不是数组。

```
array = []
hash = {} 
```

在你的`parent_map.each`循环中，你正在抓住关键和价值。您的键由`current`初始填充循环中的变量填充，而您的值也是包含您要访问的父项和子项的哈希值。

假设您想要作为您的价值的哈希值，您需要一个子循环，ala：

```
parent_map.each do |key, val| # This val is your hash: {753=>765}
  val.each do |child, parent|
    puts "child: #{child}" # 753
    puts "parent: #{parent}" # 765
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:37:21.647

您不需要像其他答案那样的嵌套循环。取第二个参数并分解。

```
parent_map.each do |_, (child, parent)|
  pp parent_map
  puts "child: #{child}"
  puts "parent: #{parent}"
  puts "---------------------------------------"
  STDOUT.flush
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:17:46.083

```
parent_map.each do |current, issues_hash|
  issues_hash.each do |key, value|
    print "child: #{key}\n"
    print "parent: #{value}\n"
  end
end 
```

这应该有效。

# asp.net - .html(""), .empty("") 在 IE 中不起作用

> ID：12939512
> 
> 赞同：0
> 
> 时间：2012-10-17T17:01:34.920
> 
> 标签：asp.net

伙计们，我厌倦了试图在 IE 中运行时清空 div 的内容！
我只需要清空 div 的内容，因为每次我都需要显示一个新视频，比如 youtube。

我尝试了所有类似的方法`$('#divvideo').empty("")`，`$('#divvideo').remove()`但在 IE 中对我没有任何作用。你能建议我该怎么做吗？

```
 $('#divvideo').html("");
        this.$Embed = $('<embed></embed>');
        this.$Embed.attr({ src: src.href });
        this.$Embed.attr({ width: "420" });
        this.$Embed.attr({ height: "366" });
        this.$Embed.attr({ type: "video/x-ms-wmv-plugin" });
        this.$Embed.attr({ pluginurl: "http://www.microsoft.com/windows/windowsmedia"    });
        this.$Embed.attr({ allowchangedisplaysize: "1" });
        this.$Embed.attr({ autosize: "1" });
        this.$Embed.attr({ displaysize: "1" });
        this.$Embed.attr({ showcontrols: "1" });
        this.$Embed.attr({ showstatusbar: "1" });
        this.$Embed.attr({ autorewind: "1" });
        this.$Embed.attr({ autostart: "1" });
        $('#divvideo').append(this.$Embed); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:03:50.717

需要查看标记以完全了解问题，我怀疑还有其他事情发生，例如选择器不正确。你得到什么样的错误？如何使用以下内容？

```
document.getElementById("divvideo").innerHTML = ""; 
```

如果您收到如下错误

```
Uncaught TypeError: Cannot set property 'innerHTML' of null 
```

然后你使用了不正确的选择器。div 的 id 是别的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:09:07.007

这里没有 jQuery 专家，但你确定这不应该是：

```
$('div.video').html(); 
```

?

有关详细信息，请参阅[http://api.jquery.com/html/](http://api.jquery.com/html/)。

在纯 JS 中，类似：

```
<script type="text/javascript">
   var myDiv='nameOfDiv';
   var somediv=document.getElementById(myDiv);
   somediv.innerHTML='';
</script> 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:06:17.490

我只是用这样的小代码解决了这个问题。

```
 var divid = document.getElementById("video");
        if (divid.innerHTML) 
        {
            org = divid.innerHTML;
            divid.innerHTML = '';
            divid.innerHTML = org;
        }
        var vdobj = "<object width='425' height='350'><param name='movie' value='" + src.href + "'></param><param name='wmode' value='transparent'></param><embed src='" + src.href + "' type='application/x-shockwave-flash' wmode='transparent'  width='425' height='350'></embed></object>";
        divid.innerHTML = vdobj;
        return false; 
```

我错过了重置视频的 if (divid.innerHTML) 检查:)。谢谢你的帮助！！ [http://shankard.com/asp-net/showing-video-treeview-onclick/](http://shankard.com/asp-net/showing-video-treeview-onclick/)

# r - 在格子图形中向左/向右移动标签？

> ID：12939518
> 
> 赞同：0
> 
> 时间：2012-10-17T17:02:00.583
> 
> 标签：r, lattice

在点阵图形中，我使用 . 在每个绘图框上放置 x 轴刻度和标签`scales=list(alternating=3)`。是否有一个参数可以向左/向右（或向上/向下）移动标签？例如，我的 x 轴标签是时间步数。当最后一个（最右边的）标签有超过 3 个字符（例如“1500”）时，最右边的字符会延伸到下一个绘图框，除非我在框之间添加大量空间（我宁愿避免）。我使用刻度的'at'参数在刻度之间保留了大量空间，因此有空间向左移动“1500”，例如将最后一个“0”放在刻度线上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:36:12.967

或者可以简单地使用 scale=list(alternating=3, rot = 30) 或任何适合的角度旋转标签。迪迪埃

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:21:45.527

Dieter 和 Didier 的解决方案非常出色。谢谢你。我做了进一步的调查，并提出了第三种解决方案。我意识到 Lattice 大致试图将刻度标签置于刻度线上方/下方。此外，如果你给它一个字符串作为刻度标签，它似乎会按字面意思使用字符串。因此，如果您在字符串末尾添加空格，则会将文本向左移动：

```
# create some data
df <- rbind(data.frame(x=1:1500, y=rnorm(1500), class="left"),
      data.frame(x=1:1500, y=rnorm(1500), class="right"))

xyplot(y ~ x | class, data=df,
       scales=list( at=c(1,seq(500,1500,by=500)),               # I choose ticks explicitly
                    x=list(labels=c(1,500,1000,"1500     "))))  # spaces push "1500" left 
```

# c# - 避免从对象内返回对象

> ID：12939527
> 
> 赞同：1
> 
> 时间：2012-10-17T17:02:22.403
> 
> 标签：c#

我有一个看起来像这样的对象：

```
public class MyObject
{
    public int UserID {get;set;}
    public List<SomeObjects> {get;set;}
    public List<SomeOtherObjects {get;set}
    public MyObject TheObjectForDB {get;set} //HERE: creating a new object

    public MyObject(int TheUserID)
    {
        this.UserID = TheUserID;
    }

    public LoadTheObjectFromDatabase()
    {
        MyQueries TheQueries = new MyQueries();
        TheObjectForDB = TheQueries.LoadFromDB(UserID) //HERE: object for DB work

        this.List<SomeObjects> = TheObjectForDB.List<SomeObjects>;
        this.List<SomeOtherObjects> = TheObjectForDB.List<SomeOtherObjects>;
    }
} 
```

数据库查询本质上返回相同的对象类型：

```
LoadFromDB = from...
             select new MyObject(TheUserID){...} 
```

在需要实例化另一个相同类型的对象以填充初始对象的情况下，如何消除这种冗余？

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:06:17.447

`LoadTheObjectFromDatabase()`创建一个`static`返回新`MyObject`的 方法。

```
public class MyObject
{
    public int UserID {get;set;}
    public List<SomeObjects> {get;set;}
    public List<SomeOtherObjects {get;set}

    public MyObject(int TheUserID)
    {
        this.UserID = TheUserID;
    }

    public static MyObject LoadTheObjectFromDatabase(int userid)
    {
        MyQueries TheQueries = new MyQueries();
        MyObject TheObjectForDB = TheQueries.LoadFromDB(userid) //HERE: object for DB work

        return TheObjectForDB;
    }
} 
```

然后，而不是做`MyObject newObj = new MyObject(); newObj.LoadTheObjectFromDatabase();`，你只是做`MyObject newObj = MyObject.LoadTheObjectFromDatabase();`

# c++ - 什么是与 stdlib system() 函数等效的 Win32 API？

> ID：12939534
> 
> 赞同：0
> 
> 时间：2012-10-17T17:02:44.400
> 
> 标签：c++, c, winapi

> **可能重复：**
> [运行一个简单的 shell 命令](https://stackoverflow.com/questions/7017680/run-a-simple-shell-command)

是否有一个 Win32 API 函数`system()`以同样简单的方式做同样的事情？在我正在创建的特定控制台程序中，我想尽可能地限制 Windows 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:06:18.490

是否有某些原因 CreateProcess 不好？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:06:32.500

你可以只使用[`system()`](http://msdn.microsoft.com/en-us/library/b4b6wz4t.aspx).

> 系统函数查找命令解释器，它通常是 Windows NT 操作系统中的 CMD.EXE 或 Windows 中的 COMMAND.COM。然后系统函数将参数字符串传递给命令解释器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:59:57.987

`system()`只是在内部调用`CreateProcess()`，所以你可以直接做同样的事情，例如：

```
int my_system(LPCTSTR command)
{
    TCHAR szComSpec[MAX_PATH+1];
    DWORD dwLen = GetEnvironmentVariable(_T("COMSPEC"), szComSpec, MAX_PATH);
    if ((dwLen == 0) || (dwLen > MAX_PATH))
        return -1;

    LPTSTR szCmdLine = (LPTSTR) LocalAlloc(LPTR, (dwLen+lstrlen(command)+9) * sizeof(TCHAR));
    if (!szCmdLine)
        return -1;

    wsprintf(szCmdLine, _T("\"%s\" /C \"%s\""), szComSpec, command);

    STARTUPINFO si;
    ZeroMemory(&si, sizeof(si));
    si.cbSize = sizeof(si);
    si.dwFlags = STARTF_USESHOWWINDOW;
    si.wShowWindow = SW_HIDE;

    PROCESS_INFORMATION pi;
    ZeroMemory(&pi, sizeof(pi));

    BOOL bRet = CreateProcess(NULL, szCmdLine, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi);
    if (bRet)
    {
        CloseHandle(pi.hThread);
        CloseHandle(pi.hProcess);
    }

    LocalFree(szCmdLine);

    return (bRet) ? 0 : -1;
} 
```

# c#-4.0 - 使用 DateTimeConverter 将字符串转换为日期时间

> ID：12939535
> 
> 赞同：1
> 
> 时间：2012-10-17T17:02:47.243
> 
> 标签：c#-4.0, datetime-format

我想将字符串格式的日期转换为 Datetime 而不将其拆分。我尝试过，但其中任何一个都不能正常工作。我可以使用 DateTimeConverter 来做到这一点。我不知道 DateTimeConverter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:14:31.033

1.

```
DateTime dt = Convert.ToDateTime("2012/10/18") 
```

2.

```
DateTimeFormatInfo dtFormat = new System.GlobalizationDateTimeFormatInfo();

dtFormat.ShortDatePattern = "yyyy/MM/dd";

DateTime dt = Convert.ToDateTime("2012/10/18", dtFormat); 
```

3.

```
DateTime dt = DateTime.ParseExact("2012/10/18", "yyyyMMdd", System.Globalization.CultureInfo.CurrentCulture);

or

DateTime dt = DateTime.ParseExact("2012/10/18", "yyyyMMdd", System.Globalization.CultureInfo.InvariantCulture);

ps:
CultureInfo cultureInfo = CultureInfo.CreateSpecificCulture("en-US");
string format = "ddd MMM d HH:mm:ss zz00 yyyy";
string stringValue = DateTime.Now.ToString(format, cultureInfo);
DateTime datetime = DateTime.ParseExact("Wed Aug 25 16:28:03 +0800 2010", format, cultureInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:03:57.287

```
Convert.ToDateTime(DateTimeString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:07:45.083

您不需要 DateTimeConverter。您可以简单地使用 Datetime.Parse 方法。

```
string dateInString = "10/17/2012 12:06:30 PM";
var dt = DateTime.Parse(dateInString); 
```

[在这里](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)查看更多信息。

# javascript - 拥有两个版本的 jquery-ui 库是否是个好主意：一个带有核心，另一个带有所有组件？

> ID：12939538
> 
> 赞同：0
> 
> 时间：2012-10-17T17:02:53.810
> 
> 标签：javascript, jquery, performance, jquery-ui

我们正在尝试适应使用来自 jquery-ui 的小部件来实现我们的大部分功能。它提供了许多类似 OOP 的特性和易于扩展。缺点是 jquery-ui 库带有我们在某些页面中不需要的其他包袱和内置小部件。毫无疑问，我们的项目使用来自 jquery-ui 的小部件，但在某些情况下，我们只需要 Core 和 Widget 组件来编写我们的自定义小部件。所以我的问题是：是否值得拥有两个版本的 jquery-ui 库，一个仅带有 Core，另一个将 Core + 我们在整个项目中使用的组件？这个想法是在具有我们自定义小部件的页面中使用更轻的 jquery-ui-core。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:05:32.250

最好只包含整个脚本开始，因为通过正确的服务器设置，无论如何它都会从那里缓存起来。

另一种方法是使用类似 requirejs 的设置，您可以根据需要包含组件及其依赖项，而不是 core+widget 版本和 core+all 版本。

# vbscript - QTP 中的函数使用 .vbs 文件有什么缺点？

> ID：12939539
> 
> 赞同：1
> 
> 时间：2012-10-17T17:02:57.533
> 
> 标签：vbscript, qtp

我试图通过对某些函数使用 VBS 文件而不是 QFL 并使用 ExecuteFile 调用它来避免为我的所有测试添加关联的工作。

如果我这样做，除了无法在 VBS 文件中设置断点之外，还会有任何问题吗？[来源](http://www.quicklearnqtp.com/2010/06/vbs-in-qtp.html)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T06:14:42.063

在开发脚本时，我看到了一些缺点；这将使创建脚本更加困难：

*   您的函数不会显示在专家视图 > 关键字概览中
*   当您在主动作中输入某个功能时，残缺的智能感知将不起作用
*   您不能右键单击功能并在主要操作中选择“跳转到功能”

而且调试难度更大：

*   （正如你提到的）没有断点
*   没有暂停，除了动作本身
*   这也意味着：没有“添加监视”，在运行时查看范围变量，使用直接输出或使用 GUI 间谍。

如果您不需要所有这些功能，假设您已经构建了一个无人值守的夜间脚本，并且现在您想要导出一个没有关联所有资源的操作，我想说没有任何缺点。
尽管如此，我还是强烈推荐在您的脚本*开发过程中使用关联方法。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T21:16:41.197

如果您使用`LoadFunctionLibrary`(QTP 11+) 加载库，@AutomatedChaos 指出的调试挑战会得到缓解。唯一需要注意的是，`LoadFunctionLibrary`它不能支持用户定义的类。否则，它会带来`ExecuteFile`没有调试噩梦的所有好处。

# c++ - Qt 字体在 OS X 上呈现怪异

> ID：12939540
> 
> 赞同：4
> 
> 时间：2012-10-17T17:02:59.163
> 
> 标签：c++, macos, qt

我刚开始使用 Qt（使用 Qt 5 beta 1），我发现在 OS X 10.6.8 中呈现的字体很乱。我尝试使用不同的字体，但它们看起来都像我在下面发布的图像（非常薄，像素化）。如何让字体正确呈现？

我使用的代码很简单：

```
#include <QApplication>
#include <QLabel>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QLabel label("The quick brown fox jumps over the lazy dog...");
    label.show();
    return a.exec();
} 
```

![http://i.stack.imgur.com/F5lqg.png](../Images/290095f34e79da468f194be7c2e827fd.png)

# microsoft-metro - 在 ARM 平台的 Metro 风格应用程序中使用 x86 或 x64 库

> ID：12939544
> 
> 赞同：0
> 
> 时间：2012-10-17T17:03:03.260
> 
> 标签：microsoft-metro, c++-cx

我想在 Metro 应用程序中使用较旧的 C++ 库。我可以将这个库构建为 x86 或 x64。基本上我想做的是为这个库编写一个 C++/CX 包装器。

但是在 Visual Studio 中，我看到我的包装器项目的可用平台是：Win32、ARM 和 x64。我猜它可以在 Win32 和 x64 平台上正常工作，但是当我为 ARM 平台构建时，我可以使用该库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:04:24.327

不，如果您希望它在 ARM 处理器上运行，您必须能够为 ARM 构建库。ARM 不理解 x86。

# django - 选择 django_tables2 中的所有行

> ID：12939548
> 
> 赞同：7
> 
> 时间：2012-10-17T17:03:24.653
> 
> 标签：django, django-tables2

我试图通过单击具有以下定义的 CheckBoxColumn 中的上部复选框来选择表中的所有行：

```
selection = tables.CheckBoxColumn(accessor="pk", orderable=False) 
```

但是没有选择行，还有什么我需要做的吗？我正在使用 django 1.4.1 和 django_tables2 0.13.0。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T16:32:31.130

可以通过替换标题单元格中的输入属性来选择 CheckBoxColumn 中的所有复选框：

```
selection = tables.CheckBoxColumn(accessor="pk", attrs = { "th__input": 
                                        {"onclick": "toggle(this)"}},
                                        orderable=False) 
```

然后模板文件中的这个 JavaScript 构造应该[可以完成这项工作](https://stackoverflow.com/questions/386281/how-to-implement-select-all-check-box-in-html)。

```
<script language="JavaScript">
function toggle(source) {
    checkboxes = document.getElementsByName('selection');
    for(var i in checkboxes)
        checkboxes[i].checked = source.checked;
}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T22:54:20.117

不幸`CheckBoxColumn`的是非常简单。标题复选框不做任何事情，由您编写 JavaScript 以使其工作。有计划使这更加无缝，但不会很快发生。

# symfony - Swiftmailer 奇怪的错误

> ID：12939549
> 
> 赞同：0
> 
> 时间：2012-10-17T17:03:25.710
> 
> 标签：symfony, swiftmailer

当 FOSUserBundle 尝试发送电子邮件以检索密码时，我收到了这个奇怪的错误：

警告：preg_match()：编译失败：内部错误：在 /opt/lampp/htdocs/project/vendor/swiftmailer/lib/classes/Swift/Mime/Headers/MailboxHeader.php 行中的偏移量 4246 处找不到先前检查的引用子模式308

有人知道它是什么吗？我不知道 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:36:04.630

看起来像这里描述的边缘情况错误：[https ://groups.google.com/forum/?fromgroups=#!topic/swiftmailer/tgsOQstpKYo](https://groups.google.com/forum/?fromgroups=#!topic/swiftmailer/tgsOQstpKYo)

# sql - 使用递归查询检索结果

> ID：12939551
> 
> 赞同：1
> 
> 时间：2012-10-17T17:03:26.010
> 
> 标签：sql, sql-server, sql-server-2008-r2, recursive-query

我有一个表，它用他们的父 id 维护记录的版本，例如

```
Table(Id,version,parentId) 
```

我正在尝试从给定的 Id 值中获取所有相关记录

```
;WITH CTE (Id,ParentId)
AS
(
Select T1.Id,T1.ParentId
From Table T1
Where T1.ID = @Id or T1.ParentId=@Id

Union All

Select T2.Id, T2.ParentId
From Table T2
     Inner Join CTE C on C.Id= T2.ParentId  
) 
```

这适用于提供主父 ID ***（162527）***时，它给我带来了

```
Id      VersionNo   ParentId
162527      1.0         0
162530      1.1         162527
162531      1.2         162527
162532      1.2.1       162531
162533      1.2.1.1     162532
162534      1.2.2       162531
200346      1.2.2.1     162534
200354      1.2.2.1.1   200346 
```

但是当我将***200354***作为 Id 传递时，它会返回给我

```
200346  1.2.2.1     162534
200354  1.2.2.1.1   200346 
```

但是当给出一个 id 时，我想要所有相关的记录。

任何帮助

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:05:50.030

```
declare @Table table (id int, parentid int)

declare @id int, @ParentId int

select @id = 162530 

insert into @Table
select 162527, 0 union all
select 162530, 162527 union all
select 162531, 162527 union all
select 162532, 162531 union all
select 162533, 162532 union all
select 162534, 162531 union all
select 200346, 162534 union all
select 200354, 200346

;WITH Parents
AS
(
    Select T1.Id, T1.ParentId from @Table T1 where Id = @Id
    Union All
    Select T2.Id, T2.ParentId
    From @Table T2 Inner Join Parents C on C.ParentId = T2.Id
)
select @ParentId = P.id
from Parents as P
where parentid = 0

;WITH Children
AS
(
    Select T1.Id, T1.ParentId from @Table T1 where Id = @ParentId
    Union All
    Select T2.Id, T2.ParentId
    From @Table T2 Inner Join Children C on C.Id = T2.parentid
)
select *
from Children 
```

前一个

```
;WITH Children (Id,ParentId)
AS
(
    Select T1.Id, T1.ParentId from @Table T1 where Id = @Id
    Union All
    Select T2.Id, T2.ParentId
    From @Table T2 Inner Join Children C on C.ParentId = T2.Id
),Parents (Id,ParentId)
AS
(
    Select T1.Id, T1.ParentId from @Table T1 where Id = @Id
    Union All
    Select T2.Id, T2.ParentId
    From @Table T2 Inner Join Parents C on C.Id = T2.parentId
)
select * from Parents
union
select * from Children 
```

# c# - 将组合框项目链接到 C# 中的网页

> ID：12939553
> 
> 赞同：1
> 
> 时间：2012-10-17T17:03:34.540
> 
> 标签：c#, windows-8

我正在开发这个包含组合框的 win8 应用程序。组合框包含一个主题列表，当单击一个主题时，它会打开一个网页。不在浏览器中，而是在 WebView 中。我试过用 switch 来做这件事，这就是我想出的。但是我在 MainPage.xaml 上收到一个错误，上面写着：

> 'System.Threading.Tasks.Task Reader.MainPage.ComboBox_selectionChanged(object, Windows.UI.Xaml.Controls.SelectionChangedEventArgs)' 有错误的返回类型

我宁愿不必使用按钮。我已经研究过绑定，但我不明白它是如何运作的。我该如何解决这个问题？谢谢。

```
private async Task ComboBox_selectionChanged(object sender, SelectionChangedEventArgs e)
        {
            switch (selectUrl.SelectedIndex)
            {
                case 1:
                    await GetFeeds("http://...");
                    break;

                case 2:
                    await GetFeeds("http://...");
                    break;

                case 3:
                    await GetFeeds("http://...");
                    break;

                case 4:
                    await GetFeeds("http://...");
                    break;

                case 5:
                    await GetFeeds("http://...");
                    break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:19:32.667

下面是 Combo_Box 的代码，您必须将返回类型设置为“void”，否则其他问题可能与您如何获取所选项目有关。尝试将其放入“ComboBox”类型的变量中，如下所示

```
 private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        ComboBoxItem item = comboBox.SelectedItem as ComboBoxItem;

    } 
```

# hibernate - 在 GlassFish Server 下使用 log4j(1.2.17) 和 sl4fj(1.7.2) 进行 Hibernate 4.1.1 日志记录

> ID：12939554
> 
> 赞同：-3
> 
> 时间：2012-10-17T17:03:37.160
> 
> 标签：hibernate, glassfish, log4j, slf4j

伙计们，我正在使用带有 log4j 和 slf4 的 hibernate 3.5。它正在工作、记录和绑定参数值。所以我更新了4.1.1版本的hibernate，之后log4不记录任何关于hibernate的信息（并且不显示SQL参数值）。我知道新版本使用 jboss 日志，但我尝试删除但没有工作。我正在使用 GlassFish 3.1.1.2(build5)。在我的库中，我有：

```
-commons-logging
-slf4j-log4j
-log4j(1.2.17)
-slf4j-api(1.7.2) 
```

按照我的 log4j.properties 和 hibernate.cfg

休眠.cfg

```
<property name="hibernate.show_sql">true</property>
<property name="hibernate.format_sql">true</property> 
```

log4.properties

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=D:\\teste.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=INFO, file, stdout

# Log everything. Good for troubleshooting
log4j.logger.org.hibernate=INFO

log4j.logger.org.hibernate.type=ALL
log4j.logger.org.hibernate.jdbc=trace 
```

所以，它适用于其他事情，你可以看到我的 teste.log ：

```
13:52:36,692  INFO AbstractTilesApplicationContextFactory:76 - Initializing Tiles2     application context. . .
13:52:36,707  WARN ChainedTilesApplicationContextFactory:117 - Cannot find    TilesContextFactory class   org.apache.tiles.portlet.context.PortletTilesApplicationContextFactory
13:52:36,707  INFO AbstractTilesApplicationContextFactory:95 - Finished initializing Tiles2 application context.
13:52:36,708  WARN ChainedTilesApplicationContextFactory:117 - Cannot find TilesContextFactory class org.apache.tiles.portlet.context.PortletTilesApplicationContextFactory
13:52:36,770  WARN TilesContainerFactory:365 - DEPRECATION WARNING! You are using parameter-based initialization, that is no longer supported! Please see docs:  http://tiles.apache.org/framework/tutorial/configuration.html
13:52:36,771  INFO TilesContainerFactory:372 - Initializing Tiles2 container. . .
13:52:36,774  WARN ChainedTilesApplicationContextFactory:117 - Cannot find TilesContextFactory class org.apache.tiles.portlet.context.PortletTilesApplicationContextFactory
13:52:36,780  INFO ChainedTilesRequestContextFactory:105 - Cannot find TilesRequestContextFactory class org.apache.tiles.portlet.context.PortletTilesRequestContextFactory, skipping support for the managed platform
13:52:36,836  WARN BaseLocaleUrlDefinitionDAO:209 - Unable to find configured definition '/WEB-INF/tiles.xml'
13:52:36,907  INFO TilesContainerFactory:382 - Tiles2 container initialized
13:52:36,909  INFO TilesAccess:113 - Publishing TilesContext for context: org.apache.tiles.servlet.context.ServletTilesApplicationContext 
```

但是，休眠显示服务器标准输出中的信息如下。我不知道休眠使用什么来显示它，如果我删除 jboss 日志，它会继续显示

```
Informações: Hibernate: 
select
    this_.cobs_id as cobs1_5_0_,
    this_.cobs_attributes as cobs2_5_0_,
    this_.cobs_description as cobs3_5_0_,
    this_.cobs_name as cobs4_5_0_,
    this_.cobs_position as cobs5_5_0_,
    this_.cobs_sequence as cobs6_5_0_,
    this_.cobs_status as cobs7_5_0_,
    this_.cobs_template as cobs8_5_0_,
    this_.cobs_cosi_id as cobs9_5_0_ 
from
    core.core_blocks this_ 
where
    this_.cobs_cosi_id=? 
    and not exists (
        select
            1 
        from
            core.core_groups_blocks 
        where
            this_.cobs_id=cogb_cobs_id
    ) 
order by
    this_.cobs_sequence asc
Informações: Hibernate: 
```

检查我的服务器标准输出我发现了这个：

```
Informações: HHH000046: Connection properties: {user=root, password=****}
Informações: HHH000006: Autocommit mode: false 
```

可能休眠正在使用其他日志来注册信息，但我找不到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:51:06.617

显然问题是由 GlassFish 3.1.2.2 引起的，我安装了 glassfish 3.1.2 并解决了问题

# android - 从屏幕前面开始的动画

> ID：12939556
> 
> 赞同：0
> 
> 时间：2012-10-17T17:03:39.020
> 
> 标签：android, animation

我是android的新手。我需要完成一项任务，该任务处理动态仪表板的动画从屏幕前面移动到布局中，例如链接[http://android-developers.blogspot.in/2011/02/animation- in-honeycomb.html](http://android-developers.blogspot.in/2011/02/animation-in-honeycomb.html)图标从`view in 0.05 seconds`. 我使用了不同类型的动画。我觉得过渡动画必须产生解决方案。但我无法想出任何解决方案。

请帮助我并告诉我一种将 imageViews 移入布局的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:52:13.387

看看“放大”或“现代放大”动画。您可以在 ApiDemos 项目中找到示例：App/Activity/Animation。

# ios6 - 替换默认的 UICollectionViewCell 删除动画

> ID：12939559
> 
> 赞同：1
> 
> 时间：2012-10-17T17:03:50.093
> 
> 标签：ios6, uicollectionview

我有一个集合视图，其布局由 UICollectionViewFlowLayout 实例管理。我有一个长按手势识别器附加到集合视图，其工作是检测是否在集合视图中的一个单元格的范围内发生长按，如果是，则在动画更改单元格的变换后删除该单元格。

这是手势识别器执行的操作的相关部分：

```
UICollectionViewCell *cell = [self.collectionView cellForItemAtIndexPath:indexPath];
[UIView animateWithDuration:2.0 animations:^{
    cell.layer.transform = CATransform3DMakeScale(1.0, 0.0, 1.0); // an example animation - squish the cell vertically

} completion:^(BOOL fin) {
     //[cell.layer removeAllAnimations];
     [self.model.numb3rs removeObjectAtIndex:[indexPath row]]; // update model
     [self.collectionView deleteItemsAtIndexPaths:[NSArray arrayWithObject:indexPath]]; // delete item
 }]; 
```

问题是删除方法似乎在单元格上执行自己的属性更改/动画，这与我的动画效果不佳。例如，在我试图在这里实现的效果中，一旦单元格完全垂直压扁，我希望它不会再次显示在视图中，但是 deleteItemsAtIndexPaths: 调用会导致单元格的“幽灵”出现然后随着方法执行自己的变换和不透明动画而淡出。

我完全错误地接近它吗？可能集合视图架构提供了一种更好的方法来做我想做的事，而不是像我尝试的那样明确地为单元格设置动画然后删除它？

我希望我能在这里得到一个快速的答案，而不是深入研究文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:46:30.833

我在 Apple Developer Forums 上问了这个问题，并获悉了

> -finalLayoutAttributesForDisappearingItemAtIndexPath：

UICollectionViewLayout 类的一部分的方法。

无论如何，通过继承 UICollectionViewFlowLayout 并覆盖此方法，我能够修改要删除的单元格的属性 - 特别是转换。

需要注意的一点是，此方法不仅会为要删除的单元格调用，而且还会为在重新布局期间从其位置移动的单元格调用。但是编写代码来跟踪被删除的单元格并只修改其属性是很简单的。

# java - “使用 JNLP API 访问客户端”示例，在 GlassFish 上部署时出现错误：FailedDownload Exception

> ID：12939568
> 
> 赞同：1
> 
> 时间：2012-10-17T17:04:22.610
> 
> 标签：java, glassfish, jnlp

我正在尝试在此页面上部署“texteditor-applet”示例： Glassfish 上的[http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/usingJNLPAPI.html](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/usingJNLPAPI.html)。

我制作了 TextApplet.war，它部署得很好，但是在我的本地主机上访问时，我收到了这个错误：

FialedDownload 异常无法加载资源：

```
http://localhost:8080/TextApplet/applet_JNLP_API.jar 
```

GlassFish 运行良好，这是 TextApplet.war 结构：

```
-index.html
-texteditor-applet(JNLP): archive
-WEB-INF:
|--web.xml 
```

索引.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
  <head>
    <title>Text Editor Applet Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  </head>
  <body>
    <noscript> 
    A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>

    <h1>Text Editor Applet Demo</h1>
    <p>Click the Open button and open a plain text file.</p>
    <p>Edit the text and click the Save button</p>
    <script src="http://www.java.com/js/deployJava.js"></script>
    <script> 
        var attributes = { code:'TextEditorApplet.class', archive:'applet_JNLP_API.jar',  width:500, height:300} ;
        var parameters = {jnlp_href: 'texteditor-applet.jnlp'} ;
        deployJava.runApplet(attributes, parameters, '1.6');
    </script>
  </body>
</html> 
```

我什至试过这个：注意区别：

```
var parameters = {jnlp_href: 'http://localhost:8080/TextApplet/texteditor-applet.jnlp'} ; 
```

索引.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
  <head>
    <title>Text Editor Applet Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  </head>
  <body>
    <noscript> 
    A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>

    <h1>Text Editor Applet Demo</h1>
    <p>Click the Open button and open a plain text file.</p>
    <p>Edit the text and click the Save button</p>
    <script src="http://www.java.com/js/deployJava.js"></script>
    <script> 
        var attributes = { code:'TextEditorApplet.class', archive:'applet_JNLP_API.jar',  width:500, height:300} ;
        var parameters = {jnlp_href: 'http://localhost:8080/TextApplet/texteditor-applet.jnlp'} ;
        deployJava.runApplet(attributes, parameters, '1.6');
    </script>
  </body>
</html> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
</web-app> 
```

有人能告诉我为什么我会收到这个错误吗？也许 web.xml 有问题，我不知道只是猜测。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:36:13.057

我得到了这个问题的解决方案。看起来从这个链接下载的包中缺少“applet_JNLP_API.jar”：http: [//docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/examplesIndex.html#AppletJNLPAPI](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/examplesIndex.html#AppletJNLPAPI)

我在这里找到了它：

[http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/examples/dist/applet_JNLP_API/AppletPage.html](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/examples/dist/applet_JNLP_API/AppletPage.html)

将其添加到我的项目中并且工作正常，谢谢。

# mysql - 如何加入这些表？是否可以？

> ID：12939578
> 
> 赞同：1
> 
> 时间：2012-10-17T17:04:50.310
> 
> 标签：mysql

表文章存储文章 id 和标题值。表相似通过匹配文章 = 相似表 ID 来添加具有相似 ID 的额外文章。

我最好显示输出，很难用语言解释：

```
Article with id 3 -> Title3 Text3
when
Similar articles -> Title1(voteup,votedown), Title2(voteup,votedown) 
```

因为文章表 id = 相似表 id。（ 3 = 3[similar_id 1],3[similar_id 2].）并且可能当文章输出类似文章 id 时，它必须返回并从第一个表中获取相似 ID 的标题。

-

```
Table Articles:

    ID     Title    text

    1      title1   text1
    2      title2   text2
    3      title3   text3

Table Similar:

    ID     Similar_ID   voteup votedown

    1          2          50      2
    2          3         1621    531
    3          1         ...     ...
    3          2         ...     ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:19:10.467

根据您的要求，该`Similar_ID`字段在这里是一个红鲱鱼，不应包含在查询中：

```
SELECT articles.Title, similar.VoteUp, similar.VoteDown
FROM articles
JOIN similar ON articles.ID = similar.ID
WHERE articles.ID = 3 
```

并且要包含类似的标题（尽管我不太确定您希望数据结构如何），您可以这样做：

```
SELECT articles.Title, similar.VoteUp, similar.VoteDown, similar_articles.Title AS SimilarTitle
FROM articles
JOIN similar ON articles.ID = similar.ID
JOIN articles similar_articles ON similar.Similar_ID = similar_articles.ID
WHERE articles.ID = 3 
```

# ios - iOS 在旋转时截断视图，必须重置 view.bounds

> ID：12939579
> 
> 赞同：1
> 
> 时间：2012-10-17T17:04:56.977
> 
> 标签：ios, uiview, rotation, uinavigationbar

我最近一直在为应用程序添加对旋转的支持，这很痛苦。我发现一直很烦人的一件事是，每次我在横向和纵向模式之间旋转时，我的一个视图都会向上移动大约 50 像素左右。

我的横向模式实际上不是同一个视图控制器；当我旋转时，我推动了一个视图控制器。但是，当我向后旋转时，我必须重置肖像的 view.bounds 否则我的视图最终会向上移动。

所以在我的轮换代码中，我必须这样做：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    UIInterfaceOrientation toOrientation = self.interfaceOrientation;

    if ( self.tabBarController.view.subviews.count >= 2 )
    {
        if(toOrientation == UIInterfaceOrientationPortrait)
        {
            self.tabBarController.tabBar.hidden = NO;
            self.navigationController.navigationBar.hidden = NO;
            CGFloat height = [[UIScreen mainScreen] bounds].size.height;
            CGFloat width = [[UIScreen mainScreen] bounds].size.width;
            self.view.bounds = CGRectMake(0, -55, width, height);
        }
    }
} 
```

这肯定是不对的。在我的应用程序中，有一个导航栏和标准状态栏（电池寿命、接收等）占据了我的应用程序的顶部。但是……除非我将 y 坐标原点设置为负数（这没有任何意义！），否则我的视图似乎太向上滑动了。

发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:26:25.447

在我的应用程序中，当我进入横向模式时，我会隐藏标签栏和导航栏。使条隐藏的语句被写入纵向视图的视图控制器的代码中。

当我从横向模式转换回纵向模式时，横向视图控制器被弹出并且我得到奇怪的移动视图。原来这是由标签/导航栏取消隐藏语句的顺序引起的。

我的标签/导航栏取消隐藏语句位于纵向视图控制器中，因此调用它们为时已晚。将选项卡/导航取消隐藏语句移动到横向视图控制器（而不是纵向视图控制器）中的旋转代码后，我的问题就消失了。

# iphone - iphone 5 和情节提要设置自动调整大小蒙版

> ID：12939580
> 
> 赞同：2
> 
> 时间：2012-10-17T17:04:57.863
> 
> 标签：iphone, ios, cocoa-touch, storyboard, autoresize

我有一个故事板驱动的应用程序，我正在尝试修改它以支持 iPhone 5。

有一个导航控制器，然后是我的`menuViewController`. 在`viewDidLoad`菜单控制器中，我已经验证 self.view.frame 是`{{0, 0}, {320, 568}}`. 视图控制器的大小在 Simulated Metrics 中设置为“Inferred”，并且主视图已选中“Autoresize Subviews”。

但是我的子视图没有调整大小！（请注意，我可以在代码中手动调整它们的大小，这不是问题，但我真的希望它主要使用 IB 来“工作”，因为我有很多视图，这会容易大约一百万倍。）

我有一个没有调整大小的全屏子视图。它的面具基本上已经启用了一切。

我也有应该浮动在底部或顶部的子视图，而浮动在顶部的子视图可以工作，但应该浮动在底部的子视图不会。

我应该在这里检查什么？我可能错过了一些愚蠢的事情，但我已经摸索了一个小时，并且接近于更改代码中的所有帧。（这既丑陋又不优雅。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T18:20:01.523

我在这里找到了一个提示：[How to resize App for Iphone 5?](https://stackoverflow.com/questions/12697870/how-to-resize-app-for-iphone-5?rq=1)

基本上那里的答案之一建议直接编辑情节提要的xml。`viewController`我进去看了看，我把我的顶层视图`autoresizesSubviews="NO"`改成了`YES`，这就解决了我的问题。

正如我在原始帖子中所述，我绝对知道在检查器窗格中选中了该复选框。我不知道为什么 xml 与检查员不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:06:53.843

检查度量窗格中视图（不是视图控制器）的自动调整大小控件中的弹簧。尝试使它们如下图所示。

![在此处输入图像描述](../Images/1fd7f336ed13fb2f8ac3801dfabb1551.png)

请注意，您将无法为顶级视图对象设置内部弹簧（但这很好：只需确保 4 个侧刻度均已激活）。

希望这可以帮助。

# java - 我无法从网站获取所有字节

> ID：12939581
> 
> 赞同：0
> 
> 时间：2012-10-17T17:05:04.777
> 
> 标签：java, byte, inputstream, datainputstream

我正在尝试从网站读取所有字节，但我认为我没有得到所有字节。我给字节数组长度一个很高的值。我使用了这种方法，但它总是返回异常。

这是代码：

```
DataInputStream dis = new DataInputStream(s2.getInputStream());

byte[] bytes = new byte[900000];

// Read in the bytes
int offset = 0;
int numRead = 0;
while (offset < bytes.length
    && (numRead=dis.read(bytes, offset, bytes.length-offset)) >= 0) {
        offset += numRead;
}

// Ensure all the bytes have been read in
if (offset < bytes.length) {
    throw new IOException("Could not completely read website");
}
out.write(bytes); 
```

编辑版本：

```
ByteArrayOutputStream bais = new ByteArrayOutputStream();
InputStream is = null;
try {
    is = s2.getInputStream();
    byte[] byteChunk = new byte[4096]; // Or whatever size you want to read in at a time.
    int n;
    while ( (n = is.read(byteChunk)) > 0 ) {
        bais.write(byteChunk, 0, n);
    }
}
catch (IOException e) {
    System.err.printf ("Failed while reading bytes");
    e.printStackTrace ();
    // Perform any other exception handling that's appropriate.
}
finally {
    if (is != null) { is.close(); }
}
byte[] asd = bais.toByteArray();
out.write(asd); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:13:29.967

这就是问题：

```
if (offset < bytes.length) 
```

只有当原始数据超过 900,000 字节时才会*触发。*如果响应在不到那个时间内完全完成，`read()`将正确返回 -1 以指示流的结束。

`offset` *如果等于*，您实际上应该抛出异常`bytes.length`，因为这表明您可能已经截断了数据:)

不清楚你从哪里得到 900,000 的价值，请注意......

我建议如果你想坚持使用原始流，你可以使用[Guava](http://guava-libraries.googlecode.com)的[`ByteStreams.toByteArray`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/ByteStreams.html#toByteArray%28java.io.InputStream%29)方法来读取所有数据。或者，您可以继续循环，读取*较小*`ByteArrayOutputStream`的缓冲区，并在每次迭代时写入 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:06:32.293

我意识到这并不能回答您的*具体*问题。[但是，当诸如HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)之类的库存在并且被调试/分析等时，我真的不会手动编码这种事情。

例如这里是如何使用*流畅*的界面

```
Request.Get("http://targethost/homepage").execute().returnContent(); 
```

如果您正在处理抓取和抓取 HTML，[JSoup是一种替代方案。](http://jsoup.org/)

# django - 使用 Django 进行网络摄像头流式传输

> ID：12939590
> 
> 赞同：2
> 
> 时间：2012-10-17T17:05:19.593
> 
> 标签：django, flash, video, streaming, webcam

我尝试创建一个使用网络摄像头的 django 应用程序。我希望人们能够使用他们的网络摄像头进行广播，而其他人可以观看和收听他们。

我不知道如何用 Django 做到这一点。我必须使用闪光灯吗？有没有一个模块可以让我这样做？

任何建议都非常受欢迎。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:27:17.357

Django 可以显示包含网络摄像头应用程序的页面（并显示，例如，正在进行的广播目录、搜索机制、单独广播的单独 url、用户身份验证等），但从网络摄像头获取视频的实际软件和流它在技术上不是 Django 的一部分。

Flash 可以处理网络摄像头流，并且由于开发工具的质量和用户友好性，它可能是最容易使用的工具，但强烈建议不要将 Flash 用于新项目，因为供应商 (Adobe) 正试图将用户迁移出去从中。HTML 5*至少在理论上*是完成这项任务的正确工具，尽管在其中进行开发可能具有挑战性，因为尽管 Flash 是一个“死”项目，但仍然使用得更频繁。还有其他浏览器插件，例如 Silverlight，尽管我不认为它们对于大多数应用程序来说比 Flash 和 HTML 5 更值得推荐。

以上所有只是等式客户端的解决方案——您需要某种服务器软件来接受流式视频内容并将其流式传输给观众。这是一项相当复杂的任务，通常不在 Django 的范围内（这并不是说在某种意义上将该功能固定在 Django 上是绝对不可能的，但您不会使用任何标准的 Django 模块为了它）。

# xpath - xquery-如何从通过从列表中减去连续成员而获得的一组值中获取最小值/最大值

> ID：12939591
> 
> 赞同：1
> 
> 时间：2012-10-17T17:05:19.110
> 
> 标签：xpath, xquery, flwor, xpath-3.0, xquery-3.0

在 xquery 表达式中，我在 for 表达式中获得了一组值，其中一个值位于单独的变量中。

现在，我想从列表的第一个值中减去单个值，然后从彼此中减去列表的连续成员——在结果集的差值中，我想获得最小/最大值......

到目前为止的查询看起来像这样 -

```
let $value1:= 1998
let $rows_citations:= 
         $doc//div[@id="patent_citations"]
                     /div[@id="patent_citations_v"]
                          /table[@class="rel_patent"]
                             /tbody/tr[1]
                                      /following-sibling::tr
for $pos in $rows_citations/position()
let $date2_c := customfn:dateconverter1($rows_citations[$pos]/td[3]) 
```

现在我想要的减法是在第一个值`date2_c`和值 1 之间，然后在...的连续成员之间`date2_c`，从结果列表中我想要最小/最大值...我该怎么做呢？

我是特别的。对创建一个存储所有差异的新列表变量感到困惑，尤其是。当我们已经在一个 for 循环中，并且正在迭代列表的每个值时（通过变量 date2_c）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:30:40.227

**I. 这个 XQuery 3.0 查询（也是一个纯 XPath 3.0 表达式）**：

```
let $pVal := 1,
    $vList := (2,4,7,11,16),
    $vList2 := ($pVal, subsequence($vList, 1, count($vList)-1)),
    $vSubtactedList :=
            map-pairs(function($m as xs:integer, $n as xs:integer) as xs:integer
                        {
                         $m - $n
                        },
                        $vList,
                        $vList2
                      )
    return
      (min($vSubtactedList), max($vSubtactedList)) 
```

**从减法列表中产生想要的结果最小值和最大值：**

```
1 5 
```

* * *

**二、XQuery 1.0 解决方案**：

```
let $pVal := 1,
    $vList := (2,4,7,11,16),
    $vList2 := ($pVal, subsequence($vList, 1, count($vList)-1)),
    $vSubtactedList :=
                for $i in 1 to count($vList)
                 return
                    $vList[$i] - $vList2[$i]

 return
    (min($vSubtactedList), max($vSubtactedList)) 
```

**这再次产生相同的正确结果**：

```
1 5 
```

# visual-studio-2010 - 修改 ClickOnce 输出文件夹层次结构

> ID：12939592
> 
> 赞同：0
> 
> 时间：2012-10-17T17:05:21.967
> 
> 标签：visual-studio-2010, visual-studio, msbuild, clickonce

我正在尝试发布 ClickOnce Office 扩展项目（VS2010）。默认情况下，ClickOnce 的输出文件夹有一个名为“Application Files”的子文件夹（包含每个版本的二进制文件）。我需要将其更改为名称中没有空格的名称，例如“AppFiles”。

我在文档中没有找到任何解释这一点的地方，我发现的几个答案说使用 Mage 手动修改 bootstrap setup.exe 旁边的 .VSTO 文件。如果可能的话，我想避免这种情况。

改变这种情况的最佳方法是什么？

* * *

我尝试了一些不同的东西。我没有使用内置的 Microsoft.Common.props，而是在 Microsoft.Common.targets 的副本中将 _CopyFilesToPublishFolder 目标内的 _DeploymentApplicationFolderName 属性修改为“Application_Files”。同样在 Microsoft.VisualStudio.Tools.Office.targets 的副本中，我已将 InitializePublishProperties 中设置的 ApplicationFilesFolderName 属性的值修改为“Application_Files”。

即使这样做了，当我发布时，我也会收到以下错误：

```
Error 121   Publish failed with the following error: Could not find a part of the path '<path to output directory>\app.publish\Application Files\ProjectStats_1_0_0_15'. 
```

我猜问题是当从输出目录复制到发布目录时发生这种情况，但我不知道。无论哪种方式，输出目录层次结构似乎都很好，并且 VSTO 引用了层次结构中相关 dll 的正确路径。只是发布过程失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:25:00.460

事实证明，没有办法解决这个问题，仍然使用 Visual Studio 中的发布向导。查看 Microsoft.VisualStudio.Tools.Applications.Project.dll 程序集中的 Microsoft.VisualStudio.Tools.Applications.Project.ClickOnceProvider.BuildManager 类中的 Publish 方法的代码后，目录名称“Application Files”是硬编码的。据我所知，没有办法自动解决这个问题。

# sql-server-2005 - 在 SQL 中递归地从查询结果中获取数据

> ID：12939593
> 
> 赞同：1
> 
> 时间：2012-10-17T17:05:21.843
> 
> 标签：sql-server-2005, recursion

SQL 大师

我有一个表结构如下

```
Id        Name        IdPartner
Id1       name1           
Id2       Name2       Id1
Id3       name3       Id1
Id4       name4       Id2
Id5       name5       Id3 
```

我需要编写一个查询，该查询将递归循环遍历表以查找合作伙伴。

即在这里给定一个 ID 说 Id1，我需要提取所有将 Id1 列为合作伙伴的名称，因此我的查询需要提取 Name3 和 Name2。随后在同一个查询中，我还需要提取 Name3 和 Name2 也被列为合作伙伴的名称。因此，在这种情况下，如果我将输入作为 Id1 提供给 SP，我应该有效地获得一个如下所示的列表

```
 Id          Name
  Id2         name2
  Id3         name3
  Id4         name4
  Id5         name5 
```

我还没有使用递归方式获取 SQL 中的数据。有人告诉我我可以使用公用表表达式，但我看不出这对我有什么帮助。我已经为此烦恼了一天多，我所能想到的就是使用光标的想法。

这方面的任何帮助都有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:13:18.043

以下返回相关但未请求的行：

```
declare @Gurus as Table ( Id VarChar(4), Name VarChar(16), IdPartner VarChar(4) )
insert into @Gurus ( Id, Name, IdPartner ) values
  ( 'Id1', 'name1', NULL ),
  ( 'Id2', 'Name2', 'Id1' ),
  ( 'Id3', 'Name3', 'Id1' ),
  ( 'Id4', 'Name4', 'Id2' ),
  ( 'Id5', 'Name5', 'Id3' )

declare @TargetId as VarChar(4) = 'Id1'

; with RelatedGurus as (
  -- Anchor: Get the rows that are partners of the target row.
  select Id, Name, IdPartner
    from @Gurus
    where IdPartner = @TargetId
  union all
  -- Recursion: Add any rows that are partners to the rows just added.
  select G.Id, G.Name, G.IdPartner
    from @Gurus as G inner join
      RelatedGurus as RG on RG.Id = G.IdPartner )
  -- Display the result.
  select Id, Name
    from RelatedGurus
    order by Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:47:41.343

试试这个查询

```
 IF OBJECT_ID('tempdb..#tmptesttable') IS NOT NULL 
        DROP TABLE #tmptesttable

    DECLARE @ParentID NVARCHAR(50)
    SET @ParentID = 'Id1'

    SELECT 
        *
    INTO
        #tmptesttable
    FROM 

    (
        SELECT 'Id1','name1', NULL UNION ALL          
        SELECT 'Id2','Name2', 'Id1' UNION ALL
        SELECT 'Id3','name3', 'Id1' UNION ALL
        SELECT 'Id4','name4', 'Id2' UNION ALL
        SELECT 'Id5','name5', 'Id3'
    ) testData (Id,Name,IdPartner)

    ;WITH cteHierarchy AS (
        SELECT Id,Name,IdPartner FROM #tmptesttable WHERE Id = @ParentID
        UNION ALL
        SELECT 
            tmptesttable.Id,tmptesttable.Name,tmptesttable.IdPartner 
        FROM 
            #tmptesttable  tmptesttable
        INNER JOIN
            cteHierarchy
        ON
            cteHierarchy.Id = tmptesttable.IdPartner
    )
    SELECT * FROM cteHierarchy WHERE IdPartner IS NOT NULL 
```

# c# - 返回正则表达式匹配作为拆分（或等效功能）的一部分

> ID：12939597
> 
> 赞同：0
> 
> 时间：2012-10-17T17:05:49.923
> 
> 标签：c#, regex

我正在尝试解析一些日志文件并将它们放入数据库进行分析。一行看起来像这样：

`2012-09-30 17:16:27,213 [39] (boxes) ERROR Assembly.Places [(null)] - Error while displaying a thing`

我制作了一个正则表达式，可以很好地提取前面的日期并以这种方式分解线条，但我丢失了日期本身。这是一个非常重要的数据，我不想丢失它！

我不能这样做`\r\n`，因为一些日志是致命错误，其中包括开发人员的堆栈跟踪。显然，这些`\r\n`用于使它们具有可读性。

我当前的代码如下所示供参考：

```
var logpath = Directory.GetFiles(@"C:\a\directory", "*.log");
foreach (var log in logpath)
{
    var fileStream = new StreamReader(log);
    var fileString = fileStream.ReadToEnd();
    var records = Regex.Split(fileString, "[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}");
            ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:27:12.920

`Split()`将始终删除匹配的分隔符。诀窍不是匹配任何实际的*text*，而是匹配字符串中的一个*位置*。

这是通过[零宽度前瞻](http://www.regular-expressions.info/lookaround.html)完成的：

```
var datePattern = "^(?=[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3})";
var datePositions = new Regex(datePattern, RegexOptions.Multiline);

// ...

Regex.Split(fileString, datePositions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:36:42.603

好吧，我不是这方面的专家，但我确实发现了这个：[Regex.Match](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.match.aspx)。

从我看到的情况来看，您可以使用 Match 对象接收日期格式的第一个匹配项，该[对象](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)具有各种很好的属性，您可以将它们组合在一起，您可以剪切您想要的部分。

ps 还存在一个 Regex.Matches ，它将返回文件中的所有匹配项，可能更易于使用。

抱歉，我没有时间找到完整的代码示例。

再会

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:21:32.340

你应该`match`代替`splitting`

这是正则表达式。使用`singleLine`模式

```
([0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3})(.*?)((?=[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}|$)) 
```

第 1 组包含日期

第 2 组包含所需的日期

**笔记**

正则表达式在概念上是这样的。

```
(yourDate)(.*?yourdata)(?=till the other date|$) 
```

不要忘记使用`singlelineMode`

# node.js - 无法获得要渲染的视图

> ID：12939599
> 
> 赞同：0
> 
> 时间：2012-10-17T17:05:52.777
> 
> 标签：node.js, express, couchdb, couchdb-nano

我正在使用 node.js、express、couchDB 开发一个应用程序，并使用 nano 与 couch 进​​行通信。我正在使用来自客户端 javascript 的 jquery 获取请求。使用提琴手，我可以看到我在 RAW 结果中得到了我的视图，但视图永远不会被渲染。

客户：

```
$.get('employee/'+customerId, function(data){
        return;
    }); 
```

路线：

```
app.get('/employee/:id', employee.viewEmployee); 
```

查看员工：

```
exports.viewEmployee = function(req, res){
    db.get(req.params['id'], { revs_info: false }, function(err, body, header) {
        res.render('employee/single', {employee: body});
    });
}; 
```

一切正常，没有错误，我在原始响应中获得了“员工/单身”视图 html。我的问题是为什么视图没有呈现？为什么 html 只是以原始形式发回，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:28:38.080

您的 $.get 调用正在使用不做任何事情的回调。

来自[jQuery api 示例](http://api.jquery.com/jQuery.get/)

```
$.get("test.php",
   function(data){
     $('body').append( "Name: " + data.name ) // John
              .append( "Time: " + data.time ); //  2pm
   }, "json"); 
```

向您展示如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:51:59.137

你正在做一个ajax调用。

在你的 $.get 回调中尝试 console.log(data) ，你看到你期望的 html 了吗？

# php - NSString en/decode base64

> ID：12939600
> 
> 赞同：1
> 
> 时间：2012-10-17T17:06:00.013
> 
> 标签：php, objective-c, base64, encryption

我正在尝试使这些 php 函数等效以在目标 c 中加密/解密，但到目前为止还没有运气。

我在 obj-c 中找不到任何 base64_en/decode 方法，有吗？

```
function encrypt($string, $key) {

    ￼$result = '';

￼    for($i = 0; $i < strlen($string); $i++) {

        ￼$char = substr($string, $i, 1);
        ￼$keychar = substr($key, ($i % strlen($key))-1, 1);
        ￼$char = chr(ord($char) + ord($keychar));
        ￼$result .= $char;
￼    }
￼
    return base64_encode($result);
￼}

￼function decrypt($string, $key) {

    ￼$result = '';
    ￼$string = base64_decode($string);

    ￼for($i = 0; $i < strlen($string); $i++) {

        ￼$char = substr($string, $i, 1);
        ￼$keychar = substr($key, ($i % strlen($key))-1, 1);
        ￼$char = chr(ord($char) - ord($keychar));
        ￼$result.=$char;
    ￼}

    ￼return $result;
￼} 
```

泰已经！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:05:12.330

看看我用于这个任务的这个`NSString`类别，它是一个用于将字符串转换为 md5、base64 等的类别......

[https://gist.github.com/3907443](https://gist.github.com/3907443)

从`NSString`到`NSData`:

```
+ (NSString *)encodeBase64WithString:(NSString *)strData {
    return [NSString encodeBase64WithData:[strData dataUsingEncoding:NSUTF8StringEncoding]];
} 
```

编码自`NSData`：

```
+ (NSString *)encodeBase64WithData:(NSData *)objData {
    const unsigned char * objRawData = [objData bytes];
    char * objPointer;
    char * strResult;

    // Get the Raw Data length and ensure we actually have data
    int intLength = [objData length];
    if (intLength == 0) return nil;

    // Setup the String-based Result placeholder and pointer within that placeholder
    strResult = (char *)calloc(((intLength + 2) / 3) * 4, sizeof(char));
    objPointer = strResult;

    // Iterate through everything
    while (intLength > 2) { // keep going until we have less than 24 bits
        *objPointer++ = _base64EncodingTable[objRawData[0] >> 2];
        *objPointer++ = _base64EncodingTable[((objRawData[0] & 0x03) << 4) + (objRawData[1] >> 4)];
        *objPointer++ = _base64EncodingTable[((objRawData[1] & 0x0f) << 2) + (objRawData[2] >> 6)];
        *objPointer++ = _base64EncodingTable[objRawData[2] & 0x3f];

        // we just handled 3 octets (24 bits) of data
        objRawData += 3;
        intLength -= 3; 
    }

    // now deal with the tail end of things
    if (intLength != 0) {
        *objPointer++ = _base64EncodingTable[objRawData[0] >> 2];
        if (intLength > 1) {
            *objPointer++ = _base64EncodingTable[((objRawData[0] & 0x03) << 4) + (objRawData[1] >> 4)];
            *objPointer++ = _base64EncodingTable[(objRawData[1] & 0x0f) << 2];
            *objPointer++ = '=';
        } else {
            *objPointer++ = _base64EncodingTable[(objRawData[0] & 0x03) << 4];
            *objPointer++ = '=';
            *objPointer++ = '=';
        }
    }

    // Terminate the string-based result
    *objPointer = '\0';

    // Return the results as an NSString object
    return [NSString stringWithCString:strResult encoding:NSASCIIStringEncoding];
} 
```

解码：

```
+ (NSData *)decodeBase64WithString:(NSString *)strBase64 {
    const char * objPointer = [strBase64 cStringUsingEncoding:NSASCIIStringEncoding];
    int intLength = strlen(objPointer);
    int intCurrent;
    int i = 0, j = 0, k;

    unsigned char * objResult;
    objResult = calloc(intLength, sizeof(char));

    // Run through the whole string, converting as we go
    while ( ((intCurrent = *objPointer++) != '\0') && (intLength-- > 0) ) {
        if (intCurrent == '=') {
            if (*objPointer != '=' && ((i % 4) == 1)) {// || (intLength > 0)) {
                // the padding character is invalid at this point -- so this entire string is invalid
                free(objResult);
                return nil;
            }
            continue;
        }

        intCurrent = _base64DecodingTable[intCurrent];
        if (intCurrent == -1) {
            // we're at a whitespace -- simply skip over
            continue;
        } else if (intCurrent == -2) {
            // we're at an invalid character
            free(objResult);
            return nil;
        }

        switch (i % 4) {
            case 0:
                objResult[j] = intCurrent << 2;
                break;

            case 1:
                objResult[j++] |= intCurrent >> 4;
                objResult[j] = (intCurrent & 0x0f) << 4;
                break;

            case 2:
                objResult[j++] |= intCurrent >>2;
                objResult[j] = (intCurrent & 0x03) << 6;
                break;

            case 3:
                objResult[j++] |= intCurrent;
                break;
        }
        i++;
    }

    // mop things up if we ended on a boundary
    k = j;
    if (intCurrent == '=') {
        switch (i % 4) {
            case 1:
                // Invalid state
                free(objResult);
                return nil;

            case 2:
                k++;
                // flow through
            case 3:
                objResult[k] = 0;
        }
    }

    // Cleanup and setup the return NSData
    NSData * objData = [[[NSData alloc] initWithBytes:objResult length:j] autorelease];
    free(objResult);
    return objData;
} 
```

# scala - 如何使用 scala 的单例对象类型来要求对象是由其构造函数参数之一创建的？

> ID：12939602
> 
> 赞同：1
> 
> 时间：2012-10-17T17:06:03.337
> 
> 标签：scala

我有一个检索项目的访问器类。它还可以将 Item 作为参数并从数据库中返回该 Item 的最新版本。当它创建一个 Item 时，它会将自己作为参数传递给 Item。

我希望编译器静态地要求 Accessor 实例只接受它自己创建的项目。[如何使用 Scala 的单例对象类型](https://stackoverflow.com/questions/4315678/how-to-use-scalas-singleton-object-types)？但是我也希望一个 Item 实例能够将自己作为参数传递给它自己的 Accessor 以检索其自身的最新版本。

这样做的困难在于 Item 类定义中的类型参数像这样

```
class Item[A <: Accessor](acc: A) 
```

不能引用 acc 本身的类型。从 Item 的角度来看，`acc.type <: A <: Accessor`在`this`Item 中，它是一个`Item[A]`，不是一个`Item[acc.type]`。因此这不起作用：

```
class Item[A <: Accessor](acc: A) {
    acc.accept(this) // Type Mismatch: found Item[A], required Item[Item.this.acc.type]
}

class Accessor {
    def make() = new Item[this.type](this)
    def accept(item: Item[this.type]) = "accepted"
} 
```

然后我尝试了这个：

```
object A1 extends Accessor[A1.type](A1) // illegal cyclic reference involving object A1

class Item[+A <: Accessor[A]](acc: A) {
    acc.accept(this)
    A1.accept(this) // Compile error (good)
}

class Accessor[+A <: Accessor[A]](me: => A) {
    def make = new Item[A](me)
    def accept(item: Item[A]) = "accepted"
} 
```

问题实际上是创建访问器的实例。

我尝试了上面的一个变体，结果证明是同样基本困境的一个更混乱的化身：

```
object A1 extends Accessor {
    type A = A1.type
    def me = A1
}

class Item[+AA <: Accessor](acc: AA {type A = AA}) {
    acc.accept(this)
    A1.accept(this) // Compile error (good)
}

class Accessor {
    type A <: Accessor
    def me: A // can't do {type A = A} because its a cyclic error again
    def make = new Item[A](me) // Type Mismatch: found this.A, required this.A {type A = Accessor.this.A}
    def accept(item: Item[A]) = "accepted"
} 
```

最后我尝试使`A`类型参数逆变，以便 Item[A] 是 Item[acc.type] 的子类型，并且会被 acc 接受。

```
val a1 = new Accessor
val a2 = new Accessor
val item1 = a1.make
val item2 = a2.make
val itemA = new Item[Accessor](a2)
val item12 = new Item[A1.type](a2) // compile error (good)

a1.accept(itemA) // no compile error (bad), but I can prevent creation of Item[Accessor]s
a1.accept(item2) // compile error (good)

class Item[-A <: Accessor](acc: A) {
    acc.accept(this)
    val acc2 = new Accessor
    acc2.accept(this) // compile error (good) 
    // here Item[Accessor] <: Item[A] <: Item[acc.type] 
    // and Item[Accessor] <: Item[acc2.type]
    // but Item[A] is not necessarily <: Item[acc2.type]
}

class Accessor {
    def make() = new Item[this.type](this)
    def accept(item: Item[this.type]) = "accepted"
} 
```

这最接近我尝试过的任何东西。唯一的问题是它填满了我的对象层次结构，因为我不能这样做：

```
class ImmutableAccessor extends Accessor

class ImmutableItem[-A <: ImmutableAccessor](acc: A) extends Item[A] // fails due to contravariance in A 
```

如果只有某种方法可以指定类型参数必须是单例类型。所以例如你可以说（我在这里发明符号）

```
class Item[A:type <: Accessor](acc: A) 
```

然后`A`将是单身类型，`acc`我们会笑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:28:37.343

我们这里需要的秘诀是利用 Predef 中的 <:< 类，使用隐式值。你说得对，“with Singleton”并没有做我们想要的一切。

```
class Item[-A <: Accessor](acc: A)(implicit sing: A <:< Singleton) {
  acc.accept(this)
}

class Accessor {
  def make() = new Item[this.type](this)
  def accept(item: Item[this.type]) = "accepted"
}

class BetterItem[-B <: BetterAccessor](b: B)(implicit bsing: B <:< Singleton)
    extends Item[B](b)(bsing)
}

class BetterAccessor extends Accessor 
```

现在继承效果更好。我们可以做如下的事情

```
val a1 = new Accessor
val a2 = new Accessor
val b3 = new BetterAccessor

val i1 = a1.make
val i3 = b3.make

a1.accept(i1)     // GOOD
//a2.accept(i1)   // compile time error
//b3.accept(i1)   // compile time error
//new Item[Accessor](a2)   // compile time error
//a1.accept(i3)   // compile time error
b3.accept(i3)     // GOOD 
```

我们会在我们想要的地方得到编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:11:19.660

我没有关于处理继承的完整解决方案，但我可以建议进行一些小的更改以防止像

```
a1.accept(itemA) 
```

从编译。在 Item 的定义中包含一个显式的“with Singleton”。

```
class Item[-A <: Accessor with Singleton](acc: A) { 
```

然后尝试创建一个新的“Item[Accessor]”将无法编译。

# wpf - 垂直对齐 WPF RadioButton 项目符号并拉伸其内容

> ID：12939604
> 
> 赞同：2
> 
> 时间：2012-10-17T17:06:14.763
> 
> 标签：wpf, radio-button, alignment

我想使用一个跨越整个可用区域的网格作为 RadioButton 的内容，并且我希望 RadioButton 的项目符号垂直对齐。

让网格横跨整个区域很容易，我只需在 RadioButton 上设置 Horizo​​ntalContentAlignment 属性：

```
<RadioButton HorizontalContentAlignment="Stretch">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TextBlock>Foo</TextBlock>
        <TextBox Grid.Column="1"/>
        <TextBlock Grid.Row="1">The quick brown fox</TextBlock>
        <TextBox Grid.Row="1" Grid.Column="1"/>
    </Grid>
</RadioButton> 
```

按照 Simon Weaver 对这个[旧问题](https://stackoverflow.com/questions/533753/how-do-i-make-a-radiobuttons-bullet-align-top#7815808)的回答，我可以相对容易地垂直对齐单选按钮的项目符号：

```
<RadioButton HorizontalContentAlignment="Stretch">
    <TextBlock Grid.IsSharedSizeScope="True">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="A"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock>Foo</TextBlock>
            <TextBox Grid.Column="1"/>
        </Grid>
        <LineBreak/>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="A"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Row="1">The quick brown fox</TextBlock>
            <TextBox Grid.Row="1" Grid.Column="1"/>
        </Grid>
    </TextBlock>
</RadioButton> 
```

问题是，这样做后，内容不再延伸。 ![非此即彼](../Images/9512f6bbe0926f527f2df07813220ac2.png)

如何获得垂直对齐的项目符号**和**拉伸网格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:49:10.337

TextBlock 被正确拉伸，但其中的网格没有。大概这就是 TextBlock 的工作方式。

以下是有点hacky，但它的工作原理：

```
<RadioButton HorizontalContentAlignment="Stretch">
    <TextBlock Name="Text" Grid.IsSharedSizeScope="True">
        <Grid Width="{Binding ElementName=Text, Path=ActualWidth}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:47:20.463

这将适用于视觉效果。您没有列出任何功能要求，所以我不确定在没有一些事件映射的情况下它是否适合您。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <RadioButton Grid.Column="0" Grid.RowSpan="2" Content=""/>
    <TextBlock Grid.Column="1">Foo</TextBlock>
    <TextBox Grid.Column="2"/>
    <TextBlock Grid.Row="1" Grid.Column="1">The quick brown fox</TextBlock>
    <TextBox Grid.Row="1" Grid.Column="2"/>
</Grid> 
```

![在此处输入图像描述](../Images/af79fea6be5621adb0bd61c0b8498b64.png)

# sql - SQL 统计抽样

> ID：12939608
> 
> 赞同：5
> 
> 时间：2012-10-17T17:06:29.360
> 
> 标签：sql, sql-server, statistics

我正在寻找一些天才的 SQL 帮助来解决我遇到的一个棘手的统计问题。

我要做的是从一组不平衡的用户配置文件中提取一个统计上平衡的样本。一次对单个配置文件属性（例如性别）执行此操作会有些简单。但是一次跨多个维度进行操作需要一些复杂性。

为了争论，假设我有这张桌子。

```
Profile.userID  
Profile.Gender  
Profile.Age  
Profile.Income 
```

如果我想从组合中提取一个配置文件池，以便新的用户样本大致匹配以下所有特征：

```
50% male, 50% female
30% young, 40% middle age, 40% old
40% low income, 40% middle income, 20% high income 
```

有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:06:46.873

你有一个抽样问题。他们解决这个问题的关键是将数据分成三个变量组合的单独组。然后，计算每个组的边际概率的乘积（您的值是边际概率）。然后，对所有 18 个组进行标准化。

例如，Male-Young-Low 组将获得 0.5*0.3*0.4 = 0.06 的值。您对所有 18 个组重复此操作，然后标准化为百分比（即，将每个值除以所有值的总和）。结果如下：

```
Gender  Age     Income  Marg    Normalized
Male    Young   Low     0.06    5.5%
Male    Young   Middle  0.06    5.5%
Male    Young   High    0.03    2.7%
Male    Middle  Low     0.08    7.3%
Male    Middle  Middle  0.08    7.3%
Male    Middle  High    0.04    3.6%
Male    Old     Low     0.08    7.3%
Male    Old     Middle  0.08    7.3%
Male    Old     High    0.04    3.6%
Female  Young   Low     0.06    5.5%
Female  Young   Middle  0.06    5.5%
Female  Young   High    0.03    2.7%
Female  Middle  Low     0.08    7.3%
Female  Middle  Middle  0.08    7.3%
Female  Middle  High    0.04    3.6%
Female  Old     Low     0.08    7.3%
Female  Old     Middle  0.08    7.3%
Female  Old     High    0.04    3.6% 
```

然后这将成为每个组的采样率。这是实际进行采样的伪 SQL 代码：

```
with SamplingRates (
    select 'Male' as gender, 'Young' as Age, 'Low' as income, 0.045 as SamplingRate,
    union all . . 
)
select t.*
from (select t.*,
            row_number() over (partition by gender, age, income order by <random>) as seqnum,
            count(*) over (partition by gender, age, income) as NumRecs
      from table t
     ) t join
     SampleRates sr
     on t.gender = sr.gender and t.age = sr.age and t.income = sr.income and
        seqnum <= sr.SamplingRate * NumRecs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:13:33.780

假设：30% 的年轻人，40% 的中年人，30% 的老人

取最小公分母，您的池大小 = 5x5x3x4x2x4 = 2400

您有 18 个查询将您的池填充到 TEMP TABLE 中。重复所有 18 个查询以获得更大的池。下面是一个理想池的分布情况以及每个查询的情况的想法。您还可以在每个查询中引入一些随机性。以前有一篇关于这样做的帖子。

这可能不太优雅，但应该会产生一个平衡的池。

您在伪代码中的第一个查询如下所示：

```
SELECT * INTO TEMP TABLE 
WHERE male, young, high income and ID NOT IN TEMP TABLE 
LIMIT RECORD SET 72 
```

等等等等。希望能帮助到你。不过是个好问题。

```
CREATE TEMP TABLE
480 high income
    144 young
        72 males [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 72]
        72 females [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 72]
    192 middle age
        96 males [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 96]
        96 females [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 96]
    144 old
        72 males [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 72]
        72 females [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 72]

960 middle income
    288 young
        144 male [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]
        144 female [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]
    384 middle age 
        192 male [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 192]
        192 female [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 192]
    288 old
        144 male [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]
        144 female [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]

960 low income
    288 young
        144 male [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]
        144 female [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]
    384 middle age
        192 male [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 192]
        192 female [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 192]
    288 old
        144 male [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144]
        144 female [SELECT THIS INTO TEMP TABLE WHERE ID NOT IN TEMP TABLE LIMIT 144] 
```

# wpf - 如何为 ComboBox 内容演示者使用内容模板？

> ID：12939616
> 
> 赞同：0
> 
> 时间：2012-10-17T17:06:42.307
> 
> 标签：wpf, combobox, contentpresenter, control-template

在下面的文件中，有一个用于 COmboBox 的示例 - 控件模板。 [http://msdn.microsoft.com/en-us/library/ms752094(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms752094(v=vs.85).aspx)

我尝试使用以下 XAML 为内容演示者添加内容模板。但它将值“1”显示为“[1,1]”。

如何将 selectedValue 绑定到 textblock 的文本？

```
<ContentPresenter x:Name="ContentSite" Visibility="Visible" IsHitTestVisible="False" Content="{TemplateBinding SelectionBoxItem}"
                                ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                VerticalAlignment="Center" HorizontalAlignment="Stretch">
                                <ContentPresenter.ContentTemplate>
                                    <DataTemplate>
                                        <TextBlock Background="#FFFF99" Text="{Binding }" />
                                    </DataTemplate>
                                </ContentPresenter.ContentTemplate>
                            </ContentPresenter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:28:47.813

我已经对此进行了修复。在内容演示者周围有一个 GRID...并在控件模板的触发器中设置该 GRID 的背景颜色。

# java - 从 Java Servlet 打开一个没有文件扩展名的 URL 的 PHP 文件

> ID：12939618
> 
> 赞同：-2
> 
> 时间：2012-10-17T17:06:50.627
> 
> 标签：java, php, servlets

我的问题似乎有点奇怪，但我无法找到解决方案。
我有一个 Java servlet，它必须通过 POST 连接到一个带有不带扩展名的 URL 的 PHP 文件。

以下是 Java servlet 中的部分代码：

```
/**
 * The POST client (for authentication and data retrieval)
 * @param entity
 * @return Server Response
 */
private Response postRequest(Representation entity) {

    Request r = new Request();
    r.setResourceRef("http://xxx.ac.at/privis/chameleoninterface");
    r.setMethod(Method.POST);
    r.setEntity(entity); 
    Response response = new Client(Protocol.HTTP).handle(r);
    System.out.println("\nServer Response: " + response.getStatus() + "\n");
    return response;            
} 
```

网址后面

> [http://xxx.ac.at/privis/chameleoninterface](http://xxx.ac.at/privis/chameleoninterface)

它应该与 PHP 文件 chameleoninterface.php 连接，然后它应该打开。
**重要提示：我不允许在 URL 末尾添加 .php。**
由于之前对文件扩展名的检查，该代码可以正常工作。

还有其他解决这个问题的可能性吗？

谢谢，
阿西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:10:08.253

两种方式：

1.  您可以使用[url 重写](http://httpd.apache.org/docs/2.2/rewrite/)映射`/privis/chameleoninterface`到`/privis/chameleoninterface.php`
2.  您可以将`index.php`包含所有代码的文件放在`chameleoninterface.php`名为`chameleoninterface`[这是最简单的方法]的目录中

# spring - spring mvc 和 ReloadableResourceBundleMessageSource

> ID：12939619
> 
> 赞同：0
> 
> 时间：2012-10-17T17:06:52.120
> 
> 标签：spring, spring-mvc, apache-tiles

我正在尝试构建一个 Spring MVC 应用程序（基本上是出于自我训练的原因）。这个应用程序有spring MVC、tiles、spring them和jsp（很抱歉给所有编号，但因为我不确定我做错了什么，我只想给所有我认为可能对你有帮助的编号）。

我的 spring mvc 配置似乎有效，直到我尝试通过 org.springframework.context.support.ReloadableResourceBundleMessageSource 从属性文件中获取消息属性。所以这是我的配置

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource" p:cacheSeconds="3000">
    <property name="basenames">
        <list>
            <value>messages</value>
            <value>dev</value>
            <value>theme</value>
        </list>         
    </property>
</bean>  

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" p:definitions="/WEB-INF/tiles-defs/tiles-defs.xml" />
<bean id="tilesViewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" />

<!-- Declare the Interceptor -->
<bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" p:paramName="language"/>
<bean id="themeChangeInterceptor" class="org.springframework.web.servlet.theme.ThemeChangeInterceptor" p:paramName="theme"/>

<!-- Declare the Resolver -->
<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver"/>
<bean id="themeResolver" class="org.springframework.web.servlet.theme.SessionThemeResolver"/>

<!-- Spring themes -->
<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping">
    <property name="interceptors">
        <list>
            <ref local="themeChangeInterceptor" />
            <ref bean="localeChangeInterceptor" />                          
        </list>
    </property>
</bean> 
```

瓷砖和主题似乎有效，所以在我的瓷砖基础布局中，我有：

```
<title><tiles:insertAttribute name="title" ignore="true" /></title>
    <c:set var="css"><spring:theme code="css"/></c:set>
    <c:if test="${not empty css}">
        <link rel="stylesheet" href="<c:url value='${css}'/>" type="text/css"/>
    </c:if> 
```

这行得通！html 使用正确的 css 呈现，该 css 属性位于从 ReloadableResourceBundleMessageSource 加载的 theme.properties 文件中，并且神奇地存在于图块中！

所以，鼓起勇气我去我的jsp并插入尝试1：

```
 <p><spring:message code="context"/></p> 
```

尝试2：

```
<p><fmt:message key="context"/></p> 
```

使用的标签：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

（有区别吗？两者都有效？都在网上看到...所以我尝试了第一个，然后是第二个）

在messages.properties/messages_el_gr.properties 文件中，我输入context=default 和context=greek。

这在第一种情况下给了我例外，而在第二种情况下，只是前缀和后缀为 ??? 的字符串上下文。我得到的例外是：

> 严重：servlet [dispatcher] 在路径 [/homeAutomation] 的上下文中的 Servlet.service() 引发异常 [请求处理失败；嵌套异常是 org.apache.tiles.impl.CannotRenderException: ServletException include path '/WEB-INF/tiles/baseLayout.jsp'.] 根本原因 javax.servlet.jsp.JspTagException: No message found under code 'context' for语言环境“el_GR”。在 org.springframework.web.servlet.tags.MessageTag.doStartTagInternal(MessageTag.java:184) 在 org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) 在 org.apache.jsp.WEB_002dINF .jsp.friends_jsp._jspx_meth_spring_005fmessage_005f0(friends_jsp.java:104) 在 org.apache.jsp.WEB_002dINF.jsp.friends_jsp._jspService(friends_jsp.java:75) 在 org.apache.jasper.runtime.HttpJspBase。

我认为我的上下文中没有 messageSource，所以我认为下一步是搜索正在执行以下操作（在网络上找到）

```
@Autowired
ReloadableResourceBundleMessageSource messageSource;
@RequestMapping("/friends.htm")
public ModelAndView getPage()
{   
    ModelAndView modelAndView=new ModelAndView("friends");
    modelAndView.addObject(messageSource);
    return modelAndView;
} 
```

顺便说一句，我的 previeus 控制器的方法如下：

```
@RequestMapping("/friends.htm")
public String getPage()
{   
    return friends;
} 
```

这再次引发相同的异常.. messageSource 不为空.. 它是自动装配的。如果我在控制器内部执行：messageSource.getMessage（“context”，null，Locale.ENGLISH），这会在尝试获取它时引发相同的异常..（希腊语言环境不存在？？使用英语它将转到默认语言环境属性文件是messages.properties，对吗？）

啊，我还能给你什么...是的，属性文件位于 src/main/resources 目录中，并且在 homeAutomation.war\WEB-INF\classes\ 和 homeAutomation.war 内的战争中（为什么？？我以为这些会仅存在于 homeautomation.war 目录中......但跳过这个，至少它们在那里......）我的 poms 战争插件配置如下：

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <webResources>
                    <resource>
                        <directory>src/main/resources</directory>
                    </resource>
                </webResources>
            </configuration>
        </plugin> 
```

再次在目标目录中，我在 target\classes 目录和 target\homeAutomation 中都看到了属性文件。

毕竟这些，我仍然不知道我做错了什么，我无法在我的 jsp 工作中获得本地化的属性。我希望我提供了所有必要的信息（抱歉信息太多......，不知道哪些是相关的，哪些不是）。如果您需要更多信息，请询问。已经找了五天了，还是没有头绪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:12:13.143

您可以使用`<p><spring:message code="context"/></p>` ，但您应该拥有`context= what you want`以下文件之一：

*   `messages_el_GR.properties`
*   `dev_el_GR.properties`
*   `theme_el_GR.properties`

# jquery - Wordpress jQuery - 在页面加载时提交表单

> ID：12939620
> 
> 赞同：0
> 
> 时间：2012-10-17T17:06:56.147
> 
> 标签：jquery, forms, wordpress, submit

我已将 Store Locator 插件添加到 wordpress 站点并启用它。表单操作依赖于 jQuery，因为它会从 Google 显示最近的商店的地图。

客户想要一个包含带有邮政编码输入的表单的侧边栏，该表单将重定向到商店页面并填写邮政编码输入。我想知道是否有任何方法可以检查输入的长度（在商店页面上）是否为空，如果它不为空，则自动提交表单。

本质上，如果用户使用侧边栏搜索邮政编码，当商店页面加载并填写邮政编码输入时，它应该自动提交表单并显示结果（而不是用户必须再次单击提交）

# google-maps-api-3 - 在信息窗口中显示街景时检查街景是否存在

> ID：12939623
> 
> 赞同：1
> 
> 时间：2012-10-17T17:07:08.990
> 
> 标签：google-maps-api-3, infowindow, google-street-view

按照这个例子[http://www.keypointpartners.com/test/mab/fromxml1.html](http://www.keypointpartners.com/test/mab/fromxml1.html)和 Google Maps API v3 文档 (https://developers.google.com/maps/documentation/javascript/streetview) 我把从 XML 文件加载标记并为每个加载的标记显示选项卡式信息窗口的地图。为了检查一个位置是否真的有街景可用，我将我的 createMarker 修改为：

```
    函数 createMarker(latlng, 名称, html) {
      //var contentString = html;

      变量内容字符串 = [
        '',
        '',
        姓名，
        '',
        '',
          '
```

*   本地化', '*   斯特鲁图拉', '*   沃利', //'*   奥普齐奥尼', '*   街景', '', html, '' ]。加入（''）; // 创建一个标记 var 标记 = 新的 google.maps.Marker({ 位置：latlng， 标题：姓名， 地图：inc_map }); // 向标记添加一个侦听器以填充并打开信息窗口 google.maps.event.addListener（标记，“点击”，函数（）{ infowindow.setContent(contentString); infowindow.open（inc_map，标记）； google.maps.event.addListener(infowindow, 'domready', function() { inc_sv.getPanoramaByLocation(marker.position, 50, processSVData); //console.log("添加标签"); $('#tabs').tabs(); }); });

getPanoramaByLocation 使用的 Tha 回调函数如下：

```
    函数processSVData（数据，状态）{
      如果（状态 == google.maps.StreetViewStatus.OK）{
        google.maps.event.addListener(infowindow, 'domready', function() {
          $('#stv-lnk').click(function() {
            var 全景选项 = {
              位置：data.location.latLng，
              可见：真实，
              链接控制：假，
              泛控制：假，
              地址控制：假，
              缩放控制选项：{
                风格：google.maps.ZoomControlStyle.SMALL
              },
              启用关闭按钮：假
            };
            var 全景图 = 新 google.maps.StreetViewPanorama（document.getElementById（“stvpano”），panoramaOptions）；  
            inc_map.setStreetView(全景);
          });
        });
        } 别的 {
        google.maps.event.addListener(infowindow, 'domready', function() {
          $('#stv-lnk').click(function() {});
          document.getElementById("stvpano").innerHTML = "Streetview non è disponibile per questo luogo"
          });
          }
    }

```

现在，发生的情况是第一个街景选项卡不显示任何内容，而下一个单击的街景选项卡显示前一个选项卡的街景。与 API 文档中的上述示例相比，我为每个选项卡构建了一个单独的 StreetViewPanorama 对象（而该示例使用全局全景变量来保存它）。这是我的错吗？或者...？实际页面链接： http: [//turom-mice.it/condorincentive/incentive.html](http://turom-mice.it/condorincentive/incentive.html)

非常感谢任何帮助/建议！干杯，皮疹*

**编辑**：好的，我解决了其中一个问题。我嵌套了太多 eventListener：我删除了函数 processSVData 中的那些，现在每个 infowindow 都显示正确的街景。代码现在如下所示：

```
    函数processSVData（数据，状态）{
      如果（状态 == google.maps.StreetViewStatus.OK）{
        $('#stv-lnk').click(function() {
          var 全景选项 = {
            位置：data.location.latLng，
            可见：真实，
            链接控制：假，
            泛控制：假，
            地址控制：真，
            缩放控制选项：{
              风格：google.maps.ZoomControlStyle.SMALL
            },
            启用关闭按钮：假
          };
          var 全景图 = 新 google.maps.StreetViewPanorama（document.getElementById（“stvpano”），panoramaOptions）；
         inc_map.setStreetView(全景);
        });
       } 别的 {
        $('#stv-lnk').click(function() {
           inc_map.setStreetView(null);
           document.getElementById("stvpano").innerHTML = "Streetview non è disponibile per questo luogo"
        });
        }
    }

```

现在，问题是“else”分支似乎什么都不做：当一个位置没有可用的街景时，你会看到最后显示的街景，无论我是否将其设置为 null 并在 div 中放置一些警告文本（我应该显示虽然链接到替代画廊页面）。问题是：这是正确的吗？或者...？

像往常一样，任何帮助/提示/建议......

Ciao，皮疹*

**编辑2**：好的，完全解决了。else 分支没有管理单击事件，因此将其放回原处即可解决。上面的代码已经过编辑以反映解决方案。

无论如何，谢谢，等待答案让我重新思考整个事情。希望这可以对任何人有所帮助。

皮疹*

# c# - 如何在 WebRequest 中模拟 DNS 名称解析失败？

> ID：12939625
> 
> 赞同：2
> 
> 时间：2012-10-17T17:07:13.687
> 
> 标签：c#, windows, dns, httpwebrequest, webrequest

最近发现在C#中使用异步套接字API实际上是在调用线程上执行DNS解析，所以如果解析有问题，它会挂起直到超时。
我想找到一种方法来模拟 DNS 解决问题而无需接触正在运行的代码，以便 QA 也可以在测试中使用它。

**Insentive**：许多 .NET 异步 API，如 WebRequest、Image（WinForms、WPF）在调用线程上执行 DNS 解析，这可能导致 UI 挂起。

**示例：（**我希望能够模拟的内容）
如果 DNS 无法解析代码，则代码将永远不会到达 (1)，但在经过一些超时延迟后，将从 (2) 中的 EndGetResponse 引发异常。

```
class Program
{
    static void Main()
    {
        var request = WebRequest.Create("http://www.google.com");
        request.BeginGetResponse(WebRequestCallback, request);
        // (1)
        Console.ReadLine();
    }
    private static void WebRequestCallback(IAsyncResult ar)
    {
        // (2)
        var response = ((WebRequest) ar.AsyncState).EndGetResponse(ar);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:12:00.917

谢谢汉斯，好主意。
我将添加确切的步骤：

1.  控制面板 -> 网络 -> 更改适配器设置
2.  双击您使用的连接
3.  您使用的 TCP 协议的属性
4.  先进的
5.  DNS 选项卡
6.  添加 DNS 服务器 IP (*)
7.  关闭所有网络窗口
8.  运行：“ipconfig /flushdns”

(*) 必须是可以解析但不返回 DNS 回复的 IP（google.com 很好），否则 DHCP 将返回响应太快导致地址无法解析，如果服务器存在则不应返回响应所以会达到超时。

# android - 将 ListView 项的 id 传递给 ActionMode.Callback 对象

> ID：12939627
> 
> 赞同：3
> 
> 时间：2012-10-17T17:07:16.723
> 
> 标签：android, contextual-action-bar

所以我现在的问题是，现在我长时间单击 ListView 中的一个项目，它会弹出一个上下文操作栏。传递给 onItemLongClick 的 id 是我想在 mActionModeCallback 的 on ActionItemClicked() 方法中使用的变量。这似乎是一个相当常见的过程，因为如果用户正在编辑项目列表，您可能希望在用户单击“编辑”或“删除”操作时以某种方式访问​​数据库中该行的 ID。

```
listView.setOnItemLongClickListener(new OnItemLongClickListener() {
    public boolean onItemLongClick(AdapterView<?> p, View view, int pos, long id) {

        //The id of the row in the database
        long variableThatIWantToPassToCallback = id; 
        mActionMode = getActivity().startActionMode(mActionModeCallback);
        view.setSelected(true);
        return true;
    }
});

private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {

    public boolean onCreateActionMode(ActionMode mode, Menu menu) {}

    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {}

    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        //I would like access to the id of the clicked item here, NOT item.getItemId()
    }

    public void onDestroyActionMode(ActionMode mode) {}
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:48:58.310

执行此操作的正确方法是调用函数`mActionMode.setTag("1")`，`onItemCheckedStateChanged`然后从`onActionItemClicked`函数调用中调用`mode.getTag();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T07:55:44.527

通过扩展接口创建自己的回调`ActionMode.Callback`

```
private interface ActionCallback extends ActionMode.Callback {
        public void setClickedView(View view);
}

private ActionCallback mActionModeCallback = new ActionCallback() {

        public View mClickedView;

        public void setClickedView(View view) {
            mClickedView = view;
        }

        // Called when the action mode is created; startActionMode() was called
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            // Inflate a menu resource providing context menu items
            MenuInflater inflater = mode.getMenuInflater();
            inflater.inflate(R.menu.context_menu, menu);
            return true;
        }

        // Called each time the action mode is shown. Always called after onCreateActionMode, but
        // may be called multiple times if the mode is invalidated.
        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false; // Return false if nothing is done
        }

        // Called when the user selects a contextual menu item
        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item ) {
            switch ( item.getItemId() ) {
                case R.id.menu_delete:
                    Log.v( TAG, "#onActionItemClicked ready to delete the item with id: " + mClickedView.getTag() );
                    mode.finish();      // Action picked, so close the CAB
                    return true;
                default:
                    return false;
            }   // end switch
        }

        // Called when the user exits the action mode
        @Override
        public void onDestroyActionMode(ActionMode mode) {
            mActionMode = null;
        }
}; 
```

对于已`OnLongClickListener`附加的视图，以这种方式覆盖`onLongClick`回调。

```
 @Override
                // Called when the user long-clicks on someView
                public boolean onLongClick( View view ) {
                    // proceed only when actionmode is not null
                    // otherwise overlapping action modes will be
                    // displayed
                    if( mActionMode != null ) {
                        return false;
                    }

                    mActionModeCallback.setClickedView(view);
                    // Start the CAB using the ActionMode.Callback defined above
                    mActionMode = startActionMode( mActionModeCallback );
                    view.setSelected(true);
                    return true;
                } 
```

# c++ - 如何在 Linux/Mac 上调用特定的 EXE 函数

> ID：12939628
> 
> 赞同：-1
> 
> 时间：2012-10-17T17:07:18.460
> 
> 标签：c++, python, linux, exe, wine

我确定是否可能，但我想调用 Linux/Mac 上的 exe 文件中定义的函数：

```
0x421ff0 @@my_func_doing_stuff@Initialize 4 
```

基本上我想添加未实现的命令行支持，并且 UI 是一种无用的拖放。

注意：我无权访问文件的来源。

我一直在使用 pefile、SWIG 和 ctypes 玩 wine、objdump、uncc（试图再次将其转换为 C）和 Python：

```
#!/usr/bin/python
from ctypes import *

import pefile, sys

pe = pefile.PE('my_file.exe')

print pe.dump_info()

my_exe = cdll.LoadLibrary('./my_file.exe') 
```

但没有成功。

错误：

```
OSError: ./my_file.exe: invalid ELF header 
```

提醒我在没有仿真的情况下无法在 Linux 下调用任何 Windows 功能？

所以我正在寻找其他一些解决方案。可能通过在wine下模拟或调试它可以以某种方式完成。但我不确定是否有任何 API 可以调用特定函数。

有没有现成的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:15:00.237

您可以[使用 winelib 来加载和链接二进制文件](https://stackoverflow.com/questions/2617468/are-there-any-way-to-link-my-program-with-wine-compiled-part)（因为您需要 wine 来提供可用的 ABI），但请记住，这有效地将您的应用程序变成了 Wine 应用程序。

# c# - 是否可以从 C# COM 互操作对象写入 VBA 即时窗口？

> ID：12939632
> 
> 赞同：2
> 
> 时间：2012-10-17T17:07:43.607
> 
> 标签：c#, vba, com, interop

我编写了一个供 MSAccess 使用的 C# COM 对象。它对我的目的来说工作得很好，但我想在创建新对象时进行版本检查，并通过即时窗口通知 VBA 程序员有新版本可用。

这可能吗？我已经尝试过 Debug.Print 和 Console.WriteLine 但都不起作用。

我发现了几个提出问题的帖子（如[this](https://stackoverflow.com/questions/7384976/how-do-i-write-to-the-vb6-immediate-window-from-c-based-com-object)），但并没有真正提供答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:59:58.903

这是可能的……但不漂亮也不可靠。

这是我在进行研究和实验后刚刚写的一个 VBA 子程序，它可以满足您的需求。本质上是作为概念证明提供的。

```
Sub ImmediateWindowSendKeys(keys As String)
    set w = Application.VBE.windows("Immediate")
    w.SetFocus
    SendKeys keys
    w.Visible = True
End Sub 
```

我假设你可以将它转换成你想要的语言，甚至可以从 C# 调用这个 sub。此方法的主要问题是，如果您正在单步执行代码、在当前处理的任何位置设置断点或生成弹出警报（这是发送键的限制），它就不起作用。但是，如果使用 F5 或从即时窗口运行，它确实有效。

我将尝试找出一种访问窗口内容的方法，但现在这是我能提供的最好的方法。

编辑：

根据您的评论，这应该同样没用。但是，我才刚刚开始涉足这种事情，所以这是一种游戏。这会将注释添加到当前模块的末尾。

```
Sub AddCommentsToEndOfModule()
    Set cm = Application.vbe.ActiveCodePane.CodeModule
    cm.InsertLines cm.CountOfLines + 1, "'Dear Developer " & vbCrLf & "'Hi" & vbCrLf & "'Sincerely," & vbCrLf & "'Me"
End Sub 
```

# xml - 更改编辑器在 eclipse indigo 中的外观仅适用于 xml 文件

> ID：12939639
> 
> 赞同：0
> 
> 时间：2012-10-17T17:08:27.767
> 
> 标签：xml, eclipse, editor

我正在寻找一种解决方案来更改 Eclipse 中的编辑器外观，但仅适用于 xml 文件。例如，当我创建一个 Android 项目时，java 文件应该像往常一样出现，但是 xml 文件让我们说黑色背景和白色字体。有没有简单的方法来实现这一目标？我在网上找到了大量的“教程”，但似乎没有什么是我想要的。

我得到了 Eclipse 3.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:37:40.863

我最近在 eclipse 中安装了 Aptana Studio 3 插件，并且有一个主题创建器和选择器，它不仅改变了 Web 相关文件类型的编辑器外观。也可以改变整个日食的外观。

安装 Aptana 插件后，您可以通过以下方式找到此选项

`"Window" -> "Preferences" -> "Aptana Studio" -> Themes`

# extjs - Ext 4 History init() 抛出 JS 错误

> ID：12939641
> 
> 赞同：0
> 
> 时间：2012-10-17T17:08:37.153
> 
> 标签：extjs

我正在使用 Ext 4.0.7 当我尝试如下初始化 Ext History 时：

```
Ext.require(['Ext.util.History']);

Ext.onReady(function(){  

   Ext.util.History.init();

}); 
```

我得到：
未捕获的类型错误：无法读取 null ext-all-debug.js:89797
Ext.define.startUp ext-all-debug.js:89797
Ext.define.init ext-all-debug.js 的属性“值”： 89858
（匿名函数）dashboard.js:5
（匿名函数）ext-all-debug.js:10122
call ext-all-debug.js:10078

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:42:11.753

在 4.1x 之前，您必须在 DOM 中有一个隐藏的表单才能使其正常工作。我的建议是升级到 4.1x 或添加一个初始化例程以在 init() 之前调用，如下所示：

```
 initialiseHistory: function () {
 this.historyForm = Ext.getBody().createChild({
 tag:    'form',
 action: '#',
 cls:    'x-hidden',
 id:     'history-form',
 children: [
 {
 tag: 'div',
 children: [
 {
 tag:  'input',
 id:   Ext.util.History.fieldId,
 type: 'hidden'
 },
 {
 tag:  'iframe',
 id:   Ext.util.History.iframeId
 }
 ]
 }
 ]
 });
 } 
```

# c# - SharpSvn GetInfo LastChangeRevision 错误

> ID：12939642
> 
> 赞同：2
> 
> 时间：2012-10-17T17:08:37.673
> 
> 标签：c#, .net, svn, sharpsvn

我有以下代码（在 .NET 控制台应用程序中进行测试）：

```
var client = new SvnClient();
var previousRevisionUri = new SvnUriTarget("https://approvaltests.svn.sourceforge.net/svnroot/approvaltests/trunk/projects/ApprovalTests/DotNetApprovals/ApprovalUtilities/CallStack/Caller.cs", 480);
SvnInfoEventArgs previousRevisionInfo;
client.GetInfo(previousRevisionUri, out previousRevisionInfo);
Console.WriteLine(previousRevisionInfo.LastChangeRevision); 
```

`previousRevisionInfo.LastChangeRevision`当我们可以在这里看到时，我怎么会得到 337 输出： [http](http://approvaltests.svn.sourceforge.net/viewvc/approvaltests/trunk/projects/ApprovalTests/DotNetApprovals/ApprovalUtilities/CallStack/Caller.cs?view=log) : //approvaltests.svn.sourceforge.net/viewvc/approvaltests/trunk/projects/ApprovalTests/DotNetApprovals/ApprovalUtilities/CallStack/Caller.cs?view=log之前的版本是 384..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:09:29.453

在修订版 384 中，父目录已更改，但文件本身并未更改。

ViewVC 将此显示为节点历史记录的更改，而节点本身并未更改。

看着 r384：

```
Directory: trunk/projects/ApprovalTests/DotNetApprovals/ApprovalUtilities/ added
(Copied from trunk/projects/ApprovalTests/DotNetApprovals/SimpleLogger, r383)

Directory: trunk/projects/ApprovalTests/DotNetApprovals/SimpleLogger/  deleted 
```

见[http://approvaltests.svn.sourceforge.net/viewvc/approvaltests?view=revision&revision=384](http://approvaltests.svn.sourceforge.net/viewvc/approvaltests?view=revision&revision=384)

# java - 为什么 PMD 基本规则集不捕获空解引用？

> ID：12939643
> 
> 赞同：2
> 
> 时间：2012-10-17T17:08:37.567
> 
> 标签：java, pmd

我正在使用 `PMD Plug-in 3.2.6.v2009033006` . 但是 pmd 中的默认规则集没有捕获可能的空指针异常。

**Java 代码**

```
public class SignUp extends HttpServlet{
     public void doGet(HttpServletRequest req , HttpServletResponse res){
        String user = req.getParameter("user");
        user.trim(); 
     }
} 
```

`user.trim();`如果`user`变量为 null 则容易出现空指针异常。我用 pmd 检查了我的代码，但它不会表明这一点？我怎样才能捕捉到这个？. 是否有任何自定义 pmd 规则集可用？

是否有任何自定义规则集可用于捕获此内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:35:55.297

PMD 不是解决此问题的正确工具。您应该使用 FindBugs 来捕获此类问题。

但是即使使用 FindBugs，你也不会捕获任何东西，因为上面的代码是完全合理的，并且没有任何错误，除非你知道它`getParameter("user")`可以返回 null，并且在这种情况下有比抛出 NullPointerException 更好的方法.

如果这样的代码触发了错误，那么基本上每一行调用另一个方法返回的对象上的方法的代码都会触发错误。FindBugs 支持注释，允许声明方法的调用者应始终检查此方法返回的结果是否为 null。请参阅[http://findbugs.sourceforge.net/manual/annotations.html](http://findbugs.sourceforge.net/manual/annotations.html)。但是当然，对于第三方代码，你什么也做不了（除了自己写规则）。

# jquery - jQuery UI 时间选择器问题

> ID：12939652
> 
> 赞同：0
> 
> 时间：2012-10-17T17:09:08.610
> 
> 标签：jquery, jquery-ui

好的，我们正在使用该`jquery-ui-timepicker-addon-0.9.3.js`文件

它有一个很好的日历弹出窗口并填充一个输入字段。

问题是，如果输入字段已经填充并且说有人调出日历并且碰巧点击下个月并点击远离日历......即使“完成”，输入字段也会更新为下个月按钮没有被点击。

如果有人熟悉此 JS 文件...我将不胜感激，因为只有在选择日期后单击“完成”按钮才能更新字段...

```
 $(function()
{
    $("#publication_datepicker").datetimepicker(
    {
        dateFormat: 'mm-dd-yy',
        showOn: 'button',
        buttonImage: '..images/calendar.gif',
        buttonImageOnly: true,
        minDate: 0,
        maxDate: '+5Y',
        duration: '',
        <c:if test="${formIsReadonly or form.newsItemId == '-1'}">disabled: true,</c:if>
        constrainInput: false,
        timeFormat: 'hh:mm'
    }); 
```

JS 文件： [jquery-ui-timepicker-addon.js](http://code.google.com/p/grsnippetgen/source/browse/scripts/jquery-ui-timepicker-addon.js?spec=svnfd74d10955600eea2964cd11a83386457ff69fe0&r=fd74d10955600eea2964cd11a83386457ff69fe0)

![在此处输入图像描述](../Images/f75981e4be6b0babdff73b3e834e816e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:55:54.577

发现问题...在js文件中有一个函数叫：_newInst

我在 2 个部分中注释掉了这一行：

`tp_inst._updateDateTime(dp_inst)`

修复了问题

```
 _newInst: function ($input, o) {
        var tp_inst = new Timepicker(),
            inlineSettings = {};
        tp_inst.hour = tp_inst._defaults.hour;
        tp_inst.minute = tp_inst._defaults.minute;
        tp_inst.second = tp_inst._defaults.second;
        tp_inst.ampm = "";
        tp_inst.$input = $input;
        for (var attrName in this._defaults) {
            var attrValue = $input.attr("time:" + attrName);
            if (attrValue) {
                try {
                    inlineSettings[attrName] = eval(attrValue)
                } catch (err) {
                    inlineSettings[attrName] = attrValue
                }
            }
        }
        tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, o, {
            beforeShow: function (input, dp_inst) {
                if ($.isFunction(o.beforeShow)) {
                    o.beforeShow(input, dp_inst, tp_inst)
                }
            },
            onChangeMonthYear: function (year, month, dp_inst) {
                //tp_inst._updateDateTime(dp_inst);
                if ($.isFunction(o.onChangeMonthYear)) {
                    o.onChangeMonthYear(year, month, dp_inst, tp_inst)
                }
            },
            onClose: function (dateText, dp_inst) {
                if (tp_inst.timeDefined === true && $input.val() != "") {
                    //tp_inst._updateDateTime(dp_inst)
                }
                if ($.isFunction(o.onClose)) {
                    o.onClose(dateText, dp_inst, tp_inst)
                }
            },
            timepicker: tp_inst
        });
        if (o.altField) {
            tp_inst.$altInput = $(o.altField).css({
                cursor: "pointer"
            }).focus(function () {
                $input.trigger("focus")
            })
        }
        if (tp_inst._defaults.minDate !== undefined && tp_inst._defaults.minDate instanceof Date) {
            tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime())
        }
        if (tp_inst._defaults.minDateTime !== undefined && tp_inst._defaults.minDateTime instanceof Date) {
            tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime())
        }
        if (tp_inst._defaults.maxDate !== undefined && tp_inst._defaults.maxDate instanceof Date) {
            tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime())
        }
        if (tp_inst._defaults.maxDateTime !== undefined && tp_inst._defaults.maxDateTime instanceof Date) {
            tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime())
        }
        return tp_inst
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:16:42.917

你可以试试这个（未测试）：

```
 $("#publication_datepicker").datetimepicker(
        {
            dateFormat: 'mm-dd-yy',
            showOn: 'button',
            buttonImage: '../chassis/images/calendar.gif',
            buttonImageOnly: true,
            minDate: 0,
            maxDate: '+5Y',
            duration: '',
            <c:if test="${formIsReadonly or form.newsItemId == '-1'}">disabled: true,</c:if>
            constrainInput: false,
            timeFormat: 'hh:mm'
        });

 $.datepicker.unbind('blur'); 
```

# android - 在 Android 上使用 dexmaker 进行 Mockito - 模拟活动时出现虚拟机错误

> ID：12939655
> 
> 赞同：1
> 
> 时间：2012-10-17T17:09:20.757
> 
> 标签：android, mockito, dalvik, dexmaker

在 Android VM（模拟器 4.1）上检测后，尝试使用 Mockito.spy 对活动进行部分模拟。这是我得到的错误

```
java.lang.VirtualMachineError
at dalvik.system.DexFile.defineClass(Native Method)
at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:207)
at dalvik.system.DexFile.loadClass(DexFile.java:196)
at dalvik.system.DexClassLoader.findClass(DexClassLoader.java:226)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at com.google.dexmaker.stock.ProxyBuilder.loadClass(ProxyBuilder.java:272)
at com.google.dexmaker.stock.ProxyBuilder.buildProxyClass(ProxyBuilder.java:254)
at com.google.dexmaker.mockito.DexmakerMockMaker.createMock(DexmakerMockMaker.java:54)
at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:26)
at org.mockito.internal.MockitoCore.mock(MockitoCore.java:49)
at org.mockito.Mockito.spy(Mockito.java:1324)
at com.company.droid.helper.ActivitySandbox.setupActivity(ActivitySandbox.java:21)
at com.company.droid.ui.fragment.signup.SignupFragmentTest.setUp(SignupFragmentTest.java:50)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
```

我尝试过更改虚拟机、Mockito 版本、Dexmaker 版本，但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T11:39:51.817

似乎是 Dalvik 中的一个错误，DexMaker 没有避免。

如果需要，请参阅此错误报告并投票。 [https://code.google.com/p/dexmaker/issues/detail?id=9](https://code.google.com/p/dexmaker/issues/detail?id=9)

# c - 分段错误：11 似乎不寻常

> ID：12939657
> 
> 赞同：0
> 
> 时间：2012-10-17T17:09:30.483
> 
> 标签：c, segmentation-fault

请帮我找到这个“分段错误：11”。argv 输入看起来不错。顺便说一句，这是一个用餐哲学家的问题。它在一个小时前工作，但在 minix 机器上，但现在在 Unix 机器上它不运行。请帮我解决这个愚蠢的错误。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

#define N   5 
#define REPETITIONS 10 
#define EATTIME 3000000
#define THINKTIME EATTIME * 3 
#define LEFT    (i+N-1)%N
#define RIGHT   (i+1)%N
#define HUNGRY   1
#define EATING   2
#define THINKING 0
#define mutex   "mutex"
#define mutexLock "mutex.lock"
#define Output "output" 
#define states "states"
#define statesLock "states.lock"
#define binarySemaphore "semaphore"
#define binarySemaphoreLock "semaphore.lock"
#define up(lock) unlink(lock)
#define down(lock1,lock2) while(link(lock1,lock2)== -1);

void readFile(int numberFromFile[],char *file); /* declaring readfile() */
void writeFile(int numberToFile[],char *file);  /* declaring writeFile() */
void setPhilosopher(int i,int number);      /* declaring setPhilosopher() */
void take_Forks(int i);             /* declaring take_Forks() */
void downPhilosopher(int i);            /* declaring downPhilosopher() */
void thinking(int j);               /* declaring thinking() */
void setState(int i,int number);        /* declaring setState() */
void test(int i);               /* declaring test() */
void philosopher(int i);            /* declaring philosopher() */
void eating(int j);             /* declaring eating() */
void put_Forks(int i);              /* declaring put_Forks() */
int argNo(char *argv);              /* declaring arg number() */

int main(int args,char *argv[])
{
    int i;              /* declaring i*/
    i = argNo(argv[1]);     /* assigning argument number to i*/ 
    if((i < 0) || (i >= N))
    {
        fprintf(stderr,"Input not valid\n");    /* displays an error message*/
                            /* when number is less than 0*/
                            /* number is more than N */
    }
    else
    {   
        if((i < N) && (i >= 0))     /* else calls the philosopher function*/
            philosopher(i);     /* and passes the number to it */
//          printf("Hello %d\n", i);
    }   
}

int argNo(char *argv)
{
    int number;         /* declaring number*/
    sscanf(argv,"%d",&number);  /* gets number from the command line */
    return number;          /* return number*/
}

void philosopher(int i)
{                               
    int j;                  /* declaring j*/

    for(j = 0; j < REPETITIONS; j++)
    {                           
        thinking(i);            /* invoking thinking function*/
        take_Forks(i);          /* invoking take_Forks function*/
        eating(i);          /* invoking eating function*/
        put_Forks(i);           /* invoking put_Forks function*/
    }
}

void thinking(int j)
{
    int i,pid;              /* declaring i and pid */
    FILE *fp = fopen(Output,"a+");      /* creating and opening a file*/
    pid = getpid();             /* getting process id*/
    for(i = 0;i < THINKTIME ; i++);     /* philosopher is thinking */
    fclose(fp);             /* closing the file*/
}

void take_Forks(int i)
{
    down(mutex,mutexLock);      /* entering critical region*/
    setState(i,HUNGRY);     /* setting State to hungry */
    test(i);            /* invoking test function*/
    up(mutexLock);          /* exit critical region*/
    downPhilosopher(i);         /* invoking downPhilosopher function*/

}

void eating(int j)
{
    int i;                      /* declaring i as an int */
    int pid = getpid();             /* getting the process ID */
    FILE *fp = fopen(Output,"a+");          /* creating and opening file */
    fprintf(fp,"%d %d eating\n",pid,j);         /* writing a message to a file*/
    fprintf(stdout,"%d %d eating\n",pid,j);     /* displaying to stdout*/
    fflush(fp);                 /* flushing file*/
    for(i = 0; i < EATTIME; i++);           /* philosopher eating*/ 
    fprintf(fp,"%d %d done eating\n",pid,j);    /* writing message to file*/    
    fprintf(stdout,"%d %d done eating\n",pid,j);    /* displaying to stdout*/
    fflush(fp);                 /* flushing file*/
    fclose(fp);                 /* closing file*/
}

void put_Forks(int i)
{               
    down(mutex,mutexLock);      /* entering critical region*/
    setState(i,THINKING);       /* setting state to thinking */ 
    test(LEFT);         /* checks if left and right */
    test(RIGHT);            /* philosophers want to eat */
    up(mutexLock);          /* exit critical region*/
}

void downPhilosopher(int i)
{               
   int semaphores[N];              /* declaring semaphore array*/   
   do
   {
     readFile(semaphores,binarySemaphore); /* reading binarySemaphore into semaphore */
   }while(semaphores[i] == 0);         /* spin locks if semaphore is 0 */

   setPhilosopher(i,0);            /* setting the philosopher's state to 0*/
}

void setState(int i,int number)
{                       
    int theStates[N];           /* declaring States array*/
    down(states,statesLock);        /* enters critical region*/
    readFile(theStates,states);     /* read states from file*/
    theStates[i] = number;          /* changing the state */
    writeFile(theStates,states);        /* writes a state to a file*/   
    up(statesLock);             /* exit critical region*/
}

void test(int i)
{               
    int theStates[N];           /* declaring theStates array*/
    down(states,statesLock);        /* enters critical region*/
    readFile(theStates,states);         /* read file states*/
    up(statesLock);             /* exit critical region*/
    if(theStates[i] == HUNGRY && theStates[LEFT] != EATING &&
                theStates[RIGHT] != EATING)
    {
        setState(i,EATING); /* set the state of philosopher to eating*/
        setPhilosopher(i,1);    /* set the semaphore to 1*/
    }
}

void setPhilosopher(int i,int number)
{
    int semaphores[N];                          /* declaring semaphores[]*/ 
    down(binarySemaphore,binarySemaphoreLock);  /* enters critical region*/
    readFile(semaphores,binarySemaphore);       /* reading from file*/
    semaphores[i] = number;             /* updates the semaphore array*/
    writeFile(semaphores,binarySemaphore);      /* writing semaphore to file*/
    up(binarySemaphoreLock);            /* exit critical region*/
}

void readFile(int numberFromFile[],char *file)
{ 
    FILE *fp = fopen(file,"r");         /* creating and opening file*/
    int i;                  /* declaring i as int */
    for(i = 0; i< N; i++)
    fscanf(fp,"%d",&numberFromFile[i]);     /* reading from file into*/
                        /* numberFromFile array*/
    fclose(fp);                 /* closing the file*/
}

void writeFile(int numberToFile[],char *file)
{
    FILE *fp = fopen(file,"w");     /* creating and opening a file */
    int i;                  /* declaring i as int */
    for(i = 0; i< N; i++)                   
        fprintf(fp,"%d\n",numberToFile[i]); /* writing  */ 
                                /* numberToFile array to file*/
    fclose(fp);                     /* closing the file*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:37:09.243

您在此处的逻辑并未完全验证输入：

```
i = argNo(argv[1]); 
```

如果我没有提供任何参数，而您的代码期望将数字作为命令行上的第一个参数，我可以复制一个段错误。

快速修复可能是在尝试引用 argv[1]（可能未提供）之前检查 argc（或代码中的“args”）的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:46:32.977

或者尝试在gdb下运行

$ gcc -g myprogram.c

```
(gdb) run
Starting program: /home/b3h3m0th/a.out 

Program received signal SIGSEGV, Segmentation fault.
rawmemchr () at ../sysdeps/i386/rawmemchr.S:116
116     ../sysdeps/i386/rawmemchr.S: No such file or directory 
```

尝试搜索有关此的错误报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:05:55.843

在这个地方，注释与代码不匹配：

```
void readFile(int numberFromFile[],char *file)
{
    /* FILE *fp = fopen(file,"r");         /* creating and opening file*/
    FILE *fp = fopen(file,"w+");         /* creating and opening file*/ 
```

几点注意事项：

*   在 ALLCAPS 中使用预处理器宏是一个好习惯，这使它们易于识别
*   具有 1 个字母名称 (N) 的（全局）常量很难搜索
*   总是用括号括起来宏参数（左，右）
*   永远不要让宏引用变量名，(LEFT,RIGHT)
*   （也许）除了一些琐碎的东西（stderr、日志文件、全局变量）
*   （我犯了这个规则，在宏中使用 filo_count 变量；-）

将 fopen 的模式更改为“w+”，对 main 进行了一些更改（添加了 fork() ），并删除了许多愚蠢的评论。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

#define MAX_PHILOSOPHER 50
#define REPETITIONS 1
#define EATTIME 3000000
#define THINKTIME (EATTIME * 3)
#define LEFT(i) (((i)+filo_count-1)%filo_count)
#define RIGHT(i) (((i)+1)%filo_count)
#define HUNGRY 1
#define EATING 2
#define THINKING 0
#define MUTEX_FILENAME "mutex"
#define MUTEX_FILE_LOCK "mutex.lock"
#define LOG_FILENAME "output"
#define STATE_FILENAME "states"
#define STATE_FILE_LOCK "states.lock"
#define SEMAPHORE_FILENAME "semaphore"
#define SEMAPHORE_FILE_LOCK "semaphore.lock"
#define up(lock) unlink(lock)
#define down(file,lock) do {;} while(link(file,lock)== -1)

void readFile(int array[],char *file);
void writeFile(int array[],char *file);
void setPhilosopher(int i,int number);
void take_Forks(int i);
void downPhilosopher(int i);
void thinking(int j);
void setState(int i,int number);
void test(int i);
void philosopher(int i);
void eating(int j);
void put_Forks(int i);
int argNo(char *argv);

unsigned filo_count=0;
int main(int argc,char *argv[])
{
    int i;

    fprintf(stderr,"argc was %d\n", argc);
    i = argv[1] ? argNo(argv[1]): -1;
    if (i < 0 || i >= MAX_PHILOSOPHER)
    {
        fprintf(stderr,"Input not valid\n");
        exit (1);
    }

    filo_count=i;
    if (0) {
        FILE *fp;
        fp = fopen(MUTEX_FILENAME, "w"); fclose(fp);
        fp = fopen(STATE_FILENAME, "w"); fclose(fp);
        fp = fopen(SEMAPHORE_FILENAME, "w"); fclose(fp);
        }

    for(i=0; i < filo_count ; i++ ) {
        if (fork()) continue;
                /* philosopher is a child process */
        philosopher(i);
        break;
        }
    fprintf(stderr,"%d Dead.\n", getpid() );
    return 0;
}

int argNo(char *argv)
{
    int number;
    sscanf(argv,"%d",&number);
    return number;
}

void philosopher(int i)
{
    int j;

    for(j = 0; j < REPETITIONS; j++)
    {
        thinking(i);
        take_Forks(i);
        eating(i);
        put_Forks(i);
    }
}

void thinking(int j)
{
    int i,pid;
    FILE *fp = fopen(LOG_FILENAME,"a+");
    for(i = 0;i < THINKTIME ; i++);     /* burn some CPU */
    fclose(fp);
}

void take_Forks(int i)
{
    down(MUTEX_FILENAME,MUTEX_FILE_LOCK);      /* enter critical region*/
    setState(i,HUNGRY);
    test(i);
    up(MUTEX_FILE_LOCK);
    downPhilosopher(i);
}

void eating(int j)
{
    int i;
    int pid = getpid();
    FILE *fp = fopen(LOG_FILENAME,"a+");
    fprintf(fp,"%d %d eating\n",pid,j);
    fprintf(stdout,"%d %d eating\n",pid,j);
    fflush(fp);
    for(i = 0; i < EATTIME; i++); /* Spin idle while eating */
    fprintf(fp,"%d %d done eating\n",pid,j);
    fprintf(stdout,"%d %d done eating\n",pid,j);
    fclose(fp);
}

void put_Forks(int i)
{
    down(MUTEX_FILENAME,MUTEX_FILE_LOCK);      /* enter critical region*/
    setState(i,THINKING);
    test(LEFT(i));         /* checks if left and right */
    test(RIGHT(i));        /* philosophers want to eat */
    up(MUTEX_FILE_LOCK);
}

void downPhilosopher(int i)
{
   int semaphores[MAX_PHILOSOPHER];
   do
   {
     readFile(semaphores,SEMAPHORE_FILENAME);
   } while (semaphores[i] == 0);         /* spin locks if semaphore is 0 */

   setPhilosopher(i,0);
}

void setState(int i,int number)
{
    int theStates[MAX_PHILOSOPHER];

    down(STATE_FILENAME,STATE_FILE_LOCK);        /* enters critical region*/
    readFile(theStates,STATE_FILENAME);
    theStates[i] = number;
    writeFile(theStates,STATE_FILENAME);        /* writes a state to a file*/
    up(STATE_FILE_LOCK);
}

void test(int i)
{
    int theStates[MAX_PHILOSOPHER];

    down(STATE_FILENAME,STATE_FILE_LOCK);        /* enters critical region*/
    readFile(theStates,STATE_FILENAME);
    up(STATE_FILE_LOCK);
    if(theStates[i] == HUNGRY
        && theStates[LEFT(i)] != EATING
        && theStates[RIGHT(i)] != EATING)
    {
        setState(i,EATING);
        setPhilosopher(i,1);
    }
}

void setPhilosopher(int i,int number)
{
    int semaphores[MAX_PHILOSOPHER];

    down(SEMAPHORE_FILENAME,SEMAPHORE_FILE_LOCK);  /* enter critical region*/
    readFile(semaphores,SEMAPHORE_FILENAME);
    semaphores[i] = number;
    writeFile(semaphores,SEMAPHORE_FILENAME);
    up(SEMAPHORE_FILE_LOCK);
}

void readFile(int array[],char *file)
{
    FILE *fp = fopen(file,"w+");         /* creating and opening file*/
    int i;
    for(i = 0; i< filo_count; i++) {
       if ( 1 > fscanf(fp,"%d",&array[i]) ) array[i] = -1;
        }

    fclose(fp);
}

void writeFile(int array[],char *file)
{
    FILE *fp = fopen(file,"w");     /* creating and opening a file */
    int i;
    for(i = 0; i< filo_count; i++)  {
        fprintf(fp,"%d\n",array[i]);
        }

    fclose(fp);
} 
```

我没有证明上面的代码是正确的，只是它有效;-)

# php - 解析电子邮件或 html 模板的最佳方法是什么？

> ID：12939659
> 
> 赞同：2
> 
> 时间：2012-10-17T17:09:36.263
> 
> 标签：php, parsing, templates, preg-replace

例如我使用这个：

对于电子邮件模板：

电子邮件.tpl：

```
hello {username}, 
your password is: {password} 
```

解析器.php

```
function parse(){
$message = file_get_contents("email.tpl");
$patterns[0] = "/\{username\}/";
$patterns[1] = "/\{password\}/";
$replacements = array();
$replacements[0] = $username;
$replacements[1] = $password;
return preg_replace($patterns, $replacements, $message);
} 
```

对于 html 模板：html.tpl：

```
<b>hello {username}</b>, 
<p>your password is: {password}</p> 
```

解析器.php

```
function parse(){
$message = file_get_contents("html.tpl");
$patterns[0] = "/\{username\}/";
$patterns[1] = "/\{password\}/";
$replacements = array();
$replacements[0] = $username;
$replacements[1] = $password;
return preg_replace($patterns, $replacements, $message);
} 
```

这是最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:15:46.227

您的方法很好，但是您会发现 PHP 人员经常提到的一件事是“PHP 已经是一个模板引擎”。

因此，您可以执行以下操作：

**电子邮件.tpl**

```
<?php
hello $username, 
your password is: $password
?> 
```

**解析器.php**

```
<?php
function parse($username, $password) {
    ob_start();
    require 'email.tpl';
    return ob_get_clean();
}
?> 
```

**调用解析函数**

```
$emailBody = parse('Someuser', 'Somepass'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:22:33.863

可以使用 preg_replace 但由于您没有进行动态替换（您只有 2 个名为用户名和密码的静态变量），您可以只使用函数 strtr。

`strtr`做简单的字符串替换

`preg_replace`进行复杂的正则表达式字符串搜索和替换

strtr 会快很多（如果你的 html 很重）.. 你可以像这样使用它：

```
function parse(){
    $message = file_get_contents("html.tpl");
    return strtr ( $message , array(
        "{username}" => $username,
        "{password}" => $password,
    ));
} 
```

如果您想要一个动态系统（自动替换 0...n 个变量），preg_replace 是不错的选择

# jquery - 具有透明度的图像上的 jQuery 悬停过渡

> ID：12939666
> 
> 赞同：0
> 
> 时间：2012-10-17T17:10:38.493
> 
> 标签：jquery, css, transparency, alpha-transparency

我发现的所有示例都假设您有 jpg 或其他不透明的图像，例如[本教程](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)。

现在，如果我将其应用于带有阴影效果的 PNG，图像会加倍，阴影实际上会变暗两倍。

如果我在副图像淡出时淡出主图像，则会出现闪烁效果，可以通过`delay()`主图像淡出时的 来最小化，但它仍然很明显。

没有主图像褪色：http: [//jsfiddle.net/ZKnKs/](http://jsfiddle.net/ZKnKs/)

没有主图像褪色：http `delay()`: [//jsfiddle.net/ZKnKs/1/](http://jsfiddle.net/ZKnKs/1/)

主图像褪色`delay()`：http: [//jsfiddle.net/ZKnKs/2/](http://jsfiddle.net/ZKnKs/2/)

对于最后一个，我可以通过在 mouseleave 部分中没有 来减少效果`delay()`，但还不够我喜欢。

我的问题是，我怎样才能让这是一个没有闪烁但又没有加倍阴影的平滑过渡？

我*可以*将阴影分成另一个图像，但这似乎是一个相当不雅的解决方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:26:49.453

我很确定我问的是不可能的。

我想要的是从这样的精灵表中获得一个[按钮](http://waywardrobot.com/test/test.png)。无论这些变量如何，都能够平滑地淡入一个状态到下一个状态：

*   精灵表的 Alpha 透明度
*   背景的颜色或颜色
*   过渡速度
*   （可选）缓动类型

问题是如果它是透明的，总会有一些重叠（如果重叠的部分颜色相同或不透明，这可能很好）或根本不存在，这会导致闪光。

或者我可以让它运行得相当慢，比如 1-2 秒的动画，这也不起作用。

但通常有一种解决方法。

# c# - 通过登录从sql中检索字段

> ID：12939670
> 
> 赞同：0
> 
> 时间：2012-10-17T17:10:59.983
> 
> 标签：c#, asp.net, stored-procedures, sql-server-2012

我在数据库中创建了 2 个表，每个表都有一个相互关联的 CompanyID 字段

在我的注册页面，公司必须注册以下信息：

1.  公司编号
2.  公司名
3.  业务类型
4.  联络人
5.  电话
6.  地址
7.  电子邮件
8.  密码

然后公司使用他们的公司名称和密码登录，一旦登录公司就可以发布工作，我遇到的问题是在我的工作表中还有一个名为 CompanyID 的字段

如何从存储在我的 Company 表中的已注册公司中检索 CompanyID 并使用它

```
 SqlParameter p6 = new SqlParameter("CompanyID", 'here' ); 
```

我的完整代码：

```
 protected void Button1_Click(object sender, EventArgs e)
{
    string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
    SqlConnection con = new SqlConnection(strcon);

    SqlCommand com = new SqlCommand("Store-Jobs", con);
    com.CommandType = CommandType.StoredProcedure;
    SqlParameter p1 = new SqlParameter("Job", TextBox1.Text);
    SqlParameter p2 = new SqlParameter("JobType", DropDownList1.Text);
    SqlParameter p3 = new SqlParameter("StartDate", TextBox3.Text);
    SqlParameter p4 = new SqlParameter("Time", TextBox2.Text);
    SqlParameter p5 = new SqlParameter("JobID", TextBox1.Text.Substring(3).ToUpper());
    SqlParameter p6 = new SqlParameter("CompanyID", );
    SqlParameter p7 = new SqlParameter("PositionFilled", "NO");
    SqlParameter p8 = new SqlParameter("Description", TextBox4.Text);
    com.Parameters.Add(p1);
    com.Parameters.Add(p2);
    com.Parameters.Add(p3);
    com.Parameters.Add(p4);
    com.Parameters.Add(p5);
    com.Parameters.Add(p6);
    com.Parameters.Add(p7);
    com.Parameters.Add(p8);
    con.Open();
    com.ExecuteNonQuery();
    Labelinfo.Text = "Post successful.";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:21:16.680

有几种方法可以做到这一点。由于用户正在登录特定公司，因此我假设 CompanyId 在整个会话期间都是相同的。因此，我建议在登录过程中检索 CompanyId 并将其存储到 Session 变量中。然后，您可以随时从该会话变量中获取 CompanyId。

另一种方法是将公司名称传递到存储过程中，并让存储过程使用公司名称值获取 CompanyId。

在第二点上......当我看到可能有问题的代码时，我喜欢展示最佳实践。如果一切成功，您的代码将正常工作，但如果发生异常，则您将保持 SQL 连接打开。我冒昧地重构了您的代码以显示替代方案...

```
string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"; 

// Use "using" statement to guarantee connection is closed even if exception occurs
using (SqlConnection con = new SqlConnection(strcon))
{
    con.Open(); 
    using (SqlCommand com = con.CreateCommand("Store-Jobs"))
    {
        com.CommandType = CommandType.StoredProcedure; 
        com.Parameters.AddWithValue("Job", TextBox1.Text); 
        com.Parameters.AddWithValue("JobType", DropDownList1.Text); 
        com.Parameters.AddWithValue("StartDate", TextBox3.Text); 
        com.Parameters.AddWithValue("Time", TextBox2.Text); 
        com.Parameters.AddWithValue("JobID", TextBox1.Text.Substring(3).ToUpper()); 
        com.Parameters.AddWithValue("CompanyID", ); 
        com.Parameters.AddWithValue("PositionFilled", "NO"); 
        com.Parameters.AddWithValue("Description", TextBox4.Text); 
        com.ExecuteNonQuery(); 
    }
}
Labelinfo.Text = "Post successful."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:26:13.523

你有几个选择：

1.  您可以使用公司名称从 Company 表中检索公司 ID，使用不同的存储过程，然后`Store-Job`像在代码中一样调用该过程。

2.  您可以修改`Store-Job`以使用公司名称而不是公司 ID，并且在该过程中，通过公司名称查找公司 ID，然后使用它在 Jobs 表上执行插入。

3.  由于您在登录时进行了某种形式的验证，这可能是检索公司 ID 并将其存储在会话中的好时机（正如上面 Gene S 建议的那样）。然后，您可以检索它并在存储过程中使用它。

由于您可能需要在应用程序的许多地方使用它，以确保保存或检索的数据属于正确的公司，因此选项 3 听起来是最好的。

# java - 从另一个类访问的单例类

> ID：12939671
> 
> 赞同：2
> 
> 时间：2012-10-17T17:11:01.080
> 
> 标签：java, multithreading, singleton

我有一个场景，我必须连接到虚拟中心并获取数据。我已经实现了一个单例类，因此两个线程不能同时访问 VC，因为它存在并发访问问题。我的代码如下：

```
public class Connector {    
private static Connector instance ;    
private Connector(String urlStr, String username, String password) {
    connect(urlStr, username, password);
}    
public static synchronized Connector getInstance(String urlStr, String username, String password) {
    if (instance == null){
        instance = new Connector(urlStr,username,password);
        System.out.println("creating instance");
    }
    return instance ;
}   
public void connect(String urlStr, String username, String password) {
    ClassLoader cl = Thread.currentThread().getContextClassLoader();
    try {
        //code to connect to VC
        }

    } catch (RuntimeException e) {
        connectException = e;
    } finally {
        Thread.currentThread().setContextClassLoader(cl);
    }
}

public void disconnect() throws RuntimeFault, RemoteException {
    //code for disconnect
    }
} 
```

}

我通过以下方式从另一个类中调用它：

```
Connector c = Connector.getInstance(dburl, dbuser, dbpass);
c.connect(dburl, dbuser, dbpass);
//code for getting data
c.disconnect(); 
```

现在，如果我有 2 个同时请求从虚拟中心获取数据，其中一个请求失败，说“会话未通过身份验证”。你能帮助我们更好地处理这个问题吗？并且由于始终使用相同的实例，如果它是不同的虚拟中心，我们如何区分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:15:01.190

你的序列

1.  连接
2.  做东西
3.  断开

不是原子的，这意味着有可能

1.  线程 1 连接
2.  线程 2 连接
3.  线程 1 做事
4.  线程 1 断开连接
5.  线程 2 尝试做事但失败了。

* * *

构建您的类，以使客户端不会连接失败、断开连接失败或与另一个操作交错。

您的 API 可以允许想要使用连接的代码传入一个在连接时使用连接的对象，并返回使用该连接的结果：

```
 public interface ConnectionTask<T> {
   public T useConnection(Connection c);
 } 
```

然后而不是写`getInstance`一个`useConnection`

```
 public synchronized <T> T useConnection(ConnectTask<T> c) {
   connect();
   try {
     return c.useConnection(this);
   } finally {
     disconnect();
   }
 } 
```

并制作`connect`，`disconnect` `private`以便客户不能滥用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:21:08.350

在第一种方法中，您只保留对连接的独占访问权限。

我建议您添加一个您在第一种方法中锁定并在释放连接时解锁的`Lock`like 。`ReentrantLock`

另一种方法是使用可能更安全的访问者模式。

```
interface UsesConnector {
    public void useConnector(Connector connector);
}

public class Connector {
    private static final Connector connector = new Connector();

    public static synchronized void useConnector(String urlStr, String username, String password, UsesConnector usesConnector) {
         connector.connect(urlStr, username, password);
         try {
             usesConnector.useConnector(connector);
         } finally {
             connector.disconnect();
         }
    }
} 
```

# xcode - Xcode 错误：无法启动 [目录] - 无效的主机字符串：'localhost'

> ID：12939672
> 
> 赞同：0
> 
> 时间：2012-10-17T17:11:02.713
> 
> 标签：xcode

我正在尝试运行一个 C++ 项目，但我收到此“无效的主机字符串：localhost”错误。

这是我的 /ect/hosts 文件：

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0     localhost 
```

即使，我仍然收到错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:39:48.300

我也有同样的问题。

我在网上找到了这些对其他人有用的解决方案，也许它对你有用。

链接： [http ://ubuntuforums.org/showthread.php?t=1896148](http://ubuntuforums.org/showthread.php?t=1896148)

[https://superuser.com/questions/354902/etc-hosts-getting-reset-in-lion/379560#379560](https://superuser.com/questions/354902/etc-hosts-getting-reset-in-lion/379560#379560)

如果其他人有其他建议，我也会全神贯注，因为我仍然面临同样的问题。

* * *

编辑：

我找到了解决问题的方法。我的主机文件保存为 .rtf 文件，而不是 .txt 格式。在我进行更正后，一切正常。也许这会对你有所帮助。祝你好运！

# c# - 将文件中的信息加载到窗口中

> ID：12939677
> 
> 赞同：0
> 
> 时间：2012-10-17T17:11:11.813
> 
> 标签：c#

我有以下表格。第一个按钮打开一个文本文件并在表单的富文本框中显示该文件。第二个按钮打开另一个窗口。我想要的是让该窗口预先填充该文本文件中的数据......

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace HomeInventory2
{
    public partial class Form2 : Form
    {
        OpenFileDialog openFileDialog1 = new OpenFileDialog();
        public Form2()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, System.EventArgs e)
        {
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                richTextBox1.LoadFile(openFileDialog1.FileName, RichTextBoxStreamType.RichText);
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Application.Run(new Form1());
        }
    }
} 
```

需要填写的表格

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using HomeInventory2.Domain;
using HomeInventory2.Business;

namespace HomeInventory2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            invtryMngr.Create(create);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:15:51.637

创建一个接受`string`重载的新构造函数。当您打开 new`Form`时，传入文本日期并填充文本框。

```
//in the new form that opens up
public Form1(string prepopulated)
{
    InitializeComponent();
    myRichTextbox.Text = prepopulated;
} 
```

并从您的点击事件中调用它，如下所示：

```
//in the first form
private void button2_Click(object sender, EventArgs e)
{
    Application.Run(new Form1(richTextBox1.Text));
} 
```

如果您的内容比简单的文本文件更复杂，您可以改用[RichTextBox.Document](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.document.aspx)并传递它而不是字符串。将重载更改为

```
Form1(FlowDocument prepopulated) 
```

并这样称呼它

```
Application.Run(new Form1(richTextBox1.Document)); 
```

# dojo - 无法使用 dojo 1.8 正确渲染 Horizo ntalRangeSlider

> ID：12939681
> 
> 赞同：0
> 
> 时间：2012-10-17T17:11:23.567
> 
> 标签：dojo

我正在尝试让 dojo 的 Horizo​​ntalRangeSlider 工作，[但 jsFiddle 中的一个简单示例](http://jsfiddle.net/jonbri/g78Uk/)似乎无法正确呈现（Firefox 16 或 Chrome）。

这是用于具有多个头的滑块的正确组件吗？[1.8的文档](http://dojotoolkit.org/reference-guide/1.8/dojox/form/RangeSlider.html)仍然使用 1.6 的约定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:08:27.727

您的示例缺少样式表。带有一个的`dojox/form/RangeSlider`船只，在`dojox/form/resources`.

添加：

```
<link rel="stylesheet" 
 href="http://ajax.googleapis.com/ajax/libs/dojo/1.8/dojox/form/resources/RangeSlider.css" 
/> 
```

到您的 html 输出

见[http://jsfiddle.net/g78Uk/1/](http://jsfiddle.net/g78Uk/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T19:25:00.043

这是带有标尺的小提琴的改进版本，以编程方式添加。

```
 var sliderRules = new dijit.form.HorizontalRuleLabels({
        minimum: 0,
        maximum: 12,
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        labelStyle: "font-size:9px;color: #333",
        style: "width:300px;height:30px;"
    }, "ruler");

    var rangeSlider = new dojox.form.HorizontalRangeSlider({
        name: "rangeSlider",
        value: [2, 6],
        minimum: 0,
        maximum: 12,
        discreteValues: 12,
        style: "width:300px;",
        onChange: function (value) {
            //alert('change occurred');
        }
    }, "rangeSlider"); 
```

您可以在此处找到更多详细信息。

[http://jsfiddle.net/g78Uk/21/](http://jsfiddle.net/g78Uk/21/)

# android - 有没有其他合适的数据库可以通过安卓手机和门户网站访问？

> ID：12939682
> 
> 赞同：-1
> 
> 时间：2012-10-17T17:11:28.440
> 
> 标签：android, database, web-applications

我是android开发的新手。目前，我面临着选择合适的数据库软件来保存出租车服务移动应用程序的用户注册详细信息的问题。

这个应用程序需要用户登录，司机和乘客的详细信息将保存在同一个数据库中。将有一个管理员通过此应用程序的门户网站控制系统。我不确定 SQLite 是否是合适的数据库，或者是否有任何其他合适的数据库适合我的项目，Android 手机和门户网站都可以访问该数据库？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:15:33.807

IMO，您以错误的方式看待这个问题。

如果所有内容都将存储在服务器上，则通过服务访问手机中的数据。

您可以使用普通的 SQLite DB 保留设备本地数据。在服务器端，我可能会使用其他东西，比如 MySql、Postgresql 等。

# .net - Metro 应用程序中的情节提要动画和附加属性

> ID：12939683
> 
> 赞同：1
> 
> 时间：2012-10-17T17:11:30.767
> 
> 标签：.net, windows, animation, microsoft-metro

我有一个非常具体的用例，并且在实现它时遇到了一个非常奇怪的问题。在我的 Metro 应用程序中，我想要在用户交互中移动一些图像。比如说，一个棋子的图像。因为，我不能在这里跟随指针移动来制作动画，所以我正在使用情节提要动画来完成任务。

所以，我基本上拥有的是整个游戏板的画布，以及底角的小棋子图像。初始设置很简单，因为我可以手动设置棋子的 Top 和 Left 属性。为了移动棋子，我只是根据移动计算新的 Top 和 Left 属性。例如，如果玩家向上移动 pawn，Top 的值会改变 (Canvas.Height / 8)，但 Left 属性保持不变。现在，到这里为止，一切都很好。唯一的问题是，这会导致图像从初始位置跳转到最终位置，而不是平滑移动。

因此，我创建了故事板，用于为顶部和左侧位置设置动画，如下所示。

```
<Storyboard x:Key="storyboard">
    <DoubleAnimation x:Name="playerLeftAnimation" Storyboard.TargetName="playerPiece"
                     Storyboard.TargetProperty="Canvas.Left" 
                     EnableDependentAnimation="True"    
                     Duration="0:0:2" />
    <DoubleAnimation x:Name="playerTopAnimation" Storyboard.TargetName="playerPiece"
                     Storyboard.TargetProperty="Canvas.Top" 
                     EnableDependentAnimation="True"    
                     Duration="0:0:2" />
</Storyboard> 
```

如果我将此方法用于正常的依赖属性（如 Fontsize），则此方法效果很好。这里 playerPiece 是图像名称。帆布是未命名的。但是，在这里它给了我一个例外，说“无法解决故事板的目标属性”。我错过了要设置的东西吗？或者我应该尝试其他方式来为图像的位置设置动画？如果是，任何想法，这是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:20:12.370

解决了，感谢 MSDN。只需将 targetproperty 提及为“（Canvas.Left）”而不是“Canvas.Left”。

# php - 在比较运算符之前放置 boolean 或 null 的原因是什么？

> ID：12939684
> 
> 赞同：7
> 
> 时间：2012-10-17T17:11:34.090
> 
> 标签：php

在 PHP 中，在相同比较运算符之前放置 boolean 或 null 的根本原因是什么？

```
false === $value;   
null === $value; 
```

在我看来，这与说

```
$value === false; 
```

这只是个人喜好还是人们这样做的具体原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T17:13:44.323

这是避免意外分配变量的错误的惯例。

```
$value = false; 
```

代替

```
$value === false; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T17:14:19.283

这有时被称为*Yoda-conditions* ，所有这些结构及其非官方名称都有一个有趣的[列表。](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)

`$var === false`不， or之间没有真正的区别`false === $var`，有些人声称如果 bool 是左操作数，则更容易看到正在检查的内容，其他人讨厌它......简而言之：个人偏好就是它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T17:15:59.643

它应该更快，但我无法通过简单的谷歌搜索来接触权威人士。看：

[http://forums.phpfreaks.com/topic/222939-is-there-a-difference-between-ifvar-false-and-iffalse-var/](http://forums.phpfreaks.com/topic/222939-is-there-a-difference-between-ifvar-false-and-iffalse-var/)

一种意见。

# mysql - mySQL 同时查询空值和 NULL 值

> ID：12939690
> 
> 赞同：5
> 
> 时间：2012-10-17T17:12:11.033
> 
> 标签：mysql, sql

在数据库中，在字段中，我有两个字段，它们是`picName`和`UserName`。`picName`可以有一个值、一个图片的`NULL`名称或者它可以是**空**的。

我想查询`userName`那些`picName`要么是要么为`NULL`空**的**条目。

我分别尝试了这些命令

```
Select userName from user where picName = ''

Select userName from user where picName IS NULL 
```

但我想在 1 个查询中获得这两个结果。

我尝试使用`IN`这样的运算符

```
Select userName from user where picName IN ('' , IS NULL) 
```

但它没有用。

我该怎么办...？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T17:13:08.427

`OR`如果您的条件有多个过滤器，请使用

```
Select userName 
from user 
where picName IS NULL OR 
      picName = '' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T17:16:49.547

其他答案的替代方法是使用 MySQL 的[`IFNULL()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_ifnull)or[`COALESCE()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_coalesce)函数：

```
SELECT userName FROM user WHERE IFNULL(picName='',TRUE);
SELECT userName FROM user WHERE COALESCE(picName,'') = ''; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:13:58.533

您希望满足两个条件之一，因此条件一`OR`条件二必须为真，而这正是您需要编写的内容：

```
Select userName from user where picName = '' OR picName IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:13:45.840

```
SELECT userName FROM `user` WHERE picName IS NULL OR picName = '' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-16T07:20:52.080

...ISNULL(picName ,'') 是**MSSQL的函数**

**选择 case when (picname is null or picname = '' then username else 'filled' end from user**

如果 picname = '' 或 null 则为您提供用户名，否则为文本 'Filled'。如果你想过滤这些使用（就像其他人说的那样）：...其中 picname 为 null 或 picname = ''

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-23T18:51:57.473

检查空值和 NULL 值的解决方案。

```
COALESCE(NULLIF(table.column, ''), table.fallback) 
```

所以您的查询将是：

```
SELECT userName FROM user WHERE NULLIF(picName, '') IS NULL 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-02-12T12:38:25.707

```
select userName from user WHERE ISNULL(picName ,'') = '' 
```

# wpf - 如何在运行时更改连接字符串实体框架

> ID：12939696
> 
> 赞同：0
> 
> 时间：2012-10-17T17:12:31.113
> 
> 标签：wpf, c#-4.0, app-config

如何在运行时更改连接字符串实体框架

我的 appconfig 文件中的代码：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="RelationAtOfficeEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;Initial Catalog=RelationAtOffice;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

我想更改以下代码：

```
 <?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="RelationAtOfficeEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=127.10.10.23,1356;Initial Catalog=RelationAtOffice;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

只是数据源改变了。

它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:24:55.847

当您实例化您的上下文时，它具有参数 connectionString。你可以在那里改变它。

# javascript - 使用 jAlerts 动态更改按钮文本

> ID：12939697
> 
> 赞同：0
> 
> 时间：2012-10-17T17:12:34.963
> 
> 标签：javascript, jquery, alert

我在做一个相对简单的任务时遇到了麻烦。我正在使用 jAlerts ( [http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/) )，我知道它不再受支持，并尝试将按钮的文本更改为一个变量。

到目前为止，这里是 jAlerts 的开始代码，其中按钮被定义为字符串：

```
$.alerts = {

    // These properties can be read/written by accessing $.alerts.propertyName from your scripts at any time

    verticalOffset: -75,                // vertical offset of the dialog from center screen, in pixels
    horizontalOffset: 0,                // horizontal offset of the dialog from center screen, in pixels/
    repositionOnResize: true,           // re-centers the dialog on window resize
    overlayOpacity: .01,                // transparency level of overlay
    overlayColor: '#FFF',               // base color of overlay
    draggable: true,                    // make the dialogs draggable (requires UI Draggables plugin)
    okButton: 'Ok',         // text for the OK button
    cancelButton: 'Cancel', // text for the Cancel button
            deleteButton: 'Delete', // text for the remove button
    dialogClass: null,                  // if specified, this class will be applied to all dialogs 
```

我想要做的是用变量替换那些（在这种情况下，我使用的是一个大型 JS 数组）：

```
$.alerts = {

    // These properties can be read/written by accessing $.alerts.propertyName from your scripts at any time

    verticalOffset: -75,                // vertical offset of the dialog from center screen, in pixels
    horizontalOffset: 0,                // horizontal offset of the dialog from center screen, in pixels/
    repositionOnResize: true,           // re-centers the dialog on window resize
    overlayOpacity: .01,                // transparency level of overlay
    overlayColor: '#FFF',               // base color of overlay
    draggable: true,                    // make the dialogs draggable (requires UI Draggables plugin)
    okButton: property_dict['allDialog.OK.button.text'],         // text for the OK button
    cancelButton: property_dict['grid.Confirm.Delete.cancel'], // text for the Cancel button
            deleteButton: property_dict['grid.Confirm.Delete.remove'], // text for the remove button
    dialogClass: null,                  // if specified, this class will be applied to all dialogs 
```

我在页面顶部看到，它说可以通过访问脚本中的 $.alerts.propertyName 来更改这些属性——问题是，似乎没有任何文档说明如何实际执行此操作。

那里有任何 jAlert 忍者可以帮助我吗：？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:20:24.960

你完全按照它所说的去做 - “在你的脚本中访问 $.alerts.propertyName”

更改确定按钮上的文本：

```
$.alerts.okButton = 'string literal or variable here'; 
```

更改取消按钮上的文本：

```
$.alerts.cancelButton = 'string literal or variable here'; 
```

# grails - grails spring security oauth 仍然需要本地用户名/密码吗？

> ID：12939699
> 
> 赞同：3
> 
> 时间：2012-10-17T17:12:43.827
> 
> 标签：grails, oauth, spring-security

我正在使用 grails/spring security/oauth 插件。但是，当使用 oauth 提供程序时，系统仍然需要用户在系统中创建用户名和密码才能完成注册过程。如果用户使用 oauth 提供程序，有什么方法可以使用户名/密码不需要？也许通过将电子邮件地址设为用户名（我想做的另一件事但找不到简单的解决方案）？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T19:43:38.760

您需要将第 3 方身份验证绑定到本地安全设置。这就是 SecUser 类的用途（参见：[spring-security-core](http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/)插件）。您可以生成此类并对其进行修改以满足您的需要。我不太了解 OAuth 位，但我认为有一些回调点可以添加所需的行为。（也许是 OAuth ID 类？）

# java - 包含方法上的 Set Of Sets 是否检查订单？

> ID：12939701
> 
> 赞同：3
> 
> 时间：2012-10-17T17:12:51.733
> 
> 标签：java, collections, set

我担心的是 Set of Sets (HashSet s) 是否也检查项目的顺序。我编写了一个应用程序来检查给定的整数集是否存在于整数集

昨天在一台计算机上不知何故我注意到什么 Set of Integers 是无序的（关于 HashSets 有什么可以的）但我担心并写了一些简单的 main 来检查它：

```
public static void main(String[] args) {

    Set<Set<Integer>> set1 = new HashSet<Set<Integer>>();
    Set<Integer> set2 = new HashSet<Integer>();
    Set<Integer> set3 = new HashSet<Integer>();

    set3.add(14); set3.add(2); set3.add(9); set3.add(3); set3.add(5);

    set1.add(set3);

    set3 = new HashSet<Integer>();
    set3.add(6); set3.add(7); set3.add(8); set3.add(9); set3.add(10);   
    set1.add(set3);

    set2.add(9); set2.add(14); set2.add(5); set2.add(2); set2.add(3);

    System.out.println(set1);
    System.out.println(set2);
    if(set1.contains(set2)){
        System.out.println(":)");
    }else 
        System.out.println(":(");
} 
```

问题是我看到了这台机器上的 HashSet 是什么命令。输出是：

```
[[2, 3, 5, 9, 14], [6, 7, 8, 9, 10]]
[2, 3, 5, 9, 14]
:) 
```

所以我的问题是如何比较集合？仅卜值？（对不起，如果这个问题听起来很愚蠢。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:14:13.683

> 所以我的问题是如何比较集合？仅卜值？

是的，比较两个`Set`s 时会忽略顺序。这在 JavaDoc 中有说明[`Set#equals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#equals%28java.lang.Object%29)：

> *比较指定对象与此集合是否相等。如果指定对象也是一个集合，则返回 true，这两个集合具有相同的大小，并且指定集合的​​每个成员都包含在此集合中（或等效地，此集合的每个成员都包含在指定集合中）。此定义确保 equals 方法在 set 接口的不同实现中正常工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:16:17.833

`HashSet`不保证订单会随着时间的推移保持不变。它实际上由哈希表支持。它内部维护桶来存储数据，并通过使用生成桶的哈希索引`hashing algorithm`。插入大量数据集后，您可能会看到顺序可能不同。它调用equals方法来检查两个对象之间的相等性。

# linux - 在没有原始文件系统权限的情况下获取磁盘扇区大小

> ID：12939703
> 
> 赞同：2
> 
> 时间：2012-10-17T17:12:57.817
> 
> 标签：linux, posix, ioctl

我正在尝试获取扇区大小，特别是这样我就可以正确调整缓冲区的大小，以便使用 O_DIRECT 进行读/写。

当我的应用程序以 root 身份运行时，以下代码有效：

```
int fd = open("/dev/xvda1", O_RDONLY|O_NONBLOCK);
size_t blockSize;
int rc = ioctl(fd, BLKSSZGET, &blockSize); 
```

如何在不以 root 身份运行的情况下获得扇区大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:20:17.097

根据 open() 的 Linux 手册页：

> 在 Linux 中，对齐限制因文件系统和内核版本而异，并且可能完全不存在。然而，目前没有独立于文件系统的接口供应用程序发现给定文件或文件系统的这些限制。一些文件系统为此提供了自己的接口，例如 xfsctl(3) 中的 XFS_IOC_DIOINFO 操作。

所以看起来您可以使用 xfsctl() 获取此信息...如果您使用的是 xfs。

由于您的底层块设备是 Xen 虚拟块设备，并且在其之下可能有任意数量的层（LVM、dm-crypt、另一个文件系统等），我不确定所有这些对于真正的意义有多大你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:56:16.447

您可以使用[stat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)和相关的系统调用（可能在某些特定文件上），然后使用该`st_blksize`字段。但是，这将给出与文件系统相关的块大小，而不是硬件首选的扇区大小。但是对于可能更相关的`O_DIRECT`输入（来自文件系统上的文件！） 。`st_blocksize`

否则，我建议使用 2 的幂大小，可能是 8Kbytes 或 64Kbytes，作为`O_DIRECT`-ed 读取的大小（并且您可能希望将读取缓冲区与页面大小对齐，通常为 4Kbytes）。

# c++ - SDL_GL_SwapBuffers() 间歇性缓慢

> ID：12939705
> 
> 赞同：6
> 
> 时间：2012-10-17T17:13:07.617
> 
> 标签：c++, opengl, sdl

我有一个 sdl/opengl 游戏，我正在为好玩而工作。平均而言，我得到了不错的 fps，但运动真的很不稳定，因为 SDL_GL_SwapBuffers() 会随机花费很长的时间来处理。加载纹理并将其写入缓冲区有时会花费超过 100 毫秒！我剪掉了很多代码来尝试找出是否是我做错了，但我运气不佳。当我运行这个简单的程序时，它有时仍会阻塞长达 70 毫秒。

主要的：

```
// Don't forget to link to opengl32, glu32, SDL_image.lib

// includes
#include <stdio.h>

// SDL
#include <cstdlib>
#include <SDL/SDL.h>

// Video
#include "videoengine.h"

int main(int argc, char *argv[])
{
    // begin SDL
    if ( SDL_Init(SDL_INIT_VIDEO) != 0 )
    {
        printf("Unable to initialize SDL: %s\n", SDL_GetError());
    }

    // begin video class
    VideoEngine videoEngine;

    // BEGIN MAIN LOOP
    bool done = false;
    while (!done)
    {
        int loopStart = SDL_GetTicks();

        printf("STARTING SWAP BUFFER : %d\n", SDL_GetTicks() - loopStart);
        SDL_GL_SwapBuffers();

        int total = SDL_GetTicks() - loopStart;
        if (total > 6)
            printf("END LOOP  : %d ------------------------------------------------------------>\n", total);
        else
             printf("END LOOP  : %d\n", total);

    }
    // END MAIN LOOP

    return 0;
} 
```

我的“VideoEngine”构造函数：

```
 VideoEngine::VideoEngine()
{
    UNIT = 16;
    SCREEN_X = 320;
    SCREEN_Y = 240;
    SCALE = 1;

    // Begin Initalization

        SDL_Surface *screen;

        SDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1 );  // [!] SDL_GL_SetAttributes must be done BEFORE SDL_SetVideoMode

        screen = SDL_SetVideoMode( SCALE*SCREEN_X, SCALE*SCREEN_Y, 16, SDL_OPENGL );  // Set screen to the window with opengl
        if ( !screen )  // make sure the window was created
        {
            printf("Unable to set video mode: %s\n", SDL_GetError());
        }

        // set opengl state
        opengl_init();

    // End Initalization

}

void VideoEngine::opengl_init()
{
    // Set the OpenGL state after creating the context with SDL_SetVideoMode

        //glClearColor( 0, 0, 0, 0 );                             // sets screen buffer to black
        //glClearDepth(1.0f);                                     // Tells OpenGL what value to reset the depth buffer when it is cleared
        glViewport( 0, 0, SCALE*SCREEN_X, SCALE*SCREEN_Y );     // sets the viewport to the default resolution (SCREEN_X x SCREEN_Y) multiplied by SCALE. (x,y,w,h)
        glMatrixMode( GL_PROJECTION );                          // Applies subsequent matrix operations to the projection matrix stack.
        glLoadIdentity();                                       // Replaces the current matrix with the identity matrix
        glOrtho( 0, SCALE*SCREEN_X, SCALE*SCREEN_Y, 0, -1, 1 ); //describes a transformation that produces a parallel projection
        glMatrixMode( GL_MODELVIEW );                           // Applies subsequent matrix operations to the projection matrix stack.
        glEnable(GL_TEXTURE_2D);                                // Need this to display a texture
        glLoadIdentity();                                       // Replaces the current matrix with the identity matrix
        glEnable(GL_BLEND);                                     // Enable blending for transparency
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);      // Specifies pixel arithmetic
        //glDisable( GL_LIGHTING );                               // Disable lighting
        //glDisable( GL_DITHER );                                 // Disable dithering
        //glDisable( GL_DEPTH_TEST );                             // Disable depth testing

        //Check for error
        GLenum error = glGetError();
        if( error != GL_NO_ERROR )
        {
         printf( "Error initializing OpenGL! %s\n", gluErrorString( error ) );
        }

    return;
} 
```

我开始认为我可能有硬件问题？不过，我从来没有在游戏中遇到过这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:25:07.693

SDL 确实使用了`SwapIntervalEXT`扩展，因此您可以确保缓冲区交换尽可能快（禁用 VSYNC）。此外，缓冲区交换不是一个简单的操作，OpenGL 需要将后缓冲区的内容复制到前缓冲区，以备不时之需`glReadPixels()`。`WGL_ARB_pixel_format`可以使用, using控制此行为`WGL_SWAP_EXCHANGE_ARB`（您可以在规范中阅读所有这些内容；现在我不确定是否有替代 Linux 的替代方法）。

然后最重要的是，有窗口系统。这实际上会造成很多麻烦。此外，如果产生一些错误......

如果您在小型移动 GPU 上运行，这种行为可能没问题。

`SDL_GL_SwapBuffers()`仅包含对`glxSwapBuffers()`/的调用，`wglSwapBuffers()`因此没有时间花在那里。

# actionscript-3 - AS3 中的碰撞检测和裁剪问题

> ID：12939719
> 
> 赞同：2
> 
> 时间：2012-10-17T17:14:06.880
> 
> 标签：actionscript-3, collision-detection, game-physics

我最近开始从头开始组装一个小物理模拟，这是我以前从未尝试过的，我遇到了一个关于我在舞台上的物体碰撞之间的相互作用的问题，我认为是我的恒重力。我不确定 200 行代码是否对于这里来说太大了，但这就是我所拥有的。

```
package  {

    import flash.events.*;
    import flash.display.*;
    import flash.geom.Rectangle;

    [SWF (width="1500", height="1000", frameRate="24")]
    public class ElasticityV2 extends MovieClip{
        /* Gravity is 9.8 m/s2, which for flash, since it's being applied every frame, needs to be 
        divided out by the frame rate as to not have super fast acceleration. GravMulti is to balance
        out gravity's speed, as it seemed a little slow after the framerate division. Resistance is acting
        like friction for now, and slows down the objects in the air and on the ground at the same rate.
        Elasticity is how bouncy each object is and how the force it recieves is applied*/
        public var gravMulti:Number = 5;
        public var gravity:Number = gravMulti *(9.8/stage.frameRate);
        public var resistance:Number = 0.98;
        public var elasticity:Number = 0.8;
        public var floor:Number = stage.stageHeight - 100;

        public var objectList:Array = new Array();
        public var shadowList:Array = new Array();
        public var yVelocityList:Array = new Array();
        public var xVelocityList:Array = new Array();
        public var massList:Array = new Array();
        public var frictionList:Array = new Array();
        public var lastXList:Array = new Array();
        public var lastYList:Array = new Array();
        public var elasticityList:Array = new Array();
        public var dragList:Array = new Array();

        public var spawnNum:int = 20;

        public var bounding:Rectangle = new Rectangle(0,0,stage.stageWidth - 100,stage.stageHeight);

        public var distantBackground:Background = new Background();
        public var starLight:Light = new Light();

        public function ElasticityV2() {

            addChild(starLight);
            starLight.x = stage.stageWidth/2;
            starLight.y = -400;
            starLight.addEventListener(MouseEvent.MOUSE_DOWN, onLightDrag);
            starLight.addEventListener(MouseEvent.MOUSE_UP, onLightDrag);
            starLight.addEventListener(MouseEvent.MOUSE_OUT, onLightDrag);

            for(var s:int=0;s<spawnNum;s++){
                var ballShadow:Shadow = new Shadow();
                addChild(ballShadow);
                setChildIndex(ballShadow,0);
                ballShadow.y = floor - (ballShadow.height/2);
                ballShadow.x = 100;
                shadowList.push(ballShadow);

                var ball:ElasticBall = new ElasticBall();
                var dragging:Boolean = false;
                addChild(ball);
                ball.y = 100;
                ball.x = s * 200;
                objectList.push(ball);
                yVelocityList.push(randomMe(20,-20));
                xVelocityList.push(randomMe(40,-40));
                massList.push(randomMe(20,5));
                frictionList.push(randomMe(0.6,0.01));
                objectList[s].width = objectList[s].height = massList[s] * 10;
                elasticityList.push(elasticity);
                dragList.push(dragging);
                ball.addEventListener(MouseEvent.MOUSE_DOWN, onDrag);
                ball.addEventListener(MouseEvent.MOUSE_UP, onDrag);
                ball.addEventListener(MouseEvent.MOUSE_OUT, onDrag);
            }

            addChild(distantBackground);
            distantBackground.y = stage.stageHeight - distantBackground.height;
            distantBackground.width = stage.stageWidth;
            setChildIndex(distantBackground,0);

            addEventListener(Event.ENTER_FRAME, onGameLoop);

        }

        public function onGameLoop(e:Event):void{
            //checkCollision();
            for(var i:int=0;i<objectList.length;i++){
                updatePhysics(i);
                updateShadows(i,starLight);
            }
        }

        public function updatePhysics(objRef:int):void{
            if(lastXList[objRef] != undefined){
                if(lastXList[objRef] != objectList[objRef].x){
                    xVelocityList[objRef] = objectList[objRef].x - lastXList[objRef];
                }
            }

            if(lastYList[objRef]!= undefined){
                if(lastYList[objRef] != objectList[objRef].y){
                    yVelocityList[objRef] = 4*(objectList[objRef].y - lastYList[objRef])/stage.frameRate;
                }
            }

            if(objectList[objRef].y>= floor - objectList[objRef].height){
                yVelocityList[objRef] = -(yVelocityList[objRef] * elasticityList[objRef]);  
                objectList[objRef].y = floor - objectList[objRef].height;
            }
            if(objectList[objRef].y<= 0){
                yVelocityList[objRef] = -(yVelocityList[objRef] * elasticityList[objRef]);  
                objectList[objRef].y = 0;
            }
            if(objectList[objRef].x > (stage.stageWidth - objectList[objRef].width)){
                xVelocityList[objRef]=-xVelocityList[objRef];
                objectList[objRef].x = stage.stageWidth - objectList[objRef].width;
            }
            if (objectList[objRef].x <0){
                xVelocityList[objRef]=-xVelocityList[objRef];
                objectList[objRef].x = 0;
            }

            if(!dragList[objRef]){
                yVelocityList[objRef]+=gravity;
                objectList[objRef].y += yVelocityList[objRef];
                xVelocityList[objRef]= (xVelocityList[objRef] * resistance);
                if(-0.5<xVelocityList[objRef] && xVelocityList[objRef]<0.5){
                    xVelocityList[objRef] = 0;
                }
                objectList[objRef].x += xVelocityList[objRef];
            }
            lastXList[objRef] = objectList[objRef].x;
            lastYList[objRef] = objectList[objRef].y;

            if(xVelocityList[objRef] == 0){
                xVelocityList[objRef]=randomMe(90,-90);
                yVelocityList[objRef]=randomMe(90,-90); 
            }
        }

        public function onDrag(e:Event):void{
            if(e.type == "mouseDown"){
                setChildIndex(DisplayObjectContainer(e.target),numChildren - 1)
                e.target.startDrag(false,bounding);
                //xVelocityList[objRef] = yVelocityList[objRef] = 0;
                //dragging = true;
            }else{
                e.target.stopDrag();
                //dragging = false;
            }

        }

        public function onLightDrag(e:Event):void{
            if(e.type == "mouseDown"){
                e.target.startDrag(false,bounding);
            }else{
                e.target.stopDrag();
            }
        }

        public function updateShadows(objRef:int, lightSource:MovieClip):void{

            //-----Cut for convenience------
        }

        public function checkCollision():void{
            for(var v:int=0;v<objectList.length;v++){
                var ball1 = objectList[v];
                for(var w:int=v+1;w<objectList.length;w++){
                    var ball2 = objectList[w];
                    if((ball1.x + getRadius(ball1) + getRadius(ball2) > ball2.x) && (ball1.x < ball2.x + getRadius(ball1) + getRadius(ball2)) && (ball1.y + getRadius(ball1) + getRadius(ball2) > ball2.y) && (ball1.y < ball2.y + getRadius(ball1) + getRadius(ball2))){

                        var dx:Number = ball2.x - ball1.x;
                        var dy:Number = ball2.y - ball1.y;

                        var dist:Number = Math.sqrt((dx * dx) + (dy * dy));

                        if(dist < getRadius(ball1)+getRadius(ball2)){

                            var newX1:Number;
                            var newY1:Number;
                            var newX2:Number;
                            var newY2:Number;

                            trace("Magnitude 1 is : " + (Math.sqrt((xVelocityList[v] * xVelocityList[v]) + (yVelocityList[v] * yVelocityList[v]))));
                            trace("Magnitude 2 is : " + (Math.sqrt((xVelocityList[w] * xVelocityList[w]) + (yVelocityList[w] * yVelocityList[w]))));

                            newX1 = ((massList[v] * xVelocityList[v])+(massList[w] * xVelocityList[w]))/(massList[v] + massList[w]) * 2 - xVelocityList[v];
                            newY1 = ((massList[v] * yVelocityList[v])+(massList[w] * yVelocityList[w]))/(massList[v] + massList[w]) * 2 - yVelocityList[v];
                            newX2 = ((massList[v] * xVelocityList[v])+(massList[w] * xVelocityList[w]))/(massList[v] + massList[w]) * 2 - xVelocityList[w];
                            newY2 = ((massList[v] * yVelocityList[v])+(massList[w] * yVelocityList[w]))/(massList[v] + massList[w]) * 2 - yVelocityList[w];

                            xVelocityList[v] = newX1;
                            yVelocityList[v] = newY1;
                            xVelocityList[w] = newX2;
                            yVelocityList[w] = newY2;

                            ball1.x += newX1;
                            ball1.y += newY1;
                            ball2.x += newX2;
                            ball2.y += newY2;

                        }

                    }
                }
            }
        }

        public function randomMe(high:Number, low:Number = 0):Number{
            return Math.random() * (high - low) + low;
        }

        public function getRadius(obj:MovieClip):Number{
            return obj.width/2;
        }

        public function centerX(obj:MovieClip):Number{
            return obj.x + getRadius(obj);
        }

        public function centerY(obj:MovieClip):Number{
            return obj.y + getRadius(obj);
        }

    }

} 
```

这是一个非常简单的碰撞检查系统，只需比较物体的半径，空中碰撞似乎很好，但如果一个球落在另一个没有 x 或 y 速度的球上，它就会沉入其中。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:43:04.673

我希望你的球的行为是这样的：当一个球落在另一个球上时，实际上是在地上，另一个球被推到地上，然后你在 updatePhysics() 中通过将它放置到位置来对其做出反应因此，在它起源的地方，这些球变成了另一个球。可以解决此问题的建议之一是将每个球的最后一个碰撞对象保持一个物理周期，如下所示：

```
if(dist < getRadius(ball1)+getRadius(ball2)){
    // process collision
    ball1.lastCollided=ball2;
    ball2.lastCollided=ball1;
} 
```

然后，当您在 updatePhysics() 中更新坐标时，检查 lastCollided 是否为空，如果不是，则以相同的方式更新该球的坐标和速度，本质上是模拟另一次碰撞。检查更新物理周期内的所有事件后，将 null 分配给所有球的 lastCollided。

# streaming - API v2 的直播缩略图一半时间无效

> ID：12939731
> 
> 赞同：2
> 
> 时间：2012-10-17T17:14:39.317
> 
> 标签：streaming, video-streaming, youtube-api, live

**总体：**从 API v2 中提取时，我无法获得 youtube 直播流的有效缩略图（我返回的流的缩略图中约有 40% 到 50% 无效/404 - 灰色“无屏幕截图”图像）。

**详细信息：**这是我用来抓取流的内容：

```
https://gdata.youtube.com/feeds/api/charts/live/events/live_now?v=2&alt=json&inline=true&max-results=20&start-index=1&fields=entry(published,updated,title,author(name),content(entry(media:group))) 
```

在“media$thumbnail”中，我正在获取数据（6 个缩略图项），并且在一半的条目中，它为所有 6 个屏幕截图提供了灰色的“无屏幕截图”图标。另一半通常会给我一半有效的缩略图和一半无效的缩略图。所以我可能会取回默认图像（高清和常规），它不会给我编号的图像（0.jpg、1.jpg、2.jpg 等）。

我尝试使用我所知道的仅有的两种 url 变体：

```
http://i.ytimg.com/vi/[VID-ID]/default.jpg

http://img.youtube.com/vi/[VID-ID]/0.jpg 
```

从直播网站来看，没有无效的缩略图表明所有直播都有有效的缩略图，或者这是否意味着 youtube 不显示没有有效缩略图的流？我还注意到他们在使用 1.jpg 和 default.jpg 之间切换了很多，有没有办法通过 api 来判断哪个图像是首选的？

感谢您对此主题的任何帮助！

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-21T19:40:10.153

对于其他任何在为 YouTube 直播流获取正确缩略图时遇到此问题的人。通过调用 json API，我能够获得为我的直播返回的实际缩略图。这些与 YouTube 网站上使用的缩略图相同。显然，他们对直播流使用了不同的 URI 模式：

```
https://i.ytimg.com/vi/{{YOUTUBE_ID}}/default_live.jpg
https://i.ytimg.com/vi/{{YOUTUBE_ID}}/mqdefault_live.jpg
https://i.ytimg.com/vi/{{YOUTUBE_ID}}/hqdefault_live.jpg
https://i.ytimg.com/vi/{{YOUTUBE_ID}}/sddefault_live.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:48:48.613

因此，您看到的视频 ID 似乎与“环聊直播”相对应，这些视频 ID 是通过 YouTube 直播的 Google+ 环聊。他们使用与正常预定的 YouTube 直播活动不同的设置，例如，您不能在广播之前创建缩略图（因为直播活动是即时创建的）。

# scala - 在 2.10 中替代 Scala REPL breakIf

> ID：12939732
> 
> 赞同：35
> 
> 时间：2012-10-17T17:14:46.100
> 
> 标签：scala, scala-2.10

我在[这里](https://stackoverflow.com/questions/2160355/drop-into-interpreter-during-arbitrary-scala-code-location)阅读了有关在 REPL 代码中使用该`breakIf`方法进行交互式调试的信息，但后来我发现[这篇文章](https://issues.scala-lang.org/browse/SI-6435)这么说，`break`并`breakIf`从`ILoop`Scala 2.10 中删除。不幸的是，该帖子没有解释*为什么*删除代码。

我假设这些功能已被删除，因为有更好的方法来做到这一点。如果是这样的话，有人可以启发我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:44:28.663

也许这个想法是你应该`ILoop`直接使用？据我所知，它不应该比以下复杂得多：

```
// insert the code below wherever you want a REPL
val repl = new ILoop
repl.settings = new Settings
repl.in = SimpleReader()
repl.createInterpreter()

// bind any local variables that you want to have access to
repl.intp.bind("i", "Int", i)
repl.intp.bind("e", "Exception", e)

// start the interpreter and then close it after you :quit
repl.loop()
repl.closeInterpreter() 
```

与旧的`breakIf`API 相比，这种方法摆脱了额外的间接级别，用于`if`条件（被包装到 a 中`=> Boolean`）和`DebugParam`/ `NamedParam`（它们是临时包装器，仅用于填充`bind`参数）。

这种方法还允许您`Settings`根据需要指定您的。例如，[可以解决一些 REPL 错误，`-Yrepl-sync`但`break`无法指定](https://groups.google.com/d/msg/simple-build-tool/APF5m23jWcQ/_NpUa7YAKIcJ).

# sql - 执行此查询时，是否所有记录都加载到物理内存中？

> ID：12939735
> 
> 赞同：2
> 
> 时间：2012-10-17T17:15:03.463
> 
> 标签：sql, postgresql

我有一张桌子，里面有数百万条记录。该表的总大小仅为 6-7 GigaByte。该表是我的应用程序日志表。这张表增长得非常快，这是有道理的。现在我想将记录从日志表移动到备份表中。这是场景，这是我的问题。

```
Table Log_A
Insert into Log_b select * from Log_A;
Delete from Log_A; 
```

我正在使用 postgres 数据库。问题是

执行此查询时，来自 Log_A 的所有记录是否都加载到物理内存中？注意：我上面的两个查询都在存储过程中运行。如果否，那么它将如何工作？

我希望这个问题适用于所有数据库。

我希望有人能给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:27:34.350

在 PostgreSQL 中，这可能会执行顺序扫描，将一些记录加载到`shared_buffers`中，插入它们，将脏缓冲区写出来，然后继续。

所有记录都将通过主内存，但它们不必一次都在内存中。因为它们都是使用普通缓冲读取（`pread`）从磁盘读取的，所以它*会*影响操作系统磁盘缓存，可能会将其他数据推出缓存。

其他数据库可能会有所不同。`SELECT`有些人可以在处理之前执行整个过程`INSERT`（尽管如果有任何严重的事情我会感到惊讶）。有些*确实*使用`O_DIRECT`读取或原始磁盘 I/O 来避免 OS 缓存影响，因此缓冲区缓存效果可能会有所不同。不过，如果任何数据库都依赖于将整个加载`SELECT`到内存中，我会感到惊讶。

当您想查看 PostgreSQL 在做什么以及如何做时，`EXPLAIN`and`EXPLAIN (BUFFERS, ANALYZE)`命令非常有用。请参阅[手册](http://www.postgresql.org/docs/current/static/sql-explain.html)。

为此，您可能会发现[可写的公用表表达式很有趣；](http://www.postgresql.org/docs/current/static/queries-with.html#QUERIES-WITH-MODIFYING)它使您可以在一个语句中完成所有这些。在这种简单的情况下，可能没有什么好处，但在更复杂的数据迁移中它可能是一个巨大的胜利。

顺便说一句，确保运行包裹在`BEGIN`and中的那对查询`COMMIT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:24:05.837

如果您的设置允许，只需**重命名旧表并创建一个新的空表**。显然，速度要快得多，因为根本不进行复制。

```
ALTER TABLE log_a RENAME TO log_b;
CREATE TABLE log_a (LIKE log_b INCLUDING ALL); 
```

该[`LIKE`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)子句复制（现已重命名的）旧表的结构。[`INCLUDING ALL`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)包括默认值、约束、索引、...

取决于表或其他不太常见的依赖项（但不是 plpgsql 函数中的查询）的外键约束或视图可能是这条路线的障碍。您必须重新创建它们以使它们指向新表。但是像您描述的日志表可能不包含这样的依赖关系。

这将获得表上的*排他锁*。我认为，典型的写访问权限`INSERT`仅适用于您的情况？处理并发访问的一种方法是在**不同的模式****`search_path`**中创建新表并为您的应用程序用户更改表。然后应用程序开始写入新表而不会出现并发问题。当然，您不会在`INSERT`语句中对表名进行模式限定以使其生效。

```
CREATE SCHEMA log20121018;
CREATE TABLE log20121018.log_a (LIKE log20121011.log_a INCLUDING ALL);
ALTER ROLE myrole SET search_path = app, log20121018, public; 
```

`search_path`或者在对您有效的任何级别更改设置：全局、每个数据库、每个角色、每个会话、每个功能......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:18:35.150

可能不是。

每条记录都单独处理；此特定查询不需要了解任何其他记录即可成功执行。因此，在任何给定时刻唯一需要在内存中的记录就是当前正在处理的记录。

但这真的取决于数据库是否认为它可以通过加载整个表来更快地做到这一点。检查查询的执行计划。

# java - Netty 流 URL / InputStream

> ID：12939737
> 
> 赞同：1
> 
> 时间：2012-10-17T17:15:10.470
> 
> 标签：java, streaming, netty

我正在尝试扩展这里的功能：

[https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/file](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/file)

通过提供对流 URL 而非文件的支持，因为我想提供的内容位于我的 JAR 中的类路径中。不幸的是，我似乎找不到使用 Jetty 流式传输 URL 或 InputStream 的好方法，也找不到任何示例。

示例或对 JavaDoc 的参考将不胜感激，以帮助我走上正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:47:13.080

只需使用 ChunkedWriteHandler 并编写一个包装 InputStream 的 ChunkedStream。

这应该可以解决所有问题..

# android - 我应该使用服务而不是后台活动吗？

> ID：12939738
> 
> 赞同：1
> 
> 时间：2012-10-17T17:15:19.470
> 
> 标签：android, service

现在我有一个可以播放音乐的 mp3 播放器，我想知道我应该使用服务而不是活动。

我有两种在后台播放音乐的方法（当用户按下后退按钮时继续播放）

1.  当用户按下返回按钮时，我会`onBackPressed()`像用户按下主页按钮一样覆盖并将活动移动到后台，因此当用户再次启动我的应用程序时，它将按预期显示。

2.  我读了一些关于覆盖的文章`onBackPressed()`，有人说在后台做一些工作不是一个好方法，更好的方法是使用服务。:)。所以我的想法是当用户按下返回按钮时，我调用`finish()`销毁并释放活动，然后我创建一个服务，可以从活动完成的那一刻开始播放音乐，并通知帮助用户返回主要活动。

我认为第一种方法非常简单且易于实现，但不推荐。第二个更好但更复杂，我不认为这种方式优化内存而不是第一个。

我很想知道我应该使用哪一个。请告诉我上述两种方法中更好的一种，或者如果您最近有从事类似工作的经验，请告诉您在这种情况下的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:24:29.893

您应该为此使用服务。

理想情况下，您应该使用[Ongoing Notification](http://developer.android.com/reference/android/app/Notification.html#FLAG_ONGOING_EVENT)

这将防止您的服务被系统杀死。

查看[媒体播放器指南](http://developer.android.com/guide/topics/media/mediaplayer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:20:28.030

如果我正确理解了您的问题，您应该使用服务。

请参阅[媒体播放器指南](http://developer.android.com/guide/topics/media/mediaplayer.html)。

# c++ - 数组/指针/引用混淆

> ID：12939739
> 
> 赞同：3
> 
> 时间：2012-10-17T17:15:25.177
> 
> 标签：c++, arrays, pointers, reference, prototype

> **可能重复：**
> [对 C++ 指针和参考主题的混淆](https://stackoverflow.com/questions/3747938/confusion-over-c-pointer-and-reference-topic)

假设我路过

```
int arr[10]; 
```

作为函数的参数。

这些都是有效的函数原型吗？它们在论点方面有何不同，为什么？

这是我目前所知道的（不确定是否正确）

```
1\. void foo(int &arr);      //a reference to an array, which preserve the size attribute?
2\. void foo(int &arr[]);    //the same (is it)?
3\. void foo(int (&arr)[]);  //I don't know
4\. void foo(int &arr[10]);  //is it the same as 2?
5\. void foo(int (&arr)[10]);//no idea

6\. void foo(int *arr);      //a decayed pointer of the array, pointing to the first element of the array, losing the size attribute?

7\. void foo(int *arr[]);    //the same (is it?)
8\. void foo(int (*arr)[]);  //a pointer to an array, preserve the size
9\. void foo(int *arr[10]);  //the same as 7 (is it?)
10\. void foo(int (*arr)[10]);//is the same as 8 (is it?)

11\. void foo(int arr[]);    //is the same as 6 (is it?)
12\. void foo(int arr[10]);  // is the same as 6 (is it?) 
```

（我知道这需要一个冗长的解释，对不起，我完全糊涂了......）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T17:27:46.980

第一条重要信息是类型为（有界或无界）数组的参数`T`转换为指向 的指针`T`。即两者`int arr[]`和`int arr[10]`都转换为`int * arr`。请注意，转换仅在顶级数组上执行，即它不会发生在 中`int (*arr)[10]`，它是指向 int 数组的指针。

此外，标识符右边的东西比左边的东西绑定得更紧密，即`int *arr[10]`是一个数组，而是`int (*arr)[10]`一个指针。

最后，引用的数组和指针无效，无界数组的指针和引用也是无效的。

```
1\. void foo(int &arr);        // can't pass, reference to int
2\. void foo(int &arr[]);      // invalid, pointer to reference to int
3\. void foo(int (&arr)[]);    // invalid, reference to unbounded array of int
4\. void foo(int &arr[10]);    // invalid, pointer to reference to int
5\. void foo(int (&arr)[10]);  // can pass, reference to an array of int

6\. void foo(int *arr);        // can pass, pointer to int
7\. void foo(int *arr[]);      // can't pass, pointer to pointer to int
8\. void foo(int (*arr)[]);    // invalid, pointer to an unbounded array of int.
9\. void foo(int *arr[10]);    // can't pass, pointer to pointer to int
10\. void foo(int (*arr)[10]); // can't pass, pointer to array of int

11\. void foo(int arr[]);      // can pass, pointer to int
12\. void foo(int arr[10]);    // can pass, same as above 
```

`arr`用作参数将`foo`导致它衰减为指向其第一个元素的指针——传递给的值`foo`将是 type `int *`。请注意，您可以传递`&arr`给数字 10，在这种情况下，`int (*)[10]`将传递一个类型的值并且不会发生衰减。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:42:39.543

困难的部分是考虑数组不是按值传递，而是衰减为指针。

您的某些声明是语法错误，而另一些则不是（但也不是您可能认为的）

在您的情况下，唯一有意义的是 6、11 和 12。

2、3、4 和 8 具有不言自明的错误消息。（如果您不理解它们很可能是因为您阅读了错误的运算符优先级的声明）

```
t1.cpp:2:19: error: declaration of 'arr' as array of references
t1.cpp:3:22: error: parameter 'arr' includes reference to array of unknown bound 'int []'
t1.cpp:4:21: error: declaration of 'arr' as array of references
t1.cpp:8:22: error: parameter 'arr' includes pointer to array of unknown bound 'int []' 
```

其他的在某种程度上是多余的（对数组或指针的引用，它们在函数内部的行为相同）或者只是错误的，因为声明的东西与你的意图不同（比如 7,9,10：它们代表“双重间接” ，而普通数组只有一个，而 1\. 不代表任何间接：它只是给单个 int 取别名）

# c# - 在 VS2012 中使用 EventToCommand 时出现 XAML“无效标记”错误

> ID：12939743
> 
> 赞同：2
> 
> 时间：2012-10-17T17:15:34.123
> 
> 标签：c#, silverlight, visual-studio-2012, mvvm-light, silverlight-5.0

我最近切换到 Visual Studio Premium 2012，并在 Silverlight 5 项目中使用 MVVM Light (v. 4.0.23.4) 时发现了 XAML 设计器问题。这是触发问题的代码片段：

```
<sdk:AutoCompleteBox Text="{Binding Path=SomeProperty, Mode=TwoWay}" ItemsSource="{Binding Path=SomeCollectionProperty}">
<i:Interaction.Triggers>
    <i:EventTrigger EventName="KeyUp">                                                           
        <mvvmlight:EventToCommand Command="{Binding Path=SomeRelayCommand}" CommandParameter="{Binding SomeParameter}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

相关的命名空间是：

```
xmlns:mvvmlight="http://www.galasoft.ch/mvvmlight"
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
```

这在设计器视图上给我一个**“无效标记”错误，并且在 xaml 中的 EventToCommand 行上，** **“无法将类型为 'EventToCommand' 的值添加到类型为 'TriggerActionCollection' 的集合或字典中**。这不会发生在VS2010。

有关如何解决此问题的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T11:24:09.897

爱丽丝解决了这个问题。问题是 system.windows.interactivity，只需使用 nuget 更新这个程序集，它就会工作:)

# php - 如何在 PHP 中将特殊字符转换为符号

> ID：12939756
> 
> 赞同：0
> 
> 时间：2012-10-17T17:16:13.120
> 
> 标签：php, mysql

我的 mysql 数据库中有一些特殊字符..但我想将其转换为该字符的对应符号.. Ä 这是字符，对应的符号是 Đ 。我如何在 php 或 mysql 中转换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:17:27.910

试试看：`http://php.net/manual/fr/function.utf8-decode.php`

此函数将假定为 UTF-8 编码的数据解码为 ISO-8859-1。

或者：`htmlentities($var, ENT_QUOTES, 'UTF-8');`

# c - C 查找一个单词的所有实例

> ID：12939758
> 
> 赞同：-2
> 
> 时间：2012-10-17T17:16:26.130
> 
> 标签：c, string, char, append

所以我正在尝试使用这部分代码查找单词的所有实例

```
fseek(src, 0, SEEK_END);
int size = ftell(src); 
fseek(src, 0, SEEK_SET);
int line = 0;
int i = 0;
char ch = ' ';
char *word;
char lastch = 'x';
int j = 0;
int lines[getLines(src)];

for(i = 0; i < getLines(src); i++){
    lines[i] = -1;
}

for(i = 0; i < size; i++){
    ch = fgetc(src);
    printf("%s %c", word, '\n');
    if(!isspace(lastch) && isspace(ch)){

        if(strcmp(word, find) == 0){
            if(lines[j - 1] != line){
                lines[j] = line;
                j++;
            }
        }
    }else{

        if(isspace(lastch) && isspace(ch)){
            continue;
        }else if(isspace(lastch) && !isspace(ch)){
            word = "";
            append(word, ch);
        }else if(!isspace(lastch) && !isspace(ch)){
            append(word, ch);
        }
    }
    lastch = ch;
} 
```

append() 在哪里

```
char *append(const char *s, char c) {
int len = strlen(s);
char buf[len+2];
strcpy(buf, s);
buf[len] = c;
buf[len + 1] = 0;
return strdup(buf);
} 
```

谁能向我解释为什么 String 字没有添加任何字符？

我很确定它与附加功能有关，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:27:54.310

因此*，在阅读了我的评论后，也*请阅读我的答案：

```
word = "";
append(word, ch); 
```

不做你认为它做的事。它不会将字符附加到`word`自身，而是将字符附加到`word`. 你真的应该写

```
} else if(isspace(lastch) && !isspace(ch)) {
    word = append("", ch);
} else if(!isspace(lastch) && !isspace(ch)) {
    char *tmp = append(word, ch);
    free(word);
    word = tmp;
} 
```

反而。另外，请正确使用空格和缩进，很难阅读您的代码。

# vb.net - 排序输出的随机数

> ID：12939759
> 
> 赞同：0
> 
> 时间：2012-10-17T17:16:26.660
> 
> 标签：vb.net

我正在制作一个输出随机数然后组织它们的程序。

我正在整理号码，以便稍后我可以添加代码来告诉用户他或她收到了多少匹配号码。

程序编译得很好，但是当我运行 exe 时，在输出第一行随机数后它崩溃了。我收到的错误是：

> 索引位于数组边界之外。

任何帮助将不胜感激。

```
Option Explicit On
Option Strict On

Imports System

Module Yahtzed

Sub Main()

    Randomize()
    Dim Index, Values, NumberOfPlayers,Temp as Integer
    Dim order(index) as integer
    Dim Last As Integer = 0 'to Order.Length-2
    Console.Write("How many people will be playing Yahtzed?: ")
    NumberOfPlayers = convert.toint32(Console.Readline)
    Do while NumberOfPlayers > 0
        Index = 0
        Do until index = 5
            Values = CInt(Int((6 * Rnd()) + 1))
            Console.Write(" "&values)
            Index += 1
        Loop
        Do Until Index = 0
            If Order(Index + 1) < Order(index)
                Temp = Order(Index + 1)
                Order(Index + 1) = order(index)
                Order(index) = Temp
                Console.WriteLine(Order(Index))
            End if
            index -= 1
        loop
        Console.Writeline
        NumberOfPlayers -= 1
        Console.Writeline()
    Loop

End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:46:01.947

代码不像现在那样真正有意义。您创建一些随机数，然后将它们扔掉，并对从未分配过任何东西的数组进行排序。此外，该数组只有一项，因此无法保存随机值。

我认为您想为五个项目声明数组，而不是一个（`index`创建数组时为零）：

```
Dim order(4) As Integer 
```

然后将随机数放入数组中，而不是将它们放入变量中，其中每个随机数将替换前一个：

```
Index = 0
Do until index = 5
  order(index) = CInt(Int((6 * Rnd()) + 1))
  Console.Write(" " & order(index))
Loop 
```

当您对数组进行排序时，您开始查看`index`数组外部的索引 6（因为变量是 5）。您可能希望从数组中的最后一项开始（即在索引 3 处）。然后循环直到`index`为-1，否则您将不会比较数组中的前两个项目。

此外，您必须继续排序，直到没有更多的交换，只是遍历数组一次不会使其排序：

```
Dim swapped as Boolean = True
Do While swapped
  index = 3
  swapped = False
  Do Until index = -1
    If order(index + 1) < order(index)
      temp = order(index + 1)
      order(index + 1) = order(index)
      order(index) = temp
      swapped = True
    End if
    index -= 1
  Loop
Loop 
```

这种排序算法称为[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)。

如果您想使用它，框架中还内置了排序功能：

```
Array.Sort(order) 
```

如果你在排序时写出值，你会得到它们多次，所以你在排序后这样做：

```
index = 0
Do until index = 5
  Console.Write(" " & order(index))
Loop 
```

# gwt - GWT，以编程方式获得与超链接相同的效果

> ID：12939760
> 
> 赞同：1
> 
> 时间：2012-10-17T17:16:26.987
> 
> 标签：gwt, redirect, hyperlink

所以一些背景，我在 GWT 工作，使用 MVP 和活动和场所。所以我所有的东西都在使用超链接，而且地方也在发生变化。我也在使用 PlaceController.gotTo(Place)。

现在我想做的是能够以编程方式将人发送到另一个地方。现在通过设置 GWT 管理将 url 转换为位置，然后从中触发活动，但我想要的是使用与 gwt 相同的方式将 url 转换为位置或更改url，并在网站上触发历史更改类型的效果。

我不需要一个锚来重新加载我的整个站点，我只想将一个字符串输入某个东西并让整个地方的变化情况发生变化。

我想要超链接的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:46:20.807

我不确定我是否完全理解你想要做的事情，但它是GWT 使用`PlaceHistoryMapper`的唯一*工具*`getPlace`：提供一个字符串，它会为你提供相应的位置。或者，您可以使用`History.newItem`（请注意，与 相反`PlaceController#goTo`，如果用户取消`PlaceChangeRequestEvent`，则 URL 已经更改）。

# iphone - 如何映射和使用 Bundle Identifier 和 Bundle Suffix？

> ID：12939761
> 
> 赞同：1
> 
> 时间：2012-10-17T17:16:40.593
> 
> 标签：iphone, ios5, bundle

我即将发布我的第一个应用程序以供审查。有两个项目我无法理解 -

1.  捆绑标识符
2.  捆绑后缀

在 .plist 文件中，我可以看到三件事 -

1.  捆绑显示名称：${PRODUCT_NAME}
2.  捆绑标识符：companyname.${PRODUCT_NAME:rfc1034identifier}
3.  捆绑包名称：${PRODUCT_NAME}

4.  并在项目->构建设置->产品名称

* * *

现在，如果我的公司名称：“ABC 组织”；应用程序名称：“XYZ 应用程序”。上面的 1、2、3、4 应该是什么设置。

我已经在论坛中搜索了答案，但找不到直接映射-因此无法理解并需要帮助来发布我的应用程序以供审核（当我将“XYZ应用程序”放入“项目->构建设置->产品名称”时- 我的应用程序名称更新得很好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:19:32.947

> 现在，如果我的公司名称：“ABC 组织”；应用程序名称：“XYZ 应用程序”。上面的 1、2、3、4 应该是什么设置。

1.  捆绑标识符：com.abcorganization.${PRODUCT_NAME:rfc1034identifier}

2.  项目->构建设置->产品名称 == XYZApplication

3.  捆绑显示名称 == XYZ 应用程序

产品名称是您需要提供的基本信息。

产品名称将确定分配给您的捆绑包（包含您的应用程序的文件）的名称：这称为“捆绑包名称”，它是“low-lovel”文件名。

除了捆绑包名称，您还有机会指定“捆绑包显示名称”，这是将在设备上为您的应用显示的名称，在某些情况下很有用。

比如说，您希望您的应用程序被称为“app:XYZ”——您将不允许在包名称中使用“:”（根据文件系统约定，不允许使用字符），因此您可以定义“appXYZ”作为包名，“app:XYZ”作为显示包名。

最后，Bundle 标识符是您的应用程序在 App Store 上的唯一名称，它也用于关联配置文件（分发或开发到您的应用程序）。

Bundle Identifier 应与您在创建应用程序时在 iTunes Connect 中指定的应用程序 ID 后缀匹配。

# javascript - 检测滚动事件，同时已经在顶部

> ID：12939765
> 
> 赞同：3
> 
> 时间：2012-10-17T17:16:51.480
> 
> 标签：javascript, scroll, jquery, scrolltop

我的页面顶部有一个菜单栏，如果我已经在顶部向上滚动，我想显示它。想象一下你向上滚动，当你在那里时，你再次向上滚动，栏就会显示出来。

我有这个代码使用 jquery

```
// listen for the scroll to show the top menu
var was_on_top = false;
$(function () {
    $(window).bind("scroll", function (e) {

        if ($(window).scrollTop() == 0) {
            if ($('.menu').css('display') == "none" && was_on_top) {
                $('.menu').slideDown();
            } else {
                was_on_top = true;
            }
        } else {
            was_on_top = false;
        }
    });
}); 
```

但是滚动事件在已经位于顶部时不会触发。有任何想法吗？

编辑：这是工作代码。在 FF、Chrome 和 IE9 上测试

```
// listen for the scroll to show the top menu
var was_on_top = false;
$(function () {
    if (window.addEventListener) {
        window.addEventListener('DOMMouseScroll', onMouseWheelSpin, false); // FireFox
        window.addEventListener('mousewheel', onMouseWheelSpin, false); // Chrome
    } else {
        window.onmousewheel = onMouseWheelSpin;
    }
});

function onMouseWheelSpin(event) {

    if (!event) // IE sucks
        event = window.event;

    if ($(window).scrollTop() == 0 &&
          (
            event.detail < 0 // Firefox
            ||
            (event.wheelDelta && (
                                    (window.opera && event.wheelDelta < 0) // Opera
                                    ||
                                    event.wheelDelta > 0 // IE
                                 )
            )
          )
        ) {
        if ($('.menu').css('display') == "none" && was_on_top) {
            $('.menu').slideDown();
        } else {
            was_on_top = true;
        }
    } else {
        was_on_top = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:42:36.477

滚动事件不会触发，因为窗口不再滚动。

您可能需要为鼠标滚轮本身创建一个自定义事件。

这可能会有所帮助：[Javascript：捕获鼠标滚轮事件并且不滚动页面？](https://stackoverflow.com/questions/10313142/javascript-capture-mouse-wheel-event-and-do-not-scroll-the-page)

# sql - Postgres 简单的“数据透视”表

> ID：12939766
> 
> 赞同：3
> 
> 时间：2012-10-17T17:16:52.420
> 
> 标签：sql, postgresql

如果我有这样的数据表

```
name   |   type   |  count

test   | blue     |  6
test2  | red      |  3
test   | red      |  4 
```

我如何查询它以获得一张表：

```
name  |  num_red  | num_blue

test  | 4         | 6
test2 | 3         | 0 
```

我当然可以选择 count(*) where type=blue 等，但我想不出如何在这样的一个查询中计算多种类型。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T17:18:39.890

您可以`CASE`在您的选择子句中使用。

```
SELECT  name,
        SUM(CASE WHEN type = 'red' THEN "count" ELSE 0 END) numred,
        SUM(CASE WHEN type = 'blue' THEN "count" ELSE 0 END) numblue
FROM tableName
GROUP BY name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!1/4aaa9/3)

# mysql - 带有 --single-transaction 或复制的 innoDB

> ID：12939768
> 
> 赞同：1
> 
> 时间：2012-10-17T17:17:00.140
> 
> 标签：mysql, database-replication, database-backups

是否足以`--single-transaction`在 mysqldump 中添加选项以创建具有一致性的备份..

还是您需要设置主/从复制？

`mysqldump --single-transaction -h localhost -u root ...`

数据库仅包含 innoDB 表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:45:29.767

是的，

```
mysqldump --single-transaction ... 
```

执行

```
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ
START TRANSACTION /*!40100 WITH CONSISTENT SNAPSHOT */
UNLOCK TABLES
... 
```

所以这将为您提供一致性。您不需要设置复制。

以供参考：

```
mysqldump ... (same as mysqldump --lock-tables ...) 
```

执行：

```
LOCK TABLES `table1` READ /*!32311 LOCAL */
...
UNLOCK TABLES
...
LOCK TABLES `table2` READ /*!32311 LOCAL */
...
UNLOCK TABLES
... 
```

和

```
mysqldump --lock-all-tables ... 
```

执行：

```
FLUSH TABLES
FLUSH TABLES WITH READ LOCK
... 
```

所以对于你的需要，`mysqldump --single-transaction`是正确的。

# networking - 为什么 ASN 路径会链接到自身？

> ID：12939770
> 
> 赞同：0
> 
> 时间：2012-10-17T17:17:04.757
> 
> 标签：networking, dns

在此处的路径列表中：http: [//archive.routeviews.org/dnszones/](http://archive.routeviews.org/dnszones/)

我偶然发现了一个条目的这一部分

$ 183.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” * .183.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159" ， “2.144.176.0”， “20” 184.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” * .184.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” 185.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159 " "2.144.176.0" "20" *.185.144。2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0” “20” 186.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159" ， “2.144.176.0”， “20” * .186.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” 187.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159" ， “2.144.176.0”， “20” * .187.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”“ 2.144.176.0" "20" 188.144。2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” * .188.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159" ， “2.144.176.0”， “20” 189.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” * .189.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0” “20” 190.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”，“ 2.144.176.0" "20" *.190.144。2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0” “20” 191.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159“” 2.144.176.0“” 20“ *.191.144.2 20485 12389 12880 44244“” 2.144.192.0“” 20“ *.192.144.2 in txt“ 8492 20485 12389 12880 44244” 192.0" "20"$8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159" ， “2.144.176.0” “20” 191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”，“2.144 .176.0" ， “20” * .191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” 192.144.2 IN TXT“8492 20485 12389 12880 44244 " "2.144.192.0" "20" *.192.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 12389 12880 44244" "202.4" "20.1 “$8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159" ， “2.144.176.0” “20” 191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”，“2.144 .176.0" ， “20” * .191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” 192.144.2 IN TXT“8492 20485 12389 12880 44244 " "2.144.192.0" "20" *.192.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 12389 12880 44244" "202.4" "20.1 “$“2.144.176.0”， “20” 191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” * .191.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159 48159 48159 48159“” 2.144.176.0 8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20"$“2.144.176.0”， “20” 191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” * .191.144.2 IN TXT“8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159 48159 48159 48159“” 2.144.176.0 8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20"$“2.144.176.0”， “20” * .191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” 192.144.2 IN TXT“8492 20485 12389 12880 44244" "2.144.192.0" "20" *.192.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 142389 "2.184".2.18.4". "20"$“2.144.176.0”， “20” * .191.144.2 IN TXT “8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159”， “2.144.176.0”， “20” 192.144.2 IN TXT“8492 20485 12389 12880 44244" "2.144.192.0" "20" *.192.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 142389 "2.184".2.18.4". "20"$2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20"$2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20" 193.144.2 IN TXT "8492 20485 12389 12880 44244" "2.144.192.0" "20"$

如果你看到：

$*.191.144.2 IN TXT "8492 34224 34984 34984 34984 34984 34984 34984 34984 34984 34984 34984 48159 48159 48159 48159 48159 48159" "2.144.176.0" 示例 2.0

34984 在链接到 48159 之前链接到自身 9 次。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:06:48.423

通过“链接到自身 9 次”，您的意思似乎是“出现 9 次是 AS 路径中的一行”。AS 路径不是链接链接或任何东西，所以我不确定您为什么使用术语“链接”。

多次将您的 AS 附加到 AS 路径是不推荐路由的常用技术。因为 BGP 路由选择算法中的标准之一是 AS 路径长度，所以路径中包含更多 AS 的路由比具有较少 AS 的路由更不可能被使用。

请注意，在预置 3 或 4 次之后进行预置，额外的前置在大多数 Internet 上不太可能有用。一个典型的路由器不太可能看到两个相同目的地的优先级相同的路由，它们的 AS 路径长度相差超过 3 或 4。此外，大多数路由器会更喜欢一组特定的路由（例如客户路由）而不是另一组（例如传输路由）使用比 AS 路径长度更重要的参数（本地首选项），因此在这种情况下，即使预先尝试影响那些路由器的路径选择也是徒劳的。

# mod-python - 在 mod_python 中获取 POST 变量

> ID：12939771
> 
> 赞同：0
> 
> 时间：2012-10-17T17:17:12.107
> 
> 标签：mod-python

我这里有一个简单的页面，暂时名为 login.py，因为最终它将成为一个功能登录页面。但是，现在我已经将它设置为尝试从提交的表单中获取 POST 变量。这是我到目前为止的代码：

```
from mod_python import apache, Session, util
from time import time
import webout

def index(req):
        form = util.FieldStorage(req)
        testval = form.getfirst("test")
        return webout.htmlout("", """
        <form name="login" action="login.py" method="post">
                <h2>%s</h2>
                <p>Enter something:</p><input type="text" name="test">
                <input type="submit" value="Submit">
        </form>
""" % testval) 
```

Webout 是我编写的一个模块，基本上它所做的只是返回一个格式正确的 HTML 输出，所以我不必一直输入它，调用 htmlout 我正在传递头部和正文中的内容。

无论如何，如果我要更改表单的获取方法，h2 会正确显示我在表单的文本框中提交的任何内容。但是，如果我将其更改为发布，我会得到无（所以我假设为空）。我还需要做什么来引用 POST 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:40:44.443

我已经想出了一种方法来做到这一点，尽管我不确定这是否是最好的方法。修改后的代码如下：

```
from mod_python import apache, Session, util
from time import time
import webout

def index(req, test=""):
        form = util.FieldStorage(req)
        #testval = form.getfirst("test")
        return webout.htmlout("", """
        <form name="login" action="login.py" method="post">
                <p>%s</p><br/>
                <p>Enter something:</p><input type="text" name="test">
                <input type="submit" value="Submit">
        </form>
""" % test) 
```

所以基本上，POST 将变量传递给 index 方法。如果您不是来自表单提交，请分配默认值。这适用于 POST 和 GET。

# jquery - 超大的 jquery 插件和 slide_links

> ID：12939772
> 
> 赞同：0
> 
> 时间：2012-10-17T17:17:19.687
> 
> 标签：jquery, supersized

我真的很想为我的幻灯片添加导航，但我无法让 slide_links 像文档中描述的那样工作。在 Supersized 站点的文档中，选项有 false、number、name 和 empty。在演示文件的注释中，选项有 false、num、name 和 blank。Num 和 number 似乎根本没有做任何事情。我怎样才能成功地完成这项工作？

根据文档，slide_links 似乎应该生成一个直接指向幻灯片的链接列表。它不像描述的那样工作。“数字”似乎是我正在寻找的选项，因此我可以使用这些数字创建其他链接并直接链接到幻灯片（例如 10 张幻灯片中的第 5 张）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:36:09.973

我希望这是你需要的。试试这段代码，这应该可以。

```
jQuery(function($){

    $.supersized({  

    // Functionality
    slide_interval    :   3000,
    transition        :   1, 
    transition_speed  :   700, 

    // Components                           
    slide_links     :'blank',
    slides          :[ {image : '...'}] //put links for each slide

    thumb_links     :   1,          // Individual thumb links for each slide
    thumbnail_navigation    :   0,          // Thumbnail navigation

    });
}); 
```

# version-control - CM 用户的源代码管理

> ID：12939773
> 
> 赞同：1
> 
> 时间：2012-10-17T17:17:20.420
> 
> 标签：version-control

我希望带领我的团队进入本世纪并使用源代码控制。开发人员非常有能力处理源代码控制软件——无论是基于命令行还是基于 GUI、Windows 或 -Nix。

他们一直在本地和单独处理他们的代码（这让我很害怕）的原因是因为我们的 CM 团队在技术上不那么精通，也不对整个签入/签出过程感到满意。

> 是否有面向 CM 组的源代码控制软件？我正在考虑一个允许他们从所有已签入的文件中选择一个文件版本并将其标记为他们正在尝试创建的构建的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:21:49.197

如果您认为 CM（配置管理）组负责发布管理流程，那么您可以通过建立良好的发布流程将它们与您可能选择的任何 (D)VCS 工具的“技术细节”隔离开来。

该**出版物**包括在某处可见（共享目录，像[Nexus](http://www.sonatype.org/nexus/)这样的工件存储库，专用于发布，......）：

*   运行程序所需的交付（一组二进制文件及其依赖项）
*   这些二进制文件的清晰版本列表（SVN 修订号或标记、git 标记、Nexus Group-Artifact-Version，...）允许开发人员在 CM 组返回列表时找到确切的代码集要修复的缺陷
*   解释部署的文档

CM 组负责交付，管理不同部署环境（集成、UAT、pre-prod、prod...）之间的发布过程和升级，而无需处理 VCS 工具。

这也强制了 dev 和 prod 之间的强烈分离（在环境*和*流程方面），这允许开发人员采用他们想要的任何开发工作流程，而不会影响 CM 小组的工作方式。

# shell - cron 输出到守护进程

> ID：12939776
> 
> 赞同：0
> 
> 时间：2012-10-17T17:17:41.110
> 
> 标签：shell, scripting, io, cron, daemon

我想知道我是否可以`cron.d`执行 cron 命令，以便将 stdout 或 stderr 上的任何内容重定向到在同一台机器上运行并等待输入的守护进程。在这种情况下，它将是 stdout 或`stderr`.

例子：

```
* * * * * root /path/to/the/script.sh 2>&1 | <daemon process> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:19:32.787

关于什么 ：

```
* * * * * /path/to/the/script.sh 2>&1 | /path/to/the/daemon 
```

?

我假设守护程序会继续阅读`STDIN`（您的帖子中没有提到）

# objective-c - 使用未声明的标识符“calculateAge”

> ID：12939779
> 
> 赞同：0
> 
> 时间：2012-10-17T17:17:58.157
> 
> 标签：objective-c

我是客观的新手，只是想理解简单的概念。我已经阅读了 Objective C for dummy 和 Cocoa Programming for Mac OSX（大部分）。我试着自己做一个简单的小程序，发现我知道的很少。

我不断收到`"Use of Undeclared Identifier "calculateAge', did you mean 'Calculate' "`错误。

谁能告诉我下面的代码有什么问题以及为什么？提前感谢一堆。

```
#import <Foundation/Foundation.h>

@interface Calculate : NSObject
{
    int myYear;
    int nowYear;
}

- (int) calculateAge:(int)birthYear:(int)nowYear;

@end

@implementation Calculate

- (int) calculateAge:(int)birthYear:(int)nowYear// need myYear
{

    NSLog(@"The birthYear is: %i\n", birthYear);
    int myAge = nowYear - birthYear;        
    //NSLog(@"The nowYear is: %i\n", nowYear);
    NSLog(@"The age is: %i\n", myAge);
    return myAge;
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSLog(@"Hello, World!");
        int myY = 1963;
        int nowY = 2012;
        int myYear = 1963;
        int nowYear = 2012;
        //int myAge = calculateAge:(int) birthYear: (int) nowYear;
        int myAge = calculateAge:(int) myY: (int) nowY;
        NSLog(@"The nowYear is: %i\n", nowYear);
        NSLog(@"The age is: %i\n", myAge);

    }
    return 0;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:29:06.763

您似乎将方法名称与参数列表混为一谈。正确的签名看起来像这样：

```
- (int)calculateAgeFromBirthYear:(int)birthYear currentYear:(int)currentYear 
```

然后可以这样实现：

```
- (int)calculateAgeFromBirthYear:(int)birthYear currentYear:(int)currentYear
{

    NSLog(@"The birthYear is: %i\n", birthYear);
    int myAge = currentYear - birthYear;        
    //NSLog(@"The nowYear is: %i\n", currentYear);
    NSLog(@"The age is: %i\n", myAge);
    return myAge;
} 
```

然后可以这样调用：

```
Calculate *calculator = [[Calculate  alloc] init];
int myAge = [calculator calculateAgeFromBirthYear:myY currentYear:nowY]; 
```

不要`main`在类实现中实现；它属于全局命名空间之外，最好是在它自己的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:34:29.020

无需在接口中声明实例变量。
最后一个`@end`需要在主函数之前，它不是类的一部分，它使用了类。
该类`Calculate`需要被实例化，并且需要对实例化的类进行调用。
该`calculateAge...`方法应重命名以指示每个参数。
变量应该被赋予全名，缩写通常最终使事情变得不太清楚。

这是一个例子：

```
@interface Calculate : NSObject
- (int) calculateAgeWithBirthYear:(int)birthYear nowYear:(int)nowYear;
@end

@implementation Calculate
- (int) calculateAgeWithBirthYear:(int)birthYear nowYear:(int)nowYear// need myYear
{
    NSLog(@"The birthYear is: %i\n", birthYear);
    int myAge = nowYear - birthYear;
    NSLog(@"The age is: %i\n", myAge);
    return myAge;
}
@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {

        NSLog(@"Hello, World!");

        int myBirthYear = 1963;
        int nowYear = 2012;

        Calculate *calculator = [[Calculate alloc] init];
        int myAge = [calculator calculateAgeWithBirthYear:myBirthYear nowYear:nowYear];

        NSLog(@"The nowYear is: %i\n", nowYear);
        NSLog(@"The age is: %i\n", myAge);

    }
    return 0;
} 
```

NSLog 输出：

你好世界！
出生年份：1963
年龄：49
现在年份：2012
年龄：49

使用由 `@property~ 语句创建的实例变量：

```
@interface Calculate : NSObject
@property int myYear;
@property int nowYear;

- (int) calculateAge;
@end

@implementation Calculate
- (int) calculateAge // need myYear
{
    NSLog(@"The birthYear is: %i\n", self.myYear);
    int myAge = self.nowYear - self.myYear;
    NSLog(@"The age is: %i\n", myAge);
    return myAge;
}
@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {

        NSLog(@"Hello, World!");

        Calculate *calculator = [[Calculate alloc] init];
        calculator.myYear = 1963;
        calculator.nowYear = 2012;

        int myAge = [calculator calculateAge];

        NSLog(@"The nowYear is: %i\n", calculator.nowYear);
        NSLog(@"The age is: %i\n", myAge);

    }
    return 0;
} 
```

# php - fsockopen 在端口 25 和 587 上被阻止

> ID：12939786
> 
> 赞同：3
> 
> 时间：2012-10-17T17:18:36.333
> 
> 标签：php, fsockopen, blocked

我有一个非常简单的代码片段，它使用 fsockopen（或 stream_socket-client）连接到 SMTP 服务器，如下所示：

```
<?php
$url = gethostbyname("mx6.go2.pl");
echo $url;
$fp = fsockopen($url, 587, $errno, $errstr, 10);
if (!$fp) {
echo "port is closed or blocked"
} else {
echo "port is open and available";
fclose($fp);
}
?> 
```

不幸的是，我无法连接到任何标准端口，例如 25,587 或 2525，因为我的两个主机提供商都在阻止使用这些端口的任何出站连接。（我只能通过 25 或 587 连接到内部 SMTP 服务器或 localhost）

有没有办法使用不同的代码或端口来解决这个问题（我的意思是通过编程而不是像安装我自己的服务器那样）。

干杯，

马尔钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:29:19.717

如果您的提供商阻止了这些出站端口，那么您将无能为力。这些是标准 SMTP 端口，因此 SMTP 服务器不太可能接受其他端口上的连接。您唯一的希望是要求您的提供商为您的帐户取消阻止这些端口，或者找到一个基于 HTTP 的外部代理服务器以连接到端口 80（除非您的提供商也阻止了该出站端口）。

为什么不能使用提供商的内部 SMTP 服务器？这就是你应该做的。让它为您将您的消息中继到其他 SMTP 服务器。现在越来越多的 SMTP 服务器被锁定以防止垃圾邮件和其他滥用行为，因此您可能会遇到不允许您直接连接到它们的 SMTP 服务器，即使您可以访问它们的端口，因为您不是该服务器的白名单上的提供商。

# python - 带有可选参数的 Python 定义以使用 SQLAlchemy 进行查询

> ID：12939788
> 
> 赞同：1
> 
> 时间：2012-10-17T17:18:51.283
> 
> 标签：python, python-2.7, sqlalchemy

我有一个接收可选参数的函数。我在这个函数中查询一个数据库表。

我想要的是：

如果指定了可选参数，我想在我的数据库查询中添加另一个额外的 .filter() 。

我的查询行已经很长了，所以我不想做 If .. else .. 我重复整个查询两次。

这样做的方法是什么？

下面是我的查询示例，如果指定了 my_val，我需要添加另一个过滤行。

```
def my_def (my_val):
    query = Session.query(Table1, Table2).\
            filter(Table1.c1.in_(some_val)).\
            filter(Table1.c2 == 113).\
            filter(Table2.c3 == val1).\
            filter(Table1.c4 == val2).\
            filter(Table2.c5 == val5).\
            all() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:33:40.180

您可以等待在查询集上调用 .all() 方法，如下所示：

```
 def my_def (my_val=my_val):
    query = Session.query(Table1, Table2).\
            filter(Table1.c1.in_(some_val)).\
            filter(Table1.c2 == 113).\
            filter(Table2.c3 == val1).\
            filter(Table1.c4 == val2).\
            filter(Table2.c5 == val5)
    if my_val:
        query = query.filter(Table1.c6 == my_val)
    return query.all()
```

# python - python pyqt：如何使用 for 循环调用多个模块？

> ID：12939791
> 
> 赞同：0
> 
> 时间：2012-10-17T17:18:57.610
> 
> 标签：python, pyqt4

我想在paintEvent()中使用for循环调用多个模块，比如

```
 def fun1(self,paint,a,b):
     do something ...
 def fun2(self,paint,a,b):
     do something ...
 def fun3(self,paint,a,b):
     do something .... 

 def paintEvent(self,event=None):
     for i in range (1,3):
        self.fun[i](self,paint,a,b) 
```

基本上我的 fun1、fun2 和 fun3 正在绘制一些小部件并且几乎相同。请帮助我如何使用 for 循环调用这些函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:32:15.223

您可以执行以下操作：

```
def fun1(self,paint,a,b):
    do something ...
def fun2(self,paint,a,b):
    do something ...
def fun3(self,paint,a,b):
    do something .... 

self.fun = [self.fun1,self.fun2,self.fun3]

def paintEvent(self,event=None):
    for i in range (1,3):
       self.fun[i](self,paint,a,b) 
```

如果 fun1、fun2 和 fun3 与您所说的几乎相同，您应该考虑将它们组合成一个可以使用附加参数调用的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:32:56.363

您可以执行以下操作：

```
def fun1(self, paint, a, b):
    pass

def fun2(self, paint, a, b):
    pass

def fun3(self,paint, a, b):
    do something .... 

def paintEvent(self, event=None):
    functions = [self.fun1, self.fun2, self.fun3]
    for func in functions:
        func(paint, a, b) 
```

或者如果您确定函数名称，就像它们具有类似的命名模式一样，即使这样也可以：

```
def paintEvent(self, event=None):
    for attr_name in dir(self):
        if attr_name.startswith('fun'):
            func = getattr(self, attr_name)
            func(paint, a, b) 
```

# jquery - 使用户按特定顺序单击元素

> ID：12939793
> 
> 赞同：1
> 
> 时间：2012-10-17T17:19:04.430
> 
> 标签：jquery, click

我有一个由 20 个数字组成的网格的基本布局，（1-20）。我希望用户按数字顺序（1、2、3、4、5 等）单击元素，**如果**顺序正确，`highlight`类将从每个数字开始移动，例如：数字是红色的，如果用户单击,现在将变为红色，但如果用户在单击后单击（顺序错误），则不会发生任何事情。我已经布置好网格，给每个id 与其值相同的值，并且我给每个元素一个属性......我只是不确定如何让用户按顺序单击然后移动类...**`1``2``2``3``1``div``data-value``highlight`**

 **这是我一直在使用的小提琴：[带有点击顺序的数字网格](http://jsfiddle.net/tdunham02/EB654/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:23:19.947

这样的事情应该让你开始：

```
(function($) {
    var currentNumber = 1;

    $(document).on('click', '.num', function() {
        var $this = $(this);

        if ($this.data('value') != currentNumber + 1) {
            return;
        }

        $('.highlight').removeClass('highlight');
        currentNumber++;
        $this.addClass('highlight');

        return false;
    });
})(jQuery); 
```

[http://jsfiddle.net/EB654/9/](http://jsfiddle.net/EB654/9/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T17:24:26.267

检查[这个小提琴](http://jsfiddle.net/EB654/30/)

```
$(document).ready(function() {
    var counter = 2; //start at 2 if you don't want the user to click on 1

    for (i = 1; i < 21; i++) {
        $('#numbers').append('<div id="' + i + '" class="num ' + ((i == 1) ? 'highlight' : '') + '" data-value="' + i + '">' + i + '</div>');
    }

    $(".num").height($(document).height() / 5);
    $(".num").width($(document).width() / 4);

    $('.num').on('click', function() {
        if ($(this).data('value') == counter) {
            $('.num').removeClass('highlight');
            $(this).addClass('highlight');
            counter++;
        }

        return false;
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:28:57.160

```
 $('.num').click(function() {
    var currentEle = $(this);
    var val = parseInt(currentEle.attr("data-value"),10);
    var prevEle = $(".num.highlight").first();
    var prev_val = parseInt(prevEle.attr("data-value"),10);
    if(++prev_val==val){
         prevEle.removeClass("highlight");
         currentEle.addClass("highlight");
    } 
```

检查此链接[http://jsfiddle.net/EB654/15/](http://jsfiddle.net/EB654/15/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:32:49.843

这是一个应该工作的小提琴 [http://jsfiddle.net/ranjith19/EB654/28](http://jsfiddle.net/ranjith19/EB654/28)

用这个替换你的点击功能：

```
var i = 2;

$(".num").click(function(){
    clicked_val = $(this).attr("data-value")

    if (clicked_val != i){
          return 
    }

  $(this).addClass('highlight');
  i = i+1

}) 
```**

# prolog - Prolog DCG 语法规则中的堆栈溢出：如何高效或懒惰地处理大型列表

> ID：12939794
> 
> 赞同：16
> 
> 时间：2012-10-17T17:19:04.067
> 
> 标签：prolog, swi-prolog, dcg

我正在解析一个由一系列行组成的相当简单的文件格式，每行都有一些空格分隔的字段，如下所示：

```
l 0x9823 1
s 0x1111 3
l 0x1111 12
⋮ 
```

我正在使用 SWI-Prolog。这是我到目前为止的DCG：

```
:- consult(library(pure_input)).

load_trace(Filename, Traces) :-
    phrase_from_file(trace_file_phrase(Traces), Filename).

trace_file_phrase([]) --> [].
trace_file_phrase([T|Ts]) --> trace_phrase(T), trace_file_phrase(Ts).

trace_phrase(access(Type, Address, SinceLast)) -->
    access_type(Type), space,
    address(Address),  space,
    nat(SinceLast),    newline.

access_type(load)  --> "l".
access_type(store) --> "s".

address(Number) --> "0x", hexnum(Number).

hexdigit(N)  --> digit(N).
hexdigit(10) --> "a". hexdigit(11) --> "b". hexdigit(12) --> "c".
hexdigit(13) --> "d". hexdigit(14) --> "e". hexdigit(15) --> "f".
hexnum(N) --> hexdigit(D), hexnum(D, N).
hexnum(N, N) --> [].
hexnum(A, N) --> hexdigit(D), { A1 is A*16 + D }, hexnum(A1, N).

newline --> "\n".
space --> " ".

%% the following two productions are courtesy of Lars Mans at
%% https://stackoverflow.com/questions/3279822/parsing-numbers-with-multiple-digits-in-prolog
digit(0) --> "0". digit(1) --> "1". digit(2) --> "2".
digit(3) --> "3". digit(4) --> "4". digit(5) --> "5".
digit(6) --> "6". digit(7) --> "7". digit(8) --> "8".
digit(9) --> "9".

nat(N)   --> digit(D), nat(D,N).
nat(N,N) --> [].
nat(A,N) --> digit(D), { A1 is A*10 + D }, nat(A1, N). 
```

正如评论中提到的，我[在 Prolog 中抄写了 Parsing numbers with multiple numbers 中](https://stackoverflow.com/questions/3279822/parsing-numbers-with-multiple-digits-in-prolog)的数字处理。

我遇到的问题是其中一些文件很大，例如大约 5-10 MB。SWI-Prolog 中的默认堆栈对此不够用，并且解析这些文件需要大量时间，大约 5-15 秒。我对这种情况有几个问题：

1.  这段代码的效率问题在哪里？我认为它要么在要么，`trace_file_phrase//1`但`nat//1`这些只是预感。
2.  如果问题是列表，有没有比这更好的方法来处理带有 DCG 的列表？
3.  一般来说，如何诊断和治疗此类 DCG 的性能问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T20:10:09.250

作为一般评论，您会在名称下找到更多关于它的信息[`library(pio)`](https://stackoverflow.com/search?q=%5Bprolog%5D%20%22library%28pio%29%22)。同样干净地使用它的方法是：

```
:- use_module(library(pio)). 
```

你的例子太复杂了，所以我只会考虑一个稍微简单的例子，一个换行符分隔的数字列表：

```
nats([]) --> []。
nats([N|Ns]) --> nat(N)，换行，nat(Ns)。

```

那么，如何有效地测试呢？（那是您的问题 3）的基本点`library(pio)`是您可以使用常规 DCG 进行文件处理。但是对于小型测试，您仍然可以使用简单的`phrase/2`. 所以我这样做：

```
?- 短语(nats(Ns),"1\n")。
Ns = [1]；
错误的。

```

看到`;`提示了吗？这意味着：Prolog 无法决定是否可以计算进一步的答案——因此它留下了一个或多个选择点。**而这只是一个数字**你可以想象事情会如何堆积。

让我们深入挖掘：

```
?- 短语（数字（D），“1”）。
D = 1；
错误的。

```

又是邪恶`;`！为了完成这项工作，一切都必须确定。有以下三种方法：

## 使用削减（并失去你的灵魂）

祝你好运 - 最好的似乎是在重复元素之后：

```
trace_file_phrase([]) --> []。
trace_file_phrase([T|Ts]) -->
   跟踪短语（T），
   ！，％丑陋，但是...
   跟踪文件短语（Ts）。

```

（这应该回答问题1）

但是，等一下！这有什么不好`!`？只要事情*只有*一个答案，`trace_phrase//1`就是完美的。只是，如果有更多答案（或实际解决方案），削减可能会删除宝贵的答案。你怎么知道，如果有更多的解决方案？好吧，你没有。而且你不会看到它们，因为它们已经被切掉了。

## `call_semidet/1`

这是一种确保不会发生这种情况的方法。这仅适用于可以调用两次而没有任何效果的无副作用目标：

```
call_semidet（目标）：-
   ( call_nth(目标, 2)
   -> 抛出(错误(mode_error(semidet,Goal),_))
   ; 一次（目标）
   ）。

```

这使用[`call_nth/2`](https://stackoverflow.com/questions/11364634/count-the-number-of-call-of-a-clause-prolog/11400256#11400256)，如另一篇文章中所定义。`Goal`（作为一种优化，当没有选择点打开时，实现可以避免调用两次......）只是为了明确，它是如何工作的：

```
?- 短语（nat（N），“1234”）。
N = 1234 ;
错误的。

?- call_semidet(短语(nat(N),"1234"))。
N = 1234。

?- call_semidet((X=1;X=2))。
错误：未知错误术语：mode_error(semidet, (2=1;2=2))

```

所以它让你的小语法有效地确定！因此没有必要重新制定任何东西！

现在缺少的是把它整合到语法中。你可以做这个非常低级的，或者相当干净地使用[`library(lambda)`](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl).

```
短语_semidet(NT) -->
   呼叫（S0^S^call_semidet（短语（NT，S0，S）））。

```

请注意，在这种非常特殊的情况下，我们不使用`\`重命名。

```
trace_file_phrase([]) --> []。
trace_file_phrase([T|Ts]) -->
   短语_semidet（trace_phrase（T）），
   跟踪文件短语（Ts）。

```

## 利用索引

最后，一个非常费力但干净的方法是重写所有内容以更好地从索引中获利（并且可能有助于总体上改进索引......）但这是一条漫长的道路。刚开始：

```
数字（D）-> [C]，
   {c_digit(C,D)}。

c_digit(0'0,0)。
c_digit(0'1,1)。
c_digit(0'2,2)。
c_digit(0'3,3)。
c_digit(0'4,4)。
c_digit(0'5,5)。
c_digit(0'6,6)。
c_digit(0'7,7)。
c_digit(0'8,8)。
c_digit(0'9,9)。

```

这给你现在：

```
?- 短语（数字（D），“1”）。
D = 1。

```

但是您还有另一个不确定性来源，这与您定义语法的方式有关。在`nat//2`你看到它：

```
nat(N,N) --> []。
nat(A,N) --> 数字(D), ... .

```

第一条规则总是适用的，也就是说，`"1234\n"`将被解析为`"1"` `"12"` `"123"` `"1234"`只有下面的`newline//0`人意识到它就足够了——然后坚持下去。

你可以为此重写一些东西，但是，代码不再是你喜欢的纯粹的小规范，不是吗？好吧，也许将来情况会有所改善。

例如，SWI 中的索引比以前好得多，也许这里的事情也在发展......

的目的`library(pio)`是让这个过程开始。将此与 Haskell 进行比较——我们离`interact`效率还很远！但没有**内在**成本：

```
... --> [] | [_]，...

?-phrase_from_file((...,"searchstring",...),fichier)。

```

与 grep 一样高效——在空间方面。也就是说，它在恒定空间中运行。所以希望将来有更多的代码运行得更好。

编辑：顺便说一句，`library(pio)`在效率方面确实已经产生了影响：GC 阶段得到了显着改善，与 Wadler 的修复一些空间泄漏的方式非常相似——四分之一世纪前的论文。事情发展...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T20:05:56.490

我已经在 2Mb 文件上验证了 stackoverflow。然后我使用库（dcg/basics）重写了语法，现在正在工作。

```
:- [library(dcg/basics)].

load_trace_0(Filename, Ls) :-
    phrase_from_file(lines(Ls), Filename).

lines([s(H,I)|R]) -->
    "s 0x", xinteger(H), " ",
    integer(I), blanks,
    !, lines(R).
lines([l(H,I)|R]) -->
    "l 0x", xinteger(H), " ",
    integer(I), blanks,
    !, lines(R).
lines([]) --> []. 
```

但后来我试图削减你的语法，并且效果也很好。所以@gusbro (+1) 的回答解决了你的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T18:22:09.610

关于效率问题：

如果您的输入通常格式正确，那么我认为您应该交换 and 的子句`nat/4`，`hexnum/4`因此它们将显示为：

```
nat(A,N) --> digit(D), { A1 is A*10 + D }, nat(A1, N).
nat(N,N) --> [].

hexnum(A, N) --> hexdigit(D), { A1 is A*16 + D }, hexnum(A1, N).
hexnum(N, N) --> []. 
```

因为您只想在没有更多数字可供使用时停止解析数字。

如果使用得当，cut ( `!`) 可以帮助您提高性能，还可以帮助您解决堆栈溢出问题，因为它会修剪 prolog 评估树。例如，您可以`!`在末尾`trace_file_phrase/3`（即 ）之后提交 ( )，`newline`因为您不需要再次重新解析该部分输入以找到其他解决方案。

# java - 每次渲染时如何让子视图创建一个新视图

> ID：12939799
> 
> 赞同：0
> 
> 时间：2012-10-17T17:19:11.747
> 
> 标签：java, jsf, primefaces

我有一个包含两个子视图的 JSF 页面。根据执行哪个 commandButton，将呈现其中一个子视图。但是，如果其中一个子视图的验证失败，则错误消息仍然可见，并且在下一次呈现子视图时组件仍然无效。我的 bean 中有一个解决方法来删除消息，但组件仍然无效。有没有办法将组件设置为有效或仅为子视图创建新视图？

这是我对消息的解决方法：

```
Iterator messageIterator = FacesContext.getCurrentInstance().getMessages();
    while (messageIterator.hasNext()) 
    {
            messageIterator.remove();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:35:52.227

这是因为当`rendered`为 false 时组件不显示，但它仍然在视图的组件树中。所以组件没有显示，但它的值和状态仍然存在。

有几种方法可以解决这个问题：

*   使用 JSTL 标记，例如`<c:if />`（如果可能的话）而不是`rendered`. 仅当条件为真时，标签内的页面元素`<c:if/>`才会出现在树中。

*   从一个子视图传递到另一个子视图时，不要进行回发。这有效地从头开始重新创建树。例如，执行 GET 而不是 POST。

*   使视图无效，以便重新创建树。使该`commandButton`切换子视图`immediate="true"`并使添加此代码的视图无效：

```
public void clearComponentTree() {
    FacesContext context = FacesContext.getCurrentInstance();
    Application application = context.getApplication();
    ViewHandler viewHandler = application.getViewHandler();
    UIViewRoot viewRoot = viewHandler.createView(context, context.getViewRoot().getViewId());
    context.setViewRoot(viewRoot);
    context.renderResponse();
} 
```

*   直接操作组件树删除不需要的组件（与上面类似，但仅限于特定组件）。在这里，我假设我们要删除具有 id 的子视图下的所有组件`sub1`（这`immediate="true"`也需要）：

```
public void clearSubtree() {
    FacesContext context = FacesContext.getCurrentInstance();
    context.getViewRoot().findComponent(":sub1").getChildren().clear();
} 
```

[此链接](https://cwiki.apache.org/MYFACES/clear-input-components.html)提供了实现此目的的其他次要方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:53:57.273

尝试使用 primefaces 扩展：**resetInput**重新建立输入的状态：

```
<p:commandButton value="Load Subview" action="#{bean.startSubview}" update="subview" process="@this" >
    <pe:resetInput for="subview"/>
</p:commandButton> 
```

# html - 您将如何调试未加载的网页？

> ID：12939801
> 
> 赞同：0
> 
> 时间：2012-10-17T17:19:19.067
> 
> 标签：html, debugging, jsp

**网页未加载/挂起。你将如何调试它？**

在电话采访中，我曾多次被问到这个问题。但我不知道完美的答案。

我已经给出了诸如检查网络应用程序是否正确部署、互联网本身可能很慢、JSP 可能有一些错误、检查日志以了解任何此类细节等答案。但面试官一直在问“这些都是很好的检查，但是，如果所有这些都很好，那还有什么问题呢？”

此外，这不是 JavaScript 特定的问题。`debugger`我可以使用或遵循调试 JS/jQuery 代码`console.log()`。但是您将如何调试一个普通的 JSP 页面呢？

SO的任何Web应用程序专家都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:34:00.653

一旦您知道您不能以预期的方式（我称之为[Hail Mary 测试](http://en.wikipedia.org/wiki/Hail_Mary_pass)）简单地访问您的站点，那么您需要从内到外开始。

由于网站可能有多个故障点，我总是创建一个命令行环境，允许我独立于 Web 服务器、防火墙设置等测试框架和数据库操作。这可能需要一些摆弄，具体取决于您使用的是什么，但我已经用 Django、WordPress、Drupal 等成功地做到了这一点。

一旦我知道应用程序本身正在运行，我就会连接一个命令行客户端（例如`links`），以查看来自的客户端是否`localhost`按预期工作。这确认服务器本身正在工作（至少部分）。*然后我从同一 LAN*上的另一台主机进行测试。我不止一次看到`localhost`工作和局域网访问不起作用，问题几乎总是服务器配置或防火墙配置。

如果所有这些都有效，但您仍然无法从 Internet 访问您的站点，那么它是位于食物链上游某处的网络/防火墙设置。尝试找到一个距离您上次成功的地方更远的主机并对其进行测试。起泡，冲洗，重复。

# css - 带有百分比 + 静态值的 css

> ID：12939810
> 
> 赞同：0
> 
> 时间：2012-10-17T17:19:59.050
> 
> 标签：css

我知道以下内容是错误的，但是生成类似内容的更简单方法是什么？

```
 .classhere{
 width: 50px + 10%
 } 
```

所以这里的 div 有一个 50px 宽度 +10% 的最小值（假设父级是 100 像素）所以 55 像素，当父级全屏时，例如 1800 像素，.classhere 的宽度为 50 + 180 像素。

**更新：**

欢迎使用 javascript、jQuery 和其他解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:25:04.617

您将需要使用 javascript 来获取屏幕的宽度，然后设置宽度。[http://api.jquery.com/width/](http://api.jquery.com/width/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:48:35.553

你可以像下面那样做。

HTML

```
<div class="parent">
    <div class="child"></div>
</div> 
```

CSS

```
.parent{
    width:100px;
    height:100px;
    background-color:blue;
}

.child{
    background-color:green;
} 
```

jQuery

```
$(document).ready(function(){
    $(".child").width(50+($(".parent").width()*0.1));
    $(".child").height(50);
}); 
```

如果你想看它的演示，jsfiddle 在[这里](http://jsfiddle.net/zbv27/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T21:12:37.470

虽然它在 Android 或 Opera 中不受支持，但 CSS calc() 是为这类东西制作的。

参考此浏览器兼容性：[http ://caniuse.com/calc](http://caniuse.com/calc)

```
.classhere{
    width: -webkit-calc(50px + 10%);
    width: -moz-calc(50px + 10%);
    width: calc(50px + 10%);
} 
```

# java - 在 Windows 上打开在 mac 中创建的 java (android) 项目

> ID：12939812
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:01.590
> 
> 标签：java, android, windows, macos

所以，我需要在我的电脑上打开一个eclipse项目。该项目是在 Mac 上构建的，我的计算机运行 Windows。似乎缺少一些代码，当我尝试在我的 avd 上运行应用程序时，我得到“不幸的是，已停止。”</p>

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:35:40.933

Android (Java) 代码与 Windows 或 Mac 机器无关——我猜你的 JDK 版本在两者之间是不同的，或者（更有可能）你有不同版本的 Android SDK。因此，您有不同版本的 AVD，因此您的应用程序不能很好地传输。我建议在调试模式下运行并向我们显示堆栈跟踪，以便我们提供更多有用的信息。

# c# - 如何取消 customvalidators 操作？

> ID：12939813
> 
> 赞同：1
> 
> 时间：2012-10-17T17:20:02.713
> 
> 标签：c#, asp.net

我有一个带有文本框和 3 个按钮（添加、保存和取消）的网络表单，我正在学习如何使用 customvalidators (ASP.NET 4.0)。

页面加载后，您只能看到添加按钮，单击它后，您可以看到文本框和其他 2 个按钮。

如果文本框为空，我无法保存记录（我使用 customvalidator 和 javascript 成功完成此操作，它向我显示错误消息“文本框不能留空”），但如果我不想保存会发生什么不再记录并想取消（通过在文本框仍然为空时单击取消按钮）？

我收到 customvalidator 错误“文本框不能留空”。我必须输入一些东西，这样我才能做我需要的。

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:40:09.893

对于取消按钮，设置属性**CausesValidation="false"**。这就对了...

# c# - DataGridComboBoxColumn 与 2 个列表绑定

> ID：12939817
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:15.323
> 
> 标签：c#, wpf, xaml, binding, datagridcomboboxcolumn

我无法在我的 DataGrid 中绑定 ComboBox 的值：

```
 <DataGrid Grid.Row="1" Grid.Column="0" ItemsSource="{Binding ListeGrilleTarifaire}" Name="dg_ForfaitCommune" AutoGenerateColumns="False" CanUserAddRows="True" CanUserDeleteRows="False" Visibility="{Binding accesGrilleForfaitCommune}">
    <DataGrid.Columns>
        <DataGridComboBoxColumn Header="{x:Static trad:Langues.lblPays}" ItemsSource="{Binding ListePrixUnitaires}" SelectedItemBinding="{Binding tarifDestination_PAYS,Mode=TwoWay}" Width="80" />
    </DataGrid.Columns>
</DataGrid> 
```

*   我的 DataGrid ItemsSource 是“ListeGrilleTarifaire”类型的对象

*   ListeGrilleTarifaire 是对象 ViewModelGrilleTarifaire 的列表（属性）。ViewModelGrilleTarifaire 是我的用户控件的 DataContext（我的 DataGrid 所在的位置）。

我想要的是：

1.  `List<string>`我的组合框列出了 ViewModelGrilleTarifaire 类中定义的ListePays ( ) 列表中包含的值。

2.  当 DataGrid 加载 ListeGrilleTarifaire 对象时，ListeGrilleTarifaire.tarifDestination_PAYS 的值必须在组合框中自动绑定（简而言之......它必须绑定）

欢迎任何帮助！

谢谢！

一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:34:06.560

我在您的代码中看不到任何代码问题，只是可能发生的一些事情：

首先：ListeGrilleTarifaire.tarifDestination_PAYS 必须是一个属性，如果它实现 INotifiyPropertyChanged 更好。

第二：ListeGrilleTarifaire.tarifDestination_PAYS 必须是与 ListePrixUnitaires 相同类型的商品。

如果这对您不起作用，请更好地解释错误...希望对您有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:15:24.563

我不认为此代码与您想要的完全相同，但它可能会对您有所帮助。

```
<sdk:DataGridTemplateColumn Width="150" Header="EstimateIOName">
            <sdk:DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <ComboBox x:Name="cbo" ItemsSource="{StaticResource IOList}" SelectedValue="{Binding Path=EstimateIOName,Mode=TwoWay}" SelectedValuePath="EstimateIOName"  SelectionChanged="cbo_SelectionChanged" DropDownClosed="cbo_DropDownClosed" ></ComboBox>
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellEditingTemplate>
        </sdk:DataGridTemplateColumn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:44:46.327

按照这篇文章的答案（http://stackoverflow.com/questions/5409259/binding-itemssource-of-a-comboboxcolumn-in-wpf-datagrid），我为 DataGridComboBoxColumn 定义了样式并且它可以工作

# android - Android Intent 相册库

> ID：12939819
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:18.080
> 
> 标签：android, android-intent, gallery

我想对画廊拍照。很容易找到很多这样做的例子，但我希望直接在我自己的相册中打开画廊。这是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:33:57.047

你可以尝试做这样的事情：

```
private static final int SELECT_PICTURE = 1;

// ... 

Intent in = new Intent();
in.setType("image/*");
in.setAction(Intent.ACTION_GET_CONTENT);

Intent takePhotoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

String pickTitle = "Select or take a new Picture"; // Or get from strings.xml
Intent chooserIntent = Intent.createChooser(in, pickTitle);
chooserIntent.putExtra
(
  Intent.EXTRA_INITIAL_INTENTS, 
  new Intent[] { takePhotoIntent }
);

startActivityForResult(chooserIntent, SELECT_PICTURE); 
```

# sql - 根据另一个表中的列更新表中的列

> ID：12939823
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:30.963
> 
> 标签：sql, select

我有两张桌子。患者表具有患者姓名、年龄和性别。就诊表有 PatientName、SpecialistName、DateOfVisit 和一个 Age 列，其中还没有任何值。我想根据患者表中患者的年龄更新就诊表中的年龄列。这是我最好的猜测，但我收到的信息是：

> “操作必须使用可更新的查询。”

```
update visits v
set v.age = (
select p.age from
patients p where v.pname = p.pname); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:23:11.947

如果您正在使用`MSSQL`

```
UPDATE v
SET v.Age = p.Age
FROM visits V INNER JOIN patients p
ON v.pname = p.pname 
```

如果您正在使用`MySQL`

```
UPDATE visits V
INNER JOIN patients p
ON v.pname = p.pname
SET v.Age = p.Age 
```

[请参阅此链接：**使用 JOIN 更新**](http://blog.ookamikun.com/2008/03/mysql-update-with-join.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:36:29.030

这很简单

```
update visits v, patients p set v.age = p.age where v.pname = p.pname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:22:55.363

尝试使用`from`如下子句：

```
update visits v
set v.age = p.age
from patients p 
where v.pname = p.pname; 
```

# php - PHP JPEG 重采样

> ID：12939824
> 
> 赞同：1
> 
> 时间：2012-10-17T17:20:34.040
> 
> 标签：php, jpeg

我有这个脚本来拍摄原始照片，重新采样两次，用于缩略图和预览。这个脚本工作正常，即使你可能会发现语法时尚的一些弱点，我敢肯定。脚本本身不是我的问题的主题。我想知道之后我是否应该以某种方式清除内存。我是否用数据淹没了我的服务器？或者这很好并且之后会自行清除。我问是因为这个脚本将处理我的画廊，并且预计会一次处理多个文件。

脚本是这样写的：

```
 $filename = $DumpHere.$Processed;

// Get new dimensions
 list($width, $height) = getimagesize($filename);
// Resample thumbnail
 $image_p = imagecreatetruecolor(70, 70);
 $image = imagecreatefromjpeg($filename);
 imagecopyresampled($image_p, $image, 0, 0, 0, 0, 70, 70, $width, $height);
// Output Thumbnail
 imagejpeg($image_p, $ThumbsFolder.'thumb_'.$Processed, 100);
// Resample preview
 $image_p = imagecreatetruecolor(500, 300);
 $image = imagecreatefromjpeg($filename);
 imagecopyresampled($image_p, $image, 0, 0, 0, 0, 500, 300, $width, $height);
// Output Preview
 imagejpeg($image_p, $PreviewFolder.'preview_'.$Processed, 100); 
```

只是为了清楚

> $DumpHere

是处理前包含原始文件的文件夹的路径。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:34:44.057

你想在你的资源上使用[imagedestroy()](http://php.net/manual/en/function.imagedestroy.php)，所以只需添加：

```
imagedestroy($image_p);
imagedestroy($image); 
```

最后，这将释放内存。PHP 非常适合自己摆脱内存。例如，一旦你的脚本结束，所有的内存都会被释放。但这是将这些资源显式返回给系统的方法。

# c# - 在 ASP.NET C# 中从会话中转换对象

> ID：12939825
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:36.067
> 
> 标签：c#, asp.net, casting, session-state

**序言**：我在*没有*Visual Studio 的旧环境 ASP.NET/.NET 2.0 中工作。目前记事本++和FTP。虽然不太理想，但这是我目前处理的手牌。我目前无法直接/立即控制 IIS 实例或服务器机器。

* * *

`Foo`我在会话中存储了一个类型的对象：

```
this.Session["foo"] = new Foo();
this.Response.Redirect("the/second/page"); 
```

在第二页上，我从会话中检索，并尝试将其转换为使用：

```
Foo foo = (Foo) this.Session["foo"]; 
```

我收到：

`System.InvalidCastException: Unable to cast object of type 'Foo' to type 'Foo'.`

当我`.GetType()`在第二页上比较类型名称时：

```
Foo in session:      ASP._dev_blah_aspx+Foo  
New instance of Foo: ASP._dev_blah_aspx+Foo 
```

但是它们的类型 GUID`.GetType().GUID`不同：

```
Foo in session:      a67f218d-...
New instance of Foo: 267f20ea-... 
```

* * *

这可能与这个[问题/答案有关](https://stackoverflow.com/questions/512064/unable-to-cast-object-of-type-x-to-type-x-asp-net)吗？我会尝试，但请参阅序言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:24:52.043

上传代码时，请尝试强制重新编译。最简单的方法是*触摸*您的 web.config。只需用 Notepad++ 打开它并在任何地方添加一个空格，以便服务器识别它已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:36:17.110

防止这种情况发生的另一种方法是始终在上传站点之前对其进行预编译（使用 Visual Studio 中的发布选项）

# java - 如何映射组合关系？

> ID：12939826
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:37.413
> 
> 标签：java, dozer

我想在不使用 Dozer 的深度映射属性的情况下映射组合。

另一个重要的元素是组合类和主类映射到同一个类

我已经搜索了推土机文档（顺便说一句很好），但我仍然没有找到我要找的东西

示例：**A 和 B -> C**

```
Class A {
  B b
  a1
}

Class B {
  b1
  b2
}

Class C {
  ca1
  cb1
  cb2

} 
```

我不想像这样映射：

```
<mapping>
  <class-a>A</class-a>
  <class-b>C</class-b>
  <field>
    <a>b.b1</a>
    <b>cb1</b>
  </field>
  etc.
</mapping> 
```

我想使用类似的东西：

```
<mapping>
  <class-a>B</class-a>
  <class-b>C</class-b>
  <field>
    <a>b1</a>
    <b>cb1</b>
  </field>
  etc.
</mapping>
<mapping>
  <class-a>A</class-a>
  <class-b>C</class-b>
  <field>
    <a>a1</a>
    <b>ca1</b>
  </field>
</mapping> 
```

我的 B 类与其他类的作文一起使用。

我想尊重 DRY（不要重复自己）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:59:53.537

您不必指定深度映射，您应该能够说出 B1 是如何映射到 B2 的，如您所说：

```
<mapping>
  <class-a>B1</class-a>
  <class-b>B2</class-b>
  <field>
    <a>b1Param1</a>
    <b>b2Param1</b>
  </field>
</mapping> 
```

作为一个单独的映射，A1 如何映射到 A2（但不是组合类的子映射）：

```
<mapping>
  <class-a>A1</class-a>
  <class-b>A2</class-b>
  <field>
    <a>b1</a>
    <b>b2</b>
  </field>
</mapping> 
```

Dozer 将识别 b1 和 b2 是特定类的对象，并寻找两者之间的映射，该映射可以作为单独的映射提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:03:15.437

不幸的是，除了使用深度映射并重复它之外，没有解决方案。
问题在于 Dozer 映射 C -> A 和 B。这不容易。

一种解决方案是在“单向”映射的情况下启用这种类型的自动映射。

复杂的问题，类似于这个[推土机常见问题](http://dozer.sourceforge.net/documentation/faq.html#mult-fields-to-single-field)

# javascript - jQuery每次索引迭代

> ID：12939829
> 
> 赞同：1
> 
> 时间：2012-10-17T17:20:46.133
> 
> 标签：javascript, jquery

我有一堵图像墙和一些文字下面，我希望图像淡入然后其文本淡入。
使用下面的代码，每个图像都会淡入，然后所有文本都会同时淡入。

问：我如何使用索引使相应的文本随着图像淡入淡出？
我 [发现了一个类似的问题](https://stackoverflow.com/questions/4341977/jquery-each-index)，但无法让它发挥作用。

CSS：
`.mydiv a, .mydiv p{ display:none;}`

js：

```
$('.mydiv a').each(function(index){
    var c = $(this);
    $(new Image()).load(function(){
            c.fadeIn(500);
            setTimeout(function(){ $('.mydiv p').fadeIn(250); }, 500);// where would i place index
    }).attr('src', c.find('img').attr('src'));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:25:38.597

`c`如果每个 p 元素都有一个 mydiv，则从现有变量导航

```
$(c).closest(".mydiv").find("p").fadeIn(250); 
```

或使用`.eq()`

```
$(".mydiv p").eq(i).fadeIn(250); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:26:12.167

```
$('.mydiv a').each(function(i, e){
    var c = $(this);
    e.load(function(){
            c.fadeIn(500);
            setTimeout(function(){ $('.mydiv p').fadeIn(250); }, 500);// where would i place index
    }).attr('src', c.find('img').attr('src'));
}); 
```

# javascript - 如何仅将事件侦听器附加到新创建的元素？

> ID：12939831
> 
> 赞同：0
> 
> 时间：2012-10-17T17:20:54.570
> 
> 标签：javascript, jquery

当我触发一个函数时，我希望它仅将侦听器应用于我传递的元素，特别是`this`jQuery 元素。

```
addEventListeners(this);

function addEventListeners(el) {
        $(el).mouseenter(function() { 
            $(this).stop(true,true).switchClass("", "HIGHLIGHT", 400, "easeInOutQuad");
        });
        $(el).mouseleave(function() { 
            $(this).stop(true,true).switchClass("HIGHLIGHT", "", 400, "easeInOutQuad");
        });
    } 
```

它从 AJAX 结果触发：

```
 $.post(url,{el:wartosc_inputa},function(returned) {
        var data = $(returned).hide(); 
        $("#listaElementow").prepend(data); 
        data.slideDown();
        loading();
        addEventListeners(this);
    }); 
```

如何编码好？此代码没有将变量传递`addEventListeners(this);`给函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:27:23.363

在 ajax 回调函数中，“this”将是我认为的 ajax 对象，不再是元素，因此您需要在 ajax 启动之前将“this”保存在变量中。

```
that = this;
$.post(url,{el:wartosc_inputa},function(returned) {
    var data = $(returned).hide(); 
    $("#listaElementow").prepend(data); 
    data.slideDown();
    loading();
    addEventListeners(that);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:25:57.690

从成功处理程序的其余部分的上下文来看，我假设`returned`是您尝试将处理程序绑定到的 DOM 元素。假设是这种情况：

```
$.post(url,{el:wartosc_inputa},function(returned) {
    var data = $(returned).hide(); 
    $("#listaElementow").prepend(data); 
    data.slideDown();
    loading();
    addEventListeners(data[0]);
    // change this    ^^^^
    // pass the DOM element here, or 
    // change the addEventListeners function to take a jquery element
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:22:44.573

`this`在这种情况下，这不是您所期望的。尝试这个：

```
var self = this;
$.post(url,{el:wartosc_inputa},function(returned) {
    var data = $(returned).hide(); 
    $("#listaElementow").prepend(data); 
    data.slideDown();
    loading();
    addEventListeners(self);
}); 
```

# javascript - 如何知道所有异步回调何时执行？

> ID：12939838
> 
> 赞同：1
> 
> 时间：2012-10-17T17:21:15.270
> 
> 标签：javascript, asynchronous, callback

我正在遍历数组中的 URL 列表，并且对于每个 URL，我正在下载整个页面。

```
var urlInformations = [];
var count = 0;
urls.forEach(function(url) {
    // download and add to urlInformations
    count++
    if (count == urls.length) {
        // do something after all URLs are processed
    }
}); 
```

现在我处理这个的方式是通过维护元素的计数，在匿名函数中增加它，如果计数达到我所拥有的 URL 的数量，我会在该函数的末尾做我需要的。这里可能存在竞争条件和并发问题，对吧？这应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:24:22.573

不。Javascript 是单线程的，这意味着如果您增加一个计数器，然后将其与某个数字进行比较以确定是否继续，您基本上只是实现了一个信号量。这样做不会有并发问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:27:28.200

```
(XMLHttpRequest).addEventListener('load', handleload, false);

function handleload(e) {
    //dostuff
} 
```

XMLHttpRequest 的加载事件在完成加载时触发；这就是你所追求的吗？

# .htaccess - 使用 .htaccess 文件阻止用户使用 ip 和 cookie

> ID：12939840
> 
> 赞同：0
> 
> 时间：2012-10-17T17:21:25.977
> 
> 标签：.htaccess, web

任何人都可以帮助我创建一个阻止规则，以根据 ip、cookie 值和访问的 URL 作为 .htaccess 文件的输入来阻止用户。

几点：

1.  用户应该被阻止，只能从网站上的某些目录而不是整个网站
2.  被阻止的用户应该被重定向到指定的 URL。
3.  BlockRule 不需要设置 cookie，因为用户浏览器中已经存在 cookie，block 规则只需读取现有的 cookie 值，将其与 block 规则中的一个匹配并进行重定向。

**编辑：**乔恩回答了我上面的查询，但我也想将**这些 IP(%{REMOTE_ADDR})/cookie 值(%{HTTP_COOKIE})**从 .htaccess 文件记录到服务器上的某个文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:38:31.863

您可以将所有这些条件组合成一个规则：

```
RewriteEngine On

# by IP
RewriteCond %{REMOTE_ADDR} ^123.45.67.89$ [OR]
RewriteCond %{REMOTE_ADDR} ^123.45.67.88$ 
```

如果 IP 是 123.45.67.89 或 123.45.67.88，请执行一些操作。

```
# By cookie
RewriteCond %{HTTP_COOKIE} foo=bar; [OR]
RewriteCond %{HTTP_COOKIE} !something 
```

所以，如果有一个名为**foo**的 cookie的值为**bar**，或者*没有名为**something***的 cookie，那么做一些事情。

```
# by request
RewriteRule ^/?(bad_url|should/not/have/access|my_images) /blocked.html [L,R] 
```

因此，如果满足上述所有条件，并且请求是针对`/bad_url`、`/should/not/have/access`或`/my_images`的，那么浏览器将被重定向到`/blocked.html`

# regex - 正则表达式 * |

> ID：12939841
> 
> 赞同：3
> 
> 时间：2012-10-17T17:21:28.627
> 
> 标签：regex

假设我有 reg exp`(a|b)*(ab)+` 我知道这`*`意味着**0 或更多**，`+`意味着**1 或更多**，`|`意味着**要么或**？

所以, `aab`, `ab`, `abab`, `bbbbbbbbbbbbab`and`aaaaaaaaaaaaaaab`会起作用。

`(a|b)*|(ab)+`如果它是单独的，试图理解这些符号会起作用，对吗？
但是一个人不会为`(a|b)*(ab)+`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:26:46.450

你说的对。

`(a|b)*|(ab)+`只能匹配`a`，因为它将采用第一个替代项 ( `(a|b)*`)，然后完全匹配一个`a`。事实上，这个正则表达式甚至可以匹配一个空字符串。

`(a|b)*(ab)+`另一方面，不能选择任何东西，它可能匹配 0`(a|b)`但必须至少有一个`ab`。

另请注意，第一个正则表达式等效于`(a|b)*`and `[ab]*`，因为这已经涵盖了重复 的可能性`(ab)`。（事实上​​，在捕获子组方面存在细微差别，但这可能超出了您的相关或适用范围）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:31:40.670

你是正确的。

为了更清楚地画出来，或者至少在没有实际图像的情况下尽可能地画出来，我们可以分段查看不同的部分。

```
(a|b) 
```

这将匹配`a` *或* `b`。现在，如果您在其中添加一个`*`（名为“kleene star”），它将匹配 0 次或多次：

```
(a|b)* 
```

由于这是在您的正则表达式的开头，它表明您可以在输入的开头使用`a`和/或的任何重复组合。`b`

第二组：

```
(ab) 
```

`a`这要求后面必须有a `b`。添加 a`+`使其发生 1 次或多次：

```
(ab)+ 
```

因此，由于这是在您的正则表达式的末尾，它表明您可能`ab`在我们的字符串末尾有一个或多个重复序列。

组合成`(a|b)*(ab)+`，你可以有和的任意组合`a`，`b`只要你的输入至少以一个结尾`ab`。

如果您要`|`在两个集合之间添加 a，则第一个匹配的集合（第一个在`|`评估左侧的集合）将是匹配的集合。

有了这个，`(a|b)*|(ab)+`can match just `a`because `(a|b)`can match just `a`- 这个组在左边，`|`所以它首先被评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:30:53.523

让我们翻译。

1.  `(a|b)*(ab)+`方法：

    *   零个或多个（“a”或“b”）
    *   **后跟**一个或多个“ab”

    因此，任何`ab`, `bab`, `aab`, `abab`,`aaababbab`都会起作用；但是`a`, `b`, `aaa`, `bbb`, `bbba`,`<empty>`不会。

2.  `(a|b)*|(ab)+`方法：

    *   零个或多个（“a”或“b”）
    *   **或**由“ab”中的一个或多个

    因此，以上所有内容都将匹配，因为它们都将匹配第一个替代方案`(a|b)*`。有些也恰好*与*第二种选择相匹配，`(ab)+`但实际上并不重要——第二种选择完全被第一种覆盖，永远不会被检查！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T17:31:27.033

```
(a|b)*|(ab)+ 
```

`(a|b)*`表示 0 个或多个可以是 a 或 b 的字符。换句话说，“a”和“b”的任意组合。`(ab)+`表示 1 个或多个“ab”。将`|`它们放在它们之间，这意味着一个或另一个。所以是的，单独使用“a”就可以了。

```
(a|b)*(ab)+ 
```

第一部分是相同的，0个或多个字符，可以是'a'或'b'。但是没有'|' 这意味着串联。所以在你的'a'和'b'序列之后，后面跟着1个或多个'ab'。

我建议你阅读[这个](http://en.wikipedia.org/wiki/Regular_expression)。它解释了正式正则表达式中的三个操作：kleene star、altercation 和 concatenation。以及现实世界的正则表达式引擎是如何工作的。

# vba - 在表单的标签或文本框中显示字段的描述

> ID：12939843
> 
> 赞同：1
> 
> 时间：2012-10-17T17:21:34.430
> 
> 标签：vba, ms-access

我想做的是在我的表单上的标签中显示当前所选字段的描述。我觉得它当前显示的位置（左下状态栏）几乎不引人注意。

如何在状态栏中访问该值？例如，在我的表单上，当我选择了员工姓名字段时，在左下角的小字中显示“您正在注册的员工姓名”。

我知道在我的表单上的某些事件中，我需要这样的代码

```
 me.lblControlDescription.Caption = me.statusbar.caption 
```

如何访问 VBA 状态栏中的文本（字段描述）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:47:23.833

状态栏中的文本是当前字段的`Description`属性。

从 VBA，您可以访问`Description`表单记录集中的字段。

```
Debug.Print Me.Recordset.fields("id").Properties("Description") 
```

因此，如果您有一个名为 的标签控件`lblDescription`，则可以将其`.Caption`值设置为字段的`Description`.

```
Me.lblDescription.Caption = Me.Recordset.fields("id").Properties("Description") 
```

然而，这可能更复杂。 `Description`是一个用户创建的属性，这意味着它不存在，直到你给它一个值。而且，如果您有一组，但稍后删除它的值，则该属性本身不再存在。

如果您尝试检索`Description`不存在的时间，VBA 将抛出错误 #3270，“找不到属性”。您可以捕获该错误，并设置`Me.lblDescription.Caption`为何`vbNullString`时发生。

你还需要一个*何时*改变的策略`Me.lblDescription.Caption`。您可以创建一个过程来根据当前活动控件进行设置。然后从每个表单控件的焦点事件中调用该过程。对此可能有更好的方法，但我现在还没有看到。

# zend-framework2 - EventCollection 过时了吗？

> ID：12939844
> 
> 赞同：0
> 
> 时间：2012-10-17T17:21:46.097
> 
> 标签：zend-framework2

我正在阅读本教程：[http](http://mwop.net/blog/266-Using-the-ZF2-EventManager.html) ://mwop.net/blog/266-Using-the-ZF2-EventManager.html 关于 ZF2 的事件管理器，它引用了一个 EventCollection，我无法在我的框架上找到它。自撰写文章以来，他们是否更改了此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:34:50.600

ZF2 中的 EventCollection 对象已替换为 EventManagerInterface。但它存在于 1.12 的反向移植版本中。你提到的文章是一年前的。检查[http://akrabat.com/zend-framework-2/an-introduction-to-zendeventmanager/](http://akrabat.com/zend-framework-2/an-introduction-to-zendeventmanager/)和手册以获取更新。

# java - 如何隐藏 Mac/OSX 拖放 JTable 选择框

> ID：12939846
> 
> 赞同：3
> 
> 时间：2012-10-17T17:22:22.680
> 
> 标签：java, macos, swing, jtable, drag-and-drop

在 JTable 上执行拖放操作时，在拖动时会出现所选单元格的轮廓（选择框）。我怎样才能覆盖这种行为而不显示任何东西，但也许是一个特殊的光标？

在 Windows 和 OSX 中运行以下代码显示了我想要覆盖的行为！

```
import java.awt.BorderLayout;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DragGestureEvent;
import java.awt.dnd.DragGestureListener;
import java.awt.dnd.DragSource;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;

public class GestureTest
    extends
        JFrame
    implements
        DragGestureListener {

    private final DragSource ds;
    private final JTable jl;
    private static final Object[][] ITEMS = { { "Java" }, { "C" }, { "C++" }, { "Lisp" },
        { "Perl" }, { "Python" } };

    public GestureTest() {
        super("Gesture Test");
        setSize(200, 150);
        addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(final WindowEvent we) {
                System.exit(0);
            }
        });
        jl = new JTable(ITEMS, new Object[] { "Langs" });
        jl.setDragEnabled(true);
        jl.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        getContentPane().add(new JScrollPane(jl), BorderLayout.CENTER);

        ds = new DragSource();
        // final DragGestureRecognizer dgr =
        ds.createDefaultDragGestureRecognizer(
            jl, DnDConstants.ACTION_MOVE, this);
        setVisible(true);

    }

    @Override
    public void dragGestureRecognized(final DragGestureEvent dge) {
        System.out.print("dragGestureRecognized");
    }

    public static void main(final String args[]) {
        new GestureTest();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T09:47:00.467

我找到了一个解决方案，尽管您必须自己编写更多的 dnd 处理。

首先禁用 JTable 自己的 dnd 处理：`jl.setDragEnabled(false);`

然后你可以使用下面的代码`dragGestureRecognized`来调用`startDrag`你自己的方法。

重要的一点是`empty`图像。使用`null`此处将导致操作系统显示特定于操作系统的图像（Windows 为无，OS X 为灰色框），在此处显式设置图像将导致显示该图像（在我们的示例中为空的 1x1 像素图像）。

```
@Override
public void dragGestureRecognized(final DragGestureEvent dge) {
    System.out.print("dragGestureRecognized");

    Transferable transferable = new Transferable() {
        @Override
        public boolean isDataFlavorSupported(DataFlavor flavor) {
            return true;
        }

        @Override
        public DataFlavor[] getTransferDataFlavors() {
            return new DataFlavor[] { DataFlavor.stringFlavor };
        }

        @Override
        public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {
            return "Hello world!";
        }
    };
    BufferedImage empty = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB);
    dge.startDrag(null, empty, new Point(), transferable, null);
} 
```

# java - 注释掉属性文件中的属性

> ID：12939848
> 
> 赞同：3
> 
> 时间：2012-10-17T17:22:32.353
> 
> 标签：java, configuration-files

我正在使用 java 来操作属性文件。我有一个要求，比如我必须在更新之前注释掉一个属性值并添加具有新值的属性。喜欢

> 路径=c:\

我更新后应该是这样的

> #path=c:\
> 路径=c:\my_folder

有可能做到这一点吗？下面是我用于编辑属性文件的代码。

```
 Properties prop=new Properties();
        String currentDirectary=System.getProperty("testDir");
        String path=currentDirectary+"/test.Properties";
        FileOutputStream out=new FileOutputStream(path,true);
        prop.setProperty("path","c:\\my_folder");
        prop.store(out, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T22:47:45.270

下面的“一种黑客”怎么样：只需构建一个`comments`包含旧值并将其传递给 store 方法，注释将写入文件的状态，因此您不会立即有一个注释的旧值新值。

这里有一些示例代码：

```
@Test
public void propCom() throws FileNotFoundException, IOException {
    Properties p = new Properties();
    FileReader fr = new FileReader("some.properties");
    p.load(fr);
    fr.close();

    StringBuilder comments = new StringBuilder("Some properties\n");

    String oldValue = p.getProperty("path");
    comments.append("path=");
    if(oldValue != null) {
        comments.append(oldValue);
    }
    comments.append("\n");

    p.setProperty("path", "c:\\some\\other\\dir");

    FileWriter fw = new FileWriter("some.properties");
    p.store(fw, comments.toString());
    fw.close();
} 
```

从这个内容开始

```
path=c:\\ 
```

更新后的属性文件将如下所示

```
#Some properties
#path=c:\
#
#Thu May 09 00:41:49 CEST 2013
path=c\:\\some\\other\\dir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T22:24:14.323

正如注释中所指出的，标准`Properties`类不处理逐行注释，而只是通过`Properties#store`方法处理初始注释。所以如果你想要这个功能，你必须自己编写代码。在这篇[文章](http://www.coderanch.com/t/544562/java/java/save-properties-file-affecting-existing)中，您可以找到一个可以轻松适应您的需求的替代实现。

# sql - 跨多个数据库查询表

> ID：12939851
> 
> 赞同：1
> 
> 时间：2012-10-17T17:22:42.010
> 
> 标签：sql, sql-server-2008

所有...我需要一种方法来跨多个数据库查询相同的表。我有大约 30 多个数据库，它们都有相同的表。

```
 SELECT 
      a.name
      , a.address
      , b.company_id
      , c.part_no
      , c.cost
    FROM accounts a
    JOIN business b on a.whatever = b.whatever
    JOIN crazy c ON b.things = c.things 
```

像这样简单的东西，但在所有数据库中。重点不是加入多个数据库，这很简单，它同时在所有数据库中运行。一定有比创建一个冗长的存储过程更简单的方法，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:31:03.430

```
CREATE PROC dbo.alldatabasequery 
AS 

 CREATE TABLE #temp (
 databasename varchar(500),
 name varchar(max),
 address varchar(max),
 company_id varchar(max),
 cost varchar(max)
 )
INSERT INTO #temp 
 EXEC sp_MSforeachdb N'IF ''?'' NOT IN ( ''model'',''tempdb'',''master'',''msdb'')
  BEGIN 
  SELECT databasename=''?'' 
    , a.name
    , a.address
    , b.company_id
    , c.part_no
    , c.cost
    FROM ?.dbo.accounts a
    JOIN ?.dbo.business b 
    on a.whatever = b.whatever
    JOIN ?.crazy c
    ON b.things = c.things
   END' ; 

SELECT   * FROM #temp 

GO 

EXEC dbo.alldatabasequery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:46:38.777

试试这个

```
CREATE TABLE #temp (
 databasename varchar(500),
 name varchar(max),
 address varchar(max),
 company_id varchar(max),
 cost varchar(max)
 )

DECLARE @statement varchar(max)=''

     declare cur cursor FOR
 select name
   from master.dbo.sysdatabases
  where dbid >4

      open cur

 DECLARE @name  VARCHAR(8000)

      fetch next from cur into @name

      while @@fetch_status = 0

      begin

   SET @statement='SELECT databasename='''+@name+''', a.name
    , a.address
    , b.company_id
    , c.part_no
    , c.cost
    FROM '+@name+'.dbo.accounts a
    JOIN '+@name+'.dbo.business b 
    on a.whatever = b.whatever
    JOIN '+@name+'.crazy c
    ON b.things = c.things'

  INSERT INTO #temp 
  EXEC (@statement)
   fetch next from cur into @name
     end
    close cur
    deallocate cur

SELECT   * FROM #temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T21:17:01.177

本文可能有您正在寻找的解决方案。

[http://www.sqldbadiaries.com/2010/10/09/run-a-query-against-multiple-instances-using-ssms/](http://www.sqldbadiaries.com/2010/10/09/run-a-query-against-multiple-instances-using-ssms/)

# android - 以编程方式使每个表格行在android中可滚动

> ID：12939854
> 
> 赞同：0
> 
> 时间：2012-10-17T17:22:44.007
> 
> 标签：android, horizontalscrollview, tablerow

我有一个表格行现在可以正常工作，因为希望每一行都可以在代码中水平滚动。这是我的代码，当我将内容添加到水平滚动视图时，它会强制停止：

```
 for (int i = 0; i <counter; i++) {
        TableLayout table = (TableLayout) findViewById(R.id.tableLayout1);
        final TableRow row = new TableRow(this);
        HorizontalScrollView hsw = null;

        final TextView t = new TextView(this);
        t.setTextColor(Color.parseColor("#000000"));

        t.setText("   "+filenames[i]+"");
        t.setWidth(20);
        t.setHeight(65);
        t.setGravity(Gravity.BOTTOM|Gravity.LEFT);
        t.setTextSize(15);
        t.setTextColor(Color.WHITE);

        TableLayout.LayoutParams tableRowParams=
                  new TableLayout.LayoutParams
                  (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);

                row.setLayoutParams(tableRowParams);

        row.addView(t);
        hsw.addView(row);

        table.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        } 
```

谁能告诉我我的代码有什么问题？我做错了什么？坦克斯 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:46:14.607

你的 Horizo​​ntalScrollView 不是 null 吗？添加堆栈跟踪也会有帮助。

# java - 解析电子邮件地址以获取域并进行比较

> ID：12939855
> 
> 赞同：0
> 
> 时间：2012-10-17T17:22:45.207
> 
> 标签：java, javascript, regex, string, pattern-matching

我有一个要求，其中包含字段的请求进入我的休息网络服务。

在我的网络服务中，我必须检查这个字段，如果验证通过，那么我将请求发送到第三方服务。

**需要验证：**

`message_from`字段包含`email address`as `string`。我必须检查`domain name`（之后的所有内容`@`）是否是`roin.com`

例如：`abc@roin.com`通过、`john_mandoza@roin.com`通过、`john_manodza@google.com`失败……

我可以使用模式匹配器或其他任何东西来进行此验证吗？

我使用字符串解析来捕获之后的所有内容`(@)`，然后`equalsIgnoreCase`进行比较`roin.com`

这种字符串解析方法有效，但有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T17:26:04.093

你可以试试这个模式`(\\S+?@roin\\.com)`： -

*   `\\S+`用于匹配任何非空格字符
*   `?`after`\\S+`用于进行不情愿的匹配。它将匹配最少数量的字符以满足模式
*   `\\.`用于匹配`.`
*   由于`.`是正则表达式中的一个特殊字符，这就是为什么我们需要对其进行转义以将其匹配为文字。

所以，这里的代码： -

```
String str = "abc@roin.com";

Pattern pattern = Pattern.compile("\\S+?@roin\\.com");
Matcher matcher = pattern.matcher(str);

if (matcher.matches()) {
    System.out.println("Matches"); // Prints this for this email
} 
```

# nhibernate - 流畅的nhibernate hasmany合并

> ID：12939856
> 
> 赞同：0
> 
> 时间：2012-10-17T17:22:50.440
> 
> 标签：nhibernate, fluent-nhibernate

我仍然是一个正在发现的休眠者，所以也许我的问题有点愚蠢:(

我有以下模型：问卷 -n-> 回答 -1-> 问题

```
public class Questionnaire : IEquatable<Questionnaire>
{       
    public virtual int? Id {get;set;}

    public virtual IList<Answer> Answers { get; set; }
}

public class QuestionnaireMap : ClassMap<Questionnaire>
{
    public QuestionnaireMap()
    {
        this.Table("Questionnaire");
        this.Id(questionnaire => questionnaire.Id).GeneratedBy.Identity();
        this.HasMany(questionnaire => questionnaire.Answers).Cascade.AllDeleteOrphan().Inverse().KeyColumn("QuestionnaireId");
    }
}

public class Answer : IEquatable<Answer>
{
    public virtual int QuestionId { get; set; }

    public virtual int? QuestionnaireId { get; set; }

    public virtual bool Value { get; set; }      

    public virtual Questionnaire Questionnaire { get; set; }
}

public class AnswerMap : ClassMap<Answer>
{
    public AnswerMap()
    {
        this.Table("Questionnaire_Answer");

        this.CompositeId()
            .KeyProperty(answer => answer.QuestionId).Mapped()
            .KeyReference(answer => answer.Questionnaire, "QuestionnaireId").Mapped();

        this.Map(answer => answer.Value);
    }
} 
```

我能够获取我的实体并保存一个新实体。

不幸的是，在某些情况下“更新”它不起作用。

如果我删除问卷的所有答案，然后调用 session.Merge(answer) 那么一切正常。

但是，如果我在问卷中添加新答案

```
questionnaire.Answers.Add(new Answer { BoolValue = true, QuestionId = 3, Questionnaire = questionnaire }); 
```

然后我得到一个异常（System.Reflection.TargetException：“非静态方法需要一个目标”）。

通过使用 sql 探查器，我看到 nhibernate 尝试插入一个新答案，其中 null 作为问卷 ID（当然是不可为空的列）。我认为我的映射是错误的，但我看不出有什么问题。

有人能帮我吗？

感谢和问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:07:47.743

由于无法解决，我删除了 Answer 的复合主键并添加了一个标识列。因此我的映射变为：

```
public AnswerMap()
    {
        this.Table("Questionnaire_Answer");
        this.Id(answer => answer.Id).GeneratedBy.Identity();
        this.References(answer => answer.Questionnaire, "QuestionnaireId").Not.Nullable();
        this.Map(answer => answer.QuestionId).Not.Nullable();
        this.Map(answer => answer.Value);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:24:05.560

你的映射`Questionnaire`是错误的。您的密钥可以为空，但您已将其映射为不可为空（默认情况下）。我建议您将您的整数更改`Questionnaire.Id`为**不可为空的**整数。

```
public class Questionnaire : IEquatable<Questionnaire>
{   
    // NOT NULLABLE    
    public virtual int Id {get;set;}
    public virtual IList<Answer> Answers { get; set; }
} 
```

**编辑**：

```
public class Answer : IEquatable<Answer>
{
    public virtual int QuestionId { get; set; }

    // NOT NULLABLE - it's used by composite key
    public virtual int QuestionnaireId { get; set; }

    public virtual bool Value { get; set; }      
    public virtual Questionnaire Questionnaire { get; set; }
} 
```

# ruby-on-rails - 在rails警告中：已经初始化常量

> ID：12939860
> 
> 赞同：6
> 
> 时间：2012-10-17T17:23:01.447
> 
> 标签：ruby-on-rails, psych

```
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/psych.so: warning:       already initialized constant ANY
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/psych.so: warning: already initialized constant UTF8
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/psych.so: warning: already initialized constant UTF16LE
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/psych.so: warning: already initialized constant UTF16BE
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:12: warning: already initialized constant ANY
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:15: warning: already initialized constant UTF8
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:18: warning: already initialized constant UTF16LE
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:21: warning: already initialized constant UTF16BE 
```

在创建新的 Rails 项目后第一次对 Rails 服务器进行分层时出现此错误。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T16:29:52.790

对我来说，解决方法就是做`gem uninstall psych`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T17:28:27.203

也许[这个要点上](https://gist.github.com/1266144)描述的解决方案会有所帮助：

```
rvm use 1.9.3
gem uninstall psych
gem install psych 
```

# c# - 启用对 Web 服务的匿名身份验证

> ID：12939869
> 
> 赞同：1
> 
> 时间：2012-10-17T17:23:38.267
> 
> 标签：c#, web-services, iis-7.5

我在服务器 (www.foo.com) 上有一个需要登录的应用程序。它托管在 IIS 7.5 中。我在它下面创建了一个新的子目录并托管了一个 Web 服务 (www.foo.com/ws)。我还将代码隐藏 dll 复制到父应用程序的 bin 文件夹中。当我通过浏览器调用服务时（我已启用 HttpGet），我会收到登录提示，因为父站点需要登录。如何禁用此登录提示？我已经为 IIS 中的 webservice 文件夹启用了匿名身份验证，但我仍然得到提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:52:03.873

您必须为您引用的站点禁用基本身份验证

![在此处输入图像描述](../Images/0c9af3d68637b3746b49d88476120d9d.png)

# jquery - jquery1.7.1导致手机和平板电脑屏幕缩小

> ID：12939872
> 
> 赞同：0
> 
> 时间：2012-10-17T17:23:39.957
> 
> 标签：jquery, html, css, mobile, tablet

我正在开发的静态网站在所有浏览器上都可以正常工作，但是当我在手机或平板电脑上查看它时——加载时一切都会迅速缩小半秒。看起来它会加载一个或两个更大的像素，然后在加载所有内容时它会缩小。只是为了测试我拿出了Jquery，问题就消失了。有谁知道解决方案，或者 Jquery 中导致此问题的原因是什么？此外，该网站不能有视口或响应 - 用户希望它看看它在桌面网站上的表现。非常感谢！

*   米

# email - 将电子邮件发送到 SAP 收件箱和普通电子邮件收件箱

> ID：12939878
> 
> 赞同：2
> 
> 时间：2012-10-17T17:24:17.813
> 
> 标签：email, abap

我需要一个功能来向普通电子邮件地址发送电子邮件并发送到 SAP Inbox。我发现了这个功能：

```
CALL FUNCTION 'SO_NEW_DOCUMENT_ATT_SEND_API1'
            EXPORTING
              document_data              = gd_doc_data
              put_in_outbox              = 'X'
              commit_work                = 'X'
            TABLES
              packing_list               = it_packing_list
              contents_txt               = it_message
              receivers                  = it_receivers
            EXCEPTIONS
              too_many_receivers         = 1
              document_not_sent          = 2
              document_type_not_exist    = 3
              operation_no_authorization = 4
              parameter_error            = 5
              x_error                    = 6
              enqueue_error              = 7
              OTHERS                     = 8. 
```

it_receivers 是这样填充的：

```
 FREE wa_it_receivers.
        wa_it_receivers-receiver   = sy-uname.  "&----- Assign SAP User Id
        wa_it_receivers-rec_type   = 'B'.                    "&-- Send to SAP Inbox
        wa_it_receivers-com_type   = 'INT'.
        wa_it_receivers-notif_del  = 'X'.
        wa_it_receivers-notif_ndel = 'X'.
        APPEND wa_it_receivers TO it_receivers . 
```

这只会将电子邮件发送到 SAP 收件箱。我去了rec_type字段的域，看看是哪个字母，这样它就可以将电子邮件发送到一个普通的电子邮件帐户。我相信它是'A'但是，因为它只说外部地址。是那个吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:03:58.823

我不知道为什么人们一直在挖掘那个旧的功能模块。我总是推荐使用 Business Communication Services API——它[有据可查](http://help.sap.com/erp2005_ehp_06/helpdata/en/4d/353bcfd2512304e10000000a15822b/content.htm)并且更容易使用。该文档还包含有关[如何发送到外部邮件地址](http://help.sap.com/erp2005_ehp_06/helpdata/en/4d/3508df467e6e4ae10000000a42189c/content.htm)的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T18:58:53.020

在这里你有一个很好的例子来说明如何做到这一点[wiki.sdn.sap.com](http://wiki.sdn.sap.com/wiki/display/ABAP/Send+Message+to+External+email+id+and+SAP+User+id+via+ABAP)

# android - 如何让“视图”填充“RelativeLayout”？

> ID：12939880
> 
> 赞同：9
> 
> 时间：2012-10-17T17:24:23.503
> 
> 标签：android, layout, view, android-relativelayout

我有一个`RelativeLayout`里面有一些东西，我想要一个背景视图来填充整个东西。这是我期望的工作：

```
 <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#000" >

            <View
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_alignParentBottom="true"
                android:layout_margin="1px"
                android:background="#fafafa" />

            <ImageView
                android:id="@+id/im"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:src="@drawable/ic_blank_profile" />

        .... and so on. 
```

那是行不通的。它填充宽度，但高度设置为零。但是，如果我更改`layout_alignParentBottom`为`layout_alignBottom="@+id/im"`then 它*确实*有效（有点；这不是一个令人满意的解决方案，但至少它不再是 0 高度）。

这是怎么回事？这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:31:52.300

您需要更改相对布局

```
android:layout_height="wrap_content" 
```

至

```
android:layout_height="match_parent" 
```

因为您将父级的高度包装到子级，并且子级与父级匹配，所以它将变为 0。

如果你想在相对布局之上/之下有其他东西，那么使用 android 权重。

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0px"  <!-- or 0dip -->
        android:layout_weight="1"
        android:background="#000" > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:29:33.960

尝试将`layout_height`您的相对布局的属性设置为`match_parent`

如果您`alignParent`从视图中删除所有属性并仅`match_parent`用于视图的宽度和高度，会发生什么？

罗尔夫

**最终编辑？：**

小例子，像这样？使用容器？当内部 RelativeLayout 的内容增长时，视图将随之拉伸。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/view1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignBottom="@+id/relativeLayout1"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_margin="1px"
            android:background="#fafafa" />

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/im"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:src="@drawable/ic_blank_profile" />
        </RelativeLayout>
    </RelativeLayout>

</LinearLayout> 
```

# javascript - 基本的 Javascript 问题

> ID：12939885
> 
> 赞同：0
> 
> 时间：2012-10-17T17:24:35.037
> 
> 标签：javascript

我是 Javascript 新手，正在处理一个基本文件，但由于某种原因无法让 innerHTML 方法工作。关于我在这里做错了什么的任何想法？

```
<html>
<head> <title>Testing Javascript</title>

<script type="text/javascript">

function GenerateNumber()
{
min = parseFloat(document.getElementbyId('miniBox').value);
max = parseFloat(document.getElementbyId('maxBox').value);
number = Math.floor (Math.random()*(max+min-1)+min);
document.getElementbyId('outputbox').innerHTML = 'Your value is: ' + number
}

</script>

</head>

<body>

<p>The numbers are selected between <input type='text' id='miniBox' size=3 value=0> and <input type='text' id='maxBox' size=3 value=10></p>

<input type="button" value="Generate my number: " onClick="GenerateNumber();">

<hr>
<div id="outputbox"></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:26:28.013

您拼错了方法名称。应该是`document.getElementById()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:26:51.130

`document.getElementbyId`应该是`document.getElementById`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:34:47.683

如果可能，我建议使用 DOM 而不是 innerHtml，例如：

```
document.getElementById('outputbox').appendChild(document.createTextNode('Your value is: ' + number)); 
```

[http://slayeroffice.com/articles/innerHTML_alternatives/](http://slayeroffice.com/articles/innerHTML_alternatives/)非常清楚地解释了如何使用 DOM。

# php - 自动刷新新闻代码的 div

> ID：12939886
> 
> 赞同：0
> 
> 时间：2012-10-17T17:24:36.967
> 
> 标签：php, javascript, automation

当 feed.php 的值发生变化时，是否有刷新此 div 的内容

这是我的新闻代码：

```
<script type="text/javascript">
function bangingTicker(container,element) { 

    var tickContainer = $(container);  
        function tick(){ 
            var tickElem = tickContainer.children(element); 
            tickElem.eq(1).siblings().animate({ 
                opacity: 0 
                },400, function() { 
                    tickContainer.stop(true,true).delay(10).animate({ 
                    'margin-right': 10 
                    },0,function() { 
                        tickContainer.delay(100).animate({ 
                        'margin-right': 20 
                        },8000); 
                    }); 
                        tickElem.first().appendTo(tickContainer); 
                        tickElem.eq(1).delay(200).animate({ 
                            opacity: 1 
                        },400); 
                    }); 

        } 

        setInterval(function(){ tick () }, 6000); 

} 

bangingTicker('#testi_ticker','li');

$(document).ready(function(){
    bangingTicker('#testi_ticker','li');    
    setTimeout(function(){ 
        $('#testi_ticker').fadeIn(1000); 
    },6400); 
});

</script> 
```

html脚本

```
 <div id="anc">
<label style="float:left;color:red;font-size:15px;margin-left:30px;margin-top:20px;"><b>ANNOUNCEMENT : </b>&nbsp;</label>
<ul id="testi_ticker" style="display:none;float:left;font-size:15px;font-weight:bold;list-style:none;margin-top:20px;position:absolute;margin-left:180px;">
<?php echo $_SESSION['anc']; ?>
</ul>
</div> 
```

饲料.php

```
<?php
session_start(); 

$mes1 = "test1";
$mes2 = "test2";
$mes3 = "test3";

$body = " <li>{$mes1} </li>
          <li>{$mes2} </li>
           <li>{$mes3} </li>
";

$_SESSION['anc'] = $body;

?> 
```

无论如何更新html页面上的输出值，这样当我编辑“feed.php”时，html页面上的值也会自动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:44:27.757

您将不得不使用 JavaScript/Ajax。您可以简单地每隔几秒检查一次 Ajax-Request 调用，或者使用一种称为“Long Polling”的技术，这里有一个很棒的视频教程：

[http://www.screenr.com/SNH](http://www.screenr.com/SNH)

# java - Java Jax rs 拦截器

> ID：12939887
> 
> 赞同：1
> 
> 时间：2012-10-17T17:24:40.380
> 
> 标签：java, jax-rs, interceptor

我正在开发一个拦截每个呼叫的 REST 服务。这个想法是验证是否在标头上发送了某些内容，例如用户 ID 或令牌。如果它不存在，则发送 403。为此，我将覆盖**preProcess**。

这一切都完成了，但我不知道如何将值从拦截器发送到方法。实现 intercetpor 的想法是对每个方法都执行此操作，因此我不需要在每个方法中添加 @HeaderParam，但我仍然需要方法的标头信息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:55:50.993

您可能想使用 @Context HttpHeaders 标头

直接在您的课程中，并在每个方法中重用信息。您还可以从放置该注释的超类派生资源类。这样，许多资源类可以共享相同的行为。

# regex - 从文件中的单词中删除 -ing

> ID：12939888
> 
> 赞同：0
> 
> 时间：2012-10-17T17:24:43.537
> 
> 标签：regex, sed

我正在尝试使用 sed 从文件中删除所有 -ing。

即开玩笑应该变成开玩笑，尾随应该变成尾随

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:27:06.740

```
$ echo "foo joking bar bazinger" | sed 's/ing\>//g'
foo jok bar bazinger 
```

`\>`是单词和非单词字符之间的边界。所以`bazinger`没有改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:32:25.343

```
sed 's/ing\>//f' 
```

以上匹配所有以 . 结尾的单词`ing`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:26:28.863

未经测试，但可能是这样的：

```
sed -i 's/ing//g' path/to/file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:26:30.183

```
sed -i 's/ing//g' your_file 
```

使用上面的命令

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T17:33:11.723

这可能对您有用（GNU sed）：

```
sed 's/\Bing\b//g' file 
```

或者

```
sed ' s/\([^ ]\)ing\>/\1/g' file 
```

# tsql - TSQL查询删除所有重复记录，但一个

> ID：12939893
> 
> 赞同：3
> 
> 时间：2012-10-17T17:24:56.003
> 
> 标签：tsql, duplicates, sybase, duplicate-removal

> **可能重复：**
> [删除 SQL Server 中的重复记录](https://stackoverflow.com/questions/3317433/delete-duplicate-records-in-sql-server)

我有一个表，其中唯一记录由复合键表示，例如 ( `COL_A`, `COL_B`)。

我已使用以下查询检查并确认我的表中有重复的行：

```
select COL_A, COL_B, COUNT(*)
from MY_TABLE
group by COL_A, COL_B
having count(*) > 1
order by count(*) desc 
```

现在，我想删除所有重复的记录，但只保留一个。

有人可以阐明如何用 2 列实现这一目标吗？

**编辑：** 假设表只有`COL_A`和`COL_B`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:54:44.850

**第一种解决方案**，它很灵活，因为您可以添加比`COL_A`and更多的列`COL_B`：

```
-- create table with identity filed
-- using idenity we can decide which row we can delete
create table MY_TABLE_COPY
(
  id int identity,
  COL_A varchar(30), 
  COL_B  varchar(30)
  /*
     other columns
  */
)
go
-- copy data
insert into MY_TABLE_COPY (COL_A,COL_B/*other columns*/)
select COL_A, COL_B /*other columns*/
from MY_TABLE
group by COL_A, COL_B
having count(*) > 1
-- delete data from  MY_TABLE
-- only duplicates (!)
delete MY_TABLE
from MY_TABLE_COPY c, MY_TABLE t
where c.COL_A=t.COL_A 
and c.COL_B=t.COL_B
go
-- copy data without duplicates
insert into MY_TABLE (COL_A, COL_B /*other columns*/)
select t.COL_A, t.COL_B /*other columns*/
from MY_TABLE_COPY t
where t.id = (
               select max(id) 
               from MY_TABLE_COPY c  
               where t.COL_A = c.COL_A
               and  t.COL_B = c.COL_B
             ) 
go 
```

**第二种解决方案** 如果您在 MY_TABLE 中确实有两列，则可以使用：

```
-- create table and copy data
select distinct COL_A, COL_B
into MY_TABLE_COPY
from MY_TABLE
-- delete data from  MY_TABLE 
-- only duplicates (!)
delete MY_TABLE
from MY_TABLE_COPY c, MY_TABLE t
where c.COL_A=t.COL_A 
and c.COL_B=t.COL_B
go
-- copy data without duplicates
insert into MY_TABLE
select t.COL_A, t.COL_B
from MY_TABLE_COPY t
go 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:36:26.263

尝试：

```
-- Copy Current Table
SELECT * INTO #MY_TABLE_COPY FROM MY_TABLE 

-- Delte all rows from current able
DELETE FROM MY_TABLE

-- Insert only unique values, removing your duplicates
INSERT INTO MY_TABLE
SELECT DISTINCT * FROM #MY_TABLE_COPY

-- Remove Temp Table
DROP TABLE #MY_TABLE_COPY 
```

只要您在从 MY_TABLE 中删除行时不破坏任何外键，这应该可以工作。

# java - Piccolo 可缩放界面，缩放时如何更改文本

> ID：12939896
> 
> 赞同：2
> 
> 时间：2012-10-17T17:25:04.330
> 
> 标签：java, piccolo

我正在尝试一些 Piccolo 来创建一个可缩放的界面。

我正在画布上创建一个矩形，上面有一些 PText。现在缩放时，我想将文本更改为不同的内容。

我在我的初始化中做到了这一点：

```
//
        //specify the current Piccolo PCanvas
        //
        m_canvas = getCanvas();
        m_canvas.removeInputEventListener(m_canvas.getPanEventHandler());
        //m_canvas.addInputEventListener(new ClickAndDragHandler(m_canvas));

        //
        //add nodes to the collection -> adding to the collection = adding to the canvas
        //
        m_nodecollection = new NodeCollection(m_canvas);

        RectangleNode node_links = new RectangleNode();
        node_links.setBounds(10, 10, 500, 500);
        m_nodecollection.addNode(node_links);

        RectangleNode node_rechts = new RectangleNode();
        node_rechts.setBounds(600,10,500,500);
        m_nodecollection.addNode(node_rechts);

        PImage node_arrowLeft = new PImage("left.gif");
        node_arrowLeft.setBounds(600, 550, node_arrowLeft.getWidth(), node_arrowLeft.getHeight());
        m_nodecollection.addNode(node_arrowLeft);

        PImage node_arrowRight = new PImage("right.gif");
        node_arrowRight.setBounds(680, 550, node_arrowRight.getWidth(), node_arrowRight.getHeight());
        m_nodecollection.addNode(node_arrowRight);

        m_nodecollection.connectNodesWithLine(node_rechts, node_arrowRight, true);
        m_nodecollection.connectNodesWithLine(node_rechts, node_arrowLeft, true);

        PText node_text = new PText("Zoomlevel Not Supported");
        node_text.setBounds(180,150, node_text.getWidth(), node_text.getHeight());
        m_nodecollection.connectNodesWithLine(node_links, node_text, true);
        m_nodecollection.addNode(node_text);
        node_links.addChild(node_text);
        node_links.setCollection(m_nodecollection); 
```

用整个 nodecollection 和 PText 作为成员变量创建了我自己的矩形类。

```
public class RectangleNode extends PNode{

    private Rectangle2D m_rectangle;
    private NodeCollection collection;
private PText text;

    public RectangleNode()
    {
        m_rectangle = new Rectangle2D.Double();
    }

    public Rectangle2D getRectangle()
    {
        if(m_rectangle == null)
            m_rectangle = new Rectangle2D.Double();
        return m_rectangle;
    }

    public boolean setBounds(double x, double y, double w, double h)
    {
        if(super.setBounds(x, y, w, h))
        {
            m_rectangle.setFrame(x, y, w, h);
            return true;
        }
        return false;
    }

    public void setCollection(NodeCollection collection)
    {
        this.collection = collection;
    }
        public void setText(PText text)
{
    this.text = text;
}
    public void paint(PPaintContext paintcontext)
    {
        Graphics2D g2 = paintcontext.getGraphics();

        //niet ingezoomd
        if(paintcontext.getScale() <= 0.2)
            g2.setPaint(Color.BLACK);

        //half ingezoomd
        if(paintcontext.getScale() > 0.2 && paintcontext.getScale() < 0.7)
        {

            g2.setPaint(Color.BLACK);

        }

        //volledig ingezoomd
        if(paintcontext.getScale() > 0.7)
        {
            g2.setPaint(Color.RED);
            g2.fill(getRectangle());
            g2.setPaint(Color.BLACK);
            g2.draw(getRectangle());
        }
    }
} 
```

现在，我想我可以像这样更改文本： text.setText("Tester"); 但它不起作用，例如 settext 然后将节点添加到集合中，然后它显示在当前文本上并出现巨大错误......

有人能帮助我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:38:30.673

考虑将整个示例发布为[SSCCE](http://sscce.org/)，看起来代码的某些部分丢失了。目前尚不清楚您是如何实际执行`setText`的。

组合现有节点并侦听从相机触发的事件可能更容易。考虑以下示例，该示例使用一些文本绘制一个矩形，该文本会根据缩放级别进行更新：

```
import java.awt.Color;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import edu.umd.cs.piccolo.PCamera;
import edu.umd.cs.piccolo.nodes.PPath;
import edu.umd.cs.piccolo.nodes.PText;
import edu.umd.cs.piccolo.util.PPaintContext;
import edu.umd.cs.piccolox.PFrame;

public class TestRectZoom extends PFrame {
    public TestRectZoom() {
        super("TestRectZoom", false, null);
    }

    public void initialize() {
        getCanvas().setInteractingRenderQuality(
                PPaintContext.HIGH_QUALITY_RENDERING);
        getCanvas().setDefaultRenderQuality(
                PPaintContext.HIGH_QUALITY_RENDERING);
        getCanvas().setAnimatingRenderQuality(
                PPaintContext.HIGH_QUALITY_RENDERING);

        final PPath rect = PPath.createRectangle(100, 100, 200, 200);
        rect.setPaint(Color.GREEN);
        getCanvas().getLayer().addChild(rect);

        final PText text = new PText(getZoomLevelString());
        rect.addChild(text);

        text.centerFullBoundsOnPoint(rect.getBounds().getCenterX(), rect
                .getBounds().getCenterY());

        getCanvas().getCamera().addPropertyChangeListener(
                PCamera.PROPERTY_VIEW_TRANSFORM, new PropertyChangeListener() {
                    public void propertyChange(final PropertyChangeEvent evt) {
                        text.setText(getZoomLevelString());

                        if (getCanvas().getCamera().getViewScale() > 0.9) {
                            rect.setPaint(Color.GREEN);
                        } else {
                            rect.setPaint(Color.RED);
                        }
                    }
                });
    }

    private String getZoomLevelString() {
        return "Zoom level:"
                + String.format("%.2f", getCanvas().getCamera().getViewScale());
    }

    public static void main(final String[] args) {
        new TestRectZoom();
    }
} 
```

结果是这样的：

![在此处输入图像描述](../Images/1d3c8b632e57c72d9ebe392e5e4840a8.png) ![在此处输入图像描述](../Images/37947e7ffa096d1a89897ce28cc1cc59.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T05:32:53.827

您正在寻找 Piccolo Patterns 页面上可用的语义缩放。模式 17：语义缩放

[http://www.piccolo2d.org/learn/patterns.html](http://www.piccolo2d.org/learn/patterns.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T08:56:59.517

我解决了 Aqua 建议的问题。

# python - 如何在 Python 中使用 getopt 传递灵活数量的参数？

> ID：12939897
> 
> 赞同：1
> 
> 时间：2012-10-17T17:25:04.927
> 
> 标签：python, getopt

我是 Python 新手，我从 getopt 学到的是，我可以在执行 python 脚本时传递命令行参数。现在我的问题是，有没有办法不设置我可以在命令行中传递的参数数量？

我的代码看起来像这样：

```
try:
     opts, args = getopt.getopt(sys.argv[1:],"h:1:2:3:4:",["help=", "1week=","2week=", "3week=", "4week="])
except getopt.GetoptError:
     print 'test.py -1 <week 1> -2 <week 2> -3 <week 3> -4 <week 4>'
     sys.exit(2)
for opt, arg in opts:
     if opt == '-h':
          print 'test.py -1 <week 1> -2 <week 2> -3 <week 3> -4 <week 4>'
          sys.exit()
     elif opt in ("-1", "--1week"):
          week1 = arg
     elif opt in ("-2", "--2week"):
          week2 = arg
     elif opt in ("-3", "--3week"):
          week3 = arg
     elif opt in ("-4", "--4week"):
          week4 = arg 
```

并运行我使用的上述代码 `python test.py -1 89 -2 88 -3 87 -4 86`。无论如何我可以修改这个，因为我不必总是给出 4 个参数，但也有 3 个？我希望它灵活，有时我可能会给出 3 个或 4 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:00:42.820

如果您的程序接受一个或多个周数：

```
from argparse import ArgumentParser

parser = ArgumentParser()
parser.add_argument('weeks', nargs='+', type=int, help='weeks numbers')
args = parser.parse_args()
print(args) 
```

### 例子

```
$ python your_script.py 1 2 3 
```

### 输出

```
Namespace(weeks=[1, 2, 3]) 
```

`'weekly_1_2_3'`从上面生产`args.weeks`：

```
result = 'weekly_' + '_'.join(map(str, args.weeks)) 
```

结果`'weekly_1_2_3_4'`用于`1 2 3 4`命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:38:31.340

请改用`argparse`(python 2.7)。默认情况下，所有选项都被认为是可选的。`argparse`包括`required`“必需选项”的属性。

例如：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--firstname', dest='fn', required=True)
parser.add_argument('--greeting', dest='grt', nargs='?', choices=['hello', 'goodbye'], default='hello')
parser.add_argument('--repeat', dest='rpt', nargs='?', default=1, type=int)
args = parser.parse_args()

for n in range(args.rpt):
    print "%d: %s, %s" % (n+1, args.grt, args.fn) 
```

# c# - 使用具有只读访问权限的第二个用户从 LDAP 检索用户组成员资格

> ID：12939902
> 
> 赞同：0
> 
> 时间：2012-10-17T17:25:40.830
> 
> 标签：c#, active-directory, ldap, directorysearcher

我有一个功能需要以对 AD LDAP 具有只读访问权限的查询用户身份登录 LDAP。

我能够查询和查找用户并枚举除 memberOf 之外的大多数用户属性。

这只发生在我以只读用户身份登录时。如果我以相关用户身份登录，则可以检索所有属性。任何人有任何想法我做错了什么？

```
DirectorySearcher search = new DirectorySearcher(entry);

search.Filter = "(sAMAccountName=" + loginName + ")";
search.PropertiesToLoad.Add("CN");
search.PropertiesToLoad.Add("memberOf");
search.PropertiesToLoad.Add("SN");
search.PropertiesToLoad.Add("givenName");
if (_Attributes != null)
{
    foreach (string attr in _Attributes)
    {
        search.PropertiesToLoad.Add(attr);
    }
}

SearchResult result = search.FindOne();

if (result == null)
    return null;

string usersName = "";
if (result.Properties.Count > 0)
{
    if (result.Properties.Contains("CN"))
    {
        attributes.Add("CN", result.Properties["CN"].Cast<string>().ToList());
        usersName = result.Properties["CN"].Cast<string>().FirstOrDefault();
    }
    if (result.Properties.Contains("SN"))
    {
        attributes.Add("SN", result.Properties["SN"].Cast<string>().ToList());
    }
    if (result.Properties.Contains("givenName"))
    {
        attributes.Add("givenName",     result.Properties["givenName"].Cast<string>.ToList());
    }
    if (result.Properties.Contains("memberOf"))
        ad_MemberOf = result.Properties["memberOf"].Cast<string>().ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:51:44.203

这是一项安全功能。如果您没有启用“Pre-Windows 2000 Compatible Access”，则对该属性的访问受到限制。

如果您在域的根级别正确启用此功能，您应该可以访问所有用户帐户的所有“memberOf”属性，以及当您没有正确的访问权限时受到限制的一些其他属性。

或者，您可以添加权限以访问与作为“Pre-Windows 2000 Compatible Access”机制的一部分提供的属性相对应的特定属性。

如果我没看错，您需要添加的权限是：

```
'List Contents', 'Read All Properties' and 'Read Permissions' 
```

# ruby-on-rails-3 - 允许用户从 S3 存储下载文件

> ID：12939903
> 
> 赞同：16
> 
> 时间：2012-10-17T17:25:42.417
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

现在我正在使用 Amazon S3 和 Paperclip，它允许我的用户上传与他们正在创建的事件相关联的图像。我的最终目标是因为其他人可以查看此事件，因此能够单击图像并让它提示保存到他们的计算机。截至目前，单击该链接将在浏览器窗口中打开该图像。我宁愿让它要求他们下载。所有图像仅保存在 S3 上，而非本地。如果可能，还需要隐藏暴露的 s3 url 或伪装它

这是我目前的设置

**索引.html**

```
<%= link_to 'Download Creative', event.creative.url, class: "btn btn-info" %> 
```

**事件.rb**

```
has_attached_file :creative,
                :styles => { :thumb => "150x150", :custcreative => "250x75" },
                :path => ":attachment/:id/:style.:extension",
                :s3_domain_url => "******.s3.amazonaws.com",
                :storage => :s3,
                :s3_credentials => Rails.root.join("config/s3.yml"),
                :bucket => '*****',
                :s3_permissions => :public_read,
                :s3_protocol => "http",
                :convert_options => { :all => "-auto-orient" },
                :encode => 'utf8' 
```

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-07T18:32:14.630

为了避免给您的应用程序带来额外的负载（在 Heroku 中节省 dyno 的时间），我宁愿做这样的事情：将此方法添加到您的模型中，并附上附件：

```
def download_url(style_name=:original)
  creative.s3_bucket.objects[creative.s3_object(style_name).key].url_for(:read,
      :secure => true,
      :expires => 24*3600,  # 24 hours
      :response_content_disposition => "attachment; filename='#{creative_file_name}'").to_s
end 
```

然后在您的视图/控制器中使用它，如下所示：

```
<%= link_to 'Download Creative', event.download_url, class: "btn btn-info" %> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-21T11:32:25.903

为了使这项工作，我刚刚在控制器中添加了一个新动作，所以在你的情况下它可能是：

```
#routes
resources :events do
  member { get :download }
end

#index
<%= link_to 'Download Creative', download_event_path(event), class: "btn btn-info" %>

#events_controller
def download
  data = open(event.creative_url)
  send_data data.read, :type => data.content_type, :x_sendfile => true
end 
```

编辑：下载控制器操作的正确解决方案可以在这里找到（我已经更新了上面的代码）：[强制链接下载 MP3 而不是播放它？](https://stackoverflow.com/questions/5988818/force-a-link-to-download-an-mp3-rather-than-play-it)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-31T09:42:25.103

现在在 aws-sdk v2 中，在 Aws::S3::Object 中定义了一个 :presigned_url 方法，您可以使用此方法构造 s3 对象的直接下载 url：

```
s3 = Aws::S3::Resource.new
# YOUR-OBJECT-KEY should be the relative path of the object like 'uploads/user/logo/123/pic.png'
obj = s3.bucket('YOUR-BUCKET-NAME').object('YOUR-OBJECT-KEY')
url = obj.presigned_url(:get, expires_in: 3600, response_content_disposition: "attachment; filename='FILENAME'") 
```

然后在您看来，只需使用：

```
= link_to 'download', url 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T16:27:19.133

```
event = Event.find(params[:id])
  data = open(event.creative.url)
  send_data data.read, :type => data.content_type, :x_sendfile => true, :url_based_filename => true
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T07:20:02.790

您需要在 HTTP 响应标头中将“ **Content-Disposition** ”设置为“**附件**”。我不是 Rails 开发人员 - 所以只要谷歌一下，你会看到很多例子 - 但它可能看起来像这样：

```
 :content_disposition => "attachment" 
```

或者

```
 ...
    :disposition => "attachment" 
```

# c# - 开发环境 DistributedCache.RoutingClient 错误

> ID：12939907
> 
> 赞同：5
> 
> 时间：2012-10-17T17:25:51.013
> 
> 标签：c#, azure

我的开发环境中似乎经常出现一个问题。

```
iisexpress.exe Error: 0 : ERROR: <DistributedCache.RoutingClient> e4600bc4-bf61-47d7-afb6-cc265b30ff07:SendMsgAndWait: Request TimedOut, msgId = 527
iisexpress.exe Error: 0 : ERROR: <DistributedCache.RoutingClient> 493e6310-08db-48d0-bc38-767ad14d7dce:SendMsgAndWait: Request TimedOut, msgId = 528
iisexpress.exe Error: 0 : ERROR: <DistributedCache.RoutingClient> 9a9613c0-4459-45b8-8986-ff0a779f532f:SendMsgAndWait: Request TimedOut, msgId = 536
iisexpress.exe Error: 0 : ERROR: <DistributedCache.RoutingClient> 0732f7e8-58b5-4ab1-b506-e65b138e296d:SendMsgAndWait: Request TimedOut, msgId = 535 
```

是出现在我的 Visual Studio 2012 调试中的消息吗？会发生什么是我对 ASP.Net Webform 的测试将在此错误发生时停止，并且短期修复我中断调试并重新进入调试。搜索这种类型的错误并没有产生任何成功的结果和/或修复，一些见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T19:44:43.340

我做了自己的搜索，发现了那些相关的论坛帖子：

*   [调试时的 Windows Azure 缓存 - 请求超时](http://social.msdn.microsoft.com/Forums/en-US/262681e4-7922-4d24-950a-ba0cac50994f/windows-azure-caching-while-debugging-request-timeout?forum=windowsazuredata)。
*   [调试时：错误：`<DistributedCache.RoutingClient>`SendMsgAndWait：请求超时](http://social.msdn.microsoft.com/Forums/en-US/47a384df-f464-44a3-91ec-d929008112b2/while-debugging-error-distributedcacheroutingclient-sendmsgandwait-request-timedout?forum=windowsazuredata)

您正在使用 WebForm，虽然这些是 Azure 中的解决方案，但它们应该可以帮助您找到解决方案。

此外，请确保您使用的是计算机缓存。

这是 AppFabric 缓存的链接：[http ://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx](http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx)

希望这可以帮助！

# php - 使用 php 从 Joomla 中的文章中获取图像

> ID：12939909
> 
> 赞同：2
> 
> 时间：2012-10-17T17:25:56.140
> 
> 标签：php, joomla, facebook-opengraph, preg-match-all

我正在尝试编辑一个插件，用于将元打开图形标签添加到标题中。它的问题是它只会让我为整个网站选择一张图片。这就是我所做的：

```
preg_match_all('/<img .*?(?=src)src=\"([^\"]+)\"/si', $hdog_base, $image);

if (strlen($hdog_base) <= 25) 
{
    if (substr($image[0], 0, 4) != 'http') 
    {
        $image[0] = JURI::base().$image[0]; 
    }
    $hdog_image_tmp = $image[0];
}
else
{
    if (substr($image[1], 0, 4) != 'http') 
    {
        $image[1] = JURI::base().$image[1]; 
    }
    $hdog_image_tmp = $image[1];
}
$hdog_image =   '<meta property="og:image" content="'.$hdog_image_tmp.'" />
'; 
```

$hdog_base 是我当前所在的网页。第一个 if 语句将显示第一张图片，即徽标（用于例如主页），else 将显示第二张图片（在每个页面上会有所不同），但结果只会像这样，无论我是在主页上还是网站上的其他任何地方：

```
<meta property="og:image" content="http://mysite.com/Array" /> 
```

有什么建议么？

提前致谢，

更新：我犯的最大错误是我试图在 url 中找到图像，而不是实际的网页。但只是链接。那么我将如何继续以字符串形式获取当前页面的内容？而不是 $hdog_base，它只是一个链接。

**更新，已解决：**

我用了

```
$buffer = JResponse::getBody(); 
```

以 HTML 格式获取网页

然后是 DOM 其余部分

```
$doc = new DOMDocument();
@$doc->loadHTML($buffer);

$images = $doc->getElementsByTagName('img');
if (strlen($hdog_base) <= 26) 
{
    $image = $images->item(0)->getAttribute('src');
} 
else 
{
    $image = $images->item(1)->getAttribute('src');
}
if (substr($image, 0, 4) != 'http') $image = JURI::base().$image;
$hdog_image =   '<meta property="og:image" content="'.$image.'" />
'; 
```

非常感谢**cpilko**的帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:52:58.163

在正则表达式中使用`preg_match_all`多个子模式将返回一个多维数组。在您的代码`$image[n]`中是一个数组。如果您在 php 中将数组转换为字符串，那么它会返回 text `Array`。

**编辑：**使用正则表达式解析 HTML 并不理想。你最好这样做`DOMDocument`：

```
$doc = new DOMDocument();
@$doc->loadHTML($hdog_base);

$images = $doc->getElementsByTagName('img');
if (strlen($hdog_base) <= 25) {
    $image = $images->item(0)->getAttribute('src');
} else {
    $image = $images->item(1)->getAttribute('src');
}
if (substr($image[0], 0, 4) != 'http') $image .= JURI::base();
$hdog_image =   '<meta property="og:image" content="'.$hdog_image_tmp.'" />
'; 
```

# objective-c - 在给定值的字典数组中查找元素

> ID：12939918
> 
> 赞同：1
> 
> 时间：2012-10-17T17:26:24.550
> 
> 标签：objective-c, ios

我有两个 NSArray 变量，然后每个变量都有一个类似的 NSDictionary 里面。

对于给定的行（indexPath.row）：

```
 NSArray* array1 = ...;
 NSDictionary* item = [array1 objectAtIndex:indexPath.row];
 int myid = [[item valueForKey:@"id"] intValue];
 // id = 5 
```

现在我需要在array2中找到id = 5的元素，但是因为我是ac#开发人员，我觉得用for来做这件事有点奇怪。

有没有 for 的替代品？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T17:36:31.493

`NSArray`有一个`indexOfObjectPassingTest`可以使用的方法：

```
NSArray *array2 = ...;
int searchId = ...;
NSUInteger index2 = [array2 indexOfObjectPassingTest:^BOOL(NSDictionary *item, NSUInteger idx, BOOL *stop) {
    BOOL found = [[item objectForKey:@"id"] intValue] == searchId;
    return found;
}];

if (index2 != NSNotFound) {
    // First matching item at index2.
} else {
    // No matching item found.
} 
```

这将返回第一个匹配索引。如果您需要所有匹配的索引，请使用`indexesOfObjectsPassingTest`.

# database - LevelDB 是否支持热备份（或等效）？

> ID：12939927
> 
> 赞同：7
> 
> 时间：2012-10-17T17:27:08.613
> 
> 标签：database, leveldb

目前，我们正在评估几个键+值数据存储，以替换 owr 主应用程序当前正在使用的较旧的 isam（20 多年！）...

问题是我们当前的 isam 不支持崩溃恢复。

所以 LevelDB 对我们来说似乎没问题（也检查 BerkleyDB 等）

但是我们遇到了热备份的问题，而且，鉴于 LevelDB 是一个库，而不是服务器，要求“热备份”很奇怪，因为它直观地暗示了一个外部备份过程。

也许有人想提出选择（或已知的解决方案）？

例如： - 通过主应用程序的内线程进行热备份？- 仅通过复制 LevelDB 数据目录进行热备份？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-11T01:02:44.643

您可以通过 LevelDB 进行快照迭代，这可能是制作热副本的最佳方式（不要忘记关闭迭代器）。

为了通过文件系统备份 LevelDB，我之前使用了一个脚本，该脚本创建到所有 .sst 文件（一旦写入就不可变）的硬链接，以及日志（以及 MANIFEST、CURRENT 等）文件的正常副本到备份目录在同一个分区。这很快，因为与 .sst 文件相比，日志文件很小。

备份运行时必须关闭数据库（由应用程序），但所花费的时间显然比将整个数据库复制到不同分区或上传到 S3 等所花费的时间要少得多。这可以在应用程序重新打开数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T14:33:41.147

LMDB 是一个嵌入式键值存储，但与 LevelDB 不同的是，它支持多进程并发，因此您可以使用外部备份进程。mdb_copy 实用程序将对数据库进行原子热备份，您的应用程序在备份运行时无需停止或执行任何特殊操作。[http://symas.com/mdb/](http://symas.com/mdb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-10T17:24:55.520

我回答这个问题有点晚了，但是 LevelDB 的一些分支提供了良好的实时备份功能，例如 HyperLevelDB 和 RocksDB。这两个都可以作为 npm 模块使用，即 level-hyper 和 level-rocksdb。有关更多讨论，请参阅[如何备份 RocksDB？](https://github.com/facebook/rocksdb/wiki/How-to-backup-RocksDB%3F)和[HyperDex 问题](https://github.com/Level/level-hyper/issues/1)。

# html - 使链接打开一个新窗口（不是选项卡）

> ID：12939928
> 
> 赞同：158
> 
> 时间：2012-10-17T17:27:11.127
> 
> 标签：html

有没有办法让链接在不使用 javascript 的情况下打开一个新的浏览器窗口（不是选项卡）？

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-04-02T14:07:09.167

这将打开一个新窗口，而不是选项卡（使用 JavaScript，但非常简洁）：

```
<a href="print.html"  
    onclick="window.open('print.html', 
                         'newwindow', 
                         'width=300,height=250'); 
              return false;"
 >Print</a> 
```

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2012-10-17T17:29:07.753

**使用纯 HTML**，您无法影响这一点 - 每个现代浏览器（= 用户）都可以完全控制这种行为，因为它在过去被滥用了很多......

### HTML 选项

您可以打开一个新窗口 (HTML4) 或一个新的浏览上下文 (HTML5)。现代浏览器中的浏览上下文主要是“新标签”而不是“新窗口”。你对此没有影响，你不能“强制”现代浏览器打开一个新窗口。

为此，请使用[锚元素](https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element)的属性`target`^([1])。您正在寻找的价值是`_blank`^([2])。

```
<a href="www.example.com/example.html" target="_blank">link text</a> 
```

### JavaScript 选项

可以通过 javascript 强制一个新窗口 - 请参阅[下面的 Ievgen 的优秀答案](/a/15766254/1047823)以获取 javascript 解决方案。

*（！）但是，请注意，通过 javascript 打开窗口（如果未在锚元素的 onclick 事件中完成）会被弹出窗口阻止程序阻止！*

[[1] 这个属性可以追溯到浏览器没有选项卡并且使用框架集是最先进的时代。同时，此属性的功能略有改变（参见[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-target)）]

[[2] 还有一些其他值不再有意义（因为它们在设计时考虑了框架集），例如`_parent`,`_self`或`_top`.]

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2014-04-09T12:39:17.247

我知道它有点旧 Q 但如果你通过搜索解决方案到达这里，那么我通过 jquery 得到了一个不错的

```
 jQuery('a[target^="_new"]').click(function() {
    var width = window.innerWidth * 0.66 ;
    // define the height in
    var height = width * window.innerHeight / window.innerWidth ;
    // Ratio the hight to the width as the user screen ratio
    window.open(this.href , 'newwindow', 'width=' + width + ', height=' + height + ', top=' + ((window.innerHeight - height) / 2) + ', left=' + ((window.innerWidth - width) / 2));

}); 
```

它将`<a target="_new">`在新窗口中打开所有

**编辑：**

1，我对原始代码做了一些小改动，现在它完全按照用户屏幕比例打开新窗口（对于横向桌面）

*但是，如果您使用移动设备*，我建议您使用以下代码在新选项卡中打开链接（感谢[zvona 在其他问题中的回答](https://stackoverflow.com/a/8833025)）：

```
jQuery('a[target^="_new"]').click(function() {
    return openWindow(this.href);
}

function openWindow(url) {

    if (window.innerWidth <= 640) {
        // if width is smaller then 640px, create a temporary a elm that will open the link in new tab
        var a = document.createElement('a');
        a.setAttribute("href", url);
        a.setAttribute("target", "_blank");

        var dispatch = document.createEvent("HTMLEvents");
        dispatch.initEvent("click", true, true);

        a.dispatchEvent(dispatch);
    }
    else {
        var width = window.innerWidth * 0.66 ;
        // define the height in
        var height = width * window.innerHeight / window.innerWidth ;
        // Ratio the hight to the width as the user screen ratio
        window.open(url , 'newwindow', 'width=' + width + ', height=' + height + ', top=' + ((window.innerHeight - height) / 2) + ', left=' + ((window.innerWidth - width) / 2));
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T17:30:43.620

你可以试试这个： -

```
 <a href="some.htm" target="_blank">Link Text</a> 
```

你也可以试试这个：-

```
 <a href="some.htm" onclick="if(!event.ctrlKey&&!window.opera){alert('Hold the Ctrl Key');return false;}else{return true;}" target="_blank">Link Text</a> 
```

# scala - scala中的类型参数定义

> ID：12939937
> 
> 赞同：7
> 
> 时间：2012-10-17T17:27:32.803
> 
> 标签：scala, scalaz

> **可能重复：**
> [Scala 中的 lambda 类型是什么，它们有什么好处？](https://stackoverflow.com/questions/8736164/what-are-type-lambdas-in-scala-and-what-are-their-benefits)

1.  如何解决此类型定义：`Pure[({type ?[a]=(R, a)})#?]`？

2.  使用这种结构的原因是什么？

Snipped 来自 scalaz 库：

```
trait Pure[P[_]] {
  def pure[A](a: => A): P[A]
}

object Pure {
  import Scalaz._
//...
  implicit def Tuple2Pure[R: Zero]: Pure[({type ?[a]=(R, a)})#?] = new Pure[({type ?[a]=(R, a)})#?] {
  def pure[A](a: => A) = (Ø, a)
  }

//...
} 
```

# jquery - JQuery按ID删除LI元素

> ID：12939939
> 
> 赞同：1
> 
> 时间：2012-10-17T17:27:36.550
> 
> 标签：jquery

我的小提琴链接是

[http://jsfiddle.net/tBYdu/18/](http://jsfiddle.net/tBYdu/18/)

而且我不明白为什么当我推送`button`它时会删除所有关注`<li>`而不是仅删除选定`<li>`的 by `ID`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:30:26.687

问题是您将每个点击功能附加到*所有*按钮。通过使用选择器`$('button')`，您可以选择每个按钮来附加您的点击处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:30:06.237

您正在使用按钮重复绑定事件，这就是删除所有按钮的原因。你需要`bind the event once`。`$('button').click will bind the event to all button types`. 您不需要像以前那样重复它。

对所有按钮尝试这样的事情，

**[现场演示](http://jsfiddle.net/rajaadil/B76JR/1/)**

```
$('button').click(function () {
  $(this).closest('li').remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:30:47.457

发生这种情况是因为您将`click`事件附加到页面上的所有按钮。每个新的事件绑定都会将新的处理程序附加到现有的处理程序上。因此，最终浏览器会读取您的代码，就像它是按以下方式编写的一样：

```
$('button').click(function() {
    $('#16').remove();
    $('#17').remove();
    $('#19').remove();
    $('#23').remove();
    $('#25').remove();
});​ 
```

...意思是，当您单击`<button>`页面上的任何元素时，所有 ID为`16`、`17`、和的元素都将被删除。`19``23``25`

另一种方法是使用以下一次`$(document).ready(function() { ... })`：

```
$('button').click(function() {
    $(this).closest('li').remove();
});​ 
```

**演示：http:** [//jsfiddle.net/tBYdu/34/](http://jsfiddle.net/tBYdu/34/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:31:51.420

每当您单击其中一个按钮时，都会触发所有脚本，因为您的选择器只是元素“按钮”。尝试为每个按钮分配一个 ID 并使用该 ID 触发正确的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T17:31:52.603

当您绑定事件时，它将找到 DOM 具有的所有当前元素，因此您的某些按钮将具有多次单击事件。

如果要删除按钮父级，则：

```
$('li button').click(function () {
  $(this).parent().remove();
}); 
```

或使用`.closest("li")`代替`.parent()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T17:32:10.183

试试看：http: [//jsfiddle.net/tBYdu/30/](http://jsfiddle.net/tBYdu/30/)

```
$('button').click(function() {
    $(this).closest('li').remove();        
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T17:32:27.890

发生这种情况是因为您将点击处理程序应用于所有按钮..

`$('button')`将应用于 html 中存在的所有按钮。

试一试

```
$('ul').on('click','button', function(){
   $(this).closest('li').remove();
}); 
```

演示在[http://jsfiddle.net/tBYdu/29/](http://jsfiddle.net/tBYdu/29/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-17T17:33:07.963

修改您的选择器和处理函数，如下所示，

```
$('#4 button').click (function () { 
    $(this).parent().remove();
}); 
```

`#4`身份证在哪里`UL`

**演示：http:** [//jsfiddle.net/tBYdu/33/](http://jsfiddle.net/tBYdu/33/)

# android - 在游戏 LibGDX 中旋转对象

> ID：12939942
> 
> 赞同：1
> 
> 时间：2012-10-17T17:27:50.763
> 
> 标签：android, rotation, libgdx, 2d-games

我正在使用 LibGDX 为 Android 开发游戏。我必须在游戏中需要旋转的对象。对象是板和管。我遇到的问题是，管件由三件组成，中心件和末端件。管和板可以拉伸。因为它们可以拉伸，所以末端必须是单独的图形，这样它们就不会因拉伸而变形。我很难弄清楚如何正确地做到这一点。从 Box2D 主体中检索位置和旋转。

这是对象构建后的样子：

[带端盖的管件 http://weaverhastings.com/tube.png](http://weaverhastings.com/tube.png)

这是结尾部分：

[管端盖 http://weaverhastings.com/tube_endpiece.png](http://weaverhastings.com/tube_endpiece.png)

这是中间的部分：

[管子的中间部分 http://weaverhastings.com/tube_middle.png](http://weaverhastings.com/tube_middle.png)

看它，似乎问题出在根源上。随着物体被拉伸，末端部件的旋转原点需要改变。但我无法弄清楚如何正确计算该原点。

这是我现在正在使用的代码：

```
// Right border
batch.draw(border,                     // AtlasRegion for the border
           position.x,                 // The position as reported from box2d body
           position.y,                 
           25 + 150 * scale.x,         //  25 is 2 x the end piece width, 150 is the width of the middle piece, it is multiplied by the scale because it can be stretched.
           height/2,                   // This is just the height of the tube piece
           border.getRegionWidth(),    // the is the width of the border
           height,                     
           0.6f,                       // The scale of the borders is fixed
           0.8f,                                    
           rotation * MathUtils.radiansToDegrees); // the rotation as retrieved from box2d body

// Left border  
batch.draw(border,
           position.x,
           position.y,
           25 - 150 * scale.x,
           height/2,
           border.getRegionWidth(),
           height,
           0.6f,
           0.8f,
           rotation * MathUtils.radiansToDegrees); 
```

可以在此处看到管件旋转的视频：http: [//youtu.be/RusL4Mnitds](http://youtu.be/RusL4Mnitds)

任何帮助将不胜感激。谢谢你读到这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:16:55.300

在 Libgdx 中，旋转的原点是相对于对象位置的，例如，您告诉它要绘制的位置。

因此，对于左边框，您需要说 originX 将是中心部分宽度的一半`(middlePiece.width/2)`或其他任何内容，而对于右部分，originX 将需要为负这个值`(-middlePiece.width/2)`。当不旋转时，它们的位置当然需要位于中心部件的末端。他们每个人的 OriginY 将是中心部分高​​度的一半。`(middlePiece.height/2)`

希望这可以帮助

# java - eclipse egit 无法连接到远程存储库

> ID：12939944
> 
> 赞同：3
> 
> 时间：2012-10-17T17:27:55.987
> 
> 标签：java, eclipse, git, import

我正在运行Win7。我已经在 Eclipse Juno 上安装了 egit 插件。我正在尝试从远程 git 存储库导入，但几秒钟后我收到此错误：

***“ssh://user@host/repository_path:java.net.ConnectException：连接超时：连接 ssh://user@host/repository_path:java.net.ConnectException：连接超时：连接***

***请检查：***

*   ***网络连接设置***
****   网络连接->SS2 Eclipse 首选项”。***

我已经创建了一对公钥（2048 位）-私钥（服务器管理员已将其验证为有效密钥）。

我已将这些密钥存储在 Eclipse 首选项*(->general->network connections->ss2)中指定的**“SS2 home”*目录中。

 *当此操作失败时，我尝试从*密钥管理*手动加载这些密钥，但出现错误***“无法加载给定文件”***。我什至尝试删除私钥密码，以便将其加载到 Eclipse 并通过“密钥管理”将其更改回原始密码，但不幸的是，这也失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:28:04.893

在同一屏幕 SSH2 Preferences 中，您是否通过单击 Add Private Key 添加了新生成的密钥？*

# facebook - 通过 Facebook 的 Open Graph API 上传的照片未在时间轴缩略图中居中

> ID：12939945
> 
> 赞同：0
> 
> 时间：2012-10-17T17:27:59.560
> 
> 标签：facebook, facebook-graph-api

当我通过 Open Graph API (POST /me/photos) 上传照片 (810x694) 时，Facebook 没有正确地将时间轴照片缩略图居中。但是，当我手动将照片附加为状态更新时，时间轴照片缩略图会正确居中。是否有针对此的请求参数、修复或解决方法？

**通过 OG API 上传**
![通过 OG API 上传的照片](../Images/c2554fd204ffcf6e480593ac299e13ea.png)
**的照片： 作为状态更新发布的照片​​：**
![作为状态更新发布的照片](../Images/25a1c30a772b89d8b1ee313f0c43d568.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:49:00.543

完全忽略了这一点，问题与照片中标记的朋友有关。我将标签位置更改为中心/50% 以解决问题。

# xna-4.0 - 从 3.1 转换到 4.0... 游戏状态

> ID：12939950
> 
> 赞同：0
> 
> 时间：2012-10-17T17:28:17.407
> 
> 标签：xna-4.0

我正在重新开始开发我正在开发的游戏，并已使用备忘单成功地将其转换为 XNA 4.0。大部分有效，有些无效，我正在修复无效的部分。

我拥有的一件事是一个状态系统，它在很大程度上基于用作 XNA Unleashed 电子书示例的状态系统。我没有太多东西......基本上只是暂停游戏的能力。

当我暂停游戏时，游戏的动作会停止，“PAUSED”一词会以大写字母出现在屏幕上，你会看到暂停的动作。但是，现在看来精灵批处理会自动清除帧之间的所有内容，因此当我现在暂停游戏时，屏幕会清除，将 PAUSED 留在紫色背景上。那时，我相信添加“SaveStateMode.SaveState”会阻止这种情况发生，但该功能已被删除。当我做一些研究时，我发现它被删除了，因为它本质上是无用的，这一切都在游戏状态管理器中处理。

但是，我找不到任何关于此的文档。我应该从哪里开始？现在，我的代码如下所示：

在 Playing Game State 更新方法中：

```
 if (input.WasPressed(0, Buttons.Start, Keys.Enter))
    {
        GameManager.PushState((GameState)ThisGame.PausedGameState.Value);
    }

    public void PushState(GameState newState)
    {

        AddState(newState);

        //Let everyone know we just changed states
        if (OnStateChange != null)
        {
            OnStateChange(this, null);
        }
    }

    private void AddState(GameState state)
    {
        states.Push(state);

        Game.Components.Add(state);

        //Register the event for this state
        OnStateChange += state.StateChanged;
    }

//PausedGameState Draw method:

    public override void Draw(GameTime gameTime)
    {
        ThisGame.SpriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, null, null, null, null);
        DrawPaused();  //draws the Paused Text
        ThisGame.SpriteBatch.End();
    } 
```

目标是让“PAUSED”出现在屏幕上，并带有游戏停止位置的快照……而不是“PAUSED”出现在清除的紫色屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:34:11.323

您是否认为 GraphicsDevice.Clear() 在状态更改为暂停后以某种方式被调用？DrawPaused() 方法在您的代码中做了什么？

# xcode - 自动转换为 ARC 时是否可以跳过某些文件？

> ID：12939956
> 
> 赞同：3
> 
> 时间：2012-10-17T17:28:31.110
> 
> 标签：xcode, automatic-ref-counting

我正在将我的 iOS 项目转换为 ARC（大约是时间，对吗？），但我在使用该`Convert to Objective-C ARC`工具时遇到了一些问题。

我已经完成了整个项目并删除了任何 ARC 非法调用（即 、`release`、`autorelease`等`retain`）。但是，有几个文件——所有第三方文件——我不想更新到 ARC。在我的目标构建阶段，我已将标志添加`-fno-objc-arc`到每个文件中，但是当我运行该`Convert to Objective-C ARC`工具时，它继续告诉我需要更新这些文件。

`Convert to Objective-C ARC`是否可以在将特定文件保留为非 ARC 的同时使用该工具？

如果没有，是否有手动将项目转换为 ARC 的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:33:53.303

您必须取消选中 ARC 转换工具对话框中的文件：

![在此处输入图像描述](../Images/c4e9c426d4c1c185b7cf5baaecc48e00.png)

# c# - MonoTouch：OwnerDrawnElement：更改选定对象上的 Draw() 以使其闪烁？

> ID：12939957
> 
> 赞同：0
> 
> 时间：2012-10-17T17:28:38.350
> 
> 标签：c#, ios, mono, xamarin.ios, monotouch.dialog

**MonoTouch.Dialog：**

使用自定义**OwnerDrawnElement**，我使用自定义**Draw()创建****元素**

 **选择元素时会触发 Draw()。

如何判断 Draw() 是否由于用户**选择**它而被触发，以便我可以更改 UI 以指示**Select**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:03:22.120

在自定义**OwnerDrawnElement**的这个方法中，检查 Highlighted 状态：

```
public override void Draw (RectangleF bounds, CGContext context, UIView view)
{
    bool highlighted = this.GetActiveCell().Highlighted;
    if(highlighted) ....
} 
```**

# java - ImmutableSortedSet 的反转视图

> ID：12939961
> 
> 赞同：0
> 
> 时间：2012-10-17T17:29:00.190
> 
> 标签：java, set, guava, immutability

Guava`ImmutableSortedSet`很好地提供了排序和不变性。

我正在寻找的是这样一个集合的简单实用方法，它可以让我以相反的顺序访问元素，类似于`Lists.reverse(List)`.

我也看过，`Sets`但`Collections2`无济于事。我自己可以很容易地写一个，但这听起来像是番石榴中存在的一个合乎逻辑的特性。或者也许存在这样的方法，但我只是瞎了眼？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T19:07:31.267

[`ImmutableSortedSet.descendingSet()`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableSortedSet.html#descendingSet--)返回一个`ImmutableSortedSet`按降序排列的视图，就像任何其他 NavigableSet 一样。

或者，如果您想`ImmutableSortedSet`从头开始创建降序，请使用由`ImmutableSortedSet.reverseOrder()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T17:36:11.493

根据 Guava 文档，ImmutableSortedSet 有一个静态方法`reverseOrder`，应该做你想做的事...... [Guava JavaDoc](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableSortedSet.html#reverseOrder%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:01:50.743

它会给你一个列表，不是一组，而是

```
set.asList().reverse() 
```

会成功的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T17:35:27.610

尝试

```
TreeSet(Comparator<? super E> comparator) 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#TreeSet(java.util.Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#TreeSet(java.util.Comparator) )

# scheme - 方案表达

> ID：12939971
> 
> 赞同：0
> 
> 时间：2012-10-17T17:29:31.107
> 
> 标签：scheme

如果您为我解释这个问题，我将不胜感激。我一直在思考它很长一段时间，但无法弄清楚。我是一名自学者，这是来自 MIT's icampustutor 网站的练习。

指出以下每个表达式的类型。使用符号“->”表示“映射到”，例如，过程 square 的类型为“number->number”。使用以下术语来描述数据的原始类型：数字、布尔值、字符串。

```
1-(> 3 4) 
2-((lambda (x) (* x 2)) 4)
3-(lambda (a b) (+ a (if b 1 0))) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:35:08.857

得到帮助：

```
Welcome to DrRacket, version ...
> (> 3 4)
#f
> ((lambda (x) (* x 2)) 4)
8
> (lambda (a b) (+ a (if b 1 0)))
#<procedure> 
```

第一个表达式的类型是布尔值，第二个表达式的类型是数字，最后一个表达式的类型是过程。

要查看程序的类型，请问您自己 a 和 b 的类型必须是什么。

<a 的类型> <b 的类型> -> <(+ ...) 的类型>

因为 + 总是返回一个数字，所以返回类型必须是一个数字。

<a 的类型> <b 的类型> -> 数字

现在填写a和b的类型。

# python - 如何在 Python 中列出所有已安装的包及其版本？

> ID：12939975
> 
> 赞同：155
> 
> 时间：2012-10-17T17:29:49.207
> 
> 标签：python, installation, packages

Python中有没有办法列出所有已安装的包及其版本？

我知道我可以进去`python/Lib/site-packages`看看存在哪些文件和目录，但我觉得这很尴尬。我正在寻找类似于`npm list`ie [npm-ls](https://docs.npmjs.com/cli/ls)的东西。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-10-17T17:31:30.653

如果你有 pip install 并且你想看看你的安装工具安装了哪些软件包，你可以简单地调用它：

```
pip freeze 
```

它还将包括已安装软件包的版本号。

**更新**

pip 已更新为也产生与`pip freeze`调用相同的输出：

```
pip list 
```

**笔记**

from 的输出`pip list`格式不同，因此如果您有一些 shell 脚本可以解析的输出（可能是为了获取版本号）`freeze`并且想要将脚本更改为 call `list`，则需要更改解析代码。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-10-17T17:31:21.150

`help('modules')`应该为你做。

在 IPython 中：

```
In [1]: import                      #import press-TAB
Display all 631 possibilities? (y or n)
ANSI                   audiodev               markupbase
AptUrl                 audioop                markupsafe
ArgImagePlugin         avahi                  marshal
BaseHTTPServer         axi                    math
Bastion                base64                 md5
BdfFontFile            bdb                    mhlib
BmpImagePlugin         binascii               mimetools
BufrStubImagePlugin    binhex                 mimetypes
CDDB                   bisect                 mimify
CDROM                  bonobo                 mmap
CGIHTTPServer          brlapi                 mmkeys
Canvas                 bsddb                  modulefinder
CommandNotFound        butterfly              multifile
ConfigParser           bz2                    multiprocessing
ContainerIO            cPickle                musicbrainz2
Cookie                 cProfile               mutagen
Crypto                 cStringIO              mutex
CurImagePlugin         cairo                  mx
DLFCN                  calendar               netrc
DcxImagePlugin         cdrom                  new
Dialog                 cgi                    nis
DiscID                 cgitb                  nntplib
DistUpgrade            checkbox               ntpath 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-10-31T22:42:20.590

如果您想获取有关已安装的 python 发行版的信息并且不想使用您的 cmd 控制台或终端，而是通过 python 代码，您可以使用以下代码（使用 python 3.4 测试）：

```
import pip #needed to use the pip functions
for i in pip.get_installed_distributions(local_only=True):
    print(i) 
```

函数调用返回一个可迭代对象，`pip.get_installed_distributions(local_only=True)`并且由于 for 循环和打印函数，可迭代对象中包含的元素被打印出来，并由换行符 ( `\n`) 分隔。结果将（取决于您安装的发行版）如下所示：

```
cycler 0.9.0
decorator 4.0.4
ipykernel 4.1.0
ipython 4.0.0
ipython-genutils 0.1.0
ipywidgets 4.0.3
Jinja2 2.8
jsonschema 2.5.1
jupyter 1.0.0
jupyter-client 4.1.1
#... and so on... 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-02-24T12:22:48.453

从命令行

```
python -c help('modules') 
```

可用于查看所有模块，以及针对特定模块

```
python -c help('os') 
```

对于下面的 Linux 将工作

```
python -c "help('os')" 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-06-27T07:00:13.157

要在更高版本的 pip（在 上测试`pip==10.0.1`）中运行它，请使用以下命令：

```
from pip._internal.operations.freeze import freeze
for requirement in freeze(local_only=True):
    print(requirement) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-03-08T00:07:41.803

我的看法：

```
#!/usr/bin/env python3

import pkg_resources

dists = [str(d).replace(" ","==") for d in pkg_resources.working_set]
for i in dists:
    print(i) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-12-09T05:50:48.687

你可以试试：**蛋黄**

要安装蛋黄，请尝试：

```
easy_install yolk 
```

> Yolk 是一个 Python 工具，用于获取有关已安装 Python 包的信息并查询 PyPI（Python 包索引）上可用的包。
> 
> 您可以查看哪些包是活动的、非活动的或处于开发模式，并通过查询 PyPI 向您显示哪些有更新的版本可用。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-10-17T17:31:53.737

是的！你应该使用 pip 作为你的 python 包管理器（[http://pypi.python.org/pypi/pip](http://pypi.python.org/pypi/pip)）

使用 pip 安装包，你可以做一个

```
pip freeze 
```

它将列出所有已安装的软件包。您可能还应该使用[virtualenv](http://pypi.python.org/pypi/virtualenv)和[virtualenvwrapper](http://pypi.python.org/pypi/virtualenvwrapper)。当你开始一个新项目时，你可以做

```
mkvirtualenv my_new_project 
```

然后（在那个 virtualenv 里面），做

```
pip install all_your_stuff 
```

这样，您可以`workon my_new_project`然后`pip freeze`查看为该 virtualenv/项目安装了哪些软件包。

例如：

```
➜  ~  mkvirtualenv yo_dude
New python executable in yo_dude/bin/python
Installing setuptools............done.
Installing pip...............done.
virtualenvwrapper.user_scripts creating /Users/aaylward/dev/virtualenvs/yo_dude/bin/predeactivate
virtualenvwrapper.user_scripts creating /Users/aaylward/dev/virtualenvs/yo_dude/bin/postdeactivate
virtualenvwrapper.user_scripts creating /Users/aaylward/dev/virtualenvs/yo_dude/bin/preactivate
virtualenvwrapper.user_scripts creating /Users/aaylward/dev/virtualenvs/yo_dude/bin/postactivate
virtualenvwrapper.user_scripts creating /Users/aaylward/dev/virtualenvs/yo_dude/bin/get_env_details

(yo_dude)➜  ~  pip install django
Downloading/unpacking django
  Downloading Django-1.4.1.tar.gz (7.7Mb): 7.7Mb downloaded
  Running setup.py egg_info for package django

Installing collected packages: django
  Running setup.py install for django
    changing mode of build/scripts-2.7/django-admin.py from 644 to 755

    changing mode of /Users/aaylward/dev/virtualenvs/yo_dude/bin/django-admin.py to 755
Successfully installed django
Cleaning up...

(yo_dude)➜  ~  pip freeze
Django==1.4.1
wsgiref==0.1.2

(yo_dude)➜  ~ 
```

或者如果你有一个带有 requirements.pip 文件的 python 包，

```
mkvirtualenv my_awesome_project
pip install -r requirements.pip
pip freeze 
```

会成功的

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-04-19T11:07:59.503

如果您使用的是蟒蛇：

```
conda list 
```

会做的！请参阅：[https ://conda.io/docs/_downloads/conda-cheatsheet.pdf](https://conda.io/docs/_downloads/conda-cheatsheet.pdf)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-17T17:44:28.830

这是一种使用`PYTHONPATH`而不是 python libs 目录的绝对路径的方法：

```
for d in `echo "${PYTHONPATH}" | tr ':' '\n'`; do ls "${d}"; done 
```

* * *

```
[ 10:43 Jonathan@MacBookPro-2 ~/xCode/Projects/Python for iOS/trunk/Python for iOS/Python for iOS ]$ for d in `echo "$PYTHONPATH" | tr ':' '\n'`; do ls "${d}"; done
libpython2.7.dylib pkgconfig          python2.7
BaseHTTPServer.py      _pyio.pyc              cgitb.pyo              doctest.pyo            htmlentitydefs.pyc     mimetools.pyc          plat-mac               runpy.py               stringold.pyc          traceback.pyo
BaseHTTPServer.pyc     _pyio.pyo              chunk.py               dumbdbm.py             htmlentitydefs.pyo     mimetools.pyo          platform.py            runpy.pyc              stringold.pyo          tty.py
BaseHTTPServer.pyo     _strptime.py           chunk.pyc              dumbdbm.pyc            htmllib.py             mimetypes.py           platform.pyc           runpy.pyo              stringprep.py          tty.pyc
Bastion.py             _strptime.pyc          chunk.pyo              dumbdbm.pyo            htmllib.pyc            mimetypes.pyc          platform.pyo           sched.py               stringprep.pyc         tty.pyo
Bastion.pyc            _strptime.pyo          cmd.py
.... 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-03T21:49:42.137

如果需要从 python 中运行，您可以调用 subprocess

```
from subprocess import PIPE, Popen

pip_process = Popen(["pip freeze"], stdout=PIPE,
                   stderr=PIPE, shell=True)
stdout, stderr = pip_process.communicate()
print(stdout.decode("utf-8")) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-22T03:26:06.157

用于使用代码，例如检查 Hackerrank 等中的哪些模块：

```
import os
os.system("pip list") 
```

# .net - 检查编码是否存在？

> ID：12939977
> 
> 赞同：2
> 
> 时间：2012-10-17T17:29:58.697
> 
> 标签：.net, character-encoding

```
abc = Encoding.GetEncoding("xyz"); //Throws exception if xyz non existing. 
```

有没有办法尝试编码或者你必须捕获异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:32:17.283

您可以[`Encoding.GetEncodings`](http://msdn.microsoft.com/en-us/library/system.text.encoding.getencodings.aspx)先使用，然后尝试找到与名称匹配的：

```
var encodingInfo = Encoding.GetEncodings()
                           .FirstOrDefault(info => info.Name == targetName);

if (encodingInfo != null)
{
    Encoding encoding = encodingInfo.GetEncoding();
    ...
}
else
{
    ...
} 
```

如果您定期执行此操作，您可能希望构建一个名称/编码字典一次，然后`TryGetValue`在其上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T17:34:44.140

你可以使用`Encoding.GetEncodings()`方法。该方法返回所有可用的编码。然后，您可以在返回的数组中查找编码。

# android - 无法在 android 中登录 facebook“无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息”

> ID：12939979
> 
> 赞同：0
> 
> 时间：2012-10-17T17:30:06.067
> 
> 标签：android, facebook, api, single-sign-on

我是android编程的初学者。我正在尝试使用 facebook SSO，因此我按照 facebook 开发人员的说明编写了一个简单的测试代码：

```
public class MainActivity extends Activity {
private Facebook facebook = new Facebook("xxxxxxxxxxxxxxx");
/** Called when the activity is first created. */   

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new OnClickListener(){
        //@Override
        public void onClick(View v) {
            facebook.authorize( MainActivity.this, new DialogListener(){
                @Override
                public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                }
                @Override
                public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub
                }
                @Override
                public void onError(DialogError e) {
                // TODO Auto-generated method stub
                }
                @Override
                public void onCancel() {
                // TODO Auto-generated method stub
                }
             });
        }
    }); 

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

我第一次完成编码时它工作。弹出对话框，我可以输入我的电子邮件和密码。但是，第一次之后同样不能工作。我检查了 LogCat 并发现了错误：

```
10-17 17:10:07.227: E/ActivityThread(638): Failed to find provider info for       
com.facebook.katana.provider.AttributionIdProvider 
```

我已经尝试了很多次，我看到的是对话框弹出但立即关闭。我已经检查了解决方案，并且确定密钥哈希匹配。谁能告诉我为什么？非常感谢。

对不起我的愚蠢问题。我发现在 LogCat 中有一个“D/Facebook-authorize(638): Login Success! access_token=...... expires=.....”，所以我建议代码字？但是为什么即使我关闭我的模拟器，我也不需要再次登录，重新启动我的电脑？如果我愿意，如何切换到其他 Facebook 帐户？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:21:40.217

我认为登录是成功的。但这里有一些建议。如果您想查看对话框页面并想重新输入用户名和密码，请先尝试清除您的应用程序的缓存，然后再再次运行它。

# android - Eclipse 的 android 模拟器断开连接问题

> ID：12939985
> 
> 赞同：0
> 
> 时间：2012-10-17T17:30:28.720
> 
> 标签：android, eclipse, rest, android-emulator, netbeans-7

我正在使用 eclipse 开发一个身份验证 android 应用程序，这个应用程序是关于使用一个用 netbeans 实现的 rest web 服务。当我在 eclipse 中运行 android 应用程序时，模拟器启动但应用程序没有运行，我得到这个模拟器问题说：

```
emulator-5554 disconnected! Cancelling 'com.android.RestWSTestActivity activity launch'! 
```

当我关闭netbeans并使用eclipse重新运行android应用程序时，模拟器会运行该应用程序。我需要打开netbeans的问题是因为它包含其余的Web服务部署（glassfish），那么我该如何解决这个问题？是否有任何配置或端口号要更改？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T15:10:22.787

我找到了一个解决方案，问题是 Netbeans 和 Eclipse 都指向同一个 android SDK 位置，所以为了解决这个问题，我不得不将指向 SDK 的 netbeans 更改为不同的位置。另一种可能的解决方案是禁用netbeans的android插件，以便eclipse模拟器正常工作:)

# android - 带有图像和文本的 ListView 的正确编码方法？

> ID：12939991
> 
> 赞同：1
> 
> 时间：2012-10-17T17:30:47.997
> 
> 标签：android, listview, adapter, simpleadapter, custom-adapter

问题来自我为应用程序创建文件资源管理器功能的方式（我的第一个）。

你们中的一些人能否帮助我知道下面提到的哪种方法相对于性能更好。

**案例 I** - 有一种方法建议覆盖 getView() 方法。就像[***这里***](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/)给出的一样。

**案例 II** - 我使用了另一种方法，在我的适配器类中有一个自定义方法（不是 getView）

1.  列表视图的每一行的 HashMap。
2.  ArrayList> 包含来自 (a) 的每个 HashMap
3.  SimpleAdapter(上下文, List>, int, String[], int[])

（我必须说我必须做额外的迭代来对列表文件夹/文件进行排序，然后在文件夹和文件中按字母顺序排序。我进行了很长的排序，没有使用比较器）

我的代码接近[***这里给出的***](http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/)

**案例 III***或者，有什么比上述两种方法更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:46:52.897

只需扩展 ArrayAdapter 并覆盖 getView()。使用 ViewHolder 模式可以提高效率。它比案例 2 中提出的要简单得多，而且我认为案例 2 不允许使用图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:48:29.343

就我个人而言，我会创建自己的适配器并覆盖 getView 方法。原因是您将获得更好的灵活性并控制您可以在课堂上做什么。例如，如果您更改用于支持数据的数据结构，它将很容易处理。您最终可能想要执行某种算法，在该算法中您依赖缓存文件夹的内容一段时间，而使用 SimpleAdapter 这样做会更加困难。SimpleAdapter 为您节省了几行代码，您需要在 getView 中编写这些代码，但总的来说，我认为它不会对您有太大帮助。您应该确保执行某些操作以使您的列表视图快速运行，例如使用查看器。

# java - 数组中的长度和字符串中的长度（）

> ID：12939994
> 
> 赞同：9
> 
> 时间：2012-10-17T17:31:02.867
> 
> 标签：java, arrays, string

为什么当我们谈论数组时**长度**是数据字段，而当我们谈论Java 中的字符串时，为什么是 length **() ？**方法：

```
int a[10] = {1,2,3,4,5,6,7,8,9,10};
String str = "foo";
int a_len = a.length;
int str_len = str.length(); 
```

为什么长度不是数组的函数，反之亦然？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T17:34:40.293

简单地说：就是这样，而且一直都是这样。

在[JLS 第 10.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7)中指定数组有一个公共的 final`length`字段。为了保持一致性，它可以被指定为一种方法——但它不是......同样`String` *可以*做出一个实现决定来拥有一个公共的 final`length`字段——但同样，它恰好不是那样的。

自 1.0 以来存在一些不一致的地方 - 显然这些东西在发布后真的无法改变......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T17:39:44.630

`String`实现[`CharSequence`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/CharSequence.html)，因此`length`在这种情况下需要成为方法，因为接口只能指定方法。

数组不需要实现任何接口，因此`length`在这种情况下实现为公共 final 字段以避免额外的方法调用开销。

**编辑：**

正如 Hot Licks 在下面指出的，`CharSequence`在 Java 1.4 之前并不存在。尽管 CharSequence 显然不是这种设计选择背后的驱动原因（因为它不存在），但选择这种设计仍然是有意义的，因为 String 可能需要在未来实现新的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:34:25.353

它被认为是变量而不是方法。就好像您创建了一个类并说 Public static int num 然后在一个方法中告诉该 num 等于全局