# StackOverflow 问答 15638000-15638999

# mysql - MySQL：使用计算约束创建表

> ID：15638003
> 
> 赞同：1
> 
> 时间：2013-03-26T13:16:04.903
> 
> 标签：mysql, sql, key

创建表时，是否可以根据两列的计算值声明约束？

这是解释我要做什么的伪代码：

```
CREATE TABLE employee_comments(
  id int(11),
  user_id int(11),
  franchise_branch_id int(11) default 0,
  corporate_branch_id int(11) default 0,
  primary key id,
  key corp_xor_franch(corporate_branch_id + franchise_branch_id > 0)
) 
```

基本上，用户在公司级别或特许经营级别插入评论。对于每条评论，任何一个都可以留空，但必须至少声明一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:18:57.003

您最好的选择可能是在此处使用 TRIGGER - mysql 文档[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

使用[如何在 MySql 触发器中中止 INSERT 操作中的信息？](https://stackoverflow.com/questions/2538786/how-to-abort-insert-operation-in-mysql-trigger)像这个例子这样的东西应该会有所帮助

```
CREATE TRIGGER checkFieldsValid 
BEFORE INSERT ON employee_comments
FOR EACH ROW BEGIN

    DECLARE errmsg VARCHAR(255) DEFAULT "REQUIRED DATA NOT FOUND";

    IF NOT NEW.franchise_branch_id = 0 XOR NEW.corporate_branch_id = 0 THEN

        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = errmsg;

    END IF;
END; 
```

# grails - Grails Jasper 报告：找不到表问题

> ID：15638004
> 
> 赞同：0
> 
> 时间：2013-03-26T13:16:05.447
> 
> 标签：grails, jasper-reports, jasper-plugin

我希望使用 Jasper Reports 生成一些填充了 MySQL DB 数据的文件。到目前为止，我已经创建了一个包含几个字段的简单报告。它使用 jdbc:mysql 数据源。为此，我使用了 Jaspersoft Studio，并且报告在那里正常工作。

问题是，当我尝试使用 grails jasper 插件生成报告时，出现以下异常：

```
| 错误 2013-03-26 17:01:04,892 [http-bio-8080-exec-4] 错误错误。GrailsExceptionResolver - 处理请求时发生 JdbcSQLException：[GET] /testJasper/jasper/ - 参数：
_格式：PDF
_name：打印测试
_file: 测试HH
未找到表“恢复”
未找到表“RESUME”；SQL 语句：
从简历中选择 * [42102-164]。堆栈跟踪如下：
消息：未找到表“RESUME”
未找到表“RESUME”；SQL 语句：
从简历中选择 * [42102-164]
```

这是我在应用程序页面上得到的：

```
错误 500：内部服务器错误
网址：
/testJasper/碧玉/
班级：
org.h2.jdbc.JdbcSQLException
信息：
未找到表“恢复”。未找到表“RESUME”；SQL 语句：select * from resume [42102-164]

```

插件中的数据源似乎有问题。为什么`org.h2.jdbc`使用这个？为了从我的 grails 应用程序运行报告，我需要配置什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:19:01.327

检查您的数据源配置和*dbCreate*属性的值。 [http://grails.org/doc/latest/guide/conf.html#dataSource](http://grails.org/doc/latest/guide/conf.html#dataSource)

# c - C程序printf的奇怪行为

> ID：15638006
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:16:06.890
> 
> 标签：c, printf

我正在做一个简单的 UNIX [wc](https://en.wikipedia.org/wiki/Wc_(Unix))命令实现，我遇到了一个非常奇怪的问题。如果我删除第 49 行的 printf，程序将无法正常运行。我尝试了很多东西，但都没有奏效。该程序有效，但输出不是我需要和想要的。

```
#include<stdio.h>
#include<stdlib.h>
#include<fcntl.h>
#include <string.h>
#include<errno.h>
#include<sys/stat.h>

int *counter(FILE* file) {

    // Function counter - counts the number of lines, words and symbols
    int nsymbols = 0, nwords = 0, nlines = 0;
    char c;
    while (EOF != (c = fgetc(file))) {
        nsymbols++;
        if(c == ' '){
            nwords++;
        }
        if(c == '\n'){
            nlines++;
            nwords++;
        }
    }
    int count[] = {nlines, nwords, nsymbols};
    return count;
}

int main(int argc,char* argv[]) {
    if(argc == 1) {
        int *counted;
        counted = counter(stdin);
        printf("\t%d \t%d \t%d\n", counted[0], counted[1], counted[2]);
    }
    else{
        int i,k, bool = 0;
        int total[] = {0,0,0};
        char c = ' ', w = ' ', l = ' ';

        for(i = 1; i < argc; i++) {

            // Cheking if there are some options activated
            if(strchr(argv[i], '-')){
                if(strcmp(argv[i], "-")==0){
                    continue;
                }
                if(strchr(argv[i], 'l')) {
                    l = 'l';
                }
                if(strchr(argv[i], 'w')) {
                    w = 'w';
                }
                if(strchr(argv[i], 'c')){
                    c = 'c';
                }
                bool = 1;
            }
        }
        if(!bool) {
            // If none of them are activated from the user, automatically activates all of them
            l = 'l';
            w = 'w';
            c = 'c';
        }
        printf("%c %c %c", l,w,c);

        for(i = 1; i<argc; i++){

            if(strcmp(argv[i], "-") == 0){
                int *counted;
                counted = counter(stdin);
                for(k = 0; k < 3; k++){
                    total[k] += counted[k];
                }
                if(l == 'l')
                    printf("\t%d", counted[0]);
                if(w == 'w')
                    printf("\t%d", counted[1]);
                if(c == 'c') {
                    printf("\t%d", counted[2]);
                }
                printf(" %s\n", "-");
            }
            else{
                if(strchr(argv[i], '-'))
                    continue;
                FILE* file = fopen(argv[i], "r");
                if(file == NULL) {
                    fprintf(stderr, "%s : %s\n", argv[i], strerror(errno));
                    return 1;
                }
                struct stat checker;

                if(stat(argv[i], &checker) < 0 ) {
                    return 2;
                }

                if(checker.st_mode & S_IRUSR) {
                }
                else{
                    fprintf(stderr, "%s : %s\n", argv[i],strerror(EACCES));
                    return 3;
                }

                int *counted;
                counted = counter(file);

                for(k = 0; k < 3; k++){
                    total[k] += counted[k];
                }

                if(l == 'l')
                    printf("\t%d", counted[0]);
                if(w == 'w')
                    printf("\t%d", counted[1]);
                if(c == 'c') {
                    printf("\t%d", counted[2]);
                }
                printf(" %s\n", argv[i]);
            }
        }
        if(l == 'l')
            printf("\t%d", total[0]);
        if(w == 'w')
            printf("\t%d", total[1]);
        if(c == 'c') {
            printf("\t%d", total[2]);
        }
        printf(" total\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:21:32.253

它与`printf`就地一起工作的原因是巧合：您的程序具有未定义的行为，因为您正在返回一个指向本地的指针。分配给局部变量的内存在从函数返回时被重用，因此在函数外部引用该内存会导致访问垃圾值。但是，有时，由于调用者使用堆栈的方式，特定位置不会被重用。在这种情况下，程序看起来可以运行，但即使是对代码的微小更改也可能导致产生不正确的结果甚至崩溃。

更改您的代码如下：

```
void counter(FILE* file, int count[]) {
    int nsymbols = 0, nwords = 0, nlines = 0;
    char c;
    while (EOF != (c = fgetc(file))) {
         nsymbols++;
         if(c == ' '){
            nwords++;
         }
         if(c == '\n'){
            nlines++;
            nwords++;
         }
      }
      count[0] = nlines;
      count[1] = nwords;
      count[2] = nsymbols;
} 
```

并像这样调用这个函数：

```
int counted[3];
counter(file, counted); 
```

这将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:40:53.497

要么使数组成为静态数组，要么通过 malloc 或 calloc 使用动态内存分配创建它...因为在堆中创建的数组会一直保留到程序结束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:21:44.433

这里的`count`数组

```
 int count[] = {nlines, nwords, nsymbols};
  return count; 
```

超出范围，其生命周期在函数返回后结束。您可以将其设为静态或 malloc 内存，这两者都将延长指向的内存的生命周期超出函数的执行时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:23:46.007

问题是您返回的数组`count`是本地数组。你不能那样做。我将是未定义的行为。一切都有可能发生！

数组的大小似乎是固定的，因此您应该声明它并将其作为参数传递给函数 counter()。

# android - 如何禁用微调器 Android 中的项目

> ID：15638014
> 
> 赞同：0
> 
> 时间：2013-03-26T13:16:40.420
> 
> 标签：android, arrays, spinner, android-arrayadapter

我想`<item>Repeat 5 times</item>`在用户选择时禁用我`<item>Repeat 4 time </item>`如何实现这个？

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.Replay_arrays, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
    replay.setAdapter(adapter);
    replay.setOnItemSelectedListener(new function());

    public class function implements OnItemSelectedListener {
        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1, int pos,
                long id) {
            int poss = replay.getSelectedItemPosition();
            switch (poss){
            case 0: 
                maxCount = 1188;
                break;
            case 1: 
                maxCount = 4;
            break;
            case 2: 
                maxCount = 5;
                break;
            case 3: 
                maxCount = 6;
                break;
            case 4: 
                maxCount = 7;
                break;
            case 5: 
                maxCount = 8;
                break;
            }   
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }

    } 
```

字符串.xml

```
 <string name="Replay_prompt">Replay</string>
<string-array name="Replay_arrays">
    <item>Timer: Off</item>
    <item>Repeat 4 time </item>
    <item>Repeat 5 times</item>
    <item>Repeat 6 times</item>
    <item>Repeat 7 times</item>
    <item>Repeat 8 times</item>        
</string-array> 
```

# javascript - jQuery FancyBox 弄乱按钮

> ID：15638015
> 
> 赞同：0
> 
> 时间：2013-03-26T13:16:45.023
> 
> 标签：javascript, jquery, ajax, button, fancybox

我的网页上有几个 jQuery FancyBoxes。它们通过一些 ajax 被放到页面上，这些 ajax 也将其他东西带到页面上，比如按钮等。但是，由于某种原因，在我打开 FancyBox 窗口后，我的页面上出现了这些样式错误，直到我重新加载它：

```
Uncaught TypeError: Object [object Object] has no method 'button' 
```

在我单击并打开 FancyBox 之前，此按钮可以正常工作。这是我喜欢的盒子代码和我的按钮代码。

```
jQuery('.fancybox-media').fancybox({
    fitToView: false,
    width: '100%',
    height: '100%',
    autoSize: false,
    closeClick: false,
    openEffect: 'none',
    closeEffect: 'none'
}); 
```

按钮：

```
$('.adminbutton').button(); 
```

**编辑**

我肯定将其缩小到 jQuery UI 和 FancyBox 冲突。打开 FancyBox 后，我无法再让 jQuery UI 方法发挥作用。有人知道解决方法或解决此问题的好方法吗？

**编辑 2**

我找到了一个临时的解决方法，但它似乎并不正确。它确实解决了这个问题。在 FancyBox 关闭后，我将 jQuery UI 与其他一些 jQuery 一起重新包含到页面中。

```
$.getScript('/js/jquery-ui.js'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:29:36.390

我找到了解决该错误的真正方法，因为没有其他人提供任何真正的帮助。我的 JS 文件的顺序*不是*问题，它是 ajax。出于某种原因，使用 ajax 的 jQuery 灯箱插件似乎会破坏很多代码。但是，通过将这些灯箱改为 iframe，当然，将我的 JS 和 CSS 标题添加到我所包含的页面中，我让它毫无问题地工作。

* * *

简单的？

使用 jQuery 灯箱插件时，当您的页面依赖其他 jQuery（例如 jQuery UI）时，请使用 iframe 而不是 ajax。

# c++ - C++ 将 2d 数组（由 uniqe_ptr 引用）合并为 3d 数组

> ID：15638018
> 
> 赞同：0
> 
> 时间：2013-03-26T13:16:56.670
> 
> 标签：c++, c++11, multidimensional-array, unique-ptr

我需要将三个 2D 数组合并为一个 3D 数组。

我正在使用 unique_ptr 来引用二维数组。

总的来说，我对智能指针和 C++ 很陌生，所以很可能这是一个明显的错误。

```
int imgsize = 15;
std::unique_ptr<float[]> redptr(new float[imgsize]);
std::unique_ptr<float[]> greenptr(new float[imgsize]);
std::unique_ptr<float[]> blueptr (new float[imgsize]);

redptr = redChannel._data;
greenptr = greenChannel._data;
blueptr = blueChannel._data;

float * colourArr[3] = {redptr,greenptr,blueptr}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:26:39.307

~~a 背后的想法`std::unqiue_ptr`是，拥有指向对象的`std::unique_ptr`唯一所有权*。*构建发布的代码与这个前提相矛盾，因为另一个变量现在有一个指向`std::unique_ptr`.~~ 发布的代码很危险，因为它是悬空指针的潜在来源（一旦`std::unique_ptr`超出范围，指向的对象将被破坏，但 的元素`colourArr`仍将指向现在被破坏的对象）。

建议使用 a 而不是使用`std::unique_ptr`和显式动态分配内存[`std::vector<std::vector<float>>`](http://en.cppreference.com/w/cpp/container/vector)。这将管理内存并通过以下方式提供数组样式访问[`operator[]`](http://en.cppreference.com/w/cpp/container/vector/operator_at)：

```
// Construct a vector contain 3 elements,
// where each element is a vector containing 'imgsize' floats.
std::vector<std::vector<float>> colourArr(3, std::vector<float>(imgsize)); 
```

# mvvmcross - Mvvmcross 和更好的 .net 框架支持 PCL

> ID：15638021
> 
> 赞同：2
> 
> 时间：2013-03-26T13:17:07.903
> 
> 标签：mvvmcross, portable-class-library

对于仅针对 monodroid 和 monotouch 的 PCL 项目来说，最好的配置文件是什么？目前我只能使用配置文件 104，但这会带来非常严格的框架（非常薄的组件，而 monodroid/monotouch 都涵盖了更大的“.net”框架功能。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:51:26.690

我不相信目前存在任何更大的配置文件。

有人谈论（和希望）未来会有一个新的“几乎完整”的配置文件，包括 MonoTouch、MonoDroid 和 .Net4.5。

但是今天，PCL 配置文件被定义为完整 .Net 的小子集 - 如果您想要更大的功能，您必须使用插件、PCLContrib 等扩展机制。

话虽如此，我已经看到了许多使用 Profile 104 构建的复杂而丰富的应用程序。

* * *

如果当前的 PCL 配置文件不足以满足您的需求，那么您当然可以用非 PCL 代码编写代码 - 代价是必须为每个平台维护单独的项目。Redth 使用这种方法处理了他的 WshLst 项目：[https ://github.com/Redth/WshLst/](https://github.com/Redth/WshLst/)

# c++ - std:sort 与插入 std::set

> ID：15638024
> 
> 赞同：9
> 
> 时间：2013-03-26T13:17:15.030
> 
> 标签：c++, sorting, stl, set, std

我正在从 cin 中读取一些线段。每条线段由起点和终点表示。二维。X 和 Y。

输入未排序。它是随机顺序的。（更新：但我需要它们先按 X 排序，然后按 Y）

我可以读取所有段，将它们存储在向量中，然后调用 std::sort。另一方面，我可以创建一个空的 std::set 并在每个段到达时插入它。该集合将自动保持排序顺序。这两种方法哪一种更有效？

更新：输入的总大小（段数）是预先知道的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T13:19:24.417

您应该确定这两种方法的性能，但可以肯定的是，由于局部效应和隐藏在树插入算法中的大常数，假设*on*比`std::sort`插入到 an 中要快得多`std::vector`。此外，后续的查找和迭代会更快。*`std::set`*

 *（然而，`std::set`更适合支持混合的插入和删除/查找/迭代系列。维护向量中的顺序很昂贵，因为每次插入平均需要线性时间。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T13:56:05.027

作为一个好的经验法则，提供的保证越严格，您获得的性能就越差。

插入 a`std::set`可以保证*在每次插入之后*对序列进行排序。

插入到 a`std::vector`中并在所有插入完成后调用`std::sort` *一次*可确保在完成所有操作后对序列进行排序`vector`。它不需要在所有中间插入期间对向量进行排序。

A`std::vector`还表现出更好的空间局部性，并且需要更少的内存分配。所以我会假设这种`vector`方法更快，但如果性能对你很重要，那么它就足够重要了，可以*衡量*。

**如果您**不在乎使用应用程序中的代码来衡量**您的**数据集在**您****的情况下**哪个更快，那么您不在乎哪个更快。

 ******* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T13:27:24.767

它确实取决于，但可以肯定的是，它`std::set`是用于随机插入和删除的。在这种情况下，您只是插入。一起去`std::vector`。此外，也许更重要的是，如果您事先知道有多少段，您只需分配一次向量，它不会在每次大小翻倍时重新分配内存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-26T13:20:29.480

根据您的需要使用具有适当语义的容器。效率通常会自动从该选择中产生。

*如果*您随后遇到性能瓶颈，请进行一些基准测试。*******

# windows-8 - 在 WinRT 中流式传输到文件

> ID：15638025
> 
> 赞同：2
> 
> 时间：2013-03-26T13:17:36.207
> 
> 标签：windows-8, windows-runtime

如何在 WinRT 中将流保存到文件。目前我正在开发一个用于在 Windows 8 中创建 PDF 文件的开源库。我使用 pdf 内容构建流，现在我的要求是将此流保存到文件中。谁能指导我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:27:57.443

我假设您正在使用 C#？一种方法是使用 DataReader 读取流内容并将其存储到 byte[] 缓冲区中。之后，您可以像这样创建文件：

```
var file = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync("filename", Windows.Storage.CreationCollisionOption.ReplaceExisting);
await Windows.Storage.FileIO.WriteBytesAsync(file, buffer); 
```

再说一次，如果您已经必须为 pdf 字节数据，您可以跳过首先将其设为流。

希望这有帮助。

# java - 如何不同时处理 View.onClick() 和处理 View.onLongClick()？

> ID：15638033
> 
> 赞同：1
> 
> 时间：2013-03-26T13:17:50.940
> 
> 标签：java, android, onclick, onlongclicklistener

我只需要处理 TextView 的长按事件（并在此事件上显示弹出菜单）。但如果只是简单的点击，我应该将此事件转移到托管此视图的布局中。

如何做到这一点？

```
public class MainActivity extends Activity implements OnLongClickListener, OnClickListener {

TextView mTextView;
RelativeLayout mTopLayout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mTextView = (TextView) findViewById(R.id.mTextView);
    mTopLayout = (RelativeLayout) findViewById(R.id.mTopLayout);

    mTextView.setOnLongClickListener(this);
    mTopLayout.setOnClickListener(this);
    mTextView.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    Toast.makeText(this, v.getClass().getName() + " clicked!", Toast.LENGTH_SHORT).show();
    if (v.getId() == R.id.mTextView) {
        ((View) v.getParent()).performClick();
    }
}

...
} 
```

这样我们会收到两个连续的点击事件，并且在android中会有两个标准的点击声音。不好。

有没有一些简单的方法可以实现这一目标？

这是xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mTopLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/mTextView"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:background="#FFFF0000"
        android:clickable="false"
        android:focusable="false"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

**编辑：** 只是添加细节。如果我不设置 onClickListener 则在 TextView 中的 clcking 没有任何效果，并且此事件由 mTextView 消耗（即使在 xml 中可单击和可聚焦设置为 false）并且不会传递给 mTopLayout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:21:47.737

添加单独的侦听器..

```
mTextView.setOnLongClickListener(new OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            // do something;
        }
    });

mTextView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // do something

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:21:29.280

我不清楚你想用点击做什么，但android一次只吸引一个点击列表，无论是onClick还是onLongClick。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:26:11.573

我刚刚创建了一个演示项目。同样的问题**OnLongClick**它也在触发**OnClick** ，但是当我更改它的返回值时`setOnLongClickListener`，`false` 它开始单独管理这些点击。

```
 mbuttton = (Button)findViewById(R.id.View1);

        mbuttton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(getBaseContext(), "single click", Toast.LENGTH_LONG).show();
                Log.i("Single Click", "Single click");
            }
        });

        mbuttton.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                // TODO Auto-generated method stub              
                Toast.makeText(getBaseContext(), "LONG click", Toast.LENGTH_LONG).show();
                Log.i("Long Click", "Long click");
                return true;
            }
        }); 
```

我做到了，但如果你要求解释，我几乎要放弃了，不知道这些返回值是如何管理的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:15:19.177

最后...

为什么我需要让这个 onClickListeners 使用不同的处理程序？愚蠢的。

```
@Override
public void onClick(View v) {
    Toast.makeText(this, v.getClass().getName() + " clicked!", Toast.LENGTH_SHORT).show();
    if (v.getId() == R.id.mTextView || v.getId() == R.id.mTopLayout) {
        //do whatever I need
    }
} 
```

真的很简单。

# jquery - jQuery Mobile 在外部页面中动态添加数据角色

> ID：15638035
> 
> 赞同：0
> 
> 时间：2013-03-26T13:17:56.193
> 
> 标签：jquery, mobile, dynamic, external

我有一个简单的索引页面。

```
<head>
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.3.0.min.css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    $(function(){
        $('a').attr("data-role", "button"); 
        $('a').attr("data-transition", "slide");    
    })
</script>
<script type="text/javascript" src="jquery.mobile-1.3.0.min.js"></script>

</head>

<body>

    <div data-role="page">
        <a href="2.php">Go to next page</a>
    </div>

</body> 
```

..这是我的下一页

```
<head>
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.3.0.min.css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    $(function(){
        $('a').attr("data-role", "button");
        $('a').attr("data-transition", "slide");
    })
</script>
<script type="text/javascript" src="jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
    <div data-role="page">
        <a href="index.php">asd</a>
    </div>
</body> 
```

当我单击“下一页”链接时，JQM 无法读取“数据角色=“按钮”。因此，下一页上的链接看起来像简单的链接。

那么，我怎样才能让它动态读取呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:57:56.830

为了告诉框架按钮的样式应该应用于某个元素，您必须在任何选择器上调用按钮插件。

请注意，此代码应放置在页面事件（pageshow、pagecreate、pageinit 等）中。为了工作，您需要在每个带有 data-role="page" 的 div 中放置一个 id，这是您的页面

在你的情况下应该是

```
$(document).on('pagebeforeshow', '#page_id',  function(){
   $('a').button();

   //would be better to put an id in your button
   $('#button_id').button();
}); 
```

查看 api 文档以了解调用按钮插件后可以使用的方法。 [http://api.jquerymobile.com/button/](http://api.jquerymobile.com/button/)

# javascript - 新窗口中的异地链接脚本，不收集页面中的所有链接

> ID：15638037
> 
> 赞同：0
> 
> 时间：2013-03-26T13:18:01.617
> 
> 标签：javascript, html

嗨，我是初学者，这是我的第一个问题。

我最近建立了一个网站并有一些外部链接。默认情况下，所有设置都设置为在同一窗口中打开，但希望让访问者选择切换外部链接以在新窗口中打开。

我从以下网址找到了很棒的脚本：[http ://www.dynamicdrive.com/dynamicindex8/newwindow2.htm](http://www.dynamicdrive.com/dynamicindex8/newwindow2.htm)

**编辑** 这是来自dynamicdrive的脚本：

```
//Open offsite links in new window script- http://www.dynamicdrive.com/
//Created: August 28th, 2007'

var ddwindowlinks={
//1)Enter domains to be EXCLUDED from opening in new window:
excludedomains: ["dynamicdrive.com", "google.com"],

//2) Target for links that should open in a new window (ie: "_blank", "secwin" etc):
linktarget: "_blank",

//3) Specify operating mode ("auto" or "manual"):
mode: "manual",

//4) If mode is "manual", customize checkbox HTML to show to users (Preserve id attribute):
toggleHTML: '<form><input type="checkbox" id="targetcheckbox" checked="checked" /><label for="targetcheckbox">Open off-site links in new window?</label></form>',

//5) If mode is "manual", enable user persistence so the state of the checkbox is remembered?
persist: true,

assigntarget:function(){
    var rexcludedomains=new RegExp(this.excludedomains.join("|"), "i")
    var all_links=document.getElementsByTagName("a")
    if (this.mode=="auto" || (this.mode=="manual" && this.togglebox.checked)){
        for (var i=0; i<=(all_links.length-1); i++){
            if (all_links[i].hostname.search(rexcludedomains)==-1 && all_links[i].href.indexOf("http:")!=-1)
                all_links[i].target=ddwindowlinks.linktarget
        }
    }
    else{
        for (var i=0; i<=(all_links.length-1); i++)
            all_links[i].target=""
    }
    if (this.mode=="manual" && this.persist)
        this.setCookie("dlinktarget", (this.togglebox.checked)? "yes" : "no", 30) //remember user setting for 30 days (set to -1 then reload page to erase cookie)
},

init:function(){
    if (document.getElementById && this.mode=="manual"){
        document.write(this.toggleHTML)
        this.togglebox=document.getElementById("targetcheckbox")
        this.togglebox.onclick=function(){ddwindowlinks.assigntarget()}
        if (this.persist && this.getCookie("dlinktarget")!="")
            this.togglebox.checked=(this.getCookie("dlinktarget")=="yes")? true : false
    }
    if (window.addEventListener)
        window.addEventListener("load", function(){ddwindowlinks.assigntarget()}, false)
    else if (window.attachEvent)
        window.attachEvent("onload", function(){ddwindowlinks.assigntarget()})
},

getCookie:function(Name){
    var re=new RegExp(Name+"=[^;]+", "i"); //construct RE to search for target name/value pair
    if (document.cookie.match(re)) //if cookie found
        return document.cookie.match(re)[0].split("=")[1] //return its value
    return ""
},

setCookie:function(name, value, days){
    var expireDate = new Date()
    //set "expstring" to either an explicit date (past or future)
        var expstring=expireDate.setDate(expireDate.getDate()+parseInt(days))
        document.cookie = name+"="+value+"; expires="+expireDate.toGMTString()+"; path=/"
}

}

ddwindowlinks.init() 
```

**结束编辑**

该脚本非常适合文本上的链接。

**例子**

```
<div class="Artistic-Body-P">
    <span class="Artistic-Body-C">
        <a href="http://externallink.com" style="text-decoration:none;">test</a>
    </span>
</div> 
```

但它不适用于 div 翻转中的链接。例子：

```
<div id="div_popup_roll_13" style="position:absolute;left:109px;top:259px;width:76px;height:76px;">
    <a href="http://externallink.com" rev="image1.png~#~-14~#~-15~#~text~#~148~#~-119~#~#949393~#~Tahoma~#~30~#~0~#~1~#~transparent~#~165">
        <img src="image2.png" border="0" width="76" height="76" id="popup_roll_13" alt="">
    </a>
</div> 
```

两天来我一直在想如何解决这个问题，但猜想我是初学者的事实并没有帮助，所以我决定在这里发帖。

thnx 提前寻求帮助

**编辑**

这是来自poproll的代码：

```
(function($){jQuery.fn.poproll=function(settings){var m_bHovering=false;var m_nDivId=0;
var $m_ImageDiv=null;var $m_TextDiv=null;
var eOptions={Img:0,ImgPosX:1,ImgPosY:2,Txt:3,TxtPosX:4,TxtPosY:5,TxtCol:6,TxtFont:7,TxtSize:8,TxtItallic:9,TxtBold:10,TxtBkgrndCol:11,TxtWidth:12};
function ClosePopup(){if($m_ImageDiv!==null){$m_ImageDiv.remove();
$m_ImageDiv=null;if($m_TextDiv!==null){$m_TextDiv.remove();
$m_TextDiv=null}}}function HoverOver(div){m_bHovering=true;var nDivId=$(div).attr('id');
if(nDivId!==m_nDivId){m_nDivId=nDivId;ClosePopup()}if($m_ImageDiv===null){var anchor=$(div).find('a');
var optionArray=$(anchor).attr('rev').split('~#~');
var href=$(anchor).attr('href');
if(href===undefined){$(div).append('<div id="poproll_img" style="position:absolute; left:'+optionArray[eOptions.ImgPosX]+'px; top:'+optionArray[eOptions.ImgPosY]+'px; z-index:100;"><img src="'+optionArray[eOptions.Img]+'" name="popup_roll_2" alt="" style="position:absolute;left:0px;top:0px;"></div>')}else{$(div).append('<div id="poproll_img" style="position:absolute; left:'+optionArray[eOptions.ImgPosX]+'px; top:'+optionArray[eOptions.ImgPosY]+'px; z-index:100;"><a href='+href+'><img src="'+optionArray[eOptions.Img]+'" name="popup_roll_2" alt="" border="0" style="position:absolute;left:0px;top:0px;"></a></div>')}$m_ImageDiv=$('#poproll_img');
if(optionArray[eOptions.Txt].length>0){var fontStyle=optionArray[eOptions.TxtItallic]>0?'italic':'normal';
var fontWeight=optionArray[eOptions.TxtBold]>0?'bold':'normal';$(div).append('<div id="poproll_txt" style="position:absolute; left:'+optionArray[eOptions.TxtPosX]+'px; top:'+optionArray[eOptions.TxtPosY]+'px; width:'+optionArray[eOptions.TxtWidth]+'px; color:'+optionArray[eOptions.TxtCol]+'; font-size:'+optionArray[eOptions.TxtSize]+'; font-family:'+optionArray[eOptions.TxtFont]+'; font-style: '+fontStyle+'; font-weight:'+fontWeight+'; background-color:'+optionArray[eOptions.TxtBkgrndCol]+'; z-index:100;">'+optionArray[eOptions.Txt]+'</div>');$m_TextDiv=$('#poproll_txt')}}}function HoverOut(){m_bHovering=false;window.setTimeout(function(){if(!m_bHovering){ClosePopup()}},100)}this.hover(function(){HoverOver(this)},function(){HoverOut()})}})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:47:47.240

自己编写代码可能会更干净。尝试以下操作：

```
// Grab every <a> tag in the document.
var allTheTags = document.getElementsByTagName('a');

function parseTags(tags) {
    var size = tags.length; // cache the size;

    for (var i = 0; i < size; i++) {
        var tag = tags[i];
        var href = tag.getAttribute('href');
        // Do we have a target attribute? (and, of course, an href attribute)
        if (href && !tag.getAttribute('target')) {
              var ourHostName = window.location.hostname;
              href = href.split('://');
              // Is there a protocol?
              if (href.length > 1) {
                  href = href[1].split('/')[0]; // Get everything before the first /
                  if (href != window.location.hostname &&
                      href != 'www' + window.location.hostname) {
                      // Sometimes, hostname does not have www in it.
                      tag.setAttribute('target', '_blank');
                  }
              }
        }
    }
};

// Call our function.
parseTags(allTheTags); 
```

我们的变量“allTheTags”是一个节点列表，它会在 DOM 更新时更新，所以我们总是可以重新运行我们的 parseTags 函数，每次传入我们的 allTheTags 对象。这样，如果存在动态添加标签的实例，我们将跳过查询 DOM。

**编辑**

在考虑 poproll 功能的情况下，您必须监听传递给 poproll 函数的相同翻转事件。因此，在您对所选元素调用 poproll 之后，立即监听同一元素上的悬停。

```
$(someElementYouUseForPoproll).hover(function () {
    parseTags(allTheTags);
}, function() { }); 
```

这样，在我们的标记被注入之后，这个悬停事件是下一个内联执行的，现在将看到 poproll 在 DOM 中生成的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:30:22.053

我通过编辑poprol的代码解决了我的问题，将href更改为：

```
<a href="'+href+'" target="_blank"> 
```

# sql - 在一个查询中使用相同的 seq_name.nextval。甲骨文

> ID：15638039
> 
> 赞同：4
> 
> 时间：2013-03-26T13:18:10.707
> 
> 标签：sql, oracle

如何在一个查询中两次选择相同的序列？

我已经用谷歌搜索了这个，但无法得到答案。

为了清楚起见，这就是我需要的，例如：

`select seq.nextval as v1, seq.nextval as v2 from dual`（我知道这行不通）

我也尝试过 UNION，只是无法理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:24:50.690

如果您总是需要两个值，您可以将序列更改为以 2 为增量：

```
alter sequence seq increment by 2; 
```

然后选择当前值及其后继值：

```
select seq.nextval,
 seq.nextval + 1
 from dual; 
```

不漂亮，但它应该做的工作。

**更新**

只是为了澄清：`ALTER SEQUENCE`一生中应该只发布一次，而不是每个会话一次！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:42:20.043

弗兰克的答案有一个缺点：

> 您不能在事务系统中使用它，因为 ALTER SEQUENCE 提交任何未决的 DML。

肖恩的答案只拉序列一次。据我了解，您想提取两个值。作为 Seans 解决方案的替代方案，您还可以从 .nextval 中选择两次，因为 ORACLE 会两次为您提供相同的值。

我更喜欢将序列包装在一个过程中。这会欺骗 oracle 将序列拉两次。

```
CREATE or replace FUNCTION GetSeq return number as

nSeq NUMBER;

begin

select seq.nextval into nSeq from dual;

return nSeq;

end;
/ 
```

如果你一般需要这个，也许你会喜欢：

```
CREATE or replace FUNCTION GetSeq(spSeq in VARCHAR2) return number as

nSeq NUMBER;
v_sql long;

begin

v_sql:='select '||upper(spSeq)||'.nextval from dual';
execute immediate v_sql into nSeq;

return nSeq;

end;
/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:51:55.697

如何使用有一些限制`NEXTVAL`。[Oracle 文档中](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns002.htm)有一个列表。更重要的是，该链接包含一个条件列表，其中 NEXTVAL 将被多次调用。

页面上指定的唯一一个直接 SELECT 将`NEXTVAL`多次调用的场景是在*"A top-level SELECT statement"*中。将调用`NEXTVAL`两次的粗略查询是：

```
SELECT seq.NEXTVAL FROM (
  SELECT * FROM DUAL
  CONNECT BY LEVEL <= 2) -- Change the "2" to get more sequences 
```

不幸的是，如果您尝试将其推送到子查询中以将值展平为具有列的一行`v1`并且`v2`（就像您的问题一样），您将获得`ORA-02287: sequence number not allowed here`.

这是我能得到的最接近的。如果上面的查询不能帮助您到达您想要的位置，请查看此处发布的其他答案。当我一直在打字时，已经发布了几个很好的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:32:47.893

告诉你多次调用 sequence.nextval 会很无聊，所以你可以尝试以下方法：

```
create type t_num_tab as table of number;

CREATE SEQUENCE SEQ_TEST
  START WITH 1
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  CACHE 100
  NOORDER;

create or replace function get_seq_vals(i_num in number) return t_num_tab is 
    seq_tab t_num_tab;
begin

select SEQ_TEST.nextval
bulk collect into seq_tab
from all_objects
where rownum <= i_num;

return seq_tab;

end; 
```

您可以按如下方式使用它。此示例从序列中一次提取 7 个数字：

```
declare
    numbers t_num_tab;
    idx number;
begin
    -- this grabs x numbers at a time
    numbers := get_seq_vals(7);

    -- this just loops through the returned numbers
    -- to show the values
    idx := numbers.first;
    loop
        dbms_output.put_line(numbers(idx));
        idx := numbers.next(idx);
        exit when idx is null;
    end loop;
end; 
```

另请注意，我使用“next”而不是 first..last，因为您可能希望在迭代之前从列表中删除数字（或者，有时序列缓存可能导致数字增加超过 1）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:17:01.597

这些都是很好的答案，不幸的是这还不够。以后在挣扎的时候一定能回到这个页面。

我采用了不同的方法。问了一个新问题并得到了我的答案。

你可以去[这里](https://stackoverflow.com/questions/15660578/how-to-get-barcodes-in-seq-two-next-to-eachother-jasper-ireport)看看。

# sql - SQL Server 2005 中的插入语句

> ID：15638040
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:18:17.847
> 
> 标签：sql, sql-server-2005, insert

我有与 SQL Server 2005 相关的奇怪问题

当我尝试插入表格时

```
insert into IDName
VALUES (101 , 'AA'),
       (301 , 'BB') 
```

我收到此错误

> 消息 102，级别 15，状态 1，第 3 行
> ',' 附近的语法不正确。

没有问题，如果我一一插入记录。

编辑：谢谢大家的回复....但是这个脚本适用于 sql server 2005 的其他安装...我认为这是一些设置问题，但我不知道在哪里...如果你能帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:19:35.403

这种语法是在 SQL Server 2008 中引入的。所以升级，或者使用更详细的：

```
INSERT dbo.IDName(column1, column2)
  SELECT 101 , 'AA'
  UNION ALL SELECT 301 , 'BB'; 
```

一些额外的变化：

1.  [引用对象时始终使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)
2.  [始终指定列列表`INSERT`](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)
3.  [始终使用分号来终止语句](https://sqlblog.org/2009/09/03/ladies-and-gentlemen-start-your-semi-colons)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T13:19:54.930

SQL Server 2005 不支持该插入语法；你要么需要

```
insert into IDName 
SELECT 101 , 'AA'
UNION ALL SELECT 301 , 'BB' 
```

或者

```
insert into IDName VALUES (101 , 'AA');
insert into IDName VALUES (301 , 'BB'); 
```

# ios - ios - 从文本字段获取参数时，我应该在修剪之前检查 null 吗？

> ID：15638044
> 
> 赞同：1
> 
> 时间：2013-03-26T13:18:26.290
> 
> 标签：ios, objective-c, ios5

我正在考虑做这样的事情：

```
 NSString *path = [NSString stringWithFormat:@"http://www.somedomain.com?id=%@&email=%@",
[id.text stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]], 
[emailField.text stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]]]; 
```

那行得通吗？或者如果这些字段是空白的，那会导致某种错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:21:55.423

如果字段为空，您将获得一个包含`id=(null)&email=(null)`格式化时间的 url。

在这种情况下，指望`nil`使消息短路是行不通的，因为您没有将消息发送到任何将为零的对象。

您应该分别检查这两个字段并将它们设置为 @"" （如果您的 API 可以处理）或省略 URL 中的查询字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:28:06.320

对于修剪，它不是必需的。因为向 null 发送消息不会有任何影响，同时您需要检查该 url 是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:22:59.820

您可以使用以下方法检查其是否为空

```
 if ([[emailField text] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]].length ==0 ||[[id text] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]].length ==0 )
{
//Dont call api
}else{
// call api
} 
```

# gnuplot - gnuplot 如何使用来自不同文件的数据缩放 y 轴

> ID：15638045
> 
> 赞同：0
> 
> 时间：2013-03-26T13:18:29.623
> 
> 标签：gnuplot

我正在尝试绘制一个如下所示的 csv 文件：

a 531049
b 122198
c 3411487
d 72420
e 1641
f 2181578
。.
. .
. .

但这些值应该使用另一个格式相同的 csv 文件进行缩放。即其他文件
a 45
b 12 ...

我想绘制 531049/45 等等。第一列是 x 轴，第二列是 y 轴

在不合并 2 个文件的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:50:40.790

Gnuplot 的使用旨在从单个文件/流中读取数据，因此您需要以某种方式合并这两个文件。我会使用`python`它，因为它是我几乎所有事情的首选工具。我会编写一个从 2 个文件中读取数据并将数据写入标准输出的脚本。就像是：

```
#merge.py
import sys
file1,scale_factor_file = sys.argv[1:]

#Read the scale factors into a dictionary
d = {}
with open(scale_factor_file) as sf:
    for line in sf:
        key,scale_factor = line.split()
        d[key] = float(scale_factor)

#Now open the other file, scaling as we go:
with open(file1) as fin:
    for line in fin:
        key,value = line.split()
        print key,float(value)/d.get(key,1.0) 
```

现在您可以使用 gnuplot 从管道中读取数据的能力来绘制数据：

```
plot '< python merge.py datafile file_with_scale_factors' using 2 
```

# php - 如何使用 wordpress 上的 update_field 在 ACF 上上传图像

> ID：15638046
> 
> 赞同：18
> 
> 时间：2013-03-26T13:18:34.113
> 
> 标签：php, wordpress, forms, http-post

我有一个表单，其中有一个上传 ( `$_FILES['watch_photo']`) 字段。

我环顾四周，将这个功能放在一起。

它基本上会获取所有相关信息，因此它可以在将来重用，完成后它将返回一个 $pid 和文件 URL 的数组。

问题是 ACF 没有提供太多信息，如何使用`update_field()` [http://www.advancedcustomfields.com/resources/functions/update_field/将图像添加到其字段](http://www.advancedcustomfields.com/resources/functions/update_field/)

```
function my_update_attachment($f,$pid,$t='',$c='') {
  wp_update_attachment_metadata( $pid, $f );
  if( !empty( $_FILES[$f]['name'] )) { //New upload
    require_once( ABSPATH . 'wp-admin/includes/file.php' );

    $override['action'] = 'editpost';
    $file = wp_handle_upload( $_FILES[$f], $override );

    if ( isset( $file['error'] )) {
      return new WP_Error( 'upload_error', $file['error'] );
    }

    $file_type = wp_check_filetype($_FILES[$f]['name'], array(
      'jpg|jpeg' => 'image/jpeg',
      'gif' => 'image/gif',
      'png' => 'image/png',
    ));
    if ($file_type['type']) {
      $name_parts = pathinfo( $file['file'] );
      $name = $file['filename'];
      $type = $file['type'];
      $title = $t ? $t : $name;
      $content = $c;

      $attachment = array(
        'post_title' => $title,
        'post_type' => 'attachment',
        'post_content' => $content,
        'post_parent' => $pid,
        'post_mime_type' => $type,
        'guid' => $file['url'],
      );

      foreach( get_intermediate_image_sizes() as $s ) {
        $sizes[$s] = array( 'width' => '', 'height' => '', 'crop' => true );
        $sizes[$s]['width'] = get_option( "{$s}_size_w" ); // For default sizes set in options
        $sizes[$s]['height'] = get_option( "{$s}_size_h" ); // For default sizes set in options
        $sizes[$s]['crop'] = get_option( "{$s}_crop" ); // For default sizes set in options
      }

      $sizes = apply_filters( 'intermediate_image_sizes_advanced', $sizes );

      foreach( $sizes as $size => $size_data ) {
        $resized = image_make_intermediate_size( $file['file'], $size_data['width'], $size_data['height'], $size_data['crop'] );
        if ( $resized )
          $metadata['sizes'][$size] = $resized;
      }

      $attach_id = wp_insert_attachment( $attachment, $file['file'] /*, $pid - for post_thumbnails*/);

      if ( !is_wp_error( $id )) {
        $attach_meta = wp_generate_attachment_metadata( $attach_id, $file['file'] );
        wp_update_attachment_metadata( $attach_id, $attach_meta );
      }

      return array(
        'pid' =>$pid,
        'url' =>$file['url']
      );
      // update_post_meta( $pid, 'a_image', $file['url'] );
    }
  }
} 
```

然后我使用了以下代码：

*   创建一个帖子，然后
*   上传然后用于`my_update_attachment`处理图像
*   最后更新高级自定义字段

编码：

```
$args= array(   'post_type' => 'watches',       'post_status' => 'publish'    );

$watch = wp_insert_post($args);
$att = my_update_attachment('watch_image',$watch);
update_field('field_512e085a9372a',$att['url'],$watch); 
```

我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T15:10:36.567

我有同样的问题，你几乎是对的，这对我也有帮助。

查看 ACF 和`update_field`接受附件 ID`pid`与`url`

您可以替换返回数组：

```
return array(
    'pid' =>$pid,
    'url' =>$file['url']
); 
```

使用以下数组：

```
return array(
  'pid' =>$pid,
  'url' =>$file['url'],
  'file'=>$file,
  'attach_id'=>$attach_id
); 
```

然后改变

```
update_field('field_512e085a9372a',$att['url'],$watch); 
```

与以下

```
update_field('field_512e085a9372a',$att['attach_id'],$watch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T10:24:32.247

这条线
`if ( !is_wp_error( $id )) {`
应该是
`if ( !is_wp_error( $attach_id )) {`

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-11-19T18:30:01.053

检查这个插件：

[https://wordpress.org/plugins/acf-frontend-display/](https://wordpress.org/plugins/acf-frontend-display/)

1.  使用 frontendUploader 字段创建 ACF 表单（插件扩展）
2.  将您的 ACF 表单添加到帖子中，并使用帖子管理面板使用复选框在前面查看

# php - Flickr API 有时会返回 false，但通常可以，为什么？

> ID：15638047
> 
> 赞同：0
> 
> 时间：2013-03-26T13:18:39.207
> 
> 标签：php, flickr

我正在使用 PHP 构建此 URL，并使用 CURL 从 Flickr 获取结果。

`http://api.flickr.com/services/rest?api_key=APIKEY&format=php_serial&method=flickr.photosets.getPhotos&photoset_id=72157594403088940&per_page=200&extras=description,url_l,url_c,url_z,url_m,url_n,url_s,url_t`

当然，那里有一个真正的 API 密钥。无论如何，它有时会返回 bool(false)，有时会返回正确的图像列表。通常这就像在给定日期的第一次检查返回 false，然后在刷新后它会正确获取列表。我用来获取结果的 CURL 函数：

```
function file_get_contents_curl($url, $curlopt = array()){      
        if(in_array('curl', get_loaded_extensions())){
            $ch = curl_init();
            $default_curlopt = array(
            CURLOPT_TIMEOUT => 2,
            CURLOPT_RETURNTRANSFER => 1,
            CURLOPT_FOLLOWLOCATION => false,
            CURLOPT_USERAGENT => "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101203 AlexaToolbar/alxf-1.54 Firefox/3.6.13 GTB7.1"
            );
            $curlopt = array(CURLOPT_URL => $url) + $curlopt + $default_curlopt;
            curl_setopt_array($ch, $curlopt);
            $response = curl_exec($ch);
            if($response === false)
            trigger_error(curl_error($ch));
            curl_close($ch);
            return $response;
        }else{
            return file_get_contents($url);
        }
    } 
```

这是什么，为什么会发生？也许它与我的 CURL 函数（我最好的选择）有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:29:06.447

您已将 设置`CURLOPT_TIMEOUT`为 2 秒。您能否在执行完成之前验证代码是否超时。如果是这样，请尝试增加一点，看看它是否有效。

只是一个猜测。

# python - Django名称错误

> ID：15638048
> 
> 赞同：0
> 
> 时间：2013-03-26T13:18:42.100
> 
> 标签：python, django, model-view-controller, error-handling

我设置了 python 和 django，只是想构建一个简单的应用程序'mysite'

我在根文件夹中创建了 views.py，而我的 urls.py 位于 root/mysite/ 当我调用 /hello 时，它给了我以下错误。我应该怎么做才能解决它？

```
NameError at /hello
name 'hello' is not defined
Request Method: GET
Request URL:    ~~:8000/hello
Django Version: 1.5
Exception Type: NameError
Exception Value:    
name 'hello' is not defined
Exception Location: c:\Python27\Django-1.5\mysite\mysite\urls.py in <module>, line 17
Python Executable:  c:\Python27\python.exe
Python Version: 2.7.2
Python Path:    
['c:\\Python27\\Django-1.5\\mysite',
 'c:\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg',
 'c:\\Python27\\lib\\site-packages\\pymysql-0.3-py2.7.egg',
 'C:\\Windows\\system32\\python27.zip',
 'c:\\Python27\\DLLs',
 'c:\\Python27\\lib',
 'c:\\Python27\\lib\\plat-win',
 'c:\\Python27\\lib\\lib-tk',
 'c:\\Python27',
 'c:\\Python27\\lib\\site-packages']
Server time:    Tue, 26 Mar 2013 18:40:41 +0530
Traceback Switch to copy-and-paste view

c:\Python27\lib\site-packages\django\core\handlers\base.py in get_response
                    response = middleware_method(request)
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\middleware\common.py in process_request
            if (not urlresolvers.is_valid_path(request.path_info, urlconf) and
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\core\urlresolvers.py in is_valid_path
        resolve(path, urlconf)
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\core\urlresolvers.py in resolve
    return get_resolver(urlconf).resolve(path)
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\core\urlresolvers.py in resolve
            for pattern in self.url_patterns:
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\core\urlresolvers.py in url_patterns
        patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\core\urlresolvers.py in urlconf_module
            self._urlconf_module = import_module(self.urlconf_name)
 ...
▶ Local vars
c:\Python27\lib\site-packages\django\utils\importlib.py in import_module
    __import__(name)
 ...
▶ Local vars
c:\Python27\Django-1.5\mysite\mysite\urls.py in <module>
                       ('^hello/$', hello),
 ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:22:27.090

在 urls.py 中更改以下行

```
('^hello/$', hello), 
```

至

```
('^hello/$', 'views.hello'), 
```

或者如果你使用前缀然后做

```
('^hello/$', 'hello'), 
```

或者做

```
from views import hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:21:36.203

```
c:\Python27\Django-1.5\mysite\mysite\urls.py in <module>
                       ('^hello/$', hello), 
```

您还没有定义`hello`，我相信您可以导入 hte 函数或将其作为字符串引用

```
from mysite.myapp.views import hello 
```

或者

```
'mysite.myapp.views.hello' 
```

# node.js - 捆绑 node.js 模块

> ID：15638052
> 
> 赞同：2
> 
> 时间：2013-03-26T13:19:00.977
> 
> 标签：node.js, module

我有这些模块要导入到我的项目中：

```
var ModuleA = require('./ModuleA.js'),
    ModuleB = require('./ModuleB.js'),
    ModuleC = require('./ModuleC.js'),
    ModuleD = require('./ModuleD.js'); 
```

现在，这很好用，但**我想将它们捆绑在一起，而是调用一个模块来处理加载所有这些“子”模块**，如下所示：

```
// app.js ----------------------------

var Module = require('./Module.js');

// Module.js -------------------------

var ModuleA = require('./ModuleA.js'),
    ModuleB = require('./ModuleB.js'),
    ModuleC = require('./ModuleC.js'),
    ModuleD = require('./ModuleD.js');

// ModuleA.js ------------------------

exports.method = function() { return true } 
```

现在，我希望能够访问 'sub'bundles' 导出，如下所示：

```
ModuleA.method(); 
```

**这可能吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:29:05.260

尝试这个：

```
// ModuleA.js
module.exports.method = function () { return true; }

// Module.js
module.exports.A = require('./ModuleA');
module.exports.B = require('./ModuleB');

// app.js
var myModule = require('./Module');
myModule.A.method(); 
```

如果你想`ModuleA`直接调用 on的方法，`myModule`你需要在文件中重新导出它们，`Modules.js`如下所示：

```
// ModuleA.js
module.exports.method = function () { return true; }

// Module.js
module.exports.methodA = require('./ModuleA').method;
module.exports.methodB = require('./ModuleB').method;

// app.js
var myModule = require('./Module');
myModule.methodA(); 
```

这能解决您的问题吗？

或者，您可以使用允许您一次导入多个文件并使用单个对象导出它们的[node-require-all 。](https://github.com/felixge/node-require-all)一个例子可能是：

```
var modules = require('require-all')({
  dirname    : __dirname + '/modules',
  filter     : /(Module.+)\.js$/,
  excludeDirs: /^\.(git|svn)$/
}); 
```

之后，您有一个`modules`包含单个模块作为属性的对象：

```
modules.ModuleA.method(); 
```

（我没有测试过这段代码，但基本上它应该是这样工作的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:24:11.337

在 Module.js 中，执行以下操作：

```
var ModuleA = require('./ModuleA.js'),
for (var exported in ModuleA) {
  exports[exported] = ModuleA[exported];
} 
```

由 ModuleA 导出的所有对象（函数等）现在也由 Module 导出。

# python - 用 NaN 评估

> ID：15638053
> 
> 赞同：0
> 
> 时间：2013-03-26T13:19:00.903
> 
> 标签：python, numpy

我想在`np.all()`参考信号的帮助下比较信号。引用可以包含`np.nan`. 在这个 NaN 位置，信号是否满足比较条件并不重要。以下是示例代码。但是这段代码不起作用。我可以比较一个`for`-loop 中的每个元素，但有没有一种聪明的方法来进行这种比较？

```
import numpy as np

reference = np.array([np.nan, 1])
signal = np.array([2, 2])

print np.all(reference < signal) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:23:23.393

使用适当的切片将比较限制为非 nan 值。您也可以使用`np.finite`而不是`~np.isnan`

```
import numpy as np

reference = np.array([np.nan, 1])
signal = np.array([2, 2])
idx = ~np.isnan(reference)

print np.all(reference[idx] < signal[idx]) 
```

# jquery - phonegap 安卓登录表单

> ID：15638057
> 
> 赞同：0
> 
> 时间：2013-03-26T13:19:12.477
> 
> 标签：jquery, cordova, jquery-plugins, jquery-validate, phonegap-plugins

* ***为什么我无法在移动端获得验证我没有在字段上获得验证甚至在浏览器中获得应用验证但未能进入移动端。谁能指出我做错了什么？**

```
<!DOCTYPE html>
<html>
  <head>
   <title>first example</title>
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/lib/cordova-2.0.0.js"></script>
  <script type="text/javascript" src="js/lib/jquery.js"></script>
  <script src="js/lib/jquery.mobile-1.1.1.js"></script>
  <script type="text/javascript" src="js/lib/jqm.page.params.js"></script>
 <script type="text/javascript" src="js/lib/jquery.validate.js"></script>
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
   <script type="text/javascript" src ="js/lib/jquery.validate.min.js"></script>
   <script type="text/javascript" src="js/lib/additional-methods.min.js">
   <script type="text/javascript" charset="utf-8" src="js/lib/helloworldjs/alldatabse.js"></script>
<script  type="text/javascript"> 
$(document).ready(
 function()
  { $("#formregistration").validate(
    { rules:{
          usernameforreg:
             {
              required:true,
              minlength:4,
              maxlength:10

             },
          useremail:
             {
              required:true,
              email:true

             },
         passwordforreg:
              {
              required:true,
              minlength:8
              },
         retypepassword:
             {
             required:true,
             equalTo:"#passwordforreg"
             }
            },
      messages:{
          usernameforreg:
             {
              required:"pls enter name",
             minlength:$.format("Keep typing, at least {0} characters required!"),
             maxlength:$.format("Maximum {0} characters allowed!")

             },
         useremail:
             {
             required:"pls enter email id",
             email:"enter valid email id"
             },
        passwordforreg:
              {
              required:"pls enter password",
              minlength:$.format("at least {0} characters required!")
              },     
         retypepassword:
             {
             required:"pls confirm password",
             equalTo:"both passwords must match"
             }

             }

    });
     $("#formlogin").validate(
       {rules:
           {username:
                {
                  required:true,
                  minlength:4
                },
             password:
               {
                 required:true,
                 minlength:8
               }
           },
        messages:
           {username:
              {
                required:"pls enter user name",
                minlength:"pls enter atleast {0} characters"
              },
            password:
              {
                required:"pls enter password",
                minlength:"password should be atleast {0} characters"
              }

           }
       });

  });

 </script> 
</head>  
 <body>

 <div data-role="page" id="login">
 <form name="login" id="formlogin" method="get" action="" accept-charset = "utf-8">

 <div style="background-image: url(css/lib/images/purty_wood.png); background-color:#D3BEAC; height:50%; margin-top:200px; border:6px groove orange;  width:100%; margin:0 auto;">

   <label for="username">USER NAME:</label>
   <input type="text" name="username" id= "usrname" placeholder="ali"  size="10" style="color:#ff9900;" required></input> </br>

   <label for = "password">PASSWORD:</label>
   <input type = "password" name="password" id="usrpswd" placeholder="please enter your password" style="color:#ff9900;" required title="User name is required"></input></br>

   <a href="#" id ="loginbtn" data-role="button" data-theme="b" data-mini="true" data-inline="true" onclick="doLogin1();" style= "width:120px;" "height:60px;" "float:right;">LOGIN</a>
   <a href="#" id ="signupbtn" data-role="button" data-theme="b" data-mini="true" data-inline="true" onclick="showRegisterForm();" style="width:120px;" "height:60px;" "float:right;">SIGN UP</a>

 </div>
</form>
 </div> 

<div data-role="page" id="registration">
 <form name="" id="formregistration"  method="get" action="">

  <div style="background-image:url('/helloworld/assets/www/css/lib/images/purty_wood.png'); height:30%; border:3px solid-black; position:absolute; top:25%; left:25%; right:25%; width:350px;">

  <label for="usernameforreg">USER NAME:</label>
  <input type="text" name="usernameforreg" id="usrnameforreg" placeholder="pls enter your name" style="color:#ff9900;" required></input></br>

  <label for="emailid">EMAIL ID:</label> 
  <input type="email" name="useremail" id="useremail" placeholder="please enter your email id" style="color:#ff9900;" required></input></br>

  <label for="passwordforreg">PASSWORD:</label>
  <input type="password" name="passwordforreg" id="passwordforreg" palceholder="pls enter your password" style="color:#ff9900;"></input></br>

  <label for="retypepassword">RETYPE PASSWORD:</label>
  <input type="password" name="retypepassword" id="retypepasswordforreg" palceholder="retype password" style="color:#ff9900;" classrequired></input></br>

  <a href="#" id="submitbtn" data-role="button" data-theme="b" data-mini="true" onclick="registrationProcess();" style="width:120px;" "height:60px;" "float:center;">SUBMIT</a>

  </div>
 </form> 

</div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:25:15.720

如果您可以在删除所有多余和多余的代码的情况下发布您的示例，那么在 SO 对我们来说会更容易。例如，我们不需要查看所有的内联样式。

总之，我发现了一堆问题...

* * *

1）您没有正确包含脚本。您首先需要（并且一次）jQuery，然后是其他所有内容。非常仔细地检查你的语法；您缺少`</script>`. `additional-methods.js`您也不需要同时包含同一脚本的缩小版本和未缩小版本……只需选择一个。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/lib/jquery.mobile-1.1.1.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/lib/cordova-2.0.0.js"></script>
<script type="text/javascript" src="js/lib/jqm.page.params.js"></script>
<script type="text/javascript" src="js/lib/jquery.validate.min.js"></script>
<script type="text/javascript" src="js/lib/additional-methods.min.js"></script>
<script type="text/javascript" src="js/lib/helloworldjs/alldatabse.js"></script> 
```

* * *

2) 在您的表单中，您有一些无效的 HTML。输入和换行符是“自动关闭的”......

**不是**这样的： `<input></input>`和`</br>`

**是的，像这样：** `<input />`和`<br />`

* * *

3) 您正在使用内联 JavaScript 来使用内联`onclick`事件处理程序调用其他函数。由于您使用的是 jQuery，因此您不妨充分利用它。删除内联 JavaScript 并执行类似的操作，这可以有效地将您的锚标记变成一个提交按钮。

```
$('#loginbtn').on('click', function (e) {
    e.preventDefault();
    $("#formlogin").submit();
}); 
```

* * *

4) 在表单 HTML 中，您可以更改`required`为`required="required"`更好的语法。顺便说一句，由于您已经`required`在 内声明`.validate()`，因此您无需在 HTML 中再次指定这些规则......做一个或另一个......不需要两者。我从 HTML 中删除了这些。

* * *

5）由于您已经在 中指定了所有消息`.validate()`，因此我`title`从输入中删除了该属性。

* * *

6）您在几个地方拼错了`placeholder`属性。`palceholder`

* * *

随着一切（我认为）修复，jQuery Validation 似乎正在工作：

**演示：http: [//jsfiddle.net/5T3tq/1/](http://jsfiddle.net/5T3tq/1/)**

您现在可以慢慢添加其他插件和功能

**jQuery** :

```
$(document).ready(function () {

    $('#loginbtn').on('click', function (e) {
        e.preventDefault();
        $("#formlogin").submit();
    });

    $('#submitbtn').on('click', function (e) {
        e.preventDefault();
        $("#formregistration").submit();
    });

    $('#signupbtn').on('click', function (e) {
        e.preventDefault();
        //  show register form
        $('#registration').show();
    });

    $("#formregistration").validate({
        rules: {
            usernameforreg: {
                required: true,
                minlength: 4,
                maxlength: 10

            },
            useremail: {
                required: true,
                email: true

            },
            passwordforreg: {
                required: true,
                minlength: 8
            },
            retypepassword: {
                required: true,
                equalTo: "#passwordforreg"
            }
        },
        messages: {
            usernameforreg: {
                required: "pls enter name",
                minlength: $.format("Keep typing, at least {0} characters required!"),
                maxlength: $.format("Maximum {0} characters allowed!")

            },
            useremail: {
                required: "pls enter email id",
                email: "enter valid email id"
            },
            passwordforreg: {
                required: "pls enter password",
                minlength: $.format("at least {0} characters required!")
            },
            retypepassword: {
                required: "pls confirm password",
                equalTo: "both passwords must match"
            }
        }
    });

    $("#formlogin").validate({
        rules: {
            username: {
                required: true,
                minlength: 4
            },
            password: {
                required: true,
                minlength: 8
            }
        },
        messages: {
            username: {
                required: "pls enter user name",
                minlength: "pls enter atleast {0} characters"
            },
            password: {
                required: "pls enter password",
                minlength: "password should be atleast {0} characters"
            }
        }
    });

}); 
```

**HTML**：

```
<div data-role="page" id="login">
    <form name="login" id="formlogin" method="get" action="" accept-charset="utf-8">
        <div style="background-image: url(css/lib/images/purty_wood.png); background-color:#D3BEAC; height:50%; margin-top:200px; border:6px groove orange;  width:100%; margin:0 auto;">
            <label for="username">USER NAME:</label>
            <input type="text" name="username" id="usrname" placeholder="ali" size="10" style="color:#ff9900;" />
            <br />
            <label for="password">PASSWORD:</label>
            <input type="password" name="password" id="usrpswd" placeholder="please enter your password" style="color:#ff9900;" />
            <br /> <a href="#" id="loginbtn" data-role="button" data-theme="b" data-mini="true" data-inline="true" style="width:120px;" "height:60px;" "float:right;">LOGIN</a>
 <a href="#" id="signupbtn" data-role="button" data-theme="b" data-mini="true" data-inline="true" style="width:120px;" "height:60px;" "float:right;">SIGN UP</a>
        </div>
    </form>
</div>
<div data-role="page" id="registration" style="display: none;">
    <form name="" id="formregistration" method="get" action="">
        <div style="background-image:url('/helloworld/assets/www/css/lib/images/purty_wood.png'); height:30%; border:3px solid-black; position:absolute; top:25%; left:25%; right:25%; width:350px;">
            <label for="usernameforreg">USER NAME:</label>
            <input type="text" name="usernameforreg" id="usrnameforreg" placeholder="pls enter your name" style="color:#ff9900;" />
            <br />
            <label for="emailid">EMAIL ID:</label>
            <input type="email" name="useremail" id="useremail" placeholder="please enter your email id" style="color:#ff9900;" />
            <br />
            <label for="passwordforreg">PASSWORD:</label>
            <input type="password" name="passwordforreg" id="passwordforreg" placeholder="pls enter your password" style="color:#ff9900;" />
            <br />
            <label for="retypepassword">RETYPE PASSWORD:</label>
            <input type="password" name="retypepassword" id="retypepasswordforreg" placeholder="retype password" style="color:#ff9900;" />
            <br/> <a href="#" id="submitbtn" data-role="button" data-theme="b" data-mini="true" style="width:120px;" "height:60px;" "float:center;">SUBMIT</a>
        </div>
    </form>
</div> 
```

# sql-server-2008 - 我无法在 BIDS 中显示部署设置

> ID：15638065
> 
> 赞同：0
> 
> 时间：2013-03-26T13:19:34.603
> 
> 标签：sql-server-2008, ssas, bids

我有一个分析服务数据库，其中包含数据源、数据源视图、维度和多维数据集。我想通过右键单击最高级别，然后单击属性来为其编辑项目属性，但我什么也没得到：它不显示属性。如果我创建一个新的空项目，我可以毫无困难地获得属性页面。

是否有可能出于安全原因而被阻止？或者是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:55:22.953

听起来您已经使用了 BIDS 菜单命令 File / Open / Analysis Services Database。在这种情况下，您将直接编辑架构。单击保存将“部署”您的更改。

# search - 谷歌自定义搜索，能够搜索特定部分

> ID：15638069
> 
> 赞同：0
> 
> 时间：2013-03-26T13:19:50.480
> 
> 标签：search, google-custom-search

我想对我的 wordpress 设置使用谷歌自定义搜索。我需要自定义搜索才能搜索整个站点，或者如果勾选了复选框，则仅在站点的某个类别中搜索。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T04:18:39.417

您可以拥有 2 个自定义搜索引擎 - 一个搜索您的整个网站，另一个搜索您提到的特定类别。根据复选框是否被选中，您可以在页面中显示相应的搜索框。[http://preciselyconcise.com/apis_and_installations/google_custom_search.php](http://preciselyconcise.com/apis_and_installations/google_custom_search.php)中展示了如何选择特定站点或整个域的演示

# java - Spring 使用 ajax 和 jquery 上传文件

> ID：15638071
> 
> 赞同：0
> 
> 时间：2013-03-26T13:19:53.357
> 
> 标签：java, jquery

```
var urlUpload = "${root}manager/uploadFile.html";
var params = $('#topicForm').serialize();

    $.ajax({
        type: 'POST',
        url: urlUpload,
        data: params,
        contentType: 'multipart/form-data',
                processData: false,
        success: function(data) {
            alert("success");
        }
    });

@RequestMapping(value="/manager/uploadFile.html", method = RequestMethod.POST)
public String uploadFile(@ModelAttribute("topicForm") TopicForm topicForm,        
@RequestParam("topicDoc") MultipartFile multipartFile ModelMap model) { ... } 
```

我收到以下异常

> org.springframework.web.multipart.MultipartException：无法解析多部分 servlet 请求；嵌套异常是 org.apache.commons.fileupload.FileUploadException：请求被拒绝，因为没有找到多部分边界。

该插件运行良好，谢谢。

```
var urlUpload = "${root}manager/uploadFile.html?categoryId="+$("#category").val()+"&topicName="+$("#topicName").val();
 $.ajaxFileUpload({
 url:urlUpload, 
 secureuri:false,
 fileElementId:'fileupload',
 dataType: 'html',
 success: function (data, status) {
   alert("success");
 }
}); 
```

该插件工作正常，现在我需要将几个表单字段与输入文件一起发送到控制器。在上面的 ajax 调用中，我将值附加到 url。有没有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:36:57.227

问题是您正在尝试上传表单的 URL 编码序列化，同时声称它是多部分的（请参阅JQuery函数的[文档）。](http://api.jquery.com/serialize/)`serialize()`

您需要使用一个插件来创建正确的请求。[这](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)是我用过的一个。

或者，您可以使用[HTML5](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)上传文件。我没有这样做。

# python - 使用 TCP 和 Scapy 向 DNS 请求添加长度前缀

> ID：15638080
> 
> 赞同：0
> 
> 时间：2013-03-26T13:20:15.733
> 
> 标签：python, tcp, dns, scapy, rfc1035

在关于 DNS 的 RFC 1035 中，它是这样写的：

> 4.2.2\. TCP 使用情况
> 
> 通过 TCP 连接发送的消息使用服务器端口 53（十进制）。消息以给出消息长度的两字节长度字段为前缀，不包括两字节长度字段。此长度字段允许低级处理在开始解析之前组装完整的消息。

我想用 TCP 发送一个 DNS 请求，但我不知道如何在 DNS 请求之前添加这两个字节。我尝试使用该代码：

```
from scapy.all import *

ip=IP(dst="216.239.32.10")

request = DNS(rd=1, qd=DNSQR(qname = "google.be", qtype="A")) #size = 27(dec) = 1b (hex)
twoBytesRequestSize = "\x1b\x00" 
completeRequest = str(request) + twoBytesRequestSize

SYN=ip/TCP(sport=RandNum(1024,65535), dport=53, flags="S", seq=42)
SYNACK=sr1(SYN)

ACK=ip/TCP(sport=SYNACK.dport, dport=53, flags="A", seq=SYNACK.ack, ack=SYNACK.seq + 1)
send(ACK)

DNSRequest = ip/TCP(sport=SYNACK.dport, dport=53, flags="PA", seq=SYNACK.ack, ack=SYNACK.seq + 1) / completeRequest
DNSReply = sr1(DNSRequest, timeout = 1) 
```

但是我的 paquet 被解释为没有 DNS 层的简单 TCP 数据包。

您是否有在 DNS 请求之前添加这两个字节前缀的想法？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:53:49.473

该解决方案使用大端表示法。`\x00\x1b`而不是`\x1b\x00`. 但是上面的其余代码是正确的。谢谢阿明。

# html - 页面加载后移动视图变小

> ID：15638081
> 
> 赞同：6
> 
> 时间：2013-03-26T13:20:19.750
> 
> 标签：html, css, responsive-design

我开发的其中一个网站有一点问题。问题很简单，但解决方案似乎有点困难。

**问题**

问题是页面最初应该在移动设备上呈现，但在页面加载完成后，页面会调整大小以适应视口。没什么奇怪的，几乎每个无响应的网站都会发生这种情况。但奇怪的是，只有 75% 的可用宽度被使用。

我已经将设计的基础/切片版本与生产版本进行了比较。基础版本会按应有的方式渲染（100% 宽度）。我试图找出 CSS 中的差异，但我只能找到几个，我尝试重置那些，但没有奏效。

此外，我尝试禁用 javascript（它只是 Lightbox 和 1 JqueryUI“AddClass”效果）。javascript 效果只有一项任务：页面加载后，标题将从 480px 调整为 220px 高度。页面上任何元素的宽度都没有更改。

最后但同样重要的是，我启动了 Adob​​e Edge Inspect 并查看了移动设备的页面源。但不幸的是，我无法在页面上发现任何超过“body”标签宽度的元素。唯一超过宽度的是标题图像，但图像在 div 内（100% 宽度）`overflow:hidden`

**基于和生产版本**

如果有人愿意看看是什么搞砸了渲染，那就太棒了。我似乎无法找出导致问题的原因。

基于（工作）：`http://www.nambi.nl/lefunq/` 生产（在移动设备上以 75% 宽度渲染）：`http://www.lefunq.com/_index.php`

感谢所有花时间研究这个问题的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:07:51.367

您的问题是由facepile代码引起的：

```
<div
  class="fb-facepile"
  data-href="http://www.facebook.com/pages/Le-Funq/113332665510819"
  data-size="large"
  data-max-rows="1"
  data-width="450"
></div> 
```

**更多信息：**

一旦由于无效登录而无法加载facepile，页面就会调整大小。一旦我登录到 facebook 并显示 facepile，页面就会按应有的方式拉伸。我只需要找出导致奇怪缩放的原因，因为如果没有面部，它就是 0x0 `div`/`iframe`等。

**解决方案：**

我已经尝试了几件事。`Onload`或`Onready`事件，以及隐藏或删除 facepile 代码。最后，这些选项都没有奏效。缩放发生在面罩完全加载之前。最终的解决方案是 javascript 解决方法，检查是否有移动设备，如果有，则禁用 facepile 代码：

```
 if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) == false ) {
    document.write('<fb:facepile href="http://www.facebook.com/pages/Le-Funq/113332665510819" size="large" max_rows="1" show_count="false" width="450" class="facepile"></fb:facepile>');
  } 
```

我在这个答案中找到了检测浏览器是否移动的方法：

[在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:57:39.600

我在 Android 2.3.7 上尝试了原生浏览器、Firefox 和 Dolphin。

两个页面都以 100% 缩放呈现，并且在页面完全加载后缩放不会改变。

我相信这个问题是特定于您设备的软件的。

# asp.net - RadAjaxLoadingPanel 一段时间后消失

> ID：15638084
> 
> 赞同：1
> 
> 时间：2013-03-26T13:20:23.497
> 
> 标签：asp.net, telerik

我面临有关 RadAjaxLoadingPanel 的问题。我必须使用 Open Access 将 Excel 或 CSV 文件中的不同记录保存到我的数据库中。当查询开始并将数据保存在数据库中时，加载面板工作正常，但一段时间后，当一定数量的记录（比如 350 条记录）保存到数据库后，加载面板隐藏并且在保存数据时不显示任何进度D B。我研究了 RadAjaxLoadingPanel 的 MinDisplayTime 属性，但我需要根据我的记录数设置此属性，以便在所有记录都保存到数据库之前显示加载面板。

为了简要说明，我附上了我的问题的工作视频。您将在视频中看到加载面板在一段时间后消失，而记录被连续保存到数据库但加载面板消失了。

这是视频链接。 [http://screencast.com/t/oSkjTDheo](http://screencast.com/t/oSkjTDheo)

在我所有的记录都保存到数据库之前，我应该怎么做才能显示加载面板？有人可以尽快帮助我吗？

问候：卡姆兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:56:07.527

两分钟的页面请求超时已过期。浏览器将在停止等待之前等待两分钟的请求。

作为此操作的一部分，我看到了几件事：

1.  这是您演示的用于加载数据的同步操作。您可能希望使用推荐的[RadAsyncUpload 控件](http://www.telerik.com/products/aspnet-ajax/asyncupload.aspx)来加载文件。这样，您立即将控制权返回给页面。然后，您可以在后台异步执行数据加载，并在加载数据时显示进度表。

2.  您的数据加载速率约为每秒 3 条记录。那很慢，您使用什么过程来加载这些数据？500 条记录应在几秒钟内加载到单个表中。

# c# - 库消息处理

> ID：15638090
> 
> 赞同：0
> 
> 时间：2013-03-26T13:20:43.097
> 
> 标签：c#

我正在构建一个可以将复杂文件解析为数据模型的库。在解析期间以及在我正在构建的数据结构上进行一些其他操作期间，库内部可能会出现某些消息（信息、警告、错误）。

我需要一种方法让图书馆的用户获取这些消息。我正在考虑的所有东西都归结为一些静态事件或这些消息的静态列表。但我希望数据结构的每个对象都有自己的消息队列。

一个例子：

```
class Program
{
    static void Main(string[] args)
    {
        CalibData cd1 = new CalibData();
        cd1.LoadFile(@"C:\tmp\file.ext");
        var messageList = cd1.GetMessages();
        cd1.DoOtherStuff();

        CalibData cd2 = new CalibData();
        cd2.LoadFile(@"C:\tmp\file2.ext");
        cd2.LoadFile(@"C:\tmp\file3.ext2");

        messageList = cd1.GetMessages(); //Do other stuff could have produced new Messages
        var messageList2 = cd2.GetMessages();

    }
} 
```

您对如何实施这种行为有什么建议吗？我需要在每个实例内全局可访问的东西，但每个实例都有另一个全局信使。

附加信息：Internall 我正在使用一个 ANTLR 解析器，它会生成很多对象（50.000+）。一旦创建了数据结构，就会在对象上设置很多交叉引用，等等。我的主要问题是，我要么必须创建一个静态成员来处理这个问题，要么从 LoadFile() 将一个信使传递到我的函数调用中解析器，交叉引用等。在我看来，两者都是一个相当糟糕的选择。更改设计不是一种选择，因为我的问题还有更多。数据结构存储在 2 个文件中（1 个文件 = 描述，另一个文件 = 数据）。所以我可以调用类似的东西

```
CalibData cd = new CalibData();
cd.LoadFile("description file"); //after this call the datastructure is built, but it hasn't got any value data yet
cd.LoadFile("data file") //now the structure also has value data
cd.ClearData();
cd.LoadFile("yet another data file"); //same structure different data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:22:35.677

看起来你的`LoadFile`方法目前没有返回任何东西——为什么不让它返回一个包含错误、警告等的数据结构呢？不需要任何全局或静态的 - 甚至是持久的。只是方法调用的结果。

事实上，我*可能*会稍微改变一下，以便一个单独的类（而不是模型本身）负责加载，并且`LoadFile`调用将返回一个包含以下内容的结果：

*   信息和错误
*   生成的模型对象

这样，只要您有一个模型，您就知道它包含实际数据——而不是像以前那样“准备好加载”。

# mysql - 查找时差的SQL计算

> ID：15638094
> 
> 赞同：0
> 
> 时间：2013-03-26T13:21:00.767
> 
> 标签：mysql, sql, time, date-arithmetic

我使用 (NOW) 函数获取当前`TIME`并作为“到达时间”插入数据库。

如下所示：

```
$sql="INSERT INTO Time(Arrival_Time)
VALUES(NOW())"; 
```

类型是时间并插入为；

```
12:17:29 
```

我需要通过（当前时间 - 到达时间）计算等待时间；

示例：当前时间 (13:15) 到达时间 (12:15)

所以这将显示：

```
Waiting time 
1 hour 
```

这是我尝试过的解决方案；

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT Arrival_time, TIMEDIFF(Arrival_time,NOW()) as Waiting_Time FROM Time";
$result = mysqli_query($conn, $query) or die("Invalid query");

echo "<table border='1'>
<tr>
<th>Waiting Time</th>
</tr>";

while ($row = $result->fetch_object()){

 echo "<tr>
  <td>" . $row->Waiting_Time . "</td>
  </tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

编辑

```
$query = "SELECT Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(CURTIME(), Arrival_time)),'%H hours') as Waiting_Time FROM Time";"; 
```

显示

```
Waiting time 
3 hours 
```

我将如何使用`time`，如果; waiting_time 超过 3 小时，提示“此患者必须下次见！”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:24:50.007

您的 SQL 语句中所选字段之间缺少逗号。您正在将时间戳（字符串）与日期进行比较。您需要将字符串转换回最新状态。

改变这个

```
SELECT Arrival_time TIMEDIFF(Arrival_time,NOW()) as Waiting_Time FROM Time 
```

至

```
SELECT Arrival_time, TIMEDIFF(DATETIME(Arrival_time),NOW()) as Waiting_Time FROM Time 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:23:17.903

您可以尝试使用`CURRENT_TIME`or`CURTIME()`代替`NOW()`：

```
SELECT Arrival_time, TIMEDIFF(Arrival_time,CURRENT_TIME) as Waiting_Time FROM Time; 
```

[编辑]
因为`NOW()`是**DATETIME**，所以不仅仅是时间。[MySQL 文档](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)

[添加]
您可以使用[TIME_FORMAT(time_diff, '%H hours')](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time-format)来获取小时数。
并删除`-`, add`ABS()`方法来获取绝对值：

```
SELECT Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(Arrival_time,CURRENT_TIME)),'%H hours') as Waiting_Time FROM Time; 
```

[如果 timediff > 3 则更改返回值]

```
SELECT Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(Arrival_time,CURRENT_TIME)),'%H hours left') as Waiting_Time FROM Time WHERE CAST(TIME_FORMAT(ABS(TIMEDIFF(Arrival_time,CURRENT_TIME)),'%H') as UNSIGNED INTEGER)>3 
```

您可以使用 timediff 值进行所有您想要的操作...在这里，查询只返回差异大于 3 小时的行...

# node.js - 使用 Node.js 和 WebSockets 流式传输二进制文件

> ID：15638096
> 
> 赞同：10
> 
> 时间：2013-03-26T13:21:06.450
> 
> 标签：node.js, websocket

我一直在谷歌上搜索这个并环顾 stackoverflow 一段时间，但没有找到解决方案 - 因此发布了这篇文章。

出于好奇，我在玩 Node.js 和 WebSockets。我正在尝试将一些二进制数据（mp3）流式传输到客户端。到目前为止，我的代码如下，但显然没有按预期工作。

我怀疑我的问题是我实际上并没有从服务器发送二进制数据，并且想要一些澄清/帮助。

这是我的服务器...

```
var fs = require('fs');
var WebSocketServer = require('ws').Server;

var wss = new WebSocketServer({port: 8080,host:"127.0.0.1"});
wss.on('connection', function(ws) {    
    var readStream = 
    fs.createReadStream("test.mp3", 
     {'flags': 'r',
      'encoding': 'binary', 
      'mode': 0666, 
      'bufferSize': 64 * 1024});

    readStream.on('data', function(data) {
        ws.send(data, {binary: true, mask: false});
    });
}); 
```

还有我的客户...

```
context = new webkitAudioContext();
var ws = new WebSocket("ws://localhost:8080");
ws.binaryType = 'arraybuffer';

ws.onmessage = function (evt) {
    context.decodeAudioData(
    evt.data,
        function(buffer) {
            console.log("Success");
        }, 
        function(error) {
            console.log("Error");
        });
}; 
```

对 decode 的调用总是以错误回调结束。我假设这是因为它收到了错误的数据。

所以我的问题是如何正确地将文件流式传输为二进制文件？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:05:43.303

您的服务器正在做的是向您的客户端发送包含 64 KB 块的二进制音频数据的消息。您的客户应该在调用之前重建音频文件`decodeAudioData`。

`decodeAudioData`每次您的客户在 websocket 上收到消息时，您都会打电话。您必须创建一个单独的缓冲区才能将所有块添加到其中。然后在传输完成后，缓冲区应该被输入到`decodeAudioData`.

你现在有两个选择：

1.  您在不使用流事件的情况下加载整个文件（fs.read）并使用 ws.send 发送整个文件（很容易做到）
2.  您使用流事件，修改您的客户端以接受数据块并在调用之前组装它们`decodeAudioData`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:12:41.650

问题解决了。

我通过从传递给“createReadStream()”的选项中删除“'encoding': 'binary'”参数和解决方案...

[decodeAudioData 返回一个空错误](https://stackoverflow.com/questions/10365335/decodeaudiodata-returning-a-null-error?answertab=active#tab-top)

根据我的一些评论，当我更新 createReadStream 选项时，第一个块正在播放，但所有其他块正在执行来自 decodeAudioData() 的 onError 回调。上面链接中的解决方案为我解决了这个问题。decodeAudioData() 似乎对于它接收到的块应该如何格式化有点挑剔。它们显然应该是有效的块......

[为 decodeAudioData (WebAudio API) 定义“有效的 mp3 块”](https://stackoverflow.com/questions/10470742/define-valid-mp3-chunk-for-decodeaudiodata-webaudio-api?lq=1)

# java - 在 java 1.5 中将 .png 转换为 .gif

> ID：15638097
> 
> 赞同：4
> 
> 时间：2013-03-26T13:21:07.907
> 
> 标签：java, png, gif

我有一个以 .png 格式生成的二维码。我希望将此文件转换为 .gif 格式以便在设备中使用它。我试图使用 ImageIO 类，但 java 1.5 但在 java 1.6 中不支持 gif 。我们的生产服务器有 java 1.5，有没有办法使用 Java 1.5 将 .png 文件转换为 .gif？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:53:03.183

我宁愿使用一些命令行转换工具（例如 ImageMagick）。但是，如果在您的环境中这是不可能或不实际的，并且如果您想在 Java 中执行此操作，您可以尝试[这个 backport](http://www.jakobnielsen.net/java6-gif-backport/)。

请记住，如果 PNG 是真彩色或具有透明度，则转换并非易事，而 GIF 则受到更多限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:42:25.257

无法从 png 直接转换为 gif。所以首先尝试将png转换为jpg格式并尝试将jpg转换为gif格式。

# python - 根据 Mayavi iso_surface 中的高度更改颜色

> ID：15638098
> 
> 赞同：1
> 
> 时间：2013-03-26T13:21:11.720
> 
> 标签：python, vtk, enthought, mayavi

是否可以根据点的高度（在 python / mayavi 中）更改等值面的颜色？我可以用我的脚本创建一个 iso_surface 可视化，但我不知道如何使 iso_surface 用 z 轴改变颜色，这样我们就可以说底部是黑色，顶部是白色。当从图形的正上方查看可视化时，我需要它来理解可视化。如果您知道实现此目的的任何其他方法，请也告诉我。我只想显示一个 iso_surface 图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:20:28.183

[我设法通过结合示例http://docs.enthought.com/mayavi/mayavi/auto/example_atomic_orbital.html#example-atomic-orbital](http://docs.enthought.com/mayavi/mayavi/auto/example_atomic_orbital.html#example-atomic-orbital)和[http://docs.enthought.com/mayavi/mayavi](http://docs.enthought.com/mayavi/mayavi/auto/example_custom_colormap.html)中的一些代码来做到这一点[/auto/example_custom_colormap.html](http://docs.enthought.com/mayavi/mayavi/auto/example_custom_colormap.html)。基本上你必须像原子轨道示例一样创建一个表面，然后让它根据 x 改变颜色。您必须为 x 创建一个值数组。我的代码是（相关部分）：

```
 #src.image_data.point_data.add_array(np.indices(list(self.data.shape)[self.nx,self.ny,self.nz])[2].T.ravel())
  src.image_data.point_data.add_array(np.indices(list(self.data.shape))[0].T.ravel())
  src.image_data.point_data.get_array(1).name = 'z'
  # Make sure that the dataset is up to date with the different arrays:
  src.image_data.point_data.update()
  # We select the 'scalar' attribute, ie the norm of Phi
  src2 = mlab.pipeline.set_active_attribute(src, point_scalars='scalar')
  # Cut isosurfaces of the norm
  contour = mlab.pipeline.contour(src2)
  # contour.filter.contours=[plotIsoSurfaceContours]
  # contour.filter.contours=[plotIsoSurfaceContours[0]]
  min_c = min(contour.filter._data_min * 1.05,contour.filter._data_max)
  max_c = max(contour.filter._data_max * 0.95,contour.filter._data_min)
  plotIsoSurfaceContours = [ max(min(max_c,x),min_c) for x in plotIsoSurfaceContours ]
  contour.filter.contours= plotIsoSurfaceContours

  # Now we select the 'angle' attribute, ie the phase of Phi
  contour2 = mlab.pipeline.set_active_attribute(contour, point_scalars='z')
  # And we display the surface. The colormap is the current attribute: the phase.
  # mlab.pipeline.surface(contour2, colormap='hsv')
  xxx = mlab.pipeline.surface(contour2, colormap='gist_ncar')
  colorbar = xxx.module_manager.scalar_lut_manager
  colorbar.reverse_lut = True
  lut = xxx.module_manager.scalar_lut_manager.lut.table.to_array()
  lut[:,-1] = int(plotIsoSurfaceOpacity * 254)
  xxx.module_manager.scalar_lut_manager.lut.table = lut
  # mlab.colorbar(title='Phase', orientation='vertical', nb_labels=3) 
```

self.data 是我的数据，不知什么原因，如果要设置表面的不透明度，必须先反转 lut，然后再设置不透明度。乘以 254 而不是 255 是为了避免 mayavi 中可能出现的错误。我希望这可以帮助别人。

# javascript - 用于匹配 URL 中的多个正斜杠的正则表达式

> ID：15638104
> 
> 赞同：16
> 
> 时间：2013-03-26T13:21:23.003
> 
> 标签：javascript, regex

我需要一个正则表达式来用一个正斜杠替换 URL 中的多个正斜杠，不包括冒号后面的斜杠

例如`http://link.com//whatever///`会变成`http://link.com/whatever/`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-26T13:23:03.713

我认为这应该可行：`/[^:](\/+)/`或者`/[^:](\/\/+)/`如果你只想要*multiples*。

它不会匹配领先`//`，但看起来你不是在寻找那个。

取代：

```
"http://test//a/b//d".replace(/([^:]\/)\/+/g, "$1") // -->  http://test/a/b/d 
```

**[工作演示](http://jsfiddle.net/X6jzs/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:30:59.230

因为您已经接受了答案。为了显示更多的匹配和控制匹配，这可能会在将来对您有所帮助：

```
var url = 'http://link.com//whatever///';
var set = url.match(/([^:]\/{2,3})/g); // Match (NOT ":") followed by (2 OR 3 "/")

for (var str in set) {
    // Modify the data you have
    var replace_with = set[str].substr(0, 1) + '/';

    // Replace the match
    url = url.replace(set[str], replace_with);
}

console.log(url); 
```

将输出：

```
http://link.com/whatever/ 
```

双胞胎在你的情况下并不重要。如果你有这个字符串：

```
var url = 'http://link.com//om/om/om/om/om///'; 
```

您的`set`数组将包含多个`m//`. 有点多余，因为循环会看到该变量几次。好消息是，`String.replace()`如果它什么也没找到，它什么都不会替换，所以不会造成任何伤害。

您可以做的是从`set`一开始就去除重复项，但这几乎需要与让 for 循环遍历它们相同数量的资源。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:43:34.420

```
result = subject.replace(/(?<!http:)\/*\//g, "/"); 
```

或（对于 http、https、ftp 和 ftps）

```
result = subject.replace(/(?<!(?:ht|f)tps?:)\/*\//g, "/"); 
```

# c - 访问 C 中的特定内存位置

> ID：15638105
> 
> 赞同：14
> 
> 时间：2013-03-26T13:21:23.670
> 
> 标签：c, assembly

在汇编语言中，我们有如下指令：

```
movl ax, [1000] 
```

这允许我们访问特定的内存位置。

但是在 C 中我们可以做类似的事情吗？

我知道使用内联汇编代码`asm()`可以让你做到这一点，但我想知道一些 C 特定技术来实现这一点。

我尝试了以下代码并得到分段错误：

```
int *ptr=0xFE1DB124;
*ptr; 
```

这再次令人困惑，因为内存位置由下面给出的代码标识：

```
int var;
printf("\nThe Address is %x",&var); 
```

所以内存位置可用，但我仍然遇到分段错误。

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T13:55:07.750

常见的 C 编译器将允许您从整数设置指针并使用它访问内存，它们将为您提供预期的结果。但是，这是 C 标准之外的扩展，因此您应该检查编译器文档以确保它支持它。此功能在必须访问特定地址的内存的内核代码中并不少见。它通常在用户程序中没有用。

正如评论所提到的，您可能遇到的一个问题是您的操作系统每次加载程序时都会将程序加载到随机位置。因此，您在一次运行中发现的地址不会是另一次运行中使用的地址。此外，更改源和重新编译可能会产生不同的地址。

为了演示您可以使用指针访问以数字形式指定的地址，您可以检索该地址并在单个程序执行中使用它：

```
#include <inttypes.h>
#include <stdio.h>
#include <stdint.h>

int main(void)
{
    //  Create an int.
    int x = 0;

    //  Find its address.
    char buf[100];
    sprintf(buf, "%" PRIuPTR, (uintptr_t) &x);
    printf("The address of x is %s.\n", buf);

    //  Read the address.
    uintptr_t u;
    sscanf(buf, "%" SCNuPTR, &u);

    //  Convert the integer value to an address.
    int *p = (int *) u;

    //  Modify the int through the new pointer.
    *p = 123;

    //  Display the int.
    printf("x = %d\n", x);

    return 0;
} 
```

显然，这在普通程序中没有用；这只是一个演示。只有当您有特殊需要访问某些地址时，您才会使用这种行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-14T12:13:12.967

**为了从用户空间访问特定内存，我们必须使用mmap()**将内存地址映射到程序虚拟地址，下面的 C 代码显示了实现：

获取一个包含“ABCDEFGHIJ”的文件“ **test_file** ”。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <fcntl.h>

int main(void)
{
    char *map_base_addr;  // Maping Base address for file
    int fd;         // File descriptor for open file
    int size = 10;

    fd= open("test_file", O_RDWR);  //open the file for reading and writing
    map_base_addr= mmap(NULL, size, PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);// Maping file into memory

    char *ch= map_base_addr;
    int i;

    /*Printing first 10 char*/
    for(i=0; i<size; i++)
            fputc(*(ch+i),stdout);
    printf("\n");

    *(ch+1) = 'b';
    *(ch+4) = 'z';
    *(ch+7) = 'x';

    /*Printing char after modification*/
    for(i=0; i<size; i++)
            fputc(*(ch+i),stdout);
    printf("\n");
    /* Finally unmap the file. This will flush out any changes. */
    munmap(map_base_addr, size);
    exit(0);
} 
```

输出将是：

```
ABCDEFGHIJ
AbCDzFGxIJ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T13:36:20.240

这个对我有用：

```
#include <stdio.h>

int main(int argc, char**argv) {
  int var = 7456;
  printf("Adress of var = %x, var=%d\n", &var, var);
  int *ptr = (int*)0x22cd28;
  printf(" ptr points to %x\n", ptr);
  *ptr = 123;
  printf("New value of var=%d\n", var);
  return 0;
} 
```

程序输出：

```
Adress of var = 22cd28, var=7456
 ptr points to 22cd28
New value of var=123 
```

**笔记：**

1.  每次执行时地址通常都不相同。当我尝试我的示例时，我必须运行它三遍才能获得匹配的地址。

2.  `char*`可以指向任何地址（因为 sizeof (char) = 1）。指向较大对象的指针通常必须在偶数地址上对齐（通常可以被 4 整除）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T13:40:49.367

如果您在 linux/windows/mac/whatever 上运行，您的问题并没有多大意义

[http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory)

只有在对没有虚拟内存的设备进行编程，或者在对操作系统本身进行编程时，才能这样做。

否则，您看到的地址不是 RAM 上的“真实”地址，操作系统会将它们转换为真实地址，如果没有映射将您的虚拟地址转换为真实地址，那么您可能会遇到分段错误。请记住，还有其他可能导致分段错误的原因。

# android - 仅在 listview 的一行中使用 imageview 来启动新的意图

> ID：15638107
> 
> 赞同：1
> 
> 时间：2013-03-26T13:21:31.187
> 
> 标签：android, listview, adapter, android-arrayadapter, onitemclicklistener

我正在尝试使 listview 连续包含多个项目，其中包含 imageview 和 textview 。现在我只想访问列表视图中一行的图像视图，然后通过单击它来启动一个新的意图。这是我的主要活动：

```
public class MTCRichGraphicsActivity extends Activity {
int ELEMENT_COUNT = 1;
int position=0;
ImageButton bAddView;
ImageView bEventPage;
int r =0 ;   

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    bAddView = (ImageButton) findViewById(R.id.bNewEvent);
    bEventPage = (ImageView) findViewById(R.id.ivEvent);
    final ListView list = (ListView) findViewById(R.id.list3d);

    bAddView.setOnClickListener(new View.OnClickListener() {
    List<String> element = new ArrayList<String>(); 

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch(v.getId())
            {
            case R.id.bNewEvent :
                //String[] elements = new String[ELEMENT_COUNT];
                //for (int i = 0; i< ELEMENT_COUNT; i++) {
                    //elements[i] = String.valueOf(i);
                    element.add(String.valueOf(ELEMENT_COUNT++));
                //}
                final MyAdapter adapter = new MyAdapter(MTCRichGraphicsActivity.this,element);
                //list.setScrollY(currentPosition);
                //list.setTranslationY(currentPosition);
                list.setDivider( null ); 
                list.setAdapter(adapter);
                list.setTranscriptMode(1);
                list.setStackFromBottom(true);
                //ELEMENT_COUNT = ELEMENT_COUNT + 1;
                adapter.notifyDataSetChanged();                         
            }

        }
    });

    list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            // TODO Auto-generated method stub

            bEventPage.setFocusable(false);
            bEventPage.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i = new Intent("de.inovex.mtc.EventsPage");
                    startActivity(i);   
                }
            });

        }

    });

} 
```

}

现在这里 bEventPage 是一个 ImageView ，当我单击任何 listview 行时，整行都会突出显示并给我一个空指针异常，但是没有单击 imageview 并且新活动没有启动。这是我的适配器类：

```
public class MyAdapter extends BaseAdapter {

private final LayoutInflater mInflater;
private final List<String> mItems;
TextView t;
ViewHolder holder;
public MyAdapter(Activity c,List<String> objects) {
    mInflater = c.getLayoutInflater();
    mItems = objects;
}

public int getCount() {
    return mItems.size();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView t;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.listitem, parent,false);
}
    holder = new ViewHolder();
    holder.t1 = (TextView) convertView.findViewById(R.id.textView1); 
    holder.t2 = (TextView) convertView.findViewById(R.id.textView2);
    holder.t3 = (TextView) convertView.findViewById(R.id.textView3);
    holder.t4 = (TextView) convertView.findViewById(R.id.textView4);
    holder.bEventPage = (ImageView) convertView.findViewById(R.id.ivEvent);
    holder.t1.setText("Title"+position);

    //((ImageView)convertView).setTextAlignment(1);

    return convertView;
}

@Override
public Object getItem(int position) {
    return mItems.get(position);
}

@Override
public long getItemId(int position) {
    return position;
} 
```

}

那么请告诉我如何根据它在listview中的位置只使用一行的imageview来启动一个新的intent？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:25:12.577

将侦听器添加到适配器中的图像视图..并将其从列表项侦听器中删除

```
Activity activity;

public MyAdapter(Activity c,List<String> objects) {
   mInflater = c.getLayoutInflater();
   mItems = objects;
   activity = c;
}

public View getView(int position, View convertView, ViewGroup parent) {
TextView t;
if (convertView == null) {
    convertView = mInflater.inflate(R.layout.listitem, parent,false);
}
holder = new ViewHolder();
holder.t1 = (TextView) convertView.findViewById(R.id.textView1); 
holder.t2 = (TextView) convertView.findViewById(R.id.textView2);
holder.t3 = (TextView) convertView.findViewById(R.id.textView3);
holder.t4 = (TextView) convertView.findViewById(R.id.textView4);
holder.bEventPage = (ImageView) convertView.findViewById(R.id.ivEvent);
holder.t1.setText("Title"+position);

holder.bEventPage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent("de.inovex.mtc.EventsPage");
                activity.startActivity(i);   
            }
        });

return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:25:47.693

您可以在 MyAdapter 的 GetView 方法中设置 onClick 侦听器 onImageView

# fonts - Tkinter 字体样式

> ID：15638114
> 
> 赞同：0
> 
> 时间：2013-03-26T13:21:43.097
> 
> 标签：fonts, tkinter

我正在尝试设计一个界面，我遇到了这个问题。

当我在屏幕中央使用“粗体”字体创建文本时，一切正常。

```
cnvs.create_text(400,400,text="Test", font=('Helvetica Neue',50,'bold'),fill="white",anchor='c') 
```

但是，当我尝试使其轻或超轻时，它不起作用，即使我安装了这些类型。

```
cnvs.create_text(400,400,text="Test", font=('Helvetica Neue',50,'light'),fill="white",anchor='c') 
```

有谁知道为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:00:13.887

它不起作用，因为“光”不是一个有效的选项。字体样式的唯一有效选项是“normal”、“bold”、“roman”、“italic”、“underline”和“overstrike”。

# c - 局部初始值存储在？

> ID：15638122
> 
> 赞同：4
> 
> 时间：2013-03-26T13:22:01.810
> 
> 标签：c, segments

```
#include <stdio.h>  
int main()
{
  int i = 10;
  return 0;
} 
```

在上面的程序中，值 10 究竟存储在哪里？

我了解变量 i 存储在堆栈中。在运行时填充堆栈。从“确切的地方” 10 来自。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:25:26.323

10 是一个常数，因此编译器将直接在程序的可执行部分中使用数字 10 作为 CPU 指令的一部分。

这是在我的系统上生成的程序集`gcc`：

```
movl    $10, -4(%rbp) 
```

（这`4`是因为 an`int`是 4 个字节长）

请注意，所有这些都是实现的一部分，但上述情况在实践中会发生。语言本身并没有指定这些细节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:24:36.677

`10`是一个“字面量”，它会在编译时由编译器生成。然后它将分配给堆栈上的变量。喜欢

```
mov eax, 10;
mov [0x12345678], eax; 
```

虽然这是伪代码，但会为您的变量`i`（地址在这里是 0x12345678）分配值`10`，之前存储在`eax`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T13:29:35.400

“堆栈”是操作系统为您的程序留出的内存区域，与“堆”、全局变量和可执行代码分开。

调用函数时，有代码将参数压入堆栈，然后为局部变量留出空间。当函数返回这个空间并且所有参数都从堆栈中“弹出”时，内存可以被下一个函数重用。

这是一个非常基本和粗略的描述，许多细节在系统和编译器之间存在差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:27:33.007

编译和链接后你的可执行文件包含多个[段](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)。这些细分市场有两种类型：

*   文本段 - 包含实际代码
*   数据段 - 包含静态数据。

（还有其他类型）

值 10 要么存储在文本段中（作为将 10 设置为特定地址或寄存器的指令），要么作为数据存储在数据段中（由代码检索并存储在特定地址/寄存器中）。

编译器决定什么是最好的（对于给定的编译标志最有效）。但我认为它“存储”在文本段中，因为值 10 很容易“在代码中创建”（如其他一些答案所示）。

更复杂的数据（结构、字符串等）通常存储在数据段中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T13:26:21.870

将有一个明确的机器代码指令设置`i`.

就像是：

```
 MOV AL, 10 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T13:47:51.907

值 10 存储在包含源代码的物理源文件中。在执行期间，该值被传输到名为 的变量中`i`，该变量具有自动存储持续时间，并且类型为`int`。这才是最重要的。任何进一步的问题在通用编程语言（例如 C）领域都没有成效。

注意大多数答案是如何提到编译器的？如果[使用解释器将 C 源代码直接翻译成行为会](http://root.cern.ch/drupal/content/cint)怎样？这些答案仍然有效吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-26T14:00:03.743

如果您愿意，我宁愿不“给男人一条鱼”……您实际上可以自己检查一下：

获取您的代码并从中创建一个目标文件：

```
> gcc -c file.c -o file.o 
```

然后对生成的文件进行对象转储：

```
> objdump -d file.o

Disassembly of section .text:

0000000000000000 <main>:
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   48 83 ec 10             sub    $0x10,%rsp
   8:   c7 45 fc 0f 00 00 00    movl   $0xa,-0x4(%rbp) // Right here you can see
                                                       // the raw value 0xa (10)
                                                       // being set, so it's in the
                                                       // .text section 
```

# javascript - 如何选择nicedit实例

> ID：15638127
> 
> 赞同：0
> 
> 时间：2013-03-26T13:22:16.533
> 
> 标签：javascript, jquery, nicedit

我正在动态创建和添加 nicedit 实例。我想选择新添加的实例。但我无法使用 Javascript 选择实例。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:53:08.267

如果我理解正确，你正在寻找这样的东西

```
<div id="wrapper"></div>
<input id="add" type="button" value="Add text field"/>
<textarea id="dummy" name="dummy" cols="40" class="dummy"></textarea> 
```

js：

```
var idnr = 0;
var NicEditor = new nicEditor();

$('#add').click(function(){
  var $clone = $('#dummy').clone();
  var id = 't_' + idnr;
  idnr = idnr + 1;
  $clone.attr('id',id).attr('name',id).removeClass('dummy');
  $('#wrapper').append($clone);
  NicEditor.panelInstance(id);
  console.log($('#wrapper').find('textarea'));
}); 
```

示例： http: [//jsfiddle.net/8UZnV/show/](http://jsfiddle.net/8UZnV/show/) 去掉 show 看代码

使用“id”，您可以选择 nicEditor 实例

# wpf - WPF 工具包图表无序 LineSeries

> ID：15638132
> 
> 赞同：3
> 
> 时间：2013-03-26T13:22:30.550
> 
> 标签：wpf, charts, wpftoolkit

默认 LineSeries 实现按独立值对数据点进行排序。对于这样的数据，这给了我奇怪的结果：

![Ordered Line系列](../Images/3b4a468a8b95e4824a2228087efbc51e.png)

是否可以绘制一个线系列，其中在原始顺序的点之间绘制线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:22:30.550

我目前通过继承 LineSeries 解决了这个问题：

```
class UnorderedLineSeries : LineSeries
{
    protected override void UpdateShape()
    {
        double maximum = ActualDependentRangeAxis.GetPlotAreaCoordinate(
            ActualDependentRangeAxis.Range.Maximum).Value;

        Func<DataPoint, Point> PointCreator = dataPoint =>
            new Point(
                ActualIndependentAxis.GetPlotAreaCoordinate(
                dataPoint.ActualIndependentValue).Value,
                maximum - ActualDependentRangeAxis.GetPlotAreaCoordinate(
                dataPoint.ActualDependentValue).Value);

        IEnumerable<Point> points = Enumerable.Empty<Point>();
        if (CanGraph(maximum))
        {
            // Original implementation performs ordering here
            points = ActiveDataPoints.Select(PointCreator);
        }
        UpdateShapeFromPoints(points);
    }

    bool CanGraph(double value)
    {
        return !double.IsNaN(value) &&
            !double.IsNegativeInfinity(value) &&
            !double.IsPositiveInfinity(value) &&
            !double.IsInfinity(value);
    }
} 
```

结果： ![无序线系列](../Images/a2a21b63c7c1721e9f6369be24d63cac.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T05:04:02.050

值得指出的是，要使用上述@hansmaad 的建议，您需要创建一个新的命名空间并将您的 XAML 指向它，而不是程序集。IE

**XAML：**

```
xmlns:chart="clr-namespace:MyApplication.UserControls.Charting" 
```

**C＃：**

```
using System.Windows.Controls.DataVisualization.Charting;
using System.Windows;

namespace MyApplication.UserControls.Charting {

    class Chart : System.Windows.Controls.DataVisualization.Charting.Chart {}

    class UnorderedLineSeries : LineSeries {
     ....
    }      
} 
```

# jquery - 使用 jquery 在 IE 上单击时可以更改鼠标光标吗？

> ID：15638137
> 
> 赞同：2
> 
> 时间：2013-03-26T13:22:34.067
> 
> 标签：jquery, internet-explorer, cursor

我知道 Internet Explorer[仅在鼠标移动后才会触发光标更改](https://stackoverflow.com/questions/4100944/for-a-div-with-a-css-defined-cursor-ie-doesnt-automatically-reset-the-cursor-i)，但似乎在单击鼠标时它会阻止此类更改。

这是我创建的一个示例：http: [//jsfiddle.net/AfKxt/18/](http://jsfiddle.net/AfKxt/18/)

我用新光标创建了一个 CSS

```
.mouseMoving{
    cursor: url("http://www.rw-designer.com/cursor-extern.php?id=51958"), default;
} 
```

当在特定 div 上调用 mousedown 时，我添加一个类“buttonDown”并在按钮打开时将其删除。

如果我在按钮按下时移动鼠标（即存在“buttonDown”类），那么我会添加带有新光标的 CSS 类。

```
var m_node = $("#mainDiv");
m_node
.mousedown(function(){
    m_node.addClass('buttonDown');
 })
.mouseup(function(){
    m_node.removeClass('buttonDown');   
    m_node.removeClass('mouseMoving');
})
.mousemove(function(){
    if(m_node.hasClass('buttonDown')){
      m_node.addClass('mouseMoving');
    }
}); 
```

一切都适用于 FF 和 Chrome，但不适用于（大新闻，对吗？） IE。

有谁知道我为什么会得到这个？

# python - ImportError：没有名为 opencv.cv 的模块

> ID：15638140
> 
> 赞同：2
> 
> 时间：2013-03-26T13:22:49.330
> 
> 标签：python, linux, opencv, linux-mint

我使用以下命令在 Linux Mint 上安装了 opencv：

```
sudo apt-get install python-opencv 
```

当我尝试使用以下方法导入 opencv 模块时：

```
from opencv.cv import * 
```

我收到错误：

```
from opencv.cv import *
ImportError: No module named opencv.cv 
```

知道为什么会发生此错误以及如何解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:23:57.993

尝试做

```
import cv 
```

如[示例](http://opencv.willowgarage.com/documentation/python/cookbook.html)或

```
from cv import * 
```

# php - 将公共变量添加到所有 CI_Controller 和任何扩展它们的东西？

> ID：15638149
> 
> 赞同：0
> 
> 时间：2013-03-26T13:23:17.367
> 
> 标签：php, codeigniter

嗨，我想向 CI_Controllers 的所有实例添加一个公共变量（$this->data[]），这样我就可以存储一些用于输出页面（css/js 等）的基本规则，然后将每个控制器附加到这个数组添加自己的要求（更多的 css/js）。我有一个带有自定义视图函数的核心库，这些函数将这些数组注入到页面模板的 head 标记中。

我想到的选项；

1.  编辑 CI_Controller 并将其添加到那里......猜测这是一个坏主意。

2.  创建一个扩展 CI_Controller 的 shell 控制器，将 var 添加到其中，然后让每个其他控制器扩展 shell 控制器。

3.  还有什么巧妙的方法吗？

我只使用 CI 大约一个月，我已经尝试通读文档，但我找不到任何内置的方法来做这样的事情？以前有没有人遇到过这种情况，如果有，您是如何解决的？

谢谢！

[编辑] 使用 PHP 5.3.x [/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:44:06.787

[http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

您可以扩展`CI_Controller`以拥有您想要的功能。

应用程序/核心/MY_Controller.php：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Controller extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
    }

    public function my_function()
    {
        return "Cool return from my_function";

    }
} 
```

控制器/welcome.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Welcome extends MY_Controller {

    public function index()
    {
        echo $this->my_function();//echo's "Cool return from my_function"
    }
} 
```

您只需定义您想要的功能`MY_Controller`。然后在您的控制器中，使用`extends MY_Controller`代替，`extends CI_Controller`您可以在这些控制器内的任何位置调用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:34:50.163

我认为使用特征可以轻松实现您想要的。在这里检查：[PHP：特征](http://php.net/manual/en/language.oop5.traits.php)

更具体地说 -> 示例 #11 定义属性。

唯一的限制是它是 PHP 5.4+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-30T08:54:30.527

您可以创建自己的基本控制器文件来继承 \application\core\MY_Controller.php 中的基本页面加载方法，如下所示：

```
<?php defined('BASEPATH') OR exit('No direct script access allowed');

class MY_Controller extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
    }

    protected function loadPage($path, $data = array())
    {
        $this->load->view('common/head'); // Assuming you will use a folder for page parts
        $this->load->view($path, $data);
        $this->load->view('common/foot');
    }
} 
```

之后在您的页面控制器中，您可以更轻松地调用相同的方法：

```
<?php defined('BASEPATH') OR exit('No direct script access allowed');

class User extends MY_Controller {

    public function index()
    {
        $data = array(); // get data from model

        $this->loadPage('user/view', $data); // Assuming you will use folders for sets of views
    }

    public function edit()
    {
        $data = array(); // get data from model

        $this->loadPage('user/edit', $data);
    }
} 
```

# javascript - 使用javascript获取html5中的日期值

> ID：15638158
> 
> 赞同：1
> 
> 时间：2013-03-26T13:23:44.307
> 
> 标签：javascript, html

我收到此错误“无法读取 null 的属性'值'”，请帮助解决这个问题。我正在尝试获取日期值并传递给 php。谢谢。

```
<form>
<label for="fromDate">From : </label><input id="from" type="date" id="fromDate" value=""></input>
<label for="toDate">To : </label><input id="to" type="date" id="toDate" value=""></input>

<input type="submit" value="submit"></input>
</form>
<input type="button" onclick="makeAjaxCall();return false;" value="Click to get data"></input>

<script>
function makeAjaxCall() {
    var frm = document.getElementById('fromDate').value;//$('#fromDate').datepicker("getDate");

    var to = document.getElementById('toDate').value;//$('#toDate').datepicker("getDate");
    var postDate ={
        "dateFrom" : frm,
        "dateTo" : to   
    };

  $.ajax({
            type:"POST",
            url:'test.php',
            data: postData,
            success: function(responseData) {

                     //someCode
                   }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:25:51.493

你有两个 id 的输入尝试只使用一个

```
<input type="date" id="toDate" 
```

代替：

```
<input id="to" type="date" id="toDate" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:25:42.153

使用[验证器](http://validator.w3.org/)。您的某些元素具有多个`id`属性。这是不允许的，这是您的问题的原因。

（您可能打算在这两种情况下都`name`为第一个`id`属性使用一个属性）

# eclipse - Eclipse pydev 'F3' 不跳转到定义

> ID：15638160
> 
> 赞同：4
> 
> 时间：2013-03-26T13:23:45.720
> 
> 标签：eclipse, pydev

我已经开始将 eclipse pydev 用于一些相当不错的 django 项目，但是当我按“F3”而不是把我带到函数定义时，它会跳转到顶部的导入语句，例如

```
from anotherfolder.file import myfunction 
```

我应该怎么做才能让它跳到正确的地方？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-01T03:39:49.783

嗨，已经有一段时间了，但我想我只是在这里发布我的解决方案以供参考。

转到项目 >> 属性 >> PyDev - PYTHONPATH 并将 django 根文件夹添加到项目源文件夹（如果它不存在）。

现在，'F3' go-to-definition 应该可以跨 django 应用程序中的不同模块工作。

# mysql - SQL 语句无限运行

> ID：15638164
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:23:52.463
> 
> 标签：mysql, sql

该语句运行了很长时间并且不返回任何内容。我究竟做错了什么？

```
SELECT *
  FROM supplierdata AS s1
 WHERE s1.zip IN (
    SELECT zip
      FROM supplierdata AS s2
     WHERE s1.zip = s2.zip
           ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:26:16.637

您的语句只是运行了很长时间，因为它效率低下。

但是，首先，该查询实际上没有意义。以下将是等效的：

```
select *
from supplierdata
where zip is not null 
```

我建议您终止查询并在`supplierdata(zip)`. 这应该会大大提高查询的性能。

本质上，您的查询正在为`supplierdata`. 这是非常昂贵的，需要对表进行全表扫描。索引应该解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:33:54.853

除了“这没有任何意义”：

```
select * 
from supplierdata as s1 
where s1.zip IN 
(select zip from supplierdata as s2 where s2.zip between 200 and 300); 
```

它相当于

```
select * 
from supplierdata as s1 
where s1.zip 
between 200 and 300; 
```

等等......只是没有任何意义......如果你解释你试图完成的事情应该会更好;）

或任何不引用父查询的条件；你的循环不是无限的，它只是很长，因为首先它会逐行运行，就像@Nix 说的那样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:26:32.933

你的人数很差，所以你的查询基本上是：

1.  对于供应商数据中的每一行
2.  查询我当前行的整个供应商数据 zip
3.  如果我发现了什么，请选择它
4.  重复。

* * *

实现相同目标的更简单方法。从供应商数据 s1 中选择 count(1)，其中 zip 不为空

# ruby-on-rails - 如何使用 yelp api 修复omniauth 错误？

> ID：15638168
> 
> 赞同：0
> 
> 时间：2013-03-26T13:23:58.317
> 
> 标签：ruby-on-rails, omniauth, gemfile

我正在尝试在我的 Rails 应用程序中使用 Yelp API，但在这样做时遇到了麻烦。我正在关注此处的文档（[https://github.com/Yelp/yelp-api/blob/master/v2/ruby/example.rb](https://github.com/Yelp/yelp-api/blob/master/v2/ruby/example.rb)），但不断收到错误消息。下面是我在控制器中使用的代码：

```
 require 'rubygems'
    require 'oauth'

    consumer_key = 'private'
    consumer_secret = 'private'
    token = 'private'
    token_secret = 'private-private'

    api_host = 'api.yelp.com'
    @places = Place.all
    consumer = OAuth::Consumer.new(consumer_key, consumer_secret, {:site => "http://#{api_host}"})
    access_token = OAuth::AccessToken.new(consumer, token, token_secret)
    path = "/v2/search?term=restaurants&location=new%20york"
    p access_token.get(path).body 
```

我不断收到的错误是：

```
cannot load such file -- oauth 
```

我的 Gemfile 中有 gem 'omniauth' 并运行了 bundle install （以及重新启动服务器）但仍然收到此错误...有关如何解决此问题的任何想法？

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'dynamic_form', '1.1.4'
gem 'sqlite3'
gem 'devise', '2.1.0rc'
gem 'bootstrap-sass', '2.1'
gem 'omniauth'
gem 'httparty'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test, :development do
    gem 'rspec-rails', '~> 2.11'
end

group :test do
    gem 'capybara', '1.1.2'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:30:04.373

根据[omniauth文档](https://github.com/intridea/omniauth#readme)，您应该要求“omniauth”，而不是“oauth”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-08T11:14:39.470

你应该运行：

```
sudo gem install oauth 
```

`oauth`或者在 Gemfile 中添加 gem 。

# c# - 将“User.Name.Length>0”等字符串条件评估为真或假的最佳方法？

> ID：15638171
> 
> 赞同：0
> 
> 时间：2013-03-26T13:24:10.617
> 
> 标签：c#, asp.net-mvc-3, c#-4.0

在运行时评估存储为字符串的条件表达式的最佳方法是什么。

我正在使用 MVC3、.NET4、C#4。

所以假设解决方案是一种名为“Eval”的方法，那么：

```
if eval("User.Name.Length>0")
{return true;} 
```

行为方式应与以下相同：

```
if (User.Name.Length>0)
{return true;} 
```

因此，作为此解决方案的一部分，我还需要访问任何 inscope .NET 类型。

那么“Eval”的解决方案是什么？

谢谢。

PS 我已经发布了一个单独的问题，重点关注动态 LINQ 作为解决方案。但是我现在认为我的解决方案更简单，因此这个问题。

编辑。不要过多地阅读“用户”。它可以是任何物体。我对如何在运行时评估字符串表达式感兴趣，就好像它们是在编译时明确编写的一样。另一个例子可能是：

```
if eval("mycat.coatcolour=='ginger'")
{return true;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:32:30.937

您将必须实现自己的解析器并使用反射/FastMember 来导航路径或寻找像[CS-Script](http://www.csscript.net/)这样的脚本解决方案。

# c# - 从 Epoch C# 以来的天数中获取日期字符串

> ID：15638176
> 
> 赞同：2
> 
> 时间：2013-03-26T13:24:21.563
> 
> 标签：c#, datetime, timespan

我有一个整数`15791`，它表示自纪元以来的天数，等于 27.03.2013，如何在 C# 中进行转换？

```
public void method1()
{
  ...
  int days_since_epoch = 15791;
  // how convert `days_since_epoch` to "27.03.2013"
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T13:27:06.170

为您的纪元添加天数。

例如：

```
var epoch = new DateTime(...);  // Your epoch (01/01/0001 or whatever)
var yourDate = epoch.AddDays(days_since_epoch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:28:21.350

假设您的 Epoch 日期`DateTime`只是使用

```
DateTime epoch = new DateTime(1970,1,1);

int days_since_epoch = 15791;

DateTime converted = epoch.AddDays(days_since_epoch); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:26:43.043

只需使用[AddDays 方法](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)，一旦你得到你的最终日期，像往常一样在`ToString()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:32:24.727

也许：

```
TimeSpan ts = TimeSpan.FromDays(15791);
DateTime epoch = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc).Add(ts); 
```

[**演示**](http://ideone.com/4Y8ist)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T13:27:25.453

```
var date = new DateTime(1970,1,1).AddDays(15791);
Console.WriteLine(date.ToString("dd.MM.yyyy")); 
```

# perl - 从 perl 脚本写入文件和 STDOUT

> ID：15638179
> 
> 赞同：0
> 
> 时间：2013-03-26T13:24:28.147
> 
> 标签：perl, stdout

嗨，我需要在两个文件中都有 perl 脚本的输出，`STDOUT`但我不能像`./a.pl > out.log`. 可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:31:42.503

显然，你应该使用

```
./a.pl | tee out.log 
```

但听起来你会拒绝。下一个最好的可能是[File::Tee](http://search.cpan.org/perldoc?File%3a%3aTee)。

```
use File::Tee qw( tee );
tee(STDOUT, '>', 'out.log'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:29:50.793

试试这个：

`a.pl | tee out.log`

# mysql - 在不刷新的情况下更新 Django 中的值

> ID：15638183
> 
> 赞同：1
> 
> 时间：2013-03-26T13:24:46.263
> 
> 标签：mysql, django, refresh, updating

我对网页设计非常陌生，我目前遇到的问题需要帮助。我在 Django 的帮助下编写了一个网页，它从 MySQL 数据库中提取值并使用嵌入式 for 循环将它们放在网页上。数据库中的值会不断更新，并在我刷新页面时显示新值。这种方法看起来很笨拙，我想知道是否有简单的方法可以在不刷新的情况下更新它们？

```
!DOCTYPE html>

<html lang="en">

<head>
<meta charset="utf-8" />
<meta http-equiv="refresh" content="0.5">
<link rel="stylesheet" href="css/style.css">
<link href="images/favicon.ico" rel="shortcut icon">
<title>Health monitor</title>
</head>

<body>

<div class="container">
<h1>Health Monitor</h1>
<h2>Temperature Data</h2>
    {% for heat in temp %}
<h3>Current temperature {{ heat.hot }} </h3>
<p>You might want to call a nurse</p>
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:28:51.493

有几种方法，也许最简单和最容易访问的方法是使用`ajax polling`间隔请求更新。

这将在 JavaScript 中完成。每隔 x 秒，您就会向 django 应用程序发出一个请求，以查看是否有任何更改。

# javascript - 何时使用 Marionette 与纯 Backbone

> ID：15638191
> 
> 赞同：10
> 
> 时间：2013-03-26T13:24:51.977
> 
> 标签：javascript, model-view-controller, backbone.js, marionette

我正在开始一个相当大的 Backbone 项目，我现在正在决定所有的关键组件。我一直在环顾四周，并多次遇到木偶。我的问题是，什么时候使用 Marionette 与使用纯 Backbone 比较合适？我担心的是，在等式中添加一个全新的库时，复杂性会大大增加，但如果使用 Marionette 的好处超过它可能值得研究。

我不是在寻找基于意见的答案——只是深入了解 Backbone 在生产环境中的扩展程度以及 Marionette 添加的重量/复杂性是否值得。

是否有任何可量化的方法来确定这一点？Backbone 在什么时候无法扩展？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T13:47:57.853

答案将是主观的，因为没有什么要求您首先使用 Marionette。

1.  Marionette 为骨干应用程序提供了一个可靠的、经过验证的架构。
2.  如果应用程序的生命周期很短（即 POC），那么只需使用纯主干。
3.  如果您从未使用过骨干网，请阅读 Marionette 文档并了解它旨在解决的问题以及实现的设计模式，然后确定它与您的项目的匹配程度。
4.  如果您已经编写了许多主干应用程序，请将 Marionette 的架构与您自己的架构进行比较，然后决定是否值得采用。

Backbone 很好，但你的架构将允许你的应用程序扩展。如果您计划构建一个大型应用程序，无论如何您都将不得不在架构上投入时间。

您还应该考虑：

*   [卓别林](https://github.com/chaplinjs/chaplin/tree/master/docs)
*   和[胸部](http://walmartlabs.github.com/thorax/)

# android - StackOverflowError 使用 this.draw()

> ID：15638198
> 
> 赞同：0
> 
> 时间：2013-03-26T13:25:15.273
> 
> 标签：android, canvas, bitmap, android-custom-view

我正在尝试在画布上显示位图（或*从*位图创建画布，因为它们似乎是两个不同的东西？）。感谢我昨天在这里得到的一些非常有用的建议，最好的方法似乎是首先创建我自己的自定义视图，然后在其中实现我需要的所有功能。有人建议我不需要为此扩展surfaceView，因为我只需要非常简单的功能，例如平移/捏拉缩放/单击图像，所以我正在扩展View。

这段代码的问题是，即使在我运行它之前，当我在 Eclipse 中单击此视图的图形布局时，我也会收到 StackOverflowError。我只能假设这是因为该行`this.draw(canvas);`被递归调用或其他什么。当我注释掉该行并取消注释它上面的行时，`canvas.drawBitmap(bmp, 0, 0, paint);`图像在图形布局中完美显示，但是当我运行应用程序时，我得到强制关闭。

```
public class CanvasView extends View {

Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.testmapbmp);
Paint paint = new Paint();
Canvas c = new Canvas(bmp);

public CanvasView(Context context, AttributeSet attrs) {
    super(context, attrs);
} 

@Override
protected void onDraw(Canvas canvas) {
    //super.onDraw(canvas); 
    //canvas.drawBitmap(bmp, 0, 0, paint);
    this.draw(canvas); 
    //canvas.save();
} 
```

谁能向我解释为什么会这样？这是我之前发布的问题的链接，以防它有助于阐明我想要实现的目标：[在 Surfaceview 中的画布上显示位图](https://stackoverflow.com/questions/15616724/displaying-a-bitmap-on-canvas-in-surfaceview)

非常感谢任何和所有建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:29:36.037

`this.draw(canvas)`调用`onDraw()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:37:38.023

这段代码最终会递归调用 onDraw()，从而导致堆栈内存被吃掉。

# php - 如何将 ZINCRBY 与 predis 一起使用

> ID：15638199
> 
> 赞同：1
> 
> 时间：2013-03-26T13:25:23.593
> 
> 标签：php, redis, predis

我正在使用 Predis 连接到 Reddis 服务器，并尝试使用 ZINCRBY。rawcommand 显然不再受支持，我无法让以下工作：

```
$cmdSet = $redis->createCommand('ZINCRBY');
$foo = array($stemwijzerid, $answernumber.'-'.$answer);
$cmdSet->setArguments($foo);
$cmdSetReply = $redis->executeCommand($cmdSet); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:35:38.330

您是否尝试过简单地使用zincrby：

`$redis->zincrby('myzset', 2\. "one")`

# indexing - 如何在 Sitecore 项目创建后以编程方式暂停，直到更新索引

> ID：15638200
> 
> 赞同：4
> 
> 时间：2013-03-26T13:25:23.963
> 
> 标签：indexing, sitecore

一位同事问了这个问题，我没有立即找到解决方案，所以我在这里发布。他以编程方式在主数据库中插入一个 Sitecore 项目，然后必须插入另一个项目，该项目依赖于索引中存在的第一个项目。他最初每两次插入第二个项目都会失败，但后来在他的代码中插入了一个手动暂停以尝试让索引时间赶上，现在它大约每十次失败一次。更好，但并不完美。

他正在寻找是否有 Sitecore 方法来检查索引是否已更新，然后再继续插入相关项。

我确实找到了 Alex Shyba 的这篇博文（[http://sitecoreblog.alexshyba.com/2011/04/search-index-troubleshooting.html](http://sitecoreblog.alexshyba.com/2011/04/search-index-troubleshooting.html)），看起来它可能有一些适用性，但我的同事正在严格地工作master DB（不涉及发布），并且我们已经在我们的解决方案中实现了 Alex 文章中的前几个步骤（我没有完成整个事情）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:02:26.787

如果您依赖于索引添加，最终确保项目在索引中的唯一方法是在异步索引更新之后执行操作。在 Sitecore 6 中，我知道的唯一方法是`database:propertychanged event`. [Alex Shyba 在另一篇](http://sitecoreblog.alexshyba.com/2012/07/sync-up-sitecore-search-index-update.html)关于 HTML 缓存清除的文章中描述了此事件。

您的挑战可能是在事件处理程序中知道插入了什么项目，以及如何处理它。您将需要某种全局数据结构来传达此状态信息，因为索引更新作为异步作业运行。

其他选项（可能更容易）是删除对索引更新的依赖（使用 Sitecore 查询或快速查询），或者轮询索引直到项目存在（这有点难看）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T22:19:38.887

为什么不自己将项目添加到索引中？这样，用户界面将被阻止，直到完成。

您可以通过挂钩 item:saved 事件来做到这一点。我认为事件处理程序将基于数据库爬虫的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:28:16.120

您是否考虑过将第二个任务作为“定时任务”排队，并使用一些包装器来检查依赖关系并在必要时重新排队？请参阅[http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/All-About-Sitecore-Scheduling-Agents-and-Tasks.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/All-About-Sitecore-Scheduling-Agents-and-Tasks.aspx)。

# c# - 从 Controller 获取 Int 值到 $.Ajax

> ID：15638206
> 
> 赞同：0
> 
> 时间：2013-03-26T13:25:50.123
> 
> 标签：c#, asp.net-mvc, jquery

我想从控制器传递 int 值并检查 $.ajax 中它是否大于 0。我不知道该怎么做。我尝试了一个代码，但它给了我未定义的值。控制器中的数据运行正常。但返回 int 值无法做到：

AJAX 代码：

```
function bindForm(dialog,urlString) {
    $('form', dialog).submit(function () {
    var data_send = $(this).serializeArray();
    $.ajax({
        url: urlString, 
        type: this.method,
        data: $(this).serialize(),
        success: function (result) {
        alert(result.success);
        if (parseInt(result.success, 10) > 0) {
            alert('Details Added Successfully');
            $('#dialog-form').dialog('close');
            var hdnInvoiceId = document.getElementById("Invoice_Id");
            hdnInvoiceId.value = parseInt(result.success, 10);
            $('#addInvoiceDetail').hide();
            } else {
            alert('Please Re-enter Details');
            bindForm();
            }
        }
    });
    return false;
}); 
```

控制器代码：

```
[HttpPost]
public int AddInvoice(Invoice model)
{
    int Invoice_Id = CRMServiceDL.insertInvoiceDetail(model);
    int success;
    if (Invoice_Id > 0)
    {
        success = Invoice_Id;
    }
        else {
        success = -1;

    }
    return success;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:28:50.057

您需要返回 Json

```
[HttpPost]
public JsonResult AddInvoice(Invoice model)
{
    int invoiceId = CRMServiceDL.insertInvoiceDetail(model);
    int success = invoiceId > 0 ? invoiceId : -1;

    return Json(new { success });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:30:39.327

只需在您的成功回调中使用 result 而不是 result.success。

结果本身将包含您返回的值。

# asp.net - 在用户界面中向表中动态添加一行

> ID：15638209
> 
> 赞同：0
> 
> 时间：2013-03-26T13:26:00.187
> 
> 标签：asp.net, gridview, dynamic, textarea

我正在**ASP.NET**中开发一个应用程序，该应用程序需要一个表，其中每个单元格都为`TextArea`. 问题是，该表中的行数**应该是动态的，并且应该通过**单击按钮（例如，“添加”按钮）添加一行。

我对 ASP.NET 比较陌生，我开始使用`GridView`但无济于事。如果有人能告诉我从哪里开始进行这种动态添加行，那将对我有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:43:37.053

你可以去做这样的事情

1.  在您的页面上放置一个网格视图
2.  制作您的数据输入表单并使用按钮单击事件向gridview动态添加一行
3.  在表单保存时，使用 a 读取 gridview 的行`foreach loop`并将它们保存到数据库
4.  使用数据表存储临时行`ViewState`以保留回发值

我也添加了删除功能，ASPX

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="AddGridViewRows.aspx.cs" Inherits="AddGridViewRows" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <br />
        First Name :
        <asp:TextBox ID="txtFirstName" runat="server"></asp:TextBox>
        <br />
        Last Name:
        <asp:TextBox ID="txtLastName" runat="server"></asp:TextBox>
        <br />
        <asp:Button ID="btnAddRows" runat="server" onclick="btnAddRows_Click" 
            Text="Add Rows To Grid" />
        <br />
        <asp:GridView ID="GridView1" runat="server" AutoGenerateDeleteButton="True" 
            onrowdeleting="GridView1_RowDeleting">
        </asp:GridView>

    </div>
    </form>
</body>
</html> 
```

代码隐藏

```
using System;
using System.Web.UI.WebControls;
using System.Data;

public partial class AddGridViewRows : System.Web.UI.Page
{

    DataTable dt = null;
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnAddRows_Click(object sender, EventArgs e)
    {
        if (ViewState["myData"] == null)
        {
            // Initialize data table if viewstate is null
            dt = new DataTable();
            dt.Columns.Add("SNo", typeof(int));
            dt.Columns.Add("FirstName", typeof(string));
            dt.Columns.Add("LastName", typeof(string));
            dt.Columns[0].AutoIncrement = true;    // Autogenerate serial key column for example
            dt.Columns[0].AutoIncrementSeed = 1;
        }
        else
            dt = ViewState["myData"] as DataTable;  // Grab datatable from viewstate if its not null

        // Add your data row
        DataRow dr = dt.NewRow();
        dr["FirstName"] = txtFirstName.Text;
        dr["LastName"] = txtLastName.Text;
        dt.Rows.Add(dr);
        // Bind your gridview
        GridView1.DataSource = dt;
        GridView1.DataBind();
        // Save datatable to ViewState
        ViewState["myData"] = dt;
    }

    protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        if (ViewState["myData"] != null)
        {
            dt = ViewState["myData"] as DataTable;
            dt.Rows.RemoveAt(e.RowIndex);
            GridView1.DataSource = dt;
            GridView1.DataBind();
            ViewState["myData"] = dt;
        }
    }
} 
```

# php - 在 iFrame 中显示的 PDF 上绘制坐标

> ID：15638213
> 
> 赞同：9
> 
> 时间：2013-03-26T13:26:20.060
> 
> 标签：php, javascript, jquery, pdf

首先，我很欣赏我的要求非常“雄心勃勃”，但非常感谢任何帮助，因为我不确定最好的方法。

在用户上传 PDF 后，在我的网站（使用 PHP/MySQL 构建）上，我想在页面上显示 PDF 内联（我假设在 iFrame 中）。然后我需要他们能够在 PDF 顶部拖出一些“框”（我假设使用 jQuery）。然后我需要记录这个框的坐标，以便稍后我可以重新创建将新文本注入定义的“框”的 PDF。

这听起来可行吗？如果不是，你还有什么建议？（请不要说imagemagick！）

我知道如何重新创建注入新文本的 PDF，但我的问题是如何允许用户记录这些坐标。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T08:08:32.483

您可以使用[PDF.js](https://github.com/mozilla/pdf.js)在页面上呈现 PDF。PDF.js 会将其显示为页面的一部分，因此您可以附加事件并以您无法通过 Acrobat 插件显示的方式与之交互。

我找不到用于获取坐标的预先存在的库，所以我编写了这段代码来实现它。

[选择代码的现场演示](http://www.powerlessdynamo.com/stack_exchange/answers/15638213_plot-coordinates-on-pdf-displayed-in-iframe.html)

```
$(function () {
    "use strict";
    var startX,
        startY,
        selectedBoxes = [],
        $selectionMarquee = $('#selectionMarquee'),
        positionBox = function ($box, coordinates) {
            $box.css(
                'top', coordinates.top
            ).css(
                'left', coordinates.left
            ).css(
                'height', coordinates.bottom - coordinates.top
            ).css(
                'width', coordinates.right - coordinates.left
            );
        },
        compareNumbers = function (a, b) {
            return a - b;
        },
        getBoxCoordinates = function (startX, startY, endX, endY) {
            var x = [startX, endX].sort(compareNumbers),
                y = [startY, endY].sort(compareNumbers);

            return {
                top: y[0],
                left: x[0],
                right: x[1],
                bottom: y[1]
            };
        },
        trackMouse = function (event) {
            var position = getBoxCoordinates(startX, startY,
                event.pageX, event.pageY);
            positionBox($selectionMarquee, position);
        };

    $(document).on('mousedown', function (event) {
        startX = event.pageX;
        startY = event.pageY;
        positionBox($selectionMarquee,
            getBoxCoordinates(startX, startY, startX, startY));
        $selectionMarquee.show();
        $(this).on('mousemove', trackMouse);
    }).on('mouseup', function (event) {
        var position,
            $selectedBox;

            $selectionMarquee.hide();

            position = getBoxCoordinates(startX, startY,
                event.pageX, event.pageY);

            if (position.left !== position.right &&
            position.top !== position.bottom) {
                $selectedBox = $('<div class="selected-box"></div>');
                $selectedBox.hide();
                $('body').append($selectedBox);

                positionBox($selectedBox, position);

                $selectedBox.show();

                selectedBoxes.push(position);

                $(this).off('mousemove', trackMouse);
            }
    });
}); 
```

一旦显示它，您将不得不对其进行调整以获得相对于 PDF 的坐标，但这应该让您走上正确的轨道。

# python - Socket.error：提供的参数无效

> ID：15638214
> 
> 赞同：8
> 
> 时间：2013-03-26T13:26:20.607
> 
> 标签：python, sockets

我正在学习网络编程，并试图通过这个例子掌握套接字的基础知识。

```
import socket,sys

s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)

MAX = 65535
PORT = 1060

if sys.argv[1:] == ['server']:
    s.bind(('127.0.0.1',PORT))
    print 'Listening at ' , s.getsockname()
    while True:
        data,address = s.recvfrom(MAX)
        print ' The address at ' , address , ' says ' , repr(data)
        s.sendto('your data was %d bytes' % len(data),address)

elif  sys.argv[1:] == ['client']:
    print ' Address before sending ' ,s.getsockname()
    s.sendto('This is the message',('127.0.0.1',PORT))
    print ' Address after sending ' ,s.getsockname()
    data,address = s.recvfrom(MAX)
    print ' The server at ' , address , ' says ' , repr(data)

else:
    print >> sys.stderr, 'usage: udp_local.py server | client ' 
```

但是，它抛出了一个异常，指出getsockname（）给出的参数在第22行特别无效。据我所知，代码是正确的。这是异常

```
Traceback (most recent call last):
  File "udp_local.py", line 23, in <module>
    print ' Address before sending ' ,s.getsockname()
  File "c:\Python27\lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 10022] An invalid argument was supplied 
```

使用 PyScripter 2.5.3.0 x86

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T19:35:50.723

好吧，我得到了问题。套接字在绑定或发送数据之前没有地址。只好把它注释掉。

```
elif  sys.argv[1:] == ['client']:
 ## print ' Address before sending ' ,s.getsockname() 
```

谢谢

# vb.net - 使用函数

> ID：15638216
> 
> 赞同：0
> 
> 时间：2013-03-26T13:26:26.900
> 
> 标签：vb.net, function, boolean

我对编程相当陌生，所以我不确定什么是“可接受的”，什么不是。

我想知道是否可以执行类似的操作，将函数声明为布尔值，如果内部的数据库连接成功则返回 true，如果不成功则返回 false，然后使用该布尔值让用户知道数据库的条目是否是成功的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:57:06.133

如果没有正规的编程教育，你应该在学习语法时做任何有用的事情。随着时间的推移，您应该能够越来越多地识别出需要改进的代码区域。如果你只是*测试*这个想法，你会发现它是有效的。现在不要费心问太多关于最佳实践的问题；Stack Overflow 不是软件工程 101，你只会不知所措（社区也会如此！）。如果你能负担得起，就报名参加一两门计算机科学或软件工程课程，或者，如果你负担不起，那就买一本书。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:50:55.263

学习最佳实践是一个绝妙的主意，但就像 Dan Verdolino 提到的那样，您会被大量的信息所淹没，而您目前的水平很可能无法理解这些信息。

为了带来视角，将编程想象成一个积木塔。只要有足够的时间，无论您的编程经验如何，任何人都可以构建基本的积木塔。但是，IT 系统永远不会保持不变，您总是可以更改它：无论是添加新内容还是删除过时的代码。一次移动一块积木最终会使你的塔越来越不稳定。这是您的经验表明您的系统有多好的时候 - 真正的专业人士会以一种易于更改的方式设计整个塔，并且不会在您移动 2-3 个街区后倒塌塔。业余爱好者会设计一个有效的系统，但是一旦你开始改变它，也就是移动积木，每一步都是一种努力，需要越来越多的时间来完成。

# linq - 使用 linq 执行 sum 子查询

> ID：15638219
> 
> 赞同：0
> 
> 时间：2013-03-26T13:26:33.283
> 
> 标签：linq, entity-framework, subquery

请有人协助以下查询。我正在尝试选择每个客户的所有收据的总和。但是我的选择部分中的“Total =”子查询不起作用，我收到以下错误：

无法创建“AppName.Domain.Entities.AccountingEntry”类型的常量值。此上下文仅支持原始类型或枚举类型。

我已经尝试在该查询之后执行 ToList() ，但这会导致同样的问题。使用 linq 选择 Sum 作为子查询的标准方法是什么？

```
var receipts = (from ae in repo.AccountingEntries
                        join c in repo.Clients on ae.ClientId equals c.ClientId
                        join m in repo.Memberships on c.MembershipId equals m.MembershipId

                        where
                             (ae.EntryDate <= start) &&
                             (ae.ClientId != null) &&
                             (ae.AccountingEntryTypeId == (byte)Shared.AccountingEntryTypes.Receipt)

                        select new AppName.Reports.Clients.AgeAnalysis.Receipt
                        {
                            ClientId = (Guid)ae.ClientId,
                            Client = c.FirstName + " " + c.LastName,
                            Membership = c.Membership.Name,
                            Total = (from ae2 in repo.AccountingEntries where ae2.ClientId == ae.ClientId select ae2.Total).Sum()
                        }); 
```

谢谢，加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:43:32.193

这似乎过于复杂和不必要。如果您的实体模型设置正确，您可以通过删除连接并使用“group by”子句来简化。类似于以下内容：

```
from ae in c.AccountingEntries    
where
    (ae.EntryDate <= start) &&
    (ae.ClientId != null ) &&
    (ae.AccountingEntryTypeId == (byte)Shared.AccountEntyrTypes.Receipt)
group by
    ae.Client into g
select 
    new AppName.Reports.Clients.AgeAnalysis.Receipt
    {
        ClientId = (Guid)g.Key.ClientId,
        Client = g.Key.FirstName + " " + g.Key.LastName,
        Membership = g.Key.Membership.Name,
        Total = g.Sum( p => p.Total )
    } 
```

# php - PHP，完成后重新运行代码

> ID：15638224
> 
> 赞同：0
> 
> 时间：2013-03-26T13:26:43.737
> 
> 标签：php, daemon

我正在开发一个 PHP 服务，它为每个客户执行大量操作，我希望它能够连续运行。我已经看过 cron，但据我了解，cron 可以在设定的时间运行代码。这可能有点危险，因为我们依赖于代码在重新开始之前已经完成运行，并且每次运行的时间可能会随着客户群的增加而变化。因此，据我所知，无法完成刷新、cron 或其他定时间隔。

所以我想知道您是否知道任何解决方案，我可以在服务完成后重新启动服务，并且在任何情况下都不要在所有代码执行之前重新运行？

很抱歉，如果以前回答过这个问题或者在 Google 上很容易找到，我已经尝试找到一些东西，但无济于事。

编辑：绝对可以肯定，我可以将定时间隔设置为 1 小时，但我希望每次运行之间的时间尽可能短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:30:11.367

看看这个： [http ://www.godlikemouse.com/2011/03/31/php-daemons-tutorial/](http://www.godlikemouse.com/2011/03/31/php-daemons-tutorial/)

你需要的是一个持续运行的守护进程。还有比这个while循环更多的解决方案。

以下我曾经在一个项目中使用过：http: [//kvz.io/blog/2009/01/09/create-daemons-in-php/](http://kvz.io/blog/2009/01/09/create-daemons-in-php/)，它也是PEAR的一个包：http: [//pear.php.net /package/System_Daemon](http://pear.php.net/package/System_Daemon)

有关更多信息，请参阅以下 SO 链接：

什么是守护进程：[什么是守护进程？它们的实际用途？与php一起使用？](https://stackoverflow.com/questions/4118053/what-is-daemon-their-practical-use-usage-with-php) 如何使用：[永远有效的 PHP 脚本 :)](https://stackoverflow.com/questions/9142820/php-script-that-works-forever)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:33:27.487

您是否尝试过将 PHP 脚本作为进程运行。这里有更多细节[http://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/](http://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:37:29.130

如果您不想学习如何编写守护程序，我建议您使用管理用户态进程的软件：**Supervisor** ( [http://supervisord.org/](http://supervisord.org/) )

您只需要编写一个配置文件来指定要运行哪些进程以及如何运行。它的配置非常简单，而且适应性非常强（您可以强制只有一个流程实例，或者改为拥有固定数量的实例......等等）。如果您的脚本崩溃，它还将处理自动重启和日志记录。

在 PHP 端，只需创建一个永不退出的脚本，使用`while(true) { ... }`循环，并在 supervisord 的 conf 中添加这样的条目：

```
[program:your-script]
command=/usr/bin/php /path/to/your_script.php 
```

我在几个项目的生产中使用该软件（为网站运行 ruby​​ 和 php gearman 异步工作者）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T13:28:31.587

尝试有一个自定义逻辑，您可以在其中设置标志 ON 和 OFF 并且在您的 CRON 中，您可以在运行其中的代码之前进行检查。我想建议类似基于队列的解决方案，一旦你得到条目，然后运行你的处理逻辑。可以是守护进程或cron。如果您的任务现在可以执行，它将给予更多控制。编辑它

# java - 检查外部应用程序的状态和信息

> ID：15638225
> 
> 赞同：1
> 
> 时间：2013-03-26T13:26:48.747
> 
> 标签：java, desktop-application

这里 ( [http://www.desktop-macros.com/](http://www.desktop-macros.com/) ) 是一个程序，它记录 PC 上的鼠标点击和击键序列，然后回放以执行一些用户定义的操作。

现在，我想要实现的要求更高一些：例如，我想通过鼠标单击启动浏览器，**等到它启动**（即它的应用程序屏幕可见），然后再次执行一些鼠标和键盘操作。

当然，获取其他信息也很有用，例如窗口的位置和尺寸。

是否可以使用 Java 进行如此花哨的与操作系统相关的操作（例如检查应用程序是否已满载）？也许有一些具有有用 API 的非标准库？

如果没有，您能否推荐一些解决此类问题的方法/语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T14:07:42.953

我使用[Autohotkey](http://www.autohotkey.com)`WinWait`具有等待具有良好标题的窗口的命令。`Send {Enter}`但我做事是靠，而不是鼠标。

# c - 检查 if 条件的语义

> ID：15638230
> 
> 赞同：4
> 
> 时间：2013-03-26T13:27:19.927
> 
> 标签：c

如果我有这样的情况：

```
if (X && Y) {} 
```

编译器会检查`Y`是否`X`为假吗？它依赖于编译器吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T13:27:54.063

在 C 和[大多数其他语言](http://en.wikipedia.org/wiki/Short-circuit_evaluation)中，短路评估是有保证的。所以`Y`只有在`X`评估为真时才被评估。

这同样适用于`X || Y`- 在这种情况下，仅在评估为 false`Y`时才评估。`X`

有关提及并保证此行为的 C 规范的参考，请参阅[Mike 的回答。](https://stackoverflow.com/a/15638629/298479)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T13:45:08.747

C 规范（6.5.13）为您阐明了这一点：

> 4 与按位二进制 & 运算符不同，&& 运算符**保证从左到右的求值**；如果计算第二个操作数，则在第一个和第二个操作数的计算之间存在一个序列点。**如果第一个操作数比较等于 0，则不计算第二个操作数。**

所以 C 语言本身定义了 if `X == 0`then`Y`不会被检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T13:28:49.680

`Y`仅当是时才`X`检查`true`

如果`X`为假则`Y`不会被检查

**顺便说一句**，检查是在执行运行时完成的，而不是在编译阶段

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:45:03.550

`&&`和`||`强制从左到右评估。如果计算第二个操作数，两者都将在第一个和第二个操作数之间引入一个序列点。如果表达式的结果可以单独从第一个操作数确定，则两者都不会计算第二个操作数。IOW, for `X && Y`,`Y`如果`X`为假则不会被评估，而 for `X || Y`,`Y`如果`X`为真则不会被评估。

请注意，优先级不影响评估顺序；给定一个表达式，例如`X || Y && Z`,之前`Y && Z`不会*被*计算`X`，即使`&&`它的优先级高于`||`. `X`首先被评估；如果结果为 0（假），则`Y`进行评估。如果该结果为非零（真），则`Z`进行评估。

[这是在语言标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)（2011 版，在线草案）的第 6.5.13 和 6.5.14 节中定义的，因此它不依赖于编译器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T13:45:08.660

如果`Y`有副作用，或者如果访问它可能是未定义的行为（例如错误的指针取消引用），那么编译器必须确保`Y`除非`X`评估为真，否则不会评估它。但是，如果两者都`X`没有`Y`副作用并且编译器知道对它们的访问是明确定义的，它可能会选择以两种访问都发生的方式进行优化。

# android - 在我的应用中询问 Google 地图版本

> ID：15638237
> 
> 赞同：0
> 
> 时间：2013-03-26T13:27:41.140
> 
> 标签：android, google-maps

我有一个使用谷歌地图的应用程序。由于使用 Android 中的新 Api，如果用户没有最新的 Google 地图应用程序，地图将无法工作，有什么方法可以让我的应用程序知道用户安装的版本？而且...我的应用程序可以知道 Google Play 中的最后一个版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:44:03.033

> 如果用户没有最新的谷歌地图应用程序，地图将无法工作，有什么方法可以让我的应用程序知道用户安装的版本？

您的应用不关心 Google 地图的版本。您的应用关心是否安装了 Play 服务框架。

我的示例应用程序，例如[这个](https://github.com/commonsguy/cw-omnibus/blob/master/MapsV2/Basic)应用程序，使用一个`AbstractMapActivity`包含检查 Play 服务框架的详细信息的一个调用`readyToGo()`：

```
 protected boolean readyToGo() {
    int status=
        GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);

    if (status == ConnectionResult.SUCCESS) {
      return(true);
    }
    else if (GooglePlayServicesUtil.isUserRecoverableError(status)) {
      ErrorDialogFragment.newInstance(status)
                         .show(getSupportFragmentManager(),
                               TAG_ERROR_DIALOG_FRAGMENT);
    }
    else {
      Toast.makeText(this, R.string.no_maps, Toast.LENGTH_LONG).show();
      finish();
    }

    return(false);
  } 
```

`true`如果`isGooglePlayServicesAvailable()`它本身返回，这将返回`true`。否则，如果可能，它将显示一个对话框（有一个`ErrorDialogFragment`内部类），引导用户安装 Play Services Framework。或者，它会显示一个`Toast`不可恢复的问题（尽管生产代码应该使用其他东西，比如面包块）。

`GooglePlayServicesUtil`有[自己的一套 JavaDocs](http://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html)。

# eclipse - 自定义 Ant 脚本和 Subversion 命令和脚本以自动化流程

> ID：15638238
> 
> 赞同：0
> 
> 时间：2013-03-26T13:27:41.267
> 
> 标签：eclipse, svn, ant, eclipse-plugin, svncommit

我想通过自定义 Ant 脚本或 Ant XML 和 SVN 命令来执行以下操作。我在 Eclipse 工作区中有四个项目。我正在使用 Eclipse Indigo，我正在使用 Java EE。

我有 Java Web 应用程序和 Java Web 服务的四个项目 a、b、c、d。我想自动化以下过程：

```
1.Get update from svn for All a,b,c,d project.
2.clean all four project.
3.Build all four project.
4.make jar of project d and export into lib of project b.
5.Build b project.
6.make jar of project c and export into lib of project a.
7.Build a project.
8.Make ab.war archive of project a and b and put into specified location(i.e. c:\xyz\)
9.Then I want to commit this ab.war archive to a particular svn location or tag it (for read-only). 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:55:21.297

首先阅读这个[Ant 教程](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)。然后看看我下面的评论...

> 1.从 svn 获取所有 a,b,c,d 项目的更新。
> 
> 9.然后我想将这个 ab.war 存档提交到特定的 svn 位置或标记它（只读）。

您可以尝试[使用 SVNAnt](http://subclipse.tigris.org/svnant.html)或使用[`<exec>`](http://ant.apache.org/manual/Tasks/exec.html).

> 2.clean所有四个项目。

[`<delete>`](http://ant.apache.org/manual/Tasks/delete.html)

> 3.构建所有四个项目。
> 
> 5.构建b项目。
> 
> 7.构建一个项目。

[`<javac>`](http://ant.apache.org/manual/Tasks/javac.html)

> 4.制作项目d的jar并导出到项目b的lib中。
> 
> 6.制作项目c的jar并导出到项目a的lib中。

[`<jar>`](http://ant.apache.org/manual/Tasks/jar.html),[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)

> 8.将项目a和b的ab.war归档并放到指定位置(即c:\xyz)

[`<war>`](http://ant.apache.org/manual/Tasks/war.html),[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)

# comparison - 测试 Postgresql 数组字段是否为空或为空的正确方法是什么

> ID：15638239
> 
> 赞同：5
> 
> 时间：2013-03-25T20:26:15.863
> 
> 标签：comparison, postgresql, function, arrays, null

我有一个用 integer_array 字段定义的表。它包含以下数据：

```
 id | black_list 
----+------------
  4 |            
  5 |            
  8 |            
 12 |            
  6 |            
  7 |            
 10 | {5}        
 13 | {5}        
  3 | {}         
  9 | {3}        
 11 | {}         
 14 | {}         
  1 | {}         
  2 | {}         
 15 | {}         
 16 | {}         
 17 | {}         
(17 rows) 
```

我需要编写一个查询来查看数组字段是否为空 - NULL 或其他。问题是这些`{}`值不为空，它们也不从 ARRAY_LENGTH 函数返回任何长度。[http://www.postgresql.org/docs/8.4/static/functions-array.html](http://www.postgresql.org/docs/8.4/static/functions-array.html)中列出的其他数组函数似乎也不是我需要的。我发现我可以写信`ARRAY_LENGTH(0 || black_list)`让它们都返回 1 或更大的长度，但这似乎是一个讨厌的 hack。测试这个的正确方法是什么？

奖金问题：到底`{}`代表什么？我一直无法编写将返回该值的选择语句。`ARRAY[]`抛出错误，`ARRAY[""]`返回`{""}`，`ARRAY[NULL]`返回`{NULL}`等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:47:50.723

`{}`似乎代表一个空数组，这可以解释值是`NOT NULL`和`ARRAY_LENGTH({})`不返回任何东西——尽管我希望它在 0 上返回 0 `{}`，也许这是我不熟悉的 PostgreSQL 特性。

是否有理由不能只测试 的返回值`ARRAY_LENGTH`，例如

```
SELECT id FROM table WHERE ARRAY_LENGTH(black_list, 1) IS NULL OR ARRAY_LENGTH(black_list, 1) < 1 
```

假设`ARRAY_LENGTH()`不会对空值（`id=12`例如上面示例中的 for ）失去理智，这似乎可以解决问题。

# java - 如何计算网络的延迟和带宽

> ID：15638244
> 
> 赞同：0
> 
> 时间：2013-03-26T13:27:56.917
> 
> 标签：java, mpi

我有 ping 几台机器并记录时间的代码，它针对各种数据包大小（1kb 到 100gb）执行此操作，但我想知道如何计算网络的延迟，如何实现？

这是我用来测量 ping 的代码：

我还如何测量系统的带宽？

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:16:42.357

在延迟和带宽完全恒定的理想情况下，这只是一个线性问题：

```
delay = packetsize / bandwidth + latency 
```

有两个变量，带宽和延迟，所以你至少需要两条不同的记录来解决它。但是，我建议为许多数据对计算它们，例如取所有结果的中值。

我认为求解上述方程应该很容易。如果没有，请随时询问。

**更新：**如何求解上述方程

```
Let
y1, y2 values for delay
x1, x2 values for packetsize
a := 1/bandwith
b := latency

y1 = a * x1 + b
y2 = a * x2 + b
=> b = y1 - a * x1              [1]
=> y2 = a * x2 + y1 - a * x1
=> a = (y2 - y1) / (x2 + x1)
Now put it in equation [1]:
=> b = y1 - (y2 - y1) / (x2 + x1) 
```

现在你有`b`延迟和`1 / a`带宽。

# file-upload - 将图像文件保存在特定目录中 jsf primefaces 项目

> ID：15638248
> 
> 赞同：0
> 
> 时间：2013-03-26T13:28:07.007
> 
> 标签：file-upload, jsf-2, primefaces, directory

我想将 byte[] 文件保存到特定目录中：我从这个方法中得到它：

```
public void setUploadedPicture(UploadedFile uploadedPicture)
{
    System.out.println("set : "+uploadedPicture.getFileName()+" size : "+uploadedPicture.getSize());        
    this.uploadedPicture = uploadedPicture;
} 
```

我访问 byte[] ：

```
uploadedPicture.getContents() 
```

我测试了这个[链接](http://www.java-examples.com/write-byte-array-file-using-fileoutputstream)，但没有结果

如何将其保存到我的项目内部或外部的特定目录中

谢谢你

****** *** ** *** ******编辑****** ** *** ** *** ** ***** 这是有效的代码，但有时我有错误：**

 **```
public void setUploadedPicture(UploadedFile uploadedPicture)
{
    System.out.println("set : "+uploadedPicture.getFileName()+" size : "+uploadedPicture.getSize());        
    this.uploadedPicture = uploadedPicture;

    InputStream inputStr = null;
    try {
        inputStr = uploadedPicture.getInputstream();
    } catch (IOException e) {
        e.printStackTrace();
    }

    //create destination File
    String destPath = "C:\\"+uploadedPicture.getFileName();
    File destFile = new File(destPath);

    //use org.apache.commons.io.FileUtils to copy the File
    try {                    
        FileUtils.copyInputStreamToFile(inputStr, destFile);
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:45:42.583

```
public void handleFileUpload(FileUploadEvent event) {  

    //get uploaded file from the event
    UploadedFile uploadedFile = (UploadedFile)event.getFile();

    //create an InputStream from the uploaded file
    InputStream inputStr = null;
    try {
        inputStr = uploadedFile.getInputstream();
    } catch (IOException e) {
        //log error
    }

    //create destination File
    String destPath = "your path here";
    File destFile = new File(destPath);

    //use org.apache.commons.io.FileUtils to copy the File
    try {                    
        FileUtils.copyInputStreamToFile(inputStr, destFile);
    } catch (IOException e) {
        //log error
    }
} 
```**

# android - 语法错误，行中有多个标记

> ID：15638249
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:28:08.113
> 
> 标签：android, syntax-error, android-camera

```
ImageView ivCamera;

FlashLightControl = (Button)findViewById(R.id.flashcontrol);
ivCamera = (ImageView)findViewById(R.id.iv_camera); 
```

`Syntax error on token ";" ,, expected.`

* * *

```
- Multiple markers at this line
- Syntax error on token ")", { expected after    this token
- Syntax error, insert ";" to complete       FieldDeclaration
- Syntax error on token ".", ... expected
- Return type for the method is missing 
```

* * *

`Syntax error, insert "}" to complete MethodBody`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:31:19.033

您需要命名 FlashLightControl 变量：

```
FlashLightControl flc = (Button)findViewById(R.id.flashcontrol);
ivCamera = (ImageView)findViewById(R.id.iv_camera); 
```

另一方面，是否`Button`可以将其视为`FlashLightControl`实例？

也许你想要

```
Button flashLightControl = (Button)findViewById(R.id.flashcontrol); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:31:21.893

您似乎缺少对象引用。请更改以下代码行：

```
FlashLightControl = (Button)findViewById(R.id.flashcontrol); 
```

对此：

```
FlashLightControl flashControlName = (Button)findViewById(R.id.flashcontrol); 
```

但是，这仅在`FlashLightControl`是类型`Button`或与之兼容时才有效。

希望这可以帮助。

# javascript - 幻灯片中的图片未显示

> ID：15638256
> 
> 赞同：0
> 
> 时间：2013-03-26T13:28:33.957
> 
> 标签：javascript, html, css, slideshow

只有我网站幻灯片中的前三张照片显示...我不知道如何解决它，我不太确定问题是什么，因为它在几周前工作正常，但突然停止工作，我不知道不知道我做错了什么。

[http://whybaguio.com/](http://whybaguio.com/) - 就是这个网站。

谢谢 ！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:50:26.657

在`button3_click()`and`button4_click()`中，您将超时设置为`button1_click()`。这就是为什么它会在显示第三张图片后回到第一张图片。只需将超时更改为正确的功能，它就会按预期工作。

```
function button3_click(event)
{
...
clearTimeout(timer);
timer = setTimeout(eval("button4_click"),"3000");
...
}

function button4_click(event)
{
...
clearTimeout(timer);
timer = setTimeout(eval("button5_click"),"3000");
...
} 
```

# php - 如何通过ajax将自定义变量传递给服务器？

> ID：15638258
> 
> 赞同：-2
> 
> 时间：2013-03-26T13:28:36.730
> 
> 标签：php, ajax, variables

我想将自定义变量发送到 customID:5 之类的 url。如何添加此代码。请帮助

```
 $("#e8").select2({
            placeholder: "Search for another Concept",
            minimumInputLength: 1,
            multiple: true,

            ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
                url: "sendchat3.php",
                dataType: 'json',
                data: function (term, page) {
                    return {
                        q: term, // search term
                        page: page
                    };
                },
                results: function (data, page) {
                    return { results: data};

                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:41:33.990

```
...
            data: function (term, page) {
                return {
                    q: term, // search term
                    customID: 5,
                    page: page
                };
            },
... 
```

# javascript - 使用 Javascript getElementById更新 a 的值

> ID：15638260
> 
> 赞同：0
> 
> 时间：2013-03-26T13:28:38.870
> 
> 标签：javascript

我对 JS 非常陌生，并试图了解如何使用 JS 更改跨度的值。所以，我有一个看起来像这样的跨度：

```
<span id="s551392614400915" class="vote-count-post" value="551392614400915">0.31</span> 
```

我想将 0.31 更改为 150 - 我正在尝试使用 getElementById，如下所示：

```
var xx=150;
document.getElementById("s551392614400915").value = "150"; //dosent work.
//document.getElementById("s551392614400915").value = xx; //dosent work. 
```

由于某种原因，这似乎不起作用。我知道我在做一些完全愚蠢的事情，但我看不到在哪里。这是我相当愚蠢的[JS Fiddle](http://jsfiddle.net/YnUbp/4/)

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:30:37.920

如果`document.getElementById("s551392614400915").innerHTML= "150"`要更改`span`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:30:14.657

使用`innerHTML`而不是`value`. `value`用于具有用户可更改值的表单输入。

```
document.getElementById("s551392614400915").innerHTML = "150"; 
```

# c++ - C ++中两组结构的并集

> ID：15638261
> 
> 赞同：0
> 
> 时间：2013-03-26T13:28:40.050
> 
> 标签：c++, operator-overloading

我有一组 SplinePoints 和 InterpolatedPoints。他们的 Union 必须存储在 FinalInterpolatedPoints 中。

这是主文件：

```
#include <iostream>
#include <vector>
#include <conio.h>
#include <cmath>
#include <algorithm>
#include <iterator>
#include <set>

using namespace std;

typedef struct SplinePoints {
int x;
double y;
SplinePoints(int a, double b) : x(a), y(b) {

}
friend bool operator < (SplinePoints const&A, SplinePoints const&B) {
    return A.x < B.x;
}
};

typedef struct InterpolatedPoints {
int x;
double y;
InterpolatedPoints(int a, double b) : x(a), y(b) {

}
friend bool operator < (InterpolatedPoints const&A, 
                InterpolatedPoints const&B) {
    return A.x < B.x;
}
};

typedef struct FinalInterpolatedPoints {
int x;
double y;
FinalInterpolatedPoints(int a, double b) : x(a), y(b) {

}
friend bool operator < (FinalInterpolatedPoints const&A, 
                FinalInterpolatedPoints const&B) {
    return A.x < B.x;
}
FinalInterpolatedPoints operator= (SplinePoints const&A) {
    x = A.x;
    y = A.y;
    return *this;
}
FinalInterpolatedPoints operator= (InterpolatedPoints const&A) {
    x = A.x;
    y = A.y;
    return *this;
}
};

inline bool operator < (InterpolatedPoints const&A, 
                SplinePoints const&B) {
return A.x < B.x;
}

int main (int argc, char** argv) {

set <SplinePoints> set1;
set <InterpolatedPoints> set2;
set <FinalInterpolatedPoints> BaseLine;

set1.insert(SplinePoints(1,2));
set1.insert(SplinePoints(2,5));
set1.insert(SplinePoints(3,8));
set1.insert(SplinePoints(4,1.66));

set2.insert(InterpolatedPoints(5,5.768));
set2.insert(InterpolatedPoints(6,5.560));
set2.insert(InterpolatedPoints(7,5.643));
set2.insert(InterpolatedPoints(8,5.313));

set_union(set1.begin(), set1.end(), set2.begin(), set2.end(), inserter(BaseLine, BaseLine.begin()));

getch();
return 0;
} 
```

我用这个函数来做到这一点：

```
set_union(set1.begin(), set1.end(), set2.begin(), set2.end(), inserter(BaseLine, BaseLine.begin())); 
```

其中 set1、set2 和 BaseLine 分别是 SplinePoints、InterpolatedPoints 和 FinalInterpolatedPoints 类型。

当我调试程序时，我得到模板重载错误`<`和“=”运算符，这些运算符被引用到头文件的源文件`alogrithm`

```
template<class _InIt1,
class _InIt2,
class _OutIt> inline
_OutIt _Set_union(_InIt1 _First1, _InIt1 _Last1, _InIt2 _First2, _InIt2 _Last2, _OutIt _Dest)
{   // OR sets [_First1, _Last1) and [_First2, _Last2), using operator<
for (; _First1 != _Last1 && _First2 != _Last2; )
    **if (_DEBUG_LT(*_First1, *_First2))**
        {   // copy first
        ***_Dest++ = *_First1;**
        ++_First1;
        }
    **else if (*_First2 < *_First1)**
        {   // copy second
        ***_Dest++ = *_First2;**
        ++_First2;
        }
    else
        {   // advance both
        ***_Dest++ = *_First1;**
        ++_First1;
        ++_First2;
        }
_Dest = _STD copy(_First1, _Last1, _Dest);
return (_STD copy(_First2, _Last2, _Dest));
} 
```

我在结构定义中包含了运算符重载函数，但我只能摆脱与`<`函数相关的错误。我仍然难以消除与`=`ie 相关的错误：

`error C2679: binary '=' : no operator found which takes a right-hand operand of type 'const SplinePoints' (or there is no acceptable conversion)`

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:32:50.220

尝试：

```
FinalInterpolatedPoints operator= (const SplinePoints &A) 
```

也就是说，将`const`关键字移到类型 ( `SplinePoints`) 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:38:25.827

您的代码有些地方很奇怪。将`typedef`类放在前面：

```
/*drop: typedef*/ struct SplinePoints { 
```

而且，你`operator=`的 s 应该返回一个参考，例如，

```
FinalInterpolatedPoints& operator= (SplinePoints const&A) {
//                     ^ add this!
    x = A.x;
    y = A.y;
    return *this;
} 
```

除此之外，您还没有提供可编译且完整的示例。如果您在修复上述问题后仍有问题，请创建一个并编辑问题。

# intellij-idea - intellij 12.0.4 - idea.exe 流量被 Symantec Endpoint Protect 阻止

> ID：15638270
> 
> 赞同：1
> 
> 时间：2013-03-26T13:28:58.833
> 
> 标签：intellij-idea

我会定期收到来自 Symantec Endpoint Protect 的消息，提示idea.exe 流量已被阻止。我假设这是关于如何使用 intellij 的某种类型的消息。有没有办法关闭外出消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:31:50.357

将 Idea 应用程序添加到例外： [http ://www.symantec.com/business/support/index?page=content&id=HOWTO61213](http://www.symantec.com/business/support/index?page=content&id=HOWTO61213)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:39:14.117

IDEA 使用了大量的网络：更新检查、Maven 依赖项下载、IDETalk 插件、可以验证外部资源的代码检查、编译器服务器进程、调试器、内部 IPC 服务器、版本控制服务器、任务服务器等之间的通信。

*   **可以在`Settings`|中禁用**更新检查** `Updates`.**
***   **IdeTalk**插件可以在`Settings`|中禁用 `Plugins`.*   **不存在的 Web 资源**检查可在`Settings`| `Inspections`.*   匿名**统计**报告控制在`Settings`| `Usage Statistics`.**

# php - 是否有允许在包含的 php 脚本中设置 php 变量然后在主文件中重用的设置？

> ID：15638277
> 
> 赞同：2
> 
> 时间：2013-03-26T13:29:13.323
> 
> 标签：php, linux, windows, configuration

我刚刚从 SVN 签出了一个项目，并尝试使用 WAMP 和虚拟主机在我的本地计算机上运行该项目。我收到很多错误，说变量没有被声明，经过进一步调查发现它们被设置在单独的 PHP 文件中，然后被包含在页面中并引发错误。

这在现场工作得非常好，但在我的本地却不行，这让我认为它一定是 PHP 设置。我查看了 PHP.ini 文件，但并不真正知道我在寻找什么。

有两件事我想知道...

首先，我可以在我的 PHP.ini 文件中调整一些东西来解决这个问题，其次，拥有这个设置是否是个好主意（应该有一个），因为我一直使用 PHP 变量，除非设置为页面私有$_SESSION 变量。

希望这对某人有意义。

我还应该提到我正在使用 Windows，而运行该文件的服务器正在使用 Linux。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:41:49.070

我的猜测是：您的本地和远程服务器设置了两个不同的包含路径。您可以通过查看[get_include_path()的输出来检查](http://php.net/manual/en/function.get-include-path.php)

然后，检查路径是否正确，您可能想检查这些文件的路径是否在同一目录中？如果不是，包含相对路径还是绝对路径？路径是如何定义的？这些信息将帮助您获得答案。没有 php.ini 设置可能对您有所帮助。

# android - 使用操作栏选项卡交换片段

> ID：15638278
> 
> 赞同：0
> 
> 时间：2013-03-26T13:29:13.710
> 
> 标签：android, tabs, android-actionbar

我的应用中有 3 个片段，分别分为 3 个选项卡 [1] [2] [3]。

想象一下，我在片段 [1] 上使用了一个按钮，它将使带有初始文本“X”的 TextView 变为“Y” 例如：`tv.setText("I'm a new text");`

因此，当我在选项卡之间导航并返回选项卡 [1] 时，TextView 将返回原始文本。就好像 onCreate() 再次调用。

我希望以某种方式在我的片段中不调用 onStop()，在我在选项卡之间切换时将我的视图的所有属性（例如文本、可见性等）保留在内存中。

谢谢！

----**编辑！**----

好吧，我找到了我想要的解决方案！很简单，我声明：

```
mPager = (ViewPager) findViewById(R.id.pager);
mPager.setOffscreenPageLimit(3); //Number of fragments that I wish to store in memory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:34:12.253

再次调用 onCreate 方法。您可以通过覆盖 onSavedInstanceState 来保存值并将它们取回 onActivityCreated 方法。例如让我们保存布尔值（你可以保存任何你想要的 - 字符串、整数等）：

保存值：

```
public void onSaveInstanceState(Bundle outState) {
        outState.putBoolean("booleanValue", true);
} 
```

恢复值（您也可以在 onCreate 中调用它）：

```
 protected void onActivityCreated(Bundle savedInstanceState) {
super.onActivityCreated(savedInstanceState);
            if (savedInstanceState != null && savedInstanceState.containsKey("booleanValue")) {
                boolean myBoolean = savedInstanceState.getBoolean("booleanValue");
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:32:54.153

好吧，这是因为 onCreate 实际上被调用了。如果我是你，我会使用 ViewPager。这样，只需将 offScreenElementNumber 设置为 2，您就可以立即加载所有片段，并且它们将保持其状态！

看看这个：

[http://tamsler.blogspot.com.es/2011/10/android-viewpager-and-fragments.html](http://tamsler.blogspot.com.es/2011/10/android-viewpager-and-fragments.html)

# c# - 查询表达式 '@ID = @@IDENTITY' II 中的语法错误（缺少运算符）

> ID：15638280
> 
> 赞同：0
> 
> 时间：2013-03-26T13:29:20.807
> 
> 标签：c#, ms-access

访问 2003

VS 2010 C#

正如主题标题所说，我遇到了问题。这与我之前提出的问题有关，[Here](https://stackoverflow.com/questions/15626220/syntax-error-missing-operator-in-query-expression-id-identity)。我希望这个帖子的模组可以接受，但我不确定。

`@@Identity`Martin Parkin 建议在使用C# 和 MS-Access时不要关闭 Insert 和 Select 之间的连接。我以为我让它工作了，直到我发现事实并非如此。老实说，我不知道如何解决这个问题。因此，如果有人可以帮助我，我将不胜感激。

这是我的 btnLogin 方法..

```
 cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime)";
        cmd.Parameters.AddWithValue("@UserName", txtUserName.Text);
        cmd.Parameters.AddWithValue("@LoggedInDate", DateTime.Now.ToShortDateString());
        cmd.Parameters.AddWithValue("@LoggedInTime", DateTime.Now.ToString("HH:mm"));
        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();

        cmd.CommandText = "SELECT @ID = @@IDENTITY";
     // cmd.Parameters.AddWithValue("@ID", OleDbType.WChar); << tried this, unsuccessful
        int id = (int)cmd.ExecuteScalar(); // getting the same error? 
        myCon.Close(); 
```

这是我的 btnLogOut 方法...

```
 OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;

         int id = 0;
        cmd.CommandText = " UPDATE [LoginLogTable] SET [LoggedOutDate] = @LoggedOutDate, [LoggedOutTime] = @LoggedOutTime WHERE [ID] = @ID";
        cmd.Parameters.AddWithValue("@ID", id);
        cmd.Parameters.AddWithValue("@LoggedOutDate", DateTime.Now.ToShortDateString());
        cmd.Parameters.AddWithValue("@LoggedOutTime", DateTime.Now.ToString("HH:mm"));
        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();
        Close(); 
```

或者

`btnLogin`如果我这样做的方法

`cmd.CommandText = "SELECT @ID = @@IDENTITY";`

并隐藏`cmd.ExecuteNonQuery();`它之后。然后日期和时间将被记录到数据库中，但日期和时间不会保存在数据库中，用于注销。

我不确定问题出在`btnLogin`方法或`btnLogOut`方法上，还是两者兼而有之。

**工作解决方案**

原来我是

```
 cmd.CommandText = " UPDATE [LoginLogTable] SET [LoggedOutDate] = @LoggedOutDate,   
 [LoggedOutTime] = @LoggedOutTime WHERE [ID] = @ID";
 cmd.Parameters.AddWithValue("@ID", id);
 cmd.Parameters.AddWithValue("@LoggedOutDate", DateTime.Now.ToShortDateString());
 cmd.Parameters.AddWithValue("@LoggedOutTime", DateTime.Now.ToString("HH:mm")); 
```

然后我做了这个

```
 cmd.CommandText = " UPDATE [LoginLogTable] SET [UserName] = @UserName, [LoggedOutDate] = 
 @LoggedOutDate, [LoggedOutTime] = @LoggedOutTime WHERE ID = @ID";
 cmd.Parameters.AddWithValue("@UserName", txtUserName.Text);
 cmd.Parameters.AddWithValue("@LoggedOutDate", DateTime.Now.ToShortDateString());
 cmd.Parameters.AddWithValue("@LoggedOutTime", DateTime.Now.ToString("HH:mm"));
 cmd.Parameters.AddWithValue("@ID", id); 
```

感谢 D Stanley 和 Gord Thompson。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:35:29.407

该`@ID`变量不会像您认为的那样持久存在于数据库中。当连接关闭时（可能更早），它将超出范围。我建议您将新身份存储在您的应用程序中：

假设这些按钮处理程序是表单上的方法，您可以将 ID 存储为表单的属性：

```
 // somewhere in the form definition:
    private int ID {get; set;}
    ...

    cmd.CommandText = "SELECT @@IDENTITY";
    int id = (int)cmd.ExecuteScalar();
    this.ID = id; 
```

然后在您的 Logout 方法中使用 ID：

```
 // get the id from the form
    int id = this.ID;

    cmd.CommandText = " UPDATE [LoginLogTable] SET [LoggedOutDate] = @LoggedOutDate, [LoggedOutTime] = @LoggedOutTime WHERE [ID] = @ID";
    cmd.Parameters.AddWithValue("@ID", id);
    cmd.Parameters.AddWithValue("@LoggedOutDate", DateTime.Now.ToShortDateString());
    cmd.Parameters.AddWithValue("@LoggedOutTime", DateTime.Now.ToString("HH:mm")); 
```

# abap - 将新行写入文件

> ID：15638284
> 
> 赞同：4
> 
> 时间：2013-03-26T13:29:26.727
> 
> 标签：abap

我正在尝试写入文件换行符。我正在使用**WS_DOWNLOAD**但不知道如何将新行写入文本。

有谁知道 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:04:46.547

将字符类型字段设置为`cl_abap_char_utilities=>cr_lf`并将其插入到输出的适当位置（无论您想要换行的位置）。

这包含回车和换行字符。

# ruby-on-rails - 通过 link_to、rails 将 id 参数从 show action 传递到 new action

> ID：15638288
> 
> 赞同：3
> 
> 时间：2013-03-26T13:29:40.963
> 
> 标签：ruby-on-rails, parameters, link-to

我有一些显示一个类别的显示动作。但从那里我想通过链接创建新产品。重点是我通过 link_to 传递了类别 ID 和名称。

一切顺利，它打开了产品/新操作。在浏览栏中有这样的链接`http://mysite/products/new?id=43&name=Skeleji`。没关系。

但是我怎样才能让这些 id 和 name 在表单中可用，我在哪里填写有关新产品的信息？在此之后，当我单击创建时，我希望这些值（例如 category_id）与其他关于产品的信息一起保存在数据库中。

在产品和类别之间，我已经建立了关系。

到目前为止，我的代码看起来像这样。

我的类别/显示操作代码如下所示。

```
<%= link_to "Add Product", {:controller => "products", :action => "new", :id => @category.id, :name => @category.name }%> 
```

产品控制器，新动作是这样的。

```
def new
@product = Product.new
@product.category_id = @category.id
end 
```

单击创建它会创建项目，但没有 category_id。问题可能出在哪里？也许代码在新动作下，实际上应该在创建动作下。大约一年前我设法做这样的事情，但我找不到那个项目。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:37:24.793

您应该能够在您的`new`操作中设置值：

```
def new
  @product = Product.new
  @product.category_id = params[:id]
  @product.name = params[:name]
end 
```

然后它们会以您的形式出现。

但我认为调用参数不是一个好主意，`id`因为它是资源路由的默认参数名称。`params[:id]`in`ProductsController`通常应该总是引用一个`Product`对象。碰巧的是，您`new`在正常使用中永远不会收到`id`参数的操作中使用它，所以我怀疑您会遇到任何麻烦，但它不是很语义化。

如果您让`Product`接受嵌套属性，`Category`那么我认为您可以简单地执行以下操作：

```
@product = Product.new(params[:product]) 
```

如果您将参数结构化为：`:product => { :name => "whatever", :category_attributes => { :id => 1 } }`但这可能会根据您的需要而过大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:37:30.850

你有没有尝试过`@product.category_id = params[:id]`

通常`?`，url 中的任何内容都包含在`params`变量中。

# javascript - jquery 问题 xhr.send( ( s.hasContent && s.data ) || null );

> ID：15638292
> 
> 赞同：2
> 
> 时间：2013-03-26T13:29:59.230
> 
> 标签：javascript, jquery, ajax

我正在通过 jquery 进行简单的发布请求，并在 localhost 上从中读取数据。

如果我通过 localhost 访问该文件，我的脚本可以正常工作，但如果我通过在控制台上双击它来访问该文件，它会以红色文本显示我 200 ok，我没有得到任何响应。我的文件名是 send.html ，它通过 jquery 发送数据。我的代码是

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
<script>
$(document).ready(function (){  
                    var counter =1 , array_counter =0;
                    var picture_id_array=new Array(6);
                    picture_id_array[1] = new Array(3);
                    $.ajax({   
                        type: "POST",
                        data : $(this).serialize(),
                        cache: false, 
                        url: "http://localhost/CI/index.php/page/id/1",   
                        success: function(data){
                            var obj = jQuery.parseJSON(data);
                       var json = $.parseJSON(data);
                       $(json).each(function(i,val){
                            $.each(val,function(k,v){
                             console.log(k+" : "+ v);    
                            }
                          });
                  }); 
```

它告诉我关于 jquery 中的这一行导致错误

```
 // Do send the request
// This may raise an exception which is actually
// handled in jQuery.ajax (so no try/catch here)
xhr.send( ( s.hasContent && s.data ) || null ); 
```

我尝试了一种解决方案，即 putt datatype:JSONP 但它没有给我结果。

# jquery - 已经在使用 jQuery 对象的站点上的 jquery noConflict

> ID：15638296
> 
> 赞同：2
> 
> 时间：2013-03-26T13:30:12.483
> 
> 标签：jquery

我们有一些代码被拉入并在许多网站上使用。我对目标网站没有控制权。

我们一直在使用 JQuery.noconflict() 来阻止我们的代码影响网站，但我们有一个目标已经在使用 JQuery，我不知道如何解决这个问题......

基本上，当我们的代码被拉入那里的一些 Jquery 功能时，站点中断。

这是我们造成问题的 Jquery 的片段。

```
jQuery(function(){
jQuery('#superfish-4').supersubs({minWidth: 12, maxWidth: 27, extraWidth: 1}).superfish({
animation: {opacity:'show'},
speed: 'fast',
autoArrows: false,
dropShadows: true}).supposition().find('ul').bgIframe({opacity:false});
}); 
```

当包含我们的代码时，我们会收到以下错误：

未捕获的类型错误：对象 [object Object] 没有方法“supersubs”

以下是我们的 Jquery 的一些示例。

```
<script src="jquery-latest.min.js" type="text/javascript"></script> 
<script>jQuery.noConflict(); 
jQuery(document).ready(function() { 
jQuery('head').append('<link rel="stylesheet" href="cssfilehere" type="text/css" />'); 
jQuery.get('htmlfilehere', function(data) { jQuery('div.fdmediabar-65144924').html(data); }); }); 
</script> <div id="idhere" class="classhere"></div> 
```

我去掉了类名和 URL，因为这是一个客户项目。

我不确定如何以不同的方式引用 JQuery 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:35:35.520

如果您致电`.noConflict(true)`（[文档](http://api.jquery.com/jQuery.noConflict/)）：

> 如果由于某种原因加载了两个版本的 jQuery（不推荐），从第二个版本调用 $.noConflict(true) 会将全局范围的 jQuery 变量返回到第一个版本的变量。

然后，您可以覆盖`jQuery`为先前加载的版本。

您必须保留自己对 jQuery 的引用并使用它。[有关更多讨论，](http://forum.jquery.com/topic/multiple-versions-of-jquery-on-the-same-page)请参阅此内容。

# php - 设置 $_SESSION['callback'] = 'no' if $_SESSION['callback'] == 'yes'

> ID：15638297
> 
> 赞同：0
> 
> 时间：2013-03-26T13:30:13.617
> 
> 标签：php, session

我有一个功能可以收集有关您在接下来的十分钟内是否有任何回电给公司的信息。一切正常，除了一件事。如果找到回调，我想显示 JavaScript 警报。我将 $_SESSION['callback'] 设置为 'yes' 并重定向。

在第 2 页，我检查 $_SESSION['callback'] 是否为“是”，如果是，则输出 JS 代码并将 $_SESSION['callback'] 设置为“否”。

这并不像人们想象的那样起作用。它将 $_SESSION['callback'] 设置为 'no' 但它不输出 JS 代码，即使我在单独的 if 子句中将 $_SESSION['callback'] 设置为 'no' 也是如此。

这是有问题的代码：

```
if(@$_SESSION['callback'] == 'yes') {
    echo "<script type=\"text/javascript\">alert('Du har en återkoppling till detta företag inom tio minuter!');</script>";
    $_SESSION['callback'] = 'no';
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:28:05.847

以下示例完全符合您的要求。如果它是您的版本，那么您应该开始挖掘 $_SESSION 的内容和其他值。

您会在第一时间看到警告框，然后刷新页面时它将不起作用。

```
<?php

session_start();

if(!isset($_SESSION['callback'])) $_SESSION['callback'] = 'yes';

if($_SESSION['callback'] == 'yes') {
    echo "<script>alert('hello!');</script>";
    $_SESSION['callback'] = 'no';
}

?> 
```

# html - 如何使内容背景变白

> ID：15638303
> 
> 赞同：0
> 
> 时间：2013-03-26T13:30:35.913
> 
> 标签：html, css, background

我是编程新手，有一个基本问题。我的网页上有一张背景图片，但我希望内容区域有白色背景。我在网上很常见，但作为新手，我似乎无法弄清楚如何去做。我有一个将我的内容居中的#wrapper div 和一个用于显示图像的 css 规则，只是无法将内容区域背景设为白色。对这个新手的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:38:49.130

有几种方法可以实现这一点。您可以使用示例中的属性来设置 HTML 标记（ `div`、`span`等`p`...）的样式：`style`

```
<div style="background-color: white;"></div> 
```

或者在`<head></head>`标签内定义您的样式，如下所示：

```
<html>
    <head>
        <style>
             .your_class { background-color: #ffffff; }
        </style>
    </head>
    <body>
        <div class="your_class"></div>
    </body>
</html> 
```

或者使用`link`标签将你的 CSS 代码放在一个文件中并链接到它：

```
<head>
   <link rel="stylesheet" type="text/css" href="your_file.css">
</head> 
```

或者有时您需要动态设置样式。然后javascript进入图片：

```
<html>
    <head>
        <script>
            function changeBg(id, color) {
                document.getElementById(id).style.bgColor = color;
            }
        </script>
    </head>
    <body onload="changeBg('myDiv', 'white');">
        <div id="myDiv"></div>
    </body>
</html> 
```

您应该阅读更多有关 HTML 和 CSS 的内容以了解其工作原理。网上有很多教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:34:06.167

假设这样的结构：

```
<body>
    <div id="wrapper">
        <section id="content">            <!-- Or div or whatever -->
            Lorem ipsum dolor sit amet
        </section>
    </div>
</body> 
```

你应该申请`background-color`一个`#wrapper`：

```
body{
   background-image: url("your_url");
}

#wrapper{
   background-color:white;
} 
```

检查[this fiddle](http://jsfiddle.net/bigood/agEtL/)以获得一个工作示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:32:07.007

将您的内容放在一个 div 中，并`background:#fff;`在您的 CSS 中指定该 div。

# jquery-ui - jQuery UI Widget 工厂多次调用 _hoverable（等）

> ID：15638304
> 
> 赞同：1
> 
> 时间：2013-03-26T13:30:35.997
> 
> 标签：jquery-ui

在一个小部件中，我正在添加一个`refresh`方法，我需要在重新应用所有挂钩之前清理所有内容。但是，我不确定`this._hoverable(selector);`在同一元素上多次调用的后果是什么。

往里`jquery-ui-1.10.js`看，我看到小部件工厂保存了一个元素的 jQuery 对象，它`add`使用选择器执行操作。虽然我认为它不会添加重复的 DOM 元素，但它更多的是下一个操作：`_on`这让我怀疑。

`_hoverable`可以在同一个元素上多次调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:44:59.133

不，你不应该那样做。在一个元素上多次调用[_hoverable()](http://api.jqueryui.com/jQuery.widget/#method-_hoverable)`mouseenter`将在和`mouseleave`事件上注册额外的处理程序。

如果您绝对必须多次调用此方法，则必须事先取消绑定这些处理程序：

```
this._off(element, "mouseenter mouseleave");
this._hoverable(element); 
```

请注意，事件是在引擎盖下命名的，因此对`_off()`上面的调用只会取消绑定通过 注册的处理程序`_on()`，而不是您可能自己注册的其他处理程序。

# antlr3 - ANTLR 如何在开始规则中使用 2 个选项时获取特定的错误消息

> ID：15638309
> 
> 赞同：1
> 
> 时间：2013-03-26T13:30:47.733
> 
> 标签：antlr3

我正在尝试解析一个可以包含表创建脚本或索引创建脚本的文件。
下面是语法。当我使用一些垃圾输入运行脚本规则时，`create xyz table` 我得到一个错误`line 1:0 no viable alternative at input 'create'` 但是当我运行 table_script 或 index_script 我得到特定的错误消息`line 1:8 missing 'table' at 'xxxtab'`

即使我将脚本作为丢失的表或索引运行......是否有可能得到相同的错误消息？

```
grammar DBScript;
options { output=AST; }
tokens {
    CREATE;
    TABLE;
    INDEX;

}

scripts
:
index_script | table_script
;

index_script
: create index index_name;

table_script
    : create table table_name ;

create
    : 'create';

table
    : 'table';

index
    : 'index';

table_name 
  :
   IDENT;

index_name 
  :
   IDENT;

fragment LETTER : ('a'..'z' | 'A'..'Z') ;
fragment DIGIT : '0'..'9';
INTEGER : DIGIT+ ;
IDENT : LETTER (LETTER | DIGIT)*;
WS : (' ' | '\t' | '\n' | '\r' | '\f')+ {$channel = HIDDEN;}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:35:59.153

我相信从 ANTLR 3.5 开始，错误消息*可能*~~更~~ 具体。但是，没有完美的方法来报告所有类型的错误。我能给出的最好的提示是告诉你 ANTLR 最擅长报告（并从中恢复）出现在 LL(1) 决策中的错误，你可以通过具有更长前瞻要求的左因子规则来编写这些错误。

 *对于上面的示例，您可以将引用保留`create`如下。请注意，在左分解之后既不`index_script`也不`table_script`直接引用。`create`

```
scripts : create_script;
create_script : create (index_script | table_script);

index_script : index index_name;
table_script : table table_name; 
```*

# multithreading - 具有许多线程的线程池 queueuserworkitem

> ID：15638314
> 
> 赞同：0
> 
> 时间：2013-03-26T13:31:00.453
> 
> 标签：multithreading, c++-cli, threadpool, managed, queueuserworkitem

注意：我对使用线程池不是很熟悉，这从下面的代码中可能很明显。我的印象是我可以将许多值推送到这个队列中，然后它会等待一个线程完成然后移动到下一个线程，系统将处理要运行的线程数的同步。

我正在尝试使用 ThreadPool::QueueUserWorkItem(waitcallback, num) ，其中 num 的值根据某些先前的算法迭代到动态值。我遇到的问题是程序在它变得太高时崩溃。

```
WaitCallback^ wcb = gcnew WaitCallBack(this, &createImage);
for(int i = 0; i < numBlocks; i++)
{
    ThreadPool::QueueUserWorkItem(wcb, i);
} 
```

我收到消息“运行时错误！此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。”

我最反感的是 numBlocks = 644。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:13:30.297

很难说是什么导致了程序崩溃。最有可能的是，在其中一个线程中引发了异常，导致程序停止运行。您必须确定在代码中引发异常的位置。

如您所知，`ThreadPool::QueueUserWorkItem`将要由线程池处理的项目排队。但是可以有多个线程处理该队列中的项目。例如，您可以有 20 个池线程，其中 15 个处理您排队的工作项。

如果您确实有那么多项目要处理并且您希望它们一次完成一项，那么为什么不将一个线程排队以一次完成一项。我从来没有做过托管 C++，所以我不会尝试用它写一个例子。但也许你可以翻译这段 C# 代码：

```
void ProcessInBackground(object state)
{
    int numBlocks = (int)state;
    for (int i = 0; i < numBlocks; ++i)
    {
        createImage(i);
    }
} 
```

然后你可以调用它：

```
ThreadPool::QueueUserWorkItem(ProcessInBackground, numBlocks); 
```

这将创建一个将按顺序处理项目的线程。

我怀疑您可以很容易地将其转换为托管 C++。

# php - Facebook PHP在Page Tab中获取用户信息，getUser在重定向登录后返回0

> ID：15638315
> 
> 赞同：0
> 
> 时间：2013-03-26T13:31:06.987
> 
> 标签：php, facebook, redirect, permissions

我正在尝试创建一个竞赛条目，在进入之前检查用户是否喜欢某个页面。如果他们这样做，它将获取他们的姓名、电子邮件和生日，以获取比赛条目的详细信息。

然而，由于某种原因，我无法让我的 PHP 代码工作。

```
 <?php
    require 'src/facebook.php';

    // Create our Application instance (replace this with your appId and secret).
  $facebook = new Facebook(array(
    'appId'  => 'XXX',
    'secret' => 'XXXX',
  'cooke' => true
));

// Get User ID

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $me = $facebook->api('/me?fields=likes.target_id(215359398497970),birthday,first_name,last_name,email');
    if($me){
        $first_name = $me['first_name'];
        $last_name = $me['last_name'];
        $email = $me['email'];
        $dob = $me['birthday'];
        die($me);
    } else {
        $likes = false;
    }
  } catch (FacebookApiException $e) {
    die($e);
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
  //echo $loginUrl;
}
?> 
```

由于某种原因，它陷入了重定向循环，因为 loginURL 似乎没有让我的用户登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T18:18:47.310

我遇到了同样的问题。我使用了一个示例项目，但无法弄清楚为什么它一直返回 0。在这里尝试了几乎所有相关链接，但没有一个解决它。

解决方案是在示例项目中更新 Facebook 的 SDK 文件。简单又容易错过，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:43:22.983

对于仍在寻找的任何人。这就是我解决问题的方法。我必须确保在任何其他代码之前执行这些代码，所以我将它放到我的 php 文件的最顶部并且它工作。我认为问题在于标头已经发送但我不知道，因为我的 PHP 警告/错误未启用显示。

# c# - 当前上下文中不存在名称“输入”

> ID：15638316
> 
> 赞同：0
> 
> 时间：2013-03-26T13:31:09.080
> 
> 标签：c#

我已经使用 C# 编程大约一年了，我通常会因为忽略某处的细节而遇到这样的问题。我觉得我又在这样做了，但我似乎无法解决问题。我有一个名为“input”的字符串变量，我在“Main”类的“if”语句中声明了它，如下所示：
`string input = Console.Readline();`
作为单独的“if”语句，在同一个“Main”类中，我写了这个：

```
 if (input != null || input != 0)
    {
        //I have code for this part, but it is irrelevant 
    }
    else
    {
        //And this part, but it is also irrelevant
    } 
```

我的问题是 MonoDevelop 在第二个“if”语句中突出显示了两个“输入”变量，并说“当前上下文中不存在名称输入”。我觉得我忽略了一些东西，任何帮助将不胜感激。我的完整代码是这样的：

```
using System;

namespace ConsoleTest
{
class MainClass
{
    public static string version = "0.0.1";
    public static string precursor = "/:>";

    public static void Main (string[] args)
    {
        Console.Write ("Console Test ");
        Console.WriteLine (version);
        Console.Write (precursor);
        string start = Console.ReadLine ();

        if (start == "start") {
            while (true) {
                Console.WriteLine ("Started");
                Console.Write (precursor);
                string input = Console.ReadLine ();
            }
        } else {
            Environment.Exit (0);
        }

        if (input != null || input != 0) {
            //Code
        } else {
            Console.WriteLine("Error: Input null");
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:36:45.403

在您的第一个 if 语句之前声明您的输入变量。因为它是在里面声明的，所以它只能在你的 if 语句中使用（或者在这种情况下在你的循环中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:37:53.500

`input`只存在于你的范围`while loop`内你的第一个`if statement`。

把它移到外面。

```
string input = new string();

if (start == "start") {
    while (true) 
    {
            Console.WriteLine ("Started");
            Console.Write (precursor);
            input = Console.ReadLine ();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:34:53.077

需要更多代码，但这可能是因为您试图将 String 与 int 进行比较。也许你正在寻找

```
input.equals("0")? 
```

编辑：查看您的代码，您在 if 语句中初始化了变量。您必须在函数开始时对其进行初始化。即使您只是将其设置为空。

```
public static void Main (string[] args)
{
    Console.Write ("Console Test ");
    Console.WriteLine (version);
    Console.Write (precursor);
    string start = Console.ReadLine ();
    string input = null;

    if (start == "start") {
        while (true) {
            Console.WriteLine ("Started");
            Console.Write (precursor);
            input = Console.ReadLine ();
        }
    } else {
        Environment.Exit (0);
    }

    if (input != null || !input.equals("0")) {
        //Code
    } else {
        Console.WriteLine("Error: Input null");
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:35:46.220

您的字符串输入在循环中声明。因此，在这个循环之后它是未知的。在循环之外声明它（并将其启动为`null`or `String.Empty`）然后将其填充到循环中

# jquery - JQuery：从左侧淡入图像列

> ID：15638322
> 
> 赞同：0
> 
> 时间：2013-03-26T13:31:19.837
> 
> 标签：jquery, opacity, fade

我真的没有找到任何关于它的东西。我所知道的只是一个对角淡入淡出插件，看起来不错（见这里：http: [//jonobr1.github.com/diagonalFade/](http://jonobr1.github.com/diagonalFade/)）但我不想要它对角线，我只想要从左边的淡入淡出效果，显然该插件未涵盖此“简单任务”。

插件是否可能超出顶部，并且只做一个小循环会更容易？类似于：在 200 毫秒内将第一行的不透明度设置为 0 到 1，延迟 20 秒，对第二行执行相同的操作，依此类推。

我的标记如下所示：

```
<div class="image_gallery">
  <div class="image_column">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
  <div class="image_column">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
  <div class="image_column">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
  <div class="image_column">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:02:02.800

您可以使用 jQuery 的 .fadeTo() 函数来完成工作。

1）给每一列一个不同的id来识别它，像这样：

```
<div class="image_gallery">
  <div class="image_column" id="column_1">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
  <div class="image_column" id="column_2">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
  <div class="image_column" id="column_3">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
  <div class="image_column" id="column_4">
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
    <div class="image"><img src="#" alt="" /></div>
  </div>
</div> 
```

2) 从不透明度为 0 的所有列开始。

3）在jQuery中创建一个处理动画的函数。这将在每一列上调用 .fadeTo(200, 1.0) ，其中 200 表示 200 毫秒的动画持续时间，1.0 表示目标不透明度，如下所示：

```
<script>
function fadePicturesIn(columnNum) {
  setTimeout(function() {
    $("#column_" + columnNum).fadeTo(200, 1.0);
    if (columnNum < 4) {
      fadePicturesIn(columnNum + 1);
    }
  }, 20000); // 20s delay
}
</script> 
```

4）在页面加载（或任何你想触发动画的地方），调用函数。

```
<script>
$(document).ready(function() {
  fadePicturesIn(1);
});
</script> 
```

或者

```
<script>
$("#myButton").click(function() {
  fadePicturesIn(1);
});
</script> 
```

希望有帮助！

# java - 将字符串转换为 json 并绑定到 List

> ID：15638324
> 
> 赞同：0
> 
> 时间：2013-03-26T13:31:29.973
> 
> 标签：java, json, deserialization, model-binding

我有以下字符串

```
string strFriends = {"data":[{"name":"Paras Dave","id":"535228534"},{"name":"Pradip Mehta","id":"537004435"},{"name":"Rajni Vanza","id":"545844068"}],"paging":{"next": "0"}}; 
```

现在我想将数据部分绑定到朋友列表对象

```
var serializer = new JavaScriptSerializer();
List<FriendModel> friends= serializer.Deserialize<List<FriendModel>>(strFriends); 
```

但以上将返回 0 条记录。

模型

```
 public class FriendModel
    {
        string id { set; get; }
        string name { set; get; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:48:56.250

JSON 本身有一些漂亮的对象，你想使用它们。

[http://json.org/java/](http://json.org/java/)

# python - Django forms.DateInput 不应用 attrs 字段中给出的属性

> ID：15638325
> 
> 赞同：10
> 
> 时间：2013-03-26T13:31:34.113
> 
> 标签：python, django, django-forms, django-1.4

占位符，当尝试通过 django 的 attrs 说明符为[forms.DateInput应用时未设置类](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#dateinput)

表单是[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)。

根据[文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#dateinput)

> 采用与 TextInput 相同的参数，但多了一个可选参数：

这是代码：

```
widgets = {
   'my_date_field': forms.DateInput(format=('%d-%m-%Y'), 
                    attrs={'class':'myDateClass', 
                           'placeholder':'Select a date'}
                    )
} 
```

同样适用于 a`forms.TextInput`并且它工作得很好。

我在这里想念什么？

任何人都想要完整的课程代码：

```
class trademark_form(ModelForm):
    my_date_field = DateField(input_formats=['%d-%m-%Y'])
    class Meta:
        model = myModel

        widgets = {
                   'my_date_field': forms.DateInput(format=('%d-%m-%Y'), attrs={'class':'myDateClass', 'placeholder':'Select a date'}),
                   'field1': forms.TextInput(attrs={'class':'textInputClass', 'placeholder':'Enter a Value..'}),
                   'field2': forms.TextInput(attrs={'class':'textInputClass', 'placeholder':'Enter a Value..', 'readonly':'readonly', 'value':10}),
                   'desc': forms.Textarea(attrs={'class':'textAreaInputClass', 'placeholder':'Enter desc', 'rows':5}),

               }
        exclude = ('my_valid_field') 
```

为字段生成的 HTML `my_date_field`，：

```
<input type="text" id="id_my_date_field" name="my_date_field"> 
```

为字段生成的 HTML `field1`，：

```
<input type="text" name="field1" class="textInputClass" placeholder="Enter a Value.." id="id_field1"> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T14:46:23.810

自从你~~没有发布您的表单代码，我最好的猜测是您明确实例化了这样的表单字段~~通过发布大致如下所示的代码证实了我的猜测：

```
class MyForm(forms.ModelForm):
    my_date_field = forms.DateField()

    class Meta:
        model = MyModel
        widgets = {
            'my_date_field': forms.DateInput(format=('%d-%m-%Y'), 
                                             attrs={'class':'myDateClass', 
                                            'placeholder':'Select a date'})
        } 
```

我可以说它不起作用，因为如果你像这样显式地实例化一个表单域，Django 假设你想要完全定义表单域的行为；因此，您不能使用`widgets`内部`Meta`类的属性。

[关于覆盖默认字段类型或小部件](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-fields)的部分末尾的注释指出：

> 以声明方式定义的字段保持原样，因此对 Meta 属性（如小部件、标签、help_texts 或 error_messages）所做的任何自定义都将被忽略；这些仅适用于自动生成的字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-17T20:32:10.557

根据@Martin 的回复并阅读 Django 文档，最终的解决方案应该是：

```
class MyForm(forms.ModelForm):
    my_date_field = forms.DateField(
        widget=forms.DateInput(format=('%d-%m-%Y'), 
                               attrs={'class':'myDateClass', 
                               'placeholder':'Select a date'}))

    class Meta:
        model = MyModel
        widgets = {
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-24T11:28:09.590

```
forms.DateField(widget=forms.DateInput(format=('%d-%m-%Y'),attrs={'class': 'datepicker', 'placeholder': 'Select a date', 'type': 'date'})) 
```

*当输入类型没有改变时，这对我有用。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-02T11:57:32.910

您可以简单地创建一个 HTML Datepicker，而无需使用花哨的 JAvascript 库。这是一个简单的演示：

首先创建一个继承自 Dateinput 的 dateinput 字段：

```
 class DateInput(forms.DateInput):
     input_type = 'date' 
```

并像这样使用这个 DateInput 字段：

```
 class BookingRoomForm(ModelForm):
     class Meta:
         widgets = {'checkin':DateInput()}
         model = BookingRoom
         fields = ['checkin',] 
```

如果您不使用 ModelForm，请使用类似这样的小部件：

```
class BookingRoomForm(ModelForm):
    checkin = forms.DateField(widget=DateInput())
    class Meta:
        model = BookingRoom
        fields = ['checkin',] 
```

输出将是这样的： [在此处输入图像描述](https://i.stack.imgur.com/4zvK6.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-15T00:55:35.293

我做了不同的，

进入我将其应用于我的 ModelForm 的表格

```
class Form(forms.ModelForm):
    class Meta:
        model = MODEL
        fields = ['day']
        widget = {
            'day': DateInput(attrs={'placeholder': 'Nome do tratamento',
                                         'id': 'id_day'})
        } 
```

在我的主要 tamplete 我申请了：

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
</head>
<body>
Form here

<script>
$(function() {
    $( "#id_day" ).datepicker();
});
</script>

</body> 
```

# entity-framework - 如何在 SaveChanges 覆盖中向 objectStateEntryList 添加新记录

> ID：15638330
> 
> 赞同：1
> 
> 时间：2013-03-26T13:31:44.873
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.1, entity-framework-5

我有几个实体包含 EffectiveAsOf 和 ExpiredAsOf 的日期时间字段。当一个实体被修改时，我想覆盖 SaveChanges 方法，而不是仅仅更新现有实体，让代码将原始记录保存回数据库，并将 ExpiredAsOf 日期时间设置为当前时间，并插入一条新记录与新数据并且 EffectiveAsOf 设置为当前时间，ExpiredAsOf 设置为 null。

我知道 objectStateEntryList 中的 ObjectStateEntry 项包含 CurrentValues 和 Original values 对象，以及一个 Entity 对象。EF 使用什么将数据写入数据库 CurrentValues 数据或实体？如何创建新条目？或者，我是不是完全走错了路？

我知道我可以在 EF 之外的实体中处理此问题，但宁愿让 EF 自动检测和处理这些实体。

提前感谢您的帮助和洞察力，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:43:07.797

默认情况下，EF 将同时使用两者 - 它使用原始值来检查并发问题（即，自从您从数据库加载数据后记录是否已更改）然后使用实体的当前/修改值来更新数据库记录。

EF 不可能“自动检测和处理这些实体”。您将需要创建实体对象的新实例，从现有实体对象复制值，在两个对象上设置适当的生效日期和过期日期，将新实体对象添加到 DbContext，然后保存更改。最好的方法是重写 DbContext 的 SaveChanges() 方法。为了使其尽可能干净和易于管理，我建议使用存储库模式。

# python - 在python中计算boids的邻居

> ID：15638337
> 
> 赞同：0
> 
> 时间：2013-03-26T13:32:08.487
> 
> 标签：python, neighbours, boids

我正在制作一个程序来通过 boids 在 python 中模拟一群鸟。其中一项任务是计算相邻的 boid（距离 <= 50）。我试着这样做（见代码），但我没有得到好的结果。“打印距离”给出了 20 倍相同的距离，所以我假设我正在计算相同的两个 boids 20 倍。我需要所有的组合。我对编程很陌生，所以欢迎任何帮助！

```
WIDTH = 1000            # WIDTH OF SCREEN IN PIXELS
HEIGHT = 500            # HEIGHT OF SCREEN IN PIXELS
BOIDS = 20              # NUMBER OF BOIDS IN SIMULATION
SPEED_LIMIT = 500       # FOR BOID VELOCITY
BOID_EYESIGHT = 50      # HOW FAR A BOID CAN LOOK
WALL = 50               # FROM SIDE IN PIXELS
WALL_FORCE = 100        # ACCELERATION PER MOVE

################################################################################

import random
from math import sqrt

X = 0
Y = 1
VX = 2
VY = 3

boids = []

for i in range(BOIDS):
    b_pos_x = random.uniform(0,WIDTH)
    b_pos_y = random.uniform(0,HEIGHT)
    b_vel_x = random.uniform(-100,100)
    b_vel_y = random.uniform(-100,100)
    b = [b_pos_x, b_pos_y, b_vel_x, b_vel_y]

    boids.append(b)

# definition of functions:

def calculate_distance(a,b):                       # calculates distance between two boids
    distance = sqrt((a[X] - b[X])**2 + (a[Y] - b[Y])**2)
    return distance

def value_velocity(v):                             # calculates velocity of boids
    velocity = sqrt(v[VX]**2+v[VY]**2)
    return velocity

##############

for element_1 in range(len(boids)):             
    for element_2 in range(len(boids)):
        if element_1 != element_2:                    # for two different boids:
            distance = calculate_distance(boids[element_1],boids[element_2]) 
                 # calculate distance between boids

    velocity = value_velocity(boids[element_1])             # calculate velocity of boids

neighbors = 0                      # start neighbor counter

for element_1 in range(len(boids)):
    for element_2 in range(len(boids)):
        if element_1 != element_2:          # for diferent boids
            if distance <= 50:              # with a distance of <=50
                neighbors += 1              # add +1 to neighbor counter
    print distance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:40:29.567

您应该将距离放入数组或合并两个循环。因为目前您总是使用第一对 for 循环中计算的距离的最后一个值。

因此，您可以通过以下方式修改代码：

```
distance=[[calculate_distance(boids[i],boids[j]) for j in range(len(boids))] for i in range(len(boids))]

for element_1 in range(len(boids)):
    for element_2 in range(len(boids)):
        if element_1 != element_2:          # for diferent boids
            if distance[element_1][element_2] <= 50:              # with a distance of <=50
                neighbors += 1
                print distance[element_1][element_2] 
```

您也可以在第一个循环中进行所有邻居计算：

```
neighbors =0
for element_1 in range(len(boids)):             
    for element_2 in range(len(boids)):
        if element_1 != element_2:                    # for two different boids:
            distance = calculate_distance(boids[element_1],boids[element_2]) 
            if distance <=50:
               neighbors += 1 
```

# objective-c - 每 2 分钟获取一次数据

> ID：15638338
> 
> 赞同：0
> 
> 时间：2013-03-26T13:32:09.190
> 
> 标签：objective-c

我需要每 2 分钟调用一次 Rest Api 来更新视图中的数据。什么是最好的解决方案。

我所做的是用于异步`NSTimer`调用 Web 服务函数`iOS`并更新视图中的数据。有没有更好的解决方案我可以遵循。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:37:21.630

你可以用 GCD 尝试这样的事情：

```
- (void)updateData{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Fetch data on a background thread:
        NSURL *url = ...;
        NSString *contents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
        if (contents) {
            NSMutableArray *array= [NSMutableArray new];

           //..do your stuff here

            dispatch_sync(dispatch_get_main_queue(), ^{
                // Update data array and reload your view.
                //if it is table reload it, if it is view refresh it
            });
        }
    });
} 
```

并使用`dispatch_source_set_timer`，检查这个[GCD：How to change timer fire interval](https://stackoverflow.com/questions/11070026/gcd-how-to-change-timer-fire-interval)

# sql - 基于查询的SQL删除

> ID：15638344
> 
> 赞同：-2
> 
> 时间：2013-03-26T13:32:31.010
> 
> 标签：sql, sql-delete

如何删除由不生产 PC 的制造商生产的所有笔记本电脑？

我目前有以下表格：

```
CREATE TABLE `Device` (
`model` varchar(50) NOT NULL DEFAULT '',
`speed` double DEFAULT NULL,
`RAM` int(11) DEFAULT NULL,
`HD` int(11) DEFAULT NULL,
`list_price` double DEFAULT NULL,
`type` varchar(45) NOT NULL,
`screen` varchar(45) DEFAULT NULL,
PRIMARY KEY (`model`,`type`)
);

INSERT INTO `Device` VALUES 
('GATE TOP',2.5,2000,500,1000,'LAPTOP','12'),
('GATE TOWER',2.5,2000,500,1000,'DESKTOP',NULL),
('HELLO TOWER',3.5,8000,1000,1299,'DESKTOP',NULL),
('MACBOOK AIR',2.5,2048,500,599,'LAPTOP','11'),
('MACBOOK PRO',3.5,8000,1000,1299,'LAPTOP','19'),
('PAAP',2.5,2048,500,599,'DESKTOP',NULL),
('TOWER',3,3100,400,2499,'DESKTOP',NULL),
('ULTRA TOWER',6,5000,1000,8999,'DESKTOP',NULL),
('VAIO',2.5,2000,500,569,'LAPTOP','12'),
('VAIO TOWER',2.5,2000,500,569,'DESKTOP',NULL);

CREATE TABLE `Product` (
`manu_Name` varchar(50) NOT NULL DEFAULT '',
`model` varchar(50) NOT NULL DEFAULT '',
 PRIMARY KEY (`manu_Name`,`model`),
 KEY `Product` (`model`),
 CONSTRAINT `Product_ibfk_1` FOREIGN KEY (`manu_Name`) 
 REFERENCES `Manufacturer` (`name`),
 CONSTRAINT `Product_ibfk_2` FOREIGN KEY (`model`) 
 REFERENCES `Device` (`model`)
);

INSERT INTO `Product` VALUES 
('GATEWAY','GATE TOP'),('GATEWAY','GATE TOWER'),
('ACER','HELLO TOWER'),('APPLE','MACBOOK AIR'),
('APPLE','MACBOOK PRO'),('ACER','PAAP'),
('DELL','TOWER'),('SONY','VAIO'),
('SONY','VAIO TOWER');

CREATE TABLE `Manufacturer` (
`name` varchar(50) NOT NULL,
`country` varchar(50) DEFAULT NULL,
`phone` varchar(10) DEFAULT NULL,
PRIMARY KEY (`name`)
);

INSERT INTO `Manufacturer` VALUES 
('ACER','TAIWAN','9024801111'),
('APPLE','UNITED STATES','9028189125'),
('DELL','UNITED STATES','9025551234'),
('GATEWAY','UNITED STATES','8705551698'),
('SONY','JAPAN','0123456789'),
('TOSHIBA','JAPAN','1235553560'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:16:12.653

删除语句将是这样的：

```
delete from `Device` where `model` in (
    select `model` from `Product` where `manu_Name` in ('APPLE')
); 
```

# sql-server-2005 - 某些字段为空的行数加上不为空的行数与总数不同

> ID：15638351
> 
> 赞同：1
> 
> 时间：2013-03-26T13:32:45.783
> 
> 标签：sql-server-2005

我有一个表，其中有一个可以为空的 blob 字段类型（SQL SERVER 2005）用于存储图像。所以我有以下情况：

`select count (*) from table where image_field is null`返回 180000 行图像。

`select count (*) from table where image_field is not null`返回 3600000 行没有图像。

如果我使用`select count (*) from table`我没有 3780000 行（3600000 + 180000），但会少一点。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:37:24.790

有人添加或删除了几行？

尝试

```
 Select Count(*) total,
     Sum(case when When image_field is null Then 1 Else 0 End) nullCount,
     Sum(case when When image_field is not null Then 1 Else 0 End) notNulCount
  From table 
```

并将这些数字与来自单个查询的数字进行比较

# c# - 应用程序从任务计划程序停止工作

> ID：15638352
> 
> 赞同：-2
> 
> 时间：2013-03-26T13:32:48.970
> 
> 标签：c#, asp.net, command-line

我创建了一个窗口控制台应用程序。它将从窗口任务调度程序中获取一个命令行参数（真/假）。

我并不完全了解这个过程。

我正在使用此代码来读取参数：

```
bool dateOffset = false;
if (args.Length > 0)
{
    bool.TryParse(args[1], out dateOffset);
} 
```

但是当我从任务调度程序运行程序时......它显示错误，如......应用程序名称已停止工作异常......

我不确定问题出在我的代码还是任务调度程序中。当我在没有参数的情况下调试它时，我的代码工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:35:36.830

问题出在以下几点：

```
bool.TryParse(args[1], out dateOffset); 
```

C# 中的数组（通常）是从 0 开始的，这意味着数组中的第一项是项 0，而不是项 1。

尝试将您的代码更改为：

```
bool.TryParse(args[0], out dateOffset); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:35:12.037

如果你有 1 个论点，`args[1]`应该是：`args[0]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:35:45.863

这里：`if (args.Length > 0)`您正在检查 args 数组是否至少有一个元素。

但是，`bool.TryParse(args[1], out dateOffset);`正在尝试访问数组中的第二个元素。

猜猜当您的 if 条件以 1 的长度通过但您尝试访问第二个元素时会发生什么。

尝试使用`args[0]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:46:23.950

您可能应该采用第一个参数，即 args[0]。

# c++ - 如何提高此代码使用模拟退火概念对数字进行排序的效率？

> ID：15638354
> 
> 赞同：0
> 
> 时间：2013-03-26T13:32:50.830
> 
> 标签：c++, algorithm, sorting, simulated-annealing

我试图理解模拟退火的概念，因此我试图实现它来对数字进行排序。我不确定这在概念上是否是模拟退火的正确实现。谁能指导我在这种情况下如何正确实施它？在这种情况下如何改进评分功能？另外，我在这里无法实现温度的概念。请多多包涵，因为我是编程初学者。

```
#include<iostream>
#include<vector>
#include<map>
#include<cstdlib>
#include<cmath>
using namespace std;
void print(vector<int> x)
{
  for(int i=0;i<x.size();i++)
  {
     cout<<x[i]<<"->";
  }
  cout<<endl;
}
int score(vector<int> x)
{
   int s=0;
   for(int i=0;i<x.size()-1;i++)
   {
      for(int j=i+1;j<x.size();j++)
      {
        if(x[j]<x[i])
        s++;
      }
   }
   return s; 
}
map<vector<int> ,int>h;
int main()
{ 
  vector<int> x;
  srand(time(0));
  int N=20;// vector size 
  for(int i=0;i<N;i++)
  {
    x.push_back(rand()%10000);
  }
  int it=0;
  while(it<5000)
  {
      if(score(x)==0)  // score =0 stop;  
      {
         print(x);
         cout<<"done in iterations"<<it<<endl;
         break;
      }
      int a=rand()%N;
      int b=rand()%N;
      swap(x[a],x[b]);
      vector<int>y=x;
      swap(x[a],x[b]);
      if(h.find(y)!=h.end())   continue;
      if(score(x)>score(y))
      {
           x=y;
      }
      //print(x);
      it++;
  }
  return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:49:27.310

这与模拟退火无关，它只是爬山随机排序。模拟退火的关键特性是它偶尔会在搜索中接受更差的答案，而您的代码永远不会这样做。

# python - 更改 IPython QtConsole 的配置文件没有效果

> ID：15638357
> 
> 赞同：4
> 
> 时间：2013-03-26T13:32:54.163
> 
> 标签：python, ipython

在我的 Windows 7 系统上，对 Qt 控制台的 IPython 配置文件进行更改似乎没有任何效果。我只是使用（并更改了）默认配置文件（未在命令行中明确说明，但尝试过也没有效果）。配置文件似乎存在于正确的位置：

`C:\Users\<user name>\.ipython\profile_default\ipython_qtconsole_config.py`

所以[这篇](https://stackoverflow.com/questions/9906938/change-ipython-qtconsole-settings)文章中的建议对我来说并不奏效。

我在 Python 3.2.3 上使用 IPython 0.13.1。对于 Qt 绑定，我使用 PySide 1.1.2。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:45:23.020

检查配置文件目录是否正确`ipython profile locate`？并尝试从`--debug`标志开始以获取更多信息...

# matlab - 将 matlab 命令转换为 c#

> ID：15638359
> 
> 赞同：0
> 
> 时间：2013-03-26T13:33:00.427
> 
> 标签：matlab

我是 matlab 新手，我无法理解这行代码

```
A((i-1)*nneg+1:i*nneg,:) = 
ones(nneg,1)*temp(i,2:n+1)+
temp(npos+1:npos+nneg,2:n+1); 
```

这是否意味着 -> A 中 x 在 : `(i-1)*nneg+1`和上限之间变化的每个元素`i*nneg`，对于所有 y，都将分配 1* .....

`an element from temp or all elements in the range of the y`（温度（i，2：n + 1））？

并通过相同的推理 temp(npos+1:npos+nneg,2:n+1) 的范围之一或全部加起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:45:44.070

该命令更新 A 的一些水平子矩阵

```
A(a:b, :) = some range of rows, and ALL columns = some horizontal sub-matrix of A
A(:, c:d) = some range of columns, and ALL rows = = some vertical sub-matrix of A 
```

更新：

在没有看到更多代码的情况下，我无法确定，但语法表明 temp(npos+1:npos+nneg,2:n+1) 是一个矩阵，而 one(nneg,1)*temp(i,2: n+1) 当然也是一个大小相同的矩阵，它只包含 1。

(i-1)*nneg+1 和 i*nneg 都是整数，其中 (i-1)*nneg+1 <= i*nneg。这两个整数定义了 A 的子矩阵，其值将被更新。

one(nneg,1) 创建一个长度为 nneg 的垂直数组 [1,1,1,1...]。然后将其与水平数组 temp(i,2:n+1) 相乘，从而创建一个矩阵 X。X 被添加到另一个矩阵 temp(npos+1:npos+nneg,2:n+1)，然后A 的 -matrix （上面解释过）用这个结果更新。

# javascript - JQuery 在画布上的点击事件 - 在 iPad 上看起来很难看

> ID：15638362
> 
> 赞同：0
> 
> 时间：2013-03-26T13:33:22.537
> 
> 标签：javascript, jquery, html, ipad, canvas

我想使用 HTML5 画布为 iPad 创建 HTML/Javascript 绘图应用程序。Canvas 有 jQuery 点击监听器。

单击画布时，它会变成灰色片刻。据我了解，在 Ipad 中，这是网页中可点击元素的标准行为。

是否有可能避免这种灰色闪烁，因为它非常令人不安。或者有没有其他方法可以在画布上捕捉点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:35:29.377

将画布元素设置[`-webkit-tap-highlight-color`](http://css-infos.net/property/-webkit-tap-highlight-color)为完全透明。例如：

```
canvas {
    -webkit-tap-highlight-color: rgba(0,0,0,0);
} 
```

# backbone.js - 使用主干从 DOM 中删除项目时发生内存泄漏

> ID：15638368
> 
> 赞同：3
> 
> 时间：2013-03-26T13:33:44.827
> 
> 标签：backbone.js, backbone-layout-manager

我遇到了 DOM 元素在被删除后留在内存中的问题。我已经设置了一个如下所示的示例。注意我正在使用主干布局管理器插件来管理我的视图（以及 jQuery）。

在删除列表中的一项之前和之后，我在 Chrome 中做了一个堆快照，并比较了两者：

![Chrome 堆快照对比](../Images/d82c0b21d4e119fcf78b5737f56020c0.png)

如您所见，LI 元素仍在内存中。

删除视图时，主干布局管理器会调用 view.unbind() 和 view.stopListening()。

下面是示例代码。

ListOfViewsToDelete.js

```
var TestModel = Backbone.Model.extend({
  });

  var TestCollection = Backbone.Collection.extend({
    model: TestModel,
  });

  var ViewToDelete = Backbone.View.extend({
    template: "ViewToDelete",
    tagName: "li",
    events: {
      "click .delete-button": "deleteItem"
    },
    deleteItem: function() {
      this.$el.trigger('remove-item', [this.model.id]);
    }
  });

  var ListOfViewsToDelete = Backbone.View.extend({
    template: "ListOfViewsToDelete",
    initialize: function() {
      this.collection = new TestCollection();

      for (var i = 0; i < 5; i++) {
        this.collection.add(new TestModel({id: i}));
      }

      this.listenTo(this.collection, 'all', this.render);
    },
    events: {
      "remove-item": "removeItemFromCollection"
    },
    beforeRender: function() {

      this.collection.each(function(testModel) {
        this.insertView("ul", new ViewToDelete({
          model: testModel
        }));
      }, this);

    },
    removeItemFromCollection: function(event, model) {
      this.collection.remove(model);
    }
  }); 
```

路由器.js

```
app.useLayout("MainLayout").setViews({
                    "#main": new ListOfViewsToDelete()
                }).render(); 
```

ListOfViewsToDelete.html

```
<ul>
</ul> 
```

ViewToDelete.html

```
View to delete
<button class="delete-button">x</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:52:58.537

您的代码有几个问题：

*   您`this.$el`用作模型来触发`remove-item`事件。您应该改用您的模型。

*   视图应该等待来自模型的事件以知道何时移除自己。

这是我想出的代码。如果它不起作用，请将您的代码发布到某个地方，以便我自己运行它。

```
var ViewToDelete = Backbone.View.extend({
    模板：“ViewToDelete”，

    标记名称：“李”，

    事件：{
      “点击 .delete-button”：“deleteItem”
    },

    初始化：函数（）{
      this.listenTo(this.model, 'remove', this.remove);
    },

    删除项目：函数（）{
      this.model.remove();
    }
});

```

的[默认实现](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1018)将`view.remove()`删除`this.$el`并停止监听模型：

```
删除：函数（）{
  this.$el.remove();
  this.stopListening();
  返回这个；
},

```

**编辑**：感谢您在线发布您的代码。这就是我认为正在发生的事情（我也在为未来的观众记录）。

如果您拍摄快照，在 Detached DOM Tree 上进行过滤，您会看到：

![Web 检查器快照](../Images/6a98387648f802b313a341d8c3d04b2a.png)

重要的部分是保留树：防止 LI 被删除的引用。唯一重要的是`sizzle-1364380997635`。它不是来自你的代码，它实际上来自 jQuery，更具体地说来自它的 Sizzle 引擎。关键来自这里：

[https://github.com/jquery/sizzle/blob/master/sizzle.js#L33](https://github.com/jquery/sizzle/blob/master/sizzle.js#L33)

如果您进一步查看代码，您会看到有一个缓存：

[https://github.com/jquery/sizzle/blob/master/sizzle.js#L1802](https://github.com/jquery/sizzle/blob/master/sizzle.js#L1802)

所以，简而言之，你的代码不会泄漏，但是 jQuery 有一个内部缓存，可以防止它被删除。这个缓存只能包含几十个元素，所以它不会永远保留元素。

# pycharm - 在 PyCharm 中更改骨架模板

> ID：15638371
> 
> 赞同：3
> 
> 时间：2013-03-26T13:33:51.407
> 
> 标签：pycharm

有没有办法可以更改 PyCharm 中的主要骨架模板？

每当我开始一个新的（例如）Flask 项目时，我都必须改变骨架以满足我的需要。如果我可以说 PyCharm 来启动一个带有静态文件夹和模板文件夹、特定 base.html、数据库模板等的新项目，那就太好了……

这有可能吗？

添加新骨架或更改现有骨架将是我所需要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:56:18.630

我只是看了一下插件目录，我认为现在可能是可行的，虽然不是为了胆小的人。

查看 PyCharm/plugins/pycharm-flask/ ，看起来有一个 jar 里面有模板文件：

```
bloop:s r$ jar xvf resources_en.jar
  created: META-INF/
extracted: META-INF/MANIFEST.MF
  created: fileTemplates/
  created: fileTemplates/internal/
extracted: fileTemplates/internal/Flask Main.py.ft

bloop:s r$ cat fileTemplates/internal/Flask\ Main.py.ft
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

我替换了 Flask\ Main.py.ft 文件，它对我有用。我是这样做的：

我完全关闭了 PyCharm，没有打开的窗口，没有正在运行的进程，然后在 shell 中：

```
$ cd /Applications/PyCharm.app/plugins/pycharm-flask/lib
$ cp resources_en.jar backup
$ mkdir -p fileTemplates/internal
$ cat >fileTemplates/internal/Flask\ Main.py.ft
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello Custom World!'

if __name__ == '__main__':
    app.run()
^D
$ jar -uf resources_en.jar fileTemplates/internal/Flask\ Main.py.ft 
```

然后启动 PyCharm 并启动一个新项目，指定 Flask 为类型：

当它打开时：

![在此处输入图像描述](../Images/4beba967072587b48e8a123a29570e38.png)

就其价值而言，这种方法是一种非常骇人听闻的手段。如果您只想更改默认主菜单，如果您不挑剔，这将在紧要关头起作用。

如果您想以*专业*的方式进行操作，您可以从[Intellij Plugin GIT](https://github.com/JetBrains/intellij-plugins/tree/master/pycharm-flask)获取 Flask 插件的源代码。如果您按照[Jetbrain 网页上的说明进行操作，](http://confluence.jetbrains.com/display/IDEADEV/PluginDevelopment)他们会解释如何下载 Intellij 的社区版本以及如何构建和打包插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:37:02.130

这种定制只能通过编写插件来实现。唯一可以在不编写插件的情况下更改的是 PyCharm 生成的 main.py：它可以在 Settings | 下更改。文件模板 | 烧瓶主。

# php - 在随机选择中包含“必填问题”

> ID：15638373
> 
> 赞同：7
> 
> 时间：2013-03-26T13:34:02.213
> 
> 标签：php, wordpress

我正在使用以下内容选择一组没有任何重复的随机问题：

```
<?php
$amount = get_field('select_number_of_questions');
$repeater = get_field("step_by_step_test");
shuffle($repeater);
$repeater_limit = array_slice($repeater,0,$amount);
foreach($repeater_limit as $repeater_row) {
    echo "<p>".$repeater_row['question']."</p>";
    $rows = $repeater_row['answer_options'];
    foreach($rows as $row) {
        echo $row['answer']."<br />";
    }
}
?> 
```

每个问题都有一个字段：`get_field('required_question');`有一个是/否下拉菜单。选择“是”的问题总是必须合并到上面的循环中。

例如，该测试有 20 个问题可供选择，随机选择 10 个。在 20 个问题中，有 2 个必填问题（即这些问题将始终被选中）。所以它需要抓住 2 个必填问题并选择 8 个其他随机问题。

**如何在随机选择中包含必填问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:21:17.027

问题没有说明，但都表明这是使用[Repeater Add-on](http://www.advancedcustomfields.com/add-ons/repeater-field/)设置的[高级自定义字段](http://www.advancedcustomfields.com)。

在这种情况下，这是我所做的测试配置：

[![acf 配置](../Images/86cd2506fcd013050a874e91deb2a340.png)](https://i.stack.imgur.com/43Xb5.png)

请注意，我在这里使用`$repeater_row['title']`而不是 OP 的`$repeater_row['question']`. 另外，我删除了该`answer_options`部分。详情见评论：

```
// Get fields
$amount = get_field( 'select_number_of_questions' );
$repeater = get_field( 'step_by_step_test' );

// Auxiliary arrays to separate fields by Field Name
$not_enabled = array();
$enabled = array();

// Separate
foreach( $repeater as $field )
{
    if( 'no' == $field['enabled'] )
        $not_enabled[] = $field;
    else
        $enabled[] = $field;
}

// Discount the enabled from the the total amount
$amount = (int)$amount - count( $enabled );

// Shuffle before slicing
shuffle( $not_enabled );
$repeater_limit = array_slice( $not_enabled, 0, $amount );

// Add enabled fields and shuffle again
$final_array = array_merge( $repeater_limit, $enabled ); 
shuffle( $final_array );

foreach( $final_array as $repeater_row ) {
    echo "<p>" . $repeater_row['title'] . "</p>";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:11:11.287

首先，您需要过滤掉所需的问题，如下所示：

```
$all_questions = get_field("step_by_step_test");
$required = $optional = array();
foreach($all_questions as $question) {
    if( $a['required_question']) $required[] = $question;
    else $optional[] = $question;
}
$amount = get_field("select_number_of_questions")-count($required);
shuffle($optional);
$final = array_merge($required,array_slice($optional,0,$amount));
foreach($final as $repeater_row) {
    ...
} 
```

希望我再次帮助你：p

# sql - Ruby on Rails：从 SQLite 到 MySQL

> ID：15638374
> 
> 赞同：0
> 
> 时间：2013-03-26T13:34:02.917
> 
> 标签：sql, ruby-on-rails, ruby, sqlite, heroku

我是 Rails 的初学者。我想在 heroku.com 上部署我的项目。我使用 Sqlite，但 heroku 不支持它。所以，我尝试将我的项目转移到 MySQL。我做了这个说明：[Convert a Ruby on Rails app from sqlite to MySQL?](https://stackoverflow.com/questions/1670154/convert-a-ruby-on-rails-app-from-sqlite-to-mysql)

但是，heroku 是这样说的：我们很抱歉，但出了点问题。你能帮助我吗？

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'pg'
gem 'rails', '3.2.12'
gem 'gravatar_image_tag', '1.0.0.pre2'
gem "will_paginate", :git => "https://github.com/p7r/will_paginate.git", :branch => "rails3"
gem 'yaml_db', :git => 'git://github.com/ludicast/yaml_db.git'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'faker', '0.3.1'
  gem 'sqlite3-ruby', :require => 'sqlite3'
end

group :production do
    gem "mysql2", "~> 0.3.11"
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test do
  gem 'rspec-rails', '2.6.1'
  gem 'webrat', '0.7.1'
end 
```

这是我的 database.yml 文件：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: myapp_development
  pool: 5
  username: root
  password: "0761"
test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: myapp_test
  pool: 5
  username: root
  password: "0761"

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: myapp_production
  pool: 5
  username: root
  password: "0761" 
```

这是我的日志：

```
2013-03-26T13:11:32+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-26T13:11:32+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-26T13:11:37+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-03-26T13:11:37+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-03-26T13:11:38+00:00 app[web.1]: => Call with -d to detach
2013-03-26T13:11:38+00:00 app[web.1]: => Booting WEBrick
2013-03-26T13:11:38+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-03-26T13:11:38+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-03-26T13:11:38+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:33768
2013-03-26T13:11:39+00:00 app[web.1]: [2013-03-26 13:11:39] INFO  WEBrick::HTTPServer#start: pid=2 port=33768
2013-03-26T13:11:39+00:00 app[web.1]: [2013-03-26 13:11:39] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-03-26T13:11:39+00:00 app[web.1]: [2013-03-26 13:11:39] INFO  WEBrick 1.3.1
2013-03-26T13:11:39+00:00 heroku[web.1]: Process exited with status 137
2013-03-26T13:11:40+00:00 heroku[web.1]: State changed from starting to up
2013-03-26T13:11:59+00:00 app[web.1]: Started GET "/" for 46.72.99.61 at 2013-03-26 13:11:59 +0000
2013-03-26T13:11:59+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-26T13:11:59+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (8.8ms)
2013-03-26T13:11:59+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (0.3ms)
2013-03-26T13:11:59+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=0ms connect=3ms service=304ms status=500 bytes=643
2013-03-26T13:11:59+00:00 app[web.1]: Completed 500 Internal Server Error in 136ms
2013-03-26T13:11:59+00:00 app[web.1]: 
2013-03-26T13:11:59+00:00 app[web.1]:   Rendered layouts/_menu.html.erb (51.2ms)
2013-03-26T13:11:59+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "users" does not exist
2013-03-26T13:11:59+00:00 app[web.1]: LINE 5:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:11:59+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
2013-03-26T13:11:59+00:00 app[web.1]:                                         ^
2013-03-26T13:11:59+00:00 app[web.1]:     6:                <ul class="nav">
2013-03-26T13:11:59+00:00 app[web.1]:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:11:59+00:00 app[web.1]:              ORDER BY a.attnum
2013-03-26T13:11:59+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2013-03-26T13:11:59+00:00 app[web.1]:     8:                    <% if signed_in? %>
2013-03-26T13:11:59+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2013-03-26T13:11:59+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
2013-03-26T13:11:59+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2013-03-26T13:11:59+00:00 app[web.1]:     11:                   <li><%= link_to "Заказ", "#" %></li>
2013-03-26T13:11:59+00:00 app[web.1]:   app/models/user.rb:32:in `authenticate_with_salt'
2013-03-26T13:11:59+00:00 app[web.1]: ):
2013-03-26T13:11:59+00:00 app[web.1]:   app/helpers/sessions_helper.rb:13:in `current_user'
2013-03-26T13:11:59+00:00 app[web.1]:   app/helpers/sessions_helper.rb:17:in `signed_in?'
2013-03-26T13:11:59+00:00 app[web.1]:     9:                <!--<li><%= link_to "Users", users_path %></li>-->
2013-03-26T13:11:59+00:00 app[web.1]:   app/helpers/sessions_helper.rb:42:in `user_from_remember_token'
2013-03-26T13:11:59+00:00 app[web.1]:     7:                    <li class="active"><%= link_to "Главная", home_path %></li>
2013-03-26T13:11:59+00:00 app[web.1]:     5:            <div class="nav-collapse collapse">
2013-03-26T13:11:59+00:00 app[web.1]: 
2013-03-26T13:11:59+00:00 app[web.1]:   app/views/layouts/application.html.erb:15:in `_app_views_layouts_application_html_erb__1283683624385357693_38228720'
2013-03-26T13:11:59+00:00 app[web.1]: 
2013-03-26T13:11:59+00:00 app[web.1]:     10:                   <li><%= link_to "Меню", menu_path %></li>
2013-03-26T13:11:59+00:00 app[web.1]:   app/views/layouts/_menu.html.erb:8:in `_app_views_layouts__menu_html_erb__3258341653661936969_33454780'
2013-03-26T13:12:00+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=16ms connect=35ms service=33ms status=200 bytes=0
2013-03-26T13:25:17+00:00 heroku[slugc]: Slug compilation started
2013-03-26T13:25:50+00:00 heroku[api]: Release v14 created by nikskalkin@gmail.com
2013-03-26T13:25:50+00:00 heroku[api]: Deploy 7a646d5 by nikskalkin@gmail.com
2013-03-26T13:25:50+00:00 heroku[web.1]: State changed from up to starting
2013-03-26T13:25:51+00:00 heroku[slugc]: Slug compilation finished
2013-03-26T13:25:51+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 59776`
2013-03-26T13:25:55+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-26T13:25:55+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-26T13:25:57+00:00 app[web.1]: => Booting WEBrick
2013-03-26T13:25:57+00:00 app[web.1]: => Call with -d to detach
2013-03-26T13:25:57+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-03-26T13:25:57+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-03-26T13:25:57+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:59776
2013-03-26T13:25:57+00:00 app[web.1]: [2013-03-26 13:25:57] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-03-26T13:25:57+00:00 app[web.1]: [2013-03-26 13:25:57] INFO  WEBrick::HTTPServer#start: pid=2 port=59776
2013-03-26T13:25:57+00:00 app[web.1]: [2013-03-26 13:25:57] INFO  WEBrick 1.3.1
2013-03-26T13:25:58+00:00 heroku[web.1]: State changed from starting to up
2013-03-26T13:25:59+00:00 app[web.1]: Started GET "/" for 46.72.99.61 at 2013-03-26 13:25:59 +0000
2013-03-26T13:26:00+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-26T13:26:00+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (29.7ms)
2013-03-26T13:26:00+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (0.3ms)
2013-03-26T13:26:00+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "users" does not exist
2013-03-26T13:26:00+00:00 app[web.1]: LINE 5:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:26:00+00:00 app[web.1]:                                         ^
2013-03-26T13:26:00+00:00 app[web.1]:   Rendered layouts/_menu.html.erb (26.4ms)
2013-03-26T13:26:00+00:00 app[web.1]:   app/helpers/sessions_helper.rb:42:in `user_from_remember_token'
2013-03-26T13:26:00+00:00 app[web.1]:   app/models/user.rb:32:in `authenticate_with_salt'
2013-03-26T13:26:00+00:00 app[web.1]:   app/views/layouts/application.html.erb:15:in `_app_views_layouts_application_html_erb__3050356598751074094_29958360'
2013-03-26T13:26:00+00:00 app[web.1]: Completed 500 Internal Server Error in 99ms
2013-03-26T13:26:00+00:00 app[web.1]:     9:                <!--<li><%= link_to "Users", users_path %></li>-->
2013-03-26T13:26:00+00:00 app[web.1]:   app/views/layouts/_menu.html.erb:8:in `_app_views_layouts__menu_html_erb___3316497000915670487_28099760'
2013-03-26T13:26:00+00:00 app[web.1]:     6:                <ul class="nav">
2013-03-26T13:26:00+00:00 app[web.1]:     7:                    <li class="active"><%= link_to "Главная", home_path %></li>
2013-03-26T13:26:00+00:00 app[web.1]:   app/helpers/sessions_helper.rb:17:in `signed_in?'
2013-03-26T13:26:00+00:00 app[web.1]:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:26:00+00:00 app[web.1]: 
2013-03-26T13:26:00+00:00 app[web.1]:     5:            <div class="nav-collapse collapse">
2013-03-26T13:26:00+00:00 app[web.1]:     11:                   <li><%= link_to "Заказ", "#" %></li>
2013-03-26T13:26:00+00:00 app[web.1]: 
2013-03-26T13:26:00+00:00 app[web.1]: 
2013-03-26T13:26:00+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2013-03-26T13:26:00+00:00 app[web.1]:     10:                   <li><%= link_to "Меню", menu_path %></li>
2013-03-26T13:26:00+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2013-03-26T13:26:00+00:00 app[web.1]:     8:                    <% if signed_in? %>
2013-03-26T13:26:00+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
2013-03-26T13:26:00+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2013-03-26T13:26:00+00:00 app[web.1]:   app/helpers/sessions_helper.rb:13:in `current_user'
2013-03-26T13:26:00+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
2013-03-26T13:26:00+00:00 app[web.1]:              ORDER BY a.attnum
2013-03-26T13:26:00+00:00 app[web.1]: ):
2013-03-26T13:26:00+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=0ms connect=1ms service=254ms status=500 bytes=643
2013-03-26T13:26:00+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=0ms connect=3ms service=31ms status=200 bytes=0
root@Nikita-PC:/home/nikita/rails/invent# heroku open
Opening ancient-cliffs-5913... done
root@Nikita-PC:/home/nikita/rails/invent# heroku logs
2013-03-26T13:11:59+00:00 app[web.1]:     7:                    <li class="active"><%= link_to "Главная", home_path %></li>
2013-03-26T13:11:59+00:00 app[web.1]:     5:            <div class="nav-collapse collapse">
2013-03-26T13:11:59+00:00 app[web.1]: 
2013-03-26T13:11:59+00:00 app[web.1]:   app/views/layouts/application.html.erb:15:in `_app_views_layouts_application_html_erb__1283683624385357693_38228720'
2013-03-26T13:11:59+00:00 app[web.1]: 
2013-03-26T13:11:59+00:00 app[web.1]:     10:                   <li><%= link_to "Меню", menu_path %></li>
2013-03-26T13:11:59+00:00 app[web.1]:   app/views/layouts/_menu.html.erb:8:in `_app_views_layouts__menu_html_erb__3258341653661936969_33454780'
2013-03-26T13:12:00+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=16ms connect=35ms service=33ms status=200 bytes=0
2013-03-26T13:25:17+00:00 heroku[slugc]: Slug compilation started
2013-03-26T13:25:50+00:00 heroku[api]: Release v14 created by nikskalkin@gmail.com
2013-03-26T13:25:50+00:00 heroku[api]: Deploy 7a646d5 by nikskalkin@gmail.com
2013-03-26T13:25:50+00:00 heroku[web.1]: State changed from up to starting
2013-03-26T13:25:51+00:00 heroku[slugc]: Slug compilation finished
2013-03-26T13:25:51+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 59776`
2013-03-26T13:25:55+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-26T13:25:55+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-26T13:25:57+00:00 app[web.1]: => Booting WEBrick
2013-03-26T13:25:57+00:00 app[web.1]: => Call with -d to detach
2013-03-26T13:25:57+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-03-26T13:25:57+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-03-26T13:25:57+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:59776
2013-03-26T13:25:57+00:00 app[web.1]: [2013-03-26 13:25:57] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-03-26T13:25:57+00:00 app[web.1]: [2013-03-26 13:25:57] INFO  WEBrick::HTTPServer#start: pid=2 port=59776
2013-03-26T13:25:57+00:00 app[web.1]: [2013-03-26 13:25:57] INFO  WEBrick 1.3.1
2013-03-26T13:25:58+00:00 heroku[web.1]: State changed from starting to up
2013-03-26T13:25:59+00:00 app[web.1]: Started GET "/" for 46.72.99.61 at 2013-03-26 13:25:59 +0000
2013-03-26T13:26:00+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-26T13:26:00+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (29.7ms)
2013-03-26T13:26:00+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (0.3ms)
2013-03-26T13:26:00+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "users" does not exist
2013-03-26T13:26:00+00:00 app[web.1]: LINE 5:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:26:00+00:00 app[web.1]:                                         ^
2013-03-26T13:26:00+00:00 app[web.1]:   Rendered layouts/_menu.html.erb (26.4ms)
2013-03-26T13:26:00+00:00 app[web.1]:   app/helpers/sessions_helper.rb:42:in `user_from_remember_token'
2013-03-26T13:26:00+00:00 app[web.1]:   app/models/user.rb:32:in `authenticate_with_salt'
2013-03-26T13:26:00+00:00 app[web.1]:   app/views/layouts/application.html.erb:15:in `_app_views_layouts_application_html_erb__3050356598751074094_29958360'
2013-03-26T13:26:00+00:00 app[web.1]: Completed 500 Internal Server Error in 99ms
2013-03-26T13:26:00+00:00 app[web.1]:     9:                <!--<li><%= link_to "Users", users_path %></li>-->
2013-03-26T13:26:00+00:00 app[web.1]:   app/views/layouts/_menu.html.erb:8:in `_app_views_layouts__menu_html_erb___3316497000915670487_28099760'
2013-03-26T13:26:00+00:00 app[web.1]:     6:                <ul class="nav">
2013-03-26T13:26:00+00:00 app[web.1]:     7:                    <li class="active"><%= link_to "Главная", home_path %></li>
2013-03-26T13:26:00+00:00 app[web.1]:   app/helpers/sessions_helper.rb:17:in `signed_in?'
2013-03-26T13:26:00+00:00 app[web.1]:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:26:00+00:00 app[web.1]: 
2013-03-26T13:26:00+00:00 app[web.1]:     5:            <div class="nav-collapse collapse">
2013-03-26T13:26:00+00:00 app[web.1]:     11:                   <li><%= link_to "Заказ", "#" %></li>
2013-03-26T13:26:00+00:00 app[web.1]: 
2013-03-26T13:26:00+00:00 app[web.1]: 
2013-03-26T13:26:00+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2013-03-26T13:26:00+00:00 app[web.1]:     10:                   <li><%= link_to "Меню", menu_path %></li>
2013-03-26T13:26:00+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2013-03-26T13:26:00+00:00 app[web.1]:     8:                    <% if signed_in? %>
2013-03-26T13:26:00+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
2013-03-26T13:26:00+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2013-03-26T13:26:00+00:00 app[web.1]:   app/helpers/sessions_helper.rb:13:in `current_user'
2013-03-26T13:26:00+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
2013-03-26T13:26:00+00:00 app[web.1]:              ORDER BY a.attnum
2013-03-26T13:26:00+00:00 app[web.1]: ):
2013-03-26T13:26:00+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=0ms connect=1ms service=254ms status=500 bytes=643
2013-03-26T13:26:00+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=0ms connect=3ms service=31ms status=200 bytes=0
2013-03-26T13:25:53+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-03-26T13:25:54+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2013-03-26T13:25:54+00:00 app[web.1]: [2013-03-26 13:25:54] ERROR SignalException: SIGTERM
2013-03-26T13:26:04+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-03-26T13:26:04+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-03-26T13:26:06+00:00 heroku[web.1]: Process exited with status 137
2013-03-26T13:29:30+00:00 app[web.1]: Started GET "/" for 46.72.99.61 at 2013-03-26 13:29:30 +0000
2013-03-26T13:29:30+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (0.0ms)
2013-03-26T13:29:30+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-26T13:29:30+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.0ms)
2013-03-26T13:29:30+00:00 app[web.1]: LINE 5:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:29:30+00:00 app[web.1]:                                         ^
2013-03-26T13:29:30+00:00 app[web.1]:   Rendered layouts/_menu.html.erb (6.5ms)
2013-03-26T13:29:30+00:00 app[web.1]: Completed 500 Internal Server Error in 13ms
2013-03-26T13:29:30+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "users" does not exist
2013-03-26T13:29:30+00:00 app[web.1]: 
2013-03-26T13:29:30+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2013-03-26T13:29:30+00:00 app[web.1]:              WHERE a.attrelid = '"users"'::regclass
2013-03-26T13:29:30+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2013-03-26T13:29:30+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2013-03-26T13:29:30+00:00 app[web.1]:              ORDER BY a.attnum
2013-03-26T13:29:30+00:00 app[web.1]: ):
2013-03-26T13:29:30+00:00 app[web.1]:     6:                <ul class="nav">
2013-03-26T13:29:30+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
2013-03-26T13:29:30+00:00 app[web.1]:     5:            <div class="nav-collapse collapse">
2013-03-26T13:29:30+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
2013-03-26T13:29:30+00:00 app[web.1]:     10:                   <li><%= link_to "Меню", menu_path %></li>
2013-03-26T13:29:30+00:00 app[web.1]:     9:                <!--<li><%= link_to "Users", users_path %></li>-->
2013-03-26T13:29:30+00:00 app[web.1]:     11:                   <li><%= link_to "Заказ", "#" %></li>
2013-03-26T13:29:30+00:00 app[web.1]:   app/models/user.rb:32:in `authenticate_with_salt'
2013-03-26T13:29:30+00:00 app[web.1]:   app/helpers/sessions_helper.rb:13:in `current_user'
2013-03-26T13:29:30+00:00 app[web.1]:   app/helpers/sessions_helper.rb:17:in `signed_in?'
2013-03-26T13:29:30+00:00 app[web.1]:     8:                    <% if signed_in? %>
2013-03-26T13:29:30+00:00 app[web.1]:   app/helpers/sessions_helper.rb:42:in `user_from_remember_token'
2013-03-26T13:29:30+00:00 app[web.1]:     7:                    <li class="active"><%= link_to "Главная", home_path %></li>
2013-03-26T13:29:30+00:00 app[web.1]: 
2013-03-26T13:29:30+00:00 app[web.1]: 
2013-03-26T13:29:30+00:00 app[web.1]:   app/views/layouts/application.html.erb:15:in `_app_views_layouts_application_html_erb__3050356598751074094_29958360'
2013-03-26T13:29:30+00:00 app[web.1]:   app/views/layouts/_menu.html.erb:8:in `_app_views_layouts__menu_html_erb___3316497000915670487_28099760'
2013-03-26T13:29:30+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 connect=10ms service=9ms status=304 bytes=0
2013-03-26T13:29:30+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.99.61" dyno=web.1 queue=0 wait=0ms connect=1ms service=34ms status=500 bytes=643 
```

**更新** 我只能使用 MySQL。我的项目是测试我正在寻找的一家公司的实习任务。他们说我在项目中使用 MySql。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:41:05.537

Heroku 真正设计为运行 PostgreSQL 作为其数据库引擎，而不是 MySQL。您实际上已经安装了 postgresql gem ( `pg`)。您收到的错误与访问数据库（特别是`users`表）有关。

虽然可以作为新用户在 Heroku 上运行 MySQL，但我建议只使用 postgresql，因为它更容易设置，您不必担心安装额外的附加组件来使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:52:42.640

**你在哪里托管你的 MySQL 数据库？** 确保您的数据库服务器允许从 Heroku 进行远程访问。正确设置后，亚马逊 (AWS) 是最佳解决方案。

如果您在本地计算机上托管 MySQL 数据库以进行生产，那么您需要**确保 Heroku 的服务器可以远程访问您的计算机以进行生产**。

在您的 Gemfile 中删除这些行并替换为下面的示例。

*   `gem 'pg'`
*   `gem 'sqlite3-ruby', :require => 'sqlite3'`
*   `gem "mysql2", "~> 0.3.11"`

我也强烈建议查看[https://github.com/laserlemon/figaro](https://github.com/laserlemon/figaro)和[http://railscasts.com/episodes/85-yaml-configuration-revised?view=comments](http://railscasts.com/episodes/85-yaml-configuration-revised?view=comments)

**在 AWS 上设置 MySQL：**

1.  使用正确的数据库 gem 更新 Gemfile
2.  更新 database.yml 连接设置
3.  安装 Heroku 工具带[https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)
4.  注册 AWS 托管的 MySQL [http://aws.amazon.com/rds/](http://aws.amazon.com/rds/)
5.  Amazon 要求您从本地计算机的 WAN IP 授予访问权限，并且您还需要授予 Heroku 的应用程序服务器授权访问权限以进行生产。
    *   通过以下方式登录 AWS[http://console.aws.amazon.com/](http://console.aws.amazon.com/)
    *   转到“服务”>“RDS”
    *   在左侧菜单“导航/数据库”>“数据库安全组”>“默认”下
    *   添加 CIDR/IP：#.#.#.#（您的本地 pc ip [http://www.whatsmyip.us/](http://www.whatsmyip.us/)）
    *   添加 EC2 安全组（这是 heroku aws id）
        *   aws 帐户 ID：“098166147350”
        *   ec2 安全组：“默认”
6.  在 Heroku 上设置 AWS RDS MySQL 数据库
    *   确认 Heroku 被授予 AWS RDS 远程访问权限
        *   `$ cd myAppDir`
        *   `$ heroku login`
        *   `$ heroku config:get DATABASE_URL`
        *   `$ heroku addons:add amazon_rds url=mysql2://masteruser:pass@dbinstance.123endpoint321.amazonaws.com/databasename`
        *   `$ heroku config:get DATABASE_URL`
        *   确认新的数据库设置

**Gemfile** ~ 不要忘记`$ bundle install`&`$ bundle update`

```
# ===~===~===~===~===~===~===~===~===~===
group :development do
  gem 'mysql2'
end
# ===~===~===~===~===~===~===~===~===~===
group :production do
  # gem 'pg'
  gem 'mysql2'
end
# ===~===~===~===~===~===~===~===~===~===
group :test do
  gem 'sqlite3'
  # gem 'mysql2'
end
# ===~===~===~===~===~===~===~===~===~=== 
```

**database.yml** ~ 每种类型的 db 连接的示例。

```
# AWS RDS ~~~~~~~~~~~~~~~~
development:
  adapter: mysql2
  encoding: utf8
  host: dbinstance.123endpoint789.us-east-1.rds.amazonaws.com
  database: appdb_dev
  pool: 5
  username: masterusername
  password: password
  socket: /tmp/mysql.sock
# ~~~~~~~~~~~~~~~~~~~~~~~~
# MySQL localhost ~~~~~~~~
# development:
#   adapter: mysql2
#   encoding: utf8
#   database: erics_rails_app_dev
#   pool: 5
#   username: root
#   password:
#   socket: /tmp/mysql.sock
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# HEROKU ~~~~~~~~~~~~~~~~~
# Note: On Heroku production this (over)written on deployment.
production:
  adapter: pg
  database: localhost
  timeout: 5000
# ORIGINAL TEST ~~~~~~~~~~~~~~~
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000 
```

MySQL 工作台设置 ~ [http://dev.mysql.com/downloads/workbench/](http://dev.mysql.com/downloads/workbench/)

```
* hostname = dbinstance.123endpoint789.us-east-1.rds.amazonaws.com
* user = masterusername
* pass = password
* port = 3306 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:41:11.380

你有这个应用程序的 mysql 插件吗？

Heroku 默认为您提供 Postgres 数据库，但如果您想使用另一种数据库类型，即 mysql，则需要使用插件。我不确定插件中可能有免费的解决方案。

当您将应用程序部署到 Heroku 时，它们会覆盖您的 database.yml 文件，将其指向正确的数据库 url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:42:21.380

首先 heroku 为您的应用程序提供 PostgreSQL 数据库，编辑您的 Gemfile

并添加 gem 'pg'

它也使用瘦作为服务器，所以添加

宝石“薄”

将您的 Database.yml 更改为所有环境

```
adapter: PostgreSQL
  encoding: utf8
  reconnect: false
  database: myapp_production
  pool: 5
  username: root
  password: "0761" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T13:50:15.213

从生产环境中删除 mysql gem。Heroku 不支持 sqlite 数据库。在生产中使用 postgres。您的 gemfile 应如下所示：

```
group :production do
  gem "pg" # move your pg gem inside here
end

group :development, :test do
  gem "sqlite3"
end 
```

更改您的 gemfile 以反映上述内容，`$ bundle`然后运行捆绑新的 gem，添加并提交您的更改并将它们推送到 heroku。

这将允许您在开发和测试中使用 sqlite，在生产中使用 postgresql，这是 heroku 所需要的。

# android - 应用程序引擎（eclipse）：无法将设备从 android 模拟器注册到端点

> ID：15638377
> 
> 赞同：0
> 
> 时间：2013-03-26T13:34:09.427
> 
> 标签：android, eclipse, google-app-engine

我刚刚开始使用 android 探索应用引擎，我按照链接教我如何创建一个 App Engine Connected Android 项目。 [https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)

我完全按照链接中写的内容进行操作，

1）创建了一个新的应用引擎连接的android项目

[2) 从https://code.google.com/apis/console/#project](https://code.google.com/apis/console/#project)获取项目编号和 API Keys

3) 在 Google APIs Console 中启用 Google Cloud Messaging

4) 在 CloudEndpoints 类中将 LOCAL_ANDROID_RUN 设置为 true

5) 使用带有 google api(v17) 的模拟器

6) 从 android sdk manager 安装 android 云消息库

7）我正在使用日食靛蓝

我启动了 localhost:8888，它在网络上工作得非常好，但是当我运行模拟器并按下注册按钮时，它立即停止，我检查了我的 logcat，它显示了这个错误，我不应该做什么关于它

```
 03-26 13:03:48.766: E/AndroidRuntime(915): FATAL EXCEPTION: IntentService[GCMIntentService-525241845095-1]
    03-26 13:03:48.766: E/AndroidRuntime(915): java.lang.NullPointerException
    03-26 13:03:48.766: E/AndroidRuntime(915):  at       com.tesst.GCMIntentService.onRegistered(GCMIntentService.java:144)
    03-26 13:03:48.766: E/AndroidRuntime(915):  at com.google.android.gcm.GCMBaseIntentService.handleRegistration(GCMBaseIntentService.java:251)
    03-26 13:03:48.766: E/AndroidRuntime(915):  at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:153)
    03-26 13:03:48.766: E/AndroidRuntime(915):  at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
    03-26 13:03:48.766: E/AndroidRuntime(915):  at android.os.Handler.dispatchMessage(Handler.java:99)
    03-26 13:03:48.766: E/AndroidRuntime(915):  at android.os.Looper.loop(Looper.java:137)
    03-26 13:03:48.766: E/AndroidRuntime(915):  at android.os.HandlerThread.run(HandlerThread.java:60) 
```

如果有人可以帮助我解决我遇到的问题，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:00:29.553

狭隘地看，existingInfo 很可能为空。

更广泛地说，似乎在您的 onRegistered 函数中执行了一个端点。对于初学者来说，调用端点是一个同步操作，因此不应在 onRegistered 中完成。

如果我正确理解你的代码，你应该改变它。我建议您应该将 GCM 代码与端点代码“分离”。

另外，我建议您查看实施 GCM 的说明：http:
[//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)

# jquery - 使用 JQuery 和 PhoneGap 解析 XML

> ID：15638378
> 
> 赞同：0
> 
> 时间：2013-03-26T13:34:09.783
> 
> 标签：jquery, xml

我知道我的问题可能会被问过几次。我尝试了很多解决方案，但它对我不起作用。

我正在尝试使用从 XML 文件获取数据的 JQuery 和 PhoneGap 构建一个移动应用程序。

这是我的 XML 文件：

```
<book>
<chapter id="1">
<title>title 1</title>
<question id="1.1"> Question 1 </question>
<answer id="1.1.1"> answer for q1 </answer>
</chapter>

<chapter id="2">
<title>title 2</title>
<question id="2.1"> Question 2 </question>
<answer id="1.2.1"> answer for q2 </answer>
</chapter>
</book> 
```

这是我的 JavaScript：

```
$(document).bind("pageshow", function() {

$.ajax({
        type: 'GET',
        url:'Book.xml',
        datatype:'xml',
        success:function(xml){
            alert("success");
        }
    });
}); 
```

如果我有一个函数，则永远不会显示成功警报，但是如果此代码中显示了警报 $(document).bind("pageshow", function() {

```
$.ajax({
        type: 'GET',
        url:'Book.xml',
        datatype:'xml',
        success: alert("success");

    });
}); 
```

我被困在这里，因为我无法添加任何进一步的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:42:38.523

第二个版本只是简单地调用`alert`并将返回值 ( `undefined`) 分配给成功成员。这就是您看到警报消息框的原因。

第一个版本可能由于多种原因而失败。首先，您应该确认您实际上正在接收数据（例如，通过使用浏览器中的开发人员工具）

# java - 如何在 ElasticSearch（搜索引擎）中存储有关系的对象

> ID：15638382
> 
> 赞同：0
> 
> 时间：2013-03-26T13:34:40.050
> 
> 标签：java, jakarta-ee, search, search-engine, elasticsearch

我将在我的应用程序中使用 ElasticSearch 作为搜索存储库。当对象之间存在关联/关系时，关于在搜索索引中组织对象的最佳做法是什么，我有几个问题。

据我所知，搜索索引是一个扁平结构，不能像数据库一样使用关系概念。

假设您有这些域对象：

**Person : - 与***Car*是一对多的关系

 ***汽车**： - 由一个*人拥有，与**人*多对一

 ***部门**： - 每个*部门*有很多*人*，每个*人*可能属于多个*部门*，多对多

将其存储在搜索索引中的最佳方法是什么？有什么选择？例如，我想找到属于某个部门的所有人员，或者汽车功率超过 300 马力的所有人员。如果重要，我正在使用 Java 客户端 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:44:03.303

弹性搜索（或 Lucene）不是关系数据库，因此您需要*扁平化*您的关系模型。

尝试为获得这种结构的视图建模 -

```
Car|Person|Department 
```

这将为您提供查找汽车所需的所有属性。这可以导入到`Car`.

相似地

```
Person|Department 
```

会给你一个人的所有信息。这将帮助您查找`Person`

`Department`可以是第三个文件。

每个实体可以有多个文档。但是关系需要被翻译为实体的属性。**

# c# - MVC4错误的日期格式

> ID：15638390
> 
> 赞同：1
> 
> 时间：2013-03-26T13:34:57.177
> 
> 标签：c#, jquery, asp.net-mvc, date-format

我正在使用 MVC4 开发一个 Intranet Web 应用程序。当我尝试创建一个新人**时**，我必须选择一个**开始日期**。为了做到这一点，我已经使用 jQuery 脚本实现了一个日期选择器。我对文化和十进制数字有疑问，但幸运的是，在帮助下我设法解决了它。接受的日期格式是**yyyy/mm/dd**格式，但我想使它成为**dd/mm/yyyy**。可能吗？我试图改变格式，包括标签，......没有效果。

创建视图：

```
@model BuSIMaterial.Models.Person
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Person</legend>

        <div class="editor-label">
            First name : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            Last name : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            National number : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>

        <div class="editor-label">
            Start date : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new {@class = "datepicker" })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>

        <div class="editor-label">
            End date : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker" })
            @Html.ValidationMessageFor(model => model.EndDate)
        </div>

        <div class="editor-label">
            Distance House - Work (km) : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>

        <div class="editor-label">
            Category : 
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href = "../ProductPackageCategory/Create">Add a new category?</a>
        </div>

        <div class="editor-label">
            Upgrade? : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")
} 
```

jQuery 选择器和全球化文化：

```
$(document).ready(function () {
    $(".datepicker").datepicker({
                        changeMonth: true,
                       changeYear: true,
        dateFormat: 'dd/mm/yy'

    });
});

$.validator.methods.number = function (value, element) {
    return this.optional(element) ||
                !isNaN(Globalize.parseFloat(value));
}
$(document).ready(function () {
    Globalize.culture('fr-FR');
});

jQuery.extend(jQuery.validator.methods, {
    range: function (value, element, param) {
        //Use the Globalization plugin to parse the value        
        var val = $.global.parseFloat(value);
        return this.optional(element) || (
                    val >= param[0] && val <= param[1]);
    }
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:02:44.460

You should add attribute for model property

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime StartDate { get; set; } 
```

# php - For循环不返回所有值

> ID：15638391
> 
> 赞同：0
> 
> 时间：2013-03-26T13:34:59.960
> 
> 标签：php, mysql

我正在编写一段旨在在 Google Charts 中实现的代码，但是，并非我正在寻找的所有值都被返回。

我需要从我的数据库中选择几个日期，我选择它们如下：

```
$dates = mysql_fetch_row(mysql_query("SELECT DISTINCT date FROM participants WHERE subdomein='testdomain'")) or die(mysql_error()); 
```

然后我使用一个 for 循环来回显它们：

```
for ($i = 0; $i <= count($dates); $i++)
    {
        echo $dates[0].' ';
    } 
```

在我的数据库中有 3 个（不同的）日期：和`24-03-2013`，但是这段代码返回。我在这里做错了什么？`25-03-2013``26-03-2013``2x 24-03-2013`

PS我也尝试了一个while循环，但它会无限循环或使我的页面崩溃。除此之外，我通过在数据库本身中运行查询来测试它并返回正确的结果，因此查询工作正常。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:38:24.933

您需要`mysql_fetch_row()`在循环内部使用：

```
$result = mysql_query("SELECT DISTINCT date FROM participants WHERE subdomein='testdomain'");
while($date = mysql_fetch_row($result))
{
    echo $date[0];
} 
```

您还应该注意，`mysql_*`函数系列并未被弃用。如果可能，您应该避免使用它们，并寻找替代方案，例如 MySQLi 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:39:21.453

`mysql_fetch_row`仅从查询的实际结果中返回一条记录。您必须多次调用它，直到它返回`null`：

```
$res = mysql_query(...);

while (($record = mysql_fecth_row($res)) !== null) {
    print_r($record[0]);
} 
```

请注意`mysql_*`，函数已被弃用，也不应再使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:37:31.897

试试这个：`mysql_fetch_row()`只获取一行，如果你需要所有的行使用`mysql_fetch_assoc()`

```
$sql = mysql_query("SELECT DISTINCT date FROM participants WHERE subdomein='testdomain'");

while($dates = mysql_fetch_assoc() ($sql)){
   print_r($dates);
} 
```

参考： http: [//php.net/manual/en/function.mysql-fetch-row.php](http://php.net/manual/en/function.mysql-fetch-row.php)

[http://www.php.net/manual/en/function.mysql-fetch-assoc.php](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

# mongodb - mongodb查询中的日期日/分钟

> ID：15638396
> 
> 赞同：3
> 
> 时间：2013-03-26T13:35:13.927
> 
> 标签：mongodb, datetime, time-series, isodate

我将时间序列数据存储在 mongodb 数据库中，其中一个字段是 ISODate 对象。我正在尝试检索 ISODate 对象在分钟和秒内具有零值的所有项目。也就是说，所有在一个小时内具有时间戳的对象。

有什么方法可以做到这一点，还是我需要为小时、分钟、秒创建单独的字段，并通过例如 find({"minute":0, "second":0}) 直接查询它们？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:03:20.103

你可以像@Devesh 说的那样做，或者如果它更适合你可以使用聚合框架：

```
db.col.aggregate([
   {$project: {_id:1, date: {mins: {$minute: '$dateField'}, secs: {$second: '$dateField'}}}},
   {$match: {mins: 0, secs: 0}}
]); 
```

像这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-10T15:20:13.903

将**[`$expr`](https://docs.mongodb.com/manual/reference/operator/query/expr/#op._S_expr)**运算符与日期聚合运算符一起使用，**[`$minute`](https://docs.mongodb.com/manual/reference/operator/aggregation/minute/)**并**[`$second`](https://docs.mongodb.com/manual/reference/operator/aggregation/second/)**在您的查找查询中作为：

```
db.collection.find({
    '$expr': {
        '$and': [
            { '$eq': [ { '$minute': '$dateField' }, 0 ] },
            { '$eq': [ { '$second': '$dateField' }, 0 ] },
        ]
    }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:51:37.150

您能否在集合中再添加一列，仅包含不含分钟和秒的日期时间。它将使您的查询更快且易于使用。它将是没有分钟和秒部分的日期时间列

# matlab - 从表面法线计算方向角（nx，ny，nz）

> ID：15638398
> 
> 赞同：2
> 
> 时间：2013-03-26T13:35:16.767
> 
> 标签：matlab, normals, point-clouds

我想从具有 nx、ny、nz 的表面法线向量计算方向角。

我在 Matlab 上使用 princomp() 获得了 3D 点云法线。

每个点都有一个法线向量(nx, ny, nz)。

如何计算法向量的方向角？

我的最终目标是绘制范围图像颜色映射到表面法线的方向角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T06:21:47.637

如果我没记错的话，方向角是指表面法线相对于表面的角度。（如果我的解释有误，请澄清）在这种情况下，您可以在表面上取一个点（或与表面法线对应的点）。设点为 P (px, py, pz)'。法线为 N (nx, ny, nz)' 设 theta 为与表面法线和点的夹角。

cos(θ) = PN / |P|.|N|

所以在matlab中，

cos_theta = P' * N / (norm(P) * norm(N)) theta = acosd(cos_theta)

# java - 通配符和类型化泛型的使用会生成“不适用于参数”错误

> ID：15638400
> 
> 赞同：1
> 
> 时间：2013-03-26T13:35:22.027
> 
> 标签：java, events, generics, listener, observer-pattern

我目前正在编写一个简单的事件侦听器库。
这是我的任何听众的界面：

```
public interface Listener<T> {
    // Event is a very simple type which holds a variable T data.
    public boolean run(Event<T> e);
} 
```

我的班级`Listenable`将所有`Listener`s 记录在一个 HashMap 中：

```
protected HashMap<String, ArrayList<Listener<?>>> listeners; 
```

我在这里使用通配符是因为我希望我的`Listenable`实例具有多个事件类型。

有问题的部分现在出现在我的`Listenable::dispatchEvent()`方法中：

```
public boolean dispatchEvent(Event<?> evt) {
        ArrayList<Listener<?>> evtListeners = listeners.get(evt.getType());
        if (evtListeners == null) {
            return true;
        }

        for (Listener<?> lst : evtListeners) {
        //           vvv--- error
            if (!lst.run(evt) || evt.shouldStopPropagation()) {
                return false;
            }
        }

        return true;
} 
```

错误消息说：

> Listener 类型中的方法 run(Event) 不适用于参数 (Event)

我找到了一个“解决方案”（在让编译器隐藏错误的意义上）：

```
for (Listener lst : evtListeners) {
            if (!lst.run(evt) || evt.shouldStopPropagation()) {
                return false;
            }
} 
```

在这种情况下，编译器只生成两个警告，**但**我在[这里](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)读到这种技术*非常非常糟糕*！

* * *

**我得到了它与这个代码一起工作**

```
public <T> boolean dispatchEvent(Event<T> evt) {
        ArrayList<Listener<?>> evtListeners = listeners.get(evt.getType());
        if (evtListeners == null) {
            return true;
        }

        for (int i = 0; i < evtListeners.size(); i++) {
            @SuppressWarnings("unchecked")
            Listener<T> lst = (Listener<T>) evtListeners.get(i);

            if (!lst.run(evt) || evt.shouldStopPropagation()) {
                return false;
            }
        }

        return true;
} 
```

但我怀疑这是干净的代码，不是吗？我假设我的库的用户不会为相同的事件类型 ( `evt.getType()`) 混合类型。

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:47:03.967

您应该将方法的签名更改为

```
public <T> boolean dispatchEvent(Event<T> evt) 
```

并`T`用作类型：

```
for (Listener<T> lst : (ArrayList<Listener<T>>) evtListeners) { 
```

请注意，这通常会给出“未经检查的对话”警告，您可以使用`@SuppressWarnings("unchecked")`iirc 禁用它。

**编辑**：很难摆脱未经检查的对话警告。它们只是意味着编译器不能强制强制转换。以下语句是正确的，无用的，并且稍后会在某个地方炸毁您的代码：

```
ArrayList<Thread> al1 = new ArrayList<Thread>();
al1.add(new Thread());
ArrayList<Exception> al2 = (ArrayList<Exception>) al1; 
```

Java 中的泛型或多或少只是一个*编译时*提示，它可以节省强制转换并为您提供更多类型安全性。

# c# - 在表单启动前显示图像 - Compact Framework

> ID：15638402
> 
> 赞同：1
> 
> 时间：2013-03-26T13:35:23.703
> 
> 标签：c#, winforms, windows-mobile, compact-framework, loading

我有一个 Windows Mobile 应用程序，在 Main 方法中我显示 Main 表单：

```
[MTAThread]
static void Main()
{
    new MainForm().ShowDialog();
} 
```

当程序启动时，我看到典型的动画加载：

![在此处输入图像描述](../Images/05ef0bdfbea4723253e832c7063e5212.png)

我想看一个图像（全屏）而不是这个动画，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:50:46.493

在那里，您可以找到有关如何将启动画面嵌入到您的 .NETCF 应用程序的完整示例。 [.NET Compact Framework 示例：启动画面](http://www.microsoft.com/en-us/download/details.aspx?id=22845) 不要混淆链接指向 .exe，此示例是作为安装程序制作的，但最终结果是您将看到代码本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:48:57.473

关于 CF SLR 的一件不幸的事情是，当它开始 JITting 和加载类时，它会显示等待光标向下。没有办法摆脱它。您可以创建自己的启动画面，但请记住，除非它是一个单独的应用程序，否则在框架加载到足以显示它之前它不会显示。即使有一个单独的初始屏幕，那个等待光标仍然会在那里，所以它不是你想要的“替代”，而是一个“也”。

# java - java jboss 7 JSF项目意外的EJB错误

> ID：15638420
> 
> 赞同：1
> 
> 时间：2013-03-26T13:36:00.113
> 
> 标签：java, jakarta-ee, jboss

我对 javax.crypto.spec 有疑问，有人知道如何解决吗？好像在普通的jre v1.7.0_13，我的bean是无状态的。我在某处错过了一些微不足道的事情吗？

这是异常的第一部分

```
14:23:37,716 ERROR org.jboss.ejb3.invocation JBAS014134: EJB Invocation failed on component KhrQueryService for method public abstract java.lang.Boolean hu.avhga.esb.khr.service.khr.KhrQueryService.testKHRConnection(): javax.ejb.EJBException: Unexpected Error
at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:163) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at hu.avhga.esb.khr.service.khr.KhrQueryService$$$view156.testKHRConnection(Unknown Source) [esb_khr.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_13]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_13]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_13]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_13]
at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:264) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:260) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:111) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at hu.avhga.esb.khr.service.khr.KhrQueryService$419211266$Proxy$_$$_Weld$Proxy$.testKHRConnection(KhrQueryService$419211266$Proxy$_$$_Weld$Proxy$.java) [esb_khr.jar:]
at hu.avhga.esb.khr.service.khr.KhrQueryServiceFacadeBean.testKHRConnection(KhrQueryServiceFacadeBean.java:59) [esb_khr.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_13]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_13]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_13]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_13]
at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:127) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:135) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:82) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInNoTx(CMTTxInterceptor.java:211) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.notSupported(CMTTxInterceptor.java:288) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:188) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.remote.EJBRemoteTransactionPropagatingInterceptor.processInvocation(EJBRemoteTransactionPropagatingInterceptor.java:80) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.remote.LocalEjbReceiver.processInvocation(LocalEjbReceiver.java:179) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:179) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.TransactionInterceptor.handleInvocation(TransactionInterceptor.java:43) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:128) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
at sun.proxy.$Proxy164.testKHRConnection(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_13]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_13]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_13]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_13]
at org.jboss.weld.bean.proxy.AbstractBeanInstance.invoke(AbstractBeanInstance.java:44) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.proxies.KhrQueryServiceFacadeCommon$1801675735$Proxy$_$$_WeldClientProxy.testKHRConnection(KhrQueryServiceFacadeCommon$1801675735$Proxy$_$$_WeldClientProxy.java)
at hu.avhga.web.esb_khr.KHRSearchAction.testConnection(KHRSearchAction.java:68)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_13]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_13]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_13]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_13]
at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:735) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
at javax.el.BeanELResolver.invoke(BeanELResolver.java:467) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:246) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.html.HtmlCommandButton.getOnclick(HtmlCommandButton.java:312)
at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeMarkup(CommandButtonRenderer.java:61)
at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeEnd(CommandButtonRenderer.java:49)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at hu.avhga.web.common.filter.BrowserModeSettingFilter.doFilter(BrowserModeSettingFilter.java:18)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at hu.avhga.security.web.login.AuthenticationFilter.doFilter(AuthenticationFilter.java:92)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at waffle.servlet.NegotiateSecurityFilter.doFilterPrincipal(Unknown Source)
at waffle.servlet.NegotiateSecurityFilter.doFilter(Unknown Source)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_13]
Caused by: java.lang.NoClassDefFoundError: javax/crypto/spec/SecretKeySpec
at com.jcraft.jsch.jce.AES256CTR.init(AES256CTR.java:55) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.checkCipher(Session.java:2072) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.checkCiphers(Session.java:2049) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.send_kexinit(Session.java:592) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.connect(Session.java:286) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.connect(Session.java:162) [jsch-0.1.49.jar:]
at hu.avhga.common.crypto.SshConnect.connect(SshConnect.java:69) [common_crypto.jar:] 
```

这是堆栈的第二部分：

```
Caused by: java.lang.NoClassDefFoundError: javax/crypto/spec/SecretKeySpec
at com.jcraft.jsch.jce.AES256CTR.init(AES256CTR.java:55) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.checkCipher(Session.java:2072) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.checkCiphers(Session.java:2049) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.send_kexinit(Session.java:592) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.connect(Session.java:286) [jsch-0.1.49.jar:]
at com.jcraft.jsch.Session.connect(Session.java:162) [jsch-0.1.49.jar:]
at hu.avhga.common.crypto.SshConnect.connect(SshConnect.java:69) [common_crypto.jar:]
at hu.avhga.common.crypto.SshConnect.connect(SshConnect.java:148) [common_crypto.jar:]
at hu.avhga.esb.khr.service.khr.KhrQueryServiceBean.testKHRConnection(KhrQueryServiceBean.java:162) [esb_khr.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_13]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_13]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_13]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_13]
at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:127) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:135) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:82) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
... 155 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:26:01.530

设法通过离线帮助解决它。这不是那么微不足道。

仅将 jsch 添加到 Jboss 模块是不够的，我需要编辑 JBoss home/modules/com/jcraft/jsch/main/module.xml 并在依赖项之间添加一行：

```
<dependencies>
 <module name="javax.api"/>
</dependencies> 
```

我们已经在 javax/api/main/modules.xml 的模块中定义了“javax.api” 它不包含 jar，我猜是因为 JRE 可以使用它

# excel - Excel奇数行赋予价值

> ID：15638423
> 
> 赞同：0
> 
> 时间：2013-03-26T13:36:07.783
> 
> 标签：excel, vba

我正在尝试为特定列/范围中的所有奇数单元格分配一个值。到目前为止，我从另一个问题中获取了以下代码，但它不起作用：

```
Sub changeClass()

    Dim r As Range
    Set r = Range("B16").End(xlDown)  'set the range the data resides in

    For i = 1 To r.Rows.Count  'merge step
        If i Mod 2 = 1 Then   'this checkes to see if i is odd
            r.Cells.Value = "value"
        End If
        Else 
            r.Cells.Value = "value2"
    Next i

End Sub 
```

基本上我需要它为 B 列中的每个单元格添加一个值，从单元格 16 到包含数据的列中的最后一个单元格。在偶数行上，该值将是一回事，在奇数行将是另一个.

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:47:57.263

```
Sub changeClass()

    Dim r As Range
    Dim i As Integer

For Each r In Range("B16:B24") 'Change this range

i = r.Row
    If i Mod 2 = 1 Then   'this checks to see if i is odd
        r.Cells.Value = "ODD"

    Else
        r.Cells.Value = "EVEN"
    End If

Next r

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:47:08.390

试试这个，我相信它不起作用，因为你没有访问循环中的每个单独的单元格。在下面的宏中，我使用“rng”来表示整个单元格范围，并使用“r”来表示循环的每个增量中的单个单元格。

```
Sub changeClass()

    Dim rng As Range 
    Dim r As Range 
    Set rng = Range(Cells(16,2),Cells(16,2).End(xlDown))

    For i = 1 To rng.Rows.Count
        Set r = rng.Cells(i)
        If i Mod 2 = 1 Then ' You may want to test if it is odd based on the row number (depends on your problem...)
            r.Value = "Odd Value"
        Else
            r.Value = "Even Value"
        End If

    Next i

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:46:52.853

你搞砸了你的 if 语句，不要关闭它，否则只有在你完全完成它之后才关闭它！;） 这里：

```
Sub changeClass()

Dim r As Range
Set r = Range("B16").End(xlDown)  'set the range the data resides in

For i = 1 To r.Rows.Count  'merge step
    If i Mod 2 = 1 Then   'this checkes to see if i is odd
        r.Cells.Value = "value"
    Else 
        r.Cells.Value = "value2"
    End if 
Next i

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T22:32:26.543

你不需要循环：

```
Sub OddRowAlert()
With Range("B16:B100")
    .Formula = "=IF((MOD(ROW(B16),2)),""Odd"",""Even"")"
    .Formula = .Value
End With
End Sub 
```

只需将公式中的奇数和偶数替换为您想要的

# java - Mockito 在创建模拟对象时抛出 NullPointer

> ID：15638425
> 
> 赞同：14
> 
> 时间：2013-03-26T13:36:11.177
> 
> 标签：java, mockito, powermock

我有一个集成测试，其中一些设置是使用 Guice 完成的。我正在使用 Mockito 来模拟一些依赖项。到目前为止，这对我来说效果很好。我需要将 PowerMock 用于其他一些依赖项。现在 Mockito 正在`NullPointerException`加载它自己的一个类：

```
java.lang.ExceptionInInitializerError
    at org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.<init>(ConditionalStackTraceFilter.java:17)
    at org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:30)
    at org.mockito.exceptions.base.MockitoException.<init>(MockitoException.java:19)
    at org.mockito.exceptions.misusing.MockitoConfigurationException.<init>(MockitoConfigurationException.java:18)
    at org.mockito.internal.configuration.ClassPathLoader.loadImplementations(ClassPathLoader.java:145)
    at org.mockito.internal.configuration.ClassPathLoader.findPluginImplementation(ClassPathLoader.java:110)
    at org.mockito.internal.configuration.ClassPathLoader.findPlatformMockMaker(ClassPathLoader.java:106)
    at org.mockito.internal.configuration.ClassPathLoader.<clinit>(ClassPathLoader.java:59)
    at org.mockito.internal.util.MockUtil.<clinit>(MockUtil.java:21)
    at org.mockito.internal.MockitoCore.<init>(MockitoCore.java:40)
    at org.mockito.Mockito.<clinit>(Mockito.java:932)
    <snip my test code and some Guice>
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.internal.runners.ClassRoadie.runBefores(ClassRoadie.java:56)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:43)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:101)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:53)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

Caused by: java.lang.NullPointerException
    at org.mockito.internal.exceptions.stacktrace.StackTraceFilter.<clinit>(StackTraceFilter.java:21)
    ... 39 more 
```

（修剪下来的）代码：

```
@PrepareForTest(MyModule.class)
@RunWith(PowerMockRunner.class)
public class MyTest {
    @BeforeClass
    public static void setUp() {
        Injector injector = Guice.createInjector(...);
        MyModule module = PowerMockito.mock(MyModule.class);
        injector = injector.createChildInjector(...); // Fails in another Mockito.mock() call before it gets to use the mocked Module.
    }
} 
```

我在 Mockito 中找不到任何关于这是一个已知错误的信息。有人对如何解决这个问题有建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T13:41:12.613

检查[这个问题](https://code.google.com/p/powermock/issues/detail?id=414#c3)

> 这似乎在实例化时创建模拟时发生。
> 
> 如果我在 @Before 方法中设置我的模拟，问题就会消失。

# c# - 将字符串转换为 UCS2 编码

> ID：15638428
> 
> 赞同：2
> 
> 时间：2013-03-26T13:36:28.740
> 
> 标签：c#, .net, encoding, character-encoding

我正在开发基于 C# 的应用程序，并提出了将字符串转换为 UCS2 编码的问题。基本上，我必须从 XML 中获取一些文本并将其转换为 UCS2，然后将此 UCS2 代码写入 *.dat 文件。

有没有办法在 C#.NET中执行此操作（**将字符串转换为 UCS2 编码）？**如果没有，那么有哪些选择？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:40:10.663

.NET 中没有包含将字符串转换为 UCS-2 编码的编码。您最好的选择是 BigEndianUnicode 或 UTF-16，但这些不会很好地工作。

# delphi - SocketConnection 与 DCOM 连接有什么区别

> ID：15638433
> 
> 赞同：1
> 
> 时间：2013-03-26T13:36:39.990
> 
> 标签：delphi, com

有谁知道和的`TSocketConnection`区别`TDCOMConnection`？？在同时接收大量串行请求的应用程序中，哪个更好用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:39:24.680

不同之处在于在客户端和应用服务器之间来回传输远程调用参数的传输。TDCOMConnection 使用 Microsoft 的 DCOM 来分派远程调用，TSocketConnection 使用简单的二进制协议通过 TCP/IP 套接字连接（参见 SConnect 单元）到正在运行的 scktsrvr.exe 进程。TDCOMConnection 和 TSocketConnection 都需要自动化兼容的 COM 接口。

至于哪个更好：可能是 TSocketConnection 但我不确定。DCOM 过去被认为难以配置和管理/保护，我不知道在此期间是否发生了变化。就我个人而言，我只使用过 TSocketConnection、TWebConnection 和 TLocalConnection，我从来不需要 TDCOMConnection。

# java - ArrayList.add 方法不起作用

> ID：15638438
> 
> 赞同：1
> 
> 时间：2013-03-26T13:37:05.120
> 
> 标签：java, methods, arraylist, add

我是java的初学者，我不明白为什么这不起作用。我正在尝试编写一个将基数为 10 的数字转换为二进制数字的程序，但我遇到了 ArrayList 的问题。我不能使用 ArrayList 的 add 方法：

```
import java.util.ArrayList;
import java.util.Scanner;

public class DecimalToBinary {
public static void main (String[] args){
    Scanner reader = new Scanner (System.in);

    System.out.println("This program converts a decimal number to binary.");

    int decimal;
    ArrayList<int[]> binary = new ArrayList<int[]>();

    //Gets decimal number
    System.out.print("Enter base 10 number: ");
    decimal = reader.nextInt();

    //Adds 1 to binary and then adds the remainders of decimal/2 after that until decimal is 1 
    binary.add(1, null);
    while (decimal != 1){
        binary.add(1, decimal%2);//This is where I get the error
        decimal = decimal/2;
    }//Ends While loop
}//Ends main 
```

}//结束 DecimalToBinary 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:21:44.193

在这条线上：

```
ArrayList<int[]> binary = new ArrayList<int[]>(); 
```

您声明 ArrayList 将仅包含 int 类型的数组。换句话说，存储在“二进制”中的每个对象都将是一个 int 数组。

所以，当你写：

```
binary.add(1, decimal % 2); 
```

您正在尝试将 'decimal % 2' 添加到二进制的位置 1。因为 decimal % 2 是一个 int，而不是一个 int 数组，所以会出现编译器错误。

将二进制的声明更改为：

```
ArrayList<Integer> binary = new ArrayList<Integer>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:39:49.687

```
ArrayList <Integer> binary = new ArrayList <Integer>();

binary.add(3); 
```

# forms - 根据提交的表单生成的单元格值移动行

> ID：15638439
> 
> 赞同：0
> 
> 时间：2013-03-26T13:37:06.023
> 
> 标签：forms, google-apps-script, google-sheets, triggers

我有一个名为的谷歌电子表格`Product Request Form (Responses)`，其中三张标签分别`Form Responses`为`Clifford`和`Jim`。在`Form Responses`工作表中有三列`timestamp`：`ProductArtist`和`ProductLabel`。

我希望将整行移动/剪切`Clifford`到`Jim`基于`ProductLabel`. 例如，如果单元格值为`Warner`我希望将行移至`Clifford`，如果单元格值为`Universal`我希望该行移至`Jim`。

`Form Responses`在有人填写表格后立即将它们移动到 extermley 也很方便。

```
function onEdit(event) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = event.source.getActiveSheet();
  var r = event.source.getActiveRange();

  if(s.getName() == "Form Responses" && r.getColumn() == 6 && r.getValue() == "Warner") {
    var row = r.getRow();
    var numColumns = s.getLastColumn();
    var targetSheet = ss.getSheetByName("Clifford");
    var target = targetSheet.getRange(targetSheet.getLastRow() + 1, 1);
    s.getRange(row, 1, 1, numColumns).moveTo(target);
    s.deleteRow(row);
  }
} 
```

我仍然很难理解如何编写“表单提交”脚本。我设法找到了一个类似的脚本，该脚本在编辑单元格值时有效，但是在提交表单时创建行时它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:45:26.020

如果我正在编写这段代码，这就是我要遵循的思考过程。

> 一旦有人填写表格时填写“表格回复”表，让他们移动也很方便。

您可以编写一个在提交表单时自动触发的函数。它将收到一个事件，其中包含有关提交的信息（表单值和它们在响应表中插入的范围）。

*   [使用容器特定的可安装触发器](https://developers.google.com/apps-script/understanding_triggers)
*   [了解事件](https://developers.google.com/apps-script/understanding_events)

> 我希望根据“ProductLabel”下的单元格值将整行移动/剪切到“Clifford”或“Jim”表

因为这些值是在表单提交时提供的事件中提供的，所以很容易将信息复制到其他工作表。以下骨架函数基于`ProductLabel`- 做出决定，并且它的设置很容易演变为考虑该列的两个以上的值。它还没有将新表单数据复制到目标工作表的代码（*但*它会在退出之前删除输入）。就个人而言，我倾向于在源工作表中添加一个非表单列，并在处理新表单输入后使用它来记录“状态”，但让我们坚持使用“移动”或“复制然后删除” ”，如被问及。

```
function handleNewForm(event) {
  switch (event.namedValues.ProductLabel) {
    case "Warner":
      // write event.values to "Clifford" Sheet.
      break;
    case "Universal":
      // write event.values to "Jim" Sheet.
      break;
    default:
      // Unexpected input, needs to be handled
      break;
  }
  // We have the range that contained the input, we can clear it.
  // There are side-effects to this that you might not want.
  event.range.clear();
} 
```

**将行复制到目标工作表**

为此，您需要弄清楚目标 Range 是什么，然后执行以下操作：

```
destination.setValues([event.values]); 
```

要获取目标范围，您需要打开相应的工作表，找出现有数据范围（以及下一个可用行），然后使用它来获取`destination`. 为了`.setValues()`工作，`destination`必须具有与写入它的二维数组相同的维度。`event.values`参数是一维数组——一行。为了把它变成一个二维数组，我们只需将它写为一个新数组中的唯一元素，它代表行。因此，要写入`[event.values]`目标工作表，我们需要 1 行 x 3 列的范围。

剩下的就是工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-23T11:13:20.863

请注意，如果您使用查询函数复制数据，则查询仅获取源单元格中的文字文本/值。例如，如果您的数据中有 =HYPERLINK()，则使用查询复制数据将去除链接，只留下锚文本。要复制有效的公式，您需要使用`getFormulas()` [方法](https://developers.google.com/apps-script/reference/spreadsheet/range#getFormulas())。

这种方法的棘手之处在于它为所有*不是*公式的单元格提供了一个充满空白字符串的 String[][]。如果你盲目地将这个结果应用到目标上，你会清空使用or`setFormulas()`复制的所有非公式内容。 `copyTo()``setValues()`

这是一个[关于](https://stackoverflow.com/a/15688921/3863599)合并值和公式数组的代码的讨论，然后您可以使用`setValues()`同一工作簿中的方法应用这些代码。将数据移动到不同工作簿中的工作表需要更多的低级工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:34:13.120

只需使用函数“查询”作为单元格公式即可，无需脚本。

```
=query (base! A1:x; "select * where c='blah' ...") 
```

在每张纸上使用它。

# javascript - 直接在chrome中下载文件（带扩展名）

> ID：15638442
> 
> 赞同：0
> 
> 时间：2013-03-26T13:37:18.800
> 
> 标签：javascript, google-chrome, google-chrome-extension, download, mp3

我正在开发一个 chrome 扩展，它可以在某些网站上下载带有内容脚本的声音文件。当用户单击`<a>`指向 .mp3 的标签时，它会使用 chrome 的媒体播放器打开。如何在点击时自动下载而不打开文件？

# c - 浮点值条件

> ID：15638446
> 
> 赞同：0
> 
> 时间：2013-03-26T13:37:23.363
> 
> 标签：c, floating-point, floating-point-conversion

我制定了以下代码并得到了一个奇怪的输出。谁能解释它是如何工作的？

```
main()
{
    float a=0.8;
    float b=0.25;
    if(a==0.8)
        printf("HELLO")
    if(b==0.25)
        printf("WORLD")
} 
```

我得到的输出令人惊讶

```
WORLD 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:38:41.453

这是因为 0.25 是 2 的幂（即 2^-2），而 0.8 不是。只有 2 的幂的精确和才能精确表示；`float`所有其他数字，包括 0.8，都表示为近似值，在和之间具有不同的精度`double`。`0.8`in`a==0.8`是一个，`double`while`a`是一个`float`。他们的表现不同，他们的价值观也不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T13:39:37.977

您绝不能像以前那样将`float`-values 与绝对值进行比较。通常会有轻微的舍入误差，因为浮点数是根据 IEEE 754 表示的，并且机器无法提供精确的浮点值。

在[这里](http://en.wikipedia.org/wiki/IEEE_floating_point)查看您的解释，尤其是舍入规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:23:55.990

您正在将 float 与 double 进行比较。尝试在数字后加一个 f

```
if(a==0.8f)
    printf("HELLO")
if(b==0.25f)
    printf("WORLD") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:44:18.530

给出的答案是正确的......在 Dobb 博士的 Andrew Koenig 正在写关于与浮动的订单关系的文章中，有一个观点：

[其难以比较的浮点数](http://www.drdobbs.com/cpp/its-hard-to-compare-floating-point-numbe/240149806)

[比较整数与浮点1](http://www.drdobbs.com/cpp/comparing-an-integer-with-a-floating-poi/240150323)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:33:15.590

一切最终都存储在位中......所以浮点数会被四舍五入，以防它们的二进制等价物重复出现......

# c++ - 解决 8 谜题游戏

> ID：15638450
> 
> 赞同：4
> 
> 时间：2013-03-26T13:37:30.613
> 
> 标签：c++, algorithm, distance, puzzle, sliding-tile-puzzle

我正在尝试用 C++ 编写一个 8 拼图游戏求解器，但在执行此操作时遇到了很多问题。该程序目前正在运行，但要解决这个难题需要太多步骤。我的意思是，有时它可以找到最佳解决方案，有时它需要多达 400 步才能解决。我的主要疑问如下。想象一下我有这个图表（这只是一个草稿）：

![在此处输入图像描述](../Images/3c87b2591aac1873b8d0c9a636efa432.png)

我使用曼哈顿距离作为启发式函数。在第一步之后，我们有两个状态，其中 f(n)=5，所以我扩展了树。展开后，我仍然得到两个 f(n)=2 的状态。这是我的疑问..我是否还需要扩展树直到我得到一个唯一的最低 f(n)？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:04:15.683

> 我还需要扩展树吗

你不能贪婪地解决这个难题：总是选择具有较低启发值的分支不会每次都引导你找到最终的解决方案。因此，您必须保留其他状态以进行回溯。扩展它们的顺序，无论是简单的 BFS 还是基于启发式的 A*，都取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:49:59.253

[在这里](http://concordia.sk/programming/machine-learning-robotics/192-eight-puzzle-game-solved-by-a-algorithm)您可以找到使用 A* 算法找到从初始状态到目标状态的最短路径的处理小程序。小程序中的代码是免费的。

# sql - 使用 Tablesample 的 Visual Basic RunSQL 语法错误

> ID：15638451
> 
> 赞同：0
> 
> 时间：2013-03-26T13:37:30.907
> 
> 标签：sql, vba, ms-access

我在 Microsoft Access 中有一个表单，可以将记录从文本文件导入到表中。原代码是这样的：

```
DoCmd.RunSQL "UPDATE QC_File SET QC_File.ToQC = 'x' " & _
"WHERE (((QC_File.ID) In (Select TOP " & VarPer & " PERCENT ID " & _
"FROM QC_File As DUPE " & _
"WHERE [DUPE].[HIST_USUS_ID] = [QC_File].[HIST_USUS_ID] And [DUPE].[Client1] = 'CLIENT' " & _
"ORDER BY [DUPE].[ID] DESC;)))"` 
```

此代码仅在我希望它随机抽取 10% 时才抓取 TOP 10%，因此我尝试了以下操作，但我不断收到错误消息（“查询表达式中的语法错误”）并且它没有指定错误发生在哪一行on，它只返回整个代码。

```
DoCmd.RunSQL "UPDATE QC_File SET QC_File.ToQC = 'x' " & _
"WHERE (((QC_File.ID) In (Select ID " & _
"FROM QC_File As DUPE Tablesample(10 PERCENT) " & _
"WHERE [DUPE].[HIST_USUS_ID] = [QC_File].[HIST_USUS_ID] And [DUPE].[Client1] = 'CLIENT' " & _
"ORDER BY [DUPE].[ID] DESC;)))" 
```

我已经尝试过使用`NEWID()`，但所做的只是以随机顺序返回前 10%。在Visual Basic 中写SQL 时不能使用Tablesample 命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:44:34.397

Access 将在子查询中反对此`FROM`子句：

```
FROM QC_File As DUPE Tablesample(10 PERCENT) 
```

`Tablesample()`Access SQL 中不支持。

我建议您构建一个新的 Access 查询，它可以从子查询中完成您想要的。一旦你有那个工作，把它用作子查询。

# ruby-on-rails - 如何在没有当前密码的情况下更改密码？

> ID：15638454
> 
> 赞同：4
> 
> 时间：2013-03-26T13:37:34.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用`devise`for `authentication`，我`role`为每个用户都有一个，我允许具有角色的用户创建新用户，如果他们忘记了密码`admin`，我希望管理员用户为其余用户创建新用户。`edit the password`但是我无法在没有当前密码的情况下更改密码。那么我如何允许管理员用户通过编辑用户密码来更改密码并像我们对其余值一样保存。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-08T19:47:56.367

由于`update_without_password`仍然需要`current_password`更新密码，因此您必须有`update`这样的：

```
 def update
    # required for settings form to submit when password is left blank
    if params[:user][:password].blank?
      params[:user].delete("password")
      params[:user].delete("password_confirmation")
    end

    @user = User.find(current_user.id)
    if @user.update_attributes(params[:user])
      set_flash_message :notice, :updated
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to after_update_path_for(@user)
    else
      render "edit"
    end
  end 
```

此示例用于更新当前用户（包括用户密码），但您可以对其进行修改以满足您的需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-27T07:51:17.050

```
@user.update_attributes(password: params[:user][:password]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:00:37.387

有一种内置的方法来设计，称为`update_without_password`.

这是我在更新方法中使用的内容：

```
 # PUT /manage_users/1
  # PUT /manage_users/1.json
  def update
    @user = User.find(params[:id])
    able_to_edit_profile?

    # required for settings form to submit when password is left blank
    if params[:user][:password].blank?
      params[:user].delete("password")
      params[:user].delete("password_confirmation")
    end

    respond_to do |format|
      if @user.update_attributes(params[:user])
        @user.save        

        # sign the user in with their new password so it doesn't redirect to the login screen
        sign_in @user, :bypass => true

        format.html { 
          flash[:notice] = 'User was successfully updated.'
          redirect_to session.delete(:return_to)
        }
        format.json { head :no_content }
      else
        format.html { render action: "edit", notice: 'Error updating user.' }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

private 

  # If the user is not an admin and trying to edit someone else's profile, redirect them
  def able_to_edit_profile?
    if !current_user.try(:admin?) && current_user.id != @user.id
      flash[:alert] = "That area is for administrators only."
      redirect_to :root
  end
  end 
```

# python - 从熊猫数据框中选择特定的行

> ID：15638458
> 
> 赞同：1
> 
> 时间：2013-03-26T13:38:01.500
> 
> 标签：python, numpy, pandas

我在 pandas 数据框中执行了分组，以查看每个位置和每个日期有多少行。

```
agg_count = df.groupby(['date', 'location']).count() 
```

现在我想查看这个新数据帧中满足特定条件的行。比如说，计数大于 50。我如何有效地迭代这个巨大的数据框来获取这些行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:52:35.690

从这个数据开始

```
In [275]: df = pd.DataFrame({'date': [20130101, 20130101, 20130102], 'location': ['a', 'a', 'c']})

In [276]: df
Out[276]:
       date location
0  20130101        a
1  20130101        a
2  20130102        c 
```

这将选择计数 > 1 的列

```
In [277]: df.groupby(['date', 'location']).apply(lambda sdf: sdf if len(sdf) > 1 else None)
Out[277]:
                         date location
date     location
20130101 a        0  20130101        a
                  1  20130101        a 
```

在下面删除多索引

```
In [278]: df.groupby(['date', 'location']).apply(lambda sdf: sdf if len(sdf) > 1 else None).reset_index(drop=True)
Out[278]:
       date location
0  20130101        a
1  20130101        a 
```

# c# - XML 空白命名空间

> ID：15638462
> 
> 赞同：1
> 
> 时间：2013-03-26T13:38:08.513
> 
> 标签：c#, xml, serialization, namespaces

我正在使用以下标头将对象序列化为 XML。

```
<agr:ABWInvoice 
    xmlns:agr="http://services.agresso.com/schema/ABWInvoice/2011/11/14"
    xsi:schemaLocation="http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd" 
    xmlns:agrlib="http://services.agresso.com/schema/ABWSchemaLib/2011/11/14" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 > 
```

但是，**我想要下面的东西：（**唯一的区别是第一个没有命名空间的 xmlns）

```
<agr:ABWInvoice 
   xmlns="http://services.agresso.com/schema/ABWInvoice/2011/11/14"
   xsi:schemaLocation="http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd" 
   xmlns:agrlib="http://services.agresso.com/schema/ABWSchemaLib/2011/11/14" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  > 
```

我使用以下代码：

```
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
ns.Add("agrlib", "http://services.agresso.com/schema/ABWSchemaLib/2006/11/20");
ns.Add("agr", "http://services.agresso.com/schema/ABWInvoice/2006/11/20");

XmlSerializer serializer = new XmlSerializer(typeof(ABWInvoice2006));
TextWriter textWriter = new StreamWriter(xmlFile);
serializer.Serialize(textWriter, abwInvoice, ns);
textWriter.Close(); 
```

我也尝试过以下操作，但没有提供所需的输出：

```
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
ns.Add("agrlib", "http://services.agresso.com/schema/ABWSchemaLib/2006/11/20");
ns.Add("", "http://services.agresso.com/schema/ABWInvoice/2006/11/20"); 
```

## 更新：

@Vladimir Frolov 引导我使用以下方法解决问题：

```
[Serializable]
[XmlRootAttribute(Namespace = "http://services.agresso.com/schema/ABWInvoice/2006/11/20", IsNullable = true)]
public class ABWInvoice2006
{
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:46:21.757

尝试在 XmlSerializer 构造函数中指定 XmlRootAttribute。这是一个[例子](http://msdn.microsoft.com/en-us/library/f1wczcys.aspx)。

# c# - 该类型在未引用的程序集中定义。您必须添加对程序集的引用

> ID：15638463
> 
> 赞同：0
> 
> 时间：2013-03-26T13:38:17.663
> 
> 标签：c#, ssis, assemblies

我已经有一段时间了，无法弄清楚原因是什么。

`Error 1 The type 'Google.Apis.Requests.IErrorResponseHandler' is defined in an assembly that is not referenced. You must add a reference to assembly 'Google.Apis, Version=1.2.4737.25313, Culture=neutral, PublicKeyToken=null'.
Error 2 The type 'Google.Apis.Authentication.IAuthenticator' is defined in an assembly that is not referenced. You must add a reference to assembly 'Google.Apis, Version=1.2.4737.25313, Culture=neutral, PublicKeyToken=null'.
Error 3 The type 'Google.Apis.Discovery.IRequestProvider' is defined in an assembly that is not referenced. You must add a reference to assembly 'Google.Apis, Version=1.2.4737.25316, Culture=neutral, PublicKeyToken=null'.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:27:34.103

为了让 SSIS 找到 DLL，它需要位于 GAC**中以及****SSIS**用来查找组件的路径中的某个位置。**特定版本**框架的 .NET Framework 文件夹是放置它的好地方；这将适用于 .NET Framework 2.0（这是 SSIS 2005 和 2008R2 使用的）或 .NET Framework 4.0（我相信这是 SSIS 2012 使用的）。****`C:\Windows\Microsoft.NET\Framework\v2.0.50727``C:\Windows\Microsoft.NET\Framework\v4.0.30319`****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:40:50.597

您需要添加对项目的引用：

转到`Solution Explorer`窗口，展开项目的节点（如果尚未展开），右键单击`References`，浏览程序集所在的位置（如果已在 GAC 中，请从框架列表中选择它），添加引用。****

# python - 如果在模板中求值则损坏

> ID：15638468
> 
> 赞同：0
> 
> 时间：2013-03-26T13:38:29.627
> 
> 标签：python, django

我在 Django 模板中有一个条件，如果表达式的计算结果为 true，它将创建某种颜色的文本，如果不是，则创建另一种颜色。请注意，我实际上不会像本示例中那样在 HTML 中包含我的样式，但是这样可以更容易地给出示例。这是代码：

```
 <div class="span6 resultsBox">
        <h2>Items:  
            {% if user.items >= user.itemsQuota %}
            <span id="items" style="color:green">{{ user.items}} </span>
            {% else %}
            <span id="items" style="color:white">{{ user.items }} </span>
            {% endif %} 
            / {{user.itemsQuota }}.
        </h2><br />
    </div> 
```

无论我做什么，生成的`span`文本都是绿色的！通常我会认为我的模型以及它们如何计算相等性有问题，但是即使输出类似于`100/1000`，显然`{{ user.items }}`小于`{{ user.itemsQuota }}`，也会出现绿色字体！我的条件句在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:47:39.340

我的猜测`user.items`是一个字符串并且`user.itemsQuota`是一个数字。在 Python（3.x 之前）中，`'100' > 1000`为 True。

快速演示：

```
from django.template import Template, Context
from django.conf import settings

settings.configure()

t = Template('{% if a > b %} a > b {% else %} a <= b {% endif %}')
print t.render(Context({ 'a' : '100', 'b' : 1000 }))
print t.render(Context({ 'a' : 100  , 'b' : 1000 })) 
```

印刷：

```
a > b 
a <= b 
```

如果您想要仅模板的解决方案，则可以使用：

```
t = Template('{% if a|add:"0" > b|add:"0" %} a > b {% else %} a <= b {% endif %}') 
```

（因为`add`将值强制为整数）

# ruby - 尝试在 VM 中设置 Discourse 但 Ruby 找不到 Gemfile

> ID：15638475
> 
> 赞同：2
> 
> 时间：2013-03-26T13:38:54.200
> 
> 标签：ruby, virtualbox, vagrant, discourse

我正在尝试按照 Github 上的 Vagrant 说明设置[Discourse 。](http://www.discourse.org/)我在 Windows 机器上，所以我下载了 VM 并启动了它，然后我使用 putty ssh 并尝试开始设置 Discourse。当我键入时，`bundle install`我收到一条消息，上面写着`Bundler::GemfileNotFound`。我从这里去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:53:14.673

Vagrant 将 Discourse 源安装到`/vagrant`. 当您运行`vagrant ssh`（或使用 Putty SSH 进入 VM）时，您将位于 vagrant 用户的主目录（`postinstall.sh`文件所在的位置）。因此，只需键入`cd /vagrant`，您就可以继续。我不确定他们是否只是在自述文件中省略了这一点，或者您是否通常最终会出现`/vagrant`问题。我对它进行了测试，并且也`/home/vagrant`像您一样使用了它。

注意：`@precise32`是 VM 的主机名，而不是目录 ( `~`)。

# sharepoint - 如何用自定义替换标准富文本编辑？

> ID：15638476
> 
> 赞同：1
> 
> 时间：2013-03-26T13:38:56.030
> 
> 标签：sharepoint, sharepoint-2013

我无法在 SharePoint 2013 中用我的标准富文本编辑替换。

* * *

在 SharePoint 2010 及更早版本中，我使用了 aspx 标记，如下所示：

```
<SharePoint:RenderingTemplate ID="RichTextField" runat="server">
    <Template>
               ...
    </Template>
</SharePoint:RenderingTemplate> 
```

在文件夹中的一个特殊 ascx 文件中（14 - 对于 SharePoint 2010）：c:\Program Files\Common Files\microsoft shared\Web Server Extensions\14\TEMPLATE\CONTROLTEMPLATES\

* * *

此外，在 SharePoint 2013 中，如果我更改以下标准标记，则它不起作用：

```
 RenderingTemplate ID="RichTextField" 
```

模板，在 DefaultTemplates.ascx 文件中，或者即使我删除 DefaultTemplates.ascx 文件，它在 SharePoint2013 中也没有任何改变！

* * *

有没有人知道是否可以用自定义的富文本编辑替换标准的富文本编辑？

# forms - Webmatrix 中 Response.Redirect 的替代方案

> ID：15638477
> 
> 赞同：2
> 
> 时间：2013-03-26T13:38:58.870
> 
> 标签：forms, variables, webmatrix, response.redirect

我正在为机械师写一个检查清单，所以一切都使用单选按钮和下拉菜单（废话！）。可能有超过 50 个项目，因此在 url 中传递值会很混乱。如果我使用 POST 发送表单，所有变量值都会被传递，但我需要使用 Response.Redirect 来让表单写入数据库并阻止变量传递到下一页。我已经尝试过 META 刷新和 Response.StatusCode = 307; 但到目前为止没有任何效果。这里是第一页......

```
@{

var UNITNO = "";
var DATE = DateTime.Now;
var MECHANIC = "";
var HEADLIGHTS = "";
var TailStopSignalHazard = "";

   if(IsPost)
   { 

UNITNO = Request.Form["UNITNO"];
MECHANIC = Request.Form["MECHANIC"];
HEADLIGHTS = Request.Form["HEADLIGHTS"];
TailStopSignalHazard = Request.Form["TailStopSignalHazard"];

    var db = Database.Open("MAINT");
    var insertCommand = "INSERT INTO CHECKLIST (UNITNO, DATE, MECHANIC, HEADLIGHTS, TailStopSignalHazard) Values(@0, @1, @2, @3 ,@4)";
    db.Execute(insertCommand, UNITNO, DATE, MECHANIC, HEADLIGHTS, TailStopSignalHazard);
    Response.StatusCode = 307;
    Response.Redirect("list.cshtml");
    //<META http-equiv="REFRESH" content="0; url=list.cshtml">    
}

<script type="text/javascript">
function validateForm() {
    var aa = document.getElementById("UNITNO");
    var ac = document.getElementById("MECHANIC");
    var xx = document.getElementsByName("HEADLIGHTS");
    var xz = document.getElementsByName("TailStopSignalHazard");

    if (aa.options[aa.selectedIndex].index == 0) { alert("Must enter Unit Number"); return false; }
    if (ac.options[ac.selectedIndex].index == 0) { alert("Must enter Mechanic"); return false; }
    if (xx[0].checked == false && xx[1].checked == false) { alert("Must enter Headlights"); return false; }
    if (xz[0].checked == false && xz[1].checked == false) { alert("Must enter Tail/Stop/Signal/Hazard"); return false; }
}
</script>
}

<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" />
    <title>Western Check List</title>
</head>

<body>

  <h1>Western Disposal</h1>
  <!-- <form method="post" onsubmit="return validateForm()" action="list.cshtml"> //-->
  <form method="post" onsubmit="return validateForm()">
  <fieldset>
  <legend>Check List</legend>
        &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp

        <script>
        date=Date()
        document.write(date)
        </script> 

<p>
        <label> Unit Number: </label> 
        <select name="UNITNO">
        <option value=""></option>
        <option value="108">108</option>
        <option value="110">110</option>
        <option value="111">111</option> 
        </select>  
 </p>

 <p>
        <label>Mechanic:</label>
        <select name="MECHANIC" >
        <option value=""></option>
        <option value="BOB">BOB</option>
        <option value="DANIEL">DANIEL</option>
        <option value="DOUG">DOUG</option>
        </select>
 </p>

 <p>
   <b>  LIGHTING:  </b>
 </br>
     <label>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &rlm; &nbsp Head Lights:</label>
     <input type="RADIO"  name="HEADLIGHTS" value="GOOD"/>GOOD &nbsp &nbsp
     <input type="RADIO"  name="HEADLIGHTS" value="BAD"/>BAD

   </br>
     <label>&nbsp Tail/Stop/Signal/Hazard:</label>
     <input type="RADIO" name="TailStopSignalHazard" value="GOOD"/>GOOD &nbsp &nbsp
     <input type="RADIO" name="TailStopSignalHazard" value="BAD"/>BAD

 </p>

  <p><input type="submit" value="POST"/></p>
 </fieldset>
  </form>

 </body>

 </html> 
```

然后我用这个检查第二页上的数据库和“UNITNO”的值......

```
 @{
var db=Database.Open("MAINT");
var grid=new WebGrid(db.Query("SELECT * FROM CHECKLIST ORDER BY ID"));
 }
 <!DOCTYPE html>
  <html>
  <head>
    <title>Western Check List Data Base</title>
    <style type="text/css">
        table {border-collapse:  collapse;}
        td, th {border:  solid 1px; }
    </style>
   </head>
    <body>
     <h1>Western Check List Data Base</h1>
    @grid.GetHtml()
    <a href="Default.cshtml">RETURN</a>
    &nbsp &nbsp &nbsp &nbsp the unit number was="@Request["UNITNO"]"
    </body>

      </html> 
```

我是 webmatrix 的新手和脚本新手，所以请原谅我的无知。我希望有人对我的问题有一个简单的解决方案，我也尝试了全局变量，但要么我没有正确格式化它，要么它也不起作用。谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T22:31:19.200

尝试

```
Response.Redirect("list.cshtml/" + Request.Form["UNITNO"]); 
```

我发现使用

```
Response.Redirect("list.cshtml?UNITNO=" + Request.Form["UNITNO"]); 
```

确实有效，但是如果您在表单的开头使用 var UNITNO ，那么 URL 将传递 list.cshtml=UNITO xxx 无论 UNITNO 是什么，它并不总是通过，具体取决于您在表单中获取 URL var 的方式。

只需用简单的 / 替换 ?UNITNO 即可，该请求对我来说效果很好。

但是已经给出的答案也将起作用，所以我正在敲它，但我发现我遇到了问题，并用这种对我有用的方法调整了原始答案。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T16:20:38.160

您可以将一些数据传递给重定向上的第二个脚本：

```
Response.Redirect("list.cshtml?UNITNO=" + Request.Form["UNITNO"]); 
```

但是，如果您需要发送大量数据，那可能会变得混乱。更好的方法是发送新创建记录的数据库 ID。然后，您可以在第二个脚本上再次打开它并读取并显示您喜欢的任何数据：

```
Response.Redirect("list.cshtml?id=" + db.GetLastInsertId()); 
```

我自己的一般规则是，如果我正在执行重定向并需要维护数据，我可能应该考虑重构代码以尽可能不需要它 - 但上面的解决方案应该有效。

# gwt - 如何使用 GWT、maven、jacoco 设置覆盖范围？

> ID：15638478
> 
> 赞同：0
> 
> 时间：2013-03-26T13:39:01.257
> 
> 标签：gwt, maven, code-coverage, jacoco

我正在尝试为我的 GWT Maven 项目生成代码覆盖率。

它适用于我的 jUnit 测试

```
mvn test jacoco:report 
```

但是当我跑步时

```
mvn gwt:test jacoco:report 
```

生成一个空报告。

运行 gwt:tests 时如何获得代码覆盖率？

Pom.xml

总重量：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>2.5.1</version>
<configuration>
    <module>${gwtModule}</module>
    <gwtVersion>2.5.1</gwtVersion>
    <runTarget>https://localhost:8443/dashboard/mainview.jsp</runTarget>
    <noServer>true</noServer>
    <sourcesOnPath>true</sourcesOnPath>
    <hostedWebapp>${war.target}</hostedWebapp>
    <mode>HtmlUnit</mode>
</configuration>
<executions>
    <execution>
        <configuration>
            <extraJvmArgs>-Xmx512m</extraJvmArgs>
        </configuration>
        <goals>
            <goal>compile</goal>
            <goal>test</goal>
        </goals>
    </execution>
</executions> 
```

雅可可：

```
<plugin>
<groupId>org.jacoco</groupId>
<artifactId>jacoco-maven-plugin</artifactId>
<version>0.6.2.201302030002</version>
<configuration>
    <destfile>${basedir}/target/coverage-reports/jacoco-unit.exec</destfile>
    <datafile>${basedir}/target/coverage-reports/jacoco-unit.exec</datafile>
</configuration>
<executions>
    <execution>
        <id>jacoco-initialize</id>
        <goals>
            <goal>prepare-agent</goal>
        </goals>
    </execution>
    <execution>
        <id>jacoco-site</id>
        <phase>package</phase>
        <goals>
            <goal>report</goal>
        </goals>
    </execution>
</executions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T21:59:29.843

在命令行中输入此命令'

```
mvn help:describe -Dplugin=org.jboss.errai:jacoco-gwt-maven-plugin -Ddetail=true 
```

您将从 jacoco-gwt-maven-plugin 获得详细的输出。在此列表中，您可以看到所有可以设置的配置参数。您在创建报告时出现错误时出现的错误： basedir c:\Users...... 不存在与您在运行我上面指定的命令时看到的 snapshotDirectory 设置有关。当您的项目编译时，它会创建一个放置所有运行时类的文件夹。你需要找到你的 maven pom 将这些类文件放在哪里，然后在你的 pom.xml 中指定这个路径。所以说你的类文件的路径位置是'target/test-classes'，那么你的 pom 将是：

```
<plugin>
  <groupId>org.jboss.errai</groupId>
  <artifactId>jacoco-gwt-maven-plugin</artifactId>
  <version>0.5.4.201202141554</version>
  <configuration>
    <snapshotDirectory>${project.build.directory}/test-classes</snapshotDirectory>
  </configuration>
</plugin> 
```

kesse 还要注意的另一件事是，您最初的问题与 org.jacoco 中的 jacoco-maven-plugin 有关。我也未能使用此插件与 GWT 测试用例一起获得覆盖结果。但是，上面的 Thomas Broyer 将您指向 org.jboss.errai 组中的 jacoco-gwt-maven-plugin。这个 Errai 组是 JBoss 开发者社区的一部分，这个插件与 Errai 框架有关。因此，为了使用 GWT 测试用例从 Errai 插件获取代码覆盖率结果，您必须使用 Errai 框架。要了解有关 Errai 框架的更多信息，请访问[http://errai.github.io/](http://errai.github.io/)。

# android - Android 上的 GoogleMaps 显示灰色方块

> ID：15638482
> 
> 赞同：0
> 
> 时间：2013-03-26T13:39:09.693
> 
> 标签：android, google-maps, api-key

我有一个同事的 Eclipse Android 项目，我需要继续进行开发。当我从他的项目的 bin 目录安装 .apk 文件时，一切正常，谷歌地图正在工作。但是，当我将项目导入 Eclipse，然后使用导入项目生成的 .apk 文件时，谷歌地图无法正常工作。屏幕上是灰色的小方块，而不是谷歌地图。问题可能出在 API 密钥中吗？我正在使用同事在他的计算机上生成的密钥。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:52:38.720

在每台计算机上，如果您使用 Google 地图应用程序，您必须`SHA1`为这台特定机器生成您自己的密钥，并通过 Google API 控制台连同您的应用程序包名称一起注册它。

你可以查看我写的这篇博客文章：

[获取您的 Google Map API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:42:25.357

您似乎正在使用您的同事调试密钥或他创建的部署密钥。你要么有两个选择。

1.  使用您自己的调试密钥注册 API 访问
2.  获取他的调试密钥并覆盖您自己的调试密钥

# asp.net - 从后面的代码运行 JQuery 对话框窗口

> ID：15638484
> 
> 赞同：0
> 
> 时间：2013-03-26T13:39:11.303
> 
> 标签：asp.net, c#-2.0

我想从 onClick 按钮后面的代码中打开对话框窗口。如何运行脚本？

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <div id="dialog" title="Alert!!!" style="display: none;">
        <p>
            Lorem Ipsum
        </p>
    </div>

        private void InitializeComponent()
        {
            this.ImageButton1.Click += new System.Web.UI.ImageClickEventHandler(this.ImageButton1_Click);
            this.Load += new System.EventHandler(this.Page_Load);
        }

        private void ImageButton1_Click(object sender, System.Web.UI.ImageClickEventArgs e)
        {
            //Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "script", "$(function() {$('#dialog').dialog('open');});", true);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:17:11.380

尝试这个

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "script", "<script> $('#dialog').dialog('open');return false;  </script>"); 
```

# ruby - Ruby：获取变量名

> ID：15638486
> 
> 赞同：10
> 
> 时间：2013-03-26T13:39:12.653
> 
> 标签：ruby

如何获得变量名？例如，

```
def get_var_name(var)
  # return variable name
end

myname = nil
get_var_name myname #=> myname 
```

初始目的：

```
somevar = "value"

puti somevar #=> somevar = "value"
# that is a shortage for
# `puts "somevar = #{somevar.inspect}"` 
```

我的尝试：

```
def puti(symb)
  var_name  = symb.to_s
  var_value = eval(var_name)
  puts "#{var_name} = #{var_value.inspect}"
end
puti :@somevar # that actually will work only with class vars or whatever considering var scope; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T14:03:20.173

您需要跨越当前变量范围的绑定，您可以使用[Binding 类](http://www.ruby-doc.org/core-2.0/Binding.html)：

```
def puti(symb, the_binding)
  var_name  = symb.to_s
  var_value = eval(var_name, the_binding)
  puts "#{var_name} = #{var_value.inspect}"
end

somevar = 3

puti :somevar, binding   # Call the binding() method

   #=> outputs "somevar = 3" 
```

该`binding()`方法提供一个 Binding 对象，该对象记住调用该方法时的上下文。然后将绑定传递给`eval()`，它会在该上下文中评估变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:43:40.240

首先，您不能实现`puti`直接调用`puti a_var`来获取输出为`a_var = value of a_var`. 在 的主体中`puti`，Ruby 只能看到 的形参名称`puti`，无法推断出实际的参数名称。

在 C/C++ 等其他语言中，您可以使用[**宏**](http://gcc.gnu.org/onlinedocs/cpp/Macros.html)来实现您的`puti`. 那是另一个故事。

但是，您可以在[Continuation](http://ruby-doc.org/core-2.0/Continuation.html)`put :a_var`的帮助下实施。在另一个问题“ [Can you eval code in the context of a caller in Ruby?](https://stackoverflow.com/questions/1356749) ”中，[Sony Santos](https://stackoverflow.com/users/632916/sony-santos)提供了一个[caller_binding](http://rubychallenger.blogspot.com/2011/07/caller-binding.html)实现来获取调用者的绑定（类似于 perl 调用者函数）。

应该稍微改变实现，因为`callcc`在第一次返回时返回块的返回值。所以你会得到一个`Continuation`而不是的实例`nil`。这是更新的版本：

```
require 'continuation' if RUBY_VERSION >= '1.9.0'

def caller_binding
  cc = nil     # must be present to work within lambda
  count = 0    # counter of returns

  set_trace_func lambda { |event, file, lineno, id, binding, klass|
    # First return gets to the caller of this method
    # (which already know its own binding).
    # Second return gets to the caller of the caller.
    # That's we want!
    if count == 2
      set_trace_func nil
      # Will return the binding to the callcc below.
      cc.call binding
    elsif event == "return"
      count += 1
    end
  }
  # First time it'll set the cc and return nil to the caller.
  # So it's important to the caller to return again
  # if it gets nil, then we get the second return.
  # Second time it'll return the binding.
  return callcc { |cont| cc = cont; nil }
end

# Example of use:

def puti *vars
  return unless bnd = caller_binding
  vars.each do |s|
    value = eval s.to_s, bnd
    puts "#{s} = #{value.inspect}"
  end
end

a = 1
b = 2
puti :a, :b
e = 1 # place holder...

# => a = 1
#    b = 2 
```

注意`puti`不应该是程序的最后一条语句，否则 ruby​​ 解释器将立即终止并且跟踪函数没有机会运行。这就是最后一个“占位符”行的重点。

# c++ - 数组初始化语法

> ID：15638489
> 
> 赞同：0
> 
> 时间：2013-03-26T13:39:15.227
> 
> 标签：c++, arrays

我刚刚在代码中遇到过这个，我不明白它在做什么，或者它是如何做的

```
pos[iter](1) += 12.0f / 900.0f; 
```

(1) 是否将位置 iter 处的数组值初始化为 1，然后将 (12.0f / 900.0f) 添加到它？我不敢相信它在循环中用于设置调试文本的位置，每个循环都将下面的下一行设置为高 y 值（屏幕上的较低点）。iter 可以是 0 或 1，具体取决于调试文本所在的列表。

我会理解它是否是静态操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:41:47.397

```
pos[iter](1) += 12.0f / 900.0f; 
```

`pos`可以是数组、映射或具有重载的类的对象`operator[]`。`pos[iter]`返回一个对象（可以是函数指针、[lambda](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)或具有重载 的类`operator()`）并使用参数 1 调用它。函数调用很可能返回对返回对象的引用，因为您可以使用`+=`.

所以说清楚，`(1)`不是访问任何东西的第二个元素。它只是使用该参数调用函数或方法。该方法返回一些具有适当重载的对象`operator +=`（可以是标量或实际类）。

# c++ - 此代码如何从链接器中隐藏符号？

> ID：15638490
> 
> 赞同：0
> 
> 时间：2013-03-26T13:39:15.970
> 
> 标签：c++, objective-c, cocos2d-iphone

在 SceneView.h 中：

```
#ifndef ProtoAlpha_SceneView_h
#define ProtoAlpha_SceneView_h

#include "cocos2d.h"
#include "SceneModel.h"
#include "SceneController.h"
#include "CharacterModel.h"
#include "CharacterDerived.h"

USING_NS_CC;

class SceneView : public CCLayer {
private:
    static SceneModel* sceneModel;
    static SceneView* sceneViewLayer;
    static SceneController* sceneControllerLayer;
    CharacterModel* t1;
    CharacterModel* t2;
    CCSprite* t1Sprite;

    // scheduled Update 
    void update(float dt); 
```

在 SceneView.ccp 中：

```
CCScene* SceneView::scene() {
    // 'scene' is an autorelease object
    CCScene* scene = CCScene::create();

    // 'layer' is an autorelease object
    sceneModel = new SceneModel;
    sceneViewLayer = SceneView::create();
    sceneControllerLayer = new SceneController(*sceneModel->buffer);

    // add layer as a child to scene
    scene->addChild(sceneViewLayer);
    scene->addChild(sceneControllerLayer);

    // return the scene
    return scene;
} 
```

和错误：

```
Undefined symbols for architecture i386:
  "SceneView::sceneModel", referenced from:
      SceneView::scene() in SceneView.o
      SceneView::update(float) in SceneView.o
  "SceneView::sceneViewLayer", referenced from:
      SceneView::scene() in SceneView.o
  "SceneView::sceneControllerLayer", referenced from:
      SceneView::scene() in SceneView.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我要注释掉 .ccp 文件中的代码，链接器错误就会消失，因此不太可能是编译源错误。

通过一些搜索，我发现一些人提到此代码的符号可能有些隐藏，我希望了解这里实际发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:44:18.717

```
static SceneModel* sceneModel;
static SceneView* sceneViewLayer;
static SceneController* sceneControllerLayer; 
```

这些都是不是定义的声明，因为它们是`static`. 您还需要为这些成员提供定义：

```
SceneModel* SceneView::sceneModel;
SceneView* SceneView::sceneViewLayer;
SceneController* SceneView::sceneControllerLayer; 
```

确保这些仅在一个翻译单元中（可能在 中`SceneView.cpp`），否则您将违反一个定义规则。

# c# - .NET 控制台应用程序中的计划事件？

> ID：15638495
> 
> 赞同：2
> 
> 时间：2013-03-26T13:39:28.123
> 
> 标签：c#, .net

我有一个函数，我想在每天晚上 11:59 调用它。控制台应用程序将 24/7 全天候运行。

我的第一个想法是每分钟运行一次计时器并检查它是否是晚上 11 点 59 分，但我想知道 .Net 是否有更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T13:41:19.950

控制台应用程序 + Windows 计划任务是最简单的解决方案。

对于更复杂的调度需求，请查看[Quartz.NET](http://quartznet.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:44:02.047

您应该使用 Windows 服务自动执行此操作。该服务应在服务中注册。Windows 服务控制器管理器具有计时器选项以在特定时间自动触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:45:32.803

这是任务调度程序的快照，使用一些参数创建您的控制台应用程序，然后在那里添加一个任务。

![在此处输入图像描述](../Images/49f260a5724557a4a93eac0eb5e318b0.png)

# scripting - 如何使用单行 sed 命令既删除一行又追加另一行？

> ID：15638497
> 
> 赞同：1
> 
> 时间：2013-03-26T13:39:33.080
> 
> 标签：scripting, sed

我知道如何使用 sed 进行删除和替换，但是我在使用 append 命令时遇到了问题。现在，我正在这样做：

```
sed -i '' -e '/optima/d' file 
```

这将从文件中删除正确的行（假设它存在）。但是，我还想在文件末尾添加另一行，我不能在第二行使用“echo something >> file”。我什至不能使用第二次 sed 调用。

这样做的语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-16T12:10:30.820

这里更好的方法是打印除要删除的行之外的所有内容，然后附加最后一行。即使您要删除的行是最后一行，这也有效，而 Kent 的方法不适用于这种情况。

```
sed -i -n -e '/optima/!p' -e '$asomething' file 
```

例子：

```
$ seq 5 | sed -n -e '/5/!p' -e '$asomething'
1
2
4
something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:43:36.270

> 我还想在文件末尾添加另一行...

尝试这个：

```
sed -i ''  '/optima/d; $a \something' file 
```

例子：

```
kent$ seq 20|sed '/3/d; $a \yourText'
1
2
4
5
6
7
8
9
10
11
12
14
15
16
17
18
19
20
yourText 
```

# c# - 禁用背景滚动

> ID：15638499
> 
> 赞同：1
> 
> 时间：2013-03-26T13:39:36.427
> 
> 标签：c#, javascript, jquery, asp.net, css

我有一个 asp:LinkBut​​ton 在点击时显示一个 div。在显示 div 时，我想禁用背景页面（aspx 页面）的滚动。怎么做？我已经申请了溢出：隐藏；身体的 css 属性。它在浏览器中运行良好，但在三星 Galaxy 平板电脑 2.2 版和索尼爱立信 4.0.4 版等移动设备中运行良好。我想在移动设备中查看我的应用程序时禁用页面滚动。

请帮忙。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:43:09.487

设置溢出：滚动；在正文和 HTML 上。还将位置设置为固定，位置：固定；。

# android - 黑莓无法点击谷歌地图

> ID：15638502
> 
> 赞同：1
> 
> 时间：2013-03-26T13:39:39.453
> 
> 标签：android, ios, cordova, jquery-mobile, blackberry

我正在Phonegap 上构建一个移动应用程序，实现jQuery Mobile。我正在黑莓、Ios 和 Android 上构建相同的应用程序。Ios 和 Android 谷歌地图按预期工作：您可以单击地图，我有一个事件侦听器在该事件上调用网络服务。但在黑莓上，地图不可滚动（已修复）且地图不可点击。有任何想法吗？

我的框架很广泛，但相关代码如下：

```
GpsLinkClicked: function()
    {
        kmTolerance="100";

       model.getLocation(); 

       setTimeout(function()
       {
           doneWithSections=app.save("doneWithSections", '');

           var script = document.createElement("script");
           script.type = "text/javascript";
           script.src = "http://maps.googleapis.com/maps/api/js?key=mykeyishere&sensor=false&callback=model.initializeMap";
           document.body.appendChild(script);

       },1000);
    },

    initializeMap: function() 
    {
            currentLocation=app.get('currentLocation');
            currentLocation=$.parseJSON(currentLocation);

            var myLatlng = new google.maps.LatLng(currentLocation.latitude, currentLocation.longitude);

            var mapOptions = {
              zoom: 16,
              center: myLatlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            }

            var map = new google.maps.Map(document.getElementById("content-dataview"), mapOptions);

            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                title:"My Location"
            });

            google.maps.event.addListener(map, 'click', function(event) {
                model.mapClicked(event.latLng);
            });

            $("#content-dataview").attr("style", "height: 480px");
            $("#content-dataview").trigger( "updatelayout" );
      },

      mapClicked: function(location) 
      {
          loc=JSON.stringify(location);
          locObj=$.parseJSON(loc);

          var data={
              latitude: locObj.kb,
              longitude: locObj.lb,
              kmTolerance: "0.2"
          };

          model.callAjax("GetLookupsWithGps", "POST", JSON.stringify(data));
      }, 
```

# ios - 添加一个 CALayer 作为 UIView 中居中的子层

> ID：15638505
> 
> 赞同：3
> 
> 时间：2013-03-26T13:39:43.983
> 
> 标签：ios, objective-c, calayer

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我想`CALayer`在 an 里面添加一个`UIView`，这`CALayer`将小于`UIView`. 我想模拟某种边距。

```
static int const NSLayerX       = 0;
static int const NSLayerY       = 0;
static int const NSLayerWidth   = 60;
static int const NSLayerHeight  = 60;

- (void)setBackgroundLayer:(UIColor*)startColor endColor:(UIColor*)endColor cornerRadius:(int)radius
{
    backgroundGradientLayer  = [CAGradientLayer layer];
    backgroundGradientLayer.frame = CGRectMake(NSLayerX, NSLayerY, NSLayerWidth, NSLayerHeight);
    backgroundGradientLayer.cornerRadius = radius;
    backgroundGradientLayer.colors =
    [NSArray arrayWithObjects:(id)[startColor CGColor], (id)[endColor CGColor], nil];
    [self.layer insertSublayer:backgroundGradientLayer atIndex:0];
} 
```

但我不知道如何将其设置为居中。

**我必须更改 NSLayerX 和 NSLayerY 的值吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T13:14:17.590

分配层的框架如下。

```
backgroundGradientLayer.frame = CGRectMake(self.frame.size.width/4,  self.frame.size.height/4, self.frame.size.width/2, self.frame.size.height/2); 
```

# apache - 在 debian 6 上安装 Munin 并获得 403

> ID：15638507
> 
> 赞同：1
> 
> 时间：2013-03-26T13:39:49.170
> 
> 标签：apache, munin

我已经在我的服务器上安装了 Munin，但是当我尝试访问 mypage.com/munin 时出现 403 错误：禁止访问，您无权访问此服务器上的 /munin/。

我的配置如下：

*   节点和主节点安装在同一台服务器上。
*   文件 /etc/munin/apache.conf 有如下配置

    ```
     Alias /munin /var/cache/munin/www
     <Directory /var/cache/munin/www>
        Order allow,deny
        Allow from all
        Options FollowSymLinks SymLinksIfOwnerMatch
        <IfModule mod_expires.c>
           ExpiresActive On
           ExpiresDefault M310
        </IfModule>
    </Directory> 
    ```

*   munin conf 是 /etc/munin/munin.conf

    ```
    dbdir   /var/lib/munin
    htmldir /var/cache/munin/www
    logdir /var/log/munin
    rundir  /var/run/munin
    ....
    [myserver]
        address 127.0.0.1
        use_node_name yes 
    ```

*   而节点配置（/etc/munin/munin-node.conf）是默认配置。

在文件夹 /var/cache/munin/www 中没有生成图表，因为这个文件夹是空的，而且没有生成日志，我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:41:22.940

使用新版Munin 2.0！

创建和编辑 /etc/apt/sources.list.d/backports.list 并添加：

```
deb http://backports.debian.org/debian-backports squeeze-backports main 
```

更新存储库，然后安装 munin

```
# apt-get update
# apt-get install munin -t squeeze-backports 
```

这个版本的 Munin 默认使用 CGI 来生成 HTML 和 GRAPH。所以在配置虚拟主机之前一定要这样做：

```
# apt-get install libapache2-mod-fcgid
# a2enmod fcgid 
```

配置您的虚拟主机：

```
 <VirtualHost *:80>
        DocumentRoot /var/cache/munin/www
        ServerName munin.example.com
        Alias /static /etc/munin/static
        # Rewrites
        RewriteEngine On
        # HTML
        RewriteCond %{REQUEST_URI} !^/static
        RewriteCond %{REQUEST_URI} .html$ [or]
        RewriteCond %{REQUEST_URI} =/
        RewriteRule ^/(.*)           /usr/lib/munin/cgi/munin-cgi-html/$1 [L]
        # Images
        # - remove path to munin-cgi-graph, if present
        RewriteRule ^/munin-cgi/munin-cgi-graph/(.*) /$1
        RewriteCond %{REQUEST_URI}                 !^/static
        RewriteCond %{REQUEST_URI}                 .png$
        RewriteRule ^/(.*)  /usr/lib/munin/cgi/munin-cgi-graph/$1 [L]
        # Ensure we can run (fast)cgi scripts
        ScriptAlias /munin-cgi/munin-cgi-graph /usr/lib/munin/cgi/munin-cgi-graph
        <Location /munin-cgi/munin-cgi-graph>
                Options +ExecCGI
                <IfModule mod_fcgid.c>
                        SetHandler fcgid-script
                </IfModule>
                <IfModule !mod_fcgid.c>
                        SetHandler cgi-script
                </IfModule>
                Allow from all
        </Location>
        ScriptAlias /munin-cgi/munin-cgi-html /usr/lib/munin/cgi/munin-cgi-html
        <Location /munin-cgi/munin-cgi-html>
                Options +ExecCGI
                <IfModule mod_fcgid.c>
                        SetHandler fcgid-script
                </IfModule>
                <IfModule !mod_fcgid.c>
                        SetHandler cgi-script
                </IfModule>
                Allow from all
        </Location>
        <Location />
                Options +ExecCGI
                <IfModule mod_fcgid.c>
                        SetHandler fcgid-script
                </IfModule>
                <IfModule !mod_fcgid.c>
                        SetHandler cgi-script
                </IfModule>
                Allow from all
        </Location>
        <Location /static/>
                SetHandler None
                Allow from all
        </Location>
        <Directory /var/cache/munin/www>
                Order allow,deny
                #Allow from localhost 127.0.0.0/8 ::1
                Allow from all
                Options None
                # Set the default expiration time for files to 5 minutes 10 seconds from
                # their creation (modification) time.  There are probably new files by
                # that time.
                #
            <IfModule mod_expires.c>
                ExpiresActive On
                ExpiresDefault M310
            </IfModule>
        </Directory>
</VirtualHost> 
```

最后，开始享受新版本的穆宁

```
# a2ensite munin
# /etc/init.d/apache2 reload 
```

现在您可以在几分钟后访问[http://munin.example.com中的 munin。](http://munin.example.com)让munin先收集一些数据。

# php - 按类别 slug 获取一个类别的所有帖子 ID

> ID：15638510
> 
> 赞同：0
> 
> 时间：2013-03-26T13:39:54.050
> 
> 标签：php, wordpress

我想通过使用它的名称（例如“最受欢迎”）来获取一个类别下的所有帖子。我该怎么做呢？

这是我尝试过的，但失败了。

```
<?php
                    global $post;
                    $id = array();
                    $i=0;
                    $args = array( 'numberposts' => 5, 'category' => "most-popular", 'post_status' => "publish", 'order'=>"ASC");
                    $myposts = get_posts( $args );
                    foreach( $myposts as $post ) :  
                        setup_postdata($post); 
                        $id[$i]=$post->ID;
                        $i=$i+1;
                    endforeach; 

                    $article1= new Article($id[0]); 
                                            $article2= new Article($id[1]); //and so on.
                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:29:48.647

您可能必须`id`通过调用来获得第一个`get_category_by_slug( $slug )`。所以也许是这样的：

```
$category = get_category_by_slug( 'most-popular' );
$args = array( 'numberposts' => 5, 'category' => $category->term_id, 'post_status' =>  "publish", 'order'=>"ASC"); 
```

# hitcounter - 如何计算一个 Div 被查看的次数？

> ID：15638513
> 
> 赞同：0
> 
> 时间：2013-03-26T13:40:08.783
> 
> 标签：hitcounter

我需要计算一个 div 被查看了多少次。大多数命中计数器计算页面加载的次数，但我想计算查看 div 的次数。这个 div 位于不同的页面上，我需要知道它总共被查看了多少次......不管它是在哪个页面上查看的。请帮忙！！！！我在这上面花了 20 个小时，我是一个绝望的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:07:54.403

那里有很多`php`命中计数器教程。

这是我在谷歌搜索时发现的一个：

[https://code.google.com/p/simphp/](https://code.google.com/p/simphp/)

您所要做的就是致电：

```
<? include("home/public_html/hits/simphp.php"); ?> 
```

然后把它放在你想要计算的 div 中：

```
<div id="count"><? echo $info; ?></div> 
```

要检测 div 在浏览器窗口中是否可见，请使用`jQuery`：

[检查div是否在窗口中可见？](https://stackoverflow.com/questions/8114611/check-if-div-is-viewable-in-window)

# javascript - 骨干不区分大小写的搜索

> ID：15638519
> 
> 赞同：0
> 
> 时间：2013-03-26T13:40:19.533
> 
> 标签：javascript, backbone.js, case-insensitive

我有一个类似于这个[http://jsfiddle.net/kianoshp/YWSSp/77/的代码](http://jsfiddle.net/kianoshp/YWSSp/77/)

我认为必须有部分改变

```
$('#filter').on('keyup', function(e) {
        filteredCollection = new FilteredCollection();
        filteredCollection.reset(filterTable(administratorCollection,
    $(e.currentTarget).val()));
        resetTable(filteredCollection);
}); 
```

而且我想不出答案如何使搜索不区分大小写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:33:11.863

要使搜索不区分大小写，请将搜索词和搜索值都大写或小写。

在您的代码中：

```
filterTable = function(collection, filterValue) {
    if (filterValue === "") {
        return collection.toJSON();
    }
    filterValue = filterValue.toLowerCase();
//                            ^^^^^^^^^^^^^
    return collection.filter(function(data) {
        return _.some(_.values(data.toJSON()), function(value) {
            value = (!isNaN(value) ? value.toString() : value.toLowerCase());
//                                                            ^^^^^^^^^^^^^
            return value.indexOf(filterValue) >= 0;
        });
    });
}; 
```

# php - php中当前数组的新数组形成

> ID：15638523
> 
> 赞同：0
> 
> 时间：2013-03-26T13:40:28.173
> 
> 标签：php, loops

我在php中有一个这样的数组

```
Array
(
    [0] => 1
    [1] => 3
    [2] => 5
    [3] => 10
    [4] => 14
    [5] => 15
) 
```

现在我希望它看起来像

```
Array
(
    [0] => Array
        (
           [0] => 1
           [1] => 3
        )
    [1] => => Array
        (
           [0] => 5
           [1] => 10
        )
    [2] => => Array
        (
           [0] => 14
           [1] => 15
        )
) 
```

请建议如何使用 for 循环获得所需的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:44:33.983

你可以试试这样的

```
$length = count($array);
$newArray = array();
for ($i = 0; $i < $length; $i +=2){
   $newArray[] = array($array[$i], $array[$i + 1])
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T13:44:05.130

```
for($i = 0, $count = count($array1); $i < $count; $i = $i + 2) {
    $array2[] = array($array1[$i], $array1[$i+1]);
}

print_r($array2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T13:44:41.923

看起来像：

```
for ($i = 0 ; $i < count($arr) ; $i += 2) {
    ...
} 
```

请注意，`$i`当我使用成对的项目时，我在每次迭代中递增两次：在循环中，我将在每次迭代中使用`$arr[$i]`and 。`$arr[$i+1]`请注意，这将无法正常工作，因为 n# 的项目不是偶数！

其余的应该相当简单。

# git - 不同 Git 项目（存储库）之间的共享存储库

> ID：15638527
> 
> 赞同：1
> 
> 时间：2013-03-26T13:40:31.440
> 
> 标签：git, version-control, branch

我看过很多类似的问答，所以我会为看似重复的问题提前道歉。但是我已经阅读了所有我能找到的东西（在这里和一般的网络上），但我仍然没有答案。

我们目前使用 SVN（Tortoise 和 Ankh 是工具）作为我们的 VCS，并且正在考虑迁移到 Git。我们的兴趣是在分支方面获得更好的能力。简单来说，我们的项目是这样的：

```
Project1
Project2
SharedCode 
```

这两个项目中的每一个都密切依赖于 SharedCode（事实上，它们是密不可分的）。因此，如果我正在处理 Project1，我需要能够签出由 Project1 和 SharedCode 组成的存储库（总是）。同样对于 Project2，它必须由 Project2 和 SharedCode 组成。

顾名思义，SharedCode 是共享库、共享项目和参考文件的集合。每个项目都相当于 Visual Studio 中的一个解决方案。这意味着每个实际上都是 VC# 代码项目的集合。联系是这些单独的 VC# 项目将引用 SharedCode 中的内容，例如引用 DLL，甚至是 SharedCode 目录中存在的其他 VC# 代码项目。

我真正想强调的是，结构是我的问题中最重要的部分。我不能使用使“链接”代码（即 SharedCode）成为特定提交的方法。它必须始终是 HEAD（最新发布的代码），就像项目 1 或 2 一样。

现在，我知道我可以简单地将每个存储库创建一个单独的存储库并单独检查它们。但是当我想分支时会发生什么？以下是潜在危险情况的示例：

我已经对 Project1 和 SharedCode 进行了分支，并且每个都已签出。我也签出了 Project2，但它没有分支。我开始在 Project2 中进行一些工作，但由于 Project2 使用 SharedCode 中的代码页，我可能正在处理未分支的 Project2 和分支的 SharedCode 的混合体。

因此，总而言之，我希望能够始终在这些对中检出 Project1 和 SharedCode，或者 Project2 和 SharedCode。相反，我还必须能够一起提交更改，以便所有代码保持一致。

我有哪些选择？您是否有类似的需求，或者在如何处理这种情况并避免危险情况方面的经验？

我提前感谢您在构建我们的新 Git 存储库方面提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:14:31.563

只是为了结束这个故事，可以这么说，这就是我们最终要做的事情。我们没有尝试使用共享存储库的结构，而是选择创建一个包含 Project1、Project2 和 SharedCode 的大型存储库。这将意味着更多的东西被复制并包含在分支/标签中，但最终它最好有助于确保每个项目始终拥有它需要的 SharedCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:57:58.993

我想你应该看看

`man githook`（[在线手册页](https://www.kernel.org/pub/software/scm/git/docs/githooks.html)）

使用 githooks，您可以定义在拉取或推送之后开始的脚本，因此您也可以拉取和推送 SharedCode。我真的不知道什么是可能的，但也许这会对你有所帮助。

# ios - Simperium 错误：无法区分日期，因为他们的课程不是 NSDate

> ID：15638528
> 
> 赞同：0
> 
> 时间：2013-03-26T13:40:34.367
> 
> 标签：ios, core-data, simperium

这是我第一次尝试将 Simperium 集成到我的一个 iOS 核心数据项目中。虽然初始同步效果很好。我在后面的阶段看到了大量的崩溃，下面的日志。

> 2013-03-26 18:40:08.460 APP[2468:ae03] ***** **** -[SPMemberDate diff:otherValue:] 中的断言失败，/path/to/simperium-ios-develop/Simperium/SPMemberDate.m:48
> 
> 2013-03-26 18:40:08.465 APP[2468:ae03] ***** ****由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“Simperium 错误：无法区分日期，因为它们的类不是 NSDate”

在占据 SPMemberDate.m 的第 48 行的方法中打印`[thisValue class]`&的结果`[otherValue class]`表明，在某一时刻，thisValue 是一个`__NSDate`对象，而 otherValue 是一个`__NSCFNumber`对象。

罪魁祸首对象的值始终如下：-

`1970-01-01 00:00:00 +0000`为了`thisValue`

和

`0`为了`otherValue`

我不知道下一步该去哪里尝试和调试这个问题。什么会返回 NSNumber 而不是 NSDate？而且，什么可以返回 70 年代的日期？我相当确定，这在我的代码中什么都没有。你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:53:45.277

您是仅在 iOS 设备之间同步，还是同时与 Web 应用程序或后端服务同步？日期值当前以数字形式传输（自 1970 年以来的秒数），因此如果您从非 iOS 设备向 Simperium 发送日期，则需要使用该格式。

Simperium iOS 库应该在 iOS 上处理与 NSDate 的转换。它是开源的，因此您可以尝试下载它并进一步挖掘以查看可能出现的问题： [https ://github.com/Simperium/simperium-ios](https://github.com/Simperium/simperium-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:25:59.477

你得到的数字是自 1970 年以来的时间间隔，

您可以通过以下方式将其转换为日期：

```
// The time interval 
NSTimeInterval theTimeInterval = ...;
// Get the system calendar
NSCalendar *sysCalendar = [NSCalendar currentCalendar];

// Create the NSDates
NSDate *date1 = [[NSDate alloc] init];
NSDate *date2 = [[NSDate alloc] initWithTimeInterval:theTimeInterval sinceDate:date1]; 
```

# c# - 在 c# 中切换应用程序，如任务管理器

> ID：15638531
> 
> 赞同：6
> 
> 时间：2013-03-26T13:40:39.217
> 
> 标签：c#, winforms

我想编写 c# 应用程序，它将在一些正在运行的应用程序之间切换。它应该执行与 Windows 中的 Alt+Tab 相同的功能。我使用`SetForegroundWindow()`来自 Windows API 的函数，但如果应用程序在 Windows 任务栏上最小化，它就无法正常工作。所以我添加了`ShowWindow()`功能，但有一个问题是我无法以用户设置的原始大小显示窗口。

```
[DllImport("user32.dll")]
public static extern bool SetForegroundWindow(IntPtr hWnd);

[DllImport("user32.dll")]
public static extern bool ShowWindow(IntPtr hWnd, int nCmdShow); 
```

示例：我最大化窗口，然后将其最小化到任务栏中。当我打电话时：

```
ShowWindow(processWindowHandle, ShowWindowCmd.SW_NORMAL);
WindowsApi.SetForegroundWindow(processWindowHandle); 
```

窗口未最大化。我尝试使用`ShowWindowCmd.SW_NORMAL`参数但结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:52:56.793

我以前做过这个，你想得到一个打开所有东西的列表，最小化所有东西，然后再次遍历它，将每个程序与你想要恢复的程序进行比较，然后恢复那个程序。您需要一种方法来确定要恢复的一个窗口，我曾经使用 MainWindowTitle 因为我可以控制环境，因此可以保证每个 MainWindowTitle 都是唯一的，您可能没有那么奢侈。

我过去为此使用的代码如下，效果很好：

```
[DllImport("user32.dll")]
static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

void SwitchDatabase(string mainWindowTitle)
{
        try
        {
            bool launched = false;

            Process[] processList = Process.GetProcesses();

            foreach (Process theProcess in processList)
            {
                ShowWindow(theProcess.MainWindowHandle, 2);
            }

            foreach (Process theProcess in processList)
            {
                if (theProcess.MainWindowTitle.ToUpper().Contains(mainWindowTitle.ToUpper()))
                {
                    ShowWindow(theProcess.MainWindowHandle, 9);
                    launched = true;
                }
            }
        }
        catch (Exception ex)
        {
            ThrowStandardException(ex);
        }
} 
```

# actionscript-3 - 知道 gotoAndPlay 是否准备好

> ID：15638532
> 
> 赞同：0
> 
> 时间：2013-03-26T13:40:45.133
> 
> 标签：actionscript-3

我喜欢 Flash 中的小故事，每帧都有 1 个对象在说话。

如果您单击该对象，它会告诉您一些信息（就像第一帧一样，你好，我的名字是...）这是通过 gotoandplay 完成的。

示例：personFrame1.mouth.gotoAndPlay(2); 这将使他的嘴巴移动并在短时间内说话。

我有 1 个问题，我可以在对象上单击多次（在 2 秒内），所以它会交替说话几次。

有没有办法检查 gotoAndPlay 是否准备好，然后可以再次点击？所以同时只有1个语音

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:58:22.733

```
if (!personFrame1.mouth.isPlaying) personFrame1.mouth.gotoAndPlay(2); 
```

这将检查您的人的嘴是否仍在“移动”，即 MC 仍在播放，并且不会启动另一个播放序列，直到“嘴”不会停止。

# spring - 如何在春季道场中验证选择

> ID：15638537
> 
> 赞同：0
> 
> 时间：2013-03-26T13:40:54.820
> 
> 标签：spring, dojo, spring-webflow

我有一个带有应用道场装饰的下拉列表的表单。当我提交表单而未在下拉列表中选择任何内容时，我没有收到任何警报或要求的消息，表明正在提交表单。请建议我需要做什么。

```
<form:form id="payment"  method="post" modelAttribute="registration">
 <label for="proofId">Proof Type:</label> 
    <form:select path="proofId" style="width:110px;" id="proof" name="proofId">
    <form:option value="-1">Select</form:option>
    <form:options items="${typeofproof}" itemValue="proofId" itemLabel="proofType"/>
    </form:select>  
    </li><br />

Spring.addDecoration(new Spring.ElementDecoration({
 elementId : "proof",
 widgetType : "dijit.form.FilteringSelect",
 widgetAttrs : {
        promptMessage : "Select Proof Type",
        required : true,       
    }
}));
<button type="submit" id="submit" name="_eventId_createRegistration">Register Me</button>
Spring.addDecoration(new Spring.ValidateAllDecoration(
     {
         elementId : 'submit',
         event:'onclick' 
     }));
 </form:form> 
```

# javascript - jquery 文件上传的全局开始/结束事件

> ID：15638538
> 
> 赞同：4
> 
> 时间：2013-03-26T13:40:57.507
> 
> 标签：javascript, jquery, jquery-file-upload

我正在阅读有关 jQuery 文件上传（[API 选项](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)）的文档，并且似乎没有表示“我正在开始”和“我完成了”的事件。有启动和停止，但每次执行的文件上传都会调用它们。

有谁知道我没有看到的事件，或者对如何模拟全局启动/停止操作有建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T07:11:55.913

其实应该是`stop`回调函数。

```
stop

Callback for uploads stop, equivalent to the global ajaxStop event (but for file upload requests only).

Example:

function (e) {
    console.log('Uploads finished');
} 
```

[https://github.com/blueimp/jQuery-File-Upload/issues/990](https://github.com/blueimp/jQuery-File-Upload/issues/990)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:55:00.600

您可以使用[`progressall`](https://github.com/blueimp/jQuery-File-Upload/wiki/Options#progressall)：

```
function (e, data) {
    var progress = parseInt(data.loaded / data.total, 10);
    if( progress === 1) {
        //done :)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T13:57:49.850

我最接近全局“开始”的是处理拖放/更改/粘贴事件：

```
$('input[type="file"]').fileupload({
  // config here...
}).bind('fileuploaddrop fileuploadchange fileuploadpaste', function(e, data) {
  console.log('Global start');
}); 
```

这个处理程序只会触发一次；在用户开始上传之后，在处理文件队列（或任何远程上传）开始之前。

如果您*没有进行客户端文件验证*，[@Kamel 的答案](https://stackoverflow.com/a/23949022/998793)适用于全局“结束”（[如文档所示](https://github.com/blueimp/jQuery-File-Upload/wiki/Options#stop)）。

*如果您确实验证了客户端*，您可能还需要处理上传导致没有触发 ajax 上传的情况。为此，我首先记录了上传的文件，然后在所有文件都被客户端拒绝或在 ajax 上传后成功/失败/中止后触发“结束”：

```
var selectedFiles = [];    
$('#fileUpload').fileupload({
    url: '//jquery-file-upload.appspot.com/',
    //url: '//does.not.exist/',
    dataType: 'json',
    singleFileUploads: true,
    // validate client-side: only allow '.png' files
    acceptFileTypes: /(\.|\/)png$/i,
    done: function (e, data) {
        $.each(data.result.files, function (index, file) {
            $('<p/>').text(file.name).appendTo('#files');
        });
    },
    processfail: function (e, data) {
        var currentFile = data.files[0];
        console.log(currentFile.name, 'cannot be uploaded');
        if (data.files.error && currentFile.error) {
            setFileDone(currentFile.name);
        }
    },
    always: function (e, data) {
        setFileDone(data.files[0].name);
    }
}).bind('fileuploaddrop fileuploadchange fileuploadpaste', function(e, data) {
    selectedFiles = data.files.map(function(f) { return f.name; });
    console.log('Global start');
});

var setFileDone = function(fName) {
    selectedFiles.pop(fName);
    if (!selectedFiles.length) {
        console.log('Global end');
    }
}; 
```

[在 jsbin 上](http://jsbin.com/kukexo/edit?html,js,output)有一个工作演示：开始和结束都记录到上面的控制台。

# php - 二月和strtotime

> ID：15638540
> 
> 赞同：1
> 
> 时间：2013-03-26T13:41:01.503
> 
> 标签：php, date, datetime, strtotime

好的？

我想在这里打一个计算日期，但是我没有得到..

会发生以下情况：

```
$AtualMenos3 = date("m-d-Y", strtotime("2013-03-31 -3 month"));
$AtualMenos2 = date("m-d-Y", strtotime("2013-03-31 -2 month"));
$AtualMenos1 = date("m-d-Y", strtotime("2013-03-31 -1 month"));
$AtualMes = date("m-d-Y", strtotime("2013-03-31")); 
```

正确的应该是：

```
03-31-2013
02-28-2013
01-31-2013
12-31-2012 
```

但是，这个 php 计算日期错误，因为当月份是 2 月（只有 28 天）时，计算出错了..

实际输出：

```
03-31-2013
03-03-2013
01-31-2013
12-31-2012 
```

有谁知道我如何解决这个问题？因为这很复杂..我没有想法......我想不出任何东西：\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:00:00.900

```
 $datetime = new DateTime('2013-03-31');
    $datetime->modify('-1 month');
    echo $datetime->format('Y-m-t') . "<br>";
    $datetime->modify('-1 month');
    echo $datetime->format('Y-m-t') . "<br>";
    $datetime->modify('-1 month');
    echo $datetime->format('Y-m-t') . "<br>"; 
```

[看到它在行动](http://codepad.viper-7.com/0hR8a0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:44:21.343

找到该月最后一天的解决方法是：

```
 $lastDay = date("m-d-Y",(strtotime('next month',strtotime(date("m-01-Y"))) - 1)); 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T02:50:03.503

如果您想坚持使用`strtotime()`，您可以通过从下个月减去一天来轻松计算一个月的最后一天。

```
echo date("m-d-Y", strtotime("Apr 2013 -1 day")); // yields 03-31-2013
echo date("m-d-Y", strtotime("Mar 2013 -1 day")); // yields 02-28-2013
echo date("m-d-Y", strtotime("Feb 2013 -1 day")); // yields 01-31-2013 
```

# delphi - TListbox 和 TCheckListbox 的功能代码

> ID：15638543
> 
> 赞同：1
> 
> 时间：2013-03-26T13:41:07.573
> 
> 标签：delphi

我想创建一个函数，它应该支持 TListbox 或 TChecklistBox 作为调用参数

```
 MyUISupportFunction ( ......  ; aListBox : TObject);

 if (aListBox as  TObject) is TListBox  then (aListBox as  TListbox).Items.Clear;
 if (aListBox as  TObject) is TCHeckListBox  then (aListBox as  TCheckListbox).Items.Clear; 
```

我想知道我可以在 UI（TListBox 和 TChechecklist Box）上更高效地编写我的代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T13:42:17.497

两者都继承自 TCustomListBox

```
Procedure MyUISupportFunction (aListBox : TCustomListBox);
begin
   aListBox.Items.Clear;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  MyUISupportFunction(Listbox1);
  MyUISupportFunction(CheckListBox1);
end; 
```

# android - Android自定义画廊或类似的东西

> ID：15638544
> 
> 赞同：0
> 
> 时间：2013-03-26T13:41:08.500
> 
> 标签：android, android-listview, android-gallery, android-scrollview

我有一个小而简单的问题。我需要在我的应用程序中有一个类似于列表视图或我不知道的图片库的小部件。所以这是我的问题，我怎么能在我的应用程序中做这样的事情？

这是我正在谈论的小部件。它有一个图像视图和两个文本视图，并且这个小部件应该能够向左或向右滚动。 ![在此处输入图像描述](../Images/c2f35002d21274fef23ee8ae8cd41f94.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:44:48.583

我使用[了 TwoWayView](https://github.com/lucasr/twoway-view)和自定义适配器。

看起来像这样：

![画廊](../Images/855c474bcceb66b152e080c418b4e297.png)

# sql - SQL for DB2 中的多参数，使用 SSRS

> ID：15638548
> 
> 赞同：1
> 
> 时间：2013-03-26T13:41:22.883
> 
> 标签：sql, db2, ssrs-2008, peoplesoft

我对 SSRS for Sql Server 非常陌生。使用 2008。我的工作要求我使用此工具重现一些遗留报告 —— 我已经为我的参数创建下拉菜单并遇到了 DB2 不支持多参数的错误。我们使用 PeopleSoft 表。我的工作现在说，找到解决方法。我一直在阅读许多论坛，但我无法得到任何东西。谁能提供资源或引导我完成强制此报告允许我的用户选择多个参数需要做的事情？

```
SELECT AL1.EMPLID, AL1.NAME,
       AL4.COVERAGE_ELECT, AL4.FLAT_AMOUNT,
       AL1.JOBTITLE, AL1.JOB_FAMILY,
       AL3.ANNUAL_RT, AL3.ANNL_BENEF_BASE_RT,
       AL4.BENEFIT_PLAN
FROM TABLEONE AL1,
     TABLETWO AL2,
     TABLETHREE AL3,
     TABLEFOUR AL4
WHERE (AL1.EMPLID = AL3.EMPLID
       AND AL1.EMPL_RCD = AL3.EMPL_RCD
       AND AL1.EMPLID = AL2.EMPLID
       AND AL1.EMPL_RCD = AL2.EMPL_RCD
       AND AL1.EMPLID = AL4.EMPLID
       AND AL1.EMPL_RCD = AL4.EMPL_RCD)
       AND (AL2.EFFDT = (SELECT MAX(LF.effdt)
                         FROM TABLETWO LF
                         WHERE LF.emplid = al2.emplid
                               AND LF.empl_rcd = al2.empl_rcd
                               AND LF.plan_type = al2.plan_type
                               AND LF.benefit_nbr = al2.benefit_nbr
                               AND LF.effdt <= CURRENT Date)
            AND AL2.PLAN_TYPE = '20'
            AND AL2.COVERAGE_ELECT = 'E'
            AND AL3.EFFDT = (SELECT MAX(J.EFFDT)
                             FROM TABLETHREE J
                             WHERE J.EMPLID = AL3.EMPLID
                                   AND J.EMPL_RCD = AL3.EMPL_RCD
                                   AND J.EFFDT <= CURRENT Date)
            AND AL3.EFFSEQ = (SELECT MAX(ES.EFFSEQ)
                              FROM TABLETHREE ES
                              WHERE ES.EMPLID = AL3.EMPLID
                                    AND ES.EMPL_RCD = AL3.EMPL_RCD
                                    AND ES.EFFDT = AL3.EFFDT)
            AND AL4.EFFDT = (SELECT MAX(L.EFFDT)
                             FROM TABLETWO L
                             WHERE L.EMPLID = AL4.EMPLID
                                   AND L.EMPL_RCD = AL4.EMPL_RCD
                                   AND L.PLAN_TYPE = AL4.PLAN_TYPE
                                   AND L.BENEFIT_NBR = AL4.BENEFIT_NBR
                                   AND L.EFFDT <= CURRENT Date)
            AND AL4.PLAN_TYPE IN (?)
            AND AL4.COVERAGE_ELECT= ?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:54:10.060

对所有参数使用多个问号。确保将每个问号与参数匹配，并以正确的顺序匹配它们。与其他一些遗留数据库（例如 Ingres DB）一样，IBM DB2 不支持查询中的命名参数，因此，对所有参数使用 [?]。其余步骤与您的其他报表设计相同。

我认为这还取决于您用于报告的驱动程序。这是我用于 DB2 报告的驱动程序。它来自 Quest Inc. 的 TOAD 分析。

IBM DB2 ODBC 驱动程序 - TACOM27

这是您的查询：

从表 A 中选择 *

其中字段1 =？

和字段2 =？

这些是您的参数：

? = [@p​​ara1]

? = [@p​​ara2]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:53:12.530

这是一个关于如何使用多个参数获得解决方法的链接，如果不能帮助您发布更多关于您所做的事情，我们会找到答案，几周前我曾处理过类似的问题。这是链接：[http ://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/MS-SQL_Reporting/A_8737-SSRS-can-be-also-used-for-user-inputs.html](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/MS-SQL_Reporting/A_8737-SSRS-can-be-also-used-for-user-inputs.html)

基本上我做了什么： 1\. 我连接到一个数据源。然后我设置了我的数据集。在数据集中，您可以输入您提供的选择语句，或者如果您使用的是存储过程，您也可以选择该选项。在 VS 中有一个名为 Parameters 的文件夹。您可以在此处添加两个参数。将其设置为可见。如果用户什么都不选择，我允许空值和空白值。我为下拉列表指定了值。这就是创作方面的全部内容。现在您可以返回数据集并添加一行：

```
WHERE column = + @DropdownParameter +
AND column2 = +@Dropdown2Parameter + 
```

我只是在编写您感兴趣的代码部分。我没有对其进行测试，但这与我在项目中所做的方式相似，并且可以正常工作。

```
FROM TABLETWO
        WHERE PLAN_TYPE = +@DropdownParameter+
              AND EFFDT <= CURRENT_DATE
        GROUP BY EMPLID, EMPL_RCD, BENEFIT_NBR, PLAN_TYPE) INC
    ON T4.EMPLID = INC.EMPLID
       AND T4.EMPL_RCD = INC.EMPLRCD
       AND T4.BENEFIT_NBR = INC.BENEFIT_NBR
       AND T4.PLAN_TYPE = INC.PLAN_TYPE
       AND T4.EFFDT = INC.EFFDT
  WHERE T4.COVERAGE_ELECT = +@DropdownParameter2+) AL4
ON AL4.EMPLID = AL1.EMPLID
 AND AL4.EMPL_RCD = AL1.EMPL_RCD 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T21:36:14.623

...哇，这是一些问题。这与您的问题无关，但应自行清理查询。除其他事项外，请始终明确指定您的联接，不要使用逗号分隔的`FROM`子句。

这*可能会*更好一些：

```
SELECT AL1.EMPLID, AL1.NAME,
       AL4.COVERAGE_ELECT, AL4.FLAT_AMOUNT,
       AL1.JOBTITLE, AL1.JOB_FAMILY,
       AL3.ANNUAL_RT, AL3.ANNL_BENEF_BASE_RT,
       AL4.BENEFIT_PLAN
FROM TABLEONE AL1,
JOIN (SELECT DISTINCT EMPLID, EMPL_RCD
      FROM TABLETWO 
      WHERE PLAN_TYPE = '20'
            AND COVERAGE_ELECT = 'E'
            AND EFFDT <= CURRENT_DATE) AL2
  ON AL2.EMPLID = AL1.EMPLID
     AND AL2.EMPL_RCD = AL1.EMPL_RCD
JOIN (SELECT T3.EMPLID, T3.EMPL_RCD, T3.ANNUAL_RT, T3.ANNL_BENEF_BASE_RT
      FROM TABLETHREE T3
      JOIN (SELECT a.EMPLID, a.EMPL_RCD, a.EFFDT, MAX(EFFSEQ) EFFSEQ
            FROM (SELECT EMPLID, EMPL_RCD, MAX(EFFDT) EFFDT
                  FROM TABLETHREE 
                  GROUP BY EMPLID, EMPL_RCD) a
            JOIN TABLETHREE z
              ON z.EMPLID = a.EMPID
                 AND z.EMPL_RCD = a.EMPL_RCD
                 AND z.EFFDT = a.EFFDT
            GROUP BY a.EMPLID, a.EMPL_RCD, a.EFFDT) INC
        ON INC.EMPLID = T3.EMPLID
           AND INC.EMPL_RCD = T3.EMPL_RCD
           AND INC.EFFDT = T3.EFFDT
           AND INC.EFFSEQ = T3.EFFSEQ) AL3
  ON AL3.EMPLID = AL.EMPLID
     AND AL3.EMPL_RCD = AL1.EMPL_RCD
JOIN (SELECT T4.EMPLID, T4.EMPL_RCD, 
             T4.COVERAGE_ELECT, T4.FLAT_AMOUNT, T4.BENEFIT_PLAN
      FROM TABLEFOUR T4
      JOIN (SELECT EMPLID, EMPL_RCD, BENEFIT_NBR, PLAN_TYPE, MAX(EFFDT) EFFDT
            FROM TABLETWO
            WHERE PLAN_TYPE IN (?)
                  AND EFFDT <= CURRENT_DATE
            GROUP BY EMPLID, EMPL_RCD, BENEFIT_NBR, PLAN_TYPE) INC
        ON T4.EMPLID = INC.EMPLID
           AND T4.EMPL_RCD = INC.EMPLRCD
           AND T4.BENEFIT_NBR = INC.BENEFIT_NBR
           AND T4.PLAN_TYPE = INC.PLAN_TYPE
           AND T4.EFFDT = INC.EFFDT
      WHERE T4.COVERAGE_ELECT = ?) AL4
  ON AL4.EMPLID = AL1.EMPLID
     AND AL4.EMPL_RCD = AL1.EMPL_RCD 
```

（未经测试 - 在不知道您的数据布局的情况下，这有点困难。如果有更多可用信息，则可以进一步简化事情；特别是如果`TABLETHREE.EFFSEQ`总是增加，或者至少每`EFFDT`，该部分可以折叠为一个参考）

# java - 查找二维数组java的总和

> ID：15638550
> 
> 赞同：2
> 
> 时间：2013-03-26T13:41:28.427
> 
> 标签：java, matrix, multidimensional-array

我正在做一个项目，我必须读取文件并将内容输入二维数组。然后我必须对矩阵的每一行、每一列和周长求和。到目前为止，除了外围之外，我已经完成了所有工作。我正在尝试为顶行、底行和两个外部列的中间创建单独的 for 循环。

矩阵文件如下所示：

```
1 2 3 4 
2 4 6 8 
2 4 6 8 
3 2 3 4 
```

因此，周长加起来应该是 42。现在我可以成功地将第一行和最后一行添加到等于 22。但是，当我将列添加到总数中时，我得到 32。

这是代码：

```
import java.util.*; // Scanner class
import java.io.*;  // File class

public class Lab10
{
   static public void main( String [ ] args )  throws Exception
   {    
  if ( args.length != 1 )
  {
    System.out.println("Error -- usage is:  java Lab10 matdataN.txt");
    System.exit( 0 );
  }

    //Requirement #1: first int value: # of rows, second int value: # of cols
    File newFile = new File(args[0]); 
    Scanner in = new Scanner(newFile);

    int numRows = in.nextInt();
    int numCols = in.nextInt();

    //Requirement #2: declare two-d array of ints
    int[][] matrix;
    matrix = new int[numRows][numCols];

    //Requirement #3 & 4: read file one line at a time (nested for loops 
        //and nextInt()) and print

    for (int i = 0; i < numRows; i++)
    {
        for (int j = 0; j < numCols; j++)
        {
            matrix[i][j] = in.nextInt();
            System.out.print(matrix[i][j]+ " ");
        }
    System.out.println();
    }

    //Requirement #5: traverse each row and sum the values and display the sums
    int rowTotal = 0;
    for (int i = 0; i < numRows; i++)
    {
        rowTotal = 0;
        for (int j = 0; j < numCols; j++)
        {
            rowTotal += matrix[i][j];
        }
    System.out.println("Sum for row = " + rowTotal);
    }

    //Requirement #6: traverse each column and sum the values and display the sums
    int colTotal = 0;
    for (int i = 0; i < numRows; i++)
    {
        colTotal = 0;
        for (int j = 0; j < numCols; j++)
        {
            colTotal += matrix[j][i];
        }
    System.out.println("Sum for col = " + colTotal);
    }

    //Requirement #7: traverse the perimeter and sum the values and display the sum

    //sum bottom row matrix
    int perTotal = 0;
    for (int i = (numRows-1); i < numRows; i++)
    {
        perTotal = 0;
        for (int j = 0; j < numCols; j++)
        {
            perTotal += matrix[i][j];
        }
    }

    //sum + top row matrix
    for (int i = 0; i < numRows - (numRows-1); i++)
    {
        for (int j = 0; j < numCols; j++)
        {
            perTotal += matrix[i][j];
        }
    System.out.println("Sum of perimeter = " + perTotal);
    }

    // sum + first col middle
    for (int i = 1; i < (numRows-1); i++)
    {
        for (int j = 0; j < numCols - (numCols-1); j++)
        {
            perTotal += matrix[j][i];
        }
    System.out.println("Sum = " + perTotal);
    }

    // sum + last col middle
    for (int i = 1; i < (numRows-1); i++)
    {
        for (int j = (numCols-1); j < numCols; j++)
        {
            perTotal += matrix[j][i];
        }
    System.out.println(perTotal);
    }

   } 
```

如果有人可以帮助我计算第一列和最后一列的中间值（应该是 2+2 和 8+8），我将不胜感激。或者，如果您有更好的方法来找到周长。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:22:09.530

在 0.4.0 版本中有一个[la4j](http://la4j.org)（Java 的线性代数）库来处理这个任务（目前在 GitHub 上可用：[https](https://github.com/vkostyukov/la4j) ://github.com/vkostyukov/la4j ，今年夏天将在 Maven 上可用）。所以，这里是一个简短的例子：

```
Matrix a = new Basic2DMatrix(...); // creates a real matrix

// calculates the sum of '1' row
double d1 = a.foldRow(1, Matrices.asSumAccumulator(0)); 
// calculates the sum of '2' 
double d2 = a.foldColumn(2, Matrices.asSumAccumulator(0));

// the helper class that fetches border elements of matrix
class PerimeterFetcher implements MatrixFunction {

  private int rows;
  private int columns;

  public PerimeterFectcher(int rows, int columns) {
    this.rows = rows;
    this.columns = columns;
  }      

  @Override
  public double evaluate(int i, int j, double value) {
    return i == 0 ? value : j == 0 ? value : (i + 1) == rows ? value
           : (j + 1) == columns ? value : 0;
  }
}

// calculates the perimeter of matrix
double p = a.fold(Matrices.asSumFunctionAccumulator(0, 
                  new PerimeterFetcher(a.rows(), a.columns()))); 
```

**UPD**：下一个版本的 la4j (0.4.5) 支持`sum()`矩阵和向量的方法：

```
Matrix a = new Basic2DMatrix(...);
double s = a.sum(); // wrapper around a.fold(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:54:13.093

我建议你这样做：

```
int perTotal = 0;
// top and bottom row
for (int c = 0; c < numCols; c++)
    perTotal += matrix[0][c] + matrix[numRows-1][c];
// left and right column
for (int r = 1; r < numRows-1; r++)
    perTotal += matrix[r][0] + matrix[r][numCols-1];

// output
System.out.println("Perimeter=" + perTotal); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:14:06.847

这是你的方法：

```
public static int perimeter(int[][] array) {
    int perimter = 0;
    for (int i = 0; i < array[0].length; i++) {
        perimter += array[0][i] + array[array.length - 1][i];
    }
    for (int r = 1; r < array.length - 1; r++) {
        perimter += array[r][0] + array[r][array[0].length - 1];
    }
    return perimter;
} 
```

这是您使用您提供的数组进行的测试：

> public static void main(String[] args) { System.out.println(perimeter(new int[][]{{1, 2, 2, 3}, {2, 4, 4, 2}, {3, 6 , 6, 3}, {4, 8, 8, 4}})); }

输出：42

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:51:50.280

```
 //Requirement #7: traverse the perimeter and sum the values and display the sum

        int perTotal = 0;

        // First line
        for (int j = 0; j < numCols; j++)
        {
            perTotal += matrix[0][j];
        }

        // If there is only one line, then it is done.
        if (numRows > 1)
        {
            // Last line
            for (int j = 0; j < numCols; j++)
            {
                perTotal += matrix[numRows-1][j];
            }

            // Other lines
            for (int i = 1; i < numRows -1); i++)
            {
                perTotal += matrix[i][0] + matrix[i][numcols -1];
            }
        }

    //Perimeter
    System.out.println("Perimter="+perTotal); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-21T04:31:54.700

只需这样做：

```
 for (int i = 0; i < ROWS; i++){
           for (int j = 0; j < COLUMNS; j++){
             sum = sum + myArray[i][j];
        }
    }

    System.out.print(sum); 
```

这应该给你总和。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T14:25:38.673

非常感谢大家！这种更简单的方法。仅供参考：我最终做了

```
 int perTotal = 0;
    for (int i = 0; i < numCols; i++)
    {
        perTotal += matrix[0][i] + matrix[numRows-1][i];
    }
    for (int j = 1; j < numRows-1; j++)
    {
        perTotal += matrix[j][0] + matrix[j][numCols-1];
    }
    System.out.println("Perimeter = " + perTotal); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-31T19:56:55.360

您可以简单地使用：

```
static int sumMultiArray(int[][] array) {
int sum = 0;
for (int[] ints : array) {
    for (int number : ints) {
        sum += number;
    }
}
return sum; 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-07T09:00:36.877

尝试以下操作：

```
import java.util.Scanner;
public class TwoDarray {

public static void main(String[] args) 
{
    Scanner scn=new Scanner(System.in);

    System.out.print("Enter the first Rows of Array :");    //Input first Rows and Columns
    int row1 = scn.nextInt();
    System.out.print("Enter the first columns of Array:");
    int col1 = scn.nextInt();
    System.out.print("Enter the second Rows of Array :");   //Input second rows and column
    int row2 = scn.nextInt();
    System.out.print("Enter the second columns of Array:");
    int col2 = scn.nextInt();

    int arr1[][] = new int[row1][col1];                     // Input the elements in first row and column

            System.out.println("Enter the elements in First row and column");
                for(int i=0;i<row1;i++)
                {
                    for(int j=0;j<col1;j++)
                    {
                        arr1[i][j]=scn.nextInt();
                    }
                }

    int arr2[][] = new int[row2][col2];                     // Input the elements in second row and column

        System.out.println("Enter the elements in second row and column");
            for(int i=0;i<row2;i++)
            {
                for(int j=0;j<col2;j++)
                {
                    arr2[i][j]=scn.nextInt();
                }

            }

    System.out.println("Output of first row and column is ");       //output of first row and column
        for(int i=0;i<row1;i++)
        {
            for(int j=0;j<col1;j++)
            {
                System.out.print(arr1[i][j]+" ");
            }   System.out.println();
        }

                System.out.println("output of secound row and column");         //out put of second row and column
                    for(int i=0;i<row2;i++)
                    {
                        for(int j=0;j<col2;j++)
                        {
                            System.out.print(arr2[i][j]+" ");
                        }       System.out.println();
                    }

                                                        //sum of first and second row and column

                    int sum[][] = new int[row1][col1];
                        for(int i=0;i<row1;i++)
                        {
                            for(int j=0;j<col1;j++)
                            {
                                sum[i][j]=arr1[i][j]+arr2[i][j];
                            }
                        }

                        System.out.println("sum of two matrix output");         //sum of two matrix output
                            for(int i=0;i<row1;i++)
                            {
                                for(int j=0;j<col1;j++)
                                {
                                    System.out.print(sum[i][j]+" ");
                                }       System.out.println();
                            }

}

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-15T02:17:50.227

```
 private static int sumElementInArray(int[][] arrayWithElement) {
        int sum = 0;
        for (int i = 0; i < arrayWithElement.length; i++) {
            sum += IntStream.of(arrayWithElement[i]).sum();
        }
        return sum;
    } 
```

# java - 计算二进制数

> ID：15638553
> 
> 赞同：-6
> 
> 时间：2013-03-26T13:41:35.383
> 
> 标签：java, count, binary

我是 Java 编程的初学者，我在处理 Java 编号时遇到了一些麻烦。我想创建一个带有循环的程序，它将打印整数 0 到 5 的二进制形式。

我的意思是输出应该是这样的：0000 0001 0010 0011 0100 在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:43:32.230

利用：

```
for ( int i = 0; i <= 5; i++ ) {
  System.out.println(Integer.toBinaryString(i));
} 
```

# java - 从 jdk 1.7 降级到 1.6 会阻止我的 eclipse indigo 工作

> ID：15638564
> 
> 赞同：3
> 
> 时间：2013-03-26T13:42:18.497
> 
> 标签：java, eclipse, java-7

我在我的 Windows 7 笔记本电脑上运行 jdk1.7。我不得不降级到 jdk 1.6，因为当我的 apk 与 jdk 1.7 一起在 google play 上发布时，我不得不降级 [注意：我使用统一游戏引擎进行开发]。

降级后，我遇到了日食崩溃。我尝试更新环境变量仍然没有希望。请找到我在运行 eclipse indigo 时遇到的错误的附件

操作系统：Windows 7 64 位

日食：64位

安卓SDK：32位

**错误：**

![在此处输入图像描述](../Images/0ec718273f1b5444c7d43959b5dd042f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:06:04.797

与您的说法相反，您的 Eclipse 实际上是 32 位变体。请参阅启动程序文件名中的“...win32.x86”。如果它是 64 位变体，它将是“...win32.x86_64”。

Eclipse 无法启动，因为 32 位 Eclipse 无法在 64 位 JVM 上启动。获取 64 位 Eclipse 安装或安装额外的 32 位 JVM 并将 Eclipse 指向它，使用 eclipse.ini 文件中的 -vm 开关。

# c# - 为什么我的数据表没有任何结果？

> ID：15638569
> 
> 赞同：1
> 
> 时间：2013-03-26T13:42:24.007
> 
> 标签：c#, ado.net, datatable, dataset

我对使用数据集、适配器、数据表等有点陌生......所以我相信这将成为一个菜鸟问题。

我使用视觉设计器（扩展名为 .xsd 的文件）在视觉工作室中创建数据集。我在那里定义了一个名为“课程”的数据表。我通过设计器使用 sql server 查询填充了这个表，所以我知道我的数据连接正确。

在我的代码中，我正在测试如何使该 DataTable 实例化，然后将其中的列映射到我称为 Course.cs 的本地类。这是方法：

```
MyContext ctx = new MyContext();

SqlConnection conn = 
    new SqlConnection("Data Source=****;Initial Catalog=****;User ID=****;Password=****");
SqlCommand command = new SqlCommand(@"select * from stuff", conn);

SqlDataAdapter da = new SqlDataAdapter();
MyDataSet ds = new MyDataSet();
ds.Locale = CultureInfo.InvariantCulture;
da.Fill(ds);
DataTable courses = ds.Courses;

IEnumerable<DataRow> query =
   from course in courses.AsEnumerable()
   select course;
foreach (var course in query)
{
    Course localCourse = new Course();
    localCourse.CourseCode = course.Field<string>("CourseCode");
    ctx.Courses.Add(localCourse);
}
ctx.SaveChanges(); 
```

我没有收到任何错误，它可以正常运行代码，但是由于“查询”变量中没有任何内容，因此它不会生成我想要的新对象并映射值。

我在这里想念什么？

**编辑**

感谢您的快速回复！当我添加代码行时：

```
da.Fill(ds); 
```

它给了我这个例外：

```
{"The SelectCommand property has not been initialized before calling 'Fill'."} 
```

这让我感到困惑，因为我不想创建一个选择命令，虽然我已经在我的数据表中了？

**编辑二**

我已经完成了建议的操作，我需要做的事情是有道理的，但我仍然没有得到任何结果（虽然没有错误了..）。如果我在相同的连接字符串上运行相同的查询，我可以获得结果，有什么想法吗？

**编辑三！**

这是我用来填充数据表的原始且丑陋的查询。就像我说的，如果我在 SSMS 中进行，结果会很好。

```
select 
s.AdClassSchedId,
rtrim(s.code) + 
CASE WHEN (isnull(s.section,'') <> '') 
THEN '-S' + s.section 
ELSE '' END as CourseCode,
s.descrip +
CASE WHEN (isnull(s.section,'') <> '') 
THEN ' - Section ' + s.section 
ELSE '' END as CourseName,
s.AdTeacherId, 
s.StartDate,
s.EndDate,
s.DateLstMod as ClassSchedLastModified,
t.AdTermId
from adclasssched s 
inner join adclassschedterm t on s.adclassschedid = t.adclassschedid
where s.active = 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:44:03.397

我没有看到您在任何地方调用适配器上的填充？

那里应该有一行代码看起来像......

```
SqlDataAdapter da = new SqlDataAdapter("select * from courses", mySqlConnection);

da.Fill(ds); 
```

此外，您需要将数据适配器的 select 命令设置为您打算从数据库运行的 sql 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:45:21.867

**方式1**

如果您使用 sqlcommand 填充数据集对象，则需要像这样打开和关闭连接

```
SqlConnection nwindConn = new SqlConnection("Data Source=localhost;Integrated Security=SSPI;Initial Catalog=northwind");

SqlCommand selectCMD = new SqlCommand("SELECT CustomerID, CompanyName FROM Customers", nwindConn);
selectCMD.CommandTimeout = 30;

SqlDataAdapter custDA = new SqlDataAdapter();
custDA.SelectCommand = selectCMD;

nwindConn.Open();

DataSet custDS = new DataSet();
custDA.Fill(custDS, "Customers");

nwindConn.Close(); 
```

[从 DataAdapter 填充 DataSet](http://msdn.microsoft.com/en-us/library/bh8kx08z%28v=vs.71%29.aspx)

* * *

**方式2**

为你更新

```
// Assumes that connection is a valid SqlConnection object.
string queryString = 
  "SELECT CustomerID, CompanyName FROM dbo.Customers";
SqlDataAdapter adapter = new SqlDataAdapter(queryString, connection);

DataSet customers = new DataSet();
adapter.Fill(customers, "Customers"); 
```

[从 DataAdapter 填充 DataSet](http://msdn.microsoft.com/en-us/library/bh8kx08z.aspx)

* * *

**更新前**

填写您的代码中不存在的数据集对象

```
MyDataSet ds = new MyDataSet();
ds.Locale = CultureInfo.InvariantCulture;
//fill datase object ds
//DataAdapter.Fill(ds)
DataTable courses = ds.Courses; 
```

* * *

对于这个错误

```
{"The SelectCommand property has not been initialized before calling 'Fill'."} 
```

执行以下操作，如错误所说的设置选择命令

```
SqlDataAdapter adapter = new SqlDataAdapter();
SqlCommand command = new SqlCommand("SELECT * FROM table", connection);
adapter.SelectCommand = command; 
```

完整来源：[SqlDataAdapter.SelectCommand 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.selectcommand.aspx)

# jsf - JSF managedbean 具有不同范围的变量

> ID：15638571
> 
> 赞同：0
> 
> 时间：2013-03-26T13:42:30.920
> 
> 标签：jsf, scope, javabeans, managed

我在 JSF managedbean 中有一些不同范围的变量（我觉得）。在以下代码段中，**userTable**用于**login()**和**register()**方法。但**roleList**仅在 register() 方法中使用。

**userTable**应该在会话范围内，因为它应该在用户会话期间可以访问。

而且我觉得**roleList**不应该在会话范围内，因为它只会在注册页面期间填充在组合框中。我想请求范围就足够了。

但是由于 UserManagedBean 已经在会话范围内，我如何将 roleList 放在 requestScope 中。

非常感谢您的任何建议。

```
@Named("user")
@Scope("session")
public class UserManagedBean implements Serializable {

    private UserTable userTable = new UserTable(); 
    private List roleList = new ArrayList();

    public String login() {
     // login process here
    }

    public String register() {
     // register user here
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:10:47.717

至于具体问题，只需将 bean 分成 2 个单独的 bean。由于某些不清楚的原因，您显然是通过 Spring 而不是 JSF 或 CDI 管理 bean，因此您可以使用`@Autowired`将一个 bean 作为另一个 bean 的属性注入。

```
@Named
@Scope("request")
public class Login implements Serializable {

    private List<Role> roles;

    @AutoWired
    private User user;

    public String submit() {
         UserTable userTable = user.getTable();
         // ...
    }

    // ...
} 
```

```
@Named
@Scope("session")
public class User implements Serializable {

    private UserTable table;

    // ...
} 
```

如果您通过 JSF 管理 bean `@ManagedBean`，则可以使用`@ManagedProperty`它。如果您通过 CDI 管理 bean `@Named`，则可以使用`@Inject`它。

* * *

回到具体的功能需求，

> 而且我觉得 roleList 不应该在会话范围内，因为它只会在注册页面期间填充在组合框中。我想请求范围就足够了。

这是一个很弱的理由。如果是我，我会把它放在应用程序范围内。无论如何，每个请求/会话的角色列表都是相同的，对吧？然后，您不需要在每个请求上重新加载/重新填充它，除非您的内存占用非常非常低。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# php - 将数字 i 替换为 i 星号

> ID：15638585
> 
> 赞同：1
> 
> 时间：2013-03-26T13:43:29.190
> 
> 标签：php

我将如何编写一个函数来替换 PHP 中正确数量的星数，我已经在 J​​avaScript 中完成了它并尝试将整个函数转换为 PHP，但我不知道那么多 PHP，所以我似乎无法弄清楚是什么问题是......有人可以纠正我吗，现在它只打印出 0 而不管女巫 nr 吗？

```
<?php
for($i = 0; $i < count($content_array2); $i++) {
    $values = explode(';', $content_array2[$i]);
    $titels = $values[0];
    $grade = $values[1];
    echo '<li>'.$titels.'<span>'.changeNumber($grade).'</span>'.'</li>';
}
function changeNumber($number) {
    $stars = "";

    for ($i = 0; $i < $number; $i++) {
        $stars += "*";
    }
    return $stars;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:46:11.913

您应该使用`.=`来连接字符串，而不是`+=`.

```
$stars .= "*"; 
```

当你使用 时`+=`，PHP 认为`$stars`是一个数值，这就是你得到一个数值结果的原因。

# php - 使用 Php XML DOM 更改 XML 文件中的原子值

> ID：15638587
> 
> 赞同：0
> 
> 时间：2013-03-26T13:43:29.027
> 
> 标签：php, xml

我正在尝试学习如何使用 Php XML DOM 来访问 XML 文件并更改原子值。我以前没有做过这样的事情，虽然我在网上找到了很多类似的案例，但我还没有设法找到解决方案。这就是我所拥有的：

```
 <?php
   $dom = new DOMDocument;
   $dom->load('getobs.xml');

   $xpath = new DOMXPath($dom);
   $nodeList = $xpath->query("//beginPosition");
   $nodeList->item(0)->nodeValue .= '546';

   $dom->saveXML();
   ?> 
```

所以，我在上面的代码中试图做的是：1）加载一个xml文件。2) 将元素“beginPosition”的值更改为“546”

在整个 XML 文件中，只有一个具有此名称的元素 (beginPosition)。你能告诉我我做错了什么吗？

谢谢。迪特里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:43:43.303

最后我设法通过使用以下代码来做到这一点：

```
 <?php
    // create new DOM document and load the data
    $dom = new DOMDocument;
    $dom->load('getobs.xml');
    //var_dump($dom);
    // Create new xpath and register the namespace
    $xpath = new DOMXPath($dom);
    $xpath->registerNamespace('g','http://www.opengis.net/gml');
    // query the result amd change the value to the new date
    $result = $xpath->query("//g:beginPosition");
    $result->item(0)->nodeValue = 'sds';
    // save the values in a new xml
    file_put_contents('test.xml',$dom->saveXML());
    ?> 
```

错误是我没有注册命名空间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:57:55.343

您没有将结果保存回文件。`saveXML()`是一个命名错误的方法，它以 xml 形式返回结果，它不会将其保存回文件中。

[保存XML](http://www.php.net/manual/en/domdocument.savexml.php)

将最后一行更改为

```
 file_put_contents('getobs.xml',$dom->saveXML()); 
```

# r - 从 split() 函数创建的列表中提取值

> ID：15638591
> 
> 赞同：1
> 
> 时间：2013-03-26T13:43:40.200
> 
> 标签：r, list, split, extract

我有一个如下表格的列表，大约 1400 个字符。我想从每个日期/时间中提取值以绘制它们。

```
$`2012-07-19 22:30:00`
[1] NaN

$`2012-07-19 23:00:00`
[1] 23.91

$`2012-07-19 23:30:00`
[1] 23.83286 
```

我尝试了几种不同形式的 sapply 函数，这些函数在网上找到，但每次我得到相同的列表（如下），但我无法绘制。如果我可以提取这些值，我应该可以使用 na.omit 删除“NaN”。关于如何做到这一点的任何想法？

```
2012-07-19 22:30:00 2012-07-19 23:00:00 2012-07-19 23:30:00 
                NaN            23.91000            23.83286 
```

此外，有谁知道如何查找每个日期的列表中存在多少个值？我很感激任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T13:54:56.847

有很多选择：

*   **堆栈**（也适用于列表中不相等的元素）

    ```
    L <- list(a=1, b=2, c=3)
    stack(L)
    #   values ind
    # 1      1   a
    # 2      2   b
    # 3      3   c

    L <- list(a=1, b=2, c=c(3,4))
    stack(L)
    #   values ind
    # 1      1   a
    # 2      2   b
    # 3      3   c
    # 4      4   c 
    ```

要仅绘制值，您可以这样做`plot(stack(L)$values)`

*   **unlist**（也适用于不相等的列表元素，名称会相应更改）

    ```
    L <- list(a=1, b=2, c=3)
    unlist(L)
    # a b c 
    # 1 2 3 

    unname(unlist(L))            ## using unname to remove the names
    # 1 2 3 

    L <- list(a=1, b=2, c=c(3,4))
    unlist(L)
    # a b c1 c2                  ## note the automatic name assignment here
    # 1 2  3  4 
    ```

要绘图，您可以这样做：（`plot(unlist(L))`或）等效地`plot(unname(unlist(L)))`

*   **as.data.frame**（元素不相等，值会被**回收**，小心！）。这在这里用处不大（如果你必须绘制，至少不是直截了当的，就像你的情况一样）。

    ```
    L <- list(a=1, b=2, c=3)
    as.data.frame(L)
    #   a b c
    # 1 1 2 3

    L <- list(a=1, b=2, c=c(3,4))
    as.data.frame(L)
    #   a b c
    # 1 1 2 3
    # 1 1 2 4 
    ```

# java - 使用 AspectJ 将抽象类更改为非抽象类？

> ID：15638592
> 
> 赞同：0
> 
> 时间：2013-03-26T13:43:40.923
> 
> 标签：java, aop, aspectj

据我所知，我可以使用 AspectJ 来替换具体实现的抽象方法。

是否也可以使用 AspectJ（或另一种 AOP 语言）将类的定义从抽象更改为非抽象？（在使用类型间声明为抽象类中的所有抽象方法提供具体实现之后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:15:19.137

根据您的评论，我建议这样做：

*   让你上课非抽象（删除 absteact 关键字）
*   提供引发运行时异常的默认实现

这将迫使您的库的用户为“抽象”方法提供 impls，但允许您的类是具体的。

此模式已在 JDK 中使用。

# select - 选择隐藏输入的值

> ID：15638595
> 
> 赞同：1
> 
> 时间：2013-03-26T13:43:57.177
> 
> 标签：select, input, hidden

我知道已经有很多关于这个的话题，我想我都读过了，但我仍然无法让它发挥作用。

我需要将选择的值从我的选择更新为隐藏的输入字段。

例如，当我尝试此代码时，它不起作用。当我检查源代码时，值仍然是空的..

我究竟做错了什么？

```
 <form>
    <select id="dropdown" name="dropdown" onchange="changeHiddenInput(this)">
        <option value="j.hotmail.com">Jens</option>
        <option value="a.hotmail.com">Adam</option>
        <option value="d.homtail.com">Dan</option>
    </select>
    <input type="hidden" name="hiddenInput" id="hiddenInput" value="" />
 </form>

    function changeHiddenInput (objDropDown)
    {
        var objHidden = document.getElementById("hiddenInput");
        objHidden.value = objDropDown.value; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:47:16.277

我认为你需要这个：-

```
function changeHiddenInput (objDropDown)
{
   document.getElementById("hiddenInput").value = objDropDown.value; 
} 
```

检查[演示](http://jsfiddle.net/ssilas777/JBusc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:52:35.510

使用 jQuery 更容易：

```
var objHidden = $('#hiddenInput').val(objDropDown); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:12:57.717

我发现有时您需要使用父表单才能访问子输入。不知道为什么。在这种情况下，给表单一个 id：

```
<form id="hotmail"> 
    <!-- Form stuff -->
</form> 
```

由于您只有一个隐藏输入，您可以使用 jQuery 来访问它，如下所示：

```
var selectedValue = $("#dropdown option:selected").val();
$("#hotmail input[type=hidden]").val(selectedValue); 
```

# vba - 为什么视频不能完全停在书签上？

> ID：15638604
> 
> 赞同：0
> 
> 时间：2013-03-26T13:44:09.313
> 
> 标签：vba, powerpoint, powerpoint-2010

我制作了一个测试视频来检查 PP 链接的准确性。如果有人单击文本，则视频应从开始书签播放到结束书签。它并不总是在结束书签上停止！为什么？powerpoint 上的性能问题？

我想放图像，但我不能，因为我需要至少 10 个声望。

**更新：** 我正在使用操作设置。

带触发器的代码

```
Private Sub setStartAndEndPointOnVideoTrigger(activeSlide As Slide, clickShape As Shape, movieShape As Shape, _
                          startBookmark As MediaBookmark, endBookmark As MediaBookmark)

   Dim oEffectStart As Effect
   Dim oEffectEnd As Effect
   Dim obhvEffect As AnimationBehavior
   Dim delayTime As Double

   delayTime = (endBookmark.Position - startBookmark.Position) / 1000

   With activeSlide
   Set oEffectStart = .TimeLine.InteractiveSequences.Add _
                        .AddTriggerEffect(movieShape, msoAnimEffectMediaPlayFromBookmark, _
                        msoAnimTriggerOnShapeClick, clickShape, startBookmark.Name)

   Set oEffectEnd = .TimeLine.InteractiveSequences.Add _
                        .AddTriggerEffect(movieShape, msoAnimEffectMediaPause, _
                        msoAnimTriggerOnShapeClick, clickShape)

   Set obhvEffect = oEffectStart.Behaviors.Add(msoAnimTypeCommand)
   obhvEffect.CommandEffect.Bookmark = startBookmark.Name

   oEffectEnd.Timing.TriggerType = msoAnimTriggerWithPrevious
   oEffectEnd.Timing.TriggerDelayTime = delayTime
   End With

   End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:43:57.077

由于我对 2010 版本中的一些新方法不太熟悉，因此可能存在其他问题，但是，您使用 With 语句似乎可能存在一些问题。尝试这个：

```
Private Sub setStartAndEndPointOnVideoTrigger(activeSlide As Slide, clickShape As Shape, movieShape As Shape, _
                          startBookmark As MediaBookmark, endBookmark As MediaBookmark)

    Dim oEffectStart As Effect
    Dim oEffectEnd As Effect
    Dim obhvEffect As AnimationBehavior
    Dim delayTime As Double

    delayTime = (endBookmark.Position - startBookmark.Position) / 1000

    With activeSlide.TimeLine.InteractiveSequences

        With .Add(1)
            Set oEffectStart = .AddTriggerEffect(movieShape, msoAnimEffectMediaPlayFromBookmark, _
                                msoAnimTriggerOnShapeClick, clickShape, startBookmark.Name)
        End With

        With .Add(2)
            Set oEffectEnd = .AddTriggerEffect(movieShape, msoAnimEffectMediaPause, _
                            msoAnimTriggerOnShapeClick, clickShape)
        End With

    End With

    Set obhvEffect = oEffectStart.Behaviors.Add(msoAnimTypeCommand)
    obhvEffect.CommandEffect.Bookmark = startBookmark.Name

    oEffectEnd.Timing.TriggerType = msoAnimTriggerWithPrevious
    oEffectEnd.Timing.TriggerDelayTime = delayTime

End Sub 
```

# sql - 如何从时间戳中提取一致的年份

> ID：15638605
> 
> 赞同：2
> 
> 时间：2013-03-26T13:44:12.580
> 
> 标签：sql, postgresql, timezone, timestamp-with-timezone

我正在尝试使用 Postgres 函数`extract()`从`timestamptz`列中获取年份，但得到了意想不到的结果。我预计它将使用 UTC，但似乎使用系统的本地时区（在我的情况下为 EST）。无论时间戳或系统的时区是什么，如何获得`extract`返回 UTC 的函数？

示例 1：

```
testdb=# create table foo ( t timestamptz check( extract(year from t)::int = 2013) );

testdb=# \d foo
              Table "public.foo"
 Column |           Type           | Modifiers
--------+--------------------------+-----------
 t      | timestamp with time zone |
Check constraints:
    "foo_t_check" CHECK (date_part('year'::text, t)::integer = 2013)

testdb=# insert into foo values ('2013-01-01 01:49:05.048+00');
ERROR:  new row for relation "foo" violates check constraint "foo_t_check"
DETAIL:  Failing row contains (2012-12-31 20:49:05.048-05). 
```

示例 2：

```
testdb=# SELECT EXTRACT(year FROM '01-01-1970 00:00:00 UTC+01'::timestamp with time zone);
 date_part
-----------
      1969
(1 row) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:03:54.087

利用`at time zone`

```
create table foo (
    t timestamptz
    check (extract(year from t at time zone 'UTC') = 2013)
);

select extract(year from
    '01-01-1970 00:00:00 utc+01'::timestamp with time zone at time zone 'utc'
    );
 date_part 
-----------
      1970 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:49:39.217

我相信这样的事情：

```
extract(year from t::timestamp with time zone) 
```

工作示例：

```
SELECT EXTRACT(year FROM 
               '01-01-1970 00:00:00 UTC+01'::timestamp 
               with time zone) 
```

返回`1970`

# python - 使用python计算不适合内存的数据的平均值和标准差

> ID：15638612
> 
> 赞同：4
> 
> 时间：2013-03-26T13:44:26.140
> 
> 标签：python, statistics

我有很多数据以大型阵列的形式存储在磁盘上。我无法将所有内容完全加载到内存中。

如何计算平均值和标准差？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T13:49:15.227

有一个简单的[在线算法](http://en.wikipedia.org/wiki/Online_algorithm)，通过查看每个数据点一次并使用`O(1)`内存来计算均值和方差。

维基百科[提供以下代码](http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Online_algorithm)：

```
def online_variance(data):
    n = 0
    mean = 0
    M2 = 0

    for x in data:
        n = n + 1
        delta = x - mean
        mean = mean + delta/n
        M2 = M2 + delta*(x - mean)

    variance = M2/(n - 1)
    return variance 
```

该算法也称为[Welford 方法](http://www.johndcook.com/standard_deviation.html)。与其他答案中建议的方法不同，可以证明它具有[很好的数值属性](http://www.johndcook.com/blog/2008/09/26/comparing-three-methods-of-computing-standard-deviation/)。

取方差的平方根得到标准差。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T13:48:24.190

听起来像一道数学题。对于均值，您知道可以取一大块数据的均值，然后取均值的均值。如果块的大小不同，则必须取加权平均值。

对于标准偏差，您必须先计算方差。我建议在计算平均值的同时这样做。对于方差，你有

Var(X) = Avg(X^2) - Avg(X)^2

因此，计算您的数据的平均值，以及您的 (data^2) 的平均值。如上所述聚合它们，然后取差。

那么标准差就是方差的平方根。

请注意，您可以使用迭代器完成所有操作，这可能是最有效的。

# sql - SQL 命令显示分组列和具有特定值的其他列

> ID：15638615
> 
> 赞同：1
> 
> 时间：2013-03-26T13:44:36.353
> 
> 标签：sql, select, group-by

我有下表：

```
+---------+------+------------+
|玩家 |游戏 |状态 |
+---------+------+------------+
|Player01 |GameA |未完成 |
|Player02 |GameA |未完成 |
|Player03 |GameC |已完成 |
|Player04 |GameA |未完成 |
|Player05 |GameB |已完成 |
|Player06 |GameB |已完成 |
|Player07 |GameA |未完成 |
|Player08 |GameA |已完成 |
|Player09 |GameC |未完成 |
|Player10 |GameB |已完成 |
|Player11 |GameB |未完成 |
|Player12 |GameA |已完成 |
......
+---------+------+------------+

```

并希望显示每场比赛的玩家人数和完成游戏的玩家人数：

```
+-----+------+----------+
|游戏 |玩家人数|已完成 |
+-----+------+----------+
|游戏A | 6 | 2 |
|游戏B | 4 | 3 |
|游戏C | 2 | 1 |
...
+-----+------+----------+

```

执行该任务的最简单的 SQL 选择命令是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:46:44.747

尝试这个

```
select Game , count(*) NumPlayers,
sum(case when status = 'completed' then 1 else 0 end) completed 
from table
group by game 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:46:27.277

你想要一个条件求和：

```
select game, count(distinct Player) as NumPlayers,
       sum(case when status = completed then 1 else 0 end) as Status
from t
group by game 
```

# c# - 在不同的行上显示不同的标签

> ID：15638617
> 
> 赞同：2
> 
> 时间：2013-03-26T13:44:47.113
> 
> 标签：c#, asp.net, label, multiline

我基本上希望不同的标签出现在不同的行上。

```
protected void Button2_Click(object sender, EventArgs e)
{
    Label2.Text = Label3.Text + Label1.Text;
} 
```

我希望在`Label1.Text`下面一行显示`Label3.Text`。我不想调整宽度和高度，因为标签中的文本在每个标签中的宽度都不相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:46:23.720

尝试`<br/>`在两者之间使用它应该可以

```
Label2.Text = Label3.Text +"<br/>"+ Label1.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:56:46.830

更优雅的方法：

```
Label2.Text = Label3.Text + Environment.NewLine() + Label1.Text; 
```

# android - 如何在活动中共享变量？

> ID：15638619
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:44:52.723
> 
> 标签：android, list, variables, spinner, settext

如何从 OnItemSelected 中获取变量 parent 并在 onClick 中使用它？我要在 onClick 中执行此操作

```
result = parent.getItemAtPostition(pos).toString();
selected = (TextView) findViewById(R.id.selected);
selected.setText(result); 
```

当我单击按钮时，我希望该结果显示在选定的文本视图中。结果将是微调器中的选定项目。这是第一次使用微调器，所以我不知道。

MainActivity.java

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;

public class MainActivity extends Activity implements OnItemSelectedListener{

String[] test_array;
TextView display, selected;
Button submit;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.test_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    submit = (Button) findViewById(R.id.submit);
    submit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            parent.getItemAtPosition(pos).toString();

        }
    });
}
        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {
            selected = (TextView) findViewById(R.id.selected);
            String result;
            // TODO Auto-generated method stub
            result = parent.getItemAtPosition(pos).toString();

        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:51:25.760

您只需要将变量声明为数据成员，即就像您声明的一样`test_array`，`display`而`selected`不是在`onItemSelected`方法内部。

```
public class MainActivity extends Activity implements OnItemSelectedListener
{

   String[] test_array;
   TextView display, selected;
   Button submit;
   String result;   // <------- declare the variable here and you can access it through out the activity/class. 
```

# c# - 如何使用 .Net 4.0 中包含的 HttpClient 类将文件上传到在 IIS Express 中运行的 Asp.Net MVC 4.0 操作

> ID：15638622
> 
> 赞同：1
> 
> 时间：2013-03-26T13:44:58.023
> 
> 标签：c#, file-upload, asp.net-mvc-4, .net-4.5, dotnet-httpclient

我有一个 C/S 应用程序。我用 Asp.Net MVC 4.0 实现了服务器，客户端在 .Net 4.5 上运行。

我在服务器端有一个控制器动作，如下所示：

```
public JsonResult Upload(string arg1, int arg2)
{
    //do something about arg1 and arg2 here
    ...

    var files = Request.Files;
    if (files.Count > 0)
    {
        foreach(var file in files)
        {
            var ms = new MemoryStream();
            file.InputStream.CopyTo(ms);
            //save it to somewhere
            ...
        }
    }

    ...
} 
```

我创建了一个测试 html 页面来在浏览器中对其进行测试。它按预期工作。

在客户端，我使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)类，它在不涉及文件上传的情况下工作得很好。然而，经过几天的研究，我仍然没有运气在运行 IIS Express 的调试机器中解决这个问题。我发现所有的线索都通向`MultipartFormDataContent`，但仍然无法让它工作，即使我复制了那些示例代码，服务器端仍然无法获取任何东西，所有 args 都是空的，并且`Request.Files`. 我曾经有自己的基于[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)的 http 助手类，它适用于文件上传，但我更喜欢在这个新项目中使用 HttpClient。

那么，如何使用 HttpClient 将文件上传到服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:44:58.023

使用 Fiddler 调试后，将原始 http 消息与 WinMerge 进行比较，我发现 Firefox 和我的程序之间存在差异：

**Firefox（删除了一些标题以使事情变得简单）：**

```
POST http://localhost:53400/Input/Upload HTTP/1.1
Host: localhost:53400
Content-Type: multipart/form-data; boundary=---------------------------1590871622043
Content-Length: ****

-----------------------------1590871622043
Content-Disposition: form-data; name="arg1"

abc
-----------------------------1590871622043
Content-Disposition: form-data; name="arg2"

3
-----------------------------1590871622043
Content-Disposition: form-data; name="uploadfile"; filename="wave.wav"
Content-Type: audio/wav

//file data here
-----------------------------1590871622043-- 
```

**我的程序`MultipartFormDataContent`：**

```
POST http://localhost:53400/Input/Save HTTP/1.1
Content-Type: multipart/form-data; boundary="caac5ea7-8ab4-4682-be40-ecb3ddf3e70a"
Host: localhost:53400
Content-Length: ****

--caac5ea7-8ab4-4682-be40-ecb3ddf3e70a
Content-Disposition: form-data; name=arg1

abc
--caac5ea7-8ab4-4682-be40-ecb3ddf3e70a
Content-Disposition: form-data; name=arg2

3
--caac5ea7-8ab4-4682-be40-ecb3ddf3e70a
Content-Disposition: form-data; name=uploadfile; filename=wave.wav; filename*=utf-8''wave.wav

//file data here
--caac5ea7-8ab4-4682-be40-ecb3ddf3e70a-- 
```

我要注意的最后一件事是，在这些`Content-Disposition`行中，Firefox 引用了所有值，但我的程序没有。人们可以很容易地认为这无关紧要，但最后，我发现这就是确切的原因。

现在我知道了原因，下面是可以工作的代码，就像引用名称一样简单：

```
var multipart = new MultipartFormDataContent();
multipart.Add(new StringContent("abc"), '"' + "arg1" + '"');
multipart.Add(new StringContent("3"), '"' + "arg2" + '"');

// byte[] fileData;
multipart.Add(new ByteArrayContent(fileData), '"' + "uploadfile"+ '"', '"' + "wave.wav" + '"');
//HttpClient http; string url;
var response = await http.PostAsync(url, multipart);
response.EnsureSuccessStatusCode();
//... 
```

# java - Java 字符串到 xml 以列出

> ID：15638626
> 
> 赞同：0
> 
> 时间：2013-03-26T13:45:05.383
> 
> 标签：java, list, xml-parsing

我是 Java 新手，需要一些帮助。我有一个看起来像这样的 XML：

```
String pXML =
"<root>
     <x>1</x>
     <x>2</x>
     <x>3</x>
     <x>4</x>
 </root>" 
```

我想得到一个 List 对象，其中包含 x 标记内的所有值。

我试过 javax.xml.parsers.DocumentBuilderFactory：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); 
DocumentBuilder builder = factory.newDocumentBuilder();
document = (Document) builder.parse( new InputSource( new StringReader(pXML) ) );
Node n = document.getFirstChild();
NodeList n1 = n.getChildNodes();
//and then I go through all the nodes and insert the values into a list 
```

但这不包含 x 节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:51:53.040

您可以使用 XPath 获取所有`x`节点的值，如下所示：

```
public static void main(String[] args) throws SAXException, ParserConfigurationException, IOException, XPathExpressionException {
    final String pXML = "<root><x>1</x><x>2</x><x>3</x><x>4</x></root>";
    final Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(pXML.getBytes()));
    final XPathExpression xPathExpression = XPathFactory.newInstance().newXPath().compile("//x/text()");
    final NodeList nodeList = (NodeList) xPathExpression.evaluate(document, XPathConstants.NODESET);
    final List<String> values = new LinkedList<>();
    for (int i = 0; i < nodeList.getLength(); ++i) {
        values.add(nodeList.item(i).getNodeValue());
    }
    System.out.println(values);
} 
```

输出：

```
[1, 2, 3, 4] 
```

这具有作为一个非常通用的解决方案的优点，如果 XML 的结构发生变化，它很容易适应。

在我看来，它还具有比手动迭代节点更容易理解的优点`Document`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:56:09.167

尝试这个

```
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.CharacterData;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

public class XML {
  public static void main(String arg[]) throws Exception{
    String xmlRecords = "<root><x>1</x><x>2</x><x>3</x><x>4</x></root>";

    DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xmlRecords));

    Document doc = db.parse(is);
    NodeList nodes = doc.getElementsByTagName("x");
    System.out.println(nodes.getLength());
    List<String> valueList = new ArrayList<String>();
    for (int i = 0; i < nodes.getLength(); i++) {
      Element element = (Element) nodes.item(i);

      String name = element.getTextContent();

     // Element line = (Element) name.item(0);
      System.out.println("Name: " + name);
      valueList.add(name);
    }

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:46:34.413

尝试`Node n = document.getDocumentElement();`恢复 XML 的根元素

# wcf - WCF 无法访问远程配置设置 (ConnectionString)

> ID：15638627
> 
> 赞同：0
> 
> 时间：2013-03-26T13:45:06.737
> 
> 标签：wcf, configuration, remoting

我的 WCF 服务写入数据库。配置设置（这里特别是连接字符串）来自内部应用程序（可能通过远程处理）。当我使用连接字符串的本地设置时它可以工作，但在从我们的内部应用程序访问连接字符串时失败。

wcf 服务调用正常，但代码在我的连接字符串值被获取的地方中断。

错误： 1) 在更高级别上，client.operationcontract(params) 抛出：'Access Denied' 错误。

2) i) 在内部，配置获取函数会抛出一个模糊的问题：“AppSettings 配置部分中不存在 Key Configuration.ActivatorString” ii) dllxxx.bWebSvcMode 抛出了“System.InvalidOperationException”类型的异常（这个是用于访问配置设置的 dll

这是我使用 wcf 方式的问题吗？

# git - 从原始版本更新我的 Github 存储库

> ID：15638631
> 
> 赞同：1
> 
> 时间：2013-03-26T13:45:10.067
> 
> 标签：git, github, clone, git-push

我有`forked`官方`moodle`回购`https://github.com/moodle/moodle`，然后`cloned`在我的本地机器上。

分叉的 repo 由大约 12-15 个分支组成。

我想用原始版本更新我的 Github 存储库。这样做的过程是：首先我使用更新我的本地存储库`pull upstream`，然后将其推送到我的 Gihub 存储库。

但是推送的命令是，分支`git push origin master`在哪里。`master`那么，我必须为所有分支机构单独执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:48:38.143

`git push origin`

更新所有分支，对吧？除非合并中存在冲突。

如果要推送所有分支，请使用 --all

`git push --all`

见：[http ://thoughtpad.cs3.in/2011/06/13/clone-push-all-remote-branches-with-git/](http://thoughtpad.cs3.in/2011/06/13/clone-push-all-remote-branches-with-git/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:50:02.110

将所有分支推送到仓库

`git push origin --all`

# wix - 如何使用 MajorUpgrade 和 RemoveFeatures 仅删除特定功能并仍然卸载以前版本的产品

> ID：15638632
> 
> 赞同：4
> 
> 时间：2013-03-26T13:45:19.950
> 
> 标签：wix, wix3.6

我从与 VS 2010 一起打包的 Microsoft 安装程序切换到 Wix 3.6。我正在尝试通过使用`<MajorUpgrade/>`标签向我们的用户发布无缝升级，但是我有一个功能我不想在执行此操作时被卸载重大升级。

如下所示，`RemoveFeatures="[ProductFeature]"`这将导致仅删除 ProductFeature 而 DataFeature 将保留，但这会导致条目未从 Windows 的“程序和功能”列表中删除，因为未指定此参数时也是如此。如何在不卸载特定功能的情况下正确升级？

```
<Product Id="*" 
       Name="$(var.MyProject.ProjectName)" 
       Language="1033" 
       Version="2.6.0.0" 
       Manufacturer="Awesome Software (Pty) Ltd"          
       UpgradeCode="D7B99D7F-340D-449D-9C18-5D4A4A9B13D5">       
<Package InstallerVersion="405"
         Compressed="yes"              
         Description="Installs $(var.MyProject.ProjectName)"             
     Keywords="Awesome"
     InstallScope="perMachine"/>

<WixVariable Id="WixUILicenseRtf" Value="$(var.SolutionDir)\awesome.EULA\awesome CE Eula.rtf" />
<MediaTemplate EmbedCab="yes"/>
<MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." 
RemoveFeatures="[ProductFeature]" Schedule="afterInstallInitialize"/>

<Feature Id="ProductFeature" Title="Setup $(var.MyProject.ProjectName)" Level="1">      
  <ComponentGroupRef Id="FilesFragment" />
  <ComponentRef Id="C__5B1F76E18B8F479DAAA1B8C14E4B0638"/>
  <ComponentRef Id="C__5B1F76E18B8F479DAAA1B8C14E4B0639"/>
  <ComponentRef Id="cmpA0688C6933D519CB5D1B6D48D50F1E21"/>
</Feature>

<Feature Id="DataFeature" Title="Data $(var.MyProject.ProjectName)" Level="1" >
  <ComponentGroupRef Id="DataFragment" />
</Feature>

<!-- Wix UI Prompts -->
<Property Id="WIXUI_INSTALLDIR" Value="APPLICATIONFOLDER"/>            
<UIRef Id="WixUI_InstallDir"/>

<Binary Id="myCustomActionsDLL" SourceFile="$(var.CustomActions.TargetDir)MaxCut.CustomActions.CA.dll"/>

<InstallExecuteSequence>
  <Custom Action="CA_myCustomAction" Before="InstallInitialize"/>
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:10:09.383

如果您不卸载所有功能，Windows Installer 会将旧产品保留在计算机上。`Condition`当卸载期间 a under a`Feature`评估为 false时，通常会发生这种情况。您已经找到了另一种方法来应对这种情况。这几乎每次发生时都会使人们感到困惑。

简短的回答：你不能用功能做你想做的事情。

# ios - 绘制矩形没有被调用

> ID：15638633
> 
> 赞同：0
> 
> 时间：2013-03-26T13:45:20.913
> 
> 标签：ios, uiviewcontroller, core-graphics

所以我有一个图表绘图视图。它位于以模态形式呈现的视图控制器中。问题是 drawInRect 没有被调用。这是为什么？视图在 Interface Builder 中设置，并初始化...

```
- (void)viewWillAppear:(BOOL)animated
{
    minVal = [self.delegate minValue];
    maxVal = [self.delegate maxValue];
    noSteps = [self.delegate noSteps];
    stepVal = [self.delegate stepValue];
    data = [self.delegate dataArray];
    formulaName = [self.delegate formulaName];
    self.titleLabel.text = formulaName;

    // draw the chart
    self.chartView = [[PSChartIOS alloc] initWithFrame:self.chartView.bounds andChartType:PSChartTypeColumn];
    [self.chartView setDataSource:self];
    [self.chartView setChartTitle:@""];
    [self.chartView setPanOXAxis:YES];
    [self.chartView setTitleColor:[UIColor redColor]];
    [self.chartView setStartAtTheEnd:NO];
    //[chart setAutoresizingMask: UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];

    [self.chartView loadData];
    [self.chartView setNeedsDisplay];
    // NSLog(@"autoresize mask :%d",self.view.autoresizingMask);

//    [self.view addSubview:self.chartView];
//    [self.chartView addSubview:chart];

    [super viewWillAppear:animated];
} 
```

所有的委托方法都被调用，所以视图有它的数据......它从不绘制......我有一种感觉，问题可能是 self.chartView.bounds .. 但这应该只是返回在 IB 中设置的边界...

发现问题：

```
 NSLog(@"the bounds %@",NSStringFromCGRect( self.chartView.bounds)); 
```

返回

```
the bounds {{0, 0}, {0, 0}} 
```

我以为它会从 IB 那里得到限制 .. 显然不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:49:17.867

您已注释掉将 PSChartIOS 视图放入视图层次结构的行。

```
//    [self.view addSubview:self.chartView]; 
```

我敢打赌，一旦你这样做了，一切都会好起来的。

你的框架也没有意义。使用类似的框架创建视图

```
CGRectMake(0,0,200,200). 
```

这将测试以确保您可以在视图控制器的视图中看到 200x200 的图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:46:59.810

我在您的代码中看不到`drawInRect`方法调用。

如果您希望`setNeedsDisplay`调用它。然后就不能自动调用了。如果您创建了自己的方法，那么您需要显式调用它。

但是它会调用`drawRect`.

编辑：

你打错了**没有方法叫它`drawInRect:`是`drawRect:`**

```
- (void)drawRect:(CGRect)rect {
    // Drawing code
    // only draws what is specified by the rect parameter
} 
```

# graphite - 统计发送方法

> ID：15638635
> 
> 赞同：0
> 
> 时间：2013-03-26T13:45:22.727
> 
> 标签：graphite, statsd

有谁知道 sampleRate 检查和随机数在 Send 方法中的用途，例如在 c# 示例中：

```
if (sampleRate < 1.0)
{
  foreach (var stat in stats)
  {
    if (Random.NextDouble() <= sampleRate)
{ 
```

似乎你只会在 else 部分调用代码 - 循环通过统计数据并发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:45:09.303

该代码期望采样率介于 0.0 和 1.0 之间。然后它生成一个随机值，如果它小于 sampleRate 则发送统计信息。这是一种基于您从`Random.NextDouble()`.

这样做是因为如果你有很多统计数据，你可能不需要发送每一个。那么采样应该给你一个足够好的近似值。

# html - 浏览器无法正确显示阿拉伯字体

> ID：15638641
> 
> 赞同：2
> 
> 时间：2013-03-26T13:45:38.177
> 
> 标签：html, css, encoding, fonts, arabic

这是我的herokuapp：[https](https://majeddh.herokuapp.com) ://majeddh.herokuapp.com ；我现在用它来测试字体。

这是我的 HTML 代码：

```
<?php echo 'majed'?><html>
<script src="http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>

<style>
    @import url('lateef.css');

    h1 {
        font-family: 'Lateef';
    }

    .wf-active h1 {
        visibility: visible;
    }
    h2{
    font-family:'lateef1';}
</style>

<body>
<h1>This headline will be hidden until Droid Sans is completely loaded.</h1>
<h1>ماجد</h1>
<h2>This headline will be hidden until Droid Sans is completely loaded.</h2>
<h2>ماجد</h2>
</body>
</html> 
```

这是CSS：

```
@font-face {
      /*this is arabic*/
  font-family: 'Lateef';
  font-style: normal;
  font-weight: 400;
  src: url(https://majeddh.herokuapp.com/FS_Metal2.TTF) format('truetype');
}
@font-face {
       /*this is english*/
  font-family: 'Lateef1';
  font-style: normal;
  font-weight: 400;
  src: url(https://majeddh.herokuapp.com/FS_Metal1.ttf) format('truetype');
} 
```

我不知道问题出在哪里；出现英文字体，但没有出现阿拉伯语，我尝试了 3 种不同的字体，但出现了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:55:27.133

代码中名为“Lateef1”的字体实际上是巴洛克字体，不包含任何阿拉伯字母。名为“Lateef”的字体是 Lucida Grande，但出于某种原因，它甚至不用于页面上的英文字母。这可能是由对未经许可的使用进行的一些检查引起的。您应该检查您是否可以合法地将字体用作可下载字体；这需要版权所有者的许可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:57:57.967

当我使用 Firefox 访问您的页面时，Firebug 控制台显示：

“网络错误：404 未找到 - [https://majeddh.herokuapp.com/FS_Metal2.ttf](https://majeddh.herokuapp.com/FS_Metal2.ttf) ”

这似乎解释了一切——字体文件丢失（在服务器上）。

# python - Python中的高斯消除有标准解决方案吗？

> ID：15638650
> 
> 赞同：30
> 
> 时间：2013-03-26T13:46:04.527
> 
> 标签：python, matrix, numpy

是否存在`scipy/numpy/...`用于矩阵高斯消元的标准方法？

通过谷歌可以找到很多片段，但如果可能的话，我更愿意使用“受信任的”模块。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-28T09:43:44.393

我终于发现，它可以使用**LU 分解**来完成。这里**U**矩阵表示线性系统的简化形式。

```
from numpy import array
from scipy.linalg import lu

a = array([[2.,4.,4.,4.],[1.,2.,3.,3.],[1.,2.,2.,2.],[1.,4.,3.,4.]])

pl, u = lu(a, permute_l=True) 
```

然后`u`读取

```
array([[ 2.,  4.,  4.,  4.],
       [ 0.,  2.,  1.,  2.],
       [ 0.,  0.,  1.,  1.],
       [ 0.,  0.,  0.,  0.]]) 
```

根据系统的可解性，该矩阵具有上三角形或梯形结构。在上述情况下，出现一行零，因为矩阵只有 rank `3`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-04T15:56:44.107

一个值得检查的功能是`_remove_redundancy`，如果您希望删除重复或冗余的方程：

```
import numpy as np
import scipy.optimize

a = np.array([[1.,1.,1.,1.],
              [0.,0.,0.,1.],
              [0.,0.,0.,2.],
              [0.,0.,0.,3.]])
print(scipy.optimize._remove_redundancy._remove_redundancy(a, np.zeros_like(a[:, 0]))[0]) 
```

这使：

```
[[1\. 1\. 1\. 1.]
 [0\. 0\. 0\. 3.]] 
```

作为@flonk 答案的注释，使用 LU 分解可能并不总是给出所需的缩减行矩阵。例子：

```
import numpy as np
import scipy.linalg

a = np.array([[1.,1.,1.,1.],
              [0.,0.,0.,1.],
              [0.,0.,0.,2.],
              [0.,0.,0.,3.]])

_,_, u = scipy.linalg.lu(a)
print(u) 
```

给出相同的矩阵：

```
[[1\. 1\. 1\. 1.]
 [0\. 0\. 0\. 1.]
 [0\. 0\. 0\. 2.]
 [0\. 0\. 0\. 3.]] 
```

即使最后 3 行是线性相关的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-30T23:55:31.300

您可以使用符号数学python库`sympy`

```
import sympy as sp

m = sp.Matrix([[1,2,1],
           [-2,-3,1],
           [3,5,0]])

m_rref, pivots = m.rref() # Compute reduced row echelon form (rref).

print(m_rref, pivots) 
```

这将以简化的梯队形式输出矩阵，以及枢轴列的列表

```
Matrix([[1, 0, -5],
        [0, 1,  3],
        [0, 0,  0]])

(0, 1) 
```

# mysql - mysql中的考勤系统

> ID：15638655
> 
> 赞同：-4
> 
> 时间：2013-03-26T13:46:17.267
> 
> 标签：mysql, view, pivot

我有这三个表：

学生表：

```
id | name
1  | Charles
2  | Peter
3  | Mary
4  | John
5  | Mike
... 
```

周表：

```
id | week | year
1  | 1    | 2012
2  | 3    | 2012
3  | 6    | 2012
4  | 8    | 2012
5  | 9    | 2012
6  | 12   | 2012
... 
```

考勤表：

```
id | student | week | control
1  | 1       | 1    | P (present)
1  | 2       | 1    | A (absent)
1  | 1       | 3    | P
1  | 2       | 3    | A
1  | 3       | 9    | P 
```

我需要的是这样的 Pivot 视图，但我不知道如何在 MySQL 中获得这样的结构：

```
id | student | week-1 | week-3 | week-9
1  | Charles | P      | P      | A
2  | Peter   | A      | A      | P
3  | Mary    | P      | A      | P 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:00:05.493

MySQL 没有数据透视函数，但您可以使用带有`CASE`表达式的聚合函数来复制它。您的代码将类似于以下内容：

```
select s.id,
  s.name,
  max(case when week=1 then control else 'A' end) Week1,
  max(case when week=3 then control else 'A' end) Week3,
  max(case when week=9 then control else 'A' end) Week9
from students s
inner join attendance a
  on s.id = a.student
group by s.id, s.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d264f0/5)

如果`week`要返回的值数量未知，则需要在准备好的语句中使用动态 SQL。代码将是：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(CASE WHEN week = ',
      week,
      ' THEN control else ''A'' END) AS week',
      week
    )
  ) INTO @sql
FROM weeks;

SET @sql 
  = CONCAT('SELECT s.id,
              s.name, ', @sql, ' 
            from students s
            inner join attendance a
              on s.id = a.student
            group by s.id, s.name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d264f0/7)

结果将是：

```
| ID |    NAME | WEEK1 | WEEK3 | WEEK6 | WEEK8 | WEEK9 | WEEK12 |
-----------------------------------------------------------------
|  1 | Charles |     P |     P |     A |     A |     A |      A |
|  2 |   Peter |     A |     A |     A |     A |     A |      A |
|  3 |    Mary |     A |     A |     A |     A |     P |      A | 
```

注意：如果要返回表中的所有`Students`内容，而不管它们在表中是否有匹配的行`attendance`，那么您应该使用`LEFT JOIN`：

```
select s.id,
  s.name,
  max(case when week=1 then control else 'A' end) Week1,
  max(case when week=3 then control else 'A' end) Week3,
  max(case when week=9 then control else 'A' end) Week9
from students s
left join attendance a
  on s.id = a.student
group by s.id, s.name 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/d264f0/8)。

# php - 连接 for 循环内的值以在循环外使用

> ID：15638658
> 
> 赞同：0
> 
> 时间：2013-03-26T13:46:22.300
> 
> 标签：php

我正在建立一个网站，其中包含存储在 2 个不同表中的产品详细信息和图像。我不想加入表格，所以我有 2 个查询来获取详细信息。

我所做的是通过`product id`抓取所有图像。问题是，我想存储所有图像 url， `$img_block`这样我就可以显示产品详细信息和所有图像，除了第一个产品。所有其他产品都包含产品的先前图像。

```
product 1 : image p1-1 and image p1-2
product 2 : image p1-1 image p1-2 image p2-1
product 3 : image p1-1 image p1-2 image p2-1 image 3-1 
```

我的代码：

```
foreach ($products as $key=>$product):

$images = $this->control_model->product_images($product['pid']);

            foreach ($images as $image):

            $img_block .='<img src="'.$image['url'].'" height="75px" width="75px">' ;

            endforeach;

$msg .= '<div class="one_half_full">
            <div class="listbox">
            <div class="list_text">

            <h4 style="font-weight:bold"><a href="#">'.$product['title'].'</a></h4>
            <p>
              <div class="clearfix" id="images"> 
               '.$img_block.'
              </div>';

endforeach; 
```

有人可以让我知道如何连接正确的图片网址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:51:14.600

只需初始化之`$img_block`类的：（我添加最后的报价......）

```
foreach ($products as $key=>$product):

$images = $this->control_model->product_images($product['pid']);
$img_block = '';
            foreach ($images as $image):

            $img_block .='<img src="'.$image['url'].'" height="75px" width="75px">' ;

            endforeach;

$msg .= '<div class="one_half_full">
            <div class="listbox">
            <div class="list_text">

            <h4 style="font-weight:bold"><a href="#">'.$product['title'].'</a></h4>
            <p>
              <div class="clearfix" id="images"> 
               '.$img_block.'
              </div>';

endforeach; 
```

# inno-setup - 如果已安装旧版本，则创建将执行更新的安装程序

> ID：15638663
> 
> 赞同：21
> 
> 时间：2013-03-26T13:46:28.210
> 
> 标签：inno-setup, updates

我正在尝试为我的软件配置 Inno 设置（这是一个 C# 软件）。我计划发布我的软件的多个版本，如果我的应用程序的旧版本已经安装在计算机上，我想更改 Inno 设置安装程序界面。在这种情况下，用户不能更改安装目录。

有四种情况：

第一种情况：这是我的产品的第一次安装，Inno设置应该正常进行。

第二种情况：产品已经安装并且安装程序包含更新的版本。用户无法选择目标文件夹。他可以运行更新。

第三种情况：如果安装程序包含比已安装版本更旧的版本，更新将被禁用并应显示一条消息。

第四种情况：安装程序版本与安装版本相同。如果需要，用户可以修复他的实际版本。

是否可以使用 InnoSetup 做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T14:05:22.523

`AppID`如果您在应用程序的生命周期内保持不变，Inno Setup 已经自动处理案例 1、2 和 4 。
您还可以使用以下`[Setup]`指令隐藏目录和组页面：

```
DisableDirPage=auto
DisableGroupPage=auto 
```

有关详细信息，请参阅此[ISXKB 文章](http://vincenzo.net/isxkb/index.php?title=Upgrades)。

对于案例 3，假设您的文件版本控制正确，Inno 不会降级任何东西，但它实际上不会警告用户。为此，您需要添加代码来检查这一点，很可能是在`InitializeSetup()`事件函数中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T14:09:14.513

如果您想为用户提供一些反馈，您可以尝试类似的方法。首先，您的更新应该与`AppId`您的主应用程序具有相同的名称。然后您可以设置一些检查，这将显示消息以通知用户有关状态。

```
#define MyAppVersion "1.2.2.7570"
#define MyAppName "MyApp Update"

[Setup]
AppId=MyApp
AppName={#MyAppName}
AppVersion={#MyAppVersion}
DefaultDirName={reg:HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\MyApp_is1,InstallLocation}
DisableDirPage=True

[CustomMessages]
MyAppOld=The Setup detected application version 
MyAppRequired=The installation of {#MyAppName} requires MyApp to be installed.%nInstall MyApp before installing this update.%n%n
MyAppTerminated=The setup of update will be terminated.

[Code]
var
InstallLocation: String;

function GetInstallString(): String;
var
InstPath: String;
InstallString: String;
begin
InstPath := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\MyApp_is1');
InstallString := '';
if not RegQueryStringValue(HKLM, InstPath, 'InstallLocation', InstallString) then
RegQueryStringValue(HKCU, InstPath, 'InstallLocation', InstallString);
Result := InstallString;
InstallLocation := InstallString;
end;

function InitializeSetup: Boolean;
var
V: Integer;
sUnInstallString: String;
Version: String;
begin
    if RegValueExists(HKEY_LOCAL_MACHINE,'Software\Microsoft\Windows\CurrentVersion\Uninstall\MyApp_is1', 'UninstallString') then begin
      RegQueryStringValue(HKEY_LOCAL_MACHINE,'Software\Microsoft\Windows\CurrentVersion\Uninstall\MyApp_is1', 'DisplayVersion', Version);
      if Version =< ExpandConstant('{#MyAppVersion}') then begin 
          Result := True;
          GetInstallString();
       end
       else begin
MsgBox(ExpandConstant('{cm:MyAppOld}'+Version+'.'+#13#10#13#10+'{cm:MyAppRequired}'+'{cm:MyAppTerminated}'), mbInformation, MB_OK);
         Result := False;
  end;
end
else begin
  MsgBox(ExpandConstant('{cm:MyAppRequired}'+'{cm:MyAppTerminated}'), mbInformation, MB_OK);
  Result := False;
end;
end; 
```

# macos - Mac 应用程序 | 代码签名 | 不通过 Mac App Store 分发

> ID：15638672
> 
> 赞同：1
> 
> 时间：2013-03-26T13:46:49.290
> 
> 标签：macos, code-signing, codesign, dmg, code-signing-certificate

我们的应用程序最初不会通过 mac 应用商店分发，它将通过 DMG 文件，

那么在这种情况下，是否应该签署/认证申请？

我在其中一台测试机器上试过，它显示警告，这个应用程序是从互联网下载的，所以你不能运行，如何摆脱这个，

如果我让应用程序签名，它会解决这个问题，还是有任何其他程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:58:36.250

是的，您应该签署您的应用程序，即使您没有将其提交到 App Store。有关如何执行此操作的信息，请参阅[Developer ID 和 Gatekeeper 指南。](https://developer.apple.com/resources/developer-id/)是的，这就是您看到警告的原因。

默认情况下，`System Preferences > Security & Privacy`设置为允许来自`Mac App Store and identified developers`. 通过签署您的应用程序，您就是一个`identified developer`. 将其设置为`Anywhere`允许用户安装未签名的应用程序（并使他们更容易受到恶意软件、病毒等的攻击）

# vba - Powerpoint VBA 表格和对象对齐

> ID：15638681
> 
> 赞同：0
> 
> 时间：2013-03-26T13:47:13.743
> 
> 标签：vba, powerpoint

我有一个宏，它生成一个包含 3 列和动态行数的表。第三列标记为“趋势”，宏创建一个向上、向下或向左的箭头，但这些箭头未与表格分组。

在第三列中，宏在表格单元格中垂直和水平居中插入“-”，这样我就知道中心了，一旦宏运行，我必须重新对齐箭头。

是否有代码来确定“-”的 x,y 坐标或确定行高以使第三列中每个单元格中的箭头居中？行高是动态的，取决于同一行中其他单元格中包含的文本量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:45:35.860

既然你只是用“-”作为定位辅助，直接加上你想要的形状不是更简单吗？

简单示例，假设您在幻灯片 1 上选择了一个表格：

```
Dim oSh As Shape
Dim oNewSh As Shape
Set oSh = ActiveWindow.Selection.ShapeRange(1).Table.Cell(1, 2).Shape
Set oNewSh = ActivePresentation.Slides(1).Shapes.AddShape(msoShapeSmileyFace, oSh.Left, oSh.Top, oSh.Width, oSh.Height) 
```

这使单元格充满了笑脸；相反，您需要使用 oSh 的坐标（它代表单元格的矩形形状），并执行所需的任何数学运算以使您的形状在其中居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:13:49.707

假设幻灯片“一”上只有一个表格形状，其单元格尺寸为 2x2，并且您的连字符在单元格（2,2）中，那么您必须添加两个参数：

```
Sub test()

Dim A, B
     A = ActivePresentation.Slides(1).Shapes(1).Table.Cell(2,2).Shape.TextFrame.TextRange.Lines(1).BoundTop
     B = ActivePresentation.Slides(1).Shapes(1).Top

Debug.Print A + B

ActivePresentation.Slides(1).Shapes.AddShape msoShapeRectangle, 100, A + B, 20, 20
End Sub 
```

其中 A+B 约为。你在找什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:12:40.843

`Shape`您可以简单地使用特殊字符，而不是使用“-”字符作为占位符，在其上放置一个箭头。

假设`tblCell`已将尺寸标注为 Shape 并已设置为特定单元格的`.Shape`，那么您可以执行以下操作：

```
tblCell.TextFrame.TextRange.Text = ChrW(&H25B2) 'Up arrow 
```

或者：

```
tblCell.TextFrame.TextRange.Text = ChrW(&H25BC) 'Down arrow 
```

然后对齐它：

```
tblCell.TextFrame.TextRange.ParagraphFormat.Alignment = ppAlignCenter 
```

# android - (Android - xml) Gridview 和 ImageView 缩放类型 centerCrop

> ID：15638682
> 
> 赞同：1
> 
> 时间：2013-03-26T13:47:14.110
> 
> 标签：android, android-layout, gridview, imageview, crop

我正在尝试在 a 中显示图像列表`GridView`，并且我只想裁剪此列表中图像的中心。下面是每个图像项的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/place_image"
        android:src="@drawable/ic_res"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:scaleType="centerCrop"/> 
```

这是包含网格视图的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout android:id="@+id/upload_view"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="vertical"
                  android:background="#f6f6f6"
                  android:padding="10dp"
                  android:visibility="gone">
        <LinearLayout android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="horizontal">
            <ImageButton android:id="@+id/photo_select"
                    android:layout_width="50dp"
                    android:layout_height="40dp"
                    android:scaleType="fitXY"
                    android:src="@drawable/ic_photo"/>
            <EditText android:id="@+id/photo_caption"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:hint="@string/caption"
                      android:inputType="textMultiLine"/>
        </LinearLayout>
        <TextView  android:id="@+id/photo_path"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:text="" />

        <Button android:id="@+id/photo_upload"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/upload_photo"
                android:textStyle="bold"
                android:textColor="#ffffff"
                android:layout_gravity="right"/>
    </LinearLayout>
    <TextView android:id="@+id/no_photos"
              android:layout_height="wrap_content"
              android:layout_width="match_parent"
              android:gravity="center"
              android:textStyle="bold"
              android:textSize="20dp"
              android:text="@string/no_photos"
              android:visibility="gone" />
    <GridView android:id="@+id/grid_photos"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="20dp"
            android:columnWidth="120dp"
            android:numColumns="auto_fit"
            android:verticalSpacing="10dp"
            android:horizontalSpacing="10dp"
            android:stretchMode="columnWidth"
            android:gravity="center" />
</LinearLayout> 
```

这是我得到的结果：

![在此处输入图像描述](../Images/6303445ea94957437621afb25cc67ff2.png)

这很奇怪，因为图像都以一种奇怪的方式裁剪。以下是我的原始图片之一：

![在此处输入图像描述](../Images/d481e1c1d53618ad07d23dc702f099ae.png)

我从来没有遇到过这个问题，所以如果你们中的任何人熟悉这个，请帮我找出原因。谢谢！

Ps：我猜这只能是xml布局的问题所以我认为没有必要在这里包含我的android源代码。但如果确实如此，请让我知道问题可能来自哪里，我将用我的代码编辑这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:03:04.640

原因是`GridView`清除了为图块设置的所有布局参数，并设置了自己的布局参数，因此最好`ImageView`在`RelativeLayout`. 这与所有`AdapterView`类似的 ListView`Gallery`等都是相同的。

# erlang - ejabberd 添加 iq 处理程序

> ID：15638683
> 
> 赞同：1
> 
> 时间：2013-03-26T13:47:15.747
> 
> 标签：erlang, ejabberd

我创建了一个 iq 处理程序。调用它时，它会打印出这个错误

```
{function_clause,[{jlib,iq_to_xml,[ok]},
                     {gen_iq_handler,process_iq,6},
                     {gen_iq_handler,handle_info,2},
                     {gen_server,handle_msg,5},
                     {proc_lib,init_p_do_apply,3}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:45:19.487

您应该从您的 iq 处理程序返回`#iq{}`记录而不是`ok`原子。让我们看看您的代码更具体。

# sql-server - 带有逻辑的 SqlServer 批量插入

> ID：15638687
> 
> 赞同：1
> 
> 时间：2013-03-26T13:47:28.620
> 
> 标签：sql-server, ssis, sql-server-2008-r2, bulkinsert, bcp

我正在使用 SqlServer 2008R2，我需要非常快地加载具有以下结构的 9 亿条记录。

varchar(20)
varchar(10)
varchar(50)
varchar(15)
varchar(20)
varchar(10)
varchar(4)
varchar(3)
varchar(10)
datetime
datetime
datetime
datetime
decimal(19, 2)
decimal(19, 2）
小数（19, 2）
小数（19, 2）
小数（19, 2）
小数（19, 2）
小数（19, 2）
小数（19, 2）
小数（19, 2）

（我有各种格式，一些多达 100 列数据 - 总共需要加载 221GB 的数据）

问题是数据来自旧的 OS390，如果日期为空，他们会将其发送到文本文件中，如 99999999。

将这些数据转换为空的最佳方法是什么？在 Oracle 中，您可以将逻辑放入格式中，您可以使用 BCP 做到这一点吗？或者是使用 SSIS 同时加载和转换的最快方法？或者用触发器什么的？？

加载为文本，然后在数据库中进行转换，由于数据量大，我认为这不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:33:35.523

您始终可以使用 .NET 客户端应用程序以任何您想要的方式转换数据。我刚刚通过简单的设置以 430GB/小时的速度加载数据：

我刚刚启动了 8 个 .NET 线程，并让它们`SqlBulkCopy`以 10m 行的批次流式传输数据。每个线程都插入到自己的堆表中。这是一种最简单的设置。这在我的 4*2 Core i7 桌面上运行，SQL Server 在同一台机器上。SQL 有大约 50% 的 CPU 使用率，而我的应用程序有另外 50%。因此，通过使用两台机器和一个快速网络，吞吐量可以轻松翻倍。

这允许您将最终数据直接插入到目标表中（理想情况下，该表是分区的，因此您可以加载到单独的分区中）。

# export - 需要一个带有分组列的 Displaytag 导出的好例子

> ID：15638690
> 
> 赞同：0
> 
> 时间：2013-03-26T13:47:39.667
> 
> 标签：export, decorator, displaytag

我想要一个很好的例子来展示如何使用装饰器来导出带有 displaytag 的报告。我查看了 displaytag 提供的名为“所见即所得”的示例，但单击“showcode”时，它没有显示其源代码。

我是 displaytag 的新手，想导出他们在 html 中看到的报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:15:01.673

看看这些链接

[http://www.displaytag.org/10/export.html](http://www.displaytag.org/10/export.html)

和本教程的源代码：

[http://www.dzone.com/tutorials/java/struts/struts-example/struts-display-tag-example-1.html](http://www.dzone.com/tutorials/java/struts/struts-example/struts-display-tag-example-1.html)

# java - 如何运行这个使用 POI 读取 excel 的程序

> ID：15638691
> 
> 赞同：0
> 
> 时间：2013-03-26T13:47:44.903
> 
> 标签：java, eclipse

我尝试在 Eclipse 中运行此代码，但我得到了这个：选择不包含主类型 Eclipse。有谁知道我会怎么做？我是java新手，我需要帮助！我尝试制作的程序是使用 POI 读取 excel 文件！:)

```
import java.io.File;    
import java.io.FileInputStream;    
import java.util.ArrayList;    
import java.util.Iterator;    
import java.util.List;    
import org.apache.poi.hssf.usermodel.HSSFCell;    
import org.apache.poi.hssf.usermodel.HSSFRow;    
import org.apache.poi.hssf.usermodel.HSSFSheet;    
import org.apache.poi.hssf.usermodel.HSSFWorkbook;    
import org.apache.poi.poifs.filesystem.POIFSFileSystem;    

public class sample2 {

private void sample2(test)

FileInputStream file = new FileInputStream(new File("C:\\test.xls"));

//Get the workbook instance for XLS file 
HSSFWorkbook workbook = new HSSFWorkbook(test);

//Get first sheet from the workbook
HSSFSheet sheet = workbook.getSheetAt(0);

//Get iterator to all the rows in current sheet
Iterator<Row> rowIterator = sheet.iterator();

//Get iterator to all cells of current row
Iterator<Cell> cellIterator = row.cellIterator();

 try {

FileInputStream file = new FileInputStream(new File("C:\\test.xls"));

//Get the workbook instance for XLS file 
HSSFWorkbook workbook = new HSSFWorkbook(file);

//Get first sheet from the workbook
HSSFSheet sheet = workbook.getSheetAt(0);

//Iterate through each rows from first sheet
Iterator<Row> rowIterator = sheet.iterator();
while(rowIterator.hasNext()) {
    Row row = rowIterator.next();

    //For each row, iterate through each columns
    Iterator<Cell> cellIterator = row.cellIterator();
    while(cellIterator.hasNext()) {

        Cell cell = cellIterator.next();

        switch(cell.getCellType()) {
            case Cell.CELL_TYPE_BOOLEAN:
                System.out.print(cell.getBooleanCellValue() + "\t\t");
                break;
            case Cell.CELL_TYPE_NUMERIC:
                System.out.print(cell.getNumericCellValue() + "\t\t");
                break;
            case Cell.CELL_TYPE_STRING:
                System.out.print(cell.getStringCellValue() + "\t\t");
                break;
        }
       }
      System.out.println("");
  }
  file.close();
  FileOutputStream out = 
      new FileOutputStream(new File("C:\\test.xls"));
  workbook.write(out);
  out.close();

} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:51:56.077

没有 main 方法就无法运行 Java 应用程序。

您需要以下内容：

```
public static void main(String[] args) {
    sample2 s = new sample2();
    s.sample();
} 
```

您的代码也包含很多错误。你是：

*   缺少一个主要方法
*   大小写错误
*   缺少 sample2 方法的输入参数的类型（字符串测试？）
*   代码在很多方面都被破坏了。您复制了两次读取文件的代码，用于错误处理等。

在这里阅读一篇关于 Java 的好教程会有很大帮助。可以在[这里](http://www.vogella.com/articles/JavaExcel/article.html)找到关于 Java 和 Excel 的精彩教程，并注意 main 方法，即您的 Java 应用程序的入口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:52:53.210

由于 sample2 方法中的标识符“test”，您的代码将无法编译。删除它并运行程序：

只需添加以下方法：

```
public static void main(String[] args) {
    new sample2().sample2();
} 
```

# java - 在 Android 的 EditText 中更改用户输入的字符

> ID：15638692
> 
> 赞同：2
> 
> 时间：2013-03-26T13:47:46.840
> 
> 标签：java, android, android-edittext, android-softkeyboard

我想在 EditText 中更改用户输入的字符。事实上我想当用户输入编辑文本时，如果输入字符是“S”，用“B”字符替换它。我想实时执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T13:50:51.123

> 我想在 EditText 中更改用户输入的字符。事实上我想当用户输入编辑文本时，如果输入字符是“S”，用“B”字符替换它。我想实时执行此操作。

很可能您需要使用[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)它为您的目标指定的，并允许您实时操作 EditText 的内容。

**例子：**

```
edittext.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {           

    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {    

    }

    public void afterTextChanged(Editable s) {

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-04T13:52:23.647

就像 Sajmon 解释的那样，您必须实现一个 TextWatcher。您必须注意光标。因为用户可以在现有文本字符串的任何位置输入下一个字符（或剪贴板中的序列）。要处理此问题，您必须更改正确位置的字符（不要替换整个文本）：

```
 damageEditLongText.addTextChangedListener(new TextWatcher() {

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {}

        @Override
        public void afterTextChanged(Editable s) {
            // Nothing to replace
            if (s.length() == 0)
                return;

            // Replace 'S' by 'B'
            String text = s.toString();
            if (Pattern.matches(".*S.*", text)) {
                int pos = text.indexOf("S");
                s.replace(pos, pos + 1, "B");
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:51:51.140

利用

```
EditText textField = findViewById(R.id.textField);
String text = textField.getText().toString(); 
```

那么你可以使用

```
text.replace('b','s'); 
```

其次是

```
textField.setText(text,TextView.BufferType); 
```

TextView.BufferType 可以有 3 个值，如此[处所述](http://developer.android.com/reference/android/widget/TextView.BufferType.html)

# mongodb - 如何实现特定页面的浏览次数

> ID：15638697
> 
> 赞同：14
> 
> 时间：2013-03-26T13:47:53.433
> 
> 标签：mongodb, analytics, counter

所以基本上我想实现与 StackOverflow 相同的功能：

```
viewed 59344 times 
```

所以这里有一些背景信息：

1.  我只想计算唯一访问次数。注册用户会多次阅读文章的假设（正在演变）
2.  我使用 MongoDB 作为商店
3.  我希望它接近实时
4.  我的系统会有注册，但我也想统计匿名用户的浏览量

我知道计算唯一访问次数的最佳方法是通过注册，但问题是大部分用户只是被动读者，不需要创建帐户即可从应用程序中读取信息。据我了解，最方便的方法是保存每个阅读帖子的用户的IP地址。我也明白 IP 地址不会提供唯一性（一些不同的用户将拥有相同的 IP，因为他们在同一个 ISP 后面，并且一个用户可以通过使用代理、tor 等拥有不同的 IP）

使用 Mongo 并不是绝对必要的，只是现在一切都是用 Mongo 编写的，所以只有当它更快/方便得多时，我才会切换。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T06:17:19.560

### 背景

您**确定**需要跟踪“独特”视图吗？

实际上，我不希望热门网站尝试保持观看次数的独特性 - 越大越好，重新访问新评论仍然是显示新内容/评论/广告意义上的额外“观看次数”。“正确性”还有其他可能的微妙之处，它们对您的用例可能重要也可能不重要，例如排除爬虫或您自己公司的用户/IP。

我不会花时间跟踪独特的视图（这不是太有意义），而是考虑计算独特的用户交互，例如页面上的投票/喜欢/评论。然后，您可以根据这些指标使用一些公式确定页面的“受欢迎程度”。[在Drupal 的 Radioactivity 模块中](http://drupal.org/project/radioactivity)有一个关于这种方法的有趣示例，其中“热度”度量是基于基于用户交互新近度的活动来计算的。

### 考虑的方法

1) 对于 MongoDB 中的简单视图计数器，我会[`$inc`](http://docs.mongodb.org/manual/reference/operator/inc/)在页面加载时使用来增加视图计数。您可以根据需要按角色排除日志记录用户（例如管理员用户）。

2) 为了获得更准确的视图计数器，我会将问题传递给[网络分析](http://en.wikipedia.org/wiki/Web_analytics)平台（无论如何，您应该将其与您的网站一起使用以进行更详细的分析）。例如，您可以使用[Google Analytics API或像](https://developers.google.com/analytics/)[Piwik](http://piwik.org/)这样的开源应用程序。Web 分析系统已经有了确定唯一用户/视图的解决方案，并且这些 API 调用可以通过 JavaScript 异步进行。

3）如果实现您自己的唯一视图跟踪明确的要求，我将使用单独的集合来跟踪视图并根据您的唯一性标准（注册用户的每对唯一视图或匿名用户的配对）进行[更新插入。](http://docs.mongodb.org/manual/applications/update/#update-operations-with-the-upsert-flag)如果 upsert 导致插入，我会将其与方法 #1（增加文章视图的视图计数器）相结合，方法是增加文章视图的计数器。`user,article``session_id,article`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:44:32.030

解决问题的方法之一是使用 cookie，一旦用户访问了该页面，您可以添加一个 cookie，说明他已经访问过该页面，您不需要再次计算他。您可以继续附加一些密钥以了解他访问过的所有页面。我知道可以删除 cookie，但在任何解决方案中都会有权衡。

从 mongoDB 的角度来看，如果您想要非常快速的插入和读取，我建议您可以做几件事。

1）当你创建一篇文章时，在你的可能日志集合中创建一个这样的文档

```
 {"_id" : "Article URL" , {"Hit" : 0}} 
```

为什么我不建议添加 IP 地址或任何其他信息，因为您将添加 IP 地址，要更改 mongoDB 的文档大小需要找到新的分配空间。从性能角度来看这是不好的。由于您只是增加计数器，它不会增加文档的大小，也不需要更改它的位置。+ 您对可以拥有的文档的最大大小有限制。

2）提前创建文档将给出直接更新声明，无需担心文章ID的文档是否存在。

# java - 创建maven项目时出现错误BUILD FAILURE

> ID：15638699
> 
> 赞同：0
> 
> 时间：2013-03-26T13:47:54.417
> 
> 标签：java, maven

我想通过执行这个命令来创建一个项目：

```
mvn archetype:generate -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=1.1 -DgroupId=org.geoserver -DartifactId=hello -Dversion=1.0 -DinteractiveMode=false 
```

这个错误是：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.122s
[INFO] Finished at: Tue Mar 26 18:00:21 IRDT 2013
[INFO] Final Memory: 4M/75M
[INFO] ------------------------------------------------------------------------
[ERROR] The goal you specified requires a project to execute but there is no POM in this directory (C:\Users\Iman). Please verify you invoked Maven from the correct directory. -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException` 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:56:38.200

如果你使用命令

```
mvn archetype:generate -DarchetypeGroupId="Name of group ID" -DgroupId="group id here" -DartifactId="put artifact id here" 
```

它应该工作。我以前从未见过 -DinteractiveMode 命令，它通常会在设置中询问您的版本号。

# devexpress - 在标题过滤器中选择空白时，ASPXGridView 不会按空白字段过滤

> ID：15638703
> 
> 赞同：0
> 
> 时间：2013-03-26T13:47:59.433
> 
> 标签：devexpress

1- 我的页面上有一个 ASPXGridView。

2- 我使用 linq to sql 查询作为我的数据源。

3-我合并两个不同的表数据。一个表的列比另一个多。我创建了一个匿名类型，并为列数较少的表创建了缺少的列，并将这些添加的列初始化为空字符串。

4-当页面加载时，网格会加载应有的数据。

5-所有列都有一个标题过滤器。

6-当我展开标题过滤器时。我看到所有可能的过滤器，包括空字符串。

7-当我选择空字符串并点击确定时，网格不会被过滤并且保持不变。

8-当我再次展开标题过滤器时，我看到我对空字符串的检查已经消失。

为了能够按空字符串过滤，我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:49:40.093

我在下面的链接中找到了答案。

[http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewDataColumnSettings_HeaderFilterModetopic](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewDataColumnSettings_HeaderFilterModetopic)

也作为附加信息。

在 linq 查询中

假设我们有表 1 和表 2。

表 1 它有 a、b、c 列

表 2 它有 a、b、c、d、e 列

在网格中，我想合并两个表中的数据。由于表 1 缺少列 d 和 e，因此在 linq 中我创建了一个匿名类型并将 d 和 e 初始化为 string.empty。

这导致空标题过滤器弹出条目。当我尝试按它进行过滤时，它不起作用，当我重新打开过滤器弹出窗口时，它没有被选中。

我将列 d 和 e 初始化为 null 作为字符串，然后空条目消失了。

```
new { a = data, b= data, c = data, d = null as string, e = null as string} 
```

# css - 编译部分 sass 或 scss 文件

> ID：15638704
> 
> 赞同：0
> 
> 时间：2013-03-26T13:48:12.217
> 
> 标签：css, sass, compass-sass

我已经编写了一个带有变量和 mixins 的大型 main.scss 文件来设置我网站的许多页面的样式，我想知道是否有一种方法可以为不同的页面编译不同的文件，而这些文件只包含页面的样式。例如：

我有 main.scss 文件，其中包含 index.php、about.php 和 list.php 的样式，而不是所有这些 php 文件共享相同的编译 main.css，我希望 sass/compass 编译器为这些编译不同的文件页。

或者还有另一种技术可以实现这一点。

请指教，

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:01:46.393

1.  将您的 main.scss 拆分为多个文件。例如scaffolding.scss、nav.scss、button.scss等。

2.  创建 index.scss、about.scss 和 list.scss。在每个文件中导入scaffolding.scss、nav.scss 和特定页面所需的其他文件

例子

脚手架.scss：

```
.container {
    width: 100%;
} 
```

导航.scss：

```
nav {
    color: pink;
} 
```

按钮.scss：

```
input[type=button] {
    width: 2em;
} 
```

* * *

索引.scss：

```
@import "scaffolding";
@import "nav"; 
```

关于.scss：

```
@import "scaffolding";
@import "nav"; 
```

列表.scss：

```
@import "scaffolding";
@import "button"; 
```

* * *

如果您担心性能，将所有 css 放在一个文件中仍然是一个不错的选择，因为它只会在第一次下载时才会从缓存中加载。

# python - 列出Python中函数期望的变量？

> ID：15638706
> 
> 赞同：11
> 
> 时间：2013-03-26T13:48:15.733
> 
> 标签：python, function, variables, metaprogramming

我想知道是否可以在调用 Python 函数之前列出 Python 函数预期的变量，以便从包含大量变量的更大字典中传递预期变量。

我已经搜索了网络，但找不到任何东西。但是，python 解释器可以显示预期变量的列表，所以肯定有某种方法可以在脚本中做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T13:49:07.833

您可以使用[`inspect.signature()`](http://docs.python.org/library/inspect.html#inspect.signature)或[`inspect.getfullargspec()`](http://docs.python.org/library/inspect.html#inspect.getfullargspec)函数：

```
import inspect

argspec = inspect.getfullargspec(somefunction)
signature = inspect.signature(somefunction) 
```

`inspect.fullargspec`返回一个包含 7 个元素的命名元组：

*   带有参数名称的列表
*   包罗万象的`*args`参数的名称，如果已定义（`None`否则）
*   包罗万象的`**kwargs`参数的名称，如果已定义（`None`否则）
*   具有关键字参数默认值的元组；它们与论点的最后一个元素一起使用；通过默认值元组的长度匹配这些。
*   仅关键字参数名称列表
*   仅关键字参数名称的默认值字典（如果有）
*   和包含注释的字典

有了`inspect.signature()`一个[`Signature`object](https://docs.python.org/3/library/inspect.html#inspect.Signature)，一个丰富的对象，它不仅将上述数据建模为一组更结构化的对象，而且还允许您将值绑定到参数，就像调用函数一样。

哪个更好将取决于您的用例。

演示：

```
>>> import inspect
>>> def foo(bar, baz, spam='eggs', *monty, python: "kwonly", spanish=42, **inquisition) -> "return annotation":
...     pass
... 
>>> inspect.getfullargspec(foo)
FullArgSpec(args=['bar', 'baz', 'spam'], varargs='monty', varkw='inquisition', defaults=('eggs',), kwonlyargs=['python', 'spanish'], kwonlydefaults={'spanish': 42}, annotations={'return': 'return annotation', 'python': 'kwonly'})
>>> signature = inspect.signature(foo)
>>> signature
<Signature (bar, baz, spam='eggs', *monty, python: 'kwonly', spanish=42, **inquisition) -> 'return annotation'>
>>> signature.parameters['python'].kind.description
'keyword-only'
>>> signature.bind('Eric', 'Idle', 'John', python='Cleese')
<BoundArguments (bar='Eric', baz='Idle', spam='John', python='Cleese')> 
```

如果您有一个以`values`可能的参数值命名的字典，我将使用`inspect.signature()`并使用`Signature.parameters`映射来匹配名称：

```
posargs = [
    values[param.name]
    for param in signature.parameters.values()
    if param.kind is Parameter.POSITIONAL_ONLY
]
skip_kinds = {Parameter.POSITIONAL_ONLY, Parameter.VAR_POSITIONAL, Parameter.VAR_KEYWORD}
kwargs = {
    param.name: values[param.name]
    for param in signature.parameters.values()
    if param.name in values and param.kind not in skip_kinds
} 
```

上面为您提供了仅位置参数的值列表，以及其余参数的字典（任何`*args`或`**kwargs`参数除外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T00:08:27.633

作为一个侧面答案，我现在使用另一种方法将它们期望的变量传递给函数：我将它们全部传递。

我的意思是我在我的根对象（它是所有其他对象的父对象）中维护一种全局/共享变量字典，例如：

```
shareddict = {'A': 0, 'B':'somestring'} 
```

然后我只需将此 dict 传递给要调用的任何其他对象的任何方法，就像这样：

```
shareddict.update(call_to_func(**shareddict)) 
```

如您所见，我们将 shareddict 中的所有键/值解包为 call_to_func() 的关键字参数。我们还使用返回的结果更新 shareddict，我们将在下面看到原因。

现在有了这个技术，如果我需要这个字典中的一个或多个变量，我可以在我的函数/方法中简单而清晰地定义：

```
my_method1(A=None, *args, **kwargs):
''' This method only computes on A '''
    new_A = Do_some_stuff(A)
    return {'A': new_A} # Return the new A in a dictionary to update the shared value of A in the shareddict

my_method2(B=None, *args, **kwargs):
''' This method only computes on B '''
    new_B = Do_some_stuff(B)
    return {'B': new_B} # Return the new B in a dictionary to update the shareddict

my_method3(A=None, B=None, *args, **kwargs):
''' This method swaps A and B, and then create a new variable C '''
    return {'A': B, 'B': A, 'C': 'a_new_variable'} # Here we will update both A and B and create the new variable C 
```

如您所见，上述所有方法都返回一个变量字典，它将更新共享字典，并将其传递给其他函数。

这种技术有几个优点：

*   实现起来很简单
*   维护共享变量列表但不使用全局变量的优雅方式
*   函数和方法在其定义中清楚地显示了它们的期望（但当然需要注意的是，即使是强制变量也需要设置为具有默认值（例如 None）的关键字参数，这通常意味着该变量是可选的，但在这里它不是
*   方法是可继承和可重载的
*   低内存占用，因为始终传递相同的 shareddict
*   子函数/方法定义它们需要什么（自下而上），而不是根定义将传递给子函数的参数（自上而下）
*   非常容易创建/更新变量
*   可选地，将所有这些变量转储到文件中非常容易，例如使用`json.dumps(finaldict, sort_keys=True)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-23T11:58:59.547

好，易于：

```
import inspect  #library to import  
def foo(bar, baz, spam='eggs', *monty, **python): pass  #example function

argspec = inspect.signature(foo)
print(argspec) #print your output 
```

prints: (bar, baz, spam='eggs', *monty, **python)

它也适用于类内部的方法（非常有用！）：

```
class Complex: #example Class
     def __init__(self, realpart, imagpart): #method inside Class
...         self.r = realpart
...         self.i = imagpart

argspec = inspect.signature(Complex)
print(argspec) 
```

打印：（真实部分，想象部分）

# ios - EKCalendar 允许内容修改

> ID：15638708
> 
> 赞同：3
> 
> 时间：2013-03-26T13:48:17.950
> 
> 标签：ios, objective-c

这个属性是如何工作的？似乎它是只读的，但我想设置它。我需要创建一个包含不可编辑事件的日历？那会是正确的方法吗？

# php - 在哪里实施连续访问计数器？

> ID：15638709
> 
> 赞同：0
> 
> 时间：2013-03-26T13:48:18.553
> 
> 标签：php, javascript, sql

所以首先我在stackoverflow和google中检查并研究了这个问题，但没有类似的问题。

我检查[了连续访问次数](https://stackoverflow.com/questions/8041779/count-number-of-consecutive-visits)和[SQL 查询：连续 30 天每天访问该站点，](https://stackoverflow.com/questions/4298140/sql-query-visited-the-site-each-day-for-30-consecutive-days)但没有帮助。

所以我的问题是，如果用户连续 x 次访问该站点，在我放在那里的链接中，他们在服务器端检查，但我认为它不是很优化，因为每次用户访问时，我认为它不是很优化触发网站查询以检查今天的日期是否等于或高于`LastVisit`日期。

在我的应用程序中，我已经在每次用户加载页面以检索他的信息时进行查询，但如果我添加一个

```
update userInfo 
set DaysConsecutivelyVisited=DaysConsecutivelyVisited+1
when DATEDIFF(CURDATE(),LastVisit)=1 
```

那么每次用户加载页面时我都会有两个查询，所以我认为如果我在客户端而不是在服务器端执行此操作可能会更好。我将在文档中放置一个属性或隐藏跨度

```
<body data-lastvisit="2012-03-25" > 
```

在javascript中我会做分析，如果`$("data-lastvisit")`等于昨天我会发送一个ajax请求来更新`DaysConsecutivelyVisited`

你怎么看，这是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:56:33.260

您需要一个参数来比较.. - 不幸的是 - 始终是数据库表中的数据。您唯一能做的就是在页面加载时检索用户信息，其中很可能包含一个字段`last_visited`。如果日期不等于今天的日期，请注册它。

此外，我会说创建一个字段`consecutive_visits`并重置为 0，以防日期的差异大于一天，并增加它以防一天或更少的差异。这样，在页面加载时获取用户对象后，您始终可以在用户对象中获得连续访问量。

在这种情况下，我绝对不需要 ajax 请求。它只是将当前用户数据与 Date() 实例或时间戳进行比较。所有计算都可以在服务器端完成，如果值不同，只需要额外的 MySQL 查询。

# list - Haskell 列表中的模式匹配失败

> ID：15638715
> 
> 赞同：2
> 
> 时间：2013-03-26T13:48:43.660
> 
> 标签：list, design-patterns, haskell, match

我刚开始使用 Haskell 并偶然发现了一个问题。根据 Haskell 的说法，我有一个模式匹配失败，但我看不到如何。这是我尝试执行的代码：

```
statistics ::   [Int] -> (Int, Int, Int)
statistics [gradelist] = ( amountParticipants, average, amountInsufficient)
                        where
                            amountParticipants= length [gradelist]
                            average= sum[gradelist] `div` amountParticipants
                            amountInsufficient= length [number| number<- [gradelist], number<6] 
```

我称“统计”为：

```
statistics[4,6,4,6] 
```

这会导致模式匹配失败，而我希望看到： (4, 5, 2)

```
statistics[6] 
```

给出答案：( 1, 6, 0 ) （这是正确的）。有人能告诉我为什么我的第一个电话会导致这种模式匹配吗？因为我很确定我会给出一个列表作为参数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T13:54:23.310

如果你写你是针对一个包含唯一元素的**单例**`statistics [gradelist] = ...`列表进行模式匹配，称为. 因此，您的函数仅针对长度正好为 1 的列表定义（例如）；对于空列表 ( ) 或具有两个或多个元素的列表（例如 ），它是未定义的。**`gradelist``[6]``[]``[4,6,4,6]`**

 **您的函数的正确版本将读取

```
statistics :: [Int]     -> (Int, Int, Int)
statistics    gradelist =  (amountParticipants, average, amountInsufficient)
  where
    amountParticipants = length gradelist
    average            = sum gradelist `div` amountParticipants
    amountInsufficient = length [number| number <- gradelist, number < 6] 
```

正如@thoferon 所说，您还需要对`gradelist`空的情况进行特殊安排，以避免在计算时被零除`average`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:00:03.303

只需如前所述替换您`[gradelist]`的 's即可。`gradelist`此外，您可能希望使用 [] 匹配空列表，以避免在 中除以零`average`，例如：

```
statistics [] = (0,0,0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:56:36.867

模式中的列表语法`[ ]`解构列表。该模式`[gradelist]`匹配一​​个只包含一个值的列表，并命名列表中的值`gradelist`。如果您尝试使用包含四个值的列表调用该函数，则会出现模式匹配失败。

要匹配一个值而不解构它，请使用变量作为模式。**

# c# - 使用“额外”变量是否错误，因为它更容易调试？

> ID：15638716
> 
> 赞同：4
> 
> 时间：2013-03-26T13:48:51.367
> 
> 标签：c#

我只是在调试一些看起来像这样的代码：

```
string someValue = _snuh.FindItem(id).Value; 
```

我想检查`FindItem()`（它返回 a `Foo`）的返回值，所以我将代码分成两行：

```
Foo foo = _snuh.FindItem(id);
string someValue = foo.Value; 
```

这让我可以在调试器中查看 foo ；当代码都在一行时，我无法做到这一点。

现在我已经完成了调试，我应该把代码放回原来的样子，还是保留两行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:52:03.033

两条线比一条线更好：

*   你可以调试它们
*   如果您有一个空指针，您将在错误日志中看到行号（并直接查看错误所在）
*   它更具可读性
*   不需要额外的评论来解释单线正在做什么
*   性能没有差异（编译器会优化到相同的IL）
*   如果你在调试后重写代码，你可以引入新的错别字

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:52:10.797

您阅读代码的次数多于编写代码的次数。

将其保留为您认为最易读的形状。无论如何，JIT 都会优化您的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T13:53:07.567

在我们的工作场所，我们的代码风格指南要求将方法调用的结果存储在变量中。这背后的想法是，如果抛出空引用异常，行号将准确地告诉您哪个变量为空 - 如果您直接对方法的结果进行操作，这是不可能的。

在实践中，这条规则在一定程度上被藐视——尤其是在执行 Linq 查询时，因为 Linq 方法不返回空值（该指南早于 Linq 的广泛使用）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T13:53:18.623

在 Visual Studio 中，您可以使用**“立即窗口”**或**“添加监视”**来调试语句的各个部分并查看它们的值，而无需使用额外的变量。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-26T13:54:30.723

而不是像这样的一个班轮

```
string someValue = _snuh.FindItem(id).Value; 
```

我宁愿*重构*这样你有

```
string someValue = _snuh.FindItemValue(id); 
```

`FindItem()`并将随后`Value`的取消引用封装在一个函数中。

为什么 ？您的第一个解决方案公开了返回的对象的实现`FindItem`（即它有一个`Value`字段）。得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)提出了第二种变体。此外，如果您必须在许多地方执行此操作，它可以避免重复。如果您必须执行空检查，您只需执行*一次*。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-26T13:53:28.963

我个人会采用第二种方法，并在访问其“Value”属性之前对返回的对象进行“NULL”检查，因为它容易出现 Null 引用异常；看起来像下面这样。

```
string someValue = string.Empty;
Foo foo = _snuh.FindItem(id);
if (foo != null)
{
    someValue = foo.Value;
} 
```

希望这可以帮助！！

# sql - SQL Server 存储过程中的 XML 解析错误

> ID：15638719
> 
> 赞同：0
> 
> 时间：2013-03-26T13:49:06.220
> 
> 标签：sql, sql-server, xml, xml-parsing

我想在 SQL Server 存储过程中解析下面的 XML，并根据这个 XML 更新一些表。我已经实现了相同的使用`OPENXML`，但现在在 XML 的开头又添加了一行，因此出现了意外错误。解析时是否可以以某种方式单独跳过第一个标签

解析代码：

```
set @Lead= (select lead 
            from openxml(@DOCHANDLE,'/DBO.TBLLEADS',2) with (lead INT 'LEAD'))` 
```

此处为 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<LEADS>
   <LEAD>6680299</LEAD>
   <JOBNO>50919</JOBNO>
   <BEGINDATE>4-04-2013</BEGINDATE>
   <ENDDATE>04/14/2013</ENDDATE>
</LEADS> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:59:30.393

好吧，这不是最优雅的解决方案，但会让它恢复工作：

在准备 XML 文档之前，对包含 XML 的变量运行以下语句：

```
SET @XMLVariable = REPLACE(@XMLVariable, '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>', '') 
```

基本上，您正在利用该`REPLACE`功能来替换不必要的标题字符串。

# c# - 狮身人面像 + xmlpipes2 + Mysql 连接器。西里尔字母的问题

> ID：15638721
> 
> 赞同：0
> 
> 时间：2013-03-26T13:49:08.520
> 
> 标签：c#, mysql, sphinx

我在我的机器（Windows 7）上配置 sphinx+mysql 时遇到问题。我使用 sphinx 2.0.6 和 MySQL 连接器 6.5.5 从 C# 代码获取 sphinx。当我尝试用英语搜索单词（例如“马德里”）时，一切正常。但是当我从 C# 代码中发送一个包含西里尔字母（必须被索引）的查询时，我没有收到任何结果。这是我在“query.log”文件中看到的内容：[Tue Mar 26 16:35:12.642 2013] 0.000 sec [ext2/0/ext 0 (0,10)] [airportIndex] *????*

拉丁词看起来很正常：

```
[Tue Mar 26 16:35:06.195 2013] 0.000 sec [ext2/0/ext 0 (0,10)] [airportIndex] *mosc* 
```

charset_table 在配置中似乎是正确的：

```
charset_type            = utf-8
charset_table = 0..9, A..Z->a..z, _, a..z, \
U+410..U+42F->U+430..U+44F, U+430..U+44F, U+0401->U+0435, U+0451->U+0435 
```

我只是不知道该怎么办。我整天都在搜索解决方案，我尝试了许多不同的解决方案，但没有一个对我有帮助。也许有人可以在这里帮助我？请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:27:13.827

找到了。这是一个连接器错误（或功能，我不确定）。它试图获取服务器日期时间偏移量，但由于 sphinx 没有此功能而失败。我刚刚评论了这段代码行（在 MySql.Data.dll 中），它开始正常工作。

# javascript - sqlite 同步

> ID：15638722
> 
> 赞同：7
> 
> 时间：2013-03-26T13:49:12.173
> 
> 标签：javascript, android, sqlite, cordova

我一直在使用 sqlite、phonegap、javascript 和我需要从 sqlite db 获取信息。

我能够获取我需要的所有信息、插入、更新等。

问题是javascript异步工作。也就是说，在从数据库获取所有必要信息之前，它正在处理所有其他后续语句。

我一直尝试使用回调，但我厌倦了它，因为使用循环有困难。（无法在循环中使用 sqlite 查询，因为循环在当前 sqlquery 被处理之前被迭代，这不是我想要的）

是否可以同步执行这些数据库操作？

**UPDATE** 从这里找到了一个新的解决方案：[webkit executesql sentence and loop question](https://stackoverflow.com/questions/6492564/webkit-executesql-sentence-and-loop-problem/14394809#14394809)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T11:17:29.133

您可以使用[Siminov 框架](http://siminov.com)。它允许您对本机 SQLite 数据库进行同步/异步调用。它支持大多数混合框架，例如（[Cordova](https://cordova.apache.org/)、[React Native](https://facebook.github.io/react-native/)、[Xamarin](https://xamarin.com/)）

但是，如果您使用 JavaScript 构建混合应用程序，那么我建议使用异步调用，因为它比同步调用具有性能优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:55:33.120

不，但是有一个图书馆可能会有所帮助......

[http://html5sql.com/](http://html5sql.com/)

我自己刚刚开始使用它，它允许您执行多个或单个 SQL 请求，带有 1 个回调。这可能正是您所需要的:)

# mysql - 我可以在mysql基础上创建触发器吗

> ID：15638725
> 
> 赞同：0
> 
> 时间：2013-03-26T13:49:15.070
> 
> 标签：mysql, triggers

我试图在 mysql 数据库上创建触发器，但发生错误。我的代码是：

```
DELIMITER //
CREATE TRIGGER alterTable AFTER INSERT ON mysql.general_log 
FOR EACH ROW 
BEGIN
     IF NEW.argument LIKE "ALTER %" THEN
         INSERT INTO altersLog (queryAlter) VALUES (NEW.argument);
     END IF;
END//
DELIMITER ; 
```

当我运行此代码时，显示错误：

```
SQL Error (1465): Triggers can not be created on system tables 
```

我可以在 mysql 数据库上创建触发器吗？

谢谢

# iphone - 模式视图在 ios 6.0 中调整大小，工具栏位于视图中间

> ID：15638727
> 
> 赞同：1
> 
> 时间：2013-03-26T13:49:15.290
> 
> 标签：iphone, ios, ios6, modalviewcontroller

我的模态视图已调整大小，工具栏位于我的模态视图中间，我的按钮仅在 iOS 6 中位于视图之外，但相同的代码在 iOS 5 中运行良好。

这是我的代码片段：

```
ModalViewController *viewController = [[ModalViewController alloc] initWithNibName:@"ModalView" bundle:nil];
    viewController.delegate = self;

    viewController.modalPresentationStyle =  UIModalPresentationFormSheet;
    viewController.modalTransitionStyle =   UIModalTransitionStyleFlipHorizontal;

    [self presentModalViewController:viewController animated:YES];
    CGRect frame = self.view.frame;
    int x = (frame.size.width - 470 )/2;
    int y = (frame.size.height - 420 )/2;
    CGRect r = CGRectMake(x,
                          y,
                          470, 420);

    r = [self.view convertRect:r toView:viewController.view.superview.superview];
    viewController.view.superview.frame = r;
    [viewController release]; 
```

任何人都可以提出任何想法？我不明白是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T06:00:21.633

我已经解决了这个问题，通过改变

```
viewController.modalTransitionStyle =   UIModalTransitionStyleCoverVertical; 
```

# c# - 找到时间百分比的有效方法

> ID：15638730
> 
> 赞同：8
> 
> 时间：2013-03-26T13:49:18.213
> 
> 标签：c#

当两种数据类型都是 时，是否有一种有效的方法来计算 X 与 Y 的百分比`TimeSpan`？

例如，一个基本问题`1:00:00`是 50% 的`2:00:00`. `00:34:23`计算百分比的有效方法是什么`4:12:31`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T13:56:07.527

编辑：根据评论，类型实际上是`TimeSpan`而不是`DateTime`，此时一切都很简单。

当您问 X 与 Y 的比例时，这基本上是除法，这很容易实现`TimeSpan`：

```
public static double Divide(TimeSpan dividend, TimeSpan divisor)
{
    return (double) dividend.Ticks / (double) divisor.Ticks;
} 
```

示例代码：

```
using System;
using System.IO;
using System.Globalization;
using System.Linq;

class Test
{
    static void Main()
    {
        TimeSpan x = new TimeSpan(0, 34, 23);
        TimeSpan y = new TimeSpan(4, 12, 31);
        Console.WriteLine(Divide(x, y)); // 0.13616 etc, i.e. 13%
    }

    public static double Divide(TimeSpan dividend, TimeSpan divisor)
    {
        return (double) dividend.Ticks / (double) divisor.Ticks;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T13:52:11.577

使用 DateTime.Ticks 属性。您可以通过将 DateTime Ticks 彼此相减和相除来找到百分比。这是最准确的方法。

如果您只使用时间，请使用 TimeSpan 对象而不是 DateTime 对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T13:52:14.047

时间以单位测量，任何时间都可以转换为该单位的数量，然后作为任何其他数字处理。创建一个`TimeSpan`并采取`TotalSeconds`，然后做数学。

# objective-c - 无法执行命令：分段错误：11

> ID：15638744
> 
> 赞同：0
> 
> 时间：2013-03-26T13:50:08.167
> 
> 标签：objective-c, xcode, linker

我正在开发一个 iPad 应用程序。尝试创建它的存档时出现以下错误。

> ld /Users/macbook/Library/Developer/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/InstallationBuildProductsLocation/Applications/LSS.app/LSS normal armv7 cd /Users/macbook/Desktop/LSSCodeMarch22 setenv IPHONEOS_DEPLOYMENT_TARGET 4.3 set PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr /sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/开发者/SDKs/iPhoneOS6.1。sdk -L/Users/macbook/Library/Developer/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/BuildProductsPath/Debug-iphoneos -L/Users/macbook/Desktop/LSSCodeMarch22/LSS/CrittercismSDK -L/用户/macbook/Desktop/LSSCodeMarch22/LSS/Airship -F/Users/macbook/Library/Developer/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/BuildProductsPath/Debug-iphoneos -filelist /Users/macbook/库/开发人员/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/IntermediateBuildFilesPath/LSS.build/Debug-iphoneos/LSS.build/Objects-normal/armv7/LSS.LinkFileList -dead_strip -fobjc-link-运行时-miphoneos-version-min=4。3 -lsqlite3 -framework AudioToolbox -framework Security -framework Foundation -framework CoreTelephony -framework StoreKit -lz -framework SystemConfiguration -framework MobileCoreServices -framework CFNetwork -framework CoreGraphics -framework CoreLocation -framework MapKit -framework CoreText -framework MessageUI -framework UIKit -lUAirship- 1.4.0 -lCrittercism_v3_4_9 -o /Users/macbook/Library/Developer/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/InstallationBuildProductsLocation/Applications/LSS.app/LSS0 -lCrittercism_v3_4_9 -o /Users/macbook/Library/Developer/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/InstallationBuildProductsLocation/Applications/LSS.app/LSS0 -lCrittercism_v3_4_9 -o /Users/macbook/Library/Developer/Xcode/DerivedData/LSS-gtlketfveaswhcefyvuepplwjfbu/Build/Intermediates/ArchiveIntermediates/LSS/InstallationBuildProductsLocation/Applications/LSS.app/LSS
> 
> clang：错误：无法执行命令：分段错误：11
> 
> clang：错误：链接器命令因信号而失败（使用 -v 查看调用）

谁能帮我解决这个问题？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:06:20.087

我发现应用程序中使用的第三方 API 之一与最新的 iOS (6.1) 不兼容。我从框架列表中删除了该框架并且它有效。

# wordpress - 将 index.php 重命名为其他人，然后在 WordPress 中怎么做？

> ID：15638746
> 
> 赞同：0
> 
> 时间：2013-03-26T13:50:10.423
> 
> 标签：wordpress

现在，我将其重命名`index.php`为`home.php`，当我单击类别链接时，它将全部由 处理。所以`example.com/index.php`所有链接都不起作用。如何纠正它？如何让 home.php 处理所有页面。感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:52:35.007

我认为您需要修改根目录中的 .htaccess 文件。它有一个重写规则，将所有内容都指向 index.php。将其更改为指向 home.php。

就像是：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /home.php [L]
</IfModule> 
```

选项所有索引

# ios - UIApplicationInvalidInterfaceOrientation 问题

> ID：15638749
> 
> 赞同：1
> 
> 时间：2013-03-26T13:50:18.027
> 
> 标签：ios, uiviewcontroller

我的应用应该只支持纵向模式，但在一个视图控制器中我希望能够使用横向。如果我将项目中支持的设备方向设置为仅纵向并运行应用程序 < iOS6.0 它工作正常，但在 iOS6 中它会崩溃：'UIApplicationInvalidInterfaceOrientation'，原因：'支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 是返回是。

即使我使用 shouldAutorotate (iOS6) 或 shouldAutorotateToInterfaceOrientation (pre iOS6)，在项目属性中打开横向总是会旋转所有其他视图控制器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:12:18.910

知道了。用过[这个](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6 "这个")

在项目设置中启用纵向和横向，在应用程序委托和覆盖中使用类别

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

在我的风景视图控制器中

# ios - 如何修复“在此块中强烈捕获'块'可能会导致保留周期”

> ID：15638751
> 
> 赞同：12
> 
> 时间：2013-03-26T13:50:25.787
> 
> 标签：ios, objective-c, asynchronous, objective-c-blocks, retain-cycle

我正在处理这段代码，它在网络上执行一些冗长的异步操作，当它完成时会触发一个完成块，在该块中执行一些测试，如果变量获得某个值，另一个冗长的操作应该立即开始：

```
-(void) performOperation
{

    void(^completionBlock) (id obj, NSError *err, NSURLRequest *request)= ^(id obj,NSError *err, NSURLRequest *request){

        int variable=0;

        // Do completion operation A
        //...
        //...

        // Do completion operation B                
        //Get the variable value

        if(variable>0){
            [self doLengthyAsynchronousOperationWithCompletionBlock: completionBlock];
        }

    };

//Perform the lenhgty operation with the above completionBlock
    [self doLengthyAsynchronousOperationWithCompletionBlock: completionBlock];

}

-(void) doLengthyAsynchronousOperationWithCompletionBlock: completionBlock
{
    //Do some lengthy asynchronous stuff
} 
```

使用此代码，我从编译器收到此警告：

```
WARNING: Block pointer variable 'completionBlock' is uninitialized when caputerd by the block 
```

我变了：

```
void(^completionBlock) (id obj, NSError *err, NSURLRequest *request)= ^(id obj,NSError *err, NSURLRequest *request) 
```

在：

```
__block void(^completionBlock) (id obj, NSError *err, NSURLRequest *request)= ^(id obj,NSError *err, NSURLRequest *request) 
```

但我收到了另一个警告：

```
WARNING 2: Capturing 'completionBlock' strongly in this block is likely to lead to a retain cycle 
```

我怎样才能解决这个问题？

谢谢

尼古拉

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-26T14:19:02.467

> 警告：块指针变量“completionBlock”在被块捕获时未初始化

发生这种情况是因为初始化为递归块的块变量需要`__block`存储。

*   除非用 声明，否则块中的变量将被复制`__block`，在这种情况下，它们作为引用传递。
*   当递归块分配给块变量时，创建发生在分配之前，并且这种创建会触发变量复制。鉴于尚未分配变量，复制的变量将是一个错误的值，并且在运行该块时会产生崩溃。
*   但是，如果我们添加`__block`，将使用对变量的引用来创建块。然后该变量将被初始化为创建的块，并且该块将准备好使用。

> 警告：在此块中强烈捕获“completionBlock”可能会导致保留周期

发生这种情况是因为块变量是对块的强引用，而块本身也在引用该变量（因为正如我们之前看到的，变量有 a`__block`所以它被引用而不是复制）。

所以我们需要

*   对块内强变量的弱引用。
*   以及外部的强引用，以防止在创建块的方法范围内释放块。

```
    void(^ completionBlock) (id obj, NSError *err, NSURLRequest *request);
    void(^ __block __weak weakCompletionBlock) (id obj, NSError *err, NSURLRequest *request);
    weakCompletionBlock = completionBlock = ^(id obj,NSError *err, NSURLRequest *request){
        [self longyAsyncMethod:weakCompletionBlock];
    };

```

顾名思义`doLengthyAsynchronousOperationWithCompletionBlock`，该方法可能比创建块的方法范围更长。鉴于编译器不会复制作为参数传递的块，因此该方法负责复制该块。如果我们将此块与块感知代码一起使用（例如：）`dispatch_async()`，这将自动发生。

如果我们将这个块分配给一个实例变量，我们将需要一个`@property(copy)`和一个在块内对 self 的弱引用，但事实并非如此，所以我们只使用 self.

# javascript - Javascript - 检查字符串是否是数组中字符串的一部分

> ID：15638757
> 
> 赞同：3
> 
> 时间：2013-03-26T13:51:00.697
> 
> 标签：javascript, arrays, google-chrome

我有一个列出几个网站的数组：

```
var validSites = new Array();
validSites[0] = "example_1.com";
validSites[1] = "example_2.com";
validSites[2] = "example_3.com"; 
```

现在我有一个小脚本，它可以检查您所在的网址，并可以返回如下内容：

```
example_1.com/something/something_else 
```

现在我需要检查该地址是否是有效站点之一。所以

```
example_1.com/*ANYTHING* 
```

会通过正确的。但

```
exampleshmample.com 
```

会通过不正确。

现在我知道你可以做一个 indexOf() 来检查一个字符串是否是字符串的一部分，如果为假，它会返回 -1。但我将如何通过整个阵列检查它？

Ps - 它用于 Chrome 扩展程序。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:53:46.203

这是一个想法：

```
var str = 'example_1.com/something/something_else';
if( validSites.indexOf( str.split('/')[0] ) > -1 ) {
    // is valid
} 
```

另一种是在连接数组上使用正则表达式：

```
var str = 'example_1.com/something/something_else';
new RegExp('^('+validSites.join('|')+')','i').test(str); 
```

这也将匹配 f.ex **example_1.comyoyoyo**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:53:07.303

```
if (validStates.indexOf("example_1.com") > -1) {
  // Then it's inside your array
} 
else {
  // Then it's not inside your array
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:58:12.423

在这种情况下，如果您可以从数组切换，我会使用 json 表示法

```
var validSites = {
  "example_1.com":"valid",
  "example_2.com":true,
  "example_3.com":1 //you could even start putting paths in here to beef up your check.
}; 
```

//..您的检查功能将是：.....

```
if(validSites[window.location.hostname]){
  return true;
}else{
  return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:04:08.490

您可以通过循环和设置标志变量来实现这一点，试试这个，我没有测试过这个。只是我直接输入了代码。我想这可能对你有帮助

```
var flag =0;
var givenurl='example_1.com/*ANYTHING*';
for(int i=0 i<validSites.length;i++){
if(givenurl.indexOf(validSites[i])){
flag=1 //Found
}
}
if(flag) { //Url Found }else{ //not found } 
```

# ios - Apple 所说的“在有效订阅期间不允许取消当前订阅”是什么意思？

> ID：15638760
> 
> 赞同：1
> 
> 时间：2013-03-26T13:51:20.320
> 
> 标签：ios, in-app-purchase

我正在构建一个具有应用内自动续订订阅功能的 iOS 应用。它已被应用商店拒绝，但未满足以下要求：

您必须向用户披露以下信息：

*   在有效订阅期间不允许取消当前订阅。

对我来说，该文本表示用户无法取消有效订阅。这不可能吧？用户可以随时取消自动续订，然后下一个周期不会自动续订吧？我必须用我的母语披露这些信息，但我不明白这意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:13:08.950

为了更容易理解，我使用了“月”这个词而不是“期间”：

用户不能在月中取消当月。因此，如果您的订阅费用为每月 3 美元，则用户无法在月中取消并期望获得 1.50 美元的返还。取消将于下个月生效。

# c# - 在 XML 文档中查找 url 名称

> ID：15638761
> 
> 赞同：0
> 
> 时间：2013-03-26T13:51:24.583
> 
> 标签：c#, html, xml

我需要在 XML 文档中搜索我网站的特定 url 名称。

这样当用户浏览我的网站时，他们所在的任何页面都会决定侧边菜单的外观。到目前为止，这是我的代码：

```
var urlName = Path.GetFileNameWithoutExtension(Request.Url.AbsolutePath);

XmlDocument xmlDocument = new XmlDocument();
xmlDocument.Load(Server.MapPath("~/App_Data/menu.xml"));
xmlDocument.SelectNodes("//*[contains(text(), 'urlName')]"); 
```

一旦找到，我希望结果返回该网站节点和父节点。

```
<menu type="personal">
  <L1 shortName="Something here" id="/personal/something-here.aspx" url="../personal/something-here.aspx" regions="123">
    <L2 shortName="anything here" id="/personal/anything-here.aspx" url="../personal/anything-here.aspx" regions="123">
      <L3 shortName="everything here" id="/personal/everything-here.aspx" url="../personal/everything-here.aspx" regions="123"/>
    </L2>
    <L2 shortName="something" id="/personal/something.aspx" url="../personal/something.aspx" regions="123">
      <L3 shortName="anything" id="/personal/anything.aspx" url="../personal/anything.aspx" regions="123" />
      <L3 shortName="everything" id="/personal/everything.aspx" url="../personal/everything.aspx" regions="123" />
    </L2>
  </L1>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:53:22.413

感谢所有提供帮助的人，但是我找到了另一种完美的方法。再次感谢。

```
 XmlDocument xmlDocument = new XmlDocument();

        xmlDocument.Load(Server.MapPath("~/App_Data/menu.xml"));

        XmlNodeList levelOneElements = xmlDocument.SelectNodes("root/menu[contains(@type,'" + Title.Text.ToLower() +  "')]/L1");

        for (int i = 0; i < levelOneElements.Count; i++)
        {
            XmlNode levelOne = levelOneElements.Item(i);
            if (levelOne.OuterXml.Contains(_menu))
            {
                _index = i;
                break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:59:12.833

我会使用Linq。这将检索父项的元素名称。

```
 var urlName = Path.GetFileNameWithoutExtension(Request.Url.AbsolutePath);

    XDocument xDocument = XDocument.Load(Server.MapPath("~/App_Data/menu.xml"));
    var url = (from p in doc.Descendants().Elements()
               where p.Attribute("url").Value == urlName 
               select p.Parent.Name.LocalName).FirstOrDefault(); 
```

您可能需要使用`where p.Attribute("id").Value == urlName`而不是 url，但您可以解决这个问题！

如果您想要整个元素，请更改为 `select p.Parent).FirstOrDefault();`

# bash - bash / awk 内部删除

> ID：15638765
> 
> 赞同：1
> 
> 时间：2013-03-26T13:51:30.360
> 
> 标签：bash, csv, awk

我需要一些关于这条 bash 行的建议/帮助，我正在尝试使用 awk 来完成，

基本上，我有一个保存逗号分隔值的变量，如下所示：

```
"abc,abd,abf,abz,abz" 
```

使用简单的 awk 循环很容易获取每个字段

```
echo ${var} | awk -F"," '{for(i=1;i<=NF;i++){print $i}}' 
```

问题是有时这些逗号分隔值包含一个字符串，中间有逗号，例如：

```
"abc,"abd,abf,abz",abh,abr,alk" 
```

在这种情况下，“abd,abf,abz”是一个单一的值，我需要告诉 awk，引号之间的内容必须被视为整个值而不是分开，但我无处可去，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:47:53.370

如果您在示例输入中显示的第一个/最后一个双引号实际上不存在于您的输入中，则：

```
$ echo 'abc,"abd,abf,abz",abh,abr,alk' |
awk -F\" '{
    for (i=1;i<=NF;i++) {
        if (i%2) {
            gsub(/^,|,$/,"",$i)
            nf = split($i,a,/,/)
            for (j=1; j<=nf; j++) {
                print a[j]
            }
        }
        else {
            print $i
        }
    }
}'
abc
abd,abf,abz
abh
abr
alk 
```

如果它们存在，则：

```
$ echo '"abc,"abd,abf,abz",abh,abr,alk"' |
awk -F\" '{
    for (i=2;i<NF;i++) {
        if ( !(i%2) ) {
            gsub(/^,|,$/,"",$i)
            nf = split($i,a,/,/)
            for (j=1; j<=nf; j++) {
                print a[j]
            }
        }
        else {
            print $i
        }
    }
}'
abc
abd,abf,abz
abh
abr
alk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:24:40.197

我可以用 awk 做的最好的事情：

```
$ echo 'abc,"xxx,yyy,zzz",abh,abr,alk' | awk -F'"' '{
    for(i=1;i<=NF;i++) {
      if (i %2 == 0) {
        printf "\""$i"\"";
      } else {
        n=split($i,array,",");
        for (j=1; j<n; j++) {
          print array[j];
        }
      }
    }
  }'
abc
"xxx,yyy,zzz"
abh
abr
alk 
```

这确实给出了空行:(，我仍在试图找出原因。

*更新：固定+缩进*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:25:32.963

首先，对于第一个示例，您根本不需要循环：

```
$ awk '{print}' RS=',' <<< 'abc,abd,abf,abz,abz'
abc
abd
abf
abz
abz 
```

对于第二个示例，您确实需要一个合适的 CSV 解析器。这是一个`python`解决方案：

```
#!/usr/bin/env python
from csv import reader, writer
from sys import stdin, stdout
writer(stdout, delimiter='\n').writerows(reader(stdin)) 
```

演示：

```
$ cat file
abc,"abd,abf,abz",abh,abr,alk

$ csv_delimiter.py < file 
abc
abd,abf,abz
abh
abr
alk 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-25T07:13:53.637

查看`csvtool`使您能够操作 CSV 文件的程序。

它可以与`apt-get` （或任何你的包管理器）一起安装，并在你的 Bash 文件中用于处理 CSV 文件。

# html - SVG线不在某些坐标处绘制

> ID：15638768
> 
> 赞同：0
> 
> 时间：2013-03-26T13:51:39.243
> 
> 标签：html, xml, svg

此时的 SVG 线不是在此坐标 ( `x1="200" x2="0" y1="200" y2="200"`) 处绘制线。此问题仅在 Firefox 中发生。我犯了什么错误？

```
 <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
          <line x1="0" x2="200" y1="0" y2="0" style="stroke:rgb(255,0,0);stroke-width:2"></line>
<line x1="200" x2="200" y1="0" y2="200" style="stroke:rgb(255,0,0);stroke-width:2"></line>
<line x1="0" x2="0" y1="0" y2="200" style="stroke:rgb(255,0,0);stroke-width:2"></line>
<line x1="200" x2="0" y1="200" y2="200" style="stroke:rgb(255,0,0);stroke-width:2"></line>
        </svg> 
```

# ios - 使用 iOS Facebook SDK 3.2.1 上传视频随机停止

> ID：15638776
> 
> 赞同：0
> 
> 时间：2013-03-26T13:52:02.183
> 
> 标签：ios, facebook, facebook-ios-sdk

我想这不是特定于视频上传的，因为我只是在图表上发帖，但是当我使用以下代码时，上传有时会停止。较小的视频 (<20MB) 确实可以通过，但较大的视频 (50 到 200 MB) 肯定会失败。

```
 NSData *videoData = [NSData dataWithContentsOfFile:video.localURL options:NSDataReadingMappedAlways error:&error];

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               videoData, video.localURL,
                               @"video/quicktime", @"contentType",
                               video.name, @"title",
                               NSLocalizedString(@"Test http://www.apple.com", @"Facebook upload description"), @"description",
                               nil];

FBRequest *request = [FBRequest requestWithGraphPath:@"me/videos" parameters:params HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSLog(@"result: %@, error: %@", result, error);
    [[NSNotificationCenter defaultCenter] postNotificationName:FacbookUploadFinishedNotification object:nil];

}]; 
```

我已修补 FBURLConnection 以获取有关上传进度的通知：

```
 - (void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite {

    NSDictionary *userInfo = [NSDictionary dictionaryWithObjects:
                            [NSArray arrayWithObjects:
                              [NSNumber numberWithInt:totalBytesWritten],
                              [NSNumber numberWithInt:totalBytesExpectedToWrite],
                             nil]
                            forKeys:
                            [NSArray arrayWithObjects:
                             @"bytes",
                              @"totalBytes",
                              nil]
    ];

    [[NSNotificationCenter defaultCenter] postNotificationName:FacebookUploadProgressNotification
                                                        object:self
                                                      userInfo:userInfo];

} 
```

在我看来，Facebook 服务器似乎只是停止响应...... didSendBodyData 停止被调用，并且请求在一段时间后超时。

使用 FB 应用上传相同的视频是可行的……</p>

编辑：啊，忘了补充我在这个应用程序中使用的 Facebook 应用程序 ID 尚未提交。请求是否可能会发送到一些（不太可靠的）测试服务器？上传的视频会出现在我的时间线中……</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T23:27:44.763

问题是 Facebook 只在[https://graph-video.facebook.com](https://graph-video.facebook.com)接受较长的视频。SDK 不考虑这一点。

我的应用程序没有使用 3.x SDK 中包含的所有花哨的东西。我用自己的代码加载朋友信息和他们的图像（这就是我所需要的）。当使用 3.x SDK 的所有花里胡哨时，我的解决方案可能不起作用。

这是我所做的：

从您的项目中删除对先前安装的 SDK 的所有引用，包括搜索路径和框架。添加 Accounts.framework、AdSupport.framework、Social.framework 和 libsqlite3.0.dylib（如果您还没有这样做的话）。

从 GitHub 下载 SDK 的源代码。在 .zip 文件中，您会找到一个文件夹“src”。在您的项目目录中创建一个文件夹。将其命名为“facebook-ios-sdk”或您喜欢的任何名称。将包含子文件夹“JSON”的“src”文件夹的内容复制到新创建的文件夹中。

将文件夹拖到您的 Xcode 项目中。删除包含的 Xcode 项目和预编译头文件。之后，您的项目应该可以再次正常编译。视频不会上传。

打开`FBRequestConnection.m`

在所有#imports 添加后的第一行`BOOL bGraphIsVideo = NO;`

在下面的某些行中，您会发现一行阅读
`NSString *const kGraphBaseURL`...。
添加以下行：
`NSString *const kGraphBaseURLVideo = @"https://graph-video." FB_BASE_URL @"/";`

然后找方法`urlStringForSingleRequest`

更改行读数

```
baseURL = [kGraphBaseURL stringByAppendingString:request.graphPath]; 
```

至

```
if (bGraphIsVideo)
    baseURL = [kGraphBaseURLVideo stringByAppendingString:request.graphPath];
else
    baseURL = [kGraphBaseURL stringByAppendingString:request.graphPath]; 
```

在 .m 文件中添加以下静态方法

```
+ (void)setVideoMode:(BOOL)videoMode {
    bGraphIsVideo = videoMode;
} 
```

…在 .h 文件中

```
+ (void)setVideoMode:(BOOL)videoMode; 
```

现在更新您的代码以发布视频文件：

```
 [FBRequestConnection setVideoMode:YES];
    [FBRequestConnection startWithGraphPath:<Your path>
                                 parameters:<Your params>
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                              [FBRequestConnection setVideoMode:NO];

                              if(!error) {
                                  NSLog(@"OK: %@", result);
                              } else
                                  NSLog(@"Error: %@", error.localizedDescription);

                          }]; 
```

这对我来说就像一个魅力。请原谅此文本的可怕格式。这是我的第一个。

这绝对是一个黑客。我不想讨论如何让它变得更好。我只想将视频文件上传到 Facebook，不多也不少。因为我看到人们遇到了麻烦，所以我想分享我的做法。希望这可以帮助。

# android - 在同一个活动中使用多个 facebook FriendPickerFragments

> ID：15638778
> 
> 赞同：0
> 
> 时间：2013-03-26T13:52:05.310
> 
> 标签：android, facebook, facebook-graph-api, android-fragments

我遇到了一个问题，如果我在片段后台堆栈中有另一个 FriendPickerFragment，我无法在 FriendPickerFragment 中显示朋友列表。

第一个 FriendPickerFragment 加载一个朋友列表，但是当我用 FriendPickerFragment 的新实例替换它时，新的不显示任何数据。

有没有人遇到过这个并知道解决方案/解决方法？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:52:52.407

Found the problem.

When you use the FragmentManager to add a fragment to a layout from the code the id must be unique in the whole stack of fragments.

```
getActivity().getSupportFragmentManager().beginTransaction()
    .add(R.id.MUST_BE_UNIQUE_IN_STACK, mPickerFragment)
    .commit(); 
```

# java - java生成pdf安卓下载

> ID：15638780
> 
> 赞同：0
> 
> 时间：2013-03-26T13:52:07.337
> 
> 标签：java, android, pdf, download, generated

我通过 POST 将数据发送到生成 pdf 并输出的 java 文件：

```
response.setContentType("application/pdf"); 
```

当我在 android 设备上尝试这个时，它会下载一个空白的 pdf，而不是像在 iPad 和桌面上那样在浏览器选项卡中显示它。

有谁知道解决这个问题？

-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:55:13.007

这快速、简单、切中要害，并且不需要任何第三方脚本：

```
<embed src="http://yoursite.com/the.pdf" width="500" height="375"> 
```

[在这里](https://stackoverflow.com/questions/291813/recommended-way-to-embed-pdf-in-html)查看更多答案

# sql-server - TSQL 按特定值排序

> ID：15638799
> 
> 赞同：4
> 
> 时间：2013-03-26T13:53:03.547
> 
> 标签：sql-server, tsql

我需要对结果进行排序，以便首先出现状态列为特定值的所有项目，然后按日期出现。

我试过这个：

```
SELECT Id, Status, CreatedAt FROM Table
ORDER BY (Status=1) DESC, CreatedAt 
```

我想我会在 (Status=1) 上得到一个布尔值，所以按 DESC 排序以将真 (1) 值放在顶部。

但我收到语法错误。这可能吗？如果可以，正确的语法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T13:55:04.150

您也可以[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)在`ORDER BY`：

```
SELECT Id, Status, CreatedAt 
FROM Table
ORDER BY 
   CASE WHEN Status = 1 THEN 0 ELSE 1 END ASC, 
   CreatedAt ASC 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T13:54:27.483

尝试这个

```
SELECT Id, Status, CreatedAt FROM Table
ORDER BY (case when Status=1 then 1 else 2 end), CreatedAt 
```

# javascript - 将 ControlWrapper 放入 js 函数中

> ID：15638800
> 
> 赞同：1
> 
> 时间：2013-03-26T13:53:06.913
> 
> 标签：javascript, google-visualization

我的谷歌可视化仪表板有一堆控件包装器，形式为

```
var compositeScorePicker = new google.visualization.ControlWrapper({
   'controlType': 'CategoryFilter',
   'containerId': 'compositeScorecontrol',
   'options': {
       'filterColumnLabel': 'compositeScore',
       'ui': {
          'allowTyping': false,
          'allowMultiple': false
             }
          }
        }); 
```

如何创建一个函数来执行此操作，我在“compositeScore”中输入并输出此变量？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:53:20.723

我想你的意思是这样的：

```
 function getWrapper(name) {
    result = new google.visualization.ControlWrapper({
      'controlType': 'CategoryFilter',
      'containerId': name + 'control',
      'options': {
        'filterColumnLabel': name,
        'ui': {
          'allowTyping': false,
          'allowMultiple': false
        }
      }
    });
    return result;
  }
  var compositeScorePicker = getWrapper('compositeScore'); 
```

这只会将 containerId 更改为您传入的名称，并在末尾连接“control”，并将 filterColumnLabel 设置为您传入的名称。

# java - 在 TreeMap 中使用某些东西的类方法

> ID：15638806
> 
> 赞同：0
> 
> 时间：2013-03-26T13:53:16.223
> 
> 标签：java, treemap, treeset

我知道已经有关于这件事的主题，但他们都没有真正回答我的问题。有没有办法做到这一点？如果我有一个使用字符串作为键和 TreeSet 类的对象作为值的 TreeMap，有没有办法可以将一些 int 添加到与特定键关联的集合中？

那么我应该做的是使用 TreeMap 和 TreeSet 类从文本文件中进行索引。我的计划是使用 TreeMap 键作为文本文件中的单词，值将是单词出现的行号集。因此，您逐步浏览文本文件，每次收到一个单词时，您都会检查 TreeMap 以查看您是否已经拥有该密钥，如果没有，则将其添加并创建一个以您所在的行号开头的新 TreeSet上。如果您已经拥有它，那么您只需将行号添加到集合中。所以你看我需要做的是访问集合的 .add() 函数

就像是

```
map.get(identifier).add(lineNumber); 
```

我知道这不起作用，但我该怎么做？我的意思是，如果有一种更简单的方法来做我想做的事情，我会很乐意这样做，但我仍然想知道如何以这种方式去做，只是因为你知道学习和经验等等.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:02:14.973

考虑以下逻辑（我假设输入字在一个数组中）：

```
TreeMap<String, TreeSet<Integer>> index = new TreeMap<String, TreeSet<Integer>>();
for (int pos = 0; pos < input.length; pos++) {
    String word = input[pos];
    TreeSet<Integer> wordPositions = index.get(word);
    if (wordPositions == null) {
        wordPositions = new TreeSet<Integer>();
        index.put(word, wordPositions);
    }
    wordPositions.add(pos);
} 
```

这会产生您需要的索引，该索引从字符串映射到字符串出现的位置集。根据您的具体需求，可以将外部/内部数据结构分别更改为 HashMap/HashSet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:03:32.143

如果我理解正确，您希望有一个树图，其中每个键都引用一个树集，用于存储该键出现的行号。这绝对是可行的，而且实现起来非常简单。我不确定你为什么`map.get(identifier).add(lineNumber);`不工作。我会这样做：

```
TreeMap<String, TreeSet<Integer>>  map = new TreeMap<String, TreeSet<Integer>>();
        TreeSet<Integer> set = new TreeSet<Integer>();
        set.add(1234);
        map.put("hello", set);
        map.get("hello").add(123); 
```

一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:00:40.320

为什么不使用and `Map`，例如：`String``ArrayList<int>`

```
Map<String, List<Integer>> map = new HashMap<String, List<Integer>>(); 
```

然后总是当你得到一个单词时，你检查它是否已经存在，`Map`如果它确实存在，你将行号添加到，如果不存在，你在给定的单词和给定的行号`List`中创建一个新条目。`Map`

```
if (map.get(word ) != null) {
    map.get(word).add(line);
}
else{
    final List<Integer> list = new ArrayList<Integer>();
    list.add(line);
    map.put(word, list);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:12:23.573

您的构造不起作用的唯一原因是结果`map.get(identifier)`可以为空。就个人而言，我喜欢@EyalSchneider 回答的惰性初始化解决方案。但是，如果您提前知道所有标识符，还有另一种选择：例如，如果您预加载`Map`所有已知的英语单词。然后您可以执行以下操作：

```
for (String word : allEnglishWords) {
    map.put(word, new LinkedList<Integer>);
}

for (int pos = 0; pos < input.length; pos++) {
    String word = input[pos];
    map.get(word).add(pos);
} 
```

# php - 将键动态添加到 php 数组

> ID：15638807
> 
> 赞同：0
> 
> 时间：2013-03-26T13:53:18.243
> 
> 标签：php, arrays, dynamic, key

我在 php 中有以下数组：

```
theArray('id':'123','akey':'a';

         'id':'234','akey':'b';

         'id':'567','akey':'c';) 
```

我想在循环中动态添加另一个键，以便我的数组看起来像：

```
theArray('id':'123','akey':'a', 'anotherkey':'1';

         'id':'234','akey':'b'; 'anotherkey':'1';

         'id':'567','akey':'c'; 'anotherkey':'1';) 
```

我写的代码如下：

```
foreach($theArray as $row)
{
  $row['anotherkey'] = "1";
} 
```

但它不工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:54:20.793

您实际上并没有将新值存储在 中`$theArray`，而只是将其分配给临时`$row`变量。你想要做的是：

```
foreach($theArray as $key => $row) {
    $theArray[$key]["anotherkey"] = "1";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:54:37.187

尝试

```
foreach($theArray as &$row)
{
  $row['anotherkey'] = "1";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:54:49.817

```
foreach($theArray as $key => $row)
{
  $theArray[$key]['anotherkey'] = "1";
} 
```

更健壮

# javascript - Dojo : animateProperty for "display"

> ID：15638809
> 
> 赞同：0
> 
> 时间：2013-03-26T13:53:20.390
> 
> 标签：javascript, dojo

我正在尝试使用 Dojo 和 dojo/_base/fx 对 CSS“显示”属性的更改进行动画处理。

这是我的代码：

```
function invert_display(id) {
    var element = dom.byId(id),
        currDisplay = style.get(element, 'display'),
        nextDisplay = currDisplay === 'block' ? 'none' : 'block';
    baseFx.animateProperty({
        node: id,
        properties: {
            display: 'none',
            backgroundColor: '#f00'
        }
    }).play();
} 
```

一切似乎工作正常，模块正确导入（AMD 风格），变量值有效，div 背景色变为红色，但 div 不会淡出（“display”属性设置为“none”）。

提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:55:42.103

该样式不能真正被动画化，因为它在可见状态 (等)`display`之间没有任何中间值。`none``block``inline`

要使其淡入/淡出，您需要为`opacity`样式设置动画（Dojo 的基础 fx 实际上已经具有[this 的功能](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/fx.html#dojo-base-fx-fadeout)）。由于您还想为颜色设置动画，例如，您可以将函数更改为：

```
function invert_display(id) {
    var element = dom.byId(id),
        opacity = style.get(element, 'opacity');

    baseFx.animateProperty({
        node: id,
        properties: {
            opacity: opacity<1 ? 1 : 0,
            backgroundColor: opacity<1 ? '#00f' : '#f00'
        }
    }).play();
} 
```

现在，将不透明度设置为 0 不会删除元素，它只会使其透明。如果您也想优雅地删除它，您也许也可以添加`height: opacity<1 ? 42 : 0`到动画中，使其在淡入淡出时“最小化”。或者，您可以使用`onEnd`和`onBegin`函数`display`在动画完成/开始时设置样式（虽然这看起来并不总是很优雅）。

此处示例：http: [//jsbin.com/aqigoj/1/edit](http://jsbin.com/aqigoj/1/edit)

# c# - 我得到一个数字键盘输入，我想保留它们的特定部分以备不时之需

> ID：15638814
> 
> 赞同：0
> 
> 时间：2013-03-26T13:53:29.047
> 
> 标签：c#

我想制作一个程序来读取一行数字和符号，并且我只想读取一些特定的数字，这样我就可以制作 3 个案例，然后根据其中的数字在文本框中输出一些内容。你能通过提供必要的代码来帮助我吗？（我打算在 Windows 窗体应用程序中使用它）

示例：我得到键盘输入 -> **(01)04006544860533(10)L825308500**并且我只想保留**04006544860533**以便我可以将它用于案例 1 并返回 textbox4="...."。

我无法更改输入，它必须是长输入。

编辑

感谢您的快速答复

好的，我使用了您在按钮中提供的代码，但我总是在我的文本框中得到默认响应，所以我想我错过了一些东西 xD。如果我在它有效的情况下输入数字

（希腊语的节目文本嘿嘿）

代码

private void button1_Click(object sender, EventArgs e) { string input = BarcodeTextBox.Text; 字符串编号 = input.Substring(5, 14);

```
 switch (input) //tried switch (number) also
        {
            case ("4006544849033"):
            ProductTextBox.Text = "SLS ΛΕΥΚΗ ΖΑΧΑΡΗ ΑΠΟ ΖΑΧΑΡΟΚΑΛΑΜΟ 1kg";
            break;

            case ("4006544860533"):
            ProductTextBox.Text = "SLS ΑΚΑΤΕΡΓΑΣΤΗ ΖΑΧΑΡΗ 0,5kg";
            break;

            case ("4006544849637"):
            ProductTextBox.Text = "SLS ΑΧΝΗ ΖΑΧΑΡΗ 0,4kg";
            break;

            case ("4006544851630"):
            ProductTextBox.Text = "ΛΕΥΚΗ ΖΑΧΑΡΗ EU2-F 25κιλά ΖΑΧ/ΛΑΜΟ";
            break;

            case ("4006544901137"):
            ProductTextBox.Text = "ΚΡΤΣΤ. ZAX.GR 10X1kg AB";
            break;

            case ("4006544901335"):
            ProductTextBox.Text = "ΚΡΤΣΤ.GR 10X1 Κιλά LIDL ΕΛΛΑΣ";
            break;

            case ("5410256208115"):
            ProductTextBox.Text = "ΚΡΤΣΤ. ZAX.GR 10X1kg ΣΚΛΑΒΕΝΙΤΗΣ";
            break;

            case ("4006544901731"):
            ProductTextBox.Text = "ΚΡΤΣΤ.GR 10X1 Κιλά LIDL ΕΛΛΑΣ DHP";
            break;

            case ("4006544901830"):
            ProductTextBox.Text = "SLS ΑΧΝΗ ΖΑΧΑΡΗ 0,4kg Limited Edition";
            break;

            default:
            ProductTextBox.Text = "Λάθος Αριθμός Barcode, Ξαναπροσπαθήστε";
            break;
        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:56:09.387

如果输入文本的长度和格式始终相同，您可以像这样使用[Substring](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)函数：

```
 string input = "(01)04006544860533(10)L825308500";
 string number = input.Substring(4, 14);
 // if you also need the first number in parenthesis
 int firstNumber = Int32.Parse(input.Substring(1,2));  // this will be equal to 1 
```

如果字符串可能具有可变长度但格式始终相同，那么您可以使用正则表达式来获取数字：

```
 Regex rex = new Regex("^\\(\\d+\\)(\\d+)");
 Match m = rex.Match(input);
 if(m.Success && m.Groups[1].Success){
     string number = m.Group[1].Value;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:56:29.620

您可以使用正则表达式来验证输入中的数字。

\d{10} 将匹配一个 10 位数字。

你可以在这个网站上做教程并了解更多关于它们的信息：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# visual-c++ - VC++ 2010，如何设置文件路径

> ID：15638818
> 
> 赞同：0
> 
> 时间：2013-03-26T13:53:42.923
> 
> 标签：visual-c++, path

比方说，我想做：

```
load_image( "background.png" ) 
```

background.png 位于 C:\mypics\background.png

问题：如何将 C:\mypics\ 设置为在搜索路径上？（就像我添加 lib/include 路径的方式一样）

因为我真的不想做

```
load_image( "C:\\mypics\\background.png" ) 
```

而且我也不想将 background.png 复制到项目文件夹中。

# html - 如何有条件地否定段落标签上的文本缩进

> ID：15638822
> 
> 赞同：3
> 
> 时间：2013-03-26T13:53:53.823
> 
> 标签：html, css, margins, text-indent

我有一个缩进 55px 的 .content CSS 类。在某些情况下，我想在段落的开头包含一个链接，但这个链接我不想缩进。

除了创建一个不包含缩进的新 .content2 类之外，是否还有使用直接应用于链接的类来否定缩进？

我尝试使用通过调用来格式化链接的类应用到链接的负缩进值，但这似乎只会改变链接自己框中的文本，而实际上我希望链接框不缩进。

有问题的页面：http: [//www.fccorp.us/development/index.jfx.php](http://www.fccorp.us/development/index.jfx.php)

非常感谢您的图形 snaplemouton！

这提出了一个新的但相关的问题：多个相互矛盾的类的级联顺序是什么？我在 Firefox（当前版本 19.0.2，非测试版）中进行测试，链接通常使用两个类，但某些类使用第三个。

- 更新 -

## 我的编辑从需要中删除了一个类（尽管我的 css 文件中需要九个额外的行）。然而，这并没有解决我的保证金问题：

第一个类配置链接的“盒子”（盒子模型）的外观，包括边距以及配置链接文本的外观（链接、已访问、活动）。（以前的第三个）现在的第二个类，仅在这些链接放置在段落内时使用，用于否定不再适用的值，因为链接在段落内。我通过第一类设置顶部和底部边距，这适用于（几乎）每个按钮。对于（现在）第二类，我试图否定放置在段落中的少数链接的那些边距。但由于某种原因，那些通过第二类使用 0px（零）边距值否定的值不会被更改。它们仍然保留着第一类分配的价值。

（当我键入此内容时，我意识到如何消除调整链接/已访问/活动属性的键，因此现在正在更改。但我怀疑这会改变任何事情。如果确实如此，我会更新它。） - 作为我在更新中说过，这个变化并没有解决边距没有被消除的问题。

但是，与其尝试取消现有边距，我是否需要通过使用负数来实际否定它们？这应该可行，但我认为 CSS 级联意味着如果某些样式相互矛盾，它们会覆盖其他样式。还是它们加在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:19:01.040

有多种方法可以做到这一点。通过覆盖边距或填充（请参阅编辑 3 上的链接），将缩进设置为 0，或者以我更喜欢的方式，为您的内容使用宽度为 100% 的 div 元素并将其浮动到左侧。

```
<div style="float:left; width:100%;">
     <a style="float:left">stuff</a>
</div> 
```

编辑：它还应该修复在锚点旁边有一行的文本。如果您确实希望将文本放在横幅的右侧，则可以删除 div 并将锚点浮动到左侧。

我真的更喜欢使用 Divs，因为它非常灵活，可以让您真正设置或删除空白空格，就像您希望的那样。

编辑 2：我什至制作了一幅绘画图像来向您展示不同之处。:)

![在此处输入图像描述](../Images/2fd48c33bc5712090ee00127db39b06b.png)

编辑 3：要回答您的新问题，这里有一个链接，几乎解释了有关级联顺序的所有内容。

[http://monc.se/kitchen/38/cascading-order-and-inheritance-in-css](http://monc.se/kitchen/38/cascading-order-and-inheritance-in-css)

基本上是重量最高的胜利。如果两者的权重相同，则后者总是获胜。（以后到者为准。）

顺序：样式直接添加到元素>样式表>默认

在样式表中，#id > .class > 元素

如果有多个相同的，最后一个将获胜。

编辑 4：对不起，我在回答中的第二句话错了。我编辑了它。

您只需将其添加到您的锚点

```
margin-left:0px;
margin-bottom: 0px;
margin-top: 0px; 
```

删除边距。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:39:18.307

## CSS级联

级联主要由特异性决定。以下是从高到低的优先级列表。

```
1\. !important modifier
2\. Dynamically-applied styles using JavaScript
3\. Inline styles specified using the style attribute
4\. Specificity of the selector (higher specificity wins)
      (a)  #id                                 (100 points each)
      (b)  .class, :pseudo-class, [attribute]  ( 10 points each)
      (c)  element, ::pseudo-element           (  1 point each )
      (d)  *                                   (  0 points each)
5\. Whichever one appears last 
```

最后应用具有最高优先级的样式。在平局中，后面出现在代码中的获胜。

这有点过于简单化了，但它应该传达基本思想。更详细地说：

*   类、伪类或属性胜过任意数量的元素或伪元素。
*   一个 id 胜过任意数量的类、伪类或属性。
*   通过静态 HTML 或 JavaScript 设置的内联样式胜过任意数量的 id。
*   最重要的是，带有`!important`修饰符的风格胜过没有它的任何风格。

**特异性例子**

```
 formal         informal
selector         notation       notation
---------        --------       --------
* {}             0,0,0,0        0000
div {}           0,0,0,1        0001
.a {}            0,0,1,0        0010
#a {}            0,1,0,0        0100
div#a.b.c {}     0,1,2,1        0121 
```

此外，内联样式的特异性是 1000 点 (1,0,0,0)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:57:05.367

```
text-indent: 0px; 
```

CSS 属性。

否定该值并将其用于链接的 padding-left 或 margin-left 将给出您想要的结果。

```
<p style="text-indent:40px;">
    <a hre="#" style="margin-left:-40px;" onclick="this.style.display='none';">Un-indent</a> blah blah blah blah blah</p> 
```

# html - 表格标题在某些浏览器中显示在轮廓内，在其他浏览器中显示在外

> ID：15638824
> 
> 赞同：3
> 
> 时间：2013-03-26T13:54:00.047
> 
> 标签：html, css, html-table

我在桌子周围设置边框和轮廓。它在最新的 IE 和 Firefox 中运行良好，但 Chrome 也在我的标题周围加上大纲。在 IE 和 Firefox 中，大纲只显示在桌子周围，这是我想要的。如何在 Chrome 中解决此问题？

演示：http: [//jsfiddle.net/R7aTq/17/](http://jsfiddle.net/R7aTq/17/)

**HTML**

```
<table align="center" cellspacing="1" class="homepagemodule  report" id="trades">
    <caption><span>Pending Trades</span></caption>
    <tbody>
        <tr>
            <th>Currently Outstanding Trades</th>
        </tr>
        <tr class="oddtablerow">
            <td>
                <ul>
                    <li>0 trades proposed by me to others</li>
                    <li>0 trades proposed by others to me</li>
                    <li><a href="http://football21.myfantasyleague.com/2013/options?L=56019&amp;O=05">View trades now</a></li>
                </ul>
            </td>
        </tr>
    </tbody>
</table> 
```

**CSS**

表格标题在某些浏览器中出现在轮廓内，在其他浏览器中出现在外边。

```
caption {
    color: #333;
    font-weight: 400;
    font-size: 12pt;
    background: none;
    text-align: center;
}
.report {
    width: 300px;
    background: #ccc;
    border: 2px solid #fff;
    outline: 1px solid #000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:58:57.800

您需要`outline`将其移至`tbody`. 大纲用于显示对一个元素的关注，整个元素。Chrome 将整个元素视为`table`其`caption`子元素，因此它会将轮廓放在所有元素周围。

从您的报告类中删除`outline`并添加一个新类或新样式来`tbody`设置大纲。

**编辑**

添加`display:block;`似乎可以解决它。

*更新*了证明：http: [//jsfiddle.net/R7aTq/83/](http://jsfiddle.net/R7aTq/83/)

或者你可以一起摆脱表格并使用像这个小提琴这样的div：

*非表版本*：http: [//jsfiddle.net/R7aTq/130/](http://jsfiddle.net/R7aTq/130/)

# php - .htaccess 编译时出错

> ID：15638825
> 
> 赞同：0
> 
> 时间：2013-03-26T13:54:00.823
> 
> 标签：php, .htaccess

我想使用 htaccess 制作一个假网址。我已经在寻找所有论坛或教程来编写一个 htaccess，但是为什么我在更深的“/”上出错了。这是我的代码：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^about-us content.php?id=1 [L,NC,QSA]
RewriteRule ^how-to-order content.php?id=2 [L,NC,QSA]
RewriteRule ^information content.php?id=3 [L,NC,QSA]
RewriteRule ^contact-us content.php?id=4 [L,NC,QSA]

RewriteRule ^accessories product.php?category=1 [L,NC,QSA]
RewriteRule ^accessories/([^/]+) product.php?sub-category=$1 [NC] 
```

当我尝试输入“ [http://www.beauty4easy.com/accessories](http://www.beauty4easy.com/accessories) ”时，背面显示“product.php?category=1”是正常的。但是为什么当我想访问“ [http://www.beauty4easy.com/accessories/kalung](http://www.beauty4easy.com/accessories/kalung) ”时它重定向到“product.php?sub-category=kalung” 但是没有css ..设计是空白的，变成白色的没有图像或CSS ..

请帮忙，非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:07:05.437

您可能正在为您的资产（图像、CSS 等）使用相对路径，例如：

```
../images/some_image.jpg 
```

当尝试从 example 解析该 url 时`http://www.beauty4easy.com/accessories/kalung`，它会在以下位置查找资产：

```
http://www.beauty4easy.com/accessories/images/... 
```

一种可能的解决方案是为您的资产使用绝对路径，例如：

```
/images/some_image.jpg
/css/styles.css 
```

# video - MPEG2 比特流 ISO/IEC 标准中的 DCT 系数

> ID：15638829
> 
> 赞同：0
> 
> 时间：2013-03-26T13:54:15.140
> 
> 标签：video, decode, codec, multimedia, mpeg

我在解析 MPEG2 视频比特流时遇到了困难。我在二进制文件中有一个编码的 MPEG2 视频，我想使用一种“选择性加密算法”，它只加密“内部宏块中的 DC 符号”。

你能帮我在比特流中微调直流系数和交流系数吗？我的意思是有一个特定的标题，比如图片序列开始的那个，......等等

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:37:54.773

因此，如果这是关于加密 DC 系数，这意味着您必须编写一个解析器来分解各种比特流语法元素，加密 DC 系数元素，然后再次打包整个比特流。这可能有点麻烦，特别是如果您还不熟悉比特流解析器。

或者，您可以利用和修改现有的 MPEG-2 解析器（当然要检查许可证）。这可能会使任务更容易。

# c# - 如何在二维图中标记 Excel X 和 Y 轴

> ID：15638830
> 
> 赞同：4
> 
> 时间：2013-03-26T13:54:15.530
> 
> 标签：c#, visual-studio-2010, visual-studio, excel, vba

我被一个看似简单的问题难住了，标记 X 和 Y 轴！

我正在使用 C# 在 VS2010 中创建一个 Excel 图表。这是一个 2D XY 散点图。但是我无法控制X轴的标签！我只能控制Y轴的标签！我花了太多时间试图弄清楚这一点并放弃了。所以我正在寻求某人的帮助！这是我的代码：

```
 private void showExcelXY_v2()
    {
        xla = new Microsoft.Office.Interop.Excel.Application();

        xla.Visible = true;
        Workbook wb = xla.Workbooks.Add(XlSheetType.xlWorksheet);
        Worksheet ws = (Worksheet)xla.ActiveSheet;

        // Now create the chart.
        ChartObjects chartObjs = (ChartObjects)ws.ChartObjects(Type.Missing);
        ChartObject chartObj = chartObjs.Add(100, 20, 500, 300);
        Microsoft.Office.Interop.Excel.Chart xlChart = chartObj.Chart;

        //add some data from your datasource like a dataset or like below.
        ws.Cells[1, 1] = "Value of n";
        ws.Cells[1, 2] = "Term";

        ws.Cells[2, 1] = "0";
        ws.Cells[2, 2] = "0";

        ws.Cells[3, 1] = "9181";
        ws.Cells[3, 2] = "0";

        ws.Cells[4, 1] = "9181";
        ws.Cells[4, 2] = "-377094";

        ws.Cells[5, 1] = "0";
        ws.Cells[5, 2] = "-377094";

        ws.Cells[6, 1] = "-9554";
        ws.Cells[6, 2] = "-329688";

        ws.Cells[7, 1] = "-9554";
        ws.Cells[7, 2] = "0";

        ws.Cells[8, 1] = "0";
        ws.Cells[8, 2] = "0";

        //set the source data and the chart type.
        Range chartRange = ws.get_Range("A2", "B" + "8");
        xlChart.SetSourceData(chartRange, Type.Missing);
        xlChart.ChartType = XlChartType.xlXYScatterLines;

        // Customize axes:
        Microsoft.Office.Interop.Excel.Axis xAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlValue, XlAxisGroup.xlPrimary);
        xAxis.HasTitle = true;
        xAxis.AxisTitle.Text = "Above         Pressure (psi)          Below";

        Microsoft.Office.Interop.Excel.Axis yAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlValue, XlAxisGroup.xlPrimary);
        yAxis.MajorTickMark = XlTickMark.xlTickMarkCross;
        yAxis.HasTitle = true;
        yAxis.AxisTitle.Text = "Compression (lbf)";

        // Add title:
        xlChart.HasTitle = true;
        xlChart.ChartTitle.Text = "XPak Performance Envelope" + '\n' + "(Open Top & Bottom)";

        // Remove legend:
        xlChart.HasLegend = false;
    } 
```

此代码的结果，当您逐步执行时，显示 X 轴标签转到 Y 轴，然后被 Y 轴标签覆盖。X轴没有任何东西！任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:59:10.287

您以相同的方式定义了两个轴：

```
xAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlValue, XlAxisGroup.xlPrimary)

yAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlValue, XlAxisGroup.xlPrimary) 
```

x 轴是“类别”轴，y 轴是“值”轴。试试这个 x 轴（修订）：

```
xAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlCategory, XlAxisGroup.xlPrimary) 
```

# spring - Spring 和 Hibernate：将 cfg.xml 加载到应用程序上下文中

> ID：15638832
> 
> 赞同：0
> 
> 时间：2013-03-26T13:54:17.077
> 
> 标签：spring, hibernate

`datasource.hibernate.cfg.xml`具有 hiberanteProperties 和所有映射资源。
但是现在我必须分别定义映射资源和属性`applicationContext.xml`。
我可以将 datasource.hibernate.cfg.xml 指定为`configLocation`inside`<bean id="sessionFactory" class="org.springframework.orm.hibernate.LocalSessionFactoryBean">`并摆脱两者`mappingResources and hibernateProperties`。现在我的应用程序上下文如下所示：

```
<property name="mappingResources"/>
            <list>
                <value>../../src/editsolutions.hibernate.cfg.xml</value>
            </list>
        <property name="hibernateProperties"> 
           <props> 
           <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop> 
           <prop key="hibernate.connection.isolation">3</prop> 
           <prop key="hibernate.current_session_context_class">jta</prop> 
           <prop key="hibernate.transaction.factory_class"> 
               org.hibernate.transaction.JTATransactionFactory 
           </prop> 
           <prop key="hibernate.transaction.manager_lookup_class"> 
              com.atomikos.icatch.jta.hibernate.TransactionManagerLookup 
           </prop> 
           </props>
        </property> 
```

注意：我不对实体类使用注释。这是一个遗留项目，一切都是通过`hbm.xml`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:15:46.963

您可以设置“configLocation”属性并摆脱其他属性。[看](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/LocalSessionFactoryBean.html#setConfigLocation%28org.springframework.core.io.Resource%29)

# jquery - 从自定义属性返回的值未定义

> ID：15638840
> 
> 赞同：0
> 
> 时间：2013-03-26T13:54:25.850
> 
> 标签：jquery, undefined

我避免使用`$(this).attr()`来获取自定义元素的值，并且我已经阅读过，如果您需要自定义元素，您应该在它前面加上`data-`并使用`$(this).data()`来访问该元素的内容（在我的情况下，它是动态填充的进入元素，因为元素是一组动态元素的一部分）

我的问题很简单。

```
<a id="' + node.Id + '" data-currentValue='+node.Name+' class="button icon-pencil with-tooltip" href="javascript:void(0);" title="Edit" onclick="UpdateAttributes($(this).data(\'currentValue\'), $(this).attr(\'id\'));"</a> 
```

我在捕获它们后将值记录到控制台，但不出所料，该`$(this).data()`部分返回 undefined (value should be in this test case `"asdf"`)，并且 id 返回我期望它返回的值（在我的情况下，`2000046`）。

这个元素有什么问题？我无法发现哪里出了问题，我不知道它为什么会抛出 undefined，我需要`data-currentValue`. 有什么想法和见解可以分享，这样我就可以从中获得我需要的价值`data-currentValue`？

整体动态元素：

```
 $("#tblAttributes tbody").empty();
    var tableContents = [];
    $.each(data.KeyValuePairs, function (i, node) {
        tableContents[tableContents.length] = '<tr>';
        tableContents[tableContents.length] = '<td>';
        tableContents[tableContents.length] = '<p>';
        tableContents[tableContents.length] = node.Name;
        tableContents[tableContents.length] = '</p>';
        tableContents[tableContents.length] = '</td>';
        tableContents[tableContents.length] = '<td>';
        tableContents[tableContents.length] = '<span class="button-group compact">';
        tableContents[tableContents.length] = '<a id="' + node.Id + '" data-currentValue='+node.Name+' class="button icon-pencil with-tooltip" href="javascript:void(0);" title="Edit" onclick="UpdateAttributes($(this).data(\'currentValue\'), $(this).attr(\'id\'));"</a>';
        tableContents[tableContents.length] = '<a id="' + node.Id + '" class="button red-gradient icon-trash with-tooltip confirm" href="javascript:DeleteAttribute('+node.Id+');" title="Delete" </a>';
        tableContents[tableContents.length] = '</span>';
        tableContents[tableContents.length] = '</td>';
        tableContents[tableContents.length] = '</tr>';
    });
    $("#AttributeCount").html(data.KeyValuePairs.length);
    $("#tblAttributes tbody").append(tableContents.join("")); 
```

**编辑**

因此，我想到的这种方法既笨拙又麻烦（感谢 BlazeMonger 确认 .data() 尝试将所有内容转换为原始类型，因此我更改了代码以使用关联数组来访问我需要的信息。我不再需要元素中的自定义属性。

```
var attributes = {}; //associative array declared globally
...

$("#tblAttributes tbody").empty();
    var tableContents = [];
    attributes = {};
    $.each(data.KeyValuePairs, function (i, node) {
        attributes[node.Id] = node; //associating the node's id with the node for future use
        tableContents[tableContents.length] = '<tr>';
        tableContents[tableContents.length] = '<td>';
        tableContents[tableContents.length] = '<p>';
        tableContents[tableContents.length] = node.Name;
        tableContents[tableContents.length] = '</p>';
        tableContents[tableContents.length] = '</td>';
        tableContents[tableContents.length] = '<td>';
        tableContents[tableContents.length] = '<span class="button-group compact">';
        tableContents[tableContents.length] = '<a id="' + node.Id + '" class="button icon-pencil with-tooltip" href="javascript:void(0);" title="Edit" onclick="UpdateAttributes(' + node.Id +');"</a>';
        tableContents[tableContents.length] = '<a id="' + node.Id + '" class="button red-gradient icon-trash with-tooltip confirm" href="javascript:DeleteAttribute('+node.Id+');" title="Delete" </a>';
        tableContents[tableContents.length] = '</span>';
        tableContents[tableContents.length] = '</td>';
        tableContents[tableContents.length] = '</tr>';
    });
...
        function UpdateAttributes( attrId) {
        console.log(attributes[attrId].Name); //now I can access the information I needed which was to be stored as a custom attribute in the <a> element. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:56:52.213

该`.data()`方法在页面加载时检索`data-`一次 HTML 属性。之后，您可以更改`data-`属性，但不会更改`data()`.

相反，用于设置将检索`.data(name,value)`的新值。`.data(name)`（另请注意，这不会同时更改`data-`HTML 属性。您可以更改其中一个。）

`data-`jQuery 有一些方法可以自动将当前属性一次提取到变量中可能很有用`data()`，但是从 jQuery 1.9 开始，不存在这样的内置功能。不过，写一个应该不难。

[http://api.jquery.com/data/](http://api.jquery.com/data/)

# xslt - XSLT 将源映射到目标

> ID：15638848
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:54:46.983
> 
> 标签：xslt

我有一个包含**personOrBusiness元素的来源**

```
<xsd:element name="personOrBusiness" minOccurs="0">
<xsd:simpleType>
<xsd:restriction base="xsd:string">
<xsd:enumeration value="business"/>
<xsd:enumeration value="person"/>
</xsd:restriction>
</xsd:simpleType>
</xsd:element> 
```

我希望将其映射到 FirmOrPerson 任何想法我应该写什么 xslt 映射。

```
<element name="ContactParty">
       <complexType>
        <sequence>
         <element name="Language" type="string"/>
         <element name="Service" type="string"/>
         <element name="ContactRole" type="string"/>
         <element name="FirmOrPerson" type="string"/>
         <element name="Address" minOccurs="0">
          <complexType>
           <sequence>
            <element name="Street" type="string"/>
            <element name="HouseNumber" type="int"/>
            <element name="Box" type="string"/>
            <element name="City" type="string"/>
            <element name="ZIPCode" type="int"/>
            <element name="State" type="string"/>
            <element name="Region" type="string"/>
            <element name="Country" type="string"/>
             <element name="isInCityLimit" type="boolean"/>
            </sequence>
          </complexType>
         </element>
         <choice>
          <element name="Firm">
           <complexType>
            <sequence>
             <element name="legalForm" type="string"/>
             <element name="legalName" type="string"/>
             <element name="EnterpriseNumber" type="string"/>
             <element name="NACEcode" type="string"/>
            </sequence>
           </complexType>
          </element>
          <element name="Person">
           <complexType>
            <sequence>
             <element name="Title" type="string"/>
             <element name="LastName" type="string"/>
             <element name="firstName" type="string"/>
             <element name="NationalRegistrationNumber" type="string"/>
              <element name="PhoneType" type="string"/>
              <element name="Phone" type="string"/>
             </sequence>
           </complexType>
          </element>
         </choice>
        </sequence>
       </complexType>
      </element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:17:14.347

Google for xsl:choose 和 xsl:element

[http://www.w3schools.com/xsl/el_choose.asp](http://www.w3schools.com/xsl/el_choose.asp)

[http://www.w3schools.com/XSL/el_element.asp](http://www.w3schools.com/XSL/el_element.asp)

# java - 使用prepareStatement在java中插入数据库

> ID：15638853
> 
> 赞同：0
> 
> 时间：2013-03-26T13:55:01.163
> 
> 标签：java, prepared-statement, derby

我的程序总是停止插入数据库表而不会崩溃。这是我的代码

创建数据源和连接：

```
public void setUp() throws Exception {
    manager = new IngredientManager();
    BasicDataSource ds = new BasicDataSource();
    ds.setUrl("jdbc:derby:memory:ingredient;create=true");       
    manager.setDataSource(ds);
    manager.createTables();
} 
```

方法创建表（）：

```
public void createTables() throws ServiceFailureException, SQLException {
   Connection con = dataSource.getConnection();
   con.setAutoCommit(false);
   String createTableSQL = "CREATE TABLE INGREDIENTS("
           + "ID BIGINT NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, "
           + "NAME VARCHAR(255), "
           + "AMOUNT DOUBLE, "
           + "UNIT VARCHAR(255), "
           + "RECIPEID INTEGER NOT NULL "
           + ")";

   PreparedStatement query = con.prepareStatement(createTableSQL);
   query.executeUpdate();
} 
```

这一切正常，但是当程序涉及到这个时：

```
Connection connection = dataSource.getConnection();
connection.setAutoCommit(false);
query = connection.prepareStatement("INSERT INTO INGREDIENTS (NAME, AMOUNT, UNIT, RECIPEID) VALUES(?, ?, ?, ?)", Statement.RETURN_GENERATED_KEYS); 
```

在connection.prepareStatement 程序之后没有做任何其他事情，只是永远构建。任何想法为什么这可能会被破坏？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:19:08.103

该方法`createTables()`创建到数据库的连接（和事务）。挂起的代码创建了第二个连接（和事务）。第二个事务被阻塞，直到第一个事务被提交，因为它们都锁定在同一个表上。

`con.commit();`在结束时调用`createTables()`应该可以解决问题。

# java - 将类的新实例添加到 Vector

> ID：15638861
> 
> 赞同：0
> 
> 时间：2013-03-26T13:55:13.730
> 
> 标签：java, vector

有如下数据结构：

```
Vector<Cluster> clustersList; 
```

在迭代过程中，我将新元素添加到`clustersList`.

```
Cluster c1 = getCluster();
clustersList.add(c1); 
```

问题是在最后一次迭代中，第一个元素 ( `((0)(2))`) 被最后一个元素 ( ) 替换`(((0)(2))((1)(6)))`，即：

```
[((0)(2))]
[((0)(2)), ((1)(6))]
[((0)(2)), ((1)(6)), ((3)(7))]
[((0)(2)), ((1)(6)), ((3)(7)), ((5)(8))]
[(((0)(2))((1)(6))), ((1)(6)), ((3)(7)), ((5)(8)), (((0)(2))((1)(6)))] 
```

结果必须是：

```
[((0)(2))]
[((0)(2)), ((1)(6))]
[((0)(2)), ((1)(6)), ((3)(7))]
[((0)(2)), ((1)(6)), ((3)(7)), ((5)(8))]
[((0)(2)), ((1)(6)), ((3)(7)), ((5)(8)), (((0)(2))((1)(6)))] 
```

我怎样才能得到这样的结果？

PS我在类Cluster中不使用任何ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:02:50.503

第一个簇是某个对象（来自`new Cluster()`），其内容被最后一个元素的值覆盖。

如果类像 String 一样不可变，则不会有这个概念问题。解决方案（目前）是在某些地方添加 a `new Cluster()`。

附言

使用`List<Cluster> clusterList = new ArrayList<>();`- 较新的类，快一点。

# php - 使用正则表达式在 URL 中进行匹配

> ID：15638863
> 
> 赞同：1
> 
> 时间：2013-03-26T13:55:14.940
> 
> 标签：php, regex, wordpress, url

我目前正在做一个项目，我需要这个来操纵参数以达到美学目的。

```
add_rewrite_rule( '([^/]*)/user/([^/]+)','index.php?pagename=$matches[1]&username=$matches[2]', 'top' );
-> would correctly retrieve the userID (in this case 232) from the following URL: http://mysite.com/userlisting/user/232

add_rewrite_rule( '([^/]*)/([^/]*)/user/([^/]+)','index.php?pagename=$matches[1]&username=$matches[2]', 'top' );
-> would correctly retrieve the userID (in this case 232) from the following URL: http://mysite.com/parent_directory/userlisting/user/232 
```

现在我可以添加，比如说其中的 10 条规则，以确保我至少完成了 10 级层次结构，但我想做的是根据当前“用户列表”有多少级别，让它变得有点动态。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:02:58.407

```
 add_rewrite_rule( '([^/]*)/([^/]*)/user/([^/]+)','index.php?pagename=$matches[1]&username=$matches[2]', 'top' );
 -> would correctly retrieve the userID (in this case 232) from the following URL: http://mysite.com/parent_directory/userlisting/user/232 
```

**不**，它不会。

*   $matches[1] 是`parent_directory`
*   $matches[2] 是`userlisting`
*   $matches[3] 将是`232`（即用户 ID）

所以你的内部 URL 是 index.php?pagename=parent_directory&username=userlisting

* * *

至于实际，解决问题取决于您要如何处理多个级别，即如何将它们传递给 php，一种可能是

```
add_rewrite_rule( '(.+?)/user/([^/]+)','index.php?pagename=$matches[1]&username=$matches[2]', 'top' ); 
```

在这种情况下会给

index.php?pagename=parent_directory/userlisting&username=232

即，与 url 中存在的一样多的目录将使其进入“页面名称” - 您不会将 / 排除在目录名称的一部分之外。

但是，如果您希望以不同的方式将各种层次结构级别呈现给 PHP，则可以以不同的方式完成。

# javascript - 如何找出 jQuery 事件的结束

> ID：15638866
> 
> 赞同：0
> 
> 时间：2013-03-26T13:55:25.423
> 
> 标签：javascript, jquery, events, promise

我可以用

```
$._data(this, "events") 
```

我基本上想要做的是禁用按钮，因此无法进行双重表单提交和双重操作。当它是一个正常的提交按钮时，我会执行以下操作：

```
<script type="text/javascript">
    $(function() {
        $("button[js-hide=1]").click(function() {
            $(this).prop("disabled", true);
            $(this).html("<img src=\"loading5.gif\" />");
        })
    })
</script> 
```

这工作得很好，禁用按钮，并加载一个 gif，直到再次加载 pase。

现在我想要简单的 jQuery 按钮的完全相同的过程。它可以是一个简单的 AJAX 请求，也可以是一个将一个文本字段复制到另一个字段的按钮。问题是必须禁用按钮，直到操作完成。我知道我可以在函数的开始和结束时执行禁用/启用操作，但这不是解决方案。因为我想要这个在一个框架中。

```
<script type="text/javascript">
    $(function() {
        $("button[js-hide=0]").click(function() {
            $(this).prop("disabled", true);
            $(this).html("<img src=\"loading5.gif\" />");
            console.log( $._data(this, "events"))';
        })
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:56:50.700

你需要看看 jQuery [promises](http://api.jquery.com/promise/)，特别是`done()`（和/或`then()`）

# macos - cgdb 不退出：确定原因并修复

> ID：15638868
> 
> 赞同：1
> 
> 时间：2013-03-26T13:55:26.673
> 
> 标签：macos, cgdb

通过 运行程序后`cgdb`，`cgdb`不会退出。键入`kill`，然后`quit`导致`cgdb`挂起。

如果我不在调试器中加载文件，则`quit`可以。如果我加载文件但不运行它，则`quit`可以。如果我`run`的文件，`quit`挂起。

我如何能：

*   **确定为什么**会这样？我无法查看的返回值`cgdb`（因为我必须这样`ps aux ; kill`做，或者关闭`terminal`窗口等）。我也无法在网上找到任何关于此问题的其他人的参考资料。
*   **修好吗**？在不知道到底出了什么问题的情况下，有没有`super-cool-command`我可以运行来强制杀死调试器`quit`？

更多详细信息：

*   安装`cgdb`了`macports`. 运行`port upgrade outdated`并没有解决这个问题。
*   `cgdb --version`返回：`CGDB 0.6.6`
*   `uname -a`: 达尔文内核版本 12.2.0
*   使用`OS X 10.8.2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:19:13.133

很确定这在 cgdb-0.6.7 中已修复。这是问题所在：[https ://github.com/cgdb/cgdb/issues/1](https://github.com/cgdb/cgdb/issues/1)

Homebrew 中包含最新的 cgdb，或者您可以从源代码编译。

# macos - 卸载包时停止 LaunchAgent

> ID：15638873
> 
> 赞同：4
> 
> 时间：2013-03-26T13:55:56.477
> 
> 标签：macos, launchd, launch-agent

我构建了一个提供 LaunchAgent 的应用程序（一个带有“托盘”图标的小型 UI 应用程序；假设在`/Library/LaunchAgents/foo.plist`.

安装包时，launchctl 会自动加载此 LaunchAgent 描述并为所有登录用户启动进程。（即我不必像使用LaunchDaemons 那样使用launchctl load 来加载它）。

当我卸载软件包时，所有文件 - 包括 LaunchAgent plist 文件`/Library/LaunchAgents`都被删除，但进程仍在运行。

（我有几个用户登录，所以这个代理有几个实例）

现在，我应该如何告诉 root launchd 在以 root 身份运行时停止这些进程（对于未指定数量的用户）？（注意，以 root 身份运行的 launchctl 甚至看不到这些代理）。

（pid-files，`killall more-or-less-unique-executable-name`是最后的手段，我将这些解决方案作为最后的手段）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:03:48.463

尝试这个：

```
LOGGEDUSERS=`who | grep console | awk '{ print $1 }'`
for CURRUSER in $LOGGEDUSERS
do
    su -l $CURRUSER -c 'launchctl unload /Library/LaunchAgents/your.plist'
done 
```

在我的卸载程序脚本中`killall -15 <app_name>`，该代码之后也有（以防万一）

# python - python - 为什么我有重复的键？

> ID：15638874
> 
> 赞同：-2
> 
> 时间：2013-03-26T13:55:58.163
> 
> 标签：python, dictionary, python-2.7

键是一个字符串，字典 allLines 的值是一个 Python 对象列表。

```
original_list = allLines.get(key)
new_list = []
if original_list is not None:
    for l in original_list:
      new_list.append(l)  #add rest
new_list.append(temp) # plus new one
allLines[key] = new_list 
```

temps 是添加到列表末尾的新对象。

当我执行最后一行时，它应该完全替换 original_list ，但是当我打印 dict 时，每次运行操作时都会得到具有不同列表的重复键。这样做的正确方法是什么？

我第一次运行这个

```
allLines = {"boolean mark":[obj1]} 
```

我第二次运行这个我得到：

```
allLines = {"boolean mark":[obj1], "boolean mark":[obj1, temp]} 
```

代替：

```
allLines = {"boolean mark":[obj1, temp]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:01:54.093

```
DATA = {"records": [{"key1": "AAA", "key2": "BBB", "key3": "CCC", "key4": "AAA"}]}

for name, datalist in DATA.iteritems():  # Or items() in Python 3.x
    for datadict in datalist:
        for key, value in datadict.items():
            if value == "AAA":
                datadict[key] = "XXX"

print (DATA) 
```

输出：

```
{'records': [{'key3': 'CCC', 'key2': 'BBB', 'key1': 'XXX', 'key4': 'XXX'}]} 
```

取自[这里](https://stackoverflow.com/a/1076577/205426)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:05:07.907

我无法使用下面的代码重现您的结果。我不得不添加一些东西来使您发布的内容可执行，但是之后，它似乎做您想要的，而不是您所说的发生 - 无论如何这是不可能的，因为字典不能像您声称的那样具有重复的键正在发生。这两个键*必须*在某些方面有所不同，如果你能弄清楚区别是什么，你也许可以自己解决你的问题。

```
def obj(name):
    return type(name, (object,), dict(__repr__=lambda self: name))()

allLines = {}  # global var

def operation(key, temp):
    original_list = allLines.get(key)
    new_list = []
    if original_list is not None:
        for l in original_list:
            new_list.append(l)  #add rest
    new_list.append(temp) # plus new one
    allLines[key] = new_list

operation('boolean mark', obj('obj1'))
print 'allLines =', allLines
operation('boolean mark', obj('temp'))
print 'allLines =', allLines 
```

输出：

```
allLines = {'boolean mark': [obj1]}
allLines = {'boolean mark': [obj1, temp]} 
```

# vb.net - 子过程调用自身时如何不产生堆栈溢出？

> ID：15638875
> 
> 赞同：0
> 
> 时间：2013-03-26T13:55:59.353
> 
> 标签：vb.net, random, numbers, stack-overflow

此代码生成堆栈溢出。我知道这是由程序调用自身引起的。我该怎么做才能避免堆栈溢出？调用子过程并生成一个新的随机数是最容易做的事情，但是它会产生溢出。随机生成的数字选择一个随机库存项目，然后 if 语句将该数字（随机库存项目）与甲板库存中该项目的数量相匹配，以确保它不小于 1。如果该项目的库存是0，else播放并重新启动程序，生成一个新的随机数并重新执行该过程。在另一个程序中，我有一个功能，如果甲板的库存完全空了，那么丢弃堆会补充甲板，使丢弃堆变空，

我想知道我是否可以以某种方式强制随机数生成器

```
Number = (DeckGroup(Rnd.Next(0, DeckGroup.Count)).ID) 
```

`DeckGroup(Number).QuantityInteger`不要为清零的项目生成编号。通过这样做，我什至不需要调用该函数。随机数由同一结构组中的不同分支生成。

```
Private Sub PlayElse()
        Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}
        'Reset Number Generator
            Number = (DeckGroup(Rnd.Next(0, DeckGroup.Count)).ID)
            Dim PlayerQuantitySubtractionInteger As Integer
            For PlayerQuantitySubtractionInteger = ChecksDynamicA To ChecksDynamicB
                If CardCheckBoxArray(TextBoxInteger).Checked = True And DeckGroup(Number).QuantityInteger > 0 Then
                    DeckGroup(Number).QuantityInteger -= 1
                    'Select the Player depending value of T
                    Select Case T
                        Case 0
                            Player1HandGroup(Number).QuantityInteger += 1
                        Case 1
                            Player1HandGroup(Number).QuantityInteger2 += 1
                        Case 2
                            Player1HandGroup(Number).QuantityInteger3 += 1
                        Case 3
                            Player1HandGroup(Number).QuantityInteger4 += 1
                        Case 4
                            Player1HandGroup(Number).QuantityInteger5 += 1
                    End Select
                    CardTypeArray(PlayerQuantitySubtractionInteger) = Player1HandGroup(Number).CardType
                    CardCheckBoxArray(TextBoxInteger).Text = Player1HandGroup(Number).CardNameString
                    NumberArray(PlayerQuantitySubtractionInteger) = Number
            Else
                If CardCheckBoxArray(TextBoxInteger).Checked = True And DeckGroup(Number).QuantityInteger < 0 Then
                    Call PlayElse()
                End If
                End If
        Next PlayerQuantitySubtractionInteger
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:21:26.623

通过列表并仅确定那些有效的。然后从该集合中随机抽取。这是它的一个简单版本。您也可以使用 LINQ，但这应该足够清楚：

```
Dim validDeckGroupsIndexes As New List(Of Integer)

For ndx As Integer = 0 to DeckGroup.Count - 1
   If DeckGroup(ndx).QuantityInteger > 0 Then
      validDeckGroupsIndexes .Add(ndx)
   End If
Next ndx 
```

然后使用这个：

```
Dim deckGroupNdx As Integer = Rnd.Next(0, validDeckGroupsIndexes.Count)

Number = DeckGroup(deckGroupNdx).ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:26:15.020

您可以使用 LINQ 首先清除所有您不想获得的对象，然后使用 linq 返回的集合而不是原始集合。

就像是：

```
Private Sub PlayElse()
    Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}
    'Reset Number Generator
    Dim temp As IEnumerable(Of LunchMoneyGame.LunchMoneyMainForm.Group) = From r In DeckGroup Where r.QuantityInteger > 0 Select r
    If temp IsNot Nothing AndAlso temp.Any Then
        Number = (temp(Rnd.Next(0, temp.Count)).ID)

        ' ** Edit **: This will ensure that you only got 1 object back from the LINQ which can tell you whether or not you have bad data. You *can* exclude this check but its good practice to include it.

        Dim obj As LunchMoneyGame.LunchMoneyMainForm.Group = Nothing

        Dim t = From r In temp Where r.ID = Number Select r
        If t IsNot Nothing AndAlso t.Count = 1 Then
            obj = t(0)
        End If

        If obj IsNot Nothing Then
            Dim PlayerQuantitySubtractionInteger As Integer
            For PlayerQuantitySubtractionInteger = ChecksDynamicA To ChecksDynamicB
               ' ** Edit **
               obj.QuantityInteger -= 1
               'Select the Player depending value of T
                Select Case T
                    Case 0
                        Player1HandGroup(Number).QuantityInteger += 1
                    Case 1
                        Player1HandGroup(Number).QuantityInteger2 += 1
                    Case 2
                        Player1HandGroup(Number).QuantityInteger3 += 1
                    Case 3
                        Player1HandGroup(Number).QuantityInteger4 += 1
                    Case 4
                        Player1HandGroup(Number).QuantityInteger5 += 1
                End Select
                CardTypeArray(PlayerQuantitySubtractionInteger) = Player1HandGroup(Number).CardType
                CardCheckBoxArray(TextBoxInteger).Text = Player1HandGroup(Number).CardNameString
                NumberArray(PlayerQuantitySubtractionInteger) = Number
            Next PlayerQuantitySubtractionInteger
        End If
    End If
End Sub 
```

# python - Python 中的 SSH 服务器状态

> ID：15638882
> 
> 赞同：0
> 
> 时间：2013-03-26T13:56:18.917
> 
> 标签：python, python-2.7, ssh, openssh

`ssh server`我想知道是否有办法使用 Python找出系统中的状态。我只想知道服务器是否处于活动状态（只是是/否）。即使它只是一个 linux 命令也会有所帮助，这样我就可以使用`popen`来自`subprocess`模块的 python 并运行该命令。

谢谢

PS：我正在`openssh-server`使用`linux (ubuntu 12.04)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:07:28.407

如果您想要一种通用的方式来判断进程是否正在运行，您可以使用`ps`.

```
def IsThisProcessRunning( ps_name ):
  ps = subprocess.Popen("ps axf | grep %s  | grep -v grep" % ps_name, 
                        shell=True, stdout=subprocess.PIPE)
  output = ps.stdout.read()
  ps.stdout.close()
  ps.wait()

  if re.search(ps_name, output) is None:
      return False
  else:
      return True

IsThisProcessRunning('/usr/sbin/apache2') # True, if Apache2 is running. 
```

如果你有一个常用的名字；您可以指定位置，例如`/usr/sbin/apache2`

为了安全起见，您可以结合查找进程名称，同时查找 pid 文件。[这是init.d](http://en.wikipedia.org/wiki/Init)脚本中常用的技术。

```
try:
    pf = file('/var/run/my_program.pid', 'r')
    pid = int(pf.read().strip())
    pf.close()
except IOError:
    pid = None

if pid:
   # Process is running. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:01:47.937

运行`service sshd status`（例如 via `Popen()`）并阅读它告诉您的内容。

# perl - 使用perl生成pdf

> ID：15638883
> 
> 赞同：1
> 
> 时间：2013-03-26T13:56:19.850
> 
> 标签：perl, security, pdf

我想使用 perl + PDF::API2 在我的网站上生成一些 pdf 文档。

1) 读取 pdf 模板
2) 向模板添加一些数据
3) 将文件保存到硬盘
4) 读取新文件
5) 将其打印到用户的浏览器

```
#!/usr/bin/perl

use strict;
use PDF::API2;

my $p = PDF::API2->open('/way/to/input/pdf.pdf');
my $font = $p->ttfont('/way/to/font.ttf', -encode => 'utf8');
my $page = $p->openpage(1);
my $text = $page->text();
$text->font($font,12);
$text->translate(150,150);
$text->text('Hello world!');
$p->saveas('/way/to/out/pdf.pdf'); #ex: '/usr/local/www/apache22/data/docs'

my $fileContent;
open(my $file, '<', '/way/to/out/pdf.pdf') or die $!;
binmode($file);
{
    local $/;
    $fileContent = <$file>;
}
close($file);

binmode STDOUT;
print "Content-type: application/pdf\n\n";
print $fileContent;
exit; 
```

我如何在不将临时 PDF 存储在 /way/to/out/ 文件夹（可读写）的情况下做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T13:59:46.957

请参阅[PDF::API2 的文档](https://metacpan.org/module/PDF%3a%3aAPI2)；在它描述了`saveas`您正在使用的方法之后，它立即显示了如何使用该`stringify`方法，它可以满足您的需求。

```
$text->text('Hello world!');
binmode STDOUT;
print "Content-type: application/pdf\n\n";
print $p->stringify();
exit; 
```

# android - 谷歌地图路由api V2 android

> ID：15638884
> 
> 赞同：1
> 
> 时间：2013-03-26T13:56:19.837
> 
> 标签：android, api, routing, maps

我在我的 android 程序中包含了谷歌地图。但在关于 GM android api V2 的教程中，并没有描述路由以及如何添加我自己创建的谷歌地图。

有人知道这方面的教程吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:32:05.670

你可以看看我不久前问的一个类似的问题：

[有没有办法在 Google Map API v2 中显示道路方向？](https://stackoverflow.com/questions/14554078/is-there-a-way-to-show-road-directions-in-google-map-api-v2)

你应该做的是：

1.使用@Akexorcist 给我的这段代码：

```
 package app.akexorcist.googlemapsv2direction;

    import java.io.InputStream;
    import java.util.ArrayList;

    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;

    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.protocol.BasicHttpContext;
    import org.apache.http.protocol.HttpContext;
    import org.w3c.dom.Document;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;

import com.google.android.gms.maps.model.LatLng;

import android.content.Context;
import android.util.Log;

public class GMapV2Direction {
public final static String MODE_DRIVING = "driving";
public final static String MODE_WALKING = "walking";

public GMapV2Direction() { }

public Document getDocument(LatLng start, LatLng end, String mode) {
    String url = "http://maps.googleapis.com/maps/api/directions/xml?" 
            + "origin=" + start.latitude + "," + start.longitude  
            + "&destination=" + end.latitude + "," + end.longitude 
            + "&sensor=false&units=metric&mode=driving";

    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response = httpClient.execute(httpPost, localContext);
        InputStream in = response.getEntity().getContent();
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(in);
        return doc;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public String getDurationText (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("duration");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "text"));
    Log.i("DurationText", node2.getTextContent());
    return node2.getTextContent();
}

public int getDurationValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("duration");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DurationValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
}

public String getDistanceText (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "text"));
    Log.i("DistanceText", node2.getTextContent());
    return node2.getTextContent();
}

public int getDistanceValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DistanceValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
}

public String getStartAddress (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("start_address");
    Node node1 = nl1.item(0);
    Log.i("StartAddress", node1.getTextContent());
    return node1.getTextContent();
}

public String getEndAddress (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("end_address");
    Node node1 = nl1.item(0);
    Log.i("StartAddress", node1.getTextContent());
    return node1.getTextContent();
}

public String getCopyRights (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("copyrights");
    Node node1 = nl1.item(0);
    Log.i("CopyRights", node1.getTextContent());
    return node1.getTextContent();
}

public ArrayList<LatLng> getDirection (Document doc) {
    NodeList nl1, nl2, nl3;
    ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
    nl1 = doc.getElementsByTagName("step");
    if (nl1.getLength() > 0) {
        for (int i = 0; i < nl1.getLength(); i++) {
            Node node1 = nl1.item(i);
            nl2 = node1.getChildNodes();

            Node locationNode = nl2.item(getNodeIndex(nl2, "start_location"));
            nl3 = locationNode.getChildNodes();
            Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
            double lat = Double.parseDouble(latNode.getTextContent());
            Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            double lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));

            locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "points"));
            ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
            for(int j = 0 ; j < arr.size() ; j++) {
                listGeopoints.add(new LatLng(arr.get(j).latitude, arr.get(j).longitude));
            }

            locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "lat"));
            lat = Double.parseDouble(latNode.getTextContent());
            lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));
        }
    }

    return listGeopoints;
}

private int getNodeIndex(NodeList nl, String nodename) {
    for(int i = 0 ; i < nl.getLength() ; i++) {
        if(nl.item(i).getNodeName().equals(nodename))
            return i;
    }
    return -1;
}

private ArrayList<LatLng> decodePoly(String encoded) {
    ArrayList<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;
    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng position = new LatLng((double) lat / 1E5, (double) lng / 1E5);
        poly.add(position);
    }
    return poly;
}
} 
```

2.接下来，创建一个 asyncTask 来获取方向：

```
package com.emildesign.sgtaskmanager.asynctasks;

  import java.util.ArrayList;
  import java.util.Map;

  import org.w3c.dom.Document;

  import com.emildesign.sgtaskmanager.R;
  import com.emildesign.sgtaskmanager.activities.LoginScrActivity;
  import com.emildesign.sgtaskmanager.activities.MapFragmentActivity;
  import com.emildesign.sgtaskmanager.objects.DataAccessManager;
  import com.emildesign.sgtaskmanager.objects.DialogUtils;
  import com.emildesign.sgtaskmanager.objects.GMapV2Direction;
  import com.google.android.gms.maps.model.LatLng;

  import android.app.Dialog;
  import android.os.AsyncTask;
  import android.widget.Toast;

   public class GetDirectionsAsyncTask extends AsyncTask<Map<String, String>, Object,   ArrayList<LatLng>> {

public static final String USER_CURRENT_LAT = "user_current_lat";
public static final String USER_CURRENT_LONG = "user_current_long";
public static final String DESTINATION_LAT = "destination_lat";
public static final String DESTINATION_LONG = "destination_long";
public static final String DIRECTIONS_MODE = "directions_mode";
private MapFragmentActivity activity;
private String url;

private Exception exception;

private Dialog progressDialog;

public GetDirectionsAsyncTask(MapFragmentActivity activity /*String url*/) 
{
    super();
    this.activity = activity;

    //  this.url = url;
}

public void onPreExecute() {
    progressDialog = DialogUtils.createProgressDialog(activity, activity.getString(R.string.get_data_dialog_message));
    progressDialog.show();
}

@Override
public void onPostExecute(ArrayList<LatLng> result) {
    progressDialog.dismiss();

    if (exception == null) {
        activity.handleGetDirectionsResult(result);
    } else {
        processException();
    }
}

@Override
protected ArrayList<LatLng> doInBackground(Map<String, String>... params) {

    Map<String, String> paramMap = params[0];
    try{
        LatLng fromPosition = new LatLng(Double.valueOf(paramMap.get(USER_CURRENT_LAT)) , Double.valueOf(paramMap.get(USER_CURRENT_LONG)));
        LatLng toPosition = new LatLng(Double.valueOf(paramMap.get(DESTINATION_LAT)) , Double.valueOf(paramMap.get(DESTINATION_LONG)));
        GMapV2Direction md = new GMapV2Direction();
        Document doc = md.getDocument(fromPosition, toPosition, paramMap.get(DIRECTIONS_MODE));
        ArrayList<LatLng> directionPoints = md.getDirection(doc);
        return directionPoints;

    }
    catch (Exception e) {
        exception = e;
        return null;
    }
}

private void processException() {
    Toast.makeText(activity, activity.getString(R.string.error_when_retrieving_data), 3000).show();
}

} 
```

3.在您的地图活动中创建这两个方法来获取方向和处理结果：

```
public void handleGetDirectionsResult(ArrayList<LatLng> directionPoints)
{
    Polyline newPolyline;
    GoogleMap mMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
    PolylineOptions rectLine = new PolylineOptions().width(3).color(Color.RED);

    for(int i = 0 ; i < directionPoints.size() ; i++) 
    {          
        rectLine.add(directionPoints.get(i));
    }
    newPolyline = mMap.addPolyline(rectLine);
}

public void findDirections(double fromPositionDoubleLat, double fromPositionDoubleLong, double toPositionDoubleLat, double toPositionDoubleLong, String mode)
{
    Map<String, String> map = new HashMap<String, String>();
    map.put(GetDirectionsAsyncTask.USER_CURRENT_LAT, String.valueOf(fromPositionDoubleLat));
    map.put(GetDirectionsAsyncTask.USER_CURRENT_LONG, String.valueOf(fromPositionDoubleLong));
    map.put(GetDirectionsAsyncTask.DESTINATION_LAT, String.valueOf(toPositionDoubleLat));
    map.put(GetDirectionsAsyncTask.DESTINATION_LONG, String.valueOf(toPositionDoubleLong));
    map.put(GetDirectionsAsyncTask.DIRECTIONS_MODE, mode);

    GetDirectionsAsyncTask asyncTask = new GetDirectionsAsyncTask(this);
    asyncTask.execute(map); 
} 
```

最后，运行查找方向方法：

```
findDirections(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude(),
                                               SGTasksListAppObj.getInstance().currentUserLocation.getLongitude(),
                                               clickMarkerLatLng.latitude, clickMarkerLatLng.longitude, GMapV2Direction.MODE_DRIVING ); 
```

# java - Linux：如何获取所有可见窗口的列表

> ID：15638885
> 
> 赞同：6
> 
> 时间：2013-03-26T13:56:23.470
> 
> 标签：java, linux, gnome

免责声明：我知道*关于这个主题**有一个非常相似的[问题。](https://stackoverflow.com/questions/3188484/windows-how-to-get-a-list-of-all-visible-windows)*

我试图得到与 NoozNooz42[在这里](https://stackoverflow.com/questions/3188484/windows-how-to-get-a-list-of-all-visible-windows)描述的完全相同的结果。但是[mdma 的](https://stackoverflow.com/a/3238193/882160)答案不符合我的需要，因为我有兴趣在 linux 上做同样的事情。如果重要的话，最好使用 gnome。所以在这里使用 JNA 和 user32 库不是一个选项（*或者是吗？*）。

任何建议都会很棒，我几乎找不到有关该主题的任何内容。

PS我唯一发现的是wmctrl命令（我最终可以在java中调用和解析它）列出了窗口但没有给我任何关于z-order的信息。

更新：如果我能在 z 顺序更改时收到通知/回调，那将是完美的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T14:32:01.013

使用 xprop，它显示窗口属性。z 顺序的窗口列表在`_NET_CLIENT_LIST_STACKING`根窗口的属性中：

```
xprop -root | grep '_NET_CLIENT_LIST_STACKING(WINDOW)' 
```

输出应如下所示：

```
_NET_CLIENT_LIST_STACKING(WINDOW): window id # 0x2000003, 0x4000004,
0x1c00004, 0x1c00030, 0x1c00033, 0x2e00004 
```

稍后您可以通过以下方式获取有关特定窗口的更多信息：

```
xprop -id <id> 
```

或者

```
xwininfo -id <id> 
```

# javascript - 移除 id 名称包含特定字符串的元素

> ID：15638887
> 
> 赞同：3
> 
> 时间：2013-03-26T13:56:27.927
> 
> 标签：javascript

我想删除 id name 包含 string 的所有元素（假设它们都是 div）`bs`。无论它们是否是嵌套元素，如何通过 javascript 执行此操作？（不是jQuery）

```
<div id="new_bs_add"></div>

<div id="bsremove"></div>

<div id="somethingelse"></div>

... and many more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T14:00:10.200

没有 jQuery，但如果支持 CSS3 选择器，你可以选择

```
var rem = document.querySelectorAll("[id*='bs']"), i = 0;
for (; i < rem.length; i++)
    rem[i].parentNode.removeChild(rem[i]); 
```

否则，只需对 VisioN 的解决方案进行轻微编辑：

```
var divs = document.querySelectorAll("[id]");
for (var i = 0, len = divs.length; i < len; i++) {
    var div = divs[i];
    if (div.id.indexOf("bs") > -1) {
        div.parentNode.removeChild(div);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:58:13.627

*纯 JavaScript：*

```
var divs = document.getElementsByTagName("div");
for (var i = divs.length; i;) {
    var div = divs[--i];
    if (div.id.indexOf("bs") > -1) {
        div.parentNode.removeChild(div);
    }
} 
```

As an example, in *jQuery* it is one line:

```
$("div[id*='bs']").remove(); 
```

**DEMO:** [http://jsfiddle.net/c4ewU/](http://jsfiddle.net/c4ewU/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T14:00:36.903

获取元素列表的最便携方法是`document.getElementsByTagName`. 然而，结果列表是一个*活动节点列表*，这意味着如果您修改文档，列表也会更改！

有两种解决方案。一种是复制一份清单：

```
var nodes = document.getElementsByTagName('div');
var copy = [].slice.call(nodes, 0);   // take a copy

for (var i = 0, n = copy.length; i < n; ++i) {
    var d = copy[i];
    if (d.parentNode && d.id.indexOf('bs') >= 0) {
        d.parentNode.removeChild(d);
    }
} 
```

第二种是向后处理列表，或者确保在修改列表时不推进迭代器。这采用后一种方法：

```
var nodes = document.getElementsByTagName('div');
for (var i = 0; i < nodes.length; /* blank */ ) {
    var d = nodes[i];
    if (d.id.indexOf('bs') >= 0) {
        d.parentNode.removeChild(d);
    } else {
        ++i; // iterate forward
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:27:54.620

尝试此代码首先获取包含某些文本的所有元素（此处为“bs”）

```
var matches = [];
var searchElements = document.getElementsByTagName("body")[0].children;
for(var i = 0; i < searchElements.length; i++) {
  if(searchElements[i].tagName == 'DIV') {
    if(searchElements[i].id.indexOf('bs') != -1) {
       matches.push(searchElements[i]);
    }
  }
} 
```

然后从html正文中删除它们

```
for(var i = 0;i<matches.length; i++)
    matches[i].parentNode.removeChild(matches[i]); 
```

如果您在第一个循环中删除它们，将有一些标签不会被删除，因为每次删除节点时子数组长度都会减少。因此，将它们全部放入外部数组然后删除它们的更好方法。

# android - SDK Facebook 3.0 的权限

> ID：15638892
> 
> 赞同：0
> 
> 时间：2013-03-26T13:56:33.783
> 
> 标签：android, facebook, authentication, login, permissions

我正在使用新的 SDK Facebook 3.0。我知道当我想请求权限（没有基本权限）时，我必须像这样在 LoginButton 中设置它：

```
 signInFBButton.setReadPermissions(Arrays.asList("email")); 
```

但是当我不使用 LoginButton 时，我不知道该怎么做。我正在使用 openActiveSession() 来打开会话，但我必须接收电子邮件，而且如果没有 LoginButton，我不知道该怎么做。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:17:28.217

创建一个[Session.OpenRequest](https://developers.facebook.com/docs/reference/android/3.0/Session.OpenRequest)（它使用构建器模式）。

```
Session.OpenRequest openRequest = new Session.OpenRequest(this);
openRequest.setPermissions(...)
           .setCallback(...); 
```

然后创建一个新会话并将其设置为活动会话

```
Session session = new Session(this);
Session.setActiveSession(session); 
```

最后，打开刚刚创建的会话

```
session.openForRead(openRequest); 
```

# ios - 应该如何分发使用 VOIP 标志保持始终连接的 b2b 应用程序

> ID：15638898
> 
> 赞同：0
> 
> 时间：2013-03-26T13:56:39.460
> 
> 标签：ios, apple-push-notifications, voip, enterprise, b2b

我有一个 b2b 应用程序，它使用 VOIP 标志来保持始终连接。

最好的方法可能是在应用程序中实现 APNS 支持。但我不想改变服务器端，所以我正在寻找替代品。

可能的替代品是

**1\. B2b 应用**

我可以将我的应用发布为[b2b](https://developer.apple.com/programs/volume/b2b/)

1.  提交时我没有看到 b2b 应用选项（可能是因为缺少税务信息）
2.  我的应用程序是免费的，但我的客户下载我的应用程序必须购买批量购买计划。我的风俗就要付钱？

**2.企业账号**

1.  如何通过[企业账户](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)分发应用程序？
2.  我需要我的客户的 UDID 吗？

请建议分发我的应用程序的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:21:59.843

如果该应用程序仅适用于您的客户，那么您能做的最好的事情就是告诉他们必须购买企业帐户。然后，您使用他们的帐户构建应用程序并将其托管在`.ipa`只有他们可以访问的 Web 服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:11:25.490

1.  您自己无法获得企业帐户（或者更确切地说，如果不是您的组织运行该应用程序，则不应该）。您的客户/公司需要注册。
2.  使用 Enterprise 帐户，您可以分发没有 UDID 的应用程序。Enterprise Distribution Provisioning Profile 允许应用程序安装在任意数量的设备上，就像 App Store Distribution Provisioning Profile 一样。但是，使用 Enterprise Distribution Provisioning Profile 签名的应用程序不能在 App Store 上分发，反之亦然。

请注意，与常规开发人员帐户相比，注册企业帐户更像是 PITA。具体要求见：[https ://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

编辑：它不必付费，它可以是免费的，但您的客户必须是批量购买计划的一部分。Apple 的网站：“您可以免费或以您选择的任何价格层级提供定制应用程序。一旦您确定了您的客户和发布日期，您就一切就绪。” - 来源：[https ://developer.apple.com/programs/volume/b2b/](https://developer.apple.com/programs/volume/b2b/)

# eclipse - 如何使用 JGit 为新的本地分支设置上游分支

> ID：15638902
> 
> 赞同：1
> 
> 时间：2013-03-26T13:56:43.367
> 
> 标签：eclipse, git, jgit

我使用以下代码从以下代码创建一个新分支`origin/master`：

```
CreateBranchCommand branchCmd = git.branchCreate();
branchCmd.setForce(true);
branchCmd.setName("newFeatureBranch");
branchCmd.setUpstreamMode(SetupUpstreamMode.SET_UPSTREAM);
branchCmd.setStartPoint("origin/master");
branchCmd.call(); 
```

运行此代码后，我得到一个新的本地分支，其中包含以下上游：

![在此处输入图像描述](../Images/1e6704c34064aa2dd250712e49dbaea1.png)

但这不是我想要的。其上游应设置为`refs/heads/newFeatureBranch`：

![在此处输入图像描述](../Images/6d5045b1fe49845ee39628c2475b2221.png)

如何在新分支中设置上游？

# python-3.x - Joblib 并行将时间增加 n 个作业

> ID：15638905
> 
> 赞同：2
> 
> 时间：2013-03-26T13:56:48.913
> 
> 标签：python-3.x, multiprocessing, wordnet

在尝试让多处理在 python 3.3 中工作（并理解它）时，我迅速恢复到 joblib 以使我的生活更轻松。但我经历了一些非常奇怪的事情（在我看来）。运行此代码时（只是为了测试它是否有效）：

```
Parallel(n_jobs=1)(delayed(sqrt)(i**2) for i in range(200000)) 
```

它大约需要 9 秒，但`n_jobs`实际上需要更长的时间......因为`n_jobs=2`它需要 25 秒，`n_jobs=4`它需要 27 秒。
如果我错了，请纠正我......但如果`n_jobs`增加，它不应该更快吗？我有一个 Intel I7 3770K，所以我想这不是我的 CPU 的问题。

也许给出我最初的问题可以增加答案或解决方案的可能性。
我有一个 30k+ 字符串的列表，`data`我需要对每个字符串（独立于其他字符串）做一些事情，大约需要 14 秒。这只是测试我的代码是否有效的测试用例。在实际应用中，可能会有 100k+ 个条目，因此需要多处理，因为这只是整个计算的一小部分。这就是这部分计算需要做的事情：

```
data_syno = []
for entry in data:
    w = wordnet.synsets(entry)
    if len(w)>0: data_syno.append(w[0].lemma_names[0])
    else: data_syno.append(entry) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T13:56:27.060

n_jobs 参数是反直觉的，因为要使用的最大内核数为 -1。在 1 它只使用一个核心。在 -2 它使用 max-1 个核心，在 -3 它使用 max-2 个核心，等等。这就是我的阅读方式：

> 来自文档：

n_jobs：int：

```
The number of jobs to use for the computation. If -1 all CPUs are used. If 1 is given, no parallel computing code is used at all, which is useful for debugging. For n_jobs below -1, (n_cpus + 1 + n_jobs) are used. Thus for n_jobs = -2, all CPUs but one are used. 
```

# google-app-engine - 如何正确使用 NDB Query AND / OR

> ID：15638912
> 
> 赞同：2
> 
> 时间：2013-03-26T13:57:05.230
> 
> 标签：google-app-engine, app-engine-ndb

我不确定我是否正在正确地构建`AND`查询`OR`。当我查询匹配标签时，我得到了一些匹配的视频。但是当我尝试第二个查询时（以确保视频与自身不相关），查询会返回所有视频。

**更新**：我希望返回至少有一个与所讨论标签相同的视频`video`，但返回的列表不包括`video`. 基本上是一个related_videos 功能。

```
from solveforx.lib.moonshots import Video
from google.appengine.ext import ndb

video = Video.query().get()
tags = video.tags or []

for tag in tags:
  print Video.query(Video.tags == tag).count() # returns 1
  print "-------"
  print Video.query(Video.tags == tag and Video.key != video.key) # returns total videos - 1
  print "========"
  # also tried this
  # print Video.query(Video.tags == tag, ndb.AND(Video.key != moonshot.key)).count() # returns 0
  # print Video.query(ndb.AND(ndb.AND(Video.tags == tag), ndb.AND(Video.key != video.key) )).count() 
```

查看有关此[的文档](https://developers.google.com/appengine/docs/python/ndb/queries#nest_and_or)，但不确定操作员的工作方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T14:46:49.063

`AND`至少需要两个参数。你应该做：

```
Video.query(ndb.AND(Video.tags == tag, Video.key != video.key)) 
```

从您发布的链接中，您还可以看到更多关于如何将其结合的示例`ndb.OR`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T14:41:26.097

这有效：

```
for tag in tags:
  Video.query(Video.tags == tag, Video.key != video.key) 
```

# xslt - XSLT 转换：选择 distinct 和 appendchild 组

> ID：15638916
> 
> 赞同：0
> 
> 时间：2013-03-26T13:57:14.023
> 
> 标签：xslt, distinct, transformation, appendchild, xslt-grouping

```
<Sections>
    <Products>
      <Transport>
        <TransportSequence>1</TransportSequence>
        <Traveller>001</Traveller>
      </Transport>
      <Transport>
        <TransportSequence>2</TransportSequence>
        <Traveller>001</Traveller>
      </Transport>
    </Products>
  </Sections>
  <Sections>
    <Products>
      <Transport>
        <TransportSequence>1</TransportSequence>
        <Traveller>002</Traveller>
      </Transport>
      <Transport>
        <TransportSequence>2</TransportSequence>
        <Traveller>002</Traveller>
      </Transport>
    </Products>
  </Sections> 
```

我对某些 XML 的排序有一个特定的问题。从上面的示例中，我需要更改格式，以便仅在 TransportSequence 上选择 distinct。然后，我需要将任何“Traveller”节点分配为子节点以生成如下内容：

```
<Sections>
   <Products>
      <Transport>
         <TransportSequence>1</TransportSequence>
         <Travellers>
            <Traveller>001</Traveller>
            <Traveller>002</Traveller>
         </Travellers>
      </Transport>
      <Transport>
         <TransportSequence>2</TransportSequence>
         <Travellers>
            <Traveller>001</Traveller>
            <Traveller>002</Traveller>
         </Travellers>
      </Transport>
   </Products>
</Sections> 
```

另一个问题是，Transport 节点中还包含许多本例中未显示的子节点和孙节点。也可以有许多属于 TravellerSequence 的 travller。还有许多 TransportSequence 号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:08:42.347

这是一个 XSLT 2.0 样式表，可与 Saxon 9 或 AltovaXML 等 XSLT 2.0 处理器一起运行：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="*[Sections]">
  <xsl:copy>
    <Sections>
      <Products>
        <xsl:for-each-group select="Sections/Products/Transport" group-by="TransportSequence">
          <Transport>
            <TransportSequence><xsl:value-of select="current-grouping-key()"/></TransportSequence>
            <Travellers>
              <xsl:copy-of select="current-group()/Traveller"/>
            </Travellers>
          </Transport>
        </xsl:for-each-group>
      </Products>
    </Sections>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

它转变

```
<Root>
<Sections>
    <Products>
      <Transport>
        <TransportSequence>1</TransportSequence>
        <Traveller>001</Traveller>
      </Transport>
      <Transport>
        <TransportSequence>2</TransportSequence>
        <Traveller>001</Traveller>
      </Transport>
    </Products>
  </Sections>
  <Sections>
    <Products>
      <Transport>
        <TransportSequence>1</TransportSequence>
        <Traveller>002</Traveller>
      </Transport>
      <Transport>
        <TransportSequence>2</TransportSequence>
        <Traveller>002</Traveller>
      </Transport>
    </Products>
  </Sections>
</Root> 
```

进入

```
<Root>
   <Sections>
      <Products>
         <Transport>
            <TransportSequence>1</TransportSequence>
            <Travellers>
               <Traveller>001</Traveller>
               <Traveller>002</Traveller>
            </Travellers>
         </Transport>
         <Transport>
            <TransportSequence>2</TransportSequence>
            <Travellers>
               <Traveller>001</Traveller>
               <Traveller>002</Traveller>
            </Travellers>
         </Transport>
      </Products>
   </Sections>
</Root> 
```

[编辑]要完成答案，如果您想使用 XSLT 1.0 处理器，使用 Muenchian 分组的解决方案如下所示：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:key name="by-seq" match="Sections/Products/Transport" use="TransportSequence"/>

<xsl:template match="*[Sections]">
  <xsl:copy>
    <Sections>
      <Products>
        <xsl:for-each select="Sections/Products/Transport[generate-id() = generate-id(key('by-seq', TransportSequence)[1])]">
          <Transport>
            <xsl:copy-of select="TransportSequence"/>
            <Travellers>
              <xsl:copy-of select="key('by-seq', TransportSequence)/Traveller"/>
            </Travellers>
          </Transport>
        </xsl:for-each>
      </Products>
    </Sections>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# sql - 无法将在 VS2010 中创建的数据库附加到 SQL Server studio 2008 r2

> ID：15638919
> 
> 赞同：0
> 
> 时间：2013-03-26T13:57:27.823
> 
> 标签：sql, visual-studio-2010, sql-server-2008-r2

我在 VS2010 C# 中创建了一个数据库，我想将它附加到 SQL Server 2008 R2，以便我可以使用导入向导从 Excel 文件中为每个表导入数据。

但是，当我尝试`.mdf`从 docs/vs2010/projects/... 等附加文件时，我无法在 SQL Server Management Studio 窗口中选择它（参见屏幕截图）。

它只会让我`.mdf`从 SQL Server Management Studio 2008 程序文件位置选择文件。

非常感谢任何帮助，谢谢。

图像：

[http://i1186.photobucket.com/albums/z373/barbsbargainsltd/q3_zps127dd713.jpg](http://i1186.photobucket.com/albums/z373/barbsbargainsltd/q3_zps127dd713.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:04:49.570

尝试 `.mdf`从

> docs/vs2010/projects/...等

到 SQL Server Management Studio 2008 程序文件目录，然后重新连接。如果不允许复制，在VS的选项中分离数据库，然后复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:10:11.033

在正常情况下，您需要将 mdf 文件复制到 SQL Server 的数据文件夹（即 C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA）。下一步，您需要附加此文件数据库从您的 sql 服务器窗口。确保您的数据库文件扩展名是 .mdf

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:05:28.850

很难从屏幕截图中看出...在对话框中，您可以浏览，也可以手动输入文件的路径（包括网络资产的 UNC 路径），或者您可以将文件复制到该位置，这可能无论如何都会更好，因为这样您的所有 .mdf 文件都在一个地方。

# ios - Objective C中的DES加密和解密

> ID：15638920
> 
> 赞同：0
> 
> 时间：2013-03-26T13:57:30.543
> 
> 标签：ios, objective-c, des

我想用DES加密和解密我的ios项目中的一些数据。我搜索了互联网，但找不到我的问题的正确答案。我正在搜索有关如何在 DES 中使用目标 c 解密和加密数据的教程或示例。谁能告诉我一个方法或例子？

# android - 无论如何使用 3.0 sdk 的 Android Facebook SDK 2.0 登录体验？

> ID：15638923
> 
> 赞同：1
> 
> 时间：2013-03-26T13:57:40.740
> 
> 标签：android, ios, facebook, user-interface, facebook-android-sdk

很抱歉问题的简单性，但 3.0 登录体验与 2.0 体验有很大不同。2.0 体验提供了更丰富（但更慢）的多活动登录过程，而 3.0 体验主要是一个至少有一个弹出窗口的活动。Facebook 身份验证对于我们的应用程序非常重要，因为对于大多数提供此类集成的人来说，我们希望为我们的用户提供最佳的用户体验。大多数人都习惯了以前的版本，我们的产品经理相当担心我们的登录率。我和我的团队已经完成了 3.0 登录和一些发布功能，我们真的不想回到 2.0 sdk。

我查看了 developer.facebook.com 网站上的各种教程和示例，包括 Session API：[https](https://developers.facebook.com/docs/reference/android/3.0/Session) ://developers.facebook.com/docs/reference/android/3.0/Session我没有看到任何可以让我们这样做。没有对 2.0 sdk 进行逆向工程以查看是否可以提取适当的代码（由于许多原因，这可能无论如何都行不通）。显然，回到旧的 sdk 只是为了不同的用户体验而被弃用是一个糟糕的解决方案，而且 Facebook 将在今年 6 月 13 日取消对 2.0 的支持（[https://developers.facebook.com/blog/post /2012/12/13/facebook-sdk-3-0-for-android-and-native-login/](https://developers.facebook.com/blog/post/2012/12/13/facebook-sdk-3-0-for-android-and-native-login/)）。

建议？

谢谢！

贾里德

# javascript - 如何根据数据活动属性激活 jQuery UI Accordion？

> ID：15638924
> 
> 赞同：0
> 
> 时间：2013-03-26T13:57:48.110
> 
> 标签：javascript, jquery, html, jquery-ui

出于某种原因，我无法使用存储在数据活动属性中的数据激活手风琴面板？

我的 HTML 看起来像这样（在它变成手风琴并添加了所有类之后）：

```
<div class="gcAccordion  ui-accordion ui-widget ui-helper-reset" style="" data-active="1" role="tablist">
    <h3 class="gcAccordionTitle  ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons" style="display: block;" role="tab" id="ui-accordion-1-header-0" aria-controls="ui-accordion-1-panel-0" aria-selected="false" tabindex="0"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>This is a title</h3>
    <div class="gcAccordionContent  ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" style="display: none;" id="ui-accordion-1-panel-0" aria-labelledby="ui-accordion-1-header-0" role="tabpanel" aria-expanded="false" aria-hidden="true">This is some content</div>
    <h3 class="gcAccordionTitle  ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons" style="display: block;" role="tab" id="ui-accordion-1-header-1" aria-controls="ui-accordion-1-panel-1" aria-selected="false" tabindex="-1"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>This is a 2nd title</h3>
    <div class="gcAccordionContent  ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" style="display: none;" id="ui-accordion-1-panel-1" aria-labelledby="ui-accordion-1-header-1" role="tabpanel" aria-expanded="false" aria-hidden="true">This is some 2nd content</div>
    <h3 class="gcAccordionTitle  ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons" style="display: block;" role="tab" id="ui-accordion-1-header-2" aria-controls="ui-accordion-1-panel-2" aria-selected="false" tabindex="-1"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>This is a 3rd title</h3>
    <div class="gcAccordionContent  ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" style="display: none;" id="ui-accordion-1-panel-2" aria-labelledby="ui-accordion-1-header-2" role="tabpanel" aria-expanded="false" aria-hidden="true">This is some 3rd content</div>
</div> 
```

Javascript：

```
$('.gcAccordion').accordion({
  collapsible: true,
  heightStyle: "content",
  autoHeight: false,
  active: false,
  create: function(event, ui){
    $('.gcAccordion').each(function(){
      console.log($(this).attr('data-active'));
      $(this).accordion( "option", "active", $(this).attr('data-active'));          
    });
  }      
}); 
```

console.log 调用正确地将 1 输出到日志，但由于某种原因，它没有激活第二个面板。如果我将此行用于 javascript 中的第 9 行，则它可以工作：

```
$(this).accordion( "option", "active", 1); 
```

但它不适用于数据活动属性 1 值。有什么想法吗？

编辑：删除链接，因为该页面不再处于活动状态，并且所有代码都在问题中。

**更新：**

谢谢您的帮助。我需要`parseInt($(this).attr('data-active'))`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:59:17.723

返回的值的类型`.attr()`是字符串。我打赌你需要一个真/假（0/1）值，所以试试：

```
$(this).accordion("option", "active", +$(this).attr('data-active')); 
```

一`+`元运算符类似于`parseInt`，将字符串转换为数字，但解析不那么严格，并且速度更快（我认为）。

可能更好的是：

```
$(this).accordion("option", "active", $(this).attr('data-active') === "1" ? 1 : 0); 
```

`data-active`这将导致手风琴窗格仅在属性存在且其值为“1”时才处于活动状态。存在/值的任何其他组合都不会打开窗格。

**编辑：**

忽略第二个示例，因为“活动”选项接受基于 0 的整数，正如 OP 指出的那样。我认为它出于某种原因接受了真/假。

# sqlite - 如何使用 SQLite 管理器创建复合主键

> ID：15638925
> 
> 赞同：0
> 
> 时间：2013-03-26T13:57:48.140
> 
> 标签：sqlite, primary-key, composite-primary-key, sqlitemanager

对于我正在处理我的一个 SQLite 表的项目，需要一个由两个外键组成的复合主键。记录检索依赖于两个条件；大学课程和注册该课程的学生。

我在 SQLite 管理器中看不到任何允许我为此表创建复合键的地方。也许我只是没有看到它，但任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:26:29.930

检查两列的“主键”。

# powershell - Powershell 选择特定值

> ID：15638927
> 
> 赞同：3
> 
> 时间：2013-03-26T13:57:52.807
> 
> 标签：powershell

嗨，对不起，我不是脚本专家，我认为我的问题很简单，但我找不到答案。

我这样做：

```
$i = Get-ClusterResource "Cluster IP Address" | get-clusterparameter | Select -Property value 
```

并得到：

```
Value
-----
Cluster Network 2
10.32.32.36
255.255.252.0
2
0
0
255.255.252.0
1/1/0001 12:00:00 AM
1/1/0001 12:00:00 AM
255.255.255.255
0.0.0.0
255.0.0.0 
```

但我需要的唯一信息是 ip "10.32.32.36" 所以我尝试了：

```
$i = Get-ClusterResource "Cluster IP Address" | get-clusterparameter | Select -Property value | Select-String -SimpleMatch "10." 
```

但后来我得到`$i = @{Value=10.32.32.36}`

我不知道为什么它添加了`@{value=xxxx}`如何删除它并且只有IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:03:30.530

如果 ip 始终是您可以使用的第二个值：

```
$i =  (Get-ClusterResource "Cluster IP Address" | get-clusterparameter | 
     Select -expand value )[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:27:51.753

如果你想要集群地址，你应该只得到`Address`集群参数：

```
$i = Get-ClusterResource "Cluster IP Address" `
       | Get-ClusterParameter Address `
       | select Value 
```

上面的命令将返回一个具有`Value`保存 IP 地址的属性的对象。如果您只需要实际的 IP 地址，请改用：

```
$i = (Get-ClusterResource "Cluster IP Address" `
       | Get-ClusterParameter Address).Value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:05:33.680

Select-String 不是为操作对象而设计的，它是为操作文本（文件）而设计的。PowerShell 中用于过滤对象的工具是 Where-Object cmdlet：

```
$i = Get-ClusterResource "Cluster IP Address" | 
    get-clusterparameter | 
    Where-Object { $_.Value -like '10.*' } |
    Foreach-Object { $_.Value } 
```

另一件事是您想要该值，而不是具有单个属性的自定义对象（这就是`select -property value`将要创建的）。因此 - 您可以使用`-expand`参数 on`Select-Object`或使用`Foreach-Object`cmdlet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:02:32.347

Select-string 返回 MatchInfo 对象。要仅获取匹配行的值，您需要仅选择“Line”属性的值：

```
$i = Get-ClusterResource "Cluster IP Address" |
 get-clusterparameter |
 Select -Property value |
 Select-String -SimpleMatch "10." |
 Select -ExpandProperty Line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-17T03:37:21.847

与 office365 在线命令有同样的问题，我只想将值捕获到变量中，我这样做了：

```
$displayname = get-mailbox $whataccount | select displayname 
```

而且，就像你一样，我收到了这个：

```
"@{DisplayName=Bob Newhart} 
```

这就是我为获得我想要的价值所做的事情：

```
$displayname = get-mailbox $whataccount | select displayname
$displayname = $displayname.displayname 
```

现在变量只包含这个： `Bob Newhart`

但这与 Ansgar Wiechers 在回答中所说的基本相同。

# c# - asp.net gridview排序数据表+不同的数据表

> ID：15638929
> 
> 赞同：0
> 
> 时间：2013-03-26T13:57:55.857
> 
> 标签：c#, asp.net, gridview, datatable

我有一个网格视图，它显示不同的报告（调用不同的存储过程）。我已经使用`onSorting`事件实现了排序功能。在排序事件中，我有以下代码：

```
 DataTable table = getReportDT("ReportName", "storedProcName");
 table.DefaultView.Sort = sortExpression + direction;    
 gridView.DataSource = table;    
 gridView.DataBind(); 
```

我目前正在传递报告的名称及其各自的存储过程，但是我希望此方法尽可能通用，如果用户从下拉列表中选择另一个报告名称，数据表将相应更新。我尝试使用属性传递参数，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:56:33.903

在 aspx 页面中使用 DropDownList：

```
<asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem Text="Report 1" Value="Report1_SP"></asp:ListItem>
    <asp:ListItem Text="Report 2" Value="Report2_SP"></asp:ListItem>
    <asp:ListItem Text="Report 3" Value="Report3_SP"></asp:ListItem>
</asp:DropDownList> 
```

在后面的代码中从 DropDownList 中获取名称和 sp：

```
DataTable table = getReportDT(DropDownList1.SelectedItem.Text,DropDownList1.SelectedItem.Value); 
```

# python - 我可以捕获在 XSL 转换过程中使用/未使用的模板吗？

> ID：15638937
> 
> 赞同：0
> 
> 时间：2013-03-26T13:58:20.020
> 
> 标签：python, xslt, lxml, libxslt

是否可以使用 记录/捕获在 XML 转换期间使用和/或未使用的 XSL 模板`lxml`？我希望报告和修剪未使用的模板以减少“技术债务”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:45:22.970

`lxml`的转换方法允许您分析转换，并以 XML 文档的形式获取结果，该文档显示了模式/模式/命名模板的使用次数。然后应该可以跨 XSL 文件执行 XPath 以获得所有比较模式/模式/命名模板并比较两个列表以查看哪些模板使用最多/最少。

# c# - C#方法重载和泛型接口

> ID：15638938
> 
> 赞同：8
> 
> 时间：2013-03-26T13:58:22.157
> 
> 标签：c#, generics, overloading

我对我们项目中的一个问题感到困惑。我试图简化它以重现效果：

```
interface IBar { }

class Bar : IBar {}

interface IFoo<T> where T : IBar { }

class Foo<T> : IFoo<T> where T : IBar { }

class Class1
{
    public void DoTheFoo<T>(T bar) where T : IBar
    {}

    public void DoTheFoo<T>(IFoo<T> foo) where T : IBar
    {}

    public void Test()
    {
        var bar = new Bar();
        var foo = new Foo<Bar>();

        DoTheFoo(bar); // works

        DoTheFoo<Bar>(foo); // works
        DoTheFoo((IFoo<Bar>)foo); // works
        DoTheFoo(foo); // complains
    }
} 
```

对我来说，这看起来不错，但编译器在最后一次调用时抱怨，因为它试图`DoTheFoo<T>(T bar)`，而不是`DoTheFoo<T>(IFoo<T> foo)`抱怨参数类型不合适。

*   当我删除方法`DoTheFoo<T>(T bar)`时，最后一次调用有效！
*   当我将其更改为 时`DoTheFoo<T>(Foo<T> foo)`，它可以工作，但我不能使用它

在我们当前的代码中解决这个问题并不难。但是 a) 奇怪 b) 太糟糕了，我们不能拥有这两个重载方法。

是否有解释这种行为的通用规则？是否有可能使它工作（除了给方法不同的名称）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T14:07:22.410

当与重载解析结合使用时，这只是类型推断的问题，对您不利。只需明确指定类型参数即可轻松修复 - 不需要强制转换：

```
DoTheFoo<Bar>(foo); 
```

通常我对采用不同参数类型的重载感到紧张。如果您只是为方法提供不同的名称，通常代码会变得更简单。除此之外，您的*读者*不需要在类型推断的同时尝试执行重载解析......

编辑：我相信问题是排序是这样的：

*   两种方法都找到了
*   类型推断适用于这两种方法*而不验证约束*- 所以对于第一种方法，我们得到`T = Foo<Bar>`，而对于第二种方法，我们得到`T = Bar`。这两种方法都适用于这一点。
*   执行重载解析，它决定第一种方法是最具体的方法。
*   只有*在*执行重载决议之后，才会对已检查的约束`T`- 并且由于没有从`Bar`to的引用转换而失败`IFoo`。

有一篇[Eric Lippert 博客文章介绍了为什么要以这种方式设计语言](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)，还有[我写的一篇关于它的博客文章](http://msmvps.com/blogs/jon_skeet/archive/2010/10/28/overloading-and-generic-constraints.aspx)，还有[一篇关于一般重载的文章](http://csharpindepth.com/Articles/General/Overloading.aspx)。他们每个人都可能有帮助，也可能没有帮助:)

编辑：暂时将类型推断放在一边，第一种方法更具体的原因是，在一种情况下，我们正在从`Foo<Bar>`to转换，而在另一种情况下，我们正在从to`Foo<Bar>`转换。根据 C# 5 规范的第 7.5.3.3 节：`Foo<Bar>``IFoo<Bar>`

> 给定从表达式 E 转换为类型 T1 的隐式转换 C1，以及从表达式 E 转换为类型 T2 的隐式转换 C2，如果以下至少一项成立，则 C1 是比 C2 更好的转换： - E具有类型 S 并且存在从 S 到 T1 但不从 S 到 T2 的身份转换 - ...

标识转换是从一个类型到自身，这*是*第一个重载的情况，但*不是*第二个。所以第一次转换更好。

# delphi - 当我尝试登录 Craigslist 时，为什么会出现登录页面？

> ID：15638940
> 
> 赞同：-4
> 
> 时间：2013-03-26T13:58:25.107
> 
> 标签：delphi, indy, craigslist

我正在尝试使用 Delphi 2010 和最新版本的 Indy 10 登录 Craigslist，并检索我的帐户页面（以收集我所有帖子的列表）。

但是，当我发布登录详细信息时，[返回的 HTML](http://chopapp.com/#zg9e3pre)是[登录页面的](https://accounts.craigslist.org/login)HTML ，而我希望让[我的帐户页面列出我的帖子](http://chopapp.com/#oi7e50u9)。

这是我的最新代码：

```
function TfrmMain.Login: string;
var
  IdHTTP: TIdHTTP;
  Request: TStringList;
  Response: TMemoryStream;
  SSLHandler: TIdSSLIOHandlerSocketOpenSSL;
begin
  Result := '';
  try
    Response := TMemoryStream.Create;
    try
      Request := TStringList.Create;
      try
        Request.Add('op=login');
        Request.Add('redirect=http://www.craigslist.org/');
        Request.Add('login=' + edtEmail.Text);
        Request.Add('password=' + edtPassword.Text);
        IdHTTP := TIdHTTP.Create;
        try
          SSLHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
          try
            SSLHandler.SSLOptions.Method := sslvSSLv3;
            SSLHandler.SSLOptions.Mode := sslmUnassigned;

            IdHTTP.IOHandler := SSLHandler;
            IdHTTP.AllowCookies := True;
            IdHTTP.HandleRedirects := True;
            IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded';
            IdHTTP.Post('https://accounts.craigslist.org/login', Request, Response);
            Result := IdHTTP.Get('https://accounts.craigslist.org/');
          finally
            SSLHandler.Free;
          end;
        finally
          IdHTTP.Free;
        end;
      finally
        Request.Free;
      end;
    finally
      Response.Free;
    end;
  except
    on E: Exception do
      ShowMessage(E.Message);
  end;
end; 
```

我已经通过调试确认电子邮件和密码是正确的值，因为它们是在请求参数中传递的，所以为什么我没有得到我期望的页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:22:15.100

根据您收到的 HTML，登录字段的名称是`inputEmailHandle`，而不是`login`。同样，密码字段是`inputPassword`，而不是`password`。您还可以省略一些附加字段，包括`step`、`rt`和`rp`。我在表格中看到 no`op`或`redirect`字段。

换句话说，这里显示的代码不是登录Craigslist的代码；它是[用于登录 Filestrum 的代码，](https://stackoverflow.com/a/12723859/33732)地址发生了变化，而不考虑周围代码的重要性。

# c# - 来自数据库的 HTML 显示为纯文本

> ID：15638942
> 
> 赞同：1
> 
> 时间：2013-03-26T13:58:26.817
> 
> 标签：c#, asp.net-mvc-4

我正在使用 Code First，并且每次模型更改时都会将测试数据引入数据库。当我执行以下操作时，问题就来了：

```
 context.News.Add(new News
            {
                Id = 3,
                NewsTitle = "title",
                NewsImage = "thumb.jpg",
                NewsText = "text",
                Venue = @"<iframe width=""1000"" height=""350"" frameborder=""0"" scrolling=""no"" marginheight=""0"" marginwidth=""0"" src=""https://maps.google.ro/maps?hl=ro&amp;ie=UTF8&amp;t=h&amp;ll=46.778815,23.614479&amp;spn=0.002572,0.010718&amp;z=17&amp;output=embed""></iframe>"
             }); 
```

我也试过用 \ 而不是双引号......仍然没有。问题是当我在页面上使用“场地”时，它显示为纯文本：

```
<div style="margin-top: 10px;">
     @News.Venue
</div> 
```

我应该怎么做才能将它作为html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:59:37.057

利用

```
@Html.Raw(News.Venue) 
```

这将以`News.Venue`未编码的原始 HTML 格式输出。有关详细信息，请参阅[MSDN 上的 HtmlHelper.Raw 。](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)您当然可能要小心 中的内容`.Venue`（如果它来自第三方），并从脚本或不需要的内容中清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:25:33.550

有一个特定的[MvcHtmlString 类](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring%28v=vs.108%29.aspx)，旨在存储经过 HTML 编码的字符串，并且在呈现时不应再次编码。

# apache - Apache Tika 能提取中文、日文等外语吗？

> ID：15638944
> 
> 赞同：5
> 
> 时间：2013-03-26T13:58:31.770
> 
> 标签：apache, apache-tika

Apache Tika 能提取中文、日文等外语吗？

我有以下代码：

```
 Detector detector = new DefaultDetector();
    Parser parser = new AutoDetectParser(detector);
    InputStream stream = new ByteArrayInputStream(bytes);
    OutputStream outputstream = new ByteArrayOutputStream();
    ContentHandler textHandler = new BodyContentHandler(outputstream);
    Metadata metadata = new Metadata();
    // Set<String> langs = LanguageIdentifier.getSupportedLanguages();
    // metadata.set(Metadata.CONTENT_LANGUAGE, lang);
    // metadata.set(Metadata.FORMAT, hint);
    ParseContext context = new ParseContext();
    try {
        parser.parse(stream, textHandler, metadata, context);
        String extractedText = outputstream.toString();
        return extractedText;
    } catch (IOException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (TikaException e) {
        e.printStackTrace();
    } 
```

如果输入的是包含中文字符的doc文件，每个中文字符将被提取为“？”。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T09:54:22.813

Apache Tika 能够从其支持的文件格式中提取 unicode 文本。只要文件格式可以存储 unicode 文本（例如中文或日文字符），Apache Tika 就可以提取

Tika 还为此包含了许多单元测试，以验证它是否有效。一个这样的测试使用[这个示例中文电子邮件](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/test/resources/test-documents/testMSG_chinese.msg)。如果使用命令行 Tika 应用程序，并抓住前几行，我们会看到它工作：

```
$ java -jar tika-app-1.4.jar --text testMSG_chinese.msg | head
Alfresco MSG format testing ( MSG 格式測試 )
    From
    Tests Chang@FT (張毓倫)
    To
    Tests Chang@FT (張毓倫)
    Recipients
    tests.chang@fengttt.com 
```

或者用这个[日本文件](https://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/test/resources/test-documents/testRTFJapanese.rtf)：

```
$ java -jar tika-app-1.4.jar --text testRTFJapanese.rtf | head -2
ゾルゲの処刑記録、
ゾルゲと尾崎、淡々と最期 
```

您只需要确保您生成的任何文本输出都以合适的编码（例如 utf8）存储，并且您用来显示它的字体支持这些字形！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T06:37:55.897

我**没有看到任何地方**写过 Apache Tika**不支持**中文和日文等外语。但是在查看以下**Apache Tika 源文件时，**我找不到这两种语言。

[http://svn.apache.org/repos/asf/tika/branches/1.4/tika-core/src/main/resources/org/apache/tika/language/tika.language.properties](http://svn.apache.org/repos/asf/tika/branches/1.4/tika-core/src/main/resources/org/apache/tika/language/tika.language.properties)

但是，您仍然可以按照五分钟用户指南中讨论的相同方式尝试实施，以使用您的中文文档文件进行测试

[https://tika.apache.org/1.4/parser_guide.html](https://tika.apache.org/1.4/parser_guide.html)

# java - 如何检索使用 Struts2 中的单选按钮选择的行的值？

> ID：15638945
> 
> 赞同：0
> 
> 时间：2013-03-26T13:58:33.267
> 
> 标签：java, html, jsp, struts2, struts

我已经使用迭代器显示了一个表，每行都有一个单选按钮，根据选择的行我想通过单击一个按钮来执行编辑和删除操作。如何通过单击编辑或删除按钮检索所选行中的所有值？

这是我的代码：

```
<s:iterator value="List" var="Bean">
        <tr> 
        <td><s:radio theme="simple" name="ID" list="#{'ID':''}"/>

        </td>
        <td ><s:property value="ID"/></td>
        <td ><s:property value="NAME"/></td>
        <td ><s:property value="STATUS"/></td>
        <td ><s:property value="TYPE"/></td>      
 </tr> 

</s:iterator> 
```

使用`s:radio`我可以检索 ID，但我想检索所选行中的所有值。

是否有任何可能的方法只为选定的行设置 bean，以便我在操作类中检索它的值？

ID 不是唯一的，因此我无法使用它来检索我选择的行中的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:10:04.443

在您的代码中，您没有编辑功能，因为您使用的`<s:property/>`标签仅输出文本。

对于编辑功能，您需要一个交互式标签，例如`<s:textfield/>`.

请注意，您的`List`和`Bean`（以及您的所有属性）值是非标准的，因为它们应该以小写字母（`getList()`-> `list`，`getBean()`-> `bean`）开头。请参考 JavaBeans 标准，并使用 CamelCase 表示法。

```
<s:iterator value="list" var="bean" status="ctr">
    <tr> 
        <td> <s:radio name="selectedId" list="#{'id':''}  
                      theme="simple" />                       </td>

        <td> <s:property value="id"/>                         </td>

        <td> <s:textfield name="bean[#ctr.index].name"/>      </td>
        <td> <s:textfield name="bean[#ctr.index].status"/>    </td>
        <td> <s:textfield name="bean[#ctr.index].type"/>      </td>
    </tr> 
</s:iterator> 
```

这样，您将需要在 Action 上：

```
@Getter @Setter private Long selectedId; 
@Getter @Setter private List<MyObject> list; 
```

您将通过循环列表访问所选元素，并选择`id`字段匹配的记录`selectedId`。

您可以通过使用 iterator`#ctr.index`属性而不是 来自动实现这一点`id`，但列表必须同步；

`Map`您可以通过使用 a而不是 List 并使用`id`as key 和`myObject`as value以更好的方式自动实现这一点。

享受

# ios - 如何使用 UIScrollview 创建具有动态速度的拇指轮？

> ID：15638946
> 
> 赞同：1
> 
> 时间：2013-03-26T13:58:34.143
> 
> 标签：ios, uiscrollview, uicontrol, uiscrollviewdelegate

## UIT拇指轮

我正在开发一个轮子，就像一个老式的音量控件，它伸出 UIView 的一侧并返回值。我遇到的问题是如何将 UIScrollView 与任务结合起来，同时让旋钮根据用户的滚动速度加速。为了清楚起见，我的轮子模型看起来像这样。

![拇指轮](../Images/888fca9f41e329bbd098e2c5fa3ec53b.png)

我创建了一个 UIScrollView 来删除和添加子视图来制作轮子。我遇到的问题是让滚轮控件根据用户旋转滚轮的速度调整返回值的大小。三个速度配置文件的值应加到总和中，慢 (+500)、中 (+1000) 和快 (+10000)。为了将橡皮筋保持在零和上限，我使用 contentOffset 来显示值。

当我尝试通过添加基于速度的运动来操纵 scrollView.bounds 或 contentOffset 时，我最终会遇到结结巴巴的体验。如果我忽略 contentSize 窗口（无限滚动），我会丢失橡皮筋值。

有谁知道如何同时获得基于速度的运动和橡皮筋末端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:57:20.360

这是你面临的一个很好的小挑战，我喜欢这个！:) 现在我正在开发类似的东西，有点像旋转轮控制，当达到某个阈值时，具有惯性旋转和“橡皮筋”等！

如果我说得对，您正在使用 UIScrollView 进行控制，并且您正在尝试使用/滥用 UIScrollView 已经存在的弹跳“功能”，对吗？您是否在根据滚动速度计算速度值时遇到问题，或者踢入橡皮筋是否会导致问题？

您是否考虑过通过“touchesBegan..”/“touchesMoved”自行实现橡皮筋效果？模仿橡皮筋非常简单：从屏幕上的某个阈值开始，视图的移动将是手指拖动移动的一半，直到完全停止。另请参阅：[在 Android 的图库中模仿 iOS 的“橡皮筋”效果](https://stackoverflow.com/questions/4451174/mimicking-the-rubber-band-effect-from-ios-in-the-gallery-on-android)

您也可以查看[iCarousel](https://github.com/nicklockwood/iCarousel)的实现。它具有自定义编程的类似“橡皮筋”效果。

我知道这不是一个令人满意的回应/答案，但也许它会将您的想法指向其他方向。

# c - 重命名函数中的变量

> ID：15638954
> 
> 赞同：-2
> 
> 时间：2013-03-26T13:59:15.297
> 
> 标签：c, rename, codeblocks

我使用 Code::Blocks 并且我想创建一个供个人使用的程序，但是我有一个问题，这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int number;
    char name[100];
    char extension[100];
    int I;

    printf("Filename: ");
    scanf("%s", name);
    system("CLS");
    printf("File number: ");
    scanf("%d", &number);
    system("CLS");
    printf("Extension: ");
    scanf("%s", extension);
    system("CLS");
    for ((I = 1); (I = number); (I++))
    {
        rename(("&s-%d%s"), ("%s-%d.tmp1"), name, number, extension); //ERROR HERE
    }
    return 0;
} 
```

当我编译时，我得到一个错误：

```
error: too many arguments to function 'rename' 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:01:42.327

`rename`只需要 2 个参数，而你传递了 4 个。

```
NAME
     rename -- change the name of a file

SYNOPSIS
     #include <stdio.h>

     int
     rename(const char *old, const char *new); 
```

您可能希望根据您的代码`sprintf()`在调用之前使用。`rename`

此外，您可能希望在此处使用 <= 以使其按预期工作：

```
for ((I = 1); (I <= number); (I++)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:06:54.013

`rename()`不是[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function)，这意味着您不能传递任意数量的变量。

如果你想使用[`rename(2)`](http://linux.die.net/man/2/rename)或者[`rename(3)`](http://linux.die.net/man/3/rename)你只需​​要使用 2 个字符串。因此，如果您想使用变量名，请将字符串组合在一起，然后将 2 个变量传递给函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:02:42.673

根据`rename()` [手册页](http://linux.die.net/man/2/rename)，该`rename()`函数只有 2 个输入参数`oldpath`和`newpath`

```
int rename(const char *oldpath, const char *newpath); 
```

因此，您可以`rename()`在代码中调用函数之前添加它

```
char oldpath[200], newpath[200];
sprintf(oldpath, "%s-%d%s", name, number, extension);
sprintf(newpath, "%s-%d.tmp1", name, number);

rename(oldpath, newpath); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:30:05.827

尝试学习如何使用 K&R ....implementation of printf function 中给出的省略号运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T14:06:13.790

我认为这里的问题不在您的代码中。你在看哪本书？

[本手册](http://www.opengroup.org/susv3xsh/rename.html)说`rename`接受多少参数？是否有任何东西表明`rename`使用[类似 printf 的格式字符串](http://www.opengroup.org/susv3xsh/fprintf.html)？不？

当您假设您可以通过反复试验学习而无需阅读任何手册时，这就是问题所在。像这样学习 C 是危险的。如果您的程序最终使用未定义的行为，它们*有时**可能会*在您的机器上运行，并且由于神秘的原因和以神秘的方式失败，无法完全在其他机器上运行，等等。帮自己一个忙，别再猜测了；买一本书，如果你还没有，读一读吧！您最终将学习编写可移植代码，这比猜测/试错要快得多。

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T14:01:49.930

[http://www.cplusplus.com/reference/cstdio/rename/](http://www.cplusplus.com/reference/cstdio/rename/)

他是参考。你的论点太多了。它只需要两个 char 数组。*

# jquery - 使用 Jquery Json P 将外部数据加载到 phonegap

> ID：15638956
> 
> 赞同：2
> 
> 时间：2013-03-26T13:59:15.330
> 
> 标签：jquery, cordova, jsonp

我有以下从本地 mysql 获取的 json 对象。

```
<([{"ID":"1","Title":"Chicken & Chili","Price":"$8.99","ImageURL":"\/images\/dinner\/chicchili.jpg","Serves":"2","Description":"This unique and delicious chicken chili is a much-requested meal around our house. I think you'll find it's a nice change of pace from the typical beef version."},{"ID":"2","Title":"Chicken Franchase","Price":"$9.99","ImageURL":"\/images\/dinner\/chicfran.jpg","Serves":"2","Description":"Served in a lemon and butter sauce"},{"ID":"3","Title":"Salmon","Price":"$14.99","ImageURL":"\/images\/dinner\/salmon.jpg","Serves":"1","Description":"A simple soy sauce and brown sugar marinade, with hints of lemon and garlic, are the perfect salty-sweet complement to rich salmon fillets."}]); 
```

我使用以下代码将 json 对象导入 iPhone 模拟器。我成功地在屏幕上获得了标题和价格，但没有获得图像。有没有办法获得图像？或者我在编码中遗漏了什么。有什么建议吗？

```
$(document).ready(function(){
var output = $('#output');
$.ajax({
url: 'http://localhost/Backend/getDinner.php',
dataType: 'jsonp',
jsonp: 'jsoncallback',
timeout: 5000,
success: function(data, status){
  $.each(data, function(i,item){ 
    var Menu_Dinner = '<li><a href="detail.html?id=' + item.ID + '">' +
      '<img src="images/dinner/'+ item.ImageURL + '">' +
    '<h2 class="ui-li-heading">' + item.Title + '</h2 >' + 
    '<h2>' + 'Price: ' + item.Price + '</h2>'+ '</a></li>';
    output.append(Menu_Dinner);
  });
},
error: function(){
  output.text('There was an error loading the data.');
} 
```

}); });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:55:52.847

我怀疑您需要更改链接路径。例子：

1.  如果在您的数据库中，图像 URL 路径是：`images/dinner/picture.jpg`那么代码需要是：`'<img src="' + item.ImageURL + '">'`
2.  如果您的图像 URL 路径正好，`picture.jpg`那么您可以使用现有代码。

我不知道模拟器是否有一个可以查看的控制台窗口，如果它确实将以下行添加到`success`函数的末尾并检查每个列表项的 href 属性：

```
console.log($("#output").html()); 
```

另一方面，尽量减少操作 DOM 的次数。所以在里面试试这个：

```
var temp = "";
$.each(data, function(i,item){ 
  var Menu_Dinner = '<li><a href="detail.html?id=' + item.ID + '">' +
    '<img src="images/dinner/'+ item.ImageURL + '">' +
    '<h2 class="ui-li-heading">' + item.Title + '</h2 >' + 
    '<h2>' + 'Price: ' + item.Price + '</h2>'+ '</a></li>';
  temp += Menu_Dinner;
});
output.append(temp); 
```

# c# - 相机看球体 - 极包裹

> ID：15638962
> 
> 赞同：2
> 
> 时间：2013-03-26T13:59:30.660
> 
> 标签：c#, math, 3d, xna, camera

我有一个以球体表面上的点为中心的 3D 相机。它完美地跟随并围绕它旋转，除了球体的两极。请注意，球体实际上是投影到球体的立方体，以便于管理位置坐标。

如果对象在球体周围水平移动，则相机按预期工作。但是，如果对象向球体的顶部或底部极点移动，则相机会环绕该极点。如果它直接穿过杆子，它会在穿过时出现 180 度转弯。

我理解为什么会发生这种情况 - 必须有一个全局 Up 向量让相机知道如何定位自己。如果我将其向上矢量更改为不同的方向，例如向右，则相机不再围绕顶部或底部极点翻转，而是在球体的左右两极上表现出相同的行为。

我的问题是如何改变我的相机的行为，这样就不会发生这种情况。我想让我的相机感觉好像相机处于恒定位置，看着球体，球体在其 X 和 Z 轴上旋转。

我意识到这可能会导致“错误”的方向 - 例如，如果用户从球体的正面开始，向上然后向左，他们最终会在球体的左侧但相机旋转 90 Z 轴上的度数，而如果它们从正面开始并直接移动到左侧面，则不会旋转。这很好，因为我可以检测相机何时穿过脸部并慢慢“修复”相机的局部旋转，或者允许用户解锁相机并且他们可以自己处理相机的角度。

作为参考，我的相机目前正在使用此问题中的解决方案进行计算： [相机旋转与任意平面对齐](https://stackoverflow.com/questions/15499922/camera-rotation-aligned-to-arbitrary-plane)

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:23:41.680

如果您希望球体像轨迹球一样，请按照用户控件的指定对旋转矩阵应用增量旋转（例如，x 轴和 y 轴）。

您仍然需要在更新后“重新规范化”旋转矩阵 - 否则，数值错误将蔓延，您的旋转矩阵最终将不是旋转矩阵。计算应该是这样的：

```
update =  RotX(userInput.dX) * RotY(userInput.dY)
rawUpdatedRot = userRot * update
newZ = Normalize( Cross(rawUpdatedRot.x, rawUpdatedRot.y) )
newY = Normalize( Cross(newZ, rawUpdatedRot.x) )
newX = Normalize( rawUpdatedRot.x )
userRot = Matrix(newX, newY, newZ) 
```

# asp.net - HTML5 中的 MasterPage？

> ID：15638963
> 
> 赞同：1
> 
> 时间：2013-03-26T13:59:33.413
> 
> 标签：asp.net, html, master-pages

我在网站上有几个纯 html5 页面。他们都有页眉和页脚是相同的。我想为这些页面使用母版页概念。像 asp.net masterpage （但我不想在这里使用 asp.net masterpage 概念）。我想要的简单方法。它是 IIS 网络服务器。

除了asp.net masterpage之外，htm5还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:06:58.703

您可以使用 SSI 从另一个目录导入页眉和页脚文件。您必须在 IIS 中启用它，因为默认情况下未启用它。[你可以在这里](http://blogs.msdn.com/b/robert_mcmurray/archive/2010/12/28/iis-notes-on-server-side-includes-ssi-syntax-kb-203064-revisited.aspx)阅读它。

基本上，一旦在 IIS 中启用它，您可以执行以下操作：

```
<!--#INCLUDE VIRTUAL="/includes/header.htm"--> 
```

在您的 HTML 中包含您网站根目录中的文件夹中的文件`header.htm`。`includes`

**编辑**
注意：如果您使用的是经典 ASP，您还可以将变量传递到包含的页面中，这样可以方便地设置模板外部的 <title> 等内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:01:55.750

HTML 没有（严重的）模板工具。使用模板语言。ASP.NET 母版页是一种选择。其他包括[Template-Toolkit](http://www.template-toolkit.org/) (Perl)、[Mustache](http://mustache.github.com/) (Cross-language) 和[Smarty](http://www.smarty.net/) (PHP)。

# django - Django： FOO_set.all() 用于 filter() 而不是 get()

> ID：15638969
> 
> 赞同：0
> 
> 时间：2013-03-26T13:59:46.923
> 
> 标签：django, model, foreign-keys, set

我想查找用户在我的 Django 应用程序中留下的项目的评论。

模型非常简单：

**模型.py**

```
class Item(models.Model):
    name =  models.CharField(_('Item'), max_length = 100,)
    ...

class ItemReview(models.Model):
    item = models.ForeignKey(Item)
    review = models.CharField(max_length = 140)
    ... 
```

在我`template`的列表中，我列出了从视图函数`items`传递给的内容：`template`

```
items = Item.objects.filter(name = ...) 
```

在我的模板中，我列出了以下项目：

```
{% for item in items %}
    <td>{{ item.name }}</td>
{% endfor %} 
```

**如何`reviews`在同一个循环中显示？我试过 FOO_set.all，但它似乎不适用于过滤器功能。**

这个问题看起来很简单，但我无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:05:49.097

```
class Item(models.Model):
    name =  models.CharField(_('Item'), max_length = 100,)
    ...

    def reviews(self):
        return ItemReview.object.filter(item=self)

class ItemReview(models.Model):
    item = models.ForeignKey(Item)
    review = models.CharField(max_length = 140)

{% for item in items %}
<td>
    {{ item.name }}

    {% for review in item.reviews %}
        {{review}}
    {% endfor %}
</td>
{% endfor %} 
```

# java - 可以为 Serializable 类设置临时锁吗？

> ID：15638972
> 
> 赞同：0
> 
> 时间：2013-03-26T14:00:02.573
> 
> 标签：java, serialization, concurrency, locking

我有一个实现的类，我通过一个类型为 的*锁*对象来`Serializable`保护这个类的不变量。可以让它*暂时化*还是会产生任何不需要的副作用？*`Object`*

 **代码 ：

```
class MyClass implements Serializable{

 private final transient lock = new Object();
  ....
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-15T20:34:06.443

您应该做的是使用空数组（偶数`new Object[0]`）。空数组是可序列化的，而`new Object()`不是。

做就是了：

```
private final Object lock = new Object[0]; 
```

自动（反）序列化将按预期工作，将重新创建锁。它可能会比 占用更多的内存`new Object()`，但应该可以忽略不计，并且序列化空间也会增加几个字节。

但如果您想避免自定义序列化，它绝对是最简单的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:03:53.497

这很好，只要您[在反序列化时重新创建对象，](https://stackoverflow.com/questions/4811615/deserialize-a-transient-member-of-an-object-to-a-non-null-default-in-java)以便您有一些东西可以同步。

此外，您可能必须[删除`final`修饰符](https://stackoverflow.com/questions/2968876/final-transient-fields-and-serialization)。

由您决定这是否值得麻烦。**

# c# - 修改 Windows 窗体 Topmost 属性

> ID：15638977
> 
> 赞同：1
> 
> 时间：2013-03-26T14:00:06.637
> 
> 标签：c#, winforms, messagebox

我希望我的一些表单在打开时粘在屏幕上并禁用它后面的表单，比如 MessageBox.Show(); 消息框，以便在用户尝试单击优先表单后面的表单时发出哔声提醒用户。我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:03:59.937

您可以使用`ShowDialog`而不是`Show`

这将打开一个对话框作为模式对话框（即在此对话框及其子项关闭之前无法单击其他对话框）

例如 `form1.ShowDialog();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:03:49.837

你可能想看看 ake`TopMost`财产

[http://msdn.microsoft.com/en-GB/library/system.windows.forms.form.topmost.aspx](http://msdn.microsoft.com/en-GB/library/system.windows.forms.form.topmost.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:02:47.050

您应该使用`ShowDialog()`方法打开您的表单。这样您就可以将表单作为模式对话框打开。

# javascript - VideoJS 标题导致未定义的错误

> ID：15638989
> 
> 赞同：0
> 
> 时间：2013-03-26T14:00:46.700
> 
> 标签：javascript, html, video, html5-video, video.js

我正在使用 VideoJS，CDN 托管版本工作正常，但我希望离线使用 VideoJS 并修改 CSS，所以我自己托管。

我在 videojs.js 上收到一个未定义的错误：

```
this.player.textTrackDisplay.addComponent(this); 
```

我知道我的 captions.vtt 文件是正确的，因为它适用于演示 html 文件。我的标记：

```
<div id="mainVideoList">
        <video id="mainVideoOne" class="video-js vjs-default-skin" width="956" height="538" autoplay preload="auto" loop data-setup="{}">
            <source type="video/mp4" src="assets/Penguins.mp4">
            <track kind="subtitles" src="src/videojs/captions.vtt" default>
        </video>
    </div> 
```

视频播放正常，但抛出错误并且不显示字幕。

谢谢。

编辑：仅当我将标题设置为默认并且控件不可见时才会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T13:28:52.483

不幸的是，您正在寻找的章节功能（尚未）在 videojs 版本 4.x 中工作 - 这是一个已知问题：

[https://github.com/videojs/video.js/issues/676](https://github.com/videojs/video.js/issues/676)

但是，较旧的 3.x 版本**确实**有效。我已经成功地使用 v3.2 来提供带有章节的视频（甚至在 IE6 中也可以使用）——但早期版本的播放器既无法访问也无法响应（无需付出很多额外的努力）。

为了快速处理未捕获的 TypeError（没有足够的时间更彻底地处理），我添加了以下创可贴：

```
if (typeof component === 'undefined') return; 
```

到函数

```
vjs.Component.prototype.addChild 
```

就在该行之前：

```
this.children_.push(component); 
```

（在我使用的 v4.3 的非缩小版本中，这将在第 1660 行左右）。

这显然无法修复损坏的章节功能，但会捕获抛出的错误。

我建议不时检查此链接，因为在过去几个月中似乎（最终）在该问题上取得了一些进展：[https ://github.com/videojs/video.js/issues/676](https://github.com/videojs/video.js/issues/676)

# php - .htaccess 仅针对资源重定向

> ID：15638990
> 
> 赞同：0
> 
> 时间：2013-03-26T14:00:51.327
> 
> 标签：php, .htaccess, mod-rewrite, resources, subdirectory

我正在尝试一种解决方案来获得类似的东西：

```
/dev/base/route.php -> include "/dev/base/mysite/index.php" 
```

对于 php，我使用这个系统当然没有问题，所有代码都可以正常工作，但是对于 html 标签（例如`<img`，`<link`等等），我需要将请求重定向到`./dev/base/mysite/`目录。

我正在尝试使用 htaccess 解决它（不更改 url 栏），使用以下代码：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond /mysite/$0 -f
RewriteCond /mysite/$0 -d
RewriteRule ^$ /mysite/$0 [L] 
```

但它不起作用。（我对 mod_rewrite 不是很熟练）

另外，我不能`/dev/base/`在 htaccess 文件中静态指定路径，它应该“自动”解决，因为它可以根据工作站进行更改。

所以我需要一些在伪 php 代码语法中应该类似于它的东西：

```
if ( file_exists(SITE_ROOT_DIR."/mysite/".$request) && !file_exists(SITE_ROOT_DIR."/".$request) )
   $url=SITE_ROOT_DIR."/mysite/".$request;
else
   $url=SITE_ROOT_DIR."/".$request; 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:18:46.090

用这个改变你的代码：

```
RewriteBase /dev/base/

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteCond %{DOCUMENT_ROOT}/dev/base/mysite/$1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/dev/base/mysite/$1 -d [OR]
RewriteCond %{DOCUMENT_ROOT}/dev/base/mysite/$1 -l
RewriteRule ^(.*?)/?$ mysite/$1 [L] 
```

# css - 带有边框的元素的背景图像应覆盖边框

> ID：15638993
> 
> 赞同：0
> 
> 时间：2013-03-26T14:01:08.703
> 
> 标签：css, background, border, background-image, z-index

我目前有一个带背景和边框的 h4。

![在此处输入图像描述](../Images/1bade2bf72d506f59f2702473dc9b6af.png)

左侧标记的边框和顶部和底部的边框必须在蓝色背景图像所在的区域消失。

最后，它应该如下所示：

![在此处输入图像描述](../Images/fd4113b01dff08ee2b853d916e8e15cd.png)

我的想法是我通过 将背景放在边框上`z-index:`，这是行不通的，因为边框与背景属于同一元素。

我当前的代码如下所示：

```
.workstations .textbox h4 { 
    display: inline-block; 
    color: #3391cc; 
    font-size: 1em; font-weight: normal;
    line-height: 100%;
    background: url(images/workstations_bg.png) no-repeat; 
    border: 1px solid #dedede; 
    padding: 14px 0 9px 25px;
    } 

.workstations .textbox h4 span {
    display: inline-block; 
    color: #e86228;
    font-size: 0.9rem;
    } 
```

无论如何要做？我试着做类似的事情

`.workstations .textbox h4 background-image { z-index: 100;} .workstations .textbox h4 border { z-index: 50;}`

哪个不起作用...

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:11:37.283

您需要将背景的蓝色部分分开，然后如果您在`span`里面放一个，`h4`您可以使用类似的东西：

```
h4 {background:url(http://originalimage) left center no-repeat; border:1px solid red;}
h4 span {display:block; margin:-1px 0 -1px -1px; padding:5px 10px 5px 55px; /*use the span for your padding and pad left enough for the blue*/ background:url(http://blueimage) left center no-repeat;} 
```

[http://jsfiddle.net/XUNJe/](http://jsfiddle.net/XUNJe/)

# debugging - 关闭调试堆有什么负面影响？(_NO_DEBUG_HEAP==1)

> ID：15638995
> 
> 赞同：7
> 
> 时间：2013-03-26T14:01:17.453
> 
> 标签：debugging, visual-studio-2012, environment-variables, heap-memory

我的程序的初始阶段将大量数据加载到 STL 容器中。我发现要花几分钟才能真正了解我的程序。

经过一番搜索，我发现我可以在我的 VS2012 配置属性->调试->环境变量中设置 _NO_DEBUG_HEAP==1...关闭 Windows 调试堆的使用。这使我的调试速度提高了 10 倍。我还没有找到任何描述我这样做会失去什么调试功能。

总而言之：使用 Windows 调试堆完成了哪些检查以及生成了哪些调试信息？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:57:50.087

调试堆以两种方式影响性能：

首先，它在堆操作期间添加对堆完整性的检查。我还没有找到有关这些检查的详细信息，但假设在每次分配或空闲时，它都涉及验证用于管理堆的数据结构的完整性。

其次，它禁用了低碎片堆 (LFH) 选项。在发布版本中，默认情况下您会获得 LFH。在调试版本中，您不需要——除非您使用 _NO_DEBUG_HEAP。这不一定是速度惩罚，但可能是。

文档中有[`HeapSetInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366705%28v=vs.85%29.aspx).

请注意，C 和 C++ 运行时库提供构建在系统堆 API 之上的内存管理，并且它们还具有可能影响性能的调试和非调试模式。关于调试 CRT 的作用有[更详细的文档。](http://msdn.microsoft.com/en-us/library/974tc9t1%28v=vs.100%29.aspx)您可能会检查并查看关闭 CRT 调试是否足以让您显着提高性能而不会弄乱进程堆的调试模式。

# mysql - 复杂的mysql选择查询

> ID：15638997
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:01:25.573
> 
> 标签：mysql, sql, django

我的桌子是这样的：

```
------------------------------------
id | value    |  date_value
------------------------------------
1  |    a     |  2013-01-01T00:00:00
2  |    a     |  2013-01-01T05:00:00
3  |    b     |  2013-01-01T03:00:00
4  |    a     |  2013-01-02T00:00:00
5  |    a     |  2013-01-03T00:00:00
6  |    c     |  2013-01-06T00:00:00
7  |    a     |  2013-01-10T05:00:00
8  |    a     |  2013-01-10T06:00:00
9  |    a     |  2013-01-10T07:00:00 
```

我想选择`((more than 2 times duplicate`价值`'s count) /(`价值`'s count except duplicate))`

在上述情况下，结果是 1/3（因为只有值`a`是重复值的 2 倍）。

我如何为此制作sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:30:37.293

那要看什么`more than 2 times duplicate value's count`意思了。如果这意味着出现超过 4 次的值，您应该：

```
select value
from your_table
group by value
having count(*) >= 4 
```

四个可以替换为所需的值。可能是两个，我不确定。

第二部分似乎是：

```
select count(distinct value) from your_table; 
```

因此，考虑到第一部分仅要求重复项，最终的 sql 可能如下所示：

```
select count(value) / (select count(distinct value) from your_table)
from(
    select value
    from your_table
    group by value
    having count(*) >= 2
    ) 
```

# c - C中的Malloc警告

> ID：15638998
> 
> 赞同：0
> 
> 时间：2013-03-26T14:01:27.460
> 
> 标签：c, malloc, warnings

> 控制器* ctrl = (Controller*)malloc(sizeof(Controller));

*   内置函数'malloc'的不兼容隐式声明[默认启用]
*   函数'malloc'的隐式声明[-Wimplicit-function-declaration]
    我在这个malloc中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:04:07.137

尝试在文件的开头添加这个

```
#include <stdlib.h> 
```

# linux - 从文件中获取模式并从不同目录中 grep 与模式关联的所有文件

> ID：15638999
> 
> 赞同：0
> 
> 时间：2013-03-26T14:01:28.637
> 
> 标签：linux

我有一个这样的文件名列表：

```
T0rain.Zfp691_0895.2_v2_deBruijn.txt
Train.Hbp1_2241.2_v2_deBruijn.txt
Train.Zfp740_0925.2_v2_deBruijn.txt
Train.Hbp1_2241.3_v1_deBruijn.txt
Train.Zfp740_0925.3_v1_deBruijn.txt
Train.Hic1_2816.2_v1_deBruijn.txt
Train.Zic1_0991.2_v1_deBruijn.txt 
```

我想提取火车之间的所有名称。和_这样：

```
Zfp691
Hbp1
Zfp740
Hbp1
zfp740
Hic1
Zic1 
```

比我有另一个文件列表：

```
Zfp691.pwm.txt
Hbp1.pwm.txt
Zfp740.pwm.txt
Hbp1.pwm.txt
zfp740.pwm.txt
Hic1.pwm.txt
Zic1.pwm.txt
Zic1.pwm.RC.txt 
```

我想提取所有匹配的案例，例如：

Train.Zic1_0991.2_v1_deBruijn.txt 匹配 Zic1.pwm.txt 和 Zic1.pwm.RC.txt

这些输出参数被传递给我的 R 脚本。所以`SH`脚本应该返回参数=

```
$i (Train.Zic1_0991.2_v1_deBruijn.txt) +  $j Zic1.pwm.txt
$i (Train.Zic1_0991.2_v1_deBruijn.txt) +  $j Zic1.pwm.RC.txt 
```

我不知道这是否可能。我开始尝试这个：

```
#!/bin/bash

for i in input/*/testtrain/Train*deBruijn.txt
do
    $i 
done

for j in input/All_PWMs/*/*.txt
do
    $j 
done

echo qsub script3.sh $i $j 
```

在这里，我尝试将参数提供给 script3.sh，但这只会返回 1 个组合。任何人的提示或提示？喜欢如何匹配/grep名称。或者传递参数的不同方式。

Script3.sh 用于在 linux 命令行中调用 R。因此，args 只是通过此文件传递以调用具有 debruijn 和 pwm 的 1 个组合的单个 R 作业。

r 脚本需要 1 个 debruijn.txt 和 1 个 pwm.txt 才能计算出我需要的值。所以对于这个例子，我将得到 2 种组合：

```
debruijn.txt and pwm1.txt   -----> pass the args to R as combination 1
debruijn.txt and pwm2.txt   -----> pass the args to R as combination 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:13:40.937

珀尔：

```
#!/usr/bin/perl

@files=glob("*.*_*");

foreach $f (@files) {
  $f =~ /^[^\.]+\.([^_]+)_/;
  $pre = $1;
  @f2 = glob ("$1*");
  print "$f found files ".join(" ",@f2)."\n";
  system ("./script.sh",$f,@f2) && die ($!);
} 
```

给出输出：

```
T0rain.Zfp691_0895.2_v2_deBruijn.txt found files Zfp691.pwm.txt
Train.Hbp1_2241.2_v2_deBruijn.txt found files Hbp1.pwm.txt
Train.Hbp1_2241.3_v1_deBruijn.txt found files Hbp1.pwm.txt
Train.Hic1_2816.2_v1_deBruijn.txt found files Hic1.pwm.txt
Train.Zfp740_0925.2_v2_deBruijn.txt found files Zfp740.pwm.txt
Train.Zfp740_0925.3_v1_deBruijn.txt found files Zfp740.pwm.txt
Train.Zic1_0991.2_v1_deBruijn.txt found files Zic1.pwm.RC.txt Zic1.pwm.txt 
```

我的“script.sh”是：

```
#!/bin/sh

echo Script got $0 $1 $2 $3 
```

确保你 chmod 755 所有脚本等。